# StackOverflow 问答 14229000-14229999

# sql - 与 UNION 一起使用时，对每个 SQL Server 查询都不起作用的排序

> ID：14229000
> 
> 赞同：0
> 
> 时间：2013-01-09T05:48:47.920
> 
> 标签：sql, sql-server, sql-server-2008, tsql, greatest-n-per-group

我必须合并来自 3 个具有不同列的不同表的数据，并且我想要的输出应该基于每个表的不同排序条件。

我在下面使用此查询，但此查询根据菜单位置对整体结果进行排序，如何更改此查询以对单个查询的结果进行排序

```
SELECT DISTINCT 
     PID, MENU, Handler, PageLangID, ParentID, IssueID, CatID, MenuPosition 
FROM (
   --Pages Table 
   SELECT TOP 50 
       PageId AS PID,SUBSTRING(PageName,0,20) AS MENU,SUBSTRING(PageInternalLinkURL,0,24) AS Handler, PageLangID,PageInheritance AS ParentID, 1 AS IssueID, 1 AS CatID, 
        PageLinkPosition as MenuPosition  FROM pg_Pages  WHERE PageLangID = 1  ORDER BY PageLinkPosition DESC 
UNION 
--Article Category Table
SELECT TOP 20 p.PageID AS PID, SUBSTRING(c.ArticleCategoryName,0,20) AS MENU,SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler, 
c.LangID,p.PageID,1, ArticleCategoryID, 1 AS MenuPosition FROM art_Category c JOIN pg_Pages p 
ON c.PageID = p.PageID  JOIN art_CategoryType ct ON c.Type = ct.CategoryTypeID WHERE c.LangID =1  AND c.Type =1 
ORDER BY c.ArticleCategoryName  
UNION 
--Magazine Table
SELECT TOP 10 p.PageID AS PID, CAST(IssueCode AS varchar(10)),SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler,LangID,p.PageID AS ParentID, m.IssueID AS IssueID, 1, 
       1 AS MenuPosition FROM Magazine m   JOIN pg_pages p ON m.PageID = p.PageID   WHERE LangID =1  ORDER BY 2 DESC  
) AS T  WHERE T.PageLangID = 1 ORDER BY MenuPosition 
```

**第二种方式**

如果我使用以下查询，那么我会收到以下错误

> *消息 156，级别 15，状态 1，第 4 行
> 关键字“UNION”附近的语法不正确。
> 消息 156，级别 15，状态 1，第 10 行
> 关键字“UNION”附近的语法不正确。*

**询问**

```
--Pages Table 
SELECT TOP 50 PageId AS PID,SUBSTRING(PageName,0,20) AS MENU,SUBSTRING(PageInternalLinkURL,0,24) AS Handler, PageLangID,PageInheritance AS ParentID, 1 AS IssueID, 1 AS CatID, 
        PageLinkPosition as MenuPosition  FROM pg_Pages  WHERE PageLangID = 1  ORDER BY PageLinkPosition DESC 
UNION 
--Article Category Table
SELECT TOP 20 p.PageID AS PID, SUBSTRING(c.ArticleCategoryName,0,20) AS MENU,SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler, 
c.LangID,p.PageID,1, ArticleCategoryID, 1 AS MenuPosition FROM art_Category c JOIN pg_Pages p 
ON c.PageID = p.PageID  JOIN art_CategoryType ct ON c.Type = ct.CategoryTypeID WHERE c.LangID =1  AND c.Type =1 
ORDER BY c.ArticleCategoryName  ASC
UNION 
--Magazine Table
SELECT TOP 10 p.PageID AS PID, CAST(IssueCode AS varchar(10)),SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler,LangID,p.PageID AS ParentID, m.IssueID AS IssueID, 1, 
       1 AS MenuPosition FROM Magazine m   JOIN pg_pages p ON m.PageID = p.PageID   WHERE LangID =1  ORDER BY 2 DESC 
```

**样本数据**

```
PID         MENU                 Handler                  PageLangID  ParentID    IssueID     CatID       MenuPosition
----------- -------------------- ------------------------ ----------- ----------- ----------- ----------- ------------
6           Book Review          Page.aspx                1           6           1           18          1
6           Business             Page.aspx                1           6           1           16          1
6           Culture              Page.aspx                1           6           1           3           1
6           Economy              Page.aspx                1           6           1           2           1
6           Finance              Page.aspx                1           6           1           19          1
6           Infrastructure       Page.aspx                1           6           1           17          1
6           Lifestyle            Page.aspx                1           6           1           20          1
6           Others               Page.aspx                1           6           1           21          1
6           People               Page.aspx                1           6           1           7           1
6           Politics             Page.aspx                1           6           1           1           1
6           Sports               Page.aspx                1           6           1           4           1
12          102                  Page.aspx                1           12          3           1           1
12          103                  Page.aspx                1           12          4           1           1
12          106                  Page.aspx                1           12          1           1           1
12          109                  Page.aspx                1           12          5           1           1
1           Home                 Default.aspx             1           0           1           1           10
11          Video                Videos.aspx              1           10          1           1           10
2           About Us             Page.aspx                1           0           1           1           20
5           Articles             Articles.aspx            1           0           1           1           30
6           Categories           Page.aspx                1           0           1           1           40
12          Archive              Page.aspx                1           0           1           1           50
3           News                 News.aspx                1           0           1           1           60
10          Multimedia           Multimedia.aspx          1           0           1           1           70 
```

我想要第一个查询排序`ORDER BY PageLinkPosition DESC`

要排序的第二个查询`ORDER BY c.ArticleCategoryName ASC`

和第三个查询排序依据`ORDER BY IssueCode DESC`

我尝试了很多方法，但无法使其正常工作。

感谢这方面的帮助

**更新**：基于标记解决方案的工作查询，改动很小

```
SELECT DISTINCT PID, MENU, Handler, PageLangID, ParentID, IssueID, CatID, MenuPosition, block, rNum
FROM    
(   --Pages Table 
    SELECT TOP 50 
        PageId AS PID,SUBSTRING(PageName,0,20) AS MENU,SUBSTRING(PageInternalLinkURL,0,24) AS Handler, PageLangID,PageInheritance AS ParentID, 1 AS IssueID, 1 AS CatID, 
        PageLinkPosition as MenuPosition
        ,Block = 1
        ,rNum = ROW_NUMBER() OVER (ORDER BY PageLinkPosition DESC)  
    FROM pg_Pages  
    WHERE PageLangID = 1  
    UNION ALL   -- Better to UNION ALL and then DISTINCT outside
--Article Category Table
    SELECT TOP 20 
        p.PageID AS PID, SUBSTRING(c.ArticleCategoryName,0,20) AS MENU,SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler, 
        c.LangID,p.PageID,1, ArticleCategoryID, 1 AS MenuPosition
        ,Block = 2 
        ,rNum = ROW_NUMBER() OVER (ORDER BY c.ArticleCategoryName )
    FROM art_Category c 
    JOIN pg_Pages p             ON c.PageID = p.PageID  
    JOIN art_CategoryType ct    ON c.Type = ct.CategoryTypeID 
    WHERE c.LangID =1  AND c.Type =1 
    UNION ALL
--Magazine Table
    SELECT TOP 10 p.PageID AS PID, CAST(IssueCode AS varchar(10)),SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler,LangID,p.PageID AS ParentID, m.IssueID AS IssueID, 1, 
       1 AS MenuPosition
       ,Block = 3 
       ,rNum = ROW_NUMBER() OVER (ORDER BY CAST(IssueCode AS varchar(10))DESC)
    FROM Magazine m   
    JOIN pg_pages p ON m.PageID = p.PageID   
    WHERE LangID =1  
) AS T  WHERE T.PageLangID = 1 
ORDER BY Block, rNum 
```

MARK 稍后将他的解决方案更新为 CTE 版本，请检查他的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:02:58.723

这应该有效；

```
;WITH CTE AS
(
    SELECT TOP 50 
         PageId AS PID
        ,SUBSTRING(PageName,0,20) AS MENU
        ,SUBSTRING(PageInternalLinkURL,0,24) AS Handler
        ,PageLangID
        ,PageInheritance AS ParentID
        ,1 AS IssueID
        ,1 AS CatID
        ,PageLinkPosition as MenuPosition
        ,Block = 1
        ,rNum = ROW_NUMBER() OVER (ORDER BY PageLinkPosition DESC)  
    FROM pg_Pages  
    WHERE PageLangID = 1  
    UNION ALL   
--Article Category Table
    SELECT TOP 20 
         p.PageID AS PID
        ,SUBSTRING(c.ArticleCategoryName,0,20) AS MENU
        ,SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler
        ,c.LangID
        ,p.PageID
        ,1
        ,ArticleCategoryID
        ,1 AS MenuPosition
        ,Block = 2 
        ,rNum = ROW_NUMBER() OVER (ORDER BY c.ArticleCategoryName )
    FROM art_Category c 
    JOIN pg_Pages p             ON c.PageID = p.PageID  
    JOIN art_CategoryType ct    ON c.Type = ct.CategoryTypeID 
    WHERE c.LangID =1  AND c.Type =1 
    UNION ALL
--Magazine Table
    SELECT TOP 10 
         p.PageID AS PID
        ,CAST(IssueCode AS varchar(10))
        ,SUBSTRING(p.PageInternalLinkURL,0,24) AS Handler
        ,LangID
        ,p.PageID AS ParentID
        ,m.IssueID AS IssueID
        ,1
        ,1 AS MenuPosition
        ,Block = 3 
        ,rNum = ROW_NUMBER() OVER (ORDER BY CAST(IssueCode AS varchar(10)))
    FROM Magazine m   
    JOIN pg_pages p ON m.PageID = p.PageID   
    WHERE LangID =1  
)
,Deduplicate AS
(
    SELECT   PID
            ,MENU
            ,Handler
            ,PageLangID
            ,ParentID
            ,IssueID
            ,CatID
            ,MenuPosition 
            ,Block
            ,rNum
            ,Occ = ROW_NUMBER() OVER (PARTITION BY PID, MENU, Handler, PageLangID, ParentID, IssueID, CatID, MenuPosition ORDER BY (SELECT NULL))
    FROM CTE
)
SELECT  PID
       ,MENU
       ,Handler
       ,PageLangID
       ,ParentID
       ,IssueID
       ,CatID
       ,MenuPosition 
FROM Deduplicate
WHERE Occ = 1
ORDER BY Block, rNum 
```

# python - 如何使用结构在不同的组中运行自动化任务

> ID：14229003
> 
> 赞同：0
> 
> 时间：2013-01-09T05:48:56.770
> 
> 标签：python, fabric

我想在不同的 pc 组上运行不同的命令。我的织物文件如下：

```
env.hosts = ['125.221.225.31','125.221.225.36','125.221.225.33','125.221.225.34','125.221.225.35']
env.roledefs = {
    'master':['125.221.225.31'],
    'slave':['125.221.225.33','125.221.225.34','125.221.225.35','125.221.225.36']}

@roles('master')
def get_last_hosts():
    with cd('/etc'):
        get('hosts','/tmp/hosts')

@roles('slave')
def upload_hosts():
    with lcd('/tmp'):
        put('hosts','/etc/hosts',use_sudo=True)

def update_hosts():
    get_last_hosts()
    upload_hosts() 
```

我可以跑：

```
fab get_last_hosts, 
```

然后运行：

```
fab upload_hosts 
```

我想将这些步骤合并为一个步骤，可以这么说：

更新主机

但这不起作用，它将`update_hosts`在 env.hosts 中的每台电脑上运行，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:10:52.073

您可以使用[执行](http://docs.fabfile.org/en/1.5/usage/execution.html#intelligently-executing-tasks-with-execute)命令解决此问题。在这样的事情中：

```
def update_hosts():
    execute(get_last_hosts)
    execute(upload_hosts) 
```

# vba - 运行代码后 Excel 日期格式更改

> ID：14229010
> 
> 赞同：0
> 
> 时间：2013-01-09T05:49:48.033
> 
> 标签：vba, date

当我运行此代码时，它会将日期格式从 更改`dd:mm:yy`为`mm:dd:yy`。

请给我一些提示。虽然它完成了我的工作，但如何保持日期格式不变？

```
Sub copyAllselectedWbtoSheets()
Set destWB = ActiveWorkbook
Dim DestCell As Range
FileNames = Application.GetOpenFilename( _
        filefilter:="Excel Files (*.csv*),*.csv*", _
        Title:="Select the workbooks to load.", MultiSelect:=True)
If IsArray(FileNames) = False Then
    If FileNames = False Then
        Exit Sub
    End If
End If
For N = LBound(FileNames) To UBound(FileNames)
    Set wb = Workbooks.Open(fileName:=FileNames(N), ReadOnly:=True)
    With wb
      .Sheets(1).Copy After:=destWB.Sheets(destWB.Sheets.Count)
      ActiveSheet.Name = Replace(wb.Name, ".csv", "ABC") 'Name sheet
      .Close True
    End With
Next N
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:51:23.303

*   [Excel 可能会受到系统日期/时间设置的影响。](http://answers.oreilly.com/topic/1694-how-excel-stores-date-and-time-values/)

*   使用 Excel，区域设置对您有什么影响？[如何将 VBA 文本框格式化为长日期](https://stackoverflow.com/questions/13420691/how-to-format-vba-textbox-to-long-date/13421587#13421587)。

因此，如果您还没有阅读这些帖子，只需执行`date formatting`. 但这是暂时的。如果您需要一劳永逸的解决方案，您仍然必须进行上述区域设置更改。

`Format(yourdate, "dd:mm:yy")`

# iphone - 如何滑出表格视图控制器（不是单元格） - iPhone

> ID：14229021
> 
> 赞同：0
> 
> 时间：2013-01-09T05:50:31.697
> 
> 标签：iphone, ios6, uitableview, uiswipegesturerecognizer

我有一个标签栏应用程序。它有 5 个选项卡。我将第三个选项卡连接到连接到表视图控制器的导航控制器。很简单，对吧？

好吧，我最近决定将左/右滑动手势作为一种可选方式来左右导航到选项卡栏控制的应用程序中的每个选项卡。手势效果很好，除了我没有办法在第三个选项卡（带有 的那个`UITableView`）上实现手势，因为没有与之关联的实现文件。

这就是我的问题：如何在第三个选项卡上实现手势，以便我可以通过滑动导航离开它？我可以*滑入*那个标签，但不能*滑出*它。我是 iOS 开发的新手，非常感谢任何帮助！

（使用 ARC、Storyboard 和 Xcode 4.5.2）

**编辑：** 这是我的表格视图控制器如何连接到我的标签栏控制器的屏幕截图： ![在此处输入图像描述](../Images/290c8c9f82bb2418d1e67c7c9755d511.png)

**解决方案：** 标记为正确的答案确实是正确的。它向我解释了如何创建我的 UITableViewController 的子类。但我也想知道如何以编程方式实现我的 TableView ......所以经过一番搜索后，这个链接几乎准确地显示了如何做到这一点：[Ruchi Raval 在 mobisoftinfotech 上的帖子](http://www.mobisoftinfotech.com/blog/iphone/iphone-uitableview-tutorial-grouped-table/)。但是，我最终只是按照链接中的步骤操作，并且最终删除了我原来的 UITableViewController，因为我已经通过链接中的步骤创建了一个新的 UITableViewController，并通过 Storyboard（ctrl + 拖动）将它连接到我的 NavigationController。

希望这可以帮助任何有我同样问题的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:23:10.133

要在 VC 上控制手势，您需要自己的子类。创建一个名为 MyTableViewController 的新objective-c 对象。Xcode 允许您在创建文件时指定超类，使用 UITableViewController。

Xcode 在新文件中提供了一些模板代码——先别管它。在情节提要中，我认为您要修复的选项卡有一个导航（vc），其根 vc 是 UITableViewController。

选择该表 vc 并选择身份检查器（右上角，左起第三个选项卡）。您应该看到一个名为自定义类的部分。当前的类可能是 UITableViewController。将其更改为 MyTableViewController，或任何您命名的新类。

构建并运行。现在你控制那个表 vc。回到它的实现文件，你可以在 viewDidLoad: 中添加你的手势代码。

# sockets - 如何检查绑定到特定端口的进程？

> ID：14229028
> 
> 赞同：0
> 
> 时间：2013-01-09T05:51:04.127
> 
> 标签：sockets, networking, network-programming, netstat

我在应用程序中遇到一些错误，例如：

```
Failed to bind to socket 192.168.122.1:87 : Address already in use 
```

所以我想看看哪个进程正在使用这个套接字。

有什么办法可以做到这一点`netstat`吗？

# python - numpy 2D数组的块均值

> ID：14229029
> 
> 赞同：9
> 
> 时间：2013-01-09T05:51:07.090
> 
> 标签：python, numpy, matrix, reshape, mean

我想在 NumPy 中找到二维数组的块均值。为简单起见，我们假设数组如下：

```
array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11],
       [12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]]) 
```

我想把这个数组分成 3 个大小为 2x4 的块，然后找到所有三个块的均值（这样均值的形状是 2x4。第一个块由前 4 列组成，下一个由下一个4列等等。所以我的块是：

```
array([[0, 1, 2, 3],
       [12, 13, 14, 15]])

array([[ 4,  5,  6,  7],
       [16, 17, 18, 19]])

array([[ 8,  9, 10, 11],
       [20, 21, 22, 23]]) 
```

我可以使用循环来执行此操作，但我觉得最好先将此数组转换为 3D 数组`reshape`，然后`mean`在沿第三轴的 3D 数组上使用该方法。这可能类似于[这个问题](https://stackoverflow.com/questions/13990465/3d-numpy-array-to-2d)。

如果有人能提供给我，将不胜感激：

1）。如果存在这样的技巧，则执行块的适当 Pythonic 命令甚至无需转换为 3D。

2）。如果不是适当的 Pythonic 命令来执行 2D 到 3D 转换。

3）。了解使用循环或使用上面的命令是否会更有效（在空间方面）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T06:12:02.510

Numpy 方法几乎总是会击败 python 循环，所以我将跳过你的 1。

至于 2，在这种特殊情况下，以下工作：

```
a = np.array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11],
              [12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]])
a = a.reshape(2, 3, 4)
>>> a
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
>>> np.mean(a, axis=1)
array([[  4.,   5.,   6.,   7.],
       [ 16.,  17.,  18.,  19.]]) 
```

诀窍在于`reshape`. 对于需要列块的一般情况，`n`以下是一个选项

```
a = a.reshape((a.shape[0], -1, n)) 
```

您在 3 中的担忧大多是没有根据的。[`reshape`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)返回原始数组的视图，而不是副本，因此转换为 3D 只需要更改数组的`shape`和`strides`属性，而无需复制任何实际数据。

**编辑** 为确保整形不会复制数组，而是返回一个视图，请按照以下方式进行整形

```
a.shape = a = a.reshape((a.shape[0], -1, n)) 
```

[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)中的示例大致如下：

```
>>> a = np.arange(12).reshape(3,4)
>>> b = a.T
>>> b.shape = (12,)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: incompatible shape for a non-contiguous array 
```

通常，只有在阵列上执行 , 或类似操作时`transpose`才会`rollaxis`出现问题。`swapaxes`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-21T21:38:08.237

我可以回答你的号码 1)。

```
vstack([mean(a[:,4*i:4*(i+1)],axis=1) for i in range(3)]).T 
```

# c++ - C++ QT 内存分配

> ID：14229035
> 
> 赞同：5
> 
> 时间：2013-01-09T05:51:32.980
> 
> 标签：c++, qt

> **可能重复：**
> [Qt 中的内存管理？](https://stackoverflow.com/questions/2491707/memory-management-in-qt)

我一直在学习 Qt，并且讨论过是否应该删除指向 Q 对象（例如 QLabel）的指针。Qt 是否对指向 Qt 对象的指针进行自动内存管理，还是必须手动删除它们？

前任）

```
#include <QApplication>
#include <QLabel>

int main(int argc, char *argv[])
{

 QApplication app(argc, argv);

 QLabel *label = new QLabel("Im Tough.");

 label->show();

 int result = app.exec();

 //would this be necessary or would QT handle this automatically?
 delete label;

 return result;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T06:08:45.740

如果对象有父对象，则不需要释放它——它将由 QT 内存管理系统自动完成。

在您的具体示例中，您确实需要删除您的对象，因为它没有父对象。即使您不这样做，`app.exec();`返回时也会由您的操作系统完成。

* * *

从有关[qt 对象树](http://doc.qt.digia.com/qt/objecttrees.html)的文档中：

> QObjects 在对象树中组织自己。当您使用另一个对象作为父对象创建 QObject 时，它会添加到父对象的 children() 列表中，并在父对象存在时被删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T06:01:06.227

如果 QLabel 有父级，它将在其父级删除时被删除，否则你应该自己做。更多：[http ://doc.qt.digia.com/qt/objecttrees.html](http://doc.qt.digia.com/qt/objecttrees.html)

# postgresql - postgres 中的 LAST_DAY 函数

> ID：14229038
> 
> 赞同：18
> 
> 时间：2013-01-09T05:51:48.033
> 
> 标签：postgresql

postgres 中是否有任何与 Oracle 函数 LAST_DAY() 等效的函数。

我需要在 postgres 中获取最后一天（包括月份和年份）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-09T06:10:40.297

好吧，在 postgres 中，似乎没有`LAST_DAY()`与 oracle 等效的功能。

如果需要，您可以通过以下方式拥有自己的

## 选择查询

```
SELECT (date_trunc('MONTH', now()) + INTERVAL '1 MONTH - 1 day')::date; 
```

## plsql 函数

```
 CREATE OR REPLACE FUNCTION last_day(date)
        RETURNS date AS
        $$
        SELECT (date_trunc('MONTH', $1) + INTERVAL '1 MONTH - 1 day')::date;
        $$ LANGUAGE 'sql'
        IMMUTABLE STRICT; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T11:21:35.867

```
create or replace funCtion last_day(fromdt anyelement)
returns date as
$BODY$
  SELECT (date_trunc('MONTH', cast(fromdt as date)) + INTERVAL '1 MONTH - 1 day')::date;
$BODY$
  LANGUAGE sql VOLATILE
  COST 100;
  ALTER FUNCTION last_day(anyelement)
    OWNER TO postgres; 
```

# c# - 如何从 P、Q 和 E 计算 RSA 加密的 D

> ID：14229040
> 
> 赞同：7
> 
> 时间：2013-01-09T05:51:59.547
> 
> 标签：c#, .net, rsa, chinese-remainder-theorem

我正在尝试`D`使用`P`,`Q`和`E`( `Dp`,`Dq`并且也可用)。`(p`^(`-1`)`mod q)`

根据[这个答案](https://stackoverflow.com/a/14195667/1041046)和[这个答案](https://stackoverflow.com/a/14073787/1041046)，并使用以下方法更新[这个问题](https://stackoverflow.com/q/14073595/1041046)，我应该得到`D`。

为了测试这一点，我生成了密钥对并尝试从现有的组件中计算组件并将结果与​​原始组件进行比较。所有的结果都很好，除了`D`。我从上面的答案中复制的计算有问题。如果有人能告诉我我做错了什么，那就太好了。

**测试代码**

```
using System;
using System.Numerics;
using System.Security.Cryptography;
using System.Text;

class Program {

    static RSAParameters key = new RSAParameters() {
        P = new byte[]{
                0xDE, 0xA6, 0x35, 0x0B, 0x0A, 0xA5, 0xD7, 0xA0, 0x5C, 0x49, 0xEA, 0xD1, 0x3F, 0xA6, 0xF5, 0x12, 
                0x19, 0x06, 0x25, 0x8A, 0xD9, 0xA7, 0x07, 0xE7, 0x0D, 0x8A, 0x7C, 0xB1, 0xD4, 0x81, 0x64, 0xFD, 
                0x04, 0xEC, 0x47, 0x33, 0x42, 0x0B, 0x22, 0xF2, 0x60, 0xBB, 0x75, 0x62, 0x53, 0x3E, 0x1A, 0x97, 
                0x9D, 0xEF, 0x25, 0xA7, 0xE5, 0x24, 0x3A, 0x30, 0x36, 0xA5, 0xF9, 0x8A, 0xF5, 0xFF, 0x1D, 0x1B
            },

        Q = new byte[]{
                0xBE, 0xB9, 0x60, 0x12, 0x05, 0xB1, 0x61, 0xD9, 0x22, 0xD8, 0x84, 0x6E, 0x9A, 0x7B, 0xD1, 0x9B, 
                0x17, 0xA5, 0xDD, 0x02, 0x5E, 0x9D, 0xD8, 0x24, 0x06, 0x1B, 0xF3, 0xD8, 0x2F, 0x79, 0xFE, 0x78, 
                0x74, 0x3D, 0xC4, 0xE6, 0x17, 0xD2, 0xB7, 0x68, 0x78, 0x6F, 0x53, 0xE0, 0x38, 0x00, 0x86, 0xFB, 
                0x20, 0x2A, 0x1B, 0xBD, 0x91, 0x76, 0x3E, 0x33, 0x85, 0x9A, 0x31, 0xE6, 0x88, 0x60, 0x91, 0x81
            },

        DP = new byte[]{
                0xAC, 0x28, 0x92, 0x6D, 0x46, 0x3F, 0x74, 0x1A, 0xA0, 0x21, 0xDB, 0xBB, 0x0E, 0xDF, 0xD7, 0x31, 
                0xB6, 0x3D, 0xC5, 0x7B, 0xB6, 0xCE, 0x6B, 0xD2, 0xE1, 0xEA, 0x8A, 0x7E, 0xAA, 0xD5, 0x9E, 0xB3, 
                0xF2, 0x41, 0x8C, 0xD0, 0x7A, 0xA9, 0xC7, 0xCC, 0xE8, 0xB5, 0x2A, 0x8F, 0xEB, 0xD3, 0xE2, 0x96, 
                0x07, 0xDD, 0xEA, 0x1D, 0x07, 0x96, 0x5A, 0x93, 0xFB, 0x3D, 0x9D, 0x56, 0x30, 0xDE, 0xA1, 0xAF
            },

        DQ = new byte[]{
                0xA6, 0x9C, 0x44, 0x1B, 0x9A, 0x53, 0x89, 0xD9, 0xE8, 0xC1, 0xE2, 0x76, 0xC8, 0x87, 0x6F, 0xE5, 
                0x1F, 0x74, 0x6A, 0xAC, 0x5E, 0x41, 0x5F, 0x86, 0xA0, 0xBB, 0x9C, 0x79, 0xF7, 0x87, 0x87, 0xD0, 
                0x6C, 0x23, 0x65, 0xB5, 0x67, 0x8C, 0x51, 0x62, 0x77, 0x0B, 0x31, 0xE7, 0x86, 0xA4, 0x97, 0x46, 
                0x1B, 0xA4, 0x0D, 0x55, 0xBE, 0x13, 0xE0, 0x64, 0x9B, 0xCA, 0xC6, 0xDA, 0xCF, 0xBA, 0x24, 0x81
            },

        InverseQ = new byte[]{
                0x02, 0x42, 0x90, 0xAE, 0xFF, 0xFE, 0xB6, 0xCB, 0x53, 0xFF, 0x96, 0x17, 0xC6, 0xE4, 0x3F, 0xE6, 
                0xC7, 0xBC, 0xB2, 0xEB, 0x53, 0xA9, 0x47, 0xEE, 0x10, 0x36, 0x98, 0xEF, 0xA8, 0x3E, 0x9C, 0xF7, 
                0xF9, 0xCF, 0x24, 0xE5, 0xD7, 0x9A, 0xAF, 0x09, 0xCF, 0x28, 0xAA, 0x5D, 0x2A, 0xB7, 0x27, 0x73, 
                0x47, 0x2D, 0x54, 0x54, 0x61, 0xC5, 0xCE, 0x3E, 0xA4, 0x91, 0xF6, 0x9D, 0xF4, 0x65, 0x08, 0xDD
            },

        Exponent = new byte[]{
                0x00, 0x01, 0x00, 0x01, 
            },

        Modulus = new byte[]{
                0xA5, 0xE0, 0x95, 0x08, 0x87, 0x69, 0x2B, 0xB4, 0x7F, 0x08, 0xFB, 0x4F, 0x66, 0x85, 0xD9, 0x95, 
                0x53, 0x0F, 0x7C, 0x99, 0x95, 0x16, 0xF4, 0x0D, 0xAD, 0x9E, 0x31, 0xD8, 0x20, 0xF4, 0x88, 0x63, 
                0xAE, 0x51, 0x04, 0xC2, 0xE9, 0x92, 0x3C, 0x1C, 0x90, 0xF8, 0xF4, 0x38, 0x6A, 0x86, 0xFD, 0x8F, 
                0xDE, 0x85, 0x22, 0xDD, 0xE8, 0x7E, 0x8D, 0xF2, 0xC5, 0xC9, 0x4E, 0x71, 0x2B, 0x56, 0x25, 0x1A, 
                0xEA, 0x66, 0x15, 0x19, 0x63, 0x70, 0x53, 0x79, 0xDF, 0x38, 0x49, 0x30, 0x74, 0x45, 0xBE, 0xA3, 
                0x28, 0x0D, 0x0E, 0x7A, 0x7D, 0xB6, 0x8B, 0xCA, 0x09, 0x56, 0x21, 0xE7, 0x98, 0x3E, 0x4B, 0x8B, 
                0xD0, 0x31, 0x27, 0x8E, 0x6F, 0x10, 0xA6, 0x6C, 0x1C, 0x48, 0xB5, 0x5E, 0x89, 0x7B, 0x74, 0x74, 
                0xB2, 0x57, 0x72, 0x6D, 0x18, 0xEB, 0xF3, 0xF5, 0x53, 0xCA, 0x8C, 0xBE, 0xB7, 0x29, 0xF5, 0x9B
            },

        D = new byte[]{
                0x9F, 0x86, 0xE1, 0x4D, 0x96, 0x8C, 0xFA, 0xCF, 0x57, 0xED, 0x17, 0x64, 0x41, 0x41, 0x31, 0x04, 
                0x7F, 0x21, 0x41, 0xBF, 0xA2, 0xB6, 0xB4, 0x78, 0x03, 0x25, 0x44, 0xE2, 0x8A, 0xAF, 0x22, 0x0C, 
                0x5B, 0xB4, 0xE7, 0x53, 0x5C, 0xB6, 0x9A, 0xC1, 0x0E, 0x5B, 0x9E, 0xE4, 0x32, 0xEF, 0x28, 0x24, 
                0x98, 0xE8, 0x89, 0xA3, 0xC8, 0xD9, 0x0D, 0x43, 0x12, 0x1C, 0x8C, 0x28, 0x22, 0x79, 0x72, 0xAC, 
                0x66, 0x7B, 0x7D, 0xD2, 0xF9, 0x48, 0x06, 0xCD, 0x9D, 0x9A, 0xE6, 0x42, 0x92, 0xBA, 0x56, 0xA6, 
                0x63, 0x07, 0x1E, 0x25, 0x4E, 0xC8, 0x07, 0x58, 0x5B, 0x88, 0x60, 0x97, 0x92, 0xE2, 0xD5, 0xB9, 
                0xC6, 0x70, 0xBB, 0x63, 0x5A, 0xC3, 0xC3, 0xA6, 0x46, 0x5A, 0x1C, 0x9C, 0xBF, 0x61, 0x57, 0x9E, 
                0x9E, 0xFA, 0xC0, 0xC4, 0x8A, 0xC2, 0xBA, 0x88, 0x46, 0xA9, 0x7A, 0xF2, 0x7D, 0x4F, 0x6C, 0x01
            }
    };

    public static BigInteger FromBigEndian(byte[] p) {
        Array.Reverse(p);
        if (p[p.Length - 1] > 127) {
            Array.Resize(ref p, p.Length + 1);
            p[p.Length - 1] = 0;
        }
        return new BigInteger(p);
    }

    static void Main(string[] args) {

        using (RSACryptoServiceProvider rsa = new RSACryptoServiceProvider() { PersistKeyInCsp = false }) {
            rsa.ImportParameters(key);

            Console.Write("Testing Encrypt/Decrypt ... ");
            string message = "Testing Some Data to Encrypt";
            byte[] buffer = Encoding.ASCII.GetBytes(message);
            byte[] encoded = rsa.Encrypt(buffer, true);
            byte[] decoded = rsa.Decrypt(encoded, true);
            string message1 = ASCIIEncoding.ASCII.GetString(decoded);

            if (message == message1) {
                Console.WriteLine("Ok :)");
            } else {
                Console.WriteLine("Bad Encryption :(");
                Console.ReadKey();
                return;
            }
        }

        //Convert Key to BigIntegers
        BigInteger P = FromBigEndian(key.P);
        BigInteger Q = FromBigEndian(key.Q);
        BigInteger DP = FromBigEndian(key.DP);
        BigInteger DQ = FromBigEndian(key.DQ);
        BigInteger InverseQ = FromBigEndian(key.InverseQ);
        BigInteger E = FromBigEndian(key.Exponent);
        BigInteger M = FromBigEndian(key.Modulus);
        BigInteger D = FromBigEndian(key.D);

        Console.WriteLine("Testing Numbers ... ");
        BigInteger M1 = BigInteger.Multiply(P, Q); // M = P*Q
        if (M1.CompareTo(M) == 0) {
            Console.WriteLine("  M Ok :)");
        } else {
            Console.WriteLine("  Bad M:(");
            Console.ReadKey();
            return;
        }

        BigInteger PMinus1 = BigInteger.Subtract(P, BigInteger.One); // M = P*Q
        BigInteger DP1 = BigInteger.Remainder(D, PMinus1); // M = P*Q
        if (DP1.CompareTo(DP) == 0) {
            Console.WriteLine("  DP Ok :)");
        } else {
            Console.WriteLine("  Bad DP :(");
            Console.ReadKey();
            return;
        }

        BigInteger QMinus1 = BigInteger.Subtract(Q, BigInteger.One); // M = P*Q
        BigInteger DQ1 = BigInteger.Remainder(D, QMinus1); // M = P*Q
        if (DQ1.CompareTo(DQ) == 0) {
            Console.WriteLine("  DQ Ok :)");
        } else {
            Console.WriteLine("  Bad DQ :(");
            Console.ReadKey();
            return;
        }

        BigInteger Phi = BigInteger.Multiply(PMinus1, QMinus1);
        BigInteger PhiMinus1 = BigInteger.Subtract(Phi, BigInteger.One);
        BigInteger D1 = BigInteger.ModPow(E, PhiMinus1, Phi);
        if (D1.CompareTo(D) == 0) {
            Console.WriteLine("  D Ok :)");
        } else {
            Console.WriteLine("  Bad D :(");
            Console.ReadKey();
            return;
        }

        Console.ReadKey();
    }
} 
```

**测试结果**

```
Testing Encrypt/Decrypt ... Ok :)
Testing Numbers ...
  M Ok :)
  DP Ok :)
  DQ Ok :)
  Bad D :( 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T10:28:15.437

首先，您需要验证`GCD(e, φ) = 1`因为`d`仅在该属性成立时才存在。然后计算模数的[模](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)[乘逆`e``phi`](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)，我在[对 "1/BigInteger in C#" 的回答中进行了](https://stackoverflow.com/a/14181821/445517)描述。

您的代码似乎假设这`e^(φ(n)-1) mod φ(n)`是相反的，但这是不正确的。我认为正确的公式应该是`e^(φ(φ(n))-1) mod φ(n)`，但这不方便使用，因为您只知道`φ(n)`而不知道`φ(φ(n))`。

我建议通过将维基百科伪代码移植到 C# 来使用扩展欧几里得算法。

* * *

*作为旁注：*通常有多个等效值，`d`因为您不需要`e*d mod φ(n)=1`，但只是`e*d mod λ(n)=1`在哪里 λ 是[Carmichael 函数](http://en.wikipedia.org/wiki/Carmichael_function)，请参阅[加密上的“为什么 RSA 加密密钥基于模（phi（n））而不是模 n” .SE](https://crypto.stackexchange.com/questions/1789/why-rsa-encryption-key-is-based-on-modulophin-rather-than-modulo-n)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-05T08:19:31.233

扩展欧几里得算法可用于计算模逆，使用此链接：[http](http://www.di-mgt.com.au/euclidean.html#extendedeuclidean) ://www.di-mgt.com.au/euclidean.html#extendedeuclidean获取详细信息，我在 C# 中测试了源代码，如下所示，结果是匹配的，

```
public static BigInteger modinv(BigInteger u, BigInteger v)
{
   BigInteger inv, u1, u3, v1, v3, t1, t3, q;
   BigInteger iter;
   /* Step X1\. Initialise */
   u1 = 1;
   u3 = u;
   v1 = 0;
   v3 = v;
   /* Remember odd/even iterations */
   iter = 1;
   /* Step X2\. Loop while v3 != 0 */
   while (v3 != 0)
   {
       /* Step X3\. Divide and "Subtract" */
       q = u3 / v3;
       t3 = u3 % v3;
       t1 = u1 + q * v1;
       /* Swap */
       u1 = v1; v1 = t1; u3 = v3; v3 = t3;
       iter = -iter;
   }
   /* Make sure u3 = gcd(u,v) == 1 */
   if (u3 != 1)
       return 0;   /* Error: No inverse exists */
       /* Ensure a positive result */
       if (iter < 0)
           inv = v - u1;
       else
           inv = u1;
       return inv;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-31T10:36:24.510

D 可以通过以下方式计算：

```
 var qq = BigInteger.Multiply(totient, n);
    var qw = BigInteger.Multiply(totient, qq);
    BigInteger d = BigInteger.ModPow(e, (qw - 1), totient); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-20T19:00:01.790

```
 Console.Write("Testing Encrypt/Decrypt using BigInteger ");
        string message2 = "Testing Some Data to Encrypt";
        byte[] buffer2 = Encoding.ASCII.GetBytes(message2);
        BigInteger m = new BigInteger(buffer2);
        BigInteger c = BigInteger.ModPow(m, E, M); //encrypt
        BigInteger m2 = BigInteger.ModPow(c, D, M); //decrypt, m2 also equals m
        byte[] decoded2 = m2.ToByteArray();

        if (decoded2[0] == 0) 
        {
            decoded2 = decoded2.Where(b => b != 0).ToArray();
        }
        string message3 = ASCIIEncoding.ASCII.GetString(decoded2);

        if (message2 == message3)
        {
            Console.WriteLine("Ok :)");
        }
        else
        {
            Console.WriteLine("Bad Encryption :(");
            Console.ReadKey();
            return;
        } 
```

我用你的参数试过了，它可以工作，所以 E、D 和 M 必须是有效的。

# windows-8 - 在运行时我可以确定动画的帧速率吗？

> ID：14229041
> 
> 赞同：3
> 
> 时间：2013-01-09T05:52:05.900
> 
> 标签：windows-8, winrt-xaml

我的目标是确定动画何时在低端硬件（低端 GPU）上运行并更改动画或情节提要以提供更好的用户体验（或更少的动画）。

是否可以确定动画的帧速率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:40:44.300

从技术上讲，没有办法获得帧速率。[您可以检测CompositionTarget.Rendering](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.compositiontarget.rendering.aspx)事件的每个报告之间的时间量，但该事件仅跟踪动画系统何时完成将其更新发送到渲染子系统（这很可能决定跳过帧，具体取决于显卡）。

[在此处](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/95300fe6-8958-4b9b-ad37-581a9bdefccf)的 MSDN 论坛上有一个关于跟踪 WPF 帧速率的非常有趣的讨论。几乎所有这些都应该适用于 Windows 应用商店 XAML 应用程序。

如果您只想在动画运行时间过长时换掉动画，[CompositionTarget.Rendering](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.compositiontarget.rendering.aspx)可能适合您的需要。

# oracle - 从索引不在集合中的员工表中选择

> ID：14229043
> 
> 赞同：0
> 
> 时间：2013-01-09T05:52:19.873
> 
> 标签：oracle, plsql

我有一个如下程序：

```
SET serveroutput ON 
    DECLARE 
        TYPE list_of_names_t 
          IS TABLE OF emp.emp_index%TYPE; 
        ignoreIndexes LIST_OF_NAMES_T := List_of_names_t();
    BEGIN
    -- Logic here which fills the values in the collection ignoreIndexes and           considerIndexes  
    -- Line XX   
END; 
```

在第 XX 行，我想添加以下行

`SELECT * FROM emp WHERE emp_index NOT IN ignoreIndexes`但无法获得正确的语法，如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:53:47.770

如果集合类型是在 中声明的`schema level`，它可以被使用`SQL statements`或动态地使用。所以请执行以下步骤来完成这项工作。

1.  创建或替换类型 list_of_names 作为对象（emp_index NUMBER）；

2.  创建或替换类型 list_of_names_t 是 list_of_names 的表；

3.  创建您的匿名块，如下所示：

    ```
    SET serveroutput ON 
    DECLARE 
       ignoreIndexes LIST_OF_NAMES_T := List_of_names_t();
       emp_cur  SYS_REFCURSOR;
    BEGIN
       -- Populate the collection with some data
     SELECT list_of_names(LEVEL) 
         BULK COLLECT INTO ignoreIndexes  
     FROM dual CONNECT BY LEVEL<21;

    OPEN emp_cur FOR 
              SELECT * 
               FROM EMP e 
                   WHERE NOT EXISTS(SELECT 1 
                                     FROM   table(ignoreIndexes) tt 
                                     WHERE  tt.emp_index = e.emp_index
                                    );   

    END; 
    ```

# rabbitmq - haproxy 后面的 RabbitMQ 消费者连接错误

> ID：14229046
> 
> 赞同：1
> 
> 时间：2013-01-09T05:52:44.667
> 
> 标签：rabbitmq, haproxy

我正在使用rabbitmq集群。我的消费者通过 haproxy 连接了这个集群。

消费者引发了以下通过 haproxy 连接的异常。如果消费者直接连接到节点不会引发任何异常。

```
2013-01-08 16:25:09,745 警告 | SimpleAsyncTaskExecutor-1 | osamqp.rabbit.listener.SimpleMessageListenerContainer | 消费者引发异常，如果连接工厂支持，处理可以重新启动。异常总结：com.rabbitmq.client.ShutdownSignalException：连接错误；原因：java.io.EOFException

```

查看我的 ha-proxy 配置。

```
全球的
    登录 127.0.0.1 本地 0
    登录 127.0.0.1 local1 通知
    #log loghost local0 信息
    麦克康4096
    #chroot /usr/share/haproxy
    用户代理
    组代理
    守护进程
    #调试
    ＃安静的

默认值
    登录全局
    选项 dontlognull
    重试 3
    选项重新调度
    麦克康5000
    超时 10000
    clitimeout 60000
    服务超时 60000

听 rabbitmq_producer_cluster 0.0.0.0:5672
    模式 tcp                                                
    平衡循环                 

    服务器 rabbit_1 rabbit1:5672 检查 inter 5000 上升 2 下降 3    
    服务器 rabbit_2 rabbit2:5672 检查 inter 5000 上升 2 下降 3
    #server rabbit_3 rabbit3:5672 检查 inter 5000 上升 2 下降 3

听 rabbitmq_consumer_cluster 0.0.0.0:5673
    模式 tcp
    平衡循环
    选项 tcpka   

    服务器 rabbit_1 rabbit1:5672 检查 inter 5000 上升 2 下降 3
    服务器 rabbit_2 rabbit2:5672 备份检查 inter 5000 上升 2 下降 3
    #server rabbit_3 rabbit3:5672 检查 inter 5000 上升 2 下降 3

听私人监控：8100
    模式http
    选项 httplog
    统计启用
    统计 uri /stats
    统计刷新 5s

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:01:07.857

您在本机连接工厂的超时时间是多少？尽量确保它在 60 秒以下。

# javascript - java中具有多个Html表单的登录页面？

> ID：14229053
> 
> 赞同：-3
> 
> 时间：2013-01-09T05:53:32.173
> 
> 标签：javascript, html, jsp, servlets

谁能解释一下包含多个表单的登录页面。我的意思是在提交一些详细信息时，它应该转到其他一些 html 页面，然后我们必须输入一些其他详细信息，然后它应该转到最终的 html 页面，然后输入表单的其他详细信息，最后在提交该 html 时，所有详细信息都存储在数据库？我们每天都看到很多站点包含这种类型的登录表单。你能举一个例子来解释这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:39:03.500

我假设您的意思是当数据依次输入或在不同页面上输入时。然后进行单次提交。它不是多种形式。是单一形式。在这种情况下，您可以**将输入的数据存储在[会话](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)**中，并在用户提交时对存储的数据执行特定操作。在一般情况下，立即将输入的数据存储在数据库中并不是一个好的解决方案。因为只要用户没有进行最终提交，这些数据并不重要。并且数据库提交比存储在会话中要昂贵得多。

多个表格意味着一页上有多个表格：

```
<form name="firstForm" action="firstAction" method="post">
   <input type="text" name="userName">
   <input type="submit" value="Subscribe">
</form>

<form name="secondForm" action="secondAction" method="get">
   <input type="hidden" name="hiddenParam" value="paramValue">
   <input type="submit" value="Remove">
</form> 
```

如果您希望通过不同的处理程序处理表单或将它们与不同的 HTTP 方法相关联，这将很有用。

# oracle - Oracle: Create a View with Auto Increment id column

> ID：14229056
> 
> 赞同：10
> 
> 时间：2013-01-09T05:53:44.660
> 
> 标签：oracle, view, plsql, oracle11g

I have created a `view` that fills data from different tables. I used `10 select statements` and combine the results of those select statements using `UNION ALL`.

I want to add `primary key column` to my view. because I have to create `XML` file using data in this `view`. so I need a `primary key column` for some process in my `XML` building application.

I have add `rownum` to all my select statements. But it returned duplicate ids. because `rownum` in each select statements start from 1.

Then I have created a sequence and tried use `nextval` . But I can't use sequence because my select statements has `group by` and `order by`.

Is there any way to do that ?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T06:00:42.733

You can do a select over the union, for example:

```
SELECT rownum(),*
FROM (SELECT * FROM tableA UNION ALL SELECT * FROM tableB) 
```

**UPDATED**

```
SELECT rownum, t.*
FROM (SELECT * FROM tableA UNION ALL SELECT * FROM tableB) t 
```

# r - R中的热图，行中的重复名称

> ID：14229057
> 
> 赞同：1
> 
> 时间：2013-01-09T05:53:49.343
> 
> 标签：r, heatmap

我正在基于 csv 文件在 R 中编写热图。这包含以下信息：

```
NAME,metformin,metformin,phenformin,phenyl biguanide,metformin,estradiol
Adenocarcinoma of lung,0,0,0,-1.834006462,1.715939688,0
Adenocarcinoma of lung,1.995916353,0,0,0,0,0
Thymic carcinoma,1.154056722,1.106488961,0,1.145126548,0,-1.14095315
alpha-1-Antitrypsin deficiency,0,0,0,0,-1.917025669,-1.974151858 
```

所以我想创建一个热图，其中行的名称出现标签：肺腺癌，腺癌......等。我正在执行以下步骤：

```
hm<-read.csv("heatmap1.csv",sep=",")
row.names(hm)<-hm$NAME
hm<-hm[,2:7]
hm_matrix<-data.matrix(hm)
heatM<-heatmap(hm_matrix, Rowv=NA, Colv=NA, col = cm.colors(256), scale="column", margins=c(5,10)) 
```

我遇到的问题是：

```
row.names(hm)<-hm$NAME

Error in `row.names<-.data.frame`(`*tmp*`, value = c(1L, 1L, 3L, 2L)) : 
  duplicate 'row.names' are not allowed 
```

我知道我有一个重复的名字，但我真的需要数据出现在热图中，因为测量水平（数量）是不同的，即使它们来自同一种疾病。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:03:57.720

您可以 `make.unique`用来制作名称的唯一版本

```
row.names(hm) <-  make.unique(as.character(hm$NAME)) 
```

# php - 将 Flash 游戏分数连接到 MySQL 数据库

> ID：14229059
> 
> 赞同：0
> 
> 时间：2013-01-09T05:54:12.960
> 
> 标签：php, mysql, flash

所以我创建了一个快速测验，显示他们在测验结束时正确的问题数量。如何将此分数保存在 MySQL 数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:23:29.830

嗯，您评论中的代码乍一看似乎还不错，尽管您是否缺少句号？

submitScore() 方法中的第二行：

```
playerxscore = score_txt.text; 
```

应该：

```
playerx.score = score_txt.text; 
```

?

# java - Hibernate Annotations - @MappedSuperclass 如何覆盖列标识符

> ID：14229060
> 
> 赞同：2
> 
> 时间：2013-01-09T05:54:18.770
> 
> 标签：java, hibernate, jpa, hibernate-annotations

我正在使用 Hibernate Annotations，我试图解决的问题如下：

我需要有 2 个不同的 @Entity 类，它们具有相同的列映射但具有不同的标识符。

第一个应该使用 id 作为标识符。

第二个应该使用名称作为标识符。

所以，我有一个抽象类，用 @MappedSuperclass 注释，其中包含所有列，包括 id 和 name，另外还有 2 个 @Entity 类，它们扩展了超类并覆盖了 id 和 name 的 getter。

```
@MappedSuperclass 
public class MappingBase {
    protected Integer id;
    protected String name;

    @Column (name = "ID")
     public void getId() {
          return this.id;
     }

    @Column (name = "NAME")
     public void getName() {
          return this.name;
     }              
}

@Entity
@Table (name = "TABLE")
public class Entity1 extends MappingBase {

  @Id
  @Column (name = "ID")
  public void getId() {
    return this.id;
  } 
}

@Entity
@Table (name = "TABLE")
public class Entity2 extends MappingBase {

  @Id
  @Column (name = "NAME")
  public void getName() {
      return this.name;
  } 
} 
```

注意：我必须在超类中有成员（id，name）。我知道我可以将 @Transient 添加到 id 和 name getter 但这意味着我必须在每个类中都添加它们，这不是一个好的设计:( 此外，以下 insertable="false, updateable=false 可以提供帮助但我不明白这是什么意思...

请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:20:40.377

试试这个样本，

[Hibernate - @MappedSuperclass 如何覆盖列标识符](http://kruders.com/hibernate/mappedsuperclass-override-column-identifier/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-12T06:58:26.140

Hibernate/JPA 允许我们注释属性或访问器。如果我们`@Id`在属性上有注释，JPA 将查找该类的所有属性。同样，如果我们`@id`在 getter 方法上有注解，JPA 将查找所有的 getter。

我们可以通过注释属性来解决上述问题。超类和两个子类将如下 -

```
@MappedSuperclass
public abstract class AbstractMappingBase {

    //properties other than id and name

    public abstract Integer getId();

    public abstract String getName();

    //other getters and setters

}

@Entity
public class Entity1 extends AbstractMappingBase {

    @Id
    private Integer id;

    private String name;

    @Override
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @Override
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

}

@Entity
public class Entity2 extends AbstractMappingBase {

    private Integer id;

    @Id
    private String name;

    @Override
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @Override
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

在这里，JPA 将寻找属性而不是 getter。超类与其子类之间没有重复的属性。所以它会正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:26:44.653

最好将基类定义为@Embeddable，并在实现类中使用@Embedded 并使用@AttributeOverride。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-26T10:37:56.423

如果我没记错的话，我只是定义了 2 个 @Entity 类，它们具有从一个抽象 @MappedSuperclass 类继承的同一个表。超类包含 id 成员，每个实体类定义它自己的 @Id @Column 定义。它应该工作！

# jquery - Safari 和 Chrome 无法处理新添加的元素

> ID：14229064
> 
> 赞同：1
> 
> 时间：2013-01-09T05:55:11.203
> 
> 标签：jquery, google-chrome, safari

我有问题，请帮忙。

我有一个这样的模板：

```
<div id="dad">
     <div id="son" style="width: 100%">
     some code
     </div>
</div> 
```

然后我有一个通过jQuery动画扩展dad-div的动作

```
$('#dad').animation({'width': 800px}, 500); 
```

在这一刻，儿子和爸爸都是 800px 宽度，这对我来说很好。

但是当我使用 ajax 从服务器获取新的子元素并替换旧元素时，Safari 和 chrome 上发生了奇怪的事情：

```
 $.get(url, extraData, function(response) {
        $('#son').hide('slide', null, 500, function(){
            $('#son').replaceWith(response);
            $('#son').show('slide', {direction: 'right'}, 500);
        });
    }); 
```

展开爸爸脚本仍然有效，但有一些不同之处： 在 IE 和 FireFox 上，爸爸和儿子同时调整了大小，因此效果看起来流畅且良好。但是在 Safari 和 Chrome 上这个过程分为两步，先用动画把爸爸扩大到 800px，然后用“跳跃”变化让儿子到 800px，这个“跳跃”让后面的过程出错。

我觉得 IE 和 FireFox 以正确的方式处理了这个问题，有人可以帮我修复 Safari 和 Chrome 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:57:39.240

jQuery 没有`replace`方法，看来你想使用 `replaceWith`方法。

```
$('#son').replaceWith(response); 
```

注意`replaceWith`用另一个元素替换元素，如果你只想改变一个元素的内容，你可以使用`html`方法。

```
$('#son').html(function(){
   return $(response).html();
}); 
```

# z3 - z3python：没有异或运算符？

> ID：14229068
> 
> 赞同：2
> 
> 时间：2013-01-09T05:55:37.443
> 
> 标签：z3, z3py

我在 Z3 python 中有这个代码：

```
x = Bool('x')
y = Bool('y')
z = Bool('z')
z == (x xor y)
s = Solver()
s.add(z == True)
print s.check() 
```

但是此代码在运行时报告以下错误：

```
c.py(4): error: invalid syntax 
```

如果我替换`xor`为`and`，则没有问题。所以这意味着不支持异或？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T06:09:53.547

你应该使用`Xor(a, b)`. 此外，要创建表示公式 的 Z3 表达式`a and b`，我们必须使用`And(a, b)`. 在 Python 中，我们不能重载运算符`and`和`or`. 这是一个示例`Xor`（[可在rise4fun 在线获取](http://rise4fun.com/Z3Py/90IR)）。

```
x = Bool('x')
y = Bool('y')
z = Xor(x, y)
s = Solver()
s.add(z)
print s.check()
print s.model() 
```

# android - Android - 手动删除我的数据库，应用程序将不再启动？

> ID：14229069
> 
> 赞同：1
> 
> 时间：2013-01-09T05:55:41.957
> 
> 标签：android, sqlite

我手动删除了我的数据库文件（使用`*adb shell* and sqlite3`）。

从那时起，我的应用程序不会重新创建数据库文件（并在启动时引发异常）。我正在使用`ORMLite`.

我尝试在启动模拟器（“ `Wipe data`”）之前擦除数据。但这没有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:13:28.110

我检查了问题并看到了这个：

> 01-09 06:09:38.727: E/AndroidRuntime(1228): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.fileexplorermanager/com.landa.fileexplorermanager.MainActivity}: java.lang.IllegalArgumentException: 必须用 id 指定 id、generatedId 和 generatedIdSequence 之一

看来问题是这样的：

```
...
@DatabaseField(id = true, generatedId = true, allowGeneratedIdInsert=true)
private Integer id;
... 
```

我误解了 DatabaseField 属性的工作方式（我指定了三个，而不是只指定一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:00:28.683

在模拟器运行的情况下，导航到设置 -> 应用程序，选择您的应用程序并按下“清除数据”按钮。

您也可以尝试卸载然后重新安装该应用程序。

# javascript - 如何在 vb.net 代码中编写 java 脚本？

> ID：14229071
> 
> 赞同：-3
> 
> 时间：2013-01-09T05:55:48.750
> 
> 标签：javascript, jquery, vb.net

任何人都可以帮助我，因为我需要在 vb.net 代码中编写 Javascript 吗？我的意思是我是 vb.net 编码的新手，我有一个从 web 服务动态创建的表，对于该表，我需要添加 javascript 代码中的排序功能，我需要将此脚本添加到动态创建的表我试过这个：

```
 oSB.Append("table.RegisterStartupScript('SCRIPTNAME', '<script language='javascript'>function tname(){alert('kk')};</script>')") 
```

但它似乎根本不起作用。

我也试过这个

```
 'oSB.Append("<script>$('[id^=tname] th').live('click',function(event){ alert('hello')}</script>") 
```

我的ajax函数：

```
 $.ajax({
        type: "POST",
        url: "Service1.asmx/GetRecipie",
        contentType: "application/json; charset=utf-8",

        data: "{'sDB':'" + sDB + "'}",
        dataType: "json",
        success: OnGetMemberSuccess,

        failure: function (errMsg) {
            $('#errorMessage').text(errMsg);  //errorMessage is id of the  div
        }

    });
    function OnGetMemberSuccess(data, status) {

        xistr = data.d.split(',');
        $("#MemberDetails").html(data.d);
        $('input[type=button]').attr('disabled', false);
    }

} 
```

表由此代码（webservice）创建：

```
 oSB.Append("<table id= '" + table_id + "' class='sortable' ><thead><tr><th class=border id='tname' >" + "Name" + "<img src='next.gif'/></th><th class=border>" + "Duration" + "</th><th class=border>" + "State" + "</th><th class=border>" + "Party" + "</th><th class=border>" + "Year" + "</th></tr></thead>")
     sNameValue = dr("sName").ToString
        sDurValue = dr("sDuration").ToString
        sStateValue = dr("sState").ToString
        sPartyValue = dr("sParty").ToString
        sYearValue = dr("sYear").ToString
        oSB.Append("<tbody id=tbodyid'>")
        ' oSB.Append("<tr id='trid'>")
        oSB.Append("<tr>")
        oSB.Append("<td id='tdid' class=border1>")
        oSB.Append(sNameValue)
        oSB.Append("</td>")

        oSB.Append("<td class=border1>")
        oSB.Append(sDurValue)
        oSB.Append("</td>")

        oSB.Append("<td id='td_state' class=border1>")
        oSB.Append(sStateValue)
        oSB.Append("</td>")

        oSB.Append("<td class=border1>")
        oSB.Append(sPartyValue)
        oSB.Append("</td>")

        oSB.Append("<td class=border1>")
        oSB.Append(sYearValue)
        oSB.Append("</td>")

        oSB.Append("</tr>")
        oSB.Append("</tbody>")
    End While
    dr.Close()
    con.Close()
    oSB.Append("</table>")
    'MsgBox(table.ToString)
    Debug.Print(oSB.ToString) 
```

有人可以告诉我哪里错了吗？

再次欢呼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:10:42.237

您不能直接在 vb.net 代码中编写 javascript。但是，您可以从 vb.net 代码注册和触发 javascript。

尝试这个

```
Page.RegisterClientScriptBlock("key","<script>alert('Hello World');</script>"); 
```

试试这个 vb 代码块：

```
Dim strScript As String = "<script>"
strScript += "alert('Hello, Pavan');"
strScript += "</script>"
Page.RegisterClientScriptBlock("strScript", strScript) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:00:12.250

您不能在 vb.net 代码中编写 javascript 代码。您可以在 vb.net 代码中添加/嵌入 javascript 代码以在客户端上执行。通常您需要在 aspx 页面中编写 javascript 代码。您可以使用 [ScriptManager.RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/bb350750.aspx)从 vb 代码注册脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:40:14.843

我可以看到你正在使用

```
$('[id^=tname] th').live('click'... 
```

然而，从 jQuery 文档：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。 [http://api.jquery.com/live/](http://api.jquery.com/live/)

除此之外，TH 是一个非常糟糕的事件目标。因为您需要单击 TH，而不是其中的文本。否则您的事件将不会触发。

请参阅此处的标记：http: [//jsfiddle.net/4eXkT/2/](http://jsfiddle.net/4eXkT/2/)

**那应该行得通。**

实际上，您不需要将任何 javascript 嵌入到您的 vb.net 代码中。只需在您的页面中包含一个 javascript 文件并使用 jQuery 的`.on()`事件处理程序。如果您必须从您的 Web 服务管理 javascript，请使用另一个端点来返回要根据您的 Web 服务生成的代码使用的 javascript。

如果您必须使用最新 jQuery 以外的任何其他版本，请参阅上面提供的文档。

# java - 在 java 8 中删除 JDBC ODBC 桥

> ID：14229072
> 
> 赞同：36
> 
> 时间：2013-01-09T05:55:59.460
> 
> 标签：java, jdbc-odbc, java-8

从 Java 8 开始，JDBC-ODBC 桥将不再包含在 JDK 中。

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); // classNotFoundException is thrown 
```

有没有其他连接 JDBC-ODBC 桥的解决方案？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-04-26T20:22:38.507

我们仍然可以在 java 8 中使用 JDBC-ODBC 桥，只需遵循这个简单的方法：

1.  下载 JDK 7 或 JRE 7。
2.  转到 JRE\lib 文件夹并找到 rt.jar
3.  解压缩它（如果您安装了 WinRAR 或 7zip），或者您可以将其重命名为 rt.zip 并解压缩。
4.  将 sun\jdbc 和 sun\security\action 文件夹复制出来，保留文件夹结构。即，您应该具有如下文件夹结构：

    ```
    Sun --> Security --> Action
        --> JDBC 
    ```

5.  打开一个 CMD 窗口。转到 Sun 文件夹的父文件夹。运行命令：`jar -cvf jdbc.jar sun`

6.  上面的命令将创建一个名为 jdbc.jar 的文件
7.  将 JDBC.jar 复制到您的 JDK8 或 JRE8`lib`文件夹。如果这不起作用，请尝试该`lib\ext`文件夹。
8.  将 jdbcodbc.dll 从 JRE 7 安装的 JRE\bin 复制到 JRE 8 安装的 JRE\bin。
9.  重新启动您的 JVM。

[如何为 JDK 8 启用 JDBC-ODBC 桥接器](http://bigfatball.blogspot.it/2016/03/how-to-enable-jdbc-odbc-bridge-for-jdk-8.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-13T10:37:11.867

好吧，在我看来[，Oracle 员工的这篇博文](https://blogs.oracle.com/Lance/entry/removal_of_the_jdbc_odbc)说明了一切：

> 我建议您使用数据库供应商提供的 JDBC 驱动程序或商业 JDBC 驱动程序，而不是 JDBC-ODBC 桥。

您将 JDBC-ODBC 桥用于哪种应用程序？

*   如果是生产代码，恕我直言，您应该尽快用真正的驱动程序替换桥，并用真正的驱动程序替换旧数据库
*   如果测试代码与 Access DB、Excel 电子表格或您可以通过 ODBC 访问的任何内容交互，请尝试将其替换为纯 Java 数据库，如 H2
*   如果您出于开发和/或分析目的使用它来临时访问遗留的 Access DB，并且真的不能或不想更新任何东西，您可以坚持使用 JDK 7 很长一段时间直到其生命周期结束日期，并且可能远不止于此

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-07T21:18:09.897

> 有没有其他连接 JDBC-ODBC 桥的解决方案？

Sun 和 Oracle 的[官方立场](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/bridge.html)长期以来一直是——

> [JVM-bundled] JDBC-ODBC 桥应该被认为是一种过渡解决方案 [...] Oracle 不支持 JDBC-ODBC 桥。

但是，我的雇主[OpenLink Software](http://www.openlinksw.com/)从 JVM 1.0 开始就在 JDBC 和 ODBC 之间开发了企业级商业 Type 1 Bridges，并且这些桥接器与当前的 JVM 1.8 完全兼容。你可以在这里了解更多——

*   [单层 JDBC-ODBC 桥驱动程序](http://www.openlinksw.com/c/9C2VUIUG)——用于 ODBC 数据源的 JDBC 驱动程序
*   [单层 ODBC-JDBC 桥驱动程序](http://www.openlinksw.com/c/9C2G6JJA)——用于 JDBC 数据源的 ODBC 驱动程序

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-07-01T02:06:10.030

我找到了一个合理的解决方案，它允许使用现有代码并仅更改打开数据库连接逻辑。

UCanAccess 是一个开源的 JDBC 驱动程序。

[http://ucanaccess.sourceforge.net/site.html](http://ucanaccess.sourceforge.net/site.html)

这有两个依赖项，其中一个还有两个依赖项。

jackcess-2.0.0.jar 或更高版本

```
commons-lang-2.4.jar

commons-logging-1.0.4.jar 
```

hsqldb.jar(2.2.5)

这些都是开源的。如有必要，进行互联网搜索、下载、解压缩，并将所有四个 jar 以及用于 UCanAccess 的一个放入项目的目录中（例如 JDBC-to-MSAccess）。如果使用 Ecplise，请从菜单“Project / Properties / Java Compiler / Libraries / Add External JARs”中选择添加到您的构建路径，然后选择所有五个 jar 文件。

连接逻辑非常简单：

* * *

```
String strConnectionString = "";
Connection conAdministrator = null;

// Register driver
Class.forName( "net.ucanaccess.jdbc.UcanaccessDriver" );

// System.getProperty( "user.dir" ) => Current working directory from where application was started

strConnectionString = "jdbc:ucanaccess://" + System.getProperty( "user.dir" )  + "\\Your-database-name.<mdb or accdb>";

// Open a connection to the database
conAdministrator = DriverManager.getConnection( strConnectionString ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-24T03:31:04.907

Robert Petermeier 给出了一个很好的观点 H2 驱动器通过 PostgreSQL 驱动程序支持 ODBC，您可以相应地安装驱动程序，来自 Stackoverflow 的链接[在 Windows 上设置 PostgreSQL ODBC](https://stackoverflow.com/questions/6796252/setting-up-postgresql-odbc-on-windows)

# java - Struts2 标签：Fielderrors 标签

> ID：14229074
> 
> 赞同：2
> 
> 时间：2013-01-09T05:56:06.987
> 
> 标签：java, forms, jsp, struts2, tags

我目前正在为我的表单使用 Struts2 标记，并显示它的错误消息。我的问题是在 Struts2 标签中显示错误消息的默认标记是标签的使用`<ul>`。无论如何我可以改变这个吗？我希望错误消息显示为`<span>`不是列表。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:44:21.523

标签根据其主题呈现。然后问题变成：你如何改变主题？您可以为标签（将标签上的主题属性设置为简单）、页面、请求或一般更改它。

[http://struts.apache.org/2.2.1/docs/struts-2-themes.html](http://struts.apache.org/2.2.1/docs/struts-2-themes.html)

我个人喜欢编写 html，即我不喜欢 struts2 默认主题的任何“帮助”。所以在我的 struts.xml 我只是使用：

```
<constant name="struts.ui.theme" value="simple" /> 
```

Web 开发人员应该知道 html。

**更新**：

通常使用 YUI reset.css 所以我可能错过了这个......

如果您在操作上扩展 ActionSupport ，`getFieldErrors()`那么您可以使用`<s:property value='fieldError["field_name"]'/>`该方法当然会返回相关的错误消息字符串，而无需任何格式。

它的可读性并不比`<s:fielderror/>`标签差多少……毕竟我们需要一直使用属性标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T09:54:41.967

您可以覆盖用于呈现错误的模板文件。将主题中的文件`actionerror.ftl`和`fielderror.ftl`文件从jar 复制到您的应用程序并修改它们以不使用/标记。`simple``struts2-core``ul``li`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T13:46:34.997

另一种选择是更改 UL 元素的 CSS。

这种方法只有在你特别关心外观而不是 DOM 本身的情况下才有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-27T06:15:15.403

我遇到了同样的问题，我使用以下代码解决了我的问题

```
<s:if test="fieldErrors.get('email').size() > 0">
     <s:property value="fieldErrors.get('email').get(0)"/>
</s:if> 
```

电子邮件是我的领域的名称。这样我们就不必修改 CSS。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T06:18:17.510

这里有一个教程来展示 Struts 2 的 ActionError 和 ActionMessage 类的使用。

[http://www.mkyong.com/struts2/struts-2-actionerror-actionmessage-example/](http://www.mkyong.com/struts2/struts-2-actionerror-actionmessage-example/)

1.  **ActionError** - 用于向用户发送错误反馈消息 - 通过 <s:actionerror/ > 显示

    ```
    <s:if test="hasActionErrors()">
      <div class="errors">
       <s:actionerror/>
       </div>
    </s:if> 
    ```

2.  **ActionMessage** – 用于向用户发送信息反馈消息，通过< s:actionmessage/ >显示

    ```
    <s:if test="hasActionMessages()">
      <div class="welcome">
        <s:actionmessage/>
      </div>
    </s:if> 
    ```

# android - 你管只玩一次

> ID：14229077
> 
> 赞同：0
> 
> 时间：2013-01-09T05:56:22.897
> 
> 标签：android, youtube

只有使用以下链接后，我才能播放 YouTube 视频。

[视频在 Android 的 Webview 中只播放一次](https://stackoverflow.com/questions/8310550/video-plays-only-once-in-webview-of-android)

但我的问题是他们要求在 Chrome 客户端中添加以下行

```
@Override public void onPrepared(MediaPlayer mp) {

        customViewCallback.onCustomViewHidden();
    } 
```

多次显示视频但没有运气。为此而崩溃。以下是崩溃的详细信息

任何链接或示例代码都对我有很大帮助，在此先感谢

```
01-09 11:25:27.999: ERROR/MediaPlayer(3833): <!>android.media.MediaPlayer 732<!> IOException: java.io.FileNotFoundException: No content provider: http://r2---sn-ci5gup-cage.c.youtube.com/videoplayback?itag=18&yms=LMB29RrCiYc&gcr=in&fexp=906373%2C922206%2C901054%2C916624%2C920704%2C912806%2C928001%2C922403%2C922405%2C929901%2C913605%2C929104%2C929110%2C913546%2C913556%2C908493%2C908496%2C920201%2C913302%2C919009%2C911116%2C926403%2C901451%2C902556&app=youtube_mobile&newshard=yes&ratebypass=yes&cp=U0hUTFdOT19GTENONF9PSFNJOkpKQTU0VXFabVZh&ms=au&mv=m&el=watch&expire=1357731812&ip=223.239.139.176&key=yt1&sver=3&id=538eced585584e54&source=youtube&ipbits=8&sparams=cp%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&mt=1357710850&signature=71FD38C03ABA06281CFF021A543051861ED0FEC3.A1F7E9E860349E8D3240D8156346C344FFA08731&dnc=1&upn=5y6eEl8pixM
01-09 11:25:28.009: ERROR/MediaPlayerService(1507): [MediaPlayerService::Client::setDataSource]player type = 4
01-09 11:25:29.069: ERROR/QCvdec(1507): Setparameter: unknown param 2130706451
01-09 11:25:31.099: ERROR/QCvdec(1507): Omx Flush issued when vdec is not initialized yet.
01-09 11:25:31.139: ERROR/AndroidRuntime(3833): FATAL EXCEPTION: main
01-09 11:25:31.139: ERROR/AndroidRuntime(3833): java.lang.NullPointerException
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.webkit.HTML5VideoViewProxy$VideoPlayer$2.surfaceDestroyed(HTML5VideoViewProxy.java:322)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.SurfaceView.reportSurfaceDestroyed(SurfaceView.java:596)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.SurfaceView.updateWindow(SurfaceView.java:490)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:215)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.View.dispatchDetachedFromWindow(View.java:6169)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.ViewGroup.removeViewInternal(ViewGroup.java:2201)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.ViewGroup.removeViewInternal(ViewGroup.java:2187)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.ViewGroup.removeView(ViewGroup.java:2135)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.webkit.HTML5VideoViewProxy$VideoPlayer$1.onCustomViewHidden(HTML5VideoViewProxy.java:160)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at com.android.rmtest.SocialMedia$chromeClient.onPrepared(SocialMedia.java:155)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.widget.VideoView$2.onPrepared(VideoView.java:298)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:1313)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.os.Looper.loop(Looper.java:130)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.app.ActivityThread.main(ActivityThread.java:3737)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at java.lang.reflect.Method.invokeNative(Native Method)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at java.lang.reflect.Method.invoke(Method.java:507)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:902)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:660)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at dalvik.system.NativeStart.main(Native Method)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833): [Blue Error Handler] Make Debugging Report file for main
01-09 11:25:31.139: ERROR/AndroidRuntime(3833): java.lang.NullPointerException
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.webkit.HTML5VideoViewProxy$VideoPlayer$2.surfaceDestroyed(HTML5VideoViewProxy.java:322)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.SurfaceView.reportSurfaceDestroyed(SurfaceView.java:596)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.SurfaceView.updateWindow(SurfaceView.java:490)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:215)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.View.dispatchDetachedFromWindow(View.java:6169)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.ViewGroup.removeViewInternal(ViewGroup.java:2201)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.ViewGroup.removeViewInternal(ViewGroup.java:2187)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.view.ViewGroup.removeView(ViewGroup.java:2135)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.webkit.HTML5VideoViewProxy$VideoPlayer$1.onCustomViewHidden(HTML5VideoViewProxy.java:160)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at com.android.rmtest.SocialMedia$chromeClient.onPrepared(SocialMedia.java:155)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.widget.VideoView$2.onPrepared(VideoView.java:298)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:1313)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.os.Looper.loop(Looper.java:130)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at android.app.ActivityThread.main(ActivityThread.java:3737)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at java.lang.reflect.Method.invokeNative(Native Method)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at java.lang.reflect.Method.invoke(Method.java:507)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:902)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:660)
01-09 11:25:31.139: ERROR/AndroidRuntime(3833):     at dalvik.system.NativeStart.main(Native Method) 
```

# websphere - 在应用程序面板中定义自定义属性 - 如何获取代码中的值？

> ID：14229079
> 
> 赞同：9
> 
> 时间：2013-01-09T05:56:36.883
> 
> 标签：websphere, websphere-8

在 IBM WebSphere Web 管理控制台中，可以转到应用程序 -> WebSphere 企业应用程序，选择一个应用程序并单击“自定义属性”链接。会有一个页面来添加键值对。您将如何从代码中访问这些值？这些属性似乎并没有出现在系统属性中，也没有出现在 ServletContext 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:18:15.283

在 IBM WebSphere Application Server 的 7 年职业生涯中，我从未见过使用它。我**认为**，如果它曾经被使用过，那么我会将该功能称为支持它的 IBM WebSphere 过去版本的遗留功能。

对于特定于应用程序的配置设置，我强烈推荐`web.xml`用于 Web 应用程序或用于 Web 应用程序和其他应用程序类型的[@Resource](http://docs.oracle.com/javaee/6/api/javax/annotation/Resource.html)注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T19:18:04.060

我在 WAS ND 8.5 上对此进行了测试。向应用程序添加自定义属性会将其添加到 deployment.xml。

我用属性名称=“testprop”值=“真”更新了\DefaultApplication.ear。它在这里更新：

C:\WASNEW85\WebSphere\AppServer\profiles\Dmgr01\config\cells\cell01\applications\DefaultApplication.ear.ear\deployments\DefaultApplication.ear

数值显示：

```
<properties xmi:id="Property_1424805152486" name="testprop" value="true" description="test-forum" required="false"/> 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T07:56:14.310

*这个答案不完全是主题，但它可以解决定义和设置由 WebSphere 管理的 Web 应用程序的配置属性的问题。*

在 WebSphere 下为 Web 应用程序定义配置设置的最简单方法如下：

1.  `servlet`使用初始化参数定义 Web 应用程序设置：

***web.xml***

```
<servlet>
  <servlet-name>my-servlet</servlet-name>
  <servlet-class>
    my.servlet.ClassName
  </servlet-class>
  <init-param>
    <param-name>someConfigurationPropertyName</param-name>
    <param-value>This Value Can Be Set</param-value>
  </init-param>
</servlet> 
```

2.  可以使用 Web 管理控制台更改这些`servlet`参数的值，您可以在`Enterprise Applications > your-web-application-name > Initialize parameters for servlets`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-08T13:48:57.940

**在 IBM WebSphere Application Server 版本 7 或版本 8 上设置 Web 容器定制属性**

1.  在管理控制台中，单击“Servers”，在 Servers 下单击“Server Types”，在 Server Types 下单击“WebSphere Application Servers”
2.  单击要应用自定义属性的服务器
3.  在“配置”和“容器设置”下单击“Web 容器设置”，在“Web 容器设置”下单击“Web 容器”
4.  在“配置”和“其他属性”下单击“自定义属性”
5.  在自定义属性页面中，单击“新建”
6.  在设置页面中，在“名称”字段中输入要添加的自定义属性的名称，在“值”字段中输入要为自定义属性设置的值。请注意，某些属性区分大小写。
7.  单击“应用”或“确定”
8.  在出现的“消息”框中单击“保存”
9.  重新启动服务器以使自定义属性生效

**要在 IBM WebSphere Application Server 版本 6 上设置 Web 容器定制属性：**

1.  在管理控制台中，单击“服务器”并在“服务器”下单击“应用程序服务器”
2.  单击要应用自定义属性的服务器
3.  在“配置”和“容器设置”下单击“Web 容器设置”，在“Web 容器设置”下单击“Web 容器”
4.  在“配置”和“其他属性”下单击“自定义属性”
5.  在自定义属性页面中，单击“新建”
6.  在设置页面中，在“名称”字段中输入要添加的自定义属性的名称，在“值”字段中输入要为自定义属性设置的值。请注意，某些属性区分大小写。
7.  单击“应用”或“确定”
8.  在出现的“消息”框中单击“保存”
9.  重新启动服务器以使自定义属性生效

**要使用 wsadmin 在 WebSphere Application Server 版本 6 上设置 webcontainer 定制属性：**

1.  创建一个 jacl 脚本来添加/更新自定义属性。
2.  确保服务器正在运行。
3.  使用“wsadmin -f .jacl”在 wsadmin 中运行 jacl 脚本
4.  重新启动服务器以使自定义属性生效。

# java - 为什么在构造函数中添加静态 ArrayList 会导致泄漏？

> ID：14229084
> 
> 赞同：3
> 
> 时间：2013-01-09T05:56:56.167
> 
> 标签：java, constructor, arraylist

我正在使用 NetBeans IDE，它给了我一个对我来说没有意义的警告。警告指出“在构造函数中泄漏这个”。以下代码是基本设置（我只是删除了与问题无关的代码）。基本上我只想保留所有`Square`制作对象的列表。这是我需要担心的警告吗？或者它只是根据情况而导致内存泄漏的可能原因？

无论哪种方式，有人可以解释为什么这会被视为泄漏吗？

```
public class Square {
    private static ArrayList<Square> squares;

    public Square() {
        if(squares == null) {
            squares = new ArrayList<>();
        }

        squares.add(this); // I get a warning on this line
    }
} 
```

我知道这只是一个警告，但我不喜欢忽略警告，除非我完全了解正在发生的事情并且可以针对特定情况做出明智的选择。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T06:09:59.360

（不是真正的答案，但是...）

如果您的目标确实是在列表中维护您创建的所有方块的列表，那么有一种更好的方法可以实现：

```
public class Square
{
    private static final List<Square> allSquares = new ArrayList<Square>();

    // Constructor: private!
    private Square() {}

    // Create a square
    public static Square newSquare()
    {
        Square ret = new Square();
        allSquares.add(ret);
        return ret;
    }
} 
```

您会注意到构造函数中没有`this`转义。

要创建一个新正方形，您将执行以下操作：

```
Square mySquare = Square.newSquare(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T06:03:52.150

我认为警告与垃圾收集无关，尽管这确实是一个问题。实例永远不会被 GC 处理（除非`ClassLoader`收集了整个实例）。

警告是说`this`正在从构造函数中传递给另一个方法。在构造函数完成之前，根据构造函数`this`所包含的逻辑，不一定是一个完整的和初始化的对象。构造函数中的任何事情都旨在在其他任何事情接触到对象之前发生。`this`但是在构造函数完成之前还有其他东西要使用。这可能会导致令人惊讶的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T06:01:41.203

> 有人可以解释为什么这会被认为是泄漏吗？

这是一个（潜在的）泄漏，因为`squares`列表和列表中的任何对象都不会被垃圾收集。如果没有其他代码可以从列表中删除对象，或者清除列表或为空列表，则对象将通过列表泄漏。

* * *

也许您需要了解在垃圾收集语言的上下文中“内存泄漏”是什么意思。在像 C 或 C++ 这样的语言中，当对象丢失时会发生存储泄漏；即应该释放/处置对象的代码未能这样做。在垃圾收集语言中，当 GC 未能释放/处置对象时会发生泄漏，因为它似乎仍在使用中；即GC仍然可以通过跟踪找到对象。

* * *

然而，在重读这个问题时，我同意肖恩欧文的观点。消息“Leaking this in constructor”很可能是在谈论构造函数在构造函数完成之前使对象的引用可见的事实。这也称为“不安全发布”。它可能是潜在的并发错误的来源。（这甚至可能是单线程应用程序中的问题；例如，如果您创建 Square 的子类 ...）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T06:00:50.880

*免责声明：这只是一个猜测！*

如果这是唯一`squares`被修改的地方，那么这意味着`Square`对象永远不会被垃圾收集，因为每个对象总是至少有一个引用。如果是这样，也许您的 IDE 足够聪明，可以发现这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T06:12:18.887

> 为什么在构造函数中添加静态 ArrayList 会导致内存泄漏？

没有。这不是您收到警告的根本原因。然而，还有许多其他问题。

1.  `this`不应在构造函数之外传递。（如果您不遵守此规定，可能会出现零星问题）

2.  `Square`类包含所有它创建的对象的列表。这意味着对于创建的每个对象，至少存在一个引用。

    ```
    Square aSq = new Square(); // two references, aSq and reference in ArrayList
    new Square(); // one reference in ArrayList 
    ```

    因此，直到类存在于内存中，所有创建的对象都不会被垃圾回收。因此内存泄漏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T06:04:11.293

我假设您了解静态变量由 ClassLoaders 引用的 Class 对象引用。因此，除非您的 ClassLoader 本身有资格进行垃圾收集，或者 ClassLoader 通过某种方式丢弃您的引用类，否则它永远不会被垃圾收集。因此，每次调用构造函数时，都会将数据添加到几乎永远不会被垃圾收集的列表中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T06:30:03.143

无论出于何种原因，我认为这是一种不好的做法。

OOP 存在的理由是封装一组合约。并且这些合同必须对课程的订阅者清晰可见。

当有人实例化`new Square()`时，对于程序员来说，实例化也将此实例添加到非垃圾收集列表中并不明显。

所以，我程序员很乐意频繁地实例化 Square，并且相信只要我有意识地取消对每个平凡实例化 Squares 的所有引用，它就会被垃圾收集。但我错了——因为尽管我做出了所有有意识的努力，但没有一个实例会被垃圾收集。

你知道，垃圾收集为我们程序员提供了一些习惯性的捷径。例如，下面的 while 结构例示了简单实例化对象的简化。程序员对反复重新实例化 String ins 没有疑虑，因为他/她知道前一个实例将被垃圾收集。

```
String ins = new String();
while(c != null && ins != null) {
  ins = new String();
  readInputInto(ins);
} 
```

但是，用您的 Square 替换 String 并将其交到普通程序员的手中。程序员会假设与 String 相同的垃圾回收能力！

因此，尝试在构造函数中做太多事情并不是一个好习惯，尤其是在构造函数中隐藏一个具有重大影响的动作。

您应该简单地将实例添加到构造函数之外的列表中。

# design-patterns - 责任链和命令设计行为模式有什么区别？

> ID：14229086
> 
> 赞同：0
> 
> 时间：2013-01-09T05:57:00.223
> 
> 标签：design-patterns

我有*Grady Booch 的《设计模式》一书，但我***对责任链**和**命令设计模式**之间的区别感到困惑？任何人都可以提供一些清晰度吗？

我试图弄清楚在迷你服务器系统中使用哪一个，您可以在其中发送类似`LOGIN <user:pass>`或`ADD_ENTRY <title:description>`之类的命令，然后我想我可以创建一个线程来解析任何传入的数据，然后将其扔给一些人`commandHandler`或者可以查看`command`和发送的数据，并对其执行操作的东西。似乎**责任链**或**命令**都可以解决这个问题，但我对它们之间的区别感到困惑。

谁能解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T23:17:16.293

想通了-命令基本上只是封装在对象中的命令。责任链更像是一个试图处理某事的对象，如果没有，则将其传递给“链”中的下一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T08:23:46.497

在责任链模式中，您没有机会撤消、保存或排队操作。如果你需要这样做，你必须使用命令模式。如果您想在与使用命令模式不同的时间执行 te 操作。如果多个对象可以处理一个请求，则使用责任链。

# php - 在 PHP 中分配文本

> ID：14229089
> 
> 赞同：-1
> 
> 时间：2013-01-09T05:57:12.030
> 
> 标签：php

在我的名为“account.php”的 php 文件中，我有

```
<?php 
// First we execute our common code to connection to the database and start the session 
require("common.php"); 
// At the top of the page we check to see whether the user is logged in or not 
if(empty($_SESSION['user'])) 
{ 
    // If they are not, we redirect them to the login page. 
    header("Location: login.php"); 
    // Remember that this die statement is absolutely critical.  Without it, 
    // people can view your members-only content without logging in. 
    die("Redirecting to login.php"); 
}          
?> 
<html>
<body>
    <link rel="icon" type="image/gif" href="favicon.gif" />
    <?php include("header.php"); ?>
    <div id="main-box">
        <ul>
            <li class="buttons">
<?php 
//TEXT BOX WITH A LINE FROM **TEXT.txt** SHOULD APPEAR HERE AFTER USER CLICKS BUTTONS 
?>
                <input type="button" name="account" value="Get Your Account" onclick="#" />
            </li>
        </ul>
    </div>
</body>
</html> 
```

我想要它，所以当用户单击按钮时，会出现一个文本框并显示文本文件中的一行，当他们查看它时，它会从文本文件中删除它。 **文本.txt**

```
Eddie so after the user clicks the button it displays this line to them and then deletes it after so that the next line would then become the first line. 
Apples
Hello
People 
```

如果您不理解我的问题，请告诉我，我将尝试进一步解释。谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:21:10.810

我的建议是使用 javascript（或 jQuery）对处理文本文件读取的 PHP 脚本进行 AJAX 调用，然后删除第一行。然后，javascript 需要获取脚本的响应（文本文件上的行）并将文本框添加到页面。

# javascript - 尝试使用 Ajax 打开 window.open，window.print 不起作用（IE9）

> ID：14229098
> 
> 赞同：1
> 
> 时间：2013-01-09T05:57:45.737
> 
> 标签：javascript, jquery

我正在尝试打开新窗口并使用 javascript 和 jquery-1.8.3 发送表单数据。

在 Bernhard 的帮助下，我成功调用了一个带有打印页面的新窗口。

（非常感谢 Bernhard。window.open[和发送表单数据不起作用](https://stackoverflow.com/questions/14226470/window-open-and-sending-form-data-not-working)）

但是，`window.print()`功能在 IE9 中不起作用！（FF，Chorme 做得很好）

我刷新了页面，然后IE9调用`window.print()`

这是源代码。

```
<a href="#" onclick="printPage()">Print this</a>

<script type="text/javascript" src="/common/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript">

function printPage(){

    $.post('/common/print.jsp', {view:$("#ctn").html()}).success(function(response){
        var oWindow = window.open('', "printWindow", "width=700px,height=800px");
        oWindow.document.write(response);
        oWindow.print(); // I added this line. But IE9 not working.
    });
}
</script> 
```

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:18:04.107

试试这个：

```
 $.post('/common/print.jsp', {view:$("#ctn").html()}).success(function(response){
        var oWindow = window.open('', "printWindow", "width=700px,height=800px");
        oWindow.document.write(response);
        oWindow.document.close();
        oWindow.focus();
        oWindow.print(); // I added this line. But IE9 not working.
    }); 
```

签出这个：

`Using HTTP Headers to Force Standards View in Internet Explorer 8 and Above`

您还可以使用元标记强制标准模式。`X-UA-Compatible meta tag`告诉 Internet Explorer 使用或模拟哪种视图模式。

`By setting this meta tag, you tell IE to use standards mode even if there are comments or an XML declaration above the DOCTYPE.`你`determine what version of Internet Explorer can best view the page`，然后设置元标记来定义那个版本。

```
IE 7:

<meta http-equiv="X-UA-Compatible" value="IE=7"> 

IE 8:

<meta http-equiv="X-UA-Compatible" value="IE=8"> 

IE 9:

<meta http-equiv="X-UA-Compatible" value="IE=9"> 
```

> 如果客户以高于其支持的视图模式访问页面（例如，IE 7 浏览器查看请求 IE8 视图模式的页面），它将忽略标签并将页面呈现为没有标签时的模式。

更多信息在这里找到：[http ://webdesign.about.com/od/internetexplorer/qt/force-compatibility-view-in-ie.htm](http://webdesign.about.com/od/internetexplorer/qt/force-compatibility-view-in-ie.htm)

# javascript - 如何获取从数组中调用的按钮的当前值以显示另一个数组中的内容？

> ID：14229108
> 
> 赞同：0
> 
> 时间：2013-01-09T05:58:24.190
> 
> 标签：javascript, arrays, for-loop

试图从数组中获取当前按钮的数值，以便我可以根据 bNames 数组编号显示来自另一个数组的图像和描述。

**我**似乎没有工作。试图根据 bNames 的数值显示 images[i] 和 descriptions[i]。

```
var bNames = ["#button01","#button02","#button03"];
var images = ["image01.png","image02.png","image03.png"];
var descriptions = ["And a one","And a two", "And a three"];

for (var i=0; i<bNames.length; i++){
$(bNames[i]).click(function(e) { 
    $("#image").html("<img src=images/" + images[i] + " />");
    $("#desc").html(descriptions[i]);
});
} 
```

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:25:03.773

您遇到的问题在此[问题](https://stackoverflow.com/questions/1331769/access-outside-variable-in-loop-from-javascript-closure)中进行了描述。另请参阅[JavaScript 循环闭包](http://trephine.org/t/index.php?title=JavaScript_loop_closures)以获取更多信息。本质上，您总是使用 . 持有的最后一个值`i`。

这样的事情应该可以解决问题：

```
for (var i=0; i<bNames.length; i++) {
    (function(index) {
        $(bNames[index]).click(function(e) { 
            $("#image").html("<img src=images/" + images[index] + " />");
            $("#desc").html(descriptions[index]);
        });
    })(i);
} 
```

同样从那个问题，你可以这样做：

```
$.each(bNames, function(i, item) {
    $(item).click(function(e) {
        $("#image").html("<img src=images/" + images[i] + " />");
        $("#desc").html(descriptions[i]);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:29:52.037

**注意：永远不要在循环中定义函数......**

**您在 HTML5 的世界中，*这是一场革命*......使用数据属性......** 这是解决方案......

HTML：

```
 <button class="button" data-index="0">Button01</button>
  <button class="button" data-index="1">Button02</button>
  <button class="button" data-index="2">Button03</button>
  <div id="image"></div>
  <div id="desc"></div> 
```

Javascript：

```
var images = ["image01.png","image02.png","image03.png"];
var descriptions = ["And a one","And a two", "And a three"];

$(".button").click(function(){
  var i = $(this).data("index");
  $("#image").html("<img src=images/" + images[i] + " />");
  $("#desc").html(descriptions[i]);
}); 
```

# vba - 如何在 VBA Msword 2003 doc 中将所有升高/降低的字符更改为上标/下标字符？

> ID：14229113
> 
> 赞同：1
> 
> 时间：2013-01-09T05:58:45.673
> 
> 标签：vba, ms-word

如何在 VBA MS Word 2003 文档中将所有**升高/降低字符**更改为 **上标/下标字符？**

我的非功能代码：

```
Public Sub Normalize_Position()
    Application.ScreenUpdating = False

    Dim uVals() As Variant
    Dim Rng As Range

    'All these values are font positions
    uVals = Array(0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5, 5.5, 6, 6.5, 7, 7.5)

    For v = 0 To UBound(uVals)

        With Selection
            .HomeKey Unit:=wdStory

            Set Rng = ActiveDocument.Range
            Rng.Collapse Direction:=wdCollapseStart

            Rng.Find.ClearFormatting
            Rng.Find.Font.position = uVals(v)
            Rng.Find.Replacement.ClearFormatting
            With Rng.Find
                .Text = ""
                .Replacement.Text = ""
                .Replacement.Font.position = 0
                .Replacement.Font.Superscript = 1
                .Replacement.Font.Color = wdColorRose
                .Forward = True
                .Wrap = wdFindContinue
                .Format = True
                .MatchCase = False
                .MatchWholeWord = False
                .MatchWildcards = False
                .MatchSoundsLike = False
                .MatchAllWordForms = False
            End With
            Rng.Find.Execute Replace:=wdReplaceAll

        End With
    Next

    Application.ScreenUpdating = True
    'Free up memory
    ActiveDocument.UndoClear
    Debug.Print "Normalize font position Finished.!"
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T14:27:03.013

该`Rng.Find.Font.position`字段的类型为 long not double，因此您不会规范化那些使用小数来提高/降低其位置的字符。

您可以遍历所有字符并检查是否

`ActiveDocument.Range.Characters.Item(i).Font.Position > 0`

但这可能需要很长时间，尤其是在处理大型文档时。

如果我能找到一个解决方案，我会回来的。

# php - Wordpress功能中的字符限制

> ID：14229115
> 
> 赞同：0
> 
> 时间：2013-01-09T05:58:51.330
> 
> 标签：php, wordpress

我正在使用下面的代码来显示`latest post`从`sub-domain`到`domain`--这是`code`我正在使用的--

我需要将`post_title`like的限制字符显示为30

这是代码..

```
function render_my_recent_posts( $numberposts = 5 ) { ?>

    <ul>
    <?php
        $args = array( 'numberposts' => '5' );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ) {
            echo '<li><img src="/images/default-user-avatar-3.jpg"><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a> </li> ';
        }
    ?>
    </ul><?php
} 
```

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:03:20.290

会`substr($recent["post_title"],0,30)`做你需要的吗？

# iphone - 地图别针上的附件按钮

> ID：14229117
> 
> 赞同：1
> 
> 时间：2013-01-09T05:58:55.423
> 
> 标签：iphone, ios

> **可能重复：**
> [MKPinannotation 详细信息披露按钮 - 呈现新视图](https://stackoverflow.com/questions/6195774/mkpinannotation-detail-disclosure-button-present-new-view)

任何人都知道我如何在地图图钉上获得附件按钮（详细信息披露）并在其点击事件上发生一些事件。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:04:03.243

您可以使用以下方法将附件按钮添加到您的 pin：

```
yourPinView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
```

当您单击附件按钮时，将调用此委托：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view 
            calloutAccessoryControlTapped:(UIControl *)control
{
   //do your stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:05:27.397

如果你想要一些不同的然后做

```
 UIButton *DetailViewBtn = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        DetailViewBtn.tag = currentAnnotation.tag;

        [DetailViewBtn setTitle:currentAnnotation.title forState:UIControlStateNormal];
        [DetailViewBtn addTarget:self
                        action:@selector(annotationBtnPress:)
              forControlEvents:UIControlEventTouchUpInside];

        yourAnnotationView.rightCalloutAccessoryView = DetailViewBtn; 
```

和你的方法在这里

```
-(IBAction)annotationBtnPress:(id)sender
{
    NSLog(@"raj");
} 
```

# java - 如何在 Box2d（Java）中获取身体上的触摸事件

> ID：14229118
> 
> 赞同：1
> 
> 时间：2013-01-09T05:58:58.090
> 
> 标签：java, android, box2d, libgdx

在 libGDX 中的 Box2d 的帮助下，我以某个角度旋转了各种物体。我想要的是当我点击它时破坏身体，但问题是我无法获得身体的区域定义，所以我可以检查我的接触点是否在身体内部。我尝试使用 actor 及其 hit() 方法，但它只有在我不旋转它的情况下才能工作，据我所知，一旦我旋转了 body ，它的边界就不会旋转。那么，我们如何在 Body 中检查 Touch 事件。 *提前致谢。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:20:26.223

请参阅[libgdx Box2DTest](http://code.google.com/p/libgdx-backend-android-livewallpaper/source/browse/gdx-backend-android-livewallpaper-example/src/com/badlogic/gdx/tests/box2d/Box2DTest.java?r=ba02aaf34a8ca07daa0c30493bab993067c652f9)`touchDown`中的处理程序。他们使用（AABB 是“Axis-Aligned Bounding Box”）来查询哪些对象与触摸点周围的小边界框相交，然后使用查询回调来验证实际触摸点与相关对象相交。`World.QueryAABB`

# c# - 在 C# WPF 的计算器应用程序中显示“-”符号的问题

> ID：14229122
> 
> 赞同：1
> 
> 时间：2013-01-09T05:59:18.863
> 
> 标签：c#, wpf, textbox

嗨，我正在尝试学习 Windows 演示文稿基础 WPF，并试图开发最简单的应用程序计算器。但是当我从较小的值中减去较高的值时，我在显示“-”时遇到了问题。例如。如果我执行类似“10 - 20”的操作，则屏幕（即文本框）中的输出应为“-10”。但它显示“10-”。不知何故，“-”终于来了。我的文本框 xaml 代码如下所示：

```
 <TextBox Height="33" HorizontalAlignment="Left" Name="outputbox" 
             VerticalAlignment="Top" Width="278" 
             FontFamily="Tahoma" FontSize="18" 
             FlowDirection="righttoleft" IsReadOnly="True" /> 
```

做减法和显示的代码看起来像这样

```
 if (entry1 > entry2)
      {
        outputbox.Text = (entry1 - entry2).ToString();
      }
      else 
      {
        outputbox.Text = "-" + (entry2 - entry1).ToString();
      } 
```

调试时它显示正确的字符串为“-10”，但在文本框中显示时显示字符串“10-”。关于缺少什么的任何想法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:02:55.887

只需从 TextBox 中删除 FlowDirection 属性，您的结果就可以了。

```
<TextBox Height="33" 
         HorizontalAlignment="Left" 
         Name="outputbox" VerticalAlignment="Top" 
         Width="278" 
         FontFamily="Tahoma" 
         FontSize="18"  IsReadOnly="True" /> 
```

或者您可以指定`FlowDirection="LeftToRight"`哪个是 TextBox 的默认值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:19:42.257

谢谢大家。我删除了“FlowDirection”属性，它显示了正确的“-10”，但文本现在显示在文本框的左侧。所以我使用了“TextAlignment = right”属性，它似乎工作正常。再次感谢大家。

# ios - 在 iOS 中调用 SOAP 请求

> ID：14229128
> 
> 赞同：-3
> 
> 时间：2013-01-09T06:00:14.353
> 
> 标签：ios, cocoa-touch, soap

我想在 iphone 中调用 SOAP 请求。但我不知道该怎么做。请给我一些在 iphone 中调用 SOAP 请求的代码，如下所示？

```
<soap:Envelope 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">

    <soap:Header>
        <wsse:Security 
            xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
            xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
            xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" soap:mustUnderstand="1">
                <wsse:UsernameToken 
                    xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
                    xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                            <wsse:Username>cbrown</wsse:Username>
                            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">welcome</wsse:Password></wsse:UsernameToken>
        </wsse:Security>
    </soap:Header>
    <soap:Body xmlns:ns1="http://xmlns.oracle.com/bpel/aubi/mobile/Worklist">
        <ns1:WorklistRetrievalREQ>
            <ns1:WorklistType>HR_OFFER</ns1:WorklistType>
            <ns1:Status>TODO</ns1:Status>
            <ns1:Mode/>
        </ns1:WorklistRetrievalREQ>
    </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:06:26.880

这是调用 SOAP Web 服务的方式：

在您的 .h 文件中声明：

```
 NSMutableData       *webPortFolio;
    NSMutableString     *soapResultsPortFolio;
    NSURLConnection     *conn;

    //---xml parsing---

    NSXMLParser         *xmlParserPortFolio;
    BOOL                elementFoundPortFolio;
    NSMutableURLRequest *req;

    NSString            *theXMLPortFolio;
    NSString            *strSoapMsg;
    UIAlertView         *alertView; 
```

在您的 .m 文件中使用以下代码：

```
-(void)loadPortfolioData
{

    strSoapMsg = [[NSString alloc] initWithFormat:
                  @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                  "<soap12:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap12=\"http://www.w3.org/2003/05/soap-envelope\">"
                  "<soap12:Body>"
                  "<GetPortfolioList xmlns=\"http://tempuri.org/\">"
                  "<EmailID>%@</EmailID>"
                  "<Password>%@</Password>"
                  "<TradingGameID>%d</TradingGameID>"
                  "</GetPortfolioList>"
                  "</soap12:Body>"
                  "</soap12:Envelope>",gameUserName,gamePassword,gameid];

    //---print it to the Debugger Console for verification---
    NSLog(@"soapMsg..........%@",strSoapMsg);

    NSURL *url = [NSURL URLWithString:@"http://www.abc.sirus/Process/process.asmx"];
    req = [NSMutableURLRequest requestWithURL:url];

    //---set the headers---

    NSString *msgLength = [NSString stringWithFormat:@"%d",[strSoapMsg length]];
    [req addValue:@"application/soap+xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [req addValue:@"http://tempuri.org/GetPortfolioList"  forHTTPHeaderField:@"SOAPAction"];
    [req addValue:msgLength forHTTPHeaderField:@"Content-Length"];

    //---set the HTTP method and body---

    [req setHTTPMethod:@"POST"];
    [req setHTTPBody: [strSoapMsg dataUsingEncoding:NSUTF8StringEncoding]];

    // [activityIndicator startAnimating];

    conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
    if (conn)
    {
        webPortFolio = [[NSMutableData data] retain];
    }
} 
```

要处理响应，您可以使用以下功能：

```
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webPortFolio setLength:0];     
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webPortFolio appendData:data];
}

-(void) connection:(NSURLConnection *) connection didFailWithError:(NSError *) error
{

    NSLog(@"error...................%@",[error description]);
    [webPortFolio release];
    [connection release];
}

-(void) connectionDidFinishLoading:(NSURLConnection *) connection
{

    //Check the request and returns the response.

    NSLog(@"DONE. Received Bytes: %d", [webPortFolio length]);

    theXMLPortFolio = [[NSString alloc] 
                      initWithBytes: [webPortFolio mutableBytes] 
                      length:[webPortFolio length] 
                      encoding:NSUTF8StringEncoding];

    //---shows the XML---

    NSLog(@"shows the XML %@",theXMLPortFolio);
    [theXMLPortFolio release];    

    if(xmlParserPortFolio)
    {
        [xmlParserPortFolio release];
    }
    xmlParserPortFolio = [[NSXMLParser alloc] initWithData: webPortFolio];
    [xmlParserPortFolio setDelegate: self];
    [xmlParserPortFolio setShouldResolveExternalEntities:YES];
    [xmlParserPortFolio parse];
    [webPortFolio release];
    [connection release];
}

//---when the start of an element is found---
-(void)  parser:(NSXMLParser *) parser 
didStartElement:(NSString *) elementName 
   namespaceURI:(NSString *) namespaceURI 
  qualifiedName:(NSString *) qName
     attributes:(NSDictionary *) attributeDict
{

    if( [elementName isEqualToString:@"GetPortfolioListResult"])
    {
        if (!soapResultsPortFolio)
        {
            soapResultsPortFolio = [[NSMutableString alloc] init];
        }
        elementFoundPortFolio = TRUE;
        NSLog(@"Registration...%@",soapResultsPortFolio);
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        elementFoundPortFolio = TRUE;
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        elementFoundPortFolio = TRUE;
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        elementFoundPortFolio = TRUE;
    }

}

-(void)parser:(NSXMLParser *) parser foundCharacters:(NSString *)string
{
    if (elementFoundPortFolio)
    {
        [soapResultsPortFolio appendString: string];
    }      
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    NSLog(@"Parser error %@ ",[parseError description]);
}

//---when the end of element is found---
-(void)parser:(NSXMLParser *)parser 
didEndElement:(NSString *)elementName 
 namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"GetPortfolioListResult"])
    {          
        NSLog(@"display the soap results%@",soapResultsPortFolio);
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {          
        //Perform required action
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        //Perform required action
    }
    else if([elementName isEqualToString:@"your_tag_name"])
    {
        //Perform required action
    }

    [soapResultsPortFolio setString:@""];
    elementFoundPortFolio = FALSE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:04:01.000

如果项目中的soap调用数量增加，我可以推荐使用工具wsdl2objc。它将生成一个 Objective C 服务和模型定义。工具最近没有更新，也没有使用Arc，不过还是可以的。[http://code.google.com/p/wsdl2objc/wiki/UsageInstructions](http://code.google.com/p/wsdl2objc/wiki/UsageInstructions)

# c# - Workflow Foundation 4.5“表达式活动类型'CSharpValue`1'需要编译才能运行。”

> ID：14229129
> 
> 赞同：6
> 
> 时间：2013-01-09T06:00:28.193
> 
> 标签：c#, workflow-foundation, .net-4.5, workflow-foundation-4.5

我正在阅读 WF45 的[入门教程](http://msdn.microsoft.com/en-us/library/dd489454.aspx)，遇到了一个其他人似乎经历过的问题，但与我遇到的方式不同。我希望其他人有我的解决方案。

当我完成教程时，一切都很好，直到我必须从工作流主机运行它。此时，工作流的实例化失败并返回以下消息。

> “Expression Activity 类型‘CSharpValue`1’需要编译才能运行。请确保工作流已经编译。”

我已尝试从[Windows Workflow Foundation (WF45) - 入门教程](http://go.microsoft.com/fwlink/?LinkID=248976)下载源代码，以防我错过了一个步骤，但错误仍然存​​在。

在线阅读似乎需要编译具有嵌入式 C# 表达式的工作流，但据我了解，在使用 VS2012 和工作流设计器时默认情况下会发生这种情况？我试图实现在[这里](http://msdn.microsoft.com/en-us/library/jj591618.aspx)找到的 CompileExpressions 方法，但这并没有帮助。我确实读到在预发布版本中存在一个问题，C# 表达式导致了这个问题，但 VB 项目工作正常。对此进行测试，我发现我正在遭受这种确切的情况。VB 教程运行良好，但 C# 版本因此异常而失败。

此外，我敢说：这不是我同事机器上的问题，所以我认为这是我机器上的配置问题......

**更新和闪避修复：**

所以，我已经设法解决了这个问题，尽管我对解决方案不满意，并且很想听听是否有人有正当的理由发生这种情况。

我的解决方法是用我同事的同一文件版本替换*\Framework\v4.0.30319文件夹中的**Microsoft.Common.targets*文件。这解决了这个问题。它还破坏了什么还有待观察......

 ** * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T15:39:36.077

最初的问题线程已经很老了，但也可能对您有所帮助。

我的动态活动遇到了同样的问题，发现文档有误：

这是产生上述错误的代码：

字符串路径 = @"myActivity.xaml";

```
 Activity activity = ActivityXamlServices.Load(path);

            IDictionary<string, object> dictionary = new Dictionary<string, object>
            {
                { "Arg", 1},
            };

            IDictionary<string, object> output = WorkflowInvoker.Invoke(activity, dictionary); 
```

这是工作代码：

字符串路径 = @"myActivity.xaml";

```
 ActivityXamlServicesSettings settings = new ActivityXamlServicesSettings
            {
                CompileExpressions = true
            };

            Activity activity = ActivityXamlServices.Load(path, settings);

            IDictionary<string, object> dictionary = new Dictionary<string, object>
            {
                { "ArgNumberToEcho", 2},
            };

            IDictionary<string, object> output = WorkflowInvoker.Invoke(activity, dictionary); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-21T01:06:17.297

这可能对某人有所帮助 - 对我有用的是我在我的一个分配的表达式窗口中有换行符。删除换行符并开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T08:59:06.630

此错误的另一个原因是表达式的值中有太多 \r\n。

因此，如果您在“值”部分有类似这样的分配活动

```
new myobject(){
     param1=val1,
     param2=val2,   
     param3=val3,
     param4=val4,
     param5=val5,    
     param6=val6,
} 
```

将其更改为：

```
new myobject(){param1=val1,param2=val2,param3=val3,param4=val4,param5=val5,param6=val6,} 
```

现在按住两个拇指，希望它能修复错误。*

# css - 嵌套 ul/li 的底部边框不是整个宽度

> ID：14229131
> 
> 赞同：0
> 
> 时间：2013-01-09T06:00:34.953
> 
> 标签：css, html-lists, border

**修复！**我为 gRow 类添加了一个负左边距，等于周围容器的宽度（在我的例子中为 744px）。它似乎适用于 Chrome 和 IE。但它在我的小提琴中不起作用:-？

我有一个描述树状结构的无序列表。每个 li 包含一个带有 class="gRow" 的 div 元素。此 div 在网格中包含其他带有“单元格”的 div。我想在每个 gRow （或 li？）上添加一个边框底部，保持 li 上的 padding-left 但同时让所有 li/gRows 的边框底部宽度相同（整个宽度容器）。

我正在使用 Ajax 动态添加新级别，但我不知道结构的深度。

这是我已经走了多远：

![在此处输入图像描述](../Images/f1ba97d1d902e93e4e7a3278b309c1c8.png)

我的CSS是这样的

```
ul {margin: 0;padding: 0;list-style-type: none;}
li { padding-left: 16px;}
.gRow { border-bottom: 1px #CCD9E0 solid;height: 20px; margin-left: -744px;} 
```

这是一个 jsFiddle：http: [//jsfiddle.net/kJQeq/](http://jsfiddle.net/kJQeq/)

希望你能帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:27:04.163

尝试在 li 上也将边距设置为 0。

```
ul {margin: 0;padding: 0;list-style-type: none;}
li { margin: 0; padding-left: 16px;}
.gRow { border-bottom: 1px #CCD9E0 solid;height: 20px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:00:28.513

我为 gRow 类添加了一个负左边距，等于周围容器的宽度（在我的例子中为 744px）。它似乎适用于 Chrome 和 IE。但它在我的小提琴中不起作用:-？

# javascript - JQuery 选项卡和超链接（请帮我修复我的代码）

> ID：14229132
> 
> 赞同：0
> 
> 时间：2013-01-09T06:00:34.833
> 
> 标签：javascript, jquery, html, tabs, hyperlink

我正在使用多个页面，每个页面都有 jQuery 选项卡。假设我有带有#tab1 和#tab2 的Page1.html 和带有#tab3 和#tab4 的Page2.html。我的代码存在以下问题：

1) 在标签内容中，Page1.html#tab2 有一个指向 Page1.html#tab1 的超链接。该链接不起作用 - 单击链接时页面仅停留在 #tab1 上。但是，Page1 上菜单容器中指向#tab1 的超链接确实有效。两个超链接都使用相同的 a href="#tab1" 但无论出于何种原因，只有在 Page1.html#tab2 内容之外的链接在链接到 Page1.html#tab1 时才有效。菜单容器中的超链接始终有效。

2) 如果我向某人发送一个指向 www.Page1.html#tab2 的超链接，页面 URL 将显示为 www.Page1.html 并显示选项卡 1，这意味着我无法直接链接到选项卡。但是，网站上的菜单确实正确链接到选项卡。如果我在浏览 Page1.html 时单击 Page2.html#tab3 的菜单链接，该选项卡将正确加载并且 URL 显示 Page2.html#tab3 并且即使我单击页面上的 #tab4 也会保持这种状态。仅当单击指向不同页面的菜单超链接时，URL 才会更改，即 Page1.html#tab1 到 Page2.html#tab3。在 Page2.html#tab4 上单击 Page2.html#tab3，选项卡内容将正确更改为#tab3，但 URL 将保持为 Page2.html#tab4。

**我想要的是：**

A) 能够直接向某人发送指向选项卡的链接。向某人发送指向 www.Page1.html#tab2 的链接将始终加载为 URL www.Page1.html 并显示第一个选项卡。但是，页面上的菜单超链接确实有效。

B）如果链接在选项卡内容内，则能够在同一页面上的选项卡之间链接。例如，Page1.html#tab1 内容中的链接应该能够链接到 Page1.html#tab2。目前，它仅在 Page1.html#tab1 内容中的链接链接到单独页面上的选项卡（如 Page2.html#tab3）时才有效。

C) **** *EXTRA CREDIT* ****：当我直接单击一个选项卡时，选项卡图像“弹出”并且之前选择的选项卡“取消弹出”。当我单击指向选项卡的菜单超链接时，即使显示新选择的选项卡的正确内容，上一个选项卡仍会弹出。或者，如果使用菜单链接前往新页面上的选项卡，则不会“弹出”选项卡，但会显示正确的选项卡内容。我认为解决上述问题也将解决这个问题。

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function() {
var tabId = location.hash;
if(tabId) {
    $(tabId).show();
}
     $(function () { 
$('a[href^="#"]').click(function(e){        
    e.preventDefault();
    $('html,body').scrollTop($(this.hash).offset().top - 50);
});
});
});
</script>

<script type="text/javascript"> 
$(document).ready(function() {
var tabContents = $(".tab_content").hide(),
tabs = $("ul.tabs li, .rgtPanelBox ul li"); // Second selector to match left hand    sidebar
var tabId = location.hash;
if(tabId) {
    $(tabId).show();
}
 else {
 tabs.first().addClass("active").show();
 tabContents.first().show();
 }
 tabs.click(function() {
 var $this = $(this),
    activeTab = $this.find('a').attr('href');

if(!$this.hasClass('active') && activeTab.length > 1 && activeTab.indexOf('#') === 0){
    $this.addClass('active').siblings().removeClass('active');
    tabContents.hide().filter(activeTab).fadeIn();
}
return;
});
});
</script> 
```

无论如何，我是一个大菜鸟，所以你提供的代码越好，我就越容易批准你的答案是正确的。:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:33:32.723

您需要使您的锚标签可**散列**，也就是说，使它们对前端用户“可收藏”。您似乎正在创建自己的选项卡插件，但 jQuery UI 将为您完成散列部分。正如您所提到的，这是一个演示设置选项卡：

[http://muledesign.com/2009/05/bookmarkable-tabs-with-jquery-ui/](http://muledesign.com/2009/05/bookmarkable-tabs-with-jquery-ui/)

**演示：**

这是演示页面-> [http://muledesign.com/demo/tabs/default-tabs.html](http://muledesign.com/demo/tabs/default-tabs.html)

带有指向选项卡的可散列链接的演示页面 - > [http://muledesign.com/demo/tabs/default-tabs.html#movie](http://muledesign.com/demo/tabs/default-tabs.html#movie)

回复：C点）-尝试使用灯箱插件并将灯箱插件打开/初始化功能附加到UI选项卡上的**激活**事件-> [http://api.jqueryui.com/tabs/#event-activate](http://api.jqueryui.com/tabs/#event-activate)

感谢您可能不想使用插件，但您已经在使用 jquery 了。

# javascript - 在过滤函数 jquery 数据属性示例中使用多个值

> ID：14229133
> 
> 赞同：0
> 
> 时间：2013-01-09T06:00:36.713
> 
> 标签：javascript, jquery, filtering

我正在研究 jquery 过滤器对数据属性的使用，在这种情况下，表包含三个数据变量，即团队、专业化和级别。请让我知道最好的方法是什么以及典型的使用方法是什么。这是我的代码html：

```
<table data-team="<?php print $name['team']; ?>" data-specialization="<?php print $name['speciality']; ?>" data-level="<?php print $name['level']; ?>" cellpadding="0" cellspacing="0" border="0" width="670px" class="jobs"><tr><td>
            <tr><td colspan="4"><strong><?php print $name['title'] ?></strong></td>
            <td></td><td></td><td></td></tr>
            <tr>
            <td width="100">Location : </td>
            <td colspan="3"><?php print ($name['location']);?> </td>
            <td></td>
            <td></td>
            <td></td>
            </tr>
            <tr>
            <td> Job Code : </td>
            <td width="460"><?php print $name['id'] ?></td>
            <td></td>
            <td></td> 
            <td><a data-action="showDesc,jumpTo" href="javascript:;" id="<?php print($name['id']);?>" class="more">More Details </a></td>
            </tr></td></tr>
        </table> 
```

我从另一个 Stack Overflow 问题中获得的 javascript，它基于一个匹配属性进行显示，这是我的代码：

```
$("#search").click(function() {
            var team=$('#selectOne').val();
            var specialty=$('#selectTwo').val();
            var level=$('#selectThree').val();
            var teams=[];// 
            var special=[];
            var level=[];
            //teams=$('.jobs').data('team');
            //alert(teams);

                    $(".jobs").hide();
                        $('.jobs').filter(function(){
                                    return $(this).data('team') === team;
                                }).show();
                            });
   }); 
```

我想将所有数据团队属性放入数组中，对其进行迭代，然后检查每个表是否包含它，在这种情况下到下一个数组进行检查等等。如果数据值匹配，则显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:12:28.967

原来我的错误只是我重新声明了变量 team[]。所以基本上，这个：

```
$('.jobs')  .hide().filter('[data-team="'+team+'"][data-specialization="'+specialty+'"][data-level="'+level+'"]').addClass('num').show(); 
```

现在工作正常。

# c# - 如何在客户端应用程序中使用 wcf 服务？

> ID：14229149
> 
> 赞同：0
> 
> 时间：2013-01-09T06:02:11.280
> 
> 标签：c#, wcf, wcf-binding

服务器端代码是，

```
 [OperationContract]
        [WebInvoke(Method = "POST", UriTemplate = "UploadDamagedImage", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json)]        
        NewClsMessage UploadDamagedImage(Details ObjDt123); 
```

客户端代码是，

```
Details ObjDt = new Details();
            ObjDt.Name = "hi";
            ObjDt.Email = "hi@gmail.com";
            ObjDt.ContactNumber = "3698754215";
            ObjDt.DeviceModel = "E23";
            ObjDt.Problem = "Repair";
            ObjDt.Besttimetocontact = "9am"; 
```

在这里，我得到的错误是“对象引用未设置为对象的实例”。客户端和服务器端是否需要使用相同的对象名称？如何解决这个问题呢？

**编辑**

客户端代码是，

```
Uri uri = new Uri("http://localhost:53865/Service1.svc/UploadDamagedImage");
            Details ObjDt = new Details();
            ObjDt.Name = "hi";
            ObjDt.Email = "hi@gmail.com";
            ObjDt.ContactNumber = "3698754215";
            ObjDt.DeviceModel = "E23";
            ObjDt.Problem = "Repair";
            ObjDt.Besttimetocontact = "9am";

byte[] bytes = File.ReadAllBytes(@"D:\Projects\6mb\1.jpg");
            ObjDt.ImgUpload = bytes;
 DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Details));

            MemoryStream mem = new MemoryStream();
            ser.WriteObject(mem, ObjDt);
            string data = Encoding.UTF8.GetString(mem.ToArray(), 0, (int)mem.Length);
            WebClient webClient = new WebClient();
            webClient.UploadStringCompleted += new UploadStringCompletedEventHandler(webClient_UploadStringCompleted);
            webClient.Headers["Content-type"] = "application/json";
            webClient.Encoding = Encoding.UTF8;
            webClient.UploadStringAsync(uri, "POST", data); 
```

服务器端代码是，

```
public NewClsMessage UploadDamagedImage(Details ObjDt123)
        {
  NewClsMessage ObjNewClsMessage = new NewClsMessage();
            try
            {
 Random rand = new Random();
                int strRandNo = rand.Next();
MemoryStream ms = new MemoryStream(ObjDt.ImgUpload);  
    Image image = Image.FromStream(ms);
}
  catch (Exception ex)
            {

            } 
} 
```

# php - 为什么我的 php 中的更新查询失败？

> ID：14229150
> 
> 赞同：0
> 
> 时间：2013-01-09T06:02:13.917
> 
> 标签：php

我是 php 新手。通常我的更新查询正在工作，只有在导致查询失败的这个块中，我从`$_SESSION[id]`之前确定的值和之前`contact_id`的表单中获取了值。
请帮忙...

```
<?php
$server="localhost";
$db_user="root";
$pass="h6194v";
$db="my_db";
$koneksi=mysql_connect($server,$db_user,$pass)
     or die ("Connection Error!!");
$dateline=date("Ymd");
$query="UPDATE `contact` SET `date`=\'$dateline\', `officer`=\'$_SESSION[id]\' WHERE `contact_id`=\'$_POST[no]\'";
$result=mysql_query($query) or die ("Query fail");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:16:25.403

首先

> 请不要将 mysql_* 函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[红框](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，这里有[很好的 PDO 教程](http://goo.gl/vFWnC)。

除此之外，如果您使用mysql：

1.  `mysql_select_db($db,$koneksi)`在与 UPDATE 语句中的表名前面建立连接或使用数据库名称后选择一个数据库，例如`UPDATE my_db.contact ...`
2.  按照其他人的建议修复您的 UPDATE 语句
3.  使用正确的日期格式`date('Y-m-d')`或更好但完全放弃它并`NOW()`在您的 UPDATE 语句中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:06:50.383

我格式化了您的查询并尝试了这个。

```
$query="UPDATE `contact` SET `date`='{$dateline}', `officer`='{$_SESSION['id']}' WHERE `contact_id`='{$_POST['no']}'"; 
```

注意：不要使用 MySQL 函数，它们已被弃用，而是使用 PDO 或 MySQLi 函数。您的代码对 SQL 注入开放尝试添加验证或使用准备好的语句来保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:07:27.290

尝试这个 -

```
$query="UPDATE `contact` SET `date`='".$dateline."', `officer`='".$_SESSION['id']."' WHERE `contact_id`='".$_POST['no']."'"; 
```

但验证`$_POST`或`$_GET`在查询或任何地方使用之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:07:28.223

了解您遇到的错误类型会有所帮助。

1.  不要将用户输入或会话变量直接放入查询中，您应该首先清理它们，也许使用准备好的语句。
2.  当你遇到这样的错误时，尝试使用 var_dump 和 die 看看发生了什么。即在您的查询 var_dump($_SESSION['id']) 之前。（现在我写了那个，我看到你的数组索引上没有引号，这会导致问题。

您需要使用引号访问您的数组： $_SESSION['id'], $_POST['no']

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T06:05:54.620

像这样更改您的`update`查询

```
 $query="UPDATE `contact` SET `date`='".$dateline."', `officer`='".$_SESSION[id]."' 
WHERE `contact_id`=".$_POST[no]; 
```

如果`contact_id`是字符串，请这样做

```
$query="UPDATE `contact` SET `date`='".$dateline."', `officer`='".$_SESSION[id]."' 
WHERE `contact_id`='".$_POST[no]."'"; 
```

# ruby-on-rails-3.2 - 如何在对虾pdf中显示布尔字段？

> ID：14229154
> 
> 赞同：0
> 
> 时间：2013-01-09T06:02:41.780
> 
> 标签：ruby-on-rails-3.2, pdf-generation, prawn

我正在尝试使用 pawn 在表中显示布尔字段。我收到以下错误：

```
Content type not recognized: false 
```

我已经阅读了[http://prawn.majesticseaacreature.com/manual.pdf](http://prawn.majesticseacreature.com/manual.pdf)和 rdoc，但找不到答案。

这是简单的表格布局：

```
 def data
     table [["Design Type", @design.design_type],
            ["Hole Punch", @design.hole_punch]]
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:31:39.050

事实上，任何类型的变量都会遇到同样的问题，而不仅仅是布尔值。要获取变量的内容，您需要将它放在这样的字符串中：

```
table [["Design Type", "#{@design.design_type}"],
       ["Hole Punch", "#{@design.hole_punch}"]] 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T22:29:17.033

另一种选择是将布尔值转换为字符串：

```
 def data
     table [["Design Type", @design.design_type.to_s],
            ["Hole Punch", @design.hole_punch.to_s]]
  end 
```

# android - 如何在 Android 的 Facebook 朋友墙上发布消息

> ID：14229155
> 
> 赞同：7
> 
> 时间：2013-01-09T06:02:41.513
> 
> 标签：android, facebook

> **可能重复：**
> [Android 中好友墙上的 Facebook 帖子](https://stackoverflow.com/questions/5280720/facebook-post-on-friends-wall-in-android)

我已经制作了一个应用程序，我正在其中获取我所有**FACEBOOK 朋友**的列表，现在我想要当我点击任何朋友行时，我将能够在他/她的墙上发帖。

那么我需要提供什么权限以及我需要编写什么类型的代码才能做到这一点，

喜欢：我仍然给予以下*许可*并写在下面的代码*onListItemClick*

权限：

```
 mFacebook.authorize(main, new String[] { "publish_stream",
        "friends_birthday", "friends_photos"  }, new MyAuthorizeListener()); 
```

代码：

```
 @Override

   protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    MyFriend friend = (MyFriend) this.getListAdapter().getItem(position);

} 
```

*我正在获取 FbId、姓名、生日和图片*

```
 public class MyFriend {
private String fbID = " ";
private String name = " ";
private String bday = " "; 
private String pic = " ";

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T06:09:49.647

现在，您不能在我们朋友的墙上发帖。

因为 Facebook 已经从它的 中删除了该功能*`Graph Api`*，所以我们*`cannot Post on Friend's Wall`*

这就是为什么我们只能在我们的 Facebook 墙上发帖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T06:12:49.353

在朋友的墙上发帖的功能已从 Facebook sdk 中删除。

以前它可以通过这篇[文章](https://stackoverflow.com/a/7744153/1626878)声称的以下代码来完成，

```
 try{
    Bundle parameters = new Bundle();
    JSONObject attachment = new JSONObject();

    try {
        attachment.put("message", "Messages");
        attachment.put("name", "Get utellit to send messages like this!");
        attachment.put("href", link);
    } catch (JSONException e) {
    }
    parameters.putString("attachment", attachment.toString());
    parameters.putString("message", "Text is lame. Listen up:");
    parameters.putString("target_id", "XXXXX"); // target Id in which you need to Post 
    parameters.putString("method", "stream.publish");
    String  response = authenticatedFacebook.request(parameters);       
    Log.v("response", response);
}
catch(Exception e){} 
```

# jasper-reports - 从 Jasper 报告中 CSV 导出的表格组件中排除列标题（但首先保留）

> ID：14229157
> 
> 赞同：2
> 
> 时间：2013-01-09T06:02:50.697
> 
> 标签：jasper-reports, export-to-csv

我知道如何从*CSV报告的**JR*报告中排除列标题。

 *我需要知道如何从*CSV*报告的**表格组件**中排除列标题（但首先保留）。

 *如果这是不可能的，除了**忽略分页**之外的任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-11T12:41:49.807

通过使用此属性，您可以将第一个标题保留在 csv 导出中。

```
net.sf.jasperreports.export.csv.exclude.origin.keep.first.band.3=columnHeader
net.sf.jasperreports.export.csv.exclude.origin.keep.first.report.3=* 
```

如果您已经在 jrxml 中使用了 3，则可以使用任何其他名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T10:45:06.530

一种可能的解决方案是为每个列标题报表元素添加一个**键。**（在这种情况下，reportElement 标记中的 key="col_header"。）

```
<jr:columnHeader style="table_CH" height="50" rowSpan="1">
    <staticText>
        <reportElement uuid="0c6dfd58-9df2-4e00-b79e-43a457c7b42e" key="col_header" x="0" y="0" width="90" height="50"/>
             <textElement textAlignment="Center" verticalAlignment="Middle">
              <font size="12"/>
         </textElement>
             <text><![CDATA[ColumnName]]></text>
    </staticText>
</jr:columnHeader> 
```

接下来，在导出为 CSV 时排除密钥。（将此属性添加到报告属性列表中）。

```
<property name="net.sf.jasperreports.export.csv.exclude.key.col_header"/> 
```

瞧，列标题在 CSV 导出中被删除。

这种方法的缺点：

*   它删除所有列标题。（net.sf.jasperreports.export.csv.exclude.key.keep.first **.col_header**不起作用）。

*   将 Key 添加到每一列 Header 是相当费力的。**

# java - 从我的 android 应用程序发送电子邮件

> ID：14229161
> 
> 赞同：0
> 
> 时间：2013-01-09T06:03:05.937
> 
> 标签：java, android

我必须从我的 android 应用程序发送电子邮件。

我必须 ruh 应用程序意味着在我的 logcat 窗口上出现以下错误：

```
01-09 05:53:12.263: E/AndroidRuntime(824): FATAL EXCEPTION: main
01-09 05:53:12.263: E/AndroidRuntime(824): java.lang.RuntimeException: javax.mail.internet.ParseException
01-09 05:53:12.263: E/AndroidRuntime(824):  at com.ssmobileproductions.catalogue.InvoiceOrder$1.onClick(InvoiceOrder.java:91)
01-09 05:53:12.263: E/AndroidRuntime(824):  at android.view.View.performClick(View.java:2408)
01-09 05:53:12.263: E/AndroidRuntime(824):  at android.view.View$PerformClick.run(View.java:8816)
01-09 05:53:12.263: E/AndroidRuntime(824):  at android.os.Handler.handleCallback(Handler.java:587)
01-09 05:53:12.263: E/AndroidRuntime(824):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-09 05:53:12.263: E/AndroidRuntime(824):  at android.os.Looper.loop(Looper.java:123)
01-09 05:53:12.263: E/AndroidRuntime(824):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-09 05:53:12.263: E/AndroidRuntime(824):  at java.lang.reflect.Method.invokeNative(Native Method)
01-09 05:53:12.263: E/AndroidRuntime(824):  at java.lang.reflect.Method.invoke(Method.java:521)
01-09 05:53:12.263: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-09 05:53:12.263: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-09 05:53:12.263: E/AndroidRuntime(824):  at dalvik.system.NativeStart.main(Native Method)
01-09 05:53:12.263: E/AndroidRuntime(824): Caused by: javax.mail.internet.ParseException
01-09 05:53:12.263: E/AndroidRuntime(824):  at javax.mail.internet.ContentType.<init>(ContentType.java:102)
01-09 05:53:12.263: E/AndroidRuntime(824):  at javax.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1291)
01-09 05:53:12.263: E/AndroidRuntime(824):  at javax.mail.internet.MimeMessage.updateHeaders(MimeMessage.java:2074)
01-09 05:53:12.263: E/AndroidRuntime(824):  at javax.mail.internet.MimeMessage.saveChanges(MimeMessage.java:2042)
01-09 05:53:12.263: E/AndroidRuntime(824):  at javax.mail.Transport.send(Transport.java:117)
01-09 05:53:12.263: E/AndroidRuntime(824):  at com.ssmobileproductions.catalogue.InvoiceOrder$1.onClick(InvoiceOrder.java:86)
01-09 05:53:12.263: E/AndroidRuntime(824):  ... 11 more
01-09 05:53:14.023: I/Process(824): Sending signal. PID: 824 SIG: 9 
```

这是我的代码：

```
public class InvoiceOrder extends Activity {

              String mGrandTotal;

          @Override
            protected void onCreate(Bundle savedInstanceState) {
                // TODO Auto-generated method stub  
             super.onCreate(savedInstanceState);
                setContentView(R.layout.invoice);

               Button login = (Button) findViewById(R.id.mBtnSubmit);
                 login.setOnClickListener(new View.OnClickListener() {

                  public void onClick(View arg0) {
                   Properties props = new Properties();
            props.put("mail.smtp.host", "smtp.gmail.com");
            props.put("mail.smtp.socketFactory.port", "465");
            props.put("mail.smtp.socketFactory.class",
                    "javax.net.ssl.SSLSocketFactory");
            props.put("mail.smtp.auth", "true");
            props.put("mail.smtp.port", "465");

            Session session = Session.getDefaultInstance(props,
                new javax.mail.Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication("xxxxxx@gmail.com","xxxxx");
                    }
                });

            try {

                Message message = new MimeMessage(session);
                message.setFrom(new InternetAddress("krishnaveni.veesxxman@mercuxxsxxryminds.com"));
                message.setRecipients(Message.RecipientType.TO,
                        InternetAddress.parse("mercy.krishnaxxxdsdveni@gmail.com"));
                message.setSubject("Testing Subject");
              //  message.setContent("This is your product name : "+
                    //    "Hi Krishna" +"<br></br>This is your price : "+ "Hi veni", "text/html; charset=utf-8");
                for (int i = 0; i < Constants.mItem_Detail
                        .size(); i++) {

                        String title = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_PNAME);

                    String qty = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_QTY);

                    String cost = Constants.mItem_Detail.get(i)
                            .get(SingleMenuItem.KEY_PRICE);

                    String total = Constants.mItem_Detail
                            .get(i).get(
                                    SingleMenuItem.KEY_TOTAL);

                    message.setContent("<tr>" + "<td>" + title
                            + "</td><td>" + qty + " * " + cost
                            + "</td>" + " = <td>" + total
                            + "  " + "</td></tr>", total);
              }

                Transport.send(message);

                System.out.println("Done");

            } catch (MessagingException e) {
                throw new RuntimeException(e);
            }
           }

  }); 
```

请帮助我。我的代码有什么问题。为什么会出现错误。请给我一些想法来解决我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:17:16.287

根据 Javadoc，当您需要时，您需要在`text/html`使用[`MimeMessage#setContent()`](http://download.oracle.com/javaee/1.4/api/javax/mail/internet/MimeMessage.html#setContent%28java.lang.Object,%20java.lang.String%29)时添加`"text/html;charset==utf-8"``message.setContent();`

```
message.setContent(someHtmlMessage, "text/html; charset=utf-8"); 
```

请注意，HTML 不应包含`<html>`,`<head>`或`<body>`. Gmail 会忽略它。

```
message.setContent( "<tr>
                        <td>" + title + "</td>
                        <td>" + qty + "*" + cost+ "</td>
                        <td>" + "=" + total + "</td>
                    </tr>",   "text/html;charset=utf-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:07:06.780

```
 Intent i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822");
i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"recipient@example.com"});
i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
i.putExtra(Intent.EXTRA_TEXT   , "body of email");
try {
    startActivity(Intent.createChooser(i, "Send mail..."));
} catch (android.content.ActivityNotFoundException ex) {
    Toast.makeText(MyActivity.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:12:51.917

你可以试试这样。

```
 String mailContent = "mailto:" + mailTo + "?subject=" + subject + "&body=" + body;

  Intent intent = new Intent("android.intent.action.VIEW", Uri.parse(mailContent));
  startActivity(intent); 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:14:58.193

```
Intent email = new Intent(Intent.ACTION_SEND);
    email.putExtra(Intent.EXTRA_EMAIL, new String[]{"youremail@yahoo.com"});          
    email.putExtra(Intent.EXTRA_SUBJECT, "subject");
    email.putExtra(Intent.EXTRA_TEXT, "message");
    email.setType("message/rfc822");
    startActivity(Intent.createChooser(email, "Choose an Email client :")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T06:29:26.887

您在*To*字段中只有一个 Recipient，因此您应该使用`setRecipient`method 而不是`setRecipients`。
尝试这个：

```
message.setRecipient(Message.RecipientType.TO, new InternetAddress(mercy.krishnaxxxdsdveni@gmail.com)); 
```

希望这可以帮助！！

# ruby-on-rails-3 - 在 Rails 3.2 中添加两个不同的资产路径

> ID：14229165
> 
> 赞同：1
> 
> 时间：2013-01-09T06:03:15.377
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

我喜欢在我的 rails 3 应用程序中使用两个不同的资产文件夹。我喜欢从 app/assets/ 以及 public/template/style1 提供服务。

* * *

```
- app
   - assets
     - javascripts
     - stylesheets
       - **styles.css**
     - images
   - controllers
   - models
   - ----
- public
 - template
   - style1
     - js
     - css
       - **theme.css**
     - img 
```

* * *

布局文件

```
<%= stylesheet_link_tag "styles", :media => 'screen' %> 
```

在使用 iframe 的同一页面中，喜欢使用来自 public/template/style1/css/theme.css 的样式

```
<link href="/template/style1/css/theme.css" media="screen" rel="stylesheet" type="text/css" /> 
```

在 production.rb 添加

```
config.assets.precompile += %w(styles.css)
config.assets.paths << "#{Rails.root}/public/template/style1/css"
config.assets.precompile += %w(theme.css) 
```

我运行 rake assets:precompile 并且在浏览器中没有发生任何变化。请帮我解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:03:36.180

我认为您对`theme.css`文件的引用不正确。如果您在`production.rb`添加路径时声明`"#{Rails.root}/public/template/style1/css"`，您应该像这样引用其中的内容：

```
<link href="theme.css" media="screen" rel="stylesheet" type="text/css" /> 
```

您可以考虑遵守有关资产管道的“约定”：将资产放在`assets`目录中。

一个更小的细节：如果您想使资产资源由资产管道管理，您只需在`application.css`文件中声明，如下所示：

```
 *= require theme 
```

# c# - 使用 Automapper 到 ViewModel 的域对象，反之亦然

> ID：14229166
> 
> 赞同：1
> 
> 时间：2013-01-09T06:03:16.950
> 
> 标签：c#, asp.net-mvc-4, automapper

我正在为我的公司开发一个新的 MVC 站点，并且对如何创建从 Domain/POCO 对象到 ViewModel 类的映射 [包含验证] 以及反之亦然感到困惑。这是一个示例。

我的域类 [为了简单起见，我省略了其他属性]：

```
public partial class Glossary
{
    public int Id { get; set; }
    public string GlossaryItem { get; set; }
    public string Definition { get; set; }
} 
```

我的 MVC 应用程序模型文件夹中的 ViewModel 类[具有相应的验证]：

```
public class GlossaryModel
{
    [HiddenInput(DisplayValue = false)]
    public int Id { get; set; }

    [Required(ErrorMessage = "Please enter a GlossaryItem")]
    public string GlossaryItem { get; set; }

    [Required(ErrorMessage = "Please enter a Definition")]
    public string Definition { get; set; }
} 
```

我的 DTO 到域模型的 Automapper 配置：

```
protected override void Configure()
{
     CreateMap<GlossaryModel, Glossary>();
     //....... etc
} 
```

我的控制器用于编辑项目的操作方法：

```
public class GlossaryController : Controller
{
    IGlossaryRepository _glossaryRepository;
    IMappingService _mappingService;

    public GlossaryController(IGlossaryRepository glossaryRepository, IMappingService autoMapperMappingService)
    {
        _glossaryRepository = glossaryRepository;
        _mappingService = autoMapperMappingService;
    }

    // .... etc

    [HttpPost, ValidateAntiForgeryToken]
    public virtual ActionResult Edit(GlossaryModel glossaryModel)
    {
        if (ModelState.IsValid)
        {
            var glossary = _mappingService.Map<GlossaryModel, Glossary>(glossaryModel);
            if (glossaryModel.Id <= 0)
                _glossaryRepository.Add(glossary);
            else
                _glossaryRepository.Edit(glossary);
            _glossaryRepository.Save();
            TempData["message"] = string.Format("{0} has been saved", glossaryModel.Definition);
            return RedirectToAction("All");
        }
        return View(glossaryModel);
    }

    //....etc
 } 
```

它工作正常，但我的问题是......现在说我需要一个列出所有词汇表项目的操作，例如......

```
public ActionResult All()
{
    var allItems = _glossaryRepository.Glossary;
    if (allItems.Count() == 0) return View(new List<GlossaryModel>());
    // **The below line is the reverse mapping one**
    var allItemsModel = _mappingService.Map<IEnumerable<Glossary>, IEnumerable<GlossaryModel>>(allItems);
    return View(allItemsModel);
} 
```

但现在我需要自动映射器从域对象转换为 DTO [从 List(Glossary) 到 List(GlossaryModel)]，与 Edit 方法相反，将数据推送到视图。所以我是否再次需要在自动映射器配置中映射相反的绑定......！喜欢

```
protected override void Configure()
{
     CreateMap<GlossaryModel, Glossary>(); // Added before for DTO to Domain object 
     CreateMap<Glossary, GlossaryModel>();// Added for Domain object to DTO
     //....... etc
} 
```

**双向绑定是个好设计吗？或者我缺少更好的解决方案，请帮助**

谢谢，桑杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:56:53.077

Jimmy Bogard 也问了[同样的问题](http://lostechies.com/jimmybogard/2009/09/18/the-case-for-two-way-mapping-in-automapper/)。但是对它有足够的需求，因此[已经](https://github.com/AutoMapper/AutoMapper/commit/bff6e2aa49af3e7b50f527376da48924efa7d81e)为您列出的简单案例添加了直接支持。事实上，在[这个答案](https://stackoverflow.com/a/8490183/1505426)中， Jimmy 也建议如果它对你有用，它没有任何问题。一个简单的例子是：

```
protected override void Configure()
{
    CreateMap<GlossaryModel, Glossary>()
        .ReverseMap();
    //....... etc
} 
```

请注意，这`ReverseMap`不适用于更复杂的映射。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/13491264/1505426)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:28:03.613

Automapper 是构建到域到 ViewModel（域到 DTO 以您描述的方式）的映射

@Marius 在这里的回答很好地总结了[双向映射有什么问题？](https://stackoverflow.com/questions/8928059/what-is-wrong-with-two-way-mapping)

在一些中型项目中，我使用了两种方式映射，对于大型项目，我使用域到视图模型映射，然后使用[CQRS](http://martinfowler.com/bliki/CQRS.html)系统将 ViewModel 值发送到底层持久性存储。

归根结底，这取决于您如何选择使用 Automapper 以及哪些架构决策对您有意义。

如果您进行 2 路映射，世界将不会停止旋转。

# php - PHP排序数组输出

> ID：14229170
> 
> 赞同：0
> 
> 时间：2013-01-09T06:03:27.170
> 
> 标签：php, sorting, multidimensional-array

更新 2（球员让分指数计算）

```
 $sql3 = "SELECT roundID FROM rounds WHERE userID='$userID'";
    $result3 = mysql_query($sql3) or die(mysql_error());
    $total_rounds = mysql_num_rows($result3);

    //CALCULATE USER HANDICAP INDEX IF TOTAL_ROUNDS > 4
    if($total_rounds > 4){              
        if($total_rounds<7) { $score_count = 1; }
        elseif($total_rounds<9) { $score_count = 2; }
        elseif($total_rounds<11) { $score_count = 3; }
        elseif($total_rounds<13) { $score_count = 4; }
        elseif($total_rounds<15) { $score_count = 5; }
        elseif($total_rounds<17) { $score_count = 6; }
        elseif($total_rounds<18) { $score_count = 7; }
        elseif($total_rounds<19) { $score_count = 8; }
        elseif($total_rounds<20) { $score_count = 9; }
        else { $score_count = 10; }

        $sql2 = "SELECT differential FROM rounds WHERE userID='$userID' ORDER BY date DESC LIMIT 20";
        $result2 = mysql_query($sql2) or die(mysql_error());

        $diff_results = array();
        while($row = mysql_fetch_assoc($result2)){
            $diff_results[] = $row['differential'];
        }

        sort($diff_results);

        $diff_results = array_slice($diff_results, 0, $score_count);

        $handicapIndex = array_sum($diff_results) / $score_count * 0.96;
        $handicapIndex = (floor($handicapIndex * 10)) / 10; 
```

希望这能让您了解我如何计算球员差点指数。现在我想向玩家（用户）展示用于计算他的指数的回合（排序日期）。

永远感激！

**UPDATE（圆桌结构）**

```
 roundID - auto incrementing primary key
    userID - INT
    courseID - INT
    tee - VARCHAR
    differential - FLOAT
    date - DATE 
```

我什至很难开始使用我正在尝试实现的这个功能。任何帮助将非常感激。

我有一组 mysql db 结果我想按字段差异排序。我像这样将它们从数据库中拉出来：

```
 $sql4 = "SELECT * FROM rounds WHERE userID='$userID' ORDER BY date DESC LIMIT 20";
    $result4 = mysql_query($sql4) or die(mysql_error());
    $total_rounds = mysql_num_rows($result4); 
```

正如你在上面看到的，我计算了返回运行 if-elseif-else 语句的行数，以确定我需要用不同的 css 突出显示多少分数：

```
 if($total_rounds<7) { $score_count = 1; }
    elseif($total_rounds<9) { $score_count = 2; }
    elseif($total_rounds<11) { $score_count = 3; }
    elseif($total_rounds<13) { $score_count = 4; }
    elseif($total_rounds<15) { $score_count = 5; }
    elseif($total_rounds<17) { $score_count = 6; }
    elseif($total_rounds<18) { $score_count = 7; }
    elseif($total_rounds<19) { $score_count = 8; }
    elseif($total_rounds<20) { $score_count = 9; }
    else { $score_count = 10; } 
```

例如，如果 $total_rounds = 16 我的 $score_count 将是 6。现在我需要获取这个 16 行的数据集并用 php 将其吐出，所以我保持我的 ORDER BY 日期，同时对图中的 6 应用不同的 css 格式上面的 if-elseif-else 语句。计算 $score_count 是因为我需要在保持日期顺序的同时突出显示（也就是应用不同的 css）到 16 行数据集的 6 个最低分数。

所需的输出看起来像这样（* 表示单独的 css 格式 *）。

01-08-2013 - 16

01-07-2012 - 1 *

01-06-2013 - 15

01-05-2012 - 2 *

01-04-2013 - 14

01-03-2012 - 3 *

01-02-2013 - 13

01-01-2012 - 4 *

12-31-2012 - 12

2012 年 12 月 30 日 - 5 *

12-29-2012 - 11

2012 年 12 月 28 日 - 6 *

12-27-2012 - 10

12-26-2012 - 9

12-25-2012 - 8

12-24-2012 - 7

如果您有任何问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:16:49.787

我将以`$total_rounds = 16`我的`$score_count would be 6`.

```
$total_rounds = 16;
$score_count = 6 // comes from the if-else loop you already have

// now we loop over the result
// the css is applied to every odd result, until $score_count is not 0

$counter = 0;
while( ( $data = mysql_fetch_assoc( $result4 ) ) !== false ) {
    if( ( $counter % 2 ) && $score_count ) {
        echo $data['date']; // apply your css here
    } else {
        echo $data['date'];
    }
    $counter++;
    $score_count--;

} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:42:27.923

您必须遵循几个步骤。

1) 用 score(differential) 对结果进行排序，得到得分最低的 6 条记录的 id。

```
$sql4 = "SELECT * FROM rounds WHERE userID='$userID' ORDER BY differential LIMIT 20";
$result4 = mysql_query($sql4) or die(mysql_error());
$total_rounds = mysql_num_rows($result4);

if($total_rounds<7) { $score_count = 1; }
elseif($total_rounds<9) { $score_count = 2; }
elseif($total_rounds<11) { $score_count = 3; }
elseif($total_rounds<13) { $score_count = 4; }
elseif($total_rounds<15) { $score_count = 5; }
elseif($total_rounds<17) { $score_count = 6; }
elseif($total_rounds<18) { $score_count = 7; }
elseif($total_rounds<19) { $score_count = 8; }
elseif($total_rounds<20) { $score_count = 9; }
else { $score_count = 10; }

$idsArray = array();
for($i=0; $i<$score_count; $i++){
    $dets = mysql_fetch_array($result4);
    $idsArray[] = $dets['roundID'];
} 
```

2）循环记录并匹配您在第一步中创建的数组中的id。如果 id 匹配，则应用 CSS，否则不应用。

```
$sql4 = "SELECT * FROM rounds WHERE userID='$userID' ORDER BY date DESC LIMIT 20";
$result4 = mysql_query($sql4) or die(mysql_error());

while($dets = mysql_fetch_array($result4)){
    if(in_array($dets['roundID'], $idsArray)){
        //apply CSS
        //display details here
    }
    else{
        //display details here
    }
} 
```

注意：您现在应该停止使用 mysql_*。专家强烈建议使用 mysqli_* 代替

# php - 如何在登录 wordpress 的用户上显示有关 wp_users 和 wp_usermeta 的所有信息

> ID：14229182
> 
> 赞同：0
> 
> 时间：2013-01-09T06:04:29.717
> 
> 标签：php, wordpress

登录时如何显示用户的所有信息，

喜欢

名：姓：电子邮箱

自定义字段-地址-电话

我在这里得到了一行代码，但我不知道如何处理它

```
$all_meta_for_user = get_user_meta( userid ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:12:04.217

可以使用的函数是[get_currentuserinfo](http://codex.wordpress.org/Function_Reference/get_currentuserinfo)来获取当前登录的用户详细信息。

用于自定义用户字段的函数是[get_user_meta](http://codex.wordpress.org/Function_Reference/get_user_meta)

```
<?php global $current_user;
      get_currentuserinfo();

      echo 'Username: ' . $current_user->user_login . "\n";
      echo 'User email: ' . $current_user->user_email . "\n";
      echo 'User first name: ' . $current_user->user_firstname . "\n";
      echo 'User last name: ' . $current_user->user_lastname . "\n";
      echo 'User display name: ' . $current_user->display_name . "\n";
      echo 'User ID: ' . $current_user->ID . "\n";
?> 
```

登录用户 id 后，您可以使用 get_user_meta 获取详细信息。

```
<?php
  $all_meta_for_user = get_user_meta($current_user->ID );
  print_r( $all_meta_for_user );
?> 
```

希望这可以帮助。

# c# - 使用流利的 Nhibernate 将列映射到它们之间没有外键约束的表

> ID：14229185
> 
> 赞同：1
> 
> 时间：2013-01-09T06:05:26.143
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有两张这样的桌子

```
CREATE TABLE [dbo].[TariffConfig]
(
     PKey INT IDENTITY NOT NULL,
     TariffDeterminatorCd INT NOT NULL
)

CREATE TABLE [dbo].[TariffDeterminator]
(
     PKey INT IDENTITY NOT NULL,
     Tariff INT NOT NULL
) 
```

TariffDeterminatorCd 引用了来自 TariffDeterminator 的一行（它等于 TariffDeterminator 中的 PKey），但它们之间没有外键约束。

他们的实体类是这样的

```
public class TariffDeterminator : EntityBase
{       
    public virtual Int32 Age { get; set; }

    public virtual Int32 Tariff { get; set; }
}

public class TariffConfig : EntityBase
{
    public virtual TariffDeterminator Determinator{ get; set; }
} 
```

我有一个像这样的 TariffDeterminator

```
public class TariffDeterminatorMap : EntityBaseMap<TariffDeterminator>
{       
    public TariffDeterminatorMap ()
        : base()
    {
        this.Initialize("TariffDeterminator");
        Map(x => x.Age).Not.Nullable();
        Map(x => x.Tariff).Not.Nullable();
    }
} 
```

谁能帮我为 TariffConfig 实体编写 Fluent Nhibernate 映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:03:23.560

我从未使用过 FluentNHibernate，但它应该看起来像这样

```
public class TariffConfigMap : EntityBaseMap<TariffConfig>
{

    public TariffConfigMap() : base()
    {
       this.Initialize("TariffConfig");
       References(prop => prop.Determinator)
            .ColumnName("TariffDeterminatorCd");           
    }

} 
```

我看不到实体类中映射的主键，我假设这些属性是在 Initialize() 期间继承和映射的。

您通常不需要外键约束来映射实体之间的关系，您只需要外键本身。

# python - pkcs11engine 在引擎清理（）后不注销

> ID：14229187
> 
> 赞同：0
> 
> 时间：2013-01-09T06:05:33.447
> 
> 标签：python, logout, m2crypto, pkcs#11

我想做以下事情：

1.  在安全令牌上生成密钥对（我使用阿拉丁令牌）（PyKCS11）
2.  生成 PKCS#10 请求（我使用 M2Crypto + engine_pkcs11）并将其发送到 CA。
3.  从 CA 接收签名的 X.509 证书并将其写入安全令牌。

请求生成是这样完成的：

```
 def generate_request(
        self, uid, cn=None, user_pin=None, keyid=TOKEN_TEMP_KEY_ID):
    """Generate PKCS#10 certificate request
    @param keyid: ID of key to use for certificate request generation
    @type keyid: str
    @param uid: UID to put in request subject distinguished name
    @type uid: str
    @param cn: Common name (if any) of subject to use for certificate
    request generation
    @type cn: str
    @param user_pin: user PIN code. User privileges are required for
    signing of certificate request
    @type user_pin: str
    @return PKCS10 request in PEM format signed by token's private key
    """
    Engine.load_dynamic()
    e = Engine.Engine('dynamic')
    e.ctrl_cmd_string('SO_PATH', PKCS11_ENGINE_PATH)
    e.ctrl_cmd_string('LIST_ADD', '1')
    e.ctrl_cmd_string('LOAD', None)
    e.ctrl_cmd_string('MODULE_PATH', PKCS11_LIBRARY_PATH)
    a = Engine.Engine('pkcs11')
    a.init()
    # Hex-encoded key id should be provided to that function
    k = a.load_private_key(hexlify(keyid), pin=user_pin)
    req = X509.Request()
    subject_name = PKCS10_DN_PREFIX + (('UID', MBSTRING_ASC, uid, -1, -1, 0),)
    if cn:
        subject_name = subject_name + (('CN', MBSTRING_ASC, cn, -1, -1, -1),)
    name = X509.X509_Name()
    for entry in subject_name:
        name.add_entry_by_txt(*entry)
    req.set_subject(name)
    req.set_pubkey(k)
    req.sign(k, 'sha1')
    reqpem = req.as_pem()
    Engine.cleanup()
    return reqpem 
```

以下是将证书写入安全令牌的代码：

```
def write_certificate(self, cert_pem, so_pin):
    """Write certificate to token
    @param cert_pem: certificate in pem format
    @type cert_pem: str
    @param so_pin: PIN code of security officer
    @type so_pin: str
    """
    cert = X509.load_cert_string(cert_pem)
    if cert.check_ca(): # What label to use?
        label = TOKEN_CA_CERT_LABEL
    else:
        label = TOKEN_USER_CERT_LABEL
    tCert = (
        (PyKCS11.LowLevel.CKA_CLASS, PyKCS11.LowLevel.CKO_CERTIFICATE),
        (PyKCS11.LowLevel.CKA_CERTIFICATE_TYPE, PyKCS11.LowLevel.CKC_X_509),
        (PyKCS11.LowLevel.CKA_TOKEN, True),
        (PyKCS11.LowLevel.CKA_PRIVATE, False),
        (PyKCS11.LowLevel.CKA_LABEL, label),
        (PyKCS11.LowLevel.CKA_ID, make_key_id(cert.get_pubkey())),
        (PyKCS11.LowLevel.CKA_SUBJECT, cert.get_subject().as_der()),
        (PyKCS11.LowLevel.CKA_ISSUER, cert.get_issuer().as_der()),
        (PyKCS11.LowLevel.CKA_SERIAL_NUMBER, cert.get_serial_number()),
        (PyKCS11.LowLevel.CKA_VALUE, cert.as_der()))
    s = self.lib.openSession(self.slot, PyKCS11.CKF_RW_SESSION)
    s.login(so_pin, PyKCS11.LowLevel.CKU_SO)
    s.createObject(tCert)
    s.logout()
    s.closeSession() 
```

问题是在请求生成后我得到 CKR_USER_ANOTHER_ALREADY_LOGGED_IN 错误。我查看了 engine_pkcs11 源代码，在 engine_pkcs11.c（https://github.com/OpenSC/engine_pkcs11/blob/master/src/engine_pkcs11.c）文件中有一个名为`static EVP_PKEY *pkcs11_load_key`. 它很长，所以这里是它的一部分：

```
 /* Now login in with the (possibly NULL) pin */
    if (PKCS11_login(slot, 0, pin)) {
        /* Login failed, so free the PIN if present */
        if (pin != NULL) {
            OPENSSL_cleanse(pin, pin_length);
            free(pin);
            pin = NULL;
            pin_length = 0;
        }
        fail("Login failed\n");
    } 
```

因此，据我所知，使用密钥时会执行登录（PKCS#10 请求生成需要密钥）。如果执行登录，那么我相信也应该执行相应的注销，但我找不到。这是 ENGINE_finish() 函数的来源：

```
int pkcs11_finish(ENGINE * engine)
{
    if (ctx) {
    PKCS11_CTX_unload(ctx);
    PKCS11_CTX_free(ctx);
    ctx = NULL;
}
if (pin != NULL) {
    OPENSSL_cleanse(pin, pin_length);
    free(pin);
    pin = NULL;
    pin_length = 0;
}
return 1;
} 
```

是否有可能以某种方式（可能隐含地）在步骤 2 中从安全令牌中注销）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:06:09.000

最后我可以这样做：

在加载引擎之前，我打开新会话并登录到它完成工作后，我关闭会话（使用 closeSession() 是不够的）

所以请求生成是这样完成的。

```
 s = self.lib.openSession(self.slot, PyKCS11.CKF_RW_SESSION)
    s.login(user_pin)
    Engine.load_dynamic() 
```

...我在引擎清理后添加

```
 a.finish()
    Engine.cleanup()        
    s.logout()
    s.closeAllSessions() 
```

我还必须对 PyKCS11 源代码中的 Session 类进行一些修补，因为有一个错字（closeAllSession 而不是 closeAllSessions）：

```
def closeAllSessions(self):
    """
    C_CloseAllSessions
    """
    rv = self.lib.C_CloseAllSessions(self.slot)
    if rv != CKR_OK:
        raise PyKCS11Error(rv) 
```

希望这会有所帮助

# oracle - ORA-01001 无效游标错误

> ID：14229188
> 
> 赞同：0
> 
> 时间：2013-01-09T06:05:49.667
> 
> 标签：oracle, cursor

我在 Oracle 中编写了两个使用多个游标的数​​据库过程。面临的问题是，虽然程序在 98% 的情况下执行时没有任何错误，但在少数情况下，会抛出错误 - ORA-01001 无效游标。

由于问题发生在运行时，因此很难确定原因。我无法复制过程引发错误的场景。

据我了解，由于 98% 的案例都执行了这两个过程而没有任何问题，我认为原因不是由于无效的 Open-Fetch-Close 命令。

知道引发异常的可能原因是什么？

我正在添加一个示例代码：

```
CURSOR curWork(vCaseId VARCHAR2) IS
    SELECT w.X_WORKFUNCTION_ID
        FROM table_case c, table_queue w
        WHERE c.id_number = vCaseId
         AND c.CASE_CURRQ2QUEUE = w.objid;

CURSOR curPart(vCaseId VARCHAR2) IS
   SELECT p.x_part_number, p.X_FAULT_CATEGORY, p.X_FORW_GRP_ID
        FROM table_case c,  table_mod_level m, table_x_part_forw_grp p, table_part_num n
        WHERE c.id_number =vCaseId
         AND c.CASE_PRT2PART_INFO =m.objid
         And m.part_info2part_num=N.OBJID 
        AND N.S_PART_NUMBER=P.X_PART_NUMBER;

PROCEDURE UpdateAddressXY(vCaseId IN VARCHAR2, nStatus IN OUT NUMBER, vComment OUT VARCHAR2) IS
  bContinue boolean;
  nJobCode VARCHAR2(4);
  cnt number;

CURSOR curAddress(vCaseId VARCHAR2) IS
   select a.X_COORDINATE_X , a.X_COORDINATE_Y, A.X_XY_ORIGIN
   from table_address a, table_case c
   where C.ID_NUMBER =vCaseId
   and  a.objid =c.CASE2ADDRESS;       
rAdd curAddress%ROWTYPE;

--Get Dok Details
  CURSOR curDok(vCaseId VARCHAR2) IS
     select dk.x_dok_card_type, dk.x_line_src  from table_x_kat_dok  dk, table_case c
     where c.objid=DK.X_KAT_DOK2CASE
     and c.id_number=vCaseId;  

rDok curDok%ROWTYPE;

--Get Jobcode Details
  CURSOR curJCode(vWorkFunction Number, nForwGrpId Number) IS
       select x_code, x_code2, x_code3 
       from table_x_queue_jobcode 
       where X_WORKFUNCTION_ID=vWorkFunction
        and X_FORW_GRP_ID=nForwGrpId;

rJCode curJCode%ROWTYPE;

rPart curPart%ROWTYPE;
rWork curWork%ROWTYPE;
BEGIN

  bContinue := true;
  -- get Part details
  OPEN curPart(vCaseId);
  FETCH curPart INTO rPart;
  IF curPart%NOTFOUND THEN
    CLOSE curPart;
      bContinue := FALSE;
      nStatus := CONST.cError;
      vComment := 'Part Details Not Found | UpdateAddressXY';
  END IF;
  CLOSE curPart;

  -- get Work details
  OPEN curWork(vCaseId);
  FETCH curWork INTO rWork;
  IF curWork%NOTFOUND THEN
    CLOSE curWork;
     bContinue := FALSE;
     nStatus := CONST.cError;
     vComment := 'Work Details Not Found | UpdateAddressXY';
  END IF;
  CLOSE curWork;
  -- get Addess details
  OPEN curAddress(vCaseId);
  FETCH curAddress INTO rAdd;
  IF curAddress%NOTFOUND THEN
   CLOSE curAddress;
     bContinue := FALSE;
     nStatus := CONST.cError;
     vComment := 'Address Details Not Found | UpdateAddressXY';
   END IF;
   CLOSE curAddress;

--get Dok details  
   OPEN curDok(vCaseId);
FETCH curDok INTO rDok;
IF curDok%NOTFOUND THEN
    CLOSE curDok;
    bContinue := FALSE;
    nStatus := CONST.cError;
    vComment := 'Dok Details Not Found | UpdateAddressXY';
END IF;
CLOSE curDok;

--get Jobcode details  
 OPEN curJCode(rWork.X_WORKFUNCTION_ID,rPart.X_FORW_GRP_ID);
FETCH curJCode INTO rJCode;
IF curJCode%NOTFOUND THEN
    CLOSE curJCode;
     bContinue := FALSE;
     nStatus := CONST.cError;
     vComment := 'Jobcode Details Not Found | UpdateAddressXY';
END IF;
CLOSE curJCode;

if   bContinue then

 --job code

if ( Not (rDok.x_line_src is null OR rJCode.x_code3 is null OR upper(rDok.x_line_src)='DOK') ) then
    nJobCode:= rJCode.x_code3;
elsif (rDok.x_dok_card_type is not null and  rJCode.x_code2 is not null and ( substr(rDok.x_dok_card_type,1,1)='v' OR substr(rDok.x_dok_card_type,1,1)='V')) then
    nJobCode:= rJCode.x_code2;
 else
    nJobCode:= rJCode.x_code;
End if;

select count(CASE_ID) into cnt  from table_x_cu_address_jobcode where CASE_ID=vCaseId;
 if cnt=0 then
 Insert into table_x_cu_address_jobcode(CASE_ID, X_JOB_CODE,  X_COORDINATE_X,  X_COORDINATE_Y,  X_XY_ORIGIN)
 values(vCaseId,nJobCode,rAdd.X_COORDINATE_X,rAdd.X_COORDINATE_Y,rAdd.X_XY_ORIGIN);
 else
 Update table_x_cu_address_jobcode 
 set X_JOB_CODE=nJobCode,
 X_COORDINATE_X=rAdd.X_COORDINATE_X,
 X_COORDINATE_Y = rAdd.X_COORDINATE_Y,
 X_XY_ORIGIN=rAdd.X_XY_ORIGIN
 where CASE_ID=vCaseId;
 end if;
END if;

EXCEPTION
WHEN OTHERS THEN
    IF vErrorMsg IS NULL THEN
        vErrorMsg := TO_CHAR(SQLCODE) || ' - ' || SQLERRM || cCRLF || ' | UpdateAddressXY';
    ELSE
        vErrorMsg := vErrorMsg || ' | UpdateAddressXY';
    END IF;
    nStatus := CONST.cError;
    vComment := vErrorMsg;

    insert into xxx(dat,seq,msg)
    values(SYSDATE,71180,vComment ||'@' || DBMS_UTILITY.FORMAT_ERROR_STACK);

End; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:26:10.853

您试图关闭同一个光标两次。
看：

```
IF curPart%NOTFOUND THEN
    CLOSE curPart;
      bContinue := FALSE;
      nStatus := CONST.cError;
      vComment := 'Part Details Not Found | UpdateAddressXY';
  END IF;
  CLOSE curPart; 
```

如果`curPart%NOTFOUND`然后您关闭 curPart 并且之后（在 之后`end if`）您尝试再次关闭它。

如果你想停下来以防万一`curPart%NOTFOUND`然后使用 if-else 结构或[raise_application_error](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/errors.htm#i1871)，如果不是，那么只需从块中删除`CLOSE curPart;`命令`IF curPart%NOTFOUND ... END IF;`

# javascript - javascript数组元素返回值

> ID：14229189
> 
> 赞同：-3
> 
> 时间：2013-01-09T06:05:50.450
> 
> 标签：javascript, arrays

我有这个数组：

```
[ 'lol',  { hola: 'xQaUqX19UmahiMd_3IN_', lol: 'PE-n5EmMl7jYYQrI3IOA' } ] 
```

我试图动态地获得值“xQaUqX19UmahiMd_3IN_”和“PE-n5EmMl7jYYQrI3IOA”，但我做不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:08:18.823

假设您的数组存储在名为`myArray`then do`myArray[1].hola`或`myArray[1]['hola']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:17:14.090

正如我所看到的，您有一个数组，并且有了该数组，您就有了一个对象。有两个数组元素。您可以使用 0 和 1 访问，如下所示

```
var arr = [ 'lol',  { hola: 'xQaUqX19UmahiMd_3IN_', lol: 'PE-n5EmMl7jYYQrI3IOA' } ];
console.log(arr[0]); //prints  lol
console.log(arr[1]); 
// prints { hola: 'xQaUqX19UmahiMd_3IN_', lol: 'PE-n5EmMl7jYYQrI3IOA' } which is a object. 
```

对象可以用点来访问，我想你知道的。现在访问如下。

```
console.log(arr[1].hola) // prints  xQaUqX19UmahiMd_3IN_
console.log(arr[1].lol)  // prints PE-n5EmMl7jYYQrI3IOA 
```

# c# - 在不同浏览器之间共享会话

> ID：14229193
> 
> 赞同：1
> 
> 时间：2013-01-09T06:06:24.150
> 
> 标签：c#, asp.net

我在 asp.net 和 C# 中工作。

我有一个应用程序，用户登录以进入应用程序，如果用户在浏览器中打开应用程序并登录，如果用户在**同一系统**中的其他浏览器中打开应用程序，他们也应该登录。同样应该发生在**同一浏览器的不同选项卡中，也**应该发生在用户先前登录的同一浏览器的不同实例中。请给我您的建议.....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T06:07:57.890

您**不能在多个浏览器之间共享会话**。

但是同一浏览器实例的**多个选项卡之间的会话**已经**共享**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T06:19:00.373

答案是，如上所述，您不能在 2 个不同的浏览器之间共享会话，因为每个浏览器都必须启动一个新会话。

如果您想要一种方法允许用户登录一次并即使他打开不同的浏览器也保持登录状态，那么您将不得不依赖他的 IP 地址，因为这是登录 Chrome 2 秒的用户的唯一指标以前，**可能是**现在从 Firefox 登录的同一用户。这只是给你一个例子，但这**显然是有缺陷**的，因为同一网关后面的不同用户都将拥有相同的 IP。

只有当您开发的应用程序位于 Intranet 中并且您确定每个用户都将拥有一个唯一的内部 IP 地址时，您想要做的事情才会起作用，但是可以通过更有效的方式来实现验证用户的全部目的，例如集成Windows 身份验证等

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-19T08:17:53.803

您可以在两个浏览器之间共享会话，几年前我们已经实施了这样的项目。

使用的技术是编写一个自定义浏览器，而不是将 cookie 存储在本地计算机中，而是将其存储在公共服务器中，这样当一个人登录 cookie 时，与会话相关的其他本地数据将与服务器共享，从而与所有浏览器实例，浏览器实例 cookie 被修改以匹配服务器详细信息，因此它的行为就像会话是共享的。一些网站在使用不同的 IP 时存在问题，这可以通过使用通用代理服务器来解决。

但是如果您不能使用自定义浏览器，那么这将很困难，但仍然可以尝试使用遵循上述方法的插件希望这会有所帮助

# php - 在按钮单击时设置分页

> ID：14229199
> 
> 赞同：0
> 
> 时间：2013-01-09T06:06:57.163
> 
> 标签：php, html, mysql, ajax

我需要一些关于分页的帮助，问题是我想在第一次点击按钮时显示我的数据库记录，但每次点击分页链接时都需要点击按钮这是我的代码我知道我犯了一些错误请检查并通过纠正我的错误来帮我一个忙..

```
if (isset($_POST["search"])){        
$result=mysql_query("select count(*) from reg_phone");
$row=mysql_fetch_row($result);
$tr=$row[0];
$rpp=4;
$pn=1;
if(isset($_GET['pn']))
{
$pn=$_GET['pn'];
}
$tp=($tr/$rpp);
if($tr/$rpp>=0)
{
    $tp++;
}
$from=(($pn-1)*$rpp)+1;
$to=($pn)*($rpp);       
$show = "SELECT * FROM reg_phone where Id between $from and $to";
$rs = mysql_query($show) or die(mysql_error());
#****results in Grid****
echo "<table width='100%' border='1' cellpadding='2' border-color='#000' id='tbl'>";
echo "<tr>";
echo "<td style='background: white;'><b>IMEI #</td>";
echo "<td style='background: white;'><b>Phone #</td>";
echo "<td style='background: white;'><b>From Date</td>";
echo "<td style='background: white;'><b>Status</td>";
echo "</tr>";
$rowID = 1;
while ($row = mysql_fetch_array($rs)) {
echo "<tr>";
echo "<td id='imeinum" . $rowID . "'>$row[imei]</td>";
echo "<td id='phnum" . $rowID . "'>$row[phonenum]</td>";
echo "<td id='datepicker" . $rowID . "'>$row[fdate]</td>";
echo "<td id='rad" . $rowID . "'>$row[status]</td>";
echo "</tr>";
            $rowID++;
        }
        echo "</table>";
        echo "<ul id='pages'>";
        for($i=1;$i<=$tp;$i++)
        {
        echo "<li><a href='phonereg.php?pn=$i'>$i</a></li>";
        }
        echo "</ul>";
        #**********************
        mysql_free_result($rs);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:59:58.047

[http://www.hscripts.com/scripts/jquery/pagination.php](http://www.hscripts.com/scripts/jquery/pagination.php)

这里的脚本对我很有帮助。正是我想做的。希望将来的任何人都需要这个。谢谢大家的建议。问候。贝凯

# android - ListFragments 使程序崩溃

> ID：14229202
> 
> 赞同：0
> 
> 时间：2013-01-09T06:07:16.340
> 
> 标签：android, android-listfragment

我试图在片段中实现 lisadapter，但 Java 不允许扩展两个超类。因此我无法将 Fragment 和 ListActivity 扩展到同一个类。然后我改变了我的应用程序。我用 ListFragment 替换了所有片段。但是当我运行我的应用程序时，它崩溃了。早些时候它运行良好。你能帮帮我吗？请在 logcat 条目下方找到

我在下面粘贴了 protab1.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

     <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

         <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >
             >

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

日志猫：

```
E/AndroidRuntime(959): FATAL EXCEPTION: main
E/AndroidRuntime(959): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.pro1/com.example.pro1.Secactivity}: java.lang.RuntimeException: Content has view with id attribute 'android.R.id.list' that is not a ListView class
E/AndroidRuntime(959):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
E/AndroidRuntime(959):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
E/AndroidRuntime(959):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
E/AndroidRuntime(959):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
E/AndroidRuntime(959):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(959):  at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(959):  at android.app.ActivityThread.main(ActivityThread.java:5039)
E/AndroidRuntime(959):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(959):  at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(959):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(959):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(959):  at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(959): Caused by: java.lang.RuntimeException: Content has view with id attribute 'android.R.id.list' that is not a ListView class
E/AndroidRuntime(959):  at android.app.ListFragment.ensureList(ListFragment.java:402)
E/AndroidRuntime(959):  at android.app.ListFragment.onViewCreated(ListFragment.java:203)
E/AndroidRuntime(959):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:899)
E/AndroidRuntime(959):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
E/AndroidRuntime(959):  at android.app.BackStackRecord.run(BackStackRecord.java:682)
E/AndroidRuntime(959):  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
E/AndroidRuntime(959):  at android.app.Activity.performStart(Activity.java:5113)
E/AndroidRuntime(959):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2153)
E/AndroidRuntime(959):  ... 11 more 
```

Activity 类持有 ListFragments protab1 和 protab2

```
import android.annotation.TargetApi;
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.app.ListFragment;
import android.content.Context;
import android.os.Build;
import android.os.Bundle;
import android.widget.Toast;

public class Secactivity extends Activity {
    public static Context mycontext ;

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.promain);
        mycontext = getApplicationContext();

        //ActionBar
            ActionBar actionbar = getActionBar();
            actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

            ActionBar.Tab PlayerTab = actionbar.newTab().setText("Fragment A");
            ActionBar.Tab StationsTab = actionbar.newTab().setText("Fragment B");

            ListFragment PlayerFragment = new Protab1();
            ListFragment StationsFragment = new Protab2();

            PlayerTab.setTabListener(new MyTabsListener(PlayerFragment));
            StationsTab.setTabListener(new MyTabsListener(StationsFragment));

            actionbar.addTab(PlayerTab);
            actionbar.addTab(StationsTab);
        }

}

class MyTabsListener implements ActionBar.TabListener {
    public ListFragment fragment;

    public MyTabsListener(ListFragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(Secactivity.mycontext, "Reselected!", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }

} 
```

protab1 列表片段

```
package com.example.pro1;
import android.annotation.TargetApi;
import android.app.Fragment;
import android.app.ListFragment;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Protab1 extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.protab1, container, false);
    }

} 
```

protab2 列表片段

```
package com.example.pro1;

import android.annotation.TargetApi;
import android.app.Fragment;
import android.app.ListFragment;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Protab2 extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.protab2, container, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:23:05.010

更改此行并让我知道它是否不起作用：（从 Activity 到 FragmentActivity）

```
public class Secactivity extends FragmentActivity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T22:45:17.317

将此包含添加到您的列表布局中：

```
<include layout="@android:layout/list_content" />
<ListView 
    android:id="@+id/list" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white" /> 
```

这对我有用....

android 网站上的文档：http: [//developer.android.com/reference/android/app/ListFragment.html](http://developer.android.com/reference/android/app/ListFragment.html)

> public View onCreateView (LayoutInflater inflater, ViewGroup 容器, Bundle savedInstanceState)
> 
> 在 API 级别 11 中添加 提供默认实现以返回简单的列表视图。子类可以覆盖以替换为自己的布局。如果这样做，**返回的视图层次结构必须有一个 ID 为 android.R.id.list 的 ListView，**并且可以选择在列表为空时显示一个兄弟视图 id android.R.id.empty。
> 
> ***如果您使用自己的自定义内容覆盖此方法，请考虑在您的 layout*** 文件中包含标准布局 list_content，以便继续保留 ListFragment 的所有标准行为。特别是，这是目前显示内置不确定进度状态的唯一方法。

# winforms - 在c#中按名称搜索文件夹而不指定路径

> ID：14229203
> 
> 赞同：0
> 
> 时间：2013-01-09T06:07:18.650
> 
> 标签：winforms, c#-4.0

我想按名称搜索文件夹。但我不知道文件夹的位置。

必须获取该特定文件夹的路径。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:13:45.323

[您必须指定目录以使用Directory.GetDirectories Method (String, String, SearchOption)](http://msdn.microsoft.com/en-us/library/ms143314.aspx)搜索文件夹

```
string[] directories = Directory.GetDirectories(@"c:\",
                                                 "*", 
                                                 SearchOption.AllDirectories); 
```

要从计算机上获取所有驱动器，请使用[DircotoryInfo.GetDrives](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.getdrives.aspx)然后搜索所有驱动器，您可以尝试：

```
DriveInfo[] allDrives = DriveInfo.GetDrives();
List<string> directoryList = new List<string>();
foreach (DriveInfo d in allDrives)
{
    directoryList.AddRange(Directory.GetDirectories(d.Name , "*", SearchOption.AllDirectories));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:19:07.050

**// 只获取以字母“p”开头的子目录。**

```
string[] dirs = Directory.GetDirectories(@"c:\", "p*");
Console.WriteLine("The number of directories starting with p is {0}.",dirs.Length);
foreach (string dir in dirs) 
{
  Console.WriteLine(dir);
} 
```

[参考 - Directory.GetDirectories 方法（字符串，字符串）](http://msdn.microsoft.com/en-us/library/6ff71z1w.aspx)

如果您不知道驱动器，则需要通过更改系统上可用的驱动器来搜索所有驱动器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T09:40:08.577

唯一的解决方案是使用递归搜索来浏览所有可用文件夹和子文件夹，并跳转访问被拒绝的路径以获得完整的目标结果列表。

# c - 如何避免“C”中的 TCP 聚合？

> ID：14229206
> 
> 赞同：3
> 
> 时间：2013-01-09T06:07:35.967
> 
> 标签：c, tcp

我正在通过网络发送许多大小为 50 字节的 TCP 数据包。后来我发现 TCP 将几个 50 字节的数据包聚合成一个 TCP 数据包。我的问题是，有没有办法避免“C”程序中的 TCP 聚合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T06:16:17.723

使用称为[Nagle 算法的](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)算法处理将多个发送的数据包打包成单个 TCP 数据包。要禁用它，请[在您的套接字上](http://www.unixguide.net/network/socketfaq/2.16.shtml)[设置`TCP_NODELAY`](http://www.unixguide.net/network/socketfaq/2.16.shtml)选项：

```
int flag = 1;
setsockopt(fd, IPPROTO_TCP, TCP_NODELAY, &flag, sizeof(flag)); 
```

请注意，这会降低您的网络效率，除非您确实需要立即发送每个数据包，否则应避免这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T06:37:55.203

TCP 从根本上不提供应用层的基于数据包的服务。使用 TCP 的应用程序不仅需要纯流，还必须提供自己的帧机制。

虽然该`TCP_NODELAY`选项通常会导致每个应用程序级别的写入都在单独的帧中进行（除非它大于 MTU），但不能保证。特别是，如果接收窗口已减小到零（在发送批量数据的连接上很常见），那么当接收窗口再次打开时，仍然可以合并多个写入。

此外，即使发送 TCP 没有合并您的写入，也*无法*阻止接收方在从套接字读取的一个应用程序级读取中呈现来自多个 TCP 帧的数据 - 当您的接收应用程序未连接时尤其会发生这种情况计划了一段时间，或者当连接上发生数据包丢失时。

如果您的应用程序假设发送端的每个应用程序级别的写入都将与接收端的应用程序级别的读取完全配对，那么您将自己设置为罕见且难以重现的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T01:59:28.140

根据定义，TCP 不提供任何打包服务。TCP 是一种面向字节流的协议。您能做的最好的事情就是将您自己的框架标记插入到您的数据中。然后，如果您的接收器至少可以检测到坏帧（可能是聚合数据）并丢弃此类数据，那么您就可以到达您想要的位置。

尽可能快地发送方法（ala NODELAY）不能保证有效，因为您的接收器仍然可以聚合数据。如果任何 tcp 数据由于某种原因被延迟，则更有可能发生这种情况

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:15:33.970

一种方法是在发送调用中使用 TCP_NODELAY 标志。但是，这取决于 TCP 堆栈是否支持。

# sdk - 带有 NFC 的 ANDROID 模拟器 Broadcom 中间件堆栈

> ID：14229207
> 
> 赞同：1
> 
> 时间：2013-01-09T06:07:39.970
> 
> 标签：sdk, stack, emulation, nfc, broadcom

我想将 NFC 固件连接到使用新到的 Broadcom Stack 运行的 Android 模拟器。

但是我在下载到 Eclipse 上的 SDK 版本 4.2 (API 17) 提供的默认模拟器中找不到任何与 NFC 相关的设置或模块。

有人可以帮助我或提供有关**NFC Broadcom 堆栈的此功能是否可在任何模拟器中使用的**详细信息吗？

# java - 连接到 SQLServer 时出现 JDBC 错误

> ID：14229209
> 
> 赞同：1
> 
> 时间：2013-01-09T06:07:40.023
> 
> 标签：java, jdbc

在我的程序中使用 JDBC 连接我得到以下异常。我正在使用 jdk1.6.0_25。

**例外：**

```
com.microsoft.sqlserver.jdbc.TDSChannel enableSSL WARNING: TDSChannel ( ConnectionID:1 TransactionID:0x0000000000000000) SSL handshake failed: RSA premaster secret error com.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: RSA premaster secret error.
at com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(Unknown    Source) 
at com.microsoft.sqlserver.jdbc.TDSChannel.throwSSLConnectionFailed(Unknown    Source) 
at com.microsoft.sqlserver.jdbc.TDSChannel.enableSSL(Unknown    Source) 
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(Unknown    Source) 
at com.microsoft.sqlserver.jdbc.SQLServerConnection.loginWithoutFailover(Unknown    Source) 
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(Unknown    Source) 
at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(Unknown Source)    
at java.sql.DriverManager.getConnection(Unknown Source) 
at java.sql.DriverManager.getConnection(Unknown Source) 
at com.exterro.db.Dummy.main(Dummy.java:22) 
The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: RSA premaster secret error. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-27T07:47:58.607

我在 java 8、SQL server 2008、sqlserver driver 4.2 上遇到了同样的问题
在有其他关于将 java 7 与该 sqldriver 一起使用的主要/次要异常的投诉之后
似乎问题是因为（正如有人所说）sql server 数据库在网络与我运行代码的网络不同。第一个网络是 172.xxx，第二个[是](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/a36ea16c-cc78-4054-bd02-dd637b1e9a81/warning-tdschannel-when-attempting-to-connect?forum=sqldataaccess)
15.xxx
[.msdn.microsoft.com/Forums/sqlserver/en-US/a36ea16c-cc78-4054-bd02-dd637b1e9a81/warning-tdschannel-when-attempting-to-connect?forum=sqldataaccess](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/a36ea16c-cc78-4054-bd02-dd637b1e9a81/warning-tdschannel-when-attempting-to-connect?forum=sqldataaccess)

# wcf - svcutil 没有下载完整的元数据

> ID：14229214
> 
> 赞同：0
> 
> 时间：2013-01-09T06:07:59.997
> 
> 标签：wcf, metadata, svcutil.exe

当我尝试使用 svcutil (svcutil.exe /t:metadata http:// `localhost`/ABCService/Service.svc ) 生成元数据时，我没有得到完整/所有元数据 (input-output data contract) 。但是，当我在 Visual Studio 中执行“添加服务引用”时，我可以看到所有元数据（输入输出数据协定）。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:25:15.880

不知道是什么问题，重启系统后自动解决了

# qt - 将带有参数的信号从 qml 传递到 c++

> ID：14229217
> 
> 赞同：4
> 
> 时间：2013-01-09T06:08:03.773
> 
> 标签：qt, qml

我不知道如何将参数从 QML 文件传递​​到 Qt 中的 c++ 文件。

QML 代码：

```
import QtQuick 1.1

Rectangle{
    id:loin
    height: 272
    width:480
    property alias loguid:loginuid
    signal sigHome()
    Rectangle{
        id:rect1
        width:parent.width-80
        height:24
        TextInput {
            id:loginuid
            maximumLength: 16
            width: maximumLength * 20
            focus: false
            validator: RegExpValidator { regExp: /\d+/ }
            KeyNavigation.down: login1
        }
    }
    Button{
        id: login1
        x: 195
        y: 187
        height:30;
        focus:false
        border.color:"black"
        opacity: activeFocus ? 1.0 : 0.5
        Text{
        text:"LOGIN"
            anchors.horizontalCenter:login1.horizontalCenter;
            anchors.verticalCenter:login1.verticalCenter;
        }
        Keys.onReturnPressed: {
             if(loginuid.text  <  1000000000000000)
             {
                 text1.opacity=0.1
                 error1.visible=true
                 errorText.text="\n enter valid 16 digit number\n"
                 errorOk.focus=true
                 loginuid.focus=false
             }
             else{
                 loginuid.focus=false
                 loin.sigHome()
             }
        }
    }
} 
```

C++代码：

```
#include <QApplication>
#include <QDeclarativeView>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    int uid;
    QDeclarativeView view;
    view.setSource(QUrl::fromLocalFile("main.qml"));
    view.show();
    return app.exec();
} 
```

当我按下登录按钮 rect1.text 内容 shud 转到 main.cpp 文件和 main.cpp 中的 uid 获取 dat 值。像这样的东西`uid=rect1.text`。
怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:19:31.083

我不会尝试从 C++ 端监听 QML 信号。使用参数调用 C++ 方法要容易得多，并且可以实现相同的效果：

为此，您必须：

*   定义接受所需参数的[槽](http://doc-snapshot.qt-project.org/4.8/signalsandslots.html#slots)或[可调用方法](http://qt-project.org/doc/qt-4.8/qobject.html#Q_INVOKABLE)
*   [向声明式引擎注册](http://qt-project.org/doc/qt-4.8/qdeclarativeengine.html#qmlRegisterType)携带该方法的类
*   然后您可以[将](http://doc-snapshot.qt-project.org/4.8/qdeclarativecontext.html#setContextProperty)此类的实例设置为[根上下文](http://doc-snapshot.qt-project.org/4.8/qdeclarativeengine.html#rootContext)的属性，最后从 QML 调用此方法

[官方文档](http://qt-project.org/doc/qt-4.8/qml-extending.html)中也很好地涵盖了这个主题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T04:31:26.257

谢谢，sebasgo，你的回复帮助了我。我使用信号和插槽进行通信。我在 main.qml 中创建了一个信号。

```
signal info(string msg) 
```

并在登录页面

```
else{
    info(loginUid.text)
    loginuid.focus=false
    loin.sigHome()
} 
```

在 main.cpp 我将它连接到 d 插槽 main.cpp 像这样

```
#include <QtGui>
#include <QApplication>
#include <QDeclarativeView>
#include <QtDeclarative>

class DeclarativeView : public QDeclarativeView
{
    Q_OBJECT
    public:
        DeclarativeView(const QUrl & source) : QDeclarativeView(source)
        {
        }
    public slots:
        void readText(QString quid)
        {
            qdebug<<quid;
        }           
};
#include "main.moc"
int main(int argc, char *argv[])
{
    QString file = "main.qml";

    QApplication app(argc, argv);
    DeclarativeView view(QUrl::fromLocalFile(file));
    QDeclarativeItem *item = qobject_cast<QDeclarativeItem *>(view.rootObject());
    QObject::connect(item, SIGNAL(info(QString)), &view, SLOT(readText(QString)));
    view.show();
    return app.exec();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-22T08:47:47.700

创建一个 GUI 控制器 C++ 类：

```
class UiController : public QObject
{
   Q_OBJECT

public:
   UiController();
   virtual ~UiController();

public slots:
   void cal_daysoff__onDoubleClicked(const QDate& date);
}; 
```

在 QML 文件中，您定义了一个日历控件，您可以在其中将信号连接到控制器中的插槽：

```
Calendar{
   id: cal_daysoff
   Layout.fillWidth: true
   Layout.fillHeight: true
   onDoubleClicked: UiController.cal_daysoff__onDoubleClicked(date)
} 
```

在主文件中，当启动 QML 接口时，将接口连接到控制器：

```
#include "uicontroller.h"

int main(int argc, char *argv[])
{
   QApplication app(argc, argv);
   QQmlApplicationEngine engine;

   UiController control;
   engine.rootContext()->setContextProperty("UiController", &control);

   engine.load(QUrl(QStringLiteral("qrc:/main.qml")));

   return app.exec();
} 
```

# wcf - 带有内容转换的 WCF 路由

> ID：14229219
> 
> 赞同：2
> 
> 时间：2013-01-09T06:08:13.403
> 
> 标签：wcf, .net-4.0, wcf-routing

我已经实现了 WCF 路由服务；我还希望该服务（或类似的 WCF 服务）以规定的和统一的（与内容无关的）方式转换有效负载。例如，有效载荷将始终采用这种形式，我想像在所有情况下`Foo<T>`一样传递它。`Bar<T>`我很高兴转换为 XSLT 或程序化。我不在乎收到的不是 type 的消息会发生什么`Foo<T>`。

我希望使用 WCF，因为它提供了很多 OOTB 功能（例如，它支持大量绑定）。使用大量样板方法来实现 WCF 服务来转换每个封闭的泛型 ( `Foo<Class1>`-> `Bar<Class1>`; `Foo<Class2>`-> `Bar<Class2>`; 等) 是不切实际的，因为这将需要在每次路由新消息类型时重新编译/重新部署。

据我所知，WCF 不处理开放泛型，并且 WCF 路由不促进内容转换 OOTB。也就是说，`System.ServiceModel.Routing.RoutingService`显然会以某种非特定形式拦截 WCF 调用，所以我希望利用相同的模式来实现我的目标。谁能提供有关如何执行此操作的指导（或说明为什么不可能）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:33:50.590

正如我在对该问题的评论中所建议的那样，使用 IDispatchMessageInspector 可以解决此问题。请在下面找到我最终编写的极其简化的版本（比我发布 20 个课程的代码更容易）。如果有人想要一个完整的解决方案以更清晰、更高级的方式实现此代码，请告诉我，我会将我的演示放在 CodeProject 上。现在，我假设你对一小部分胆量感到满意。

控制台命令显然可以删除（如果您是自托管的，它们只是为了调试）。

```
 public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        if (request == null || request.IsEmpty)
            return null;

        Console.WriteLine();
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine(request);
        Console.ResetColor();

        // Load the request into a document.
        XPathDocument document;
        MemoryStream stream;
        using (stream = new MemoryStream())
        {
            using (XmlDictionaryWriter writer = XmlDictionaryWriter.CreateTextWriter(stream))
            {
                request.WriteMessage(writer);
                writer.Flush();
                stream.Position = 0L;
                document = new XPathDocument(stream);
            }
        }

        // Load the XSLT.
        XslCompiledTransform transformer = new XslCompiledTransform();
        transformer.Load("RequestTransformation.xslt");

        // Transform the document.
        byte[] transformedDocument;
        using (stream = new MemoryStream())
        {
            transformer.Transform(document, null, stream);
            transformedDocument = stream.ToArray();
        }

        // Construct new request from tranformed document.
        stream = new MemoryStream(transformedDocument);
        XmlReader reader = XmlReader.Create(stream);
        Message modifiedMessage = Message.CreateMessage(reader, int.MaxValue, request.Version);
        modifiedMessage.Properties.CopyProperties(request.Properties);
        request = modifiedMessage;

        Console.WriteLine();
        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.WriteLine(new System.Text.UTF8Encoding(false).GetString(transformedDocument));
        Console.ResetColor();

        return null;
    } 
```

# autocomplete - 如何根据 primefaces 中的另一个自动完成显示一个自动完成？

> ID：14229223
> 
> 赞同：0
> 
> 时间：2013-01-09T06:08:24.813
> 
> 标签：autocomplete, primefaces

我正在使用两个自动完成组件。第一个显示所有汽车公司（例如：本田，福特......），另一个自动完成必须根据选择的第一个自动完成的汽车公司显示汽车型号。（如果我在第一次自动完成中选择本田，第二次自动完成应该只显示本田车型（例如：城市，思域......））。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:54:44.610

我能想到的最短的例子：

```
<h:form>
    <p:autoComplete value="#{bean.make}"
        completeMethod="#{bean.completeMake}">
        <p:ajax event="itemSelect" />
    </p:autoComplete>
    <p:autoComplete value="#{bean.model}"
        completeMethod="#{bean.completeModel}" />
</h:form> 
```

有`p:ajax`必要调用 make 的设置器。

并且省略了支持 bean（getters/setters）：

```
@ManagedBean
@ViewScoped
public class Bean
{
    private List<String> makes = new ArrayList<String>();
    private Map<String, List<String>> makeModelMap = new HashMap<String, List<String>>();
    private String make, model;

    @PostConstruct
    private void init()
    {
        makes.add("Honda");
        List<String> hondaModels = new ArrayList<String>();
        hondaModels.add("Civic");
        hondaModels.add("City");
        makeModelMap.put("Honda", hondaModels);

        makes.add("Ford");
        List<String> fordModels = new ArrayList<String>();
        fordModels.add("T");
        fordModels.add("Focus");
        makeModelMap.put("Ford", fordModels);
    }

    public List<String> completeMake(String query)
    {
        List<String> results = new ArrayList<String>();
        for (String s : makes)
        {
            if (s.toLowerCase().startsWith(query.toLowerCase()))
            {
                results.add(s);
            }
        }
        return results;
    }

    public List<String> completeModel(String query)
    {
        List<String> results = new ArrayList<String>();
        for (String s : makeModelMap.get(make))
        {
            if (s.toLowerCase().startsWith(query.toLowerCase()))
            {
                results.add(s);
            }
        }
        return results;
    }
} 
```

# java - 如何将反向传播神经网络的权重和偏差值正确导出到另一种编程语言（Java）中

> ID：14229224
> 
> 赞同：0
> 
> 时间：2013-01-09T06:08:38.487
> 
> 标签：java, matlab, neural-network, backpropagation

我使用 Matlab 创建了反向传播神经网络。我尝试使用 Matlab 实现 XOR 门，然后获取其权重和偏差以在 java 中创建神经网络。网络由 2 个输入神经元、2 个隐藏层组成，每个隐藏层使用 2 个神经元和 1 个输出神经元。在训练网络之后，我得到了以下权重和偏差：

```
clear;
clc;
i = [0 0 1 1; 0 1 0 1];
o = [0 1 1 0];
net = newff(i,o,{2,2},{'tansig','logsig','purelin'});
net.IW{1,1} = [
    -5.5187   -5.4490;
     3.7332    2.7697
];
net.LW{2,1} = [
   -2.8093   -3.0692;
   -1.6685    6.7527
];
net.LW{3,2} = [
    -4.9318   -0.9651
];
net.b{1,1} = [
    2.1369;
    2.6529
];
net.b{2,1} = [
    -0.2274;
    -4.9512
];
net.b{3,1} = [
    1.4848
];

input  = net.IW{1,1};
layer  = net.LW{2,1};
output = net.LW{3,2};

biasinput = net.b{1,1};
biaslayer = net.b{2,1};
biasoutput= net.b{3,1};

a = sim(net,i);
a; 
```

我使用 1 和 1 作为输入来模拟它，得到以下结果：

```
>> f = [1;1]

f =

     1
     1

>> sim(net,f)

ans =

   -0.1639 
```

然后我尝试制作简单的java代码来计算这个神经网络。我的代码：

```
public class Xor {

    //Value of neuron
    static double[] neuroninput    = new double[2];
    static double[] neuronhidden1  = new double[2];
    static double[] neuronhidden2  = new double[2];
    static double[] neuronoutput   = new double[2];

    //Weight variable init
    //For first hidden layer
    static double[] weighthidden11 = new double[2];
    static double[] weighthidden12 = new double[2];

    //for second hidden layer
    static double[] weighthidden21 = new double[2];
    static double[] weighthidden22 = new double[2];

    //for output layer
    static double[] weightoutput   = new double[2];
    //End of weight variable init

    //Bias value input
    static double[] biashidden1    = new double[2];
    static double[] biashidden2    = new double[2];
    static double[] biasoutput     = new double[1];

    public static void main(String[] args) {
        neuroninput[0] = 1;
        neuroninput[1] = 1;

        weighthidden11[0] = -5.5187;
        weighthidden11[1] = -5.4490;
        weighthidden12[0] =  3.7332;
        weighthidden12[1] =  2.7697;

        weighthidden21[0] = -2.8093;
        weighthidden21[1] = -3.0692;
        weighthidden22[0] = -1.6685;
        weighthidden22[1] =  6.7527;

        weightoutput[0]    = -4.9318;
        weightoutput[1]    = -0.9651;

        biashidden1[0] = 2.1369;
        biashidden1[1] = 2.6529;

        biashidden2[0] = -0.2274;
        biashidden2[1] = -4.9512;

        biasoutput[0]  = 1.4848;

        //Counting each neuron (Feed forward)
        neuronhidden1[0] = sigma(neuroninput,weighthidden11,biashidden1[0]);
        neuronhidden1[0] = tansig(neuronhidden1[0]);

        neuronhidden1[1] = sigma(neuroninput,weighthidden12,biashidden1[1]);
        neuronhidden1[1] = tansig(neuronhidden1[1]);

        neuronhidden2[0] = sigma(neuronhidden1,weighthidden21,biashidden2[0]);
        neuronhidden2[0] = logsig(neuronhidden2[0]);

        neuronhidden2[1] = sigma(neuronhidden1,weighthidden22,biashidden2[1]);
        neuronhidden2[1] = logsig(neuronhidden2[1]);

        neuronoutput[0] = sigma(neuronhidden2,weightoutput,biasoutput[0]);
        neuronoutput[0] = purelin(neuronoutput[0]);
        System.out.println(neuronoutput[0]);
    }

    static double tansig(double x) {
        double value = 0;
        value = (Math.exp(x) - Math.exp(-x)) / (Math.exp(x) + Math.exp(-x));
        return value;
    }

    static double logsig(double x) {
        double value = 0;
        value = 1 / (1+Math.exp(-x));
        return value;
    }

    static double purelin(double x) {
        double value = x;
        return value;
    }

    static double sigma(double[] val, double[] weight, double hidden) {
        double value = 0;
        for (int i = 0; i < val.length; i++) {
            value += (val[i] * weight[i]);
            //System.out.println(val[i]);
        }
        value += hidden;
        return value;
    }
} 
```

但结果如下：

```
-1.3278721528152158 
```

我的问题，将重量和偏差值从 matlab 导出到 java 是否有任何错误或我的错误？也许我在我的java程序中犯了错误？非常感谢你..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:36:24.457

我认为问题在于标准化： http: [//www.mathworks.com/matlabcentral/answers/14590](http://www.mathworks.com/matlabcentral/answers/14590)

如果您使用 0,1 个输入，则必须使用 f(x)=2*x-1 归一化函数，它将值转换为 [-1; 1] 间隔，然后 g(x)=(x+1)/2 将输出转换回 [0; 1]。伪代码：

```
g( java_net( f(x), f(y) ) ) = matlab_net(x, y) 
```

我在另一个网络上试过这个并为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:24:06.003

您的问题肯定与您的 JAVA 版本的 Matlab`sim()`命令有关。

这是一个复杂的 Matlab 命令，具有许多影响要模拟的网络架构的设置。为了使调试更容易，请尝试在 Matlab 中自己实现 sim() 命令。可能会减少层数，直到您在 Matlab 中`sim()`-builtin 和您自己的`sim`版本相匹配。当它工作时转换为 JAVA。

**编辑：**

在Matlab中重新实现该`sim()`功能的原因是，如果你不能在这里实现它，你也无法在JAVA中正确实现它。前馈网络很容易使用 Matlab 矢量符号实现。

# android - Android 在启用 WiFi 时强制通过 Internet 进行流量

> ID：14229227
> 
> 赞同：4
> 
> 时间：2013-01-09T06:08:47.230
> 
> 标签：android, sockets

我开始编写一个 Android 应用程序来执行我的 Web 服务器的后台监控。启用 WiFi 后，一个问题是默认情况下流量是通过它定向的，我希望始终使用 3G 进行 HTTP 请求以检查外部可用性。我知道我可以使用此代码以编程方式禁用 WiFi：

```
WifiManager wifiManager = (WifiManager)getBaseContext().getSystemService(Context.WIFI_SERVICE);
wifiManager.setWifiEnabled(false); 
```

但由于它将在后台运行，因此有点笨拙，并且会在检查过程中中断 WiFi 上的其他操作。查看[套接字文档](http://developer.android.com/reference/java/net/Socket.html)，我看不到任何明显的方法来实现这一点。我想知道是否有任何受支持的方法可以在非 root 手机上实现这一点？我可以完全控制服务器，因此协议不必特别是 HTTP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:20:41.677

我不相信您可以在 android 中执行此操作，因为在任何给定时间只有一个网络连接处于活动状态。这里也发布了一个类似的问题：

[通过 3G 网络发送 HTTP 请求而不使用 WiFi？](https://stackoverflow.com/questions/3606031/send-http-request-through-3g-network-without-using-wifi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:28:46.753

对于 Android 来说，这似乎是一个非常危险的功能。

*   使用按流量计费的 3G 计划的用户呢？如果一个应用程序强迫他们使用 3G 连接，然后在他们不知情的情况下（认为他们在 WiFi 上），他们会感到如何？

*   此外，一次不能有多个活动网络。

**可能的解决方案-**

*   您可以做的是在您的应用程序处于活动状态时强制禁用 wifi 网络，然后再启用它。

*   另外，尝试搜索一个名为`requestRouteToHost`. 它允许您指定网络类型和要查找路由的主机。

# iphone - 如何拨打电话和断开电话后想要返回视图

> ID：14229231
> 
> 赞同：0
> 
> 时间：2013-01-09T06:09:23.630
> 
> 标签：iphone, ios, objective-c, ipad

> **可能重复：**
> [在 iPhone 上拨打电话并将用户带回应用程序？（UIWebView 做到了）](https://stackoverflow.com/questions/12065498/make-phone-call-on-iphone-and-take-user-back-to-app-uiwebview-does-it)

我在 tableview 单元格中有一个 UITableView，有一个电话号码。选择单元格后，想要拨打电话，并且在双方（拨号器和接收器）断开呼叫后想要返回我的应用程序视图。它怎么可能。请帮助我。先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:14:40.607

尝试

```
-(void)makeACall:(NSString *)strContactNumber
{   
    UIWebView *webView = [[UIWebView alloc] init];    
    NSString *ph_no = [NSString stringWithFormat:@"tel:%@",strContactNumber];    
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:ph_no]]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:11:15.240

尝试这个：

```
NSString *deviceType = [UIDevice currentDevice].model;
        if([deviceType isEqualToString:@"iPhone"])
        {
            NSString *phoneNumber = [@"tel://" stringByAppendingString:@"8437327307"];
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneNumber]];
        }
        else
        {
            UIAlertView *device = [[UIAlertView alloc] initWithTitle:@"ipod" message:@"Can't Call from this device" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [device show];
            [device release];
        } 
```

# ios - 如何在 iOS 的 MPMusicPlayerController 中播放 MPMediaItem？

> ID：14229233
> 
> 赞同：4
> 
> 时间：2013-01-09T06:09:36.847
> 
> 标签：ios, objective-c, audio, mpmediaquery

我正在尝试`MPMedaiItem`在`MPMusicPlayerController`iOS 中玩。就我而言，我有一个`UITableView`显示播放列表中的歌曲。当我点击手机时`UITableView`，我想播放那首歌`MPMusicPlayerController`。当我点击下一个按钮时，我还想跳过播放列表中的下一首歌曲。我怎么玩？

`didSelected`这是我用Method of编写的一些代码`UITableView`。那什么都玩不了。

```
 MPMediaItemCollection *songs = [self.arrayOfSongs objectAtIndex:indexPath.row ];

    MPMediaItem *item = [songs representativeItem ];

    NSLog(@"%@",[item valueForProperty:MPMediaItemPropertyTitle ]);

    [self.player setNowPlayingItem:[item valueForProperty:MPMediaItemPropertyAssetURL]];

    [self.player play ]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-19T05:29:11.623

我知道这有点晚了，但是您的问题是`MPMusicPlayerController`'`nowPlayingItem`属性需要一个`MPMediaItem`对象，并且您正在传递一个`NSString`包含资产 URL 的对象。这是一个如何实现的示例。

```
MPMusicPlayerController *controller = [MPMusicPlayerController iPodMusicPlayer];

MPMediaItemCollection *collection = [[MPMediaItemCollection alloc] initWithItems:arrayOfMediaItems];
MPMediaItem *item = [collection representativeItem];

[controller setQueueWithItemCollection:collection];
[controller setNowPlayingItem:item];

[controller prepareToPlay];
[controller play]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T18:15:32.740

我发现在这样的实例中使用 AVPlayer 更容易。

在你的头文件中声明 AVPlayer 对象；

```
AVPlayer *audioPlayer; 
```

然后在你的方法文件中使用类似的东西：

```
if(!audioPlayer){
   audioPlayer = [[AVPlayer alloc] initWithURL:[item valueForProperty:MPMediaItemPropertyAssetURL]];
} else {
   [audioPlayer replaceCurrentItemWithPlayerItem:[AVPlayerItem playerItemWithURL:itemURL]];
}
[audioPlayer play]; 
```

# javascript - 混淆 Javascript 代码，从代码中删除任何字母数字字符

> ID：14229234
> 
> 赞同：1
> 
> 时间：2013-01-09T06:09:37.940
> 
> 标签：javascript

为任何浏览器使用与 ECMAScript 兼容的 javascript，一种能够混淆 javascript 源代码的逻辑，删除字母数字字符并仅`[]{}!+-*><`用于编写任何浏览器功能代码。

提出一些开始步骤，然后我停下来，因为我的逻辑只是 chrome，所以需要任何浏览器解决方案的帮助。

做一些测试你会得到进一步的结果：

```
[]+[] // ""
{}+[] // 0
{}+{} // NaN
[]+{} // "[object Object]"
![] // false
!![] // true 
```

因此，即使您没有在代码中键入任何字母数字，也可以编写一个字符串，例如：

```
([]+{})[!![]+!![]+!![]]+(![]+[])[!![]+!![]+!![]] 
```

要走得更远，您甚至可以执行以下功能：

```
[]['sort'] // function sort() { [native code] } 
```

或者，混淆它：

```
[][(![]+[])[!![]+!![]+!![]]+([]+{})[+!![]]+(!![]+{})[+!![]]+(!![]+{})[+![]]] // function sort() { [native code] } 
```

现在我不知道如何继续使用任何浏览器，仅适用于 chrome。

我想获得任何角色，我该怎么做才能兼容？

这种混淆方法我能走多远，我知道代码不会很快或很短，但是隐藏在源代码中的东西是非常有趣的方法。

更进一步并能够编写任何字符串或源代码的**最佳逻辑**是什么。

**编辑：**

我不想要混淆生成器，我想要这样做的逻辑，有很多方法，但是，其中一些只能在一个或其他浏览器中工作，必须是在不离开 ECMAScript 规范的情况下在所有浏览器中工作的方法.

# c# - 在 c# .net 中运行线程

> ID：14229239
> 
> 赞同：1
> 
> 时间：2013-01-09T06:10:13.137
> 
> 标签：c#, .net, multithreading

让我们考虑一种经常更改字符串包含值的方法。我需要创建每 1 分钟运行一次以从字符串中获取值的线程。

可能吗？

我尝试了以下代码，它使除该特定线程之外的整个进程休眠：

```
System.Threading.Thread.Sleep(10000); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T06:14:50.257

如果您想在定义的时间段内运行线程进程，则`System.Threading.Timer`该类将是完美的

```
var timer = new System.Threading.Timer((o) =>
{
    // do stuff every minute(60000ms)

}, null, 0, 60000); 
```

但是，如果您要从此线程更新任何 UI 代码，请**不要忘记在 UI 线程上调用**

WPF：

```
var timer = new System.Threading.Timer((o) =>
{
    Dispatcher.Invoke(DispatcherPriority.Normal, (Action)delegate
    {
        // do stuff WPF UI safe
    });

}, null, 0, 60000); 
```

Winform

```
var timer = new System.Threading.Timer((o) =>
{
    base.Invoke((Action)delegate
    {
        // do stuff Winforms UI safe
    });

}, null, 0, 60000); 
```

例子：

```
private void StartUpdateTimer()
{
    var timer = new System.Threading.Timer((o) => 
    { 
        string ss = "gowtham " + DateTime.Now.ToString(); 
        Response.Write(ss); 
    }, null, 0,1000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:19:58.293

`Sleep`不会启动新线程，它会在给定的毫秒数内阻塞当前线程（在您的情况下为 UI 线程）。

根据您的描述，您想启动新线程并可以在该线程中休眠。此外，使用计时器可能更容易。[MSDN Thread 文章](http://msdn.microsoft.com/en-us/library/bkb1k2x8.aspx)中有关 Thread 对象的完整示例和信息可用：

```
new Thread(ThreadFunction).Start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T06:12:30.890

利用：

```
new Thread(delegate()
    {
         while(true)
         {
             // Do stuff
             Thread.sleep(60000);
         }
    }).Start(); 
```

60 000 毫秒是一分钟

Thread.sleep 使当前线程进入睡眠状态

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:22:52.817

不是每 60 秒启动一个新线程，而是使用一个线程，该线程在完成后休眠直到下一次运行。像这样的东西：

```
Class Main{

public void startObserverThread(){
   Thread t = new Thread(this.observerThread);
   t.start();
}

private DateTime lastRun = null;
public void observerThread(){
   if (lastRun == null || DateTime.Now.Subtract(lastRun).Seconds >= 60){
       lastRun = DateTime.Now;
       //do thread work.
   }else{
       //check every second, if time elapsed
       Thread.sleep(1000);
   }
}

} 
```

如果需要更准确，请更改等待时间。与在线程末尾重新安排新线程相比，最大的优势在于，您不需要关心任务本身的执行时间。如果需要 10 秒，线程将休眠 50 秒。如果需要 50 秒，则线程在完成任务工作后仅休眠 10 秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T06:20:37.547

C# 或更特别的 .NET 支持 MULTITHREADING。

当您使用`Thread.Sleep()`它时，它将禁用使用的一个线程`Thread.Sleep()`

这是一个使用[“TPL”](http://msdn.microsoft.com/en-us/library/dd460717.aspx)来午餐线程的示例，该线程每 60 秒对字符串进行一次采样

```
System.Threading.Tasks.Task.Factory.StartNew(
()=>
{
System.Threading.Thread.Sleep(60000);
 ReadString()}
) 
```

你应该记住，你需要保护你的字符串[`RACE CONDITION`](http://en.wikipedia.org/wiki/Race_condition#Software)

为此使用 C#[锁](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)

# grails - 使用手动返回按钮的贝宝自动返回导致应用程序中的错误

> ID：14229240
> 
> 赞同：0
> 
> 时间：2013-01-09T06:10:15.857
> 
> 标签：grails, paypal

我在我的 Grails 2.1.1 版本中使用 paypal。在paypal中成功处理付款后，显示一个配置自动返回的成功页面以及一个手动返回按钮到相同的url。如果用户没有点击返回按钮，那么一切都很好。但是，如果用户单击“返回”按钮，那么我的操作会出现两次相同的请求（自动返回也会发送相同的请求）。是否可以过滤此重复请求以对控制器的操作不执行任何操作，因为它已经在进行手动退货点击请求，或者如果用户点击手动退货按钮，则将 paypal 设置为不发送该付款的自动退货请求。？或者有什么更好的方法来处理这个问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:49:19.807

您可以启用支付数据传输以获取交易 ID。

来自文档：[https ://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/howto_html_paymentdatatransfer](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/howto_html_paymentdatatransfer)

**当客户向您付款时，PayPal 通过将交易 ID 附加到您在帐户资料中指定的 URL 来向您发送付款的交易 ID。此信息通过 HTTP GET 作为此名称/值对发送：tx=transactionID**

然后您可以检查 transactionID 是否已被处理。

此外，您可以通过将这些参数发送回贝宝来完成付款验证，如上面链接中所述。

# android - 使用 Android 应用程序进行在线支付

> ID：14229245
> 
> 赞同：0
> 
> 时间：2013-01-09T06:10:45.400
> 
> 标签：android, webview

我必须编写一个在线支付安卓应用程序。应用程序有一个计时器，时间到了页面就会过期。

我的应用程序将通过 WebView 链接到支付网关网页，用户必须登录银行网站，确认金额，然后按确认按钮。

当我的应用程序从支付网关收到支付状态时，计时器应该停止。

问题是，我不太确定在 android 编程中可以使用哪些功能来跟踪支付网关的结果。

欣赏是否有任何建议或提示。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:18:23.917

尝试使用贝宝集成..我附上了链接通过..

[http://androiddevelopement.blogspot.in/2011/04/adding-paypal-payment-in-android.html](http://androiddevelopement.blogspot.in/2011/04/adding-paypal-payment-in-android.html)

# build - 常春藤模块的多个工件

> ID：14229246
> 
> 赞同：4
> 
> 时间：2013-01-09T06:10:50.030
> 
> 标签：build, ivy

我想通过 ivy 将 jar 检索到特定文件夹（如 lib），下面是我在 build.xml 中的检索定义：

```
<ivy:retrieve pattern="lib/[artifact].[ext]" conf="webInfLib" /> 
```

我的 ivy.xml 的定义如下：

```
<ivy-module version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd"
       xmlns:m="http://ant.apache.org/ivy/maven">
    <info organisation="xxxx" module="xxxx" status="integration"/>
    <configurations>
        <conf name="webInfLib"  description="add jar to web-inf/lib folder"/>
    </configurations>
    <dependencies>
        <dependency org="org.springframework" name="spring-beans" rev="2.5.5" transitive="false" conf="webInfLib -> default"/>
        <dependency org="net.sf.json-lib" name="json-lib" rev="2.3"> 
            <artifact name="json-lib" type="jar" m:classifier="jdk15"/>
        </dependency>
    </dependencies>
</ivy-module> 
```

但它总是抛出：

```
impossible to ivy retrieve: java.lang.RuntimeException: Multiple artifacts of the module xxxxxx are retrieved to the same file! Update the retrieve pattern  to fix this error. 
```

我已经阅读了一些类似的问题，他们建议将检索模式更改为更复杂的模式。我尝试了类似“[artifact]-revision.[ext]”的东西，但没有帮助。当我执行“ivy.resolve”时，它可以正常工作。关于这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:05:34.050

检索模式是真正的问题。你在尝试

```
[artifact]-[revision].ext 
```

所以我想二进制 jar 和源 jar 将被写在同一个位置，用于任何任意依赖。但是，如果您为您所拥有的案例添加一些独特的东西

```
[artifact]-[revision](-[classifier]).[ext] 
```

在源或文档的情况下，分类器将具有一个值，因此将具有不同的名称。如果没有分类器（如二进制编译 jar 的情况），则不会有任何分类器，这由括号 ( ) 处理

# html - 图像悬停不起作用 - 代码有什么问题？

> ID：14229248
> 
> 赞同：0
> 
> 时间：2013-01-09T06:10:51.503
> 
> 标签：html, css

似乎我已经尝试了我能想到的一切来让这些图像链接在悬停时更改图像。现在只显示主要的 navprint.png。就 html 和 css 而言，我是初学者，并且已经为这个问题苦苦挣扎了好几天。这是代码。任何帮助将非常感激。

html

```
<li class="navprint"><a href="printcategory.html"><img src="Images/navprint.png"      alt="print button" title="print button"></a></li> 
```

css

```
.navprint {
    width: 160px;
    height: 30px;
    background-image: url("Images/navprint.png");
}

.navprint:hover {
    background-image: url('Images/navprinthov.jpg');
    width: 160px;
    height: 30px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:18:14.797

试试这个

```
<li class="navprint">
 <a href="printcategory.html">
   <img src="Images/navprint.png" alt="print button" title="print button" />
 </a>
</li>

.navprint {
    width: 160px;
    height: 30px;
    background-image: url("Images/navprint.png");
}

.navprint:hover {
    background-image: url('Images/navprinthov.jpg');
} 
```

# ios - 为什么后台和重新打开应用程序不调用 viewDidAppear？

> ID：14229253
> 
> 赞同：0
> 
> 时间：2013-01-09T06:11:22.077
> 
> 标签：ios, objective-c, uiviewcontroller

我有 2 个视图控制器，vc1 和 vc2。当我想加载 vc2 时，会从 vc1 调用模态 segue。假设我在显示 vc2 时将应用程序置于后台。当应用程序重新打开到停止的视图时，为什么不调用 viewDidAppear？每次出现 vc2 时，我还能如何检测到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:15:26.180

您可以`UIApplicationDidBecomeActiveNotification`在 VC2 中注册并`viewDidAppear`从那里调用。在您`viewDidLoad`的 VC2 中执行此操作：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                     selector:@selector(somethingThatWillCallViewDidAppear:)
                       name:UIApplicationDidBecomeActiveNotification 
                                  object:nil]; 
```

正如 rmaddy 下面所说，确保在 dealloc 或 viewDidUnload 中删除观察者。

# iphone - 如何通过 NSDate 对象增加一秒

> ID：14229256
> 
> 赞同：12
> 
> 时间：2013-01-09T06:11:34.913
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我有一个 NSString，其格式为 @"2013-01-09 06:10:10 +0000" （我从服务器获取它，它不是当前时间）。我想连续增加一秒。我可以使用计时器来执行此操作，但是如何将时间增加一秒？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-09T06:14:36.643

试试这个，

```
NSDate *correctDate = [NSDate dateWithTimeInterval:1.0 sinceDate:yourDate]; 
```

您可以使用`NSDateFormatter`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-14T16:18:27.107

如今（2017 年）Apple 建议`(NS)Calendar`用于各种日期数学

**Objective-C**

```
NSDate *now = [NSDate date];
NSCalendar *currentCalendar = [NSCalendar currentCalendar];
NSDate *nowPlusOneSecond = [currentCalendar dateByAddingUnit:NSCalendarUnitSecond 
                                                       value:1 
                                                      toDate:now 
                                                     options:NSCalendarMatchNextTime]; 
```

**斯威夫特 3**

```
let now = Date()
let currentCalendar = Calendar.current
let nowPlusOneSecond = currentCalendar.date(byAdding: .second, value: 1, to: now)! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T06:25:13.590

在您的日期中添加 1 秒，如下所示..

```
NSDate *mydate = [NSDate date];
NSTimeInterval secondsInEightHours = 60; // you can add hours and minuts with multiply the numbers with this second..
NSDate *dateEightHoursAhead = [mydate dateByAddingTimeInterval:secondsInEightHours]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T06:37:41.827

假设您的日期字符串在名为 serverString 的 var 中。你可以通过这种方式约会...

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss z"];
NSDate *date = [df dateFromString:serverString]; 
```

并以这种方式增加它：

```
date = [date dateByAddingTimeInterval:1.0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-14T15:59:37.930

SWIFT 3.x 解决方案

```
// Just an example to present second level date/time calculation
let time = NSDate()
let interval:Double = 5.0
let timeFiveSecondLater = time.addingTimeInterval(interval) 
```

# javascript - javascript中的unix时间戳到年龄

> ID：14229260
> 
> 赞同：2
> 
> 时间：2013-01-09T06:11:46.587
> 
> 标签：javascript, unix-timestamp

如果您在 JavaScript 中有一个旧的 UNIX 时间戳...有没有办法获得该时间戳的年龄数？

就像，那个unix时间戳的年龄是从……到现在。

你能在 JavaScript 中做到这一点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T06:13:44.780

假设您的时间戳以毫秒为单位，您可以使用以下方法获取以毫秒为单位的年龄：

```
(new Date()).getTime() - timestamp; 
```

如果您的时间戳以秒为单位，请在减去之前将其乘以 1000。

然后，您可以除以适当的因子以转换为秒/分钟/小时等。例如，要获得以年为单位的年龄，您可以使用：

```
((new Date()).getTime() - timestamp) / (1000 * 60 * 60 * 24 * 365); 
```

# ios - 我可以在 10.6.8 上使用 Xcode 为 iPhone 开发吗？

> ID：14229261
> 
> 赞同：0
> 
> 时间：2013-01-09T06:11:59.847
> 
> 标签：ios, xcode, osx-snow-leopard

我正在尝试使用 iPhone 应用程序，而我的 2009 Macbook Pro（运行 10.6.8）无法运行最新版本的 Xcode。

我是否需要最新版本的 Xcode 才能正确创建应用程序？（我有 v 4.02）

如果是这样，软件更新是可行的方法还是我需要升级计算机才能有效地运行 Xcode？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:23:46.317

使用 10.6.8，您至少可以升级到 Xcode 4.2，所以您应该这样做。但是您将无法使用任何包含 Storyboard 或新集合文字的项目。您将能够使用 ARC（现代内存管理）。您将无法使用任何 iOS 6 功能（我认为最高 iOS 版本是 5.0，也许是 5.1）。

学习这很好，您的主要限制将是打开其他使用新功能的示例代码项目，您将无法运行它们。此外，您将无法使用针对 iOS6 / OSX10.7+ 的第 3 方框架。

但是您的 2009 Macbook Pro 应该可以正常运行最新的 OSX.10.8.2。我正在运行 2008 MBP（6MB 内存），没有任何问题。然后你可以运行最新的 XCode 4.5.2 并兼容一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:16:17.027

您不需要最新版本的 Xcode 来创建应用程序，但您需要最新版本的 Xcode 来创建利用新版本 iOS 的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:21:17.920

是的，您可以开发，但为了利用最新的开发和改进，建议升级。升级通常使开发人员的生活变得轻松，尽管对更改有一些最初的阻力

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:26:36.163

是的，您可以通过 Xcode 开发应用程序。Xcode 的最新版本是 Snow Leopard 的 4.2。但是您需要更新您的操作系统以开发最新的操作系统和设备。还升级您的操作系统，因此您可以使用最新的 Xcode 并获得开发工具的优势

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-08T09:51:45.543

警告！不要浪费你的时间！

**OS X 10.6.8 (snow leopard) 现在太旧了，无法发布 iphone 应用程序。**

您需要一台装有 OS X 10.8（山狮）的新 Mac。如果您的 Mac 中的硬件不支持升级到更新的 OS X 版本，请不要浪费您的时间。Apple 没有保持向后兼容性，因此必要版本的 Xcode 或 Application Launcher 不会在 10.6.8 上运行。

您可以使用旧 Mac 进行开发、测试和模拟，但最终要构建和发布您的应用程序，您将需要更新的 Mac。

# php - 图片上传后显示图片

> ID：14229265
> 
> 赞同：0
> 
> 时间：2013-01-09T06:12:05.483
> 
> 标签：php, file-upload

我正在开发一个社交网站。在用户注册页面中，用户可以添加他的照片。我很轻松地做到了这一点。我的问题是我想将用户上传的图像显示到一个 div ，在单击表单末尾的提交按钮之前。我搜索了很多，但找不到合适的。

我的html代码是这样的：

```
 <img src="<?php echo $row_picture;?>" name="picture" class="settingspic"  width="75" height="91" alt="profile pic" name="picture"/><a href="" onclick="return uploadimg()"> Upload</a></li>
 <input type="file" name="file" id="file" style="display:none;" /> 
```

我的 jasvascript 代码是：

```
function uploadimg()
{
 var uploader = document.getElementById('file');
 uploader.click();
 return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:19:16.647

您必须进行 Ajax 调用以立即获取上传的图像。

参考网址 => [http://www.finalwebsites.com/demos/php_ajax_upload_example.php](http://www.finalwebsites.com/demos/php_ajax_upload_example.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:48:15.147

Jquery File Upload 插件是您想要的插件。

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

这会有所帮助，因为在上面的插件中，正如你所问的“在提交表单之前你想在 div 中显示图像”这个插件就是这样工作的。

**试试看**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:22:45.207

这里有很多插件，我想它们中的大多数都会对你的项目有用

[http://www.jquery4u.com/plugins/10-jquery-ajax-file-uploader-plugins/](http://www.jquery4u.com/plugins/10-jquery-ajax-file-uploader-plugins/)

# qt - QTableView 没有获取到中央小部件的背景颜色

> ID：14229266
> 
> 赞同：0
> 
> 时间：2013-01-09T06:12:07.480
> 
> 标签：qt, background-color, qtableview

![在此处输入图像描述](../Images/6002ac798ae351de35c1ccbf70cdd4ec.png)

我有一个 QMainWindow。

对于那个窗口，我设置了一个中央小部件。

我有一个垂直框布局，并在布局中添加了一些小部件，包括 QTableView。

我已将此布局设置为中央小部件，并为此小部件设置了背景颜色。

问题是..当其他小部件获取此背景颜色时，TableView 坚决保持为白色。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:48:59.707

您应该使用样式表将背景颜色应用于所有小部件。以下将起作用：

```
*{
    background-color: rgb(255,0,0);
    alternate-background-color: rgb(0, 255, 0);
    selection-background-color: rgb(0, 0, 255);
} 
```

有关更多详细信息，请查看[Qt 样式表文档](http://doc.qt.digia.com/qt/stylesheet-customizing.html)和[样式表参考](http://doc.qt.digia.com/qt/stylesheet-reference.html)。例如看看[这里](http://doc.qt.digia.com/qt/stylesheet-examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:08:43.250

我想您应该尝试从 Central Widget 继承的新 QWidget，即：

```
QTableView* myTable = new QTableView(ui->centralWidget()); 
```

# iphone - 无法从 URL 获取 UIImage

> ID：14229272
> 
> 赞同：2
> 
> 时间：2013-01-09T06:12:38.123
> 
> 标签：iphone, ios, ipad

我正在尝试从 URL 获取图像，但我无法做到。谁能让我知道出了什么问题

找到下面的代码供您参考。

```
NSString *ImageURL = @"http://images.pcmac.org/SiSFiles/Schools/TN/JacksonMadisonCounty/RoseHillMiddle/Uploads/Locations/{B690E93E-F7C9-48AF-B72A-BFF944FA6D4A}_104_9169.JPG";

    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:ImageURL]];

  img.image = [UIImage imageWithData:imageData]; 
```

其中 img 是 UIImageView

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T06:30:17.633

我只是创建你的 ImageURL 的演示，你只需要在下面放代码：-

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *ImageURL = @"http://images.pcmac.org/SiSFiles/Schools/TN/JacksonMadisonCounty/RoseHillMiddle/Uploads/Locations/{B690E93E-F7C9-48AF-B72A-BFF944FA6D4A}_104_9169.JPG";

    ImageURL =[ImageURL stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

    NSLog(@"img url ==%@",ImageURL);
    NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:ImageURL]];
    UIImage *MYimage = [UIImage imageWithData:data];

    NSLog(@"==%@",MYimage);
    [imgview setImage:MYimage];

} 
```

下载我刚刚创建的图像 URL 的演示：-

[http://www.sendspace.com/file/m966ae](http://www.sendspace.com/file/m966ae)

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:17:56.350

这是因为您的 imageURL 中有“{”和“}”，因此您无法获取图像，因此只需替换此大括号即可。

```
-(NSString*)replace:(NSString*)string
{
    NSString *str = [[string stringByReplacingOccurrencesOfString:@"{" withString:@"%7B"] stringByReplacingOccurrencesOfString:@"}" withString:@"%7D"];

    return str;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:22:03.573

试试这个.......

```
NSString *ImageURL = @"http://images.pcmac.org/SiSFiles/Schools/TN/JacksonMadisonCounty/RoseHillMiddle/Uploads/Locations/{B690E93E-F7C9-48AF-B72A-BFF944FA6D4A}_104_9169.JPG";
NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:ImageURL]];
UIImage *IMG = [UIImage imageWithData:data];
img.image = IMG; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:32:47.767

您必须通过以下方式创建您的 url 对象：

```
NSURL *url = [NSURL URLWithString:[ImageURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

然后使用该 url 来获取数据。希望它对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T07:04:20.170

有多种方法可以从 Url 获取图像。你可以使用任何人。但我尝试过的最快的是

```
-(UIImage*)getImageFromURLwithUrl:(NSString*)imgURLStr
{
    NSMutableURLRequest *requestWithBodyParams = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:imgURLStr]];
    NSData *imageData = [NSURLConnection sendSynchronousRequest:requestWithBodyParams returningResponse:nil error:nil];
    UIImage *image = [UIImage imageWithData:imageData];

    return image;
} 
```

# java - 使用 mongoDB 和 Morphia 进行 Map Reduce

> ID：14229275
> 
> 赞同：0
> 
> 时间：2013-01-09T06:12:52.327
> 
> 标签：java, mongodb, mapreduce, morphia

我在 mongoDB 中使用 morphia 运行 map reduce，这是我的 java 代码

```
String map = "function() { emit(this.id,this.cal.charge)}";
String reduce = "function(k, v) {var i, sum = 0;for (i in v) {sum += v[i];}return sum;}";

MapreduceResults<Results> mrRes = ds.mapReduce(MapreduceType.MERGE,ds.createQuery(MyTable.class).field("id").equal(5),map,reduce,null,null,Re.class); 
```

这工作正常并将结果放入“重新”集合，但是如何在不插入新集合的情况下将结果作为对象或列表获取？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:37:24.197

我无法对此发表评论，因为它违反了长度限制。

如果不嫌麻烦的话，直接用java驱动就可以了，不用morphia接口。只需从 morphia 数据存储中获取 mongo 对象并使用 java 驱动程序的 map reduce 命令；它是这样的：

```
DBObject queryObject = new BasicDBObject("id", 5);
DBCollection collection = ds.getCollection(MyTable.class);

MapReduceCommand mrc = new MapReduceCommand(collection, // collection to do map-reduce on
                                            map, // map function
                                            reduce, // reduce function
                                            null, // output collection for the result
                                            MapReduceCommand.OutputType.INLINE, // output result type
                                            queryObject); // query to use in map reduce function 
```

顺便说一句，morphia 在 github [https://github.com/jmkgreen/morphia](https://github.com/jmkgreen/morphia)中有一个更新的版本，也许你也想看看。我看到较新的版本也不支持 map-reduce 的内联操作。

# sql - SQL Server 2008 - 获取表约束

> ID：14229277
> 
> 赞同：73
> 
> 时间：2013-01-09T06:12:58.717
> 
> 标签：sql, sql-server, sql-server-2008, constraints

您能否帮我构建一个查询，该查询检索所有表中的约束、每个表中的约束计数，并显示`NULL`没有任何约束的表。

这是我到目前为止所拥有的：

```
Select  SysObjects.[Name] As [Constraint Name] ,
        Tab.[Name] as [Table Name],
        Col.[Name] As [Column Name]
From SysObjects Inner Join 
(Select [Name],[ID] From SysObjects) As Tab
On Tab.[ID] = Sysobjects.[Parent_Obj] 
Inner Join sysconstraints On sysconstraints.Constid = Sysobjects.[ID] 
Inner Join SysColumns Col On Col.[ColID] = sysconstraints.[ColID] And Col.[ID] = Tab.[ID]
order by [Tab].[Name] 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-01-09T06:17:52.830

您应该使用当前的`sys`目录视图（如果您使用的是 SQL Server **2005**或更新版本 - 这些`sysobjects`视图已被**弃用**并且应该避免使用） -[在此处查看有关目录视图的大量 MSDN SQL Server 联机丛书文档](http://msdn.microsoft.com/en-us/library/ms174365.aspx)。

您可能会感兴趣的视图有很多：

*   `sys.default_constraints`对于列的默认约束
*   `sys.check_constraints`检查列上的约束
*   `sys.key_constraints`用于键约束（例如主键）
*   `sys.foreign_keys`对于外键关系

还有**更多**- 看看吧！

您可以查询并加入这些视图以获取所需的信息 - 例如，这将列出表、列和在它们上定义的所有默认约束：

```
SELECT 
    TableName = t.Name,
    ColumnName = c.Name,
    dc.Name,
    dc.definition
FROM sys.tables t
INNER JOIN sys.default_constraints dc ON t.object_id = dc.parent_object_id
INNER JOIN sys.columns c ON dc.parent_object_id = c.object_id AND c.column_id = dc.parent_column_id
ORDER BY t.Name 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-08-25T19:49:50.567

您可以使用此查询

独特的约束，

带值的默认约束，

具有引用表和列的外键

和主键约束。

```
Select C.*, (Select definition From sys.default_constraints Where object_id = C.object_id) As dk_definition,
(Select definition From sys.check_constraints Where object_id = C.object_id) As ck_definition,
(Select name From sys.objects Where object_id = D.referenced_object_id) As fk_table,
(Select name From sys.columns Where column_id = D.parent_column_id And object_id = D.parent_object_id) As fk_col
From sys.objects As C
Left Join (Select * From sys.foreign_key_columns) As D On D.constraint_object_id = C.object_id 
Where C.parent_object_id = (Select object_id From sys.objects Where type = 'U'
And name = 'Table Name Here'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-04-18T17:48:02.020

我使用以下查询来检索 SQL Server 2012 中的约束信息，并且运行良好。我希望它对你有用。

```
SELECT 
    tab.name AS [Table]
    ,tab.id AS [Table Id]
    ,constr.name AS [Constraint Name]
    ,constr.xtype AS [Constraint Type]
    ,CASE constr.xtype WHEN 'PK' THEN 'Primary Key' WHEN 'UQ' THEN 'Unique' ELSE '' END AS [Constraint Name]
    ,i.index_id AS [Index ID]
    ,ic.column_id AS [Column ID]
    ,clmns.name AS [Column Name]
    ,clmns.max_length AS [Column Max Length]
    ,clmns.precision AS [Column Precision]
    ,CASE WHEN clmns.is_nullable = 0 THEN 'NO' ELSE 'YES' END AS [Column Nullable]
    ,CASE WHEN clmns.is_identity = 0 THEN 'NO' ELSE 'YES' END AS [Column IS IDENTITY]
FROM SysObjects AS tab
INNER JOIN SysObjects AS constr ON(constr.parent_obj = tab.id AND constr.type = 'K')
INNER JOIN sys.indexes AS i ON( (i.index_id > 0 and i.is_hypothetical = 0) AND (i.object_id=tab.id) AND i.name = constr.name )
INNER JOIN sys.index_columns AS ic ON (ic.column_id > 0 and (ic.key_ordinal > 0 or ic.partition_ordinal = 0 or ic.is_included_column != 0)) 
                                    AND (ic.index_id=CAST(i.index_id AS int) 
                                    AND ic.object_id=i.object_id)
INNER JOIN sys.columns AS clmns ON clmns.object_id = ic.object_id and clmns.column_id = ic.column_id
WHERE tab.xtype = 'U'
ORDER BY tab.name 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-02T10:56:24.487

```
SELECT
    [oj].[name] [TableName],
    [ac].[name] [ColumnName],
    [dc].[name] [DefaultConstraintName],
    [dc].[definition]
FROM
    sys.default_constraints [dc],
    sys.all_objects [oj],
    sys.all_columns [ac]
WHERE
    (
        ([oj].[type] IN ('u')) AND
        ([oj].[object_id] = [dc].[parent_object_id]) AND
        ([oj].[object_id] = [ac].[object_id]) AND
        ([dc].[parent_column_id] = [ac].[column_id])
    ) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-23T05:24:45.947

我试图编辑[marc_s](https://stackoverflow.com/users/13302/marc-s)提供的[答案](https://stackoverflow.com/a/14229333/1462615)，但由于某种原因它没有被接受。它格式化 sql 以便于阅读，包括架构并命名默认名称，以便可以轻松地将其粘贴到其他代码中。

```
 SELECT SchemaName = s.Name,
         TableName = t.Name,
         ColumnName = c.Name,
         DefaultName = dc.Name,
         DefaultDefinition = dc.Definition
    FROM sys.schemas                s
    JOIN sys.tables                 t   on  t.schema_id          = s.schema_id
    JOIN sys.default_constraints    dc  on  dc.parent_object_id  = t.object_id 
    JOIN sys.columns                c   on  c.object_id          = dc.parent_object_id
                                        and c.column_id          = dc.parent_column_id
ORDER BY s.Name, t.Name, c.name 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-26T17:07:05.693

这是获取外键的脚本：

```
 SELECT TOP(150)
       t.[name] AS [Table],
       cols.[name] AS [Column],
       t2.[name] AS [Referenced Table],
       c2.[name] AS [Referenced Column],
       constr.[name] AS [Constraint]
  FROM sys.tables t
 INNER JOIN sys.foreign_keys constr ON constr.parent_object_id = t.object_id
 INNER JOIN sys.tables t2 ON t2.object_id = constr.referenced_object_id
 INNER JOIN sys.foreign_key_columns fkc ON fkc.constraint_object_id = constr.object_id
 INNER JOIN sys.columns cols ON cols.object_id = fkc.parent_object_id AND cols.column_id = fkc.parent_column_id
 INNER JOIN sys.columns c2 ON c2.object_id = fkc.referenced_object_id AND c2.column_id = fkc.referenced_column_id
 --WHERE t.[name] IN ('?', '?', ...)
 ORDER BY t.[Name], cols.[name] 
```

# python - 如何压缩python dict以保存到mysql

> ID：14229280
> 
> 赞同：1
> 
> 时间：2013-01-09T06:13:07.297
> 
> 标签：python, mysql, dictionary, blob

我有一个大的python dict，可能是10MB，未能将它保存在mysqldb 中，因为repr(dict) 我尝试了zlib.compress，结果字符串无法保存mysql。现在如何压缩字典并转换为二进制文件并保存为blob？任何编码示例？

#update 我尝试了使用 zlib 的 struct，对于 200k 字符长度的字符串，大约减少了 50%。
测试：

```
import zlib, struct, ast

dic={}
for i in xrange(20):
    dic[str(i)]=i
s=zlib.compress(repr(dic), 5)
bs=struct.pack('%ds' %len(s),s)
s2=struct.unpack('%ds' %len(s),bs)[0]
s2=zlib.decompress(s2)
dic2=ast.literal_eval(s2)
assert dic2==dic 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:19:55.527

如果您想稍后使用 dict，那么我建议将 dict 保存为 json 格式，然后可以将其导入回来。

尝试[mvps 建议](https://stackoverflow.com/a/14229393/1864000)增加第`max_allowed_packet`一个。

```
import json 

dicstring = json.dumps(dic) # outputs as a string format
# or
dicobj = json.dumps(dic).encode('utf-8') # outputs in bytes format

# alternatively, to save the file
with open('path/to/file.json', 'wb+') as file:
    file.write(dicobj)
    file.close() 
```

打开文件：

```
with open('path/to/file.json','rb') as file:
    dic = json.loads(file.read().decode('utf-8'))
    file.close() 
```

读取字符串：

```
dic = json.loads(dicstring) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:23:02.937

您应该能够将您的 python 字典保存为 BLOB 字段，但您必须使用参数化查询，[例如 this](https://stackoverflow.com/a/1294496/1734130)。

如果您的 blob 大于 1MB，您可能需要[`max_allowed_packet`](http://dev.mysql.com/doc/refman/5.1/en/packet-too-large.html)在服务器和客户端上都增加才能使 BLOB 工作。

但是，更好的方法是将字典插入另一个表，每个键一行。您可能需要创建新表，或者可能能够使用一些应该为此目的而创建的现有表。

如果该新表被正确索引，您可以利用服务器能够通过键快速检索您的数据。

# bash - 如何阅读和修改此 bash 脚本以检查 2 个参数而不是 1 个？

> ID：14229282
> 
> 赞同：1
> 
> 时间：2013-01-09T06:13:09.880
> 
> 标签：bash

我知道 php 编程，但我不熟悉 bash 脚本编程语法。

我有这个代码片段

```
EXPECTEDARGS=0
if [ $# -ne $EXPECTEDARGS -o "x$0" == "x"  -o $0 == "bash" ]; then
  echo "Usage:"
  echo "   Parameter 1: argument 1 missing"
  exit 1
fi 
```

这会正确检查至少 1 个参数。

**我想逐行**了解此代码段的含义。到目前为止，我只能确定 EXPECTEDARGS 是一个变量。

在理解了代码片段之后，我想对其进行修改以检查 2 个参数。

代码片段将在 github gist 中。

我的目标是使用执行脚本

```
bash -c "$(curl -fsSL https://raw.github.com/gist/4491019)" <arg1> <arg2> 
```

当然没有 <> 符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:23:32.527

> if [ $# -ne $EXPECTEDARGS -o "x$0" == "x" -o $0 == "bash" ]; 然后

*   `$#` - 脚本的参数总数。
*   `"x$0" == "x"`- 检查是否`$0`为空/空。
*   `$0`- 第一个参数，始终是脚本名称。**因此，除非您的脚本名是bash**，否则使用字符串 'bash' 进行检查的条件将返回 false 。
*   `-o`- 或运算符

如果语句为真，则休息只是`echo`输出到控制台的语句。`if`bash 中的语法`if`是

```
if [ <condition> ]; then
   # ... Statements
fi 
```

要检查参数的数量是否为 2，您只需要以下内容 -

```
EXPECTEDARGS=2
if [ $# -ne $EXPECTEDARGS ]; then
     # number of arguments are not 2, display usage etc, here
fi 
```

[查看 bash 参考手册以获取更多信息](http://www.gnu.org/software/bash/manual/bashref.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:25:33.997

如果参数数量不等于 ( `ne`) 到 EXPECTEDARGS 或 ( `-o`) 脚本名称为空字符串 ( `"x$0" == "x"`) 或 ( `-o`) 脚本名称`bash`则报告使用情况并退出。脚本名称测试可能正在测试调用是否通过脚本文件而不是管道或 $(cat script) 之类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T06:27:24.357

*   $# 个参数。
*   $0 外壳脚本名称
*   $1,$2,...,$n 参数 1、2 等
*   [条件] 测试一个或多个条件，-ne 不等于，-eq 等于，-gt 大于，-lt 小于，-o 或，= 比较字符串/数字
*   "x$0" = x 检查脚本名称/程序名称是否为空

如果您想了解更多信息，请将脚本另存为文件并尝试使用`echo`. 使用以下命令运行脚本：

```
bash -c ./script.sh 
```

或者

```
bash script.sh 
```

模仿 bash+curl 的行为

`[ ]`或者`test`是一个很好的例子，它们只是一个程序，实际上是同一个程序，在 C 中检查 $0 或 argv[0] 时，它们的行为有点不同。

```
$ ls -l /bin/test /bin/\[
-r-xr-xr-x  2 root  wheel  43120 Dec 11  2011 /bin/[*
-r-xr-xr-x  2 root  wheel  43120 Dec 11  2011 /bin/test* 
```

如果你运行`[ 2 -gt 1 ]; echo $?`它，它会在你的终端打印 0，0 表示成功，其他都表示失败。如果您`test`改为调用：`test 2 -gt 1; echo $?`它也会打印 0。

所以`if`只需运行一个程序并检查退出代码，你也可以这样做：

```
if true; then
    echo success
fi

if false; then
    echo fail
fi

true; echo $?; false; echo $? 
```

将打印：成功, 0, 1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T06:31:39.007

1.  $# - 存储传递给 shell 程序的命令行参数的数量。

2.  $0 - 指向脚本的文件名。

要让您的脚本检查 2 个参数，请进行以下更改

```
EXPECTEDARGS=2
if [ $# -lt $EXPECTEDARGS -o "x$0" == "x"  -o $0 == "bash" ]; then 
```

# c# - 为什么这不会取消设置两个最高有效位？

> ID：14229286
> 
> 赞同：1
> 
> 时间：2013-01-09T06:13:45.160
> 
> 标签：c#, serial-port, bit-manipulation

我有一种感觉，这与`BitConverter.ToUInt16`wiorks 的方式有关，但我一生都无法弄清楚为什么这会给我带来时髦的数据。

我需要忽略端口上的前两位并将其余位转换为 16 位无符号整数。

我尝试过反转数组，反转我的掩码，同时进行不同的转换以及各种奇怪的事情。

进来的两个字节是第一个是最重要的。第一个字节中的前两位需要取消设置。

有人可以指出我正确的方向吗？

```
byte[] buffer = new byte[2];
int count = port.Read(buffer, 0, buffer.Length);

Console.WriteLine("0: {0}", BitConverter.ToString(buffer));

ushort value = BitConverter.ToUInt16(buffer, 0);

Console.WriteLine("1: {0}", value);

value = (ushort)(value & 0x3FFF);

Console.WriteLine("2: {0}", value); 
```

这是使用 BitConverter.ToUInt16 然后与`0x3FFF`掩码进行 ANDing 时的一些示例数据。

```
0: 80-00
1: 128
2: 128 <-- this should be 0

0: 80-00
1: 128
2: 128 <-- should be 0

0: 01-00
1: 1
2: 1 <-- should be 1, as it is

0: 80-00
1: 128
2: 128 <-- should be 0

0: 80-00
1: 128
2: 128 <-- should be 0 
```

反转数组会给我这样的数据：

```
0: 00-01
1: 256
2: 256 <-- should be 1

0: 01-80
1: 32769
2: 1 <- not sure what this should be, probably 1 though 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:44:58.180

> 进来的两个字节是第一个是最重要的。

那就是问题所在。`BitConverter.ToUInt16`将第一个字节视为最不重要的字节，因为这就是您的系统的工作方式。见`BitConverter.IsLittleEndian`。

> 我试过反转数组，

那应该行得通。或者，手动组合这两个字节，而不使用`BitConverter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:41:15.433

就这样人们拥有了串行端口读取和转换 14 位无符号大端整数的完整代码。

```
private static void OnDataReceived(object sender, SerialDataReceivedEventArgs e)
{
    SerialPort port = sender as SerialPort;
    if (port.BytesToRead < sizeof(ushort))
    {
        return;
    }

    byte[] buffer = new byte[2];
    int count = port.Read(buffer, 0, buffer.Length);

    ushort value = (ushort)(((buffer[0] << 8) | buffer[1]) & 0x3FFF);
    Console.WriteLine(value);
} 
```

# sql - Postgres Rails 选择 Distinct with Order

> ID：14229291
> 
> 赞同：14
> 
> 时间：2013-01-09T06:14:36.520
> 
> 标签：sql, ruby-on-rails, postgresql

这似乎比应该的更难：

我希望能够通过它的 copy_count 对表进行排序，然后仅选择具有唯一标题的事件，并将该查询限制为前 99 个。

```
 Event.order("copy_count DESC").select("DISTINCT ON (events.title) *").limit(99) 
```

这会引发错误：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  SELECT DISTINCT ON expressions must match initial ORDER BY expressions 
```

这表明我需要将 copy_count 添加到 DISTINCT ON，但这也只会拉回可能相同的唯一 copy_count 记录！

注意：copy_count 的顺序必须首先发生。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T08:39:59.410

对于纯 SQL，它将如下所示：

```
SELECT *
FROM (SELECT DISTINCT ON (events.title) *
      FROM events
      ORDER BY events.title, events.copy_count DESC) top_titles
ORDER BY events.copy_count DESC
LIMIT 99 
```

但我不知道，如何在 RoR 中编写它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-30T18:32:53.643

尝试这个：

```
Event.select("DISTINCT ON (events.title) *").order("events.title, copy_count DESC").limit(99) 
```

发生这种情况是因为当您使用语句 DISTINCT ON 时，您必须在 ORDER BY 表达式中使用它的表达式（例如 events.title）

```
SQL ERROR:  SELECT DISTINCT ON expressions must match initial ORDER BY expressions 
```

因此，您只需在 order 语句中的 events.title 之后添加 copy_count 列

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T20:42:42.347

这意味着 ORDER BY 需要是“events.title, copy_count DESC”。DISTINCT ON 要求您排序的第一件事是 DISTINCT 列的列表。如果您试图获得每个标题的最高结果，则必须先将它们分组为具有相同标题的行集，然后才能按 copy_count 排序。如果这不是您想要做的，那么 DISTINCT ON 不是正确的构造。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-09T08:40:39.163

尝试这个：

```
Event.order("copy_count DESC").limit(99).select(:title).uniq 
```

# ms-access - 表单重新加载/刷新

> ID：14229294
> 
> 赞同：0
> 
> 时间：2013-01-09T06:14:43.640
> 
> 标签：ms-access, vba, ms-access-2007

我正在做一个项目，我需要在表单重新加载时运行代码。

我有在 tempVar 中更改的变量，但我希望正在运行的表单在表单重新加载/刷新本身之后运行 a 命令。有没有办法我可以做到这一点？

我正在运行的脚本很简单，我已经对其进行了测试以检查它是否不是导致问题的脚本本身。

我尝试过 On Load 和 On Render 之类的东西，但我想我现在已经失去了情节，所以我正在寻找新的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:27:49.820

[加载表单](http://office.microsoft.com/en-au/access-help/order-of-events-for-database-objects-HP005186761.aspx)有特定的事件顺序。以下代码应为您提供您所追求的结果：

```
Private Sub Form_Load()
    ' Insert Code Here
End Sub 
```

# varnish - Varnish：有条件地清除缓存以确保资源是最新的

> ID：14229301
> 
> 赞同：1
> 
> 时间：2013-01-09T06:15:04.103
> 
> 标签：varnish, varnish-vcl

假设我有一个“资源” - `http://localhost/doc`，我希望它会一直被 Varnish 缓存，**因为**它经常被访问，**除非**有人通过 POST 更新它，在 POST 更新完成后，所有进一步的请求都应该检索最新版本的“博士”。

我的想法是将这个逻辑包装在我的后端服务器中，因为 POST 请求默认情况下将通过 Varnish 而不进行缓存，并且在我的后端服务器中我可以：

1.  执行命令：`varnishadm -T 127.0.0.1:6082 purge req.url == "/doc"`
2.  触发 HTTP 清除请求：`curl -X PURGE http://localhost/doc`

但是，它需要我配置 VCL 来尊重“ `Cache-Control`”标题！我的 VCL 如下所示，但不起作用：

```
sub vcl_fetch {
    if (beresp.http.Cache-Control ~ "no-cache") {
        purge;
    }
    return (deliver);
}
acl purgers { "127.0.0.1"; }

sub vcl_recv {
    if (req.request == "PURGE") {
        if (!client.ip ~ purgers) {
            error 405 "Method not allowed";
        }
        return (lookup);
    }
}
sub vcl_hit {
    if (req.request == "PURGE") {
        #purge;
        purge("req.url ~ " req.url); 
        error 200 "Purged";
    }
}
sub vcl_miss {
    if (req.request == "PURGE") { 
        purge;
        error 200 "Purged";
    }
}
sub vcl_pass {
    if (req.request == "PURGE") {
        error 502 "PURGE on a passed object";
    }
} 
```

它投诉：

```
Message from VCC-compiler:
Expected ';' got '('

(program line 174), at
('input' Line 154 Pos 14)
        purge("req.url ~ " req.url); 
-------------#-----------------------

Running VCC-compiler failed, exit 1

VCL compilation failed 
```

*   问题1：如何更新VCL以实现我的目标？
*   问题2：我认为这是一个非常常见的场景：缓存资源同时保持最新，那么使用Varnish实现这一目标的最佳实践是什么？

感谢您的任何回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T07:58:20.257

当文档更新时，您的应用程序服务器可以请求清除 url。它需要为文档发送 PURGE 请求而不是 GET 请求。

或者，当您收到该 url 的 POST 时，您可以对该 url 发出禁令。

# javascript - 如何简化 Javascript If/The 倍数？

> ID：14229306
> 
> 赞同：0
> 
> 时间：2013-01-09T06:15:16.387
> 
> 标签：javascript, slider, nivo-slider

我不是编程专家。我试图让用户选择激活不同的幻灯片，为此，我需要激活所选的一个，并停用其他的。现在，我有四个幻灯片；但我也可以有 20 个。而对于 20 人来说，这段代码看起来真的很难看：

```
 function setSlider(val)
        {
            if (val == 1)
            {
                $('#slider1').nivoSlider();
                document.getElementById('slider').style.visibility = 'hidden';
                document.getElementById('slider1').style.visibility = 'visible';
                document.getElementById('slider2').style.visibility = 'hidden';
                document.getElementById('slider3').style.visibility = 'hidden';
                document.getElementById('slider4').style.visibility = 'hidden';
            }
            if (val == 2)
            {
                $('#slider2').nivoSlider();
                document.getElementById('slider').style.visibility = 'hidden';
                document.getElementById('slider1').style.visibility = 'hidden';
                document.getElementById('slider2').style.visibility = 'visible';
                document.getElementById('slider3').style.visibility = 'hidden';
                document.getElementById('slider4').style.visibility = 'hidden';
            }
            if (val == 3)
            {
                $('#slider3').nivoSlider();
                document.getElementById('slider').style.visibility = 'hidden';
                document.getElementById('slider1').style.visibility = 'hidden';
                document.getElementById('slider2').style.visibility = 'hidden';
                document.getElementById('slider3').style.visibility = 'visible';
                document.getElementById('slider4').style.visibility = 'hidden';
            }
            if (val == 4)
            {
                $('#slider4').nivoSlider();
                document.getElementById('slider').style.visibility = 'hidden';
                document.getElementById('slider1').style.visibility = 'hidden';
                document.getElementById('slider2').style.visibility = 'hidden';
                document.getElementById('slider3').style.visibility = 'hidden';
                document.getElementById('slider4').style.visibility = 'visible';
            }
        } 
```

我很确定有更好的实现。就像是

```
 function setSlider(val)
        {
                $('#slider' . val).nivoSlider();
                //loop here from 1 to 20
                document.getElementById('slider' . val).style.visibility = 'hidden';
                // loop end
                document.getElementById('slider' . val).style.visibility = 'visible';
        } 
```

我试过了，但它不起作用......谁能给我一个提示我能做什么？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:20:52.197

尝试使用以下语法：-

```
function setSlider(val)
    {
            $("#slider").hide(); 
            $("#slider"+val).nivoSlider();
            //loop here from 1 to 20
            for(var i = 1;i<=20;i++){
              $("#slider"+i).hide();
            }
            // loop end
            $("#slider"+val).show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:22:54.047

你可以考虑 switch/case 语句

```
 function setSlider(val)
        {
                document.getElementById('slider').style.visibility = 'hidden';
                document.getElementById('slider1').style.visibility = 'hidden';
                document.getElementById('slider2').style.visibility = 'hidden';
                document.getElementById('slider3').style.visibility = 'hidden';
                document.getElementById('slider4').style.visibility = 'hidden';

switch(val){
case 1:
                $('#slider1').nivoSlider();
                document.getElementById('slider1').style.visibility = 'visible';
       break;

case2:          $('#slider2').nivoSlider();
                document.getElementById('slider2').style.visibility = 'visible';
       break;
etc,. 
```

这将有助于简化。

您还可以考虑隐藏 case 语句之前的所有元素并根据 case 显示元素，这将进一步减少您的代码并使其更加简化。

你也可以使用`$('#slider"+val).show();`

```
 function setSlider(val)
            {
                    $('#slider').hide();
                    $('#slider1').hide();
                    $('#slider2').hide();
                    $('#slider3').hide();
                    $('#slider4').hide();
                    $('#slider'+val).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:28:46.487

> 就像是 […]

是的，你明白了。只有 JavaScript 中的字符串连接运算符是加号，而不是点号。对于循环，使用一个简单的 for 语句：

```
function setSlider(val) {
     $('#slider' + val).nivoSlider();
     for (var i = 1; i <= 20; i++) {
          document.getElementById('slider' + i).style.visibility = 'hidden';
     }
     document.getElementById('slider' + val).style.visibility = 'visible';
} 
```

# c# - gridview 第一行 cel 文本

> ID：14229308
> 
> 赞同：0
> 
> 时间：2013-01-09T06:15:24.500
> 
> 标签：c#, gridview

我有这样的gridview，我从数据库中获取数据并且它没有标题列

![在此处输入图像描述](../Images/bb89c9c908759f75d0081a2ad35fe511.png)

这个gridview没有标题，这些只是行。现在问题是我想格式化该列

在这里你可以看到`31 DEC`是星期一，所以我想格式化日期为星期一的每一列。我想改变第一行中星期一的那一列的颜色。所以任何人都可以告诉我在 c# 中这样做的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:05:51.343

这应该可以帮助您为匹配的单元格着色

```
protected void grid_RowDataBound(Object sender, GridViewRowEventArgs e) 
{
  if (e.Row.RowType = DataControlRowType.DataRow)
  {
    //Check your condition here
    //Get Id from here and based on Id check value in the 
    //underlying dataSource Row Where you have "Done" column Value
    // e.g.
    // (gridview.DataSource as DataTable), now you can find your row and cell 
    // of "Done"
    If(Condition True)
    {
        e.Row.BackColor = Drawing.Color.Red  // your color settings 
    }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:29:04.357

我找到了我自己的答案，就像这样

```
foreach (TableCell cell in e.Row.Cells) {
                    if (cell.Text != "-1" && cell.Text != "Cotton Arrival") {

                        char[] c = new char[7];
                        c = cell.Text.ToCharArray();

                        string datee = c[0].ToString()+c[1].ToString() ;
                        string monthh = c[2].ToString() + c[3].ToString();
                        string yearr = c[4].ToString() + c[5].ToString() + c[6].ToString() + c[7].ToString();

                        DateTime dtime = new DateTime(Convert.ToInt32(yearr),Convert.ToInt32(monthh),Convert.ToInt32(datee));

                        string day = dtime.DayOfWeek.ToString() ;

                        if (day.ToLower() == "monday") 
                        {
                            GridView1.Columns[count].ItemStyle.CssClass = "monday";
                            GridView2.Columns[count].ItemStyle.CssClass = "monday";
                            GridView3.Columns[count].ItemStyle.CssClass = "monday";
                            GridView4.Columns[count].ItemStyle.CssClass = "monday";
                            break;
                        }
                        count ++;
                    }
                } 
```

# c# - 如何解决从 ExecuteReader 内部关闭的 SqlConnection？

> ID：14229310
> 
> 赞同：1
> 
> 时间：2013-01-09T06:15:25.123
> 
> 标签：c#, .net, sql-server-2005

我有一个这样的开放`SqlConnection`代码：

```
using (var transaction = connection.BeginTransaction()) {
   using (var command = connection.CreateCommand()) {
       command.Transaction = transaction;
   command.CommandText = "MyQueryText";
       using( var reader = command.ExecuteReader() ) {
           //read data
       }
   }
} 
```

[我一直在经历一些“不可能的代码”症状](https://stackoverflow.com/q/13968342/57428)并订阅了`SqlConnection.StateChange`事件，现在我发现在某些时候使用以下堆栈调用事件（状态正在从更改`Open`为`Closed`）：

```
at MyHandler.onStateChange(Object sender, StateChangeEventArgs e)
at System.Data.ProviderBase.DbConnectionInternal.CloseConnection(DbConnection owningObject, DbConnectionFactory connectionFactory)
at System.Data.SqlClient.SqlConnection.Close()
at System.Data.SqlClient.SqlInternalConnectionTds.BreakConnection()
at System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
at System.Data.SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj)
at System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()
at System.Data.SqlClient.TdsParserStateObject.ReadByte()
at System.Data.SqlClient.SqlDataReader.SetMetaData(_SqlMetaDataSet metaData, Boolean moreInfo)
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
at System.Data.SqlClient.SqlDataReader.get_MetaData()
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
at System.Data.SqlClient.SqlCommand.ExecuteReader()
// my code calling `ExecuteReader()` 
```

所以运行时遇到一些随机错误（我猜是网络连接问题）并关闭连接，然后将关闭的阅读器对象返回给我的代码，并尝试使用返回的阅读器 yield `InvalidOperationException`。

我需要以某种方式解决它。显然会发生随机网络错误。我的代码中有重试逻辑，可以处理`SqlException`网络问题引发的 s，但在这里我面对的是一个封闭的阅读器，然后是一个`InvalidOperationException`.

我的第一个想法是编写自己的`ExecuteReader()`调用 native 的方法`ExecuteReader()`，检查是否返回了已关闭的阅读器，如果发生这种情况，则抛出一个新的`ClosedReaderReturnedException`，我还将更改重试代码，以便它也对此类异常做出反应并重新运行查询。

我的解决方案好吗？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T07:09:38.543

基于任何异常（而不是特定 SqlException）的重试逻辑是否有任何问题？我假设由于编程错误导致的异常最终会在测试阶段被发现，并且严重的（例如 SO）异常无论如何都不会被 catch 块捕获，因此用于重试逻辑的通用异常块是可以接受的想法。

如果不是，那么您的包装解决方案可能是个`ExecuteReader`好主意。考虑到这是[记录在案](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)的行为，您还需要注意 ExecuteReader 方法可能抛出的其他异常 - 因此您可能需要预测`IOException`并`ObjectDisposedException`远离`InvalidOperationException`.

# java - 运行使用外部 jar 文件的 java 文件

> ID：14229313
> 
> 赞同：3
> 
> 时间：2013-01-09T06:15:48.700
> 
> 标签：java

我想运行使用外部jar文件的java类文件，如何编译。下面是我的命令，我已经尝试过了。

```
 javac set classpath="d:\vinod\text.jar" Generate.java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:18:18.160

说`javac -cp d:\vinod\text.jar" Generate.java` 或设置环境变量 CLASSPATH 指向`text.jar`文件并说`javac Generate.jar`

要运行该文件，您需要对`java`程序使用相同的参数，而不是`javac`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:19:41.880

尝试：

```
set path = %path%;"d:\vinod\text.jar"
javac Generate.java // Or use -cp <path> command line argument
java Generate // if main method is present in Generate class. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:24:28.223

使用eclipse IDE轻松添加外部jar文件。只需选择项目并按 alt+enter 然后 java build path ，添加外部 jar 文件并刷新 eclipse。

# google-maps - 如何将包含特殊字符的地址传递给谷歌地图？

> ID：14229315
> 
> 赞同：0
> 
> 时间：2013-01-09T06:16:15.773
> 
> 标签：google-maps

由于新加坡地址包含“#”并且地址不能很好地传递给谷歌地图 API。我正在使用Java，将从数据库（MySQL）中检索地址。欢迎提出任何建议:)。

```
<a href="http://maps.google.com/maps?saddr=614337+Singapore&amp;daddr=109 North Bridge Road #03-39 Funan DigitaLife Mall Singapore 179097" target="_blank" >Get Directions</a> 
```

![在此处输入图像描述](../Images/9d1af1d5eed7e2524f33d4ea36446cc7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:54:26.860

为什么需要#？

[前往新加坡北桥路 109 号的方向，邮编 179097](http://www.geocodezip.com/v3_example_geo2.asp?addr1=614337+Singapore&addr2=109%20North%20Bridge%20Road%20Singapore%20179097&geocode=1&geocode=2)

Places API/库将找到该位置： [Places 示例](http://www.geocodezip.com/v3_GoogleEx_places-searchboxC.html?q=109%20North%20Bridge%20Road%20%2303-39%20Funan%20DigitaLife%20Mall%20Singapore%20179097)

# javascript - 有没有像 PHP 的 exit() 这样的 JavaScript 函数？

> ID：14229329
> 
> 赞同：3
> 
> 时间：2013-01-09T06:17:22.077
> 
> 标签：javascript, exit

我需要停止我的脚本。我不想写更多的代码，`if(...) return false`因为我会多次使用它。

我的英语很差。这是我在这个网站上的第一个问题。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T06:22:13.497

你可以简单地写`return false;`来这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:20:21.950

为了退出脚本的所有范围，您可以抛出异常并在脚本的外部范围内捕获它；）这要求您调整异常处理。

请注意：最好以这种方式编写程序，以下不是必需的！

```
function ExitException() {}

try { //Do your script-stuff here

  Foo();

  //and do this at any place where you wish to exit:
  throw new ExitException;
}
catch (e) {
  if (e instanceof ExitException) //This is an Exit. All fine.
    console.log("Exit");
  else //Pass Exception to the Browser
    throw e;
} 
```

# windows-8 - windows8中如何创建可搜索的文本块

> ID：14229330
> 
> 赞同：1
> 
> 时间：2013-01-09T06:17:27.700
> 
> 标签：windows-8, controls

我想创建一个可搜索的文本块，用户可以搜索他们想要的内容，我在这里找到了一个 WPF 示例：http: [//code.msdn.microsoft.com/CSWPFSearchAndHighlightText-3b5e207a](http://code.msdn.microsoft.com/CSWPFSearchAndHighlightText-3b5e207a)，但有些方法在winrt api，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:32:21.597

这听起来可能有点弱，但您可以在 HTML 中轻松完成此操作。这不是放弃 XAML 的理由。没有什么能阻止您使用 WebView 将解决方案编写为嵌入式 HTML/JavaScript 页面并将结果投影为 WebViewBrush。用户不会知道任何不同，您的问题就解决了。

# xml - 定义一个 xsd:list ，其中每个项目必须是唯一的？

> ID：14229332
> 
> 赞同：0
> 
> 时间：2013-01-09T06:17:51.677
> 
> 标签：xml, list, xsd, schema, set

是否可以在 XML Schema 中表示一个简单类型，它是一个列表*，*并且具有进一步的限制，即列表中的每个项目只能出现一次？换句话说，是否可以在 XML Schema 中定义一个“set”简单类型？

例如，使用以下架构：

```
<xs:schema version="1.1" attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:simpleType name="item">
    <xs:restriction base="xs:token">
      <xs:enumeration value="A"/>
      <xs:enumeration value="B"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="itemSet">
    <xs:list itemType="item"/>
  </xs:simpleType>

  <xs:element name="root">
    <xs:complexType>
      <xs:attribute name="set" type="itemSet"/>
    </xs:complexType>
  </xs:element>

</xs:schema> 
```

本文件验证：

```
<root set="A B"/> 
```

但是，此文档也是如此，**我希望验证失败**，因为`B`它重复了：

```
<root set="A B B"/> 
```

我怀疑仅使用 XML Schema 是不可能的，但我不太了解它，所以我正在寻找确认。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:05:19.247

这在 XSD 1.0 中是不可能的，但在 XSD 1.1 中却很容易：

```
<xs:simpleType name="uniqueList">
  <xs:restriction base="xs:NMTOKENS">
    <xs:assert test="count($value) = count(distinct-values($value))"/>
  </xs:restriction>
</xs:simpleType> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:05:30.247

可以通过正则表达式。如果我们强制对属性值进行排序，这可能会容易得多。如果不是，我们可能必须使用所有组合创建“N”模式表达式

```
 <xs:simpleType name="itemSet1">
<xs:restriction base="itemSet">
 <xs:pattern value="(A\s?)?(B\s?)?(C\s?)?"/>
</xs:restriction> 
```

```
 <xs:element name="root">
    <xs:complexType>
      <xs:attribute name="set" type="itemSet1">
      </xs:attribute>
    </xs:complexType>
  </xs:element> 
```

现在

```
<root set="A B A"/> 
```

是无效的，所以是

```
<root set="B A"/> 
```

如果您希望上述模式也有效，我们需要使用此订单向限制添加另一种模式。

# javascript - Javascript 中的年份验证

> ID：14229334
> 
> 赞同：1
> 
> 时间：2013-01-09T06:17:52.090
> 
> 标签：javascript, validation, dom-events

我想进行年份验证，它应该只是数字，它应该是 4 位长，并且在 1920 年到当前年份之间，因为我创建了 Javascript 函数，如下所示：

```
function yearValidation(year) {
    var text = /^[0-9]+$/;
    if (year != 0) {
        if ((year != "") && (!text.test(year))) {

            alert("Please Enter Numeric Values Only");
            return false;
        }

        if (year.length != 4) {
            alert("Year is not proper. Please check");
            return false;
        }
        var current_year=new Date().getFullYear();
        if((year < 1920) || (year > current_year))
            {
            alert("Year should be in range 1920 to current year");
            return false;
            }
        return true;
    } 
```

并调用它`onkeypress="return yearValidation(this.value)"`

但是当我进入时`1`它会给我警报：

> 年份应该在 1920 年到当前年份的范围内

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T07:05:11.513

应用两个事件应该可以解决问题。
HTML：

```
 <input type="text" 
        onblur="yearValidation(this.value,event)" 
        onkeypress="yearValidation(this.value,event)"
    > 
```

JS：

```
function yearValidation(year,ev) {

  var text = /^[0-9]+$/;
  if(ev.type=="blur" || year.length==4 && ev.keyCode!=8 && ev.keyCode!=46) {
    if (year != 0) {
        if ((year != "") && (!text.test(year))) {

            alert("Please Enter Numeric Values Only");
            return false;
        }

        if (year.length != 4) {
            alert("Year is not proper. Please check");
            return false;
        }
        var current_year=new Date().getFullYear();
        if((year < 1920) || (year > current_year))
            {
            alert("Year should be in range 1920 to current year");
            return false;
            }
        return true;
    } }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:23:01.130

猜是：

```
 if (year.length < 4) { 
```

不是

```
if (year.length != 4) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-15T15:27:15.410

或直接以表格形式

```
<input name="date_check" 
type="text" 
title="Date must be in this case:dd.mm.yy" 
pattern="^[0-9]{1,2}\.[0-9]{2}$" /> 
```

# ftp - 因为它不是 Windows FTP 服务器中的文件夹，所以无法列出其内容？

> ID：14229338
> 
> 赞同：1
> 
> 时间：2013-01-09T06:18:07.620
> 
> 标签：ftp, apache-commons-vfs

根目录为：/ftp/kathir，更改目录为：/ftp/kathir

当 FTP 服务器是 linux 时，这工作得很好。在 Windows 上同样不起作用。

我已配置 Guilt FTP 服务器以在本地测试 FTP 操作并授予所有权限。

有人可以帮助我可能是什么问题吗？是 FTP 服务器或 FTP 第三方工具的问题还是缺少任何配置？

我正在使用 Apache Commons VFS 库连接到 FTP 服务器。

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T18:32:59.960

免费 Guilt FTP 工具的问题，后来尝试了几个免费的 FTP 服务器，发现 War Daemon Manager 运行良好。感谢您的帮助。

# android - 从一页导航到另一页

> ID：14229342
> 
> 赞同：1
> 
> 时间：2013-01-09T06:18:18.417
> 
> 标签：android, android-manifest

我是 android 新手，这是我的第一个演示应用程序。我正在尝试从一页导航到另一页。但是我无法导航到另一个页面，我在可能的主 xml 文件中有一个按钮，并且在舔它时它正在移动到另一个 xml 下一页。我有 2 个 java 类：第一个 MianAcitvity，nextpagejava。2 xml：activity_main，下一页

我的代码：清单

```
 <activity
        android:name="com.example.androiddemo.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="nextpagejava" ></activity> 
```

MainActivity.java

```
package com.example.androiddemo;
import android.os.Bundle; 
import android.app.Activity; 
import android.content.Intent; 
import android.drm.DrmStore.Action;
 import android.view.Menu; 
import android.view.View; 
import android.view.View.OnClickListener; 
 import android.widget.Button;

     public class MainActivity extends Activity implements OnClickListener {

      @Override
      protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);

           Button bt = (Button)findViewById(R.id.bnt);
           bt.setOnClickListener(new View.OnClickListener() {

           @Override
            public void onClick(View v) {
              / / TODO Auto-generated method stub

           }
         }); 
         }

          @Override
          public boolean onCreateOptionsMenu(Menu menu) {
          // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
          return true;
         }

          @Override
          public void onClick(View v) {
          // TODO Auto-generated method stub
          switch(v.getId()){
          case R.id.bnt:
                 Intent in = new Intent(this, nextpagejava.class);
                 startActivity(in);
             break;

          }
          }
          } 
```

活动主文件.xml

```
 <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity" >

         <TextView 
        android:id="@+id/clicktxt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Click"        
        />

        <Button
        android:id="@+id/bnt"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="Click Me"
        /> 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:23:29.820

试试这样..

```
 Button button = (Button)findViewById(R.id.button);
        button.setOnClickListener(new OnClickListener() {

         public void onClick(View v) {
         Intent intent = new Intent(MainActivity.this,NextActivity.class);
         startActivity(intent);
         }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:27:33.187

在您的代码中删除以下代码

```
 bt.setOnClickListener(new View.OnClickListener() {

               @Override
                public void onClick(View v) {
                  / / TODO Auto-generated method stub

               }
             }); `

and put  bt.setOnClickListener(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:22:23.457

检查这个从你的java类编辑的代码。

```
package com.example.androiddemo;
import android.os.Bundle; 
import android.app.Activity; 
import android.content.Intent; 
import android.drm.DrmStore.Action;
import android.view.Menu; 
import android.view.View; 
import android.view.View.OnClickListener; 
import android.widget.Button;

 public class MainActivity extends Activity implements OnClickListener {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

       Button bt = (Button)findViewById(R.id.bnt);
       bt.setOnClickListener(this); 
     }

      @Override
      public boolean onCreateOptionsMenu(Menu menu) {
      // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
      return true;
     }

      @Override
      public void onClick(View v) {
      // TODO Auto-generated method stub
      switch(v.getId()){
      case R.id.bnt:
             Intent in = new Intent(MainActivity.this, nextpagejava.class);
             startActivity(in);
         break;

      }
      }
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:23:05.187

我看到两个问题：

1.  `nextpagejava`必须在清单中使用完整的类名（包括包）声明活动
2.  `OnClickListener`您在按钮上附加了一个空白。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T06:25:51.110

您的代码中有两个问题。

**第一个**- 在 android 清单文件中写入带有包名的活动名称，如下所示。

```
<activity android:name="com.example.androiddemo.nextpagejava" ></activity> 
```

**第二个**- 在 MainActivity.java 文件中使用下面的代码并删除。

```
 bt.setOnClickListener(this); 
```

**删除这个**

```
 bt.setOnClickListener(new View.OnClickListener() {

           @Override
            public void onClick(View v) {
              / / TODO Auto-generated method stub

           }
         }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T06:27:59.590

给定后不要实现 onClickListener

```
 bt.setOnClickListener(new View.OnClickListener() {

           @Override
            public void onClick(View v) {
              / / TODO Auto-generated method stub

           }
         }); 
```

并删除其中一个 onClick() 方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T06:39:41.043

从一项活动转移到另一项活动所需要做的就是以下

```
startActivity(new Intent(MainAcitvity.this, NextPage.class)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-24T04:10:12.973

在主活动文件中使用下面的代码：

bt.setOnClickListener(this);

# phpexcel - 为什么我在尝试通过 PHP 读取 excel 文件时收到“无效或未初始化的 Zip 对象”错误？

> ID：14229346
> 
> 赞同：11
> 
> 时间：2013-01-09T06:18:36.537
> 
> 标签：phpexcel

我想了解如何通过 PHP**读取excel 文件。**我的具体用例是在 Yii 中使用[PHPExcel](http://phpexcel.codeplex.com/)。

我学习了许多教程，但我总是被困在一个点：“ZipArchive::getFromName(): Invalid or unialized Zip object”。我添加了扩展程序、加载程序等，但似乎没有任何效果。有没有办法解决？还是我需要另一个图书馆？这是我的控制器中的代码。

```
Yii::import('application.vendors.PHPExcel.PHPExcel',true);
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
$objPHPExcel = $objReader->load('c:\cctv.xls'); //$file --> your filepath and filename
$objWorksheet = $objPHPExcel->getActiveSheet();
$highestRow = $objWorksheet->getHighestRow(); // e.g. 10
$highestColumn = $objWorksheet->getHighestColumn(); // e.g 'F'
$highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn); // e.g. 5
echo '<table>' . "\n";
for ($row = 2; $row <= $highestRow; ++$row) {
  echo '<tr>' . "\n";
  for ($col = 0; $col <= $highestColumnIndex; ++$col) {
    echo '<td>' . $objWorksheet->getCellByColumnAndRow($col, $row)->getValue() . '</td>' . "\n";
  }
  echo '</tr>' . "\n";
}
echo '</table>' . "\n"; 
```

这是详细的错误：

C:\wamp\www\example\protected\vendors\PHPExcel\PHPExcel\Reader\Excel2007.php(272)

```
}
 public function _getFromZipArchive(ZipArchive $archive, $fileName = '')
 {
     // Root-relative paths
     if (strpos($fileName, '//') !== false)
     {
         $fileName = substr($fileName, strpos($fileName, '//') + 1);
     }
     $fileName = PHPExcel_Shared_File::realpath($fileName);

     // Apache POI fixes
     $contents = $archive->getFromName($fileName);
     if ($contents === false)
     {
         $contents = $archive->getFromName(substr($fileName, 1));
     }

     /*
     if (strpos($contents, '<?xml') !== false && strpos($contents, '<?xml') !== 0)
     {
         $contents = substr($contents, strpos($contents, '<?xml'));
     }
     var_dump($fileName);
     var_dump($contents); 
```

堆栈跟踪 C:\wamp\www\trunk\protected\vendors\PHPExcel\PHPExcel\Reader\Excel2007.php(272): ZipArchive->getFromName("_rels/.rels")

```
$fileName = substr($fileName, strpos($fileName, '//') + 1);
}
$fileName = PHPExcel_Shared_File::realpath($fileName);
// Apache POI fixes
$contents = $archive->getFromName($fileName);
if ($contents === false)
{
    $contents = $archive->getFromName(substr($fileName, 1));
} 
```

C:\wamp\www\example\protected\vendors\PHPExcel\PHPExcel\Reader\Excel2007.php(312): PHPExcel_Reader_Excel2007->_getFromZipArchive(ZipArchive, "_rels/.rels")

```
$excel->removeCellXfByIndex(0); // remove the default style
     }
     $zip = new ZipArchive;
     $zip->open($pFilename);

     $rels = simplexml_load_string($this->_getFromZipArchive($zip, "_rels/.rels")); //~http://schemas.openxmlformats.org/package/2006/relationships");
     foreach ($rels->Relationship as $rel) {
         switch ($rel["Type"]) {
             case "http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties":
                 $xmlCore = simplexml_load_string($this->_getFromZipArchive($zip, "{$rel['Target']}"));
                 if (is_object($xmlCore)) { 
```

C:\wamp\www\example\protected\controllers\AdminController.php(58): PHPExcel_Reader_Excel2007->load("c:\cctv.xls")

```
public function actionCreateSource() {
Yii::import('application.vendors.PHPExcel.PHPExcel',true);
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
$objPHPExcel = $objReader->load('c:\cctv.xls'); //$file --> your filepath and filename
$objWorksheet = $objPHPExcel->getActiveSheet();
$highestRow = $objWorksheet->getHighestRow(); // e.g. 10
$highestColumn = $objWorksheet->getHighestColumn(); // e.g 'F'
$highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn); // e.g. 5
echo '<table>' . "\n"; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-09T21:32:51.270

看起来您将 PHPExcel 设置为明确使用 2007 格式，但您正在尝试打开 XLS 文件。虽然我不能 100% 确定，但我猜测 zip 错误是因为它正在尝试解压缩 XLS 文件，并且由于它没有被压缩，所以它会失败。

php zip 扩展似乎正在工作，因为错误来自扩展 - 无效或未初始化的 Zip 对象。我的猜测是你得到了一个无效的 Zip 对象，因为你没有处理一个 zip 文件。

如果您尝试打开 XLS 文件，您可能需要：

```
$objReader = PHPExcel_IOFactory::createReader('Excel5'); 
```

或者，您可以删除显式模式，并仅依赖自动文件类型解析，例如：

```
$objPHPExcel = PHPExcel_IOFactory::load("c:\cctv.xls");  // Remove the createReader line before this 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-22T14:23:10.440

我有相同的错误消息，但结果是文件权限问题（如此处建议：[PHPExcel Warning: ZipArchive::getFromName(): Invalid or unitialized Zip object in](https://stackoverflow.com/questions/20302772/phpexcel-warning-ziparchivegetfromname-invalid-or-unitialized-zip-object-i)）。

Excel文件快速`chmod 644`修复它。

# asp.net-mvc - ASP.net 收到警告-母版页名称无效，因为名称母版页不存在

> ID：14229355
> 
> 赞同：1
> 
> 时间：2013-01-09T06:19:43.020
> 
> 标签：asp.net-mvc, windows-8, visual-studio-2012

我正在使用 Visual Studio 2012。我正在尝试创建一个视图 (asp.net)，但出现以下错误；

```
View Name: Index
View Engine : ASPX(C#)
create a strongly typed view [checked]
I have selected the model class
Scaffold template : List
Use a layout or master page: ~/Views/Shared/Site.Master
ContentPaceholder Id : content 
```

我得到的错误/警告

> 母版页名称无效，因为名称母版页不存在。

我该如何解决这个问题？

我发现了一个类似的问题，但我不明白接受的解决方案。[是否可以使用 ASPX .Master 页面进行 Razor 视图？](https://stackoverflow.com/questions/3479094/is-razor-view-with-aspx-master-page-possible)

注意：这是我创建的 MVC 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T10:48:37.983

我刚才有同样的问题。将母版页移动到视图文件夹中的共享文件夹后，警告消失了。

# java - 防止 Spite 动画与 openGL ES 中的背景一起滚动

> ID：14229357
> 
> 赞同：0
> 
> 时间：2013-01-09T06:19:58.330
> 
> 标签：java, android, opengl-es, sprite, game-engine

在使用这里描述的无尽道路算法之后，我还实现了墙壁的滚动。我有站在屏幕中央的人的步行动画。

我做了什么：后台滚动是根据无尽路算法实现的

有什么问题？男人的影像也像无尽的道路一样滚动着。

我想要什么：人的动画不应该滚动，但背景应该滚动。

我尝试使用方法在openglES中玩矩阵......“gl.glMatrixMode（GL10.GL_TEXTURE）”但结果是背景滚动停止但动画成功。

我知道我在某个地方错了，但我无法找到我的错误。

这是我的代码：

```
public class GLSquare {

FloatBuffer fVertexBuffer, mTextureBuffer;
ByteBuffer mColorBuff;
ByteBuffer mIndexBuff;
int[] textures = new int[1];
public boolean useMipMapping = true;
float _numTextures = 2;
float  incrementTex;
private float _acceleration;
long startTime;
float vertices [] = {
        -2.0f,2.0f,0.0f,            //byte index 0
         2.0f, 2.0f,0.0f,           //byte index 1
         -2.0f, -2.0f,0.0f,         //byte index 2
         2.0f,-2.0f,0.0f,           //byte index 3

    };                  

    float textureCoord[] = {

            0.0f,incrementTex,
            1.0f,incrementTex,
            0.0f,_numTextures+incrementTex,
            1.0f,_numTextures+incrementTex

    };

byte indices[] = {0, 1, 2,
        1, 2, 3 };

public GLSquare() {

    // TODO Auto-generated constructor stub     
    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(vertices.length * 4); // 4 vertices, 3 co-ordinates(x,y and z) 4 for converting in float
    byteBuffer.order(ByteOrder.nativeOrder());
    fVertexBuffer = byteBuffer.asFloatBuffer();
    fVertexBuffer.put(vertices);
    fVertexBuffer.position(0);

    ByteBuffer byteBuffer2 = ByteBuffer.allocateDirect(textureCoord.length * 4);
    byteBuffer2.order(ByteOrder.nativeOrder());
    mTextureBuffer =  byteBuffer2.asFloatBuffer();
    Log.i("texture", "tex corrrrd " + String.valueOf(textureCoord));
    mTextureBuffer.put(textureCoord);
    mTextureBuffer.position(0);

    startTime = System.currentTimeMillis();
}

public void draw(GL10 gl){
    gl.glFrontFace(GL11.GL_CW);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(3,GL10.GL_FLOAT, 0, fVertexBuffer);

    gl.glEnable(GL10.GL_TEXTURE_2D);

    /** for the repetition of road.*/ 
_acceleration += -0.005f * (float)System.currentTimeMillis()-startTime;            
    _acceleration = Math.max(_acceleration, 0.002f);
    gl.glMatrixMode(GL10.GL_TEXTURE);
    gl.glTranslatef(0, _acceleration, 0);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    incrementTex -= _acceleration;

    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]); //4
    gl.glTexCoordPointer(2, GL10.GL_FLOAT,0, mTextureBuffer); //5
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4); //7

    gl.glFrontFace(GL11.GL_CCW);

    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

}

public void createSquareTexture(GL10 gl, Context context, int resource)
{
    Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resource);
    gl.glGenTextures(1, textures, 0);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_REPEAT, GL10.GL_CLAMP_TO_EDGE);

    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

    bitmap.recycle();   
}

  } 
```

以下是渲染类中使用的方法...

```
 TextureRegion keyFrame;
public void present(float deltaTime) {

    GL10 gl = glGraphics.getGL();

    gl.glClearColor(0f, 0.2f, 0.2f, 1.0f);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    loadTheWalls(gl);

    guiCamera.setViewportAndMatrices();

    gl.glEnable(GL10.GL_TEXTURE_2D);

    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

    batcher.beginBatch(texture);
            keyFrame = straightWalk.getKeyFrame(stickMan.straightWalkTime, Animation.ANIMATION_LOOPING);
      drawTheManMethod();
    batcher.endBatch();

}

public void loadTheWalls(GL10 gl){
    /** 
     * 
     * Code for the back scrolling of roads and walls
     * Three squares are taken and the textures are repeated on the respective square.
     * Only two textures are taken here, One for the wall and other for the road.
     * Wall textures are rotated accordingly ap per usage.
     * 
     * */       
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluPerspective(gl, 67, glGraphics.getWidth()
                    / (float) glGraphics.getHeight(), 1f, 100f);

            gl.glMatrixMode(GL10.GL_MODELVIEW);
            gl.glLoadIdentity();
            gl.glEnable(GL10.GL_DEPTH_TEST);

    /**Square used as a road*/
      gl.glPushMatrix();
      gl.glLoadIdentity();
      gl.glTranslatef(0.0f, -1.0f, -4.0f); // Translate to wallpos and into the screen ( NEW )
      gl.glRotatef(-80, 1, 0, 0);
      mSquare2.draw(gl);                   // Draw Square ( NEW )
      gl.glPopMatrix();

      /**Square used as a left wall*/
      gl.glPushMatrix();
      gl.glLoadIdentity();
      gl.glTranslatef(-2.0f, 0.0f, -4.0f); // Translate to wallpos and into the screen ( NEW )
      gl.glRotatef(-90, 0, 1, 0);
      gl.glRotatef(90, 0, 0, 1);
      mSquare3.draw(gl);                   // Draw Square ( NEW )
      gl.glPopMatrix();

      /**Square used as a right wall*/
      gl.glPushMatrix();
      gl.glLoadIdentity();
      gl.glTranslatef(1.8f, 0.0f, -4.0f); // Translate to wallpos and into the screen ( NEW )
      gl.glRotatef(-85, 0, 1, 0);
      gl.glRotatef(90, 0, 0, 1);
      mSquare1.draw(gl);                   // Draw Square ( NEW )
      gl.glPopMatrix();

}

public void pause() {

}

public void resume() {
    GL10 gl = glGraphics.getGL();

    texture = new Texture(((GLGame)game), "twocharacter.png");

    straightWalk = new Animation(0.2f, 
            new TextureRegion(texture, 0, 96, 96, 96),
            new TextureRegion(texture, 96, 96, 96, 96),
            new TextureRegion(texture, 96*2, 96, 96, 96),
            new TextureRegion(texture, 96*3, 96, 96, 96),
            new TextureRegion(texture, 96*4, 96, 96, 96),
            new TextureRegion(texture, 96*5, 96, 96, 96),
            new TextureRegion(texture, 96*6, 96, 96, 96),
            new TextureRegion(texture, 96*7, 96, 96, 96)
                );

    int resId2 = R.drawable.buildngs;
      mSquare1.createSquareTexture(gl, getBaseContext(), resId2);

      int resId3 = R.drawable.buildngs;
      mSquare3.createSquareTexture(gl, getBaseContext(), resId3);

      int resId4 = R.drawable.path;
      mSquare2.createSquareTexture(gl, getApplication(), resId4);
} 
```

以下是图片以便更好地理解。 ![第一部分](../Images/b6cad06bb41de7554933aed6ea44919b.png) ![第二部分](../Images/f4e21cf2ec725fe950aff27ac8713e8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:39:21.767

在 GLSquare 中创建一个名为 texturePos 的字段。

```
private float texturePos = 0.0f; 
```

用这个替换你的加速部分：

```
/** for the repetition of road.*/ 
_acceleration += -0.005f * (float)System.currentTimeMillis()-startTime;            
_acceleration = Math.max(_acceleration, 0.002f);
texturePos += acceleration;
gl.glMatrixMode(GL10.GL_TEXTURE);
gl.glPushMatrix();
gl.glTranslatef(0, texturePos, 0);
gl.glMatrixMode(GL10.GL_MODELVIEW);
incrementTex -= _acceleration; 
```

请注意，我们在通过 texturePos 而不是 _acceleration 进行平移之前将当前矩阵推入堆栈，并且 texturePos 也通过 _acceleration 递增。

然后在 draw 方法的末尾添加以下内容：

```
gl.glMatrixMode(GL10.GL_TEXTURE);
gl.glPopMatrix();
gl.glMatrixMode(GL10.GL_MODELVIEW); 
```

所以我们将旧的纹理矩阵从堆栈中弹出，使其恢复正常。

* * *

或者你也可以打电话

```
gl.glMatrixMode(GL10.GL_TEXTURE);
gl.glLoadIdentity(); 
```

在画你的男人之前，但第一种方法更好，因为它适用于更多情况。

# c++ - 带有“REGCLS_SINGLEUSE”的 RegisterClassObjects 不会为每个 CoCreateInstanceEx 调用启动多个进程（out-proc 服务器）

> ID：14229358
> 
> 赞同：1
> 
> 时间：2013-01-09T06:20:00.910
> 
> 标签：c++, com, atl, dcom

我正在使用 Visual Studio 2008 和 Win7 64 位我想为每个客户端请求（CoCreateInstanceEx）启动一个新进程（out-proc 服务器）。我遵循的步骤是

覆盖 PreMessageLoop。在 PreMessageLoop 函数中，我将我的类对象注册为“REGCLS_SINGLEUSE”。RegisterClassObjects（CLSCTX_LOCAL_SERVER | CLSCTX_REMOTE_SERVER，REGCLS_SINGLEUSE）；

因此，对于每个 CoCreateInstanceEx 调用，都应该启动一个新的服务器进程。但它只为以下代码片段创建了一个 exe。

```
for(int i=0; i < 5; i++)
    {
// COSERVERINFO and MULTI_QI creation and initialization is done here.
hr = ::CoCreateInstanceEx(__uuidof(MyClass), NULL, CLSCTX_SERVER, &oServerInfo, 1, multi_qi);
_ASSERTE( SUCCEEDED(hr) );
} 
```

# orbeon - Orbeon 中的 URL 重写

> ID：14229359
> 
> 赞同：0
> 
> 时间：2013-01-09T06:20:04.163
> 
> 标签：orbeon

我有jsp页面，用户点击提交按钮，链接转到Orbeon新数据表单，用户将提交数据并重定向到JSP页面。

但是当用户单击提交按钮时，应该隐藏 orbeon url 的实际 url，以便用户不知道 orbeon url 新数据表单链接。你能告诉我们这是如何实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:42:01.450

我想您正在使用该`workflow-send`按钮将用户发送回您的 JSP。当用户点击表单中对应的*提交*按钮时：

1.  浏览器对 Orbeon Forms 进行 POST。
2.  Orbeon Forms 使用用户填写的 XML 数据对您的 JSP 进行 POST。
3.  您的 JSP 以一个页面响应，该页面转到 Orbeon Forms。
4.  Orbeon Forms 将响应汇集到浏览器。

这解释了为什么 URL 不会更改，并且用户会看到 Orbeon URL 以及由您的 JSP 生成的内容。Orbeon Forms 无法让浏览器直接对您的页面进行 POST 操作，原因有很多，包括浏览器无法访问 XML（这样做会带来安全风险）以及浏览器无法访问 XML 的事实知道如何发布 XML（XHR 请求除外）。

如果您真的不希望用户看到带有 Orbeon URL 的页面，您的 JSP 需要使用转发（客户端重定向）进行响应，这会将浏览器发送到可能的另一个 JSP，进而生成您想要的实际 HTML向用户展示。

# c++ - 具有多个文件的命名空间

> ID：14229362
> 
> 赞同：3
> 
> 时间：2013-01-09T06:20:08.380
> 
> 标签：c++, namespaces

FileThree.h 内部

```
#ifndef FILETHREE
#define FILETHREE
namespace blue{}
class Filethree
{
public:
    Filethree(void);
    ~Filethree(void);
};
#endif 
```

FileThree.cpp 内部

```
#include "Filethree.h"
#include<iostream>
using namespace std ;
namespace blue{
     void blueprint(int nVar){
         cout<<"red::"<<nVar<<endl;
     }
}
Filethree::Filethree(void)
{
}

Filethree::~Filethree(void)
{
} 
```

FileFour.h 内部

```
#ifndef FILEFOUR
#define FILEFOUR
namespace red{}
class FileFour
{
public:
    FileFour(void);
    ~FileFour(void);
};
#endif 
```

FileFour.cpp 内部

```
#include "FileFour.h"
#include<iostream>
using namespace std; 
 namespace red{
     void redprint(double nVar){
         cout<<"red::"<<nVar<<endl;
     }
}
FileFour::FileFour(void)
{
}

FileFour::~FileFour(void)
{
} 
```

main.cpp 内部

```
#include "FileFour.h"
 #include "Filethree.h"
using namespace red ;
using namespace blue ;

int main()
{
    blueprint(12);
return 0;
} 
```

当我编译上面的文件时，它给了我以下错误。

```
 error C3861: 'blueprint': identifier not found 
```

谁能告诉我为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T06:23:27.847

当函数没有在头文件中声明时，编译器找不到函数。您需要在 FileThree.h中声明`blueprint`函数`namespace blue`

文件三.h：

```
namespace blue{
    void blueprint(int nVar);
} 
```

功能相同`redprint`，需要在FileFour.h里面声明`namespace red`

文件四.h

```
namespace red{
   void redprint(double nVar);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:17:15.520

FileFour.h 内部

```
#ifndef FILEFOUR
#define FILEFOUR
namespace red{
     void redprint(int nVar);        
}
class FileFour
{
public:
    FileFour(void);
    ~FileFour(void);
};
#endif 
```

FileFour.cpp 内部

```
#include "FileFour.h"
#include<iostream>
using namespace std; 
void red::redprint(int nVar)
{
    cout<<"red"<<nVar<<endl;
}
FileFour::FileFour(void)
{
}

FileFour::~FileFour(void)
{
} 
```

Filethree.h 内部

```
#ifndef FILETHREE
#define FILETHREE
namespace blue{
     void blueprint(int nVar);       
}
class Filethree
{
public:
    Filethree(void);
    ~Filethree(void);
};
#endif 
```

Filethree.cpp 内部

```
#include "Filethree.h"
#include<iostream>
using namespace std ;
void blue::blueprint(int nVar)
{
    cout<<"blue"<<nVar<<endl;
}
Filethree::Filethree(void)
{
}

Filethree::~Filethree(void)
{
} 
```

main.cpp 内部

```
#include <iostream>
using namespace std;
#include "FileFour.h"
 #include "Filethree.h"
using namespace blue ;
int main()
{
    blueprint(12);
return 0;
} 
```

定义应在 cpp 文件中，作为头文件中的声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T16:20:48.420

> 当您将代码分成多个文件时，您必须在头文件和源文件中使用命名空间。

```
add.h

#ifndef ADD_H
#define ADD_H

namespace basicMath
{
    // function add() is part of namespace basicMath
    int add(int x, int y);
}

#endif
add.cpp

#include "add.h"

namespace basicMath
{
    // define the function add()
    int add(int x, int y)
    {
        return x + y;
    }
}
main.cpp

#include "add.h" // for basicMath::add()

#include <iostream>

int main()
{
    std::cout << basicMath::add(4, 3) << '\n';

    return 0;
} 
```

来源：[https ://www.learncpp.com/cpp-tutorial/user-defined-namespaces/comment-page-4/#comment-464049](https://www.learncpp.com/cpp-tutorial/user-defined-namespaces/comment-page-4/#comment-464049)

# python - python和pygame图像移动

> ID：14229363
> 
> 赞同：1
> 
> 时间：2013-01-09T06:20:15.030
> 
> 标签：python, animation, pygame

好的，所以我的代码在下面，现在我是 pygame 的新手，并试图弄清楚如何在屏幕上移动图像。根据我对 pygame 的了解，以下代码应该将图像向上移动（目前唯一可能的移动）。但是，当我向上推时，图像不会移动。Python 正在识别我正在向上推，因为它打印在系统托盘中，但是没有任何动作，有人可以帮忙吗？

```
import pygame, sys
from pygame.locals import *

FPS = 30

WIN_WIDTH = 800
WIN_HEIGHT = 600
HALF_WIDTH = int(WIN_WIDTH / 2)
HALF_HEIGHT = int(WIN_HEIGHT / 2)

COLOR = (255, 0, 255)
IMAGE = pygame.image.load('squirrel.png')
STARTSIZE = 25

LEFT = 'left'

def main():
    pygame.init()
    FPS_CLOCK = pygame.time.Clock()
    movement = 1

    moveUp = False

    DISPLAY_SURFACE = pygame.display.set_mode((WIN_WIDTH, WIN_HEIGHT))

    while True:
        DISPLAY_SURFACE.fill(COLOR)

        playerObj = {'surface': pygame.transform.scale(IMAGE, (STARTSIZE, STARTSIZE)),
                     'facing': LEFT,
                     'size': STARTSIZE,
                     'x': HALF_WIDTH,
                     'y': HALF_HEIGHT}

        playerObj['rect'] = pygame.Rect( (playerObj['x'], playerObj['y'], playerObj['size'], playerObj['size']) )
        DISPLAY_SURFACE.blit(playerObj['surface'], playerObj['rect'])

        for event in pygame.event.get():

            if event.type == KEYDOWN:
                if event.key == K_UP:
                    moveUp = True

            if event.type == KEYUP:
                if event.key == K_UP:
                    moveUp = False

            elif event.type == QUIT:
                pygame.quit()
                sys.exit()

        if moveUp:
            playerObj['y'] += movement
            print("moving up")

        else:
            print('stopped')

        pygame.display.update()
        FPS_CLOCK.tick(FPS)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:53:45.607

每次遍历 while 循环时，您都会创建一个新的 playerObj，因此您不会看到它移动（因为它每次都将它的 'y' 值设置为 HALF_HEIGHT）。将 playerObj 定义移出 while 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:07:45.723

您必须在进入 while 循环之前创建 playerObj，然后`DISPLAY_SURFACE`每次只将其绘制到。此外，增加`y`字典的键也无济于事，您必须修改它`rect`。一个微创的解决方案是：

```
import pygame, sys
from pygame.locals import *

FPS = 30

WIN_WIDTH = 800
WIN_HEIGHT = 600
HALF_WIDTH = int(WIN_WIDTH / 2)
HALF_HEIGHT = int(WIN_HEIGHT / 2)

COLOR = (255, 0, 255)
IMAGE = pygame.image.load('squirrel.png')
STARTSIZE = 25

LEFT = 'left'

def main():
    pygame.init()
    FPS_CLOCK = pygame.time.Clock()
    movement = 1

    moveUp = False

    DISPLAY_SURFACE = pygame.display.set_mode((WIN_WIDTH, WIN_HEIGHT))

    playerObj = {'surface': pygame.transform.scale(IMAGE, (STARTSIZE, STARTSIZE)),
                     'facing': LEFT,
                     'size': STARTSIZE,
                     'x': HALF_WIDTH,
                     'y': HALF_HEIGHT}

    playerObj['rect'] = pygame.Rect( (playerObj['x'], playerObj['y'], playerObj['size'], playerObj['size']) )

    while True:
        DISPLAY_SURFACE.fill(COLOR)
        DISPLAY_SURFACE.blit(playerObj['surface'], playerObj['rect'])
        for event in pygame.event.get():

            if event.type == KEYDOWN:
                if event.key == K_UP:
                    moveUp = True

            if event.type == KEYUP:
                if event.key == K_UP:
                    moveUp = False

            elif event.type == QUIT:
                pygame.quit()
                sys.exit()

        if moveUp:
            playerObj['rect'].y -= movement
            print("moving up")

        else:
            print('stopped')

        pygame.display.update()
        FPS_CLOCK.tick(FPS)

if __name__ == '__main__':
    main() 
```

有效，我自己试过。但是你应该重构你的代码，不需要在你的字典中携带初始的 x、y 等值。

**编辑** 随着所有四个方向的运动，这将是：

```
import pygame, sys
from pygame.locals import *

FPS = 30

WIN_WIDTH = 800
WIN_HEIGHT = 600
HALF_WIDTH = int(WIN_WIDTH / 2)
HALF_HEIGHT = int(WIN_HEIGHT / 2)

COLOR = (255, 0, 255)
IMAGE = pygame.image.load('squirrel.png')
STARTSIZE = 25

LEFT = 'left'

def move_rect(rect, key, distance):
    if key == K_UP: 
        rect.y-=distance
    elif key == K_DOWN: 
        rect.y+=distance
    elif key == K_LEFT: 
        rect.x-=distance
    elif key == K_RIGHT: 
        rect.x+=distance

def main():
    pygame.init()
    FPS_CLOCK = pygame.time.Clock()
    movement = 1

    key2mvmt = {K_UP:False, K_DOWN:False, K_LEFT:False, K_RIGHT:False}

    DISPLAY_SURFACE = pygame.display.set_mode((WIN_WIDTH, WIN_HEIGHT))

    playerObj = {'surface': pygame.transform.scale(IMAGE, (STARTSIZE, STARTSIZE)),
                     'facing': LEFT,
                     'size': STARTSIZE,
                     'x': HALF_WIDTH,
                     'y': HALF_HEIGHT}

    playerObj['rect'] = pygame.Rect( (playerObj['x'], playerObj['y'], playerObj['size'], playerObj['size']) )

    while True:
        DISPLAY_SURFACE.fill(COLOR)
        DISPLAY_SURFACE.blit(playerObj['surface'], playerObj['rect'])
        for event in pygame.event.get():

            if event.type == KEYDOWN:
                if key2mvmt.has_key(event.key):
                    key2mvmt[event.key]= True

            if event.type == KEYUP:
                if key2mvmt.has_key(event.key):
                    key2mvmt[event.key]= False

            elif event.type == QUIT:
                pygame.quit()
                sys.exit()

        for k in key2mvmt.keys():
            if key2mvmt[k]:
                move_rect(playerObj['rect'], k, movement)

        else:
            print('stopped')

        pygame.display.update()
        FPS_CLOCK.tick(FPS)

if __name__ == '__main__':
    main() 
```

# iphone - 计算给定宽度和字体大小的行数

> ID：14229365
> 
> 赞同：3
> 
> 时间：2013-01-09T06:20:28.870
> 
> 标签：iphone, ios, objective-c, xcode, ios6

先说一下我的需求吧

我已经`strings`存储在一个字符串变量中，比如说 str，

```
NSString *str=@"multiple strings"; 
```

接下来我想指定上面的字符串适合的宽度，比如 width=350 和 fontsize=16; 现在我如何知道给定宽度 = 350 和字体大小 = 15 的文本将占用多少行。（我的意思是行数）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:32:07.540

您可以使用`UIStringDrawing.h`. 当绘制到 350px 的约束宽度时，此方法将为您提供大小：

```
CGSize maximumSize = CGSizeMake(350, CGFLOAT_MAX);
UIFont *font = [UIFont systemFontOfSize:16];
CGSize size = [str sizeWithFont:font constrainedToSize:maximumSize lineBreakMode:NSLineBreakByWordWrapping]; 
```

在此示例中，`maximumSize`使用 a 的最大可能高度（实际上是无穷大）`CGFloat`和 350 像素的宽度。这实际上意味着“*通过将宽度限制为 350px 来给我这个文本的大小*”。

# javascript - 如何创建一个装饰最少的弹出窗口？

> ID：14229366
> 
> 赞同：2
> 
> 时间：2013-01-09T06:20:29.917
> 
> 标签：javascript, popupwindow

我想用最少的装饰打开一个弹出窗口。我尝试了以下代码：

```
<script>
newwindow =
      window.open('http://jquery.com','name',
        'height=300px,width=400px,scrollbars=no');
    if (window.focus) {newwindow.focus()}
</script> 
```

一些装饰品（菜单栏，滚动条，..）已经不见了。但是仍然存在一些装饰（标题栏，地址栏）。

如何去除所有的装饰品？我想要一个跨浏览器的解决方案。

# css - 为什么我的底部 .row 类包含前一个 .row 类中的所有内容？

> ID：14229371
> 
> 赞同：0
> 
> 时间：2013-01-09T06:20:54.597
> 
> 标签：css, html, wordpress

有问题的网站是[http://new.technoheads.org](http://new.technoheads.org)。

对于我的生活，我无法弄清楚为什么底部的 .row 类如此之大。Chrome 的 Inspector 会突出显示所有内容，包括之前 .row 类的所有内容。向该特定 div 添加背景颜色可以确认这一点。我可以将它移到它所在的 .page div 之外并将其放入它自己的位置，但我觉得我不应该这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:31:15.063

你需要清除你的浮动。将此添加到您的 CSS 中：

```
.group:before,
.group:after {
    content: "";
    display: table;
} 
.group:after {
    clear: both;
}
.group {
    zoom: 1; /* For IE 6/7 (trigger hasLayout) */
} 
```

（通过[CSS 技巧](http://css-tricks.com/snippets/css/clear-fix/)）

比将`group`类添加到您的`row`div 中。例如：

```
<div class="row group"> ... </div> 
```

此外，[您应该阅读这篇文章](http://css-tricks.com/all-about-floats/)以更好地了解浮点数。

# url - 将 http://www.mysite.com/mypage.asp 重写为 http://www.mysite.com/

> ID：14229373
> 
> 赞同：0
> 
> 时间：2013-01-09T06:21:17.250
> 
> 标签：url, iis-7, asp-classic, url-rewriting, rewrite

有没有办法将 http://www.mysite.com/mypage.asp 重写[为](http://www.mysite.com/mypage.asp)http://www.mysite.com/ [（](http://www.mysite.com/)即隐藏脚本名称）而不会导致重定向循环？我网站上的默认页面基于主机名进行重定向，换句话说，如果浏览器请求[http://www.site1.com](http://www.site1.com)，则正常的 index.asp 会加载，但是如果浏览器请求[http://www.site2 .com](http://www.site2.com)然后脚本重定向到[http://www.site2.com/layout.asp](http://www.site2.com/layout.asp)。我想要实现的是在仍然加载该页面的同时隐藏“layout.asp”部分......甚至可以通过 URL 重写来实现吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:38:26.530

默认.asp：

```
<%
<!-- #include file="mypage.asp" -->
%> 
```

# python - 在我的 stc.StyledTextCtrl 中插入一个空格，这样代码就不会那么接近行号

> ID：14229376
> 
> 赞同：0
> 
> 时间：2013-01-09T06:21:29.113
> 
> 标签：python, wxpython, scintilla

我正在尝试实现下划线位于第 1 行和第 5 行的空间，以在行号和代码之间提供一点填充，因此它看起来不会那么混乱。

我将如何实现这一目标？

![在此处输入图像描述](../Images/2bead6ed349cbab133dccc5c30c097d9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:37:54.657

使用[`.SetMarginLeft(width)`](http://wxpython.org/docs/api/wx.stc.StyledTextCtrl-class.html#SetMarginLeft). 例子：

```
import wx
import wx.stc as stc

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)

        self.text = stc.StyledTextCtrl(self.panel)
        self.text.SetWindowStyle(self.text.GetWindowStyle() | wx.DOUBLE_BORDER)
        self.text.StyleSetSpec(stc.STC_STYLE_DEFAULT, "size:15,face:Courier New")
        self.text.SetWrapMode(stc.STC_WRAP_WORD)
        self.text.SetMarginLeft(50)

        self.menu = wx.Menu()
        self.menu.Append(wx.ID_ABOUT, "&About", "Information about this program")
        self.menu_bar = wx.MenuBar()
        self.menu_bar.Append(self.menu, "&File")
        self.SetMenuBar(self.menu_bar)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.text, 1, wx.ALL | wx.EXPAND, 5)

        self.panel.SetSizerAndFit(self.sizer)

        self.text.Bind(stc.EVT_STC_CHANGE, self.OnChange)
        self.Show()

        self.text.SetText("Line!\n"*98)

    def OnChange(self, e):
        lines = self.text.GetLineCount()
        width = self.text.TextWidth(stc.STC_STYLE_LINENUMBER, str(lines)+" ")
        self.text.SetMarginWidth(0, width)

if __name__ == "__main__":
    app = wx.App(False)
    win = MainWindow(None)
    app.MainLoop() 
```

# linux - 什么时候应该使用 sed，什么时候应该使用 awk

> ID：14229377
> 
> 赞同：7
> 
> 时间：2013-01-09T06:21:29.013
> 
> 标签：linux, sed, awk

过去几天和在那之前，我一直在问关于`sed`和的问题`awk`。每次当我问 awk 问题时人们说使用 sed 并且当我问 sed 问题时人们说使用 awk 时，都会发生这种情况。

谁能给我一些关于我可以在哪里使用每一个的例子。

对我来说，`awk`习惯于演示和报告没有替换，并且`sed`用于需要替换的地方。

但是仍然有很多人给了我通过`awk`print commnad 完成替换的例子。

现在我真的很困惑它的用例是什么。

举个例子。认为

我有 C++ 中的源代码文件，我想`add`在特定模式之前添加一些代码。

我应该使用什么`sed`或`awk`。图案也可以跨越多行

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T10:13:36.963

评论中的链接非常有价值。我会根据我个人对 sed/awk 使用的感觉添加一些内容。

我强调，许多文本处理任务都可以由 sed 和 awk 完成。以下文字仅代表我个人感受。

*   如果我想做文本处理，并在不生成临时文件的情况下写回原始文件，sed 会赢。

*   我喜欢 sed 的地址，它可以大大缩短代码。例如`3,6{s/a/b/}`，`1~2{s/f/b/}`或`3~5{s/f/b/}`

*   如果您想将匹配的部分传递给外部命令/程序，awk 比 sed (Gnu sed) 更容易。如果您想玩得开心并尝试使用 sed，您可以玩一个游戏：匹配文本，并将部分（\1、\2 等）传递给不同的 sed。也就是sed嵌套。3次后，我迷路了...... :)

*   如果文本以某种方式基于“列”，在 99% 的情况下，awk 不会让您失望。

*   如果我想对多文件进行不同的文本处理，我会选择 awk。例如，`{001-003}.txt`不同的替代要求。

*   awk 将擅长多文件之间的类连接处理

*   如果逻辑需要一些结构，如 if-else、for 循环、while、数字计算等，我会选择 awk。尽管在许多情况下 sed 也可以完成这项工作。

*   sed 和 awk 都不支持 Perl Regex。这真遗憾。

*   所以基本上，我认为 awk 比 sed 更灵活、更直接。如果任务比较简单或者有著名的魔法 sed 解决方案（查看[http://sed.sourceforge.net/sed1line.txt](http://sed.sourceforge.net/sed1line.txt)有很多魔法单行），我会选择 sed。否则我会首先想到 awk 。

sed 和 awk 都是非常强大的文本处理工具，linux/unix box 中有很多文本处理工具，comm、cut、join、paste、sort、uniq……还有很多选项参数。我很懒，记不住所有的，只记得那些常用的。但如果我知道如何使用 awk、sed 和 grep。linux下可以完成90%的文本处理。如果 awk、sed 和 grep 不能胜任，我会转向编程语言。例如蟒蛇。

好吧，我不是 perl 人。

有什么我忘记了吗？

我的 2cents，希望它有帮助。

# ruby-on-rails - 阻止控制器范围内的所有路由

> ID：14229378
> 
> 赞同：0
> 
> 时间：2013-01-09T06:21:30.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在尝试访问用户登录的条件，如果他/她的帐户被停用，他/她应该被重定向回登录页面并显示一条消息我正在尝试这样的事情

```
def after_sign_in_path_for(resource)
 if resource.group.slug == 'a'
   @u = User.find_by_email(resource.email)
   if @u.member.state_id == "someid"
     '/logout'
     flash[:notice]= "My message."
   else
     a_root_path
   end
 elsif resource.group.slug == 'b'
   b_root_path
 elsif resource.group.slug == 'c'
   c_root_path
 else
   new_user_session_path
 end 
```

`end`

任何建议如何阻止用户登录并阻止该范围的所有其他路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:25:50.437

after_sign_in_path_for 方法的返回值应该是您要重定向到的 url。因此，您不需要自己调用 redirect_to。

```
if @u.member.state_id == "someid"
  flash[:notice]= "My message."
  '/logout'
else
  a_root_path
end 
```

（未测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:53:18.147

你为什么不注销用户。如下

```
def after_sign_in_path_for(resource)
 if resource.group.slug == 'a'
  @u = User.find_by_email(resource.email)
  if @u.member.state_id == "someid"
    sign_out resource
    '/users/sign_in' (or root_path based on your requirement)
    flash[:notice]= "My message."
  else
    a_root_path
  end
 elsif resource.group.slug == 'b'
  b_root_path
 elsif resource.group.slug == 'c'
  c_root_path
 else
  new_user_session_path
 end 
```

# android - 如何使用 GCM 向多个用户发送推送通知

> ID：14229379
> 
> 赞同：3
> 
> 时间：2013-01-09T06:21:41.720
> 
> 标签：android, .net, google-cloud-messaging

我关注了一些演示，它在我的手机上运行良好。但我有一些问题。注册 ID 对应用程序或用户来说是唯一的吗？如果它对用户来说是唯一的，那么如何在服务器（点网）中保存多个 regID。请给我一些指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T08:19:40.760

> 如果它对用户来说是唯一的，那么如何在服务器（点网）中保存多个 regID。请给我一些指导。

当设备向 GCM 服务器注册时，设备必须将该唯一 ID 发送到您的服务器，然后您保存该值以发送消息。

> 如何使用 GCM 向多个用户发送推送通知？

您使用格式创建消息。对于多个 ID，只需将**您的用户 ID 以数组对象的形式**`registration_ids`填写在key中即可

 **python中的示例：

```
ids=[]
query= // get all user record from database
for q in query:
    ids.append(q.registration_id)
// some code
jsonmessage=json.dumps({
    "registration_ids":ids,
    "data":{
        "message":message,
        "time":datetime.datetime.today().isoformat(),
        "sender":sender
     }
})
conn.send(jsonmessage) 
```

看起来像这样：

```
Content-Type:application/json
Authorization:key=AIzaSyB-1uEai2WiUapxCs2Q0GZYzPu7Udno5aA
{
  "registration_ids" : ["APA91bHun4MxP5egoKMwt2KZFBaFUH-1RYqx...", "second_id", "third_id"],
  "data" : {
    ...
  },
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:32:23.653

引用自[Android docs](http://developer.android.com/google/gcm/gcm.html#arch)， a`RegId`是：

> GCM 服务器发给 Android 应用程序的 ID，允许其接收消息。一旦 Android 应用程序获得了注册 ID，它就会将其发送到第 3 方应用程序服务器，该服务器使用它来识别已注册以接收给定 Android 应用程序消息的每个设备。换句话说，注册 ID 与运行在特定设备上的特定 Android 应用程序相关联。

所以 a`RegId`是特定于应用程序和用户的。

对于存储，您可以在 GCM 注册完成后发送 Post。使用谷歌提供的示例应用程序，你会得到一些线索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:29:06.647

是的，注册 ID 对于特定应用程序的特定用户是唯一的。您可以创建数据库并将它们全部存储

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:31:17.620

您可以一次向多达 1000 个用户发送多案例消息。请参阅 Google 的指南：

[http://developer.android.com/training/cloudsync/gcm.html](http://developer.android.com/training/cloudsync/gcm.html)

除此之外，您可以将所有注册用户组成一个数组，并一个接一个地向他们发送消息。**

# javascript - 在部分短代码中显示 javascript 值

> ID：14229381
> 
> 赞同：0
> 
> 时间：2013-01-09T06:21:59.047
> 
> 标签：javascript, wordpress

这是我需要在我的网站上运行的短代码（我正在使用来自 wp-types.com 的工具集）

```
[wpv-post-body id="3650"] 
```

我需要从我的 url 上的值替换 3650：new-ticket/?parent_lead_id=3788

所以我按照这个脚本可以从 URL 复制值

```
<script>
  function getParam( name )
{
 name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
 var regexS = "[\\?&]"+name+"=([^&#]*)";
 var regex = new RegExp( regexS );
 var results = regex.exec( window.location.href );
 if( results == null )
  return "";
else
 return results[1];
}

var frank_param = getParam( 'parent_lead_id' );
  document.write(frank_param)
</script> 
```

输出例如 3788

问题是，我不能将整个代码块放在短代码中，因为它不起作用。

由于不支持 php：我们不能只输出 . 我还可以使用哪些其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:14:48.390

我不明白...我只是制作了一个**执行 Javascript**并使用**PHP 向**JS 提供 URL 查询变量的短代码...

```
/**
 * Usage: [alert]
 */

add_shortcode( 'alert', 'alert_shortcode_so_14229381' );

function alert_shortcode_so_14229381( $atts, $content = null )
{   
    if( !isset( $_GET['msg'] ) )
        return;

    $alert = $_GET['msg'];
    $html = "<script>alert('{$alert}');</script>";
    return $html;
} 
```

![警报简码](../Images/e931e70ec1e043be4aceb09dad7a5ef1.png)

# javascript - 我无法在 acsx 页面中调用 javascript

> ID：14229399
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:23:17.267
> 
> 标签：javascript, asp.net

我想在 asp.net 的 acsx 页面中调用 javascript。我正在使用一个 if 条件并调用 javascript。但它不起作用？以下是我的代码

```
if (IsPostBack)
{
    if (diff <= 0)
    {
        Page.ClientScript.RegisterStartupScript(this.GetType(), "onload", "display();", true);
    }
} 
```

它不工作

我也试过 Response.write ，它不工作

任何人都可以告诉我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:35:59.813

你如何决定它是否工作？你有没有得到任何java脚本错误？

您应该检查浏览器中的视图源代码，并检查相应的脚本 ( `display();`) 是否已发出（接近源代码末尾）。如果是，那么显然引用的代码段已经工作了。问题可能是对应的函数定义`display`（

如果脚本 let 尚未发出，那么您需要检查您的条件是否正在执行 - 这可以使用 Visual Studio 中的服务器端调试 (F5) 轻松完成。如果`RegisterStartupScript`行正在执行并且您仍然没有在视图源中看到脚本，那么问题可能是您用于注册的脚本键 ( `"onload"`) 可能已经在其他地方的用户控件中使用 - 所以请尝试使用不同的键. 例如，

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "on-start-display", 
    "display();", true); 
```

# objective-c - 如何在ios中创建单选按钮

> ID：14229407
> 
> 赞同：0
> 
> 时间：2013-01-09T06:24:00.920
> 
> 标签：objective-c, json, ios5

我需要`radiobutton`从`json`下面给出的显示一个。任何人都可以建议我如何显示一个`radiobutton`具有多个选项的选项。选项也提供在`json`.

```
[{"cssClass":"radio","values":"Radio 1","fieldsize":"null","required":"undefined","prevalue":"undefined","autocaps":"none","fieldesc":" ","options":"Choice1,Choice2,Choice3,Choice,Choice"},{"cssClass":"radio","values":"Radio2","fieldsize":"null","required":"undefined","prevalue":"undefined","autocaps":"none","fieldesc":" ","options":"Choice3,Choice4,Choice5,Choice"},{"cssClass":"radio","values":"Radio3","fieldsize":"null","required":"undefined","prevalue":"undefined","autocaps":"none","fieldesc":" ","options":"Choice6,Choice7,Choice8,Choice"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:46:29.023

您可以拍摄两张图像（一张里面有点，一张没有点）。在某些 IBAction 方法中，实用地将这些图像提供给 UIControlstateselected 和 UIControlstateNormal 上的自定义按钮。

# ios - 是否可以使用虚拟货币购买月度保费账户？

> ID：14229408
> 
> 赞同：0
> 
> 时间：2013-01-09T06:24:01.613
> 
> 标签：ios, in-app-purchase

我想知道我们的 iOS 应用是否可以遵循这样的设计：

用户每取得一定成就，应用都会奖励一定数量的虚拟币；同时他们可以通过 IAP 购买硬币。

使用硬币（无论是通过奖励还是 IAP），用户可以升级到基于月度的高级帐户。

我的想法是虚拟币可以看作是消耗品，用户可以用它来换取一段时间的高级状态。不确定这是否与 Apple 的政策相冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:50:51.807

如果您设置自己的转换率，则可以。例如，您可以在应用内订阅 1000 枚硬币，价格为 0.99 美元或 0.89 欧元，或者……看看这个关于订阅的 WWDC 视频[https://developer.apple.com/videos/wwdc/2012/？编号=308](https://developer.apple.com/videos/wwdc/2012/?id=308)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:29:48.503

如果您要进行应用内购买，那么您不能使用虚拟硬币。我建议您联系 Apple 支持并从他们那里得到澄清。

# java - 使用ip地址和域名的区别

> ID：14229409
> 
> 赞同：0
> 
> 时间：2013-01-09T06:24:11.637
> 
> 标签：java, ip

java web应用程序中使用ip地址和域名有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:37:27.563

**什么是IP地址和域名：**

**IP 地址：** IP 地址是通过网络为每台计算机提供地址的一种方式。

**域名：**使用域名而不是 IP 地址，因为它更容易记住名称而不是人类的数字。

**在应用程序中使用 IP 地址时会出现什么问题：**

**-**由于各种原因，IP 可能会随着时间而改变，有时是由于技术原因，有时是由于组织内部或外部的政治原因。

**-**现在如果应用程序绑定了域名，那么就**不需要**将任何内容更改为应用程序代码，否则当我们使用IP地址时，它有点硬编码......这是一个不好的做法。

**你的问题：**

我认为您使用的 IP 地址和域名之间存在映射问题。您始终可以将`Ping`其用作检查这一点的可靠工具之一。

**首先使用域名 ping ：**

`ping www.google.com`

**然后使用 IP 地址 ping：**

`ping 173.194.38.134`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:27:11.090

尝试将此代码放入您的应用程序中，如果它没有打印出与预期相同的 IP 地址，则说明 DNS 有问题。

```
InetAddress sambapAddress = java.net.InetAddress.getByName("www.sambap.com");
String address = sambapAddress.getHostAddress();
System.out.println(address); 
```

# ruby-on-rails-3 - 时区应该存储为字符串还是整数偏移量？

> ID：14229411
> 
> 赞同：2
> 
> 时间：2013-01-09T06:24:24.523
> 
> 标签：ruby-on-rails-3, timezone

为了在 Rails 应用程序的数据库中存储用户的时区，存储数字偏移量（即 -8）或名称（太平洋时间（美国和加拿大））会更好吗？

存储名称可以让应用程序更好地处理 DST，但是如果将来 Rails 更新并且时区名称不同怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:49:58.873

您应该使用时区名称。不要担心时区名称会改变。他们不会改变。[您维护时区数据库](http://www.iana.org/time-zones)的人似乎坚定地承诺要保留向后兼容的名称（如果他们这样做的话）。例如，`America/New_York`沿途添加了新名称 like，但“旧”名称 like`US/Eastern`仍然有效。此外，时区定义支持不同时间规则不同的时区，因此即使一个时区的规则更新，过去日期的本地时间应该保持不变（除非更改规则以更正定义）。

存储数字偏移量与存储特定时间戳相结合是合适的，因为它允许与 UTC 进行简单且明确的转换，并且同一时区中不同日期的偏移量值无关紧要。

# java - UPnP 打印机设备发现

> ID：14229412
> 
> 赞同：0
> 
> 时间：2013-01-09T06:24:31.200
> 
> 标签：java, networking, network-programming, upnp, dlna

在一个项目中，我通过发送 ssdp 数据报包并接收 http url 发现了 UPnP 打印机设备。

使用这些 url，获得一个开放的连接，获得描述设备和服务细节的 xml 模式

这里我通过dom解析得到细节

现在我的问题是，我怎样才能找到 1\. 打印机的状态 2\. 打印机是否是双面打印机 3\. 它支持哪种纸张（横向/纵向以及尺寸）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:58:49.807

如果您已经获得服务详细信息，那么您应该能够理解和使用以下 UPnP 规范：[`PrintBasic`服务](http://upnp.org/specs/pntr/UPnP-pntr-PrintBasic-v1-Service.pdf)和[`PrintEnhanced`服务](http://upnp.org/specs/pntr/UPnP-pntr-PrintEnhanced-v1-Service.pdf)（如果您的打印机支持）。我建议在您的网络中使用一些服务发现工具，例如[Intel UPnP Developer Suite](http://opentools.homeip.net/dev-tools-for-upnp)中的 DeviceSpy 。您将了解您的打印机提供了哪些信息，以及它是否可以作为*状态变量*访问（可能是事件），或者您需要*对服务函数执行 RPC*来获取它。给出关于两者之间有什么区别以及如何获得它们的具体方法超出了简单的 SO 答案的范围。您可以从阅读和理解[UPnP 设备架构文档开始](http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.0.pdf). 在 DeviceSpy 中四处寻找并尝试调用事物并查看结果也非常有帮助。

快速浏览一下规格（我更喜欢媒体服务）表明您应该擅长`PrintBasic`状态（查找`PrinterState`/ `PrinterStateReasons`）和纸张尺寸（查找`MediaSize`/ `MediaType`）。我找不到双工，它可能隐藏在其他名称下（也许`Sides`？）。我发现这些很可能是当前工作的单值变量。然后可能可以使用不同的名称访问适用的值枚举，或者您需要执行 RPC 来获取它。我不会在这里取代你的研发 :-)

**旁注**：通过打开 HTTP 连接和解析 DOM 自己做这一切是不必要的乏味（除非你这样做是为了纯粹的乐趣）。集成其中一个成熟的现成库，如 Cling。要正确使用 UPnP，除了阅读简单的 DOM 之外，您还需要很多复杂的东西。就像监听事件订阅和做 SOAP RPC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:31:14.203

也许[这](http://examples.javacodegeeks.com/desktop-java/print/discover-print-services/)会对你有所帮助。

您需要从打印机服务中获取属性集以了解打印机的详细信息。

# unix - Unix：将多行文件变成单行

> ID：14229414
> 
> 赞同：1
> 
> 时间：2013-01-09T06:24:38.010
> 
> 标签：unix

在 Unix 中将多行文件转换为单行文件的最简单命令是什么？

文件中的样本数据是

```
SELECT * FROM TABLE1 t1
   JOIN TABLE2 t2 ON (t1.ID = t2.ID)
   WHERE t1.ID = 123 
```

所需的输出是

```
SELECT * FROM TABLE1 t1 JOIN TABLE2 t2 ON (t1.ID = t2.ID) WHERE t1.ID = 123 
```

我试过使用：

```
/bin/sed '{:q;N;s/  / /g;s/\n//g;t q}' $1 
```

但这并不成功。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:44:36.807

尝试`sed`像这样使用：

```
sed ':a; N; $!ba; s/\n\s*/ /g' file 
```

或者`awk`像这样使用：

```
awk '{ $1 = $1 }1' RS= file 
```

结果：

```
SELECT * FROM TABLE1 t1 JOIN TABLE2 t2 ON (t1.ID = t2.ID) WHERE t1.ID = 123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:53:05.937

使用 Perl：

```
perl -p -e'chomp' filename 
```

附录：

如果有一个尾随换行符和从每一行中删除前导空格很重要，您可以这样做：

```
perl -l -n -e's/^\s+//; push @x, $_; END { print join( ' ', @x ); }' filename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T06:41:10.920

看起来您正在尝试更新存储在 unix 目录中的 sql。如果您安装了 Notepad++，您可以将**\r\n**替换为空格或空字符串。请务必在搜索模式中选择“**扩展”**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:42:15.717

最简单的方法（取决于“简单”的定义）是：

```
tr -s \\n ' ' 
```

如果您希望输出有换行符：

```
 { tr -s \\n \ < input-file && echo; } > output-file 
```

# django - 如何为静态文件名重置 django 缓存？

> ID：14229418
> 
> 赞同：2
> 
> 时间：2013-01-09T06:24:42.003
> 
> 标签：django, caching, heroku, django-staticfiles

我对 Heroku 上托管的 django 1.4 站点有疑问。我们将 Memcache 用于各种缓存，例如模板和静态资产缓存。[更新：根据 django 文档，django 似乎没有将 memcache 用于模板加载器缓存]

有时当我将网站推送到heroku时，静态css文件的链接在缓存清除之前不会更新（手动或我猜测它何时超时，因为如果我离开它似乎会在几分钟后自行修复独自的）。

所以这是不可接受的，因为我的 HTML 是新版本，而我的 css 将是旧版本，直到缓存更新并且 url 更改为新的 css 文件。

例子：

该站点具有 html（我们将其称为 v1）并链接到一个 css 文件，例如：application.5e6e7ad87005.css

我对 application.css 文件进行更改并推送站点。这会导致静态文件生成一个新的 css 文件名，比如说：application.5e6e7ad87006.css

问题是在我的 html 页面上，它们仍然都链接到旧文件（application.5e6e7ad87005.css）。

我想只清除缓存文件名的缓存（至少，我假设这是问题所在，如果有人认为这是一个不同的问题，请告诉我）以免丢失我的其他缓存（模板缓存、查询缓存等）

通过搜索，我似乎只能一次清除所有缓存，而不是单个缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:43:05.637

这完全取决于您为模板使用的缓存策略。您是否缓存了每个模板和渲染页面的全部内容？

如果是这样，那么我建议改用[模板片段缓存](https://docs.djangoproject.com/en/dev/topics/cache/#template-fragment-caching)。这个想法是你只会缓存每个模板的某些渲染成本很高的部分。您不会缓存应该快速渲染的部分，例如指向您的 css 文件的链接。

我建议您还研究一下[django-compressor](http://pypi.python.org/pypi/django_compressor)，它在动态缩小 CSS/JS 文件和确保系统地使用这些文件的最新版本方面做得非常出色（前提是您没有缓存指向这些文件的链接）文件，当然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:30:44.653

在这种情况下，我会说那`heroku config:add ...`是你的朋友。

例如：您可以创建一个 bash 脚本，为您推送最新的应用程序，并在这样做时触发，说：`heroku config:add GIT_LAST_COMMIT=$(git rev-parse HEAD)`.

然后在您的 Python 代码中，您可以使用`os.environ['GIT_LAST_COMMIT']`.

例如，这是我的 Heroku 应用程序：[http ://stormy-badlands-7331.herokuapp.com/](http://stormy-badlands-7331.herokuapp.com/)

的代码`app.py`是：

```
import os
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
  return 'Hello World! The latest commit sha is %s' % os.environ['GIT_LAST_COMMIT']

if __name__ == '__main__':
  # Bind to PORT if defined, otherwise default to 5000.
  port = int(os.environ.get('PORT', 5000))
  app.run(host='0.0.0.0', port=port) 
```

我`deploy.sh`的是：

```
git push heroku master
heroku config:add GIT_LAST_COMMIT=$(git rev-parse HEAD) 
```

请注意，我在推送后更新了变量，这样我可以确保用户不会在新哈希下获得旧资产。

然后，您可以将`os.environ['GIT_LAST_COMMIT']`其用作`x`var，例如，在加载资产时，例如：

```
<link rel="stylesheet" type="text/css" href="/assets/css/styles.css?{{ git_last_commit}}" /> 
```

# c++ - 如果数组很大，使用指针作为 C++ 类成员是一种更有效的方法吗？

> ID：14229419
> 
> 赞同：1
> 
> 时间：2013-01-09T06:24:42.163
> 
> 标签：c++, pointers

这里有几个关于指针的问题。

```
class object
{
private:
    vector<point> points_;
} 
```

假设我正在写一个如上所述的课程，如果我有很多点，一个很长的数组，你会建议什么？我应该使用`vector<point> points_`or`vector<point>* points_`吗？

对 c++ 代码使用指针是否更有效，所以我应该尽可能地使用它？注意：我需要最终程序尽可能快。

**有经验的程序员总是喜欢使用指针吗？**如果效率不是问题，或者不是我关心的问题，我发现不使用指针对我来说更清楚，而且我发现使用指针总是有很多生命周期问题。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T06:28:42.497

这里没有理由使用指针。无论向量中的元素数量如何，向量对象都将具有相同（小）的大小。

该向量已经包含一个指针，该指针指向存储数据的空间。该空间是动态分配的（来自免费存储，假设您不采取措施更改它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T06:27:47.997

向量是动态数组。它的 sizeof 是恒定的，不管它的大小。无论如何都不需要使用指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T06:38:29.733

问题实际上是选择正确的 STL 容器而不是指向容器的指针。引用以下书上的话`Effective STL`

> vector、list 和 deque 为程序员提供了不同的复杂性权衡，应该相应地使用，vector 是默认使用的序列类型，list 应该在序列中间频繁插入和删除时使用, deque 是当大多数插入和删除发生在序列的开头或结尾时选择的数据结构。

```
Does an experienced programmer always love to use pointers? 
```

智能指针非常方便，实际上我们主要使用智能指针而不是`new/delete`对原始指针进行操作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T12:33:39.663

当速度很重要时，为了帮助解决未来的问题，请考虑缓存未命中的内存管理，而不仅仅是查找时间。我同意上述答案，不需要指针，除非您的类大于页面文件的大小。在这种情况下，您可能需要考虑将您的类分解 50 或 100 次，但仍然不使用指针。

在考虑速度时，例如在游戏引擎中，您将尽可能多的内存放在一起，并确保在需要它之前加载它，并在不需要它时卸载它。您希望防止内存变得碎片化并在缓存惩罚上受到更多打击。当你试图保持一定的帧率时，比如 30 fps，你真的不想让这个变化太大（这会发生在很多缓存未命中或内存移动的情况下）。使用std::vector，您可以按照某人的建议执行此操作，提前分配，尝试分配足够多或比您需要的多一点，稍后调整大小会很痛苦，在游戏运行期间，这可能是一个巨大的不-不。

无论如何，有时拥有一个大型对象数组/向量会更有效，即使您必须遍历它们才能找到所需的对象，如果这意味着不发生缓存未命中。如果内存被加载，在顺序存储时从一个对象跳转到另一个对象是相当快的。此外，例如，在具有 (int) id 的事物上，执行 vectorObject.at(id_location) 是恒定的时间，如果没有缓存问题，速度很快。

另一方面，有时最好有一个加载的 std::map 例如包含指向一个非常大的向量的指针，这可能会产生很多缓存未命中（如数据库大小）。与遍历向量 (n) 时间相比，遍历 map 需要 lg(n) 时间，然后通过指针跳转到记录位置更有效，即使是一次缓存未命中也是如此。它胜过遍历整个硬盘，产生催人泪下的缓存。

这当然是永恒的问题，根据您的需要决定什么是正确的。知道避免缓存未命中可以帮助您做出更好的决定，因为您可以确定这不是您最后一次需要考虑它。

# python - Google Appengine、Google Apps 和登录

> ID：14229425
> 
> 赞同：0
> 
> 时间：2013-01-09T06:25:11.323
> 
> 标签：python, html, google-app-engine, web-hosting, google-apps

我在将 Google Apps 和 Google Appengine 链接在一起以在裸域上显示网站时遇到了一些困难。这就是我所在的位置：

1.  我已经在[http://krissytosiwebsite.appspot.com/](http://krissytosiwebsite.appspot.com/)上部署了我非常简单的网站。这个网站是一个简单的 python 应用程序，只有一个 html 页面。这里没有什么花哨的。
2.  我已经通过 enom 和 Google Apps 注册了域 (http://www.krissytosi.com) 并设置了裸域重定向设置。所以[http://krissytosi.com](http://krissytosi.com)应该重定向到[http://www.krissytosi.com](http://www.krissytosi.com)。

但是，当我尝试访问 www.krissytosi.com 时，我只是被重定向到[https://www.google.com/a/krissytosi.com/ServiceLogin2](https://www.google.com/a/krissytosi.com/ServiceLogin2)。就好像有一些配置需要“用户”实际登录到应用程序才能查看它。我只是希望能够在没有任何登录的情况下显示一个简单的网页。

关于我需要在 Google Appengine/Google Apps 上更改哪些设置或配置的任何想法？我的 app.yaml 文件看起来像[https://github.com/seanoshea/krissytosi/blob/master/app.yaml](https://github.com/seanoshea/krissytosi/blob/master/app.yaml)。我不需要根据[https://developers.google.com/appengine/docs/python/config/appconfig#Requiring_Login_or_Administrator_Status](https://developers.google.com/appengine/docs/python/config/appconfig#Requiring_Login_or_Administrator_Status)登录，所以我有点困惑为什么该应用程序似乎需要登录。

谢谢你的帮助，

肖恩

FWIW [https://github.com/seanoshea/krissytosi/blob/master/.htaccess](https://github.com/seanoshea/krissytosi/blob/master/.htaccess)是我的 .htaccess 文件。怀疑这会对与登录相关的任何内容产生影响，但仍然发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:35:16.870

1.  从根处理程序的 app.yaml 中删除 login: required 。
2.  创建应用程序时，您是否将身份验证配置为 Google Apps。
    这意味着用户需要登录 Google Apps 域才能访问应用程序。您可以在应用仪表板的应用程序设置页面中更改身份验证方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:26:00.440

原来，我只需要等待大约 24 小时，我之前应用到我的 AppEngine 实例的设置就会生效。

# python - 从列表中删除 NoneType 元素的本机 Python 函数？

> ID：14229433
> 
> 赞同：32
> 
> 时间：2013-01-09T06:25:40.203
> 
> 标签：python, list, nonetype

我在 Python 中使用 Beautiful Soup 从 HTML 文件中抓取一些数据。在某些情况下，Beautiful Soup 返回包含`string`和`NoneType`对象的列表。我想过滤掉所有的`NoneType`对象。

在 Python 中，包含`NoneType`对象的列表是不可迭代的，因此列表推导不是一个选项。具体来说，如果我有一个`lis`包含的列表`NoneTypes`，并且我尝试执行类似的操作`[x for x in lis (some condition/function)]`，Python 会抛出错误`TypeError: argument of type 'NoneType' is not iterable`。

正如我们在[其他帖子](https://stackoverflow.com/questions/6458006/python-cleaning-a-list)中看到的，在用户定义的函数中实现此功能很简单。这是我的味道：

```
def filterNoneType(lis):
    lis2 = []
    for l in links: #filter out NoneType
        if type(l) == str:
            lis2.append(l)
    return lis2 
```

但是，如果存在，我很乐意为此使用内置的 Python 函数。我总是喜欢尽可能简化我的代码。**Python 是否具有可以从列表中删除对象****的内置函数？`NoneType`**

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-09T07:40:54.533

我认为最干净的方法是：

```
#lis = some list with NoneType's
filter(None, lis) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-09T06:28:30.973

您可以使用列表推导来做到这一点：

```
clean = [x for x in lis if x != None] 
```

正如评论中所指出的，您也可以使用`is not`，即使它本质上编译为相同的字节码：

```
clean = [x for x in lis if x is not None] 
```

你也可以使用`filter`（注意：这也会过滤空字符串，如果你想更多地控制你过滤的内容，你可以传递一个函数而不是`None`）：

```
clean = filter(None, lis) 
```

如果您想要更有效的循环，总是有[itertools](http://docs.python.org/2/library/itertools.html)方法，但这些基本方法应该适用于大多数日常情况。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-09T06:31:11.337

列表理解，正如其他答案所建议的那样，或者为了完整起见：

```
clean = filter(lambda x: x is not None, lis) 
```

如果列表很大，迭代器方法更好：

```
from itertools import ifilter
clean = ifilter(lambda x: x is not None, lis) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-01-18T19:09:36.120

## 对于那些从谷歌来到这里的人——不要使用这个！

**UPD 2021：**
编写此答案时，提议的实现在语言语义方面绝对有效，但显然是一个hack。从那时起事情发生了变化，从 Python 3.9 开始`NotImplemented`，布尔上下文中的评估被明确禁止。这是 Python 文档的摘录：

> 不推荐在布尔上下文中评估 NotImplemented。虽然它当前评估为 true，但它会发出 DeprecationWarning。它将在 Python 的未来版本中引发 TypeError。

为了历史起见，我会保留这个答案，但请注意，即使在当时，这也有点不合时宜。根据您的要求坚持建议的列表理解解决方案或`filter`+ 。`lambda`

**原始答案：**
截至 2019 年初，Python 没有用于过滤 None 值的内置函数，从而避免了删除零、空字符串等常见错误。

在 Python3 中，您可以使用 `.__ne__`dunder 方法（如果您愿意，也可以使用“魔术方法”）来实现它：

```
>>> list1 = [0, 'foo', '', 512, None, 0, 'bar']
>>> list(filter(None.__ne__, list1))
[0, 'foo', '', 512, 0, 'bar'] 
```

这是它的工作原理：

*   `None.__ne__(None)`--> 错误

*   `None.__ne__(anything)`--> 未实现

`NotImplemented`有效的例外是`True`，例如：

```
>>> bool(None.__ne__('Something'))
True 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T06:28:37.280

`NoneType`您可以使用列表推导轻松地从列表中删除所有对象：

```
lis = [i for i in lis if i is not None] 
```

# sql - 没有记录时显示列值为 0 的记录

> ID：14229440
> 
> 赞同：0
> 
> 时间：2013-01-09T06:26:12.857
> 
> 标签：sql, oracle, join, left-join, nvl

我有以下表格：

![在此处输入图像描述](../Images/fae1e830083f223c3d7fa57751829f96.png)

**架构**

tbl_semester_empid {id，semester_name varchar(50)，start_date}

tbl_batch_empid {id，term_id，batch_name，session_room}

tbl_associate_empid {id， associate_name，batch_id，联系，join_date，induction_result，stream_result int}

问题查询是：显示学期明智的员工人数。

我写了 3 个查询：

```
--basic query
SELECT s.ID "Semester Id", COUNT(*) "Associate Count" FROM TBL_SEMESTER_593932 s, TBL_ASSOCIATE_593932 a, TBL_BATCH_593932 b 
        WHERE s.ID=b.SEMESTER_ID AND a.BATCH_ID=b.ID  
                GROUP BY s.ID;

--used NVL function
SELECT s.ID "Semester Id", NVL(COUNT(*),0) "Associate Count" FROM TBL_SEMESTER_593932 s, TBL_ASSOCIATE_593932 a, TBL_BATCH_593932 b 
        WHERE s.ID=b.SEMESTER_ID AND a.BATCH_ID=b.ID  
                GROUP BY s.ID;

-- used LEFT OUTER JOIN and  JOIN
SELECT s.ID "Semester Id", NVL(COUNT(*),0) "Associate Count" 
        FROM TBL_SEMESTER_593932 s LEFT OUTER JOIN TBL_BATCH_593932 b ON s.ID=b.SEMESTER_ID 
             JOIN TBL_ASSOCIATE_593932 a ON a.BATCH_ID=b.ID  
                   GROUP BY s.ID; 
```

它们都显示以下输出（它只显示对应于其中至少有 1 个学生的那些学期的记录，如果该学期没有学生，则不显示该学期的信息）：

![在此处输入图像描述](../Images/a583a847623f00a9c672ddb61826c9f9.png)

我希望在 Associates Count 列中没有员工的学期为 0。所以我用两个 LEFT OUTE JOIN 尝试了同样的方法：

```
SELECT s.ID "Semester Id", NVL(COUNT(*),0) "Associate Count" 
    FROM TBL_SEMESTER_593932 s LEFT OUTER JOIN TBL_BATCH_593932 b ON s.ID=b.SEMESTER_ID 
         LEFT OUTER JOIN TBL_ASSOCIATE_593932 a ON a.BATCH_ID=b.ID  
                GROUP BY s.ID; 
```

然而结果很奇怪：

![在此处输入图像描述](../Images/93a7836870ceeb283962fda46ac6e347.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:31:57.643

你试过使用`CASE when`吗？

根据您的关联表中的数据，所有批次/学期都有记录。

所以试试这个，你的 NVL 类似于案例......

```
select s.id, s.name, CASE WHEN count(a.id) IS NULL THEN 0 ELSE count(a.id) END as ACount
from tblsem s
left join tblbatch b
on b.sid = s.id
left join tblaso a
on b.id = a.batchid
group by s.id, s.name
; 
```

结果：

```
ID  NAME    ACOUNT
1   sem1    4
2   sem2    3
3   sem3    0 
```

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/07be8/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:43:54.517

基本上，您要做的是使用所有可用学期的列表，然后计算每个学期的数量：

```
select s.ID, 
       s.Semester_Name,
       NVL ((select count(*) 
          from TBL_ASSOCIATE_593932 a
               join TBL_BATCH_593932 b 
                 on a.BATCH_ID=b.ID
        where  s.ID=b.SEMESTER_ID
       ),0) as Amount
 from TBL_SEMESTER_593932 s 
```

另一种方法是加入您的所有学期列表，然后计算

```
select s.ID, 
       s.Semester_Name,
       count(*) as Amount 
 from TBL_SEMESTER_593932 s
        left join (
          TBL_BATCH_593932 b
          join TBL_ASSOCIATE_593932 a  
            on a.BATCH_ID=b.ID)
           on s.ID=b.SEMESTER_ID

group by s.ID, s.Semester_Name
order by s.ID 
```

[编辑]：根据@Mahesha999 更正了最后一个查询。

# wpf - WPF 初学者的挫败感，尤其是。关于数据绑定

> ID：14229441
> 
> 赞同：0
> 
> 时间：2013-01-09T06:26:14.230
> 
> 标签：wpf, vb.net, data-binding

首先，我真的是一个初学者。我主要在 WinForm 上工作，所以我从未听说过 WPF 上的数据绑定。

试图从博客和 MSDN 中学习，但我无法掌握。数据绑定只是我对 WPF 的困惑之一，但它是我现在需要了解的主要内容。

假设我得到了这些类：CustomerDL.vb（数据访问层）CustomerBL.vb（业务层）FormCustomer.xaml（表示层）

我现在所做的，是我所学的唯一概念：DL -> BL -> PL。

这是我的 PL：

```
Public Class FrmEmployee2
    Public Sub New()
        InitializeComponent()

        MasterEmployeeBL = New MasterEmployeeBL
        Employees = MasterEmployeeBL.FetchAllEmployee()

        MainGrid.DataContext = Employees
    End Sub

    Private _employees As List(Of Employee)
    Public Property Employees() As List(Of Employee)
        Get
            Return _employees
        End Get
        Set(ByVal value As List(Of Employee))
            _employees = value
        End Set
    End Property

    Public MasterEmployeeBL As MasterEmployeeBL
End Class 
```

这是我的 WPF：

```
<dx:DXWindow x:Class="FrmFindEmployee2"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
    xmlns:dxd="http://schemas.devexpress.com/winfx/2008/xaml/docking"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
    xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
    xmlns:local="clr-namespace:BMT_WPF"
    dx:ThemeManager.ThemeName="MetropolisDark"
    Title="Find Employee" Height="{Binding Source={x:Static SystemParameters.WorkArea}, Path=Height}" Width="658"
    WindowStartupLocation="CenterScreen" SizeToContent="Width">

    <Window.Resources>
        <ResourceDictionary>
            <local:BooleanToStatusConverter x:Key="BoolToStatusConv" />
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/BMT-WPF;component/Helpers/EditStyles.xaml" />    
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid x:Name="MainGrid" DataContext="{Binding Source=Employees}">
        <DockPanel>
            <dxg:GridControl ItemsSource="{Binding}" AutoPopulateColumns="True">

            </dxg:GridControl>
        </DockPanel>
    </Grid>
</dx:DXWindow> 
```

我认为这足以将员工列表绑定到我的 GridControl，但它什么也没显示。

任何人都可以帮助指出我可以从初学者的角度了解 WPF 的任何好的资源吗？

对不起，很长的帖子。干杯！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:37:58.437

您已设置 MainGrid 的 DataContext 两次，一次在您的代码中，一次在您的 XAML 中。我建议删除此元素上的 XAML 绑定。

有关数据绑定的基本教程，请尝试我写的这篇博文：

[http://www.scottlogic.co.uk/blog/colin/2012/04/everything-you-wanted-to-know-about-databinding-in-wpf-silverlight-and-wp7-part-one/](http://www.scottlogic.co.uk/blog/colin/2012/04/everything-you-wanted-to-know-about-databinding-in-wpf-silverlight-and-wp7-part-one/)

# c# - 我可以用另一个具有相同名称和签名的 C# 方法替换一个 C# 方法吗？

> ID：14229444
> 
> 赞同：10
> 
> 时间：2013-01-09T06:26:37.910
> 
> 标签：c#, .net

我有以下情况。一些 .Net 运行时方法不能很好地工作，我需要制定一个解决方法。就像`SqlCommand.ExecuteReader()`有时返回一个封闭的阅读器对象一样，我想要这样的代码：

```
 SqlDataReader MyExecuteReader( this SqlCommand command )
 {
     var reader = command.ExecuteReader();
     if( reader.IsClosed() ) {
        throw new ClosedReaderReturnedException();
     }
     return reader;
 } 
```

这会很好，除非我现在需要更改所有调用的代码，`ExecuteReader()`以便它现在调用`MyExecuteReader()`并且它使维护更加困难。

有没有办法以某种方式声明每当我的任何代码想要`SqlCommand.ExecuteReader()`调用时`MyExecuteReader()`都会被调用？是否可以有效地将现有方法替换为具有完全相同签名和相同名称的另一种方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T06:43:54.343

不，不支持您想要的。如果类不是密封的，并且方法不是静态的，您可以在不同的命名空间中继承同名的类并更改`using`, 并覆盖该方法。但这是一个有限的解决方案。

您最好的选择是使用不同的名称实现标准扩展方法，并替换所有用法。在大型代码库中，这似乎需要做很多工作，并且在未来可能容易出现人为错误——有人向原始方法添加了新的调用。但是，您的代码现在明确表明您已对行为进行了修改，这一事实抵消了一次性成本；您可以通过编写自己的自定义 FxCop 规则（或您定期运行的任何静态分析工具）来防止人为错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-09T06:58:36.890

这类似于尝试使用模拟对代码进行单元测试时出现的问题。

一种解决方法是将`SqlCommand`代码中的使用替换为实现带有`ExecuteReader`方法的接口的对象。然后，您可以更轻松地替换对象，也许使用工厂模式。

所以你会替换这样的代码：

```
using (SqlCommand command = new SqlCommand(query))
{
    command.ExecuteReader();
} 
```

和：

```
var sqlCommandFactory = new SqlCommandFactory();
using (ISqlCommand command = sqlCommandFactory.CreateSqlCommand(query))
{
    command.ExecuteReader();
} 
```

首先定义一个包含您要替换的方法的接口：

```
public interface ISqlCommand
{
    SqlDataReader ExecuteReader();

    // further interface methods here...
} 
```

然后创建一个工厂，它使用与构造函数相同的签名`SqlCommand`：

```
internal class SqlCommandFactory
{
    bool _useMyClass = true;

    public ISqlCommand CreateSqlCommand(string query)
    {
        if (_useMyClass)
        {
            return new MySqlCommand(query);
        }
        else
        {
            return new SqlCommandWrapper(query);
        }
    }
} 
```

然后，您在`MySqlCommand`课堂上编写替代代码：

```
public MySqlCommand : ISqlCommand
{
    public SqlDataReader ExecuteReader()
    {
        // your new code here
    }
} 
```

由于 .NET`SqlCommand`类显然没有实现新`ISqlCommand`接口，因此创建一个包装类来执行此操作：

```
public SqlCommandWrapper : ISqlCommand
{
    SqlCommand _sqlCommand;

    public SqlCommandWrapper(string query)
    {
        _sqlCommand = new SqlCommand(query);
    }

    public SqlDataReader ExecuteReader()
    {
        _sqlCommand.ExecuteReader();
    }
} 
```

一些额外的工作，但这种方法的好处是您可以将实现更改为您想要的任何内容，包括单元测试（通过将模拟工厂传递给您的代码）。

额外的工作应该是一次性的，并根据要求保留名称和原始方法签名。这应该使您的代码看起来更熟悉且更易于理解（与自定义/扩展方法相比），尤其是在您（或您的团队）习惯了这种众所周知的模式后。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T06:57:19.420

好吧，您可以使用像 Cecil 这样的库来重写 IL，就像这里所做的那样：http: [//plaureano.blogspot.dk/2011/05/introduction-to-il-rewriting-with-cecil.html ?m=1](http://plaureano.blogspot.dk/2011/05/introduction-to-il-rewriting-with-cecil.html?m=1)

但我确实相信重写你的代码会更好，所以其他任何可能阅读你的代码的人（以及以后的你自己）都清楚发生了什么:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T06:49:12.623

我不认为你想那样做。这会让所有阅读代码的人感到困惑。

但是，我相信它不能完成，但不能以任何好的或保证长期支持的方式完成。回到过去，我们可以注入函数而不是 DLL 导出的函数。防病毒程序使用了这种技术。

显然，有人设法弄清楚如何[注入 .NET 方法。](http://www.codeproject.com/Articles/37549/CLR-Injection-Runtime-Method-Replacer)

请记住，这可能比它的价值要麻烦得多。您必须在安装了各种额外软件的各种平台上进行广泛的 QA（一种防病毒软件可能会破坏您的代码）。所以真的，只要按照其他人的建议去做——创建你的扩展方法，然后搜索并替换你的整个代码库。

# javascript - 如何在 extjs 的视图表单中包含 javascript

> ID：14229445
> 
> 赞同：1
> 
> 时间：2013-01-09T06:26:37.940
> 
> 标签：javascript, extjs, view, captcha

我在 extjs 工作。我想以 extjs 形式生成验证码。所以我正在使用具有代码的javascript创建验证码 -

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"            "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
     <title>BotBoot</title>

         <script type="text/javascript">
         var a = Math.ceil(Math.random() * 10);
         var b = Math.ceil(Math.random() * 10);       
         var c = a + b
         function DrawBotBoot()
        {
         document.write("What is "+ a + " + " + b +"? ");
         document.write("<input id='BotBootInput' type='text' maxlength='2'    size='2'/>");
        }    
        function ValidBotBoot(){
        var d = document.getElementById('BotBootInput').value;
        if (d == c) return true;        
        return false;

     }
     </script>

     </head>
     <body>

      Are you human?<br />

       <script type="text/javascript">DrawBotBoot()</script>
       <input id="Button1" type="button" value="Check"  onclick="alert(ValidBotBoot());"/>

      </body>
      </html> 
```

它工作正常。但是现在我想通过提及 xtype 字段在我的注册表单中包含这个 javascript 验证码在项目块内。那么如何在 extjs 视图表单项元素中包含 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:39:09.743

您需要创建一个文本字段和一个按钮以及一个看起来像这样的自定义类。如果你实现它，你可以使用它`xtype: 'captcha'`

```
Ext.define('My.Captcha', {
    extend: 'Ext.container.Container',
    alias: 'widget.captcha',

    initComponent: function(config){
        this.a = Math.ceil(Math.random() * 10);
        this.b = Math.ceil(Math.random() * 10);       
        this.c = this.a + this.b;
    },

    DrawBotBoot: function(){
      //custom logic
    },

    ValidBotBoot: function(){
      //custom logic
    }
}); 
```

如果您要在输入中使用 id，您可以使用它`Ext.getCmp()`来检索组件。
祝你好运

# android - 仅在 Android 4.2 中使用 SOAP 的 Web 服务操作中的 VerifyError？

> ID：14229448
> 
> 赞同：0
> 
> 时间：2013-01-09T06:26:59.143
> 
> 标签：android, web-services, soap, verifyerror

我 在调用 Webservice 通信器类中得到**java.lang.VerifyError 。**

此错误**仅在 Android 4.2 操作系统设备中出现。**它在操作系统和标签的所有其他设备上也运行良好。

以下是我的日志：

```
01-09 06:15:10.263: E/AndroidRuntime(785): FATAL EXCEPTION: Thread-78
01-09 06:15:10.263: E/AndroidRuntime(785): java.lang.VerifyError: org/ksoap2/SoapEnvelope
01-09 06:15:10.263: E/AndroidRuntime(785):  at com.weg.ecatalogue.servercommunication.WebServiceCommunicator$2.run(WebServiceCommunicator.java:78)
01-09 06:15:10.263: E/AndroidRuntime(785):  at java.lang.Thread.run(Thread.java:856) 
```

请建议我，关于这个 4.2 OS 相关问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T10:01:08.070

使用这个 jar 文件调用soap webservices

```
ksoap2-android-assembly-2.6.2-jar-with-dependencies .jar 
```

并将类替换`AndroidHttpTransport`为`HttpTransportSE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-24T08:21:21.240

问题出在 ksoap2-android-2.5.2.jar 文件上。之前我们将该文件粘贴到 lib 文件夹中，右键单击并从菜单中选择设置为库。这在模拟器上运行良好，但在使用真实设备时崩溃。然后我们从 lib 文件夹中删除了 jar 文件并将它们添加到 Gradle。

解决方案：将此代码段添加到 buildTypes

```
repositories {
    maven { url 'https://oss.sonatype.org/content/repositories/ksoap2-android-releases/' } 
```

将此代码段添加到依赖项中

```
implementation 'com.google.code.ksoap2-android:ksoap2-android:3.6.1' 
```

并从库中删除 jar 文件

# css - 如何影响从普通类开始的类？

> ID：14229453
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:27:25.490
> 
> 标签：css, html

我有很多以 test 开头的类，例如 test-1、test-2、test-3 等，并且在该类 div 锚链接下与类作为工作。怎么能用css效果。下面是我的工作。

```
<div class="test-1"><a class="work">test content</a></div> 
```

以上是代码：并尝试使用以下CSS。不工作。

```
div[class^="test-"] a.work {float:left;clear:both;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:30:48.557

您的代码完全有效并且工作正常，如您在此示例中所见：http: [//jsfiddle.net/ThiefMaster/JmHvz/](http://jsfiddle.net/ThiefMaster/JmHvz/)

但是，最好/最干净/最快的解决方案是添加一个额外的类，例如`test`(ie `<div class="test test-1">`) 并在 CSS ( `div.test a.work { ... }`) 中使用该类，因为类选择器*总是*比通用属性选择器快 - 特别是在现代浏览器中很可能有从类名到元素的映射，因为这是一件相当常见的事情。

# javascript - .on 不能代替 live

> ID：14229454
> 
> 赞同：2
> 
> 时间：2013-01-09T06:27:31.590
> 
> 标签：javascript, jquery, event-handling, live

我已经知道 .on 应该取代 .live 已经有一段时间了，但是我根本无法让它工作。

我试过了：

```
$(this).on('click', function(){
    // Do something...
})

$(this).on({
    click: function(){ // Do something }
}) 
```

但它从来不适合我！

特别是当我尝试将事件绑定到页面上最初可能不存在的元素时。

有人可以一劳永逸地为我解决这个问题吗？

* * *

我正在使用最新版本的 jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:31:15.227

这样做：

```
$(".parent").on('click', ".child", function(){
    // Do something...
}) 
```

您使用的语法就像`bind`. 要将事件绑定到所有未来元素，请使用上述语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:33:52.290

对于动态生成的元素，您需要使用 like

```
$(document).on('click','YOUR SELECTOR', function(){

}); 
```

这是因为 document 是你的元素的容器，可以观察 DOM 的变化。对于每个动作，都需要一个显式的事件监听器。如果你将某些东西绑定到 $(this)，当你删除它时它（选择器）可能不存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T06:30:40.413

您需要指定*哪些*元素。

```
$element.on('click', '.foo', handler) 
```

将绑定`handler`到所有居住`.foo`在里面`$element`。

# c# - 如何替换某些段的值以保留其他段？

> ID：14229456
> 
> 赞同：5
> 
> 时间：2013-01-09T06:27:34.303
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

要继续我之前的一个问题（[生成传出 url 时选择了意外路由](https://stackoverflow.com/questions/13081884/unexpected-route-chosen-while-generating-an-outgoing-url)），请考虑以下路由（无默认值，无约束）：

```
"{controller}/{month}-{year}/{action}/{user}" 
```

假设在通过与此路由匹配的传入 url 呈现某些页面时（因此请求上下文包含每个路由段的值），我需要生成一个仅更改`month`和的 url，并`year`保留所有其他段的确切值。

根据规则，我在链接的问题中提到（即*路由系统将仅重用在 URL 模式中出现的段变量的值，而不是提供的任何参数。*），如果我指定新的`month`并且`year`仅通过匿名对象，我会失去`user`段的价值（即路线甚至不匹配）。

我知道有两种方法可以克服这个问题：

1.  根本不要指定匿名对象；`context.RouteData.Values`但在;中设置必要的段值 生成所需的url后，返回原始值，以便使用原始请求段值执行其余页面渲染；这看起来像这样：

    ```
    public static MvcHtmlString GetDateUrl(this RequestContext context, 
                                           DateTime date)
    {
        UrlHelper url = new UrlHelper(context);

        object month = null, year = null;
        if (context.RouteData.Values.ContainsKey("month"))
        {
            month = context.RouteData.Values["month"];
            year = context.RouteData.Values["year"];
        }

        try
        {
            context.RouteData.Values["month"] = date.Month;
            context.RouteData.Values["year"] = date.Year;
            return MvcHtmlString.Create(
                url.Action((string)context.RouteData.Values["action"]));
        }
        finally
        {
            if (month == null)
            {
                if (context.RouteData.Values.ContainsKey("month"))
                {
                    context.RouteData.Values.Remove("month");
                    context.RouteData.Values.Remove("year");
                }
            }
            else
            {
                context.RouteData.Values["month"] = month;
                context.RouteData.Values["year"] = year;
            }
        }
    } 
    ```

2.  `RouteValueDictionary`根据当前请求上下文，使用 , 而不是匿名对象：

    ```
    public static MvcHtmlString GetDateUrl(this RequestContext context, 
                                           DateTime date)
    {
        UrlHelper url = new UrlHelper(context);

        var values = new RouteValueDictionary(context.RouteData.Values);
        values["month"] = date.Month;
        values["year"] = date.Year;

        string action = (string)context.RouteData.Values["action"];

        return MvcHtmlString.Create(url.Action(action, values));
    } 
    ```

第二个选项似乎更简短，而第一个不创建额外的字典，操纵请求上下文。

哪种方式更好？或者，也许我正在做/理解错误的事情？

*Sanderson S., Freeman A. - Pro ASP.NET MVC 3 Framework（第 3 版）*说不要依赖段值重用，而是指定在确切的地点和时间需要的所有值。

我展示了我发现执行此任务的方式，但是如果替换的段发生在路线的早期，那么替换段值的正确（或更好）方法是什么，保留其他值？

**编辑**

根据 Jani Hyytiäinen 的回答。所讨论的路线只是一个例子。目标 mvc 应用程序包含不同的路由，有些可能比这个更复杂。所以我正在寻找的方法应该能够与它们中的任何一个一起使用。我想说这个扩展方法只知道，它必须改变`month`and `year`，同时保留**所有**其他段。*其他*段的数量是任意的。所以硬编码它们根本不是一个可能的解决方案。除了请求上下文本身之外，我还有当前段值的来源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:44:25.227

```
public static MvcHtmlString GetDateUrl(this RequestContext context, DateTime date)
{
    var values = context.RouteData.values;

    var data = new{
        controller = values["controller"]  ?? "Home";
        action = values["action"]  ?? "Index";
        month = date.Month;
        year = date.Year;
        user = context.HttpContext.User.Identity.Name;
    };

    string url = UrlHelper.RouteUrl(data);
    return MvcHtmlString.Create(url);
} 
```

为什么要让它变得更复杂？您可能会争辩说您想对 HttpContext 进行一些空值检查，但是当您有一个没有 HttpContext 的 RequestContext 时，这里的空值检查是您的问题中最少的。要么这样，要么你有一个程序员在做一些非常时髦的事情，你确实希望应用程序在那里吹出它所有的荣耀，让他们知道他们正在做一些不起作用的事情，他们应该在它出现之前就停下来生产。

您可能还想在此处对其他任何内容进行额外检查，但实际上，此方法的职责到此为止。它应该接受一个日期并将路由 url 作为 MvcHtmlString 返回。时期。

从性能的角度来看，您可以在生成 url 时在此处显式定义一个特定的路由名称，但要做到这一点，您需要有一个相当大的路由集合。考虑到您将在此方法和路由配置之间创建隐藏的依赖关系。有人更改路线名称的那一天，应用程序崩溃了，很难找到原因。

您可能还想使用 RouteValueDictionary，但没有理由。如果我没记错的话，UrlHelper 无论如何都会在内部使用对象。即使我记错了，它也可以为您转换它。

参考资料：“在确切的地点和时间指定所有需要的值”，Sanderson S.，Freeman A. - Pro ASP.NET MVC 3 Framework

[http://msdn.microsoft.com/en-us/library/dd505226(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd505226(v=vs.108).aspx)

# javascript - Tumblr photoset 的 iframe 加载 404 Not Found

> ID：14229457
> 
> 赞同：1
> 
> 时间：2013-01-09T06:27:36.353
> 
> 标签：javascript, iframe, http-status-code-404, tumblr

我在 stackoverflow 或其他任何地方都没有发现有这个问题的人，而且 Tumblr 的支持很迟钝。

我的 tumblr 上的一些照片集神秘地在照片集 iframe 中加载了 404 not found 页面。当我查看源并单击该照片集的内容链接时，我可以加载它。现在它发生在[http://margodunlap.com/tagged/parsonssproutlogo](http://margodunlap.com/tagged/parsonssproutlogo)上的第二个帖子上，但早些时候那个帖子很好，不同页面上的不同照片集是 404-ing。那个照片集清除了。

如果有用，这里是问题组件/帖子中的代码：

```
<div id="photoset_31450068393" class="html_photoset">    <iframe class="photoset" scrolling="no" frameborder="0" height="458" width="500"
            style="border:0px; background-color:transparent; overflow:hidden;" src="http://margodunlap.com/post/31450068393/photoset_iframe/margodunlap/tumblr_ma9xxmCe2n1rdhvsg/500/false"></iframe></div> 
```

我的直觉是，这是 tumblr 的服务器搞砸了，但有可能是我的照片集脚本有问题吗？它在下面 - 我相信这是一个常见的。

```
$(document).ready(function(){
$(".photoset").each(function() {
$(this).width('800px');
var newSrc = $(this).attr("src").replace('500','800');
$(this).attr("src", newSrc);
});

$(function(){
var iFrames = $('.photoset');

function iResize() {
for (var i = 0, j = iFrames.length; i < j; i++) {
    iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';}
}

if ($.browser.safari || $.browser.opera) { 
    iFrames.load(function(){
        setTimeout(iResize, 0); 
    });

    for (var i = 0, j = iFrames.length; i < j; i++) {
        var iSource = iFrames[i].src;
        iFrames[i].src = '';
        iFrames[i].src = iSource;
    }
} else {
    iFrames.load(function() {
        this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
    });
}
});
}); 
```

另外我不知道这是否相关，但 Chrome 的 Java 控制台告诉我页面上的其他一些脚本（tumblr 的营销跟踪器和我的谷歌分析）无法加载。请知道我是设计师，而不是程序员，我正在尽我最大的努力让这不是一个愚蠢的问题。基本上，我花了六个月的时间调整这个网站，我的作品集，使其完美，在我准备提交它作为我的研究生院申请之前 12 小时，它做到了。关于在可靠的地方托管重要事物的巨大教训，但与此同时，如果可以的话，请提供帮助，我感到绝望和悲伤。

由于整个提交给研究生院的事情，我已经将问题发布下来，但如果有人知道这可能是什么问题，我真的很感激永久修复。

# java - 如何在使用表面视图录制视频时拍照（快照）

> ID：14229464
> 
> 赞同：3
> 
> 时间：2013-01-09T06:28:01.780
> 
> 标签：java, android, camera, surfaceview, image

我完成了用表面视图录制视频。现在我想知道“如何在使用表面视图录制视频时拍照（快照）”？？谁能帮帮我。！我需要在**mycam**按钮中添加什么来拍照？？

```
public class ActiveCam extends Activity implements SurfaceHolder.Callback 
{
  boolean recording = false;
  MediaRecorder mediaRecorder;
  SurfaceHolder surfaceHolder;
  Button myStart;
  Button myStop;
  Button mycam;
  public void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);
    recording = false;
    mediaRecorder = new MediaRecorder();
    initMediaRecorder();
    setContentView(R.layout.camact); //This is my XML file

    Button b3=(Button)findViewById(R.id.button3);
    SurfaceView myVideoView = (SurfaceView)findViewById(R.id.preview);
    surfaceHolder = myVideoView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    myStart = (Button)findViewById(R.id.button1);
    myStart.setOnClickListener(myButtonOnClickListener);
    myStop = (Button)findViewById(R.id.button2);
    myStop.setOnClickListener(myButtonOnClickListener1);
    mycam = (Button)findViewById(R.id.button3);
    mycam.setOnClickListener(myButtonOnClickListener3);

  }
  private Button.OnClickListener myButtonOnClickListener1 = new  Button.OnClickListener()
  {

    @Override
    public void onClick(View arg0) 
    {
        // TODO Auto-generated method stub

        mediaRecorder.stop();
        mediaRecorder.release();
        mediaRecorder = null;
        //finish();
    }

  };
Camera.PictureCallback mCall = new Camera.PictureCallback()  
{  
    @Override  
    public void onPictureTaken(byte[] data, Camera camera)  
    {  
        //decode the data obtained by the camera into a Bitmap  
        bmp = BitmapFactory.decodeByteArray(data, 0, data.length);  
        //set the iv_image  
        Toast.makeText(ActiveCam.this,"cap", Toast.LENGTH_LONG).show();
        //iv_image.setImageBitmap(bmp);  
    }  
};  

private Button.OnClickListener myButtonOnClickListener3 = new Button.OnClickListener()
{

    @Override
    public void onClick(View arg0) 
    {

        //I need to take picture after pressing this button...What I needs to add    here??? 

    }

};      
private Button.OnClickListener myButtonOnClickListener = new Button.OnClickListener()
{

    @Override
    public void onClick(View arg0) 
    {
       mediaRecorder.start();
   recording = true;
   myStop.setText("STOP");
    }
 };
 @Override
 public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) 
 {
    // TODO Auto-generated method stub

}
@Override
public void surfaceCreated(SurfaceHolder arg0) 
{
    // TODO Auto-generated method stub
    prepareMediaRecorder();
}
@Override
public void surfaceDestroyed(SurfaceHolder arg0) 
{
    // TODO Auto-generated method stub

}
private void initMediaRecorder()
{
    mediaRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
    mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    CamcorderProfile camcorderProfile_HQ = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);

    mediaRecorder.setProfile(camcorderProfile_HQ);
    mediaRecorder.setOutputFile("/sdcard/your.mp4");
     //mediaRecorder.setMaxFileSize(..set size..); 
}
private void prepareMediaRecorder()
{
  mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());
  try 
  {
     mediaRecorder.prepare();
  }
  catch (IllegalStateException e) 
  {
     // TODO Auto-generated catch block
     e.printStackTrace();
  } 
  catch (IOException e) 
  {
    // TODO Auto-generated catch block
    e.printStackTrace();
  }

} 
```

这是我的 XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<Button
      android:id="@+id/button1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_alignParentTop="true"
      android:text="Start" />

  <Button
      android:id="@+id/button2"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
      android:layout_alignParentTop="true"
      android:layout_marginRight="16dp"
      android:text="Pause" />

<SurfaceView
    android:id="@+id/preview"
    android:layout_width="500px"
    android:layout_height="500px"
    android:layout_alignLeft="@+id/textView1"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="34dp" />
   <Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/spinner1"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="36dp"
    android:text="Button" />
  </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:38:01.390

RecordingView[链接](http://www.codeproject.com/Articles/107270/Recording-and-Playing-Video-on-Android)和[链接。您可以通过此](http://android-er.blogspot.com/2011/10/simple-exercise-of-video-capture-using.html)[代码](http://www.coderzheaven.com/2012/04/07/how-to-take-screenshot-of-your-phone-in-android-through-code/)拍摄快照 如果您的 xml 中有一个 videoView，则必须将 linearLayout 作为其父级（videoView 作为 linearLayout 的子级），并且当您保存 linearlayout 图像时，这意味着您将保存您的视频视图图像。

试试这个并阅读我发送的用于拍摄快照的代码。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <Button
          android:id="@+id/button1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentLeft="true"
          android:layout_alignParentTop="true"
          android:text="Start" />

      <Button
          android:id="@+id/button2"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentRight="true"
          android:layout_alignParentTop="true"
          android:layout_marginRight="16dp"
          android:text="Pause" />

  <ImageView
    android:layout_width="120dip"
    android:layout_height="120dip"
    android:text="Take Screenshot"
    android:id="@+id/ImageView01"
    android:layout_centerHorizontal="true"
    />
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="500px"
        android:layout_height="500px"
        android:id="@+id/LinearLayout01"
        android:layout_alignLeft="@+id/textView1"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="#FF0000"
        android:layout_marginBottom="34dp">
    <SurfaceView
        android:id="@+id/preview"
        android:layout_width="400px"
        android:layout_height="400px"
        android:layout_gravity="center"
         />
    </LinearLayout>
       <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/spinner1"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="36dp"
        android:text="Button" />
      </RelativeLayout> 
```

希望它会有所帮助

将此添加到 Button3 侦听器

```
private Button.OnClickListener myButtonOnClickListener3 = new Button.OnClickListener()
{

    @Override
    public void onClick(View arg0) 
    {

        //I need to take picture after pressing this button...What I needs to add    here??? 
        //View v1 = L1.getFocusedChild();
        L1.setDrawingCacheEnabled(true);
        Bitmap bm = L1.getDrawingCache();
        BitmapDrawable bitmapDrawable = new BitmapDrawable(bm);
        ImageView image = (ImageView) findViewById(R.id.ImageView01);
        image.setBackgroundDrawable(bitmapDrawable);
    }

}; 
```

更改 Surface 管理器的宽度和高度

```
<SurfaceView
            android:id="@+id/preview"
            android:layout_width="400px"
            android:layout_height="400px"
            android:layout_gravity="center"
             /> 
```

并添加`android:background="#FF0000"`你的线性布局

它将帮助您确定您的快照代码是否有效

# cakephp - 在 CAKEPHP 中仅获取某些字段

> ID：14229470
> 
> 赞同：4
> 
> 时间：2013-01-09T06:28:27.310
> 
> 标签：cakephp, cakephp-model

我的问题是当我从用户表中获取用户的数据时，用户表的所有字段都是从用户表中获取的。但是我不想在其中包含密码和电子邮件地址，所以有什么方法可以只获取除密码和电子邮件地址？

问候。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T08:55:51.413

正如[juhana](https://stackoverflow.com/questions/14229470/fetch-only-some-fields-on-find-in-cakephp#comment19741060_14229470)所提到的，您不需要使用 find 调用返回的所有字段。目前尚不清楚您要解决的实际问题是什么，在未来的问题中澄清这些细节符合您的利益。

## 对于直接查询

对于直接在您的用户模型上的查询，您可以使用如下逻辑：

```
public function beforeFind($queryData) {
    if (empty($queryData['fields'])) {
        $schema = $this->schema();
        unset($schema['password']);
        unset($schema['email']);

        foreach (array_keys($schema) as $field) {
            $queryData['fields'][] = $this->alias . '.' . $field;
        }
        return $queryData;
    }

    return parent::beforeFind($queryData);

} 
```

## 然而

对于查询另一个模型的查询，这不会做任何事情，例如

```
$results = $PostModel->find('all', array(
    'contain' => array('User')
)); 
```

在上述情况下，将返回所有用户字段。对于这样的用途，最好明确定义您的字段列表，而不是依赖任何自动魔术：

```
$results = $PostModel->find('all', array(
    'contain' => array('User')
    'fields' => array('Post.*', 'User.name')
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:31:31.957

你必须做这样的事情

```
$this->Model->find('all',array('fields'=>array('id','name'))); 
```

只需在字段数组上提及您的要求字段。

如果你想从模型中获取然后试试这个

```
$this->find('all',array('fields'=>array('id','name'))); 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:35:09.883

```
$this->User->find('all',array('fields'=>array('User.id','User.name','User.created', etc etc))); 
```

你可能会注意到我在我的字段声明中使用了 Model.field ，这是为了以防你在任何相关模型中有任何冲突的字段名称。

摘自[此处的 CakePHP 手册](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)，在模型上使用 Find 方法时，您可以使用以下所有这些选项。

```
array(
    'conditions' => array('Model.field' => $thisValue), //array of conditions
    'recursive' => 1, //int
    'fields' => array('Model.field1', 'DISTINCT Model.field2'), //array of field names
    'order' => array('Model.created', 'Model.field3 DESC'), //string or array defining order
    'group' => array('Model.field'), //fields to GROUP BY
    'limit' => n, //int
    'page' => n, //int
    'offset' => n, //int
    'callbacks' => true //other possible values are false, 'before', 'after'
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:27:16.773

将此添加到您的`User`模型中：

```
public function beforeFind($queryData) {
    if (isset($this->includeAllFields)) {
        return $queryData;
    }

    if (empty($queryData['fields'])) {
        $queryData['fields'] = array(
            // Specify all fields EXCEPT for "password" and "email".

            'User.field1',
            'User.field2',
            'User.field3'
        );
    }

    return $queryData;
} 
```

`$this->includeAllFields`不是 CakePHP 的一部分；这是我编造的自定义属性。如果出于某种原因，您需要包含密码和电子邮件地址，只需`$this->User->includeAllFields = true;`在查找之前添加即可。

我能想到的这种方法的唯一缺点是，如果曾经在数据库中添加或删除字段，则需要更新上述代码中的字段数组。

# ruby-on-rails - Ruby：如果输入结果可用，如何显示输入结果（在列表中），如果不存在值，如何隐藏列表项？

> ID：14229472
> 
> 赞同：0
> 
> 时间：2013-01-09T06:28:35.510
> 
> 标签：ruby-on-rails

我有一堆要显示的列表项。有些会有价值，有些则没有。如果它们都有很好的值，但如果只有 3 个值有值，我如何隐藏没有值的列表项？

```
<li><%= @post.color %></li>
<li><%= @post.make %></li>
<li><%= @post.model %></li>
<li><%= @post.cupholder %></li> 
```

我以为我可以做类似的事情

```
<% if @post.attr.each do %> 
  <li><%= @post.color %></li>
  <li><%= @post.make %></li>
...
<% end %> 
```

或者

```
<% if @post.make %>
  <li><%= @post.make %></li>
<% end %> 
```

但我无法得到它，现在我什至不确定要问/搜索什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:33:50.607

尝试

```
<% unless @post.color.blank? %><li><%= @post.color %></li><% end %>
<% unless @post.make.blank? %><li><%= @post.make %></li><% end %>
<% unless @post.model.blank? %><li><%= @post.model %></li><% end %>
<% unless @post.cupholder.blank? %><li><%= @post.cupholder %></li><% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:39:11.487

尝试使用帮助程序来保持您的视图代码干净，例如 ( `posts_helper.rb`)

```
module PostsHelper
  def li_unless_blank(val)
    val.blank? ? '' : "<li>#{val}</li>"
  end
end 
```

在你看来

```
<%= li_unless_blank @post.color %>
<%= li_unless_blank @post.make %>
<%= li_unless_blank @post.model %>
... 
```

# javascript - * 在javascript中创建类时不是函数错误

> ID：14229479
> 
> 赞同：0
> 
> 时间：2013-01-09T06:28:47.320
> 
> 标签：javascript, prototype

我刚刚开始在 javascript 中上课，这是我创建的第一堂课，例如：

```
function MessageBox(parent){
    this.id = "msg-box";   // ID for the Box
    this.createElements(this.id);
    this.parentElement = parent;
};
MessageBox.prototype = {
    createElements: function(id){
        // Create Main Container
        this.containerElement = document.createElement('div');
        this.containerElement.setAttribute('id', this.id);
        this.parentElement.appendChild(this.containerElement);
    }
}; 
```

但是当我在我的 index.html 文件中调用这个文件时，它返回错误`createElements()`不是函数..

这也是我的 index.html：

```
<script type="text/javascript">
        window.onload = function(){
            var box = MessageBox('body');
            //box.start();
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:32:19.287

由于您的函数是构造函数，因此您要使用

```
var box = new MessageBox('body');
//        ^^^ 
```

否则，不会创建任何实例，并且您的构造函数会在默认上下文对象、全局`window`对象（没有`createElements`属性）上执行。看看[MDN 对`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)和[`new`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)的介绍。

# jquery - Jquery Datatables 覆盖默认值以禁用 Prev 和 Next 分页选项

> ID：14229480
> 
> 赞同：1
> 
> 时间：2013-01-09T06:28:47.593
> 
> 标签：jquery, jsp, spring-mvc, datatables

我正在使用数据表。

当只显示一页时，我不希望页面上的“ `Previous`”和“ ”选项可见（至少不可点击）。`Next`

如何实现？

数据表代码：

```
<script type="text/javascript">
    var jq = jQuery.noConflict();
    jq(document).ready( function(){
        jq("#results").dataTable({
            "aaSorting": [[ 5, "desc" ]]
        });
    });
</script> 
```

我试过了

```
$(document).ready(function() {
    $('#example').dataTable( {
        "sPaginationType": "full_numbers"
    } );
} ); 
```

但它开始显示许多其他选项并禁用按钮。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:07:54.477

您应该将[fnDrawCallback](http://datatables.net/usage/callbacks)函数添加到数据表代码中：

```
"fnDrawCallback": function( oSettings ) {
    if ( $('#example_paginate span a').size() > 1) {
         $('#example_paginate')[0].style.display = "block";
    } else {
        $('#example_paginate')[0].style.display = "none";
    }
} 
```

# asp.net - asp.net 更新面板依然刷新页面

> ID：14229481
> 
> 赞同：0
> 
> 时间：2013-01-09T06:28:48.003
> 
> 标签：asp.net, updatepanel, partial-postback

我已经使用更新面板在 asp.net webform 页面中进行部分回发，但不是部分加载，而是重新加载孔页面，我使用组合框通过 onSelectIndexChanged 事件进行回发我的代码：

```
 <asp:UpdatePanel runat="server" ID="updatePanel1" >
            <ContentTemplate>
                <table  style="direction:rtl;width:416px;" runat="server" clientidmode="Static">
                <tr class="trwidth">
                <td>
                    <asp:DropDownList ID="comboCategory" runat="server" 
                        DataTextField="job_name" DataValueField="job_cat_id" DataSourceID="SqlDataSource1">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:JobsConnectionString %>" 
                        SelectCommand="SELECT * FROM [job_category]"></asp:SqlDataSource>
                 </td>
                    <td>

                              <asp:DropDownList ID="comboCountry" runat="server" AutoPostBack="True"  ClientIDMode="Static" DataSourceID="SqlDataSource3"  
                                  OnSelectedIndexChanged="comboCountry_OnSelectedIndexChanged"
                                    DataTextField="country_name" DataValueField="country_id">        
                                  </asp:DropDownList>
                                <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
                                    ConnectionString="<%$ ConnectionStrings:JobsConnectionString %>" 
                                    SelectCommand="SELECT * FROM [country]"></asp:SqlDataSource>          
                                </td>
                             </tr>
                            <tr class="trwidth">
                            <td>

                                <asp:DropDownList ID="comboCity" runat="server" DataSourceID="SqlDataSource2" ClientIDMode="Static"
                                    DataTextField="city_name" DataValueField="location_id">
                                </asp:DropDownList>
                                <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                                    ConnectionString="<%$ ConnectionStrings:JobsConnectionString %>" 
                                    SelectCommand="SELECT * FROM [location]"></asp:SqlDataSource> 
                </td>     
                <td>

                    <asp:DropDownList ID="comboGender" runat="server" 
                        DataSourceID="SqlDataSource4" 
                        DataTextField="gender_name" DataValueField="gender_id" ClientIDMode="Static">

                    </asp:DropDownList>
                    <asp:SqlDataSource ID="SqlDataSource4" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:JobsConnectionString %>" 
                        SelectCommand="SELECT * FROM [gender]"></asp:SqlDataSource>
                </td>

                 </tr>
                 <tr class="trwidth">
                <td colspan="2" style="text-align:center;padding-left: 130px;direction: ltr">
                    <dx:ASPxDateEdit ID="ASPxDateEdit" runat="server"  NullText="دوا بەروار">
                    </dx:ASPxDateEdit>
                    </td>
                </tr>
                <tr class="trwidth"><td></td>
                    <td class="dxtcLeftAlignCell">
                    </td>
                    <td></td><td></td></tr>
                <tr class="trwidth"><td>&nbsp;</td>
                    <td class="dxtcLeftAlignCell">
                        &nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>

                </tr>
                </table>

            </ContentTemplate>
        </asp:UpdatePanel> 
```

后面的代码：

```
 protected void comboCountry_OnSelectedIndexChanged(object sender, EventArgs e)
        {
            try
            {
                SqlDataSource2.SelectCommand = "SELECT * FROM [location] where [country_id]=" +
                                               comboCountry.SelectedValue;
                comboCity.DataBind();
            }
            catch (Exception exception)
            {
                Debug.WriteLine(exception.Message); 
```

} }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:48:42.053

因此，我认为标记没有任何问题 - 您是否在后面的代码中设置了任何更新面板属性？

另一种尝试可能是使用显式触发器声明或注册 - 例如

```
<asp:UpdatePanel runat="server" ID="updatePanel1" >
   <Triggers>
        <asp:AsyncPostBackTrigger ControlID="comboCountry" />
   </Triggers>
   ... 
```

或等效代码，例如

```
ScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(comboCountry); 
```

您也可以尝试将`ClientIDMode`这些组合框更改为 AutoID 或 Predictive。

# objective-c - 如何将制表符空间添加到 UILabel.text

> ID：14229484
> 
> 赞同：4
> 
> 时间：2013-01-09T06:29:06.033
> 
> 标签：objective-c, ios4

我有一个 UILabel 实例，比如 mylabel。

我想做的是这样的：

```
mylabel.text = @"Age\tLimit\tYear"; 

instead of  

mylabel.text = @"Age           Limit       Year"; 
```

但是当我尝试时， \t 无法识别。如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T08:25:27.233

也可以先格式化字符串

```
NSString *formattedString = [NSString stringWithFormat:@"Age%8s%8s",[@"Limit" UTF8String], [@"Year" UTF8String]];

mylabel.text = formattedString; 
```

不幸的是， %@ 格式化程序不会添加空格来调整字段宽度。所以我使用带有 %s 说明符的 UTF8String 来调整宽度。

注意：宽度指定要输出的最小字符数，通常用于填充列表输出中的固定宽度字段，否则字段会更小，尽管它不会导致截断过大的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:55:36.177

再添加一个反斜杠，它会是这样的。

```
mylabel.text = @"Age\\tLimit\\tYear"; 
```

这样它就不会被解析为表示为“\t”的制表符。

在这里您有更多信息：[如何使用 RegexKitLite 转义 NSString 中的特殊字符？](https://stackoverflow.com/questions/4354606/how-do-i-escape-special-characters-in-an-nsstring-using-regexkitlite) 这里也是：[如何在 Objective-C NSString 中编写特殊字符](https://stackoverflow.com/questions/6085116/how-to-write-special-character-in-objective-c-nsstring)

# sql - SQL如何检查服务是否在另一台计算机上运行

> ID：14229487
> 
> 赞同：1
> 
> 时间：2013-01-09T06:29:10.897
> 
> 标签：sql, windows-services, monitoring, status

因此，我可以使用以下语句检查我的计算机（或我在 SQL 服务器管理器中连接到的实例）上正在运行哪些服务

```
EXEC xp_servicecontrol N'querystate',N'Service Name here' 
```

哪个将返回 Running 或 Stopped

我如何（如果有的话）远程检查在我的网络上没有 SQL 管理工作室的服务器上运行的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:04:11.530

简而言之，使用 MSSQL 监控服务不会是最成功的监控服务方式。有很多监控解决方案可以为您做到这一点，并在出现问题时提醒您。

有关一些信息，请参阅以下答案：[监控多个服务（Web 服务、oracle、Web 应用程序）的正常运行时间和运行状况](https://stackoverflow.com/questions/14193098/monitoring-uptime-and-health-of-several-services-web-service-oracle-web-app/14193152#14193152)

这个答案中提到的解决方案都是开源和免费的，我个人在我们拥有超过 3000 万注册用户和 350 000 个并发用户连接的服务器上使用了其中的一些。如果没有这些监控解决方案，我的生活将是地狱。它们开箱即用，可让您监控各种事物。

让 SQL Server 去做数据库工作。

# java - Hibernate EhCache：获取二级缓存中的所有条目

> ID：14229490
> 
> 赞同：0
> 
> 时间：2013-01-09T06:29:24.820
> 
> 标签：java, hibernate, ehcache

如何获取二级缓存中可用的所有条目？

我的应用程序通过 cache.removeAll(); 重新缓存 并在 Hibernate 2nd Level 中列出 all() 。它将缓存我需要的所有条目。

并且在这 15 分钟内.. 我只希望从第二级获取所有条目（不打 DB）

我不希望使用休眠查询，因为底层经常变化。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:44:54.843

我设法通过使用来实现这一点：

假设我的密钥是一个字符串：

```
List keys = Ehcache.getKeysWithExpiryCheck();
List<ABC> abcList = new ArrayList();

for(Object key = keys){
    String k = (String)((CacheKey) key).getKey();
    abcList.add(dao.get(k));
} 
```

dao.get() 将在数据库之前先访问缓存。

=）如果有人有更好的解决方案，请告诉我。

# html - 更改文本字段的宽度以显示所有字符

> ID：14229491
> 
> 赞同：1
> 
> 时间：2013-01-09T06:29:24.673
> 
> 标签：html, css, ruby-on-rails, twitter-bootstrap

我正在开发一个应用程序，其中我有一个 Rails 代码，就像这样 -

```
<input type="text" readonly="readonly" value="<%= linkbunch_url(@link.link) %>" /> 
```

现在这里的值超过了 40 个字符。但文本字段仅显示 33 个字符。所以我添加了 'size' 和 'maxlength' 属性，但它没有用。我还向 width:500px 等添加了 CSS 样式，但它没有用。到目前为止，我在 rails 中使用了 twitter bootstrap。那么在 twitter bootstrap 中是否有任何方法来格式化这个字段或任何简单的 css 或 html 来做到这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:34:03.960

参考：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

您可以尝试添加以下任何一个类：

*   输入-xxlarge
*   span12 （或任何适合您的父容器的值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:39:44.870

奇怪的是，通过 CSS 添加宽度不起作用。可能有一种引导样式会覆盖您的设置宽度。

像这样的[http://jsfiddle.net/FBxHh/1/](http://jsfiddle.net/FBxHh/1/)不起作用？

```
<input type="text" class="myInput" readonly="readonly" value="lorem ipsum lorem ipsum lorem ipsum lorem ipsum" /> 
```

CSS：`.myInput { width: 500px; }`

# multithreading - 使用多线程加载多个模型

> ID：14229493
> 
> 赞同：1
> 
> 时间：2013-01-09T06:29:26.610
> 
> 标签：multithreading, pthreads, threadpool

我有 180 个 SVM 模型要同时运行。目前我在开始时将模型加载到数组中。然后当我需要运行模型时，我使用 pthread 创建 180 个线程，然后每个线程获取指向每个模型的指针，并进行一些计算。

我担心的是，每次我想做一些计算时创建 180 个线程可能会产生严重的开销（并且有很多计算要做）。所以我想的是，一开始就将 SVM 模型加载到 180 个线程中，并在每次我想做一些计算时重用它们。

我的想法完全可行吗？将不同的模型加载到每个线程中并同时使用所有线程？我考虑过线程池，但我认为这不是典型的线程池用例。我将不胜感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:52:40.023

除非您有 180 个 CPU 可供使用，否则您无法真正同时运行它们。否则，当线程相互争斗以取得进展时，您会浪费大量精力在线程之间切换。

更好的方法可能是创建与您可用的 CPU 或内核数量接近的线程数，并将各个模型从队列中分配给线程。

假设您有 8 个要用于此目的的内核。创建 8 个“工作”线程，让每个线程从 180 个队列中挑选一个并处理它。当任何工作线程完成时，它会对上述 180 线程场景中的结果执行任何操作，并从队列中获取下一个 SVM 模型。继续此操作，直到处理完所有 180 个模型。

与一次 180 个线程相比，它可能需要更少的挂钟时间来完成，并且几乎可以肯定地在系统上施加的资源负载更少。完成此设置后，您可以试验运行的工作线程数以确定池大小的最佳位置。

# javascript - 标题大小写/正确大小写，除非使用 Javascript 连续大写

> ID：14229494
> 
> 赞同：1
> 
> 时间：2013-01-09T06:29:28.123
> 
> 标签：javascript, html

我有一个用户输入信息的表单，然后这些信息会在网站上公开显示。由于我不能相信用户正确输入信息，我使用 javascript 来纠正他们的错误。例如，其中一个字段要求您按以下格式（正确大小写）输入人名：名字

我正在使用以下函数将他们的输入转换为标题/原写：

```
var firstname = [the value the person entered on the form as the first name]
function toTitleCase(str) { return str.replace(/wS*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});}
toTitleCase(firstname); 
```

我遇到的一个问题是，当人们故意尝试在同一字段中使用一系列全部大写的字母时，例如 CFO 或 CPA（或其他一些需要全部大写的首字母缩写词）。例如，如果他们输入：“first name CPA”，javascript 函数会将其转换为“First Name Cpa”，这几乎是正确的……但 CPA 需要保持全部大写。

这对我来说是一个脑筋急转弯，因为我无法找到解决方案。有什么帮助吗？无论解决方案是什么，它绝对必须是一个 javascript 解决方案，如果你能想出一个的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:35:17.703

不幸的是，这可能是不可能的。唯一可行的解​​决方案是列出应具有特定大小写设置的单词/短语。但也很难捕捉到像麦当劳这样永无止境的名字。因此，最好不要尝试修复条目或简单地手动查看条目。

# java - 在mac中通过应用程序（.jar）读取/写入文件时权限被拒绝错误

> ID：14229495
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:29:32.757
> 
> 标签：java, macos, swing

我在 swing 中创建了一个应用程序，还为同一应用程序创建了一个安装程序。

安装程序和应用程序都可以在 Windows 系统上完美运行。

但我的问题是，当我尝试在 mac os 中运行它时，它并不能完美地处理所有数据。

我发现在我的应用程序中我使用了“.xyz”类型的属性文件和目录来保存一些数据，所以在 mac os 中“。” 前置用作隐藏文件。

它给出了类似的错误

```
Error: /Users/userxyz/Library/Application Support/.appdir/.propertydir/.logininfo (Permission denied)

java.io.IOException: Permission denied
    at java.io.UnixFileSystem.createFileExclusively(Native Method)
    at java.io.File.createNewFile(File.java:883) 
```

有没有人有解决上述错误的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:29:59.323

> 问题出在 Mac OS 中。

不，问题是没有权限写入`Library`. 通常绰绰有余，但您至少应该遵循[*技术问答 QA1170：Mac OS X 上的重要 Java 目录中*](http://developer.apple.com/library/mac/#qa/qa1170/_index.html)推荐的方法。请注意用户偏好、用户数据和应用程序支持之间的区别，每一个都植根于. 另请注意，默认情况下使用。此外，*没有*理由使用隐藏文件名。`userxyz`[`Java WebStart`](https://stackoverflow.com/tags/java-web-start/info)[](http://developer.apple.com/library/mac/#qa/qa1170/_index.html)*`System.getProperty("user.home")``java.util.Preferences``~/Library/Preferences/your.qualified.name`*

# android - 如何在Android的谷歌地图中的同一地址上放置多个标记

> ID：14229499
> 
> 赞同：3
> 
> 时间：2013-01-09T06:29:37.180
> 
> 标签：android, google-maps

我有一个 android 应用程序，它将从 JSON 中检索纬度和经度、地址值。这些检索到的值被发送到 MapActivity 以在特定位置放置标记。

我的问题是，如果地址在同一条街上，它只显示一个标记并且不在同一条街上显示第二个标记，我如何在 googleMap 上显示第二个标记

任何帮助将不胜感激在此先感谢。

# header - 如何自定义 tcpdf 页眉和页脚？

> ID：14229502
> 
> 赞同：0
> 
> 时间：2013-01-09T06:30:01.843
> 
> 标签：header, customization, footer, tcpdf

请分享自定义程序 tcpdf 页眉和页脚部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T09:19:41.303

设置页眉。

```
$PDF_HEADER_LOGO = "logo.png";//any image file. check correct path.
$PDF_HEADER_LOGO_WIDTH = "20";
$PDF_HEADER_TITLE = "This is my Title";
$PDF_HEADER_STRING = "Tel 1234567896 Fax 987654321\n"
. "E abc@gmail.com\n"
. "www.abc.com";
$pdf->SetHeaderData($PDF_HEADER_LOGO, $PDF_HEADER_LOGO_WIDTH, $PDF_HEADER_TITLE, $PDF_HEADER_STRING); 
```

设置页脚。
**打开 tcpdf.php 文件并搜索“public function Footer()”** 现在在这个函数中**看到最后一个 else 条件，**你可以在那里添加你的代码
例如

```
$this->SetX($this->original_lMargin);
$footer_data="Abc Company Pvt Ltd XYZ 20 000 111 222 USA credit Licence Number 000000";
$this->Cell(0, 0, $this->getAliasRightShift().$footer_data, 'T', 0, 'L');
$this->Cell(0, 0, $this->getAliasRightShift().$pagenumtxt, 'T', 0, 'R'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:16:22.970

部分涵盖：[https ://stackoverflow.com/a/12672014/279262](https://stackoverflow.com/a/12672014/279262)

您可以通过以下方式自定义页眉/页脚：

```
class MyTCPDF extends TCPDF
{
   public function Header()
   {
      // Customised header
   }
   public function Footer()
   {
      // Customised footer
   }
} 
```

# android - 如何在 Horizo ntalScrollView 中禁用 scolling？

> ID：14229511
> 
> 赞同：3
> 
> 时间：2013-01-09T06:30:51.210
> 
> 标签：android, horizontalscrollview

我的项目中有一个 Horizo​​ntalScrollView 和一个 Button。我想要这个 >>> 当 Button 单击 Horizo​​ntalScrollView 时不要滚动。真正的用户可以修复视图。

我使用此代码，但它不起作用。

```
 Button btn_s = (Button) findViewById(R.id.button999);

    final HorizontalScrollView   h_scroll = (HorizontalScrollView) findViewById(R.id.horizontalScrollView1);

    btn_s.setOnClickListener(new OnClickListener() {

        @Override
          public void onClick(View v) {

            h_scroll.setVisibility(0);

        }

          }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:36:42.210

您可以使用，

```
h_scroll.setVisibility(View.INVISIBLE);
h_scroll.setVisibility(View.GONE); 
```

此外，您可以使用该函数为滚动视图定义自己的行为，

```
public boolean onInterceptTouchEvent(MotionEvent ev) { } 
```

看看这里，[Intercept Horizo​​ntal ScrollView](https://stackoverflow.com/a/2655740/1626878)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:09:40.947

我用这段代码解决了这个问题：

```
 Button btn_s = (Button) findViewById(R.id.button999);
 final HorizontalScrollView   h_scroll = (HorizontalScrollView)findViewById(R.id.horizontalScrollView1);
 btn_s.setOnClickListener(new OnClickListener() {

@Override
  public void onClick(View v) {

       if(!return_h_scroll){

        return_h_scroll  = true;

       }   
       else
            return_h_scroll  = false;

}

  });
  h_scroll.setOnTouchListener(new OnTouchListener() {

 @Override
 public boolean onTouch(View v, MotionEvent event) {

     return return_h_scroll;

 }
 }); 
```

# vb.net - 在 VB.net 中隐藏控件组

> ID：14229520
> 
> 赞同：0
> 
> 时间：2013-01-09T06:31:15.030
> 
> 标签：vb.net

在我的带有员工详细信息的 VB.NET 项目表单中，有十四个标签框、五个文本框、四个蒙版文本框、两个组合框、两个单选按钮、一个富文本框和两个按钮。我想在加载表单时隐藏这些项目。我尝试

```
.Visible = False 
```

方法。但这是一个很长的代码。我如何将这些项目隐藏在一个简单的代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:38:37.617

![在此处输入图像描述](../Images/3f09f1af591a7b3d2138b29baf32f5e1.png) 将这些控件放在 GroupBox2 中并将其可见属性设置为 false。

![在此处输入图像描述](../Images/94d99084b727cf8acf00ad95f89c7072.png)

当您的应用程序运行时，GroupBox 不可见，因此我使用标题为“显示 GroupBox2”的按钮，因此当我单击该按钮时，GroupBox2 将可见：

![在此处输入图像描述](../Images/63be52ed6d6a16cd6cc236f8c647fc83.png)

使 GroupBox 可见的源代码

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        GroupBox2.Visible = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:41:44.310

使用`Panel`包含所有这些控件（标签、文本框、组合框等）的 a，并将面板上的 .visible 属性设置为 false。在这种情况下，您不必为每个控件设置 .visible。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:43:32.773

你可以把它们放到一个面板上，然后你只需要设置面板​​的可见性

# android - 我可以阻止应用程序安装在 android 的特定设备中吗？

> ID：14229525
> 
> 赞同：4
> 
> 时间：2013-01-09T06:31:34.157
> 
> 标签：android, enterprise, imei, authenticity

我有一个不应安装在所有手机上的企业应用程序。我有 50 部带有 IMEI 信息的手机，我的应用程序应该只安装在这 50 部手机中。即使他获得了apk，用户也不应该能够安装我的应用程序。

我试过这个：如果我安装了应用程序，那么我可以检查手机的IMEI号码是否是50个中的一个。如果不是50个，我可以阻止他登录。但我想阻止安装在降低风险的首要任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:43:20.860

AFAIK，如果有 APK 文件，则无法阻止应用程序安装。尽管您可以像我认为您所做的那样阻止该应用程序在特定设备上运行。

否则，如果您想通过网络安装应用程序，您可以在[这里查看。](https://stackoverflow.com/a/1885022/1626878)使用它，您可以仅在您想要允许的设备上安装该应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:50:51.807

正如@Sahil 所说，如果有apk 文件，您无法阻止不安装您的应用程序。

但是，AFAIK 你是说你有 50 部手机的 IMEI 号码。因此，我认为使用“以下策略”可以实现 70% 的可能性。

我想我可以帮助您在一定程度上解决您的问题（不完全）。

**正如我所说，它不会完全解决您的问题，但您可以限制您的应用程序不安装在您的 50 个移动品牌名称列表之外的其余设备中。**

> **您可以防止您的应用程序未安装** **在您的 50 个手机列表之外的所有其他品牌/型号中。**
> 
> 您可以做的是使用您的设备品牌名称过滤特定设备的应用程序。

通过使用下方，您将不必根据编程过滤您的应用程序。

坚果，您可以从 android 市场开发者控制台执行[此](https://market.android.com/publish/)操作 - 当您发布您的应用程序时。

> 开发者控制台上有一个“支持的设备”部分，它向您显示了可以访问 android 市场的所有设备的列表。然后，您可以过滤掉与您的应用程序不兼容的设备或制造商

这是主开发者控制台中的部分：

![这是主开发者控制台中的部分](../Images/cca679b4f0dd9e595b75240ee1d5499a.png)

您可以在此处排除设备和/或制造商，使其无法查看您的应用

![您可以在此处排除设备和/或制造商，使其无法查看您的应用](../Images/4dd891d88c820a60c1a33f6566bb10d4.png)

有关更多信息，请参阅[设备可用性](https://support.google.com/androidmarket/developer/bin/answer.py?hl=en&ctx=go&answer=1286017)帮助页面，其中显示：

> 设备可用性对话框可以通过两种强大的方式帮助开发人员：
> 
> 了解哪些设备可以在 Android 电子市场中找到您的应用
> 
> 1.  设备可用性根据您的清单设置提供兼容设备的动态列表。例如，如果您的 apk 清单指定大屏幕尺寸，则控制台将反映可以在 Market 中找到您的应用的受支持设备。
>     
>     
> 2.  您还可以使用动态搜索功能来查看您的应用程序不可用的设备。您可以按制造商、设计名称（例如“Passion”）或实际的公共设备名称（例如“Nexus One”）进行搜索，以查看您的清单设置是否过滤了设备。过滤有问题或不兼容的设备 此功能为开发人员提供了特定于设备的管理选项。当您将设备添加到“手动排除的设备”列表时，您的应用程序将无法用于市场中该排除的设备。这主要是为了帮助开发人员提供可能的最佳用户体验，帮助开发人员过滤已知存在兼容性问题的设备。

正如我所说，它不会完全解决您的问题，但您可以限制您的应用程序不安装在您的 50 个移动品牌名称列表之外的其余设备中。

希望它会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-30T20:19:01.167

虽然这是旧的，但如果有人遇到这样的需求，有 3 件事需要注意：

1.  如果有人拥有 APK 文件，则无法阻止应用安装。
2.  您可以在 android 市场开发者控制台中使用您的设备品牌名称过滤特定设备的应用程序。
3.  最好的解决方案是使用 IMEI 信息过滤器。

这是通过以下步骤完成的：

*   一旦您的应用程序启动（在启动屏幕显示期间），获取设备的 IMEI 信息，
*   检查互联网是否可用，如果不提示用户并暂停任务，直到互联网可用
*   一旦互联网可用，请根据您在数据库中的 IMEI 信息检查设备的 IMEI 信息
*   如果它们匹配或找到，则向设备返回一个值，
*   根据返回的值，您可以选择继续启动应用程序或终止应用程序进程。

**笔记：**

关于第 3 点的最佳方法是在共享首选项上使用代码块，即代码块应仅在应用程序首次启动期间执行，否则如果您必须检查，您的应用程序可能会让用户反感每时每刻。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:39:20.067

在这一点上，您的解决方案似乎是最方便的。您还可以使用设备管理策略对您的设备进行企业级限制。看：

[http://developer.android.com/training/enterprise/device-management-policy.html](http://developer.android.com/training/enterprise/device-management-policy.html)

# eclipse - 无法在 Eclipse 切换面包屑中键入过滤器文本

> ID：14229526
> 
> 赞同：1
> 
> 时间：2013-01-09T06:31:37.810
> 
> 标签：eclipse, breadcrumbs

如何像这张图片一样在切换面包屑中**键入过滤器文本？**

![问题说明](../Images/eea32660d984af03fa78f241c96a71e2.png)

我无法在 3.4 (Ganymede)、Indigo Helios 和 4.2 Release (Juno Packages) 中输入文本。

**或者**，是否有任何插件可以切换面包屑的过滤？

ps：图片来自介绍 eclipse 3.4 M5 的新 功能的[一页，](http://blog.csdn.net/xiao_jiang51/article/details/2211760)**但我在**[eclipse](http://archive.eclipse.org/eclipse/downloads/drops/R-3.4-200806172000/whatsnew3.4/eclipse-news-part2.html) 3.4 发布的新功能中找不到“类型过滤文本”

# ios - CABasicAnimation 的 Frame 属性没有动画？

> ID：14229529
> 
> 赞同：0
> 
> 时间：2013-01-09T06:31:43.823
> 
> 标签：ios, calayer, cabasicanimation

在我的应用程序中，我尝试使用 keyPath 添加以下动画，`frame`如下所示

```
CABasicAnimation *animation=[CABasicAnimation animationWithKeyPath:@"frame"];
    animation.duration=0.6;
    animation.repeatCount=1;
    animation.delegate=self;
    animation.timingFunction=[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
    animation.fromValue=[NSValue valueWithCGRect:self.layer.frame];
    animation.toValue=[NSValue valueWithCGRect:rect];//rect is a new frame 
    [self.layer addAnimation:animation forKey:@"frameChange"];
    [self setFrame:rect]; 
```

上述方法没有发生动画，但我成功地`animationDidStop:(CAAnimation *)anim finished:` 调用了委托方法。

但是下面的位置属性动画效果很好

```
CABasicAnimation *animation=[CABasicAnimation animationWithKeyPath:@"position"];
animation.duration=0.6;
animation.repeatCount=1;
animation.delegate=self;
animation.timingFunction=[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
animation.fromValue=[NSValue valueWithCGPoint:self.layer.position];
animation.toValue=[NSValue valueWithCGPoint:rect.origin];
[self.layer addAnimation:animation forKey:@"frameChange"]; 
```

为什么 frame 属性没有动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:39:40.183

Frame 不是动画属性。您必须为位置和边界制作动画。要将它们同时放在一起，请将它们放在 CAAnimationGroup 中。

# android - Ubislate 7ci 驱动使用 adb devices 列出设备

> ID：14229530
> 
> 赞同：4
> 
> 时间：2013-01-09T06:31:46.143
> 
> 标签：android, adb, device-driver

我将我的 Ubislate 7ci 设备与安装在 windows 上的 android SDK 连接起来。当我使用“adb devices”命令时，这个特定的设备没有被列出。我搜索了 Ubislate 驱动程序但找不到。我希望你们中的大多数人都能成功地让 adb 检测到设备。请让我知道如何让 adb 检测到 Ubislate 7ci。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:20:21.730

其他答案中提到的内容仅适用于公认的设备，但不适用于所有设备。

对于一台设备，我也遇到了同样的问题，我也做了这些提到的事情，但它没有帮助，而且我在互联网上搜索过，但没有找到任何解决方案。

所以最终的解决方案是从设备供应商处获取 USB 驱动程序。您只能从设备制造商处获取驱动程序。所以开始着手，就是这样。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:15:26.053

如果您的制造商不提供驱动程序，请尝试使用 PDAnet 驱动程序等通用驱动程序。[这](http://www.topnotchtablets.com/installADBdriver)应该可以帮助您解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T07:03:25.680

请参阅下面的链接，您可以为所有用户使用通用驱动程序

[http://developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)

[http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver](http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver)

# ruby-on-rails - 如何在我的 Gemfile 中启用详细标志

> ID：14229536
> 
> 赞同：13
> 
> 时间：2013-01-09T06:32:20.130
> 
> 标签：ruby-on-rails, rubygems, gem

如何在我的 Gemfile 中启用详细标志，以便在构建本机扩展时准确跟踪正在发生的事情。因为安装通常需要很长时间。

```
gem install libv8
Fetching: libv8-3.11.8.11.gem (100%)
Building native extensions.  This could take a while... 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-11T19:26:43.180

你应该使用：

```
gem install --verbose libv8 
```

并通过捆绑

```
bundle install --verbose 
```

# javascript - 如何从必须在目标页面范围内运行的代码中调用 Greasemonkey 的 GM_ 函数？

> ID：14229539
> 
> 赞同：5
> 
> 时间：2013-01-09T06:32:24.870
> 
> 标签：javascript, youtube, youtube-api, greasemonkey

我在这里问了一个问题并得到了答案：[如何从 Greasemonkey 调用这个 YouTube 功能？](https://stackoverflow.com/questions/14220250/how-to-call-this-youtube-function-from-greasemonkey)

该代码起作用并向页面添加了一个按钮，该按钮捕获了视频时间。
但是，关键部分必须在目标页面范围内运行——Greasemonkey 的`GM_`功能不可用的地方。

我想用来`GM_setValue()`记录视频时间。如何`GM_setValue()`从按钮的`click`处理程序中调用？

这是[完整脚本的相关部分（右键保存）](http://userscripts.org/scripts/version/156005/541247.user.js)：

```
... ...

//-- Only run in the top page, not the various iframes.
if (window.top === window.self) {
    var timeBtn         = document.createElement ('a');
    timeBtn.id          = "gmTimeBtn";
    timeBtn.textContent = "Time";
    //-- Button is styled using CSS, in GM_addStyle, below.

    document.body.appendChild (timeBtn);

    addJS_Node (null, null, activateTimeButton);
}

function activateTimeButton () {
    var timeBtn = document.getElementById ("gmTimeBtn");
    if (timeBtn) {
        timeBtn.addEventListener ('click',
            function () {
                var ytplayer = document.getElementById ("movie_player");
                //-- IMPORTANT:  GM_functions will not work here.

                console.log ("getCurrentTime(): ", ytplayer.getCurrentTime() );
                alert (ytplayer.getCurrentTime() );
            },
            false
        );
    }
    else {
        alert ("Time button not found!");
    }
}

... ... 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T10:14:26.233

`GM_`要从必须在页面范围内运行的代码（例如您的点击处理程序）中使用 Greasemonkey 的函数`timeBtn`，请执行以下操作：

1.  使用页面范围代码`postMessage`以字符串格式发送数据。
2.  让 Greasemonkey 脚本监听适当的消息并`GM_`使用消息数据调用所需的函数。
3.  使用 JSON 将数据安全地打包成字符串。

将`window.postMessage ()`和添加`window.addEventListener ("message"...`到您的代码中，它变为：

```
... ...

//-- Only run in the top page, not the various iframes.
if (window.top === window.self) {
    var timeBtn         = document.createElement ('a');
    timeBtn.id          = "gmTimeBtn";
    timeBtn.textContent = "Time";
    //-- Button is styled using CSS, in GM_addStyle, below.

    document.body.appendChild (timeBtn);

    addJS_Node (null, null, activateTimeButton);

    window.addEventListener ("message", receiveTimeMessage, false);
}

function activateTimeButton () {
    var timeBtn = document.getElementById ("gmTimeBtn");
    if (timeBtn) {
        timeBtn.addEventListener ('click',
            function () {
                var ytplayer = document.getElementById ("movie_player");
                /*-- GM_functions will not work here, so send the data
                    back to the GM script scope.
                */
                //-- Tag the message, we may not be the only ones sending.
                var messageTxt  = JSON.stringify (
                    {currentVidTime: ytplayer.getCurrentTime ()}
                );
                window.postMessage (messageTxt, "*");
            },
            false
        );
    }
    else {
        alert ("Time button not found!");
    }
}

function receiveTimeMessage (event) {
    var messageJSON;
    try {
        messageJSON     = JSON.parse (event.data);
    }
    catch (zError) {
        // Do nothing
    }

    if ( ! messageJSON  ||  ! messageJSON.currentVidTime)
        return; //-- Message is not for us.

    /*--- We have a time value, set it with GM_setValue ()
        But, WARNING: First make sure that the stored value is
        a safe string.  GM_setValue() crashes on just about anything else.
    */
    var safeValue       = JSON.stringify (messageJSON.currentVidTime);
    GM_setValue ("videoMarkedTime", safeValue);
    console.log ("Video time recorded with GM_setValue ().");
}

... ... 
```

您可以通过打开`about:config`并搜索来查看存储的值`videoMarkedTime`。

# php - While 循环中的 HTML 表单

> ID：14229544
> 
> 赞同：0
> 
> 时间：2013-01-09T06:32:51.360
> 
> 标签：php, html

我有一个页面为请求访问网站的用户生成邀请密钥。

```
<section id="beta">
    <span class="title">Users Requesting an Invite</span>
    <div>
        <ul>
            <li>#</li>
            <li>Email</li>
            <li>Invite Code</li>
            <li></li>
        </ul>
        </br>
        <ul>
            <?
                $i = 1;
                while($request = mysql_fetch_array($reqlist)) {
            ?>
            <span>
            <li><?=$i?></li>
            <li><?=$request['email']?></li>
            <?php if(isset($request['invite_code']) && !empty($request['invite_code'])) {?>
                <li><?=$request['invite_code'];?></li>
            <?} elseif(empty($request['invite_code'])) {?>
                <li><?if($onum == $i){echo $invcode;}?></li>
                <li>
                    <form id="<?=$i?>" method="post">
                        <input type="submit" name="submit" value="Generate" />
                        <input type="hidden" name="num" value="<?=$i?>"/>
                    </form>
                </li>
                <?php if($onum == $i && isset($invcode) && !empty($invcode)) {?>
                <li>
                    <form method="post" name="save"> 
                        <input type="submit" name="save" value="Save" />
                        <input type="hidden" name="inv" value="<?=$invcode?>" />
                        <input type="hidden" name="req_id" value="<?=$request['id']?>" />
                    </form>
                </li>
                <? } ?>
            <? } ?> 
        </br>
        </span>
        <?
            $i++;
            //$invcode = '';
            }
        ?>
        </ul>
    </div>
</section> 
```

因此，正如我的代码所述，该过程如下。该表打印出所有请求邀请的用户，最后带有一个生成按钮。单击生成后，我有一个函数可以创建一个带有键的变量。生成密钥`<li>`后，将弹出一个带有表单保存的新密钥，以便可以将其保存在数据库中。

但问题是，当单击生成时，它仅适用于第一条记录。我知道这是由于`$invcode = '';`制作它，`NULL`但我不确定如何以不同的方式进行操作，这样如果单击任何生成按钮，它只会对特定的人有效。

**更新：**更新了工作答案。也好像我用错了这个问题。一次只有第一行会生成一个代码。每一行的节省都完全正常。只是如果 $invcode 未设置，每个生成按钮将仅在第一行起作用。但我通过将行号添加到组合中来修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:51:13.243

感谢您的批评，由于某些项目已弃用，因此将研究新的编码方式。但无论如何都想出了如何解决它。

我添加`<input type="hidden" name="num" value="<?=$i?>"/>`到生成表单并让它检查帖子编号是否等于行号，如果它匹配它回显。`if($onum == $i){echo $invcode;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:00:07.293

尝试使用 -

```
<input type="submit" name="save[]" value="Save" />
<input type="hidden" name="inv[]" value="<?=$invcode?>" />
<input type="hidden" name="req_id[]" /> 
```

由于相同的输入类型名称，您将获得第一行的值。您需要在名称后使用 [] 来获取该名称中的所有值

并且您可能需要更改提交值的代码。在提交页面`print_r`变量上查看。

例子 -

```
print_r($_POST['inv']); 
```

它会输出一个数组，我希望剩下的事情你可以单独做:)

# java - 为 JButton 自定义有点复杂的样式

> ID：14229545
> 
> 赞同：1
> 
> 时间：2013-01-09T06:32:54.557
> 
> 标签：java, swing, jbutton

当用户按下 Harris（绿色）按钮时，如 GreenButton Image 所示，OP1 按钮将变为绿色，上面有任何图标，下面有一个计时器....第一个图像显示的是 harris 按钮

![在此处输入图像描述](../Images/a09e91e2df133f524b86edff2fc3e72d.png)

当我们点击 harris 按钮时，其他任何背景颜色的按钮都会变成这样的形状，如下图所示

![在此处输入图像描述](../Images/dff5cf9fde7f760ae04ef897792c84ed.png)

这个按钮将包含任何图标..（一个在左边一个在右边）和两个计时器和分色。

> 编辑：1 问题是我不知道如何像这样自定义我的第二个（OP1）按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:42:59.260

[如此处](https://stackoverflow.com/a/3484251/230513)所示，您可以实现该`Icon`接口以呈现任何所需的外观并动态更新剩余时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:34:50.543

使它成为一个带有 MouseListener 的 JPanel。这样你就可以在组件内部“玩”了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T08:33:14.260

基本观点

*   使用`JToggleButton`with `CardLayout`（通过确定在两张卡之间切换`JToggleButton.isSelected()`）

*   只有`JFrames ContentPane (BorderLayout)`并且`JPanel(FlowLayout)`已经`LayoutManager`在 API 中实现，其余的`JComponents`必须添加适当的

第二。看法

*   将 opaque `JPanels`（[或 JLabel](https://stackoverflow.com/questions/8575641/how-returns-xxxsize-from-jcomponents-added-to-the-jlabel)）放入`JToggleButton`, 使用`GridLayout`

*   把正确`LayoutManager`的`JPanels`，然后添加其余的`JComponent`/`Icons`

# python - “and”和“or”如何在python中比较数字？

> ID：14229547
> 
> 赞同：0
> 
> 时间：2013-01-09T06:33:25.053
> 
> 标签：python

我正在浏览伯克利加州大学提供的计算机课程中的一些实验室材料，并遇到了一些关于 python 测试问题形式的示例。

1和2和3回答3

我一直盯着它看，直到我手指发红，但无济于事..有人可以指导我看一些解释这一点的文档吗？我不知道这里到底发生了什么..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:39:39.027

请参阅[语言参考](http://docs.python.org/3/reference/expressions.html#boolean-operations)：

> 所有其他值都被解释为 true。

例如，数字 > 0 被解释为真。

> 该表达式`x and y`首先计算*x*；如果*x*为假，则返回其值；否则，评估*y*并返回结果值。

返回其实际值（不是解释值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:37:43.803

`x`如果 x和`y`y 都为真，则返回真；如果其中一个为真，则while `x`或`y`返回。如果全部为真，则

类似地多次`and`返回。`true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:39:09.193

从[文档](http://docs.python.org/2/reference/expressions.html)：

> 表达式 x 和 y 首先计算 x；如果 x 为假，则返回其值；否则，评估 y 并返回结果值。
> 
> 表达式 x 或 y 首先计算 x；如果 x 为真，则返回其值；否则，评估 y 并返回结果值。

`bool(1) = True`， 只要`bool(0) = False`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:31:55.967

在 Python 中，所有非 0 的数字都被评估为`True`. 只有 0 被评估为`False`。在这段代码中，`1 and 2 and 3`真正评估为`True and True and True`. 因此，它必须返回`True`。现在我们知道 3 与`True`- 这就是解释器返回 3 是正确的原因。那么，当它可以让生活变得轻松并返回时，为什么它会返回 3`True`呢？这就是 python 的方式——它返回最后一个评估值。希望这能回答你的问题！

# jquery - DOM 元素活动状态问题

> ID：14229548
> 
> 赞同：0
> 
> 时间：2013-01-09T06:33:26.953
> 
> 标签：jquery, html, css

当我单击 DOM 元素时，我试图实现一种效果，在这种情况下 a `list`，目标`list`会旋转并保持这种状态。

这有点难以解释，所以这里是我目前正在做的事情的[链接。](http://www.mattlebrun.com/hacks/b-circ-menu/)

当您长按圆形灰色对象时，菜单列表会慢慢显示。然而，一旦你放手，它会再次消失。

我的目标是在圆形灰色对象上单击一次会显示菜单并且菜单保持显示状态。

它很长，所以我只会给你[css链接](http://www.mattlebrun.com/hacks/b-circ-menu/assets/css/circ-menu2.css)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:53:37.480

您可能对`:target`选择器感兴趣。

[http://css-tricks.com/on-target/](http://css-tricks.com/on-target/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:02:51.643

经过进一步研究和摸索css和jquery后，我终于解决了。

我对 css 缺乏理解是错误的。

**底线：**我只需要通过 jquery 覆盖 DOM 元素的默认状态，以防止菜单在单击后再次隐藏。

你可以在[这里](http://www.mattlebrun.com/hacks/b-circ-menu/)查看结果。

不过感谢您的建议。我很感激！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:48:32.513

从概念上讲，您可以拥有 mousedown 和 mouseup 事件的处理程序，以及两者都可以访问的计时机制。

在 mousedown 上，您启动计时机制并启动慢速动画。

在 mouseup 你要么

*   如果鼠标按下后的时间滞后低于某个阈值（即快速点击），则完成动画

*   如果自鼠标按下以来的时间滞后高于阈值（即单击+按住），则结束动画并将菜单返回到未打开状态

# ember.js - 尝试在 emberjs 中渲染两个模板视图时，只有后一个会渲染

> ID：14229551
> 
> 赞同：2
> 
> 时间：2013-01-09T06:33:38.193
> 
> 标签：ember.js, handlebars.js

我是 emberjs 的新手，我试图在标记中使用两个不同的脚本标签来渲染两个视图，但只有后一个被渲染。

HTML：

```
<script type="text/x-handlebars">
  {{view Ember.Select
         contentBinding="App.peopleController"
         selectionBinding="App.selectedPersonController.person"
         optionLabelPath="content.fullName"
         optionValuePath="content.id"}}

  <p>Selected: {{App.selectedPersonController.person.fullName}}
    (ID: {{App.selectedPersonController.person.id}})</p>
</script>
<script type="text/x-handlebars">
  {{#view Ember.Checkbox}}
    Check me!
  {{/view}}
</script> 
```

我在这里也为此创建了小提琴：[jsfiddle](http://jsfiddle.net/zgLCr/416/)

在这种情况下，我只能看到复选框，但看不到下拉选择视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:18:44.847

您必须为模板命名，没有名称的模板被视为 ApplicationView 的模板，我猜如果您有多个没有名称的模板 ember 选择最后一个。所以你必须这样做：

```
<script type="text/x-handlebars" data-template-name="check-box">
   {{#view Ember.Checkbox}}
     Check me!
   {{/view}}
</script> 
```

这是一个示例[http://jsfiddle.net/zgLCr/419/](http://jsfiddle.net/zgLCr/419/) - 将 Ember.Checkbox 包装在另一个视图中没有多大意义，但它显示了如何命名和呈现视图，尽管您可以将复选框放在里面您的 ApplicationView 的模板：

```
<script type="text/x-handlebars">
   {{view Ember.Select
     contentBinding="App.peopleController"
     selectionBinding="App.selectedPersonController.person"
     optionLabelPath="content.fullName"
     optionValuePath="content.id"}}

   <p>Selected: {{App.selectedPersonController.person.fullName}}
      (ID: {{App.selectedPersonController.person.id}})</p>

   {{#view Ember.Checkbox}}
      Check me!
   {{/view}}
</script> 
```

# c++ - 如何正确存储多个实例对象？

> ID：14229560
> 
> 赞同：0
> 
> 时间：2013-01-09T06:33:59.327
> 
> 标签：c++, storage, instance

我正在制作一个中级/高级 C++ 程序，确切地说是一个视频游戏。

最近我注意到有大量内存泄漏，我想知道我创建实例的方式是否有问题。

下面是一个总结（但最初很复杂）的类：

```
class theObject
{
 //Instance variables
 //Instance functions
}; 
```

有了这个对象（连同我存储的任何其他对象，我有一个数组索引的每个不同的变体模板`theObject`。那部分并不重要，但我存储它们的方式（或在我看来）是：

```
//NEWER VERSION WITH MORE INFO
void spawnTheObject()
{
 theObject* NewObj=ObjectArray[N];
 //I give the specific copy its individual parameters(such as its spawn location and few edited stats)
 NewObj->giveCustomStats(int,int,int,int);//hard-coded, not actual params
 NewObj->Spawn(float,float,float);
 myStorage.push_back(new theObject(*NewObj));
}

//OLDER VERSION
void spawnTheObject()
    {
     //create a copy of the arrayed object
     theObject* NewObj=new theObject(*ObjectArray[N]);
     //spawn the object(in this case it could be a monster), and I am spawning multiple copies of them obviously
     //then store into the storage object(currently a deque(originally a vector))
     myStorage.push_back(new theObject(*NewObj));
     //and delete the temporary one
     delete NewObj;
    } 
```

我目前正在使用双端队列（最近从使用向量更改），但我没有看到内存使用量有任何差异。我虽然从“评论测试”中发现，我拥有的这些生成功能是内存泄漏的原因。由于这是创建/生成实例的错误方法，我想知道是否有更好的方法来存储这些对象。

tl; dr：有哪些更好的对象来存储非常量的对象以及如何存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:56:10.037

我猜你永远不会清除`myStorage`导致内存增加的新生成对象（正如你所说的内存泄漏）。如果我是正确的，您的 myStorage 声明如下：

```
std::deque<theObject*> myStorage; 
```

如果您调用以下任一调用，则指向 theObject 的指针将被删除，但不会删除真正动态分配的对象。

```
 myStorage.pop_back();
 myStorage.clear(); 
```

您的代码中的另一个小问题是，您在函数中进行了不必要的对象分配/删除`spawnTheObject()`。

**如何使用指针类型清洁容器**

您需要遍历 myStorage 中的每个元素，删除对象然后清除容器，例如：

```
for (std::deque<theObject*>::iterator iter=myStorage.begin();
     iter != myStorage.end(); ++iter)
{
   delete (*iter);
}
myStorage.clear(); 
```

**更好的解决方案：**

`std::deque`在or中使用智能指针`std::vector`，然后当您从 STL 容器中删除元素时，指针指向的对象也会被自动删除。

```
 #include <memory>

 std::deque<std::shared_ptr<theObject> > myStorage;
 myStorage.push_back(std::shared_ptr<theObject>(new *ObjectArray[N]));

 mySorage.clear();  // all memories cleared properly, no worries 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:38:35.427

`myStorage`如果您在游戏结束或需要销毁它们时没有手动删除对象，则存在内存泄漏。

```
myStorage.push_back(new theObject(*NewObj)); 
```

被推入存储的对象是由你分配的，所以当它需要消失时应该由你销毁。

我也不明白中间`NewObj`对象的必要性，它不是内存泄漏，而是不必要的性能成本，1 个分配/释放 + 1 个副本。

正如永远提到的，最好的选择是开始使用智能指针，`std::unique_ptr`或者`std::shared_ptr`（仅当 c++11 时）。

# java - 如何使用 apache axis2 将 soap 标头信息添加到 java soap 服务请求

> ID：14229562
> 
> 赞同：3
> 
> 时间：2013-01-09T06:34:02.823
> 
> 标签：java, axis2

我正在使用 apache axis2 开发 Web 服务，并且我已经生成了所需的客户端代码。客户端请求应如下所示：

```
`<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:v2="http://www.huawei.com.cn/schema/common/v2_1"
xmlns:loc="http://www.csapi.org/schema/parlayx/sms/notification_manager/v2_3/local">
<soapenv:Header>
    <RequestSOAPHeader xmlns="http://www.huawei.com.cn/schema/common/v2_1">
        <spId>35000001</spId>
        <spPassword>de96d901b3bad1db2aab76b7b0b202f2</spPassword>
        <serviceId>0003062000001100</serviceId>
        <timeStamp>20120731064245</timeStamp>
    </RequestSOAPHeader>
</soapenv:Header>
<soapenv:Body>
    <loc:startSmsNotification>
        <loc:reference>
            <endpoint>>http://10.138.30.153:9080/notify</endpoint>
            <interfaceName>notifySmsReception</interfaceName>
            <correlator>1232</correlator>
        </loc:reference>
        <loc:smsServiceActivationNumber>23424
        </loc:smsServiceActivationNumber> <!--Optional: -->
        <loc:criteria>Love</loc:criteria>
    </loc:startSmsNotification>
</soapenv:Body>
</soapenv:Envelope>` 
```

我已经能够将正文消息添加到我的请求中，但不能添加肥皂标题信息。请求的验证需要标头信息。如何在生成的客户端代码中将soap头信息添加到我的soap请求中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:10:13.807

嗨，马丁，SDP 材料在互联网上并不容易获得，但请尝试关注。

```
 OMFactory fac = OMAbstractFactory.getOMFactory();
    SOAPFactory sfac = OMAbstractFactory.getSOAP11Factory();

    OMNamespace omNs = fac.createOMNamespace(nameSpace, "ns1");

    SOAPHeaderBlock block_RequestSOAPHeader = sfac.createSOAPHeaderBlock(
    SOAPHEADER_RequestSOAPHeader, omNs);

    try
    {
        SOAPHeaderBlock block_spId = sfac.createSOAPHeaderBlock(SOAPHEADER_SPID, omNs);
        block_spId.addChild(sfac.createOMText(spId));

        String md_password = md5Digest(spId, spPassword, timeStamp);
        SOAPHeaderBlock block_spPassword = sfac.createSOAPHeaderBlock(SOAPHEADER_SPPASSWORD, omNs);
        block_spPassword.addChild(sfac.createOMText(md_password));

        SOAPHeaderBlock block_timeStamp = sfac.createSOAPHeaderBlock(SOAPHEADER_TIMESTAMP, omNs);
        block_timeStamp.addChild(sfac.createOMText(timeStamp));

        SOAPHeaderBlock block_serviceId = sfac.createSOAPHeaderBlock(SOAPHEADER_SERVICEID, omNs);
        block_serviceId.addChild(sfac.createOMText("your text"));

        SOAPHeaderBlock block_linkId = sfac.createSOAPHeaderBlock(SOAPHEADER_LINKID, omNs);
        block_linkId.addChild(sfac.createOMText(linkID));

        SOAPHeaderBlock block_OA = sfac.createSOAPHeaderBlock(SOAPHEADER_OA, omNs);
        block_OA.addChild(sfac.createOMText(OA));

        SOAPHeaderBlock block_FA = sfac.createSOAPHeaderBlock(SOAPHEADER_FA, omNs);
        block_FA.addChild(sfac.createOMText(FA));

        block_RequestSOAPHeader.addChild(block_spId);
        block_RequestSOAPHeader.addChild(block_spPassword);
        block_RequestSOAPHeader.addChild(block_serviceId);
        block_RequestSOAPHeader.addChild(block_timeStamp);
        block_RequestSOAPHeader.addChild(block_linkId);
        block_RequestSOAPHeader.addChild(block_OA);
        block_RequestSOAPHeader.addChild(block_FA);

        /*
         *
         *  <soapenv:Header>
         *    <ns1:RequestSOAPHeader xmlns:ns1="http://www.xxxxxxxx.xxxxxx.xxxxxx/common/v2_1">
         *      <ns1:spId>your spid</tns:spId>
         *      <ns1:spPassword>your password</tns:spPassword>
         *      <ns1:timeStamp>your timestamp</tns:timeStamp>
         *      <ns1:linkId>your linkid</tns:linkId>
         *      <ns1:OA>tel:your msisdn1</tns:OA>
         *      <ns1:FA>tel:msisdn1</tns:FA>
         *    </ns1:RequestSOAPHeader>
         *  </soapenv:Header>
         */

        serviceClient.addHeader(block_RequestSOAPHeader); 
```

# actionscript-3 - 如何用C语言编写ane让actionscript3.0调用？

> ID：14229564
> 
> 赞同：0
> 
> 时间：2013-01-09T06:34:15.443
> 
> 标签：actionscript-3

能给个教程或实例吗。

如何用C语言编写ane让actionscript3.0调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:15:56.720

我想你问如何让 AS3 从 C 程序中调用函数。这是一个有用的链接：

*   [使用 C/C++ 对 Actionscript 对象进行操作](http://blogs.adobe.com/flascc/2012/12/08/operating-on-actionscript-objects-in-c/)

请注意，如博客所述 -

> 问题：...我们可以在 c++ 中使用一些库，如 WINUSB 来连接到自定义 USB 设备并将数据传输到 Flash 吗？
> 
> 答：FlasCC 编译的内容在 Flash Player 的安全沙箱内运行，并且只能访问普通 Flash 应用程序可以访问的相同 Flash API。这意味着您无法以您想要的方式访问 USB 设备，因为没有 API 可以做到这一点。

## 更新 ：

我认为这`ane`是写这个答案时的拼写错误，但是我相信我的答案应该仍然有效。如果没有，请告诉我，我会继续提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:50:31.153

Adobe 在这里发布了一个很棒的教程/介绍文档：

[AIR 扩展 PDF](http://help.adobe.com/en_US/air/extensions/air_extensions.pdf)

它指导您了解创建 AS 和本机库的所有概念，然后将它们包装到 ANE 中。开始的好地方。

# liferay - liferay 中的这段代码是如何工作的

> ID：14229565
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:34:24.383
> 
> 标签：liferay, liferay-6

请解释以下代码的作用：

```
boolean showButton = ParamUtil.getBoolean(request, "showButton", true);
PortletSession psession = renderRequest.getPortletSession(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:41:15.503

代码从传递的请求对象[`ParamUtil.getBoolean(request, "showButton", true);`](https://github.com/liferay/liferay-portal/blob/master/portal-service/src/com/liferay/portal/kernel/util/ParamUtil.java#L38)中检索参数值。`showButton`

它只是调用的同义词，`request.getParameter("showButton")`但另外它还将`String`参数的值转换为`boolean`ie 如果字符串值为`"true"`, `"t"`, `"y"`, `"on"`，`"1"`它们将被转换为 boolean `true`。

# c# - mvc 音乐商店 linq to sql 购物车

> ID：14229570
> 
> 赞同：1
> 
> 时间：2013-01-09T06:34:33.900
> 
> 标签：c#, asp.net-mvc, linq, shopping-cart

我将音乐商店购物车代码用于我的 mvc 项目，但我的项目使用 linq to sql，而不是实体框架。我已将 MusicStoreEntities 类更改如下：

```
public class ShoppingCartEntities
{
    public ShoppingCartEntities()
    {
    }
    public List<h2t_Store_Product> Products { get; set; }
    public List<Cart> Carts { get; set; }
    public List<Order> Orders { get; set; }
    public List<OrderDetail> OrderDetails { get; set; }
} 
```

这些是 ShoppingCart.cs 类：

```
public class ShoppingCart
{
    ShoppingCartEntities storeDB = new ShoppingCartEntities();
    string ShoppingCartId { get; set; }
    public const string CartSessionKey = "CartId";
    public static ShoppingCart GetCart(HttpContextBase context)
    {
        var cart = new ShoppingCart();
        cart.ShoppingCartId = cart.GetCartId(context);
        return cart;
    }
    // Helper method to simplify shopping cart calls
    public static ShoppingCart GetCart(Controller controller)
    {
        return GetCart(controller.HttpContext);
    }
    public void AddToCart(h2t_Store_Product product)
    {
        // Get the matching cart and album instances
        var cartItem = (from data in storeDB.Carts
                        where data.CartId == ShoppingCartId && data.ProductID == product.ID
                        select data).Single();

        if (cartItem == null)
        {
            // Create a new cart item if no cart item exists
            cartItem = new Cart
            {
                ProductID = product.ID,
                CartId = ShoppingCartId,
                Count = 1,
                DateCreated = DateTime.Now
            };
            storeDB.Carts.Add(cartItem);
        }
        else
        {
            // If the item does exist in the cart, 
            // then add one to the quantity
            cartItem.Count++;
        }
        // Save changes
        //storeDB.SaveChanges();
    }
    public int RemoveFromCart(int id)
    {
        // Get the cart
        var cartItem = storeDB.Carts.Single(
            cart => cart.CartId == ShoppingCartId
            && cart.RecordId == id);

        int itemCount = 0;

        if (cartItem != null)
        {
            if (cartItem.Count > 1)
            {
                cartItem.Count--;
                itemCount = cartItem.Count;
            }
            else
            {
                storeDB.Carts.Remove(cartItem);
            }
            // Save changes
            // storeDB.SaveChanges();
        }
        return itemCount;
    }
    public void EmptyCart()
    {
        var cartItems = storeDB.Carts.Where(
            cart => cart.CartId == ShoppingCartId);

        foreach (var cartItem in cartItems)
        {
            storeDB.Carts.Remove(cartItem);
        }
        // Save changes
        //storeDB.SaveChanges();
    }
    public List<Cart> GetCartItems()
    {
        return storeDB.Carts.Where(
            cart => cart.CartId == ShoppingCartId).ToList();
    }
    public int GetCount()
    {
        // Get the count of each item in the cart and sum them up
        int? count = (from cartItems in storeDB.Carts
                      where cartItems.CartId == ShoppingCartId
                      select (int?)cartItems.Count).Sum();
        // Return 0 if all entries are null
        return count ?? 0;
    }
    public decimal GetTotal()
    {
        // Multiply album price by count of that album to get 
        // the current price for each of those albums in the cart
        // sum all album price totals to get the cart total
        decimal? total = (from cartItems in storeDB.Carts
                          where cartItems.CartId == ShoppingCartId
                          select (int?)cartItems.Count *
                          cartItems.product.UnitPrice).Sum();

        return total ?? decimal.Zero;
    }
    public int CreateOrder(Order order)
    {
        decimal orderTotal = 0;

        var cartItems = GetCartItems();
        // Iterate over the items in the cart, 
        // adding the order details for each
        foreach (var item in cartItems)
        {
            var orderDetail = new OrderDetail
            {
                AlbumId = item.ProductID,
                OrderId = order.OrderId,
                UnitPrice = item.product.UnitPrice,
                Quantity = item.Count
            };
            // Set the order total of the shopping cart
            orderTotal += (item.Count * item.product.UnitPrice);

            storeDB.OrderDetails.Add(orderDetail);

        }
        // Set the order's total to the orderTotal count
        order.Total = orderTotal;

        // Save the order
        //storeDB.SaveChanges();
        // Empty the shopping cart
        EmptyCart();
        // Return the OrderId as the confirmation number
        return order.OrderId;
    }
    // We're using HttpContextBase to allow access to cookies.
    public string GetCartId(HttpContextBase context)
    {
        if (context.Session[CartSessionKey] == null)
        {
            if (!string.IsNullOrWhiteSpace(context.User.Identity.Name))
            {
                context.Session[CartSessionKey] =
                    context.User.Identity.Name;
            }
            else
            {
                // Generate a new random GUID using System.Guid class
                Guid tempCartId = Guid.NewGuid();
                // Send tempCartId back to client as a cookie
                context.Session[CartSessionKey] = tempCartId.ToString();
            }
        }
        return context.Session[CartSessionKey].ToString();
    }
    // When a user has logged in, migrate their shopping cart to
    // be associated with their username
    public void MigrateCart(string userName)
    {
        var shoppingCart = storeDB.Carts.Where(
            c => c.CartId == ShoppingCartId);

        foreach (Cart item in shoppingCart)
        {
            item.CartId = userName;
        }
        //storeDB.SaveChanges();
    }
} 
```

Anh Cart.cs 类：

```
public class Cart
{
    [Key]
    public int RecordId { get; set; }
    public string CartId { get; set; }
    public int ProductID { get; set; }
    public int Count { get; set; }
    public System.DateTime DateCreated { get; set; }
    public virtual h2t_Store_Product product { get; set; }

} 
```

当我运行项目时，我收到一个错误：

值不能为空。参数名称：来源

![在此处输入图像描述](../Images/efbea11d478f6a505c90fe39bec5f06a.png)

任何人都可以告诉我如何解决它？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:51:07.080

这不会作为 linq-to-sql 运行，而是作为 linq-to-objects 运行。linq 查询的来源 `ShoppingCartEntities.Carts`是`List<Cart>`.

异常消息表明这`Carts`是`null`在执行查询时。我看不到您在提供的代码中的任何地方都实例化了该列表。

如果您尝试将其从 EF Code First 示例转换，则很容易错过该步骤。使用 EF Code First 时，实体集会自动从基类获取值（可能通过反射），但 linq-to-sql 中不存在“魔法”。

# python - 如何创建动态文本？

> ID：14229574
> 
> 赞同：0
> 
> 时间：2013-01-09T06:34:49.297
> 
> 标签：python

我必须做什么才能显示文本动态？

`Some text [-]`去`Some text [|]`然后回`Some text [-]`。

有没有办法在不清除整个屏幕的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:45:19.130

对于 POSIX 终端，您可以使用两种技术：

*   写`\r`回车返回到行首

*   写一个`\b`退格来清除几个字符。

在这两种情况下，我都会将`sys.stdout.write()`其与冲洗一起使用来写出。

使用`\b`退格演示：

```
import sys
import time
sys.stdout.write('Some text [\\]')
for i in ['-', '/', '|', '\\'] * 10:
    sys.stdout.write('\b\b\b[{0}]'.format(i))
    sys.stdout.flush()
    time.sleep(1) 
```

使用`\r`回车演示：

```
import sys
import time
for i in ['-', '/', '|', '\\'] * 10:
    sys.stdout.write('\rSome text [{0}]'.format(i))
    sys.stdout.flush()
    time.sleep(1) 
```

# bash - 在遍历 for 循环时更改变量中的字母

> ID：14229578
> 
> 赞同：0
> 
> 时间：2013-01-09T06:35:19.163
> 
> 标签：bash, shell

我有一个变量 $x 有一个示例值，如 isd21anms.com、isd31anms.com 等。现在我想遍历 for 循环以将 no 1 从 1 更改为 1、2、3 4。请看下面的代码

```
for i in 1 2 3 4
do
     change $i such that I get values isd21anms.com, isd22anms.com, isd23anms.com, isd24anms.com
done 
```

请记住，$x 可以具有类似 isd21anms.com、isd31anms.com、isd41anms.com 的值。所以我必须将它保存在变量中并在其上应用 for 循环，而不是使用常量值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:13:32.220

我会为此使用大括号扩展

```
for i in isd{1..4}{1..4}anms.com; do
  echo $i
done 
```

输出：

```
 isd11anms.com
    isd12anms.com
    isd13anms.com
    isd14anms.com
    isd21anms.com
    isd22anms.com
    isd23anms.com
    isd24anms.com
    isd31anms.com
    isd32anms.com
    isd33anms.com
    isd34anms.com
    isd41anms.com
    isd42anms.com
    isd43anms.com
    isd44anms.com 
```

[大括号展开](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:45:01.247

如果我正确理解了您的问题：

```
for x in isd21anms.com isd31anms.com isd41anms.com
do
        for i in {1..4}
        do
                y=${x/1/$i}
                echo $y
        done
done 
```

在运行这个，得到：

```
isd21anms.com
isd22anms.com
isd23anms.com
isd24anms.com
isd31anms.com
isd32anms.com
............ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:16:43.460

```
for i in 1 2 3 4
do
y=`echo $temp | sed "s/\(.*\).\(anms.com\)/\1"${i}"\2/g"`
echo "y is $y"
done 
```

测试如下：

```
> ./temp.sh
y is isd21anms.com
y is isd22anms.com
y is isd23anms.com
y is isd24anms.com
> setenv temp "isd31anms.com"
> ./temp.sh
y is isd31anms.com
y is isd32anms.com
y is isd33anms.com
y is isd34anms.com 
```

# symfony - 在学说 2 和 symfony 2 中关闭数据库连接

> ID：14229579
> 
> 赞同：0
> 
> 时间：2013-01-09T06:35:37.247
> 
> 标签：symfony, doctrine-orm

我想知道在 symfony 2 应用程序中完成请求后数据库连接是否关闭。symfony 2 是否通过调用学说的 close 函数来处理数据库连接的关闭，或者 symfony 根本不处理关闭。我浏览了许多 symfony 2 的教程，但从未发现他们手动关闭数据库连接。那么我应该在请求完成后手动关闭数据库连接吗？我还发现学说使用持久连接。这是否意味着我不必担心关闭数据库连接。教义2如何处理关闭操作？如果我有大量请求，我将留下许多打开的连接。有人可以向我解释一下可能有很多并发用户登录我的网站的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:36:49.410

PHP 将在每次请求后关闭您的连接。无需担心。而且 Doctrine 2 不使用持久连接。

# iphone - 如何使用从 SQLite 数据库中提取数据来创建自定义表格单元格

> ID：14229582
> 
> 赞同：0
> 
> 时间：2013-01-09T06:35:57.423
> 
> 标签：iphone, objective-c, xcode, ios5, tableview

我已经在互联网上搜索了很长时间试图弄清楚这一点。我想创建一个社交网络应用程序，它允许我拥有从 sqlite 数据库中提取数据的自定义表格单元格。我希望将用户个人资料图片添加到表格单元格的左侧，并将他们的用户名添加到单元格的右侧。我知道我需要一个从 sqlite 数据库中提取 BLOB 图像的图像视图，并且我知道我需要一个标签来显示用户名。我还希望它像 facebook 和 twitter 一样实时更新。我已经创建了我的 sqlite 数据库并设计了用户界面。我只是不知道从那里去哪里。任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:40:48.270

1.  在显示`UITableView`.
2.  此查询的结果将决定您的行数`UITableView`
3.  每当您获得更新或想要更改内容时，`UITableView`您唯一需要做的就是再次触发查询。从您的 SQLite 获取数据。并且，重新加载您的表格视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:35:24.093

您可以创建一个方法，该方法可能包含获取数据和重新加载表的代码。然后创建 NSTime 触发器并调用方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:00:44.673

# 1 将数据库中的数据拉入内存。

我使用 Core Data 来做到这一点，[**这**](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)是一个很好的起点。您可以从 sqlite[**获取记录**](http://developer.apple.com/library/ios/documentation/DataManagement/Conceptual/iPhoneCoreData01/Articles/05_Fetching.html#//apple_ref/doc/uid/TP40008305-CH107-SW1)并将它们更改为对象，以便您可以操作它们。

# 2 在你的视图上布局一个tableView

请参阅[此处](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/tableview_iphone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW11)了解如何添加 tableView。

对你来说关键的方法是`tableView:cellForRowAtIndexPath:`。您将在其中自定义您的单元格。了解这一点`UITableViewDataSource`并且`UITableViewDelegate`对于使用 UITableView 非常重要。

# 3 自定义自己的 UITableViewCell

您可以创建 UITableViewCell 的子类，可能是 MyTableViewCell，以显示用户的头像和名称。或者你可以只使用默认的 UITableViewCell，因为它有一个 imageView 和一个标签，可以满足你的需要。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {    
    static NSString *cellIdentifier = @"TableViewCellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (nil == cell) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier] autorelease];
    }
    // Do something here
    cell.imageView.image = user.avatar;
    cell.detailTextLabel.text = user.name;
    return cell;
} 
```

# jquery - 当我使用绑定到提交按钮的事件处理程序时，Ajax 帖子不起作用

> ID：14229584
> 
> 赞同：1
> 
> 时间：2013-01-09T06:35:58.917
> 
> 标签：jquery, asp.net-mvc-3

我正在使用部分视图，如下所示：-

```
@using (Ajax.BeginForm("UpdateStatus", "Controller", new AjaxOptions
{
HttpMethod = "POST",
InsertionMode = InsertionMode.Replace,
UpdateTargetId = "divCurrent",
OnSuccess = "cleanUp",
OnFailure = "statusUpdateFailure"
}))
{
<input id="statusChange" type="submit" value="Submit" class="button" />
} 
```

同样在单击提交按钮时，我想要一个处理程序，例如单击一次后将其设置为禁用几秒钟，因此用户无法再次单击它，我这样做如下：-

```
$('#statusChange').click( function () {
    temporarilyDisableButton($this, 60000);            
}); 
```

但在**chrome**中，我遇到了 ajax 表单提交不起作用的问题。只有禁用按钮有效。

我想一起执行它们，或者如果有另一种方法我想使用它。

请建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:09:02.467

我遇到了类似的问题，如果禁用提交按钮，某些浏览器将不会提交表单。您在按钮实际触发提交事件之前完全禁用了按钮。要解决此问题，您可以在禁用按钮之前提交表单，或者暂时隐藏按钮而不是禁用它。

您必须通过传入 Html 选项来为 Ajax 表单提供客户端 ID `new { id = "myAjaxForm" }`。

```
@using (Ajax.BeginForm("UpdateStatus", "Controller", new AjaxOptions
{
HttpMethod = "POST",
InsertionMode = InsertionMode.Replace,
UpdateTargetId = "divCurrent",
OnSuccess = "cleanUp",
OnFailure = "statusUpdateFailure"
}, new { id = "myAjaxForm" } )) 
```

然后你可以点击

```
$('#statusChange').click( function () {
   $('#myAjaxForm').submit();
    temporarilyDisableButton($this, 60000);
    return false; //stop the button from performing its default action
} 
```

或者，您可以完全摆脱单击事件并将事件绑定到`submit`函数：

```
$('#myAjaxForm').submit(function(){
temporarilyDisableButton($('#statusChange'), 60000);
}); 
```

有无数种方法可以做到这一点，但基本思想是您不想在提交按钮有机会触发事件之前禁用它。

# java - 无法运行 AlchemyAPI 示例

> ID：14229587
> 
> 赞同：0
> 
> 时间：2013-01-09T06:36:30.823
> 
> 标签：java, tor, alchemyapi

我在我的系统上安装了 AlchemyApi 并获得了 Api 密钥。但是当我运行 README.txt 文件中提到的示例时，我收到以下错误：-

AlchemyAPI_Java-0.8/testdir$java -jar ../dist/AlchemyAPI-Entity-Test.jar

`线程“主”java.net.ConnectException 中的异常：java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327) 处 java.net.AbstractPlainSocketImpl 处的 java.net.PlainSocketImpl.socketConnect(Native Method) 处的连接超时。 connectToAddress(AbstractPlainSocketImpl.java:193) 在 java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180) 在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384) 在 java.net.Socket.connect(Socket.java :546) 在 java.net.Socket.connect(Socket.java:495) 在 sun.net.NetworkClient.doConnect(NetworkClient.java:178) 在 sun.net.www.http.HttpClient.openServer(HttpClient.java: 409) 在 sun.net.www.http.HttpClient.openServer(HttpClient.java:530) 在 sun.net.www.http.HttpClient.(HttpClient.java:240) 在 sun.net.www.http.HttpClient。在 sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:935) 在 sun.net.www.http.HttpClient.New(HttpClient.java:338) 在 sun. .net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:876) 在 sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801) 在 sun.net.www.protocol.http .HttpURLConnection.getInputStream(HttpURLConnection.java:1139) 在 com.alchemyapi.api.AlchemyAPI.doRequest(AlchemyAPI.java:869) 在 com.alchemyapi.api.AlchemyAPI.GET(AlchemyAPI.java:839) 在 com.alchemyapi。 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125) com.alchemyapi.test.EntityTest.main(EntityTest.java:25) 的 api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:136)sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:935) 上的 HttpClient.New(HttpClient.java:338) sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java: 876) 在 sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801) 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139) 在 com.alchemyapi.api .AlchemyAPI.doRequest(AlchemyAPI.java:869) 在 com.alchemyapi.api.AlchemyAPI.GET(AlchemyAPI.java:839) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:136) 在 com.alchemyapi。 com.alchemyapi.test.EntityTest.main(EntityTest.java:25) 处的 api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125)sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:935) 上的 HttpClient.New(HttpClient.java:338) sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java: 876) 在 sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801) 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139) 在 com.alchemyapi.api .AlchemyAPI.doRequest(AlchemyAPI.java:869) 在 com.alchemyapi.api.AlchemyAPI.GET(AlchemyAPI.java:839) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:136) 在 com.alchemyapi。 com.alchemyapi.test.EntityTest.main(EntityTest.java:25) 处的 api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125)getNewHttpClient(HttpURLConnection.java:935) 在 sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:876) 在 sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801)在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139) 在 com.alchemyapi.api.AlchemyAPI.doRequest(AlchemyAPI.java:869) 在 com.alchemyapi.api.AlchemyAPI.GET(AlchemyAPI .java:839) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:136) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125) 在 com.alchemyapi.test.EntityTest.main( EntityTest.java:25)getNewHttpClient(HttpURLConnection.java:935) 在 sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:876) 在 sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801)在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139) 在 com.alchemyapi.api.AlchemyAPI.doRequest(AlchemyAPI.java:869) 在 com.alchemyapi.api.AlchemyAPI.GET(AlchemyAPI .java:839) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:136) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125) 在 com.alchemyapi.test.EntityTest.main( EntityTest.java:25)connect(HttpURLConnection.java:801) 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139) 在 com.alchemyapi.api.AlchemyAPI.doRequest(AlchemyAPI.java:869) 在 com.alchemyapi .api.AlchemyAPI.GET(AlchemyAPI.java:839) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:136) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125) 在 com. alchemyapi.test.EntityTest.main(EntityTest.java:25)connect(HttpURLConnection.java:801) 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139) 在 com.alchemyapi.api.AlchemyAPI.doRequest(AlchemyAPI.java:869) 在 com.alchemyapi .api.AlchemyAPI.GET(AlchemyAPI.java:839) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:136) 在 com.alchemyapi.api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125) 在 com. alchemyapi.test.EntityTest.main(EntityTest.java:25)com.alchemyapi.test.EntityTest.main(EntityTest.java:25) 处的 api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125)com.alchemyapi.test.EntityTest.main(EntityTest.java:25) 处的 api.AlchemyAPI.URLGetRankedNamedEntities(AlchemyAPI.java:125)

`

一个问题是我无法从网络浏览器访问 AlchemyApi 网站。我必须使用 Tor 软件才能访问该网站。但即使在系统范围内进行了 Tor 设置后，我也无法运行这些程序。我正在使用 Ubuntu。请在这个问题上指导我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-23T09:25:12.397

看起来您的 java 程序无法通过 Internet 连接到 AlchemyAPI。尝试一个示例 Java 程序来访问任何其他网站并检查它是否成功。对命令提示符权限是否有任何限制（尝试“以管理员身份运行）？尝试从 Eclispe [参考此答案在其他帖子中进行 Eclipse 设置](https://stackoverflow.com/a/30410985/1122841)

# c++ - 如何在没有换行符 CRLF "\r\n" 的情况下读取 CSV 记录？

> ID：14229590
> 
> 赞同：3
> 
> 时间：2013-01-09T06:36:41.273
> 
> 标签：c++, excel, csv, newline

我对 C++ 非常陌生，我一直在试图弄清楚如何将 CSV 文件读入向量。到目前为止一切都很好，除了我不知道如何避免在每条 CSV 记录的末尾换行。

这是我的代码：

```
#include <fstream>
#include <iostream>
#include <sstream>
#include <string>
#include <vector>

// stream input operator overloaded to read a list of CSV fields
std::istream &operator >> (std::istream &ins, std::vector<std::string> &record)
{
    record.clear();

    // read the entire line into a string
    std::string line;
    std::getline(ins, line);

    // using a stringstream to separate the fields out of the line
    std::stringstream ss(line);
    std::string field;

    while (std::getline(ss, field, ';'))
    {
        // add the converted field to the end of the record
        record.push_back(field);
    }
    return ins;
}

// stream input operator overloaded to read a list of CSV fields
std::istream &operator >> (std::istream &ins, std::vector<std::vector<std::string>> &data)
{
    data.clear();

    // add results from record into data
    std::vector<std::string> record;

    bool empty;
    while (ins >> record)
    {
        // check if line has a price
        for (unsigned i = 0; i < record.size(); i++)
        {
            std::stringstream ss(record[2]);
            int price;
            if (ss >> price)
            {
                empty = true;
            }
            else
            {
                empty = false;
            }
        }

        if (empty == true)
        {
            data.push_back(record);
        }
    }
    return ins;
}

int main()
{
    // bidemensional vector for storing the menu
    std::vector<std::vector<std::string>> data;

    // reading file into data
    std::ifstream infile("test.csv");
    infile >> data;

    // complain if theres an error
    if (!infile.eof())
    {
        std::cout << "File does not excist." << std::endl;
        return 1;
    }
    infile.close();

    for (unsigned m = 0; m < data.size(); m++)
    {
        for (unsigned n = 0; n < data[m].size(); n++)
        {
            std::string recordQry;
            recordQry += "'" + data[m][n] + "', ";

            std::cout << recordQry;
        }
        std::cout << std::endl;
    }
    return 0;
} 
```

test.csv 包含：

```
CODE;OMSCHRIJVING; PRIJS ;EXTRA;SECTION
A1;Nasi of Bami a la China Garden; 12,00 ;ja;4
A2;Tjap Tjoy a la China Garden; 12,00 ;ja;1
A3;Tja Ka Fu voor twee personen; 22,50 ;ja;1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:55:47.453

好吧，我打算删除我的答案，但决定重新提交一个，因为不管关于`getline`你的所有事实都确实知道你遇到了问题。在另一个答案的评论中，我注意到您提到它最初是一个 excel 文件。好吧，至少在某些情况下，微软以`\r\n`. 这可能是为什么？`getline`仍然会放弃，`\n`但你仍然会有回车。如果是这种情况，您将需要使用我之前分享的一种方法。我希望我已经救赎了自己。。

我检查了使用文件写入文件`\r\n`，是的，它将离开`\r`. 我在调试中观察了它，甚至当我`getline`再次使用它来提取它在字符串中留下的值时。当它打印到控制台时，它会打印出光标浮动在第一个字母下方的值。

微软显然使用这种风格来向后兼容需要两个独立功能的旧机器 - 一个将头部返回到左边距，一个用于卷起纸张。这听起来像你正在经历的行为吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:06:12.123

尝试：

```
while (std::getline(ss, field, ';'))
{
    // add the converted field to the end of the record
    record.push_back(field.erase(s.find('\r'));
}
//record.push_back(field.erase(s.find('\r'));
return ins; 
```

# xml - 尝试通过服务类注入 DataSource bean 时如何修复 NullException？

> ID：14229593
> 
> 赞同：0
> 
> 时间：2013-01-09T06:37:10.060
> 
> 标签：xml, web-services, spring, jdbc, dependency-injection

因此，我有一个简单的 REST Web 应用程序，如果我的控制器直接调用 DAO，则 JDBC 调用工作正常，但如果我的控制器调用另一个代表我调用 DAO 的类，它会因 NullPointerException (NPE) 而失败。

这是我的控制器：

```
@Component
@Scope("request")
@Path("/emsrequest")
public class EMSRequest {

    // I'm using this for testing
    @GET
    @Path("/xml/{accountNumber}")
    @Produces({MediaType.TEXT_PLAIN})
    public String requestByAccountNumber_XML(
            @PathParam("accountNumber") String accountNumber) {

        ReqSubTest los = new ReqSubTest();

        return "account (LOS) number is : " + los.testSql(Integer.parseInt(accountNumber)) + "!";
    }
} 
```

这是中间（服务）类：

```
package com.company.demo.mercury.processmanager.components;

import com.company.demo.pmrws.dao.EMSRequestDaoImpl;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class ReqSubTest {

    @Autowired
    EMSRequestDaoImpl dao = new EMSRequestDaoImpl();

    public int testSql(int quantity){
        return dao.getNextTableIds("sys_process_tbl", quantity);

    }
} 
```

这是 DAO 的实现：

```
package com.company.demo.pmrws.dao;

import org.apache.log4j.Logger;
import org.springframework.jdbc.core.support.JdbcDaoSupport;

public class EMSRequestDaoImpl extends JdbcDaoSupport {

    private static final Logger logger = Logger.getLogger(EMSRequestDaoImpl.class);

    public int getNextTableIds(String tableName, int quantity) {

        if (logger.isDebugEnabled()) {
            logger.trace("Entering getNextTableIds");
        }

        if (getJdbcTemplate() == null) {
            System.out.println("UH OH!");
        }

        String selectSql = "select next_id "
                + "from sys_key_tbl "
                + "where table_name = ? ";
        String updateSql = "update sys_key_tbl "
                + "set next_id = ? "
                + "where table_name = ? and next_id = ? ";
        int lastId = -1;
        int updateCount = 0;
        while (updateCount == 0) {
            lastId = getJdbcTemplate().queryForInt(selectSql,
                    new Object[]{tableName});
            updateCount = getJdbcTemplate().update(updateSql,
                    new Object[]{lastId + quantity, tableName, lastId});
        }

        if (logger.isDebugEnabled()) {
            logger.trace("Leaving getNextTableIds");
        }
        return lastId + 1;
    }
} 
```

应用程序上下文 XML：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">
    <context:component-scan base-package="com.company.demo.pmrws"/>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
          destroy-method="close">
        <property name="driverClassName" value="com.sybase.jdbc3.jdbc.SybDataSource" />
        <property name="url"
                  value="jdbc:sybase:Tds:blah:10240/BLAH_DB1" />
        <property name="username" value="blah" />
        <property name="password" value="blah" />
    </bean>

    <bean id="dataSourceMain" class="org.apache.commons.dbcp.BasicDataSource"
          destroy-method="close">
        <property name="driverClassName" value="com.sybase.jdbc3.jdbc.SybDataSource" />
        <property name="url"
                  value="jdbc:sybase:Tds:blah:10240/BLAH_DB2" />
        <property name="username" value="blah" />
        <property name="password" value="blah" />
    </bean>
    </bean>

    <!--    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource" ref="dataSource" />
    </bean>-->

    <bean id="emsResponseDao" class="com.company.demo.pmrws.dao.EMSResponseDaoImpl">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="emsStatusDao" class="com.company.demo.pmrws.dao.EMSStatusDaoImpl">
        <property name="dataSource" ref="dataSourceMain" />
    </bean>

<!--    <bean id="collateralSybaseEmsDao" class="com.company.demo.dao.CollateralSybaseEmsDaoImpl">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="collateralSybaseDao" class="com.company.demo.dao.CollateralSybaseDaoImpl">
        <property name="dataSource" ref="dataSource" />
    </bean>-->

    <bean id="emsRequestDao" class="com.company.demo.pmrws.dao.EMSRequestDaoImpl">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <context:component-scan base-package="com.company.demo.mercury.processmanager.components" />

</beans> 
```

我错过了什么？顺便说一句，这是 Spring 2.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:00:58.653

这是因为`ReqSubTest los = new ReqSubTest();`创建了一个新的普通 java Object 实例而不是 Spring Bean，因此没有任何东西注入到`los`实例中。

修复它的三种方法。

*   而不是通过 Spring`ReqSubTest los = new ReqSubTest();`注入`los`，但这也要求它`EMSRequest`也是一个 Spring bean

例子：

```
@Component public class EMSRequest {

    @Autowire ReqSubTest los;

    public String requestByAccountNumber_XML(@PathParam("accountNumber") String accountNumber) {
        return "account (LOS) number is : " + los.testSql(Integer.parseInt(accountNumber)) + "!";
    } 
} 
```

*   而不是`ReqSubTest los = new ReqSubTest();`使用`ReqSubTest los = springApplicationContext.getBean(ReqSubTest.class)`
*   如果您使用真正的 AspectJ `@Configurable`，那么即使通过创建实例`new`（需要通过 启用`<context:spring-configured />`），您也可以添加然后 Spring 注入其他 bean - 您可以添加注释`EMSRequest`，然后使用第一项中建议的正常注入，或添加它到`ReqSubTest`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:00:10.040

我想我已经找到了问题所在。问题出在您的服务类`ReqSubTest`中。

你已经在那里自动装配了 DAO 类，但你不应该在那里初始化它。因此，只需删除您的 DAO 声明的初始化部分，您就可以开始了。所以现在您在服务类中的声明将如下所示。

```
@Autowired
private EMSRequestDaoImpl dao; 
```

在您的控制器中，您还需要自动装配 Service 类。并且不要在函数本身中创建它的新对象。

```
@Autowired
private ReqSubTest service; 
```

希望这对您有所帮助。干杯。

# mysql - 选择偏移量 > 0 的最大值返回 nil

> ID：14229594
> 
> 赞同：0
> 
> 时间：2013-01-09T06:37:17.720
> 
> 标签：mysql, sql, ruby-on-rails, ruby, ruby-on-rails-3

我想`fresh_when last_modified: @conversations.maximum(:updated_at)`与分页一起使用。但是，当`@conversations`在第 2 页时，即使集合中有一条记录，也会`updated_at`返回。`nil`

```
irb(mail):001:0> conversations = conversations.paginate(page: 1)
=> [10 conversations]

irb(main):002:0> conversations.maximum(:updated_at)
   (3.0ms)  SELECT MAX(`inbox_conversations`.`updated_at`) AS max_id FROM `inbox_conversations` LIMIT 10 OFFSET 0
=> 2013-01-09 05:12:10 UTC # Correct

irb(main):003:0> conversations = conversations.paginate(page: 2)
=> [10 conversations]

irb(main):004:0> conversations.maximum(:updated_at)
   (2.7ms)  SELECT MAX(`inbox_conversations`.`updated_at`) AS max_id FROM `inbox_conversations` LIMIT 10 OFFSET 10
=> nil # Not correct 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:25:51.130

Rails 误解了你想要的

```
SELECT MAX(`inbox_conversations`.`updated_at`) AS max_id FROM `inbox_conversations` LIMIT 10 OFFSET 10 
```

意味着运行查询，然后从偏移量 10 获取前 10 个结果。这将返回 nil，因为结果集只有一行 - 最大 updated_at。相反，您想要的是影响计算最大值的行的偏移​​限制。

您可以使用子查询来执行此操作，但我只是在 ruby​​ 中进行此计算，因为无论如何您都在使用常规`Enunerable`方法加载行。就像是

```
conversations.map(&:updated_at).max 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:20:23.607

SQL MAX 查询不适用于 OFFSET（[普通 SQL 解决方法](https://stackoverflow.com/questions/4957786/select-min-and-max-value-from-a-part-of-a-table-in-mysql)）

如果任何 ActiveRecord`.offset(n).maximum(:field)`给出 nil`n > 0`

尝试使用纯 Ruby 作为解决方法（它可以提前为您节省查询）。

```
conversations.max_by(&:updated_at) 
```

# java - 在WINDOWS机子上安装两次maven

> ID：14229598
> 
> 赞同：0
> 
> 时间：2013-01-09T06:37:41.203
> 
> 标签：java, maven

我正在与`maven`+`java`

这里我想在我的机器上安装两次maven

```
1> Actual Development with its own .m2 repository
2> Learing Technologies with its own .m2 repositroy 
```

帮我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:22:52.263

正如其他人已经评论的那样，不知道为什么要这样做。

您可以使用 <localRepository/> 指定存储库的位置。因此，您可以根据需要更改此值。

见[http://maven.apache.org/ref/3.0.4/maven-settings/settings.html](http://maven.apache.org/ref/3.0.4/maven-settings/settings.html)

# java - 从arraylist获取重复元素的最后一个索引

> ID：14229607
> 
> 赞同：0
> 
> 时间：2013-01-09T06:37:59.513
> 
> 标签：java, android, arraylist

我有字符串数组列表

```
[rose,flower,banana,parrot,rose,bird,flower,rose,banana,bird] 
```

从这个数组我想要每个重复元素的最后一个索引意味着它应该给我索引

> 玫瑰=6 花=5 香蕉=7 鸟=8 鹦鹉=4

这样我就可以从重复项中获取最后一个元素。我不想使用哈希方法删除重复项，因为我想保留元素的索引。我试图循环遍历这个数组，但它对我不起作用。我的代码如下。

```
for(int i=0;i<ProductName.size();i++){
                String uniquename = null;

                for(int j=0;j<ProductName.size();j++){
                    if(ProductName.get(i).equals(ProductName.get(j))){
                        uniquename=ProductName.get(i);

                    }                                       
                }
                if(uniquename != null){
                    UniqueproductName.add(i,uniquename);

                }
            } 
```

我也想要结果数组作为arraylist

总结：

我想要数组中的所有元素，但是有重复的，那么我应该得到那个重复元素的最后一个索引。但我不想使用哈希方法，也不想使用结果作为`Arraylist<String>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:41:48.877

您还没有提到 a`String`只出现一次的情况。但一般来说，你可以使用[lastIndexOf](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#lastIndexOf%28java.lang.Object%29)方法`ArrayList`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:44:58.220

使用 a`Map<String, Integer>`收集索引，然后从此地图构建您的结果：

```
public final class Foo
{
    private static final List<String> productList = Arrays.asList(
        "rose", "flower", "banana", "parrot", "rose", "bird", "flower", "rose",
        "banana", "bird"
    );

    private static List<String> indicesFor(final List<String> list)
    {
        final Map<String, Integer> indices = new HashMap<String, Integer>();

        final int size = list.size();

        for (int i = 0; i < size; i++)
            indices.put(list.get(i), i);

        final List<String> ret = new ArrayList<String>(indices.size());
        for (final Map.Entry<String, Integer> entry: indices.entrySet())
            ret.add(entry.toString());
        return ret;
    }

    public static void main(final String... args)
    {
        System.out.println(indicesFor(productList));
        System.exit(0);
    }
} 
```

上述代码的输出：

```
[bird=9, banana=8, rose=7, parrot=3, flower=6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:45:07.063

您可以**从最后一个到第一个**，同时维护迄今为止在一组中看到的数据：

```
Set<String> set = new HashSet<String>();
for (int i = list.size()-1; i >=0; i--) { 
  if (!set.contains(list.get(i))) {
        System.out.println(list.get(i) + " " + i);
        set.add(list.get(i));
  }
} 
```

请注意，此解决方案的 tiem 复杂度是`O(n)`平均的，而迭代使用`lastIndexOf()`is `O(n^2)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:49:50.337

**-**使用`ArrayList`方法`lastIndexOf()`。

**例如：**

```
public class T4 {

    public static void main(String[] args){

        ArrayList<String> ar = new ArrayList<String>();
        HashMap<String,Integer> ax = new HashMap<String,Integer>();
        int count = 0;

        ar.add("rose");
        ar.add("flower");
        ar.add("flower");
        ar.add("Parrot");
        ar.add("rose");
        ar.add("bird");
        ar.add("flower");
        ar.add("rose");
        ar.add("banana");
        ar.add("bird");

        for(String x : ar){

            ax.put(x,ar.lastIndexOf(x));
        }

        for(Map.Entry<String, Integer> map : ax.entrySet()){

            System.out.println(map.getKey()+"- "+map.getValue());
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T06:54:41.177

你可以使用这个类：

[http://code.google.com/p/synthfuljava/source/browse/trunk/common/org/synthful/util/HashVector.java](http://code.google.com/p/synthfuljava/source/browse/trunk/common/org/synthful/util/HashVector.java)。

这是描述：

[http://code.google.com/p/synthfuljava/wiki/HashVector](http://code.google.com/p/synthfuljava/wiki/HashVector)。

它是一个允许通过键或位置访问元素的类。

如果你不关心线程安全，你应该重写类，用 HashMap 替换 HashTable，用 ArrayList 替换 Vector。

就像我在下面所做的那样允许它被 GWT 编译：

[http://code.google.com/p/synthfuljava/source/browse/trunk/gwt/util/org/synthful/gwt/util/HashList.java](http://code.google.com/p/synthfuljava/source/browse/trunk/gwt/util/org/synthful/gwt/util/HashList.java)

* * *

事实上，这个类的能力的扩展是一个框架来构建一个哈希树，它允许 key 是一个 xpath：

[http://code.google.com/p/synthfuljava/wiki/HashTree](http://code.google.com/p/synthfuljava/wiki/HashTree)

因此导致了哈希向量树：

[http://code.google.com/p/synthfuljava/source/browse/trunk/common/org/synthful/util/HashVectorTreeNode.java](http://code.google.com/p/synthfuljava/source/browse/trunk/common/org/synthful/util/HashVectorTreeNode.java)

它允许通过 xpath 键或分层 xpath 类索引序列进行访问。

我没有看到我编写的这些类有太多实际用途，但我认为编写一些具有这些功能的类是一个很好的学术练习。但是，HashVector 和 HashList 是我经常使用的经过良好锻炼/驱除的类。

# windows-phone-7 - 游戏退出 WP7 后，滑动时磁贴/列表菜单抖动

> ID：14229610
> 
> 赞同：0
> 
> 时间：2013-01-09T06:38:11.337
> 
> 标签：windows-phone-7, xna, xna-4.0

我的 xna + wp7 游戏有 30 - 35 个内容实例，它会在游戏生命周期内一次加载。当这个游戏存在时（按后退按钮）Windows phone 7 磁贴/列表菜单在触摸滑动时会抖动。是因为我的游戏缺少一些发布内容/资源吗？

# java - Swing 中的代码完成和语法高亮

> ID：14229611
> 
> 赞同：4
> 
> 时间：2013-01-09T06:38:10.820
> 
> 标签：java, javascript, swing, syntax-highlighting, code-completion

我已经开始了一个需要语法高亮和代码完成的项目（在插入符号位置弹出一个窗口提供建议）并且找不到合适的解决方案。有多个 Swing 组件接受文本输入，例如 JTextArea、JTextPane 和 JEditorPane，这使得确定哪个是正确的使用变得更加困难。

该项目是一个特定于程序员的文本编辑器，它将与统一游戏引擎集成。这意味着代码完成和突出显示将在 JavaScript 和 C# 语法上完成。

这可能很明显，但一般的想法是，当用户键入时，某些单词会变为指定的颜色，这些单词将存储在文本文件中。对于代码完成，我需要能够抓取当前键入的字母，此检测过程将通过使用空格字符作为分隔符重新启动。

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T07:26:26.010

[在这里](https://stackoverflow.com/questions/15219625/how-would-be-implements-autosugesion-in-jtextarea-swing/15220056#15220056)查看我的答案，它显示了的*自动完成*，`JTextComponent`它可以在/上显示当前插入符号索引的*自动完成词的**弹出窗口*（+1 @AndrewThompson 的想法）：*`JTextPane``JEditorPane`*

 *对于`JTextField`：

![使用 JTextField 作为 AutoSugestor](../Images/2f6d0edb29af87d2bef644f77cd2e4e1.png)

对于其他`JTextComponent`s ie`JTextPane`等，`JEditorPane`它显示在当前插入符号索引中：

![在此处输入图像描述](../Images/2d07f9e2dfc847ddadba471592e258c7.png)

要更改单词的文本颜色（即语法突出显示），请查看[此处](https://stackoverflow.com/a/13076649/1133011)：

![在此处输入图像描述](../Images/e7c66eea8a44721dbe987b7bd9f5002f.png)

或者，如果您想要一个突出显示的单词。见[这里](https://stackoverflow.com/a/12482171/1133011)：

![在此处输入图像描述](../Images/992e4005323954075114dae569999ec8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:49:01.397

如果它们的许可条款适合您的用例，您可以查看来自[jintilla](http://sourceforge.net/projects/jintilla/)（广泛使用的[scintilla](http://www.scintilla.org/SciTEImage.html)的 JNI 包装器）或[jedit的组件。](http://jedit.sourceforge.net/)*

# sql - 如何改进这个 SQL 查询？

> ID：14229617
> 
> 赞同：0
> 
> 时间：2013-01-09T06:38:34.733
> 
> 标签：sql

我是这里的新手，我有一张桌子来存储一些测试结果。

这些列可以简化为 2 列：

```
EXECUTION_ID int(6) CASE_ID int(11)
RESULT varchar(10). 
```

而“RESULT”列实际上是一个枚举，将值保存在**'PASS'** ,* *'FAIL' **,** 'NORESULT'* *.

现在我想使用一个 sql 查询来获取所有执行的统计信息。

结果集格式如下：

```
EXECUTION_ID | PASS_CNT FAIL_CNT  |  NORESULT_CNT 
```

我只能找到一种方法来实现它：

```
select A.execId,A.a,B.a,C.a from
    (select execId,result,count(result) a from STAT_RESULTS group by execId,result having result='PASS') A left join
    (select execId,result,count(result) a from STAT_RESULTS group by execId,result having result='FAIL') B on A.execId=B.execId left join
    (select execId,result,count(result) a from STAT_RESULTS group by execId,result having result='NORESULT') C on A.execId=C.execId; 
```

结果列表如下：

```
execId  pass    fail    noresult
55      169     77      null
56      46      9       1
57      120     13      3
58      91      45      null
59      95      44      null
60      179     9       5 
```

有没有更好的方法来做同样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:59:18.267

怎么样？

```
select 
s.execid EXECUTION_ID
,sum(case when s.result='PASS' then 1 else 0 end) PASS_CNT 
,sum(case when s.result='FAIL' then 1 else 0 end) FAIL_CNT
,sum(case when s.result='NORESULT' then 1 else 0 end) NORESULT_CNT
from STAT_RESULTS s
group by s.execid 
```

# c++ - 选择特定的 USB 键盘输入设备？

> ID：14229620
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:38:59.943
> 
> 标签：c++, keyboard, usb

我正在做一个小项目：我需要从数字键盘输入并根据按下的键运行宏。但是，我在从数字键盘上阅读时遇到了一些困难。`stdin`只需从关键输入中读取；我实际上需要数字键盘 USB 设备的原始数据输出。数字键盘是**独立**于键盘的设备。

我的研究表明我必须使用 为它编写一个设备驱动程序`Windows DDK`，但这对我来说不太有意义。我想选择一个不同的 USB 输入设备作为键盘——这不需要新的驱动程序，因为我仍将它用作键盘。我只需要将输入流的范围更改为 USB 设备。

我也可能遗漏了一些关键信息。那么，有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:08:18.790

您必须从正确的设备读取 RAW USB 事件。您可以通过阅读MSDN 上的“[原始输入](http://msdn.microsoft.com/en-us/library/ms645536%28VS.85%29.aspx)”或“[人机接口设备参考”（Windows 驱动程序工具包的一部分）自己编写该代码。](http://msdn.microsoft.com/en-us/library/ff539956%28v=vs.85%29.aspx)

或者你可以使用[libusb ，正如](https://libusb.info/)[在 Windows 上读取原始 USB 输入](https://stackoverflow.com/questions/7373247/read-raw-usb-input-on-windows)中提到的那样，它在一个简洁的 API 下隐藏了许多糟糕的细节。一个粗略的想法是：

*   通过以下方式获取设备列表`libusb_get_device_list()`
*   通过 找到您感兴趣的键盘`libusb_get_device_descriptor()`，检查`examples/listdevs.c`文件以获取有关如何执行此操作的线索。
*   通过打开设备`libusb_open()`
*   做你的魔法（我认为对事件进行轮询很合适）
*   和..最后关闭设备

旁注：libusb 在 Windows8 上完美构建，带有 VS2012 Express + WDK8。

# spring - Spring Roo Jpa 设置失败，maven-eclipse-plugin 问题？

> ID：14229621
> 
> 赞同：2
> 
> 时间：2013-01-09T06:39:02.987
> 
> 标签：spring, maven, maven-plugin, spring-roo, m2eclipse

我正在使用 spring roo 1.2.3 版。就在几天前，使用任何包的项目创建工作正常。但是最近，如果我创建一个带有**WAR 或 POM**打包的项目，那么**Jpa Setup**命令不起作用。

我发出命令

```
project --topLevelPakage com.example.test --packaging POM
Created ROOT/pom.xml 
```

然后我输入：

```
jpa setup --provider HIBERNATE --database HYPERSONIC_IN_MEMORY 
```

它返回

```
additionalBuildCommands element of the maven-eclipse-plugin required 
```

我已经搜索了很多地方来找到这个问题的根源。但没有任何成功。我检查了**pom.xml**并且确实存在 AdditionalBuildCommand 元素。

```
<plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-eclipse-plugin</artifactId>
                    <version>2.7</version>
                    <!-- Note 2.8 does not work with AspectJ aspect path -->
                    <configuration>
                        <downloadSources>true</downloadSources>
                        <downloadJavadocs>false</downloadJavadocs>
                        <wtpversion>2.0</wtpversion>
                        <additionalBuildcommands>
                            <buildCommand>
                                <name>org.eclipse.ajdt.core.ajbuilder</name>
                                <arguments>
                                    <aspectPath>org.springframework.aspects</aspectPath>
                                </arguments>
                            </buildCommand>
                            <buildCommand>
                                <name>org.springframework.ide.eclipse.core.springbuilder</name>
                            </buildCommand>
                        </additionalBuildcommands>
                        <additionalProjectnatures>
                            <projectnature>org.eclipse.ajdt.ui.ajnature</projectnature>
                            <projectnature>com.springsource.sts.roo.core.nature</projectnature>
                            <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                        </additionalProjectnatures>
                    </configuration>
                </plugin> 
```

那么是什么导致了问题呢？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T11:37:55.457

我面临着同样的问题。原因是，我包括

```
<pluginManger> 
```

标记到我的 pom.xml 以解决出现在 Eclipse 中的 Maven 错误。这将 pom.xml 的 plugins 部分隐藏到 spring roo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:06:20.533

包装绒球？

Roo 支持 4 种开箱即用的 Maven 打包类型：

*   **罐子**。默认，**试试这个**（或者根本不指定包装）
*   战争。对于网络项目
*   捆。对于 OSGI
*   庞。对于多模块 Maven 项目。

后者应该只包含一个 pom 和一组文件夹，这将是叶 maven 项目（jar、war 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-23T21:19:54.907

将此默认配置添加到 POM

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <version>2.10</version>
    <configuration>
      <additionalProjectnatures>
        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
      </additionalProjectnatures>
      <additionalBuildcommands>
        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
      </additionalBuildcommands>
    </configuration>
  </plugin> 
```

# python - 这个 python 代码中的“if 语句”需要什么？

> ID：14229622
> 
> 赞同：0
> 
> 时间：2013-01-09T06:39:03.817
> 
> 标签：python

即使我从代码中删除“if 语句”，我也会得到相同的输出。

```
 word='pizza'
   begin=None
   while begin!='':
         begin=(raw_input('\nBegin:'))
         if begin:
             begin=int(begin)
             end = int(raw_input('End:'))
             print "word[",begin,":",end,"]"
             print word[begin:end]
   raw_input("\n\nPress enter key") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:42:20.823

查看用户是否输入了空字符串以外的内容。

```
>>> if '':
...     print 'empty'
...
>>> if 'I entered something':
...     print 'not empty'
...
not empty
>>> raw_input('just hit enter: ')  # just hinting 'enter' results in the empty string
just hit enter:
'' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:42:32.040

if 用于确保 of 的输入`begin=(raw_input('\nBegin:'))`不为空。在[pep 08](http://www.python.org/dev/peps/pep-0008/#programming-recommendations)中，在“编程建议”部分中，您可以看到：

“对于序列，（字符串，列表，元组），使用空序列是错误的事实。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T06:47:38.063

`if`检查用户是否刚刚`Enter`按下。

如果删除`if`，执行程序并按下`Enter`，您将看到如下输出：

```
Begin:

Press enter key 
```

如果您输入`1`并按`Enter`，输出将是这样的：

```
Begin:1Begin:

Press enter key 
```

# android - 如何在当前运行的屏幕上获取应用程序菜单

> ID：14229626
> 
> 赞同：0
> 
> 时间：2013-01-09T06:39:15.050
> 
> 标签：android, opengl-es, google-tv

我想在屏幕左侧获得一个应用程序菜单栏，而不会干扰已经运行的任务，例如动态壁纸或视频。如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:24:27.013

请使用此服务等级。通过从您的活动中启动此服务，您将在手机屏幕上获得一张图片。通过调整，您可以设置手机中的任何位置。您可以随时通过停止服务来删除它。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Date; 
import android.app.Service;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.PixelFormat;
import android.os.Environment;
import android.os.IBinder;
import android.os.RemoteException;
import android.view.Gravity;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.ViewDebug;
import android.view.ViewGroup;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class HUD extends Service {
    HUDView mView;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        mView = new HUDView(this);
        mView.setId(R.id.button);
        WindowManager.LayoutParams paramsOrg = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,

                WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
                PixelFormat.TRANSLUCENT);

        WindowManager.LayoutParams params = new WindowManager.LayoutParams(100, 100, 2007, 8, -3);
        Button bb=new Button(this);
        bb.setText("Button");
        bb.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                System.out.println("Clicked----><<<<<<<");
            }
        });

        bb.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                System.out.println("Touched =----- > ");
                return false;
            }
        });

        params.gravity = Gravity.RIGHT | Gravity.TOP;
        params.setTitle("Load Average");
        WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);

        wm.addView(bb, params);

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        //Toast.makeText(getBaseContext(),"onDestroy", Toast.LENGTH_LONG).show();
        if(mView != null)
        {
            ((WindowManager) getSystemService(WINDOW_SERVICE)).removeView(mView);
            mView = null;
        }
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        // Checks the orientation of the screen
        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            //Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
            restartService();
        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
            //Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
            restartService();
        }

    }

    private void restartService() {
        // TODO Auto-generated method stub
        stopService(new Intent(getBaseContext(), HUD.class));
        startService(new Intent(getBaseContext(), HUD.class));
    }
}

class HUDView extends ViewGroup {
    private Paint mLoadPaint;
    private Float XMAX=280f;
    private Float YMAX=26f;
    private int XPOS=0;     

    public HUDView(Context context) {
        super(context);

        mLoadPaint = new Paint();
        mLoadPaint.setAntiAlias(true);
        mLoadPaint.setTextSize(10);
        mLoadPaint.setARGB(255, 255, 0, 0);

        context.bindService(intents, aslServiceConnection, Context.BIND_AUTO_CREATE);

        WindowManager wind = (WindowManager)context.getSystemService(Service.WINDOW_SERVICE);
        XPOS=wind.getDefaultDisplay().getWidth();

    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        //canvas.drawText("Hello World", 5, 15, mLoadPaint);
        //canvas.drawText("Hello World", 100, 100, mLoadPaint);
        Bitmap tileImage = BitmapFactory.decodeResource(getResources(), R.drawable.image);

        canvas.drawBitmap(tileImage, XPOS-35, 0, null);
        XMAX=Float.parseFloat(""+(XPOS-35));

    }

    @Override
    protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4) {
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        Float x=event.getX();
        Float y=event.getY();
        System.out.println("Mview has been touched  --->  "+x +" x "+y);
        if(x > 0 && y > 0)
        {
            if(x > XMAX && y < YMAX){

                TakeMyScreen(getContext());

            }

        }

        return true;
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        return super.onKeyDown(keyCode, event);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T07:32:46.783

必须在项目清单中使用权限，否则窗口未附加

```
android:name="android.permission.SYSTEM_ALERT_WINDOW" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:58:25.927

您可以使用[来自 github 的 NewPopupMenu 库](https://github.com/u1aryz/Android-NewPopupMenu)。

它将在任何侦听器的屏幕上的任何位置创建即时弹出菜单。

您只需下载库并解压缩，将源文件复制到项目中，并在此行修改代码`mPopupWindow.showAtLocation(parent, Gravity.CENTER, 0, 0);` 并将菜单放在您想要的任何位置。

# qt - Why is the build-path built into the Qt libraries

> ID：14229634
> 
> 赞同：1
> 
> 时间：2013-01-09T06:39:31.623
> 
> 标签：qt, build, path, installation

I've just built the Qt libraries (on Windows) from source and it seems that the build-path is actually built into the library binaries themselves! This makes moving the binaries to another machine or directory difficult (but not impossible - see [Change Qt install path after building?](https://stackoverflow.com/questions/2905868/change-qt-install-path-after-building))

I've never come across this in any other library I've used and was wondering why it is the way it is? Is this just a remnant of a solution some obscure unix "install" issue, or is there a good reason for it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:19:04.453

These paths are used on windows to search for plugins, translations, etc. If you install Qt via a Qt installer, one of the steps in the installer is to patch the path inside the binaries so they contain the installation path. You can override them by patching the binaries, or, much easier, by using a [qt.conf](http://doc.qt.digia.com/qt/qt-conf.html) file.

# css - nivo-caption 相同位置调整窗口大小

> ID：14229640
> 
> 赞同：0
> 
> 时间：2013-01-09T06:40:11.963
> 
> 标签：css, wordpress, nivo-slider

我已经为 wordpress 网站安装了 nivo-slider。这很好用。我还有一个 nivo-caption（文本覆盖滑块图像）。无论使用何种屏幕分辨率，此文本栏都必须位于滑块中的相同位置。我不知道该怎么做。我正在尝试的是，滑块中的文本栏总是根据屏幕分辨率调整大小。

该网站是：http: [//vanschendel.com/wordpress](http://vanschendel.com/wordpress)

Css 代码 nivo-slider: ` /* * jQuery Nivo Slider v3.1 * [http://nivo.dev7studios.com](http://nivo.dev7studios.com)
* * 版权所有 2012，Dev7studios * 在 MIT 许可下免费使用和滥用。* [http://www.opensource.org/licenses/mit-license.php](http://www.opensource.org/licenses/mit-license.php) */

```
 /* The Nivo Slider styles */
  .nivoSlider {
     position:relative;
     width:100%;
     height:auto;
     overflow: hidden;
  }
  .nivoSlider img {
     position:absolute;
     top:0px;
     left:0px;
     max-width: none;
  }
  .nivo-main-image {
     display: block !important;
     position: relative !important; 
     width: 100% !important;
  }

  /* If an image is wrapped in a link */
  .nivoSlider a.nivo-imageLink {
     position:absolute;
     top:0px;
     left:0px;
     width:100%;
     height:100%;
     border:0;
     padding:0;
     margin:0;
     z-index:6;
     display:none;
 }
 /* The slices and boxes in the Slider */
  .nivo-slice {
     display:block;
     position:absolute;
     z-index:5;
     height:100%;
     top:0;
 }
  .nivo-box {
     display:block;
     position:absolute;
     z-index:5;
     overflow:hidden;
 }
 .nivo-box img { display:block; }

 /* Caption styles */
 .nivo-caption {
     position:absolute;
     /*left:0px;*/
     /*left:40px;*/
     margin:0 auto 0 680px;
     bottom:0px;
     background:#eaecee;
     color:#373737;
     /*width:100%;*/
     width:5000px;
     height:35%;
     z-index:8;
     padding: 5px 10px;
     opacity: 0.9;
     overflow: hidden;
     display: none;
     -moz-opacity: 0.8;
     filter:alpha(opacity=8);
     -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
     -moz-box-sizing: border-box;    /* Firefox, other Gecko */
     box-sizing: border-box;         /* Opera/IE 8+ */
 } 
```

# drupal - Rss 提要视图在标题中显示编码的特殊字符

> ID：14229641
> 
> 赞同：0
> 
> 时间：2013-01-09T06:40:20.523
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我创建了一个视图来在网站上显示 rss 提要的标题，它以编码格式显示特殊字符，对于描述字段，它正确显示特殊字符。我无法编辑内容，因为它们来自其他来源。

我无法找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:21:11.853

尝试使用[check_plain()](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/check_plain/7)输出标题。那将解决问题。

为标题字段创建一个新的视图模板，然后使用以下代码：

```
print check_plain($output); 
```

# python - python使用分隔符读取制表符分隔的文件

> ID：14229643
> 
> 赞同：8
> 
> 时间：2013-01-09T06:40:40.590
> 
> 标签：python

我正在使用以下内容读取制表符分隔的文件。文件中有三列，但当我仅打印列标题时第一列被忽略。我如何也包括第一列

```
f = open("/tmp/data.txt")
for l in f.readlines():
  print l.strip().split("\t")
  break
  f.close() 
```

输出：['session_id\t', '\tevent_id_concat']

第一列名称是`id`上面数组中未打印的位置

`EDIT`

print l 产生以下结果

编辑1：

```
 'id\tsession_id\tevent_id_concat\r\n'

   Output: ['id\t', '\tevent_id_concat'] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T07:51:16.460

我还建议使用 csv 模块。如果您想读取以 CSV 格式（制表符/空格/其他分隔符）存储的类似表格的结构，它很容易使用并且最适合。

[模块文档](http://docs.python.org/2/library/csv.html)给出了很好的例子，其中最简单的用法被描述为：

```
import csv
with open('/tmp/data.txt', 'r') as f:
    reader = csv.reader(f)
    for row in reader:
        print row 
```

每行都是一个列表，如果您想进行基于索引的操作，这非常有用。

如果您想更改分隔符，则有一个关键字，但我通常对预定义的方言很好，也可以通过关键字定义。

```
import csv
with open('/tmp/data.txt', 'r') as f:
    reader = csv.reader(f, dialect='excel', delimiter='\t')
    for row in reader:
        print row 
```

我不确定这是否会解决您的问题，但使用详细模块将确保您的文件有问题，而不是您的代码有问题，如果错误仍然存​​在。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T06:51:16.193

它应该可以工作，但最好使用'with'：

```
with open('/tmp/data.txt') as f:
   for l in f:
       print l.strip().split("\t") 
```

如果没有，那么您的文件可能没有所需的格式。

# jquery - 来自 UL 的 jQuery 菜单

> ID：14229649
> 
> 赞同：0
> 
> 时间：2013-01-09T06:41:38.597
> 
> 标签：jquery, jquery-plugins

我需要一个看起来像选择框的菜单，但它是由 Wordpress 生成的 UL 制成的。我不想将其转换为会产生样式问题的实际选择框，而是想使用 jQuery 显示/隐藏。

我找不到为此制作的任何 jQuery 插件 - 从 UL 中制作一个小选择菜单。我最终想要的外观是这样的：[http](http://shaggysmile.github.com/jQueryCoreUISelect/) ://shaggysmile.github.com/jQueryCoreUISelect/ 。但是这个插件使用了一个实际的选择框，我在 Wordpress 中使用了 UL。

这是小提琴：http: [//jsfiddle.net/uthNv/1/](http://jsfiddle.net/uthNv/1/)

我需要用更好的东西替换这行代码：

```
if($(this).next('li').is(':hidden') == true) { 
```

使用下一个 LI 的问题是最后一个菜单项不起作用。请有任何建议，或者了解已经满足我需要的 jQuery 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:47:24.893

你可以试试这个：http: [//jsfiddle.net/uthNv/2/](http://jsfiddle.net/uthNv/2/)

```
if($(this).siblings('li:hidden').length) { 
```

你的情况`it was checking only the next li which is hidden`不是以前的问题，所以`if you use .siblings() which is at same level`这会起作用。

在这种情况下，您可以检查`.length`隐藏的 li 如果这是真的，那么您的 else 语句将被执行。

# c - 如何使用套接字编程在c中找到客户端地址

> ID：14229650
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:41:37.830
> 
> 标签：c, sockets

我在`accept`函数之后写了这样的代码

```
getpeername(rs,(struct sockaddr *)&clentaddr,&len); 
```

然后在打印后客户端地址显示为`0.0.0.0`

你能帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:53:09.020

`rs`如果显示为绑定到，则必须是侦听套接字`0.0.0.0`。尝试在. *_*`accept()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:50:34.740

```
int accept(int s,
   struct sockaddr *addr,
   int *addrlen); 
```

在上面的定义中，addr 存储了传入连接的地址

```
addr:-
The socket address of the connecting client that is filled in by accept 
before it returns. The format of addr is determined by the domain in which 
the client resides. This parameter can be NULL if the caller is not interested 
in the address of the client. If the addr parameter is not NULL, it points to
 a sockaddr structure. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T20:42:58.833

与 RAJESH 的回答类似，我们可以使用[http://man7.org/linux/man-pages/man3/inet_ntop.3.html](http://man7.org/linux/man-pages/man3/inet_ntop.3.html)`inet_ntop`中描述的功能。另一个答案中缺少的部分是必须将整体转换为 a而不是实际访问该成员。`sin_addr``struct inaddr *``s_addr`

```
char clntIP[INET_ADDRSTRLEN];
inet_ntop(AF_INET, (struct inaddr *)&clntAddr.sin_addr,clntIP,sizeof(clntIP));
printf("client IP is %s\n",clntIP); 
```

确保你也在`#include <arpa/inet.h>`你的文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:45:21.163

`accept()`在称为`accept()`的第二个参数的结构中返回客户端的地址。

只有在没有错误发生时才保证这样做，因此检查系统调用的返回值总是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T10:15:31.960

```
char IPAddress[16] = {0};
inet_ntop(AF_INET, &serveraddr.sin_addr.s_addr, IPChar, sizeof IPAddress);

printf("The source is %s.\n", IPAddress); 
```

试试这个代码

# hadoop - 将键值数据集表示为 Mahout 向量

> ID：14229655
> 
> 赞同：2
> 
> 时间：2013-01-09T06:42:05.220
> 
> 标签：hadoop, mahout

我在 CSV 中有一个数据集，它是一组键值对，数据集很大，值是整数和短字符串的混合（即不是冗长的文本，而是关键词），我想使用它来处理它Mahout 的聚类算法。

问题在于将此 CSV 转换为 Mahout 可以使用的向量。我一直在阅读“Mahout In Action”，似乎有两个矢量化选项，使用带有 Mahout 的 DenseVector、RandomAccessSparseVector 和 SequentialAccessSparseVector 实现的数值或使用矢量空间模型来矢量化文本文档。

我想要对其进行矢量化的数据并不是真正的文本文档，但由于它是一个包含许多不同键和值的庞大数据集，因此很难将其映射到数值。将此类数据矢量化以在 Mahout 中使用的最佳方法是什么？

任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T16:01:37.307

您很可能需要一个 RandomAccessSparseVector。

*   不是 DenseVector，因为大多数可能的键都不会被表示。您将整数和字符串混合作为键，因此它是一个很大的键空间。
*   不是 SequentialAccessSparseVector，因为在您的键空间中似乎没有自然顺序，这将使特定的访问顺序在 Mahout 中运行您的算法时更有效。

您可以轻松地尝试不同的向量表示，看看哪个可以提供最佳性能。

# php - Mailgun 发送邮件带附件

> ID：14229656
> 
> 赞同：12
> 
> 时间：2013-01-09T06:42:12.387
> 
> 标签：php, email, email-attachments, mailgun

当使用 mailgun 发送带有附件的邮件时，我遇到了问题。如果有人做过这件事，请回复。这是我的代码...

```
$mg_api = 'key-3ax6xnjp29jd6fds4gc373sgvjxteol0';
$mg_version = 'api.mailgun.net/v2/';
$mg_domain = "samples.mailgun.org";
$mg_from_email = "info@samples.com";
$mg_reply_to_email = "info@samples.org";

$mg_message_url = "https://".$mg_version.$mg_domain."/messages";

$ch = curl_init();
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);

curl_setopt ($ch, CURLOPT_MAXREDIRS, 3);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, false);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_VERBOSE, 0);
curl_setopt ($ch, CURLOPT_HEADER, 1);
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);

curl_setopt($ch, CURLOPT_USERPWD, 'api:' . $mg_api);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($ch, CURLOPT_POST, true); 
//curl_setopt($curl, CURLOPT_POSTFIELDS, $params); 
curl_setopt($ch, CURLOPT_HEADER, false); 

//curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
curl_setopt($ch, CURLOPT_URL, $mg_message_url);
curl_setopt($ch, CURLOPT_POSTFIELDS,                
        array(  'from'      => 'aaaa <' . 'aaa@aaa.com' . '>',
                'to'        => 'test.client91@gmail.com',
                'h:Reply-To'=>  ' <' . $mg_reply_to_email . '>',
                'subject'   => 'aaaaa'.time(),
                'html'      => 'aaaaaa',
                'attachment'[1] => 'aaa.rar'
            ));
$result = curl_exec($ch);
curl_close($ch);
$res = json_decode($result,TRUE);
print_r($res); 
```

（我已经使用了我的 mailgun 设置）

我收到没有附件的电子邮件。如果我使用 URL 路径，它会显示 URL 而不是附件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-16T07:06:53.483

我意识到这是旧的，但我刚刚遇到了这个问题，这个页面几乎是我在网上可以找到的唯一信息。所以我希望这对其他人有帮助。在与 MailGun 支持人员交谈后，我发现以下适用于当前 API。

循环通过零到 n 个附件文件的数组：

```
 $attachmentsArray = array('file1.txt', 'file2.txt');
    $x = 1;
    foreach( $attachmentsArray as $att )
    {
        $msgArray["attachment[$x]"] = curl_file_create( $att );
        $x ++;
    }

    // relevant cURL parameter, $msgArray also contains to, from, subject  parameters etc.
    curl_setopt($ch, CURLOPT_POSTFIELDS,$msgArray); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T18:13:07.330

您需要通过以下方式更改最后一个参数： `attachment[1]' => '@aaa.rar`

我们的文档中有一些用于此用例的示例。只需单击顶部栏中的 PHP 即可切换语言。 [http://documentation.mailgun.net/user_manual.html#examples-sending-messages-via-http](http://documentation.mailgun.net/user_manual.html#examples-sending-messages-via-http)

如有任何问题，请随时向我们发送电子邮件至 support@mailgunhq.com。我们总是很乐意提供帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T04:57:19.680

文档没有明确说明，但附件本身作为 multipart/form-data 捆绑到请求中。

调试正在发生的事情的最佳方法是使用 Fiddler 来观察请求。确保您接受 Fiddler 的根证书，否则由于 SSL 错误，请求不会发出。

您应该在 Fiddler 中看到的是 Headers：

Cookies / 登录

```
Authorization: Basic <snip>== 
```

实体

```
Content-Type: multipart/form-data; boundary=<num> 
```

对于 TextView：

```
Content-Disposition: form-data; name="attachment"
@Test.pdf

Content-Disposition: form-data; name="attachment"; filename="Test.pdf"
Content-Type: application/pdf
<data> 
```

请注意，您发布字段“附件=@<文件名>”。对于表单数据，字段名称也是“附件”，然后是“文件名=<文件名>”（没有“@”），最后是文件内容。

我认为 CURL 应该只是基于使用“@”语法并指定本地计算机上文件的路径来神奇地为您完成这一切。但是如果不知道神奇的行为，就很难理解到底发生了什么。

例如，在 C# 中，它看起来像这样：

```
public static void SendMail(MailMessage message) {
    RestClient client = new RestClient();
    client.BaseUrl = apiUrl;
    client.Authenticator = new HttpBasicAuthenticator("api", apiKey);

    RestRequest request = new RestRequest();
    request.AddParameter("domain", domain, ParameterType.UrlSegment);
    request.Resource = "{domain}/messages";
    request.AddParameter("from", message.From.ToString());
    request.AddParameter("to", message.To[0].Address);
    request.AddParameter("subject", message.Subject);
    request.AddParameter("html", message.Body);

    foreach (Attachment attach in message.Attachments)
    {
        request.AddParameter("attachment", "@" + attach.Name);
        request.AddFile("attachment",
            attach.ContentStream.WriteTo,
            attach.Name,
            attach.ContentType.MediaType);
    }

    ...
    request.Method = Method.POST;
    IRestResponse response = client.Execute(request);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-15T21:43:37.763

我在这个问题上停留了一段时间，这里的答案对我有所帮助，但是我遇到了一些尚未提及的事情。

我一直在发送带有空白/NULL 'cc' 值的 POST 参数，例如：`$post_data['cc'] = NULL;`. 这并没有阻止我发送文本电子邮件（无附件），但在发送带有附件的电子邮件时确实会导致问题。从我的阵列中删除空白`cc`解决了部分问题。

此外，在通过 PHP curl 发布我的数据之前，我一直在使用`http_build_query`它，这导致我的带有附件的电子邮件无法成功发送。

删除空的`cc`并`http_build_query`为我解决了这个问题。也许是一个不常见的情况，但张贴以防万一它对遇到同样问题的人有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-11T12:02:54.927

添加附件文件：

```
"attachment[1]" = "@$_FILES['careerDocument']['tmp_name'];filename=test.jpg".
($contentType ? ';type=' . $contentType : '' ) ;
curl_setopt($ch, CURLOPT_POSTFIELDS, ($message)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-24T07:02:04.917

这对我有用：

```
<?php

$filePath='@Wealth_AC_AMF.pdf';

$curl_post_data=array(
    'from'    => 'Excited User <noreply@test.com>',
    'to'      => 'test@gmail.com',
    'subject' => 'Hello',
    'text'    => 'test',
'attachment[1]' => $filePath
);

$service_url = 'https://api.mailgun.net/v3/test.com/messages';
$curl = curl_init($service_url);
curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($curl, CURLOPT_USERPWD, "api:key-test"); 

curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_POST, true);

curl_setopt($curl, CURLOPT_POSTFIELDS, $curl_post_data);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); 

$curl_response = curl_exec($curl);  
$response = json_decode($curl_response);
curl_close($curl);

var_dump($response);

 ?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-30T15:42:38.567

这对我有用...

```
class Email {

    function send($array, $file_array) {
        $mgClient = new Mailgun('YOUR_MAILGUN_API_KEY');
        $domain = "mg.YOUR_DOMAIN.com";
        $result = $mgClient->sendMessage($domain, $array, array('attachment' => $file_array));
        return $result;
    }   
}

$array = array(
    'from'    => 'From <from@from.com>',
    'to'      => 'To <to@to.com>',
    'subject' => 'Your Subject',
    'html'    => '<h1>Hooray!</h1>',
);

$file_array = array('/var/www/scripts/test.csv');
echo json_encode($Email::send($array, $file_array)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-10T07:24:30.287

这对我来说很好。

```
require '../../vendor/autoload.php';
use Mailgun\Mailgun;

# Instantiate the client.
$mgClient = new Mailgun('key-b0e955');
$domain = "domain.com";

# Make the call to the client.
$result = $mgClient->sendMessage("$domain",
  array('from'    => '<postmaster@domain.com>',
        'to'      => '<test@gmail.com>',
        'subject' => 'csv file',
        'text' => 'csv test file'
       ),array('attachment' => [
    ['remoteName'=>'student.csv', 'filePath'=>'/form/stu.csv']
  ]) ); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-29T21:30:55.313

这对我有用。我已经在附件数组中传递了附件文件 URL。现在我可以在电子邮件中发送多个附件。

`$attachment = [ 0 => 'https://www.crm.truerater.com/public/assets/client_upload_images/1634327873.png', 1 => 'https://www.crm.truerater.com/public/assets/client_upload_images/1634327873.png' ];`

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'https://api.mailgun.net/v3/truerater.com/messages');
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    $post = array(
        'from' =>  $mailfromname .'<'.$mailfrom.'>',
        'to' => $toname.'<'.$to.'>',
        'cc' => '',
        'bcc' => '',
        'subject' => $subject,
        'html'=>$html,
        'text'=>$text,
        'o:tracking'=>'yes',
        'o:tracking-clicks'=>'yes',
        'o:tracking-opens'=>'yes',
        'o:tag'=>$tag,
        'h:Reply-To'=>$replyto,
    );
    if(sizeOf($attachment) > 0){
        $i=0;
        foreach ($attachment as $attach){
            $attachPath = substr($attach, strrpos($attach, '/public/') + 1);
            $post['attachment['.$i.']'] = curl_file_create($attach, '', substr($attachPath, strrpos($attachPath, '/') + 1));
            $i=$i+1;
        }
    }
    $headers_arr = array("Content-Type:multipart/form-data");
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
    curl_setopt($ch, CURLOPT_USERPWD, 'api' . ':' . $key);
    curl_setopt($ch, CURLOPT_HEADER, $headers_arr);
    curl_setopt($ch, CURLOPT_ENCODING, 'UTF-8');
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    $result = curl_exec($ch);

    if (curl_errno($ch)) {
        $result = curl_error($ch);
        \Log::info($result);
    }
    else{
        $result = json_decode($result,true);
    }
    curl_close($ch);

    \Log::info($result);
    return $result; 
```

# c++ - 以相反的顺序打印字符串输入

> ID：14229657
> 
> 赞同：0
> 
> 时间：2013-01-09T06:42:12.470
> 
> 标签：c++, string, getline, output

我正在尝试构建一个程序，该程序以相反的顺序输出输入，直到输入“停止”一词。例如，如果我输入

```
dog cat monkey 
desk chair 
burger cheese ham 
stop 
```

它应该输出：

```
burger cheese ham
desk chair
dog cat monkey 
```

到目前为止，我有以下内容：

```
{
string x, y;
do {
    cin >> x;
    y = y + x;
} while (x != "stop");

int reverse = y.getNumLines();

while (reverse >= 0) {
    cout << y.getLine(reverse) << "\n";
    reverse = reverse -1;
}
return 0;    
} 
```

它正确读取了我的输入，但是对于`y.getNumlines`and `y.getLine`，我得到没有输出的错误。谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:56:09.620

为什么不交换您附加的订单？

```
#include <iostream>

int main(int argc, const char * argv[])
{

    std::string x, y;
    while ( (std::getline(std::cin,x)) && x != "stop"){
        y = x + "\n" + y;  // "" + "foo bar"  2.) "second input" + "foo bar"
    }

    std::cout<< y;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:27:25.510

Nico 的答案对您来说可能是一条更好的路径，但对于那些更喜欢更惯用的方法的人，我推荐一个行向量，一旦存储，您就可以轻松地向后打印。首先是一个`Line`类，您可以使用它来习惯性地读取输入行，而不是停在空格处：

```
struct Line {
   std::string str;
};

std::istream &operator>>(std::istream &in, Line &line) {
   std::getline(in, line.str);

   if (line.str == "stop") {
       in.clear(std::ios::failbit);
   }

   return in;
}

std::ostream &operator<<(std::ostream &out, const Line &line) {
   out << line.str;
   return out;
} 
```

我们`Line`所需要的只是一个带有实际文本的字符串，并且我已经为它添加了输入和输出支持，原因您将在接下来看到。请注意，输入是 through`getline`而不是`>>`。这是`Line`上课的主要目的。当输入“停止”时，我也让它失败了。如果省略，它将继续读取直到 EOF。

现在，您可以毫不费力地重用 line 类，以便根据需要调整输入。接下来，我们开始使用我们刚刚创建的（或者可能是其他东西留下的）：

```
int main() {
   std::istream_iterator<Line> in1(std::cin), in2;
   std::vector<Line> inputs(in1, in2);
   std::reverse_copy(std::begin(inputs), std::end(inputs), std::ostream_iterator<Line>(std::cout, "\n"));
} 
```

我们做的第一件事是通过读取输入来形成一个向量（使用我们对 的输入支持`Line`）。当到达文件末尾或输入“停止”时，它将停止，并且每一行输入都将很好地存储在我们的向量中。

接下来，我们调用`reverse_copy`将向量中的所有内容（输入的每一行）复制到标准输出，用换行符分隔，但都是反向完成的，所以我们以相反的顺序结束每一行。

就是这样！一旦创建了`Line`类，获取行输入并反转它们的算法可以保持与我们使用单词执行的相同，但是切换到行只需要替换一些`std::string`with实例`Line`。

# c# - 更新配置文件

> ID：14229659
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:42:13.067
> 
> 标签：c#, asp.net

我正在尝试从我的项目中更新另一个应用程序的 app.config 文件，它们都在 c# 中。我知道如何为内存中的项目更新它，但不确定如何访问我的另一个项目的 app.config 文件。我有以下代码，但这会改变我当前项目的 app.config 文件而不是另一个....感谢您的建议或想法

```
 XmlDocument xmlDoc = new XmlDocument();

    xmlDoc.Load(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);

    foreach (XmlElement element in xmlDoc.DocumentElement)
    {
        if (element.Name.Equals("appSettings"))
        {
            foreach (XmlNode node in element.ChildNodes)
            {
                if (node.Attributes[0].Value.Equals("Setting1"))
                {
                    node.Attributes[1].Value = "New Value";
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:51:41.743

好吧，如果显示的代码适用于当前项目的 app.config 文件，它应该适用于其他项目的 app.config 文件，您只需要从适当的路径加载文件即可。换句话说，而不是这样做：

```
 xmlDoc.Load(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile); 
```

您必须将其更改为：

```
 xmlDoc.Load("Path\\to\\config\\file\\of\\other\\application"); 
```

或者更好的是，创建一个将 app.config 文件的路径作为参数的新方法，您可以根据要更改的文件相应地调用它....

# java - 从 names.nsf 目录中检索拒绝访问组成员

> ID：14229660
> 
> 赞同：0
> 
> 时间：2013-01-09T06:42:15.033
> 
> 标签：java, lotus-notes, lotus-domino

我使用的是 Lotus Notes 8.5.2 版。我对 lotus.domino java API 比较陌生。我需要检索拒绝访问组中的成员并将其放入文件中。如何使用提供的 API 访问成员..？感谢您在这方面的任何帮助..

我从回复中得出了以下代码。如果我朝着正确的方向前进，请告诉我。

```
lotus.domino.Document fDoc = null;
lotus.domino.Database fDb = null;
lotus.domino.View view = null;

fDb = NotesSess.getDatabase(sServerName, "names.nsf");
view = fDb.getView("DenyLists");
fDoc = view.getFirstDocument();
 while(fDoc != null)
   {
      java.util.Vector fItems = fDoc.getItems();
      for(int iCnt=0 ; iCnt < fItems.size();iCnt++)
          {
            lotus.domino.Item fItem = (Item) fItems.elementAt(iCnt);
                 if(fItem.getName()== "Members")
                      {
                         Vector fItemValues = fItem.getValues();
                         int fNumValues = fItemValues.size();
                         String fValueStr = null ;
                         for(int ii=0 ;ii < fNumValues ;ii++)
                           fValueStr = (String) fItemValues.elementAt(ii);
                        }
            }
    } 
```

我会得到变量中的成员`fValueStr`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:00:28.457

Notes 对象引用可以`help\help85_designer.nsf`在大多数服务器上本地找到。可以在此处找到 Web 版本（带有大量示例代码）： http: [//publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.api。 doc%2Fr_domino_Database.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.api.doc%2Fr_domino_Database.html)

这是一些伪代码：

我已经假设您已经初始化了 NotesSession 对象。

1.  在服务器上打开`names.nsf`并将其分配给一个`NotesDatabase`对象。
2.  获取视图`DenyLists`并将其分配给`NotesView`对象。
3.  遍历视图将每个新文档分配给一个`NotesDocument`对象。
4.  您想从拒绝访问组文档中获取的 NptesItem 是成员，它包含用户或嵌套组的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:51:43.417

正如@PanuHaaramo 的评论中所述，您的代码是一个无限循环。如果 DenyLists 视图中只有一个 Group 文档，那么 while 循环是不必要的，所以只需摆脱它。如果可能不止一个，则保留 while 循环，但在结束 } 之前添加 fDoc=view.getNextDocument(fDoc)。

Panu 也是正确的，你真的让自己变得比需要的更难。您可以只使用 getItemValue("Members")，而不是使用 getItems() 并循环遍历结果，这将返回一个字符串向量。

此外，如果您打算运行代码的环境可能在拒绝访问列表中使用嵌套组，那么您将需要编写额外的代码来测试每个字符串以查看它是用户还是组 - 以及代码to（递归，因为拒绝列表中的组也可以包含组）访问任何嵌套组并获取其成员。

# c# - Silverlight 在完全初始化之前将对象添加到集合中？

> ID：14229672
> 
> 赞同：0
> 
> 时间：2013-01-09T06:42:50.077
> 
> 标签：c#, silverlight, xaml, datagrid

![截屏](../Images/619a10814bdcc55942f252edc757ea4b.png)

什么会导致第三列中表现出的行为？

显示的数据是存储在集合中的对象的随机创建的字段。集合被填充后，集合被绑定在 Main Page 构造函数中。我已经在调试中多次单步执行该应用程序，并且正在为每一行/对象重新生成数据。但是如果我只是在没有调试的情况下运行，我会得到这种行为。从第二个项目开始的第三个属性/列会重复。

相关 XAML：

```
<sdk:DataGrid AutoGenerateColumns="False" Grid.Column="1" Grid.Row="1" Height="400" HorizontalAlignment="Left" Margin="0,26,0,0" Name="dgList" VerticalAlignment="Top">
    <sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn Binding="{Binding Location}" CanUserResize="True" Width="Auto" x:Name="objLocation" />
        <sdk:DataGridTextColumn Binding="{Binding Name}"  CanUserResize="True" Width="Auto" x:Name="objName" />
        <sdk:DataGridTextColumn Binding="{Binding UPC}" CanUserResize="True" Width="Auto" x:Name="objUPC" />
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

Main_Page 后面的代码：

```
 public Collection<MyClass> myList;

    public MainPage()
    {
        InitializeComponent();
        myList = new Collection<MyClass>();
        CreateHexGrid(8, 10, 30);
        dgList.ItemsSource = myList;
   } 
```

...

```
 private void AddObjects(Point[, ,] HexPoint, int columns, int rows, double length)
    {
                    ....
                    string loc = col.ToString() + row.ToString();
                    myList.Add(new MyClass(loc));
    } 
```

跨浏览器的行为是一致的。

附加信息 ---

当我使用调试逐步完成此操作时，我没有得到这种行为。第三列生成一个预期的唯一字符字符串。

所以，我的问题是......我的 MainPage 如何在完成初始化之前将 MyClass 对象添加到 MyList 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:28:19.207

与朋友的深夜调试会议表明我的代码并不太慢。他强调了这样一个事实，即第三列最终确实会生成一个新代码，但不是每次都生成。

简短的回答，一个私有的 Random 类级对象没有结束。通过将 Random 对象设为静态，该类开始按预期运行。

# android - 假设 JSON 响应中没有图像，但将存在数据，然后无法在列表视图中显示图像和数据

> ID：14229675
> 
> 赞同：1
> 
> 时间：2013-01-09T06:42:54.900
> 
> 标签：android, json

我在列表视图中添加从 web 服务（json 响应）获得的图像和数据。有时图像存在于数组中，有时没有图像，如果图像存在于数组中，那么我得到正确的输出，图像和数据都将显示在列表视图中，但如果数组中没有图像，那么即使数据存在但它不会显示列表视图中的任何内容。在这里挣扎 if 语句下面是我的代码任何答案将不胜感激任何人都可以帮助？

```
 ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(URL);
            try {
                JSONArray posts = json.getJSONArray(KEY_POSTS);

    // looping through all song nodes <song>
            for(int i = 0; i < posts.length(); i++){
                JSONObject c = posts.getJSONObject(i);
                // Storing each json item in variable
                String id = c.getString(KEY_ID);
                String title = c.getString(KEY_TITLE);
                String date = c.getString(KEY_DATE);
                String content = c.getString(KEY_CONTENT);
                // to remove all <P> </p> and <br /> and replace with ""
                 content = content.replace("<br />", "");
                 content = content.replace("<p>", "");
                 content = content.replace("</p>", "");

                //authornumber is agin  JSON Object
                JSONObject author = c.getJSONObject(KEY_AUTHOR);
                String name = author.getString(KEY_NAME);

                JSONArray atta = c.getJSONArray("attachments");
                for(int j = 0; j < atta.length(); j++){
                    JSONObject d = atta.getJSONObject(j);

                    String slug = d.getString(KEY_SLUG);

                    JSONObject images = d.getJSONObject(KEY_IMAGES);

                    JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                    String url = thumbnail.getString(KEY_URL);

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
        map.put(KEY_ID, id);
        map.put(KEY_TITLE, title);
        map.put(KEY_DATE, date);
        map.put(KEY_NAME, name);
        map.put(KEY_CONTENT, content);
        map.put(KEY_SLUG, slug);
        map.put(KEY_URL, url);

        // adding HashList to ArrayList
        songsList.add(map);
            }   }
            } catch (JSONException e) {
                e.printStackTrace();

                }

    list=(ListView)findViewById(android.R.id.list);
    list.setOnScrollListener(this);
    // Getting adapter by passing json data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:50:52.777

在您的 listAdapter 的 getView() 方法中检查 url 值。如果它为空或为空，则显示一些存根图像（一些图像，如无可用图像-> 将其保存在 res 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:54:50.783

这是因为你在一个`try-catch`块内做所有事情。当没有图像时，它会抛出一个错误，跳出你的循环。您应该`try-catch`单独添加一个块来读取图像：

```
 ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(URL);
            try {
                JSONArray posts = json.getJSONArray(KEY_POSTS);

    // looping through all song nodes <song>
            for(int i = 0; i < posts.length(); i++){
                JSONObject c = posts.getJSONObject(i);
                // Storing each json item in variable
                String id = c.getString(KEY_ID);
                String title = c.getString(KEY_TITLE);
                String date = c.getString(KEY_DATE);
                String content = c.getString(KEY_CONTENT);
                // to remove all <P> </p> and <br /> and replace with ""
                 content = content.replace("<br />", "");
                 content = content.replace("<p>", "");
                 content = content.replace("</p>", "");

                //authornumber is agin  JSON Object
                JSONObject author = c.getJSONObject(KEY_AUTHOR);
                String name = author.getString(KEY_NAME);

                String url = null;
                String slug = null;
                try {
                JSONArray atta = c.getJSONArray("attachments");
                for(int j = 0; j < atta.length(); j++){
                    JSONObject d = atta.getJSONObject(j);

                    slug = d.getString(KEY_SLUG);

                    JSONObject images = d.getJSONObject(KEY_IMAGES);

                    JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                    url = thumbnail.getString(KEY_URL);
                } catch (Exception e) {}

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
        map.put(KEY_ID, id);
        map.put(KEY_TITLE, title);
        map.put(KEY_DATE, date);
        map.put(KEY_NAME, name);
        map.put(KEY_CONTENT, content);
        map.put(KEY_SLUG, slug);
        map.put(KEY_URL, url);

        // adding HashList to ArrayList
        songsList.add(map);
            }   }
            } catch (JSONException e) {
                e.printStackTrace();

                }

    list=(ListView)findViewById(android.R.id.list);
    list.setOnScrollListener(this);
    // Getting adapter by passing json data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter); 
```

# powershell - 在 PowerShell 2.0 / 3.0 中运行 SQL 查询的设置环境

> ID：14229676
> 
> 赞同：1
> 
> 时间：2013-01-09T06:43:02.213
> 
> 标签：powershell

我想

一种。使用 PowerShell 运行 SQL 查询并管理 SQL Server。有人可以指导我吗？

湾。使用 PowerShell 运行 AD 查询。

C。请建议 SQL Server 2008 R2 或 SQL Server 2008 PowerShell 模块的位置。d。主机是否足以在 PowerShell 3.0 上运行，而我正在提取信息以在 PS 2.0 上运行的机器的其余部分是否足够？

任何建议都会非常有帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:21:24.870

对于 SQL 查询，安装 SQL Server Management Studio，它会附带[`SqlServerProviderSnapin100`和`SqlServerCmdletSnapin100`](http://blogs.msdn.com/b/dtjones/archive/2011/03/31/loading-sql-server-snapins-into-your-powershell-session.aspx). 这 2 个加载项将为您提供所需的大部分内容。其余的，您需要使用[SMO](http://blogs.msdn.com/b/dtjones/archive/2011/03/31/loading-sql-server-snapins-into-your-powershell-session.aspx)。

AD 查询 - 您可用的内容在很大程度上取决于您运行的 Windows 和 Powershell 版本以及您安装的内容。RSAT 工具为您提供了一些额外的 cmdlet IIRC，然后是[Quest AD cmdlet](http://www.quest.com/powershell/activeroles-server.aspx)（第三方），可以稍微简化一些事情。最坏的情况，你最终会做一堆[ADSI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772170%28v=vs.85%29.aspx)查询

对于您的最后一个问题，这在很大程度上取决于您*如何*提取信息。一般来说，它可能会正常工作，但如果您使用 PSRemoting 并期望在使用 PSSession 或时在 2.0 系统上存在版本 3 cmdlet `invoke-scriptblock`，则它将无法正常工作。如果某个 cmdlet 允许您指定`Computername`要连接的对象，它可能会起作用。

# php - textarea joomla中的tinymce编辑器css问题

> ID：14229680
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:43:24.577
> 
> 标签：php, css, tinymce, joomla2.5

当我包含以下 css 文件时，我在 tinymce 编辑器中遇到问题

与 admin.comtent.html.php 文件中的文本区域内一样。从数据库中检索文本。

这是我的代码

```
$row->text .= htmlentities("<link href='templates/system/css/system.css' rel='stylesheet' type='text/css' />");
$row->text .= htmlentities("<link href='templates/tpl_safari/css/template.css' rel='stylesheet' type='text/css' />");

echo $editor->display( 'text',  $row->text , '100%', '550', '75', '20' ) ; 
```

当我调试它时，`$row->test` 它显示了数据库中的内容以及css链接，但是在编辑器中没有应用css，我在html源代码中查看了它，没有应用css，也在浏览器中使用firebug我编辑该内容并在此处添加链接，现在已应用 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:45:22.327

您不能以这种方式将 css 添加到编辑器中。查看 tinymce 配置选项[content_css](http://www.tinymce.com/wiki.php/Configuration%3acontent_css)以及如何在 joomla 中进行设置。

# cordova - 子浏览器打不开

> ID：14229685
> 
> 赞同：2
> 
> 时间：2013-01-09T06:43:43.850
> 
> 标签：cordova, childbrowser

我在我的设备上安装了一个 childbrowser 的示例。源代码可以在这里找到：

[https://github.com/Icenium/sample-childbrowser.git](https://github.com/Icenium/sample-childbrowser.git)

应用程序运行后没有打开子浏览器。我没有对代码进行任何更改，所以我确定问题不在于代码。我已经尝试过其他 childbrowser 示例，但也没有打开 childbrowser。

我知道这是非常模糊的，所以我不期待直接的答案。我只想问一些提示或建议，从哪里开始解决我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:59:48.053

App Store 上有一个新版本的 Icenium Ion 支持 ChildBrowser 插件。但是，您需要卸载 Ion 并进行全新安装才能使其正常工作。由于某种原因，升级不会启用插件。

但是，模拟器仍然不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:03:37.663

就像@Whizkid747 提到的那样，如果您正在使用 Icenium 并且无法使插件工作，这可能是因为此时 Icenium 模拟器不支持 ChildBrowser - 也不支持 Ion。

似乎让它工作的唯一方法是将其配置到真实设备，而不使用 Ion。[有关Icenium 论坛的](http://icenium.com/community/forums/icenium-general-discussion/childbrowser#1qJoJ4OtrEmgg-ujgwNF8Q)更多信息。

请注意，有一个针对此问题的开放[功能请求。](https://feedback.telerik.com/Project/87/Feedback/Details/1066-support-for-childbrowser-in-simulator-or-ion)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:36:22.543

如果您需要用于 phonegap 的 childbrowser（我假设这是正确的，因为您已使用 phonegap 标记了帖子），请从此链接使用它：[https](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/ChildBrowser) ://github.com/phonegap/phonegap-plugins/tree/master/iPhone/ChildBrowser . 您提供的链接适用于 Telerik Icenium Childr 浏览器插件。

如果您需要 Telerik Icenium 的插件，请用 Telerik 标记问题并更改标题以表明您需要 Icenium 的帮助，以便一些 Telerik 专家可以帮助您。

# python-2.7 - 如何使用 wxpython 将数据从子框架发送到主框架

> ID：14229691
> 
> 赞同：2
> 
> 时间：2013-01-09T06:44:31.057
> 
> 标签：python-2.7, wxpython, subprocess

我是 wxpython 的新手，我想知道如何在 wxpython 中将数据从子框架发送到主框架？

这是关于我的 prog 的简要说明：子框架有 spinctrl 和一个按钮，当我们单击按钮时，大型机应该得到那些用于进一步应用程序的值。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:01:00.103

最好使用 wx.lib.pubsub 中的 Publisher 像这样跨帧发送消息。您`subscribe`在主框架中发送一条消息，然后`sendMessage`从子框架中获取消息。

有关示例和更多信息，请参阅 [http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)

# iphone - 通过 iphone SDK 中弹出框的表格行关闭模态视图

> ID：14229692
> 
> 赞同：1
> 
> 时间：2013-01-09T06:44:32.903
> 
> 标签：iphone, ios, objective-c, xcode, uipopovercontroller

在我的应用程序中，我展示了一个模态视图。在模态视图中，我拍摄了一个包含表格视图和按钮的视图（Extraview）。

从这个按钮，我打开一个包含视图（LeftsideView）的弹出视图。

```
-(IBAction)popOverBtnPressed:(id)sender
{
    LeftSideVCViewController *popUp=[[LeftSideVCViewController alloc] initWithNibName:@"LeftSideVCViewController" bundle:nil];

    popView = [[UIPopoverController alloc]initWithContentViewController:popUp];
    popView.delegate =self;

    [popView setPopoverContentSize:CGSizeMake(300, 700)];
    [popView presentPopoverFromRect:CGRectMake(150,30,20,40) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

} 
```

![在此处输入图像描述](../Images/f707192cb35caf51febf88586182080f.png) ![在此处输入图像描述](../Images/77f80271d67db5a04dd685e19af7f370.png)

**现在，我想取消选择左侧视图表行的模式视图。我怎样才能做到这一点。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:58:29.930

在您的问题中提出 PopOver 是一个不同的类，而驳回方法是一个不同的类所以你需要`NSNotificationCenter`像下面这样实现：-

在您的`ViewDidLoad`方法中的 PopOVer 创建类中添加通知：-

```
- (void)viewDidLoad
{

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(dismisPopoverInnerPageTeam:)
                                                 name:@"InnerPop"
                                               object:nil];

    [super viewDidLoad];

}

-(void)dismisPopoverInnerPageTeam:(NSNotification *)notification {

    [yourPopOver dismissPopoverAnimated:YES];
} 
```

现在您只需要从您的`LeftSideVCViewController`类`UITableView Delegate`方法中调用此方法`didSelectRowAtIndexPath`，例如：-

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     [[NSNotificationCenter defaultCenter] postNotificationName:@"InnerPop" object:self];

} 
```

希望对你有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:47:24.840

试试这个：

[popoverControllerdismissPopoverAnimated:YES];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:44:32.420

我解决了这个如下：

注册后通知。

您必须首先关闭弹出框，然后关闭呈现的模式视图。

```
-(void)dismissModal:(NSNotification *)notification
{

     [popView dismissPopoverAnimated:YES];
   [self dismissViewControllerAnimated:YES completion:nil];

} 
```

# ajax - Google Maps API 仅在使用 AJAX 时抛出“Uncaught ReferenceError: google is not defined”

> ID：14229695
> 
> 赞同：89
> 
> 时间：2013-01-09T06:44:53.730
> 
> 标签：ajax, google-maps-api-3

我有一个使用 Google Maps API 显示地图的页面。当我直接加载页面时，会出现地图。但是，当我尝试使用 AJAX 加载页面时，出现错误：

```
Uncaught ReferenceError: google is not defined 
```

为什么是这样？

这是带有地图的页面：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var chicago = new google.maps.LatLng(41.850033, -87.6500523);
  var mapOptions = { zoom:7, mapTypeId: google.maps.MapTypeId.ROADMAP, center: chicago }
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  directionsDisplay.setMap(map);
}
$(document).ready(function(e) { initialize() });
</script>
<div id="map_canvas" style="height: 354px; width:713px;"></div> 
```

这是带有 AJAX 调用的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head>
<body>
<script>
$(document).ready(function(e) {
    $('button').click(function(){
        $.ajax({
            type: 'GET', url: 'map-display',
            success: function(d) { $('#a').html(d); }
        })
    });
});
</script>
<button>Call</button>
<div id="a"></div>
</body>
</html> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-09T12:45:29.293

默认情况下，文档加载完成后无法加载 API，您需要异步加载。

用地图修改页面：

```
<div id="map_canvas" style="height: 354px; width:713px;"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=initialize"></script>
<script>
var directionsDisplay,
    directionsService,
    map;

function initialize() {
  var directionsService = new google.maps.DirectionsService();
  directionsDisplay = new google.maps.DirectionsRenderer();
  var chicago = new google.maps.LatLng(41.850033, -87.6500523);
  var mapOptions = { zoom:7, mapTypeId: google.maps.MapTypeId.ROADMAP, center: chicago }
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  directionsDisplay.setMap(map);
}

</script> 
```

有关更多详细信息，请查看：[**https ://stackoverflow.com/questions/14184956/async-google-maps-api-v3-undefined-is-not-a-function/14185834#14185834**](https://stackoverflow.com/questions/14184956/async-google-maps-api-v3-undefined-is-not-a-function/14185834#14185834)

示例：http: [**//jsfiddle.net/doktormolle/zJ5em/**](http://jsfiddle.net/doktormolle/zJ5em/)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-07-16T03:57:02.597

我知道这个答案与这个问题的问题没有直接关系，但在某些情况下，如果在您使用的 google maps api 之前调用您的 js 文件，则会出现“未捕获的 ReferenceError：google is not defined”问题...所以不要这样做：

```
<script type ="text/javascript" src ="SomeJScriptfile.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-05-07T07:45:11.217

Uncaught ReferenceError: google is not defined 当从地图 API 脚本标签中删除**异步延迟**时，错误将消失。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-09T09:07:17.993

猜测一下，你在初始化函数之前初始化了一些东西：

`var directionsService = new google.maps.DirectionsService();`

将它移到函数中，这样它就不会在页面加载之前尝试执行它。

```
var directionsDisplay;
var directionsService;
var map;

function initialize() {
  directionsService = new google.maps.DirectionsService();
  directionsDisplay = new google.maps.DirectionsRenderer();
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-30T12:50:29.177

在遵循所有解决方法后对我有用的是调用 API：

```
 <script async defer src="https://maps.googleapis.com/maps/api/js?key=you_API_KEY&callback=initMap&libraries=places"
            type="text/javascript"></script> 
```

在我之前：`<div id="map"></div>`

我正在使用 .ASP NET (MVC)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-28T00:00:57.207

我在不同的浏览器上尝试过，对我来说答案是在脚本标签中有这个 type="text/javascript" 非常重要

为了浏览器的兼容性，添加到每个 js 脚本中非常重要

```
<script type="text/javascript" src="ANY_FILE_OR_URL"></script> 
```

在此之后，类似 `Uncaught ReferenceError: google is not defined`或其他问题（无法加载任何参考的问题都消失了）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-30T16:43:51.580

为了我

添加这一行

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

在这条线之前。

```
<script id="microloader" type="text/javascript" src=".sencha/app/microloader/development.js"></script> 
```

工作过

# android - Android Youtube API 是否使用官方 Youtube 应用程序播放视频？

> ID：14229708
> 
> 赞同：1
> 
> 时间：2013-01-09T06:45:48.303
> 
> 标签：android, youtube, video-streaming, youtube-api

我使用[Youtube api](https://developers.google.com/youtube/android/player/downloads/) for android 开发了一个应用程序。即使我创建了应用程序并且它工作正常。我仍然无法找出这个 api 的真正作用

1）当我第一次在设备 android 2.2 上运行它时。它迫使我从 Google Play 商店下载[官方 YouTube 应用程序的新更新。](https://play.google.com/store/apps/details?id=com.google.android.youtube&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC55b3V0dWJlIl0.)之后它工作正常并且没有要求进一步更新或下载 YouTube 应用程序。YouTube api 使用 Youtube 应用程序播放视频也是如此通过浏览 api 代码我发现了一些东西

```
public static Intent createVideoIntent(Activity paramActivity, 
String paramString1, String paramString2, int paramInt, boolean paramBoolean1, boolean paramBoolean2)
{
   return a(newIntent("com.google.android.youtube.api.StandalonePlayerActivity.START").putExtra
        ("video_id", paramString2), paramActivity, paramString1, paramInt, paramBoolean1, paramBoolean2);
} 
```

当我查看 YouTube 应用程序代码时，我发现了一个`activity class`名为`StandalonePlayerActivity`. 但是视频是在我设计的 UI 容器中播放的，`com.google.android.youtube.player.YouTubePlayerView`它是 Youtube api 的一部分。那么上面的api是做`activity class(StandalonePlayerActivity)`什么的，它的作用是什么呢？

2）它在Android 2.1上不起作用，为什么会这样？

请有人解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:05:51.197

YouTube API 用于将 YouTube 播放添加到您的应用中。这意味着您将能够在您的应用界面中嵌入 YouTube 视频。是的，它确实需要安装官方 YouTube 客户端，因为这将为您提供播放代码和播放视频的能力。但是您不需要运行它，视频将在您的应用程序中。

我还没有检查过，但假设这`com.google.android.youtube.player.YouTubePlayerView`是在 YouTube 官方应用中实现的视图是合乎逻辑的，它将使用 YouTube API 注入到您的应用中，这将呈现视频。就那么简单。

关于您的最后一个问题 - [YouTube API 文档](https://developers.google.com/youtube/android/player/)确实提到它将在运行 Android 2.2 (Froyo) 的设备上可用

# yii - yii cadvancedarbehavior 不保存对象

> ID：14229709
> 
> 赞同：0
> 
> 时间：2013-01-09T06:45:50.303
> 
> 标签：yii

我正在尝试使用 CAdvancedARBehavior 将图像附加到帖子中，MANY_MANY 关系有效，但是当我尝试将其保存为对象时

`"Object of class Image could not be converted to int"`

```
$image->save();
$this->images = $image; 
```

如果我这样做，相同的代码部分有效

```
$image->save();
$this->images = $image->id; 
```

但是它只会保存一张图片，如果我尝试添加一张新图片，它会替换连接表中的旧图片，因此每个帖子一次只有一张图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:44:12.460

如果您需要更多需要成为数组的图像：

```
$image->save();
// add to image current list
$this->images[] = $image; 
```

# facebook - 在 facebook opengraph 中自定义 link.title

> ID：14229712
> 
> 赞同：0
> 
> 时间：2013-01-09T06:45:55.333
> 
> 标签：facebook, facebook-opengraph

好的，我已成功发布到我的 fb 墙上。我在 opengraph 仪表板中创建了一个链接对象作为操作类型。我现在要做的是将 link.title 设置为我选择的字符串。

现在，我认为正在发生的事情是 fb 正在拉取链接的标题。我想定制它。

此外，fb 检查链接是否有效，因此如果我提供指向我的本地主机开发服务器的链接，它不会显示。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:27:26.440

好的，这适用于和我有同样问题的人。问题是您必须在链接指向的页面中有元标记（可能是重定向）。

```
<meta property="og:title" content="Hello World!"/>
<meta property="og:image" content="http://www.somesite.com/image1.jpg"/> 
```

要记住的一件事是，Facebook 将独立跟踪您的应用发布的链接，因此请确保处理这些事情。就我而言，如果用户未登录，我发布的链接将无法使用，因此当 fb 来检查链接时，它将被重定向到登录页面，并且 fb 无法提取我的标题和图像。

我通过检查 query_string fb_action_ids 来处理这个问题。当fb自动检查链接时，不会设置上面的query_string，但是当用户点击链接时，会设置query_string。

祝你好运！

# symfony-2.1 - Symfony2 多语言网站数据分布

> ID：14229716
> 
> 赞同：0
> 
> 时间：2013-01-09T06:46:14.440
> 
> 标签：symfony-2.1

我在 Symfony2 中创建了一个网站，使用 website.com/_locale/xxxxxxxx 路由将静态数据翻译成两种语言。此实现成功，但我希望更进一步。我想为其他几个国家/地区运行这个网站，为了将这些国家（使用不同语言）管理到一个网站中，需要进行适当的转换。

假设我有一个商店实体。创建的每个对象都有一些变量，如地址、业务类型、设备等。这允许用户用自己的语言创建一个条目，但所有条目将在表中混合。该表将包含意大利语、英语、西班牙语数据，当有人从不同位置进入网站时，我们很遗憾必须查看其他语言的数据。

我希望用户能够以两种语言创建新商店：英语和他自己的语言。我想到的解决方案是：

*   我将在同一个表中创建一个新列，例如“original_language”，每个条目都将存储一个区域设置：en_US、es_SP 等。当网站想要检索一行时，将通过一个表搜索数千个条目。
*   我将用另一种语言创建另一个表，它将作为原始表的镜像。这意味着我将有一个 Shops 表/实体、一个 Shops_it、一个 Shops_es、一个 Shops_br 等。不幸的是，这个解决方案需要我创建几个表以及其他链接表之间的关系。
*   我将为每个字段在同一行中创建另一列。Shops.description、Shops.address 等还将包括 Shops.description_en、Shops.description_br、Shops.address_en、Shops.address_br 等。

什么是做我想做的最安全、最快和更专业的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:22:40.110

要么使用`[DoctrineExtensions][1]`lib 来翻译你的列（它使用类似 EAV 的结构进行翻译），要么`1-n`为翻译的实体编写关系，有一个“基础”实体和一个“翻译”实体。您可以使用[`indexBy`](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-onetomany)集合的属性使获取和逻辑更易于处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:48:16.973

正如 Ocramius 建议的那样，使用[Doctrine 可翻译扩展](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md)

# android - 如何在 Android ICS 及更高版本中自动启动应用程序？

> ID：14229718
> 
> 赞同：0
> 
> 时间：2013-01-09T06:46:16.107
> 
> 标签：android

我需要在 ICS 及以后安装（第一次）后自动启动应用程序。我知道在以前的版本中，启动完成的接收器工作正常，但在 ICS 及更高版本中，当应用程序首次安装但未启动时，在启动之前不会运行广播接收器或服务

# iphone - 带有 inputAccessoryView iphone xcode 的自定义键盘

> ID：14229719
> 
> 赞同：0
> 
> 时间：2013-01-09T06:46:21.317
> 
> 标签：iphone, xcode, virtual, uikeyboard

我见过很多关于 iphone 自定义键盘的问题。但是，我找不到一个好的教程和可以轻松定制的教程。
我发现这很容易定制，并且在用户按下键时还会弹出文本。. [https://github.com/kulpreetchilana/Custom-iOS-Keyboards](https://github.com/kulpreetchilana/Custom-iOS-Keyboards)

```
#define kChar_shift @[ @"ਔ", @"ਐ", @"ਆ", @"ਈ", @"ਊ", @"ਭ", @"ਙ", @"ਘ", @"ਧ", @"ਝ", @"ਢ",       @"ਓ", @"ਏ", @"ਅ", @"ਇ", @"ਉ", @"ਫ", @"ੜ", @"ਖ", @"ਥ", @"ਛ", @"ਠ", @"◌ੰ", @"◌ੱ", @"ਣ", @"ਫ਼", @"ਜ਼", @"ਲ਼", @"ਸ਼", @"ਞ" ] 
```

我想为其他语言实现键盘。该教程可以用于其他语言，但我无法对其进行编辑以显示原始英文键盘。（通过 inputAccessoryView 中的按钮切换）。如果可能，我想知道如何操作或在哪里进行编辑。

在.h

```
@property (strong) id<UITextInput> textView; 
```

在.m

```
-(void)setTextView:(id<UITextInput>)textView {

if ([textView isKindOfClass:[UITextView class]])
    [(UITextView *)textView setInputView:self];
else if ([textView isKindOfClass:[UITextField class]])
    [(UITextField *)textView setInputView:self];

_textView = textView;
}

-(id<UITextInput>)textView {
return _textView;
}

- (id)init
{
if (self) 
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"PMCustomKeyboard" 
    owner:self  options:nil];
    [[nib objectAtIndex:0] setFrame:frame];
    self = [nib objectAtIndex:0];  
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T08:29:44.550

您必须按照[此处](https://stackoverflow.com/a/22065731/1049134)`inputView`所述处理和`inputAccessoryView`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:30:54.743

不确定这篇关于创建自定义键盘以及在默认键盘和自定义键盘之间切换的文章是否可以帮助您 - [http://thekspace.com/home/component/content/article/63-ioscustomkb.html](http://thekspace.com/home/component/content/article/63-ioscustomkb.html)

它附带一个示例 Xcode 项目，您可以下载并试用。

# sql - 删除不满足所有要求的项目

> ID：14229721
> 
> 赞同：0
> 
> 时间：2013-01-09T06:46:30.497
> 
> 标签：sql, sql-except

我有表“OcjeneKorisnika”，其中包含`Korisnik_ID`,`Artikl_ID`和`Ocjena_ID`字段。在表中，我输入`Korisnik_ID 12`了哪些订单文章`Arikl_ID 9`及其`Artikl_ID 13`中的一些值`Ocjena_ID`。

下面的查询检索所有`Korisnik_ID`，除了`Artikle_ID``Ocjena_ID``Korisnik_ID 12`

```
SELECT Korisnik_ID,
       Artikl_ID,
       Ocjena_ID
FROM OcjeneKorisnika
WHERE (Artikl_ID IN
         (SELECT Artikl_ID
          FROM Kupac_Narudzba
          WHERE (Korisnik_ID = 12))) EXCEPT
  SELECT Korisnik_ID,
         Artikl_ID,
         Ocjena_ID
  FROM OcjeneKorisnika WHERE Korisnik_ID = 12
ORDER BY Korisnik_ID 
```

例如`korisnik_ID`11 具有9 和13 的值，但`Ocjena_ID`1、2 、... 仅具有9 的值，而不具有13 的值（在表中）`Artikl_ID``Artikl_ID``Korisnik_ID``Korisnik_ID``Artikl_ID``Artikl_ID`

如何显示所有`Korisnik_ID`具有（9 和 13）值的所有值并排除`Ocjena_ID`仅具有一个值（9 或 13）的值？`Artikle_ID``Korisnik_IDs``Artikl_ID`

示例源数据：

```
Korisnik_ID | Artikl_ID | Ocjena_ID 
1  | 9  | 3 
2  | 9  | 4 
2  | 13 | 5 
9  | 9  | 2 
10 | 9  | 3 
10 | 13 | 4 
10 | 15 | 2 
12 | 9  | 3 
12 | 13 | 2 
```

我需要有输出：

```
Korisnik_ID | Artikl_ID | Ocjena_ID 
2  | 9  | 4 
2  | 13 | 5 
10 | 9  | 3 
10 | 13 | 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T01:07:15.703

您的问题描述似乎与示例数据不太匹配（来自您的评论）

此查询将返回至少同时具有 9 和 13 的行`Artikl_ID`（但可能有更多类似`Korisnik_ID`10 也有`Artikl_ID`15 的行）。

```
with matches as (
    select Korisnik_ID from OcjeneKorisnika where Artikl_ID in (9,13) 
    group by Korisnik_ID having count(distinct Artikl_ID) = 2
)

select o.* from OcjeneKorisnika o
join matches m on o.Korisnik_ID = m.Korisnik_ID
where o.Artikl_ID in (9,13) 
```

给定您的样本数据，结果将是：

```
Korisnik_ID Artikl_ID   Ocjena_ID
----------- ----------- -----------
2           9           4
2           13          5
10          9           3
10          13          4
12          9           3
12          13          2 
```

如果这不是您要查找的内容，那么您应该编辑问题并尝试阐明您想要的内容。

# c++ - 无需 API 挂钩或过滤器驱动程序即可拦截文件\文件夹 I\O

> ID：14229726
> 
> 赞同：7
> 
> 时间：2013-01-09T06:47:06.937
> 
> 标签：c++, windows, visual-c++, hook, minifilter

当用户尝试在 c++ 中访问 win XP 和 win 7 中的文件或文件夹时（对于 32 位和 64 位），我需要编写一个程序来显示密码窗口。但困难的部分是我不能使用 IAT \ EAT 或内联钩子来完成这个任务，因为它需要使用微软支持的方法来完成这个项目。

在谷歌搜索时，在许多论坛中也提到这可以使用文件系统过滤器驱动程序来完成，但我想知道如何从迷你驱动程序显示密码对话框。

我认为 shell 扩展可以完成这项工作，但 msdn 文档显示 shell 扩展不能用于拦截 I/O 调用。

请指教，先谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:19:34.517

您确实需要内核驱动程序来实现这一点。只有当通过 shell 访问文件时（例如在 Windows 资源管理器中单击），shell 挂钩和扩展才会被激活，如果文件被其他程序直接访问，则不会触发。

在开发按访问的防病毒软件时，我遇到了类似的挑战。

但就像@selbie 所说，驱动程序代码本身无法处理任何交互式提示 - 它必须与用户模式代码通信才能实现这一点。这可以是独立的应用程序，也可以是您的 DLL 自动加载到每个进程中。就我而言，如果需要用户响应，我们让驱动程序和用户模式应用程序通过管道进行通信——驱动程序将消息通过管道传输到用户模式应用程序（如果它处于活动状态），然后等待响应。该应用程序向驾驶员发出了提示和管道响应。

文件 I/O 挂钩的主题也在[前面的线程中](https://stackoverflow.com/questions/1531800/how-does-a-windows-antivirus-hook-into-the-file-access-process)讨论过。

# php - 如何使用 JavaScript 将背景颜色更改为一种颜色，然后恢复为默认颜色？

> ID：14229727
> 
> 赞同：2
> 
> 时间：2013-01-09T06:47:20.213
> 
> 标签：php, javascript, mysql

我有`<table>`一个`mysql`使用`php`. 每个`<tr style="background-color:;">`记录都存储在数据库中。我做了一个小`Javascript`，当用户选择（`onfocus`）或取消选择（`onblur`）时`<input>`，`<tr>`会改变颜色。我已经设置好了，所以在选择时颜色会是红色，但我希望它在取消选择后恢复为默认颜色。

这是我的代码片段，位于`while()`循环中，其中`$i`递增：

```
<tr id="row$i">
<td><input type="text" onfocus="attON('row$i')" onblur="attOFF('row$i')"></td>
</tr> 
```

这是我的功能：

```
function attON(id)
    {
    var row = document.getElementById(id);
    row.style.backgroundColor = "#FF0000";
    }

function attOFF(id)
    {
    var row = document.getElementById(id);
    row.style.backgroundColor = "";
    } 
```

我相信你会猜到，`backgroundColor`不会变回它的默认值，而是会改变`<table>`颜色。我在想也许捕获默认颜色`function attON(id)`并将其设置为全局变量将是答案，但我不知道该怎么做。显然，欢迎任何其他想法。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:51:49.137

```
function attON(id)
{
    var row = document.getElementById(id);
    if(!row.getAttribute('data-originalColor')){
        var originalColor = row.style.backgroundColor;
        row.setAttribute('data-originalColor', originalColor);
    }
    row.style.backgroundColor = "#FF0000";
}

function attOFF(id)
{
    var row = document.getElementById(id);
    var originalColor = row.getAttribute('data-originalColor');
    row.style.backgroundColor = originalColor;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T06:53:46.280

由于每一行都有不同的背景突出显示颜色，因此您应该将它们与标记一起作为`data-`属性输出。此外，使用`this`而不是添加具有不同`i`值的函数：

```
<tr id="row$i">
    <td><input type="text" onfocus="attON(this);" onblur="attOFF(this);" data-color="$color"></td>
</tr> 
```

您的功能将是：

```
function attON(el) {
    el.parentElement.parentElement.style.backgroundColor = el.getAttribute('data-color');
}

function attOFF(el) {
    el.parentElement.parentElement.style.backgroundColor = "";
} 
```

这是一个演示：http: [//jsfiddle.net/yCNft/](http://jsfiddle.net/yCNft/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T06:59:03.317

尝试编辑这个：

```
 function attOFF(id)
    {
        var row = document.getElementById(id);
        row.style.backgroundColor = "";
    } 
```

对此：

```
 function attOFF(id,realcolor)
    {
        var row = document.getElementById(id);
        row.style.backgroundColor = realcolor;
    } 
```

然后`attOFF('row$i')`改为`attOFF('row$i','put here the PHP code to show the real color of the tr tag')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T06:51:33.537

我会将 CSS 规则与 JS 结合起来。

在 CSS 中：

```
tr.activeRow {
  background: red !important;
} 
```

这是 Javascript 部分：

```
function attON(rowID) {
  // to be sure that there is always just on active row...
  var activeRows = document.getElementsByClassName('activeRow');
  for(a in activeRows) {
    activeRows[a].className = '';
  }
  // set classname to override the inline style
  document.getElementById(rowID).className="activeRow";
}

function attOFF(rowID) {
  // jus remove the classname
  document.getElementById(rowID).className="";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T07:09:31.753

您介意在每个 tr 中添加一个隐藏字段来存储数据库中的颜色吗？
此外，我只向函数发送了事件的 id，并在 javascript 中附加了带有 id 的“行”。

```
<tr id="row$i">
    <td>
        <input type="text" onfocus="attON('$i')" onblur="attOFF('$i')">
        <input type="hidden" value="color from database" name="$iHC" id="$iHC">
    </td>
</tr> 
```

Javascript函数：

```
function attON(id){
    var row = document.getElementById("row"+id);
    row.style.backgroundColor = "#FF0000";
}

function attOFF(id){
    var row = document.getElementById("row"+id);

    //fetch the value from HTML element and assign it to a javascript variable
    //remember to append "#" to value of color if you have not stored in database
    var color = document.getElementById(id+"HC").value();
    row.style.backgroundColor = color;
} 
```

# python - 使用python从文件中删除行

> ID：14229730
> 
> 赞同：0
> 
> 时间：2013-01-09T06:47:30.037
> 
> 标签：python

> **可能重复：**
> [Python 3 正则表达式查找多行注释](https://stackoverflow.com/questions/7081882/python-3-regular-expression-to-find-multiline-comment)

我需要一些关于如何做到这一点的意见，非常感谢您的意见，我查看了其他帖子，但没有一个符合我的要求。

[如何从python中的文件中](https://stackoverflow.com/questions/7276454/how-to-remove-line-from-the-file-in-python) [删除行使用python从文本文件中删除行](https://stackoverflow.com/questions/2064184/remove-lines-from-textfile-with-python)

我需要根据提供的输入字符串匹配文件中的多行注释。

例子：-

假设文件“test.txt”有以下注释，如果 inputstring="This is a test, scriptwritten" 这个注释需要从文件中删除

```
import os
import sys

import re
import fnmatch

def find_and_remove(haystack, needle):
    pattern = re.compile(r'/\*.*?'+ needle + '.*?\*/', re.DOTALL)
    return re.sub(pattern, "", haystack)

for path,dirs,files in os.walk(sys.argv[1]):
    for fname in files:
        for pat in ['*.cpp','*.c','*.h','*.txt']:
            if fnmatch.fnmatch(fname,pat):
                fullname = os.path.join(path,fname)
                with open(fullname, "r") as f:
                    find_and_remove(f, r"This is a test, script written") 
```

错误：-

```
Traceback (most recent call last):
  File "comment.py", line 16, in <module>
    find_and_remove(f, r"This is a test, script written")
  File "comment.py", line 8, in find_and_remove
    return re.sub(pattern, "", haystack)
  File "/usr/lib/python2.6/re.py", line 151, in sub
    return _compile(pattern, 0).sub(repl, string, count)
TypeError: expected string or buffer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:59:42.383

当我看到这个问题时首先想到的是“状态机”，而每当我想到 python 中的“状态机”时，首先想到的是“生成器”，也就是产量：

```
def skip_comments(f):
    """
    Emit all the lines that are not part of a multi-line comment.
    """
    is_comment = False

    for line in f:
        if line.strip().startswith('/*'):
            is_comment = True

        if line.strip().endswith('*/'): 
            is_comment = False
        elif is_comment:
            pass
        else:
            yield line

def print_file(file_name):
    with file(file_name, 'r') as f:
        skipper = skip_comments(f)

        for line in skipper:
            print line, 
```

编辑：user1927396 通过指定它只是一个要排除的特定块来提高赌注，其中包含特定的文本。由于它在注释块内，我们不会预先知道是否需要拒绝该块。

我的第一个想法是缓冲区。确认。便便。我的第二个想法是 15 年来一直萦绕在我脑海中但直到现在从未使用过的令人难以忘怀的副歌：“状态机堆栈”......

```
def squelch_comment(f, first_line, exclude_if):
    """
    Comment is a multi-line comment that we may want to suppress
    """
    comment = [first_line]

    if not first_line.strip().endswith('*/'):
        for line in f:

            if exclude_if in line:
                comment = None

            if comment and len(comment):
                comment.append(line)

            if line.strip().endswith('*/'):
                break

    if comment:
        for comment_line in comment:
            yield '...' + comment_line

def skip_comments(f):
    """
    Emit all the lines that are not part of a multi-line comment.
    """
    for line in f:
        if line.strip().startswith('/*'):
            # hand off to the nested, comment-handling, state machine
            for comment_line in squelch_comment(f, line, 'This is a test'):
                yield comment_line
        else:
            yield line

def print_file(file_name):
    with file(file_name, 'r') as f:
        for line in skip_comments(f):
            print line, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:42:02.427

这应该在原则上有效

```
def skip(file, lines):
 cline = 0
 result = ""
 for fileLine in file.read():
  if cline not in lines:
   result += fileLine
  cline += 1
 return result 
```

行必须是数字列表，文件必须是打开的文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:51:44.297

这一个在请求中执行它：删除所有包含所需字符串的多行注释：

把它放在一个名为`program.txt`

```
/*
 * This is a test, script written
 * This is a comment line
 * Multi-line comment
 * Last comment
 *
 */

some code

/*
 * This is a comment line
 * And should 
 *     not be removed
 *
 */

more code 
```

然后搜索和替换。只要确保`needle`不引入一些正则表达式特殊字符。

```
import re

def find_and_remove(haystack, needle):
    pattern = re.compile(r'/\*.*?'+ needle + '.*?\*/', re.DOTALL)
    return re.sub(pattern, "", haystack)

# assuming your program is in a file called program.txt
program = open("program.txt", "r").read()

print find_and_remove(program, r"This is a test, script written") 
```

结果：

```
some code

/*
 * This is a comment line
 * And should 
 * not be removed
 *
 */

more code 
```

它调整了[相关问题中的正则表达式](https://stackoverflow.com/questions/7081882/python-3-regular-expression-to-find-multiline-comment)

编辑代码中的最后一部分：

```
for path,dirs,files in os.walk(sys.argv[1]):
    for fname in files:
        for pat in ['*.cpp','*.c','*.h','*.txt']:
            if fnmatch.fnmatch(fname,pat):
                fullname = os.path.join(path,fname)
                # put all the text into f and read and replace...
                f = open(fullname).read()
                result = find_and_remove(f, r"This is a test, script written")

                new_name = fullname + ".new"
                # After testing, then replace newname with fullname in the 
                # next line in order to replace the original file.
                handle = open(new_name, 'w')
                handle.write(result)
                handle.close() 
```

确保在`needle`您转义所有正则表达式特殊字符，例如`().`，如果您的文本包含括号，例如，`(any text)`它们应该出现在`needle`as`\(any text\)`

# asp-classic - 经典 ASP(VBScript) 下的 Redis

> ID：14229734
> 
> 赞同：2
> 
> 时间：2013-01-09T06:47:48.070
> 
> 标签：asp-classic, vbscript, redis

我正在Classic ASP（尤其是VBScript）下开发一个网站。为了提高网站性能，我正在考虑使用 Redis（键值数据库）。从[http://redis.io/clients](http://redis.io/clients)，没有带有 VBScript 的客户端。作为一项研究，我必须开发一个服务/COM 以满足我的要求。

有人有这样的经历吗？或者你可以分享一些代码/提示。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T08:23:08.533

我对 memcached/couchbase 进行了同样的研究。

您有几个选择：您可以寻找 javascript (node.js?) 实现。经典的 ASP 也可以用 javascript 而不是 VBscript 编写。可以将代码移植到经典 ASP。

我建议您使用 WSC 来封装代码。WSC 就像一个 COM 组件，除了用 vbscript 或 jscript 编写。您可以像使用 COM 对象一样使用它，但您可以动态更改代码，而无需每次都重新注册。这是更多信息：

[http://aspalliance.com/414_Windows_Scripting_Components_WSC_in_ASP](http://aspalliance.com/414_Windows_Scripting_Components_WSC_in_ASP) [http://precompiled.wordpress.com/2007/11/26/hmac-sha1-encryptie-onder-classic-asp/](http://precompiled.wordpress.com/2007/11/26/hmac-sha1-encryptie-onder-classic-asp/)
（请注意，WSC 的链接不再有效，但评论里有镜子）

您可以采取的第二条路径是找到一个 .NET 客户端并使用 COM 包装器对其进行包装。如果您有源代码和 Visual Studio，则应该可以将 .NET 组件公开为 COM。更多相关信息在这里：

[http://msdn.microsoft.com/en-us/library/ms404285.aspx](http://msdn.microsoft.com/en-us/library/ms404285.aspx)

祝你好运！
埃里克

**更新：我已经为 Classic ASP 编写了一个扩展的 Redis COM 组件。可以在[这里](https://gitlab.com/erik4/redis-com-client)找到。**

# java - 跨 Java 虚拟机实现的 Java toString 表示？

> ID：14229737
> 
> 赞同：7
> 
> 时间：2013-01-09T06:47:56.557
> 
> 标签：java, jvm

对于大多数核心库和 Java 类，是所有 Java 实现中的“toString”表示标准。或者这没有在 Java 规范中指定。

例如，如果我这样做，new HashMap()/toString 是 OpenJDK 的输出，预计与 IBM jrockit 相同。

它们应该兼容吗？如果您将代码从一个 JVM 移植到另一个 JVM 并期望字符串表示相同，这可能是一个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T07:22:08.030

方法的输出`toString()`（除了少数例外）是未指定的，因此理论上可能会因 Java 的一种实现而异。

然而，*大多数商业*Java 实现都有派生自 Sun / Oracle 类库的某些版本的类库，无论是 OpenJDK 代码库还是更早的代码库。鉴于 Sun / Oracle 对故意进行可能破坏客户代码的更改持谨慎态度，我*希望*各自的`toString()`方法在很大程度上是兼容的。

但也有一些值得注意的例外；例如基于 GNU Classpath 库、Apache Harvest 库和... Android 的 java 实现。请注意，这些实现没有通过 Java 合规性测试（因为 Oracle 拒绝以可接受的条款许可 TDK ！！）所以严格来说它们不能称为 Java(tm)。

*最重要的是，在升级 JVM 版本时，对未记录* `toString()`格式的依赖*可能会*导致移植问题或问题。但实际上，出现问题的可能性主要取决于您从什么移植到什么。如果您坚持使用使用 Oracle / Sun 派生类库的 JVM，那么出现问题的可能性很小。

* * *

那么你应该怎么做呢？

最极端的立场是避免使用`toString`方法（隐式或显式），除非指定了输出格式。但我认为这太过分了。（而且可能很难执行这项政策......）

更现实的立场是避免`toString`在精确的输出格式很重要的情况下使用方法。换句话说：

*   不要`toString()`在对象序列化方案中使用……除非指定了格式。

*   如果您`toString()`在单元测试中使用，请注意作为移植工作的一部分，您可能需要修复不可移植的单元测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:04:56.930

好问题，我会说这取决于实施。没有正式的规范存在。虽然像[http://www.amazon.com/The-Java-Class-Libraries-Volume/dp/0201310023](https://rads.stackoverflow.com/amzn/click/com/0201310023)这样的书籍清楚地确定了图书馆将做什么，但不一定说“应该做”。

因此，实现者可以自由选择和记录`toString()`显示的内容，但不保证显示在其他 JVM 实现中是相同的。

为了解决您的问题，确保`toString()`实现的唯一方法是`@Override` `public String toString()`在派生类中使用方法（是的，您必须派生您想要`toString()`的每个类）并明确指定其输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:03:33.917

只是不要*期望 [toString() 方法的] 字符串输出是相同的*。未指定方法的内容和格式（查看相关的 javaDoc）。

甚至不能保证来自同一供应商的不同版本的实现是相同的。因此，永远不要通过结果来比较实例，`toString()`或者将这些结果用作数据库中的键或一般的标识符。它们只是实例*的*文本表示。而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:06:44.860

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-1.html#jls-1.4)说：

> 1.4\. 与预定义类和接口的关系
> 
> 如上所述，本规范通常引用 Java SE 平台 API 的类。特别是，某些类与 Java 编程语言有着特殊的关系。示例包括 Object、Class、ClassLoader、String、Thread 等类，以及 java.lang.reflect 包中的类和接口等。本规范限制了此类类和接口的行为，但没有为它们提供完整的规范。读者可参考 Java SE 平台 API 文档。

所以......不，没有规范需要您描述的内容。

# python - 获取附件内容

> ID：14229741
> 
> 赞同：0
> 
> 时间：2013-01-09T06:48:20.310
> 
> 标签：python, regex

我想获得随附的内容。拆分只允许我按一个分隔符拆分。

输入：

```
\x02\xxx\xxx\xxx\xxx\x03\x02\xxx\xxx\xxx\xxx\x03\x02\xxx\xxx\xxx\xxx\x03 
```

想要的输出：

```
['\xxx\xxx\xxx\xxx\','\xxx\xxx\xxx\xxx\','\xxx\xxx\xxx\xxx\'] 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:27:51.110

我怀疑您需要详细说明输入的可能变化，但此代码适用于您提到的特定情况：

```
line = '\x02\xxx\xxx\xxx\x03\x02\xxx\xxx\xxx\x03\x02\xxx\xxx\xxx\x03'

if line.startswith('\x02'):
    line = line[4:]
if line.endswith('\x03'):
    line = line[:-4]
chunks = line.split('\x03\x02')

print chunks

>>> ('\xxx\xxx\xxx', '\xxx\xxx\xxx', '\xxx\xxx\xxx') 
```

如果每一行都以 '\x02' 开头并以 '\x03' 结尾，则这种更简单的方法将起作用：

```
line = line[4:-4]
chunks = line.split('\x03\x02') 
```

如果分隔符有很多变化，我喜欢 root 的建议来查看 re.split() 方法：[http](http://docs.python.org/2/library/re.html#re.split) ://docs.python.org/2/library/re.html#re.split 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:51:01.467

您可以`re.split()`从允许您拆分模式的[re 模块中使用。](http://docs.python.org/2/library/re.html)类似的东西`filter(None,re.split(r'\\x0\d',s))`应该可以工作。

# c# - 在 LINQ to SQL 中应用子字符串

> ID：14229744
> 
> 赞同：1
> 
> 时间：2013-01-09T06:48:34.887
> 
> 标签：c#, asp.net, linq-to-sql, split, substring

```
 List<DocumentDTO> lstDocs = objService
    .SelectDocumentInfo()
    .Where(l => int.Parse(l.FileName.Substring(0, l.FileName.IndexOf('\'))) = docID)
    .ToList(); 
```

我的 docID 是一个`int`值

```
279\Chrysanthemum.jpg 
```

279 是我的 docID，我只想获取那些在指定的 FileName 前面有 279 的记录，或者如果 docID 更改为其他内容，则只能通过 LINQ 获取这些记录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T06:51:58.530

这可能是一种可行的方法：

```
List<DocumentDTO> lstDocs = objService.SelectDocumentInfo()
    .Where(l => l.FileName.StartsWith(string.Concat(docID, @"\"))
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:51:18.967

**编辑**

你也可以这样做

```
List<DocumentDTO> lstDocs = objService
    .SelectDocumentInfo()
    .Where(l => Convert.ToInt32( (l.FileName.Split('\\'))[0] )  == docID)
    .ToList(); 
```

通过对字符串应用拆分函数

* * *

您的代码中的一项更改

```
 List<DocumentDTO> lstDocs = objService
.SelectDocumentInfo()
.Where(l => int.Parse(l.FileName.Substring(0, l.FileName.IndexOf('\'))) == docID)
.ToList(); 
```

你需要把“==”而不是“=”检查上面的正确代码

* * *

注意：如果你有像 279\Chrysanthemum.jpg 这样的字符串，只有当它像这样 279\Chrysanthemum1.jpg 时才有效，而不是这样失败

像这样从字符串中获取数字并尝试

```
 stringThatHaveCharacters = stringThatHaveCharacters.Trim();
    Match m = Regex.Match(stringThatHaveCharacters, "\\d+");
    int number = Convert.ToInt32(m.Value); 
```

所以试试这样

```
 List<DocumentDTO> lstDocs = objService
    .SelectDocumentInfo()
    .Where(l => Convert.ToInt32( (Regex.Match(l.FileName, "\\d+")).Value)  == docID)
    .ToList(); 
```

# iphone - iOS 中的 Paypal 用户身份验证

> ID：14229745
> 
> 赞同：0
> 
> 时间：2013-01-09T06:48:37.583
> 
> 标签：iphone, ios, paypal

我在我的 iOS 应用程序中集成了 paypal 移动结帐库，并且我能够在沙盒环境中进行交易，但我希望第一个卖家/商家使用 paypal 访问权限登录到我的应用程序，如下图所示。

![在此处输入图像描述](../Images/0d47471d139914e262f944cac81dc648.png)

我已经引用了许多相同的链接。但没有任何想法。请帮我 。提前致谢。

以下是一些链接：

[https://www.x.com/developers/paypal/documentation-tools/getting-to-know-paypal-access](https://www.x.com/developers/paypal/documentation-tools/getting-to-know-paypal-access)

[https://www.x.com/developers/paypal/documentation-tools/api](https://www.x.com/developers/paypal/documentation-tools/api)

[http://answers.oreilly.com/topic/2528-how-to-use-paypals-mobile-express-checkout-library-for-ios/](http://answers.oreilly.com/topic/2528-how-to-use-paypals-mobile-express-checkout-library-for-ios/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:10:45.830

paypal提供了“GetVerifiedStatus”api，用于检查用户是否拥有正确的paypal电子邮件地址。我已经使用以下链接解决了这个问题： [https ://www.x.com/developers/paypal/documentation-tools/ api/getverifiedstatus-api-操作](https://www.x.com/developers/paypal/documentation-tools/api/getverifiedstatus-api-operation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T07:26:16.493

Paypal Adaptive Accounts 提供的“获取验证状态”API。在 PHP 上，您应该必须集成 SDK“adaptiveaccounts-sdk-php-namespace-php”，然后使用 API 调用您可以验证 Paypal ID。

# android - 服务器选项卡在 eclipse v3.7.2 中不可见

> ID：14229747
> 
> 赞同：8
> 
> 时间：2013-01-09T06:48:44.613
> 
> 标签：android, web-services, tomcat7, eclipse-wtp

嗨，我开发了一个访问 mysql 数据库以进行登录验证的应用程序，但我的问题是包含 tomcat 7 服务器。

在路径 Windows>Show view>Other 我看不到服务器选项卡。

我也无法更新网络工具平台。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T07:11:25.730

Windows -> 自定义透视图 -> 命令组可见性 -> 检查服务器是否未选中。

确保已将 tomcat 添加到 Eclipse，如果没有，请添加它。以下步骤将对您有所帮助。

```
Window > Preferences > Server > Runtime Environments 
Add
Apache > Apache Tomcat 5.5 
```

你完成了。希望它会有所帮助。

还要确保您下载了“ **Eclipse For Java EE Developers** ”包，因为我不相信“ **Eclipse for Java Developers** ”包含服务器视图。

链接在这里：-

[http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr1](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-01T04:26:49.240

可能未安装 JAVAEE 透视图或透视图未转换为 JAVAEE。

尝试窗口>透视>打开透视>其他> JAVAEE

如果在其他选项卡中看不到 JAVAEE，则说明它没有安装。在最新版本的eclipse（2019-12）中，需要手动安装。请按照以下链接进行安装。

[https://stackoverflow.com/a/60405942/2606228](https://stackoverflow.com/a/60405942/2606228)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-05T12:24:39.333

我正在使用露娜。我有以下步骤。

1.  帮助 -> 安装新软件
2.  选择“Luna - [http://download.eclipse.org/releases/luna](http://download.eclipse.org/releases/luna) ”站点
3.  展开“Web、XML 和 Java EE 开发”
4.  选择 i) Eclipse Java EE 开发者工具 3.6.3.v201501281502 ii) Eclipse Java Web 开发者工具 3.6.3.v201502041526 iii) Eclipse Web 开发者工具 3.6.3.v201501312139
5.  重新启动 Eclipse。

# android - 无法在重新启动活动时在谷歌地图上加载叠加图像 - Android

> ID：14229762
> 
> 赞同：0
> 
> 时间：2013-01-09T06:50:00.140
> 
> 标签：android

我从我放置在地图上的活动中获取图像`ItemizedOverlay`。但问题是当我重新启动应用程序时，它不显示叠加图像。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:33:20.007

`onResume`您可以尝试再次创建列表叠加层并设置为地图。

这是一种解决方法，实际答案将取决于您迄今为止实施的方式。

# excel - 为什么人们无缘无故地在单个单元格引用中使用 sum 函数？我在这里错过了什么吗？

> ID：14229763
> 
> 赞同：2
> 
> 时间：2013-01-09T06:49:59.777
> 
> 标签：excel, excel-formula

我见过人们在不需要使用 SUM 时在 calcs 中使用它，我只是假设他们不知道自己在做什么，但我只是从 excel 下载了一个模板，他们也使用它。所以我想知道也许有一个很好的理由这样做，我完全错过了一些东西。例子：

```
=IF(SUM(A20)>0,SUM((A20*E20)-F20),"") 
```

为什么不只是：

```
=IF(A20>0, (A20*E20)-F20, "") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:38:36.237

我看到人们在这种情况下使用 sum 的两个原因：

1.  他们只是不知道更好
2.  作为错误预防：如果任何单元格包含字符串，将它们用于任何数学运算都会导致`#VALUE!`错误。包裹它`SUM`会将字符串转换为 0。

虽然后者有一些用处，但通常最好确保数据一致 - 或者在公式中更明确地处理它，例如`IF(ISTEXT(A1),0,A1)`.

我看不出有人将公式的结果包装在 SUM 中的任何理由......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-24T08:58:45.870

我已经与一些习惯性地这样做的用户进行了交谈，以找出原因。

典型的答案是他们没有意识到他们可以通过按等号直接在单元格中输入公式。

因此，他们没有按等号，而是学会（或显示）按顶部的**ƒx**按钮，找到第一个合适的函数 (SUM)，然后单击源单元格，然后在对话框中键入公式.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:42:57.713

我认为您证明这种使用的唯一方法是单元格是否可能包含文本，例如，如果您使用

`=A1+A2`

那么如果任一单元格包含文本，则会出错，而 using`=SUM(A1,A2)`不会出错.......但这不适用于您的示例，因为如果这些单元格中的任何一个单元格，第二个 SUM 函数仍然会出错包含文本。

这简直就是不好的用法，就像在 SUM 函数中使用 + 一样。不幸的是，微软的 excel 建议包含几个这样的错误。

# ruby - 如何从 ruby 文件在已打开的浏览器上执行命令

> ID：14229764
> 
> 赞同：0
> 
> 时间：2013-01-09T06:50:05.800
> 
> 标签：ruby, cucumber

我使用黄瓜框架来测试 Web 应用程序，当我开发我的脚本时，每次在我的代码中添加一些内容后，我都必须一次又一次地启动浏览器。我的问题是“是否可以从 ruby​​(.rb) 文件在已打开的浏览器上执行命令”??。这将节省我很多时间。我的框架基于 cucumber、capybara 和 selenium webdriver。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:16:11.210

[无法将现有浏览器与 Selenium Webdriver 一起使用。](http://code.google.com/p/selenium/issues/detail?id=18)

但是，与浏览器相比，有些驱动程序（Capybara-Webkit、Poltergeist、Webdriver 的 HtmlUnitDriver）更快且启动时间更短。也许，他们会对你有好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:39:39.317

不确定您到底想要什么...如果每次更改 UI 代码中的某些内容时都必须“F5”，您可以考虑使用保护宝石。

如果您编辑“视图”，guard + guard-livereload 和应用程序中包含的 rack-livereload 会自动更新浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T09:02:52.093

我一直在使用 Selenium Webdriver 的猴子补丁版本，它使 PhantomJS 浏览器在测试运行之间保持打开状态。请参阅此博客文章：http: [//blog.sharetribe.com/2014/04/07/faster-cucumber-startup-keep-phantomjs-browser-open-between-tests/](http://blog.sharetribe.com/2014/04/07/faster-cucumber-startup-keep-phantomjs-browser-open-between-tests/)

诀窍是存根`Selenium::WebDriver::PhantomJS::Service.create_process`方法并告诉 Selenium 驱动程序使用默认端口 8910，即使它是保留的。

您可以将这段代码添加到您的 config/test.rb 文件中：

```
class Selenium::WebDriver::PortProber
  def self.free?(port)
    true
  end
end

class Selenium::WebDriver::PhantomJS::Service
  def create_process(args)
    puts "Starting monkey-patched PhantomJS Selenium Webdriver"

    Struct.new("ChildProcessFake") do
      def start() end
      def exited?() true end
    end.new
  end
end 
```

现在您可以在终端选项卡中启动 PhantomJS：

```
phantomjs --webdriver=8910 
```

当你运行 PhantomJS 时，你可以开始你的 Cucumber 测试。

显然这仅适用于 PhantomJS，但类似的东西也适用于其他浏览器。

# php - 我应该将非敏感信息存储在数据库或 cookie 中以减少加载时间吗？

> ID：14229765
> 
> 赞同：0
> 
> 时间：2013-01-09T06:50:08.050
> 
> 标签：php, sql, performance, security, cookies

我主要用 PHP 编写一个页面，我想知道是否最好从数据库中获取一堆关于用户的非敏感信息并将其放入 cookie 中以便更快地加载未来页面，或者我应该有每个页面访问数据库几次？

页面加载速度不是特别慢，但是 sql 查询和 PHP 填充页面时会有轻微的明显延迟。它可能只是我的服务器，但我想在我担心之前确保我的代码是有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:24:32.803

您始终需要记住，为域设置的每个 cookie 都将由浏览器与对该域的**每个**请求一起提交。

因此，您应该避免在 cookie 中存储大量数据，因为这会对响应时间产生负面影响，尤其是对于上游带宽较低的客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:56:13.280

不确定查询是什么，但您可以通过在 cookie 中存储 UUID（一些用户特定的 ID 号）然后使用该字段从表中获取数据（理想情况下是索引字段）来执行 50/50 解决方案。

这本质上是 PHP 会话 ($_SESSION) 所做的，但只是为您提供了另一种选择，即数据存储或用户应该持有数据的时间长度，而不必弄乱所有会话配置选项或创建自定义会话处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:52:24.877

将数据放入 cookie 意味着用户可以更改它（这对您来说似乎不是问题），或者用户可以删除它，也许是偶然的，需要以某种方式再次填充数据。

为什么不把它放在会话中？它在服务器端进行管理，由任何体面的服务器正确缓存，如果您创建新会话，您可以从数据库重新加载数据。

# objective-c - 如何使用 CIFaceFeature 查找 IOS 的耳朵、脸颊和头部位置

> ID：14229766
> 
> 赞同：2
> 
> 时间：2013-01-09T06:50:11.310
> 
> 标签：objective-c, avfoundation, cifacefeature

在我的项目中，我需要对脸部的所有部位进行精细处理，例如眼睛、嘴巴、鼻子、耳朵、脸颊和头部。通过使用`CIFaceFeature`，我可以获得眼睛位置和嘴巴位置。

如何找到其余零件的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:50:40.703

CIFaceFeature 源自通常投入到[openCV](http://openCV.org)中的学术研究工作并受到其启发。因此，要超越 CIFaceFeature，您需要掌握 openCV 库。OpenCV.org 提供了一个可在大多数平台（包括 iOS）上运行的 C++ 框架。

特别是，您将希望了解[对象检测](http://docs.opencv.org/modules/objdetect/doc/objdetect.html)、[级联分类器](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier)和[haartraining](http://note.sonots.com/SciSoftware/haartraining.html#t1a1f262)。

从您的评论来看，您想要一个更简单的解决方案。我想你可以发明一种通用的“脸”类型，从每个人都理想化为一个例子。然后从各个角度计算关系？正如我所建议的那样，大大简化了培训的需求。但是，有没有一种柏拉图式的脸可以很好地发挥作用？你为什么不尝试一些简单的全脸照片和一些从眼睛和嘴巴推断出来的参数。祝你好运...

**更新** 您真的想使用openCV ...这是一个[很好的视频来解释为什么...](http://www.youtube.com/watch?feature=fvwp&NR=1&v=V7UdYzCMKvw)

# javascript - 在 select2 中使用 AJAX 进行标记

> ID：14229768
> 
> 赞同：77
> 
> 时间：2013-01-09T06:50:24.920
> 
> 标签：javascript, jquery, jquery-select2

我正在使用[select2进行标记](http://ivaynberg.github.com/select2/#tags)

我对 select2 有这些要求：

1.  我需要使用 select2 ajax 搜索一些标签
2.  我还需要在 select2 中使用“标签”，它允许不在列表中的值（Ajax 结果）。

这两种情况都独立工作。但是连接在一起的 aJax 值只会被填充。如果我们键入不在列表中的任何其他值，那么它会显示“未找到匹配项”

我的场景如果用户键入任何不在列表中的新值，允许他们组成自己的标签。

有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-02-12T21:15:27.890

Select2 具有“createSearchChoice”功能：

> 从用户的搜索词中创建一个新的可选选项。允许创建通过查询功能不可用的选项。当用户可以动态创建选择时很有用，例如“标记”用例。

您可以通过以下方式实现您想要的：

```
createSearchChoice:function(term, data) {
  if ($(data).filter(function() {
    return this.text.localeCompare(term)===0;
  }).length===0) {
    return {id:term, text:term};
  }
},
multiple: true 
```

这是一个更完整的答案，它将 JSON 结果返回给 ajax 搜索，并允许从术语创建标签，如果术语没有返回结果：

```
$(".select2").select2({
  tags: true,
  tokenSeparators: [",", " "],
  createSearchChoice: function(term, data) {
    if ($(data).filter(function() {
      return this.text.localeCompare(term) === 0;
    }).length === 0) {
      return {
        id: term,
        text: term
      };
    }
  },
  multiple: true,
  ajax: {
    url: '/path/to/results.json',
    dataType: "json",
    data: function(term, page) {
      return {
        q: term
      };
    },
    results: function(data, page) {
      return {
        results: data
      };
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-05-23T17:40:31.837

## 选择 v4

[http://jsfiddle.net/8qL47c1x/2/](http://jsfiddle.net/8qL47c1x/2/)

HTML：

```
<select multiple="multiple" class="form-control" id="tags" style="width: 400px;">
    <option value="tag1">tag1</option>
    <option value="tag2">tag2</option>
</select> 
```

JavaScript：

```
$('#tags').select2({
    tags: true,
    tokenSeparators: [','],
    ajax: {
        url: 'https://api.myjson.com/bins/444cr',
        dataType: 'json',
        processResults: function(data) {
          return {
            results: data
          }
        }
    },

    // Some nice improvements:

    // max tags is 3
    maximumSelectionLength: 3,

    // add "(new tag)" for new tags
    createTag: function (params) {
      var term = $.trim(params.term);

      if (term === '') {
        return null;
      }

      return {
        id: term,
        text: term + ' (new tag)'
      };
    },
}); 
```

## 选择 v3.5.2

有一些改进的示例：

[http://jsfiddle.net/X6V2s/66/](http://jsfiddle.net/X6V2s/66/)

html:

```
<input type="hidden" id="tags" value="tag1,tag2" style="width: 400px;"> 
```

js：

```
$('#tags').select2({
    tags: true,
    tokenSeparators: [','],
    createSearchChoice: function (term) {
        return {
            id: $.trim(term),
            text: $.trim(term) + ' (new tag)'
        };
    },
    ajax: {
        url: 'https://api.myjson.com/bins/444cr',
        dataType: 'json',
        data: function(term, page) {
            return {
                q: term
            };
        },
        results: function(data, page) {
            return {
                results: data
            };
        }
    },

    // Take default tags from the input value
    initSelection: function (element, callback) {
        var data = [];

        function splitVal(string, separator) {
            var val, i, l;
            if (string === null || string.length < 1) return [];
            val = string.split(separator);
            for (i = 0, l = val.length; i < l; i = i + 1) val[i] = $.trim(val[i]);
            return val;
        }

        $(splitVal(element.val(), ",")).each(function () {
            data.push({
                id: this,
                text: this
            });
        });

        callback(data);
    },

    // Some nice improvements:

    // max tags is 3
    maximumSelectionSize: 3,

    // override message for max tags
    formatSelectionTooBig: function (limit) {
        return "Max tags is only " + limit;
    }
}); 
```

JSON：

```
[
  {
    "id": "tag1",
    "text": "tag1"
  },
  {
    "id": "tag2",
    "text": "tag2"
  },
  {
    "id": "tag3",
    "text": "tag3"
  },
  {
    "id": "tag4",
    "text": "tag4"
  }
] 
```

**2015 年 1 月 22 日更新：**

修复 jsfiddle：http: [//jsfiddle.net/X6V2s/66/](http://jsfiddle.net/X6V2s/66/)

**2015 年 9 月 9 日更新：**

使用 Select2 v4.0.0+ 变得更容易。

## 选择 v4.0.0

[https://jsfiddle.net/59Lbxvyc/](https://jsfiddle.net/59Lbxvyc/)

HTML：

```
<select class="tags-select" multiple="multiple" style="width: 300px;">
  <option value="tag1" selected="selected">tag1</option>
  <option value="tag2" selected="selected">tag2</option>
</select> 
```

JS：

```
$(".tags-select").select2({
  // enable tagging
  tags: true,

  // loading remote data
  // see https://select2.github.io/options.html#ajax
  ajax: {
    url: "https://api.myjson.com/bins/444cr",
    processResults: function (data, page) {
      return {
        results: data
      };
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T07:31:05.163

```
createSearchChoice : function (term) { return {id: term, text: term}; } 
```

只需添加此选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T13:18:52.750

您可以通过让您的 ajax 函数也返回搜索词作为结果列表中的第一个结果来完成这项工作。然后用户可以选择该结果作为标签。

# unit-testing - 为什么 GWTTestCase 只接受 IsSerializable 接口来序列化 java 对象？

> ID：14229770
> 
> 赞同：0
> 
> 时间：2013-01-09T06:50:29.623
> 
> 标签：unit-testing, gwt, serialization, integration-testing, gwttestcase

我有几个实现`java.io.Serializable`接口的模型类（用于序列化目的），它们在 devmode 和 webmode 下工作得很好，但是当我想在运行测试后在 GWTTestCase 中使用它们时，我得到了这个错误：

```
Type 'com.saeed.test.model.MyModel' was not assignable to 
'com.google.gwt.user.client.rpc.IsSerializable'
and did not have a custom field serializer.
For security purposes, this type will not be deserialized. 
```

我提到 MyModel 类没有默认构造函数（但在 devmode 和 webmode 中完美运行）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:59:28.623

请在此处查看 GWT RPC 的用户测试套件[和](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/user/test/com/google/gwt/rpc/client%253Fstate%253Dclosed)[此处](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/user/test/com/google/gwt/user/client/rpc)的rpc 测试套件

您可能还必须遵循 GWT 如何设置其 RPC 测试。

# c# - 阿兹曼过时了？阿兹曼的新替代品是什么？

> ID：14229771
> 
> 赞同：14
> 
> 时间：2013-01-09T06:50:29.857
> 
> 标签：c#, security, authorization, enterprise-library, azman

是否有替代 Azman 的方法，这是一种应用安全性的新方法。以前我们使用 EntLib 3 并使用 Azman 来保证我们的安全和授权。然而，我读到的一篇关于 EntLib 6.0 愿景的文章是弃用 Security（下面的*链接*），但没有指定替代方案。有人可以建议现在处理安全和授权的最佳方法是什么？

[文章](http://blogs.msdn.com/b/agile/archive/2012/11/08/enterprise-library-6-0-vision-scope.aspx)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T14:07:05.367

**编辑：** Azman 在 Windows 2012 R2 上似乎已弃用，请参阅第一个链接

AzMan 本身并未被弃用，并且[可](http://msdn.microsoft.com/en-us/library/bb897401.aspx)用于现代版本的 Windows，包括 Windows Server 2012 和 Windows 8。被弃用的是 EntLib 的安全应用程序块，其中包含 AzMan 的包装器。这与我们的[弃用方法](http://blogs.msdn.com/b/agile/archive/2011/04/08/on-deprecation.aspx)一致。

根据您的升级目标，您有多种选择：

1.  升级到 EntLib5.0，它仍然包含带有 AzMan 包装器的安全应用程序块。
2.  直接使用 AzMan。
3.  升级到 EntLib 6，但从 EntLib5 获取 AzMan 包装器的源代码。
4.  使用基于声明的授权，尽管这是一个非常不同的模型。有关更多信息，我建议您查看此[基于声明的身份指南](http://msdn.microsoft.com/en-us/library/ff423674.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T19:13:20.737

在迁移到基于声明的方法方面，请查看：

[索赔：基于索赔的新世界中的阿兹曼](http://nzpcmad.blogspot.co.nz/2016/04/claims-azman-in-new-claims-based-world.html)。

注意 Azman 自 Windows Server 2012 R2 起已弃用，可能会在后续版本中删除。

# css - 如何使用 css 定位活动状态？

> ID：14229775
> 
> 赞同：-2
> 
> 时间：2013-01-09T06:50:42.010
> 
> 标签：css, wordpress

[我的网站在这里](http://misha.pixelworklab.com/)

我需要使活动选项卡的颜色与其他选项卡不同。似乎无法播放导航栏。我错过了什么？

例如，如果我在[http://misha.pixelworklab.com/gallery/](http://misha.pixelworklab.com/gallery/)我需要画廊标签是不同的颜色。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:56:16.707

活动列表项的类是`.current-menu-item`，您需要针对`<a>`此活动的内部`li`，

所以你的CSS将是，

```
.current-menu-item > a
{
    background: green; /*your code here*/
} 
```

# java - 如何为 Google AppEngine 配置 Restlet

> ID：14229776
> 
> 赞同：0
> 
> 时间：2013-01-09T06:50:43.663
> 
> 标签：java, google-app-engine, restlet

我正在尝试使用 Eclipse 作为 Java 编辑器在 Google AppEngine 上运行的 restlet 创建一个安静的 Web 服务。几个小时的谷歌搜索，阅读消息等，我在配置这个方面没有任何进展。文章必须在那里，但很难找到它们。

有没有人有一个简单的（具体做什么，要复制什么文件等）教程来设置它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:33:00.907

好吧，您可以通过本教程[Reslet With GAE](http://wiki.restlet.org/docs_2.2/13-restlet/21-restlet/318-restlet/303-restlet.html)。

这里还有一个例子[Another Example](http://wiki.restlet.org/docs_2.2/13-restlet/275-restlet/252-restlet.html)。

它非常简单，只需将必要的 jar 放在构建路径上，即在**WEB-INF/lib**下，然后启动您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:39:27.333

附带说明一下，Google 自己的 REST 实现称为 App Engine Endpoints：[http](http://endpoints-trusted-tester.appspot.com/) ://endpoints-trusted-tester.appspot.com/ 它仍处于测试阶段，但很容易获得访问权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-01T16:34:36.117

我现在的情况和你一样。我只能说，要在 AppEngine 上成功实现 Restlet，还有很多工作要做。你需要做的是

1.  **[为 Google App Engine](http://restlet.org/download/current#release=stable&edition=gae&distribution=zip)**下载最稳定的 Restlet 版本。
2.  将压缩文件提取到易于记忆的位置
3.  导航到 Restlet 库目录。例如，如果提取位置是`/opt/restlet`然后转到`/opt/restlet/restlet-gae-`*`[version]`*`/lib`
4.  您应该能够在那里找到 java 包**`org.restlet.jar`**和**`org.restlet.ext.servlet.jar`**.
5.  复制这两个包并将其粘贴到您的*`[gae-project]`*`/war/WEB-INF/lib`
6.  使用 Eclipse，刷新`lib`GAE 项目的目录
7.  **选择**新添加的jar包>**右键**>**构建路径**>**添加到构建路径**

然后，您需要做的就是遵循**[Restlet Edition for Google App Engine 教程](http://restlet.org/learn/guide/2.2/editions/gae)**。

它应该可以解决问题。

编辑：由于这个问题，我创建了一个[将 Restlet 集成到 App Engine 的教程](http://abelcallejo.wordpress.com/2014/01/04/restlet-hello-world-tutorial-for-google-app-engine/)。

# drupal - Drupal 7 以编程方式使用现有字段创建内容类型

> ID：14229780
> 
> 赞同：0
> 
> 时间：2013-01-09T06:51:00.560
> 
> 标签：drupal, content-type

我发现有问题地创建具有新字段和正文字段的内容类型似乎已记录并显示在多个位置。如何使用我在另一个模块中创建的现有字段类型以编程方式将字段类型包含到新内容类型中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:15:38.310

将创建新内容类型的代码我们应该添加到`.install`文件中。

让我们添加`hook_install()`：

```
<?php
function your_module_name_install() {
  // use get_t() to get the name of our localization function for translation
  // during install, when t() is not available.
  $t = get_t();

  // Define the node type.
  $node_example = array(
    'type' => 'node_example',
    'name' => $t('Example Node'),
    'base' => 'node_content',
    'description' => $t('This is an example node type with a few fields.'),
    'body_label' => $t('Example Description')
  );

  // Complete the node type definition by setting any defaults not explicitly
  // declared above.
  // http://api.drupal.org/api/function/node_type_set_defaults/7
  $content_type = node_type_set_defaults($node_example);
  node_add_body_field($content_type);

  // Save the content type
  node_type_save($content_type);
} 
```

# extjs - cfgrid 列掩码格式化数字

> ID：14229782
> 
> 赞同：1
> 
> 时间：2013-01-09T06:51:03.023
> 
> 标签：extjs, coldfusion, cfgrid

根据文档，我应该能够使用 mask 属性来格式化我的列：

```
<cfgridcolumn name="salary" type="numeric" mask="$999,999"> 
```

我有一个工资金额，我想显示为

```
$100,000
 $80,000
  $5,000 
```

任何想法为什么它不起作用？

用于测试的完整代码片段如下。

```
<cfscript>
        rs = QueryNew('salary', 'integer');
        QueryAddRow(rs,3);
        QuerySetCell(rs, 'salary', '100000', 1);
        QuerySetCell(rs, 'salary', '80000', 2);
        QuerySetCell(rs, 'salary', '5000', 3);
</cfscript>

<cfform>
    <cfgrid format="html" name="demo" query="rs">
        <cfgridcolumn name="salary" type="numeric" mask="$999,999">
    </cfgrid>
</cfform> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:12:53.843

[对于我在此处](https://stackoverflow.com/questions/8098332/decimal-numbers-in-a-html-cfgridcolumn)找到并应用于您的案例的这个答案，我需要向@Henry 提供支持。我以前没有使用过这个，但我测试过它并且它确实有效（使用 CF9）。请参阅我发现的[其他参考资料。](http://www.danvega.org/blog/2008/3/20/CFGrid-Event-Listeners)有趣的东西。反正...

对于您的问题，请尝试以下代码：

```
<html>
    <head><title>Test</title></head>
<body>
<cfsavecontent variable="formatGridInit">
<script language="javaScript">
formatgrid = function() {
    var myFormatter = Ext.util.Format.numberRenderer('$000,000');
    var mygrid = ColdFusion.Grid.getGridObject('demo');
    var cm = mygrid.getColumnModel();
    cm.setRenderer(0, myFormatter);
    mygrid.reconfigure(mygrid.getStore(),cm);
};
</script>
</cfsavecontent>
<cfhtmlhead text="#formatGridInit#">
<cfset ajaxOnLoad("formatgrid")>

<cfscript>
        rs = QueryNew('salary', 'integer');
        QueryAddRow(rs,3);
        QuerySetCell(rs, 'salary', '100000', 1);
        QuerySetCell(rs, 'salary', '80000', 2);
        QuerySetCell(rs, 'salary', '5000', 3);
</cfscript>

<cfform>
    <cfgrid format="html" name="demo" query="rs">
        <cfgridcolumn name="salary" type="numeric">
    </cfgrid>
</cfform>
</body>
</html> 
```

**注意**- 确保您的 HTML 有`<head></head>`才能`<cfhtmlhead>`正常工作。

**注意**- 此代码中的网格名称`var mygrid = ColdFusion.Grid.getGridObject('demo');`必须与您的网格名称匹配。

**注意**- 将此代码`cm.setRenderer(0, myFormatter);`中的数字设置为要应用格式的列（网格中的列从零开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:19:53.310

显然，支持您使用的掩码的“货币”类型仅在 format="flash|applet" 模式下可用。

最简单的方法是在查询中的数据到达 CFGRID 之前对其进行格式化。或者，您可以使用 ColdFusion 重新格式化这些单元格：

```
<cfscript>
        rs = QueryNew('salary', 'varchar');
        QueryAddRow(rs,3);
        QuerySetCell(rs, 'salary', '100000', 1);
        QuerySetCell(rs, 'salary', '80000', 2);
        QuerySetCell(rs, 'salary', '5000', 3);
</cfscript>

<!--- Loop Over Query and Reformat Salary --->
<cfloop query="rs" startrow="1">
    <cfscript>
        QuerySetCell(rs, 'salary', dollarFormat(salary), currentrow);
    </cfscript>
</cfloop>

<cfform>
    <cfgrid format="html" name="demo" query="rs">
        <cfgridcolumn name="salary">
    </cfgrid>
</cfform> 
```

# eclipse - java应用程序启动器不存在

> ID：14229789
> 
> 赞同：0
> 
> 时间：2013-01-09T06:51:18.687
> 
> 标签：eclipse, java

嗨，我最近在我的 Windows 上安装了 eclipse。我选择了为 C/C++ 定制的安装程序，但它也具有 java 透视图。安装完这个版本的eclipse后，我也安装了JDK。一切（windows 7、eclipse、JDK 和 JRE）都是 64 位的。

现在，当我尝试运行 java 项目时，在“运行配置”中找不到“Java 应用程序”

感谢您的评论和解决方案。

我包括我的日食的截图：

![在此处输入图像描述](../Images/5c6f09a2c7cdf161ccdd348b1e2294a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:40:50.127

我正在回答我的问题，这样没有人会浪费时间做我所做的事情。当 Eclipse 为 C/C++ 定制了一个包时，我不应该期望每个理论都能工作。所以，我只是安装了一个java定制包和......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:37:10.500

您还可以打开`main`要启动的类，右键单击文件中的任意位置并选择*Run as > Java Application*

# file - Importing CSV file with specific delimiters in Talend

> ID：14229790
> 
> 赞同：2
> 
> 时间：2013-01-09T06:51:19.473
> 
> 标签：file, talend, csv

I have a CSV file which has unusual delimiters which I want to parse with Talend. Normally, when we have a CSV with "carriage return" characters as rowdelimiter, I use "\n". When it is a TAB delimited file, I use "\t", etcetera. But now I have a file which has some unusual characters. Wikipedia taught me that it are so called "control characters". My question is how can I mention these characters in the tFileDelimitedInput-component in Talend (see screenshot 2). Instead of a newline character (\n) I must use the STX control character, but how do I tell Talend which character this is? What notation is "\n" in the first place?

An example of the file:

[https://dl.dropbox.com/u/1757832/talendSeparators1.jpg](https://dl.dropbox.com/u/1757832/talendSeparators1.jpg)

The tFileDelimitedInput-component in Talend where I must enter the row separator and field separator characters.

[https://dl.dropbox.com/u/1757832/talendSeparators2.jpg](https://dl.dropbox.com/u/1757832/talendSeparators2.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T14:16:06.893

Have you tried creating a `tFileDelimitedInput`metadata for that file ?

Doing that, you have more options (see attached picture).

![enter image description here](../Images/2a5eaf94632ec13a7ff0ed13bb0d5671.png)

**EDIT :**

Here's the list of the `UTF-8` corresponding control characters codes :

SOH : Start of heading : [http://www.fileformat.info/info/unicode/char/0001/index.htm](http://www.fileformat.info/info/unicode/char/0001/index.htm) STX : Start of text : [http://www.fileformat.info/info/unicode/char/0002/index.htm](http://www.fileformat.info/info/unicode/char/0002/index.htm)

Have you also tried using those utf-8 codes ?

**EDIT 2 With solution :**

Here's a file with the `STX` field separator

![File content](../Images/5d203bb0fcde8f628afb2602f1f952a8.png)

I've defined a simple `tFileInputDelimited` schema with two columns (key and value both being strings).

Then, I've set :

1.  row separator as `"\n"`
2.  field separator as `new String("\u0002")`

Then, I've got the right behavior :

```
.----+------.
| tLogRow_1 |
|=---+-----=|
|key |value |
|=---+-----=|
|key1|value1|
|key2|value2|
'----+------' 
```

# c - struct sched_domain 在 include/linux/sched.h 中代表什么（在内核中调度域）

> ID：14229793
> 
> 赞同：6
> 
> 时间：2013-01-09T06:51:42.897
> 
> 标签：c, kernel, intel, scheduler, processor

我试图了解负载均衡器如何在 Linux 内核中的多处理器系统上工作，

Linux 调度程序基本上使用 runques 来存储它接下来必须运行的任务，现在考虑多处理器系统的情况 load_balancer() 的实现方式如 Robert Loves 的书 Linux Kernel Development 2nd edition 中给出的解释如下

> 首先，load_balance() 调用 find_busiest_queue() 来确定最繁忙的运行队列。换句话说，这是其中进程数最多的运行队列。如果没有运行队列的进程比当前进程多 25% 或更多，则 find_busiest_queue() 返回 NULL 并且 load_balance() 返回。否则，返回最繁忙的运行队列。
> 
> 其次，load_balance() 决定要从最繁忙的运行队列中提取哪个优先级数组。过期数组是首选，因为这些任务在相对较长的时间内没有运行，因此很可能不在处理器的缓存中（也就是说，它们不是缓存热的）。如果过期的优先级数组为空，则活动的优先级是唯一的选择。
> 
> 接下来， load_balance() 找到具有任务的最高优先级（最小值）列表，因为公平分配高优先级任务比低优先级任务更重要。
> 
> 分析给定优先级的每个任务，以找到未运行、未通过处理器关联阻止迁移且未缓存热的任务。如果任务满足此条件，则调用 pull_task() 将任务从最繁忙的运行队列拉到当前运行队列。
> 
> 只要运行队列保持不平衡，就会重复前两个步骤，并将更多任务从最繁忙的运行队列拉到当前。最后，当不平衡解决时，当前运行队列被解锁并且 load_balance() 返回。

代码如下

```
static int load_balance(int this_cpu, runqueue_t *this_rq,
                        struct sched_domain *sd, enum idle_type idle)
{
        struct sched_group *group;
        runqueue_t *busiest;
        unsigned long imbalance;
        int nr_moved;

        spin_lock(&this_rq->lock);

        group = find_busiest_group(sd, this_cpu, &imbalance, idle);
        if (!group)
                goto out_balanced;

        busiest = find_busiest_queue(group);
        if (!busiest)
                goto out_balanced;

        nr_moved = 0;
        if (busiest->nr_running > 1) {
                double_lock_balance(this_rq, busiest);
                nr_moved = move_tasks(this_rq, this_cpu, busiest,
                                      imbalance, sd, idle);
                spin_unlock(&busiest->lock);
        }
        spin_unlock(&this_rq->lock);

        if (!nr_moved) {
                sd->nr_balance_failed++;

                if (unlikely(sd->nr_balance_failed > sd->cache_nice_tries+2)) {
                        int wake = 0;

                        spin_lock(&busiest->lock);
                        if (!busiest->active_balance) {
                                busiest->active_balance = 1;
                                busiest->push_cpu = this_cpu;
                                wake = 1;
                        }
                        spin_unlock(&busiest->lock);
                        if (wake)
                                wake_up_process(busiest->migration_thread);
                        sd->nr_balance_failed = sd->cache_nice_tries;
                }
        } else
                sd->nr_balance_failed = 0;

        sd->balance_interval = sd->min_interval;

        return nr_moved;

out_balanced:
        spin_unlock(&this_rq->lock);

        if (sd->balance_interval < sd->max_interval)
                sd->balance_interval *= 2;

        return 0; 
} 
```

我不清楚的是上面代码中的结构 struct sched_domain *sd 我检查的这个结构在 include/linux/sched.h 中定义如下 [http://lxr.linux.no/linux+v3.7.1/include/ linux/sched.h#L895](http://lxr.linux.no/linux+v3.7.1/include/linux/sched.h#L895) 这是一个很大的结构，所以为了简单起见，我只给出了一个链接。我想知道的是上面代码中 struct sched_domain 的用途是什么？

为什么在调用 load_balancer() 时使用这个结构代表什么？

这里可能给出了一些东西 [http://www.kernel.org/doc/Documentation/scheduler/sched-domains.txt](http://www.kernel.org/doc/Documentation/scheduler/sched-domains.txt) 为什么 CPU 需要调度域？这些域名代表什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T15:11:50.720

调度域和调度程序组/cpu 组有助于简化调度任务的过程，例如：

1.  跨 cpu 的负载平衡任务。
2.  为要运行的新任务选择一个 cpu。
3.  为睡眠任务选择一个 CPU，以便在它醒来时运行。

它有两个优点：

1.  它将系统中的 cpu 很好地组织成组和层次结构。

2.  它以一种有用的方式组织 cpu。所有
    共享 l2 缓存的 cpu 都属于一个域。所有共享 l3 缓存的 cpu 都
    属于更高级别的域，该域包含
    共享 l2 缓存的所有域。

您在树状数据结构中看到的优势与调度程序域和组的优势在这里相似。

参考下图

```
 _________sd1________
    /                    \
    ----------------------
         l3 cache
    ----------------------
    ---------   ----------
    l2 cache    l2 cache
    ---------   ----------
    cpu0 cpu1   cpu2 cpu3
    \_______/   \________/
      sd0          sd0

 ________sd1_________
/                    \
----------------------
      l3 cache
----------------------
---------   ----------
l2 cache    l2 cache
---------   ----------
cpu4 cpu5   cpu6 cpu7
\_______/   \________/
  sd0          sd0 
```

您在上面看到的是调度程序域层次结构。sd1 包含 sd0s，它们恰好是 sd1 的调度程序组。每个 cpu 都有一个与之关联的调度程序域层次结构。例如。
cpu0->sd=sd0；sd0->parent=sd1。这样通过链表我们可以遍历一个cpu所属的所有调度器域。

这有什么帮助？

1.负载均衡：假设cpu0空闲，准备将任务拉到自己身上以减轻任何其他负担的cpu。在上述方法中，它首先检查属于第一级sched域的其他cpu是否需要被解除load.这里，cpu1。如果是，它从cpu1接收任务，否则它转到更高级别的域sd1。如果它选择从cpu1迁移任务，那是最好的，因为可以利用缓存内容；共享缓存。无需再次从内存中获取。这是第一个优势：sched 域是基于硬件必须提供的优势形成的。

如果它转到 sd1，那么它会探测 sd1 的“组”，都是 sd0s。这是下一个优势。它只需要有关 sched 组的信息，不会打扰其中的单个 cpu。它检查负载（sd0 [ cpu2,cpu3]) > load(sd0[cpu0,cpu1]) 只有当这是真的时，它才会继续查看 cpu2/3 是否负载更多。如果没有调度程序域或组，我们将不得不查看状态cpu2 和 cpu3 在两次迭代中，而不是像我们现在做的 1 次迭代。

现在将此问题和解决方案扩展到 128 cpu！想象一下，如果没有什么可以告诉您哪个 cpu 最能减轻负载，那将是多么混乱，在最坏的情况下，您将不得不遍历所有 128 个 cpu。

但是对于调度程序域或组，假设您将 128 个 cpu 分成 16 个 cpu 的组，您将有 8 个组。看看哪个是最繁忙的，所以这将是 8 次迭代，然后您会知道最繁忙的组，然后下降。另外 16 次迭代。所以最坏的情况

8+16 = 24 次迭代。而这种减少仅与一级 sched 域有关。想象一下，如果你有更多的关卡，你会让迭代次数更少。

因此，简而言之，调度程序域和组是“分而治之；但要尽可能多地征服更有用的”解决方案来调度相关的东西。

我张贴以防将来有人想阅读它。

# php - 如何将 twitter bootstrap html css 与 codeigniter 集成

> ID：14229797
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:51:59.503
> 
> 标签：php, codeigniter, twitter-bootstrap

您好，在此先感谢！我已经使用 twitter bootstrap 完成了一个前端模板。现在我想将它用于我的一个学习项目“Mini Job Portal”。仅供参考，我是 CI 新手，我对 php 有基本的了解。现在你们能告诉我如何将我的编码 html、css、js 与 CI 项目集成，还请告诉我文件夹结构是什么以及如何链接它。如果您提供教程链接会很好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:59:08.883

我上次使用 CodeIgniter 时，这些类型文件的主要位置如下：

CSS 和 JS 将在主公共目录（CodeIgniter 的主 index.php 文件所在的位置）中有自己的文件夹。

由于 MVC 框架，HTML 略有不同。您基本上设置视图，然后从控制器渲染它们。通常最简单的方法是创建一个 head.php 视图文件，其中包含指向脚本、css、站点标题、主菜单等的所有链接，然后将其包含在所有页面视图中（因为这些元素不太可能经常更改）。

当然，我建议的设置将取决于您网站的设计。

# c# - AutoMapper：将子集合 1 映射到子集合 2 时丢失未映射的属性值

> ID：14229798
> 
> 赞同：2
> 
> 时间：2013-01-09T06:52:01.680
> 
> 标签：c#, nested, automapper

使用 AutoMapper：映射嵌套集合时，我希望任何未映射的属性都保留其原始值。相反，它们被设置为空。

**示例：**
我有这四个类
（注意`Test2Child`有`Name`属性，而`Test1Child`没有）：

```
public class Test1
{
    public List<Test1Child> Children { get; set; }
}
public class Test2
{
    public List<Test2Child> Children { get; set; }
}
public class Test1Child
{
    public int Value { get; set; }
}
public class Test2Child
{
    public string Name { get; set; }
    public int Value { get; set; }
} 
```

...和一个简单的映射设置。

```
Mapper.CreateMap<Test1, Test2>();
Mapper.CreateMap<Test1Child, Test2Child>().ForMember(m => m.Name, o => o.Ignore());
Mapper.AssertConfigurationIsValid();    // Ok 
```

我希望在映射期间保留 的原始值`Test2Child.Name`...。我希望这是任何未映射属性的默认行为。

`Test1Child`当我直接从to映射时`Test2Child`，它工作正常；`Value`被映射并被`Name`保留：

```
var a = new Test1Child {Value = 123};
var b = new Test2Child {Name = "fred", Value = 456};
Mapper.Map(a, b);
Assert.AreEqual(b.Value, 123);    // Ok
Assert.AreEqual(b.Name, "fred");  // Ok 
```

当映射用于嵌套集合（`List<Test1Child>`to `List<Test2Child>`）时，
`Value`映射正确......**但原始值`Name`丢失了！**

```
var c = new Test1 { Children = new List<Test1Child> { new Test1Child { Value = 123 } } };
var d = new Test2 { Children = new List<Test2Child> { new Test2Child { Name = "fred", Value = 456 } } };
Mapper.Map(c, d);
Assert.AreEqual(d.Children[0].Value, 123);    // Ok
Assert.AreEqual(d.Children[0].Name, "fred");  // FAILS! Name is null. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:42:04.003

正如@MightyMuke's answer的评论中提到的那样，@PatrickSteele 在[这里](https://stackoverflow.com/questions/9724901/)提出了一个很好的观点：自动将每个项目从源列表映射到目标列表可能**没有意义......即“**[但是如果一个列表有 3另一个列表有 5 个？](https://stackoverflow.com/questions/9724901/) ”

就我而言，我知道源列表和目标列表将始终具有相同的长度，并且（重要的是）源列表中的第 N 项始终与目标列表中的第 N 项直接对应。

所以，这行得通，但我对自己感觉不好......

```
Mapper.CreateMap<Test1, Test2>()
    .ForMember(m => m.Children, o => o.Ignore())
    .AfterMap((src, dest) =>
        {
            for (var i = 0; i < dest.Children.Count; i++)
                Mapper.Map(src.Children[i], dest.Children[i]);
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:57:42.967

尝试`UseDestinationValue`按照这个类似问题的答案中的描述使用： [Automapper overwrites missing source property on list with child objects](https://stackoverflow.com/questions/14216525/automapper-overwrites-missing-source-property-on-list-with-child-objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:09:30.237

我遇到了同样的问题。基本上，自动映射器不知道列表对象中的键是什么，以便将它们与原始对象匹配，因此它会新建一个对象。如果您希望属性保留，您需要帮助它了解如何匹配回您的原始项目，以便您可以映射更改。为了做到这一点，你需要有一个你现在没有的钥匙。

尝试以下操作：

```
public class Test1
{
    public List<Test1Child> Children { get; set; }
}
public class Test2
{
    public List<Test2Child> Children { get; set; }
}
public class Test1Child
{
    public int ChildId { get; set; }
    public int Value { get; set; }
}
public class Test2Child
{
    public int ChildId { get; set; }
    public string Name { get; set; }
    public int Value { get; set; }

    public Test2Child() 
    { }

    public Test2Child(int childId)
    {
        // of course you will need to load this from your data source, but for testing.  :)
        if (childId == 1)
        {
            ChildId = 1;
            Name = "fred";
            Value = 456;
        }
    }
}

Mapper.CreateMap<Test1, Test2>();
Mapper.CreateMap<Test1Child, Test2Child>()
    .ConstructUsing(t => t.ChildId > 0 ? new Child(t.ChildId) : new Child())
    .ForMember(m => m.Name, o => o.Ignore());

Mapper.AssertConfigurationIsValid();

var c = new Test1 { Children = new List<Test1Child> { new Test1Child { ChildId = 1, Value = 123 } } };
var d = new Test2 { Children = new List<Test2Child> { new Test2Child { ChildId = 1, Name = "fred", Value = 456 } } };
Mapper.Map(c, d);
Assert.AreEqual(d.Children[0].Value, 123);
Assert.AreEqual(d.Children[0].Name, "fred"); 
```

# c# - Windows Phone 7 或 Windows Phone 8 中的 MouseMove 事件替代方案？

> ID：14229802
> 
> 赞同：0
> 
> 时间：2013-01-09T06:52:29.533
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

我需要在网格周围移动我的矩形。在 WPF 或 Silverlight 中，我们可以使用 MouseMove 事件来捕获点以使我的矩形移动。但是在 Windows Phone 7 中哪个事件会非常适合做这种场景。任何人都可以请你帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:43:04.233

在 Windows Phone 7 中，您可以处理操作事件，如[如何：处理操作事件](http://msdn.microsoft.com/en-us/library/ff426933%28v=vs.95%29.aspx)中所述。

在 Windows 8 中（但不是在 Windows Phone 8 中），您也许可以使用[GestureRecognizer](http://msdn.microsoft.com/en-us/library/windows/apps/br241937.aspx)，如以下问题所述：[Detect Simple Touch Gestures](https://stackoverflow.com/q/12269725/1136211)。

# android - 从 webview 更改软键盘类型

> ID：14229804
> 
> 赞同：2
> 
> 时间：2013-01-09T06:52:32.603
> 
> 标签：android

是否有任何方法可以在 web 视图中以编程方式更改键盘类型（如屏幕截图所示）？

![从这个类型](../Images/0fe82eec1a54f104b11e7e9707c01d7c.png) ![对这种类型](../Images/9464c1cba1416bb06625b3b1c6d7f832.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:55:03.430

您需要更改网页中的输入类型。如果网页中的输入类型为数字，那么android中的键盘会自动改变。

# php - 相同字符串的不同长度

> ID：14229806
> 
> 赞同：0
> 
> 时间：2013-01-09T06:52:49.153
> 
> 标签：php, mysql, string, excel, compare

我得到同一个字符串的两个不同的计数值

```
 $val1 = $data->sheets[0]['cells'][5][1];//thise value is from excel sheet 
 $val2 = $obj->number; // this is the value from database

 var_dump(trim($val1)) , var_dump(trim($val2))

string(19) "US5922335A" ,  string(10) "US5922335A" 
```

第一个值是从 excel 表（xls）中获取的，第二个值是在执行 Select 查询后从 Mysql 表中获取的，我无法进行比较，因为两者的长度不同。

```
if($val1==$va2)
{
    echo "Found it ";   
} 
```

我怎样才能使它具有相同的长度，以便我可以比较它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T06:58:41.620

不是直接回答您的问题，但让我们首先找出背后的真正原因`string(19) "US5922335A"`。请试试

```
foreach(array($val1,$val2) as $v ) {
    for($i=0; $i<strlen($v); $i++) {
        printf('%02x ', ord($v[$i]));
    }
    echo "<br />\n";
}

if($val1==$val2) {
    echo "Found it ";   
} 
```

并添加应该类似于的输出

```
55 53 35 39 32 32 33 33 35 41 <br />
55 53 35 39 32 32 33 33 35 41 <br /> 
```

你的问题。

* * *

编辑：您的数据似乎是小端 UCS-2/UTF-16 编码的。

> 我越来越像
> 
> ```
> 字符串（22）“EP2153814A1”字符串（10）“US5922335A”
> 45 00 50 00 32 00 31 00 35 00 33 00 38 00 31 00 34 00 41 00 31 00
> 55 53 35 39 32 32 33 33 35 41
> ```

由于该字符串值的数据源是 Excel 工作表，因此最简单的解决方案可能是使用[mb_convert_encoding()](http://docs.php.net/mb_convert_encoding)更改编码。

```
$val1 = $data->sheets[0]['cells'][5][1];
$val1 = mb_convert_encoding($val1, 'ISO-8859-1', 'UTF-16LE'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T06:59:26.923

我敢打赌 Mysql 表将该列定义为 a`char`而不是 a `varchar`。如果是这样，则意味着第一个值有尾随空格。

在进行相等检查之前，您需要删除尾随空格。

```
if(trim($val1)==$va2)
{
    echo "Found it ";   
} 
```

# android - Google Play Store 上基于服务的 Android 应用程序

> ID：14229809
> 
> 赞同：1
> 
> 时间：2013-01-09T06:53:06.237
> 
> 标签：android, service, broadcastreceiver, google-play

我正在开发一个应用程序，它只包含一些服务并且没有活动（即没有 UI）
基本上我希望从用户在他/她的设备上安装应用程序时开始在后台运行 2 到 3 个服务。

我对此有几个问题：

1.  应用程序安装后我的服务将如何启动？我`BroadcastReceiver`应该听哪个事件？
2.  如何打包我的应用程序以将其应用程序部署到 Googly Play 商店？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:55:07.807

你不能在较新的 Android 上做到这一点。Android 在启动服务之前特别需要用户交互 - 用户需要物理启动您的应用程序。如果您的应用程序没有显示任何内容，用户将会非常困惑。

因此，创建一个 Activity 向用户解释刚刚发生的事情，并在那里注册您的接收器。

# c# - 如何检查excel文件是2007还是2010 office

> ID：14229810
> 
> 赞同：2
> 
> 时间：2013-01-09T06:53:15.040
> 
> 标签：c#, asp.net, .net, excel

我正在使用以下代码来区分 2003 年和 2007 年 office 的 excel 文件。

```
if (Extension == ".xls" || Extension == ".xlsx")
 {
 } 
```

但现在我还需要识别 2010 excel 文件。请提出一些解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T07:35:53.223

您可能知道 .xlsx 文件（与所有 Office Open XML 文件一样）实际上是 .zip 文件，其中包含一组描述内容的内部文件。因此，您可以在此处找到保存文件的程序的版本号：

将 .xlsx 扩展名重命名为 .zip（当您以编程方式执行此操作时，您可以跳过该步骤，但这对演示很有帮助）。打开文件中包含的压缩结构。

您会`docProps`在其中找到一个目录，其中包含一个名为`app.xml`(open it) 的文件。你会发现看起来像这样的东西：

```
<Properties>
  <Application>Microsoft Excel</Application>
  <DocSecurity>0</DocSecurity>
  <ScaleCrop>false</ScaleCrop>
  <HeadingPairs>
    <vt:vector size="2" baseType="variant">
      <vt:variant>
        <vt:lpstr>Worksheets</vt:lpstr>
      </vt:variant>
      <vt:variant>
        <vt:i4>3</vt:i4>
      </vt:variant>
    </vt:vector>
  </HeadingPairs>
  <TitlesOfParts>
    <vt:vector size="3" baseType="lpstr">
      <vt:lpstr>Sheet1</vt:lpstr>
      <vt:lpstr>Sheet2</vt:lpstr>
      <vt:lpstr>Sheet3</vt:lpstr>
    </vt:vector>
  </TitlesOfParts>
  <LinksUpToDate>false</LinksUpToDate>
  <SharedDoc>false</SharedDoc>
  <HyperlinksChanged>false</HyperlinksChanged>
  <AppVersion>14.0300</AppVersion>
</Properties> 
```

看到`<Application>`标签了吗？这告诉您它已保存在 Excel 中（而不是 Open Office）。看到`<AppVersion>`标签了吗？那个有你要找的版本号。Excel 2007 是版本 12，而 Excel 2010 是 14（因为使用版本号 13 会破坏整个操作）。Excel 2013 预计为版本 15。

# jquery - 如何在 MediaElementJS 中暂停音频时防止缓冲？

> ID：14229811
> 
> 赞同：1
> 
> 时间：2013-01-09T06:53:18.417
> 
> 标签：jquery, mediaelement.js

我使用 MediaElementJS 作为音频播放器。当我暂停播放器时，音频仍会继续缓冲。当播放器使用 flash 播放音频（FF & IE7 & 8）并且我正在播放 .mp3 文件时，会发生这种情况。

我用谷歌搜索它，很少有人建议使用暂停播放器并将空字符串加载到 setSrc 函数，但它不起作用并且仍在缓冲音频。

这是我用来停止缓冲的代码：

```
<script type="text/javascript">
    var player = new MediaElementPlayer('#player-1');

    player.pause();
    player.setSrc('');
    player.load();
</script> 
```

这是正确的方法吗？我犯了什么错误？暂停播放器时如何防止缓冲？

你能帮我解决这个问题吗？

谢谢，

# android - 如何使用 ADB shell 查找进程正在使用的端口？

> ID：14229816
> 
> 赞同：10
> 
> 时间：2013-01-09T06:53:49.913
> 
> 标签：android, linux, port, adb, netstat

例如，在 Android 中，进程 1234 的 PID 正在使用端口 2222、2223、2224。现在我有一个 PID 1234。我想知道如何找出进程正在使用的端口号 2222、2223、2224？

我曾尝试像在 Linux 中那样使用 netstat -anp，但这不起作用。ADB shell 中的 netstat -anp 与 netstat 具有相同的效果，没有任何命令参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T10:21:56.527

您可以使用`busybox netstat -pt`或`cat /proc/1234/net/tcp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T08:56:26.747

尝试检查我的 github 存储库，[https://github.com/LipiLee/netstat](https://github.com/LipiLee/netstat)。

我在 Android 源代码中更新了工具箱的 netstat（~~[https://android.googlesource.com/platform/system/core/+/master/toolbox/netstat.c](https://android.googlesource.com/platform/system/core/+/master/toolbox/netstat.c)~~）。

更新：工具箱的 netstat 在 Android M 版本中被 toybox 的 netstat 取代。所以工具箱中的 netstat 在 Android 源代码树中被删除了。

# mysql - Mysql相交查询

> ID：14229817
> 
> 赞同：0
> 
> 时间：2013-01-09T06:54:02.953
> 
> 标签：mysql, select, group-by, distinct

我有 3 个 mysql 表科目、考试和考试科目。subject 包含科目 ID，exam 包含考试 ID，exam_subjects 包含科目 ID 和考试 ID。我想编写一个 mysql 查询来从exams_subjects 表中获取所有考试ID 共有的主题ID 的输出。即不同考试ID的科目ID的交集。我该如何编写这样的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:45:46.990

```
SELECT subjectid 
FROM exam_subjects 
WHERE examid IN (SELECT examid FROM exams) 
GROUP BY subjectid 
HAVING COUNT(*) = (SELECT COUNT(examid) FROM exams); 
```

我在堆栈溢出中的一个类似问题的帮助下得到了这个[如何在合成表上进行交集](https://stackoverflow.com/questions/9775593/how-to-do-intersection-on-a-composition-table?rq=1)

# https - var xmlHttp = getXMLHttp() 可以在 HTTPS 上工作吗？

> ID：14229819
> 
> 赞同：0
> 
> 时间：2013-01-09T06:54:13.030
> 
> 标签：https, var, xmlhttprequest

如果我整合这个变量来获取数据，这个变量是否可以`var xmlHttp = getXMLHttp()`使用？`HTTPS``ajax`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:17:13.613

`XMLHttpRequest`确实适用于`http`和`https`。（见：[http](http://www.w3.org/TR/XMLHttpRequest/) ://www.w3.org/TR/XMLHttpRequest/ ）

相同的[来源政策](http://en.wikipedia.org/wiki/Same_origin_policy)仍然适用，并且`http://example.com`&`https://example.com`被视为不同的来源。

# php - php分页不显示下一条记录

> ID：14229822
> 
> 赞同：0
> 
> 时间：2013-01-09T06:54:39.567
> 
> 标签：php, mysql

抱歉，我之前在 wordpress 上错误地提出了这个问题。我正在处理分页，但我面临一个问题，当我单击下一步时，它会增加下一页的查询字符串中的数字，但页面上的数据保持不变，我需要显示接下来的四条记录，因为我已经显示了每条记录页。代码看起来不错，但我不知道为什么它不起作用。下面是代码

```
$page = 0;

if($page == 0){

    $page = "1";

}else{

    // If page is set, let's get it
  echo   $page = $_GET['page'];

}

// Now lets get all messages from your database
$sql = "select * from about_us where sbmenu_id=9991";
$query = mysql_query($sql);

// Lets count all messages
$num = mysql_num_rows($query);

// Lets set how many messages we want to display
$per_page = "4";

// Now we must calculate the last page
$last_page = ceil($num/$per_page);

// And set the first page
$first_page = "1";

// Here we are making the "First page" link
echo "<a href='?page=".$first_page."'>First page</a> ";
echo $page ;
// If page is 1 then remove link from "Previous" word
if($page == $first_page){

    echo "Previous ";

  }else{

    if(!isset($page)){

            echo "Previous";

    }else{

            // But if page is set and it's not 1.. Lets add link to previous word to take us back by one page
            $previous = $page-1;
            echo "<a href='?page=".$previous."'>Previous</a> ";

    }

 }

 // If the page is last page.. lets remove "Next" link
 if($page == $last_page){

    echo "Next ";   

  }else{

    // If page is not set or it is set and it's not the last page.. lets add link to this word so we can go to the next page
    if(!isset($page)){

            $next = $first_page+1;
            echo "<a href='?page=".$next."'>Next</a> ";

    }else{

            $next = $page+1;
            echo "<a href='?page=".$next."'>Next</a> ";

    }

 }

 // And now lets add the "Last page" link
 echo "<a href='?page=".$last_page."'>Last page</a>";

 // Math.. It gets us the start number of message that will be displayed
 $start = ($page-1)*$per_page;

 // Now lets set the limit for our query
 $limit = "LIMIT $start, $per_page";

// It's time for getting our messages
$sql = "select * from about_us where sbmenu_id=9991 $limit";
$query = mysql_query($sql);
 ?><table><?php
echo "<br /><br /><tr style='height:70px;'>";

// And lets display our messages
while($row = mysql_fetch_array($query) or die(mysql_error()))
 {....} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:25:54.630

更改前几行，然后尝试..

```
if(isset($_GET['page']) && $_GET['page'] > 0)        // If page is set, let's get it
{
    echo   $page = $_GET['page'];  
}
else
{
    $page = 1;
} 
```

代替 ： -

```
$page = 0;

if($page == 0){

$page = "1";

}else{

// If page is set, let's get it
 echo   $page = $_GET['page'];

} 
```

# javascript - 使用 Javascript 提交表单

> ID：14229827
> 
> 赞同：2
> 
> 时间：2013-01-09T06:54:44.110
> 
> 标签：javascript, jquery, forms

我的一些表单是用 Javascript/JQuery 提交的，所以不会发生页面刷新。

但是我注意到我的两台计算机之间的浏览器有一种奇怪的行为。在一台计算机（以及我测试过的所有浏览器）上，我的表单提交按预期执行。我的另一台电脑 (Mac) 时好时坏。我将提交表单，它会执行典型的 POST 刷新。所以浏览器刷新了，我在 Url 地址栏中看到了我的按钮文本。

- 再次，我的电脑的浏览器不这样做。

除非我快疯了，否则我只能推断我 Mac 上的浏览​​器没有正确执行 javascript。但我更准备好在我的编码方面出现错误。

我是否正确确保表单没有与我的 Javascript 一起提交？

```
<form id="norefreshForm">
   <!--more form fields here -->
   <input type="submit" name="button" value="Submit Me" />
</form>

<script language="javascript" type="text/javascript">
$(document).ready(function(){

    $.ajaxSetup({
       global:false,
       cache:false,
       type:"POST",
       url:"<?=$_SERVER['REQUEST_URI'];?>",
       timeout:120000   
    });

    $("form#norefreshForm").submit(function(){

        $.ajax({ success:function(response){ alert("Submitted"); } });
        return false;
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:56:03.923

尝试这个：

```
$("form#norefreshForm").submit(function(e){
        $.ajax({ success:function(response){ alert("Submitted"); } });
        e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:15:27.060

在您的表单中尽量不要使用提交按钮。相反，您可以使用一个简单的按钮并在单击此按钮时绑定 ajax 调用。

这样做的原因似乎是您同时发出两个请求，一个是通过提交按钮，另一个是您自己的 ajax 函数。

第一次提交也失败了，因为您没有为表单指定 action 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:10:42.297

当您仅使用 jQuery 时，返回 false 就足够了。（不是 100% 确定 mac）

但是，如果您还编写了纯 javascript，那么在这种情况下您可能还必须使用`preventDefault`or `stopPropagation`。

在 IE 的情况下，它更加不同。有时您将不得不使用`window.event.returnValue = false;`

因此，所有这些的组合将正常工作。

因此，将您的`return false`陈述替换为

```
if (eventObject.preventDefault) {
    eventObject.preventDefault();
} else if (window.event) /* for ie */ {
    window.event.returnValue = false;
}
return false; 
```

这适用于 PC 和 MAC

快乐编码！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:00:56.470

实际上有些浏览器你应该做`e.preventDefault()`而不是，`return false;`我真的不知道为什么。但它发生在我身上很多。所以，你可以这样做：

```
 $("form#norefreshForm").submit(function(){
        e.preventDefault();//should be at the very top 
        $.ajax({ success:function(response){ alert("Submitted"); } });

    });

}); 
```

# javascript - 如何通过我的附加代码通过 Java 脚本输入邮政编码自动完成城市状态？

> ID：14229833
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:55:14.450
> 
> 标签：javascript, asp.net, google-maps-api-3, autocomplete, textbox

我通过使用谷歌地图 api 输入邮政编码来获取城市状态，我的代码如下，

谷歌地图api链接，

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

通过邮政编码获取城市状态的脚本，

```
<script type="text/javascript">
   var zip ="34200";
    var lat;
    var lng;
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({ 'address': zip }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            geocoder.geocode({'latLng': results[0].geometry.location}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                if (results[1]) {
                    var loc = getCityState(results);
                    document.getElementById("TextBox1").value=loc;
                }
            }
        });
        }
    }); 

function getCityState(results)
    {
        var a = results[0].address_components;
        var city, state;
        for(i = 0; i <  a.length; ++i)
        {
           var t = a[i].types;
           if(compIsType(t, 'administrative_area_level_1'))
              state = a[i].long_name; //store the state
           else if(compIsType(t, 'locality'))
              city = a[i].long_name; //store the city
        }
        return (city + ', ' + state)
    }

function compIsType(t, s) { 
       for(z = 0; z < t.length; ++z) 
          if(t[z] == s)
             return true;
       return false;
    }
</script> 
```

在这里我硬编码邮政编码值“34200”现在不是从压缩文本框中获取，而是在文本框“TextBox1”中显示城市状态，如下所示，

```
<asp:TextBox ID="txtZip"  runat="server" ToolTip="Enter Zip"></asp:TextBox>
   <asp:TextBox ID="TextBox1" runat="server" ForeColor="Gray"></asp:TextBox> 
```

编辑：

如何将此 jquery 脚本与我的 JS 一起使用以自动完成？

```
<script>
  $(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];
    $( "#tags" ).autocomplete({
      source: availableTags
    });
  });
  </script> 
```

当我将邮政编码输入“txtZip”时，我将如何获得自动完成的城市状态？

希望您的建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:07:53.897

从 zip 文本框中获取值，就像设置城市一样。

```
var zip = document.getElementById("txtZip").value 
```

希望这可以帮助

# asp.net-mvc-3 - 操作可能会破坏 mvc3 razor 中的运行时

> ID：14229835
> 
> 赞同：2
> 
> 时间：2013-01-09T06:55:34.857
> 
> 标签：asp.net-mvc-3

我在 mvc3 razor 中工作，我的项目很快运行正确，但我得到了错误

```
Error   3   Assembly 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral,     PublicKeyToken=31bf3856ad364e35' uses 'System.Web.WebPages, Version=2.0.0.0, Culture=neutral,     PublicKeyToken=31bf3856ad364e35' which has a higher version than referenced     assembly 'System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'        c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Web.Mvc.dll    MvcApplication1 
```

我将 system.web.mvc.dll 和 System.Web.WebPages.Razor 文件从 mvc4 文件夹替换为 mvc3 文件夹。以及 web.config 中的一些更改，它开始正常工作。但现在几天后它向我显示以下错误消息

操作可能会破坏运行时

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Security.VerificationException：操作可能会破坏运行时的稳定性。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

```
Stack Trace: 

[VerificationException: Operation could destabilize the runtime.]
System.Web.Mvc.Razor.MvcWebPageRazorHost.GetRidOfNamespace(String ns) +32
System.Web.Mvc.Razor.MvcWebPageRazorHost..ctor(String virtualPath, String physicalPath) +196
System.Web.Mvc.MvcWebRazorHostFactory.CreateHost(String virtualPath, String physicalPath) +113
System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfigCore    (RazorWebSectionGroup        config, String virtualPath, String physicalPath) +422
System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfig(String virtualPath, String physicalPath) +228
System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfig(String virtualPath) +38
System.Web.WebPages.Razor.RazorBuildProvider.GetHostFromConfig() +51
System.Web.WebPages.Razor.RazorBuildProvider.CreateHost() +57
System.Web.WebPages.Razor.RazorBuildProvider.get_Host() +56
System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode() +92
System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType() +54
System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider) +59
System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders() +209
System.Web.Compilation.BuildProvidersCompiler.PerformBuild() +15
System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) +9929933
System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +299
System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +103
System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +165
System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound) +33
System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath) +40
System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath) +54
System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List1     
locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations) +197
System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String   controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations) +681
System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext,  String     viewName, String masterName, Boolean useCache) +315
System.Web.Mvc.<>c__DisplayClassc.<FindView>b__b(IViewEngine e) +68
System.Web.Mvc.ViewEngineCollection.Find(Func2 lookup, Boolean trackSearchedPaths) +182
System.Web.Mvc.ViewEngineCollection.Find(Func2 cacheLocator, Func2 locator) +110
System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String     viewName, String masterName) +329
System.Web.Mvc.ViewResult.FindView(ControllerContext context) +135
System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +230
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +39
System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +74
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, 
Func1 continuation) +388
System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +72
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext,IList1filters, ActionResult actionResult) +303
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +844
System.Web.Mvc.Controller.ExecuteCore() +130
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +229
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +39
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +71
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +44
System.Web.Mvc.Async.<>c__DisplayClass8
1.<BeginSynchronous>b__7(IAsyncResult _) +42
System.Web.Mvc.Async.WrappedAsyncResult
1.End() +152
System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +59
System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +40
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +75
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +31
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +61
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +118
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +38
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

我的 web.config 中的设置如下

```
<assemblies>
<add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral,PublicKeyToken=31BF3856AD364E35" />
 <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
 <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
 <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
 <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </assemblies> 
```

请任何人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:47:42.763

您是否安装了 .NET Framework 4.5 或 Visual Studio 2012？问题很可能是框架中的错误。您可以在这里找到答案：

[http://elegantcode.com/2012/08/23/net-4-5-operation-could-destabilize-the-runtime-yikes/](http://elegantcode.com/2012/08/23/net-4-5-operation-could-destabilize-the-runtime-yikes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T20:49:47.873

我们的一个项目也有类似的问题。我们一直在使用 MVC3 并尝试升级到 MVC4。我们还升级到 Razor 2.0。原来 web.configs 并没有按预期更新。检查 ~/Views 文件夹中的 Web 配置以及根 web.config 并确保程序集绑定重定向正确且所有程序集引用正确。我们这样做了，问题就消失了

# android - 如何使用上下文菜单删除行？

> ID：14229837
> 
> 赞同：-1
> 
> 时间：2013-01-09T06:55:38.733
> 
> 标签：android, database, listview, contextmenu

如何使用 删除列表项并获取更新的列表`onContextItemSelected`？

如何使用上下文菜单删除一行？

代码：

```
case R.id.Delete_Note:
            Database_Notepad db=new Database_Notepad(Create_Task.this);
            db.DeleteNote();

            break; 
```

我的数据库：

```
public void DeleteNote(int rowId) {
            SQLiteDatabase db = this.getWritableDatabase();
            db.delete(Table_Notepad, Col_ID + " = ?", new String[] { String.valueOf(rowId) });
            db.close();
        } 
```

删除项目后如何更新我的列表视图？

这就是我将数据设置为列表视图的方式：

```
Database_Notepad db = new Database_Notepad(Create_Task.this); Cursor c = db.Get_All_Note(); 
String[] from = new String[] {Database_Notepad.Col_File_Name,Database_Notepad.Col_Due_Date}; 
int[] to = new int[] {R.id.titlename, R.id.duedatetext}; 
SimpleCursorAdapter madapter = new SimpleCursorAdapter(Create_Task.this, R.layout.file_row, c, from, to); 
 this.setListAdapter(madapter); 
getListView().setOnItemClickListener(this); 
registerForContextMenu(getListView()); 
db.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:18:54.367

根据您的[评论](https://stackoverflow.com/questions/14229837/how-to-delete-row-using-context-menu/14230134#comment19740522_14229837)，您成功删除了行项目，但您未能更新列表视图，

因此，每当在列表视图数据中进行一些更改时，您应该通过像这样应用[notifyDataSetChanged()](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged())`adapter.notifyDataSetChanged()`来通知您的适配器，如果某些项目被添加或删除，它将反映在您的列表视图中。

*希望它有效！*

# jquery - jquery - 简单的手风琴

> ID：14229842
> 
> 赞同：0
> 
> 时间：2013-01-09T06:56:12.530
> 
> 标签：jquery, jquery-ui-accordion

我需要的是，如果选项卡会点击，打开选项卡应该关闭示例在[这里](http://jsfiddle.net/jhunlio/tyeKJ/9/)

```
$("#accordion > li > div").click(function () {
      $('.active').not(this).removeClass('active');

      $(this).toggleClass('active');
      if (false == $(this).next().is(':visible')) {
                  $('#accordion > ul').slideUp(300);
                }
                $(this).next().slideToggle(300);
              });

              var animationIsOff = $.fx.off;
              $.fx.off = true;
              $('#accordion > li > div:eq(0)').click()
              $.fx.off = animationIsOff; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:07:49.380

更改此行：

```
$('.active').not(this).removeClass('active'); 
```

至：

```
$('.active').not(this).removeClass('active').next().hide(300); 
```

小提琴：http: [//jsfiddle.net/tyeKJ/10/](http://jsfiddle.net/tyeKJ/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-12T21:21:06.777

```
 <div class="container">
    <div class="accord1">
<ul>
  <li>
    <p>Accord 1</p>
    <div class="accord-content">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries,
    </div>
  </li>
  <li>
    <p>Accord 2</p>
    <div class="accord-content">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries,
    </div>
  </li>
  <li>
    <p>Accord 3</p>
    <div class="accord-content">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries,
    </div>
  </li>

</ul> 
```

```
 $('.accord1 li p').click(function(){
  $(this).next(".accord-content").slideToggle();
  $(this).closest("li").siblings().find('.accord-content').slideUp();
 }); 
```

[http://codepen.io/catchmeatcodepen/pen/jbwBze](http://codepen.io/catchmeatcodepen/pen/jbwBze)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-19T16:31:52.753

```
 $(document).ready(function(e) {
		$(".demo div").hide();

		$(".demo h3").click(function(){
			$(this).next().slideToggle()
			.siblings("div:visible").slideUp();
		});
	});
```

```
h3
{
	background-color:aqua;
	padding:10px;
	margin:3px;
	width:60%;
}
.demo div
{
	color:#FFF;
	background-color:maroon;
	padding:25px;
	width:55%;
	margin-left:25px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<div class="demo">
	<h3>Html</h3>
	<div>
		This is a html tag. This is a html tag.
	</div>
	<h3>Css</h3>
	<div>
		This is a css tag. This is a css tag.
	</div>
	<h3>Javascript</h3>
	<div>
		This is a js tag. This is a js tag.
	</div>
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:10:33.897

修正了你的脚本：

```
 $("#accordion > li > div").click(function () {
     $('#accordion').find('ul').not($(this).next()).slideUp(300);
     $('.active').not(this).removeClass('active');

     $(this).toggleClass('active');
     $(this).next().slideToggle(300);
 });

 var animationIsOff = $.fx.off;
 $.fx.off = true;
 $('#accordion > li > div:eq(0)').click()
 $.fx.off = animationIsOff; 
```

演示[在这里](http://jsfiddle.net/tyeKJ/14/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T07:08:45.283

不要只删除活动的类，还要将面板向上滑动：

```
if ($('.active').not(this).length > 0) {
    $('.active').next().slideUp(300);
    $('.active').removeClass('active');
} 
```

更新[了小提琴](http://jsfiddle.net/tyeKJ/12/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-07T09:09:09.853

#CSS：

```
.my-accordion .menu {
    background-color: #d5d5d5;
    color: #444;
    cursor: pointer;
    padding: 12px;
    width: 100%;
    text-align: left;
    border: none;
    outline: none;
    margin-top: 4px;
    border-radius: 8px;
    font-size: inherit
}

.my-accordion .panel {
    background-color: #FFFFFF;
    color: #000000;
    overflow: hidden
}

.my-accordion .open {
    display: block
}

.my-accordion .close {
    display: none
}

.my-accordion .active {
    background-color: #1b90bb;
    color: #fff
}

.my-accordion .arrow {
    float: right;
    display: block
}

.my-accordion .darrow {
    display: none
}

.my-accordion .active .darrow {
    display: block
}

.my-accordion .active .rarrow {
    display: none
}

.my-accordion .panel a {
    display: block;
    background: #808080;
    color: #FFFFFF;
    padding: 5px;
    margin: 3px;
    width: 100%;
    text-decoration: none
} 
```

#HTML：

```
<div class="my-accordion">
   <button class='menu'>Menu 1<span class='arrow rarrow'>+</span><span class='arrow darrow'>-</span></button>
   <div class='panel close'>
      <div><a href="">Link 1</a><a href="">Link 2</a><a href="">Link 3</a><a href="">Link 4</a></div>
   </div>
   <button class='menu'>Menu 2<span class='arrow rarrow'>+</span><span class='arrow darrow'>-</span></button>
   <div class='panel close'>
      <div><a href="">Link 1</a><a href="">Link 2</a><a href="">Link 3</a><a href="">Link 4</a></div>
   </div>
   <button class='menu'>Menu 3<span class='arrow rarrow'>+</span><span class='arrow darrow'>-</span></button>
   <div class='panel close'>
      <div style="padding:10px">Data will be added soon.</div>
   </div>
</div> 
```

#JAVASCRIPT：

```
! function() {
    for (var l = document.querySelectorAll(".my-accordion .menu"), e = 0; e < l.length; e++) l[e].addEventListener("click", n);

    function n() {
        for (var e = document.querySelectorAll(".my-accordion .panel"), n = 0; n < e.length; n++) e[n].className = "panel close";
        if (-1 == this.className.indexOf("active")) {
            for (n = 0; n < l.length; n++) l[n].className = "menu";
            this.className = "menu active", this.nextElementSibling.className = "panel open"
        } else
            for (n = 0; n < l.length; n++) l[n].className = "menu"
    }
}(); 
```

它是带有 javascript 的 html 手风琴代码。要修改样式，请访问[https://www.htmlcodegenerator-tools.com/2020/08/html-accordion-generator.html](https://www.htmlcodegenerator-tools.com/2020/08/html-accordion-generator.html)

# c# - 从文件路径C#获取文件名

> ID：14229844
> 
> 赞同：-3
> 
> 时间：2013-01-09T06:56:27.483
> 
> 标签：c#, string, substring

> **可能重复：**
> [从 C# 中的路径字符串获取文件名](https://stackoverflow.com/questions/6921105/get-file-name-from-a-path-string-in-c-sharp)

使用：**c#asp.net vs10**

假设，文件路径 = **"C:\Sys\Axa_Excel\Axa123.xlsx"**。文件路径是一个字符串变量。文件可以来自任何位置。但文件将始终为 xls/xlsx/csv。我如何只能从只是一个字符串的文件路径中获取文件名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T06:57:54.930

使用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)方法。

```
string result = Path.GetFileName(@"C:\Sys\Axa_Excel\Axa123.xlsx"); 
```

> 我如何**只能从**只是一个字符串的文件路径中获取文件名？

使用[Path.GetFileNameWithoutExtension 方法](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)

```
string result = Path.GetFileNameWithoutExtension(@"C:\Sys\Axa_Excel\Axa123.xlsx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:58:23.880

多个问题可能重复，例如：

*   [C#获取不带扩展名的文件名](https://stackoverflow.com/questions/4804990/c-sharp-getting-file-names-without-extensions)
*   [从 C# 中的路径字符串获取文件名](https://stackoverflow.com/questions/6921105/get-file-name-from-a-path-string-in-c-sharp)

但是，要获取文件名，包括。扩展，使用静态方法：

`Path.GetFileName`

记录[在这里](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)。

要获取不带扩展名的文件名，请使用静态方法：

`Path.GetFileNameWithoutExtension`

记录[在这里](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:59:04.893

使用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx) [Path.GetFileNameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx) 静态方法。

你也需`using System.IO`要这样做。

```
string filename = Path.GetFileName(@'C:\Sys\Axa_Excel\Axa123.xlsx');
string filenamewithoutextension = Path.GetFileNameWithoutExtension(@'C:\Sys\Axa_Excel\Axa123.xlsx'); 
```

# linux - 在 mac 上通过 ssh 连接到 amazon aws linux 服务器

> ID：14229846
> 
> 赞同：44
> 
> 时间：2013-01-09T06:56:30.500
> 
> 标签：linux, macos, amazon-ec2

我创建了一个新的密钥对并将其下载到我的 mac，然后使用该密钥对和我的安全组设置了一个新的 Amazon Linux AMI 服务器。现在我需要将我下载的密钥对 .pem 文件放在用户文件夹中的 .ssh 文件中吗？但是由于名称的原因，我无法创建一个名为“.ssh”的文件夹。

我在哪里把密钥对放在我的 Mac 上？然后需要哪些 chmods 或其他命令才能从我的 linux bash 连接到服务器？我知道“ssh my public DNS”，但是我应该注意哪些其他权限或其他任何事情？这是一个新手问题。谢谢。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-09T08:12:58.163

您需要将密钥对放在 {your home directory}/.ssh 中。如果该文件夹不存在，请创建它。将密钥对放入其中后，您必须更改文件的权限，以便只有您的用户才能读取它。启动终端并输入

```
chmod 600 $HOME/.ssh/<your keypair file> 
```

这限制了对文件的访问，然后限制对文件夹类型的访问

```
chmod 700 $HOME/.ssh 
```

您必须限制访问，因为 OpenSSH 协议不允许您使用其他人可以查看的密钥。

然后从您输入的终端登录到您的实例

`ssh -i <your home directory>/.ssh/<your keypair file> ec2-user@<ec2 hostname>`

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-01-09T08:57:14.650

你也可以创建一个文件 ~/.ssh/config chmod it 644 然后你可以在里面添加这样的东西

```
host mybox-root
  Hostname [the IP or dns name]
  User root
  IdentityFile ~/.ssh/[your keypair here] 
```

那么你可以做

$ ssh mybox-root

你会更容易登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-29T02:31:58.143

您可以使用 Java MindTerm 连接到 Macbook pro 中的 EC2 服务器。这个对我有用。这是更多详细信息和分步说明。

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-07T11:31:42.500

[http://www.openssh.com/](http://www.openssh.com/)是[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-connect-to-instance-linux.html#using-ssh-client](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-connect-to-instance-linux.html#using-ssh-client)上的建议（选项 3）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-20T11:13:38.473

有人在 Mac 上询问创建 ~/.ssh 文件夹的简单方法是运行命令 ssh-keygen，然后使用以下设置...

一个。

```
macbook-air$ ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/sam/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /Users/sam/.ssh/id_rsa.
Your public key has been saved in /Users/sam/.ssh/id_rsa.pub. 
```

B. 然后创建：

```
touch ~/.ssh/authorized_keys 
```

C. 修复权限：

```
chmod 600 ~/.ssh/authorized_keys 
```

D. 将 AWS 密钥复制到该文件：

```
cp AWS_key.text ~sam/.ssh/authorized_keys 
```

#你会在创建 EC2 实例时保存这个 SSH 密钥

E. 然后测试 ssh 到 AWS Linux 服务器 - 你会看到这个错误：

```
ssh -i ./authorized_keys root@ec2-54-76-176-29.ap-southeast-2.compute.amazonaws.com 
```

请以用户“ec2-user”而不是用户“root”登录。

F. 重试，它应该与允许的 AWS 用户“ec2-user”一起工作：

```
ssh -i ./authorized_keys ec2-user@ec2-54-76-176-29.ap-southeast-2.compute.amazonaws.com
       __|  __|_  )
       _|  (     /   Amazon Linux AMI
      ___|\___|___|

https://aws.amazon.com/amazon-linux-ami/2014.09-release-notes/
9 package(s) needed for security, out of 12 available
Run "sudo yum update" to apply all updates. 
```

希望这会有所帮助，一切顺利。

# asp.net - Active Directory 成员资格提供程序拒绝密码重置

> ID：14229848
> 
> 赞同：0
> 
> 时间：2013-01-09T06:56:51.447
> 
> 标签：asp.net, active-directory, web-config, membership-provider

我在允许用户管理其 AD 帐户（创建、更改密码等）的 ASP.Net 应用程序中使用 ActiveDirectoryMembershipProvider。问题是，当我尝试使用 UserPrincipal.ChangePassword() 方法重置密码时，尽管没有在 AD 级别指定密码策略，但它会引发以下异常：

> {“密码不符合密码策略要求。检查最小密码长度、密码复杂性和密码历史要求。（HRESULT 异常：0x800708C5）”}

然后我将 enablePasswordReset="true" 和 requiresQuestionAndAnswer="false" 添加到 web.config 中的成员资格配置中，现在一旦用户尝试登录 AD，我就会收到此异常

> Active Directory 成员资格提供程序不支持没有密码问题和答案的密码重置。

我虽然这 requiresQuestionAndAnswer="false" 应该解决这个问题！

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:51:33.903

It appeared that the password policy was set to disallow changing password more than once in the same day. That's why it was rejecting password change. After disabling that rule. It worked fine

# android - 如何在 ActivityInstrumentationTestCase2 中接收活动中的参数

> ID：14229852
> 
> 赞同：0
> 
> 时间：2013-01-09T06:56:59.793
> 
> 标签：android, instrumentation, android-testing

命令 ：

```
adb shell am instrument -e  class com.vishal.nirma.test.MyActivity#MyFunction  com.vishal.nirma.test/android.test.InstrumentationTestRunner -e myvar myvalue 
```

现在，

```
protected void setUp() throws Exception {
        getActivity();
        super.setUp();

// here i want to receive arguments, which are passed in command line (ex. myvar).
       // how to receive arguments here?
} 
```

我正在使用“ ActivityInstrumentationTestCase2 ”。

我在 setup() 中尝试了下面的代码，但它对我不起作用。

```
Bundle extras = getActivity().getIntent( ).getExtras( );

        if ( extras != null ) 
        {

          Log.v(TAG,"Parameters Received !!!");

          if ( extras.containsKey ( "myvar" ) ) 
          {
            String str_myvar = extras.getString ( "myvar" );

          } else {

          }
        }
        else
        {
            Log.v(TAG,"No parameters ???");
        } 
```

它总是给我“没有参数？？？”。

提前感谢您的帮助... :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:34:44.907

要是这么容易就好了！您在命令行中传入的参数会被检测测试运行器吃掉，而不是被检测测试用例吃掉。这意味着要抓住它们，您需要抓住跑步者。

实际上，您可以将 Instrumentation 转换为您正在使用的测试运行器，一旦您执行了稍微不安全的转换，您就可以调用 getBundle() 来获取传递给它的参数。一旦你有了它，你就可以得到你想要的值。

# java - java信号量成语

> ID：14229858
> 
> 赞同：2
> 
> 时间：2013-01-09T06:57:32.680
> 
> 标签：java, semaphore, java.util.concurrent

我有一个线程，它只有在获得对 2 个信号量的独占访问权时才会执行操作。

```
public void run(){
            boolean a1=false;
            boolean a2=false;
            boolean a3=false;
            while(true){
                try{
                    if(res[1].tryAcquire()==true){
                        a1=true;
                        if((res[2].tryAcquire()==true){
                            a2=true;
                            if(res[3].tryAcquire()==true)){
                                a3=true;
                                System.out.println("Rolled the tobacco");
                            }
                        }   
                    }
                }
                finally{
                    if(a1){
                        a1=false;
                        res[1].release();
                    }
                    if(a2){
                        a2=false;
                        res[2].release();
                    }
                    if(a3){
                        a3=false;
                        res[3].release();
                    }
                }
            }
        }
    } 
```

有没有更好的方法来写这个来确保我们不会扰乱信号量获取计数？有没有办法检查当前线程是否获取了信号量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:21:17.223

在 Java 7 中可以尝试一下`Closeable`。当然必须有更好的解决方案。

```
public class Region implements Closeable {

    private final Semaphore semaphore;

    public Region(Semaphore semaphore) {
        this.semaphore = semaphore;
        if (!semaphore.tryAcquire()) {
            throw NotAcquiredException(semaphore);
        }
    }

    @Override
    public void close() {
         semaphore.release();
    }
}

public class NotAcquiredException extends Exception { ... } 
```

用法：

```
 public void run() {
        boolean a1 = false;
        boolean a2 = false;
        boolean a3 = false;
        while (true) {
            try (Closeable r1 = new Region(res[1])) {
                 a1 = true;
                 try (Closeable r2 = new Region(res[2])) {
                     a2 = true;
                     try (Closeable r3 = new Region(res[3])) {
                          a3 = true;
                          System.out.println("Rolled the tobacco");
                     } catch (IOException e) {
                     }
                 } catch (IOException e) {
                 }
            } catch (IOException e) {
            }
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:41:15.063

您可以将每个获取分成一个尝试......最后，不是更短，而是摆脱一些变量并使每个锁应该发生的事情变得相当明显。（我将数组更改为从零开始）

```
public void run(){
    while(true){
        if(res[0].tryAcquire()){
            try {
                if(res[1].tryAcquire()) {
                    try {
                    if(res[2].tryAcquire()){
                        try {
                            System.out.println("Rolled the tobacco");
                        } finally {
                            res[3].release();
                        }
                    }
                    } finally {
                        res[2].release();
                    }                               
                }
            } finally{
                res[1].release();
            }
        }
    }
} 
```

如果您需要获取大量锁或在多个地方执行此操作，那么辅助类可能会很好。至少隐藏了获取和释放信号量的样板代码。

```
public void run() {
    SemaphoreHelper semaphoreHelper = new SemaphoreHelper(res);
    while (true) {
        try {
            if (semaphoreHelper.aquireAll()) {
                System.out.println("Rolled the tobacco");
            }
        } finally {
            semaphoreHelper.releaseAquired();
        }
    }
}

private static class SemaphoreHelper {

    private final Semaphore[] semaphores;
    private int semaphoreIndex;

    public SemaphoreHelper(Semaphore[] semaphores) {
        this.semaphores = semaphores;
    }

    public void releaseAquired() {
        while (semaphoreIndex > 0) {
            semaphoreIndex--;
            semaphores[semaphoreIndex].release();
        }
    }

    public boolean aquireAll() {
        while (semaphoreIndex < semaphores.length) {
            if (!semaphores[semaphoreIndex].tryAcquire()) {
                return false;
            }
            semaphoreIndex++;
        }
        return true;
    }
} 
```

# css - Chrome中字体系列的奇怪css优先级行为

> ID：14229865
> 
> 赞同：0
> 
> 时间：2013-01-09T06:58:10.107
> 
> 标签：css, google-chrome, font-family

我需要为我的菜单自定义样式。在 IE 中，它工作正常，但在 Chrome 中，我发现我无法修改菜单中链接的字体系列。对于 span 或 div 中的文本，没关系。我使用简单的选择器在默认规则之前制定我的规则。但是开发工具显示是这样的： ![在此处输入图像描述](../Images/5d7849c8b38653851a6030c3ee506540.png)

您可以看到我的规则没有覆盖默认规则。我尝试添加重要的，开发工具显示OK，如下所示，但字体根本没有改变： ![在此处输入图像描述](../Images/7721b7a84de20cb43ec389c4fa656720.png)

我试图使我的规则起作用的唯一一件事是删除“Menu.css”中的原始 CSS 规则“.tundra .dijitMenuItem”。但这是框架给的默认规则，我不想修改。

dom中的元素如下图所示： ![在此处输入图像描述](../Images/1ff56421614965a3186d31d645013271.png)

这怎么会发生，以及如何使我的规则发挥作用？

**更新**：我尝试了很多方法来测试行为。好像只要我把我的规则放到 .dijitMenuItem 或者它的孩子上，它就可以覆盖默认值。否则，无论我的选择器多么具体，它都不会被应用。我做了一个简单的例子，如下所示：完整的例子在[JsFiddle](http://jsfiddle.net/pKyLG/4/)上：

```
.theme .sub-container
{
  font-family: Arial; 
}

body.theme div.container
{
    font-family: sans-serif; //this doesn't work
}

.theme .sub-container2
{
    font-family: sans-serif;
}
body.theme div.sub-container2
{
    font-family: Arial; //this works
} 
```

谁能解释一下？font-family 的继承和覆盖是否与其他 CSS 属性不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:29:54.140

尝试在锚标记中设置字体系列。我认为这应该是工作。

# c# - Microsoft Unity，解决两个类似的依赖项？

> ID：14229868
> 
> 赞同：1
> 
> 时间：2013-01-09T06:58:25.050
> 
> 标签：c#, dependency-injection, inversion-of-control, unity-container, containers

我有一个使用 Unity 的场景，这有点令人困惑......假设我有一个 AuthenticationService 对用户进行身份验证，并且当成功登录到文本文件或数据库时，分别使用 TextLogger 类或 DbLogger 类。通常，对于我将在我的项目中使用的任何类，我会在我的模块类中适当地注册，如下所示：

```
public class LoggingModule
{
    IUnityContainer _iocContainer;

    public LoggingModule(IUnityContainer container)
    {
        _iocContainer = container;
    }

    public void Init()
    {
        //Add any logic here to look in a config file, check a property
        //or any other condition to decide which implementation is registered.

        //register the database logger to the ILogger interface
        _iocContainer.RegisterType(typeof(ILogger), typeof(DBLogger));

    }
} 
```

这将被注入到我的身份验证服务的构造函数中。但是，如果我想在我的应用程序的不同点使用这两个记录器，首先我要在我的 Init 方法中注册这两种类型，即 TextLogger 和 DBLogger？其次，我的容器如何知道要解析哪种类型？

请帮忙....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:23:42.987

将您的两种类型注册到具有名称的容器中，即；

```
container.RegisterType<ILogger, DBLogger>("DBLogger");
container.RegisterType<ILogger, TextLogger>("TextLogger"); 
```

并使用名称参数解析您的类型，即；

```
var logger = container.Resolve<ILogger>("DBLogger"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:10:53.563

除非您使用嵌套容器并调用`Resolve`自己，否则 Unity 将提供应用程序范围的解决方案，而不是场景驱动的解决方案。

您可以使用嵌套的 Unity 容器来实现您想要的，但您最好在自己的代码中进行解析，尤其是嵌套容器方法更适合在应用程序范围的解析方面处理“规则异常”。

您将需要一段代码来确定适合每个实例的具体类型。然后可以将此代码推入更高级别的控制/编排类，该类将适当的具体类型注入相关实例。

# wix - 在新属性中组合特征条件

> ID：14229871
> 
> 赞同：0
> 
> 时间：2013-01-09T06:58:30.277
> 
> 标签：wix

我有一个 Wix setupKit 我有一些基于它们的功能将显示一些自定义对话框。有一些条件我想将它们组合到一个新属性中。例如：

```
<Property Id="SERVERSETTINGSISNEEDED">
<![CDATA[(&Client = 3) OR (!Client = 3) OR (&CoreService = 3) OR (!CoreService = 3) OR (&ResourceService = 3) OR (!ResourceService = 3)]]>
</Property> 
```

进而：

```
<Publish Dialog="CustomizeDlg" Control="Next" Event="NewDialog" Value="ServersSettingsDlg" Order="1">SERVERSETTINGSISNEEDED</Publish> 
```

但它不起作用并且总是显示该对话框。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:01:50.450

当您使用`<Property>`WiX 中的元素定义 MSI 属性时，它会在构建时构建，并且您最终会在构建MSI 包时在[属性表中拥有一条记录。](http://msdn.microsoft.com/ru-ru/library/windows/desktop/aa370908.aspx)另一方面，特性状态是在运行时解决的，也就是说，当你的包被安装时。

因此，您尝试在构建期间引用运行时值，这是不正确的。我确信可以解释为什么结果属性的计算结果为`true`，但这不是问题所在。

据我了解您的问题，您希望缩短元素的条件部分，以免多次复制/粘贴长字符串。如果是这种情况，您不必在此处涉及 MSI 属性 - 您可以使用 WiX 预处理器功能实现此目的。

因此，请执行以下操作：

*   将条件定义为预处理器变量：

`<?define ServerSetingIsNeeded = "(&Client = 3) OR (!Client = 3) OR (&CoreService = 3) OR (!CoreService = 3) OR (&ResourceService = 3) OR (!ResourceService = 3)>"?>`

*   使用变量而不是条件：

`<Publish Dialog="CustomizeDlg" Control="Next" Event="NewDialog" Value="ServersSettingsDlg" Order="1">$(var.ServerSetingIsNeeded)</Publish>`

# python - 缓存一个大对象并从缓存中快速读取烧瓶

> ID：14229876
> 
> 赞同：3
> 
> 时间：2013-01-09T06:58:52.587
> 
> 标签：python, caching, memcached, flask

我试图`flask-cache`像这样缓存一个对象（大约 800MB）：

```
@cache.memoize(50000)
def get_nmf_result():
    return NMF_Recommendation(basis_path = app.config['BASIS_PATH'],
                              coef_path = app.config['COEF_PATH'],
                              mask_path = app.config['MASK_PATH']) 
```

但是我发现（1）缓存需要很长时间

(2) 即使我缓存了它，它仍然需要相当长的时间才能从缓存中读取。这是否意味着当我读取缓存时，实际上我得到的是 a`copy`而不是`reference`缓存？

有没有人有关于快速存储和读取缓存的想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T12:19:26.090

Flask-Cache 使用 Werkzeug 缓存，它使用 pickling 库将任何缓存值序列化为二进制 blob，因此可以将值保存在任何后端。对一个 800MB 的对象进行酸洗和解酸可能需要相当长的时间，特别是如果它不仅仅是一个大字符串或类似的“简单”对象。

在这一点上，我认为最好编写自己的缓存，根据您使用的后端和您存储的数据类型进行定制。

# xml - 使用 Jersey 框架使用 CDATA 编组对象

> ID：14229877
> 
> 赞同：2
> 
> 时间：2013-01-09T06:58:54.253
> 
> 标签：xml, jaxb, jersey, cdata

我想使用 CDATA 块编组我的对象。我可以通过为 CharacterEscapeHandler（http://stackoverflow.com/questions/14193944/jaxb-marshalling-unmarshalling-with-cdata）创建编组器和设置属性来做到这一点。但在泽西，编组是由泽西完成的。那么我怎么能告诉球衣用 CDATA 编组对象。

我有以下服务

```
@GET
    @Path("/getdata")
    @Produces(MediaType.TEXT_XML)
    public HelloBean getData() throws Exception 
    {
        HelloBean h1 = new HelloBean();
        h1.setName("kshitij");
        return h1;
    } 
```

和豆类是

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "root")
@XmlAccessorType(XmlAccessType.FIELD)
public class HelloBean {

    private String name;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

我尝试添加适配器类。但问题是我如何将附加属性设置为球衣正在使用的默认编组器。

我想设置以下属性。

```
 marshaller.setProperty(CharacterEscapeHandler.class.getName(), new CharacterEscapeHandler() { 
                public void escape(char[] ac, int i, int j, boolean flag,
                Writer writer) throws IOException {
                writer.write( ac, i, j ); }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:51:43.827

您可以创建一个 JAX-RS `MessageBodyWriter`。A`MessageBodyWriter`允许您使用自己的代码来编写 XML 消息。

**相关示例**

*   [JAXB 或 JAX-RS 在我的 JSON 响应中用引号包裹数字，将它们变成字符串。为什么这是默认行为，以及如何解决？](https://stackoverflow.com/questions/9595561/jaxb-or-jax-rs-is-wrapping-numbers-in-my-json-responses-with-quotes-turning-the/9603130#9603130)

# solr - Solr 云索引挂起

> ID：14229882
> 
> 赞同：0
> 
> 时间：2013-01-09T06:59:18.980
> 
> 标签：solr, lucene, solrcloud

我现在正在使用 solrcloud，但我面临一个可能导致索引进程挂起的问题。

我的部署只有一个集合，有 5 个分片在 5 台机器上运行。每天我们都会使用 dataimporthandler 做一个完整的索引，它有 5000 万个文档。我们使用 solrcloud 的分布式索引在 5 台机器中的一台上触发索引。

我发现，有时 5 台机器中的一台会死机，原因是

```
2013-01-08 10:43:35,879 ERROR core.SolrCore - java.io.FileNotFoundException: /home/admin/index/core_p_shard2/index/_31xu.fnm (No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:216)
        at org.apache.lucene.store.MMapDirectory.openInput(MMapDirectory.java:222)
        at org.apache.lucene.store.NRTCachingDirectory.openInput(NRTCachingDirectory.java:232)
        at org.apache.lucene.codecs.lucene40.Lucene40FieldInfosReader.read(Lucene40FieldInfosReader.java:52)
        at org.apache.lucene.index.SegmentCoreReaders.<init>(SegmentCoreReaders.java:101)
        at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:57)
        at org.apache.lucene.index.ReadersAndLiveDocs.getReader(ReadersAndLiveDocs.java:120)
        at org.apache.lucene.index.BufferedDeletesStream.applyDeletes(BufferedDeletesStream.java:267)
        at org.apache.lucene.index.IndexWriter.applyAllDeletes(IndexWriter.java:3010)
        at org.apache.lucene.index.DocumentsWriter.applyAllDeletes(DocumentsWriter.java:180)
        at org.apache.lucene.index.DocumentsWriter.postUpdate(DocumentsWriter.java:310)
        at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:386)
        at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1445)
        at org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandler2.java:210)
        at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:61)
        at org.apache.solr.update.processor.UpdateRequestProcessor.processAdd(UpdateRequestProcessor.java:51)
        at org.apache.solr.update.processor.DistributedUpdateProcessor.versionAdd(DistributedUpdateProcessor.java:448)
        at org.apache.solr.update.processor.DistributedUpdateProcessor.processAdd(DistributedUpdateProcessor.java:325)
        at org.apache.solr.handler.loader.XMLLoader.processUpdate(XMLLoader.java:230)
        at org.apache.solr.handler.loader.XMLLoader.load(XMLLoader.java:157)
        at org.apache.solr.handler.UpdateRequestHandler$1.load(UpdateRequestHandler.java:92)
        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:74)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1699) 
```

我检查了索引目录，它确实不包含 _31xu.fnm。我想知道分布式索引中是否存在一些并发错误？

据我所知，分布式索引是这样工作的。您可以将文档发送到任何分片，文档将根据哈希 id 纠正分片。并且 dataimporthandler 将使用 updatehandler 将文档转发到正确的分片。最后文档将通过 DocumentsWriterPerThread 刷新到磁盘。我想知道从分片触发的索引发送的更新请求太多导致了问题。我的猜测是基于我在机器上发现的 whild dead 有很多索引段，而且每个索引段都非常小。

我对solr不太熟悉，可能我的猜测根本没有意义，有人有什么想法吗？谢谢

# c - 优化/更好的编码函数和使用它的返回值的方法

> ID：14229885
> 
> 赞同：1
> 
> 时间：2013-01-09T06:59:31.350
> 
> 标签：c, optimization

我有大约 20 到 30 个函数，我必须在任何函数中调用 wsse_authenticate，并且这个 wsse_authenticate 函数根据我发送错误消息的值返回一个值，有什么办法可以改进这个代码，所以我只是在每个函数中调用函数 wsse_authenticate(soap) 并用一些更好的代码替换开关盒，我想让它更有效率，请给我一些输入

```
wsse_ret = (wsse_authenticate(soap));

if(wsse_ret)
{
    switch(wsse_ret)
    {
        case 1: onvif_fault(soap,"ter:NoSecuritytoken","ter:Failed_wsse_Aunthentication");

        case 2: onvif_fault(soap,"ter:InvalidUserName","ter:FailedAunthentication");

        case 3: onvif_fault(soap,"ter:InvalidPassword","ter:FailedAunthentication");

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:38:47.210

从上面的代码中，我看到您在所有情况下都调用了相同的函数，期望将“失败消息”作为参数传递给函数**onvif_fault**。而且在每个 case 语句之后也没有中断，这不会给你预期的结果。

**使用break语句的说明：** 假设ret值为1，那么这三种情况都会被执行，因为最后有break语句。这意味着**onvif_fault**将使用不同的参数调用三次，这是不期望的。

**您的问题的解决方案** 您可以使用 c 中的结构创建一个表，该表实际上包含故障列表。
这是你可以只用一行代码替换你的 Switch 语句。

例如：
typedef struct _fault_messages
{
char msg1[254];
字符 msg2[254];
} 故障消息；

```
fault_messages msg_table[3] = {  
                    {"ter:NoSecuritytoken", "ter:Failed_wsse_Aunthentication"},  
                    {"ter:error1", "ter:fault1"},  
                    {"ter:error2", "ter:fault2"} 
```

};

现在，您在上表中的故障信息已被映射。您可以如下所述优化您的代码：

```
wsse_ret = (wsse_authenticate(soap));  

if(wsse_ret)  
{  
    onvif_fault(soap, msg_table[wsse_ret-1].msg1, msg_table[wsse_ret-1].msg2);  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:05:19.107

如果我理解正确 - 您的主要问题是您不想在 30 个函数集中的每个函数中重复安全检查代码:-) 如果是这种情况，您可以尝试使用这种模式：

```
#include <stdio.h>
#include <string.h>

int isUserPasswordValid(char * password) {
    return strcmp(password, "MyBigPassword") == 0;
}

#define callFunctionWithAuthentication(password, secPayload, execPayload) \
do {\
   if (!isUserPasswordValid(password)) {\
      secPayload\
   }\
   else {\
      execPayload\
   }\
} while(0);

int myTestFunction(int x) {
    return x;
}

int main(int argc,char* argv[]){

   // bad password - executes only authentication
   callFunctionWithAuthentication(
               "randomPassword",
               printf("oops - bad password - can't continue\n");,
               int a = myTestFunction(10); printf("function returned %d\n",a);)

   // good password - executes authentication AND code after
   callFunctionWithAuthentication(
               "MyBigPassword",
               printf("oops - bad password - can't continue\n");,
               int a = myTestFunction(10); printf("function returned %d\n",a);)

   return 0;
} 
```

唯一的缺点是您必须将每个 30 个函数的调用替换为`callFunctionWithAuthentication`. 但这是一次性的任务。此外，您必须始终调用此宏而不是`plain`函数。

# java - 我应该使用哪个 API 来登录 java

> ID：14229886
> 
> 赞同：0
> 
> 时间：2013-01-09T06:59:32.570
> 
> 标签：java, logging, log4j, logback

我正在构建一个基于中型独立控制台的 Java 应用程序，我必须记录可能发生的各种事件。我不确定要使用哪个 API。我看过[Logback Project](http://logback.qos.ch/)和[log4j](http://logging.apache.org/log4j/1.2/)。我担心这些是否正确，因为两者似乎在 Web 应用程序项目中都有广泛的用途。请帮助我决定是否更好地使用默认的 java.util.logging API 或者我应该使用其他框架；如果是的话是哪一个。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:02:14.397

我推荐`slf4j`。（它是由做 log4j 的同一个人写的）你可以从[这里阅读更多](http://www.slf4j.org/)

# objective-c - 在 NSData 框架中使用 ARC 的内存泄漏

> ID：14229887
> 
> 赞同：1
> 
> 时间：2013-01-09T06:59:35.237
> 
> 标签：objective-c, memory-leaks, automatic-ref-counting

我无法弄清楚一个内存泄漏。我将添加带有代码的屏幕截图和发生这种情况的标记行。

![在此处输入图像描述](../Images/358782d62a23dd83bbd661f3588e0f18.png)

也许有人可以帮助我看看。

谢谢。

```
- (AVAudioPlayer*)getSpeachSoundObject{

    NSString *objectIDString = [NSString stringWithFormat:@"%i", jmObject.objectID];
    NSString * __weak textPlaySource = [DataController getMediaUrlStringForObjectID:objectIDString parentType:PARENT_TYPE_ITEM_AUDIO];
    NSError * error = nil ;

    if (textPlaySource) {

        //NSURL *soundURL = [[NSURL alloc] initFileURLWithPath:textPlaySource];//[NSURL fileURLWithPath:textPlaySource];
        NSData * data = [NSData dataWithContentsOfFile:textPlaySource options:NSDataReadingMapped error:&error ] ;
        textPlaySource = nil;

        NSError *error;

        //speechSound = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&error];
        AVAudioPlayer *lspeechSound = data ? [[AVAudioPlayer alloc] initWithData:data error:&error ] : nil ;

        data = nil;

        if (error) {
            WLog([NSString stringWithFormat:@"Error creating sound file:%@", error]);
        }

        return lspeechSound;
        //soundURL = nil;
    }

    return nil;
} 
```

# sql - Sqlite 日期函数

> ID：14229891
> 
> 赞同：0
> 
> 时间：2013-01-09T06:59:50.977
> 
> 标签：sql, sqlite, cordova

我的 sqlite 数据库中有一个值为**2013 年 1 月 9 日**的列，依此类推，我想检索今天的日期并相应地显示数据；有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:51:36.627

如果您的日期[以 SQLite 支持的格式](http://www.sqlite.org/datatype3.html#datetime)存储，即，`yyyy-mm-dd`您将能够使用如下查询：

```
SELECT * FROM MyTable WHERE concert_date = CURRENT_DATE 
```

但是像这样的字符串`'10th Feb 2013'`在 SQL 中是不容易构造的；您应该在代码中生成它（与插入记录时生成日期字符串的方式相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:09:19.020

我建议您使用 number 作为该列的数据类型。添加新项目时，请编写：

```
var dateToBeInserted = new Date().getTime(); // return 12312412412343 
```

所以，查询今天的数据：

```
var today = new Date();
today.setHour(0);
today.setMinute(0);
today.setSeconds(0);//.....more
var tomorrow=new Date(today);
tomorrow.setDate(today.getDate()+1);

var sql = "select * from TableName where date >= "+today.getTime()+" and date < "+tomorrow.getTime(); 
```

# asp.net - 这是 SQL 注入攻击吗

> ID：14229893
> 
> 赞同：0
> 
> 时间：2013-01-09T06:59:54.737
> 
> 标签：asp.net, oledb, sql-injection

我开发了一个网站（在 asp.net 中），它有一个注册页面（不是注册，但它接收人员详细信息），这实际上是一个教育组织的网站，注册表单是为想要注册的人准备的该组织举办的研讨会。

现在说到重点，我正在检查数据库的注册表（数据库在 MS Access 中），发现多行数据如下：

```
//In Residential Address field
[url=http://paydayloansonline25.com]payday loans online[/url] pay loans direct student loans [url=http://paydayloansonline25.com]get loan online payday[/url] cash fast without bank account http://paydayloansonline25.com small business loans fast cash

//In Field to store workshop id, for which the person want to register for, the data was
document.getElementById(varIDCtrlName).value; 
```

我确信这可能是 SQL 注入攻击，但不确定黑客会尝试做什么，如果他成功了 - 那么他会收集什么。还请提一下，我该如何处理。

* * *

了解更多信息：

我没有添加类似的参数

```
EnableEventValidation="false" ValidateRequest="false" 
```

在 aspx 页面的 page 指令中，我猜是`true`默认的，虽然它是`true`，但有助于这种类型的可能攻击。还有一点值得一提的是， my`OleDbCommand`的参数写成

```
cmd.Parameters.AddWithValue("@ResiAddress", strResiAddress); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:03:11.923

那就是[跨站脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)

> 跨站点脚本 (XSS) 是一种通常在 Web 应用程序中发现的计算机安全漏洞。由于浏览器安全漏洞，XSS 使攻击者能够将客户端脚本注入到其他用户查看的网页中。

在您的情况下，攻击者希望您在网页的某个位置显示这些字段，并且由于它们是 HTML/Javascript，它们将以攻击者想要的方式显示在浏览器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:03:18.537

这不是 SQLi 攻击 - 数据中没有 SQL 命令。

但是`document.getElementById(varIDCtrlName).value;`，它是有效的 javascript 代码，因此看起来像是某种脚本攻击。该 javascript 是无辜的，但如果攻击者可以在稍后作为脚本运行的字段中输入数据，那将是严重的安全威胁。

# http - HTTP 1.1 Transfer-Encoding:chunked 每次打开新的 TCP 套接字

> ID：14229894
> 
> 赞同：1
> 
> 时间：2013-01-09T06:59:58.310
> 
> 标签：http, http-headers, transfer-encoding

**使用的协议**：HTTP 1.1

**标头包括**“传输编码：分块”

在发送包含“传输编码：分块”的后续请求（向同一服务器发送相同请求）时，我看到为每个请求打开了新的 TCP 套接字。

请求不应该使用同一个套接字吗？为什么套接字每次都被终止？

**注意：** 使用 fiddler 发送的请求

# java - JMS 集群：主动/被动

> ID：14229900
> 
> 赞同：0
> 
> 时间：2013-01-09T07:00:38.640
> 
> 标签：java, jms

我们使用独立的集群 JMS 服务器托管集群应用程序服务器。应用程序服务器是主动/主动和负载平衡，而 JMS 服务器是主动/被动（共享存储）并使用操作系统集群。这意味着从客户端的角度来看，每个端点只有一个端点。

现在我们的任务是连接到外部 JMS 集群（主动/被动），但他们似乎希望我们在 JMS 客户端中实现故障转移，换句话说：如果可能，连接到主节点，必要时故障转移到辅助节点。

冒着听起来无知的风险，我从未见过这样的设置，但一些谷歌搜索似乎表明这似乎或多或少是 JMS 的标准做法。

那么我的问题是：如果您愿意，为什么 JMS 提供者似乎更喜欢“客户端集群”，而不是经典的负载平衡或其他服务器端集群方法？真的是行业标准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:38:03.870

现在我使用 MySQL Cluster 运行多个 Open MQ，请参阅此链接 (http://mq.java.net/OpenMQ_MySQLCluster_Setup_Guide.html)

对于此服务器拓扑，如果您在 EJB 容器上运行，您可以连接到任何节点（代理 1、代理 2），只需配置（取决于您使用的中间层）当某个节点死亡时，它将由容器自动切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:26:03.523

我只在 JMS 中使用过主动/主动集群，其中两台服务器都获取每条消息（它们相互交谈以保持同步）。他们没有共享磁盘子系统，因为它们位于不同的数据中心。客户端配置有两台服务器，但一次只连接一台。（通常是本地 JMS 服务器）故障转移对客户端是透明的。

我还看到了具有两台本地服务器和一台非本地服务器的配置，因此一台服务器的故障不需要通过 WAN 连接到另一个数据中心。我自己没有设置这样的配置。

对于系统管理员来说，使用共享存储听起来很酷，但缺点是它对软件不太透明。如果您有一个应用程序支持自己的故障转移，那么恕我直言。即，如果服务没有故障转移，我只会使用共享存储。

# c# - 我们可以在 asp.net 中对 global.asax 进行单元测试吗？

> ID：14229905
> 
> 赞同：8
> 
> 时间：2013-01-09T07:00:55.677
> 
> 标签：c#, .net, nunit, rhino-mocks, global-asax

我正在做单元测试。我不知道如何在asp.net 中对global.asax 进行单元测试。ASP.NET 中的 global.asax 是否属于单元测试覆盖范围？还有包含系统变量的应用程序安装程序类。我应该测试它们吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T07:14:06.317

你可以。但你不应该。单元测试，顾名思义，就是测试单元。global.asax 或系统配置中的代码不是一个单元。对这些东西的测试将与代码紧密耦合，并且当您更改不相关的东西时总是会给您错误的失败，因此不值得。应用程序测试中还有其他相关的级别：集成测试、自动化等。您不应该将所有内容都放入“单元测试”中，而应仅将其放入定义良好的单个部分中。例如，您也不会对 web.config 或 DI 容器配置进行单元测试，而是在另一个级别上测试它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T07:25:49.563

我对此的立场是，您不必在 global.asax 中对代码进行单元测试。

主要原因是那里不应该有比声明和接线代码更多的东西。正如 Peter Porfy 已经说过的，该代码应该在集成测试中进行测试。

如果您在 global.asax 中发现任何值得单元测试的逻辑，您可能应该将其分解并单独测试这些类。

# c# - 如何在 C# 中使用 PrintCapabilities 类

> ID：14229908
> 
> 赞同：0
> 
> 时间：2013-01-09T07:00:58.313
> 
> 标签：c#, printing, intercept

我正在尝试拦截打印机作业并更改打印作业的属性。我可以拦截打印作业并获取有关它的信息。我为此关注了这篇文章

[http://www.codeproject.com/Questions/423178/printing-order-intercept-with-csharp](http://www.codeproject.com/Questions/423178/printing-order-intercept-with-csharp)

现在我想更改打印作业的纸张尺寸，为此我找到了这篇文章

[http://social.msdn.microsoft.com/Forums/en/windowsxps/thread/8af6ba92-5d2c-444b-91f4-a8747739c1b7](http://social.msdn.microsoft.com/Forums/en/windowsxps/thread/8af6ba92-5d2c-444b-91f4-a8747739c1b7)

但问题是我无法创建类 PrintCapabilities。我错过了什么吗？请帮忙。

我当前的代码如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management;
using System.Printing;

namespace PrintJob
{
    class EvenWatch
    {
        private ManagementEventWatcher manEWatch;

        public EvenWatch(string host)
        {

            System.Management.ManagementScope oMs = new System.Management
            .ManagementScope(@"\\" + host + @"\root\cimv2");
            oMs.Connect();
            manEWatch = new ManagementEventWatcher(oMs, new EventQuery("SELECT * FROM    __InstanceCreationEvent WITHIN 0.1 WHERE TargetInstance ISA 'Win32_PrintJob'"));

            manEWatch.EventArrived += new EventArrivedEventHandler(
            mewPrintJobs_EventArrived);
            manEWatch.Start();
        }

        static void mewPrintJobs_EventArrived(object sender, EventArrivedEventArgs e)
        {
            foreach (PropertyData prop in e.NewEvent.Properties)
            {
                string val = prop.Value == null ? "null" : prop.Value.ToString();

            }

            ManagementBaseObject printJob = (ManagementBaseObject)e.NewEvent.Properties["TargetInstance"].Value;
            string v = "";
            foreach (PropertyData propp in printJob.Properties)
            {
                string name = propp.Name;
                string val = propp.Value == null ? "null" : propp.Value.ToString();
                val += "\n";
                v += name + ":" + val;

            }

            PrintQueue printerSpooler = null;
            printerSpooler = new PrintQueue(new PrintServer(), "EPSON LQ-300+ /II ESC/P 2");
            PrintJobSettings printJobSetting = printerSpooler.CurrentJobSettings;
            string desc = printJobSetting.Description;

            //printerSpooler.CurrentJobSettings.CurrentPrintTicket

            Console.WriteLine("-------");
            Console.WriteLine(v);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:51:03.880

我真的找到了答案。如果您使用的是 4.0，您还应该引用 ReachFramework.dll，一旦您这样做了，魔法确实发生了 :)

# macos - 在 Mac OS X 上的 .sh 文件中使用 sed

> ID：14229910
> 
> 赞同：1
> 
> 时间：2013-01-09T07:01:03.693
> 
> 标签：macos, bash, scripting, sed, terminal

我正在尝试使用命令行解析一些文本文件。其中一部分涉及在一些格式错误的电子邮件中重新附加损坏的单词。一个例子：

```
9,650 330,765.0  16.38% NYSE (000) 1,707,915 272,099.0  18.95%     Commodit=
ies Close Change % Change Crude Oil (Feb) 19.62 0.32  1.66% Heating Oil (Ja= 
```

我想抢“商品”。我正在使用此[解决方法](https://stackoverflow.com/questions/1251999/sed-how-can-i-replace-a-newline-n)来 sed 完成工作。

我正在使用 Mac OS X 10.7 和 GNU sed 4.2.1 版。如果在命令行我输入

```
sed ':a;N;$!ba;s/=\r\n//g' ./filename 
```

sed 工作正常。但是，如果我运行这个 bash 脚本：

```
#!/bin/bash

sed ':a;N;$!ba;s/=\r\n//g' filename 
```

sed 不起作用。但是，相同的脚本可以在 Ubuntu 的命令行下运行：

```
9,650 330,765.0  16.38% NYSE (000) 1,707,915 272,099.0  18.95%     Commodities Close Change % Change Crude Oil (Feb) 19.62 0.32  1.66% Heating Oil (Jan) 
```

在我的 Mac 上，更简单的脚本

```
#!/bin/bash

sed 's/=//g' filename 
```

成功删除所有等号。我正在尝试不同的字符组合来反斜杠，但没有太大成功。Mac终端不喜欢什么的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:47:12.790

这很可能是 PATH 设置。`/bin/bash` 使用默认值`$PATH`；不知道为什么，但这可能取决于您的正常工作外壳（是那个 bash），或者您的 PATH 设置在哪个点文件中。

OS X 带有它自己的 (BSD) sed，它与 GNU 不同，因此不起作用。运行`sed`脚本中的命令将选择 BSD sed，而不是您自行安装的 GNU sed。在脚本中使用 sed 的完整路径，或者之前在脚本中设置 $PATH。显然，您在 Ubuntu 上没有问题，因为默认`sed`是 GNU。

# java - 使用数组初始化语法有条件地添加“可选项目”？

> ID：14229912
> 
> 赞同：6
> 
> 时间：2013-01-09T07:01:27.243
> 
> 标签：java, arrays, if-statement, syntax, array-initialization

我想知道我是否可以在这里轻松地有一个 if 语句：

```
public Object[] tableItemFromVisit(Visit visit, boolean editable) {
    return new Object[] {
            visit.getIdVisit(),
            visit.getProfession().getProfessionName(),
            visit.getSpiProfessional().getFullName(),
            RegularFunctions.getTimeFormat().format(visit.getVisitDate()),
            RegularFunctions.toNormalCapitalizedText(visit.getVisitState()
                    .toString()), visit.getReason(), 
            if (editable) { "Edit" }, 
            };
} 
```

这个结构怎么叫？数组规范还是什么？无论如何，如果变量“可编辑”为真，它必须有一个“编辑”字符串，如果它是假的，它不需要任何东西......显然我不想写两个太相似的返回语句彼此...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:08:08.933

将上述数组构造为 an`ArrayList`并返回其`toArray`?

这个想法的本质是做这样的事情。

```
ArrayList<Object> ret = new ArrayList<Object>(new Object[] {
            visit.getIdVisit(),
            visit.getProfession().getProfessionName(),
            visit.getSpiProfessional().getFullName(),
            RegularFunctions.getTimeFormat().format(visit.getVisitDate()),
            RegularFunctions.toNormalCapitalizedText(visit.getVisitState()
                    .toString()), visit.getReason()
            // don't add Edit item at all yet
            })

if(editable)
     ret.add("Edit");

return ret.toArray(); 
```

我不确定这种初始化是否有效，如果没有`Arrays.toList`也可以使用，或者只是一个一个添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:04:51.547

使用提供的构造传递额外参数是不可能的。您可以通过以下方式之一修改您的代码：

尝试[三元运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)：

```
editable ? "Edit" : "" 
```

或者

```
editable ? "Edit" : null 
```

* * *

```
if(editable)
{
    return new Object[] {
        visit.getIdVisit(),
        visit.getProfession().getProfessionName(),
        visit.getSpiProfessional().getFullName(),
        RegularFunctions.getTimeFormat().format(visit.getVisitDate()),
        RegularFunctions.toNormalCapitalizedText(visit.getVisitState()
                .toString()), visit.getReason(), 
        "Edit" }
}
else
{
return new Object[] {
        visit.getIdVisit(),
        visit.getProfession().getProfessionName(),
        visit.getSpiProfessional().getFullName(),
        RegularFunctions.getTimeFormat().format(visit.getVisitDate()),
        RegularFunctions.toNormalCapitalizedText(visit.getVisitState()
                .toString()), visit.getReason(), 
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:03:53.253

如果我理解正确，如果为真，您希望返回`Object[]`的具有和额外的元素。`editable`

这在java中是不可能的。

如果`null`可以在那里使用，您可以使用`editable ? "Edit" : null`代替`if (editable) { "Edit" }`，但您可能已经知道这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:06:02.460

看起来您想像这样使用条件运算符：

`editable ? "Edit" : ""` （或者如果你想要它，则为 null）。

**显然**，它有额外的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T07:13:28.317

假设您正在尝试创建一个对象来包含有关访问的数据。为什么不想为`if (editable) { "Edit" }`封装创建一个函数并利用它呢？

```
private String getEditFeedback(boolean editable){
  if(editable){
   return "Edit";
  } else {
   return //something
  }
} 
```

然后在你的代码中，

```
 public Object[] tableItemFromVisit(Visit visit, boolean editable) {
        return new Object[] {
                visit.getIdVisit(),
                visit.getProfession().getProfessionName(),
                visit.getSpiProfessional().getFullName(),
                RegularFunctions.getTimeFormat().format(visit.getVisitDate()),
                RegularFunctions.toNormalCapitalizedText(visit.getVisitState()
                        .toString()), visit.getReason(), 
               getEditFeedback(editable), 
                };
    } 
```

# java - 运行 selenium webdriver java 脚本时浏览器窗口落后于其他所有内容

> ID：14229913
> 
> 赞同：0
> 
> 时间：2013-01-09T07:01:31.840
> 
> 标签：java, selenium-webdriver

运行 selenium WebDriver java 脚本时，我的 IE 浏览器出现问题。有一段时间它会在屏幕前面运行，有时它会在屏幕后面运行，系统中打开的任何其他窗口都会出现在前面。这主要影响脚本运行的流程。任何人都可以提出解决方案。谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:00:42.647

使用 IE 驱动程序执行某些操作时，IE 窗口被推到 Z 顺序的底部（到后台）存在一个[已知问题。](http://code.google.com/p/selenium/issues/detail?id=2353)其中包括调用`WebElement.click()`和选择元素中的`<select>`元素。这些问题已在[IEDriverServer.exe](http://code.google.com/p/selenium/source/browse/trunk/cpp/IEDriverServer/CHANGELOG)的 2.26.0.9 中得到纠正。将您的语言绑定和 IEDriverServer.exe 更新到[最新版本](http://code.google.com/p/selenium/downloads/list)（在撰写本文时为 2.28）可能会解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:38:34.113

我已经通过使用 window.focus() 方法在一定程度上解决了这个问题。IE 窗口在屏幕后面的任何地方，我们都必须使用它来将它带回屏幕前面。这是代码片段`((JavascriptExecutor)driver).executeScript("window.focus()");`

谢谢 ：）

# iphone - 如何将 UIImage 堆叠在一起并在 UIKit 中摇摆不定

> ID：14229914
> 
> 赞同：5
> 
> 时间：2013-01-09T07:01:33.610
> 
> 标签：iphone, ios, xcode, uiimage, uikit

我想知道这个应用程序是如何在 UIKit 中叠加 uiimage 和摇摆不定的。

我正在关注这个[xcode：Using a UIImageView subclass with NSTimers](https://stackoverflow.com/questions/13589392/xcode-using-a-uiimageview-subclass-with-nstimers) to have images drop down in random,但是我如何捕捉它并将UIImage堆叠在一起？

![在此处输入图像描述](../Images/e170e27670ccc684b0c10a611e5d5bf6.png)

感谢您的回复...编辑：为清楚起见

[https://www.youtube.com/watch?v=2dpZCoi4xFk](https://www.youtube.com/watch?v=2dpZCoi4xFk) 40 秒以后将显示它如何相互堆叠并与加速度计一起摆动

这将模拟 UIIimageView 的删除

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // set the background color to something COLD
    self.view.backgroundColor = [UIColor colorWithRed:0.0 green:0.5 blue:1.0 alpha:1.0];

    // load our ph image we will use the same image over and over
    phImage = [UIImage imageNamed:@"placeholder.png"];

    // start a timet that will fire 1 times per second
    [NSTimer scheduledTimerWithTimeInterval:(1) target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
}

// Timer event is called whenever the timer fires
- (void)onTimer
{
    // build a view from our ph image
    UIImageView* placeholderView = [[UIImageView alloc] initWithImage:phImage];

    // use the random() function to randomize up our ph attributes
    //int startX = round(random() % 300);
    int startX = round(random() % 275);
    //int endX = round(random() % 300);
    int endX = startX;

    double scale = 1 / round(random() % 100) + 1.0;
    double speed = 1 / round(random() % 50) + 1.0;

    // set the PH start position
    phView.frame = CGRectMake(startX, -100.0, 25.0 * scale, 25.0 * scale);
    phView.alpha = 0.25;

    // put the ph in our main view
    [self.view addSubview:phView];

    [UIView beginAnimations:nil context:phView];
    // set up how fast the ph will fall
    [UIView setAnimationDuration:5 * speed];

    // set the postion where ph will move to
    phView.frame = CGRectMake(endX, 500.0, 25.0 * scale, 25.0 * scale);

    // set a stop callback so we can cleanup the ph when it reaches the
    // end of its animation
    [UIView setAnimationDidStopSelector:@selector(onAnimationComplete:finished:context:)];
    [UIView setAnimationDelegate:self];
    [UIView commitAnimations];

}
- (void)onAnimationComplete:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {

    UIImageView *phView = context;
    [phView removeFromSuperview];
    NSLog(@"[phView retainCount] = %d",[phView retainCount]);

} 
```

感谢您阅读和评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T18:13:52.647

对于堆叠，只需制作一个 UIView 将所有放置的图像保存在一起。

```
UIView *stackView = [UIView new];

-(void) addView: (UIView*) view toStack: (UIView*) stackView
{

    if ([stackView subviews].count > 0)
    {
        CGRect frame = [[[stackView subviews] lastObject] frame];
        view.frame = CGRectOffset(frame, 0, 20);
    }
    [stackView addSubview:view];
} 
```

对于倾斜，设置一个加速度计并使用 x 和 y 来确定倾斜。

```
-(void)configureAccelerometer
{
    UIAccelerometer*  theAccelerometer = [UIAccelerometer sharedAccelerometer];
    theAccelerometer.updateInterval = 0.20;

    theAccelerometer.delegate = self;
    // Delegate events begin immediately.
}

- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
    UIAccelerationValue x, y, z;
    x = acceleration.x;
    y = acceleration.y;

    //[stackView tiltForX: x Y: y]

} 
```

[有关运动事件](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html)的更多信息

对于碰撞检测，您可能可以执行类似的操作

```
if (CGRectIntersectsRect([[[stackView subviews] lastObject] frame], fallingView.frame))
    [self addView: fallingView toStack: stackView]; 
```

# cakephp - 如何在 CakePHP2 框架中集成管理主题？

> ID：14229916
> 
> 赞同：0
> 
> 时间：2013-01-09T07:01:57.293
> 
> 标签：cakephp, themes, integration

我们从 Themeforest 为我们的 Web 应用程序购买了一个管理主题，该应用程序是使用**CakePHP2 框架构建**的。我知道将这个主题集成到**cakephp 框架**中的基本方法，我们将各自`JS, CSS files`放在 webroot 文件夹下并创建布局以包含这些文件。

这种方法确实给了我想要的结果，但我觉得这不是将主题集成到**MVC**架构中的最佳方式。因为它并不总是工作，例如，如果我只想使用下载主题的外观和感觉并使用 Cakephp 的分页方法，它不能无缝工作，然后我需要继续调整 UI。因此，我认为必须有一个最佳实践来整合这些主题。如果有更好的方法来进行这种集成，谁能建议我？

我试图在互联网上搜索此类文章，但没有找到任何合适的文章。如果您知道或建议任何更好的方法，您能给我指一个吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:31:26.783

听起来您已经正确集成了您购买的主题。

因为您购买的主题不是作为 CakePHP 主题创建的，所以 CSS 不太可能匹配。这就是导致您的某些功能无法正确显示的问题的原因，例如 CakePHP 的分页...分页助手将 HTML 广告到 CakePHP 中的视图，这很可能不会被您的**一般**html 主题覆盖。

对于您发现与预期不符的任何情况，您必须手动将 CSS 添加到主题 CSS 文件中，或者如果幸运的话，只需重命名已有的 CSS 样式即可。

抱歉，除了手动集成缺少的 CSS/HTML 之外，没有简单的方法可以解决此问题。

祝你好运。

# node.js - 找不到模块“../build/Release/node_expat.node”

> ID：14229923
> 
> 赞同：1
> 
> 时间：2013-01-09T07:02:28.383
> 
> 标签：node.js

我正在尝试在 NODE JS 中读取文件 xls 文件，我的示例代码如下

```
var fs = require('fs');
var htmlparser = require("htmlparser");
var office = require('office');

exports.onlyText = function(test) {
test.expect(3);
var handler = new htmlparser.DefaultHandler(function (error, dom) {
    test.ok(!error, error); 
var text =  htmlparser.DomUtils.getElementsByTagName("P",     dom)[0].children[0].raw;
    test.strictEqual(text, '213', 'text data');
    test.done();
});
office.parse(__dirname + '/test.xls', function(err, data) {
    test.ok(!err, err);
    var parser = new htmlparser.Parser(handler);
    parser.parseComplete(data);
});
}; 
```

我不知道我错在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:29:52.777

该错误源自您的节点模块之一（可能是[node-expat](https://github.com/astro/node-expat "节点外派")）。确保 npm 能够正确安装所有模块。

# android - 以编程方式覆盖设备管理应用程序启用过程

> ID：14229924
> 
> 赞同：3
> 
> 时间：2013-01-09T07:02:34.453
> 
> 标签：android, device-admin

> **可能重复：**
> [Google Play Store 上基于服务的 Android 应用程序](https://stackoverflow.com/questions/14229809/service-based-android-application-on-google-play-store)

我正在开发一个使用 Android 设备管理 API 的应用程序。
[http://developer.android.com/training/enterprise/device-management-policy.html#ActivateDeviceAdmin](http://developer.android.com/training/enterprise/device-management-policy.html#ActivateDeviceAdmin)

正如上面链接中提到的**“在执行任何策略之前，用户需要以设备管理员的身份手动激活应用程序。”**

我可以以编程方式覆盖此步骤吗？我希望我的应用程序始终处于启用状态，并且不想依赖用户来启用它。
无论如何，在我的代码中我可以将我的应用程序设置为启用吗？
还是用户干预不可避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:28:25.290

是的，这是不可避免的。
但在那之后，如果你想知道用户正在关闭你的应用程序作为设备管理员，你会得到一个相同的回调（广播）。

在那里你可以做一些逻辑，比如向用户显示一些错误消息和所有内容，以阻止它这样做，显然你不能阻止他这样做。

# c# - EBCDIC 到 ASCII 转换，处理数值

> ID：14229925
> 
> 赞同：3
> 
> 时间：2013-01-09T07:02:37.373
> 
> 标签：c#, .net, ascii, ebcdic

我正在尝试将文件从**ECDIC**转换为**ASCII**格式并遇到了一个有趣的问题。这些文件包含固定长度的记录，其中一些字段是带**符号的二进制整数**（在记录布局中描述为 B4）和**长精度数值**（在记录布局中描述为 L8）。我已经能够毫无问题地转换字符数据，但我不确定如何转换这些数值。从原始系统（[IBM 5110](http://bitsavers.informatik.uni-stuttgart.de/pdf/ibm/5110/SA21-9308-0_IBM_5110_BASIC_Reference_Manual_Jan78.pdf)）的参考手册中，这些字段如下所述。

> B 表示要转换为 BASIC 内部数据格式的定点有符号二进制整数格式的数字数据项的长度（2、4 或 8 字节）。对于记录 I/O 文件输入，记录中接下来的 2、4 或 8 个字节包含一个有符号二进制值，系统将其转换为内部数据格式并分配给 READ FILE 或 REREAD 中指定的变量FILE 语句使用 FORM 语句。

和

> L 表示数值的长精度（8 个字符）。对于输入，此条目表示将在记录中分配一个八位长精度值，而不转换为 READ FILE 或 REREAD FILE 语句中指定的相应数值变量。

编辑：这是我用于转换的代码

```
private void ConvertFile(EbcdicFile file)
{
    if (file == null) return;

    var filePath = Path.Combine(file.Path, file.FileName);
    if (!File.Exists(filePath))
    {
        this.Logger.Info(string.Format("Cannot convert file {0}. It does not exist.", filePath));
        return;
    }

    var ebcdic = Encoding.GetEncoding(37);
    string convertedFilepath = Path.Combine(file.Path, file.ConvertedFileName);
    byte[] fileData = File.ReadAllBytes(filePath);

    if (!file.HasNumericFields)
        File.WriteAllBytes(convertedFilepath, Encoding.Convert(ebcdic, Encoding.ASCII, fileData));
    else
    {
        var convertedFileData = new List<byte>();
        for (int position = 0; position < fileData.Length; position += file.RecordLength)
        {
            var segment = new ArraySegment<byte>(fileData, position, file.RecordLength);
            file.Fields.ForEach(field =>
                {
                    var fieldSegment = segment.Array.Skip(segment.Offset + field.Start - 1).Take(field.Length);
                    if (field.Type.Equals("string", StringComparison.OrdinalIgnoreCase))
                    {
                        convertedFileData.AddRange(
                            Encoding.Convert(ebcdic, Encoding.ASCII, fieldSegment.ToArray())
                            );
                    }
                    else if (field.Type.Equals("B4", StringComparison.OrdinalIgnoreCase))
                    {
                        // Not sure how to convert this field
                    }
                    else if (field.Type.Equals("L8", StringComparison.OrdinalIgnoreCase))
                    {
                        // Not sure how to convert this field
                    }
                });
        }

        File.WriteAllBytes(convertedFilepath, convertedFileData.ToArray());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:02:20.070

您必须首先知道固定记录大小。使用 FileStream.Read() 读取一条记录的字节。然后 Encoding.GetString() 将其转换为字符串。

然后使用 String.SubString() 从记录中找出字段。B4 只是一个长度为 4 的 SubString 调用，L8 的长度为 8。进一步将此类字段转换为使用 Decimal.Parse() 的数字。您可能需要对结果进行除法，不清楚使用的是什么定点乘数。100的赔率很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:14:44.993

好的，所以我想出了如何转换这两个字段。B4 字段非常简单。它们本质上是一个可以转换为整数的 4 字节数组。

```
//The IBM 5110 were big endian machines, so reverse the array 
if (BitConverter.IsLittleEndian)
    Array.Reverse(by);

int value = BitConverter.ToInt32(by, 0); 
```

L8 字段是代表[IBM Double Precision Float](http://en.wikipedia.org/wiki/IBM_Floating_Point_Architecture#Double-precision_64-bit)的 8 字节数组。有很多方法可以将其转换为[IEEE 754 Float](http://en.wikipedia.org/wiki/IEEE_754)。可以在以下位置找到一些示例：

*   [如何从二进制文件中读取 IBM 370 数据](http://support.microsoft.com/kb/235856)
*   [在 IEEE、IBM 或 VAX 浮点数格式和字节表达式之间进行转换](http://www.codeproject.com/Articles/12363/Transform-between-IEEE-IBM-or-VAX-floating-point-n)

这是我根据文章指导使用的版本。

```
private double IbmFloatToDouble(byte[] value)
{
    if (ReferenceEquals(null, value))
        throw new ArgumentNullException("value");

    if (BitConverter.ToInt64(value, 0) == 0)
        return 0;

    int exponentBias = 64;
    int ibmBase = 16;
    double sign = 0.0D;

    int signValue = (value[0] & 0x80) >> 7;
    int exponentValue = (value[0] & 0x7f);
    double fraction1 = (value[1] << 16) + (value[2] << 8) + value[3];
    double fraction2 = (value[4] << 24) + (value[5] << 16) + (value[6] << 8) + value[7];
    double exponent24 = 16777216.0;             // 2^24
    double exponent56 = 72057594037927936.0;    // 2^56

    double mantissa1 = fraction1 / exponent24;
    double mantissa2 = fraction2 / exponent56;
    double mantissa = mantissa1 + mantissa2;
    double exponent = Math.Pow(ibmBase, exponentValue - exponentBias);

    if (signValue == 0) 
        sign = 1.0;
    else 
        sign = -1.0;

    return (sign * mantissa * exponent);
} 
```

# javascript - JavaScript onURLChange

> ID：14229928
> 
> 赞同：1
> 
> 时间：2013-01-09T07:03:07.540
> 
> 标签：javascript, url, onchange

我想当浏览器的 url 改变做某事。如果（url.change）{做某事}

我不想使用 php。只有javascript和html。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:25:07.527

这是做不到的。

您无法从 Javascript 监控对 url 的更改。有一个[window.onblur-event](https://stackoverflow.com/questions/10361188/window-onblur-not-working)，用于监控是否有人离开您的页面。但是您无法确定浏览器中的新 url 是什么或将会是什么。

并且 php 在服务器端工作，因此监视客户端更改不是一种选择。

# ios - iOS 挂起期间的 Socket Disconnect 调用不会断开套接字

> ID：14229937
> 
> 赞同：1
> 
> 时间：2013-01-09T07:03:44.533
> 
> 标签：ios, sockets

我在我的应用程序中使用[GCDAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket/tree/master/GCD)。我有几个问题。

当应用程序进入后台时，我喜欢关闭套接字。在 Suspend applicationDidEnterBackground 调用期间，我执行了以下代码，但它没有断开套接字。（我通过连接的主机检查这个）

```
[asyncSocket setDelegate:nil]; 
[asyncSocket disconnect];
[asyncSocket setDelegate:self]; 
```

一旦我将电话待机，尽管我打电话，插座并没有关闭。60 秒后，iOS 关闭套接字，因为我们处于后台，一切恢复正常，但发送方丢失了 60 秒的数据。我可能没有正确使用 API，但这也可能是一个问题。

下面我的其余代码供参考：

初始化

```
 dispatch_queue_t socketQ = dispatch_queue_create("socketQueue", NULL);
 asyncSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:socketQ];

 if(![asyncSocket connectedPort])
 {
    if (![asyncSocket acceptOnPort:WIFI_BOX_PORT error:&error])
    {
      NSLog(@"Problem with opening Port: %@", error);
    }
    else
   {
       NSLog(@"Port opened, waiting for connection");
    }
 } 
```

# jquery - 单击按钮后，JQuery Ready 功能不起作用

> ID：14229938
> 
> 赞同：0
> 
> 时间：2013-01-09T07:03:43.030
> 
> 标签：jquery

我有一个 JQuery Ready 函数

```
 $(document).ready(function () {
   $('#<%= txtBlockAmount.ClientID %>').keyup(function (e) {            
   $(this).val(addCommasOnKeyPress($('#<%= txtBlockAmount.ClientID %>').val()));
  });

});

function addCommasOnKeyPress(nStr) {
    nStr = nStr.replace(/\,/g, '')
    nStr += '';
    var x = nStr.split('.');
    var x1 = x[0];
    var x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
} 
```

它在页面加载时效果很好。它有一些文本框。它也有下拉列表。当我想通过 Selected DropDown Change 加载以前的值时，它不起作用。有人认识吗？？请回复。

宝石

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:13:15.663

试试这个：

```
var textb = $('#<%=TextBox.ClientID'%>);
$(document).ready(function () {
            textb.keyup(function (e) {            
                this.val(CustomizeFunction(textb.val()));
            });

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:14:47.270

可能，它在回发后失去了 keyup 事件。最好的办法是将它绑定在 .cs page_load 方法中，例如

```
txtBlockAmount.Attributes.Add("onKeyUp", "javascript:onkeyupmethod()"); 
```

你的 js 函数看起来像

```
function onkeyupmethod()
{ 
$('#<%=txtBlockAmount.ClientID'%>).val(addCommasOnKeyPress($('#<%= txtBlockAmount.ClientID %>').val();
} 
```

# ios - iOS map-kit 仅查看地图中的某些区域

> ID：14229949
> 
> 赞同：0
> 
> 时间：2013-01-09T07:04:22.450
> 
> 标签：ios, objective-c, xcode, mkmapview

我是 iOS 地图套件的新手，即使我已经使用以下代码在我的应用程序中加载了 mapview

```
CLLocationCoordinate2D zoomLocation;
zoomLocation.latitude = 39.281516;
zoomLocation.longitude= -76.580806;
 // 2
MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);
// 3
MKCoordinateRegion adjustedRegion = [_mapView regionThatFits:viewRegion];                
// 4
[_mapView setRegion:adjustedRegion animated:YES]; 
```

我想只允许用户在地图上查看**某个地区而不是整个世界**，例如我以美国为例，我想允许用户**在地图上只查看美国**，而他无法查看其他任何地方。必须做什么才能实现这一目标..需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:28:08.230

您需要将缩放级别设置为特定国家或特定地区......我想你必须看看[这个](http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/)......当我陷入这种混乱时，这对我有帮助......我希望这也可能对你有帮助....

# asp.net-mvc - ValidationMessageFor 仅具有模型和 html 属性 - MVC 3

> ID：14229953
> 
> 赞同：18
> 
> 时间：2013-01-09T07:04:39.113
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-validation

处理 MVC 3 应用程序。

我需要在验证消息 html 中添加一个类。我的意思是跨度标签。

我的模特

```
 [Required(ErrorMessage = "Role Name is required")]
 [RegularExpression(@"^[a-zA-Z ]+$", 
     ErrorMessage = "Only alphabets and spaces allowed")]
 public string RoleName { get; set; } 
```

标记

```
 <label for="name">RoleName</label>
  @Html.TextBoxFor(m => m.RoleName)
  @Html.ValidationMessageFor(m => m.RoleName, "some", 
                           new { @class = "immediate" }) 
```

> 但我看不到像 **@Html.ValidationMessageFor(m => m.RoleName, htmlAttributes)**这样的重载方法。如果我给出一些文本，它不会显示我在模型中输入的验证消息。它总是只显示一些文本。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-09T07:11:34.873

你应该能够简单地传入`null`......

`@Html.ValidationMessageFor(m => m.RoleName, null, new { @class = "immediate"})`

# ios - 有没有办法检查 iOS 设备是否被锁定/解锁？

> ID：14229955
> 
> 赞同：14
> 
> 时间：2013-01-09T07:04:50.317
> 
> 标签：ios, gps, sleep, core-location

我在我的应用程序中使用了 GPS 位置更新。我想检测 iOS 设备是否处于睡眠模式，以便我可以关闭 GPS 位置更新并优化电池使用。我已经在 iOS 6 中尝试过 pausesLocationupdates，但它不能按预期工作。我想在设备进入睡眠模式后立即关闭 GPS 位置更新。我想检测设备中的锁定/解锁事件。

有没有办法实现这个功能？

到目前为止，我收到了如下所示的达尔文通知

```
-(void)registerForall
{
    //Screen lock notifications
    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                    NULL, // observer
                                    displayStatusChanged, // callback
                                    CFSTR("com.apple.iokit.hid.displayStatus"), // event name
                                    NULL, // object
                                    CFNotificationSuspensionBehaviorDeliverImmediately);

    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                    NULL, // observer
                                    displayStatusChanged, // callback
                                    CFSTR("com.apple.springboard.lockstate"), // event name
                                    NULL, // object
                                    CFNotificationSuspensionBehaviorDeliverImmediately);

    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                    NULL, // observer
                                    displayStatusChanged, // callback
                                    CFSTR("com.apple.springboard.hasBlankedScreen"), // event name
                                    NULL, // object
                                    CFNotificationSuspensionBehaviorDeliverImmediately);

    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                    NULL, // observer
                                    displayStatusChanged, // callback
                                    CFSTR("com.apple.springboard.lockcomplete"), // event name
                                    NULL, // object
                                    CFNotificationSuspensionBehaviorDeliverImmediately);

}
//call back
static void displayStatusChanged(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo)
{
    NSLog(@"IN Display status changed");
    NSLog(@"Darwin notification NAME = %@",name);

} 
```

当设备被锁定/解锁时，我能够获得 darwin 通知，但真正的问题是如何识别通知是来自锁定还是设备解锁。控制台日志是：

```
 LockDetectDemo[2086] <Warning>: IN Display status changed
 LockDetectDemo[2086] <Warning>: Darwin notification NAME = com.apple.springboard.lockcomplete
 LockDetectDemo[2086] <Warning>: IN Display status changed
 LockDetectDemo[2086] <Warning>: Darwin notification NAME = com.apple.springboard.lockstate
 LockDetectDemo[2086] <Warning>: IN Display status changed
 LockDetectDemo[2086] <Warning>: Darwin notification NAME = com.apple.springboard.hasBlankedScreen
 LockDetectDemo[2086] <Warning>: IN Display status changed
 LockDetectDemo[2086] <Warning>: Darwin notification NAME = com.apple.iokit.hid.displayStatus 
```

任何私有 API 也足够了。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T04:01:50.553

我是这样解决的：

```
//call back
static void displayStatusChanged(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo)
{
    // the "com.apple.springboard.lockcomplete" notification will always come after the "com.apple.springboard.lockstate" notification
    CFStringRef nameCFString = (CFStringRef)name;
    NSString *lockState = (NSString*)nameCFString;
    NSLog(@"Darwin notification NAME = %@",name);

    if([lockState isEqualToString:@"com.apple.springboard.lockcomplete"])
    {
        NSLog(@"DEVICE LOCKED");
        //Logic to disable the GPS
    }
    else
    {
        NSLog(@"LOCK STATUS CHANGED");
        //Logic to enable the GPS
    }
}

-(void)registerforDeviceLockNotif
{
    //Screen lock notifications
    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                    NULL, // observer
                                    displayStatusChanged, // callback
                                    CFSTR("com.apple.springboard.lockcomplete"), // event name
                                    NULL, // object
                                    CFNotificationSuspensionBehaviorDeliverImmediately);

    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                    NULL, // observer
                                    displayStatusChanged, // callback
                                    CFSTR("com.apple.springboard.lockstate"), // event name
                                    NULL, // object
                                    CFNotificationSuspensionBehaviorDeliverImmediately);
} 
```

注意：“ [com.apple.springboard.lockcomplete](http://iphonedevwiki.net/index.php/SpringBoard.app/Notifications) ”通知总是在“com.apple.springboard.lockstate”通知之后

## 更新

从最新版本的 iOS 开始，不再依赖两个通知的**顺序**

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-04-26T03:47:31.193

现在不允许应用程序收听设备锁定通知！

我收到了这个：

> 亲爱的开发者，
> 
> 我们发现您最近提交的“xxxx”存在一个或多个问题。要处理您的提交，必须更正以下问题：
> 
> 不支持的操作 - 不允许应用收听设备锁定通知。
> 
> 纠正这些问题后，使用 Xcode 或 Application Loader 将新的二进制文件上传到 iTunes Connect。在 iTunes Connect 上的我的应用程序的应用程序详细信息页面上选择新的二进制文件，然后单击提交以供审核。
> 
> 问候，
> 
> App Store 团队
> 2017 年 4 月 26 日 10:56

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-24T07:26:27.457

/* 注册应用程序以检测锁定状态 */

```
 -(void)registerAppforDetectLockState {

     int notify_token;
     notify_register_dispatch("com.apple.springboard.lockstate",     &notify_token,dispatch_get_main_queue(), ^(int token) {
     uint64_t state = UINT64_MAX;
     notify_get_state(token, &state);
     if(state == 0) {
        NSLog(@"unlock device");
     } else {
        NSLog(@"lock device");
     }

     NSLog(@"com.apple.springboard.lockstate = %llu", state);
     UILocalNotification *notification = [[UILocalNotification alloc]init];
     notification.repeatInterval = NSDayCalendarUnit;
     [notification setAlertBody:@"Hello world!! I come becoz you lock/unlock your device :)"];
     notification.alertAction = @"View";
     notification.alertAction = @"Yes";
     [notification setFireDate:[NSDate dateWithTimeIntervalSinceNow:1]];
     notification.soundName = UILocalNotificationDefaultSoundName;
     [notification setTimeZone:[NSTimeZone  defaultTimeZone]];

     [[UIApplication sharedApplication] presentLocalNotificationNow:notification];

  });

 } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-05T12:15:03.990

这是一个更好的解决方案

```
#import <notify.h>

#define kNotificationNameDidChangeDisplayStatus                 @"com.apple.iokit.hid.displayStatus"

@interface YourClass ()
{    
    int _notifyTokenForDidChangeDisplayStatus;
}

@property (nonatomic, assign, getter = isDisplayOn) BOOL displayOn;
@property (nonatomic, assign, getter = isRegisteredForDarwinNotifications) BOOL registeredForDarwinNotifications;

@end

- (void)registerForSomeNotifications
{
    //
    // Display notifications
    //

    __weak YourClass *weakSelf = self;

    uint32_t result = notify_register_dispatch(kNotificationNameDidChangeDisplayStatus.UTF8String,
                                               &_notifyTokenForDidChangeDisplayStatus,
                                               dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0l),
                                               ^(int info) {
                                                   __strong YourClass *strongSelf = weakSelf;

                                                   if (strongSelf)
                                                   {
                                                       uint64_t state;
                                                       notify_get_state(_notifyTokenForDidChangeDisplayStatus, &state);

                                                       strongSelf.displayOn = (BOOL)state;
                                                   }
                                               });
    if (result != NOTIFY_STATUS_OK)
    {
        self.registeredForDarwinNotifications = NO;
        return;
    }

    self.registeredForDarwinNotifications = YES;
}

- (void)unregisterFromSomeNotifications
{
    //
    // Display notifications
    //

    uint32_t result = notify_cancel(_notifyTokenForDidChangeDisplayStatus);
    if (result == NOTIFY_STATUS_OK)
    {
        self.registeredForDarwinNotifications = NO;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-01T11:18:41.377

对于您的特定用例，检查屏幕亮度可能很有用。

```
var isScreenLocked: Bool {
    return UIScreen.main.brightness == 0.0
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-04T13:09:05.950

我得到了检查锁定按钮被按下或将应用程序置于后台模式的解决方案。

用于锁定按下的应用程序周期并将应用程序置于后台模式 -

当锁定按下

applicationWillResignActive

applicationDidEnterBackground

解锁时按下

applicationWillEnterForeground

applicationDidBecomeActive

/////////////////// 当放在背景中时

applicationWillResignActive

applicationDidEnterBackground

前台时

applicationWillEnterForeground

applicationDidBecomeActive

您可以在两种情况下观察到相同的方法正在调用。在这种情况下，要按下锁定按钮或将应用程序置于后台是一项艰巨的任务。当我们按下锁定按钮时，会有一个小技巧

applicationWillResignActive

applicationDidEnterBackground

这些方法将立即调用，但是当我们将应用程序置于后台时，两种方法之间存在毫秒的时间间隔。我们可以得到时差并为其设置条件。像....

```
var dateResignActive : Date?
var dateAppDidBack : Date?
func applicationWillResignActive(_ application: UIApplication) {

    dateResignActive = Date()

}
func applicationDidEnterBackground(_ application: UIApplication) {

    dateAppDidBack = Date()

}
func applicationDidBecomeActive(_ application: UIApplication) {

    let el1 = getCurrentMillis(date: dateResignActive!)
    let el2 = getCurrentMillis(date: dateAppDidBack!)
    let diff = el2 - el1

    if diff < 10 { //// device was locked // 10 is aprox
        // device was locked

    }
    else {
        let elapsed = Int(Date().timeIntervalSince(date!))
        if elapsed > 15 { // put app in background
        }
    }

}
func getCurrentMillis(date : Date)->Int64 {
    return Int64(date.timeIntervalSince1970 * 1000)
}

**This code is tested in iPhone X(Notch) and iPhone 6(Home button device). Because notch device and home button device have small difference in above two method calling.** 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-01T23:37:18.887

Jimmy 提供了一个很好的解决方案，但`(__bridge const void *)(self)`作为观察者传入会更安全。

```
CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(),
                                (__bridge const void *)(self),
                                displayStatusChanged,
                                CFSTR("com.apple.springboard.lockcomplete"),
                                NULL,
                                CFNotificationSuspensionBehaviorDeliverImmediately); 
```

这允许您正确删除观察者。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-27T04:29:22.553

> 在使用内容保护的设备上，受保护的文件以加密形式存储，并且仅在特定时间可用，通常是在设备解锁时。此通知让您的应用程序知道设备即将被锁定，并且它当前正在访问的任何受保护文件可能很快就会变得不可用。

您可以订阅[`applicationProtectedDataWillBecomeUnavailable`](https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623019-applicationprotecteddatawillbeco?language=objc)用户刚刚锁定 iPhone 时很可能触发的通知。

我自己从来没有做过，但这只是一个替代解决方案......

# c# - 在 Qt 中编译 C++ 代码以在 C#.Net 中使用

> ID：14229962
> 
> 赞同：0
> 
> 时间：2013-01-09T07:05:26.023
> 
> 标签：c#, qt4, c++-cli

我有用 Qt 库编写的 C++ 代码。我用它编译它，`\clr`当我将“DLL”文件添加到 C# 引用时，我没有在其中声明“dll”的类和命名空间。

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:29:53.840

不知道你的问题有没有解决。您需要创建一个 C++/CLI 类才能在您的 C# 代码中使用它。在此类的代码中，您可以进行非托管调用，但您需要返回托管类型。您可以在 msdn 上找到有关 C++/CLI 和托管/非托管上下文的信息。

# java - 更正数据库中的建模历史记录

> ID：14229965
> 
> 赞同：1
> 
> 时间：2013-01-09T07:05:28.923
> 
> 标签：java, database, hibernate, scala, orm

在我的应用程序中，我有一组在整个应用程序生命周期中保持活动状态的对象，我需要为它们创建一个历史数据库。

这些对象是使用 Hibernate 注释注释的 Java / Scala 类层次结构的实例，我在我的应用程序中使用它们在启动时加载它们。幸运的是，所有类都已经包含时间戳，这意味着我不需要更改对象模型即可创建历史记录。

什么是最合适的方法：

1.  使用 Hibernate 不带注解，提供外部 xml 映射，除了主键（现在是前一个主键 + 时间戳组成的复合键）外，与注解相同

2.  对历史记录使用其他类（这听起来很复杂，因为我确实有一个类层次结构而不是一个类，并且我必须为每种类型的记录子类化我的 HistoricalRecordClass，因为我想重新构建它）。仍然使用休眠

3.  使用完全不同的方法（请不要我不喜欢 ORMS，这只是一个方便的问题）

一些考虑：

存储历史记录的目的是用户可以通过单个 GUI 访问某些数据的实时值或历史值，只需指定日期即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:20:20.623

您打算如何使用历史记录？最简单的解决方案是将它们序列化为 JSON 并将它们记录到文件中。

我从来没有将 hibernate xml 映射与 hibernate 注释结合起来，但如果它有效，它听起来比携带两个并行对象模型更有吸引力。

如果您需要能够在任何时间点重新创建应用程序状态，那么您或多或少会坚持将它们写入数据库（因为快速随机访问）。您可以作弊并拥有一个“历史”表，其中包含 id + 时间戳 + 类型的复合键，然后是一个“json”字段，您只需将其编组并保存即可。这将有助于 a) 携带一个历史表而不是一堆克隆表，并且 b) 如果模式发生变化（即利用 JSON 的开放模式性质），则可以为您提供一些灵活性

但是由于它是具有不同使用模式的存档数据（您只是在读取/写入整个记录），因此我会考虑使用与实时数据相同的严格模式来存储它的其他方法。

这是“一次编写”范式的一个很好的应用……你有可用的 Hadoop 吗？;)

# windows-phone-7 - Windows Phone 上的自定义动态磁贴渲染问题 (7/8)

> ID：14229966
> 
> 赞同：5
> 
> 时间：2013-01-09T07:05:29.190
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, live-tile

在我的 Windows Phone 应用程序的主页中，用户可以单击一个按钮来执行一些操作，这将触发动态磁贴进行更新。

我遇到的问题是，如果用户单击按钮然后真的很快地点击手机的后退按钮，实时磁贴有时无法正确渲染。这个问题很少发生，但它确实发生了，当它发生时它看起来很糟糕......

![在此处输入图像描述](../Images/923cc2e6b24c4e603208e699b16f4944.png)

我实现动态磁贴的方式是，创建一个看起来与动态磁贴完全相同的用户控件，然后将其保存到独立存储中。然后检索它并将其存储在 FliptileData 对象中。最后我在 ShellTile 上调用 Update 方法。请参阅以下代码来演示该过程。

```
 // the function that saves the user control to isolated storage
    public Uri SaveJpegToIsolatedStorage(FrameworkElement tile, string suffix, int tileWidth = 336, int tileHeight = 336)
    {
        var bmp = new WriteableBitmap(tileWidth, tileHeight);

        // Force the content to layout itself properly
        tile.Measure(new Size(tileWidth, tileHeight));
        tile.Arrange(new Rect(0, 0, tileWidth, tileHeight));

        bmp.Render(tile, null);
        bmp.Invalidate();

        // Obtain the virtual store for the application
        IsolatedStorageFile myStore = IsolatedStorageFile.GetUserStoreForApplication();
        using (IsolatedStorageFileStream fileStream = new IsolatedStorageFileStream(IsolatedStorageFileName + suffix, FileMode.Create, myStore))
        {
            try
            {
                bmp.SaveJpeg(fileStream, tileWidth, tileHeight, 0, 100);
            }
            catch (Exception)
            {
                return null;
            }
        }

        return new Uri("isostore:/" + IsolatedStorageFileName + suffix, UriKind.Absolute);
    }

    // save the user control to isolated storage and prepare the FlipTileData object
    wideFrontTileImage = SaveJpegToIsolatedStorage((UserControl)this.WideFrontTile, "_wide_front", 691);
    var flipTileData = new FlipTileData();
    flipTileData.WideBackgroundImage = wideFrontTileImage;
    return flipTileData;

    // update the live tile
   var shellTile = ShellTile.ActiveTiles.FirstOrDefault();
   shellTile.Update(customTile.GetFlipTileData(data.UndoneMemosCount == "0" && data.TotalMemosCount == "0")); 
```

我认为造成这一切的原因是，当用户太快点击返回按钮时，操作系统会终止应用程序中运行的所有进程，并且当时还没有完成渲染。我在想是否有办法知道渲染何时完成，所以我可以取消后退按钮并等到它完成然后手动退出应用程序。但我就是不知道怎么...

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T08:41:08.860

我在我的 WP8 应用程序中遇到了类似的问题。问题是我在 ApplicationDeactivated 事件处理程序中更新了我的 Tile。问题是你不应该在那里更新你的瓷砖，而是在你的 MainPage.OnNavigatedFrom 覆盖。一旦我改变了这个，它工作得很好。

# ios - iOS：AVCaptureStillImageOutput 提供错误的图像输出

> ID：14229968
> 
> 赞同：1
> 
> 时间：2013-01-09T07:05:51.533
> 
> 标签：ios

我正在使用 AVCaptureVideoPreviewLayer 以编程方式启动相机，然后使用以下代码自动拍照。输出的图片分辨率不是很好，比我们通常使用原生相机拍照的方式更亮。这里有什么问题，有人可以帮忙吗？

```
 -(void) capturePicture
{
    // Get all cameras in the application and find the frontal camera.
    AVCaptureDevice *backCamera;
    NSArray *allCameras = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];

    // Find the back camera.
    for ( int i = 0; i < allCameras.count; i++ ) {
        AVCaptureDevice *camera = [allCameras objectAtIndex:i];

        if ( camera.position == AVCaptureDevicePositionBack ) {
            backCamera = camera;
        }
    }

    // If we did not find the camera then do not take picture.
    if ( backCamera != nil ) {
        // Start the process of getting a picture.
        AVCaptureSession *session = [[AVCaptureSession alloc] init];

        // Setup instance of input with back camera and add to session.
        NSError *error;
        AVCaptureDeviceInput *input =
        [AVCaptureDeviceInput deviceInputWithDevice:backCamera error:&error];

        if ( !error && [session canAddInput:input] ) {
            // Add frontal camera to this session.
            [session addInput:input];

            // We need to capture still image.
            AVCaptureStillImageOutput *output = [[AVCaptureStillImageOutput alloc] init];

            // Captured image. settings.
            [output setOutputSettings:
             [[NSDictionary alloc] initWithObjectsAndKeys:AVVideoCodecJPEG,AVVideoCodecKey,nil]];

            if ( [session canAddOutput:output] ) 
            {

                [session addOutput:output];

                AVCaptureConnection *videoConnection = nil;
                for (AVCaptureConnection *connection in output.connections) {
                    for (AVCaptureInputPort *port in [connection inputPorts]) {
                        if ( [[port mediaType] isEqual:AVMediaTypeVideo] ) 
                        {
                            videoConnection = connection;
                            break;
                        }
                    }
                    if (videoConnection) 
                    { 
                        break; 
                    }
                }

                // Finally take the picture
                if ( videoConnection ) 
                {
                    [session startRunning];

                    [output captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error) 
                     {
                         if (imageDataSampleBuffer != NULL) 
                         {
                             NSData *imageData = [AVCaptureStillImageOutput 
                                                  jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
                             UIImage *photo = [[UIImage alloc] initWithData:imageData];

                             UIImageWriteToSavedPhotosAlbum(photo, nil, nil, nil);

                             [session stopRunning];

                             NSInvocation *myInvocation = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:@selector(endScreen)]];
                             [myInvocation setSelector:@selector(endScreen)];
                             [myInvocation setTarget:self];

                             appDelegate.bImageTaken = YES;

                             UIImageWriteToSavedPhotosAlbum(photo, nil, nil, nil);

                             [NSTimer scheduledTimerWithTimeInterval:0.5 invocation:myInvocation repeats:NO]; 
                         }

                     }];

                }
            }
        }
    }

} 
```

# templates - 如何为 cakephp 正确定义两个相似的布局

> ID：14229969
> 
> 赞同：0
> 
> 时间：2013-01-09T07:05:58.657
> 
> 标签：templates, cakephp

我正在使用 CakePHP 2.2.4 并且有类似的布局。然而，对于一页来说，`<head>`内容是相同的，但本质上是整个正文不同。我所拥有的是一个带有导航栏的网站，该导航栏来自 twitter 的引导程序。在这一页上，导航栏完全不同。我知道快速解决方法是为该页面创建一个布局，但是如果我遇到另一个需要使用不同导航栏制作的页面怎么办？这样做的“正确” MVC 方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:19:57.987

我想这取决于差异的复杂程度。

一种方法是拥有一个通用的布局文件

```
 // in app/View/Common/layout.ctp

    <!DOCTYPE html>
    <html lang="en">
    <head>

<!-- Your header content -->

</head>

<body>

    <div id="wrap">
        <div class="navbar">
            <?php echo $this->fetch('menu'); ?>
        </div>
        <div class="container">
            <?php echo $this->fetch('content'); ?>
        </div>
    </div>

    <div id="footer">
        <?php echo $this->fetch('footer'); ?>
    </div>

  </body>
</html> 
```

让你的布局文件扩展它

```
//app/View/Layouts/default.ctp
<?php 
$this->extend('/Common/layout');
$this->assign('menu', $this->element('menu'));
echo $this->fetch('content');
$this->assign('footer', $this->element('footer'));
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:16:11.030

如果每个视图都有某种导航栏，那么您可以只使用[CakePHP Elements](http://book.cakephp.org/2.0/en/views.html#elements)来显示该栏，您可以将元素调用放在您的一个布局文件中，并从控制器设置一个变量，将其传递给元素以显示具体元素...

```
echo $this->element('navbar', array(
    "which_element" => "thisone"
)); 
```

在上面的示例中，您的 navbar.ctp 必须包含所有导航栏并使用[PHP Switch 语句](http://php.net/manual/en/control-structures.switch.php)或其他东西来根据 $which_element...

或者更好的是，只需使用控制器中的变量直接调用元素

```
$this->set('navbar', "thisone"); // this line is in your controller and sets the file name of your nav bar, minus the .ctp extension

echo $this->element($navbar); //this line is in your layout.ctp and renders elements/thisone.ctp, in the above example. 
```

如果有些页面会有导航栏但有些没有，请使用[查看块](http://book.cakephp.org/2.0/en/views.html#using-view-blocks)

```
$this->start('navbar');
echo $this->element($navbar);
$this->end(); 
```

# c# - DatagridView 更改不反映在数据库中

> ID：14229972
> 
> 赞同：2
> 
> 时间：2013-01-09T07:06:05.350
> 
> 标签：c#, winforms, ado.net

我有一个 datagridview，它设置为 EditMode：EditOnKeystroke。当我在网格中编辑数据并单击更新按钮时，更改不会反映在作为该网格数据源的数据库表中。下面给出了加载 dataGridView 并更新它的代码。

```
private void Form_Load(object sender, EventArgs e)
{                
      // TODO: This line of code loads data into the 'pFSDataSet5.Farms' table. You can move, or remove it, as needed.
      this.farmsTableAdapter.Fill(this.pFSDataSet5.Farms);    
}

private void update_Click(object sender, EventArgs e)
{
      //da.Update((DataTable)farmsTableAdapter);
      int s=this.farmsTableAdapter.Update(this.pFSDataSet5.Farms);
      Console.Write(s);

      MessageBox.Show("Successfully Updated");
} 
```

我错过了什么，数据更改不会传播到名为“Farms”的数据库表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-22T14:51:34.503

更改不会反映在您的数据库中，因为您没有关闭编辑 datagridview 。使用这 2 行来关闭 datagridview 编辑：

```
 yourdatagridview.EndEdit();
 ((DataRowView)yourdatagridview.CurrentRow.DataBoundItem).EndEdit(); 
```

然后您可以使用 tableadapter 更新。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:29:51.330

更改不会传播到数据库，因为数据网格和数据集之间没有绑定。

尝试在表单加载时使用数据集表[设置 grid.DataSource 。](https://stackoverflow.com/a/8154945/255523)

# hive - 在 hive-site.xml 中，“javax.jdo.option.ConnectionPassword”我应该给哪个密码？

> ID：14229975
> 
> 赞同：1
> 
> 时间：2013-01-09T07:06:16.723
> 
> 标签：hive

在 hive-site.xml(hive-0.9.0) 中，我有 2 个属性

1)`javax.jdo.option.ConnectionUserName`

2)`javax.jdo.option.ConnectionPassword`

这些有什么作用？，我应该提供哪个用户名和密码？它们与 root/mysql 有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T09:48:07.420

除此之外`javax.jdo.option.ConnectionURL`，`javax.jdo.ConnectionDriver`它们旨在连接到 Hive 的元存储。您打算使用 MySQL 或其他数据库作为元存储吗？如果您不使用 Hive 的标准元存储 (Derby)，则只需要设置这些。

`hive-site.xml`使用 MySQL 时如何设置的示例：

```
 <property>
    <name>javax.jdo.option.ConnectionURL</name>
    <value>jdbc:mysql://localhost:3306/<databasename></value>
 </property>
 <property>
    <name>avax.jdo.ConnectionDriver</name>
    <value>com.mysql.jdbc.Driver</value>
 </property>
 <property>
    <name>javax.jdo.option.ConnectionUserName</name>
    <value><your database user></value>
 </property>
 <property>
    <name>javax.jdo.option.ConnectionPassword</name>
    <value><your database user password></value>
 </property> 
```

如果您确实打算将另一个数据库作为元存储运行，请不要忘记创建一个数据库并在`$HIVE_HOME/scripts/metastore/upgrade/`.

在我看来，最简单的方法是首先在 MySQL shell 中创建你的数据库，然后退出 shell 并从你的 shell 中使用这个命令：`mysql -u <username> -p -h <host> <databasename> < <sql script>`

顺便说一句，我认为最好创建一个 Hadoop 特定的数据库用户，而不是使用你的 root 用户。

# facebook-graph-api - 用户在 Facebook 帖子上发表评论的个人资料图片

> ID：14229977
> 
> 赞同：-1
> 
> 时间：2013-01-09T07:06:24.117
> 
> 标签：facebook-graph-api

如何通过单个图形 api 调用检索带有用户的 commnts 和个人资料图片的 facebook 帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:46:43.363

为此，您必须使用[批处理请求](https://developers.facebook.com/docs/reference/api/batch/)，第一个请求获取评论，第二个请求使用其结果获取图片。

您应该为`batch`请求提供参数，如下所示：

```
batch=[
    { 
        "method":"GET",
        "name":"get-comments","relative_url":"<SOME POST ID>/comments",
    },
    {
        "method":"GET",
        "relative_url":"?ids={result=get-comments:$.data.*.from.id}&fields=picture"
    }
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:04:21.297

*如果您有评论*`user_id`者的，则无需获取图像。

 *获取头像的网址是

> [http://graph.facebook.com/{user_id}/picture](http://graph.facebook.com/%7Buser_id%7D/picture)

实际上，您可以使用图形 API 获取三种类型的头像。那是，

> 1.  [http://graph.facebook.com/{user_id}/picture?type=small](http://graph.facebook.com/%7Buser_id%7D/picture?type=small)
> 2.  [http://graph.facebook.com/{user_id}/picture?type=square](http://graph.facebook.com/%7Buser_id%7D/picture?type=square)
> 3.  [http://graph.facebook.com/{user_id}/picture?type=large](http://graph.facebook.com/%7Buser_id%7D/picture?type=large)

PS：我想这些类型是不言自明的。*

# android - 从 Android 网络视图历史记录中删除/擦除特定的 url？

> ID：14229978
> 
> 赞同：8
> 
> 时间：2013-01-09T07:06:35.647
> 
> 标签：android, android-webview

是否可以从 android 的 webview 历史记录中删除特定的 url？我用谷歌搜索了很多，但找不到任何 sol，即使我检查了 api 的文档，我认为没有直接的方法可以做到这一点。看看下面的代码：

```
// getting the whole list of web view's history....
WebBackForwardList list = wv.copyBackForwardList();
// getting previuous item/link 
String lastUrl = list.getItemAtIndex(list.getCurrentIndex()-1).getUrl(); 
```

从第二行代码很明显可以玩弄历史，所以我认为必须有某种方法或技巧从网络视图历史中删除特定链接。这对你们有意义吗？

任何代码片段或任何链接都将受到高度赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:42:34.717

Well, not sure if you actually can play around with the back forward list. I would assume it's a copy - at least that's what the name suggest.

However, you can manipulate the back stepping to some degree. In my case I exit the application already when user tries to step back from second page towards first page.

```
 @Override
  public boolean dispatchKeyEvent(KeyEvent event) {
    int action = event.getAction();
    int keyCode = event.getKeyCode();
    switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
            if ((action == KeyEvent.ACTION_DOWN) && myWebView.canGoBack() ) {
                WebBackForwardList list = myWebView.copyBackForwardList();
                String lastUrl = list.getItemAtIndex(list.getCurrentIndex()-1).getUrl().toString();

                // Exit if index == 1, i.e. currently on 2nd page
                if (list.getCurrentIndex() == 1) {
                    finish();
                } else ... 
```

You could step over also other other pages by combining stuff from above and overloading url loading:

```
 @Override
            public boolean shouldOverrideUrlLoading(WebView  view, String  url){
                 view.loadUrl(url);
                 return true;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-08T07:45:12.060

问题和答案都帮助我们找到了解决我们问题的以下解决方案。

我们想跳回到特定的 url (partialUrl)，它可以在 WebBackForwardList 中的任何位置。所以我们使用下面的代码去返回或转发，基于ValueString参数传入的部分Url。（我们想从任何其他线程调用该方法，所以使用 runOnUiThread ）

```
if (!theValueString.isEmpty()) {
    final String partialUrl = theValueString;
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            // getting the whole list of web view's history....
            WebBackForwardList list = myWebview.copyBackForwardList();
            int index = list.getCurrentIndex();
            for (int i = list.getSize() - 1; i >= 0; i--) {
                String historyurl = list.getItemAtIndex(i).getUrl();
                if (historyurl.contains(partialUrl)) {
                    myWebview.goBackOrForward(i - index);
                    break;
                }
            }
        }
    });
} 
```

# java - 如何在 GWT 中使用外部服务器端 jar？

> ID：14229981
> 
> 赞同：5
> 
> 时间：2013-01-09T07:06:44.553
> 
> 标签：java, gwt, jsoup

我想在 GWT 服务器端代码上使用 jSoup 来抓取网页。GWT 的文档对安装外部 jar 没有帮助。谁能告诉我如何在 GWT 中安装 jSoup jar（从官方 jSoup 站点下载）并在服务器端代码中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:18:15.237

通过使用 Eclipse，您可以执行以下操作：

1.  下载 jsoup.jar
2.  将文件复制到项目WEB-INF/lib的lib库中
3.  右键单击eclipse Refresh内的lib文件夹以查看新库。
4.  将库添加到类路径：右键单击项目 -> 构建路径 -> 配置构建路径 -> 添加外部 jar。浏览并添加 jar
5.  在任何服务器端类中编写 import jsoup 语句，您就可以像往常一样使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:09:19.747

如果您通过简单的 GPE eclipse 项目使用它，请将其保存在 WEB-INF/lib 中。

如果您通过 Maven GPE eclipse 项目使用它，则在依赖项中添加到运行时类路径范围。

**上述任一场景中的客户端服务器交互：**

第 1 步 - 用于请求处理 URL 的 RPC 调用。

第 2 步 - RPC 服务器端代码，即用于请求和抓取 url [http://vjdef.com/home/2011/06/scraping-html-using-java-servlets-and-tagsoup/的 servlet](http://vjdef.com/home/2011/06/scraping-html-using-java-servlets-and-tagsoup/)

第 3 步 - RPC 服务器端代码将所需的消息后处理发送回客户端。

第 4 步 - 第 1 步 RPC 调用的 onSucess 回调将收到消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T09:35:20.027

如果要使用外部 jar，请按照以下步骤操作

1.  下载罐子
2.  复制该 jar 并粘贴到 lib 文件夹。（如果您没有 lib 文件夹，请在根目录中创建一个 lib 文件夹）
3.  单击构建路径-> 配置构建路径-> 库-> 添加 JAR，然后从 lib 文件夹中选择 jar。
4.  单击订购和支持，然后勾选您添加的罐子
5.  点击确定

现在你可以像其他罐子一样使用它了。

# c# - 在 .net 中重命名第三方 dll

> ID：14229982
> 
> 赞同：8
> 
> 时间：2013-01-09T07:07:00.513
> 
> 标签：c#, .net, dll

我使用名为“DocumentHashcode”的控制台应用程序创建了一个工具，其中我使用了第三方 DLL - `DocumentFormat.OpenXml.dll`.

当我要部署它时，我正在使用`DocumentHashcode.exe`和`DocumentFormat.OpenXml.dll`运行应用程序。

我想重命名`DocumentFormat.OpenXml.dll`为`CATBldHashCodeSupporterDll.dll`. 谁能建议如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-05T15:40:29.600

您需要手动加载程序集。最简单的方法是在 JITer 尝试加载 DocumentFormat.OpenXml 命名空间之前加载它。您可以像这样手动加载它：

```
var dllPath = Path.Combine(Directory.GetCurrentDirectory(), "reNamed.dll");
Assembly.LoadFile(dllPath); 
```

或者，您可以收听[AppDomain.AssemblyResolve 事件](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve%28v=vs.110%29.aspx)，一旦 JITer 找不到它，您就有机会加载重命名的 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T12:22:43.110

您也可以尝试使用新名称重新组装 DLL 文件。有关详细信息，请查看 Stackoverflow 中的最后一个答案：[重命名 ICsharcode-dll](https://stackoverflow.com/questions/4683913/renaming-icsharpcode-sharpziplib-dll)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-25T18:52:33.607

如果你不介意弄脏一点，你可以使用文本编辑器来修改你的 .csproj 文件。例如，如果您的 .dll 是 xr-CommInterop.dll，您应该找到一些 XML，例如：

```
<Reference Include="xr-CommInterop, Version=3.0.0.0, Culture=neutral, processorArchitecture=AMD64">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>C:\Mypath\xr-CommInterop.dll</HintPath>
</Reference> 
```

如果您将第一个 xr-CommInterop（在 Reference Include="... 中）更改为仅 CommInterop 并重新加载项目，您会发现该引用现在具有不同的名称。

# .net - 如何使用 asp.net,c# 在 Google docs 中打开文档文件

> ID：14229983
> 
> 赞同：0
> 
> 时间：2013-01-09T07:07:10.027
> 
> 标签：.net, c#-4.0

我只想使用谷歌文档在浏览器中打开我的 .docx、.doc、.ppt 等文件，我已经编写了在谷歌文档中上传文档的代码，我还编写了代码来获取我的文档的标题、作者等已在 google doc 上上传的文档....

我想在浏览器中打开上传文档（谷歌文档）......使用.net代码......

这是我上传文件的代码

```
protected void Button2_Click(object sender, System.EventArgs e)
{
DocumentsService myService = new DocumentsService("exampleCo-exampleApp-1");
myService.setUserCredentials("email@gmail.com", "password");
DocumentEntry newEntry = myService.UploadDocument(@"d:\abc.docx", "abc.docx");
} 
```

这是我获取标题和其他信息的代码...

```
 DocumentsService myService = new DocumentsService("exampleCo-exampleApp-1");
        myService.setUserCredentials("email@gmail.com", "password");

        DocumentsListQuery query = new DocumentsListQuery();
        DocumentsFeed feed = myService.Query(query);

        Console.WriteLine("Your docs: ");
        foreach (DocumentEntry entry in feed.Entries)
        {
            Label1.Text = entry.Title.Text;

        } 
```

请建议我...提前谢谢...

# algorithm - 如何正确使用 SpriteBatch 的变换矩阵？

> ID：14229986
> 
> 赞同：1
> 
> 时间：2013-01-09T07:07:19.837
> 
> 标签：algorithm, matrix, xna, 2d, transformation

我是 XNA 的新手，想在它上面开发一个轻量级的 2D 引擎，将实体组织成父子层次结构。我在画孩子的时候会想到矩阵，因为他们的位置、旋转和比例取决于他们的父母。

如果我使用`SpriteBatch.Begin()`，我的矩形可以在屏幕上绘制，但是当我将它们更改为：

```
 this.DrawingMatrix = Matrix.Identity;
        this.SpriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend, SamplerState.LinearClamp, DepthStencilState.None, RasterizerState.CullClockwise, null, this.DrawingMatrix); 
```

什么都没有画了。我什至尝试过`new Matrix()`或`Matrix.CreateTranslation(0, 0, 0)`为`DrawingMatrix`.

我的第一个问题是：为什么它不起作用？我没有使用任何相机或视口。

其次，在绘制实体之前，我调用`PreDraw`来转换矩阵（然后我将在 处重置为原始状态`PostDraw`）：

```
 protected virtual void PreDraw(Engine pEngine)
    {
        pEngine.DrawingMatrix *=
            Matrix.CreateTranslation(this.X, this.Y, 0) *
            Matrix.CreateScale(this.ScaleX, this.ScaleY, 1) *
            Matrix.CreateRotationZ(this.Rotation);
    } 
```

请澄清上述代码的更正。而且我不需要在原点进行缩放，而是在`ScaleCenterX`and `ScaleCenterY`，我该如何实现呢？

**添加**：这是我的引擎绘制过程的示例：

1.  调用这些代码：

    ```
     this.DrawingMatrix = Matrix.CreateTranslation(0, 0, 0);
        this.SpriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend, SamplerState.LinearClamp, DepthStencilState.None, RasterizerState.CullClockwise, null, this.DrawingMatrix); 
    ```

2.  调用`PreDraw()`, 是：

    ```
    protected virtual void PreDraw(Engine pEngine)
    {
        pEngine.DrawingMatrix *=
            Matrix.CreateTranslation(this.X, this.Y, 0) *
            Matrix.CreateScale(this.ScaleX, this.ScaleY, 1) *
            Matrix.CreateRotationZ(this.Rotation);
    } 
    ```

3.  `Draw()`例如，在我的`Rect`课堂上调用：

    ```
    protected override void Draw(Engine pEngine)
    {
        pEngine.SpriteBatch.Draw(pEngine.RectangleTexture, new Rectangle(0, 0, (int)this.Width, (int)this.Height), new Rectangle(0, 0, 1, 1), this.Color);
    } 
    ```

如果我用 替换上面的`Begin`代码`this.SpriteBatch.Begin()`，则矩形绘制正确，所以我猜这是因为矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T17:08:31.430

第一个问题是一个简单的错误：默认为`SpriteBatch`is `CullCounterClockwise`，但您已指定`CullClockwise`导致所有精灵被背面剔除。如果您只想使用默认渲染状态，则可以通过`null`- 您不需要明确指定它们。

（如果您使用负比例，则需要更改剔除模式。）

要回答您的第二个问题：您需要翻译“后退”以将缩放原点（您的`ScaleCenterX`和`ScaleCenterY`）放置在世界原点（0,0）。转换总是发生在 (0,0) 附近。所以通常顺序是：将精灵原点翻译回世界原点，缩放，旋转，翻译以将精灵原点放置在所需的世界位置。

另外，我希望你`PostDraw`没有应用反向转换（你让它听起来像它一样）。这很可能会导致精度问题。您应该保存并恢复矩阵。

# android - 即使在活动之间切换后仍保持附加的 TextViews

> ID：14229988
> 
> 赞同：0
> 
> 时间：2013-01-09T07:07:23.393
> 
> 标签：android, textview

我正在学习制作一个带有一些额外功能的简单短信应用程序。该应用程序发送和接收短信很漂亮，但我遇到的一个问题是当我在应用程序中的活动之间切换时。

例如，在我收到短信后，我点击一个按钮开始一个新的活动，它本质上是一个计算器，它把我带到另一个屏幕。但是当我回到短信页面时，我与对方的所有对话，即第二个模拟器，都消失了。有没有什么办法解决这一问题？

如果需要，我很乐意将代码放在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:12:59.370

看看[共享偏好。这是一个很好的例子。](http://android-er.blogspot.co.at/2011/01/example-of-using-sharedpreferencesedito.html)

# android - 如何制作像 Ainol legend 7 4.0.2 这样的模拟器？

> ID：14229991
> 
> 赞同：-8
> 
> 时间：2013-01-09T07:07:47.623
> 
> 标签：android

我想制作像 ainol legend 7 4.0.2 这样的模拟器来测试我的应用程序。我的应用程序在所有设备中运行，但在 ainol legend 7 4.0.2 设备中无法正常运行。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:25:44.317

您可以为模拟器创建一个 AVD，其精确测量值与 Novo 7" 平板电脑相同。我的 java 代码中的日志行显示与真实平板电脑设备相同的值：

> Ainol Novo 7" 平板电脑**模拟器**：ScaledDensity: 1.0, Density DPI: 160, **width in dp: 800, height in dp: 480**

但是，在模拟器上，您可以将**580dp** x 320 dp 的视图放置到在全屏活动中完全可见。

![在此处输入图像描述](../Images/62be9bae9cd780aba55bad3d7d761948.png)

希望它会帮助你。

# git - Linux内核哪个版本改变了函数参数

> ID：14229994
> 
> 赞同：1
> 
> 时间：2013-01-09T07:07:55.940
> 
> 标签：git, kernel

我正在构建一个必须跨内核版本范围工作的树模块。很少有内部 API 更改需要我使用 #define 来支持这些更改。我想快速找到做出这些更改的确切内核版本。如何使用 git 浏览特定文件/功能更改的历史记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:58:18.083

您可以使用以下

```
git log -S 'function_name' -- path/to/header.h 
```

这将仅列出修改函数的提交`function_name`。最后一次提交很可能是您感兴趣的提交，因此请从日志输出中获取其 SHA1 哈希。

然后您希望第一个版本包含此更改，只需运行

```
git tag --contains <sha1_hash> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:52:14.650

尝试`git blame`在文件上使用。

# javascript - Javascript 中的基本增强类型

> ID：14229995
> 
> 赞同：2
> 
> 时间：2013-01-09T07:07:56.620
> 
> 标签：javascript

我正在尝试关注 Douglas Crockford 的“Javascript: The Good Parts”。在第 4 章中，他谈到了增强类型，我觉得这很令人兴奋。但是，我无法让他的示例代码工作。以下是他如何将整数方法添加到 Number 实例：

```
Function.prototype.method = function (name, func) {
    this.prototype[name] = func;
    return this;
};

Number.method('integer', function (  ) {
    return Math[this < 0 ? 'ceiling' : 'floor'](this);
}); 
```

到目前为止，一切都很好。但这是他如何使用增强方法整数并且它不起作用（至少在 jsFiddle 中不起作用）：

```
document.writeln((-10 / 3).integer(  ));  // -3 
```

但这有效：

```
document.writeln((-3.3).integer(  ));  // -3 
```

有人可以为我解释这里发生了什么吗？它们都是数字类型...

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:14:13.793

`ceiling`应重命名为`ceil`. 可能是书上的错误？

# android - 从 onResume() 打开时，自定义 ProgressBar 不旋转

> ID：14229997
> 
> 赞同：0
> 
> 时间：2013-01-09T07:08:00.773
> 
> 标签：android

我的应用程序中有一个`custom progress bar`。当我打开我的应用程序时，这`Custom ProgressBar`很好用，但在我的应用程序*调用自身*的某些情况下，该`onCreate()`事件不会被调用。

该应用程序从一个`onResume()`事件开始。我创建了一个函数来打开`onResume()`事件中调用的进度条。问题是`custom Progress Bar`打开但不启动`SPINNING`，任务完成后关闭。因此，它看起来好像应用程序正在挂起。

有什么解决方案吗？