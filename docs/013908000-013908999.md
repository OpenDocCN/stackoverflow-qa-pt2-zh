# StackOverflow 问答 13908000-13908999

# jquery - 使用 div 作为网格？

> ID：13908002
> 
> 赞同：1
> 
> 时间：2012-12-17T03:43:47.110
> 
> 标签：jquery, html, css, grid

好的，所以我一直在尝试让 div 系统作为网格工作，并且也可以使用边距。我需要网格中的最后一个 div 没有边距。正如您在我的 jsfiddle 中看到的那样：http: [//jsfiddle.net/kyFBr/](http://jsfiddle.net/kyFBr/)，最后一个 div 右侧有一个边距。

我不能简单地为最后一个显示“图片四”的 div 使用不同的类，因为最终这些数据将从数据库中提取，并且我需要格式化到该 div 更改位置并且另一个出现在其位置时的格式。

对于网格方块，我只能使用“grid1”类。

包含所有网格方块的 div 将其用作 css：

```
div.events {
    width: 970px;
    margin-left: auto;
    margin-right: auto; 
    text-align: left;   
} 
```

而网格的css是：

```
div.grid1 {
width: 219.5px;
    margin-right: 3px;
    float: left;
    padding:10px;
    background-image: url('debut_dark.png'); /*Image From SubtlePatterns.com*/
    margin-bottom: 3px;
} 
```

有人有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T04:23:31.483

很简单

[http://jsfiddle.net/kyFBr/8/](http://jsfiddle.net/kyFBr/8/)

.row 需要 960px，- 6px 的边距 = 954 的 .wrapper 比一些简单的数学：

```
.row{
    width: 960px;
    margin:0 auto;
    text-align: left;     
}

.wrapper{
    color: white;
    width: 954px;
    height: auto;
    margin: 0 3px 3px 3px;
    background-image: url('http://subtlepatterns.subtlepatterns.netdna-cdn.com/patterns/debut_dark.png'); /*Image From SubtlePatterns.com*/
}

.wrapper p{ padding:15px; } /* DON'T USE PADDING ON THE GRID!! but here! inner elements! */

div.grid1 {
    width: 234px; /* MATH + */
    margin: 3px;  /* MATH = 960 */
    float: left;
    background-image: url('http://subtlepatterns.subtlepatterns.netdna-cdn.com/patterns/debut_dark.png'); /*Image From SubtlePatterns.com*/
}

div.grid1 p {  
    text-align: center;
    padding:15px;
} 
```

如果你想继续数学而不是喜欢：

```
.grid1, .grid2{
    position:relative;
    display:inline;
    margin:3px;
    float:left;
    background-image: url('http://subtlepatterns.subtlepatterns.netdna-cdn.com/patterns/debut_dark.png'); /*Image From SubtlePatterns.com*/
}

.grid1 {width: 234px;}
.grid2 {width: 474px;} 
```

**[小提琴示例](http://jsfiddle.net/kyFBr/10/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T04:18:44.667

您遇到的问题是 CSS 在更新的 CSS 3 级属性之前无法计算的结果。您需要的是 :nth-child 并且特别是`:nth-child(4n)`（`n`代表每 4 个，而不仅仅是 4 个）

```
div.grid1:nth-child(4n) {
    margin-right:0px;
} 
```

演示： http: [//jsfiddle.net/tvx7m/2/show](http://jsfiddle.net/tvx7m/2/show)
来源：http: [//jsfiddle.net/tvx7m/2](http://jsfiddle.net/tvx7m/2)

当然，这个解决方案只适用于支持 CSS 级别 3 的现代浏览器。

真正的功劳归于@Frederik（做出回答，我会删除我的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:55:36.857

`.wrapper`将' 宽度更改为：`width: 917px;` 并将`.grid1`'更改`margin-right`为：

```
margin-right: 1px;
margin-left: 2px; 
```

这里：http: [//jsfiddle.net/yentup/kyFBr/5/show/](http://jsfiddle.net/yentup/kyFBr/5/show/)

它完美地排列*！*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T04:09:36.687

除了网格类（一个元素可以有多个类）之外，可以创建类似的类`.last`或者您可以添加的类，将 margin-right 重置为 0。或者使用 CSS3伪选择器。`.omega``:last-child`

对于最后一个孩子，您可能希望将行分组为...行。否则你可以使用 nth-child 来影响每三个元素

或者尝试使用这个漂亮的网格生成器[http://grids.heroku.com/创建 CSS](http://grids.heroku.com/)

# gmail - 获取详细的电子邮件信息 Gmail API

> ID：13908003
> 
> 赞同：0
> 
> 时间：2012-12-17T03:43:49.633
> 
> 标签：gmail, google-api

我可以使用[Gmail API](https://developers.google.com/google-apps/gmail/gmail_inbox_feed)通过 [https://mail.google.com/mail/feed/atom/] 获取未读电子邮件列表。

但是使用它，我只能获得电子邮件的简要信息，例如（收件人、发件人、主题和摘要）。

如果我想获取抄送、密送和附件信息，如何使用 Gmail API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T04:01:36.897

我找不到使用 GMAIL API 获得该功能的方法。所以我使用 IMAP 来使用 Oauth Token 进行身份验证，并改用 IMAP。

# linux - 为父进程保留标准输入

> ID：13908005
> 
> 赞同：1
> 
> 时间：2012-12-17T03:44:10.780
> 
> 标签：linux, gnuplot, pipe, gnome

经过几天的搜索，是时候问了。环境是 Ubuntu 12.04/Gnome。

我正在 ubuntu 机器上开发一些嵌入式代码，并在移植到嵌入式处理器之前在该环境中尽可能多地进行测试。当前例程是实时快速傅立叶变换，我想使用 gnuplot 来显示结果。所以我希望我的测试代码和 gnuplot 同时在前台运行并通过管道进行通信。

我做了通常的 popen() 调用，除了一件事外，它有效。孩子的标准输入（gnuplot）仍然连接到控制台。它与父进程发生争用。父进程需要接收击键来修改其行为。有时父母得到击键，有时 gnuplot 得到。

所以我尝试了 fork/exec 路径。具体来说

```
 pid_t pg = tcgetpgrp(1);    // get process group associated with stdout
        cerr << "pid_t pg = " << pg << endl;
        cerr << "process pid is " << getpid() << endl;

        if (pipe(pipefd) == -1) {// open the pipe
            cerr << "pipe failure" << endl;
            exit(3);
        } // if pipe

        cpid = fork();
        if (cpid == -1) {
            cerr << "fork failure" << endl;
            exit(1);
        }

        if (cpid == 0)  {   // this is the child process

            if (tcsetpgrp(1, pg) == -1) {           // this should set the process associated with stdin (gnuplot) with the
                cerr << "tcsetgrp failed" << endl;  // foreground terminal.
                exit(7);
            }

            close(pipefd[1]);    // close child's writing handle

            if (pipefd[0] != STDIN_FILENO) {    // this changes the file descripter of stdin back to 0
                if ( dup2(pipefd[0], STDIN_FILENO) != STDIN_FILENO) {
                    cerr << "dup2 error on stdin" << endl;
                    exit(6);
                }
            }

            if (execl("/usr/bin/gnuplot", "gnuplot", "-background", "white", "-raise", (char *) NULL)) {                
                cerr << "execl failed" << endl;
                exit(2);
            }  else // if exec
                close(pipefd[0]);   // close parent's reading handle

        } // if cpid

        // back in parent process 
```

正如我所期望的那样，这会触发 gnuplot。我可以看到 gnuplot 像往常一样消耗了一个内核的所有资源。问题是屏幕上没有图表出现。

所以我的问题是，我如何启动一个子进程，将它与控制台完全分离，这样它就不会得到任何击键并让 gnuplot 的输出显示？

# php - 远程服务器的 Xdebug 未连接 - netbeans

> ID：13908010
> 
> 赞同：8
> 
> 时间：2012-12-17T03:44:31.390
> 
> 标签：php, netbeans, virtualbox, xdebug, remote-debugging

我正在尝试在以下场景中使用 XDebug

*   我的电脑 Windows 7，Netbeans 6.9
*   与虚拟 Box 位于同一网络 (Windows 7) 上的计算机上的物理主机
*   虚拟 CentOS 6.2，带有 Apache 服务器 2.2.15 和 PHP 5.3.3
*   我网站的 PHP 代码位于 CentOS 上的共享文件夹中，在 /var/www/html/mysite 中，并且有单独的，可以通过服务器 ip 访问它`192.168.1.240`
*   编辑 C:\Windows\System32\drivers\etc\hosts`192.168.1.240 mysite`
*   可以从我的 Windows 主机上访问 PHP 代码`\\HostIP\html\mysite`，并具有 R/W 权限

我在我的计算机上创建了一个 Netbeans 项目，指向`\\HostIP\html\mysite`. 在项目运行配置中，我有以下内容：

*   运行方式：远程网站
*   项目网址：`http://mysite/`
*   索引文件：index.php（项目中确实存在）

在高级运行配置中：

*   我检查了“默认”
*   我没有碰过代理设置

我的 CentOS VM 上的 php.ini 中有以下内容

```
;extension=xdebug.so
zend_extension="/usr/lib64/php/modules/xdebug.so"
xdebug.remote_enable=on
xdebug.remote_log="/var/log/xdebug.log"
;xdebug.remote_host=192.168.1.31
xdebug.remote_connect_back=1
xdebug.remote_handler=dbgp
xdebug.remote_port=9000 
```

注意：我尝试了配置`extension=xdebug.so`并尝试`xdebug.remote_connect_back=1`使用取消注释进行评论，`xdebug.remote_host=192.168.1.31`这是我的计算机 IP 地址。

所以基本上我有这个图像的所有配置 ![在此处输入图像描述](../Images/f7c852bed6c53ef1136c515aec0bea7d.png)

但仍然无法正常工作！运行后调试器会打开这个 url

```
http://mysite/index.php?XDEBUG_SESSION_START=netbeans-xdebug 
```

什么都不会发生，只是 netbeans 列表等待 Xdebug 连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T21:27:04.573

当我想在远程主机上调试时，我通常必须通过 ssh 隧道将本地 9000 端口转发到远程服务器的本地 9000：

`ssh -R 9000:localhost:9000 username@remote.example.com`

在 windows 上使用 bitvise ssh 客户端或 putty 可以获得相同的效果。

同样在项目设置->运行配置->高级按钮

确保指定项目文件的远程和本地完整路径，以便调试器可以附加（不要担心此屏幕中的端口保留为标准）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T08:51:57.227

我知道这是一篇旧帖子，但它似乎是我今晚遇到最多的帖子。

**NAT 网络**设置是获得最少冲突的方法。在 Windows 7 防火墙中，设置自定义入站规则，以允许 VM 所在的整个 /24 网络 (192.168.202/24) 的入站流量到端口 9000。

我在 php.ini 中的工作 XDebug 设置，使用**2.2.7**和**Netbeans 8.0.2**：

```
zend_extension=xdebug.so

xdebug.remote_enable=1
xdebug.remote_connect_back=1 
xdebug.remote_port=9000
xdebug.idekey="netbeans-xdebug"
xdebug.show_local_vars=0
;xdebug.extended_info=1
xdebug.output_buffering=off
xdebug.remote_log=/var/log/xdebug.log 
```

最后，我想指出 Netbeans**在远程文件 config 中侦听远程地址设置**。快速执行 netstat -an 表明 Netbeans 正在侦听端口 9000，并且在我最初的桥接网络设置中的旧地址上具有 CLOSE_WAIT 状态。*即使更改了项目 URL 和远程连接 IP 地址，并关闭了几个 xdebug 连接，这也从未改变*。只有在关闭 Netbeans 之后，陈旧的连接才会断开。再次启动 Netbeans 后，新的远程服务器 URL 将用于远程 xdebug 连接。

从未讨论过 Netbeans 保持陈旧状态，并且从 IDE 停止 xdebug 连接的能力给人一种重置套接字的错误感觉。

*如果它仍然不起作用，请在 VM 上使用提供的调试客户端，访问带有 "?XDEBUG_SESSION_START=netbeans-xdebug" 附加到 index.php URL 的项目页面，并注意 xdebug 信息进入。至少那时你知道它在本地工作。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T09:01:59.543

尝试为您执行的脚本设置任何断点。当 ide 不遵守“第一行中断”标志时，调试会话可能不会显示。

还要检查 php.ini 中的 xdebug.idekey 属性是否等于 Netbeans 设置中的 ideKey。

# python - 带有 unittest 的 Tornado 应用程序结构

> ID：13908011
> 
> 赞同：3
> 
> 时间：2012-12-17T03:44:43.710
> 
> 标签：python, unit-testing, tornado

带有单元测试的 Tornado 应用程序的正确结构是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:25:14.340

这是一个主观的领域。

我只能在这里为自己说话，但我有一个与“处理程序”和“静态”文件夹处于同一级别的“测试”文件夹。

[Tornado 示例项目](https://github.com/bootandy/tornado_sample/tree/master/sample)

# ajax - 在 src 标记中显示图像，响应文本不是 base64

> ID：13908019
> 
> 赞同：2
> 
> 时间：2012-12-17T03:46:23.097
> 
> 标签：ajax, image, jquery, post

我有一个 POST 请求将图像作为 gif 返回。据我所知，响应不是 base64 编码的文本。那么如何将图像分配给 img 的 src 标签？

我说它不是base64编码的原因是我试图使用它来显示它`data:image/gif;base64,"+ data`，这给我没有结果。

然后我尝试使用 jquery.base64 插件对响应进行编码（但抱怨无效字符）；

响应文本在 fiddler 中看起来像下面的“GIF87a��”，查看响应文本视图。图像视图可以很好地显示图像。

我也无权访问服务器来告诉它以 base64 返回。

任何想法或帮助将不胜感激，也许它是如此简单我错过了它。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T20:22:48.323

这是完全可能的：

这是示例：

```
var req = new XMLHttpRequest;
req.overrideMimeType('text/plain; charset=x-user-defined');
req.open('GET', "http://jonathanleighton.com/images/me.jpg", !1);
req.send(null);
for (var responseText = req.responseText, responseTextLen = responseText.length, binary = "", i = 0; i < responseTextLen; ++i) {
  binary += String.fromCharCode(responseText.charCodeAt(i) & 255)
}
image.src = 'data:image/jpeg;base64,'+window.btoa(binary); 
```

这是来自 Internet 的示例，但确认它有效。'POST' 应该以完全相同的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T08:17:19.570

感谢@xchg.ca 的回答，我能够通过 jquery ajax 调用来做到这一点：

```
$.ajax({
  type: "GET",
  url: "imageURL",
  beforeSend: function (xhr) {
    xhr.overrideMimeType('text/plain; charset=x-user-defined');
  },
  success: function (result, textStatus, jqXHR) {       
    if(result.length < 1){
        alert("The thumbnail doesn't exist");
        $("#thumbnail").attr("src", "data:image/png;base64,");
        return
    }

    var binary = "";
    var responseText = jqXHR.responseText;
    var responseTextLen = responseText.length;

    for ( i = 0; i < responseTextLen; i++ ) {
        binary += String.fromCharCode(responseText.charCodeAt(i) & 255)
    }
    $("#thumbnail").attr("src", "data:image/png;base64,"+btoa(binary));
  },
  error: function(xhr, textStatus, errorThrown){
    alert("Error in getting document "+textStatus);
  } 
}); 
```

# c++ - 如何使用 Phonon 播放具有不断更新的 QBuffer（用于音频文件）的音频文件？

> ID：13908022
> 
> 赞同：1
> 
> 时间：2012-12-17T03:46:35.800
> 
> 标签：c++, qt, cross-platform, audio-streaming

我正在使用 Phonon 播放器播放音频文件。

场景：

1.  **从本地驱动器**播放的文件：正常播放。
2.  **从远程驱动器**播放的文件：由于音频文件位于 USB 设备上，我必须不断更新缓冲区（QBuffer）并同时播放文件。但由于某种原因，该文件没有在 Phonon 播放器中播放。谁能告诉我在缓冲区仍在更新时播放音频文件的正确方法？

//代码

```
Phonon::MediaObject* m_pMediaObject = new Phonon::MediaObject(this); 
Phonon::AudioOutput* audioOutput = new Phonon::AudioOutput(Phonon::MusicCategory, this); 
Phonon::Path path = Phonon::createPath(m_pMediaObject, audioOutput); 
QBuffer m_pBufferLoop = new QBuffer(this);
m_pBufferLoop->open(QIODevice::Append || | QIODevice::ReadWrite);
functionToUpdateBuffer();//updates the buffer dynamically.

m_pMediaObject->setCurrentSource(m_pBufferLoop);

m_pMediaObject->play(); 
```

调用 play() 后什么也没有发生。但是，如果我提供完整的缓冲区，那么相同的代码可以正常工作。

# php - PHP Header : Content-disposition: attachment ，然后 Location: some url

> ID：13908023
> 
> 赞同：4
> 
> 时间：2012-12-17T03:46:36.853
> 
> 标签：php

我的目标是在浏览器发出附件下载后将浏览器重定向到新页面。

```
header("Content-type: text/csv");
header("Cache-Control: no-store, no-cache");
header("Content-disposition: attachment;filename=file.csv");
// csv output logic here

// forward to next page
header("Location: $url"); 
```

是否可以 ？

**更新**：上面的结果

CSV 的最后一行显示 PHP 错误：

> 无法修改标头信息 - 标头已由...发送

这是因为 CSV 逻辑部分修改了行前的内容`header("Location: $url");`

**更新**：我尝试了另一种方法：回显一个包含关键行的小 HTML `<meta http-equiv="refresh" content="0; url=$url" />`（当然`<html>` `<head>` `<body>`，甚至 DOCTYPE 也被回显）。但是，HTML 代码仍然显示在 CSV 内容中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:48:40.593

使用当前代码，不，您不能。您强制浏览器将更多内容下载到 file.csv，以便忽略较新的标题。

但是，看看元刷新的东西。您将能够在页面加载之间添加延迟（以便用户实际看到网页）并在刷新时发送文件以下载。

~~我希望我可以添加一个示例，但我目前在火车上被一些哭泣的婴儿包围，我很无聊。~~

为了防止元标记（和其他 HTML）出现在 CSV 文件内容中，我们可以使用一些 $_GET 值。

```
<?php
if (isset($_GET['dl']) && $_GET['dl'] == '1') {
header("Content-type: text/csv");
header("Cache-Control: no-store, no-cache");
header("Content-disposition: attachment;filename=file.csv");
// csv output logic here
}
else{
?>
web page here, with html, head, title, body, and whatnot tags. 
In the head tag, add this:
<meta http-equiv="refresh" content="5;url=http://my.web.site.com/download.php?dl=1"> 
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:03:33.347

您可以在客户端执行此操作：在新窗口中打开文件下载，然后使用 javascript 重定向当前窗口。

# graphics - 为什么我们在 LCD 驱动程序中需要 vsync 和 hysnc？

> ID：13908026
> 
> 赞同：4
> 
> 时间：2012-12-17T03:46:53.750
> 
> 标签：graphics, framebuffer

我对 android/linux framebuffer 部分有疑问，这就是为什么我们需要 hysnc、vysnc。因为正如我正确记得的那样，这些术语用于 CRT。但是当我们使用 LCD 为什么我们需要这些时，我们可以使用一个简单的信号来指示行/列已完成，为什么我们需要等待一段时间来指示 hsync 和 vsync（时间我的意思是 HBP、HFP、VBP、 VFP）。请清除我对此的怀疑。

# javascript - IE顶部！==这个（窗口）

> ID：13908028
> 
> 赞同：3
> 
> 时间：2012-12-17T03:47:32.877
> 
> 标签：javascript, iframe

为了防止 iframe，我在顶部范围内添加了这段代码（这意味着`this==window`）：

```
if(top!==this)top.location.search="?removeFrame" 
```

这在 IE 以外的所有浏览器中都可以正常工作（在 IE 8 中失败，不断刷新，不确定是否在以后的版本中有效），我认为这是因为 IE`top==this`甚至不考虑主窗口在顶部

如何重写此代码以使其与 IE 兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:51:14.337

尝试改变：

```
if(top!==this)top.location.search="?removeFrame" 
```

到

```
if(top!=this)top.location.search="?removeFrame" 
```

根据[这篇](https://stackoverflow.com/a/4851112/350858)`(===)`文章，我们在比较窗口对象时应该避免使用严格的运算符。

# java - 使用 GUI 设计器时如何在 Intellij IDEA 中设置当前语言环境？

> ID：13908029
> 
> 赞同：1
> 
> 时间：2012-12-17T03:47:38.333
> 
> 标签：java, internationalization, intellij-idea

我正在使用 IntelliJ IDEA 12 开发具有国际化支持的 Java 应用程序。到目前为止，我一直在手动编码，但今天我开始使用 GUI 设计器来加速工作。我使用这些行来设置应用程序语言：

```
currentLocale = new Locale("es", "MX");
messages = ResourceBundle.getBundle("Messages", currentLocale); 
```

但现在我找不到如何`currentLocale`在 GUI 设计器中指定。代码生成器尝试加载应用程序的语言，但它没有指定语言环境：

```
this.$$$loadButtonText$$$(buttonOK, ResourceBundle.getBundle("Messages").getString("General.ok")); 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:23:47.653

您不能在 GUI 设计器中指定它，应[在应用程序代码](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html#setDefault%28java.util.Locale%29)中指定语言环境，如下所示：

```
Locale.setDefault(new Locale(...)); 
```

使用 UI 设计器创建的表单将始终使用默认语言环境，为了使您的应用程序中的语言可配置，您需要编写将根据用户偏好更改默认语言环境的代码。

# java - 从 HttpResponse 的 Web 服务获取响应

> ID：13908030
> 
> 赞同：0
> 
> 时间：2012-12-17T03:47:40.517
> 
> 标签：java, android, web-services, httpresponse, image-uploading

在我的应用程序中，用户可以将图像上传到 PHP 服务器，iOS 版本 100% 工作，本教程用于上传图像的 Android 版本： [教程示例](http://costimuraru.wordpress.com/2011/07/11/android-upload-image-to-a-site-with-a-post-method/)

我正在使用的功能是这样的：

```
public static String sendPost(String url, String imagePath) 
        throws IOException, ClientProtocolException  {
    HttpClient httpclient = new DefaultHttpClient();
    httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION,
                                        HttpVersion.HTTP_1_1);

    HttpPost httppost = new HttpPost(url);
    File file = new File(imagePath);

    MultipartEntity mpEntity = new MultipartEntity();
    ContentBody cbFile = new FileBody(file, "image/jpeg");
    mpEntity.addPart("userfile", cbFile);

    httppost.setEntity(mpEntity);
    //Log.e("executing request " + httppost.getRequestLine());
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity resEntity = response.getEntity();

    //Log.e(""+response.getStatusLine());
    if (resEntity != null) {
        //Log.e(EntityUtils.toString(resEntity));
    }
    if (resEntity != null) {
        resEntity.consumeContent();
    }
    httpclient.getConnectionManager().shutdown();
    return response.toString();

} 
```

> 返回 response.toString(); 在 org.apache.http.message.BasicHttpResponse @ 406dc148 中获取它

但是web服务的返回是图片保存的URL，我需要在PHP服务器的返回中有一个字符串，而不是我上面提到的返回怎么会有呢？

我想要这样的东西（HttpURLConnection）： HttpURLConnection conn; ...

```
String response= "";
Scanner inStream = new Scanner(conn.getInputStream());

while(inStream.hasNextLine())
    response+=(inStream.nextLine());
Log.e("resp", response); 
```

一小时后 onsegui 试图从 Web 服务获得响应如下： ...

```
byte [] responseBody = httppost.getMethod().getBytes(); 
Log.e("RESPONSE BODY",""+(new String(responseBody))); 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:30:05.533

如果响应是字符串类型，试试这个

```
 ResponseHandler<String> responseHandler = new BasicResponseHandler();
  HttpResponse httpResponse = httpClient.execute(post, new BasicHttpContext()); // new BasicHttpContext() not necessary 
// verify connection response status using httpResponse.getStatusLine().getStatusCode() then

  String response =  responseHandler.handleResponse(httpResponse);
  if(response != mull){
     Log.e("Response : "+response);
  }else{
   // Handle exception 
  }
 return response; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:36:26.153

如果你想要 HTTP 服务器返回的内容，你不应该这样做：

```
if (resEntity != null) {
    resEntity.consumeContent();
} 
```

...因为那是说“扔掉内容”。

# c - 分段错误：当缓冲区>4M 时，Ubuntu 中 C 程序中的堆栈分配

> ID：13908033
> 
> 赞同：2
> 
> 时间：2012-12-17T03:47:58.660
> 
> 标签：c, ubuntu, segmentation-fault, heap-memory, stack-memory

这是一个大学任务的小程序：

```
#include <unistd.h>

#ifndef BUFFERSIZE
#define BUFFERSIZE 1
#endif

main()
{
    char buffer[BUFFERSIZE];
    int i;
    int j = BUFFERSIZE;

    i = read(0, buffer, BUFFERSIZE);

    while (i>0)
    {
        write(1, buffer, i);
        i = read(0, buffer, BUFFERSIZE);
    }

    return 0;
} 
```

可以使用 stdio.h fread 和 fwrite 函数代替。

好。我用 25 个不同的缓冲区大小值编译了这两个版本的程序：1、2、4、...、2^i 和 i=0..30

这是我如何编译它的示例：gcc -DBUFERSIZE=8388608 prog_sys.c -o bin/psys.8M

问题：在我的机器上（Ubuntu Precise 64，最后有更多细节）所有版本的程序都可以正常工作：./psys.1M < data

（数据是一个带有 3 行 ascii 文本的小文件。）

问题是：当缓冲区大小为 8MB 或更大时。两个版本（使用系统调用或 clib 函数）都会因这些缓冲区大小而崩溃（分段错误）。

我测试了很多东西。代码的第一个版本是这样的： (...) main() { char buffer[BUFFERSIZE]; 诠释我;

```
 i = read(0, buffer, BUFFERSIZE);
(...) 
```

当我调用读取函数时，这会崩溃。但是对于这些版本：

```
main()
{
    char buffer[BUFFERSIZE]; // SEGMENTATION FAULT HERE
    int i;
    int j = BUFFERSIZE;

    i = read(0, buffer, BUFFERSIZE);

main()
{
    int j = BUFFERSIZE; // SEGMENTATION FAULT HERE
    char buffer[BUFFERSIZE];
    int i;

    i = read(0, buffer, BUFFERSIZE); 
```

它们都在 main 的第一行崩溃（SEGFAULT）。但是，如果我将缓冲区从 main 移到全局范围（因此，在堆中分配而不是在堆栈中），这可以正常工作：

```
char buffer[BUFFERSIZE]; //NOW GLOBAL AND WORKING FINE
main()
{
    int j = BUFFERSIZE;
    int i;

    i = read(0, buffer, BUFFERSIZE); 
```

我使用 Ubuntu Precise 12.04 64 位和英特尔 i5 M 480 第一代。

```
#uname -a
Linux hostname 3.2.0-34-generic #53-Ubuntu SMP Thu Nov 15 10:48:16 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

我不知道堆栈的操作系统限制。有没有办法在堆栈中分配大数据，即使这不是一个好习惯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:56:20.460

我认为这很简单：如果你试图让缓冲区太大，它就会溢出堆栈。

如果你`malloc()`用来分配缓冲区，我敢打赌你不会有问题。

请注意，有一个被调用的函数`alloca()`显式分配堆栈存储。使用`alloca()`与声明堆栈变量几乎相同，只是它发生在程序运行时。阅读手册页`alloca()`或讨论它可能会帮助您了解您的程序出了什么问题。这是一个很好的讨论：

[为什么使用 alloca() 不被认为是好的做法？](https://stackoverflow.com/questions/1018853/why-is-alloca-not-considered-good-practice)

编辑：在评论中，@jim mcnamara 向我们介绍`ulimit`了一个可以检查用户限制的命令行工具。在这台计算机上（运行 Linux Mint 14，因此它应该与 Ubuntu 12.10 具有相同的限制）该`ulimit -s`命令显示堆栈大小限制为：8192 K-bytes，这很好地跟踪了您描述的问题。

编辑：如果不完全清楚，我建议您通过调用来解决问题`malloc()`。另一个可接受的解决方案是静态分配内存，只要您的代码是单线程的，它就可以正常工作。

您应该只对小缓冲区使用堆栈分配，正是因为您不想炸毁堆栈。如果您的缓冲区很大，或者您的代码将多次递归调用一个函数，以便多次分配小缓冲区，您将破坏您的堆栈并且您的代码将崩溃。最糟糕的是你不会得到任何警告：要么没问题，要么你的程序已经崩溃。

唯一的缺点`malloc()`是它比较慢，所以你不想`malloc()`在时间关键的代码中调用。但这对于初始设置很好；一旦 malloc 完成，您分配的缓冲区的地址就是内存中的一个地址，就像程序地址空间中的任何其他内存地址一样。

我特别建议不要编辑系统默认值以使堆栈大小变大，因为这会使您的程序的可移植性大大降低。如果您调用标准 C 库函数，就像`malloc()`您可以轻松地将代码移植到 Windows、Mac、Android 等一样；如果您开始调用系统函数来更改默认堆栈大小，那么移植会遇到更多问题。（你现在可能没有移植这个的计划，但计划会改变！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:30:44.753

Linux 中的堆栈大小经常受到限制。该命令`ulimit -s`将给出当前值，以千字节为单位。您可以更改（通常）文件中的默认值`/etc/security/limits.conf`。您还可以根据权限，通过代码在每个进程的基础上更改它：

```
#include <sys/resource.h>
// ...
struct rlimit x;
if (getrlimit(RLIMIT_STACK, &x) < 0)
    perror("getrlimit");
x.rlim_cur = RLIM_INFINITY;
if (setrlimit(RLIMIT_STACK, &x) < 0)
    perror("setrlimit"); 
```

# delphi - GUI 组件可以获取 GUI 编辑器对齐网格值吗？

> ID：13908037
> 
> 赞同：1
> 
> 时间：2012-12-17T03:48:31.850
> 
> 标签：delphi, user-interface, delphi-xe2

Delphi 的表单编辑器将控件捕捉到网格。组件可以在设计时获取对齐网格大小吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T04:42:51.340

您可以从注册表中读取它。它位于您正在使用的版本中`HKCU\Software\Embarcadero\BDS\10.0\Form Design`（替换`CodeGear`or`Borland`和`5.0`,等）。`8.0`网格大小在`Grid Size X`和中可用`Grid Size Y`，以及是否`SnapToGrid`在 中启用`Snap To Grid`。

# c - 带有 fifo 的线程

> ID：13908042
> 
> 赞同：0
> 
> 时间：2012-12-17T03:49:19.377
> 
> 标签：c, multithreading, ipc, fifo

我有下面的应用程序，其中线程 1 从文件中读取并放入 FIFO，然后线程 2 读取该 FIFO 并处理数据并发送到网络套接字，线程 3 正在从网络套接字接收数据，然后将结果保存到 file2 但有时接收到的数据必须由thread2重新处理，所以问题是最好的办法是什么？我需要再次发送到 FIFO 吗？或者在线程 3 和线程 2 之间有另一个 fifo？或者两者都不是？

File1 --> 线程 1 --> FIFO --> 线程 2 --> 网络套接字

网络套接字 --> 线程 3 --> 文件 2

顺便说一句，以上是我的一个示例，实际程序将有许多线程从 FIFO 读取并发送到网络，不确定以这种方式使用 FIFO 是否会导致延迟或成为瓶颈。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:16:29.270

嗯，

没有使用将监视文件和套接字描述符数组的*选择*系统调用有什么特殊原因吗？这可以简化代码，如下[所示](http://www.outflux.net/blog/archives/2008/03/09/using-select-on-a-fifo/)。

您是在使用 pthreads 还是类似 boost 线程库的东西...

这些线程是否确实是不同的进程......或者这是您使用 pthread_cond_wait() 的所有一个程序？

# xml - 如何在 Commons Digester 的 call-param-rule 中将固定字符串作为参数传递？

> ID：13908044
> 
> 赞同：1
> 
> 时间：2012-12-17T03:49:33.637
> 
> 标签：xml, apache-commons-digester

在使用 Digester 处理 XML 到对象转换的特定标记时，我试图调用一个方法并将字符串作为参数传递给该方法：

```
<pattern value="abc/xyz">
    <object-create-rule classname="com.test.XYZ"/>
    <call-method-rule methodname="setTypeName" paramcount="1" paramtypes="java.lang.String"/>
    <call-param-rule paramnumber="0"/>
</pattern> 
```

这会将 XYZ 中的 typeName 设置为空字符串，但我想将其设置为其他固定字符串（例如“test”）。如何在 call-method-rule 或 call-param-rule 中指定此固定字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T12:35:17.167

有一个`object-param-rule`为此

尝试

```
<pattern value="abc/xyz">
    <object-create-rule classname="com.test.XYZ"/>
    <call-method-rule methodname="setTypeName" paramcount="1" paramtypes="java.lang.String"/>
    <object-param-rule paramnumber="0" type="java.lang.String" value="test" />
</pattern> 
```

# java - jdbc - sql server 在控制台中没有显示任何输出/错误

> ID：13908049
> 
> 赞同：1
> 
> 时间：2012-12-17T03:50:41.343
> 
> 标签：java, jdbc, sql-server-express

我正在尝试使用从我的 Java 应用程序连接到 sql server 2005

```
try{
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String connectionurl = "jdbc:sqlserver://servername\\SQLEXPRESS;" + "database=master";
        Connection con = DriverManager.getConnection(connectionurl);
        System.out.println("Connected to SQL Server");
        String sql = "select * from employee";
        Statement stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery(sql);
        while(rs.next()){
            System.out.println(rs.getString(1) + " " + rs.getString(2));
        }
    }
    catch(Exception e){
        System.out.println(e.getMessage());
    }
} 
```

在执行它时，我在控制台上没有得到任何输出/错误。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:07:25.090

也许员工表中没有记录。或者它抛出一个异常，其 e.getMessage() 返回“”（我不这么认为，但为了避免它，你可以使用 e.printStackTrace() 代替）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:06:50.933

其实，正确答案是……

当您在 sql 提示符中插入记录时，我们必须通过命令 commit 提交该记录；sql>提交；

甚至认为当您插入记录之后，您可以通过命令 select *from table 进行检查；

记录插入成功...记录在那里

但是在我们执行java程序记录时在命令提示符下没有显示....

所以当你插入时提交记录..

谢谢你

# php - 这是上传文件的好过滤器吗？

> ID：13908053
> 
> 赞同：5
> 
> 时间：2012-12-17T03:51:55.617
> 
> 标签：php, security

我有一个网站，用户可以在该网站上将文件上传到子目录。我正在过滤上传检查是否存在潜在的恶意代码。我是安全方面的新手，所以这看起来像是保护上传到服务器的最佳实践吗？如果没有或者我遗漏了什么，你能指出我正确的方向吗？

```
//arrays with acceptable file extensions/types -- default validations set to false
$acceptable_ext = array('jpg', 'JPG', 'jpeg', 'JPEG', 'gif', 'GIF', 'png', 'PNG');
$acceptable_type = array('image/jpeg', 'image/gif', 'image/png');
$validated_ext = 0;
$validated_type = 0;

//validate file extension and type
if($_FILES && $_FILES['file']['name']) {

    $file_info = pathinfo($_FILES['file']['name']);

    //validate extension
    for ($x=0; $x < count($acceptable_ext); $x++) { 
        if($file_info['extension'] == $acceptable_ext[$x]) {
            $validated_ext = 1;
        }
    }
    //validate type
    for ($x=0; $x < count($acceptable_type); $x++) { 
        if($file_info['type'] == $acceptable_type[$x]) {
            $validated_type = 1;
        }
    }
}

if($validated_ext && $validated_type) {
   //upload file to the server blah blah
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:03:55.110

[您可以在此处](https://stackoverflow.com/questions/198346/whats-the-best-way-to-create-a-single-file-upload-form-using-php)查看一些安全配置。

根据链接检查 MIME 类型、ini 配置、.htaccess 等将为您提供额外的安全性或额外的验证。

# fortran - 编译的 fortran 代码在不正确的目录中查找输入参数文件

> ID：13908058
> 
> 赞同：0
> 
> 时间：2012-12-17T03:52:22.233
> 
> 标签：fortran, executable, command-prompt

我在文件夹 E:\TROUBLESHOOT 中有一个已编译的 fortran 90 代码“NewSourceID.exe”。这使用同一文件夹中的输入文件 MAIN.IN。我使用同一文件夹 E:\TROUBLESHOOT 中的批处理脚本 run_sa.BAT 来运行此可执行文件。这个批处理脚本是由另一个 VB 代码在运行时生成的（这是一个要求，不能取消），批处理脚本如下所示。

"E:\TROUBLESHOOT\NewSourceID.exe" "E:\TROUBLESHOOT\MAIN.IN"。

有两种情况 1\. 当我转到文件夹 E:\TROUBLESHOOT 并双击批处理脚本 run_sa.BAT 时，NewSourceID.exe 可以正常运行，没有任何问题。它在显示路径 C:\WINDOWS\system32\command.exe 的命令提示符窗口上运行。

1.  当我通过在运行时生成批处理脚本从 VB 脚本运行相同的脚本时，我收到以下错误。

" C:\Documents and Settings\epsuser\My Documents>"E:\TROUBLESHOOT\NewSourceID.exe" "E:\TROUBLESHOOT\MAIN.IN" forrtl: 严重 (29): 找不到文件，单元 31，文件 C: \Documents and Settings\eps 用户\我的文档\MAIN.IN

代码尝试在路径 C:\Documents and Settings\epsuser\My Documents\MAIN.IN 上查找输入文件 MAIN.IN，这不是查找文件的正确路径。当我用修改过的替换 NewSourceID.exe 时发生了这种情况。早期的代码甚至可以通过以下路径从 VB 中正确运行。C:\WINDOWS\system32\command.exe -E:\TROUBLESHOOT\run_sa.BAT。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:16:56.843

您确定 Fortran 程序 NewSourceID 会读取您传递给它的命令行参数吗？尤其是较旧的 Fortran 程序（在 Fortran 2003 之前）没有解析命令行参数的标准方法。我猜，这个名字`MAIN.IN`在你使用的代码中是硬连线的，它总是使用*当前目录*`MAIN.IN`中的文件。您可以通过在执行程序之前发出更改目录命令来解决此问题。我对 Windows 不是很熟悉，但是类似

 *```
cd E:\TROUBLESHOOT
E:\TROUBLESHOOT\NewSourceID.exe 
```

在您的批处理脚本中可能会起作用。

或者，您可以使用`command_argument_count()`and`get_command_argument()`函数在 Fortran 代码中实现正确的命令行参数解析。为此，您需要一个 Fortran 2003 编译器。*

# parsing - 如何在谷歌阅读器上解析？

> ID：13908061
> 
> 赞同：0
> 
> 时间：2012-12-17T03:52:43.810
> 
> 标签：parsing

我想解析新闻文章。所以，我想使用谷歌阅读器解析。

我使用 httpclient.jar 文件。为了解析，我使用 GetMethod 来获取 Auth_Token。

但我无法获得身份验证令牌

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T23:20:00.557

您需要学习 Google Auth API。试试这个页面：[https](https://developers.google.com/accounts/) ://developers.google.com/accounts/ 。

# vim - VIM：大括号内的缩进和空格

> ID：13908063
> 
> 赞同：2
> 
> 时间：2012-12-17T03:53:14.737
> 
> 标签：vim

由于我一直在进行大量的 javascript 开发，因此我正在尝试找出一种方法来执行以下操作。

给出以下行：

```
var someFunc = function() {}; 
```

进入：

```
var someFunc = function() {
  // proper indenting -- cursor placed here
}; 
```

我想让vim通过按回车键从插入模式执行此操作。重新映射实际间距的输入键很容易，但我发现的问题是检查以确保我在大括号内。

任何帮助都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:39:05.767

有很多方法可以做到这一点。还有许多类似的问题在这里和超级用户。

假设您的光标在那里并且您处于*插入*模式：

```
var someFunc = function() {|}; 
```

这个映射会做你想做的事：

```
inoremap <C-Return> <CR><CR><C-o>k<Tab> 
```

假设您的光标位于该行的其他位置并且您仍处于*插入*模式，则此映射将起作用：

```
inoremap <C-Return> <Esc>$T{i<CR><CR><C-o>k<Tab> 
```

因为它更通用，所以第二个映射将为您的直接问题提供一个很好的解决方案。

但是您也可以使用像[DelimitMate](https://github.com/Raimondi/delimitMate)（还有[其他](http://vim.wikia.com/wiki/Automatically_append_closing_characters#More_advanced_solutions)）这样的插件来插入右括号并为您执行“括号打开”。

片段（SnipMate ( [original](https://github.com/msanders/snipmate.vim) , [fork](https://github.com/garbas/vim-snipmate) ), [UltiSnips](https://github.com/SirVer/ultisnips)和[其他](http://vim.wikia.com/wiki/Category%3aAutomated_Text_Insertion)）也很有用：键入`fun`后跟`<Tabs>`当然是编写完整函数定义存根的好方法。

# actionscript-3 - Flash swf 发布

> ID：13908064
> 
> 赞同：0
> 
> 时间：2012-12-17T03:53:17.073
> 
> 标签：actionscript-3, flash

我在这里遇到了关于 flash+as3 的问题。

我正在制作一个从 XML 文件中获取数据并将其显示在闪存上的应用程序。

现在这是我的问题。

当我预览文件时，一切正常。所有数据都显示在闪存上。当我将它发布到 .exe 文件中时，它也运行良好。显示了所有数据。

但...

当我将它发布到 .swf 文件中时，出现了问题。所有图形图像都已显示，但我从 XML 文件中获得的数据未显示。

但是当我把发布的文件拖到 Flash 中时，一切正常。所有数据都显示出来了。

我不太确定会发生什么。有没有我必须做的任何设置来解决这个问题？

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:21:36.730

2个可能的问题：

1.  您的 xml 数据路径是相对的，您发布的 swf 找不到它。

2.  更有可能您的 xml 数据位于 Web 服务器上，并且您正在使用 file:///myfile.html 通过本地网页查看 swf。由于安全原因，这失败了。Adobe 已经决定本地 swfs 只能查看本地内容，而网络 swfs 只能查看网络内容。这个规则在 flash ide 中被忽略了，因为如果你有 flash ide，你就是一个开发者，你应该知道你在做什么。

在 Web 服务器上检查您的 swf 并报告回来。

# ios - 我可以只对 UITableViewCellEditingStyleDelete 使用左滑动并使右滑动手势响应另一种方法吗？

> ID：13908066
> 
> 赞同：1
> 
> 时间：2012-12-17T03:53:34.977
> 
> 标签：ios, uitableview

我在我的项目中使用 UITableViewCellEditingStyleDelete。现在左右滑动手势都会激活删除按钮。

我只想要左滑动手势来激活删除按钮，并做出右滑动手势来响应另一个方法（弹出 viewController）。

我该如何实施？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:34:50.943

您可以添加您自己的自定义 UIGestureRecognizers，也许添加到 UITableViewCell 子类的视图中，而不是使用 UITableView 的内置行为。

# objective-c - 将 XML 解析为 NSMutableArray

> ID：13908068
> 
> 赞同：1
> 
> 时间：2012-12-17T03:53:46.997
> 
> 标签：objective-c, parsing, nsmutablearray

我正在解析一个 XML 文件，一切都很完美，我看到的文件是`NSLog`，我也看到了解析的结果，但是当我将需要的标签传输到 a`NSMutableArray`时，结果很奇怪。

```
-(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName

 namespaceURI:(NSString *)namespaceURI
    qualifiedName:(NSString *)qName {
    if ([elementName isEqualToString:@"nom"]) {
        // displays the Content of the tag
        NSLog(soapResults);
        // add the content of the tag to the NSMutableArray
        [mySuppliers addObject:soapResults];
        // displays the NSMutable Array
        NSLog(@"array: %@", mySuppliers);
        [soapResults setString:@""];
        elementFound = FALSE;
        // displays the count of the NSMutable Array
        NSLog(@"NUMBER %d", [mySuppliers count]);
 }
 .... 
```

输出是：

```
2012-12-16 22:00:03.140 StartProj[11698:c07] ABC
2012-12-16 22:00:03.140 StartProj[11698:c07] array: (
    "ABC"
)
2012-12-16 22:00:03.140 StartProj[11698:c07] NUMBER 1
2012-12-16 22:00:03.141 StartProj[11698:c07] ABBOTT
2012-12-16 22:00:03.141 StartProj[11698:c07] array: (
    "ABBOTT ",
    "ABBOTT "
)
2012-12-16 22:00:03.141 StartProj[11698:c07] NUMBER 2
2012-12-16 22:00:03.142 StartProj[11698:c07] ACCESSORIES
2012-12-16 22:00:03.142 StartProj[11698:c07] array: (
    ACCESSORIES,
    ACCESSORIES,
    ACCESSORIES
)
2012-12-16 22:00:03.142 StartProj[11698:c07] NUMBER 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:00:21.643

对于 xml 解析，请尝试使用非常简单的 rapturexml。

[https://github.com/ZaBlanc/RaptureXML](https://github.com/ZaBlanc/RaptureXML)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:20:46.513

在将每个元素添加到字典后更好地分配 NSmutabledictionary 最后字典项转移到 nsmutable 数组。 ![在此处输入图像描述](../Images/8e72f0a6841a34a1c241191f37115dd7.png)

![在此处输入图像描述](../Images/61d7b4a325ac3c5f25d243a826b9fa16.png)

![在此处输入图像描述](../Images/beb85e3267a2e1cc5cfab5ba5411719a.png)

# asp.net-mvc - 根据 Razor MVC 中的 url 中的获取变量将下拉选项设置为选中

> ID：13908072
> 
> 赞同：0
> 
> 时间：2012-12-17T03:54:27.027
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我在 GET 表单中有一个下拉菜单。当用户点击提交时，他们将被定向到同一页面并再次显示表单。我希望用户在已选择的最后一页中显示的下拉选项。例如：

```
 @Html.DropDownList("Type", null, "Type", new { @class = "sbox-input" } ) 
```

website.com/Search?Type="牛肉"

```
<select name="Type">
   <option value="Fish" >Fish</option>
   <option value="Chicken" >Chicken</option>
   <option value="Beef" selected="selected">Beef</option>
</select> 
```

jQuery 解决方案也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:01:23.720

只要您在 Action 中有`type`参数，我认为您不需要 javascript 来执行此操作。我假设你有这样的事情：

```
public ActionResult Search(string type, [other parameters])
{
    ....
    ViewBag.SearchType = type; // put the selected type to the ViewBag
} 
```

[SelectList](http://msdn.microsoft.com/en-us/library/dd492553%28v=vs.108%29.aspx)将`selectedValue`其作为构造函数的第四个参数，因此您可以`DropDownList`使用所选值在视图中轻松创建：

```
@Html.DropDownList("Type", new SelectList(new Dictionary<string, string> { { "Fish", "Fish" }, { "Chicken", "Chicken" }, { "Beef", "Beef" } }, "Key", "Value", ViewBag.SearchType)) 
```

当然你可以`SelectList`在 Action 中创建并传递给 View：

```
public ActionResult Search(string type, [other parameters])
{
    ....
    ViewBag.SearchTypeList = new SelectList(new Dictionary<string, string> { { "Fish", "Fish" }, { "Chicken", "Chicken" }, { "Beef", "Beef" } }, "Key", "Value", type); // you can assign this to the property of your ViewModel if you have one
} 
```

然后在视图中

```
@Html.DropDownList("Type", ViewBag.SearchTypeList) 
```

# multithreading - apache http服务器中的线程数

> ID：13908073
> 
> 赞同：2
> 
> 时间：2012-12-17T03:54:29.513
> 
> 标签：multithreading, apache2

我是开发Apache http服务器监控工具。在 server-info 中可以获取 httpd.conf 中配置的值。并且服务器状态没有显示有关线程的更多详细信息。我想要的是获取 Apache 服务器的实时值。有没有办法获取 Apache 服务器的实时值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T07:30:03.830

我的 Apache http 服务器在 linux CentOS 上。在 Linux 命令**ps -o pid,comm,user,thcount -u apache**中，该命令给出当前线程数。

# c++ - 同一程序位置的访问冲突

> ID：13908074
> 
> 赞同：0
> 
> 时间：2012-12-17T03:54:47.590
> 
> 标签：c++, exception, unhandled

我收到错误消息：client.exe 中 0x77d815de 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

我理解正常的访问冲突错误是什么意思，但是这个错误在位置 0x77d815de 不断重复，例如，我将删除程序中的代码行，它在位置 0x77d815de 处中断，不管那行是什么。我正在运行的代码是简单的 Windows API 代码，添加了一些 switch 语句（我尝试过删除）和一个类初始化（我也尝试过删除）。您能否就至少为什么可能会出现溢出或解决此问题的方法给我一些建议。感谢您的时间。

--

发现它是由两个开关盒以编译器和我无法察觉的方式互锁引起的。从我的存储库中将其还原为旧形式，这很好。它导致 DirectX 设备类中的数据损坏，并搞砸了它的一些初始化，导致读取异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:09:19.913

我通常在`ntdll.dll`. 您可能向 WinAPI 提供了一些不良数据，并且它正在崩溃，因为您没有正确使用它。

如果此时您闯入调试器，您应该会看到调用堆栈。您可以返回通过它，直到您到达您拨打电话的自己的代码。从那里，应该更容易找到问题。

# c# - 包括泛型类型参数

> ID：13908076
> 
> 赞同：1
> 
> 时间：2012-12-17T03:55:15.980
> 
> 标签：c#, entity-framework, generics, typeof

我正在编写一些 BLL 代码以位于实体框架之上（使用 DBContext 生成的 DAL 类，但这对于这个问题并不重要）。这是我的例行程序之一：

```
public static Customer Get(int32 CustID, IEnumerable<string> IncludeEntities = null)
{
} 
```

因此，当我调用它时，我传递了一个 CustID，一个我想要包含的实体的可选列表 - 例如“Orders”和“OrderDetails”：

```
Customer customer = CustomerBLLRepository.Get("ALFKI", 
     new[] { "Orders", "Orders.Order_Details"}); 
```

它工作正常，但我不喜欢用字符串列表或数组来调用它——我想获得强类型，以便 IDE 可以提供帮助。

我可以通过像这样声明它来接收类型列表：

```
public static void GetTest(Int32 CustID, params Type[] IncludeEntities)
{
} 
```

并获取类名作为包含工作的字符串，但是调用者必须像这样使用 typeofs：

```
CustomerRepository.GetTest(123, typeof(Order), typeof(OrderDetails)); 
```

这不是世界末日，但这会导致问题，因为 OrderDetails 实际上是 Orders 的导航属性，并且包含需要调用 Orders.OrderDetails，我必须让代码四处寻找哪个实体 OrderDetails在子级中并且仍然生成字符串。

我真正想要的是一个强类型的实体列表，以包含的相同格式传递，EF 希望它们作为包含，但我认为我是 SOL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:11:40.520

假设您的 EF 模型维护了关系为什么不使用采用 Lambda 的自定义获取例程。根据您的样品，您将获得一个“客户”。

```
public class RepositoryCustomer: RepositoryBase<Customer> 
...
...
public class RepositoryEntityBase<T>
   public virtual T Get(Expression<Func<T, bool>> predicate)
       return Context.Set<T>.Where(predicate).FirstOrDefault(); 
```

您为上下文中的任何集合调用通用获取例程，

```
var aCustomer = RepositoryCustomer.Get(c=>c.id=="ALFKI" && c.Orders.OrderDetail=="bla") 
```

虚拟导航属性非常有用且灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:30:01.587

确定要在查询中包含哪些实体不应该是 BLL 以外的任何任务。如果 BLL 采用一个或多个引用数据存储结构的属性，那么您说的是 BLL 需要了解数据存储的内部结构的任何调用。编辑：不够清楚。这样做是完全错误的。

IMO 您应该为每个用例创建一个单独的方法 - 否则您的 BLL 只是 DAL 的辅助方法，并且不负责关注点分离。

这是 Entity Framework 的一个主要问题 - MS 让您看起来好像应该在您喜欢的任何时候将您的查询放在一起，并在您喜欢的任何地方使用和保持实体活动。确实很难看到光。

# php - 如何编码“'”字符

> ID：13908078
> 
> 赞同：0
> 
> 时间：2012-12-17T03:55:21.713
> 
> 标签：php, facebook

我正在编写一个将消息发布到提要中的 facebook 应用程序。当我尝试使用带有 HTTP POST 的图形 API 将消息**“I'm Roy”**发布到我的提要时，我不断收到以下结果**“I\'m Roy”**。这是为什么？我正在使用 PHP 调用图形 API，并使用 urlencode() 包装我的消息文本。

我想念什么？

这是我的 PHP 代码：

```
 function POST_feeds($parameters)
    {           
        //extract data from the post
        extract($_POST);

        //set POST variables
        $url = 'https://graph.facebook.com/' . $parameters["facebookUserId"] . "/feed";
        $fields = array(
                    'access_token' => $this->accessToken,
                    'message' => $parameters["message"]
                );

        //url-ify the data for the POST
        foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
        rtrim($fields_string, '&');

        //open connection
        $ch = curl_init();

        //set the url, number of POST vars, POST data
        curl_setopt($ch,CURLOPT_URL, $url);
        curl_setopt($ch,CURLOPT_POST, count($fields));
        curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

        //execute post
        $facebookResponse = curl_exec($ch);

        //close connection
        curl_close($ch);

        $response = new Response();
        $response->addItem($facebookResponse);
        return response;
    } 
```

**更新**

上面的 PHP 函数从以下 XMLHttpRequest 请求的 POST 参数中获取其参数：

```
 var xhr = new XMLHttpRequest();
    xhr.open("POST", webServiceUrl + "feeds", true);
    var params = "facebookUserId=" + facebookUserId + "&message=" + message;
    print(params);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=UTF-8");
    xhr.setRequestHeader("Content-length", params.length);

    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
            if (xhr.status === 200) {
                print(xhr.responseText);
                var responseObject = JSON.parse(xhr.responseText);
                successCallback(responseObject);
            } else {
                failureCallback();              
            }
        }
    };
    xhr.send(params); 
```

似乎问题是从 javascript 代码开始的（当我尝试在我的 PHP 代码中使用“'”字符对某些消息进行硬编码时，它一切正常）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:57:47.763

您不应该对您的数据进行 urlencoding，php facebook api 会为您处理这些。

---原始答案

您必须`"`在外部使用双引号才能解析转义字符。此外，如果您使用双外引号，则无需转义`'`

```
"I\'m Roy" 
```

不一样

```
'I\'m Roy' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:59:21.337

试试这个：http: [//php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)？

如果字符串中也有 html 标签，您可能希望将它与文档中所述的 htmlentities() 结合使用...

# android - Listview 中的 Listview -> 应该使用哪个适配器（Android）

> ID：13908079
> 
> 赞同：1
> 
> 时间：2012-12-17T03:55:23.103
> 
> 标签：android, listview, adapter

我有一个列表视图。在那个 Listview 中，我有多个 textviews 和一个 listview。

首先，我总是使用 simpleadapter 来用数据填充我的 Listview。但现在我添加了嵌入的列表视图。

我必须使用哪个适配器？！因为我认为这对于 simpleadapter 是不可能的。

主要活动布局：

```
<ListView
    android:id="@+id/lvData"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="8dp"
    android:background="@drawable/border_ui"
    android:divider="@color/dark_grey"
    android:dividerHeight="1dp"
    android:padding="4dp" /> 
```

Listview (lvData) 项目布局

```
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/tv_deposit_depiting" />

    <ListView
        android:id="lvDepositDepitingList"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" > 
```

我总是这样使用简单的适配器：

```
ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();

    for (Deposit deposit : getCurrentList()) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("name", deposit.getName());
        map.put("amount", String.valueOf(deposit.getAmount()));
        list.add(map);
    }

    SimpleAdapter adapter = new SimpleAdapter(this, list,
            R.layout.list_item_layout_deposit, new String[] { "name",
                    "amount" }, new int[] { R.id.tvDepositName,
                    R.id.tvDepositCurrentMonth });
    lvData.setAdapter(adapter); 
```

我想我将不得不扩展一个适配器并编写一个自定义的。如果这是我必须做的，我应该扩展哪个适配器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:13:55.297

是的，您可以创建一个扩展 BaseAdapter 的类并根据需要自定义视图，请查看此链接以获取帮助和指南[自定义适配器指南](http://tausiq.wordpress.com/2012/08/22/android-listview-example-with-custom-adapter/)

# shell - Sublime Text 2：subl shell 命令经常无法打开文件

> ID：13908086
> 
> 赞同：6
> 
> 时间：2012-12-17T03:56:16.073
> 
> 标签：shell, sublimetext2

我在 Mac 上安装了 Sublime Text 2，并[按照文档中的描述在](http://www.sublimetext.com/docs/2/osx_command_line.html)命令行上创建了一个链接。

从终端打开文件时，如下所示：

```
$ subl foo.txt 
```

将打开一个 Sublime Text 窗口，但在该窗口内 foo.txt 只会打开大约每 3 次左右的一次。我尝试将链接移动到路径中的不同文件夹，使用 sudo 等创建它，但到目前为止没有运气。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T03:58:40.307

有一段时间了同样的问题。将以下行添加到您的 .bash_profile：

```
alias subl='subl && sleep 0.1 && subl' 
```

现在你可以用`subl filename_to_edit`它来打开它了。

如果您不确定您`subl`是否正确配置了命令，请执行以下操作。为 ST3 运行第一个命令或为 ST2 运行第二个命令：

```
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" ~/bin/subl
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl 
```

确保 ~/bin 在你的 $PATH 中。然后使用 .bash_profile 执行第一步。

终于可以正常工作了！归功于[这些家伙](http://sublimetext.userecho.com/topic/62343-subl-with-no-window-open-doesnt-open-the-file/)并寻求改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T10:02:22.767

我记得以前遇到过 subl 的问题。并且必须想出一个函数来查看 Sublime 是否正在运行，如果没有启动它，请查看它是否加载。然后使用 "rmate" bash 脚本和相关的 "rsub" Sublime Text Package 插件加载到指定的文件中。但是，您应该能够使用 OSX open 命令来满足您的需要。我也会尝试最新的 Sublime Text 3 Beta。

# css - 在流体容器中垂直对齐图像

> ID：13908089
> 
> 赞同：1
> 
> 时间：2012-12-17T03:57:23.457
> 
> 标签：css

寻找其他示例，但找不到任何示例。我的图像容器使用最大宽度/最大高度，因此图像可以缩放到容器，但我似乎无法让它自动边缘顶部/底部或垂直对齐到中间而不设置高度。

```
html, body {
    width:  100%;
    height: 100%;
    margin: 0px;
}

#container {
    border: solid 1px #000;
    height: 100%;
    width: 65%;
    position: absolute;
    right: 0;
}

#container img {
    max-width: 100%;
    max-height: 100%;
    display: block;
    margin: auto;
    vertical-align: middle;    
}​

<div id="container"><img   src="http://rack.2.mshcdn.com/media/ZgkyMDEyLzEyLzE2LzAzL3NjcmVlbnNob3QyXzJlb2RkLnBuZwpwCXRodW1iCTg1MHg1OTA+CmUJanBn/5b500a85/9ee/screen-shot-2012-12-14-at-9-45-01-am.jpg" />
</div>​ 
```

[http://jsfiddle.net/beftR/](http://jsfiddle.net/beftR/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:00:51.893

我只能通过在您的代码中添加另一个`div`命名来使其工作。`#container2`我使用`table`/ `table-cell` `display`type 来做到这一点。这是我所做的（此处为[jsFiddle](http://jsfiddle.net/tGtDv/)）。

```
html, body {
    width:  100%;
    height: 100%;
    margin: 0px;
}

#container {
    border: solid 1px #000;
    height: 100%;
    width: 65%;
    position: absolute;
    right: 0;
    display:table;
}

#container2 {
    display:table-cell;
    vertical-align:middle;
}

#container img {
    max-width: 100%;
    max-height: 100%;   
}​

<div id="container">
  <div id="container2">
    <img src="http://rack.2.mshcdn.com/media/ZgkyMDEyLzEyLzE2LzAzL3NjcmVlbnNob3QyXzJlb2RkLnBuZwpwCXRodW1iCTg1MHg1OTA+CmUJanBn/5b500a85/9ee/screen-shot-2012-12-14-at-9-45-01-am.jpg" />
  </div>​
</div> 
```

# php - 上传时更改图像的文件名？

> ID：13908090
> 
> 赞同：1
> 
> 时间：2012-12-17T03:57:31.517
> 
> 标签：php, upload

嗨，我正在使用此脚本上传照片并将其存储在目录中。

它工作得很好，甚至可以调整照片的大小，但我想在上传或存储在文件夹中时调用图像“_default.jpg”。

我一直在尝试一些事情，但似乎没有任何效果。它目前会生成一个随机或临时名称，其中包含许多字符，例如“4345dfdf4dfdtgdfgsdgf”我已设法在图像末尾附加_default.jpg，但我似乎无法摆脱文件名开头的长字符.

有人可以让我知道我要去哪里错了吗？谢谢。

```
<?php

// LOG
$log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
        . 'FILES:' . print_r($_FILES, 1) . "\n"
        . 'POST:' . print_r($_POST, 1) . "\n";
$fp = fopen('upload-log.txt', 'a');
fwrite($fp, $log);
fclose($fp);

// Result object
$r = new stdClass();
// Result content type
header('content-type: application/json');

// Maximum file size
$maxsize = 10; //Mb
// File size control
if ($_FILES['xfile']['size'] > ($maxsize * 1048576)) {
    $r->error = "Max file size: $maxsize Kb";
}

// Uploading folder
$folder = 'files/';
if (!is_dir($folder))
    mkdir($folder);
// If specifics folder 
$folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
if (!is_dir($folder))
    mkdir($folder);

// If the file is an image
if (preg_match('/image/i', $_FILES['xfile']['type'])) {

    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_FILES['xfile']['name']) . '_default.jpg';
} else {

    $tld = split(',', $_FILES['xfile']['name']);
    $tld = $tld[count($tld) - 1];
    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_FILES['xfile']['name']) . $tld;
}

// Supporting image file types
$types = Array('image/png', 'image/gif', 'image/jpeg');
// File type control
if (in_array($_FILES['xfile']['type'], $types)) {
    // Create an unique file name    
    // Uploaded file source
    $source = file_get_contents($_FILES["xfile"]["tmp_name"]);
    // Image resize
    imageresize($source, $filename, $_POST['width'], $_POST['height'], $_POST['crop'], $_POST['quality']);
} else
// If the file is not an image
if (in_array($_FILES['xfile']['type'], $types)) 
    move_uploaded_file($_FILES["xfile"]["tmp_name"], $filename);

// File path
$path = str_replace('upload.php', '', $_SERVER['SCRIPT_NAME']);

// Result data
$r->filename = $filename;
$r->path = $path;
$r->img = '<img src="' . $path . $filename . '" alt="image" />';

// Return to JSON
echo json_encode($r);

// Image resize function with php + gd2 lib
function imageresize($source, $destination, $width = 0, $height = 0, $crop = false, $quality = 80) {
    $quality = $quality ? $quality : 80;
    $image = imagecreatefromstring($source);
    if ($image) {
        // Get dimensions
        $w = imagesx($image);
        $h = imagesy($image);
        if (($width && $w > $width) || ($height && $h > $height)) {
            $ratio = $w / $h;
            if (($ratio >= 1 || $height == 0) && $width && !$crop) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } elseif ($crop && $ratio <= ($width / $height)) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } else {
                $new_width = $height * $ratio;
                $new_height = $height;
            }
        } else {
            $new_width = $w;
            $new_height = $h;
        }
        $x_mid = $new_width * .5;  //horizontal middle
        $y_mid = $new_height * .5; //vertical middle
        // Resample
        error_log('height: ' . $new_height . ' - width: ' . $new_width);
        $new = imagecreatetruecolor(round($new_width), round($new_height));
        imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $w, $h);
        // Crop
        if ($crop) {
            $crop = imagecreatetruecolor($width ? $width : $new_width, $height ? $height : $new_height);
            imagecopyresampled($crop, $new, 0, 0, ($x_mid - ($width * .5)), 0, $width, $height, $width, $height);
            //($y_mid - ($height * .5))
        }
        // Output
        // Enable interlancing [for progressive JPEG]
        imageinterlace($crop ? $crop : $new, true);

        $dext = strtolower(pathinfo($destination, PATHINFO_EXTENSION));
        if ($dext == '') {
            $dext = $ext;
            $destination .= '.' . $ext;
        }
        switch ($dext) {
            case 'jpeg':
            case 'jpg':
                imagejpeg($crop ? $crop : $new, $destination, $quality);
                break;
            case 'png':
                $pngQuality = ($quality - 100) / 11.111111;
                $pngQuality = round(abs($pngQuality));
                imagepng($crop ? $crop : $new, $destination, $pngQuality);
                break;
            case 'gif':
                imagegif($crop ? $crop : $new, $destination);
                break;
        }
        @imagedestroy($image);
        @imagedestroy($new);
        @imagedestroy($crop);
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:14:30.233

```
 $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_FILES['xfile']['name']) 
           . '_default.jpg'; 
```

`sha1(@microtime() . '-' . $_FILES['xfile']['name'])`以上是创建您所看到的角色的原因。

```
 $filename = $_POST['value'] ? $_POST['value'] :
            $folder . '_default.jpg'; 
```

应该做你需要的（注意有两个地方你需要这个改变）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:13:05.813

```
$filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_FILES['xfile']['name']) . '_default.jpg'; 
```

改成

```
$filename = $_POST['value'] ? $_POST['value'] :
            $folder . '_default.jpg'; 
```

# jquery - 如何使用 jQuery 选择以下最近的元素？

> ID：13908091
> 
> 赞同：0
> 
> 时间：2012-12-17T03:57:39.360
> 
> 标签：jquery

这是结构：

![在此处输入图像描述](../Images/0718b5028814d0c3619d2630d7cbed6f.png)

`ul.children`我想通过单击来切换`a.exchand-cat-item`。我试过这个：

```
$('a.expand-cat-item').on('click', function() {
  $(this).siblings('ul.children').toggle('slow');
}); 
```

但后来意识到它不起作用，因为它`ul.children`位于 DOM 树的上一层`a.exchand-cat-item`

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:00:21.790

您可以使用[`closest`](http://api.jquery.com/closest/)先爬回`div`元素：

```
$(this).closest('div').siblings('ul.children'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:02:22.427

然后上一层并使用`siblings`：

```
$(this).parent().siblings('ul.children'); 
```

# objective-c - 如何通过 NSJSONSerialization 在 JSON 中包含空值？

> ID：13908094
> 
> 赞同：32
> 
> 时间：2012-12-17T03:57:51.480
> 
> 标签：objective-c, ios, json, null, nsjsonserialization

我想我知道如何使用 NSJSONSerialization 了。我正在打的电话是：

```
[NSJSONSerialization dataWithJSONObject:parameters options:0 error:&error] 
```

其中*parameters*是一个 NSDictionary，其中包括要在 JSON 请求中使用的键和值。一切都很好，直到我必须使用**null**作为值而不是空字符串。我根本找不到将值设置为**null**的方法。我需要创建的*json*示例是：

```
{"target"
  {"firstname":<firstname>,
   "lastname":<lastname>},
 "error":null
} 
```

服务器的设置方式是，如果没有错误，它会期望错误作为字符串或*null 。*

有任何想法吗？我错过了 API 调用或类似的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-17T04:06:58.007

你必须使用`NSNull`. 例如

**迅速**

```
let dict = ["firstKeyHasValue": 2342, "secondKeyHasNoValue": NSNull()] 
```

**Objective-C**

```
NSDictionary *dict = @{ @"error": [NSNull null] }; 
```

来自[NSDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)的官方文档：

> 键和值都不能为 nil；如果你需要在字典中表示一个空值，你应该使用 NSNull。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-15T07:45:35.693

我尝试这样做并为我工作。

```
var param: [String:Any] = [:]

param["firstName"] = "somename"

param["middleName"] = NSNull()

param["lastName"] = "somename"

print(param) 
```

**结果：**

```
["firstName":"somename","middleName":null,"lastName":"somename"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T21:33:02.950

如果您使用的是 Swifty JSON，我刚刚创建了一个应该处理 nil[的 PR 。](https://github.com/SwiftyJSON/SwiftyJSON/pull/610)它尚未合并，可能需要一些改进。如果需要，描述如何做到这一点的[部分](https://github.com/gsabran/SwiftyJSON/blob/swift3/Source/SwiftyJSON.swift#L519-L589)应该是编写自己的实现的良好开端。逻辑并不复杂，但可能需要考虑棘手的边缘情况/性能问题。

我知道这不是对问题的直接回应，因为它正在替换`NSJSONSerialization`，但我希望它可以帮助一些对 Swift 如何处理 nil/json 感到沮丧的人！

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-17T04:14:01.410

试试这样的事情：

```
NSDictionary *jsonObj = [NSDictionary dictionaryWithObjectsAndKeys:@"My Name", @"name", @"Developer", @"occupation", NULL, @"My NULL field", nil]; 
```

并将此对象用作您想要的参数。

# objective-c - xcode中的UITextView问题

> ID：13908097
> 
> 赞同：0
> 
> 时间：2012-12-17T03:58:19.420
> 
> 标签：objective-c, cocoa-touch, uitextview, uitextviewdelegate

所以我正在阅读关于 UITextView 的描述，它说当你按下键盘上的“返回”按钮时它会自动隐藏键盘。但它不起作用，所以我尝试创建一个

```
- (IBAction)textViewReturn:(id)sender; 
{
   [myTextView resignFirstResponder];
} 
```

那也不起作用，所以我也尝试这样做：

```
- (BOOL)textViewShouldReturn:(UITextView *)textView
{
  [myTextView resignFirstResponder];
  return NO;
} 
```

不知道为什么整个交易一开始就不起作用。想知道是否有人可以提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:11:04.960

[*我在UITextView 类参考*](http://developer.apple.com/library/ios/#documentation/uikit/reference/uitextview_class/Reference/UITextView.html)中没有看到任何说明当您按下 Return 时它会自动隐藏键盘的内容。

[此外，协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html#//apple_ref/occ/intf/UITextViewDelegate)中没有`textViewShouldReturn:`消息。[协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)中有一条消息，但文本视图不是文本字段。[`UITextViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html#//apple_ref/occ/intf/UITextViewDelegate)`textFieldShouldReturn:`[`UITextFieldDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

如果你想让它在用户按下 Return 时隐藏键盘，你需要做两件事。

首先，您需要将一些对象（通常是您的视图控制器）连接到文本视图的`delegate`出口。您可以在您的 nib 中执行此操作，或者您可以在代码中执行此操作，也许在您的`viewDidLoad`方法中：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    myTextView.delegate = self;
} 
```

其次，您需要`textView:shouldChangeTextInRange:replacementText:`在委托对象中实现：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    if ([text isEqualToString:@"\n"]) {
        [textView resignFirstResponder];
        return NO;
    } else {
        return YES;
    }
} 
```

请注意，如果用户粘贴包含换行符和其他字符的文本，则不会捕获换行符。它只会在用户点击 Return 键或粘贴仅包含换行符的文本时注意到。

您可以将委托的类声明为符合`UITextViewDelegate`协议，在这种情况下，Xcode 将有助于自动完成方法名称。但即使该类不符合协议，它也会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:45:13.530

根据您的评论，如果您想使用 a`UITextField`而不是 a `UITextView`，那么事情保持不变，除了为了在您按下回车时隐藏键盘，您需要在文本字段的委托中实现以下功能（确保您有首先设置）：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T04:22:51.860

UITextView 的返回按钮用于将光标移动到新行。但是，如果您想在返回按钮上移除键盘，请尝试以下代码。当用户按下返回按钮时，它会退出键盘。因此，请尝试以下绝对解决您问题的代码。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    if ([text isEqualToString:@"\n"]) {
        [textView resignFirstResponder];
        return NO;
    } else {
        return YES;
    }
} 
```

# android - 使用富文本创建一个不错的“关于”XML 布局？

> ID：13908104
> 
> 赞同：0
> 
> 时间：2012-12-17T04:00:26.493
> 
> 标签：android

我打算在我的应用程序中制作一个好的“**关于**”部分，为用户提供一些关于开发人员和应用程序本身的基本信息。我没有找到一个**有钱人** `EditText`。`Widgets`

我在这里搜索了与我类似的其他问题，我发现了类似使用 a`WebView`或 a`TextView`并在代码中赋予它们`HTML`属性的东西。

有什么好的和专业的方法来做我的**关于**XML 布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:28:45.717

使用多个 TextView 并相应地定位它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:06:16.027

如果您需要高度控制和富文本，请使用`WebView`并加载静态 HTML 文件。您也可以在一个简单的 TextView 中使用 Spans（粗体、斜体、链接等）实现很多目标，但通常需要更多的工作。

# c# - 单元测试抽象类和其中的受保护方法

> ID：13908106
> 
> 赞同：5
> 
> 时间：2012-12-17T04:01:02.867
> 
> 标签：c#, unit-testing, moq, abstract

如何测试其中的抽象类和受保护的方法？我知道你们中的一些人会建议我不应该测试抽象类，而应该测试从它派生的类。问题是，我不想那样做。我想严格测试抽象类本身。这是示例类：

```
public interface IF_SystemMessageHandler
{
    ...
}

public interface IF_SystemMessageSender
{
    ...
}

    public abstract class Component : IF_SystemMessageSender
    {

        private eVtCompId mComponentId;
        private eLayer mLayerId;
        private IF_SystemMessageHandler mLogger;

        protected Component(eVtCompId inComponentId, eLayer inLayerId, IF_SystemMessageHandler inMessageHandler)
        {
            mLayerId = inLayerId;
            mComponentId = inComponentId;
            mLogger = inMessageHandler;
        }

        protected void SendSystemMessage(ref eSystemMsgLevel inSystemMsgLevel, ref string inSysMsg)
        {
            mLogger.SendSystemMessage(...);
        }

        protected void SendSystemMessage(ref eSystemMsgLevel inSystemMsgLevel, ref eTextId inSysMsgID)
        {
            mLogger.SendSystemMessage(...);
        }

        public void SetMessageHandler(ref IF_SystemMessageHandler InSystemMessageHandler)
        {
            mLogger = InSystemMessageHandler;
        }

    } 
```

我正在为它写一个单元测试。我知道我可以做的一件事是利用单元测试框架（我有 Moq），但我不知道如何将它用于这个特定的实例。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T08:07:03.317

您需要使用从被测类继承的“可测试”类。例如，如果您有这样的课程：

```
public class ProtectedStuff
{
    protected bool MyProtectedMethod()
    {
        return true;
    }
} 
```

然后在您的单元测试程序集中，从您的类继承，如下所示：

```
public class TestableProtectedStuff : ProtectedStuff
{
    public new bool MyProtectedMethod()
    {
        return base.MyProtectedMethod();
    } 
} 
```

这为您提供了一个与原始接口完全相同的类，但现在您可以访问受保护的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T04:29:22.843

为了让您测试您的抽象类，您需要实例化它。因此，为测试目的创建一个从您的`Component`（抽象）类继承的类。

除了正在使用的接口之外，我对 Mock 的看法并不多。

# php - 使用 Jquery 按价格范围搜索房产

> ID：13908108
> 
> 赞同：0
> 
> 时间：2012-12-17T04:01:19.623
> 
> 标签：php, javascript, jquery, wordpress

我正在尝试按价格范围搜索物业。我已附加与搜索选项相关的我的 php 和 Jquery。目前金额显示没有逗号和货币符号，如 10000000-100000000。但我想将其更改为 1,000,000-100,000,000 卢比。我怎样才能做到这一点。如果您需要[点击这里](http://www.excelproperty.lk/property)查看网站。

```
 <script type="text/javascript">       
            jQuery(document).ready(function(){

            /*-----------------------------------------------------------------------------------*/
            /*  Search Slider in Footer -- Settings can be changed from theme options
            /*-----------------------------------------------------------------------------------*/
                <?php 
                if( function_exists( 'ot_get_option' ))
                {                                           
                    ?>
                    var min_val = parseInt(<?php echo ot_get_option( 'min_val', 0 ); ?>);
                    var max_val = parseInt(<?php echo ot_get_option( 'max_val', 1000000 ); ?>);
                    var ini_min_val = parseInt(<?php echo ot_get_option( 'ini_min_val', 100000 ); ?>);
                    var ini_max_val = parseInt(<?php echo ot_get_option( 'ini_max_val', 500000 ); ?>);
                    var step = parseInt(<?php echo ot_get_option( 'step', 5000 ); ?>);
                    <?php
                }
                else
                {
                    ?>
                    var min_val = 0;
                    var max_val = 1000000;
                    var ini_min_val = 100000;
                    var ini_max_val = 500000;
                    var step = 5000;
                    <?php
                }
                ?>

                $("#slider-range").slider({
                    range: true,
                    min: min_val,
                    max: max_val,
                    values: [ ini_min_val, ini_max_val ],
                    step: step,
                    slide: function( event, ui ) {
                        $( "#min-price" ).val( ui.values[ 0 ]);
                        $( "#max-price" ).val( ui.values[ 1 ]);
                        $( "#amount" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
                    }
                });

                $( "#amount" ).val( $( "#slider-range" ).slider( "values", 0 ) + " - " + $( "#slider-range" ).slider( "values",1 ) );

                $( "#min-price" ).val( $( "#slider-range" ).slider( "values", 0 ) );
                $( "#max-price" ).val( $( "#slider-range" ).slider( "values", 1 ) );
            });         
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:10:28.467

使用[http://egorkhmelev.github.com/jslider/](http://egorkhmelev.github.com/jslider/) JQuery 滑块插件，它提供比特数格式和货币..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T04:10:00.890

你试过这个吗？

```
 var min_val = $0;
                var max_val = $1000000;
                var ini_min_val = $100000;
                var ini_max_val = $500000;
                var step = $5000; 
```

# iphone - afnetworking 多文件上传

> ID：13908110
> 
> 赞同：1
> 
> 时间：2012-12-17T04:01:26.720
> 
> 标签：iphone, ios, file-upload, afnetworking

我正在使用 AFNetworking 上传多个文件。我需要为每个图像发送额外的信息，例如图像宽度/高度。

我以为我会遍历图像并发送它们，但 AFNetworking 并不能很好地处理它。
（我怀疑 AFNetworking 将多个请求合二为一，覆盖了额外的信息）

下面是我的代码。

```
NSURL *url = [NSURL URLWithString:@URL_BASE];
int count = [imageArray count];

for(int i = 0; i < count; ++i)
 {
     UIImage* image = [imageArray objectAtIndex:i];
     AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
     NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                                             [NSNumber numberWithFloat: image.size.width], @"width",
                                             [NSNumber numberWithFloat: image.size.height], @"height",
                                          nil];

     NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@PATH_ALBUM_IMAGE_UPLOAD parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
             [formData appendPartWithFileData:imageData name:[NSString stringWithFormat:@"file%d", i]  fileName:@"avatar.jpg" mimeyTpe:@"image/jpeg"];
         }];

     AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
     [operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {

             [progressView setProgress: totalBytesWritten*1.0f / totalBytesExpectedToWrite animated: YES];
             NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
             if(totalBytesWritten >= totalBytesExpectedToWrite)
             {
                 progressView.hidden = YES;
             }
         }];
     [operation start];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:53:32.100

这原来是 AFNetworking 的一个已知（但现在已修复）错误。

[AF网络](https://github.com/AFNetworking/AFNetworking/commit/782862b)

问题解决了。

# iphone - 在 iPhone 中进行本地化的最佳方法是什么？

> ID：13908116
> 
> 赞同：1
> 
> 时间：2012-12-17T04:02:22.583
> 
> 标签：iphone, objective-c, localization

我正在做 iPhone 的本地化工作。我在内置本地化技术中使用了苹果，即在 Xcode 中说 make localize 提供了两个不同的 .string 文件，我们必须在其中放置本地化单词的键和值。我已经在我的项目中实现了这个方法。我在某处读到的另一件事是，我们可以使用数据库进行本地化。我不知道怎么做？可能通过将本地化的单词存储在数据库中的键值对中。但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:58:04.523

有几种不同的技术或方法可以本地化 iphone 应用程序，我们可以本地化完整的 .xib 文件或准备本地化的字符串文件。

以下链接将详细说明：

```
https://developer.apple.com/internationalization/
http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:11:44.713

您会发现最常见的方法是将`NSLocalizedString`s 与`.string`每种语言的文件一起使用。这个概念对于以前使用过的本地化人员来说应该很熟悉`gettext`。

我不确定是否将数据放入数据库，除非您有*一堆*需要本地化的字符串。否则，您可能不会因为将字符串存储在数据库中而获得太多收益。

# css - 如何让 Bootstrap 的“英雄单元”适合整个顶部？

> ID：13908124
> 
> 赞同：2
> 
> 时间：2012-12-17T04:03:42.257
> 
> 标签：css, twitter-bootstrap, twitter-bootstrap-rails

我目前正在学习 Rails 和 CSS，并试图复制 Bootstrap 的[github 页面](http://twitter.github.com/bootstrap/index.html)的外观作为学习练习。Bootstrap 的中央单元（紫色，并包含大标题“Bootstrap”）适合页面的*所有*顶部，侧面没有空白。但是，我当前的尝试看起来更像这个[示例页面](http://twitter.github.com/bootstrap/examples/hero.html)，其中包含“hello world”的中央灰色单元本身就是一个盒子，并且周围有空白区域。基本上，我的问题是，我如何让那个空白消失？我试图模仿页面源代码中显示的内容，但仍然得到这个结果。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:46:41.690

如果您查看您发布的示例页面的源代码，您会注意到 hero 元素位于`div`被调用的`container`. 此类具有分配的左右边距以及宽度。您需要做的就是将它们分别更改为 0 和 100%，然后您应该一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T21:30:08.443

在您提供的示例的源代码中查找 jumbotron 和 masthead 功能

```
<div class="jumbotron masthead"> 
```

# concurrency - Go 中的增量运算符在 x86 上是原子的吗？

> ID：13908129
> 
> 赞同：19
> 
> 时间：2012-12-17T04:04:34.717
> 
> 标签：concurrency, thread-safety, go, atomic

这是一些背景知识：
我需要一个在 go 例程之间共享的计数器变量，用于类似漏桶的东西。我知道在 Effective Go，concurrent section 中有一个leaky-bucket 的例子，但是我需要跟踪的数量可能非常大，我觉得使用通道中的元素数量来跟踪它是低效的。所以我正在考虑在不同的例程之间使用共享变量来跟踪数字。

我知道如果没有明确的配置，所有的 goroutine 都会映射到一个线程上。但是如果我在多核计算机上为程序分配多个线程，增量运算符是原子的吗？不同机器（ , , ）上的不同数据类型（`int32`,`float32`等）是否都一样？`x86_32``x86_64``arm`

更具体地说，如果我有`counter += 1000`一个例程和`counter -= 512`另一个例程，而这两个例程恰好在两个线程中运行，该怎么办？我需要担心线程安全吗？我应该把锁放在上面`counter`吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-17T05:06:15.933

不，增量不应该被认为是原子的。使用原子加法函数或互斥体。

让我们假设：

```
import "sync/atomic"
var counter = new(int32) 
```

一个 goroutine 可以做`atomic.AddInt32(counter, 1000)`，而另一个没有`atomic.AddInt32(counter, -512)`互斥体可以做。

如果您更愿意使用互斥锁：

```
import "sync"
var counter int32
var mutex sync.Mutex

func Add(x int32) {
    mutex.Lock()
    defer mutex.Unlock()
    counter += x
} 
```

# vbscript - 自动调用 .VBS 文件

> ID：13908131
> 
> 赞同：1
> 
> 时间：2012-12-17T04:04:46.313
> 
> 标签：vbscript

我有 4 个 .vbs 文件，例如 A.VbS、B.VBS、C.VBS、D.VBS。我想按以下顺序调用它们：

```
 (1)A.VBS
        (2)B.VBS
        (3)C.VBS
        (4)D.VBS 
```

第一个完成后，第二个应该自动启动，依此类推。

你能帮我做这些任务吗？

**编辑：**

```
 Option Explicit

    Dim oShell : Set oShell = WScript.CreateObject ("WScript.Shell")
    Dim FSO : set FSO = CreateObject("Scripting.FileSystemObject") 
    Dim Path

    REM oShell.run "ParentChildLinkFinal.vbs", 1, True
    REM oShell.run "Parent_Child_Merge_final.vbs", 1, True
    REM oShell.run "Baddata.vbs", 1, True
    REM oShell.run "CycleTime.vbs", 1, True
    msgBox(oShell.CurrentDirectory)
    MsgBox(FSO.GetFile(Wscript.ScriptFullName).ParentFolder )
    Path=FSO.GetFile(Wscript.ScriptFullName).ParentFolder

    oShell.run Path\ParentChildLinkFinal.vbs, 1, True
    oShell.run Path\Parent_Child_Merge_final.vbs, 1, True
    oShell.run Path\Baddata.vbs, 1, True
    oShell.run Path\CycleTime.vbs, 1, True 
```

我收到以下错误：

> 变量未定义：“arentChildLinkFinal.vbs”

解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:10:25.473

假设您想从另一个 VBS 文件启动，如果工作目录与其他脚本相同，则可以使用以下内容，或者包含完整路径：

```
Dim oShell : Set oShell = WScript.CreateObject ("WScript.Shell")
oShell.run "A.VBS", 1, True
oShell.run "B.VBS", 1, True
oShell.run "C.VBS", 1, True
oShell.run "D.VBS", 1, True 
```

作为替代方案，您还可以扩展代码以将当前目录设置为包含脚本的文件夹：

```
Dim oShell : Set oShell = WScript.CreateObject ("WScript.Shell")
Dim FSO : Set FSO = CreateObject("Scripting.FileSystemObject")
oShell.CurrentDirectory = FSO.GetFile(Wscript.ScriptFullName).ParentFolder
oShell.run "A.VBS", 1, True
oShell.run "B.VBS", 1, True
oShell.run "C.VBS", 1, True
oShell.run "D.VBS", 1, True 
```

有关参数的含义和其他信息，请参见此处：

[http://technet.microsoft.com/en-us/library/ee156605.aspx](http://technet.microsoft.com/en-us/library/ee156605.aspx)

# java - 使用 Java 进行动态图像缓存

> ID：13908137
> 
> 赞同：3
> 
> 时间：2012-12-17T04:06:36.583
> 
> 标签：java, servlets

我有一个带有 API 的 servlet，它可以从 GET 请求中传递图像。servlet 根据 GET 请求的参数创建 CAD 命令的数据文件。然后将该数据文件传送到图像解析器，该解析器在文件系统上创建图像。servlet 读取图像并在响应中返回字节。

所有的 IO 和图像解析程序的调用都非常繁重，大约 80kb 的图像在本地系统上的渲染时间为 3-4000 毫秒。

大约有 20 个参数构成 GET 请求。每个都与图像的不同部分相关。因此，可能的图像组合非常大。

为了减少加载时间，我计划将渲染图像的 BLOB 存储在数据库中。如果 GET 请求与之前执行的请求匹配，我将从缓存中提取。否则，我将渲染一个新的。这不会修复“第一次”运行，但会帮助“n+1 次运行”。

关于如何提高性能的任何其他想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:01:19.803

您可以将文件存储在磁盘上，并将图像路径存储在数据库中，因为数据库存储通常比文件系统存储更昂贵。

对 http get 参数进行排序并将它们作为索引到该图像记录的哈希值，以便按参数快速查询。

为了确保您的程序在磁盘容量不足时不会崩溃，您应该删除未使用或很少使用的记录：

为每条记录存储一个 lastAccessedTime，每次请求图像时更新。

使用调度程序检查 lastAccessedTime，删除低于指定权重的记录。您可以使用不同的策略来计算权重，例如 lastAccessedTime、accessedCount、image size 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:21:25.097

您可以以可预测的方式将输入渲染管道的所有参数转换为单个字符串，这样您就可以计算输入的 SHA1 哈希，然后将输出文件存储在以 SHA1 作为文件名的目录中，这样如果您收到具有相同参数的请求，您只需计算哈希然后检查文件是否在磁盘上，如果它返回则将工作发送到渲染管道并创建文件。

如果你有很多文件，你可能想要使用多个目录，也许看看 git 如何通过 SHA1 的前几个字符在目录中划分文件以获得灵感。

我在我的应用程序上使用了类似的设置我不只是存储文件进行渲染，文件存储在数据库中，但出于性能原因，我使用文件内容的 sha1 哈希作为文件的文件名 / URI 从磁盘提供它们.

# ios - 在使用monogame的iOS App中集成Admob

> ID：13908145
> 
> 赞同：4
> 
> 时间：2012-12-17T04:07:57.683
> 
> 标签：ios, xamarin.ios, admob, monogame

我试图这样做几天，但仍然无法做到。我试图找到一些样本，但它们都在 Android 上。有没有人成功在 iOS 上集成 admob？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:24:07.877

我对来自 monotouch-bindings 存储库的[AdMob 绑定](https://github.com/mono/monotouch-bindings/tree/master/GoogleAdMobAds)有一些问题。但后来我切换到[AlexTouch.GoogleAdMobAds](https://github.com/dalexsoto/AlexTouch.GoogleAdMobAds)绑定，它们工作得很好。您可以在 Github 上的 README 中找到使用 AlexTouch.GoogleAdMobAds 的示例。很简单，但如果您需要一些帮助 - 请随时提出更详细的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:39:34.937

```
 // code for admob "using AlexTouch.GoogleAdMobAds"
        UIViewController vc = new UIViewController ();
        UIViewController controller = UIApplication.SharedApplication.Windows [0].RootViewController;

        var ad = new GADBannerView (GADAdSizeCons.SmartBannerLandscape, new PointF (0, 0))
        {
            AdUnitID = "ADMOB_ID",
            RootViewController = vc
        };
        ad.Hidden = false;

        ad.DidReceiveAd += delegate {
            ad.Hidden = false;
            ad.Frame = new System.Drawing.RectangleF (0, (int) 0, (int) (ad.Bounds.Width), (int) (ad.Bounds.Height));
            Console.WriteLine ("AD Received");
        };

        ad.DidFailToReceiveAdWithError += delegate(object sender, GADBannerViewDidFailWithErrorEventArgs e) {
            ad.Hidden = true;
            Console.WriteLine (e.Error);

        };

        ad.WillPresentScreen += delegate {
            Console.WriteLine ("showing new screen");
        };

        ad.WillLeaveApplication += delegate {
            Console.WriteLine ("I will leave application");
        };

        ad.WillDismissScreen += delegate {
            Console.WriteLine ("Dismissing opened screen");
        };
        ad.UserInteractionEnabled = true;

        vc.View.AddSubview(ad);
        vc.View.Frame = new System.Drawing.RectangleF(0f,  0f,  (int)(ad.Bounds.Width), (int)(ad.Bounds.Height));
        controller.View.AddSubview(vc.View);

        Task.Factory.StartNew(() => {
            while (true)
            {
                Console.WriteLine("Requesting Ad");
                InvokeOnMainThread (delegate { 
                    GADRequest r = new GADRequest();

                    ad.LoadRequest(r);
                });
                System.Threading.Thread.Sleep(30000);
            }
        }); 
```

# parsing - 使用自定义数据类型在haskell中定义新的数据类型

> ID：13908146
> 
> 赞同：1
> 
> 时间：2012-12-17T04:07:59.040
> 
> 标签：parsing, haskell, types

我想知道是否有可能在 Haskell 中做这样的事情

```
data Word = Det String | Adj String | Noun String | Verb String | Adverb String
data NounPhrase = Noun | Det Noun 
```

如果我说错了，我想说的是-“单词”是“Det”、“Adj”、“名词”等，而“NounPhrase”是“名词”或“Det”后跟一个“名词”。

当我尝试这样做时，我收到错误：“未定义的类型构造函数“名词””

我怎样才能做到这一点，以便它按上述方式执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T05:02:34.357

当您定义代数数据类型时

> 数据 MyType = Con1 字符串 | CON2 诠释

then`Con1`和`Con2`是*数据构造函数*，它们本身是函数`Con1 :: String -> MyType`和`Con2 :: Int -> MyType`. 您的示例有两个问题：

1.  您对不同类型使用相同的数据构造函数。由于数据构造函数是产生*特定*类型值的函数，因此不能使用相同的数据构造函数（`Det`和`Noun`） for`Word` *和*for `NounPhrase`。所以你需要为 `NounPhrase`.
2.  `Det Noun`没有意义，因为`Noun`它是一个数据构造函数，而 的参数`Det`需要是一个类型，例如`String`.

请参阅[Haskell 中的构造函数](http://www.haskell.org/haskellwiki/Constructor)以帮助解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T04:41:18.567

您混淆了类型和值构造函数。当你说

```
data Word = Det String | Adj String | Noun String | Verb String | Adverb String 
```

您将**类型** `Word`定义为多种形式之一，例如

```
Det String 
```

说这`Det`是一个**构造函数**，它接受 a`String`并返回一个 type 的值`Word`。同样，`Noun`它被定义*为 Words 的构造函数*而不是类型。

您可以通过多种方式在 Haskell 中编码您想要的内容。到目前为止，最简单的是使用

```
data Word = Det String | Adj String | Noun String | Verb String | Adverb String
data NounPhrase = JustNoun String | Compound String String 
```

这就是“学习 Haskell”的方式。它是“字符串类型的”，但可能足以满足您的目的。

# multithreading - Winsock线程服务器在多个客户端连接时不能正常工作？

> ID：13908149
> 
> 赞同：0
> 
> 时间：2012-12-17T04:08:35.627
> 
> 标签：multithreading, thread-safety, winsock, createthread

我有一个服务器，它为连接到它的每个客户端生成一个线程。然后该线程处理向客户端接收/发送数据。这是我的服务器代码：

```
 //////////////
    //  START   //
    /////////////
    while( 1 )
    {
    if( listen(serverSocket, SOMAXCONN) == SOCKET_ERROR ) 
    {
        printf( "Listen failed with error: %ld\n", WSAGetLastError() );
        break;
    }    
        /*
         *  wait for clients...
        */
        clientSocket = accept(serverSocket,
                              (struct sockaddr *)&clientSockAddr,
                              &clientSockAddrLen);

        if( clientSocket == INVALID_SOCKET )
        {
            printf("%d:accept failed\n", WSAGetLastError());
            closesocket(serverSocket);
            WSACleanup();
            return 1;
        }

        printf("Client accepted: IP: %s PORT: %d\n",
            inet_ntoa(clientSockAddr.sin_addr),
            clientSockAddr.sin_port );

        THREADDATA threadData = { clientSocket };
        sprintf_s(threadData.ip, "%s", inet_ntoa(clientSockAddr.sin_addr));

        // spawn a thread for each client
        hthread = CreateThread(
                    NULL,                       // don't inherit handle
                    0,                          // use default size for the executable
                    processClient,
                    (pTHREADDATA)&threadData,   // thread data
                    0,                          // run right away
                    &threadId );
    } 
```

这是我的线程函数的样子：

```
/*
    called by thread for each client
*/
DWORD WINAPI processClient(LPVOID lpParam)
{
    int numBytesRecvd = 0,
        numBytesSent = 0,
        index = 0,
        nLeft = SIZE,
        TOTAL = SIZE;

    char buff[SIZE];
    int run = 1;

    char msg[MSG_SIZE];

    pTHREADDATA td = (pTHREADDATA)lpParam;

    /* keep processing client */
    while (run)
    {
        memset(buff, 0, SIZE);

        numBytesRecvd = recv(td->clientSocket, buff, nLeft, 0);

        /* CLIENT EXITED */
        if( !strcmp(buff, "exit") )
        {

            printf("Client exited!\n");

            run = 0;
        }

        if( numBytesRecvd > 0 )
        {

            printf("< %s\n", buff);

        }

        if (numBytesRecvd == 0)
        {
            printf("Client closed!\n");
            run = 0;
        }

        if( numBytesRecvd == SOCKET_ERROR )
        {
            printf("%d:Recieve error!\n", WSAGetLastError());
            run = 0;
        }
    }

    closesocket(td->clientSocket);
    ExitThread(0);

    return 0;
} 
```

**问题：**

所以我启动服务器和客户端，比如client1（从win 7中的命令提示符），一切都很好。当我在 client1 终端输入内容时，它会在服务器终端打印。

现在我启动另一个客户端client2，它连接到服务器并且我输入的任何内容都会显示在服务器上，但是现在当我在client1上输入内容时它不会显示在服务器终端上。

所以基本上每次我启动一个新客户端时，只有那个客户端可以与服务器通信，旧客户端不能！但我认为线程会继续处理每个客户端？还是Windows中的cmd提示符不是线程安全的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:53:14.403

我可以在这里看到两个可能的问题：1）您正在将堆栈上的 threadData 传递给不同的线程。您应该在堆上分配它，然后将其传递给线程。2）我认为您没有将clientSocket正确分配给threadData，您不应该分配给结构threadData的成员吗？

# javascript - Firefox 问题：非必需的单选按钮被标记为 valueMissing

> ID：13908151
> 
> 赞同：0
> 
> 时间：2012-12-17T04:08:59.743
> 
> 标签：javascript, firefox, validation

我有一个问题可能与 [如何使用 JavaScript 在 Firefox 中使必需的单选输入可选？](https://stackoverflow.com/questions/10990861/how-do-i-make-a-required-radio-input-optional-in-firefox-using-javascript)

我的例子可以在这里找到： [http ://www.bradkent.com/?page=test/ff_radio](http://www.bradkent.com/?page=test/ff_radio)

简而言之，我在一个复选框上有一个事件查看器，用于切换无线电组的可见性。无线电组最初是必需的，但在隐藏时，我将无线电输入的必需属性更改为 false（node.required = false）。重新显示该组时，所需的属性将更改回 true。dom 检查器确认没有设置所需的属性或属性。

那么为什么需要选择一个选项呢？我做错了什么或忽略了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:06:45.563

好吧，我发现了这个问题

node.required = true/false vs node.setAttribute('required',1); 和 node.removeAttribute('required');

前者已在代码的较早部分完成，此时 node.removeAttribute('required'); node.removeProp('必需'); 等在删除所需的属性时都没有用（在 Firefox 中）

# security - 在浏览器中隐藏 Cookie

> ID：13908152
> 
> 赞同：2
> 
> 时间：2012-12-17T04:09:02.740
> 
> 标签：security, cookies, load-balancing

`Cookies`我正在使用下面的代码设置一些，

```
document.cookie = name+"="+value+expires+"; path=/"; 
```

有什么方法可以隐藏它们（最终用户应该无法通过检查`Cookies`存储在浏览器中的内容来查看它们）？

My Domain 是通过负载均衡器访问的。如果不是通过我的代码，有什么方法可以通过LB实现吗？

提出这个问题时要牢记安全方面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:22:47.863

如果您在浏览器上创建 cookie，那么很遗憾，无法“隐藏”它们，或者更具体地说，无法“隐藏”它们中的数据。

根据您的要求，您可以通过在 javascript 中进行一些加密来实现“通过默默无闻的安全性”（例如[http://www.movable-type.co.uk/scripts/aes.html](http://www.movable-type.co.uk/scripts/aes.html)）。**这绝不是安全**的，但会将 cookie 内容隐藏在不经意的观察者和非技术性的粘鼻子上。例如：

```
document.cookie = name + "=" + Aes.Ctr.encrypt(value + expires, yourPassword, 256) + "; path=/"; 
```

正如@Usman Saleem 评论的那样，有效地使 cookie 内容不可读的唯一方法是在发送到客户端之前在服务器上对其进行加密。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T17:18:02.957

2件事：

1）你为什么需要这样做？

2）我认为这是不可能的

# jquery - 处理电话间隙的跨域呼叫

> ID：13908158
> 
> 赞同：1
> 
> 时间：2012-12-17T04:09:59.463
> 
> 标签：jquery, cordova, cross-domain, jsonp, asmx

我正在为以下内容寻找最佳实践实现......

我有一个调用 .asmx Web 服务的 JQuery 脚本，但是在域外调用时它无法加载，我知道当我将我的 html 移到 PhoneGap 时会发生什么。

是使用 JSONP 的最佳/唯一解决方案吗？

我不拘泥于 .asmx 或 jquery 等。对您使用过的任何有效的想法持开放态度。

只需要能够从 html5 调用服务器上的方法。（并且 html5 应用程序不会离线运行）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:31:39.967

是的 JSONP 是您问题的答案。JSONP 或“带填充的 JSON”是一种 JSON 扩展，其中前缀被指定为调用本身的输入参数，并简单地克服 XMLHttpRequest 相同的域策略。

[阅读更多](https://stackoverflow.com/questions/2067472/please-explain-jsonp)，[阅读更多](https://stackoverflow.com/questions/2887209/what-are-the-differences-between-json-and-jsonp)

这两个链接应该可以帮助您。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:45:39.460

要了解有关 JSONP 的更多信息，请单击[此处](http://remysharp.com/2007/10/08/what-is-jsonp/ "什么是jsonp？ 通过雷米夏普")。

简单的 JSONP 可以定义为（这是 Remy Sharp 博客的摘录）

> JSONP 是脚本标签注入，将来自服务器的响应传递给用户指定的函数

此[链接](http://techedgez.blogspot.in/2012/07/how-to-post-data-to-remote-server-cross.html "科技 Edgez 博客")还可以帮助您找到问题的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:13:21.153

我要说 JSONP 绝对是最好的方法，如果您需要`OPTIONS`在服务器端代码中允许该方法，您可以实现类似的代码。（注意：此示例在技术上适用于 MVC，但可以进行调整。）

```
public class AllowCrossSiteJsonAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        HttpContext.Current.Response.Cache.SetNoStore();

        filterContext.RequestContext.HttpContext.Response.AppendHeader("Access-Control-Allow-Origin", "*");

        string rqstMethod = HttpContext.Current.Request.Headers["Access-Control-Request-Method"];
        if (rqstMethod == "OPTIONS" || rqstMethod == "POST")
        {
            filterContext.RequestContext.HttpContext.Response.AppendHeader("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
            filterContext.RequestContext.HttpContext.Response.AppendHeader("Access-Control-Allow-Headers", "X-Requested-With, Accept, Access-Control-Allow-Origin, Content-Type");
        }
        base.OnActionExecuting(filterContext);
    }
} 
```

```
[HttpGet]
[AllowCrossSiteJsonAttribute]
public JsonpResult CommunicateCard(CommunicateCardModel ccm)
{
    return ModelState.IsValid
        ? this.ValidCommunicateCardBuilder(ccm)
        : this.InvalidFormSummary(ccm);
} 
```

*旁注：这是我正在使用的 JsonpResult。效果很棒。*

```
namespace System.Web.Mvc
{
    #region usings
    using System;

    using WebService.Attributes;
    using WebService.Domain.Models;
    using WebService.Exceptions;
    using WebService.Models.ViewModels;
    using Extensions;
    using WebService.Utilities;
    #endregion

    public class JsonpResult : ActionResult
    {
        public Object Data { get; set; }
        public string JsonCallback { get; set; }
        public bool? Success { get; set; }

        public override void ExecuteResult(ControllerContext context)
        {

            // Create a JsonResponse that we can Send out

            // Check for the callback parameter
            this.JsonCallback = context.HttpContext.Request["callback"];

            // if the "callback" doesn't exist, we want to check for "jsoncallback"
            if (string.IsNullOrEmpty(this.JsonCallback))
                this.JsonCallback = context.HttpContext.Request["jsoncallback"];

            // If we've made it this far, we know that the object sent is an
            // object that we can serialize and Send back as valid JSON. We now
            // need to wrap it in our JsonViewModel for consistancy. NOTE: We're
            // using the AsList() extension method to ensure that we're
            // returning an Array since our application (Sencha Touch) requires
            // all data to be in array format.
            if (!Data.GetType().IsGenericType)
                Data = Data.AsList();

            // Until now we the data is either an ERROR, or null
            // if it's null, and the Data is not null, we set Success = true
            // If Success is false, it's because we set it to false when we threw an error
            // if that's the case, we keep it false for the client.
            if (Success == null) Success = true;

            var jsonViewModel = new JsonViewModel
                {
                    results = this.Data,
                    // We know that Success is either True or False so we can
                    // safely cast the nullable bool to a bool.
                    success = (bool)this.Success
                };
            WriteOut(jsonViewModel, context);
        }

        /// <summary>
        /// Write Out the JsonP Response to the Controller.
        /// </summary>
        /// <param name="jsonResponse">The unserialized object</param>
        /// <param name="context">Controller Context</param>
        private void WriteOut(JsonViewModel jsonResponse, ControllerContext context)
        {
            var response = context.HttpContext.Response;
            response.ContentType = "application/javascript";
            response.Write(JsonUtility.Serialize(jsonResponse, this.JsonCallback));
        }
    }

    /// <summary>
    /// extension methods for the controller to allow jsonp.
    /// </summary>
    public static class ContollerExtensions
    {
        public static JsonpResult Jsonp(this Controller controller, Object data)
        {
            return new JsonpResult { Data = data };
        }

        public static JsonpResult Jsonp(this Controller controller, Object data, bool success)
        {
            // We don't ever want to pass in a "true" success. We only want to 
            // know if it failed.
            if (success)
            {
                return new JsonpResult { Data = data };
            }

            return new JsonpResult { Success = false, Data = data };
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:39:31.260

如果您使用的是 Phonegap，它会使用 file:// 协议加载本地 html 文件。您的加载失败可能与[相同的原始策略](http://en.wikipedia.org/wiki/Same_origin_policy)有关，并且不适用于 file:// 协议。因此，使用 file:// 协议加载您的 html，您可以进行跨浏览器调用。查看[这篇文章](http://railsgrammer.com/tag/phone-gap/)以了解更多信息。另请查看[Phonegap 的有关域白名单的文档](http://docs.phonegap.com/en/2.2.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)。

祝你好运！

# php - build_http_query 数组的数组

> ID：13908166
> 
> 赞同：-1
> 
> 时间：2012-12-17T04:10:44.630
> 
> 标签：php, arrays

我有简单的变量

```
$body = array(
        'content' => 'content test',
        'is_sanitize' => true,
        'sanitize_replacement' => '***',
        'meta' => array(
                    'name' => 'another',
                    'email' => 'another@email.com'
                )
    ); 
```

当我使用`build_http_query($body)`时，它给了我

```
content=content%20test&is_sanitize=1&meta=another&meta=another%40email.com&sanitize_replacement=%2A%2A%2A 
```

问题是“名称”和“电子邮件”键在哪里？为什么 build_http_query 不添加那些键？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:14:31.563

结果应该是[：](http://codepad.viper-7.com/f2TYtO)

```
content=content+test&is_sanitize=1&sanitize_replacement=%2A%2A%2A&meta%5Bname%5D=another&meta%5Bemail%5D=another%40email.com 
```

注意：不是`build_http_query`，而是`http_build_query`。

# android - android sqlite onresume() oncreate()

> ID：13908167
> 
> 赞同：1
> 
> 时间：2012-12-17T04:10:48.077
> 
> 标签：android, android-activity, onresume

我有几个写入和读取数据库的活动。由于客户端必须在它们之间切换。如果我将代码仅保留在 onCreate 中，则当活动返回屏幕时将不会更新不同的视图。确保在活动获得焦点时更新所有数据的最佳方法是什么？将 evrything 从 onCreate() 移动到 onResume() 是否明智？

有什么可以让它变得更好吗？

```
public class InboxActivity extends ListActivity {

    List<Candidate> candidates;
    private DatabaseHandler db;
    private CandidateAdapter adapter;
    private ListView lvMain;
    public void onDestroy(){
        if (db != null)
            db.close();

        super.onDestroy();
        //db.close();
    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.inbox_list);
        db = new DatabaseHandler(this);
        candidates = db.getAllCandidates(1);
        db.close();
        adapter = new CandidateAdapter(this,(ArrayList) candidates);
        lvMain = getListView();
        lvMain.setAdapter(adapter);
        lvMain.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String name = ((TextView) view.findViewById(R.id.from)).getText().toString();
                Log.d("Name ", name);

                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra("name", name);
                Log.d("Starting activity ", "Yeah ");
                startActivity(in);

            }
        });
    }
    public void onResume(){
        super.onResume();
        db = new DatabaseHandler(this);
        candidates = db.getAllCandidates(1);
        db.close();
        adapter = new CandidateAdapter(this,(ArrayList) candidates);
        lvMain = getListView();
        lvMain.setAdapter(adapter);
        adapter.notifyDataSetChanged();

    }

} 
```

适配器

```
public class CandidateAdapter extends BaseAdapter{
    Context ctx;
    LayoutInflater lInflater;
    ArrayList<Candidate> objects;
    CandidateAdapter(Context context, ArrayList<Candidate> candidates) {
            ctx = context;
            objects = candidates;
            lInflater = (LayoutInflater) ctx
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          }
    public int getCount() {
        return objects.size();
      }
    public Object getItem(int position) {
        return objects.get(position);
      }
    public long getItemId(int position) {
        return position;
      }
    Candidate getCandidate(int position) {
        return ((Candidate) getItem(position));
      }
    public View getView(int position, View convertView, ViewGroup parent) {
        // используем созданные, но не используемые view
        View view = convertView;
        if (view == null) {
          view = lInflater.inflate(R.layout.inbox_list_item, parent, false);
        }
        Candidate p = getCandidate(position);
        ((TextView) view.findViewById(R.id.from)).setText(p.get_name());
        ((TextView) view.findViewById(R.id.subject)).setText(p.get_office());
        ((RatingBar) view.findViewById(R.id.rateindicator)).setRating(p.get_ranking());
        int loader = R.drawable.loader;

        ImageView image = (ImageView) view.findViewById(R.id.photo);

        String image_url = p.get_photograph();

        ImageLoader imgLoader = new ImageLoader(ctx);

        imgLoader.DisplayImage(image_url, loader, image);
        return view;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:53:46.733

如果你没有完成你的活动，那么你不需要在 onResume() 中写所有东西

你应该在 onResume() 中写这个。

```
 public void onResume(){
     adapter = new CandidateAdapter(this,(ArrayList) candidates);
    lvMain.setAdapter(adapter);
    adapter.notifyDataSetChanged()
} 
```

将您定义`CandidateAdapter`为类变量。

# php - PHP/SQL 不确定如何处理

> ID：13908171
> 
> 赞同：0
> 
> 时间：2012-12-17T04:11:50.150
> 
> 标签：php, mysql, sql

我有两个表，类别和信息。

类别看起来像：

```
id | name 
```

信息看起来像：

```
id | parent_id | name | url 
```

parent_id 是类别中的 id。

我有一个表单，用户可以在其中添加多个 url。有一个按钮可以按下以显示更多的 url 字段。如果有多个 url，则将 url2、url3 等添加到数据库中。

然后信息将如下所示：

```
id | parent_id | name | url | url2 | url3 
```

**这是一个合适的方法吗？**

如果是这样，如果信息是这样的：

```
id | parent_id |name  |url            |url2          |url3
1  | 1         |One   |http://cnn.com |
2  | 1         |Two   |http://msn.com |http://aol.com| 
```

**当我查看 One or Two 或 w/e 时，如何查询以获取他们的网址？**

我知道我可以做到：

```
$mysqli->query("SELECT i.url FROM info AS i LEFT JOIN categories AS c ON i.parent_id = c.id"); 
```

但这取决于我放置 i.url、i.url2、i.url3 并且我必须为每个信息创建一个单独的查询。我想要它，以便 PHP 确定要选择的 i.url 数量和内容。

所以应该是：

```
$mysqli->query("SELECT (PHP determines what i.url to put here depending on what info page I'm viewing) FROM info AS i LEFT JOIN categories AS c ON i.parent_id = c.id"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:16:55.170

如果您走这条路，您将有一堆具有空值的列并遇到查询问题，这几乎就是您所描述的。

`info`我会创建一个与`url`s映射的不同表（可能是 url） 。例如：

```
url_id | info_id | url 
```

这是重复属性设计模式，这里简要说明： [http ://www.tomjewett.com/dbdesign/dbdesign.php?page=phone.php](http://www.tomjewett.com/dbdesign/dbdesign.php?page=phone.php)

以下是有关如何查询的示例：

```
SELECT i.*, url
FROM info i JOIN urls u ON i.id = u.info_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:16:32.373

不，这里正确的解决方案是另一个表，可能称为“info_urls”，它使用 info-to-urls 建模一对多。

这是一个“规范化”的设计，每个“信息”将允许无限的 URL，并且很容易查询：

```
SELECT name, GROUP_CONCAT(info_urls.url) as urls 
FROM info JOIN info_urls ON info.id = info_urls.info_id; 
```

列将如下所示：

```
id
info_id
url 
```

该解决方案模拟了您不知道用户将输入多少个 URL，并且您的 RDBMS 是针对 CRUD*行*而不是列 :-) 的现实（并且非常擅长将它们连接在一起以进行查询）

# c# - 正则表达式未捕获字符串中间的匹配项

> ID：13908172
> 
> 赞同：0
> 
> 时间：2012-12-17T04:12:01.790
> 
> 标签：c#, regex, url

我开始的正则表达式是：

**^(((http|ftp|https|www)://)?([\w+?.\w+])+([a-zA-Z0-9\~!\@#\$\%\^\ &*()_-\=+\/\?.\:\;\'\,]*)?)$**

我正在使用它在用户提供的文本中间查找 URL 并将其替换为超链接。这工作正常并匹配以下内容：

*   [http://www.google.com](http://www.google.com)
*   www.google.com
*   google.com
*   www.google.com?id=5
*   ETC...

但是，如果它的两边有任何文本，它就找不到匹配项（有点违背了我正在做的事情的目的）。:)

没有匹配：

*   访问 www.google.com
*   www.google.com 是最好的。
*   我经常访问 www.google.com。
*   ETC...

如何更改它以便无论它出现在字符串中的哪个位置都匹配？我对正则表达式很糟糕......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:26:05.857

您的原始正则表达式中有一个错误。方括号构成`\w+?\.\w+`一个字符类：

```
(((http|ftp|https|www)://)?([\w+?\.\w+])+([a-zA-Z0-9\~\!\@\#\$\%\^\&\*\(\)_\-\=\+\\\/\?\.\:\;\'\,]*)?)
                            ^         ^ 
```

删除它们（以及锚点`^`和`$`）后，您的正则表达式将不匹配明显的非 URL。

我建议使用[http://regexpal.com/](http://regexpal.com/)来测试正则表达式，因为它在正则表达式中具有语法突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:17:15.337

我认为您应该向前看，即搜索给定的 url 以首先检查两种可能性，无论是在整个字符串的开头还是在中间。

但是您应该使用 ^((?=url) *?|.* ?(?=url).*?$)) 之类的东西，这只是开始，我没有给您答案，只是一个想法。我会这样做，但目前我很懒，你的正则表达式会寻找 20 分钟的分析。

stackoverflow 删除了我的示例中的一些内容

# php - 使用 PHP 从 MySQL 中删除大表中的许多行

> ID：13908175
> 
> 赞同：-1
> 
> 时间：2012-12-17T04:12:39.610
> 
> 标签：php, mysql

我无法删除大表中的许多行。我正在尝试从 2m 行表中删除 200-300k 行。

我的 PHP 脚本是这样的

```
 for($i=0;$i<1000;$i++){
    $query="delete from record_table limit 100";
    $queryres=mysql_query($query) or die(mysql_error());;
} 
```

这只是我的脚本的一个示例，我将一次删除 100 行，运行 1000 次以删除 10 万条记录。

但是，PHP 脚本似乎一直在运行，并且没有返回任何内容。但是当我尝试从命令行运行查询时，它似乎删除得很好，尽管删除大约需要 5-6 分钟。

是否有其他东西阻止 PHP 脚本执行查询？我尝试在一个查询中删除 100k，结果也一样。

我真正想运行的查询是“DELETE FROM table WHERE (timeinlong BETWEEN 'timefrom' AND 'timeto'”

timeinlong 列已编入索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:54:36.253

希望您有一个 ID 字段，以便您可以执行以下操作：

```
 $delete = mysql_query("DELETE FROM records WHERE id > 1000"); 
```

这将留下前 1,000 行并删除所有其他条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:56:43.053

为什么要多次使用循环删除它不是删除的好方法。如果您有任何 id（自动递增），则将其与 where 子句一起使用（例如，从`record_table`where id< 任何 ID 中删除）

或者，如果您想通过循环删除它，那么很长一段时间您还应该使用 set_time_limit(0) 函数来保持 PHP 脚本的执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:52:57.623

也许添加一个字段来跟踪已删除的项目对您有用。然后，您将“已删除”更新为 TRUE，而不是实际删除行。显然，您的其他查询需要修改以选择删除等于 FALSE 的位置。但它很快。然后您可以在其他时间通过脚本修剪数据库。

# delphi - 如何在不直接连接到数据库的情况下使用快速报告创建报告

> ID：13908176
> 
> 赞同：6
> 
> 时间：2012-12-17T04:12:50.583
> 
> 标签：delphi, fastreport, quickreports

我的公司要求我更新一个用 delphi 编写的特定应用程序的报告功能，并使用快速报告来改用 FastReports。

当前的实现将所有数据从数据库中提取出来，做了大量工作来组织和计算报告所需的数据，并将所有这些数据存储在几个不同的对象中。然后使用快速报告 OnNeedData 事件来填充波段，直到没有更多数据（通过设置 MoreData = false 表示）

我遇到的问题是快速报告似乎需要一个乐队来连接到我没有的实际数据源。此外，fastReports 似乎没有类似于 OnNeedData 的事件。

无论如何要在代码中填写数据带的值并让它再次打印，直到打印所有数据而不将带连接到数据集？

我为这个问题的含糊性表示道歉，我对报告软件非常陌生，任何关于去哪里和看什么的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T06:15:17.960

快速报表使用从 _TFrxDataSet 下降的*中间对象来**连接*它打印数据的报表引擎。

要将报表连接到由程序本身管理的数据源，您可以使用 TfrxUserDataSet 组件，它可以让您在报表中查看*数据集*，但是您可以在 Fields (TStrings) 属性中手动指定列名并管理和提供值以编程方式为以下事件编写事件处理程序：

*   **OnCheckEOF**在功能上等同于 OnNeedData，如果没有要打印的内容，则将 EOF var 参数设置为 true
*   **OnFirst**你做任何你必须做的事情来*开始*为数据走动。
*   **OnGetValue**和**OnNewGetValue** 为*当前行的每个不同**列*提供值
**   **OnNext** , **OnPrior**您将*当前行*移动到下一个或前一个位置。*

 *如您所见，行/列概念（DataSet）用于向报表提供数据，但您可以从用于存储计算结果的任何结构（列表、数组或任何其他对象）中提取数据/结构/文件等）

在报表内部，您将带区链接到此逻辑*DataSet*并使用标准组件打印此*DataSet的列**值*。

 *如果您已经在 DataSet 中拥有数据，例如计算后的内存中 DataSet，最好使用 TfrxDBDataset 将您的报表直接绑定到该数据源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T04:40:34.837

您可以使用 TfrxUserDataSet。在“demos”文件夹下有一个名为“printstringlist”的演示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T06:29:26.943

在我们的项目中，我们实现了我们自己的继承自 TfrxCustomQuery 的类。这个新的查询类只是将其 SQL 语句重定向到我们应用程序的内部查询引擎。我们在 FastReport 调色板中注册了这个新类（在 FR 版本 3 和 4 中使用了 frxDsgnIntf​​.frxObjects.RegisterObject*），现在它用于我们所有的报告模板，而不是 TfrxADOQuery 或其他内置数据集类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T07:17:47.933

这是另一种选择：

我已经使用 FastReport 多年了。我有时会遇到类似的情况。对于离线表格报告，我使用内存数据集。我很久以前购买了 DevExpress，所以我有 TdxMemData。但即使没有它，您也应该对使用 TClientDataset 组件感到满意。

除此之外，TfrxUserDataset 是我在显示对象列表时使用的替代方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-31T10:09:32.350

有可能这样做，虽然它很慢，

**代码：-**

```
var
  FRX: TfrxReport;
procedure NewPage;
begin
  MyPage := TfrxReportPage.Create(FRX);
  MyPage.CreateUniqueName;
  MyPage.PaperSize := DMPAPER_A4;
end;
procedure ...(AText: string);
var
  frMemo : TfrxMemoView;
begin
  frMemo := TfrxMemoView.Create(MyPage);
  frMemo.CreateUniqueName;
  frMemo.Text := AText;
end; 
```

问候
赫尔曼**

# php - 如何反转从 Jomsocial 中的模块中删除 HTML 的 allowhtml 标签

> ID：13908177
> 
> 赞同：0
> 
> 时间：2012-12-17T04:12:59.533
> 
> 标签：php, html, joomla, jomsocial

这是一个初学者的问题，对不起！我正在处理一个脚本，该脚本使用 JomSocial 将 HTML 从 Joomla 中的模块中剥离出来。如果有某种方法允许模块中的链接和其他 HTML，我可以链接到管理员创建的包含投资组合信息的页面，这是最终目标。

有没有人有什么建议？我在 /groups.list.php 中找到了呈现简短描述模块的代码，它有一行内容：

```
 <div class="groupDescription"><?php echo ($config->get('allowhtml')) ? $group->description : $this->escape($group->description); ?></div> 
```

我对PHP不是很熟悉，但是'allowhtml'标签与此无关吗？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T08:17:00.483

在 jomosocial 中，菜单项“配置”，选项卡“布局”，您有一个选项“允许 html”，说是，保存，现在您在常见的文本区域（如组描述）中有 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:33:06.183

`$config->get('allowhtml')`是一个可能来自组件的参数。

您可能会在其中一个模块文件中看到以下代码，该代码将确认：

```
$config = JComponentHelper::getParams('com_componentname'); 
```

因此，进入Joomla后端的组件，点击右上角的“参数”按钮，找到参数并在选项之间切换。

# windows-phone-7 - 在 Windows Phone 的 ResourceDictionary 中访问 DataTemplate

> ID：13908179
> 
> 赞同：1
> 
> 时间：2012-12-17T04:13:13.103
> 
> 标签：windows-phone-7, datatemplate, resourcedictionary

我在 ResourceDictionary 'style1.xaml' 中定义了一个 DataTemplate：

```
<ResourceDictionary
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" >

    <DataTemplate x:Key="BlogDataTemplate">
        <Grid Margin="0,0,6,20" Width="400" Height="210">
            <Grid VerticalAlignment="Bottom" Background="#A6000000">
                <TextBlock Text="{Binding title}" Style="{StaticResource PhoneTextExtraLargeStyle}" Foreground="White" Margin="6" FontSize="25" TextWrapping="Wrap"/>
            </Grid>
        </Grid>
    </DataTemplate>

</ResourceDictionary> 
```

在 App.xaml.cs 中，我使用以下代码合并 ResourceDictionary：

```
void LoadDictionary()
{
    var dictionaries = Resources.MergedDictionaries;
    string source = string.Empty;
    var themeStyles = new ResourceDictionary { };
    switch (Settings.fontStyle.Value)
    {
        case 0:
            source = String.Format("/app;component/Themes/style1.xaml");
            themeStyles.Source = new Uri(source, UriKind.Relative);
            dictionaries.Add(themeStyles);
            break;
        case 1:
            source = String.Format("/app;component/Themes/style2.xaml");
            themeStyles.Source = new Uri(source, UriKind.Relative);
            dictionaries.Add(themeStyles);
            break;
        default: break;
    }
} 
```

通过调试，我可以确保 style1.xaml 已被合并，然后在 MainPage.xmal 我有一个列表框，我将 ItemTemplate 定义为

```
 <ListBox x:Name="listbox" ItemsSource="{Binding}" CacheMode="BitmapCache" ItemTemplate="{StaticResource BlogDataTemplate}"/> 
```

但是当我部署该应用程序时，它导致了“未指定的错误”。

那么如何在 Windows Phone 中访问 ResourceDictionary 中的 DataTemplate 呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:27:47.813

代替 LoadDictionary 代码，尝试通过执行以下操作（在 App.xaml 中，在 Application.Resources 中）将 ResourceDictionary 与 App.xaml 中的 Xaml 合并：

```
 <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Themes/style1.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary> 
```

# android - 在 Android 中动态更改布局

> ID：13908181
> 
> 赞同：0
> 
> 时间：2012-12-17T04:13:36.457
> 
> 标签：android, layout, dynamic

我有一个在 layout.xml 文件中加载一些布局的活动。第一个 LinearLayout 将所有视图托管在一起。第二个线性布局将两个标签放在一起。相对布局包含一些标签和一个在加载时填充项目的 ListView。我想通过实现相对布局到另一个布局的“转换”来改进导航，而不影响活动中的其他布局。换句话说，当单击由 ListView (OnItemClickListener) 填充的行之一时，此事件侦听器将当前的 RelativeLayout 替换为新的 Layout。

有什么想法可以实现吗？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        android:background="#FFDECE"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:text="Date"
            android:layout_weight="0.5"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Gang Code"
            android:layout_weight="1.0"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    </LinearLayout>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="10dp">

        <TextView
            android:id="@+id/tvEmpyName"
                ....

    </RelativeLayout>

    <ListView
        android:id="@+id/lvATRDisplay"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:34:28.883

您可以为此使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)。并使用[setDisplayedChild(int)](http://developer.android.com/reference/android/widget/ViewAnimator.html#setDisplayedChild%28int%29)来显示特定的布局，即孩子

例如

```
setDisplayChild(0); 
```

# jquery - Fancybox v2 在第二次点击时失败

> ID：13908182
> 
> 赞同：4
> 
> 时间：2012-12-17T04:13:46.067
> 
> 标签：jquery, ajax, fancybox, overlay

我有一个网站，它使用 Fancybox v2 的 ajax 选项来显示某些信息，例如帮助、联系信息等。我注意到它有一个问题，但是，它在第​​一次点击时工作正常，但通常在随后的点击 - 实际的弹出窗口可能会短暂出现然后消失，或者它可能根本不会出现，并且覆盖可能会加载两到三次，因此需要多次点击才能清除它。

无论您单击同一个链接还是另一个也使用 Fancybox 的链接都没有关系。Firebug 控制台不报告任何错误。如果您刷新页面，您将获得另一个可靠的点击，然后随后的点击再次表现出奇怪的行为。

我已经创建了我们其中一个页面的精简版本（删除所有其他脚本），以查看是否存在导致冲突的原因，但似乎并非如此。你可以在这里看看：

[http://frontandback.com.au/fancytest/](http://frontandback.com.au/fancytest/)

网站右上角的三个链接应用了 Fancybox。例子：

```
<ul>
    <li><a href="index.html" data-fancybox-href="index.html #main" target="_blank" class="fancybox fancybox.ajax">Contact us</a></li>
    <li><a href="index.html" data-fancybox-href="index.html #main" target="_blank" class="fancybox fancybox.ajax">Help</a></li>
    <li><a href="index.html" data-fancybox-href="index.html #main" target="_blank" class="fancybox fancybox.ajax">FAQs</a></li>
</ul> 
```

如果有人对导致这个奇怪问题的原因有任何建议，将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T04:17:52.687

从**[这篇文章](https://stackoverflow.com/a/13620584/1055987)**中，我创建了一个修订版本，您可以在其中通过 ajax 从文件中加载部分内容。

这个新修订版使用 (HTML5)`data-`属性来传递`hash`URL，所以不是这样做

```
<li><a href="index.html" data-fancybox-href="index.html #contact" target="_blank" class="fancybox fancybox.ajax">Contact us</a></li> 
```

我们会这样做

```
<li><a href="index.html" data-segment="#contact" target="_blank" class="fancybox">Contact us</a></li> 
```

...**请注意**，我们没有使用任何特殊的 fancybox*类* `fancybox.ajax`，也没有`fancybox.iframe`按照评论部分的建议。

然后是基本脚本

```
$(".fancybox").on("click", function() {
    targetContent = $("<div />").load(this.href +" "+ $(this).data("segment")); 
    $.fancybox(targetContent, {
        fitToView: false,
        autoSize : false,
        width: 420, // or whatever
        height: 280
    }); // fancybox
    return false; // prevent default
}); // on 
```

您可以通过属性`<div>`从远程文件中为每个文件设置尺寸，然后设置和删除和选项以获得动态尺寸。`style=""``autoSize : true``width``height`

当然，**[修改后的DEMO](http://www.picssel.com/playground/jquery/loadPartialContentRevised_17dec12.html)**

# css - 项目的选择器不是来自另一个项目

> ID：13908183
> 
> 赞同：2
> 
> 时间：2012-12-17T04:13:49.660
> 
> 标签：css, css-selectors

鉴于下面的 HTML，您将如何选择所有不是 .itemcontainer(s) 后代的 .name(s)。

类似 .group .header .name:not(descended from .itemcontainer)

我知道这可以很容易地用 jQuery 或通过添加其他类来完成，但是任何纯 css 解决方案？我一直无法找到“不是来自”选择器...

```
<div class='group'>

    <!-- Any number of ancestors of any type -->

    <div class='header'>

         <!-- Any number of ancestors of any type -->

        <div class='name'>

            SELECT ME!!!

        </div>

    </div>

    <div class='body'>

        <div class='itemcontainer'>

            <div class='item1'>

                <!-- Any number of ancestors of any type -->

                <div class='header'>

                        <!-- Any number of ancestors of any type -->

                    <div class='name'>

                            DON'T SELECT ME!!!

                    </div>

                </div>

                <div class='body'>

                    ...

                </div>

            </div>

                ...

        </div>

    </div>

        ...

</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:23:49.917

我不知道在 CSS 选择器中排除这种情况的方法；但是您可以为所有人定义一个规则，然后为特定的取消定义。

```
.group .header .name {
    background-color: green;
}
.group .itemcontainer .header .name {
    background-color: inherit;
} 
```

**编辑**：鉴于您要实现的目标（取自对我的回答的评论），不将其作为纯 CSS 选择器，但确实使用 jQuery 更有意义：

```
$('.group .header .name').filter(':not(.itemcontainer *)')​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​.click(onClick); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:47:35.827

我认为你想要做的是：

```
.name:not(.itemcontainer .name) 
```

**但这不起作用**，因为选择器`:not()`只接受简单的选择器。换句话说：对不起，我认为您无法使用`:not()`选择器完成此操作。

# emacs - 将字体锁定应用于 elisp 中的引用符号

> ID：13908192
> 
> 赞同：5
> 
> 时间：2012-12-17T04:15:06.463
> 
> 标签：emacs, lisp, elisp, syntax-highlighting, font-lock

在 Emacs 中，我想在 emacs lisp 中引用符号，例如：`'blah`并以不同的颜色显示它们。我怎样才能使用`font-lock`模式来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:42:46.073

尝试：

```
(font-lock-add-keywords 'emacs-lisp-mode
                        '(("'[-a-zA-Z_][-a-zA-Z0-9_]*\\>" 0 'font-lock-constant-face))) 
```

或者（如果您不希望引用彩色）：

```
(font-lock-add-keywords 'emacs-lisp-mode
                        '(("'\\([-a-zA-Z_][-a-zA-Z0-9_]*\\)\\>" 1 'font-lock-constant-face))) 
```

这不会为注释或字符串中的内容着色，因为它们之前已着色，并且字体锁定（默认情况下）不会重新着色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T12:58:00.840

以下代码将启用引号本身的语法突出显示以及它后面的符号不同的面。如果需要，您还可以自定义这两个面孔。您可能还希望能够轻松地发现两者之间的`'(hello world)`差异`(hello world)`。为此，突出显示引号可能还不够，因此代码中被注释掉的部分用于突出显示引号后的左括号。它们被注释掉是因为我认为它与其他以不同颜色突出显示嵌套括号的包不兼容，并且您很可能正在使用其中一个包。

```
(defface my-lisp-quoted-symbol-face
  '((t :inherit font-lock-constant-face))
  "Face for Lisp quoted symbols.")

(defface my-lisp-quote-face
  '((t :inherit warning))
  "Face for Lisp quotes.")

;; (defface my-lisp-quoted-open-paren-face
;;   '((t :weight bold
;;        :inherit my-lisp-quoted-symbol-face))
;;   "Face for Lisp quoted open paren.")

(defvar my--lisp-quote-regexp
  (rx (group "'")
      (or symbol-start
          (group (syntax open-parenthesis)))))

(defvar my--lisp-quoted-symbol-regexp
  (rx "'" (group (+ (or (syntax symbol)
                        (syntax word))))))

(dolist (mode (list 'emacs-lisp-mode
                    'lisp-mode))
  (font-lock-add-keywords mode
                          `((,my--lisp-quote-regexp
                             (1 'my-lisp-quote-face)
                             ;; (2 'my-lisp-quoted-open-paren-face nil t)
                             )
                            (,my--lisp-quoted-symbol-regexp
                             1 'my-lisp-quoted-symbol-face)))) 
```

defface 和 rx 的使用使代码更加冗长。defface 的好处是可以轻松自定义面部。当您尝试为其他目的修改此代码时，rx 的好处就出现了（例如，如果您想让它也处理反引号。）

# google-cloud-messaging - 使用 gcm 演示发件人时获得响应时 HttpConnection 被阻止

> ID：13908195
> 
> 赞同：1
> 
> 时间：2012-12-17T04:15:25.543
> 
> 标签：google-cloud-messaging, httpconnection, blocked

我使用 google gcm 服务器演示来构建通知服务器。但我发现当得到 gcm 的响应时它会被阻止。conn.setConnectionTimeout 和设置 conn.readTimeOut 也无效。有什么好的解决办法吗？

```
String requestBody = gson.toJson(jsonRequest);
    HttpURLConnection conn = post("https://android.googleapis.com/gcm/send", "application/json",
            requestBody);
    conn.setReadTimeout(CONNECTION_READ_TIMEOUT);
    int status = conn.getResponseCode(); 
```

有时，它会在 conn.getResponseCode() 处阻塞。我发现jstack如下：

```
 at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:129)
at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:798)
- locked <0x0000000783dcaff8> (a java.lang.Object)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:755)
at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
- locked <0x0000000783dcb098> (a com.sun.net.ssl.internal.ssl.AppInputStream)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
- locked <0x0000000783de10a0> (a java.io.BufferedInputStream)
at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:687)
at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:632)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1195)
- locked <0x0000000783de3380> (a sun.net.www.protocol.https.DelegateHttpsURLConnection)
at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:318)
at com.net.service.gcm.Sender.sendNoRetry(Sender.java:219)
at com.net.service.gcm.Sender.send(Sender.java:115) 
```

# datagridview - 如何在 c#.net 中的 datagridview 中设置整个列的背景颜色（指示只读列）

> ID：13908200
> 
> 赞同：2
> 
> 时间：2012-12-17T04:16:27.743
> 
> 标签：datagridview, datagridviewcolumn

我有一个数据网格视图，我想在其中设置`readonly`两`true`列。我想更改这些列的颜色。每当我离开单元格时，我只能让第一个单元格和当前单元格改变颜色。剩余的单元格不工作。谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:02:19.697

尝试

```
private void dataGridView2_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex == 0)
        if (dataGridView2[e.ColumnIndex, e.RowIndex].ReadOnly)
            e.CellStyle.BackColor = Color.Red;

    if (e.ColumnIndex == 1)
        if (dataGridView2[e.ColumnIndex, e.RowIndex].ReadOnly)
            e.CellStyle.BackColor = Color.Black;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T10:13:37.040

```
 DataGridViewColumn dgv7col = dgv7.Columns[i];
    DataGridViewCell cell = new DataGridViewTextBoxCell();
    cell.Style.BackColor = Color.Wheat;
    dgv7col.CellTemplate = cell; 
```

您必须定义列而不是单元格 Ronny

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T11:12:40.687

简单的：

if (grdView.Columns["Columnname"].ReadOnly) grdView.Columns["Columnname"].DefaultCellStyle.BackColor = Color.Lavender;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-04T17:15:25.307

```
foreach (DataGridViewColumn col in dgv.Columns)
        if (col.ReadOnly) 
            col.DefaultCellStyle.BackColor = Color.Lavender; 
```

# android - 无法创建 AVD

> ID：13908204
> 
> 赞同：0
> 
> 时间：2012-12-17T04:16:43.737
> 
> 标签：android, avd

我已经停止在 Android 上工作一段时间了。我今天开始了。我已经格式化了我的硬盘，因此我安装了 eclipse 并遵循了标准程序。现在我被困在创建一个新的 AVD 上。![我的 AVD 新设备窗口的屏幕截图](../Images/9479bcc377ab4a463db086e89a41b8dc.png).

无论我尝试在“设备”菜单中提供什么，目标都不会出现。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:24:24.083

您必须为要运行的 VM 选择一个目标。

如果您没有安装任何目标，则必须转到 SDK Manager 并安装目标，然后您将能够选择目标并运行 VM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:11:28.223

首先，您必须为Eclipse Android 插件指定**Android SDK 安装文件夹。**去`Preferences -> Android`设置它。之后，您必须安装要开发的目标版本。

转到**AVD Manager -> Available Packages 并下载您需要的目标**。之后，您应该能够创建您的 AVD。如果您仍然有问题，请尝试重新启动 Eclipse，因为这多次为我解决了一些问题。

**从命令行**

如果您想从命令行创建 avd，请尝试以下代码。

> android 创建 avd --target 2 --name YOUR_AVD_NAME

希望它能解决你的问题

# javascript - Java脚本按钮与链接提交？

> ID：13908208
> 
> 赞同：0
> 
> 时间：2012-12-17T04:17:26.303
> 
> 标签：javascript, html

我有一个名为保存更改的函数，它看起来像这样

```
function saveChanges() {
  var theCity = city.value;
  var theState = state.value;
  var theEmail = email.value;
  var theAge = age.value;
  var theGender = gender.value;
  var theOther = other.value;
    alert("theCity is: "+ theCity);
    alert("theState is: "+ theState);
    alert("theEmail is: "+ theEmail);
    alert("theAge is: "+ theAge);
    alert("theGender is: "+ theGender);
    alert("theOther is: "+ theOther);
}
window.onload=function (){
    document.getElementById('ok').onclick=saveChanges;

} 
```

我有一个简单的 html 页面，上面有多个输入。

要提交内容，我在底部有一个链接。

```
<a href="#" id="ok" style="color:white;">Click here <-- </a> 
```

我制作了一个具有相同 id='ok' 的按钮，但它不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:17:19.393

请试试这个，

# HTML

```
<form onsubmit="return validate(this)" method="POST" action="a_post_page.php">
    name: <input type="text" name="name" /> <br />
    email: <input type="text" name="email" /> <br />
    age: <input type="text" name="age" /> <br />
    gender: <input type="text" name="gender" /> <br />
    city: <input type="text" name="city" /> <br />
    <br />
    <input type="submit" name="submit_form" value="Save" />
</form> 
```

# Javascript

```
function validate(form1) {  
    if(form1.name.value === "") {  
        alert("Please type your name the name feild.");  
        return false;  
    }  
    if(form1.email.value === "") {  
        alert("Please type your email the email feild.");  
        return false;  
    }  
    if(form1.age.value === "") {  
        alert("Please type your age the age feild.");  
        return false;  
    }  
    if(form1.gender.value === "") {  
        alert("Please type your gender the gender feild.");  
        return false;  
    }  
    if(form1.city.value === "") {  
        alert("Please type your city the city feild.");  
        return false;  
    }  
    return true;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:43:47.710

尝试

**HTML**

```
<input type='text' id='city'> <br />
  <input type='text' id='state'> <br />
  <input type='text' id='email'> <br />
  <input type='text' id='age'> <br />

<hr>
<a href="#" id="ok" style="">Click here </a>​​​​​​​​​​​​​​​​ 
```

**Javascript**

```
function id(e){
   return document.getElementById(e);
}

function saveChanges(){
   var city  = id('city').value,
       state = id('state').value,
       email = id('email').value,
       age   = id('age').value;

    alert("City : " + city + "\nState :" + state  +"\nEmail : " + email + "\n Age  : " + age);  

    return false;
}
window​.onload = function(){    
    document.getElementById("ok").onclick = saveChanges;
};​ 
```

***演示***：http: [//jsfiddle.net/Zjrd3/](http://jsfiddle.net/Zjrd3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T04:28:19.130

我假设您的保存功能会检查表单中的某些字段以提交它们。如果是这样，那么错误与链接或提交无关，问题在于您使用变量的方式。你不能只做city.value，你需要使用document.getElementById('city').value。这将导致 javascript 给你一个“变量未定义”错误并停止执行。正确的代码是：

```
function saveChanges() {
  var theCity = document.getElementById('city').value;
  var theState = document.getElementById('state').value;
  var theEmail = document.getElementById('email').value;
  var theAge = document.getElementById('age').value;
  var theGender = document.getElementById('gender').value;
  var theOther = document.getElementById('other').value;
    alert("theCity is: "+ theCity);
    alert("theState is: "+ theState);
    alert("theEmail is: "+ theEmail);
    alert("theAge is: "+ theAge);
    alert("theGender is: "+ theGender);
    alert("theOther is: "+ theOther);
}
window.onload=function (){
    document.getElementById('ok').onclick=saveChanges;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T04:45:54.850

`document.getElementById`不会适用于多个元素。ID 应该是唯一的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T04:20:53.547

href 是同一页。在运行该脚本之前，单击该按钮可能会重定向。尝试返回 false 或其他东西。

# struts2 - 简化 Freemarker 条件，让 struts2 自定义导航

> ID：13908209
> 
> 赞同：0
> 
> 时间：2012-12-17T04:17:49.790
> 
> 标签：struts2, freemarker

Struts2 + Freemarker。下面的代码工作正常，但我想知道任何人都可以进一步简化它。我看到重复的代码来生成 html 标签。

*下面的代码看起来很多生成带有 3 个链接的自定义菜单*

**有人有更好的解决方案吗？**

```
 <@s.set var="page" value="com.opensymphony.xwork2.ActionContext.name" />
    <@s.url action="home" var="urlHome" />
    <@s.url action="about" var="urlAbout" />
    <@s.url action="contact" var="urlContact" />

    <#if page=='home'>
        <@currentPage page="%{urlHome}" title="Home"/>
        <@s.a href="%{urlAbout}">About Us</@s.a>
        <@s.a href="%{urlContact}">Contact Us</@s.a>
    <#elseif page=='about' >
        <@s.a href="%{urlHome}">Home</@s.a>
        <@currentPage page="%{urlAbout}" title="About Us"/>
        <@s.a href="%{urlContact}">Contact Us</@s.a>
    <#elseif page=='contact' >
        <@s.a href="%{urlHome}">Home</@s.a>
        <@s.a href="%{urlAbout}">About Us</@s.a>
        <@currentPage page="%{urlContact}" title="Contact Us"/>
    <#else>
        <@currentPage page="%{urlHome}" title="Home"/>
        <@s.a href="%{urlAbout}">About Us</@s.a>
        <@s.a href="%{urlContact}">Contact Us</@s.a>
    </#if> 
```

**宏**

```
<#macro currentPage page title>
    <div class="menu-image">
        <img src="<@s.url value="/images/on-left.gif"/>"/>
    </div>
    <div class="on">
        <@s.a cssClass="over" href="${page}">${title}</@s.a>
    </div>
    <div class="menu-image">
        <img alt="" src="<@s.url value="/images/on-right.gif"/>"/>
    </div>
</#macro> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:28:13.703

比较宏内部的页面名称或设置为宏的属性

```
<@s.set var="page" value="com.opensymphony.xwork2.ActionContext.name" />

<@aPage pageUrl=urlHome title="Home" name="home">
<@aPage pageUrl=urAbout title="About us" name="about">
<@aPage pageUrl=urlContact title="Contact us" name="contact">

<@aPageWithBoolean pageUrl=urlHome title="Home" isOn=(page=="home")>
<@aPageWithBoolean pageUrl=urAbout title="About us" isOn=(page=="about")>
<@aPageWithBoolean pageUrl=urlContact title="Contact" isOn=(page=="contact")> 
```

宏

```
<#macro aPage pageUrl title name>
    <#if name == page>
        <div class="menu-image">
            <img src="<@s.url value="/images/on-left.gif"/>"/>
        </div>
        <div class="on">
            <@s.a cssClass="over" href="${pageUrl}">${title}</@s.a>
        </div>
        <div class="menu-image">
           <img alt="" src="<@s.url value="/images/on-right.gif"/>"/>
        </div>
    <#else>
        <@s.a cssClass="over" href="${pageUrl}">${title}</@s.a>
    </#if>
</#macro> 
```

或使用布尔值

```
<#macro aPageWithBoolean pageUrl title isOn=false>
    <#if isOn>
        <div class="menu-image">
            <img src="<@s.url value="/images/on-left.gif"/>"/>
        </div>
        <div class="on">
            <@s.a cssClass="over" href="${pageUrl}">${title}</@s.a>
        </div>
        <div class="menu-image">
           <img alt="" src="<@s.url value="/images/on-right.gif"/>"/>
        </div>
    <#else>
        <@s.a cssClass="over" href="${pageUrl}">${title}</@s.a>
    </#if>
</#macro> 
```

您还可以使用带有 CSS 的包装器 div 并在此基础上显示/隐藏项目。

# php - HTML DOM 文档解析

> ID：13908212
> 
> 赞同：1
> 
> 时间：2012-12-17T04:18:50.157
> 
> 标签：php, html, dom, domdocument

我是 DOM 文档的新手。我有这个 html：

```
 <tr class="calendar_row" data-eventid="39657">
        <td class="alt1 eventDate smallfont" align="center">Sun<div class="eventday_multiple">Dec 9</div></td>
        <td class="alt1 smallfont" align="center">3:34am</td>
        <td class="alt1 smallfont" align="center">USD</td>
    </tr>

    <tr class="calendar_row" data-eventid="39658">
        <td class="alt1 eventDate smallfont" align="center">Sun<div class="eventday_multiple">Dec 10</div></td>
        <td class="alt1 smallfont" align="center">5:14am</td>
        <td class="alt1 smallfont" align="center">EUR</td>
    </tr> 
```

我正在尝试使用以下代码首先获取 tr 中的内容：

```
 $ret = array();
    libxml_use_internal_errors(true); 
    $doc = new DOMDocument();
    $doc->loadHTML($html);
    //$doc->saveHTMLFile('textbox.php');

    $text = $doc->getElementsByTagName('tr');
    foreach ($text as $tag){
        $ret[] = $doc->saveHtml($tag); 
        echo $doc->saveHtml($tag); 
    } 
```

我不知道为什么要回显的值是整个文档而不是 tr 中的值..

其次，我还想获取 td 标签之间的值，例如 5:14 AM、EUR 等。但我不知道该怎么做。

请原谅菜鸟问题..

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:36:08.460

```
$doc = new DOMDocument();
$doc ->loadHTML("$html");
$tables = $doc->getElementsByTagName('table');
$table = $tables->item(0);//takes the first table in dom

foreach ($table->childNodes as $td) {
  if ($td->nodeName == 'td') {
    echo $td->nodeValue, "\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:32:32.827

传递一个元素来[`saveHtml`](http://php.net/manual/en/domdocument.savehtml.php)生成元素outerHTML而不是它的innerHTML，所以你得到它的标签属性和它的所有内容。当然你需要运行 PHP>=5.3.6 。

td 之间的值可以通过问题获得`$td->firstChild->nodeValue;`或仅在`$td->textContent;`哪里获得。`$td``<td>`

# perl - 比较具有不同编码的特殊字符

> ID：13908225
> 
> 赞同：1
> 
> 时间：2012-12-17T04:22:20.183
> 
> 标签：perl, special-characters

我正在解析一个 HTML 页面，并且我正在比较不同的字符以查看某个页面元素是否是我想要的。我正在获取每个元素的文本，我想确定最后一个字符是否是“-”长破折号字符。这是我到目前为止所拥有的：

`$currentiterator`是我正在使用的文本。

```
if((substr $currentiterator, -1, 1) eq "–") {
    print "long dash found"; ## obviously I will do something different
} 
```

但是，这个 if 语句永远不会返回 true。当我打印出最后一个字符并且它是一个包含长破折号的实例时，我得到了问号菱形的东西（�），我感觉我会遇到一些编码问题。我遇到的麻烦是弄清楚我应该将哪个组件转换为什么。我需要什么编码来转换我得到的字符`substring`？我假设我需要将“–”转换为相同的编码——但我将如何转换它们呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:31:33.087

[Encode](http://perldoc.perl.org/Encode.html)核心模块允许您在 Perl 中使用不同的字符编码。

在不了解程序设计的情况下，很难准确地说出您需要做什么。

可能是您没有正确设置输入的编码。这里有几种方法（文档中的所有示例；您需要找出所需的正确编码）：

解码一个字符串：

```
 $string = decode("iso-8859-1", $octets); 
```

使用适当的编码打开文件句柄：

```
open(INPUT,  "< :encoding(shiftjis)", $infile)
    || die "Can't open < $infile for reading: $!"; 
```

但是，也可能是 Perl 没有正确读取脚本中的 utf-8 字符。正如阿蒙所说，你应该[`use utf8`](http://perldoc.perl.org/utf8.html)确保它会。

最后，不正确的显示可能是由标准输出的编码引起的。您可以像这样设置默认输入/输出编码：

```
use encoding "euc-jp"; 
```

但是，即使那样，它也可能是您的终端能够处理编码的功能。请注意，输出编码本身不会导致此问题。它只会导致字符无法在您的调试打印消息中正确显示。

# python - 如何在ctypes中传回指针？

> ID：13908226
> 
> 赞同：12
> 
> 时间：2012-12-17T04:22:28.257
> 
> 标签：python, pointers, dll, char, ctypes

对ctypes不太了解，最近才开始使用它。

我在类 C 的 dll 中有一个简单的函数，它返回指向动态生成的字符串的指针。
它工作正常，但是，因为我为字符串手动分配了内存，我应该在使用后释放它。

我有这样的事情：

```
extern "C" char* DLL_EXPORT func(const char* str1, const char* str2)
{
    return getSomeString(str1, str2);
}

// Goal is to call this function correctly from Python.    
extern "C" void DLL_EXPORT freeMem(void *mem)
    {
        if(mem!=NULL)
            delete mem;
    } 
```

但我不知道，如何将收到的指针传回以在 Python 中删除？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T06:46:55.037

通常，您使用的每个函数`ctypes`都应声明其参数和返回类型，以便 Python 可以检查参数的正确数量和类型，并将 Python 对象参数转换为正确的 C 数据对象。不幸的是，在这种情况下，正常的返回值`func`应该是`c_char_p`，但会`ctypes`尝试提供帮助并将`c_char_p`返回值转换为 Python 字符串，从而无法访问原始 C 指针值。相反，您可以将返回类型声明为`POINTER(c_char)`并用于`cast`检索字符串值，从而使返回值成为`LP_c_char`可以释放的对象。

这是一个例子。请注意，声明正确`.restype`对于 64 位 Python 尤其重要，因为默认返回类型是`c_int`（32 位）并且可能会截断 64 位指针。此代码使用 32 位和 64 位版本进行了测试。

测试.c

```
#include <string.h>
#include <stdlib.h>

#ifdef _WIN32
#   define API __declspec(dllexport)
#else
#   define API
#endif

API char* func(const char* str1, const char* str2) {
    size_t len = strlen(str1) + strlen(str2) + 1;
    char* tmp = malloc(len);
    strcpy_s(tmp, len, str1);
    strcat_s(tmp, len, str2);
    return tmp;
}

API void freeMem(void *mem) {
    free(mem);
} 
```

测试.py

```
import ctypes as ct

dll = ct.CDLL('./test')
dll.func.argtypes = ct.c_char_p,ct.c_char_p
dll.func.restype = ct.POINTER(ct.c_char)
dll.freeMem.argtypes = ct.c_void_p,
dll.freeMem.restype = None

# Helper function to extract the return value as a Python object
# and always free the pointer.
def freeMem(a,b):
    p = dll.func(b'abcdef', b'ghijkl')
    print(p)
    s = ct.cast(p, ct.c_char_p).value
    dll.freeMem(p)
    return s

print(freeMem(b'abcdef', b'ghijkl')) 
```

输出：

```
<ctypes.LP_c_char object at 0x00000279D7959DC0>
b'abcdefghijkl' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T06:21:45.970

你在正确的轨道上。

```
// TestDLL.cpp
#include <string.h> // strcpy

extern "C" __declspec(dllexport) char* stringdup(const char* str) {
    char* p = new char[strlen(str)+1];
    strcpy(p,str);
    return p;
}

// if you have no good reason to use void*, use the type
// you've allocated. while it usually works for built-in
// types, it wouldn't work for classes (it wouldn't call
// the destructor)
extern "C" __declspec(dllexport) void stringfree(char* ptr) {
    // you don't need to check for 0 before you delete it,
    // but if you allocate with new[], free with delete[] !
    delete [] ptr; 
} 
```

在python中：

```
# Test.py
import ctypes

lib = ctypes.cdll.TestDLL

# this creates a c-style char pointer, initialized with a string whose
# memory is managed by PYTHON! do not attempt to free it through the DLL!
cstr = ctypes.c_char_p("hello ctypes")

# call the dll function that returns a char pointer 
# whose memory is managed by the DLL.
p = lib.stringdup(cstr)

# p is just an integer containing the memory address of the 
# char array. therefore, this just prints the address:
print p

# this prints the actual string
print ctypes.c_char_p(p).value

# free the memory through the DLL
lib.stringfree(p) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-18T09:35:46.033

为了我

```
#cdll.execute.restype = ctypes.c_char_p               # failed to free
cdll.execute.restype = ctypes.POINTER(ctypes.c_char)  # worked

p = cdll.execute('...')
print(
    ctypes.cast(p, ctypes.c_char_p).value.decode('utf-8')
)

cdll.free_pointer(p) 
```

# ruby-on-rails - 如果我只有 2 种类型的模型对象，我是创建一个 `model_type` 模型还是只在我的主模型中添加一个 `type` 属性更好？

> ID：13908229
> 
> 赞同：0
> 
> 时间：2012-12-17T04:22:59.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3

说我有一个模型`Banner`。我希望用户能够上传 2 个横幅 - `featured`, `side`.

我最好只创建一个`Banner_Type`模型还是应该`type`向我的模型添加一个属性`Banner`？

如果我只是添加一个`type`属性，那么我将如何查询这些类型？

视图会是什么样子，以及控制器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:52:53.963

我认为正确的方法是创建一个banner_type 模型，因为它使您可以灵活地在将来添加更多横幅类型。

我的建议如下：

## 表

```
*banner_types*
id
type

*banners*
id
#your banner columns
banner_type_id 
```

## 楷模

```
class BannerType < ActiveRecord::Base

  has_many :banners

end

class Banner < ActiveRecord::Base

  belongs_to :banner_type

end 
```

## 控制器

我不确定您对控制器的要求是什么，但它将与普通控制器一样。

## 看法

您可以将横幅类型称为，假设您有一个横幅列表

```
@banners.each do |banner|
  <p>
    <%= banner.banner_type.type%>
  </p>
end 
```

# sql - 有什么方法可以缩短这个 SQL Server 查询吗？

> ID：13908230
> 
> 赞同：0
> 
> 时间：2012-12-17T04:23:01.030
> 
> 标签：sql, sql-server

我在下面有这个查询，它工作正常，我得到了我需要的东西。我需要知道的是，这是编写此查询的正确方法，还是有任何方法可以缩短它？

我有 4 个表，第 1 个有分公司信息，第 2 个有客户信息，第 3 个有工程师信息，第 4 个有服务电话信息。

在服务调用表中，3 列与 3 个不同的工程师姓名匹配

这是查询

```
SELECT
    B.BranchName, C.Name AS CustomerName,D.FullName AS CallOpenedBy,
    A.CallOpenTime, A.CallMode, A.CallType, A.ReportedBy, 
    A.ReportedVia, A.ReportedProblem,
    A.MaterialsReceived, A.MisComments, A.CallPriority, A.EstimatedAmount,
    E.FullName AS EngineerName,  
    A.ActionTaken, A.CallClosedTime, 
    F.FullName AS CallClosedBy, A.Status, 
    A.Amount 
FROM
    TblServiceCalls A
INNER JOIN 
    TblBranchInfo B ON A.BranchID = B.BranchID
INNER JOIN 
    TblMainMaster C ON A.MasterID = C.MasterID
INNER JOIN 
    TblUserProfiles D ON A.CallOpenedBy = D.UserProID
INNER JOIN 
    TblUserProfiles E ON  A.Engineer = E.UserProID
INNER JOIN 
    TblUserProfiles F ON  A.CallClosedBy = F.UserProID 
```

我可以缩短最后 3 行的查询吗？提前谢谢你们:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:44:59.543

不，您不能，您在结果集中使用`D`,`E`和`F`，因此您必须加入这些表。`D.FullName AS CallOpenedBy`如果您从结果中删除了and之类的内容，则只能删除它们。`E.FullName AS
EngineerName``F.FullName AS CallClosedBy`

* * *

作为旁注（我敢打赌你问这个问题的最初原因），但是如果呼叫尚未结束并且`A.CallClosedBy`尚未分配给`F.UserProID`该行中的值，则将从结果中排除。

`LEFT OUTER JOIN`如果它们链接的 3 个列中的任何一个在目标表中可能没有相应的记录或可能为空，则您应该使用这 3 个表。

这是我会怎么做

```
Select B.BranchName, C.Name AS CustomerName,IsNull(D.FullName, '(Not Assigned)') AS CallOpenedBy,
A.CallOpenTime,A.CallMode, A.CallType,A.ReportedBy, A.ReportedVia, A.ReportedProblem,
A.MaterialsReceived, A.MisComments,A.CallPriority,A.EstimatedAmount,IsNull(E.FullName, '(Not Assigned)') AS        
EngineerName, A.ActionTaken, A.CallClosedTime,IsNull(F.FullName, '(Not Assigned)') AS CallClosedBy, A.Status, 
A.Amount From TblServiceCalls A
INNER JOIN TblBranchInfo B ON A.BranchID = B.BranchID
INNER JOIN TblMainMaster C ON A.MasterID = C.MasterID
LEFT OUTER JOIN TblUserProfiles D ON A.CallOpenedBy = D.UserProID
LEFT OUTER JOIN TblUserProfiles E ON  A.Engineer = E.UserProID
LEFT OUTER JOIN TblUserProfiles F ON  A.CallClosedBy = F.UserProID 
```

现在，如果目标表中存在值`NULL`或记录不存在，它将`(Not Assigned)`在输出中显示而不是排除该行。

# actionscript - 由于不同包中的类名相同，flashbuilder 无法检测到类

> ID：13908231
> 
> 赞同：2
> 
> 时间：2012-12-17T04:23:08.247
> 
> 标签：actionscript, flash-builder, flexunit

我有一个有名字的类`com.me.Async`，当我开始异步单元测试时，不幸的是 flexunit 的库有相同的类`org.flexunit.async.Async`，所以 flashbuild 显示错误**-1120：访问未定义的属性 org。**.
如何解决此类问题？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:06:46.857

当您有两个具有相同名称的类，但在同一范围内一起使用不同的包时，您必须至少使用完整的类路径。因此，如果我想在同一个类中同时使用 flash.display.Sprite 和 starling.display.Sprite，我会选择使用完整的类路径，并让导入处理其他的。

```
import flash.display.Sprite
class Example extends Sprite {
public function example():void
{
   var myflashSprite:Sprite = new Sprite();
   var myStarlingSprute:starling.display.Sprite = new starling.display.Sprite();
}
} 
```

# r - 在 r 中舍入一个数字（下限）

> ID：13908232
> 
> 赞同：0
> 
> 时间：2012-12-17T04:23:13.587
> 
> 标签：r, rounding, floor

> **可能重复：**
> [为什么这些数字不相等？](https://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal)

我试图四舍五入。以下是好的：

```
floor(3)
[1] 3 
```

然而：

```
floor (0.6 / 0.2)
[1] 2 
```

或者

```
 x <- 0.6 / 0.2
 floor (x) 
[1] 2 
```

为什么不是 3 ？

编辑：

我不关心机制，而是希望它始终四舍五入为 3，以便我的功能正常工作。

编辑2：

我并没有考虑复杂的事情（如在下面的讨论中，而不是试图证明好像证明 R 没有做它的工作），在下面的建议的帮助下，特别是来自 Matthew Lundberg 的建议，我可以找到解决办法，可能是一些像我一样觉得有用。所以这就是我所做的 -

```
x1 <- 0.6 *100
x2 <- 0.2 *100
floor (x1/x2)
[1] 3 
```

# objective-c - 错误：CorePlot0 不包含核心图的有效 pid

> ID：13908241
> 
> 赞同：2
> 
> 时间：2012-12-17T04:24:09.497
> 
> 标签：objective-c, core-plot

我正在尝试将 coreplot 集成到我的 mac 应用程序中。

有人有简单的步骤来集成它吗？

我从这里得到了示例代码。 [核心情节](http://code.google.com/p/core-plot/)

坚果当我尝试将核心情节与我自己的应用程序集成时，它给了我这个错误。还有一份文件用于遵循这些步骤，但我没有得到它。如果有人在理解语言方面有任何其他步骤，那么请建议我这对我来说很紧急。

到目前为止，我一直遵循这一点。

*   将其框架文件夹添加到我的应用程序文件夹中。

*   我将 coreplot 添加到我的目标依赖项中，并使用库构建了 phase->link 二进制文件

*   我还设置了其他链接器标志 -all_load, -ObjC

还有哪些步骤？所以它给出了这个错误？

在某处我找到了删除此文件`checkformisalignedlayers.d`文件的解决方案，但在删除它后会产生新的错误。

我还找到了设置标题搜索路径的建议，但没有得到如何设置，因为我已将整个框架文件夹添加到我的应用程序中，因为当我仅拖放 .xcodeproject 时，它不允许我导入其文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:14:24.737

我按照本[教程](http://recycled-parts.blogspot.in/2011/08/coreplot-hello-world.html)进行了`CorePlot`. 我遇到了同样的问题，但我确实导入了，

1.  仅添加`TestResources, Source, and iPhoneOnly Folders`和`CorePlot-CocoaTouch.h`
2.  搜索您的**测试**`project resources`并删除所有`test`在您的`Source folder`.
3.  `checkformisalignedlayers.d`在您的`TestResources`文件夹中删除。
4.  运行`CorePlot-CocoaTouch.xcodeproj`和`CorePlot.xcodeproj`分开。你会找到`build`文件夹。
5.  在该`build`文件夹中，您会`CorePlot.framework`在`Debug`文件夹`libCorePlot-CocoaTouch.a`下和文件夹下找到`Debug-iphoneos`。
6.  打开你的`Project -> Build Phases -> Link Binary With Libraries`并拖放`CorePlot.framework`和`libCorePlot-CocoaTouch.a`那里。
7.  在您的部分中添加这些`-all_load and -ObjC`标志。`Build Settings -> Other Linker Flags`
8.  添加`QuartzCore framework`.

**注意：**
完成此过程后，删除您`Derived Data`的`Organizer`和`Clean`.`Build`

# php - php看不到mysql、mysqli等一些扩展

> ID：13908244
> 
> 赞同：0
> 
> 时间：2012-12-17T04:24:35.083
> 
> 标签：php

我安装了 apache web 服务器、php 和 mysql。在配置文件中一切都很好（在 php.ini 和 httpd.conf 中）。ext 目录中的 dll 存在。但是当我运行 phpinfo() 时，没有 mysql。可能是什么问题？我的操作系统 Windows Server 2008 R2 (x64)，在 C:\Program Files\PHP 文件夹中安装了 php 5.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:33:05.887

我不确定在 Windows 上，但我知道在 Linux 上你必须安装 php-mysql 包才能使用这些扩展。那是允许 PHP 与 MySQL 对话的接口。我强烈建议不要使用 mysql 扩展并使用 mysqli 或 PDO（PHP 数据对象）。

PDO 安装信息 - [http://php.net/manual/en/pdo.installation.php](http://php.net/manual/en/pdo.installation.php)

mysqli 信息 - [http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

希望对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:51:31.717

我找到了如何处理这个问题。首先，我必须将 ;C:\Program Files\PHP 添加到环境变量路径并重新启动计算机。重新启动后一切开始工作。

# c# - 刷新视图内容

> ID：13908245
> 
> 赞同：0
> 
> 时间：2012-12-17T04:24:46.207
> 
> 标签：c#, asp.net

我使用 Multiview 来显示一些图表。首次加载时，页面显示 2 个下拉菜单和一个 GO 按钮。我使用后面的代码根据下拉菜单中的选择来选择要显示的视图。

该页面有一个 AJAX 刷新，带有一个允许用户停止自动刷新的按钮。该按钮禁用计时器，更改按钮文本，将其斜体并禁用按钮本身。这很好用。

用户选择他们的选项并点击 GO 并显示请求的视图。我不允许打开自动刷新的方法。纯粹是为了我自己。我认为最简单的方法是只允许用户再次点击 GO 按钮（管理当前视图的选择仍然在下拉列表中选择），这将在默认情况下启用自动刷新重新加载视图。

下面是我目前只有一个视图来演示的基本代码。

ASP.NET

```
<asp:Content ID="HeadContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script type="text/javascript">
        function SetText(id) {
            if (id.value == "Disable automatic page refresh")
                id.value = "Processing Request ...";
        }
    </script>
</asp:Content>

<asp:DropDownList ID="itemDropdown" runat="server">
            ASP LIST ITEMS
</asp:DropDownList>
<asp:DropDownList ID="timeDropdown" runat="server">
            ASP LIST ITEMS
</asp:DropDownList>
<asp:Button ID="Button1" runat="server" Text="Go" OnClick="Button1_Click" />
</p>
<p>
    <asp:Label ID="errorLabel" runat="server" CssClass="errorLabel"></asp:Label>
</p>

<asp:MultiView ID="MultiView1" runat="server">
    <asp:View ID="View1" runat="server">
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" ViewStateMode="Enabled" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:Button ID="Button2" runat="server" Text="Disable automatic page refresh" OnClick="Button2_Click" OnClientClick="return SetText(this)" /></p>
        CONTENT HERE
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
            </Triggers>
        </asp:UpdatePanel>
        <asp:Timer ID="Timer1" runat="server" Interval="60000">
        </asp:Timer>
    </asp:View> 
```

代码背后

```
protected void Button1_Click(object sender, EventArgs e)
{    
    if (errorLabel.Text != null)
    {
        errorLabel.Text = string.Empty;
    }

    if (itemDropdown.SelectedValue == "5" && timeDropdown.SelectedValue == "0.5")
    {
        MultiView1.ActiveViewIndex = 0;
        UpdatePanel1.Update();
    }
    IF CONTINUES ...
    else
    {
        errorLabel.Text = "You did not choose a valid Item or Timeframe.  Please try again.";
    }
}

protected void Button2_Click(object sender, EventArgs e)
{
    Timer1.Enabled = false;
    Button2.Text = "Automatic Refresh Disabled";
    Button2.Font.Italic = true;
    Button2.Enabled = false;
} 
```

我的问题是，当我单击 GO 按钮时，更新的按钮条件仍然存在。IE。名称已更改、斜体和禁用。有没有办法强制视图完全重新加载？我希望这是有道理的。我试过 UpdatePanel1.Update(); 如上面在 Button1_Click 方法中所见，但它不起作用。

使用 Ann L 的建议，我尝试了以下方法，但没有一个可行：

```
protected void Button2_Click(object sender, EventArgs e)
{
    Timer1.Enabled = false;
    Button2.Text = "Automatic Refresh Disabled";
    Button2.Font.Italic = true;
    Button2.Enabled = false;

    Timer1.Enabled = true;
    Timer1.Interval = 10000;
    Button2.Text = "Disable automatic page refresh";
    Button2.Font.Italic = false;
    Button2.Enabled = true;
}

protected void Button2_Click(object sender, EventArgs e)
{
    Timer1.Enabled = true;
    Timer1.Interval = 10000;
    Button2.Text = "Disable automatic page refresh";
    Button2.Font.Italic = false;
    Button2.Enabled = true;     

    Timer1.Enabled = false;
    Button2.Text = "Automatic Refresh Disabled";
    Button2.Font.Italic = true;
    Button2.Enabled = false;
}

protected void Button2_Click(object sender, EventArgs e)
{
    if (!Button2.Enabled)
    {
        Timer1.Enabled = true;
        Timer1.Interval = 10000;
        Button2.Text = "Disable automatic page refresh";
        Button2.Font.Italic = false;
        Button2.Enabled = true;
    }
    else
    {
        Timer1.Enabled = false;
        Button2.Text = "Automatic Refresh Disabled";
        Button2.Font.Italic = true;
        Button2.Enabled = false;
        Button2.ToolTip = "Click again to resume automatic refresh";
    }
} 
```

为了解决这个问题，我将以下内容放入我的代码后面：

```
protected void Button2_Click(object sender, EventArgs e)
{
    if (Button2.Text == "Disable automatic page refresh")
    {
        Timer1.Enabled = false;
        Button2.Text = "Automatic Refresh Disabled";
        Button2.Font.Italic = true;
        Button2.ToolTip = "Click again to resume automatic refresh";
    }
    else
    {
        Timer1.Enabled = true;
        Timer1.Interval = 10000;
        Button2.Text = "Disable automatic page refresh";
        Button2.Font.Italic = false;
        Button2.ToolTip = "Click to disable automatic page refresh";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:38:19.677

好的，假设我了解您的要求（如何撤消对 所做的更改`Button2`），我将这样做：

以下代码将进入`Button1_Click`：

```
if(!Button2.Enabled)
{
    Timer1.Enabled = true;  // You might also have to reset its properties
    Button2.Text = "Disable automatic refresh";
    Button2.Font.Italic = false;
    Button2.Enabled = true;
} 
```

`UpdatePanel`如果您没有更改任何控件的状态，则更新 an无效。这不像刷新 iframe 或整个页面：它只是重新呈现页面，使更改可见。它不会重置任何东西的值或属性。

我不是`UpdatePanel`专家，但我认为将这段代码添加到`Button1_Click`（这是一个完整的回发，是吗？）应该让你重新开始。

# c++ - 在 Makefile 中指定库路径

> ID：13908246
> 
> 赞同：1
> 
> 时间：2012-12-17T04:24:55.387
> 
> 标签：c++, gcc, g++, autoconf, automake

我正在为 C++ 项目使用 autoconf 和 automake，我希望 g++ 足够聪明，可以查看`/usr/include/<library-name>`我的源代码何时已经拥有

```
#include <libxml/xpath.h>
#include <libxml/xpathInternals.h>
#include <libxml/parser.h>
#include <libxml/tree.h>
#include <curl/curl.h>
#include <openssl/md5.h> 
```

当我刚刚运行时`./configure && make`，我收到此错误

```
g++ -DHAVE_CONFIG_H -I. -I..   -Wall -O2   -g -O2 -MT azurefs.o -MD -MP -MF .deps/azurefs.Tpo -c -o azurefs.o azurefs.cpp
azurefs.cpp:33:26: fatal error: libxml/xpath.h: No such file or directory
compilation terminated 
```

我必须使用`CCXXFLAGS`这种方式包含库路径

```
$ CXXFLAGS=-I/usr/include/libxml2 ./configure && make 
```

有没有更好的方法来编写我的代码、Makefile 或 autoconf 文件，以便 g++ 可以在其中正确查找库`/usr/include/<library-name>` ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:12:00.450

在我的 Makefile.am 中，我有以下行来添加 g++ 参数：

```
AM_CPPFLAGS = -I$(top_srcdir)/src/include/ --std=c++0x 
```

我认为你需要这样的东西：

```
AM_CPPFLAGS = `pkg-config --cflags libxml-2.0` 
```

因此，您也不必担心包含在另一个系统上的位置。

# mysql - MySQL删除左连接上的重复列，3个表

> ID：13908249
> 
> 赞同：15
> 
> 时间：2012-12-17T04:25:36.587
> 
> 标签：mysql, database, join, mysql-workbench

我有三个表，每个表都有一个外键。当我执行连接时，我得到重复的列。

给定

```
mysql> describe Family;
+---------------+-------------+------+-----+---------+-------+
| Field         | Type        | Null | Key | Default | Extra |
+---------------+-------------+------+-----+---------+-------+
| HEAD_name     | varchar(45) | NO   | PRI |         |       |
| Family_Size   | int(11)     | NO   |     |         |       |
| Gender        | char(1)     | NO   |     |         |       |
| ID_Number     | int(11)     | NO   |     |         |       |
| DOB           | date        | NO   |     |         |       |
| Supervisor_ID | int(11)     | NO   | MUL |         |       |
+---------------+-------------+------+-----+---------+-------+
6 rows in set (0.00 sec)

mysql> describe SUPERVISOR;
+-------------------+---------------+------+-----+---------+-------+
| Field             | Type          | Null | Key | Default | Extra |
+-------------------+---------------+------+-----+---------+-------+
| Supervisor_ID     | int(11)       | NO   | PRI |         |       |
| Supervisor_Name   | varchar(45)   | NO   |     |         |       |
| Supervisor_Number | decimal(10,0) | NO   |     |         |       |
| Center_ID         | int(11)       | NO   | MUL |         |       |
+-------------------+---------------+------+-----+---------+-------+
4 rows in set (0.00 sec)

mysql> describe CENTER;
+-----------+-------------+------+-----+---------+-------+
| Field     | Type        | Null | Key | Default | Extra |
+-----------+-------------+------+-----+---------+-------+
| Center_ID | int(11)     | NO   | PRI |         |       |
| Location  | varchar(45) | NO   |     |         |       |
+-----------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec) 
```

我的查询语句：

```
SELECT * from Family
   JOIN SUPERVISOR on ( Family.Supervisor_ID = SUPERVISOR.Supervisor_ID)
   JOIN CENTER on (SUPERVISOR.Center_ID = CENTER.Center_ID); 
```

我的目标是从连接中获取所有列中的一行，而没有重复的列。那么我应该使用什么 SQL 语句语法呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-17T04:32:19.340

默认情况下，如果你使用 MySQL 将返回所有表的所有列`*`。您将需要在查询中显式输入列名，以便以您想要的方式检索它们。使用如下查询：

```
SELECT A.HEAD_name, A.Family_Size, A.Gender, A.ID_Number, A.DOB,
    B.Supervisor_ID, B.Supervisor_Name, B.Supervisor_Number,
    C.Center_ID, C.Location
FROM Family A
JOIN SUPERVISOR B on ( A.Supervisor_ID = B.Supervisor_ID)
JOIN CENTER C on (B.Center_ID = C.Center_ID); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-11T18:02:44.797

该问题可以通过“USING”关键字来解决。

```
SELECT * from Family
   JOIN SUPERVISOR on ( Family.Supervisor_ID = SUPERVISOR.Supervisor_ID)
   JOIN CENTER on (SUPERVISOR.Center_ID = CENTER.Center_ID); 
```

在您的情况下，查询将变为

```
SELECT * FROM FAMILY 
  JOIN (SUPERVISOR JOIN CENTER USING(Center_ID)) USING(Supervisor_ID); 
```

要点很简单，如果您有两个表 A(a,b) 和 B(b,c)，那么在加入后以 (a,b,c) 的形式生成结果

```
Select *
    from A JOIN B USING(b); 
```

将给出三列的结果集（a，b，c）

注意：由于我不知道我们是否可以在 Using 中使用多个参数，因此我将其作为子查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T04:36:09.653

您没有得到重复的列，您真正得到的是表 Family（即 Family.Supervisor_ID）中的 Supervisor_ID 列和表 Supervisor 中的 Supervisor_ID（即 Supervisor.Supervisor_ID），但对于您的结果集，您将两者都视为 Supervisor_ID ，这就是为什么你认为它们是重复的。Center_iD 也会发生同样的情况。

解决方案是从每个表中指定您需要的字段，并决定是否需要获取 Supervisor_ID 和 Center_ID 以及从哪个表中获取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T04:38:44.000

据奥利利说，

寻找*解释计划*。
您可以从 y 内部连接中执行 _select x .... 其中 w=z ... 这只是一个示例

# ruby-on-rails - 为什么我在红宝石上失败了？我认为这与路径有关，但我真的不知道

> ID：13908250
> 
> 赞同：0
> 
> 时间：2012-12-17T04:25:37.620
> 
> 标签：ruby-on-rails, bash, path, rubygems, rvm

我不知道我做错了什么，但是在我的 Rails 应用程序中，我不断收到错误，它找不到一些 gem，我捆绑安装，它仍然无法正常工作，我尝试查看 ruby​​ 版本的版本我有 rvm，所以我输入 rvm，即使我安装了两次，它也找不到。我尝试卸载并重新安装东西，但我完全迷失了。

```
$ rails c
Could not find bcrypt-ruby-3.0.1 in any of the sources
Run `bundle install` to install missing gems.

$ rvm -version
-bash: rvm: command not found 
```

对我来说，这是一个反复出现的问题，真的让我慢了下来。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:57:56.100

这可能是答案？ [Rails：在任何来源中都找不到 bcrypt-ruby-3.0.1](https://stackoverflow.com/questions/10677604/rails-could-not-find-bcrypt-ruby-3-0-1-in-any-of-the-sources)

对于 RVM，如果您确定已安装它，请确保您拥有它的路径。 [设置 RVM 路径？](https://stackoverflow.com/questions/7027784/setting-the-rvm-path)

或者如果您刚刚安装了 RVM，则只需打开一个新终端并检查版本

`rvm --version`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:26:46.857

再次开始安装 RVM：

```
\curl -L https://get.rvm.io | bash -s -- --rails 
```

确保阅读所有输出并按照说明进行操作。

然后观看 RVM 截屏视频 => [http://screencasts.org/episodes/how-to-use-rvm](http://screencasts.org/episodes/how-to-use-rvm)

# newline - 尽管在 Windows 上运行，但使用 LF lineendings 使 sublime 保存新文件？

> ID：13908253
> 
> 赞同：0
> 
> 时间：2012-12-17T04:26:14.990
> 
> 标签：newline, text-editor, sublimetext2

我现在在 Windows 上运行 sublime text，每次我创建一个新的代码文件并保存它时，它总是出现`CRLF`，无论我将菜单选项设置为“unix”多少次。

在可能的范围内，我想将 sublime 设置为永远不会再用 Windows 行结尾写出另一个文件。

**我该怎么做？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:44:03.960

您可以`default_line_ending`在设置文件中将其设置`unix`为如下简化示例所示。设置文件可以在“首选项”>“设置”菜单选项中找到。这将适用于新文件。这是我的首选项文件中的一个小片段，它设置为“unix”。

```
{
    // Determines what character(s) are used to terminate each line in new files.
    // Valid values are 'system' (whatever the OS uses), 'windows' (CRLF) and
    // 'unix' (LF only).
    "default_line_ending": "unix",
} 
```

[在 sublime text site 上](https://sublime-text-unofficial-documentation.readthedocs.org/en/latest/reference/settings.html?highlight=default_line_ending)有一些额外的文档。

# objective-c - 使用 CoreLocation 获取用户状态

> ID：13908254
> 
> 赞同：0
> 
> 时间：2012-12-17T04:26:15.427
> 
> 标签：objective-c, ios, core-location, cllocationmanager

我正在使用 CoreLocation 来获取用户的经纬度坐标。是否有一种简单或标准化的方式来获取用户的状态前缀？例如，如果用户从加利福尼亚启动应用程序，我会得到 CA？我不希望使用需要将地理坐标发送到的第三方应用程序。如果我可以创建一种类似于我用来获取以下纬度的方法，那就太好了。

```
- (NSString *)getUserLatitude
{
NSString *userLatitude = [NSString stringWithFormat:@"%f", 
locationManager.location.coordinate.latitude];
return userLatitude;
} 
```

如果您有任何想法，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:37:45.340

您必须使用[CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)的反向地理编码功能。

具体来说，您需要使用`reverseGeocodeLocation:completionHandler:`将返回给您的 completionHandler 一个`CLPlacemark`对象的方法。

此类对象将具有许多用户友好的地理信息，并且您可能希望使用其`administrativeArea`属性，根据文档，该属性将包含您要查找的内容（如果有）。

> **行政区**
> 
> 与地标关联的州或省。（只读）
> 
> @property(nonatomic, readonly) NSString *administrativeArea
> 
> **讨论** 例如，如果地标位置是 Apple 的总部，则此属性的值将是字符串“CA”或“California”。

# c# - WebBrowser 控件获取发布数据

> ID：13908256
> 
> 赞同：0
> 
> 时间：2012-12-17T04:26:42.510
> 
> 标签：c#, winforms, post, webbrowser-control

我在浏览器控件上显示特定网页，并且不允许他们浏览到任何其他页面。

当用户单击提交按钮转到下一页时，我需要抓取发布数据，然后显示页面。

我以前没有使用过浏览器控件，所以我需要获取此信息然后显示页面。

我的网页显示没有任何问题，但我不确定在他们点击提交后如何获取发布数据。

到目前为止，这是我的表格...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ssscc
{
  public partial class GatewayNavigation : Form
  {
    public Size WindowSize { set; get; }

    public GatewayNavigation()
    {
      InitializeComponent();
      InitializeEvents();
      Size = GatewayNavigationFormSettings.FormSize;
    }

    private void InitializeEvents()
    {
      Load += GatewayNavigationLoad;
      webBrowser_Gateway.DocumentCompleted += WebBrowserGatewayDocumentCompleted;
      webBrowser_Gateway.ProgressChanged += WebBrowserGatewayProgressChanged;
    }

    void WebBrowserGatewayProgressChanged(object sender, WebBrowserProgressChangedEventArgs e)
    {
      if (e.MaximumProgress > 0)
      {
        int prog = (int)(100 * e.CurrentProgress / e.MaximumProgress);
        if (prog > 99)
        {
          prog = 100;
        }
        progressBar1.Value = prog;
      }
    }

    void WebBrowserGatewayDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
      progressBar1.Visible = false;
    }

    private void GatewayNavigationLoad(object sender, EventArgs e)
    {
      webBrowser_Gateway.AllowNavigation = false;
      webBrowser_Gateway.AllowWebBrowserDrop = false;
      webBrowser_Gateway.Navigate(UrlBuild.FullUrl);
    }
  }
} 
```

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:40:35.180

处理`WebBrowser.Navigating`事件并检查`WebBrowserNavigatingEventArgs.Url`。

编辑：我很抱歉，我的回答具有误导性。您不能从中提取`POST`参数。我做了一些研究，发现[了这个问题](https://stackoverflow.com/questions/141626/how-can-i-access-postdata-from-webbrowser-navigating-event-handler)，希望对解决问题有所帮助。我已经尝试了使用`dynamic`关键字的示例，但它似乎对我不起作用。

# android - Android - 通过点击按钮使用 facebook 登录

> ID：13908257
> 
> 赞同：2
> 
> 时间：2012-12-17T04:27:06.713
> 
> 标签：android, facebook, login, onclicklistener

我通过 facebook 开发者网站[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/关注 android 登录](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

本教程（使用 facebook 登录创建新的 android 项目）第 6 步。一切正常。但它是第一次加载时登录。

我希望它在单击按钮时登录，成功后它会进入另一个活动。

这是来自 facebook 开发者的教程

```
 package com.firstandroidapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.widget.TextView;
import com.facebook.*;
import com.facebook.model.*;

public class MainActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {

      // callback when session changes state
      @Override
      public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened()) {

          // make request to the /me API
          Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

            // callback after Graph API response with user object
            @Override
            public void onCompleted(GraphUser user, Response response) {
              if (user != null) {
                TextView welcome = (TextView) findViewById(R.id.welcome);
                welcome.setText("Hello " + user.getName() + "!");
              }
            }
          });
        }
      }
    });
  }

  @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:01:37.043

您需要从 onCompleted 中开始您的下一个 Activity。

基本上：

```
Intent intent = new Intent(MainActivity.this,nextActivity.class);
startActivity(intent); 
```

# java - 如何将位图 ArrayList 保存到文件中

> ID：13908258
> 
> 赞同：1
> 
> 时间：2012-12-17T04:27:19.797
> 
> 标签：java, android, image, list, bitmap

我正在尝试将位图列表保存到文件中。基本上，我想存储它以供将来参考，这样当用户从图库中选择图像时，即使应用程序关闭，它也会保留在那里。

这就是我想要做的？但是得到了一些异常——BufferUnderFlowException、OutOfMemoryException。问题似乎是 Bitmap List 的内存非常大。有没有更好的方法来做到这一点？

```
 final   List<Bitmap> bitmapcontent=new ArrayList<Bitmap>();
     ImageView imageView;
Gallery gallery;

private static byte[] bytesar;
ByteBuffer dst;
private void savethebitmap() throws IOException, ClassNotFoundException {

    try {
        FileOutputStream fos = openFileOutput("bitmapimage", Context.MODE_PRIVATE);
        ObjectOutputStream out=new ObjectOutputStream(fos);
        out.writeInt(bitmapcontent.size());

        for(int i=0;i<bitmapcontent.size();i++){

            out.writeInt(bitmapcontent.get(i).getRowBytes());
            out.writeInt(bitmapcontent.get(i).getHeight());
            out.writeInt(bitmapcontent.get(i).getWidth());

            int bmSize = bitmapcontent.get(i).getRowBytes() * bitmapcontent.get(i).getHeight();
            if(dst==null || bmSize > dst.capacity())
                dst= ByteBuffer.allocate(bmSize);

            out.writeInt(dst.capacity());
            dst.position(0);

            bitmapcontent.get(i).copyPixelsToBuffer(dst);
            if(bytesar==null || bmSize > bytesar.length)
                bytesar=new byte[bmSize];

            dst.position(0);
            dst.get(bytesar);

            out.write(bytesar, 0, bytesar.length);

        }

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private void loadthebitmap() throws IOException,ClassNotFoundException{

    try {
        freeBitmaps();
        FileInputStream fos = openFileInput("bitmapimage");
        ObjectInputStream in=new ObjectInputStream(fos);
        int size=in.readInt();
        for(int i=0;i<size;i++){

             int height=in.readInt();
                int width=in.readInt();

                int bmSize=in.readInt();

                if(bytesar==null || bmSize > bytesar.length)
                    bytesar= new byte[bmSize];

                int offset=0;

                while(in.available()>0){
                    offset=offset + in.read(bytesar, offset, in.available());
                }

                if(dst==null || bmSize > dst.capacity())
                    dst= ByteBuffer.allocate(bmSize);
                dst.position(0);
                dst.put(bytesar);
                dst.position(0);
            Bitmap    myVideoScreenshotBm=Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
                myVideoScreenshotBm.copyPixelsFromBuffer(dst);
             bitmapcontent.add(myVideoScreenshotBm);

        }

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:31:17.590

可能是arraylist太大，堆无法处理。尝试使用以下命令启动 VM：

```
-Xmx2G -Xms1G 
```

-Xmx 代表最大内存，-Xms 代表在开始时分配的内存。G代表GB，M代表MB。

在上面的评论中回复G_S，看来他已经习惯于`ObjectOutputStream`序列化arraylist了。

编辑：

如果设备没有太多内存，您可能想尝试将位图分解成块，例如块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:35:15.680

`out.writeObject(bitmapContent)`和鲍勃（应该是）你的叔叔......如果你的内存不足，请使用建议来增加你的内存大小。还有[更多提示](http://javarevisited.blogspot.sg/2011/11/hotspot-jvm-options-java-examples.html)。祝你好运，让我知道你过得怎么样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T04:37:06.020

`ObjectOutputStream`缓存写入它的对象。所以要么使用简单的`DataOutputStream`，要么调用[`ObjectOutputStream.reset`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html#reset%28%29)

```
 out.write(bytesar, 0, bytesar.length);
    out.flush();
    out.reset(); 
```

# r - 如何在 ddply 中使用多元函数？

> ID：13908260
> 
> 赞同：1
> 
> 时间：2012-12-17T04:28:04.260
> 
> 标签：r, plyr

我正在尝试使用 ddply 解析跨 data.frame 的多元函数，以便检测每组的多元异常值。我希望使用 mvoutlier 包的 sign1 函数的 wfinal01 值获得一个向量或一个包含 1（内点）和 0（离群点）的新列。以下代码是我尝试过的示例，但没有成功：

```
library(plyr)
library(mvoutlier)
data(coffee)
myFunc<- function(X) sign1(unclass(X), qcrit=0.975)$wfinal01
ddply(coffee, .(sort), transform, outliers=myFunc(c(Metpyr, `5-Met`, furfu))) 
```

返回以下错误消息。

```
Erreur dans apply(x, 2, mad) : dim(X) must have a positive length 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:32:27.810

您的问题是`c`创建一个数字向量，您希望在其中传递一个包含三列的矩阵。您可以使用它`cbind`来执行此操作。

```
ddply(coffee, .(sort), transform, outliers=myFunc(cbind(Metpyr, `5-Met`, furfu)))
   Metpyr X5.Met furfu    sort outliers
1   12.50   8.51  6.20 arabica        0
2    5.33  11.80 17.80 arabica        1
3    2.56   7.16 13.67 arabica        0
4    8.59   8.40 14.39 arabica        1
5    8.22  14.86 20.35 arabica        1
6    7.73  12.23 21.02 arabica        1
7    6.07  12.60 14.25 arabica        1
8    5.88  11.19 15.39 arabica        1
9   10.34  11.90  9.81 arabica        1
10   6.26  10.49 16.90 arabica        1
11   5.47  15.04 24.87 arabica        1
12   1.39  12.76 19.51 arabica        1
13   5.10  13.42 16.93 arabica        1
14   3.72  12.65 21.35 arabica        1
15   4.33  12.72 18.47 arabica        1
16   7.38  15.00 21.58 arabica        1
17  12.13  11.68 15.59 blended        1
18  14.41   8.99 16.42 blended        1
19   8.86   6.98  8.40 blended        1
20  15.47   5.89  5.37 blended        1
21   7.55  13.74 22.26 blended        1
22  14.47   8.76 11.28 blended        1
23  11.34  12.62 14.15 blended        1
24  14.25   8.02  8.69 blended        1
25   6.85  13.38 23.83 blended        1
26   9.93   9.05  7.52 blended        1
27   8.59  14.29 18.50 blended        1 
```

向量只有 1 维，`apply`需要大于 2 维的矩阵或数组（因此出现错误）

* * *

编辑——按列引用

我认为按列号引用是危险的，但是如果您要使用，这是可能的`data.table`

`data.table`将比 更快、更高效`ddply`。

```
library(data.table)
CD <- data.table(coffee)

CD[, outlier := sign1(.SD, qcrit = 0.975)$wfinal01,by = sort, .SDcols = 1:3]
CD
    Metpyr 5-Met furfu    sort outlier
 1:  12.50  8.51  6.20 arabica       0
 2:   5.33 11.80 17.80 arabica       1
 3:   2.56  7.16 13.67 arabica       0
 4:   8.59  8.40 14.39 arabica       1
 5:   8.22 14.86 20.35 arabica       1
 6:   7.73 12.23 21.02 arabica       1
 7:   6.07 12.60 14.25 arabica       1
 8:   5.88 11.19 15.39 arabica       1
 9:  10.34 11.90  9.81 arabica       1
10:   6.26 10.49 16.90 arabica       1
11:   5.47 15.04 24.87 arabica       1
12:   1.39 12.76 19.51 arabica       1
13:   5.10 13.42 16.93 arabica       1
14:   3.72 12.65 21.35 arabica       1
15:   4.33 12.72 18.47 arabica       1
16:   7.38 15.00 21.58 arabica       1
17:  12.13 11.68 15.59 blended       1
18:  14.41  8.99 16.42 blended       1
19:   8.86  6.98  8.40 blended       1
20:  15.47  5.89  5.37 blended       1
21:   7.55 13.74 22.26 blended       1
22:  14.47  8.76 11.28 blended       1
23:  11.34 12.62 14.15 blended       1
24:  14.25  8.02  8.69 blended       1
25:   6.85 13.38 23.83 blended       1
26:   9.93  9.05  7.52 blended       1
27:   8.59 14.29 18.50 blended       1
    Metpyr 5-Met furfu    sort outlier 
```

您可以像参数一样轻松（更明确地）将`c('Metpyr', `5-Met`, 'furfu')`参数传递给 .SDcols。

# javascript - 我如何正确地在 dom 中插入元素以及关于 setInterval 的内容

> ID：13908261
> 
> 赞同：-1
> 
> 时间：2012-12-17T04:28:13.667
> 
> 标签：javascript, date, setinterval, clock, clearinterval

我有一个任务要求我创建一个页面，之后可以显示一个时钟

用户单击开始按钮并在单击停止按钮时停止

时钟需要显示在“span”标签内，因为我需要 DOM1 方法。

所以我的代码目前看起来像这样

*我已经解决了这个问题。

```
function clock()
{

var obj = document.getElementById('clock');
if (obj)
{
var now = new Date();
var mytime = now.getHours()+":"+now.getMinutes()+"."+now.getSeconds();
obj.innerHTML = mytime;

}
}

</script>

</head>

<body onload="clock()">
<table>
<h1>A live clock in JavaScript</h1>

<p>The time according to your PC is :<span id="clock"></span></p>

<input type="button" name="clickMe" value="Start the clock"
onclick="timer = setInterval(clock, 1000)"/>

<button onclick="window.clearInterval(timer)">Stop</button>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:07:49.137

```
obj.document.getElementById('clock'); 
```

由于`obj`此时未定义，它将抛出一个`referenceError`. 也许你的意思是：

```
var obj = document.getElementById('clock'); 
```

* * *

```
if (obj != "false") 
```

这很可能不起作用，因为您正在与字符串进行比较。如果你想检查是否`obj`是一个对象或`null`，你可以使用

```
if (obj) 
```

* * *

```
obj = mytime; 
```

这不会修改原来的`obj`，而是覆盖持有对它的引用的变量。也许你想要

```
obj.innerHtml = mytime; 
```

还从

```
<p id="clock">The time according to your PC is :</p> 
```

至

```
<p>The time according to your PC is :<span id="clock"></span></p> 
```

这样您就不会覆盖文本但会覆盖时钟。

* * *

```
onclick="setTimeout('"
...
onclick="int=window.clearInterval(int)" 
```

缺少一个部分：

```
onclick="timer = setInterval(clock, 1000)"
...
onclick="window.clearInterval(timer)" 
```

其中第一个参数是被重复调用的函数，第二个参数是调用的频率，以毫秒为单位。另请注意， 的返回值`clearInterval`并不是特别有用，因为它的参数应该是 的返回值`setInterval`。

`setTimeout`还要注意（将调用一个函数一次）和`setInterval`（将重复调用它）之间的区别。

另请注意，该`timer`变量现在驻留在全局范围内。这在大型项目中可能是一个问题。如果您多次启动计时器，您也会遇到问题，因为您现在无法停止它。考虑一下这个（在末尾`body`）（并为两个输入分配正确的 ID）：

```
(function(){ //create a scope
  var timer; //create a local variable

  document.getElementById("clock-start")
  .addEventListener("click", function(){
    if(!timer) timer = setInterval(clock, 1000);
  })

  document.getElementById("clock-stop")
  .addEventListener("click", function(){
    clearInterval(clock);
  })
})() // remember to call our anonymous function 
```

或[jQuery](http://jquery.com)版本（文档中的任何位置）：

```
$(document).ready(function(){ //execute on DOM ready
  var timer;

  $("#clock-start").on("click", function(){
    if(!timer) timer = setInterval(clock, 1000);
  })

  $("#clock-stop").on("click", function(){
    clearInterval(clock);
  })
}); 
```

# jquery - 是否有 chrome 命令行开关允许我读取输入类型 = 文件的完整路径？

> ID：13908265
> 
> 赞同：1
> 
> 时间：2012-12-17T04:28:44.260
> 
> 标签：jquery, html5-video, blob, chromium, chromium-embedded

正如标题所说，我正在寻找（我不知道它是否存在）一个命令行开关，当传递给启动 chrome 浏览器时，我可以读取元素的完整路径。

我做了一些阅读，由于安全问题，它看起来在常规浏览器环境中是不可能的。

为什么我需要它？

我正在开发一个 html/js 应用程序，它将在 CEF（铬嵌入式框架）中运行。所以知道文件的完整路径并不是真正的安全问题。我的应用程序有一个视频标签。我正在使用以下方法生成文件 url：

```
urls[urlIndex] = webkitURL.createObjectURL(file); 
```

并将其提供给视频标签以播放视频，如下所示：

```
videoHandle.attr("src", urls[index -1]).get(0).play(); 
```

它在 chrome 浏览器中播放良好，但是当我在 CEF 中播放时，它会抛出一个

```
cefclient[1121] <Error>: clip: empty path. 
```

我怀疑 CEF 无法理解 createObjectURL 生成的 url 格式。

```
blob:file%3A///1bd8d246-9bd4-464d-bb77-412ea877f952 
```

因此，我正在尝试为视频元素提供绝对路径，因为这在 CEF 中运行良好。因此我需要文件的绝对路径。像这样的东西。

```
videoHandle.attr("src", "file:///C:/movies/test.mp4").get(0).play(); 
```

我希望这是有道理的。我很欣赏这方面的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:28:04.360

根据[**Chromium Embedded Framework**](http://code.google.com/p/chromiumembedded/)网站，**CEF1**不再支持**HTML5 音频和视频**标签。

 **[**CEF1：删除对 HTML5 音频和视频标签的支持**](http://code.google.com/p/chromiumembedded/issues/detail?id=530#c3)。

* * *

如果您使用的是**CEF3 和 jwPlayer API**，则存在一个已知问题和[**错误报告**](http://code.google.com/p/chromiumembedded/issues/detail?id=803&q=HTML5%20video)，其中仅显示第一个视频帧（海报图像）但视频不播放。**

# r - 无法在 SVM 中计算概率？

> ID：13908267
> 
> 赞同：1
> 
> 时间：2012-12-17T04:28:49.800
> 
> 标签：r

在 R 中使用来自 e1071 的 svm：我有以下代码：

```
svm1<-svm(srv~., data=TrainSet,methof='C-classification',probability=TRUE)
pred.svm1<-predict(svm1,data=Test,probability=TRUE) 
```

当 esmining pred.svm1 我没有看到概率只有分类具体：

```
attr(pred.svm1,"probability")

NULL 
```

不知道该怎么做，反正我用谷歌搜索，其他人也有类似的问题，但他们的解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:43:47.717

属性的正确名称是`probabilities`（注意复数）

因此

```
attr(pred.svm1,"probabilities") 
```

应该管用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T15:24:17.170

现在对 OP 来说有点晚了，但是要对测试数据集进行预测，您可以使用

```
pred.svm1 <- predict(svm1, newdata=Test, ...) 
```

不是

```
pred.svm1 <- predict(svm1, data=Test, ...) 
```

将数据集传递给`predict`方法的参数被调用`newdata`，而不是`data`。如问题中所写，`pred.svm1`将给出对*训练*数据集的预测，即用于拟合模型的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-12T06:53:43.407

在将值插入模型之前，请确保数据框中的输出`Train`变量`Test`为`factor`.

```
train$OutputVar <- factor(train$OutputVar)
test$OutputVar <- factor(test$OutputVar) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-08T15:08:56.843

我已经使用`probability=TRUE`类似的语法成功使用了很长时间，但是您的代码对我不起作用。当我将您的第二行更改为：

```
pred.svm1<-predict(svm1,Test,probability=TRUE) 
```

它确实有效（我删除了`data=`）。老实说，我不知道为什么。

顺便说一句，你的第一行还有一个 type-o：`methof`应该是`type`.

# java - Java - 重复检测

> ID：13908268
> 
> 赞同：-1
> 
> 时间：2012-12-17T04:29:18.273
> 
> 标签：java, loops

> 编写一个名为 printDuplicates 的静态方法，该方法接受包含一系列行的输入文件的 Scanner 作为其参数。您的方法应该检查每一行以查找同一行上相同标记的连续出现，并打印每个重复的标记以及它连续出现的次数。不打印不重复的标记。此问题不考虑跨多行的重复（例如，如果一行以给定标记结束，而下一行以相同标记开始）。
> 
> 例如，如果输入文件包含以下文本（重复标记的序列带有下划线以强调）：
> 
> ```
> hello how how are you you you you
> I I I am Jack's Jack's smirking smirking smirking smirking smirking revenge
> bow wow wow yippee yippee
> yo yippee
> yippee yay yay yay
> one fish two fish red fish blue fish
> It's the Muppet Show, wakka wakka wakka 
> ```
> 
> 您的方法将为前面的输入文件生成以下输出：
> 
> ```
> how*2 you*4
> I*3 Jack's*2 smirking*5
> wow*2 yippee*2 yippee*2 yay*3
> 
> wakka*3 
> ```

我现在在 java 中的代码如下，它不起作用，我想知道为什么。如果有人可以提供帮助，那就太好了，谢谢:)

```
import java.io.*;
import java.util.*;
public class What {
    public static void main(String[] args) throws Exception {
        String word = "";
        String word2 = "";
        Scanner input = new Scanner(new File("what.txt"));
        while(input.hasNextLine()) {
            Scanner line = new Scanner(input.nextLine());
            int repeat = 1;
            word = line.next();
            while(line.hasNext()) {
                word2 = line.next();
                while(word.equals(word2) && line.hasNext()) {
                    word = word2; 
                    word2 = line.next();
                    repeat++;
                }
                if(repeat!=1) {
                    System.out.print(word + "*" + repeat + " ");
                }
                word = word2;
            }
            System.out.println();
        }
    }
} 
```

what.txt 包含以下内容：

> ```
> hello how how are you you you you
> I I I am Jack's Jack's smirking smirking smirking smirking smirking revenge
> bow wow wow yippee yippee
> yo yippee
> yippee yay yay yay
> one fish two fish red fish blue fish
> It's the Muppet Show, wakka wakka wakka 
> ```

现在的输出是：

```
how*2 are*2 you*4
I*3 am*3 jack's*4 smirking*7
wow*2 yippee*3 yo*3 yippee*4 yay*5

wakka*2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:54:34.527

试试这个：

```
while(line.hasNext()) {
    word2 = line.next();
    while(word.equals(word2)) {
        repeat++;
        if(line.hasNext()){
            word2 = line.next();
        } else {
            break;
        }
    }
    if(repeat!=1) {
        System.out.print(word + "*" + repeat + " ");
    }
    repeat = 1;
    word = word2;
} 
```

# c# - e.cancel = true 后后台工作人员不会运行“RunWorkerCompleted”；

> ID：13908271
> 
> 赞同：2
> 
> 时间：2012-12-17T04:29:30.723
> 
> 标签：c#, multithreading, backgroundworker, deadlock

这是dowork代码。我什至已经通过了这一点。在 e.cancel = true 之后，DoWork 再次运行，进入 while 循环，再次将 e.Cancel 设置为 true，然后退出函数，不再运行 Completed 函数。

```
private void backgroundWorker2_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        //While the song is not over
          while (!worker.CancellationPending )
          {

              if (progressBar1.Value == progressBar1.Maximum)
              {

                  e.Cancel = true;
                  return;
              }
              else
              {
                  //Keep ticking the progress bar one second
                  worker.ReportProgress(0);
                  Thread.Sleep(1000);
              }
          }
          e.Cancel = true;
          return;

    } 
```

这是取消工人的代码。WaitOne() 将阻塞，直到它从 RunWorkerCompleted 收到信号。

```
if (this.backgroundWorker2.IsBusy)
        {
            this.backgroundWorker2.CancelAsync();

            _resetEvent.WaitOne();

        } 
```

**编辑：请注意，我已经完成了这个 VV**

```
backgroundWorker2.RunWorkerCompleted += backgroundWorker2_RunWorkerCompleted;
backgroundWorker2.WorkerSupportsCancellation = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:34:31.020

你设置了吗

```
BackgroundWorker.WorkerSupportsCancellation = true 
```

?

# c++ - 如何在 ubuntu 上设置 Eclipse + StatET + Rcpp

> ID：13908272
> 
> 赞同：0
> 
> 时间：2012-12-17T04:29:49.233
> 
> 标签：c++, eclipse, r, rcpp

我使用了以下手册并为 rcpp 设置了 eclipse。

[http://blog.fellstat.com/?p=170](http://blog.fellstat.com/?p=170)

我可以为 R 构建包，但是当我想调试它时出现以下错误：

```
Error in dyn.load(file, DLLpath = DLLpath, ...) : 
unable to load shared object '/usr/lib/R/library/stats/libs/stats.so':
libRlapack.so: cannot open shared object file: No such file or directory
During startup - Warning message:
package ‘stats’ in options("defaultPackages") was not found 
Error: could not find function "errorOccured"
Execution halted 
```

我在ubuntu中使用eclipse。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:21:57.363

我没有检查 Cross G++ Linker>Shared Library Settings 中的 Shared 选项。之后 -fPic 必须启用（其他标志）。

问题是我可以毫无错误地构建它，但我仍然无法在 Eclipse 中运行它！它创建 libMyCppPackage 并希望运行 MyCppPackage！

```
 The program file specified in the launch configuration does not exist
  /media/EXt4ENC/Rcpp/MyCppPackage/Debug/MyCppPackage not found 
```

abd 此链接无济于事： [http ://hyperspec.wordpress.com/2012/05/07/ides/](http://hyperspec.wordpress.com/2012/05/07/ides/)

# linux - 在用户空间中加载 C 中的 ELF 文件

> ID：13908276
> 
> 赞同：22
> 
> 时间：2012-12-17T04:30:41.753
> 
> 标签：linux, assembly, loader, elf

我正在尝试在 64 位 x86 环境中的 Linux 上加载使用“gcc -m32 test.c -o test.exe”编译的 ELF 文件。我正在尝试在具有以下核心逻辑（32 位 ELF）的用户空间 ELF 加载器中加载该 32 位文件（test.exe）。

问题是调用返回的起始地址会导致分段错误核心转储。这是代码：

```
void *image_load (char *elf_start, unsigned int size)
{
    Elf32_Ehdr      *hdr    = NULL;
    Elf32_Phdr      *phdr   = NULL;
    unsigned char   *start  = NULL;
    Elf32_Addr      taddr   = 0;
    Elf32_Addr      offset  = 0;
    int i = 0;
    unsigned char *exec = NULL;
    Elf32_Addr      estart = 0;

    hdr = (Elf32_Ehdr *) elf_start;

    if(!is_image_valid(hdr)) {
        printk("image_load:: invalid ELF image\n");
        return 0;
    }

    exec = (unsigned char *)mmap(NULL, size, PROT_READ | PROT_WRITE | PROT_EXEC,
                      MAP_PRIVATE | MAP_ANONYMOUS, 0, 0);

    if(!exec) {
        printk("image_load:: error allocating memory\n");
        return 0;
    }

    // Start with clean memory.
    memset(exec,0x0,size);

    phdr = (Elf32_Phdr *)(elf_start + hdr->e_phoff);

    for(i=0; i < hdr->e_phnum; ++i) {
            if(phdr[i].p_type != PT_LOAD) {
                    continue;
            }
            if(phdr[i].p_filesz > phdr[i].p_memsz) {
                    printk("image_load:: p_filesz > p_memsz\n");
                    munmap(exec, size);
                    return 0;
            }
            if(!phdr[i].p_filesz) {
                    continue;
            }

            // p_filesz can be smaller than p_memsz,
            // the difference is zeroe'd out.
            start = (unsigned char *) (elf_start + phdr[i].p_offset);
            // taddr = phdr[i].p_vaddr + (Elf32_Addr)exec;
            if(!estart) {
                estart = phdr[i].p_paddr;
            }
            taddr = (Elf32_Addr)exec + offset + (phdr[i].p_paddr - estart);
            memmove((unsigned char *)taddr,
                    (unsigned char *)start,phdr[i].p_filesz);
            offset += (phdr[i].p_memsz + (phdr[i].p_paddr - estart));

            if(!(phdr[i].p_flags & PF_W)) {
                    // Read-only.
                    mprotect((unsigned char *) taddr, 
                              phdr[i].p_memsz,
                              PROT_READ);
            }

            if(phdr[i].p_flags & PF_X) {
                    // Executable.
                    mprotect((unsigned char *) taddr, 
                            phdr[i].p_memsz,
                            PROT_EXEC);
            }
    }

    return (void *)((hdr->e_entry - estart) + (Elf32_Addr)exec);

}/* image_load */

...
    int (*main)(int, char **)=image_load(...);
    main(argc,argv); // Crash...
... 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-17T14:26:02.047

请提供完整的可运行代码，包括您尝试加载的 ELF。我花时间尽可能地修改你的代码，它似乎工作，至少对于这个简单的代码。

请注意，加载器也必须编译为 32 位代码，不能将 32 位文件加载到 64 位进程中。此外，由于您没有在原始位置加载代码，因此它必须是可重定位的。最后，它必须是静态二进制文件，因为您没有加载任何库。

**更新**：您的代码期望加载代码的入口点符合`int (*main)(int, char **)`原型，这通常不是这种情况（旁注：`main`实际上也获得了第三个参数，即环境）。阅读[ELF 的启动状态](http://asm.sourceforge.net/articles/startup.html)。如果您手动创建那里描述的堆栈布局，您必须跳转到入口点，并且永远不会返回。如果是 C 程序，您可以挖掘出`main`与原型匹配的地址。但是，您随后会跳过 C 库的初始化（请记住，您的代码不执行库加载，因此加载的程序必须静态链接），这可能是一个问题。

我通过解析 libc 引用和调用`main`.

*装载机.c*：

```
#include <stdio.h>
#include <string.h>
#include <libelf.h>
#include <sys/mman.h>
#include <dlfcn.h>

void printk(const char* msg)
{
    fputs(msg, stderr);
}

int is_image_valid(Elf32_Ehdr *hdr)
{
    return 1;
}

void *resolve(const char* sym)
{
    static void *handle = NULL;
    if (handle == NULL) {
        handle = dlopen("libc.so", RTLD_NOW);
    }
    return dlsym(handle, sym);
}

void relocate(Elf32_Shdr* shdr, const Elf32_Sym* syms, const char* strings, const char* src, char* dst)
{
    Elf32_Rel* rel = (Elf32_Rel*)(src + shdr->sh_offset);
    int j;
    for(j = 0; j < shdr->sh_size / sizeof(Elf32_Rel); j += 1) {
        const char* sym = strings + syms[ELF32_R_SYM(rel[j].r_info)].st_name;
        switch(ELF32_R_TYPE(rel[j].r_info)) {
            case R_386_JMP_SLOT:
            case R_386_GLOB_DAT:
                *(Elf32_Word*)(dst + rel[j].r_offset) = (Elf32_Word)resolve(sym);
                break;
        }
    }
}

void* find_sym(const char* name, Elf32_Shdr* shdr, const char* strings, const char* src, char* dst)
{
    Elf32_Sym* syms = (Elf32_Sym*)(src + shdr->sh_offset);
    int i;
    for(i = 0; i < shdr->sh_size / sizeof(Elf32_Sym); i += 1) {
        if (strcmp(name, strings + syms[i].st_name) == 0) {
            return dst + syms[i].st_value;
        }
    }
    return NULL;
}

void *image_load (char *elf_start, unsigned int size)
{
    Elf32_Ehdr      *hdr     = NULL;
    Elf32_Phdr      *phdr    = NULL;
    Elf32_Shdr      *shdr    = NULL;
    Elf32_Sym       *syms    = NULL;
    char            *strings = NULL;
    char            *start   = NULL;
    char            *taddr   = NULL;
    void            *entry   = NULL;
    int i = 0;
    char *exec = NULL;

    hdr = (Elf32_Ehdr *) elf_start;

    if(!is_image_valid(hdr)) {
        printk("image_load:: invalid ELF image\n");
        return 0;
    }

    exec = mmap(NULL, size, PROT_READ | PROT_WRITE | PROT_EXEC,
                      MAP_PRIVATE | MAP_ANONYMOUS, 0, 0);

    if(!exec) {
        printk("image_load:: error allocating memory\n");
        return 0;
    }

    // Start with clean memory.
    memset(exec,0x0,size);

    phdr = (Elf32_Phdr *)(elf_start + hdr->e_phoff);

    for(i=0; i < hdr->e_phnum; ++i) {
            if(phdr[i].p_type != PT_LOAD) {
                    continue;
            }
            if(phdr[i].p_filesz > phdr[i].p_memsz) {
                    printk("image_load:: p_filesz > p_memsz\n");
                    munmap(exec, size);
                    return 0;
            }
            if(!phdr[i].p_filesz) {
                    continue;
            }

            // p_filesz can be smaller than p_memsz,
            // the difference is zeroe'd out.
            start = elf_start + phdr[i].p_offset;
            taddr = phdr[i].p_vaddr + exec;
            memmove(taddr,start,phdr[i].p_filesz);

            if(!(phdr[i].p_flags & PF_W)) {
                    // Read-only.
                    mprotect((unsigned char *) taddr,
                              phdr[i].p_memsz,
                              PROT_READ);
            }

            if(phdr[i].p_flags & PF_X) {
                    // Executable.
                    mprotect((unsigned char *) taddr,
                            phdr[i].p_memsz,
                            PROT_EXEC);
            }
    }

    shdr = (Elf32_Shdr *)(elf_start + hdr->e_shoff);

    for(i=0; i < hdr->e_shnum; ++i) {
        if (shdr[i].sh_type == SHT_DYNSYM) {
            syms = (Elf32_Sym*)(elf_start + shdr[i].sh_offset);
            strings = elf_start + shdr[shdr[i].sh_link].sh_offset;
            entry = find_sym("main", shdr + i, strings, elf_start, exec);
            break;
        }
    }

    for(i=0; i < hdr->e_shnum; ++i) {
        if (shdr[i].sh_type == SHT_REL) {
            relocate(shdr + i, syms, strings, elf_start, exec);
        }
    }

   return entry;

}/* image_load */

int main(int argc, char** argv, char** envp)
{
    int (*ptr)(int, char **, char**);
    static char buf[1048576];
    FILE* elf = fopen(argv[1], "rb");
    fread(buf, sizeof buf, 1, elf);
    ptr=image_load(buf, sizeof buf);
    return ptr(argc,argv,envp);
} 
```

*精灵.c*：

```
#include <stdio.h>

int main()
{
    fprintf(stdout, "Hello world! fprintf=%p, stdout=%p\n", fprintf, stdout);
    return 0;
} 
```

* * *

测试运行：

```
$ gcc -m32 -g -Wall -ldl -o loader loader.c
$ gcc -m32 -pie -fPIE -o elf elf.c
$ ./loader elf
Hello world! fprintf=0xf7612420, stdout=0xf770e4c0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T07:49:20.360

> exec = (unsigned char *)mmap(NULL, size, ...

这会尝试在任意地址加载可执行文件。非 PIE 可执行文件只能在其链接的地址加载（通常`0x08048000`在 Linux/ix86 上）。

> 问题似乎出在您尝试加载 C 程序（甚至是打印 hello world 的简单程序）时。

如果该程序是动态链接的，那么它绝非简单，而且您的加载器还有*很多**事情*要做：加载和重新定位相关的共享库，修复and等等。*`GOT``TLS`*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:07:35.290

利用

```
exec = mmap(NULL, size, PROT_READ | PROT_WRITE | PROT_EXEC,
                  MAP_PRIVATE | MAP_ANONYMOUS, hdr, 0); 
```

代替

```
exec = mmap(NULL, size, PROT_READ | PROT_WRITE | PROT_EXEC,
                  MAP_PRIVATE | MAP_ANONYMOUS, 0, 0); 
```*

# dart - 使用 js-interop 从 dart 将类型化数组缓冲区传递给 javascript

> ID：13908281
> 
> 赞同：3
> 
> 时间：2012-12-17T04:31:36.780
> 
> 标签：dart, dart2js

尝试调用需要类型化数组的 javascript 方法。

```
var arrayData = js.array(new Uint8Array.fromList(data.charCodes)); 
```

使用 js.array 并没有像我期望的那样代理它，我如何将类型化数组作为类型化数组传递给 dart 中的 javascript 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:59:09.767

您可以直接从 Dart 实例化`ArrayBuffer`和`Uint8Array`javascript 对象。

如果您只需要一个`Uint8Array`javascript 对象：

```
js.scoped(() {
  final charCodes = "test".charCodes;
  final bufView = new js.Proxy(js.context.Uint8Array, js.array(charCodes));

  // do something with bufView
}); 
```

如果你需要一个`ArrayBuffer`javascript 对象：

```
js.scoped(() {
  final charCodes = "test".charCodes;
  final buf = new js.Proxy(js.context.ArrayBuffer, charCodes.length);
  final bufView = new js.Proxy(js.context.Uint8Array, buf)
    ..set(js.array(charCodes));

  // do something with buf
}); 
```

基本上，每次需要使用`new`javascript 运算符时，都必须使用`new js.Proxy(construtor,...)`.

**警告：在包含**[js-interop 的 pull-request #34 的](https://github.com/dart-lang/js-interop/pull/34)新版本发布之前，您必须使用以下依赖项来运行上述代码片段。

```
dependencies:
  js:
    git: git://github.com/dart-lang/js-interop.git 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:21:19.653

找到的解决方案是创建一个 utils.js 并包含未加载到 js.context 中的对象的构造函数。

***实用程序.js：***

```
var xArrayBuffer=function(length) {
    return new ArrayBuffer(length); 
};

var xUint8Array=function(buf) {
    return new Uint8Array(buf);
}; 
```

***在index.html***中包含 utils.js

 *```
 <body>
    <script src="utils.js"></script>
    <script src="dart.js"></script>
    <script src="example.dart.js"></script>
  </body> 
```

然后从 js.scoped 闭包调用。***例子.dart***

```
 js.scoped(() {
    var jscore = js.context.jscore;        
    var buf = js.context.xArrayBuffer(data.charCodes.length);
    var bufView = js.context.xUint8Array(buf);

    for (var i = 0; i < data.charCodes.length; i++) {
      bufView[i] = data.charCodeAt(i);
    }

    jscore.writeArrayBuffer(buf);
  }); 
```*

# backbone.js - 将 Parse API (parse.com) 与 ember.js 模型一起使用

> ID：13908282
> 
> 赞同：4
> 
> 时间：2012-12-17T04:31:45.853
> 
> 标签：backbone.js, ember.js, javascript-framework, parse-platform

我的目标是实现一个带有 Parse 后端的 Ember.js 前端。我正在阅读 Parse 的[文档](https://parse.com/docs/js_guide)，它基于主干.js，可以轻松集成到主干应用程序中，几乎不需要更改代码。

> 我们的 JavaScript SDK 基于流行的 Backbone.js 框架。它与现有的 Backbone 应用程序兼容，您只需进行最少的更改。

问题是，**Parse 对象能否轻松集成到 Ember 应用程序中？如果是这样，怎么做？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T07:21:58.097

我的用于 Parse 的 Ember 数据适配器有很多更新：http: [//clintjhill.github.com/ember-parse-adapter/](http://clintjhill.github.com/ember-parse-adapter/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:03:08.960

你可以看看他们是如何在[Neptune](https://github.com/bwship/neptunejs)上解决 Ember 和 Parse.com 的结合的。它声称是一个

> 基线项目旨在为构建 Node/Ember/Parse 堆栈提供坚实的基础

然而，我怀疑你是否能够像使用 Backbone**一样**轻松地将 Parse 对象集成到 Ember 应用程序中，但它确实看起来是可行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:53:28.010

[http://clint-hill.com/2012/12/17/ember-parse-data-adapter/](http://clint-hill.com/2012/12/17/ember-parse-data-adapter/)是 Parse 的 Ember 适配器（我没有使用过它，但很想知道它的工作原理）。

# php - 从 rsa 私钥中删除密码

> ID：13908284
> 
> 赞同：10
> 
> 时间：2012-12-17T04:32:01.763
> 
> 标签：php, openssl, phpseclib

这是我如何使用 phpseclib （有效）：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->setPassword('password');
$result = $rsa->loadKey('-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,E3B1C06E0D0C2633

gvmXzl6W7eV1a3N5rQNwBWKY9on3IgxZudS33cip5f88FotsPSDJMvqj6LVw2RxobDjhlOOzqmTb
VrlTnoQ6CogXFZSfiPmixiyyptCUEKJkSiEhYGM5GQm0OoGcLeLbgBb9tRpWh5IlXulKD6XFhx8q
/eGg5a+mSkX1i7kv2+Ih3jHmEKwrnfzhcA29pBF3OQJo+Ks9IYneuk676pHtsIs7CpFKq1tDvD8Q
O7URxnVnHLltaFvIxshqyZu92xbUYZR7YzjXl5+3w4TVgeAHUogEV+H9iZTosD/copUsbQO+78w2
E1D3iDS94wRgx0Tjv4xlwrTpOV38FS5rdL32492DcCRlCYM4VtuwjYeWi5shJg69jCb0EwGRqfAo
xko+lbKWELTuFKwD7n1rc/2fTarbGuf8S2AEggBLZyfXHC/9N84mXLFO2XKq+0WdiEFhQj2Cze+a
9qcSK6tPSrjK1LPlnOOppFgDElZaZ0rxsgjtiWSIAEw/Ad+SIM5u+vqwzF8J317JlsdKoBFDw8mS
MxCMuMksKJ23mgvY+THRIVgH3E7lEDZQzCi1Uy6ldLJcran/6wHwP88pVM2odiHkpnrJGcEBbbIk
qsxJZhFT8aUt/cUEBj3fnP7cxoNLQfTHMPqUTqKBWaVufFzGU9YB1R+XWFULLddwJHnV7gPheBlk
MDapowb+Is77+a9Y2VDsOXEvNpqTY0giiSrckG05IZnrhJ24JnSCwyNd99lm7XKdEGGrjBCMqIyI
Fqox8Ahkv3KWAJPYK1eOCc5d/KwZHlnlFJq7ZYy9u3fEnxQCjOEmeXLkLangKA==
-----END RSA PRIVATE KEY-----');

echo $result ? 'true' : 'false';
?> 
```

但是，出于比较目的，我正在尝试使用 OpenSSL 来进行。这是我的代码：

```
<?php
$pkey = openssl_pkey_get_private('-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,E3B1C06E0D0C2633

gvmXzl6W7eV1a3N5rQNwBWKY9on3IgxZudS33cip5f88FotsPSDJMvqj6LVw2RxobDjhlOOzqmTb
VrlTnoQ6CogXFZSfiPmixiyyptCUEKJkSiEhYGM5GQm0OoGcLeLbgBb9tRpWh5IlXulKD6XFhx8q
/eGg5a+mSkX1i7kv2+Ih3jHmEKwrnfzhcA29pBF3OQJo+Ks9IYneuk676pHtsIs7CpFKq1tDvD8Q
O7URxnVnHLltaFvIxshqyZu92xbUYZR7YzjXl5+3w4TVgeAHUogEV+H9iZTosD/copUsbQO+78w2
E1D3iDS94wRgx0Tjv4xlwrTpOV38FS5rdL32492DcCRlCYM4VtuwjYeWi5shJg69jCb0EwGRqfAo
xko+lbKWELTuFKwD7n1rc/2fTarbGuf8S2AEggBLZyfXHC/9N84mXLFO2XKq+0WdiEFhQj2Cze+a
9qcSK6tPSrjK1LPlnOOppFgDElZaZ0rxsgjtiWSIAEw/Ad+SIM5u+vqwzF8J317JlsdKoBFDw8mS
MxCMuMksKJ23mgvY+THRIVgH3E7lEDZQzCi1Uy6ldLJcran/6wHwP88pVM2odiHkpnrJGcEBbbIk
qsxJZhFT8aUt/cUEBj3fnP7cxoNLQfTHMPqUTqKBWaVufFzGU9YB1R+XWFULLddwJHnV7gPheBlk
MDapowb+Is77+a9Y2VDsOXEvNpqTY0giiSrckG05IZnrhJ24JnSCwyNd99lm7XKdEGGrjBCMqIyI
Fqox8Ahkv3KWAJPYK1eOCc5d/KwZHlnlFJq7ZYy9u3fEnxQCjOEmeXLkLangKA==
-----END RSA PRIVATE KEY-----', 'password');
if ($pkey === false) exit('FAILURE');
openssl_pkey_export($pkey, $out_key_file);
echo $out_key_file;
?> 
```

唯一的问题：代码过早地死掉，回显失败。IE。openssl_pkey_get_private() 没有加载密钥。openssl_error_string 说“错误：0906D066：PEM 例程：PEM_read_bio:bad end line”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T05:52:43.473

我不确定这里发生了什么；我试过你的代码，它给出了同样的问题，所以我自己生成了一个密钥：

```
openssl genrsa -des3 -out des3.rsa 
```

然后将内容复制到此脚本中：

```
$out_key_file = 'des3nopass.rsa';

$key = <<<EOS
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,5F2FDB4C8F710F92

pkaBIMCdnvrejw6egagg/lGrrGJWLsceDkC0KSdouRfR8LhQS/XjSJ/Wqrj7fa36
xXRd/USBebgy2hLAi9RMPofOjlcUyUVvZZgh0+JDQ79pH5q1FsRMcsJ+J8GO0edw
kh8zdZoCbbtJgQjTx0JheJMDdZymw4cfK5hoZbnxX6HZ1wNhtPb7Z/noNcxpK6Zl
CCzPgLd9hCGLBD2XqoRjOM1U2vpZwpCTdYgAtFIPMVXQQpzgIyw06CHcHvYZgnAc
oxiVx7Z7N9r0J1vDnlrW/OU1l07D0pBr1yPRTDMI5tBMo8KDsL2tkBxqtYyOJdZr
as/5zQDPRlbW7Jve1JuXmsnja+gN7jZ+3LpUzfRFo/wWnvOzhHQxLz+RaUpVDYTl
F4m9zjo9dgOhlZzigOhYTB+5aq5f92Yf6K0daCwTDpU=
-----END RSA PRIVATE KEY-----
EOS;

$pkey = openssl_pkey_get_private($key, 'password');
if ($pkey === false) {
        die(openssl_error_string());
}

openssl_pkey_export($pkey, $out_key_file);
echo "Wrote to $out_key_file\n"; 
```

这对我来说很好。

**更新**

我也尝试使用`openssl`命令行执行此操作，使用您的密钥：

```
openssl rsa -in des3big.rsa -out des3bignopass.rsa
unable to load Private Key
14179:error:0906D066:PEM routines:PEM_read_bio:bad end line:pem_lib.c:746: 
```

OpenSSL 似乎也有问题，所以它不是 PHP。

**更新 2**

原来你的行太长了（它们应该是 64 个字符宽）：

```
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,E3B1C06E0D0C2633

gvmXzl6W7eV1a3N5rQNwBWKY9on3IgxZudS33cip5f88FotsPSDJMvqj6LVw2Rxo
bDjhlOOzqmTbVrlTnoQ6CogXFZSfiPmixiyyptCUEKJkSiEhYGM5GQm0OoGcLeLb
gBb9tRpWh5IlXulKD6XFhx8q/eGg5a+mSkX1i7kv2+Ih3jHmEKwrnfzhcA29pBF3
OQJo+Ks9IYneuk676pHtsIs7CpFKq1tDvD8QO7URxnVnHLltaFvIxshqyZu92xbU
YZR7YzjXl5+3w4TVgeAHUogEV+H9iZTosD/copUsbQO+78w2E1D3iDS94wRgx0Tj
v4xlwrTpOV38FS5rdL32492DcCRlCYM4VtuwjYeWi5shJg69jCb0EwGRqfAoxko+
lbKWELTuFKwD7n1rc/2fTarbGuf8S2AEggBLZyfXHC/9N84mXLFO2XKq+0WdiEFh
Qj2Cze+a9qcSK6tPSrjK1LPlnOOppFgDElZaZ0rxsgjtiWSIAEw/Ad+SIM5u+vqw
zF8J317JlsdKoBFDw8mSMxCMuMksKJ23mgvY+THRIVgH3E7lEDZQzCi1Uy6ldLJc
ran/6wHwP88pVM2odiHkpnrJGcEBbbIkqsxJZhFT8aUt/cUEBj3fnP7cxoNLQfTH
MPqUTqKBWaVufFzGU9YB1R+XWFULLddwJHnV7gPheBlkMDapowb+Is77+a9Y2VDs
OXEvNpqTY0giiSrckG05IZnrhJ24JnSCwyNd99lm7XKdEGGrjBCMqIyIFqox8Ahk
v3KWAJPYK1eOCc5d/KwZHlnlFJq7ZYy9u3fEnxQCjOEmeXLkLangKA==
-----END RSA PRIVATE KEY----- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:25:12.703

通过查看错误原因可能会找到更多信息：

```
if ($pkey === false) {
  echo openssl_error_string();
  exit('FAILURE');
} 
```

编辑：鉴于错误“PEM_read_bio:bad end line”，这里是触发的 OpenSSL 源部分：

```
[...]
if ((strncmp(buf,"-----END ",9) != 0) ||
        (strncmp(nameB->data,&(buf[9]),i) != 0) ||
        (strncmp(&(buf[9+i]),"-----\n",6) != 0)) {

        PEMerr(PEM_F_PEM_READ_BIO,PEM_R_BAD_END_LINE);
        goto err;
        }
[...] 
```

查看您的代码，我怀疑您需要在私钥字符串的末尾附加一个换行符。

# android - android意图图像如何以最佳方式发送

> ID：13908286
> 
> 赞同：0
> 
> 时间：2012-12-17T04:32:22.230
> 
> 标签：android, image, android-intent, temporary-files

目前，我有带有列表视图的活动（lview），它使用从 url 下载到临时文件的图像和`simple activity`（sact）带有`imageview`.

点击时，`textview`in的值`lview`被选中并按意图发送到 sact，它与对象相关联。拾取对象后，对其进行解析并从中提取链接。然后此链接用于下载图像。

```
 Intent in = new Intent(getApplicationContext(),
 SingleMenuItemActivity.class);
 in.putExtra("name", name);
 Log.d("Starting activity ", "Yeah ");
 startActivity(in); 
```

事实上，这两个活动都使用相同的链接并引用网络中的相同图像。显然它是低效的。

我如何从 lview 中的图像视图中拍照（或唯一 ID），然后将其发送到 sact？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:51:41.930

您本质上要问的是如何使用意图在活动之间传递图像。这是可能的，但可能效率不高。据我所知，您只能将[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)或[Seralizeable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)对象添加到意图中。

您真正应该考虑的是拥有一个图像下载服务，该服务将下载图像并且a）将它们缓存在磁盘上，您可以从多个位置读取它们，b）将它们缓存在内存中其他活动可访问的位置（即静态变量）或c）两者。

有关图像缓存的更多信息，请参阅[此 SO question](https://stackoverflow.com/questions/1945201/android-image-caching)或[一般缓存的这个](https://stackoverflow.com/questions/3536639/best-practice-when-caching-files-in-android)问题。

您还可以阅读[Android 文档中关于缓存位图的说明。](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

* * *

# java - 如何在 TestNG 中重复依赖于其他测试方法的特定测试方法

> ID：13908289
> 
> 赞同：0
> 
> 时间：2012-12-17T04:32:41.633
> 
> 标签：java, eclipse, testng

大家好，我有一个疑问，请帮忙

我在 TestNG 中有这个测试代码，我必须在其中登录 -> 找到产品组合 -> 填写表格

代码是这样的

```
@Test
public static void login(){

// login code

}

@Test(dependsOnMethod = "login")
pubilc find_combination(){

// finding code 

}

@Test(dependsOnMethod = "find_combination")
public static void fill_form(){

// filling the product form

} 
```

在此我想重复 find_combination 和 fill_form 以便我可以创建更多产品请求以进行测试 i google 并发现 @Test('invocationCount = 10') 将重复测试方法但我的问题是我想执行登录仅一次并重复第 2 次和第 3 次测试方法 10 次，任何人都可以帮助我...我正在使用 Eclipse

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:54:52.787

您可以在 beforeClass 中输入您的登录信息。这样，它只会对您班级中的所有测试执行一次。如果登录失败，那么您的测试将不会被执行。在测试中保持调用计数。

# sql - 多列比较的 SQL 查询优化

> ID：13908290
> 
> 赞同：2
> 
> 时间：2012-12-17T04:32:45.013
> 
> 标签：sql, performance, sql-server-2008

我用以下两种方式编写了一个 SQL 查询，因为底层数据很大，所以这两个查询都需要大量时间来获取数据。

**方法一：**

```
 SELECT A.Col1, B.Col2
  FROM TableA A 
  LEFT JOIN TableB B
  ON ((A.C1= B.C1 AND A.C2= B.C2) OR (A.C1=B.C2 OR  A.C2 = B.C1))
  WHERE B.Col2 IS  NULL 
```

**方法二：**

```
 SELECT A.Col1, B.Col2
  FROM TableA A 
  WHERE NOT  EXISTS
  (
  SELECT 1 FROM TableB B
  ((A.C1= B.C1 AND A.C2= B.C2) OR (A.C1=B.C2 OR  A.C2 = B.C1))
  ) 
```

你们中的任何人都可以建议一种更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:38:57.150

您的查询看起来不错（尽管我认为它们不等效）。但是，我认为这里的方法是在 A.C1、A.C2 和 B.C1 和 B.C2 上创建索引。这将大大加快速度。

# hadoop - org.apache.hadoop.fs 的区别

> ID：13908291
> 
> 赞同：0
> 
> 时间：2012-12-17T04:32:45.770
> 
> 标签：hadoop

我是Hadoop的新手。当我阅读 Hadoop 的 API 时，我看到[http://hadoop.apache.org/docs/hdfs/r0.22.0/api/index.html](http://hadoop.apache.org/docs/hdfs/r0.22.0/api/index.html)`org.apache.hadoop.fs`中的包只有一个 class ，而[http://hadoop 中的包。 apache.org/docs/r0.22.0/api/index.html?org/apache/hadoop/fs/](http://hadoop.apache.org/docs/r0.22.0/api/index.html?org/apache/hadoop/fs/)有很多类和接口。为什么有区别？如果没有，我的错误是什么？谢谢。`Hdfs`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:47:40.527

第一个链接是 hdfs 目录，另一个是 hadoop (core) 目录。

希望这会有所帮助

# android - SQLite 安卓数据库

> ID：13908298
> 
> 赞同：-2
> 
> 时间：2012-12-17T04:33:53.890
> 
> 标签：android, image, sqlite, path

> **可能重复：**
> [在数据库中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

我希望存储一些从相机拍摄的图像并将它们存储在设备上的数据库中。我要问的问题是。

将图像存储在实际数据库中是最佳实践，还是我可以将图像的路径存储在数据库中。当然我会担心他们删除图片？

提前感谢您 StackOverFlow 国家的帮助和支持

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:53:55.900

在我看来，通常最好将图像存储在文件系统上并将对图像的引用保存在数据库中（制作查找表），除非您已经以编码格式获取图像数据。在数据库中，当您开始看到数据库的各种性能问题时，您最终将不得不重构/删除它。担心用户删除文件可能是对更好性能的权衡。有一些方法可以防止这种情况发生（通过文件系统分发、混淆文件和文件夹名称等）。还有一些方法可以检查用户是否正在删除文件（也许您安排定期备份检查并搜索丢失的文件。）

# wpf - WPF ComboBoxItem 内的折叠可见性

> ID：13908302
> 
> 赞同：0
> 
> 时间：2012-12-17T04:35:12.040
> 
> 标签：wpf, combobox, styles, visibility

我使用 Style setter 来扩展我的 ComboBoxItem（和按钮），使其跨越 ComboBox 的整个长度，如下所示：

```
 <ComboBox >
        <ComboBox.Resources>
            <Style TargetType="ComboBoxItem">
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            </Style>
        </ComboBox.Resources>
        <ComboBoxItem >
            <DockPanel >
                <Button Content="My Button" />
            </DockPanel>
        </ComboBoxItem>
    </ComboBox> 
```

这工作正常。现在，我在同一个 ComboBoxItem 中添加了一个附加按钮，但将其设置为 Visibility Collapsed。

```
 <ComboBox >
        <ComboBox.Resources>
            <Style TargetType="ComboBoxItem">
                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            </Style>
        </ComboBox.Resources>
        <ComboBoxItem >
            <DockPanel >
                <Button Content="My Button" />
                <Button Content="My Collapsed Button" Visibility="Collapsed" />
            </DockPanel>
        </ComboBoxItem>
    </ComboBox> 
```

现在，新按钮是不可见的，但我希望我的原始按钮仍然可以拉伸整个 ComboBox，就像上面的代码一样。但是，事实并非如此。为什么会这样？有解决方案吗？我正在使用 DataTriggers 来编辑 Visibility 属性。

注意：如果我只是在 ComboBox 中设置 Horizo​​ntalContentAlignment="Stretch"，我也会得到同样的结果。

更新：好的，这实际上与 DockPanel 有关。我将其更改为 StackPanel，它可以按需要工作。但是，我想我仍然很好奇，如果第二个按钮折叠起来，为什么我的第一个按钮不会拉伸整个 DockPanel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:00:43.547

只需将`DockPanel.Dock`属性设置为`Top`

```
 <ComboBox Margin="0,0,0,129">
      <ComboBox.Resources>
          <Style TargetType="ComboBoxItem">
              <Setter Property="HorizontalContentAlignment" Value="Stretch" />
          </Style>
      </ComboBox.Resources>
      <ComboBoxItem >
          <DockPanel >
              <Button Content="My Button" DockPanel.Dock="Top" />
              <Button Content="My Collapsed Button" Visibility="Collapsed" />
          </DockPanel>
      </ComboBoxItem>
   </ComboBox> 
```

# azure - 服务总线上的 SignalR

> ID：13908310
> 
> 赞同：1
> 
> 时间：2012-12-17T04:36:06.850
> 
> 标签：azure, signalr, azureservicebus

我无法通过 Azure 服务总线找到 SignalR 的工作示例。任何指针？我尝试了 Clemens 的博客文章以及 GitHub 中的自述文件，但无法使其正常工作。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:01:55.490

SignalR [wiki](https://github.com/SignalR/SignalR/wiki/)有一堆关于如何使用 SignalR 的文档。例如，如何将其与[Service Bus一起使用](http://www.asp.net/signalr/overview/performance/scaleout-with-windows-azure-service-bus)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:47:27.430

当 SignalR 无法获取 RoleEnvironment 数据时，将引发错误“无法解析此角色的实例索引”。如果您使用的是 Azure 网站，那么这会让人大吃一惊：当您没有角色时，您将无法获得任何角色信息。

您可以通过从本地环境中的 Web 角色运行来测试是否是这种情况。

# gwt - GWTBootstrap：以编程方式将 Navlink 添加到 Dropdown？

> ID：13908312
> 
> 赞同：1
> 
> 时间：2012-12-17T04:36:08.720
> 
> 标签：gwt, twitter-bootstrap

我正在尝试将导航链接添加到导航栏中的下拉列表。我正在以编程方式执行此操作。到目前为止，我没有任何运气，除了一个小的空下拉菜单外，什么都没有显示。我错过了什么？这样做有问题吗？

ui.xml：

```
<b:ResponsiveNavbar position="TOP" scrollspy="false" inverse="true">
        <b:Brand href="#">MyApp</b:Brand>
         <b:Nav alignment="RIGHT">
    <b:Dropdown ui:field="login" rightDropdown="true" icon="SIGNIN" iconSize="LARGE"></b:Dropdown>
    </b:Nav>
        <b:NavCollapse>
            <b:Nav ui:field="nav" />
        </b:NavCollapse>
    </b:ResponsiveNavbar> 
```

我的代码.java：

```
 @UiField
     Dropdown login;

                                            login.setText(userName);
                    NavLink signout=new NavLink();
                    signout.setText("Signout");
                    signout.setIcon(IconType.SIGNOUT);
                    login.add(signout);
                    signout.addClickHandler(new ClickHandler(){

                        @Override
                        public void onClick(ClickEvent event) {
                            //TODO signout implementation
                        }

                    }); 
```

# ios - ios - 当我尝试将较长的文本放入其中时，UILabel 文本会重置为非常小的字体大小

> ID：13908320
> 
> 赞同：0
> 
> 时间：2012-12-17T04:37:12.637
> 
> 标签：ios, ios5, uilabel

我有一个正在处理的屏幕，如下所示：

![在此处输入图像描述](../Images/55912a06b48fb83e244cefbcea2e87f8.png)

最上面是我从远程数据库中获取的 UILabel 并替换为默认值。当该字符串的值很长时，系统会将字体大小重置为非常小，如下面的模拟器屏幕截图所示：

![在此处输入图像描述](../Images/b25828737c533016b3ec4c1b2b857160.png)

有没有办法阻止它这样做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:59:47.003

![在此处输入图像描述](../Images/4df1d4c52cced5d1d96dba45f2a3da17.png)

1-更改编号 uilabel 的文本行数为 2

2-取消选中自动收缩标志

# iphone - 数字布局在安全的 UITextField 中不粘？

> ID：13908321
> 
> 赞同：3
> 
> 时间：2012-12-17T04:37:30.190
> 
> 标签：iphone, ios, uitextfield, uikeyboard

我的 iOS6 目标应用程序具有正常和安全的 UITextFields。在所有情况下，都使用以下设置：

*   大写：无
*   更正：否
*   键盘：默认
*   外观：默认

当我点击“@123”键和键盘上的一个数字时，正常字段的行为与我预期的一样；数字布局保持不变，直到我点击“ABC”键。（换句话说，我可以连续输入多个数字。）

安全字段具有不同的行为。只要我输入一个数字，键盘就会立即恢复为默认值。（换句话说，我不能连续输入多个数字。）

我查看了许多其他具有安全密码字段的应用程序，但我找不到任何其他情况，即一旦键入数字，安全文本字段就会恢复为默认布局。有谁知道是什么决定了这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:21:34.690

呃，过失。该问题是由在安全文本字段上调用 ​​UITextField#reloadInputViews 引起的。

# java - 在字段中声明对象有什么好处？

> ID：13908322
> 
> 赞同：0
> 
> 时间：2012-12-17T04:37:43.200
> 
> 标签：java, object, field

如何打字：

```
public class Example  
{  
    private Cat whiskers;  

    public void makeCat()  
    {  
        whiskers = new Cat();  
    }  
} 
```

不同于：

```
public class Example  
{  
    public void makeCat()  
    {  
        Cat whiskers = new Cat();  
    }  
} 
```

似乎第一个示例工作量更大，因为您现在只能从中创建名为胡须的 Cat 对象。为什么要宣布它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:41:37.447

首先，您要声明一个私有变量，该变量可以由其他方法（或属性）在同一实例中使用。但是，在您的第二个示例中，您只是声明了一个具有局部范围的变量，换句话说，该变量仅在`makeCat()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:39:41.950

看起来你需要一本关于面向对象编程基础的好书。

在第一种情况下，您声明了一个“私有成员变量”。这现在是类的一部分，可以在其他成员函数中使用，甚至可以从外部使用。

在第二种情况下，您要声明一个“局部变量”。这是一个仅在定义它的函数内有效的变量，并且仅用于函数内的计算。不能从类的外部/其他功能访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T04:47:10.230

当第一个对象是第二个对象的一部分时，在另一个对象的字段中声明一个对象。例子-：

```
class Product
  {
    int productId;
    ProductDetail detail;
  }

class ProductDetail
   {
     string brand;
     int price;
     string description;
   } 
```

在上面的例子中，产品类​​的一个对象对应一个产品，每个产品都有一些细节。所以每当创建产品类对象时，JVM都会创建ProductDetail类对象。

在您的第一个场景中，当 Example 类对象在任何地方创建时，Cat 类对象由 JVM 创建。在第二种情况下，它只是该方法中的一个局部变量。并且在创建 Example 类对象时没有 Cat 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T04:47:22.260

不同之处在于第一个示例使用了一个*字段*（也称为“实例变量”），*其他*方法也可以引用（即“使用”）它，而无需将其传递给方法。

第二个例子是一个局部变量——它只能在该方法中使用（或其他方法，如果*传递*给它们）。

# html - Sql 错误java.sql.SQLIntegrityConstraintViolationException

> ID：13908325
> 
> 赞同：0
> 
> 时间：2012-12-17T04:38:32.870
> 
> 标签：html, jakarta-ee, servlets, jdbc, tomcat7

我编写了一个 Java servlet 程序并通过本地 Tomcat 7 运行它，但它显示以下错误：

```
 Sql errorjava.sql.SQLIntegrityConstraintViolationException: ORA-01400: cannot insert NULL into ("SYSTEM"."PASSMANAGER"."PASS") 
```

当我发布值时没有读取密码。它显示密码为空。

我的源代码在以下页面：

```
 http://stackoverflow.com/questions/13889694/the-requested-resource-is-not-available 
```

如果有人知道解决方案，请帮助我............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:43:52.577

嘿更正你在 servlet 中的代码。它会工作

```
 password=req.getParameter("pass"); 
```

# javascript - 当我传入图像数据字符串（base 64）时，图像加载似乎被提前调用

> ID：13908327
> 
> 赞同：1
> 
> 时间：2012-12-17T04:38:40.753
> 
> 标签：javascript, html, canvas, onload

我有一个小错误，这似乎表明在图像完全加载之前调用 onload 函数，当您将图像数据作为其源传递时。

这是 HTML

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
</head>
<body>
    <canvas id='finalImage'></canvas>
</body>
</html>​ 
```

这是javascript：

```
var canvas = document.createElement('canvas');
var context = canvas.getContext('2d');

var image = new Image();
image.onload = function() {
    // I've also put a console.log here at one point, and it does get called.
    context.drawImage(image, 0, 0, canvas.width, canvas.height);
};
image.src = "data:image/jpeg;base64,/9j/4QNMR..."; // cut for sanity.

var outputCanvas = $("#finalImage")[0];
var outputContext = outputCanvas.getContext('2d');

// If I uncomment this line, the image is drawn.
//context.drawImage(image, 0, 0, canvas.width, canvas.height);

// If I change canvas to image, its also drawn, which means it is being loaded.
// But it seems to indicate to me that onload gets called too early.
outputContext.drawImage(canvas, 0, 0);​ 
```

[这是 JSFiddle 的链接。](http://jsfiddle.net/ruKht/12/).

如果您发现它有什么问题，请告诉我，现在已经搞砸了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:54:28.273

# java - 用于桌面和平板电脑开发的 Java 与 C 变体

> ID：13908329
> 
> 赞同：0
> 
> 时间：2012-12-17T04:38:48.830
> 
> 标签：java, c++, objective-c, c

我要编写一个桌面应用程序，但我在使用哪种语言方面存在冲突。它（桌面应用程序）需要有一个好的 GUI，并且是可扩展的（希望对某种模块很好）。它必须是完全跨平台的，包括在各种平板电脑环境中可执行。我把它作为一个要求，同时意识到一些修改无疑是必要的。该语言还应该有某种形式的网络工具可用。

我已阅读[http://introcs.cs.princeton.edu/java/faq/c2java.html](http://introcs.cs.princeton.edu/java/faq/c2java.html)并且非常了解 Java 和 C 之间的区别。我不一定要看 C，而是看 C 变体。

如果它是一个完整的折腾，我会使用 Java，因为我更了解 Java。但是，我不想使用一种对我希望完成的任务来说逊色的语言。感谢您的所有建议和解释。

注意：如果这不是此问题的正确堆栈，我深表歉意。根据规则，这似乎是合适的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:49:58.787

如果您想开发一个 GUI 应用程序并希望将其部署在多环境系统中，那么用 C 语言构建软件是一个不错的`tough path`选择！如果你精通java并且愿意在途中学习一些新东西，我建议使用像`PhoneGap`（phonegap.com）这样的软件

如果您想为多个平板电脑环境开发软件，那么`PhoneGap`(phonegap.com) 肯定会帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:02:16.840

有大量用多种语言编写的跨平台应用程序，如果您最终构建了一个成功的产品，那么您就有资源将其移植到任何平台。使用 Java 与 C 并不会使您的应用程序非常适合目标平板电脑/操作系统。要构建一个好的应用程序，它将花费大量时间从用户那里获得反馈，并找出使产品变得更好的方法。

我不知道您的应用程序是做什么的，但是基于使用正确的架构方法进行构建，您可以获得更多选择。例如，如果应用程序正在与服务器通信，那么专注于定义一组好的请求/响应格式为 JSON，然后如果您更改后端技术，那么前端不必更改。如果没有后端服务器专注于应用程序内的架构，请编写干净的可测试、代码等。

因此，我建议您使用您认为可以高效使用的语言，编写干净的代码，并且随着您对产品的更好理解，您可以随时移植/重写......等等。

# url - vbscript 循环遍历带句点的变量有什么技巧？

> ID：13908334
> 
> 赞同：0
> 
> 时间：2012-12-17T04:39:22.950
> 
> 标签：url, vbscript

我没有正式的脚本背景，所以我为我的无知先道歉。我正在尝试找到一种使用 vbscript 将 csv 文件从 Internet 下载到文件位置的方法。引用网络后，我可以在一种情况下使用 URL 和新文件位置/名称的参数成功地做到这一点。但是，我想把它串成一个 for 循环重复很多次，所以在命令行中添加参数似乎不起作用。我意识到变量不能有句点。有没有办法提取逗号分隔的参数而无需将其粘贴到命令行中？或者，如果变量有句点（例如网页），有没有办法将变量打包到 for 循环中？

如果我在命令行中添加一个网站和文件位置作为两个参数，这似乎可以工作：

```
Const adTypeBinary = 1
Const adSaveCreateOverWrite = 2
Dim BinaryStream
Set BinaryStream = CreateObject("ADODB.Stream")
BinaryStream.Type = adTypeBinary
BinaryStream.Open
BinaryStream.Write BinaryGetURL(Wscript.Arguments(0))
BinaryStream.SaveToFile Wscript.Arguments(1), adSaveCreateOverWrite
Function BinaryGetURL(URL)
Dim Http
Set Http = CreateObject("WinHttp.WinHttpRequest.5.1")
Http.Open "GET", URL, False
Http.Send
BinaryGetURL = Http.ResponseBody
End Function 
```

当我尝试基于变量数组构建参数时，我无法让这个工作。似乎在带有语法错误的“函数”中失败（变量中的句点）：

```
myWebSite = split(commaseparateURLs,",")
myFileLocation = split (commaseparateFiles,",")
num_WebSite = UBound(myFileLocation)
for i = 0 to num_WebSite
Const adTypeBinary = 1
Const adSaveCreateOverWrite = 2
Dim BinaryStream
Set BinaryStream = CreateObject("ADODB.Stream")
BinaryStream.Type = adTypeBinary
BinaryStream.Open
BinaryStream.Write BinaryGetURL(myWebSite(i))
BinaryStream.SaveToFile myFileLocation(i), adSaveCreateOverWrite
Function BinaryGetURL(URL)
Dim Http
Set Http = CreateObject("WinHttp.WinHttpRequest.5.1")
Http.Open "GET", URL, False
Http.Send
BinaryGetURL = Http.ResponseBody
End Function
Next 
```

对此的任何一点推动都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:48:15.957

您在 for 循环的中间有 for的`Function`定义。`GetBinaryFile`函数必须是文件的根目录，而不是在其他代码中。

我还通过在块中缩进代码并添加空格来格式化您的代码。这使得函数内部的代码以及 for 循环内部的代码更加清晰。

```
Const adTypeBinary = 1
Const adSaveCreateOverWrite = 2

myWebSite = split(commaseparateURLs,",")
myFileLocation = split (commaseparateFiles,",")
num_WebSite = UBound(myFileLocation)

for i = 0 to num_WebSite
    Dim BinaryStream
    Set BinaryStream = CreateObject("ADODB.Stream")
    BinaryStream.Type = adTypeBinary
    BinaryStream.Open
    BinaryStream.Write BinaryGetURL(myWebSite(i))
    BinaryStream.SaveToFile myFileLocation(i), adSaveCreateOverWrite
Next

Function BinaryGetURL(URL)
    Dim Http
    Set Http = CreateObject("WinHttp.WinHttpRequest.5.1")
    Http.Open "GET", URL, False
    Http.Send
    BinaryGetURL = Http.ResponseBody
End Function 
```

# c# - 流利的nhibernate的分页问题

> ID：13908339
> 
> 赞同：3
> 
> 时间：2012-12-17T04:39:49.627
> 
> 标签：c#, nhibernate, fluent-nhibernate

我在 MVC 4 应用程序中使用**NHibernate/Fluent NHibernate最新版本。**我`Fluent NHibernate`是通过 Nuget 安装的，它的版本是`1.3.0.733`. NHibernate 的版本类似于`3.3.x`

> PM> Install-Package FluentNHibernate

请注意，当我安装`Fluent NHibernate`版本 1.2.0.712 时不会出现此问题。

> PM> 安装包 FluentNHibernate -Version 1.2.0.712

我有一个这样的查询，

```
public IList<Post> Posts(int pageNo, int pageSize)
{
  return _session.Query<Post>()
                 .Where(p => p.Published)
                 .OrderByDescending(p => p.PostedOn)
                 .Skip(pageNo * pageSize)
                 .Take(pageSize)
                 .Fetch(p => p.Category)
                 .FetchMany(p => p.Tags)
                 .ToList();
} 
```

共有三个类`Post`：`Category`和`Tag`。在数据库中，我有 15 条记录`Post`。`pageNo`当我作为 0 和10传递时，`pageSize`我从上述查询中只得到 7 条记录。为什么？

以下是类及其对应的映射类。

**邮政**

```
 public class Post
  {
    public virtual int Id
    { get; set; }

    public virtual bool Published
    { get; set; }

    public virtual DateTime PostedOn
    { get; set; }

    public virtual Category Category
    { get; set; }

    public virtual IList<Tag> Tags
    { get; set; }
  } 
```

**类别**

```
 public class Category
  {
    public virtual int Id
    { get; set; }

    public virtual string Name
    { get; set; }

    public virtual string Description
    { get; set; }

    public virtual IList<Post> Posts
    { get; set; }
  } 
```

**标签**

```
 public class Tag
  {
    public virtual int Id
    { get; set; }

    public virtual string Name
    { get; set; }

    public virtual string Description
    { get; set; }

    public virtual IList<Post> Posts
    { get; set; }
  } 
```

**邮政地图**

```
 public class PostMap: ClassMap<Post>
  {
    public PostMap()
    {
      Id(x => x.Id);      
      Map(x => x.Published).Not.Nullable();
      Map(x => x.PostedOn).Not.Nullable();
      References(x => x.Category).Column("Category").Not.Nullable();
      HasManyToMany(x => x.Tags).Cascade.All().Table("PostTagMap");
    }
  } 
```

**类别地图**

```
 public class CategoryMap : ClassMap<Category>
  {
    public CategoryMap()
    {
      Id(x => x.Id);
      Map(x => x.Name).Length(50).Not.Nullable();
      Map(x => x.Description).Length(200);
      HasMany(x => x.Posts).Inverse().Cascade.All().KeyColumn("Category");
    }
  } 
```

**标记图**

```
 public class TagMap: ClassMap<Tag>
  {
    public TagMap()
    {
      Id(x => x.Id);
      Map(x => x.Name).Length(50).Not.Nullable();
      Map(x => x.Description).Length(200);
      HasManyToMany(x => x.Posts).Cascade.All().Inverse().Table("PostTagMap");
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:13:16.370

请尝试检查这个答案：[https ://stackoverflow.com/a/13894326/1679310](https://stackoverflow.com/a/13894326/1679310)

该问题很可能隐藏在集合的内联*Fetch*中。`Tag`它将导致 SELECT 子句返回比`Post`计数更多的行。并应用于此结果集...`Take()`因此`Skip()`仅返回前 7 个帖子，因为其中一些帖子具有更多标签：

> 帖子1 | TagA
> Post2 | TagA
> Post2 | 标签B
> ..

# css - 带有ul li标签+引导的CSS水平滚动

> ID：13908341
> 
> 赞同：1
> 
> 时间：2012-12-17T04:40:11.623
> 
> 标签：css, twitter-bootstrap, scroll, scrollbar

我正在尝试使用引导程序进行水平滚动，但我无法让它水平滚动。我的`li`标签只是没有按应有的方式包装（它正常包装）。

HTML：

```
<div class="container suggest">
  <ul class="thumbnails bsuggest" >
    <li class="span2">
     text goes here
    </li>
  </ul>
</div> 
```

CSS：

```
.bsuggest
{
    overflow-x:scroll;
    overflow-y:hidden;
    height:250px;
    white-space:nowrap !important;
    width:100%;
}
.bsuggest li
{
    float:left;
    display:inline-block;
    *dsplay:inline;/* For IE7*/
    *zoom:1;/* For IE7*/
    white-space:normal;
}
.suggest
{
    width:100%;
    position:relative;
    margin-top:95px;
} 
```

我想我已经做了它应该做的，但它没有给我我需要的东西

# sql-server - Windows Azure，实体框架。不支持关键字：“元数据”。

> ID：13908348
> 
> 赞同：7
> 
> 时间：2012-12-17T04:40:41.013
> 
> 标签：sql-server, azure, entity-framework-5

这已被问过几次，但我无法让任何建议对我有用。

我有一个在本地构建的网站和 SQL 数据库，现在已部署到 Azure。该数据库是网站的链接资源。我可以浏览网站，甚至可以使用 ADO.Net 和标准连接字符串连接并运行对数据库的查询。

问题是当我尝试使用实体框架连接时，我不断收到**不支持的关键字：'元数据'。**我已经删除了多个活动记录集并尝试用 ' 替换“但它没有用。我完全陷入了想法。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-17T15:05:31.580

这是我在 Azure 门户中定义的连接字符串，用于 DatabaseFirst 方法：

```
metadata=res://*/mySuperModel.csdl|res://*/mySuperModelModel.ssdl|res://*/mySuperModel.msl;provider=System.Data.SqlClient;provider connection string="Data Source=tcp:myServerName.database.windows.net,1433;Initial Catalog=myDatabaseName;User ID=myUserName@myServerName;Password=myPasswordHere;" 
```

与您的进行比较，并**注意连接类型**在 azure 门户中为“自定义”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T04:21:10.850

我和 OP 有同样的问题，但他的解决方案对我不起作用。

这是一个连接字符串问题，但不是引号。

由于我花了两天时间解决，也许这对其他人有帮助：

在 Azure 上托管时适用于我的 ASP.NET MVC 4.5/Entity Framework 5.0 应用程序的连接字符串*（我在本地针对 SQL Server 2012 进行开发，但将数据库迁移到 Azure SQL 数据库（使用[SQL 数据库迁移向导](http://sqlazuremw.codeplex.com/)））。我首先使用数据库来创建我的 .edmx 文件（我从数据库生成（数据）模型）]*是：

```
<add name="MYPROJECTENTITIES" connectionString="**metadata=**res://*/MODELS.MYPROJECTMODEL.csdl|res://*/MODELS.MYPROJECTMODEL.ssdl|res://*/MODELS.MYPROJECTMODEL.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=tcp:B6JD5K5EP4.database.windows.net,1433;Initial Catalog=MYPROJECT_DB;Integrated Security=False;User ID=MYPROJECT@B6JD5K5EP4;Password=MYPASSWORDABC123;**MultipleActiveResultSets=True**;Encrypt=True;TrustServerCertificate=False&quot;" providerName="System.Data.EntityClient"/> 
```

大写的文本是我的 Azure 信息。显然，您需要使用自己的。

连接字符串的这一部分给了我噩梦，它也可能导致您的问题：

```
res://*/Models.MyProjectModel.csdl|res://*/Models.MyProjectModel.ssdl|res://*/Models.MyProjectModel.msl 
```

*这些引用必须完全正确*。让我重复一遍：*那些参考必须完全正确！*

在阅读[了 2008 年的这篇文章](http://blogs.teamb.com/craigstuntz/2010/08/13/38628/)（“实体框架连接字符串疑难解答”）之后，我使用 .NET Reflector 来查看 MyProjectModel.dll（我的 .dll 的名称（在您的项目中可能不同），就像他建议的那样，果然，连接字符串（由实体框架为我自动生成！）是错误的。它不包含前缀。只要我添加了**Models.prefix**（这就是 .csdl/.msl/.ssdl 的命名方式在我的 .dll 中（可能与您的不同），一切正常。查看您的 .dll 内部，看看名称是否匹配。如果不匹配，请更改它们以匹配 .dll 中出现的内容。（阅读上面的文章如果我说的不够清楚。）

# sql-server - 将数据从 Excel 导入 SQL DB 表后按文件名识别记录

> ID：13908354
> 
> 赞同：0
> 
> 时间：2012-12-17T04:41:35.460
> 
> 标签：sql-server, tsql, excel-2010

我对编写 SQL 脚本还是很陌生。我有一个脚本可以导入大量的 excel 文件（可能达到 1000+）。有些 Excel 电子表格只有一行，有些则超过 50 行。我将所有这些 excel 电子表格导入到一个表中，并希望能够添加一列，该列通过文件名标识记录来自哪个 Excel 电子表格。因此，第 1 到第 10 行可能来自 ExcelSpreadsheetA.xlsx，第 11 到第 15 行可能来自 ExcelSpreadsheetB.xlsx。我可以在导入过程中设置此标识吗？

我使用此脚本从 excel 执行导入：

```
select * 
into SQLServerTable 
FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0','Excel 8.0;Database=D:\testing.xls;HDR=YES', 
'SELECT * FROM [Sheet1$]') 
```

我想做的是在该脚本的末尾添加逻辑，内容如下：

```
update sqlservertable
set filename = testing.xls 
```

但我希望它仅为从该特定文件名导入的记录设置文件名属性。理想情况下，我希望决赛桌看起来与下面的类似。

```
Col1   Col2   Col3   Filename
=====  =====  =====  =========
1      A      B      export1.xlsx
2      C      D      export1.xlsx
3      E      F      export1.xlsx
4      G      H      export5.xlsx
5      I      J      export8.xlsx
6      K      L      export8.xlsx 
```

@Pondlife 这个脚本做我想做的事。

```
select *, 'file1.xls' as 'Filename'
into dbo.SQLServerTable 
FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0', 'Excel 8.0;Database=D:\testing.xls;HDR=YES', 'SELECT * FROM [Sheet1$]') 
```

但是，现在我需要能够将后续导入到同一个数据库中，这是我正在使用的脚本，但它在我身上出错了。

```
INSERT INTO dbo.SQLServerTable 
Select *, 'File2.xlsx' as 'FileName' 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0', 'Excel      12.0;Database=D:\Convert\Converted\File2.xlsx;HDR=YES', 'SELECT * FROM [Worksheet$]') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:52:14.950

假设您的`SELECT`查询已经有效，那么只需将文件名添加到列列表的末尾：

```
select *, 'file1.xls' as 'Filename'
into dbo.SQLServerTable 
FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0', 'Excel 8.0;Database=D:\testing.xls;HDR=YES', 'SELECT * FROM [Sheet1$]') 
```

作为标准注释，[请勿`SELECT *`](https://stackoverflow.com/questions/65512/which-is-faster-best-select-or-select-column1-colum2-column3-etc)在您的代码中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:46:01.690

是的，您需要在现有表中使用外键设置文件表，但如下所示：

```
tbl1 files table
id | path | description

tbl2 data table
id | fileId | col1value | col2value ... | colnvalue 
```

希望这更清楚。

# bash - 从 ifconfig 输出中提取网络掩码并以 CIDR 格式打印

> ID：13908360
> 
> 赞同：2
> 
> 时间：2012-12-17T04:42:10.700
> 
> 标签：bash, tcl, cidr, ifconfig, netmask

我需要提取两组 IP 的网络掩码并以 CIDR 格式打印到屏幕上。考虑使用 shell 或 tcl 来做到这一点。猜猜这里的主要问题是将十六进制网络掩码转换为 CIDR 格式。

尝试了一些不同的东西，但似乎没有按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:02:12.920

我们可以编写一个函数来遍历掩码的数字，将每个数字中设置的位数相加。符合 CIDR 的网络掩码中只有五个合法数字。

Bash 有`${variable:offset}`和`${variable:offset:length}`替换来获取变量的子字符串，所以很容易一次挑出一个数字。

```
function bitCountForMask {
    local -i count=0
    local mask="${1##0x}"
    local digit

    while [ "$mask" != "" ]; do
        digit="${mask:0:1}"
        mask="${mask:1}"
        case "$digit" in
            [fF]) count=count+4 ;;
            [eE]) count=count+3 ;;
            [cC]) count=count+2 ;;
            8) count=count+1 ;;
            0) ;;
            *)
                echo 1>&2 "error: illegal digit $digit in netmask"
                return 1
                ;;
        esac
    done

    echo $count
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T11:36:48.567

刚刚发现有一个 tcl 包实用程序允许我们这样做。

```
package require ip
::ip::maskToLength <hex_netmask> 
```

This will output the CIDR format of the netmask.

# javascript - Jquery：将切换操作添加到下拉菜单

> ID：13908361
> 
> 赞同：2
> 
> 时间：2012-12-17T04:42:24.243
> 
> 标签：javascript, jquery

我正在尝试创建自己的下拉导航，当单击箭头时会展开（现在只是一个 > 范围内）

我的脚本循环遍历一系列`<li>`s 并检查其中是否有孩子`<ul>`。如果`<ul>`检测到 a ，则将其附加`<span class='submenuarrow'> ></span>`到父级`<li>`，以便用户可以单击某些内容来展开菜单。这在切换之前可以正常工作 - 子箭头跨度出现但单击时什么也不做。

这是因为我使用 find 来定位附加元素吗？我做错了什么吗？

我的完整脚本是：

```
$("#menu ul li").each(function() { 

var sub = $(this).find("ul");

//IF UL IS DETECTED
if (sub.size() > 0) {

//APPENDS ARROW TO LI
$(this).append("<span class='submenuarrow'> ></span>");

//ADDS TOGGLE
$(this).find("span").click(function() {
   $(this).find("ul").toggle("slow");
});//END TOGGLE    

}//END IF

});//END EACH 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:56:19.697

使用`:has()`选择器很简单！

## *[jsBin 演示](http://jsbin.com/awevay/1/edit)*

```
$('#menu li:has(ul)').each(function() {   
    $(this).append( "<span class='submenuarrow'> &gt; </span>" );  
});

$('#menu').on('click','.submenuarrow',function() {
    $(this).prev("ul").slideToggle("slow");
}); 
```

也适用于：

```
$('.submenuarrow').on('click',function() {
    $(this).prev("ul").slideToggle("slow");
}); 
```

# android - Android Layout Parent Right Visiblitiy 显示错误

> ID：13908365
> 
> 赞同：0
> 
> 时间：2012-12-17T04:42:59.157
> 
> 标签：android, android-layout

这是我的代码：

```
<ProgressBar
    android:id="@+id/progressBar_main"
    style="?android:attr/progressBarStyleLarge"
    android:layout_width="30dip"
    android:layout_height="30dip"
    android:layout_marginRight="8dip"
    android:layout_marginTop="8dip"
    android:layout_alignParentRight="true"
    android:visibility="gone"/>

<ImageView
    android:id="@+id/iv_broadcast"
    android:layout_width="45dip"
    android:layout_height="45dip"
    android:layout_marginRight="3dip"
    android:layout_marginTop="1dip"
    android:layout_toLeftOf="@+id/progressBar_main"
    android:scaleType="fitXY"/> 
```

![在此处输入图像描述](../Images/927adfe4b07ec9bf7ffd3963b9e35d31.png)

正确的图像是 image1 和 image2，实际输出的是 image1 和 image3。
应用程序加载数据时，加载栏将设置为`VISIBLE`，图像正确显示为 image1。加载过程完成后，加载栏将设置为`GONE`，它应该显示image2，但是它显示为image3，这是错误的。
我怎样才能设置纠正一个（image1 + image2），而不是（image1 + image 3）。我不知道为什么笑脸会向左走。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-17T04:50:06.337

使用这个 imageview 代码

```
<ImageView
     android:id="@+id/iv_broadcast"
     android:layout_width="45dip"
     android:layout_height="45dip"
     android:layout_alignParentRight="true"
     android:layout_marginRight="3dip"
     android:layout_marginTop="1dip"
     android:layout_toLeftOf="@+id/progressBar_main"
     android:scaleType="fitXY" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T05:36:25.543

将 android:layout_alignParentRight="true" 赋予进度条和图像视图。

# php - 将服务注入监听器类

> ID：13908367
> 
> 赞同：0
> 
> 时间：2012-12-17T04:43:08.097
> 
> 标签：php, symfony

在尝试将服务注入我的侦听器时，我似乎错过了一个我无法识别的步骤。

这是我的 services.xmlL

```
<services>
    <!-- Activity logger -->
    <service id="myapp.activity_logger" class="My\AppBundle\Api\ActivityLogger">
    </service>
    <!-- Activity events -->
    <service id="myapp.activity.logged_in" class="My\AppBundle\Listener\ActivityListener">
        <argument type="service" id="myapp.activity_logger" />
        <tag name="kernel.event_listener" event="security.interactive_login" method="onLoggedIn" priority="254" />
    </service>
    ... 
```

侦听器类本身：

```
namespace My\AppBundle\Listener;

use My\AppBundle\Api\ActivityLogger;

use Symfony\Component\Security\Http\Event\InteractiveLoginEvent;

class ActivityListener
{
    protected $activityLogger;

    public function __construct(ActivityLogger $al)
    {
        $this->activityLogger = $al;
    }

    public function onLoggedIn(InteractiveLoginEvent $event)
    {
        // Log activity data

    } 
```

触发事件时收到的错误：

```
ErrorException: Catchable Fatal Error: Argument 1 passed to 
My\AppBundle\Listener\ActivityListener::__construct() must be an instance of 
My\AppBundle\Api\ActivityLogger, none given, called in 
/var/www/app/cache/dev/appDevDebugProjectContainer.php on line 2739 and defined in 
/var/www/src/My/AppBundle/Listener/ActivityListener.php line 18 
```

我似乎无法确定我在注入服务时做错了什么，因为我相信我正在遵循手册中的正确步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:13:48.820

看起来你只是没有重置缓存。我想流程如下：

1.  您创建了`ActivityListener`没有构造函数的类
2.  在配置中描述服务而不注入记录器服务
3.  刷新缓存
4.  在配置中添加构造函数并注入 Logger 服务，但忘记刷新缓存

# mysql - java中的多个代码副本

> ID：13908369
> 
> 赞同：0
> 
> 时间：2012-12-17T04:43:16.397
> 
> 标签：mysql, jakarta-ee

我有一个网站，有多个用户同时访问该网站。在我的网站中，我有一种方法用于生成在事务中进一步使用的随机数。这个随机数是通过调用用 MYSQL 编写的过程生成的。

我的程序如下DELIMITER $$

```
BEGIN
declare trc_id INT;

SELECT  distinct column1 into trc_id FROM table1 where column2=match_name and         status='A';

set abc=trc_id+1;

update table1 set column1=str_id where column2=match_name  and column1=trc_id;

END $$

DELIMITER ; 
```

现在发生的情况是，当两个用户同时调用该过程时，他们都得到相同的号码，这会导致不一致。

我已使方法同步，但用户在同时调用该过程时仍然获得相同的数字。

还有一件事是我的代码存在于两台服务器上，它们都同时处于活动状态，但程序只有一个。

# python - 如何在 Ableton 控制界面中将 midi 输入连接到 python 回调

> ID：13908371
> 
> 赞同：0
> 
> 时间：2012-12-17T04:43:28.860
> 
> 标签：python, midi, ableton-live

我敢肯定这很简单，但我想不出最好的方法。我只想将一组任意 MIDI 输入消息连接到我的控制界面中的各种 API 控制方法。我是否需要为要处理的*每条*消息制作 ButtonElements？没有通用的“midi in”之类的东西吗？最好如何将这些附加到方法上？

谢谢！伊恩

# c++ - 外部常量链接规范似乎被 G++ 忽略了

> ID：13908376
> 
> 赞同：1
> 
> 时间：2012-12-17T04:44:03.023
> 
> 标签：c++, linker, g++, name-mangling

我有一种情况，使用与此类似的 C++ 编译器构建 C 代码库：

**库文件**

```
extern int const values[2] = {1, 2}; 
```

**库文件**

```
#include "lib.h" 
```

**主程序**

```
#include <iostream>

extern int const values[2];

int main() {
    std::cout << values[0] << ":" << values[1] << std::endl;
} 
```

[由于C++03 Standard Annex C Compatibility C.1.2 Clause 3](https://stackoverflow.com/a/9032552/211160)中指出的内容，我不得不添加 extern 。 *（用编译`-fpermissive`将把它扫到地毯下。）*

顺便说一句，它`values`在 objdump 中的显示方式在 objdump 之前是这样的`extern`：

```
$ objdump -t lib.o | grep values
0000000000000000 l     O .rodata    0000000000000008 _ZL6values

$ objdump -t main.o | grep values
0000000000000000         *UND*  0000000000000000 values 
```

...然后添加后是这样的：

```
$ objdump -t lib.o | grep values
0000000000000000 g     O .rodata    0000000000000008 values

$ objdump -t main.o | grep values
0000000000000000         *UND*  0000000000000000 values 
```

所以名称 mangling 被删除了，我们看到“L”变成了“G”，并且链接器不会抱怨`values`未定义。

* * *

现在想象两个非常相似的文件的相同情况，以相同的方式修改：

**tmp-exttypes.h**

```
extern const REBYTE Reb_To_RXT[REB_MAX] = { /* bunch of stuff */ }; 
```

**a-lib.c**

```
extern const REBYTE Reb_To_RXT[REB_MAX]; 
```

这些是项目中仅有的两个 Reb_To_RXT 定义，构建干净。但它没有链接，当我 objdump 提到它的唯一两个文件时，我得到：

```
$ objdump -t a-lib.o | grep Reb_To_RXT
00000000         *UND*  00000000 Reb_To_RXT

$ objdump -t f-extension.o | grep Reb_To_RXT
00000080 l     O .rodata    00000038 _ZL10Reb_To_RXT 
```

它说 L，它的名字被破坏了。这并没有让这个简单得多的例子变得快乐。但是我想知道每次出现时都带有extern怎么会发生这种情况。我是否正确地相信这是一支确凿的证据……而且通常不应该发生仅声明为 extern 的东西在任何地方都不应该具有本地联系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:29:58.763

我不明白你*问*什么。

但 …

有

```
extern int const values[2] = {1, 2}; 
```

在头文件中，如果该头包含在多个翻译单元中，则您有 UB。很可能但不一定会出现链接错误。

一种解决方案：在标头中声明数组，例如

```
extern int const values[2]; 
```

但在实现文件中定义它（使用初始化程序）。

另一种解决方案是使用模板技巧或内联函数技巧在头文件中定义数组。

内联函数技巧：

```
typedef int const Values[2];

inline Values& valuesRef()
{
    static Values   theValues = {1, 2};
    return theValues;
}

static Values& values = valuesRef(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:44:03.023

是，对的。

你（我）正在编辑的文件是自动生成的，实际上是由一个干净的 make 销毁的，在写下思考过程的过程中发现了这一点。您在该特定标题中看到的“tmp”应该暗示“临时，不要编辑”，如果文件没有在您正在使用的编辑器中重新加载，它可能会令人困惑。

*（无论如何，完成了机构知识的思路。:-P）*

# mysql - 查询以从逗号分隔的值中获取计数

> ID：13908379
> 
> 赞同：1
> 
> 时间：2012-12-17T04:44:25.523
> 
> 标签：mysql, sql

我有两个表，一个用于存储产品，另一个用于存储订单列表。

```
CREATE TABLE ProductsList（ProductId INT NOT NULL PRIMARY KEY，
                          产品名称 VARCHAR(50))

插入产品列表（产品 ID，产品名称）
                  值（1，'产品 A'），
                        (2,'产品 B'),
                        (3,'产品 C'),
                        (4,'产品 D'),
                        (5,'产品 E'),
                        (6,'产品 F'),
                        (7,'产品 G'),
                        (8,'产品 H'),
                        (9,'产品一'),
                        (10,'产品 J');                        

CREATE TABLE OrderList(OrderId INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
                       EmailId VARCHAR(50),
                       CSVProductIds VARCHAR(50))

插入订单列表（EmailId，CSVProductIds）                       
               值（'PersonA@domain.com', '2,4,1,5,7'）,
                     ('PersonB@domain.com', '5,7,4'),
                     ('PersonC@domain.com', '2'),
                     ('PersonD@domain.com', '8,9'),
                     ('PersonE@domain.com', '4,5,9'),
                     ('PersonF@domain.com', '1,2,3'),
                     ('PersonG@domain.com', '9,10'),
                     ('PersonH​​@domain.com', '1,5');

```

输出

```
ItemName             NoOfOrders
Product A                3
Product B                3 
Product C                1
Product D                3
Product E                4
Product F                0
Product G                2 
Product H                1 
Product I                3 
Product J                1 
```

订单列表将 ItemsId 存储为每个下订单的客户的逗号分隔值。像这样，我的 dB 表中有超过 40k 条记录

现在我被分配了创建报告的任务，我应该在其中显示项目和订购项目的人数，如下所示

我在我的 PHP 中使用如下查询来将订单一个接一个地存储在数组中。

```
SELECT COUNT(PL.EmailId)
  FROM OrderList PL 
 WHERE CSVProductIds LIKE '2' OR
       CSVProductIds LIKE '%,2,%' OR
       CSVProductIds LIKE '%,2' OR
       CSVProductIds LIKE '2,%'; 
```

1.是否可以通过使用单一查询获得相同的输出

2.当表中没有更多记录时，在mysql查询中使用like会减慢分贝，即40k行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T05:00:42.197

是的，使用带前导通配符的 LIKE 会强制它进行表扫描，即读取表中的每一行。表越大，速度就越慢。例如，它可能会慢数百或数千倍！

这是为什么将逗号分隔的列表存储在 VARCHAR 中并期望访问单个元素对于关系数据库来说是一个糟糕的设计的几个原因之一。

另请参阅我对[在数据库列中存储逗号分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)

您应该做的是定义您的 OrderList 表来存储*一*对电子邮件和 productid。如果订单包含多个产品，则必须存储多行。但这意味着您始终可以找到您正在寻找的单一产品，计算有多少人购买了该产品等，并且您可以通过定义索引来快速进行这些查询。

反对将列表存储在单个列中的规则称为[第一范式](http://en.wikipedia.org/wiki/First_normal_form)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:02:54.430

1.使用正则表达式，但考虑到它只改变你的应用程序代码而不是数据库代码。
2.是的，它通常确实会影响[此处简短提到](http://use-the-index-luke.com/sql/where-clause/searching-for-ranges/like-performance-tuning)的性能，这里有一个可能会有所帮助[的解决方案。](https://stackoverflow.com/a/2481550/1471381)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-28T07:20:30.483

您可以在下面的单个中找到它

```
SELECT COUNT(PL.EmailId)
  FROM OrderList PL 
 WHERE FIND_IN_SET(2, CSVProductIds) 
```

# node.js - nodejs - LDAP客户端安装错误（Window XP机器）

> ID：13908380
> 
> 赞同：1
> 
> 时间：2012-12-17T04:44:43.443
> 
> 标签：node.js, ldap, windows-xp

![安装 LDAP 客户端时出错][1]当我尝试在 windows XP 系统中安装 LDAP 客户端时。我收到错误。如果我得到 LDAP 客户端的 \node_modules，任何专家都可以提供运行 LDAP 客户端的指南/步骤或更有用。

尝试时： npm install ldapjs

呃！回滚 ldapjs@0.5.7 错误 错误：ENOTEMPTY, rmdir 'C:\Documents and Settings\dilipkumar_s\node_modules\ldapjs' ERR！不支持的错误！与您的 node/npm 版本不兼容：pooling@0.3.2 ERR！必需：{"node":">=0.8"} 错误！实际：{"npm":"1.1.16","node":"0.6.15"} 错误！呃！系统 Windows_NT 5.1.2600 错误！命令“C:\Program Files\nodejs\\node.exe”“C:\Program Files\nodejs\node_modules\npm\bin\npm-cli.js”“安装”“ldapjs”错误！cwd C:\Documents and Settings\dilipkumar_s 错误！节点 -v v0.6.15 错误！npm -v 1.1.16 错误！代码 ENOTSUP 错误！消息不支持的错误！errno {} 详细退出 [ 1, true ]

1.  当节点更新到 8.0 版时，出现 phyton 安装错误 D:\work\node\newpoc\node_modules\ldapjs\node_modules\buffertools>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin \....\node_modules\node-gyp\bin\node-gyp.js" 重建 gyp 错误！配置错误gyp ERR！堆栈错误：找不到 Python 可执行文件“python”，您可以设置 PYTHON 环境变量。吉普错误！堆栈在 failNoPython (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:109:14) gyp ERR！堆栈在 C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:78:11 gyp 错误！堆栈在 Object.oncomplete (fs.js:297:15) gyp ERR！系统 Windows_NT 6.1.7601

2.  phyton 安装后要求 VC++ :\ExpressApps\node_modules\ldapjs\node_modules\dtrace-provider>node "C:\Program Files\node s\node_modules\npm\bin\node-gyp-bin\....\node_modules \node-gyp\bin\node-gyp.js" 重建 npm http 304 [https://registry.npmjs.org/abbrev](https://registry.npmjs.org/abbrev) gyp ERR！构建错误 gyp ERR！堆栈错误：找不到“msbuild.exe”。您是否安装了 Microsoft Visual Studio C++ 201？吉普错误！堆栈在 C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\bu ld.js:129:20 gyp ERR！堆栈在 Object.oncomplete (fs.js:297:15)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:43:58.207

`Not compatible with your version of node/npm: pooling@0.3.2 ERR! Required: {"node":">=0.8"}`意思是，“您需要更新版本的 node.js，至少 v0.8”，而看起来您正在运行 v0.6.15。我建议下载并安装最新的稳定版本。然后`npm install ldapjs`应该工作。

# sql-loader - 如何在 oracle 10g 中导入带有数据列的 csv 文件

> ID：13908381
> 
> 赞同：0
> 
> 时间：2012-12-17T04:44:50.530
> 
> 标签：sql-loader

我有以下文件

1.  arv.csv
2.  arv.ctl

在我的 D:\ToBeImportedFiles

arv.csv 的内容是

```
101,2010,12/12/2012
102,2012,15/4/2015 
```

arv.ctl 的内容是

```
LOAD DATA 
INFILE 'D:\ToBeImportedFiles\arv.csv' 
REPLACE 
INTO TABLE trn622094.sample4
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' TRAILING NULLCOLS 
(IDE INTEGER EXTERNAL, 
 YEAR INTEGER EXTERNAL,
         DATEOFJOINING   
) 
```

我的架构中的表是：

```
IDE                                                NUMBER
YEAR                                               NUMBER
DATEOFJOINING                                      DATE 
```

当我在我的 cmd 中键入以下内容时： SQLLDR [myconnectionstring] control=D:\ToBeImportedFiles\arv.ctl

我在 .bad 文件中获得了两条记录。为什么会这样？谁能给我解释一下。我的代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T10:28:50.793

应该有一个名为“arv.log”的日志文件有更好的解释。

在我过去的案例中，这个问题可以通过以下方式解决：

```
 , DATEOFJOINING DATE "DD/MM/YYYY" 
```

# java - java中的Tiff文件压缩

> ID：13908383
> 
> 赞同：1
> 
> 时间：2012-12-17T04:45:01.997
> 
> 标签：java

如何在java中压缩tiff文件，当我将jpeg文件添加到tiff时，文件大小正在增加

File f2 = new File("D:/KYCDATA/mani/myimage_compressed.jpeg");

```
 BufferedImage image3 = ImageIO.read(f2);
    List<BufferedImage> list = new ArrayList<BufferedImage>();
    list.add(image3);

    File tiffFile = new File("D:/KYCDATA/mani/mani.tiff");
    if(tiffFile.exists()) {
        tiffFile.delete();
    }
    ImageOutputStream ios = null;
    ImageWriter writer = null;
    Iterator it = ImageIO.getImageWritersByFormatName("tiff");
    if (it.hasNext()) {
        writer = (ImageWriter) it.next();
    }

    ios = ImageIO.createImageOutputStream(tiffFile);
    writer.setOutput(ios);

    IIOImage iioImage = null;
    for (int i = 0; i < list.size(); i++) {
        iioImage = new IIOImage(list.get(i), null, null);
        if (i == 0) {
            writer.write(iioImage);
        } else {
            writer.writeInsert(i, iioImage, null);
        }
        writer.endWriteSequence(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:49:37.993

TIFF 使用无损压缩，所以如果我正确理解您的问题，我希望 TIFF 大于原始 JPEG。请参阅此处以获取简单说明：

[http://www.cambridgeincolour.com/tutorials/imagetypes.htm](http://www.cambridgeincolour.com/tutorials/imagetypes.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T16:35:27.630

您需要在 ImageWriteParam 对象上设置压缩模式，然后将此参数传递给编写器。

**添加以下代码以获取默认编写器参数并设置压缩模式**

```
ImageWriteParam writeParam = writer.getDefaultWriteParam();
param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
param.setCompressionType("PackBits"); 
```

**修改您的代码以添加我们在上面设置的 writeParam 来编写方法**

```
 if (i == 0) {
        writer.write( null,iioImage,writeParam);
    } else {
        writer.writeInsert(i, iioImage, writeParam);
    } 
```

# jquery - jstree 获取选中节点的级别

> ID：13908386
> 
> 赞同：4
> 
> 时间：2012-12-17T04:45:14.557
> 
> 标签：jquery, jstree

如何获取当前选定节点的度数/级别？即它有多少父母。

我有在选择节点时执行的部分：

```
.bind("select_node.jstree", function (event, data) { 
        var nodeInfo = $("#" + data.rslt.obj.attr("id"));
        console.log(data.rslt.obj.attr("id")); // the id of the node
        console.log(nodeInfo.children("a").text()); // the name of the node
                    // the level of the node???
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-01T13:34:42.537

您还可以使用（在 jstree 3.1.0 中）：

```
.bind("select_node.jstree",function(e,data) {
      var level=data.node.parents.length;     // 1 = root level, 2 = next level down, etc
  }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T05:32:03.307

`data.inst.get_path().length`

1是根节点；

```
.bind("select_node.jstree",function(e,data) {
      var inst=data.inst;
      var level=inst.get_path().length;
      var selected=inst.get_selected();
      var id=selected.attr('id');
      var name=selected.prop('tagName');
      console.log(name,id,level);
  }); 
```

（最好使用 inst，而不是使用 dom 搜索）；

```
$(function () {
	$("#demo1").jstree({ 
		"plugins" : [ "themes", "html_data", "ui", "cookies" ]
	});
	$("#demo2").jstree({ 
		"plugins" : [ "themes", "html_data", "ui", "cookies" ]
	});
  $('#demo1,#demo2').bind("select_node.jstree",function(e,data) {
      var inst=data.inst;
      var level=inst.get_path().length;
      var selected=inst.get_selected();
      var id=selected.attr('id');
      var name=selected.prop('tagName');
      console.log(name,id,level);
  });

});
```

```
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>
  With id-s:
<div id="demo1" class="demo">
	<ul>
		<li id="phtml_1">
			<a href="#">Root node 1</a>
			<ul>
				<li id="phtml_2">
					<a href="#">Child node 1</a>

				</li>
				<li id="phtml_3">
					<a href="#">Child node 2</a>
				</li>
			</ul>
		</li>
		<li id="phtml_4">
			<a href="#">Root node 2</a>

		</li>
	</ul>
</div>
  Without id-s:
<div id="demo2" class="demo">
	<ul>
		<li>
			<a href="#">Root node 1</a>
			<ul>
				<li>
					<a href="#">Child node 1</a>                   

				</li>
				<li>
					<a href="#">Child node 2</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="#">Root node 2</a>

		</li>
	</ul>
</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-23T14:56:56.717

```
.bind("select_node.jstree", function(e, data) {
    var level = data.node.parents.length;
    var text  = data.node.text;
    var id    = data.node.id;
    console.log(level,text,id);
})
; 
```

# hibernate - 如何停止休眠注释以自动修改表结构？

> ID：13908387
> 
> 赞同：0
> 
> 时间：2012-12-17T04:45:50.720
> 
> 标签：hibernate, annotations

在我的数据库（mysql）中，有一个这样的表：

```
Project table'structure 
----------------------------------------------------------------
Field         | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| id          | bigint(20)   | NO   | PRI | NULL    |       |
| create_time | date         | YES  |     | NULL    |       | 
```

我有一个这样的实体：

```
@Entity
@Table(name = "project")
public class Project{
     Long  id;
     Date  createTime;
} 
```

每次启动服务器时，“create_time”列会自动更改为“createTime”，并清除所有数据，这很危险。也许我可以修改数据库的用户权限来停止休眠来执行此操作。问题是如何在休眠级别停止这种危险动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:52:31.633

```
@Column(name="create_time")
Date createTime; 
```

另一种可能性是关闭 hibernate.cfg.xml 中的模式更新。

# javascript - require-handlebars-plugin 构建错误 - ReferenceError: _ 未定义

> ID：13908391
> 
> 赞同：5
> 
> 时间：2012-12-17T04:46:26.243
> 
> 标签：javascript, requirejs, handlebars.js

我正在尝试构建一个 requirejs/backbone/handlebars 项目，当我尝试运行 app.build.js 时，我似乎遇到了这个错误：

```
Tracing dependencies for: main
ReferenceError: _ is not defined
In module tree:
    main
      cs
        hbs
          underscore

ReferenceError: _ is not defined
In module tree:
    main
      cs
        hbs
          underscore

    at Object.eval (eval at <anonymous> (/usr/local/share/npm/lib/node_modules/requirejs/bin/r.js:13718:64)) 
```

该应用程序在未构建时可以完美运行并且没有错误。如果重要的话，该项目有主干和下划线作为requirejs shims。我会发布整个源代码，但它是一个内部系统，所以我不能。如果需要更多信息，我可以发布。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:30:24.100

我有同样的问题，这对我有用 -

从 RequireJS shim 中删除下划线。

然后在 underscore.js 文件的底部，就在右括号和调用语句的上方，添加一个定义语句以正确导出 _

```
 define(function(){
        return _;
    });

}).call(this); 
```

# java - 如何进行异步处理？

> ID：13908399
> 
> 赞同：2
> 
> 时间：2012-12-17T04:47:39.877
> 
> 标签：java, spring, asynchronous, struts

是否可以在struts2.0中单独处理服务。我的 JSP 文件中有三个不同的提交按钮。每当单击按钮时，每个按钮都应单独处理，而不会停止其他进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:55:06.893

仅使用`@Async`注释即可异步调用方法。我找到的最好的文档在 springsource 网站上：[Task Execution and Scheduling](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)

**编辑**：关于斯蒂芬提到的“拒绝服务”-spring 为您提供了可配置的线程池，因此您不会耗尽应用程序服务器的 cpu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:54:20.857

对的，这是可能的。不过，要做到正确有点困难：

*   您的服务器需要跟踪当前正在运行的“进程”（或线程）。

*   您的服务器必须实施某种机制来传递处理结果。

*   如果某些用户多次单击提交按钮，您的服务器必须防止意外或故意的“拒绝服务”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:36:41.330

您可以在异步模式下进行 ajax 调用。Jquery.ajax 是一种方便的方法，可以在不停止其他进程的情况下单独处理。在 ajax 调用中，您可以触发按钮单击事件。

# linux - perf中的硬件事件和硬件缓存事件有什么区别？

> ID：13908400
> 
> 赞同：7
> 
> 时间：2012-12-17T04:47:42.623
> 
> 标签：linux, perf

当我输入`perf list`命令时，我发现有两种事件：`Hardware event`和`Hardware cache Event`。两者有什么区别 ？

`cache-misses`和 和有什么不一样`LLC-misses`？缓存未命中是否包括 LLC-misses ？

`perf`当我测试程序时，工具会降低总体性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T13:45:23.510

根据系统调用的手册页（用户级实用程序内部 使用[）](http://web.eece.maine.edu/~vweaver/projects/perf_events/perf_event_open.html)： `perf_event_open``perf`

*   硬件事件：这表示内核提供的“通用”硬件事件之一
*   硬件缓存事件：这表示硬件缓存事件。

此外，我想知道这是否与 [英特尔® 64 和 IA-32 架构软件开发人员手册 3B]英特尔® 64 和 IA-32 架构软件开发人员手册 3B [2](https://stackoverflow.com/questions/12601474/what-are-perf-cache-events-meaning)中所谓的非架构和架构事件有某种联系。

无论此分类的确切含义如何，`cache-misses`如上[一个问题](https://stackoverflow.com/questions/12601474/what-are-perf-cache-events-meaning)和我上面提到的手册页中所述，表示任何缓存都无法提供的内存访问次数。换句话说，它意味着最后一级缓存中的缓存未命中数。因此，我猜这与 相同`LLC-misses`，不幸的是我无法在我的笔记本电脑上确认，因为`LLC-misses`不受支持。

关于您的最后一个问题，性能监控所产生的开销应该非常低。实际上，开销主要是由于读取计数器值，并且使用`perf stat`我猜这个读取应该只在执行结束时进行一次（考虑到计数器不会溢出）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T13:46:15.923

问题 2：如果我查看 ARM 内核代码 ("arch/arm/kernel/perf_event_v7.c") 的 perf

cache-misses 表示 ARMV7_PERFCTR_L1_DCACHE_REFILL 表示一级数据缓存未命中 所以 LLC 可能意味着低级缓存未命中（可能是 L3）

您可以查看特定于体系结构的内核代码 ARMV7_PERFCTR_L1_DCACHE_REFILL 具有什么值以及技术参考手册以了解该值的确切含义。 [http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0388i/BEHCCEAE.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0388i/BEHCCEAE.html)

问题 3：我相信 perf 从硬件寄存器中读取计数器（至少对于硬件性能计数器），因此不会真正影响代码的性能。因为它不会真正将代码钩子放入您的代码中。但是一些论文说如果你在代码中使用 perf 会有 5% 的性能损失。

# javascript - Get Facebook UserID without JavaScriptSDK

> ID：13908403
> 
> 赞同：0
> 
> 时间：2012-12-17T04:48:00.367
> 
> 标签：javascript, facebook-graph-api, facebook-login

I've successfully logged into Facebook's OAuth system and retrieved my access token. I've stored the token in a cookie. Now I want to query the user's data.

Here's my problem. At this point I do not yet have the user's Id. It doesn't seem like I can do anything with the graph API unless I have the user's id.

What am I missing here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:17:34.500

I found the solution.

I don't need the UserID as the graph api uses [https://graph.facebook.com/me](https://graph.facebook.com/me) as an alias to to [https://graph.facebook.com/USER_ID](https://graph.facebook.com/USER_ID).

If you still need the user id, doing a GET request on

```
https://graph.facebook.com/me?fields=id 
```

returns the current user's id with in JSON data as below.

```
{
    "id": USER_ID
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:52:25.850

a user need to be logged in your app in order for you to get his ID (the most basic permission).

For this, you can use the Javascript SDK, or you can link to a login page using the PHP SDK `getLoginUrl` [https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)

For anything related to a user on the OpenGraph or the Graph API, you at least need him to be logged into your app, and this mean you need to ask user basic permission. Until then, the user is completly anonymous to your app.

You can use the `/me` alias to simplify requesting the Graph API, but you still need a valid `access_token` provided by asking basic permissions. Until then, `/me` or `/{{id}}` will not return anything.

# opengl - 快速注水

> ID：13908406
> 
> 赞同：2
> 
> 时间：2012-12-17T04:48:53.533
> 
> 标签：opengl, graphics, flood-fill

所以我有一张白色的图片，上面有一条黑色波浪线将上半部分和下半部分分开。我需要将下半部分设为黑色，同时保持上半部分为白色。很简单。

最快和最简单的方法是什么？我可以将所有像素复制到 RAM，进行洪水填充并将它们写回，但我觉得这不是一个好的解决方案。

你还有什么可以建议的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:33:36.647

要不你把图片修改成行下要提前填好？然后，您只需要在屏幕中间绘制图片，然后在其上方用白色绘制一个大四边形，在其下方用黑色绘制一个大四边形。

# encryption - openssl RSA_public_encrypt() 返回的大小总是 = RSA_size(rsa)？

> ID：13908407
> 
> 赞同：2
> 
> 时间：2012-12-17T04:48:58.067
> 
> 标签：encryption, cryptography, openssl, rsa

`RSA_size(rsa)`在我的应用程序中返回等于 256 的模数。我正在使用`RSA_PKCS1_OAEP_PADDING`选项加密数据，因此发送到的输入缓冲区的最大长度`RSA_public_encrypt()`为 256 - 41 = 215

在某些情况下，我的输入缓冲区的长度可能会超过 215 的限制，我需要多次调用`RSA_public_encrypt()`。

我的问题是关于`RSA_public_encrypt()`.

根据我的测试，返回值为 256（等于`RSA_size(rsa)`），[文档](http://www.openssl.org/docs/crypto/RSA_public_encrypt.html)还说：

> RSA_public_encrypt() 返回加密数据的大小（即 RSA_size(rsa)）。

我只是想确保返回值只有两种可能 `RSA_public_encrypt()`。

**-1（错误）**或**模数（成功）**，没有其他可能性，是吗？我很好奇，因为我需要划分加密缓冲区并调用`RSA_private_decrypt()`每个块。如果每个的加密缓冲区`RSA_public_encrypt`相同，那么我不需要存储每个的大小。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T07:50:03.547

对于所有当前已知的 PKCS#1 加密模式，RSA_public_encrypt() 的（正）返回将始终与 RSA_size(rsa) 相同。

简而言之：您当前的假设是正确的。

但实际上：如果您有大于 RSA_size(rsa) 的数据并将其拆分为块，您可能应该考虑使用随机对称密钥加密数据并使用 RSA_public_key() 加密该密钥。RSA 公钥加密并不意味着用于更大的数据块。

加密大于 RSA_size(rsa) - XX 的东西的最佳方法（其中 XX 取决于所使用的 PKCS#1 模式）：

*   生成一个 16 字节的随机**IV**（应该是唯一的）
*   生成一个32 字节（256 位）的随机密钥**K**
*   使用 AES-CBC（考虑填充）或 AES-CTR 使用**K**和**IV**加密数据到**E-DATA**
*   使用 SHA-256（或任何适合您情况的散列算法）将加密数据**E-DATA散列为散列****H**
*   使用 RSA 公钥加密**IV**、密钥**K**和哈希**H**（**IV**也可以是公开的，但这通常更容易）到**E-RSA**
*   将加密数据**E-DATA**和加密密钥数据**E-RSA**发送到另一端

另一方面：

*   **将E-RSA**解密为**IV**、**K**和**H**（如果失败则退出）
*   散列**E-DATA**并用**H**检查（如果失败则退出）
*   用**IV**和**K**解密**E-DATA**
*****   完毕..****

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:31:09.447

RSA_encrypt() 的输出可能包含一些前导零位，我不确定 openssl 是否保留它们。切割它们将导致输出，它短一个字节。这种情况很少发生。

如果您的输入只是稍大一点，为什么不增加 RSA 密钥的大小呢？您可以拥有 2536 位 RSA 密钥或 3072 位，等等。****

# xslt-2.0 - 通过 XSLT 将两个元素的值合并为一个

> ID：13908412
> 
> 赞同：0
> 
> 时间：2012-12-17T04:49:37.993
> 
> 标签：xslt-2.0

我有一个如下的 XML：

```
<chap>
      <CN>1</CN>
      <CT>xxxx</CT>
</chap> 
```

我想将这两者组合成一个元素，如下所示

```
<div class="chap-title">1  xxxx</div> 
```

使用 XSLT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:22:27.097

我认为 XSLT 2.0 中最简单的方法是使用`xsl:value-of`属性`separator`：

```
<xsl:template match="chap">
    <div class="chap-title">
        <xsl:value-of select="*" separator="  "/>
    </div>
</xsl:template> 
```

您还可以将 to 更改`select="*"`为`select="CN|CT"`仅使用 and 的值，`CN`或`CT`将`select="*"`to更改`select="CN,CT"`为指定值*和*顺序。

# java - 自定义异常中的超级调用

> ID：13908413
> 
> 赞同：10
> 
> 时间：2012-12-17T04:49:40.597
> 
> 标签：java, exception, constructor

我只想知道为什么我们在自己创建的自定义异常中调用 super。

```
public class MyException extends Exception 
{ 
   public MyException(String message)         
  {  
    super(message);        
  }      
} 
```

这里调用super(message)有什么用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T04:52:39.380

由于派生类总是以基类为模板，因此在构造派生对象时，首先需要初始化基类。默认情况下，如果没有`super`调用，Java 将使用默认（无参数）构造函数来创建基类。如果要使用不同的构造函数，则必须使用`super`传递所需的参数并调用正确的构造函数。

在自定义异常的情况下，常用`super`来初始化异常的错误信息；通过将消息传递给基类构造函数，基类将负责正确设置消息的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T04:51:45.237

它只是调用基类构造函数：

> `Exception(String message)`
> 
> 使用指定的详细消息构造一个新异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T04:53:37.557

因为：

```
public MyException(String message)         
  {  
   //super() implicit call, how to set message???

} 
```

所以你需要一个超级（消息）调用来设置消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T04:52:02.247

super 的用途是调用 super(base, parent) 类的构造函数，该类恰好是`Exception`该类

# c - C99 在运行时如何计算可变长度数组的大小？

> ID：13908421
> 
> 赞同：12
> 
> 时间：2012-12-17T04:51:13.083
> 
> 标签：c, arrays, c99, variable-length-array, ansi-c

在 C89 中，数组的长度在编译时是已知的。但是在 C99 中，对于可变长度数组，数组的长度在运行之前可能是未知的。

那么它是如何计算的呢？

为什么不能以同样的方式计算动态分配数组的长度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T05:25:12.953

来自 ISO/IEC 9899:TC3 第 6.7.5.2 节：数组声明符

> 具有可变修改类型的普通标识符（如 6.2.3 中定义）**应具有块范围，并且没有链接或函数原型范围。**如果标识符被声明为具有静态存储持续时间的对象，则它不应具有可变长度数组类型。

VLA 的大小很简单`sizeof(vla_element_type) * vla_length`。由于 VLA 只能在块内定义`its length must be either a local variable or a function parameter`，因此编译器可以在访问 vla 时访问该块。（由于 vla 的长度和 vla 本身属于同一个栈帧）。

```
Here is an example:

int main(int argc, char* argv[])
{
  int m;
  scanf("%d\n", &m);
  int a[m];

  printf("%d\n", sizeof(a));

  return 0;
} 
```

编译后`clang -o test.ll -O2 -emit-llvm -S test.c`生成的IR如下图：

```
define i32 @main(i32 %argc, i8** nocapture %argv) nounwind {
entry:
  // Allocate space on stack for m
  %m = alloca i32, align 4  

  // call scanf
  %call = call i32 (i8*, ...)* @__isoc99_scanf(i8* getelementptr inbounds ([4 x i8]* @.str, i32 0, i32 0), i32* %m) nounwind  

  // %0 now contains the value of m
  %0 = load i32* %m, align 4, !tbaa !0

  // %1 is m << 2, which is m * sizeof(int)
  %1 = shl nuw i32 %0, 2  

  // call printf, output m * sizeof(int) to screen.
  %call1 = call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([4 x i8]* @.str, i32 0, i32 0), i32 %1) nounwind  

  // DONE.
  ret i32 0
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T07:54:33.500

VLA 和`malloc`通过指针变量保存的 ed 数组（除了位于内存的不同部分）之间的区别在于编译器在编译时知道第一个是数组。它可以与 VLA 一起在某个地方保存大小信息，所以基本上这是某种隐藏变量。根据您对该变量的使用情况，例如，如果您使用`sizeof`它，或者您通过诸如`A[i][j]`编译器之类的东西索引 2D VLA，则可以确定是否确实需要该隐藏变量，如果不需要，则优化它。

# xslt - 如何在 XSLT 中匹配特殊字符的属性

> ID：13908423
> 
> 赞同：1
> 
> 时间：2012-12-17T04:51:18.300
> 
> 标签：xslt, xslt-2.0

假设我有如下的 xml，并且我想将标签**Cell**的模板与属性**aid5:cellstyle="hilite_white" 匹配**

我如何在 XSLT 模板中做到这一点，因为我无法选择具有特殊字符的属性，例如**:**？

```
<table>
<Cell aid:table="cell" aid5:cellstyle="hilite_white" aid:crows="1" aid:ccols="1" aid:ccolwidth="112" />
</table> 
```

@jim：这是我尝试的

```
<xsl:template match="Cell[@aid5:cellstyle='hilite_white']">
            <xsl:value-of select="local-name()" />

        </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:31:29.547

您可以`*`在匹配中使用命名空间前缀：

```
match="Cell[@*:cellstyle='hilite_white']" 
```

或者你可以在你的声明前缀`xsl:stylesheet`：

```
<xsl:stylesheet version="2.0" xmlns:aid5="unknown namespace uri" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
```

（替换`unknown namespace uri`为源 XML 中的任何命名空间 uri。）

# java - 我想加载没有额外白色像素的图像。我该怎么做呢？

> ID：13908426
> 
> 赞同：1
> 
> 时间：2012-12-17T04:51:38.333
> 
> 标签：java, image, image-processing, transparency

当我在画布上绘制图像时，图像周围的白色像素也存在于图像边界。关于如何防止这种情况的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:46:01.633

![在此处输入图像描述](../Images/92e71f4fc5b4e6bc47d08ff3b686a42f.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import javax.imageio.ImageIO;
import java.net.URL;

class ImageTransparencyByColor {

    public static BufferedImage getTransparentImage(
        BufferedImage image, Color transparent) {
        // must have a transparent image
        BufferedImage img = new BufferedImage(
            image.getWidth(),image.getHeight(),BufferedImage.TYPE_INT_ARGB);
        Graphics2D g= img.createGraphics();
        for (int x=0; x<img.getWidth(); x++) {
            for (int y=0; y<img.getHeight(); y++) {
                if (image.getRGB(x,y)!=transparent.getRGB()) {
                    img.setRGB( x,y, image.getRGB(x,y) );
                }
            }
        }
        g.dispose();
        return img;
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL ("http://www.gravatar.com/avatar" +
            "/ab5193916ccf152f96b0a69323e934a1?s=128&d=identicon&r=PG");
        final BufferedImage trans = getTransparentImage(
            ImageIO.read(url), Color.WHITE);
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JLabel gui = new JLabel(new ImageIcon(trans));
                JOptionPane.showMessageDialog(null, gui);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:55:07.453

使用 .png 图像。.gif 图像只有完全/没有透明度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:15:48.377

而是将您的图像插入 JPanel 上。Canvas 是一个重量级的组件。或者，尝试更改 Canvas 的 alpha。`this.setBackground(new Color( 0,0,0,0 );`

编辑：试试这个。为您的图像创建一个类。初始化 Image 的方式无关紧要。

```
public class MyImage extends JPanel {

    private final URL IMG_DIRECTORY = Main.class.getResource("/res/yourImage.png"); // Image directory

    public MyImage() {

        try {
            img = ImageIO.read(IMG_DIRECTORY);
        } catch (Exception e) {
            e.printStackTrace();
        }

        this.setSize(img.getWidth(null), img.getHeight(null);

    }

    @Override
    public void paint(Graphics g) {

        g.drawImage(img, 0, 0, null);

    } 
```

在您的 Frame 类上，声明您的 image class `MyImage yourImage = new MyImage();`，然后将其添加到您的 ContentPane 中。

# python - 绝望地迷失了 Python 中的列表和数组

> ID：13908429
> 
> 赞同：-1
> 
> 时间：2012-12-17T04:51:52.400
> 
> 标签：python, arrays, list

这是我正在参加的练习考试中的问题：

> 给定一个至少有元素的列表 和一个`x`至少有`m`元素的列表 ，`y`用返回一个数组的标题`n`编写 a ，该数组的第一个元素是 的第一个元素，下一个元素是 的第一个元素。`function``def addThem(x, y, m, n)``m``m``x``n``n``y`

我什至不知道数组是什么，更不用说如何回答这个问题了。我的决赛是在早上，我吓坏了。帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:56:40.633

如果我没有误解这个问题，那就是

```
x = [1,2,3,4]
y = [5,6,7,8]

def addThem(x, y, m, n):
  return x[:m]+y[:n] 
```

告诉我，如果我这样做，我会尝试修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:14:49.093

如果你想避免临时列表（只有在非常大时才重要） `m`，`n`你可以这样做

```
from itertools import chain, islice
def addThem(x, y, m, n):
    return list(chain(islice(x, 2), islice(y,2))) 
```

# ruby-on-rails - Ruby on Rails：从用户表中查找所有部门 ID

> ID：13908431
> 
> 赞同：3
> 
> 时间：2012-12-17T04:52:16.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有用户表，其中包含许多字段，包括部门 ID。departmentid 只是一个字符串。每个部门标识可以有不同的用户。是否可以从用户表中找到所有部门标识而无需重复。

我试图从用户表中找到所有的部门ID，但结果包含重复的部门ID。如何解决这个问题。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:54:48.923

SQL

```
select distinct department_id from users 
```

红宝石代码

```
User.all.map(&:department_id).compact.uniq 
```

也在rails 3中

```
User.select('departement_id').uniq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:06:37.720

您可能希望使用 sql 查询让 db 引擎处理数学并避免创建 ruby​​ 对象，这是更快的选择：

```
Department.where("id in (select distinct department_id from users)").all 
```

现在，如果您想以 Rails 方式进行操作，您仍然可以这样做：

```
Department.where(id: User.select("distinct department_id").map(&:department_id)).all 
```

请注意，使用最后一行代码，您可以避免创建 User 属性的完整映射，因为您只对 department_id 感兴趣，并且它还避免了通过每个 User 对象来收集 id 并使它们成为 uniq，通过使用 select distinct 数据库引擎将只返回单个值而不重复

# java - Hibernate Criteria 等价于 HQL

> ID：13908435
> 
> 赞同：1
> 
> 时间：2012-12-17T04:52:50.030
> 
> 标签：java, hibernate, hql, criteria

是否存在与以下 HQL 等效的休眠条件查询？

“从TestTable t中选择新的TestTable（t.id，t.param1，t.param2，t.param3）”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:40:39.497

如果您想加载表格的某些列，您可能需要`Projection`

```
Criteria crit = getSession().createCriteria(TestTable.class, "t");
ProjectionList projectionList = Projections.projectionList();
projectionList.add(Projections.property("id"));
projectionList.add(Projections.property("param1"));
projectionList.add(Projections.property("param2"));
projectionList.add(Projections.property("param1"));
crit.setProjection(projectionList);
List results = crit.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:26:01.987

如果您要做的只是查询 TestTable 的行并获取 TestTable hibernate 对象，只需在您尝试检索的 Hibernate 对象的类上创建一个 Criteria 对象。

```
Criteria crit = sess.createCriteria(TestTable.class);
List results = crit.list(); 
```

# performance - Mongodb聚合框架比map/reduce更快吗？

> ID：13908438
> 
> 赞同：55
> 
> 时间：2012-12-17T04:53:34.517
> 
> 标签：performance, mongodb, mapreduce, aggregation-framework

mongodb 2.2引入的聚合框架，对map/reduce有什么特别的性能提升吗？

如果是，为什么以及如何以及多少？

（我已经为自己做了一个测试，性能几乎相同）

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-17T10:15:05.657

我亲自运行的每个测试（包括使用您自己的数据）都表明聚合框架比 map reduce 快一个倍数，并且通常快一个数量级。

只取您发布的数据的 1/10（但不是清除操作系统缓存，而是先预热缓存 - 因为我想测量聚合的性能，而不是在数据中分页需要多长时间）我得到了这个：

MapReduce：1,058 毫秒
聚合框架：133 毫秒

从聚合框架中删除 $match 并从 mapReduce 中删除 {query:} （因为两者都只使用索引，这不是我们想要测量的）并通过 key2 对整个数据集进行分组我得到：

MapReduce：18,803ms
聚合框架：1,535ms

这些非常符合我之前的实验。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-17T09:23:15.767

我的基准：

**== 数据生成 ==**

用大约 350 个字节轻松生成 400 万行（使用 python）。每个文档都有以下键：

*   key1, key2（两个随机列来测试索引，一个基数为 2000，一个基数为 20）
*   longdata：增加每个文档大小的长字符串
*   value：一个简单的数字（const 10）来测试聚合

```
`db = Connection('127.0.0.1').test # mongo connection
random.seed(1)
for _ in range(2):
    key1s = [hexlify(os.urandom(10)).decode('ascii') for _ in range(10)]
    key2s = [hexlify(os.urandom(10)).decode('ascii') for _ in range(1000)]
    baddata = 'some long date ' + '*' * 300
    for i in range(2000):
        data_list = [{
                'key1': random.choice(key1s),
                'key2': random.choice(key2s),
                'baddata': baddata,
                'value': 10,
                } for _ in range(1000)]
        for data in data_list:
            db.testtable.save(data)` 
```

`mongo 中的总数据大小约为 6GB。（在 postgres 中为 2GB）

**== 测试 ==**

我做了一些测试，但一个足以比较结果：

注意：每次查询后都会重新启动服务器，并清除操作系统缓存，以忽略缓存的影响。

QUERY：聚合所有行`key1=somevalue`（大约 200K 行）并`value`为每个行求和`key2`

*   映射/减少 10.6 秒
*   合计 9.7 秒
*   组 10.3 秒

**查询：**

地图/减少：

`db.testtable.mapReduce(function(){emit(this.key2, this.value);}, function(key, values){var i =0; values.forEach(function(v){i+=v;}); return i; } , {out:{inline: 1}, query: {key1: '663969462d2ec0a5fc34'} })`

总计的：

`db.testtable.aggregate({ $match: {key1: '663969462d2ec0a5fc34'}}, {$group: {_id: '$key2', pop: {$sum: '$value'}} })`

团体：

`db.testtable.group({key: {key2:1}, cond: {key1: '663969462d2ec0a5fc34'}, reduce: function(obj,prev) { prev.csum += obj.value; }, initial: { csum: 0 } })``

# java - 通过java（Jsch）上的SSH连接到Windows时出现奇怪的符号

> ID：13908442
> 
> 赞同：1
> 
> 时间：2012-12-17T04:53:46.327
> 
> 标签：java, windows, ssh, jsch, printstream

我正在尝试使用 Jsch Shell 通道在 Windows XP 中执行命令，但由于某种原因，我的 System.out 流中出现了奇怪的符号，并且无法执行命令，我用于连接的代码是这样的：

```
this.session = jsch.getSession(this.login, this.host);

Properties properties = new Properties();
properties.put("StrictHostKeyChecking", "no");
session.setPassword(this.password);
session.setConfig(properties);

session.connect(30000);

channel =(ChannelShell) session.openChannel("shell");

PipedInputStream pip = new PipedInputStream(40);
channel.setInputStream(pip);
channel.setOutputStream(System.out);

PipedOutputStream pop = new PipedOutputStream(pip);
print = new PrintStream(pop); 
channel.connect(); 
```

然后我收到以下消息：

```
[1;1HMicrosoft Windows XP [Versi�n 5.1.2600][2;1H(C) Copyright 1985-2001 Microsoft Corp.[4;1HC:\Documents and Settings\diego\Escritorio>[4;44H 
```

当我尝试调用 cd C:\MyFolder\ 然后另一个命令（全部从 ssh 客户端测试并且有效）我生成更多奇怪的符号并且没有得到我的命令的结果，可能是什么问题？以下是我发送的命令和结果：

```
exec.print.println("cd C:\\MyFolder\\");
exec.print.println("some other command"); 
```

结果：

```
[1;1HMicrosoft Windows XP [Versi�n 5.1.2600][2;1H(C) Copyright 1985-2001 Microsoft Corp.[4;1HC:\Documents and Settings\diego\Escritorio>[4;44H[4;1HC:\Documents and Settings\diego\Escritorio>c[4;58H[4;1HC:\Documents and Settings\diego\Escritorio>cd C:\MyFolder\[4;58H[4;46H[4;58H[4;47H[4;58H[4;48H[4;58H[4;49H[4;58H[4;50H[4;58H[4;51H[4;58H[4;52H[4;58H[4;53H[4;58H[4;54H[4;58H[4;55H[4;58H[4;56H[4;58H[4;57H[4;58H 
```

我在 windows xp 中使用 FreeSShd 并且程序在 Ubuntu 上运行，我在控制台中使用 ssh 并与 windows XP 一起使用，我正在尝试在我的 java 程序中实现它，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:39:08.863

这是一个编码问题加上缺乏终端仿真。

SSH 守护进程期望与理解终端控制序列（`[1;1H`字符串，实际上前面有一个`ESC`字符）的设备通信。您的程序不提供终端仿真，因此您会看到原始转义序列。

菱形/问号字符表示您使用的字体不包含服务器发送的字符。在这种情况下，它可能是一个重音字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:48:00.873

你试过直接ssh吗？如果直接 ssh 有效，那么它的 jsch。尝试使用基于 linux 的 ssh 服务器的 jsch。如果 jsch 工作，那么它是 FreeSshd 问题。

# android - Cordova 2.2：navigator.app.exitApp() 应用程序在关闭时停止

> ID：13908443
> 
> 赞同：0
> 
> 时间：2012-12-17T04:53:54.200
> 
> 标签：android, cordova

我有一个使用 phonegap (cordova) 版本 2.2.0 发布的 Android 应用程序，并且正在使用

```
navigator.app.exitApp(); 
```

一旦没有更多的历史记录条目，请致电关闭我的应用程序。这适用于关闭应用程序，但随后在我的物理设备上收到一条消息，指出

```
Unfortunately, <app> has stopped working 
```

在这种情况下，我是否缺少某些特定的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T00:41:25.903

Logcat 显示我的应用程序没有在我自己的 onDestroy() 方法中调用 super.onDestroy()。

# php - 来自 CDN 的 Magento 皮肤

> ID：13908446
> 
> 赞同：0
> 
> 时间：2012-12-17T04:54:10.263
> 
> 标签：php, zend-framework, magento

嗨，我的 magento 遇到了这个问题，它不断从 url 获取皮肤主题。下面是 URL 屏幕截图

![在此处输入图像描述](../Images/c2347f3441f3b212aec0a88b3248d043.png)

```
http://cdn.glassesonline.com.my/skin/frontend/glassesonline/default/css/cloud-zoom.css 
```

假设从

```
http://localhost/skin/frontend/glassesonline/default/css/cloud-zoom.css 
```

我如何通过代码更改它，以便它不会从 cdn 获得它的皮肤。尽管我已经更改了 DB 中的安全和不安全的基本 URL，但问题仍然存在。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:13:10.840

如果你去系统 -> 网络 -> [ 不安全 | Secure ]，您将看到设置皮肤基本 URL 的选项，其中包括：

![在此处输入图像描述](../Images/eb7ffbb2d0f8e92a4ccadf28ecca0720.png)

# c# - 如何创建可以从基于 Web 的客户端接受不同格式的大文件的 WCF 服务

> ID：13908448
> 
> 赞同：0
> 
> 时间：2012-12-17T04:54:20.973
> 
> 标签：c#, jquery, wcf

我们有一个 Web 服务，它需要为客户端提供上传大文件的能力，然后由客户端选择的可用机制之一对其进行解析。该服务的典型用法将涉及上传一个大文件并指定要使用的解析机制，然后服务器将解析上传的数据并将其存储在数据库中。

例如，我们有许多包含有用信息的 excel 文件。不幸的是，有多种不同的格式，我们需要能够解析它们。我们当前的解决方案要求当用户上传一个 excel 文件时，他们还要从预定义的解析方法列表中进行选择。

目前，该服务提供了一种具有以下签名的方法：

```
[OperationContract, WebInvoke(UriTemplate = "/DoUpload/{fileType}")]
void DoUpload(string fileType, Stream fileData); 
```

我们需要某种方式来允许基于 Web 的客户端（利用 jQuery）调用 DoUpload，使得 fileType 是客户端选择的字符串，而 fileData 是从客户端上传的文件。

理想情况下，这种机制还允许我们公开来自同一服务的有效文件类型列表。

其他信息：

*   将来需要添加其他方法，包括其他文件类型
*   该解决方案应为服务器利用 C# 技术，但不一定需要是 WCF
*   上传的文件**不**存储在服务器上，处理后丢弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:13:52.690

WCF 支持上传、流式传输和缓冲两种方法。缓冲是默认模式，涉及缓冲整个文件并将其以一大块发送到服务器。这适用于中小型文件，但对于大文件来说往往太慢了。流式传输通过多个响应向服务器发送文件位，并具有许多好处，例如在流中断时能够恢复流。

显然，解决这个问题的适当方法是流式传输，但是，因为流式传输不是默认设置，我们需要做一些配置工作才能让 WCF 使用它。此答案特别适用于 WCF 服务，因为启用流式处理涉及修改 Web.config

因此，首先，假设您有一个接受流的公开方法，如下所示：

```
[OperationContract]
[WebInvoke(UriTemplate = "/Upload", Method = "POST")]
void Upload(Stream data); 
```

我们需要告诉 WCF 为这个端点使用流式传输，为此我们需要一个允许流式传输的绑定，我们可以在 Web.config 中使用类似这样的东西：

```
<configuration>
    ...
    <bindings>
        <webHttpBinding>
            <binding name="httpStreamingBinding" transferMode="Streamed" />
        </webHttpBinding>
    </bindings>
    ...
    <services>
        <service name="MyServiceNamespace.MyServiceName">
            <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding"
                      bindingConfiguration="httpStreamingBinding" name="UploadEndpoint"
                      contract="MyServiceNamespace.IMyServiceName" />
        </service>
    </services>
    ...
    <behaviors>
        ...
        <endpointBehaviors>
            <behavior name="web">
                <webHttp />
            </behavior>
        </endpointBehaviors>
    </behaviors>
</configuration> 
```

这将创建一个端点，该端点指向包含 Upload 方法的类，并将其配置为使用流传输。但是我们仍然有一个问题，大文件传输需要时间并且Web服务器默认超时太低而无法传输大文件，我们需要修改更多的Web.config。

首先，我们需要像这样更改 httpStreamingBinding 的超时长度和最大接收消息大小（maxRecievedMessageSize 以字节为单位）：

```
<binding name="httpStreamingBinding" maxReceivedMessageSize="4294967296"
         transferMode="Streamed" 
         crossDomainScriptAccessEnabled="true"
         openTimeout="00:01:00"
         closeTimeout="00:01:00"
         receiveTimeout="02:00:00"
         sendTimeout="02:00:00"
         /> 
```

然后我们需要修改我们的 http 运行时以接受大文件，这里我选择了 4gb 作为最大值（maxRequestLength 以 kb 为单位）：

```
<system.web>
    ...    
    <httpRuntime
      executionTimeout="7200" 
      maxRequestLength="4194304" />
</system.web> 
```

现在我们可以接收流数据，但还有更多工作要做。通常，大型 HTTP 上传是使用 multipart/form-data 内容类型完成的，这意味着您在流中收到的数据不仅是上传的文件，还有来自表单的附加数据。您可以自己手动解析这些数据，也可以使用现有的解析器。[Lorenzo 在这个答案中提供了一个优秀的多部分数据解析器](https://stackoverflow.com/a/8944382/203133)

我们还有另一个问题，使用 HTML 表单上传多部分数据很简单，但是如果我们想使用 javascript 怎么办？根据浏览器的不同，对上传流数据有不同级别的支持，但是[jQuery 文件上传器插件](http://blueimp.github.com/jQuery-File-Upload/)为将文件上传到流数据服务提供了出色的支持。只需确保使用“files[]”作为多部分解析器的文件名，如下所示：

```
[OperationContract]
[WebInvoke(UriTemplate = "/Upload", Method = "POST")]
void Upload(Stream data)
{
    var parser = new HttpMultipartParser(data, "files[]");
    ...
} 
```

现在我们已经有了数据，我们需要一些方法来根据上传的文件类型来做一些逻辑。我通过更改基于 URL 参数的解析方法解决了这个问题，例如 /Upload/FormatOne 将使用 FormatOne 方法，而 /Upload/FormatTwo 将使用 FormatTwo。这是使用此方法完成的：

```
delegate void FileFormatHandler(Stream data);

[OperationContract]
[WebInvoke(UriTemplate = "/Upload/{fileType}", Method = "POST")]
void Upload(string fileType, Stream data)
{
    var parser = new HttpMultipartParser(data, "files[]");

    FileFormatHandler handler = selectHandler(fileType);
    handler(data);
} 
```

不幸的是，这种方法意味着该服务将不再使用基于 SOAP 的 WCF 调用机制，因为 Stream 应该是 SOAP 中的唯一参数，但是 Web 调用将不受此限制的影响。

我们现在有一个 WCF 服务，它使用流式接收大文件，并且能够根据用户使用的 URL 调用不同的解析方法。要上传数据，用户只需将一些信息发布到适当的 URL。例如，如果用户想要上传一个文件并让 MyFancyFormat 解析器对其进行解析，他们将 POST 到以下 URL：

```
http://myserver/MyService.svc/Upload/MyFancyFormat 
```

# python - 如何设置 Flask 蓝图以允许匿名访问？

> ID：13908455
> 
> 赞同：1
> 
> 时间：2012-12-17T04:54:57.870
> 
> 标签：python, authentication, flask

我正在开发一个 Flask 应用程序，但在文档中没有看到如何关闭用户登录的要求。我们需要为一些 REST 服务（可能）与一些需要登录的页面同时执行此操作.

最好的方法是什么？我已经搜索了文档和片段，但没有看到如何关闭对某些蓝图的要求。我尝试的所有内容都得到 401（未经授权）页面。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T04:59:06.433

默认情况下，Flask 不需要任何身份验证。如果你想要这样的行为，通常你必须装饰你的视图函数。因此，您的错误很可能在您的 Web 服务器配置中。

# google-chrome - Windows 8 浏览器问题

> ID：13908459
> 
> 赞同：-1
> 
> 时间：2012-12-17T04:55:21.790
> 
> 标签：google-chrome, firefox, windows-8

我最近刚刚购买了一台装有 Windows 8 的新笔记本电脑，并且一直在处理我的浏览器问题。我最初是从 Chrome 开始的。我安装了它，并开始使用它，没有任何问题。大约一周左右后，我开始遇到问题，有时页面会以纯 html 加载，有时无法完全加载。如果我单击刷新，它通常可以正常工作。

好吧，在这让我很恼火之后，我认为这是一个 chrome 问题并转移到了 firefox。然后我下载了 Firefox，发现它在做同样的事情，虽然不是一直如此。当我刚来到 stackoverflow.com 时，页面被呈现为纯 html。我刷新了页面，现在可以正常工作了。

这似乎是一个非常奇怪的问题，我相信它可能与脚本有关。我最难使用的网站是 Gmail、Windows Azure 和 Quickbooks。在这些网站上，即使我点击刷新并且几次它通常也不起作用。我必须稍后再回来并再次尝试使其正常工作。

任何帮助将不胜感激，我还没有在 Internet Explorer 中尝试过。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:57:53.580

如果你有三星，我敢打赌，卸载支持中心，清除缓存，然后重新启动。那应该可以解决您的问题。它对我有用。三星的支持程序与浏览器写入缓存的方式之间存在一些冲突。

# yii - yii 在 CDbCriteria 中结合 addColumnCondition

> ID：13908460
> 
> 赞同：1
> 
> 时间：2012-12-17T04:55:32.783
> 
> 标签：yii

我的 GridView 中有几个下拉过滤器，在我的模型的搜索部分中，我有：

```
if ($this->agent_primary != "") {
    $criteria->addColumnCondition(array('agent_type_id'=>1, 'agent.agent_id'=>$this->agent_primary));
}

if ($this->agent_voice != "") {
    $criteria->addColumnCondition(array('agent_type_id'=>2, 'agent.agent_id'=>$this->agent_voice));
}

if ($this->agent_commercial != "") {
    $criteria->addColumnCondition(array('agent_type_id'=>3, 'agent.agent_id'=>$this->agent_commercial));
} 
```

我需要以某种方式将其结合起来，因此如果有人选择三个下拉列表中的两个（或全部三个），他们会得到正确的结果，目前 sql 在每个 addColumnCondition 的单独括号中都有 WHERE：

> WHERE (condition1a = a AND condition1b = b) AND (condition2a = a AND condition2b = b)

代替

> WHERE (condition1a = a AND condition1b = b) OR (condition2a = a AND condition2b = b)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:20:24.953

您可以简单地使用 的第三个参数[`operator`，`addColumnCondition`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addColumnCondition-detail "http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addColumnCondition-detail")将其设置为`'OR'`：

```
if ($this->agent_primary != "") {
    $criteria->addColumnCondition(array('agent_type_id'=>1, 'agent.agent_id'=>$this->agent_primary),'AND','OR');
} 
```

你会得到：

```
WHERE (agent_type = 1 AND agent.agent_id = X) OR (condition2a = a AND condition2b = b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:00:24.077

使用 addCondition 函数在此处添加您的条件 $criteriaStr; 因为您需要在此处构建字符串并使用它。

```
$criteriaStr = "";
if ($this->agent_primary != "") {
    $criteriaStr .= '(agent_type_id=1 AND agent.agent_id='.$this->agent_primary.')';
}

if ($this->agent_voice != "") {
    if($criteriaStr !== '' ) { $criteriaStr .= ' OR '; }

    $criteriaStr .= '(agent_type_id=2 AND agent.agent_id='.$this->agent_voice.')';
}

if ($this->agent_commercial != "") {
    if($criteriaStr !== '' ) { $criteriaStr .= ' OR '; }

    $criteriaStr .= '(agent_type_id=3 AND agent.agent_id='.$this->agent_commercial.')';
}

$criteria->addCondition($criteriaStr); 
```

# apache-poi - 使用 apache POI 读取 .xlsm 文件时出错

> ID：13908463
> 
> 赞同：-2
> 
> 时间：2012-12-17T04:56:04.360
> 
> 标签：apache-poi, xssf

我正在尝试读取 tempdoc.xlsm 文件，当执行以下行时出现 IO 错误

```
String fileName = request.getParameter("file");

XSSFWorkbook wb = new XSSFWorkbook();

wb = new XSSFWorkbook(new FileInputStream(fileName)); //error wen executing this line 
```

当我尝试使用上述方法时，我只是在捕获 IO 异常 java.io.FileNotFoundException 时收到以下消息：fileName（系统找不到指定的文件）

任何人都可以帮我解决它...

但现在我得到了以下异常，这是堆栈跟踪，如下所示

严重：Servlet UploadData 的 Servlet.service() 抛出异常 java.lang.OutOfMemoryError: Java heap space at org.apache.xmlbeans.impl.values.NamespaceContext$NamespaceContextStack.(NamespaceContext.java:78) at org.apache.xmlbeans。 impl.values.NamespaceContext$NamespaceContextStack.(NamespaceContext.java:75) at org.apache.xmlbeans.impl.values.NamespaceContext.getNamespaceContextStack(NamespaceContext.java:98) at org.apache.xmlbeans.impl.values.NamespaceContext.push (NamespaceContext.java:106) 在 org.apache.xmlbeans.impl.values.XmlObjectBase.check_dated(XmlObjectBase.java:1273) 在 org.apache.xmlbeans.impl.values.JavaStringEnumerationHolderEx.enumValue(JavaStringEnumerationHolderEx.java:60) 在org.openxmlformats.schemas 中的 org.apache.xmlbeans.impl.values.XmlObjectBase.getEnumValue(XmlObjectBase.java:1514)。org.apache.poi.xssf.usermodel.XSSFSheet.onReadCell(XSSFSheet.java:2624) 上的电子表格ml.x2006.main.impl.CTCellFormulaImpl.getT（未知来源）。 XSSFRow.java:72) 在 org.apache.poi.xssf.usermodel.XSSFSheet.initRows(XSSFSheet.java:178) 在 org.apache.poi.xssf.usermodel.XSSFSheet.read(XSSFSheet.java:142) 在 org .apache.poi.xssf.usermodel.XSSFSheet.onDocumentRead(XSSFSheet.java:129) 在 org.apache.poi.xssf.usermodel.XSSFWorkbook.onDocumentRead(XSSFWorkbook.java:269) 在 org.apache.poi.POIXMLDocument.load (POIXMLDocument.java:159) 在 org.apache.poi.xssf.usermodel.XSSFWorkbook.(XSSFWorkbook.java:190) 在 com.UploadData.doPost(UploadData.java:91) 在 javax.servlet.http.HttpServlet.service (HttpServlet.java:637) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve .invoke(StandardWrapperValve.java:233) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org. org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 的 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter. java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) 在 org.apache.coyote.http11。Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source) 线程异常“ContainerBackgroundProcessor[StandardEngine[Catalina]]”java.lang.OutOfMemoryError：Java 堆空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:28:18.900

您使用的是字符串文字“fileName”而不是变量 fileName。

尝试

```
wb = new XSSFWorkbook(new FileInputStream(fileName)); 
```

请注意，文件名周围缺少引号。

# algorithm - 从区间列表的子集中查找最小值和最大值

> ID：13908464
> 
> 赞同：0
> 
> 时间：2012-12-17T04:56:06.027
> 
> 标签：algorithm

给定一个区间列表（这里显示了它们的索引）：

```
0: 1,3
1: 0,4
2: 5,7
3: 6,9
4: 2,8 
```

然后从列表索引中给出任意进出，有没有一种好方法可以从包含的相应间隔中确定最小值和最大值？

例如：`0,4`会给你`0,9`。 `2,3`会给你`5,9`。

我目前的解决方案涉及迭代范围内的每个间隔，在入点上保持最小值，在出点上保持最大值。想知道是否存在算法技术的数据结构，当间隔列表很长时，我会忽略它以使其更快。由于间隔列表没有改变，也许我可以预先创建一些模型来以不同的方式表示数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:28:39.803

一种简单的方法是使用树形结构。树的根将具有整个列表的最小值/最大值。然后它将有两个孩子，它们给出前半部分和后半部分的最小值/最大值等。这将允许您使用 O(log(n)) 搜索算法，其中 n 是整个区间列表的大小。

首先，您构建树。这可以通过将区间列表分成两部分并为每个子区间制作一棵树来递归完成：

```
def makeTree(begin,end,intervals):
  if end==begin:
    return None
  if end==begin+1:
    return Node(begin,end,intervals[begin],None,None)
  partition=(begin+end)/2
  left=makeTree(begin,partition)
  right=makeTree(partition,end)
  range=combineRanges(rangeOf(left),rangeOf(right))
  return Node(begin,end,range,left,right) 
```

一旦你有了树，你可以将树的根传递给这个函数：

```
def findRange(node,begin,end):
  # If the node's range doesn't intersect the range you are looking for, 
  # then you don't have to look any deeper.
  if node is None or begin>=node.end or end<=node.begin:
    return None
  # If the node's range is completely inside the range you are looking for, then
  # you also don't need to look any deeper.
  if begin<=node.begin and end>=node.end:
    return node.range
  # Otherwise, check each child.
  left_range=findRange(node.left,begin,end)
  right_range=findRange(node.right,begin,end)
  # And return the combined result.
  return combineRanges(left_range,right_range) 
```

请注意，我使用的是半开区间，对于区间中的任何 x，begin <= x < end。这只是使代码更干净一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:06:03.847

很容易看出，每个区间实际上表示一个最小值和一个最大值。

所以问题就变成了：给你 2 个数组，找到任何指定索引范围的最小值和最大值。

发现最小值和最大值相似，所以我们在这里讨论最小值。

首先，如前所述，可以使用[Segment tree](http://en.wikipedia.org/wiki/Segment_tree)`@Vaughn Cato`轻松完成。

而且实际上我们不需要使用如此强大的数据结构，例如`Segment tree`，还有另一种特定的算法可以解决这个问题，称为[Range Minimum Query](http://en.wikipedia.org/wiki/Range_Minimum_Query)。

顺便说一句，我写了一篇关于 的帖子`RMQ`，请参阅[http://attiix.com/2011/08/22/4-ways-to-solve-%c2%b11-rmq/](http://attiix.com/2011/08/22/4-ways-to-solve-%c2%b11-rmq/)。

# c++ - 分配初始化的、对齐的内存

> ID：13908467
> 
> 赞同：9
> 
> 时间：2012-12-17T04:56:12.870
> 
> 标签：c++, c, posix, memory-alignment, dynamic-allocation

我正在编写一个程序（在 C++ 中），我需要在其中分配起始地址应与缓存行大小对齐的数组。当我分配这些数组时，我还希望内存初始化为零。

现在我使用 posix_memalign 函数让它工作。这适用于获取内存对齐的数组，但数组未初始化。有没有更好的函数可以用来在初始化数组时将它们归零，还是我只需要编写一个单独的循环来为我做这件事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T04:57:33.533

只需调用`memset`块。确保`char *`在调用`memset`. 由于您的指针将对齐，因此请确保该信息不会对编译器隐藏。

**更新**：为了澄清我关于不隐藏对齐的观点，比较：

```
char* mem_demo_1(char *j)
{ // *BAD* compiler cannot tell pointer alignment, must test
    memset(j, 0, 64);
    return j;
}

char* mem_demo_2(void)
{ // *GOOD* compiler can tell pointer alignment
    char * j = malloc(64);
    memset(j, 0, 64);
    return j;
} 
```

With `GCC`,`mem_demo_1`编译到 60 行汇编，而`mem_demo_2`编译到 20 行。性能差异也很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:59:17.857

> 使用 GCC，mem_demo_1 编译为 60 行汇编，而 mem_demo_2 编译为 20。性能差异也很大。

我决定使用 gcc 4.4.6 在 Linux 2.6.32 上验证此声明。第一的

> mem_demo_1 编译为 60 行汇编，而 mem_demo_2 编译为 20

.

这是测试（在文件 main.c 中）：

```
 #include <stdlib.h>
  #include <stdio.h>
  #include <string.h>

  char* mem_demo_1(char *j)
  {
      // *BAD* compiler cannot tell pointer alignment, must test
      memset(j, 0, 64);
      return j;
  }

  char* mem_demo_2(void)
  {
    // *GOOD* compiler can tell pointer alignment
    char * j = malloc(64);
    memset(j, 0, 64);
    return j;
  }

  int main()
  {
    char *p;
    p = malloc(64);
    p = mem_demo_1(p);
    printf ("%p\n",p);
    free (p);

    p = mem_demo_2();
    printf ("%p\n",p);
    free (p);

    return 0;
  } 
```

当我编译时：

```
 gcc -fno-inline -fno-builtin -m64 -g -O2 main.c -o main.no_inline_no_builtin 
```

我看到 mem_demo_1 中只有 8 行：

```
(gdb) disassemble mem_demo_1
Dump of assembler code for function mem_demo_1:
   0x00000000004005d0 <+0>:     push   %rbx
   0x00000000004005d1 <+1>:     mov    $0x40,%edx
   0x00000000004005d6 <+6>:     mov    %rdi,%rbx
   0x00000000004005d9 <+9>:     xor    %esi,%esi
   0x00000000004005db <+11>:    callq  0x400470 <memset@plt>
   0x00000000004005e0 <+16>:    mov    %rbx,%rax
   0x00000000004005e3 <+19>:    pop    %rbx
   0x00000000004005e4 <+20>:    retq
End of assembler dump. 
```

我看到 mem_demo_2 中只有 11 行：

```
(gdb) disassemble mem_demo_2
Dump of assembler code for function mem_demo_2:
   0x00000000004005a0 <+0>:     push   %rbx
   0x00000000004005a1 <+1>:     mov    $0x40,%edi
   0x00000000004005a6 <+6>:     callq  0x400480 <malloc@plt>
   0x00000000004005ab <+11>:    mov    $0x40,%edx
   0x00000000004005b0 <+16>:    mov    %rax,%rbx
   0x00000000004005b3 <+19>:    xor    %esi,%esi
   0x00000000004005b5 <+21>:    mov    %rax,%rdi
   0x00000000004005b8 <+24>:    callq  0x400470 <memset@plt>
   0x00000000004005bd <+29>:    mov    %rbx,%rax
   0x00000000004005c0 <+32>:    pop    %rbx
   0x00000000004005c1 <+33>:    retq
End of assembler dump. 
```

因此，无法确认“mem_demo_1 编译为 60 行汇编，而 mem_demo_2 编译为 20”。

当我编译时：

```
 gcc -m64 -g -O2 main.c -o main.default 
```

gcc 使用自己的 memset 实现，并且函数 mem_demo_1 和 mem_demo_2 都更大：

```
mem_demo_1: 43 instructions
mem_demo_2: 48 instructions 
```

但是，“mem_demo_1 编译为 60 行汇编，而 mem_demo_2 编译为 20”也无法确认。

第二

> “性能差异也很大”

我扩展了 main.c 以便用 memset 做很多循环。我也没有看到 mem_demo_1 中的 memset 比 mem_demo_2 中的慢。这是来自 Linux 性能报告：
mem_demo_2 在 memset 中花费了 8.37%：

> 8.37% main.perf.no_bu libc-2.12.so [.] __memset_sse2

而 mem_demo_1 在 memset 中花费了 7.61%：

> 7.61% main.perf.no_bu libc-2.12.so [.] __memset_sse2

这些本身就是测量值：

```
# time ./main.perf.no_builtin_no_inline 100000000 1 0
number loops 100000000
mem_demo_1

real    0m3.483s
user    0m3.481s
sys     0m0.002s

# time ./main.perf.no_builtin_no_inline 100000000 2 0
number loops 100000000
mem_demo_2

real    0m3.503s
user    0m3.501s
sys     0m0.001s 
```

顺便说一句，这就是我`gcc -fverbose-asm -c -S -O3`展示 mem_demo_2 的汇编程序的方式：

```
char* mem_demo_2(void)
{
  char * j = malloc(64);
  memset(j, 0, 64);
  return j;
}

        .file   "main.mem_demo_2.c"
# GNU C (GCC) version 4.4.6 20110731 (Red Hat 4.4.6-3) (x86_64-redhat-linux)
#       compiled by GNU C version 4.4.6 20110731 (Red Hat 4.4.6-3), GMP version 4.3.1, MPFR version 2.4.1.
# GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
# options passed:  main.mem_demo_2.c -m64 -mtune=generic -auxbase-strip
# main.mem_demo_2.default.asm -g -O3 -fverbose-asm
# options enabled:  -falign-loops -fargument-alias
# -fasynchronous-unwind-tables -fauto-inc-dec -fbranch-count-reg
# -fcaller-saves -fcommon -fcprop-registers -fcrossjumping
# -fcse-follow-jumps -fdefer-pop -fdelete-null-pointer-checks
# -fdwarf2-cfi-asm -fearly-inlining -feliminate-unused-debug-types
# -fexpensive-optimizations -fforward-propagate -ffunction-cse -fgcse
# -fgcse-after-reload -fgcse-lm -fguess-branch-probability -fident
# -fif-conversion -fif-conversion2 -findirect-inlining -finline
# -finline-functions -finline-functions-called-once
# -finline-small-functions -fipa-cp -fipa-cp-clone -fipa-pure-const
# -fipa-reference -fira-share-save-slots -fira-share-spill-slots -fivopts
# -fkeep-static-consts -fleading-underscore -fmath-errno -fmerge-constants
# -fmerge-debug-strings -fmove-loop-invariants -fomit-frame-pointer
# -foptimize-register-move -foptimize-sibling-calls -fpeephole -fpeephole2
# -fpredictive-commoning -freg-struct-return -fregmove -freorder-blocks
# -freorder-functions -frerun-cse-after-loop -fsched-interblock
# -fsched-spec -fsched-stalled-insns-dep -fschedule-insns2 -fsigned-zeros
# -fsplit-ivs-in-unroller -fsplit-wide-types -fstrict-aliasing
# -fstrict-overflow -fthread-jumps -ftoplevel-reorder -ftrapping-math
# -ftree-builtin-call-dce -ftree-ccp -ftree-ch -ftree-coalesce-vars
# -ftree-copy-prop -ftree-copyrename -ftree-cselim -ftree-dce
# -ftree-dominator-opts -ftree-dse -ftree-fre -ftree-loop-im
# -ftree-loop-ivcanon -ftree-loop-optimize -ftree-parallelize-loops=
# -ftree-pre -ftree-reassoc -ftree-scev-cprop -ftree-sink -ftree-sra
# -ftree-switch-conversion -ftree-ter -ftree-vect-loop-version
# -ftree-vectorize -ftree-vrp -funit-at-a-time -funswitch-loops
# -funwind-tables -fvar-tracking -fvar-tracking-assignments
# -fvect-cost-model -fverbose-asm -fzero-initialized-in-bss
# -m128bit-long-double -m64 -m80387 -maccumulate-outgoing-args
# -malign-stringops -mfancy-math-387 -mfp-ret-in-387 -mfused-madd -mglibc
# -mieee-fp -mmmx -mno-sse4 -mpush-args -mred-zone -msse -msse2
# -mtls-direct-seg-refs
mem_demo_2:
.LFB30:
        .file 1 "main.mem_demo_2.c"
        .loc 1 6 0
        .cfi_startproc
        subq    $8, %rsp
        .cfi_def_cfa_offset 16
        .loc 1 7 0
        movl    $64, %edi
        call    malloc
        .loc 1 8 0
        testb   $1, %al
        .loc 1 7 0
        movq    %rax, %rsi
.LVL0:
        .loc 1 8 0
        movq    %rax, %rdi
        movl    $64, %edx
        jne     .L10
        testb   $2, %dil
        jne     .L11
.L3:
        testb   $4, %dil
        jne     .L12
.L4:
        movl    %edx, %ecx
        xorl    %eax, %eax
.LVL1:
        shrl    $3, %ecx
        testb   $4, %dl
        mov     %ecx, %ecx
        rep stosq
        je      .L5
        movl    $0, (%rdi)
        addq    $4, %rdi
.L5:
        testb   $2, %dl
        je      .L6
        movw    $0, (%rdi)
        addq    $2, %rdi
.L6:
        andl    $1, %edx
        je      .L7
        movb    $0, (%rdi)
.L7:
        .loc 1 10 0
        movq    %rsi, %rax
        addq    $8, %rsp
        .cfi_remember_state
        .cfi_def_cfa_offset 8
        ret
        .p2align 4,,10
        .p2align 3
.L10:
        .cfi_restore_state
        .loc 1 8 0
        leaq    1(%rax), %rdi
        movb    $0, (%rax)
        movb    $63, %dl
        testb   $2, %dil
        je      .L3
        .p2align 4,,10
        .p2align 3
.L11:
        movw    $0, (%rdi)
        addq    $2, %rdi
        subl    $2, %edx
        testb   $4, %dil
        je      .L4
        .p2align 4,,10
        .p2align 3
.L12:
        movl    $0, (%rdi)
        subl    $4, %edx
        addq    $4, %rdi
        jmp     .L4
        .cfi_endproc 
```

# php - 如何在 mysql_query 中使用更复杂的查询？

> ID：13908468
> 
> 赞同：0
> 
> 时间：2012-12-17T04:56:13.597
> 
> 标签：php, mysql

我正在尝试通过 PHP 使用更复杂的查询，但似乎遇到了问题。这是我正在尝试做的事情：

```
$result = mysql_query('select(select count(*) from tblname where column LIKE xyz) and      (select count(*) from tblname2 where column2='Value')); 
```

这似乎不起作用 - 有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:00:19.830

这不是有效的 SQL。如果你想要两个计数的总和，也许你的意思是：

```
SELECT SUM(cnt)
FROM
(
    SELECT COUNT(*) AS cnt
    FROM tblname
    WHERE column LIKE xyz
    UNION ALL
    SELECT COUNT(*) AS cnt
    FROM tblname2
    WHERE column2 = 'Value'
) x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:00:00.720

您使用的语法不正确，您是否尝试先查看手册？ [http://dev.mysql.com/doc/refman/5.0/en/subqueries.html](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)

# plugins - 我可以使用来自 Liferay 6.1.0 的 Kaleo 和其他 portlet。在 6.1.1 版本中？

> ID：13908470
> 
> 赞同：2
> 
> 时间：2012-12-17T04:56:16.027
> 
> 标签：plugins, workflow, liferay, portlet, liferay-6

我可以使用来自 Liferay 6.1.0 的 Kaleo 和其他 portlet。在 6.1.1 版本中。

我尝试将 kaleo 放入 6.1.1 版本的 webapps 和部署目录，但没有任何反应。

我是否需要将 portlet 修改为新规范？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:31:26.340

对于 Liferay 分发的 Liferay 插件，它们通常只使用编译它们的版本进行测试 - 即使它们可能工作，建议您仅使用 6.1.1 插件和 6.1.1 安装。关于他们在数据库中的数据，预计他们将是一个平滑的更新/替换。如果您认为它们可以通过发布边界工作，则可能是您没有测试足够的极端情况。

只需使用相同版本的插件，让您的生活更轻松

# asp.net-mvc-3 - 使用asp.net mvc在会话到期时重定向页面

> ID：13908472
> 
> 赞同：0
> 
> 时间：2012-12-17T04:56:29.137
> 
> 标签：asp.net-mvc-3, dns

在我的 web.config 文件中，我有以下代码：

```
<system.web>   
<authentication mode="Forms">
<forms loginUrl="/Account/Login" slidingExpiration="true" timeout="1" />
</authentication>
<sessionState timeout="1"></sessionState>   
</system.web> 
```

我有主页项目，其中会有子页面。我已经`[Authorize]`为每个视图索引方法提供了属性。

会话完成后，当我们选择任何视图时，项目主页内的页面将被重定向。但我希望整个页面被重定向。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:00:50.107

您的 web.config 应该如下所示。

```
<system.web>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
</system.web> 
```

`<authentication>`元素应该在而`<system.web>`不是`<assemblies>`。其余的事情你正在正确地做，即通过将`[Authorize]`属性放在方法/动作上。

当会话到期并且对该操作发出请求时，将使用 loginUrl 并将用户重定向到登录页面。希望这可以帮助。

# android - 反复更改应用背景颜色：Android

> ID：13908477
> 
> 赞同：0
> 
> 时间：2012-12-17T04:57:25.797
> 
> 标签：android

我正在构建一个会闪烁屏幕的应用程序，我需要不断更改我的 android 应用程序背景颜色使用

> 设置背景颜色

我得到了基本的背景颜色更改，但是当我实现以下代码时，应用程序崩溃了

```
void testthread()
{
    new Thread( new Runnable(){
        @Override
        public void run(){
            Looper.prepare();
            //do work here
            while(true)
            {
            background_White();
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            background_Black();
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            background_White();
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            background_Black();
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            }

        }
    }).start();

} 
```

函数 background_White 和 background_Black

```
 public void background_White() {

    View flashScreen = findViewById(R.id.flashScreen);
    flashScreen.setBackgroundColor(Color.WHITE);

}

public void background_Black() {

    View flashScreen = findViewById(R.id.flashScreen);
    flashScreen.setBackgroundColor(Color.BLACK); 
```

你们能否为我提供有关如何使我的计划发挥作用的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:18:08.380

我不确定，但不是线程尝试使用**Handler** -Runnable 作为，

```
 handler.postDelayed(runnable, 1);  

private Runnable runnable = new Runnable() {
public void run() {  
    runOnUiThread(new Runnable() { 
        public void run() 
        { 
            //*change background here**/                       
        } 
    }); 
```

我认为您的应用程序出现问题是因为另一个线程更新了您的 UI，因此请尝试使用上述 Handler-Runnable。

# c# - 运行 asp.net 教程时出现“/”应用程序中的服务器错误

> ID：13908480
> 
> 赞同：0
> 
> 时间：2012-12-17T04:57:36.623
> 
> 标签：c#, asp.net, dreamweaver

大家好，我是一个新手，我正在测试一个 asp.net 脚本，并且仍在学习。我在dreamweaver上运行这个。每当我运行页面。我得到这个错误。

我实际上是在尝试 用我自己的 sql 表和数据库复制这个[http://quickstarts.asp.net/QuickStartv20/util/srcview.aspx?path=~/aspnet/samples/data/GridViewBoundFields.src 。](http://quickstarts.asp.net/QuickStartv20/util/srcview.aspx?path=~/aspnet/samples/data/GridViewBoundFields.src)

[![在此处输入图像描述](../Images/2c9b79e46fb559e712b4bbe39fed075b.png)](https://i.stack.imgur.com/iNRoW.png)

```
<%@ Page Language="C#" %>
<html>
<head id="Head1" runat="server">
<title>GridView Bound Fields</title>
</head>
<body>
<form id="form1" runat="server">
<asp:GridView ID="GridView1" DataSourceID="SqlDataSource1" AutoGenerateColumns="False"
runat="server">
<Columns>
<asp:BoundField HeaderText="Course" DataField="Course" />
</Columns>
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
SelectCommand="SELECT Course FROM tmdsi"
ConnectionString="<%$ ConnectionStrings: test%>" />
</form>
</body>
</html> 
```

我的网络配置文件是

```
<configuration>  
<connectionStrings>  
<add name="test"   
connectionString="Server=myipaddress; port=3306;Integrated Security=True;
Database=test;User=test; Password=test;"
providerName="System.Data.SqlClient" />  
</connectionStrings>  
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:04:51.253

**[您必须提供用逗号分隔的端口，在此处](http://www.connectionstrings.com/)**阅读有关连接字符串的更多信息

改变

```
Server=myipaddress; port=3306; 
```

到

```
Server=myipaddress,3306; 
```

*还将 CutomError 模式更改为 OFF 以查看您到底遇到了什么错误。*

# android - AsyncTask 和进度条

> ID：13908485
> 
> 赞同：1
> 
> 时间：2012-12-17T04:58:02.083
> 
> 标签：android, android-asynctask, android-progressbar

我正在编写一个应用程序，我在其中一个一个下载 PDF 并在视图中显示它们。该视图有一个下一个按钮，onClick 显示 PDF（在上一次下一次单击时下载）并下载下一个 PDF，当再次单击下一个按钮时将显示下一个 PDF。我正在使用 AsyncTasks 下载文件。对于每个文件，我都有一个 AsyncTask 和一个 ProgressDialog。如果用户单击下一步按钮并且要显示的文件（应该在上一次单击时下载）仍在下载，我想显示进度条并等待下载完成。以下是我的代码片段..

```
public void saveFile(String uri, int index)
    {
if(!f.exists())
        {

            Downloader downloader = new Downloader(f, index);
            //adding the downloader to the list
             downloaders.add(downloader);
            downloader.execute(uri);
        }
} 
```

这是我显示 PDF 的方法

```
private void showPdf(){

    [...]
          if(!completed[to_show]){

              downloaders.get(to_show).mProgressDialog.show();
              }
        [...]
} 
```

这是我的 AsyncTask 代码

```
private class Downloader extends AsyncTask<String, Integer, String> {

    ProgressDialog mProgressDialog;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setMax(100);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.show();
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        completed[fileNum] = true;
        Log.e("PDFReaderAct",String.valueOf(fileNum)+" download complete");
        mProgressDialog.dismiss();
    }

    public Downloader() {
       [...]
        mProgressDialog = new ProgressDialog(PDFReaderAct.this);
       [...]
    }

@Override
protected String doInBackground(String...params ) {
            try
            {
                //Code to download the file
                    publishProgress((int) (total * 100 / fileLength));
                    os.write(bytes, 0, count);
                }
            [...]   
            }

            }

@Override
    protected void onProgressUpdate(final Integer... progress) {
        super.onProgressUpdate(progress);
        runOnUiThread( new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                mProgressDialog.setProgress(progress[0]);
            }
        });

    }

    } 
```

当我运行此代码时，会显示进度条，但在执行 showPdf() 方法之后。我正在跟踪每个文件下载的 AsyncTasks 和 progressDialogs。我怎样才能显示以前下载的进度..

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:03:04.293

这里

```
private void showPdf(){

    [...]

     downloaders.get(to_show).mProgressDialog.show(); //<<get method of AsyncTask

    [...]
} 
```

作为关于[AsyncTask 的文档。获取（长时间超时，TimeUnit 单位）](http://developer.android.com/reference/android/os/AsyncTask.html#get%28long,%20java.util.concurrent.TimeUnit%29)：

> 如有必要，最多等待给定时间以完成计算，然后检索其结果。

意味着如果您使用此方法从 AsyncTask 将结果返回到您的 UI 主线程，那么它将停止您的主 UI 执行，直到结果未从 AsyncTask 的 doInBackground 方法返回

解决方案`onPostExecute`用于在 AsyncTask 执行完成时更新 UI 元素

# php - 将图像上传存储在文件夹中 = 到会话 ID？

> ID：13908486
> 
> 赞同：-1
> 
> 时间：2012-12-17T04:58:07.980
> 
> 标签：php, image, session, upload

我有一个将照片上传到目录“文件/”的脚本。我想让它在“文件”目录中有另一个文件夹，标记为登录用户的会话ID。所以如果用户“1”上传照片，它将转到“文件/1/默认”。 jpg' 和如果用户 '2' 'file/2/default.jpg'。

谁能告诉我我该怎么做。谢谢。

html:

```
<input type="file" class="droparea spot" name="xfile" data-post="upload.php" data-width="180" data-height="250" data-crop="true"/>

                <form id="sampleform" action="post.php" method="post">

                </form>
                <script>
                    $('#sampleform').submit(function(e){
                        e.preventDefault();
                        $.ajax({
                            url:$(this).attr('action'),
                            type:'post',
                            data:$(this).serialize(),
                            dataType:'json',
                            success:function(r){
                                $('#form-result').append(
                                '<div><b>Title: </b>'+r.title+'</div>'
                                ,'<div><b>Description: </b>'+r.description+'</div>'
                                ,'<div><b>Image/File: </b>'
                                  +'<a href="'+ r.url +'" target="_blank">'+ r.url +'</a>'
                                  +'</div>'
                                );
                            }
                        });
                });
                </script>
            </div>

            <script>
            // Calling jQuery "droparea" plugin
            $('.droparea').droparea({
                'init' : function(result){
                    //console.log('custom init',result);
                },
                'start' : function(area){
                    area.find('.error').remove(); 
                },
                'error' : function(result, input, area){
                    $('<div class="error">').html(result.error).prependTo(area); 
                    return 0;
                    //console.log('custom error',result.error);
                },
                'complete' : function(result, file, input, area){
                    if((/image/i).test(file.type)){
                        area.find('img').remove();
                        //area.data('value',result.filename);
                        area.append($('<img>',{'src': result.path + result.filename + '?' + Math.random()}));
                    } 
                    //console.log('custom complete',result);
                }
            });
            </script> 
```

上传.php：

```
<?php

// LOG
$log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
        . 'FILES:' . print_r($_FILES, 1) . "\n"
        . 'POST:' . print_r($_POST, 1) . "\n";
$fp = fopen('upload-log.txt', 'a');
fwrite($fp, $log);
fclose($fp);

// Result object
$r = new stdClass();
// Result content type
header('content-type: application/json');

// Maximum file size
$maxsize = 10; //Mb
// File size control
if ($_FILES['xfile']['size'] > ($maxsize * 1048576)) {
    $r->error = "Max file size: $maxsize Kb";
}

// Uploading folder
$folder = 'files/';
if (!is_dir($folder))
    mkdir($folder);
// If specifics folder 
$folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
if (!is_dir($folder))
    mkdir($folder);

// If the file is an image
if (preg_match('/image/i', $_FILES['xfile']['type'])) {

    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . '_default.jpg';
} else {

    $tld = split(',', $_FILES['xfile']['name']);
    $tld = $tld[count($tld) - 1];
    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . '_default.jpg';
}

// Supporting image file types
$types = Array('image/png', 'image/gif', 'image/jpeg');
// File type control
if (in_array($_FILES['xfile']['type'], $types)) {
    // Create an unique file name    
    // Uploaded file source
    $source = file_get_contents($_FILES["xfile"]["tmp_name"]);
    // Image resize
    imageresize($source, $filename, $_POST['width'], $_POST['height'], $_POST['crop'], $_POST['quality']);
} else
// If the file is not an image
if (in_array($_FILES['xfile']['type'], $types)) 
    move_uploaded_file($_FILES["xfile"]["tmp_name"], $filename);

// File path
$path = str_replace('upload.php', '', $_SERVER['SCRIPT_NAME']);

// Result data
$r->filename = $filename;
$r->path = $path;
$r->img = '<img src="' . $path . $filename . '" alt="image" />';

// Return to JSON
echo json_encode($r);

// Image resize function with php + gd2 lib
function imageresize($source, $destination, $width = 0, $height = 0, $crop = false, $quality = 80) {
    $quality = $quality ? $quality : 80;
    $image = imagecreatefromstring($source);
    if ($image) {
        // Get dimensions
        $w = imagesx($image);
        $h = imagesy($image);
        if (($width && $w > $width) || ($height && $h > $height)) {
            $ratio = $w / $h;
            if (($ratio >= 1 || $height == 0) && $width && !$crop) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } elseif ($crop && $ratio <= ($width / $height)) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } else {
                $new_width = $height * $ratio;
                $new_height = $height;
            }
        } else {
            $new_width = $w;
            $new_height = $h;
        }
        $x_mid = $new_width * .5;  //horizontal middle
        $y_mid = $new_height * .5; //vertical middle
        // Resample
        error_log('height: ' . $new_height . ' - width: ' . $new_width);
        $new = imagecreatetruecolor(round($new_width), round($new_height));
        imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $w, $h);
        // Crop
        if ($crop) {
            $crop = imagecreatetruecolor($width ? $width : $new_width, $height ? $height : $new_height);
            imagecopyresampled($crop, $new, 0, 0, ($x_mid - ($width * .5)), 0, $width, $height, $width, $height);
            //($y_mid - ($height * .5))
        }
        // Output
        // Enable interlancing [for progressive JPEG]
        imageinterlace($crop ? $crop : $new, true);

        $dext = strtolower(pathinfo($destination, PATHINFO_EXTENSION));
        if ($dext == '') {
            $dext = $ext;
            $destination .= '.' . $ext;
        }
        switch ($dext) {
            case 'jpeg':
            case 'jpg':
                imagejpeg($crop ? $crop : $new, $destination, $quality);
                break;
            case 'png':
                $pngQuality = ($quality - 100) / 11.111111;
                $pngQuality = round(abs($pngQuality));
                imagepng($crop ? $crop : $new, $destination, $pngQuality);
                break;
            case 'gif':
                imagegif($crop ? $crop : $new, $destination);
                break;
        }
        @imagedestroy($image);
        @imagedestroy($new);
        @imagedestroy($crop);
    }
}

?> 
```

post.php：

```
<?php

// LOG
$log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
        . 'FILES:' . print_r($_FILES, 1) . "\n"
        . 'POST:' . print_r($_POST, 1) . "\n";
$fp = fopen('post-log.txt', 'a');
fwrite($fp, $log);
fclose($fp);

// Result object
$r = new stdClass();
// Result content type
header('content-type: application/json');

$data = $_POST['thumbnail'];
unset($_POST['thumbnail']);

if($data){

    // Uploading folder
    $folder = 'files/';
    if (!is_dir($folder))
        mkdir($folder);
    // If specifics folder 
    $folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
    if (!is_dir($folder))
        mkdir($folder);

    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_POST['name']) . '.jpg';

    $data = split(',', $data);
    file_put_contents($filename, base64_decode($data[1]));

}
die(json_encode(array_merge(array('url' => $filename), $_POST)));

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:03:49.787

 ~~~~```
// Uploading folder
$folder = 'files/';
if (!is_dir($folder))
    mkdir($folder);

// If specifics folder 
$folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
if (!is_dir($folder))
    mkdir($folder);

// PASS USER_ID HERE
$folder2 = $_SESSION['user_id'] . '/';
if (!is_dir($folder2))
    mkdir($folder2);

// New directory with 'files/USER_SESSION_ID/'
$newDir = $folder . $folder2; 
```~~ 

文件名应该是：

```
$filename = $_POST['value'] ? $_POST['value'] :
        $newDir . '_default.jpg'; 
```

 ~~```
// Uploading folder
$folder = 'files/'.$_SESSION['user_id'];
if (!is_dir($folder))
    mkdir($folder);

// If the file is an image
if (preg_match('/image/i', $_FILES['xfile']['type'])) {
    // $_FILES['xfile']['name'] .'_default.jpg' /* prevent the conflict with the same name */
    $filename = $folder . '/'. $_FILES['xfile']['name'] .'_default.jpg';
} else {

    $tld = split(',', $_FILES['xfile']['name']);
    $tld = $tld[count($tld) - 1];
    $filename = $folder . '/'. $_FILES['xfile']['name'] .'_default.jpg';
} 
```

**编辑：**我没有`session_start()`在`upload.php`您的会话中找到用户的 session_id 变量，然后`session_start()`在文件顶部使用。~~~~

# java - 带有 REST、Java Spring 的 Hessian Web 服务

> ID：13908489
> 
> 赞同：1
> 
> 时间：2012-12-17T04:58:19.847
> 
> 标签：java, spring, rest, hessian

REST 服务是否可以与 Hessian 服务协同工作？

详细说明我有这个界面：

```
@Controller
public interface PhotoServices {

    @RequestMapping(value = "/{user}/{folder_name}/savephoto/", method = RequestMethod.POST)
    public @ResponseBody Object savePhoto(HttpServletRequest request, @PathVariable("user")String user, @PathVariable("folder_name")String folder_name, @ModelAttribute("photo") Photo photo, BindingResult result, SessionStatus session);

    @RequestMapping(value = "/user/getuserphotos/", method = RequestMethod.GET)
    public @ResponseBody Object getUserPhotos(HttpServletRequest request);

    @RequestMapping(value = "/{user}/{folder_name}/photo/{filename}", method = RequestMethod.GET, produces="image/jpg")
    public @ResponseBody byte[] getPhoto(@PathVariable("user")String user, @PathVariable("folder_name")String folder_name, @PathVariable("filename") String filename);

} 
```

我创建这个接口的想法是它是一个纯粹的 RESTful 服务，但需求的变化也需要我实现一个 Hessian 服务。

将这个接口用于 Hessian 时，Spring 会抛出如下错误：

```
12:24:52,765 ERROR http-bio-8080-exec-1 servlet.DispatcherServlet:457 - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Initialization of bean failed; nested exception is java.lang.IllegalStateException: Ambiguous mapping found. Cannot map 'photoService' bean method 
public java.lang.Object mppiwebservices.photoservices.impl.photo.PhotoServicesImpl.savePhoto(javax.servlet.http.HttpServletRequest,java.lang.String,java.lang.String,mppiwebservices.photoservices.pojo.Photo,org.springframework.validation.BindingResult,org.springframework.web.bind.support.SessionStatus)
to {[/{user}/{folder_name}/savephoto/],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}: There is already 'photoServicesImpl' bean method
public java.lang.Object mppiwebservices.photoservices.impl.photo.PhotoServicesImpl.savePhoto(javax.servlet.http.HttpServletRequest,java.lang.String,java.lang.String,mppiwebservices.photoservices.pojo.Photo,org.springframework.validation.BindingResult,org.springframework.web.bind.support.SessionStatus) mapped.
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:836)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

这清楚地告诉我，要么我错误地集成了 REST 和 Hessian，要么这两者不能同时存在于同一个服务中......

所以 Hessian 不能与 REST 一起工作，还是我错过了一些配置来让魔法发生？

（如果人们要求，将提供额外的片段。我不太确定你需要什么，我不想发表 tl;dr 帖子。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:11:37.800

我建议您将业务逻辑放在标有@Service 的类中的服务中，然后该类可以有一个前端，该控制器可以用于 http 的控制器或用于 hessian 或 RMI 或 SOAP 的其他适配器或向您抛出的任何东西。

```
// pure business logic method here no dependency on servlets or any network protocol just pojos in
// pojos out 
@Service
public interface PhotoServices {
   public void doSomething(....)

}

/**
* Restful interface knows about Sevlets request and response http status codes ... etc\
* does web stuff and delegates to the PhotoService
*/
@Controller
public class PhotoWebController {

 @Autowired
 private PhotoService photoSerivce;

  @RequestMapping .... 
  public void doSemething(....)
  {
        this.photoSerivce.doSomething(....)
  }
}

/**
* RPC end point understand how to handle error conditions with Hessian ... etc
* 
*/
 // put whatever annoations you need to put for hessian 
public class PhotoHessianController {

 @Autowired
 private PhotoService photoSerivce;

  // hessian annotations go here
  public void doSemething(....)
  {
        this.photoSerivce.doSomething(....)
  }
} 
```

我没有使用 Hessian，所以我无法提供有关如何使用 hessian 做事的详细信息。

# sql - 查询性能：在使用派生表之前聚合还是在加入大量表时聚合？

> ID：13908490
> 
> 赞同：0
> 
> 时间：2012-12-17T04:58:21.273
> 
> 标签：sql, tsql

我希望这个问题的答案不是“取决于”。

我必须写一份报告，这是对班级数据的总结。每个班级都包含汇总的学生数据，例如成绩、出勤率等。其中一些数据（例如成绩）是所有已评分作业的汇总数据。

查询有效，但我意识到我已经编写了一个无法维护的怪物，将大约 15 个表连接在一起。如果我使用派生表重写查询，我会帮助还是损害性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:42:34.017

实际上最终成为使用派生表的性能提升。我意识到我有一个相当糟糕的问题。给个小片段吧……

在 JOIN 之后聚合。成本 .937

```
DECLARE @0 INT = 141;

SELECT u.id, u.first_name, u.last_name, 
    CAST(CAST(COUNT(haid.mastered_date) AS DECIMAL) / CAST(COUNT(sa.id) AS DECIMAL) * 100 AS DECIMAL(4, 1)) AS mastery_perc
FROM reporting_saved_reports r
JOIN reporting_saved_reports_sections sr ON sr.report_id = r.id
JOIN ums_ae_instructor_section_order_user isou ON isou.instructor_section_id = sr.section_id
JOIN ums_users u ON u.id = isou.user_id
JOIN reporting_states sa ON sa.tutor_id = r.Tutor_Id
    AND sa.business_type IN ('B', r.business_type)
    AND sa.haid = 'Y'
LEFT JOIN reporting_wrapup_haid haid ON haid.tutor_id = r.Tutor_Id
    AND haid.section_id = isou.instructor_section_id
    AND haid.user_id = isou.user_id
    AND haid.state_id = sa.id
    AND haid.mastered_date BETWEEN r.from_date AND r.to_date
WHERE r.id = @0
GROUP BY u.id, u.first_name, u.last_name
ORDER BY u.last_name, u.first_name
; 
```

先与派生表聚合，然后加入。成本 0.546

```
DECLARE @0 INT = 141;

WITH wr AS (
    SELECT r.id AS report_id, r.Tutor_Id, r.from_date, r.to_date, r.business_type, sr.section_id, isou.user_id
    FROM reporting_saved_reports r
    JOIN reporting_saved_reports_sections sr ON sr.report_id = r.id
    JOIN ums_ae_instructor_section_order_user isou ON isou.instructor_section_id = sr.section_id
    WHERE r.id = @0
)
SELECT dual.user_id, dual.first_name, dual.last_name,
    CAST(CAST(haid.mastered_count AS DECIMAL) / CAST(dual.state_count AS DECIMAL) * 100 AS DECIMAL(4, 1)) AS mastery_perc
FROM (
    SELECT wr.user_id, u.first_name, u.last_name, COUNT(sa.id) AS state_count
    FROM ums_users u
    JOIN wr ON wr.user_id = u.id
    JOIN reporting_states sa ON sa.tutor_id = wr.Tutor_Id
        AND sa.business_type IN ('B', wr.business_type)
        AND sa.haid = 'Y'
    GROUP BY wr.user_id, u.first_name, u.last_name
) dual
LEFT JOIN (
    SELECT haid.user_id, COUNT(haid.mastered_date) AS mastered_count
    FROM reporting_wrapup_haid haid
    JOIN wr ON wr.Tutor_Id = haid.tutor_id
        AND wr.section_id = haid.section_id
        AND wr.user_id = haid.user_id
        AND haid.mastered_date <= wr.to_date
    GROUP BY haid.user_id
) haid ON haid.user_id = dual.user_id
ORDER BY dual.last_name, dual.first_name
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:03:30.173

就**性能**而言，您可以通过添加索引来获得改进。加入将非常快。

就**可维护性**（和可读性）而言，派生表可能会有所帮助。此外，您可以创建视图以分离逻辑。

此外，您可以考虑使用聚合数据创建表，然后运行一个简单的`select * from summary`

# php - AJAX 数据未发送到 PHP 文件

> ID：13908494
> 
> 赞同：1
> 
> 时间：2012-12-17T04:58:57.223
> 
> 标签：php, ajax, ajax-request

我的 AJAX 有问题。我的 javascript 文件无法将数据发送到 PHP 文件。我的 javascript 文件：

```
function updateTile(tile_no){

    var ajaxRequest;

    var color = document.getElementById("color_"+tile_no).value;
    //alert($color);
    var img_path = document.getElementById("url_"+tile_no).value;
    //alert(url);
    var title = document.getElementById("title_"+tile_no).value;

    try{

    ajaxRequest = new XMLHttpRequest();
    } catch (e){

        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){

                alert("Browser Error !");
                return false;
            }
        }
    }

    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){

            document.getElementById("box_tile"+tile_no).innerHTML = ajaxRequest.responseText;
        }
        else
        {
            document.getElementById("box_tile"+tile_no).innerHTML = '<img src=ajax-loader.gif /> <br /> ';
        }
    }

    var url = "update.php?color="+color+"&url="+img_path+"&img_path="+title;

    alert(url);

    ajaxRequest.open("GET", url, true);
    ajaxRequest.send(null); 
} 
```

`alert(url);`节目`update.php?color=#444444&url=http://somesite/image.jpg&img_path=Tile 1`。_ 我的`update.php`文件：

```
<?php

    $color_code = $_GET['color'];

    $img_url = $_GET['img_path'];

    $title = $_GET['title'];

    echo 'Color Code :'.$color_code;
    echo '<br />Image Path :'.$img_url;
    echo '<br />Title :'.$title;

/*
echo '<div style="background:'.$color_code.';width:100%;height:100%;vertical-align:bottom;color:#f8f8f8;font-family:Trebuchet MS;"><img src="'.$img_url.'" /><span>'.$title.'</span></div>';
*/  
?> 
```

但是 PHP 的响应显示空结果！

```
Color Code :
Image Path :
Title : 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:09:26.437

您应该对图像路径进行编码，因为它是一个 url，并且它包含一个颜色`#`（使用[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)）

您的查询字符串似乎都搞砸了，您通过了，`color`但期望 ，`url`并且`img_path``color``img_path``title`

还

```
var url = "update.php?color="+encodeURIComponent(color)+
          "&img_path="+encodeURIComponent(img_path)+"&title="+title; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:10:20.070

我很确定你的颜色变量中的哈希符号正在把它扔掉。

忘记 AJAX，直接用上面的 get 变量访问你的 update.php 并执行 print_r($_GET)，你会看到没有任何东西被传递到 $_GET 变量中。

摆脱哈希，你是金子

也就是说，发送不带哈希（#）的十六进制颜色代码

update.php?color=444444 而不是 update.php?color=#444444

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:11:20.630

试试 post 方法，因为你可能知道 url 对传递字符有一些限制，而 post 可以发送你想要的尽可能多的数据。

还有一件事尝试使用`$_REQUEST`而不是`$_GET`看到任何一个都行。

# node.js - 节点js调用函数

> ID：13908495
> 
> 赞同：4
> 
> 时间：2012-12-17T04:59:05.027
> 
> 标签：node.js

我正在使用节点 js/Express 编写一个大程序（大小）。

我有多个 app.post 功能和所有。因此，他们中的大多数需要对即将到来的请求进行验证并发送响应。

因此，我创建了一个名为 Validate(); 的函数；如果验证失败，我将发送回复告诉“请再次尝试验证失败的信息”。

所以，我创造了

```
function validate() { ...} 
```

在里面

```
app.post('/',function(req,res){
...

validate();
} 
```

req 中的所有必需参数我正在写入数据库，因此我可以访问任何地方，所以现在这不是问题。问题是：如何发送“res”对象。如果我尝试调用 res. 现在写验证。它会抱怨它没有定义。

那么如何解决这个问题。

2）我试图在数据库中编写 validate() 的响应。之后我尝试调用 res: 即：

```
app.post('/',function(req,res){
...

validate();

res ..
} 
```

由于节点是异步的，因此 res 不使用此功能验证响应。

有没有人遇到过这样的问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T05:43:15.027

您应该将它们作为参数传递：

```
function validate(req, res) {
    // ...
} 
```

```
app.post('/', function (req, res) {
    validate(req, res);

    // ...
}); 
```

您还可以将其定义为自定义中间件，`next`当请求被认为有效时调用第三个参数，并将其[`app.post`作为另一个`callback`](http://expressjs.com/api.html#app.VERB)传递给：

```
function validate(req, res, next) {
    var isValid = ...;

    if (isValid) {
        next();
    } else {
        res.send("please try again");
    }
} 
```

```
app.post('/', validate, function (req, res) {
    // validation has already passed by this point...
}); 
```

[Express 中的错误处理](http://expressjs.com/guide.html#error-handling)也可能对`next(err)`.

# c++ - MD5 计算

> ID：13908499
> 
> 赞同：0
> 
> 时间：2012-12-17T04:59:11.410
> 
> 标签：c++, optimization, md5, md5sum

在 md5 计算算法中有一个函数

```
// decodes input (unsigned char) into output (uint4). Assumes len is a multiple of 4.
void MD5::decode(uint4 output[], const uint1 input[], size_type len)
{
   for (unsigned int i = 0, j = 0; j < len; i++, j += 4)
     output[i] = ((uint4)input[j]) | (((uint4)input[j+1]) << 8) |
       (((uint4)input[j+2]) << 16) | (((uint4)input[j+3]) << 24);
} 
```

为什么不直接用 memcpy 复制？是因为不同机器上可能存在不同的字节顺序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:02:16.633

正确，这是一个字节排序的事情。它相当于小端系统上的直接副本，但最终会反转大端系统上的字节。

# c# - 访问异步任务 .导致同步线程安全吗？

> ID：13908501
> 
> 赞同：0
> 
> 时间：2012-12-17T04:59:22.923
> 
> 标签：c#, asynchronous, thread-safety, .net-4.5

如果我有一个 .NET 4.5 异步任务方法，例如：

```
 public async Task<String> GetData()

 (...)

 return await MyObject.GetSomethingAsynchronous(); 
```

**然后在同步**线程的其他地方（例如非异步方法），我称之为：

```
 String myString = MyObject.GetData().Result; 
```

这是安全的做法还是不好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:46:41.007

`Task.Result`一般不建议打电话。一个更好的解决方案是`await`将`Task`包含方法更改为`async`，允许异步代码通过代码库成长。

`Task.Result`与相比有两个问题`await`（除了它阻塞而不是异步等待的事实）：

1.  您很容易陷入死锁情况，`Task`需要特定线程（例如，UI 线程）来完成，但该线程在该线程上被阻塞`Task`。[我在我的博客上](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)更详细地解释了这一点。
2.  从该方法抛出的任何错误`async`都将被包装在一个 中`AggregateException`，这使得异常处理更加复杂。`await`将解开潜在的错误，让您使用更自然的`catch(MyExceptionType)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:18:12.813

基本上是的。

从您的问题中，我了解到您认为`Task`哪个`something executed in separate thread`不一定正确。Asyc 机制比它更通用，它允许在您等待的同时做一些事情 - 线程作为一个结束，Web 请求返回值，文件系统读取文件，以及任何其他您想要的。这只不过是花哨的语法糖，让您不必为这样的模式所困扰：

```
void DoSomethingTimeConsumingThatWillNotBlockThisThread(Action onFinishContinue); 
```

考虑这个简单的程序：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        GetPoint();
    }

    public async void GetPoint()
    {
        var point = await RetrivePointAsync();
        MessageBox.Show(point.ToString());
    }

    public Task<Point> RetrivePointAsync()
    {
        return Task.Factory.FromAsync<Point>(
             (callback, state) => new Handler(this, callback),
             x => ((Handler)x).Point, null);
    }
} 
```

只是为了证明我的观点，我附加到事件中，我正在**等待**用户点击，所以不涉及线程。

```
class Handler : IAsyncResult
{
    AsyncCallback _calback;
    public Point Point { get; set; }
    public object AsyncState { get { return null; } }
    public bool CompletedSynchronously { get { return false; } }
    public bool IsCompleted { get; set; }

    public WaitHandle AsyncWaitHandle { get { return null; } }

    public Handler(Control control, AsyncCallback calback)
    {
        _calback = calback;
        control.MouseDown += control_MouseDown;
    }

    void control_MouseDown(object sender, MouseEventArgs e)
    {
        Point = e.Location;
        IsCompleted = true;
        _calback(this);
    }
} 
```

# android - android按钮需要2次点击才能生效

> ID：13908502
> 
> 赞同：0
> 
> 时间：2012-12-17T04:59:29.023
> 
> 标签：android, button

我遇到了按钮的奇怪行为。按钮有两个动作。

*   第一个动作是在按钮内设置文本和

*   第二个更改整数值。

    当我单击一次时，仅更改整数值。文本仅在第二次单击后才会更改。请帮我解决它:)

按钮布局

```
<Button
android:id="@+id/delres"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentBottom="false"
android:layout_below="@id/soffice"
android:layout_toRightOf="@id/face"
android:onClick="delrestor_Click"
android:text="Button"
/> 
```

按钮代码

```
public void delrestor_Click(View v){
        db = new DatabaseHandler(this);  
        if(p.get_active()==1){
            p.set_active(0);
            p.set_ranking(0);
            dres.setText("Delete");
            db.updateCandidate(p);
        }
        else{
            p.set_active(1);
            p.set_ranking(0);
            dres.setText("Restore");
            db.updateCandidate(p);
        }
        db.close();
    } 
```

按钮初始化

```
dres = (Button) findViewById(R.id.delres);
if(p.get_active()==1){
            dres.setText("Delete");
        }
        else dres.setText("Restore"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T10:35:48.333

android:duplicateParentState 将焦点传递给按钮

# com - 检测客户端机器上特定软件的版本，动态加载互操作程序集并使用

> ID：13908504
> 
> 赞同：0
> 
> 时间：2012-12-17T04:59:50.147
> 
> 标签：com, .net-assembly

就我而言，我需要 2 个软件来检测客户端机器上的版本，加载必要的互操作程序集并使用它们：

*   微软办公软件 (Excel)
*   地图信息专业版

原因是，当我在开发应用程序时从我的计算机添加引用时，客户端计算机可能没有该版本，因此应用程序在客户端运行时失败（通过给出有关软件版本的错误）。例如，我使用 MS Office 2010，但用户在他/她的计算机上安装了 MS 2007；或者我使用 MapInfo 11.5 但用户可能拥有 MapInfo 8.5 等等...

谢谢是提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:36:29.180

访问注册表项：**HKEY_CURRENT_USER\Software\Office**

这里会有一个名为某个数字（例如 11.0、12.0 ..）的子文件夹。此数字对应于 Microsoft Office 包的版本。每个数字代表一个版本。名单 ：：

*   1.0 : 适用于 Windows 1.5 的 Microsoft Office
*   2.0 : 适用于 Windows 1.6 的 Microsoft Office
*   3.0 : 适用于 Windows 3.0 的 Microsoft Office
*   4.0：微软办公 4.0
*   5.0：适用于 Windows NT 的 Microsoft Office 4.2
*   6.0：微软办公软件 4.3
*   7.0：微软Office 95
*   8.0：微软Office 97
*   9.0：微软Office 2000
*   10.0：微软Office XP
*   11.0：微软办公软件 2003
*   12.0：微软办公软件 2007
*   13.0：微软办公软件 2010
*   14.0：微软办公软件 2013

所以通过这个数字可以检测到版本。这只是一种简单的方法。但可能有更简单更好的方法。

# c# - 如何使用 C# 在 MS Excel 单元格中添加数字验证

> ID：13908505
> 
> 赞同：9
> 
> 时间：2012-12-17T04:59:49.317
> 
> 标签：c#, .net, excel, validation

我的目标是限制用户只能在 MS Excel 单元格中输入 1 到 100 之间的值。

我正在以编程方式生成 Excel 文件，但是当我添加上述验证时，异常被抛出为`Exception from HRESULT: 0x800A03EC`

我写的代码如下：

```
int[] arr = {1,100};
ExcelApp.get_Range(col1, col2).Cells.Validation.Add(Microsoft.Office.Interop.Excel.XlDVType.xlValidateList, Microsoft.Office.Interop.Excel.XlDVAlertStyle.xlValidAlertInformation, Microsoft.Office.Interop.Excel.XlFormatConditionOperator.xlBetween, arr, Type.Missing); 
```

在上面的代码`ExcelApp`中是一个对象`Microsoft.Office.Interop.Excel.ApplicationClass`

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T00:46:25.823

在添加另一个之前，您需要删除单元格验证器。否则，您将看到验证异常被抛出为 HRESULT 的异常：0x800A03EC

```
ExcelApp.get_Range("A1").Cells.Validation.Delete();

ExcelApp.get_Range("A1").Cells.Validation.Add(Microsoft.Office.Interop.Excel.XlDVType.xlValidateList, Microsoft.Office.Interop.Excel.XlDVAlertStyle.xlValidAlertInformation, Microsoft.Office.Interop.Excel.XlFormatConditionOperator.xlBetween, delimitedString1To100, Type.Missing); 
```

如果不存在单元格验证器（即第一次），则删除不会导致问题，可以安全地保留。

# 编辑/解决方案：

代码中的问题是变量`arr`包含两个项目 1 和 100。我猜**XLFormatConditionOperator**参数`xlBetween`中`Validation.Add`的参数误导了我们。要使其适用于 Formula1 参数的参数XLDVType**需要**包含**所有**有效值 1、2、3...100：`xlValidateList`

 **```
var val = new Random();
var delimitedString1To100 = string.Join(",", (int[])Enumerable.Range(1, 100).ToArray());
for (int i = 1; i < 11; i++)
{
    using (var rnCells = xlApp.Range["A" + i.ToString()].WithComCleanup())
    {
        rnCells.Resource.Value2 = val.Next(100);
        rnCells.Resource.Cells.Validation.Delete();
        rnCells.Resource.Cells.Validation.Add(
            Microsoft.Office.Interop.Excel.XlDVType.xlValidateList,
            Microsoft.Office.Interop.Excel.XlDVAlertStyle.xlValidAlertInformation,
            Microsoft.Office.Interop.Excel.XlFormatConditionOperator.xlBetween, delimitedString1To100, Type.Missing);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T09:29:17.300

我认为您不能传入 .NET 整数数组。您需要传入逗号分隔的字符串，或对工作表范围的字符串引用。从[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.validation.add%28v=office.14%29.aspx)：

> **xlValidateList** -*公式*1是必需的；*公式 2*被忽略。*Formula1*必须包含以逗号分隔的值列表或对此列表的工作表引用。

例如：

```
ExcelApp.get_Range(col1, col2).Cells.Validation.Add(
    XlDVType.xlValidateList, 
    XlDVAlertStyle.xlValidAlertInformation, 
    XlFormatConditionOperator.xlBetween, 
    "1,100"
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T10:30:05.347

您可以使用宏来完成您想要的操作，该宏可以在单元格值更改时分配。对于 incopating 宏来动态创建 excel，请访问[http://www.eggheadcafe.com/articles/create_macro_at_runtime_in_dotnet.asp](http://www.eggheadcafe.com/articles/create_macro_at_runtime_in_dotnet.asp)。我以前有时也实现过，而且也更容易。**

# mysql - mysql连接表

> ID：13908512
> 
> 赞同：-6
> 
> 时间：2012-12-17T05:00:34.577
> 
> 标签：mysql, sql

在这里，我想从这三个表中提取日期。

表**用户** 有三列

```
uid, username , data(text) 
```

表**users_order**有三列

```
uid, orders_id , users_email 
```

表**order_products**有三列

```
orders_id, product_id, product_name 
```

我想`product_id`用作参考/搜索从这三个表中提取用户信息。

如果**product_id = 5**

查询将显示

`uid; username; users_email; orders_id; product_name; data (text)`

这种情况下正确的 sql 查询是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:05:30.987

您将不得不在最后使用两个 JOINS 和一个 where 条件。

*   首先在**users 和 users_order**表`uid`之间加入

***   **users_order 和 product_orders** 表`orders_id`之间的第二次连接

    ***   `WHERE product_id=5`以及查询结束时的 where 条件 。****

 ****为表使用别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:07:12.617

```
select a.uid,a.username,b.user_email, b.orders_is, c. product_name
from users a, users_orders b, order_products c
where a.uid = b.uid and b.order_id = c.order_id and product_id = 5 
```

这应该给你所需要的****

# objective-c - XCode - 如何设置路径变量

> ID：13908515
> 
> 赞同：2
> 
> 时间：2012-12-17T05:00:48.017
> 
> 标签：objective-c, ios, xcode

我正在开发一个 XCode 项目，头文件和库搜索路径定义如下： `"$(COMMON)/MyLibrary"` `"$(COMMON)/OtherLibrary"`

我在哪里可以在 XCode 中设置`COMMON`变量的值，以便它指向我机器上的正确文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:25:57.243

你能试试下面的步骤吗？

> 转到**目标**->**构建设置**->**添加构建设置**（右下角）->**添加用户定义的设置**-> 将其命名为 COMMON-> 并将其路径添加为值。现在检查。

# python - Python中嵌套for循环的替代方法

> ID：13908518
> 
> 赞同：5
> 
> 时间：2012-12-17T05:00:58.660
> 
> 标签：python, for-loop, nested-loops

我读过 Python 的关键信念之一是平面 > 嵌套。但是，如果我有多个变量计数，那么多个 for 循环的替代方法是什么？我的代码用于计算网格总和，如下所示：

```
def horizontal():
    for x in range(20):
        for y in range(17):
            temp = grid[x][y: y + 4]
            sum = 0
            for n in temp:
                sum += int(n)
            print sum # EDIT: the return instead of print was a mistype 
```

在我看来，这似乎嵌套得太重了。首先，Python 中的许多嵌套循环被认为是什么（我之前肯定见过 2 个嵌套循环）。其次，如果这嵌套太重，编写此代码的替代方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T05:02:48.443

```
from itertools import product

def horizontal():
    for x, y in product(range(20), range(17)):
        print 1 + sum(int(n) for n in grid[x][y: y + 4]) 
```

您应该使用该`sum`功能。当然，如果你用一个变量来遮蔽它，你就不能，所以我把它改成了`my_sum`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:10:28.643

```
grid = [range(20) for i in range(20)]
sum(sum( 1 + sum(grid[x][y: y + 4]) for y in range(17)) for x in range(20)) 
```

对于在第一行代码中创建的特定网格，上述输出 13260。它使用`sum()`了三遍。最里面的总和将 中的数字加上问题代码中显示`grid[x][y: y + 4]`的稍微奇怪的初始值。`sum = 1`中间的总和将这些值相加为 17 个可能的 y 值。外部总和将中间值与可能的 x 值相加。

如果网格的元素是字符串而不是数字，则替换
`sum(grid[x][y: y + 4])`
为
`sum(int(n) for n in grid[x][y: y + 4]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T09:08:07.327

您可以使用字典显着优化性能

这是另一个例子：

```
locations = {}
for i in range(len(airports)):
    locations[airports["abb"][i][1:-1]] = (airports["height"][i], airports["width"][i])

for i in range(len(uniqueData)):
    h, w = locations[uniqueData["dept_apt"][i]]
    uniqueData["dept_apt_height"][i] = h
    uniqueData["dept_apt_width"][i] = w 
```

# asp.net - 使用 MVC4 中 DB 中的值动态生成 GUI

> ID：13908519
> 
> 赞同：1
> 
> 时间：2012-12-17T05:01:02.893
> 
> 标签：asp.net, razor, asp.net-mvc-4

我在 DB 中有一个表，其中每一行在 UI 中指定一个控件（例如：文本框、标签、复选框、下拉列表等）。每次加载页面时，我都想点击 DB，获取这些数据并构建 GUI因此。目前我在asp中有这个功能。在asp中，我所做的是，我点击数据库，获取值并遍历它以检查它是否是复选框/文本框/下拉菜单，然后我在代码隐藏本身中创建这些控件，最后将其添加到我的aspx中的面板. 如何在 MVC4 中实现此功能？我对 MVC 完全陌生。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:44:44.540

仍然不确定问题到底是什么，但我认为这可能会有所帮助：为您自己的助手编程！我写了一些简单的东西：

```
 public static MvcHtmlString CreateDynamic(this HtmlHelper helper, string type, string name)
    {
        switch (type)
        {
            default:
            case "TextBox":
                return helper.TextBox(name);
            case "CheckBox":
                return helper.CheckBox(name);
        }
    } 
```

调用者：

@Html.CreateDynamic("TextBox", "MyTextBox")

或者

@Html.CreateDynamic(Model.Type, Model.Name)

# haskell - haskell 中的嵌套/子数据类型

> ID：13908520
> 
> 赞同：1
> 
> 时间：2012-12-17T05:01:12.733
> 
> 标签：haskell, abstract-data-type

因此，如果您可以执行以下操作（不一定使用这种格式，只是一般的想法），那就太好了：

```
data Sub = SubA | SubB
data Super = Sub | SuperB

isSub :: Super -> Bool
isSub Sub = True
isSub _ = False 
```

所以 isSub SubA 会报告 True （而不是错误。）此刻你可能会做类似的事情：

```
data Super = SubA | SubB | SuperB

isSub :: Super -> Bool
isSub SubA = True
isSub SubB = True
isSub _ = False 
```

它并不可怕或任何东西，但它不能很好地扩展（就像 Sub 到 SubZ 时这将非常笨重）并且它不允许您将 Sub 类型添加到它们自己的类型类中。为避免该问题，您可以包装 Sub：

```
data Sub = SubA | SubB
data Super = SuperA Sub | SuperB

isSub :: Super -> Bool
isSub (SuperA _) = True
isSub _ = False 
```

但是现在您必须确保将您的 Subs 包装起来以将它们用作 Super... 再次不可怕；只是并没有真正表达出我想要的语义（即 Super 可以是任何 Sub 或 SuperB）。第一个（合法）示例是“Super 可以是 SubA...”，第二个是“Super 可以是带有 Sub...的 SuperA”

EDTI：更改一些名称以避免与音乐内容混为一谈。

PS 从技术上讲，这开始于我在考虑如何在 Haskell 中表示 Scheme 的数字塔......但我真的对表示“Type1 可以是 Type2 加 x、y、...... )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:43:28.190

> 它并不可怕或任何东西，但它不能很好地扩展

如果你使用一些 Template Haskell 就好了。我会查看该`derive`工具的`makeIs`例程以获取指导。

> 但是现在你必须确保包装你的 Subs 以将它们用作 Super

不，如果您忘记了，类型系统会告诉您。例如，如果您有

```
data Super = Sub Sub | Super
data Sub = SubA | SubB 
```

然后将捕获您使用 a`Sub`但期望 a 的任何上下文。`Super`我猜你已经知道了，所以你的意思是别的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:45:47.257

你不能有类似的东西

```
data Sub = SubA | SubB
data Super = Sub | SuperB 
```

假设上面的语法是允许的，那么问题是给定值构造函数`SubA`你无法判断它的类型是`Sub`还是`Super`。这就是为什么您需要将类型包装在构造函数中的原因。

对于您的第二个示例，您正在执行的方式应该是默认的执行方式，但是您可以进行 hack 以使其更容易，尽管我不建议这样做，因为使用 show 会慢得多。您可以尝试其他类似的 hack。

```
import Data.List
data Super = SubA | SubB | SuperB deriving Show
isSub :: Super -> Bool
isSub m = isPrefixOf "Sub" (show m) 
```

如果你真的想要上面的东西，最好像你一样定义函数。使用 TH 可能会节省您的时间。

你的第三种情况是我真正建议做的。`SuperA`由于我上面所说的原因，您需要有一个包装器构造函数。这就是为什么你不能完全确定 type1 是 type2 加上 x,y,z 的原因。您可以拥有的最接近的方法是将元素包装在构造函数中或使用类型类。

```
data Sub = SubA | SubB
data Sup = SuperA | SuperB

class Super a where
  isSub :: a -> Bool
  isSub _ = True

instance Super Sup where
    isSub _ = False

instance Super Sub

data SupSup = SuperSuperA | SuperSuperB

class SuperSuper a where
    isSuper :: a -> Bool
    isSuper _ = True

instance SuperSuper SupSup where
    isSuper _ = False

instance SuperSuper Sup
instance SuperSuper Sub 
```

你可以认为这里`Super`（它是一个类型类而不是一个类型）包含`Sub`和一些额外的（`Sup`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:40:48.473

您可能想考虑使用镜头 (Control.Lens) 库及其 Data.Data 和 Data.Typleable 实例。Lens 试图在列表、元组和所有其他数据类型中解决这些类型的多层次问题。

```
>data Sub =  SubA | SubB deriving (Show, Data, Typeable, Eq)
>data Super =  SuperA Sub | SuperB deriving (Show, Data, Typeable, Eq)

-- A little bit of a hack, there is probably a better way of doing this
>isSub' :: Sub -> Bool
>isSub' x = typeOf x == typeOf SubA

>tmp1 = SuperA SubA
>tmp2 = SuperA SubB

>isSub x = anyOf biplate (isSub') x

>isSub tmp1
True
>issub tmp2
True 
```

isSub 实在是太笼统了，它会检查所提供数据类型的任何子项是否属于 Sub 类型。因此，如果您有一棵树，并且树中有一个 Sub，那么它就是 True。但是，应该可以将其仅限于您的用例。

Lens 库的优点是现在我可以在类型层次结构中添加另一层。

```
>data SuperSuper =  SuperSuperA Super | SuperSuperB | SuperSuperC Sub deriving (Show,Data,Typeable)

>tmp3 = SuperSuperA (SuperA SubA)
>tmp4 = SuperSuperC SubB

>isSub tmp3
True
>isSub tmp4
True 
```

# android - Android Parcelable 创建数组

> ID：13908525
> 
> 赞同：1
> 
> 时间：2012-12-17T05:01:59.913
> 
> 标签：android, parcelable

在后台我解析 JSON，然后在这个后台我将 Json 发送到 Parcelable 而在 Parcelable 中我`writestring`如何`JSONObject.optString`编写 ArrayList？

```
List<Row> result = new ArrayList<Row>(array.length());
                for (int i = 0; i < array.length(); i++) {
                    result.add(new Row(array.optJSONObject(i)));
                } 
```

Parcelable.java

```
public Row(JSONObject from) {
        thumb = from.optString(TAG_THUMBNAILS);
        bigImage = from.optString(TAG_BIG_IMAGE);
        author = from.optString(TAG_AUTHOR);
        description = from.optString(TAG_DESCRIPTION);
        date = from.optString(TAG_DATE);
    }

    public Row(Parcel parcel) {
        thumb = parcel.readString();
        bigImage = parcel.readString();
        author = parcel.readString();
        description = parcel.readString();
        date = parcel.readString();
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel parcel, int flags) {
        parcel.writeString(thumb);
        parcel.writeString(bigImage);
        parcel.writeString(author);
        parcel.writeString(description);
        parcel.writeString(date);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:28:15.173

它不完整，但我想你会明白的。会尽力帮助你。

```
public class Row implements Parceleable{

    private String thumb;
    private String bigImage;
   private String author;
    private String description;
    private String date;

// your setters and getters here
    public void setThumb(String thumb){
        this.thumb = thumb;
    }
    public String getThumb(){
        return thumb;
    }
// ....

    public Row(){
     } 

    public Row(Parcel parcel) {
        thumb = parcel.readString();
        bigImage = parcel.readString();
        author = parcel.readString();
        description = parcel.readString();
        date = parcel.readString();
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel parcel, int flags) {
        parcel.writeString(thumb);
        parcel.writeString(bigImage);
        parcel.writeString(author);
        parcel.writeString(description);
        parcel.writeString(date);
    }

     public static final Parcelable.Creator<Row> CREATOR = new Parcelable.Creator<MyParcelable>() {

    @Override
    public Row createFromParcel(Parcel in) {
        return new Row(in);
    }

    @Override
    public Row[] newArray(int size) {
        return new Row[size];
    }
  };
} 
```

从您的 json 填充：

```
List<Row> myRowArray = new ArrayList<Row>;

Row result;
           for (int i = 0; i < array.length(); i++) {
                result = new Row();
                result.setThumb( fromJson ); //Set thumb string you got from json
                result.setAuthor( fromJson ); //Set Author string you got from json
                 .....
                 myRowArray.add(result);
            } 
```

我们就是这样做的。这很容易。一开始它有点令人困惑，但如果你学会了这一点，你会发现它很容易而且非常方便。

# ajax - Ajax 问题 Wordpress

> ID：13908531
> 
> 赞同：1
> 
> 时间：2012-12-17T05:02:18.547
> 
> 标签：ajax, wordpress, permalinks

```
var fullpath = '<?php echo site_url(); ?>'
function AjaxRequest(section,divName)
    {

             var pageurl = fullPath+"/ajaxrequest.php?section="+section+"&divName="+divName;         
            //alert(pageurl);   

            var xmlhttp;
            if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
              }
            else
              {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                             document.getElementById(divName).innerHTML='';             
                    document.getElementById(divName).innerHTML=xmlhttp.responseText;
                }
              }
            xmlhttp.open("GET",pageurl,true);
            xmlhttp.send();             

    } 
```

我在 wordpress 中有一个类似的代码，它使用 ajax 调用页面。当页面进入像 ?page_id=37 这样的 ID 时它工作正常，但是当我激活像 /overview/ajaxpage 这样的永久链接时停止工作。我在 xmlhttp.readyState 上收到 404 pafe 错误。任何人都可以帮我解决它。我知道这是一个永久链接问题，可能这个 ajax 代码不足以转换永久链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:59:44.907

您好，我更改了一些代码，这可能对您有用。

```
function AjaxRequest(section,divName)
{

<?php global $wpdb; ?>

             var pageurl = "<?php echo get_option('sitgeurl'); ?>/ajaxrequest.php?section="+section+"&divName="+divName;         
            //alert(pageurl);   

            var xmlhttp;
            if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
              }
            else
              {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                         document.getElementById(divName).innerHTML='';             
                    document.getElementById(divName).innerHTML=xmlhttp.responseText;
                }
              }
            xmlhttp.open("GET",pageurl,true);
            xmlhttp.send();             

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:51:02.683

没有理由在 AJAX 请求中使用永久链接。如果只有永久链接，请尝试使用[url_to_postid()](http://codex.wordpress.org/Function_Reference/url_to_postid)找到他们的 id并使用它。（正如您已经知道的那样，帖子 ID 效果很好）

# android - 如何设置具有记录/重播功能的 http(s) 代理？

> ID：13908532
> 
> 赞同：0
> 
> 时间：2012-12-17T05:02:20.483
> 
> 标签：android, ssl, https, proxy

用例是：

我想做一些 android 应用程序性能测试，我想在应用程序从 web 获取时修复数据。

我想出的解决方案是设置一个本地http代理，它可以先记录所有http流量，然后重播，然后应用程序正在运行性能测试。

我找到了[http://mitmproxy.org/](http://mitmproxy.org/)，它具有我想要的功能。但似乎在默认设置下它不能用作 https 代理。我尝试将其用作代理并登录到 Facebook，但不起作用。

我不熟悉 https 协议以及 cert 的工作原理。任何人都可以提供一些帮助吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:59:13.397

HTTPS 代理与 HTTP 代理非常不同 - 代理服务器接收 CONNECT 命令并在客户端和 CONNECT 命令参数中指定的服务器之间建立不透明的通道。因此，您无法通过这种方式轻松捕获 HTTPS 流量。

一般来说，您可以使用 HTTP 代理进行 HTTPS 连接，在这种情况下，代理充当 HTTP 代理，并在客户端与自身之间以及服务器与自身之间建立 SSL 通道。代理向客户端提供自己的证书（通常是自签名的，因为这些代理主要用于开发和监控目的）并验证远程服务器的证书。

上述方案要求 (a) HTTP 代理可以执行此操作（“mitmproxy”表示可以执行此操作），(b) 客户端支持此类配置，以及 (c) 代理的证书可以在客户端上得到验证或信任。

我怀疑 Android 是否支持 (b) 和 (c)。

# ruby - 链轮/sinatra

> ID：13908540
> 
> 赞同：1
> 
> 时间：2012-12-17T05:03:28.600
> 
> 标签：ruby, encoding, sinatra, sprockets

我正在使用带有 sinatra 的链轮。

```
require 'sprockets'

set :assets, Sprockets::Environment.new

# Configure sprockets
settings.assets.append_path "assets/js"
settings.assets.append_path "assets/js/libs"
settings.assets.append_path "assets/css"

get "/js/:file.js" do
  content_type "application/javascript"
  settings.assets["#{params[:file]}.js"]
end

get "/js/libs/:file.js" do
  content_type "application/javascript"
  settings.assets["libs/#{params[:file]}.js"]
end

get "/css/:file.css" do
  content_type "text/css"
  settings.assets["#{params[:file]}.css"]
end 
```

我仅使用此 javascript 文件收到此错误。不知道我能做些什么，我的 app.rb 中有编码：utf-8。

```
174.31.173.110 - - [16/Dec/2012 17:08:53] "GET /js/libs/modernizr-2.0.6.js HTTP/1.0" 200 - 0.0017
E, [2012-12-16T17:08:53.568260 #12145] ERROR -- : app error: /var/www/myapp/releases/20121217010420/assets/js/libs/modernizr-2
.0.6.js has a invalid US-ASCII byte sequence (Sprockets::EncodingError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:17:18.987

对不起，我想通了，我补充说：

```
 Encoding.default_external = Encoding::UTF_8
  Encoding.default_internal = Encoding::UTF_8 
```

到 config.ru

# linux-kernel - linux中断图

> ID：13908543
> 
> 赞同：1
> 
> 时间：2012-12-17T05:03:31.017
> 
> 标签：linux-kernel, linux-device-driver, interrupt

我是 linux 新手，最近在看一些与中断相关的 linux 驱动程序代码。我从本教程[http://www.redhat.com/mirrors/LDP/LDP/tlk/dd/interrupts.html](http://www.redhat.com/mirrors/LDP/LDP/tlk/dd/interrupts.html)开始，但不确定我是否理解正确。

**以下是我认为我从Fig.7.1**得到的事实：

1.  PIC1 左侧的箭头线连接到**CPU 上的中断引脚**
2.  PIC1右侧的0~7是指**中断控制器引脚**
3.  每个中断控制器引脚都连接到 PCI 插槽上的硬件设备

问题：

1.  “CPU上的中断引脚”与“中断线”相同吗？即函数中的'irq'参数：

    int request_irq(unsigned int irq, (*handler)(), ...)

2.  如果是这样，那么中断处理函数“(*handler)()”将必须是一个“组合 ISR 函数”，它完全处理中断源 0~7，对吗？

3.  如果不是，那么“irq”是什么，是“中断控制器引脚”吗？

4.  物理上连接到中断控制器引脚 0~7 的设备如何产生中断？通过提高引脚上的电压，写入 PIC 寄存器？PIC中的中断状态寄存器如何知道当前中断是哪个引脚？

对不起，如果有些问题是幼稚的。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:44:06.700

1.  'interrupt pin on CPU'，与'interrupt line'相同，但与函数中的irq参数不完全相同。
2.  irq 是分配给每个中断引脚的编号。该信息可以从处理器硬件手册中定义的中断向量表中读取。

# batch-file - 使用批处理编程

> ID：13908545
> 
> 赞同：1
> 
> 时间：2012-12-17T05:03:42.920
> 
> 标签：batch-file, lua

我有 LUB 文件（LUA 编译文件），我希望它们被反编译。
我使用 luadec.exe 来反编译它们。

但是，我有很多 LUB，并且我对它们中的每一个进行反编译都需要很长时间，所以我想为我使用一个批处理程序来解决这个问题。它必须：

*   打开LUB和带有LUB的子文件夹所在的特定路径；
*   列出它找到的所有 LUB；
*   对于每个文件，运行特定的命令`luadec.exe %s -o %s.lua`：
*   （可选）删除 LUB

我不知道使用 C 程序或使用批处理文件是否更好。无论如何，我认为在这里寻求帮助是个好主意。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:58:24.667

```
for /r C:\folderwithlubs %%a in (*.lub) do luadec.exe %%a -o %%a.lua 
```

您甚至可以在 cmd 提示符下运行它，因为它只是一行，如果您确实记得删除其中一个`%`'s.

```
for /r C:\folderwithlubs %a in (*.lub) do luadec.exe %a -o %a.lua 
```

在您指定`%s`为参数的示例中，我假设这是它当前正在执行的文件的变量，如果它真的是一个文字命令，请告诉我，我会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:09:57.697

我认为使用用 Notepad/Notepad++ 编写的 BATCH 文件是一个非常简单的过程。关于使用 BATCH 文件，在 Google 上快速搜索“打开路径”、“列出目录中的文件”、“对文件运行命令”和“删除文件”应该可以轻松完成这项任务。

从我以前做很多 BATCH 编程的时候开始，我记得使用这个网站：[http ://ss64.com/nt/](http://ss64.com/nt/)

# android - Edittext 光标指针不在视野范围内

> ID：13908546
> 
> 赞同：4
> 
> 时间：2012-12-17T05:03:48.020
> 
> 标签：android

我使用了“maxlines”设置为 1 的 Edittext。当我输入一些大文本时，文本的某些部分不可见。所以我使用光标指针（单击edittext时出现的蓝色）滚动文本。但是当我尝试使用它时，它超出了视图而不是显示隐藏的文本。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:16:41.270

设置您的 Edittext 的以下属性，它将解决您的问题。

```
android:singleLine="true"
android:ellipsize="end" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:11:45.417

[http://developer.android.com/reference/android/widget/EditText.html](http://developer.android.com/reference/android/widget/EditText.html)声明如下

```
 android:maxLength   
        setFilters(InputFilter) 
        Set an input filter to constrain the text length to the specified number. 
```

您可以使用它来指定 EditText 输入的长度

或者您希望文本比视图更宽，那么您可以使用

```
 android:scrollHorizontally  
        setHorizontallyScrolling(boolean)   
        Whether the text is allowed to be wider than the view (and therefore can be scrolled horizontally). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:17:47.123

不知道你的意思，我的回答是基于我对你的问题的理解：

尝试在您的 XML 中使用以下代码行：

```
 android:paddingRight="08dp" 
    android:paddingLeft="08dp" 
```

# php - 如何从数据库中获取相似的文本？

> ID：13908551
> 
> 赞同：-2
> 
> 时间：2012-12-17T05:04:44.903
> 
> 标签：php, database

我有这样的代码=

```
<?php
  $sql=mysql_query("select first_name, middle_name, last_name, address, mothers_name from tabel");
  while($s=mysql_fetch_array($sql))
  {
      $firstname=$s['first_name'];
      $middlename=$s['middle_name'];
      $lastname=$s['last_name'];    
      $name_all= "$firstname"."&nbsp;$middlename"."&nbsp;$lastname";
      similar_text($name_all, $name_all, $percent); 
      echo "Presentasi = $percent %";
  } 
?> 
```

但结果每个名字都是 100%

```
example:
1 Adi Surya 100%
2 Budi Surya 100%
3 Surya Adi 100% 
```

我想要这样的结果=

```
1 Adi Surya 63%
1 Surya Adi 63%
2 Budi Surya 
```

请帮帮我我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:01:56.073

试试这个：

```
<?php
$sql=mysql_query("select first_name, middle_name, last_name, address, mothers_name from tabel");
 while($s=mysql_fetch_array($sql))
  {
      $firstname=$s['first_name'];
      $middlename=$s['middle_name'];
      $lastname=$s['last_name'];    
      $name_all[]= "$firstname"."&nbsp;$middlename"."&nbsp;$lastname";
  }
for($i=0;$i<=count($name_all)-1;$i++){
  for($j=$i+1;$j<=count($name_all)-1;$j++){
    $result[]=checkforsimilarity($name_all[$i],$name_all[$j]);
  }
}
echo "<pre>";
die(print_r($result));

function checkforsimilarity($a,$b){
    if($a!=$b){
        similar_text($a,$b,$percent);
        return "<br />percentage of similarity between $a and $b is $percent <br />";
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:11:25.527

您`$name_all`在此函数中与自身进行比较：

```
similar_text($name_all, $name_all, $percent); 
```

自然，比较是 100%，因为 $name_all 等于它自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T05:18:38.490

为什么不尝试在 MySQL 查询中执行此操作？

我还没有测试过，但我认为这会有所帮助：

```
SELECT 
    User.*,
    COUNT(*) AS Total,
    (COUNT(*) / (SELECT COUNT(*) FROM User WHERE first_name='Popular')) * 100 AS 'Percentage', 
FROM 
    User
WHERE last_name='Popular'
GROUP BY User.first_name; 
```

我相信这会起作用，但您可能需要根据需要对其进行编辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T06:02:57.293

```
Getting percentage using php code.Try this
 <?php
      $sql=mysql_query("select first_name, middle_name, last_name, address, mothers_name from tabel");
    $cnt=0;
     while($s=mysql_fetch_array($sql))
      {
          $firstname=$s['first_name'];
          $middlename=$s['middle_name'];
          $lastname=$s['last_name'];    
          $name_all= "$firstname"."&nbsp;$middlename"."&nbsp;$lastname";
          if(isset($arr[$name_all])){
            $arr[$name_all] = $arr[$name_all]+1;
          }else{
            $arr[$name_all] = 1;
          }
          $cnt++;
      }
      echo $cnt;
      foreach($arr as $key=>$val){
        echo $key."  percent=". ROUND(($val/$cnt)*100,2)."</br>";
      }
    ?> 
```

# sql - 柱的标准偏差与天数

> ID：13908556
> 
> 赞同：1
> 
> 时间：2012-12-17T05:05:20.207
> 
> 标签：sql, sql-server, sql-server-2012

我需要一个查询来查找按日计算的列的标准差。我的表有大约 30,000 行，时间戳为每 10 分钟一次。请在下面的示例数据中找到时间戳和 TF 列。我还需要得到其余列的偏差

```
Timestamp                  TF
2012-05-17 19:15:35.000    10
2012-05-17 19:25:35.000    10
2012-05-17 19:35:35.000    10
2012-05-17 19:45:35.000    10
2012-05-17 19:55:35.000    10
2012-05-17 20:05:35.000    10
2012-05-17 20:15:35.000    10
2012-05-17 20:26:46.000    10
2012-05-18 00:06:48.000    10
2012-05-18 00:16:48.000    10
2012-05-18 00:26:48.000    10
2012-05-18 00:36:48.000    10
2012-05-18 00:46:48.000    10
2012-05-18 00:56:48.000    10
2012-05-18 01:06:48.000    10
2012-05-18 01:16:48.000    10
2012-05-18 01:26:48.000    10
2012-05-18 01:36:49.000    10 
```

需要输出为

```
Timestamp        TF
2012-05-17     0
2012-05-18       0
---             --
---             --
---             --
---             -- 
```

请帮忙！！提前致谢！！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:31:08.753

编辑：我转置`DAY`并`DATE`：`DAY`返回月中的日期；`DATE`返回截断到当天的时间。答案已更新以包含该修复程序。

您将需要使用聚合函数，按天分组：

```
SELECT DATE(Timestamp), STDDEV(TV) FROM MyTable GROUP BY DATE(Timestamp); 
```

我假设有一个`DATE()`功能。

可能没有`STDDEV`功能。如果没有 ,`STDDEV(x)=SQRT(AVG((x-AVG(x))^2)`可能必须作为连接子查询来实现：

```
SELECT DATE(Timestamp), SQRT(AVG((a.TF-b.mean)*(a.TF-b.mean)) FROM MyTable a LEFT JOIN
    (SELECT DATE(Timestamp) day, AVG(TF) mean FROM MyTable GROUP BY DATE(Timestamp)) b
        ON DATE(a.Timestamp)=b.day 
    GROUP BY b.day; 
```

# sencha-touch-2 - 如何在 Sencha Touch 中做翻页效果？

> ID：13908563
> 
> 赞同：2
> 
> 时间：2012-12-17T05:06:39.527
> 
> 标签：sencha-touch-2, page-flipping

我想在煎茶触摸中做翻页效果。Web 中没有可用的 jquery 插件，这些插件的代码行数很多。有点难以理解。

我从 sencha 论坛 ( [http://www.sencha.com/forum/showthre...l=1#post723554](http://www.sencha.com/forum/showthre...l=1#post723554) ) 读到了另一个问题。除了 ios 设备，一些类似翻转的转换在移动设备中不起作用。

我也在android和htc中测试过。那些不工作。

所以你能告诉我如何在 sencha touch 中实现翻页效果，它适用于所有手机和 ipad 设备吗？

请参阅以下链接。我想要这种效果。

[http://www.turnjs.com/#samples/magazine3/4](http://www.turnjs.com/#samples/magazine3/4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:01:39.973

Sencha 没有一种机制来执行您的要求，但您可以在项目中包含 page.js 文件并根据需要在 sencha 容器中使用它...

# operating-system - L1 和 L2 缓存由操作系统管理？

> ID：13908566
> 
> 赞同：2
> 
> 时间：2012-12-17T05:06:45.870
> 
> 标签：operating-system

我知道 L1 和 L2 高速缓存位于处理器和主存储器之间。操作系统是否决定何时将数据从主存移动到 L2 再到 L1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T05:09:51.857

不，L1、L2 和 L3（如果处理器有）仅由处理器管理。处理器缓存的操作对操作系统是完全透明的。

# asp.net - 设置 AJAX Slider 绑定控件编号格式

> ID：13908567
> 
> 赞同：1
> 
> 时间：2012-12-17T05:06:51.390
> 
> 标签：asp.net, ajax

我有一个 AJAX Slider Extender，它有一个有界控件、工作正常的 asp 文本框，并且在拖动滑块时值会发生变化。现在我的问题是，有没有办法在滑动时操纵与滑块绑定的 texbox 的内容。例如，我的滑块设置为最小值 1 和最大值 100 现在我希望从 1 到 9 在有界文本框中显示为 01,02,03... 等等。下面是我的滑块控件的片段代码。

```
<tr>
                    <td class="label">
                        Call Start:
                    </td>
                    <td>
                        <asp:ImageButton ID="CallStart" ImageUrl="~/images/Icons/32/telephone.png" runat="server"
                            OnClientClick="show(); return false;" />
                        <asp:TextBox ID="tbxCallStart" runat="server" Enabled="false" BackColor="White" />
                        <div id="pnlCallStart" style="display: none;">
                            <table>
                                <tr>
                                    <td>
                                        <asp:TextBox ID="txtCallStartHours" runat="server" Width="20px" Enabled="false" BackColor="White"
                                            Style="text-align: center;"></asp:TextBox>
                                        :
                                        <asp:TextBox ID="txtCallStartMinutes" runat="server" Width="20px" Enabled="false"
                                            BackColor="White" Style="text-align: center;"></asp:TextBox>
                                        <asp:RadioButton ID="rdoAM" runat="server" GroupName="time" Text="AM" />
                                        <asp:RadioButton ID="rdoPM" runat="server" GroupName="time" Text="PM" />
                                        <asp:Button ID="btnDoneStart" runat="server" Text="Done" OnClientClick="getCallStartTime();"
                                            OnClick="btnDoneStart_Clicked" />
                                        <asp:HiddenField ID="hidCallStart" runat="server" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <table>
                                            <tr>
                                                <td>
                                                    Hours :
                                                </td>
                                                <td>
                                                    <asp:TextBox ID="tbxDummy" runat="server"></asp:TextBox>
                                                    <ajax:SliderExtender ID="sldeHours" runat="server" TargetControlID="tbxDummy" BoundControlID="txtCallStartHours"
                                                        Minimum="1" Maximum="12" Steps="12">
                                                    </ajax:SliderExtender>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Minutes :
                                                </td>
                                                <td>
                                                    <ajax:SliderExtender ID="sldeMinutes" runat="server" TargetControlID="tbxDummy" BoundControlID="txtCallStartMinutes"
                                                        Minimum="0" Maximum="59" Steps="60">
                                                    </ajax:SliderExtender>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <script type="text/javascript">
                            function show() {
                                document.getElementById('pnlCallStart').style.display = 'block';
                                document.getElementById('<%=txtCallStartHours.ClientID %>').value =
                                    document.getElementById('<%=txtCallStartHours.ClientID %>').value;
                                document.getElementById('<%=txtCallStartMinutes.ClientID %>').value =
                                    formatTime(document.getElementById('<%=txtCallStartMinutes.ClientID %>').value);
                                document.getElementById('<%=tbxCallStart.ClientID %>').style.display = 'none';
                            }
                            function formatTime(value) {
                                if (value < 9)
                                    return "0" + value;
                                else
                                    return value;
                            }
                            function getCallStartTime() {
                                document.getElementById('pnlCallStart').style.display = 'none';
                                document.getElementById('<%=hidCallStart.ClientID%>').value =
                                document.getElementById('<%=txtCallStartHours.ClientID%>').value;
                                document.getElementById('<%=tbxCallStart.ClientID %>').style.display = 'block';
                            }
                        </script>

                    </td>
                </tr> 
```

TIA

# java - 字符串。替换（）？

> ID：13908569
> 
> 赞同：-1
> 
> 时间：2012-12-17T05:07:18.280
> 
> 标签：java

我必须将字符串值中的 '/' 替换为 '\'。给定的字符串如下：

```
String url = "//machineName/TestFolder/SampleFile.html";
url = url.replace('/', '\\'); 
```

在这里，url 的输出是这样的：

```
\machineNameTestFolderSampleFile.html 
```

为什么它不能正确替换斜线？所需的输出应该是：

```
\\machingName\TestFolder\SampleFile.html 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:14:39.233

为我工作：

```
public static void main(String[] args) throws IOException {
    String url = "//machineName/TestFolder/SampleFile.html";
    url = url.replace('/', '\\');
    System.out.println(url);
} 
```

输出：

```
\\machineName\TestFolder\SampleFile.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:18:05.537

这是你的代码：

```
String url = "//machineName/TestFolder/SampleFile.html";
url = url.replace('/', '\\');
System.out.println(url); 
```

这是输出：`\\machineName\TestFolder\SampleFile.html`

这不是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:10:57.363

使用 replaceAll() 方法。url = url.replaceAll('/', '\');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T05:11:14.440

`url = url.replaceAll('/', '\\');`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T05:13:16.520

修改单引号为双引号

url = url.replace("/", "\");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T05:09:58.983

试试 replaceAll 函数。我认为替换只替换它正在搜索的字符串的一个实例。

# javascript - php到ajax textarea变量不显示

> ID：13908580
> 
> 赞同：1
> 
> 时间：2012-12-17T05:09:04.727
> 
> 标签：javascript, ajax

我一直在尝试将一个变量从 php 发送到 AJAX，它以前可以工作，但突然就不行了。在过去的几个小时里，我一直在试图理解为什么，阅读有关没有运气的传递变量的信息。

由于某种原因，我无法将 textarea 放入我的 ajax 并将其发布到应用程序的其余部分。它给了我一个空警报，但`var name = $("input[name='name']").val();`警报正确。

这是html

```
<script type="text/javascript" src="http://example.com/_data/js/addreply.js"></script>
    <input type="hidden" name="hiddenid" value="6" />
    <div id="writeCommTxt" >
        <textarea name="text" cols="90" rows="12" class="txtclassic" ></textarea>                            
        <div id="writeCommCapt">
            <div id="writeCommCaptSub"><input type="submit" name="postcomm" value="Submit" class="subclassic" /></div>
        </div>
    </div> 
```

这是一个单独文件中的 AJAX。

```
$(document).ready(function (){
$(".subclassic").click(function (){
    var id = $("input[name='hiddenid']").val();
    var name = $("input[name='name']").val();
    var text = $(".txtclassic").val(); //i also tried to add textarea['text'].val() with no success.
    var capt = $("input[name='captcha']").val();
    alert(text); //it alerts an empty window.
    if (name != "" && text != ""){
        $.ajax({
          type: 'POST',
          url: "/article/add_reply/" + id,
          data: {
              rename: name,
              retxt: text,
              recapt: capt
          },
          success: function (data){
           ...
          }
        });
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:17:37.880

**[演示](http://jsbin.com/irodig/1/)**

为什么不用身份证？在你的情况下，我猜是：

```
$('textarea[name="text"]').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:21:31.230

首先将 id 属性添加到 textarea，如下所示。

```
<textarea name="text1" id="text1" cols="90" rows="12" class="txtclassic" ></textarea> 
```

现在像这样访问值

```
var text = $('#text1').val();; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:21:51.557

为什么不直接使用 jQuery 的[serialize()](http://api.jquery.com/serialize/)函数呢？将所有输入控件放在`<form>`标签之间，给它一个 id，然后在该元素上调用序列化函数

```
<form id="myform">
        <input type="hidden" name="hiddenid" value="6" />
        <div id="writeCommTxt" >
            <textarea name="text" cols="90" rows="12" class="txtclassic" ></textarea>                            
        <div id="writeCommCapt">
            <div id="writeCommCaptSub"><input type="submit" name="postcomm" value="Submit" class="subclassic" /></div>
        </div>
</form> 
```

然后在你的脚本中有

```
var myFormData = jQuery("#myform").serialize();
        $.ajax({
          type: 'POST',
          url: "/article/add_reply/" + id,
          data: myFormData,
          success: function (data){
           ...
          }
        }); 
```

至于最初的问题，您可能还有其他元素具有“txtclassic”类，如果是这样，它将抓住它找到的第一个元素并尝试获取它的值（如果它不是输入控件，它将不返回任何内容）

# java - 在获得所需值后尝试使用 break 退出 for 循环 - 总是抛出异常

> ID：13908581
> 
> 赞同：0
> 
> 时间：2012-12-17T05:09:12.950
> 
> 标签：java, for-loop, arraylist

我有一个用于遍历数组列表的 for 循环，一旦找到我需要的对象，我想在该对象的 set 方法中设置先前获得的对象，将“未找到”的标志设置为 false 和然后跳出循环。之后，如果未找到标志仍然为真，我想抛出异常，否则就到方法的结尾。

我想我要么滥用了 break 或 for 循环。我不断地抛出异常。

注意，'items' 是 LibraryItems 的数组列表。

```
 for(LibraryItem l : items) {
        if(l.equals(item)) {
            l.setCheckedOut(patronToRetrieve);
            itemNotFound = false;
            break;
        } else {
            itemNotFound = true;
        }
    }
        if (itemNotFound = true) {
            throw new CheckInOutException("The item " + item.getTitle() + " does not exist in the catalogue. Sorry, " + patronToRetrieve.getName() + ", you will not be able to check this out at this time.");
        } else {

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T05:10:40.367

我可以看到的一个问题是：

```
if (itemNotFound = true) {
            throw new CheckInOutException("The item " + item.getTitle() + " does not exist in the catalogue. Sorry, " + patronToRetrieve.getName() + ", you will not be able to check this out at this time.");
        } 
```

上面的语句总是导致，因为你在if 子句`true`中赋值。`true``itemNotFound`

应该：

```
if (itemNotFound) {
            throw new CheckInOutException("The item " + item.getTitle() + " does not exist in the catalogue. Sorry, " + patronToRetrieve.getName() + ", you will not be able to check this out at this time.");
        } 
```

（或者）

```
 if (itemNotFound == true) {
                throw new CheckInOutException("The item " + item.getTitle() + " does not exist in the catalogue. Sorry, " + patronToRetrieve.getName() + ", you will not be able to check this out at this time.");
            } 
```

`==`是平等检查，`=`是赋值。

# java - 如何在 java Enum 类中存储 Flex 文本框值？

> ID：13908583
> 
> 赞同：1
> 
> 时间：2012-12-17T05:09:25.657
> 
> 标签：java, spring, apache-flex, flex4

我正在使用 Flex+java(Spring+hibernate)...

Java端...

```
public enum WeekdayType {
MONDAY(Calendar.MONDAY), TUESDAY(Calendar.TUESDAY), WEDNESDAY(
        Calendar.WEDNESDAY), THURSDAY(Calendar.THURSDAY), FRIDAY(
        Calendar.FRIDAY), SATURDAY(Calendar.SATURDAY), SUNDAY(
        Calendar.SUNDAY);

private int day;

private WeekdayType(int day) {
    this.day = day;
} 
```

}

我正在使用的休眠 Bean 类..`TimetableVO.java`

```
@Column(name="REPEAT_DAYS")
private String repeatDays;

@Transient
public List<WeekdayType> getRepeatDaysEnumList(){
    List<WeekdayType> list = new ArrayList<WeekdayType>();
    for(String str : this.repeatDays.split(",")){
        list.add(WeekdayType.valueOf(str));
    }
    return list;
}

@Transient
public void setRepeatDaysEnumList(List<WeekdayType> repeatDays){
    StringBuilder sb = new StringBuilder();
    for(WeekdayType weekdayType : repeatDays){
        sb.append(weekdayType.name());
        sb.append(",");
    }
    this.repeatDays = sb.substring(0, sb.length()-1);
} 
```

在 Flex 方面...

```
 private var timetableVO:TimetableVO = new TimetableVO();

    timetableVO.repeatDays = selectedDays.substr(0, selectedDays.length-1);
     private var selectedDays:String = null;
            protected function selectRepeatedDays(event:MouseEvent):void
            {
                selectedDays = new String();
                if(MON.selected==true)
                {
                    selectedDays += "MONDAY,";
                }
                if(TUE.selected==true)
                {
                    selectedDays +=  "TUESDAY,";
                }
} 
```

只是我在 repeateDays 中添加值但它给`NullPointer Exception`

```
 Exception:Property 'repeatDaysEnumList' threw exception; nested exception is java.lang.NullPointerException.......
Caused by: java.lang.NullPointerException
    at com.sits.ec.valueObjects.TimetableVO.setRepeatDaysEnumList(TimetableVO.java:64) 
```

我没有创建repeatDaysEnumList，但是由于Setter和Getter，Hibernate会这样做，那么这个Null值是如何来的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:28:15.993

好吧，我猜这个问题正在发生，因为您正在将字符串发送回服务器，而这根本不知道如何将其转换为枚举列表。首先，我不建议发送一个逗号分隔的字符串，而是一个元素的 ArrayCollection，但这仍然不能处理字符串仍然没有反序列化为 Enum（尽管反过来也可以）。我写了一篇关于如何向 BlazeDS 添加 Enum-Like 支持的教程。即使它确实处理自动代码生成和 Flexmojos，我想它也应该包含解决问题所需的信息部分：[https ://dev.c-ware.de/confluence/display/PUBLIC/Flexmojos+生成+AS3+model+with+Enum+support+using+BlazeDS](https://dev.c-ware.de/confluence/display/PUBLIC/Flexmojos+generated+AS3+model+with+Enum+support+using+BlazeDS)

# jakarta-ee - 如何将文件存储在struts 2应用程序文件夹中？

> ID：13908591
> 
> 赞同：0
> 
> 时间：2012-12-17T05:10:35.200
> 
> 标签：jakarta-ee, file-upload, struts2

我正在使用此链接 [文件上传](http://viralpatel.net/blogs/struts-2-file-upload-save-tutorial-with-example/)进行文件上传。但它给了我文件的**临时**位置。但我想存储在**我的应用程序文件夹中。**请分享您对此的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:59:19.537

使用 struts 文件上传标签

```
<s:file name="fileUpload" id="fileUpload" /> 
```

在动作类

```
 File fileUpload;
    String fileUploadContentType;
    String fileUploadFileName;
    HttpServletRequest servletRequest; 
```

编写此方法在 webcontent 中创建一个 /Upload/Document 文件夹

```
private String saveDocumentDoc()
    {
        String filePath = servletRequest.getSession().getServletContext().getRealPath("/Upload/Document/");

    System.out.println("Server Path "+filePath);

    Date d = new Date();
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("Document");
    String s=stringBuilder.toString();
    File fileToCreate = new File(filePath, s);  

    try {
        FileUtils.copyFile(this.fileUpload, fileToCreate);
    } catch (IOException e) {
        e.printStackTrace();
    }

    return s;
} 
```

希望它有助于享受

# python - NLTK：设置代理服务器

> ID：13908615
> 
> 赞同：18
> 
> 时间：2012-12-17T05:12:25.643
> 
> 标签：python, nltk, proxy-server

我正在尝试学习[NLTK](http://nltk.org/index.html) - 用 Python 编写的自然语言工具包，我想安装一个示例数据集来运行一些示例。

我的网络连接使用代理服务器，我尝试指定代理地址，如下所示：

```
>>> nltk.set_proxy('http://proxy.example.com:3128' ('USERNAME', 'PASSWORD'))
>>> nltk.download() 
```

但我收到一个错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object is not callable 
```

`ProxyBasicAuthHandler`我决定在调用之前设置一个`nltk.download()`：

```
import urllib2

auth_handler = urllib2.ProxyBasicAuthHandler(urllib2.HTTPPasswordMgrWithDefaultRealm())
auth_handler.add_password(realm=None, uri='http://proxy.example.com:3128/', user='USERNAME', passwd='PASSWORD')
opener = urllib2.build_opener(auth_handler)
urllib2.install_opener(opener)

import nltk
nltk.download() 
```

但现在我明白了`HTTP Error 407 - Proxy Autentification Required`。

文档[说](http://nltk.org/data.html)，如果代理设置为，`None`则此功能将尝试检测系统代理。但它不起作用。

如何为 NLTK 安装示例数据集？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-24T17:16:43.393

第一次尝试获得这些代码行的网站出现错误（我看到了同样的错误）

错误的行是

```
nltk.set_proxy('http://proxy.example.com:3128' ('USERNAME', 'PASSWORD')) 
```

您需要一个逗号来分隔参数。正确的行应该是

```
nltk.set_proxy('http://proxy.example.com:3128', ('USERNAME', 'PASSWORD')) 
```

这将工作得很好。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-01-16T10:12:15.823

我在 Windows 10 环境下运行 NLTK 3.2.5 和 python 3.6。我使用这个脚本：

```
nltk.set_proxy('http://user:password@proxy.example.com:3128')
nltk.download() 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-09T23:08:26.573

我也遇到了同样的错误，但我得到了一个完美的解决方案。**您需要手动下载 nltk_data 并将其放入 linux 的 usr/lib/nltk_data 目录中，如果您使用 windows ，则将其放入 c:\nltk_data**。
以下是您需要遵循的步骤： 1.从这个 Github 链接[https://github.com/nltk/nltk_data/tree/gh-pages](https://github.com/nltk/nltk_data/tree/gh-pages)
下载 nltk_data zip 文件。 2.由于数据是 zip 格式，您需要将其解压缩。 3.**特别针对 ubuntu 用户**，使用以下命令方便地导航文件系统。**sudo nautilus**它使复制/粘贴过程变得方便。现在您可以轻松复制到 usr/share 或轻松创建文件夹。

 ****4.现在，如果您是 linux 用户，请在 usr/share 中创建一个名为 nltk_data 的文件夹，如果您使用 windows，请在 c:/ 中创建相同的文件夹。
5.现在将 nltk_data-gh-pages（您刚刚提取的）的所有内容粘贴到您刚刚创建的 nltk_data 文件夹中。
6\. 现在形成 nltk_data/packages 文件夹复制所有文件夹并将其粘贴到 nltk_data 文件夹。现在你完成了。

*由于这是我的第一个答案，我可能无法正确解释该过程。因此，如果您在执行这些步骤时遇到问题，请发表评论*。**** 

 ***** * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-17T16:37:05.327

上面建议的选项对我不起作用。这是在我的 Windows 环境中对我有用的方法。试着去掉圆括号。现在可以了！

```
nltk.set_proxy('http://proxy.example.com:3128', 'USERNAME', 'PASSWORD') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-27T05:16:47.217

我在 Windows 环境中运行 NLTK 3.0 和 python 3.4。如果我删除分支，代理身份验证运行良好。所以使用这个脚本

```
nltk.set_proxy('http://proxy.example.com:3128', 'username', 'password') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-01T14:02:11.577

如果你想手动安装 NLTK Corpus。

1) 访问[http://www.nltk.org/nltk_data/](http://www.nltk.org/nltk_data/)并下载您想要的 NLTK 语料库文件。

2) 现在在 Python shell 中检查`nltk.data.path`

3）选择您机器上存在的路径之一，并将数据文件解压缩到`corpora`里面的子目录中。

4) 现在您可以导入数据了`from nltk.corpos import stopwords`

参考：[https ://medium.com/@satorulogic/how-to-manually-download-a-nltk-corpus-f01569861da9](https://medium.com/@satorulogic/how-to-manually-download-a-nltk-corpus-f01569861da9)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-17T05:39:54.980

通过更改适当的环境变量也可以在 bash 中设置系统的代理。

我保留的一些代理设置是：

```
http_proxy=http://127.0.0.1:3129/
ftp_proxy=http://127.0.0.1:3129/
all_proxy=socks://127.0.0.1:3129/
https_proxy=http://127.0.0.1:3129/ 
```

您可以通过编辑 ~/.bashrc 文件来永久更改环境变量。示例编辑：

```
export http_proxy=http://127.0.0.1:3129/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-08T05:39:18.303

老实说，公认的解决方案对我不起作用。而且我也害怕泄露我的密码，因为我们需要明确指定它。

`nltk.download()`与其在 python 控制台中使用，不如`python -m nltk.downloader all`在 cmd 中运行（对于 Windows）对我来说非常有用！

ps：对于Windows用户，请记住在运行命令之前关闭您的代理服务器。转到**Internet Explorer** ->右上角的**齿轮图标->** **Internet 选项**->**连接**-> **LAN 设置**->***取消选中***“使用代理服务器 ... VPN 连接”。->**好的**

资源也来自官方文档：[https ://www.nltk.org/data.html#command-line-installation](https://www.nltk.org/data.html#command-line-installation)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-07-26T16:13:33.097

我可以让它工作：

```
nltk.set_proxy('http://user_name:password@proxy_ip_adress:3128') 
```****

# asp.net-mvc-3 - 为什么缓存一个需要 Https 的登录页面，允许它在没有 ssl 的情况下访问？

> ID：13908616
> 
> 赞同：1
> 
> 时间：2012-12-17T05:12:36.417
> 
> 标签：asp.net-mvc-3, caching, https, forms-authentication

我有一个只能通过 https 访问的网站。一切正常，几周前我开始向某些部分添加缓存，所以我的登录操作如下所示：

```
[RequireHttps]
public class AccountController : Controller
{
    [OutputCache(CacheProfile = "Long")]
    public ActionResult LogOn()
    {
        return View();
    }

    ...
 } 
```

我的 web.config 身份验证包含：

```
<forms loginUrl="~/Account/LogOn" timeout="2880" requireSSL="true" protection="All" /> 
```

一切似乎仍然正常，当您访问该站点时，它会将您带到 https 登录页面，即使您已将其输入为`http//sitename.com`. 最近我注意到 ELMAH 记录了一堆*请求的资源只能通过 SSL 访问。*对于登录页面，我不知道为什么。

事实证明，在某些情况下，如果您尝试访问需要授权的页面，它会将您转发到`http//sitename.com/Account/LogOn?ReturnUrl=%2f`非 https，但是如果您只是`?ReturnUrl=%2f`从 url 中删除该页面并按 Enter，它会将您带到安全的`https//sitename.com/Account/LogOn`.

长话短说，删除`[OutputCache(CacheProfile = "Long")]`修复问题。**所以我的问题是，为什么缓存该页面会导致页面在没有 ssl 的情况下可以访问？**

# python - 如何在python中制作x的三角形？

> ID：13908618
> 
> 赞同：-4
> 
> 时间：2012-12-17T05:12:42.250
> 
> 标签：python, function, geometry

我将如何编写一个产生这样的三角形的函数：

```
 x
   xx
  xxx
 xxxx
xxxxx 
```

假设函数是`def triangle(n)`，底行将有`n`x 的数量

我所知道的就是制作一个盒子：

```
n = 5
for k in range(n):
    for j in range(n):
        print('x', end='')
    print() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:56:59.367

老兄这超级简单：

```
def triangle(n):
    for i in range(1, n +1):
        print ' ' * (n - i) + 'x' * i 
```

甚至：

```
def triangle(n):
    for i in range(1, n +1):
        print ('x' * i).rjust(n, ' ') 
```

输出`triangle(5)`：

```
    X
   xx
  xxx
 xxxx
xxxxx

```

不要只是复制此代码而不理解它，尝试并了解它是如何工作的。通常，练习学习编程语言的好方法是尝试不同的问题并看看如何解决它。我推荐[这个网站](http://projecteuler.net/)，因为我刚开始编程时经常使用它。

而且，如果你不知道怎么做，不要只发布你的作业或类似的东西，只有当你被卡住时。首先尝试想很多你认为可以解决问题的方法，如果你不知道如何完成某项特定任务，只需查找并从中学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:24:50.010

这是您可以对程序进行的小改动

```
n = 5
for k in range(n):
    for j in range(n):
        print('x' if j+k >= n-1 else ' ', end='')
    print() 
```

不过，这不是一个很好的方法。你应该考虑使用这样的东西一次打印一个整体

```
n = 5
for k in range(n):
    i = ???
    j = ???
    print(' '*i+'x'*j) 
```

你只需要锻炼`i`和`j`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T09:20:56.897

```
hight = 5
for star in range(hight):
    for num in range(hight):
        print('*' if num+star >= hight-1 else ' ', end='')
    print() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-07T15:32:31.067

回答：

```
def triangle(i, t=0):
    if i == 0:
        return 0
    else:
        print ' ' * ( t + 1 ) + '*' * ( i * 2 - 1 )
        return triangle( i - 1, t + 1 )
triangle(5) 
```

输出：

```
* * * * * * * * *
   * * * * * * *
     * * * * *
       * * * 
         * 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-11T15:41:07.630

```
def triangle(n):
    x = ('')
    for i in range(n, 0, -1):
        x += '*'
        print(' ' * (i + 1) + x) 
```

# autoit - 使用 AutoIt 循环解析 CSV 文件的所有行

> ID：13908625
> 
> 赞同：-1
> 
> 时间：2012-12-17T05:14:32.253
> 
> 标签：autoit

我有以下代码来读取包含两行数据的 .csv 文件。我不知道它有什么问题。如何改进它以读取包含两行数据的 .csv 文件？

```
#include <GUIConstants.au3>
#include <string.au3>

$file = FileOpen("test.csv", 0)

If $file = -1 Then
    MsgBox(0, "error", "File doesn't exist or can't be read")
    Exit
EndIf

$string = (FileReadLine($file, 1))
$input = StringSplit($string, ",", 1)
$input = StringSplit($string, ",", 1)
Local $value1 = $input[1]
ConsoleWrite("var=" & $value1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T21:00:16.600

_ParseCSV() 的返回值是二维数组，如

```
$array[1][1] first line first data
$array[1][2] first line second data
$array[3][5] 3rd line 5th data

$array[0][0] gives number of lines
$array[0][1] gives number of data in each line 
```

不需要包含

参数：

1.  文件名
2.  分界线
3.  无法打开文件时显示消息
4.  逻辑真/假跳过文件的第一行

;_ParseCSV("文件名",",","发生错误时的消息",true)

```
Func _ParseCSV($f,$Dchar,$error,$skip)

  Local $array[500][500]
  Local $line = ""

  $i = 0
  $file = FileOpen($f,0)
  If $file = -1 Then
    MsgBox(0, "Error", $error)
    Return False
   EndIf

  ;skip 1st line
  If $skip Then $line = FileReadLine($file)

  While 1
       $i = $i + 1
       Local $line = FileReadLine($file)
       If @error = -1 Then ExitLoop
       $row_array = StringSplit($line,$Dchar)
        If $i == 1 Then $row_size = UBound($row_array) 
        If $row_size <> UBound($row_array) Then  MsgBox(0, "Error", "Row: " & $i & " has different size ")
        $row_size = UBound($row_array)
        $array = _arrayAdd_2d($array,$i,$row_array,$row_size)

   WEnd
  FileClose($file)
  $array[0][0] = $i-1 ;stores number of lines
   $array[0][1] = $row_size -1  ; stores number of data in a row (data corresponding to index 0 is the number of data in a row actually that's way the -1)
   Return $array

EndFunc
Func _arrayAdd_2d($array,$inwhich,$row_array,$row_size)
    For $i=1 To $row_size -1 Step 1
        $array[$inwhich][$i] = $row_array[$i]
  Next
  Return $array
   EndFunc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:18:03.380

这是一个程序，它将读取 2 行的 CSV 文件并输出两个数据字段。如果您有更多行，请将输入数组更改为更大。

```
#include <GUIConstants.au3>
#include <string.au3>

$file = FileOpen("test.csv", 0)

If $file = -1 Then
   MsgBox(0, "error", "File doesn't exist or can't be read")
   Exit
EndIf

   ; Read in lines of text until the EOF is reached
While 1
    Local $line = FileReadLine($file)
    If @error = -1 Then ExitLoop
   $input = StringSplit($line, ",")

   ;This is reading fields 1 and 2\. 
   ;The array index [0] 
   ;it will tell you how big the array is.
   Local $value1 = $input[1]
   Local $value2 = $input[2]
   ConsoleWrite("var=" & $value1)
   ConsoleWrite("var=" & $value2)

WEnd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-12T07:08:12.313

至于解析 CSV 文件，您可能最好使用库（用户定义的函数），特别是如果您有带有引号字符串（“单元格”/字符串内的逗号）或换行符的复杂 CSV，这很难处理。

我可以推荐的最好的是[CSVSplit](https://www.autoitscript.com/forum/topic/155748-csvsplit/)。基本上你有一个函数`_CSVSplit`，它接受一个完整的 CSV 文件（内容，即字符串！）并返回一个二维数组：

```
Local $sCSV = FileRead($sFilePath)
If @error Then ; ....

$aSplitArray = _CSVSplit($sCSV, ",") 
```

然后你可以用这个数组做你想做的一切。显然，*CSVSplit*还提供了“反向”功能，可以将数组再次转为 CSV 字符串，`_ArrayToCSV`.

# wordpress - 如何调整特色图像的大小会自动裁剪小且质量低

> ID：13908632
> 
> 赞同：-2
> 
> 时间：2012-12-17T05:15:07.567
> 
> 标签：wordpress

当我在 Wordpress 中上传特色图片时，它会减小图片的大小。图像质量也远低于原始图像。如何让 Wordpress 拥有更大、更高质量的特色图片？

`the_post_thumbnail`顺便说一句，function.php 文件中没有函数

我尝试下面的代码它没有帮助我

```
<?php the_post_thumbnail( array(300,207) ); ?> 
```

**[在www.studiograsshopper.ch](http://www.studiograsshopper.ch)找到答案：）**

最后我通过将此代码添加到主题function.php找到了解决方案

```
set_post_thumbnail_size( 300, 207, true ); //(cropped)
update_option('thumbnail_size_w', 300);
update_option('thumbnail_size_h', 207);
update_option('thumbnail_crop', 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:20:50.173

查找 WordPress 指南或教程并查看您的问题。

# jquery - Wiil Paginate with jquery in ruby on rails

> ID：13908633
> 
> 赞同：0
> 
> 时间：2012-12-17T05:15:16.327
> 
> 标签：jquery, ruby-on-rails, will-paginate

我正在开发一个应用程序，最初我使用 mislav-will_paginate 而不使用 jquery。该应用程序运行完美。现在我已经实现了 jquery 来调用所有的控制器。但是会分页不起作用。我想有一些与参数有关的问题。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:18:10.803

你可以看看[kaminari](https://github.com/amatsuda/kaminari) gem。现在，kaminari 主要用于 Rails 应用程序中的分页。[这](http://railscasts.com/episodes/254-pagination-with-kaminari)是一个很棒的教程，可以开始使用 kaminari 进行分页。

# java - 字符串长度问题

> ID：13908634
> 
> 赞同：0
> 
> 时间：2012-12-17T05:15:23.050
> 
> 标签：java, string

所以我试图让我的程序遍历我的字符串中的每个字符，如果它找到一个数字，然后打印密码并退出 for 循环和 while 循环（不包括 while 循环，但它是'while（测试 == 0)')。但是如果我输入一个没有数字的密码，它会扫描整个字符串并打印出我需要一个数字。出于某种原因，当我输入带有数字的密码时，它可以正常工作。但是当我输入没有数字的密码时，我收到一条错误消息......有什么想法吗？

这是我的代码：

```
for (int num = 0; num <= passw.length(); num++){
    if (Character.isDigit(passw.charAt(num))){
        num += 1000;
        test++;
        System.out.println(passw);
    }

    if (num >= passw.length() && num <= 1000){
        System.out.println("You need a number");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:16:28.547

```
for (int num = 0; num <= passw.length(); num++){ 
```

索引从`0`not开始`1`

所以循环应该是：

```
for (int num = 0; num < passw.length(); num++){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:16:34.647

```
for (int num = 0; num <= passw.length(); num++){ 
```

将转到字符串末尾的字符。做就是了

```
for (int num = 0; num < passw.length(); num++){ 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T05:18:47.097

你正在以错误的方式去做。用以下代码替换所有代码：

```
if (passw.matches("\\D*")) {
    System.out.println("You need a number");
} 
```

这使用 regex `\D*`，这意味着“每个字符都是非数字”

# google-app-engine - Google App Engine 中的多个 servlet

> ID：13908635
> 
> 赞同：1
> 
> 时间：2012-12-17T05:15:25.470
> 
> 标签：google-app-engine, jakarta-ee

我正在尝试将应用程序部署到本地开发谷歌应用程序引擎服务器。我似乎无法让多个 servlet 共存。这是我的 web.xml：

```
 <servlet>
    <servlet-name>Admin</servlet-name>
    <servlet-class>servlet.Admin</servlet-class>    
</servlet>
<servlet>
    <servlet-name>Main</servlet-name>
    <servlet-class>servlet.Main</servlet-class> 
</servlet>

<servlet-mapping>
    <servlet-name>Admin</servlet-name>
    <url-pattern>/admin/</url-pattern>
</servlet-mapping>  
<servlet-mapping>
    <servlet-name>Main</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我尝试过添加通配符、更改文件中 servlet 的顺序以及其他一些事情。无论如何，每当我访问 /admin（或 /admin/）时，它都会显示 Main servlet，就好像我只是访问 / 一样。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:03:05.757

删除 /admin 后的斜线

```
<url-pattern>/admin</url-pattern> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T01:54:37.587

尝试将你的`<servlet>`和`<servlet-mapping>`块组合在一起。哦，去掉斜线。

```
<servlet>
    <servlet-name>Admin</servlet-name>
    <servlet-class>servlet.Admin</servlet-class>    
</servlet>
<servlet-mapping>
    <servlet-name>Admin</servlet-name>
    <url-pattern>Admin</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>Main</servlet-name>
    <servlet-class>servlet.Main</servlet-class> 
</servlet> 
<servlet-mapping>
    <servlet-name>Main</servlet-name>
    <url-pattern>Main</url-pattern>
</servlet-mapping> 
```

# r - 使用 R 中的参考列创建 4 小时的时间间隔

> ID：13908637
> 
> 赞同：0
> 
> 时间：2012-12-17T05:15:45.380
> 
> 标签：r, datetime, intervals

我想使用数据框中的参考列创建一个 4 小时的间隔。我有一个像这样的数据框：

> ```
> species<-"ABC"
> ind<-rep(1:4,each=24)
> hour<-rep(seq(0,23,by=1),4)
> depth<-runif(length(ind),1,50)
> 
> df<-data.frame(cbind(species,ind,hour,depth))
> df$depth<-as.numeric(df$depth) 
> ```

我想要创建一个新列（不更改原始数据框的信息或维度），它可以查看我的小时列（参考列），并且基于该值会给我一个 4 小时的时间间隔。例如，如果小时列中的值介于 0 和 3 之间，则新列中的值将为 0；如果该值介于 4 和 7 之间，则新列中的值将为 4，依此类推...在 excel 中，我曾经为此使用地板/天花板函数，但在 R 中它们并不完全相同。此外，如果有人对此有更简单的建议，使用也可以使用的原始日期/时间数据。在我的原始脚本中，我使用函数 as.POSIXct 来获取日期/时间数据，并从那里获取我的小时列。

我感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:29:22.670

取小时列，将其转换为整数，然后使用整数除法来获得下限怎么样？像这样的东西

```
# convert hour to integer (hour is currently a col of factors)
i <- as.numeric(levels(df$hour))[df$hour]

# make new column
df$interval <- (i %/% 4) * 4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:59:04.243

扩展我的评论，因为我认为您最终会在某个时候寻找实际日期......

一些示例每小时数据：

```
set.seed(1)
mydata <- data.frame(species = "ABC",
                     ind = rep(1:4, each=24),
                     depth = runif(96, 1, 50),
                     datetime = seq(ISOdate(2000, 1, 1, 0, 0, 0), 
                                    by = "1 hour", length.out = 96))
list(head(mydata), tail(mydata))
# [[1]]
#   species ind    depth            datetime
# 1     ABC   1 14.00992 2000-01-01 00:00:00
# 2     ABC   1 19.23407 2000-01-01 01:00:00
# 3     ABC   1 29.06981 2000-01-01 02:00:00
# 4     ABC   1 45.50218 2000-01-01 03:00:00
# 5     ABC   1 10.88241 2000-01-01 04:00:00
# 6     ABC   1 45.02109 2000-01-01 05:00:00
# 
# [[2]]
#    species ind     depth            datetime
# 91     ABC   4 12.741841 2000-01-04 18:00:00
# 92     ABC   4  3.887784 2000-01-04 19:00:00
# 93     ABC   4 32.472125 2000-01-04 20:00:00
# 94     ABC   4 43.937191 2000-01-04 21:00:00
# 95     ABC   4 39.166819 2000-01-04 22:00:00
# 96     ABC   4 40.068132 2000-01-04 23:00:00 
```

`cut`使用and转换该数据`format`：

```
mydata <- within(mydata, {
    hourclass <- cut(datetime, "4 hours")             # Find the intervals
    hourfloor <- format(as.POSIXlt(hourclass), "%H")  # Display just the "hour"
})
list(head(mydata), tail(mydata))
# [[1]]
#   species ind    depth            datetime           hourclass hourfloor
# 1     ABC   1 14.00992 2000-01-01 00:00:00 2000-01-01 00:00:00        00
# 2     ABC   1 19.23407 2000-01-01 01:00:00 2000-01-01 00:00:00        00
# 3     ABC   1 29.06981 2000-01-01 02:00:00 2000-01-01 00:00:00        00
# 4     ABC   1 45.50218 2000-01-01 03:00:00 2000-01-01 00:00:00        00
# 5     ABC   1 10.88241 2000-01-01 04:00:00 2000-01-01 04:00:00        04
# 6     ABC   1 45.02109 2000-01-01 05:00:00 2000-01-01 04:00:00        04
# 
# [[2]]
#    species ind     depth            datetime           hourclass hourfloor
# 91     ABC   4 12.741841 2000-01-04 18:00:00 2000-01-04 16:00:00        16
# 92     ABC   4  3.887784 2000-01-04 19:00:00 2000-01-04 16:00:00        16
# 93     ABC   4 32.472125 2000-01-04 20:00:00 2000-01-04 20:00:00        20
# 94     ABC   4 43.937191 2000-01-04 21:00:00 2000-01-04 20:00:00        20
# 95     ABC   4 39.166819 2000-01-04 22:00:00 2000-01-04 20:00:00        20
# 96     ABC   4 40.068132 2000-01-04 23:00:00 2000-01-04 20:00:00        20 
```

请注意，您的新“hourclass”变量是一个因素，新的“hourfloor”变量是字符，但您可以轻松更改它们，即使在`within`阶段期间也是如此。

```
str(mydata)
# 'data.frame':    96 obs. of  6 variables:
#  $ species  : Factor w/ 1 level "ABC": 1 1 1 1 1 1 1 1 1 1 ...
#  $ ind      : int  1 1 1 1 1 1 1 1 1 1 ...
#  $ depth    : num  14 19.2 29.1 45.5 10.9 ...
#  $ datetime : POSIXct, format: "2000-01-01 00:00:00" "2000-01-01 01:00:00" ...
#  $ hourclass: Factor w/ 24 levels "2000-01-01 00:00:00",..: 1 1 1 1 2 2 2 2 3 3 ...
#  $ hourfloor: chr  "00" "00" "00" "00" ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T05:27:38.557

提示号 1，不要`cbind`用于创建具有不同类型列的 data.frame，所有内容都被强制为相同类型（在这种情况下为因素）

`findInterval`或者`cut`在这里似乎合适。

```
df <- data.frame(species,ind,hour,depth)
# copy
df2 <- df
df2$fourhour <- c(0,4,8,12,16,20)[findInterval(df$hour, c(0,4,8,12,16,20))] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T05:27:59.630

尽管可能有一种更简单的方法，但这是一种尝试。

使您的 data.frame 不`cbind`首先使用，所以`hour`不是`factor`但是`numeric`

```
df <- data.frame(species,ind,hour,depth) 
```

然后：

```
df$interval <- factor(findInterval(df$hour,seq(0,23,4)),labels=seq(0,23,4)) 
```

结果：

```
> head(df)
  species ind hour    depth interval
1     ABC   1    0 23.11215        0
2     ABC   1    1 10.63896        0
3     ABC   1    2 18.67615        0
4     ABC   1    3 28.01860        0
5     ABC   1    4 38.25594        4
6     ABC   1    5 30.51363        4 
```

您还可以使标签更好一些，例如：

```
cutseq <- seq(0,23,4)
df$interval <- factor(
                       findInterval(df$hour,cutseq),
                       labels=paste(cutseq,cutseq+3,sep="-")
                     ) 
```

结果：

```
> head(df)
  species ind hour    depth interval
1     ABC   1    0 23.11215      0-3
2     ABC   1    1 10.63896      0-3
3     ABC   1    2 18.67615      0-3
4     ABC   1    3 28.01860      0-3
5     ABC   1    4 38.25594      4-7
6     ABC   1    5 30.51363      4-7 
```

# css - Arial 支持汉字吗？

> ID：13908639
> 
> 赞同：7
> 
> 时间：2012-12-17T05:16:00.780
> 
> 标签：css, utf-8, fonts

说Arial不支持汉字对吗？

有几个使用font-family的中文网站：Arial。但这并不意味着汉字是Arial。英文字符将以 Arial 显示，而中文字符将忽略 Arial 并使用 PC 上的默认中文字符 Simsun。

我对吗？

对 Arial 进行快速字符映射检查也不会显示字体中的汉字。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T07:14:31.540

Arial没有任何汉字；请参阅[Arial 的 MS 描述](http://www.microsoft.com/typography/fonts/font.aspx?FMID=1705)，其中列出了支持的书写系统。当页面声明`font-family: Arial`并包含中文字符时，这些字符将取自浏览器的默认字体，通常是 Windows 系统上的 SimSun，或者（如果没有找到）系统中的另一种字体，使用与浏览器相关的扫描方法通过字体。

# webdriver - 后台执行

> ID：13908640
> 
> 赞同：0
> 
> 时间：2012-12-17T05:16:14.780
> 
> 标签：webdriver, selenium-webdriver

我不知道我是对还是错，但只想知道我可以在后台运行 selenium webdriver 脚本。我想对此进行更多解释，因为我有一个脚本将启动浏览器（IE 或 FF），在某些编辑字段中输入一些数据并单击一些按钮。有没有可能在后台。如果不能，请向我推荐任何工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:37:47.820

您可以尝试探索[htmlunitdriver](http://seleniumhq.org/docs/03_webdriver.html#htmlunit-driver)

# git - 克隆后不是 git 存储库

> ID：13908645
> 
> 赞同：0
> 
> 时间：2012-12-17T05:16:56.897
> 
> 标签：git

我已经克隆了一个 git 存储库

我可以看到分支使用

```
git branch -a 
```

但是当我使用`git status`命令时，它告诉我它不是一个 git 存储库

那么如何使它成为 git 存储库呢？

这些是我应用的命令

```
git clone branchname foldername
cd foldername
git checkout branchname
git branch -a 
```

然后显示所有分支列表

```
git status 
```

然后它显示的不是 git 存储库

Git 的日志详细信息是

```
commit f06d2102a19ee70c86c2f398f2d670b1b2ed51e2
Author: Abhijith Srivatsav <abhijith.srivatsav@gmail.com>
Date:   Wed Dec 12 16:02:36 2012 +0530

    updating libraries

commit 80b8258e1823f5b652808f680dab75859b200736
Author: Abhijith Srivatsav <abhijith.srivatsav@gmail.com>
Date:   Wed Dec 12 15:54:19 2012 +0530

    updating actionbarsherlock

commit 18919ea02c245e9b270aa2b70b68045d777ec16d
Author: Abhijith Srivatsav <abhijith.srivatsav@gmail.com>
Date:   Wed Dec 12 15:41:18 2012 +0530

    New Card Manager with project structure changes

commit 7d838b0e470c7634f7b5845b89ddb32420f198b7
Author: Abhijith Srivatsav <abhijith.srivatsav@gmail.com>
Date:   Wed Dec 12 15:15:14 2012 +0530

    New Card Manager and project structure cleanup 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:07:18.830

你`git clone branchname foldername`根本没有任何意义——你不能克隆分支。这个命令可能导致了一个相当奇怪的情况。您能否向我们展示这些命令的输出，请：

```
cd ../..
find -name .git 
```

# ios - Restkit 0.20.x 路由类更改

> ID：13908649
> 
> 赞同：1
> 
> 时间：2012-12-17T05:17:31.760
> 
> 标签：ios, restkit

好的，所以在升级到 0.20.xi 之前，我的课程是这样路由的

```
[[RKObjectManager sharedManager].router routeClass:[Player class] toResourcePath:@"/player" forMethod:RKRequestMethodGET];
[[RKObjectManager sharedManager].router routeClass:[Player class] toResourcePath:@"/player" forMethod:RKRequestMethodPOST];
[[RKObjectManager sharedManager].router routeClass:[Player class] toResourcePath:@"/player" forMethod:RKRequestMethodPUT];
[[RKObjectManager sharedManager].router routeClass:[Player class] toResourcePath:@"/players" forMethod:RKRequestMethodDELETE];

[[RKObjectManager sharedManager].router routeClass:[WTFGameInfo class] toResourcePath:@"/game"forMethod:RKRequestMethodGET];
[[RKObjectManager sharedManager].router routeClass:[WTFGameInfo class] toResourcePath:@"/game" forMethod:RKRequestMethodPOST];
[[RKObjectManager sharedManager].router routeClass:[WTFGameInfo class] toResourcePath:@"/game/:gameID" forMethod:RKRequestMethodPUT];
[[RKObjectManager sharedManager].router routeClass:[WTFGameInfo class] toResourcePath:@"/games" forMethod:RKRequestMethodDELETE]; 
```

但是，使用 PathPatterns 已经发生了如此细微的变化，我想知道我是否可以将资源路径中的字符串完全一样，或者我必须将其更改为看起来像这样。

```
[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithClass:[Player class] pathPattern:@"/player/:_id" method:RKRequestMethodGET]];//posibly do it for _fbID;
[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithClass:[Player class] pathPattern:@"/player/:_id" method:RKRequestMethodPOST]];//posibly do it for _fbID;
[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithClass:[Player class] pathPattern:@"/player/:_id" method:RKRequestMethodPUT]];//posibly do it for _fbID;

[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithClass:[WTFGameInfo class] pathPattern:@"/game/:_id" method:RKRequestMethodGET]];//posibly do it for @"/game/:gameID";
[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithClass:[WTFGameInfo class] pathPattern:@"/game/:_id" method:RKRequestMethodPOST]];//posibly do it for @"/game/:gameID";
[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithClass:[WTFGameInfo class] pathPattern:@"/game/:_id" method:RKRequestMethodPUT]];//posibly do it for @"/game/:gameID"; 
```

谁能为我澄清一下？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:37:06.773

这可以 ：

```
[[RKObjectManager sharedManager].router.routeSet addRoute:[RKRoute routeWithClass:[Player class] pathPattern:@"player/:playerId" method:RKRequestMethodGET]]; 
```

为了让你的播放器，类似这样的东西：

```
Player *player = [Player new];
player.playerID = 2;
[[RKObjectManager sharedManager] getObject:player path:nil parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
    // Request 
} failure:nil]; 
```

# python - 在 python 中使用 urllib2 和 Tor 拒绝连接

> ID：13908653
> 
> 赞同：3
> 
> 时间：2012-12-17T05:17:44.590
> 
> 标签：python, web-scraping, urllib2, tor

我对python很陌生。我正在尝试为我正在从事的项目编写一个非常简单的网络爬虫。在此过程中，我尝试使用 Tor 更改我的 IP 地址，这样我就不会与我正在抓取的服务断开连接。在将其添加到我的项目之前，我试图测试特定于获取新 IP 的代码。这是我正在测试的代码。

```
from TorCtl import TorCtl
import urllib2

for i in range(1,51):
    proxy_support = urllib2.ProxyHandler({"http" : "127.0.0.1:8118"} )
    opener = urllib2.build_opener(proxy_support)
    opener.addheaders = [('User-agent', 'Mozilla/5.0')]
    urllib2.install_opener(opener)

    print "IP " + str(i) + ":"
    print urllib2.urlopen('http://ifconfig.me/ip').read()

    conn = TorCtl.connect(controlAddr="127.0.0.1", controlPort=9051, passphrase="torPass")
    conn.sendAndRecv('signal newnymrn')
    conn.close() 
```

当我这样做时，我收到以下错误：

> IP 1：回溯（最近一次调用最后）：文件“scrapingTools.py”，第 86 行，在 main() 文件“scrapingTools.py”，第 76 行，在主打印中 urllib2.urlopen('http://ifconfig.me /ip').read() 文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 126 行，在 urlopen 返回 _opener.open(url, data,超时）文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第394行，打开响应= self._open（req，data）文件“/System/ Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 412 行，在 _open '_open', req) 文件中“/System/Library/Frameworks/Python.framework/Versions/2.7 /lib/python2.7/urllib2.py”，第 372 行，在 _call_chain 结果 = func(*args) 文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 1199 行，在 http_open 返回 self.do_open(httplib.HTTPConnection , req) 文件“/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py”，第 1174 行，在 do_open 中引发 URLError(err) urllib2.URLError：

任何帮助理解这里发生的事情将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:21:02.977

您的代理配置有问题。您的代码无需代理设置即可工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:56:30.770

我对 TorCtl 一无所知，但您没有发送 AUTHENTICATE 字符串，tor 会这样。它应该看起来像：

```
telnet localhost:9051
>> 250 OK
AUTHENTICATE "xxx"
>> 250 OK
signal NEWNYM
>> 250 OK 
```

请注意，等待几秒钟以使身份发生更改。

# javascript - 在显示选项卡之前防止整页闪烁

> ID：13908656
> 
> 赞同：1
> 
> 时间：2012-12-17T05:17:53.190
> 
> 标签：javascript, jquery, twitter-bootstrap, pug

目前，我正在使用页面上的[twitter 引导选项卡](http://twitter.github.com/bootstrap/javascript.html#tabs)，其中包含以下代码。我添加了一些 javascript/jquery 来在 url 中推送哈希标签，所以我实际上可以链接到一个选项卡。这很好用，但是当我加载第一个选项卡时，我会看到整个页面，然后我很快就会看到第一个选项卡。现在，如果我单击页面上的选项卡，一切正常，我不会再次显示整个页面。至少可以说，这种数据闪现令人讨厌。关于我做错了什么的任何想法？

[Jade 模板代码](http://jade-lang.com/)，编译成标准 HTML

```
 div(class="tabbable")
      ul(id="myTab", class="nav nav-tabs")
        li
          a(href="#surveyEditData", data-toggle="tab") Survey
        li
          a(href="#surveyEditQuestions", data-toggle="tab") Questions
        ...etc... 
```

JavaScript 代码：

```
 $(function(){
      // Function to activate the tab
      function activateTab() {
        var activeTab = $('[href=' + window.location.hash.replace('/', '') + ']');
        activeTab && activeTab.tab('show');
      }

      // Trigger when the page loads
      activateTab();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:45:16.877

您会看到在 Javascript 执行完成之前呈现 HTML 的延迟。

要解决此问题，您需要将初始 CSS 样式（例如淡入淡出或隐藏）添加到除第一个选项卡之外的所有其他选项卡。

CSS 规则在渲染过程中立即执行，因此这些规则不会有延迟。

# extjs - ExtJS 4.1：卸载事件

> ID：13908659
> 
> 赞同：0
> 
> 时间：2012-12-17T05:18:07.367
> 
> 标签：extjs, dom-events, extjs4.1

我正在使用 ext js 4.1。我正在开发一个必须支持 IE9、最新的 Firefox、最新的 Chrome 和 Safari 的应用程序。

当用户想要离开时，如果有一些数据等待提交，我需要显示一条警报消息。

我使用原始 Javascript 执行了以下操作：

```
window.onbeforeunload=function(){
    if (Ext.getStore('LocalChangesStore')){
        if (Ext.getStore('LocalChangesStore').getCount() > 0) {
            return 'Your changes are be lost.'; 
        } 
    }
}; 
```

我想知道ext js是否可以做到这一点。我看到了以下功能：

*应用程序.js：*

```
EventManager.onWindowUnload( function(){
    if (Ext.getStore('LocalChangesStore')){
        if (Ext.getStore('LocalChangesStore').getCount() > 0) {
            return 'Your changes are be lost.'; 
        } 
    }        
    }, this
); 
```

但它没有用。

有人可以让我知道哪种方法是解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T12:25:02.023

**onWindowUnload**方法将一个函数附加到 unload 事件，但您需要将一个函数附加到**beforeunload**事件。请试试这个

```
Ext.EventManager.on(window, 'beforeunload', function() {
    return 'Your changes are be lost.';
}); 
```

祝你好运。

# jquery - 在切换时更改锚标记内的文本？

> ID：13908663
> 
> 赞同：0
> 
> 时间：2012-12-17T05:18:26.547
> 
> 标签：jquery

我有以下内容：

![在此处输入图像描述](../Images/cb356af1095a13a228f8aaa97c9e4746.png)

所以现在我正在`ul.children`像这样切换：

```
$('a.expand-cat-item').on('click', function() {
  $(this).closest('li.cat-item').find('ul.children').toggle('slow');
}); 
```

现在，我还将 + 号更改为 - 号里面`a.expand-cat-item`（也可以用作切换）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T05:24:59.400

您可以使用条件运算符`? :`来制作文本切换条件。

```
$('a.expand-cat-item').on('click', function() {
  $(this).closest('li.cat-item').find('ul.children').toggle('slow');
  $(this).text($(this).text() == "+" ? "-" : "+");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:23:20.637

尝试

```
$('a.expand-cat-item').on('click', function() {
  $(this).closest('li.cat-item').find('ul.children').toggle('slow');
  if ($(this).text() == '+ '){
      $(this).text('- ');
  }
  else{
      $(this).text('+ ');
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:23:15.473

用这个：

```
$('a.expand-cat-item').text("- "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T05:25:10.087

```
$('a.expand-cat-item').on('click', function() {
  var $this = $(this);
  $this.closest('li.cat-item').find('ul.children').toggle('slow');
   var html = '+';
   if($this.html().indexOf('+') > -1){
       html = '-';
   }
   $this.html(html);
}); 
```

# windows - WDK8 - winusb.h 在哪里？

> ID：13908667
> 
> 赞同：1
> 
> 时间：2012-12-17T05:18:58.207
> 
> 标签：windows, usb, wdk, winusb

我正在尝试在我的项目中使用 WinUSB。我正在关注的指南是[http://msdn.microsoft.com/en-us/library/ff540174.aspx](http://msdn.microsoft.com/en-us/library/ff540174.aspx)。本文告诉我包含以下文件：

```
// Include Windows headers
#include <windows.h>
#include <stdio.h>
#include <tchar.h>
#include <strsafe.h>

// Include WinUSB headers
#include <winusb.h>
#include <Usb100.h>
#include <Setupapi.h> 
```

文件`windows.h`、`setupapi.h`和`strsafe.h`是在 中找到的`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include`。

文件`usb100.h`在`C:\Program Files (x86)\Windows Kits\8.0\Include\shared`.

和文件`stdio.h`，`tchar.h`被发现在`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include`.

根据[http://msdn.microsoft.com/en-us/library/windows/hardware/hh450839(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh450839(v=vs.85).aspx)，winusb.h 位于 WDK8 的 Include\um 文件夹中，但是在安装 WDK8 之后使用预下载和下载方法三遍，文件不存在。我假设`Include\um`他们指的是`C:\Program Files (x86)\Windows Kits\8.0\Include\um`. 我也搜索了我的系统，但找不到`winusb.h`任何地方。

`winapifamily.h`根据我链接的第二个 msdn 页面，我也找不到哪个包含在`winusb.h`.

我在 Windows 7 x64 上，安装了 WDK8 和 VC++ Express。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:37:34.633

`winusb.h`是 Windows DDK 的一部分，可以（安装 DDK 时）在`WINDDK\<BuildNumber>\inc\ddk`.

[可以在此处](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174(v=vs.100).aspx)找到如何使其工作的更多信息（包括有关文件位置的信息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:19:44.400

安装 Windows 8 SDK 后，我可以`winusb.h`在`C:\Program Files (x86)\Windows Kits\8.0\Include\um`.

似乎从版本 8 开始，`winusb.h`从 WDK/DDK 移至 SDK。

# android - 具有相同代码库的 Android 多个项目

> ID：13908668
> 
> 赞同：0
> 
> 时间：2012-12-17T05:19:21.997
> 
> 标签：android

我有多个在同一代码库上运行的 android 应用程序，但项目资源和 API 不同。我已阅读以下问题 [如何从一个代码库创建多个 Android 应用程序](https://stackoverflow.com/questions/4188250/how-to-create-multiple-android-apps-from-one-code-base)，我的问题是如何管理项目资源，如图像、颜色、文本，这些资源在每个应用程序中完全不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:21:57.033

应用项目中的资源会覆盖库项目中同名的资源。因此，您只需将图像等添加到您的应用程序项目中，它就会或多或少地自动运行。

# c - 从服务器 udp 访问数据

> ID：13908670
> 
> 赞同：0
> 
> 时间：2012-12-17T05:19:53.267
> 
> 标签：c, udp

我有一个问题，我有一个客户端服务器 udp，在服务器端我需要从客户端访问数据来控制机器人的运动。对于我用来打印“oke”的实验，如果数据的值为1。这里的代码程序：

```
#include <stdio.h> 
#include <stdlib.h> 
#include <unistd.h> 
#include <errno.h> 
#include <string.h> 
#include <sys/types.h> 
#include <sys/socket.h> 
#include <netinet/in.h> 
#include <arpa/inet.h> 
#include <netdb.h>
#define MYPORT 4950
#define MAXBUFLEN 100
int sockfd;
struct sockaddr_in my_addr; 
struct sockaddr_in their_addr; 
struct hostent *he;
int addr_len, numbytes;
char dt[30];
char buf[MAXBUFLEN];
int main() 
{
printf("‐‐‐‐‐ PROGRAM CHATTING ‐‐‐‐‐\n");

if((sockfd=socket(AF_INET,SOCK_DGRAM,0))==-1){
    perror("socket");
    exit(1); }

my_addr.sin_family = AF_INET; 
my_addr.sin_port = htons(MYPORT); 
my_addr.sin_addr.s_addr = INADDR_ANY; 
memset(&(my_addr.sin_zero),'\0',8);

if(bind(sockfd,(struct sockaddr *)&my_addr,sizeof(struct sockaddr))==-1){
    perror("bind");
    exit(1); }

while(1){
    addr_len = sizeof(struct sockaddr);
    if((numbytes=recvfrom(sockfd,buf,MAXBUFLEN-1,0,(struct sockaddr *)&their_addr,&addr_len))==-1)
    {
        perror("recvfrom");
        exit(1);}

    buf[numbytes]='\0';
    printf("%s : \"%s\"\n", inet_ntoa(their_addr.sin_addr), buf);

    if (buf[0]==1)
    { printf("oke\n");}

    printf("Me : ");
    scanf("%s", dt); 
    if((numbytes=sendto(sockfd,dt,strlen(dt),0,(struct sockaddr*)&their_addr,sizeof(struct sockaddr)))==-1)
    {
        perror("sendto");
        exit(1); 
    }

}
close(sockfd);
return 0;
} 
```

当我在客户端输入“1”时，结果是：

```
 ‐‐‐‐‐ PROGRAM CHATTING ‐‐‐‐‐
 130.130.66.76 : "1"
 Me : 
```

即使在程序中也有：

```
if (buf[0]==1)
{ printf("oke\n");} 
```

为什么程序无法访问if的内部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:49:29.700

尝试`if (buf[0]=='1')`

数字字符映射到与其数字不同的 ASCII 值，例如，`'1'==49`.

# objective-c - 如何制作一个调用 iOS 中本机警报视图的空中原生扩展？

> ID：13908671
> 
> 赞同：1
> 
> 时间：2012-12-17T05:20:03.620
> 
> 标签：objective-c, flash, apache-flex, air-native-extension

我尝试了很多示例，但最终以崩溃告终，没有任何理由。我只使用 windows 来编译我的 swc 并创建 .ipa 文件。我在 Mac 中创建了一个可可静态库，并在创建 .ane 文件时使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:49:59.553

您可以尝试使用[as3gamegears NativeAlert](http://www.as3gamegears.com/air-native-extension/nativealert/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T05:07:33.623

[http://www.adobe.com/devnet/air/articles/transferring-data-ane-ios-pt1.html](http://www.adobe.com/devnet/air/articles/transferring-data-ane-ios-pt1.html)

Basics of the air native extension for ios Was helpfull in my case.

# asp.net - 如何从 ASP.NET 应用程序中找出 Silverlight XAP 的版本号

> ID：13908679
> 
> 赞同：1
> 
> 时间：2012-12-17T05:20:50.773
> 
> 标签：asp.net, silverlight, versioning

我有一个 ASP.NET 应用程序，其中包含许多用 Silverlight 编写的插件。如何从 Web 应用程序（[而不是 Silverlight 插件](https://stackoverflow.com/questions/4806777/is-it-possible-to-get-a-version-number-from-the-xap-file)）中找出 Silverlight 应用程序的 .NET 程序集版本，以便我可以列出已安装的插件，例如 Help | 关于盒子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:23:29.190

XAP 文件是 ZIP 格式的文件。您可以使用 Winzip 打开它，解压缩程序集，然后查看它们的版本号。使用 .NET zip 库和 ASP.NET 中的反射，这一切都应该是可能的。

# javascript - 如何加载 2 个 onload() JavaScript 脚本？

> ID：13908687
> 
> 赞同：1
> 
> 时间：2012-12-17T05:21:51.603
> 
> 标签：javascript

使用此功能：

```
function start() {
MONDUX();
Biggie();
} 
```

函数MONDUX 执行，AJAX 调用返回良好数据并正确显示。但是，Biggie() 是awal

结果：

```
function start() {
Biggie();
MONDUX();
} 
```

是相反的。Biggie() 按预期工作，MONUX() 失败。

这对身体没有任何好处：

```
<script type="text/JavaScript">
window.onload= start();
</script> 
```

而且，这种闪避没有帮助：

```
<body onload="start()"> 
```

这也被尝试过

讨厌货物~邪教编程和这里的想法用完。建议？

这些资源都是相关的 // 近乎命中 // 没有雪茄。 [使用 2 个函数](https://stackoverflow.com/questions/10122555/loading-javascript-in-body-onload-with-2-functions) [JS 和 Body(Window) Onload 事件在 body onload 中加载 javascript](https://stackoverflow.com/questions/2938110/js-and-bodywindow-onload-event?rq=1) [：“function onload() {}”与“onload = function() {}”有何不同？](https://stackoverflow.com/questions/1818501/javascript-how-is-function-onload-different-from-onload-function) 那个很吸引人，但对我来说很深…… [如何加载两个 javascript 文件？](https://stackoverflow.com/questions/13471263/how-to-onload-two-javascript-files) 嗯……很好，但是……

?? :/~

```
<script type="text/javascript" >

 function MONDUX(){
if (window.XMLHttpRequest)
 { // code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
 }
else
  { // code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
 {
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
  document.getElementById("WhatThexBobby").innerHTML=xmlhttp.responseText;
  }
 }
xmlhttp.open("POST","000 8 KISS 22solo PHP.php?figure1=5&figure2=33", true);
xmlhttp.send();

 alert(WhatThexBobby);

}
 </script>
 <script type="text/javascript" >

function Biggie(){

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
 }
else
 {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
 {
 document.getElementById("FreakinEh").innerHTML=xmlhttp.responseText;
 }
 }
 xmlhttp.open("POST","000 8 KISS solo PHP.php?figure1=5&figure2=10", true);
xmlhttp.send();

alert(FreakinEh);
 }

 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:22:34.590

您将请求分配给全局变量 xmlhttp，然后在第一个请求返回之前将该变量重新分配给另一个请求。我不知道这是否会导致您的问题，但这肯定会导致**问题**。这也是非常糟糕的 JavaScript 实践。

简单的解决方法是将行'var xmlhttp;' 在两个函数的开头。

编辑：以防万一您不知道： xmlhttprequest 是异步的。您调用“发送”，脚本和文档中的剩余语句将在请求发送到服务器时继续运行。只有在服务器返回后，才会调用各种回调方法（onreadystatechange 等），而这是在您的警报显示很久之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:04:46.083

考虑到其中一个正在抛出一些错误，将它们放入 Try Catch 不是一个好主意吗？就像是，

```
function start() {
  try
  {
    MONDUX();
  }
  catch(err)
  {
   // handle error
  }
  try
  {
    Biggie();
  }
  catch(err)
  {
    //Handle error
  }
  finally
  {
   // cleanup
  }
} 
```

这将确保两个运行，即使其中一个误触发。

# jquery - 如何保存样式 css 值以供以后使用，然后重新加载这些值

> ID：13908695
> 
> 赞同：-1
> 
> 时间：2012-12-17T05:23:06.287
> 
> 标签：jquery, css, c#-4.0, webforms, asp.net-4.0

拥有所有 SQL 数据库表及其列名的列表，每个都在`List<string>`

通过下拉列表控件，我已经选择了一个表和它的列，然后在第一阶段之后，我选择了表和它的列，我正在导航到一个`Graphical User interface`与此屏幕截图类似的页面：

![在此处输入图像描述](../Images/6e1945f3293de8300da7d8e33104a813.png)

然后，正如您在图片中看到的那样，它会渲染一个 html table ，并将所选列作为 htmlTable headers 。

所以现在当结果显示在那个`aspx`页面上时，

通过使用 Jquery，我设法实现了一个测试工具。

这使我能够通过`Graphical User interface`- 在该表上应用一些样式设置，现在它只是*标题字体名称* 、 *标题背景颜色*和*列宽度*：

**标题字体**。

字体正在由一个 以字体名称作为其`AJAX ToolKit autoComplete Extender`目标的专用目标 选择`asp:TextBox``dataSource`

所以在`textchange`事件 - jQuery 绑定选定的值...相应地进行预览。

**背景**相同

 **通过使用 jQuery 颜色选择器，它可以`event handler`将所选颜色应用为`<tr>`bgcolor ...etc '

现在我已经选择了所有的 css 值，我需要将它们用于网站应用程序

实现这一目标的最简单方法是什么？

我可以考虑通过 a 生成它`File.WriteAllText`，

因此，结果将是一个使用文本创建的新文件，生成文本是`.aspx`webform 页面的头部（通过自动生成`String.Format`）

```
string formatedStyleStr = string.Format(" <style Type=\"text/css\"> #{0} { \r\twidth: {1};", ID values of jQuery's job); 
```

就是这样的想法...

由于新文件名将`default`带有扩展名`.aspx`...

然后`formatted string`像手动编写一样以编程方式写入它

当通常开始一个新的`empty website application`.

**因此，您将“添加现有项目”**而不是使用新表单...

或我可以做的其他选择来实现这个结果。我还没有决定如何...

只是我需要它来保存这些被选中的值，

因此，当您将通过 Visual Studio 打开此文件并对其进行处理时，您将有一种模板开始（初始样式由图片中的 UI 创建）

我应该使用什么方法？

因为我在那个领域没有足够的经验......我想问有没有人已经想到了......并想出了一些实现它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:27:19.157

尝试这个

**ASPX**

```
<style type="text/css" runat="server" id="AutogeneratedStyle"></style> 
```

这将`HtmlGenericControl`在当前的`page`.

**C# 代码背后**

然后只需像这样分配文字 CSS 定义：

```
var generatedStyle= string.Format(

                   "-->#idOfElement here<---
                      {
                          background-color:{0};
                      }", someVariables);

AutogeneratedStyle.InnerHtml = generatedStyle; 
```

希望它会帮助你开始**

# point-cloud-library - C++ 程序无法在“应用程序无法正确启动 (0xc000000d)”的情况下运行

> ID：13908696
> 
> 赞同：2
> 
> 时间：2012-12-17T05:23:06.927
> 
> 标签：point-cloud-library

我在 Windows 7 中使用 Visual Studio 2010，我正在运行使用 pcl 头文件的正常分发代码。整个代码在 cpp 中。在调试时，我在新窗口中收到应用程序错误“应用程序无法正确启动 (0xc000000d)。单击确定关闭应用程序”。当我单击确定时，窗口关闭并且程序停止运行。在输出选项卡中，显示无法加载或找不到 pdb 文件。

按照步骤我创建了 Visual Studio 项目

1.  下载了 pcl 主干版本，它只包含正常分布的头文件
2.  使用 cmake，我创建了安装 pcl 的安装 Visual Studio 项目
3.  创建 INSTALL 项目后，使用 Visual Studio 安装 pcl 头文件
4.  再次使用 cmake，我创建了使用已安装 pcl 头文件的 Normal 分发项目

在运行正态分布项目时，我收到上述应用程序错误。我无法找到问题所在

# ruby-on-rails - 如何查找没有照片的记录

> ID：13908698
> 
> 赞同：0
> 
> 时间：2012-12-17T05:23:14.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两张桌子 `1\. Artist`， `2\. Photo`而且有`one to many`关系。

我想找到`all artists`那个有`no photos`和`less then 5 photos`。

我该如何为此编写查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:29:53.133

试试这个。

```
Artist.join(:photos).having("count(photos.*)<5") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:42:15.080

你可以找到那些使用这个

```
Artist.join(:photos).group("photos.artist_id").select("sum(photos.artist_id) as total_photos").having("total_photos<5") 
```

# coffeescript - 带有 CoffeeScript 代码的 Jasmine 测试的奇怪行为

> ID：13908705
> 
> 赞同：0
> 
> 时间：2012-12-17T05:23:32.277
> 
> 标签：coffeescript, jasmine

我正在编写 Jasmine 测试，但它表现出奇怪的行为。

这是我的代码：

```
root = exports ? this
class root.SomeClass
  constructor: ->
    @index = 0
  incrementIndex: -> @index++
  decrementIndex: -> @index-- 
```

这是我的测试代码：

```
describe "Object", ->
  object = new SomeClass

  describe ".index", ->
    describe "when index = 3", ->
      object.index = 3

      describe "when next button is clicked", ->
        object.incrementIndex()
        it "returns 4", ->
          expect(object.index).toBe 4

      describe "when previous button is clicked", ->
        object.decrementIndex()
        it "returns 3", ->
          expect(object.index).toBe 2 
```

测试结果如下：

```
Failing 2 specs

Photos initialized .index when index = 3 when next button is clicked returns 4.
Expected 3 to be 4.

Photos initialized .index when index = 3 when previous button is clicked returns 3.
Expected 3 to be 2. 
```

奇怪的是，**当我注释掉最后4行测试代码时，测试通过了。**我无法理解发生了什么...>_<

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:02:58.260

您的测试相互影响。 [以`beforeEach`块](http://pivotal.github.com/jasmine/#section-Setup_and_Teardown)为单位进行设置。

```
描述“对象”，->
  对象=未定义

  之前 ->
    对象 = 新的 SomeClass

  描述“.index”，->
    描述“当索引 = 3”，->
      之前 ->
        对象.index = 3

      描述“单击下一个按钮时”，->
        之前 ->
          object.incrementIndex()

        它“返回 4”，->
          期望（object.index）.toBe 4

      描述“单击上一个按钮时”，->
        之前 ->
          object.decrementIndex()

        它“返回 3”，->
          期望（object.index）.toBe 2

```

未检查这段代码是否有效，但仍显示您应该如何修复测试。请注意`object = undefined`第 2 行。您需要在此处声明变量，否则`object`将对每个`beforeEach`和`it`块都是本地的。

# php - 如何在 .tpl 中使用 $_SERVER、$_POST 和 $_GET

> ID：13908708
> 
> 赞同：0
> 
> 时间：2012-12-17T05:23:41.403
> 
> 标签：php, smarty

我有一个`.tpl`文件，其中包含包含添加和编辑功能的表单数据。我想检查用户是否`ADD`需要`EDIT`检查查询字符串。为此，我想使用`$_SERVER`,`$_POST`并将`$_GET`数组变量放入 .tpl 文件中。

我像这样直接使用但不工作：

```
{$_SERVER}
{if $step_info->actions eq ""}        
        <tr>            
            <td><textArea name="step_details[]"></textArea></td>
            <td><textArea name="expected_results[]"></textArea></td>
            <td style="vertical-align: top;">
                <select onchange="content_modified = true"  name="etype[]">
                    <option selected="selected" value="1" label="Manual">Manual</option>
                    <option value="2" label="Automated">Automated</option>
                </select>
            </td>
        </tr>
        {/if} 
```

我是smarty的新手，对此了解不多。

需要帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:26:37.150

您可以使用 {$smarty.get.variable}

[http://www.smarty.net/docsv2/en/language.variables.smarty.tpl](http://www.smarty.net/docsv2/en/language.variables.smarty.tpl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:28:31.130

您可以访问一些保留的单词，例如以下示例

```
{* display the variable "page" from a form ($_POST['page']) *}

{$smarty.post.page}` 
```

此[链接](http://www.smarty.net/docsv2/en/language.variables.smarty)可能会对您有所帮助。

# android - 在不暂停前一个 android 的情况下开始另一个活动

> ID：13908712
> 
> 赞同：2
> 
> 时间：2012-12-17T05:24:29.763
> 
> 标签：android, android-activity

我使用的是安卓 2.3。我正在开发一个需要启动新活动的应用程序，但我希望我以前的活动能够运行。基本上，我通过蓝牙接收心电图数据并显示它。同时我想访问一些我需要开始新活动的数据库。是否可以在不暂停正在接收和显示的蓝牙数据的情况下开始这个新活动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T05:26:48.693

通常，您不能同时激活两个活动（尽管某些供应商修改支持“多窗口”模式）。您可以在 UI 中使用片段并显示/隐藏多个部分。任何需要在后台继续运行的东西，您都可以在服务中运行，然后通过回调等通知 UI 您收到的结果。

# prototype - 滑块在原型中无法正常工作

> ID：13908713
> 
> 赞同：0
> 
> 时间：2012-12-17T05:24:37.937
> 
> 标签：prototype

嗨，我为原型滑块使用了一些代码，但代码不起作用。我的第一个图像第一次执行总没有比其他图像开始滑动。如果有 3 个图像比第一个图像滑动 3 次并且滑块开始工作. 这是我的代码：

```
var i = 0;
var j=0;
var time = '';
var delay ='';
var item_id ='';

var child;
var image_slide = [];
var NumOfImages;    
var wait = 2000;        
      var container = document.getElementById("image-container");

    for (child = container.firstChild; child; child = child.nextSibling) {
        if (child.id && child.nodeName === "DIV") {
        image_slide.push(child.id);
        }
    }

    var NumOfImages = image_slide.length;

function SwapImage(x,y) {
    console.log(x);
    $(image_slide[x]).appear({ duration: 1.5 });
    $(image_slide[y]).fade({duration: 1.5});
}

function StartSlideShow() {
    play = setInterval('Play()',wait);

}

function Play() {
    var imageShow, imageHide;

    imageShow = i+1;
    imageHide = i;

    if (imageShow == NumOfImages) {
        SwapImage(0,imageHide); 
        i = 0;                  
    } else {
        SwapImage(i+1,imageHide);           
        i++;
    }
}

function Stop () {
    clearInterval(play);                

}. 
```

这是我的html

```
<div id="image-container"  class="protoshow"  onmouseover="javascript:StartSlideShow();" onmouseout="javascript:Stop();">

                <div class="fade-box" id="image-1"><img src="slide01.jpg" alt="" /></div>
                <div class="fade-box" id="image-2"><img src="slide01.jpg"  alt="" /></div>
                <div class="fade-box" id="image-3"><img src="slide01.jpg"  alt="" /></div>
                <div class="fade-box" id="image-4"><img  ssrc="slide01.jpg"  alt="" /></div>

        </div> 
```

我尽力而为，但不知道为什么会发生。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:30:56.743

在调试每一行之后，我发现在第一个循环中它隐藏了所有具有 css 的 display:none 属性的较低元素。在将 dispaly:none 添加到除第一个以外的每个元素之后，它会在第一个循环中自动更改元素。所以当使用自定义滑块时除了第一个元素之外，其他元素必须不显示滑块效果。谢谢

# java - 正则表达式：除去包含关键字“univ”的所有标签

> ID：13908716
> 
> 赞同：0
> 
> 时间：2012-12-17T05:25:07.290
> 
> 标签：java, regex

```
[introduction][position]Lead Researcher and Research Manager[/position] in the [affiliation]Web Search and Mining Group, Microsoft Research[/affiliation]</b>.

I am a [position]lead researcher[/position] at [affiliation]Microsoft Research[/affiliation]. I am also [position]adjunct professor[/position] of [affiliation]Peking University[/affiliation], [affiliation]Xian Jiaotong University[/affiliation] and [affiliation]Nankai University[/affiliation].

I joined [affiliation]Microsoft Research[/affiliation] in June 2001\. Prior to that, I worked at the Research Laboratories of NEC Corporation.

I obtained a [bsdegree]B.S.[/bsdegree] in [bsmajor]Electrical Engineering[/bsmajor] from [bsuniv]Kyoto University[/bsuniv] in [bsdate]1988[/bsdate] and a [msdegree]M.S.[/msdegree] in [msmajor]Computer Science[/msmajor] from [msuniv]Kyoto University[/msuniv] in [msdate]1990[/msdate]. I earned my [phddegree]Ph.D.[/phddegree] in [phdmajor]Computer Science[/phdmajor] from the [phduniv]University of Tokyo[/phduniv] in [phddate]1998[/phddate].

I am interested in [interests]statistical learning[/interests], [interests]natural language processing[/interests], [interests]data mining, and information retrieval[/interests].[/introduction] 
```

我可以从上面的段落中删除所有标签：

```
String stripped = html.replaceAll("\\[.*?\\]", ""); 
```

但我想在段落中保留三对标签，它们是`[bsuniv][/bsuniv]`,`[msuniv][/msuniv]`和`[phduniv][/phduniv]`. 换句话说，我不想去掉那些包含关键字“univ”的标签。我找不到重写正则表达式的便捷方法。有人帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:41:40.400

您可以在此处使用`negative-look ahead`断言：-

```
str = str.replaceAll("\\[(.(?!univ))*?\\]", ""); 
```

或者： -

```
str = str.replaceAll("\\[((?!univ).)*?\\]", ""); 
```

它们都将为您提供所需的输出。只有一个区别——

*   第一个对当前字符进行负前瞻，如果后面没有`univ`，则移动到下一个字符。
*   第二个对每个字符之前的空字符串进行负前瞻，如果后面没有`univ`，则继续匹配单个字符。

# javascript - 限制网页上连续 JavaScript 执行的最有效方法

> ID：13908717
> 
> 赞同：2
> 
> 时间：2012-12-17T05:25:08.137
> 
> 标签：javascript, dom-events, throttling

我想在页面上连续执行一段 JavaScript 代码，尽我所能花费所有可用的 CPU 时间，但同时允许浏览器正常运行和响应。

如果我只是连续运行我的代码，它会冻结浏览器的 UI 并且浏览器开始抱怨。现在我将零超时传递给`setTimeout`，然后它会做一小部分工作并循环回`setTimeout`. 这可行，但似乎并没有利用所有可用的 CPU。您可能会想到任何更好的方法吗？

**更新：**更具体地说，有问题的代码是`canvas`连续渲染帧。这里的工作单元是一帧。我们的目标是最大可能的帧速率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:15:35.797

可能您想要的是集中页面上发生的所有事情并使用 requestAnimationFrame 来完成所有绘图。所以基本上你会有一个看起来像这样的函数/类（你必须原谅我习惯于 Mootools 类的一些样式/语法错误，只需将其作为大纲）

```
var Main = function(){
   this.queue = [];
   this.actions = {};

   requestAnimationFrame(this.loop)
}

Main.prototype.loop = function(){
   while (this.queue.length){
       var action = this.queue.pop();
       this.executeAction(e);
   }

   //do you rendering here
   requestAnimationFrame(this.loop);
}

Main.prototype.addToQueue = function(e){
   this.queue.push(e);
}

Main.prototype.addAction = function(target, event, callback){
    if (this.actions[target] === void 0) this.actions[target] = {};
    if (this.actions[target][event] === void 0) this.actions[target][event] = [];

    this.actions[target][event].push(callback);
}

Main.prototype.executeAction = function(e){
    if (this.actions[e.target]!==void 0 && this.actions[e.target][e.type]!==void 0){
        for (var i=0; i<this.actions[e.target][e.type].length; i++){
            this.actions[e.target][e.type](e);
        }
    }
} 
```

所以基本上你会使用这个类来处理页面上发生的所有事情。每个事件处理程序都可以`onclick='Main.addToQueue(event)'`或者您希望将事件添加到页面，您只需将它们指向将事件添加到提示，然后使用 Main.addAction 将这些事件定向到您希望它们执行的任何操作。这样，一旦您的画布完成重绘并再次重绘之前，每个用户操作都会立即执行。只要您的画布以合适的帧速率呈现，您的应用程序就应该保持响应。

编辑：忘记了 requestAnimationFrame(this.loop) 中的“this”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:30:55.387

网络工作者值得尝试

```
https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:39:50.490

您可以通过更改每次调用所做的工作量来调整性能。在您的问题中，您说您做了“一小部分工作”。建立一个控制正在完成的工作量的参数并尝试各种值。

您也可以尝试在处理**之前**设置超时。这样，处理所花费的时间应该计入浏览器设置的任何最小值。

我使用的一种技术是在我的处理循环计数迭代中有一个计数器。然后在该函数中设置一个时间间隔，比如一秒，显示计数器并将其清零。这提供了一个粗略的性能值，用于衡量您所做更改的效果。

一般来说，这可能非常依赖于特定的浏览器，甚至是浏览器的版本。通过可调参数和性能测量，您可以实现反馈循环以实时优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T08:56:12.333

可以`window.postMessage()`用来克服强制执行的最短时间的限制`setTimeout`。有关详细信息，请参阅[本文](http://dbaron.org/log/20100309-faster-timeouts)。[此处](http://dbaron.org/mozilla/zero-timeout)提供演示。

# php - PHP 无法使用 mkdir 创建目录

> ID：13908722
> 
> 赞同：13
> 
> 时间：2012-12-17T05:25:18.997
> 
> 标签：php, apache, permissions, mkdir, selinux

我有一个以前工作的 PHP 脚本，它能够创建一个目录`mkdir`：

```
$webfolder = "/var/www/html/images/user";
mkdir($webfolder, 0770); 
```

我对文件夹的权限设置进行了一些更改，`/var/www/html/images`现在是：

```
drwxrwx---. myself apache system_u:object_r:httpd_sys_content_t:s0 images 
```

我认为以前此文件夹归`apache`. 但是既然`apache`作为一个用户组拥有读、写和执行的全部权限，我想知道为什么它不能在其中创建一个文件夹。使用`mkdir`产生一个`false`布尔值。

问题是由于目录所有权还是有其他原因？请注意，我使用的是 PHP 5.4 版。

**错误日志添加：**

> [Mon Dec 17 11:12:34 2012] [error] [client 127.0.0.1] PHP Warning: mkdir(): Permission denied in /var/www/html/upload on line 33, referer: [https://mywebsite. com/referer](https://mywebsite.com/referer)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T12:53:20.233

答案就在眼前，但由于我对 SELinux 的不熟悉，我很想念它。

SELinux 上下文类型应该设置为，`httpd_sys_content_rw_t`而不是`httpd_sys_content_t`这样文件夹对于 apache 来说是可读和可写的。使用以下命令以递归方式更改上下文：

```
# chcon -R -t httpd_sys_content_rw_t /var/www/html/images 
```

好伤心。希望它可以帮助其他遇到此问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T07:52:55.333

在 CentOS7 VM 上，使用 PHP5.4.16/Apache 2.4.6/mariadb 5.5.44，smarty 模板目录不可写以生成已编译的模板文件，并给出以下错误（在 /var/log/httpd/error_log 中）：

```
[Thu Mar 31 12:36:08.201383 2016] [:error] [pid 13094] [client 192.168.212.65:52204] PHP Fatal error:  Smarty error: unable to write to $compile_dir '/var/www/html/app1/templates_c'. Be sure $compile_dir is writable by the web server user. in /var/www/html/app1/libs/smarty/Smarty.class.php on line 1093 
```

因此 PHP 应用程序显示空白屏幕。

**chmod 777 templates_c**也不起作用；但根据@Question Overflow 的建议，此 VM 上的 Web 根权限确实解决了问题。

我不得不执行：

```
[root@appserver html]# chcon -R -t httpd_sys_content_rw_t /var/www/html 
```

当然，templates_c & 缓存应该归 apache 用户所有：

```
drwxr-xr-x.  2 apache apache     6 Mar 31 12:56 templates_c
drwxr-xr-x.  2 apache apache     6 Mar 31 12:56 cache 
```

花了半天多时间，偶然发现了这个。谢谢

# ruby-on-rails - 在 Rails 上更新属性

> ID：13908723
> 
> 赞同：1
> 
> 时间：2012-12-17T05:25:30.210
> 
> 标签：ruby-on-rails

我知道这是一个非常简单的问题，但尽管有很多变化，我似乎无法解决这个问题：

```
 it "will send an email" do
    invitation = Invitation.new
    invitation.email = "host@localhost.com"
    invitation.deliver 
    invitation.sent.should == true
  end 
```

我的模型：

```
class Invitation
  include Mongoid::Document
  include Mongoid::Timestamps
  field :email, :type => String, :presence => true, :email => true
  field :sent, :type => Boolean, :default => false
  field :used, :type => Boolean, :default => false
  validates :email, :uniqueness => true, :email => true

  def is_registered?
    User.where(:email => email).count > 0
  end

  def deliver
    sent = true
    save
  end

end 
```

这输出：

```
 1) Invitation will send an email
     Failure/Error: invitation.sent.should == true
       expected: true
            got: false (using ==)
     # ./spec/models/invitation_spec.rb:26:in `block (2 levels) in <top (required)>' 
```

如何设置值，然后将其保存在模型本身中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T05:39:43.710

你的`deliver`方法没有做你认为它做的事情：

```
def deliver
  sent = true
  save
end 
```

所做的只是将局部变量设置`sent`为`true`，然后在`save`没有任何更改的情况下调用；没有任何改变`self.sent`，所以`invitation.sent.should == true`会失败。

您想为该`sent=`方法提供一个显式接收器，以便 Ruby 知道您不想分配给局部变量：

```
def deliver
  self.sent = true
  save
end 
```

# batch-file - AWK 在发生时替换列值

> ID：13908724
> 
> 赞同：1
> 
> 时间：2012-12-17T05:25:36.857
> 
> 标签：batch-file, merge, awk

. 大家好！

当日期和时间匹配时，我需要将 FILE2 文件中的一些值替换为 FILE1 文件中的值。

**文件1**

```
121216、0100、1.1、
121216、0115、1.0、
121216、0130、2.1、
121216、0145、1.8、
121216、0200、1.5、
121216、0215、1.3、
121216、0230、0.9、
121216、0245、1.2、

```

**文件2**

```
121216、0100、2.3、
121216, 0200, ,

```

**输出**

```
121216、0100、1.1、
121216、0200、1.5、

```

请一个awk解决方案，需要速度。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:34:01.890

单程：

```
 awk -F, 'NR==FNR{a[$1$2]=$3;next}{$3=a[$1$2];}1' OFS=, file1 file2 
```

# java - 数字“0”（零）不能在后端转换为双精度

> ID：13908727
> 
> 赞同：0
> 
> 时间：2012-12-17T05:25:42.937
> 
> 标签：java, struts

我通过struts框架将一组数字从flex前端发送到后端

```
 var knobValues:Array=new Array();
        for(var i:int=0;i<parXmlList.length();i++)
        {
          knobValues[i]=parBox[i].knob.value;
        }

  calcEnergy.send(knobValues); 
```

其中，旋钮.value 的类型为 Numbers

如果数组包含数字“0”，则会发生以下错误。错误出现在相应动作类的 setter 方法中。当数组不包含“0”时，不会出现错误...

```
Error setting value
Method "setKnobValues" failed for object com.tcs.infra.ecm.action.SaveScenarioAction@8f0064 [java.lang.NoSuchMethodException: setKnobValues([Ljava.lang.String;)] 
```

动作类中的Setter方法...

```
public void setKnobValues(double[] knobValues) 
{
    this.knobValues = knobValues;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:54:10.443

根据错误消息，方法`setKnobValues()`需要一个类型为`double[]`(array of `double`) 的参数，并且您正在向它传递一个 of 的数组。`String`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:27:08.427

```
java.lang.NoSuchMethodException: setKnobValues([Ljava.lang.String;) 
```

看来您的版本不兼容。

`.class`您在编译时所拥有的与您在运行时所拥有的不同（假设这段代码编译得很好）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:07:20.037

最后我以某种方式设法做到了...似乎将 0 理解为零存在问题，在进入 Action 类之前它正在转换为 String...

因此，我没有将值作为 []double 发送，而是作为逗号（，）分隔的字符串发送并在后端将其标记化......

感谢您的回复:)

# delphi - 更改 Dbgrid 中列的顺序时出错

> ID：13908729
> 
> 赞同：0
> 
> 时间：2012-12-17T05:25:51.453
> 
> 标签：delphi, drag-and-drop, delphi-7, delphi-xe2, dbgrid

我以另一种形式编写了表单渲染设置数据库表 Dbgrid 的代码。这取决于所选项目在 Dbgrid 中定义 Chetsklistboks 可见列。我还编写了代码来移动与拖放项目和列 Chetsklistbox Dbgrid 一致性。但是，当从参数拖放超出范围以及关闭无效指针操作时，从某个点开始（在我看来，尝试更改具有大索引的项目中索引最低的项目）错误。帮助解决错误。

```
unit SettingOfShowData;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.CheckLst, Vcl.ExtCtrls,
  VirtualTrees, DatabaseClasses, MainForm, ListOfTables;

type
  TNodeField=record
    NameField : string;
end;

 PNodeField=^TNodeField;
type
  TfmSettings = class(TForm)
    Panel1: TPanel;
    VT: TVirtualStringTree;
    Edit1: TEdit;
    Edit2: TEdit;
    Edit3: TEdit;
    CheckListBox1: TCheckListBox;
    procedure VTGetNodeDataSize(Sender: TBaseVirtualTree;
      var NodeDataSize: Integer);
    procedure VTGetText(Sender: TBaseVirtualTree; Node: PVirtualNode;
      Column: TColumnIndex; TextType: TVSTTextType; var CellText: string);
    procedure FormCreate(Sender: TObject);
    procedure VTFreeNode(Sender: TBaseVirtualTree; Node: PVirtualNode);
    procedure FormActivate(Sender: TObject);
    function IsPrimaryKey(InputTableName : string; InputFieldName : string) : Boolean;
    procedure VTNodeClick(Sender: TBaseVirtualTree; const HitInfo: THitInfo);
    procedure VTNodeDblClick(Sender: TBaseVirtualTree; const HitInfo: THitInfo);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure CheckListBox1ClickCheck(Sender: TObject);
    procedure CheckListBox1DragDrop(Sender, Source: TObject; X, Y: Integer);
    procedure CheckListBox1DragOver(Sender, Source: TObject; X, Y: Integer;
      State: TDragState; var Accept: Boolean);
    procedure CheckListBox1MouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  fmSettings: TfmSettings;
  NumX, NumY : Integer;
implementation

{$R *.dfm}

procedure TfmSettings.CheckListBox1ClickCheck(Sender: TObject);
begin
    fmShowData.DBGrid1.Columns[CheckListBox1.ItemIndex].Visible :=
    not(fmShowData.DBGrid1.Columns[CheckListBox1.ItemIndex].Visible);
end;

procedure TfmSettings.CheckListBox1DragDrop(Sender, Source: TObject; X,
  Y: Integer);
var
  Num1, Num2, temp: Integer;
  Point1, Point2: TPoint;
begin
  Point1.X:=NumX;
  Point1.Y:=NumY;
  Point2.X:=X;
  Point2.Y:=Y;
  with Source as TCheckListBox do
  begin
    Num2:=CheckListBox1.ItemAtPos(Point1,True);
    Num1:=CheckListBox1.ItemAtPos(Point2,True);
    CheckListBox1.Items.Move(Num2, Num1);
    if Num2>Num1 then
        begin
           temp:=Num2;
           Num2:=Num1;
           Num1:=temp;
        end;
    fmShowData.DBGrid1.Columns[Num1].Index:=Num2;
    fmShowData.DBGrid1.Columns[Num2+1].Index:=Num1;
  end;
end;

procedure TfmSettings.CheckListBox1DragOver(Sender, Source: TObject; X,
  Y: Integer; State: TDragState; var Accept: Boolean);
begin
  if Source=CheckListBox1 then Accept:=True;
end;

procedure TfmSettings.CheckListBox1MouseDown(Sender: TObject;
  Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
  NumY:=Y;
  NumX:=X;
end;

procedure TfmSettings.FormActivate(Sender: TObject);
var
  Index, i: Integer;
  VTNodeField : PNodeField;
begin
  VT.BeginUpdate();
  //TableSpec:=TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable));
  for Index := 0 to TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).Fields.ComponentCount-1 do
  begin
    if TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).Fields.Components[Index] is TFieldSpec then
    begin
      VTNodeField:=VT.GetNodeData(VT.AddChild(nil, nil));
      VTNodeField^.NameField:=(TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).Fields.Components[Index] as TFieldSpec).name;
    end;
  end;
  VT.EndUpdate();
for i := 0 to TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).Fields.ComponentCount-1 do
begin
  if (TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).Fields.Components[i] is TFieldSpec) then
    begin
      CheckListBox1.Items.Add(TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).Fields.Components[i].Name);
      CheckListBox1.Checked[i]:=true;
    end;
end;
end;

procedure TfmSettings.FormClose(Sender: TObject; var Action: TCloseAction);
var i: integer;
begin
 { while VT.ComponentCount>0 do
  begin
    VT.DeleteNode(VT.Nodes.GetEnumerator.Current);
    VT.DeleteChildren(VT.Nodes.GetEnumerator.Current);
    VT.Nodes.GetEnumerator.MoveNext();
  end; }
  VT.Clear();
  //fmTableData.DBGrid1.Columns
  CheckListBox1.Clear;
end;

procedure TfmSettings.FormCreate(Sender: TObject);
var
  Index: Integer;
  VTNodeField : PNodeField;
  //TableSpec : TTableSpec;
begin
 { VT.BeginUpdate();
  //TableSpec:=TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable));
  for Index := 0 to TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).ComponentCount-1 do
  begin
    if TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).Components[Index] is TFieldSpec then
    begin
      VTNodeField:=VT.GetNodeData(VT.AddChild(nil, nil));
      VTNodeField.NameField:=(TTableSpec(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable)).Components[Index] as TFieldSpec).FieldName;
    end;
  end;
  VT.EndUpdate();}
end;

procedure TfmSettings.VTFreeNode(Sender: TBaseVirtualTree; Node: PVirtualNode);
var
  Data: PNodeField;
begin
  Data:=Sender.GetNodeData(Node);
  if Assigned(Data) then
  begin
    Finalize(Data^);
  end;
end;

procedure TfmSettings.VTGetNodeDataSize(Sender: TBaseVirtualTree;
  var NodeDataSize: Integer);
begin
  NodeDataSize:=SizeOf(TNodeField);
end;

procedure TfmSettings.VTGetText(Sender: TBaseVirtualTree; Node: PVirtualNode;
  Column: TColumnIndex; TextType: TVSTTextType; var CellText: string);
var
  Index: Integer;
  VTNodeField : PNodeField;
begin
  VTNodeField:=Sender.GetNodeData(Node);
  for Index := 0 to DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable).ComponentCount-1 do
  begin
    if DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable).Components[Index] is TFieldSpec then
    begin
      VTNodeField:=Sender.GetNodeData(Sender.AddChild(nil, nil));
      VTNodeField^.NameField:=(DBSchema.Tables.FindComponent(fmListOfTables.DisplayTable).Components[Index] as TFieldSpec).name;
    end;
  end;
  CellText:=VTNodeField^.NameField;
end;

procedure TfmSettings.VTNodeClick(Sender: TBaseVirtualTree;
  const HitInfo: THitInfo);
var
  NewVTNodeField : PNodeField;
  NewNode : PVirtualNode;
begin
  {NewNode:=VT.AddChild(VT.FocusedNode);
  NewVTNodeField:=VT.GetNodeData(NewNode); }
end;

procedure TfmSettings.VTNodeDblClick(Sender: TBaseVirtualTree;
  const HitInfo: THitInfo);
var
  NewVTNodeField, CurrentNode: PNodeField;
  NewNode : PVirtualNode;
  //CurrentNode : PDataNode;
  i, j : integer;
begin
 { NewNode:=VT.AddChild(VT.FocusedNode);
  NewVTNodeField:=VT.GetNodeData(NewNode); }
  CurrentNode:=VT.GetNodeData(VT.FocusedNode);
  if IsPrimaryKey(fmListOfTables.DisplayTable, {VT.Text[VT.FocusedNode, 0]} CurrentNode^.NameField) then
    begin
    for i:= 0 to DBSchema.Tables.ComponentCount-1 do
      for j:=0 to TTableSpec(DBSchema.Tables.Components[i]).Constraints.ComponentCount-1 do
      begin
         if (TConstraintSpec(TTableSpec(DBSchema.Tables.Components[i]).Constraints.Components[j]).Reference=fmListOfTables.DisplayTable) then
         begin
             NewNode:=VT.AddChild(VT.FocusedNode);
             NewVTNodeField:=VT.GetNodeData(NewNode);
             NewVTNodeField^.NameField:=(TTableSpec(DBSchema.Tables.Components[i])).Name;
         end;
      end;
    end;
end;

function TfmSettings.IsPrimaryKey(InputTableName : string; InputFieldName: string):Boolean;
var
  i : integer;
  flag: boolean;
begin
  flag:=False;
  for i:=0 to TTableSpec(DBSchema.Tables.FindComponent(InputTableName)).Constraints.ComponentCount-1 do
    begin
      if ((TConstraintSpec(TTableSpec(DBSchema.Tables.FindComponent(InputTableName)).Constraints.Components[i]).ConstraintType='PRIMARY') and (TFieldSpec(TConstraintDetailSpec(TConstraintSpec(TTableSpec(DBSchema.Tables.FindComponent(InputTableName)).Constraints.Components[i]).DetailList).FieldSpec).FieldName=InputFieldName){(TTableSpec(DBSchema.Tables.FindComponent(InputTableName)).Fields.FindComponent(InputFieldName).Name=TConstraintDetailSpec(TConstraintSpec(TTableSpec(DBSchema.Tables.FindComponent(InputTableName)).Constraints.Components[i]).DetailList).FieldName)}) then
        flag:=True;
      Edit1.Text:=TConstraintSpec(TTableSpec(DBSchema.Tables.FindComponent(InputTableName)).Constraints.Components[i]).Name;
      Edit2.Text:=AnsiToUtf8(TFieldSpec(TConstraintDetailSpec(TConstraintSpec(TTableSpec(DBSchema.Tables.FindComponent(InputTableName)).Constraints.Components[i]).DetailList).FieldSpec).FieldName);
      Edit3.Text:=InputFieldName;
    end;
  Result:=flag;
end;
end. 
```

选择更改列顺序的程序代码

```
procedure TfmSettings.CheckListBox1DragDrop(Sender, Source: TObject; X,
  Y: Integer);
var
  Num1, Num2, temp: Integer;
  Point1, Point2: TPoint;
begin
  Point1.X:=NumX;
  Point1.Y:=NumY;
  Point2.X:=X;
  Point2.Y:=Y;
  with Source as TCheckListBox do
  begin
    Num2:=CheckListBox1.ItemAtPos(Point1,True);
    Num1:=CheckListBox1.ItemAtPos(Point2,True);
    CheckListBox1.Items.Move(Num2, Num1);
    if Num2>Num1 then
        begin
           temp:=Num2;
           Num2:=Num1;
           Num1:=temp;
        end;
    fmShowData.DBGrid1.Columns[Num1].Index:=Num2;
    fmShowData.DBGrid1.Columns[Num2+1].Index:=Num1;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:59:15.830

如果然后 checklistbox 是相应操作的字段的表示

```
CheckListBox1.Items.Move(Num2, Num1); 
```

将会

```
DBGrid1.Columns[num2].Index := DBGrid1.Columns[num1].Index; 
```

没有更多或更少。

// 删除注释 thx 到 jachguate

# javascript - 清除克隆字段集中的数据

> ID：13908730
> 
> 赞同：0
> 
> 时间：2012-12-17T05:25:52.793
> 
> 标签：javascript, jquery

现在克隆的字段集没有按照我的意图保留前一个字段集中的数据。感谢 RobG 和 ATOzTOA 的所有帮助。

我现在遇到的唯一问题是日历在克隆的字段集中不起作用。

我浏览了几个与我有同样问题的线程，对于在该主题上创建另一个线程，我深表歉意。

日历下拉脚本。

```
<!-- calendar dropdown -->
<script>
$(document).ready(function() {    
$("#datepicker").datepicker();      
});    
</script> 
```

用于克隆字段集的脚本。

```
<!-- clone fieldset -->          
<script>
var _counter = 0;
function Add() {
_counter++;
var oClone = document.getElementById("template").cloneNode(true);
oClone.id += (_counter + "");
document.getElementById("placeholder").appendChild(oClone);
var inputs = oClone.getElementsByTagName('input');
for (var i=0, iLen=inputs.length; 
i<iLen; i++) {
inputs[i].value = '';
}
}
</script> 
```

要克隆的字段集。

```
<div id="placeholder">
<!-- template -->
<div id="template">
<!-- event fieldset -->
<fieldset>           
  <label class="field-first" required>Event: &#42;<input type="text" name="event" value="" /></label>
  <label class="field-first" required>Date: &#42;<input type="text" id="datepicker" name="date" value="" /></label>
  <label class="field-first" required>Net Request Amount: &#42;<input type="text" name="request" value="" /></label>

  <div class="description"><p>Please type a <strong><em>DETAILED</em></strong> description of the item/event/activity:<br /></p></div>

  <textarea name="describe" cols="60" rows="10" required></textarea>
<!-- event fieldset -->
</fieldset>
<!-- template -->      
</div>
<!-- placeholder -->
</div> 
<!-- buttons -->
<button class="right-button" type="submit" name="submit" value="Submit">Submit</button>
<button class="left-button" "btn" type="button" name="Submit"  onclick="Add();">Add New Event</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:29:14.230

您必须遍历框架集中的每个元素并将 text() 设置为“”。

```
var div = document.getElementById('template'):
var labels = div.getElementsByTagName('label');
for (var i = 0; i < divs.length; i += 1) {
  code = labels[i].innerHTML;
    // As there is a input element inside the label, we have to modify the HTML code
    codeArray = code.split('&lt');
    codeArray[0] = '';
    code = codeArray.join('&lt;');
    labels[i] = code;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:06:41.720

大概您正在向标签添加内容。您可以使用`getElementsByTagName`从克隆中获取标签，然后将它们的 innerHTML 设置为 ''（空字符串）以删除任何子节点（或遍历子节点并删除它们，但设置 innerHTML 属性更简单）。在遍历标签时，您可以修改可能需要它的任何其他属性。

如果您只想清除输入元素的值，相同的策略只使用`getElementsByTagName('input')`并将其`value`属性设置为 ``（空字符串）。

请注意，您有三个名称为“first_name”的输入元素。当他们似乎都不是名字时，这样做似乎不是一个好主意。使用代表他们持有的数据或数据用途的名称。似乎也没有必要拥有一个 ID 为“datepicker”的人。删除 ID，或者如果您需要它（不太可能），修改该值，使其对每个克隆片段都是唯一的。

### 编辑

用于`getElementsByTagName`将输入值设置为“”：

```
var inputs = oClone.getElementsByTagName('input');

for (var i=0, iLen=inputs.length; i<iLen; i++) {
    inputs[i].value = '';
} 
```

# android - 如何查看最新的 Android Facebook 应用程序的 CSS？

> ID：13908731
> 
> 赞同：0
> 
> 时间：2012-12-17T05:25:55.830
> 
> 标签：android, css

如何查看最新的 Android Facebook 应用程序的 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:27:21.460

最新的 Facebook 应用程序是使用本机代码编写的。他们放弃了 HTML 5。

# linux - 将一个文件的内容移动到另一个文件

> ID：13908743
> 
> 赞同：0
> 
> 时间：2012-12-17T05:27:21.273
> 
> 标签：linux, bash

我有 2 个包含 pdb 文件的文件夹。这两个文件夹中的文件名相同。我想将文件夹 1 中文件的内容移动到文件夹 2 中的相应文件中。

```
1T15.pdb file in folder1   

ATOM     15  OD1 ASP A 197      20.828  -9.158  15.428  1.00 57.11           O
ATOM     16  OD2 ASP A 197      20.170 -11.065  14.548  1.00 56.80           O
ATOM     17  N   GLU A 198      25.562  -8.839  13.516  1.00 51.61           N 

1T15.pdb file in folder2

ATOM     54  CZ  ARG A 201      34.442 -11.903  22.369  1.00 35.51           C
ATOM     55  NH1 ARG A 201      33.939 -12.599  23.386  1.00 34.12           N               
ATOM     57  N   ALA A 202      35.516 -11.657  16.626  1.00 40.91           N 
ATOM     58  CA  ALA A 202      36.455 -11.766  15.529  1.00 49.63           C 
```

期望的输出

```
 ATOM     54  CZ  ARG A 201      34.442 -11.903  22.369  1.00 35.51           C 
 ATOM     55  NH1 ARG A 201      33.939 -12.599  23.386  1.00 34.12           N
 ATOM     57  N   ALA A 202      35.516 -11.657  16.626  1.00 40.91           N
 ATOM     58  CA  ALA A 202      36.455 -11.766  15.529  1.00 49.63           C
 ATOM     15  OD1 ASP A 197      20.828  -9.158  15.428  1.00 57.11           O
 ATOM     16  OD2 ASP A 197      20.170 -11.065  14.548  1.00 56.80           O
 ATOM     17  N   GLU A 198      25.562  -8.839  13.516  1.00 51.61           N 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:30:19.590

一种常见的方法是使用`basename`：

```
for i in folder1/*.pdb; do cat "$i" >> folder2/"$(basename $i)"; done 
```

`>>`如果文件不存在，将创建该文件，否则附加到它。

# ruby - Ruby 的 stdlib Logger 类可以安全地处理来自多个进程的写入器吗？

> ID：13908745
> 
> 赞同：14
> 
> 时间：2012-12-17T05:27:39.587
> 
> 标签：ruby, logging

我正在开发一个需要进行日志记录的 Ruby 库。理想情况下，我希望多个工作进程能够登录到同一个文件。查看来自 Ruby 标准库的类的源代码，我看到正在努力将多个线程的写入同步到日志中（正如对[Is Ruby's stdlib Logger class thread-safe?](https://stackoverflow.com/questions/4660264/is-rubys-stdlib-logger-class-thread-safe)`Logger`的回答所指出的那样）。

当多个进程写入同一个日志文件时，似乎存在类似的问题：根据底层决定缓冲/拆分写入的方式，每个日志消息可能无法保持其完整性。

那么，有没有办法使用标准`Logger`类来允许多个进程安全地登录到单个文件？如果不是，这通常如何在 Ruby 项目中完成？

这就是我所说的“安全”的意思：

1.  每个日志行都是“原子的”——完整地出现，在下一条消息开始之前不间断。例如，什么都不像`[1/1/2013 00:00:00] (PID N) LOGMESS[1/1/2013 00:00:01] (PID M) LOGMESSAGE2\nAGE1`
2.  日志消息不需要在进程之间严格排序，只要出现在日志中的时间戳是正确的。

**更新**：

我决定接受铁皮人的建议并编写一个测试，你可以在这里找到： [https ://gist.github.com/4370423](https://gist.github.com/4370423)

简短版本：Winfield 是正确的，至少默认使用`Logger`它可以安全地同时从多个进程中使用（对于上面给出的“安全”的定义）。

关键因素似乎是，如果给定文件路径（而不是已经打开的 IO 对象），Logger 将使用 mode 打开文件`WRONLY|APPEND`，并`sync=true`对其进行设置。这两件事的结合（至少在我在 Mac OS X 上的测试中）似乎可以安全地从多个进程同时登录。如果要传入一个已经打开的 IO 对象，只需确保以相同的方式创建它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T19:00:22.183

是的，您可以按照您描述的方式安全地将交错的日志数据写入单个日志文件。

但是，您最好为每个进程记录一个单独的日志，或者使用像 syslog 这样的整合日志系统。这里有几个原因：

*   日志轮换/管理：当您必须协调多个进程的信号时，截断/滚动日志文件很困难
*   即使您注入 PID 以消除歧义，交错的数据也会令人困惑

我目前正在使用单个日志文件管理每个系统的多个 Resque 工作人员，并希望我为每个工作人员分离了一个日志文件。调试问题和正确管理日志一直很困难。

# java - 如果初始化不好，从构造函数返回是一个好习惯吗？

> ID：13908753
> 
> 赞同：1
> 
> 时间：2012-12-17T05:28:47.777
> 
> 标签：java, exception-handling, constructor

这是演示，

```
public class MyClass {
    public MyClass(String str) {
        if (null == str)
            return;

        mStr = processInput(str);
        mMember1 = initMember1();
        // ... some other initialization
} 
```

像上面这样，是好是坏？
如果它返回，我们可能会得到一个没有正确初始化的构造对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:32:14.547

这取决于。

如果您的类可以`null`在传递给构造函数并绕过初始化的情况下正常运行，那么就可以了。

如果您的班级不能，则抛出异常，如果不是已检查异常，则通常`IllegalArgumentException`.

看起来这个构造函数是一个方便的构造函数，相当于：

```
MyClass o = new MyClass();
o.doSomethingWithString(str); 
```

如果是这样，更好的方法可能是使用[流利的接口](http://en.wikipedia.org/wiki/Fluent_interface)模式，其中方法返回`this`（在可能的情况下），因此您可以编写代码：

```
MyClass o = new MyClass().doSomethingWithString(str); 
```

在这里，方法`doSomethingWithString()`不是被声明为`void`，而是返回类型为`MyClass`，最后一行是`return this;`。这种模式对于链接对方法的调用很方便，即`o.doX().setY(y).doZ();`等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:43:23.823

这可能会更好。

```
public class MyClass {
    public MyClass(String str) {
        if (null == str){
            throw new YourException("Your message");
        }
        mStr = processInput(str);
        mMember1 = initMember1();
        // ... some other initialization
} 
```

IMO，从构造函数返回是一种不好的做法。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T05:30:31.903

如果构造函数无法将对象置于有用状态，那么最防弹的合同可能是构造函数抛出异常。

假设调用者会检查任何内部错误标志是危险的。

推迟引发异常只会从实际故障点中移除故障点识别，从而更难定位根本原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T05:33:57.973

当您从构造函数返回时，它仍然会创建对象，但不会在返回后初始化其余代码。如果你的班级可以正常行事，那就没关系。如果初始化其余部分至关重要，但您不能，则抛出异常让发件人知道出现问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T17:36:17.860

您需要做的第一件事是标记该类`final`。然后你可以继续处理部分对象，你想做的是抛出类似 a`SecurityException`或 an 的东西`IllegalStateException`。我通常倾向于 ，`SecurityException`因为它表明有恶意的人可能会拿走该部分对象并做坏事。的使用`final`将有助于防止有人扩展部分对象并在您的系统中乱跑。

# ios - 如何在不知道索引的情况下检查 NSMutableArray 中是否存在对象，如果存在则在 iOS 中替换它？

> ID：13908754
> 
> 赞同：1
> 
> 时间：2012-12-17T05:28:50.893
> 
> 标签：ios, nsmutablearray, fast-enumeration

我有一个`NSMutableArray`包含 Person 类型的对象。Person 对象包含`NSString`*name、`NSString`*dateStamp 和`NSString`*testScore 参数。我想使用快速枚举做的是检查`NSMutableArray`*testResults，看看是否存在具有相同名称参数的对象。

如果是这样，那么我想将 , 中的现有对象替换为`NSMutableArray`我将要插入的对象，该对象将具有最新的`dateStamp`, 和 testScore 值。如果找到没有匹配名称参数的对象，则只需插入我拥有的对象。

到目前为止，我的代码如下所示：

这是创建我要插入的对象的代码：

```
Person *newPerson = [[Person alloc] init];
    [newPerson setPersonName:newName]; //variables newName, pass, and newDate have already been 
    [newPerson setScore:pass];      //created and initialized
    [newPerson setDateStamp:newDate]; 
```

这是我尝试遍历 NSMutableArray 以查看是否已存在具有相同名称参数的对象的代码：

```
for (Person *checkPerson in personList) { //personList is of type NSMutableArray

        if (newPerson.newName == checkPerson.name) {

           //here is where I need to insert the code that replaces checkPerson with newPerson after a match has been found   

        }

        else {

             personList.addObject(newPerson); //this is the code that adds the new object to the NSMutableArray when no match was found.
    }

} 
```

这不是一个非常复杂的问题，但我很困惑如何寻找匹配项，然后在不知道对象所在索引的情况下替换实际对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T05:49:17.460

您想使用 indexOfObjectPassingTest 来查找匹配项：

```
 NSInteger indx = [personList indexOfObjectPassingTest:^BOOL(Person *obj, NSUInteger idx, BOOL *stop) {
        return [obj.name isEqualToString:newPerson.name];
    }];
    if (indx != NSNotFound) {
        [personList replaceObjectAtIndex:indx withObject:newPerson];
    }else{
        [personList addObject:newPerson];
    } 
```

请注意，我使用 isEqualToString: 来比较两个字符串而不是 ==。这个错误已经在这个论坛上被询问和回答了一百万次。

您的命名有些不一致。在问题中，您说 Person 对象有一个 name 属性，但是当您创建一个新人时，您使用 setPersonName，这意味着属性名称是 personName。我假设，只是在我的答案中命名。

# java - Hibernate 映射没有连接表的映射

> ID：13908756
> 
> 赞同：1
> 
> 时间：2012-12-17T05:29:03.357
> 
> 标签：java, hibernate, jpa

我正在尝试使用休眠来映射这样的对象：

```
@Entity
public class ParentClass {  
    @Id
    @GeneratedValue
    int Id;

    @OneToMany
    Map<String, ChildClass> map;
}

@Entity
public class ChildClass {
    @Id
    @GeneratedValue
    int Id;

    String text;
} 
```

我不希望 Hibernate 创建一个连接表。我希望它为 ChildClass 的表添加一列。我也不想为 ChildClass 中的键添加字段。理想情况下，当保存对象时，Hibernate 会自动获取映射中的键并将其保存在相应的表中，并在查询时执行相反的操作。这可能吗？

如果我必须向 ChildClass 添加一个字段作为键，休眠可以使用地图中的键自动填充此字段吗？我问的原因是因为我从 JSON Web 服务获取数据并使用 Jackson 解析它，我不知道有一种方法可以让 Jackson 将键复制到值对象中的字段。我可以编写代码手动执行此操作，但我宁愿避免这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:47:48.927

没有可连接的单向关系：

```
@Entity
public class Customer implements Serializable {
    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinColumn(name="CUST_ID")
    public Set<Ticket> getTickets() {
    ...
}

@Entity
public class Ticket implements Serializable {
    ... //no bidir
} 
```

双向无接头：

```
@Entity
public class Troop {
    @OneToMany(mappedBy="troop")
    public Set<Soldier> getSoldiers() {
    ...
}

@Entity
public class Soldier {
    @ManyToOne
    @JoinColumn(name="troop_fk")
    public Troop getTroop() {
    ...
} 
```

它来自文档：[http](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)
://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/ 将这些示例应用于您的案例。

# input - getelementsbyname 不返回任何值

> ID：13908764
> 
> 赞同：1
> 
> 时间：2012-12-17T05:30:21.157
> 
> 标签：input, getelementsbyname

我花了一整天的时间阅读教程，但似乎找不到这个基本问题的答案。

我要做的就是访问输入字段的值。我制作了一个基本的存根来尝试自学。期望的行为是，当我单击“提交”按钮时，我应该收到一个带有数字字段“点”值的警报。但是，当我将以下代码放入我的网站时，然后单击提交按钮，没有任何反应。

```
<script type="text/javascript">
    function checknumber()
    {
        var testnumber=document.getelementsbyname("points").value;
        alert(testnumber);
    }
</script>
<input type="number" name="points" value="1">Points<br>
<input type="submit" onclick="checknumber();"> 
```

我究竟做错了什么？

顺便说一句，如果我去掉“getelementsbyname”这一行并按如下方式更改脚本：

```
function checknumber()
{
    var testnumber="hello world";
    alert(testnumber);
} 
```

然后一切正常，我收到一个警报弹出窗口，其中包含文本“hello world”，完全符合预期。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T06:32:44.563

因为`getElementsByName`返回一个`HTMLCollection`. 所以你必须使用：

```
function checknumber()
{
    var testnumber=document.getElementsByName("point")[0].value;
    alert(testnumber);
} 
```

或者

```
function checknumber()
{
    var testnumber=document.getElementsByName("point")[0].value;
    alert(testnumber);
} 
```

[这是demo](http://jsbin.com/awevay/4/edit)（点击Run with JS，输入任意数字，点击按钮，弹出提示）。

# android - 为什么 AndroidManifest 中的某些配置进入“应用程序”部分而有些没有？

> ID：13908768
> 
> 赞同：1
> 
> 时间：2012-12-17T05:31:07.080
> 
> 标签：android, android-manifest

在编写 Android 清单时，我必须将一些配置放入“应用程序”部分（例如活动列表）和一些外部（例如使用 SDK）。为什么？有什么一般规则在“应用程序”部分里面，什么在外面？还是 Android 开发者的纯随机任意决定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:35:12.780

不是真正的编程问题。如果您关注 AOSP 的提交历史，您可能会得到答案。或者追踪安迪鲁宾并问他:)

使用当前布局，理论上您可以在同一个 APK 中拥有多个应用程序。所有应用程序共有的东西将位于最高级别（`uses-sdk`等），其他所有内容都在相应的`<application>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:34:34.247

这绝对不是一个随机的决定。格式就像您定义了与任何应用程序相关的配置，例如标签内的活动和服务，因为它们当然与您的应用程序相关。以及您使用的通用库和标签之外的权限，它们可以补充您的应用程序。

[在此处](http://developer.android.com/intl/zh-CN/guide/topics/manifest/manifest-intro.html)记下清单文件的结构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:35:57.277

要详细了解概念，请尝试[此处。](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

# asp.net-mvc-4 - 使用 IEnumerable 的 MVC 视图过滤

> ID：13908775
> 
> 赞同：0
> 
> 时间：2012-12-17T05:31:53.290
> 
> 标签：asp.net-mvc-4

在 MVC4 中需要列出一组客户端。我通过创建 2 个模型 ClientList 和 Client 模型来实现这一点。我将 ClientList 类设置为可序列化的。现在需要为这个模型应用各种参数的过滤条件。如何做到这一点？这是我的模型。

```
public class Client : Paging
{
    public virtual string CompanyName { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
}

[Serializable]
public class ClientList : Paging
{
    private Client _client;
    public Client Client
    {
        get { return _client; }
        set { _client = value;  }
    }
} 
```

在数据访问中，我正在使用这个

```
while (reader.Read())
                    {
                        var rCompanyName = reader.GetOrdinal("CompanyName");
                        var rFirstName = reader.GetOrdinal("FirstName");
                        var rLastName = reader.GetOrdinal("LastName");

                        var resultClientList = new Client
                                                   {
                                                       CompanyName = Convert.IsDBNull(rCompanyName) ? string.Empty : reader.GetString(rCompanyName),
                                                       FirstName = Convert.IsDBNull(rFirstName) ? string.Empty : reader.GetString(rFirstName),
                                                       LastName = Convert.IsDBNull(rLastName) ? string.Empty : reader.GetString(rLastName)

                                                   };
                        var clients = new ClientList();
                        admin.Client = resultClientList;
                        result.Data.Add(clients);
                    } 
```

鉴于，

```
@model IEnumerable<Midlab.FreightOnce.BusinessObjects.ClientList
@*i need filter condition here*@
@foreach (var item in Model)
{
--rendering list here
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:43:15.673

我建议的初学者最简单的方法是，在控制器中创建两种不同的方法，以及与这些控制器关联的两个视图。第一个控制器函数将是一个 get 函数，与此关联的视图将打开过滤器列表，用户将选择过滤条件并提交它，第二个控制器函数是一个 post 函数将接收请求，根据过滤条件获取记录并将 IEnumerable 列表中的响应返回到第二个视图。另一种方法是使用 JQuery.ajax 调用。

# java - UML 类图

> ID：13908776
> 
> 赞同：2
> 
> 时间：2012-12-17T05:31:55.707
> 
> 标签：java, uml, class-diagram

我在java中有一个没有属性和方法的主类。它只包含一个调用其他类方法的主方法。如何在 UML 类图中显示这个类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:44:03.387

您应该使用**关联**来显示这种关系。仅通过用直线连接两个类来显示关联。

如果您还想显示关联方向，则可以使用定向箭头。

![在此处输入图像描述](../Images/79dddf18d61995fa015e5f3175abb743.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:57:38.063

您应该质疑您是否需要该课程。它听起来不像是作为一个对象执行，而是它是一个在 OO 上下文中没有意义的超类（即：它在您的主题中没有任何意义，除了 main 方法之外没有任何状态并且不执行任何操作）。

这没什么错，但它不被认为是好的做法。我会考虑将该主要方法合并到另一个在您的应用程序中有意义的类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:39:10.657

我想你可以看看一些教程：
1\. [UML 入门](http://www.uml.org/)
2.[类图](http://www.ibm.com/developerworks/rational/library/content/RationalEdge/sep04/bell/)

# jquery - 如何解决 jQuery DatePicker 错误？

> ID：13908780
> 
> 赞同：1
> 
> 时间：2012-12-17T05:32:22.603
> 
> 标签：jquery, datepicker

我正在使用 jQuery DatePicker，它显示 2009 年 11 月的错误日期。

这是一个已知的错误？我该如何解决？

我从 stack 得到以下答案。

```
printDate.setUTCDate(printDate.getUTCDate() + 1); 
```

对此

```
printDate.setDate(printDate.getDate() + 1); 
```

我`printDate.setDate(printDate.getDate() + 1);`在文件名中的代码中遵循了上述过程`ui.datepicker.js`。但仍然显示相同的问题。在我的日历 nov 04 中显示了两次。谁能帮帮我吗？

# ruby-on-rails - 如何从日期范围查询中查找表中的一组缺失日期

> ID：13908782
> 
> 赞同：2
> 
> 时间：2012-12-17T05:32:37.940
> 
> 标签：ruby-on-rails, gaps-and-islands, rails-postgresql

有一些与我的问题相关的 stackoverflow 帖子，但并不完全相似。

在将用户指定的日期范围与 postgresql 中的汇总表进行比较后，我想要一个高效且有点优雅（如果可能）的解决方案来获取缺失日期的数组。我知道的一种方法是将范围放在日期列表中，然后通过查询 EXIST 或 if result == nil?/empty? 等单独与所有日期进行比较。但是如果用户要做一个大范围，这可能会消耗资源并且速度很慢。

除了当前列出的方法之外，还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-11T22:44:02.467

首先，我们需要对日期进行排序。在红宝石中，这很简单

```
sorted_dates = dates.sort 
```

如果您知道日期已排序，则只需从第一个日期开始，并在您遍历日期范围时递增一个。如果您的数组中的下一个日期不是您预期的日期，请将缺少的日期添加到您的 missing_dates 数组中，并继续递增直到您到达包含的日期。

此代码可能如下所示：

```
def find_missing_dates(sorted_dates)
  current_date = sorted_dates[0]
  missing_dates = Set.new
  sorted_dates.each do |date|
    while current_date != date
      missing_dates << current_date
      current_date += 1.day
    end
    current_date += 1.day
  end
end 
```

对于平均情况，这是 O(N)，因此为了提高效率，我们可以分成两半并递归。

```
def dates_between(lower, upper)
  (lower..upper).to_a - [lower,upper]
end

def find_missing_dates(sorted_dates, missing_dates = Set.new)
    min_date = sorted_dates[0]
    max_date = sorted_dates[-1]
    if (min_date - max_date).to_i == (sorted_dates.count - 1)
      missing_dates
    else
      middle_date_lower = sorted_dates[sorted_dates.count / 2 - 1]
      middle_date_upper = sorted_dates[sorted_dates.count / 2]
      unless (middle_date_upper - middle_date_lower) == 1
        missing_dates.merge(dates_between(middle_date_lower, middle_date_upper))
      end
      find_missing_dates(sorted_dates[0..(sorted_dates.count/2 - 1)], missing_dates).merge(find_missing_dates(sorted_dates[(sorted_dates.count/2)..-1]))
    end
end

find_missing_dates(sorted_dates) 
```

这仍然是最坏情况 O(N)，但平均情况是 O(log N)

# java - gson 的堆内存问题

> ID：13908786
> 
> 赞同：2
> 
> 时间：2012-12-17T05:33:12.943
> 
> 标签：java, json, streaming, gson

我已经使用 gson 将 json 解析为 java 对象。

[将 Json 转换为 Java 示例代码](https://stackoverflow.com/questions/13873887/issue-with-parse-json-to-java-object-using-gson)

现在我在 eclispe 中面临堆内存问题，与： [Java heap space with GSON 相同](https://stackoverflow.com/questions/13119082/java-heap-space-with-gson)

正如我提到的gson-streaming文章一样

1.  [gson 流式传输](https://sites.google.com/site/gson/streaming)
2.  [gson-streaming-to-read-and-write-json](http://www.mkyong.com/java/gson-streaming-to-read-and-write-json/)

两者都有关于流媒体的讨论，例如，

**Gson 流处理速度很快，但难以编码，因为您需要处理处理 JSON 数据的每一个细节。**

我已使用通信对象进行客户端和服务器通信。通信结构是这样的

```
class CommunicationObject
{
//Other variables
IsBean isBean; //Interface of hibernate entity bean
//Getter & setter methods
} 
```

在访问任何单个实体 bean 时，这里的 isBean 作为泛型。没有案例

```
->Do login logic then isBean has a user object
->Get organization then isBean has a Organization object.
...
etc 
```

处理请求方法的代码：

```
public String processFacadeActionTest(String requestJson) { 
        Gson gson = new GsonBuilder().registerTypeAdapter(IsBean.class, new InterfaceAdapter<IsBean>())
                .create();
        CommunicationObject requestObj=null;
        try{
         requestObj=gson.fromJson(requestJson, CommunicationObject.class);
        }catch (Exception e) {
         e.printStackTrace();

        }
        FacadeActionHandler actionHandler=new FacadeActionHandler();
        CommunicationObject responseObj =  actionHandler.handleRequest(requestObj);
        String returnString="";
        try{
            //TODO:Comment Bhumika heap space issue
            returnString=convertIntoJson(responseObj);
        return returnString;
        }catch (Exception e) {
            e.printStackTrace();
        }
        return returnString;
} 
```

将对象转换为 json

```
private String convertIntoJson(CommunicationObject obj) throws IOException
    {
        ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
        DataOutputStream out = new DataOutputStream(outputStream);
        writeJsonStream(out, obj);
        return outputStream.toString();
    } 
```

使用 gson 进行流式传输

```
private void writeJsonStream(OutputStream out,CommunicationObject communicationObject) throws IOException {
                JsonWriter writer = new JsonWriter(new OutputStreamWriter(out, "UTF-8"));
                writer.setIndent("  ");
                writer.beginArray();
                Gson gson = new GsonBuilder().registerTypeAdapter(IsBean.class, new InterfaceAdapter<IsBean>())
                        .create();
                  gson.toJson(communicationObject, CommunicationObject.class, writer); //Hear stuck how to map isBean object
                writer.endArray();
                writer.close();
            } 
```

我被困在**gson.toJson(communicationObject, CommunicationObject.class, writer)** 我怎样才能在这样的请求对象上进行流式传输？或任何其他可用的替代方案？让我知道仍有任何疑问。

# erlang - Erlang 中的默认警报行为

> ID：13908789
> 
> 赞同：0
> 
> 时间：2012-12-17T05:33:41.570
> 
> 标签：erlang

根据 Erlang memsup 文档：

```
system_memory_high_watermark = float()

The threshold, as percentage of system memory, for how much system memory can be allocated before the corresponding alarm is set. Te default is 0.80 (80%) 
```

设置此警报时的默认行为是什么，以防相应的警报处理程序不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:10:54.077

引用[alarm_handler](http://www.erlang.org/doc/man/alarm_handler.html)文档：

> 警报处理程序进程是一个 gen_event 事件管理器进程，它在系统中接收警报。此过程并非旨在成为完整的警报处理程序。它定义了可以发送警报的位置。启动时在警报处理程序中安装了一个简单的事件处理程序，但鼓励用户编写和安装自己的处理程序。

所以安装了一个默认的警报处理程序，我认为它根本什么都不做。您可以编写自己的并将其附加到警报处理程序以对发送的警报做出反应。

如果您的问题是如果在启动 os_mon 时未启动 SASL 会发生什么，这是不可能的：请参阅[此处](http://comments.gmane.org/gmane.comp.networking.rabbitmq.general/2252)

# image-processing - 图像处理技术可以通过图像验证测试吗？

> ID：13908796
> 
> 赞同：2
> 
> 时间：2012-12-17T05:34:25.523
> 
> 标签：image-processing, captcha

前段时间我问[了这个问题](https://stackoverflow.com/questions/13368133/calculating-the-coordinates-for-the-center-of-a-circle-in-an-image)。

我的朋友想使用颜色区分来获得圆心。为什么机器人不能做同样的事情来通过用于防止垃圾邮件的测试？

![在此处输入图像描述](../Images/b3d1a0e242d694f45e7f7727c56b57a5.png)

它不会一直准确，但它会解决一些测试。通过测量字母和背景颜色的位置，这还不足以一一知道字母吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:12:00.517

我和你在一起，我认为它可以以不错的成功率完成。但是，由于每个验证码的变形算法各不相同，有时甚至让人类更难以识别，我认为只是出于实际原因尚未完成。

如果您需要不同的算法或为每个站点训练不同的版本，则可能不值得付出努力。虽然，我相信它迟早会发生。

# objective-c - 是否可以让用户在 iOS 中手动将铃声导入我的应用程序？

> ID：13908797
> 
> 赞同：2
> 
> 时间：2012-12-17T05:34:26.557
> 
> 标签：objective-c, ios

我知道在 iOS 中无法访问铃声，但用户是否可以将铃声导入我的应用程序以供使用？我已阅读有关 iTunes 文件共享的信息，但我不想这样做。是否可以让用户在他们的设备上手动搜索他们的铃声/音频文件并选择它（就像我制作了一个文件浏览器）并将其添加到我的应用程序中？另一种选择，我可以将它放在我的一个服务器中，比如用户将其上传到我的服务器，然后应用程序可以访问它以下载并将其保存到手机？我的想法不多了，哈哈。如果这是不可能的，那么看起来我将放弃这个想法并使其成为仅限 Android 的应用程序。我希望它同时适用于 iOS 和 Android。如果不可能，我该怎么办。智者有话说吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:51:21.930

AudioToolbox 中有一个选项`AudioServicesPlaySystemSound`。在此处查看[文档。](http://developer.apple.com/library/mac/documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html#//apple_ref/c/func/AudioServicesPlaySystemSound)我不确定这可以用来访问铃声。这应该会引导你走向正确的方向。

> 此功能播放短声（持续时间为 30 秒或更短）。因为声音可能会播放几秒钟，所以这个函数是异步执行的。要知道声音何时播放完毕，请调用 AudioServicesAddSystemSoundCompletion 函数来注册回调函数。

不确定Apple是否允许使用它，但看起来可以使用。

# string - 将两个字符串连接在一起而不在 Ruby on Rails 中添加？

> ID：13908802
> 
> 赞同：2
> 
> 时间：2012-12-17T05:34:47.850
> 
> 标签：string, join, ruby-on-rails-3.2

如何在不将它们相加的情况下将两个字符串（都是数字）连接在一起？例如：

```
@output = 2567 + 18 
```

**我不想要的：**

结果返回“2585”（它以数学方式将两个数字相加）。

**我想要什么：**

结果返回“256718”。如您所见，这一次这两个数字已连接在一起，而不是相加。

# 一个真实的例子：

```
Profile.create(:permalink => 2585 && User.last.id) 
```

当我从我的模型中运行该行时 - 标题为“永久链接”的行只是获取最后创建的用户 ID，并且“2585”没有连接在它前面。此外，如果我使用“+”方法**而不是**像第一个示例中的“&&”，则这两个数字在数学上相加。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:48:17.193

将两个值都转换为字符串。第一个使用字符串文字，第二个使用该`to_s`方法进行显式转换。

```
Profile.create(:permalink => "2585" + User.last.id.to_s) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T05:54:46.433

我认为您可以先尝试将**数字**s 转换为 **string**。对于你的例子

```
@output = "2567" + "18" 
```

或者

```
@output = (2567.to_s) + (18.to_s) 
```

都会得到 256718，这就是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:44:09.880

我不太了解 Ruby，但我认为使用字符串文字会告诉解释器您想要做什么。尝试：

```
Profile.create(:permalink => "2585" + User.last.id) 
```

# regex - 带 NOT 操作的 PCRE 正则表达式

> ID：13908803
> 
> 赞同：8
> 
> 时间：2012-12-17T05:34:51.427
> 
> 标签：regex

是否可以在正则表达式中使用与 NOT 操作等效的东西，以便仅当字符串在给定位置不包含某个字符时才匹配该字符串？

我看到元字符说 ^ 可能意味着“否定一个类”，但我很难找到它的使用示例。而且那个特定的字符与字符串的开头是模棱两可的，所以它也有点混乱。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T05:45:26.213

是的，它们被称为**前瞻性否定断言**，例如`some_re(?!not_on_my_watch)`

你也可能对此有兴趣：

*   *回顾*否定断言，`(?<!not_even_before_my_watch)`
*   和否定字符类`[^\d\sa-z]`

您可能还想查看相关的[pcre/php 文档中的断言](http://php.net/manual/en/regexp.reference.assertions.php)。
看看你是否发现其他一些有趣的东西。

**请注意：**否定断言~~可能~~ *会*与您的意愿相匹配，在字符串中的位置，您没有想到。准备好：

*   大量的尝试和错误，
*   充分理解贪婪修饰符的用法`.*?`
*   开始考虑奇怪的结构，比如[一次性子模式](http://php.net/manual/en/regexp.reference.onlyonce.php)和[条件子模式](http://php.net/manual/en/regexp.reference.conditional.php)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T05:40:04.663

```
 'foo[^b]ar' 
```

将匹配以but开头`foo`和结尾的任何内容。所以它否定了类，它也可以是一个字符列表（并且接受使用范围，例如：跳过 b、c、d）。`ar``foobar``[^b]``[^b-d]`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T05:38:19.380

某个字符（例如`x`）不在*特定*位置（例如位置 5）的正则表达式是：

```
^.{4}[^x] 
```

某个字符（例如`x`）不在*任何地方*的正则表达式是：

```
^(?!.*x) 
```

# ruby-on-rails - 导轨命名约定 - “燃料”

> ID：13908809
> 
> 赞同：1
> 
> 时间：2012-12-17T05:35:17.003
> 
> 标签：ruby-on-rails, naming-conventions

我有一个名为燃料的表，用于存储车辆燃料数据。谁能建议控制器的正确命名约定？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:44:41.393

我个人认为你可以继续使用“Fuel”，因为对我来说，让它复数看起来很奇怪。

你的表' `fuel`'：

*所以你的模型是*

```
class Fuel < ActiveRecord::Base
  set_table_name "fuel"

  #your code 
end 
```

*控制器*

```
class FuelController < ApplicationController
  #controller code
end 
```

*路线 (config/routes.rb)*

```
resources :fuel #assuming you have a resource for this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:54:50.543

从你给我们的有限信息来看，我会这样想：它是关于燃料的数据，而不是真正的燃料单位。我会去的`FuelDatum`。Rails 将正确地复数，因此您将拥有一个名为`fuel_data`.

OTOH，如果你告诉我们更多关于那里有哪些字段，我们可能会想出一些更干净的东西。例如，为什么一辆车有很多？比如，到底代表什么？你越明确，就越容易变成一个好名字。

# oracle - 在.net中的oracle中创建表，参数错误

> ID：13908810
> 
> 赞同：0
> 
> 时间：2012-12-17T05:35:22.963
> 
> 标签：oracle, parameters, oledbdataadapter

我正在使用 Oracle 10 G 数据库

```
 Drop Table yassin; 
Create Table yassin as Select  
              sad_gen.key_dec,
              sad_gen.key_year,
              sad_gen.sad_typ_proc,
              sad_gen.sad_asmt_nber,
              sad_gen.key_cuo,
              sad_gen.sad_reg_nber,
              sad_gen.sad_reg_date,
              sad_gen.sad_asmt_date,
              sad_gen.sad_dec_date,
              sad_gen.sad_exporter,
              sad_gen.sad_stat_val,
              sad_gen.key_nber,
              sad_gen.sad_itm_total,
              sad_gen.sad_pack_total,
              sad_gen.sad_consignee,
              sad_gen.sad_cty_1dlp,
              sad_gen.sad_tra_cty,
              sad_gen.sad_cty_expcod,
              sad_gen.sad_cty_destcod,
              sad_gen.sad_tod_cod,
              sad_gen.sad_cur_cod,
              sad_gen.sad_tot_invoiced,
              sad_gen.sad_tra_cod1,
              sad_gen.sad_mot_bord,
              sad_gen.sad_cuo_bord,
              sad_gen.sad_total_taxes,
              sad_gen.sad_reg_year,
              sad_gen.sad_asmt_year,
              sad_gen.sad_rcpt_nber,
              sad_gen.sad_rcpt_date,
              sad_gen.sad_loc_goods,
              sad_gen.sad_lop_cod,
              sad_gen.sad_whs_time
              FROM   sad_gen
              WHERE  
                    sad_gen.sad_num=:X
                    AND   sad_gen.lst_ope='U';

                    SELECT  *  from yassin; 
```

当我使用它时`SET parameter X VALUE IN .NET with OleDbDataAdabtor`

我得到的错误是`ORA-01036: illegal variable name/number`

这是我的职责。Query is upper is query Para 是保持参数值的结构 public DataTable GetTable(String Query,AsycudaParameter[] Para) {

```
 OleDbConnection c = new OleDbConnection(ConnectionString);
    c.Open();

    OleDbDataAdapter da = new OleDbDataAdapter(Query, c);

    for (int b = 0; b < Para.Length; b++)
    {
        if (Query.Contains(Para[b].name))
        {
            if (Para[b].Type == TypeCode.String)
            {
                da.SelectCommand.Parameters.Add(new OleDbParameter(Para[b].name, OleDbType.VarWChar));
                da.SelectCommand.Parameters[da.SelectCommand.Parameters.Count - 1].Value = Para[b].value.ToString();

            }
            if (Para[b].Type == TypeCode.Decimal)
            {
                da.SelectCommand.Parameters.Add(new OleDbParameter(Para[b].name, OleDbType.Decimal));
                da.SelectCommand.Parameters[da.SelectCommand.Parameters.Count - 1].Value = decimal.Parse(Para[b].value.ToString());

            }
        }
    }
    DataTable dt = new DataTable();
    da.Fill(dt);

    c.Close();

    return dt;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:24:25.670

Oracle 不允许在 DDL 中绑定变量。因此，您不能在`CREATE TABLE`语句中使用绑定变量。如果您真的想创建一个表，则必须在 DDL 中对查询进行硬编码（也就是说，您可能需要使用字符串连接来构建 DDL 语句，而不是使用绑定变量）。

首先，为什么要在应用程序运行时创建表？这通常不是您想要做的事情——应该在安装应用程序时创建表，而不是在运行时创建。

# javascript - 您将如何使用此脚本来获取/设置 cookie？小脚本

> ID：13908813
> 
> 赞同：1
> 
> 时间：2012-12-17T05:35:50.253
> 
> 标签：javascript, cookies, get, set

[https://gist.github.com/4149633](https://gist.github.com/4149633)

js中获取/设置cookies的小脚本，怎么用？它发布在 Chris Coyier 的 CSS-Tricks 网站的片段库中。

这个脚本有什么好处？我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:40:54.037

这很容易：

```
_.cookie( 'myCookie', 1 ); // (Set a cookie)
_.cookie( 'myCookie' ); // return 1 (Get a cookie)
_.cookie( 'myCookie', null ); // (Delete a cookie)
_.cookie( 'secondCookie', 'a value', { expires: 1000 }) // Set a cookie that will expire in 1 second 
```

您还可以设置 cookie`path`并`domain`使用带有选项对象的最后一个表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:43:54.793

用这个函数创建一个 js

```
function setCookie(c_name, value, exdays) {

     if (exdays) {
          var date = new Date();
          date.setTime(date.getTime()+(exdays*24*60*60*1000));
          var expires = "; expires="+date.toGMTString();
         }
         else var expires = "";
         document.cookie = c_name+"="+escape(value)+expires";
}

function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name ) {
            return unescape(y);
        }
    }
} 
```

只需调用类似的函数

```
setCookie("cookieName","cookieValue",365); 
```

和

```
getCookie("cookieName"); 
```

但请确保您无法获取从服务器发送的带有`HTTPONLY`or`SECURE`属性的 cookie。

# javascript - Geoplugin 不返回任何 Javascript

> ID：13908814
> 
> 赞同：0
> 
> 时间：2012-12-17T05:35:52.657
> 
> 标签：javascript, geolocation

它是如此简单，但不知何故我做错了什么。

[http://www.geoplugin.com/quickstart#how_to_geo-localize_your_visitors](http://www.geoplugin.com/quickstart#how_to_geo-localize_your_visitors)

上述站点中的代码运行良好，当我将代码复制到我的网页时，它确切地知道我在哪里，但它不起作用。

在头部标签中：

```
<script src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script> 
```

在 div 标签中：

```
<script language="Javascript">document.write("function geoplugin_region() { return '"+ geoplugin_region()+"'; }");</script> 
```

回报：

功能 geoplugin_region() { 返回 ''; }

应该显示一个区域的引号之间的相关部分是''，但它不是。（我的网页和地理插件都是在 Internet Explorer 中打开的）

有任何想法吗？

用于检测：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script language="JavaScript" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>
<title>Untitled Document</title>
</head>

<body>
<script language="Javascript">document.write("function geoplugin_region() { return '"+ geoplugin_region()+"'; }");</script>
</body>
</html> 
```

**更新**

因此，当其他人在他们的计算机上测试代码时，它可以正常工作

当我打开其他人的包含 geoplugin 代码的页面时，它工作正常

但是如果我打开一个位于我的硬盘驱动器中的网站，它就不起作用（工作和家用电脑）

有任何想法吗？

**已回答**

EI (9) 安全设置导致问题我只需将 html 转换为 hta 并且工作正常（我实际上无法在工作中更改 IE 的安全设置，所以这不是一个选项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:28:14.380

我将您的源代码作为 html 文件上传到我的服务器，它会返回我居住的真实地方。

所以，我认为geoplugin可能会使用AJAX的XMLHttpRequest技术。
另外，您可以点击[http://hanasite.com/jscon/demo.html](http://hanasite.com/jscon/demo.html)查看。
希望它可以帮助您解决您的问题。:)

（因为声誉低所以我不能上传截图：（）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:02:51.463

这是我编写的工作代码。这真的很简单，而且效果很好（经过测试）。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://www.geoplugin.net/javascript.gp"></script>
</head>
<body>
    <ul>
        <li>Your IP is: <span id="ip"></span></li>
        <li>Your city is: <span id="city"></span></li>
        <li>Your region is: <span id="region"></span></li>
        <li>Your areaCode is: <span id="areaCode"></span></li>
        <li>Your dma code is: <span id="dmaCode"></span></li>
        <li>Your latitude is: <span id="latitude"></span></li>
        <li>Your longitude is: <span id="longitude"></span></li>
        <li>Your currencyCode is: <span id="currencyCode"></span></li>
        <li>Your currencySymbol is: <span id="currencySymbol"></span></li>
    </ul>
<script>
 var ip = geoplugin_request();
 var city = geoplugin_city();
 var region = geoplugin_region();
 var areaCode = geoplugin_areaCode();
 var dmaCode = geoplugin_dmaCode();
 var latitude = geoplugin_latitude();
 var longitude = geoplugin_longitude();
 var currencyCode = geoplugin_currencyCode();
 var currencySymbol = geoplugin_currencySymbol();
 document.getElementById('ip').innerHTML = ip;
 document.getElementById('city').innerHTML = city;
 document.getElementById('region').innerHTML = region;
 document.getElementById('areaCode').innerHTML = areaCode;
 document.getElementById('dmaCode').innerHTML = dmaCode;
 document.getElementById('latitude').innerHTML = latitude;
 document.getElementById('longitude').innerHTML = longitude;
 document.getElementById('currencyCode').innerHTML = currencyCode;
 document.getElementById('currencySymbol').innerHTML = currencySymbol;
</script>
</body>
</html> 
```

这是一个更新版本，所有的东西都在工作，问候！

# windows-phone-7 - 如何知道 WebClient/DownloadStringCompletedEventArgs 的错误异常类型？

> ID：13908816
> 
> 赞同：0
> 
> 时间：2012-12-17T05:36:15.183
> 
> 标签：windows-phone-7, exception-handling, error-handling, windows-phone-7.1

我正在开发一个使用 WebClient 类从远程服务器获取数据的应用程序。问题是我无法区分错误是：（1）连接超时（2）URL不存在（3）没有网络连接

这是代码片段：

```
WebClient client = new WebClient();
client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
client.DownloadStringAsync(new Uri(url, UriKind.Absolute));

void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error == null && !e.Cancelled)
    {

    }
    else
    {
    MessageBox.Show(e.Error.ToString()); // Return System.Net.WebException
    MessageBox.Show(e.Error.Data.Count + ""); // return 0

    /*foreach (DictionaryEntry de in e.Error.Data)
        MessageBox.Show(de.Key + ", " +  de.Value);*/   
    }
} 
```

我需要知道 DownloadStringCompletedEventArgs 的错误类型，因为我要向用户显示自定义错误消息。请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:37:04.260

您可以使用`e.Error.Message`，它给出了具体的错误信息

根据您的评论：

我没有找到任何提供所有错误消息列表的资源。检查以下内容： [AsyncCompletedEventArgs.Error](http://msdn.microsoft.com/en-us/library/system.componentmodel.asynccompletedeventargs.error.aspx)和 [Exception.Message](http://msdn.microsoft.com/en-us/library/system.exception.message.aspx)

# iphone - kABPersonImageFormatThumbnail 不拉图像

> ID：13908817
> 
> 赞同：5
> 
> 时间：2012-12-17T05:36:18.243
> 
> 标签：iphone, objective-c, ios, ipad

我的大部分联系人图像都是从图像中提取的，当我这样做时：

```
NSData *contactImageData = (__bridge NSData*) ABPersonCopyImageDataWithFormat(person,
                                                                                  kABPersonImageFormatThumbnail);
    UIImage *img = [[UIImage alloc] initWithData:contactImageData]; 
```

这里的img是零。我怎样才能得到图像？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T05:45:06.573

在获取图像之前，请使用以下行检查地址是否具有图像属性。

```
if(ABPersonHasImageData(person)) {
    //Code to fetch image
} 
```

# html - Watir webdriver 行性能

> ID：13908821
> 
> 赞同：1
> 
> 时间：2012-12-17T05:36:29.320
> 
> 标签：html, ruby, webdriver, watir

我正在尝试使用 watir-webdriver 将网页上的特定行归零。我使用的代码非常简单：

```
b = Watir::Browser.new
frame = b.frames.first
frame.tables[3].rows[2].flash 
```

这会闪烁正确的行，问题是当有很多行时需要很长时间。当有大约 3000 行时，大约需要大约 30 秒。看起来脚本在闪烁我选择的行之前迭代了所有行，尽管我不确定（webdriver 在 Firefox 的右下角闪烁）。我尝试过使用“行”而不是“行”，但由于某种原因，这实际上会闪烁列而不是行。watir 中是否有命令可以更快地选择行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:32:27.943

我写了一篇关于类似问题的解决方案的博客文章。我使用 Nokogiri 来加速 Watir：http: [//zeljkofilipin.com/watir-nokogiri/](http://zeljkofilipin.com/watir-nokogiri/)

# c# - 如何使用复选框节点填充树列表视图

> ID：13908823
> 
> 赞同：0
> 
> 时间：2012-12-17T05:36:57.430
> 
> 标签：c#, ado.net

伙计们，我想通过循环使用我的数据库表（sql server）中的数据来填充带有节点的树列表视图，任何人都可以给出一些想法。我不知道从哪里开始我的编码。我使用此代码获取数据并连接到数据库。树列表视图位于winform。

```
SqlConnection cn = new SqlConnection();
SqlCommand cmd4 = new SqlCommand();
con.OpenConnections();
cmd4.Connection = cn;
cmd4.CommandType = CommandType.Text;
cn.ConnectionString = con.connections1;
cmd4.CommandText = "Select cmodname from modules"; 
```

不知道接下来要用什么。阅读器还是数据表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:53:32.243

应该是这样的：

您需要检查 null 和您不想出现的东西。

```
private void FillTreeView(string connectionString)
{
    string query = "Select cmodname from modules;";
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlCommand command = new SqlCommand(query, connection);
        connection.Open();
        SqlDataReader sqlReader = command.ExecuteReader();
        try
        {
            while (sqlReader.Read())
            {
                     if (treeView2.SelectedNode != null)
                     {
                         treeView2.SelectedNode.Nodes.Add(sqlReader[0]);
                         treeView2.ExpandAll();
                     }
                     else
                     {
                         treeView2.Nodes[0].Nodes.Add(sqlReader[0]);
                     }

          }
        }
        catch (Exception ex)
        {
            MessageBox.Show("An error occurred: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        finally
        {
            sqlReader.Close();
        }
    }
} 
```

# android - 早上 9 点开始我的应用程序。并在晚上 7 点结束

> ID：13908825
> 
> 赞同：2
> 
> 时间：2012-12-17T05:37:02.487
> 
> 标签：android, alarmmanager, repeatingalarm

我有一个定时开始/结束要求

*   我需要在上午 9 点开始我的应用程序。
*   晚上 7 点停止我的申请。

我已经使用了相同的 AlarmManager 类，但无法在上午 9 点触发我的应用程序。

```
AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
long startTime = System.currentTimeMillis();
long durationTime = 3 * 60 * 1000;
alarm.setRepeating(AlarmManager.RTC_WAKEUP, startTime + durationTime, durationTime, pintent); 
```

# android - 在 Android 应用程序中检测 Internet 连接？

> ID：13908826
> 
> 赞同：1
> 
> 时间：2012-12-17T05:37:08.040
> 
> 标签：android, android-networking

我有以下方法，它将检查设备中的 Internet 连接：

```
public static boolean checkInternetConnection(Context context) {
    ConnectivityManager connectivityManager = 
            (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

    if (connectivityManager.getActiveNetworkInfo() != null
            && connectivityManager.getActiveNetworkInfo().isAvailable()
            && connectivityManager.getActiveNetworkInfo().isConnected()) {
        return true;
    } else {
        return false;
    }

} 
```

但是过了一会儿我发现这个方法只检查网络连接；就像设备连接到路由器并且路由器已打开但没有可用的互联网一样，此方法返回 true。

那么如何知道是否有实际的互联网？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T05:39:36.433

那么什么是“真正的互联网”？在任何给定时间连接到 Internet 上任何可能的主机的能力？有点难测试，不是吗？尝试连接到知名服务器（Google、NASA、您所在国家/地区的顶级提供商主页），如果可以，您可能拥有“实际互联网”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:43:56.327

我为您看到的唯一方法是尝试连接到像谷歌这样的网站，如果您得到结果，那么您可以确定它，否则没有互联网活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:39:15.977

试试这个功能...

```
public static Boolean checknetwork(Context mContext) 
    {

        NetworkInfo info = ((ConnectivityManager) mContext
                .getSystemService(Context.CONNECTIVITY_SERVICE))
                .getActiveNetworkInfo();
        if (info == null || !info.isConnected()) 
        {

            return false;
        }
        if (info.isRoaming()) 
        {
            // here is the roaming option you can change it if you want to
            // disable internet while roaming, just return false
            return true;
        }

        return true;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:23:04.970

关于这个主题已经有很多问题，并提供了建议解决方案的答案。试着看看其中的一些。

[在尝试发送 SMS 之前检查 Android 中的网络覆盖范围](https://stackoverflow.com/questions/13275663/check-network-coverage-in-android-before-trying-to-send-sms)

[如何在 Android 上检查互联网访问（包括网络共享！）？](https://stackoverflow.com/questions/13474205/how-to-check-internet-access-including-tethering-on-android)

[如何确定android中的网络不可用](https://stackoverflow.com/questions/13227071/how-to-determine-the-network-unavailability-in-android)

# clojure - 如何检测执行环境？

> ID：13908829
> 
> 赞同：1
> 
> 时间：2012-12-17T05:37:24.433
> 
> 标签：clojure

我想要一对`db-spec`带有我的数据库配置的地图，用于开发和生产。

但我找不到检测当前执行环境的简单方法。需要类似的东西`(defn db-spec [] (if (is-dev?) { dev-spec-here } { prod-spec-here }))`。

也许它可以检测到当前的 le​​in 配置文件。不管我怎么问谷歌。找不到方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:40:33.053

我喜欢为此使用环境变量（可以在系统范围内设置，例如在 /etc/profile 等其他地方）。其他人更喜欢将 -D 定义传递给 JVM

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:37:28.397

您的代码没问题，检测它取决于您的环境，例如`hostname`,`IP arrdress`等`global variable`。

# php - php查询数据库失败？

> ID：13908830
> 
> 赞同：0
> 
> 时间：2012-12-17T05:37:27.770
> 
> 标签：php, mysql, sql

我想将数据插入这样设置的数据库中

## 桌子

*   名称 varchar(35)
*   部门 varchar(50)
*   评分 smallint(6)
*   容易小int（6）
*   教科书 varchar(3)
*   时间戳时间戳
*   课程字符（10）
*   曲线字符（3）
*   评论文字

我用下面这样的查询插入数据，它实际上并没有插入数据库，页面重新加载，就是这样。这是 和 的`print_r()`结果`var_dump()`。实际查询功能如下。可能是什么问题？我认为它可能是某种文本类型溢出。但是我想不通，谢谢你的帮助

`print_r()`结果：

```
insert into professor(name,department,rating,easiness,textbook,course,curve,comment)values('Cherry, Mark','HUMANITIES','8','8','yes','PHIL 3311','no','Go to class. He doesn't require it but it will make the difference between an A or a B. It's very difficult to do anything without being in class. He gives all the answers you need so long as you show up. He's a very good teacher and I would recommend him to someone else') 
```

`var_dump()`结果：

```
string(424) "insert into professor(name,department,rating,easiness,textbook,course,curve,comment)values('Cherry, Mark','HUMANITIES','8','8','yes','PHIL 3311','no','Go to class. He doesn't require it but it will make the difference between an A or a B. It's very difficult to do anything without being in class. He gives all the answers you need so long as you show up. He's a very good teacher and I would recommend him to someone else')" bool(false) 
```

这是我的代码：

```
function processadd()
{
    $name =htmlentities($_POST['prof']);
    $department =htmlentities($_POST['depart']);
    $rating =htmlentities($_POST['Rating']);
    $easy=htmlentities($_POST['Easiness']);
    $textbook =htmlentities($_POST['Book']);
    $course =htmlentities($_POST['course']);
    $curve =htmlentities($_POST['curve']);
    $comment =htmlentities($_POST['comment']);
    if($course == "" || $comment == "")
    {
        print"<div class=error><h3> Empty Fields exist!, please fill out completely</h3></div>";
    }
    else
    {
    $db = adodbConnect();
    $query = "insert into professor(name,department,rating,easiness,textbook,course,curve,comment)values('$name','$department','$rating','$easy','$textbook','$course','$curve','$comment')";
    $result = $db -> Execute($query);
    }
    print_r($query);
    print_r($result);
    print"<br>";
    print"<br>";
    print"<br>";
    var_dump($query);
    var_dump($result);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:51:04.350

您的问题可能在评论中。看起来你没有在整个评论中逃避 's。尝试插入此语句：

```
insert into professor(name,department,rating,easiness,textbook,course,curve,comment)
values('Cherry, Mark','HUMANITIES','8','8','yes','PHIL 3311','no','Go to class. He doesn\'t require it but it will make the difference between an A or a B. It\'s very difficult to do anything without being in class. He gives all the answers you need so long as you show up. He\'s a very good teacher and I would recommend him to someone else'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:52:20.560

虽然您没有指定您收到的错误，但我猜它与不转义查询中的引号有关，特别是（但不限于）该`comment`列。

例如，您的示例中的列是：

> 去上课了。他不需要它，但它会在 A 或 B 之间产生差异。不上课就很难做任何事情。只要你出现，他就会给出你需要的所有答案。他是一位非常好的老师，我会向其他人推荐他

此文本包含几个单引号，它们会破坏您的 SQL 查询并给您一个错误。

您[`htmlentities`](http://php.net/htmlentities)在每列的输入上使用，但是，这并不能阻止 SQL 注入；并且，默认情况下，`htmlentities`也不转换单引号。

我不知道您的数据库类正在实现什么 MySQL 库，但您可能想尝试使用该库的转义函数。

例如，如果您使用的是较旧的`mysql_`函数，请使用[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)而不是`htmlentities()`每个值。另一方面，如果您使用更推荐的[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)类，请将您的查询转换为准备好的语句。

# c# - 如何在单击 asp:menu 的子菜单时在同一页面中显示一些内容而不是重定向到另一个页面？

> ID：13908835
> 
> 赞同：-1
> 
> 时间：2012-12-17T05:37:52.640
> 
> 标签：c#, javascript, jquery, asp.net, aspmenu

我正在使用 asp:menu。我的 aspx 代码是：

```
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Menu ID="Menu_Library" runat="server">
        </asp:Menu>

    </div>
    </form>
</body> 
```

我正在动态生成子菜单项（即）子项。如果我单击子菜单项，它会将我重定向到我在后面的代码中指定的页面，

```
MenuItem childItem = new MenuItem();
childItem.NavigateUrl = "OtherPage.aspx"; 
```

但是我需要的是当我点击子菜单项时，它应该在同一页面中显示一些项目..

如何做到这一点？请帮助我..它可以在javascript或代码后面..我不希望它导航到另一个页面，而是在同一页面中执行操作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:59:40.267

除了使用页面链接之外，您还可以使用 javascript 以及您可以在其中显示或隐藏的任何 div。

您的代码：

```
MenuItem childItem = new MenuItem();
childItem.NavigateUrl = "OtherPage.aspx"; 
```

更改为：

```
MenuItem childItem = new MenuItem();
childItem.NavigateUrl = "javascript: return GoToSomeLink('"+ count +"');"; //You can pass parameters also 
```

Javascript函数：

```
<script type="text/javascript">
function GoToSomeLink(obj) //if parameters are used use them here also.
{
    var count=parseInt(obj); //use this count varible anywhere in the function
    $(#menuDiv).show(); /any div show or hide
    return false;

}
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:41:55.220

您可以使用[load()](http://api.jquery.com/load/)或[ajax()](http://api.jquery.com/jQuery.ajax/) jquery 方法动态加载内容而无需刷新页面。

或者你可以只隐藏相关内容内联并使用[toggle()](http://api.jquery.com/toggle/)方法显示/隐藏它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:09:45.530

您可以使用 jquery.load 方法如下

```
var a = this.find(".contentWrap"),
a.load(this.getTrigger().attr("href") + " .ajaxDiv"); 
```

想法是这样的

1.  将任何 css 类放到要加载另一个页面的每个菜单/子菜单上，比如 ajaxMenu。
2.  通过您的代码设置菜单/子菜单的 url。
3.  使用 css-class (conetntWrap) 在您的法师页面上创建一个容器 div
4.  在要加载的每个页面上创建一个容器 div，比如 .ajaxDiv。这很重要，因为它不会将 _viewstate 加载到您的页面。
5.  现在在 document.ready 上写一个函数如下

    ```
    $(document).ready(function () 
    {
        $("a.ajaxMenu").live("click", function (a)
        {
            var a = this.find(".contentWrap"),
            a.load(this.getTrigger().attr("href") + " .ajaxDiv");
         });
     )}; 
    ```

    * *---在 asp.net 上使用类 **

    ```
    <asp:Menu ID="NavigationMenu" 
         StaticMenuStyle-CssClass="StaticMenuStyle"
         StaticMenuItemStyle-CssClass="StaticMenuItemStyle"
         StaticSelectedStyle-CssClass="StaticSelectedStyle"
         StaticHoverStyle-CssClass="StaticHoverStyle"
        runat="server">
    </asp:Menu> 
    ```

    以上是添加CSS类的方法。

# c# - Socket.EndReceive(...) 没有正确返回

> ID：13908836
> 
> 赞同：3
> 
> 时间：2012-12-17T05:37:53.533
> 
> 标签：c#, .net, exception-handling

我正在尝试使用 Socket.BeginReceive(...) 和 Socket.EndReceive(...) 作为我的 UDP 数据包接收器客户端。它按预期接收和处理数据包，但是，当我希望取消和关闭套接字时，我实现的 Close() 函数在 Socket.EndReceive(...) 上退出。我假设线程上引发了异常，但我无法弄清楚如何捕获异常以查看问题所在。我之前使用过 Socket.EndReceive(...)，而 SocketError 返回成功。这是一些代码，显示了我如何使用套接字。

**更新代码**

```
void _startReceiving()
{
    _buffer = new byte[Marshal.SizeOf(typeof(EthernetShare.Message))];
    _receiveResult = _udpSocket.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, messageProcessor, null);
}

private void messageProcessor(IAsyncResult result)
{
    int packetSize = _udpSocket.EndReceive(result);
    if (packetSize == _buffer.Length)
    {
        byte[] packet = _buffer;
        IAsyncResult asyncResult = result;
        _startReceiving();
        OnMessageReceieved(_buffer.ToStruct<DataStreamingMessage>());
    }
}
public void Stop()
{

    _continue = false;
    SocketError error;
    try
    {
        int tmp = _udpSocket.EndReceive(_receiveResult, out error);

    }
    catch (Exception)
    {

        throw;
    }
    _udpSocket.Close();
} 
```

**旧代码**

```
private Socket _udpSocket;
private byte[] _buffer;
private IAsyncResult _receiveResult;
void _startReceiving()
{
    byte[] buffer = new byte[Marshal.SizeOf(typeof(EthernetShare.Message))];
    _receiveResult = _udpSocket.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, messageProcessor, null);
    //_receiveResult = _udpSocket.BeginReceive(buffer, 0, buffer.Length, SocketFlags.None, messageProcessor, _continue);
}

private void messageProcessor(IAsyncResult result)
{

    //if ((bool)result.AsyncState && result.IsCompleted)
    if (result.IsCompleted)
    {
        _buffer = new byte[Marshal.SizeOf(typeof (EthernetShare.Message))];
        //_receiveResult = _udpSocket.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, messageProcessor, _continue);
        _receiveResult = _udpSocket.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, messageProcessor, null);
    }
}

public void Stop()
{

    _continue = false;
    SocketError error;
    try
    {
        int tmp = _udpSocket.EndReceive(_receiveResult, out error);

    }
    catch (Exception)
    {

        throw;
    }
    _udpSocket.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:56:51.557

您对 APM（异步编程模型）的使用是错误的。请参阅：http: [//msdn.microsoft.com/en-us/library/ms228963.aspx](http://msdn.microsoft.com/en-us/library/ms228963.aspx)

每个对 BeginXXX 的调用都应与 EndXXX 匹配。

在伪代码中，它可能看起来像这样：

```
private bool isClosed;
private Socket socket;

void BeginReceiveNextPacket(){
    socket.BeginReceive(..., EndReceiveNextPacket);
}

void EndReceiveNextPacket(IAsyncResult result){
    try{
        // By making a call to EndReceive, we allow the socket to wrap up, close internal handles and raise any exceptions if they exist.
        socket.EndReceive(result); 

        // Now make a new call to BeginReceive after we invoked the actual call to EndReceive.
        BeginReceiveNextPacket();
    }
    catch(SocketClosedException) {
        if (closed){
            // We forcefully closed this socket. Therefore, this exception was expected and we can ignore it.
        }
        else{
            throw; // Catch an unexpected exception.
        }
    }
}

void Stop(){
    isClosed = true;
    socekt.Close();
} 
```

# html - 在 Chrome 中的某些窗口分辨率上，表格的宽度没有完全扩展

> ID：13908842
> 
> 赞同：0
> 
> 时间：2012-12-17T05:39:04.213
> 
> 标签：html, css, google-chrome, cross-browser

以下文档看起来应该在 Firefox、Opera、Safari 甚至 IE6 及更高版本（！）中，但不是 Chrome - 在某些分辨率下（我猜宽度不均匀？）[http://jsfiddle.net/4BEvL/1/](http://jsfiddle.net/4BEvL/1/)

问题是菜单没有像内容 div 那样扩展，所以它会在边缘留下一个间隙：

![http://i.imgur.com/3tGwD.png](../Images/b41e08c8c9d082bf3772866c59a6bfde.png)

为 div 设置一个 MAX-width`#container`反而奇怪地解决了这个问题，但这不是我想要的结果；此外，它在 IE6（我还没有放弃支持）中看起来很糟糕，因为它不支持 max/min-* CSS 规则。

我可以以某种方式为 Chrome 修复此问题（不使用 CSS hack）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:01:56.983

`display:table;`我通过添加到`#container`div来修复它。

（虽然它在我的网站上妥协了一些东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:05:32.703

你的桌子在#container 里面，它设置为身体宽度的 85%。所以将表格设置为 100% 宽度只会让表格扩大到 85%。百分比始终是其定位父级的百分比，在本例中为#container。但是容器也被限制为最小 800px 宽，因此当您减小宽度时它不会进一步缩小。

# php - 从函数内部获取动态数组

> ID：13908843
> 
> 赞同：0
> 
> 时间：2012-12-17T05:39:06.217
> 
> 标签：php, mysql, sql

我有一个函数允许我根据用户选择的 SQL 服务器类型执行 sql 查询。该函数可以很好地获取单行数据，但它永远不会返回超过 1 行。

这是sql函数：

```
function sqlQuery($query){
switch (DATABASE_TYPE) {
    case 'MYSQL':
        // Establishes a connection to the database.
        $connection = mysql_connect(DATABASE_LOCATION, DATABASE_USERNAME, DATABASE_PASSWORD);
        if(!$connection){
            throw new Exception(mysql_error(), 1);
        }
        mysql_select_db(DATABASE_NAME);

        // Performs the query.
        global $response;
        $response = mysql_query($query);
        if(!$response){
            throw new Exception(mysql_error(), 1);
        }
        return mysql_fetch_array($response);
        break;
    }
} 
```

就像我上面说的，这对单行查询很有效，但我不能再得到了。

如果我试试这个：

```
$sql = "SELECT * FROM test"
$rows = sqlQuery($sql);
foreach($rows as $value){
    echo($value);
} 
```

如果测试的第 1 行是`1 | Hello | PHP`它会回显`11HelloHelloPHPPHP`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:00:20.427

如果您有更多的行数，您必须使用 forloop 来获取所有行.. 那就是它将作为 resourceid 返回 #- 请 print_r 或回显您的结果并检查它.. 之后在 mysql_fetch_row ~ mysql_fetch_array 中使用该结果~你想要的任何其他东西..并将其存储在数组中，其 id 作为键...请检查以下编辑后的代码，

```
function sqlQuery($query){
switch (DATABASE_TYPE) {
    case 'MYSQL':
        // Establishes a connection to the database.
        $connection = mysql_connect(DATABASE_LOCATION, DATABASE_USERNAME, DATABASE_PASSWORD);
        if(!$connection){
            throw new Exception(mysql_error(), 1);
        }
        mysql_select_db(DATABASE_NAME);

        // Performs the query.
        global $response;
        $response = mysql_query($query);
        if(!$response){
            throw new Exception(mysql_error(), 1);
        }
        while($rows = mysql_fetch_array($sql))
        {
            $data[$rows['id]] =  $rows;
        }
        return $data;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:41:54.760

做起来很简单

```
$sql = "SELECT * FROM test";
$data = array();

while($rows = mysql_fetch_assoc($sql))
{
    $data[] = $rows ;
}

return $data; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:45:39.070

为了更清楚地了解 raheel 的答案，mysql_fetch_array 只返回一行结果。使用 while 循环可以让您继续获取其他行，只要它们存在。有关其他信息，您可能需要查看[从函数内部获取动态数组](https://stackoverflow.com/questions/13908843/getting-dynamic-array-from-inside-a-function)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T23:35:31.950

我能够通过更改返回的数据类型来解决此问题：

`return mysql_fetch_array($response);`

至：

```
$rows = array();
while($row = mysql_fetch_array($response)){
    array_push($rows, $row);
}
return $rows; 
```

感谢你的帮助！

# freemarker - 如何在包含它之前检查 freemarker 模板的存在性

> ID：13908848
> 
> 赞同：2
> 
> 时间：2012-12-17T05:39:35.367
> 
> 标签：freemarker

有时我必须使用以下代码段：

```
<#include 'some.ftl' /> 
```

freemarker 是否有返回 some.ftl 存在的指令？

像

```
<#include_if_exists 'some.ftl' > 
```

或者我可以自己执行这样的指令吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:05:14.767

好的。由[用户指令解决](http://freemarker.sourceforge.net/docs/pgui_datamodel_directive.html)

[@include 模板='some.ftl' /]

如果找不到模板，则发出警告...

```
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Map;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import freemarker.core.Environment;
import freemarker.template.Template;
import freemarker.template.TemplateDirectiveBody;
import freemarker.template.TemplateDirectiveModel;
import freemarker.template.TemplateException;
import freemarker.template.TemplateModel;

public class FreemarkerIncludeDirective implements TemplateDirectiveModel {

  private static final Logger logger = LoggerFactory.getLogger(FreemarkerIncludeDirective.class);

  @Override
  public void execute(Environment env, @SuppressWarnings("rawtypes") Map params, TemplateModel[] loopVars,
      TemplateDirectiveBody body) throws TemplateException, IOException {

    if (params.containsKey("template")) {

      String t = params.get("template").toString();

      try {

        Template template = env.getTemplateForImporting(t);
        env.include(template);
      } catch (FileNotFoundException e) {
        logger.warn(t + "not found!");
      }
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:52:47.973

这

```
<#attempt>
<#recover>
</#attempt> 
```

声明应该可以解决问题。

查看这里[http://freemarker.sourceforge.net/docs/ref_directive_attempt.html](http://freemarker.sourceforge.net/docs/ref_directive_attempt.html)了解更多信息。

# c - printf 有时会打印出额外的垃圾

> ID：13908849
> 
> 赞同：0
> 
> 时间：2012-12-17T05:39:36.683
> 
> 标签：c, printf

我正在解析一个`.ppm`文件，`fgetc`用于一次读取一个字节，然后通过除以 255.0 将它们转换为浮点数以获取用于 OpenGL 代码的颜色。这很简单。为了调试目的，我使用`printf("%f %f %f\n", color[0], color[1], color[2]);`. 大多数时候这很好用（见第一行），但偶尔会打印出额外的垃圾（见第二行）。

```
0.086275 0.031373 0.000000
0.133333 0.000000 0.00<BA><B9>9?<D1><D0><D0>=<99><98>^X>3 0.078431 0.000000 
```

任何想法为什么会这样？

更新：

```
float *read_eight_bit(FILE *file, int rows, int cols)                                                                                                                                                                                                                          
{                                                                                                                                                                                                                                                                              
   float *data = (float *)malloc(rows*cols*3*sizeof(float));                                                                                                                                                                                                                    
   int c;                                                                                                                                                                                                                                                                       
   int i, j, k;                                                                                                                                                                                                                                                                 
   for(i = 0; i < rows; i++) {                                                                                                                                                                                                                                                  
     for(j = 0; j < cols; j++) {                                                                                                                                                                                                                                                
         for(k = 0; k < 3; k++) {                                                                                                                                                                                                                                                 
           if((c = fgetc(file)) != EOF) {                                                                                                                                                                                                                                                              
             data[get_index(i, j, k, rows, cols)] = c/255.0f;                                                                                                                                                                                                                     
           }                                                                                                                                                                                                                                                                      
           else {                                                                                                                                                                                                                                                                 
             perror("reached unexpected EOF");                                                                                                                                                                                                                                    
             free(data);                                                                                                                                                                                                                                                          
             return NULL;                                                                                                                                                                                                                                                         
         }                                                                                                                                                                                                                                                                      
     }                                                                                                                                                                                                                                                                                                                                          
   return data;
} 
```

这是读取内容的实际代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:31:15.840

在没有看到更多代码的情况下，我能想到的唯一解释是堆栈以某种方式被弄乱了，可能是由于缓冲区溢出或欠载（在数组外部写入）。

我建议通过[cppcheck](http://sourceforge.net/projects/cppcheck/files/latest/download)运行您的代码，因为它可以检测到许多此类问题。

# android - 不能在一行中的两个文本视图上使用重力

> ID：13908856
> 
> 赞同：1
> 
> 时间：2012-12-17T05:40:02.493
> 
> 标签：android, android-layout

我使用此代码使我的两个文本视图在同一行中具有不同的重力。但他们没有。
代码：

```
 <LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal">
            <TextView android:text="@string/text_ceo_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:id="@+id/txt_ceo_name"/>
            <TextView android:text="@string/text_ceo_name_title"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="right"
                android:id="@+id/txt_ceo_name_title"/>
        </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:54:42.720

它的工作...

```
 <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="10">
        <TextView android:text="me"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="5"
            android:gravity="right"
            android:id="@+id/txt_ceo_name"/>
        <TextView android:text="You"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="5"
            android:gravity="right"
            android:id="@+id/txt_ceo_name_title"/>
    </LinearLayout> 
```

尝试按你的意愿给予重量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:59:54.943

`textviews`在父布局的左侧添加一个视图并`layout_weight`用于 3 个视图。像这样：

```
<LinearLayout android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal">

           <View android:layout_width="0dip" 
              android:layout_height="wrap_content"
              android:layout_weight="1.0"/>

          <TextView android:text="text_ceo_name"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:gravity="center"
                android:id="@+id/txt_ceo_name"/>
            <TextView android:text="text_ceo_name_title"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1.0"
                android:gravity="right"
                android:id="@+id/txt_ceo_name_title"/>
</LinearLayout> 
```

这会将一个文本设置为布局的中心，另一个设置在布局的右侧。

[`android:gravity`](http://developer.android.com/reference/android/R.attr.html#gravity)还将为您正在使用的视图的子视图设置重力。

要为您的布局设置重力，请使用[`android:layout_gravity`](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#attr_android%3alayout_gravity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:47:37.623

在这种情况下，LinearLayout 不会削减它。

使用相对布局。

将一个文本视图对齐到“在父级居中”
，另一个文本视图对齐到“对齐父级右侧”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T05:53:14.877

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <TextView android:text="@string/text_ceo_name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:id="@+id/txt_ceo_name"/>
        <TextView android:text="@string/text_ceo_name_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:id="@+id/txt_ceo_name_title"/>

            </RelativeLayout> 
```

试试这个可能对你有帮助。您的 TextView 宽度之一是 fill_parent，其他的 TextView 宽度是 wrap_content。可能这也是问题所在。如果有帮助，请接受答案。

# android - AppBilling v3 中的混乱

> ID：13908863
> 
> 赞同：0
> 
> 时间：2012-12-17T05:40:37.887
> 
> 标签：android, in-app-purchase, in-app-billing

我正在我的 Android 应用程序中实现 App Billing V3。我在实现方面有点困惑。在 Android 开发者网站实现中描述了两种类型。

第[一次实施](http://developer.android.com/google/play/billing/billing_integrate.html)

第二[次实施](http://developer.android.com/training/in-app-billing/index.html)

问题是我应该使用哪个。&彼此之间的差异是什么。

# ios - 使用自己的标签自定义表格视图单元格

> ID：13908867
> 
> 赞同：-2
> 
> 时间：2012-12-17T05:40:49.207
> 
> 标签：ios, uitableview

nameLabel 不起作用。当我运行应用程序时，出现以下错误： UITableViewCell nameLabel]: unrecognized selector sent to instance 0x1fc4e090\. 但是，如果我将 nameLabel 设置为 textLabel，它就可以工作。

下面是我的代码：

```
@interface ViewController ()
{
     NSMutableArray *books;
 }
@end

- (void)viewDidLoad
{

    Book *book1 = [Book new];
    book1.name = @"The adventures of tintin";
    book1.imageFile = @"tintin.jpg";

    Book *book2 = [Book new];
    book2.name = @"Avatar";
    book2.imageFile = @"avatar.jpg";
    books = [NSMutableArray arrayWithObjects:book1, book2, nil];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{<br>
    static NSString *simpleTableIdentifier = @"BookCell";

    UITableViewCell *cell = [tableV dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    //MyBookCell *cell = [tableV dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:simpleTableIdentifier];
    }
    //if (cell == nil) {
        cell = [[MyBookCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:simpleTableIdentifier];
    }
    Book *bk = [books objectAtIndex:indexPath.row];
    cell.nameLabel.text = bk.name; (customised label)

    return cell;
} 
```

这是自定义表格单元格的头文件

```
@interface MyBookCell : UITableViewCell 
@property (weak, nonatomic) IBOutlet UILabel *nameLabel;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:44:46.360

那是因为 UITableViewCell 没有名为 nameLabel 的属性。分配 textLabel.text 是正确的或者您可以实现自定义单元格类，并且有适合您的字段然后代替

```
UITableViewCell *cell = [tableV dequeueReusableCellWithIdentifier:simpleTableIdentifier]; 
```

你应该打电话

```
MyCustomCell* cell = (MyCustomCell*)[tableV dequeueReusableCellWithIdentifier];
if(cell == nil){
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MyCustomCell"owner:self options:nil];
    cell = [nib objectAtIndex:0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:49:08.670

没有像 nameLabel 这样的属性`UITableViewCell`。如果您对 进行了子类化`UITableViewCell`，则需要将其类型转换为您自己的自定义类，例如：

```
YourClass *cell = (YourClass *)[tableV dequeueReusableCellWithIdentifier:simpleTableIdentifier]; 
```

也像这样分配它：

```
cell = [[YourClass alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:simpleTableIdentifier]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:50:13.907

您应该使用以下样式来加载自定义 UITableViewCell。

```
static NSString *CellIdentifier = @"CellCustom";
CellCustom *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[NSBundle mainBundle] loadNibNamed:CellIdentifier owner:self options:nil] objectAtIndex:0];
}
cell.nameLabel.text = @"Text"; 
```

# html - css 表上的 100% 高度

> ID：13908868
> 
> 赞同：2
> 
> 时间：2012-12-17T05:40:51.650
> 
> 标签：html, css, height, css-tables

我正在尝试制作一个没有固定高度或宽度元素的流体布局。我的页面主体分为三列（因为我希望它们都具有相同的高度，所以我决定使用 css 表）。但是，当我尝试将 100% 高度属性添加到表格 div（或表格单元格 div）时，它们不会扩展到 div.middle 的完整大小。我用完整的代码[http://jsfiddle.net/3NMw5/](http://jsfiddle.net/3NMw5/)为这个问题做了一个 JS 小提琴，但这里有一个片段：

```
<body>
    <div class='titleBar'>
        <div class='wrap'>
            <img src='../images/logo.png' />
        </div>
    </div>
    <div class='middle'>
        <div class='wrap mainContent'>
                <div class='leftColumn'>left here</div>
                <div class='center'>center</div>
                <div class='rightColumn'>right</div>
        </div>
    </div>
    <div class='footerBar'><div class='wrap'>footer</div></div>
</body> 
```

和CSS：

```
div.mainContent { display: table; height: 100%;}
div.leftColumn { width: 20%; display: table-cell; background-color: #D2B48C; margin: 0; padding: 0;}
div.rightColumn {width: 20%; display: table-cell;}
div.center {width: 60%; display: table-cell;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T05:57:15.207

尝试添加`height: 200px;`到 mainContent。

```
div.mainContent {
display: table;
height: 200px;
} 
```

[这是代码的jsFiddle](http://jsfiddle.net/3NMw5/5/)。

添加`height: 100%;`也应该有效。

您的问题不是列没有拉伸到全高，而是 mainContent 没有完全拉伸。

--

编辑：好的，所以当你尝试让你的容器变得流畅时，*真​​正的*问题就来了，因为浏览器计算高度比计算宽度更难。

> 当您在父元素没有设置高度的元素上设置百分比高度时，就会出现问题。换句话说，父元素有一个默认高度：auto;。实际上，您是在要求浏览器根据未定义的值计算高度。由于这将等于一个空值，结果是浏览器什么都不做。

为了将 div 的高度定义为相对高度，您还必须设置父元素的高度。

通过添加`height: 100%`to `.middle`，您将获得接近您所追求的东西。[请参阅此处的 jsFiddle](http://jsfiddle.net/3NMw5/13/)。

[在此处](http://webdesign.about.com/od/csstutorials/f/set-css-height-100-percent.htm)阅读有关高度问题的更多信息。

# html - 更改变换的背景颜色：在 Firefox 中悬停时旋转对象

> ID：13908873
> 
> 赞同：0
> 
> 时间：2012-12-17T05:41:09.920
> 
> 标签：html, firefox, css

我在 Firefox 中有一个奇怪的 CSS 问题。如果我有一个旋转的对象，请将其定位为“固定”，我无法在悬停时更改背景。

如果我删除旋转，或删除固定位置（例如更改为绝对位置），则悬停有效。但我需要旋转和固定位置。有人知道为什么会这样吗？

请参见下面的示例：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.testing {
    background:#00F;
    color:#FFF;
    display:block;
    width:300px;
    text-align:center;
    font-size:18px;
    font-weight:bold;
    font-family:Arial, Helvetica, sans-serif;
    text-decoration:none;
    position:fixed;
    top:300px;
    left:400px;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);

  -webkit-transform-origin: 50px 50px;
  -moz-transform-origin: 50px 50px;
  -ms-transform-origin: 50px 50px;
  -o-transform-origin: 50px 50px;
  transform-origin: 50px 50px;
}
.testing:hover {
    background:#F00;
}
</style>
</head>

<body>
    <a href="#" class="testing">Testing Background Color</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:11:10.767

我有同样的问题

这是我的代码

```
<div id='lightbox'>
            <div id='addtocart'>
                <a href='$link'></a>
            </div>
         </div> 
```

灯箱的位置是：固定的，添加到购物车的按钮是

在这个例子中它不起作用

当我这样做的时候

```
<div id='lightbox'></div>
        <div id='addtocart'>
            <a href='$link'></a>
        </div> 
```

它再次工作

```
 #lightbox{
            position:fixed;
            top:0;
            left:0;
            z-index:12;
            background-color:rgba(0,0,0,0.8);
            width:100%;
            height:100%;
            overflow:hidden;
}

     #addtocart a:link{
            position:fixed;
            bottom:10%;
            right:10%;
            background: url("/vans/afbeeldingen/Navigatie/cart2.png") no-repeat scroll 0 0px transparent;
            width:199px;
            height:49px; 
}

     #addtocart a:hover{
            background: url("/vans/afbeeldingen/Navigatie/cart.png") no-repeat scroll 0 0px transparent;    
} 
```

因此，当您在固定 div 中有一个按钮时，它不再显示悬停。

*第一个代码仅在 Firefox 中不起作用*

# php - PHP - 插入数据库问题

> ID：13908876
> 
> 赞同：1
> 
> 时间：2012-12-17T05:41:41.257
> 
> 标签：php, database

一段时间以来，我一直停留在我的编码的这一部分上，因为更改要么出现语法错误，要么出现一条表明它是未知列的消息。我尝试过使用单引号和不使用单引号，我想我之前尝试过双引号但一无所获。我很确定问题出在查询部分，但目前我不确定。

```
include_once "library.php";
connectdatabase();

if (isset($_COOKIE['bunny_id'])) {
    $poster = $_COOKIE['bunny_id'];
} else {
    echo "Sorry, you need to login or sign up before you can post :C";
}

if (!empty($_POST['topic_name'])) {
    $topic_name = "'" . addslashes($_POST['topic_name']) . "'";
} else {
    $topic_name = 'NULL';
    echo "Topic field is not filled :c \n";
    exit;
}

if (!empty($_POST['post_content'])) {
    $post_content = "'" . addslashes($_POST['post_content']) . "'";
} else {
    $post_content = 'NULL';
    echo "Post content is not filled :c \n";
    exit;
}

$query  = "INSERT INTO posts(messages_poster, messages_topic, messages_content) VALUES('$poster', '$topic_name', '$post_content')";
$query2 = mysql_query($query);

if (mysql_num_rows($query2) == 1) {
    echo "Topic has been created~";
    exit;
} else {
    echo "Sorry, there's been an error :c";
} 
```

编辑：我设法解决了这个问题。该问题与在代码的前面部分中添加引号后向“$topic_name”和“$post_content”添加单引号有关（较小的问题还涉及使用 mysql_num_rows 而不是 mysql_affected_rows）。现在可以正常运行了~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:44:15.390

尝试这个

```
 $query = "INSERT INTO posts(messages_poster, messages_topic, messages_content) VALUES('$poster', '$topic_name', '$post_content')";
    $query2=mysql_query($query);

         if(mysql_num_rows($query2) == 1) {

        echo "Topic has been created~";
    exit; 
    } else { 
        echo "Sorry, there's been an error :c";
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:49:41.817

我手头没有 DBMS 来测试它，但第一次看代码让我觉得错误可能在于尝试构建/构造查询：

```
$query = "INSERT INTO posts(messages_poster, messages_topic, messages_content) VALUES('$poster', '$topic_name', '$post_content')"; 
```

请注意，您需要将查询传递给另一个子程序（将在其中处理，即提交给 DBMS），如下所示：

```
$query = "INSERT INTO posts(messages_poster, messages_topic, messages_content) VALUES( 'val1',  'val2', 'val3')"; so the trick is in trying to translate $poster -> 'val1';
$topic_name -> 'val2'
$post_content-> 'val3' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:50:45.580

您应该确保您的三列`(messages_poster, messages_topic, messages_content)`包含在您的表中`posts`。还要检查查询`mysql_query($query) or die(mysql_error())`以确保错误是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T05:51:09.013

尝试这个 ：-

```
 include_once "library.php";`
  connectdatabase();`
  $poster = '';
 if(isset($_COOKIE['bunny_id'])){
        $poster= $_COOKIE['bunny_id'];
        } 
         else {
            echo "Sorry, you need to login or sign up before you can post :C";
        } 
  $topic_name = '';
  if (!empty($_POST['topic_name'])){
     $topic_name = "'". addslashes($_POST['topic_name']) . "'";
} else {
    $topic_name = 'NULL';   
    echo "Topic field is not filled :c \n";
    exit;
}   
$post_content = '';
    if (!empty($_POST['post_content'] )) { 
    $post_content = "'". addslashes ( $_POST['post_content'] ) . "'";
} else {
    $post_content = 'NULL'; 
    echo "Post content is not filled :c \n" ;
    exit;
} 

        $query = "INSERT INTO posts(messages_poster, messages_topic, messages_content) VALUES('$poster', '$topic_name', '$post_content')";
        $query2=mysql_query($query);

             if(mysql_num_rows($query2) == 1) {

            echo "Topic has been created~";
        exit; 
         } else { 
            echo "Sorry, there's been an error :c";
            } 
```

问题可能是您没有获得这些值 '$poster'、'$topic_name'、'$post_content'，因为它们是在代码中本地定义的。

向我们展示您的错误。未知列表示您的表列名称不正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T05:51:13.227

```
 include_once "library.php";`
  connectdatabase();`

 if(isset($_COOKIE['bunny_id'])){
        $poster= $_COOKIE['bunny_id'];
        } 
         else {
            echo "Sorry, you need to login or sign up before you can post :C";
        } 

  if (!empty($_POST['topic_name'])){
     $topic_name =  addslashes($_POST['topic_name']); // we no need to concat string
} else {
    $topic_name = '';   
    echo "Topic field is not filled :c \n";
    exit;
}   

    if (!empty($_POST['post_content'] )) { 
    $post_content = addslashes ( $_POST['post_content'] ) ;
} else {
    $post_content = ''; 
    echo "Post content is not filled :c \n" ;
    exit;
} 

        `$query = "INSERT INTO posts (messages_poster, messages_topic, messages_content) VALUES('$poster', '$topic_name', '$post_content')";
        $query2=mysql_query($query) or die("could not inserted");`
         $lastid = mysql_insert_id(); 
```

# javascript - 如何验证来自特定域的电子邮件地址？

> ID：13908877
> 
> 赞同：1
> 
> 时间：2012-12-17T05:41:50.717
> 
> 标签：javascript, validation, email

我有这个代码来验证电子邮件输入。我的问题是，我希望我的表单只接受一个特定的域。例如，例如 test@thisdomainonly.com。我不知道该怎么做。这是我到目前为止所拥有的：

```
function validateEmail(email)
{
    var splitted = email.match("^(.+)@(.+)$");
    if (splitted == null) return false;
    if (splitted[1] != null)
    {
        var regexp_user = /^\"?[\w-_\.]*\"?$/;
        if (splitted[1].match(regexp_user) == null) return false;
    }
    if (splitted[2] != null)
    {
        var regexp_domain = /^[\w-\.]*\.[A-Za-z]{2,4}$/;
        if (splitted[2].match(regexp_domain) == null)
        {
            var regexp_ip = /^\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]$/;
            if (splitted[2].match(regexp_ip) == null) return false;
        } // if
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T05:51:41.993

修改你的函数，你会使用这样的东西：

```
function validateEmail(email)
{
    var splitted = email.match("^(.+)@thisdomainonly\.com$");
    if (splitted == null) return false;
    if (splitted[1] != null)
    {
        var regexp_user = /^\"?[\w-_\.]*\"?$/;
        if (splitted[1].match(regexp_user) == null) return false;
        return true;
    }
    return false;
} 
```

但更有效的版本是：

```
function validateEmail(email){
    return /^\"?[\w-_\.]*\"?@thisdomainonly\.com$/.test(email);        
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:54:42.583

一个简单的 indexOf 检查怎么样：

```
 function checkEmail(email, domainName){
            if(email.indexOf(domainName) > 0)
                if((email.indexOf(domainName) + domainName.length) == email.length){
                    //do regex checking if any
                    return true;
                }

            alert('Please enter a valid email for : '+ domainName)
            return false;
        } 
```

# xslt - XSLT 中使用的 XPath 表达式中元素的索引访问的时间复杂度是多少？

> ID：13908878
> 
> 赞同：1
> 
> 时间：2012-12-17T05:41:53.760
> 
> 标签：xslt, xpath, xslt-2.0, xpath-2.0

XSLT 中以下 XPath 表达式的索引访问的时间复杂度是多少？

```
<xsl:value-of select="User[2]/username"/> 
```

1.  O(log(n))
2.  O(1) 或
3.  在）

我有一个包含数千个用户的**排序**xml 文件，如下所示：

```
<Users>
  <User>
    <idPerson>460</idPerson>
    <username>a_aker01</username>
  </User>
  <User>
    <idPerson>677</idPerson>
    <username>a_aker02</username>
  </User>
  <User>
    <idPerson>1844</idPerson>
    <username>a_aker03</username>
  </User>
  <User>
    <idPerson>2373</idPerson>
    <username>a_aker04</username>
  </User>
</Users> 
```

**我正在考虑在 XSLT 2.0 中编写一个二进制搜索函数（需要快速索引访问）以实现更快的搜索，因为**

```
<xsl:variable name="targetId" select="2373" />
<xsl:value-of select="User[idPerson=$targetId]/username"/> 
```

**对我的需要来说太慢了。**它是否执行线性搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:14:18.397

的时间复杂度`/Users/User[2]`是特定于实现的。很可能它是一个 O(n) 线性搜索，但也许有一个足够聪明的实现可以在理想条件下在 O(1) 中完成。

但是，你为什么不直接使用`xsl:key`而不是创建一个二分搜索函数呢？（这也适用于 XSLT 1.0。）

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="text"/>

  <xsl:key name="user-for-idPerson" match="/Users/User" use="number(idPerson)"/>

  <xsl:template match="/">
    <xsl:variable name="targetId" select="2373" />
    <xsl:value-of select="key('user-for-idPerson', $targetId)/username"/>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:42:09.063

这一切都取决于实施。

Saxon-HE 将使用线性搜索实现 User[idPerson=$targetId]，Saxon-EE 很可能会建立索引。

两种产品对于子轴的数值过滤都具有 O(n) 的时间复杂度，如 User[2] 中一样，但如果您使用变量 ($User[2])，则访问将花费恒定时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:36:16.670

**为了不依赖于特定 XSLT 处理器的实现，我建议应该使用一个键**：

```
<xsl:key name="kUserById" match="User" use="idPerson"/> 
```

**然后，当您需要访问`User`by`idPerson`时，请执行以下操作：**

```
key('kUserById', $targetId) 
```

大多数 XSLT 处理器有效地实现键索引（即使用哈希表），因此，如果`idPerson`每个 都是唯一的，则使用上面所示`User`的函数进行访问的时间是 O(1) - 常数。`key()`

* * *

**关于您的其他问题**：

> XSLT 中以下 XPath 表达式的索引访问的时间复杂度是多少？
> 
> ```
> <xsl:value-of select="User[2]/username"/> 
> ```

对于提供的 XML 文档，它很可能是 O(1)，但是对于一个`Users`不仅有`User`孩子，而且还有其他名字的孩子的文档，访问时间可能是 O(N)——假设有 1000 个孩子被命名`Customer`最后两个孩子的名字是`User`.

> 我正在考虑在 XSLT 2.0 中编写一个二进制搜索函数（需要快速索引访问）以实现更快的搜索

二分搜索算法假定要搜索的对象在一个*数组*中（并且在数组中按索引的访问时间是 O(1)）。对于仍然没有*数组*数据结构的 XSLT/XPath，这种假设是错误的。

一些 XSLT 处理器（如 Saxon）可能以一种有效的方式（使用向量）实现序列，访问时间为 O(1)，但其中许多不这样做。

因此，要访问：

```
 $seq[$mid] 
```

一般取O(N)，应用于这样一个序列的二分查找算法是O(N^2)。

# c# - Silverlight 中的彩色叠加图像效果

> ID：13908882
> 
> 赞同：0
> 
> 时间：2012-12-17T05:42:00.233
> 
> 标签：c#, silverlight, image-manipulation

我不确定这是否可能，但这是目标：

1.  从相对 URL 抓取混合透明 PNG 图像（到 silverlight 应用程序）
2.  然后将图像中的所有像素更改为指定颜色**而不**改变不透明度（即透明像素将保持透明，半透明将半透明）
3.  图像将显示在图像控件中。

有没有办法在 Silverlight 中进行这种颜色叠加和图像处理？

此外，计算时间也是一个问题。这将不得不发生很多次，如果这是一个密集且耗时的操作，这可能是一个问题。

Google 中似乎没有很多信息，我认为`WritableBitmap`必须使用遗嘱是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:50:00.437

听起来像是 ShaderEffect 的完美工作。这些是在 GPU 上运行的像素着色器。它们非常快，简单的每像素颜色操作对它们来说将是轻松的工作。您也不需要解析 PNG 格式或类似的格式（您将应用着色器的图像控件将为您执行此操作）。

WriteableBitmap 会慢得多，我不确定你是否可以避免解析 PNG。

# java - JPA创建新实体，如何连接它的关系

> ID：13908883
> 
> 赞同：0
> 
> 时间：2012-12-17T05:42:06.350
> 
> 标签：java, database, spring, hibernate, jpa

例如，我有一个表“goods”，它有一个“categoryId”列，这是另一个带有 id 和名称的“category”表。

创建`goods`实体时，我有`name`，`categoryId`手头，我需要先查询类别实体，然后在`goods`实体中调用“setCategory”函数，最后将其保存到数据库中。

这对我来说看起来不太好，每次创建`goods`实体时，我都需要先通过其 id 查询类别实体，我想知道是否有任何简单、高性能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:45:32.687

假设类别是主数据，您可能希望将类别缓存在内存中。从缓存中检索类别对象将是高性能的。`Hibernate`具有良好的缓存支持，例如[二级缓存](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-cache)、[查询缓存](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-querycache)等。我建议您使用相同的缓存。

[ehcache](http://ehcache.org/documentation/user-guide/hibernate)是另一种用于缓存的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:34:20.370

类别实体将被[缓存](http://docs.oracle.com/javaee/6/api/javax/persistence/Cache.html)，因此除非每个“商品”实体引用不同的类别，否则您可能会获得可接受的性能。

如果您真的很担心，可以使用[EntityManager.getReference](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#getReference%28java.lang.Class,%20java.lang.Object%29)来检索类别实体的轻量级版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-06T22:07:53.937

除非您有性能问题，否则不要做任何事情！通过 id 查询类别并添加到商品中就可以了！不要试图找到没有的问题

# iphone - 将相框实时叠加到您的相机视图中

> ID：13908891
> 
> 赞同：-4
> 
> 时间：2012-12-17T05:43:16.210
> 
> 标签：iphone, ios6

在 Itunes 商店有一个名为Photoframes **[Pro](https://itunes.apple.com/my/app/photoframes-pro/id374202806?mt=8)**的 iCoder 应用程序，我可以在其中将自己的帧导入应用程序并在我的相机视图中查看该帧。拍摄照片将在相机胶卷中生成带有相框的照片副本。这个应用程序自 2010 年以来没有更新，程序员是主要的开发者开膛手。

我想知道是否有人知道现有的应用程序可以做同样的事情或协助创建类似的东西。

请注意，我不是程序员/开发人员，因此非常感谢外行的术语。

谢谢。杰罗姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:50:32.180

`UIImagePickerController`您可以使用其属性添加overlayView `cameraOverlayView`..

```
yourImagePicker.cameraOverlayView = yourOverLayView;//set view as a overlay with your image here 
```

请参阅本教程并进行解释： [iOS Camera Overlay Example Using AVCaptureSession](http://www.musicalgeometry.com/?p=1273)

我希望这可以帮助你...

# jquery - 与控制组位于同一行的 jQuery Mobile 按钮

> ID：13908906
> 
> 赞同：0
> 
> 时间：2012-12-17T05:44:43.980
> 
> 标签：jquery, jquery-mobile

我在页面中有一些 html。在页脚上，我希望 Today 和 Refresh 按钮与控件组位于同一行，按钮左右对齐，控件组居中。有没有什么简单的方法可以用 jQuery Mobile 做到这一点？

```
 <div data-role="page" id="display_appointments">
        <div data-theme="a" data-role="header">
            <a href="#" data-icon="delete">Menu</a>
            <h3>
                Appointments
            </h3>
            <a href="#" data-icon="delete">Add</a>
        </div>

        <div data-role="content">
            Appointments here
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">
            <a href="#display_appointments" data-role="button">Today</a>
            <div data-role="controlgroup" data-type="horizontal">
                <a href="#display_appointments" data-role="button">Day</a>
                <a href="#display_appointments_list" data-role="button">List</a>
                <a href="#display_appointments_month" data-role="button">Month</a>
            </div>
            <a href="#display_appointments" data-role="button">Refresh</a>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:14:41.223

这是一个适合您的工作示例：http: [//jsfiddle.net/Gajotres/MADn7/](http://jsfiddle.net/Gajotres/MADn7/)

要使其工作，您需要一个 jQuery Mobile 插件：http: [//jeromeetienne.github.com/jquery-mobile-960/](http://jeromeetienne.github.com/jquery-mobile-960/)。这是一个纯 css 插件，它用于一个非常灵活的网格，然后是默认的 jQM 网格。

另一件事是，控制组必须包裹在水平居中的 div 中。您将在示例中找到所有内容。

```
<fieldset class="container_12">
    <div class="grid_2">
        <a href="#display_appointments" data-role="button">Today</a>        
    </div>
    <div class="grid_8">
        <div id="justify-div">
            <div data-role="controlgroup" data-type="horizontal">
                <a href="#display_appointments" data-role="button">Day</a>
                <a href="#display_appointments_list" data-role="button">List</a>
                <a href="#display_appointments_month" data-role="button">Month</a>
            </div>
        </div>
    </div>       
    <div class="grid_2">
        <a href="#display_appointments" data-role="button">Refresh</a>        
    </div>       
</fieldset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:03:12.960

您可以使用布局网格将多个元素放在一行上。

[http://jquerymobile.com/demos/1.2.0/docs/content/content-grids.html](http://jquerymobile.com/demos/1.2.0/docs/content/content-grids.html)

# mysql - 索引以获取 5 亿行数据库 mysql 上的唯一字段

> ID：13908909
> 
> 赞同：0
> 
> 时间：2012-12-17T05:44:58.067
> 
> 标签：mysql, indexing, large-data

我有一个庞大的数据库，其中大多数字段都是长字符串（DNA 序列）。目前它大约有 5 亿行。对于我的初始表，我只想要实现到此数据结构中的所有 5 亿行。

```
Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Null 

0          | PRIMARY  | 1            | prim_id     | A         | 2654074     | NULL     | NULL   |      
1          | cdr3seq  | 1            | cdr3seq     | A         | 2654074     | NULL     | NULL   | 
1          | cdr3aa   | 1            | cdr3aa      | A         | 2654074     | NULL     | NULL   | 
1          | v_gene   | 1            | vg          | A         | 53081       | NULL     | NULL   | 
1          | d_gene   | 1            | dg          | A         | 46562       | NULL     | NULL   | 
1          | j_gene   | 1            | jg          | A         | 14269       | NULL     | NULL   | 
1          | donor    | 1            | donor       | A         | 1092        | NULL     | NULL   |      
1          | seq_id   | 1            | seq_id      | A         | 2654074     | NULL     | NULL   |      
1          | seq      | 1            | seq         | A         | 2654074     | NULL     | NULL   | 
```

它们都是 B-tree 并且属于同一个表（省略适合 - 忽略基数，这是从上传过程中获取的）。我只需使用 auto_increment 主 ID (prim_id) 即可轻松上传此表。但是当我添加索引时，需要永远写出巨大的临时表。另一方面，如果我先设计表格，则上传需要很长时间。我缺少一些 sql server 选项吗？我目前正在运行一个 Innodb 引擎。等待索引是不可避免的吗？我必须这样做的原因是因为所有这些列最终都会在某个时候被分组。例如，我想从该表创建另一个表，该表只是唯一的`seq`，但如果不首先对该表进行索引，则无法执行此操作。我会以正确的方式解决这个问题吗？

此外，对于唯一表，我也尝试过重新上传具有唯一`seq`索引字段的数据文件。这也花费了太多时间。

非常感谢，

PS，我有一个 24 核 64GB 服务器，我正在使用这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:57:06.203

使用 mysql，您可以暂时禁用非唯一索引：

```
ALTER TABLE tbl_name DISABLE KEYS;

-- Do lots of inserts without updating the index every row

ALTER TABLE tbl_name ENABLE KEYS; -- Indexes are refreshed once here 
```

为了进一步加快插入速度，请将插入包装在事务中，而不是每次插入都提交：

```
ALTER TABLE tbl_name DISABLE KEYS;

START TRANSACTION;
-- Do lots of inserts without updating the index or committing every row
COMMIT; -- Inserts are committed in one operation here

ALTER TABLE tbl_name ENABLE KEYS; -- Indexes are refreshed once here 
```

确保不要在每个事务中加载*太多*，否则您将达到日志高水位标记并获得异常，并且所有内容都将回滚（反复试验，但一次尝试 10000）。

# deployment - 如何在不重启 jboss 服务器的情况下部署 Web 应用程序

> ID：13908910
> 
> 赞同：1
> 
> 时间：2012-12-17T05:45:01.380
> 
> 标签：deployment, web, jboss, restart

我是 jboss 服务器的新手。我有 jboss-4.2.3 服务器。我在单个服务器中有很多应用程序。我需要在不重新启动 jboss 服务器的情况下部署我的应用程序。可能吗？如果是这样，有哪些选择可以做到这一点？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:18:02.313

是的，您只需在部署目录中移动应用程序（ear 或 war），JBoss 将自动重新部署它（假设您已激活热部署扫描程序）。如果以前版本的应用程序已经部署在 JBoss 中，它也会自动重新部署。

但是请记住，在生产环境中不建议热部署，因为根据应用程序的不同，它可能会失败（例如，一个常见的问题是，有时在重新部署war时没有重新编译jsp，所以之前的jsp仍然会发送给用户）。如果您仍然想/需要使用热部署，为了尽量减少此类问题，您可以配置 JBoss 自动删除旧的 jsp 编译类`deleteWorkDirOnContextDestroy`，将文件中的属性设置为 true `deploy/jbossweb-tomcat55.sar/META-INF/jboss-service.xm‌​l`，这将使热部署更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:55:57.997

如果您的应用程序已经部署并且您想要重新部署 -->>

如果 jboss 在“开发模式”下运行，那么您可以使用“触摸”到 app/WEB-INF/web.xml（或打开 web.xml 并保存），通过这种方式更新其时间戳。

如果您的应用程序是 jboss 的新手，那么 ->>

把你的耳朵/战争部署文件夹服务器将部署它。

# java - 嵌套while循环不循环？

> ID：13908914
> 
> 赞同：0
> 
> 时间：2012-12-17T05:45:21.593
> 
> 标签：java

这是代码：

```
while (keepGoingDay.equals("y") || keepGoingDay.equals("y")){
        System.out.println(acct1);
        System.out.println(acct2);
        Account.reset();

        while (keepGoing.equals("y") || keepGoing.equals("y"))
            {
            //get account number, what to do, and amount
            System.out.print("\nEnter the number of the account you would like to access: ");
            acctNumber = scan.nextLong();
            System.out.print("Would you like to make a deposit (D) or withdrawal (W)? ");
            action = scan.next();
            System.out.print("Enter the amount: ");
            amount = scan.nextDouble();

            if (amount > 0)
                if (acctNumber == acct1.getAcctNumber())
                if (action.equals("w") || action.equals("W"))
                    acct1.withdraw(amount);
                else if (action.equals("d") || action.equals("D"))
                    acct1.deposit(amount);
                else 
                    System.out.println("Sorry, invalid action.");
                else if (acctNumber == acct2.getAcctNumber())
                if (action.equals("w") || action.equals("W"))
                    acct1.withdraw(amount);
                else if (action.equals("d") || action.equals("D"))
                    acct1.deposit(amount);
                else 
                    System.out.println("Sorry, invalid action.");
                else
                System.out.println("Sorry, invalid account number.");
            else
                System.out.println("Sorry, amount must be > 0.");

            System.out.print("\nMore transactions? (y/n)");
            keepGoing = scan.next();        
            }
        System.out.println("End of day stats: ");
        System.out.println("Number of deposits: " + Account.getNumDeposits());
        System.out.println("Number of withdrawals: " + Account.getNumWithdrawals());
        System.out.println("Total value of deposits: " + Account.getTotalDeposits());
        System.out.println("Total value of withdrawals: " + Account.getTotalWithdrawals());
        System.out.print("More days?");
        keepGoingDay = scan.next();
         }

} 
```

我认为这些方法对此不太重要，因此我将它们排除在外以节省空间。

该程序的目标是记录和计算多天的交易（金额未知，因此我无法使用 for 循环）。

它通过了第一次运行正常，之后，它跳过了内部的 while 循环。

我看过牙套，认为这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:50:20.980

你是说`Y`还是`y`：

```
while (keepGoing.equals("Y") || keepGoing.equals("y")) 
```

您的代码正在测试同一件事，即`y`两次。

仅供参考，您的测试可以简化为：

```
while (keepGoing.equalsIgnoreCase("y")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:58:30.763

放在`scan.next();` 你的`acctNumber = scan.nextLong();`行和`amount = scan.nextDouble();`行之后。

像这样。检查我新添加的行。

```
 System.out.print("\nEnter the number of the account you would like to access: ");
            acctNumber = scan.nextLong();
            scan.next(); // newly added
            System.out.print("Would you like to make a deposit (D) or withdrawal (W)? ");
            action = scan.next();
            System.out.print("Enter the amount: ");
            amount = scan.nextDouble();
            scan.next(); // newly added 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:07:18.093

如果我可以灵活地更改骨架程序，我会使用布尔变量。

但是，您必须实施的解决方案是将 keepGoing 重置为“y”，因为它被设置为“n”，导致它被跳过。

# agile - 如何使用三个类似的基于 Web 的产品来实施 Scrum

> ID：13908916
> 
> 赞同：0
> 
> 时间：2012-12-17T05:45:27.337
> 
> 标签：agile, scrum, product-management

我对 Scrum 的概念和好处有些熟悉。考虑到这一点，我正在努力改善我现在工作的一家公司失败的 Scrum 产品管理结构，该公司拥有三个独立的 B2C 产品，满足相同的人群并在同一个网站上访问。每个产品背后都有一个产品所有者和一个独特的开发团队。

鉴于目标受众相似（不确定是否重要）并且 3 个 Web 产品在性质上相似，合并团队和只有一个产品所有者和一个开发团队相关的潜在好处/风险是什么？想到的一些问题是：如果您的网站有三个不同的产品，那么拥有 3 个产品所有者和三个不同的 backlog 是否有意义？此外，如果您只有一个产品负责人，那么选择谁的最佳指标是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T18:43:06.187

在查看如何处理团队之前，请尝试确定导致失败的原因。

你在进行回顾吗？团队是否就如何改进提出了任何解决方案/建议（scrum 强调团队和个人责任——团队应该是解决方案的参与者）

多个 PO 几乎肯定会导致团队环境更加混乱。PO 的部分优雅之处在于为团队提供了一个负责人，以最终批准“什么”问题。

但我已经超前了——首先，要非常了解这些问题。

你需要合并团队吗？我不知道，但 7 +- 2 规则是一个非常好的经验法则。如果你在做类似的事情，也许你需要一个架构团队。也许您的团队配置很好，但您的工作流程中还有其他问题。

强烈考虑引进一位优秀的 Scrum 教练。那里有许多培训和指导咨询公司，这些人在全国各地旅行，帮助像我们这样的人实施。

我现在已经实施了两次 scrum，老实说，如果不是因为引入培训，它就不会像现在这样顺利。（你还必须有管理层的赞助——如果我的实施，我什至可以让 CIO 参加培训——这是变革性的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:20:01.210

一些额外的上下文会很有用。

团队有多大？（记住 7 +/- 2 团队规模指南。）它们是跨职能的吗？

是什么赋予了每个产品独特的个性？相反，将每个产品的“生物和技术独特性”添加到产品集合中会得到什么？

您多久部署一次网络？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-23T23:51:27.070

这不是团队问题，而是管理问题。作为 Scrum Master，您的职责是指导功能障碍，在这种情况下，您强调了一些值得关注的问题；因为产品之间存在不一致，并且可能不是最佳的团队绩效。

与现有产品所有者一起感受你的观察，并确定他们是否认为这是一个问题。每个产品所有者都有选择他们将如何管理它的特权。由于这些不同的网站可能会不一致并影响公司品牌，因此由 PO 选择做/不做，因为这是他们的风险。

如果他们确实觉得品牌处于危险之中，那么接下来就是将三个团队放在一起（开会），并向他们提出相同的问题。然后让他们解决它，看看他们想出了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T16:48:21.300

您说“公司的 Scrum 产品管理结构失败”，我建议您首先尝试准确了解公司当前的 Scrum 流程 *失败的原因。*

对于简单地尝试合并这三个团队，我会非常谨慎，这样做可能会对公司文化造成很大的破坏，伴随着阻力，但仍然无法获得你想要的结果。

了解当前失败的一种好方法是找到一种方法来可视化您的工作流程。这应该有助于暴露开发生命周期中的任何瓶颈和/或错过的期望。

看板是一种很好的技术，不需要任何新的流程或更改就位！只需在白板上通过泳道绘制您当前的工作流程，尝试限制白板上的 WIP，并围绕看板执行您的日常站立式 Scrum 会议。这应该使您能够非常快速地了解并确定当前流程中的*失败之处*。

[这是看板的一个很好的概述。](http://www.agileproductdesign.com/blog/2009/kanban_over_simplified.html)

我还推荐 Henrik Kniberg 的“Lean from the Trenches”作为另一个很好的资源。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-14T18:25:16.503

简单地想，如果您要将所有三种产品合并为一个，那么您将不得不对 PO 做同样的事情，但如果您的产品将继续单独存在，您将不得不为每个产品保留 PO。

我认为“性质相似”会导致诸如“两种产品具有相同功能”或“三种产品的总体方向是什么以及它们如何干扰”之类的问题。要解决这类问题，您可以使用“scrum of scrums”，通常是每周一次的会议，其中包括所有团队成员，每个团队都在分享他们即将到来的 sprint 的目标。这种协作可以更好地了解谁在做什么以及它如何影响整个系统。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-13T11:46:24.960

“相似的目标受众”并不是合并团队的好理由。

在团队规模的限制下，三个产品是三个团队的良好基础。团队需要足够大以包含所有必要的技能，同时又要足够小以消除冗余的通信路径。

除此之外，如果没有更多您似乎不愿意提供的上下文，就不可能帮助您确定他们“失败的 Scrum”的原因。

因此，唯一的建议是；聘请高质量的 Scrum 教练，或者如果不可行，请识别[气味](http://www.mountaingoatsoftware.com/articles/toward-a-catalog-of-scrum-smells)并应用说明性解决方案。

# java - 从数据库中获取数据并将其显示在 android 应用程序上

> ID：13908920
> 
> 赞同：0
> 
> 时间：2012-12-17T05:45:49.117
> 
> 标签：java, php, android, mysql, xml

我在 MySQL 上设计了我的数据库并通过 php 链接它。如何使用 HTTP GET 方法在 android 应用程序上获取它？？？我为此目的使用 JSON Parsing 从 MYSQL 获取数据，但我无法显示：（（现在我想从 HTTP GET 请求中获取数据，那么我该如何使用它？？我是否将我的数据库上传到服务器？？？怎么能我上传了？？还有什么方法。我会感谢你的帮助

MySQL数据库是：

```
 <?php
// read_My_Task.php

/*
 * Following code will get single task details
 * A task_detail is identified by task id (cid)
 */
 // array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for post data
if (isset($_GET["cid"])) {
    $cid = $_GET['cid'];

    // get a task from my-task table
    $result = mysql_query("SELECT *FROM my_task WHERE cid = $cid");

    if (!empty($result)) {
        // check for empty result
        if (mysql_num_rows($result) > 0) {

            $result = mysql_fetch_array($result);

            $my_task = array();
            $my_task["cid"] = $result["cid"];
            $my_task["cus_name"] = $result["cus_name"];
            $my_task["contact_number"] = $result["contact_number"];
            $my_task["ticket_no"] = $result["ticket_no"];
            $my_task["task_detail"] = $result["task_detail"];

            // user node
            $response["my_task"] = array();

            array_push($response["my_task"], $my_task);
            // echoing JSON response
            echo json_encode($response);         
             }            

        else {
            // no task found
            $response["success"] = 0;
            $response["message"] = "No task found";

            // echo no users JSON
            echo json_encode($response);
        }
    } else {
        // no task found
        $response["success"] = 0;
        $response["message"] = "No task found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}

?> 
```

LogCat 错误是：

```
12-17 11:00:39.180: W/System.err(10667): org.apache.http.conn.ConnectTimeoutException: Connect to /198.168.0.29:80 timed out
12-17 11:00:39.180: W/System.err(10667):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121)
12-17 11:00:39.180: W/System.err(10667):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
12-17 11:00:39.180: W/System.err(10667):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-17 11:00:39.180: W/System.err(10667):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-17 11:00:39.180: W/System.err(10667):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
12-17 11:00:39.180: W/System.err(10667):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-17 11:00:39.180: W/System.err(10667):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-17 11:00:39.180: W/System.err(10667):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-17 11:00:39.180: W/System.err(10667):    at com.example.visit.record.JSONParser.makeHttpRequest(JSONParser.java:62)
12-17 11:00:39.180: W/System.err(10667):    at com.example.visit.record.My_Task$GetTaskDetails.doInBackground(My_Task.java:170)
12-17 11:00:39.180: W/System.err(10667):    at com.example.visit.record.My_Task$GetTaskDetails.doInBackground(My_Task.java:1)
12-17 11:00:39.180: W/System.err(10667):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
12-17 11:00:39.180: W/System.err(10667):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
12-17 11:00:39.180: W/System.err(10667):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
12-17 11:00:39.180: W/System.err(10667):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
12-17 11:00:39.180: W/System.err(10667):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
12-17 11:00:39.190: W/System.err(10667):    at java.lang.Thread.run(Thread.java:1027)
12-17 11:00:39.190: E/Buffer Error(10667): Error converting result java.lang.NullPointerException
12-17 11:00:39.190: E/JSON Parser(10667): Error parsing data org.json.JSONException: End of input at character 0 of 
12-17 11:00:39.190: W/dalvikvm(10667): threadid=9: thread exiting with uncaught exception (group=0x400205a0)
12-17 11:00:39.200: E/AndroidRuntime(10667): FATAL EXCEPTION: AsyncTask #1
12-17 11:00:39.200: E/AndroidRuntime(10667): java.lang.RuntimeException: An error occured while executing doInBackground()
12-17 11:00:39.200: E/AndroidRuntime(10667):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at java.lang.Thread.run(Thread.java:1027)
12-17 11:00:39.200: E/AndroidRuntime(10667): Caused by: java.lang.NullPointerException
12-17 11:00:39.200: E/AndroidRuntime(10667):    at com.example.visit.record.My_Task$GetTaskDetails.doInBackground(My_Task.java:174)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at com.example.visit.record.My_Task$GetTaskDetails.doInBackground(My_Task.java:1)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
12-17 11:00:39.200: E/AndroidRuntime(10667):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
12-17 11:00:39.200: E/AndroidRuntime(10667):    ... 4 more
12-17 11:00:39.510: E/WindowManager(10667): Activity com.example.visit.record.My_Task has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4054caf0 that was originally added here
12-17 11:00:39.510: E/WindowManager(10667): android.view.WindowLeaked: Activity com.example.visit.record.My_Task has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4054caf0 that was originally added here
12-17 11:00:39.510: E/WindowManager(10667):     at android.view.ViewRoot.<init>(ViewRoot.java:277)
12-17 11:00:39.510: E/WindowManager(10667):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
12-17 11:00:39.510: E/WindowManager(10667):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
12-17 11:00:39.510: E/WindowManager(10667):     at android.view.Window$LocalWindowManager.addView(Window.java:433)
12-17 11:00:39.510: E/WindowManager(10667):     at android.app.Dialog.show(Dialog.java:288)
12-17 11:00:39.510: E/WindowManager(10667):     at com.example.visit.record.My_Task$GetTaskDetails.onPreExecute(My_Task.java:149)
12-17 11:00:39.510: E/WindowManager(10667):     at android.os.AsyncTask.execute(AsyncTask.java:391)
12-17 11:00:39.510: E/WindowManager(10667):     at com.example.visit.record.My_Task.onCreate(My_Task.java:108)
12-17 11:00:39.510: E/WindowManager(10667):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
12-17 11:00:39.510: E/WindowManager(10667):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
12-17 11:00:39.510: E/WindowManager(10667):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
12-17 11:00:39.510: E/WindowManager(10667):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
12-17 11:00:39.510: E/WindowManager(10667):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
12-17 11:00:39.510: E/WindowManager(10667):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 11:00:39.510: E/WindowManager(10667):     at android.os.Looper.loop(Looper.java:143)
12-17 11:00:39.510: E/WindowManager(10667):     at android.app.ActivityThread.main(ActivityThread.java:4268)
12-17 11:00:39.510: E/WindowManager(10667):     at java.lang.reflect.Method.invokeNative(Native Method)
12-17 11:00:39.510: E/WindowManager(10667):     at java.lang.reflect.Method.invoke(Method.java:507)
12-17 11:00:39.510: E/WindowManager(10667):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-17 11:00:39.510: E/WindowManager(10667):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-17 11:00:39.510: E/WindowManager(10667):     at 
```

它给出了错误：

```
Status Code: 404 Not Found
Accept-Ranges: bytes
Content-Language: en
Content-Type: text/html; charset=iso-8859-1
Date: Mon, 17 Dec 2012 06:40:56 GMT
Keep-Alive: timeout=5, max=100
Proxy-Connection: Keep-Alive
Server: Apache/2.2.17 (Win32) mod_ssl/2.2.17 OpenSSL/0.9.8o PHP/5.3.4 mod_perl/2.0.4 Perl/v5.10.1
Transfer-Encoding: chunked
Vary: accept-language,accept-charset

Method: POST
URL: http://192.168.0.29/mobile/read_mytask.php?cid=1
Body: 
cid=cid &
cus_name=c
& contact_no=n
& ticket_no=t
& taskdetail=td 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:07:24.933

我将概述 Android 中客户端-服务器数据检索的工作原理。您可以从那里根据您的特定要求对其进行定制，因为您的问题表明我存在很大的基础知识差距。

您必须创建 REST API（通过使用 PHP、Ruby、Python 等语言编写服务器端代码），您的 Android 应用程序可以使用这些 API 从 MySQL 数据库中获取数据。

还有其他选项可以避免使用 REST API。看：

[如何从 MySql 服务器到 Android 应用程序？](https://stackoverflow.com/questions/2898823/get-data-to-android-app-from-mysql-server)

有关 REST 的初学者教程，请参见此处：

[http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/)

一旦你编写了 API。您可以使用 HTTP GET 请求查询它们并解析结果。如果您以 JSON 格式返回数据，这里有一个关于如何解析它的教程：

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

现在，您可以使用原生 android 方法将解析后的数据存储在本地数据库中。请参阅此处的数据库教程：

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

一旦这一切都结束了。您可以在本地数据库上执行 CRUD 操作以读取/操作您的数据并使用基于 XML 的 Android UI 将它们显示给用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-13T09:17:12.237

```
public class JsonHelper 
{
    static String response = null;
    String jsonRes = "";
    public JSONObject JObj=null;
    public final static int GET = 1;
    public final static int POST = 2;

//  public final static String fullUrl = "http://10.0.2.2/fluentcmsonline/";

public JsonHelper()
    {

    }

    public JSONObject MakeJsonCall(String Url,int method)
    {
        return this.MakeJsonCall(Url, method, null);
    }

    public JSONObject MakeJsonCall(String Url,int method, List<NameValuePair> params)
    {
        try
        {
            DefaultHttpClient HttpClient = new DefaultHttpClient();
            HttpEntity httpentity = null;
            HttpResponse httprespo = null;
            if(method==POST)
            {
                 HttpPost httppost = new HttpPost(fullUrl+Url);
                //HttpPost httppost = new HttpPost(Url);
                if(params != null)
                {
                    httppost.setEntity(new UrlEncodedFormEntity(params));
                }

                httprespo = HttpClient.execute(httppost);
            }
            else
            {
                if(params != null)
                {
                    String paramString = URLEncodedUtils.format(params, HTTP.UTF_8);

                    Url += "?"+paramString;     
                }

                 HttpGet httpget = new HttpGet(fullUrl+Url);
                //HttpGet httpget = new HttpGet(Url);

                httprespo = HttpClient.execute(httpget);
            }
            httpentity = httprespo.getEntity();

            if(httpentity != null)
            {
                InputStream is = httpentity.getContent();
                BufferedReader buffer = new BufferedReader(new InputStreamReader(is,"UTF-8"),8);

                StringBuilder Sb = new StringBuilder();
                String Line = null;

                while((Line = buffer.readLine())!=null)
                {
                    Sb.append(Line+"\n");
                }
                is.close();
                jsonRes = Sb.toString();

            }

        }
         catch (UnsupportedEncodingException e) {
                e.toString();
        } catch (ClientProtocolException e) {
            e.toString();
        } catch (IOException e) {
                e.toString();
        }

        try
        {
            JObj = new JSONObject(jsonRes);
            Log.e("Data", jsonRes);
        }
        catch(JSONException e)
        {
            e.printStackTrace();
        }

        return JObj;
    }

} 
```

# ios - iPad 普通话翻译 API

> ID：13908925
> 
> 赞同：2
> 
> 时间：2012-12-17T05:46:39.817
> 
> 标签：ios, objective-c, machine-translation

我想在我的 iPad 应用程序中实现普通话翻译功能，有没有我可以使用的免费 API，或者任何其他方式来做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:20:33.810

唯一免费的 API 是[http://msdn.microsoft.com/en-us/library/dd576287.aspx](http://msdn.microsoft.com/en-us/library/dd576287.aspx)

很长一段时间，人们都使用谷歌，但他们前段时间切断了免费使用。

# objective-c - Objective-c @“hello”和“hello”的区别？

> ID：13908926
> 
> 赞同：-1
> 
> 时间：2012-12-17T05:46:43.090
> 
> 标签：objective-c, c, cocoa

`@"hello"`Objective-C和之间有什么区别`"hello"`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T05:48:28.983

```
@"hello" 
```

创建一个`NSString`类的实例（它是一个正确的 Objective-C 对象），而

```
"hello" 
```

将创建一个简单的 C 字符串（类型为`const char[]`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:56:41.480

@"hello" 是 NSString(objective c class) 常量和 "hello" 字符串常量

# ruby-on-rails - 运行 rake db:migrate 时出错

> ID：13908931
> 
> 赞同：0
> 
> 时间：2012-12-17T05:47:15.350
> 
> 标签：ruby-on-rails

当我尝试使用 rake db:migrate:up VERSION=20121217051908 命令迁移单个文件时，会显示命令错误。'rake' 不是内部或外部命令、可运行程序或批处理文件。

然后我尝试使用 bundle exec rake db:migrate:up VERSION=20121217051908 再次显示错误。

```
WARNING: 'task :t, arg, :needs => [deps]' is deprecated.  Please use 'task :t, [
args] => [deps]' instead.
    at D:/ROR/appmallserver/lib/tasks/download_apk.rake:5:in `block in <top (req
uired)>'
rake aborted!
D:/ROR/appmallserver/lib/tasks/handster.rake:69: invalid multibyte char (US-ASCI
I)
D:/ROR/appmallserver/lib/tasks/handster.rake:69: invalid multibyte char (US-ASCI
I)
D:/ROR/appmallserver/lib/tasks/handster.rake:69: syntax error, unexpected $end,
expecting keyword_then or ';' or '\n'
            unless node.text == "Next ??"
                                        ^ 
```

（通过使用 --trace 运行任务查看完整跟踪）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:01:46.093

看起来 Ruby 在`»`. 把它放在最顶部`handster.rake`：

```
# encoding: utf-8 
```

# asp.net-mvc-3 - MVC3：在模型上加入查询

> ID：13908933
> 
> 赞同：0
> 
> 时间：2012-12-17T05:47:22.670
> 
> 标签：asp.net-mvc-3, linq, join

假设我有一个包含 4 个模型的大模型：m1、m2、m3、m4 我使用大模型是因为我的视图需要所有这些模型，但只能声明一个模型。因此我在 mu 视图中声明了大模型

我想对m1和m2返回的数据进行join查询；但我也想将此连接查询的结果返回到我的视图我该怎么做？我可以声明一个模型，其值将是连接查询的值吗？我怎么做？谢谢

**编辑**

说我有这个，（来自 Yasser 的例子）

```
public class MyMainModel {
public Students Student { get; set; }
public Cars Cars { get; set; }
public Houses house {get; set;}
}

public class Students {
   public int StudentNo { get; set; }
   public string Name { get; set; }
   public int Age { get; set; }
}

public class Houses{
    public int StudentNo {get; set;}
    public string houseName {get; set;}
}

public class Cars {
public int CarNo { get; set; }
public string Name { get; set; }
public string Make { get; set; }
} 
```

我希望我的主要模型 MyMainModel 具有汽车模型和显示学生姓名和房屋名称的模型。像这样的模型

```
public class ModelFromOtherModels{
   public int StudentNo {get; set;}
   public string HouseName {get; set;}
} 
```

这意味着我必须对 Student 和 Houses 模型执行 Join 查询。类似的东西

```
from s in Student
JOIN h in Houses ON h.StudentNo = s.Student No
Select new{
   StudentName = s.name,
   HouseName = h.houseName
} 
```

所以最后， MyMainModel 将是

```
public class MyMainModel {
   public ModelFromOtherModels newModel { get; set; }
   public Cars Cars { get; set; }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:14:18.120

有点难以理解你在这里问什么，但这是我的尝试......

考虑您的模型如下所示，其中 M1 是学生类，M2 是汽车类。

```
public class MyMainModel {
    public Students Student { get; set; }
    public Cars Cars { get; set; }
}

public class Students {
    public int StudentNo { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
}

public class Cars {
    public int CarNo { get; set; }
    public string Name { get; set; }
    public string Make { get; set; }
} 
```

这里的 MyMainModel 是一个类，现在将这两个类放在一起。现在剩下的取决于你的意思是`join query`什么？

你说

> 我想对m1和m2返回的数据进行join查询；

是的，您可以使用**LINQ**执行连接。

以下是我找到的几个链接，看看它们是否对您有帮助

*   [https://stackoverflow.com/a/9722744/1182982](https://stackoverflow.com/a/9722744/1182982)
*   [http://forums.asp.net/t/1354584.aspx](http://forums.asp.net/t/1354584.aspx)
*   [使用 linq 从两个对象列表创建列表](https://stackoverflow.com/questions/720609/merge-two-object-lists-with-linq)

# c - 信号量锁排队机制？

> ID：13908934
> 
> 赞同：3
> 
> 时间：2012-12-17T05:47:33.560
> 
> 标签：c, locking, queue, semaphore

```
function A(int a[])
{
SemLock()

  //Some Code....

SemUnlock()

} 
```

假设其他一些线程已经获取了相同的锁。因此，此功能被阻止。假设这个函数被许多其他线程调用。都会被屏蔽。Unlocking后，不同线程作为参数传入的数据（参数a[]）会丢失还是保留。这种数据排队是如何发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:55:18.570

参数`a[]`是线程特定的（不可共享），因此每个线程都有自己的`a[]`. 当一个线程创建了一个线程的数据结构。`a[]`存储在线程的堆栈中。

每个信号量变量都有一个线程队列。

```
typedef struct {
int count;
queue q; /* queue of threads waiting on this semaphore */
} Semaphore; 
```

[ANSWER]
`a[]`不会丢失。

# java - 如何将 jrtx 文件中定义的特定外部样式应用于 iReport？

> ID：13908936
> 
> 赞同：0
> 
> 时间：2012-12-17T05:47:58.623
> 
> 标签：java, jasper-reports

我正在使用 Jasper Reports 生成报告。我已经定义了自己的样式以应用于 jrtx 文件中的报告，并且我通过从 Java 程序传递参数来调用 jrtx 文件。它适用于嵌入在 jrtx 文件中的单一样式。我有 3 种不同的风格来申请所有的报告。我在 jrtx 文件中定义了所有 3 种样式。我的问题是只有 jrtx 中定义的第一个样式被应用。如何使所有 3 种不同的样式都适用于报告的不同部分？

我的 StyleTemplate1.jrtx

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jasperTemplate PUBLIC "-//JasperReports//DTD Template//EN" "http://jasperreports.sourceforge.net/dtds/jaspertemplate.dtd">

<jasperTemplate>
    <style name="ColumnHeader" isDefault="true" fontSize="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
    <style name="ColumnText" fontSize="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
    <style name="TitleHeader" fontSize="14" isItalic="true" isUnderline="true" isStrikeThrough="true"/>
</jasperTemplate> 
```

我的 jrxml

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="OPRS_Corporations" language="groovy" pageWidth="895" pageHeight="792" whenNoDataType="AllSectionsNoDetail" columnWidth="750" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isIgnorePagination="true">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <template><![CDATA[$P{TEMPLATE_FILE}]]></template>
    <parameter name="CompanyName" class="java.lang.String"/>
    <parameter name="Address1" class="java.lang.String"/>
    <parameter name="Email" class="java.lang.String"/>
    <parameter name="FaxNo" class="java.lang.String"/>
    <parameter name="TelNo" class="java.lang.String"/>
    <parameter name="WebAddress" class="java.lang.String"/>
    <parameter name="pCorpCode" class="java.lang.String"/>
    <parameter name="pCorpName" class="java.lang.String"/>
    <parameter name="LogoBaseDIR" class="java.lang.String"/>
    <parameter name="pLoginName" class="java.lang.String"/>
    <parameter name="pRoleName" class="java.lang.String"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String"/>
    <parameter name="pEmail" class="java.lang.String"/>
    <parameter name="TEMPLATE_FILE" class="java.lang.String"/>
    <queryString>
        <![CDATA[SELECT

          CORP_ID
    , CORP_CODE
    , HEAD_OFFICE
    , CORP_NAME
    , EMAIL
    , STATE_CODE
    , CREATED_BY
    , CREATED_DATE
    , MODIFIED_BY
    , MODIFIED_DATE

FROM OPRS_CORPORATION]]>
    </queryString>
    <field name="CORP_ID" class="java.math.BigDecimal"/>
    <field name="CORP_CODE" class="java.lang.String"/>
    <field name="HEAD_OFFICE" class="java.lang.String"/>
    <field name="CORP_NAME" class="java.lang.String"/>
    <field name="EMAIL" class="java.lang.String"/>
    <field name="STATE_CODE" class="java.lang.String"/>
    <field name="CREATED_BY" class="java.math.BigDecimal"/>
    <field name="CREATED_DATE" class="java.sql.Timestamp"/>
    <field name="MODIFIED_BY" class="java.math.BigDecimal"/>
    <field name="MODIFIED_DATE" class="java.sql.Timestamp"/>
    <filterExpression><![CDATA[($P{pCorpCode}.isEmpty()
    || $F{CORP_CODE}.equals( $P{pCorpCode} )
) &&
($P{pCorpName}.isEmpty()
    || $F{CORP_NAME}.contains( $P{pCorpName} )
)]]></filterExpression>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="81" splitType="Stretch">
            <subreport>
                <reportElement x="1" y="1" width="854" height="36"/>
                <parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
                <subreportParameter name="CompanyName">
                    <subreportParameterExpression><![CDATA[$P{CompanyName}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="Address1">
                    <subreportParameterExpression><![CDATA[$P{Address1}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="Email">
                    <subreportParameterExpression><![CDATA[$P{Email}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="FaxNo">
                    <subreportParameterExpression><![CDATA[$P{FaxNo}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="TelNo">
                    <subreportParameterExpression><![CDATA[$P{TelNo}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="WebAddress">
                    <subreportParameterExpression><![CDATA[$P{WebAddress}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="LogoBaseDIR">
                    <subreportParameterExpression><![CDATA[$P{LogoBaseDIR}]]></subreportParameterExpression>
                </subreportParameter>
                <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                <subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "OPRS_Header.jasper"]]></subreportExpression>
            </subreport>
            <staticText>
                <reportElement mode="Transparent" x="201" y="37" width="407" height="20"/>
                <textElement textAlignment="Center">
                    <font size="14" isBold="true" isUnderline="false"/>
                </textElement>
                <text><![CDATA[CORPORATIONS]]></text>
            </staticText>
            <textField evaluationTime="Report" pattern="dd/MM/yyyy HH:mm:ss" isBlankWhenNull="true">
                <reportElement x="719" y="59" width="136" height="20"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <textFieldExpression class="java.util.Date"><![CDATA[new Date()]]></textFieldExpression>
            </textField>
            <textField pattern="dd/MM/yyyy HH.mm.ss">
                <reportElement x="529" y="59" width="190" height="20"/>
                <textElement textAlignment="Right">
                    <font size="12" isBold="true"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$P{pLoginName}+"("+$P{pRoleName}+") / "]]></textFieldExpression>
            </textField>
            <line>
                <reportElement x="0" y="57" width="855" height="1"/>
            </line>
        </band>
    </title>
    <columnHeader>
        <band height="18" splitType="Stretch">
            <staticText>
                <reportElement x="186" y="0" width="233" height="17"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[CORP NAME]]></text>
            </staticText>
            <staticText>
                <reportElement x="420" y="0" width="130" height="17"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[HEAD OFFICE]]></text>
            </staticText>
            <staticText>
                <reportElement x="738" y="0" width="118" height="17"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[STATE CODE]]></text>
            </staticText>
            <staticText>
                <reportElement x="48" y="0" width="136" height="17"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[CORP CODE]]></text>
            </staticText>
            <staticText>
                <reportElement x="2" y="0" width="45" height="18"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[S.No]]></text>
            </staticText>
            <staticText>
                <reportElement x="551" y="0" width="186" height="17"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[EMAIL]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField isBlankWhenNull="true">
                <reportElement x="48" y="0" width="136" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{CORP_CODE}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToTallestObject" x="186" y="0" width="233" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{CORP_NAME}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement x="420" y="0" width="130" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{HEAD_OFFICE}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="752" y="0" width="103" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{STATE_CODE}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="2" width="47" height="18"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.Integer"><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="551" y="1" width="186" height="19"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{EMAIL}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

任何想法表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:54:08.683

我认为您应该能够单独设置元素的样式，至少在 iReport (http://www.jaspersoft.com/ireport-and-jasperserver-creating-chart-themes-and-styles-tutorial#createStyles) 中。我目前没有要测试的，但我记得 - 所以只需像在 iReport 中那样设计报告（在那里做样式部分），其余的用 JasperReports 完成。

# android - java.lang.IllegalStateException：从第 0 列第 16 行获取字段槽失败

> ID：13908937
> 
> 赞同：1
> 
> 时间：2012-12-17T05:47:59.860
> 
> 标签：android, database

我的应用程序运行良好，但是当我们第一次升级它时，它显示我们在 google play 的堆栈跟踪中出现错误。

**我的代码：**

```
public Cursor getContentData(String pc, String sc) {

        return database.rawQuery("SELECT * FROM content where pc=" + pc
                + " and sc=" + sc + "", null);
    } 
```

**错误**

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:200)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1027)
Caused by: java.lang.IllegalStateException: get field slot from row 0 col 16 failed
at android.database.CursorWindow.getString_native(Native Method)
at android.database.CursorWindow.getString(CursorWindow.java:369)
at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
at com.zengamedia.parser.LoadLiveData.doInBackground(LoadLiveData.java:68)
at com.zengamedia.parser.LoadLiveData.doInBackground(LoadLiveData.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:185)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:54:35.620

正如您的错误所说的那样：

> 引起：java.lang.IllegalStateException：从第 0 列第 16 行获取字段槽失败

可能**第 17 列在您的数据库查询**语句中有些缺失。

# objective-c - Objective C中存在内存问题的C数组

> ID：13908938
> 
> 赞同：0
> 
> 时间：2012-12-17T05:48:05.663
> 
> 标签：objective-c, c, memory-management, cocos2d-iphone

我的 C 布尔值数组在我第二次运行具有该数组的 Cocos2d 场景时没有保持它们的值。应用程序第一次启动时，c 数组工作正常并按预期响应，但是在场景被解除分配然后重新运行后，c 数组不会保留分配给它的值。我在下面的代码中做错了什么吗？

```
//.h
@interface GameplayLayer : CCLayer {
  bool playerLog[4];
  Hero *hero;
}

//.m
@implementation 
- (void)ccKeyDown:(NSEvent*)keyDownEvent{
    // Get pressed key (code)
    UInt16 keyCode = [keyDownEvent keyCode];
    // Set pressed key to true
    if (keyCode == 123) playerLog[0] = TRUE; // Left
    if (keyCode == 124) playerLog[1] = TRUE;  // Right
    if (keyCode == 126) playerLog[2] = TRUE;  // up
    if (keyCode == 125) playerLog[3] = TRUE;  // down
    // Other keys
    if (keyCode == 27) { } // Escape
}

 - (void)ccKeyUp:(NSEvent*)keyUpEvent
 {
     UInt16 keyCode = [keyUpEvent keyCode];
     // Set pressed key to true
     if (keyCode == 123) playerLog[0] = FALSE; // Left
     if (keyCode == 124) playerLog[1] = FALSE;  // Right
     if (keyCode == 126) playerLog[2] = FALSE;  // up
     if (keyCode == 125) playerLog[3] = FALSE;  // down
     // Other keys
    if (keyCode == 27) { } // Escape
}

-(void)update:(ccTime)delta {
  if (playerLog[0] == TRUE) {//false on the second run when key is pushed down} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:44:50.773

我看不到 init 方法，您应该创建一个 init 方法来初始化您的 ivars（尤其是`playerLog[]`）和/或使它们成为属性。

```
-(id)init
{
   if (self = [super init])
   {
     playerLog[0]=playerLog[1]=playerLog[2]=playerLog[3]=0;
     hero=nil; // or allocate it, not clear from your ex. how u use that.
   }
   return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:52:45.030

我建议您将您的转换`bool playerLog[4]`为 NSMutableArray 并使用，或者您可以从此[链接尝试](https://stackoverflow.com/questions/13709844/dynamic-allocation-in-objective-c-returning-pointers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:17:22.607

不管这里的原因是什么：您不应该将游戏状态保存在与视图相关的类中，在本例中为 CCLayer。

您应该有一个地方可以将游戏状态组合在一起，请参阅我在此处共享实例的文章：http: [//www.cocoanetics.com/2009/05/the-death-of-global-variables/](http://www.cocoanetics.com/2009/05/the-death-of-global-variables/)

# asp.net - 复合 C1 页面不在服务器上运行

> ID：13908939
> 
> 赞同：0
> 
> 时间：2012-12-17T05:48:14.273
> 
> 标签：asp.net, hosting, c1-cms

我在 WebMetrix -> Composite C1 上创建了我的网站并上传了由 webmetrix 生成的所有文件，但在服务器上我的页面没有运行。任何帮助。网址：- [http://newsolutionconsultancy.com/](http://newsolutionconsultancy.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:52:54.777

访问[http://newsolutionconsultancy.com/](http://newsolutionconsultancy.com/)时，会看到显示所有文件的“/”索引，如果我尝试打开[http://newsolutionconsultancy.com/default.aspx](http://newsolutionconsultancy.com/default.aspx)，我将获得该文件的源代码。

您的 Web 服务器正在热服务 ASP.NET，如果您想运行 Composite C1，这是一个要求。您需要获得另一个托管选项。

有关系统要求，请参阅[http://docs.composite.net/Getting-started/System-Requirements](http://docs.composite.net/Getting-started/System-Requirements)

# richfaces - RichFaces 中的鼠标悬停按钮缩放

> ID：13908940
> 
> 赞同：0
> 
> 时间：2012-12-17T05:48:14.847
> 
> 标签：richfaces

对于以下代码，如何在richFaces 中添加 onmouseover 功能

```
 <a4j:region id="auditbutton">                      
 <a4j:commandButton id="audit" image="images/audit.png" 
    action="#{agentBean.retrieveAuditInformation}"  oncomplete="javascript:popopen()"  status="ajaxStatus"> 
<rich:toolTip for="audit" value="View History" direction="top-left" styleClass="tooltip"/>  
       </a4j:commandButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:25:12.943

```
<a4j:commandButton ...... onmouseover="this.width = this.width + 5;" onmouseout="this.width = this.width - 5;"> 
```

# r - 加快大型 data.frame 中的 3 列 R 搜索

> ID：13908952
> 
> 赞同：2
> 
> 时间：2012-12-17T05:49:21.700
> 
> 标签：r, optimization, data.table

好吧。我已经对这个问题进行了大量编辑，以 a) 使其更有意义，并且 b) 反映我遇到的问题所在。

我有两个数据集——我们称它们为 set1 和 set2——每个数据集大约有 600 万行。目前，我将它们作为 data.tables 加载到 R 中。

```
>set1<-data.table(read.csv('~/file1.csv', stringsAsFactors=F))
>setkey(set1, id1)
>head(set1)
     id1 start_unixtime end_unixtime seconds_diff        id2
1:  1674     1354741858   1354741858            0  227167461
2:  1674     1354752386   1354752951          565  227246263
3:  1674     1354764412   1354764412            0  227358796
4:  1674     1354773044   1354773776          732  227421295
5:  1674     1354778651   1354778651            0  227448774
6:  1674     1354810424   1354810424            0  227631113
>set2<-data.table(read.csv('~/file2.csv', stringsAsFactors=F))
>setkey(set2, id1)
>head(set2)
     id1    unix_timestamp event_name
1:  1674    1355202784           join
2:  1674    1354351118           join
3:  1674    1354349648           play
4:  1674    1354780517           join
5:  1674    1355278891           join
6:  1674    1354617262           join 
```

需要指出的一个有问题的细节： set2 没有唯一键。只有每一行的元组实际上是唯一的。在 set1 中，id2 是唯一的。娱乐时间！

我正在执行的操作是这样的：对于 中的每一行`set2`，我需要获取 unix_timestamp，找到`set1`where`start_unixtimestamp <= unix_timestamp <= end_unixtimestamp`和 id1 匹配的行，然后将对应`set1.id2`的行分配给`set2`. in 的每一行`set2`都有一个 in 的条目`set1`，但不是 in 的每一行`set1`都有一个 in 的条目`set2`。一个`id2`可以分配给`set2`. 我需要结束的是这个（注意：以下数据是假的，因为我还没有能够产生任何实际的成功。）：

```
>head(set2)
     id1    unix_timestamp event_name         id2
1:  1674        1355202784       join   227167461
2:  1674        1354351118       join   227157309
3:  1674        1354349648       play   227157309
4:  1674        1354780517       join   227157309
5:  1674        1355278891       join   271089456
6:  1674        1354617262       join   221729485 
```

这是我制作的*一堆乱七八糟*的数据表：

```
set2[, id2 := set1[set2[, id1], list(start_unixtime, end_unixtime, id2)][(start_unixtime <= unix_timestamp & unix_timestamp <= end_unixtime), id2, by=id2]][, list(id2)][, id2:= id2] 
```

谈论我所理解的事情：

1.  `set2`调用赋值运算符`:=`
2.  右侧调用`set1`，它`joining`从 set2 中的 id1 行开始。
3.  `start_unixtime`、`end_unixtime`和列`id2`被选中。
4.  根据该结果，完成了第二组选择，它得到`id2`了`utc_timestamp`of和`id2`之间的位置。`start_unixtime``end_unixtime`
5.  ......在这里，我认为我做错了 - 因为在这一步，我似乎总是有两列，每列都标记`id2`并包含相同的结果。所以，我选择一列...
6.  ...并指定它进行分配。（我不知道为什么要这样做两次。我发现[了这个 SO 帖子](https://stackoverflow.com/questions/9705488/using-data-table-i-and-j-arguments-in-functions?rq=1)，它使用了第二个`:=`，而[这个](https://stackoverflow.com/questions/10703299/r-using-data-table-operations-to-calculate-new-columns?rq=1)没有，我根本不知道为什么。

...这是行不通的。@mnel 提出了类似的建议：

```
set2[set1, nomatch=0][unix_timestamp %between c(start_unixtime, end_unixtime, incbounds=T)] 
```

...当我用他的测试数据尝试它时，它有效，但不适用于我的数据。我突然想到我的数据可能是某种类型（字符？），它`data.table`（或 R 句点）可能无法正确强制？我可能很密集，但我似乎无法弄清楚如何调用`as.integer()`a 的指定列`data.table`。

**编辑**：是的，我的数据都是字符，我忘记了`data.table`继承自`data.frame`. 所以，一点点`set1$start_unixtime <- as.integer($set1$start_unixtime)`，至少我确信一切都是整数。但是，当我运行该命令时，我仍然得到这个：

```
>head(set2)
Empty data.table (0 rows) of 8 cols: id1,utc_timestamp,event_name,start_unixtime,end_unixtime,seconds_diff... 
```

**加法** 这里是我的实际数据的片段：

```
set1 <-  as.data.table(list(id1 = c(1674L, 1674L, 1674L, 1674L, 1674L, 1674L), 
     start_unixtime = c(1354741858L, 1354752386L, 1354764412L, 1354773044L, 1354778651L, 1354810424L), 
     end_unixtime = c(1354741858L, 1354752951L, 1354764412L, 1354773776L, 1354778651L, 1354810424L), 
    seconds_diff = c(0L, 565L, 0L, 732L, 0L, 0L), 
    id2 = c(227167461L, 227246263L, 227358796L, 227421295L, 227448774L, 227631113L))
set2 <- as.data.table(list(
    id1 = c(1674L, 1674L, 1674L, 1674L, 1674L, 1674L), 
    utc_timestamp = c(1354752431L, 1354780517L, 1354811978L, 1354824385L, 1354833271L, 1354862753L), 
    event_name = c("joinRegularTable_2", "joinRegularTable_2", "joinRegularTable_2", "joinRegularTable_2","joinRegularTable_2", "joinRegularTable_2")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T01:53:41.237

我不确定这是否适用于您的数据，因为您可能需要发布更完整的示例，但类似以下内容可能会起作用。它先进行 1 次连接（二分搜索），然后进行一次向量扫描（在幕后创建几个长逻辑向量，因此并不理想）

我提供了一个简单但更大的示例数据集，其中包含更多的复制。

```
DT <- as.data.table(list(id1 = c(5L, 1L, 5L, 1L, 5L, 3L, 5L, 3L, 1L, 3L), 
    id2 = 1:10, startunix = 1:10, endunix = 5:14))

DA <- as.data.table(list(id1 = c(3L, 5L, 5L, 5L), unixtime = c(5L, 1L, 6L, 12L)))

setkey(DA,id1)
setkey(DT,id1)

DT[DA, nomatch=0][unixtime %between% c(startunix, endunix)]

   id1 id2 startunix endunix unixtime
1:   5   1         1       5        6
2:   5   3         3       7        6
3:   5   5         5       9        6
4:   5   7         7      11        6 
```

为了解释它在做什么，它匹配`id1`, 并且`nomatch = 0`意味着这些不包括在内。这扩展到 DA[J(5)] 和 DT[J(5)] 中多行的所有组合 - 在这种情况下

```
 DA[J(5)]
   id1 unixtime
1:   5        1
2:   5        6
3:   5       12
> DT[J(5)]
   id1 id2 startunix endunix
1:   5   1         1       5
2:   5   3         3       7
3:   5   5         5       9
4:   5   7         7      11 
```

所以创建的合并数据集包含所有 12 种组合。（4次3）

然后，我使用函数`between`（包的一部分）对介于和之间`data.table`的那些值进行子集化。`unixtime``startunix``endunix`

据我所知，您将无法使用二进制搜索来查找某物是否在某个范围内（但是 @MatthewDowle，主要`data.table`包作者在 SO 上很活跃，可能会跳到这里并评论这是否是将来可能或可能）

# spring - 如何使用 activemq 实现 JMS 侦听器并进入我的 OpenXava 应用程序

> ID：13908953
> 
> 赞同：1
> 
> 时间：2012-12-17T05:49:23.227
> 
> 标签：spring, jms, activemq, openxava

前段时间，我使用 JMS 侦听器（用于接收消息）到标准 web 应用程序中，通常使用 JSF (ICEfaces) 用于 web 应用程序和 spring、activemq 等，用于 JMS 集成。

现在，我正在尝试在 OpenXava 应用程序中做同样的事情。所以，这就是我目前所做的：

*   我已将 listeners.xml 创建到 WEB-INF（与 web.xml 相同的位置，因为 OpenXava 我无法修改），其中包含以下内容（内容将由 OpenXava 自动添加到 web.xml）：

```
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<context-param>  
    <param-name>contextConfigLocation</param-name>  
    <param-value>  
        classpath:applicationContext.xml
    </param-value>  
</context-param> 
```

*   我已经创建了 applicationContext.xml（我已经测试过将它放置在 OpenXava 应用程序 src 文件夹以及 WEB-INF 中），其内容如下：

    ```
    <!-- Create the topic to connect to -->
    <bean id="TTCTopic" class="org.apache.activemq.command.ActiveMQTopic">
        <property name="physicalName" value="com.comp.app.message.tags"/>
    </bean>

    <!-- JMS Connection Factory -->
    <bean id="connectionFactory" class="org.apache.activemq.spring.ActiveMQConnectionFactory">
        <property name="brokerURL" value="tcp://127.0.0.1:1100"/>
    </bean>

    <!-- Spring Helper to listen to a JMS Destination -->
    <bean id="jmsContainer"
        class="org.springframework.jms.listener.DefaultMessageListenerContainer">
        <property name="connectionFactory" ref="connectionFactory" />
        <property name="destination" ref="TTCTopic" />
        <property name="messageListener" ref="messageReceiver" />
    </bean> 
    ```

*   然后，我创建了我的侦听器类 (com.comp.app.listeners.MessageReceiver)，它实现了 JMS MessageListener 接口，并具有处理接收到的消息的代码。

*   此外，我确实将 spring 和 activemq jar 放入我的 OpenXava 应用程序的 WEB-INF/Lib 中，并且我在项目的类路径中为每个 jar 添加了引用。

最后，我没有收到任何错误。

所以，毕竟问题是：弹簧上下文没有像应该做的那样被添加到 OpenXava web.xml 中......因为没有创建弹簧上下文，因此永远不会创建 JMS 侦听器。

那么，我在这里缺少什么？... 有一个更好的方法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:04:19.490

尝试明确指出 WEB-INF：

```
<context-param>
 <param-name>contextConfigLocation</param-name>
 <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

[官方文档](http://openxava.wikispaces.com/spring_en)指出将其直接添加到 web.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:38:40.177

好吧，也许这不是我问题的真正答案，但是没有找到为我的 OpenXava 应用程序创建 spring 上下文的方法（此处需要 ActiveMQ 定义和使用 spring 容器的 DI），我决定退出 spring 依赖项并按原样继续使用 ActiveMQ。因此，我继续创建一个 Consumer 类，该类创建与 JMS 代理的连接并使用特定主题来注册和启动我的侦听器，该侦听器准备接收 xml 编组消息并将其解组用于主进程。

由于 OpenXava 的领域驱动设计性质，我尽量不将配置与其他东西混淆。并且看到我无法将 spring 容器配置到我的 OX 应用程序中，那么这种新方法就可以毫不费力地工作。我还在通用（应用程序）控制器中创建了一个新的“启动”操作，它使用单例模式来保持与代理的连接会话以及将等待消息的 JMS 侦听器。

现在，我正在寻找如何将监听器集成到我的 OpenXava 应用程序中以刷新一些特定的瞬态视图的方法，这变得很棘手。但这将是一个新线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:53:36.600

我的建议是创建一个非常简单的 OpenXava 项目并按照[Spring 集成说明](http://openxava.wikispaces.com/spring_en)一步一步地进行操作，当它起作用时，您可以针对您的实际项目进行尝试。

但是，您选择不使用 Spring 会更好。

# ios - 尝试将 libz.1.2.3.dylib 添加到我的项目时出现问题

> ID：13908956
> 
> 赞同：1
> 
> 时间：2012-12-17T05:49:38.600
> 
> 标签：ios

我按照这个步骤

![在此处输入图像描述](../Images/97d0d6d446dc59719084d3a3d942005b.png)

从本地 Frameworks 文件夹中删除 libz.1.2.3。

在 Project Navigator 顶部选择您的项目。

选择您的应用程序目标。

打开“将二进制文件与库链接”。

点击“+” 只可用 libz.1.1.3.dylib 文件不可用 libz.1.2.3.dylib

![在此处输入图像描述](../Images/48fe051c6c23e646c6ca70e7a94eb76c.png)

我无法添加 libz.1.2.3.dylib.anyone 帮助我如何添加这个库文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T05:53:26.350

添加 libz.1.2.5.dylib 它在 Xcode 4.2 的 IOS 5 中运行良好

# php - 如何使用 PHP 从 CSV 中的第 x 行和第 y 列读取值？

> ID：13908960
> 
> 赞同：1
> 
> 时间：2012-12-17T05:50:23.400
> 
> 标签：php, csv, fgetcsv

我想知道是否可以从 CSV 中读取指定行号和列号的特定值。

假设我想从行号`44`和列号读取数据`K`？

我不想解析完整的 CSV。如何读取特定数据？

希望我清楚我的问题？任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:17:24.510

CSV 文件没有索引，因此您至少需要转到第 44 行并检索它：

```
$file = new SplFileObject($path);
$file->setFlags(SplFileObject::READ_CSV);
$single = new LimitIterator($file, $offset = 43, $limit = 1);
list($row) = iterator_to_array($single, false);
$k = 10;
echo $row[$k]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T06:10:40.877

```
Here is a function that accepts the path to a CSV file, and inserts all records to the given MySQL table, paying attention to the column names: 

<?php 
function csv_file_to_mysql_table($source_file, $target_table, $max_line_length=10000) { 
    if (($handle = fopen("$source_file", "r")) !== FALSE) { 
        $columns = fgetcsv($handle, $max_line_length, ","); 
        foreach ($columns as &$column) { 
            $column = str_replace(".","",$column); 
        } 
        $insert_query_prefix = "INSERT INTO $target_table (".join(",",$columns).")\nVALUES"; 
        while (($data = fgetcsv($handle, $max_line_length, ",")) !== FALSE) { 
            while (count($data)<count($columns)) 
                array_push($data, NULL); 
            $query = "$insert_query_prefix (".join(",",quote_all_array($data)).");"; 
            mysql_query($query); 
        } 
        fclose($handle); 
    } 
} 

function quote_all_array($values) { 
    foreach ($values as $key=>$value) 
        if (is_array($value)) 
            $values[$key] = quote_all_array($value); 
        else 
            $values[$key] = quote_all($value); 
    return $values; 
} 

function quote_all($value) { 
    if (is_null($value)) 
        return "NULL"; 

    $value = "'" . mysql_real_escape_string($value) . "'"; 
    return $value; 
} 
?> 
```

# asp.net-mvc - 将 Asp.net MVC4 从 beta 迁移到 4 时缺少程序集引用

> ID：13908970
> 
> 赞同：0
> 
> 时间：2012-12-17T05:51:14.647
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在从事从 Asp.net MVC4 beta 到 Asp.net MVC4 的迁移工作，但是我遇到了缺少 dll 引用的问题。请帮我 。

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = System.Web.Http.RouteParameter.Optional }
            );

            routes.MapRoute(
               name: "Default",
               url: "{controller}/{action}/{id}",
               defaults: new { controller = "Login", action = "Login", id = UrlParameter.Optional }
           );
        } 
```

上面的代码无法编译成功，Visual Studio 说`System.Web.Routing.RouteCollection' does not contain a definition for 'MapHttpRoute' and no extension method 'MapHttpRoute' accepting a first argument of type 'System.Web.Routing.RouteCollection' could be found (are you missing a using directive or an assembly reference?)`

更重要的是这种问题经常发生。因为这几天Asp.net MVC的版本变化太频繁了。Windows Azure Client ApI 的版本也是如此。这是一个非常烦人的问题。我希望有人能就如何处理它提供一些建议。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:29:24.190

我通过在 RouteConfig.cs 中添加对 System.Web.Http 的引用来解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-05T01:08:08.827

我遇到了同样的问题，但无法通过添加对 System.Web.Http 的引用来解决它。我仍然收到同样的错误：`System.Web.Routing.RouteCollection' does not contain a definition for 'MapHttpRoute'`。

I believe this is occurring because in the latest version of MVC4, MapHttpRoute is no longer supported.

As it turned out, the function `MapRoute` is identical in parameter construction. If you replace `MapHttpRoute` with `MapRoute`, you should be able to compile your code and move onwards.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T17:45:34.867

I solved this by adding a reference to `System.Web.Mvc.Html` and `System.Web.Mvc` in the `web.config`.

```
 <system.web>
    ...
    <httpRuntime targetFramework="4.5.2"/>
        <pages>
            <namespaces>
                <add namespace="System.Web.Mvc" />
                <add namespace="System.Web.Mvc.Html" />
            </namespaces>
        </pages>
    ...
  </system.web> 
```

# facebook - 我可以使用 Facebook 的学校群组来验证某人是否是学生吗？

> ID：13908976
> 
> 赞同：0
> 
> 时间：2012-12-17T05:51:42.993
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我可以使用 Facebook API 来获取哪些用户属于 Facebook 的学校群组产品吗？这是验证某人是否是学生的可靠方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:58:08.983

*这是验证某人是否是学生的可靠方法吗？*

不。

我给你举一个简单的反例。Facebook 的[Groups for Schools](https://www.facebook.com/about/groups/schools)使用 .edu 电子邮件地址进行验证。我已经二十年没有当学生了。我仍然有一个活跃的 .edu 帐户。傻大学！

此外，许多教育机构（我想到的是美国中学和学前教育）不提供电子邮件地址。

现在，如果您正在寻找一个粗略的衡量标准，它可能就足够了。

# objective-c - xcode中的导航栏或工具栏问题

> ID：13908977
> 
> 赞同：3
> 
> 时间：2012-12-17T05:51:48.733
> 
> 标签：objective-c, xcode

好的，我正在查看 iPhone iCal 应用程序，并且很好奇顶部栏是导航栏还是工具栏？我尝试使用两者，但我也无法弄清楚如何将按钮的大小更改为与右上角的 + 按钮一样小......非常困惑..我假设它是一个导航栏，但是当我阅读导航栏的描述，它说每当你要在栏上添加一个按钮或项目时，你不能直接连接它......不知道该怎么做......但是有人想帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T06:29:43.417

如果你提到[这个](http://productivebydesign.free.fr/wp-content/images/iphone_calendar.png) 不是`UITabBar`，它是`UINavigationBar`，最左边的按钮是内置的后退`UINavigationBar`按钮，而右边的那个是你可以添加的额外按钮，它在[这个问题](https://stackoverflow.com/questions/2504351/how-to-add-a-button-to-uinavigationbar)中清楚地显示，并更改类型（即，+按钮）您可以简单地使用更改按钮样式

```
 UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" 
                                                                    style:UIBarButtonSystemItemAdd target:nil action:nil]; 
```

添加按钮到`UINavigationBar`

```
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" 
    style:UIBarButtonSystemItemAdd target:nil action:nil];
rightButton.width=10;
rightButton.height=10;
    UINavigationItem *item = [[UINavigationItem alloc] initWithTitle:@"Title"];
    item.rightBarButtonItem = rightButton;
    item.hidesBackButton = YES;
    [bar pushNavigationItem:item animated:NO];
    [rightButton release];
    [item release]; 
```

但通常你会有一个导航控制器，使你能够编写：

```
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
    style:UIBarButtonSystemItemAdd target:nil action:nil];
self.navigationItem.rightBarButtonItem = rightButton;
[rightButton release]; 
```

希望这会有所帮助，问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:34:36.043

![在此处输入图像描述](../Images/a0c2f81b21823d9d18ce29133bb667d4.png)

带有红色圆圈的顶栏是定制`UINavigationaBar`的，带有绿色圆圈的栏是**定制设计**的。您可以使用以下编写的代码将系统定义的添加按钮添加到`UINavigationaBar`

```
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" 
                                                                    style:UIBarButtonSystemItemAdd target:nil action:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:17:08.717

我意识到实际上你不需要代码来让按钮缩小到日历应用右上角的 + 按钮的大小。事实上，一旦你进入故事板。打开右侧的实用程序选项卡。然后打开属性检查器。在它说标识符的地方，下拉选项卡有选项。选择添加选项。

# java - 使守护线程运行直到 JVM 退出

> ID：13908978
> 
> 赞同：0
> 
> 时间：2012-12-17T05:52:02.970
> 
> 标签：java, multithreading, daemon, background-process

在阅读了 throw Daemon threads 并根据我的要求实现之后提出了几个疑问。请澄清我

1.  我正在使用 ServletContextListener 类来调用需要运行 unitl JVM 退出的守护程序线程

    ```
    public void contextInitialized (ServletContextEvent event) {

         context = event.getServletContext();
         //getting from spring context
         MyServiceManager serviceManager = (MyServiceManager) ctx.getBean("myServiceManager");
         serviceManager.setDaemon(true);
         serviceManager.start();    
    } 
    ```

2.  在 ServiceManager 类中，我正在运行一个无限循环以永远运行程序，直到 JVM 存在

    ```
    public void run() {
        try {
            startService();
        } catch (Exception e) {
            logger.error("Error Occured in Background Process Runner");
        }
    }

    private void startService(){
        while(true){
           try{
            //invoke some new threads and do processing jobs until server/jvm stops
               }catch(Exception e) {
                //log but don't quit
               }
            }
        }
    } 
    ```

问题是，具有上述实现的守护线程会永远运行吗？如果没有，我应该怎么做才能完成我的工作。除非 JVM 停止（服务器停止），否则告诉它不要退出。

注意：我正在尽我的能力来格式化这篇文章。但是今天发生了一些事情，它没有被格式化:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:01:40.773

您的守护程序线程将运行直到`run()`方法终止，或者通过正常退出或抛出异常（或直到 VM 退出，这是您想要的）。由于你捕获了所有抛出的异常`startService()`，它会一直运行直到`startService()`返回或抛出异常，然后正常退出。

请注意，如果`startService()`在等待 I/O、睡眠或处于等待状态时被中断，则通常会抛出`InterruptedException`. 表现良好的线程通常在它们被中断时退出，因为这是告诉线程退出的正常方法。

请注意，将线程标记为守护进程仅意味着 VM 在关闭之前不会等到线程退出。关于线程终止的其他任何行为都不受线程是否为守护进程的影响。

# java - 如何从 Java 调用 Pro*C 代码？

> ID：13908980
> 
> 赞同：0
> 
> 时间：2012-12-17T05:52:10.040
> 
> 标签：java, sql, oracle, jdbc, oracle-pro-c

目前我正在做一个项目，我需要将 Oracle 表单应用程序迁移到 Java Web 应用程序。有一些表单调用 Oracle Pro*C 代码来向数据库插入和更新记录。

我需要从 Java 调用 Pro*C 代码。请帮助我提供一些有关如何调用 Pro*C 代码的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:23:01.477

对您来说最好的选择是拥有一个调用 Oracle Pro*C 代码进行插入和更新的 Pro C 包装应用程序。

在您的包装 Pro C 代码中，您可以接受命令行参数。前任：-

```
WrapperProC Insert <Value1> <Value2> <Value3>
WrapperProC Update <SearchValue1> <SearchValue2> <UpdateValue1> <UpdateValue2> 
```

在 Wrapper 中，您可以根据第一个（插入/更新）参数调用 Oracle Pro*C 代码以进行插入和更新。

您可以使用 Runtime.exec 或 ProcessBuilder 从 Java 调用 Wrapper。

**更新：**

如果您想要更高的性能，您可以通过一些套接字编程使 Wrapper 充当代理服务器，并使用您的 Java 代码作为客户端通过套接字连接到它并发送命令（插入/更新）

# visual-studio - 如何将新版本的 SQLite 与 Visual Studio 同步？

> ID：13908985
> 
> 赞同：1
> 
> 时间：2012-12-17T05:52:25.863
> 
> 标签：visual-studio, sqlite, windows-8, visual-studio-2012, windows-store-apps

当我今天启动 Visual Studio 时，我收到一条消息，说有更新。原来是 SQLite，我更新了它。

但是，现在我无法编译我的应用程序，因为我得到了消息，“*找不到 SDK”SQLite.WinRT，版本 = 3.7.14.1“。* ”

- 和警告：

*找不到引用的组件“SQLite for Windows Runtime”。*

Windows 运行时参考的 SQLite 现在被“装饰”了一个黄色的让步符号（图标/字形）。那么我需要做什么 - 声称是版本 3.7.14.1，所以我不知道谁或什么在寻找不同版本的 SQLite...？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T21:29:48.543

删除旧的引用并重新添加它应该可以解决问题。

# ado.net - 如何将 Task Parallel Iibrary 与 ADO .NET 数据访问一起使用

> ID：13908993
> 
> 赞同：1
> 
> 时间：2012-12-17T05:53:32.300
> 
> 标签：ado.net, task-parallel-library, .net-4.5

我正在尝试使用任务并行库（.Net 4.5）优化 ADO .NET（.Net 4.5）数据访问，例如，当从数据库中选择 1000,000,000 条记录时，我们如何才能有效地使用机器多核处理器与任务并行图书馆。如果有人发现使用完整的资源来获得一些想法，请发布:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:20:53.317

以下适用于所有 DB 访问技术，而不仅仅是 ADO.NET。

客户端处理通常是解决数据访问问题的错误场所。通过优化架构、创建适当的索引和编写适当的 SQL 查询，您可以将性能提高几个数量级。

当正确的查询可以返回重要的 2-3 条记录时，为什么要通过具有显着延迟的有限网络连接将 1M 记录传输到客户端进行处理？

RDBMS 系统旨在利用可用的处理器、RAM 和磁盘阵列尽可能快地执行查询。与客户端计算机相比，数据库服务器通常具有更多的 RAM 和更快的磁盘阵列。

您要进行哪种类型的处理？您是否正在尝试分析交易数据？在这种情况下，您应该首先将数据提取到报告中，或者更好的是 OLAP 数据库。具有适当索引和预先计算分析的星型模式可以比用于分析的 OLTP 模式快 1000 倍。

改进的 SQL 编码还可以带来 10 到 50 倍或更多的改进。不习惯 SQL 的程序员的一个典型错误是使用游标而不是集合操作来处理数据。这通常会导致可怕的性能下降，大约是 50 倍甚至更糟。

将所有数据拉到客户端逐行处理更糟糕。这本质上与使用游标相同，只是数据必须通过网络传输，并且处理必须使用客户端通常有限的内存。

异步处理提供任何优势的唯一地方是当您想要在处理完成时触发长操作并执行代码时。ADO.NET 已经使用 APM 模型 (BeginExecute/EndExecute)提供了[异步操作。](http://msdn.microsoft.com/en-us/library/zw97wx20.aspx)您可以使用 TPL 将其包装在一个任务中以简化编程，但您不会获得任何性能改进。

可能是您的问题根本不适合数据库处理。如果您的算法要求您多次扫描整个数据集，最好一次将所有数据提取为合适的文件格式，然后将其传输到另一台机器进行处理。

# c# - 为所有浏览器设置 cookie

> ID：13908998
> 
> 赞同：4
> 
> 时间：2012-12-17T05:54:00.663
> 
> 标签：c#, google-chrome, firefox, cookies, browser

我想为 FireFox 和 Chrome 设置一个特定于域的 cookie，它相当于`InternetSetCookie()`API，它接受一个 URL 和一个 cookie 名称和值，并为所有浏览器设置它。我已经检查过`InternetSetCookie()`它只适用于 IE。如果这很重要，我正在使用 C# + .NET 4.0（桌面应用程序）。

（只是为了澄清一下，这是一种密码管理器应用程序，用于存储用户最喜欢的网站的登录名/密码信息，单击应用程序中的按钮后，它会启动用户的默认浏览器，进入该网站的登录页面，提交POST 字段中的用户名/密码，并简单地将用户带到他的主页。其中一些网站发送 cookie 以响应登录页面请求，然后我需要在发出后续登录请求之前设置）。