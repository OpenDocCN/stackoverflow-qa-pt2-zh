# StackOverflow 问答 14694000-14694999

# ios - 需要点击显示当前位置

> ID：14694000
> 
> 赞同：0
> 
> 时间：2013-02-04T19:25:36.833
> 
> 标签：ios, map, click, mkmapview

我创建了一个按钮来显示用户的当前位置，但它无法正常工作。仅当我单击两次时才会显示用户的位置。第一次点击时，地图只显示蓝屏。

任何人都可以帮忙吗？

谢谢！！

```
#import "Mapa.h"
#import "MapViewAnnotation.h"
#import "CoreLocationController.h"

@implementation Mapa

@synthesize mapView;

@synthesize stringTitle;

@synthesize minhaL;

@synthesize myAnnotation;

@synthesize stringLat;

@synthesize stringLong;

@synthesize locationManager;

- (IBAction)showCurrentLocation {
    mapView.userTrackingMode=YES;
    mapView.showsUserLocation = YES;
    self.mapView.centerCoordinate = mapView.userLocation.coordinate;
    /*
     MKCoordinateRegion Region = MKCoordinateRegionMakeWithDistance(mapView.userLocation.coordinate, 1000,
     1000);
     MKCoordinateRegion adjustedRegion = [mapView regionThatFits:Region];
     Region.center.latitude = mapView.userLocation.coordinate.latitude;
     Region.center.longitude = mapView.userLocation.coordinate.longitude;

     Region.span.longitudeDelta = 0.01f;
     Region.span.latitudeDelta = 0.01f;

     [mapView setRegion:adjustedRegion animated:YES];
     */

}

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {

    [super viewDidLoad];

    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [locationManager startUpdatingLocation];

    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navBar1.png"] forBarMetrics:UIBarMetricsDefault];

    CLLocationCoordinate2D location;

    NSString *latitudeA = [NSString stringWithString:stringLat];
    double valorLatitude = [latitudeA doubleValue];

    NSString *longitudeA = [NSString stringWithString:stringLong];
    double valorLongitude = [longitudeA doubleValue];

    location.latitude = valorLatitude;
    location.longitude = valorLongitude;

    // Add the annotation to our map view
    myAnnotation = [[MapViewAnnotation alloc] initWithTitle:stringTitle andCoordinate:location];
    [self.mapView addAnnotation:myAnnotation];

    MKCoordinateRegion region;
    MKCoordinateSpan span;

    span.latitudeDelta=0.02;
    span.longitudeDelta=0.02;

    region.span=span;

    [mapView setRegion:region animated:YES];
    [mapView regionThatFits:region];

    [mapView setCenterCoordinate:myAnnotation.coordinate animated:YES];

}

- (void)locationManager: (CLLocationManager *)manager didFailWithError: (NSError *)error
{
    [manager stopUpdatingLocation];
    NSLog(@"error%@",error);
    switch([error code])
    {
        case kCLErrorNetwork: // general, network-related error
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"please check your network connection or that you are not in airplane mode" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }
            break;
        case kCLErrorDenied:{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"user has denied to use current Location " delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }
            break;
        default:
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"unknown network error" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }
            break;
    }
}

// Received memory warning
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

// If the view unloads, release the map view
- (void)viewDidUnload {

}

- (void)dealloc {

    [stringLong release];

    [stringLat release];

    [myAnnotation release];

    [minhaL release];

    [stringTitle release];

    [mapView release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:13:21.403

有多种方法可以让地图视图以用户为中心，你似乎做了其中的三种，但都错了。

1.  在`showCurrentLocation`您打开地图上的用户位置时，一微秒后您向它询问位置并尝试将其设置为您的中心，您还没有给它时间。

2.  在`viewDidLoad`您打开位置管理器但您尚未实现`didUpdateToLocation`接收位置信息时调用的方法。

3.  `mapView.userTrackingMode=YES`不好。跟踪模式不是布尔值，将其设置为[有效值](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/c_ref/MKUserTrackingMode)，它会做一些更有用的事情

以下是如何使用它们的摘要

1.  如果您想显示用户的蓝点并偶尔让他们以该位置为中心，请打开 showUserLocation 并在按下按钮时从地图中获取用户的位置。

2.  如果您只想在按下按钮时转到用户的位置，并且在其余时间不需要显示他们的位置，请启动位置管理器并实现缺少的委托方法。每次收到*有效*的位置数据时，将其保存在某处，当按下按钮时，您可以调用它并将其设置为中心。

3.  如果您想要标准地图按钮，该按钮将循环显示用户、跟踪用户并转向他们面对的方式，然后添加一个`MKUserTrackingBarButtonItem`并将该按钮链接到您的地图。然后它负责移动视图并根据用户按下的内容旋转它，如果他们滚动离开它，它会自行关闭。

# html - Quirks 模式与标准模式下的 IE 链接颜色

> ID：14694005
> 
> 赞同：0
> 
> 时间：2013-02-04T19:25:58.210
> 
> 标签：html, internet-explorer, firefox

下面是两个链接，其中下划线略带蓝色，另一个与文本颜色相同
![链接颜色](../Images/7ef3f60836f946e287b08d29f260227b.png)

使用以下代码html
`<font color="#003300"> CLX qualifications...</font></a>`

当我想以 IE 标准呈现我的页面时，我无法复制在 Quirks 模式下呈现链接的方式。当我也在 Firefox 中运行我的页面时，我的链接也会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:33:12.987

看起来字体颜色覆盖了默认`a:visited`样式。这个 CSS 应该可以满足您的需求：

```
a, a:hover, a:visited {
  color: #003300;
} 
```

这是一个[演示](http://jsfiddle.net/RBg6a/1/)（您也可以放弃对`font`标签的使用，这总是一件好事）

# python - 所有带有字符列表的字符串？

> ID：14694006
> 
> 赞同：0
> 
> 时间：2013-02-04T19:25:59.473
> 
> 标签：python, string, loops

我正在制作一个类似于 John the Ripper 的专用实用程序，并且我想使用一个循环来返回所有字符串，最多可以从字符串中形成 x 个字符。例如，如果“种子”字符串是`abcd`，它应该返回：

```
a
b
c
d
aa
ab
ac 
```

等等。如果字符限制为 10，则会生成`aaaaaaaaaa`, `abcddcbaaa`, 等等。是否有一个简单的`for`循环可以做到这一点，还是比这更复杂？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:42:15.160

我将从[这个答案](https://stackoverflow.com/questions/14381940/python-pair-alphabets-after-loop-is-completed/14382997#14382997)中自我剽窃并添加最大长度：

```
from itertools import product

def multiletters(seq, max_length):
    for n in range(1, max_length+1):
        for s in product(seq, repeat=n):
            yield ''.join(s) 
```

这使

```
>>> list(multiletters("abc", 2))
['a', 'b', 'c', 'aa', 'ab', 'ac', 'ba', 'bb', 'bc', 'ca', 'cb', 'cc']
>>> list(multiletters("abcd", 4))[:8]
['a', 'b', 'c', 'd', 'aa', 'ab', 'ac', 'ad'] 
```

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:19:19.593

Use itertools.permuataions.

```
for i in range(2,4):
    tuples = itertools.permutations('abca' , i)
    print( list(tuples)) 
```

The example code sequence generates:

[('a', 'b'), ('a', 'c'), ('a', 'a'), ('b', 'a'), ('b', 'c'), ('b', 'a'), ('c', 'a'), ('c', 'b'), ('c', 'a'), ('a', 'a'), ('a', 'b'), ('a', 'c')]

[('a', 'b', 'c'), ('a', 'b', 'a'), ('a', 'c', 'b'), ('a', 'c', 'a'), ('a', 'a', 'b'), ('a', 'a', 'c'), ('b', 'a', 'c'), ('b', 'a', 'a'), ('b', 'c', 'a'), ('b', 'c', 'a'), ('b', 'a', 'a'), ('b', 'a', 'c'), ('c', 'a', 'b'), ('c', 'a', 'a'), ('c', 'b', 'a'), ('c', 'b', 'a'), ('c', 'a', 'a'), ('c', 'a', 'b'), ('a', 'a', 'b'), ('a', 'a', 'c'), ('a', 'b', 'a'), ('a', 'b', 'c'), ('a', 'c', 'a'), ('a', 'c', 'b')]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T19:38:26.613

正如评论的使用所指出的，`itertools.premutations`或者甚至更好地看看@DSM的答案，因为这个错过了双打：

```
In [194]: from itertools import chain, permutations

In [195]: s = 'abcd'

In [196]: map(''.join,chain.from_iterable(permutations(s,x) 
                               for x in range(1,len(s)+1)))
Out[196]: 
['a',
 'b',
 'c',
 'd',
 'ab',
 'ac',
 'ad',
 'ba',
 'bc',
 'bd',
  ...
 'dbca',
 'dcab',
 'dcba'] 
```

无论如何，这是@DSM's answer的一个版本，它返回一个列表：

```
from itertools import product

def ms(seq, max_length):
    return [''.join(s) for n in range(1, max_length+1)
                       for s in product(seq,repeat=n)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T19:46:35.987

```
def all_strings(alphabet, length_limit=None):
  n_letters = len(alphabet)
  length = 0
  n_strings = 1
  buf = []
  while True:
    for i in xrange(0, n_strings):
      k = i
      for j in xrange(length - 1, -1, -1):
        buf[j] = alphabet[k % n_letters]
        k /= n_letters
      yield ''.join(buf)
    length += 1
    if length == length_limit:
      break
    n_strings *= n_letters
    buf.append(alphabet[0])

for s in all_strings('abcd', length_limit=4):
  print s 
```

# jquery - 将鼠标悬停在jQuery中的li元素上时如何定位跨度

> ID：14694008
> 
> 赞同：1
> 
> 时间：2013-02-04T19:26:16.460
> 
> 标签：jquery, html, internet-explorer, css-transitions

所以我在悬停时有一个 CSS 淡入淡出动画。

在此处查看主页上的 6 个矩形按钮：http: **[//athenasweb.com](http://athenasweb.com)**

当您将鼠标悬停在 ul 中的一个 li 上时。框标题为动画的蓝色区域。然而在 IE 中它只是完全切换到白色而没有动画。

所以我尝试使用 jQuery（我是 jQuery 菜鸟）仅在 IE 中修复该问题

```
<!--[if IE 9]>
        <script>
            $("ul#home_blocks li").hover(function(){$(this).next('span');.fadeOut(150);$(this).next('span');.fadeIn(300);});
        </script>
<![endif]--> 
```

然而没有效果

下面的代码有效！但是，它仅在您将鼠标悬停在跨度而不是整个 li 上时才有效，如果我删除跨度，则整个块都会动画，这不是我想要做的。

```
<!--[if IE 9]>
        <script>
            $("ul#home_blocks li span").hover(function(){$(this).fadeOut(150);$(this).fadeIn(300);});
        </script>
<![endif]--> 
```

今天下午有什么建议吗，堆垛机？:)

这是 HTML 和 CSS：

```
<ul id="home_blocks">

        <li> 
            <a href="http://athenasweb.com/category/aspects/" title="Check out Weekly Aspects"><img class="blocks" src="<?php bloginfo("template_url"); ?>/images/block_aspects.jpg" alt="Weekly Aspects"/> 
            <span class="block_title">Weekly Aspects</span></a>
        </li>

        <li>
            <a href="http://athenasweb.com/category/daily-planets/" title="Check out Daily Planets"><img class="blocks" src="<?php bloginfo("template_url"); ?>/images/block_planets.jpg" alt="Daily Planets"/>
            <span class="block_title">Daily Planets</span></a>
        </li>

        <li>
            <a href="http://athenasweb.com/category/column/" title="Read the Column"><img class="blocks" src="<?php bloginfo("template_url"); ?>/images/block_column.jpg" alt="Column"/>
            <span class="block_title">Column</span></a>
        </li>

        <li>
            <a href="http://www.athenasweb.com/astro101.html" title="Learn some Astrology"><img class="blocks" src="<?php bloginfo("template_url"); ?>/images/block_astrology.jpg" alt="Astrology 101"/>
            <span class="block_title">Astrology 101</span></a>
        </li>

        <li>
            <a href="http://www.athenasweb.com/athena.html" title="Learn about Athena"><img class="blocks" src="<?php bloginfo("template_url"); ?>/images/block_athena.jpg" alt="Athena"/>
            <span class="block_title">Athena</span></a>
        </li>

        <li>
            <a href="http://www.athenasweb.com/hitsIII.html" title="Learn some Mythology"><img class="blocks" src="<?php bloginfo("template_url"); ?>/images/block_mythology.jpg" alt="World Mythology"/>
            <span class="block_title">World Mythology</span></a>
        </li>
     </ul> 
```

CSS：

```
#home_blocks            { position: relative; margin-top: 20px; list-style: none; }
    #home_blocks li         { position: relative; display: block; float: left; margin: 0 15px 20px 0; width: 310px; height: 401px; border-bottom: 1px solid #4098db; text-align: center; font-family: 'Raleway', sans-serif; font-size: 25px; font-weight: 900; background: #4098db; 
    /*opacity: 1.0; 
    filter:alpha(opacity=100); */
    -webkit-transition: background .2s; -moz-transition: background .2s; -ms-transition: background .2s; transition: background .2s; }
    #home_blocks a          { color: white;  text-shadow: 0 1px 0 #666; }
    #home_blocks li:nth-child(3n) { margin: 0 0 20px 0; }
    #home_blocks li a       { -webkit-transition: color 1s; -moz-transition: color 1s; -ms-transition: color 1s; transition: color 1s; }
    #home_blocks a:hover    { color: #4098db; text-shadow: 0 1px 0 #ccc; cursor: pointer; }
    #home_blocks li:hover   { 
        background: white; border-bottom: 1px dotted #4098db; 
        /*opacity:0.95; filter:alpha(opacity=95); */
    }
    .block_title            { display: block; position: absolute; bottom: 0px; left: 0; padding:25px 0 20px 0; width: 310px; z-index: 999; }
    .blocks                 { z-index: 1; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:00:20.467

这是因为 CSS3 过渡在 IE9 中不起作用。如果你想实现你的方式，你还需要在 IE 上处理禁用 css hover，我认为这不是一个好主意。

我建议使用跨浏览器转换库，例如 css3transitions-jquery。

[http://addyosmani.com/blog/css3transitions-jquery/](http://addyosmani.com/blog/css3transitions-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:31:42.303

Jquery 事件处理程序中的“this”关键字将始终包含悬停的项目，即整个 <li> 元素。因此，在您的 jQuery 中，删除选择器中的跨度。然后，在“动画”调用中，执行 $(this).filter("span").fadeOut(150) 以仅对跨度进行动画处理。

# php - 在javascript中调用php函数

> ID：14694018
> 
> 赞同：-1
> 
> 时间：2013-02-04T19:26:52.647
> 
> 标签：php, javascript

> **可能重复：**
> [如何在 JavaScript 中调用 PHP 函数？](https://stackoverflow.com/questions/5984545/how-to-call-a-php-function-in-javascript)

我有一张要打印到 POS 打印机的表格。问题 1 是我无法直接打印，Mybe 在 google chrome 中以 kioskmode .. 所以。我想在关闭打印窗口后调用一个函数。代码是这样的：

```
 <script type="text/javascript">
        $(function(){
            $('#printOut').click(function(e){
                e.preventDefault();
                var w = window.open();
                var printOne = $('.contentToPrint').html();
                var printTwo = $('.termsToPrint').html();
                w.document.write('<html>' + printOne + '<hr />' + printTwo   ) + '</body></html>';

                w.window.print();

                w.document.close();
   I INSERTED HERE>>>   insert();  <<<<<<<<<<< AND  WORKS BUT NOT BY CLOSING THE priter WINDOWS. I dont want to close the BROWSER!  
                return false;

            });
        });
    </script> 
```

我在哪里可以调用 php 函数 insert();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:30:37.183

您不能*调用*PHP 函数，因为它在服务器上，而您的 JavaScript 代码在客户端上。您可以导航到包含该函数的 PHP 或对该页面进行 AJAX 调用。

通过 Javascript 导航将是：

```
document.location = "yourpage.php" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:31:12.500

您不能使用 Javascript 以经典的方式调用 PHP 函数。PHP 代码在服务器上运行，而 Javascript 代码在用户的浏览器窗口中执行。但是，您可以做的是使用一种称为[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)的技术将请求发送回您的服务器。使用 HTTP 方法，您可以启动一个 PHP 脚本，该脚本也通过 HTTP 将信息返回给您的 Javascript 代码。

# c# - Activator.CreateInstance 现在返回错误

> ID：14694023
> 
> 赞同：4
> 
> 时间：2013-02-04T19:27:13.253
> 
> 标签：c#

我最初使用以下方法 - 效果很好

```
var obj = Activator.CreateInstance("MyProject","MyProject.MyImpl"); 
```

现在我在上面的行中遇到错误，错误是：

```
Exception has been thrown by the target of an invocation. 
```

关于可能出现问题的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T19:37:42.517

最简单的方法是在类的构造函数中设置断点`MyImpl`并对其进行调试。

您可能遇到的一个棘手问题是，如果异常实际上不是由构造函数直接抛出，而是由某个字段初始化程序抛出。

例如，即使没有可以抛出任何东西的显式构造函数，以下内容也会导致您描述的行为。

```
public class MyImpl
{
    private int something = ThisMethodThrows();

    private int ThisMethodThrows()
    {
        throw new Exception();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T19:29:28.943

对象的构造函数中抛出异常。[在 Visual Studio 中打开异常，](http://msdn.microsoft.com/en-us/library/d14azbfh.aspx)当该构造函数抛出时它应该会中断。

# email - Openerp 电子邮件模板位置

> ID：14694026
> 
> 赞同：0
> 
> 时间：2013-02-04T19:27:18.793
> 
> 标签：email, templates, openerp

我正在配置 OpenERP 以发送会议邀请邮件。一切都很顺利，直到我想改变内容。它应该在电子邮件模板中可用，但不是。不幸的是，我只能找到用于发票、买卖订单的模板。只要邮件是从系统发送的，我就在徘徊它们的内容是从哪里加载的。谁能帮我找出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:28:27.513

检查`addons/base_calendar/base_calendar.py`搜索 html_invitation。这是会议邀请邮件的 py 文件中的静态文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:25:35.767

@Michał：您已经定制了自己想要的模板。OpenERP 将为您提供一些演示模板。对于会议提醒或发送会议邀请，您必须创建一个新的。

# r - 使用 R 中的 data.frame 的列从转换矩阵中提取值

> ID：14694030
> 
> 赞同：2
> 
> 时间：2013-02-04T19:27:25.237
> 
> 标签：r, dataframe

我有一个转换矩阵，从一个状态到另一个状态的成本，例如

```
cost <- data.frame( a=c("aa","ab"),b=c("ba","bb")) 
```

（假设字符串“aa”是从 a 移动到 a 的成本）

我有一个`data.frame`, 状态为：

```
transitions <- data.frame( from=c("a","a","b"), to=c("a","b","b") ) 
```

我希望能够在转换中添加一列，每个转换的成本，所以它最终是：

```
 from to cost
1    a  a   aa
2    a  b   ab
3    b  b   bb 
```

我确信有一种 R-ish 方法可以做到这一点。我最终使用了一个 for 循环：

```
n <- dim(data)[1]
v <- vector("numeric",n)
for( i in 1:n ) 
{ 
    z<-data[i,c(col1,col2),with=FALSE]
    za <- z[[col1]]
    zb <- z[[col2]]
    v[i] <- dist[za,zb]
}
data <- cbind(data,d=v)
names(data)[dim(data)[2]] <- colName
data 
```

但这感觉非常难看，而且速度非常慢——在 2M 行上大约需要 20 分钟`data.frame`（计算同一个表元素之间距离的操作不到一秒）。

是否有一个简单、快速、一两行的命令可以让我得到上面的成本列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:01:04.087

**更新：考虑已知状态**

`data.table`解决方案：

```
require(utils)
require(data.table)

## Data generation
N <- 2e6
set.seed(1)
states <- c("a","b")
cost <- data.frame(a=c("aa","ab"),b=c("ba","bb"))
transitions <- data.frame(from=sample(states, N, replace=T), 
                            to=sample(states, N, replace=T))

## Expanded cost matrix construction
f <- expand.grid(states, states)
f <- f[order(f$Var1, f$Var2),]
f$cost <- unlist(cost)

## Prepare data.table
dt <- data.table(transitions)
setkey(dt, from, to)

## Routine itself  
dt[,cost:=as.character("")] # You don't need this line if cost is numeric
apply(f, 1, function(x) dt[J(x[1],x[2]),cost:=x[3]]) 
```

有 2M 行，`transitions`大约需要 0.3 秒才能进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:54:43.313

这是一种方法：（至少这适用于这个例子，我相信它也适用于更大的数据。如果没有，请写回一个例子）

```
# load both cost and transition with stringsAsFactors = FALSE
# so that strings are NOT by default loaded as factors
cost <- data.frame( a = c("aa","ab"), b = c("ba","bb"), stringsAsFactors=F)
transitions <- data.frame(from = c("a","a","b"), to = c("a","b","b"), 
                                      stringsAsFactors = FALSE)

# convert cost to vector: it'll have names a1, a2, b1, b2\. we'll exploit that.
cost.vec <- unlist(cost)
# convert "to" to factor and create id column with "from" and as.integer(to)
# the as.integer(to) will convert it into its levels
transitions$to <- as.factor(transitions$to)
transitions$id <- paste0(transitions$from, as.integer(transitions$to))

# now, you'll have a1, a2 etc.. here as well, just match it with the vector
transitions$val <- cost.vec[!is.na(match(names(cost.vec), transitions$id))]

#   from to id val
# 1    a  a a1  aa
# 2    a  b a2  ab
# 3    b  b b2  bb 
```

您当然可以删除`id`. 如果这在任何情况下都不起作用，请告诉我。我会尝试修复它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T22:36:15.737

从阿伦的回答开始，我选择了：

```
library(reshape)
cost <- data.frame( a = c("aa","ab"), b = c("ba","bb") )
transitions <- data.frame(from = c("a","a","b"), to = c("a","b","b") )
row.names(cost) <- c("a","b") #Normally get this from the csv file
cost$from <- row.names(cost)
m <- melt(cost, id.vars=c("from"))
m$transition = paste(m$from,m$variable)
transitions$transition=paste(transitions$from,transitions$to)
merge(m, transitions, by.x="transition",by.y="transition") 
```

还有几行，但我有点不相信因子排序作为索引。这也意味着当它们是 data.tables 时，我可以这样做：

```
setkey(m,transition)
setkey(transitions,transition)
m[transitions] 
```

我没有进行基准测试，但是在大型数据集上，我非常有信心 data.table 合并将比合并或矢量扫描方法更快。

# javascript - 如何将点击事件绑定到复选框标签

> ID：14694036
> 
> 赞同：1
> 
> 时间：2013-02-04T19:27:37.940
> 
> 标签：javascript, jquery

我希望 javascript / jquery 大师可以帮助我。

我试图找出一种通过单击复选框标签来启动弹出框（fancybox）的方法。我不想影响单击时过滤数据的复选框功能。

我欢迎任何关于如何实现这一目标的想法。我已经在标签上尝试了 onclick 功能，但这不起作用。

当您单击复选框标签中的人名时，我想显示一个花式框。这是网站：-（例如：jonathanlyon）

[http://monkeygetnews.jonathanlyon.com/bs.php](http://monkeygetnews.jonathanlyon.com/bs.php)

复选框是动态构建的，我需要在打开花式框的标签上创建一个单击事件。这是构建复选框的代码：-

```
<input type="checkbox" id = "dn" value="dept_<?php echo $currdept;?>" onchange="doSearch();return false;" />
<label><?php echo $currdept;?></label>
<ul class="dept_<?php echo $currdept;?>">
    <li>
        <input type="checkbox" name = "un" value="<?php echo $usernames;?>" <?php echo $include;?> onchange="doSearch();return false;" />
        <label><?php echo $usernames;?></label>
    </li>   
<?php
$dept = $currdept;
} else {
?>                
    <li>
        <input type="checkbox" name = "un" value="<?php echo $usernames;?>" <?php echo $include;?> onchange="doSearch();return false;" />
    <label><?php echo $usernames;?></label>
    </li>
<?php
$dept = $currdept;

}
?> 
```

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:37:15.087

很简单地说你可以像这样使用jquery

```
$('label').click(function() {
    alert($(this).html());
} 
```

同样，这是一个非常简单的示例，需要改进

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T19:34:23.670

您需要用标签标签包装复选框标签以使标签可点击

`<label><input type="checkbox" name="checkbox" value="value"/>dasfaha</label>`

**编辑：**

对不起大家。我没仔细看。这是检测标签或复选框的方法。它的工作原理是，当您单击无界标签时，复选框不会更改。但是，当您单击复选框时，':checked' 将被更改。因此，您可以放置​​一个变量来存储检查的先前值，然后与当前检查的值进行比较。

[http://jsfiddle.net/Xtyah/](http://jsfiddle.net/Xtyah/)

# sql - sqldf / SQLite中的缩放/平均中心/贬低变量？

> ID：14694037
> 
> 赞同：1
> 
> 时间：2013-02-04T19:27:42.770
> 
> 标签：sql, r, sqlite, plyr, sqldf

我试图使用`sqldf`R 中的包将变量中心化（又名贬低，缩放）3 个维度：年、月和区域。

这正是我想要使用该`plyr`软件包执行的操作：

```
## create example data
set.seed(145)
v = Sys.Date()-seq(1,425)
regions = LETTERS[1:6]
VAR1_DATA = as.data.frame(expand.grid(v,regions))
VAR1_DATA$VAR1 = rpois(nrow(VAR1_DATA), 4) + runif(nrow(VAR1_DATA), 25,35)
names(VAR1_DATA) = c("DATE","REG","VAR1")

## mean center VAR1 by year, month and region using plyr:
lapply(c('chron','plyr'), require, character.only=T)
table1 = cbind(MONTH = months(as.POSIXlt(VAR1_DATA[,'DATE'])),
            YEAR = years(as.POSIXlt(VAR1_DATA[,'DATE'])),
            VAR1_DATA)
table2 = ddply(table1, c('YEAR','MONTH','REG'), transform, MEAN.V1 = mean(VAR1), DEMEANED.V1 = VAR1 - mean(VAR1))
head(table2)

##      MONTH YEAR       DATE REG     VAR1  MEAN.V1 DEMEANED.V1
## 1 December 2011 2011-12-31   A 30.03605 34.69316  -4.6571064
## 2 December 2011 2011-12-30   A 31.69130 34.69316  -3.0018600
## 3 December 2011 2011-12-29   A 35.46342 34.69316   0.7702634
## 4 December 2011 2011-12-28   A 32.09727 34.69316  -2.5958876
## 5 December 2011 2011-12-27   A 36.51519 34.69316   1.8220386
## 6 December 2011 2011-12-26   A 35.65338 34.69316   0.9602236 
```

现在我想使用 SQLite / SQL 复制上面的结果。下面是我目前用来尝试完成此操作的 SQLite 代码（警告：下面的代码不起作用！）。我将其包含在此处以说明我的 SQLish 思维过程：

```
require(sqldf)

sqldf("
       SELECT
       strftime('%m', t1.DATE) AS 'MONTH', 
       strftime('%Y', t1.DATE) AS 'YEAR',
       t1.DATE,
       t1.REG,
       t1.VAR1,
       t2.MVAR1 AS 'MO_AVG_VAR1',
       (t1.VAR1-t2.MVAR1) AS 'DEMEANED_VAR1',
       FROM VAR1_DATA AS t1,
       (
           SELECT
           DATE,
           REG,
           avg(VAR1) AS MVAR1,
           FROM VAR1_DATA
           GROUP BY strftime('%Y', DATE), strftime('%m', DATE), REG
       ) AS t2
      WHERE t1.REGION = t2.REGION
      AND t1.DATE = t2.DATE
      GROUP BY strftime('%Y', t1.DATE), strftime('%m', t1.DATE), t1.REGION
      ORDER BY YEAR, MONTH, REG
      ;") 
```

**问题**：在 SQLite / sqldf 中是否可以进行这种计算——如果可以，如何计算？如果答案还提供（稍微修改？）“常规 SQL”（即 mySQL、PostgreSQL 等）实现，则加分。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:37:46.293

试试这个：

```
## set order so we can compare it later

table2 <- table2[order(table2$DATE, table2$REG), ]

## use a single SQL statement

s1 <- "select 
          rowid, 
          *, 
          strftime('%Y-%m', DATE * 3600 * 24, 'unixepoch') AS 'YM' 
       from VAR1_DATA"
s2a <- "select a.*, 
         avg(b.VAR1) 'MEAN.V1', 
         a.VAR1 - avg(b.VAR1) 'DEMEANED.V1'
       from ($s1) a, ($s1) b using (YM, REG)
       group by a.rowid
       order by a.DATE, a.REG"
# substitute s1 into s2a giving the single sql statement:
#    cat(fn$identity(s2a), "\n")
tab2 <- fn$sqldf(s2a)

# ensure they compare to the plyr solution
all.equal(table2$MEAN.V1, tab2$MEAN.V1) # TRUE
all.equal(table2$DEMEANED.V1, tab2$DEMEANED.V1) # TRUE 
```

相同，但使用两个 SQL 语句：

```
# s1 is as above
tab1 <- sqldf(s1)
s2b <- "select a.*, 
         avg(b.VAR1) 'MEAN.V1', 
         a.VAR1 - avg(b.VAR1) 'DEMEANED.V1'
       from tab1 a, tab1 b using (YM, REG)
       group by a.rowid
       order by a.DATE, a.REG"
tab2 <- sqldf(s2b)

# ensure they compare to the plyr solution
all.equal(table2$MEAN.V1, tab2$MEAN.V1) # TRUE
all.equal(table2$DEMEANED.V1, tab2$DEMEANED.V1) # TRUE 
```

注意：已根据评论对上述内容进行了全面修改。

# plsql - Oracle Forms 6I 导航到第 n 个游标记录

> ID：14694038
> 
> 赞同：1
> 
> 时间：2013-02-04T19:27:43.697
> 
> 标签：plsql, cursor, oracleforms

我有一个应用程序我有几个块它们不是数据库块。但是我用光标中的记录填充它。我有一个循环遍历游标记录并将其显示在表单上的过程。

我希望能够以一种形式显示此光标中的第 n 条记录，我该如何实现这一点。这将被编码为表单上的下一个记录按钮。

```
Procedure Get_All_Records IS 
Cursor MyRecords IS 

Select 1,2,3,4,5
from mytable

Begin

FOR eachRecord In MyRecords LOOP
  field1 := eachRecord.1;
  field2 := eachRecord.2;
  field3 := eachRecord.3;
  field4 := eachRecord.4;
  field5 := eachRecord.5;

END LOOP;

End; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:34:44.290

您应该用查询的所有记录填充您的块，就像数据库块一样。您可以使用`create_record`将记录添加到您的块中。完成后，您可以使用内置插件，如`next_record`, `previous_record`,`go_record`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:31:02.267

您可以像这样填充多记录无数据库块；

```
First_Record;
FOR eachRecord In MyRecords LOOP
  field1 := eachRecord.1;
  field2 := eachRecord.2;
  field3 := eachRecord.3;
  field4 := eachRecord.4;
  field5 := eachRecord.5;

  Next_Record;
END LOOP; 
```

是的，First_Record 和 Next_Record 在没有数据库块的情况下工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:48:59.020

```
Procedure Get_All_Records IS

Cursor MyRecords IS 
    Select 1,2,3,4,5
    from mytable;

rowCont number := 0; 
```

开始

```
FOR eachRecord In MyRecords LOOP

  rowCont := rowCont + 1;

  if rowCont = n then    -- n is you nth record

      field1 := eachRecord.1;
      field2 := eachRecord.2;
      field3 := eachRecord.3;
      field4 := eachRecord.4;
      field5 := eachRecord.5;

  end if;

END LOOP; 
```

结尾;

这可能会帮助你:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-10T09:55:16.050

我知道我之前已经就表单开发人员中的光标给出了答案。我很抱歉我之前的回答，但让我举一个简单的例子来说明它可以做到......

`form fields: :user_code :user_name`

在表单开发人员中，我们将制作一个按钮并在按下按钮时使用触发器来激活光标代码......

**让我们看看按钮中的光标代码**

```
declare
  cursor code_name is
  select user_code, user_name from users;
 begin
   open code_name;
   loop
     fetch code_name into :user_code, :user_name;
     next_record;
     exit when code_name%NOTFOUND;
   end loop;
   close code_name;
 end 
```

**让我们查看另一个可以使用 for 循环执行游标的代码**

```
declare 
cursor code_name is 
select user_code, user_name from users;
begin 
  for sel_code_name in code_name
 loop   
:user_code :=sel_code_name.user_code;   
:user_name := sel_code_name.user_name;
next_record;
end loop;
end; 
```

我希望这个例子对于那些想知道如何使游标代码工作的人来说足够清楚......顺便说一下，这被称为显式游标，通常；显式游标是用户定义的，而隐式游标是由数据库自动完成的。

祝你好运

# django - 使用 django-syncr 创建 flickr feed

> ID：14694040
> 
> 赞同：0
> 
> 时间：2013-02-04T19:27:58.743
> 
> 标签：django

我想使用 django-syncr 在我的主页上放一个 flickr 提要；我按照主页上的说明（[http://code.google.com/p/django-syncr/](http://code.google.com/p/django-syncr/)），安装过程非常顺利。步骤 1-3 工作得很好，但步骤 4 是我遇到问题的地方。

当我尝试运行显示的命令时：

```
from syncr.app.flickr import FlickrSyncr 
```

我得到错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/django_syncr-0.50-py2.7.egg/sync/app/flickr.py", line 11, in <module>
    from syncr.flickr.models import *
  File "/usr/local/lib/python2.7/dist-packages/django_syncr-0.50-py2.7.egg/syncr/flickr/models.py", line 1, in <module>
    from django.db import models
  File "/usr/lib/python2.7/dist-packages/django/db/__init__.py", line 14, in <module>
    if not settings.DATABASES:
  File "/usr/lib/python2.7/dist-packages/django/utils/functional.py", line 276, in __getattr__self._setup()
  File "/usr/lib/python2.7/dist-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

而且我不确定该怎么做。这些文件在我的 django 项目文件夹中运行，但包括设置文件（通过导入设置）似乎无法解决此问题。为了导入正确的变量，应该包含哪些文件？

谢谢！

# drupal - FFMPEG - 将任何类型的文件转换为与 IOS 和 Flash 兼容的 Mp4

> ID：14694042
> 
> 赞同：1
> 
> 时间：2013-02-04T19:28:22.573
> 
> 标签：drupal, ffmpeg, video-streaming, html5-video

我正在努力使用 Drupal 视频模块中的 FFmpeg 生成与 IOS 和 Flash Player10 及更高版本兼容的 MP4 文件。到目前为止我已经使用了以下命令，请注意以“！”开头的变量 是占位符，将替换为适当的项目：

```
FFmpeg -strict experimental -y -i !videofile -pass 1 -s !widthx!height -b:v 500k -threads 0 -vcodec libx264 -vf "pad=!paddingwidth:!paddingheight:!paddingleft:!paddingtop:000000" -preset slow -an !convertfile

FFmpeg -strict experimental -y -i !videofile -pass 2 -s !widthx!height -b:v 500k -threads 0 -vcodec libx264 -vf "pad=!paddingwidth:!paddingheight:!paddingleft:!paddingtop:000000" -preset slow -acodec aac -ab 128k !convertfile 
```

上面的命令产生错误：

执行用于渲染预设 HTML5 MP4 的命令时出错，命令 #1：

```
nice -n 19 /usr/bin/ffmpeg/ffmpeg -y -i '80137db8c3_1334836277_int_tr_19.mp4' -s 176x100 -b:v 500k -threads 0 -vcodec libx264 -preset slow -acodec aac -ab 128k '/converted/80137db8c3_1334836277_int_tr_19.mp4' 2>&1

Output:

ffmpeg version git-2013-02-01-5a67e30 Copyright (c) 2000-2013 the FFmpeg developers
  built on Feb  1 2013 14:23:14 with gcc 4.6 (Ubuntu/Linaro 4.6.3-1ubuntu5)
  configuration: --enable-gpl --enable-libass --enable-libfaac --enable-libfdk-aac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-librtmp --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-version3
  libavutil      52\. 17.100 / 52\. 17.100
  libavcodec     54\. 91.100 / 54\. 91.100
  libavformat    54\. 61.104 / 54\. 61.104
  libavdevice    54\.  3.103 / 54\.  3.103
  libavfilter     3\. 35.100 /  3\. 35.100
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '80137db8c3_1334836277_int_tr_19.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isommp42
    creation_time   : 2011-03-28 00:12:26
  Duration: 00:02:01.14, start: 0.000000, bitrate: 703 kb/s
    Stream #0:0(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 640x360 [SAR 1:1 DAR 16:9], 601 kb/s, 29.96 fps, 29.92 tbr, 1k tbn, 59.83 tbc
    Metadata:
      creation_time   : 1970-01-01 00:00:00
      handler_name    : VideoHandler
    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 96 kb/s
    Metadata:
      creation_time   : 2011-03-28 00:12:27
      handler_name    : (C) 2007 Google Inc. v08.13.2007.
[libx264 @ 0x34ec060] using SAR=100/99
[libx264 @ 0x34ec060] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
[libx264 @ 0x34ec060] profile High, level 2.0
[libx264 @ 0x34ec060] 264 - core 129 r2245 bc13772 - H.264/MPEG-4 AVC codec - Copyleft 2003-2013 - http://www.videolan.org/x264.html - options: cabac=1 ref=5 deblock=1:0:0 analyse=0x3:0x113 me=umh subme=8 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=2 b_bias=0 direct=3 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=50 rc=abr mbtree=1 bitrate=500 ratetol=1.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
The encoder 'aac' is experimental but experimental codecs are not enabled, add '-strict -2' if you want to use it.
Alternatively use the non experimental encoder 'libfaac'. 
```

我使用的另一个命令是：

```
FFmpeg -i !videofile -an -pass 1 -vcodec libx264 -preset slow -b 500k -threads auto !convertfile

FFMpeg -y -i !videofile -acodec libfaac -ab 128k -pass 2 -vcodec libx264 -preset slow -b 500k -threads auto !convertfile 
```

第一遍的输出：

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'comiccon.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: mp41
    creation_time   : 2012-08-15 17:12:37
  Duration: 01:17:15.93, start: 0.000000, bitrate: 706 kb/s
    Stream #0:0(eng): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 640x360 [SAR 1:1 DAR 16:9], 636 kb/s, 30 fps, 30 tbr, 90k tbn, 60 tbc
    Metadata:
      creation_time   : 2012-08-15 17:12:37
      handler_name    : VideoHandler
    Stream #0:1(eng): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 63 kb/s
    Metadata:
      creation_time   : 2012-08-15 17:12:37
      handler_name    : SoundHandler
Please use -b:a or -b:v, -b is ambiguous

using SAR=1/1
[libx264 @ 0x1c39be0] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
[libx264 @ 0x1c39be0] profile Main, level 3.0
[libx264 @ 0x1c39be0] 264 - core 129 r2245 bc13772 - H.264/MPEG-4 AVC codec - Copyleft 2003-2013 - http://www.videolan.org/x264.html - options: cabac=1 ref=1 deblock=1:0:0 analyse=0x1:0 me=dia subme=2 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=2 b_bias=0 direct=3 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=50 rc=abr mbtree=1 bitrate=500 ratetol=1.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'comiccon.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: mp41
    encoder         : Lavf54.61.104
    Stream #0:0(eng): Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 640x360 [SAR 1:1 DAR 16:9], q=-1--1, pass 1, 500 kb/s, 15360 tbn, 30 tbc
    Metadata:
      creation_time   : 2012-08-15 17:12:37
      handler_name    : VideoHandler
Stream mapping:
  Stream #0:0 -> #0:0 (h264 -> libx264)
Press [q] to stop, [?] for help
frame=139078 fps=279 q=32766.0 Lsize=  286145kB time=01:17:15.86 bitrate= 505.6kbits/s    
video:284758kB audio:0kB subtitle:0 global headers:0kB muxing overhead 0.487000%
[libx264 @ 0x1c39be0] frame I:656   Avg QP:19.51  size: 21457
[libx264 @ 0x1c39be0] frame P:76006 Avg QP:22.19  size:  3141
[libx264 @ 0x1c39be0] frame B:62416 Avg QP:26.38  size:   621
[libx264 @ 0x1c39be0] consecutive B-frames: 32.3% 17.5% 18.6% 31.6%
[libx264 @ 0x1c39be0] mb I  I16..4: 24.5%  0.0% 75.5%
[libx264 @ 0x1c39be0] mb P  I16..4:  7.5%  0.0%  0.0%  P16..4: 40.5%  0.0%  0.0%  0.0%  0.0%    skip:52.1%
[libx264 @ 0x1c39be0] mb B  I16..4:  1.4%  0.0%  0.0%  B16..8: 12.0%  0.0%  0.0%  direct: 2.9%  skip:83.7%  L0:41.1% L1:41.6% BI:17.3%
[libx264 @ 0x1c39be0] final ratefactor: 23.45
[libx264 @ 0x1c39be0] direct mvs  spatial:95.3% temporal:4.7%
[libx264 @ 0x1c39be0] coded y,uvDC,uvAC intra: 37.6% 42.8% 11.8% inter: 8.9% 8.2% 0.5%
[libx264 @ 0x1c39be0] i16 v,h,dc,p: 43% 28% 19% 10%
[libx264 @ 0x1c39be0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 36% 21% 11%  6%  4%  5%  4%  6%  6%
[libx264 @ 0x1c39be0] i8c dc,h,v,p: 57% 19% 20%  4%
[libx264 @ 0x1c39be0] Weighted P-Frames: Y:1.4% UV:0.5%
[libx264 @ 0x1c39be0] kb/s:503.18 
```

第二遍的输出：

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'comiccon.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: mp41
    creation_time   : 2012-08-15 17:12:37
  Duration: 01:17:15.93, start: 0.000000, bitrate: 706 kb/s
    Stream #0:0(eng): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 640x360 [SAR 1:1 DAR 16:9], 636 kb/s, 30 fps, 30 tbr, 90k tbn, 60 tbc
    Metadata:
      creation_time   : 2012-08-15 17:12:37
      handler_name    : VideoHandler
    Stream #0:1(eng): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 63 kb/s
    Metadata:
      creation_time   : 2012-08-15 17:12:37
      handler_name    : SoundHandler
Please use -b:a or -b:v, -b is ambiguous
[libx264 @ 0x3247f80] using SAR=1/1
[libx264 @ 0x3247f80] using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
[libx264 @ 0x3247f80] profile High, level 3.0
[libx264 @ 0x3247f80] 264 - core 129 r2245 bc13772 - H.264/MPEG-4 AVC codec - Copyleft 2003-2013 - http://www.videolan.org/x264.html - options: cabac=1 ref=5 deblock=1:0:0 analyse=0x3:0x113 me=umh subme=8 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=2 b_bias=0 direct=3 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=50 rc=2pass mbtree=1 bitrate=500 ratetol=1.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 cplxblur=20.0 qblur=0.5 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'comiccon.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: mp41
    encoder         : Lavf54.61.104
    Stream #0:0(eng): Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 640x360 [SAR 1:1 DAR 16:9], q=-1--1, pass 2, 500 kb/s, 15360 tbn, 30 tbc
    Metadata:
      creation_time   : 2012-08-15 17:12:37
      handler_name    : VideoHandler
    Stream #0:1(eng): Audio: aac ([64][0][0][0] / 0x0040), 44100 Hz, stereo, s16, 128 kb/s
    Metadata:
      creation_time   : 2012-08-15 17:12:37
      handler_name    : SoundHandler
Stream mapping:
  Stream #0:0 -> #0:0 (h264 -> libx264)
  Stream #0:1 -> #0:1 (aac -> libfaac)
Press [q] to stop, [?] for help
frame=139078 fps=206 q=32766.0 Lsize=  357252kB time=01:17:15.93 bitrate= 631.3kbits/s    
video:282992kB audio:69592kB subtitle:0 global headers:0kB muxing overhead 1.324238%
[libx264 @ 0x3247f80] frame I:656   Avg QP:19.61  size: 20433
[libx264 @ 0x3247f80] frame P:76006 Avg QP:23.07  size:  2996
[libx264 @ 0x3247f80] frame B:62416 Avg QP:26.23  size:   780
[libx264 @ 0x3247f80] consecutive B-frames: 32.3% 17.5% 18.6% 31.6%
[libx264 @ 0x3247f80] mb I  I16..4: 17.2% 37.8% 44.9%
[libx264 @ 0x3247f80] mb P  I16..4:  2.9%  3.7%  1.2%  P16..4: 30.3%  6.1%  3.4%  0.0%  0.0%    skip:52.5%
[libx264 @ 0x3247f80] mb B  I16..4:  0.5%  0.6%  0.3%  B16..8: 25.9%  2.2%  0.5%  direct: 0.9%  skip:69.3%  L0:51.4% L1:43.0% BI: 5.7%
[libx264 @ 0x3247f80] 8x8 transform intra:45.9% inter:51.5%
[libx264 @ 0x3247f80] direct mvs  spatial:85.5% temporal:14.5%
[libx264 @ 0x3247f80] coded y,uvDC,uvAC intra: 47.3% 49.2% 13.5% inter: 9.0% 9.4% 0.5%
[libx264 @ 0x3247f80] i16 v,h,dc,p: 38% 27% 13% 22%
[libx264 @ 0x3247f80] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 29% 16% 14%  5%  5%  7%  7%  8%  9%
[libx264 @ 0x3247f80] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 31% 15%  9%  6%  7%  8%  7%  8%  8%
[libx264 @ 0x3247f80] i8c dc,h,v,p: 49% 22% 20%  8%
[libx264 @ 0x3247f80] Weighted P-Frames: Y:1.4% UV:0.5%
[libx264 @ 0x3247f80] ref P L0: 79.3% 10.4%  6.8%  1.6%  1.2%  0.7%  0.0%
[libx264 @ 0x3247f80] ref B L0: 93.6%  4.8%  1.2%  0.3%
[libx264 @ 0x3247f80] ref B L1: 96.6%  3.4%
[libx264 @ 0x3247f80] kb/s:500.06 
```

上述命令可以正确生成文件，但无法在 Flash Player 中播放。我注意到的一件事是，如果输入文件也是 mp4，则可能会发生这种情况。该命令是针对上传文件的用户执行的，所以输入文件可以是任意格式。

以下是有关我的 FFmpeg 版本的信息： > ffmpeg 版本 git-2013-02-01-5a67e30 版权所有 (c) 2000-2013 > FFmpeg 开发人员于 2013 年 2 月 1 日 14:23:14 使用 gcc 4.6 > (Ubuntu/Linaro 4.6.3-1ubuntu5) 配置： --enable-gpl > --enable-libass --enable-libfaac --enable-libfdk-aac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-librtmp --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-version3 libavutil 52\. 17.100 / 52\. 17.100
libavcodec 54\. 91.100 / 54\. 91.100
libavformat 54\. 61.104 / 54\. 61.104
libavdevice 54\. 3.103 / 54\. 3.103
libavfilter 3\. 35.100 / 3\. 35.100
libswscale 2\. 2.100 / 2\. 2.100
libswresample 0\. 17.102 / 0\. 17.102
libpostproc 52\. 2.100 / 52\. 2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:47:36.370

一些注意事项：

*   二进制是`ffmpeg`; 不是 FFmpeg 或 FFMpeg。

*   `-strict experimental`应该用作输出选项。您将其用作输入选项并且被忽略。其他 AAC 编码器不需要它。

*   `-threads auto`现在是默认设置，添加它是多余的。

*   您使用 编译`--enable-libfdk-aac`，因此您可以使用`-codec:a libfdk_aac`它在每个文件大小上提供比其他 AAC 编码器更好的质量。请参阅[FFmpeg AAC 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/AACEncodingGuide)和[FFmpeg 和 x264 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)。

*   `Please use -b:a or -b:v, -b is ambiguous`不应忽略该消息，因此 ffmpeg 知道您是否要将所需的比特率应用于音频或视频。

*   我不明白为什么第二个命令不应该在 Flash 播放器中工作。在播放之前，您可能根本没有等待足够长的时间来完全下载文件。您可以添加`-movflags +faststart`以允许在下载完成之前开始播放。

*   替换`-s`为[`scale`](http://ffmpeg.org/ffmpeg-filters.html#scale)过滤器，这样您就[可以](http://ffmpeg.org/ffmpeg-filters.html#Filtergraph-syntax-1)使用[`pad`](http://ffmpeg.org/ffmpeg-filters.html#pad). 下次显示实际命令而不是带变量的命令；否则我本可以给出一个适当的过滤示例。

# node.js - 无法从 Mongoose 读取“空”返回的对象

> ID：14694046
> 
> 赞同：0
> 
> 时间：2013-02-04T19:28:33.530
> 
> 标签：node.js, mongodb, express, mongoose

这是代码，很简单：

```
usermodel.findOne({ user: req.params.id }, function (err, user1){

   if (err) throw err;

   console.log(user1.user);

      if (req.session.user != user1.user) {

            console.log('Different user!');

      }

}); 
```

`console.log`正确返回，但是，当`user1.user`node.js 进入 if 语句时，我收到此错误：

```
/root/pix/node_modules/mongoose/lib/utils.js:434
        throw err;
              ^
TypeError: Cannot read property 'user' of null
    at Promise.<anonymous> (/root/pix/app.js:168:38)
    at Promise.addBack (/root/pix/node_modules/mongoose/lib/promise.js:128:8)
    at Promise.EventEmitter.emit (events.js:96:17)
    at Promise.emit (/root/pix/node_modules/mongoose/lib/promise.js:66:38)
    at Promise.complete (/root/pix/node_modules/mongoose/lib/promise.js:77:20)
    at Query.findOne (/root/pix/node_modules/mongoose/lib/query.js:1600:30)
    at exports.tick (/root/pix/node_modules/mongoose/lib/utils.js:429:16)
    at Collection.findOne
     (/root/pix/node_modules/mongodb/lib/mongodb/collection.js:975:5)
    at Cursor.toArray (/root/pix/node_modules/mongodb/lib/mongodb/cursor.js:159:9)
    at Cursor.each (/root/pix/node_modules/mongodb/lib/mongodb/cursor.js:199:11) 
```

为什么会发生这种情况，我该如何解决？

谢谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:16:15.453

您必须考虑没有返回文件的情况。在这种情况下，user1 将为空。并且 .user 的 null 是未定义的。因此，您可以修改以下代码以解决所有情况：

```
usermodel.findOne({ user: req.params.id }, function (err, user1)    {
    if (err) throw err;
        console.log(user1.user); // will be null if user does not exist
    if(user1 != null)   {
        if(req.session.user != user1.user)  {
            console.log('Different user!');
        }
        else
            console.log('Same user');
    }
    else    {   
        console.log('User does not exist');
    }       
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:31:39.520

也许`req.session`在那个范围内不存在？

（如果您在上一行访问 user1.user 时没有收到该错误，则表明 v8 正在为其他 .user 访问抛出错误：`req.session.user`。要么您不在引用`req`,或请求对象没有附加会话）。

# python - 在 Python 中定义一个类时，如何为多个变量分配一个值？

> ID：14694050
> 
> 赞同：2
> 
> 时间：2013-02-04T19:28:53.927
> 
> 标签：python, class, variables, assign

我已经开始迈出学习 python 的第一步，并且正在尝试开始使用类。

到目前为止，我有这个简化版本：

```
class ThingsInTheFridge(object):
  def __init__(self):
    self.milk = False
    self.yogurt = False
    self.bread = True
    self.umbrella = True 
```

我班上大约有 30 件事情，每件事情都被分配了对或错（我已经缩短了这个问题的清单）。

分配它们的最有效方法是什么？

我已经考虑过这一点，但它似乎并没有改善，尤其是当列表大小增加时：

```
self.milk, self.yogurt = False, False 
```

编辑：我也许应该提到课堂上还有其他项目（我省略了它们，因为我认为这无关紧要）：

```
class ThingsInTheFridge(object):
  def __init__(self):
    self.milk = False
    self.yogurt = False
    self.bread = True
    self.umbrella = True
    self.bulb = "maker name"
    self.shoes = 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:30:38.743

如果您真的关心运行时效率，那么您几乎肯定是找错地方了。如果初始化您的成员需要太长时间（这不太可能……但如果您配置文件并发现这是热点……），正确的答案是使用[`__slots__`](http://docs.python.org/2/reference/datamodel.html#slots)，而不是改变您进行初始化的方式。

如果您关心*程序员*的效率（可读性，以及较小程度的可写性），您总是可以这样做：

```
self.milk = self.yogurt = False 
```

如果你想更动态地做事情，你可以用 做这样的事情[`setattr`](http://docs.python.org/2/library/functions.html#setattr)，但我不推荐它：

```
class ThingsInTheFridge(object):
    false_things = ('bread', 'umbrella')
    true_things = ('milk', 'yogurt')
    def __init__(self):
        for thing in ThingsInTheFridge.false_things:
            setattr(self, thing, False)
        for thing in ThingsInTheFridge.true_things:
            setattr(self, thing, True) 
```

我不推荐它的原因是，如果你需要在这个级别动态地做事，你可能还需要在*访问*级别是动态的，这意味着你真的应该使用`dict`or `set`，正如 Lattyware 所解释的那样。

您也可以在类风格系统之上构建自己的原型风格 OO 系统，或者创建一个基于类信息初始化实例的元类等，但是，正如这句话的开头所表明的那样，这将太过分了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T19:31:18.460

我认为这表明您的数据存储模型存在问题。您可能希望使用像集合这样的数据结构，而不仅仅是属性。

例如：

```
items = {"milk", "yogurt", "bread", "umbrella"}
stored = set() 
```

然后只需将您想要的存储在`stored`集合中。集合在成员检查方面具有非常快的性能，所以要检查，你可以简单地做`"milk" in stored`，例如。

如果您真的想保留您拥有的界面，您可以使用`__getattr__()`覆盖您在请求属性时获得的操作：

```
def ___getattr__(self, item):
    return item in self.stored 
```

这将返回`False`到冰箱里没有的任何东西，如果你需要它只响应可能的物品，这很容易做到：

```
def ___getattr__(self, item):
    if item not in self.items:
        raise AttributeError
    return item in self.stored 
```

当然，也可以进行设置：

```
def __setattr__(self, item, value):
    if item in self.items:
        if value:
            self.stored.add(item)
        else:
            self.stored.remove(item)
    else:
        ... 
```

对此的替代方法是`True`/ `False`- 我真的不能说我认为任何一个都特别好，一个可能更适合您的项目。只需使用最适合您的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:12:15.633

我认为您的主要关注点应该是可读性和底层数据结构。

像这样的东西是非常易读的，并且（可能）通过滚动你自己可以达到的高性能：

```
from collections import Counter

class Fridge(object):
    def __init__(self,things,name):
        self.things=Counter(things)
        self.wanted=set()
        self.name=name

    def look(self, thing):
        print 'There are {} {} in {}'.format(self.things[thing],thing,self.name)

    def stare_inside(self):
        cathave=sorted([(co,it) for it,co in self.things.items() if co])
        print '{} items in {}:'.format(len(cathave),self.name)
        for i, item in enumerate(cathave,1):
            print '   {}: {} -- {}'.format(i,item[1],item[0])

    def shop(self):
        shop_list=[it for it,co in self.things.items() if co==0]
        for item in shop_list:
            del self.things[item]
        shop_list.extend(list(self.wanted))
        self.wanted=set()
        print "shopping list:"
        for i, item in enumerate(sorted(shop_list),1):
            print '   {}: {}'.format(i,item)    

    def consume(self,thing,count):
        if self.things[thing]>=count:
            self.things[thing]-=count   
        else: 
            print 'Not enough {} to consume {} -- {} in the {}.'.format(
                  thing,count,self.things[thing],self.name)
            self.wanted.add(thing)

    def stock(self,things):
        self.things+=Counter(things) 
```

现在试试：

```
>>> kitchen=Fridge({'coke':2, 'whole milk':1,'ketchup':1, 'anchovies':24},'kitchen fridge')
>>> kitchen.look('coke')
There are 2 coke in kitchen fridge
>>> kitchen.stock({'coke':1,'pepsi':2,'banana':3})
>>> kitchen.stare_inside()
6 items in kitchen fridge:
   1: ketchup -- 1
   2: whole milk -- 1
   3: pepsi -- 2
   4: banana -- 3
   5: coke -- 3
   6: anchovies -- 24
>>> kitchen.consume('red bull',22)
Not enough red bull to consume 22 -- 0 in the kitchen fridge.
>>> kitchen.consume('coke',3)
>>> kitchen.consume('whole milk',1)
>>> kitchen.stare_inside()
4 items in kitchen fridge:
   1: ketchup -- 1
   2: pepsi -- 2
   3: banana -- 3
   4: anchovies -- 24
>>> kitchen.shop()
shopping list:
   1: coke
   2: red bull
   3: whole milk 
```

这是基于[集合模块 Counter 类。](http://docs.python.org/2/library/collections.html#collections.Counter)你不太可能想出更快的原生 Python。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T19:56:29.960

实际上，使用一组字符串而不是单个标志成员可能会更好。对于您似乎正在尝试做的事情，以下内容可能会更好。

```
class ThingsInTheFridge:
    """I represent a collection of items in a refrigerator.

    I contain a few things by default.  You can add and remove items as
    well as test for membership.

    >>> things = ThingsInTheFridge()
    >>> object() in things
    False
    >>> things.store_item('foo')
    >>> 'foo' in things
    True
    """
    def __init__(self):
        self._items = set()
        self.store_item('bread')
        self.store_item('umbrella')
    def store_item(self, item):
        """Add an item to the fridge.
        :param item: the item to add.

        Items are coerced into strings and normalized before they are
        added to the internal list.

        >>> things = ThingsInTheFridge()
        >>> things.store_item(False)
        >>> 'false' in things
        True
        >>> 'FALSE' in things
        True
        >>> False in things
        True
        """
        self._items.add(str(item).lower())
    def __contains__(self, item):
        """Check if an item is in the fridge.
        :param item: item to check for.

        Items are coerced into strings and normalized to match the processing
        in :py:meth:`store_item`.

        >>> things = ThingsInTheFridge()
        >>> things.store_item('Milk')
        >>> 'Milk' in things, 'milk' in things, 'MiLk' in things
        (True, True, True)
        """
        return str(item).lower() in self._items 
```

# tridion - 富文本字段中的符号

> ID：14694055
> 
> 赞同：2
> 
> 时间：2013-02-04T19:29:11.010
> 
> 标签：tridion

使符号在富文本字段中正确发布的适当方法是什么。例如，我们试图将注册商标符号显示出来，但它总是在它前面加上一个额外的Â，像这样：.Â®。

我们尝试了 ®，但结果相同。这听起来像是一个代码页问题，但一切似乎都是 UTF-8？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:37:00.013

这似乎是一个编码问题。当您说“一切似乎都是 UTF-8”时，您的页面声明中是否设置了编码？还有其他几个地方可以检查这一点。查看 Elena 关于如何解决编码问题的帖子： http: [//elenaserghie.blogspot.ca/2012/01/7-clues-to-solve-character-encoding.html](http://elenaserghie.blogspot.ca/2012/01/7-clues-to-solve-character-encoding.html)

# scala - 如何在模式匹配的右侧考虑枚举的所有情况

> ID：14694056
> 
> 赞同：3
> 
> 时间：2013-02-04T19:29:22.983
> 
> 标签：scala, pattern-matching, dependent-type

`=>`详尽的模式匹配很棒，但它似乎只适用于 case ( ) 运算符的左侧。

我很好奇是否有人可以验证函数（或表达式）的*输出*是否可以绑定到该枚举。目标是让编译器在我忘记从枚举中输出项目时告诉我。

在我的示例中，我使用了以下包含三个项目的枚举：

```
object MyEnum { 
    sealed trait t 
    case object E1 extends t
    case object E2 extends t
    case object E3 extends t
} 
```

这是一个模式匹配表达式，它会产生编译时警告（我们已经知道）：

```
def foo( e : MyEnum.t ) : Boolean =
    e match {
        case MyEnum.E1 => true
        case MyEnum.E2 => false
        case MyEnum.E3 => true   // if we leave this line out, we get a warning
    } 
```

如果我们省略了模式匹配表达式，Scala 会抱怨`MyEnum.E3`，引用非详尽的模式匹配。这是非常有益的，但我想知道是否可以反过来。

`MyEnum.t`我们能解释右边的所有情况`=>`吗？

这是一个突出显示这一点的示例：

```
def bar( s : String ) : Option[MyEnum.t] = 
    s match {
        case "a" => Some(MyEnum.E1)
        case "b" => Some(MyEnum.E2)
        case "c" => Some(MyEnum.E3)  // if we leave this out, no warning
        case _ => None
    } 
```

在这个例子中，如果我们省略了带有 的行`MyEnum.E3`，那么编译器就会继续运行，就好像没有任何问题一样。我想做的断言是：

```
forall MyEnum.t (aliased as e) there exists Some(e) | None 
```

我知道这可以很容易地通过运行时测试来解决，但我很好奇是否有一种方法可以静态地检查它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:03:25.420

我要靠运气并声称这是不可能的（让我们对奥德斯基保密）。如果 Scala 编译器能够检测到这种情况，我认为它会比现在更慢；）

我能看到的唯一方法是定义 foo 与您所做的类似，并通过使其迭代 foo 来制作反向映射来定义 bar ，但这对我来说没有多大意义，并且可能不适用于您的特定案子。

我认为您的案例是单元测试有用的一个很好的例子，那么为什么不写一个呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:36:30.157

不，这是不可能的，因为这相当于停机问题，该问题在 1936 年被证明是无法解决的。

# c# - 如何使用 StreamWriter 在单词之间创建空格

> ID：14694058
> 
> 赞同：1
> 
> 时间：2013-02-04T19:29:38.647
> 
> 标签：c#, winforms, filestream

我需要在file.txt 中建立一个表。实际上，我对如何构建它有一些想法，但我不太确定。我有一些字段和它的值我只需要使用这些字段的名称和它的值来构建一个表，例如：

```
========================================
ID     MATRICULATION     NAME
2      696969            Jose
4      969696            Maria
5      123456            Eminem
15     123412            Ghaleon 
```

我该怎么做？我猜它正在使用`StreamWriter`，但我不知道如何制作空格，因为仅使用空格键不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T19:33:59.943

将字符串写入文件时使用格式：

```
writer.WriteLine("{0,-10}{1,-15}{2}", id, matriculation, name); 
```

格式的语法[如下](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx)：

```
{index[,length][:formatString]} 
```

*length*是参数的字符串表示形式中的最小字符数。如果为正，则参数右对齐；如果为负，则为左对齐

# ruby - ruby & rvm - 如何安装“p”版本的 ruby

> ID：14694059
> 
> 赞同：8
> 
> 时间：2013-02-04T19:29:39.177
> 
> 标签：ruby, rvm

如何使用 rvm 安装特定版本的 Ruby，例如，而不是我拥有`1.9.3p327`的当前版本。`1.9.3p194`

所有的参考资料和文档都是关于主要版本的，例如，`rvm install 1.9.3`但不要提及“p”次要版本号。

我试过了

```
$ rvm install 1.9.3p327
Unknown ruby interpreter version: '1.9.3p327'.
Could not detect ruby version/name for installation, please be more specific.
$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]
$ rvm install '1.9.3p327'
Unknown ruby interpreter version: '1.9.3p327'.
Could not detect ruby version/name for installation, please be more specific. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T19:31:30.297

原来是破折号！`$ rvm install 1.9.3-p327`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:36:20.957

`rvm install 1.9.3p327`应该在没有单引号的情况下工作。

**编辑：现在不推荐使用以下选项。**

或者，要安装特定级别的补丁程序，您可以使用该`-l`选项。例如

```
rvm install 1.9.3 -l 327 
```

# ruby - 来自 url 的 ruby 构建哈希

> ID：14694069
> 
> 赞同：1
> 
> 时间：2013-02-04T19:30:22.997
> 
> 标签：ruby

在 Ruby 中，什么是从请求路径构造 Hash 的有效方法，例如：

```
/1/resource/23/subresource/34 
```

变成一个看起来像这样的哈希：

```
{'1' => { 'resource' => { '23' => 'subresource' => { '34' => {} } } } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T19:53:31.963

```
path = "/1/resource/23/subresource/34"
path.scan(/[^\/]+/).inject(hash = {}) { |h,e| h[e] = {} }

hash
=> {"1"=>{"resource"=>{"23"=>{"subresource"=>{"34"=>{}}}}}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:53:16.780

递归解决方案似乎是最简单的事情。这不是最漂亮的，但它有效：

```
def hashify(string)
  k,v = string.gsub(/^\//, '').split('/', 2)  
  { k => v.nil? ? {} : hashify(v) }  
end 
```

可能存在无法正确处理的极端情况（可能是），但它满足您给出的示例。

# highcharts - 在 Highchart 中使用 columnRange 图表指定 xAxis 值

> ID：14694070
> 
> 赞同：0
> 
> 时间：2013-02-04T19:30:24.543
> 
> 标签：highcharts

我正在使用 highchart，试图制作一个图表，显示占用不同房间的人数的高低值。所以我有这样的数据：

```
[[roomName, low, high], [roomName, low, high] ...] 
```

例如：

```
["XRay", 12, 45], ["Waiting Room", 8, 22], ["Admitting", 22, 56]] 
```

我想要发生的是让 x 轴使用房间名称作为类别轴上的值。但我看不到这会发生。它使用它们作为点的名称。

如果我只是做一个柱形图，我可以为点设置 ​​x 和 y 属性：

```
[x:"XRay", y:12], [x:"Waiting Room", y:8], [x:"Admitting", y:56]] 
```

但我不知道如何使用列范围来做到这一点。

我当然可以自己手动解析数据并设置 xAxis 的类别，但我想知道是否有更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:36:21.943

It could be done in two ways, as suggested categories, or using label formatter, both are here: [http://jsbin.com/oyudan/17/edit](http://jsbin.com/oyudan/17/edit)

Formats:

```
[ {x: 'string' } ... ] 
```

are not proper.

# php - 在 CakePHP 2.3 中使用 bcrypt

> ID：14694071
> 
> 赞同：2
> 
> 时间：2013-02-04T19:30:25.247
> 
> 标签：php, cakephp, bcrypt

我注意到在 CakePHP 的 3.2 版本中，他们添加了对使用 bcrypt 散列的支持。我想利用这一点，但我似乎无法找到如何正确使用它。

在我的`User`模型`beforeSave()`方法中，我正在这样做：

```
if(isset($this->data[$this->alias]['password'])) {
    $this->data[$this->alias]['password'] = Security::hash($this->data[$this->alias]['password'], 'blowfish');
    unset($this->data['User']['passwd']);
} 
```

它成功地在数据库中为用户帐户保存了一个 bcrypt 哈希。但是，我不确定我打算如何登录用户。我的用户控制器具有以下登录操作：

```
public function login() {
    if($this->request->is('post')) {
        if($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash('Invalid username or password, try again.');
        }
    }
} 
```

但它每次都说“无效的用户名或密码”，我确定这是正确的电子邮件/密码。我认为这是因为 AuthComponent 不知道它应该使用 bcrypt 但我不确定。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T00:59:07.490

好吧，我设法解决了。以下是相关代码：

在`AppController.php`：

```
public $components = array(
    'Session',
    'Auth' => array(
        'authenticate' => array(
            'Blowfish' => array(
                'fields' => array('username' => 'email')
            )
        ),
        'loginRedirect' => array('controller' => 'pages', 'action' => 'home'),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'home')
    )
); 
```

在`User.php`：

```
public function beforeSave($options = array()) {
    if(isset($this->data[$this->alias]['password'])) {
        $this->data[$this->alias]['password'] = Security::hash($this->data[$this->alias]['password'], 'blowfish');
        unset($this->data['User']['passwd']);
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T08:45:42.597

**相关**主题：[CakePHP - 如何为密码实现河豚散列？](https://stackoverflow.com/questions/21113819/cakephp-how-do-i-implement-blowfish-hashing-for-passwords)

plus+ varchar(60) 用于密码数据库字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T18:54:46.220

为什么？

```
unset($this->data['User']['password']); 
```

这将在保存之前清除密码..

# c++ - 不取消引用迭代器的 std::for_each 等价物

> ID：14694081
> 
> 赞同：2
> 
> 时间：2013-02-04T19:30:51.047
> 
> 标签：c++, foreach, iterator

是否有像 std::for_each 这样的函数直接传递迭代器而不是取消引用它们的结果？

我们有什么

```
std::vector<int> ints;
std::for_each(ints.begin(), ints.end(),
[](int i)
{
  //how to get the iterator of this element???
} 
```

我在寻找什么

```
for_each_iterator(ints.begin(), ints.end(),
[](const std::vector<int>::const_iterator &i)
{
  //we know the iterator here
} 
```

当然，编写这样一个函数相当简单，但我想问是否存在来自 的标准解决方案`std::`，`std::tr1::`或者`boost::`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:34:05.827

您正在查看错误的抽象级别。该`for_each`算法将该函数应用于范围内*的每个**元素***。如果你需要对迭代器进行操作，你应该展开你的循环：

```
for (auto it = ints.begin(); it != ints.end(); ++it ) {
   // do something
} 
```

你所要求的将是微不足道的，只是在我看来没有那么有用。要么控制迭代器在循环中的更新方式（如上面的代码），要么迭代器本身几乎没有用处。你想从迭代器中得到什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T19:34:58.723

标准库中没有这样的东西。但是自己实现并不难：

```
template<typename It, typename Functor >
void iterate(It begin, It end, Functor && f)
{
    while ( begin != end ) { f(begin); ++begin; }
} 
```

并将其用作：

```
iterate(ints.begin(), ints.end(), [](std::vector<int>::iterator it)
              {
                 //use it
              }); 
```

或者使用手动循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T19:41:57.650

我只能想到如何为迭代器使用包装器，我想不出只使用标准算法的方法，所以你仍然需要编写一些辅助代码。例子：

```
#include <algorithm>
#include <vector>
#include <iostream>

template<typename T>
struct it_wrapper {
   it_wrapper(const T& t) : it(t) { }

   T operator*() const {
      return it;
   }

   it_wrapper& operator++() {
      ++it;
      return *this;
   }

   it_wrapper operator++(int) {
      it_wrapper old = *this;
      ++it;
      return old;
   }

   bool operator!=(const it_wrapper& rhs) {
      return it != rhs.it;
   }

   T it;
};

template<typename T>
it_wrapper<T> wrap(const T& t) {
   return it_wrapper<T>(t);
}

int main() {
   std::vector<int> v { 1, 2, 3, 4 };

   std::for_each(wrap(v.begin()), wrap(v.end()), [](decltype(v.begin()) i) {
      std::cout << *i << '\n';
   });
} 
```

印刷

> 1
> 
> 2
> 
> 3
> 
> 4

我不确定这比仅使用`for`-loop 更有帮助，但你必须有你的理由......

# javascript - 在 javascript 中使用位运算符

> ID：14694082
> 
> 赞同：5
> 
> 时间：2013-02-04T19:30:51.397
> 
> 标签：javascript

我正在用 javascript 创建一个位掩码。它适用于第 0 位到第 14 位。当我仅将第 15 位设置为 1 时。它产生“ `-2147483648`”而不是“ `2147483648`”的整数值。我可以在这里通过返回硬编码的“”来做一个特殊情况的破解，`2147483648`但我想知道正确的做法。

示例代码：

```
function join_bitmap(hex_lower_word, hex_upper_word)
{
    var lower_word = parseInt(hex_lower_word, 16);
    var upper_word = parseInt(hex_upper_word, 16);
    return (0x00000000ffffffff & ((upper_word<<16) | lower_word));
} 
```

当 hex_lower_word 为“0x0”且 hex_upper_word 为“0x8000”而不是 2147483648 时，上述代码返回 -2147483648

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:41:13.947

这是因为 Javascript 的位移操作使用有符号的 32 位整数。所以如果你这样做：

```
0x1 << 31   // sets the 15th bit of the high word 
```

它将符号位设置为 1，这意味着负数。

另一方面，不是位移，而是乘以 2 的幂，你会得到你想要的结果：

```
1 * Math.pow(2, 31) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T19:43:14.853

原因是，您正在设置`sign bit`...

`2147483648`是 1 后跟 31 个二进制零 ...

当您进行按位运算时，输出始终是带符号的 32 位数字，这使得第 32 位成为符号位，因此您得到一个负数...

**更新**

```
(upper_word * Math.pow(2, 16)) 
```

会给积极`2147483648`的。

但是，你仍然有`OR`手术，这让我们回到第一方......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:25:46.060

正如前面的答案所解释的，按位运算符是 32 位有符号的。因此，如果在您设置第 31 位的过程中的任何时候，事情都会大错特错。

在您的代码中，表达式

```
(upper_word<<16) | lower_word) 
```

由于括号，首先计算，并且由于 upper_word 设置了最高位，您现在将有一个负数 ( `0x80000000 = -2147483648`)

解决方案是确保您不将 a`1`移入第 31 位 - 因此您必须在移位之前将高位字的第 15 位设置为零：

```
mask15 = 0x7fff;
((upper_word&mask15)<<16|lower_word) 
```

这将处理“太大的数字变成负数”，但它不会完全解决问题 - 它只会给出错误的答案！要回到正确的答案，您需要在答案中设置第 31 位，如果在 upper_word 中设置了第 15 位：

```
bit15 = 0x8000;
bit31 = 0x80000000;
answer = answer + (upper_word & bit15)?bit31:0; 
```

重写后的函数变为：

```
function join_bitmap(hex_lower_word, hex_upper_word)
    {
        var lower_word = parseInt(hex_lower_word, 16);
        var upper_word = parseInt(hex_upper_word, 16);
        var mask15 = 0x7fff;
        var bit15 = 0x8000;
        var bit31 = 0x80000000;
        return 0xffffffff & (((upper_word&mask15)<<16) | lower_word) + ((upper_word & bit15)?bit31:0);
    } 
```

不只是一个“硬编码的特殊情况”——大约有 20 亿个。这会照顾所有人。

# mysql - 具有非唯一值的高级 MySQL 查询问题

> ID：14694084
> 
> 赞同：1
> 
> 时间：2013-02-04T19:31:07.463
> 
> 标签：mysql, sql

我有 3 个表，它们的设置如下：

```
Quotes Table                        Stores Table    
id  store_id    date_submitted      store_number    code
1   15          1/29/13 23:13       15          ANT
2   16          1/30/13 7:47        16          MAT

Leads Table 
code    user_name
MAT         User1
ANT         User2 
```

我想要做的是让查询返回报价表中的所有值，然后返回 Stores 表中的代码值和潜在客户表中的 user_name。我希望它看起来像这样：

```
id  store_id    date_submitted  code    user_name
1   15          1/29/13 23:13   ANT User2
2   16          1/30/13 7:47    MAT User1 
```

我有以下查询：

```
SELECT id, store_id, date_submitted, code, user_name FROM quotes q, stores s, leads l WHERE CONCAT('%', q.store_id, '%') LIKE CONCAT('%', s.store_number, '%') AND s.code=l.code AND date_submitted > "2013-01-01 00:00:00" AND date_submitted < "2013-01-31 23:59:59" GROUP BY q.id 
```

我遇到的问题是数据库没有将代码与正确的 store_id 匹配。

我不确定我在这里做错了什么，我查看了一些 SO 帖子，并用谷歌搜索无济于事。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:35:56.193

好吧，你为什么要使用通配符 ( `%`) 来加入？，你不能`store_id`使用`store_number`完全匹配吗？。此外，为了清楚起见，您应该使用显式`JOIN`s：

```
SELECT id, store_id, date_submitted, code, user_name 
FROM quotes q
INNER JOIN stores s
    ON q.store_id = s.store_number
INNER JOIN leads l 
    ON s.code=l.code 
WHERE date_submitted > "2013-01-01 00:00:00" 
AND date_submitted < "2013-01-31 23:59:59" 
GROUP BY q.id 
```

# concurrency - 多个 goroutine 打印到标准输出是否安全？

> ID：14694088
> 
> 赞同：35
> 
> 时间：2013-02-04T19:31:13.933
> 
> 标签：concurrency, synchronization, go, goroutine

我的程序中有多个 goroutine，每个 goroutine 都在`fmt.Println`没有任何显式同步的情况下调用。这是安全的（即，每一行是否会单独出现而不会损坏数据），还是我需要创建另一个具有同步功能的 goroutine 来专门处理打印？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-04T20:06:03.373

不，即使您有时可能看不到任何麻烦，这也不安全。IIRC， fmt 包试图保持安全，因此可能会发生某种混合，但希望不会出现进程崩溃。

这是更通用的 Go 文档规则的一个实例：除非另有说明或从上下文中显而易见，否则事物对于并发访问是不安全的。

使用带有一些小的初始设置的 log 包，可以拥有一个不错的 fmt.Print* 功能子集的安全版本。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-04T20:03:50.890

一切`fmt`都回落到[这里](http://golang.org/src/pkg/fmt/print.go#L214)`w.Write()`可以看到。因为它周围没有锁定，所以一切都回退到. 由于仍然没有锁定（[至少对于 Stdout](http://golang.org/src/pkg/os/file.go#L51)），因此无法保证您的输出不会混合。`Write()`

我建议使用全局日志例程。

此外，如果您只是想记录数据，请使用该`log`包，它可以正确锁定对输出的访问。请参阅[实现](http://golang.org/src/pkg/log/log.go#L134)以供参考。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-04-10T15:38:00.487

常用方法（fmt.printLine）并不安全。但是，有一些方法。

log.Logger 是“goroutine 安全的”：[https ://golang.org/pkg/log/#Logger](https://golang.org/pkg/log/#Logger)

像这样的东西将创建一个标准输出记录器，可以安全地从任何 go 例程中使用。

`logger := log.New(os.Stdout, "", 0)`

# php - 如何从成员函数更改类中的数组属性

> ID：14694091
> 
> 赞同：0
> 
> 时间：2013-02-04T19:31:27.353
> 
> 标签：php, arrays, class

在下面的代码中，我试图根据“widget”函数中的 $line_above 变量的值来更改 $widget_ops “classname”数组。我不确定如何寻址数组以更改值。

这可能吗？

```
class my_widget extends WP_Widget {

    function my_widget() {
        $widget_ops = array('classname' => 'test', 'description' => __( "test") );
        $control_ops = array('width' => 450, 'height' => 100, 'id_base' => 'my_widget' );
        $this->WP_Widget('my_widget', __('Test: test'), $widget_ops, $control_ops);
    }

    function widget( $args, $instance ) {
        extract($args);
        $title = apply_filters( 'widget_title', empty($instance['title']) ? '' : $instance['title'], $instance );
        $text = apply_filters( 'widget_text', $instance['text'], $instance );
        $line_above = isset( $instance['line_above'] ) ? $instance['line_above'] : false;

        if($line_above){
            //TRYING TO ALTER THE CLASS HERE BASED ON VARIABLE
            $widget_ops['classname'] .= " border-top";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:46:49.683

你可以让它全球化：

```
class my_widget extends WP_Widget {

    private $widget_ops;

    function my_widget() {
        $this->widget_ops = array('classname' => 'test', 'description' => __( "test") );
        $control_ops = array('width' => 450, 'height' => 100, 'id_base' => 'my_widget' );
        $this->WP_Widget('my_widget', __('Test: test'), $this->widget_ops, $control_ops);
    }

    function widget( $args, $instance ) {
        extract($args);
        $title = apply_filters( 'widget_title', empty($instance['title']) ? '' : $instance['title'], $instance );
        $text = apply_filters( 'widget_text', $instance['text'], $instance );
        $line_above = isset( $instance['line_above'] ) ? $instance['line_above'] : false;

        if($line_above){
            //TRYING TO ALTER THE CLASS HERE BASED ON VARIABLE
            $this->widget_ops['classname'] .= " border-top";
        }
    }
} 
```

# z3 - eval 返回一个 let 语句

> ID：14694092
> 
> 赞同：0
> 
> 时间：2013-02-04T19:31:27.943
> 
> 标签：z3

我在 Z3 中运行以下 SMT2 规范。我们的目标是在`eval`最后得到答案——要么是要么`true`——`false`但我得到了一个`let`声明。这是一个错误，还是我应该以`let`某种方式解释？手工编译给了我`false`，它看起来很简单，但 Z3 似乎很困惑。

```
(declare-sort PolymorphicClass 0)

(declare-fun PolymorphicClass!val!6 () PolymorphicClass)
(declare-fun PolymorphicClass!val!13 () PolymorphicClass)
(declare-fun PolymorphicClass!val!2 () PolymorphicClass)
(declare-fun PolymorphicClass!val!12 () PolymorphicClass)
(declare-fun PolymorphicClass!val!14 () PolymorphicClass)
(declare-fun PolymorphicClass!val!10 () PolymorphicClass)
(declare-fun PolymorphicClass!val!8 () PolymorphicClass)
(declare-fun PolymorphicClass!val!9 () PolymorphicClass)
(declare-fun PolymorphicClass!val!15 () PolymorphicClass)
(declare-fun PolymorphicClass!val!0 () PolymorphicClass)
(declare-fun PolymorphicClass!val!1 () PolymorphicClass)
(declare-fun PolymorphicClass!val!11 () PolymorphicClass)
(declare-fun PolymorphicClass!val!3 () PolymorphicClass)
(declare-fun PolymorphicClass!val!5 () PolymorphicClass)
(declare-fun PolymorphicClass!val!4 () PolymorphicClass)
(declare-fun PolymorphicClass!val!7 () PolymorphicClass)

(define-fun k!623 ((x!1 PolymorphicClass)) PolymorphicClass
  (ite (= x!1 PolymorphicClass!val!15) PolymorphicClass!val!15
  (ite (= x!1 PolymorphicClass!val!2) PolymorphicClass!val!2
  (ite (= x!1 PolymorphicClass!val!7) PolymorphicClass!val!7
  (ite (= x!1 PolymorphicClass!val!8) PolymorphicClass!val!8
  (ite (= x!1 PolymorphicClass!val!10) PolymorphicClass!val!10
  (ite (= x!1 PolymorphicClass!val!9) PolymorphicClass!val!9
  (ite (= x!1 PolymorphicClass!val!14) PolymorphicClass!val!14
  (ite (= x!1 PolymorphicClass!val!0) PolymorphicClass!val!0
  (ite (= x!1 PolymorphicClass!val!6) PolymorphicClass!val!6
  (ite (= x!1 PolymorphicClass!val!5) PolymorphicClass!val!5
  (ite (= x!1 PolymorphicClass!val!1) PolymorphicClass!val!1
  (ite (= x!1 PolymorphicClass!val!4) PolymorphicClass!val!4
  (ite (= x!1 PolymorphicClass!val!12) PolymorphicClass!val!12
  (ite (= x!1 PolymorphicClass!val!11) PolymorphicClass!val!11
    PolymorphicClass!val!13)))))))))))))))

(define-fun isBlog!641 ((x!1 PolymorphicClass)) Bool
  (ite (= x!1 PolymorphicClass!val!0) true
  (ite (= x!1 PolymorphicClass!val!1) true
    false)))

(define-fun isBlog ((x!1 PolymorphicClass)) Bool
  (isBlog!641 (k!623 x!1)))

(check-sat)
(get-model)

(eval (isBlog PolymorphicClass!val!6))

(exit) 
```

这是我从 Z3 得到的输出：

```
sat
(model 
)
(let ((a!1 (ite (= PolymorphicClass!val!6 PolymorphicClass!val!9)
                PolymorphicClass!val!9
                (ite (= PolymorphicClass!val!6 PolymorphicClass!val!14)
                     PolymorphicClass!val!14
                     (ite (= PolymorphicClass!val!6 PolymorphicClass!val!0)
                          PolymorphicClass!val!0
                          PolymorphicClass!val!6)))))
(let ((a!2 (ite (= PolymorphicClass!val!6 PolymorphicClass!val!7)
                PolymorphicClass!val!7
                (ite (= PolymorphicClass!val!6 PolymorphicClass!val!8)
                     PolymorphicClass!val!8
                     (ite (= PolymorphicClass!val!6 PolymorphicClass!val!10)
                          PolymorphicClass!val!10
                          a!1)))))
(let ((a!3 (ite (= PolymorphicClass!val!6 PolymorphicClass!val!15)
                PolymorphicClass!val!15
                (ite (= PolymorphicClass!val!6 PolymorphicClass!val!2)
                     PolymorphicClass!val!2
                     a!2))))
          (or (= a!3 PolymorphicClass!val!0) (= a!3 PolymorphicClass!val!1))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:27:51.963

您的值尚未用于任何实际约束（仅在定义中）。您可以使用模型完成来确保 Z3 评估未在约束中使用的值。

所以你可以打电话：

```
 (eval (isBlog PolymorphicClass!val!6) :model-completion true) 
```

以获得适当的评价。

请参阅相关问题：[Z3 4.3：获取完整模型](https://stackoverflow.com/questions/14524316/z3-4-3-get-complete-model/14525498#14525498)以获取更多信息。

# php - 如何在php中获取包含所有动态复选框值的电子邮件

> ID：14694101
> 
> 赞同：0
> 
> 时间：2013-02-04T19:31:55.697
> 
> 标签：php, arrays, checkbox

我是 PHP 新手，见过一些类似的查询，但我的涉及 2 个数组，我不知道如何将它们放在一起。有人可以帮忙吗？非常感谢！我搬出去做一个网站来卖我的东西，我在表格上有一个选择项目和报价金额部分。我希望它们在电子邮件中彼此相邻出现。

你可以在这里看到我正在制作的网站：http: [//www.stasale.com](http://www.stasale.com)

我有以下代码：

```
<table border="1">
<tr>
<th>Image</th>
<th>Name</th>
<th>Condition</th>
<th>Description</th>
<th>Asking Price</th>
<th>Select Item</th>
<th>Offer Value</th>
</tr>

<?php   
 require_once('appvars.php');
 require_once('connectvars.php');
 // Connect to the database 
$dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME); 
$query = "SELECT * FROM stasale ORDER BY date DESC";
$data = mysqli_query($dbc, $query);

while ($row = mysqli_fetch_array($data)) { 

  if (is_file(GW_UPLOADPATH . $row['image']) && filesize(GW_UPLOADPATH . $row['image']) > 0) {
  echo '<tr><td><img src="' . GW_UPLOADPATH . $row['image'] . '" alt="' . $row['image'] . '" width="100" height="100"/></td>
  <td>' . $row['name'] . '</td>
  <td>' . $row['condition'] . '</td> 
  <td>' . $row['description'] . '</td> 
  <td>' . $row['askingprice'] . '</td> 
  <td><form method="post" action="mail.php"><input type="checkbox" name="itemname[]" value="' . $row['id'] . '">Select</td> 
  <td>Offer: <input type="text" name="offer[]"></td></tr>';
}
else {
  echo 'Invalid row';
}
} ?>

<tr><td colspan="3">Contact Name:</td><td colspan="4"><input type="text" name="coname" width="300" ></td></tr>
<tr><td colspan="3">Contact Number:</td><td colspan="4"><input type="text" name="conumber" width="300" ></td></tr>
<tr><td colspan="3">Contact Email:</td><td colspan="4"><input type="text" name="coemail" width="300" ></td></tr>
<tr><td colspan="3">Questions/Comments:</td><td colspan="4"><input type="text" name="comments" width="300" height="100"></td></tr>

<tr><td colspan="7" align="center"><input type="submit" value="Send Request" name="submit" style="width:500px"/></form></td></tr>
</table> 
```

我似乎无法弄清楚如何从 itemname[] 或 offer[] 获取值以显示在我的 mail.php 页面中，我觉得这是完全错误的：

```
if (isset($_POST['submit'])) {
$name = $_POST['coname'];
$email = $_POST['coemail'];
$number = $_POST['conumber'];
$comments = $_POST['comments'];
foreach ($_POST['itemname'] as $itemname)
foreach ($_POST['offer'] as $offer)

{

}
$to = 'shinobuden@gmail.com';
$subject = 'STASALE order';
$msg = "$name, $email, $number, $comments \n" .
  "I would like: $itemname" .
  "$offer";

mail($to, $subject, $msg, 'From:' . $email);

$to = "$email";
$subject = 'I have received your request - Si';
$msg = 'Thank you for contacting me! I have received your request and will reply shortly! ~ Si x';
$from = 'shinobuden@gmail.com';

mail($to, $subject, $msg, 'From:' . $from); 

echo '<p><strong>Thanks for your request. I will respond as soon as possible.</strong></p>';

}

?> 
```

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:44:36.070

你可以这样做：

```
foreach ($_POST['offer'] as $key => $value) {
        if ($value) {
            $offer_arr[] = $value;
        }
    }

    $str = '';
    for ($i = 0; $i <= count($_POST['itemname']); $i++) {
        if ($_POST['itemname'][$i]) {
            $str .= 'Item: ' . $_POST['itemname'][$i] . ' Offer: ' . $offer_arr[$i] . ', ';
        }
    } 
```

`$str`将包含彼此相邻的所有项目和优惠。

# django - Django 结帐模型

> ID：14694102
> 
> 赞同：1
> 
> 时间：2013-02-04T19:32:00.880
> 
> 标签：django, django-models, python-2.7

使用 Django 创建结帐系统以跟踪结帐/签入历史记录的最佳方法是什么？

我的模型`inventory/models.py`

```
from django.db import models

class Groups(models.Model):
    name = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name

class Inventory(models.Model):
    name = models.CharField(max_length=200)
    serial = models.CharField(max_length=200)
    barcode = models.CharField(max_length=200)
    active = models.BooleanField(verbose_name="Active (can be checked out if not out for repair)",blank=True,default=True)
    repair = models.BooleanField(verbose_name="Out for repair?",blank=True)
    group = models.ForeignKey(Groups)

    def __unicode__(self):
        return self.name 
```

我想我需要另一个模型来存储结帐/输入信息？我猜我只需要获得最后一个，以便我知道它是签入还是签出？我想保留项目的历史记录，以便我可以使用它创建报告。

我将如何制作它，以便我了解这些物品的历史以及这些物品是否可以签入或签出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:52:58.563

是的，从您的问题中并不清楚结帐/签入是什么，但我猜您想要类似的东西

```
class Checkout(models.Model)
    item = models.ForeignKey(Inventory)
    user = models.ForeignKey(User)
    checked_out = models.DateTimeField()
    checked_in = models.DateTimeField(null=True)
    ... 
```

然后，您将在每次签出项目时创建这些对象之一，然后更新它以在重新签入时设置签入日期。

要查找当前结帐（或确定是否未签出），您可以执行如下查询：

```
try:
    checkout = Checkout.objects.get(item=my_item, checked_in=None)
except Checkout.DoesNotExist:
    #item isn't checked out
    checkout = None 
```

# android - 更新操作栏菜单

> ID：14694103
> 
> 赞同：0
> 
> 时间：2013-02-04T19:32:05.503
> 
> 标签：android, android-actionbar, actionbarsherlock

我在操作栏中（夏洛克操作栏）中的刷新按钮变得不可见。但是，我不知道如何在我的函数内部调用操作栏更新（`onPrepareOptionsMenu()`或`InvalidateOptionsMenu()`）`makeupdate()`（我需要在函数内部调用）。我已经在 stackoverflow 和谷歌搜索了几个小时......测试了所有但一无所获......

我的`makeupdate()`功能：

```
public void makeupdate(String toast) {
    Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    MenuItem item = menu.findItem(R.id.refresh);
    item.setVisible(false);
} 
```

**编辑 - 我的代码**

```
public class SiteActivity extends SherlockActivity {

    private WebView myWebView;
    final Activity MyActivity = this;
    com.actionbarsherlock.app.ActionBar actionbar;
    private Menu mainMenu;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 

        actionbar = getSupportActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
        actionbar.setTitle("APP");
        actionbar.setDisplayOptions(ActionBar.DISPLAY_SHOW_TITLE);

        setContentView(R.layout.site);

        myWebView = (WebView) findViewById(R.id.webview);
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.getSettings().setBuiltInZoomControls(true);
        myWebView.addJavascriptInterface(new WebAppInterface(this), "Android");  
            myWebView.loadUrl("file:///android_asset/noconnection.html");

        myWebView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress)
            {
                MyActivity.setProgress(progress * 100);
            }
        });

        myWebView.setWebViewClient(new SiteActivityClient() {
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                myWebView.loadUrl("file:///android_asset/noconnection.html");
            }   
        });                 
    }

    public class WebAppInterface {
        Context mContext;

        WebAppInterface(Context c) {
            mContext = c;
        }
        @JavascriptInterface
        public void makeupdateshowToast(String toast) {
            Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
            mainMenu.findItem(R.id.refresh).setVisible(false);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getSupportMenuInflater().inflate(R.layout.actionbar, menu);
        mainMenu = menu;
        return true;
    }       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:15:27.980

您的 _WebAppInterface_ 类已经有一个 Context 成员。将其设为 SherlockActivity（更改名称会更好）

```
public class WebAppInterface {
     SherlockActivity mActivity;

WebAppInterface(SherlockActivity c) {
    mActivity = c;
}
@JavascriptInterface
public void makeupdateshowToast(String toast) {
    Toast.makeText(mActivity, toast, Toast.LENGTH_SHORT).show();
    mainMenu.findItem(R.id.refresh).setVisible(false);
    mActivity.invalidateOptionsMenu();
}

} 
```

并打电话

```
mActivity.invalidateOptionsMenu() 
```

# android - ScrollView 元素隐藏在 ActionBar 后面

> ID：14694104
> 
> 赞同：1
> 
> 时间：2013-02-04T19:32:05.767
> 
> 标签：android, android-layout, android-widget

当我点击一个文本字段并弹出键盘时，我的 ScrollView 上面的几个字段隐藏在 ActionBar 后面。

![在此处输入图像描述](../Images/0e99f0d865a0f2aac3be5bab93bc2e18.png)

如果您查看滚动条，它位于最顶部。这意味着即使我现在向上滚动，元素也不会出现。

我正在使用 ActionBarSherlock。我不确定这是 ABS 还是 ScrollView 的问题。

这是我的滚动视图的代码：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView_MessageUpdate"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MessengerActivity"
    android:scrollbarStyle="outsideOverlay"
    android:background="@drawable/repeating_bg"
>

    <RelativeLayout
        android:id="@+id/RelativeLayout_MessageUpdate"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:layout_gravity="center"
        android:gravity="center"
        android:background="@drawable/repeating_bg"
        >

        <EditText
            android:id="@+id/txtPostedBy"
            android:hint="@string/txtPostedByHint"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="12"
            android:inputType="none"
            android:layout_marginTop="100dip">

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/txtPostTitle"
            android:hint="@string/txtPostTitleHint"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txtPostedBy"
            android:ems="12"
            android:layout_marginTop="3dip"
            android:inputType="text">
        </EditText>

        <EditText android:id="@+id/txtMessage"
            android:hint="@string/txtMessageHint"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:lines="3"
            android:gravity="top|left"
            android:inputType="textMultiLine"
            android:scrollHorizontally="false"
            android:layout_alignLeft="@+id/txtPostTitle"
            android:layout_alignRight="@+id/txtPostTitle"
            android:layout_below="@+id/txtPostTitle"
        />

        <EditText android:id="@+id/txtComment"
            android:hint="@string/txtCommentHint"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:lines="5"
            android:gravity="top|left"
            android:inputType="textMultiLine"
            android:scrollHorizontally="false"
            android:layout_alignLeft="@+id/txtPostTitle"
            android:layout_alignRight="@+id/txtPostTitle"
            android:layout_below="@+id/txtMessage"
        />

        <Button
            android:id="@+id/btnUpdateMessage"
            android:text="@string/btnUpdateText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/txtComment"
            style="@style/styledBuutonNoIcon_text"
            android:background="@drawable/styled_inner_form_button"
            android:layout_alignLeft="@+id/txtPostTitle"
            android:layout_alignRight="@+id/txtPostTitle"
            android:layout_marginTop="3dip" />

        <Button
            android:id="@+id/btnCancelMessage"
            android:text="@string/btnCancelText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btnUpdateMessage"
            style="@style/styledBuutonNoIcon_text"
            android:background="@drawable/styled_inner_form_button"
            android:layout_alignLeft="@+id/txtPostTitle"
            android:layout_alignRight="@+id/txtPostTitle"
            android:layout_marginTop="3dip" />

        <!-- 
        <Button
            android:text="@string/btnDeleteText"
            android:id="@+id/btnDeleteSchool"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/btnCancelSchool"
            style="@style/styledBuutonNoIcon_text"
            android:background="@drawable/styled_inner_form_button"
            android:layout_alignLeft="@+id/txtSchoolWebsite"
            android:layout_alignRight="@+id/txtSchoolWebsite"
            android:layout_marginTop="3dip"
            />
         -->
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:27:37.227

将`android:windowSoftInputMode`您的活动设置`AndroidManifest.xml`为`"adjustPan"`.

根据[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)：

> Activity 的主窗口没有调整大小来为软键盘腾出空间。相反，窗口的内容会自动平移，因此当前焦点永远不会被键盘遮挡，用户始终可以看到他们正在输入的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-02T14:54:44.227

我通过删除主布局中的“中心”解决了同样的问题

```
android:layout_gravity="center"
android:gravity="center" 
```

# git-svn - git svn 并且不要下载某些文件

> ID：14694106
> 
> 赞同：1
> 
> 时间：2013-02-04T19:32:17.647
> 
> 标签：git-svn

我想克隆一个带有 的 SVN 存储库`git-svn`，并且不下载一些——对我来说没用的——“巨大”文件（由扩展名识别，因为它们并不都在同一个文件夹中）。

`git-update-index --assume-unchanged`或`git-gc`允许压缩本地存储库，但文件已下载。

是否可以使用`sparse-checkout`with 之类的东西`git-svn`？或者有什么解决方案可以避免下载一些文件`git-svn`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T22:56:15.180

`--ignore-paths`的选项`git-svn`可能会对您有所帮助。

# c++ - C++ 类实例标识符未声明

> ID：14694107
> 
> 赞同：0
> 
> 时间：2013-02-04T19:32:38.247
> 
> 标签：c++, dev-c++, undeclared-identifier

所以，我正在尝试编译我的代码，但编译器一直抱怨“'mysnake'未声明（首先使用此函数）”，但我声明了它。这是我的 Main.cpp，它已被声明。

```
#include "Class.h"
#include "Snake.h"

int main(int argc, char* args[]){
    Prog run;
    if((run.Init())==false){
      return(1);
      }
    Snake mysnake;
    if(run.LoadFiles()==false){
      return(1);
      }
    run.MainLoop();
    if(run.Draw()==false){
      return(1);
      }
    run.CleanUp();
    return(0);
} 
```

这是使编译器抱怨的文件（AFAIK，它是第一个引用“mysnake”的文件被编译）

```
#include "Class.h"
#include<sstream>
#include "Snake.h"

bool Prog::Draw(){
     std::stringstream message;
     SDL_Rect position;
     SDL_BlitSurface(image, NULL, screen, NULL);
     int s=mysnake.EndSnake();
     message<<"Your snake was "<<s<<" blocks long.";
     msg=TTF_RenderText_Solid(font, message.str().c_str(), font_color);
     if(msg==NULL){
       return(false);
       }
     position.x=(WWIDTH-msg->w)/2;
     position.y=(WHEIGHT-msg->h)/2;
     SDL_BlitSurface(msg, NULL, screen, &position);
     SDL_Flip(screen);
     return(true);
     } 
```

我已经考虑了一个多小时，但我仍然无法理解为什么会这样。顺便说一句，我正在使用 Bloodshed Dev C++，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:36:11.313

在您的`Draw`函数内部，没有声明名为的变量`mysnake`。该函数看不到在`mysnake`其中声明的，`main`因为它是*本地*的`main`。您需要将`mysnake`对象传递给`Draw`函数，以便它知道您实际上在谈论的是哪条蛇。

要做到这一点，给`Draw`一个类型的参数`const Snake&`，一个“引用`const Snake`”（或者去掉`const`if`EndSnake`是一个非`const`成员函数）：

```
bool Prog::Draw(const Snake& snake) {
  // ...
} 
```

当您致电`Draw`时`main`，请执行以下操作：

```
run.draw(mysnake); 
```

现在你的`Draw`函数有一个名为的变量`snake`，它是从`main`. 因为参数是一个引用，所以`Snake`它看到的对象与 中的对象完全相同`main`。如果参数是 type`Snake`而不是`const Snake&`，那么您将获得`mysnake`from的副本`main`。

* * *

一些额外的建议：

我们通常写条件，就像这样`(run.Init())==false`-`!run.init()`它读起来要好得多。Returning 通常也写成`return true;`, 而不是`return(true);`, 但这取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:35:59.800

`mysnake`在中声明的事实`main`不允许在中使用它`Prog`。您可能希望将对 mysnake 的引用传递给 Draw 方法。通过构造函数或通过对方法的调用。

```
Prog run(mysnake);
run.draw(); 
```

或者

```
run.draw(mysnake); 
```

# php - 在 wordpress 仪表板中进行 Ajax 调用

> ID：14694110
> 
> 赞同：1
> 
> 时间：2013-02-04T19:32:55.773
> 
> 标签：php, javascript, ajax, wordpress

我正在 WP 中创建一个插件，我有一个简单的表单，我正在调用 DB，但它没有响应，也没有收到回复。我认为这里有问题

```
xmlhttp.open("GET","info.php?q="+val,true);
xmlhttp.send(); 
```

我什至尝试通过 info.php 的完整路径进行调用，但它不起作用。我可以单独运行代码。我的意思是在 Wordpress 之外。请建议

# import - 未解决的导入错误但仍会成功导入

> ID：14694112
> 
> 赞同：1
> 
> 时间：2013-02-04T19:32:58.380
> 
> 标签：import, python-3.x, pydev, eclipse-juno

我正在 Eclipse Juno 中开发一个项目。我在一个名为 chargen.py 的包中编写了一个名为 Character 的类。旁边有一个红色的 X `from chargen import Character`：

```
Unresolved import: Character
Character Found at: Avarice_v0.PlayAvarice_v0

from chargen import Character 
```

然而导入工作。目前整个代码就是这样的：

```
from chargen import Character

def main():
    PLAYER = Character("")
    print(PLAYER)

if __name__ == '__main__':
    main() 
```

此代码导致打印`__str__`Character("") 运行的证明。此外，它在运行时不会产生错误。为什么 Eclipse 标记这个`Unresolved import: Character`？

![Eclipse 示例中的红色 X](../Images/3851d5aec8b97a2cbaf197023fb2977c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:50:31.647

我想出了如何摆脱错误。我将所有内容都上移了一个目录。该项目的设置显示 PYTHONPATH 包含主目录，但不包含嵌套目录。通过将其全部向上移动并删除现在为空的原始文件夹，我没有未解决的导入错误。这有助于我更多地了解在 PyDev 项目的初始设置中提供的 PYTHONPATH 选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:59:23.917

在项目的属性中，有一个名为“PyDev - PYTHONPATH”的窗格，以及一个名为“External Libraries”的子窗格。您可以使用该窗格将源文件夹（任何具有**init** .py 的文件夹）添加到路径中。然后，您的项目代码将能够从这些源文件夹中导入模块。

# java - 为什么 Mockito 会给我一个新的地图实例？

> ID：14694115
> 
> 赞同：3
> 
> 时间：2013-02-04T19:33:25.807
> 
> 标签：java, unit-testing, generics, hashmap, mockito

我有一个包含`Map<String,Widget>`属性的简单 POJO：

```
private Map<String, Widget> widgetCache = new HashMap<String, Widget>();

@Override
public Logger newWidget(String name, Widget widget) {
    // First, print the contents of widgetCache in pretty print format.
    Map<String, Widget> map = widgetCache;
    List<String> keys = new ArrayList<String>(map.keySet());
    System.out.println("Printing..." + keys.size());
    for (String key: keys)
        System.out.println(key + ": " + map.get(key).getName());

    if(!widgetCache.containsKey(name)) {
        System.err.println("I don't contain " + name);
        widgetCache.put(name, widget);
    }

    return widgetCache.get(name);
} 
```

很简单：它只是不允许重复`Widget`的 s 被插入到地图中。当我使用 Mockito (1.9.5) 在 JUnit 测试方法中对此进行测试时：

```
CachingWidgetFactory fixture = new CachingWidgetFactory();

// By the way, I get errors if I try to make this next line:
//        HashMap<String,Widget> mockMap = Mockito.mock(HashMap<String,Widget>.class);
// How do I enforce generics here when defining a mock?
HashMap mockMap = Mockito.mock(HashMap.class);

fixture.setLoggerCache(mockMap);

fixture.newWidget("Widget-A", new Widget("Widget-A"));
fixture.newWidget("Widget-A", new Widget("Widget-A"));

Mockito.verify(mockMap, Mockito.times(1))
        .put(Mockito.anyString(), Mockito.<Logger>any()); 
```

我得到以下 JUnit 输出的测试**失败：**

```
org.mockito.exceptions.verification.TooManyActualInvocations: 
hashMap.put(<any>, <any>);
Wanted 1 time: 
```

在（STDOUT）控制台输出中，我看到了：

```
Printing...0
I don't contain Widget-A
Printing...0
I don't contain Widget-A 
```

因此，看起来 Mockito 返回的模拟允许第二次（重复）插入。但是，当我完全删除 Mockito`mockMap`并使测试方法看起来像：

```
CachingWidgetFactory fixture = new CachingWidgetFactory();

fixture.newWidget("Widget-A", new Widget("Widget-A"));
fixture.newWidget("Widget-A", new Widget("Widget-A")); 
```

然后在控制台输出中，我得到：

```
Printing...0
I don't contain Widget-A
Printing...1 
```

现在（非模拟）代码正确地防止了重复插入。因此，就好像 Mockito`HashMap`每次`newWidget`被调用时都会返回一个新的。这里发生了什么，为什么？（如果你能在上面提到的一般问题上帮助我，还有加分。）提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:45:22.027

这是一个常见的错误。你必须记住你嘲笑过`HashMap`。所以，mockito 并不是每次都给你一个新的地图，它只是不知道如何表现，因为你嘲笑了 HashMap。

鉴于此，它会按照您告诉它的行为行事。如果你什么都没说，当你调用你的方法时它会返回默认值/什么都不做。所以，在一线

```
 if (!widgetCache.containsKey(name)) 
```

因为你没有说它应该如何表现，它会返回默认值`false`. 您可以使用 Mockito 模拟地图以在第二次调用时返回 false ，例如

```
 given(hashMap.containsKey(name)).willReturn(false, true); 
```

`containsKey`这样，HashMap 将在第二次调用给定名称时返回“包含”键。[你可以在这里](http://docs.mockito.googlecode.com/hg/org/mockito/BDDMockito.BDDMyOngoingStubbing.html#willReturn%28T,%20T...%29)阅读它的文档

你可以做的另一件事是给它一个真正的 HashMap 实现，但我更喜欢“模拟”方式:)

**编辑**

我提供了 BDDMockito 的链接，但它与`when`->的工作方式相同`thenReturn`。这只是语法糖 :) 我发现它更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:11:09.993

```
// How do I enforce generics here when defining a mock?
HashMap mockMap = Mockito.mock(HashMap.class); 
```

如果您使用 mockito 注释，处理泛型会容易得多，例如

```
@Mock
HashMap<String, Widget> mockMap; 
```

然后在您的设置方法中：

```
MockitoAnnotations.init(this); 
```

但是对于您的问题，只需使用

```
HashMap<String, Widget> map=new HashMap<String, Widget>(); 
```

以便测试使用行为类似的真实 HashMap，因为这是您要测试的东西。如果您要自己模拟所有 HashMap 操作，那么您很可能会犯某种错误（比如忘记模拟一个方法）。

# php - 如何在特定文件中禁用 ASP 样式的 PHP 标记？

> ID：14694116
> 
> 赞同：3
> 
> 时间：2013-02-04T19:33:38.233
> 
> 标签：php, underscore.js

我对在页面中嵌入一些 Javascript 的 PHP 文件有疑问。JS 使用的是下划线模板引擎，它恰好使用 ASP 样式的标签 ( `<% ... %>`) 进行输出。

客户端的 PHP 配置启用了 ASP 样式标记，这破坏了文件语法。

有没有我可以在文件顶部添加的指令，或者任何其他技巧让 PHP 处理器忽略这些标签？我正在专门寻找一种**无需修改 php.ini**即可做到这一点的方法。但如果这是唯一的方法，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:49:00.013

试试这个`.htaccess`文件：

```
php_flag asp_tags off 
```

如果您只想禁用一个文件的 asp 标签，请在此处使用此规则：

```
<files file-with-asp-syntax.php>
php_flag asp_tags off
</files> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T04:16:24.437

## 我找到了一种非常适合下划线标签的方法：

**页面.php：**

```
...
<script type="text/javascript">
    var template = '<?php echo <<<HEREDOC

        <h1>\
            <%- model.title %>\
        </h1>\
        <% if (model.body) { %>\
            <p>\
                <%- model.body %>\
            </p>\
        <% } %>\

HEREDOC;
    ?>';
</script>
... 
```

## 笔记

HEREDOC 开头和结尾的空行有两个目的：

*   防止您`'`在 javascript 中意外转义结束引号 ( )
*   使得缩进和换行符正是没有添加`HEREDOC`包装器的情况。

## 注意事项

对于转义实际 PHP 周围的 ASP 标签来说，这是一个糟糕的选择，因为`HEREDOC`标签的插入方式与 PHP 中的双引号 ( `"`) 字符串相同，其中变量被输出到结果文件中。文档：[PHP 字符串 - 变量解析](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)

如果你可以控制你的服务器环境并且可以依赖 PHP > 5.3，那么你可以使用 NOWDOC 来完全避免这个警告。NOWDOC 与 HEREDOC 的区别在于标识符周围的单引号，并防止 PHP 变量在封闭文本中的插值。文档：[PHP 字符串 - Nowdoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T19:53:49.847

客户端的 PHP 配置是否在 Windows 服务器上运行？如果是这样，您应该能够通过将 .ini 文件添加到该应用程序的目录中来基于每个目录设置 PHP 配置。

例如，过去可以通过`init_set()`在运行时更改标签的使用`ini_set('asp_tags', 0)`，但我不确定最新版本的 PHP 是否仍然允许这样做。

在 Apache 服务器上，您可以通过添加`php_flag asp_tags Off`到 .htaccess 文件来更改设置

我现在无法测试任何这些，但希望这会给你一个开始的地方。

# android - 如何在地图片段 API v2 布局顶部添加按钮

> ID：14694119
> 
> 赞同：68
> 
> 时间：2013-02-04T19:33:58.333
> 
> 标签：android, google-maps, android-layout, android-button

我正在尝试使用 API v2 在 android 中显示地图。
我想要这样的 UI。但每当**我尝试在布局中添加按钮时，它不会反映在输出中**
**，我能够获得没有按钮的地图**。
**我需要按钮与地图集成，如下面**
的 Mylayout.xml 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MapActivity" >
<RelativeLayout
android:layout_width="match_parent"
android:layout_height="48dp">
<LinearLayout 
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">
<RadioGroup 
android:id="@+id/radio_group_list_selector"
android:layout_width="0dp"
android:layout_height="match_parent"
android:layout_gravity="center_horizontal|center_vertical"
android:gravity="center_horizontal"
android:orientation="horizontal"
android:layout_weight="1"

>
<RadioButton
android:id="@+id/radioPopular"
android:layout_width="0dp"
android:layout_height="match_parent"
android:gravity="center_horizontal|center_vertical"
android:text="@string/Popular"
android:layout_weight="1"
android:button="@null"
android:background="@drawable/shape_radiobutton"
android:layout_marginBottom="4dp"
android:layout_marginTop="4dp"
android:layout_marginLeft="4dp"
android:textColor="@drawable/textcolor_radiobutton"

/>
<View
android:id="@+id/VerticalLine"
android:layout_width="1dip"
android:layout_height="wrap_content"
android:layout_marginBottom="4dip"
android:layout_marginTop="4dip"
android:background="#aaa"
            />
<RadioButton
android:id="@+id/radioAZ"
android:layout_width="0dp"
android:layout_height="match_parent"
android:gravity="center_horizontal|center_vertical"
android:text="@string/AZ"
android:layout_weight="1"
android:button="@null"
android:background="@drawable/shape_radiobutton2"
android:layout_marginBottom="4dp"
android:layout_marginTop="4dp"
android:textColor="@drawable/textcolor_radiobutton"

/>
 <View
android:id="@+id/VerticalLine"
android:layout_width="1dip"
android:layout_height="wrap_content"
android:layout_marginBottom="4dip"
android:layout_marginTop="4dip"
android:background="#aaa"
            />
<RadioButton
android:id="@+id/radioCategory"
android:layout_width="0dp"
android:layout_height="match_parent"
android:gravity="center_horizontal|center_vertical"
android:text="@string/Category"
android:layout_weight="1"
android:button="@null"
android:background="@drawable/shape_radiobutton2"
android:layout_marginBottom="4dp"
android:layout_marginTop="4dp"
android:textColor="@drawable/textcolor_radiobutton"

/>
<View
android:id="@+id/VerticalLine"
android:layout_width="1dip"
android:layout_height="wrap_content"
android:layout_marginBottom="4dip"
android:layout_marginTop="4dip"
android:background="#aaa"
/>

<RadioButton
android:id="@+id/radioNearBy"
android:layout_width="0dp"
android:layout_height="match_parent"
android:gravity="center_horizontal|center_vertical"
android:text="@string/NearBy"
android:layout_weight="1"
android:button="@null"
android:background="@drawable/shape_radiobutton3"
android:layout_marginBottom="4dp"
android:layout_marginTop="4dp"
android:layout_marginRight="4dp"
android:textColor="@drawable/textcolor_radiobutton"
/>

</RadioGroup>

</LinearLayout>
<!-- For Horizontal Line-->
<View
android:layout_width="match_parent"
android:layout_height="1dip"
android:layout_marginLeft="4dip"
android:layout_marginRight="4dip"
android:background="#aaa"
android:layout_alignParentBottom="true"/>
</RelativeLayout>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:map="http://schemas.android.com/apk/res-auto"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_weight="1"
android:scrollbars="vertical"  
class="com.google.android.gms.maps.SupportMapFragment"/>
</RelativeLayout> 
```

![带按钮的地图](../Images/a02c30b32a5f89d850a6ba5394ac8535.png)

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-02-05T11:54:56.707

Maybe a simpler solution is to set an overlay in front of your map using `FrameLayout` or `RelativeLayout` and treating them as regular buttons in your activity. You should declare your layers in back to front order, e.g., map before buttons. I modified your layout, simplified it a little bit. Try the following layout and see if it works for you:

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MapActivity" >

    <fragment xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:scrollbars="vertical"  
        class="com.google.android.gms.maps.SupportMapFragment"/>

    <RadioGroup 
        android:id="@+id/radio_group_list_selector"
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:orientation="horizontal" 
        android:background="#80000000"
        android:padding="4dp" >

        <RadioButton
            android:id="@+id/radioPopular"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:text="@string/Popular"
            android:gravity="center_horizontal|center_vertical"
            android:layout_weight="1"
            android:background="@drawable/shape_radiobutton"
            android:textColor="@color/textcolor_radiobutton" />
        <View
            android:id="@+id/VerticalLine"
            android:layout_width="1dip"
            android:layout_height="match_parent"
            android:background="#aaa" />

        <RadioButton
            android:id="@+id/radioAZ"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:gravity="center_horizontal|center_vertical"
            android:text="@string/AZ"
            android:layout_weight="1"
            android:background="@drawable/shape_radiobutton2"
            android:textColor="@color/textcolor_radiobutton" />

        <View
            android:id="@+id/VerticalLine"
            android:layout_width="1dip"
            android:layout_height="match_parent"
            android:background="#aaa" />

        <RadioButton
            android:id="@+id/radioCategory"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:gravity="center_horizontal|center_vertical"
            android:text="@string/Category"
            android:layout_weight="1"
            android:background="@drawable/shape_radiobutton2"
            android:textColor="@color/textcolor_radiobutton" />
        <View
            android:id="@+id/VerticalLine"
            android:layout_width="1dip"
            android:layout_height="match_parent"
            android:background="#aaa" />

        <RadioButton
            android:id="@+id/radioNearBy"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:gravity="center_horizontal|center_vertical"
            android:text="@string/NearBy"
            android:layout_weight="1"
            android:background="@drawable/shape_radiobutton3"
            android:textColor="@color/textcolor_radiobutton" />
    </RadioGroup>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2015-02-27T07:17:29.930

![地图上方的按钮](../Images/470a81aa5f96e40626daf5253552bba5.png)

如果这是您想要的...只需在 Fragment 中添加按钮。

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.example.LocationChooser">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right|top"
        android:text="Demo Button" 
        android:padding="10dp"
        android:layout_marginTop="20dp"
        android:paddingRight="10dp"/>

</fragment> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T20:25:56.303

扩展 de Almeida 的回答我在这里稍微编辑代码。由于以前的代码隐藏了 gps 位置图标，因此我按照效果更好的方式进行了操作。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"

>

<RadioGroup 
    android:id="@+id/radio_group_list_selector"
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:orientation="horizontal" 
    android:background="#80000000"
    android:padding="4dp" >

    <RadioButton
        android:id="@+id/radioPopular"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:text="@string/Popular"
        android:gravity="center_horizontal|center_vertical"
        android:layout_weight="1"
        android:button="@null"
        android:background="@drawable/shape_radiobutton"
        android:textColor="@drawable/textcolor_radiobutton" />
    <View
        android:id="@+id/VerticalLine"
        android:layout_width="1dip"
        android:layout_height="match_parent"
        android:background="#aaa" />

    <RadioButton
        android:id="@+id/radioAZ"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:gravity="center_horizontal|center_vertical"
        android:text="@string/AZ"
        android:layout_weight="1"
        android:button="@null"
        android:background="@drawable/shape_radiobutton2"
        android:textColor="@drawable/textcolor_radiobutton" />

    <View
        android:id="@+id/VerticalLine"
        android:layout_width="1dip"
        android:layout_height="match_parent"
        android:background="#aaa" />

    <RadioButton
        android:id="@+id/radioCategory"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:gravity="center_horizontal|center_vertical"
        android:text="@string/Category"
        android:layout_weight="1"
        android:button="@null"
        android:background="@drawable/shape_radiobutton2"
        android:textColor="@drawable/textcolor_radiobutton" />
    <View
        android:id="@+id/VerticalLine"
        android:layout_width="1dip"
        android:layout_height="match_parent"
        android:background="#aaa" />

    <RadioButton
        android:id="@+id/radioNearBy"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:gravity="center_horizontal|center_vertical"
        android:text="@string/NearBy"
        android:layout_weight="1"
        android:button="@null"
        android:background="@drawable/shape_radiobutton3"
        android:textColor="@drawable/textcolor_radiobutton" />
</RadioGroup>

<fragment
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"
    android:scrollbars="vertical" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-22T18:02:12.317

您可以使用以下代码将按钮更改为左侧。

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.zakasoft.mymap.MapsActivity" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left|top"
        android:text="Send"
        android:padding="10dp"
        android:layout_marginTop="20dp"
        android:paddingRight="10dp"/>

</fragment> 
```

# sql-server - 在链接服务器之间触发

> ID：14694125
> 
> 赞同：4
> 
> 时间：2013-02-04T19:34:24.557
> 
> 标签：sql-server, sql-server-2008, triggers, linked-server

我有两台 SQL Server 2008 机器，`SQLSERVER1`并且`SQLSERVER2`（非常原始）

在`SQLSERVER2`中，我这样做：

```
[SQLSERVER1].[DATABASE].[DBO].StoreProcedure1 
```

一切正常。

但是，如果我放入触发器，我会收到此错误

> *链接服务器“[SQLSERVER1]”的 OLE DB 提供程序“SQLNCLI10”返回消息“没有事务处于活动状态。”。
> 消息 7391，级别 16，状态 2，过程 StoreProcedure1，第 57 行
> 由于链接服务器“[SQLSERVER1]”的 OLE DB 提供程序“SQLNCLI10”无法开始分布式事务，因此无法执行操作。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T19:42:01.670

您需要确保您的链接服务器允许 RPC 进出。

服务器对象->链接服务器->右键单击服务器并选择属性->服务器选项

RPC 应该是“True”并且 RPC Out 应该是“True”

您还应该确保在服务器上启用了 DTC 网络访问，以便它使用分布式事务。

# iphone - dismissViewControllerAnimated 和意外的 tableview 重新定位

> ID：14694126
> 
> 赞同：0
> 
> 时间：2013-02-04T19:34:32.273
> 
> 标签：iphone

我目前有一个 UIViewController，里面有 UIView，可以通过标签栏进行更改。问题如下图所示：

1.  加载表格（正常）：

    ![](../Images/a11e6278c679e6fd290675a6b08c6f7e.png)

2.  选择一行后，出现空占位符（正常）：

    ![选择一行，空占位符（正常）](../Images/8eb373d6443ddd4f76f79553de31e38f.png)

3.  按回车并调用dismissViewControllerAnimated:completed:方法后（问题）：

    ![调用dismissViewControllerAnimated:completed 方法（问题）](../Images/f11b7137bbbbfdf4ccb304861417d712.png)

似乎当我关闭视图时，它忽略了我的标签栏项目并忘记了定位，将表格一直重新定位在我的菜单下方的顶部。我可以做些什么来纠正这个问题吗？

* * *

编码：

（在 MainViewController 中）：

```
[self presentViewController:collectionController animated:YES completion:nil]; 
```

（在 CollectionViewController 中）：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:45:11.563

我找不到解决 tableview 重新定位的方法，但由于它忽略了 viewDidLoad: 方法，我找到了一种解决方法。

我在 tableview 和 viewDidLoad: 中添加了一个 50px 的标题，我将视图重新定位为高 50px：

```
 tableView.frame = CGRectOffset(tableView.frame, 0, -50); 
```

它现在显示“正确”，但表格的滚动条被标签栏项目裁剪掉了。

# android - 蓝牙聊天 android 连接/发现错误

> ID：14694127
> 
> 赞同：0
> 
> 时间：2013-02-04T19:34:40.020
> 
> 标签：android, bluetooth

我正在开发基于 BluetoothChat 示例的 android 蓝牙游戏。它似乎运作良好，但每 5 - 10 次尝试连接应用程序崩溃。似乎，一些缓冲区溢出。我使用一台设备作为服务器，另一台作为客户端。客户端 (HTC EVO 4G) 因此跟踪而崩溃：

```
02-04 21:11:54.139: DEBUG/BluetoothService(2048): start
02-04 21:11:54.139: DEBUG/BluetoothService(2048): setState() 0 -> 1
02-04 21:11:54.169: DEBUG/BluetoothService(130): new handle 9
02-04 21:11:54.179: DEBUG/BluetoothService(2048): Socket Type: InsecureBEGIN mAcceptThreadThread[Thread-47,5,main]
02-04 21:11:55.870: ERROR/BluetoothService.cpp(130): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
02-04 21:11:55.890: DEBUG/BluetoothService(2048): connect to: 10:BF:48:E8:C1:26
02-04 21:11:55.890: DEBUG/BluetoothService(2048): setState() 1 -> 2
02-04 21:11:55.900: INFO/BluetoothService(2048): BEGIN mConnectThread SocketType:Insecure
02-04 21:11:55.900: ERROR/BluetoothService.cpp(130): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
02-04 21:11:57.222: DEBUG/BluetoothService(130): updateDeviceServiceChannelCache(10:BF:48:E8:C1:26)
02-04 21:11:57.222: DEBUG/BluetoothService(130): uuid(system): 00001105-0000-1000-8000-00805f9b34fb -1
02-04 21:11:57.232: DEBUG/BluetoothService(130): uuid(application): fa87c0d0-afac-11de-8a39-0800200c9a66 3
02-04 21:11:57.232: DEBUG/BluetoothService(130): Making callback for fa87c0d0-afac-11de-8a39-0800200c9a66 with result 3
02-04 21:12:05.910: ERROR/BluetoothService.cpp(130): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
02-04 21:12:06.491: DEBUG/BluetoothService(2048): stop
02-04 21:12:35.779: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.779: DEBUG/BluetoothService(130): Removing service record 8 for pid 2048
02-04 21:12:35.789: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.789: DEBUG/BluetoothService(130): Removing service record 2 for pid 2048
02-04 21:12:35.789: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.789: DEBUG/BluetoothService(130): Removing service record 1 for pid 2048
02-04 21:12:35.799: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.799: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.799: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.799: DEBUG/BluetoothService(130): Removing service record 7 for pid 2048
02-04 21:12:35.809: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.809: DEBUG/BluetoothService(130): Removing service record 4 for pid 2048
02-04 21:12:35.819: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.819: DEBUG/BluetoothService(130): Removing service record 6 for pid 2048
02-04 21:12:35.819: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.819: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.819: DEBUG/BluetoothService(130): Removing service record 5 for pid 2048
02-04 21:12:35.829: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.829: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.829: DEBUG/BluetoothService(130): Removing service record 3 for pid 2048
02-04 21:12:35.829: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.829: DEBUG/BluetoothService(130): Removing service record 9 for pid 2048
02-04 21:12:35.839: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.839: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.839: DEBUG/BluetoothService(130): Tracked app 2048 died
02-04 21:12:35.839: DEBUG/BluetoothService(130): Tracked app 2048 died 
```

最糟糕的是，我无法再次开始连接 - 直到我重新启动手机。它抛出：

```
02-04 21:15:11.381: DEBUG/BluetoothService(2322): start
02-04 21:15:11.381: DEBUG/BluetoothService(2322): setState() 0 -> 1
02-04 21:15:12.432: ERROR/BluetoothService(2322): Socket Type: Insecurelisten() failed
        java.io.IOException: Bad file number
        at android.bluetooth.BluetoothSocket.throwErrnoNative(Native Method)
        at android.bluetooth.BluetoothAdapter.createNewRfcommSocketAndRecord(BluetoothAdapter.java:884)
        at android.bluetooth.BluetoothAdapter.listenUsingRfcommWithServiceRecord(BluetoothAdapter.java:820)
        at com.insomniacpro.pillows.Bluetooth.BluetoothService$AcceptThread.<init>(BluetoothService.java:312)
        at com.insomniacpro.pillows.Bluetooth.BluetoothService.start(BluetoothService.java:132)
        at com.insomniacpro.pillows.engine.MultiGameActivity.onResume(MultiGameActivity.java:159)
        at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1242)
        at android.app.Activity.performResume(Activity.java:3904) 
```

有时服务器设备（Nexus 7）崩溃 - 我必须再次重新启动它才能开始工作。堆：

```
 java.io.IOException: Error: -1
    at android.bluetooth.BluetoothAdapter.createNewRfcommSocketAndRecord(BluetoothAdapter.java:1035)
    at android.bluetooth.BluetoothAdapter.listenUsingRfcommWithServiceRecord(BluetoothAdapter.java:951)
    at com.insomniacpro.pillows.Bluetooth.BluetoothService$AcceptThread.<init>(BluetoothService.java:312)
    at com.insomniacpro.pillows.Bluetooth.BluetoothService.start(BluetoothService.java:132)
    at com.insomniacpro.pillows.engine.MultiGameActivity.onResume(MultiGameActivity.java:159)
    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)

Maybe BluetoothChat app doesnt closes sockets well, when connection is closed? 
```

任何帮助都会很有用！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:26:05.107

最后我以这样糟糕的解决方案结束：每次连接丢失或失败时调用 onFinish() 。这适用于我的情况，但不适用于其他情况。在我看来，BluetoothChat 中的 connectionLost() 函数是不完整的。它应该以另一种方式清除端口。

# asp.net - 如何将响应格式设置为与请求相同的格式？

> ID：14694130
> 
> 赞同：0
> 
> 时间：2013-02-04T19:34:45.440
> 
> 标签：asp.net, .net, asp.net-mvc-4

我创建了一个自定义调度程序来处理使用客户媒体类型的版本控制。它看起来像这样：

```
application/vnd.mycompany.myapi-v1+json 
```

提取版本号以选择正确的控制器已全部启动并正常工作，但作为 MVC 的新手，我不确定如何设置响应格式。我们要做的是设置响应格式以匹配请求。所以在这个例子中，响应将是 json。现在我假设我将不得不从这个内容类型中提取它，这很好，但是有人可以给我一个例子，说明我如何在 MVC4 中设置这个请求的响应格式，假设我已经创建了将将格式提取为字符串？

```
private string GetResponseFormat(){
   //some shennanigans here
} 
```

PS 在请求期间不让客户端使用接受标头的原因是已经有客户端在使用我们的旧服务，这些服务将设置接受标头以匹配请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:07:57.233

您还可以使用`Content`方法返回自定义响应类型：

```
string responseType = GetResponseFormat();
...
switch(responseType){
    case "json":
        string json = "yourJSON";
        return Content(json, "application/json");
    case "xml":
        string xml = "yourXML";
        return Content(xml, "text/xml");
    default:
        string plaintxt = "yourPlaintext";
        return Content(plaintxt, "text/plain"):
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:47:04.590

我能够清除现有的 Accept 标头并添加到其中：

```
private void SetResponseFormatToRequestFormat(HttpRequestMessage request)
{
    // figure out what the request format was
    _contentTypeHeader = request.Content.Headers.ContentType.ToString();
    if(_contentTypeHeader.Contains("xml")) _contentType = "application/xml";
    if (_contentTypeHeader.Contains("json")) _contentType = "application/json";

    // set response format to the same as the request format
    request.Headers.Accept.Clear();
    request.Headers.Accept.Add(new System.Net.Http.Headers.MediaTypeWithQualityHeaderValue(_contentType));
} 
```

# perl - 如何将哈希键和值对作为 Perl 中的字段值写入 MongoDB 文档？

> ID：14694133
> 
> 赞同：-1
> 
> 时间：2013-02-04T19:34:57.863
> 
> 标签：perl, mongodb

```
my %Hash= (2012=> 1, 1982=>12, 2010=>0); 
```

有键和值需要都在同一个字段名称“时间”上，就像一个数组

```
$mycollection->insert(
                     {
                         'field1' => $var1;
                         'field2' => $var2;
                          #right here I need to know how to add above hash key and values
                          # like below  
                          #'time': ["2012.1","1982.12","2010.0"]   
                     }
                   ); 
```

任何建议或想法将不胜感激。这可能可以通过执行一系列更新语句来完成，但由于我的要求，我想用一个插入语句来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:16:23.860

我想你的 %Hash 变量是这样的：

```
my %Hash= (2012=> 1, 1982=>12, 2010=>0); 
```

所以你的数组“时间”是这样构建的：

```
my @time = map { $_ . "." . $Hash{$_} } keys %Hash; 
```

最后：

```
$mycollection->insert({
   'field1' => $var1,
   'field2' => $var2,
   'time' => \@time   
}); 
```

# linux - 在多个 Linux 系统之间同步文件时如何避免权限问题？

> ID：14694136
> 
> 赞同：3
> 
> 时间：2013-02-04T19:35:08.730
> 
> 标签：linux, permissions, dropbox

我一直在使用 Dropbox 在 8 台不同的 Linux 机器之间进行同步。我使用 BasKet 记事本来跟踪项目，它以及许多其他应用程序似乎由于权限而存在同步问题，声称“无法同步“某某文件”：权限被拒绝。” 有很多关于如何临时修复此问题的指南，包括使用界面中隐藏的“修复权限”按钮，或使用 chmod，但由于 umask 创建的权限无法在系统之间同步，问题又出现了。

解决此问题的最佳做法是什么？在这种情况下，是否还有其他系统（例如 Isync with Google Drive、OwnCloud 或 Ubuntu One）会比 Dropbox 更好？我只需要将 Dropbox 托管在 FAT 分区上吗？任何建议将不胜感激，谢谢！

# maven - 如何解决多模块项目中模块之间的依赖关系？

> ID：14694139
> 
> 赞同：21
> 
> 时间：2013-02-04T19:35:34.837
> 
> 标签：maven, dependency-management, multi-module

在使用 Maven 一段时间后，我对 Maven 为构建架构带来的许多特性感到兴奋，尤其是依赖关系管理。但是，我一次又一次地遇到一个问题——Maven 如何解决多模块项目之间的依赖关系。我想知道这是否是当前 Maven 实现的大缺陷和/或是否有任何令人满意的解决方法。

假设我有一个多模块 Maven 项目。Parent pom 包含三个模块——moduleA (jar)、moduleB (jar) 和moduleC(war)。B 依赖于 A，C 依赖于 B。够简单吗？现在我想`mvn dependency:go-offline`在父项目上运行，它应该解决所有依赖项并将它们带入本地 .m2 目录。它失败是因为 Maven 抱怨它在作用于模块 B 时无法解决模块 A 的依赖关系。因为所有这些模块都属于一个groupId，所以我什至尝试使用`-DexcludeGroupIds=x.y.z`排除这些模块依赖关系，但它仍然在同一点失败。

我理解为什么 Maven 抱怨 - moduleA 尚未构建，因此当执行脱机目标时，我的本地或内部存储库中没有 moduleA:jar 工件。但恕我直言，插件应该以不同的方式处理这些模块间依赖关系。在这种情况下，它应该简单地忽略它。有人可能会争辩说我可以简单地做`mvn clean install`，这会将 moduleA:jar 安装到本地存储库中。在那之后，跑步`mvn dependency:go-offline`肯定会起作用。但是这种解决方法违背了这个离线目标的目的。这个插件允许我们在不构建整个项目的情况下解析和拉取依赖项到我们的本地存储库中。我`dependency:copy-dependencies`在另一种情况下使用了目标，它也有同样的问题。

我在其他情况下也遇到了类似的问题：[“mvn clean generate-source” could not resolve dependencies](https://stackoverflow.com/questions/12942782/mvn-clean-generate-source-could-not-resolve-dependencies)。当我运行时`mvn clean compile`，一切正常，但是当我运行时`mvn clean generate-source`，它失败了，因为 Maven 无法解决模块间依赖关系。在那种情况下，这是由`@requiresDependencyResolution`antrun 插件引起的。

由于 antrun 插件和依赖插件都在 Maven 世界中非常流行，我相信我不是唯一遇到这个问题的人。有人找到任何解决方案/解决方法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-08-29T15:00:04.720

Maven 有一个“反应器”的概念，其中在一次运行中构建的工件（例如`maven package`）可用于构建期间的依赖关系解析。例如，如果您的依赖关系图生成构建顺序 moduleA moduleB moduleC，而您这样做了`mvn package`，Maven 将构建 moduleA，打包其工件并将其添加到反应器中，然后构建模块B，将其打包并将其添加到反应器中，那么同样对于模块C。这意味着 moduleB 可以访问 moduleA 的工件以解决依赖关系，而 moduleC 可以访问 moduleA 和 moduleB。这仅在实际构建工件时才有效，即当您运行包目标时。

问题是，当您因为对工件（如您的`dependency:go-offline`示例）不感兴趣而不运行包目标时，已处理的模块的工件不会被构建，因此不会添加到反应器中。我也觉得这很烦人；我认为 Maven 应该查看其要构建的模块列表中的 POM 文件并在那里查看；但事实并非如此。

简而言之，解决您的问题的方法是`mvn package dependency:go-offline`. 这不会在您的本地存储库中安装工件（我认为这是非常糟糕的做法），但它*会*在构建期间将它们放入反应器中，这意味着 Maven 将能够解决从您的模块 B 到模块 A 的依赖关系已经建成。缺点是每个模块都将被测试和打包，当你只想做的时候，这是很多工作`dependency:go-offline`。

无论哪种方式，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-04T20:00:24.790

[Maven Dependency Plugin](https://maven.apache.org/plugins/maven-dependency-plugin/)版本 3.1.2[终于解决](https://issues.apache.org/jira/browse/MDEP-204)了这个问题。

您可以通过将版本固定在您的`pom.xml`：

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>3.1.2</version>
            </plugin>
       </plugins>
    </pluginManagement>
</build> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-16T13:18:44.030

我在这里创建了一个带有示例项目的 JIRA 票证：

[https://issues.apache.org/jira/browse/MDEP-516](https://issues.apache.org/jira/browse/MDEP-516)

请为它投票。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T20:34:56.250

您解释了为什么它不起作用，以便您了解问题。你的问题是当它找不到 A.jar 时它会停止，但只有在你开始构建 B 时才会发生这种情况。所以有一种有时有用的策略。

你必须自己弄乱A。只需构建 A。使用加载依赖项的计划，然后构建它。

构建完成后，您可以继续使用 B 和 C 执行相同的操作。逐步进行。

这里要记住的一件事是，有时可以在本地存储库中使用 A 的旧快照构建 B。如果 B 需要签名更改或新内容，您只需要在 repo 中构建 A 的新快照。

这里也有一些讨论：[Maven Modules + Building a Single Specific Module](https://stackoverflow.com/questions/1114026/maven-modules-building-a-single-specific-module)

当人们的构建时间过长时，通常不会出现最后一个问题。有几种方法可以加快构建速度：

1.  获得更快的硬件。构建计算机、磁盘存储或网络速度是典型的组件，升级成本比浪费慢构建所花费的时间要便宜。
2.  通过不构建不需要重建的东西来加快构建速度。（例如，我有一个构建，每次都重新构建所有生成的代码。我在构建中添加了一些东西，除非生成代码的依赖关系发生变化，否则它不会这样做。）
3.  加快测试速度。有时这意味着将测试分成两部分。第 1 部分是快速测试，第 2 部分是慢速测试。在任何代码签入或发布工件之前，对每个构建运行快速测试和慢速测试。
4.  将多模块构建分解为 2 个或多个单独的构建，并使用人类智能来决定何时重建事物。当一些罐子稳定并且不再有太大变化时，这很有效。
5.  填写您自己的方法以使构建更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T20:35:11.710

我怀疑 Maven 是否可以实现这样的功能。虽然您的项目共享一个共同的父项并相互依赖，但 Maven 不可能知道在哪里可以找到这些项目以构建它们。它也无法确定是否只需要构建项目，或者您是否为依赖项指定了错误的版本号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-23T11:39:45.233

从 Maven Dependency Plugin v3.1.2 开始， **dependency:go-offline**目标将支持这一点。相关的 jira 票证[MDEP-204](https://issues.apache.org/jira/browse/MDEP-204)和补丁[23b7ca8790ae14175ed8e3a20c75c6274efe5ad8](https://gitbox.apache.org/repos/asf?p=maven-dependency-plugin.git;a=commit;h=23b7ca8790ae14175ed8e3a20c75c6274efe5ad8)与修复。

# rally - 如何在 Rally 2 SDK 中按子对象过滤

> ID：14694143
> 
> 赞同：1
> 
> 时间：2013-02-04T19:35:45.723
> 
> 标签：rally

我正在尝试查询发布开始日期大于特定日期的用户故事。是否可以使用“过滤器”配置而不是查询所有故事然后手动检查来做到这一点？

这是有效的吗？：

```
Ext.create('Rally.data.WsapiDataStore', {
    model: 'UserStory',
    context: {
        project: '/project/xxxx'
    },
    autoLoad: true,
    fetch: ['Rank', 'FormattedID', 'Release'],
    filters: [
        {
            property: 'Release.ReleaseStartDate',
            operator: '>',
            value: '2012-10-10'
        }
    ]
}); 
```

它不起作用，只是获取所有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:33:05.070

上面发布的代码**确实**有效。我实际上在“值”属性中使用了一个组合框值。原来我没有将它转换为正确的 DateTime 格式，因此比较失败并返回所有记录。

就我而言，我必须使用 Rally.util.DateTime.toIsoString 来比较组合框中的值。

# css - 删除 portlet 中带下划线的超链接

> ID：14694155
> 
> 赞同：1
> 
> 时间：2013-02-04T19:36:25.827
> 
> 标签：css, hyperlink, plone

在克隆上工作，我刚刚获得了经验。在我的 portlet 中，我目前正在编辑一个静态文本 portlet，使其看起来像一个 RSS 提要（因此我可以对我的新闻项目进行一些自定义）。我已经让格式完美地工作了——除了从超链接中删除下划线。我已经尝试使用来自所有不同论坛的 CSS 和 HTML 格式的方法......它不起作用。有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:36:51.757

使用 FireFox + FireBug 查找在 portlet 超链接上使用的 css 属性。可能您编写的属性过于笼统，而使用了更具体的属性。看一看：

```
....
<style>
    .portlet a {text-decoration: underline;}
    a {text-decoration: none;}
</style>
<div class="portlet">
    <a href="#">1</a>
</div>
.... 
```

超链接将带有下划线，因为第一个 css 属性具有更具体的“路径”。

# c# - HttpWebRequest 因应用程序的多个实例而变慢

> ID：14694163
> 
> 赞同：0
> 
> 时间：2013-02-04T19:36:40.887
> 
> 标签：c#, httpwebrequest

试图追根溯源！

我有一个非常基本的应用程序，它使用 httpwebrequests 登录、导航到一个页面，然后获取该页面的 html。然后，它每 5 分钟循环执行一次对第三页的 Web 请求。

它一切正常并且是单线程的（并且相当旧），但是情况已经改变，我现在需要紧密地一起运行这个应用程序的多个实例（我有一个 .bat 每 2 秒启动一次应用程序作为临时措施，直到我能够编写新的多线程解决方案）。

当应用程序的第一个实例启动时一切正常，第一个请求在约 2 秒内完成。第二个大约 3 秒。

然而，随着这个应用程序的越来越多的实例同时运行（>100），一些奇怪的事情开始发生。

第一个 Web 请求仍然需要大约 2 秒，但是第二个请求会延迟超过 1 分钟，直到超时。我似乎无法思考为什么会这样。第二页比第一页大，但没有什么不寻常的需要> 1分钟才能下载。

该服务器的互联网连接和硬件完全能够处理这些请求。

```
 CookieContainer myContainer = new CookieContainer();
        // first request is https
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(https://mysite.com/urlone);                                
        request.CookieContainer = myContainer;
        request.Proxy = proxy;
        Console.WriteLine(System.DateTime.Now.ToLongTimeString() + "  " + "Starting login request");
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Stream resStream = response.GetResponseStream();

        string tempString = null;
        int count = 0;

        do
        {
            // fill the buffer with data
            count = resStream.Read(buf, 0, buf.Length);

            // make sure we read some data
            if (count != 0)
            {
                // translate from bytes to ASCII text
                tempString = Encoding.ASCII.GetString(buf, 0, count);

                // continue building the string
                sb.Append(tempString);
            }
        }
        while (count > 0); // any more data to read?
        sb.Clear();
       response.Close();
       resStream.Close();
       string output6;

        Console.WriteLine(System.DateTime.Now.ToLongTimeString() + "  " + "login request comeplete");
        HttpWebRequest request6 = (HttpWebRequest)WebRequest.Create(@"http://mysite.com/page2");
        request6.CookieContainer = myContainer;
        response = (HttpWebResponse)request6.GetResponse();
        resStream = response.GetResponseStream();
        tempString = null;
        count = 0;

        do
        {
            count = resStream.Read(buf, 0, buf.Length);

            if (count != 0)
            {
                tempString = Encoding.ASCII.GetString(buf, 0, count);

                sb.Append(tempString);
            }
        }

        while (count > 0);
        output6 = sb.ToString();
        sb.Clear();
        response.Close();
        resStream.Close(); 
```

有任何想法吗？我对 http web 请求不是很先进，所以如果有人可以检查我没有在上面犯任何愚蠢的代码错误，我将不胜感激。我不知道我可能需要在这里包含哪些其他信息，如果我遗漏了什么，请告诉我，我会尽力提供。提前致谢。

**编辑1：**

我使用提琴手找出问题的根源。看起来问题在于应用程序（或窗口）由于某种原因没有发送请求 - 根据提琴手的说法，物理请求实际上需要 < 1 秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:41:22.743

检查几件事

1.  [`ServicePointManager.DefaultConnectionLimit`](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx)：如果您打算打开超过 100 个连接，请将此值设置为`200-300`.
2.  如果可能的话使用`HttpWebRequest.KeepALive = true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T08:41:30.533

尝试将您的请求包装到`using`指令中，以确保它始终正确关闭。如果您达到最大连接数，则必须等待较早的连接超时，然后才能连接新连接。

# php - 如何使用 Cache_Lite 进行内存缓存

> ID：14694172
> 
> 赞同：0
> 
> 时间：2013-02-04T19:37:07.023
> 
> 标签：php, caching, memorycache

如何使用[Cache_Lite](https://pear.php.net/manual/en/package.caching.cache-lite.intro.php)进行内存缓存？在[构造函数 Cache_Lite::Cache_Lite 的文档中](https://pear.php.net/manual/en/package.caching.cache-lite.cache-lite.cache-lite.php)，有一个选项“memoryCaching”：启用/禁用“内存缓存”（注意：内存缓存没有生命周期，只有脚本的结尾）

没有如何使用它的示例。我需要设置cacheDir吗？如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:24:02.837

我不会再使用这个类了。如果你看一下源代码，它里面有很多不好的东西，最重要的是它是为 PHP 4 编写的，就像许多 PEAR 类一样。

研究内存缓存功能，我发现它只是一个数组，用于存储先前从当前请求中的文件缓存中获取的任何结果。因此，您不会像 Memcached 或 APC 那样获得持久内存缓存。代码中有一条注释指出内存缓存功能应被视为“测试版”质量。

代码的描述声称缓存很快，但我对此表示怀疑。有多个调用`clearstatcache()`有效地破坏了任何文件系统的性能，只是因为需要获取最新的`filemtime()`而不是将这些信息写入文件中的缓存数据。

如果您正在寻找更新的缓存解决方案，请查看 APC（可能作为主机上的操作码缓存提供）或 Memcached，几乎没有更多的实现开销。如果您需要基于文件的缓存，请找出您可能使用的任何框架是否为您提供了一些东西。或者做一个快速的谷歌搜索，结果可能是这样的：[https](https://github.com/cosenary/Simple-PHP-Cache) ://github.com/cosenary/Simple-PHP-Cache （不是我推荐这个类）。

# php - PHP内爆无缘无故添加额外字段

> ID：14694173
> 
> 赞同：-5
> 
> 时间：2013-02-04T19:37:09.880
> 
> 标签：php, implode

出于某种原因，在 PHP 中，该`implode`函数`$tmpTblRow`在返回字符串的末尾返回一个额外的字段，并导致 MySQL 错误。

MySQL 语句生成自：

```
$sqll = sprintf(
    "INSERT INTO $sqlToTbl (%s) VALUES ('%s')", 
    $sqlToCols, 
    implode("','", array_values($tmpTblRow))
); 
```

$tmpTblRow 是关联数组：

```
[lineItem] => null
[partID] => 1
[partNumber] => tr2-mod2-0001
[serialNumber] => 
[partDescription] => mob176wertyu
[quantity] => 10
[price] => 500
[warranty] => 
[dateRequired] => 2055-11-11
[note] => 
[discount] => 
[isProcessed] => 1
[parameter] => 
[isPrivate] => 
[processedByUserID] => 1
[processedDate] => 2013-02-04
[extPrice] => 0
[parentID] => 36
[isToAct] => 1
[userID] => 0
[type] => 
[dateGenerated] => 2013-02-04 10:53:12
[unitType] => 
```

$sqll 值返回：

```
INSERT INTO tblOrdersItems 
    ( lineItem, partID , partNumber , serialNumber, partDescription , quantity, 
      price , warranty  , dateRequired , note , discount, isProcessed, parameter,
      isPrivate, processedByUserID, processedDate, extPrice, parentID, isToAct, 
      userID, type, dateGenerated, unitType) 
VALUES 
    ( 'null', '1', 'tr2-mod2-0001', '', 'mob176wertyu', '10', '500', '', 
      '2055-11-11', '', '', '1', '', '', '1', '2013-02-04', '0', '36', '1', '0', 
      '', '2013-02-04 10:53:12', '', '1' ) 
```

返回错误是：“列计数与第 1 行的值计数不匹配”

`1`注意字符串末尾的额外内容`$sqll`。谁能解释为什么以及如何解决这个问题？

编辑... $tmpTblRow 的 var_dump 返回：

```
array(23) {
  ["lineItem"]=>
  string(4) "null"
  ["partID"]=>
  string(1) "1"
  ["partNumber"]=>
  string(13) "tr2-mod2-0001"
  ["serialNumber"]=>
  string(0) ""
  ["partDescription"]=>
  string(12) "mob176wertyu"
  ["quantity"]=>
  string(2) "10"
  ["price"]=>
  string(3) "500"
  ["warranty"]=>
  NULL
  ["dateRequired"]=>
  string(10) "2055-11-11"
  ["note"]=>
  NULL
  ["discount"]=>
  NULL
  ["isProcessed"]=>
  string(1) "1"
  ["parameter"]=>
  NULL
  ["isPrivate"]=>
  NULL
  ["processedByUserID"]=>
  string(1) "1"
  ["processedDate"]=>
  string(10) "2013-02-04"
  ["extPrice"]=>
  string(1) "0"
  ["parentID"]=>
  string(2) "36"
  ["isToAct"]=>
  string(1) "1"
  ["userID"]=>
  string(1) "0"
  ["type"]=>
  string(0) ""
  ["dateGenerated"]=>
  string(19) "2013-02-04 10:53:12"
  ["unitType"]=>
  string(0) ""
} 
```

...完整的代码是这样的：

```
$q = "SELECT $sqlFromCols FROM $sqlFromTbl $sqlFromWhere";
$result1 = $conn->query(stripslashes($q)) ;
    if (!$result1) die($conn->error.">>none<< 1");

    echo $q."||";

echo "<br/>start>";
while($tmpTblRow = $result1->fetch_array(MYSQL_ASSOC) )
{

     var_dump ($tmpTblRow);
     echo "<br/>end|";
     echo "<br/>";
    $tmpTblRow[$sqlFromIDcol] = $newID;

    $sqll = sprintf("INSERT INTO $sqlToTbl (%s) VALUES ('%s')", $sqlFromCols, implode("','",array_values($tmpTblRow)));

    echo $sqll."||";

     $result = $conn->query(stripslashes($sqll)) ;
    if (!$result) die($conn->error.">>none<< while");

    $q = "UPDATE $sqlToTbl SET $change WHERE $sqlToIDcol = $newID";
        $q = stripslashes($q);

    $result = $conn->query(stripslashes($q)) ;
    if (!$result) die($conn->error.">>none<< update");

        //mysql_query($q);
        //echo $q."||<br>";

    $newID = $newID+1;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:42:42.737

如果我让这段代码运行：

```
$tmpTblRow = array(
    'lineItem' => null,
    'partID' => 1,
    'partNumber' => 'tr2-mod2-0001',
    'serialNumber' => '',
    'partDescription' => 'mob176wertyu',
    'quantity' => 10,
    'price' => 500,
    'warranty' => '',
    'dateRequired' => '2055-11-11',
    'note' => '',
    'discount' => '',
    'isProcessed' => 1,
    'parameter' => '',
    'isPrivate' => '',
    'processedByUserID' => 1,
    'processedDate' => '2013-02-04',
    'extPrice' => 0,
    'parentID' => 36,
    'isToAct' => 1,
    'userID' => 0,
    'type' => '',
    'dateGenerated' => '2013-02-04 10:53:12',
    'unitType' => '',
);

$sqlToCols = "col, col, col";

$sqll = sprintf(
    "INSERT INTO $sqlToTbl (%s) VALUES ('%s')",
    $sqlToCols,
    implode("','", array_values($tmpTblRow))
);

var_dump($sqll); 
```

我得到结果：

```
string(183) "INSERT INTO  (col, col, col) VALUES ('','1','tr2-mod2-0001','','mob176wertyu','10','500','','2055-11-11','','','1','','','1','2013-02-04','0','36','1','0','','2013-02-04 10:53:12','')" 
```

如您所见，最后没有 1。这只能意味着一件事：您在调试时没有转储正确的数组。

# tfs - 带有分支的 TFS 2012 源代码控制结构

> ID：14694181
> 
> 赞同：1
> 
> 时间：2013-02-04T19:37:35.677
> 
> 标签：tfs

我正在研究如何使用 TFS 重新构建我的公司源代码控制。我一直纠结的障碍是构建源代码控制的正确方法。

考虑以下 3 个项目示例：

*   **项目A.UI**
*   **ProjectA.Common**（双方使用的域类。目前是与 ProjectA.UI 相同的解决方案的一部分，并包含在 ProjectA.WCF 解决方案中。）
*   **项目A.WCF**

* * *

**选项 1（将所有三个分成单独的解决方案，每个解决方案都在各自的 MAIN 分支下）：**

*   团队项目
    *   项目A
        *   项目A.UI
            *   主要的
                *   来源
                    *   .sln 在这里
        *   项目A.Common
            *   主要的
                *   来源
                    *   .sln 在这里
        *   项目A.WCF
            *   主要的
                *   来源
                    *   .sln 在这里

**选项 2（将所有三个分成单独的解决方案都在一个 MAIN 分支下）：**

*   团队项目
    *   项目A
        *   主要的
            *   项目A.UI
                *   来源
                    *   .sln 在这里
            *   项目A.Common
                *   来源
                    *   .sln 在这里
            *   项目A.WCF
                *   来源
                    *   .sln 在这里

**选项 3（将所有三个放在 MAIN 分支下的同一解决方案中）：**

有人可以指出我的设计中的一些缺陷或者给我一些更好的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:03:13.623

如果 UI 和 WCF 项目依赖于 Common 项目，那么这三个项目都应该在同一个解决方案文件中。我个人会使用选项3。

好处是：

*   只需构建一种解决方案。
*   您可以从一个分支发布所有三个项目。
*   当您分支（针对发布或 vNext）时，您会将所有项目放在一起。

# java - Java 内存不足错误以及 Jmeter 中的 HTMLUnit 错误

> ID：14694182
> 
> 赞同：0
> 
> 时间：2013-02-04T19:37:38.753
> 
> 标签：java, selenium, jmeter, junit4, htmlunit

因为我只是一名 QA 测试员，所以我在这里和 Java 都非常陌生。因此，我将尝试简短地说，我找到了解决我们在测试网站时遇到的问题之一的解决方案，即使用`Jmeter`. 在使用 Maven 编译所需的 Jar 文件后，我设法`Jmeter`运行`Junit`使用 Selenium 记录的请求，`HTMLunit`以便尝试对网站进行负载测试。

一切运行良好，直到我达到一些“值得加载”的线程数（我们是一家足够大的公司，拥有多台机器，所以如果每台机器都可以处理 200-300 个请求，这应该不是问题）但我遇到了一些错误将线程设置为 50 后， `Jmeter`cmd 以及错误控制台`CSS`中的`Jmeter`错误（它们可能不相关，但它们同时出现）：

```
java.lang.OutOfMemoryError: Java heap space
Dumping heap to java_pid6832.hprof ...
Heap dump file created [817281280 bytes in 13.116 secs]
Logging Error: Unknown error writing event.
java.lang.OutOfMemoryError: GC overhead limit exceeded
Logging Error: Unknown error writing event.
java.lang.OutOfMemoryError: GC overhead limit exceeded
Logging Error: Unknown error writing event.
java.lang.OutOfMemoryError: GC overhead limit exceeded
Logging Error: Unknown error writing event.
java.lang.OutOfMemoryError: GC overhead limit exceeded
Logging Error: Unknown error writing event.
java.lang.OutOfMemoryError: GC overhead limit exceeded
2013/02/04 14:01:10 WARN  - com.gargoylesoftware.htmlunit.DefaultCssErrorHandler: CSS warning: 'Website URL+CSS PATH' [2447:70] Ignoring the whole rule. 
2013/02/04 14:01:10 WARN  - com.gargoylesoftware.htmlunit.DefaultCssErrorHandler: CSS error: 'Website URL+CSS PATH' [1684:57] Error in pseudo class or element. (Invalid token "2". Was expecting one of: <S>, <IDENT>, ")".) 
```

这些是我得到的错误，我猜它很难通过请求（因为我知道`htmlunit`它就像一个浏览器一样，并且使用该浏览器一次发送 100 个请求可能需要太多我当前的资源)

所以，问题是：我只是想确保我在评估我所看到的问题时是正确的，并且想知道是否有人以前做过类似的事情，是否有人找到了处理这些测试的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-12T20:22:18.180

很可能您在 GUI 模式下使用 JMeter 进行负载测试，这是一种反模式。

我猜您的计划中有 View Results Tree 侦听器，因此该组件最终会累积所有结果并以 OOM 结束。

自最新版本的 JMeter 以来，仅保留了 500 个最后的样本结果。

所以升级到 JMeter 4.0 或 5.0 并使用非 GUI 模式：

> jmeter -n -t testplan.jmx -l results.csv -e -o report_folder

# python - Python 抛出 ImportError: No module named..." 错误

> ID：14694184
> 
> 赞同：2
> 
> 时间：2013-02-04T19:37:44.027
> 
> 标签：python, python-2.7, chilkat

我正在尝试为 Python 安装 Chilkat 库以使用它的加密功能，但是对于 Python 来说，一切可能都是新手，我完全陷入了困境。我已按照[文档](http://www.chilkatsoft.com/installPythonLinux.asp)的指示安装了该库，并验证了这些文件位于`/usr/local/lib/python2.7/site-packages/`我的 Ubuntu 12.04 服务器上的“正确位置”（）。

我还下载了测试脚本。但是，当我尝试运行它时：

```
ImportError: No module named chilkat 
```

我知道这是愚蠢的基本，但我在这里。在文档中，他们确实提到了`sys.prefix`. 我机器上的那个值（大概是默认值，因为我从来没有碰过它）是`/usr`. 我把所有东西都移到了那里，但仍然出现同样的错误。

帮助？放置这些文件的最“pythonic”的地方在哪里，我怎样才能让 Python 普遍识别它们？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:51:50.940

对于任何搜索的人，我只是通过添加一个已经在我的路径中的文件来添加`site-packages`到我的。`sys.path``.pth``dist-packages`

```
echo "/usr/local/lib/python2.7/site-packages" > /usr/local/lib/python2.7/dist-packages/site-packages.pth 
```

# ios - 在选择时为 UICollectionView 单元格设置动画

> ID：14694192
> 
> 赞同：14
> 
> 时间：2013-02-04T19:38:05.303
> 
> 标签：ios, uicollectionview, uicollectionviewcell, uicollectionviewlayout

我有一个基本的网格`UICollectionView`。这是一个简单的 2 列多行布局，使用`UICollectionViewDelegateFlowLayout`. 选择一个单元格后，我想调暗背景，将单元格浮动到屏幕中心，然后根据所选单元格进行工作流。我是新手`UICollectionViews`，我不确定解决这个问题的最佳方法。

`UICollectionView`选择单元格时，我应该有自定义布局吗？

或者有没有一种方法可以为选定的单元格设置动画，而无需创建新的布局

如果有人能让我朝着正确的方向前进，我想我会很好地研究如何执行它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-06T19:01:29.667

在尝试了几个（而且相当老套）的解决方案之后，我通过编写自己的`UICollectionView`布局解决了这个问题。我尝试过的以前的解决方案：

*   添加自定义 UIView`UICollectionView`并尝试通过覆盖原始单元格、调暗背景和动画新 UIView 来伪造原始单元格移动
*   在不创建全新布局的情况下为单元格设置动画

我试图避免它，但在我开始编码之后，它比我最初想象的要痛苦得多。

这是我的代码，任何有兴趣的人：

**。H：**

```
@interface FMStackedLayout : UICollectionViewLayout

@property(nonatomic,assign) CGPoint     center;
@property(nonatomic,assign) NSInteger   cellCount;

-(id)initWithSelectedCellIndexPath:(NSIndexPath *)indexPath;

@end 
```

**米：**

```
#define ITEM_WIDTH  128.0f
#define ITEM_HEIGHT 180.0f

static NSUInteger       const RotationCount         = 32;
static NSUInteger       const RotationStride        = 3;
static NSUInteger       const PhotoCellBaseZIndex   = 100;

@interface FMStackedLayout ()

@property(strong,nonatomic) NSArray     *rotations;
@property(strong,nonatomic) NSIndexPath *selectedIndexPath;

@end

@implementation FMStackedLayout

#pragma mark - Lifecycle
-(id)initWithSelectedCellIndexPath:(NSIndexPath *)indexPath{
    self = [super init];
    if (self) {
        self.selectedIndexPath = indexPath;
        [self setup];
    }
    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder{
    self = [super init];
    if (self){
        [self setup];
    }
    return self;
}

-(void)setup{
    NSMutableArray *rotations = [NSMutableArray arrayWithCapacity:RotationCount];
    CGFloat percentage = 0.0f;

    for (NSUInteger i = 0; i < RotationCount; i++) {
        // Ensure that each angle is different enough to be seen
        CGFloat newPercentage = 0.0f;
        do {
            newPercentage = ((CGFloat)(arc4random() % 220) - 110) * 0.0001f;
        } while (fabsf(percentage - newPercentage) < 0.006);

        percentage = newPercentage;

        CGFloat angle = 2 * M_PI * (1.0f + percentage);
        CATransform3D transform = CATransform3DMakeRotation(angle, 0.0f, 0.0f, 1.0f);
        [rotations addObject:[NSValue valueWithCATransform3D:transform]];
    }

    self.rotations = rotations;
}

#pragma mark - Layout
-(void)prepareLayout{
    [super prepareLayout];

    CGSize size = self.collectionView.frame.size;
    self.cellCount = [self.collectionView numberOfItemsInSection:0];
    self.center = CGPointMake(size.width / 2.0, size.height / 2.0);
}

-(CGSize)collectionViewContentSize{
    return self.collectionView.frame.size;
}

-(UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath{
    UICollectionViewLayoutAttributes *attributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];

    attributes.size = CGSizeMake(ITEM_WIDTH, ITEM_HEIGHT);
    attributes.center = self.center;
    if (indexPath.item == self.selectedIndexPath.item) {
        attributes.zIndex = 100;
    }else{
        attributes.transform3D = [self transformForPersonViewAtIndex:indexPath];
    }

    return attributes;
}

-(NSArray *)layoutAttributesForElementsInRect:(CGRect)rect{
    NSMutableArray *attributes = [NSMutableArray array];
    for (NSInteger i = 0; i < self.cellCount; i++) {
        NSIndexPath *indexPath = [NSIndexPath indexPathForItem:i
                                                     inSection:0];
        [attributes addObject:[self layoutAttributesForItemAtIndexPath:indexPath]];
    }
    return attributes;
}

#pragma mark - Private
-(CATransform3D)transformForPersonViewAtIndex:(NSIndexPath *)indexPath{
    NSInteger offset = (indexPath.section * RotationStride + indexPath.item);
    return [self.rotations[offset % RotationCount] CATransform3DValue];
}

@end 
```

然后，在您的 UICollectionView 上，您调用

```
MyLayout *stackedLayout = [[MyLayout alloc] initWithSelectedCellIndexPath:indexPath];
[stackedLayout invalidateLayout];
[self.collectionView setCollectionViewLayout:stackedLayout
                                    animated:YES]; 
```

单元格之间的动画将由自定义布局处理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T05:34:47.820

似乎是一个多部分的问题，所以我将回答其中的一部分。

1.  `UICollectionviewCells` ***不要自动***调整**高亮**或**选择**。它只会告诉您何时突出显示或选择单元格，但有一个例外：

> 在大多数情况下，collection view 只修改单元格的属性以表明它被选中或突出显示；它不会改变细胞的视觉外观，但有一个例外。如果单元格的`selectedBackgroundView`属性包含有效视图，则集合视图会在单元格突出显示或选中时显示该视图。

否则，您必须手动进行*视觉突出显示。*通常通过调整`.alpha`整个单元格的属性，或使用以下一种或多种方法交换单元格本身`.image`的背景属性`UIImageView`，这些方法可在[`<UICollectionViewDelegate>`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewDelegate_protocol/Reference/Reference.html)协议中访问：

```
collectionView:didDeselectItemAtIndexPath:
collectionView:didHighlightItemAtIndexPath:
collectionView:didSelectItemAtIndexPath:
collectionView:didUnhighlightItemAtIndexPath:
collectionView:shouldDeselectItemAtIndexPath:
collectionView:shouldHighlightItemAtIndexPath:
collectionView:shouldSelectItemAtIndexPath: 
```

至于你的其他问题，我希望我能提供更多帮助，但我对自定义视图动画并不那么流利。

# mysql - 在 Mysql 的新列中插入值

> ID：14694194
> 
> 赞同：1
> 
> 时间：2013-02-04T19:38:08.660
> 
> 标签：mysql, sql-update

我有一个表格`T`，其中一些数据有 3 行。现在我添加了一个新列`c`。现在我想为现有行
插入值。 我这样做：`c`

```
insert into T (c) values(1),(2),(3); 
```

但它没有更新现有数据，而是插入了新行。
如何更新现有数据？
我不想指定 where 子句。我只想像插入一样连续添加值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:39:39.673

您将使用 UPDATE 语句将值分配给现有行的列。

```
UPDATE t
   SET t.c = 1
 WHERE t.a = 1 ; 
```

* * *

要为每个现有行分配唯一的连续整数，您需要使用主键或每行的唯一标识符。在此示例中，我们假设该`id`列是唯一的：

```
UPDATE t
  JOIN ( SELECT r.id
              , @i := @i + 1 AS i
           FROM t r
           JOIN (SELECT @i := 0) n
          ORDER BY r.id
        ) s
    ON s.id = t.id 
   SET t.c = s.i 
```

实际上，您也可以这样做：

```
UPDATE t
  JOIN ( SELECT @i := 0 ) n
   SET t.c = @i := @i + 1
 ORDER BY t.id 
```

听起来您可能想调查 AUTO_INCREMENT 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:11:19.633

您可以使用以下查询

```
UPDATE Table
SET Col1='1', Col2='2' 
```

等等...

此外，如果您想使用某些指定条件更新数据，您可以使用 where 条件，如下所示：---这只是我的数据库中使用的查询示例---

```
UPDATE City_Employee
SET City='Banglore' where (City='Delhi') 
```

祝你好运！

# c# - 带有单个 ui 的 Winform 选项卡控件

> ID：14694195
> 
> 赞同：2
> 
> 时间：2013-02-04T19:38:15.697
> 
> 标签：c#, winforms, tabcontrol

我正在开发一个需要使用选项卡的 Winforms 应用程序。所有选项卡都具有相同的 UI（它只会更改文本字段的内容）。是否可以为所有选项卡创建一个模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:41:23.487

如果所有选项卡的 UI 都相同，那么您只需通知视图模型正在更改。删除旧模型的数据绑定并将数据绑定添加到新模型。

另一种方法是创建单个`UserControl`. 每个选项卡都可以引用它自己的控件实例，并且每个控件都有自己绑定的模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:41:33.570

您可以创建一个自定义控件，其中包含您需要的所有控件，然后将自定义控件添加到每个选项卡页。

# c - 在函数中交换二维数组参考

> ID：14694199
> 
> 赞同：0
> 
> 时间：2013-02-04T19:38:31.517
> 
> 标签：c, pointers, multidimensional-array

我正在尝试交换两个新旧二维数组。我想调用一个函数`copyNewToOld`，而不实际复制值。我只想对旧的引用指向新的位置，对新的引用指向旧的。

所以我可以这样初始化：

```
float oldMesh[SIZE][SIZE] = {0};
float newMesh[SIZE][SIZE] = {0}; 
```

像这样调用：

```
copyNewToOld(&newMesh, &oldMesh); 
```

并以这样的方式实现：

```
void copyNewToOld(float *(new[][SIZE]), float *(old[][SIZE])){
    float **temp;
    temp = *new;
    *new = *old;
    *old = temp;
    temp = NULL;
} 
```

但是，该实现不会交换指针，我只是继续一遍又一遍地覆盖数据。

我是否错过了一些直截了当的东西？

更新代码：

```
float oldMesh[DIM + 2][DIM + 2] = {0};
float newMesh[DIM + 2][DIM + 2] = {0};
float **newTemp, **oldTemp
for(i = 0; i < iterations; i++){
  newTemp = &newMesh;
  oldTemp = &oldMesh;
  copyNewToOld(&newTemp, &oldTemp);
  calculateNew(newMesh, oldMesh, xsource, ysource);
} 
```

与 copyNewToOld 为：

```
void copyNewToOld(float ***new, float ***old){
  float **temp;
  temp = *new;
  *new = *old;
  *old = temp;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:45:06.933

您不能更改数组的指针值。您将需要四个变量：

```
float oldmesh[SIZE][SIZE];
float newmesh[SIZE][SIZE];
float *oldMesh = (float*) oldmesh;
float *newMesh = (float*) newmesh;
void copyNewToOld( float **old, float **new ){
    float *temp = *old;
    *old = *new;
    *new = temp;
}
...
{
    copyNewToOld( &oldMesh, &newMesh );
} 
```

修复您的代码：

```
float oldMesh[DIM + 2][DIM + 2] = {0};
float newMesh[DIM + 2][DIM + 2] = {0};
float *newTemp, *oldTemp
newTemp = (float*) newMesh;
oldTemp = (float*) oldMesh;
for(i = 0; i < iterations; i++){
  copyNewToOld(&newTemp, &oldTemp);
  calculateNew((float(*)[DIM + 2])newTemp, (float(*)[DIM + 2])oldTemp, xsource, ysource);
} 
```

（演员表是为了如果你想让`calculateNew`函数接收一个`float[DIM + 2][DIM + 2]`。如果你不介意在一维数组上做数学，只需传入`float*`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:45:16.130

与其交换数组，不如交换指向这些数组的指针。如果要直接交换数组，则必须复制它们的内容（`memcpy`例如）。

# ios - 更改时区时 MonoTouch DateTime.ToLocalTime 不会更新

> ID：14694201
> 
> 赞同：0
> 
> 时间：2013-02-04T19:38:38.380
> 
> 标签：ios, datetime, xamarin.ios

当我在计算机上（在模拟器上测试时）或手机上（直接在手机上测试时）更改时区时，`DateTime.ToLocalTime()`不会返回更新的结果。

我注册并成功接收`UIApplication.Notifications.ObserveSignificantTimeChange`. 在其中我调用`TimeZoneInfo.ClearCachedData()`它允许我检测时区实际上已更改，但这对`ToLocalTime()`. `DateTime`我正在转换的绝对是 Utc 类型（例如尝试过）`DateTime.UtcNow`。

我尝试`CultureInfo.CurrentCulture.ClearCachedData()`按照此问题中的建议进行调用：[SetTimeZoneInformation does not update DateTime.Now for another .NET Application](https://stackoverflow.com/questions/10137383/settimezoneinformation-does-not-update-datetime-now-for-another-net-application)。这只导致应用程序在 为空时崩溃`CurrentCulture`。

深入挖掘一下执行`ToLocalTime()`，似乎使用了对象`TimeZone.CurrentTimeZone`。`DateTime.GetNow()`仅当和之间的差异时才重置此对象`TimeZone.timezone_check`。我怀疑在被调用`TimeZone.timezone_check`时没有更新。`TimeZoneInfo.ClearCachedData()`

有什么办法可以强制`ToLocalTime()`考虑时区变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:40:40.710

您可以为此使用[DateTimeOffset 。](https://stackoverflow.com/questions/264617/when-would-you-prefer-datetime-over-datetimeoffset)另请参阅[此问题](https://stackoverflow.com/questions/4331189/datetime-vs-datetimeoffset)。

*编辑*- 我的工作是这样的：

```
var dateTimeUtc = new System.DateTime(2013, 2, 4, 21, 30, 0, 
                                        System.DateTimeKind.Utc);
var dateTimeOffsetLocal = new System.DateTimeOffset(dateTimeUtc.ToLocalTime());
var formattedLocalTime = string.Format("{0:HH:mm}", dateTimeOffsetLocal); 
```

在我的手机上，`formattedLocalTime`每当我更改手机时，我都会更改`TimeZone`，而不会清除任何缓存。我确实必须重新加载视图，但没有其他技巧。

要显示/验证`TimeZone`我使用的本地：

```
var localTimeZone = System.TimeZoneInfo.Local.StandardName; 
```

我希望这能以某种方式为您指明正确的方向。我没有比“在我的机器上工作”更好的了-anwer。

# asp.net - cshtml 文件 - 定位当前 windows 用户，然后查询数据库

> ID：14694203
> 
> 赞同：1
> 
> 时间：2013-02-04T19:38:49.763
> 
> 标签：asp.net, razor

我正在一个查询和更新数据库的本地主机站点上工作。我没有经常使用 ASP.NET。

我想知道是否可以找出当前的 windows 用户，然后选择数据库中与找到的用户名匹配的所有记录。

我知道如何使用 vbscript 执行此操作，但我需要使其在 cshtml 文件中工作。

1.  如何定位用户？
2.  我选择的句子会是什么样子？

任何帮助或建议表示赞赏。

谢谢。

编辑：

这是我用来显示来自特定用户的数据的代码：

```
@{
var db = Database.Open("Database") ;
var selectCommand = "SELECT * FROM Table WHERE UserID = 'asmith'";
var searchTerm = "";

var selectedData = db.Query(selectCommand, searchTerm);
var grid = new WebGrid(source: selectedData, defaultSort: "Team", rowsPerPage:20);

} 
```

当我更改`WHERE UserID = 'asmith'`为 时`WHERE UserID = @Environment.UserName`，我收到错误：

`There was an error parsing the query. [ Token line number = 1,Token line offset = 48,Token in error = . ]`下面以红色突出显示。

```
Line 15:     var selectedData = db.Query(selectCommand, searchTerm); 
```

编辑#2：

这成功地查询了数据库并返回了正确的数据，但不干净并且导致页面上的另一个查询出现问题。

```
var CurrUser = Environment.UserName;
var db = Database.Open("Database") ;
var selectCommand = "SELECT * FROM Table WHERE UserID = @0";
var searchTerm = @CurrUser; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T18:10:46.090

只是为了清理和解决旧帖子，我会将选择更改为更像这样的内容：

```
var currentUser = Request.LogonUserIdentity.Name.Substring(Request.LogonUserIdentity.Name.LastIndexOf(@"\") + 1);
var selectCommand = "SELECT * FROM Table WHERE UserID = @0";
var selectedData = db.Query(selectCommand, currentUser); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:46:40.183

您缺少单引号：

```
var selectCommand = "SELECT * FROM Table WHERE UserID = 'asmith'"; 
```

应该：

```
var selectCommand = "SELECT * FROM Table WHERE UserID = '@" + Environment.UserName + "'"; 
```

`Environment.UserName`是一个`string`。您正在查询 where `UserID`。你确定`UserID`不应该是 an`int`或 some`uniqueidentifier`吗？

# javascript - 使用 JS/Jquery 翻转图像

> ID：14694205
> 
> 赞同：3
> 
> 时间：2013-02-04T19:38:52.570
> 
> 标签：javascript, jquery

我正在寻找翻转图像。我已经让 css 使用：

```
 -moz-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: FlipH;
    -ms-filter: "FlipH"; 
```

我希望将其应用于图像，但不确定格式。

我试着做： `var flip = "-moz-transform: scaleX(-1),-o-transform: scaleX(-1),-webkit-transform: scaleX(-1),transform: scaleX(-1),filter: FlipH,-ms-filter: 'FlipH'";`

然后： `$("#chicken").delay(scrolllen).fadeOut(0).css({ left: 2600 + "px" , top : 2370 + "px" + flip}).fadeIn(0).animate({ left: 1600 + "px" , top : 2370 + "px"}, 5000, 'linear');` 稍后，但它似乎并不适用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T19:46:56.167

你想这样做吗？

```
$('#image').mouseover(function(){
    $(this).addClass('flipped');
}).mouseleave(function(){
    $(this).removeClass('flipped');
}); 
```

的CSS：

```
.flipped {
    transform: scale(-1, 1);
    -moz-transform: scale(-1, 1);
    -webkit-transform: scale(-1, 1);
    -o-transform: scale(-1, 1);
    -khtml-transform: scale(-1, 1);
    -ms-transform: scale(-1, 1);
} 
```

[jsFiddle在这里](http://jsfiddle.net/kjGNW/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T19:49:37.417

我只是使用一个类，如下所示：

```
.flipped {
    -moz-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: FlipH;
    -ms-filter: "FlipH";
} 
```

然后只需交换类：

```
$("#chicken").delay(2000).fadeOut(1, function() {
    $(this).addClass('flipped').show()
           .animate({ left: 1600 + "px" , top : 2370 + "px"}, 5000, 'linear');
}); 
```

[**小提琴**](http://jsfiddle.net/Jb8DF/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T20:10:20.857

我不完全确定我明白你在找什么。

我在想也许它可以在没有任何 JavaScript 的情况下完成？如果您想沿 X 轴翻转，并带有一些动画？

## 悬停时翻转图像

**[JSFiddle：图像翻转：悬停](http://jsfiddle.net/Snv4B/1/)**

**对于这个演示，我必须将图像 HTML 放入一个 wrapper`<div>`中，因为否则这些`:hover`变化`scale()`会以时髦的方式相互冲突。如果您删除 wrapper ，您就会明白`<div>`。**

**HTML**

```
<div class="flippy">
    <img src="http://lorempixel.com/200/200/"/>
</div> 
```

**CSS：**

```
.flippy>img {
    /**/-moz-transform:scale(1,1);-webkit-transform:scale(1,1);
    transform:scale(1,1);
    /**/-webkit-transition:all 600ms ease;-webkit-transition:all 600ms ease;
    transition:all 600ms ease; }

    .flippy:hover>img {
        /**/-moz-transform:scale(-1,1);-webkit-transform:scale(-1,1);
        transform:scale(-1,1); } 
```

如果你需要用 JavaScript 来控制它，应该很容易将 替换为`:hover`另一个类，比如`.flipped`，然后在 JS 中随心所欲地打开和关闭它的翻转状态。

//追赶。

## 在属性上翻转图像（基于点击的演示）

**[jsFiddle：属性上的图像翻转](http://jsfiddle.net/ChaseMoskal/sesZv/)**

在此演示中，当`flipped`设置了属性时，图像会翻转。

**JavaScript：**

```
// Toggles the 'flipped' attribute on the <img> tag.
$('.flippy').click(function(){
    if ($(this).attr('flipped'))
        $(this).removeAttr('flipped');
    else $(this).attr('flipped','flipped');
}); 
```

**CSS：**

```
/* vendor-prefixes have been removed in this example */
/* We just change the scale based on the flipped attribute */
.flippy {
    transform:scale(1,1);
    transition:all 600ms ease; }

    .flippy[flipped] {
        transform:scale(-1,1); } 
```

**HTML:** `<img class="flippy" src="http://lorempixel.com/200/200/"/>` -- 如您所见，我们不再需要`<div>`此示例的包装器，因为 :hover 冲突不再是问题。

//追赶。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T19:51:48.253

```
<style type="text/css">
    .transform-image {     
        -moz-transform: scaleX(-1);
            -o-transform: scaleX(-1);
            -webkit-transform: scaleX(-1);
            transform: scaleX(-1);
            filter: FlipH;
            -ms-filter: "FlipH";
        }
</style>
<script type="text/javascript">
  $("#chicken").hover(function(){
           $(this).addClass("transform-image") },   
     function () {
           $(this).removeClass("transform-image");
         };
})
</script> 
```

# ios - 从由 UITabBarController 控制的视图控制器推送 segue

> ID：14694208
> 
> 赞同：4
> 
> 时间：2013-02-04T19:39:05.587
> 
> 标签：ios, uitabbarcontroller, storyboard, uitabbar, segue

假设第一个视图控制器与 UITabBarController 连接，我想从第一个视图控制器向第二个视图控制器进行推送。

从我的谷歌搜索来看，来自与 UITabBarController 连接的视图控制器的模态转场似乎隐藏了底部标签栏，而推送转场则没有。但是，我的 push segue 也将我的标签栏隐藏在第二个视图控制器中。我在第一个视图控制器中覆盖了 prepareForSegue 方法。

下面是我的故事板和模拟器的图像。任何人都知道为什么会这样？预先感谢您的帮助。 ![右下角的视图控制器似乎在情节提要中有底部标签栏，但模拟器没有显示它 TT](../Images/c2c40f9efb21878b11b84abb2adf452d.png)

![在此处输入图像描述](../Images/83e74708d46857ea13ee94e04ed037f5.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T20:40:02.363

您的问题是因为您的 tabViewController 嵌入在您使用登录屏幕初始化的导航堆栈中。

您需要重新排列一些东西，以便您的每个标签栏控制器标签打开到一个新的导航堆栈。

我的建议

*   您的登录屏幕应该使用模态/呈现转场导航到您的标签栏控制器，而不是推送转场。删除包含登录屏幕的 navController，您不需要它（好吧，即使您保留它，也不要使用 push segue，使用模态 segue，然后您就不会再引用该 navController 的 viewController 堆栈从您的标签栏内）。

*   将第一个 viewController 中的每一个嵌入到单独的 navController 中的 tabViewCONtroller 中。

现在您可以在 tabViewController 的选项卡中推送 segue。

# php - MySQL 语法错误问题 - 无法解决

> ID：14694209
> 
> 赞同：-1
> 
> 时间：2013-02-04T19:39:07.287
> 
> 标签：php, mysql

也许只是我是个菜鸟，但对于我的一生，我无法阻止下面的代码恢复为以下错误。

> Mysql 错误：你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“WHERE id = 113”附近使用正确的语法

ID（在本例中为 ID 113）确实与数据库匹配，但仍然没有乐趣。

非常感谢您的帮助，我真的很感激。

```
<?php

ob_start();

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

function isLoggedIn()
{
    if(isset($_SESSION['valid']) && $_SESSION['valid'])
        return true;
    return false;
}

session_start();
//if the user has not logged in
if(!isLoggedIn())
{
    header('Location: ../main');

    die();
}

    //! Checks that a restaurant is logged on
    if ($_SESSION['user_type'] !== 'restaurant')
    {

        echo('You need to be a restaurant user to do that!, If you are seeing this message in error, please contact the system administrator.');
        die();

    }

    //! Checks for direct access to page

    if (empty($_GET)) {
        header('location:../main/menu-manager.php?result=nothingentered');
        die();
    }

//! Get info from POST
$ID =                   $_GET['optionid'];
$rest_ID =              $_SESSION['rest_id'];

//! security real escape

$ID =                       mysql_real_escape_string($ID);

//! Connect to the database

require_once('../Connections/PropSuite.php');
mysql_select_db($database_Takeaway, $Takeaway);

//! Write the information to the database

$query = "UPDATE menu_cats
            SET rest_id = 'd.$rest_ID',

            WHERE id = $ID ";
mysql_query($query);

    if( mysql_errno() != 0){
     // mysql error
     // note: message like this should never appear to user, should be only stored in log
     echo "Mysql error: " . htmlspecialchars( mysql_error());
     die();
     }

else {

header('Location: ../main/menu-manager.php?result=success');

}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T19:40:32.487

在 Where 子句之前的 SQL 语句中不需要逗号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T19:41:07.470

您必须先删除逗号`where`

```
$query = "UPDATE menu_cats
            SET rest_id = 'd.$rest_ID'
            WHERE id = $ID "; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T19:41:09.003

您的查询中有一个流浪`,`者。查询应该是这样的：

```
$query = "UPDATE menu_cats
        SET rest_id = 'd.$rest_ID'
        WHERE id = $ID "; 
```

# magento - Magento商店的多个URL？

> ID：14694216
> 
> 赞同：2
> 
> 时间：2013-02-04T19:39:32.090
> 
> 标签：magento, url, magento-1.7

快速提问——

在我的 Magento 1.7 上发现了一个问题。考虑网站[http://www.seacadetshipsstore.com/magento/](http://www.seacadetshipsstore.com/magento/)。该站点有一个子商店，即`/magento/gearlocker/`. 两者应该是隔离的——如果你去`/magento/gearlocker/`，你根本不应该与通用商店交互`/magento/`。

这是问题所在：商店的基本 URL 明确设置为[http://www.seacadetshipsstore.com/magento/gearlocker/](http://www.seacadetshipsstore.com/magento/gearlocker/)。当用户导航到[http://seacadetshipsstore.com/magento/gearlocker/](http://seacadetshipsstore.com/magento/gearlocker/)（没有 www）时，他们会被重定向到[http://www.seacadetshipsstore.com/magento/](http://www.seacadetshipsstore.com/magento/)。

我的问题是：如果用户在没有 www 的情况下导航到 gearlocker 站点，有没有办法设置第二个商店 URL 以防止重定向？或者更容易控制重定向回`/magento/gearlocker/`, 而不是`/magento/`？任何想法、解决方案或参考将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T23:43:52.820

请参阅我上面的评论。谢谢@CodeMoose

```
RewriteEngine On 
RewriteCond %{HTTP_HOST} ^seacadetshipsstore.com 
RewriteRule (.*) http://http://www.seacadetshipsstore.com/magento/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T12:34:39.823

如果我没记错的话，我相信如果没有一个用 -1 -2 等自动递增的 url，就不可能跨多个商店重复 url。请尝试修改其中一个 url 键，让我知道会发生什么。

# linux - 如何为脚本中特定字符之后找到的每个单词生成新行并在新行前面添加第一个单词

> ID：14694217
> 
> 赞同：1
> 
> 时间：2013-02-04T19:39:33.510
> 
> 标签：linux, arrays, shell

我有一个包含以下几行的文件。想写一个脚本

```
driver: keeps, ask  
cartoon: drake, mast, tent 
```

我如何达到以下结果

```
driver: keeps
driver: ask
cartoon: drake
cartoon: mast
cartoon: tent 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:59:01.950

这是一个在这里工作的 awk 命令：

```
awk -F'[:, ]+' 'OFS=": " { for (i = 2; i <= NF; i++) print $1, $i }' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:42:13.943

让你开始的东西：

```
$ awk '{for(i=2;i<=NF;i++){print $1, $i}}' f1
driver: keeps,
driver: ask
cartoon: drake,
cartoon: mast,
cartoon: tent** 
```

下一步是`gsub`在显示之前用于整理事物或使用输入字段选择器...

# clojure - Clojurescript 命名空间刷新

> ID：14694222
> 
> 赞同：4
> 
> 时间：2013-02-04T19:40:06.503
> 
> 标签：clojure, clojurescript, cljsbuild

我正在使用 lein cljsbuild 并想找到一种方法来重新加载我的编译文件而不刷新浏览器。从我的浏览器连接的 REPL 中是否有内置方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:32:13.870

使用[browser-repl](https://github.com/clojure/clojurescript/wiki/The-REPL-and-Evaluation-Environments)可以获得我认为您所要求的大部分内容。从网站：

```
A browser-connected REPL works in much the same way as a normal REPL: 
forms are read from the console, evaluated and return values are printed. 
A major and useful difference from normal REPL usage is that 
all side-effects occur in the browser. 
```

这会加载一个页面，然后使该页面等待来自 repl 的指令。这样，当您重新加载缓冲区时，页面将更改为匹配。

# c++ - 从进程 id 获取原始文件名

> ID：14694224
> 
> 赞同：1
> 
> 时间：2013-02-04T19:40:08.100
> 
> 标签：c++, winapi, filenames

谁能分享一个想法如何从进程ID中获取文件的原始文件名？

我尝试了功能：

```
bool getProcessOriginalFilename(LPSTR lpszFilePath)
{   
    DWORD dwDummy; 
    DWORD dwFVISize = GetFileVersionInfoSize( lpszFilePath , &dwDummy ); 
    LPBYTE lpVersionInfo = new BYTE[dwFVISize]; 
    GetFileVersionInfo( lpszFilePath , 0 , dwFVISize , lpVersionInfo ); 
    UINT uLen; 
    VS_FIXEDFILEINFO *lpFfi; 
    VerQueryValue( lpVersionInfo , _T("\\") , (LPVOID *)&lpFfi , &uLen ); 
    printf( "Original filename: %x\n" , lpFfi->OriginalFilename); 
    delete [] lpVersionInfo; 
    return true;
} 
```

但有一个错误`lpFfi->OriginalFilename`：
`struct tagVS_FIXEDFILEINFO' has no member named 'OriginalFilename'`

我也不知道如何从 processID 获取文件路径，因为 Tlhelp32 条目仅返回当前文件名而没有路径和进程 ID。

# sockets - 在非阻塞套接字上选择

> ID：14694226
> 
> 赞同：1
> 
> 时间：2013-02-04T19:40:12.343
> 
> 标签：sockets, networking, tcp

如果这个问题与其他类似问题重复，我深表歉意。

我在负载非常低的少数系统上设置小型服务器客户端（一次不超过 10-15 个连接，这也会进行非常低的数据传输）。我想知道是否应该使用阻塞或非阻塞套接字？

在服务器端，我正在使用 select，当它返回时，我去阅读 fds。现在，如果我在 select 中使用非阻塞套接字，那么 select 后面的“recv”有什么优势。是否会出现这样的情况，即 select 告诉您有可阅读的内容，但实际上没有可阅读的内容？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:02:16.227

> 我想知道是否应该使用阻塞或非阻塞套接字？

对于如此低的负载，我将使用阻塞套接字并为每个套接字提供其自己的专用线程来运行。话虽`select()`如此，如果您对多线程编程不满意，它适用于阻塞和非阻塞套接字。

> 是否会出现这样的情况，即 select 告诉您有可阅读的内容，但实际上没有可阅读的内容？

是的。在正常断开连接时，`select()`报告一个套接字是可读的，然后`recv()`在该套接字上返回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:07:55.567

我同意@Remy。

但是，我建议你不要使用线程。至少不是一开始。我建议这样做的原因是因为听起来你对这种类型的东西有点陌生，而且线程可能会给你带来比你需要的更多的头痛，以便让基本的通信正常运行。

# asp.net-mvc-4 - 为什么 MVC4 不查看特定于区域的 Views/Shared/DisplayTemplates 文件夹？

> ID：14694229
> 
> 赞同：1
> 
> 时间：2013-02-04T19:40:21.267
> 
> 标签：asp.net-mvc-4, asp.net-mvc-areas, mvc-editor-templates, display-templates, attributerouting

尝试将一些代码从 MVC3 项目移动到 MVC4 项目，并遇到此问题。一个区域内有一些`DisplayTemplates`，如下所示：

```
MVC Project
--Areas
----Identity
------Controllers
--------MyHomeController.cs
------Models
--------MyHomeViewModel.cs
--------MyEmailAddress.cs
------Views
--------Shared
----------DisplayTemplates
------------MyEmailAddress.cshtml
----------MyHome.cshtml
--------ViewStart.cshtml
--------Web.config
------IdentityAreaRegistration.cs 
```

有`MyHomeController`一个动作，它返回`MyHome.cshtml`视图，强类型到`MyHomeViewModel`. MyHomeViewModel 包含一个`IEnumerable<MyEmailAddress>`属性。在“MyHome.cshtml”文件中，我有以下内容：

```
@foreach (var email in Model.Emails)
{
    @Html.DisplayFor(m => email)
} 
```

但是，这不会呈现 MyEmailAddress.cshtml 模板。以下两个结果相同：

```
@foreach (var email in Model.Emails)
{
    @Html.DisplayFor(m => email, "MyEmailAddress")
}

@foreach (var email in Model.Emails)
{
    @Html.DisplayFor(m => email, "~/Areas/Identity/[rest of path]/MyEmailAddress.cshtml")
} 
```

但是，如果我将`MyEmailAddress.cshtml`文件移动到根 Web 项目的`Views/Shared/DisplayTemplates`文件夹中，它**会**使用此模板进行渲染。

出于某种原因，DisplayFor HtmlHelper 要么不在特定区域的 Views/Shared/DisplayTemplates 文件夹中查找，要么在该文件夹中查找其他内容。

我究竟做错了什么？这适用于 MVC3，但我似乎无法在 MVC4 项目中正确使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:46:57.190

在放弃并发布此问题后，我再次立即找到了自己的答案。

`MyHomeController`正在使用[AttributeRouting](http://attributerouting.net/)。我发现如果我访问 URL `/Identity/MyHome/Action`，就会`DisplayTemplate`成功选择 。然而，对于我的自定义路线`/my/home`，它不是。将以下属性添加到 MyHomeController 修复了此问题：

```
[RouteArea("Identity")]
public class MyHomeController : Controller 
```

# php - 使用限制获取 mysql 行时遇到问题

> ID：14694237
> 
> 赞同：0
> 
> 时间：2013-02-04T19:40:42.370
> 
> 标签：php, mysql, pdo

每次用户按下一个应该获取数据库的下 10 行的按钮时，我都有一个通过 ajax 请求调用的 php 脚本。当按下按钮时，什么也没有发生，我在控制台或 php 中没有错误

```
$query = $conn->prepare('SELECT name, file_loc, img_id, filter, votes FROM images WHERE user_id=? ORDER BY votes DESC LIMIT ?, 10');
$query->execute(array($user_id, $skip));
$result = $query->fetchAll(); 
```

我去phpmyadmin的时候，手动填写变量，直接运行查询，运行正常。

在我添加`echo $skip . ' ' . $user_id;`到脚本末尾的 php 中，它显示所有变量都是它们应该是的。此外，如果我编辑查询的末尾以使用静态数字而不是将变量插入到 read `LIMIT 10, 10`，那么一切正常（虽然不是变量，但它不能增加 10）。

我不知道为什么它不能正常运行，但我觉得我忽略了一些明显的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:05:01.867

在仿真模式下（默认情况下启用），PDO 用实际数据替换占位符。并且使用“惰性”绑定 PDO 将每个参数都视为字符串。
结果，查询变为

```
LIMIT '10', 10 
```

这显然是导致查询失败的错误语法。

因此，您有 2 个解决方案：
通过关闭仿真（因为 mysql 可以正确地对所有占位符进行排序）
或通过显式绑定数字，就像在 Kalpesh 的答案中一样。但是不要忘记为这个变量设置正确的类型（PDO::PARAM_INT）。

要关闭仿真，请在连接后运行此代码

```
$conn->setAttribute( PDO::ATTR_EMULATE_PREPARES, false ); 
```

而且，为了得到错误，添加这个

```
$conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:47:10.113

你能试试这个吗？

```
$query = $conn->prepare('SELECT name, file_loc, img_id, filter, votes FROM images WHERE user_id=? ORDER BY votes DESC LIMIT ?, 10');
$query->bindParam(1, $user_id);
$query->bindParam(2, $skip);
$query->execute();
$result = $query->fetchAll(); 
```

# sockets - 开源套接字服务器

> ID：14694245
> 
> 赞同：0
> 
> 时间：2013-02-04T19:40:59.683
> 
> 标签：sockets, open-source

我正在编写一个使用套接字流与远程计算机通信的 iOS 应用程序。我正在寻找一个在主机上运行的开源套接字服务器，它将读取数据并将其发送到主机操作系统。

所以我想知道是否有一个可用于 Windows（和其他操作系统）的开源“套接字服务器”来执行此操作。服务器基本上会读取传入的数据，然后将其传递给操作系统进行处理。例如，如果我向远程计算机发送按键 Control C，并且我打开了记事本，那么我希望在主机上执行复制命令。

理想情况下，用户将能够配置主机服务器并设置连接的端口号、用户名和密码。

笔记：

*   我不想使用 VNC 作为服务器，因为它只支持一组有限的击键
*   我没有在 Windows 或 Unix/Linux 中编程的经验，因此不具备自行编程服务器的知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:52:53.213

听起来您基本上是在谈论构建一个协议，该协议几乎可以实现 VNC 所做的所有事情，以及您的应用程序需要的任何“额外”。如果我是你，我会花更多时间更详细地收集和定义你的需求，**而**不是仅仅考虑 Ctrl^c 场景。

我敢打赌，如果您列出了对这个“套接字服务器”的要求，您会发现 VNC 和/或远程桌面协议将满足您的需求。

哦，顺便说一句，这个问题的“套接字服务器/客户端”部分最终将成为最简单的部分:) 有很多普通 ole 套接字服务器/客户端的免费示例。 **但**细节和难点始终在于服务器实现的协议。在您的情况下，与不同的操作系统互操作......这是一个巨大的挑战。

**tl;博士;** 不要太快关闭 VNC 或远程桌面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:52:13.383

我想我在一个名为 Twisted 的网络库中找到了我想要的东西。Twisted 是一个事件驱动的网络引擎，用 Python 编写并在开源下获得许可。

[http://twistedmatrix.com](http://twistedmatrix.com)

看起来使用 Twisted 设置任何类型的网络服务器都非常容易。

# android - 如何检测触摸触摸屏的形状

> ID：14694258
> 
> 赞同：1
> 
> 时间：2013-02-04T19:41:24.827
> 
> 标签：android

我收到了这样的要求[http://www.youtube.com/watch?v=7MYQicokwmY&feature=plcp](http://www.youtube.com/watch?v=7MYQicokwmY&feature=plcp)我正在审查这个要求。根据要求，我们必须在支持 Android 的平板电脑的视频链接中构建触摸检测。

在该视频玩具（圆形、星形或矩形形状的玩具）中使用导电硅胶传感器，它们可以检测屏幕上的触摸并确定三角形、圆形或星形等外部世界物体的形状并进一步处理形状。

我必须对安卓平板电脑使用相同的触摸检测。有人能帮我找到在安卓平台上实现这个的方法吗？是否有任何 API 或框架来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:54:16.390

如果你看 1:13 左右的视频，他们展示了我猜的一些原型，圆圈有三个点，六边形也是......

我最好的猜测是对象的最大部分是不导电的，只有几个点是导电的，实际上会在屏幕上注册为触摸点。关键是它们中的每一个都足够不同，以至于无论方向是什么，位置是什么，您都可以识别它们（并且取决于您的要求，您是否在屏幕上同时有多个对象） .

您还可以使用每个导电点的面积，因此在您的代码中，您将获得触摸信息，您可以[从 MotionEvent 获得不同的压力值](http://developer.android.com/reference/android/view/MotionEvent.html#getPressure%28int%29)

现在如何放置导电点以及每个形状上有多少完全取决于您，并且实际上取决于您的要求（识别任意形状不是一种选择......）

如果区域太大，大多数触摸屏都会拒绝触摸（即手掌拒绝），所以我认为没有太多其他方法可以做到这一点......

# php - 如何在 Zend Framework 中编辑索引页面？

> ID：14694260
> 
> 赞同：0
> 
> 时间：2013-02-04T19:41:35.293
> 
> 标签：php, zend-framework

我一直在谷歌搜索，但我似乎找不到任何东西。
我在哪里修改 index.php 页面？

这是 index.php：

```
 // Define path to application directory
    defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/application'));

define('PUBLIC_PATH', realpath(dirname(__FILE__)));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));
/** Zend_Application */
require_once 'library/Zend/Application.php';
require_once 'config.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
            ->run(); 
```

我一直在查看库文件夹，但是有很多文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:00:54.567

该`index.php`脚本服务于**每个**请求。我猜你真正想要的是索引页面视图脚本，你通常可以在`application/views/scripts/index/index.phtml`. 这是在默认布局中呈现的，可能位于`application/layouts/default.phtml`.

# python - Pyramid 教程中缺少 Chameleon 模块

> ID：14694264
> 
> 赞同：1
> 
> 时间：2013-02-04T19:41:51.053
> 
> 标签：python, pyramid, chameleon

我正在关注[Pyramid 教程](http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/humans/creatingux/step01/index.html#goals)。

我也完成了设置，[这里没有报告任何错误](http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/humans/setup.html)

但是我在尝试运行应用程序时得到了这个。

```
File "/home/xy/pyramid/tutorial_workspace/venv/local/lib/python2.7/site-packages/pyramid-1.4-py2.7.egg/pyramid/chameleon_text.py", line 3, in <module>
    from chameleon.zpt.template import PageTextTemplateFile
ImportError: No module named chameleon.zpt.template 
```

虽然`easy_install pyramid WebTest nose`应该涵盖了变色龙依赖？

有没有其他人遇到过这个？我应该尝试独立安装变色龙吗？

# cmake - CMake：如何添加自定义通用编译规则？

> ID：14694268
> 
> 赞同：7
> 
> 时间：2013-02-04T19:41:58.173
> 
> 标签：cmake, protocol-buffers

我需要将协议缓冲区 .proto 文件编译为 .pb.cc、.pb.h 文件。有一个用于这种转换的程序。

```
protoc test.proto --cpp_out . 
```

如何在 cmake 中添加这样的通用规则？我可以用 add_custom_command 做到这一点。但是对于每个 .proto 文件，我都必须这样做。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T20:49:41.210

看起来 CMake 的[`FindProtobuf`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aFindProtobuf)模块通过 function 提供了这个功能`PROTOBUF_GENERATE_CPP`。

您可以在一次调用中传递多个 .proto 文件，例如

```
file(GLOB ProtoFiles "${CMAKE_CURRENT_SOURCE_DIR}/*.proto")
PROTOBUF_GENERATE_CPP(ProtoSources ProtoHeaders ${ProtoFiles}) 
```

请注意，即使调用的 CMakeLists.txt 文件`find_package(Protobuf)`可能是顶级文件，调用该函数的 CMakeLists.txt 文件也需要与 .proto 文件位于同一目录中。

# javascript - 如何为谷歌地图创建一个backbone.js 视图

> ID：14694269
> 
> 赞同：2
> 
> 时间：2013-02-04T19:41:58.833
> 
> 标签：javascript, backbone.js, google-maps-api-3

大家好，我正在尝试使用backbone.js 创建一个谷歌地图视图，但我真的不明白我需要做什么才能实现它。

这就是我到目前为止所拥有的（我也不确定这是否正确）。我真的不明白这种视图的渲染功能需要发生什么。

> ```
>  MYAPP.Widgets.Map = Backbone.View.extend({
>     template : template('grid-12'),
>     initialize: function(){
>     },
>     activate: function(){
>         var mapOptions = {
>                   zoom: 8,
>                   center: new google.maps.LatLng(-34.397, 150.644),
>                   mapTypeId: google.maps.MapTypeId.ROADMAP
>                 };
>     this.map = new google.maps.Map(document.getElementById('googleMapBox'),mapOptions);
>     },
>     render: function(){
>         this.$el.html(this.template(this));
>         this.activate();
>         return this;
>     },
> }); 
> ```

谢谢

已编辑：我查看了 tkone 提到的线程。我在那里看不到答案，我真的不明白他为什么拒绝在这件事上提供任何真正的帮助。这可能是因为我缺乏 JS 或骨干知识（这真的没关系）。其他用户无法理解如何进行这项工作的其他帖子中提到了与 tkone 相同的问题。

我已经做到了这一点，但我收到了这个错误

> ```
>  Uncaught TypeError: Cannot read property 'offsetWidth' of null main.js:28
>                                                                ih main.js:28
>                                                                Lh main.js:34
> MYAPP.Widgets.Map.Backbone.View.extend.activate MTAPP.widgets.js:23
> MYAPP.Widgets.Map.Backbone.View.extend.render MYAPP.widgets.js:38 
> ```
> 
> （匿名函数）

我希望还有其他人可能想为解决这个问题做出贡献。

**更新**所以按照评论getElement函数确实返回null，所以我用一个返回元素的jquery选择器切换它

但是！，我确实得到了一个不同的错误：未捕获的类型错误：无法设置未定义的属性“位置”

在此线程之后： [未捕获的类型错误：无法设置未定义的属性“位置”](https://stackoverflow.com/questions/8483023/uncaught-typeerror-cannot-set-property-position-of-undefined)

我看到您无法将 jquery 元素发送到 Map 对象。所以现在我坚持如何从 jquery 中提取实际的 DOM 元素。

关注这个线程： [如何从 JQuery 选择器中获取 DOM 元素](https://stackoverflow.com/questions/1677880/how-to-get-a-dom-element-from-a-jquery-selector)

我终于能够解决它。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T20:32:29.600

我得到解决方案的方式要归功于@dbaseman 和我发现的其他线程的评论，所有这些都列在实际问题中。我将发布完整的解决方案：

> ```
>  MYAPP.Widgets.Map = Backbone.View.extend({
>     template : template('grid-12'),
>     initialize: function(){
>     },
>     activate: function(){
>         var mapOptions = {
>                   zoom: 8,
>                   center: new google.maps.LatLng(-34.397, 150.644),
>                   mapTypeId: google.maps.MapTypeId.ROADMAP
>                 };
>         var domElement = this.$('#googleMapBox');
>         this.map = new google.maps.Map(domElement.get(0),mapOptions);
>     },
>     render: function(){
>         this.$el.html(this.template(this));
>         this.activate();
>         return this;
>     },
> }); 
> ```

模板功能只是：

> ```
>  var template = function (name) {
>     var source = $('#' + name + '-template').html();
>     return Handlebars.compile(source);
> }; 
> ```

模板本身是：

> ```
> <script type="text/x-mustache-template" id="grid-12-template">
> <div class="row-fluid sortable ui-sortable">
>             <div class="box span12">
>                 <div class="box-header">
>                     <h2><i class="icon-th"></i><span class="break"></span>thegrid</h2>
>                     <div class="box-icon">
>                         <a href="#" class="btn-setting"><i class="icon-wrench"></i></a>
>                         <a href="#" class="btn-minimize"><i class="icon-chevron-up"></i></a>
>                         <a href="#" class="btn-close"><i class="icon-remove"></i></a>
>                     </div>
>                 </div>
>                 <div id="googleMapBox" class="box-content">
>               </div>
>             </div><!--/span-->
>         </div>
> </script> 
> ```

祝你好运

# ruby - 保护 Octopress 的一部分

> ID：14694270
> 
> 赞同：1
> 
> 时间：2013-02-04T19:41:59.403
> 
> 标签：ruby, security, passwords, jekyll, octopress

我有一个 Octopress 网页，我想使用我通过电子邮件传播的密码（或其他内容）阻止某些帖子（一些只有我的家人才能看到的帖子）。

实现这一目标并确保帖子不会出现在存档中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:21:53.910

对于家庭帖子，您可以将它们放在单独的目录中，并使用`.htaccess`密码保护该目录。

为了使它们不会出现在档案中，您需要编辑主题。以下是基于经典主题：

编辑档案/index.html

```
---
layout: page
title: Blog Archive
footer: false
---

<div id="blog-archives">
{% for post in site.posts reverse %}
    {% if  post.categories contains 'noarchive' %}
    {% else %}
        {% capture this_year %}{{ post.date | date: "%Y" }}{% endcapture %}
        {% unless year == this_year %}
            {% assign year = this_year %}
            <h2>{{ year }}</h2>
        {% endunless %}
        <article>
            {% include archive_post.html %}
        </article>
    {% endif %}
{% endfor %}
</div> 
```

在您不想出现在存档中的帖子中，yaml 部分看起来像这样：

```
---
layout: post
title: "Welcome"
date: 2013-02-07 00:00
comments: true
categories: 
 - site
 - noarchive
--- 
```

# media-queries - @media 查询、最大设备宽度和桌面浏览器

> ID：14694273
> 
> 赞同：0
> 
> 时间：2013-02-04T19:42:02.320
> 
> 标签：media-queries

有没有人对“最大设备宽度”有问题并有渲染问题。我的印象是“最大设备宽度”仅在手机、平板电脑和移动设备上呈现，而不是在桌面浏览器上呈现。对我来说，它是在桌面浏览器上呈现的。当设置浏览器并加载带有 @Media 查询的 css 文件的初始加载时，会发生这种情况。所以如果我有

@media screen and (max-width:500px), screen and (max-device-width: 1280px){/*我的手机样式在这里*/}

桌面浏览器或桌面的屏幕分辨率设置为 1280px，它实际上会渲染 1280px 样式的移动样式而不是桌面样式。浏览器制造商是否在他们的浏览器版本中加入了“最大设备宽度”？任何指针或现场都会很棒。

编辑：我的样式表是这样的。

```
 /* My desktop styles here with no media query. */
 body{}
 .desktopStyle{}

 /* Then my media query for mobile devices. */
 @media screen and (max-width:500px), screen and (max-device-width: 1280px){
 /* My mobile styles here */
 } 
```

谢谢。

# objective-c - 从被调用中查找调用者方法

> ID：14694280
> 
> 赞同：0
> 
> 时间：2013-02-04T19:42:34.957
> 
> 标签：objective-c, reflection

> **可能重复：**
> [如何找出谁调用了一个方法？](https://stackoverflow.com/questions/1793999/how-to-find-out-who-called-a-method)

我有多个类和多个方法调用单例类的方法。我想知道哪个方法正在调用，而不传递标志。我已经将 self 传递给孩子我知道使用哪个类调用`[classObj class];`但我不知道如何识别哪个方法正在调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:49:08.423

尽管我绝对建议不要这样做（按照您的建议传递一个标志），但您会在调用堆栈中看到一个级别：

```
NSLog(@"%@", [[NSThread callStackSymbols] objectAtIndex:1]); 
```

# iphone - 如何删除 CIFilter

> ID：14694283
> 
> 赞同：2
> 
> 时间：2013-02-04T19:42:51.457
> 
> 标签：iphone, ios, cocoa-touch, core-image

我知道在使用 a 时`CIFilter`，如果您使用的是`CIFilter`like `CISepiaTone`，则基本上可以通过将其值重置为初始值来“删除”它。但是，对于没有值组件的`CIFilter`like ，您将如何删除此过滤器？`CIMinimumComponent`（假设我有其他想要保留的链式过滤器）

# java - 如何检查两个字符串列表？

> ID：14694285
> 
> 赞同：6
> 
> 时间：2013-02-04T19:43:04.107
> 
> 标签：java, string, compare

在 OOP Java 中上一堂课，由于我对这门语言完全陌生，并且还不知道它必须提供的许多工具，我发现自己在黑暗中摸索解决简单问题的方法，我可以硬编码这些问题，但我觉得在那里是更简单的方法来做到这一点`java.util`。

假设我有一个字符串列表

```
String[] stringOne = {"a","b","c", "potato"};
String[] stringTwo = {"potato", "13"}; 
```

如何检查任何给定项目`stringTwo`出现的次数`stringOne`？或相反亦然。我宁愿每次遇到这个问题时都不要双循环（或制作双循环方法）。

现在我可以使用`Collections.frequency()`并且只循环一次，但有没有更简单的方法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:51:44.417

> 假设我有一个字符串列表
> 
> ```
> String[] stringOne = {"a","b","c", "potato"};
> String[] stringTwo = {"potato", "13"}; 
> ```

这些是“数组”，而不是“列表”。 `Arrays.asList(stringOne)`是 . 引用的数组的列表包装器`stringOne`。

> 如何检查 stringTwo 中任何给定项目在 stringOne 中出现的次数？

```
new HashSet(Arrays.asList(stringOne)).retainAll(Arrays.asList(stringTwo)) 
```

将为您提供两者中的元素集。

使用 a[`Bag`](http://commons.apache.org/collections/api-3.2.1/org/apache/commons/collections/Bag.html)而不是 set 的类似方法将使您计数。

> # `retainAll(Collection coll)`
> 
> 删除不在给定集合中的任何袋子成员，尊重基数。也就是说，如果给定的集合 coll 包含给定对象的 n 个副本，并且包有 m > n 个副本，则从包中删除 m - n 个副本。此外，如果 e 是 bag but 中的一个对象`!coll.contains(e)`，则删除`e`它的任何副本。

集合类中使用的等价概念是由`Object.equals(object)`哪些`java.lang.String`覆盖定义的，以按字典顺序进行比较。

如果您需要将结果返回到数组中，请尝试`myBag.toArray(new String[0])`将内容转储到字符串中。该参数在文档中进行了解释，但简而言之，它是一种类型提示，适用于 Java 的损坏数组方差。

# php - PHP 查找字符串的第 n 次出现之间的值

> ID：14694286
> 
> 赞同：-2
> 
> 时间：2013-02-04T19:43:05.590
> 
> 标签：php, string, variables

我有一个逗号分隔的字符串，我需要 PHP 来查找字符串中第 12 次和第 13 次逗号之间的值，以便将其转换为变量。我将如何做到这一点？在任何给定时间，该值不一定是相同数量的字符。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:48:59.803

使用[explode()](http://php.net/manual/en/function.explode.php)方法：

```
$csvString = "1,2,3,4,5,6,7,8,9,10,11,12,13,14,15";
$desiredValueNum = 12;
$explodedArray = explode("," , $csvString);
echo $explodedArray[$desiredValueNum];  // Prints 13, which is between the 12&13th comma 
```

将 12 更改为您想要查找的任何低索引（请记住，数组从 0 开始）

# mysql - Mysql UPDATE 与 JOIN？

> ID：14694287
> 
> 赞同：0
> 
> 时间：2013-02-04T19:43:11.670
> 
> 标签：mysql, join, sql-update

假设我有`table1`：

```
 ID1 | COUNT 
-----------
  1  | 0 
  2  | 0 
```

和`table2`：

```
 ID2 | COUNT|ID1
-----------------
  1  | 1    | 1
  2  | 2    | 2
  3  | 3    | 1 
```

我的目标是获得按 ID1 分组`table1`的计数`table2`总和，结果`update`将是：

```
 ID1 | COUNT 
-----------
  1  | 4
  2  | 2 
```

让我困惑的是

```
SELECT * 
FROM table2 t2 left outer join table1 t1 on t1.id1=t2.id1; 
```

返回 3 行，但是

```
UPDATE table2 t2 left outer join table1 t1 on t1.id1=t2.id1
SET  t1.count=t1.count+t2.count; 
```

仅更新 2 行，并产生

```
 ID1 | COUNT 
-----------
  1  | 1
  2  | 2 
```

有没有人知道正确的`update`陈述是什么？PS我知道我可以做点什么，`SUM`但在我的情况下`table1`，记录比 多得多`table2`，所以总和效率低下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:50:34.293

你可以用一个子查询来做到这一点

```
UPDATE table1 t1 SET `t1.COUNT`=(SELECT SUM(`t2.COUNT`) 
  FROM table2 t2 WHERE t1.ID1=t2.ID1) 
```

它会更新你的整个表。

如果您想将其限制为特定的 ID，那么只需指定它们。添加：

```
WHERE t1.ID1=<some id> 
```

# eclipse - 在 Eclipse 中为 hadoop 创建 JobConf

> ID：14694290
> 
> 赞同：0
> 
> 时间：2013-02-04T19:43:17.507
> 
> 标签：eclipse, hadoop, mapreduce, libraries

我是一名 .Net 开发人员（经验不多），`Hadoop`现在正在学习。但是我的偏好是罢工`Hive`，我只是想先接触 java 代码并熟悉 Eclipse。

我试图编写`Driver`代码来运行和`Map Reduce`工作。但是当我尝试创建`JobConf`对象时，我遇到了语法错误。

```
JobConf conf = new JobConf(MaxTemperature.class); 
```

作为开发人员，我可以猜测这是一些缺少库的问题。但真的不确定应该从哪里获得这些库。任何人都可以帮助我吗？把我当作一个初学者，我现在对 eclipse 真的很不舒服。我什至在 Eclipse 中找不到（Visual Studio 的）解决方案资源管理器。请帮忙。

**编辑**

如果我明天遇到类似的问题，也请尝试指导我获取专门用于 Hadoop 的缺失库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:20:45.073

我建议获取[Eclipse 教程](http://www.vogella.com/articles/Eclipse/article.html)或观看[截屏视频](http://www.youtube.com/watch?v=Ft0oD_F6-ac)。

在 Eclipse 中，带有红色涂鸦的每一行在左侧都有一个图标，用于显示错误消息。单击它会弹出一些针对该问题的建议修复。

该快捷方式`CTRL + SHIFT + O`会自动添加缺少的导入语句。`JobConf`如果找不到该类，则应首先将其添加`hadoop-core-x.jar`到项目的类路径中。

如果有疑问，您可以使用[http://www.findjar.com](http://www.findjar.com)找到丢失的 JAR 。只需输入缺少的类，它就会建议一些 JAR。

# session - 如何检查 IIS 是否使用粘性会话？

> ID：14694293
> 
> 赞同：3
> 
> 时间：2013-02-04T19:43:32.107
> 
> 标签：session, iis

我正在 IIS 服务器场上开发应用程序。我需要知道那些 IIS 服务器是否使用粘性会话来处理来自一个客户端的连续请求。

如何检查 IIS 服务器是否已打开粘性会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:24:22.977

您能否提供一些有关您的 IIS 服务器场如何进行负载平衡的其他详细信息？应用负载平衡的方法有多种，包括[Windows 网络负载平衡 (NLB)](http://technet.microsoft.com/en-us/library/cc732855%28WS.10%29.aspx)、运行[应用请求路由](http://www.iis.net/downloads/microsoft/application-request-routing)的 IIS 服务器，当然还有来自 Cisco、Citrix、Barracuda 和（我个人最喜欢的）[F5](http://www.f5.com/products/big-ip/)等公司的硬件负载平衡器。

粘性会话（也称为持久性和服务器亲和性）不会直接在场中各个服务器上的 IIS 中设置，因此实际上无法通过查看 IIS 配置来判断是否启用了持久性. 负载均衡器负责维护客户端和应该接收流量的特定节点之间的关系，以及它是否应该将返回的流量发送回它发出第一个初始请求的同一个 Web 服务器。持久性设置将在您的负载平衡解决方案中进行配置。有关您需要如何执行此操作的详细信息，您需要参考您正在使用的任何负载均衡器（硬件或软件）的文档。

# version-control - bzr 可以显示当前目录下的哪些文件已添加到存储库中？

> ID：14694294
> 
> 赞同：0
> 
> 时间：2013-02-04T19:43:37.217
> 
> 标签：version-control, bazaar, bzr-svn

我知道在基石中，GUI 将报告存储库中“添加/删除/冲突”的文件。bzr 有可以做类似事情的命令吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:33:04.283

该`bzr status`命令会告诉您待处理的更改：

*   添加的文件
*   文件被删除
*   文件重命名
*   未知文件（尚未添加）

如果您安装了 Bazaar Explorer 插件（Windows 和 Mac OS X 默认包含），那么您也可以使用 Bazaar Explorer 向您显示相同的信息。在 Windows 上，您可以从 Program Files 或开始菜单打开 Bazaar Explorer，在其他系统上您可以运行`bzr explorer /path/to/project`.

# coldfusion - 如何防止 CFLoop 中相同 CFQuery 的多次迭代并格式化为矩阵

> ID：14694299
> 
> 赞同：1
> 
> 时间：2013-02-04T19:43:55.767
> 
> 标签：coldfusion, coldfusion-8

我对此进行了很多研究，但还没有找到我正在寻找的答案。我能够在一点帮助下达到这一点，但现在又遇到了另一个障碍。

我希望能够在最左边的列下显示所有唯一的公司名称，然后是在特定月份内进行的每种类型的测试数量的“统计”。我已经注释掉了我的一些代码，虽然它可以工作，但没有考虑到特定测试的数量何时等于 0（db 中没有符合条件的记录），如果没有别的，这是需要的确保其他测试不会混淆他们的“计数”。我的代码可能有助于详细说明：

```
<cfset s = structNew()>
<cfquery datasource="test" name="qry">
    SELECT company, test_type, count(test_type) as counter 
    FROM donor_log
    GROUP BY company, test_type
</cfquery>

<cfloop query="qry">
    <cfset s[qry.company][qry.test_type] = qry.counter>
</cfloop>

<table border="1">
    <tr>
        <th>Company</th>
        <th>UA</th>
        <th>BA</th>
        <th>Hair</th>
        <th>Blood</th>
    </tr>
    <cfoutput>
    <cfloop collection="#s#" item="i">
        <tr>
            <td>#i#</td>
            <cfloop collection="#s[i]#" item="j">
                <cfquery dbtype="query" name="ua">
                    SELECT DISTINCT company 
                    FROM qry 
                    WHERE company='#i#' 
                      AND test_type='UA'
                </cfquery>
                <cfdump var="#ua#"> 
                <!---
                <cfif val(s[i][j]) EQ 0>
                    <td>0</td>
                <cfelse>  
                    <td>#s[i][j]#</td>
                </cfif>
                 --->
            </cfloop>  
        </tr>
    </cfloop> 
    </cfoutput> 
```

当值等于 0 时，注释部分不会在屏幕上打印“0” `structKey`，目前，如果一家公司有 0 个 UA 但有 2 个 BA，则 UA 下的单元格显示 2 而 BA 什么都没有。所以我的`<cfif>`陈述也有问题，但我不确定是什么。请理解我刚刚开始学习 ColdFusion，我在这个特定页面上的大部分内容来自另一个论坛上的另一种灵魂的帖子。我期待您的回复和输入，在此先感谢！

PS 快速编辑：当我使用`<cfdump>`上述方法时，输出是 1 个对具有 1 个此类记录的公司的整体查询，对`company="#i#" AND test_type="UA"`具有 2 个此类记录的公司的 2 个查询，如果有 3 个匹配记录则为 3 个查询，依此类推。最终希望这个查询只为每家公司运行一次`"#i#"`，然后拉出`s[i][j].recordcount`（无论它不等于 0），这样我就可以将它与不同的表（费用表）进行比较，并生成一个总金额来向每家公司开具账单关于执行的测试数量，如果这有意义的话，但我需要先过这座桥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:15:32.287

如果我正确理解您的问题，我只需像下面这样重新组织查询

```
<cfquery datasource="test" name="qry">
SELECT company, SUM(CASE WHEN test_type = 'UA' THEN 1 ELSE 0 END) AS UACount
, SUM(CASE WHEN test_type = 'BA' THEN 1 ELSE 0 END) AS BACount
, SUM(CASE WHEN test_type = 'Hair' THEN 1 ELSE 0 END) AS HairCount
, SUM(CASE WHEN test_type = 'Blood' THEN 1 ELSE 0 END) AS BloodCount
FROM donor_log
GROUP BY company
</cfquery> 
```

然后输出

```
<table border="1">
<tr>
    <th>Company</th>
    <th>UA</th>
    <th>BA</th>
    <th>Hair</th>
    <th>Blood</th>
</tr>
<cfoutput query="qry">
 <tr>
  <td>#qry.Company#</td>
  <td>#qry.UACount#</td>
  <td>#qry.BHCount#</td>
  <td>#qry.HairCount#</td>
  <td>#qry.BloodCount#</td>
 </tr>
</cfoutput> 
```

# java - 带有 SQLite 数据库的 RuntimeException - Android

> ID：14694302
> 
> 赞同：0
> 
> 时间：2013-02-04T19:44:09.767
> 
> 标签：java, android, sqlite, runtimeexception

我试图在我的笔记本电脑上更改我的一些文件名，我一定是把我的程序搞砸了。该程序运行良好，直到它需要打开 SQLite 数据库时，它崩溃了。

它曾经工作正常，所以它与我更改一些文件名有关。我以为我到处都修好了，但肯定没有。我尝试更新数据库的版本号，但没有帮助。

先感谢您！

高分.java

```
dh.openDB();  //Line 30 
```

数据库助手.java

```
public SQLiteDatabase openDB() {
    db = this.getWritableDatabase();  //Line 32
    return db;
} 
```

LogCat 输出

```
01-22 13:56:35.454: E/AndroidRuntime(9641): FATAL EXCEPTION: main
01-22 13:56:35.454: E/AndroidRuntime(9641): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.bibletrivia/com.example.bibletrivia.Highscores}: android.database.sqlite.SQLiteException: near "DB_TABLE": syntax error (code 1): , while compiling: CREATE DB_TABLE HighscoresList (_id INTEGER PRIMARY KEY AUTOINCREMENT,score LONG,percentage INTEGER,category STRING,total_score LONG);
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.os.Looper.loop(Looper.java:137)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at dalvik.system.NativeStart.main(Native Method)
01-22 13:56:35.454: E/AndroidRuntime(9641): Caused by: android.database.sqlite.SQLiteException: near "DB_TABLE": syntax error (code 1): , while compiling: CREATE DB_TABLE HighscoresList (_id INTEGER PRIMARY KEY AUTOINCREMENT,score LONG,percentage INTEGER,category STRING,total_score LONG);
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1663)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1594)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at com.example.bibletrivia.DatabaseHelper.onCreate(DatabaseHelper.java:148)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at com.example.bibletrivia.DatabaseHelper.openDB(DatabaseHelper.java:32)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at com.example.bibletrivia.Highscores.onCreate(Highscores.java:30)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.app.Activity.performCreate(Activity.java:5104)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-22 13:56:35.454: E/AndroidRuntime(9641):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-22 13:56:35.454: E/AndroidRuntime(9641):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:47:50.290

```
Caused by: android.database.sqlite.SQLiteException: near "DB_TABLE": syntax error (code 1): , while compiling: CREATE DB_TABLE HighscoresList (_id INTEGER PRIMARY KEY AUTOINCREMENT,score LONG,percentage INTEGER,category STRING,total_score LONG); 
```

将 DB_TABLE 更改为“表”

你应该总是仔细查看 logcat，因为你可以很容易地找到你的错误。找到异常后，您应该很容易找到解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:47:43.920

```
CREATE DB_TABLE HighscoresList 
```

应该：

```
CREATE TABLE HighscoresList 
```

阅读[创建表语法](http://www.w3schools.com/sql/sql_create_table.asp)。

# android - OpenGL 纹理加载后 Galaxy Note 2 上的黑框而不是图像

> ID：14694307
> 
> 赞同：1
> 
> 时间：2013-02-04T19:44:46.117
> 
> 标签：android, opengl-es

我在 android 的全景播放器上工作，并且在特定设备 Galaxy Note 2 上遇到了非常奇怪的情况。

在加载/卸载opengl纹理的几个周期之后，我得到了这样的情况：

![字体被丢弃](../Images/6399267d0d81e9f5eea88a02eccf3dea.png)

通过设置 R.drawable 和字体的索引来操纵槽资源的图像被损坏，并且没有 OutOfMemory 错误、异常、OpenGL 错误等 - 并且堆位于 30-35mb 以下。

我不知道出了什么问题以及在哪里，我将非常感谢有关问题根源的任何想法和提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T18:28:38.760

我遇到了完全相同的问题。我通过关闭清单中整个应用程序的硬件加速来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T06:58:58.497

所以这个问题的主要原因是硬件加速使用了GL纹理内存，没有OutOfMemory，因为应用程序几乎可以利用所有设备内存来存储纹理。但纹理内存也用于视图、字体等的硬件加速渲染。

所以解决方法是禁用硬件加速或限制使用，或降低纹理内存的碎片。

# php - 类中的php链接函数

> ID：14694313
> 
> 赞同：0
> 
> 时间：2013-02-04T19:45:25.020
> 
> 标签：php, oop

这个声明是怎么回事？

```
$this->load->view("index.php"); 
```

我在 CodeIgniter 和其他代码在类中的地方看到了这种语法，因此是“$this”，它引用“load”或其他一些方法，然后指向它看起来像的方法/函数。

有人可以向我解释其中的“负载”是什么吗？不在 CodeIgniter 上下文中，而是在一般 PHP 中。我将如何编写一个允许这样做的类？

我尝试了以下但它不起作用。

```
<?php

class myObject {

    private $x = 0;

    function amethod()
    {

       function embeddedFunc()
       {

            $this->x += 7;

            return $this->x;
       }

       return embeddedFunc();
    }
}

$object = new myObject();

echo $object->amethod->embeddedFunc();

?> 
```

当我看到这个时，我正试图围绕实际发生的事情来思考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:32:31.497

在这种情况下，负载是类的属性，它是具有`view()`功能的对象。例如：

```
class test {
    public $load;
    public function __construct() {
        $this->load = new test2();
    }
    public function step1() {
        $this->load->step3('Updated text');
    }
}
class test2 {
    public function step3($display_text) {
        echo $display_text;
    }
}
$tester = new test();
$tester->step1(); 
```

因为`load`它是一个对象的实例，您可以继续运行该实例的函数。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:43:16.500

在 PHP 中，*$this->*是访问类成员变量所必需的。这有点令人困惑，你必须严格地写*this->*，但另一方面你不必声明它。

```
 class Foo {

   function bar() {

      $this->myVariable = 8;   // this is OK

   } // bar() 

 } // class Foo 
```

所以*$this->load->view()*指的是当前对象的*load*属性，它保存了一个具有 view() 方法的对象。训练你的眼睛剪掉开头的*this->*并训练你的手总是写出来。就像你已经学会了总是写前导“$”标记一样。

# scala - Scala 升级过程，用于 IntelliJ 下的 Typesafe/Scala 堆栈？

> ID：14694315
> 
> 赞同：1
> 
> 时间：2013-02-04T19:45:35.677
> 
> 标签：scala, playframework, intellij-idea, scala-2.10, typesafe-stack

Scala 是一门很棒的语言。IntelliJ 12 与 Typesafe 堆栈（Scala、Akka 和 Play Framework）的集成同样令人印象深刻。

但是，IntelliJ下升级Scala版本的升级过程并不是特别清楚。我正在使用 Play 2.0、IntelliJ 12 和目前的 Scala 2.91。我第一次升级到 Scala 2.10 的尝试并不顺利：预先存在的 Play 项目仍然专注于使用 Scala 2.91 库和 2.91 编译器。尝试创建新的 Play 项目并执行“ide​​a”命令：为 2.91 生成生成的 IJ 项目文件。

即使我明确删除了 2.91 .jar 并添加了 2.10 .jar，看来我仍然坚持使用 2.91 Scala 编译器。只需要一种更简单的方法来升级 Scala，并且仍然可以在 IJ 12 下构建和启动完整的 Typesafe 堆栈......我只是还没有找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:16:42.630

要在 Play 中使用 Scala 2.10，您需要升级到 Play 2.1。

# string - 如何将 ASM 代码（操作码）转换为字符串

> ID：14694316
> 
> 赞同：0
> 
> 时间：2013-02-04T19:45:37.423
> 
> 标签：string, assembly, x86, disassembly, opcodes

如何在 PHP 中将汇编代码转换为这样的字符串：

```
$shellcode =
"\x33\xc9\x83\xe9\xde\xd9\xee\xd9\x74\x24\xf4\x5b\x81\x73\x13\xf4".
"\x47\xba\xa4\x83\xeb\xfc\xe2\xf4\x08\xaf\xfe\xa4\xf4\x47\x31\xe1".
"\xc8\xcc\xc6\xa1\x8c\x46\x55\x2f\xbb\x5f\x31\xfb\xd4\x46\x51\xed".
"\x7f\x73\x31\xa5\x1a\x76\x7a\x3d\x58\xc3\x7a\xd0\xf3\x86\x70\xa9".
"\xf5\x85\x51\x50\xcf\x13\x9e\xa0\x81\xa2\x31\xfb\xd0\x46\x51\xc2".
"\x7f\x4b\xf1\x2f\xab\x5b\xbb\x4f\x7f\x5b\x31\xa5\x1f\xce\xe6\x80".
"\xf0\x84\x8b\x64\x90\xcc\xfa\x94\x71\x87\xc2\xa8\x7f\x07\xb6\x2f".
"\x84\x5b\x17\x2f\x9c\x4f\x51\xad\x7f\xc7\x0a\xa4\xf4\x47\x31\xcc".
"\xc8\x18\x8b\x52\x94\x11\x33\x5c\x77\x87\xc1\xf4\x9c\xb7\x30\xa0".
"\xab\x2f\x22\x5a\x7e\x49\xed\x5b\x13\x24\xdb\xc8\x97\x47\xba\xa4"; 
```

我猜这是用 HEX 编写的 asm 代码的操作码。但如果是这样，我怎样才能转换像这些字符串这样的 asm 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:00:18.823

如果不需要使用 PHP，这可以在 Linux 控制台中通过使用例如轻松完成。[udis86 反汇编程序库](http://udis86.sourceforge.net/)`udcli`附带的反汇编程序。[您可以查看我对Disassembled file that contains big data or iscompressed](https://stackoverflow.com/questions/14470900/disassembling-file-that-contain-big-data-or-is-compressed/14471274#14471274)的回答。

对于您使用的这种特殊情况，例如。`sed`很好地将数据转换为可供以下人员使用的格式`udcli`：

```
$ echo '\x33\xc9\x83\xe9\xde\xd9\xee\xd9\x74\x24\xf4\x5b\x81\x73\x13\xf4". "\x47\xba\xa4\x83\xeb\xfc\xe2\xf4\x08\xaf\xfe\xa4\xf4\x47\x31\xe1". "\xc8\xcc\xc6\xa1\x8c\x46\x55\x2f\xbb\x5f\x31\xfb\xd4\x46\x51\xed". "\x7f\x73\x31\xa5\x1a\x76\x7a\x3d\x58\xc3\x7a\xd0\xf3\x86\x70\xa9". "\xf5\x85\x51\x50\xcf\x13\x9e\xa0\x81\xa2\x31\xfb\xd0\x46\x51\xc2". "\x7f\x4b\xf1\x2f\xab\x5b\xbb\x4f\x7f\x5b\x31\xa5\x1f\xce\xe6\x80". "\xf0\x84\x8b\x64\x90\xcc\xfa\x94\x71\x87\xc2\xa8\x7f\x07\xb6\x2f". "\x84\x5b\x17\x2f\x9c\x4f\x51\xad\x7f\xc7\x0a\xa4\xf4\x47\x31\xcc". "\xc8\x18\x8b\x52\x94\x11\x33\x5c\x77\x87\xc1\xf4\x9c\xb7\x30\xa0". "\xab\x2f\x22\x5a\x7e\x49\xed\x5b\x13\x24\xdb\xc8\x97\x47\xba\xa4";"' | sed 's/\\x/ /g' | sed 's/"//g' | sed 's/\.//g' | sed 's/;//g' | udcli -x -32 
```

# url-rewriting - 春季网址重写

> ID：14694318
> 
> 赞同：2
> 
> 时间：2013-02-04T19:45:40.900
> 
> 标签：url-rewriting

tukey.web.filters.urlrewrite.UrlRewriteFilter` 重写，但是

```
<urlrewrite>
    <rule>
        <from>^/ms-office$</from>
        <to>/office</to>
    </rule>
    <rule>
        <from>/ms-office/(^[0-9]+$)</from>
        <to>/office/eidt?id=$1</to>
    </rule>
</urlrewrite> 
```

当我进入`ms-office/10`一个 get`WARNING: No mapping found for HTTP request with URI [/s-mvc/ms-office/10] in DispatcherServlet with name 'config'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:01:27.813

如果第二个`from`应该匹配`/ms-office/10`，那么您错过`^`了第一个规则中的锚点。

# polymorphism - Laravel 4：保存多态关系的记录：未定义的方法 newQuery()

> ID：14694319
> 
> 赞同：5
> 
> 时间：2013-02-04T19:45:49.327
> 
> 标签：polymorphism, laravel, polymorphic-associations, laravel-4

我在 Laravel 4 中有一个多态关系，它按我想要的方式工作。我有另一个，当我尝试插入相关模型时它不起作用，即使它与第一个相同并且我以相同的方式使用它。

我有`Event`模型和`Article`模型：

```
// Article Model
class Article extends Eloquent {
    public function events() {
        return $this->morphMany('Event', 'eventable');
    }
    ...

// Event Model
class Event extends Eloquent {
    public function eventable() {
        return $this->morphTo();
    }
} 
```

用法：

```
$article = Article::find($article_id);
// insert
// neither of the following lines work
$article->events()->create(array("type" => "click"));
$article->events()->save(new Event(array("type" => "click"))); 
```

我犯了同样的错误：

```
Error: Call to undefined method Illuminate\Support\Facades\Event::newQuery() in
\app_path\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php line 383 
```

我究竟做错了什么？我对文章和照片有相同的情况，但是它可以工作（它也是多态关系）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T22:46:07.637

Event 可能是 Laravel 中的保留字。除非你命名它，否则我建议避免创建一个名为 Event 的类，因为它就像在 Laravel 核心中使用的一样。诸如活动之类的东西可能会作为替代方案。

# javascript - 将下拉菜单数组更改为没有 jQuery 的常规无序列表

> ID：14694328
> 
> 赞同：0
> 
> 时间：2013-02-04T19:46:36.277
> 
> 标签：javascript, arrays

我有一个 javascript 数组，可以在选择其名称（瀑布、日落、白树）时更改图像。它现在是下拉菜单的形式，但我想知道是否可以将其更改为常规的无序列表。我不想使用 jquery。

如果无法将数组更改为无序列表，是否有其他方法可以根据用户交互（onclick）更改 div 中的内容？即图像下方的三个不同链接。单击链接后，会将不同的图像加载到 div 中。这必须通过一个功能来完成。

HTML

```
 <body>

    <img src="images/photo1.jpg" name="sunset">

    <ul> 
<select onClick=imageSwap(this) name=cached>
    <option value=image1>Sunset</option>
    <option value=image2>Waterfall</option>
    <option value=image3>White Tree</option>
</select>
    </ul>

    </body> 
```

JAVASCRIPT

```
 if(document.images) {
    imageSwap = new Array();

    image1 = new Image()
    image1.src = "images/photo1.jpg"
    image2 = new Image()
    image2.src = "images/photo2.jpg"
    image3 = new Image()
    image3.src = "images/photo3.jpg"

    function imageSwap(list) {

    var img = list.options[list.selectedIndex].value; 

    document.sunset.src = eval(img + ".src");
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:00:43.670

您可以创建如下链接：

```
<a href="#" onclick="changeImg('image1.jpg')">Image 1</a>
<a href="#" onclick="changeImg('image2.jpg')">Image 2</a> 
```

和一个功能：

```
function changeImg(src) {
  document.getElementById("imgId").src = src;
} 
```

其中*imgId*是您的`<img>`元素的 id。

这是一个例子：

[http://jsfiddle.net/6WS2K/4/](http://jsfiddle.net/6WS2K/4/)

# java - Java：是否使用字段

> ID：14694329
> 
> 赞同：4
> 
> 时间：2013-02-04T19:46:36.943
> 
> 标签：java, object

我对在类似情况下何时使用字段以及何时不使用感到困惑：

**1）**我可以这样做：

```
public class myObject{

private int amount;

    public myObject(int amount) {

        this.amount = amount;
        doSomething();
    }

    private void doSomething(){
        //some code
    }
} 
```

**2）**或者：

```
public class myObject{

    public myObject(int amount) {

        doSomething(amount);
    }

    private void doSomething(int amount){
        //some code
    }
} 
```

第一个例子对我来说看起来更干净，但第二个自动告诉它`amount`不会在其他任何地方使用，而是在对象内部，因为它不是一个字段。无论如何，在我看来，它看起来有点像一些沉重的“乒乓”技术，尤其是当我想通过这样的代码传递许多对象和值时。

那么，即使我在对象之外不需要它们，我是否应该将构造函数/方法参数保存为字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:52:50.083

`amount`如果您在调用之后不需要`doSomething(amount)`，那将比您发布的前一个示例更可取。

如果您`amount`在稍后时刻成为对象的一部分，那么使用前一个“技术”是合乎逻辑的。

这是您可以遵循的经验法则：

如果该字段表示您的类中的终止状态，则将其设为字段。

如果该字段表示您班级中的瞬态，请使用后者的“技术”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:56:51.257

字段定义对象的结构。它是它所代表的实体的一个属性，可以是一个人的名字，也可以是一个帐户的货币，仅举一些例子。

它们定义了一个类的特定实例，并在一个组中定义了一个对象的当前状态。这些属性应该放在一个字段中，因为它们将被多次查询和更新。

您应该考虑该特定值有意义的上下文。如果它是与某个对象密切相关的东西，并且只要对象“存在”就应该坚持下去，那么它可以是一个场。否则，它可以只是一个方法或构造函数参数。

# ruby-on-rails - Rails - 没有路由匹配 {:controller=>"engage/home"} # <== 导航到 localhost:3000/engage 时出错

> ID：14694330
> 
> 赞同：1
> 
> 时间：2013-02-04T19:46:40.363
> 
> 标签：ruby-on-rails, ruby, routes

首先，事实：

当我导航到 localhost:3000/engage 时，我收到以下错误：

```
ActionController::RoutingError at /
No route matches {:controller=>"engage/home"} 
```

![错误图片](../Images/025eff0211324b5b27dd5d89ef8d44d9.png)

这是我的 routes.rb 文件：

```
Kt::Application.routes.draw do

  #resources :authentications

  resources :paths

  mount Engage::Engine => '/engage', :as => 'engage'

  resources :comments do
    member {post :forresource}
  end

  resources :resources do
      member { post :vote }
      collection {get :search}
    end

  devise_for :users

  resources :userResourceView
  resources :learningPaths
  get "home/index"
  devise_scope :user do
    get "/login" => "devise/sessions#new"

  end
  devise_for :user, :path => '', :path_names => {:sign_up => "register" }

  match '/user_profile', :to =>'users#index'
  get 'tags/:tag', to: 'resources#index', as: :tag

  match '/auth/:provider/callback' => 'authentications#create'
  match '/auth/:provider/failure', :to => 'authentications#failure'
  #match '/auth/:provider/callback?error_reason...', :to => 'profiles#failure'

  match '/resources', to: 'resources#create', :via => :post
  match 'contact' => 'contact#new', :as => 'contact', :via => :get
  match 'contact' => 'contact#create', :as => 'contact', :via => :post
  match '/forums' => 'forums#index'

  root to: 'home#index', :as => :home 
```

当我运行 rake 路线时，我得到以下信息：

```
155-99-191-20:KnowledgeThief dainewinters$ rake routes
                   paths GET    /paths(.:format)                     paths#index
                         POST   /paths(.:format)                     paths#create
                new_path GET    /paths/new(.:format)                 paths#new
               edit_path GET    /paths/:id/edit(.:format)            paths#edit
                    path GET    /paths/:id(.:format)                 paths#show
                         PUT    /paths/:id(.:format)                 paths#update
                         DELETE /paths/:id(.:format)                 paths#destroy
                  engage        /engage                              Engage::Engine
     forresource_comment POST   /comments/:id/forresource(.:format)  comments#forresource
                comments GET    /comments(.:format)                  comments#index
                         POST   /comments(.:format)                  comments#create
             new_comment GET    /comments/new(.:format)              comments#new
            edit_comment GET    /comments/:id/edit(.:format)         comments#edit
                 comment GET    /comments/:id(.:format)              comments#show
                         PUT    /comments/:id(.:format)              comments#update
                         DELETE /comments/:id(.:format)              comments#destroy
           vote_resource POST   /resources/:id/vote(.:format)        resources#vote
        search_resources GET    /resources/search(.:format)          resources#search
               resources GET    /resources(.:format)                 resources#index
                         POST   /resources(.:format)                 resources#create
            new_resource GET    /resources/new(.:format)             resources#new
           edit_resource GET    /resources/:id/edit(.:format)        resources#edit
                resource GET    /resources/:id(.:format)             resources#show
                         PUT    /resources/:id(.:format)             resources#update
                         DELETE /resources/:id(.:format)             resources#destroy
        new_user_session GET    /users/sign_in(.:format)             devise/sessions#new
            user_session POST   /users/sign_in(.:format)             devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)            devise/sessions#destroy
           user_password POST   /users/password(.:format)            devise/passwords#create
       new_user_password GET    /users/password/new(.:format)        devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)       devise/passwords#edit
                         PUT    /users/password(.:format)            devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)              devise/registrations#cancel
       user_registration POST   /users(.:format)                     devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)             devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                devise/registrations#edit
                         PUT    /users(.:format)                     devise/registrations#update
                         DELETE /users(.:format)                     devise/registrations#destroy
  userResourceView_index GET    /userResourceView(.:format)          userResourceView#index
                         POST   /userResourceView(.:format)          userResourceView#create
    new_userResourceView GET    /userResourceView/new(.:format)      userResourceView#new
   edit_userResourceView GET    /userResourceView/:id/edit(.:format) userResourceView#edit
        userResourceView GET    /userResourceView/:id(.:format)      userResourceView#show
                         PUT    /userResourceView/:id(.:format)      userResourceView#update
                         DELETE /userResourceView/:id(.:format)      userResourceView#destroy
           learningPaths GET    /learningPaths(.:format)             learningPaths#index
                         POST   /learningPaths(.:format)             learningPaths#create
        new_learningPath GET    /learningPaths/new(.:format)         learningPaths#new
       edit_learningPath GET    /learningPaths/:id/edit(.:format)    learningPaths#edit
            learningPath GET    /learningPaths/:id(.:format)         learningPaths#show
                         PUT    /learningPaths/:id(.:format)         learningPaths#update
                         DELETE /learningPaths/:id(.:format)         learningPaths#destroy
              home_index GET    /home/index(.:format)                home#index
                   login GET    /login(.:format)                     devise/sessions#new
        new_user_session GET    /sign_in(.:format)                   devise/sessions#new
                         POST   /sign_in(.:format)                   devise/sessions#create
    destroy_user_session DELETE /sign_out(.:format)                  devise/sessions#destroy
                         POST   /password(.:format)                  devise/passwords#create
                         GET    /password/new(.:format)              devise/passwords#new
                         GET    /password/edit(.:format)             devise/passwords#edit
                         PUT    /password(.:format)                  devise/passwords#update
                         GET    /cancel(.:format)                    devise/registrations#cancel
                         POST   /                                    devise/registrations#create
                         GET    /register(.:format)                  devise/registrations#new
                         GET    /edit(.:format)                      devise/registrations#edit
                         PUT    /                                    devise/registrations#update
                         DELETE /                                    devise/registrations#destroy
            user_profile        /user_profile(.:format)              users#index
                     tag GET    /tags/:tag(.:format)                 resources#index
                                /auth/:provider/callback(.:format)   authentications#create
                                /auth/:provider/failure(.:format)    authentications#failure
                         POST   /resources(.:format)                 resources#create
                 contact GET    /contact(.:format)                   contact#new
                 contact POST   /contact(.:format)                   contact#create
                  forums        /forums(.:format)                    forums#index
                    home        /                                    home#index

Routes for Engage::Engine:
                       root        /                                                 engage/topics#index
             topic_comments POST   /topics/:topic_id/comments(.:format)              engage/comments#create
          new_topic_comment GET    /topics/:topic_id/comments/new(.:format)          engage/comments#new
              topic_comment DELETE /topics/:topic_id/comments/:id(.:format)          engage/comments#destroy
                 topic_vote GET    /topics/:topic_id/vote(.:format)                  engage/votes#create
                            POST   /topics/:topic_id/vote(.:format)                  engage/votes#create
                            DELETE /topics/:topic_id/vote(.:format)                  engage/votes#destroy
unsubscribe_topic_following GET    /topics/:topic_id/following/unsubscribe(.:format) engage/followings#destroy
            topic_following GET    /topics/:topic_id/following(.:format)             engage/followings#create
                            POST   /topics/:topic_id/following(.:format)             engage/followings#create
                            DELETE /topics/:topic_id/following(.:format)             engage/followings#destroy
                     topics GET    /topics(.:format)                                 engage/topics#index
                            POST   /topics(.:format)                                 engage/topics#create
                  new_topic GET    /topics/new(.:format)                             engage/topics#new
                 edit_topic GET    /topics/:id/edit(.:format)                        engage/topics#edit
                      topic GET    /topics/:id(.:format)                             engage/topics#show
                            PUT    /topics/:id(.:format)                             engage/topics#update
                            DELETE /topics/:id(.:format)                             engage/topics#destroy
        set_intended_action POST   /set_intended_action(.:format)                    engage/application#set_intended_action
          user_user_profile PUT    /users/:user_id/user_profile(.:format)            engage/user_profiles#update
                      users GET    /users(.:format)                                  engage/users#index 
```

此外，该错误还提到了 app/views/shared/_header.html.erb。这是那个文件：

```
<div id="header">

    <div id="logoText">

        <%= link_to "Knowledge Thief", url_for(:action=>"index", :controller=>"home") %> 
    </div>

    <div class="signin">

    <a href="#">

        <div class="notifications unread">

            3

        </div>

    </a>

       <% unless current_user.nil? %>
           <%= link_to "#{current_user.email}", url_for(:action=>"user") %>
       <% else %>
           <%= link_to "Sign In", url_for(current_user) %>
       <% end %>
        <%= link_to image_tag("downArrow.png", :style => "height:5px;margin-left:3px;vertical-align:middle;"), url_for(current_user) %> 
    </div>

 </div> 
```

到目前为止我已采取的步骤（将更新）：

1.  确保捆绑安装
2.  运行 rake db:reset
3.  运行 rake db:migrate
4.  问我的团队两天前到现在之间可能发生了什么。我将查看 git log 等。

现在，我可以看到 /engage 被路由到了 engage，但是这个 /home 是从哪里来的呢？/engage 不应该只是去参与/topics#index 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:18:11.307

您的主应用程序中是否设置了家庭控制器？原因在于**_header.html.erb**文件，您在该文件中使用了指向主控制器的索引操作的链接。

我猜您正在使用主应用程序的布局/模板来呈现引擎的视图。_header.html.erb也是渲染引擎视图​​的模板的一部分**。**

rails 中的可挂载引擎的工作方式是，如果您想访问主应用程序的控制器/动作的路由，您需要调用**main_app**。因此，您可以将**link_to**行更改为如下所示：

```
<%= link_to "Knowledge Thief", main_app.home_path %> 
```

# c# - 如何正确处理多线程/异步应用程序中的对象？

> ID：14694332
> 
> 赞同：0
> 
> 时间：2013-02-04T19:46:42.353
> 
> 标签：c#, multithreading, sockets

我有一个使用带有开始/结束设计模式的异步套接字的应用程序。

每当我收到一个新连接时，我都会创建一个对象并将其存储在一个集合中。该对象还在其自身中存储套接字连接，并将在开始方法“对象状态”中传递。

现在服务器正在异步运行、发送、接收等，在任何给定时间为一个对象执行多个代码路径。

我不明白的是：如果我调用一个传入当前对象和另一个线程的函数，该对象刚刚被释放，那么当前在执行代码中的另一个对象会发生什么。

编辑：

例如）如果您查看调用 doSomthing() 的 ReadDataCallback()。如果它要使用我的“设备”对象调用 doSomthing()，但相应的设备在 SendCallback() 中有异常。即将调用 doSomthing() 的设备对象处于什么状态？

这是一个代码示例。

```
void waitForData(MyDevice device)
{
    try
    {
        if (device.SocketState.IsSSL)
        {
            device.SocketState.sslStream.BeginRead(device.SocketState.DataBuffer, 0, device.SocketState.DataBuffer.Length, m_readDataCallback, device);
        }
        else
        {
            device.SocketState.DeviceSocket.BeginReceive(device.SocketState.DataBuffer, 0, device.SocketState.DataBuffer.Length, SocketFlags.None, m_readDataCallback, device);
        }
    }
    catch (SocketException se)
    {
        DisconnectAndRemove(device);
    }
}

public void ReadDataCallback(IAsyncResult ar)
{
    MyDevice device = (MyDevice)ar.AsyncState;
    try
    {
        Queue<kustompacket> qps = null;
        int iRx = 0;

        if (device.SocketState.IsSSL)
        {
            iRx = device.SocketState.sslStream.EndRead(ar);
            if (iRx == 0)
            {
                DisconnectAndRemove(device);
            }
            else if (iRx > 0)
            {
                device.CircularBuff.Add(iRx, device.SocketState.DataBuffer);
                qps = device.CircularBuff.ReadPackets();
                doSomthing(device);
            }
        }
        else
        {
            if (device.SocketState.DeviceSocket != null)
            {
                if (device.SocketState.DeviceSocket.Connected)
                {
                    // Read data from the client socket.
                    iRx = device.SocketState.DeviceSocket.EndReceive(ar);
                    if (iRx == 0)
                    {
                        DisconnectAndRemove(device);
                    }
                    else if (iRx > 0)
                    {
                        device.CircularBuff.Add(iRx, device.SocketState.DataBuffer);
                        qps = device.CircularBuff.ReadEncryptedPackets(device.SocketState.SessionID);
                        doSomthing(device);
                    }
                }
            }
        }

        if (qps != null)
        {
            MyDelegate meh = new MyDelegate(HandleDataReceived);
            meh.BeginInvoke(device, qps, null, null);
        }

        if (iRx != 0)
        {
            waitForData(device);
        }
    }
    catch (ObjectDisposedException ode)
    {
        //Socket has been closed
        //DisconnectAndRemove(device);
    }
    catch (SocketException se)
    {
        //if (se.ErrorCode == 10054) // Error code for Connection reset by peer
        //{
        DisconnectAndRemove(device);
        //}
    }
    catch (Exception ex)
    {
        DisconnectAndRemove(device);
    }
}

public void SendCallback(IAsyncResult ar)
{
    MyDevice device = (MyDevice)ar.AsyncState;
    try
    {
        // Complete sending the data to the remote device.
        if (device.SocketState.IsSSL)
        {
            device.SocketState.sslStream.EndWrite(ar);
        }
        else
        {
            int bytesSent = device.SocketState.DeviceSocket.EndSend(ar);
        }
        device.ResetAge();
    }
    catch (SocketException se)
    {
        DisconnectAndRemove(device);
    }
    catch (Exception ex)
    {
    }

    if (device.SocketState.IsSSL)
    {
        device.Write();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:54:50.080

如果一个对象被部署在一个线程上，它就会被部署在所有线程上。如果在其他线程处理它之后对它执行任何操作，它应该（但不保证）抛出 ObjectDisposedException。

[http://msdn.microsoft.com/en-us/library/system.objectdisposedexception.aspx](http://msdn.microsoft.com/en-us/library/system.objectdisposedexception.aspx)

如果您在一个线程上处理一个对象，而另一个线程可能期望使用它，那么您做错了。考虑以确定的方式控制单个线程上对象的生命周期。

# php - 在控制器中包含自定义异常文件

> ID：14694333
> 
> 赞同：0
> 
> 时间：2013-02-04T19:46:44.947
> 
> 标签：php, codeigniter

我正在尝试在我的模型和控制器中使用异常。在`application`, 目录中，我创建了一个目录`Exceptions`，其中包含文件“CustomException1.php”和“CustomException2.php”中的一些异常类。

我定义`MY_Controller`在`application/core`

```
class MY_Controller extends CI_Controller {

    public function __construct() {
        parent::__construct();      

        // include Exception files
        require_once(APPPATH . 'Exceptions/CustomException1.php');
        require_once(APPPATH . 'Exceptions/CustomException2.php');
    }

} 
```

在我的控制器中`Test`：

```
class Test extends MY_Controller {
   public function index() {
      try {
         throw new CustomException1('This is a custom exception');
      } catch (CustomException1 $e) {
         $this->output->set_status_header('500');
         echo $e->message;
      }
} 
```

现在，我希望这可以工作，因为我需要定义异常类的所有文件，但我仍然收到一条错误消息

`Class CustomException1 not found on line xx`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:19:22.307

无论出于何种原因，包括 Exceptions 目录中的文件都无法在 CI 中工作。将它们放在`libraries`目录中并将它们加载到 using 中`$this->load->library()`也不会起作用，因为 CI 会在加载时尝试实例化库，这当然是我不想要的。

我最终把它们放在一个目录`exceptions`中`helpers`，并在`MY_Controller`使用时加载它们`$this->load->helper('Exceptions/CustomException');`。

需要注意的是，在加载帮助程序时，CI 会将整个路径转换为小写并附`_helper`加到文件名的末尾，因此我的异常类在服务器上的确切路径是

`APPPATH . 'helpers/exceptions/customexception_helper.php'`

这是我修改后的基类控制器：

```
class MY_Controller extends CI_Controller {

    public function __construct() {
        parent::__construct();      

        $this->load->helper("Exceptions/CustomException1.php");
        // includes file APPPATH . 'helpers/exceptions/customexception1_helper.php'

        $this->load->helper("Exceptions/CustomException2.php");
        // includes file APPPATH . 'helpers/exceptions/customexception2_helper.php'
    }
} 
```

一旦`MY_Controller`使用`MY_Model`.

*PS - 我对这个解决方案并不完全满意，而且看起来有点 hack-y，但这可能是将异常集成到 CodeIgniter 的唯一方法。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:12:50.187

```
throw new CustomException1('This is a custom exception'); 
```

并捕获 (CustomException $e)

tbh，这更像是一个错字。抛出的异常`CustomException1`应该是`CustomException`

# c# - Lambda 过滤器 2 个对象深

> ID：14694336
> 
> 赞同：1
> 
> 时间：2013-02-04T19:46:55.377
> 
> 标签：c#, asp.net, lambda

我有一个需要过滤 2 个级别的 lambda 表达式。我有一个名为“面板”的父级，一个面板可以包含许多“文档”，我需要返回所有面板及其相关文档，这些文档具有某种文档类型的文档......作为下拉列表值传入。

这就是我所拥有的：（出于显示目的，我对其进行了一些修改）

```
using (MyEntities ctx = new MyEntities())
{
    var query = ctx.Panels.Where(p => p.blah blah blah).ToList();

    if (DDL.SelectedValue!= string.Empty)
    {
        query = query.Where(p => p.Documents.Any(d => d.DocumentTypeID ==  DDL.SelectedValue.ToInt32Extension())).ToList();
    }             
    rptPanelReviews.DataSource = query
    rptPanelReviews.DataBind();
} 
```

...如您所见，我正在使用`.Any()`Documents 对象的方法，但它返回不相关的信息。该`All()`方法不返回任何内容，我找不到任何其他方法可以返回具有特定文档类型的所有面板和文档。

有谁知道该怎么做？甚至可能吗？您可以在 Where 语句中执行此类查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:53:13.587

未经测试，但这样的事情应该让你开始？

```
var res = from p in ctx.Panels
          where p.id = blah
          select new
          {
             p.Name,
             Docs = p.Where(d => d.DocumentTypeID ==  DDL.SelectedValue.ToInt32Extension())
          } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:57:23.297

您的查询似乎正确（它返回所有面板，其中至少有一个所需类型的文档），但第二次过滤当前在内存中执行。我建议您删除`ToList()`直到将查询结果分配为数据源的时间：

```
using (MyEntities ctx = new MyEntities())
{
    var query = ctx.Panels.Where(p => p.blah blah blah);

    if (DDL.SelectedValue != String.Empty)
    {
        var docTypeID = DDL.SelectedValue.ToInt32Extension();
        query = query.Where(p => p.Documents.Any(d => d.DocumentTypeID == docTypeID));
    }             

    rptPanelReviews.DataSource = query.ToList();
    rptPanelReviews.DataBind();
} 
```

更新：您无法使用 Linq 删除未分配类型的文档，您只能使用过滤后的文档创建新对象

```
if (DDL.SelectedValue != String.Empty)
{
   var docTypeID = DDL.SelectedValue.ToInt32Extension();
   rptPanelReviews.DataSource =
           query.Where(p => p.Documents.Any(d => d.DocumentTypeID == docTypeID))
                .Select(p => {
                    // copy required properties
                    Documents = p.Documents
                                 .Where(d => d.DocumentTypeID == docTypeID)
                                 .ToList()
                }).ToList();
} 
```

# hibernate - 不使用主键的 JPA 查询

> ID：14694339
> 
> 赞同：0
> 
> 时间：2013-02-04T19:47:06.553
> 
> 标签：hibernate, jpa

使用 JPA2.0（通过 Hibernate 4），我可以使用 EntityManager.find(java.lang.Class entityClass, java.lang.Object primaryKey) 在数据库中查询查询条件是主键的记录。但是如果查询条件不是主键（例如，选择所有城市值为“伦敦”的记录），我是否必须创建一个 TypedQuery 并显式提供 SQL 语句？有什么我应该采用的最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:57:35.077

[JPA Criteria API](http://docs.oracle.com/javaee/6/tutorial/doc/gjitv.html)为您提供了构建自己的动态查询（使用 jpql 或 sql）无法获得的编译时安全级别。尤其是当很多条件开始出现时（可选字段、条件子查询……），很容易出错。

Criteria API 编写起来可能更复杂（尤其是对于简单查询），您需要围绕标准 API 创建一些管道代码，以使其成为真正动态且易于使用的语言。它并没有真正提供开箱即用的功能。

有些人喜欢使用 Criteria API，而另一些人则喜欢命名查询/JPQL。

# java - Hibernate 逆向工程，在 Spring MVC 项目中使用

> ID：14694342
> 
> 赞同：0
> 
> 时间：2013-02-04T19:47:22.053
> 
> 标签：java, spring, hibernate, spring-mvc

我刚刚使用 Hibernate 逆向工程对我的项目进行了逆向工程，我看到它创建了许多 POJO java 类和许多 *.hbm.xml 文件。

过去我的 java 代码是这样的：

```
@Entity
@Table(name = "enrollment")
public class Enrollment {

    @Id
    @Column(name = "enrollment_id")
    private Integer enrollment_id;

    @Column(name = "file_num")
    private String file_num;

    @Column(name = "eis_num")
    private String eis_num;

    @Column(name = "enrollment_type_id")
    private String enrollment_type_id;

    @Column(name = "ssn")
    private String ssn; 

    @Column(name = "first_name")
    private String first_name;

    @Column(name = "last_name")
    private String last_name;

    @Column(name = "middle_initial")
    private String middle_initial;

    @Column(name = "contact_id")
    private Integer contact_id;

    @Column(name = "retired_date")
    private String retired_date;

    @Column(name = "deferred_date")
    private String deferred_date;

    @Column(name = "school_id")
    private String school_id;

    @Column(name = "borough_id")
    private String borough_id;

    @Column(name = "profile_id")
    private String profile_id;

    @Column(name = "current_status")
    private String current_status;

    @Column(name = "last_update")
    private String last_update;

    @Column(name = "entry_date")
    private String entry_date;

    public void setProfile_id(String profile_id) {
        this.profile_id = profile_id;
    }   

    public Integer getEnrollment_id() {
        return enrollment_id;
    }

    public void setEnrollment_id(Integer enrollment_id) {
        this.enrollment_id = enrollment_id;
    }

    public String getFile_num() {
        return file_num;
    }

    public void setFile_num(String file_num) {
        this.file_num = file_num;
    }

    public String getEis_num() {
        return eis_num;
    }

    public void setEis_num(String eis_num) {
        this.eis_num = eis_num;
    }

    public String getEnrollment_type_id() {
        return enrollment_type_id;
    }

    public void setEnrollment_type_id(String enrollment_type_id) {
        this.enrollment_type_id = enrollment_type_id;
    }

    public String getSsn() {
        return ssn;
    }

    public void setSsn(String ssn) {
        this.ssn = ssn;
    }

    public String getFirst_name() {
        return first_name;
    }

    public void setFirst_name(String first_name) {
        this.first_name = first_name;
    }

    public String getLast_name() {
        return last_name;
    }

    public void setLast_name(String last_name) {
        this.last_name = last_name;
    }

    public String getMiddle_initial() {
        return middle_initial;
    }

    public void setMiddle_initial(String middle_initial) {
        this.middle_initial = middle_initial;
    }

    public Integer getContact_id() {
        return contact_id;
    }

    public void setContact_id(Integer contact_id) {
        this.contact_id = contact_id;
    }

    public String getRetired_date() {
        return retired_date;
    }

    public void setRetired_date(String retired_date) {
        this.retired_date = retired_date;
    }

    public String getDeferred_date() {
        return deferred_date;
    }

    public void setDeferred_date(String deferred_date) {
        this.deferred_date = deferred_date;
    }

    public String getSchool_id() {
        return school_id;
    }

    public void setSchool_id(String school_id) {
        this.school_id = school_id;
    }

    public String getBorough_id() {
        return borough_id;
    }

    public void setBorough_id(String borough_id) {
        this.borough_id = borough_id;
    }

    public String getCurrent_status() {
        return current_status;
    }

    public void setCurrent_status(String current_status) {
        this.current_status = current_status;
    }

    public String getLast_update() {
        return last_update;
    }

    public void setLast_update(String last_update) {
        this.last_update = last_update;
    }

    public String getEntry_date() {
        return entry_date;
    }

    @Override
    public String toString() {
        return "Enrollment [enrollment_id=" + enrollment_id + ", file_num="
                + file_num + ", eis_num=" + eis_num + ", enrollment_type_id="
                + enrollment_type_id + ", ssn=" + ssn + ", first_name="
                + first_name + ", last_name=" + last_name + ", middle_initial="
                + middle_initial + ", contact_id=" + contact_id
                + ", retired_date=" + retired_date + ", deferred_date="
                + deferred_date + ", school_id=" + school_id + ", borough_id="
                + borough_id + ", profile_id=" + profile_id
                + ", current_status=" + current_status + ", last_update="
                + last_update + ", entry_date=" + entry_date
                + ", getEnrollment_id()=" + getEnrollment_id()
                + ", getFile_num()=" + getFile_num() + ", getEis_num()="
                + getEis_num() + ", getEnrollment_type_id()="
                + getEnrollment_type_id() + ", getSsn()=" + getSsn()
                + ", getFirst_name()=" + getFirst_name() + ", getLast_name()="
                + getLast_name() + ", getMiddle_initial()="
                + getMiddle_initial() + ", getContact_id()=" + getContact_id()
                + ", getRetired_date()=" + getRetired_date()
                + ", getDeferred_date()=" + getDeferred_date()
                + ", getSchool_id()=" + getSchool_id() + ", getBorough_id()="
                + getBorough_id() + ", getCurrent_status()="
                + getCurrent_status() + ", getLast_update()="
                + getLast_update() + ", getEntry_date()=" + getEntry_date()
                + ", getClass()=" + getClass() + ", hashCode()=" + hashCode()
                + ", toString()=" + super.toString() + "]";
    }

    public void setEntry_date(String entry_date) {
        this.entry_date = entry_date;
    }

} 
```

但是 Hibernate 逆向工程创建的代码没有任何 @Entity、@Table 或 @Column 标记，看起来所有映射都在 hbm.xml 中。如何在 Spring MVC 项目中使用它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:59:10.337

您可以使用 hbm.xml 文件，将其包含在 applicationContext 中并在项目中使用它。唯一的区别是所有映射都将存在于 hbm 文件中。正如您在代码中将它们作为注释一样。

您的应用程序上下文应如下所示：

```
 <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="myDataSource" />
        <property name="mappingResources">
            <list>
                          <!-- All your hbms --><value>yourHbmFile.hbm.xml</value>

            </list>
        </property>
..
.
</bean> 
```

此外，如果您想映射一个包含所有 hbm 的目录，您可以使用：

```
<property name="mappingDirectoryLocations" value="classpath:org/../hibernate/model" /> 
```

# xml - Google Checkout“XML 代码和发送客户端到服务器”Ruby on Rails

> ID：14694346
> 
> 赞同：0
> 
> 时间：2013-02-04T19:47:28.893
> 
> 标签：xml, ruby-on-rails-3.2, google-checkout

我试图为我的网站创建一个谷歌结帐付款。在这个链接

> [https://developers.google.com/checkout/developer/interactive_demo](https://developers.google.com/checkout/developer/interactive_demo)

我创建了我的代码的演示，这是我的选项

![在此处输入图像描述](../Images/028b1cdb68531194d6d01bfaa7fa6c0a.png)

然后页面生成以下代码：

```
 <!-- Sell digital goods with description-based delivery of download instructions (with tax, no shipping) -->
  <?xml version="1.0" encoding="UTF-8"?>
  <checkout-shopping-cart xmlns="http://checkout.google.com/schema/2">
    <shopping-cart>
      <items>
        <item>
          <item-name>Super Software 5000</item-name>
          <item-description>Super Software 5000 improves download speeds.</item-description>
          <unit-price currency="USD">1.00</unit-price>
          <quantity>1</quantity>

          <digital-content>
            <display-disposition>OPTIMISTIC</display-disposition>
            <description>
              It may take up to 24 hours to process your new storage. You will
              be able to see your increased storage on your 
              &lt;a href=&quot;http://login.example.com&quot;&gt;account page&lt;/a&gt;.
            </description>
          </digital-content>

        </item>
      </items>
    </shopping-cart>
    <checkout-flow-support>
      <merchant-checkout-flow-support/>
    </checkout-flow-support>
  </checkout-shopping-cart>

  <!-- No tax code -->

  <!-- No shipping code -->
You need to encode and sign the above XML code before posting it. 
```

谁能向我解释我必须将这个xml代码放在哪里我必须把它放在我的rails项目中？？？？

我知道这段代码，进入我的视野，但我必须把 XML 放在哪里？？？谢谢你的帮助

```
<form method="POST"
      action="https://sandbox.google.com/checkout/api/checkout/v2/checkout/Merchant/REPLACE_WITH_YOUR_SANDBOX_MERCHANT_ID">

  <input type="hidden" name="cart" value="REPLACE_WITH_ENCODED_CART">
  <input type="hidden" name="signature" value="REPLACE_WITH_SIGNATURE">

  <!-- Button code -->
  <input type="image" name="Google Checkout"
       alt="Fast checkout through Google"
       src="http://sandbox.google.com/checkout/buttons/checkout.gif?merchant_id=REPLACE_WITH_YOUR_SANDBOX_MERCHANT_ID&w=180&h=46&style=white&variant=text&loc=en_US"
       height="46"
       width="180">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:48:09.527

1.  该部分向您展示了[您需要生成](https://developers.google.com/checkout/developer/Google_Checkout_XML_API#create_checkout_cart)`XML`什么（XML 代表您的`checkout-shopping-cart`）（使用任何平台/语言，在您的情况下为 RR）、base64 编码并最终为其创建签名（您还将对其进行 base64 编码）。`HMAC-SHA-1`

2.  该`HTML`部分向您展示了将 base64 编码的 XML 和签名放在哪里。在这种情况下，它直接`HTML FORM POST`指向 Google - 请注意占位符：

    *   `<input type="hidden" name="cart" value="REPLACE_WITH_ENCODED_CART">`
    *   `<input type="hidden" name="signature" value="REPLACE_WITH_SIGNATURE">`

# image - 图片字段不包含字典

> ID：14694347
> 
> 赞同：5
> 
> 时间：2013-02-04T19:47:29.430
> 
> 标签：image, facebook-graph-api, dictionary

我正在努力为路线图中的一项变化做准备（[http://developers.facebook.com/roadmap/](http://developers.facebook.com/roadmap/)）

> “图片连接/字段可能返回一个字典我们将在访问对象的/图片连接并指定回调属性、redirect=false 参数或获取图片字段作为较大 JSON 响应的一部分。”

我已在我的应用设置中启用迁移。到目前为止，我无法在图片字段中获得包含字典的响应。我已经测试了“me/home”，它应该符合更大的 JSON 响应，并且我还使用回调和重定向参数进行了测试。

还有更多在图片字段中返回字典的想法或示例调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:05:25.307

使用带有“redirect=false”的公共页面配置文件的图片连接的示例返回页面的字典。我想象的用于页面的图像不够大，无法具有多种尺寸，但字典确实返回“is_silhouette”：false。

见：[https ://developers.facebook.com/tools/explorer?method=GET&path=anotherfeed%2Fpicture%3Fredirect%3Dfalse](https://developers.facebook.com/tools/explorer?method=GET&path=anotherfeed%2Fpicture%3Fredirect%3Dfalse)

# gwt - eclipse juno 无法“登录”到谷歌

> ID：14694348
> 
> 赞同：1
> 
> 时间：2013-02-04T19:47:33.663
> 
> 标签：gwt, eclipse-plugin, google-eclipse-plugin

我无法从我的 eclipse Juno 安装中“登录到 Google”。单击右下方面板上标题为“登录 Google”的框会打开一个新窗口。有时那个窗口有谷歌登录屏幕，有时它是空白的。当它确实显示登录屏幕时，我输入数据并且下一个屏幕是空白的。

这是在 windows 7 64 位操作系统上，我尝试了 eclipse 内部浏览器、默认系统浏览器、IE 并添加了 Chrome（我的普通浏览器）。

谢谢，

乔

# javascript - 使用 JavaScript 更改多个元素悬停背景颜色？

> ID：14694355
> 
> 赞同：0
> 
> 时间：2013-02-04T19:47:47.373
> 
> 标签：javascript, html, css

我现在使用多个 ID 和相应的每个 ID 的 CSS 属性来完成这项工作。我宁愿让它是自动的。所有链接都显示为块并彼此相邻浮动以创建平铺外观。例如：

```
<a href="#" id="spacetile1">Link 1</a>
<a href="#" id="spacetile2">Link 2</a>
<a href="#" id="spacetile3">Link 3</a>
<a href="#" id="spacetile4">Link 4</a>

#spacetile1 {
background-color:#FFF;}

#spacetile1:hover {
background-color:#000;} .... so on and so forth for all spacetiles 
```

我要做的是使用一些 if 语句根据默认背景颜色的属性更改悬停颜色，以节省查找相应品牌颜色的时间和准确性。

```
if .spacetile(background-color) === #FFF
then .spacetile:hover(background-color) = #000 
```

我想为一定数量的颜色做到这一点，所以我所要做的就是编码我希望该特定图块的背景颜色，并且悬停背景将由脚本处理。

我已经研究过 getElementById 但是我仍然会使用多个 ID 而不是一个类，而且我读到的关于 getElementsByClassName 的所有内容都说它不支持跨浏览器。

想知道是否有人对简单性和效率有任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:50:22.237

为什么不使用 CSS 类：

```
<a href="#" id="spacetile1" class="spacetile">...</a>
<a href="#" id="spacetile2" class="spacetile">...</a>

<style>
.spacetile { background-color: #FFF; }
.spacetile:hover { background-color: #000; }
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T19:56:53.593

同一个普通**班**。

```
<a href="#" id="spacetile1" class="space">Link 1</a>
<a href="#" id="spacetile2" class="space">Link 2</a>
<a href="#" id="spacetile3" class="space">Link 3</a>
<a href="#" id="spacetile4" class="space">Link 4</a> 
```

使用**JQuery** - [JQuery 鼠标事件](http://api.jquery.com/category/events/mouse-events/)

```
$(".space").mouseover(function(){

      if($(this).css('background-color')=='#FFF000')
      {
          $(this).css('background-color','#000FFF');
      }
      //else if else if and so on...
});

$(".space").mouseout(function(){

      if($(this).css('background-color')=='#FFF000')
      {
          $(this).css('background-color','#000FFF');
      }
      //else if else if and so on...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:20:35.853

这个问题建立在一个错误的假设之上。`getElementsByClassName`是跨浏览器的，除了`IE<=8`. 参见[http://caniuse.com/#feat=getelementsbyclassname](http://caniuse.com/#feat=getelementsbyclassname)（如果需要支持`IE<=8`，可以仿造如下）：

```
function compatGetElementsByClassName(class, tag) {
  if (document.getElementsByClassName) {
    //Use native version
    return document.getElementsByClassName(class);
  } else {
    //Fake it
    i = 0;
    subset = (typeof tag !== 'undefined')?document.getElementsByTagName(tag):document.all;
    while (element = subset[i++]) {
      if (element.className == class) {
        //your code here
      }
    }
  }
} 
```

只需输入类名称和（可选）标签名称（在您的情况下为“a”）。如果你不给标签名，它会默认为`document.all`哪个是非常低效的。

# css - Magento Css 版本控制

> ID：14694359
> 
> 赞同：2
> 
> 时间：2013-02-04T19:47:50.280
> 
> 标签：css, magento, versioning

想知道是否有人已经完成/知道如何完成此功能： [http ://code.marksserver.co.uk/magento/css-magento/magento-add-css-versioning/1045/](http://code.marksserver.co.uk/magento/css-magento/magento-add-css-versioning/1045/)

我已经在我的 head.php 文件中实现了它 - 我看到修改后的 css 文件名最后带有 ?version=1.0.0 - 但是每次我更改并保存我的 css 文件时，版本号都没有改变......

我是否完全错过了这条船，我需要做更多的改变吗？谢谢您的帮助！- 克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:21:47.567

也许这就是你要找的；[http://www.fabrizio-branca.de/automatisches-versionieren-von-javascript-und-css-dateien-in-magento.html](http://www.fabrizio-branca.de/automatisches-versionieren-von-javascript-und-css-dateien-in-magento.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T14:28:42.250

您链接到的解决方案需要您手动更改要添加到 url 的版本号。

我整理了一些在 Magento 中使用默认 css 合并的东西，但将最近修改的文件的时间戳附加到文件名中。

[http://smith-web.net/2013/02/09/magento-css-auto-versioning/](http://smith-web.net/2013/02/09/magento-css-auto-versioning/)

听起来和上面 Fabrizo 链接的那个很相似，我没有从博客文章中下载他的代码，但找到了他的 git 存储库，并且似乎自上面的博客文章以来已经更新。看起来他添加了 CDN 支持，以及自那篇帖子以来的一些其他功能，所以你可能也想检查一下。[https://github.com/fbrnc/Aoe_JsCssTstamp](https://github.com/fbrnc/Aoe_JsCssTstamp)

# php - php mysql有条件地将行插入到不同的表中

> ID：14694360
> 
> 赞同：0
> 
> 时间：2013-02-04T19:47:59.857
> 
> 标签：php, mysql

我根据条件在两个不同的表中插入一行。

比方说，我们有一个表`stories`，其中有 2 个字段正在考虑中：
( `story_id and comments_count`)

和其他 2 个表：

1.  `regcomments (comment_id, story_id, comment_text)`
2.  `unregcomments (comment_id, story_id, comment_text)`

现在，在为 any 插入任何新评论之前`story_id`，我只想检查是否`comments_count`小于 100。如果是，则应将行插入`regcomments`，否则，应将行插入`unregcomments`。

这是我如何做到这一点的伪代码：

```
select comments_count from stories where story_id = x
if comment_count<100
    insert into regcomments
else
    insert into unregcomments 
```

现在我所关心的是如果多个用户正在访问这个脚本，这有没有可能失败？例如，一个故事有 99 条评论。2 个用户同时调用该函数。第一个选择查询同时对两者执行，它们都得到 99。所以两个插入都将被写入 regcomments，使 regcomments 计数为 101，这违反了我的业务规则。任何人都有任何想法，事情如何发展。或者关于我应该如何处理这种情况的任何想法。（不要问我为什么要使用 2 张桌子：P）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:53:15.807

是的，它可能/将会失败，因为 10 个请求可能都从 SQL 查询中收到 99 个comments_count，并且每次都会将新行插入到 regcomments 中，然后表中将有 109 行。

一种可能的解决方案是将检查逻辑移动到 SQL 中（使用带有锁定/互斥锁的存储过程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:18:45.527

对表使用 InnoDB 引擎并将整个操作包装在事务中。InnoDB 将为您处理并发问题。只需准备代码来处理插入/更新语句中的错误。我想您必须设置一个高隔离级别以确保在其他操作正在进行时选择不会运行。如果这不起作用，您可能需要使用 LOCK TABLE。丑陋但会做的工作。

# c# - 为什么取消选择特定的 DataGridViewRow 也会取消选择所有其他行？

> ID：14694363
> 
> 赞同：0
> 
> 时间：2013-02-04T19:48:11.120
> 
> 标签：c#, winforms, datagridview

我有一个带有 DataGridView 的表单。根据某些条件，我以编程方式取消选择单个行（通过设置`Selected`为`false`）。但是当我这样做时，如果当前选择了另一行，它也会被取消选择。我已将 DataGridView 设置为`MultiSelect = false`. 用户应该只能选择一行。

似乎设置任何行的`Selected`属性会导致控件将其视为*选择*行，从而取消选择任何先前选择的行。我将`Selected`属性设置为这一事实`false`并没有改变这种行为。`MultiSelect`这仅在设置为`false`和`SelectionMode`设置为时才会发生 `FullRowSelect`。

我可以通过仅设置当前属性来解决它`true`。

```
if (row.Selected) row.Selected = false; 
```

但我想知道为什么会这样。为什么只有当 SelectionMode 设置为 FullRowSelect 时？

**完整示例**

以下示例代码包含一个完整的工作示例。构造函数将添加三行。单击该按钮将取消选择中间行。但是无论在单击按钮之前选择了哪一行，最终的结果都是没有选择任何行。

```
using System;
using System.Windows.Forms;

class MainForm : Form
{
    static void Main() { Application.Run(new MainForm()); }

    private DataGridView _dataGridView;
    private Button _SelectButton;

    public MainForm()
    {
        _dataGridView = new DataGridView
        { ReadOnly = true, AllowUserToAddRows = false };
        _dataGridView.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
        _dataGridView.Dock = DockStyle.Fill;
        _dataGridView.MultiSelect = false;
        _dataGridView.Columns.Add(new DataGridViewColumn
        { CellTemplate = new DataGridViewTextBoxCell() });
        _dataGridView.Rows.Add("1");
        _dataGridView.Rows.Add("2");
        _dataGridView.Rows.Add("3");
        Controls.Add(_dataGridView);
        _SelectButton = new Button { Text = "Deselect middle row" };
        _SelectButton.Click += _SelectButton_Click;
        _SelectButton.Dock = DockStyle.Bottom;
        Controls.Add(_SelectButton);
    }

    void _SelectButton_Click(object sender, EventArgs e)
    {
        _dataGridView.Rows[1].Selected = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:31:49.000

我同意这是奇怪的行为。如果您允许多选，它会按预期工作，但是当您不允许多选时，它似乎就像您调用`_dataGridView.ClearSelection;`. 我能看到的唯一解决方案是在取消选择之前简单地测试是否选择了相关行。

```
void _SelectButton_Click(object sender, EventArgs e)
{
    if (_dataGridView.Rows[1].Selected)
    {
        _dataGridView.Rows[1].Selected = false;
    }            
} 
```

# ruby - Ruby：为什么这个二进制文件中有一个字母？

> ID：14694364
> 
> 赞同：2
> 
> 时间：2013-02-04T19:48:12.470
> 
> 标签：ruby, binary

我试图理解一些代码示例。我得到这样的表达...

```
exit_status |= 0b0010
exit_status |= 0b0001 
```

我去这里翻译二进制文件：http: [//home.paulschou.net/tools/xlate/](http://home.paulschou.net/tools/xlate/)

并且得到那个`0b0010`是`2`并且`0b0001`是`1`

我知道那`0010`是`2`，那`0001`是 1，我的问题是......为什么有点像`0b`前缀，它是什么意思或它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:49:48.320

[`0b`只是二进制文字的指示。](https://stackoverflow.com/questions/101461/how-do-you-write-a-binary-literal-in-ruby?rq=1)否则，该数字将不会被解释为以 2 为底。

更多：[http ://www.ruby-doc.org/docs/ProgrammingRuby/html/language.html#UC](http://www.ruby-doc.org/docs/ProgrammingRuby/html/language.html#UC)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T19:54:11.490

这`0b`是一个文字，将值指定为二进制表示的数字。这就像`0x`in`0xFF4ABD`将其指定为十六进制数一样。

这是因为数字可以在多个系统中表示。存在多种表示数字的系统，例如十进制数字系统`1234`或罗马数字系统`MCXIVII`。二进制和十六进制数字只是这些系统中的另外两个。

注意：如果您要键入`1234`，Ruby 会将其解释为十进制数。例如，如果您将其键入为`01234`，如果您想将多个数字统一格式化（所有数字长度相同），它将被解释为八进制数！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T19:51:58.237

*   0b：前缀二进制数；示例：0b011（十进制 3）
*   0：前缀八进制数；示例：010（十进制数 8）
*   0x：前缀十六进制数；示例：0x10（十进制 16）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T19:52:02.120

`0b`是表示将后面的数字解释为二进制数字的前缀，就像`0x`前缀表示后面的数字是十六进制的一样，例如`0xffff`. 有关更多信息，请参见[此处](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Numerics)。

# android - 将适当密度的图像从存档加载到 ImageView

> ID：14694365
> 
> 赞同：0
> 
> 时间：2013-02-04T19:48:23.437
> 
> 标签：android, android-imageview

我有一个正在下载、取消归档和阅读的存档文件，它可能包含也可能不包含图像，包括像素密度较高的屏幕的图像。

在更高像素密度的屏幕上使用/选择具有更高像素密度的图像的最佳方法是什么？android平台有没有内置的方法，或者我必须在运行时检查设备的像素密度并手动决定正确的图像？

或者，有什么不同的方法吗？

# tfs - Team Foundation Server 2010 闲置 3-4 分钟后速度变慢

> ID：14694368
> 
> 赞同：0
> 
> 时间：2013-02-04T19:48:34.780
> 
> 标签：tfs, visual-studio-2012, vpn

我安装了 TFS 服务器 2010 并通过 VPN 连接到它。我第一次对 TFS 执行某种命令时速度很慢（响应时间为 10-20 秒）。在那之后，它就像地狱一样快。如果我在 3-4 分钟后保持这样（不进行任何比较、获取最新信息、查看历史记录等（只是编码到已经结帐的文件）），那么第一次会很慢。一段时间后它会断开连接吗？我已将 IIS 应用程序池的空闲超时设置为 999（分钟）

. 它没有帮助。先感谢您。

我正在使用 Visual Studio 2010。

# vim - 在 vim 中是否可以直接读取到新的缓冲区？

> ID：14694373
> 
> 赞同：3
> 
> 时间：2013-02-04T19:48:53.663
> 
> 标签：vim, pipe

我已经能够找到很多在另一个方向上工作的东西，但到目前为止我没有太多运气。

我希望能够`read`从命令行进入一个新的缓冲区。我希望有类似的东西：

```
:r!tac % | new 
```

并且新缓冲区将包含`tac %`

有什么合理的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T20:13:00.480

啊哈 - 原来答案是使用`#`，我猜这是最后使用的缓冲区（？）

```
:enew | r!tac # 
```

将输出读`tac <current buffer>`入新缓冲区。

# asp.net-mvc - 更改数据库字段并更新 ADO 实体模型 (.edmx)？

> ID：14694375
> 
> 赞同：1
> 
> 时间：2013-02-04T19:48:58.123
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

如果我在数据库中添加或更改字段，如何更新我的 .edmx 文件？我是否运行“从数据库更新模型”，是否需要删除 .tt 文件并运行新的“添加代码生成项”？

我是否需要对我的 MVC 项目文件进行任何其他更改以使其与数据库更改保持同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:00:10.097

很多问题！

是的，您可以运行更新模型 - 有时（如果您重命名一个字段）您将不得不手动修改模型 - 删除旧字段，或者您可以在点击更新模型之前删除整个实体。

您无需删除 .tt 文件并运行添加代码生成位。

您可能需要右键单击 .tt 并选择“运行自定义工具”来告诉 .tt 文件重新生成模型类。

# groovy - 使用 groovy 脚本作为 SoapUI 中的属性值

> ID：14694378
> 
> 赞同：1
> 
> 时间：2013-02-04T19:49:08.140
> 
> 标签：groovy, soapui

A 不熟悉soapUI 和groovy，所以也许有人可以帮助我。我尝试使用此属性定义来生成唯一 ID

```
${=((0..<20).collect{['a'..'z','0'..'9'].flatten()[new Random().nextInt(['a'..'z','0'..'9'].flatten().size())]}.join())} 
```

但我得到一个错误，因为这个表达式包含嵌套的花括号，我找不到逃避它们的方法。也许有人知道路？

提前致谢。

**更新**。我更改了脚本，现在它在 SoapUI 的脚本窗口中运行良好。

```
new GroovyShell().evaluate("(0..<20).collect {[\u0027a\u0027..\u0027z\u0027,\u00270\u0027..\u00279\u0027].flatten()[new Random().nextInt ([\u0027a\u0027..\u0027z\u0027,\u00270\u0027..\u00279\u0027].flatten().size())]}.join()" 
```

由于 xml 验证失败，我用他们的 unicode 代码替换了单引号。

但是当我尝试将它用作属性的值时，它会抛出错误。

```
${=new GroovyShell().evaluate("(0..<20).collect {[\u0027a\u0027..\u0027z\u0027,\u00270\u0027..\u00279\u0027].flatten()[new Random().nextInt ([\u0027a\u0027..\u0027z\u0027,\u00270\u0027..\u00279\u0027].flatten().size())]}.join()"}

startup failed: Script183.groovy: 1: unexpected char: 0xFFFF @ line 1, column 136\.    .flatten()[new Random().nextInt([\u0027a 
```

我认为我的脚本中有语法错误，但只有当我像属性一样使用它时才会引发错误。有人知道如何解决这个问题吗？如果我可以将它用作属性，我可以让很多人感到高兴；）因为他们只需要使用属性的名称而不是调用任何脚本。

**更新**。我删除了 (0..<20).collect 部分，现在可以了，但它只生成一个符号。所以问题就在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:03:53.810

我使用以下内容生成相关 ID。

```
${=java.util.UUID.randomUUID()} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:59:55.227

我已经解决了这个问题。由于某些原因，它不想按原样处理嵌套的花括号。我用他们的 unicode 代码替换了它们。将此表达式存储为属性值的最终解决方案如下

```
${=new GroovyShell().evaluate("(0..20).collect\u007B[\u0027a\u0027..\u0027z\u0027,\u00270\u0027..\u00279\u0027].flatten()[new Random().nextInt([\u0027a\u0027..\u0027z\u0027,\u00270\u0027..\u00279\u0027].flatten().size())]\u007D.join()")} 
```

# variables - 在 joomla 组件中传递获取变量

> ID：14694380
> 
> 赞同：3
> 
> 时间：2013-02-04T19:49:09.460
> 
> 标签：variables, joomla, get, components

我正在尝试构建一个简单的 joomla 组件，它将根据它的 API 显示自定义谷歌搜索结果。如何将 get 变量传递给 joomla 组件？可以说我已经具备了所谓的自定义视图的基础知识`index.php?option=com_google&view=google`，而不是我想将`'q' $_GET`变量传递给它 url 查询字符串应该如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T21:51:06.517

[HTTP 请求方法`GET`](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)与 URL 一起工作，因此变量总是在请求的 URL 中传递。

要添加`q`到您当前的 URL，您只需添加`&q=SomeValue`已`SomeValue`适当[百分比或 URL 编码的位置。](http://en.wikipedia.org/wiki/Percent-encoding)

**Joomla 1.5**

如果您使用的是 Joomla！1.5 你可以[`JRequest`](http://docs.joomla.org/JRequest/1.5)用来获取任何由`POST`or提交的变量的值`GET`，见[this document on retrieving request variable](http://docs.joomla.org/Retrieving_data_from_GET_and_POST_requests)。

```
$q = JRequest::getVar('q'); 
```

**Joomla 1.6+**

对于 Joomla！1.6+ 建议用于[检索`JInput`已折旧的请求数据](http://docs.joomla.org/Retrieving_request_data_using_JInput)，`JRequest`并用于 Joomla！3.0+ 你必须使用`JInput`as[`JRequest`已删除](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1#JRequest)功能，并将在接下来的几个版本中继续消失。

要使用`JInput`，您可以获取当前对象或使用通过当前 Joomla 应用程序链接来检索变量。

**得到`JInput`**

```
$jAp = JFactory::getApplication();  // Having the Joomla application around is also useful
$jInput = $jAp->input;  // This is the input object
$q = $jInput->get('q');  // Your variable, of course get() support other option... 
```

**`JInput`通过链接使用**

```
$jAp = JFactory::getApplication();  // Having the Joomla application around is also useful
$q = $jAp->input->get('q');  // Your variable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:07:22.160

您可以使用以下方法在 Joomla 中检索 GET 变量：

```
$q = JRequest::getVar( 'q' ); 
```

这将适用于如下所示的 url 字符串：

```
index.php?option=com_google&view=google&q=some_variable 
```

# javascript - jQuery replaceWith 替换表行的奇怪行为

> ID：14694381
> 
> 赞同：0
> 
> 时间：2013-02-04T19:49:09.837
> 
> 标签：javascript, jquery, html

我在 jQuery 中遇到了一些奇怪的行为，我想知道我做错了什么。

我已经设法解决了这个问题，但是我用它把头发拉了好几天。

这是给你的 jsFiddle... [http://jsfiddle.net/YZxzy/3/](http://jsfiddle.net/YZxzy/3/)

问题似乎正在替换`<tr>`为`<input ... /> <tr> .. <tr>`. 但是，这将正确呈现。

需要明确的是，具有：

```
<table>
  <thead>
    <tr>
      <th>col 1</th>
      <th>col 2</th>
    </tr>
  </thead>
  <tbody>
    <input type="hidden" .... />
    <tr>
    ...
    </tr>
  </tbody>
</table> 
```

将在浏览器中正确呈现，但我无法使用 jQuery“replaceWith”操作创建它。

现在，我知道这不是很好的做法，而且这是不好的做法，问题不在于我该如何解决它。我知道我可以通过将其添加`<input>`到中来修复它，而且我也知道它应该在 . 问题是：

为什么 jQuery`.replaceWith()`不允许您执行上述操作，即使浏览器会正确呈现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:08:06.900

实际上，这个脚本有一些问题。

这是我的叉子：http: [//jsfiddle.net/mori57/b3wfY/](http://jsfiddle.net/mori57/b3wfY/)

一方面，当它开始变大时，您将开始遇到麻烦，因为您破坏 DOM 只是为了重新添加已经存在的东西。没有充分的理由替换 AddNewRows 只是为了重新添加它。您应该使用 .before() 来插入新行。

```
$("#AddRows").click(function () {
    $("#AddNewRows").before(
        '<tr id="row3"><input type="hidden" value="33" id="hiddenRow3" /><td>Value 3.1</td><td>Value 3.2</td></tr>');
}); 
```

其次，只要我将你的隐藏字段移到行内，它就开始工作了。为什么？因为`<input/>`标签在您放置它们的位置无效...`<table/>`标签可以包含 tbody、thead、tr 和其他几个标签，但输入无效。这使渲染中断。但是，如果您将隐藏的输入字段放置在行内，那是有效的放置...实际上，我认为最好将其放置在 td 标记中，但是一旦我将其放入 tr 中，它就开始工作了。

# c# - 如果我将 C# 'NULL' 插入数据库，数据会是什么？

> ID：14694386
> 
> 赞同：-10
> 
> 时间：2013-02-04T19:49:22.313
> 
> 标签：c#, database, null

我了解到`DBNull`& C# normal`null`是完全不同的东西，C# 将`DBNull.Value`其视为一些奇怪的随机事物，但是数据库将 C#`null`视为一个值是什么？

数据库会将 C#`null`视为空的还是字符串或一些随机的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:01:02.277

这取决于您使用什么来访问数据库。

*   Entity Framework 会将数据库映射`null`到 C# `null`，实际上它根本不使用`DBNull`。
*   SQL DAO（例如 System.Data.SqlClient.SqlCommand）用来`DBNull`表示一个数据库`null`，而 `null 表示缺少某些东西。

其他数据访问层可能使用不同的标准，或其中之一。

例如，以下查询：

```
SELECT NULL FROM whatever WHERE 1=2
SELECT NULL FROM whatever WHERE 1=1 
```

当被以下调用时：

实体框架（使用`from .. select`）

*   空结果集（`IEnumerable`从不返回值）
*   单个结果集包含`null`

实体框架（使用`First()`）

*   例外，因为没有结果
*   `null`

实体框架（使用`FirstOrDefault()`）

*   `null`
*   `null`

SQL DAO（使用`ExecuteScalar()`）

*   `null`
*   `DBNull`

# django - admin 中的 django 用户字段（使用 django.contrib.auth 填充）

> ID：14694388
> 
> 赞同：1
> 
> 时间：2013-02-04T19:49:35.660
> 
> 标签：django, django-models, django-modeladmin

我不知道为什么，但 Django Admin App 在模型中找不到用户字段。你能帮忙吗？

模型.py：

```
from django.db import models
from django.forms import ModelForm
from django.contrib.auth.models import User

class object(models.Model):
    name = models.CharField(max_length=50, )
    user = models.ForeignKey(User, editable=False)
    in_use = models.BooleanField() 
```

管理员.py：

```
from project.models import *
from django.contrib import admin

class ObjectAdmin(admin.ModelAdmin):
    list_display = ['name', 'user', 'in_use'] 
```

错误信息：

在 /admin/ 配置不当

'ObjectAdmin.fieldsets[3][1]['fields']' 指的是表单中缺少的字段 'user'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:00:03.847

可能是因为`user`被标记为`editable=False`. 尝试使用[readonly_fields](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields)并将用户添加到该`ModelAdmin`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:00:00.093

您需要在设置中的 INSTALLED_APPS 中激活 django.contrib.auth 应用程序，并且必须在 AUTH_PROFILE_MODULE 中设置配置文件模型的名称，

```
AUTH_PROFILE_MODULE = "object" 
```

此外，您应该考虑更改模型的名称，Python 不会喜欢您将模型命名为“对象”

# sql - 在 Rails/Heroku 上对 Postgres 数据库的意外 SQL 查询

> ID：14694392
> 
> 赞同：15
> 
> 时间：2013-02-04T19:49:48.747
> 
> 标签：sql, ruby-on-rails, postgresql, heroku, newrelic

我正在使用 NewRelic 对我的一个 Rails 应用程序进行一个非常长的请求，并发现许多看起来完全陌生的 SQL 查询占用了相当长的时间。我已经谷歌了，但我空手而归，更不用说我是否能阻止它们的发生。

```
SELECT COUNT(*) FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE c.relkind in (?, ?) AND c.relname = ? AND n.nspname = ANY (current_schemas(false)) 
```

……和……</p>

```
SELECT a.attname, format_type(a.atttypid, a.atttypmod), pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum WHERE a.attrelid = ?::regclass AND a.attnum > ? AND NOT a.attisdropped ORDER BY a.attnum 
```

…每个发生 7 次，总共花费 145 毫秒和 135 毫秒（分别）。

```
SELECT DISTINCT(attr.attname) FROM pg_attribute attr INNER JOIN pg_depend dep ON attr.attrelid = dep.refobjid AND attr.attnum = dep.refobjsubid INNER JOIN pg_constraint cons ON attr.attrelid = cons.conrelid AND attr.attnum = cons.conkey[?] WHERE cons.contype = ? AND dep.refobjid = ?::regclass 
```

…以 104ms 的成本执行了 2 次，并且…</p>

```
SHOW search_path 
```

…在一次通话中要求 45 毫秒。

我的直觉说这些与 Postgres Rails 适配器有关，但我不明白是什么触发了它们或它们在做什么，或者（更重要的是）为什么它们在典型请求期间被触发。

* * *

我刚刚更彻底地检查了日志，看起来运行这个请求的 Dyno 已经在几秒钟前转换为“up”，所以这个请求很可能是第一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T19:59:52.747

表 pg_class、pg_attribute、pg_depend 等都描述了 postgres 中的表、列和依赖项。在 Rails 中，模型类由表定义，因此 Rails 读取表和列以找出每个模型的属性。

在开发模式下，它会在每次访问模型时查找这些值，因此如果您最近进行了更改，Rails 会知道。在生产模式下，Rails 会缓存这些内容，因此您看到这些内容的频率会大大降低，因此这真的不是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T19:59:14.120

这些查询用于获取表和字段的“定义”，并且可能被框架用于在 Ruby 中自动生成模型和/或验证规则。（例如“内省”）

我*没有*使用 Ruby 和您使用的框架的经验，但我不希望这些查询源自 SQL 注入。

您可以在 pgAdmin 或 psql 中自己运行查询，以显示它们产生的结果，并了解它们从数据库中获得了什么信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-20T15:12:16.570

[当我使用Apartment Gem](https://github.com/influitive/apartment "宝石公寓")和 Postgres Schema 进行多租户时，我收到了这些查询。显然，每个 exclude_model - 一个使用默认模式的模型 - 在每个请求中都生成一个“pg_class”查询。

Apartment 的人在 0.25.0 版本中修复了它。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-02-04T19:55:08.787

查询是从您的应用程序中的用户输入生成的吗？如果是这样，如果您没有控制用户输入，那么可能是有人试图破解您的应用程序的 sql 注入。

[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

我对rails并不熟悉，所以我不知道它是否自动创建了你作为开发人员不知道的查询，但我不这么认为。

# ruby-on-rails - Spree Commerce 语法错误

> ID：14694393
> 
> 赞同：-1
> 
> 时间：2013-02-04T19:49:48.900
> 
> 标签：ruby-on-rails, ruby, passenger

我真的不认为存在语法问题，我认为这可能是版本问题，不过，你们觉得这是什么样的？请注意，这只发生在生产环境中。我正在使用乘客（因为它是 Rails 3，我不喜欢在生产中使用 beta gems）：

Gem 版本：1.8.23 Rails 版本：3.2.11 Ruby 版本：1.9.3p374（我升级它认为它会有所帮助，我之前认为是 1.8.7）

```
# rails s -e production
=> Booting WEBrick
=> Rails 3.2.11 application starting in production on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/usr/lib/ruby/gems/1.8/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `polyglot_original_require': /usr/lib/ruby/gems/1.8/gems/spree_api-1.3.1/app/controllers/spree/api/product_properties_controller.rb:11: syntax error, unexpected '.' (SyntaxError)
      .page(params[:page]).per(params[:per_page])
       ^
    from /usr/lib/ruby/gems/1.8/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:359:in `require_or_load'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:313:in `depend_on'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:225:in `require_dependency'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:439:in `eager_load!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:438:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:438:in `eager_load!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:436:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:436:in `eager_load!'
    from /usr/lib/ruby/gems/1.8/gems/devise-2.2.3/lib/devise/controllers/url_helpers.rb:47:in `to_proc'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `all'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:434:in `eager_load!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/application/finisher.rb:53
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `run_initializers'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `send'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/$user/rails_apps/store/config/environment.rb:5
    from /usr/lib/ruby/gems/1.8/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `polyglot_original_require'
    from /usr/lib/ruby/gems/1.8/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /home/$user/rails_apps/store/config.ru:3
    from /usr/lib/ruby/gems/1.8/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
    from /usr/lib/ruby/gems/1.8/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
    from /home/$user/rails_apps/store/config.ru:0:in `new'
    from /home/$user/rails_apps/store/config.ru:0 
```

如果需要更多信息，请告诉我，我可以发送任何要求的信息（当然是在合理范围内）。

编辑补充：

我修正了任性的“。” 但现在看到这个：

```
# rails s -e production
=> Booting WEBrick
=> Rails 3.2.11 application starting in production on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/usr/lib/ruby/gems/1.8/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `polyglot_original_require': /usr/lib/ruby/gems/1.8/gems/spree_api-1.3.1/app/controllers/spree/api/v1/base_controller.rb:68: odd number list for Hash (SyntaxError)
      render :text => { exception: exception.message }.to_json,
                                  ^
/usr/lib/ruby/gems/1.8/gems/spree_api-1.3.1/app/controllers/spree/api/v1/base_controller.rb:68: syntax error, unexpected ':', expecting '}'
      render :text => { exception: exception.message }.to_json,
                                  ^
/usr/lib/ruby/gems/1.8/gems/spree_api-1.3.1/app/controllers/spree/api/v1/base_controller.rb:68: syntax error, unexpected '}', expecting kEND
      render :text => { exception: exception.message }.to_json,
                                                      ^
/usr/lib/ruby/gems/1.8/gems/spree_api-1.3.1/app/controllers/spree/api/v1/base_controller.rb:69: syntax error, unexpected tASSOC, expecting tCOLON2 or '[' or '.'
             :status => 422 and return
                       ^
    from /usr/lib/ruby/gems/1.8/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:359:in `require_or_load'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:313:in `depend_on'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:225:in `require_dependency'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:439:in `eager_load!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:438:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:438:in `eager_load!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:436:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:436:in `eager_load!'
    from /usr/lib/ruby/gems/1.8/gems/devise-2.2.3/lib/devise/controllers/url_helpers.rb:47:in `to_proc'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `all'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:434:in `eager_load!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/application/finisher.rb:53
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `run_initializers'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `send'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/jackal/rails_apps/store/config/environment.rb:5
    from /usr/lib/ruby/gems/1.8/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `polyglot_original_require'
    from /usr/lib/ruby/gems/1.8/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /home/jackal/rails_apps/store/config.ru:3
    from /usr/lib/ruby/gems/1.8/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
    from /usr/lib/ruby/gems/1.8/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
    from /home/jackal/rails_apps/store/config.ru:0:in `new'
    from /home/jackal/rails_apps/store/config.ru:0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:21:08.173

看起来您使用的是 Ruby 1.8（基于`/usr/lib/ruby/gems/1.8/`路径），但其中的哈希语法`render :text => { exception: exception.message }.to_json`仅是 Ruby 1.9。

在 Ruby 1.9 中，你可以说：`h = {key: 1}` 在 Ruby 1.8 中，你必须使用`h = {:key => 1}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:54:56.260

任性的“ `.`”在这开头

`.page(params[:page]).per(params[:per_page])`

在行中

`@product_properties = @product.product_properties.ransack(params[:q]).result + .page(params[:page]).per(params[:per_page])`

就像它在错误消息开头所说的那样。

# netbeans - Netbeans 代码模板（代码完成）下拉菜单

> ID：14694398
> 
> 赞同：2
> 
> 时间：2013-02-04T19:50:32.630
> 
> 标签：netbeans, drop-down-menu, code-completion

我正在使用 netbeans 代码模板，使用它来解析文件中的信息并从中生成代码完成选项的下拉菜单。我一直在关注本教程： http: [//platform.netbeans.org/tutorials/nbm-code-completion.html](http://platform.netbeans.org/tutorials/nbm-code-completion.html)

除了一个问题，我基本上都能让它工作。当第二次点击“Ctrl+Space”时（或者当我第一次没有命令自动出现下拉框时），它会给我一条“没有建议”的消息。

例如，我有几个名为 GET_ATTRIBUTES 的函数。因此，如果我键入“GET_A”并按 Ctrl+Space，它会给出可用函数的列表。但是，如果我再次按 Ctrl+Space，它会将下拉菜单替换为“无建议”。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:07:11.413

发现了问题......教程让我们在代码中输入以下内容：

```
if (queryType != CompletionProvider.COMPLETION_QUERY_TYPE)
return null; 
```

这迫使它在第一次请求后什么也不返回。注释掉它会处理它，并让下拉菜单按需要工作。仍在试图弄清楚为什么该代码确切地出现在教程中......他对此有一个解释，但我不明白它在大多数情况下如何非常有用。

# c - clFinish 需要永远，与内核复杂性和 global_size 无关

> ID：14694400
> 
> 赞同：0
> 
> 时间：2013-02-04T19:50:37.887
> 
> 标签：c, opencl, gpu

我目前正在开发一个 OpenCL 项目，在那里我遇到了一个奇怪的行为。

AMD APP SDK：OpenCL v1.2 HD 7770

**内核就是下面这个，可能是你能想象到的最简单的一个：**

```
__kernel void bm_and(
__global const unsigned int* const bitmap1,
__global const unsigned int* const bitmap2,     
__global unsigned int* const result ) 
{   
    size_t gi = get_global_id(0);   
    if (gi >= get_global_size(0))       
        return;     
    result[gi] = bitmap1[gi] & bitmap2[gi];  
} 
```

我遇到的问题是，不管我调用内核的全局大小有多大，之后在调用 clFinish 时我似乎有大约 1.5 秒的持续延迟。

这仅在第一次调用 bm_and 时发生，进一步的调用以常规性能运行。

**抽象例子**

```
//time ~1.5s (doesn't matter if bitmaps are 1 or 100M)
clFinish(queue)
start = now
bm_and(x,y,z)
clFinish(queue)
end = now
time = end-start

//time ~1.5s, second kernel call and clFinish execute at a high performance+
clFinish(queue)
start = now
bm_and(x,y,z)
clFinish(queue)
bm_and(x,y,z)
clFinish(queue)
end = now 
```

我真的很感激任何帮助，传输成本可能不是问题，因为延迟似乎与我使用的位图的大小无关，并且数据已经在设备上。

**编辑：**
内核性能本身似乎不是问题，提交和启动内核之间的时间似乎丢失了。

这些是示例输出

> clGetEventProfilingInfo

```
QUEUE  MS: 5497240.33
SUMBIT MS: 5497240.36
START  MS: 5498938.58
END    MS: 5498938.94 
```

# objective-c - 使用哪种数据结构来传递值对？

> ID：14694407
> 
> 赞同：2
> 
> 时间：2013-02-04T19:51:13.200
> 
> 标签：objective-c, cocoa-touch, data-structures

我需要存储和传递几个配对对象：

1)`NSString`一个文件名，例如“sprite.png”

2)`BOOL`该精灵是否应该被动画化的值。

所以基本上，我有一堆精灵，每个精灵要么是动画的，要么没有。

我以为我可以使用 an`NSDictionary`来存储所有内容，但我认为使用`[NSNumber numberWithBool:YES]`as 键只允许您拥有一个具有该值的条目。

什么样的结构最适合传递以满足我的要求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:53:20.463

由于 Objective-C 是 C 的严格超集，因此您可以使用 C [struct](http://en.wikipedia.org/wiki/Struct_%28C_programming_language%29)。例如：

```
struct sSpriteDef
{
  BOOL isAnimated;
  NSString *name;
};

typedef struct sSpriteDef SpriteDef; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T19:57:43.940

上课：

```
@interface SpriteTuple : NSObject 

 @property (assign) BOOL shouldAnimate;
 @property (copy) NSString *filename; 

@end

@implementation

 @synthesize shouldAnimate, filename;

@end 
```

你完成了。一个更动态但不那么惯用的方式是使用单独的哈希：

```
static NSString *image = @"ImageFileKey";
static NSString *shouldAnimate = @"ShouldAnimateKey";

@{ image: @"path/to/image.png";       shouldAnimate: @(YES) };
@{ image: @"path/to/secondimage.png"; shouldAnimate: @(NO) };
// ... 
```

这就是来自 Python 或 Ruby 的人可能会这样做的方式......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:06:10.707

如果我理解正确，您需要的是一种表示元组的方式，您可以使用它来关联一组相关值并作为参数一起传递给方法，设置为对象的属性等。我遇到了这个在我自己的发展中被无数次质疑。早期，我会使用 NSArray。所以在你的情况下，我会说：

```
NSArray *spriteTuple = [NSArray arrayWithObjects:someSpriteImageName,someBoolNSNumber,nil]; 
```

并解压为：

```
NSString *name = [spriteTuple objectAtIndex:0];
BOOL animated = [[spriteTuple objectAtIndex:1] boolValue]; 
```

然而，随着时间的推移，总是会发生元素的数量会随着项目的发展而增加，所以从一对开始的会变成三胞胎、四胞胎……然后上面的代码很容易出现重新排序的错误.

iLuvCapra 在我打字时提供的答案就是我现在一直在做的事情。只需创建一个从 NSObject 派生的新类并将参数设为其属性。干净且可扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:26:45.670

我想你在说的是：我有一个带有键@“spriteName”的精灵映射到一个值[NSNumber numberWithBool]。

你打算用这个容器做什么？喜欢：它会持有一个大数还是小数？（如果它像小于十，一个数组，哈希，树，我们可以说是不相关的短期）大数或未知那么重要的是你会是什么用它做的最多？- 添加和删除很多“NSSet” - 通过一个可比较的键“NSDictionary”查找很多个别的东西 - 遍历整个列表很多“NSArray”等......

等等......这些是您在选择容器之前需要问的问题。Apple 资源网站上有一个面向开发人员的容器编程指南，它或多或少地列出了哪个容器适用于什么。

# python - RuntimeError：主线程不在主循环中

> ID：14694408
> 
> 赞同：43
> 
> 时间：2013-02-04T19:51:19.630
> 
> 标签：python, multithreading, tkinter

当我打电话

```
self.client = ThreadedClient() 
```

在我的 Python 程序中，我得到了错误

> “RuntimeError：主线程不在主循环中”

我已经做了一些谷歌搜索，但不知何故我犯了一个错误......有人可以帮我吗？

完整错误：

```
Exception in thread Thread-1:
    Traceback (most recent call last):
    File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 530, in __bootstrap_inner
    File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 483, in run
    File "/Users/Wim/Bird Swarm/bird_swarm.py", line 156, in workerGuiThread
    self.root.after(200, self.workerGuiThread)
    File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py", line 501, in after
    File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py", line 1098, in _register
    RuntimeError: main thread is not in main loop 
```

课程：

```
class ThreadedClient(object):

    def __init__(self):
        self.queue = Queue.Queue( )
        self.gui = GuiPart(self.queue, self.endApplication)
        self.root = self.gui.getRoot()
        self.running = True
        self.GuiThread = threading.Thread(target=self.workerGuiThread) 
        self.GuiThread.start()

    def workerGuiThread(self):
        while self.running:
            self.root.after(200, self.workerGuiThread)
            self.gui.processIncoming( )     

    def endApplication(self): 
        self.running = False

    def tc_TekenVogel(self,vogel):
        self.queue.put(vogel)

class GuiPart(object):
    def __init__(self, queue, endCommand): 
        self.queue = queue
        self.root = Tkinter.Tk()
        Tkinter.Canvas(self.root,width=g_groottescherm,height=g_groottescherm).pack()
        Tkinter.Button(self.root, text="Move 1 tick", command=self.doSomething).pack()
        self.vogelcords = {} #register of bird and their corresponding coordinates 

    def getRoot(self):
        return self.root

    def doSomething():
        pass #button action

    def processIncoming(self):
        while self.queue.qsize( ):
            try:
                msg = self.queue.get(0)
                try:
                    vogel = msg
                    l = vogel.geeflocatie()
                    if self.vogelcords.has_key(vogel):
                        cirkel = self.vogelcords[vogel]
                        self.gcanvas.coords(cirkel,l.geefx()-g_groottevogel,l.geefy()-g_groottevogel,l.geefx()+g_groottevogel,l.geefy()+g_groottevogel)            
                    else:
                        cirkel = self.gcanvas.create_oval(l.geefx()-g_groottevogel,l.geefy()-g_groottevogel,l.geefx()+g_groottevogel,l.geefy()+g_groottevogel,fill='red',outline='black',width=1)
                        self.vogelcords[vogel] = cirkel 
                    self.gcanvas.update()
                except:
                    print('Failed, was van het type %' % type(msg))
            except Queue.Empty:
                pass 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-04T20:26:46.403

您正在主线程之外的线程中运行主 GUI 循环。你不能做这个。

文档在一些地方随便提到 Tkinter 不是线程安全的，但据我所知，从来没有完全站出来说你只能从主线程与 Tk 交谈。原因是事实有些复杂。Tkinter 本身*是*线程安全的，但很难以多线程方式使用。最接近官方文档的似乎是[这个页面](http://effbot.org/zone/tkinter-threads.htm)：

> 问：是否有线程安全的 Tkinter 替代方案？
> 
> 特金特？
> 
> 只需在主线程中运行所有 UI 代码，然后让编写者写入 Queue 对象……</p>

（给出的示例代码不是很好，但足以弄清楚他们的建议并正确地做事。）

实际上*有*一个 Tkinter 的线程安全替代方案[mtTkinter](http://tkinter.unpythonic.net/wiki/mtTkinter)。它的文档实际上很好地解释了这种情况：

> 尽管 Tkinter 在技术上是线程安全的（假设 Tk 是使用 --enable-threads 构建的），但实际上在多线程 Python 应用程序中使用时仍然存在问题。问题源于 _tkinter 模块在处理来自其他线程的调用时试图通过轮询技术获得对主线程的控制。

我相信这正是您所看到的：您在 Thread-1 中的 Tkinter 代码正试图窥视主线程以找到主循环，但它不存在。

所以，这里有一些选择：

*   做 Tkinter 文档推荐的事情，并在主线程中使用 TkInter。可能通过将当前的主线程代码移动到工作线程中。
*   如果您正在使用其他一些想要接管主线程的库（例如，`twisted`），它可能有一种与 Tkinter 集成的方法，在这种情况下您应该使用它。
*   用来`mkTkinter`解决问题。

此外，虽然我没有找到这个问题的任何确切重复项，但有许多关于 SO 的相关问题。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/3567238/i-need-a-little-help-with-python-tkinter-and-threading)、[此答案](https://stackoverflow.com/a/10556698/908494)以及更多信息。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-12-01T21:59:51.323

我知道这已经很晚了，但是我将线程设置为守护进程，并且没有引发异常：

```
t = threading.Thread(target=your_func)
t.setDaemon(True)
t.start() 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-10-31T12:59:33.360

我找到了解决它的方法。它可能看起来像一个笑话，但你应该添加

```
plt.switch_backend('agg') 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-30T23:24:57.707

由于所有这些确实帮助了我的问题，但并没有完全解决它，这里还有一点需要记住：

就我而言，我开始在许多线程中导入 pyplot 库并在那里使用它。将所有库调用移至我的主线程后，我仍然收到该错误。

我确实通过在其他线程中使用的其他文件中删除该库的所有导入语句来摆脱它。即使他们没有使用该库，同样的错误也是由它引起的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-28T20:40:10.587

```
from tkinter import *
from threading import Thread
from time import sleep
from random import randint

class GUI():

    def __init__(self):
        self.root = Tk()
        self.root.geometry("200x200")

        self.btn = Button(self.root,text="lauch")
        self.btn.pack(expand=True)

        self.btn.config(command=self.action)

    def run(self):
        self.root.mainloop()

    def add(self,string,buffer):
        while  self.txt:
            msg = str(randint(1,100))+string+"\n"
            self.txt.insert(END,msg)
            sleep(0.5)

    def reset_lbl(self):
        self.txt = None
        self.second.destroy()

    def action(self):
        self.second = Toplevel()
        self.second.geometry("100x100")
        self.txt = Text(self.second)
        self.txt.pack(expand=True,fill="both")

        self.t = Thread(target=self.add,args=("new",None))
        self.t.setDaemon(True)
        self.t.start()

        self.second.protocol("WM_DELETE_WINDOW",self.reset_lbl)

a = GUI()
a.run() 
```

也许这个例子会对某人有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-01T20:56:19.963

写在最后：

```
root.mainloop() 
```

当然，如果不是，则代替`root`应该是您的对象的名称。`Tk``root`

# jsf - @ConversationScoped 在 JSF/PrimeFaces 应用程序中的两个 bean 之间

> ID：14694412
> 
> 赞同：0
> 
> 时间：2013-02-04T19:51:30.860
> 
> 标签：jsf, primefaces, java-ee-6, conversation-scope

这是我的困境。JSF/PrimeFaces Web 应用程序。我有一个@ManagedBean bean，我将调用与request.xhtml 关联的RequestBean.java。我有一个名为 ResponseBean.java 的 bean @ManagedBean 与 response.xhtml 相关联。RequestBean 有一个类似 List wlist = getWidgetList(); 的方法。

wList 中的元素将填充与 ResponseBean.java 关联的 response.xhtml。

我不允许为此使用 Session 属性，所以我相信它必须涉及@ConversationScoped。

有谁知道这样的问题的好教程或示例链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:15:23.527

我发现[这篇文章](http://www.theserverside.com/tip/Dependency-Injection-in-Java-EE-6-Conversations-Part-4)对理解对话非常有帮助。我也建议通读它的前 3 部分。

另外，我建议您查看[CODI](https://cwiki.apache.org/EXTCDI/jsf-usage.html)，因为 JSF 的 Conversation 范围有点有限。（例如：不能有并行对话，托管对话在不同的`@ConversationScoped`bean 之间共享 - 或者它被注入的任何地方）

# c# - 匿名方法的问题

> ID：14694414
> 
> 赞同：1
> 
> 时间：2013-02-04T19:51:34.097
> 
> 标签：c#, linq-to-sql, lambda, anonymous-types

我有一个方法，除了一个`IEnumerable<T>`和一个 lambda 表达式，它描述了用于将 linq-to-sql 集合与数组进行比较的字段。该方法返回匹配的记录。

```
public IEnumerable<ZipCode> match<T>(IEnumerable<T> values, 
        Func<ZipCode, T> matchPhrase) {
    return (from zipCode in _table
            where values.Contains<T>(matchPhrase)
            select zipCode).Distinct();
} 
```

我收到错误：

> 参数类型`'Func<ZipCode, T>'`不可分配给参数类型`'T'`

该方法将像这样调用（其中`values`是 an`IEnumerable<string>`和`x.zipcode`是 a `string`）：

```
var zipCodes = _zipCodeRepository.match(values, x => x.zipcode) 
```

**更新**

根据约翰的使用建议，`HashSet<T>`我已经更改了我的代码，但是我现在遇到了一个不同的错误

> 方法“System.Object DynamicInvoke(System.Object[])”不支持 SQL 转换。

我想我可能不清楚我的问题，我认为我使用了错误的方法签名来获得我想要的结果。让我用一个更简单的代码示例来解释：

```
public IEnumerable<ZipCode> match(IEnumerable<string> values) {
    return (from zipCode in _table
            where values.Contains(zipCode.zipcode)
            select zipCode).Distinct();
} 
```

我很想做到这一点，但使用匿名类型。我想`Contains()`通过 lambda 传递要在该字段中使用的字段。所以`zipCode.zipcode`将作为第二个参数传递给方法：`x => x.zipcode`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:53:32.223

我怀疑你想给代表*打电话*：

```
return (from zipCode in _table
        where values.Contains(matchPhrase(zipCode))
        select zipCode).Distinct(); 
```

请注意，这可能会非常昂贵。您可能想先创建一个集合：

```
HashSet<T> valueSet = new HashSet<T>(values);
return _table.Where(x => valueSet.Contains(matchPhrase(x))
             .Distinct(); 
```

（我在这里删除了查询表达式，因为它在可读性方面弊大于利。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:52:59.653

你忘了`(zipCode)`进去`Contains`

```
public IEnumerable<ZipCode> match<T>(IEnumerable<T> values, Func<ZipCode, T> matchPhrase) {
    return (from zipCode in _table
            where values.Contains(matchPhrase(zipCode))  // <- Here (and you don't need to specify <T>, the compiler deduce it from the argument)
            select zipCode).Distinct();
} 
```

您可以使用 Join 方法来获得更好的性能（复杂性在 中`O(n)`）：

```
public IEnumerable<ZipCode> match<T>(IEnumerable<T> values, Func<ZipCode, T> matchPhrase)
{
    return (from zipCode in _table
            join value in values on matchPhrase(zipCode) equals value
            select zipCode).Distinct();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:59:24.903

包含只接受一个字符串作为参数，而不是一个表达式。您将无法在此级别上对其进行参数化。

您可以将整个 where 部分作为参数传递：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Linq.Expressions;

namespace ConsoleApplication
{
    class Program
    {
         static void Main(string[] args)
         {
             var values = new List<string>();
             values.Add("123");

             Console.WriteLine(
                 Match(zip => values.Contains(zip.Code)).Count()); // -> 1

             Console.WriteLine(
                 Match(zip => values.Contains(zip.OtherCode)).Count()); // -> 0

             Console.Read();
         }

         public static IEnumerable<ZipCode> Match(Expression<Func<ZipCode, bool>> predicate)
         {
             var table = new List<ZipCode> 
                      { new ZipCode { Code = "123" }, new ZipCode { OtherCode = "234" } }
                .AsQueryable();

             return (from zipCode in table.Where(predicate)
                    select zipCode).Distinct();
         }
     }
     public class ZipCode
     {
         public string Code { get; set; }

         public string OtherCode { get; set; }
     }
} 
```

# sitecore - Sitecore 布局参数错误

> ID：14694415
> 
> 赞同：0
> 
> 时间：2013-02-04T19:51:38.887
> 
> 标签：sitecore, sitecore6

当前在渲染上加载 2 个子布局参数以更改其值时收到 InvalidOperationException。它们分别被命名为“标题”和“文本”，都是单行文本框。我可以更改同一项目的参数，但渲染不同。另一个渲染包含一个通用链接和一个图像。

有人遇到这个并能够阐明一点吗？

```
[InvalidOperationException: field]
Sitecore.Data.FieldDescriptor..ctor(Item item, String fieldName) +221
Sitecore.Shell.Applications.Layouts.DeviceEditor.RenderingParameters.GetAdditionalParameters(List`1 fieldDescriptors, Item standardValues, Dictionary`2 additionalParameters) +430
Sitecore.Shell.Applications.Layouts.DeviceEditor.RenderingParameters.GetFields(RenderingDefinition renderingDefinition, Dictionary`2 parameters) +902
Sitecore.Shell.Applications.Layouts.DeviceEditor.RenderingParameters.Show() +266
Sitecore.Shell.Applications.ContentManager.Dialogs.LayoutDetails.LayoutDetailsForm.EditRenderingPipeline(ClientPipelineArgs args) +356 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:44:29.703

代码抛出此异常：

```
Field field = item.Fields[fieldName];
Assert.IsNotNull(field, "field"); 
```

看起来您没有设置字段名称，或者您在名称字段中有拼写错误，或者该项目没有您作为参数传递的名称的字段。

# java - Sqoop jar 已弃用

> ID：14694417
> 
> 赞同：0
> 
> 时间：2013-02-04T19:51:46.273
> 
> 标签：java, eclipse, sqoop

我正在开发一个用于 Hive 和 Teradata 之间数据同步的应用程序。为此，我在嵌入式模式下使用 sqoop，即我在类路径中添加了 sqoop 作为 jar 并使用 Sqoop.runTool(..) 执行操作。

但是在 Eclipse 上，它被标记为已弃用。我使用的是 1.4.2 版，但找不到任何相关信息。

无论如何，我目前正在使用它，但如果有人可以提供一些关于它为什么被弃用以及可以做些什么的信息会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:24:52.693

你用的是什么精确的课程？目前有两个 Sqoop 类：

*   com.cloudera.sqoop.Sqoop - 已弃用
*   org.apache.sqoop.Sqoop - 这是正确的使用

Sqoop 历史上主要在 cloudera 开发，后来在 Apache 下迁移（在 1.3.0 版本期间）。在孵化期间（版本 1.4.0 之前），我们将所有功能从 cloudera 命名空间移至 apache 命名空间。我们在 cloudera 命名空间中提供了类以保持向后兼容性，但我们将它们标记为已弃用。

雅尔切克

# c# - 在没有对象信息的情况下序列化对象

> ID：14694420
> 
> 赞同：0
> 
> 时间：2013-02-04T19:51:57.627
> 
> 标签：c#, serialization, binaryformatter

我处于一种情况，我只需要将对象成员的值序列化到文件中。

例如，如果对象包含 3 个字符串成员，我希望序列化的输出只有这 3 个字符串，而没有**Binaryformatter**添加的序列化元数据，例如对象的版本、文化和程序集名称。

一种选择是直接编写对象的每个成员，但我想避免这种情况，因为我有很多需要像这样序列化的类，我不想编写一个函数来为每个类以不同的方式处理这个问题。

**要求：**

我希望能够写入任何类型的文件，我希望将成员的值转换为字节（进入缓冲区或直接进入文件）并能够将这些字节写入文件中的特定位置.

有没有一种方法或 API 只序列化对象成员的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:18:10.717

马坦，

这是我出于完全不同的目的而整理的一些代码，但它需要一个未知对象并将其序列化为 XML 文件（已更新以包含更好的编码实践）。

```
 void objectToXMLFile(String fn, object o)
    {
        XmlTextWriter textWriter = new XmlTextWriter(fn, null);

        System.Type type = o.GetType();
        PropertyInfo[] piList = type.GetProperties();

        textWriter.WriteStartDocument();

        textWriter.WriteStartElement("attributeList");

        foreach (PropertyInfo pi in piList)
        {
            textWriter.WriteStartElement("attribute");

            textWriter.WriteStartElement("name");
            textWriter.WriteString(pi.Name);
            textWriter.WriteEndElement();

            textWriter.WriteStartElement("value");
            textWriter.WriteString(pi.GetValue(o).ToString());
            textWriter.WriteEndElement();

            textWriter.WriteStartElement("dataType");
            textWriter.WriteString(pi.PropertyType.Name);
            textWriter.WriteEndElement();

            textWriter.WriteEndElement();
        }
        textWriter.WriteEndElement();
        textWriter.WriteEndDocument();
        textWriter.Close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:03:38.757

如果您最终使用反射仅编写所需的属性，您可能需要考虑一些性能影响。

使用反射很慢。反射类型本身代价很高，然后`PropertyInfo`通过调用来动态调用`PropertyInfo.GetValue`很慢。

另一种方法是构建一个调用属性并写入其值的表达式树，然后将此表达式编译为`Action`. 您可以将这些实例缓存`Action`在以您正在序列化的对象为键的字典`Type`中，并在您想要序列化对象时调用正确的实例。

这会快得多，也不会在 GC 上产生太多负载。

您可以考虑的另一种选择是在构建时生成代码 - 您可以生成一个类来快速且廉价地序列化您的目标类型。在某些情况下，这是一个不错的选择。

# jsp - 从索引 JSP 调用实用程序 JSP 中的 servlet，405 错误找不到 servlet

> ID：14694422
> 
> 赞同：2
> 
> 时间：2013-02-04T19:52:09.067
> 
> 标签：jsp, servlets

我在这个主题上搜索了很多，但似乎没有问题/答案能提供我正在寻找的东西。如果答案漂浮在某个地方，我深表歉意。

我拥有的是我编写的一系列实用程序 JSP，我通过索引类型 JSP 访问它们，其中我有一个按钮表单可以转到相应的 JSP。每个看起来像这样：

```
<form method="POST" action="delete.jsp">
<input type="submit" value="Delete" name="B2">
</form> 
```

在我的 delete.jsp 中，我有另一个表单，一旦按下按钮就会调用我的 servlet，如下所示：

```
<form method="post" action="ModelServlet">
Select file to delete: <input type="file" name="dataFile" id="fileChooser" /><br />
<br /> <input type="submit" name="DELETE" value="Delete" />
</form> 
```

当我按下此“删除”按钮时，我收到“HTTP 状态 405 - 此 URL 不支持 HTTP 方法 POST”错误。这使我相信存在某种映射错误或其他什么，阻止实用程序 JSP 找到我的 servlet。对此有什么想法吗？我的servlet代码如下：

我正在调用的 servlet：

```
package com.model;

import java.io.File;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.io.FileUtils;

public class ModelServlet extends HttpServlet {
        protected void init(){}

    protected void doPost(Model ourModel, HttpServletRequest   request, HttpServletResponse response) throws ServletException, IOException {
        //check for which case we have: upload, delete, move, or copy
        if (ServletFileUpload.isMultipartContent(request)){
        //do upload stuff
        performUpload(request,response);            
    }
    else if (request.getParameter("DELETE") != null){
        //do delete stuff
        performDelete(request,response);
    }
    else if (request.getParameter("MOVE") != null){
        //do move stuff
        performMove(request,response);

    }
    else if (request.getParameter("COPY")!= null){
        //do copy stuff
        performCopy(request,response);
    }

} 
```

为它下面的函数定义的方法。

干杯，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:03:03.787

您没有正确解释错误。它找到了 servlet，但没有找到所需的方法。当您使用`<form method="post">`时，它显然正在寻找`doPost()`方法。所以你只需要确保你已经提供了一个（[并且你没有错误地委托给`super.doPost()`](https://stackoverflow.com/questions/5370633/servlet-405-error/5370738#5370738)）。使用`@Override`方法上的注释来确保您确实覆盖了正确的方法，因此没有输入方法签名，使其成为重载（但未实际使用）的方法签名。

如果它没有找到整个 servlet，你就会得到一个 404 错误。

* * *

**更新**：根据您的问题更新，您的 servlet 根本没有覆盖[真正的`doPost()`方法](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)。有一个未知的第三个参数，这使它有效地成为 servlet API 未指定的重载方法。

```
protected void doPost(Model ourModel, HttpServletRequest   request, HttpServletResponse response) throws ServletException, IOException { 
```

如果你把注解放在方法上，你会发现由于参数`@Override`无效，它根本无法编译。`Model ourModel`相应地修复它：

```
@Override
protected void doPost(HttpServletRequest  request, HttpServletResponse response) throws ServletException, IOException { 
```

# php - 每个用户会话运行一次javascript？

> ID：14694423
> 
> 赞同：0
> 
> 时间：2013-02-04T19:52:08.597
> 
> 标签：php, javascript, html

我有这个 javascript，如果用户单击我的搜索表单中的文本区域，它会显示一个 div。

基本上现在搜索表单正在被拉到主页使用

```
<?php include(); ?> 
```

当用户在主页上时，他们单击文本区域并显示 div，然后他们离开文本区域（onblur）并且 div 隐藏。这个功能只发生一次，不会再发生。

但是，一旦用户点击搜索并提交搜索，该功能就会再次启动，因此用户单击文本区域并显示 div，它们会离开它并隐藏。和以前一样，这种情况只发生一次。

我不希望每次用户单击文本字段时都显示 div，我只希望他们看到这个 div 一次，无论他们在网站上的哪个页面上。

我已将 javascript 放在 search.php 文件中，该文件被拉到主页和我网站上的所有其他页面上。

这可能是该功能在它进入的每个新页面上发生的原因，但是虽然我希望用户能够从网站上的任何位置访问搜索栏，以及他们是否开始搜索 home.php 或profiles.php 或我希望 div 只向用户显示一次的任何其他页面，而不是在整个会话或 cookie 会话中再次显示。

这可能吗，有人可以告诉我怎么做吗？

谢谢

```
<script>

        $(function() {
            $(".search_prompt").hide();
            var focusin_flag = false,
                focusout_flag = false;
            $("#text").focusin(function() {
                if (!focusin_flag) {
                    $(".search_prompt").show();
                    focusin_flag = true;
                }
            }).focusout(function () {
                if (!focusout_flag ) {
                    $(".search_prompt").hide();
                    focusout_flag = true;
                } 
                function timeout_init() {
        setTimeout('search_prompt()', 2000);

                }
            });
        });
    </script> 
```

搜索脚本：

```
<form method="get" action="">
    <input type="hidden" name="dosearch" value="1">
    <input type="text" id="text" name="query" class="searchbox" placeholder="Search Name/Location" style="width:120px;"/>
    <input type="image" src="../PTB1/assets/img/icons/search.png" height="19" width="20" class="searchbutton" name="submit" value="Start Search" />
</form>

<?php
//PHP CODE STARTS HERE

if(isset($_GET['dosearch'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT *,MATCH(display_name, location, sex, ethnicity, hobbies, station, age, weight_st, weight_lb, height_ft, height_in, build) AGAINST ('$query' IN BOOLEAN MODE) AS relevance FROM ptb_stats WHERE MATCH(display_name, location, sex, ethnicity, hobbies, station, age, weight_st, weight_lb, height_ft, height_in, build) AGAINST('$query' IN BOOLEAN MODE) ORDER BY relevance DESC LIMIT 5");
echo "<div class=\"search-results\">";
while($data_fetch=mysql_fetch_array($query_for_result))

{

    echo "<div class=\"text\"><a href=\"profile.php?id={$data_fetch['user_id']}\" class=\"search\">";
    echo "<div class=\"spacing\"><img width=35px height= 30px src=\"data/photos/{$data_fetch['user_id']}/_default.jpg\" class=\"boxgridsearch\"/> "; 
     echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div></div>";

}
echo "<div class=\"morebutton-search\"><a href=\"search_results.php?query=$query\" \">+ view more results</a></div>";

mysql_close();
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:02:28.477

这并不理想，但我建议`$_SESSION`在用户第一次点击该页面时设置一个变量（或执行您只想执行一次的任何操作）。然后，在包含 JavaScript 之前，检查是否设置了该会话变量。如果是这样，请不要包含 JavaScript。如果没有，包括它。

它看起来像这样：

```
// User just performed action for the first time.
$_SESSION['saw_div'] = true; 
```

然后，稍后：

```
<?php if (!isset($_SESSION['saw_div']) || $_SESSION['saw_div'] == false): ?>
    <script>
        // Include your JS script
    </script>
<?php endif; ?> 
```

# c# - 在未知比例的图像中寻找简单的模板

> ID：14694424
> 
> 赞同：0
> 
> 时间：2013-02-04T19:52:11.357
> 
> 标签：c#, templates, aforge

我有一个地板布局（相当简单，白色背景，黑色内容）和地板上的椅子模板。我知道我需要寻找的所有方向（简单的上、下、左、右），但我不知道进来的地板模板的比例。

我让它与 AForge 一起工作，当我从布局中复制椅子时，我知道确切的比例，我可以找到地板上的所有椅子。这正是我想要的（我只需要椅子的中心 x，y）。展望未来，我想自动化这个。我不知道正在上传的平面图的确切比例

我使用 Emgu.CV 示例尝试找到它（SURFFeature 示例项目），但仅使用椅子作为模板不起作用。我认为它似乎没有找到任何观察到的描述符（它为空），因为椅子本身并不太复杂。我尝试了一个更复杂的模板（椅子+桌子，虽然它不能正常工作，因为椅子相对于桌子不一致）。结果似乎没有用，它指向平面图上的一些随机位置，但似乎不太正确。

关于确定规模的方法有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:14:25.840

通过使用错误的刻度，读数不准确。这可能会导致包装重量被误印在由地面秤而不是天平制成的谷物盒上。这是因为这些尺度上的精确度是不同的，以适应企业的不同需求。而且，通过使用不同的校准，这可能会导致在地板秤上测量时相同产品与计数秤上的重量不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:44:51.607

好吧，我能够得到这个工作。我最终做的是在一个圆圈内画一个正方形并将我想要的对象放在正方形内

然后我使用：`Blob[] blobs = blobCounter.GetObjectsInformation( );`获取页面上的所有 blob。

遍历blob并查找所有圆形和正方形，将它们添加到每个的列表中

```
 if (shapeChecker.IsCircle(edgePoints, out center, out radius))
 {
     circs.Add(b);
 }
 else if (corners.Count == 3)
    tris.Add(b);
 else if (corners.Count == 4)
    boxes.Add(b); 
```

遍历每个圆圈，并为每个圆圈所有正方形，并寻找两个具有大致相同的中心点。

为了得到里面的对象，我从正方形内部复制了图像的裁剪（在 x、y 上添加一些，从宽度、高度中删除一些）。这给了我广场内的空白空间和物体

然后我使用自动裁剪（从[这里开始](https://stackoverflow.com/questions/11779455/how-to-auto-crop-an-image)，虽然因为我不需要旋转/灰度而修改）来切掉空白，只剩下我想要的图像！

*   抱歉，我没有示例图片 - 我还没有足够的代表来发布它们

# c++ - Xerces：如何使用 ErrorHandler 检查 XML 文件的有效性

> ID：14694425
> 
> 赞同：2
> 
> 时间：2013-02-04T19:52:14.317
> 
> 标签：c++, error-handling, xerces

我正在尝试确定给定的 XML 文件是否有效（具有正确的语法和结构），并且我正在使用 Xerces。我已经能够成功读取正确的文件，但是当我给它提供语法不正确的文件时，不会引发任何错误。

我一直在四处寻找，发现我可能必须使用错误处理程序和用户`setErrorHandler`来捕获错误，而不是传统的`try-throw-catch`异常处理。

我遇到的问题是我很困惑如何声明正确的处理程序，将其设置为我的解析器，然后读取错误（如果出现任何错误）。

有没有人可以阐明我的情况？

```
// @input_parameter from function: const string & xmlConfigArg 

xercesc::DOMDocument* doc = NULL;

string xmlConfig(xmlConfigArg);

 Handler handler; // I'm not sure what type of handler to use
_parser->setErrorHandler(&handler);
try{
    _parser->parse(xmlConfigArg.c_str());
doc = _parser-> getDocument();
}catch(...){
    //Nothing is ever caught here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:19:59.633

您需要从[ErrorHandler](http://xerces.apache.org/xerces-c/apiDocs-3/classErrorHandler.html) (<xercesc/sax/ErrorHandler.hpp >) 派生一个类，然后覆盖那里的所有虚拟方法。这样做之后，您可以从您创建的类中获取错误代码。解析中不会抛出异常，因此您可以挥动 try/cache 块（或保留它以供不同用途）。

# matlab - Matlab 对带有向量参数的 mod()、isequal()、floor() 函数给出错误答案

> ID：14694426
> 
> 赞同：0
> 
> 时间：2013-02-04T19:52:16.907
> 
> 标签：matlab

我正在使用 matlab 来解决混合整数规划，在我从 linprog 获得解决方案后，我想评估它们是否都是整数（x 是 n 维），但我想不出办法做到这一点。

所有函数，例如`mod(x,1) == 0`，`isequal(x,floor(x))`都会给出错误的答案。

更奇怪的是，如果你手动输入一个具有相同参数的向量，结果是正确的。

结果显示：（这里所有的x都是从linprog的结果中得到的）。任何人都可以帮助解决这个问题或提出一些其他有用的方法来评估这个？

```
K>> x

x =

    7.0000
    1.0000

K>> mod(x,1)

ans =

    0.0000
    1.0000

K>> x

x =

    6.0000
    3.0000

K>> isequal(x,floor(x))

ans =
    0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:01:13.880

看起来是来自 linprog 的整数 1，实际上是一个非常接近 1 的浮点数，但不等于它。只是您（默认情况下）无法通过在 MATLAB 中输出数字来区分。请参阅有关[比较浮点值](https://stackoverflow.com/questions/686439/why-is-24-0000-not-equal-to-24-0000-in-matlab)的问题。[此外，请参阅有关数字显示格式](http://www.mathworks.de/de/help/matlab/ref/format.html)的 MATLAB 手册页。

默认情况下，MATLAB 使用 显示数字`format short`：

> `format`将浮点数值的显示设置为默认显示格式，即短固定十进制格式。此格式显示 5 位缩放的定点值。

因此，即使它*不等于*`1 – 1e–10`1，也会*显示*为1。同样，即使它确实是，也会*显示*为 1 。*`mod(1 – 1e–10, 1)`*`1 – 1e–10`**

 **如果您手动设置`x`为其显示的表示，则所有较低有效的数字都将被截断，“奇怪地”为您提供预期的结果。

`x`输入命令后检查`format long`。**

# ios - MFMailComposeViewController 几个附件

> ID：14694430
> 
> 赞同：1
> 
> 时间：2013-02-04T19:52:40.977
> 
> 标签：ios, objective-c, xcode, email-attachments, mfmailcomposeviewcontroller

我成功地`UIImage`从我的应用程序发送了一封带有附件的电子邮件，但是是否可以附加多个图像`MFMailComposeViewController`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:55:01.483

您可以将所有图像保存在 NSMutable 数组中并运行代码

```
[mailer addAttachmentData:imageData mimeType:@"image/png" fileName:@""]; 
```

计算你的`NSMutableArray`. 它将图像添加到附件字段

```
 for (int i = 0; i < [_textField0.emojiArray count]; i++)         
 {
    emoji = [_textField0.emojiArray objectAtIndex:i];
  UIImage *image = [EmojiResizer resizeImage2:[UIImage imageNamed:emoji.screenfilename]
   imageData = [NSData dataWithData:UIImagePNGRepresentation(image)];

 [mailViewController addAttachmentData:imageData mimeType:@"image/png" fileName:emoji.filename];         
} 
```

做这样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:15:15.397

呼叫`addAttachment...`您希望添加的每个附件。

# tcp - Wireshark 时序图 (Stevens)

> ID：14694439
> 
> 赞同：1
> 
> 时间：2013-02-04T19:53:10.903
> 
> 标签：tcp, wireshark

我需要帮助解释这张图[http://www.picamatic.com/view/9018094_Untitled/](http://www.picamatic.com/view/9018094_Untitled/)

我需要找出 TCP 的慢启动阶段的开始和结束，以及拥塞避免接管的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:07:22.480

由于没有网格线，所以有点难以看到，但我们可以估计。慢启动的特点是指数增长，因此在第 6 次突发时，在 1.0 到 1.1 秒之间发送的数据包似乎停止了发送数据包的指数增长，而是变为线性，表明它已进入拥塞避免。

# ios - 我可以在不调试的情况下从 Xcode 运行 iPhone 应用程序吗？

> ID：14694441
> 
> 赞同：14
> 
> 时间：2013-02-04T19:53:14.317
> 
> 标签：ios, xcode

是否可以让 Xcode 从 Xcode 4.6 在我的 iOS 设备上自动启动应用程序，而无需将其调试器附加到应用程序？我正在开发一个自动构建系统，因此手动启动应用程序不是一种选择。

我在 Product -> Perform Action 菜单下找到了 Run without Building，但它仍然附加了调试器。我可以编辑方案以使 Xcode 等到手动启动应用程序后再附加调试器，但这基本上与我想要的相反。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-04T20:01:25.290

如果您想在不启动调试器的情况下从 Xcode 启动应用程序，我将取消选中 Xcode[方案](https://developer.apple.com/library/archive/documentation/ToolsLanguages/Conceptual/Xcode_Overview/ManagingSchemes.html#//apple_ref/doc/uid/TP40010215-CH56-SW13)中的“调试可执行文件”选项：

[![在此处输入图像描述](../Images/20db23c6dc19ffc21704e08bdf61b237.png)](https://i.stack.imgur.com/ne8eC.png)

* * *

如果您想手动启动应用程序，您可以：

*   在“方案”下拉列表中选择您的设备；
*   构建应用程序（不要运行）；
*   打开管理器并转到“设备”选项卡；
*   将您的应用程序从主 Xcode 项目导航器中的“产品”文件夹拖到管理器窗口中的设备上，它将被安装；和
*   然后，您可以在此时从设备手动运行该应用程序。

当诊断启动性能并且您希望在设备上完全独立于 Xcode（以及调试器，如果您有调试版本）运行应用程序时，此过程可能很有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-09T16:07:27.123

xcode 6.3.1 ![在此处输入图像描述](../Images/06c5982b583194ea65aaa16eee35c540.png)

取消选择调试执行，然后你可以不调试运行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-04T19:56:08.750

只需构建并运行，一旦启动按停止并手动打开应用程序。然后它将是您构建但未连接的应用程序。

# java - 理解java中的有符号数和补码

> ID：14694447
> 
> 赞同：1
> 
> 时间：2013-02-04T19:53:18.360
> 
> 标签：java, byte, bit, sign, complement

我有一个 3 字节的有符号数，我需要用它来确定 Java 中的值。我相信它是用一个人的补充签名的，但我不是 100% 确定（我已经有 10 多年没有研究过这些东西了，我的问题的文档也不是很清楚）。我认为我遇到的问题是 Java 在二进制补码中完成所有事情。我有一个具体的例子来展示：

*   原始的 3 字节数字：`0xEE1B17`

*   解析为整数 ( `Integer.parseInt(s, 16)`) 这将变为：15604503

*   如果我对此进行简单的位翻转（`~`），我会得到（我认为）一个二进制补码表示：-15604504

*   但我应该得到的价值是：-1172713

我认为正在发生的是我得到了整个 int 的二进制补码，而不仅仅是 int 的 3 个字节，但我不知道如何解决这个问题。

我能够做的是将整数转换为二进制字符串 ( `Integer.toBinaryString()`)，然后手动将所有 0“翻转”为 1，反之亦然。然后解析这个整数 ( `Integer.parseInt(s, 16)`) 时，我得到非常接近的 1172712。在所有其他示例中，我需要始终在结果中加 1 才能得到答案。

任何人都可以诊断这里使用的是什么类型的有符号数字编码，以及是否有除了手动翻转字符串的每个字符之外的解决方案？我觉得必须有一种更优雅的方式来做到这一点。

编辑：所有响应者都以不同的方式提供帮助，但我的一般问题是如何翻转 3 字节数字，@louis-wasserman 回答了这个问题并首先回答了，所以我将他标记为解决方案。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:59:11.147

如果您想翻转 Java int 的低三个字节，那么您只需执行`^ 0x00FFFFFF`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:59:49.880

`0xFFEE1B17`is -`1172713` 您必须只添加前导字节。`FF`如果设置了 3 字节值的最高位，`00`否则。

将您的 3 字节值转换为正确值的方法`int`可能如下所示：

```
if(byte3val>7FFFFF)
  return byte3val| 0xFF000000;
else 
  return byte3val; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:08:23.433

负符号数是这样定义的`a + (-a) = 0`。所以这意味着所有位都被翻转然后`1`相加。请参阅[二进制补码](https://en.wikipedia.org/wiki/Signed_number_representations#Two.27s_complement)。您可以通过考虑添加时发生的情况来检查此过程是否满足条件`a + ~a + 1`。

您可以通过其最高有效位识别出一个数字是否为负数。因此，如果您需要将带符号的 3 字节数字转换为 4 字节数字，您可以通过检查该位来完成，如果已设置，则还设置第四个字节的位：

```
if ((a & 0x800000) != 0)
    a = a | 0xff000000; 
```

您也可以在单个表达式中执行此操作，这很可能会执行得更好，因为计算中没有分支（在当前 CPU 中，分支与[流水线处理效果不佳）：](https://en.wikipedia.org/wiki/Instruction_pipeline)

```
a = (0xfffffe << a) >> a; 
```

在这里`<<`执行`>>`字节移位。首先我们将数字向右移动 8 位（所以现在它占据了 3 个“高”字节而不是 3 个“低”字节），然后将其移回。诀窍是`>>`所谓的[算术移位](https://en.wikipedia.org/wiki/Arithmetic_shift)，也称为有*符号移位*。将最高有效位复制到由操作空置的所有位。这正是为了保留数字的符号。确实：

```
(0x1ffffe << 8) >> 8        ->  2097150
(0xfffffe << 8) >> 8        ->  -2 
```

请注意，java 也有一个无符号右移运算符`>>>`。有关更多信息，请参阅 Java 教程：[按位和位移运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。

# ios - UIDatePicker 设置最大日期

> ID：14694452
> 
> 赞同：1
> 
> 时间：2013-02-04T19:53:26.470
> 
> 标签：ios, xcode

我正在使用此代码来阻止用户超过我设置的限制：

鉴于确实加载：

```
NSDate *Date=[NSDate date];
[DatePickerForDate setMinimumDate:Date];
[DatePickerForDate setMaximumDate:[Date dateByAddingTimeInterval: 63072000]]; //time interval in seconds 
```

而这个方法：

```
- (IBAction)datePickerChanged:(id)sender{
if ( [DatePickerForDate.date timeIntervalSinceNow ] < 0 ){
    NSDate *Date=[NSDate date];
    DatePickerForDate.date = Date;
}

if ( [DatePickerForDate.date timeIntervalSinceNow ] > 63072000){
    NSDate *Date=[NSDate date];
    DatePickerForDate.date = Date;
}
} 
```

第一部分有效（带有 <0 的部分），并返回到当前日期，但 > 63072000 的部分有时有效，有时无效。顺便说一句，63072000 大约是 2 年。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T22:22:38.707

从现在开始，我尝试使用最大日期为一个月的 UIDatePicker：

```
NSDate* now = [NSDate date] ;
// Get current NSDate without seconds & milliseconds, so that I can better compare the chosen date to the minimum & maximum dates.
NSCalendar* calendar = [NSCalendar currentCalendar] ;
NSDateComponents* nowWithoutSecondsComponents = [calendar components:(NSEraCalendarUnit|NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit) fromDate:now] ;
NSDate* nowWithoutSeconds = [calendar dateFromComponents:nowWithoutSecondsComponents] ;
//  UIDatePicker* picker ;
picker.minimumDate = nowWithoutSeconds ;

NSDateComponents* addOneMonthComponents = [NSDateComponents new] ;
addOneMonthComponents.month = 1 ;
NSDate* oneMonthFromNowWithoutSeconds = [calendar dateByAddingComponents:addOneMonthComponents toDate:nowWithoutSeconds options:0] ;
picker.maximumDate = oneMonthFromNowWithoutSeconds ; 
```

我找到：

*   当您第一次尝试选择最小和最大范围之外的日期时，UIDatePicker 将自行滚动回“范围内”。
*   如果您立即再次选择超出范围的日期，选取器将不会向后滚动，允许您选择超出范围的日期。
*   如果 Picker 的选定日期超出范围，则其`date`属性将返回范围内最近的日期。
*   当您调用`setDate:`or时，如果您传递的日期与 Picker属性`setDate:animated:`返回的日期完全相同，则 Picker 将不执行任何操作。`date`

考虑到这一点，您可以在 Picker 的值更改时调用以下方法，以防止您选择超出范围的日期：

```
- (IBAction) datePickerChanged:(id)sender {
    // When `setDate:` is called, if the passed date argument exactly matches the Picker's date property's value, the Picker will do nothing. So, offset the passed date argument by one second, ensuring the Picker scrolls every time.
    NSDate* oneSecondAfterPickersDate = [picker.date dateByAddingTimeInterval:1] ;
    if ( [picker.date compare:picker.minimumDate] == NSOrderedSame ) {
        NSLog(@"date is at or below the minimum") ;
        picker.date = oneSecondAfterPickersDate ;
    }
    else if ( [picker.date compare:picker.maximumDate] == NSOrderedSame ) {
        NSLog(@"date is at or above the maximum") ;
        picker.date = oneSecondAfterPickersDate ;
    }
} 
```

以上`if`和`else if`部分几乎相同，但我将它们分开，以便我可以看到不同的 NSLog，也可以更好地调试。

[这是 GitHub 上的工作项目](https://github.com/JohnSauer/Date_Picker_Always_Stay_In_Bounds)。

# sql - 单个查询中多个 SQL 集合运算符的作用是什么？

> ID：14694455
> 
> 赞同：3
> 
> 时间：2013-02-04T19:53:36.167
> 
> 标签：sql, teradata

我试图了解具有多个“集合”运算符的现有查询发生了什么。我尝试过的各种网络搜索都没有发现任何东西，我对 Teradata 文档的快速浏览也没有发现任何东西。

这是我正在查看的查询的伪代码表示：

```
SELECT column from table1
UNION
SELECT column from table2
UNION
SELECT column from table3
MINUS 
   (select column from table 4)
UNION
SELECT column from table4 
```

我最感兴趣的是如何`MINUS`处理；它是仅从 table3 的前一个 SELECT 中减去行，还是从组合结果集中减去？请注意，表达式中的括号在`MINUS`我正在查看的代码中。

此外，我假设最后一个`UNION`根本不受`MINUS`操作的影响。

我确信我可以通过创建一些示例表自己解决这个问题，但我现在无法访问数据库（今天试图在家完成一些工作）。

仅供参考：Teradata`MINUS`与 ANSI 相同`EXCEPT`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T20:20:20.127

在 oracle [http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries004.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries004.htm)

> 您可以使用集合运算符 UNION、UNION ALL、INTERSECT 和 MINUS 组合多个查询。所有集合运算符具有*相同的优先级*。如果 SQL 语句包含多个集合运算符，则 Oracle 数据库从左到右计算它们，除非括号明确指定另一个顺序。

[http://www.postgresql.org/docs/current/static/sql-select.html#SQL-EXCEPT](http://www.postgresql.org/docs/current/static/sql-select.html#SQL-EXCEPT)

> 除非括号另有说明，否则同一 SELECT 语句中的多个 EXCEPT 运算符从左到右求值。EXCEPT 绑定在与 UNION 相同的级别。

但是，在 postgresql

[http://www.postgresql.org/docs/current/static/sql-select.html#SQL-INTERSECT](http://www.postgresql.org/docs/current/static/sql-select.html#SQL-INTERSECT)

> 同一 SELECT 语句中的多个 INTERSECT 运算符从左到右求值，除非括号另有说明。 *INTERSECT 比 UNION 结合得更紧密。*也就是说，A UNION B INTERSECT C 将被读作 A UNION (B INTERSECT C)。

强调，在任何引用中，都是我自己做的。

因此，这取决于实施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:08:12.170

[您可以在这个 sqlfiddle](http://sqlfiddle.com/#!4/49f2c/6)中看到 Oracle 如何处理它- 它适用`MINUS`于直到那时聚合的整个集合。其他 DB 的工作方式类似，而且 Teradata 的工作很可能是相同的，因为`EXCEPT`（Oracle 和 Teradata 调用`MINUS`）是 ANSI 标准运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T21:37:00.403

JayC 的回答为我提供了有关如何搜索的线索，并且我能够找到正确的 Teradata 参考。我会为未来的读者添加这个。从第 6 章，**SQL 函数、运算符、表达式和谓词**开始：

```
The precedence for processing set operators is as follows:
1 INTERSECT
2 UNION and MINUS/EXCEPT
The set operators evaluate from left to right if no parentheses explicitly specify another order. 
```

甚至还有一个与我的情况类似的例子。 [这是](http://www.info.teradata.com/edownload.cfm?itemid=102320046)下载pdf的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:01:09.397

我相信大多数数据库都是从上到下进行的，一路构建集合。但是，理想情况下，您应该编写代码以反映您想要的优先级，例如，

```
(((
SELECT column from table1
UNION
SELECT column from table2
) a
UNION
SELECT column from table3
) b
MINUS 
   (select column from table 4)
) c
UNION
SELECT column from table4 
```

# ruby-on-rails-3 - Ruby on Rails 虚拟主机推荐

> ID：14694460
> 
> 赞同：-1
> 
> 时间：2013-02-04T19:53:49.963
> 
> 标签：ruby-on-rails-3, web-hosting

有人可以推荐一个允许我使用最新版本的 Ruby 和 Rails 的网络主机吗？我试过 Dreamhost，但他们运行的是 Ruby 1.8.7，这意味着我必须重写我的整个应用程序。但我能负担的最多的是每月 10 美元左右。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:56:31.900

[Heroku](http://www.heroku.com/)是你的朋友。

*   单个测功机免费。
*   许多带有免费等级的插件。
*   在服务器管理职责中不要胡闹。
*   通过 git 部署。
*   通过 Gemfile 指定您的 Ruby 解释器和版本
*   即时资产编译

这太容易了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T12:14:46.667

查看[网络派系](http://www.webfaction.com)。不是免费的，但非常便宜，很棒的支持。共享主机，但您可以获得 ssh 访问权限并接近完全控制。如果需要，您可以安装自己的软件。如果您想要更多控制权或想要做的不仅仅是 Rails 站点，那就太好了。而且管理自己更容易，例如与[linode](http://linode.com)相比（您可以*完全*控制，但必须自己设置所有内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:55:02.350

在我看来，10 美元是一个相当大的预算，你也许可以考虑购买一个 VPS？我的一个朋友（教科书村 (.) com）从computinghost.com 获得了一个vps，他们为他编译了所有内容，但10 美元的控制面板为您提供了Zpanel 作为您的控制面板。所以，如果您可以通过命令行或可以通过您的应用程序界面完成所有操作。我会推荐它。

他们还提供共享托管服务，也许联系他们的支持会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T19:42:51.043

对于 Rails，拥有自己的环境比 Dreamhost 之类的共享主机要好。

Heroku，将是第一个推荐，当前的堆栈是支持 Ruby 1.9.3 的 Cedar Stack。如果您只使用一台 Dyno（大约 512MB RAM），DB 中有 10K 记录，则免费。

我们还使用 DigitalOcean - [http://digitalocean.com](http://digitalocean.com)进行一些托管。512 MB RAM 的计划起价为 5 美元。您可以在此运行一个体面大小的 Rails 应用程序。

您还可以查看 AWS，它提供一年免费套餐，主要是托管、存储等 - [http://aws.amazon.com/free/](http://aws.amazon.com/free/)如果您认为您需要在年底前扩大规模，这是一个不错的选择。

# video-encoding - Encoding.com 观看文件夹通知

> ID：14694463
> 
> 赞同：0
> 
> 时间：2013-02-04T19:53:53.433
> 
> 标签：video-encoding

我们正在使用 Encoding.com 的观看文件夹来处理来自我们的 Amazon S3 存储桶的视频。

它工作正常，但我们的通知有问题。我们希望它在我们的服务器中运行一个脚本来更新我们数据库中的视频状态并从 S3 中删除原始视频文件。在监视文件夹通知字段中，我们插入脚本 URL ( [http://www.domain.com/autocomplete/encoding-confirm/](http://www.domain.com/autocomplete/encoding-confirm/) )，但它永远不会运行。在我的浏览器中使用 URL 时，它运行良好。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:44:20.070

通知很可能是在 POST 请求中发送的，但如果在您使用浏览器点击 URL 时它有效，则可能意味着您的脚本正在侦听 GET 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:52:25.447

该脚本实际上正在运行，但由于通知返回 NULL，因此 PHP 脚本无法运行。

打开一个新线程，看看是否有人知道为什么这可能会返回 NULL。 [https://stackoverflow.com/questions/14739500/encoding-com-notifications-returning-null](https://stackoverflow.com/questions/14739500/encoding-com-notifications-returning-null)

# ruby-on-rails - 在 Sinatra 应用程序中加载 Rails 模型时出现“require”问题

> ID：14694465
> 
> 赞同：1
> 
> 时间：2013-02-04T19:54:00.230
> 
> 标签：ruby-on-rails, sinatra

根据我在某人博客上找到的示例，我使用以下代码将我的 acme 应用程序中的 Rails 模型嵌入（或者至少我*认为*我已经嵌入）到我的 Sinatra 应用程序中。rails 应用程序在`/Users/chris/acme`，Sinatra 应用程序在`/Users/chris/acme/services/sinatra/sinatra.rb`.

```
RAILS_ROOT = '../..'
LIB_DIR = "#{RAILS_ROOT}/lib"
MODELS_DIR = "#{RAILS_ROOT}/app/models"

require 'active_support/dependencies'
ActiveSupport::Dependencies.autoload_paths += Dir["#{LIB_DIR}/**/"]
ActiveSupport::Dependencies.autoload_paths += Dir["#{MODELS_DIR}/"]

require 'active_support/all'
require 'active_record'
::ActiveRecord::Base.establish_connection(
    YAML.load(File.read(
    File.expand_path('config/database.yml', RAILS_ROOT)))["development"])

require 'sinatra'

get '/user' do
  "#{User.first.id}"
end 
```

当我访问时，`http://localhost:4567/user`我收到以下错误：

```
LoadError - no such file to load -- util/versioning:
/Users/chris/.rvm/gems/ruby-1.9.2-p320@acme/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:242:in `require'
/Users/chris/.rvm/gems/ruby-1.9.2-p320@acme/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:242:in `block in require'
/Users/chris/.rvm/gems/ruby-1.9.2-p320@acme/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:225:in `block in load_dependency'
/Users/chris/.rvm/gems/ruby-1.9.2-p320@acme/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:597:in `new_constants_in'
/Users/chris/.rvm/gems/ruby-1.9.2-p320@acme/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:225:in `load_dependency'
/Users/chris/.rvm/gems/ruby-1.9.2-p320@acme/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:242:in `require'
/Users/chris/acme/app/models/user.rb:2:in `<top (required)>' 
```

第 2 行`user.rb`is `require 'util/versioning'`，这应该是自动加载的，但没有。

如果我将第 2 行更改为`user.rb`，`require '/Users/chris/acme/lib/util/versioning'`那么一切都会开始工作，但必须有更好的方法，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:06:18.117

您是否尝试过使用绝对路径`RAILS_ROOT`？像

```
RAILS_ROOT = '/Users/chris/acme' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:39:17.857

我从中删除`require 'util/versioning'`，现在它工作正常，包括从内部`user.rb`调用。这适用于 relative 或 absolute 。我想我似乎误解了如何正确使用，因为我不确定为什么我*不需要*一个我肯定在.`Util.Versioning``user.rb``RAILS_ROOT``require`*`user.rb`*

# mysql - 在 mysql 中将 char(5) 转换为 tinyint(4)

> ID：14694471
> 
> 赞同：2
> 
> 时间：2013-02-04T19:54:21.467
> 
> 标签：mysql

我正在尝试将行从一个表插入到另一个表。在第一个表中，一个列的数据类型是 char(5)，但同一列在第二个表中具有 tinyint(4) 数据类型。当我运行插入查询时，它说

```
Incorrect integer value: '' for column 'x' at row 258 
```

我现在无法更改或修改数据类型，因为它违反了一些约束。有没有办法使用强制转换或将 char 转换为 tinyint？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:00:34.483

你可能想要这样的东西：

```
INSERT INTO newtable
SELECT CASE WHEN x = '' THEN 0 ELSE x END
FROM oldtable 
```

我假设您希望空白变成零？如果不是，则提供您希望空白具有的整数值。

如果还有其他例外，请在 CASE 表达式中使用更多替代项。

# python - 使用 Python 将 html 转换为文本

> ID：14694482
> 
> 赞同：65
> 
> 时间：2013-02-04T19:55:10.673
> 
> 标签：python, html, web-scraping, text, beautifulsoup

我正在尝试使用 Python 将 html 块转换为文本。

**输入：**

```
<div class="body"><p><strong></strong></p>
<p><strong></strong>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Consectetuer adipiscing elit. <a href="http://example.com/" target="_blank" class="source">Some Link</a> Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Aenean massa.Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p></div> 
```

**期望的输出：**

> ****Lorem ipsum dolor sit amet，consectetuer adipiscing elit。Aenean commodo ligula eget dolor。埃涅马萨**
> 
>  **Consectetuer adipiscing 精英。一些 Link Aenean commodo ligula eget dolor。埃涅马萨
> 
> Aenean massa.Lorem ipsum dolor sit amet, consectetuer adipiscing elit。Aenean commodo ligula eget dolor。埃涅马萨
> 
> Lorem ipsum dolor sit amet，consectetuer adipiscing elit。Aenean commodo ligula eget dolor。埃涅马萨
> 
> Consectetuer adipiscing 精英。Aenean commodo ligula eget dolor。埃涅马萨****

 ****我尝试了该`html2text`模块但没有取得多大成功：

```
#!/usr/bin/env python

import urllib2
import html2text
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://example.com/page.html').read())

txt = soup.find('div', {'class' : 'body'})

print(html2text.html2text(txt)) 
```

该`txt`对象生成上面的 html 块。我想将其转换为文本并在屏幕上打印。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-02-04T20:06:25.120

`soup.get_text()`输出你想要的：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(html)
print(soup.get_text()) 
```

输出：

```
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
Consectetuer adipiscing elit. Some Link Aenean commodo ligula eget dolor. Aenean massa
Aenean massa.Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
Consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa 
```

要保留换行符：

```
print(soup.get_text('\n')) 
```

为了与您的示例相同，您可以用两个换行符替换换行符：

```
soup.get_text().replace('\n','\n\n') 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2019-04-24T08:03:53.837

可以使用 python 标准[`html.parser`](https://docs.python.org/3/library/html.parser.html)：

```
from html.parser import HTMLParser

class HTMLFilter(HTMLParser):
    text = ""
    def handle_data(self, data):
        self.text += data

f = HTMLFilter()
f.feed(data)
print(f.text) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-04T20:02:51.347

您可以使用正则表达式，但不建议这样做。以下代码删除数据中的所有 HTML 标记，为您提供文本：

```
import re

data = """<div class="body"><p><strong></strong></p>
<p><strong></strong>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Consectetuer adipiscing elit. <a href="http://example.com/" target="_blank" class="source">Some Link</a> Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Aenean massa.Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p></div>"""

data = re.sub(r'<.*?>', '', data)

print(data) 
```

**输出**

> ```
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
> Consectetuer adipiscing elit. Some Link Aenean commodo ligula eget dolor. Aenean massa
> Aenean massa.Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
> Consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa 
> ```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-04T20:11:08.527

在`'\n'`段落之间放置一个换行符。

```
from bs4 import Beautifulsoup

soup = Beautifulsoup(text)
print(soup.get_text('\n')) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-03T18:45:35.420

我非常喜欢@FrBrGeorge 的*无依赖*答案，因此我将其扩展为仅提取`body`标签并添加了一个便捷方法，以便 HTML 到文本是一行：

```
from abc import ABC
from html.parser import HTMLParser

class HTMLFilter(HTMLParser, ABC):
    """
    A simple no dependency HTML -> TEXT converter.
    Usage:
          str_output = HTMLFilter.convert_html_to_text(html_input)
    """
    def __init__(self, *args, **kwargs):
        self.text = ''
        self.in_body = False
        super().__init__(*args, **kwargs)

    def handle_starttag(self, tag: str, attrs):
        if tag.lower() == "body":
            self.in_body = True

    def handle_endtag(self, tag):
        if tag.lower() == "body":
            self.in_body = False

    def handle_data(self, data):
        if self.in_body:
            self.text += data

    @classmethod
    def convert_html_to_text(cls, html: str) -> str:
        f = cls()
        f.feed(html)
        return f.text.strip() 
```

用法见评论。

这将转换 中的所有文本`body`，理论上可以包括`style`和`script`标签。进一步的过滤可以通过扩展 的模式来实现`body`- 即设置实例变量`in_style`或`in_script`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-03-18T11:57:55.650

主要问题是如何保持一些基本格式。这是我自己保留新行和项目符号的最小方法。我确信这不是您想要保留的所有内容的解决方案，但它是一个起点：

```
from bs4 import BeautifulSoup

def parse_html(html):
    elem = BeautifulSoup(html, features="html.parser")
    text = ''
    for e in elem.descendants:
        if isinstance(e, str):
            text += e.strip()
        elif e.name in ['br',  'p', 'h1', 'h2', 'h3', 'h4','tr', 'th']:
            text += '\n'
        elif e.name == 'li':
            text += '\n- '
    return text 
```

上面为元素添加了一个新行`'br', 'p', 'h1', 'h2', 'h3', 'h4','tr', 'th'` 和一个新行`-``li`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-15T09:50:36.083

这里有一些不错的东西，我不妨提出我的解决方案：

```
from html.parser import HTMLParser
def _handle_data(self, data):
    self.text += data + '\n'

HTMLParser.handle_data = _handle_data

def get_html_text(html: str):
    parser = HTMLParser()
    parser.text = ''
    parser.feed(html)

    return parser.text.strip() 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-25T20:47:56.077

我需要一种在客户端系统上执行此操作的方法，而无需下载其他库。我从来没有找到一个好的解决方案，所以我创建了自己的解决方案。如果您愿意，请随意使用它。

```
import urllib 

def html2text(strText):
    str1 = strText
    int2 = str1.lower().find("<body")
    if int2>0:
       str1 = str1[int2:]
    int2 = str1.lower().find("</body>")
    if int2>0:
       str1 = str1[:int2]
    list1 = ['<br>',  '<tr',  '<td', '</p>', 'span>', 'li>', '</h', 'div>' ]
    list2 = [chr(13), chr(13), chr(9), chr(13), chr(13),  chr(13), chr(13), chr(13)]
    bolFlag1 = True
    bolFlag2 = True
    strReturn = ""
    for int1 in range(len(str1)):
      str2 = str1[int1]
      for int2 in range(len(list1)):
        if str1[int1:int1+len(list1[int2])].lower() == list1[int2]:
           strReturn = strReturn + list2[int2]
      if str1[int1:int1+7].lower() == '<script' or str1[int1:int1+9].lower() == '<noscript':
         bolFlag1 = False
      if str1[int1:int1+6].lower() == '<style':
         bolFlag1 = False
      if str1[int1:int1+7].lower() == '</style':
         bolFlag1 = True
      if str1[int1:int1+9].lower() == '</script>' or str1[int1:int1+11].lower() == '</noscript>':
         bolFlag1 = True
      if str2 == '<':
         bolFlag2 = False
      if bolFlag1 and bolFlag2 and (ord(str2) != 10) :
        strReturn = strReturn + str2
      if str2 == '>':
         bolFlag2 = True
      if bolFlag1 and bolFlag2:
        strReturn = strReturn.replace(chr(32)+chr(13), chr(13))
        strReturn = strReturn.replace(chr(9)+chr(13), chr(13))
        strReturn = strReturn.replace(chr(13)+chr(32), chr(13))
        strReturn = strReturn.replace(chr(13)+chr(9), chr(13))
        strReturn = strReturn.replace(chr(13)+chr(13), chr(13))
    strReturn = strReturn.replace(chr(13), '\n')
    return strReturn

url = "http://www.theguardian.com/world/2014/sep/25/us-air-strikes-islamic-state-oil-isis"    
html = urllib.urlopen(url).read()    
print html2text(html) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-12-12T22:58:43.577

可以使用 BeautifulSoup 删除不需要的脚本和类似内容，但您可能需要尝试几个不同的站点以确保您已经涵盖了您希望排除的不同类型的内容。试试这个：

```
from requests import get
from bs4 import BeautifulSoup as BS
response = get('http://news.bbc.co.uk/2/hi/health/2284783.stm')
soup = BS(response.content, "html.parser")
for child in soup.body.children:
   if child.name == 'script':
       child.decompose() 
print(soup.body.get_text()) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-09T20:38:16.607

[西班牙凉菜汤](https://github.com/maxhumber/gazpacho)可能是一个不错的选择！

输入：

```
from gazpacho import Soup

html = """\
<div class="body"><p><strong></strong></p>
<p><strong></strong>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Consectetuer adipiscing elit. <a href="http://example.com/" target="_blank" class="source">Some Link</a> Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Aenean massa.Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p>
<p>Consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa</p></div>
""" 
```

输出：

```
text = Soup(html).strip(whitespace=False) # to keep "\n" characters intact
print(text) 
```

> ```
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
> Consectetuer adipiscing elit. Some Link Aenean commodo ligula eget dolor. Aenean massa
> Aenean massa.Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa
> Consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa 
> ```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-25T13:48:46.503

一种基于两步[**`lxml`**](https://lxml.de/)的方法，在转换为纯文本之前对标记进行清理。

该脚本接受 HTML 文件的路径或管道标准输入。

将删除脚本块和所有可能不需要的文本。您可以配置[lxml Cleaner](https://lxml.de/api/lxml.html.clean.Cleaner-class.html)实例以满足您的需要。

```
#!/usr/bin/env python3

import sys
from lxml import html
from lxml.html import tostring
from lxml.html.clean import Cleaner

def sanitize(dirty_html):
    cleaner = Cleaner(page_structure=True,
                  meta=True,
                  embedded=True,
                  links=True,
                  style=True,
                  processing_instructions=True,
                  inline_style=True,
                  scripts=True,
                  javascript=True,
                  comments=True,
                  frames=True,
                  forms=True,
                  annoying_tags=True,
                  remove_unknown_tags=True,
                  safe_attrs_only=True,
                  safe_attrs=frozenset(['src','color', 'href', 'title', 'class', 'name', 'id']),
                  remove_tags=('span', 'font', 'div')
                  )

    return cleaner.clean_html(dirty_html)

if len(sys.argv) > 1:
  fin = open(sys.argv[1], encoding='utf-8')
else:
  fin = sys.stdin

source = fin.read()
source = sanitize(source)
source = source.replace('<br>', '\n')

tree = html.fromstring(source)
plain = tostring(tree, method='text', encoding='utf-8')

print(plain.decode('utf-8')) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-29T11:39:35.390

我个人喜欢[emehex](https://stackoverflow.com/a/64286995/2424880)的 Gazpacho 解决方案，但它只使用正则表达式来过滤掉标签。没有更多的魔法。这意味着解决方案将文本保留在 <style> 和 <script> 中。

所以我宁愿实现一个基于正则表达式的简单解决方案，并使用标准 Python 3.4 库来转义 HTML 实体：

```
import re
from html import unescape

def html_to_text(html):

    # use non-greedy for remove scripts and styles
    text = re.sub("<script.*?</script>", "", html, flags=re.DOTALL)
    text = re.sub("<style.*?</style>", "", text, flags=re.DOTALL)

    # remove other tags
    text = re.sub("<[^>]+>", " ", text)

    # strip whitespace
    text = " ".join(text.split())

    # unescape html entities
    text = unescape(text)

    return text 
```

当然，这并不能证明作为 BeautifulSoup 或其他解析器解决方案的错误。但是您不需要任何 3rd 方包。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-18T08:02:13.380

```
from html.parser import HTMLParser

class HTMLFilter(HTMLParser):
    text = ''
    def handle_data(self, data):
        self.text += f'{data}\n'

def html2text(html):
    filter = HTMLFilter()
    filter.feed(html)

    return filter.text

content = html2text(content_temp) 
```****

# youtube-api - YouTube Analytics API - Demographics 查询似乎需要最低观看次数

> ID：14694483
> 
> 赞同：1
> 
> 时间：2013-02-04T19:55:14.587
> 
> 标签：youtube-api, analytics

我一直在使用 YouTube Analytics API 中提供的人口统计查询，希望您能对以下情况有所了解：

*   如果我询问某个频道的受众特征，该频道的观看次数约为 2000 次或更少，我不会返回任何行。
*   如果我在单独的查询中要求 3 天，我仍然没有返回任何人口统计数据。
*   但是，如果我在跨越几天的单个查询中询问所有 3 天，我会得到人口统计数据

因此，在 API 返回人口统计数据之前，似乎有一个查询需要覆盖的最小视图数量，即使其他方法显示有一些可用的演示数据也是如此。我是否正确理解这一点？API 应该以这种方式运行吗？

[更新：我最初声明分析仪表板与 thi 上的 API 不匹配，而实际上它们返回相同的结果，所以我更新了标题和描述。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:10:39.653

我可以确认这是 API 和 YouTube 分析网络界面的预期行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T20:10:11.143

从统计的角度来看，这是有道理的。大多数统计数据都有误差范围，更大的样本有助于减少误差。如果没有足够的数据，分析将不准确。如果它们还包括误差范围，则可以显示这些分析（对于较小的数字），但如果误差范围太高，则数据将毫无用处。但是，应该可以使用 (N-3,N) 和 (N-3,N-1) 的人口统计数据以及这些范围的总观看次数（加上“N”天）来推断“N”天的数据（考虑到有人口统计数据范围）通过从 4 天范围中减去 3 天范围的人口统计数据。

例如（假设每天有 10,000 次观看），如果 4 天范围内有 40,000 名绿色观众的 75%，那么您在过去 4 天内有 30,000 名绿色（蜥蜴人）观众。如果在第 3 天（“N”天之前的 3 天）范围内，总共 30,000 名观众中有 87.5% 是绿色观众，那么您在该范围内有 26,250 名绿色观众。通过从 3 天范围中减去 4 天范围，您将在“N”天留下 3,750 个绿色观众，并且由于“N”天有 10k 次观看，这意味着其中 37.5% 的观看来自绿蜥蜴人。

它应该可以工作，但我不相信这些数据有可靠的误差范围。（如果是重要的事情，请不要使用它）

# mysql - MySQL 解释 vs 慢日志

> ID：14694486
> 
> 赞同：2
> 
> 时间：2013-02-04T19:55:39.227
> 
> 标签：mysql, performance, explain

使用 MySQL (5.1.66) 解释说它只会扫描 72 行，而“慢日志”报告整个表已被扫描 (Rows_examined: 5476845) 这怎么可能？我无法弄清楚查询有什么问题

`*name*`是一个字符串唯一索引， `*date*`只是一个常规的 int 索引

这是解释 `EXPLAIN SELECT * FROM table WHERE name LIKE 'The%Query%' ORDER BY date DESC LIMIT 3;`

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE 表索引名称日期 4 NULL 72 使用 where

```

慢日志的输出

`# Query_time: 5.545731 Lock_time: 0.000083 Rows_sent: 1 Rows_examined: 5476845 SET timestamp=1360007079; SELECT * FROM table WHERE name LIKE 'The%Query%' ORDER BY date DESC LIMIT 3;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:16:23.290

`rows`从 an 返回的值是对必须检查以查找与查询匹配的结果的行数`EXPLAIN`的*估计。*

如果您查看，您将看到为查询执行选择的键是`date`，这可能是由于您的`ORDER BY`子句而被选择的。因为查询中使用的键与您的子句无关`WHERE`，所以这可能就是估计被搞砸的原因。即使您的`WHERE`子句`LIKE`在`name`列上执行，优化器也可能决定根本不使用索引：

> 有时 MySQL 不使用索引，即使索引可用。发生这种情况的一种情况是优化器估计使用索引将需要 MySQL 访问表中很大比例的行。（在这种情况下，表扫描可能会快得多，因为它需要的搜索次数更少。）[来源](http://dev.mysql.com/doc/refman/5.1/en/mysql-indexes.html)

简而言之，优化器选择不使用`name`键，即使它是要返回的行的限制因素。您可以尝试[强制索引](http://dev.mysql.com/doc/refman/5.0/en/index-hints.html)以查看是否可以提高性能。

# android - 无法在 AVD 中启动/启动 Android 模拟器

> ID：14694487
> 
> 赞同：5
> 
> 时间：2013-02-04T19:55:48.620
> 
> 标签：android, emulation, avd

当我尝试从 AVD 启动模拟器时，我收到了这条消息：-

```
 Starting emulator for AVD 'Android_4.1'
 NAND: could not write file C:\Users\Hazem\AppData\Local\Temp\\AndroidEmulator\TMP3E19.tmp, No space left on device 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T10:56:20.277

删除 C:\ 驱动器中的一些文件，它已满是没有足够空间分配给模拟器的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-26T19:37:51.847

转到此位置 C:\Users\Hazem\AppData\Local\Temp\AndroidEmulator\，您将看到许多文件，例如 TMP3E19.tmp。继续并删除所有这些。如果您的模拟器已打开，您可能无法删除所有这些，只需单击跳过并尽可能多地删除即可。如果您的模拟器已关闭，您将能够删除所有这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-19T06:23:05.783

您只需要转到本地磁盘属性并单击磁盘清理，还请确保您已删除临时文件和回收站项目。它将删除所有转储文件并且您的内存将被释放..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-14T16:48:00.537

发生这种情况是因为，您在创建模拟器的驱动器中没有可用空间，请尝试删除该驱动器的几个项目，它会启动，确保驱动器中有 1 GB（用于预防措施）数据。它对我有用

# ruby-on-rails - 短时间内高流量

> ID：14694488
> 
> 赞同：1
> 
> 时间：2013-02-04T19:55:50.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, performance, heroku

我在这里寻求一些建议。我校学生部门注册流程在线，涉及约6,000名学生

他们以座位先到先得为基础。每年他们在中午打开网站，大量的人开始尝试尽快注册以获得好座位。每年服务器都会崩溃，每个人都很生气。

经过几年的沮丧，我提出重做他们的注册系统。

我的计划是用 ruby​​ on rails 重写它，并使用 heroku 进行托管。

*   heroku dyno 一次只处理一个请求吗？
*   Heroku 可扩展至 50 个测功机。这是否足以在很短的时间内（比如半小时）处理大约 6,000 名用户和每笔交易大约 5 次浏览量？
*   在我深入这个项目之前，你可以给我任何有用的策略或提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:33:45.757

> heroku dyno 一次只处理一个请求吗？

是的。Heroku dynos 是单线程的。

> Heroku 可扩展至 50 个测功机。这是否足以在很短的时间内（比如半小时）处理大约 6,000 名用户和每笔交易大约 5 次浏览量？

这取决于您的页面加载速度。为了争论，让我们假设每个页面请求需要 2 秒（根据 Google Analytics 的建议），并且您需要加载`6,000 users x 5 page views / 30 minutes`- 每分钟 1000 次页面浏览量。

在每页加载 2 秒的情况下，一个单独的测功机每分钟将加载 30 个页面浏览量。在 50 dynos 下，这将是每分钟 1500 次页面浏览量。这显然会让你超出你的*总体*目标并给你留下一些出错的空间，但如果所有 6000 名用户都同时访问该页面，那么单个 Heroku 应用程序可能无法跟上你的超时时间。您需要实现一个用户队列系统 - 如下所述。

> 在我深入这个项目之前，你可以给我任何有用的策略或提示吗？

总而言之，2 秒的加载时间可能会根据您的页面需要加载的资产、与数据库交互所需的数量、查询、缓存等而有所不同。您的页面也可能会更快地提供服务。

您还需要担心所有用户的初始点击量。这可以通过先到先得的队列系统来解决 - 如果您曾经使用过他们的网站，则类似于 Ticketmaster 使用的系统。这可以通过 AWS SQS 或您对队列系统的偏好来完成。

通过用户队列和资产缓存以及常见的数据库查询，您应该能够使用 50 个或更少的测功机来完成此任务。

*编辑：我相信 Heroku 将运行 50 个网络测功机。他们在定价页面上将 24 显示为最大值，但我无法以一种或另一种方式找到任何信息。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:03:45.247

> heroku dyno 一次只处理一个请求吗？

这取决于您使用的 Web 服务器（[https://devcenter.heroku.com/articles/dynos#dynos-and-requests](https://devcenter.heroku.com/articles/dynos#dynos-and-requests)）。如果您想在测功机中获得更多并发性，我建议您看一下[Puma](http://puma.io/)之类的东西。

> Heroku 可扩展至 50 个测功机。这是否足以在很短的时间内（比如半小时）处理大约 6,000 名用户和每笔交易大约 5 次浏览量？在我深入这个项目之前，你可以给我任何有用的策略或提示吗？

您可以拥有超过 50 个测功机。为您的应用程序提供的具体答案将比猜测或概括要好得多。对您的站点运行负载测试（例如，使用[Blitz](https://addons.heroku.com/blitz)）并找出实际数字。附加组件的成本按每秒按比例计算，因此您只需为安装它的期间付费。因此，请确保在完成测试后卸载或降级 Blitz。

# wordpress - 安装时触发默认值 wordpress 插件

> ID：14694490
> 
> 赞同：0
> 
> 时间：2013-02-04T19:56:08.667
> 
> 标签：wordpress

我花了很多时间来弄清楚这一点。如何在安装插件时自动填充字段的默认值或插入数据库。

我已经尝试了以下这些代码，但没有任何效果：

```
register_activation_hook(__FILE__, 'just_a_handler');
function just_a_handler($plugin_options) {
$defaults = array(
      'youtube_keyword' => 'keyword here',
      'youtube_author' => 'author here',
      'youtube_content' => 'by_keyword',
      'youtube_width' => '500',
      'youtube_height' => '350',
      'youtube_number_of_videos' => '5',
      'youtube_preview' => '',
    );
    $plugin_options = wp_parse_args(get_option('youtube_plugin_options'), $defaults);
} 
```

和这个：

```
register_activation_hook(__FILE__, 'just_a_handler');
    function just_a_handler() {
     add_option("youtube_keyword", 'keyword here', '', 'yes');
    add_option("youtube_author", 'author here', '', 'yes');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:16:33.473

要使用一些默认值自动填充选项，您可以执行以下操作。根据您执行此代码的时间，我认为在使用默认数据填充它之前检查该选项是否不存在是个好主意。另请记住，如果您要存储数组，则需要在将数据添加到数据库之前对其进行序列化。数据库只能存储数字、文本和日期。序列化获取一个数组并将其转换为序列化字符串。

```
function init_options() {
    $retrieved_options = array();
    $defaults = array(
      'youtube_keyword' => 'keyword here',
      'youtube_author' => 'author here',
      'youtube_content' => 'by_keyword',
      'youtube_width' => '500',
      'youtube_height' => '350',
      'youtube_number_of_videos' => '5',
      'youtube_preview' => '',
    );

    // Check to see if the option exists
    $retrieved_options = maybe_unserialize( get_option( 'youtube_plugin_options' ) );

    if ( $retrieved_options == '' ) {
        // There are no options set
        add_option( 'youtube_plugin_options', serialize( $defaults ) );
    } elseif ( count( $retrieved_options ) == 0 ) {
        // All options are blank
        update_option( 'youtube_plugin_options', serialize( $defaults ) );
    }
}

register_activation_hook( __FILE__, 'init_options' ); 
```

# ios - iOS“触摸返回导航”样式横幅

> ID：14694493
> 
> 赞同：9
> 
> 时间：2013-02-04T19:56:14.533
> 
> 标签：ios, controls

在手机应用程序或地图应用程序中，如果应用程序在后台，顶部会出现一个发光的“条”，用户可以触摸它以返回应用程序。对于 Apple 地图应用程序 - 这是“触摸返回导航”

这个控件叫什么？

是否有关于何时使用和何时不使用此控件的最佳实践。

发光是内置在这个控件中吗

# python - python - 类型错误

> ID：14694495
> 
> 赞同：-5
> 
> 时间：2013-02-04T19:56:18.107
> 
> 标签：python

这是我的代码：

```
def get_num():
    number = int(raw_input(" ")),
    print "|"
    return number
list_of_letter = ['a',   'b',   'c',    'd',    'e',    'f',    'g',    'h',    'i',    'j',    'k' 'l' 'm' 'n' 'o' 'p' 'q' 'r' 's' 't' 'u' 'v' 'w' 'x' 'y' 'z']
num = -1
print "welcome to the sudoko maker!!!"
print "I will start asking you information."
for lines in range (9):
    for ask in range(9):
        if num == 25:
             num = 0
        num = num + 1             
        print list_of_letter [num],
    print 
```

当我运行它时，python 写道： IndexError: list index out of range 为什么？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:57:55.900

您在列表中缺少几个逗号`list_of_letter`；从元素开始没有逗号`'k'`。结果，`list_of_letter`没有 25 个项目，而只有 11 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:05:18.973

除了 Tamas 答案之外，如果您制作`list_of_letter`单个字符串（可以以相同的方式索引），则更容易阅读和功能相同：

```
list_of_letter = 'abcdefghijklmnopqrstuvwxyz' 
```

# c++ - C++：在方法内部可以从类中创建一个未初始化的对象吗？

> ID：14694500
> 
> 赞同：0
> 
> 时间：2013-02-04T19:56:40.543
> 
> 标签：c++, class, object, methods, constructor

在方法内部可以从类中创建一个未初始化的对象吗？

这是一些上下文：想象一个构造函数都分配内存的类：

```
class NumberArray
{
  size_t m_Size;
  int *m_Numbers;

public:
  NumberArray() { m_Size = 1; m_Numbers = new int[1]; m_Numbers[0] = 0; }

  // . . . other methods for manipulating or constructing . . .

  ~NumberArray() { delete[] m_Numbers; }

  // What if I had a method that concatenates two arrays?
  NumberArray ConcatenateWith(const NumberArray &) const;
}; 
```

在这样的方法中，人们希望创建一个未初始化的 class 对象`NumberArray`，然后基于`this`参数中的对象“构造”一个​​新对象？又名：

```
NumberArray NumberArray::ConcatenateWith(const NumberArray &other) const
{
  // Mystery manner of creating an uninitialised NumberArray 'returnObject'.
  returnObject.m_Size = m_Size + other.m_Size;
  returnObject.m_Numbers = new int[returnObject.m_Size];
  std::copy(m_Numbers, m_Numbers + m_Size, returnObject.m_Numbers);
  std::copy(other.m_Numbers, other.m_Numbers + other.m_Size, returnObject.m_Numbers + m_Size);
  return returnObject;
} 
```

这样做的最佳方法是什么？基本上，我不希望默认构造函数创建一个大小为 1 的数组，我将删除该数组，然后再分配一个新数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:30:03.693

尚不清楚您要做什么，但是如果您只想创建一个类的新实例并且除了调用的默认构造函数之外没有其他构造函数，那么就这样做。

您所要做的就是创建一个`private`构造函数，它与默认构造函数具有不同的签名并且不分配内存（或以任何方式与默认构造函数不同）；然后在必要时让您的类在内部调用该构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:35:52.917

您要求的是**放置 new**。这看起来像这样：

```
#include <cstdlib>
#include <new>

void* mem = std::malloc(sizeof(T)); // memory for a T (properly aligned per malloc)

T* x = new (mem) T; // construct a T in that memory location
x->~T();            // destruct that T

std::free(mem); // and free the memory 
```

正确地执行此操作（以具有正确管理和对齐内存的异常安全方式）并非易事。您需要注意对象的生命周期。

对于您的问题，您正在准确描述做什么`std::vector`。它分配未初始化的原始内存并将插入的元素直接构造到该内存中。它的许多代码都致力于使生命周期和内存管理正确且异常安全！

您应该强烈喜欢使用`std::vector`而不是自己编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:49:56.980

据我所知，没有明确定义的方法可以在不调用它的构造函数的情况下创建对象。这与您是否有权访问其公共接口无关，但如果您想限制谁可以调用它，您可以实现私有或受保护的构造函数。从它自己的内部方法创建类的新实例并没有任何限制，事实上，如果你想限制所述对象在哪些条件下创建所述对象的实例，定义一个私有构造函数和一个静态公共方法是很常见的可以创建。

如果你愿意，你可以为一个对象分配足够的内存，并 reinterpret_cast 一个指向该内存的指针到你想要的类型的指针。这通常适用于 POD，但由于 C++ 中多态继承的许多实现（如果不是全部）添加了指向多态实例的 vtable 的指针，因此这种方法通常（如果不是总是）对那些实例失败。

简而言之，我建议创建一个私有构造函数并让一个静态方法调用它，然后执行您需要的任何其他工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T21:05:06.520

我认为这*可能*与您想要的类似，是一种“匿名”类：

```
struct test {
    virtual void doSomething() {
        puts("test");
    }
};

struct a {
    test *t() {
        struct b : test {
            void doSomething() {
                puts("b");
            };
        };

        return new b;
    };
};

int main()
{
    a a;

    a.t()->doSomething(); // outputs 'b'
} 
```

但是，由于切片以及`new`在 C++ 上的工作方式，您必须返回一个指针，并且“匿名”类型必须有一个名称，即使它仅限于函数。

如果您可以编辑 OP 并明确说明您希望通过此完成什么，也许我们可以为您提供更多帮助。

# python - 删除子图

> ID：14694501
> 
> 赞同：67
> 
> 时间：2013-02-04T19:56:42.063
> 
> 标签：python, matplotlib

我试图找出一种在 matplotlib 中删除（动态）子图的方法。我看到他们有一个`remove`方法，但我得到了错误

```
NotImplementedError: cannot remove artist 
```

我很惊讶我在任何地方都找不到这个。有谁知道如何做到这一点？

```
from matplotlib import pyplot as plt

fig, axs = plt.subplots(1,3)

axs[0].plot([1,2],[3,4])
axs[2].plot([0,1],[2,3])

plt.draw()
plt.tight_layout() 
```

[![在此处输入图像描述](../Images/d353c482a518dec278972d9950f38172.png)](https://i.stack.imgur.com/UoBJ1.png)

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-02-04T20:07:10.467

使用`fig.delaxes`或[`plt.delaxes`](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.delaxes.html)删除不需要的子图

```
fig, axs = plt.subplots(1,3)
axs[0].plot([1,2],[3,4])
axs[2].plot([0,1],[2,3])

fig.delaxes(axs[1])

plt.draw()
plt.tight_layout() 
```

[![在此处输入图像描述](../Images/186823b24a7dd87fd307212d695b1f1c.png)](https://i.stack.imgur.com/GQSgJ.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-01-15T02:51:08.340

```
ax.set_visible(False) 
```

在大多数情况下就足够了。

# cron - 如何在 CentOS 上设置 cron 作业

> ID：14694507
> 
> 赞同：11
> 
> 时间：2013-02-04T19:57:15.013
> 
> 标签：cron, centos, crontab, repeat

我不知道如何使用 ssh 设置 cron？我打开 ssh 并输入“crontab -e”。那我该怎么办？我想每分钟重复一次该功能。我将此代码作为“要运行的 cron 命令”：php -f /var/www/vhosts/nf-test-host.tk/httpdocs/admin/cron/cron.php。

我在 CentOS 上。我该怎么办，究竟是什么？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T07:16:43.150

您可以在 crontab 沙箱中尝试不同的计时值。它将向您显示运行时间列表。www.dataphyx.com/cronsandbox/。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T23:14:31.843

这是你的答案：

[http://drupal.org/node/23714](http://drupal.org/node/23714)

（如果您没有运行 Drupal，那很好，这仍然同样适用于您。）

让我们知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T13:55:26.383

使用命令：

```
sudo yum install vixie-cron crontabs 
```

或者看看这个 [http://shanerutter.co.uk/2011/11/23/centos-installing-cron-cronjobs-or-cron-daemon-crond/](http://shanerutter.co.uk/2011/11/23/centos-installing-cron-cronjobs-or-cron-daemon-crond/)

# jpa - JPA 标准等效查询子查询最大或最大

> ID：14694509
> 
> 赞同：2
> 
> 时间：2013-02-04T19:57:19.213
> 
> 标签：jpa, websphere, criteria, ejb-3.1, openjpa

此 SQL 查询完全执行执行时所需的操作。我正在寻找等效的 JPA 标准？基本上从一对多关系中获取设备实体和最新（最大）GPS坐标

```
SELECT DISTINCT t0.DEVICE_I, t0.ACTIVE_S, t0.APP_CONFIG_I, t0.PREV_APP_CONFIG_I, 
t0.APP_CONFIG_CONFIRMED_S, t0.APP_CONFIG_RECEIPT_D, t0.APP_CONFIG_SENT_S, t0.CHANNEL_X, 
t0.CREATION_TS, t0.CREATION_USER_I, t0.DEST_QUEUE_C, t0.DIVISION_C, t0.LAN_IP_X, 
t0.LAST_UPDATE_TS, t0.LAST_UPDATE_USER_I, t0.MOBILE_IP_X, t0.ORIGIN_MP_I, 
t0.PREV_CHANNEL_X, t0.TELEPHONE_NUMBER_X, t0.VERSION_X, t1.DEVICE_I, t1.COORDINATE_I, 
t1.CREATION_TS, t1.CREATION_USER_I, t1.GENERATED_TS, t1.GPGGA_X, t1.GPGSA_X, 
t1.GPGSV_X, t1.GPRMC_X, t1.GPVTG_X, t1.LAST_UPDATE_TS, t1.LAST_UPDATE_USER_I, 
t1.WORK_ORDER_NUMBER_I 

FROM DEVICE t0, GPS_COORD t1 

WHERE  t0.DEVICE_I = t1.DEVICE_I AND  
t1.GENERATED_TS IN ( select max(GENERATED_TS)
       from GPS_COORD
      group by DEVICE_I )
ORDER BY t1.DEVICE_I ASC, t1.GENERATED_TS DESC 
```

下面的 java 代码几乎就在那里，并生成以下查询，其中缺少 GpsCoord 所需的连接字段。如果完成获取，则包含这些字段，但稍后在子查询的 where 子句中需要加入：

```
 CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();

    CriteriaQuery<Device> cq = criteriaBuilder.createQuery(Device.class);

    Root<Device> device = cq.from(Device.class);
    cq.distinct(true);

    Join<Device, GpsCoord> j = device.join(Device_.gpsCoords, JoinType.LEFT);
    //Fetch<Device,GpsCoord> f = device.fetch(Device_.gpsCoords);

    CriteriaQuery<Device> select = cq.select(device);

    Subquery<Timestamp> sq = cq.subquery(Timestamp.class);
    Root<GpsCoord> gpsCoord = sq.from(GpsCoord.class);

    sq.select(criteriaBuilder.greatest(gpsCoord.get(GpsCoord_.generatedTs)));
    sq.groupBy(gpsCoord.get(GpsCoord_.device).get(Device_.deviceI));
    select.where(j.get(GpsCoord_.generatedTs).in(sq));

    TypedQuery<Device> query = this.getEntityManager().createQuery(cq); 
```

生成的查询缺少加入操作中的 GpsCoord 文件

```
SELECT DISTINCT t0.DEVICE_I, t0.ACTIVE_S, t0.APP_CONFIG_I, t0.PREV_APP_CONFIG_I,     
t0.APP_CONFIG_CONFIRMED_S, t0.APP_CONFIG_RECEIPT_D, t0.APP_CONFIG_SENT_S, 
t0.CHANNEL_X,     t0.CREATION_TS, t0.CREATION_USER_I, t0.DEST_QUEUE_C, t0.DIVISION_C, 
t0.LAN_IP_X, t0.LAST_UPDATE_TS, t0.LAST_UPDATE_USER_I, t0.MOBILE_IP_X, t0.ORIGIN_MP_I, 
t0.PREV_CHANNEL_X, t0.TELEPHONE_NUMBER_X, t0.VERSION_X 

FROM SPW_OWN.DEVICE t0, SPW_OWN.GPS_COORD t1 

WHERE (t1.GENERATED_TS IN (SELECT MAX(t2.GENERATED_TS) FROM SPW_OWN.GPS_COORD t2, 
SPW_OWN.DEVICE t3 WHERE t2.DEVICE_I = t3.DEVICE_I GROUP BY t3.DEVICE_I)) 

AND t0.DEVICE_I = t1.DEVICE_I(+) 
```

像这样使用 CriteriaQuery 中的多选会在执行时生成正确的 SQL，但是会出现以下异常

```
Caused by: java.lang.Exception: java.lang.RuntimeException: Can not find constructor for "class Device" with argument types "[class java.lang.String ... java.sql.Timestamp]" to fill data. 
```

通话后被抛出：

```
CriteriaQuery<Device> select = cq.multiselect(
                    //"deviceI",
                    device.get(Device_.deviceI),
                    //"activeS",
                    device.get(Device_.activeS),
                    //"appConfigConfirmedS",
                    device.get(Device_.appConfigConfirmedS),
                    //"appConfigReceiptD",
                    device.get(Device_.appConfigReceiptD),
                    //"appConfigSentS",
                    device.get(Device_.appConfigSentS),
                    //"channelX",
                    device.get(Device_.channelX),
                    //"destQueueC",
                    device.get(Device_.destQueueC),
                    //"lanIpX",
                    device.get(Device_.lanIpX),
                    //"mobileIpX",
                    device.get(Device_.mobileIpX),
                    //"prevChannelX",
                    device.get(Device_.prevChannelX),
                    //"telephoneNumberX",
                    device.get(Device_.telephoneNumberX),
                    //"versionX"
                    device.get(Device_.versionX),
                    //"device",
                    j.get(GpsCoord_.device),
                    //"gpggaX",
                    j.get(GpsCoord_.gpggaX),
                    //"gprmcX",
                    j.get(GpsCoord_.gprmcX),
                    //"gpgsaX",
                    j.get(GpsCoord_.gpgsaX),
                    //"gpgsvX",
                    j.get(GpsCoord_.gpgsvX),
                    //"gpvtgX"
                    j.get(GpsCoord_.gpvtgX),
                    j.get(GpsCoord_.generatedTs)
                    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:23:20.190

几个问题，

*   你打电话给 sq.from(GpsCoord.class); 两次
*   使用 device.fetch(Device_.gpsCoords); 还将获取对象，并将加入它两次
*   你的输入不正确，应该是，

select.where(criteriaBuilder.get(path).in(sq));

# java - 如何导出具有外部 Jar 依赖项的 Eclipse 项目？

> ID：14694512
> 
> 赞同：10
> 
> 时间：2013-02-04T19:57:32.067
> 
> 标签：java, eclipse, jar, processing, external-dependencies

在处理中，我想导入一个我用 Java 编写的库，该库包含一个外部库（一个 .jar 文件）。

Processing 似乎导入了我自己的库，但是当我调用构造函数（它引用外部库中的某些类）时，我`java.lang.NoClassDefFoundError`在 Processing GUI 控制台中得到一个。

如果我没有在我的 Eclipse 构建路径中包含 External .jar，而是使用库的实际源代码并导出所有这些，Processing 不会抱怨。

我怎样才能打包这个项目，这样我就不必在我的 Eclipse 项目中包含所有库的源代码（而只包含 .jar 文件）？

* * *

**更新**：根据 NLtelaviv 的建议，我选择导出为 Runnable JAR。对我有用的是选择“将所需的库复制到生成的 JAR 旁边的子文件夹中”选项。在这里，在您的 .jar 输出位置旁边创建另一个文件夹，其中包含引用的 .jar 库。

**Update2**：另一个有效的选项是“将所需的库提取到生成的 JAR 中”。这样做允许 JAR 在内部访问引用。似乎同样适用于 NLtelaviv 的建议，但情况似乎并非如此。如果您不想有任何额外的文件，请选择此选项。如果您浏览 .JAR 文件，您会注意到外部库位于单独的包文件夹中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T20:29:53.713

使用 Runnable JAR 文件导出选项。

点击你的项目--导出--java--runnable jar文件--选择打包需要jar包的选项

# java - 使用递归实现插入排序时出现 Stackoverflow 错误

> ID：14694517
> 
> 赞同：0
> 
> 时间：2013-02-04T19:57:50.423
> 
> 标签：java, recursion, stack-overflow, insertion-sort

```
public static void insertionSortRecursion(String a[], int first, int last) {
        if (first < last) {
            //sort all but last
            insertionSortRecursion(a, first, last - 1);
            insertInOrder(a[last], a, first, last -1);
        }
    }

    private static void insertInOrder(String element, String[] a, int first, int last) {
//        System.out.println(last - 1);
//        System.out.println(element);
//        System.out.println(a[last]);
        if (element.compareTo(a[last]) >= 0) {
            a[last + 1] = element;
        } else if(first < last) {
            a[last + 1] = a[last];
            insertInOrder(element, a, first, last - 1);
        } else {
            a[last + 1] = a[last];
            a[last] = element;
        }
    } 
```

嘿伙计们，我正在尝试使用递归来实现插入排序，它在少量单词上运行良好，但是在实现它之后我得到了 stackoverflow，因为我正在排序的文件大小有很多大约 10,000 个单词。请建议我应该怎么做才能消除错误。

```
These are the methods I am using for insertion sort using recursion and I am calling them in my constructor. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:04:09.957

假设您的算法是正确的，请保持此函数不变。不要试图修复它。一般来说，要摆脱堆栈溢出（同时保持递归），有两种解决方案：

*   使用[尾调用优化](https://stackoverflow.com/questions/310974/what-is-tail-call-optimization)
*   增加堆栈大小

但是让我们坐下来，假设这段代码不仅仅是一个编程练习。任何其他必须阅读的人都会认为：

1.  他为什么**使用**插入排序？
2.  他为什么要**重新实现**插入排序？
3.  **它必须是递归**吗？我的主！！
4.  他为什么要浪费时间寻找尾调用插入算法？或者
5.  他只是为了运行他的方法而增加了堆栈大小吗？
6.  好的。现在我们有`1000,000`项目要排序，程序不断崩溃。

结论，他们将立即删除您的代码并使用[Collections.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)。正如我所说，如果您正在进行编程练习，那么您的递归插入排序将一直工作到某个时候。继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:44:32.443

默认情况下，Java 无法处理那么深（10000）的递归深度。考虑以下过于简化的示例仍然会引发 StackOverflowError。

```
static void test(int i)
{
   if (i == 0) return;
   test(i-1);
}

public static void main(String[] args)
{
   test(10000);
} 
```

您必须指定命令行参数来实现这一点（`-Xss`并且可能`-Xmx`分配更多内存）。

`-Xmx1000m -Xss10000000`我使用（虽然花了一段时间）成功地运行了你的算法，用于一个大小为 100000 的数组。

我认为您使用递归而不是简单的双 for 循环是有原因的。

# c - 数组中分配的值更改，我不明白为什么

> ID：14694518
> 
> 赞同：1
> 
> 时间：2013-02-04T19:57:52.970
> 
> 标签：c, arrays, fgets

所以我对 C 编程很陌生，并且遇到了一个我真的不明白的问题。我正在从文件中读取行，并尝试将每一行（作为字符串）存储在一个数组中。然后我在该行上使用 strtok 来解​​析行外的另一个值。出于某种原因，在我使用 strtok 后，我放入数组中的值发生了变化。代码如下：

```
while(fgets(readLine, 100, inFile) != NULL) { 
    printf("j = %d\n", j);
    puts(readLine); 
    machineList[j] = readLine;
    puts(machineList[j]); //the value of machineList[j] at this point is equal
                          // to the current readLine 

    int i=0;

    day = strtok(readLine, " ,");

    puts(machineList[j]); //the value of machineList[j] at this point is no
                          //longer what it was at the previously noted point

    while(i<3) {
        day=strtok(NULL, " ,");
        i++;
    }
    dayList[j]=atoi(day);

    printf("Day is: %d\n\n", dayList[j] );  //these values come out as expected
    j++;

} 
```

谁能解释为什么会这样？我不明白，因为它不像我重新分配 machineList[j]=readLine。因此，即使 readLine 的值发生变化，它也不应该改变 machineList[j] 中的值。再说一次，我是 C 的新手，所以我意识到我的代码语义可能很糟糕——任何事情都有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:02:06.740

`strtok`通过用空字节替换分隔符来修改原始字符串。

我假设`machineList`是一个指向 的指针数组`char`，所以这是：

```
machineList[j] = readLine; 
```

...`machineList[j]`指向`readLine`. 然后这个：

```
day = strtok(readLine, " ,"); 
```

...modifies `readLine`，它也修改，`machineList[j]`因为它指向它。您需要制作一个副本：

```
// allocate machineList[j]
strcpy(machineList[j], readLine); 
```

如果你不复制，当你的`while`循环结束时，`machineList`基本上是一个悬空指针数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:02:31.893

你的问题在这里

```
machineList[j] = readLine; 
```

这不会**将**整个 char 字符串复制到`machineList[i]`，而只是将引用（指针、内存地址）复制到`readLine`。因此，如果您修改`readLine`,`machineList[j]`仍将引用此修改后的字符串。

如果要复制字符串，请使用`strcpy()`：

```
strcpy(machineList[j], readLine); 
```

`machineList`如果没有（复制之前） ，请不要忘记分配内存：

```
machineList[i] = malloc(strlen(readLine) + 1); 
```

恢复：

```
machineList[i] = malloc(strlen(readLine) + 1);
strcpy(machineList[j], readLine); 
```

或者，正如 Arkadiy 指出的，用`strdup()`一句话将分配和复制结合起来：

```
machineList[i] = strdup(readLine); 
```

完成后，不要忘记释放内存：

```
free(machineList[i]); // For each i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:09:20.190

```
while(fgets(readLine, 100, inFile) != NULL) { 
    printf("j = %d\n", j);
    puts(readLine); 
```

考虑一下，这里的地址`readLine`是 0x1234abcd。

```
 machineList[j] = readLine; 
```

现在，`machineList[j]`包含值（因此指向）0x1234abcd

```
 puts(machineList[j]); //the value of machineList[j] at this point is equal
                          // to the current readLine 
```

所以，你会得到正确的答案。

```
 int i=0;

    day = strtok(readLine, " ,"); 
```

不幸的是，这里 0x1234abcd 的值发生了变化（因为发生了`readLine`变化）。记住， 0x1234abcd`machineList[j]`指向`readLine`哪个地址

```
 puts(machineList[j]); //the value of machineList[j] at this point is no
                          //longer what it was at the previously noted point 
```

`:-(`不幸的是，您会得到不需要的结果。

相反，您可以使用`strdup()`（不是 STDC）在内存中创建一个新字符串，复制其中的数据`readLine`并返回指向内存的指针。

或者，您可以通过首先`malloc()`ing 字符串，然后使用`strcpy()`

# c++ - 如何让 GDB 继续运行，直到程序进入另一个函数？

> ID：14694520
> 
> 赞同：6
> 
> 时间：2013-02-04T19:57:57.140
> 
> 标签：c++, c, debugging, gdb

假设我在 A() 中，A() 调用 B()。我刚刚输入了 A()，我希望程序运行直到我进入 B()。它不必是特定的函数 B()。我只想让我的程序在进入新功能时暂停。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-06T15:25:47.173

对于调用，如在：[应用程序中进行的所有函数调用的列表中](https://stackoverflow.com/questions/9549693/gdb-list-of-all-function-calls-made-in-an-application)所述：

```
set confirm off
rbreak . 
```

`rbreak`为匹配给定正则表达式的每个函数设置断点，`.`匹配所有函数。

对于具有许多功能的大型可执行文件，此命令可能需要一段时间才能运行。但是一旦完成，运行时将是高效的。

退出比较棘手，因为我们在编译时不知道我们将降落在哪里：[如何在函数返回的 GDB 中设置断点？](https://stackoverflow.com/questions/3649468/setting-breakpoint-in-gdb-where-the-function-returns)

在[如何使用 GDB 中的特定操作码中断指令？](https://stackoverflow.com/questions/14031930/how-to-break-on-instruction-with-a-specific-opcode-in-gdb/14032055#14032055)我还提供了一个脚本，该脚本可以单步执行，直到找到所需的指令，您可以使用它来查找`callq`. 那个的好处是不会让你等待一个大的可执行文件，但是执行会很慢，所以目标不能离得很远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:06:02.500

`call`在指令上设置断点的形式会有一个很好的解决方案，但[正如这个答案所说](https://stackoverflow.com/a/14032055/13767)，没有办法做到这一点。

我认为，最简单的解决方案是手动设置断点或尝试[在 Python 中编写脚本，](http://tromey.com/blog/?p=548)在当前函数列表中找到函数调用并设置所需的断点。

# c# - 如何从 MySql 工作台获取 MySql DB 连接信息？

> ID：14694522
> 
> 赞同：7
> 
> 时间：2013-02-04T19:58:01.007
> 
> 标签：c#, asp.net, mysql, sql, workbench

我正在尝试使用 ASP.net 和 C# 连接到数据库。我浏览了 MySql 工作台教程并创建了一个数据库、eer 模型和表。

我现在需要的是数据库连接信息，特别是连接字符串。如何找到连接字符串中需要包含的信息？我的连接字符串中需要包含什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:59:42.970

[ConnectionStrings.com](http://connectionstrings.com)是一个很好的资源，可以详细了解连接字符串以及如何构造它们。

# shell - chsh：尝试将shell更改为zsh时，目录节点不支持操作

> ID：14694530
> 
> 赞同：2
> 
> 时间：2013-02-04T19:58:33.673
> 
> 标签：shell, terminal, osx-lion, zsh

我正在尝试将 zsh 安装为我的 shell。

我用 curl 来获取文件。

```
curl -L https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh | sh 
```

但是当它改变外壳时，它给了我......

```
chsh: Operation is not supported by the directory node.  Operation is not supported by the directory node. 
chsh: no changes made 
```

任何想法为什么会发生这种情况将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:01:31.827

首先是尝试从命令行更改外壳...

```
chsh -s `which zsh` 
```

我有以下代码来处理类似情况（无法在工作集群中更改登录 shell）。它从 bash 启动 zsh，并对其进行了一些处理（“为我工作”）

```
 # for hosts matching the silly name... start zsh from bash
  if [[ `uname -n` == foo-[0-9][0-9].bar.foobar.bar ]]; then
    if [[ -x `which --skip-alias zsh 2>/dev/null` ]]; then
        if [ -z $ZSH_STARTED ]; then
            export ZSH_STARTED="true"
            zsh
        fi
    fi
fi 
```

# java - Spring bean在创建时抛出错误

> ID：14694531
> 
> 赞同：0
> 
> 时间：2013-02-04T19:58:41.483
> 
> 标签：java, spring, maven, spring-security

我正在尝试创建一个 bean，但我收到了一个错误。我已将其范围缩小到这个特定的 bean，并且在引用了[API 文档](http://static.springsource.org/autorepo/docs/spring-security/3.1.1.RELEASE/apidocs/)之后，我不明白为什么每当我部署我的 .war 文件时它就会被抛出。希望我错过了一些简单的东西。

这是 app-security.xml 的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd

    <beans:bean id="contextSource" class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
        <constructor-arg value="ldap://localhost:389/dc=mydomain,dc=com" />
        <property name="userDn" value="cn=manager,dc=mydomain,dc=com" />
        <property name="password" value="password" />
    </beans:bean>

    <context:annotation-config/>
    <context:component-scan base-package="my.current.project"/>

</beans:beans> 
```

这是我的 maven pom.xml 的片段：

```
<properties>
    ...
    <spring.security.version>3.1.1.RELEASE</spring.security.version>
    ...
</properties>

<dependencies>
    ...
    <dependency>
         <groupId>org.springframework.security</groupId>
         <artifactId>spring-security-core</artifactId>
         <version>${spring.security.version}</version>
    </dependency>
    <dependency>
         <groupId>org.springframework.security</groupId>
         <artifactId>spring-security-web</artifactId>
         <version>${spring.security.version}</version>
    </dependency>
    <dependency>
         <groupId>org.springframework.security</groupId>
         <artifactId>spring-security-config</artifactId>
         <version>${spring.security.version}</version>
    </dependency>       
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-ldap</artifactId>
        <version>${spring.security.version}</version>
    </dependency>
    <dependency>
         <groupId>org.springframework.security</groupId>
         <artifactId>spring-security-taglibs</artifactId>
         <version>${spring.security.version}</version>
    </dependency>
    ...
</dependencies> 
```

这是抛出的错误：

```
SEVERE: Context initialization failed
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 88 in XML document from class path resource [app-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 88; columnNumber: 66; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'constructor-arg'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:546)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:905)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:740)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:500)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1345)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:303)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1337)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1601)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1610)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1590)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T20:00:17.653

您必须完全限定所有 XML 元素：

```
<beans:bean id="contextSource" class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
    <beans:constructor-arg value="ldap://localhost:389/dc=mydomain,dc=com" />
    <beans:property name="userDn" value="cn=manager,dc=mydomain,dc=com" />
    <beans:property name="password" value="password" />
</beans:bean> 
```

as`beans`不是默认命名空间。由于您从未在代码片段中使用默认 Spring Security 命名空间，因此只需创建`beans`一个默认命名空间：

```
<beans xmlns="http://www.springframework.org/schema/beans" 
```

并像往常一样声明bean。

# css - Firefox 和 Opera 不计算背景图像

> ID：14694532
> 
> 赞同：-3
> 
> 时间：2013-02-04T19:58:42.457
> 
> 标签：css, firefox, background-image, opera

## 问题

我刚刚在 Firefox 和 Opera 中发现了一个非常奇怪的问题`background-images`：规则根本没有被计算出来。

该规则不会显示在检查器列表中，背景中的图像甚至不会加载到网络监视器中。但是在加载的 css 文件中一切都很好，很难......规则，选择器，一切都很好。

*除了这两个之外，同一页面在所有其他浏览器中都可以正常工作。*

想知道以前有没有人有过这种经历。谢谢。

## 例子

[按照Vucko](https://stackoverflow.com/users/1763929/vucko)和[monkey](https://stackoverflow.com/users/341744/monkey)的建议，我可以设法重现[jsfiddle.net](http://jsfiddle.net)中的错误。我有两个小提琴：[一个正在工作](http://jsfiddle.net/wc5sb/6/)，[一个正在崩溃](http://jsfiddle.net/wc5sb/5/)。崩溃的更接近我在这里的上下文。希望能帮助到你。

*PS.：请注意，崩溃的实际上可以在 Opera 和 Firefox 以外的浏览器中运行。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:29:02.047

**只需删除CSS**代码中的最后一行。

`#myprojectname > #page1 > .beginning:after > h2 > div`.

在歌剧和 Mozilla 中测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:02:42.813

您是否提供了类似 in 的相对 URI `background-image: url(img/picture.jpg)`？相对 URI 始终以 CSS 文件作为根来解析。

意思是，如果你有以下文件布局： /css/style.css /img/picture.jpg /index.html

你必须改写`background-image: url(../img/picture.jpg)`。

设置基本标签`<base href="/" />`对您没有帮助，因为设置不会转移。

# javascript - 在 Google 自定义搜索 (CSE) 上添加“下一个”和“上一个”链接

> ID：14694533
> 
> 赞同：2
> 
> 时间：2013-02-04T19:58:44.610
> 
> 标签：javascript, search, google-custom-search

是否可以在 Google 自定义搜索的页面结果中添加下一个和上一个链接？我找到了这个线程[如何在 Google 自定义搜索引擎分页链接中显示下一个/上一个链接，](https://stackoverflow.com/questions/3302495/how-to-show-next-previous-links-in-google-custom-search-engine-paging-links)但代码适用于旧版本的 Google 自定义搜索。

较新的版本只是给你一个类似的标签`<gcse:searchresults-only></gcse:searchresults-only>`，一切都由此生成。有任何想法吗？谢谢

这就是搜索结果被拉进来的方式。

```
<script>
(function() {
    var cx = 'xxxxxx:xxxxx',
        gcse = document.createElement('script');

    gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
})();
</script>

<gcse:searchresults-only></gcse:searchresults-only> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T04:24:45.420

你可以使用`searcher.cursor.currentPageIndex`和`searcher.gotoPage()`所有这些包裹在`google.setOnLoadCallback`

```
window.customSearchControl = customSearchControl;

$(function() {

    var link = $('<a />', {
        'html' : 'link',
        'href' : '#',
        'class' : 'general-button',
        'style' : 'margin-right:1em'
    });

    var searcher = window.customSearchControl.getWebSearcher();

    var prev = link.clone().click(function(e) {
        e.preventDefault();
        var topage = searcher.cursor.currentPageIndex - 1;
        if(topage < 1) {
            topage = 0;
        }
        searcher.gotoPage(topage);
        return false;
    }).html('&lt; prev');

    var next = link.clone().click(function(e) {
        e.preventDefault();
        var topage = searcher.cursor.currentPageIndex + 1;
        if(topage > searcher.cursor.pages.length) {
            topage = 10;
        }
        searcher.gotoPage(topage);
        return false;
    }).html('next &gt;');

    $('#cse').append(prev).append(next);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-05T12:54:23.247

我使用了一些 Jquery，但可以不用。我把解释放在代码中。

```
 //Listens for DOM changes
var observer = new MutationObserver(function (mutations, observer) {
    // fired when a mutation occurs
    makeNext();
});

// define what element should be observed by the observer
// and what types of mutations trigger the callback
observer.observe(document, {
    subtree: true,
    attributes: true
});

function makeNext() {
    //Make a Next element
    var el = $("<div></div>", {
        "id": "next",
        "class": "gsc-cursor-page", // need google class so is same look and works with them
        "text": "Next",
        "on": { // on click, find what is the current page, and trigger click on the one after
            "click": function () {
                $(".gsc-cursor-current-page").next(".gsc-cursor-page").click();
            }
        }
    });
    //When results load, lots of changes are made, but we only wont 1 Next button
    if ($("#next").length == 0) {
        $(".gsc-cursor").append(el);
    }
} 
```

# c++ - 保存巨大的字符串

> ID：14694537
> 
> 赞同：-2
> 
> 时间：2013-02-04T19:59:05.530
> 
> 标签：c++, string

我正在编写应该使用几个大字符串的代码。这些字符串在代码开始运行之前是已知的。字符串的形式为：text1 text2 text3 ... textn

每个文本都是一些句子（可以有一个空格。我不喜欢将其保存在文件中并从文件后缀中读取。如何将其保存在字符串中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:08:31.580

在这里试试这个：

```
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  string str = "huge string...";
  filebuf fb;
  fb.open("test.txt", ios::out);
  ostream os(&fb);
  os << str;
  fb.close();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:13:44.380

如果字符串是常量，我建议将文本放入单独的文件中。这是解决本地人和语言翻译问题的常用解决方案。

**文本.cpp：**

```
const char Text1[] = "text1";
const char Text2[] = "text2";
//... 
```

**文本.hpp：**

```
#ifndef TEXT_HPP  
#define TEXT_HPP  
extern const char Text1[];
extern const char Text2[];
#endif 
```

# php - php我如何打印具有相同键的值

> ID：14694544
> 
> 赞同：0
> 
> 时间：2013-02-04T19:59:16.467
> 
> 标签：php

我有一些问题

```
this is my orginal array and cood below **will not work** on this array
<?php 
$rijeci=array ( "tekst"=> "osoba" ,"vrsta" => "imenica", 
                "tekst"=> "kuha" , "vrsta" => "glagol", 
                "tekst"=> "crnu" , "vrsta" => "pridjev",  
                "tekst"=> "kavu" , "vrsta" => "imenica",
                "tekst"=> "kopa" , "vrsta" => "glagol")
?> 
```

这是我更改的数组

```
<?php 
$rijeci=array ( "tekst1"=> "osoba" ,"vrsta1" => "imenica", 
                "tekst2"=> "kuha" , "vrsta2" => "glagol", 
                "tekst3"=> "crnu" , "vrsta3" => "pridjev",  
                "tekst4"=> "kavu" , "vrsta4" => "imenica",
                "tekst5"=> "kopa" , "vrsta5" => "glagol")
?> 
```

1）我如何回应这个 *osoba、kuha、crnu、kavu、kopa、*

这将在我更改的数组中工作

```
foreach($rijeci as $key => $var){
    if($var != "imenica" && $var != "glagol"  && $var != "pridjev" )
        echo "$var "  ; 
```

2) 我如何回应这个 *Imenice: osoba kavu Glagol: kuha kopa Pridjev: crnu*

这将在我更改的数组中工作，但是还有其他方法可以打印吗？

```
 $prethodna = null;
    if($m=="prikazVrstaRijeci"){
    echo "Imenice:\n" ;
foreach ($rijeci as $kljuc => $vrijednost){
    if($vrijednost == "imenica"){
        if($prethodna) {
          echo "$prethodna ";
       }
    }
    $prethodna = $vrijednost;
}
echo "<br />";
echo "Glagol:\n" ;
foreach ($rijeci as $kljuc => $vrijednost){
    if($vrijednost == "glagol"){
        if($prethodna) {
            echo "$prethodna ";
        }
    }
    $prethodna = $vrijednost;
}
echo "<br />";
echo "Pridjev:\n" ;
foreach ($rijeci as $kljuc => $vrijednost){
    if($vrijednost == "pridjev"){
        if($prethodna) {
            echo "$prethodna ";
        }
    }
    $prethodna = $vrijednost;
}
} 
```

我如何在我的原始数组中打印 1.) 2.) 问题？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:05:50.410

您不能拥有具有不同值的相同键您可以将数组更改为此

```
$rijeci=array ("osoba" ,"imenica", 
               "kuha" ,  "glagol", 
              "crnu" , "pridjev",  
             "kavu" , "imenica",
             "kopa" , "glagol") 
```

现在这个代码工作

```
foreach($rijeci as $key => $var){
if($var != "imenica" && $var != "glagol"  && $var != "pridjev" )
    echo $var; 
```

在这个数组中为 Echo That List 你可以这样做

```
 <?php 
 $rijeci=array ( "tekst1"=> "osoba" ,"vrsta1" => "imenica", 
            "tekst2"=> "kuha" , "vrsta2" => "glagol", 
            "tekst3"=> "crnu" , "vrsta3" => "pridjev",  
            "tekst4"=> "kavu" , "vrsta4" => "imenica",
            "tekst5"=> "kopa" , "vrsta5" => "glagol")
 foreach($rijeci as $key => $var){
   switch( $var){
     case "osoba":
       echo $var; 
     break;
     case "kuha":
       echo $var; 
     break;
     case "crnu":
       echo $var; 
     break;
     case "kavu":
       echo $var; 
     break;
     case "kopa":
       echo $var; 
     break;
   }
   echo ",";

 }

 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:11:59.353

没有办法让您的第一个示例按您希望的方式工作。PHP 数组只能包含给定键的单个值。你的数组上的A`var_dump()`会告诉你你不能打印你想要的值，*因为它们不存在*。但是，您可以做的是使用嵌套数组，如下所示：

```
$rijeci=array ( array("tekst"=> "osoba" ,"vrsta" => "imenica"),
                array("tekst"=> "kuha" , "vrsta" => "glagol"),
                array("tekst"=> "crnu" , "vrsta" => "pridjev"),
                array("tekst"=> "kavu" , "vrsta" => "imenica"),
                array("tekst"=> "kopa" , "vrsta" => "glagol"));

foreach ($rijeci as $pair) {
    print $pair['tekst'];
    print " ";
    print $pair['vrsta'];
    print "\n";
} 
```

您还可以在嵌套数组中使用命名索引，例如：

```
$rijeci = array(
    'imenica' => array('osoba', 'kavu'),
    'glagol' => array('kuha', 'crnu'),
    'pridjev' => array('crnu'),
    );

foreach ($rijeci as $vrsta => $stuff) {
    print "$vrsta : ";
    foreach ($stuff as $tekst) {
        print "$tekst, ";
    }
    print "\n";
} 
```

或者，您可以编写该循环，如：

```
foreach ($rijeci as $vrsta => $stuff) {
    print "$vrsta : ";
    print implode($stuff, ',');
    print "\n";
} 
```

希望这足以让您走上解决方案的道路。

# javascript - 如何在 JavaScript 中的特定行上动态加载文件？

> ID：14694545
> 
> 赞同：0
> 
> 时间：2013-02-04T19:59:18.743
> 
> 标签：javascript, jquery, ajax, dynamic, modernizr

我为客户网站的文件创建了这个脚本，`core.js`我想从该`core.js`文件中动态加载一些 javascript 库。但是，javascript 库要求您*首先*加载该库，然后使用脚本的其余部分，因为您必须在调用它之前定义您的库对象，doh。所以我有这个非常简单的脚本来动态加载文件，但我想知道是否有一种方法可以确保它在`core.js`文件之前优先加载它。这是当前脚本：

```
(function() {
    var script = document.createElement("script");
    script.setAttribute("type", "text/javascript");
    script.setAttribute("src", "http://modernizr.com/downloads/modernizr-latest.js");
    if(typeof script != "undefined") {
        document.getElementsByTagName("head")[0].appendChild( script );
    }
})(); 
```

在调试器中，您会看到：

[![](../Images/3beb17268f9c9459d7bc34475ec6c55d.png)](https://images.wikia.com/private-tfc-storage/images/a/a3/Untitled.PNG)

当然，它会在核心文件之前加载动态文件，但我想知道是否有办法指定要加载`modernizr`文件的文档行？否则，即使我已经加载了 Modernizr，我也无法使用它。

显然，我不能使用 jQuery，因为我也想加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:17:28.677

`load`您可以使用事件侦听器响应动态加载的 JavaScript 资源（或任何资源，就此而言——图像、iframe、视频等）的加载。在这里最简单的方法是：

```
(function() {
    var script = document.createElement("script");
    ...
    script.onload = function() {
        // this will run later, when the script loads
        // in this function you can safely use Modernizr
    }
})(); 
```

# html - 左浮动div问题

> ID：14694549
> 
> 赞同：0
> 
> 时间：2013-02-04T19:59:38.790
> 
> 标签：html, css-float, width

我对父 div 内的左浮动 div 有两个问题。我花了5个多小时尝试不同的东西，在互联网上搜索，但找不到解决方案！认为这里有人可以提供帮助。

这是场景：

```
<div id="parent_div">
<div class="left_floating" style="height:20px; width: 100%; clear:left;"><label style="text-align:center"> This is the title div </label></div> 
<div class="left_floating" style="height:50px; width:50px;"> 1 </div>
<div class="left_floating" style="height:20px; width:50px;"> 2 </div>
<div class="left_floating" style="height:20px; width:50px;"> 3 </div>
</div> 
```

问题 1：我想要的：标题始终位于其他三个 div 的中心/无论屏幕大小如何。会发生什么：如果你缩小屏幕的大小，当 div 3 没有足够的空间时，它会下降（这就是我想要的），但 div 2 的右侧会留下一些间隙这使得父div的宽度大于100px（div 1的宽度+div 2的宽度），即父div从侧面看不紧。这使得标题不在中心。我怎样才能解决这个问题？

问题2：我想要什么：当屏幕缩小并且div 3下降时，它应该在div 1之下。会发生什么：div 3在div 2之下，因为div 2的高度小于div 1的高度。注意如果 div 2 的高度大于 div 1 的高度，则结果将是理想的结果。有什么建议么？

如果有的话，我确实更喜欢 css 解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:46:17.163

关于问题 1：您可能希望通过媒体查询来解决这个问题。听起来在某些分辨率下，您希望 css 表现不同，这就是媒体查询的优势所在。你可能会想要一些类似的东西

```
@media (max-width: n px) {
    #parent_div {
        width: 100px;
    }

@media (min-width: n+1 px) {
    #parent_div {
        width: 150px;
    } 
```

关于问题 2：您可以创建一个 div 来包装 div 2 以使其具有更大的静态高度，以便 div 3 适当地浮动。只需让包装器向左浮动，让 div 2 不浮动。

```
<div id="parent_div">
<div class="left_floating" style="height:20px; width: 100%; clear:left;">
    <label style="text-align:center"> This is the title div </label>
</div> 
<div class="left_floating" style="height:50px; width:50px;"> 1 </div>
<div style="float:left; height:50px; width:50px;">
    <div class="left_floating" style="float:none; height:20px; width:50px;"> 2 </div>
</div>
<div class="left_floating" style="height:20px; width:50px;"> 3 </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:55:56.080

您可以通过使用媒体查询来实现您想要的。这是使用您提供的标记的示例：http: [//jsfiddle.net/VQMrY/1/](http://jsfiddle.net/VQMrY/1/)

请注意我所做的 CSS 更改：使标签成为块元素和媒体查询（基于将显示结果的屏幕宽度）。我在元素周围设置了边框，以便更容易看到。我还在父容器中添加了一个 clr 类。

在媒体查询中，我将 div '2' 设置为向右浮动，这样你就没有那个间隙，然后设置 '3' 来清除两者，这样它就会低于'1'。希望这会有所帮助！

```
@media screen and (max-width: 3550px) {
 .second {float: right;}
 .third {clear: both;} 
```

}

只需将最大宽度编辑为您希望断点发生的位置。

# c# - 无法加载文件或程序集 System.Web.Mvc

> ID：14694551
> 
> 赞同：22
> 
> 时间：2013-02-04T19:59:45.553
> 
> 标签：c#, asp.net, asp.net-mvc, umbraco

我在我的项目中使用 umbraco 4.11.3。我的项目在 Windows 7 上运行良好并从 Visual Studio 2012 运行它。但是当它从 Visual Studio 2012 运行时它在 Win 8 中不起作用！

错误是：

> 无法加载文件或程序集“System.Web.Mvc，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.IO.FileLoadException：无法加载文件或程序集“System.Web.Mvc，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 程序集加载跟踪：以下信息有助于确定为什么无法加载程序集“System.Web.Mvc，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”。
> 
> === 预绑定状态信息 === LOG: User = Jahan-PC\jahan LOG: DisplayName = System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 (完全指定) LOG: Appbase = file:///G:/20130204/SourceCode/Defraz.Movafaqiyat.WebApp/Defraz.Movafaqiyat.WebApp/ LOG: Initial PrivatePath = G:\20130204\SourceCode\Defraz.Movafaqiyat.WebApp\Defraz.Movafaqiyat.WebApp\ bin 调用程序集：ClientDependency.Core.Mvc，Version=1.5.1.0，Culture=neutral，PublicKeyToken=null。=== LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：G:\20130204\SourceCode\Defraz.Movafaqiyat.WebApp\Defraz.Movafaqiyat.WebApp\web.config LOG：使用主机配置文件：C:\Users\jahan\Documents\IISExpress\config\aspnet .config LOG：使用 C:\Windows\Microsoft 中的机器配置文件。NET\Framework\v4.0.30319\config\machine.config。日志：策略后参考：System.Web.Mvc，版本=2.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 日志：尝试下载新 URL 文件：///C:/Users/jahan/AppData/Local/Temp /临时 ASP.NET 文件/root/bc5b37d0/42db0b24/System.Web.Mvc.DLL。日志：尝试下载新的 URL 文件：///C:/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/bc5b37d0/42db0b24/System.Web.Mvc/System.Web.Mvc.DLL . 日志：正在尝试下载新的 URL 文件：///G:/20130204/SourceCode/Defraz.Movafaqiyat.WebApp/Defraz.Movafaqiyat.WebApp/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。Web.Mvc，版本=2.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 日志：尝试下载新 URL 文件：///C:/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/ bc5b37d0/42db0b24/System.Web.Mvc.DLL。日志：尝试下载新的 URL 文件：///C:/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/bc5b37d0/42db0b24/System.Web.Mvc/System.Web.Mvc.DLL . 日志：正在尝试下载新的 URL 文件：///G:/20130204/SourceCode/Defraz.Movafaqiyat.WebApp/Defraz.Movafaqiyat.WebApp/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。Web.Mvc，版本=2.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35 日志：尝试下载新 URL 文件：///C:/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/ bc5b37d0/42db0b24/System.Web.Mvc.DLL。日志：尝试下载新的 URL 文件：///C:/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/bc5b37d0/42db0b24/System.Web.Mvc/System.Web.Mvc.DLL . 日志：正在尝试下载新的 URL 文件：///G:/20130204/SourceCode/Defraz.Movafaqiyat.WebApp/Defraz.Movafaqiyat.WebApp/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/bc5b37d0/42db0b24/System.Web.Mvc.DLL。日志：尝试下载新的 URL 文件：///C:/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/bc5b37d0/42db0b24/System.Web.Mvc/System.Web.Mvc.DLL . 日志：正在尝试下载新的 URL 文件：///G:/20130204/SourceCode/Defraz.Movafaqiyat.WebApp/Defraz.Movafaqiyat.WebApp/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/bc5b37d0/42db0b24/System.Web.Mvc.DLL。日志：尝试下载新的 URL 文件：///C:/Users/jahan/AppData/Local/Temp/Temporary ASP.NET Files/root/bc5b37d0/42db0b24/System.Web.Mvc/System.Web.Mvc.DLL . 日志：正在尝试下载新的 URL 文件：///G:/20130204/SourceCode/Defraz.Movafaqiyat.WebApp/Defraz.Movafaqiyat.WebApp/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。/20130204/SourceCode/Defraz.Movafaqiyat.WebApp/Defraz.Movafaqiyat.WebApp/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。/20130204/SourceCode/Defraz.Movafaqiyat.WebApp/Defraz.Movafaqiyat.WebApp/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。
> 
> 堆栈跟踪：
> 
> [FileLoadException: 无法加载文件或程序集 'System.Web.Mvc，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）]
> ClientDependency.Core.Mvc.MvcFilter.ValidateCurrentHandler() +0
> ClientDependency.Core.Module.ClientDependencyModule.b__0(IFilter f) +31 System.Linq.Enumerable.Any(IEnumerable `1 source, Func`2 谓词) +146
> ClientDependency.Core.Module.ClientDependencyModule.ValidateCurrentHandler(IEnumerable`1 过滤器) +127
> ClientDependency.Core.Module.ClientDependencyModule.HandleRequest(Object sender, EventArgs e) +179
> System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69

注意：在 IIS 上发布的项目在 win7 和 win8 下运行良好。我的项目不是基于 ASP.NET MVC。请帮我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T22:06:49.257

我们正在使用 Azure 云来运行部署，但我遇到了同样的错误。由于您不能真正将包安装到服务器实例上，解决此问题的方法是进入项目的引用，找到它抱怨的库的引用丢失，进入属性，然后将 Copy Local 设置为 True。重新部署，一切就绪。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-26T09:17:08.140

此问题的正确解决方法是：

1.  右键单击并`References`选择`Solution Explorer``Manage NuGet Packages`
2.  在左侧选择`Updates`
3.  在中间部分选择`Microsoft ASP.NET MVC`
4.  您应该会看到一个`Update`按钮出现在您的选择中，单击它

就是这样...接受任何可能弹出的条款和条件，然后在本地发布或运行您的项目。如果您仍然在本地运行项目时遇到问题，请尝试关闭 Visual Studio，删除项目的 .SUO 文件，然后尝试再次打开解决方案...再次尝试运行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-04T22:57:41.547

我假设这是一台新机器，因为您拥有新的操作系统和不同版本的 Visual Studio。我认为您需要安装 MVC Framework 版本 2，因为这是您的 Umbraco 安装所期望的。您可以安装框架，然后将 DLL 放入您的 GAC，或者将 DLL 从您的良好系统复制到 Web 应用程序的 bin 文件夹中。

请注意，您是在说您的项目“不使用”MVC，但我认为您会发现 Umbraco 确实如此。无论如何，该错误告诉您系统希望找到它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-05T08:31:01.890

Umbraco 4.11.3 不使用 MVC2，它使用 MVC3，所以我猜你的 web.config 中有对 MVC2 库的引用，可能在该`compilation > assemblies`部分中。它应该看起来像这样：

```
<compilation defaultLanguage="c#" batch="false" targetFramework="4.0" debug="true">
  <assemblies>
    <!-- ASP.NET 4.0 Assemblies -->
    <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
    <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    <add assembly="System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
    <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
  <!-- Added in Umbraco 4.6.2 -->
  <buildProviders>
    <add extension=".cshtml" type="umbraco.MacroEngines.RazorBuildProvider, umbraco.MacroEngines" />
    <add extension=".vbhtml" type="umbraco.MacroEngines.RazorBuildProvider, umbraco.MacroEngines" />
    <add extension=".razor" type="umbraco.MacroEngines.RazorBuildProvider, umbraco.MacroEngines" />
  </buildProviders>
  <!-- End of added in Umbraco 4.6.2 -->
</compilation> 
```

# c# - 使用 ODP.Net 从 Oracle 返回多个错误

> ID：14694555
> 
> 赞同：1
> 
> 时间：2013-02-04T19:59:59.103
> 
> 标签：c#, .net, oracle, odp.net

我正在使用 Oracle 用户来验证 .Net 应用程序的用户名和密码。现在我正在研究密码更改功能。数据库具有自定义密码验证，因此如果您尝试更改用户密码并且提供了无效密码，Oracle 会返回多个错误。

第一个错误总是*"ORA-28003: password verification for the specified password failed"*，然后每次验证失败都会产生一个错误。当我尝试从 Toad 客户端更改用户密码时，这会正确显示。

但是，当我从我的应用程序中执行此操作时，出现的 OracleException 仅返回第一个错误，因此我无法向用户显示他提供的新密码的无效之处。

根据[ODP.Net 文档](http://docs.oracle.com/cd/B28359_01/win.111/b28375/OracleExceptionClass.htm) *“[i]如果有多个错误，ODP.NET 只返回堆栈上的第一条错误消息。”* 我怎样才能避免这种情况？如何显示发生的所有错误？

# grails - 有没有办法让 Grails 中的控制器可以访问函数？

> ID：14694558
> 
> 赞同：0
> 
> 时间：2013-02-04T20:00:06.930
> 
> 标签：grails, groovy

我希望能够创建全局函数，这意味着我可以跨控制器使用的函数，有点像辅助方法。

所以在一个控制器中我可以做到

`useful_function(string)`等等......这可能吗？

我确实在 src/groovy 中创建了一个名为 的类`SiteHelper`，我在正确的轨道上吗？我希望类的方法`SiteHelper`能够在整个控制器中使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:07:27.947

是的，你基本上是在正确的轨道上。您可能希望将其作为服务层的一部分。

[http://grails.org/doc/latest/guide/services.html](http://grails.org/doc/latest/guide/services.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T21:41:30.673

您可以将其添加到所有控制器类的元类中，例如`BootStrap.groovy`：

```
class BootStrap {

   def grailsApplication

   def init = { servletContext ->
      for (cc in grailsApplication.controllerClasses) {
         cc.clazz.metaClass.useful_function = { String s ->
            return ...
         }
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:45:32.363

在 Grails 中，不同组件之间共享逻辑的标准方法是将其放入服务中，或者在需要访问 web 层内容（如请求/响应/参数/会话/闪存）的功能的情况下，将其放入 taglib 中。您可以从任何控制器操作中调用 taglib 标签作为方法：

**MyTagLib.groovy**

```
class MyTagLib {
  def sayHello = { attrs, body ->
    out << "Hello ${attrs.name}"
  }
} 
```

**MyController.groovy**

```
def someAction() {
  def greeting = sayHello(name:"Ian")
  // ...
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-04T20:02:45.493

我不明白这有什么重要的。这听起来正是 Apache 的`StringUtils`类或`IOUtils`类所做的。是的，`SiteHelper`使用静态方法创建并导入它会做你想做的事，这是受 Java 影响（和许多其他）语言的典型做法。

# python - 为什么“列表”不是 Python 中的保留字？

> ID：14694559
> 
> 赞同：4
> 
> 时间：2013-02-04T20:00:07.193
> 
> 标签：python, python-2.7

我刚刚被一个如果`list`是 Python 中的保留字就可以防止的错误所困扰。（可以肯定的是，我的邓伯里。）

那么为什么 list （或 dict 或 float 或任何类型）不是保留字呢？添加解释器错误似乎比尝试记住规则更容易。

（我也知道 Eclipse/PyDev 有一个设置会提醒你这条规则，这很有用。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T20:00:33.727

仅保留[关键字。](http://docs.python.org/2/reference/lexical_analysis.html#keywords)

`list`不是关键字而是内置类型，如`str`, `set`, `dict`, `unicode`, `int`,`float`等。

保留所有可能的内置类型是没有意义的。python 是一种动态语言，如果您想用隐藏它的本地名称替换内置类型，您应该可以。

将`list`其他类型视为对象类型的预导入库；你也不希望`defaultdict`从`collections`被保留？

使用[静态代码分析器](http://www.doughellmann.com/articles/pythonmagazine/completely-different/2008-03-linters/index.html)来捕获此类错误；大多数 IDE 都可以让您轻松集成其中一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:07:07.333

看看这个：[http ://docs.python.org/2/reference/lexical_analysis.html#keywords](http://docs.python.org/2/reference/lexical_analysis.html#keywords)

`list`只是一个类型并且不是保留的（也不是`int`, `float`, `dict`, `str`... 你明白了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:06:25.370

可能出于相同的原因哪些类没有私有属性。这就是 Python 的精神。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T20:29:19.777

这是一个意见问题，但这是我的 2c。

保留关键字是一件大事，因为本质上这意味着您永远不能在代码中使用该关键字，因此通常认为保持列表简短的良好编程语言设计。（perl 没有，但是 perl 与大多数其他编程语言具有完全不同的理念，并在变量之前使用特殊符号来尝试防止冲突）。

无论如何，要了解为什么会这样，请考虑前向兼容性。想象一下，python 开发人员决定这`array`是一个如此基本的概念，以至于他们想让它成为一个内置的（不是不可想象的——这发生`set`在，嗯，python 2.6 中？）。如果内置函数被自动保留，那么任何以前使用`array`过其他东西的人（即使显式导入为 a `from superfastlist import array`），或者实现了自己的（`numpy`已经这样做了），都会突然发现他们的代码不起作用，他们会非常愤怒。

（就此而言，请考虑是否`help`将其设为保留字 - 包括 argparse 在内的无数库`help`用作关键字参数）

# delphi - 在delphi中访问其他.exe数据的最简单方法是什么？

> ID：14694560
> 
> 赞同：2
> 
> 时间：2013-02-04T20:00:06.677
> 
> 标签：delphi, ipc, automated-tests, dunit

我尝试使用 Delphi 2010 附带的 DUnit 对 1000 万个 LOC 项目实施一些基本的自动化测试，这些项目不遵循良好的 OO 实践（例如：将业务逻辑隔离到类/单元中）。我不能做正常的单元由于业务逻辑的每个部分都分布在数十个相互依赖的单元中，因此在该项目上进行测试，但是这些单元“组”以某些“主要业务逻辑屏幕”为中心（例如：所有与发票逻辑相关的单元都以主发票屏幕），并且由于这些屏幕是类，我可以进行“主要业务逻辑屏幕类测试”而不是单元测试，但是这些“主屏幕”仍然需要在流程启动期间创建的很多东西。

所以我需要两者：

*   能够运行坏项目的启动内​​容
*   能够访问其对象

坏项目已经有一些导出的函数返回指针，我可以转换它们来访问它的对象，但我无法以任何一种方式调用它们：

如果我将坏项目创建为测试进程的子进程，启动代码运行良好，但如果没有复杂的 IPC 方法或对坏项目的结构进行实质性更改，我找不到调用导出函数的方法。

如果我像 LoadLibrary 函数一样将坏项目的 .exe 作为 dll 加载，调用坏项目导出的任何函数都会导致访问冲突和/或段错误，即使是这个简单的过程：

```
procedure Test; {safecall;} {stdcall;}
begin
  showmessage('Yay!');
end; 
```

我怎样才能做到这两点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:13:47.377

您正在谈论的方法（使用导出的函数）不会成功。两个 Win32 程序之间最简单的通信形式是让它们使用 SendMessage 或 PostMessage 相互通信。定位窗口句柄（通常通过窗口类名）是第 1 步，发送消息是第 2 步。

其次，DUnit 让你离你的目标很远，而且 TTestCase 不能巧妙地扩展为一个 GUI 控制器，因为这不是它的用途。它用于单元测试。圆钉，方孔。为您可以配置和测试的类编写 TTestCases，并使用 DUnit 为您可以为其提供测试覆盖的系统部分提供测试覆盖。

对于 UI 测试，请使用完全独立的框架。Delphi 程序员为您提议的那种自动集成测试完成了两种基本方法。

1.  一个自定义的黑客工作。这就是你所描述的。在 Embarcadero 内部，存在一个名为[Zombie的框架](http://blogs.embarcadero.com/nickhodges/2007/01/18)，这是 Nick 在 2007 年发表的博客。它的方法基于几种“原始 IPC”，通常涉及从程序外部到程序内部控件的窗口句柄的 Win32 SendMessage 或 PostMessage 窗口消息。然而，内部代码被显着修改以允许僵尸测试。不，你不能拥有 Teh Codez，它们是 Embarcadero 内部和专有的。但它确实说明了该方法确实有效，并且不需要像单元测试那样重写整个应用程序或编写大量模拟类。如果您想走 hack 路线，您将编写自己的用户界面测试框架，它可能应该完全独立于并且不使用 DUnit 代码。欢迎你尝试，但我告诉你，它' sa 严重的阻抗失配。如果我在 2013 年开始我自己的自定义框架，它将基于 DCOM，因为 Delphi DCOM 服务器代码可以简单地有条件地编译成许多程序，并且 DCOM 会为您处理函数调用“编组”细节。我怀疑我会在这个项目中投入一年，然后我会放弃，因为最后，我怀疑我能否让任何系统（基于 DCOM 或 Win32 消息）得到回报。

2.  一个完整的外部测试工具，您可以在其中编写测试脚本，例如 AutomatedQA/SmartBear TestComplete。您的测试不会被编译成 delphi 测试程序，而是在 TestComplete 中运行，类似 Pascal 的脚本语法只是编写测试脚本的可用选项之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:03:13.037

我们在这里遇到了同样的问题。看起来您确实需要一个 delphi 库项目 (*.dll) 才能使导出函数工作，（我怀疑直接在可执行文件上调用函数时不会初始化框架，没有保证）。

注意：我们仍在使用 Delphi 5，所以这里没有 dunit 集成。

我们使用的解决方案是使用条件 DEFINE 将 dunit 源添加到我们的项目（.exe 项目）中，并在启动单元中使用此条件定义。

我们应用程序的示例启动代码：

```
 if ComServer.StartMode <> smAutomation then
  begin
    OurApplication.Login ;
  end;
{$IFDEF _AS_TESTRUNNER_}
    GUITestRunner.RunRegisteredTests;
{$ELSE}

  if OurApplication.HasStartCommands then
  begin
    Application.ShowMainForm := False ;
  end
  else begin
    if ComServer.StartMode = smAutomation then
      Application.ShowMainForm := False
  end;

  Application.Run;
{$ENDIF}

  OurApplication.Finalize; 
```

当我使用 _AS_TESTRUNNER_ 条件定义时，我必须先登录，以便我们的应用程序（和数据库连接）被初始化。跟随 bij DUnit 的 GUITestrunner。

测试用例可以在**初始化**部分注册，就像在示例中一样。

奇迹般有效。

# domain-driven-design - Evan 的采购订单示例：零件不应该在单个事务中与 PO 同步吗？

> ID：14694562
> 
> 赞同：0
> 
> 时间：2013-02-04T20:00:11.577
> 
> 标签：domain-driven-design

在第*134*页（[DDD：](https://rads.stackoverflow.com/amzn/click/com/0321125215)解决*软件**核心*中的*复杂*性）作者通过使*PO*`Purchase Order` **成为**包含许多**PO**共享）：*`PO Line Items``Part`*`Part`**

 *****> 与此模型一致的实现将保证与 PO 及其项目相关的不变性，而零件价格的更改不必立即影响引用它的项目。
> 
> ...
> 
> 但这不是必须始终强制执行的不变量。通过降低订单项对零件的依赖，我们可以避免争用，更好地反映业务现实。同时，加强采购订单与其行项目的关系，保证了一条重要的业务规则将得到遵守。

作者认为，*零件价格*的变化不必立即传播到引用它的***PO****聚合*，因为：

*   在更新特定**PO**时锁定*部分*可能会导致争用（由于多个**PO**同时尝试锁定同*一部分*的可能性 ）

******   *部件*的修改频率低于**PO ，因此****PO**具有无效数据的可能性相对较小***** 

 *****a) 我理解作者的论点，但**PO**的一致性不应该是这种模型中的重中之重，因此这些*部分*应该与更新的**PO**锁定在一起，即使存在争用的风险？

b）相比之下，在第 176、177 页作者确实发现有必要在单个事务中强制跨越两个聚合的不变量（即，当`Handling Event`添加时，`Delivery History`也应在同一事务中相应地更新）：

> Delivery History 包含与其 Cargo 相关的处理事件集合，并且必须将新对象作为事务的一部分添加到该集合中。如果未创建此反向指针，则对象将不一致。
> 
> ...
> 
> 添加处理事件时需要更新交付历史记录会导致交易中涉及的 Cargo AGGREGATE。

我不明白为什么在这个例子中保持单个事务中的一致性比在**PO**例子中更重要？

注意（我假设通过*“反向指针”*他指的是`Handling Event`实例？）

c) 作者没有作为替代方案提出实现 *Optimistic Concurency check*是否有特殊原因，其中*Parts 表*将包含一个*rowversion*字段，我们的代码将在每次更新某些**PO**时检查该字段？

d）顺便说一句，为什么必须`Price`将值复制到`Line Item`（图 6.11，第 134 页）？*PO*的不变量不能通过检查`Part`实体来检查价格吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:17:50.210

一个 PO，一旦被放置，就可以被视为一个不可变的事件。这就是为什么必须复制价格值的原因。价格的未来变化不应反映在现有的采购订单上——这将违反业务规则。这就是为什么 PO 和 Part 之间的关系可以而且应该放松的原因。这也是为什么这些一致性特征适用于 PO 但不适用于其他场景的原因。**********

# java - Primefaces 的 oncomplete 不适用于 fileUpload 和对话框

> ID：14694566
> 
> 赞同：0
> 
> 时间：2013-02-04T20:00:15.520
> 
> 标签：java, jsf, file-upload, dialog, primefaces

我在primefaces的文件上传和对话方面遇到了很多问题。

我有一个按钮，当它被点击时会调用一个对话框。在这个对话框中，我有一个文件上传。当我选择一些文件并更新表单上的图像时，我希望此对话框关闭。这是代码：

```
<h:form id="formCadastroSistema">
  <div id="divCadastroComponenteConstrutivo">
    <h:outputText value="Cadastro de Componente Construtivo" style="font-size: 20px; color: black;"/>
    <p:layout style="height:240px; width: 100%; margin-top: 20px; padding-left: 40px;">
      <p:layoutUnit position="west" size="330" style="border: none;" resizable="false" >
        <p:graphicImage value="#{novoComponenteConstutivo.mostrarImagemDeByte()}" id="foto"/>
        <p:commandButton onclick="dialogUpLoad.show();" value="abrir"/>
      </p:layoutUnit>
      <p:layoutUnit position="center" style="font-size: 14px; border: none;">
        <h:panelGrid columns="2" cellspacing="5">
          <h:outputText value="Nome: "/>
          <p:inputText style="width: 295px;" value="#{novoComponenteConstutivo.novoComponenteConstrutivo.nome}"  />
          <h:outputText value="Categoria: "/>
          <p:selectOneMenu value="#{novoComponenteConstutivo.idCategoriaCamada}"  id="selectMenuCategoria" style="width: 305px;">
            <f:selectItems value="#{novoComponenteConstutivo.todasAsCategorias}" var="categoria" itemLabel="#{categoria.categoria}" itemValue="#{categoria.id}"/>
            <f:ajax event="valueChange" execute="selectMenuCategoria" listener="#{novoComponenteConstutivo.setarCategoriaDoNovoComponente()}" render="testi" />
          </p:selectOneMenu>
          <h:outputText value="Descrição: "/>
          <p:inputTextarea value="#{novoComponenteConstutivo.novoComponenteConstrutivo.descricao}" style="width: 295px; height: 50px;"/>
          <h:outputText value="Fabricante: "/>
          <p:selectOneMenu value="#{novoComponenteConstutivo.idFabricante}" id="selectMenuFabricante" style="width: 305px;">
            <f:selectItems value="#{novoComponenteConstutivo.todosOsFabricantes}" var="fabricante" itemLabel="#{fabricante.nome}" itemValue="#{fabricante.id}" />
            <f:ajax execute="selectMenuFabricante" event="valueChange" listener="#{novoComponenteConstutivo.setarFabricanteDoNovoComponente()}" render="testi2" />
          </p:selectOneMenu>

        </h:panelGrid>
        <h:outputText value="#{novoComponenteConstutivo.idCategoriaCamada}" id="testi"/>
        <h:outputText value="#{novoComponenteConstutivo.idFabricante}" id="testi2"/>
      </p:layoutUnit>
      <p:dialog style="height: 300px; width: 500px;" id="dialogUpLoad" widgetVar="dialogUpLoad" >
        <p:fileUpload fileUploadListener="#{novoComponenteConstutivo.uploadImagem}" update="foto" oncomplete="dialogUpLoad.hide();" multiple="false"  />
      </p:dialog>
    </p:layout>
    <p:separator/>
    <p:layout style="height: 150px; padding-left: 40px;" >
      <!--      -->
      <p:layoutUnit position="center" style="border: none;">
        <h:outputText value="Características Físicas" style="font-size: 18px;"/>
        <h:panelGrid columns="2" >
          <h:panelGrid columns="2" style="font-size: 14px; padding-top: 20px;" >
            <h:outputText value="Condutividade Térmica: "/>
            <p:inputText value="#{novoComponenteConstutivo.novoComponenteConstrutivo.condutividade}"  />
            <h:outputText value="Calor Específico: "/>
            <p:inputText value="#{novoComponenteConstutivo.novoComponenteConstrutivo.calorEspecifico}"/>
            <h:outputText value="Densidade Mínima: " />
            <p:inputText value="#{novoComponenteConstutivo.novoComponenteConstrutivo.densidadeMinima}"/>
          </h:panelGrid>
          <h:panelGrid columns="2"  style="font-size: 14px; padding-top: 20px; margin-left: 45px;" >
            <h:outputText value="Densidade Máxima: "/>
            <p:inputText  value="#{novoComponenteConstutivo.novoComponenteConstrutivo.densidadeMaxima}"/>
            <h:outputText value="Espessura: "/>
            <p:inputText value="#{novoComponenteConstutivo.novoComponenteConstrutivo.espessura}"/>
          </h:panelGrid></h:panelGrid>
        </p:layoutUnit>
      </p:layout>
      <h:commandLink value="confirm" style="position: absolute; right: 0px; font-size: 12px;" onclick="showDivConfirmacaoCadastroComponente();" >
        <f:ajax execute="@form" render=":formConfimacaoCadastroComponente" event="click"   />
      </h:commandLink>
    </div>
  </h:form> 
```

它适用于 google chrome 和 FireFox，但 IE 对话框不会关闭并且图像不会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:03:19.927

可能是因为组件 ID 和 widgetVar 相同。

```
 id="dialogUpLoad" widgetVar="dialogUpLoad" 
```

请同时参考这个[SO question](https://stackoverflow.com/questions/10579619/primefaces-3-component-id-and-widget-var-should-not-have-the-same-name)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:10:48.673

是的，比如 user1351585，更改您的 id="dialogUpload" 的名称并在 web.xml 中添加以下代码：

```
<filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping> 
```

# node.js - 使用 JavaScript 的 OOP

> ID：14694569
> 
> 赞同：0
> 
> 时间：2013-02-04T20:00:20.233
> 
> 标签：node.js, oop

目前我正在 Node.js 上使用 JavaScript 进行编码，我在问自己是否有一种方便的方法可以使用具有私有和公共属性（和方法）的类。我来自 PHP，所以有没有类似的结构？

我一直在用模块做这件事，我导出公共方法和 vars 并保持其余的私有，这是正确的方法吗？有没有关于使用 JavaScript 进行 OOP 的好的指南？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:03:57.623

在 Javascript 中，“私有”的概念并不真正存在，尽管一旦您掌握了该语言的窍门，它是可能的。

这是 Javascript 中 OOP 的一个很好的介绍：[https ://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:08:46.707

Javascript 可以使用原型来模拟（或者更确切地说替换）一些/大多数类行为，但是对于习惯于类的人来说，语法可能有点混乱。如果您打算专业地使用 Javascript，那么学习原型设计或多或少是必须的。

有传言称，可能最终会进入 Javascript 的[ECMAScript 6将添加对类的支持。](http://en.wikipedia.org/wiki/ECMAScript)虽然它还不可用：-/

[Typescript](http://www.typescriptlang.org/)是 Microsoft 的一个颇受争议的 Javascript 扩展，它为 Javascript 添加了一些类支持和强类型。它可以编译成标准的 Javascript，或者可以作为模块添加到 node.js。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:27:32.603

您可以实现“类结构”，尽管您真正要做的是使对象文字表现得像一个类。

我可以理解为什么它可能会令人困惑，尤其是当您阅读 Backbone JS 的文档时——它们将对象定义为类——而实际上没有类！只有对象定义。

使用诸如 Backbone 之类的框架会使事情变得更容易理解，因为您正在使用类似结构的类。可能是您开始的好地方。

# android - 建模与超类对象的多对多关系

> ID：14694570
> 
> 赞同：0
> 
> 时间：2013-02-04T20:00:20.017
> 
> 标签：android, orm, greendao

我从 greenDAO 项目开始我的工作，我想用它来简化我的 Android 项目中的数据库操作。所以，我想在单独的 Java 生成器项目中创建一个关系模式。

我的目标是实现一个超类，其他实体可以从中继承。当然，我使用一种方法：

myEntity.setSuperclass("MyCommonBehavior");

对于每个继承实体。但问题是，我如何为课堂中描述的主要（“抽象”）模型设置多对多关系，而不是为每个特定实体设置多对多关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:04:45.847

GreenDAO 目前不支持[多态](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)。

查看他们的文档：[建模实体](http://greendao-orm.com/documentation/modelling-entities/)

*" [...] 注意：目前不可能有另一个实体作为超类（也没有多态查询）*

无论如何，您可以自己实现它，存储实体类型和一些接口。

# r - 使用 R 自动查找和乘以系数

> ID：14694574
> 
> 赞同：3
> 
> 时间：2013-02-04T20:00:33.460
> 
> 标签：r, regression, vlookup

我正在尝试用 R（统计编程语言）编写一个函数，它可以让我自动计算线性回归（lm）

问题：回归是通过“step”函数计算的，所以无法提前知道选择的系数。问题

1.  自动识别由阶跃函数选择的系数。

2.  Vlookup 并将结果的第二列 Ex.“View(OpenCoefs)”（估计）与原始数据框“sp”的各个列的最后一行（最后一天）交叉相乘

理想的解决方案是一个函数，我只需键入“run()”，它将为每个回归返回“y”，即对第二天标准普尔 500 指数的预测（开盘、低点、高点、收盘） .

该代码从 yahoo Finance 网站检索数据，因此如果您运行它，它就可以运行。

这是代码。

```
sp <- read.csv(paste("http://ichart.finance.yahoo.com/table.csv?s=%5EGSPC&a=03&b=1&c=1940&d=03&e=1&f=2014&g=d&ignore=.csv"))

sp$Adj.Close<-NULL

sp<-sp[nrow(sp):1,]

sp<-as.data.frame(sp)

for ( i in 2:nrow( sp ) ) {
sp[ i , "Gr_Open" ] <-
    ( sp[ i , "Open" ] / sp[ i - 1 , "Open" ] ) - 1       
} 

for ( i in 2:nrow( sp ) ) {
sp[ i , "Gr_High" ] <-
    ( sp[ i , "High" ] / sp[ i - 1 , "High" ] ) - 1       
} 

for ( i in 2:nrow( sp ) ) {
sp[ i , "Gr_Low" ] <-
    ( sp[ i , "Low" ] / sp[ i - 1 , "Low" ] ) - 1       
} 

for ( i in 2:nrow( sp ) ) {
sp[ i , "Gr_Close" ] <-
    ( sp[ i , "Close" ] / sp[ i - 1 , "Close" ] ) - 1       
} 

for ( i in 2:nrow( sp ) ) {
sp[ i , "Gr_Volume" ] <-
    ( sp[ i , "Volume" ] / sp[ i - 1 , "Volume" ] ) - 1       
} 

nRows_in_sp<-1:nrow(sp)

sp<-cbind(sp,nRows_in_sp)

Open_Rollin<-NA

sp<-cbind(sp,Open_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]<=1000)
{
sp[ i , "Open_Rollin" ]<-0 
} else {
sp[ i , "Open_Rollin" ]<-(( mean(sp[,"Open"][(i-100):i])))
}
}

Close_Rollin<-NA

nRows_in_sp<-1:nrow(sp)

sp<-cbind(sp,Close_Rollin)

for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]<=1000)
{
sp[ i , " Close_Rollin" ]<-0 
} else {
sp[ i , "Close_Rollin" ]<-(( mean(sp[,"Close"][(i-100):i])))
}
}

Low_Rollin<-NA

sp<-cbind(sp,Low_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]<=1000)
{
sp[ i , "Low_Rollin" ]<-0 
} else {
sp[ i , "Low_Rollin" ]<-(( mean(sp[,"Low"][(i-100):i])))
}
}

High_Rollin<-NA

sp<-cbind(sp,High_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]<=1000)
{
sp[ i , "High_Rollin" ]<-0 
} else {
sp[ i , "High_Rollin" ]<-(( mean(sp[,"High"][(i-100):i])))
}
}

Open_GR_Rollin<-NA

sp<-cbind(sp,Open_GR_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]<=1000)
{
sp[ i , "Open_GR_Rollin" ]<-0 
} else {
sp[ i , "Open_GR_Rollin" ]<-(( mean(sp[,"Gr_Open"][(i-100):i])))
}
}

Close_GR_Rollin<-NA

sp<-cbind(sp, Close_GR_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]<=1000)
{
sp[ i , "Close_GR_Rollin" ]<-0 
} else {
sp[ i , "Close_GR_Rollin" ]<-(( mean(sp[,"Gr_Close"][(i-100):i])))
}
}

Low_GR_Rollin<-NA

sp<-cbind(sp, Low_GR_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]<=1000)
{
sp[ i , "Low_GR_Rollin" ]<-0 
} else {
sp[ i , "Low_GR_Rollin" ]<-(( mean(sp[,"Gr_Low"][(i-100):i])))
}
}

High_GR_Rollin<-NA

sp<-cbind(sp, High_GR_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]<=1000)
{
sp[ i , "High_GR_Rollin" ]<-0 
} else {
sp[ i , "High_GR_Rollin" ]<-(( mean(sp[,"Gr_High"][(i-100):i])))
}
}

Open_SD_Rollin<-NA

sp<-cbind(sp,Open_SD_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]>100)
{
sp[ i, "Open_SD_Rollin" ] <- sd(sp[,"Open"][(i-100):i])
} 
}

Close_SD_Rollin<-NA

sp<-cbind(sp, Close_SD_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]>100)
{
sp[ i, "Close_SD_Rollin" ] <- sd(sp[,"Close"][(i-100):i])
} 
}

Low_SD_Rollin<-NA

sp<-cbind(sp, Low_SD_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]>100)
{
sp[ i, "Low_SD_Rollin" ] <- sd(sp[,"Low"][(i-100):i])
} 
}

High_SD_Rollin<-NA

sp<-cbind(sp, High_SD_Rollin)
for ( i in 2:nrow( sp ) ) {
if(sp[i,"nRows_in_sp"]>100)
{
sp[ i, "High_SD_Rollin" ] <- sd(sp[,"High"][(i-100):i])
} 
}

N <- length(sp[,"Open"])

Openlag <- c(NA, sp[,"Open"][1:(N-1)])
sp<-cbind(sp,Openlag)

Highlag <- c(NA, sp[,"High"][1:(N-1)])

sp<-cbind(sp,Highlag)

Lowlag <- c(NA, sp[,"Low"][1:(N-1)])

sp<-cbind(sp,Lowlag)

Closelag <- c(NA, sp[,"Close"][1:(N-1)])

sp<-cbind(sp,Closelag)

Gr_Openlag <- c(NA, sp[,"Gr_Open"][1:(N-1)])

sp<-cbind(sp,Gr_Openlag)

Gr_Highlag <- c(NA, sp[,"Gr_High"][1:(N-1)])

sp<-cbind(sp,Gr_Highlag)

Gr_Lowlag <- c(NA, sp[,"Gr_Low"][1:(N-1)])

sp<-cbind(sp,Gr_Lowlag)

Gr_Closelag <- c(NA, sp[,"Gr_Close"][1:(N-1)])

sp<-cbind(sp,Gr_Closelag)

Gr_Volumelag <- c(NA, sp[,"Gr_Volume"][1:(N-1)])

sp<-cbind(sp,Gr_Volumelag)

Open_GR_Rollinlag <- c(NA, sp[,"Open_GR_Rollin"][1:(N-1)])

sp<-cbind(sp, Open_GR_Rollinlag)

Low_GR_Rollinlag <- c(NA, sp[,"Low_GR_Rollin"][1:(N-1)])

sp<-cbind(sp, Low_GR_Rollinlag)

High_GR_Rollinlag <- c(NA, sp[,"High_GR_Rollin"][1:(N-1)])
sp<-cbind(sp, High_GR_Rollinlag)

Close_GR_Rollinlag <- c(NA, sp[,"Close_GR_Rollin"][1:(N-1)])

sp<-cbind(sp, Close_GR_Rollinlag)

Open_SD_Rollinlag <- c(NA, sp[,"Open_SD_Rollin"][1:(N-1)])

sp<-cbind(sp, Open_SD_Rollinlag)

Low_SD_Rollinlag <- c(NA, sp[,"Low_SD_Rollin"][1:(N-1)])

sp<-cbind(sp, Low_SD_Rollinlag)

High_SD_Rollinlag <- c(NA, sp[,"High_SD_Rollin"][1:(N-1)])

sp<-cbind(sp, High_SD_Rollinlag)

Close_SD_Rollinlag <- c(NA, sp[,"Close_SD_Rollin"][1:(N-1)])

sp<-cbind(sp, Close_SD_Rollinlag)

OpenCoefs<-coefficients(summary(step(lm(sp[,"Open"] ~ Openlag + Lowlag + Highlag + Closelag + Gr_Openlag + Gr_Lowlag + Gr_Highlag + Gr_Closelag + Gr_Volumelag + Open_GR_Rollinlag + Low_GR_Rollinlag + High_GR_Rollinlag + Close_GR_Rollinlag + Open_SD_Rollinlag + Low_SD_Rollinlag + High_SD_Rollinlag + Close_SD_Rollinlag),direction="both",test="F")))

LowCoefs<-coefficients(summary(step(lm(sp[,"Low"] ~ Openlag + Lowlag + Highlag + Closelag + Gr_Openlag + Gr_Lowlag + Gr_Highlag + Gr_Closelag + Gr_Volumelag + Open_GR_Rollinlag + Low_GR_Rollinlag + High_GR_Rollinlag + Close_GR_Rollinlag + Open_SD_Rollinlag + Low_SD_Rollinlag + High_SD_Rollinlag + Close_SD_Rollinlag),direction="both",test="F")))

HighCoefs<-coefficients(summary(step(lm(sp[,"High"] ~ Openlag + Lowlag + Highlag + Closelag + Gr_Openlag + Gr_Lowlag + Gr_Highlag + Gr_Closelag + Gr_Volumelag + Open_GR_Rollinlag + Low_GR_Rollinlag + High_GR_Rollinlag + Close_GR_Rollinlag + Open_SD_Rollinlag + Low_SD_Rollinlag + High_SD_Rollinlag + Close_SD_Rollinlag),direction="both",test="F")))

CloseCoefs<-coefficients(summary(step(lm(sp[,"Close"] ~ Openlag + Lowlag + Highlag + Closelag + Gr_Openlag + Gr_Lowlag + Gr_Highlag + Gr_Closelag + Gr_Volumelag + Open_GR_Rollinlag + Low_GR_Rollinlag + High_GR_Rollinlag + Close_GR_Rollinlag + Open_SD_Rollinlag + Low_SD_Rollinlag + High_SD_Rollinlag + Close_SD_Rollinlag),direction="both",test="F")))

View(OpenCoefs)

View(LowCoefs)

View(HighCoefs)

View(CloseCoefs)

View(sp) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T20:49:30.070

你的代码太糟糕了，我不得不同情你。:) 这是您的代码的重构版本：

```
library(quantmod)
sp <- getSymbols("^GSPC", auto.assign=FALSE)
sp$GSPC.Adjusted <- NULL
colnames(sp) <- gsub("^GSPC\\.","",colnames(sp))

sp$Gr_Open   <- ROC(Op(sp), type="discrete")
sp$Gr_High   <- ROC(Hi(sp), type="discrete")
sp$Gr_Low    <- ROC(Lo(sp), type="discrete")
sp$Gr_Close  <- ROC(Cl(sp), type="discrete")
sp$Gr_Volume <- ROC(Vo(sp), type="discrete")

N <- 100
sp$Open_Rollin  <- runMean(sp$Open, N)
sp$High_Rollin  <- runMean(sp$High, N)
sp$Low_Rollin   <- runMean(sp$Low, N)
sp$Close_Rollin <- runMean(sp$Close, N)

sp$Open_GR_Rollin  <- runMean(sp$Gr_Open, N)
sp$High_GR_Rollin  <- runMean(sp$Gr_High, N)
sp$Low_GR_Rollin   <- runMean(sp$Gr_Low, N)
sp$Close_GR_Rollin <- runMean(sp$Gr_Close, N)

sp$Open_SD_Rollin  <- runSD(sp$Open, N)
sp$High_SD_Rollin  <- runSD(sp$High, N)
sp$Low_SD_Rollin   <- runSD(sp$Low, N)
sp$Close_SD_Rollin <- runSD(sp$Close, N)

spLag <- lag(sp)
colnames(spLag) <- paste(colnames(sp),"lag",sep="")
sp <- na.omit(merge(sp, spLag)) 
```

没有必要回答你的第一个问题来回答你的第二个问题。您不必手动将系数与数据交叉相乘。您可以简单地从模型中访问拟合值。这需要您保留模型...

```
f <- Open ~ Openlag + Lowlag + Highlag + Closelag +
  Gr_Openlag + Gr_Lowlag + Gr_Highlag + Gr_Closelag + Gr_Volumelag +
  Open_GR_Rollinlag + Low_GR_Rollinlag + High_GR_Rollinlag + Close_GR_Rollinlag +
  Open_SD_Rollinlag + Low_SD_Rollinlag + High_SD_Rollinlag + Close_SD_Rollinlag

OpenLM <- lm(f, data=sp)
HighLM <- update(OpenLM, High ~ .)
LowLM <- update(OpenLM, Low ~ .)
CloseLM <- update(OpenLM, Close ~ .)

OpenStep <- step(OpenLM,direction="both",test="F")
HighStep <- step(HighLM,direction="both",test="F")
LowStep <- step(LowLM,direction="both",test="F")
CloseStep <- step(CloseLM,direction="both",test="F")

tail(fitted(OpenStep),1)
# 2013-02-01 
#    1497.91 
tail(fitted(HighStep),1)
# 2013-02-01 
#    1504.02 
tail(fitted(LowStep),1)
# 2013-02-01 
#   1491.934 
tail(fitted(CloseStep),1)
# 2013-02-01 
#   1499.851 
```

# windows-phone-7 - 适用于 Windows Phone 7.1 和 F# 3.0 的 FSharp.Core

> ID：14694577
> 
> 赞同：16
> 
> 时间：2013-02-04T20:00:40.783
> 
> 标签：windows-phone-7, f#, portable-class-library, f#-3.0

F# 2.0 发行版有一个为 WindowsPhone 7.1/Silverlight 4 编译的 FSharp.Core 版本，但 F# 3.0 没有，并且便携式版本仅支持 Silverlight 5 或 Windows Phone 8。有没有人能够编译 FSharp 的版本。从源代码面向 Silverlight 4 或 Windows Phone 7.1 的 F# 3.0 核心？需要什么定义？

**编辑：**

在 fsharp 编译器 github 存储库中，有一个名为portable-net4+sl4+wp71+win8 的目标，但实际上它是可移植类库 Profile47，据说它只支持 .NET 4.5、Silverlight 5.0 和 Windows Store 应用程序。和VS2012安装的一样。如果您尝试将它与 WP 7.1 项目一起使用，它将在运行时失败并抱怨缺少 IStructuralEquatable。它真的应该命名为portable-net45+sl5+win8。proj 文件中也有一个 wp7 目标，但目前尚未编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:38:30.027

我设法编译它，但由于我通常不使用 F#，所以我不知道如何测试它。您是否按照编译说明进行操作？只需在 VS 开发人员提示中键入以下命令

```
cd src
msbuild fsharp-proto-build.proj
msbuild fsharp-library-build.proj
msbuild fsharp-compiler-build.proj
msbuild fsharp-library-build.proj /p:TargetFramework=portable-net4+sl4+wp71+win8 
```

请注意，我是使用 Visual Studio 2012 Professional 完成的。如果你愿意，我可以把编译好的 dll 发给你，你可以试试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:26:04.670

[经过几次更改https://github.com/ovatsus/fsharp](https://github.com/ovatsus/fsharp)后，从 F# 源代码编译了 wp7 目标和 Portable88 目标

不过，仍然需要在运行时彻底测试

# linux - 跟踪以附加到多线程进程

> ID：14694582
> 
> 赞同：35
> 
> 时间：2013-02-04T20:00:55.643
> 
> 标签：linux, strace

如果我想 strace 一个多线程进程（它的所有线程），我应该怎么做？

我知道可以执行 strace -f 来跟踪分叉进程？但是当我开始跟踪时附加到一个已经是多线程的进程怎么样？有一种方法可以告诉 strace 跟踪属于该进程的所有线程的所有系统调用吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-11-17T19:05:55.690

## 2021 年更新

`strace -fp PID`只是在我的系统上做正确的事（Ubuntu 20.04.1 LTS）。`strace`手册页指出了这一点：

```
 -f          Trace  child  processes  as  they are created by currently traced processes as a result of the fork(2), vfork(2) and clone(2) system
                   calls.  Note that -p PID -f will attach all threads of process PID if it is multi-threaded, not only thread with thread_id = PID. 
```

看起来这个文本是[在 2013 年添加的](https://github.com/strace/strace/commit/22efaf0028ddec8f9ed2a2a11e9baaa201594a33)。如果`-f`当时我的系统上有这种行为，我没有意识到。不过现在可以了！

## 2013年原始答案

我只是通过列出要跟踪的每个 tid 以一种笨拙的方式做到这一点。

您可以通过以下方式找到它们`ps`：

```
$ ps auxw -T | fgrep program_to_trace
me pid tid1 ...
me pid tid2 ...
me pid tid3 ...
me pid tid4 ... 
```

然后，根据`man strace`，您可以一次附加到多个 pid：

```
 -p pid      Attach to the process with the process ID pid and begin tracing.  The trace may be terminated at any time by a  keyboard  interrupt
               signal  (CTRL-C).  strace will respond by detaching itself from the traced process(es) leaving it (them) to continue running.  Mul‐
               tiple -p options can be used to attach to up to 32 processes in addition to command (which is optional if at least one -p option is
               given). 
```

它说`pid`，但 iirc 在 Linux 上 pid 和 tid 共享相同的命名空间，这似乎工作：

```
$ strace -f -p tid1 -p tid2 -p tid3 -p tid4 
```

我认为这可能是你目前能做的最好的事情。但我想有人可以`strace`用一个标志来扩展 tids。在寻找流程和附加流程之间可能仍然存在一场竞赛，其中一个新开始的流程将被错过。它符合现有的警告`strace -f`：

```
 -f          Trace child processes as they are created by currently traced processes as a result of the fork(2) system call.

               On non-Linux platforms the new process is attached to as soon as its pid is known (through the return value of fork(2) in the  par‐
               ent process). This means that such children may run uncontrolled for a while (especially in the case of a vfork(2)), until the par‐
               ent is scheduled again to complete its (v)fork(2) call.  On Linux the child is traced from its first instruction with no delay.  If
               the  parent  process  decides  to  wait(2)  for  a child that is currently being traced, it is suspended until an appropriate child
               process either terminates or incurs a signal that would cause it to terminate (as determined from the child's current signal dispo‐
               sition).

               On SunOS 4.x the tracing of vforks is accomplished with some dynamic linking trickery. 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-03-05T12:03:54.173

正如多条评论中所回答的那样，`strace -fp <pid>`将显示该进程拥有的所有线程的跟踪——即使是那些进程在`strace`开始之前已经产生的线程。

# android - 将操作栏颜色从蓝色更改为橙 色

> ID：14694585
> 
> 赞同：0
> 
> 时间：2013-02-04T20:01:05.650
> 
> 标签：android, android-actionbar

> **可能重复：**
> [如何更改操作栏 API 15 的样式](https://stackoverflow.com/questions/14589671/how-can-i-change-the-style-of-action-bar-api-15)

我想将操作栏颜色从蓝色更改为橙​​色，如下图所示，我该怎么做？ ![在此处输入图像描述](../Images/c3319c95b932d83df3f284258b1ee166.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:10:08.547

为自己节省大量工作并使用操作栏样式生成器：http: [//jgilfelt.github.com/android-actionbarstylegenerator](http://jgilfelt.github.com/android-actionbarstylegenerator)

当您使用它时，请查看全息主题生成器： [http ://android-holo-colors.com/](http://android-holo-colors.com/)

# c - 如何从 C 文件中的一个结构访问#define 变量？

> ID：14694588
> 
> 赞同：0
> 
> 时间：2013-02-04T20:01:11.267
> 
> 标签：c, structure, c-preprocessor

```
#define MAX 7
#define BUFFER 16
#define MODULO 8

typedef struct {
int x;
} BLAH; 
```

如果我有：

```
 checkWindow(BLAH *b) {  
  int mod;   
  mod = b.MODULO; 
  } 
```

具体来说，我可以从 BLAH 结构访问 MODULO 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:04:14.563

我认为您误解了预处理器定义的含义。`#define`-d 项目只是看起来像变量，但它们不是经典意义上的变量：它们是*文本替换*。在编译器查看程序文本之前，它们由[*预处理器解释。*](http://en.wikipedia.org/wiki/C_preprocessor)到预处理器完成时，程序的文本没有对 、 或 的引用`MAX`：`BUFFER`它们`MODULO`的出现被替换为`7`、`16`和`8`。这就是您无法访问`#define`-d 变量的原因：没有可访问的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:23:55.227

在编译之前，所有#defines 都将被它们定义的“值”替换为纯文本。它们不是变量，只是便于编写程序的简写语法。你的#def 东西实际上都没有到达编译器，它在预处理器中解析。

现在，如果您只是将示例中的 MODULO 替换为 8，那么生成的代码对您有意义吗？如果它确实有意义，请参加计算机编程 101 课程。

# unix - 使用 DataDirect6.1 在 unix 上为 SQL Azure 配置 DNS 条目

> ID：14694590
> 
> 赞同：0
> 
> 时间：2013-02-04T20:01:20.047
> 
> 标签：unix, odbc, azure-sql-database, aix, informatica-powercenter

您能否告诉我，如何使用 DataDirect 6.1 在 UNIX AIX 机器上为 SQL Azure 配置 DSN 条目以从 PowerCenter 9.1.0 连接。

Aix 服务器：10.10.10.10 : 2222 在此端口上，配置了 ABCXYZ9PQR（数据库服务器名称）数据库。数据库名称：TestDatabase

Telent 正在从应用程序服务器工作。Telnet 10.10.10.10 2222 --> 已连接 能够从 Windows 连接到 SQL 服务器。

请告诉我需要执行哪些测试，并在 ODBC.ini 中配置 DSN 条目。

谢谢，萨拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:00:38.733

配置 odbc 需要以下步骤：

*   确保设置了环境变量 ODBCHOME 和 ODBCINI。这些必须在 Informatica 服务启动之前设置。否则他们不会被接走。
*   在 obdc.ini 文件中为 DB 服务器配置 DNS。
*   使用 ssgbodbc 实用程序（从 mysupport 站点下载）测试 odbc 连接是否通过
*   从 odbc.ini 变量中的条目复制 DNS 名称，并将其粘贴到 Workflow Manager 中 ODBC 连接的连接字符串部分。

从你的描述中我不清楚：

您能否说明 Informatica 服务是否安装在 AIX 机器 (10.10.10.10) 上？你是如何在 windows box 上配置连接到 azure 的？

-萨达戈潘

# boost - 使用 Xcode 4 编译使用 Boost::mpi 的 C++

> ID：14694592
> 
> 赞同：1
> 
> 时间：2013-02-04T20:01:26.203
> 
> 标签：boost, compilation, xcode4.5, mpi

我正在尝试从 Xcode4 运行以下简单示例：

```
#include <boost/mpi/environment.hpp>
#include <boost/mpi/communicator.hpp>
#include <iostream>
namespace mpi = boost::mpi;

int main(int argc, char* argv[])
{
  mpi::environment env(argc, argv);
  mpi::communicator world;
  std::cout << "I am process " << world.rank() << " of " << world.size()
  << "." << std::endl;
  return 0;
} 
```

我已将 libboost_mpi 和 libboost_serialization 添加到 Xcode，并使用默认 LLVM 进行编译返回：

> /usr/local/include/boost/mpi/communicator.hpp:1329:9：错误：调用'boost::mpi::communicator'的隐式删除的复制构造函数：comm（comm），source（source），tag (tag), ia(comm), value(值) ^ ~~~~

但是，我可以编译和运行使用

> mpic++ -I/usr/local/include main.cpp -L/usr/local/lib -lboost_mpi -lboost_serialization

虽然 mpic++ 似乎正在调用 LLVM：

> $mpic++
> 
> i686-apple-darwin11-llvm-g++-4.2：没有输入文件

无论如何，我尝试在 Xcode 4 中添加 mpic++ 作为编译器选项。我可以运行

> $ sudo opensnoop -n Xcode | grep mpicc.xcspec

并看到 Xcode 正在加载规范文件，但我没有看到任何 MPICC 选项。我的规范文件相当简单：

```
/**
Xcode Compiler Specification for MPICC
*/
{   Type = Compiler;
    Identifier = com.apple.compilers.mpicc;
    BasedOn = com.apple.compilers.gcc.4_2;
    Name = “MPICC”;
    Version = “Default”;
    Description = “MPI GNU C/C++ Compiler 4.0″;
    ExecPath = “/usr/local/bin/mpicc”;
    PrecompStyle = pch;
} 
```

它存储在

> /Applications/Xcode.app/Contents/PlugIns/Xcode3Core.ideplugin/Contents/SharedSupport/Developer/Library/Xcode/Plug-ins/LLVM GCC 4.2.xcplugin/Contents/Resources/mpicc.xcspec

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:28:26.010

所以这有效：

将二进制文件与：

```
libmpi_cxx.dylib
libmpi.dylib
libboost_mpi.dylib
libboost_serialization.dylib 
```

将编译器（在构建选项下）更改为 LLVM GCC 4.2（通过直接运行 mpic++ 提示，它报告它在内部使用 llvm gcc 4.2）

在目标、构建阶段、编译源下，添加编译器选项“-lm”以报告您需要与 libm 链接。感谢@pyCthon 指出 mpic++ --showme:link 揭示了允许它从命令行成功构建的最终库

# php - 查找“数字”列值相同的每一行的两个值之间的差异

> ID：14694598
> 
> 赞同：0
> 
> 时间：2013-02-04T20:01:58.270
> 
> 标签：php, mysql

```
month   year    customer    distributor    number   name    price   
10      2012    20          8              2406163 CHEESE   50.4
10      2012    20          8              2325141 APPLE    25.2
11      2012    20          8              2406163 CHEESE   48.1
11      2012    20          8              2325141 APPLE    20.2
12      2012    20          8              2325141 APPLE    23.2
12      2012    20          8              2406163 CHEESE   46.4 
```

我试图比较“数字”是相同值的两个月，我想找出价格之间的差异（如果有的话）。

使用上面的数据，我想比较第 11 个月和第 12 个月（或第 10 个月和第 11 个月，具体取决于用户选择的这些）。因此，对于第 11 个月和第 12 个月，奶酪的价格差异为 -1.7 美元，而苹果的价格差异为 -3 美元。这就是我想要做的，除了它应该对两个月之间在“数字”相同的表中找到的所有行执行此操作。

这是我当前的代码......它目前正在按项目名称而不是项目编号进行比较。然而，奇怪的是，无论出于何种原因，它只发现了 200 多个项目中的 3 个项目的差异。

感谢您的任何帮助。

```
<?PHP
$from_date = $from_month;
$to_date = $to_month;
$query = " 
   select * from ogi
   where month BETWEEN '" . $from_date . "' AND  '" . $to_date . "' GROUP BY number HAVING count(*) > 1 ;
"; 
try 
{ 
    // These two statements run the query against your database table. 
    $stmt = $db->prepare($query); 
    $stmt->execute(); 
} 
catch(PDOException $ex) 
{ 
    // Note: On a production website, you should not output $ex->getMessage(). 
    // It may provide an attacker with helpful information about your code.  
    die("Failed to run query: " . $ex->getMessage()); 
} 

// Finally, we can retrieve all of the found rows into an array using fetchAll 
$rows = $stmt->fetchAll(); 

//Create a variable to hold the "previous month" values
$previousname = '';
$previousprice = '';

//Check each record from your query
foreach($rows as $row) {

//If not first time around && same item name as previous
if($previousname != '' && $previousname == $row['name']) {

  //subtraction calculation here

  if ($row['price'] <= $previousprice) {
$difference = "(Price Lowered) Price difference of $";
$result = $previousprice - $row['price'];
$percent = round(100.0*($previousprice/$row['price']-1));

   ?>
            <tr>
                <td><?php echo "" . $row['name'] . ""?></td>
                <td><?php echo $difference; ?><?php echo $result ?>        </td>
                <td><?php echo $percent; ?> %</td>

            </tr>
            <?
} elseif ($row['price'] > $previousprice) {
$result = $row['price'] - $previousprice;
$percent = round(100.0*($previousprice/$row['price']-1));
$addition = "(Price Higher) Price difference of $";

 ?>
            <tr>
                <td><?php echo "" . $row['name'] . ""?></td>
                <td><?php echo $addition; ?><?php echo $result ?>    </td>
                <td><?php echo $percent; ?>%</td>

            </tr>
            <?
} 
   }
   else {
   ?>
   <!-- <tr>
                <td><?php echo "" . $row['name'] . ""?></td>
                <td></td>
                <td></td>

            </tr> -->
            <?

}

//Assign the "previous month" value
$previousname = $row['name'];
$previousprice = $row['price'];

}

?>
<?
}
else {
?>
<form action="" method="post">
Choose Months to Compare:<br>
Customer: <input type="text" name="customer"><br>
Month 1: <input type="text" name="from_month"><br>
Month 2: <input type="text" name="to_month"><br>
<input type="submit" value="Compare">
</form>
<?
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:08:07.647

怎么样的东西：

```
SELECT a.number, a.name, (a.price - b.price) as pdiff
FROM table a, table b
WHERE a.number = b.number 
    AND a.month = montha 
    AND b.month = monthb; 
```

如果我没有犯任何错误，则此查询应为您提供所需的信息：

> （例如，montha = 10 和 monthb = 11）

希望这可以帮助。

# java - maven 将版本号添加到战争 - 不会部署

> ID：14694600
> 
> 赞同：0
> 
> 时间：2013-02-04T20:02:02.010
> 
> 标签：java, maven, build, jboss7.x

我正在使用 maven 为 JBOSS AS 7 构建一个 war 文件。在 maven 部署之后，本地存储库中有“test.war”，远程存储库中有一个“test-2.war”。这一切都符合预期（2 是 POM 中的版本）。

如果我手动部署“test.war”，一切正常。如果我部署“test-2.war”，部署将失败。如果我将“test-2.war”重命名为“test.war”，部署工作但尝试在浏览器中访问它会失败并出现错误：

```
type Status report

message /test/Test

description The requested resource (/test/Test) is not available. 
```

由于两个war文件都是相同的maven构建和部署的结果，为什么重命名-2版本的工作方式与第一个不同？

有没有一种方法可以在不重命名的情况下部署 -2 版本，或者我可以做些什么来强制构建以便我可以重命名 -2 版本并部署它？

我知道我可以使用 maven 的 jboss deploy，但在我的情况下这不是一个选项。我需要远程存储库中的 war 文件进行手动部署。

编辑：这里的基本问题是为什么我不能将文件 {artifactId}-{version}.war 重命名为 {artifactId}.war 并将其正确部署在 JBoss AS 7 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:04:14.083

您可以像这样重命名战争：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <warName>bird.war</warName>
        </configuration>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

或者

```
<build>
  <finalName>bird.war</finalName>
 . . .
</build> 
```

看看[这里](https://stackoverflow.com/questions/14488509/maven-how-to-rename-the-war-file-for-the-project/14488602#14488602)

# java - 使用 BufferedReader 知道文件的偏移量吗？

> ID：14694601
> 
> 赞同：1
> 
> 时间：2013-02-04T20:02:03.890
> 
> 标签：java, io

我是java的新手。我正在使用`BufferedReader`. 我怎样才能知道一行的偏移量，以便我可以将它存储在其他文件中以用于索引目的？

编辑：这是我的代码

```
path=FileSystems.getDefault().getPath(".",filename);
br=Files.newBufferedReader(path_doc_title_index_path, Charset.defaultCharset());
int offset=0; //offset of first line.       
String strline=br.readline();
offset+=strline.length()+1; //offset of second line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:08:02.937

如果您询问您正在读取文件中的哪一行，则可以使用简单的行计数器

```
 BufferedReader br = new BufferedReader(new FileReader("C:\\testing.txt"));

  int lineNum = 0;
  while ((sCurrentLine = br.readLine()) != null) {
    System.out.println(sCurrentLine);
    lineNum++;
  } 
```

# gallery - 果园 1.6 上的果园画廊

> ID：14694604
> 
> 赞同：2
> 
> 时间：2013-02-04T20:02:19.633
> 
> 标签：gallery, orchardcms, orchardcms-1.6

我正在尝试根据以下说明重建果园画廊：http: [//orchardgallery.codeplex.com/SourceControl/changeset/view/6a5476676f50#Readme.txt](http://orchardgallery.codeplex.com/SourceControl/changeset/view/6a5476676f50#Readme.txt)

获取所有最新版本后，Gallery 无法编译，因为此错误：

> 错误 4 命名空间“Orchard.Core”中不存在类型或命名空间名称“可路由”（您是否缺少程序集引用？）...\Orchard.Gallery\Orchard\src\Orchard.Web\Modules\Orchard。 Gallery\Models\PackagePart.cs 5 20 Orchard.Gallery

似乎可路由的东西已从最新的存储库中删除...

我怎样才能解决这个问题？

谢谢

编辑：更具体：由于画廊指南谈到“最新果园”，什么是“与画廊合作的最新果园”？

更一般的果园问题：如果在其模块中使用“可路由”对象（针对果园 1.4）并决定稍后升级到 1.6，如何更改代码以使其模块兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:41:22.197

从 Orchard 1.4 开始，旧的 Route 部分被分成 2 个不同的部分。

您可以在此处阅读更多信息： [http ://www.davidhayden.me/blog/whats-new-in-orchard-1.4](http://www.davidhayden.me/blog/whats-new-in-orchard-1.4) [http://www.davidhayden.me/blog/autoroute-custom-patterns-and-route -regeneration-in-orchard-1.4](http://www.davidhayden.me/blog/autoroute-custom-patterns-and-route-regeneration-in-orchard-1.4)

Gallery 是为 1.3 发布的（此后从未更新），所以如果你想在 1.4 上运行，你必须更改一些代码才能在 1.4 或更高版本上编译（我现在正在做最新：1.6）

所以解决方法是：添加对 Autoroute 模块的引用并删除对可路由的所有命名空间引用 用 TitlePart (Title) 或 AutoroutePart (Slug) 替换所有 RoutableParts

```
 public string Title
     {
-        get { return this.As<RoutePart>().Title; }
-        set { this.As<RoutePart>().Title = value; }
+        get { return this.As<TitlePart>().Title; }
+        set { this.As<TitlePart>().Title = value; }
     }

     public string Slug
     {
-        get { return this.As<RoutePart>().Slug; }
-        set { this.As<RoutePart>().Slug = value; }
+        get { return this.As<AutoroutePart>().DisplayAlias; }
+        set { this.As<AutoroutePart>().DisplayAlias = value; }
     } 
```

还有一点是 IUserEventHandler 被扩展了，Gallery 并没有实现所有的方法。

TaxonomyService 更改了一些方法： http: [//orchardgallery.codeplex.com/SourceControl/network/Forks/akoeplinger/ChangesInContribTaxonomies/contribution/1336](http://orchardgallery.codeplex.com/SourceControl/network/Forks/akoeplinger/ChangesInContribTaxonomies/contribution/1336)

# php - 如何通过 Elastica 使用 ES 插件 MongoDB River 将 MongoDB 与 Elastic Search 连接起来

> ID：14694605
> 
> 赞同：3
> 
> 时间：2013-02-04T20:02:20.863
> 
> 标签：php, mongodb, elasticsearch, elastica

我是编程新手，所以我很抱歉，如果我的问题很简单。

首先，我已经使用 MongoDB River 安装和配置了 MongoDB 和 ES，但我无法通过 Elastica 找到如何做到这一点。我的例子是

```
curl -XPUT 'http://localhost:9200/_river/mongodb/_meta' -d '{ 
"type": "mongodb", 
"mongodb": { 
    "db": "testTweets", 
    "collection": "msgs"
}, 
"index": {
    "name": "mongoindex", 
    "type": "my_type" 
}
}' 
```

还有一个查询是

```
curl -XGET 'http://localhost:9200/mongoindex/_search?q=something&pretty=true' 
```

我如何使用 PHP 和 Elastica 编写它们？

我举个例子

```
$elasticaType = $elasticaIndex->getType('tweet'); 
```

而且我找不到如何将 curl 命令与正确的 php 代码匹配。

我希望是晶莹剔透！如果您需要任何其他详细信息来帮助我，我将很乐意添加它。

先感谢您！

编辑***

编写 ElasticSearch 分析或映射的好方法是以下 chrome 扩展[https://chrome.google.com/webstore/detail/sense/doinijnbnggojdlcjifpdckfokbbfpbo](https://chrome.google.com/webstore/detail/sense/doinijnbnggojdlcjifpdckfokbbfpbo)。这对我很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T14:11:48.557

我相信唯一的方法是通过 PHP CURL ..

# c++ - C ++使变量一旦设置为常量

> ID：14694607
> 
> 赞同：0
> 
> 时间：2013-02-04T20:02:31.213
> 
> 标签：c++

例如，如果我有

```
std::string test; 
```

我想在初始化后立即使测试保持不变。

```
test = "hi";
test = "test"; //this shouldn't work since I already initialized test to hi above 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:04:55.433

您可以声明它`const`并将其初始化为您感兴趣的值：

```
const std::string s = "hi"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:08:40.797

首先，您应该了解 C 和 C++ 中赋值和初始化之间的区别。 `std::string test;`调用默认的字符串构造函数，所以`test = "hi";`也会失败。

在语言级别上，仅在*第二*次重新分配某些内容时才可能导致编译错误 - 为什么要这样做？一这会令人困惑，二是在一般情况下，发生的分配数将在运行时确定，而不是在编译时确定。

这里的正确使用是`const`在声明它的同一语句中使用和“分配” - 实际上是初始化，根本不分配 - 即`const string str = "hi";`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:13:11.077

另一种选择是在分配字符串后使用 const 引用：

```
std::string s = "hi";
const std::string & const_s = s;
const_s = "test" // compile-time error 
```

但我同意这听起来你只是想用一个值初始化一个 const 字符串。

# opencv - opencv人脸检测2d到3d

> ID：14694609
> 
> 赞同：0
> 
> 时间：2013-02-04T20:02:31.977
> 
> 标签：opencv, coordinates, augmented-reality

我想将检测到的面部矩形转换为 3D 坐标。我有网络摄像头的内在参数和头部尺寸，如何使用投影方程确定深度 Z？

x = fx X / Z + u

y = fy Y / Z + v

我知道 fx fy 和 uv 是内在参数，XY 由我的头部尺寸给出，xy 由检测到的面部矩形给出。似乎只有一个方程就足以确定 Z。如何使用它们？还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:37:57.927

您是正确的，您并不严格需要它们来计算深度。但是，您可能希望同时使用两者来提高准确性。

要记住的另一件事是，如果您的相机没有垂直观察您测量的平面对象（例如面部），则其中一个或两个测量值可能对计算深度没有用处。例如，如果您的相机正在向上看一个矩形，那么只有宽度才能很好地衡量深度，因为高度会被视角压缩。不过，我认为这对您的面部检测器并不重要，因为无论如何都假定面部的比例是固定的？

# c++ - C++ 应用程序：打开文件因语言而失败？

> ID：14694610
> 
> 赞同：0
> 
> 时间：2013-02-04T20:02:41.577
> 
> 标签：c++, file

我写了一个应用程序，它工作正常。至少在我居住的国家，德国。似乎来自英国的用户无法使用我的应用程序打开/查找文件。那可能吗？我需要用不同的代码页或其他东西编译我的程序吗？这些是我的设置（配置属性，常规）：

![设置](../Images/bffcfc31b46cc41224dfbc57a6c96f93.png)

用户说当他尝试使用我的应用程序打开文件时收到一条错误消息：“windows 找不到 c/documents”

这是我用于打开文件的代码：

```
ZeroMemory( &ofn , sizeof( ofn));
ofn.lStructSize = sizeof ( ofn );
ofn.hwndOwner = NULL ;
ofn.lpstrFile = szFile ;
ofn.lpstrFile[0] = '\0';
ofn.nMaxFile = sizeof( szFile );
ofn.lpstrFilter = "All\0*.*\0Text\0*.*\0";
ofn.nFilterIndex =1;
ofn.lpstrFileTitle = NULL ;
ofn.nMaxFileTitle = 0 ;
ofn.lpstrInitialDir=NULL ;
ofn.Flags = OFN_PATHMUSTEXIST|OFN_FILEMUSTEXIST ;
GetOpenFileName( &ofn ); 
```

然后我使用：

```
str=ofn.lpstrFile;
    size_t found;
  found=str.find_last_of("\\");
  samp=str.substr(0,found+1); 
```

和：

```
sprintf_s(filename,"%simg%u.jpg",samp.c_str(),xx);
            cvSaveImage(filename,framei); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:04:05.697

听起来你假设有一个名为 的文件夹`C/documents`，它可能在你的机器上，而不是在他的机器上。正是错误消息所说的内容，与语言或 Sprache 无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:00:25.290

您提到在打开几个窗口（例如 OpenCV）后会出现错误消息。可能发生的情况是某个外部应用程序被执行，它试图打开文件打开对话框中选择的目录中的文件。如果您没有正确引用文件名，则当文件名包含空格时它将失败。“C:\Documents”是“C:\Documents and settings\Username\My Documents\File.ext”的第一个路径。因此，如果该用户正在使用该目录，而您使用的是“C:\Dokumente\Datei.txt”，则不会出现错误，因为您的文件名中没有空格。但这只是猜测，您没有发布足够的代码来查看错误发生的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:35:16.067

可能是用户在他的文件打开对话框中输入“c/documents”，而他真的想输入“C:\Documents”之类的吗？

在他按下“打开”之前，文件打开对话框的屏幕截图会很有帮助。

# mysql - 如何与小数位进行比较

> ID：14694616
> 
> 赞同：0
> 
> 时间：2013-02-04T20:02:54.047
> 
> 标签：mysql, perl

在 mysql 中，如果我想做一个简单的查询：

```
select * from testtable where id = 192.1111 
```

我只想选择最多 2 个小数位，我该怎么做？

结论应该是测试表应该选择 192.1111 和 192.1133 等值

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:17:41.343

要返回与前 2 个小数点匹配的所有结果，请尝试使用`LIKE`：

```
SELECT *
FROM testtable 
WHERE id like '192.11%' 
```

这是[小提琴](http://sqlfiddle.com/#!2/09817/1)。

祝你好运。

# xml - 这个 XSL 代码有什么问题？

> ID：14694619
> 
> 赞同：1
> 
> 时间：2013-02-04T20:03:07.603
> 
> 标签：xml, variables, xslt, xslcompiledtransform, node-set

当我应用转换时，我得到一个异常：表达式必须评估为节点集。

```
 <xsl:for-each select = "some expression">
    <xsl:variable name="a0" select="some expression"/>
    <xsl:variable name="a1" select="some expression"/>
    <xsl:variable name="a2" select="some expression"/>

    <xsl:for-each select="$a0 | $a1 | $a2">
        <xsl:value-of select="."/>
        <xsl:if test="position()!=last()">,</xsl:if>
    </xsl:for-each>

  </xsl:for-each> 
```

现在，如果我要使用 if 语句并将其放在第一个循环的级别，则可以正确应用转换。

如果问题在于表达式“$a0 | $a1 | $a2”不被视为节点集，我如何使用 XSLT 1.0 实现类似的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:51:36.470

正如错误所述，在 XSLT 1.0 中，您不能使用联合运算符来连接还不是节点的操作数。

如果您使用的是支持[该`node-set()`功能](http://www.xml.com/pub/a/2003/07/16/nodeset.html)的 XSLT 处理器，您可以这样做：

```
<xsl:for-each select="exsl:node-set($a0) | exsl:node-set($a1) | exsl:node-set($a2)">
    <xsl:value-of select="."/>
    <xsl:if test="position()!=last()">,</xsl:if>
</xsl:for-each> 
```

但如果你要这样做，你不妨这样做：

```
<xsl:value-of select="concat($a0, ',', $a1, ',', $a2)" /> 
```

Judging from a recent question you made, perhaps you have tons of variables, in which case perhaps your design needs some rethinking. If you could provide some specifics instead of generic placeholders, perhaps someone could advise you on a different approach.

# mysql - mysql匹配不返回不区分大小写的结果

> ID：14694620
> 
> 赞同：8
> 
> 时间：2013-02-04T20:03:19.507
> 
> 标签：mysql, join, case-insensitive, match-against

我有两张桌子：

```
CREATE TABLE IF NOT EXISTS `test1` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `bucket_id` int(10) unsigned NOT NULL COMMENT 'folder this component belongs to',
  `test1_name` varchar(81) NOT NULL COMMENT 'Name of this component',
  `test1_desc` varchar(1024) NOT NULL COMMENT 'Component Description',
  PRIMARY KEY (`id`),
  FULLTEXT KEY `test1_search` (`test1_name`,`test1_desc`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

CREATE TABLE IF NOT EXISTS `bucket` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `bkt_name` varchar(81) NOT NULL COMMENT 'The name of this bucket',
  `bkt_desc` varchar(1024) NOT NULL COMMENT 'A description of this bucket',
  `bkt_keywords` varchar(512) DEFAULT NULL COMMENT 'keywords for searches',
  PRIMARY KEY (`id`),
  FULLTEXT KEY `fldr_search` (`bkt_desc`,`bkt_keywords`,`bkt_name`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=8 ; 
```

Bucket 只是一个持有者，而 test1 包含所有可以放入桶中的东西。例如：

```
INSERT INTO `bucket` (`id`, `bkt_name`, `bkt_desc`, `bkt_keywords`) VALUES
(1, 'Simpsons', 'The Simpsons Cartoon Family was first successful adult cartoon series', 'Homer, Marge, Lisa and Bart'),
(2, 'Griffins', 'The family from the popular family guy series', 'Peter, Lois, Meg, Chris, Stewie, Brian');

INSERT INTO `test1` (`id`, `bucket_id`, `bkt_name`, `bkt_desc`) VALUES
(1, 1, 'Homer Simpson', 'Homer the figurative head of the Simpsons Family and is the husband of Marge'),
(2, 2, 'Peter Griffin', 'Peter the figurative head of the Griffin family on the hit TV seriers The family Guy'); 
```

现在，使用以下查询，我想查找名称、描述或关键字包含搜索词“family”或其组件包含“family”一词的所有存储桶）

到目前为止，我所拥有的是这个查询并且它没有返回混合大小写的结果，因为在“家庭”中找不到“家庭”。

```
SELECT *
FROM bucket
RIGHT JOIN test1 ON test1.bucket_id = bucket.id
WHERE
  bucket.isvisible > 0 AND
  MATCH(bucket.bkt_keywords, bucket.bkt_desc, bucket.bkt_name)
    AGAINST('family' IN BOOLEAN MODE) OR
  MATCH(test1.test1_name, test1.test1_desc) 
    AGAINST('family' IN BOOLEAN MODE) 
```

我还应该补充一点，所有文本字段都具有 utf8_general_ci 的排序规则，就像 MyISAM 的整个表一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T22:36:01.703

我认为您的表格不用`utf8_general_ci`作排序规则，但是`utf8_bin`. 在修改表格后，我能够重现您描述的行为，如下所示：

```
ALTER TABLE test1 CONVERT TO CHARACTER SET utf8 COLLATE utf8_bin;
ALTER TABLE bucket CONVERT TO CHARACTER SET utf8 COLLATE utf8_bin; 
```

您也许应该将表的排序规则明确设置为：

```
ALTER TABLE test1 CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;
ALTER TABLE bucket CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

如果上面有任何改变，我猜你的服务器或会话实际上设置为默认使用另一个排序规则（因为排序规则没有在你的表定义中指定）。这可以通过以下方式检查：

```
SHOW GLOBAL VARIABLES LIKE 'collation_server';
SHOW SESSION VARIABLES LIKE 'collation_server'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:20:53.357

答案显然是在两个匹配子句周围添加一些括号。

```
SELECT *
FROM bucket
RIGHT JOIN test1 ON test1.bucket_id = bucket.id
WHERE bucket.isvisible > 0 AND
 ( MATCH(bucket.bkt_keywords, bucket.bkt_desc, bucket.bkt_name)
  AGAINST('family' IN BOOLEAN MODE) OR
  MATCH(test1.test1_name, test1.test1_desc) 
  AGAINST('family' IN BOOLEAN MODE) ) 
```

# vim - Vim：无法让病原体加载包

> ID：14694624
> 
> 赞同：4
> 
> 时间：2013-02-04T20:03:26.903
> 
> 标签：vim, ubuntu, pathogen

我已经在 Stackoverflow 和 github 等上阅读了其他五个关于此的问题，但未能解决此问题，此时我完全迷失了。

我在带有 Vim 7.3 的 Ubuntu 11.10 上。

这是我的 .vimrc

```
set nocp
call pathogen#infect()
syntax on
filetype plugin indent on
call pathogen#infect()
colorscheme xoria256
set rnu
set expandtab
set tabstop=2
set shiftwidth=2
set cindent
set virtualedit=all 
```

病原体.vim 在 ~/.vim/autoload 我有 vim-jade 和 vim-surround 在 ~/.vim/bundle/

运行 vim index.jade 时没有任何错误，我只是没有语法高亮显示，也无法使用 vim 环绕命令。

任何帮助都会摇滚！我已经在这几个小时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T16:19:39.873

1.  使用您的插件名称在捆绑包中创建一个目录

    mkdir ~/.vim/bundle/surround/

2.  将插件解压缩到您创建的目录。

    cp ~/surround.zip ~/.vim/bundle/surround/ cd ~/.vim/bundle/surround/ 解压环绕.zip rm -rf环绕.zip

3.  将这些行添加到 ~/.vimrc 的开头

    在文件类型插件缩进上执行病原体#infect() 语法

现在您将能够使用环绕.vim 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:24:22.573

你只需要一次调用病原体，这必须在你做之前发生`filetype plugin indent on`。

你的这个版本`~/.vimrc`应该可以工作。

```
set nocompatible
call pathogen#infect()
syntax on
filetype plugin indent on
colorscheme xoria256
set relativenumber
set expandtab
set tabstop=2
set shiftwidth=2
set cindent
set virtualedit=all 
```

# java - 找不到 javaw.exe pdb

> ID：14694627
> 
> 赞同：0
> 
> 时间：2013-02-04T20:03:39.587
> 
> 标签：java, c++, visual-studio-2010, java-native-interface

我正在构建一个 java 应用程序，它使用 jni 调用 c++ dll 的某些函数。当我尝试构建我的 dll 时，我收到一个弹出消息，提示找不到或不匹配“javaw.exe”的调试信息。无法找到或打开 pdb 文件。我已经设置了我的环境变量。这是正常的，如果不是有没有办法避免它？

```
'javaw.exe': Loaded 'C:\Program Files\Java\jdk1.7.0_13\jre\bin\javaw.exe', Cannot find or open the PDB file
'javaw.exe': Loaded 'C:\Windows\System32\ntdll.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\kernel32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\KernelBase.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\advapi32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\user32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\WinSxS\amd64_microsoft.windows.common-controls_6595b64144ccf1df_6.0.9200.16384_none_418c2a697189c07f\comctl32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\msvcrt.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\sechost.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\rpcrt4.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\gdi32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\imm32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\msctf.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Program Files (x86)\NVIDIA Corporation\3D Vision\nvStInit64.dll', Cannot find or open the PDB file
'javaw.exe': Loaded 'C:\Windows\System32\psapi.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\WinSxS\amd64_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6871_none_08e717a5a83adddf\msvcr90.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Program Files\Java\jdk1.7.0_13\jre\bin\msvcr100.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Program Files\Java\jdk1.7.0_13\jre\bin\server\jvm.dll', Cannot find or open the PDB file
'javaw.exe': Loaded 'C:\Windows\System32\wsock32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\winmm.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\ws2_32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\winmmbase.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Windows\System32\nsi.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Program Files\Java\jdk1.7.0_13\jre\bin\verify.dll', Cannot find or open the PDB file
'javaw.exe': Loaded 'C:\Program Files\Java\jdk1.7.0_13\jre\bin\java.dll', Cannot find or open the PDB file
'javaw.exe': Loaded 'C:\Program Files\Java\jdk1.7.0_13\jre\bin\zip.dll', Cannot find or open the PDB file
'javaw.exe': Loaded 'C:\Users\anael\Documents\INF2990\Cadriciel\Exe\DLL\INF2990.dll', Symbols loaded.
'javaw.exe': Loaded 'C:\Windows\System32\opengl32.dll', Symbols loaded (source information stripped).
'javaw.exe': Loaded 'C:\Program Files\Java\jdk1.7.0_13\jre\bin\jawt.dll', Cannot find or open the PDB file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:13:03.223

是的，这很正常。

Visual Studio 只是说你在调试时找不到显示 C++ 源代码所需的 pdb 文件——但不是你的源代码，而是 javaw.exe 本身的源代码（你不需要，如果有的话是问题，发现错误的可能性在您的代码中，而不是在 Oracle 中是相当大的）。

# c - 同步三个linux进程

> ID：14694628
> 
> 赞同：0
> 
> 时间：2013-02-04T20:03:40.077
> 
> 标签：c, linux, bash, daemon

我有 3 个不同的 linux 进程（守护进程）。一个是主要的，它负责 IPC 的初始化和其他一些事情。初始化完成后，其余进程之一必须启动并运行，直到必须重新启动。启动哪个进程取决于存储在 XML 文件中的配置。我必须能够重新启动所有进程，即通过/e​​tc/init.d/xxx 重新启动。

如何根据配置启动其余两个进程之一并实施重新启动，以便所有进程一次重新启动？

# php - 在链php中搜索href的所有内容

> ID：14694631
> 
> 赞同：-2
> 
> 时间：2013-02-04T20:03:57.180
> 
> 标签：php, regex, tags

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我怎样才能找到字符链中所有href的值。

例子 ：

```
<a href = "blabla1"> Test1 </a>
<a href = "blabla2"> Test1 </a> 
```

我想检索 blabla1 和 blabla2。

我尝试了正则表达式，但我放弃了！XD

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:07:14.410

你可以使用 php DOM

```
$str = <<<H
<a href="blabla1">Test1</a>
<a href="blabla2">Test1</a>
H;

$dom = new DOMDocument();
$dom->loadHTML($str);

foreach($dom->getElementsByTagName("a") as $node){
    echo $node->getAttribute("href") . "<br>";
} 
```

这是[DOM的文档](http://www.php.net/manual/en/book.dom.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:10:39.290

XPath 可以完成获取属性值的工作`$xpath->query("//a/@value");`。然后您可以遍历属性节点的节点列表并访问每个属性节点的 $value 属性。

# sql-server-2008 - 为什么这个内部连接 SQL 块会失败？

> ID：14694634
> 
> 赞同：1
> 
> 时间：2013-02-04T20:04:02.053
> 
> 标签：sql-server-2008, join, inner-join

`incorrect syntax near as`运行时接收`inner join`。需要确定为什么和不能。请指出哪里出错了：

相关SQL代码

```
from 

(   
    (
        (dbo.task inner join dbo.projwbs on dbo.task.proj_id=dbo.projwbs.wbs_id) as tmptb1
    inner join
        (dbo.task inner join dbo.project on dbo.task.proj_id=dbo.project.proj_id) as tmptb2
        on dbo.tmptb1.proj_id=dbo.tmptb2.proj_id as dbo.tmptb3
    )
    inner join
(
        (dbo.task inner join dbo.rsrc on dbo.task.rsrc_id=dbo.rsrs.rsrc_id) as tmptb4)
        on tmptb3.proj_id=tmptb4.proj_id
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:07:59.710

您的代码看起来有太多的括号，但很难准确地说出您在做什么。所以我会改变它以使用类似的东西：

```
select *
from 
(
    select *
    from
    (   
        select *
        FROM dbo.task 
        inner join dbo.projwbs 
            on dbo.task.proj_id=dbo.projwbs.wbs_id
    ) as tmptb1
    inner join
    (
        select *
        from dbo.task 
        inner join dbo.project 
            on dbo.task.proj_id=dbo.project.proj_id
    ) as tmptb2
        on tmptb1.proj_id=tmptb2.proj_id
) as tmptb3
inner join
(
    select *
    from dbo.task 
    inner join dbo.rsrc 
        on dbo.task.rsrc_id=dbo.rsrs.rsrc_id
) as tmptb4
    on tmptb3.proj_id=tmptb4.proj_id 
```

将 替换为`SELECT *`每个表中所需的列。

我不确定您为什么要执行所有这些子查询来获取数据，您应该可以使用：

```
select *
from dbo.task t
inner join dbo.projwbs w
  on t.proj_id=w.wbs_id
inner join dbo.project p
  on t.proj_id=p.proj_id
inner join dbo.rsrc r
  on t.rsrc_id = r.rsrc_id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T20:10:34.410

我可能遗漏了一些东西......但由于这些都是`inner joins`，我不确定这些块给你的简化版本也不会做：

```
from 
    dbo.task t
    inner join dbo.projwbs pw on t.proj_id=pw.wbs_id 
    inner join dbo.project p on t.proj_id=p.proj_id
    inner join dbo.rsrc r on t.rsrc_id=r.rsrc_id 
```

# r - 带有连接线的多个散点图

> ID：14694636
> 
> 赞同：1
> 
> 时间：2013-02-04T20:04:08.280
> 
> 标签：r, ggplot2

我想创建多个散点图，其中线连接*每组* `hospital`中的所有点。

```
> head(dt.gg)

        pred   base hospital
1 -1.4273910 -2.596        1
2 -0.7296839 -1.595        1
3 -0.6606799 -1.496        1
4 -0.5993430 -1.408        1
5 -0.5380061 -1.320        1
6 -0.4766692 -1.232        1 
```

到目前为止，我的尝试是：

```
require(ggplot2)
dt.gg <- read.csv("http://goo.gl/5yjEZ")
ggplot(dt.gg, aes(x=base, y=pred, color=hospital)) + geom_point(shape=1) +
    theme(legend.position="none") 
```

但是我一直无法加入每个组中的点。`geom_line()`似乎不起作用 - 它连接了所有点，而不是单独连接每个医院组中的点（并且与每个组的点颜色相同）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:11:26.840

您应该`group=hospital`向函数添加参数`ggplot()`以连接点。

```
ggplot(dt.gg, aes(x=base, y=pred, color=hospital,group=hospital)) + geom_point(shape=1) +
 geom_line()+ theme(legend.position="none") 
```

# java - SWT CoolBar ToolBar 右侧位置

> ID：14694640
> 
> 赞同：1
> 
> 时间：2013-02-04T20:04:22.810
> 
> 标签：java, swt, jface

我有以下代码：

```
@Override
protected CoolBarManager createCoolBarManager(int style) {
    CoolBarManager coolBarManager = new CoolBarManager(style);
    coolBarManager.setLockLayout(true);
    ToolBarManager toolbarAtendimento = new ToolBarManager();
    toolbarAtendimento.add(incluirAtendimentosAction);
    toolbarAtendimento.add(incluirClientesAction);
    toolbarAtendimento.add(listarAtendimentosAction);
    toolbarAtendimento.add(listarClientesAction);
    toolbarAtendimento.add(sincronizarAtendimentosAction);
    toolbarAtendimento.add(visualizarRelatSincronizacaoAction);
    coolBarManager.add(toolbarAtendimento);
    return coolBarManager;
} 
```

我正在尝试将工具栏按钮放在右侧。但`SWT.RIGHT`风格无济于事。

我找到了以下链接： [在 Eclipse/RCP 中定位工具栏](https://stackoverflow.com/questions/4759600/positioning-toolbars-in-eclipse-rcp)

这是唯一的方法吗？我的平台是Linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:50:19.957

可以通过显式更改其布局来右对齐工具栏中的项目：

```
GridDataFactory.fillDefaults().align(SWT.END, SWT.CENTER).grab(true, false).applyTo(toolBar); 
```

请参阅[SWT：如何右对齐工具栏中的项目](https://stackoverflow.com/questions/15132257/swt-how-to-right-align-items-in-a-toolbar)

# asp.net - 将 RadEditor 内容设置为完整的 HTML，并检索完整的 HTML

> ID：14694642
> 
> 赞同：0
> 
> 时间：2013-02-04T20:04:33.760
> 
> 标签：asp.net, telerik, radeditor

**我的场景：** 我使用 RadEditor 控件作为用户填写表单以提交电子邮件的编辑器。RadEditor 是用户键入电子邮件正文的地方。我们有一些电子邮件模板以 HTML 格式存储在我们的数据库中，用户可以通过表单上的下拉菜单进行选择。模板是完整的 HTML，有自己的 head 标签和 style 标签，有自己的样式。

**我的问题：** 我可以将 RadEditor 内容设置为模板的完整 HTML 吗？我希望能够将编辑器的内容设置为完整的 HTML *，并能够从服务器 code-behind 上的 RadEditor 中获取完整的 HTML*。我目前正在尝试这样做，但是当我使用编辑器的 .Content 属性时，我只得到`<body>`标签内的内容，而不是完整的 HTML。当我需要在用户输入内容后将编辑器内容保存回数据库时，这是有问题的，因为我需要将完整的 HTML 保存到数据库中。

我的方法是否不正确，我是否应该只尝试保存和检索编辑器 html 的正文，而不是完整的 html？在这种情况下，我将如何处理需要为每个电子邮件模板应用的不同样式？

请注意，我一直在使用 `ContentAreaMode="Iframe"`编辑器的设置。

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:28:41.717

我认为你的方法是正确的。如何完成它：

1.  不要将“完整的 html”保存到数据库，而是保存`RadEditor.Content`HTML 和（在另一列中）他们选择的 HTML 模板的 ID。如果他们想要更改模板，这将是很好的。

2.  您的 HTML 模板可以有某种类型的“占位符”，让您知道从 RadEditor 中“插入”HTML 的位置。假设您的 HTML 模板中有 text `%%BODY%%`。

当您准备好发送电子邮件时，获取模板、`RadEditor.Content`（从回发或从查询数据库），然后将它们组合起来。就像是

```
string htmlTemplate = //your HTML template from your database
string body = htmlTemplate.Replace("%%BODY%%", RadEditor.Content); //the string 'body' is what will be sent as your email body. 
```

# javascript - 如何仅使用 CSS 样式表将网站修改为对移动设备友好

> ID：14694643
> 
> 赞同：-1
> 
> 时间：2013-02-04T20:04:35.523
> 
> 标签：javascript, css, mobile, cross-browser

我开发了一个网站，其中包含一些 JavaScript（一个页面将它用于图片库中的弹出图片，另一个使用优惠券代码文本字段）。我想创建一个 CSS 样式表，它可以让我调整网站中的所有内容，以便在移动浏览器中显示时更加流畅和简单。有没有办法只使用标记为移动浏览器的样式表来做到这一点，如果是这样，格式是什么？

此外，在我的网站的移动版本上使用 JavaScript 是否会造成问题，或者我也可以将其调整为移动版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:11:10.727

您需要使用[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

[这](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)是一篇很好的文章，可以帮助您入门

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:07:33.510

据我所知，您不能将 CSS 用于此级别的条件...但是您可以使用 Javascript 来选择特定的 CSS...

我正在使用这个库来做到这一点

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

它将移动用户重定向到您域中的子文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:06:46.133

我知道这个答案将是非常初学者，但你有没有看过 jquery mobile ？

上面有很多 html5 用法，对于简单的示例/项目，它工作得很好。

[http://jquerymobile.com/](http://jquerymobile.com/)

# mono - CECIL IsGenericInstance 不为输出参数返回正确的值

> ID：14694647
> 
> 赞同：0
> 
> 时间：2013-02-04T20:04:49.923
> 
> 标签：mono, mono.cecil

我有下面的方法，其中第二个参数也可以为空

```
public static void MyMethod(Nullable<System.Int32> i_ReportID, out Nullable<System.Int32> i_MenuID)
        {
            i_MenuID = 0;
        } 
```

我试图通过以下方式将参数标识为 GenericInstance

(methodDefinition.Parameters[0] as ParameterReference).ParameterType.IsGenericInstance **对于第一个参数，它返回 true。** (methodDefinition.Parameters[1] as ParameterReference).ParameterType.IsGenericInstance **对于第二个参数，它返回 false。为什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:16:25.113

它应该与 ByReferenceType 一起使用，如下所示

(parameter.ParameterType as ByReferenceType).ElementType.IsGenericInstance

之后我得到正确的 IsGenericInstance 值

# jquery - jQuery img swap - 保持宽度和高度

> ID：14694649
> 
> 赞同：1
> 
> 时间：2013-02-04T20:04:56.310
> 
> 标签：jquery, css, image

我无法让图像交换正常工作。问题是放置在下面的标题在交换的图像后面消失了，因为它具有位置：绝对。我可以通过对图像周围的额外 div 应用固定高度来解决这个问题 - 但由于这必须在响应式布局中工作，所以高度是可变的。

我确信有一个简单的解决方案，但无法弄清楚。

在下面创建了[jsfiddle](http://jsfiddle.net/RnUqp/)并粘贴了代码：

HTML：

```
<div class="container">
<img src="http://placehold.it/100x100" class="image_off">
<img src="http://placehold.it/100x100/E8117F" class="image_on">
<h2>Title</h2>
</div> 
```

jQuery：

```
//image fade on hover
$('.image_off').on('mouseenter', function () {
    $(this).fadeOut(200);
    $('.image_on').fadeIn(200).css('display', 'block');
});
$('.image_on').on('mouseleave', function () {
    $(this).fadeOut(200);
    $('.image_off').fadeIn(200);
}); 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:31:43.037

您不必使用`fadeOut`该`image_off`元素，因为 image_on 在顶部逐渐消失。

如果您想保留这种行为，您可以将不透明度设置为近乎透明的动画，然后`image_on`无论如何都会在顶部淡入淡出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:22:58.097

删除`position:absolute;`.

`callback function`并在**JQuery**中添加 a ，以便 the`.fadeIn()`和 the`.fadeOut()`一个接一个地执行。

```
$('.image_off').on('mouseenter', function () {
    $(this).fadeOut(200,function(){
           $('.image_on').fadeIn(200).css('display', 'block');
    });

});
$('.image_on').on('mouseleave', function () {
    $(this).fadeOut(200,function(){
          $('.image_off').fadeIn(200);
    });

}); 
```

看看：http: [//jsfiddle.net/AliBassam/GTK8T/](http://jsfiddle.net/AliBassam/GTK8T/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:48:38.317

万一它对任何人有任何用处，最终的 jQuery 使用：

```
//image fade on hover
$('.image_off').on('mouseenter', function() {
        $(this).animate({opacity: 0.5}, 200);
        $('.image_on').fadeIn(200).css('display','block');
});   
$('.image_on').on('mouseleave', function() {
        $(this).fadeOut(200);
        $('.image_off').animate({opacity: 1}, 200);
}); 
```

# javascript - ajax Miltipart FormData - 在一个请求中上传数据和文件

> ID：14694652
> 
> 赞同：1
> 
> 时间：2013-02-04T20:05:05.167
> 
> 标签：javascript, ajax, multipartform-data

我想通过一个 ajax 调用同时上传文件（图像和 PDF 文件）和数据（选择框值和输入字段）。我已经到了可以成功上传我需要的两个文件的阶段，但是我很难将输入中的值和选择标签附加到 FormData 对象。

多年来一直坚持这一点，所以任何帮助将不胜感激。

下面是 ajax 调用它的自身 - 如果这还不够并且您需要更多信息，请告诉我。

```
$(function(){

$("#ajaxComm").submit(function(e){

e.preventDefault();

imageInput = document.getElementById("File-0")
pdfInput = document.getElementById("File-1")

imageFile = imageInput.files[0];
pdfFile = pdfInput.files[0];

var formdata = new FormData();  

formdata.append('file-0[]', imageFile);
formdata.append('file-1[]', pdfFile);

   $.ajax({
    url: "upload.php",
    type: "POST",
    data: formdata,
    processData: false,
    contentType: false,
    success: function (res) {
    document.getElementById("response").innerHTML = res;
    }

  }); 
 });

}); 
```

谢谢凯米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:16:39.210

由于这是一个 ajax 调用，您可以使用`GET`方法来附加选择框和输入字段数据（如果它们适合 url 大小），它不需要是漂亮的 url；并`POST`用于文件，因为该部分已经在工作。

# jquery - 影响页面布局的 jQuery Mobile 弹出窗口？

> ID：14694653
> 
> 赞同：2
> 
> 时间：2013-02-04T20:05:05.727
> 
> 标签：jquery, jquery-mobile, mobile, popup, modalpopups

我的jQM页面从上到下的基本描述（这个问题的底部有代码）：

1.  包含一个按钮和一个通过单击该按钮打开的弹出窗口的标题栏。
2.  包含 1 到 4 个 HTML5 画布的区域。画布可以添加/删除，并且可以动态调整大小以填充窗口的中间部分，它们之间没有空格。
3.  一个包含几个按钮和一个滑块的 div。所有画布都有 display:block 属性，当有 2-4 个画布时，有些画布会被赋予 float:right 属性。当只有一张画布时，不会出现以下问题。

调整窗口大小时，一切都在正确的位置并动态调整大小。在单击按钮之前，一切都很好。单击按钮时，弹出窗口显示得很好，但是 4 个画布被从它们的块象限中剔除，并将页面拉伸到出现滚动条的位置。奇怪的是，当我还原然后最大化时，画布又回到了正确的位置，弹出窗口仍然在我想要的位置。每当我关闭并打开弹出窗口时，画布就会再次被撞到不合适的位置。

为图片链接道歉，但我没有嵌入它们的声誉。

打开弹窗前：

![在此处输入图像描述](../Images/5577146418797a484b0082241d8dc1a3.png)

打开弹窗后：

![在此处输入图像描述](../Images/856ee48849f83f49bc1fe1360572c22f.png)

还原然后最大化后，我得到了我最初想要的：（由于声誉，无法添加第三个链接；它显示了前两个图像的组合，弹出窗口正确显示在原始布局上）

弹出窗口的 HTML（这是我实际使用的简化版本，但效果相同）：

```
<div id="header" data-role="header">  
  <a id="menu-button" data-transition="pop" href="#simplepopup" data-role="button"
         style="margin:0; padding:0;">Open Popup</a>
  <div data-role="popup" id="simplepopup"> 
    TEST
  </div>
</div> 
```

用于弹出的 JS：

```
$("#menu-button").click(function () {
  $('#simplepopup').popup('open', {positionTo: "window"});
}); 
```

归结为一个问题：为什么打开 jQM 弹出窗口会影响背景布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T01:32:37.990

移动这段代码：

`<div data-role="popup" id="simplepopup"> TEST </div>`

头部之外。

# mongodb - 如何使用 MongoDB 存储 ejabberd 消息？

> ID：14694654
> 
> 赞同：5
> 
> 时间：2013-02-04T20:05:11.983
> 
> 标签：mongodb, ejabberd

我正在`ejabberd`用作`XMPP`服务器。但我希望存储通过服务器的消息，以及消息何时发送以及发送给谁以及由谁发送。我用谷歌搜索但找不到怎么做。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:00:16.023

您可能需要在 Erlang 中编写一个钩子。有关事件和挂钩，请参阅[ejabberd 文档，](http://www.process-one.net/en/wiki/ejabberd_events_and_hooks/)特别是这个：

`user_send_packet(From, To, Packet) -> ok`

使用[mongodb 的 erlang 驱动程序](http://docs.mongodb.org/ecosystem/drivers/erlang/)。如果那是“不可能”/“太难”，我建议你调用一个 PHP/Python/Ruby 脚本，将消息存储到 mongodb 中。它很容易做到，但不会很好地扩展。

希望这可以帮助。

一些链接： [mongodb-erlang Erlang驱动示例](https://stackoverflow.com/questions/9095845/mongodb-erlang-erlang-driver-examples)

PS：自从我使用 eJabberd 以来已经有一段时间了。欢迎任何更正。

# c++ - SDL 2.0 我可以不在主线程中运行它吗？

> ID：14694659
> 
> 赞同：3
> 
> 时间：2013-02-04T20:05:20.033
> 
> 标签：c++, multithreading, sdl

我现在使用 Boost Threads 和 SDL 1.2。我想知道我是否会使用 SDL 2.* 我是否能够不从主线程（在 windows 和 linux 上）运行它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:30:33.730

从纯粹的技术角度来看，没有理由不应该这样做。我没有使用过 Boost Threads 或 SDL 2.*，但是我使用过 SDL 1.2、SDL Threads、Windows Threads 和 pthread。在 Windows 上，我遇到的唯一障碍是创建 SDL 窗口**的**线程必须是处理事件的线程。除此之外，我没有遇到任何问题。我不知道 Linux 是否也是如此，因为我总是在移植之前让我的代码在 Windows 上运行。

# php - PHP - 适用于本地主机和网络服务器的数据库连接

> ID：14694661
> 
> 赞同：-1
> 
> 时间：2013-02-04T20:05:27.883
> 
> 标签：php, database, connection, webserver, localhost

我想要一个数据库连接 php 文件，它可以与本地主机和网络服务器一起使用。这个想法是如果我在本地主机上使用一些常量，如果我在网络服务器上使用其他常量。

* * *

编辑：问题的解决方案是知道我是否在本地主机上的天气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:12:39.050

```
$local = array('localhost', '127.0.0.1');

if(in_array($_SERVER['HTTP_HOST'], $local)).     
{
$pdo = new      PDO('mysql:host=localhost;dbname=database', 'user', 'password');
}
else
{
$pdo = new PDO('mysql:host=example.com;dbname=database', 'user', 'password');
} 
```

您应该使用 PDO。这将检查 localhost 和 127.0.0.1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:07:46.713

您真正需要做的是制作每个环境版本化的配置文件。您将拥有一个包含数据库连接信息的本地/开发配置文件，然后是另一个用于生产或登台的配置文件。

您只需将 PHP 应用程序指向适当的配置文件，然后应用程序将与正确的数据库机器进行通信。

尝试使应用程序指向多个环境是一个坏主意。很快就会很混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:09:27.693

你可以随时检查`$_SERVER['HTTP_HOST']`。

```
if ($_SERVER['HTTP_HOST'] == "localhost") {
    mysql_connect($host_local, ...);
} else {
    mysql_connect($host_web, ...);
} 
```

# iphone - Xcode 和 Git 源代码控制：“工作副本 XXXXX 未能提交文件”

> ID：14694662
> 
> 赞同：45
> 
> 时间：2013-02-04T20:05:28.880
> 
> 标签：iphone, xcode, git

近一年来，我一直在使用 Xcode 开发和发布应用程序。我一直使用 git 作为本地存储库和 bitbucket 作为远程存储库。直到今天早上，一切都很顺利。我现在收到一个错误**“工作副本“xxx”未能提交文件。请告诉我你是谁。**Xcode 然后建议我运行 git config 并给它一个电子邮件地址和名称。我不知道为什么它突然需要知道我是谁。我不知道它以前以为我是谁，我不希望它变得比现在更混乱。我没有在 Mac 上使用命令提示符做任何事情，所以我不确定它希望我在哪里输入这些信息。我隐约记得一年前看到有关使用命令提示符设置 bitbucket 的建议，但它们看起来令人困惑，所以我从 xcode GUI 完成了所有操作。这是 xcode 4.6 中的新功能吗？我该怎么办？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-28T04:39:20.620

我也得到了这个。起初我可以重新启动mac，一切正常。最终，尽管即使重新启动，问题还是会卷土重来，但它不会让我提交，所以我不得不爱上命令行。一个警告是，当使用与 Xcode 一起安装的 vanilla git 时，您必须在终端中的任何 git 命令之前键入 xcrun。

所以输入：

```
xcrun git config --global user.email your@email.com
xcrun git config --global user.name "your name" 
```

这样做之后，一切都很好，花花公子。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-10-01T20:45:14.643

安装 Xcode 7 后我遇到了同样的问题。Kent Latimer 提供的解决方案对我有用。从终端在工作区目录中配置不带 --global 的配置。

```
xcrun git config user.name "Toto"
xcrun git config user.email toto.toto@mail.com 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-29T20:36:42.103

**提交的文件可能会导致错误：**

工作副本 '' 未能提交文件。无法与帮助应用程序通信

对于那些使用 Xcode 进行源代码控制，并且尝试过但没有成功的人：

xcrun git config --global user.name "Toto"*和*
xcrun git config --global user.email toto.toto@mail.com

检查正在提交的文件是否导致此问题。

**以下是解决此错误的方法：** 提交时，一次取消选中一个文件并尝试提交。如果这不起作用，请取消选中多个文件，只选中几个或一个。

**预期结果：** 最终，您应该找出阻止与 git 通信的文件。提交所有其他文件后，忽略所有更改。在此之后一切都应该正常工作。

**文件如何更改而不被跟踪？** 未经源代码管理跟踪而更改的文件将导致此问题。如果您可能不得不将 MacBook 切换到备用设备，这样您就可以将主 MacBook 送去维修，这可能会发生。在大多数情况下，使用 Dropbox 同步您的文件是可行的，但原始 Xcode 可能会进行细微的更改，而该更改在项目迁移到的 MacBook 中未跟踪到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-17T00:00:36.840

如果上述解决方案都不起作用，我想提一下，在我的情况下，我在将一些库拖到我的 svn 项目中时遇到了这个错误，这些库来自 github 并且在某种 GIT 控制下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-22T10:17:21.497

另一种选择：假设您实际上已将 git 配置为与 xcode 一起使用并假设它只是在运行 xcode，您可以在项目打开时在 xcode 中尝试此方法：

源代码管理 -> 配置 -> 点击“确定”

这似乎刷新了您最初设置的配置。

# c++ - 关于c++编程的两个问题

> ID：14694663
> 
> 赞同：1
> 
> 时间：2013-02-04T20:05:35.717
> 
> 标签：c++, visual-c++

今天我在大学里第一次考c++——我学的是计算机科学——我没考好，因为时间太短了，我不得不写一些很长的代码来完成简单的任务。所以这是一个有各种不同方法的纸牌游戏模拟。

第一个问题：我们应该比较每个玩家卡片的点值以确定最高点，这些点值都存储在一个玩家类对象中作为向量类数据元素。我所做的是：获取卡，将值存储在 int 中，然后像这样比较：

```
if(a > b && a > c && a > d){... 
```

...我不得不这样做四次。有一个更好的方法吗 ？如果没有，也许是比较整数的更简单方法？

第二个问题：如果你看这个你可能会知道问题是什么

```
int id0 = players[0].getID();
int bd0 = players[0].getBudget();
int id1 = players[1].getID();
int bd1 = players[1].getBudget();
int id2 = players[2].getID();
int bd2 = players[2].getBudget();
int id3 = players[3].getID();
int bd3 = players[3].getBudget();

stringstream players;
players << "Player's ID" << setw(10) << "Budget" << endl;
players << "-----------" << setw(10) << "------" << endl;
players << id0 << setw(20) << bd0 << endl;
players << id1 << setw(20) << bd1 << endl;
players << id2 << setw(20) << bd2 << endl;
players << id3 << setw(20) << bd3 << endl;

return players.str(); 
```

我不明白为什么上面的函数不能直接在字符串流中工作！编译器一直告诉我`sstream`不支持该`[]`运算符，即使它在其他方法中也有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:28:22.087

您的第二个问题是您重用了变量名：

```
Player players[10]; // or something

void foo() {
    std::stringstream players;
    players << players[1].getID();
} //     ^          ^
  //     |          |
  // stringstream   |
  //                |
  //         also stringstream 
```

为什么您希望编译器能够确定第一个`players`是`players << players`字符串流，而第二个是较早声明的变量？

* * *

在第一个问题中，您可以通过多种方式简化比较。

```
if (a > std::max(b,c,d)) { ... }
if (b > std::max(a,c,d)) { ... }
... 
```

这与您的代码做同样的事情（包括不处理关系），但更容易阅读。或者你可以这样做：

```
int top_score = std::max(a,b,c,d);
if (top_score == a) { ... }
if (top_score == b) { ... 
```

这通过对所有得分最高的玩家执行 if 条件来处理平局。或者你可以这样做：

```
Player &winner = *std::max_element(std::begin(players),std::players(end),
    [](Player &l,Player &r) { if (l.score() < r.score()) return l; else return r; });

// no conditional necessary, just access 'winner' 
```

尽管这又不能很好地处理关系；它只是从得分最高的人中挑选一个获胜者。你也可以这样做：

```
Player *sorted_players[players.size()];

// fill in sorted_players
std::transform(std::begin(players), std::end(players), sorted_players, [](Player &p) { return &p; });
auto compare_players = [](Player *l, Player *r) { return l->score() < r->score(); };
std::sort(std::begin(sorted_players), std::end(sorted_players), compare_players);

// get the top scorers
int top_score = sorted_players[players.size()-1]->score();
Player *winner_begin = std::lower_bound(std::begin(sorted_players), std::end(sorted_players), top_score, compare_players);

// reward each top scorer.
for (Player *winner = winner_begin; winner<std::end(sorted_players); ++winner) {
    reward(*winner);
} 
```

这通过奖励匹配最高分的每个玩家来处理平局。

# silverlight - 如何在 Silverlight 中调用外部 REST API

> ID：14694672
> 
> 赞同：0
> 
> 时间：2013-02-04T20:06:26.507
> 
> 标签：silverlight, rest, proxy, httpwebrequest, silverlight-5.0

假设我不控制服务器并且不能将 crossdomain.xml 或 clientaccesspolicy.xml 文件放在那里，我怎样才能在 Silverlight 应用程序内对外部 REST API 进行 http 调用，而不必使用 javascript 来执行它然后将数据传递给 Silverlight 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:46:20.267

您可以构建自己的代理服务器（或服务器应用程序，或 Web 应用程序中的 http 处理程序）以将请求转发到所需的主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:51:28.370

没有其他办法，要么使用**crossdomain.xml**和**clientaccesspolicy.xml ，要么使用****javascript**将数据传递给应用程序来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:50:27.927

我最终实现了一个类似于[这里描述的 ASP.NET 代理](http://kiwigis.blogspot.co.uk/2011/08/how-to-create-simple-proxy-in-aspnet.html)

然后将以下代码添加到 Silverlight 应用程序：

```
 public class Handler : IWebRequestCreate
    {
        public WebRequest Create(Uri uri)
        {
            return WebRequestCreator.ClientHttp.Create(new Uri("http://localhost:3234/Proxy.ashx?" + Uri.EscapeUriString(uri.OriginalString)));
        }
    }

    public MainPage()
    {
        InitializeComponent();

        HttpWebRequest.RegisterPrefix("http://", new Handler());
        HttpWebRequest.RegisterPrefix("https://", new Handler());

        (...rest of code...)
    } 
```

一个警告是，在代码的其余部分，必须小心使用`HttpWebRequest.Create`，永远不要`HttpWebRequest.CreateHttp`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-14T08:43:49.643

如上所述，由于微软从头开始构建的限制，代理服务器是唯一的答案。我与 Silverlight 合作多年，希望他们从未这样做过。

但是，我创建了这个库： [https ://bitbucket.org/MelbourneDeveloper/restclient-.net](https://bitbucket.org/MelbourneDeveloper/restclient-.net)

它有一个传递（代理）REST 服务的实现，该服务与 BitBucket 以及 Silverlight 示例进行对话，这使得 Silverlight 中的客户端应用程序看起来好像直接与 BitBucket 对话。我在示例中包含了为您提供客户端访问策略的代码。

# c# - 无法反序列化 WCF 代理类

> ID：14694673
> 
> 赞同：2
> 
> 时间：2013-02-04T20:06:29.410
> 
> 标签：c#, wcf, xsd, proxy-classes

这是情况。我有两个 WCF 服务，一个是 BizTalk 服务，另一个是用于查询数据存储库的普通 WCF 服务。我有一个测试应用程序，其中添加了服务引用到这两个服务中。我正在使用 HL7v3 模式在这两个服务之间传递数据。

似乎 BizTalk WCF 代理类是使用生成的，`System.Xml.Serialization`但其他非 BizTalk 代理遇到所有使用`System.Runtime.Serialization`.

我可以使用 BizTalk 代理类很好地反序列化，但不能使用其他类。我在尝试这样做时遇到的错误是：

> “targetNamespace 参数 'urn:hl7-org:v3' 应该与架构的 targetNamespace ' [http://schemas.datacontract.org/2004/07/](http://schemas.datacontract.org/2004/07/) ' 的值相同。”

当您查看 Reference.cs 文件时，此错误是有道理的，因为：

`[System.Runtime.Serialization.DataContractAttribute(Name="RCMR_IN000029UV01MCCI_MT000100UV01Message", Namespace="http://schemas.datacontract.org/2004/07/")]`

所以，我做了一些研究，发现你可以通过向服务/方法声明添加一个属性来强制 WCF 服务使用 XmlSerializer 而不是 DataContract：

`[XmlSerializerFormat(Style=System.ServiceModel.OperationFormatStyle.Document)]`

然后我在 Reference.cs 中注意到 System.XmlSerialization 现在正在使用，并且 2 个 Reference.cs 文件开始看起来非常相似。

现在，最后的问题是：

在切换 XMLSerializer 而不是 DataContract 之后，我实际上无法生成代理类的实例（这是一个 HL7v3 RCMR_IN000029UV01），因为在生成代理类时不会遇到根节点（最终成为对象类型）。所以当涉及到反序列化（或只是试图创建一个实例）时，我不能这样做，例如：`XmlSerializer pXmlSerializer = new XmlSerializer(RCMR_IN000029UV01);`因为 RCMR_IN000029UV01 在任何地方都不存在。

服务本身非常简单：

```
 [ServiceContract (Namespace="urn:hl7-org:v3")]
[XmlSerializerFormat(Style = System.ServiceModel.OperationFormatStyle.Document)]
public interface IRequestCDAService
{

    [OperationContract]
    string GetData(RCMR_IN000029UV01 query);

    [OperationContract]
    string GetDataByXML(XmlDocument queryXml);

    [OperationContract]
    CompositeType GetDataUsingDataContract(CompositeType composite);
} 
```

但是，我对 WCF 服务还不太熟悉，所以我不确定在属性等方面是否缺少一些东西。

似乎唯一真正的区别是代理类缺少架构根节点的实际构造函数，这是 BizTalk 服务的代理类中的样子：

```
 public partial class RCMR_IN000002UV01 : RCMR_IN000002UV01MCCI_MT000100UV01Message {

    private string iTSVersionField;

    public RCMR_IN000002UV01() {
        this.iTSVersionField = "XML_1.0";
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string ITSVersion {
        get {
            return this.iTSVersionField;
        }
        set {
            this.iTSVersionField = value;
            this.RaisePropertyChanged("ITSVersion");
        }
    }
} 
```

但是，当您查看其他（非 BizTalk）服务的 reference.cs 时，

```
 public RCMR_IN000029UV01() {
    this.iTSVersionField = "XML_1.0";
} 
```

类定义中缺少。我错过了什么？

**编辑：我忘了提及**Web 服务基于使用 xsd.exe 从 HL7v3 RCMR_IN000029UV01 模式生成的类文件公开这些 RCMR 对象。换句话说，这不是我自己创建的课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:19:27.720

问题不在于默认构造函数没有添加到非 biztalk 服务中。如果代码中没有默认构造函数，C# 编译器将生成一个默认构造函数。

可能是您缺少`[XmlRoot]`RCMR_IN000029UV01 类的属性。

# .net - 通过 Excel 文件在 LogiXML 中的层次结构

> ID：14694674
> 
> 赞同：0
> 
> 时间：2013-02-04T20:06:30.687
> 
> 标签：.net, xml, excel

我的问题如下。我正在尝试构建我拥有的数据的分层视图，该视图分为两个级别。第一层（最高）称为“组”，第二层（最低）称为“设施”。我正在尝试做的是能够通过 logixml（例如 Volume 等）创建一些指标，并在 excel 文件中找到行级数据。我遇到的问题是我无法为数据提供层次结构视图，这意味着，我不知道如何“告诉”LogiXML 以我想要的方式对数据进行分组。Excel 使用数据透视表完成我想要的操作，但这不是可接受的呈现方式：

```
Group1                                          1464    1.033592841
 Facility1------------------------------         788    1.224048166
 Facility2------------------------------         517    0.56564287
 Facility3---------------------------             26    1.015306122
 Facility4-------------------------------         55    0.754109589

Group2                                              1077    0.48911388
 Facility1------------------------------------      1077    0.48911388 
```

任何有关如何或在何处编辑 excel 文件以便我可以在 LogiXML 中构建此层次结构的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:50:21.050

您可能只需要“分解”您的组，以便在每个行级别表示层次结构。这样，Logi 中的 GroupFilter 可以在列级别应用。

像这样的东西。。

组1 | 设施1 | 788 | 1.22

组1 | 设施2 | 517 | 0.56

组1 | 设施3 | 26 | 1.01

组2 | 设施1 | 1077| 0.48

...

其中每一行都有顶级组作为列值。这样您就可以有效地将分组应用于该列值。

如果数据已经在 Excel 中进行了透视，您还可以尝试使用 Logi 中的数据层元素自动展开数据，以便在报表定义中更轻松地进行格式化。

有关使用 UnCrosstab 过滤器的更多详细信息，您可以查看这篇文章： [http ://devnet.logixml.com/rdPage.aspx?rdReport=Article&dnDocID=1253](http://devnet.logixml.com/rdPage.aspx?rdReport=Article&dnDocID=1253)

# servicestack - ServiceStack OrmLite Sqlite 异常

> ID：14694679
> 
> 赞同：1
> 
> 时间：2013-02-04T20:06:49.977
> 
> 标签：servicestack, ormlite-servicestack, badimageformatexception

我有以下代码行：

```
IDbConnection dbConn = dbFactory.OpenDbConnection();
IDbCommand dbCmd = dbConn.CreateCommand(); 
```

我收到以下异常：

> BadImageFormatException 试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）

我认为这可能与 32 位和 64 位应用程序有关，所以我尝试了这两个版本的 dll。此外，我还通过 IIS 启用了 32 位应用程序。有人可以告诉我为什么我可能会收到此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:13:38.077

对，这是尝试在 64 位 pc 上使用 32 位 unmanged dll (Sqlite) 的结果。

有关解决方案，请参阅[此答案](https://stackoverflow.com/questions/4657087/system-badimageformatexception-on-running-serivcestack-examples)。

否则使用特定于平台的 Sqlite .NET 包装器：

*   [ServiceStack.OrmLite.Sqlite32](https://nuget.org/packages/ServiceStack.OrmLite.Sqlite32/)
*   [ServiceStack.OrmLite.Sqlite64](https://nuget.org/packages/ServiceStack.OrmLite.Sqlite64/)

# c - 损坏的主函数堆栈

> ID：14694680
> 
> 赞同：0
> 
> 时间：2013-02-04T20:06:52.150
> 
> 标签：c, buffer-overflow

我有以下 C 代码：

```
int main()
{
    char s[10];

    scanf("%s", s);
} 
```

**编辑：**为上层 C 程序生成的程序集如下：

```
push   %rbp
mov    %rsp,%rbp
sub    $0x10,%rsp
lea    -0x10(%rbp),%rax
mov    %rax,%rsi
mov    $0x4005e4,%edi
mov    $0x0,%eax
callq  400420 <__isoc99_scanf@plt>
leaveq
retq 
```

如果用户输入超过数组的大小，将导致覆盖其他堆栈值。查看生成的程序集，我发现 gcc 将堆栈指针降低了 16 个字节而不是 10（字对齐）。所以，如果我输入超过 16 个字节，堆栈应该会损坏，并且在 main 返回时它应该可能只是段错误。

有趣的这种行为确实会发生，但如果我输入很多字符就会发生这种情况。为什么它不会在 17 个字符时失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:33:01.290

实际行为围绕着如何在堆栈上分配内存的细节（这取决于实现，导致未定义的行为）。假设当您的代码被输入（调用）时，堆栈偏移量为 0，而 RSP 指向的是返回地址。

如果您快速浏览一下汇编程序，这可能会突然出现：

```
sub    $0x10,%rsp 
```

这会为您的局部变量保留空间，而这是您所期待的。很容易认为这 16 个字节是我们保留的唯一堆栈空间。如果我们越过这一点，我们将覆盖返回值并使进程（或至少线程）崩溃。

因为很容易错过第一条指令：

```
push   %rbp 
```

将基指针保存为调用约定的一部分（因此可以跟踪调用堆栈），并占用额外的 8 个字节（对于 64 位架构，ebp 在 32 位上只有 4 个字节）。因此，在开始覆盖返回地址之前，您有 24 个字节。请记住，如果您输入 24 个字符，终止的 null ('\0') 将存储为第 25 个字符，这将破坏返回地址。

虽然存储在堆栈中的基指针也被覆盖，但`main`之后就不再使用它了。但请注意，调用者会搞砸，因为：

```
leaveq 
```

将 RSP 设置为 RBP，然后设置 POP RBP。所以如果调用者在调用返回后引用了局部变量，那么很可能会出现问题。如果调用者不同（如果您使用不同的运行时），写入第 17 个字符可能会出现问题（可能导致调用者出现 SEGFAULT）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:14:52.467

如果您覆盖堆栈，该程序将表现得非常糟糕。特定的编译器将以自己内部定义的方式格式化堆栈。

避免这种情况的方法是使用以将输入字符数限制为缓冲区大小的方式读取的内容。

一种方法是将长度添加到格式`"%9s"`中，为字符串字符的结尾留出空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:16:42.903

首先，代码将获得段错误，而不是覆盖缓冲区的末尾，而是访问系统中不存在的内存[或尝试写入只读内存，但这不太可能案子]。因此，在您的代码从 main 返回之前不会发生这种情况 - 除非字符串太长以至于超过堆栈上可用的最高地址 - 这很可能是几百个字节，如果不超过的话。[当然，在您按下回车之前，根本不会发生任何输入 - 直到那时，输入只是保存在缓冲区中`stdin`]

其次，它被称为“未定义的行为”（简称 UB），意思是它没有定义会发生什么。所以，你不能指望任何特定的行为是确定的——它的工作方式可能与你所期望的不同。UB 是不可预测的，并且在某些情况下看起来工作得非常好[因为您刚刚覆盖的内容，或者“滥用”的内容实际上并没有以某种足以导致崩溃的关键方式使用 - 但发票发送到客户现在拥有非常巨大的美元价值...... ;)

# ios - 用于将配件连接到 iOS 设备的蓝牙标准配置文件

> ID：14694682
> 
> 赞同：3
> 
> 时间：2013-02-04T20:07:10.063
> 
> 标签：ios, bluetooth

我正在开发一个 iOS 配件，并试图找出在 MFi 程序之外建立连接的选项。

是否可以使用 PAN 等标准配置文件通过蓝牙从 iOS 设备连接到配件，而不必通过 MFi 认证？

我读到点对点只能在 iOS 设备之间使用，阅读这篇文章，我不确定是否可能。 [iPhone 如何通过无线或蓝牙访问其他非 iPhone 设备？](https://stackoverflow.com/questions/1065459/how-can-an-iphone-access-another-non-iphone-device-over-wireless-or-bluetooth)

但我也读到 MFi 认证也适用于通过蓝牙连接到 iOS 设备但不使用标准配置文件的配件，这意味着如果你想使用标准配置文件，你不需要认证，因此会造成混淆。

另外，是否可以使用 Bonjour 和 NSStream 来实现这一点？我需要将 Bonjour 移植到我的配件平台吗？

你知道任何例子吗（即使他们使用 BTLE）？

请指教，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T20:10:14.473

如果您使用蓝牙 LE 或任何标准蓝牙配置文件，则不需要 MFI。

iOS 支持个人区域网络配置文件 (PAN) 作为标准配置文件之一（来源： http: [//support.apple.com/kb/ht3647](http://support.apple.com/kb/ht3647)）。所以你可以在没有 MFI 的情况下使用 PAN。

至于其他没有MFI的通信方式，我只知道一种：音频端口。您实际上可以通过标准音频电缆连接您的设备并使用标准调制解调器技术进行通信。这就是 Square 为规避 MFI 要求所做的。

# jquery - 使用 jQuery 切换复选框

> ID：14694690
> 
> 赞同：0
> 
> 时间：2013-02-04T20:07:36.540
> 
> 标签：jquery, checkbox, toggle

我们在复选框上使用 onclick 调用 jQuery 函数。我们希望该复选框切换其下方的所有复选框。这是切换复选框的 HTML：

```
 <input type="checkbox" id="toggle" name="toggle" class="daxle_cb" value="" onclick="daxleToggleCB('adminForm');" /> 
```

这是功能：

```
 function daxleToggleCB( formName )
    {
        jQuery('#' + formName).find('input[type=checkbox]').prop('checked', this.checked);
    }; 
```

但是，这是行不通的。什么工作是这样的：

```
 function daxleToggleCB( formName) {
        jQuery( ':checkbox[name=toggle]' ).click
        (
            function ()
            {
                jQuery( '#'+formName ).find( 'input[type=checkbox]' ).prop( 'checked', this.checked );
            }
        ); 
    }; 
```

虽然，此功能仅适用于复选框的第三次单击。所以问题是让复选框在第一次点击时切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:15:17.700

首先，在至少单击一次之前，您不会绑定 jQuery.click() 事件。

那么看起来你有两个事件触发。

你有内联 onclick 事件，以及 jQuery.click 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:19:27.560

```
<input type="checkbox" id="toggle" name="toggle" class="daxle_cb" value="" /> 
```

好像是身份证？

```
$('#toggle').on('change', function() {
    $( this.form ).find('input[type="checkbox"]').prop('checked', this.checked);
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:17:05.713

您的函数正在使用“onclick”属性调用的函数内部定义点击处理程序。相反，这应该在 Doc-On-Ready 函数内部，以在页面加载时定义点击处理程序，而不是使用“onclick”属性。

```
$(function(){
$( ':checkbox[name=toggle]' ).click
    (
        function ()
        {
           //Your Code Here
        }
    );  
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:25:22.257

你只需要一个点击事件到你的复选框。此外，您将单击事件添加到文档上的所有复选框，而不仅仅是在`form`. 所以，重写你的函数：

```
function daxleToggleCB( formName) {

    $('#'+formName+' input:checkbox').click(function(){
        var $inputs = $('#'+formName+' input:checkbox'); 
        if($(this).is(':checked')){                // <-- is current input checked?
           $inputs.prop('checked',this.checked);   // <-- check all
        }
    });
} 
```

然后把它放在你的文档上以调用该函数：

```
$(document).ready(daxleToggleCB('myForm')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-23T06:37:47.563

```
$('input[type=checkbox]').click(function(event){
  $(event.currentTarget).val($(event.currentTarget)[0].checked);
}); 
```

您可以使用事件对象来处理所有复选框上的事件。这是常见且简短的方法

# sql-server - 具有多列聚合的 SQL Server 数据透视表

> ID：14694691
> 
> 赞同：25
> 
> 时间：2013-02-04T20:07:40.967
> 
> 标签：sql-server, sql-server-2005, pivot, unpivot

我有一张桌子：

```
 create table mytransactions(country varchar(30), totalcount int, numericmonth int, chardate char(20), totalamount money) 
```

该表有以下记录：

```
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Australia', 36, 7, 'Jul-12', 699.96)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Australia', 44, 8, 'Aug-12', 1368.71)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Australia', 52, 9, 'Sep-12', 1161.33)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Australia', 50, 10, 'Oct-12', 1099.84)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Australia', 38, 11, 'Nov-12', 1078.94)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Australia', 63, 12, 'Dec-12', 1668.23)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Austria', 11, 7, 'Jul-12', 257.82)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Austria', 5, 8, 'Aug-12', 126.55)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Austria', 7, 9, 'Sep-12', 92.11)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Austria', 12, 10, 'Oct-12', 103.56)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Austria', 21, 11, 'Nov-12', 377.68)
Go
insert into mytransactions(country, totalcount, numericmonth, chardate, totalamount) values('Austria', 3, 12, 'Dec-12', 14.35)
Go 
```

这是 select * 的样子：

```
Country         TotalCount numericmonth  chardate totalamount
---------       ---------- -----------   -------- -----------
Australia       36         7             Jul-12   699.96
Australia       44         8             Aug-12   1368.71
Australia       52         9             Sep-12   1161.33
Australia       50         10            Oct-12   1099.84
Australia       38         11            Nov-12   1078.94
Australia       63         12            Dec-12   1668.23
Austria         11         7             Jul-12   257.82
Austria          5         8             Aug-12   126.55
Austria          7         9             Sep-12   92.11
Austria         12         10            Oct-12   103.56
Austria         21         11            Nov-12   377.68
Austria          3         12            Dec-12   14.35 
```

我想旋转这个记录集，使它看起来像这样：

```
 Australia          Australia        Austria              Austria
                   # of Transactions  Total $ amount   # of Transactions    Total $ amount
                   -----------------  --------------   -----------------    --------------
Jul-12             36                 699.96           11                   257.82
Aug-12             44                 1368.71          5                    126.55
Sep-12             52                 1161.33          7                    92.11
Oct-12             50                 1099.84          12                   103.56
Nov-12             38                 1078.94          21                   377.68
Dec-12             63                 1668.23           3                   14.35 
```

这是我到目前为止提出的枢轴代码：

```
select * from  mytransactions
pivot (sum (totalcount) for country in ([Australia], [Austria])) as pvt 
```

这就是我得到的：

```
numericmonth     chardate     totalamount     Australia   Austria
-----------      --------     ----------      ---------   -------
7                Jul-12       257.82          NULL        11
7                Jul-12       699.96          36          NULL
8                Aug-12       126.55          NULL        5
8                Aug-12       1368.71         44          NULL
9                Sep-12       92.11           NULL        7
9                Sep-12       1161.33         52          NULL
10               Oct-12       103.56          NULL        12
10               Oct-12       1099.84         50          NULL
11               Nov-12       377.68          NULL        21
11               Nov-12       1078.94         38          NULL
12               Dec-12       14.35           NULL        3
12               Dec-12       1668.23         63          NULL 
```

我可以手动聚合表变量循环中的记录，但似乎 pivot 可能能够做到这一点。

是否可以使用 pivot 获得我想要的记录集，或者是否有其他我不知道的工具？

谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-04T20:45:28.957

`UNPIVOT`通过同时应用和`PIVOT`函数来获得最终结果，我会稍微有所不同。unpivot从和列*中*获取值，并将它们放入具有多行的一列中。然后，您可以以这些结果为中心。：`totalcount``totalamount`

```
select chardate,
  Australia_totalcount as [Australia # of Transactions], 
  Australia_totalamount as [Australia Total $ Amount],
  Austria_totalcount as [Austria # of Transactions], 
  Austria_totalamount as [Austria Total $ Amount]
from
(
  select 
    numericmonth, 
    chardate,
    country +'_'+col col, 
    value
  from
  (
    select numericmonth, 
      country, 
      chardate,
      cast(totalcount as numeric(10, 2)) totalcount,
      cast(totalamount as numeric(10, 2)) totalamount
    from mytransactions
  ) src
  unpivot
  (
    value
    for col in (totalcount, totalamount)
  ) unpiv
) s
pivot
(
  sum(value)
  for col in (Australia_totalcount, Australia_totalamount,
              Austria_totalcount, Austria_totalamount)
) piv
order by numericmonth 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/4bd75/15)。

如果您有未知数量的`country`名称，则可以使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsName AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(country +'_'+c.col) 
                      from mytransactions
                      cross apply 
                      (
                        select 'TotalCount' col
                        union all
                        select 'TotalAmount'
                      ) c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsName 
    = STUFF((SELECT distinct ', ' + QUOTENAME(country +'_'+c.col) 
               +' as ['
               + country + case when c.col = 'TotalCount' then ' # of Transactions]' else 'Total $ Amount]' end
             from mytransactions
             cross apply 
             (
                select 'TotalCount' col
                union all
                select 'TotalAmount'
             ) c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'SELECT chardate, ' + @colsName + ' 
     from 
     (
      select 
        numericmonth, 
        chardate,
        country +''_''+col col, 
        value
      from
      (
        select numericmonth, 
          country, 
          chardate,
          cast(totalcount as numeric(10, 2)) totalcount,
          cast(totalamount as numeric(10, 2)) totalamount
        from mytransactions
      ) src
      unpivot
      (
        value
        for col in (totalcount, totalamount)
      ) unpiv
     ) s
     pivot 
     (
       sum(value)
       for col in (' + @cols + ')
     ) p 
     order by numericmonth'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4bd75/23)

两者都给出结果：

```
|             CHARDATE | AUSTRALIA # OF TRANSACTIONS | AUSTRALIA TOTAL $ AMOUNT | AUSTRIA # OF TRANSACTIONS | AUSTRIA TOTAL $ AMOUNT |
--------------------------------------------------------------------------------------------------------------------------------------
| Jul-12               |                          36 |                   699.96 |                        11 |                 257.82 |
| Aug-12               |                          44 |                  1368.71 |                         5 |                 126.55 |
| Sep-12               |                          52 |                  1161.33 |                         7 |                  92.11 |
| Oct-12               |                          50 |                  1099.84 |                        12 |                 103.56 |
| Nov-12               |                          38 |                  1078.94 |                        21 |                 377.68 |
| Dec-12               |                          63 |                  1668.23 |                         3 |                  14.35 | 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T20:38:09.630

我使用您自己的枢轴作为嵌套查询并得出以下结果：

```
SELECT
  [sub].[chardate],
  SUM(ISNULL([Australia], 0)) AS [Transactions Australia],
  SUM(CASE WHEN [Australia] IS NOT NULL THEN [TotalAmount] ELSE 0 END) AS [Amount Australia],
  SUM(ISNULL([Austria], 0)) AS [Transactions Austria],
  SUM(CASE WHEN [Austria] IS NOT NULL THEN [TotalAmount] ELSE 0 END) AS [Amount Austria]
FROM
(
  select * 
  from  mytransactions
  pivot (sum (totalcount) for country in ([Australia], [Austria])) as pvt
) AS [sub]
GROUP BY
  [sub].[chardate],
  [sub].[numericmonth]
ORDER BY 
  [sub].[numericmonth] ASC 
```

[这是小提琴](http://www.sqlfiddle.com/#!3/43e28/3)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-11T16:49:45.557

最简单、最直接的方法是简单地将主查询与公共表表达式中的枢轴一起包装，然后进行分组/聚合。

```
WITH PivotCTE AS
(
    select * from  mytransactions
    pivot (sum (totalcount) for country in ([Australia], [Austria])) as pvt
)
SELECT
    numericmonth,
    chardate,
    SUM(totalamount) AS totalamount,
    SUM(ISNULL(Australia, 0)) AS Australia,
    SUM(ISNULL(Austria, 0)) Austria
FROM PivotCTE
GROUP BY numericmonth, chardate 
```

这`ISNULL`是阻止一个`NULL`值使总和无效（因为`NULL`+ 任何值 = `NULL`）

# java - 需要字符串匹配器正则表达式

> ID：14694692
> 
> 赞同：0
> 
> 时间：2013-02-04T20:07:43.653
> 
> 标签：java, regex, string, matcher

我有带有 matcher 的 java 代码，可以使用 matcher.find 方法查找字符串中的出现次数。

以下是我的代码

```
String text = "INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(EFG) INCLUDES(IJK)";

String patternString = "INCLUDES(.)";

Pattern pattern = Pattern.compile(patternString);
Matcher matcher = pattern.matcher(text);

int count = 0;
while(matcher.find()) {
    count++;
    System.out.println("found: " + count + " : "
            + matcher.start() + " - " + matcher.end());
    System.out.println(" - " +text.substring(matcher.start(), matcher.end()));
} 
```

返回输出为

```
found: 1 : 0 - 9
 - INCLUDES(
found: 2 : 42 - 51
 - INCLUDES(
found: 3 : 56 - 65
 - INCLUDES( 
```

而不是我希望正则表达式查找并返回出现次数为 INCLUDES(*)

任何解决方案都适用。预期输出应该是循环打印值

```
INCLUDES(ABC)
INCLUDES(EFG)
INCLUDES(IJK) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:16:45.833

您的正则表达式不正确。您只是在括号内捕获一个字符，因此您的正则表达式将失败。

尝试使用这个： -

```
"\\w+\\(.*?\\)" 
```

然后得到`group(0)`，或者只是`group()`： -

```
String text = "INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(ABC) INCLUDES(ABC)";
Matcher matcher = Pattern.compile("\\w+\\(.*?\\)").matcher(text);

while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

# backbone.js - 骨干模型：模型返回空

> ID：14694694
> 
> 赞同：2
> 
> 时间：2013-02-04T20:07:50.303
> 
> 标签：backbone.js, requirejs, amd

我觉得我在这里遗漏了一些非常明显的东西。这是我的模型：

```
define([
    'underscore',
    'backbone'
], function(_, Backbone) {
    var spamTermsModel = Backbone.Model.extend({});

    return spamTermsModel;
}); 
```

这是使用该模型的集合：

```
define([
        'jquery',
        'underscore',
        'backbone',
        'models/spamTermsModel'
    ],
    function($, _, Backbone, spamTermsModel) {
        var spamTermsCollection = Backbone.Collection.extend({
            model: spamTermsModel,
            url: 'spam-terms',
            initialize: function(models, options) {
                //console.log(models);
                this.fetch({
                    success: function(data, options) {
                        //console.log(data);  // logs data correctly
                    }
                });
            }
        });

        return spamTermsCollection;
    }
 ); 
```

这是我称之为集合的视图：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/spamTermsModel',
    'collections/spamTermsCollection'
], function($, _, Backbone, spamTermsModel, spamTermsCollection) {
    var searchTermsView = Backbone.View.extend({
        initialize: function() {
            var stm = new spamTermsModel();
            console.log(stm);  // returns function()
            this.collection = new spamTermsCollection();
            console.log(this.collection.toJSON());  // returns empty collection
        },
        retrieveTemplate: function(model) {
            return _.template($('#spamTermsTemplate').html(), model);
        },
        createList: function() {
            var list = '';
            _.each(this.collection.toJSON(), function (obj) {
                list += obj.term + ', ';
                //console.log(obj);
            });
            //console.log(this.collection.toJSON());
            return list;
        },
        render: function() {
            list = this.createList();
            this.$el.html(this.retrieveTemplate(list));
            return this;
        }
    });

    return searchTermsView;

   });
}); 
```

最后是我的路线：

```
router.on('route:updateSpamTerms', function() {
    require(['views/spamTermsView'], function(st) {
          s = new st();
          $('#web-leads').html(s.render().el);
    });

}); 
```

我认为问题出在我的模型中，因为它`console.log()`是函数（）。我觉得它应该记录一个新模型。我尝试返回一个新模型，但我收到一个错误，即模型不是构造函数。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:16:39.483

`this.collection = new spamTermsCollection(); console.log(this.collection.toJSON()); // returns empty collection`

这是因为您的 fetch 是异步的，并且您在成功获取之前尝试访问它。

您可以绑定到集合的`reset`事件并呈现您的集合视图。

`this.collection.on('reset', this.render, this);`

如果获取始终是异步的，这应该可以工作，但如果由于某种原因它不是将来，您可能会遇到问题。您可以考虑将 fetch 移出`initialize`以确保：

```
this.collection = new spamTermsCollection();
this.collection.on('reset', this.render, this);
this.collection.fetch(); 
```

# maven - JENKINS 如何将工件部署到 maven repo

> ID：14694696
> 
> 赞同：12
> 
> 时间：2013-02-04T20:07:56.163
> 
> 标签：maven, deployment, jenkins, continuous-integration

我使用 jenkins 1.500，并且我正在寻找可以将工件部署到 maven 存储库的插件，在 jenkins 的 previuos 版本中，可以使用 maven-plugin 进行后期构建操作，但现在该选项消失了......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-06T15:23:45.977

Take a look at [This answer](https://stackoverflow.com/a/11952832/235179).

You can add a "Post-build Actions" to "Deploy artifacts to Maven Repository" (the [Maven Project Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Maven+Project+Plugin) will need to be installed). Then click "Advanced" and set your Repository URL to something appropriate (`http://yourserver:8082/nexus/content/repositories/releases/`) and set Repository ID to the server in your `settings.xml` that contains the authentication necessary, such as `my-releases` or whatever.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:10:32.583

运行`deploy`项目的阶段不是您想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T18:57:57.900

我能够使用“Jenkins 升级构建插件”来执行此活动。当我想在回归测试成功后部署工件时很有用。当回归测试完成时，构建会被提升，然后我们可以添加一个操作来将工件部署到 Maven 存储库。

注意：要使用此功能，您不应停用自动工件归档。

# php - PHP preg_replace 匹配特殊字符但不匹配 utf8 字母

> ID：14694698
> 
> 赞同：1
> 
> 时间：2013-02-04T20:07:58.003
> 
> 标签：php, regex, unicode, utf-8, ascii

我有一些标题，例如：

```
should? be fenêtre!

ﻟﻔﺮﻧﺴﻴﺔ-تعاني!!! 
```

我可以使用什么正则表达式来删除特殊字符，例如：?,!,^

我需要得到这样的标题：

```
should-be-fenêtre

ﻟﻔﺮﻧﺴﻴﺔ-تعاني 
```

我试过了

```
$name = preg_replace("~[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+~", "-", $name); 
```

但我明白了

```
Warning: preg_replace(): No ending delimiter '~' found in 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:53:05.307

您可以使用几个正则表达式来去除任何不是字母或数字的内容，并将空格和破折号压缩为一个破折号：

```
// Replaces every non-letter, non-digit with a dash
$str = preg_replace('/(?=\P{Nd})\P{L}/u', '-', $str);

// Replaces runs of whitespace and dashes with a single dash
$str = preg_replace('/[\s-]{2,}/u', '-', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:38:30.553

尝试这个：

```
$text = preg_replace("/(?![.=$'€%-])\p{P}/u", "", $text); 
```

只需更改断言以匹配您想要保留的任何 Unicode 字符。

# java - 带有自签名证书的 Java（Netty）SSL 服务器/客户端引发致命错误：80：pr0blem 展开网络记录

> ID：14694701
> 
> 赞同：3
> 
> 时间：2013-02-04T20:08:04.687
> 
> 标签：java, ssl, netty, self-signed

我似乎无法掌握 SSL 的工作方式……或者至少我无法解释 java 的 ssl 调试输出，所以我（计划）这样做：客户端和服务器生成自己的密钥对和自签名证书。（我只需要在重新连接时确保身份。）为了测试，我在服务器和客户端都使用相同的密钥和信任（只有一个密钥和证书）。握手过程中出了点问题，但我不明白错误消息。阅读了大约 20 个论坛和有关此的帖子，但到目前为止还没有弄清楚。那么有人可以告诉我底部的这条消息到底是什么意思吗？如果您需要更多详细信息，请告诉我。谢谢！

**服务器 SSL 调试**

```
trigger seeding of SecureRandom
done seeding SecureRandom
Using SSLEngineImpl.
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA
EndpointIdentificationAlgorithm: null
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
[Raw read]: length = 5
0000: 16 03 01 00 95                                     .....
[Raw read]: length = 149
0000: 01 00 00 91 03 01 51 0F   F6 C7 F3 99 F4 4B 77 A8  ......Q......Kw.
0010: 43 BB A0 89 E0 D9 20 4D   9F 5A C2 E2 0E 80 87 9F  C..... M.Z......
0020: 59 9A 13 71 F7 4F 00 00   2A 00 33 C0 04 00 16 00  Y..q.O..*.3.....
0030: 05 C0 03 C0 11 C0 02 C0   07 C0 13 C0 08 C0 0C 00  ................
0040: FF C0 0D C0 0E C0 09 00   2F C0 12 00 04 00 32 00  ......../.....2.
0050: 13 00 0A 01 00 00 3E 00   0A 00 34 00 32 00 17 00  ......>...4.2...
0060: 01 00 03 00 13 00 15 00   06 00 07 00 09 00 0A 00  ................
0070: 18 00 0B 00 0C 00 19 00   0D 00 0E 00 0F 00 10 00  ................
0080: 11 00 02 00 12 00 04 00   05 00 14 00 08 00 16 00  ................
0090: 0B 00 02 01 00                                     .....
New I/O worker #1, READ: TLSv1 Handshake, length = 149
*** ClientHello, TLSv1
RandomCookie:  GMT: 1359934919 bytes = { 243, 153, 244, 75, 119, 168, 67, 187, 160, 137, 224, 217, 32, 77, 159, 90, 194, 226, 14, 128, 135, 159, 89, 154, 19, 113, 247, 79 }
Session ID:  {}
Cipher Suites: [TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_RC4_128_MD5, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA]
Compression Methods:  { 0 }
Extension elliptic_curves, curve names: {secp256r1, sect163k1, sect163r2, secp192r1, secp224r1, sect233k1, sect233r1, sect283k1, sect283r1, secp384r1, sect409k1, sect409r1, secp521r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, sect163r1, secp192k1, sect193r1, sect193r2, secp224k1, sect239k1, secp256k1}
Extension ec_point_formats, formats: [uncompressed]
***
[read] MD5 and SHA1 hashes:  len = 149
0000: 01 00 00 91 03 01 51 0F   F6 C7 F3 99 F4 4B 77 A8  ......Q......Kw.
0010: 43 BB A0 89 E0 D9 20 4D   9F 5A C2 E2 0E 80 87 9F  C..... M.Z......
0020: 59 9A 13 71 F7 4F 00 00   2A 00 33 C0 04 00 16 00  Y..q.O..*.3.....
0030: 05 C0 03 C0 11 C0 02 C0   07 C0 13 C0 08 C0 0C 00  ................
0040: FF C0 0D C0 0E C0 09 00   2F C0 12 00 04 00 32 00  ......../.....2.
0050: 13 00 0A 01 00 00 3E 00   0A 00 34 00 32 00 17 00  ......>...4.2...
0060: 01 00 03 00 13 00 15 00   06 00 07 00 09 00 0A 00  ................
0070: 18 00 0B 00 0C 00 19 00   0D 00 0E 00 0F 00 10 00  ................
0080: 11 00 02 00 12 00 04 00   05 00 14 00 08 00 16 00  ................
0090: 0B 00 02 01 00                                     .....
%% Initialized:  [Session-1, SSL_NULL_WITH_NULL_NULL]
keymanager chooseEngineServerAlias
keymanager getPrivateKey: 3eb9936d-2240-4687-bf4e-6518460e3e40
keymanager getCertificateChain: 3eb9936d-2240-4687-bf4e-6518460e3e40
%% Negotiating:  [Session-1, TLS_DHE_RSA_WITH_AES_128_CBC_SHA]
*** ServerHello, TLSv1
RandomCookie:  GMT: 1359934920 bytes = { 242, 252, 196, 36, 227, 154, 97, 148, 214, 170, 109, 188, 122, 223, 161, 62, 131, 201, 214, 11, 223, 36, 74, 224, 72, 78, 94, 50 }
Session ID:  {81, 15, 246, 200, 127, 240, 115, 234, 52, 13, 73, 40, 137, 163, 243, 8, 51, 244, 147, 87, 128, 39, 210, 175, 163, 244, 86, 238, 138, 87, 29, 43}
Cipher Suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA
Compression Method: 0
Extension renegotiation_info, renegotiated_connection: <empty>
***
Cipher suite:  TLS_DHE_RSA_WITH_AES_128_CBC_SHA
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=3eb9936d-2240-4687-bf4e-6518460e3e40
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 1024 bits
  modulus: 130292698947319747550411805428932496764788133931614615268432511412918979081774531703795353050388491281785406619160787220723201364083891450242081089010992812611565317265297099663990262828027908909326882453616292013722474448961222856631109497585792129874215397389474004374746492345728806709616072944360825031857
  public exponent: 65537
  Validity: [From: Sun Feb 03 03:52:37 CET 2013,
               To: Wed Feb 01 03:52:37 CET 2023]
  Issuer: CN=3eb9936d-2240-4687-bf4e-6518460e3e40
  SerialNumber: [    1bd22c7d 61d1a1eb]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: 94 5E 4F 74 28 A7 6C 94   25 60 4B 38 9F 7F 2D DE  .^Ot(.l.%`K8..-.
0010: 6D 3E E5 1F 55 E4 F2 14   3F 80 FF D4 24 55 B9 60  m>..U...?...$U.`
0020: 4C C3 B6 BB 68 CD 12 AD   FA BA 6D B0 76 5F 91 96  L...h.....m.v_..
0030: 08 97 9D 53 E8 28 5C DE   69 DD 30 92 F1 FE 59 21  ...S.(\.i.0...Y!
0040: 81 05 E6 E6 8D 89 6E 77   A4 6A EC 13 E5 0B D9 17  ......nw.j......
0050: 03 51 85 FB 14 D8 FA 6A   A3 52 71 57 F2 A5 CC 80  .Q.....j.RqW....
0060: 31 6D EA 64 81 4F C9 53   AC 01 FA EF AF 9D 0A F0  1m.d.O.S........
0070: 9F 67 1E 76 D7 41 C9 62   2B 5B FB 42 E1 AF 55 F8  .g.v.A.b+[.B..U.

]
***
*** Diffie-Hellman ServerKeyExchange
DH Modulus:  { 233, 230, 66, 89, 157, 53, 95, 55, 201, 127, 253, 53, 103, 18, 11, 142, 37, 201, 205, 67, 233, 39, 179, 169, 103, 15, 190, 197, 216, 144, 20, 25, 34, 210, 195, 179, 173, 36, 128, 9, 55, 153, 134, 157, 30, 132, 106, 171, 73, 250, 176, 173, 38, 210, 206, 106, 34, 33, 157, 71, 11, 206, 125, 119, 125, 74, 33, 251, 233, 194, 112, 181, 127, 96, 112, 2, 243, 206, 248, 57, 54, 148, 207, 69, 238, 54, 136, 193, 26, 140, 86, 171, 18, 122, 61, 175 }
DH Base:  { 48, 71, 10, 213, 160, 5, 251, 20, 206, 45, 157, 205, 135, 227, 139, 199, 209, 177, 197, 250, 203, 174, 203, 233, 95, 25, 10, 167, 163, 29, 35, 196, 219, 188, 190, 6, 23, 69, 68, 64, 26, 91, 44, 2, 9, 101, 216, 194, 189, 33, 113, 211, 102, 132, 69, 119, 31, 116, 186, 8, 77, 32, 41, 216, 60, 28, 21, 133, 71, 243, 169, 241, 162, 113, 91, 226, 61, 81, 174, 77, 62, 90, 31, 106, 112, 100, 243, 22, 147, 58, 52, 109, 63, 82, 146, 82 }
Server DH Public Key:  { 73, 233, 14, 202, 89, 13, 188, 236, 57, 124, 97, 186, 86, 30, 193, 15, 117, 169, 125, 103, 204, 9, 145, 52, 184, 3, 58, 205, 66, 147, 131, 141, 40, 92, 208, 244, 197, 165, 243, 13, 18, 43, 68, 74, 135, 150, 21, 31, 181, 224, 98, 239, 200, 95, 130, 97, 202, 11, 152, 181, 123, 206, 248, 248, 146, 117, 167, 55, 30, 106, 64, 247, 45, 147, 134, 46, 36, 96, 50, 200, 140, 102, 166, 231, 229, 207, 210, 48, 211, 107, 181, 111, 6, 113, 57, 195 }
Signed with a DSA or RSA public key
New I/O worker #1, fatal error: 80: problem unwrapping net record
java.lang.RuntimeException: Delegated task threw Exception/Error
%% Invalidated:  [Session-1, TLS_DHE_RSA_WITH_AES_128_CBC_SHA]
New I/O worker #1, SEND TLSv1 ALERT:  fatal, description = internal_error
New I/O worker #1, WRITE: TLSv1 Alert, length = 2
[Raw write]: length = 7
0000: 15 03 01 00 02 02 50                               ......P
New I/O worker #1, called closeOutbound()
New I/O worker #1, closeOutboundInternal() 
```

**客户端 SSL 调试**

```
testClient
trigger seeding of SecureRandom
done seeding SecureRandom
Using SSLEngineImpl.
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA
client.start(): true
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256
%% No cached client session
*** ClientHello, TLSv1
RandomCookie:  GMT: 1360012393 bytes = { 134, 128, 126, 2, 241, 35, 109, 215, 218, 46, 141, 218, 44, 43, 228, 29, 9, 155, 72, 100, 59, 29, 177, 236, 197, 205, 21, 138 }
Session ID:  {}
Cipher Suites: [TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_RC4_128_MD5, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA]
Compression Methods:  { 0 }
Extension elliptic_curves, curve names: {secp256r1, sect163k1, sect163r2, secp192r1, secp224r1, sect233k1, sect233r1, sect283k1, sect283r1, secp384r1, sect409k1, sect409r1, secp521r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, sect163r1, secp192k1, sect193r1, sect193r2, secp224k1, sect239k1, secp256k1}
Extension ec_point_formats, formats: [uncompressed]
***
[write] MD5 and SHA1 hashes:  len = 149
0000: 01 00 00 91 03 01 51 10   24 69 86 80 7E 02 F1 23  ......Q.$i.....#
0010: 6D D7 DA 2E 8D DA 2C 2B   E4 1D 09 9B 48 64 3B 1D  m.....,+....Hd;.
0020: B1 EC C5 CD 15 8A 00 00   2A 00 33 C0 04 00 16 00  ........*.3.....
0030: 05 C0 03 C0 11 C0 02 C0   07 C0 13 C0 08 C0 0C 00  ................
0040: FF C0 0D C0 0E C0 09 00   2F C0 12 00 04 00 32 00  ......../.....2.
0050: 13 00 0A 01 00 00 3E 00   0A 00 34 00 32 00 17 00  ......>...4.2...
0060: 01 00 03 00 13 00 15 00   06 00 07 00 09 00 0A 00  ................
0070: 18 00 0B 00 0C 00 19 00   0D 00 0E 00 0F 00 10 00  ................
0080: 11 00 02 00 12 00 04 00   05 00 14 00 08 00 16 00  ................
0090: 0B 00 02 01 00                                     .....
pool-5-thread-2, WRITE: TLSv1 Handshake, length = 149
[Raw write]: length = 154
0000: 16 03 01 00 95 01 00 00   91 03 01 51 10 24 69 86  ...........Q.$i.
0010: 80 7E 02 F1 23 6D D7 DA   2E 8D DA 2C 2B E4 1D 09  ....#m.....,+...
0020: 9B 48 64 3B 1D B1 EC C5   CD 15 8A 00 00 2A 00 33  .Hd;.........*.3
0030: C0 04 00 16 00 05 C0 03   C0 11 C0 02 C0 07 C0 13  ................
0040: C0 08 C0 0C 00 FF C0 0D   C0 0E C0 09 00 2F C0 12  ............./..
0050: 00 04 00 32 00 13 00 0A   01 00 00 3E 00 0A 00 34  ...2.......>...4
0060: 00 32 00 17 00 01 00 03   00 13 00 15 00 06 00 07  .2..............
0070: 00 09 00 0A 00 18 00 0B   00 0C 00 19 00 0D 00 0E  ................
0080: 00 0F 00 10 00 11 00 02   00 12 00 04 00 05 00 14  ................
0090: 00 08 00 16 00 0B 00 02   01 00                    ..........
[Raw read]: length = 5
0000: 15 03 01 00 02                                     .....
[Raw read]: length = 2
0000: 02 50                                              .P
New I/O worker #1, READ: TLSv1 Alert, length = 2
New I/O worker #1, RECV TLSv1 ALERT:  fatal, internal_error
New I/O worker #1, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLException: Received fatal alert: internal_error
New I/O worker #1, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLException: Received fatal alert: internal_error
New I/O worker #1, called closeOutbound()
New I/O worker #1, closeOutboundInternal()
New I/O worker #1, SEND TLSv1 ALERT:  warning, description = close_notify
New I/O worker #1, WRITE: TLSv1 Alert, length = 2
New I/O worker #1, called closeInbound()
New I/O worker #1, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLException: Inbound closed before receiving peer's close_notify: possible truncation attack?
[Raw write]: length = 7
0000: 15 03 01 00 02 01 00                               .......
main, called closeOutbound()
main, closeOutboundInternal()
New I/O worker #1, called closeOutbound()
New I/O worker #1, closeOutboundInternal() 
```

**Security.java**（对所有安全相关的东西进行分组）

```
public class Security
{
    private static final String protocol    = "TLS";

    @SuppressWarnings("restriction")
    private static X509Certificate generateCertificate(String dn, KeyPair pair, String algorithm) throws GeneralSecurityException, IOException
    {
        PrivateKey privkey = pair.getPrivate();
        X509CertInfo info = new X509CertInfo();
        Date from = new Date();
        Date to = new Date(from.getTime() + 10l * 365 * 24 * 60 * 60 * 1000);
        CertificateValidity interval = new CertificateValidity(from, to);
        BigInteger sn = new BigInteger(64, new SecureRandom());
        X500Name owner = new X500Name(dn);

        info.set(X509CertInfo.VALIDITY, interval);
        info.set(X509CertInfo.SERIAL_NUMBER, new CertificateSerialNumber(sn));
        info.set(X509CertInfo.SUBJECT, new CertificateSubjectName(owner));
        info.set(X509CertInfo.ISSUER, new CertificateIssuerName(owner));
        info.set(X509CertInfo.KEY, new CertificateX509Key(pair.getPublic()));
        info.set(X509CertInfo.VERSION, new CertificateVersion(CertificateVersion.V3));
        AlgorithmId algo = new AlgorithmId(AlgorithmId.md5WithRSAEncryption_oid);
        info.set(X509CertInfo.ALGORITHM_ID, new CertificateAlgorithmId(algo));

        // Sign the cert to identify the algorithm that's used.
        X509CertImpl cert = new X509CertImpl(info);
        cert.sign(privkey, algorithm);

        // Update the algorith, and resign.
        algo = (AlgorithmId) cert.get(X509CertImpl.SIG_ALG);
        info.set(CertificateAlgorithmId.NAME + "." + CertificateAlgorithmId.ALGORITHM, algo);
        cert = new X509CertImpl(info);
        cert.sign(privkey, algorithm);
        return cert;
    }

    protected static char[] getPassword()
    {
        return "test".toCharArray();
    }

    private static void pushKeyStoreToConfig(KeyStore ks, String configKey) throws KeyStoreException, NoSuchAlgorithmException, CertificateException,
        IOException
    {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ks.store(baos, Security.getPassword());
        Configuration.set(configKey, baos.toByteArray());
    }

    private KeyManager[]    keyManagers;
    private KeyStore        keyStore;
    private KeyStore        trustStore;
    private SSLContext      sslContext;

    private TrustManager[]  trustManagers;

    public Security()
    {
        LoggerFactory.getLogger(Security.class).debug("constructing...");
    }

    public synchronized void addCertificate(String guid, Certificate certificate) throws KeyStoreException, NoSuchAlgorithmException, CertificateException,
        IOException
    {
        this.getTrustStore().setCertificateEntry(guid, certificate);
        Security.pushKeyStoreToConfig(this.getTrustStore(), Configuration.TRUST_STORE);
        Configuration.getInstance().save();
    }

    public SslHandler createSslHandler()
    {
        SSLEngine engine = this.getSslContext().createSSLEngine();
        engine.setUseClientMode(true);
        engine.setNeedClientAuth(true);
        return new SslHandler(engine);
    }

    public synchronized KeyManager[] getKeyManagers()
    {
        if (this.keyManagers == null)
        {
            KeyManager keyManager = new X509ExtendedKeyManager()
            {
                @Override
                public String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket)
                {
                    System.out.println("keymanager chooseClientAlias");
                    return Configuration.get(Configuration.GUID, String.class);
                }

                @Override
                public String chooseEngineClientAlias(String[] keyType, Principal[] issuers, SSLEngine engine)
                {
                    System.out.println("keymanager chooseEngineClientAlias");
                    return Configuration.get(Configuration.GUID, String.class);
                }

                @Override
                public String chooseEngineServerAlias(String keyType, Principal[] issuers, SSLEngine engine)
                {
                    System.out.println("keymanager chooseEngineServerAlias");
                    return Configuration.get(Configuration.GUID, String.class);
                }

                @Override
                public String chooseServerAlias(String keyType, Principal[] issuers, Socket socket)
                {
                    System.out.println("keymanager chooseServerAlias");
                    return Configuration.get(Configuration.GUID, String.class);
                }

                @Override
                public X509Certificate[] getCertificateChain(String alias)
                {
                    System.out.println("keymanager getCertificateChain: " + alias);
                    try
                    {
                        Certificate[] certs = Security.this.getKeyStore().getCertificateChain(alias);
                        X509Certificate[] xcerts = new X509Certificate[certs.length];
                        for (int i = 0; i < certs.length; i++)
                        {
                            xcerts[i] = (X509Certificate) certs[i];
                        }
                        return xcerts;
                    }
                    catch (Exception e)
                    {
                        LoggerFactory.getLogger(Security.class).error("Error while getting security chain", e);
                        return null;
                    }
                }

                @Override
                public String[] getClientAliases(String keyType, Principal[] issuers)
                {
                    System.out.println("keymanager getClientAliases");
                    // TODO Auto-generated method stub
                    return null;
                }

                @Override
                public PrivateKey getPrivateKey(String alias)
                {
                    System.out.println("keymanager getPrivateKey: " + alias);
                    try
                    {
                        return (PrivateKey) Security.this.getKeyStore().getKey(alias, Security.getPassword());
                    }
                    catch (Exception e)
                    {
                        LoggerFactory.getLogger(Security.class).error("Error while getting private key", e);
                        return null;
                    }
                }

                @Override
                public String[] getServerAliases(String keyType, Principal[] issuers)
                {
                    System.out.println("keymanager getServerAliases");
                    // TODO Auto-generated method stub
                    return null;
                }
            };
            this.keyManagers = new KeyManager[] { keyManager };
        }
        return this.keyManagers;
    }

    public synchronized KeyStore getKeyStore() throws IOException, GeneralSecurityException
    {
        if (this.keyStore == null)
        {
            this.keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
            try
            {
                ByteArrayInputStream bais = new ByteArrayInputStream(Configuration.get(Configuration.KEY_STORE, byte[].class));
                this.keyStore.load(bais, Security.getPassword());
            }
            catch (Exception e)
            {
                LoggerFactory.getLogger(Security.class).warn("Could not load key store, creating new one", e);
                this.keyStore.load(null);
            }

            String guid = Configuration.get(Configuration.GUID, String.class);
            if (this.keyStore.getKey(guid, Security.getPassword()) == null)
            {
                this.resetKey(this.keyStore);
            }
            // TODO certificate expired? create new one!
        }
        return this.keyStore;
    }

    public synchronized SSLContext getSslContext()
    {
        if (this.sslContext == null)
        {
            SSLContext context = null;
            try
            {
                context = SSLContext.getInstance(Security.protocol);
                context.init(this.getKeyManagers(), this.getTrustManagers(), Controller.getInstance().getRandom());
            }
            catch (Exception e)
            {
                throw new Error("Failed to initialize the server-side SSLContext", e);
            }

            this.sslContext = context;
        }
        return this.sslContext;
    }

    private synchronized TrustManager[] getTrustManagers()
    {
        if (this.trustManagers == null)
        {
            TrustManager trustManager = new X509TrustManager()
            {
                @Override
                public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException
                {
                    System.out.println("trustmanager checkClientTrusted");
                    this.checkTrusted(chain, authType);
                }

                @Override
                public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException
                {
                    System.out.println("trustmanager checkServerTrusted");
                    this.checkTrusted(chain, authType);
                }

                public void checkTrusted(X509Certificate[] chain, String authType) throws CertificateException
                {
                    Certificate cert = null;
                    try
                    {
                        cert = Security.this.getTrustStore().getCertificate(chain[0].getSubjectX500Principal().getName());
                        if (cert == null)
                        {
                            throw new CertificateException("Certificate is not trusted: " + chain[0]);
                        }
                    }
                    catch (Exception e)
                    {
                        throw new CertificateException("Error while validating certificate: " + chain[0], e);
                    }
                }

                @Override
                public X509Certificate[] getAcceptedIssuers()
                {
                    return null;
                }
            };
            this.trustManagers = new TrustManager[] { trustManager };
        }
        return this.trustManagers;
    }

    protected synchronized KeyStore getTrustStore() throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException
    {
        if (this.trustStore == null)
        {
            this.trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
            try
            {
                this.trustStore.load(new ByteArrayInputStream(Configuration.get(Configuration.TRUST_STORE, byte[].class)), Security.getPassword());
            }
            catch (Exception e)
            {
                LoggerFactory.getLogger(Security.class).warn("Could not load trust store, creating new one", e);
                this.trustStore.load(null);
            }
        }
        return this.trustStore;
    }

    public synchronized void resetKey() throws IOException, GeneralSecurityException
    {
        this.resetKey(this.getKeyStore());
    }

    private synchronized void resetKey(KeyStore ks) throws IOException, GeneralSecurityException
    {
        LoggerFactory.getLogger(Security.class).info("Creating a new key pair and certificate");
        KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
        kpg.initialize(1024, Controller.getInstance().getRandom());
        KeyPair kp = kpg.generateKeyPair();

        PrivateKey key = kp.getPrivate();
        String dn = "cn=" + Configuration.get(Configuration.GUID, String.class);
        X509Certificate[] chain = new X509Certificate[] { Security.generateCertificate(dn, kp, "SHA1withRSA") };

        ks.setKeyEntry(Configuration.get(Configuration.GUID, String.class), key, Security.getPassword(), chain);
        Security.pushKeyStoreToConfig(ks, Configuration.KEY_STORE);

        this.addCertificate(Configuration.get(Configuration.GUID, String.class), chain[0]);
    }
} 
```

**附加信息**

在服务器引擎的情况下从外部设置 setUseClientMode()。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:48:48.673

这个非常不具表现力的错误消息是由 Java 的握手器中引发的 NullPointerException 引起的，可以通过在 TrustManager.getAcceptedIssuers() 中返回至少一个空列表（您可能想要更多）来修复。

有关更多详细信息，请参见[Oracle 错误 ID 7148699：如果 TrustManager 从 getAcceptedIssuers 返回 null，Handshaker 将引发 NPE](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=ceec221faba405f38f9d3c0970ad?bug_id=7148699)。

# c++ - Linux C++ 应用程序文件保护

> ID：14694704
> 
> 赞同：-1
> 
> 时间：2013-02-04T20:08:09.267
> 
> 标签：c++, linux, data-protection

我正在开发一个 Linux 应用程序，它需要保存一些敏感数据，以便在机器重启时重新加载它们。

所以我正在研究如何将我的数据保存在某个地方并保护它们。（显然总会有破解的可能）

我的目标不是重新发明轮子，所以如果有一个可行的解决方案，那就是我正在寻找的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:09:15.297

1.  为您的应用程序添加一个专用用户并设置适当的目录属性。所以其他用户看不到目录和文件，只有root。

2.  使用简单的打乱算法只是为了使文件难以被简单的*cat*读取。

3.  切勿将密码和其他敏感信息存储在文件中。

# matlab - 在 Matlab 中用 NaN 取矩阵的平均值

> ID：14694706
> 
> 赞同：4
> 
> 时间：2013-02-04T20:08:11.610
> 
> 标签：matlab, matrix, nan

> **可能重复：**
> [在 matlab 函数中处理 NaN](https://stackoverflow.com/questions/14693536/dealing-with-nans-in-matlab-functions)

是否有一行命令允许您`NaN`在 Matlab 中获取矩阵的元素平均值（忽略 's）？例如，

```
>> A = [1 0 NaN; 0 3 4; 0 NaN 2]

A =

     1     0   NaN
     0     3     4
     0   NaN     2 
```

所以`mean(A)`应该等于`(1+3+2+4+0+0+0)/7 = 1.4286`

另外，我无权访问统计工具箱，因此无法使用`nanmean()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T20:11:25.117

您可以使用[`isnan()`](http://www.mathworks.co.uk/help/matlab/ref/isnan.html)过滤掉不需要的元素：

```
mean(A(~isnan(A))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:26:34.577

```
nanmean 
```

执行就像`mean`，但忽略 nans。

例如：

```
>> A = [1 0 NaN; 0 3 4; 0 NaN 2]
A =
     1     0   NaN
     0     3     4
     0   NaN     2
>> nanmean(A)
ans =
         0.333333333333333                       1.5                         3
>> nanmean(A,2)
ans =
                       0.5
          2.33333333333333
                         1
>> nanmean(A(:))
ans =
          1.42857142857143 
```

# scala - scala构造函数参数是否默认为私有val？

> ID：14694712
> 
> 赞同：135
> 
> 时间：2013-02-04T20:08:37.113
> 
> 标签：scala, scala-primary-constructor

我已经试了：

```
class Foo(bar: Int) 
```

与：

```
class Foo(private val bar: Int) 
```

尽管我找不到任何可以`(bar: Int)`扩展的地方，但它们的行为似乎相同，`(private val bar: Int)`所以我的问题是，这些相同/相似吗？

附带说明一下，我一直在尝试`-Xprint:typer`在这些代码片段上使用它们，它们产生相同的代码，除了第二个中的额外行。我如何阅读那条额外的线？

```
..
class Foo extends scala.AnyRef {
  <paramaccessor> private[this] val bar: Int = _;
  def <init>(bar: Int): this.Foo = {
    Foo.super.<init>();
    ()
  }
}
..

..
class Foo extends scala.AnyRef {
  <paramaccessor> private[this] val bar: Int = _;
  <stable> <accessor> <paramaccessor> private def bar: Int = Foo.this.bar;
  def <init>(bar: Int): this.Foo = {
    Foo.super.<init>();
    ()
  }
}
.. 
```

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2013-02-04T20:17:39.913

`bar: Int`

这几乎不是构造函数参数。如果除了构造函数之外没有在任何地方使用这个变量，它就会保留在那里。不生成任何字段。否则`private val bar`，将创建字段并`bar`为其分配参数值。没有创建吸气剂。

`private val bar: Int`

这样的参数声明将创建`private val bar`带有私有 getter 的字段。无论参数是否在构造函数旁边使用（例如是否使用），此行为都与上述相同`toString()`。

`val bar: Int`

与上面相同，但类似 ​​Scala 的 getter 是公开的

`bar: Int`在案例类

当涉及案例类时，默认情况下每个参数都有`val`修饰符。

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2013-02-04T20:19:26.150

在第一种情况下，`bar`只是一个构造函数参数。由于主构造函数是类本身的内容，因此可以在其中访问它，但只能从这个实例中访问。所以它几乎等同于：

```
class Foo(private[this] val bar:Int) 
```

另一方面，在第二种情况下`bar`是一个*普通*的私有字段，因此这个实例**和**其他实例都可以访问它`Foo`。例如，这编译得很好：

```
class Foo(private val bar: Int) {
  def otherBar(f: Foo) {
    println(f.bar) // access bar of another foo
  }
} 
```

并运行：

```
scala> val a = new Foo(1)
a: Foo = Foo@7a99d0af

scala> a.otherBar(new Foo(3))
3 
```

但这不会：

```
class Foo(bar: Int) {
  def otherBar(f: Foo) {
    println(f.bar) // error! cannot access bar of another foo
  }
} 
```

# ios - 从 UIGraphicsGetImageFromCurrentImageContext 调用 CGImageSourceCreateWithDataProvider 时的 kCGImageStatusUnknownType

> ID：14694718
> 
> 赞同：0
> 
> 时间：2013-02-04T20:08:54.193
> 
> 标签：ios, ios4, core-graphics, cgimage, cgimagesource

我正在尝试从 CGDataProviderRef 创建一个 CGImageSourceRef。CGDataProviderRef 来自使用 UIGraphicsGetImageFromCurrentImageContext 创建的 UIImage。当我这样做并检查图像源的状态时，它返回 kCGImageStatusUnknownType。

我试过用 kCGImageSourceTypeIdentifierHint 给它一个提示，但无济于事。

有谁知道我如何创建这个 CGImageSource？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:45:09.917

你告诉源你给它PNG数据，但你不是。您从[函数中获得](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageGetDataProvider)[的`CGImageGetDataProvider`](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageGetDataProvider)数据提供者提供[原始像素数据](http://developer.apple.com/library/ios/qa/qa1509/)，而不是某种外部格式的数据。

CGImageSource 的目的是将某些外部格式（例如 PNG）的数据解码为 CGImage。它不能处理像素数据；当您有像素数据时，您可以[直接从中创建 CGImage](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageCreate)。当然，鉴于您已经拥有最终图像，我不确定您为什么还要尝试从任何类型的数据*再次*创建它。

如果您想生成一些外部数据以随后（例如，在您释放此图像之后，可能在另一个进程中）由 CGImageSource 加载回，请使用[CGImageDestination](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImageDestination/)。

# c++ - 用 c++ 编写的程序可以在任何地方运行吗？

> ID：14694719
> 
> 赞同：20
> 
> 时间：2013-02-04T20:09:04.910
> 
> 标签：c++

我知道要在 Windows 上运行 c++，您需要专门为 Windows 编译，对于 linux 和 on...

但是，例如，如果我正在为用原生 c++ 编写的 Windows 编译程序，我可以在新安装的 Windows pc 上运行它吗？我的意思是，不用下载visual c++运行时库等，我可以编译它，比方说，在我的电脑上重新安装windows，然后运行它而不安装任何其他东西？

（上面的问题以 Windows 为例，但同样的事情可以在新安装的 linux 发行版上完成？例如 Ubuntu）提前谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-04T20:35:46.360

唯一的答案是“这取决于”。

操作系统可以通过多种方式“运行”程序，可以通过多种方式构建程序，并且可以通过多种方式组装代码。

仅使用“标准库”并**静态链接所有库**的程序不需要任何其他依赖项（从某种意义上说，它需要的所有代码都在二进制文件本身或作为系统本身一部分的操作系统库中）已经在系统上）。

但：

*   静态链接标准库（很可能存在于所有程序中）会膨胀相同代码的许多副本的内存使用量。这就是库经常动态链接的原因，但这也需要“安装”这些库

*   仅使用标准库的程序只能执行所有系统中以某种方式“常见”（或可以普遍表示）的事情，从而失去了使操作系统与另一个操作系统不同的所有特性。

*   有些“平台”——就其外围设备的性质而言——并没有相互呈现：一台咖啡机有 12 个按键和一个 2 行 x 20 列的文本显示器。一台 PC 有一个鼠标、一个键盘和一个显示器，其宽度甚至可以达到 10,000 像素，每个显示器都有数百万种颜色。平板电脑有一个触摸表面，可以同时抓住多个点。你能想象在所有这三个平台上运行相同的程序吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:13:28.090

不。通常不同系统上的库是不同的。如果您的程序涉及任何 GUI，那么您肯定会拥有不会在其他操作系统上运行的操作系统特定代码。

如果您编写一个针对 g++ 编译器而没有 GUI 代码的 C++ 程序，则可能仍有一些特定于操作系统的代码。但是您应该能够以最小的努力移植它。

如果您的程序仅使用 stl 和 stdio，那么它可能是可移植的。例如，MS STL 的 ::c_str() 函数与 linux 函数的工作方式略有不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:37:47.727

对于它的价值，当使用 MinGW 与 libc 和 libc++ 的静态链接时，你的 C++ 应用程序很可能会在任何 Windows 系统'95 及更高版本上运行，除非你在 Windows API 中特别启用了不可用的功能，比如新台币的特点。我为 Windows 7 编译的所有 SDL 应用程序（当然编译为 32 位）在我的 '95 机器上都可以正常工作。

部署 Linux 应用程序时，最好只提供源代码以及配置脚本或 makefile。这将确保用户对您的应用程序具有有效的依赖关系。如果您愿意，您可以将二进制文件部署到特定的包管理器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T20:12:56.403

是的，标准库无处不在。想想看，你得到的大多数程序都是用 C/C++ 编写的。只有当您使用某些指定的库（如 winsock 等）时才会出现依赖关系，因此某些 Windows 应用程序不太可能在 linux 上运行，反之亦然。

# ruby-on-rails - 在 Rails 的不同视图中引用不同的样式表

> ID：14694720
> 
> 赞同：4
> 
> 时间：2013-02-04T20:09:08.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, sprockets

我想为我的 Rails 应用程序的不同部分设置一组不同的样式表。例如，我想为登录页面设置一组样式表，为后端`admin`页面设置一组不同的样式表，为登录页面设置另一组样式表`account`。

我已经将样式表组织到名为 account、home 和 admin 的文件夹中，并且我知道如何在 application.css 中指定只编译一个文件夹。

```
*= require_self
*= require_tree ./account
*/ 
```

我的问题是，我如何指定用户是否正在查看管理页面或主页，admin 或主文件夹中的样式表应该是唯一引用的样式表？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T20:17:19.940

无法创建条件样式表创建，因为在生产中它是在部署时编译的。

您必须创建单独的样式表，例如默认的 application.css：

```
/*
 *= require_self
 *= require some_stylesheet
*/ 
```

然后分开，admin.css

```
/*
 *= require_self
 *= require some_admin_stylesheet
*/ 
```

然后在生产环境配置延伸线：

```
config.assets.precompile += ['application.css', 'admin.css'] 
```

接下来，创建单独的布局/或创建有条件的包含：

```
<%= stylesheet_link_tag    "admin" %> 
```

# php - perl 和 php md5 文件校验和不匹配

> ID：14694721
> 
> 赞同：1
> 
> 时间：2013-02-04T20:09:09.050
> 
> 标签：php, perl, md5

我正在尝试获取运行 php 的二进制文件的校验和

```
$checksum =md5_file($fname) 
```

对于 perl

```
 use Digest::MD5;
 open FILE, "$fname";
 $ctx = Digest::MD5->new;
 $ctx->addfile(*FILE);
 $checksum = $ctx->hexdigest; 
```

在返回相同校验和的小文本文件上运行它，我得到了不同的有趣结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:15:42.877

使用 Perl，您是否确保文件句柄处于[文档建议的](http://search.cpan.org/dist/Digest-MD5/MD5.pm)[binmode](http://perldoc.perl.org/functions/binmode.html)中？

> 在大多数情况下，您要确保 $io_handle 在将其作为参数传递给 addfile() 方法之前处于 binmode。

我修改了文档中的示例以匹配您的示例：

```
use Digest::MD5;
open (my $fh, '<', $fname) or die "Can't open '$fname': $!";
binmode ($fh);
my $checksum = Digest::MD5->new->addfile($fh)->hexdigest; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:23:05.133

您应该[`binmode(FILE)`](http://perldoc.perl.org/functions/binmode.html)在打开文件后使用。如果您仍然与该更改存在差异，请查看您的 PHP 代码，因为更新的 Perl 代码会产生正确的输出：

```
$ perl dm.pl .bashrc
f5bb0773a3346814d978f9a155176d8e

$ md5sum .bashrc
f5bb0773a3346814d978f9a155176d8e *.bashrc 
```

# facebook-javascript-sdk - 如何将关注按钮插件代码插入我的 Facebook 页面？

> ID：14694727
> 
> 赞同：-1
> 
> 时间：2013-02-04T20:09:32.140
> 
> 标签：facebook-javascript-sdk

我从我的 Facebook 开发者页面获得了这个“你的关注按钮插件代码：”，但不知道如何将它放在我的 Facebook 页面中。弹出窗口给了我这个：

在您的页面上包含一次 JavaScript SDK，最好是在开始标记之后。

并且如下：将插件代码放置在您希望插件出现在页面上的任何位置。

我对此一点也不了解。我试图将此代码放在我的问题中，但得到“糟糕！您的问题无法提交，因为：”有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:38:45.500

您不能将“关注按钮”直接放在您的 Facebook 页面（又名时间线）上。

社交插件只能与您自己的网站结合使用。将相应的 JS SDK 代码复制/粘贴到您的网站，一切正常！

# ruby-on-rails - 在自联接中显示层次结构

> ID：14694730
> 
> 赞同：1
> 
> 时间：2013-02-04T20:09:55.650
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我正在构建一个员工目录应用程序并使用自联接，因此所有员工关系都在一个表中。

我有下属（direct_reports）显示，我可以显示个人的经理。

这是我的模型：

```
has_many :direct_reports, :class_name => "Person", :foreign_key => "manager_id"
belongs_to :manager, :class_name => "Person" 
```

这是我的看法：

```
<tr><td>Manager:</td><td><strong><%= link_to "Manager", @person.manager %></strong></td></tr>

    <tr><td>Direct Reports:</td><td><strong><% @person.direct_reports.each do |person| %>
                    <%= link_to person.lname + ", " + person.fname, person %><br>
                    <% end %></strong></td></tr> 
```

但是，我还没有找到任何方法来显示组织中以上人员的完整报告层次结构。是的，我要展示经理，但我需要展示他们的经理和他们的经理等，一直到 CEO。

我假设每个人都只有一位经理（在链条上）。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:19:32.107

你想要的是一个树状结构，每个员工可以有一个经理，经理也可以有老板，等等。

尝试[祖先](https://github.com/stefankroes/ancestry)。非常适合。您会自动获得范围，例如`siblings`让所有员工共享同一个经理等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:18:41.273

没有任何*简单*的方法可以使用单个 SQL 查询（*如 Postgres 对此提供支持的评论中所述*），除非您可以将其限制为预定数量的级别。否则，您可以简单地循环调用经理的经理，直到您得到 nil 结果。

```
<% manager = @person.manager
while manager do %>
  <tr><td>Manager:</td><td><strong><%= link_to manager.lname + ", " + manager.fname, manager %></strong></td></tr>
<% manager = manager.manager
end %> 
```

# java - Java json对象按名称调用函数

> ID：14694735
> 
> 赞同：2
> 
> 时间：2013-02-04T20:10:16.180
> 
> 标签：java, jquery, json

我想知道是否可以从 java json 对象调用函数？

例子

爪哇：

```
JSONObject json = new JSONObject();
json.put("fnRowCallback", "test()"); 
```

jQuery：

```
$ (function () {
    "use strict";
    function test() {
        alert('test');
    }
}(jQuery)); 
```

需要最终的成就。

```
JSONObject json = new JSONObject();
json.put("fnRowCallback", function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
                if (aData["rush"] == "Rush" ) {
                    $(nRow).addClass("gradeX");  
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:41:42.757

如果您让 Java 返回 javascript，则可以完成此操作。

```
<script src="myjavapage.jsp"></script> 
```

让你的 Java 返回

```
$(function(){
    alert('test');
}); 
```

但是我想不出一个很好的理由来用这种方式编码，而不是让一个 js 文件使用 ajax 按需获取内容，而不是在你的 json 中包含代码。这似乎毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:02:43.423

我最终回答了我自己的问题。解决方案是像这样使用 JSONLiteral，

爪哇

```
public JSONObject getOptions() {
    JSONObject json = new JSONObject();
    json.put("fnRowCallback", new JSONLiteral(String.format("fnRowCallback()")));
    return json;
} 
```

JS。

```
function fnRowCallback(){
    var fnRowCallback = function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
        if (aData["rush"] == "Rush" ) {
            nRow.className = nRow.className + " gradeX";  
        }
    };
    return fnRowCallback;
} 
```

谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:40:09.890

请参阅[Function.prototype.call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[Function.prototype.apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

```
var obj = {
   foo: function() {
    console.log('foo called');
   }
};

var json = {method: "foo"};

obj[json.method].call(this); 
```

# ruby-on-rails-3 - Github 之类的动态路由

> ID：14694736
> 
> 赞同：0
> 
> 时间：2013-02-04T20:10:16.803
> 
> 标签：ruby-on-rails-3

实现 github 使用的路由的最佳方法是什么？

前任：

```
github.com/about
github.com/37signals
github.com/javan 
```

我猜 /about 是一个真正的控制器，但第二个和第三个可能会加载用户控制器。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:20:31.347

`match '/:id/' => 'user#show'`为喜欢的用户编写类似的路由，`javan`并让控制器`show`中的操作`user`通过用户名查找用户。

所以在用户控制器中：

```
@user = User.find_by_username(params[:id]) 
```

您可以在此处了解有关路线的更多信息[。](http://guides.rubyonrails.org/routing.html)

# persistence - arquillian 持久性扩展不起作用

> ID：14694738
> 
> 赞同：0
> 
> 时间：2013-02-04T20:10:25.850
> 
> 标签：persistence, jboss-arquillian

我正在尝试测试我的网络服务。此 Web 服务使用 ejb 和 jpa 来检索其数据。所以我想使用 arquillian 扩展来完成这项工作。

这是我的 arquillian 测试课：

```
@RunWith(Arquillian.class)
public class PersonWebServiceIT {

    private PersonWebService service;

    @Deployment(testable = false)
    public static Archive<?> createDeployment() {
        return ShrinkWrap
                .create(ZipImporter.class, "test.ear")
                .importFrom(new File("simple-webservice-ear-1.0.0-SNAPSHOT.ear"))
                .as(EnterpriseArchive.class);
    }

    @Test
    @UsingDataSet("dataset.yml")
    @SneakyThrows
    public void testFindPersons(@ArquillianResource final URL deploymentUrl) {
        loadService(deploymentUrl);

        Assert.assertEquals(2, service.findPersons().size());
    }

    private void loadService(final URL deploymentUrl)
        //load webservice
    }

} 
```

这是我的 datasets/dataset.yml 文件：

```
person:
  - id: 1
    firstName: "stijn"
  - id: 2
    firstName: "cremers" 
```

我的 arquillian.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<arquillian xmlns="http://jboss.com/arquillian" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://jboss.org/schema/arquillian
    http://jboss.org/schema/arquillian/arquillian-1.0.xsd">

 <extension qualifier="persistence">
        <property name="defaultDataSource">java:/DefaultDS</property>
    </extension>

</arquillian> 
```

我的测试数据永远不会被加载。我什至尝试使用格式错误的 yml 文件，但即便如此我也没有收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:34:01.117

问题在于您的测试运行模式。当您`@Deployment`使用属性定义时`testable=false`，所有测试都在客户端模式下运行，即它们不在容器内运行。

Arquillian Persistence Extension（从 1.0.0.Alpha5 开始）不支持在客户端模式下运行测试；目前仅支持容器内测试。未来版本中可能会支持 APE 中的客户端模式测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:10:30.243

```
<property name="defaultDataSource">java:/DefaultDS</property> 
```

您正在指定服务器中定义的数据源。

在客户端模式下，测试用例在容器之外运行（即其他 JVM）

所以只有持久化扩展不能使用数据源，因此你不能使用 arquillian 持久化扩展客户端模式。

如果无论如何要在 arquillian.xml 文件中指定 jdbc url 而不是数据源名称。那么你可以使用持久性扩展

# mysql - 如何将 Twitter id 存储在 MySQL 中？

> ID：14694746
> 
> 赞同：3
> 
> 时间：2013-02-04T20:10:53.073
> 
> 标签：mysql, twitter

Twitter 搜索 API 返回一个 JSON 对象，其中包含一条推文的唯一 ID：

```
[id] => 2.9851634017882E+17
[text] => foobar 
```

我在我的数据库中创建了一个 MySQL`bigint(20)`字段来存储 ID。但是，当我尝试存储 id 时，在数据库中它只说`2`（在这种情况下）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:01:01.490

对于调用中的每个 id，我建议将值转换为字符串，然后再将其发送到 PHP。

我正在用我自己的 webapp 做这个，效果很好。我在 API 上遇到了完全相同的问题。

**前任。将 jquery 与 Twitter API 一起使用**

```
$.getJSON('https://api.twitter.com/1.1/search/tweets.json?q=api&callback=?', function(data){
     $.each(data, function() { 
     this.id_str = this.id_str + ""; // cast integer as string to avoid PHP int to float conversion on json_decode

/* ... more API parsing code ... */ 
```

还要确保您捕获的是`id_str`价值而不是`id`价值。在处理较大的 id 时`id_str`被优先考虑`id`并且[不易出错。](https://dev.twitter.com/discussions/7041)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:15:23.190

MySQL 不理解`2.9851634017882E+17`为，`INT`因为它不是。它将数字截断为从输入开头找到的最长整数，即`2`. 您需要将其作为 int 而非科学记数法放入查询中。此外，如果这正是您从 Twitter 获得的信息，那么您甚至都不知道 ID，因为该数字的精确度不会下降到那个位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:17:11.063

你得到的 ID 是一个浮点数。如果 twitter 给你浮动作为 ID，我会感到非常惊讶。

您确定 JSON 对象没有被将所有整数转换为浮点数的东西解析吗？当您修复该问题时，保存值的问题将得到解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-01T19:19:50.450

Twitter ID 被分类为`64-bit integers`. 像这样存储它们是最好的做法。在 MySQL 中，它的数据类型是`BIGINT`.

因为不同的 JSON 解释器难以解析`BIGINT`我的首选方法是根据他们的规范使用提要：

> ...考虑尽快转换为 _str 版本的 ID。

作为 JSON 消费者，我会解释`_str`id 的版本并将这个“安全”值插入到您的 BIGINT 列中。

# algorithm - 加权无向 G 上的 BFS

> ID：14694747
> 
> 赞同：-2
> 
> 时间：2013-02-04T20:10:59.470
> 
> 标签：algorithm, breadth-first-search

我正在尝试在加权无向图上执行 BFS。谁能给我一个将加权图转换为未加权的算法，以便我可以将其用作 BFS 算法的输入。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:38:43.193

在一个未加权的算法中执行加权无向图的转换非常简单。总结为将邻接矩阵中的非零元素更改为真，将零元素更改为假。但是，您也可以将 BFS 应用于加权无向图。

# django-haystack - 需要登录 Haystack

> ID：14694754
> 
> 赞同：1
> 
> 时间：2013-02-04T20:11:12.130
> 
> 标签：django-haystack

我正在使用 Haystack 默认 URLConf 来设置视图。像这样：

```
(r'^search/', include('haystack.urls')), 
```

我如何将它包装在 login_required 装饰器中，因为我只想登录用户访问搜索。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:55:39.647

在根**urls.py**添加

```
from django.contrib.auth.decorators import login_required
from haystack.views import basic_search 
```

并改变：

```
url(r'search/*', include(haystack.urls)), 
```

到以下行：

```
url(r'search/$', login_required(basic_search), name='basic_search'), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:01:29.990

您不能使用`login_required`装饰器包装 URL 包含。

您应该做的是为该 URL 路径添加一些中间件或显式添加您的搜索视图。默认`urls.py`配置只定义一个 URL：

```
from django.conf.urls.defaults import *
from haystack.views import SearchView

urlpatterns = patterns('haystack.views',
    url(r'^$', SearchView(), name='haystack_search'),
) 
```

因此，在您自己的 URL 配置中，您可以导入`SearchView`（如果您想要配置，这可能是一个好主意）然后包装该视图。在你自己的`urls.py`：

```
urlpatterns = patterns('haystack.views',
    url(r'^$', login_required(SearchView()), name='haystack_search'),
) 
```

# javascript - 如何返回对象中属性的命名空间路径？

> ID：14694756
> 
> 赞同：1
> 
> 时间：2013-02-04T20:11:26.430
> 
> 标签：javascript

我正在尝试创建一个函数来“解析”对象中嵌套属性的点分隔路径。

所以说你有以下对象：

```
var obj = {
    A: {
        A_1: {
        },
        A_2: {
            A_2_a: {},
            A_2_b: {
                A_2_b_1: {},
                A_2_b_2: {},
            }
        },
        A_3: {},
    },
    B: {
        B_1: {
        },
        B_2: {
            B_2_a: {
            },
            B_2_b: {
                B_2_b_1: {},
                B_2_b_2: {},
            }
        },
        B_3: {},
    },
}; 
```

我想在对象上调用一个函数，`resolve(obj, "B_2_b_2")`并让它返回属性的完整对象路径，即：`B.B_2.B_2_b.B_2_b_2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:06:04.513

尤里卡！我想到了！下面的答案是我正在编写的库的形式，但它应该相对容易理解。

事实证明，最好的做法（据我所知）是首先使用一个单独的函数，从包含所有属性路径的目标对象构建一个对象：

```
/**
 * Returns an object containing all of the property paths of an object. Each
 * property path is referenced by the property name.
 * @param {object} The object to target
 * @return {object} Object containing paths ELSE undefined
 */
paths: function( obj, path, lastKey, nextKey ) {
    var o, key,
        path = path ? path : {},
        lastKey = lastKey ? lastKey : "",
        nextKey = nextKey ? nextKey : "";

    for ( o in obj ) {      

        // Push path onto stack
        path[o] = (nextKey + "." + lastKey + "." + o).replace(/^[.]+/g, "");

        // Pass updated "nextKey" along with next recurse
        key = nextKey + "." + lastKey;

        // Call again on all nested objects
        if ( (lib).isPlainObject(obj[o]) ) {
            (lib).paths(obj[o], path, o, key);
        }
    }

    return (lib).len(path) ? path : undefined;
}, 
```

然后我们使用 resolve 方法作为 paths 方法的“包装器”，返回目标属性键的命名空间。

```
resolve: function( obj, key ) {     
    return (lib).paths(obj)[key];
}, 
```

使用我最初在上面发布的对象：

```
var res = o.resolve(obj, "A_2_b_1");
// Returns "A.A_2.A_2_b.A_2_b_1" 
```

仅供参考，该`paths`方法返回一个看起来像这样的对象：

```
// {
    // A: [...]
    // A_1: [...]
    // A_2: [...]
    // A_2_a: [...]
    // A_2_b: [...]
    // A_2_b_1: [
    //  0: "A_2_b_1"
    //  1: "A.A_2.A_2_b.A_2_b_1"
    // ]
    // A_2_b_2: [...]
    // A_2_c: [...]
    // A_3: [...]
    // B: [...]
    // ...
// } 
```

每个属性映射到其在对象中的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:21:10.160

假设一个命名约定，就像在您的示例对象中一样：

```
function resolve(id) {
    var parts = id.split("_");
    var path = [];
    for (var i=0; i<parts.length; i++)
        path.push(parts.slice(0, i+1).join("_"));
    return path;
}

> resolve("B_2_b_2")
["B", "B_2", "B_2_b", "B_2_b_2"]
> resolve("B_2_b_2").join(".")
"B.B_2.B_2_b.B_2_b_2" 
```

使用路径数组，您可以轻松地递归嵌套对象以获取属性值。

* * *

数据对象中的树搜索是微不足道的。但是，我们可以通过假设命名约定来优化它：

```
function resolve(obj, id) {
    if (id in obj)
        return [id]; // we've found it
    var path;
    for (var l=id.length-1; l>0; l--) {
        var sub = id.substr(0, l);
        if (sub in obj && (path = resolve(obj[sub], id))) {
            path.unshift(sub);
            return path;
        }
    }
    for (var prop in obj) {
       if (path = resolve(obj[prop], id)) {
            path.unshift(prop);
            return path;
        }
    }
    return null;
} 
```

# plone - 如何通过克隆对象 url 获取 viewlet

> ID：14694767
> 
> 赞同：2
> 
> 时间：2013-02-04T20:12:12.567
> 
> 标签：plone, zope, viewlets

我正在尝试通过其 URL 获取对象的内容标题下方的 viewlet。如下所示，但使用对象 URL 而不是“plone”。

```
id="viewlet-below-content-title" tal:content="structure provider:plone.belowcontenttitle" 
```

我可以使用restrictedTraverse 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:07:42.640

最好的办法是为`belowcontenttitle`viewlet 创建一个新视图；模板：

```
<div tal:content="structure provider:plone.belowcontenttitle"/> 
```

注册：

```
<browser:page
    for="*"
    name="belowcontenttitle"
    permission="zope2.View"
    template="template_shown_above.pt"
    /> 
```

*然后*您可以通过简单的遍历使用*该视图：*

```
<div tal:replace="structure context/path/to/other/object/@@belowcontenttitle" /> 
```

这会在另一个对象的上下文中查找视图；模板被渲染并返回，替换`div`.

# python - 为什么当底层任务抛出异常时 Celery 不会抛出异常

> ID：14694771
> 
> 赞同：34
> 
> 时间：2013-02-04T20:12:32.433
> 
> 标签：python, exception-handling, celery

芹菜似乎没有正确处理异常。

如果我有任务：

```
def errorTest():
    raise Exception() 
```

然后我打电话

```
r = errorTest.delay()
In [8]: r.result

In [9]: r.state
Out[9]: 'PENDING' 
```

它会像这样无限期地挂起。

去检查日志显示错误在任务中被抛出（如果你想要消息，问），我知道后端和一切都设置正确，因为其他任务正常工作并正确返回结果。

为了在 Celery 中捕获异常，我需要做一些时髦的事情吗？

/Celery 版本是 3.0.13，代理是在我的本地机器上运行的 RabbitMQ

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-06-16T11:54:22.880

如果您在 CELERY_ALWAYS_EAGER 设置为 True 的情况下运行 Celery，请确保在设置中也包含此行：

```
CELERY_EAGER_PROPAGATES_EXCEPTIONS = True 
```

[http://docs.celeryproject.org/en/latest/configuration.html#celery-eager-propagates-exceptions](http://docs.celeryproject.org/en/latest/configuration.html#celery-eager-propagates-exceptions)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-06T07:39:10.763

您可以在子类中定义一个[`on_failure`](http://docs.celeryproject.org/en/latest/reference/celery.app.task.html#celery.app.task.Task.on_failure)函数`Task`来正确处理它们。如果您只是想了解发生了什么，您可以设置[错误电子邮件通知](http://docs.celeryproject.org/en/3.1/configuration.html#std:setting-CELERY_SEND_TASK_ERROR_EMAILS)，它将向您发送 celery 配置中的堆栈跟踪。

注意：从 v4 开始，Celery[不再支持发送电子邮件](http://docs.celeryproject.org/en/latest/history/whatsnew-4.0.html?highlight=retry#features-removed-for-simplicity)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T19:35:54.097

将使@primalpython 的答案更加明确。

这将失败：

```
@task
def error():
    raise Exception 
```

输入输出：

```
In [7]: r = error.delay()

In [8]: print r.state
Out[8]: 'PENDING'

In [9]: print r.result
Out[9]: None 
```

这将成功：

```
@task
def error():
    raise Exception

    def on_failure(self, *args, **kwargs):
        pass 
```

输入输出：

```
In [7]: r = error.delay()

In [8]: print r.state
Out[8]: 'FAILURE'

In [9]: print r.result
Out[9]: Exception() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-25T11:29:44.363

IMO 最简单的方法是在创建新的 Celery 应用程序时传递对任务类的引用。

在一个模块中定义默认使用的任务类：

```
from celery.app.task import Task
import logging

logger=logging.getLogger(__name__)

class LoggingTask(Task):
  def on_failure(self, exc, task_id, args, kwargs, einfo):
      kwargs={}
      if logger.isEnabledFor(logging.DEBUG):
         kwargs['exc_info']=exc
      logger.error('Task % failed to execute', task_id, **kwargs)
      super().on_failure(exc, task_id, args, kwargs, einfo) 
```

当您定义您的应用程序时，请引用该模块（注意，它是您提供的字符串引用..）：

```
from celery import Celery

app=Celery('my_project_name', task_cls='task_package.module_name:LoggingTask') 
```

从那时起，如果没有专门提供任务类，则将使用 LoggingTask - 从而允许您影响*所有*现有任务（使用默认值），而不必修改每个任务。这也意味着您可以正常使用 @shared_task 装饰器。

# mysql - MySQL - 私人帖子显示正确计数

> ID：14694774
> 
> 赞同：3
> 
> 时间：2013-02-04T20:12:43.863
> 
> 标签：mysql, count

所以我有 4 个表：用户、帖子、私人、线程。在此示例中，lizzy 在不同的线程中创建了 2 个私人帖子：

“约会”帖子供用户 2、5、6 和她自己查看该线程中帖子的正确数量。

“分手”帖子仅供用户 2 和她自己查看该线程中帖子的正确数量。

根据查看线程的用户显示正确的计数是我遇到的问题。在这里，我们专注于 lizzy、她的帖子和帖子数：

```
users                     (These aren't part of table. Just shows the counts we should display with our query depending on the user_id)
user_id |  user_name      //thread #: post_count-post_count_if_not_authorized = count to show 
--------------------
   1    |    tony         //thread 2: 3-1= 2 posts. thread 3: 2-1= 1 post.
   2    |    steph        //thread 2: 3-0= 3 posts. thread 3: 2-0= 2 posts.
   3    |    lizzy        //thread 2: 3 posts. thread 3: 2 posts.
   4    |    adam         //thread 2: 3-1= 2 posts. thread 3: 2-1= 1 post.
   5    |    lara         //thread 2: 3-0= 3 posts. thread 3: 2-1= 1 post.
   6    |    alexa        //thread 2: 3-0= 3 posts. thread 3: 2-1= 1 post.

posts
post_id   thread_id   user_id   post_name   private (0 is public, 1 is private to authorized users)
-----------------------------------------------------
   1         1           1       Coding        0
   2         2           3       Dating        1
   3         2           3       Show Me       0
   4         2           3       See Me        0 
   5         3           3       Break Ups     1
   6         3           3       True Love     0

private
private_id   post_id   authorized_user_id
-----------------------------------------------
    1           2               2
    2           2               5
    3           2               6
    4           5               2

threads
thread_id  user_id  post_count
------------------------------------
    1         1         1
    2         3         3  | When outputted in php, we should subtract the correct COUNT
    3         3         2  | from this depending on the user viewing the thread like above. 
```

所以基本上，我们有该线程中所有帖子的总线程数。但是，如果我们使用 mysql 查询将其提取出来，所有用户将看到她拥有的每个线程的所有 lizzy 的 post_count，而相反，只有 lizzy 和她授权查看线程上某些帖子的任何用户应该看到正确的可见非私人计数他们。将计数作为一行提取（post_count_if_not_authorized）的最有效方法是什么，以便我们可以从 post_count 中减去它以仅向每个用户显示正确的计数？

像下面这样的东西是我所追求的（当然不是按原样工作）：

```
SELECT DISTINCT t.thread_id, t.post_count, t.COUNT(*)
FROM threads as t
JOIN posts as p on p.user_id = t.user_id
LEFT JOIN private pv on pv.post_id = p.post_id
WHERE t.user_id='3'
    AND (p.private = 0) OR (pv.authorized_user_id = {$logged_in_id} and p.private = 1) 
```

**更新：**

（在此示例中，WHERE 子句中的 t.user_id='3' 用于 lizzy，如果 $logged_in_id 应根据用户给出正确的计数，如上面用户表中的计数）

这是一个[小提琴](http://sqlfiddle.com/#!2/51286/7)。

如果 tony ($logged_in_id=1) 正在查看 lizzy 的 (user_id=3) 启动的线程，输出应该如下所示：

```
thread_id    post_count_final (this should have the correct count for this user($logged_in_id) to see, all posts by lizzy - private posts by lizzy that this user is not authorized to see)
    2            2
    3            1 
```

如果 steph ($logged_in_id=2) 正在查看 lizzy 的 (user_id=3) 启动的线程：

```
thread_id    post_count_final (this should have the correct count for this user($logged_in_id) to see, all posts by lizzy - private posts by lizzy that this user is not authorized to see)
    2            3
    3            2 
```

（注意：用户表旁边的右上角显示了这些数字是如何得出的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:12:09.133

```
SELECT 
t.thread_id, t.post_count, 
COUNT(IF(ISNULL(pv.private_id) AND p.private='1' AND p.user_id<>'1', null, 1)) 
FROM threads as t
JOIN posts as p on p.thread_id = t.thread_id 
JOIN users as u on u.user_id = p.user_id 
LEFT JOIN private as pv on pv.post_id = p.post_id AND pv.authorized_user_id='1' 
JOIN users as auth on auth.user_id = '1'
WHERE p.user_id='3' AND t.user_id='3'
GROUP BY t.thread_id; 
```

即使 lizzy（登录）正在查看 lizzy，这也应该有效。添加 COUNT(*) 将返回与 t.post_count 相同的值。您可以完全消除线程表的使用并在查询中一起进行计数，尽管查询会更繁重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:32:07.133

如果您使用正确的`group by`语法，它是否有效？

```
SELECT t.thread_id, t.post_count, COUNT(*)
FROM threads as t
JOIN posts as p on p.user_id=t.user_id 
LEFT JOIN private pv on pv.post_id=p.post_id
WHERE (p.private=0) OR (pv.authorized_user_id={$logged_in_id} and p.private=1) 
group by t.thread_id, t.post_count 
```

# php - 试图提取 simplexml 属性

> ID：14694776
> 
> 赞同：0
> 
> 时间：2013-02-04T20:12:44.573
> 
> 标签：php, attributes, simplexml

我有一个如下所示的 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<products>
  <product sku="CATDJ" type="CAT" vendor="DJ" active="1" on_sale="0" discountable="0">
    <name>CATALOGS</name>
    <short_description><![CDATA[The DJ catalog features 182 pages]]></short_description>
    <long_description><![CDATA[The DJ catalog features 182 pages.]]></long_description>
    <price>1.5</price>
    <stock_quantity>65</stock_quantity>
    <release_date>2003-05-06T00:00:00-04:00</release_date>
    <barcode>782421791315</barcode>
  </product>
  .... 
```

我可以获取价格、库存数量和条形码，但不能获取 sku、活动或折扣数据。

这就是我的代码如下所示：

```
 $myinv = simplexml_load_file('http://www.*******.com/products.xml');
   foreach ($myinv as $invinfo):
     $sku = $invinfo->products->product->sku;
     $active = $invinfo->products->product->active;
     $deductible = $invinfo->products->product->discountable;
     $qty=$invinfo->stock_quantity;
     $price=$invinfo->price;
     $upc=$invinfo->barcode; 
```

我究竟做错了什么？顺便说一句，我是 php 新手。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:15:30.390

我总是对从 SimpleXML 获得的所有内容进行类型转换，因为它总是返回一个 SimpleXMLElement。`var_dump`你的变量自己看看。

```
<?php

$xml = '<?xml version="1.0" encoding="ISO-8859-1"?>
<products>
  <product sku="CATDJ" type="CAT" vendor="DJ" active="1" on_sale="0" discountable="0">
    <name>CATALOGS</name>
    <short_description><![CDATA[The DJ catalog features 182 pages]]></short_description>
    <long_description><![CDATA[The DJ catalog features 182 pages.]]></long_description>
    <price>1.5</price>
    <stock_quantity>65</stock_quantity>
    <release_date>2003-05-06T00:00:00-04:00</release_date>
    <barcode>782421791315</barcode>
  </product>
</products>';

$myinv = new SimpleXMLElement($xml);

$products = $myinv->product;
foreach ($products as $product){

    $attrs = $product->attributes();
    $sku = $attrs->sku;
    $active = $attrs->active;
    $discountable = $attrs->discountable;
    $qty = $product->stock_quantity;
    $price = $product->price;
    $upc = $product->barcode;

    echo (string)$sku . "<br>\n";
    echo (string)$active . "<br>\n";
    echo (string)$discountable . "<br>\n";
    echo (string)$qty . "<br>\n";
    echo (string)$price . "<br>\n";
    echo (string)$upc . "<br>\n";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:15:09.593

XPath 可以完成获取属性值的工作`$xpath->query("//product[@name='sku']/@value");`。

# java - ProGuard 混淆删除参数

> ID：14694780
> 
> 赞同：2
> 
> 时间：2013-02-04T20:12:56.963
> 
> 标签：java, proguard

> **可能重复：**
> [如何阻止 Proguard 删除类型参数？](https://stackoverflow.com/questions/12924425/how-do-you-stop-proguard-from-removing-type-parameters)

我试图混淆我的代码，但我根本没有成功......

我想知道是否有任何方法可以混淆使用 Spring MVC 的桌面应用程序？

但是现在，问题是：我有一个带有这个列表的类：

```
 //bi-directional many-to-many association to PerfilAcesso
@ManyToMany
@JoinTable(
    name="FuncionalidadesLiberadas", 
    joinColumns={@JoinColumn(name="Funcionalidades")},
    inverseJoinColumns={@JoinColumn(name="PerfilAcesso")})
private List<PerfilAcesso> perfilAcessos; 
```

当我使用 ProGuard 进行混淆时，它会删除参数 <PerfilAcesso>..

# xslt - Xpath 从一个节点中选择另一个节点中不存在的值

> ID：14694793
> 
> 赞同：0
> 
> 时间：2013-02-04T20:13:36.187
> 
> 标签：xslt, xpath, muenchian-grouping, node-set

```
<my-courses>
  <courses-reqd>
     <details> 
       <subject>Math</subject>
     </details>
     <details>
       <subject>Econ</subject>
     </details>
     <details>
       <subject>Geog</subject>
     </details> 
     <details>
       <subject>Phys</subject>
     </details>
     <detail>
       <subject>Zool</subject>
     </details>
  </courses-reqd>
  <courses-taken>
    <details> 
      <subject>Math</subject>
    </details>
    <details>
      <subject>Econ</subject>
    </details>
    <detail>
      <subject>Zool</subject>
    </details>
  </courses-taken> 
```

我提供了示例 XML，并想知道如何使用 XPATH 获取不在课程中但在课程要求中的值。在所提供的情况下，答案将是 Geog 和 Phys，因为它们在课程中不存在。

```
<xsl:apply-templates select="my-courses\courses-reqd | not(my-courses\courses-taken)"/> 
```

这可能吗？如果可以，我将如何去做。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:39:12.283

这里的简单答案是这样做：

```
<xsl:apply-templates
   select="/my-courses/courses-reqd/detail
                [not(subject = /my-courses/courses/taken/details/subject)]" /> 
```

更好（更有效）的方法是使用密钥。

这将被添加到 XSLT 的顶部：

```
<xsl:key name="kTaken" match="courses-taken//subject" use="."/> 
```

然后这将在您的模板之一中使用：

```
<xsl:apply-templates 
         select="/my-courses/courses-reqd/detail[not(key('kTaken', subject))]" /> 
```

在您的示例输入上运行此 XSLT 时（在更正示例输入以始终使用名为“details”而不是“detail”的元素之后：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="kTaken" match="courses-taken//subject" use="."/>

  <xsl:template match="/">
    <root>
      <xsl:apply-templates 
          select="/my-courses/courses-reqd/details[not(key('kTaken', subject))]" />
    </root>
  </xsl:template>

  <xsl:template match="details">
    <course>
      <xsl:value-of select="subject"/>
    </course>
  </xsl:template>
</xsl:stylesheet> 
```

结果是：

```
<root>
  <course>Geog</course>
  <course>Phys</course>
</root> 
```

# fortran - Fortran“参数”类型未包含在编译对象中

> ID：14694796
> 
> 赞同：4
> 
> 时间：2013-02-04T20:13:49.913
> 
> 标签：fortran, static-libraries, intel-fortran, fortran-iso-c-binding

我有一个 Fortran 模块，其中包含一些具有属性的变量`parameter`和一些具有属性的变量`save`。这些`parameter`不包含在编译对象中，这在尝试组装库时会成为问题。例如，考虑一个文件`testModule.f90`：

```
module testMOD
  integer, save :: thisIsSaved = 1
  integer, parameter :: thisIsParametered = 2
end module testMOD 
```

我编译这个：`ifort -c testModule.f90`。当我检查里面的东西时：

```
>$ nm testModule.o
0000000000000000 T testmod._
0000000000000000 D testmod_mp_thisissaved_ 
```

只有`thisIsSaved`变量在那里。我知道我可以更改`thisIsParametered`为`save`而不是`parameter`，但理想情况下，我想阻止链接用户更改此值。有没有办法做到这一点？

**编辑：**我希望这个库也可以被 C 代码访问，而不仅仅是 Fortran。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:31:32.397

正如其他人所指出的，参数是命名常量，实现可能不会在目标代码中为该常量留出存储空间（特别是对于标量）。

你的库应该为你的 C 客户端提供一个头文件。您可以通过#define 或const 在该头文件中定义Fortran 参数的值。

这需要在两个地方维护参数的值，但是您已经在库接口的其他方面承担了维护负担。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T20:23:37.020

这实际上应该存储在 .mod 文件中。所有的数据类型和函数原型都存储在那里，这就是为什么在向某人发送 .lib 文件时需要包含它的原因。在将其用于其他内容后尝试在模块中进行链接，它应该可以正常工作。

本质上，.mod 文件与 c 中的 .h 文件具有相同的用途，因此您当然必须将它包含在您的库中。

[更新：]如果您尝试在 C 中使用它，那么正如您所说，您无法轻松维护命名常量。作为替代方案，您可以在实体上使用受保护的属性。至少对于 Fortran，模块之外的任何内容都被限制写入变量。我不知道 C 编译器和链接器是否会尊重这种行为，但我认为这可能是你最好的选择。

```
module testMOD
 INTEGER, PROTECTED, BIND(C)  :: globalvar = 1
end module testMOD 
```

不幸的是，我对与 C 的互操作性并没有真正做太多，所以我不能真正保证 C 会尊重受保护的属性并且不允许更改变量。

# php - 在 javascript 代码中回显 php 结果

> ID：14694798
> 
> 赞同：3
> 
> 时间：2013-02-04T20:14:00.063
> 
> 标签：php, javascript, jplayer

我试图在 javascript 中的 php 中回显一些结果，但它一直无法工作，弄乱了 javascript 播放器的界面

这是完整的 javascript：

```
<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){

    new jPlayerPlaylist({

        jPlayer: "#jquery_jplayer_1",
            cssSelectorAncestor: "#jp_container_1"
        }, [
            {
                title:"Name",
                mp3:"audio.mp3",
            },      

        ], {
            swfPath: "js",
            supplied: "oga, mp3",
            wmode: "window"
        });
    });
    //]]>
    </script> 
```

我想替换这个：

```
 {
                title:"Name",
                mp3:"audio.mp3",
            }, 
```

有了这个 ：

```
 while(
    $row = mysql_fetch_assoc($result)) { 
    $sender = $row['sender'];
    $sender_name_query = mysql_query("SELECT fullname FROM users WHERE id = '$sender'");
    $sender_name = mysql_fetch_object($sender_name_query);
    $sender_fullname = $sender_name->fullname;
    echo '{<br/>title:"' . $sender_fullname . '",<br/>mp3:"link",<br/>},';  
} 
```

这是一个while循环，我需要它来获得所有结果

任何人都可以帮助如何更换它吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:16:09.970

`<br/>`在 javascript 中无效。尝试：

```
echo '{\ntitle:"' . $sender_fullname . '",\nmp3:"link",\n},'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:20:18.720

另一种解决方案。你可以这样做：

```
<?php
    $playlist = array();

    while($row = mysql_fetch_assoc($result)) { 
        $sender = $row['sender'];
        $sender_name_query = mysql_query("SELECT fullname FROM users WHERE id = '$sender'");
        $sender_name = mysql_fetch_object($sender_name_query);
        $sender_fullname = $sender_name->fullname;
        $playlist[] = (object) array(
            'title' => $sender_fullname,
            'mp3' => 'audio.mp3'
        );  
    }   
?>

<script type="text/javascript">
    //<![CDATA[
    $(document).ready(function(){
        new jPlayerPlaylist({
            jPlayer: "#jquery_jplayer_1",
            cssSelectorAncestor: "#jp_container_1"
        }, 
        <?php echo(json_encode($playlist));?>,
        {
            swfPath: "js",
            supplied: "oga, mp3",
            wmode: "window"
        });
    });
    //]]>
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:16:06.817

不要使用`<br>`标签，`\n`而是使用添加换行符（如果你真的需要它，脚本将在没有换行符的情况下工作）。

你不能在 javascript 中使用 HTML 标签

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T20:18:32.240

```
{
    title: "<?php echo json_encode($sender_fullname);?>",
    mp3: "audio.mp3",
}, 
```

# uiviewcontroller - 我可以将 UIView 设置为容器视图吗

> ID：14694799
> 
> 赞同：1
> 
> 时间：2013-02-04T20:14:03.793
> 
> 标签：uiviewcontroller, uisplitviewcontroller, ipad

我正在尝试创建具有有效 2 个视图的 iPad 视图。左侧视图将是菜单/登录区域，右侧视图将显示内容，具体取决于左侧选择的菜单项。

我添加了 2 个容器视图，并且创建左侧菜单没有问题。但是，我无法告诉右侧在视图控制器之间切换。如何将 UIViewController 分配给容器视图？选择菜单项时，我需要能够使用不同的视图控制器切换右侧。

这甚至可能吗？我不想使用拆分视图控制器，因为右侧是 UITable，我不想要 UITable。

如果我不在正确的轨道上，有人可以指出我正确的方向吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:24:53.940

这是一个示例代码，它为两个单独的按钮更新容器视图内容。

内容是两个不同的*UIViewControllers*。

注意：在向*ContinerView*添加一个视图之前，不要忘记清除容器视图以管理内存。

.h 文件

```
MyViewController1 * myViewController1;
MyViewController2 * myViewController2;

@property (nonatomic, strong) IBOutlet UIView *containerView; 
```

.m 文件

```
// Button-1
- (IBAction)button1_TouchUpInside:(UIButton *)sender {

  for (UIView *view in [containerView subviews]) {

    [view removeFromSuperview];
  }

  [button1 setSelected:YES];

  myViewController1 = nil;

  myViewController1 = [[MyViewController1 alloc]
                           initWithNibName:@"MyViewController1"
                           bundle:[NSBundle mainBundle]];

  [self.containerView addSubView:myViewController1.view];
}

- (IBAction)button2_TouchUpInside:(UIButton *)sender {

  for (UIView *view in [containerView subviews]) {

    [view removeFromSuperview];
  }

  [button2 setSelected:YES];

  myViewController2 = nil;

  myViewController2 = [[MyViewController1 alloc]
                           initWithNibName:@"MyViewController1"
                           bundle:[NSBundle mainBundle]];

  [self.containerView addSubView:myViewController2.view];
} 
```

希望这将有助于解决您的问题。

# maven - 如何告诉 jetty-maven-plugin 运行什么版本的码头？

> ID：14694800
> 
> 赞同：0
> 
> 时间：2013-02-04T20:14:14.993
> 
> 标签：maven, plugins, jetty, elasticsearch

我想告诉 jetty-maven-plugin 我希望它运行什么版本的 jetty，例如 8.1.4 而不是 9.0.0。[我在这里的](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html)任何地方都看不到

另外，我想要的下一步是告诉这个插件使用我在码头上配置的特定插件。这可能吗？

我基本上已经编辑了[elasticsearch-jetty](https://github.com/sonian/elasticsearch-jetty)插件，并希望使用这个插件通过 jetty 和 maven 运行它，或者任何可以工作的东西。有没有人有任何想法/帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:22:41.127

只需将以下内容添加到您的`<pluginManagement>`部分

```
 <plugin>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>jetty-maven-plugin</artifactId>
      <version>8.1.8.v20121106</version>
    </plugin> 
```

显然将版本更改为您要运行的确切版本。

或者从 CLI

```
mvn org.mortbay.jetty:jetty-maven-plugin:8.1.8.v20121106:run 
```

该插件将 groupId 从 更改`org.mortbay.jetty`为`org.eclipse.jetty`9.x 版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:12:58.557

When you use maven jetty plugin, jetty is hosting your application and you need to start jetty first in order to run your application. In elasticsearch-jetty plugin it's other way around, elasticsearch is hosting jetty. So, in order to run elasticsearch with elasticsearch-jetty from maven, you need to start elasticsearch, not jetty. I would consider using [exec-maven-plugin](http://mojo.codehaus.org/exec-maven-plugin/) instead.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:24:17.143

这里（[http://www.eclipse.org/jetty/documentation/current/jetty-maven-helloworld.html#configuring-embedded-jetty-with-maven](http://www.eclipse.org/jetty/documentation/current/jetty-maven-helloworld.html#configuring-embedded-jetty-with-maven)）码头版本在 pom 依赖项部分。

如果这不起作用，您可以尝试在 jetty 插件的插件部分中的依赖项。这里有一些信息（[http://www.sonatype.com/people/2008/04/how-to-override-a-plugins-dependency-in-maven/](http://www.sonatype.com/people/2008/04/how-to-override-a-plugins-dependency-in-maven/)）

或者您可以尝试使用旧版本的插件。

# c - 文件 IO 似乎没有正确读取

> ID：14694802
> 
> 赞同：5
> 
> 时间：2013-02-04T20:14:39.500
> 
> 标签：c, io, unix-ar

**免责声明：这是一个任务。我不是要求明确的代码。相反，我只要求足够的帮助，以便我可以理解我的问题并自己纠正它。**

我正在尝试`ar`根据家庭作业重新创建 Unix 实用程序。这个任务的大部分处理 C 中的文件 IO，其他部分处理系统调用等。

在这种情况下，我打算创建存档中所有文件的简单列表。正如你所注意到的，我还没有走多远。该计划相对简单：从存档文件中读取每个文件头并仅打印`ar_hdr.ar_name`. 其余字段将被跳过`fseek()`，包括文件数据，直到到达另一个文件，此时该过程再次开始。如果达到 EOF，则函数简单地终止。

我对文件 IO 没有什么经验，所以我在这个任务上已经处于劣势。我已尽我所能研究实现目标的正确方法，并且我相信我已尽我所能实现了它们。也就是说，我的实现似乎有问题。存档文件中的数据似乎没有被读取，或者至少存储为变量。这是我的代码：

```
struct ar_hdr
{
    char ar_name[16];   /* name */
    char ar_date[12];   /* modification time */
    char ar_uid[6];     /* user id */
    char ar_gid[6];     /* group id */
    char ar_mode[8];    /* octal file permissions */
    char ar_size[10];   /* size in bytes */
};

void table()
{
    FILE *stream;
    char str[sizeof(struct ar_hdr)];
    struct ar_hdr temp;

    stream = fopen("archive.txt", "r");
    if (stream == 0)
    {
        perror("error");
        exit(0);
    }

    while (fgets(str, sizeof(str), stream) != NULL)
    {
        fscanf(stream, "%[^\t]", temp.ar_name);
        printf("%s\n", temp.ar_name);
    }
    if (feof(stream))
    {
        // hit end of file
        printf("End of file reached\n");
    }
    else
    {
        // other error interrupted the read
        printf("Error: feed interrupted unexpectedly\n");
    }

    fclose(stream);
} 
```

此时，我只希望能够正确读取数据。完成后，我将努力寻找下一个文件。然而，我想重申我的观点，我不是在要求明确的代码——我需要学习这些东西，而让别人为我提供工作代码不会那样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:18:09.030

您已经定义了一个`char`名为的缓冲区`str`来保存您的数据，但您正在从一个`ar_hdr`名为`temp`. 同样，您正在将二进制数据作为字符串读取，该字符串会因嵌入的空值而中断。

您需要读取二进制数据并更改`temp`为指针`str`或直接`temp`使用以下内容读取：

```
ret=fread(&temp,sizeof(temp),1,stream); 
```

（看看 doco 的 fread - 我的 C 太生锈了，无法确定）。确保检查并使用返回值。

# c++ - boost::container 是否支持 C++11 初始化列表？

> ID：14694803
> 
> 赞同：4
> 
> 时间：2013-02-04T20:14:44.120
> 
> 标签：c++, boost, c++11, initializer-list

在 Boost.Container 网站上，我们可以看到：

> Boost.Container 在构造或分配容器时不支持初始化列表，但它会支持具有初始化列表支持的编译器。(...)

对不起，如果我只是愚蠢，但我真的不知道如何阅读它。这是否意味着它将在不可预测的将来做到这一点，或者它现在应该与符合标准的编译器一起工作？

我已经在 GCC 4.7 和 ICC 13.0 上对其进行了测试，但都不起作用，但我相信我可能错过了一些非常重要的东西，比如正确的预处理器定义？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T20:26:52.450

v1.52 的 Boost.Container 目前没有任何 initializer_list 构造函数。不幸的是，我能给你的唯一来源是我手动搜索了整个容器库源。

# java - 使用 Mockito 检查多个参数的一致性

> ID：14694806
> 
> 赞同：15
> 
> 时间：2013-02-04T20:14:49.680
> 
> 标签：java, mocking, mockito

我正在使用 Mockito 来模拟一个类，该类的方法如下所示：

```
setFoo(int offset, float[] floats) 
```

我希望能够验证数组 ( `floats`) 中的值是否与预期值数组中的值相等（在给定的容差范围内）。

问题是我想检查`floats`从指定位置开始的内容`offset`。出于测试的目的，我不知道/关心偏移量是多少，只要它指向我期望的值。我也不关心数组的其余部分包含什么。我只关心从提供的偏移量开始的值。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-05T04:44:25.757

While a partial mock isn't a bad idea, you might find your code easier to follow if you use an [ArgumentCaptor](http://docs.mockito.googlecode.com/hg/org/mockito/ArgumentCaptor.html) instead to get the values after the fact. It's a special argument matcher that keeps track of the value it matches.

```
// initialized with MockitoAnnotations.initMocks();
@Captor ArgumentCaptor<Integer> offsetCaptor;
@Captor ArgumentCaptor<float[]> floatsCaptor;
@Mock Bar bar;

@Test
public void valuesShouldBeCloseEnough() {
  Sut sut = new Sut(bar);
  sut.doSomething();
  verify(bar).setFoo(offsetCaptor.capture(), floatsCaptor.capture());

  // check values with assertValuesAreCloseEnough, declared elsewhere
  assertValuesAreCloseEnough(offsetCaptor.getValue(), floatsCaptor.getValue());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:29:46.143

你想要一个[部分模拟](http://marcschwieterman.com/blog/simple-stub-creation-with-mockito-partial-mocks/)。让我们假设具有`setFoo()`名为 Bar 的类：

```
private static abstract class AssertingBar implements Bar {

  @Override
  void setFoo(int offset, float[] floats) {
    this.offset = offset;
    this.floats = floats
  }

  public void verify(float[] expectedFloats, float delta) {
    // do your verification here
  }
}

@Test
public void valuesShouldBeCloseEnough() {
  AssertingBar bar = Mockito.mock(AssertingBar.class, Mockito.CALLS_REAL_METHODS);

  Sut sut = new Sut(bar);
  sut.doSomething();

  bar.verify(...); 
} 
```

如果`Bar`是一个类，而不是一个接口，那么你可以使用`doCallRealMethod()`

# c++ - 使用带有图像的 OpenCV 和 SVM

> ID：14694810
> 
> 赞同：63
> 
> 时间：2013-02-04T20:15:12.187
> 
> 标签：c++, opencv, svm

我在阅读图像、提取训练特征以及使用 SVM 对 OpenCV 中的新图像进行测试时遇到困难。有人可以指点我一个很好的链接吗？我看过[OpenCV Introduction to Support Vector Machines](http://docs.opencv.org/doc/tutorials/ml/introduction_to_svm/introduction_to_svm.html#introductiontosvms)。但它对阅读图像没有帮助，我不知道如何合并它。

* * *

我的目标是对图像中的像素进行分类。这些像素将属于一条曲线。我理解形成训练矩阵（例如，图像 A 1,1 1,2 1,3 1,4 1,5 2,1 2,2 2,3 2,4 2,5 3,1 3,2 3， 3 3,4 3,5

我会将我的训练矩阵形成为 [3][2]={ {1,1} {1,2} {1,3} {1,4} {1,5} {2,1} ..{} }

但是，我对标签有点困惑。根据我的理解，我必须指定训练矩阵中的哪一行（图像）对应，对应于曲线或非曲线。但是，如果有一些像素属于曲线而一些不属于曲线，我该如何标记训练矩阵行（图像）。例如，我的训练矩阵是 [3][2]={ {1,1} {1,2} {1,3} {1,4} {1,5} {2,1} ..{} } ，像素 {1,1} 和 {1,4} 属于曲线，但其余不属于。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2013-02-04T21:53:20.683

我最近不得不处理这个问题，这就是我最终让 SVM 为图像工作所做的事情。

要在一组图像上训练 SVM，首先必须为 SVM 构建训练矩阵。该矩阵指定如下：矩阵的每一行对应一个图像，该行中的每个元素对应于该类的一个特征——在这种情况下，是某个点的像素颜色。由于您的图像是二维的，因此您需要将它们转换为一维矩阵。每行的长度将是图像的区域（注意图像必须是相同的大小）。

假设您想在 5 个不同的图像上训练 SVM，每个图像都是 4x3 像素。首先，您必须初始化训练矩阵。矩阵中的行数为 5，列数为图像的面积，4*3 = 12。

```
int num_files = 5;
int img_area = 4*3;
Mat training_mat(num_files,img_area,CV_32FC1); 
```

理想情况下，`num_files`不会`img_area`被硬编码，而是通过遍历目录并计算图像数量并获取图像的实际区域来获得。

下一步是`training_mat`用每个图像的数据“填充”行。以下是此映射如何适用于一行的示例。

![将 2D 图像矩阵转换为 1D 矩阵](../Images/204957b5161f32755c82b4d1a13eb476.png)

我已经用它应该在训练矩阵中相应行中的位置对图像矩阵的每个元素进行了编号。例如，如果那是第三张图像，这将是训练矩阵中的第三行。

您必须遍历每个图像并相应地设置输出矩阵中的值。这是多个图像的示例：

![具有多个图像的训练矩阵](../Images/c4bb74eb4cbde7c4549316c7755ed873.png)

至于如何在代码中执行此操作，您可以使用[`reshape()`](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#cv-reshape)，但由于矩阵不连续，我遇到了问题。根据我的经验，我做过这样的事情：

```
Mat img_mat = imread(imgname,0); // I used 0 for greyscale
int ii = 0; // Current column in training_mat
for (int i = 0; i<img_mat.rows; i++) {
    for (int j = 0; j < img_mat.cols; j++) {
        training_mat.at<float>(file_num,ii++) = img_mat.at<uchar>(i,j);
    }
} 
```

对每个训练图像执行此操作（记住要递增`file_num`）。在此之后，您应该正确设置训练矩阵以传递给 SVM 函数。其余步骤应该与网上的示例非常相似。

请注意，在执行此操作时，您还必须为每个训练图像设置标签。因此，例如，如果您根据图像对眼睛和非眼睛进行分类，则需要指定训练矩阵中的哪一行对应于眼睛和非眼睛。这被指定为一维矩阵，其中一维矩阵中的每个元素对应于二维矩阵中的每一行。为每个类别选择值（例如，-1 表示非眼睛，1 表示眼睛）并将它们设置在标签矩阵中。

```
Mat labels(num_files,1,CV_32FC1); 
```

因此，如果该`labels`矩阵中的第 3 个元素为 -1，则表示训练矩阵中的第 3 行属于“非眼睛”类。您可以在评估每个图像的循环中设置这些值。您可以做的一件事是将训练数据分类到每个类的单独目录中，并遍历每个目录中的图像，并根据目录设置标签。

接下来要做的是设置您的 SVM 参数。这些值会因您的项目而异，但基本上您会声明一个`CvSVMParams`对象并设置值：

```
CvSVMParams params;
params.svm_type = CvSVM::C_SVC;
params.kernel_type = CvSVM::POLY;
params.gamma = 3;
// ...etc 
```

网上有几个关于如何设置这些参数的例子，就像你在问题中发布的链接一样。

接下来，您创建一个`CvSVM`对象并根据您的数据对其进行训练！

```
CvSVM svm;
svm.train(training_mat, labels, Mat(), Mat(), params); 
```

根据您拥有的数据量，这可能需要很长时间。但是，在它完成训练之后，您可以保存经过训练的 SVM，这样您就不必每次都重新训练它。

```
svm.save("svm_filename"); // saving
svm.load("svm_filename"); // loading 
```

要使用经过训练的 SVM 测试您的图像，只需读取图像，将其转换为一维矩阵，然后将其传递给`svm.predict()`：

```
svm.predict(img_mat_1d); 
```

它将根据您设置的标签返回一个值（例如，-1 或 1，基于我上面的眼睛/非眼睛示例）。或者，如果您想一次测试多个图像，您可以创建一个与之前定义的训练矩阵具有相同格式的矩阵，并将其作为参数传递。但是，返回值会有所不同。

祝你好运！

# c++ - 自动转换为指针而不自动转换为 bool(-like) 可能吗？

> ID：14694814
> 
> 赞同：1
> 
> 时间：2013-02-04T20:15:17.870
> 
> 标签：c++

是否可以创建一个`Wrapper`类

```
void f(void *) {}

Wrapper w;
f(w); 
```

编译，但是

```
Wrapper w;
if (w) {} 
```

不编译？或者在运行时检测差异？

背景：win32`HANDLE`是`void *`. Win32 不使用`NULL`，而是`((HANDLE)(-1))`将其用作错误值，因此任何将 a 隐式转换`HANDLE`为 bool 的代码几乎肯定是在测试错误的东西。我有一个包装 a 的类`HANDLE`，如果可能的话，我想在使用包装类时消除这种错误机会。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T20:18:46.600

在 C++11 中，可以使用*已删除的函数*。例如：

```
struct Wrapper
{
    operator void* () { }
    operator bool () = delete;
};

void foo(void*) { }

int main()
{
    Wrapper w;

    foo(w); // OK

    if (w) // ERROR!
    {
        // ...
    }
} 
```

如果您正在使用不支持 C++11 的编译器，则可以通过声明`bool`转换运算符来获得相同的结果`private`：

```
struct Wrapper
{
    operator void* () { }
private:
    operator bool () { };
}; 
```

这是有效的，因为仅在重载解决的最后一步验证函数的可访问性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:31:36.163

好吧，这是一个可行的版本，但请记住，在生产代码中这是一个*糟糕的主意：*

```
struct Wrapper {
    void *_value;

    Wrapper() : _value(NULL) {

    };

    template<typename T>
    Wrapper(T *value) : _value(value) {

    };

    void *operator &() {
        return _value;
    };
};

void func(void *value) {
    printf("%p", value);
}

int main()
{
    Wrapper w = (void *) 0xFFAABB;

    if (w) // error, 'No viable conversion from 'Wrapper' to 'bool'
    {
        func(&w); // 0xffaabb
    }
} 
```

您不能直接传递包装器，但传递包装器的地址会将其转换为值的地址。

**如果您尝试将其与外部模板函数一起使用，请务必小心**，因为它们可能无法正常运行。

# php - 如何在代码点火器中将用户 ID 附加到 url？

> ID：14694824
> 
> 赞同：0
> 
> 时间：2013-02-04T20:15:51.183
> 
> 标签：php, codeigniter, codeigniter-routing

我正在我的社交网络上创建用户模块。我正在尝试将其设置为如果您已登录并查看自己的个人资料，`$user['id'];`并且如果您已登录并查看其他人的个人资料，那么`$prof['id'];`我已经开始完成。

但是，我是 codeigniter 和 php 的新手，并试图弄清楚如何将用户 id 附加到 url 的末尾，以便我的系统可以检查它是否是`$user['id'`] 或`$prof['id']`

控制器：

```
public function profile() 
    {
        $data['profile_icon'] = 'profile';
        $data['main_content'] = 'account/profile';
        $this->load->view('includes/templates/profile_template', $data);
        $this->load->helper('date');
        $this->load->library('session');
        $session_id = $this->session->userdata['id'];
        //USER ID LOOKING AT OWN PROFILE
        $this->load->model('account_model');
        $user = $this->account_model->user();
        $data['user'] = $user;
        //PROF ID LOOKING AT SOMEONE ELSE'S PROFILE
        $this->load->model('account_model');
        $prof = $this->account_model->prof();
        $data_prof['prof'] = $prof;

        if($session_id != $user['id'])
        {
            echo $prof['id'];
            echo "<br />";
            // FOR TESTING PURPOSES
            echo "other user";
        }

        elseif($session_id == $user['id'])
        {
            echo $user['id'];
            echo "<br />";
            // FOR TESTING PURPOSES
            echo "hey it's me ";

        }

    } 
```

看法：

```
<div class="edit_prof_header">
// WHAT IS A GOOD WAY TO MAKE THIS DYNAMIC WITH THE `$prof` AND `$user` WITH OUT HAVING TO D O AN IF STATEMENT WITH EACH ELEMENT?
  <?php echo $user['first_name']." ".$user['last_name'];?>  
</div> 
```

模型：//也许我可以解决这里烧录和烧录的全部差异，并结合到控制器和视图中？？？？？？

```
public function user() 
        {
            $session = $this->session->userdata('is_logged_in');
            $user_id = $this->session->userdata('id');

            $query = $this->db->query("SELECT * FROM users WHERE id=$user_id LIMIT 1");
            if($query->num_rows()==1)
            {
               $data = $query->result_array();
               return $data[0];
            //above returns the single row you need to the controller as an array.
            //to the $data['user'] variable.

            }

        }
        public function prof() 
            {
                $session = $this->session->userdata('is_logged_in');
                $user_id = $this->session->userdata('id');

                $query = $this->db->query("SELECT * FROM users WHERE id=$user_id LIMIT 1");
                if($query->num_rows()==1)
                {
                   $data_prof = $query->result_array();
                   return $data_prof[0];
                //above returns the single row you need to the controller as an array.
                //to the $data['user'] variable.

                }

            } 
```

提前致谢。

***编辑//试图让 id 附加到 url

```
$this->load->view('includes/templates/profile_template', $data);
$this->load->helper('date');
$this->load->library('session');
$session_id = $this->session->userdata['id'];
$this->load->model('account_model');
//USER ID LOOKING AT OWN PROFILE
$data_user['user'] = $this->account_model->user();
$user['id'] = $this->uri->segment(3);
echo $user['id'];
$data['profile_icon'] = 'profile';
$data['main_content'] = 'account/profile/'.$user['id']; 
```

***编辑路线

```
route['default_controller'] = "home";
$route['404_override'] = '';
$route['profile/:num'] = "auth/profiles"; 
```

//控制器

```
public function profile() 
    {

        $this->load->helper('date');
            $this->load->library('session');
        $session_id = $this->session->userdata['id'];
        $this->load->model('account_model');
        $user = $this->account_model->user();
            $data['user'] = $user;
        $user['id'] = $this->uri->segment(4);
        $data['profile_icon'] = 'profile';
        $data['main_content'] = 'account/profile/'.$user['id'];
        $this->load->view('includes/templates/profile_template', $data);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:07:08.417

首先，我认为不需要像那样切换 ID，老实说，它没有任何实际用途。如果您正在查看个人资料，则无论是您的个人资料还是其他人的个人资料，您都可以通过 userId 进行查看。如果您希望能够编辑个人资料页面，您只需检查个人资料的 userId 是否与会话 userId 匹配即可。

例如，在您看来，您可以有一个链接：

```
<?php
    if($user['userId']==$this->session->userdata('userId'))
    {
        echo '<a href="users/edit_user/'.$user['userId'].'">Edit my profile</a>';
    } 
```

在进行任何保存之前，您还需要再次检查 userId 是否与会话匹配。顺便说一句，您将如何创建一个附加了 userId 的链接，以在控制器中使用该链接，您将检查 uri 段，因此如下所示：

示例网址：www.example.com/profiles/view_profile/23

```
$userId = $this->uri->segment(3); 
```

**了解 uri 段。** 我认为有时人们会对 URI 段感到困惑。你的 base_url 是 0，你从那里开始数。只要您记住 base_url 始终为 0，它在实际 URL 结构中的位置并不重要。例如，如果您的基本 URL 是 www.example.com/hello/world 那么 uri 段 1 位于 world NOT .com 之后.

您还做了很多初学者的事情，老实说，我不知道为什么我总是看到向人们展示的教程。

```
 $prof = $this->account_model->prof();
    $data_prof['prof'] = $prof; 
```

为什么不这样做？设置变量设置变量的目的是什么？：

```
 $data_prof['prof'] = $this->account_model->prof(); 
```

同样在您的用户查询中取出 LIMIT 。这将确保即使您的查询与多个结果匹配，您也只能得到一个结果，您应该确保您不能始终拥有多个具有相同 ID 的用户，但是在查询中使用该 ID 有点违背了if num rows 语句。无论如何，你都会得到 1 或 0。

# c++ - 如何确定宽字符串文字的字节顺序？

> ID：14694828
> 
> 赞同：0
> 
> 时间：2013-02-04T20:16:08.960
> 
> 标签：c++, c, string, unicode, character-encoding

我知道这个问题与编译器有关。所以我想要一个可靠的方法来确定。

例如：

```
const wchar_t str[] = L"飞流直下三千尺"; 
```

我怎么知道`str`是小端还是大端？

是否有编译器保证宽字符串文字的字节序与目标体系结构相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:34:49.423

没有编译器保证`wchar_t`甚至*具有*字节顺序（或者它是 Unicode，就此而言）。

# c - C 中的 Fork() 和 && 短路

> ID：14694830
> 
> 赞同：-1
> 
> 时间：2013-02-04T20:16:10.800
> 
> 标签：c, fork

我了解 fork，需要帮助了解原因

```
if(fork() && !fork()) 
```

不评估第一个子进程中的第二个 fork 过程。

Parent 返回 [X|x>0] ^ ![Y|y>0]
child.0 返回 0 并且不调用第二个 fork 过程
child.1 返回 [X|x>0] ^ !0

为什么 child.0 不调用第二个 fork 过程？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:18:21.773

如果左操作数的`&&`计算结果为 0（假），那么无论右操作数的值如何，整个表达式都将计算为 0（假），因此根本不计算右操作数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:18:30.970

您正在使用`&&`运算符，并且一旦评估返回 0，if 就会立即终止。基本上，如果从左到右执行，并且在`&&`运算符的情况下，一旦遇到 0（或 false），就会立即终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:20:36.383

`fork()`当第一个返回 0 时不会调用第二个，因为无论返回什么，`fork()`布尔表达式都将始终为 0 。因此，为了提高性能，第二个是短路而不执行。`(0 && fork())``fork()``fork()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T21:33:12.690

当您说孩子返回某些东西时， fork() 的返回值并不是您似乎认为的孩子返回的值。要检查您是否必须使用 wait()。

# python - 堆栈迭代python3

> ID：14694834
> 
> 赞同：0
> 
> 时间：2013-02-04T20:16:34.040
> 
> 标签：python, list, python-3.x, iterator, stack

好的，所以我试图在堆栈中输入一个单词，我想在输入一个字符串后打印所有这些单词。所以我一次只能打印一个。我尝试在外面使用 for 循环，但 Stacks 显然不可迭代。所以我在堆栈中迭代它。它仍然无法正常工作。

```
class Stack:

    def __init__(self):
        self.items = []
    def push(self,items):
        self.items.insert(0,items)
    def pop(self):
        for x in self.items:
            print( self.items.pop(0))

    def show(self):
        print (self.items)

s = Stack()
s.show()
placed = input("enter")

item = s.pop()
print(item, "is on top", s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:29:40.267

给你的`Stack`类一个[`__len__`方法](http://docs.python.org/3/reference/datamodel.html#object.__len__)，这将使堆栈是否为空的测试更容易：

```
class Stack:
    def __init__(self):
        self.items = []

    def push(self,item):
        self.items.append(item)

    def pop(self):
        return self.items.pop()

    def show(self):
        print (self.items)

    def __len__(self):
        return len(self.items)

stack = Stack()

stack.push('World!')
stack.push('Hello')

while stack:  # tests the length through __len__
    print(stack.pop()) 
```

请注意，我只是简单地`.append()`到`.items`列表的末尾，然后`.pop()`（没有参数）再次从列表的末尾删除。

要使您的类[成为可迭代类型](http://docs.python.org/3/library/stdtypes.html#typeiter)，您至少需要添加一个[`__iter__`方法](http://docs.python.org/3/library/stdtypes.html#container.__iter__)，可选地与一个[`.__next__()`方法](http://docs.python.org/3/library/stdtypes.html#iterator.next)一起添加：

```
class Stack:
    # rest elided

    def __iter__(self):
        return self

    def next(self):
        try:
            return self.items.pop()
        except IndexError:  # empty
            raise StopIteration  # signal iterator is done 
```

# php - 以root身份运行php脚本

> ID：14694835
> 
> 赞同：0
> 
> 时间：2013-02-04T20:16:35.137
> 
> 标签：php, linux

我知道一些像 kloxo 这样的程序以 root 身份运行他们的 php 程序，并带有一个与主 apache web 服务器分开的 lighttpd。但是当我谷歌它有一个用于防火墙管理的 php 脚本并以 root 身份运行时，有人说你不应该以 root 权限运行 Web 服务器。

我想知道，kloxo 如何毫无问题地使用它？以及使用 php 脚本管理 iptables 的最佳解决方案是什么（如何在具有 root 权限的 php exec() 中运行命令）？ **还有一些 php 函数，比如`fopen`编辑文件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:37:19.633

如果您想允许非 root 用户以 root 身份运行**adduser**之类的东西，并且您有权编辑 sudoers 文件（例如，使用**visudo**），您可以授予用户使用**[sudo](http://www.sudo.ws/sudoers.man.html)**执行特定命令的权限。在您的 sudoers 文件中，您将拥有如下条目：

```
www-user ALL=NOPASSWD: /usr/sbin/adduser 
```

这将允许用户**www-user** root 访问**/usr/sbin/adduser**而无需输入密码。然后，您可以在脚本中使用您喜欢的方法调用它：

```
$output = `/usr/bin/sudo /usr/sbin/adduser <other_arguments>`; 
```

我不会真的推荐这个，因为如果有人破坏了您的网络服务器用户帐户，他们可以在您的系统上创建新用户，但是如果您绝对**需要**它，那就是您的做法。

# c++ - C++ SFML tcp 发送和接收

> ID：14694850
> 
> 赞同：0
> 
> 时间：2013-02-04T20:17:23.150
> 
> 标签：c++, sockets, tcp, packet, sfml

我正在制作一个游戏，我有 2 个客户端和一个服务器。当我在游戏中移动时，我将数据发送到服务器（1-left，2-up，3-right，4-down）。服务器向前发送到另一个客户端。

这是服务器：

```
#include <iostream>
#include <SFML/Network.hpp>
#include <SFML/System.hpp>
using namespace std;

void recAndGive(sf::SocketTCP fromSock, sf::SocketTCP toSock)
{
   sf::Packet Packet;
   if(fromSock.Receive(Packet) == sf::Socket::Done)
   {
       toSock.Send(Packet);
   }

}

int main()
{
   cout << "Server is running. [192.168.1.100] [4567]" << endl << endl;
   sf::IPAddress Client1_ip;
   sf::IPAddress Client2_ip;

   sf::SocketTCP Client1;
   sf::SocketTCP Client2;

   sf::SocketTCP Listener;

   if(!Listener.Listen(4567))
       return 1;

   cout << "Server is listenig to port 4567, waiting for connections..." << endl;

   //waiting for client1
   Listener.Accept(Client1,&Client1_ip);
   cout << "Client connected : " << Client1_ip << endl;

   //waiting for client2
   Listener.Accept(Client2,&Client2_ip);
   cout << "Client connected : " << Client2_ip << endl;

   while(true)
   {
       recAndGive(Client1,Client2);
       recAndGive(Client2,Client1);
   }

   return 0;
} 
```

效果不好。服务器在我的 PC 上运行，客户端在我的笔记本电脑上运行。如果我启动两个客户端并移动一个客户端，我会在每个客户端中以错误的顺序收到错误的数据包（？）。

如果我删除这一行：

```
recAndGive(Client2,Client1); 
```

然后我启动了两个客户端，并与第一个客户端一起移动，然后我在第二个客户端上收到了完美的数据。问题是什么？请帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T12:35:13.323

[http://sfml-dev.org/tutorials/2.1/network-socket.php](http://sfml-dev.org/tutorials/2.1/network-socket.php)

如果您使用本指南，您应该没有任何问题。

我遇到的唯一问题是，当我添加 like`packet << coorX << coorY`并打开该数据包`packet >> p2CoorX >> p2CoorY`时，我遇到了一个大问题，问题是，数据包根本没有清理。所以它将 coorX 和 coorY 放入数据包中，并且它一次又一次地这样做......数据包变得非常大，而当它变得越来越大时，接收部分（`packet >> p2CoorX >> p2CoorY`）只读取前两个变量。

那是我的问题，但我使用`packet.clear();`

# java - 被覆盖的方法可以在返回类型上有所不同吗？

> ID：14694852
> 
> 赞同：165
> 
> 时间：2013-02-04T20:17:28.143
> 
> 标签：java, methods, overriding

被覆盖的方法可以有*不同的返回类型*吗？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2013-02-04T20:18:47.020

Java 支持重写方法的协变返回类型^。这意味着被覆盖的方法可能具有*更*具体的返回类型。也就是说，只要新的返回类型可以分配给您要覆盖的方法的返回类型，它就被允许。

例如：

```
class ShapeBuilder {
    ...
    public Shape build() {
    ....
}

class CircleBuilder extends ShapeBuilder{
    ...
    @Override
    public Circle build() {
    ....
} 
```

这[在 Java 语言规范的第 8.4.5 节](http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.5)中指定：

> 如果返回类型是引用类型，则返回类型可能会因相互覆盖的方法而异。return-type-substitutability 的概念支持协变返回，即将返回类型特化为子类型。
> 
> 当且仅当以下条件成立时，具有返回类型 R1 的方法声明 d1 可以返回类型替代具有返回类型 R2 的另一个方法 d2：
> 
> *   如果 R1 无效，则 R2 无效。
>     
>     
> *   如果 R1 是原始类型，则 R2 与 R1 相同。
>     
>     
> *   如果 R1 是引用类型，则：
>     
>     
>     *   R1 是 R2 的子类型，或者 R1 可以通过未经检查的转换（第 5.1.9 节）转换为 R2 的子类型，或者
>         
>         
>     *   R1 = |R2|

（“|R2|”指的是 R2 的擦除，如[JLS 的§4.6 中](http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.6)所定义。）

* * *

^(* 在 Java 5 之前，Java 具有*不变*的返回类型，这意味着方法覆盖的返回类型需要与被覆盖的方法完全匹配。)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-12-11T09:02:14.300

是的，它可能会有所不同，但有一些限制。

在 Java 5.0 之前，当您覆盖一个方法时，参数和返回类型必须完全匹配。Java 5.0 它引入了一种称为协变返回类型的新工具。您可以覆盖具有相同签名的方法，但返回返回对象的子类。

换句话说，子类中的方法可以返回一个对象，该对象的类型是该方法返回的类型的子类，在超类中具有相同的签名。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-02-04T20:20:57.467

是的，如果他们返回一个子类型。这是一个例子：

```
package com.sandbox;

public class Sandbox {

    private static class Parent {
        public ParentReturnType run() {
            return new ParentReturnType();
        }
    }

    private static class ParentReturnType {

    }

    private static class Child extends Parent {
        @Override
        public ChildReturnType run() {
            return new ChildReturnType();
        }
    }

    private static class ChildReturnType extends ParentReturnType {
    }
} 
```

此代码编译并运行。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-06-10T03:26:47.497

从广义上讲，是的，覆盖方法的返回类型可以不同。但这并不是直截了当的，因为其中涉及一些案例。

情况 1：如果返回类型是原始数据类型或 void。

输出：如果返回类型为 void 或原始类型，则父类方法和覆盖方法的数据类型应该相同。例如，如果返回类型是 int、float、string 那么它应该是相同的

情况2：如果返回类型是派生数据类型：

输出：如果父类方法的返回类型是派生类型，那么覆盖方法的返回类型是与派生数据类型相同的子类的派生数据类型。例如，假设我有一个类 A，B 是 A 的子类，C 是 B 的子类，D 是 C 的子类；那么如果超类返回类型 A，那么子类中的覆盖方法可以返回 A 或 B/C/D 类型，即它的子类型。这也称为协方差。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-01T17:44:11.943

是有可能..只有当父类方法返回类型是子类方法返回类型的超类型时，返回类型才能不同..
意味着

```
class ParentClass {
    public Circle() method1() {
        return new Cirlce();
    }
}

class ChildClass extends ParentClass {
    public Square method1() {
        return new Square();
    }
}

Class Circle {

}

class Square extends Circle {

} 
```

* * *

如果这是那么可以允许不同的返回类型......

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-03-16T13:25:27.990

[其他答案都是正确的，但令人惊讶的是，这里都忽略了理论方面：返回类型可以不同，但​​由于Liskov Substitution Principle](https://en.wikipedia.org/wiki/Liskov_substitution_principle)，它们只能**限制**超类中使用的类型。

这非常简单：当您有调用某个方法的“客户端”代码时：

```
int foo = someBar.bar(); 
```

然后上面的内容必须起作用（并且`int`无论`bar()`调用哪个实现都返回一些东西）。

含义：如果有一个 Bar 子类覆盖，`bar()`那么您仍然必须返回不会破坏“调用者代码”的东西。

换句话说：假设基础`bar()`应该返回 int。然后一个子类可以返回`short`- 但不是`long`因为调用者可以很好地处理一个`short`值，但不是`long`！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-02T08:52:44.840

好吧，答案是肯定的……而且不是。

取决于问题。这里的每个人都回答了关于 Java >= 5 的问题，有些人提到 Java < 5 不具有协变返回类型。

实际上，Java 语言规范 >= 5 支持它，但 Java 运行时不支持。特别是，JVM 没有更新以支持协变返回类型。

在当时被视为“聪明”的举动，但最终成为 Java 历史上最糟糕的设计决策之一，Java 5 实现了一系列新的语言特性，而根本没有修改 JVM 或类文件规范。相反，所有功能都是在 javac 中用诡计实现的：编译器为嵌套/内部类生成/使用普通类，为泛型生成/使用普通类，为泛型生成/使用类型擦除和强制转换，为嵌套/内部类私有“友谊”合成访问器，为外部“this”合成实例字段指针、“.class”字面量的合成静态字段等。

协变返回类型是 javac 添加的更多语法糖。

例如，在编译时：

```
class Base {
  Object get() { return null; }
}

class Derived extends Base {
  @Override
  @SomeAnnotation
  Integer get() { return null; }
} 
```

javac 会在 Derived 类中输出两个 get 方法：

```
Integer Integer:Derived:get() { return null; }
synthetic bridge Object Object:Derived:get() { return Integer:Derived:get(); } 
```

生成的桥接方法（标记`synthetic`和`bridge`字节码）实际上是覆盖`Object:Base:get()`的，因为对于 JVM，具有不同返回类型的方法是完全独立的，不能相互覆盖。为了提供预期的行为，桥简单地调用你的“真实”方法。在上面的示例中，javac 将使用 @SomeAnnotation 注释 Derived 中的桥接方法和真实方法。

请注意，您不能在 Java < 5 中手动编写此解决方案，因为桥方法和实方法仅在返回类型上有所不同，因此它们不能在 Java 程序中共存。但是在 JVM 世界中，方法返回类型是方法签名的一部分（就像它们的参数一样），因此两个名称相同并采用相同参数的方法仍然被 JVM 视为完全独立，因为它们的返回类型不同，并且可以共存。

（顺便说一句，字段的类型同样是字节码中字段签名的一部分，因此在单个字节码类中具有多个不同类型但名称相同的字段是合法的。）

所以要完全回答你的问题：JVM 不支持协变返回类型，但 javac >= 5 在编译时用甜美的语法糖涂层伪造它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-04T20:36:26.997

返回类型必须与超类的原始重写方法中声明的返回类型相同，或者是其子类型。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-04T21:00:47.687

**覆盖和返回类型，以及协变返回**
子类必须定义一个与继承版本完全匹配的方法。或者，从 Java 5 开始，您可以在

## 示例代码

```
 class Alpha {
          Alpha doStuff(char c) {
                  return new Alpha();
              }
           }
             class Beta extends Alpha {
                    Beta doStuff(char c) { // legal override in Java 1.5
                    return new Beta();
                    }
             } } 
```

Java 5，此代码将编译。如果您尝试使用 1.4 编译器编译此代码，则会说尝试使用不兼容的返回类型 – sandeep1987 1 分钟前

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-23T20:09:47.240

是的，有可能

```
class base {

 base show(){

System.out.println("base class");

return new base();

}
}

class sub extends base{

sub show(){

    System.out.println("sub class");

    return new sub();

 }
}

class inheritance{

 public static void main(String []args) {

        sub obj=new sub();

            obj.show();
 }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-05T13:47:05.827

是的。被覆盖的方法可能有不同的返回类型。

但是限制是被覆盖的方法必须有一个比实际方法的返回类型更具体的返回类型。

所有答案都给出了重写方法的示例，该方法具有返回类型，该返回类型是实际方法的返回类型的子类。

例如 ：

```
public class Foo{

   //method which returns Foo
  Foo getFoo(){
      //your code         
  }

}

 public class subFoo extends Foo{

  //Overridden method which returns subclass of Foo
  @Override
  subFoo getFoo(){
      //your code         
  }

} 
```

但这不仅限于子类。即使实现接口的类也是接口的特定类型，因此可以是预期接口的返回类型。

例如 ：

```
public interface Foo{

   //method which returns Foo
  Foo getFoo();

}

 public class Fizz implements Foo{

  //Overridden method which returns Fizz(as it implements Foo)
  @Override
  Fizz getFoo(){
      //your code         
  }

} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-12T07:24:46.680

```
class Phone {
    public Phone getMsg() {
        System.out.println("phone...");
        return new Phone();
    }
}

class Samsung extends Phone{
    @Override
    public Samsung getMsg() {
        System.out.println("samsung...");
        return new Samsung();
    }

    public static void main(String[] args) {
        Phone p=new Samsung();
        p.getMsg();
    }
} 
```

# php - php看不到图片

> ID：14694854
> 
> 赞同：1
> 
> 时间：2013-02-04T20:17:29.410
> 
> 标签：php, html, css

这是我的 php：

```
 <html>
 <head>
</head>
<body>
<?php 
include ('source\visuose\navigation.php');`enter code here`
include('source\visuose\social.php')
?>
</body>
 </html> 
```

导航：

```
 <html xmlns="http://www.w3.org/1999/xhtml", lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../css/style.css" /> 
```

社会的：

```
<body>

  <div id="facebook"> 
   <a href="http://www.facebook.com" target="_blank">
   <img src="../../images/facebook-logo.jpg" width="81" height="36" />
     </a>

   </div><!--facebook ends-->

</body>
</html> 
```

为什么，运行php时看不到图片？只有一个空白框，但我可以按下它们并转到我的href？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:24:55.567

如果没有看到你的文件结构就无法确定，但这就是它的样子；

您的“主要” php 在服务器根目录中`/main.php`，包括`source\visuose\social.php`. *由于包含*social.php ，浏览器认为它是`/main.php`.

social.php 为浏览器提供了一个相对路径`../../images/facebook-logo.jpg`，但由于浏览器认为它`/main.php`包含它，它会从该文件相对导航，而不是`source\visuose\social.php`. 当浏览器导航您的相对路径时，它没有指向任何有用的东西。

您还应该检查生成页面的来源，现在您有多个 html 和 body 标签以一种奇怪的方式相互包裹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:21:54.337

它必须与图像的路径有关。在 Firefox 中，您只需右键单击图像并选择显示图像。要查看它指向的位置（也就是来自）并检查图像的预期 URL 是什么？

然后相应地修复您的图像路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:23:12.573

这不是 PHP 问题 修复图像的 src

```
 <img src="../../images/facebook-logo.jpg" width="81" height="36" /> 
```

它会工作

# rhino - 如何在 Javascript 中为 E4X 对象动态添加属性和值（在 Rhino 上编译）？

> ID：14694863
> 
> 赞同：1
> 
> 时间：2013-02-04T20:17:47.083
> 
> 标签：rhino, e4x

我想创建一个 e4x 对象。我想动态地继续为其添加属性并在以后添加值。例如 `var node = <node />;` //一些代码 1) 将属性添加到“节点” 2) 将值添加到“节点”

我还找到了 Flex3 的此类示例，但没有找到 Javascript 的示例。任何进一步的文件也将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T22:21:55.320

如果要添加属性或值

```
var node = <node/>
node.@id = 123
node.toXMLString()
//returns
//<node id="123"/> 
```

如果您想添加动态命名的属性，请使用方括号

```
node.@["prioritory"] = "high"
//returns
//<node id="123" prioritory="high"/> 
```

添加子元素也是一样的

```
node.description = "Warning"
node.toXMLString()
//<node id="123" prioritory="high">
//  <description>Warning</description>
//</node>

node["location"] = "R23"
node.toXMLString()
//<node id="123" prioritory="high">
//  <description>Warning</description>
//  <location>R23</location>
//</node> 
```

我发现此链接在尝试刷新我的 e4x [http://wso2.org/project/mashup/0.2/docs/e4xquickstart.html时很有帮助](http://wso2.org/project/mashup/0.2/docs/e4xquickstart.html)

# php - og：图像被忽略

> ID：14694865
> 
> 赞同：1
> 
> 时间：2013-02-04T20:17:52.247
> 
> 标签：php, facebook, facebook-opengraph

突然间，我的所有网站都开始显示 3 张图片以在 facebook 上共享一个链接，而不是 og:image 中定义的那个。

linter 显示 og:image 已定义，我没有警告其尺寸，因为它的大小为 200x200px。

例如：

网址：[http ://alertasaude.com/](http://alertasaude.com/)

调试：[https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Falertasaude.com%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Falertasaude.com%2F)

如果你把它贴在墙上，它会显示 3 张不同的图像（在这种情况下，第三张是在 og:image 上定义的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:12:08.497

几周前一切都还好，即使有超过 3 张图片。

我所做的，试图解决这个最近的问题，是创建 5 张所有相同尺寸 500x300 的图像，在里面粘贴和调整照片。然后创建具有不同名称的 og:image 标签。

Linter 识别所有图像（无错误）并创建缩略图。但是在 facebook 上分享页面时，我只得到 3 个缩略图。如果我在 html 代码中重新排序图像，并再次签入 linter，我会遇到不同图像的相同问题。我还尝试更改文件名（仅使用 -、_、数字和字母）我连续做了 5 或 6 次，结果相同。

有没有人有解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:24:51.093

我有同样的问题。我的页面有一个 og:image 大小低于 200 像素...我通过定向到图像的兼容版本来修复它。现在我的 Linter 数据显示正确无误，但三图像的事情仍然发生。

Fb 曾经允许您使用 50x50，但我猜他们正在改变他们的要求，并且不知何故 Linter 数据没有正确刷新。尝试定向到 200x200 并交叉手指使其在下一次爬行中得到修复。

# layout - 内联图像低于填充文本的 span 元素（两者都在内部 在列表中）

> ID：14694869
> 
> 赞同：0
> 
> 时间：2013-02-04T20:18:11.383
> 
> 标签：layout, css

我遇到了奇怪的情况。我有一个列表，每个列表项都包含跨度和图像元素。它们都是内联的，只要 span 为空，它们就彼此相邻，但是当 span 有文本时，图像就像 display:block 一样，落在 span 元素下方，这不是我想要的效果。（我用文本动态填充跨度）

```
 <ul id="playerListInsideRoom">
    <li class="playerCircleInsideRoom circleFull" seatnumber="1">
        <img src="~/Images/Lobby/successGray.png" alt="image" /><span>    </span></li>
    <li class="playerCircleInsideRoom circleEmpty" seatnumber="2">
        <img src="~/Images/Lobby/successGray.png" alt="image" /><span></span></li>
    <li class="playerCircleInsideRoom circleEmpty" seatnumber="3">
        <img src="~/Images/Lobby/successGray.png" alt="image" /><span></span></li>
    <li class="playerCircleInsideRoom circleEmpty" seatnumber="4">
        <img src="~/Images/Lobby/successGray.png" alt="image" /><span></span></li>
</ul>

 .playerCircleInsideRoom span{
 position:relative;
 left:50px;
 }

 #playerListInsideRoom img {
 height:15px;
 width:15px; 
 display:inline-block;
 position:relative;
 right:40px;
 } 
```

即使我摆脱了相对位置，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:21:55.167

如果内联元素的宽度大于容器（您的`li`元素）的允许宽度，则该行将中断。

您可以使用`whitespace: nowrap` on`li`来防止它（尽管这可能会破坏您的其余布局）。

# java - java XML映射不工作

> ID：14694870
> 
> 赞同：0
> 
> 时间：2013-02-04T20:18:20.917
> 
> 标签：java, xml, parsing, dom

我有以下 XML：

```
<myroot>
<id>1</id>
<doc>im a doc</doc>
<src>sys</src>
</myroot> 
```

我希望能够解析地图中“myroot”中的所有内容。所以对于上面我希望我的函数返回一个映射如下 {id=1, doc=im a doc, src=sys} 我正在使用 DOM，所以请只提供一个 DOM 建议，这是我的代码：

```
//Code to init the Document here.            
....
NodeList root = document.getChildNodes();   //up here i should have myroot
NodeList elements = root.item(0).getChildNodes();  //here i should get all the nested items i want to map
for ( int x = 0; x < elements.getLength(); x++ ) {         
  map.put(elements.item(x).getNodeName(), elements.item(x).getNodeValue());
} 
```

然而，我得到的是这张地图是一个我不需要的#text 地图，我的所有值都是空的！：{#text=，doc=null，id=null，src=null}

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:33:19.457

我认为这将解决您的问题。

```
 NodeList nList = doc.getChildNodes();
        NodeList elements = nList.item(0).getChildNodes();

        for (int temp = 0; temp < elements.getLength(); temp++) {

            Node nNode = elements.item(temp);

            if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                Element eElement = (Element) nNode;
                System.out.println("Node name: " + eElement.getNodeName() + " \tValue: " + eElement.getTextContent());

            }
        } 
```

# java - 为什么这个 BufferedReader 返回空字符串而不是 null？

> ID：14694875
> 
> 赞同：1
> 
> 时间：2013-02-04T20:18:30.153
> 
> 标签：java, null, bufferedreader, string

我有一个 BufferedReader 遍历 CSV 文件的行；当它到达文件末尾时，它返回以下错误：

`Exception in thread "main" java.lang.NumberFormatException: empty String at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:992)`

如何让读者意识到它已到达文件末尾并且输入为空而不是空？我检查了文件，最后一行的末尾没有空格。

代码：

```
 File filReadMe = new File(inputFile);
    BufferedReader brReadMe = new BufferedReader(new InputStreamReader(new FileInputStream(filReadMe), "UTF-8"));

    try
    {
        String strLine;

        while ((strLine = brReadMe.readLine()) != null)
        {
            System.out.println(strLine);
            //place the line into CsvRecordFactory
            int record = csv.processLine(strLine, input); 
        }
    }
    catch (FileNotFoundException ex) {
        ex.printStackTrace();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    finally {
        //Close the BufferedReader
        try {
            if (brReadMe != null)
                brReadMe.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:48:31.233

问题不在于文件结尾。问题是您正在处理一个空白行，就好像它不是空白一样。可以想象，这可能发生在任何地方，而不仅仅是作为 EOF 之前的最后一行。在开始解析之前检查该行是否为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:27:55.363

您可以通过这种方式简单地修改您的代码：

```
while ((strLine = brReadMe.readLine()) != null)
{
    if (!strLine.isEmpty()) {
        System.out.println(strLine);
        //place the line into CsvRecordFactory
        int record = csv.processLine(strLine, input); 
    }
} 
```

这样，您的代码将忽略所有空行，而不仅仅是文件末尾的那些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:23:07.707

如果文件的末尾是换行符，请尝试将其退格到上一行的末尾，看看是否仍然出现错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:33:54.770

尝试给它一个小的*if*条件来检查字符串是否为空。

版本 1：检查字符串是否为空

```
 while ((strLine = brReadMe.readLine()) != null)
    {
          if(!strLine.isEmpty()){
              System.out.println(strLine);
              //place the line into CsvRecordFactory
              int record = csv.processLine(strLine, input); 
          }
    } 
```

我也有代码版本 2，它检查字符串是否为数字，否则如果它们是字符或空或其他任何内容，则*if*中的代码将被忽略

```
while ((strLine = brReadMe.readLine()) != null)
        {
              if(strLine.matches("\\d+")){
                  System.out.println(strLine);
                  //place the line into CsvRecordFactory
                  int record = csv.processLine(strLine, input); 
              }
        } 
```

# c - 我可以在 UDP 套接字上将 SO_RCVBUF 设置为 1

> ID：14694877
> 
> 赞同：0
> 
> 时间：2013-02-04T20:18:31.833
> 
> 标签：c, sockets, udp, setsockopt

我有一个系统，当发生某些事情时，通过 UDP 套接字将单字节消息从一个进程发送到另一个进程。在接收端，这个事件是否发生过一次、十几次甚至一百万次都无关紧要。

与其进行许多无用的 recvfrom() 调用，我想也许我可以使用 setsockopt 将 SO_RCVBUF 设置为 1，我希望这会导致系统简单地忽略除第一条消息之外的所有消息（直到它被读取从而允许另一个消息）。然而，谷歌搜索发现一些证据表明这可能不是 100% 可移植的（看起来有些系统可能会悄悄地强制执行最小尺寸？）。

所以在我开始尝试这个工作之前，我想知道是否有人知道这有多大可能起作用？如果这在任何方面都重要的话，这在 Red Hat Linux 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:27:59.933

在 linux 上，实际大小绑定在`SOCK_MIN_RCVBUF`和之间`sysctl_rmem_max`，但调用`setsockopt`永远不会失败。见[这里](http://lxr.linux.no/#linux+v3.7.6/net/core/sock.c#L647)。这包括开销，除其他外，对于`struct sk_buff`.

的值为`SOCK_MIN_RCVBUF`：

```
#define SOCK_MIN_RCVBUF (2048 + sizeof(struct sk_buff)) 
```

至于你想要做什么：AFAIK，没有读取（或关闭套接字）就无法清除接收缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:27:05.810

您假设`SO_RCVBUF`以应用程序数据的字节数为单位。对于 UDP，它不在我所知道的*任何平台上。*

# drop-down-menu - 用户控件中的下拉列表选择的索引更改事件处理程序

> ID：14694883
> 
> 赞同：0
> 
> 时间：2013-02-04T20:18:43.693
> 
> 标签：drop-down-menu, user-controls, event-handling

我有一个 UserControl:'TestControl' - 它有一个 DropDownList: 'TestDDL' 和一个 TextBox: 'TestAdditionalNotes' （控件中没有按钮或其他任何会导致回发的东西 - 我不需要回发因为大部分数据是客户端）。我在控件中为 onSelectedIndexChange 事件编写了一个事件处理程序。此控件将在“中继器控件”中使用-现在我有一个测试页：“Test.aspx”我已经在测试页上注册了此用户控件-现在我想要什么：当我更改控件中的下拉列表选定项时- 根据我的选择，文本框应该可见/不可见。但是如何从测试页面触发控件上的事件处理程序呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:45:48.937

我解决了这个问题...我的代码和正确的处理程序...只是在那个特定的测试页面上缺少一些javascripts库-telerik rad控件即下拉列表需要这些库...一旦我添加了这些文件手动...一切正常...（我通过在不同页面上尝试控制并引发事件来解决这个问题）...谢谢

# html - positioning html img tag in as3 via xml/cdata

> ID：14694888
> 
> 赞同：0
> 
> 时间：2013-02-04T20:19:01.123
> 
> 标签：html, xml, actionscript-3, xml-parsing, cdata

I've been trying to position an image tag in actionScript3 (from an xml file) like this:

```
<![CDATA[

Hey, <br/>
<img style="margin-left:200px;" src="imgs/_mamo.jpeg"/>
<p>

some text some text some text some text some text some text some text some text some text
</p>
<p>
Thanks,<br/>
web-dev.
</p>
    ]]> 
```

but as3 is not using the styling.

Is AS3 able to recognize css styling? If not how would I position the image tag?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:54:15.677

May I suggest (if you aren't married to pure ActionScript for your project) that you check ou the following link...

[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf62883-7ff2.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf62883-7ff2.html)

Flex has the ability to use style sheets for both components as well as text using the wonderful CSS you are used to.

Flex for AIR also provides a container for rendering above HTML 1\. FlashBuilder's proprietary MXML can also give you more freedom in mixing images with text.

# java - Java泛型：这是协方差问题吗？

> ID：14694889
> 
> 赞同：2
> 
> 时间：2013-02-04T20:19:03.533
> 
> 标签：java, spring, generics

我有这样的课：

```
public class MyClass<T>{
    private MyTape data;
    private List<T> someOtherdata;
} 
```

我正在尝试在 Android usign Spring for Android RestTemplate 中编写一个通用服务，但这会导致类型不匹配：

```
ResponseEntity<MyClass<? extends Parcelable>> test = new ResponseEntity<MyClass<MyOtherType>>(..); 
```

MyOtherType 实现 Parcelable 的地方。有办法解决这个问题吗？我的另一个解决方案是使用“较少的通用代码”和子类 MyClass

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:20:17.540

采用

```
 ResponseEntity<? extends MyClass<? extends Parcelable>> 
```

代替

```
 ResponseEntity<MyClass<? extends Parcelable>> 
```

# c# - NHibernate - 加入 2 个表并搜索

> ID：14694901
> 
> 赞同：1
> 
> 时间：2013-02-04T20:19:44.213
> 
> 标签：c#, sql, nhibernate

我正在尝试为 NHibernate 创建 SQL 查询：

SQL 看起来像这样：

```
Select p.*
From PPoint p
Inner join PPFile f on p.ImportID = f.ImportID
where p.Name like '%a%'
Or p.Code like '%a%'
Or f.FileName like '%a%' 
```

找不到一个像样的例子，即使听起来很容易做到。

目前我有：

```
 var pointList = session
            .CreateCriteria(typeof(PPoint))
           .Add(Restrictions.Or(Restrictions.Or(Restrictions.Or(Restrictions.Or
                Restrictions.Like("Name", "%" + search + "%"),
                Restrictions.Like("Code", "%" + search + "%")),
                Restrictions.Like("Test", "%" + search + "%")),
                Restrictions.Like("Test2", "%" + search + "%")),
                Restrictions.Like("FileName", "%" + search + "%")))
            .List<PPoint>(); 
```

NHibernate 2.2 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:26:27.477

找到解决方案：

```
var pointList = session
                .CreateCriteria(typeof(PPoint), "p")
                .CreateAlias("ImportFile", "f", NHibernate.SqlCommand.JoinType.InnerJoin)
                .Add(Restrictions.Disjunction()
                    .Add(Restrictions.Like("p.Name", search, MatchMode.Anywhere))
                    .Add(Restrictions.Like("p.Code", search, MatchMode.Anywhere))
                    .Add(Restrictions.Like("p.Test1", search, MatchMode.Anywhere))
                    .Add(Restrictions.Like("p.Test2", search, MatchMode.Anywhere))
                    .Add(Restrictions.Like("f.FileName", search, MatchMode.Anywhere)))
                .List<PPoint>(); 
```

主要是在映射文件中描述关系：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="AAA.Data"
                   namespace="AAA.Data.Domain">

  <class name="PPoint" lazy="true">
    <id name="PPointID" />
    <!--<property name="ImportID" />-->
    <many-to-one name="ImportFile" column="ImportID" not-null="true" cascade="all-delete-orphan" />

    <property name="Code" />
    <property name="Test1" />

    ...
  </class> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:26:45.280

您使用的是 nHibernate 3.0 或更高版本吗？这种查询非常适合[QueryOver API](http://nhforge.org/blogs/nhibernate/archive/2009/12/17/queryover-in-nh-3-0.aspx)。

```
string searchString = string.Format("%{0}%", search);
PPoint ppointAlias = null;
PPFile ppFileAlias = null;
var pointList = session.QueryOver<PPoint>(() => ppointAlias)
                       .JoinQueryOver<PPFile>(ppPoint => ppPoint.ImportFile, () => ppFileAlias)
                       .Where(
                                 Restrictions.On(() => ppointAlias.Name).IsLike(searchString))
                                              ||
                                 Restrictions.On(() => ppointAlias.Code).IsLike(searchString))
                                              ||
                                 Restrictions.On(() => ppFileAlias.FileName).IsLike(searchString))
                              )
                        .List(); 
```

# gradle - 在构建失败时强制执行 taskReport？

> ID：14694903
> 
> 赞同：2
> 
> 时间：2013-02-04T20:19:50.620
> 
> 标签：gradle

Gradle 1.4 有新的测试报告聚合任务： [http ://www.gradle.org/docs/current/release-notes#stand-alone-test-report-task](http://www.gradle.org/docs/current/release-notes#stand-alone-test-report-task)

```
task testReport(type: TestReport) {
    destinationDir = file("$buildDir/reports/all-tests")
    reportOn subprojects*.test
} 
```

即使构建失败，有没有办法让这个任务运行？目前，如果我这样做：

```
taskReport.dependsOn test
build.dependsOn taskReport 
```

它仅在构建成功时执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:32:26.313

首先是好消息：Gradle 任务模型即将推出的增强功能（目前计划在 Gradle 1.6 中使用）将解决这个和类似的用例。

同时，可能性是有限的。一种选择是与 一起运行`--continue`，尽管这也将继续执行其他任务。另一个可能的选择是注册一个[`org.gradle.api.execution.TaskExecutionListener`](http://gradle.org/docs/current/javadoc/org/gradle/api/execution/TaskExecutionListener.html)(via `gradle.project.addListener()`) 并在任务失败`testReport.generateReport()`后让它调用。`Test`尽管不鼓励直接调用任务（并且通常不会产生预期的行为），但在这种特殊情况下它可能会作为临时解决方法。

# scale - 处理 scale() shape() 和 shapeMode() 不适合屏幕角落的图像。选择？

> ID：14694905
> 
> 赞同：0
> 
> 时间：2013-02-04T20:20:00.880
> 
> 标签：scale, processing, shape

我对处理很陌生，但我想制作一个带有交互式地图的网页，这似乎是唯一/更简单的方法。

我学到了一点，它真的很酷，但是在绘制图像（至少是 SVG 图像）时，scale() 和 shape() 函数似乎存在一些问题。

我尝试了以下代码，通过注释`worldMap.scale(xScale, yScale);`行打开或关闭。事实上，我尝试了更多的东西，但要正确获取地图是不可能的。即使您正确获得了比例，阿拉斯加的部分地区也不会出现。

```
PShape worldMap;
float xScale;
float yScale;

void setup() {
  size(900, 500);
  worldMap = loadShape("https://upload.wikimedia.org/wikipedia/commons/e/e8/BlankMap-World6-Equirectangular.svg");
  xScale = width / worldMap.width;
  yScale = height / worldMap.height;
  //worldMap.scale(xScale, yScale);
  smooth(); // Improves the drawing quality of the SVG
  noLoop();
}

void draw() {
  background(255);
  translate(0, 0);
  // Draw the full map
  shapeMode(CORNERS);
  shape(worldMap, 0, 0, 900, 500);
  //saveFrame("map output.png");
} 
```

知道我做错了什么吗？我已经为这个“小”问题浪费了几个小时。从我在 SO 中阅读的一些寻找解决方案的帖子中，似乎表明 Processing 中的 scale() 函数存在一些问题，但我无法从他们那里得到问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:16:18.300

在检查了处理和 SVG 源之后，看起来这个 SVG 有点像骗子。它有一个尺寸与其“高度”和“宽度”属性不同的视图框，这些属性是 Processing 用来确定形状 .width 和 .height 的属性...

事实证明，高度和宽度分别设置为 432 和 855，但实际尺寸实际上分别是 1396 和 2500，所以无论您尝试什么，它总是看起来错误，除非您将此文件作为 XML 文件加载并检查“viewbox”属性报告的渲染尺寸，然后使用这些，而不是形状的 .width 和 .height 属性。

所以你的方法是正确的！SVG 文件只是一个不幸的测试图像。

# javascript - JS 交互式地图：显示状态名称和创建链接

> ID：14694906
> 
> 赞同：0
> 
> 时间：2013-02-04T20:20:04.190
> 
> 标签：javascript

我正在尝试自定义此地图：http: [//jsfiddle.net/allankiezel/FJrNN/](http://jsfiddle.net/allankiezel/FJrNN/)

我不能做的是：

1.  在鼠标悬停时显示每个状态的名称或缩写
2.  将每个状态链接到一个单独的 URL（而不是在点击时将其变为绿色）

负责地图行为的 JS 代码：

```
var rsrGroups = [CA, OR, WA, NV, AZ, ID, UT, MT, WY, NM, CO, TX, NE, SD, ND, OK, KS, MN, IA, MO, AR, LA, WI, IL, MS, TN, KY, IN, AL, MI, FL, OH, GA, NC, VA, WV, SC, PA, MD, NJ, DE, VT, MA, CT, NH, ME, RI, NY, AK, HI];

for (var i = 0, len = rsrGroups.length; i <= len; i++) {

var el = rsrGroups[i];

el.mouseover(function() {
    this.toFront();
    this.attr({
        cursor: 'pointer',
        fill: '#990000',
        stroke: '#fff',
        'stroke-width': '2'
    });
    this.animate({
        scale: '1.2'
    }, 200);
});
el.mouseout(function() {
    this.animate({
        scale: '1.05'
    }, 200);
    this.attr({
        fill: '#003366'
    });
});
el.click(function() {
    this.animate({
        fill: 'green'
    }, 200);
});

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:26:12.337

您必须先将属性附加到数据

```
CA.attr({
    fill: '#003366',
    id: 'CA',
    name: 'CA',
    href : 'http://www.california.com',
    title : 'California'
}); 
```

如果您有这些属性，您可以在鼠标悬停功能中访问它们，现在您必须确定要在哪里显示标签，您可以在容器中执行此操作，或者如果您想在地图上执行此操作，则必须设置它也为每个状态放置属性。

您必须在 mouseover 函数中显示状态属性并将其隐藏在 mouseout 函数中。

编辑：如果你想显示一个工具提示，你可以简单地设置属性标题编辑 2：将属性设置为 href 和标题，但似乎引用干扰了 .toFront()

# c++ - ld：找不到 -lgcc_ext.10.5 的库

> ID：14694912
> 
> 赞同：9
> 
> 时间：2013-02-04T20:20:18.720
> 
> 标签：c++, gcc

我正在尝试为学校编译一个基本的 C++ 程序，当我尝试从 Mac 终端 (10.7.6) 运行它时，我收到以下消息：

```
ld: library not found for -lgcc_ext.10.5
collect2: error: ld returned 1 exit status 
```

我肯定在正确的目录中并安装了 XCode 命令行工具。这是我的命令提示符：

```
g++ -o chapter_2 hello_world.cpp 
```

这是我的基本 C++ 程序。

```
#include <iostream>

using namespace std;

int main(){

  cout << "Hello world" << endl;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-19T18:39:40.613

正如 Judd 指出的，问题在于链接器找不到 libgcc_ext.10.5。虽然我对此没有理想的解决方案，但对我有用的是使用[homebrew](http://brew.sh/)安装 gcc-4.8并使用更新的 gcc。

```
brew install gcc48 
```

我相信现在甚至还有 gcc49。使用它我能够毫无问题地编译（尽管请注意我必须`$ gcc-4.8 ...`在控制台中使用，因为它`$ gcc ...`仍然指向旧的 gcc 版本（除非你明确地改变它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T16:09:06.403

我在 OS X 10.8 上遇到了同样的问题，当前 XCode 和 gcc 都由 Homebrew 安装。

当我检查`$ which g++`它给`/usr/local/bin/g++`.

所以我评论了这条路`.bash_profile`：

```
#PATH="/usr/local/bin:${PATH}" 
```

现在`$ which g++`给出`/usr/bin/g++`，它的版本表明它来自 XCode 并且没有`ld: library not found for -lgcc_ext.10.5`错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T04:08:07.270

我不是 Mac 用户，但我认识到问题在于链接器找不到库 (libgcc_ext.10.5)，因为您的开发环境设置不正确。我希望它在 /usr/lib 或 /usr/local/lib 或类似的东西中。您可以尝试做 a`ld --help`并查看是否可以找出链接器搜索路径是如何指定的。（ld 是执行链接的程序，g++ 在编译完成时调用它。）然后在您的机器上找到该库并将该路径添加到 ld 搜索路径。

# jquery - jquery ui对话框一旦关闭就不会重新打开

> ID：14694914
> 
> 赞同：4
> 
> 时间：2013-02-04T20:20:21.567
> 
> 标签：jquery, jquery-ui

我正在尝试实现一个 jquery ui 对话框。使用[此代码](http://jsfiddle.net/N7PRp/)作为基础，我成功了。但我宁愿使用元素的类而不是 ID。因此，我将代码修改为：

```
$(document).ready(function() {
    $(".add_shipping_address").click(function() {
        console.log($(this).parents('.shipping_sector')); //correctly returns the parent fieldset
        $(this).parents('.shipping_sector').find(".shipping_dialog").dialog();
        return false;
    });
}); 
```

该对话框第一次工作，但一旦关闭，它将不会再次打开。而它在源示例中按预期工作。我怎么弄坏了它？

[jsbin](http://jsbin.com/ufaxop/1/edit)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:30:58.650

jQuery 对话框的工作方式是将对话框的 HTML 从 DOM 中的当前位置取出，并在 DOM`div`底部放置一个新的 HTML。当您打开对话框时，您的新位置定义如下。

因此您的 HTML 不在原来的位置，并且您的选择器使用`find`不会找到任何东西。

您必须`id`直接使用或类名，但如果该类有多个元素，则最好使用标识符。

我们在项目中所做的工作是为对话框制作一个带有 id 的新 div，然后我们知道它是哪一个。您可以将实际内容放入新容器中，`clone()`也可以将其放入其中。与此类似：

```
var $dialog = $('<div id="dialog-container"></div>')
var $content = $(this).parents('.shipping_sector').find(".shipping_dialog");

var $clonedContent = $(this).parents('.shipping_sector').find(".shipping_dialog").clone() // use clone(true, true) to include bound events.

$dialog.append($content); // or $dialog.append($clonedContent);

$dialog.dialog(); 
```

但这意味着您还必须稍微重组您的代码来处理它。

此外，当对话框被销毁时，它不会再次将 HTML 移回找到它的位置，因此我们必须手动将其放回原处。请注意，我们使用的是 jQuery 1.7，我不知道这在 1.9 中是否仍然是同样的问题。

对话框很难处理，但如果你使用类似于上面的东西`div`，例如创建一个自定义并给它一个唯一的 id，你就有很大的自由度。

### 打开对话框时新 HTML 的外观：

```
<div style="display: block; z-index: 1003; outline: 0px; position: absolute; height: auto; width: 300px; top: 383px; left: 86px;"
class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable"
tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-1">
    <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-1">Contact form</span>
        <a
        href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span>
            </a>
    </div>
    <div class="shipping_dialog ui-dialog-content ui-widget-content" style="display: block; width: auto; min-height: 91.03125px; height: auto;"
    scrolltop="0" scrollleft="0">
        <p>appear now</p>
    </div>
    <div class="ui-resizable-handle ui-resizable-n" style="z-index: 1000;"></div>
    <div class="ui-resizable-handle ui-resizable-e" style="z-index: 1000;"></div>
    <div class="ui-resizable-handle ui-resizable-s" style="z-index: 1000;"></div>
    <div class="ui-resizable-handle ui-resizable-w" style="z-index: 1000;"></div>
    <div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se"
    style="z-index: 1000;"></div>
    <div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1000;"></div>
    <div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1000;"></div>
    <div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1000;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-12T11:40:56.493

您当前的代码是：

```
$(".OpenDialogOnClick").dialog(); 
```

只需将其更改为：

```
$(".OpenDialogOnClick").clone().dialog(); 
```

瞧，您的 HTML 将永远不会再次被破坏/删除 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:27:36.143

可能是对话的育儿结构发生了变化。

尝试将其更改为

```
//jquery dialog functions
$(document).ready(function() {
    $(".add_shipping_address").click(function() {
        //console.log($(this).parents('.shipping_sector'));
        $(".shipping_dialog").dialog();
        return false;
    });
}); 
```

[jsbin](http://jsbin.com/ufaxop/6/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T21:00:48.570

如果您不介意每次都创建一个新对话框，则基本上可以销毁对话框并将内容移回其先前位置。这样，在下一次单击时，该过程将自行重复。

```
//jquery dialog functions
$(document).ready(function() {
    $(".add_shipping_address").click(function() {
        var sector = $(this).parents('.shipping_sector');
        sector.find(".shipping_dialog").dialog({
            close: function(event, ui) 
            { 
                $(event.target).dialog('destroy');
                $(event.target).appendTo(sector);
            }
        });
        return false;
    });
}); 
```

[jsbin](http://jsbin.com/ufaxop/13/edit)

# arrays - excel vba如何通过引用数组名称来更改数组内容

> ID：14694920
> 
> 赞同：0
> 
> 时间：2013-02-04T20:20:40.000
> 
> 标签：arrays, excel, vba, pass-by-reference

我正在尝试以下列方式更改名为 arraySrc 的数组：

```
Dim arraySrc(0 To 1) As Integer

arraySrc(0) = 1
arraySrc(1) = 2
Dim arrayTmp

arrayTmp = arraySrc
arrayTmp(0) = 0
arrayTmp(1) = 1 
```

其实我想用一个名字作为句柄，对多个数组按大小写分别进行更改，比如我有一个返回数组名的函数，我想把返回的数组名设置为arrayTmp，然后改成arrayTmp 直接使用格式 arrayTmp(0)=0 例如，希望对原始数组进行更改

但是，通过使用变体不起作用。有人可以让我知道如何实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:38:53.073

如果要更改其中的值，`arraySrc`则需要参考该数组的索引。

例如，您已经完成了。

```
arraySrc(0) = 1
arraySrc(1) = 2 
```

仅仅因为您复制`arraySrc`到`arrayTmp`，后者不会保留对 的引用`arraySrc`。

但是，如果您`arraySrc`通过函数的参数传递了 的引用，则这是可能的。

例如

```
Option Explicit

Sub myArrays()
Dim arraySrc(0 To 1) As Integer
    arraySrc(0) = 1
    arraySrc(1) = 2
    '-- the referencing
    arrayReference arraySrc
End Sub

Function arrayReference(ByRef varr() As Integer) As Variant
    If Not IsVarArrayEmpty(varr) Then
        varr(0) = 0
        varr(1) = 1
    End If
    arrayReference = varr
End Function

'--check for empty array - additional
Function IsVarArrayEmpty(anArray As Variant) As Boolean
    Dim i As Integer

    On Error Resume Next
        i = UBound(anArray, 1)
    If Err.Number = 0 Then
        IsVarArrayEmpty = False
    Else
        IsVarArrayEmpty = True
    End If
End Function 
```

![在此处输入图像描述](../Images/d11c7b11831da6d8135f617a99a9270f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T20:40:01.957

你的意思是这样的吗？ByRef 参数意味着作为参数传递的源数组也将被更改：

```
Sub test()
Dim arraySrc(0 To 1) As Integer
arraySrc(0) = 1
arraySrc(1) = 2
PassByRef arraySrc
Debug.Print arraySrc(0)
Debug.Print arraySrc(1)
End Sub

Sub PassByRef(ByRef arrayTmp() As Integer)
arrayTmp(0) = 0
arrayTmp(1) = 1
End Sub 
```

# c# - 具有录音功能的视频聊天 SDK？

> ID：14694921
> 
> 赞同：0
> 
> 时间：2013-02-04T20:20:41.673
> 
> 标签：c#, wpf, video, sdk, chat

我需要将视频聊天组件集成到我的应用程序中。我查看了 AVSPEED，但从文档看来您只能记录传入的视频流。我需要能够记录传入和传出的流。有什么建议，付费 SDK 解决方案？该应用程序是一个 C# WPF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:04:56.740

我能够找到以下 SDK，它似乎支持我需要的功能：PortSIP.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:08:13.460

转到 Flash 媒体服务器 [http://www.adobe.com/products/adobe-media-server-family.html](http://www.adobe.com/products/adobe-media-server-family.html)

请参阅此处的文档 [http://help.adobe.com/en_US/FlashMediaServer/3.5_Deving/WS5b3ccc516d4fbf351e63e3d11a0773d56e-7ff0.html](http://help.adobe.com/en_US/FlashMediaServer/3.5_Deving/WS5b3ccc516d4fbf351e63e3d11a0773d56e-7ff0.html)

# c# - SQLite 和 Linq 错误：没有这样的表

> ID：14694922
> 
> 赞同：1
> 
> 时间：2013-02-04T20:20:51.000
> 
> 标签：c#, winforms, sqlite, dblinq

我使用以下两个命令在 C#/winform 中使用 DBLinq 创建了一个 Linq 和 SQLite 应用程序：

```
DbMetal /provider:Sqlite /conn "Data Source=path\to\database.s3db" /dbml:path\to\Database.dbml 
```

和：

```
DbMetal /code:path\to\DatabaseContext.cs path\to\Database.dbml 
```

要获得与数据库的连接：

```
string dataSource = @"Data Source=" + AppDomain.CurrentDomain.BaseDirectory + "database.s3db";
var connection = new SQLiteConnection(dataSource);
Main db = new Main(connection, new SqliteVendor()); 
```

并查询数据库：

```
var user = db.User.SingleOrDefault(u => u.UserName == username); 
```

运行这行代码，我得到`No shuch table`异常：

```
no such table: main.USER
System.Data.SQLite.SQLiteException was unhandled HResult=-2147467259 Message=SQLite error
no such table: main.USER
Source=System.Data.SQLite 
ErrorCode=-2147467259
StackTrace:
    at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
    at System.Data.SQLite.SQLiteCommand.BuildNextCommand()        
    at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
    at System.Data.SQLite.SQLiteDataReader.NextResult()
    at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
    at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
    at System.Data.SQLite.SQLiteCommand.ExecuteDbDataReader(CommandBehavior behavior)
    at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
    at DbLinq.Data.Linq.Sugar.Implementation.QueryRunner.Select[T](SelectQuery selectQuery)
    at DbLinq.Data.Linq.Sugar.Implementation.QueryRunner.SelectSingle[S](SelectQuery selectQuery, Boolean allowDefault)
    at DbLinq.Data.Linq.Sugar.Implementation.QueryRunner.SelectScalar[S](SelectQuery selectQuery)
    at DbLinq.Data.Linq.Implementation.QueryProvider`1.Execute[TResult](Expression expression)
    at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
... 
```

数据库文件存在，我有表。任何想法？

# javascript - 在 node.js 中处理字节数组数据以及如何处理它

> ID：14694923
> 
> 赞同：2
> 
> 时间：2013-02-04T20:20:56.417
> 
> 标签：javascript, node.js, bytearray

我需要从套接字获取的整个字节数组数据，然后我需要将其插入到数据库中的 BLOB 中。不要问我为什么不格式化字节数组中的数据，因为我需要使用该结构。

我将字节数组数据存储到 js 数组中。我试图将它存储在缓冲区对象中，但是当我尝试将字节数组数据写入缓冲区时出现错误，因为它可以转换它。

我的问题是如何在 js 中使用字节数组的最简单方法。我有以下代码：

```
var buff =[];
sock.on('data', function(data) {
    buff.push(data);
})

sock.on('end', function() {
    console.log(data) // [<Byte Array>,<Byte Array>, ...]
}); 
```

基本上我想将我的数据插入为 [] 而不是 [,, ...]。我的问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T17:50:03.837

根据您的数据库接口，您可能能够将 JS 数组的每个元素作为单独的块进行流式传输。

**[更新]** 看起来 node.js 现在提供了[`Buffer.concat(...)`](http://nodejs.org/docs/latest/api/buffer.html#buffer_class_method_buffer_concat_list_totallength)一种将一堆缓冲区连接成一个缓冲区的方法（基本上替换了我在下面提到的“buffertools”库）。

```
var buffers = [];
sock.on('data', function(data) {
  buffers.push(data);
}).on('end', function() {
  var bytes = Buffer.concat(buffers); // One big byte array here.
  // ...
}); 
```

**[原创]** 或者，您可以使用[buffertools](https://github.com/bnoordhuis/node-buffertools)模块将所有块连接到单个缓冲区中。例如：

```
var buffertools = require('buffertools');
var buff = new Buffer();
sock.on('data', function(data) {
  buff = buff.concat(data);
}).on('end', function() {
  console.log(buff); // <Byte Array>
}); 
```

# knockout.js - 如何在淘汰赛js中设置下拉菜单的值？

> ID：14694926
> 
> 赞同：0
> 
> 时间：2013-02-04T20:21:00.703
> 
> 标签：knockout.js, knockout-mapping-plugin

我的页面中有两个下拉菜单。一个在准备就绪时加载，另一个在选择第一个下拉列表后加载。

```
var ViewModel = function() {
   var self = this;
   self.DropDownA = ko.observableArray();
   self.DropDownB = ko.observableArray();
   self.selectedDDA = ko.observable();
   self.selectedDDB = ko.observable();

   $.getJSON("api/GetA",function(result) {
      ko.mapping.fromJS(result,{},self);
   });
   self.selectedDDA.subscribe(function(value) {
      $.getJSON("api/GetB/value",function(result) {
          ko.mapping.fromJS(result,{},self);
   });
   });
} 
```

现在我的问题是，如果 A 和 B 的值设置为隐藏值，我如何预加载选定的值？我试过这个但它不起作用：

```
self.selectedDDA( $("#hiddenValue").val()); 
```

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:38:47.553

我想知道...您在哪里设置该值。我可能会确保在填充数据后设置它

```
 $.getJSON("api/GetA",function(result) {
     ko.mapping.fromJS(result,{},self);
     self.selectedDDA( $("#hiddenValue").val());
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:45:39.483

根据你的描述

> “一个在准备就绪时加载，另一个在选择第一个下拉列表后加载。”

以及您的使用：

```
self.selectedDDA( $("#hiddenValue").val()); 
```

这听起来像你可能需要重新考虑你是如何编码的。请注意，在淘汰赛或其他一些 JS 框架中，您真的不应该直接进行 DOM 读/写/更改。您应该仅在 Knockout JS 代码中表示您的模型。Knockout 将为您处理 DOM 更新。如果您提供更多代码，我可以显示更多详细信息。

# r - 如何在 R 中快速汇总多个数据帧

> ID：14694928
> 
> 赞同：0
> 
> 时间：2013-02-04T20:21:09.210
> 
> 标签：r, csv, dataframe, summary

提前感谢您对此的任何帮助。我试图简单地总结 RI 中的多个数据帧，我正在读取一个文件，该文件具有如下输出：

```
 NDC CHARGE GENERIC
4060 68382006401  43.34    true
4061 68382006401  95.04    true
4062 68382006410  16.77   false 
```

我将正在读取的 .csv 文件保存到变量“数据”中。读取数据后，我将其分为两个其他变量（“true”和“false”），具体取决于 GENERIC 列是真还是假。我想要做的是有效地总结三个不同数据框中的一些列。目前我使用：

```
sapply(data[,1:2], summarize)
sapply(true[,1:2], summarize)
sapply(false[,1:2], summarize) 
```

总结数据。这种方法现在很好，但我将有更多的变量，看起来我应该能够循环它或以某种方式连接数据帧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:34:45.410

你可以把它`data.frames`放在一个列表中，例如

```
dat <- data.frame(x=1:5,y=5:1)

datlist <- list(dat,dat,dat) 
```

然后你可以在所有 data.frames 上运行函数`lapply`：

```
lapply(datlist, function(x) sapply(x[,1:2], summary)) 
```

将所有结果重新组合在一起的一个很好的简单方法`data.frame`是使用包`plyr`：

```
library(plyr)
ldply(datlist, function(x) sapply(x[,1:2], summary)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:39:12.017

考虑到这个问题的各种歧义，这只是一个猜测，但也许：

```
sapply(data[,1:2], summarize)
sapply(data[data$GENERIC="true", 1:2], summarize)
sapply(data[data$GENERIC="false", 1:2], summarize) 
```

最好将数据对象命名为“数据”以外的名称。在这个话题上甚至有一笔财富让这种命名行为永远存在

```
 install.packages("fortunes")
 require("fortunes")
 fortune("dog") 
```

# javascript - 使用 twitter 引导程序创建工具提示/弹出框后的回调函数？

> ID：14694930
> 
> 赞同：17
> 
> 时间：2013-02-04T20:21:15.133
> 
> 标签：javascript, jquery, twitter-bootstrap

我想在使用 twitter bootstrap 创建工具提示或弹出框后对其进行操作。据我所知，没有办法做到这一点。

```
$('#selector').popover({
  placement: 'bottom'
}); 
```

例如，假设我想将创建的工具提示向上移动 5px 并从计算位置离开 5px。关于最好的方法的任何想法？

这就是我想做的：

```
$('#selector').popover({
  placement: 'bottom',
  callback: function(){
    alert('Awesome');
  }
}); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T10:51:17.467

适用于工具提示：

```
var tmp = $.fn.tooltip.Constructor.prototype.show;
$.fn.tooltip.Constructor.prototype.show = function () {
  tmp.call(this);
  if (this.options.callback) {
    this.options.callback();
  }
}

this.$('#selector').tooltip({ 
  placement: 'top', 
  callback: function() { 
    alert('hello') 
  } 
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-11T07:04:42.307

也许这在给出之前的答案时不可用，但截至 2016 年，您可以将事件附加到弹出框（功能上等同于回调）。

例如

```
$('#myPopover').on('shown.bs.popover', function () {
  // do something…
}) 
```

活动包括：

*   show.bs.popover
*   显示的.bs.popover
*   hide.bs.popover
*   hidden.bs.popover
*   插入的.bs.popover

参考[引导文档](http://getbootstrap.com/javascript/#popovers-events)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-27T16:05:35.347

发布此答案只是为了澄清工匠要求的事情，并包含 Marquez 评论中的代码。

首先你扩展 Bootstrap 的弹出框来处理一个`callback`选项。

```
var tmp = $.fn.popover.Constructor.prototype.show;
$.fn.popover.Constructor.prototype.show = function() {
    tmp.call(this); if (this.options.callback) {
        this.options.callback();
    }
} 
```

然后，您将一个`callback`属性添加到您的选项对象并使用匿名函数为其分配。

```
$('#popover-foo').popover({
    content: 'Hello world',
    callback: function () {
        alert('Hello');
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-01T10:56:51.107

其他解决方法：

1.  使用 show.bs.popover 或 shown.bs.popover 监听器
2.  在回调中，“显示”事件数据链接到保存弹出框 ID 的目标，从这里你可以做剩下的事情

    ```
    $('body')
    .popover(options)
    .on('shown.bs.popover', function(shownEvent) {
            update_popover_data(shownEvent);
    }); 
    ```

回调函数：

```
 function update_popover_data(shownEvent) {
         var id = $(shownEvent.target).attr('aria-describedby');
         $('#'+id).html('Your New Popover Content');
    } 
```

# android - 使用意图将事件插入日历

> ID：14694931
> 
> 赞同：13
> 
> 时间：2013-02-04T20:21:21.903
> 
> 标签：android

我知道这个论坛之前已经问过这个问题，但是我尝试了这里写的所有内容，但仍然没有任何效果。我想要做的是在日历中插入一个事件。由于我的设备上有多个日历应用程序，我想让用户选择哪个日历应用程序应该包含新事件，类似于用户尝试使用地图应用程序查看位置时发生的情况（用户可以选择是否激活谷歌地图，互联网，...）。因此，我必须使用 Intent。

顺便说一句，我知道只有在 SDK 版本 14 或更高版本的设备上才允许使用 Intents 将新事件插入日历。我的设备的 API 级别为 15，因此它支持日历 API。

这是我的代码：

```
Intent calendarIntent = new Intent(Intent.ACTION_INSERT);
calendarIntent.setData(Events.CONTENT_URI);
calendarIntent.putExtra(Events.TITLE, "title");
calendarIntent.putExtra(Events.EVENT_LOCATION, "address");
Calendar cal = Calendar.getInstance();
cal.set(Calendar.DAY_OF_MONTH, 1);
cal.set(Calendar.MONTH, 0);
cal.set(Calendar.YEAR, 2013);
cal.set(Calendar.HOUR_OF_DAY, 20);
cal.set(Calendar.MINUTE, 0);
calendarIntent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, cal.getTime().getTime());
cal.set(Calendar.HOUR_OF_DAY, 20);
cal.set(Calendar.MINUTE, 30);
calendarIntent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, cal.getTime().getTime());
ctx.startActivity(calendarIntent); 
```

我得到这个例外：

```
02-04 17:55:23.957: E/AndroidRuntime(3781): FATAL EXCEPTION: main
02-04 17:55:23.957: E/AndroidRuntime(3781): java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.applicat.meuchedet/com.applicat.meuchedet.MainScreenActivity}: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.INSERT dat=content://com.android.calendar/events (has extras) }
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.os.Looper.loop(Looper.java:137)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.ActivityThread.main(ActivityThread.java:4507)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at java.lang.reflect.Method.invokeNative(Native Method)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at java.lang.reflect.Method.invoke(Method.java:511)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at dalvik.system.NativeStart.main(Native Method)
02-04 17:55:23.957: E/AndroidRuntime(3781): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.INSERT dat=content://com.android.calendar/events (has extras) }
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1535)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1387)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.Activity.startActivityForResult(Activity.java:3190)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at com.applicat.meuchedet.Screen.startActivity(Screen.java:433)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at com.applicat.meuchedet.CalendarAppointmentScheduler.writeAppointmentToCalendar(CalendarAppointmentScheduler.java:137)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at com.applicat.meuchedet.MainScreenActivity.onCreate(MainScreenActivity.java:258)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.Activity.performCreate(Activity.java:4465)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
02-04 17:55:23.957: E/AndroidRuntime(3781):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
02-04 17:55:23.957: E/AndroidRuntime(3781):     ... 11 more 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-04T20:44:55.203

您捕获了 ActivityNotFoundException，因为任何活动都无法处理您的操作。

而是使用**Intent.ACTION_INSERT**尝试这样做：

```
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra(Events.TITLE, strTitle);
intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME,
                    startDateMillis);
intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME,
                    endDateMillis);
intent.putExtra(Events.ALL_DAY, false);// periodicity
            intent.putExtra(Events.DESCRIPTION,strDescription)); 
```

您可以在开发人员文档中查看其他属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-17T15:25:31.883

像这样插入一个事件

```
 Calendar beginTime = Calendar.getInstance();
    beginTime.set(2012, 0, 19, 7, 30);

    Calendar endTime = Calendar.getInstance();
    endTime.set(2012, 0, 19, 8, 30);

    Intent intent = new Intent(Intent.ACTION_INSERT)
     .setData(Events.CONTENT_URI)
     .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, 
         beginTime.getTimeInMillis())
     .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, 
         endTime.getTimeInMillis())
     .putExtra(Events.TITLE, "Yoga")
     .putExtra(Events.DESCRIPTION, "Group class")
     .putExtra(Events.EVENT_LOCATION, "The gym")
     .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)
     .putExtra(Intent.EXTRA_EMAIL, "rowan@example.com,trevor@example.com");

    startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-20T22:55:52.677

从开发人员文档中，您可以将事件添加到日历中，打开日历应用程序选择器：

```
 fun addEvent(title: String, location: String, begin: Long, end: Long) {
    val intent = Intent(Intent.ACTION_INSERT).apply {
        data = Events.CONTENT_URI
        putExtra(Events.TITLE, title)
        putExtra(Events.EVENT_LOCATION, location)
        putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, begin)
        putExtra(CalendarContract.EXTRA_EVENT_END_TIME, end)
    }
    if (intent.resolveActivity(packageManager) != null) {
        startActivity(intent)
    }
} 
```

您可以使用定义的附加项指定各种事件详细信息。关键是`intent.resolveActivity(packageManager) != null`它将始终从 Android API 30 返回 null。因此，您需要为`intent-filter`您正在使用的活动添加`INSERT`操作和指定的 mime 类型。

```
<activity ...>
<intent-filter>
    <action android:name="android.intent.action.INSERT" />
    <data android:mimeType="vnd.android.cursor.dir/event" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

**数据 URI** =`Events.CONTENT_URI`

**MIME 类型**=`"vnd.android.cursor.dir/event"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-03T11:17:19.277

您可以使用此代码，因为它首先检查是否有**可用的应用程序**可以处理此意图。

```
 fun addToCalenderAction(ctx: Context, session: ItemSession) {
    val intent = Intent(Intent.ACTION_INSERT).apply {
        data = CalendarContract.Events.CONTENT_URI
        putExtra(CalendarContract.Events.TITLE, session.title ?: "AA")
        putExtra(CalendarContract.Events.EVENT_LOCATION, session.location
                ?: "Egypt, ALex, ST23")
        putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, parseTimeOfFirebase(session.startTime
                ?: "2021-05-31T19:56:22.636+0000"))
        putExtra(CalendarContract.EXTRA_EVENT_END_TIME, parseTimeOfFirebase(endTime
                ?: "2021-05-31T21:56:22.636+0000"))

    }
    if (intent.resolveActivity(ctx.packageManager) != null) {
        ctx.startActivity(intent)
    }
} 
```

**注意**：会话是保存一些数据的对象，您可以使用自己的数据

# objective-c - 不兼容的委托类型警告

> ID：14694938
> 
> 赞同：0
> 
> 时间：2013-02-04T20:21:56.697
> 
> 标签：objective-c, delegates

```
@interface Server : NSObject {
    id<ServerDelegate> _delegate;
    NSInputStream *_inputStream;
    NSOutputStream *_outputStream;
}

@property(nonatomic, assign) id<ServerDelegate> delegate; 
```

每当我设置输入或输出流的委托时，我都会收到一条警告，指出它正在从不兼容的类型 Server* 分配给 id。

`self.inputStream.delegate = self`就是一个例子。

实际的服务器运行良好，这只是我担心的警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:25:28.130

如果您想将`self`( `Server`obejct) 指定为 的委托`NSInputStream`，则您的`Server`对象必须符合`NSStreamDelegate`协议。

因为`NSInputStream`是一个子类`NSStream`

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html#//apple_ref/occ/cl/NSStream](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html#//apple_ref/occ/cl/NSStream)

```
@interface Server : NSObject<NSStreamDelegate> 
[...]
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:23:11.687

您需要使`Server`该类符合 NSStreamDelegate：

```
@interface Server : NSObject <NSStreamDelegate> {
    ... var declarations
} 
```

# asp.net-mvc-4 - 在 ServiceStack MemoryCacheClient 上使用 System.Runtime.Caching 的好处

> ID：14694939
> 
> 赞同：2
> 
> 时间：2013-02-04T20:22:04.133
> 
> 标签：asp.net-mvc-4, servicestack

我有一个 MVC 4 站点，它在云中进行了负载平衡（启用了粘性位），我的缓存需求非常简单，只需从数据库中移除一些负载。目前我们正在使用 System.Runtime.Caching，但我不得不使用一些功能，即缓存项目的集合，我真的很想转移到 ServiceStack 的 MemoryCacheClient。是否有任何理由支持或反对这样的举动？

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:29:10.337

这取决于`Runtime.Caching`您实际使用的 ASP.NET 的哪些功能以及它们是否由[ServiceStack 的缓存提供程序](https://github.com/ServiceStack/ServiceStack/wiki/Caching)补充。例如，Runtime.Caching 有机会使缓存条目过期并在条目过期时触发回调。ServiceStack 缓存没有这个特性。

除此之外，它们都是线程安全的和内存中的，因此性能不应该是一个因素。

# emacs - 在回显区域显示最后一个命令的名称

> ID：14694940
> 
> 赞同：4
> 
> 时间：2013-02-04T20:22:25.197
> 
> 标签：emacs

我执行`C-x M-k`杀死 Emacs 中的一段。`C-x M-k`正如预期的那样，回波区域显示为 。

但是，是否可以（也）显示刚刚执行的最后一个命令的**名称，以供参考？**这对于学习目的以及确认执行的命令是预期的命令很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:46:37.867

这不一定是一个好主意，但您可以建议`call-interactively`按照您所说的去做：

```
(defadvice call-interactively (after show-last-command activate)
  "Shows the interactive command that was just run in the message area."
  (unless (eq major-mode 'minibuffer-inactive-mode)
    (message "Ran %s" (ad-get-arg 0)))) 
```

要关闭此功能，请运行`(ad-unadvise 'call-interactively)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T00:28:57.983

您可以通过 hook 完成此操作[`'post-command-hook`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Command-Overview.html#Command-Overview)。您只想添加到过滤命令列表中，以避免一堆烦人的消息。

```
(defvar filtered-commands '(self-insert-command previous-line next-line 
                            forward-char backward-char execute-extended-command))

(defun my-post-command-function ()
  (when (and (= 0 (recursion-depth)) (not (memq this-command filtered-commands)))
(message (format "command was %s" this-command))))

(add-hook 'post-command-hook 'my-post-command-function) 
```

`filtered-commands`显然，添加到您认为合适的变量中。您可能还想调整代码以接受正则表达式，以减少需要列出的命令数量。这留给用户作为练习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:44:15.807

我不知道这是否可以做到。请记住，任何回显都将（很快）被函数本身在消息区域中回显的任何消息所取代。

您也许可以使用`C-h k`( `describe-key`) 和`C-h l`( `view-lossage`)；后者显示最后 300 次击键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:46:46.800

根据对文档的阅读，这似乎不可能以非骇客的方式进行。但是，您可以使用钩子`echo-area-clear-hook`来查看回声区域中的内容，如果它看起来像击键，请使用 进行查找`describe-key`，然后将您从中获得的函数名称记录到回声区域。

# python - 在pandas python中子集日期时间df

> ID：14694941
> 
> 赞同：1
> 
> 时间：2013-02-04T20:22:25.837
> 
> 标签：python, pandas

基本问题，但我一直在这里遇到问题。

我有一个df：

```
df:
            val
date
2012-01-01  4.2      
2012-01-02  3.7
2012-01-03  6.2
2012-01-04  1.2
2012-01-05  2.4
2012-01-06  2.3
2012-01-08  4.5 
```

如您所见，2012-01-07 不存在。如果我要写：

```
exDate = 20120107
df.ix[str(exDate)] 
```

我得到一个关键错误。

在这种情况下，我想将我的 exDate 更改为 20120106（最大数字低于 20120107）。检查索引以查看日期是否存在以及日期不存在的最简单方法是什么，请选择该数字下方的下一个最高值（然后以 YYYYmmdd 格式返回？）

此外，更一般地说，例如，获取日期低于 20120107 的索引子集的最简单方法是什么？我似乎在范围方面做得很好，但很难选择高于或低于日期。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:53:51.130

要获取日期低于 20120107 的子数据框，您可以使用：

```
In [11]: df[:'2012-01-07']
Out[11]: 
            val
date           
2012-01-01  4.2
2012-01-02  3.7
2012-01-03  6.2
2012-01-04  1.2
2012-01-05  2.4
2012-01-06  2.3 
```

要使用 选择最后一行[`irow`](https://stackoverflow.com/a/14669654/1240268)：

```
In [12]: df[:'2012-01-07'].irow(-1)
Out[12]: 
val    2.3
Name: 2012-01-06 
```

所以最后一个有效日期：

```
In [13]: df[:'2012-01-07'].irow(-1).name
Out[13]: '2012-01-06' 
```

# c# - 将游戏手柄数据传递到 Windows

> ID：14694942
> 
> 赞同：0
> 
> 时间：2013-02-04T20:22:33.120
> 
> 标签：c#, .net, windows, gamepad

我正在使用 C# 在 .NET 框架上为 Windows 创建一个游戏手柄，但我被卡住了，如何将我的按钮事件数据和轴数据传递给 Windows？因此，例如，如果`button 1`被按下，它将通过`1`被触发等等。

我用谷歌搜索了它并遇到了几个 msdn 指南，但没有一个真正确定如何做到这一点。[http://msdn.microsoft.com/en-us/library/dd757112.aspx](http://msdn.microsoft.com/en-us/library/dd757112.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:44:23.793

这在一定程度上取决于您使用的硬件。但是这个页面可能会给你一些帮助：-

[http://youhacklife.com/featured/gamepad-game-controller-in-csharp](http://slimdx.org/index.php)

完整的 SlimDX Direct X 库位于：-

[http://slimdx.org/index.php](http://slimdx.org/index.php)

# python - Python subprocess.checkoutput 调用进程错误

> ID：14694943
> 
> 赞同：0
> 
> 时间：2013-02-04T20:22:32.857
> 
> 标签：python, subprocess, popen

在 windows 命令行中，我输入以下命令以启用 windows 功能：

```
>dism.exe -online -Enable-Feature -FeatureName:MSMQ-HTTP 
```

此命令运行良好并启用 MSMQ-HTTP 功能。现在我正在编写一个 Python 脚本来自动化这个过程，我的代码

```
subprocess.check_output(['dism.exe', '-online', '-Enable-Feature', '-FeatureName:MSMQ-HTTP'], shell=True) 
```

返回一个令人讨厌的错误，CalledProcessError: Command '['dism.exe', '-online', '-Enable-Feature', '-FeatureName:MSMQ-HTTP']' 返回非零退出状态 11。

谁能阐明为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T17:08:36.477

Python 的子进程模块和 DISM.exe 存在一些位问题。即使指定 C:\Windows\system32\dism.exe 绝对路径，我也收到错误代码 11。

我最终的解决方案是编写一个 10 行的批处理文件：

```
@echo off
if EXIST %WINDIR%\system32\dism.exe ( 
  set DISM=%WINDIR%\system32\dism.exe 
) 
if EXIST %WINDIR%\SysNative\dism.exe ( 
  set DISM=%WINDIR%\SysNative\dism.exe 
)
%DISM% -online -Enable-Feature -FeatureName:MSMQ-ADIntegration
%DISM% -online -Enable-Feature -FeatureName:MSMQ-HTTP
%DISM% -online -Enable-Feature -FeatureName:MSMQ-Triggers 
```

这个小批处理文件是通过子进程从我的 Python 脚本中调用的：

```
def MSMQ():
    p = subprocess.Popen(r"PrereqInstall\SetMSMQFeatures.bat", shell=True)
    stout, stderr = p.communicate() 
```

# android - 允许用户在 Android 中免费下载您自己的付费应用

> ID：14694946
> 
> 赞同：12
> 
> 时间：2013-02-04T20:22:44.867
> 
> 标签：android, google-play, android-lvl

我在 Play 商店中有一个付费应用程序（[个人资料小部件](https://play.google.com/store/apps/details?id=com.cygnus.profilewidget)，如果有人想知道 ;)），我想允许一些用户（朋友或没有信用卡的人）免费下载它。

当然，我可以只向他们发送 APK，但他们不会自动获取更新，并且对于应用程序的每次更新，我都必须再次向他们发送所有 APK 文件。而且，通过使用这种方法，任何有权访问 APK 文件的人都可以免费安装该应用程序。

我看到通过使用 Android Licensing Library，您可以让一些用户绕过许可证检查，但我希望该应用程序在 Play 商店中为他们显示为“已购买”，我认为这样做不会。

我搜索了 Stack Overflow，但没有找到任何解决方案（例如创建一个单独的 APK 并从“真实”应用程序检查其存在）处理自动更新部分。

有没有人找到一个好的解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-08-24T07:22:39.570

您现在可以生成促销代码并将其分发给 Google Play 上的现有用户和新用户，以提高参与度。在开发者控制台的“促销”选项卡下，您可以为您的应用、游戏和应用内产品设置促销代码，以在您自己的营销活动中分发（每个应用最多 500 个代码，每季度）。考虑使用促销代码来奖励忠实用户并吸引新客户。

参考：1）[http://android-developers.blogspot.in/2016/01/create-promo-codes-for-your-apps-and-in.html](http://android-developers.blogspot.in/2016/01/create-promo-codes-for-your-apps-and-in.html)

2) [https://support.google.com/googleplay/android-developer/answer/6321495](https://support.google.com/googleplay/android-developer/answer/6321495)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T20:24:55.300

最好的解决方案是让他们购买应用程序，然后退款。它仍然会显示为已付款。或者，您可以将应用程序提供给他们，并通过 LVL 对其进行许可，并将他们的电子邮件地址配置为已购买的测试帐户列表，但随后他们将无法获得更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:02:02.260

我有同样的问题，我已经检查过了，从我所见，Apple 系统没有类似物（提供一次性代码来下载应用程序）。

如果您只是给他们 APK，您不会从他们那里获得崩溃/ANR，他们也不会自动获得更新。

这是谷歌确实需要解决的问题，抱歉没有更好的选择。

（我自己的设备也有同样的问题（你不能购买自己的应用程序），我在自己的手机上的应用程序中遇到了一个罕见的崩溃，但我无法在计算机上重现它并且日志有在我做的时候很好地克服了错误，能够通过开发者控制台获得崩溃报告会为我节省很多麻烦）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-22T21:11:34.197

这是一个更新的，没有信用卡的方法。

您可以在 Play 商店中创建同一应用程序的免费版本，但将其发布为 alpha 版本。然后，您可以创建一个 google+ provate alpha 测试人员组，并将其设置为 alpha 版本的测试人员组。

现在将“免费许可”用户添加到 alpha 测试组，他们就有了您的免费应用程序。

要推送更新，您还必须将更新上传到“免费 alpha”，这不是黄金，但我认为非常接近您目前可以获得的最佳效果

这个方法有问题。只要许可是针对每个应用程序的，您将拥有不同的许可密钥，并且它可能始终返回 TRUE，因此如果用户共享 apk，他们可能能够让其他人使用该应用程序，但不能完全确定这种情况，但请注意，最好将免费应用程序共享给受信任的用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-20T16:20:00.320

您可以为付费应用设置零价格销售，并让您的联系人知道。Google 一次最多允许 8 天的销售，但您也可以将其设置为一天。这样，您可能仍然会从非预期的收件人那里获得一些下载，但与邮寄 APK 相比，“问题”将受到更多控制。更新等其他问题也会自动解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-22T09:27:59.050

您可以上传到第三方应用商店，如 Amazon App Store、Aptoide、[www.proapk.in](http://www.proapk.in) ，以允许用户免费下载付费的 Android 应用。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-04-26T16:03:15.293

作为开发者下载应用程序：Google Playstore 对此的官方说法是，您必须创建第二个 google 帐户才能下载您被列为开发者的应用程序。这样就不会违反下载和条款的统计数据。今天谈到了同样的问题（虽然问题发布后一段时间，其他人应该看到类似的问题）

免费赠送：您不能在给定时间将应用程序更改为免费，然后通知这些人在某个窗口内点击它吗？

# wcf - 在 WCF-netTCPBinding 中测试 TLS 安全性

> ID：14694947
> 
> 赞同：0
> 
> 时间：2013-02-04T20:22:54.093
> 
> 标签：wcf, ssl, .net-4.0, wireshark

我正在开发一个客户端/服务器 Winforms 应用程序。客户端使用 Internet 连接到服务器并使用 WCF 的 netTCPBinding 与服务器通信。

*   在安全通道中进行通信对我来说非常重要，因为[NetTCP 绑定默认使用 TLS 进行保护](http://msdn.microsoft.com/en-us/library/ms731172.aspx)，所以我似乎不需要做任何事情。我吗？

*   如何*监控*本地主机中的客户端/服务器之间发送/接收的加密数据？我使用[RawCap](http://www.netresec.com/?page=RawCap)捕获数据并在 Wireshark 中打开转储文件。但我不知道应该如何检查数据包中的 TLS 安全性。转储文件中充满了未知的 TCP 数据包（不是来自我的软件），`vcom=tunnel`其中大部分都有信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:47:16.720

# javascript - 在 Chrome 的 Window 对象中找不到元素，但在 IE 中有效

> ID：14694948
> 
> 赞同：1
> 
> 时间：2013-02-04T20:22:53.720
> 
> 标签：javascript

我有以下 javascript 用于带有复选框的多选下拉列表，在 IE 中工作得很好：

```
function checkAll(textId, checkId, hiddenId) {
var checkBox1 = document.getElementById(checkId);
var textElement = document.getElementById(textId);
var hiddenElement = document.getElementById(hiddenId);
    if (checkBox1.checked) {
        for (var item in window[textId]) {
            if (typeof window[textId][item] != "function") {
                var checkBox = document.getElementById(item);
                if (window[textId][item].text != "Not Supported")
                try
                {
                    checkBox.checked = true;
                    }
                    catch (exception)
                    {
                    }
                if (window[textId][item].text != "Select/De-select All" && window[textId][item].text != "Not Supported")
                    textElement.value += window[textId][item].text + ", ";
                    hiddenElement.value += window[textId][item].value + "|";                   
            }
        }
        }
     else if (!checkBox1.checked) {
            for (var item in window[textId]) {
                if (typeof window[textId][item] != "function") {
                    var checkBox = document.getElementById(item);
                    checkBox.checked = false;
                    textElement.value = "";
                    hiddenElement.value = 0;
                }
            }
        }
} 
```

但是，在 Chrome 中它不起作用。问题是这条线

```
for (var item in window[textId]) 
```

将实际的复选框 ID 分配给 var 项

```
ctl00_MainContent_TabContainer1_TabPanel1_Multiselect1_ctl01 
```

在 IE 中。但是，在 Chrome 中，这会分配给名为“webkitEntries”的项目，这不是我想要的。btw textID 这里是父控件的ID

```
ctl00_MainContent_TabContainer1_TabPanel1_Multiselect1_TextControl 
```

有谁知道如何在 Chrome 中获取每个复选框的 ID？感谢并为任何不清楚的地方道歉——我对 js 很陌生

# flash-builder - 您可以将 Flash Builder 设置为在开始新运行时终止以前的运行吗？

> ID：14694951
> 
> 赞同：1
> 
> 时间：2013-02-04T20:22:59.563
> 
> 标签：flash-builder

我希望 Flash Builder 在我运行/调试时终止以前的运行实例。

如果我每次运行时不检查并单独杀死它们，我就可以轻松地积累运行过时代码的项目的多个实例，这让我发疯。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:33:24.933

感谢 Lee Burrows，这是我能找到的最佳答案：

在通用首选项中有一个名为“Terminate and Relaunch”的未绑定键绑定，它将终止当前连接到调试器的运行/调试并启动一个新实例。因此，如果您只使用它，您可以避免累积过时的实例。

将此作为答案，但我希望有人可以做出不需要改变流程的东西（仍然能够使用调试按钮），如果这种情况仍然发生，这也不会杀死多个实例。

# c - C中atoi的分段错误

> ID：14694952
> 
> 赞同：0
> 
> 时间：2013-02-04T20:22:59.343
> 
> 标签：c, segmentation-fault, atoi

我是 C 新手，遇到以下问题：我想将参数保存为整数。因此 a 写了这段代码：

```
int main(int argc, char argv[]) {
    if(argc > 1) {
        int test = atoi(argv[1]);
        printf("Input: %i\n", test);
    }
} 
```

但是我在运行时总是出现分段错误错误。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:24:49.267

您正在将一个字符串传递给 main。这样 argv[1] 返回单个字符。尝试

```
int main(int argc, char* argv[]) { 
```

传递字符串参数数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:24:40.973

代替 char argv[] 写 char** argv 或 char* argv[]。

# java - Java MySQL 分页

> ID：14694954
> 
> 赞同：2
> 
> 时间：2013-02-04T20:23:05.070
> 
> 标签：java, mysql, pagination

我正在尝试尽可能有效地进行分页。目前，我使用一个拥有超过 500 万条记录的数据库。

我尝试使用 LIMIT pageSize、startIndex，如下所示： Select (a.id) From Article a ........LIMIT 50, 0 在这里，pageSize 为 50，startIndex = 0。

但这只有在您不深入阅读页面时才有用。解决方案是不使用 startIndex，而只使用 pageSize：

Select (a.id) From Article a ........ORDER BY a.id LIMIT 50

下一页将是： SELECT (a.id) FROM Article a WHERE a.id > lasId ORDER BY a.id

但是没有startIndex，就只能往前走，只能往后退一步。

有没有更好的方法在 Java 和 Mysql 中进行分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:28:20.280

你总是可以这样做：

```
int pageNum = ?;
int pageLength = 50;

String query = String.format(
    "SELECT ... LIMIT %d, %d",
    pageNum * pageLength,
    pageLength
); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T20:27:48.540

阅读这篇文章，了解在 MySQL 中进行分页的正确方法（使用大型数据集）：[http ://www.xarg.org/2011/10/optimized-pagination-using-mysql](http://www.xarg.org/2011/10/optimized-pagination-using-mysql)

# php - 正则表达式意外更改变量值？

> ID：14694955
> 
> 赞同：0
> 
> 时间：2013-02-04T20:23:05.637
> 
> 标签：php, regex

这是独家新闻。我正在使用正则表达式来查找图像并在其来源的开头插入“../../”。但是，它不仅不起作用，而且当我运行 RegEx 时，保存图像文件名称（包括扩展名）的变量也在发生变化。如果我注释掉“preg_replace”行，变量会正确回显。谁能告诉我怎么了？提前致谢！

```
$imagefile = substr($filedata,($jpgbeginning+1),(($jpg+3)-$jpgbeginning));
$filedata = preg_replace('/(<img\s+.*?src=")(.*\\.(?:jpg|png|bmp|gif).*?>)/', '<img src="../'.$imagefile.'" />', $filedata);
echo $imagefile."<br /><br />"; 
```

此外，在正则表达式中，它加倍了“../”部分，因此出于某种原因实际上输出为 ../../。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:55:16.130

以下 preg_replace 应该可以工作：

```
preg_replace("/(<img\s+src\s*=\s*\")(.+?)(?=\")/","$1../../$2", HTML); 
```

# java - 简单的 Arquillian 测试来启动和停止部署的应用程序

> ID：14694962
> 
> 赞同：0
> 
> 时间：2013-02-04T20:23:53.447
> 
> 标签：java, tomcat, integration-testing, jboss-arquillian

我正在尝试围绕 Arquillian 进行思考，甚至​​可能开始在我的项目中使用它。我有一个简单的 Java Web 应用程序，它作为 WAR 部署到 Tomcat。

在我的项目中，我定义了一个`ServletContextListener`impl 以便在 Tomcat 启动和停止应用程序时执行代码。

我正在尝试编写一个使用 ShrinkWrap 的*超级简单的*Arquillian 测试类，并且：

1.  确认我捆绑的 WAR 可以部署到 Tomcat 并启动而不会抛出异常；和
2.  一旦应用程序运行（`ServletContextListener`检查），就可以访问一个简单的系统属性；和
3.  确认当Tomcat关闭时，没有抛出异常（clean shutdown）

另外，我的实现类`ServletContextListener`被称为`AppLifecycleManager`：

```
public class AppLifeCycleManager implements ServletContextListener {
    private String logLevel;

    // Injected by Guice, but that's not really relevant for this question.
    @Inject
    private Logger logger;

    // Getter and setter for logLevel and logger

    @Override
    public void contextInitialized(ServletContextEvent event) {
        logLevel = System.getProperty("log.level");
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        logger.info("Peacefully shutting down the application.");
    }
} 
```

到目前为止，这是我最好的尝试：

```
@RunWith(Arquillian.class)
public class MyFirstRealIntegrationTest {
    @Deployment
    public static Archive<?> createDeployment() {
        // Haven't figured this part out yet, but for the sake of
        // this question lets pretend this returns a properly-packaged
        // WAR of my web app, the same that my Ant build currently produces.
    }

    @Test
    public void shouldBeAbleToStartTomcatWithoutExceptions() {
        // Given
        Archive war = createDeployment();

        // When - deploy war to Tomcat container
        try {
            // ??? how to access/init a Tomcat container?
            TomcatContainer tomcat = new TomcatContainer(); // this is wrong
            tomcat.start();
        } catch(Throwable throwable) {
            // Starting the container should not throw exceptions
            Assert.fail();
        }
    }

    @Test
    public void shouldBeAbleToStopTomcatWithoutExceptions {
        // Same setup as above test but stops tomcat and checks for
        // thrown exceptions. Omitted for brevity.
    }

    @Test
    public void shouldHaveAccessToSysPropsOnceRunning() {
        // Here, deploy to the container and start it.
        // Then, confirm that AppLifecycleManager correctly read
        // the log.level system property.

        // Given
        Archive war = createDeployment();
        TomcatContainer tomcat = new TomcatContainer();

        // When - AppLifeycleManager should now read the system property
        tomcat.start();

        // Then - make sure log.level was set to "DEBUG" and that it was
        // correctly read by AppLifeCycleManager.
        Assert.assertTrue(war.getClass(AppLifeCycleManager.class)
                .getLogLevel().equals("DEBUG"));
    }
} 
```

因此，鉴于我在这里的方法，我立即遇到了几个问题：

1.  我不确定如何访问/实例化我的 Tomcat 容器，以便它甚至可以启动/停止
2.  我不确定如何从我正在运行/部署的 Web 应用程序中实际执行测试。在上面的第三个测试中，我曾经`war.getClass(AppLifeCycleManager.class).getLogLevel()`尝试访问“实时”类实例并检查其`logLevel`属性的运行时值，但我知道这是错误的。

所以我问：一个身经百战的 Arquillian 退伍军人将如何编写这 3 个简单的测试，以及我实际上如何从 JUnit 测试中对我的“正在运行”的 Web 应用程序执行测试？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:23:46.250

我认为您不应该在测试中处理 tomcat 的启动/关闭。如果您使用嵌入式 tomcat 容器，我会容易得多：[https](https://docs.jboss.org/author/display/ARQ/Tomcat+7.0+-+Embedded) ://docs.jboss.org/author/display/ARQ/Tomcat+7.0+-+Embedded 。在这种情况下，arquillian 将处理 tomcat 的启动和关闭。

您应该在使用@Deployment 注释的方法中创建部署。只需阅读以下指南：[http ://arquillian.org/guides/getting_started/](http://arquillian.org/guides/getting_started/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:13:05.563

您快到了。`createDeployment`为您管理嵌入式容器的生命周期（自动启动和停止虚拟容器）。这样，您只需专注于测试本身。要编写集成测试，没有“框架”或“Arquillian API”可供编码。您只需按照主代码的方式调用类和方法。

这里的关键是：您的测试实际上是在容器内运行的。如果发生异常，或者您的断言失败，Arquillian 运行程序会抛出异常并停止容器。对于您的代码示例，您正在测试以查看是否可以读取系统属性：

```
@RunsWith(Arquillian.class)
public class MyArquillianTest {
    @Deployment
    public Archive<?> createDeployment() { ... }

    @Test
    public void shouldBeAbleToReadSysPropAtStartup() {
        Assert.assertTrue(System.getProperty("log.level") != null);
    }
} 
```

请记住，`Assert.assertTrue(System.getProperty("log.level") != null)`Arquillian 正在将您的代码“传输”到您为其配置的容器中。所以这个断言实际上是在你部署的容器中运行的。

# node.js - fs.readFile 异常

> ID：14694969
> 
> 赞同：2
> 
> 时间：2013-02-04T20:24:27.147
> 
> 标签：node.js

尝试运行一个异步打开一堆文件并读取其内容的脚本。我收到一个错误，其中`fs.readFile`的回调没有数据，但文件在那里，并且当前没有被其他任何东西打开。完全糊涂了。

错误是：

> 错误：好的，打开 'D:\Workspace\fasttrack\public\cloudmade\images\998\256\6\31\61.png'

更多信息：

该程序运行一个循环，其中包含一堆对象，如下所示：

```
newObject = {
    filePath:filePath,
    scanPixels:function(parent){
        ....
    }
} 
```

循环调用每个对象的`scanPixels`函数，然后`fs.readFile`在`parent.filePath`

这是for循环

```
for(var index=0;index<objects.length;index++){
    objects[index].scanPixels(objects[index]);
} 
```

scanPixels 函数本质上是这样的：

```
scanPixels:function(parent){

            png_js.decode(parent.filePath, function(pixels){

                ...more stuff 
```

在 png_js 文件中：

```
PNG.decode = function(path, fn) {

  return fs.readFile(path, function(err, file) {

    var png;
    png = new PNG(file);
    return png.decode(function(pixels) {
      return fn(pixels);
    });
  });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T09:18:47.710

问题是 fs.readFile 没有返回值。你会想要 fs.readFileSync

```
var buffer1 = fs.fileReadSync('./hello1.txt');

var buffer2;
fs.fileRead('./hello2.txt', function (err, file) {
    buffer = file;
}); 
```

# google-maps - 字母“A”和“B”显示在自定义标记的顶部

> ID：14694972
> 
> 赞同：1
> 
> 时间：2013-02-04T20:24:35.023
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

这是我的代码：

```
 var icons = 
        {
            start: new google.maps.MarkerImage(
                'design/image/icons/map/user.png'
            ),
            end: new google.maps.MarkerImage(
                'design/image/icons/map/business.png'
            )
        };

        var directionsService = new google.maps.DirectionsService();
        var directionsDisplay = new google.maps.DirectionsRenderer();

        directionsDisplay.suppressMarkers = true;

        var oPos = new google.maps.LatLng(fLat, fLong);
        var oUserPos = new google.maps.LatLng(fUserLat, fUserLong);

        var map = new google.maps.Map(document.getElementById(sElement), {
            zoom: 11,
            center: oPos,
            disableDefaultUI: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            styles: [
                {
                    featureType: "poi.business",
                    elementType: "labels",
                    stylers: [
                        {visibility: "off"}
                    ]
                }
            ]
        });

        directionsDisplay.setMap(map);

        var request = {
            origin: oUserPos,
            destination: sAddress,
            travelMode: google.maps.TravelMode.DRIVING
        };

        directionsService.route(request, function(response, status)
        {
            if( status == google.maps.DirectionsStatus.OK )
            {
                directionsDisplay.setDirections(response);

                var leg = response.routes[0].legs[0];
                makeMarker(leg.start_location, icons.start);
                makeMarker(leg.end_location, icons.end);
            }
        });

        function makeMarker(position, icon, title)
        {
            new google.maps.Marker(
            {
                position: position,
                map: map,
                icon: icon
            });
        }

        if ( sMapType == 'event' )
        {
            $('#' + sElement + '_legend').append('<div style="padding: 2px 0px;"><img src="design/image/icons/map/user.png" class="v_align_m"> Your Location</div>');
            $('#' + sElement + '_legend').append('<div style="padding: 2px 0px;"><img src="design/image/icons/map/business.png" class="v_align_m"> Location</div>');
        }
        else
        {
            $('#' + sElement + '_legend').append('<div style="padding: 2px 0px;"><img src="design/image/icons/map/user.png" class="v_align_m"> Your Location</div>');
            $('#' + sElement + '_legend').append('<div style="padding: 2px 0px;"><img src="design/image/icons/map/business.png" class="v_align_m"> Business</div>');
                    $('#' + sElement + '_legend').append('<div style="padding: 2px 0px;"><div style="width:32px;height:32px;background:#B9B9B9;border: 2px solid #000000;" class="inline v_align_m"></div> <div class="inline">Service Area</div></div>');
                }   
    }
    else
    {
        var oPos = new google.maps.LatLng(fLat, fLong);

        var map = new google.maps.Map(document.getElementById(sElement), {
            zoom: 11,
            center: oPos,
            disableDefaultUI: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var marker = new google.maps.Marker(
        {
            icon: 'design/image/icons/map/business.png',
            map: map,
            position: oPos
        });

        if ( sMapType == 'event' )
        {
            $('#' + sElement + '_legend').append('<div style="padding: 2px 0px;"><img src="design/image/icons/map/business.png" class="v_align_m"> Location</div>');
        }
        else
        {
            $('#' + sElement + '_legend').append('<div style="padding: 2px 0px;"><img src="design/image/icons/map/business.png" class="v_align_m"> Business</div>');
                    $('#' + sElement + '_legend').append('<div style="padding: 2px 0px;"><div style="width:32px;height:32px;background:#B9B9B9;border: 2px solid #000000;" class="inline v_align_m"></div> <div class="inline">Service Area</div></div>');
                }
    }

    var legend = document.getElementById(sElement + '_legend');
    map.controls[google.maps.ControlPosition.RIGHT_TOP].push(legend);

        oShape = new google.maps.Polygon(
    {
        fillColor: "#000000",
        fillOpacity: 0.3,
        paths: volusiaCounty,
        strokeColor: "#000000",
        strokeOpacity: 0.3,
        strokeWeight: 2
    });

    //Add shape to map
    oShape.setMap(map);
    }
</script>
    <script type="text/javascript">
$(document).ready(function()
    {
    initializeMap('29.118694', '-80.998041', "3959 South Nova Road #1 Port Orange, Fl 32127");
    });
    </script> 
```

基本上问题是我的客户标记和旧的 A、B 图标出现了。我需要做一些额外的事情来阻止 A 和 B 显示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:34:31.097

您需要[抑制 DirectionsRenderer 中的标记](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)

```
var directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers:true}); 
```

# ruby-on-rails - 将本地 postgresql 数据库数据复制到远程 heroku 数据库的问题

> ID：14694975
> 
> 赞同：0
> 
> 时间：2013-02-04T20:24:45.117
> 
> 标签：ruby-on-rails, ruby, heroku

我有一个带有 postgresql 数据库的 Heroku 应用程序，我正在尝试使用在我的 localhost postgresql 安装上创建的数据进行预填充。

我一直在遵循 Heroku 的详细说明： https://devcenter.heroku.com/articles/heroku-postgres-import-export和这里：[https :](https://devcenter.heroku.com/articles/heroku-postgres-import-export) [//devcenter.heroku.com/articles/pgbackups#restoreing -from-backup](https://devcenter.heroku.com/articles/pgbackups#restoring-from-backup)但一直遇到一个对我来说似乎相当神秘的问题。

首先，我使用以下命令创建了本地数据库哑元：

```
PGPASSWORD=password pg_dump -o -Fc --no-acl --no-owner -h localhost -U dbUser db_name > db/db_name.dump 
```

然后我按照说明将我的转储文件上传到 Cloud App url，然后尝试使用以下命令恢复数据库：

```
heroku pgbackups:restore DATABASE_NAME 'http://path/to/db_name.dump' --app app_name 
```

以下输出带有错误的打印：正在检索...完成

```
 !    An error occurred and your restore did not finish.
 !    Please run `heroku logs --ps pgbackups` for details. 
```

当我查看日志时，我看到下面的输出抱怨一个整数，然后是一个“无效路径”，但我不明白为什么。转储文件的 URL 正确且可访问。

非常感谢您对这个问题的任何见解！

```
2013-02-04T20:15:06+00:00 app[pgbackups]: Started:  Mon Feb 4 20:15:06 UTC 2013
2013-02-04T20:15:06+00:00 app[pgbackups]: Location: e9d564f0-a67f-4c32-bad5-60798786b87b:/tmp/VFJ5WDiAHr
2013-02-04T20:15:07+00:00 app[pgbackups]: psql: bin//psql-9.2.1-64bit
2013-02-04T20:15:07+00:00 app[pgbackups]: pv: bin//pv-1.1.4-64bit
2013-02-04T20:15:07+00:00 app[pgbackups]:       SELECT count(*) = 0 as is_empty
2013-02-04T20:15:07+00:00 app[pgbackups]:       FROM pg_class INNER JOIN pg_roles ON relowner = pg_roles.oid
2013-02-04T20:15:07+00:00 app[pgbackups]:       WHERE rolname <> '\''postgres'\'''
2013-02-04T20:15:07+00:00 app[pgbackups]: bin/brie: line 145: [: 9.1: integer expression expected
2013-02-04T20:15:07+00:00 app[pgbackups]: pg_restore: bin//pg_restore-9.1.6-64bit
2013-02-04T20:15:07+00:00 app[pgbackups]:  Schema |             Name              | Type  |       Info        
2013-02-04T20:15:07+00:00 app[pgbackups]: --------+-------------------------------+-------+-------------------
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | abilities                     | table | 554
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | abilities                     | table | abilities_pkey
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | champions                     | table | 110
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | champions                     | table | champions_pkey
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | effects                       | table | 934
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | effects                       | table | effects_pkey
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | items                         | table | 191
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | items                         | table | items_pkey
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | masteries                     | table | 56
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | masteries                     | table | masteries_pkey
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | runes                         | table | 305
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | runes                         | table | runes_pkey
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | schema_migrations             | table | 26
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | schema_migrations             | table | 
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | spells                        | table | 15
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | spells                        | table | spells_pkey
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | abilities_pkey                | index | abilities
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | champions_pkey                | index | champions
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | effects_pkey                  | index | effects
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | index_champions_on_updated_at | index | champions
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | index_items_on_item_id        | index | items
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | index_items_on_updated_at     | index | items
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | index_masteries_on_updated_at | index | masteries
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | index_runes_on_updated_at     | index | runes
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | index_spells_on_updated_at    | index | spells
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | items_pkey                    | index | items
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | masteries_pkey                | index | masteries
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | runes_pkey                    | index | runes
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | spells_pkey                   | index | spells
2013-02-04T20:15:07+00:00 app[pgbackups]:  public | unique_schema_migrations      | index | schema_migrations
2013-02-04T20:15:07+00:00 app[pgbackups]: (30 rows)
2013-02-04T20:15:07+00:00 app[pgbackups]: 
2013-02-04T20:15:07+00:00 app[pgbackups]: download_progress: start
2013-02-04T20:15:07+00:00 app[pgbackups]: download_progress:    0B 
2013-02-04T20:15:07+00:00 app[pgbackups]: 
2013-02-04T20:15:07+00:00 app[pgbackups]: download_progress: 0.0bytes
2013-02-04T20:15:07+00:00 app[pgbackups]: download_progress: done
2013-02-04T20:15:07+00:00 app[pgbackups]: Invalid path 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:34:22.227

默认的 cloudapp url 是 30x 重定向，不幸的是，在给出这个答案时，pgbackpus 不遵循重定向。我应该找个时间解决这个问题，但与此同时，`curl -I`在你的 cloudapp url 上做一个并找到真正的 url，然后使用它。

底部的日志中有“无效路径”的提示。

同样值得一提的是，如果您已经在本地进行了备份，并且它不是那么大，那么您可以`pg_restore`在远程 pg 数据库上的机器上使用它。

# ruby-on-rails-3 - 用于 iframe 的 Rails 3 DRY 条件布局

> ID：14694977
> 
> 赞同：1
> 
> 时间：2013-02-04T20:24:48.337
> 
> 标签：ruby-on-rails-3, iframe, dry

我最近的任务是在另一个网站的 iframe 中加载我的 Rails 应用程序的一部分。相关页面应该使用不同的布局文件，但前提是它们在 iframe 内呈现。这里提出了一个解决方案[Detect iframe request in a rails app](https://stackoverflow.com/questions/6908813/detect-iframe-request-in-a-rails-app) 涉及传递查询字符串参数。

例如，请求网站可以通过 iframe 调用我的应用程序，其 src 为`http://foo.com/bar?iframe=true`. 然后在我们的控制器中，我们可以简单地检查：

```
def bar
  render :template => "iframe" if params[:iframe]
end 
```

这似乎是一个很好的解决方案，但遗憾的是，它仅适用于初始请求，因为原始查询字符串是完全静态的。假设我们有指向 iframe 中其他路由的可访问链接，是否有任何方法可以轻松中继`iframe=true`请求参数以保持正确的 iframe 布局而无需重复代码？基本上我想在不破坏任何现有功能的情况下尽可能采用 DRYest 方法。我考虑创建另一个 link_to 帮助器，其中包括传递此参数（如果存在）的逻辑，并在整个应用程序中替换我的所有 link_to 调用；我想知道是否有人有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:26:16.847

我决定使用 JavaScript 来解决这个问题，并将以下内容添加到我的 haml 布局文件中：

```
:javascript
    for(i = 0; i< $('a').length; i++)
    {
      if($('a')[i].href.match(document.domain))
      {
        $('a')[i].href = $('a')[i].href + "?iframe=true";
      }
    } 
```

这与我对 iframe 参数的服务器端检查相结合，将确保加载适当的布局。我决定只为启用 JavaScript 的用户提供此功能，因此它可能不是最佳解决方案。这种方法的唯一其他问题在于控制器重定向和表单，我必须手动检查 iframe 参数然后相应地转发它 - 根本不是 DRY，但我至少能够将逻辑放入控制器方法中。如果有人知道更好的解决方案，请随时留下答案。

# javascript - 为什么在 JavaScript 构造函数中使用副作用是不好的做法？

> ID：14694982
> 
> 赞同：10
> 
> 时间：2013-02-04T20:24:58.693
> 
> 标签：javascript, coding-style, constructor

我通常在我的代码中使用与设计模式[自定义对象](http://www.klauskomenda.com/code/javascript-programming-patterns/#custom)非常相似的东西。

但是 JSLint 不赞成这样的结构：

```
function MyClass() { this.init(); }
new MyClass(data); 
```

因为对象在创建后立即被丢弃 - 它没有被用于任何事情。我们可以通过将它分配给一个变量来欺骗 JSLint 忽略它，但这并没有改变 JSLint（我猜很多 JavaScript 爱好者）不鼓励这种模式。

那么为什么在 JavaScript 构造函数中使用副作用被视为一种不好的做法呢？

对于它的价值，我认为这是一个*很好*的做法，因为：

1.  您有一个设置功能，因此如果您正在管理 MyClass 实例列表以供以后访问，它应该更容易维护。（将对象推入数组是一种副作用，您必须在构造函数返回“良好实践”= 更难维护之后再执行此操作。）
2.  它有自己的原型，因此是“类所有权”：Firebug 将其报告为 MyClass 的实例，而不仅仅是 Object。（在我看来，这使它优于其他设计模式。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T21:21:21.827

罗伯特·马丁在他的《*清洁代码》*一书中说

> 副作用是谎言。你的函数承诺做一件事，但它也做其他隐藏的事情……它们是狡猾的和破坏性的错误，通常会导致奇怪的时间耦合和顺序依赖。

您在关于数组的评论中描述的内容听起来像是“奇怪的时间耦合”。

# java - 为什么在类中声明变量私有？

> ID：14694987
> 
> 赞同：12
> 
> 时间：2013-02-04T20:25:23.197
> 
> 标签：java, variables, private

伙计们，我首先要道歉，因为我确信这已经在其他地方得到了回答——我只是找不到以我理解的方式解释它的答案！我正在上一门理学硕士转换课程，有一些基本的基础知识我仍在为此苦苦挣扎，包括这个 - 为什么将变量设为私有更好。

假设我有一个名为 Person 的 Java 类，带有一个 print 方法。我可以创建它并将其定义为：

```
public class Person
{
    public String name;
    public String telephoneNumber;

    public void print()
    {
       System.out.println(name + " " + telephoneNumber);
    }
} 
```

然后，在主类中，我可以编写以下代码：

```
class testPerson
{
  public static void main(String[] args)
  {
    Person test;
    test = new Person();

    test.name = "Mary";
    test.telephoneNumber = "01234 567890";

    test.print();
  }
} 
```

如果我这样做了， test.print(); 将产生输出：

```
mary 01234 567890 
```

但是，我知道这被认为是糟糕的编码。变量在公共类中应该是私有的，因为我们不想让人们看到这些信息是如何存储的，或者在未经授权的情况下能够编辑信息。

所以现在，我将编辑 Person 类以将两个字符串声明为私有并添加 get 和 set 方法，如下所示：

```
private String name;
private String telephoneNumber;

public void setName (String name)
{
  this.name = name;
}

public void getName()
{
  return name;
}

// same code for telephone methods. 
```

现在，在主类中，我将设置姓名和电话的方法更改为以下内容：

```
mary.setName("Mary");
mary.settelephoneNumber("01234 567890"); 
```

根据我正在关注的讲义，这更有效（尽管可以通过添加 Person() 方法以允许实例化等来提高效率）

但是，我很难理解为什么这会更好。
在前一种方法中，用户可以直接访问变量。但是，即使通过隐藏他们无法直接访问的变量，用户也可以间接访问和修改它们，从而产生完全相同的结果。

为什么这是首选，毫无疑问我错过/忽略了什么愚蠢的事情？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-04T20:34:26.063

比萨送货类比

1.  您订购了一份披萨送餐。
2.  比萨男孩敲门，希望你付钱。
3.  你从钱包里拿出钱，交给送货员。（您可以控制隐藏内部详细信息（驾驶执照等））**或者，**
    *   你可以**把钱包交给送货员，让他从里面取钱。**通过这样做，您将不再处于控制之中。您正在暴露内部细节。

阅读[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)和[封装不是信息隐藏](http://www.javaworld.com/jw-05-2001/jw-0518-encapsulation.html)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-04T20:28:37.707

并不是说它更高效，而是它更易于维护并且是一个好的实践。

例如，使用 setter 方法，您可以在实际进行设置之前`setTelephoneNumber`实际检查是否`String`是有效的电话号码。如果您将变量公开，则不可能这样做。从一开始就使用 setter 意味着您可以稍后返回并添加验证，而如果您将变量公开，则必须添加 setter 并修改*所有用户*以使用 setter 而不是修改直接变量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-04T20:34:04.753

人们会给你一百万个为什么它更好的反刍理由，但它只是在**某些**情况下更好，而不是在所有情况下都明确。例如，以 Java 自己的类为例[`GridBagConstraints`](http://docs.oracle.com/javase/6/docs/api/java/awt/GridBagConstraints.html)——**它根本没有方法**（如果你不计算`clone`，它无论如何都有；所有 Java 类都继承自它`Object`）。为什么？因为有一种情况实际上更实用。并且`GridBagConstraints`是最纯粹意义上的 Java Bean：它完全是关于属性的，没有业务逻辑。

让我从实践中报告另一个事实：没有 setter 验证其输入；没有 getter 计算过它的结果。*在 JavaBeans 的世界中，任何这样的行为很快就会妨碍setter set 和 getter get*的普遍假设。基本上，如果您以任何方式偏离与公共领域完全等价的内容，您就输了。

现代 Java API，如 Hibernate，通过在与 JavaBean 样式属性平等的基础上接受裸公共字段来承认这一事实。早期版本不允许这样做，但随着 Java 经验的积累，人们终于意识到公共字段**是可以的**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T20:51:04.490

您必须假设，在某个时候，其他人会使用您的代码 - 并且其他人可能是您，一年后。如果你在一个类上看到一个公共属性，你应该能够假设它是你可以自由操作的，如果它不被直接修改，你不应该能够在外部看到它。

一个很好的文字示例是位图对象的尺寸。如果您尝试绘制尺寸为-10x-10 的位图，大多数机器都不会喜欢它，因为这样的东西显然不可能在屏幕上表示。如果此位图的宽度/高度属性只是公共变量，则它们可能会被善意的编码器稍后设置为无效值（永远不要假设它不会发生），并且在渲染它时 -砰，你有一台冻结的电脑。

通过隐藏变量并使用 setter，您可以防止这种情况发生：

```
private int _width = 10;

public void setWidth(int value)
{
     //Prevent the value moving into invalid range:

     if(value < 1)
          value = 1;

     if(value > 4096)
          value = 4096;

     //Now apply it
     _width = value;
} 
```

但是，为了速度和方便，您不必一开始就像这样开发您的代码 - 只需确保您之后通过它并隐藏您需要的内容！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T20:36:47.673

还有安全问题需要考虑。一个常见的例子是银行账户。你有余额，你用存款来存钱，用取款来取钱。如果余额是公开的，则可以在不存入或取款的情况下对其进行修改。那可能非常糟糕。

在一个方法中，您可以对事物进行检查，例如确保您从帐户中取出的资金不会超过实际存在的金额。如果您直接访问这些值，您将无法真正做到这一点。这是关于控制。

# android - 从自己的类调整布局大小

> ID：14694989
> 
> 赞同：0
> 
> 时间：2013-02-04T20:25:23.800
> 
> 标签：android, android-relativelayout

我正在创建一个子类化 RelativeLayout 的自定义布局。我希望它有固定的尺寸，例如，正方形是 250x250，矩形是 300x100，等等。为此，我添加了一个新的 xml 属性，type。在看到布局的类型后，我想调整布局的大小。我尝试从我的类构造函数中执行以下操作：

```
switch(type)
{
   case SQUARE:
       setLayoutParams(new MyLayout.LayoutParams(250,250));
       break;
   case RECTANGLE:
       setLayoutParams(new MyLayout.LayoutParams(300,100));
       break;
} 
```

然而，这并没有覆盖 xml 文件的高度和宽度。无论如何要从我的布局中实现我想要的，还是必须从父容器进行尺寸更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T20:30:35.687

如果你像这样覆盖宽度和高度，你应该覆盖 onMeasure，检查你是什么，并通过调用 onMeasure 内部的 setMeasuredDimension() 来设置正确的测量值。

# hardware - 未从实例化输出中获取数据

> ID：14694990
> 
> 赞同：1
> 
> 时间：2013-02-04T20:25:24.403
> 
> 标签：hardware, verilog, fpga, hdl

我已经在这个多路复用器模块中实例化了一个秒表模块。秒表按预期工作并产生预期的输出。这也被实例化的寄存器拾取。但是，如果我想在模块的下方使用这些数据，它就不起作用。

这是显示我的问题的模拟：

[![在此处输入图像描述](../Images/4f0b90a1d0f2d68bdc15b4a444860aca.png)](https://i.stack.imgur.com/3v59r.jpg)

从秒表模块获取的值运行良好。然后将这些值传输到寄存器`regd0, regd1, regd2, regd3`，而不是显示这些值正在显示`0`？

这是产生上述模拟的代码：

```
 module muxer(
    input clock,
    input reset,
    input [1:0] select,
    output a,
    output b,
    output c,
    output d,
    output e,
    output f,
    output g,
    output dp,
    output [3:0] an
    );

reg go_hi, go_start;

wire[3:0] wire_d0, wire_d1, wire_d2, wire_d3; // timer registers that will hold the individual counts
wire[3:0] wire_hd0, wire_hd1, wire_hd2, wire_hd3; //regsiters to hold the "hi" values
reg [3:0] regd0, regd1, regd2, regd3; //registers for LED multiplexing

//instantiate the "hi" module
say_hi sayhi(.clock(clock), .reset(reset), .go(go_hi), .hi_d0(wire_hd0), .hi_d1(wire_hd1), .hi_d2(wire_hd2), .hi_d3(wire_hd3)) ;

//instantiate the stopwatch module
stopwatch timer(.clock(clock), .reset(reset), .start(go_start), .d0(wire_d0), .d1(wire_d1), .d2(wire_d2), .d3(wire_d3) );

always @ (select)
begin
    case(select)
        00: //hi
        begin
            go_start = 0; //make sure timer module is off
            go_hi = 1'b1; //enable go signal to display "hi"
            regd0 = wire_hd0; //transfer values to the multiplexing circuit
            regd1 = wire_hd1;
            regd2 = wire_hd2;
            regd3 = wire_hd3;
        end

        01: //timer
        begin
            go_hi = 0; //make sure "hi" module is off
            go_start = 1'b1; //enable start signal to start timer
            regd0 = wire_d0;
            regd1 = wire_d1;
            regd2 = wire_d2;
            regd3 = wire_d3;
        end

        10: //stop timer
        begin
            go_hi = 0;
            go_start = 1'b0;
        end
    endcase
end

//The Circuit for 7 Segment Multiplexing - 

localparam N = 8; //18 for implementation, 8 for simulation

reg [N-1:0]count;

always @ (posedge clock or posedge reset)
    begin
        if (reset)
            count <= 0;
        else
            count <= count + 1;
    end

reg [6:0]sseg;
reg [3:0]an_temp;
reg reg_dp;
always @ (*)
    begin
        case(count[N-1:N-2])

            2'b00 : 
                begin
                    sseg = regd0;
                    an_temp = 4'b1110;
                    reg_dp = 1'b1;
                end

            2'b01:
                begin
                    sseg = regd1;
                    an_temp = 4'b1101;
                    reg_dp = 1'b0;
                end

            2'b10:
                begin
                    sseg = regd2;
                    an_temp = 4'b1011;
                    reg_dp = 1'b1;
                end

            2'b11:
                begin
                    sseg = regd3;
                    an_temp = 4'b0111;
                    reg_dp = 1'b0;
                end
        endcase
    end
assign an = an_temp;

reg [6:0] sseg_temp;    
always @ (*)
    begin
        case(sseg)
            4'd0 : sseg_temp = 7'b1000000; //display 0
            4'd1 : sseg_temp = 7'b1111001; //display 1
            4'd2 : sseg_temp = 7'b0100100;// display 2
            4'd3 : sseg_temp = 7'b0110000;
            4'd4 : sseg_temp = 7'b0011001;
            4'd5 : sseg_temp = 7'b0010010;
            4'd6 : sseg_temp = 7'b0000010;
            4'd7 : sseg_temp = 7'b1111000;
            4'd8 : sseg_temp = 7'b0000000;
            4'd9 : sseg_temp = 7'b0010000;
            4'd10 : sseg_temp = 7'b0001001; //to display H
            4'd11 : sseg_temp = 7'b0000111; //to display I
            default : sseg_temp = 7'b0111111; //dash
        endcase
    end
assign {g, f, e, d, c, b, a} = sseg_temp;   
assign dp = reg_dp;

endmodule 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:16:59.273

我的猜测是`select`不等于 01。你也应该在波浪中显示它。

以下是其他一些观察结果。

如果要`regd0`对组合逻辑建模，则应更改`always @(select)`为`always @*`. d1-d3 相同。目前，我认为您正在为闩锁建模。

在您的案例中，陈述`10`是指十进制 10。您可能想要`2'b10`.

# jmeter - 从数组中获取随机值

> ID：14694992
> 
> 赞同：11
> 
> 时间：2013-02-04T20:25:38.810
> 
> 标签：jmeter

我定义了一个新变量

```
Name        Value            Description
categories  (1, 2, 3, 4, 5)  my categories ids 
```

在我的路径中，我想从类别中获取随机值：`category_id=my_random_value`。

我什至试过这个

```
category_id=${__StringFromArrayAtRandomindex('1', '2', '3', '4', '5'} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-12-11T17:43:07.400

要从列表中获取随机变量值，首先将列表或可用值声明为用户变量，并带有前缀和增量索引：

```
country_1     Spain 
country_2     France  
country_3     Portugal  
country_4     Italy 
country_5     England 
```

然后，您可以从将前缀与间隔中的随机索引连接的列表中获取随机值：

```
${__V(country_${__Random(1,6,)})}  --> "Spain", "France", "Portugal", etc... 
```

**解释**

__Random函数将为您提供区间索引[。](http://jmeter.apache.org/usermanual/functions.html#__Random)要获取 1 到 5 的值，您必须调用`__Random(1,6,)`，因为它永远不会达到 MAX 值。

__V函数将获取[具有](http://jmeter.apache.org/usermanual/functions.html#__V)给定名称的变量的值。

```
${__Random(1,6,)}                 --> 1, 2, 3, 4, 5
country_${__Random(1,6,)}         --> "country_1", "country_2", etc...
${__V(country_${__Random(1,6,)})} --> "Spain", "France", "Portugal", etc... 
```

例如，要将随机变量用作请求的 JSON 主体，在主体数据中：

```
}
  "country":"${__V(country_${__Random(1,6,)})}"
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-04T23:02:37.527

对于您的场景，您可以尝试使用带有一些 java/ [groovy](http://groovy-lang.org/)代码的 JSR233 组件（ [Sampler](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler)、[PreProcessor](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_PreProcessor)、[PostProcessor ）。](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_PostProcessor)

例如：

*   像你所做的那样定义你的数据：

    ```
    名称 值          
    类别 1,2,3,4,5

    ```

    （即使用逗号作为分隔符，逗号前后没有空格）。

*   使用带有以下代码的 JSR233 Sampler / PreProcessor / PostProcessor：

    ```
    import java.util.Random;

    String[] categories = (vars.get("categories")).split(",");

    int idx = new Random().nextInt(categories.length);
    String category = (categories[idx]);

    vars.put("rnd_cat", category); 
    ```

*   使用 参考随机选择的类别`${rnd_cat}`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-04T21:12:40.260

__StringFromArrayAtRandomindex 不是 JMeter 核心的一部分，也不是 JMeter 插件的一部分。

它是自定义功能吗？

此外，最后有一个语法错误（缺少***）***：

```
${__StringFromArrayAtRandomindex('1', '2', '3', '4', '5')} 
```

要执行相同的操作，请使用包含以下内容的 CSV 数据集：

```
1
2
3
4
5 
```

放：

```
Variable Names=categoryId 
```

然后你可以像这样使用它：

```
${categoryId} 
```

# meteor - 如果用户的缓存不温暖，Meteor 在用户认证成功后不会重新渲染

> ID：14694993
> 
> 赞同：1
> 
> 时间：2013-02-04T20:25:41.217
> 
> 标签：meteor

在我们的应用程序中重现的步骤：

1.  登出。
2.  清除缓存。
3.  重新加载页面。
4.  登录。实际：您留在首页。预期：应用程序打开。

如果用户登录（特别是 ），我们的主模板会显示应用程序`{{#if currentUser}}`。否则，它会显示一个启动页面，用户可以在其中创建帐户并登录。

我们正在使用`{{loginButtons}}`助手。

这会是一个用例`Meteor.flush()`吗？如何在用户登录时触发它？`Meteor.autorun()`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:20:28.177

难道逻辑实际上不在您定义的模板中，而是在 index.html 本身中？如果它没有被分解成某种首页逻辑模板，您可以从中调用其他模板，我可以看到这可能会导致问题。只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:17:04.620

有几件事导致了这里的解决方案。

1.  我重组了我的首页模板以考虑`{{loggingIn}}`到这一点。之前，我只使用`{{currentUser}}`.

2.  我确保我没有`Session`在模板助手中设置变量，尤其是那些我也在其他代码路径中获取它们的变量。这就解释了为什么这个问题感觉像是一个竞争条件，并且正如我所说的那样只发生在“冷缓存”中。

此外，视图没有改变的原因是因为错误阻止它这样做。所以这是一个症状，而不是实际问题（尽管我确实需要稍微改进模板条件）。

# java - 模拟一个具体的类 - 它总是空的

> ID：14694996
> 
> 赞同：1
> 
> 时间：2013-02-04T20:26:03.047
> 
> 标签：java, spring, mocking, mockito

我正在尝试使用 Mockito 模拟一个具体的类。但是，它在被测服务中仍然为空。

我的具体课程和服务：

```
//My Concrete Class
@Component("supporter")
public class Supporter
{
   @Autowired
   private IDriver driver;
   public int someMethod(int){...}
   ...
}

//Service Class that uses this abstract class
public class Service implements IService
{
   private ExceptionHandler exceptionHandler;
   @Autowired
   public void setExceptionHandler(ExceptionHandler exceptionHandler) {
          this.exceptionHandler = exceptionHandler;
   }

   private Supporter supporter;
   @Autowired
   public void setSupporter(Supporter supporter) {
        this.supporter = supporter;
   }
   public int hookItem(int arg)
   {
      ...
      //supporter is always null while mock testing <----
      int count = supporter.someMethod(arg);
      ...
      return count;
   }
} 
```

我的测试代码：

```
public class ServiceTest extends AbstractTestMockito
{
    ...
    IService service = null;
    @Mock
    private ExceptionHandler exceptionHandler;

    @BeforeMethod
    public void setup() {
        service = new Service();
    }

    @Test(enabled=true)
    public void shouldDoSomething()
    {
        Supporter supporter = Mockito.mock(Supporter.class);
        given(supporter.someMethod(1)).willReturn(new Integer(10));

        final int response = service.hookItem(1);
        //Assert...
    }
} 
```

它为空的原因可能是什么？（我的课程/服务是 Spring bean）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:37:04.320

查看测试类，您似乎没有将模拟`Supporter`实例注入`service`实例，例如尝试`service.setSupporter(supporter);`在调用之前添加`service.hookItem(1)`。