# StackOverflow 问答 15988000-15988999

# symfony - 引用在 Symfony2.2 中更改的包/控制器/文件？

> ID：15988001
> 
> 赞同：0
> 
> 时间：2013-04-13T12:52:12.813
> 
> 标签：symfony, symfony-2.2

我理解这一点：[http](http://symfony.com/doc/2.1/reference/configuration/twig.html) ://symfony.com/doc/2.1/reference/configuration/twig.html （2.1 版）以及如何为 exception_controller 引用包：

```
exception_controller:  Symfony\Bundle\TwigBundle\Controller\ExceptionController::showAction 
```

但我不明白如何为 2.2 版（我正在使用）（[http://symfony.com/doc/current/reference/configuration/twig.html](http://symfony.com/doc/current/reference/configuration/twig.html)）

```
exception_controller:  twig.controller.exception:showAction 
```

我的捆绑包位于：

```
Acme\Bundle\MyBundle\Controller\MyController::runAction 
```

...如何在 2.2 中引用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:34:15.150

看起来您只需要使用下划线表示法：

```
acme_my.controller.my:runAction 
```

如果您的捆绑包定义为`AcmeMyBundle`. 因此，如果我有一个 AcmeUserBundle 并使用控制器`ExceptionController`，我会是这样的：

```
acme_user.controller.exception:debugAction 
```

# java - Locage.getCountry() 不返回确切的语言环境

> ID：15988002
> 
> 赞同：0
> 
> 时间：2013-04-13T12:52:17.940
> 
> 标签：java, grails

我试图获取我当前的语言环境，我尝试这样做：Locale.getCountry()，但这个显示的是美国，这很奇怪，因为我在马来西亚！我怎样才能做到这一点？如果我的小应用程序可以在世界某个地方访问，我想获得我当前的确切区域设置，以便其他国家/地区访问。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:54:05.500

您将获得运行程序的虚拟机的默认区域设置。如果未设置为正确的区域设置，则您无能为力。

# c# - SocketIO4net 中没有收到消息

> ID：15988003
> 
> 赞同：1
> 
> 时间：2013-04-13T12:52:34.250
> 
> 标签：c#, socket.io, socketio4net

我正在尝试使用 SocketIO4net 使用 socket.io API，但似乎无法接收任何消息。在同一个 VS2010 解决方案中，我有一个网站，其代码如下：

```
<script src="https://api.icbit.se/socket.io/socket.io.js"></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script>
    $(document).ready(function () {
        var conn = io.connect('http://api-url');

        conn.on('connect', function () {
            alert('Connected');
            conn.emit('message', { op: 'subscribe', channel: 'orderbook_BUM3' });
        });

        conn.on('message', function (data) {
            console.log('Incoming message: ' + data.private);
        });
    });
</script> 
```

这工作正常，可以连接到 API 并接收消息。然后我有 SocketIO4Net 库和测试项目，我将以下代码放入：

```
 socket = new Client(http://api-url); // url to the nodejs / socket.io instance

  socket.Opened += SocketOpened;
  socket.Message += SocketMessage;
  socket.SocketConnectionClosed += SocketConnectionClosed;
  socket.Error += SocketError;

  // register for 'connect' event with io server
  socket.On("connect", (fn) =>
  {
      socket.Emit("message", new { op = "subscribe", channel = "orderbook_BUM3"
      });
  });
  socket.On("message", (data) =>
  {
      Console.WriteLine("message received");
  });

  // make the socket.io connection
  socket.Connect(); 
```

这会连接并通知我成功，但是没有收到任何消息，也没有输出任何错误消息。我对 Socket.IO 还很陌生，有什么我应该做的不同的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:26:43.997

问题是 SocketIO4Net 正在连接和注册的默认命名空间。排序的答案是在 on.connect 事件处理程序中做一个小改动：为 IEndPointClient（比如 icbit）添加一个新变量，并在套接字连接上连接到“icbit”命名空间。

SocketIO4Net 默认的“On”处理程序也将处理命名空间事件，或者您选择将它们直接注册到给定的端点。（即使使用额外的命名空间连接也会建立单个连接）。您可以阅读有关 SO4N[命名空间的更多信息](http://socketio4net.codeplex.com/wikipage?title=Namespace)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Sockets;
using System.Text;
using System.Threading.Tasks;
using SocketIOClient;
using WebSocket4Net;

namespace Console_ICBIT
{
    public class SampleClient
    {
        private Client socket;
        private IEndPointClient icbit;

        private string authKey = "{your key here}";
        private string userId = "{your user id here}";

        public void Execute()
        {
            Console.WriteLine("Starting SocketIO4Net Client Events Example...");
            string ioServer = string.Format("https://api.icbit.se/icbit?AuthKey={0}&UserId={1}", authKey, userId);
            socket = new Client(ioServer);

            socket.Opened += SocketOpened;
            socket.Message += SocketMessage;
            socket.SocketConnectionClosed += SocketConnectionClosed;
            socket.Error += SocketError;

            // register for 'connect' event with io server
            socket.On("connect", (fn) =>
                                     {      // connect to namespace
                                         icbit = socket.Connect("/icbit");
                                         icbit.On("connect", (cn) => icbit.Emit("message", new { op = "subscribe", channel = "orderbook_BUM3" }));
                                     });

            // make the socket.io connection
            socket.Connect();
        }

        void SocketOpened(object sender, EventArgs e)
        {
            Console.WriteLine("SocketOpened\r\n");
            Console.WriteLine("Connected to ICBIT API server!\r\n");
        }
        public void subscribe()
        {
            //conn.Emit("message", new { op = "subscribe", channel = "orderbook_BUH3" }); // for BTCUSD futures
            //conn.Emit("message", "{op = 'subscribe', channel = 'orderbook_3' }"); //  for currency exchange section BTC/USD pair
        }
        void SocketError(object sender, ErrorEventArgs e)
        {
            Console.WriteLine("socket client error:");
            Console.WriteLine(e.Message);
        }

        void SocketConnectionClosed(object sender, EventArgs e)
        {
            Console.WriteLine("WebSocketConnection was terminated!");
        }

        void SocketMessage(object sender, MessageEventArgs e)
        {
            // uncomment to show any non-registered messages
            if (string.IsNullOrEmpty(e.Message.Event))
                Console.WriteLine("Generic SocketMessage: {0}", e.Message.MessageText);
            else
                Console.WriteLine("Generic SocketMessage: {0} : {1}", e.Message.Event, e.Message.Json.ToJsonString());
        }
        public void Close()
        {
            if (this.socket != null)
            {
                socket.Opened -= SocketOpened;
                socket.Message -= SocketMessage;
                socket.SocketConnectionClosed -= SocketConnectionClosed;
                socket.Error -= SocketError;
                this.socket.Dispose(); // close & dispose of socket client
            }
        }
    }
} 
```

如果您查看来自示例 html 页面示例的 websocket 框架跟踪 - 您会看到它使用“icbit”命名空间： ![订单簿_BUH3](https://i.stack.imgur.com/2kAXx.png)

请看看这个小解决方法是否不能解决您的问题...我进一步研究为什么查询字符串参数/名称空间连接并将其发布在项目[站点上](http://socketio4net.codeplex.com/)。

吉姆

# javascript - Mod_Rewrite 根本不处理 JavaScript 创建的动态 URL

> ID：15988012
> 
> 赞同：0
> 
> 时间：2013-04-13T12:54:35.803
> 
> 标签：javascript, html, apache, mod-rewrite

我试图通过使用 mod_rewrite 使我的 URL 对用户和 SEO 更友好，我确保我有 mod_rewrite 可用并启用，并且我已经写了一个规则，但是我没有得到任何工作，下面是我具有[http://hoursofdev.bitnamiapp.com/searchResults.html?fLat=41.7420294&fLong=-72.7398906&tm=&dt=&ct=&loc=&runBy=query&locType=gps&q=Starbucks](http://hoursofdev.bitnamiapp.com/searchResults.html?fLat=41.7420294&fLong=-72.7398906&tm=&dt=&ct=&loc=&runBy=query&locType=gps&q=Starbucks)的 mod-rewrite 规则（正在创建此 URL通过javascript函数）

变成

[http://hoursofdev.bitnamiapp.com/Starbucks.html](http://hoursofdev.bitnamiapp.com/Starbucks.html)

**.htaccess**

```
RewriteEngine On
RewriteRule ^([^/]*)\.html$ /searchResults.html?fLat=41.7420294&fLong=-72.7398906&tm=&dt=&ct=&loc=&runBy=query&locType=gps&q=$1 [L] 
```

我还确保在我的 httpd.conf 文件中允许覆盖。

任何帮助我弄清楚为什么我没有看到任何重写规则过程的方向都会有很大的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:04:28.810

你可以用别名代替吗？如果只有这个 url 使别名更容易一些：

```
Alias /Stabucks.html /searchResults.html?fLat=41.7420294&fLong=-72.7398906&tm=&dt=&ct=&loc=&runBy=query&locType=gps&q=Starbucks 
```

# cuda - 在 cuda 中使用未声明的标识符“blockIdx”

> ID：15988016
> 
> 赞同：0
> 
> 时间：2013-04-13T12:55:21.367
> 
> 标签：cuda, clang

我在尝试使用 clang 编译 .cu (Cuda) 文件时遇到了这个问题。甚至是未声明`threadId.x` 的`blockDim.x`。

任何人都可以请帮助包含哪些标题以使用clang编译它。使用 nvcc 编译工作正常。

# cordova - PhoneGap 2.5.0，如何打开 iPad/iPhone 的外部 URL？

> ID：15988019
> 
> 赞同：9
> 
> 时间：2013-04-13T12:55:40.163
> 
> 标签：cordova, phonegap-build

我尝试像这样打开外部网址，

```
<a href="http://google.com" target="_system" > 
```

也可以尝试，`_blank`但它在同一个应用程序屏幕中打开，而不是在 safari 浏览器中打开，

怎么解决..？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-13T15:05:13.813

如果您更改链接以使用新的 InAppBrowser 语法，则可以轻松地在系统 Web 浏览器、InAppBrowser 或应用程序的实际 Web 视图中打开您的 URL。

此代码应在系统 Web 浏览器（iOS 上的 Safari）中打开您的 URL：

```
<a href="#" onclick="var ref = window.open('http://google.com', '_system');"> 
```

更改`'_system'`为`'_blank'`将在 InAppBrowser 中打开 URL。

更改`'_system'`为`'_self'`将在您的应用程序的 web 视图中打开 URL（如果域被列入白名单）或 InAppBrowser（如果域未被列入白名单）。

示例要点：[https ://gist.github.com/wicketyjarjar/7043336](https://gist.github.com/wicketyjarjar/7043336)

*注意：Cordova/PhoneGap 3.0+ 需要安装 InAppBrowser 插件才能工作。*

要安装 InAppBrowser 插件（如有必要）...

使用科尔多瓦：`cordova plugin add org.apache.cordova.inappbrowser`

使用 PhoneGap：`phonegap local plugin add org.apache.cordova.inappbrowser`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T17:28:10.310

我的解决方案如下：首先我定义了一个打开 safary url 的函数：

```
LaunchNewWindow: function (url) {       
   if (window.location.toStringing().match(/file/i) && navigator.userAgent.match(/iPhone|iPad|iPod/i) ) {   
    window.open(url+"_xex_", "_blank");}
   else{
    window.open(url, "_blank");
   }
} 
```

那么您必须更改 CordovaLic\Classses\CDViewController.m (CordovalLib 3.0.0) 中的代码来处理您的空间网址：我在 line685 中添加了它：

```
 else {

// start stoneskin's change: force open external url in safari                              
                              if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]) {
    NSString *myurlstr = [url absoluteString];
    if ([myurlstr rangeOfString:@"_xex_"].location != NSNotFound){
        myurlstr = [myurlstr stringByReplacingOccurrencesOfString:@"_xex_" withString:@""];
        NSURL *myurl = [NSURL URLWithString:myurlstr];
        [[UIApplication sharedApplication] openURL:myurl];
        return NO;
    }

}
//end start stoneskin's change
if ([self.whitelist schemeIsAllowed:[url scheme]]) {
    return [self.whitelist URLIsAllowed:url];
} else {
    if ([[UIApplication sharedApplication] canOpenURL:url]) {
        [[UIApplication sharedApplication] openURL:url];
} else { // handle any custom schemes to plugins
        [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:CDVPluginHandleOpenURLNotification object:url]];
}
}

return NO;
} 
```

# jsf - Primefaces时间表：如何阻止时间？

> ID：15988023
> 
> 赞同：2
> 
> 时间：2013-04-13T12:55:53.427
> 
> 标签：jsf, primefaces, schedule

我想使用 primefaces 计划组件来显示某种日历。用户应该能够创建和编辑所有工作正常的点。

我无法实现的一件事是创建“阻止”日期：

在某些时候（比如午休时间），我不希望任何人能够在那里创建约会。我希望以某种方式将其可视化，使用不同的颜色左右。

我认为它不起作用的一种方法是添加“阻止事件”（表示带有自己事件的午休时间），因为这样拖放也会影响这些事件。虽然也许技术上可以防止这些事件被移动，但我真的很想找到另一种方法。

谁知道如何添加被阻止的日期（午休、周末等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T21:20:29.283

您可以发送一个 DefaulScheduleEvent 来设置您的开始和结束日期：

[http://www.primefaces.org/docs/api/3.4/org/primefaces/model/DefaultScheduleEvent.html](http://www.primefaces.org/docs/api/3.4/org/primefaces/model/DefaultScheduleEvent.html)

在此处查看示例：

[http://www.primefaces.org/showcase/ui/data/schedule.xhtml](http://www.primefaces.org/showcase/ui/data/schedule.xhtml)

# firefox - 来自 Firefox 插件的控制台日志记录

> ID：15988025
> 
> 赞同：3
> 
> 时间：2013-04-13T12:56:00.940
> 
> 标签：firefox, logging, console, firefox-addon, mozilla

Mozilla 文档（[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/console.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/console.html)）说我应该用它`console.log`来从扩展生成消息。据说这些消息会出现在 Firefox 错误控制台中。但这对我来说不是这样。我今天第一次使用插件生成器，我想创建一个扩展，在某些事件上切换选项卡。选项卡确实切换到了我期望的选项卡，所以我的代码肯定会运行。但是console.log 输出无处可见。

我已将过滤器设置为“全部”。我看到的只是来自插件构建器本身的 CSS 警告。

我还安装了 Firebug。它也没有显示任何东西。（不过，在网页上下文中使用 console.log 时，这可以正常工作。）Firebug 的问题在于它只为一个/一些选项卡启用，所以在切换选项卡时，它是无用的。我需要一个始终存在的日志窗口。

那么console.log 的输出会在哪里结束呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T20:33:56.693

继续`console.log("something")`在您的插件中进行测试`main()`；

如果错误控制台（“消息”选项卡）中没有显示任何内容，则可能是 Firefox 未配置为显示`console.log`（最近发生在 jetpack sdk 1.14 中）。有关详细信息，请参阅：[SDK 1.14 中对 console.log 行为的更改](https://blog.mozilla.org/addons/2013/03/27/changes-to-console-log-behaviour-in-sdk-1-14/)。

快速而肮脏的总结：`about:config`设置`extensions.sdk.console.logLevel`为`"all"`

虽然从你的问题：

> 我已将过滤器设置为“全部”。

...听起来你已经意识到了这一点。因此，您的意思并不完全清楚。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-18T23:07:59.463

而不是`var aConsoleService = Cc...`只坚持以下内容，您可以使用所有内容：

```
Cu.import('resource://gre/modules/devtools/Console.jsm'); 
```

现在可以做任何事情`console.log('blah')`，，，，`console.time('rawr')`等等`console.endTime('rawr')`等等

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-07T09:48:53.407

只是为了完整性：在一个引导的、非基于 SDK 的插件中，我必须在 bootstrap.js 中添加这两行以获得伪造的 console.log()：

```
var aConsoleService = Cc["@mozilla.org/consoleservice;1"].getService(Ci.nsIConsoleService);
var console = {log:function(str){aConsoleService.logStringMessage(str);}} 
```

可能对其他人有用，我猜..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-18T10:27:06.977

我猜他们改变了一些东西，现在 console.log 没有显示。我使用 console.error 进行调试，它仍然显示在 ctrl-shift-j 中。

此页面说明了有关弃用错误控制台并改用 Web 控制台的内容。应该是有关系吧 [https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIConsoleService](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIConsoleService)

这不需要sdk。

# sql - Display a Column in a RIght Order

> ID：15988026
> 
> 赞同：-1
> 
> 时间：2013-04-13T12:56:10.980
> 
> 标签：sql, sql-server-2008-r2

Goal:
To retrieve the order in a right order.

```
Requested result in the table

a = nvarchar
n = int
text = nvarchar

a  n  text
----------
a  3  sd  
a  2  df
a  1  cv
c  2  we
c  1  qw
b  5  zx
b  4  hj
b  3  cv
b  2  fv
b  1  av
...
...
...
...
...
...
more rows to go 
```

Problem:
I don't know how to do it with SQL code in order to retrieve the column 'n' in a right order. The right order is displayed in the goal part.

```
a = nvarchar
n = int
text = nvarchar

a  n  text
----------
a  1  sd  
a  2  df
a  3  cv
c  1  we
c  2  qw
b  1  zx
b  2  hj
b  3  cv
b  4  fv
b  5  av
...
...
...
...
...
...
more rows to go 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:14:46.670

I: So you want to know how to update your table to take the new n column ordering into account?

You: Yes, it's correct. Changing only the column `n` and its chronological order for the data. The desired value start with the highest value and goes down all the way to value '1'. It can be changed or you also can add a new column.

You can update the `n`-column with `ROW_NUMBER` in a `CTE`:

```
WITH cte AS 
(
    SELECT a, n, text, 
           rn = Row_number() 
                 OVER( 
                   partition BY a 
                   ORDER BY n DESC) 
    FROM   dbo.Table1) 
UPDATE cte 
SET    n = rn; 
```

[**DEMO**](http://sqlfiddle.com/#!3/4bcb5/10/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:58:39.387

You can specify order like that:

```
SELECT
    a, n, txt
FROM
    TableName
ORDER BY
    a,
    n DESC 
```

But it will sort according to `a` value first too.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T12:59:12.813

```
Select * from table order by a, n 
```

# windows-phone-7 - Windows Phone AppResources 映像

> ID：15988031
> 
> 赞同：1
> 
> 时间：2013-04-13T12:56:33.960
> 
> 标签：windows-phone-7

我的项目中有一个名为 AppResources.resx 的文件，我可以在其中放置字符串以进行本地化。然后我可以通过绑定访问它们；

```
Header="{Binding Path=LocalizedResources.MyString, Source={StaticResource LocalizedStrings}} 
```

您还可以将图像添加到此资源文件，但我不知道如何绑定到我放在那里的图像！有办法吗？我不应该把图像放在这个文件中吗？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:59:12.917

您可以在 ResourceDictionary 中创建图像画笔：

```
<ImageBrush x:Key="MyImageBrush" ImageSource="/Img-1.jpg"/> 
```

您可以调用它来设置为背景，或者作为矩形的填充：

```
<Rectangle x:Name="ImageForeground" Height="100" Width="100" 
    Fill="{StaticResource MyImageBrush}" /> 
```

其他选择是使用特殊的转换器，就像[这里](http://www.geekchamp.com/tips/wp7-imagebrush-binding-problem-workaround)描述的那样。

这种方式适用于无法本地化的图像。

如果你想为不同的文化设置不同的图像，你可以试试[这种方式](http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2009/07/14/silverlight-quick-tip-resx-image-resources.aspx)。不确定它是否适用于 windows phone，但它适用于 Silverlight。

# java - 尝试打印字符但仍打印字符串

> ID：15988034
> 
> 赞同：0
> 
> 时间：2013-04-13T12:56:57.407
> 
> 标签：java, string, char

我试图从 2d 字符数组中打印字符，但是我不断返回一个字符串而不是每个字母。例如命令行中的参数是

“-加密 abcdefghij”

```
 String command = args[0]; 
    String Text = args[1]; //letters to be 

    char letters [] = Text.toCharArray(); 
    int m = Text.length(); //number of letters to be decrypted/encrypted

    String command = args[0]; 
    String Text = args[1]; //leters to be 

    char letters [] = Text.toCharArray(); 
    int m = Text.length(); //number of letters to be decrypted/encrypted

    if (command.equals("-encrypt")) {

        //if statement was here before for perfect square numbers

        else if     ( m / (int) Math.sqrt(m) != Math.sqrt(m) ) { //non perfect square digits

        int RootM = (int) Math.pow((Math.sqrt(m))+1,2); //overall size of 2d array (depth*width)
        int RootN1 = (int) Math.sqrt(RootM); //length of rows & columns

        char [][] box = new char [RootN1][RootN1]; //define dimensions of 2d array

            for (int i=0; i<RootN1; i++) {
                for (int j=0; j<RootN1; j++) {
                    box[i][j]=letters[2*i+j];
                }
            }

            for (int i=0; i<RootN1; i++) {
                for (int j=0; j<RootN1; j++) {  

            System.out.print(box[j][i]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:03:02.370

```
 for (int i=0; i<RootM; i++) {
    for (int j=0; j<RootM; j++) {
      box [i] = letters;
      box [j] = letters;
      System.out.print(box[i]); //displays encrypted text
    }
 } 
```

是有问题的。您放入`box[i] = letters`内部循环，因此它将被执行`RootM*RootM`多次，这与`print`语句相同。您可能需要清除`box`二维字符数组上的分配和打印逻辑。

根据您对评论的回复，您需要将 abcd 放入`2*2`矩阵中，第一行包含`ab`，第二行包含`cd`。您可以找到索引映射如下：

```
index in 1D array:
    0    1    2  3

index in 2D array:

  (0,0) (0,1) (1,0) (1,1) 
```

所以映射是：

```
box[i][j] = letters[2*i+j]; 
```

现在假设您有一个 4*4 矩阵：

```
index in 1D array:
0  1  2  3  4 5  6  7  8  9  10  11  12  13  14  15

index in 2D array:
(0,0),(0,1),(0,2),(0,3),(1,0),(1,2) .... 
```

您将需要映射

```
box[i][j] = letters[4*i+j]; 
```

简而言之，如果行数为 N，则需要

```
box[i][j] = letters[N*i + j]; 
```

您的循环应如下所示：

```
for (int i=0; i<RootM; i++) {
  for (int j=0; j<RootM; j++) {
    box [i][j] = letters[2*i+j];
  }
}

//you can now print column by column
for (int i=0; i<RootM; i++) {
  for (int j=0; j<RootM; j++) {
     System.out.print(box [j][i]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:15:37.830

您在级联 for 循环中执行的操作如下：

```
box[0] = "abcd";
box[0] = "abcd";
box[0] = "abcd";
box[1] = "abcd";
box[1] = "abcd";
box[0] = "abcd";
... 
```

我不完全知道您是如何尝试填充该二维数组的，但我想您将不得不做类似于`box[i][j] = letters[2*i+j]`.

# macos - 开发人员工具在 Chrome osx 中不起作用

> ID：15988035
> 
> 赞同：6
> 
> 时间：2013-04-13T12:57:02.230
> 
> 标签：macos, google-chrome, web-inspector

尝试通过主菜单或检查元素上下文选项在 Chrome 中打开开发人员工具，我看到检查器窗口闪烁然后消失。每次。

这是怎么回事？无论如何都可以在不删除我的个人资料的情况下重置开发人员工具配置？

我在 Apple MacBook Pro 上使用 v 26.0.1410.43。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-04T22:48:40.127

我刚刚遇到了一个非常相似的问题，即在开发工具本应出现的地方出现了一个白色窗口。（我认为这是由于 Photoshop CS6 在我更新到 Yosemite 后每 10 分钟从我的机器中冻结一次垃圾造成的）

我无需删除所有其余用户数据即可解决此问题的方法是删除以下文件：

`~/Library/Application Support/Google/Chrome/Default/Local Storage/chrome-devtools_devtools_0.localstorage-journal`

退出 Chrome，删除该文件，重新启动，希望您一切顺利！

（感谢 Rob W. 关于如何使用全新目录设置运行 Chrome 的提示）

# php - FPDF 库错误

> ID：15988042
> 
> 赞同：0
> 
> 时间：2013-04-13T12:57:58.627
> 
> 标签：php, fpdf

我正在使用 FPDF 库，当我尝试制作 PDF 时，出现以下错误：

> 警告：无法修改标头信息 - 标头已发送（输出开始于-----） FPDF 错误：某些数据已输出，无法发送 PDF 文件

```
//Send to standard output
            if(ob_get_length())
                $this->Error('Some data has already been output, can\'t send PDF file');
            if(php_sapi_name()!='cli')
            {
                //We send to a browser
                header('Content-Type: application/pdf');
                if(headers_sent())
                    $this->Error('Some data has already been output, can\'t send PDF file');
                header('Content-Length: '.strlen($this->buffer));
                header('Content-Disposition: inline; filename="'.$name.'"');
                header('Cache-Control: private, max-age=0, must-revalidate');
                header('Pragma: public');
                ini_set('zlib.output_compression','0');
            }
            echo $this->buffer; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:01:38.110

在某些时候，某些事情会导致 php 向客户端发送数据。

如果您看不到任何原因（即您没有明确发送数据），则`<?php`在源文件中的 PHP 代码 ( ) 开始之前查找杂散文本、空格、换行符等。

那应该可以解决问题。

[注意：正如wh1t3h4ck5](https://stackoverflow.com/users/679733/wh1t3h4ck5)所指出的，如果错误的来源不在当前文件中，您可能还必须检查包含的文件。查找最近修改的文件。

# symfony - 我使用哪个 Symfony2 版本？2.2 还是 2.3？

> ID：15988044
> 
> 赞同：1
> 
> 时间：2013-04-13T12:58:06.483
> 
> 标签：symfony, symfony-2.2

我刚开始使用 Symfony2 并希望创建中型站点。过去两个月我一直在学习它。

我目前安装了 2.2。

问题是：我现在应该使用 2.2 创建站点还是放弃它并使用 2.3，即使它还没有完全发布。

我希望这个站点可以使用很多年，所以我认为 2.3 LTS 版本更好，但当然它还没有完全发布。

我并不担心次要版本中的奇怪额外功能，但事实是 2.3 是一个长期版本（3 年）或我感兴趣的东西。现在在 2.2 中编写一个网站似乎很疯狂? 显然 2.2 支持 8 个月？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T13:34:19.887

如果您需要稳定`right now`并且网站足够强大以在 2.3 达到一定成熟度之前功能齐全，那么您应该选择 2.2，否则 2.3 是正确的选择，因为是 LTS 的事实为长期项目提供了足够的支持.

Symfony 2.2

*   需要稳定的代码`right now`
*   站点足够小，可以在 2.3 成熟之前完全正常运行
*   您不介意过去 8 个月的安全更新

Symfony 2.3

*   LTS，长期项目支持，3 年
*   很多开发者会掌握这个版本，论坛、irc 等有很多帮助者

所以简而言之，现在使用 2.2 的原因非常具体，如果时间不和问题我会使用 2.3 beta 并继续升级直到正式发布。

引用 Potencier：`Symfony2 LTS release, will be released at the end of May 2013`

# jquery - 文件上传到服务器中的文件夹

> ID：15988047
> 
> 赞同：0
> 
> 时间：2013-04-13T12:58:14.207
> 
> 标签：jquery, asp.net, json

我只想将上传的文件保存到服务器中的文件夹中。我的系统设计有 UI 和服务器部分。UI 完全是 HTML，服务器端是 ASP.net。数据传输是通过json代码。

假设我在 UI 中有一个 HTML 文件控件，那么我如何将它上传到服务器。

谁能给我举个例子

代码示例

```
 $("#btn_AddDoc").click( function (e) {
          e.preventDefault();
          var InsDocDet = {};
          InsDocDet.docname=$("#DocName").val();

          InsDocDet.ownerUser=1;
          InsDocDet.catid=$("#drp_cat").val();
          InsDocDet.createDatetime=new Date();
          InsDocDet.description_d=$("#Desc").val();
          InsDocDet.comments_=$("#cmnts").val();
          InsDocDet.deptid_=1;
          InsDocDet.con_type=1;
          InsDocDet.size_=1;
          InsDocDet.Doc_status="up";
          var fullPath =$("#doc_upload").val(); //document.getElementById('doc_upload').value;
          if (fullPath) {
          var startIndex = (fullPath.indexOf('\\') >= 0 ? fullPath.lastIndexOf('\\') : fullPath.lastIndexOf('/'));
          var filename = fullPath.substring(startIndex);
          if (filename.indexOf('\\') === 0 || filename.indexOf('/') === 0) {
          filename = filename.substring(1);
          InsDocDet.file_name=filename;
          $.ajax({
              type: "POST",
            // <!-- url: "http://localhost/EMRDMSService/Service.asmx/User_Login",-->
             url: "http://localhost/EMRDMSService/Service.asmx/srv_Insert_Document",
              data: "{ins_Doc:" + JSON.stringify(InsDocDet) + "}",
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              success: function (r) {                     
                              console.log(r.d.STAT);
              }
          });
      }); 
```

在网络服务中

```
public string srv_Insert_Document(insert_doc_details ins_Doc)
{
    InsDoc_Ret doc_ret = new InsDoc_Ret();
    try
    {

        string filename = Path.GetFileName(ins_Doc.file_name);
        string path = Server.MapPath("~/");
        File_Doc.SaveAs(Server.MapPath(Path.Combine("~/Files/" + dept_name + "/", filename)));
        string ctype = File_Doc.PostedFile.ContentType;
        int len = File_Doc.PostedFile.ContentLength;
        double size = len / 1024;
        string sizkb = Convert.ToString(size) + " KB";
        string fname = dept_name + "/" + filename;

        int doc_id = newdb_class.Insert_Data_Scaler("INSERT INTO dms_document_details (DOC_NAME,FILE_NAME,OWNER_USER,CAT_ID,CREATE_DATE,DESCRIPTION,COMMENTS,DEPT_ID,contype,Size,DocStatus) VALUES ('" + ins_Doc.docname + "','" + ins_Doc.file_name + "','" + ins_Doc.ownerUser + "','" + ins_Doc.catid + "',NOW(),'" + ins_Doc.description_d + "','" + ins_Doc.comments_ + "','" + ins_Doc.deptid_ + "','" + ins_Doc.con_type + "','" + ins_Doc.size_ + "','" + ins_Doc.Doc_status + "')");
        doc_ret.SID = "1";
        doc_ret.STAT="SUCCESS";

    }
    catch (Exception ex)
    {
        doc_ret.SID = "1";
        doc_ret.STAT = "FAIL";
    }
    JavaScriptSerializer js = new JavaScriptSerializer();
    string strJSON = js.Serialize(doc_ret);
    return strJSON;

} 
```

在此代码中，服务中的“File_Doc”指的是 asp.net 中的文件上传控件。那么如何用html文件控件替换它。

* * *

我有一些代码

```
 public string srv_Insert_Document(insert_doc_details ins_Doc)
{
    InsDoc_Ret doc_ret = new InsDoc_Ret();
    try
    {
        DataTable dt = new DataTable();
        dt = newdb_class.Read_Data("SELECT Dept_Name FROM dms_dept_details WHERE Dept_id='" + ins_Doc.deptid_ + "'");
        string dept_name = dt.Rows[0][0].ToString().Trim();
        string filename = Path.GetFileName(ins_Doc.file_name);
        string path = Server.MapPath("~/");
        HttpPostedFile file = Request.Files["myFile"];
        if (file != null && file.ContentLength > 0)
        {
            string fname = Path.GetFileName(file.FileName);
            file.SaveAs(Server.MapPath(Path.Combine("~/Files/" + dept_name + "/", filename)));
        }

        string ctype = file.ContentType;
        int len = file.ContentLength;
        double size = len / 1024;
        string sizkb = Convert.ToString(size) + " KB";

        string fname_ins = dept_name + "/" + filename;

        int doc_id = newdb_class.Insert_Data_Scaler("INSERT INTO dms_document_details (DOC_NAME,FILE_NAME,OWNER_USER,CAT_ID,CREATE_DATE,DESCRIPTION,COMMENTS,DEPT_ID,contype,Size,DocStatus) VALUES ('" + ins_Doc.docname + "','" + ins_Doc.file_name + "','" + ins_Doc.ownerUser + "','" + ins_Doc.catid + "',NOW(),'" + ins_Doc.description_d + "','" + ins_Doc.comments_ + "','" + ins_Doc.deptid_ + "','" + ins_Doc.con_type + "','" + ins_Doc.size_ + "','" + ins_Doc.Doc_status + "')");
        doc_ret.SID = "1";
        doc_ret.STAT="SUCCESS";

    }
    catch (Exception ex)
    {
        doc_ret.SID = "1";
        doc_ret.STAT = "FAIL";
    }
    JavaScriptSerializer js = new JavaScriptSerializer();
    string strJSON = js.Serialize(doc_ret);
    return strJSON;

} 
```

但我有一个错误`HttpPostedFile file = Request.Files["myFile"];`

即当前上下文中不存在请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:12:31.400

不可以。上传文件需要完整的回发。

您可以模拟将 ajax 调用发布到隐藏的 iFrame（因此您的页面不会更改）。然后使用 jquery/javascript 检查 iFrame 的内容，您可以查看上传是否成功并刷新屏幕的某些部分。

如果您使用的是 ASP.NET MVC3 或 MVC4，这里是一个示例：[http ://www.dustinhorne.com/post/2011/11/16/AJAX-File-Uploads-with-jQuery-and-MVC-3.aspx](http://www.dustinhorne.com/post/2011/11/16/AJAX-File-Uploads-with-jQuery-and-MVC-3.aspx)

如果您想在 JS 中使用更通用的方法：http: [//tips.itliveweb.com/ajax/upload-image-using-iframe-javascript-ajax.html](http://tips.itliveweb.com/ajax/upload-image-using-iframe-javascript-ajax.html)

# sql - 如何命名表和列？SQL

> ID：15988050
> 
> 赞同：2
> 
> 时间：2013-04-13T12:58:27.793
> 
> 标签：sql

我想知道在 SQL 中命名列和表的最佳方法是什么？

目前，我的表是这样命名的：“users”和“user_id, user_password”列。我知道在列前加上表名是个坏主意，这就是我来问我问题的原因。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:42:03.180

看看[ISO-11179 Naming Conventions](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/iso-11179-naming-conventions) What you want is 11179-5, part 5: Naming and Identification Principles

> ISO/IEC 11179 的这一部分为管理项目的识别提供了指导。标识是用于指定或标识特定数据项的广义术语。根据标识符的使用，可以以各种方式完成识别。识别包括分配对人类没有内在意义的数字标识符；图标（已被赋予意义的图形符号）；以及具有嵌入含义的名称，通常用于人类理解，与数据项的定义和值域相关联。

# python-2.7 - 打开批处理文件以从 python 获取最大化的 cmd 提示符

> ID：15988053
> 
> 赞同：0
> 
> 时间：2013-04-13T12:58:53.427
> 
> 标签：python-2.7, batch-file

*我
在执行期间从 python 脚本调用批处理文件，打开一个命令提示符。
我的问题是如何在从 python 脚本调用批处理文件时获得最大化的命令提示符窗口？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T07:42:44.537

我不是绝对肯定的，但我认为 Python 不可能做到这一点。解决此问题的一种方法是为批处理文件创建快捷方式，右键单击快捷方式并将其设置为在快捷方式的属性中最大化运行，然后从 Python 启动快捷方式，将其称为链接 (lnk)，例如示例下面与 Python 2.5 中使用的一样：

```
import os;
os.startfile('C:\\batchfile\\test.bat.lnk') 
```

# java - 返回再次询问行数

> ID：15988055
> 
> 赞同：1
> 
> 时间：2013-04-13T12:59:39.467
> 
> 标签：java

```
 if (choice.equals("1")){
            int c = 0;
            System.out.println("Welcome " + name + ",");
            System.out.println("\nYou have chosen to play [1] " + arr[c][0] +".\n");
            System.out.println(arr[c][0] +" costs €" + arr[c][2] + " to play and has a      minimum purchase of " + arr[c][1] + " lines.") ;
            System.out.print("\nHow many " + arr[c][0] + " would you like? ");
            int num = s1.nextInt();

            while (num < Integer.parseInt(arr[c][1])){
                System.out.println( arr[c][0] + " has a minimum purchase of " + arr[c][1] + " lines");
                num = s1.nextInt();
            }

            System.out.println("\nThe total cost to play "+ arr[c][0] + " will be €" + (num*Double.parseDouble(arr[c][2])));

            System.out.println("\nContinue? Y/N/Q");
            String cont = s1.next().toUpperCase();
            if (cont.equals("N")||cont.equals("n")){
                System.out.print("\nHow many " + arr[c][0] + " would you like? ");
            }
            else if (cont.equals("Q")||cont.equals("q")){
                menu();
            }
            else if (cont.equals("Y")||cont.equals("y")) {
                //call the random generator
                random(c,num);     
                //call the menu
                menu();
            }
            else {
                System.out.println("Invalid option");
                menu();

            }

        } 
```

如果我选择“N”，它应该再次询问 System.out.print("\nHow many " + arr[c][0] + " 你想要吗？"); 并再次读取值，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:22:54.457

你可以去一个do-while循环，即

```
do
{
   ..........
   .........
}while(cont.equalsIgnoreCase("N")); 
```

还有一件事不需要使用equals（）检查大小写字母，而是使用equalsIgnoreCase（）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:06:09.187

```
while (cont.equalsIgnoreCase("N")){
//Do stuff
} 
```

# python - 冻结的 Python 二进制文件会访问本地解释器和全局解释器锁（GIL）吗？

> ID：15988062
> 
> 赞同：0
> 
> 时间：2013-04-13T13:00:36.480
> 
> 标签：python, freeze, gil

我正在开发一台 Linux 多核机器，在该机器上我只需在命令行上使用解释器（实际上只是“python script.py”）同时多次调用相同的 Python 脚本。我发现即使我在机器资源范围内，性能也比单个调用慢得多。我相信这是因为实例通过全局解释器锁 (GIL) 共享解释器 - 即，无论如何，几个实例最终都运行“单核”。如果我对脚本的冻结 Python 二进制版本 ( [http://wiki.python.org/moin/Freeze](http://wiki.python.org/moin/Freeze) ) 做同样的事情，那也会发生吗？我不相信，因为二进制“带有自己的解释器”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:07:40.073

你的信念是错误的。GIL 是流程全局的。独立的 CPython 进程不共享任何内容，甚至 GIL 也不共享。只有同一个进程中的线程竞争同一个全局锁。您看到的性能下降还有另一个原因。是的，对于冻结的可执行文件 IIUC，规则是相同的。

# algorithm - 国际象棋任务 - 国王，车对国王

> ID：15988069
> 
> 赞同：0
> 
> 时间：2013-04-13T13:01:32.000
> 
> 标签：algorithm, chess, minmax

我想做一个C程序来找到最小的编号。在国王和车与国王中检查队友所需的移动，我应该使用最小最大算法。很多搜索没有让我找到任何富有成果的东西。如果有人给出一些步骤如何去做吧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:10:50.063

每个最小-最大算法都认为您拥有所有可能的位置树。因此，首先您必须对这棵树进行分类。考虑到所有其他棋子，King 的步数有限（8），但树会长得足够大。

您应该用于评估的功能是评估对面国王倾向于放置在棋盘末端线的棋盘（因为如果您知道在您感兴趣的场景中如何实现配对，那就是配对位置）。因此，在树的每个位置，国王更接近棋盘的末端线，此功能将具有更大的价值。

对于我的国际象棋经验，考虑到在您感兴趣的场景中，每个给定棋盘的最大移动数为 25...

棋盘上每个位置的函数值的简单示例：

```
 100 90 90 90 90 90 90 100
  90  80 80 80 80 80 80 90
  90  80 70 70 70 70 80 90
  90  80 70 60 60 70 80 90
  90  80 70 60 60 70 80 90 
  90  80 70 70 70 70 80 90 
  90  80 80 80 80 80 80 90 
  100 90 90 90 90 90 90 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T22:09:19.970

我建议定义所有终端位置（将死和僵局）并向后工作，为每个位置创建一个位置哈希表和“交配距离”。或者下载一个 Nalimov 表库，因为这个任务已经完成了！

# windows-8 - 如何询问用户是否激活后台任务？

> ID：15988071
> 
> 赞同：0
> 
> 时间：2013-04-13T13:01:54.697
> 
> 标签：windows-8, background-process, user-permissions

我开发了一个 Windows 8 应用程序，它使用后台任务来检索数据并激活动态磁贴功能。一切正常，但我需要转到应用程序设置并手动打开它才能使其正常工作。是否可以以编程方式请求用户激活？这是我的代码：

```
private void checkTaskRegistration()
        {
            bool isTaskRegistered = false;

            foreach (var task in BackgroundTaskRegistration.AllTasks)
            {
                if (task.Value.Name == "TileUpdater")
                {
                    isTaskRegistered = true;
                    break;
                }
            }

            if (!isTaskRegistered)
            {
                registerBackgroundTask("TileUpdater", "BackgroundTasks.TileUpdaterBackgroundTask");
            }
        }

        private void registerBackgroundTask(string name, string entrypoint)
        {
            BackgroundTaskBuilder btb = new BackgroundTaskBuilder();
            btb.Name = name;
            btb.TaskEntryPoint = entrypoint;
            btb.SetTrigger(new TimeTrigger(15, false));
            btb.AddCondition(new SystemCondition(SystemConditionType.InternetAvailable));
            BackgroundTaskRegistration task = btb.Register();
        } 
```

首先我检查任务是否已经注册，如果不是我注册它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:21:23.837

我找到了。你只需要打电话：

```
BackgroundExecutionManager.RequestAccessAsync(); 
```

就是这样。

# algorithm - matlab中的大数回文

> ID：15988072
> 
> 赞同：0
> 
> 时间：2013-04-13T13:02:14.097
> 
> 标签：algorithm, matlab, math, number-theory

将数字转换为字符串并反转该字符串，然后比较两个字符串是否相等。

我正在使用上述算法来找出回文。

问题是，我想检测从 10^50 到 10^100 的回文数，而这个函数耗时太长。

任何更快的算法或提示来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:01:56.647

我认为您需要对此采取更“组合”的方法。与其对所有这些数字进行暴力破解（以今天的计算能力可能无法完成......），不如分步考虑：

### 给定位数，有多少种可能的组合可以是回文？

好吧，首先，我们可以开始查看数字很少的数字，以了解它是如何工作的：

*   对于 2 位数字，如果您选择第一个数字，那么如果该数字是回文，则第二个数字必须相同。也就是说，在以 10 为底的情况下，您有 10 个选择（如果您将 00 视为两位数）或 9 个选择（如果您没有，这更有意义）。

*   对于 3 位数字，如果您选择第一个数字，则第三个数字是固定的。这为您提供了 9 种选择（因为我们不称之为`020`三位数）。中间的数字仍然是免费的，所以这给了你另外 10 个（因为中间的数字可以是 0）独立的选择。回文总数由 9*10 = 90 给出。

*   对于4位数字，可以独立选择第一位和第二位，然后第三位和第四位是固定的。第一个必须是非零的，但之后的零是可以的。9*10 = 90 个回文。

*   对于 5 位数字，您独立选择第一、第二和第三，然后第四和第五是固定的。第一个非零，其余完全免费：9*10^2 = 900 个回文。

我想我们已经准备好概括这一点了，不是吗？

### 一般方法

我们在上面提到，对于*偶数*，您可以独立选择*一半*的数字，对于*奇数*，您还可以选择*中间*数字。第*一个*数字不能为 0，但其他所有数字都可以，让步。这意味着对于带有`N`数字的数字，回文选择的数量是
P = 10 [*] 9 ^(ceil( ^N / [2] )-1)。请注意，为此，^N / [2]必须是浮点除法 - 对于 N = 7，我们需要 3.5，因此我们可以将其四舍五入到 4 并选择中间数字。

### 具体问题

要计算 10^50 和 10^100 之间的回文数，我们还需要利用一点信息：我们对这些数字的位数的了解。由于 10 ^(50)和 10 ^(51)之间的所有数字都有 50 位数字（并且由于 10 ^(100)不是回文），其余部分非常简单。

一个给你计数的python片段：

```
import math

palindromes = 0
for n in range(50):
    palindromes = palindromes + 10**math.ceil((n+50)/2.0)*0.9 
```

或者，使用做同样事情的单线：

```
import math
sum(.9*10**math.ceil((n+50)/2.0) for n in range(50)) 
```

由于这循环超过 50 次迭代，而不是几乎 10 ^(100 次)，因此对于任何计算机来说都没有问题。还要注意 9*10 ^(N-1) = 0.9*10 ^N。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:55:50.470

有多少个 k 位回文数？好的，现在，有多少个 k+2 位回文数？看到我们可以为回文数写一个递归。

将 P(n) 定义为 n 位回文数。任意假设只有一个 0 位回文，所以 P(0) = 1。

同样，说有 9 个一位回文串似乎是合乎逻辑的，因此 P(1) = 9。并且 P(2) 也是 9，因为两位数回文串很容易构建和计数。

我们可以生成 3 位回文数吗？我们将通过向所有 1 位回文串附加/前置任何非零数字来做到这一点。这错过了 x0x 形式的回文，所以我们也将它们添加进去。

```
P(3) = P(1)*9 + 1*9 = (P(1) + 1)*9 
```

5位回文呢？再次，将任何非零数字附加并添加到较小的回文序列中。但是我们需要担心回文中需要零的情况。所以 x0p0x 和 x000x 都是回文。

```
P(5) = P(3)*9 + P(1)*9 + 1*9 = (P(3) + P(1) + 1)*9 
```

（我们可以更进一步，将 P(5) 写成 P(1)。）

所以我们有 P(5) = 900。一个好主意是总是验证这样的简单声明。这让我们更有信心，我们没有错过任何东西。我会在 MATLAB 中做到这一点。

```
n = 10000:99999;
D = dec2base(n,10);
isp = sum(all(D == fliplr(D),2))

isp =
   900 
```

我们可以外推上述逻辑来计算 7 位回文数，得到公式：

```
P(7) = P(5)*9 + P(3)*9 + P(1)*9 + 1*9 = (P(5) + P(3) + P(1) + 1)*9 
```

这表明 P(7) = 9000。同样，我们可以使用蛮力测试该声明。

```
n = 1000000:9999999;
D = dec2base(n,10);
isp = sum(all(D == fliplr(D),2))
isp =

        9000 
```

因此，当 n 为奇数时，计算 n 位回文似乎很容易。计算偶数 n 的 n 位回文数同样容易。我会让你推导出这些关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:15:35.810

因为数字的回文属性基本上取决于您要表示数字的基数，所以您必须将其转换为字符串，在您选择的基数中。特定的基地可能有特定的技巧，但在一般情况下，我猜最快的方法是：

```
% Suppose your number is stored as string in str
strcmp(str, str(end:-1:1)) 
```

**稍后编辑：**现在我看到您要寻找的不是“回文”测试，而是计算两个给定数字之间的回文。同样，这取决于基数，但是您始终可以通过计算基数 B 中具有 n 位数字的有效数字来计算基数 B 中具有 2n 或 2n+1 位数字的回文数。但这与 Matlab 无关，我猜它与数学有关。

**甚至稍后编辑：**也许这会有所帮助（这不是最佳的，但我希望清楚且有帮助）：

```
%COUNT_PALINDROMES returns the number of palindrome
% numbers with nd digits in base b

function np = count_palindromes(b, nd)

        % For the sake of brevity the function assumes
        % that b has natural values greater than 1, and
        % nd has appropriate values also.

        if nd == 1
                % Single digit "palindromes"
                np = b;

        elseif mod(nd,2) == 1
                % 2n+1 digit palindromes
                %    abcd...uvXvu...cba
                n  = fix(nd/2);
                np = (b-1)*b^n;

        else
                % 2n digit palindromes
                %    abcd...uvvu...cba
                n = fix(nd/2);
                np = (b-1)*b^(n-1);
        end;
end 
```

使用其值时请注意浮点精度。我不确定您是否能够*准确地*将回文数保持在双精度 - 这是 Matlab 中的默认类型。根据需要更改为其他（集成）类型。

# javascript - 当您将点击处理程序添加到链接并使用 Ajax 加载页面的部分而不是整个页面时，它会调用什么？

> ID：15988074
> 
> 赞同：0
> 
> 时间：2013-04-13T13:02:21.363
> 
> 标签：javascript, ajax

正如标题所说，我需要找出构建网站的方法的名称。

我开发了自己的 javascript 来执行此操作，但是当 javascript 被禁用时，该站点无法运行。显然，有一种方法可以在启用 javascript 时使用 ajax 以及在禁用 javascript 时使用正常方式。

如果有人能在这里指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:07:46.240

听起来您正在寻找 Pagination 或 Ajaxify

# cloudbees - cloudbees DEV@cloud 账户的时间预算什么时候重置？

> ID：15988075
> 
> 赞同：0
> 
> 时间：2013-04-13T13:02:21.080
> 
> 标签：cloudbees

今天我的时间预算达到了零。虽然我最近大量使用它，但我认为我不能在本月用完 300 分钟的全部预算。

cloudbees DEV@cloud 账户的时间预算什么时候重置？

或者目前是否有重置预算的问题？当我尝试获取有关我的使用情况的一些报告时，我收到一条消息，内容被移动到新的基础架构......也许这会导致一些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:59:44.230

您的构建配额将在下个月的订阅日重置，请参阅[https://grandcentral.cloudbees.com/admin/minutes](https://grandcentral.cloudbees.com/admin/minutes)

# sql - 提示用户输入多个值（并在查询中使用结果）

> ID：15988077
> 
> 赞同：0
> 
> 时间：2013-04-13T13:02:27.973
> 
> 标签：sql, reporting-services, ssrs-2008

我正在尝试编写一个报告查询，提示报告用户输入一组值。我尝试使用类似的东西：

```
SELECT        class_style_view.Course_Code
FROM          class_style_view  class_style_view_1.Course_Code
WHERE        (class_style_view.Course_Code IN (=@PromptedArray) 
```

我不确定我怎么能/应该写这个。我希望提示出现我的报告并能够输入如下内容：('41229', '65002', '65435', '64059') 这样我就可以使用变量查询表中的所有项目一组 Course_Code 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:37:51.003

通常的方法是首先创建一个包含用户所有潜在选项的数据集。对于您的示例，这可能是：

```
SELECT DISTINCT class_style_view.Course_Code FROM class_style_view 
```

然后设置一个参数来提示用户。确保将参数设置为“允许多个值”。将可用值设置为来自查询并选择您刚刚创建的数据集。

现在您可以设置使用该参数的查询：

```
SELECT * FROM class_style_view where Course_Code in ( @MyParameterName ) 
```

如果不向用户提供下拉菜单，我不确定您是否可以将他们输入的参数直接放入数组中。您可以解析他们输入的字符串以用逗号分隔，但给他们下拉菜单很容易，而且 UI 也不错。

# php - 从函数返回值

> ID：15988079
> 
> 赞同：-1
> 
> 时间：2013-04-13T13:02:54.363
> 
> 标签：php, mysql, pdo

我之前问过一个类似的问题，但我想我现在更接近答案了。

我有一个功能可以在用户登录个人资料之前验证用户的电子邮件地址和密码。

如果电子邮件不正确，它会生成一条错误消息；它回显“未找到匹配的电子邮件”。

当我输入正确的电子邮件和密码时，什么都不会返回。但是，如果我随后输入错误的密码和错误的电子邮件，它会给我“找不到匹配的电子邮件”。正确的电子邮件但错误的密码也会发生同样的事情。

我试图返回，`fetchAll`但是`fetchColum`当我输入正确的值时，我仍然得到相同的循环。

有任何想法吗 ？

```
function valid_credientials($email,$password){
    global $db;

    $q = "SELECT * FROM user WHERE email = :email AND password =:password";
    $query = $db->prepare($q);
    $query->execute(array(":email" => $email, ":password" => $password));
    $results = $query->fetchAll();

    if($results !=FALSE && $query->rowCount() > 0) {
       if($results[0]['password'] == $password){
            $_SESSION['email'] = $email;
            return $query->fetchAll($q,0)==1 ? true:false;
        }
    }

    // return false by default
    return false;
} 
```

邮局

```
if (isset($_POST['email'], $_POST['password'])) {
    if (valid_credientials($_POST['email'], $_POST['password']) == false) {
        $errors[] = 'No matching email found.';
    }

    if (empty($errors)) {
        $_SESSION['email'] = htmlentities($_POST['email']);
        header("Location: profile.php");
        die();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:06:07.983

您应该添加一个默认`return false;`语句：

```
function valid_credientials($email,$password){
    global $db;

    $q = "SELECT * FROM user WHERE email = :email AND password =:password";
    $query = $db->prepare($q);
    $query->execute(array(":email" => $email, ":password" => $password));
    $results = $query->fetchAll();

    if($results !=FALSE && $query->rowCount() > 0) {
       if($results[0]['password'] == $password){
            $_SESSION['email'] = $email;
            return $query->fetchAll($q,0)==1 ? true:false;
        }
    }

    // return false by default
    return false;
} 
```

顺便说一句，代码缩进是你的朋友；）

然而，这可以优化为更稳定：

```
function valid_credientials($email,$password){
    global $db;

    $q = "SELECT * FROM user WHERE email = :email AND password =:password";
    $query = $db->prepare($q);
    if(!$query) {
        throw new Exception('Failed to prepare the query');
    }

    $ret = $query->execute(array(":email" => $email, ":password" => $password));
    if(!$ret) {
        throw new Exception('Failed to execute the query');
    }

    $results = $query->fetchAll();
    if($results === FALSE) {
        throw new Exception('Failed to fetch results');
    }

    if(count($results) > 0) {
        // additional password check is not necessary
        return true;
    }

    // return false by default
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:08:23.007

不知道你为什么写这么多代码

```
function valid_credientials($email,$password){
    global $db;

    $q = "SELECT 1 FROM user WHERE email = ? AND password = ?";
    $query = $db->prepare($q);
    $query->execute(func_get_args());
    return $query->fetchColumn();
} 
```

# google-app-engine - 祖先查询的 DeadlineExceedError

> ID：15988082
> 
> 赞同：0
> 
> 时间：2013-04-13T13:03:07.840
> 
> 标签：google-app-engine

我正在寻找有关如何提高对大型数据集的祖先查询性能的建议。目前，许多祖先查询需要很长时间才能通过 DeadlineExceededError，而在没有祖先过滤器的情况下执行相同的查询可以正常工作，如果有点慢的话。

数据是结构化的，因此作为查询的种类的每种实体都嵌套在 3 个种类的父实体下。（例如，实体键路径将是 ['Parent', 'keyname1', 'Parent', 'keyname2', 'Parent', 'keyname3', 'Entity', 'keyname4']

查询采用以下形式：

```
Entity.all().ancestor(parentkey).filter('property IN', list) 
```

其中`list`是最多包含 3 个值的列表，并且 parentkey 可能比相关实体高两到三个级别。

关于这里发生了什么的任何想法？

# zend-framework2 - 在 Zend Framework 2 中扩展 Zend\View\Helper\Url

> ID：15988083
> 
> 赞同：3
> 
> 时间：2013-04-13T13:03:10.593
> 
> 标签：zend-framework2, urlhelper, viewhelper

我写了一个简单的 url 视图助手，它扩展`Zend\View\Helper\Url`并附加到`ViewHelperManager`：

**`MyNamespace\View\Helper\Url`**

```
namespace MyNamespace\View\Helper;

use Zend\View\Helper\Url as ZendUrl;

class Url extends ZendUrl {

    public function __invoke($name = null, array $params = array(), $options = array(), $reuseMatchedParams = false) {
        $link = parent::__invoke($name, $params, $options, $reuseMatchedParams);
        ...
        return $link;
    }

} 
```

**`Application\Module`**

```
namespace Application;

use ...

class Module {

    public function onBootstrap(MvcEvent $mvcEvent) {
        $application = $mvcEvent->getApplication();
        $serviceManager = $application->getServiceManager();
        $viewHelperManager = $serviceManager->get('ViewHelperManager');
        $viewHelperManager->setInvokableClass('url', 'MyNamespace\View\Helper\Url');
        ...
    }

} 
```

现在应用程序抛出异常：

> 致命错误：在 /var/www/foo/bar/vendor/zendframework/zendframework/library/Zend/View/Helper/Url.php 中未捕获异常 'Zend\View\Exception\RuntimeException' 并带有消息 'No RouteStackInterface instance provided'第 76 行
> 
> Zend\View\Exception\RuntimeException：第 76 行的 /var/www/foo/bar/vendor/zendframework/zendframework/library/Zend/View/Helper/Url.php 中没有提供 RouteStackInterface 实例

我调试了两个`Url`类。使用了wenn `MyNamespace\View\Helper\Url`，没有调用方法`Zend\View\Helper\Url#setRouter(...)`，也没有设置路由器。不明白为什么...

如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:57:57.043

没有测试过，所以我不知道它是否有效，我只是猜测：

代替：

```
$viewHelperManager->setInvokableClass('url', 'MyNamespace\View\Helper\Url'); 
```

和：

```
$viewHelperManager->setFactory('url', function ($sm) use($serviceLocator) {
    $helper = new \MyNamespace\View\Helper\Url;
    $router = Console::isConsole() ? 'HttpRouter' : 'Router';
    $helper->setRouter($serviceLocator->get($router));

    $match = $serviceLocator->get('application')
    ->getMvcEvent()
    ->getRouteMatch();

    if ($match instanceof RouteMatch) {
        $helper->setRouteMatch($match);
    }

    return $helper;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-28T15:17:34.740

您还可以使用初始化程序！

```
'view_helpers' => array(
    'invokables' => array(
        'MyUrl' => 'MyModule\View\Helper\MyUrl'
    ),
    'initializers' => array(
        function ($instance, $sm) {
            if ($instance instanceof \Zend\View\Helper\Url) {
                $serviceLocator = $sm->getServiceLocator();

                $router = \Zend\Console\Console::isConsole() ? 'HttpRouter' : 'Router';
                $instance->setRouter($serviceLocator->get($router));

                $match = $serviceLocator->get('application')
                    ->getMvcEvent()
                    ->getRouteMatch();

                if ($match instanceof RouteMatch) {
                    $instance->setRouteMatch($match);
                }
            }
        }
    )
) 
```

您可以根据需要扩展 \Zend\View\Helper\Url

```
namespace MyModule\View\Helper;

use Zend\View\Helper\Url as ZendUrl;

class MyUrl extends ZendUrl {

    public function __invoke() {
        return parent::__invoke('MyRoute');
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-06T10:33:45.693

尽管这个问题已经很老了，但认为在这里添加基于配置的覆盖以及使用注册的工厂可能值得`HelperPluginManager`：

里面`module.config.php`：

```
'view_helpers' => array(
    'factories'=> array(
        'url' => 'Application\View\Helper\UrlFactory',
    )
), 
```

以及视图助手插件工厂本身：

```
<?php

namespace Application\View\Helper;

use Zend\Console\Console;
use Zend\Mvc\Router\RouteMatch;
use Zend\Mvc\Router\RouteStackInterface;
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\View\Helper\Url as BaseUrlHelper;
use Zend\View\HelperPluginManager;

class UrlFactory implements FactoryInterface
{
    /**
     * Create service
     *
     * @param ServiceLocatorInterface $helperPluginManager
     * @return mixed
     */
    public function createService(ServiceLocatorInterface $helperPluginManager)
    {
        /**
         * @var $helperPluginManager HelperPluginManager
         * @var $router RouteStackInterface
         */
        $serviceLocator = $helperPluginManager->getServiceLocator();
        $helper = new Url();

        $router = Console::isConsole() ? 'HttpRouter' : 'Router';
        $router = $serviceLocator->get($router);
        $helper->setRouter($router);

        $match = $serviceLocator->get('application')
            ->getMvcEvent()
            ->getRouteMatch()
        ;

        if ($match instanceof RouteMatch) {
            $helper->setRouteMatch($match);
        }

        return $helper;
    }
} 
```

这里的诀窍是，在这个工厂里，一个人只接收`HelperPluginManager`服务定位器。要访问其他服务，首先需要获取全局服务定位器（`use`在所有其他解决方案中，这是通过从闭包外部获取全局服务定位器来完成的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T13:24:50.387

Aydin 的解决方案对我有用，我将代码或多或少地放在 module.php 的 getViewHelperConfig 中

```
public function getViewHelperConfig()
{
    return array(
        'invokables' => array(
            .....
        ),
        'factories' => array(
            'modalurl'            => function ($helperPluginManager) {
                $serviceLocator = $helperPluginManager->getServiceLocator();
                $view_helper =  new \Application\View\Helper\ModalUrl();
                $router = \Zend\Console\Console::isConsole() ? 'HttpRouter' : 'Router';
                $view_helper->setRouter($serviceLocator->get($router));

                $match = $serviceLocator->get('application')
                    ->getMvcEvent()
                    ->getRouteMatch();

                if ($match instanceof RouteMatch) {
                    $view_helper->setRouteMatch($match);
                }

                return $view_helper;
            }
        ),
    );
} 
```

# django - Django与模型之间的双向关系

> ID：15988084
> 
> 赞同：2
> 
> 时间：2013-04-13T13:03:34.920
> 
> 标签：django, model, foreign-keys

我需要在一组对象之间存储一些关系类型数据（我们称它们为人的）。所以，一些模型是这样的：

```
class Person(models.Model):
    name = models.CharField(max_length=64)

class Relationship(models.Model)
    person1 = models.ForeignKey(Person, related_name='person1')
    person2 = models.ForeignKey(Person, related_name='person2')
    relationship_type = models.ChoiceField(choices=...)
    information = models.TextField() 
```

...因此，每个人都可以链接到任何其他人。但是，有些关系不是*定向*的，所以谁是 person1 或谁是 person2 并不重要（在这个例子中，假设 PersonA 是 PersonB 的“朋友”）。其他类型的关系是*定向*的，其中顺序确实很重要（例如，PersonC 是 PersonD 的“老板”）。

在 Django 中处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:21:32.827

可能的解决方案是为用户之间的关系建立两个模型。一个是*定向*的，一个是*双向*的 想想你的程序的逻辑。几乎每次从数据库中获取用户时，您都需要知道它是哪种关系。使用两个关系模型，您将不会遇到这样的问题。这种方式的唯一折衷是您必须进行两次查询才能显示人与人之间的所有关系——但在大多数情况下，这并不是那么常见的任务。

# jquery - 当 UI 中出现 JSON 格式错误时，会话丢失并且用户注销

> ID：15988087
> 
> 赞同：0
> 
> 时间：2013-04-13T13:03:45.100
> 
> 标签：jquery, session, jakarta-ee, spring-mvc, cluster-computing

我们在集群环境（Weblogic 10.3.6 服务器）上部署了一个 Web 应用程序，我们正在所有节点上复制会话。

我们有一个搜索文本框，我们可以在其中搜索项目。有时我会在 UI 上收到带有此消息的 JSON 格式错误对话框（我看到此错误的 10 次中有 5 次）： *DataTables 警告：无法解析来自服务器的 JSON 数据。这是由 JSON 格式错误引起的*

当我收到上述错误时，我退出了我的应用程序，我没有看到日志文件中记录了任何异常，我已经检查了应用程序特定日志和服务器日志。

这仅在集群环境中发生，并且我仅在集群环境中而不是在单个服务器上得到上述 JSON 错误。 **我们在表示层使用 JQuery，Spring MVC，使用的 FORM Beans 是否应该实现 Serializable(java.io.Serializable)**

如果有人能引导我朝着正确的方向前进，那就太好了

# oracle - Oracle：将 Long Raw 数据从一个表复制到另一个表

> ID：15988090
> 
> 赞同：3
> 
> 时间：2013-04-13T13:04:06.417
> 
> 标签：oracle, copy, binary-data

考虑我有两个表 Table1 和 Table2 具有完全相同的结构。我想将数据从 Table1 复制到 Table2。两个表都有一个 Long Raw 数据类型的字段。我正在使用以下插入语句来复制数据。

```
INSERT INTO TABLE2
SELECT ID, NAME, TO_LOB(IMAGE_DATA) FROM TABLE1 
```

上面的插入语句执行没有错误，但 Image_Data 列中的结果数据中有 0 个字节；表示没有为此字段复制任何内容。Image_Data 的数据类型在两个表中都是 (Long Raw)。有人可以建议将此类数据从一个表复制到另一个表的正确方法。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T13:36:03.703

Oracle 早在上个千年就弃用 LONG 和 LONG RAW 的原因正是因为这个问题：它们完全是一个令人头疼的问题。现在可能是咬紧牙关转向现代（但不完全是尖端）BLOB 实现的好时机。这取决于您使用这些表的频率。记住，[容忍一个问题就是坚持它](http://xprogramming.com/book/books20020208/)。

替代方案很麻烦。有多种机制可以将 LONG 转换为更易于管理的东西，但它们不能以另一种方式工作。一种可能对您有用的方法是：

1.  出口`Table1`。当你喜欢遗留技术时，你会想要使用 EXP 而不是 Data Pump :)
2.  重命名`Table1`为`Table2`.
3.  导入`Table1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:33:37.777

使用 pl/sql

```
declare
    l long;
begin 
    select long_column into l from some_table where pk = 1;
    insert into some_other_table values (l);
    commit;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T07:49:57.307

尽管不应再使用长或长的原始列，但仍有许多遗留表需要处理。看看这个： [复制带有 Long/LongRaw 列的表](http://www.armbruster-it.org/index.php/12-it/pl-sql/22-copy-data-with-long-raw-columns)

```
declare  
   l_rec_long_table long_table%rowtype;
begin
  select *
    into l_rec_long_table
    from long_table a
   where a.long_id = 'some old id';

  insert into long_table
  values
    ('new id',
     l_rec_long_table.long_column);
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-22T14:33:14.970

```
SET DEFINE OFF;
DECLARE
   fldLong VARCHAR2(10000);
   idTable MYSCHEMA.MYTABLE.ID_MYTABLE%TYPE;
BEGIN
    FOR r IN (SELECT LONGFIELD_MYTABLE, ID_MYTABLE FROM MYSCHEMA.MYTABLE) LOOP
        fldLong := r.LONGFIELD_MYTABLE;
        idTable := r.ID_MYTABLE;
        DBMS_OUTPUT.PUT_LINE('Value field long: ' || fldLong );

        Insert into MYSCHEMA.MY_ANOTHER_TABLE
        (
            ANOTHERFIELD1 [, ANOTHERFIELD2 ...], LONGFIELD_MY_ANOTHER_TABLE
        )
        SELECT FIELD1[, FIELD2 ...], fldLong
        FROM MYSCHEMA.MYTABLE
        WHERE ID_MYTABLE = idTable;
    END LOOP;
END;
/ 
```

# java - 使用级联框架运行hadoop程序时获取cascading.tap.hadoop.io.MultiInputSplit类未找到异常

> ID：15988091
> 
> 赞同：0
> 
> 时间：2013-04-13T13:04:10.330
> 
> 标签：java, hadoop, cascading

这是我连接到 hadoop 机器并执行一组验证并在另一个目录上写入的代码。

```
 public class Main{

            public static void main(String...strings){

        System.setProperty("HADOOP_USER_NAME", "root");
        String in1 = "hdfs://myserver/user/root/adnan/inputfile.txt";
        String out = "hdfs://myserver/user/root/cascading/temp2";

        Properties properties = new Properties();
        AppProps.setApplicationJarClass(properties, Main.class);
        HadoopFlowConnector flowConnector = new HadoopFlowConnector(properties);

        Tap inTap = new Hfs(new TextDelimited(true, ","), in1);
        Tap outTap = new Hfs(new TextDelimited(true, ","), out);

        Pipe inPipe = new Pipe("in1");  

        Each removeErrors = new Each(inPipe, Fields.ALL, new BigFilter());
        GroupBy group = new GroupBy(removeErrors, getGroupByFields(fieldCols));
        Every mergeGroup = new Every(group, Fields.ALL, new MergeGroupAggregator(fieldCols), Fields.RESULTS);

        FlowDef flowDef = FlowDef.flowDef()
                .addSource(inPipe, inTap)
                .addTailSink(mergeGroup, outTap);

        flowConnector.connect(flowDef).complete(); 
```

}

我的工作正在提交给 hadoop 机器。我可以在工作跟踪器上查看这个。但是工作失败了，我在下面遇到异常。

cascading.tap.hadoop.io.MultiInputSplit 在 org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:389) 的 org.apache.hadoop.mapred.MapTask.getSplitDetails(MapTask.java:348) 中找不到org.apache.hadoop.mapred.MapTask.run(MapTask.java:333) at org.apache.hadoop.mapred.Child$4.run(Child.java:268) at java.security.AccessController.doPrivileged(Native Method)在 javax.security.auth.Subject.doAs(Subject.java:415) 在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1408) 在 org.apache.hadoop.mapred.Child.main(Child .java:262) 原因：java.lang.ClassNotFoundException：在 org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:1493) 的 org.apache 中找不到类 cascading.tap.hadoop.io.MultiInputSplit。 hadoop.mapred.MapTask.getSplitDetails(MapTask.java:346) ...还有 7 个

java.lang.ClassNotFoundException：在 org.apache.hadoop.conf.Configuration.getClassByName（Configuration.java:1493）中找不到类 cascading.tap.hadoop.io.MultiInputSplit

请注意： 1\. 我是从我的 Windows 机器上运行它，而 hadoop 是在不同的盒子上设置的。2.我正在为hadoop使用cloudera发行版，即CDH 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:23:14.897

您的属性文件是空的，因此您的此作业的配置可能在集群上已关闭。您必须提供您正在使用的配置`HadoopFlowController`。调用时找到的 Hadoop 配置文件中包含的信息`new Configuration`属于您的`Properties`对象 - 诸如此类`fs.default.name=file:////`。我想当您通过“线路”运行级联作业时更是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T08:08:56.883

得到了问题。CDH 4.2 与级联 2.1 存在问题。所以改为CDH 4.1，它对我有用。

# android - 在平板电脑上从 Android 发送短信

> ID：15988093
> 
> 赞同：1
> 
> 时间：2013-04-13T13:04:16.040
> 
> 标签：android

我希望我的应用程序在发生特殊事件时自动向指定号码（保存在 SD 卡上）发送短信（包含警告消息）。

问题是，我在没有 SIM 卡的平板电脑上安装应用程序，因此无法使用标准短信管理器。

但是，平板电脑可以访问互联网。

通过 Internet 发送 SMS 有哪些选择？我知道 Google Play 商店中有一些应用程序可以执行此操作，但我需要一个库来集成到我的代码（或某些类）中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:09:14.603

由于平板电脑没有 SMS 功能，您能做的最好的事情就是在您的服务器上托管一个与 SMS 提供商 API 对话的 API。（理论上，您可以直接与 SMS 提供商对话，但您现在不希望将您的帐户凭据捆绑在您的应用程序中，对吧！除了安全问题之外，如果您的帐户凭据发生更改，您将无法将其更改为服务， 例如）。

实际上有数百家供应商，但我们使用[http://www.esendex.co.uk/](http://www.esendex.co.uk/)并且对他们的服务非常满意。它们提供了一个 API，我们在应用程序与之通信的 RESTful 服务后面使用该 API。同样，网络上有大量关于创建/使用网络服务的信息。

如果您在创建 API 时需要帮助，请更新您的问题，详细说明您希望使用的架构/语言，也许我（或其他人）可以提供帮助。

**编辑：** 我们过去也使用过[Amazon AWS SNS](http://aws.amazon.com/sns/)，尽管它仅在某些国家/地区有效（我们在美国使用过）。

以下是我没有使用过的其他一些提供商，但通过快速搜索找到了：

*   [http://www.clockworksms.com/](http://www.clockworksms.com/) - 从记忆来看，他们的服务看起来非常好用，但他们不会在固定的 5 便士费率上让步，而我们目前的供应商与我们协商了一笔便宜得多的大宗交易。
*   [http://www.clicksms.co.uk/](http://www.clicksms.co.uk/)
*   [http://www.mobivate.com/](http://www.mobivate.com/)

**另外的选择：** 这并不是很理想，但在我开始在那里工作之前，它是我当前公司使用的一种解决方案，即你可以购买一个内置 SMS 调制解调器的 Wavecom 设备，然后将它连接到你自己托管的服务器上。这使您可以购买无限制的 PAYG 并使用它而不是按条消息付费（尽管如果您阅读小字体，服务提供商通常实际上不会提供无限制的交易，并且如果您滥用他们的条款可以阻止您的 SIM 卡）。另外，请记住像这样的自托管解决方案带来的额外成本和安全问题，您可能不会永远这样托管它，因此如果连接失败，请在您的应用程序中回退。抱歉，我没有任何链接，因为我不知道从哪里购买它们，但这是我正在谈论的设备：[http://www.ozekisms.com/index.php?owpn=201](http://www.ozekisms.com/index.php?owpn=201)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:18:56.610

最简单的方法是使用在线平台，您可以通过各种设备使用该平台。[TexttoSend](http://www.texttosend.com)是我们目前使用的一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:06:56.597

没有 SIM 卡时不能直接发送短信。通过 Internet 发送短信需要支持通过 Web 服务或 SMPP 等协议发送短信的服务器。大多数 Internet 短信服务都会向您收费，因此请寻找合适的服务器。

# jquery - 正确的 $.ajax 调用语法

> ID：15988094
> 
> 赞同：-1
> 
> 时间：2013-04-13T13:04:16.260
> 
> 标签：jquery

我正在尝试在我的网页中进行此 ajax 调用，但我经常在控制台上收到此错误，并且 jquery 动画不起作用：

```
<script type="text/javascript">

$(document).ready(function(e){

        var dir = "<?php echo $_REQUEST['DirPath']; ?>";
    var user = "<?php echo $_SESSION['login_user']; ?>";
        var datastr='DirPath='+dir+'&UserName='+user;
        $.ajax({
        type: "POST",
        url: "RenderFiles.php",
        data: datastr,
        success: function(data){
                $("#RenderFiles").replaceWith(data);
            $("#nav > li > a").click(function () { // binding onclick
                              if ($(this).parent().hasClass('selected')) {
                                    $("#nav .selected div div").slideUp(100); // hiding popups
                                    $("#nav .selected").removeClass("selected");
                              } else {
                                    $("#nav .selected div div").slideUp(100); // hiding popups
                                    $("#nav .selected").removeClass("selected");

                                    if ($(this).next(".subs").length) {
                                        $(this).parent().addClass("selected"); // display popup
                                        $(this).next(".subs").children().slideDown(200);

                                    }
                              }
                });
            $("#nav li div div,#drop").mouseleave(function(e) {
                    $("#nav li div div").hide();
                $("#files_menu").addClass("menuactive");
            }); 
        }
    });
});

</script>` 
```

错误是： SyntaxError：语法错误

}); jquery.js：第 2 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:36:20.953

这不是电话的具体问题。jquery 元素点击函数被调用了两次（也在文档加载时）。在删除冗余调用时，错误被删除:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:09:26.153

根据我的经验，该错误通常是由于将参数传递给 jQuery 函数而导致的，该函数的格式不正确，无法让 jQuery 正确使用它。在您的特定情况下，最有可能的候选者将是`datastr`变量。在进行 ajax 调用之前尝试将其输出到控制台以查看它的内容。它可能不是该`data`属性的正确格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:09:36.067

您没有正确关闭所有内容。用这个：

```
$.ajax({
    type: "POST",
    url: "RenderFiles.php",
    data: datastr,
    success: function(data){
        $("#RenderFiles").replaceWith(data);
        $("#nav > li > a").click(function () {
            if ($(this).parent().hasClass('selected')) {
                $("#nav .selected div div").slideUp(100);
                $("#nav .selected").removeClass("selected");
            }else{
                $("#nav .selected div div").slideUp(100); // hiding popups
                $("#nav .selected").removeClass("selected");
                    if ($(this).next(".subs").length) {
                        $(this).parent().addClass("selected"); // display popup
                        $(this).next(".subs").children().slideDown(200);
                    }
            }
        });
    }
}); 
```

还要确保`RenderFiles.php`为 jQuery 返回一个可用的格式。如果仍然有问题，请检查 js 变量的值。

# java - 将 json 对象转换为 csv

> ID：15988096
> 
> 赞同：2
> 
> 时间：2013-04-13T13:04:18.073
> 
> 标签：java, json, export-to-csv

我需要在 java 环境中的 csv 中转换一个复杂的 .json 文件。我已经看过 [Javascript / convert json to csv](https://stackoverflow.com/questions/15381539/javascript-convert-json-to-csv) and [Converting JSON to XLS/CSV in Java](https://stackoverflow.com/questions/7172158/converting-json-to-xls-csv-in-java) and [Convert JSON format to CSV format for MS Excel](https://stackoverflow.com/questions/4130849/convert-json-format-to-csv-format-for-ms-excel)和在其中开发的应用程序，但它们不适用于我的文件，即像这个例子：

```
{
    "metadata": {"result_type": "recent", "iso_language_code": "it"}, 
    "created_at": "Thu Apr 04 16: 48: 29 +0000 2013", 
    "user": {
        "id": "integer", 
        "id_str": "id_str", 
        "name": "a name and a surname", 
        "screen_name": "ascreenname", 
        "location": "Roma", 
        "description": "some description ", 
        "url": "some url", 
        "entities": {
            "url": {
                "urls": [{
                    "url": "other url", 
                    "expanded_url": null, 
                    "indices": [0, 39]
                }]
            }, 
            "description": {"urls": []}
        }, 
        "notifications": null
    }, 
    "geo": null, 
    "coordinates": null, 
    "place": null, 
    "contributors": null, 
    "entities": {
        "hashtags": [
            {"text": "text", "indices": [29, 35]}, 
            {"text": "text", "indices": [36, 52]}, 
            {"text": "roma", "indices": [53, 58]}, 
            {"text": "ostiense", "indices": [59, 68]}, 
            {"text": "text", "indices": [69, 79]}, 
            {"text": "text", "indices": [80, 92]}, 
            {"text": "text", "indices": [93, 99]}
        ], 
        "urls": [
            {"url": "an url", "expanded_url": "an url", "indices": [101, 123]}
        ], 
        "user_mentions": []
    }, 
    "lang": "it"
} 
```

# sshj - 如何使用 sshj 在不使用本地端口转发的情况下通过中间服务器进行隧道传输

> ID：15988098
> 
> 赞同：0
> 
> 时间：2013-04-13T13:04:29.007
> 
> 标签：sshj

我正在尝试使用[sshj](https://github.com/shikhar/sshj)通过网关（跳转点）服务器进行隧道传输：

A -> B -> C

需要注意的是，我需要在不设置[本地端口转发](https://github.com/shikhar/sshj/blob/master/src/main/java/examples/LocalPF.java)的情况下执行此操作。我需要与服务器 B 建立直接连接，然后与服务器 C 建立另一个 ssh 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:04:29.007

我找不到不使用本地端口转发的解决方案。一个潜在的非端口转发解决方案可能是从第一个连接中获取 PTY，然后执行 ssh；但是，在最初的测试中，新的会话似乎并没有为我转移。

我为这个隧道需求找到的最佳解决方案是在 overthere 项目中的一段代码中[找到的。](https://github.com/xebialabs/overthere/blob/master/src/main/java/com/xebialabs/overthere/ssh/SshTunnelConnection.java)

更新：我在这里用一些代码回答了类似的问题： [https ://stackoverflow.com/a/16023513/311525](https://stackoverflow.com/a/16023513/311525)

# json - perl www mechanize 和 JSON

> ID：15988101
> 
> 赞同：0
> 
> 时间：2013-04-13T13:04:41.343
> 
> 标签：json, perl, www-mechanize

如何使用 perl mechanize 模块提交有效的 JSON 请求

我试过了

```
use WWW::Mechanize;
use JSON;   

my $mech=WWW::Mechanize->new(
    stack_depth     => 10,
    timeout         => 120,
    autocheck       => 0,
);

$mech->agent_alias( 'Windows Mozilla' );

my $json =  '{"jsonrpc":"2.0","id":1,"params":{"query":    {"limit":2000,"start":0,"orderBy":[{"columnName":"osName","direction":"Asc"}]},"refresh":true}}';

$url  ="http://path/to/url/";

$mech->post($url,$json); 
```

结果并不像预期的那样总是解析json错误。

所以我只是通过发布来做正确的事 `$mech->post($url,$cjson);`

还是我应该做/添加其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:08:48.400

通常人们会使用该`JSON`模块，以便您可以在 Perl 中创建数据结构，然后[序列化为 JSON 格式的字符串](https://metacpan.org/module/JSON#encode_json)。

```
$json_text = encode_json $perl_scalar 
```

看起来像这样：

```
#!/usr/bin/env perl

use strict;
use warnings;

use JSON qw/encode_json/;

my $data = {
  "jsonrpc" => "2.0",
  "id" => 1,
  "params" => {
    "query" => {
      "limit" => 2000,
      "start" => 0,
      "orderBy" => [{ 
        "columnName" => "osName",
        "direction" => "Asc",
      }],
    },
    "refresh" => \0,
  },
};

print encode_json $data; 
```

请注意，`\0`and`\1`可以分别用作 false 和 true。

再说一次，我很长时间没有使用 WWW::Mechanize 并且我不会深入研究文档，所以这里有一个使用[Mojo::UserAgent](http://metacpan.org/module/Mojo%3a%3aUserAgent)的示例（更像是 LWP::UserAgent 而不是 mech），它有一个内置的 JSON 处理程序：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Mojo::UserAgent;
my $ua = Mojo::UserAgent->new;

my $data = {
  "jsonrpc" => "2.0",
  "id" => 1,
  "params" => {
    "query" => {
      "limit" => 2000,
      "start" => 0,
      "orderBy" => [{ 
        "columnName" => "osName",
        "direction" => "Asc",
      }],
    },
    "refresh" => \0,
  },
};

my $url = "http://path/to/url/";
$ua->post( $url, json => $data ); 
```

# c# - 流程清单及其详细信息

> ID：15988102
> 
> 赞同：-3
> 
> 时间：2013-04-13T13:04:44.217
> 
> 标签：c#, process

嗨对不起我的问题！我编写了一个代码，在一个列表中显示进程，它的详细信息在 onther 并显示 madual 我在 c#2010 中阅读第一个并工作，但我在 c#2008 中需要它，在 c#2008 中我得到错误“访问拒绝”并且只显示45 个过程中只有 ~5 个：(

```
 private string GetProcessOwner(int ProcessID)
    {
        string ProcessOwner = "";
            ObjectQuery ObjQuery = new ObjectQuery("Select * From Win32_Process where ProcessID=" + ProcessID.ToString());
            ManagementObjectSearcher MgtObjSrch = new ManagementObjectSearcher(ObjQuery);
        foreach (ManagementObject MgtObj in MgtObjSrch.Get())
            {
                string[] s = new string[1];
                MgtObj.InvokeMethod("GetOwner", (object[])s);
                if (s[0] != null)
                ProcessOwner = s[0];
                break;
            }
                return ProcessOwner;
    }

    public void getprocesses()//start function ..........
    {
        ListViewItem lstitm;
        lsvproccess.Items.Clear();
        int index = 1;
        //get total ram
        ManagementObjectSearcher searcher = new ManagementObjectSearcher("select * from Win32_ComputerSystem");
        foreach (ManagementObject share in searcher.Get())
        {
             RAMCapacityByte = Convert.ToInt32(share["TotalPhysicalMemory"]);
             RAMCapacityKB = RAMCapacityByte / 1024;
             RAMCapacityMB = RAMCapacityKB / 1024;
             RAMCapacityGB = RAMCapacityMB / 1024;
        }
        toolStripStatusLabel7.Text = RAMCapacityMB.ToString() + " Kb";// view total ram memory
        toolStripStatusLabel5.Text = Environment.UserName;//view user name login
        Int32 totalmemo = RAMCapacityKB;
        processes = Process.GetProcesses(); //trying to get local active processes 
        try
        {
            foreach (Process pro in processes)
            {
                if (pro.ProcessName != "Idle")
                {
                    var wallTime = DateTime.Now - pro.StartTime;
                    if (pro.HasExited)
                        wallTime = pro.ExitTime - pro.StartTime;
                    var procTime = pro.TotalProcessorTime;
                    var cpuUsage = 100 * (procTime.TotalMilliseconds / wallTime.TotalMilliseconds);
                    var memousage = (pro.PrivateMemorySize64 / 1024);
                    if (Environment.UserName == GetProcessOwner(pro.Id) && wallTime.TotalMinutes > 60)
                    {
                        DialogResult result;
                        result = MessageBox.Show("Prossecc: " + pro.ProcessName + "\n" + "Total Time: " + wallTime.TotalMinutes.ToString("00000") + " Min\n",
                            "Are you will close it?", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
                        if (result == DialogResult.Yes)
                            pro.Kill();
                    }
                     if (cpuUsage > 1)
                    {
                        DialogResult result;
                        result = MessageBox.Show("Prossecc: " + pro.ProcessName + "\n" + "Cpu Usage: " + cpuUsage.ToString("0.000") + " Ms\n",
                            "Are you will close it?", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
                       if (result == DialogResult.Yes)
                            pro.Kill();
                    }
                     if (memousage > (totalmemo * 0.3))
                    {
                        DialogResult result;
                        result = MessageBox.Show("Prossecc: " + pro.ProcessName + "\n" + "Memo Usage: " + memousage.ToString() + " Kb",
                            "Are you will close it?", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);
                        if (result == DialogResult.Yes)
                            pro.Kill();
                    }
                     if (Environment.UserName == GetProcessOwner(pro.Id) && pro.MainModule.FileVersionInfo.CompanyName == "Microsoft corporation")
                    {
                        pro.Kill();
                        MessageBox.Show("Prossecc: " + pro.ProcessName + "\n",
                           "Is Terminat!", MessageBoxButtons.OK, MessageBoxIcon.Stop);
                    }
                    else
                    {
                        lstitm = new ListViewItem();
                        // binding listview instance to desired attributes
                        lstitm = lsvproccess.Items.Add(index.ToString("000"));
                        lstitm.SubItems.Add(pro.ProcessName);
                        lstitm.SubItems.Add(pro.Id.ToString());
                        lstitm.SubItems.Add(wallTime.TotalMinutes.ToString("000000") + " M");
                        lstitm.SubItems.Add(cpuUsage.ToString("0.000") + " ms");
                        lstitm.SubItems.Add(memousage.ToString() + " kb");
                        lstitm.SubItems.Add(GetProcessOwner(pro.Id));
                        index++;
                        toolStripStatusLabel3.Text = index.ToString();// view total process
                    }
                }
            }
        }

        catch (Win32Exception exp)
        {
            MessageBox.Show(exp.Message, this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    private void Detail_process(Process p)//start function..............
    {
        lsvitems.Items.Add("ProcessName:").SubItems.Add(p.ProcessName);
        try
        {
            lsvitems.Items.Add("BasePriority:").SubItems.Add(p.BasePriority.ToString());
        }
        catch (PlatformNotSupportedException err)
        {
            lsvitems.Items.Add("BasePriority:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("Handle:").SubItems.Add(p.Handle.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("Handle:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("Process Id:").SubItems.Add(p.Id.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("Process Id:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("MachineName:").SubItems.Add(p.MachineName);
        }
        catch (InvalidOperationException err)
        {
            lsvitems.Items.Add("MachineName:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("MainModule:").SubItems.Add(p.MainModule.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("MainModule:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("MainWindowTitle:").SubItems.Add(p.MainWindowTitle);
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("MainWindowTitle:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("MaxWorkingSet:").SubItems.Add(p.MaxWorkingSet.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("MaxWorkingSet:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("MinWorkingSet:").SubItems.Add(p.MinWorkingSet.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("MinWorkingSet:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("PagedMemorySize64:").SubItems.Add(p.PagedMemorySize64.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("PagedMemorySize64:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("PagedSystemMemorySize64:").SubItems.Add(p.PagedSystemMemorySize64.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("PagedSystemMemorySize64:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("PeakPagedMemorySize64:").SubItems.Add(p.PeakPagedMemorySize64.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("PeakPagedMemorySize64:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("PeakWorkingSet64:").SubItems.Add(p.PeakWorkingSet64.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("PeakWorkingSet64:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("PriorityClass:").SubItems.Add(p.PriorityClass.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("PriorityClass:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("FileName:").SubItems.Add(p.StartInfo.FileName);
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("FileName:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("StartTime:").SubItems.Add(p.StartTime.ToShortTimeString() + " " + p.StartTime.ToShortDateString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("StartTime:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("UserProcessorTime:").SubItems.Add(p.UserProcessorTime.TotalSeconds.ToString() + " Sec");
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("UserProcessorTime:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("PrivilegedProcessorTime:").SubItems.Add(p.PrivilegedProcessorTime.TotalSeconds.ToString() + " Sec");
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("PrivilegedProcessorTime:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("TotalProcessorTime:").SubItems.Add(p.TotalProcessorTime.TotalSeconds.ToString() + " Sec");
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("TotalProcessorTime:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("VirtualMemorySize64:").SubItems.Add(p.VirtualMemorySize64.ToString());
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("VirtualMemorySize64:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("Company Name:").SubItems.Add(p.MainModule.FileVersionInfo.CompanyName);
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("Company Name:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("FileVersion:").SubItems.Add(p.MainModule.FileVersionInfo.FileVersion);
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("FileVersion:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("LegalCopyright:").SubItems.Add(p.MainModule.FileVersionInfo.LegalCopyright);
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("LegalCopyright:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("FileDescription:").SubItems.Add(p.MainModule.FileVersionInfo.FileDescription);
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("FileDescription:").SubItems.Add(err.Message);
        }
        try
        {
            lsvitems.Items.Add("Language:").SubItems.Add(p.MainModule.FileVersionInfo.Language);
        }
        catch (Win32Exception err)
        {
            lsvitems.Items.Add("Language:").SubItems.Add(err.Message);
        }
    }

    private void Get_modules(ProcessModuleCollection prcmdlclc)
    {
        ListViewItem lstviewitm = new ListViewItem();
        lsvmodules.Items.Clear();
        foreach (ProcessModule prcmdl in prcmdlclc)
        {
            try
            {
                lstviewitm = lsvmodules.Items.Add(prcmdl.ModuleName);
                lstviewitm.SubItems.Add(prcmdl.FileVersionInfo.FileName);
                lstviewitm.SubItems.Add(prcmdl.FileVersionInfo.ProductName);
                lstviewitm.SubItems.Add(prcmdl.FileVersionInfo.ProductVersion);
            }
            catch (ArgumentException err)
            {
                MessageBox.Show(err.Message, this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
    }

    private void lsvproccess_SelectedIndexChanged(object sender, EventArgs e)
    {
        Int32 pid;
        lsvitems.Items.Clear();
        ListView lsvview = new ListView();
        if (lsvproccess.FocusedItem != null)
        {
            int index = lsvproccess.FocusedItem.Index;
            Process p = new Process();
            pid = Convert.ToInt32(lsvproccess.Items[index].SubItems[2].Text);
            p = Process.GetProcessById(pid);
            Detail_process(p);    // detailing each process in right side listview
            try
            {
                if (chbxmodule.Checked)
                    Get_modules(p.Modules);
            }
            catch (Win32Exception err)
            {
                MessageBox.Show(err.Message, this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:16:02.650

以管理员身份运行您的 exe。系统任务管理器也有同样的问题。这是因为在您不是管理员之前，您无法查看流程详细信息。

# android - Asynctask 速度与 ExecutorService 中的相同进程

> ID：15988105
> 
> 赞同：0
> 
> 时间：2013-04-13T13:05:00.107
> 
> 标签：android, android-asynctask, executorservice, threadpoolexecutor

我的应用程序需要扫描子网以查找响应设备（并检查端口 80/8080 以获取特定服务）。我正在使用 executorservice/threadpool 来完成扫描任务 - 大约需要 30 秒才能完成。

我重写了上述过程以使用 asynctask - 该过程现在需要更长的时间（很多分钟）。

我已经回到原始的 executorservice 并将整个过程包装在 asynctask 中作为妥协（因此它不会阻塞 UI 并快速完成）但怀疑这是最佳实践。它还会产生进度更新、取消等问题。

最好是使用较慢的流程，提供 UI 更新/可取消设施，还是（因为整个过程只需要 30 秒）- 使用更快的执行器服务？

谢谢。

# c++ - 如何将 char * string = "2001-02-03" 转换为整数格式？

> ID：15988107
> 
> 赞同：0
> 
> 时间：2013-04-13T13:05:18.880
> 
> 标签：c++, integer, type-conversion

我有这些字符串：

```
const char * date = "2001-02-03";
const char * id = "987654/3210"; 
```

我需要非常快速地转换为整数或长整数（对于 id）。我需要翻译比较（因为数字 strcmp() 很慢）。我只有这个库：

```
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <iostream> 
```

示例： const char * date = "2001-02-03"; -> int int_date = 20010203; 常量字符 * id = "987654/3210"; -> long long_id = 9876543210；

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:08:23.113

如果您有字符串，`strcmp`则比将其转换（解析）为另一种格式然后进行比较要快。

但解析它的一种简单方法是：

```
const char * date = "2001-02-03";
int y, m, d;
int result = sscanf(date, "%d-%d-%d", &y, &m, &d);

if (result == 3)
{
    // use them
} 
```

*（我建议我的代码只是一个示例）*

# java - 程序打开所有应用程序

> ID：15988113
> 
> 赞同：0
> 
> 时间：2013-04-13T13:05:47.553
> 
> 标签：java, user-interface, desktop-application, executable

在我的程序中，我存储了`ArrayList`我所有的桌面图标位置。我的问题是，当我单击一个图标时，我的计算机会尝试同时打开所有最后一个程序、文件夹和文件，而我真的只想打开单击的任何内容。我怎样才能在没有启动所有其他程序的错误的情况下打开这个？

```
public void executeUserProgram(Point cursorPosition)
{
    for (int i = 0; i < icons_.getIcon().size(); i++)
    {
        if (icons_.getIconDimension().get(i).contains(cursorPosition)) 
        {
            try 
            {
                Desktop.getDesktop().open(
                        new File(icons_.getFilePath().get(i)));
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:09:58.663

找到图标后，您的`for`循环仍会继续。在or中添加`return`or`break`语句。`if``try`

```
try{
    Desktop.getDesktop().open(new File(icons_.getFilePath().get(i)));
    break;
} 
```

# emacs - Windows 中的 emacs 好东西

> ID：15988114
> 
> 赞同：0
> 
> 时间：2013-04-13T13:06:06.900
> 
> 标签：emacs, elisp, emacs24

我在 Windows 8 中获得了 emacs。我在 ubuntu 中使用了包`tabbar`附带的模式。在 Windows 中`emacs-goodies-el`如何以及在何处安装？`emacs-goodies-el`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:15:42.427

该软件包仅存在于 Debian 中。它在 /usr/share/doc/emacs-goodies-el 中的版权文件指明了所包含模块的获取位置。

不过，更简单的方法是简单地用谷歌搜索标签栏。不过，我会为您省力；最热门的是[http://emacswiki.org/emacs/TabBarMode](http://emacswiki.org/emacs/TabBarMode)

另请参阅[http://wikemacs.org/wiki/Tabbar](http://wikemacs.org/wiki/Tabbar)，它更加专注。

# vb.net - 调用子函数时连接打开错误

> ID：15988117
> 
> 赞同：0
> 
> 时间：2013-04-13T13:06:14.233
> 
> 标签：vb.net, ms-access-2007

这是我程序的流程..

```
Private Sub cmdUpdate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdUpdate.Click
     ..
    ....

     Call comboRefresh()        ------>
     cmdNext.Text = "Add New"
     cmdEdit.Text = "Edit"
     cmdUpdate.Enabled = False
End Sub

Private Sub comboRefresh()

    ------> ....

    da.Fill(ds, "Vendor_Machine")

        cmbSn_no.ValueMember = "sr_no"
        cmbSn_no.DataSource = ds.Tables(0)  --
        cmbSn_no.SelectedIndex = 0

       ....
End Sub

Private Sub cmbSn_no_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbSn_no.SelectedIndexChanged

  ----->       cnnOLEDB.Open()
   ...
         Dim dr As OleDb.OleDbDataReader = comm_SelVen.ExecuteReader

    If dr.Read = True Then
        cmbSn_no.Text = dr("sr_no")
        cmbChal_no.Text = dr("chaln_no") ----->
    End If
    cnnOLEDB.Close()

End Sub

 Private Sub cmbChal_no_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbChal_no.SelectedIndexChanged
  ---->     cnnOLEDB.Open()
    ...
     cnnOLEDB.Close()

End Sub 
```

在这里它说问题“连接已经打开......”并停止执行......即使我不能评论`---> cnnOLEDB.Open()`最后一个子函数中的行，因为我也必须`cmbChal_no_SelectedIndexChanged`单独调用......如果我评论它会给出错误

> 连接已关闭，需要打开才能执行 DataReader

请建议我该怎么做...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:01:21.270

不要为您的连接保留全局对象。每次需要就建一个，通过Using Statement封装创建、使用和处理的逻辑

```
Using cnnOLEDB = New OleDbConnection(connectionstring)
Using comm = new OleDbCommand(queryText, cnnOLEDB)
    cnnOLEDB.Open()
    ...
    Using dr = comm_SelVen.ExecuteReader
    If dr.Read = True Then
        cmbSn_no.Text = dr("sr_no")
        cmbChal_no.Text = dr("chaln_no") ----->
    End If
End Using 
```

这样，当流程从 Using 语句退出时，您的连接将自动关闭，并且使用的任何资源都将通过 Dispose 释放，也会自动调用。
如果由于某种原因在连接仍处于打开状态时出现异常，也会发生这种情况

可能，您的连接已打开，因为您的代码的先前运行遇到了异常，或者您忘记在全局对象 cnnOLEDB 的某处调用 Close

**编辑** 查看您在下面的评论，虽然我不喜欢它，但有可能测试属性[ConnectionState](http://msdn.microsoft.com/en-us/library/system.data.connectionstate.aspx)以避免在连接已打开时重新打开连接

```
If cnnOLEDB.State = ConnectionState.Closed Then
     cnnOLEDB.Open()
End If 
```

# r - 将 xts 对象保存为 csv 文件

> ID：15988122
> 
> 赞同：3
> 
> 时间：2013-04-13T13:07:21.950
> 
> 标签：r, csv, statistics, xts

我使用以下方法加载了一个 csv 文件：

```
data = read.csv(file="/home/stefanos/R/data_frames_new/temp2.csv", header=TRUE, sep=",") 
```

temp2.​​csv 文件的前 4 行是：

```
nodeId,battery,date,idHistoric,temperature,longitude,latitude
3,78.00,2013-04-01 00:04:03,30163676,13.74,-3.80176,43.46192
3,78.00,2013-04-01 00:09:01,30164278,13.67,-3.80176,43.46192
3,78.00,2013-04-01 00:13:59,30164875,13.67,-3.80176,43.46192 
```

我想按 nodeId 对其进行分组，并找到每 15 分钟的温度平均值。所以我输入：

```
df <- xts(x = data[, c("nodeId", "battery", "idHistoric", "temperature", "longitude", "latitude")], order.by = as.POSIXct(data[, "date"], tz = "GMT", format = "%Y-%m-%d %H:%M:%S")) 
```

接着：

```
df2 <- by(df,df$nodeId,function(x){
   ends <- endpoints(x, on = "minutes", k = 15)
   xx    <- period.apply(x, ends, mean)
 }) 
```

我的问题是我无法将 df2 写入 csv 文件。我还不能这样做。当我在屏幕上打印 df2 时，我看到以下结构：

```
/*********************************************/

INDICES: 3
                    nodeId  battery idHistoric temperature longitude latitude
2013-04-01 00:13:59      3 78.00000   30164276    13.69333  -3.80176 43.46192
2013-04-01 00:28:54      3 79.00000   30166075    13.78000  -3.80176 43.46192
[...]
------------------------------------------------------------ 
INDICES: 4
                    nodeId  battery idHistoric temperature longitude latitude
2013-04-01 00:13:07      4 87.00000   30164172    14.42667  -3.80098 43.46199
2013-04-01 00:28:01      4 87.33333   30165964    14.49000  -3.80098 43.46199
------------------------------------------------------------ 
INDICES: 5
                    nodeId  battery idHistoric temperature longitude latitude
2013-04-01 00:13:31      5 83.00000   30164224    13.84667  -3.80058 43.46203
2013-04-01 00:28:26      5 83.66667   30166018    14.06000  -3.80058 43.46203
------------------------------------------------------------ 
INDICES: 6
                    nodeId  battery idHistoric temperature longitude latitude
2013-04-01 00:12:52      6 78.00000   30164128    13.99667  -3.79979 43.46212
2013-04-01 00:28:52      6 79.00000   30165983    13.97333  -3.79979 43.46212

/*********************************************/ 
```

那么如何将其保存为 CSV？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:12:31.163

你可以这样做（正如@Roland在评论中提到的那样）

```
write.table(do.call(rbind,df2),file='test.csv') 
```

这是您的数据的完整示例。您可以使用`read.zoo`一个线性命令来创建您的 xts 对象：

```
library(zoo)
## you replace text= here by file=temp2.csv
dat <- read.zoo(text='nodeId,battery,date,idHistoric,temperature,longitude,latitude
3,78.00,2013-04-01 00:13:59,30163676,13.74,-3.80176,43.46192
3,78.00,2013-04-01 00:28:54,30163676,13.74,-3.80176,43.46192
4,78.00,2013-04-01 00:13:07,30164278,13.67,-3.80176,43.46192
4,78.00,2013-04-01 00:28:01,30163676,13.74,-3.80176,43.46192
5,78.00,2013-04-01 00:13:31,30163676,13.74,-3.80176,43.46192
5,78.00,2013-04-01 00:28:26,30164875,13.67,-3.80176,43.46192
6,78.00,2013-04-01 00:12:52,30164875,13.67,-3.80176,43.46192
6,78.00,2013-04-01 00:28:52,30164875,13.67,-3.80176,43.46192',header=TRUE,
                tz='',sep=',',index=3) 
```

然后您按组创建并保存您的列表，

```
library(xts)
df2 <- by(dat,dat$nodeId,function(x){
  ends <- endpoints(x, on = "minutes", k = 1)
  xx    <- period.apply(x, ends, mean)
})

write.table(do.call(rbind,df2),file='test.csv') 
```

要再次阅读它，您只需

```
read.table('test.csv')
                      nodeId battery idHistoric temperature longitude latitude
3.2013-04-01 00:13:59      3      78   30163676       13.74  -3.80176 43.46192
3.2013-04-01 00:28:54      3      78   30163676       13.74  -3.80176 43.46192
4.2013-04-01 00:13:07      4      78   30164278       13.67  -3.80176 43.46192
4.2013-04-01 00:28:01      4      78   30163676       13.74  -3.80176 43.46192
5.2013-04-01 00:13:31      5      78   30163676       13.74  -3.80176 43.46192
5.2013-04-01 00:28:26      5      78   30164875       13.67  -3.80176 43.46192
6.2013-04-01 00:12:52      6      78   30164875       13.67  -3.80176 43.46192
6.2013-04-01 00:28:52      6      78   30164875       13.67  -3.80176 43.46192 
```

**编辑**保存/并再次将其作为动物园对象读取，我稍微转换了绑定列表的行名：

```
dd <- do.call(rbind,df2)
rownames(dd) <- gsub('*.[.]','',rownames(dd))
write.table(dd,file='test.csv') 
```

现在我可以再次阅读：

```
read.zoo('test.csv',index=0,tz='')
                    nodeId battery idHistoric temperature longitude latitude
2013-04-01 00:12:52      6      78   30164875       13.67  -3.80176 43.46192
2013-04-01 00:13:07      4      78   30164278       13.67  -3.80176 43.46192
2013-04-01 00:13:31      5      78   30163676       13.74  -3.80176 43.46192
2013-04-01 00:13:59      3      78   30163676       13.74  -3.80176 43.46192
2013-04-01 00:28:01      4      78   30163676       13.74  -3.80176 43.46192
2013-04-01 00:28:26      5      78   30164875       13.67  -3.80176 43.46192
2013-04-01 00:28:52      6      78   30164875       13.67  -3.80176 43.46192
2013-04-01 00:28:54      3      78   30163676       13.74  -3.80176 43.46192 
```

**编辑2**

感谢@Gsee 出色的回答，您可以执行以下操作：

```
do.call(rbind, unname(df2)) 
```

这将保持行名正确，因此无需像我在之前的编辑中那样使用正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T16:03:06.417

如果你看一下`str(df2)`，你会发现它是一个命名的`list`. 通常，当您有一个列表并且想要将其转换为单个对象时，您可以使用类似`do.call(rbind, df2)`. 这与 相同`rbind(df2[[1]], df2[[2]], df2[[3]], df2[[4]])`，但适用于任意长度的列表。

在这种情况下，您`list`有`names`

```
> names(df2)
[1] "3" "4" "5" "6" 
```

所以，如果你只是`do.call(rbind, df2)`，那`rownames`将不是你想要的——它们会`names`在列表的前面加上。

```
> rownames(do.call(rbind, df2))
[1] "3.2013-04-01 00:13:59" "3.2013-04-01 00:28:54" "4.2013-04-01 00:13:07"
[4] "4.2013-04-01 00:28:01" "5.2013-04-01 00:13:31" "5.2013-04-01 00:28:26"
[7] "6.2013-04-01 00:12:52" "6.2013-04-01 00:28:52" 
```

解决方案是`unname`列表

```
do.call(rbind, unname(df2)) 
```

由于您正在使用`xts`，您可能希望将其强制为`xts`对象：

```
> as.xts(do.call(rbind, unname(df2)))
                    nodeId battery idHistoric temperature longitude latitude
2013-04-01 00:12:52      6      78   30164875       13.67  -3.80176 43.46192
2013-04-01 00:13:07      4      78   30164278       13.67  -3.80176 43.46192
2013-04-01 00:13:31      5      78   30163676       13.74  -3.80176 43.46192
2013-04-01 00:13:59      3      78   30163676       13.74  -3.80176 43.46192
2013-04-01 00:28:01      4      78   30163676       13.74  -3.80176 43.46192
2013-04-01 00:28:26      5      78   30164875       13.67  -3.80176 43.46192
2013-04-01 00:28:52      6      78   30164875       13.67  -3.80176 43.46192
2013-04-01 00:28:54      3      78   30163676       13.74  -3.80176 43.46192 
```

最后，我发现用它来编写或对象`write.zoo`的 csv 文件很方便：`xts``zoo`

```
write.zoo(as.xts(do.call(rbind, unname(df2))), file="test.csv", sep=",") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T16:02:27.167

解决了

xts 返回一个向量。我必须遍历每个位置（使用 while）并将每个元素写入 csv 文件。

```
df2 <- by(df,df$nodeId,function(x){
   ends <- endpoints(x, on = "minutes", k = 15)
   xx    <- period.apply(x, ends, mean)
})

i <- 1

total <- length(df2)

while( i <= total ){
    write.csv(df2[i],paste("lights_2013-04-0102/out_",i,".csv",sep = ""))
    i <- i + 1
} 
```

# c++ - 列表如何知道（有效地）在哪里插入却不能进行随机访问？

> ID：15988124
> 
> 赞同：0
> 
> 时间：2013-04-13T13:07:33.433
> 
> 标签：c++, list

我有点困惑。列表擅长在任何位置插入，但不擅长随机访问？

（怎么可能）如果你不能做随机访问，你怎么知道在哪里插入？

同样，如果您可以在任何位置插入，为什么不能有效地从该位置读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T13:15:42.550

如果您已经有了要插入的列表节点，则插入只是分配一个列表节点并调整几个指针的问题。当然，如果您只知道要插入的索引，则缺少随机访问意味着您需要 O(n) 时间才能*到达*该节点，即使您只需要 O(1) 额外时间来插入之后到了那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:16:00.290

> 我有点困惑。列表擅长在任何位置插入，但不擅长随机访问？

真的。但它（列表）在访问该位置后插入到该位置。访问顺序为 O(n)，插入顺序为 O(1)。

> 如果你不能做随机访问，你怎么知道在哪里插入？

它只是插入特定位置，开始、结束或迭代器指示的位置。

> 如果您可以在任何位置插入，为什么不能从该位置有效地读取？

它可以在顺序访问后插入到任何位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T13:16:35.537

如果您必须寻找列表，则列表不适合在任何位置插入。它们可以快速将东西放在前面（如果你缓存它，则结束），并且在中间有一个已经找到的迭代器，插入速度很快。所以，你没有困惑，你只是误解了你被告知的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T13:17:14.060

**链表**

列表使用指向元素的指针进行操作——它们在内存中可以是不连续的（不是按顺序排列的）。

因此，例如，单链表将包含如下指针：

```
head -> element1 -> element2 -> element3 -> NULL
 ^ cur ptr 
```

每个元素都可以定义为一个结构：

```
struct Element {
    Element *next;
    int data;
}; 
```

*next 指针指向列表中的下一个元素。

因此，要遍历列表到例如最后一个元素，您需要执行以下操作：

```
while (*curNode->next != NULL) {
    *curNode = curNode->next;
}
// curNode after traversing would be last node
curNode->data; // get data in last node 
```

遍历后指向最后一个元素的指针如下所示：

```
head -> element1 -> element2 -> element3 -> NULL
                                    ^ cur ptr (3 hops) 
```

因此，您需要进行 n 跳才能到达最后一个节点（除非您有指向最后一个元素的指针，也就是“尾”指针。）

要在某个位置插入，您需要遍历元素直到找到正确的插槽。在所描述的单链表中，它将是 O(n)。

您可以根据需要使用其他类型的列表（例如双向链表等）来改善列表的遍历时间。但请注意，连接这些列表可能会更复杂。

**VS 数组/STL 向量：**

数据在内存中是连续的。因此，要访问它，您可以简单地获取第一个元素的地址 + 索引以进行迭代，并取消引用该位置。因此，您可以随机即时访问。在这种情况下，复杂度将因此为 O(1)。

# security - 安全双重检查

> ID：15988127
> 
> 赞同：1
> 
> 时间：2013-04-13T13:07:41.390
> 
> 标签：security, jsf, glassfish, j-security-check

我在我的 jsf 应用程序 (j_security) 中使用基于容器的安全性，使用 glassfish 来验证用户的安全页面。但是，在应用程序中，我有更多受限页面，即使用户登录也需要重新输入密码。创建多个约束将无济于事，因为会话已经生效。

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T09:02:01.137

您可以使用 servlet 过滤器说“SecondAuth”，您可以在其中通过引用会话标志来检查用户是否已经第二次进行身份验证；如果没有，您可以重定向到第二个身份验证页面。请记住将请求的 URL 存储在会话变量中。一旦用户再次成功验证，您可以重定向到请求的页面。

您可以使用 web.xml 配置保护多个页面，如下所示：

**web.xml**

```
<filter>
    <filter-name>secondauth</filter-name>
    <filter-class>com.auth.SecondAuth</filter-class>
</filter>
<filter-mapping>
    <filter-name>secondauth</filter-name>
    <url-pattern>/app/secure1.jsp</url-pattern>
    <url-pattern>/app/secure2.jsp</url-pattern>
</filter-mapping> 
```

关于如何使用 servlet 过滤器，您可以参考[如何在 Java 中使用 servlet 过滤器来更改传入的 servlet 请求 url？](https://stackoverflow.com/questions/2725102/how-to-use-a-servlet-filter-in-java-to-change-an-incoming-servlet-request-url)

# android - android，无法更改文本视图并设置在 Timer Task 中可见的按钮

> ID：15988128
> 
> 赞同：0
> 
> 时间：2013-04-13T13:07:42.040
> 
> 标签：android, button, timer, textview, timertask

我有问题，我无法解决。在我的活动中，我得到了一个函数，如果手机连接到 Wifi 或 3g 则返回。当我打开**onCreate()**时，我会初始化变量并在 5 秒内运行 TimerTask 5 次，以测试连接是否为“真”。

如果连接打开，我设置一个对用户可见的 Enter 按钮，单击以前进到我的下一个活动，并设置 2 个文本，以打开一条消息“CLICK enter to begin”。

问题出在 TimerTask 中，我收到一条错误消息：“只有创建视图层次结构的原始线程才能触及其视图”。我该如何解决？？？

代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
setContentView(R.layout.entry_activity);

enter = (Button) findViewById(R.id.button_enter);
intent = new Intent(EntryActivity.this, MainActivity.class);
warning = (TextView) findViewById(R.id.textView_warning);
turnOn = (TextView) findViewById(R.id.textView_turnOn);
Context context=this;

t = new Timer();
t.schedule( new TimerTask() {
    @Override
    public void run() {

        if(isNetAvailable(getApplicationContext())){
            enter.setVisibility(View.VISIBLE);
            turnOn.setText("Click Enter to begin");
            turnOn.setTextColor(R.color.Green);
            t.cancel();
                }
        }       
},0, 1000);

enter.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub~
        startActivity(intent);
    }
});
} 
```

注意：在应用程序的开头，我假设没有 Internet 连接，这就是为什么我将 TextColor 更改为绿色并将打开更改为“单击 Enter ..”（在开头显示的文本是“没有 Internet ，开机。等待”...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:10:09.460

如错误所述，您不能在与创建视图的线程不同的线程中触摸视图，该线程通常是 UI 线程（应用程序的主线程）。您可以通过更改任务以在 UI 线程上运行 UI 更改来轻松修复它，如下所示：

```
runOnUIThread(new Runnable()
{
            turnOn.setText("Click Enter to begin");
            turnOn.setTextColor(R.color.Green);
}); 
```

另一种选择是为相同目的使用处理程序。但我个人更喜欢简单的`runOnUIThread`方法。

# azure - 从 Azure 读取具有不同类名的数据

> ID：15988137
> 
> 赞同：0
> 
> 时间：2013-04-13T13:08:33.197
> 
> 标签：azure, windows-8, azure-mobile-services

使用此代码，我可以从我的 Azure Web 服务表中读取数据。

```
private MobileServiceCollectionView<Item> items;
private IMobileServiceTable<Item> table = App.MobileService.GetTable<Item>();

items = table.ToCollectionView();
// and so on... 
```

我的问题是，我的表的名称与`Item`Class 不同，但我不想更改表的名称，因为我认为这是最好的名称，以便更好地理解。是否有可能我的表有名称`Person`，但我使用类名称发送查询`Item`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:17:55.007

为了完整起见，您还可以使用

```
[DataTable("*tableName*")] 
```

定义数据类型对应的 Azure 移动服务表的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:57:42.167

找到了解决方案：

```
//over the Class definition
[DataContract(Name = "*tablename*")] 
```

# concurrency - 为什么并发控制使用经典的二条件算法

> ID：15988140
> 
> 赞同：10
> 
> 时间：2013-04-13T13:08:53.853
> 
> 标签：concurrency, java

在阅读 的源代码时`ArrayBlockingQueue`，我发现一条评论解释说它使用了“*任何教科书中都可以找到的经典双条件算法*”：

```
/*
 * Concurrency control uses the classic two-condition algorithm
 * found in any textbook.
 */

/** Main lock guarding all access */
private final ReentrantLock lock;
/** Condition for waiting takes */
private final Condition notEmpty;
/** Condition for waiting puts */
private final Condition notFull; 
```

为什么它使用经典的二条件（notEmpty，notFull）算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:22:08.823

你已经有很好的评论了。仅作为补充。

*ArrayBlockingQueue*是一个与*状态相关的*类。这意味着此类具有只能在某些前提条件下执行的操作。

仅当前提条件（notFull）为假时，编写器线程才会等待。

*// 如果队列已满，则 writer 需要等待。
// 以原子方式释放锁并等待信号（读取器触发的 notFull.signal()）。* **while (count == items.length)
notFull.await();**

对于读者来说，这个概念是相同的，但使用了 notEmpty 条件。

*// 如果队列为空，则 reader 需要等待。
// 原子地释放锁并等待信号（notEmpty.signal() 由写入器触发）。* **while (count == 0)
notEmpty.await();**

当线程唤醒时，您需要做两件事：
1 - 获取锁
2 - 重新测试条件

# wicket - wicket 1.6.6 春季项目

> ID：15988142
> 
> 赞同：0
> 
> 时间：2013-04-13T13:08:56.263
> 
> 标签：wicket, wicketstuff, wicket-1.6

我正在为我的项目寻找一个起点 我想开始一个包含项目的项目

1.wicket 1.6.6 2.integration to spring 3.simple log in page（不是必须的）

你知道一个可以与 1.6.6 一起使用（所有示例都是 1.5 及以下）并且没有 jpa 或任何其他内置于 Crud Mechanisam

提前 10 倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:10:07.343

我的问题是使用

```
 addComponentInstantiationListener(new SpringComponentInjector(this)); 
```

当我使用 1.6.6 现在我正在使用

```
 getComponentInstantiationListeners().add(new SpringComponentInjector(this)); 
```

所有寻找答案的人的 10 倍...

# magento - Magento：是否可以在不编辑 catalog.xml 的情况下将块添加到类别视图的其他块中

> ID：15988149
> 
> 赞同：2
> 
> 时间：2013-04-13T13:09:48.693
> 
> 标签：magento, magento-1.7

我创建了一个自定义模块，该模块将属性添加到 magento 类别并在我的类别页面上显示。

起初，我编辑了 category/view.phtml 模板文件来直接检索我的属性。工作正常，但不是一个真正合适的解决方案，因为我必须编辑默认模板文件。

因此，我创建了自己的布局 .phtml 文件，该文件在类别页面上呈现自定义块。这很好用，只要我使用 \'content\' 作为参考。

```
 <catalog_category_default>
       <reference name=\"content\">        
         <block type=\"categoryreadmore/readmore\" name=\"slim_readmore\"> 
```

问题是，这不能满足我的需要。我需要将我的块直接放在类别描述下！在 catelog.xml 中，如果在类别视图中找到此内容。

```
 <reference name=\"content\">
        <block type=\"catalog/category_view\" name=\"category.products\" template=\"catalog/category/view.phtml\">
            <block type=\"catalog/product_list\" name=\"product_list\" template=\"catalog/product/list.phtml\"> 
```

所以我需要将我的块放在 \'category.products\' 块内的 \'product_list\' 之上。

这甚至可以在不编辑catalog.xml 的情况下完成吗？我想要一个单包模块，而不必每次安装模块时都编辑默认模板。

提前致谢！

* * *

有任何想法吗？

我的假设是这是不可能的，这将是一个遗憾

我当前的代码

配置.xml：

```
<frontend>
  <layout>
    <updates>
        <readmore>
            <file>readmore.xml</file>
        </readmore>
    </updates>
  </layout> 
```

阅读更多.xml

```
<catalog_category_default>
   <reference name="content">
     <block type="categoryreadmore/readmore" name="slim_readmore" before="product_list" >
        <action method="setTemplate"><template>readmore/readmore.phtml</template></action> 
     </block>
  </reference>
</catalog_category_default> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:50:15.297

绝对地！模块可以定义自己的布局 XML 文件。在您的模块`etc/config.xml`文件中，定义您的布局文件的名称，并且该文件可以包含您想要进行的更新。将此文件放在`app/design/frontend/base/default/layout`. 在您的新块中，您可以添加`before`参数以指定它将在`product_list`块之前呈现，如下所示`<block type=\"categoryreadmore/readmore\" name=\"slim_readmore\" before=\"product_list\">`：Magento 足够聪明，知道在块*之前*渲染这个`product_list`块。这是可以进入模块的代码`config.xml`：

```
<config>
    <frontend>
        <layout>
            <updates>
                <module_identifier>
                    <file>module_layout_file.xml</file>
                </module_identifier>
            </updates>
        </layout>
    </frontend> 
</config> 
```

# actionscript-3 - 动作脚本 3 (AS3) MovieClip(root).MyVariable 如何工作？

> ID：15988150
> 
> 赞同：0
> 
> 时间：2013-04-13T13:09:50.293
> 
> 标签：actionscript-3, flash, animation, flash-cs6

我是 AS3 的新手，正在努力学习它。尝试创建游戏，其中包含主要时间线和许多电影剪辑。我在主时间轴中有一些变量，我想每次都通过单击每个不同的影片剪辑来更改它们。比方说，我有舞台坐标 cx 和 cy，然后我单击任何我想将这些变量更改为电影剪辑的坐标的影片剪辑。这是我所做的：

主要时间线

```
import flash.events.MouseEvent;
import fl.motion.Color;
import fl.motion.MotionEvent;
import fl.transitions.Tween;
import fl.transitions.easing.*;
import flash.display.InterpolationMethod;

var cx:int;        //stage coordinate x;
var cy:int;        //stage coordinate y;
var tx:int;        //table coordinate x;
var ty:int;    //table coordinate y;

c1.addEventListener(MouseEvent.CLICK, tracing);
c2.addEventListener(MouseEvent.CLICK, tracing);

function tracing(e:MouseEvent):void {
e.currentTarget.gotoAndPlay(1);
trace(cx,cy,tx,ty);
} 
```

第一帧上的 c1 影片剪辑（符号名称 mc1）代码：

```
MovieClip(root).cx=0;
MovieClip(root).cy=0;
MovieClip(root).tx=0;
MovieClip(root).ty=0; 
```

第一帧上的 c2 影片剪辑（符号名称 mc2）代码：

```
MovieClip(root).cx=85;
MovieClip(root).cy=85;
MovieClip(root).tx=85;
MovieClip(root).ty=85; 
```

问题是我总是得到我点击的第一个电影剪辑的价值。我找到了解决方案，但我认为它不应该是这样，在每个 mc1 和 mc2 中我制作了第二个空关键帧，现在它可以工作了，但我认为它不应该是这样的，我做错了什么，任何在movieclips中不创建更多帧的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:36:36.790

这实际上听起来不太对劲。我怀疑这是因为您在到达第一帧之前到达了跟踪语句。但是，我鼓励您现在放弃这种方法并开始养成更好的习惯。

让子剪辑了解并操作层次结构中更高的对象是一个绝妙的捷径——导致无法维护的混乱。相反，您应该使它们上的 cx、cy、tx、ty 属性可供读取，或者从它们分派一个事件，从中可以推断出这些值。

这是一个简单的示例，说明您如何完成此操作：

```
类 MainDocument 扩展 MovieClip {
   //假设这些是舞台实例
   公共变量 c1:MovieClip;
   公共 var c2:MovieClip;
   public var valueRegistry:Dictionary = new Dictionary();
   受保护的 var cx:int;
   受保护的 var cy:int;
   受保护的 var tx:int;
   受保护的变量：int；
   函数 MainDocument () {
       极好的（）;
       如果（c1）{
           valueRegistry[c1] = {cx:0, cy:0, tx:0, ty:0};
           c1.addEventlistener(MouseEvent.CLICK, tracking);
       }
       如果（c2）{
           valueRegistry[c2] = {cx:85, cy:85, tx:85, ty:85};
           c2.addEventlistener(MouseEvent.CLICK, 追踪);
       }
   }
   受保护的函数跟踪（e：MouseEvent）：void {
      var mc:MovieClip = e.currentTarget as MovieClip;
      mc.goToAndPlay(1);
      变量值：对象 = valueRegistry[mc];
      如果（值）{
         cx = 值[cx];
         cy = 值[cy];
         tx = 值[tx];
         ty = 值[ty];
      }
      跟踪（cx，cy，tx，ty）；
   }

}
```

请注意，现在您可以如何使这些 mc 成为任何东西——无论有没有他们自己的代码。我建议的一种优化是，如果 cx、cy、tx、ty 始终是相同的值，则仅使用该值而不是 Object。

# javascript - 在鼠标悬停时获取类元素中的类元素

> ID：15988160
> 
> 赞同：0
> 
> 时间：2013-04-13T13:11:00.567
> 
> 标签：javascript, html, onmouseover

我想在鼠标悬停时隐藏一个元素。

```
<div class="filmbox">
    <img src="img/cover/django.jpg" onmouseover="cover()" class="filmpic">
    <div class="filmcover">98 pt</div>
    <div class="filmtext">&nbsp;DJANGO</div>
</div> 
```

Filmbox 类被乘了很多次，所以我无法将其更改为 ID。

```
function cover(){
document.getElementsByClassName('filmcover').style.visibility='hidden';
} 
```

我可以使用它而不是 getElements ..... 因为我希望这个 div 对图片而不是本身做出反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:21:34.190

然后使用 Jquery

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
function cover(me){
$(me).next(".filmcover").hide();
}
</script>

<div class="filmbox">
    <img src="img/cover/django.jpg" onmouseover="cover(this)" class="filmpic">
    <div class="filmcover">98 pt</div>
    <div class="filmtext">&nbsp;DJANGO</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:24:05.417

这也可以通过使用关键字将图像的引用传递给`cover()`函数来完成，如`this``onmouseover="cover(this)"`

例如，以下代码在鼠标悬停时隐藏特定图像。它还确保只有鼠标悬停的图像才会在鼠标悬停时隐藏（我假设该类`filmpic`适用于多个图像）。

```
<script>
function cover(imagetag){
     imagetag.style.visibility="hidden";
}
</script>

<div class="filmbox">
     <img src="img/cover/django.jpg" onmouseover="cover(this)" class="filmpic">
    <div class="filmcover">98 pt</div>
    <div class="filmtext">&nbsp;DJANGO</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:36:32.870

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
jQuery(document).ready(function(){
    jQuery(".filmpic").hover(
    function(){
        $(".filmcover").hide(); 
    },
    function(){
        $(".filmcover").show();
    }
    );
});
</script>
<div class="filmbox">
<img src="img/cover/django.jpg" class="filmpic">
<div class="filmcover">98 pt</div>
<div class="filmtext">&nbsp;DJANGO</div>
</div> 
```

# delphi - Delphi - 截图质量

> ID：15988161
> 
> 赞同：-1
> 
> 时间：2013-04-13T13:11:11.083
> 
> 标签：delphi, delphi-xe2

我使用此代码制作屏幕截图：

```
function GetScreenShot: TBitmap;
var
  Desktop: HDC;
begin
  Result  := TBitmap.Create;
  Desktop := GetDC(0);
  try
    try
      Result.PixelFormat := pf32bit;
      Result.Width := Screen.Width;
      Result.Height := Screen.Height;
      BitBlt(Result.Canvas.Handle, 0, 0, Result.Width, Result.Height, 
        Desktop, 0, 0, SRCCOPY);
      Result.Modified := True;
    finally
      ReleaseDC(0, Desktop);
    end;
  except
    Result.Free;
    Result := nil;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Image1.Picture.Bitmap := GetScreenShot;
end; 
```

现在我想问我如何改变质量。例如，我可以在 25%、50%、75% 和 100% 之间进行选择。

我怎么能在我的代码中实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T13:15:08.873

您无法指定截取的屏幕截图的大小或质量，但您可以稍后自行更改，例如查看以下代码：[http ://www.tek-tips.com/faqs.cfm?fid=7481](http://www.tek-tips.com/faqs.cfm?fid=7481)

# javascript - Jquery函数效果不适用于动态加载的内容

> ID：15988162
> 
> 赞同：0
> 
> 时间：2013-04-13T13:11:23.023
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用这个

```
http://vadikom.com/tools/poshy-tip-jquery-plugin-for-stylish-tooltips/ 
```

加载提示。当页面被加载并且提示被应用到特定的 id 或类或元素时，这个插件工作正常，但是当我使用 jquery 执行其他功能并加载更多同名的类时，这个提示将不会被应用，但如果相同的元素是加载页面时显示它可以工作

到目前为止我做了这些

```
$('img').delegate('img', 'hover', function() {

$(this).poshytip({
                className: 'tip-twitter',
                showTimeout: 1,
                alignTo: 'target',
                alignX: 'center',
                offsetY: 5,
                allowTipHover: false,
                fade: false,
                slide: false
            });

       // code here
    }); 
```

//------------------------------------------------ -----

```
$(document).ready(function () {

    $('.classname').poshytip({
                    className: 'tip-twitter',

    showTimeout: 1,
                alignTo: 'target',
                alignX: 'center',
                offsetY: 5,
                allowTipHover: false,
                fade: false,
                slide: false
            });
}); 
```

当我在说一个 ajax 调用之后加载另一个同名的类时，不应用此效果

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:15:41.597

您只是将悬停功能绑定到页面加载时可见的内容。再次将其绑定为成功的 ajax 调用。

# java - 当窗口调整大小时，如何调整 JLabel 中的图像大小？如何保持适当的规模？

> ID：15988163
> 
> 赞同：0
> 
> 时间：2013-04-13T13:11:29.300
> 
> 标签：java, image, swing, resize, jlabel

假设我在 JLabel 中有一张图片。这是我目前添加它的方式：

```
p=resizeImage(p,lbl.getWidth(),lbl.getHeight());
lbl.setIcon(p); 
```

我想在调整标签大小时调整它的大小。

*   我怎样才能做到这一点？
*   如何在保持比例的同时调整大小？

我可以编写一个小函数来获取图像的宽高比，获取标签的宽度和高度，找到两者中的较小者（按比例）并手动计算新的高度和宽度。这不是问题，但我想知道是否有更清洁的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:31:16.277

您可以收听标签的调整大小事件，或者我更喜欢直接*绘制*图像（用 JComponent 替换 JLabel）。

# indexing - h264 高配置视频：从指定点播放

> ID：15988171
> 
> 赞同：1
> 
> 时间：2013-04-13T13:12:40.273
> 
> 标签：indexing, decode, h.264

# 从特定点开始流式传输/播放 h264 高配置 HDTV 视频转储的正确和快速方法是什么？

真实生活流的巨大样本： [这个](http://rutracker.org/forum/viewtopic.php?t=4382917)文件。

根据“ffprobe -show_frames”，此示例 10Gb 105 分钟视频转储只有 28 个标记为“key_frame=1”的视频帧和 10 个 I 帧。

我正在尝试改进的应用程序使用此类帧作为某种索引，允许从任何关键帧或 I 帧倒带和播放。它与其他流完美配合。但不是在这种情况下，因为您很容易理解。在 100 多分钟的节目中只有 28 个起点的播放太少了。

我已经检查了是否存在启用了“随机访问指示符”的数据包 - 但此流中的此类数据包不在帧边界上，它们没有启用“帧开始”位，所以我不能依赖他们。有没有办法为此编解码器实现“从指定时间点倒带/暂停/播放”功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:21:36.897

通过将包含 NAL 序列“nal slice idr”和“nal slice pps”的索引帧解释为索引帧来解决。

# django - 无法在 Django 1.5 中使用自定义用户模型创建超级用户

> ID：15988183
> 
> 赞同：10
> 
> 时间：2013-04-13T13:13:36.450
> 
> 标签：django, django-models, foreign-keys

我的目标是在 Django 1.5 中创建自定义用户模型

```
# myapp.models.py 
from django.contrib.auth.models import AbstractBaseUser

class MyUser(AbstractBaseUser):
    email = models.EmailField(
        verbose_name='email address',
        max_length=255,
        unique=True,
        db_index=True,
    )
    first_name = models.CharField(max_length=30, blank=True)
    last_name = models.CharField(max_length=30, blank=True)
    company = models.ForeignKey('Company')
    ...

    USERNAME_FIELD = 'email'
    REQUIRED_FIELDS = ['company'] 
```

由于公司字段（models.ForeignKey（'Company'）（python manage.py createsuperuser），我无法创建超级用户。我的问题：
如何在没有公司的情况下为我的应用程序创建超级用户。我试图制作自定义 MyUserManager 没有任何成功：

```
class MyUserManager(BaseUserManager):
    ...

    def create_superuser(self, email, company=None, password):
        """
        Creates and saves a superuser with the given email and password.
        """
        user = self.create_user(
            email,
            password=password,
        )
        user.save(using=self._db)
        return user 
```

还是我必须为这个用户创建一个假公司？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T14:59:35.693

在这种情况下，您有三种方法

1) 与公司建立关系 不需要`company = models.ForeignKey('Company', null=True)`

2）添加默认公司并将其作为默认值提供给外键字段`company = models.ForeignKey('Company', default=1)` #其中1是创建公司的ID

3) 保持模型代码不变。为名为“Superusercompany”的超级用户添加假公司，在 create_superuser 方法中设置它。

UPD：根据您的评论方式＃3 将是不破坏您的业务逻辑的最佳解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T16:20:44.160

感谢您的反馈，这是我提出的解决方案：我在其中创建了默认公司的自定义 MyUserManager

```
 def create_superuser(self, email, password, company=None):
        """
        Creates and saves a superuser with the given email and password.
        """

        if not company:
            company = Company(
                name="...",
                address="...",
                code="...",
                city="..."
            )
            company.save()

        user = self.create_user(
            email,
            password=password,
            company=company
        )
        user.is_admin = True
        user.save(using=self._db)
        return user 
```

# javascript - 我的脚本附加功能不起作用

> ID：15988186
> 
> 赞同：1
> 
> 时间：2013-04-13T13:14:01.953
> 
> 标签：javascript, function, append

我已经构建了这个函数来检查脚本或样式表是否已经附加到 HTML 的 head 标记中。如果脚本已经存在，则该函数应防止再次附加相同的引用。

这是我的代码：

```
function appendScript(path, type) {
    var x = document.getElementsByTagName(type);
    var header_already_added = false;

    for (var i=0; i< x.length; i++){
          if (x[i].src == path || x[i].href == path){
                 // ... do not add header again
                 header_already_added = true;
          }
    }

    if (header_already_added == false){
        var head = document.getElementsByTagName('head')[0];

        // We create the style
        if (type == 'link') {

            var style = document.createElement('link');
            style.setAttribute("rel", "stylesheet");
            style.setAttribute("type", "text/css");
            style.setAttribute("href", path)

            head.appendChild(style);

        } else if (type == 'script') {

            var script = document.createElement('script');
            script.setAttribute("type", "text/javascript");
            script.setAttribute("src", path);

            head.appendChild(script);

        }
    }
} 
```

我这样调用函数

```
 appendScript('_css/style.test.css', 'link');
        appendScript('_scripts/_js/script.test.js', 'script'); 
```

控制台日志没有任何问题。但问题是它不会阻止脚本再次被附加。任何人都可以发现错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:43:12.823

您正在使用相对路径作为参数。浏览器将其转换为绝对路径。所以你必须使用绝对路径。像那样：

```
appendScript('http://stackoverflow.com/_scripts/_js/script.test.js', 'script'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:42:48.707

我认为这是因为您使用相对 URL。如果您检查与“路径”比较的元素的“src”属性，它将包含协议和主机，因此它不会匹配。你需要考虑到这一点。

# ruby-on-rails - Heroku Rails 页面未找到

> ID：15988187
> 
> 赞同：1
> 
> 时间：2013-04-13T13:14:14.120
> 
> 标签：ruby-on-rails, deployment, heroku, gemfile

我正在尝试在 heroku 上部署一个示例 rails 应用程序。在创建一个非常基本的应用程序、添加一个 git 存储库、提交所有内容和“heroku create”之后，我将它推送到 heroku。终端中完全没有错误，但是当我使用正确的地址打开浏览器时，我得到以下信息：

```
The page you were looking for doesn't exist.

You may have mistyped the address or the page may have moved. 
```

我已经搜索了三个小时并使用了关于如何部署应用程序的 heroku 教程，但我就是不知道我做错了什么。这是我的 Gemfile：

```
source 'https://rubygems.org'

ruby '2.0.0'

gem 'rails', '4.0.0.beta1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'json'

group :production do
  gem 'pg'
  gem 'rails', '4.0.0.beta1'
  gem 'railties', '4.0.0.beta1'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  #gem 'sass-rails',   '~> 3.2.3'
  gem 'sass-rails',   '~> 4.0.0.beta1'
  #gem 'coffee-rails', '~> 3.2.1'
  gem 'coffee-rails', '~> 4.0.0.beta1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

上面的步骤我重复了几次，还是不行。谢谢！

编辑：添加了heroku控制台日志：

```
2013-04-13T14:15:14.800540+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/commands/server.rb:80:in `start'
2013-04-13T14:15:14.801066+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/commands.rb:73:in `<top (required)>'
2013-04-13T14:15:14.801066+00:00 app[web.1]:    script/rails:6:in `<main>'
2013-04-13T14:15:14.801375+00:00 app[web.1]: [2013-04-13 14:15:14] INFO  going to shutdown ...
2013-04-13T14:15:14.801542+00:00 app[web.1]: [2013-04-13 14:15:14] INFO  WEBrick::HTTPServer#start done.
2013-04-13T14:15:14.801066+00:00 app[web.1]:    script/rails:6:in `require'
2013-04-13T14:15:14.800540+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/commands.rb:73:in `tap'
2013-04-13T14:15:14.822878+00:00 app[web.1]: => Booting WEBrick
2013-04-13T14:15:14.822878+00:00 app[web.1]: => Rails 4.0.0.beta1 application starting in production on http://0.0.0.0:44478
2013-04-13T14:15:14.822878+00:00 app[web.1]: => Call with -d to detach
2013-04-13T14:15:14.822878+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-04-13T14:15:14.822878+00:00 app[web.1]: 
2013-04-13T14:15:14.822878+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/"):
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:21:in `block in call'
2013-04-13T14:15:14.822878+00:00 app[web.1]: Started GET "/" for 178.25.122.239 at 2013-04-13 14:02:08 +0000
2013-04-13T14:15:14.822878+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:38:in `call_app'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:21:in `call'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:67:in `tagged'
2013-04-13T14:15:14.822878+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:25:in `tagged'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
2013-04-13T14:15:14.823433+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/engine.rb:510:in `call'
2013-04-13T14:15:14.823433+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/application.rb:96:in `call'
2013-04-13T14:15:14.823433+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
2013-04-13T14:15:14.823433+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
2013-04-13T14:15:14.822878+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
2013-04-13T14:15:14.823433+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/request_id.rb:21:in `call'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:67:in `block in tagged'
2013-04-13T14:15:14.823433+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
2013-04-13T14:15:14.823204+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-04-13T14:15:14.823433+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
2013-04-13T14:15:14.823433+00:00 app[web.1]: 
2013-04-13T14:15:14.823433+00:00 app[web.1]: Started GET "/" for 178.25.122.239 at 2013-04-13 14:04:08 +0000
2013-04-13T14:15:14.823433+00:00 app[web.1]: 
2013-04-13T14:15:14.823657+00:00 app[web.1]: 
2013-04-13T14:15:14.823657+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/"):
2013-04-13T14:15:14.823657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-04-13T14:15:14.823657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
2013-04-13T14:15:14.823657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:38:in `call_app'
2013-04-13T14:15:14.823657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:21:in `block in call'
2013-04-13T14:15:14.823657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:67:in `block in tagged'
2013-04-13T14:15:14.823657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:25:in `tagged'
2013-04-13T14:15:14.823657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:67:in `tagged'
2013-04-13T14:15:14.823657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:21:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/request_id.rb:21:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/engine.rb:510:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/application.rb:96:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
2013-04-13T14:15:14.823871+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
2013-04-13T14:15:14.824082+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
2013-04-13T14:15:14.824082+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
2013-04-13T14:15:14.824082+00:00 app[web.1]: 
2013-04-13T14:15:14.824082+00:00 app[web.1]: 
2013-04-13T14:15:14.824082+00:00 app[web.1]: Started GET "/favicon.ico" for 178.25.122.239 at 2013-04-13 14:04:09 +0000
2013-04-13T14:15:14.824082+00:00 app[web.1]: 
2013-04-13T14:15:14.824082+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
2013-04-13T14:15:14.824082+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-04-13T14:15:14.824082+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
2013-04-13T14:15:14.824082+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:38:in `call_app'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:21:in `block in call'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:67:in `block in tagged'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:67:in `tagged'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/rack/logger.rb:21:in `call'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/tagged_logging.rb:25:in `tagged'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bu
ndle/ruby/2.0.0/gems/actionpack-4.0.0.beta1/lib/action_dispatch/middleware/request_id.rb:21:in `call'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
2013-04-13T14:15:14.824503+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.0.0.beta1/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-04-13T14:15:14.824292+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/engine.rb:510:in `call'
2013-04-13T14:15:14.824503+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'
2013-04-13T14:15:14.824503+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'
2013-04-13T14:15:14.824503+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/lock.rb:17:in `call'
2013-04-13T14:15:14.824503+00:00 app[web.1]: 
2013-04-13T14:15:14.824503+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.5.2/lib/rack/handler/webrick.rb:60:in `service'
2013-04-13T14:15:14.824503+00:00 app[web.1]: Exiting
2013-04-13T14:15:14.824503+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.0.0.beta1/lib/rails/application.rb:96:in `call'
2013-04-13T14:15:14.824503+00:00 app[web.1]:   vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'
2013-04-13T14:15:14.824503+00:00 app[web.1]: 
2013-04-13T14:15:14.516222+00:00 heroku[web.1]: State changed from starting to up
2013-04-13T14:15:16.056837+00:00 heroku[web.1]: Process exited with status 143
2013-04-13T14:16:05.609544+00:00 app[web.1]: 
2013-04-13T14:16:05.609544+00:00 app[web.1]: To disable this message remove the `whitelist_attributes` option from your
2013-04-13T14:16:05.609544+00:00 app[web.1]: DEPRECATION WARNING: Model based mass assignment security has been extracted
2013-04-13T14:16:05.609544+00:00 app[web.1]: out of Rails into a gem. Please use the new recommended protection model for
2013-04-13T14:16:05.609544+00:00 app[web.1]: params or add `protected_attributes` to your Gemfile to use the old one.
2013-04-13T14:16:05.609544+00:00 app[web.1]: `config/application.rb` file and any `mass_assignment_sanitizer` options
2013-04-13T14:16:05.609544+00:00 app[web.1]: See http://guides.rubyonrails.org/security.html#mass-assignment for more information.
2013-04-13T14:16:05.609544+00:00 app[web.1]:  
2013-04-13T14:16:05.609544+00:00 app[web.1]: 
2013-04-13T14:16:05.609544+00:00 app[web.1]: from your `config/environments/*.rb` files.
2013-04-13T14:16:05.730223+00:00 heroku[router]: at=info method=GET path=/ host=mighty-depths-7233.herokuapp.com fwd="178.25.122.239" dyno=web.1 connect=1ms service=209ms status=404 bytes=728
2013-04-13T14:16:05.980431+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=mighty-depths-7233.herokuapp.com fwd="178.25.122.239" dyno=web.1 connect=0ms service=6ms status=404 bytes=728 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T14:27:25.320

首先，这里有一个很好[的 Rails 路由](http://guides.rubyonrails.org/routing.html)指南。

假设您的应用程序中有一个`Article`模型和一个文章控制器，您必须在 config/routes.rb 下定义此资源的路由。Rails 允许您在一行中添加`index, show new, create, edit, update`路线`destroy`：

```
resources :articles 
```

这将映射到以下内容：

```
GET     /articles           index   display a list of all articles
GET     /articles/new       new     return an HTML form for creating a new article
POST    /articles           create  create a new article
GET     /articles/:id       show    display a specific article
GET     /articles/:id/edit  edit    return an HTML form for editing a article
PUT     /articles/:id       update  update a specific article
DELETE  /articles/:id       destroy delete a specific article 
```

但是，要确保主页路由到您需要`root`在 config/routes.rb 下定义的这些操作之一

```
root to: "articles#index" 
```

然后再次提交并推送到heroku。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:33:09.277

我注意到您正在尝试（可能是无意的）使用导轨的“边缘”版本（4+）。

我现在会坚持使用 3.x 版本，这就是本教程可能假设的内容。

您可以使用它来创建具有特定版本的应用程序（在这种情况下为 3.2）

```
rails _3.2_ new myapp 
```

如果您的系统上没有该版本的 rails，您可能需要安装它，例如

```
gem install -v=3.2 rails 
```

或者，如果失败了，

```
sudo gem install rails -v3.2 
```

以上就是为什么，当您按照当前的 Heroku 说明进行操作时，它假定 rails 3 并且该版本确实执行该默认根路径和 public/index.html 文件

# mysql - MySQL 嵌套 SQL 有限制

> ID：15988189
> 
> 赞同：3
> 
> 时间：2013-04-13T13:14:19.797
> 
> 标签：mysql, sql, nested, limit

我知道不可能在嵌套的 IN 中使用限制，但我认为有办法做到这一点，我只是不确定如何。

我有一个包含评分和评论的表（为解释而简化）

```

我的单表：
+----+------------------+------------+------------+- ----------------+
| 编号 | 评论者评论 | is_rating | parent_id | reviewer_rating |
+----+------------------+------------+------------+- ----------------+
| 1 | 做得好率A | 1 | 0 | 5 星 |
| 2 | 评论AonRateA | 0 | 1 | |
| 3 | 评论BonRateA | 0 | 1 | |
| 4 | 评论ConRateA | 0 | 1 | |
| 5 | 评论DonRateA | 0 | 1 | |
| 6 | 评论EonRateA | 0 | 1 | |
| 7 | commentFonRateA | 0 | 1 | |
| 8 | 做得好率B | 1 | 0 | 4 星 |
| 9 | 做得好率C | 1 | 0 | 5 星 |
| 11 | 做得好评价D | 1 | 0 | 3 星 |
| 12 | 做得好率E | 1 | 0 | 2 星 |
| 13 | 做得好率F | 1 | 0 | 5 星 |
| 14 | 干得好率G | 1 | 0 | 3 星 |
| 15 | commentAonRateD | 0 | 11 | |
+----+------------------+------------+------------+- ----------------+

```

所以，
如果 is_rating = 1，它就是一个评级。
如果 is_rating = 0，它是对评级的评论（它的父评级是 parent_id=id 的地方）

所以这看起来像：

```
做得好评价A *****  
 评论AonRateA  
 评论BonRateA  
 评论ConRateA  
 评论DonRateA  
 评论EonRateA  
 评论FonRateA    
做得好评分B ****  
做得好率C *****  
做得好评价D ***  
 评论评分    
做得好率E **  
干得好F *****  
做得好评分G ***  

```

我想要做的是选择最新的五个评级，关联最新的 5 条评论，仅使用 1 个查询

所以，一些如何加入这两个：

```
SELECT ratings.*
        FROM mySingleTable as ratings
        WHERE 
        is_rating = 1
        ORDER BY timestamp DESC LIMIT 0, 5  

    SELECT comments.*
        FROM mySingleTable as comments
        Where 
        comments.parent_id = ratings.id 
        AND is_rating = 0
        ORDER BY timestamp DESC LIMIT 0, 5 
```

第二个查询需要以某种方式了解评级查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:28:58.157

请尝试此查询，该查询现已简化并经过测试。

```
SELECT *
FROM
 (SELECT *,
        IF (group_id = @prev,
            @n := @n + 1,
            @n := 1 AND @prev := group_id) as position
 FROM (
   SELECT mySingleTable.*, group_id
   FROM   mySingleTable
   INNER JOIN
       (SELECT id AS group_id
        FROM   mySingleTable
        WHERE  is_rating = 1
        ORDER BY timestamp DESC LIMIT 0, 5
       ) AS top5ratings
   ON     mySingleTable.id = group_id OR mySingleTable.parent_id = group_id
   ORDER BY group_id DESC,
            mySingleTable.parent_id ASC,
            timestamp DESC) AS all_reviews
  JOIN  (SELECT @n := 0, @prev := 0) AS setup) AS reviews
WHERE reviews.position < 7 
```

请记住， SELECT * 是不好的做法。我用它来简化阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:03:18.853

试试这个查询

```
SELECT comments.*
FROM
(
SELECT ratings.id
        FROM mySingleTable as ratings
        WHERE 
        is_rating = 1
        ORDER BY timestamp DESC LIMIT 0, 5 ) AS Top5
INNER JOIN mySingleTable AS comments ON  comments.parent_id = Top5.id 
WHERE comments.is_rating = 0
ORDER BY comments.timestamp DESC LIMIT 0, 5 
```

# sql - 使用组合框搜索数据库并显示多个结果

> ID：15988191
> 
> 赞同：2
> 
> 时间：2013-04-13T13:14:22.793
> 
> 标签：sql, database, vb.net, search

我正在尝试创建一个基于名称搜索动物的程序。我目前正在使用该部分，但是我想添加一个可选搜索，以便用户可以搜索特定数据，例如体重，组合框将显示所有具有匹配体重的动物的结果，用户可以然后选择他想要的，它会打开我设计的表格，显示正确的数据。不幸的是，我对编程有非常基本的了解，所以任何帮助都将不胜感激。

这是我当前的代码。主要搜索功能有效，但可选功能无效。有人告诉我这是由于我编写它的方式，因为每行 sql 都会替换自己，所以它只会以最后一个答案结束。

```
Private Sub btnsear_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsear.Click
    If (txtname.Text = "") Then
        MsgBox("Invalid Search")
    Else
        Try
            Dim newsql As String
            newsql = "select * from Animals where AnimalName like " & "'%" & txtname.Text & "%'"
            'MsgBox("select * from Animals where AnimalName like " & "'" & txtname.Text & "'")
            'msgbox(newsql)
            Dim con As New OleDb.OleDbConnection
            Dim da As New OleDb.OleDbDataAdapter

            ' dim ds as NewDataTable
            Dim dt As New DataTable("Animals")
            ' uses the 2010 compatible connection string
            con.ConnectionString = "PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source = h:\Animals.accdb"
            con.Open()

            da = New OleDb.OleDbDataAdapter(newsql, con)
            da.Fill(dt)

            Form2.Show()

            'show name in unbound text box
            Form2.nametxt.Text = dt.Rows(0).Item(1)
            Form2.latintxt.Text = dt.Rows(0).Item(2)
            Form2.locationtxt.Text = dt.Rows(0).Item(3)
            Form2.heighttxt.Text = dt.Rows(0).Item(4)
            Form2.weighttxt.Text = dt.Rows(0).Item(5)
            Form2.diettxt.Text = dt.Rows(0).Item(6)
            Form2.statustxt.Text = dt.Rows(0).Item(7)
            Form2.lifetxt.Text = dt.Rows(0).Item(8)
            Form2.breedtxt.Text = dt.Rows(0).Item(9)
            Form2.lengthtxt.Text = dt.Rows(0).Item(10)
            Form2.txtimage.Text = dt.Rows(0).Item(11)

        Catch
            MsgBox("Item Not Found")
            'con.close()
        End Try
    End If

    If (txtopt.Text = "'") Then
        Try
            Dim sql1 As String
            Dim sql2 As String
            Dim sql3 As String
            Dim sql4 As String
            Dim sql5 As String
            Dim sql6 As String
            Dim sql7 As String
            Dim sql8 As String
            Dim sql9 As String
            Dim sql10 As String

            sql1 = "select * from Animals where AnimalName like " & "'%" & txtopt.Text & "%'"
            sql2 = "select * from Animals where LatinName like " & "'%" & txtopt.Text & "%'"
            sql3 = "select * from Animals where Location like " & "'%" & txtopt.Text & "%'"
            sql4 = "select * from Animals where AverageHeight like " & "'%" & txtopt.Text & "%'"
            sql5 = "select * from Animals where AverageWeight like " & "'%" & txtopt.Text & "%'"
            sql6 = "select * from Animals where DietaryNeeds like " & "'%" & txtopt.Text & "%'"
            sql7 = "select * from Animals where ConservationStatus like " & "'%" & txtopt.Text & "%'"
            sql8 = "select * from Animals where AverageLifeSpan like " & "'%" & txtopt.Text & "%'"
            sql9 = "select * from Animals where BreedingSeason like " & "'%" & txtopt.Text & "%'"
            sql10 = "select * from Animals where AverageLength like " & "'%" & txtopt.Text & "%'"

        Catch
        End Try
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:58:11.343

尝试类似...

```
Private Sub btnsear_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsear.Click
    If txtname.Text = "" Then
        MsgBox("Invalid Search")
    Else
        Try
            Dim newsql As String = "SELECT * FROM Animals WHERE AnimalName LIKE " & "'%" & txtname.Text & "%'"

            If txtopt.Text <> "" Then

                newsql &= " AND (AnimalName LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR LatinName LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR Location LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR AverageHeight LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR AverageWeight LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR DietaryNeeds LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR ConservationStatus LIKE " & "'%" & txtopt.Text & "%'" &    _
                          " OR AverageLifeSpan LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR BreedingSeason LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR AverageLength LIKE " & "'%" & txtopt.Text & "%')"
            End If

            Dim con As New OleDb.OleDbConnection
            Dim da As New OleDb.OleDbDataAdapter

            Dim dt As New DataTable("Animals")

            con.ConnectionString = "PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source = h:\Animals.accdb"
            con.Open()

            da = New OleDb.OleDbDataAdapter(newsql, con)
            da.Fill(dt)

            Form2.Show()

            'show name in unbound text box
            Form2.nametxt.Text = dt.Rows(0).Item(1)
            Form2.latintxt.Text = dt.Rows(0).Item(2)
            Form2.locationtxt.Text = dt.Rows(0).Item(3)
            Form2.heighttxt.Text = dt.Rows(0).Item(4)
            Form2.weighttxt.Text = dt.Rows(0).Item(5)
            Form2.diettxt.Text = dt.Rows(0).Item(6)
            Form2.statustxt.Text = dt.Rows(0).Item(7)
            Form2.lifetxt.Text = dt.Rows(0).Item(8)
            Form2.breedtxt.Text = dt.Rows(0).Item(9)
            Form2.lengthtxt.Text = dt.Rows(0).Item(10)
            Form2.txtimage.Text = dt.Rows(0).Item(11)

        Catch
            MsgBox("Item Not Found")
            'con.close()
        End Try
    End If

End Sub 
```

我没有对此进行测试，并且更详细地查看，这假设您的所有列都是字符列。

如果您最有可能混合了整数、日期、字符等，那么您可能需要更具体地了解您的搜索词。您需要根据用户尝试的可选搜索将可选 SQL 分开。

# c - 用 C 读写大文件

> ID：15988192
> 
> 赞同：0
> 
> 时间：2013-04-13T13:14:40.650
> 
> 标签：c, io

我想知道以下代码中的问题。这用于首先打开一个大小为 800Mb 的文件以填充 name 变量，然后用于通过从另一个文件读取索引来访问存储在其中的数据。问题是，在读取并填充数组名称后，从它访问任何元素都会出现段错误。当在较小的数据量上测试相同的代码时，它可以工作。可能是什么原因？我运行它的硬件是英特尔 i5 芯片上的 4gb RAM，32 位 linux 版本。

```
#include <stdio.h>
#define MAXINT 61578414
int main(int argc,char** argv){
    printf("Starting \n");    

    FILE* fp1 = fopen(argv[1],"r");
    FILE* fp2 = fopen(argv[2],"r");

    char** name;
    name = (char**)malloc(MAXINT*sizeof(char*));

    char* tname;

    int i = 0;
    int tmp1;

    //reading to fill in name
    while(i < MAXINT){
        name[i] = (char*)malloc(20);
        fscanf(fp1,"%d%s",&tmp1,name[i]);
        i++;
    }

    //accessing elements from  name
    int i1,i2;
    while(!feof(fp2)){
        fscanf(fp2,"%d%d",&i1,&i2);
        fprintf(stdout,"%s %s\n",*(name+i1),*(name+i2));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:15:40.113

这是在Linux上吗？在这种情况下，（默认情况下）来自 malloc 的非 NULL 值不会告诉您是否真的可以访问您请求的内存量。实际上，这意味着您可以分配比可用内存多得多的内存。只有当您实际*访问它*时，才会分配它的内存。

所以写一个简单的循环，它只是读取或写入你 malloc'ed 的每个字节，看看是否崩溃。如果是这样，那就是你的问题。

作为旁注，您是否考虑过使用[mmap()](https://stackoverflow.com/questions/7222164/mmap-an-entire-large-file)来处理大文件/内存分配？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:20:54.543

您的分配存在一个潜在问题`name`。

```
char** name;
name = (char**)malloc(MAXINT*sizeof(char*)); 
```

`name`被定义为一个指向指针的指针，它是一个指针数组。该代码正在分配`MAXINT`指针数量，这是一个非常大的数字。您需要检查是否`next`成功分配或`NULL`删除了指针，即是否`malloc`成功。

同样，`name[i] = malloc(20)`也应该检查`NULL`指针，因为您的系统可能会耗尽内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T14:22:36.580

我想`name = (char**)malloc(MAXINT*sizeof(char*));`实际上失败了，您应该在那里检查 NULL 返回值。

# node.js - 来自 node.js 的 postgres 连接

> ID：15988202
> 
> 赞同：4
> 
> 时间：2013-04-13T13:15:38.223
> 
> 标签：node.js, node-postgres

我在我的应用程序中使用[node-postgres](https://github.com/brianc/node-postgres)。我想知道我想遵循的最佳实践以确保稳定的连接。

以下是我现在正在使用的代码，

```
exports.getAll = function (args, callback) {
helper.client = new pg.Client('tcp://postgres:system6:5432@192.168.143.11/abc_dev');
helper.client.connect();
helper.client.query('select count(1) as total_records from facilities', function(err,response){
    helper.client.query('select * ,'+response.rows[0].total_records+' as total_records  from facilities', 
        function(err,response){
            callback(response);
            helper.client.end.bind(helper.client);
        });
    });
}; 
```

正如您在代码中看到的那样，我正在为每个请求连接数据库，并在查询执行后断开连接。我还有一个想法，我只能在全局范围内连接数据库一次，并使用打开的连接执行查询。代码看起来像

```
helper.client = new pg.Client('tcp://postgres:system6:5432@192.168.143.11/abc_dev');
helper.client.connect();

exports.getAll = function (args, callback) {
helper.client.query('select count(1) as total_records from facilities', function(err,response){
    helper.client.query('select * ,'+response.rows[0].total_records+' as total_records  from facilities', 
        function(err,response){
            callback(response);
        });
    });
}; 
```

在这里，连接永远不会结束。据我所知，我无法决定哪一个是最好的。请建议。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:12:44.617

[node-postgres wiki](https://github.com/brianc/node-postgres/wiki/Example)中有一个示例。每当处理请求时它都会连接：

```
var server = http.createServer(function(req, res, next) {
  pg.connect(function(err, client, done) { 
```

这也是我认为正确的：您的连接应该在请求范围内。

# c# - 从数据库 C# 填充数组

> ID：15988208
> 
> 赞同：0
> 
> 时间：2013-04-13T13:15:58.987
> 
> 标签：c#, asp.net, sql-server

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["cnnFinalProject"].ToString());
SqlCommand cmd = new SqlCommand(@"SELECT c.partID, p.name, p.categoryID, p.price, p.image, p.subCategoryID, 
                                        (CASE WHEN categoryID = 1 THEN 'Y' ELSE 'N' END) AS casesYN,
                                        (CASE WHEN categoryID = 3 THEN 'Y' ELSE 'N' END) AS OSYN,
                                        (CASE WHEN categoryID = 7 THEN 'Y' ELSE 'N' END) AS HDDYN,
                                        (CASE WHEN subCategoryID = 1 THEN 'Y' ELSE 'N' END) AS powerYN,
                                        (CASE WHEN subCategoryID = 2 THEN 'Y' ELSE 'N' END) AS processorYN,
                                        (CASE WHEN subCategoryID = 3 THEN 'Y' ELSE 'N' END) AS moboYN,
                                        (CASE WHEN subCategoryID = 4 THEN 'Y' ELSE 'N' END) AS memoryYN,
                                        (CASE WHEN subCategoryID = 5 THEN 'Y' ELSE 'N' END) AS graphicsYN,
                                        (CASE WHEN subCategoryID = 6 THEN 'Y' ELSE 'N' END) AS opticalYN,
                                        (CASE WHEN subCategoryID = 7 THEN 'Y' ELSE 'N' END) AS soundYN
                                        FROM configuration c JOIN parts p ON p.partID = c.partID
                                        WHERE c.customID = @ID", conn);
      conn.Open();
      SqlDataReader dr = cmd.ExecuteReader();
      while (dr.Read())
      {
        string[] cases = { dr["partID"].ToString() }; 
      } 
```

如何仅将“casesYN”值设置为 Y 的“partID”插入到 case 数组中，因为现在它将在 sql 查询中插入每个“partID”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T13:22:11.110

我假设您不想更改 SQL 查询。

使用`List<string>`(requires `using System.Collections.Generic`) 而不是`string[]`因为它会更容易添加新项目：

```
var cases = new List<string>();
while (dr.Read())
{
    if(dr["casesYN"].ToString() == "Y")
        cases.Add(dr["partID"].ToString()); 
} 
```

如果你真的需要一个数组，你总是可以`ToArray()`在循环结束后调用方法：

```
string[] casesArray = cases.ToArray(); 
```

但它需要`using System.Linq`在文件的顶部。

# c++ - 模板类 - 几个问题

> ID：15988223
> 
> 赞同：1
> 
> 时间：2013-04-13T13:18:01.357
> 
> 标签：c++, templates, c++11, delegating-constructor

我需要创建以两个整数作为参数的构造函数。

从那里我需要调用通过引用获取这些整数的方法。在这个方法中，我应该动态地将整数转换为`char*`类型（数字数组）。

在构造函数的末尾，我应该有两个`char*`数组而不是初始整数。

我不得不这样做，因为另一个班级做同样的事情，但在结构上。并将它们保存到模板属性中。

* * *

我是 C++ 语言的新手，但我的第一个猜测是使用模板。我对该主题进行了一些研究，发现它应该有效。

我很想自己编译整个东西，但是在我脑海中实现 c++ 类的混乱会产生很长的编译错误列表。

* * *

第一个问题 - 这可以使用模板完成吗？第二个问题，因为我已经自己写了一些东西：

```
template <class type> class Addition {
   type num_a;
   type num_b;
   void convert(type, type);
public:
   Addition(type, type);
}

template <class type> Addition::Addition(type a, type b) {
   convert(&a, &b);
   num_a = a;
   num_b = b;
}
template <class type> Addition::convert(type *a, type *b) {
   int temp_a = a, temp_b = b;
   a = char[256], b = char[256];
   // converting
} 
```

这可以吗，还是我做错了什么？
你对我在 C++ 中实现类的方式有什么建议吗？

为什么我不能用值初始化属性，例如：

```
template <class type> class Addition {
   type outcome = 0;
} 
```

如果不需要在 c++ 中使用这个关键字，我该怎么做这样的事情？：

```
template <class type> Addition::Foo(type a, type b) {
   this->a = a; // a = a;
   this->b = b; // b = b;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:12:56.013

**免责声明**：我无法判断您是否真的需要模板来完成您的工作。这取决于您希望 Adddition 类模板使用的不同类型的数量。如果您只将它用于`int`，那么这可能会引入不必要的复杂性。您总是可以稍后重构（这将是敏捷方法）。

话虽如此，如果要使用模板，通常的约定是`T`为模板参数编写，并为类模板`type`中的嵌套使用。`typedef`使用`typename`or`class`是个人喜好问题，但`typename`强调内置类型也可以作为参数传递。但是请注意，使用**模板模板参数**，您需要编写

```
template<template<typename> class U> SomeClass { /* your definition */ };
                            ^^^^^ // <-- NOT typename here 
```

这强调了只有**类模板**可以作为参数传递的事实。

还有一些其他的挑剔可能会提到您的代码会导致编译失败（`convert()`在类定义中缺少返回类型和缺少分号）：

```
template <typename T> 
class Addition 
{
   static const std::size_t N = 256; // are you sure that 256 is all you'll ever need?
   T num_a;
   T num_b;
   void convert(T const*, T const*); // by T const*, not T*
public:
   Addition(T const&, T const&); // by T const&, not T
}; // <-- make sure to end class definitions with a semi-colon!

template <typename T> 
Addition::Addition(T const& a, T const& b) 
{
   convert(&a, &b);
   num_a = a;
   num_b = b;
}

template <typename T>
void Addition::convert(T const* a, T const* b) // <-- use T const* if you don't modify the parameters
^^^^ // <-- you forgot the return type
{
   int temp_a = a, temp_b = b;
   a = char[N], b = char[N]; <-- hardcoded 256 is bad practice, better to keep that in 1 place only
   // converting
} 
```

在 C++11 中，您甚至可以使用**委托构造函数**（由最新的 Visual C++ 和当然 gcc/Clang 支持）并编写

```
template <typename T> 
Addition::Addition(T const& a, T const& b) 
:
    Addition(&a, &b) // delegate to the other constructor
{}

template <typename T>
Addition::Addition(T const* a, T const* b) // <-- use T const* if you don't modify the parameters
{
   int temp_a = a, temp_b = b;
   a = char[N], b = char[N]; <-- hardcoded 256 is bad practice, better to keep that in 1 place only
   // converting
} 
```

最后，因为模板定义无论如何都必须在标题中，你甚至可以像这样在类定义中编写所有内容：

```
template <typename T> 
class Addition 
{
   static const std::size_t N = 256; // are you sure that 256 is all you'll ever need?
   T num_a;
   T num_b;

   Addition(T const*, T const*) // by T const*, not T*
   {
      int temp_a = a, temp_b = b;
      a = char[N], b = char[N]; 
      // converting
   }
public:
   Addition(T const&, T const&) // by T const&, not T
   :
       Addition(&a, &b) // delegate to the other constructor
   {} 
}; // <-- make sure to end class definitions with a semi-colon! 
```

这使您不必繁琐地编写所有成员函数的声明和定义。对于短而甜的类（无论如何你都应该努力），这是编写模板的首选方式，但对于非常长的定义，你可能希望将声明和定义分开。

最后，正如@tacp 所解释的，您确实需要使用`this->a`来消除类数据成员与函数参数的歧义。出于这个原因，人们经常使用尾随下划线或`m_`前缀编写数据成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:28:28.207

对于你后面的问题：

```
template <class type> class Addition {
  //type outcome = 0; 
  //^^^^you have to call default constructor of type
  type outcome = type();
} 
```

最好`typename`用于约定，使用`class`也可以。

```
template <class type> Addition::Foo(type a, type b) {
   this->a = a; // a = a;
   this->b = b; // b = b;
} 
```

如果传递的参数和成员同名，则需要使用`this`. 你不能做

```
a =a;
b =b; 
```

因为`a,b`在本地范围内，但`this->a`意味着类成员`a`。

由于您总是想将整数转换为 char 数组，我认为您并不需要模板。除非您将来还想将 double、float 和其他类型转换为`char*`。我还没有查看所有问题，因此可能还有其他问题。

# ssis - 试图在系统文件任务 ssis 包中读取或写入受保护的内存错误

> ID：15988224
> 
> 赞同：0
> 
> 时间：2013-04-13T13:18:02.587
> 
> 标签：ssis

嗨，我正在开发一个 ssis 包，该包将 excel 文件 (.xlsx) 从 ftp 服务器导入到本地文件夹，然后将它们导入到 sql server 表中。我正在使用 foreach 映射到文件名。直到这里都认为工作正常。我添加了一个系统文件任务，从本地目录移动（或删除）文件。这个任务失败了，我有这个错误：

**试图读取或写入受保护的内存。这通常表明其他内存已损坏**t

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-02T00:40:40.653

.net 运行时的修补程序似乎是[https://support.microsoft.com/en-us/kb/923028](https://support.microsoft.com/en-us/kb/923028)将解决问题

# php - 围棋中的 PHP。快速CGI？

> ID：15988225
> 
> 赞同：4
> 
> 时间：2013-04-13T13:18:11.067
> 
> 标签：php, go, fastcgi

我正在用 Go 编写网络服务器，它将取代现有的网站。我仍然需要一些旧的 PHP 脚本。现在我有 lighttpd + fastcgi。所以我希望我的 Web 服务器将 PHP 称为 FastCGI。

处理它的最佳方法是什么？我想我需要一些 Go FastCGI API

[http://golang.org/pkg/net/http/fcgi/](http://golang.org/pkg/net/http/fcgi/) - 似乎只支持服务器端而不是客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:58:52.473

如果您想直接连接到 fastcgi 进程，我认为您必须自己制作。请记住，无论如何您仍然必须运行进程管理器/生成器，因此仅运行 nginx 并让您的 Go 进程代理在那里用于 PHP 脚本并不是一个巨大的飞跃。

您还可以合理地将其转过来，让最终用户在端口 80 上连接到 nginx，并根据需要向您的 Go 进程或 fastcgi 发出 nginx 代理请求。这样做的一个好处是，Go 进程可以轻松地以不同于 root 的用户身份运行。

# ios - 使用 XIB 将工具栏添加到 UIView

> ID：15988228
> 
> 赞同：0
> 
> 时间：2013-04-13T13:18:25.843
> 
> 标签：ios

我正在为 iPad 做一个基于标签栏的应用程序的简单示例。我有一个负责标签管理的控制器：

```
@interface MainTabBarController : UITabBarController 
```

和一些视图控制器传递给 MainTabBarController 如下：

```
@interface WorkspaceViewController : UIViewController 
```

//

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    self.tabBarRootController = [[MainTabBarController alloc] initWithNibName:@"MainTabBarController" bundle:nil];
    UIViewController *workspaceController = [[[WorkspaceViewController alloc] initWithNibName:@"WorkspaceViewController" bundle:nil] autorelease];

    self.tabBarRootController.viewControllers = [NSArray arrayWithObjects:workspaceController, nil];
    self.window.rootViewController = self.tabBarRootController;
    [self.window makeKeyAndVisible];

    [workspaceController release];
    return YES;
} 
```

WorkspaceViewController 有它自己的 xib 文件。使用这个 XIB 文件，我向工作区视图添加了一些控件，一切都很好。但是当我想添加（拖放到 xib 文件中）一个工具栏时，它不会在应用程序运行时出现。

这就是我的 WorkspaceViewController XIB 文件的样子：

![XIB 文件](https://i.stack.imgur.com/mSIbm.png)

工具栏通过插座（使用 xib）与控制器连接。

您能说出可能是什么原因以及如何解决吗？我的工具栏必须仅在工作区视图可见时才可见，并且它应该只与工作区交互（工作区将负责一些绘图内容，工具栏将具有剪切、粘贴、复制等选项）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:38:24.530

调用后，您将再次释放 workspaceController `autorelease`。

# mongodb - 来自多个客户端的 MongoDB findAndModify

> ID：15988230
> 
> 赞同：4
> 
> 时间：2013-04-13T13:18:42.577
> 
> 标签：mongodb

我的 MongoDB 集合用作作业队列，并且有 3 台 C++ 机器从该集合中读取。问题是这三个人不能完成同样的工作。所有工作只需要完成一次。

我通过使用“isDone:False”在集合中搜索所有记录来获取所有未完成的作业，然后更新此文档“isDone:True”。但是如果两台机器同时找到同一个文件，它们就会同时做同一个工作。我怎样才能避免这种情况？

编辑：我的问题是 - findAndModify 真的解决了这个问题吗？（看完[MongoDb的findAndModify中确保独占读取的一种方式？](https://stackoverflow.com/questions/15505176/a-way-to-ensure-exclusive-reads-in-mongodbs-findandmodify)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:40:26.660

是的，查找并修改将解决您的问题：

db.collection.findAndModify( { query: { isDone: false }, update: { $set: { isDone: true } }, new: true, upsert: false # 从不创建新文档 } );

这将返回一个刚刚从 false 更新为 true 的文档。

但是，如果您的 C++ 客户端出现故障（盒子死机、它们被杀死、代码有错误等），您就会遇到一个严重的问题。想象一下，如果您的 TCP 连接在服务器更新之后但在 C++ 之前断开代码得到了这份工作。通常最好采用多阶段方法：

*   将“isDone”更改为“isInProgress”，完成后，删除文档。（现在，你可以看到“待办事项”和“正在完成”的堆栈。如果某件事“正在完成”很长时间，客户端可能已经死了。

*   将“isDone”更改为“phase”并将其从“new”自动设置为“started”（稍后将其设置为“finished”）。现在你可以看到如果某件事“启动”了很长时间，客户端可能已经死了。

如果你真的很老练，你可以做一个部分索引。例如，“仅索引具有“phase:{ $ne: 'finished'}”的文档。现在您无需浪费空间来索引数百万个已完成的文档。索引仅包含少数新的/正在进行的文档，所以它更小/更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T02:09:54.243

是的，findAndModify 解决了。

参考：[MongoDB findAndModify from multiple clients](https://stackoverflow.com/questions/15988230/mongodb-findandmodify-from-multiple-clients) "... 注意：此命令在受影响的数据库上获得写锁，并将阻塞其他操作，直到它完成；然而，通常写锁是短暂的，相当于其他类似的 update()操作……”

参考：[http](http://docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update) : //docs.mongodb.org/manual/reference/method/db.collection.update/#db.collection.update “...对于非分片集合，您可以使用 $isolated 隔离运算符覆盖此行为，它将更新操作隔离并在更新期间阻止其他写入操作。请参阅隔离运算符。..."

参考：[http ://docs.mongodb.org/manual/reference/operator/isolated/](http://docs.mongodb.org/manual/reference/operator/isolated/)

问候， 莫西

# list - 打印链表的第二个三分之一

> ID：15988231
> 
> 赞同：0
> 
> 时间：2013-04-13T13:18:56.317
> 
> 标签：list, linked-list, complexity-theory, pseudocode

**有 n 个节点的列表。**

**我必须编写一个伪代码，使用 3 个指针打印列表第二个三分之一的节点。复杂性是什么？**

如果我可以通过柜台使用，这很容易，但这是被禁止的。

我想把前三个节点的三个指针放上去，然后拿到第三个指针旁边。如果它不是结束节点，请在第二个节点旁边。但我的伪代码太长太复杂。

**另一个问题：我怎样才能通过使用两个指针来做到这一点？**

例如：列表：1->2->3->4->5->6->7->8->9 灵魂打印元素：4,5,6。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:02:45.960

使用 2 个指针很容易：将指针 1 放在第 1 个位置，将指针 2 放在第 3 个位置

并做：

```
while pointer2 not null{
print pointer1
pointer1.next
print pointer1
pointer1.next
pointer2.next 3 times if pointer2 is not null
} 
```

例如，列表是 1, 2, 3, 4, 5, 6

```
pointer1=1
pointer2=3

pointer2/=null then
print pointer1 (1)
pointer1.next
print pointer1 (2)
pointer1.next
pointer2=pointer2.next 3 times then pointer2=6 
```

再次

```
pointer2/null then
print pointer1 (3)
pointer1.next
print pointer1 (4)
pointer1.next
pointer2.next is null, then the program will terminate here 
```

你得到的列表是 1,2,3,4，它是 6 元素列表的 2/3

任何疑问都在这里回答:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:52:25.710

*   将所有指针设置为列表的头部。
*   虽然指针 3 不为空且其下一个不为空，但将指针 1 提前 1 个节点，将指针 2 提前 2 个节点，将指针 3 提前 3 个节点（当然，如果你到达终点，则停止）。
*   一旦 pointer3 到达列表的末尾，每个指针将是列表的 1/3，您可以打印它们之间的所有节点。

两个指针只是一个变体，但你写问题的方式有点模糊

> 列表的第二个三分之一的节点（2/3）

对我来说，“第二个三分之一”是指列表的中间三分之一，但你写了 2/3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T15:37:17.227

最后是两指针解，无计数器，无双链表

```
set the pointer1 in the 1st position
set the pointer2 in the 3rd position

while pointer2/=null{
pointer1.next
pointer2.next 3 times if pointer2=/null
}

//at this point we have the pointer1 in the first middle third element
//we only have to do the process again, but printing the elements
//we have to set the pointer2 to the third element, to start again

set the pointer2 in the 3rd position

while pointer2/=null{
pointer1.print
pointer1.next
pointer2.next 3 times if pointer2/=null
} 
```

在第一次迭代中，我们将指针 1 放在中间三分之一的第一个元素中，在第二次迭代中，我们打印所有需要的元素，诀窍是指针 2 第一次到达末尾时重置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T14:31:55.090

我找到了其他带有两个指针的解决方案，但链表必须是双链表（带有下一个和上一个）

```
set pointer 1 to the first element
set pointer 2 to the third element
while pointer 2/=null {
pointer1.next
pointer2.next 3 times if pointer2.next/=null
}
//in this part we have pointer1 in the first middle third element
while pointer1/=pointer2{
pointer1.next
pointer1.print
pointer2.prev
} 
```

再次以 1,2,3,4,5,6 为例

```
pointer1=1
pointer2=3

pointer2.next/=null then
pointer1.next (pointer1=2)
pointer2.next 3 times, (pointer2=6)

pointer2.next=null then we enter in the second loop
pointer1.next  (pointer1=3)
pointer1.print (3)
pointer2.prev (pointer2=5)

pointer1/=pointer2 then
pointer1.next (pointer1=4)
pointer1.print(4)
pointer2.prev (pointer2=4)

pointer1==pointer2, end of program 
```

我们在控制台输出中有 3,4

# angularjs - 如何指定受信任的服务器以在 Angular $http 中发送 XSFR 令牌？

> ID：15988234
> 
> 赞同：3
> 
> 时间：2013-04-13T13:19:13.787
> 
> 标签：angularjs

我需要一种干净的方法来指定标头数据，例如 $http 中的 XSFR 令牌和授权内容。

像这样的东西：

```
$http.defaults.headers.common["Auth_token"] = token; 
```

但是随后所有请求，以及对其他域的请求都填充有此标头。然后，这个修复来了，确保只有同一个域接收到这个标头。 [https://github.com/angular/angular.js/issues/1096](https://github.com/angular/angular.js/issues/1096)

现在我的问题是我的服务器位于另一个域（api.example.com）上，只有这个或其他列入白名单的服务器应该获得特定的标头。

我希望能够指定某些标头所针对的域。

```
$http.defaults.headers.['api.trusted.com']['Auth_token'] = token; 
```

或类似的。有没有其他人解决过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:22:48.817

在最新版本的 AngularJS 中，您可以使用新引入的请求拦截器来实现所需的结果。

# ios - iOS CoreData：链接器错误即使将其添加到目标的构建阶段

> ID：15988237
> 
> 赞同：0
> 
> 时间：2013-04-13T13:19:48.490
> 
> 标签：ios, core-data, cs193p

我正在关注 iTunes 上的 CS193p 教程，但在核心数据课程中遇到了问题。我已经完成了与演示中完全相同的所有操作（但是对于与课程中略有不同的应用程序），并且还在我的项目的构建阶段包含了 CoreData 框架。但是它仍然会引发此错误：

> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_CoreDataTableViewController”，引用自：_OBJC_CLASS_$_BudgetTableViewController in BudgetTableViewController.o
> “_OBJC_METACLASS_$_CoreDataTableViewController”，引用自：_OBJC_METACLASS_$_BudgetTableViewController in BudgetTableViewController.o ld：符号未找到架构 i386 clang ：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

知道为什么吗？在我的 BudgetTableViewController.h 中，我包含了 CoreDataTableViewController.h。还有CoreDataTableViewController.h 导入所以不知道问题出在哪里？

# c - 如何将文本文件的每一行读入它们自己的单独变量

> ID：15988243
> 
> 赞同：0
> 
> 时间：2013-04-13T13:20:20.727
> 
> 标签：c, variables

大家好，我在第二个周末试图找到解决这个问题的方法。我是 c 编程的新手，我一直在尝试读取文本文件的每一行并将它们传递给它们自己的变量，在那里我将能够操作它们（例如比较它们、进行计算等）。

我有一个代码来读取每一行，但我不确定如何将每一行传递给一个变量，这里是代码：

```
#include <stdlib.h>
#include <stdio.h>

struct line_reader {
FILE    *f;
char    *buf;
size_t   siz;
};

void
lr_init(struct line_reader *lr, FILE *f)
{
lr->f = f;
lr->buf = NULL;
lr->siz = 0;
}

char *
next_line(struct line_reader *lr, size_t *len)
{
size_t newsiz;
int c;
char *newbuf;

*len = 0;
for (;;) {
    c = fgetc(lr->f);
    if (ferror(lr->f))
        return NULL;

    if (c == EOF) {

        if (*len == 0)
            return NULL;
        else
            return lr->buf;
    } else {

        if (*len == lr->siz) {

            newsiz = lr->siz + 4096;
            newbuf = realloc(lr->buf, newsiz);
            if (newbuf == NULL)
                return NULL;
            lr->buf = newbuf;
            lr->siz = newsiz;
        }
        lr->buf[(*len)++] = c;

        if (c == '\n')
            return lr->buf;
         }
         }
         }

void
lr_free(struct line_reader *lr)
{
free(lr->buf);
lr->buf = NULL;
lr->siz = 0; 
```

}

```
int
main()
{
struct line_reader lr;
FILE *f;
size_t len;
char *line;

f = fopen("file.txt", "r");
if (f == NULL) {
    perror("foobar.txt");
    exit(1);
}

lr_init(&lr, f);
while (line = next_line(&lr, &len)) {

    fputs("1: ", stdout);
    fwrite(line, len, 1, stdout);
}
if (!feof(f)) {
    perror("next_line");
    exit(1);
}
lr_free(&lr);

return 0; 
```

}

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:06:33.177

简单地使用数组作为建议怎么样？

例如）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char** readFile(const char *filename, size_t *lineCount){
    FILE *fp;
    char buff[4096];
    size_t lines = 0, capacity=1024;
    char **line;

    if(NULL==(fp=fopen(filename, "r"))){
        perror("file can't open.");
        return NULL;
    }
    if(NULL==(line=(char**)malloc(sizeof(char*)*capacity))){
        perror("can't memory allocate.");
        fclose(fp);
        return NULL;
    }
    while(NULL!=fgets(buff, sizeof(buff), fp)){
        line[lines++] = strdup(buff);
        if(lines == capacity){
            capacity += 32;
            if(NULL==(line=(char**)realloc(line, sizeof(char*)*capacity))){
                perror("can't memory allocate.");
                fclose(fp);
                return NULL;
            }
        }
    }
    *lineCount = lines;
    fclose(fp);

    return (char**)realloc(line, sizeof(char*)*lines);
}
void freeMem(char** p, size_t size){
    size_t i;

    if(p==NULL) return;

    for(i=0;i<size;++i)
        free(p[i]);
    free(p);
}

int main(){
    size_t lines;
    char **line;

    if(NULL!=(line=readFile("file.txt", &lines))){//lines: set line count of file
        printf("%s", line[25]);// 26th line of file, zero origin
    }
    freeMem(line, lines);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:44:49.470

在任何符合 POSIX 的系统上，只需使用`m`scan 修饰符：

```
for ( char *line, nl; scanf("%m[^\n]%c",&line,&nl) != EOF ; free(line) ) {
    if ( !line )
        strcpy(line=malloc(1),""), getchar();
    // ...
} 
```

`m`已经符合标准五年了。

# c++ - ac/c++ 指针的内存地址在哪里？

> ID：15988244
> 
> 赞同：1
> 
> 时间：2013-04-13T13:20:26.910
> 
> 标签：c++, c, operating-system

如果我执行以下操作：

```
int i, *p = &i;
int **p2p = &p; 
```

我得到 i 的地址（在堆栈上）并将其传递给 p，然后我得到 p 的地址（在堆栈上）并将其传递给 p2p。

我的问题是，我们知道 的值`i`保存在内存地址中`p`等等，但是操作系统如何知道该地址在哪里？我想他们的地址被组织在堆栈中。每个声明的变量（标识符）是否被视为与堆栈当前位置的偏移量？全局变量呢，操作系统和/或编译器如何在执行期间处理这些变量？操作系统和编译器如何在不使用内存的情况下“记住”每个标识符的地址？是否所有变量都按顺序输入（推送）到堆栈中，并且它们的名称被替换为它们的偏移量？如果是这样，可以改变声明顺序的条件代码呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:31:35.003

我曾经是一名汇编语言程序员，所以我知道我曾经使用过的 CPU 的答案。要点是 CPU 的寄存器之一被用作堆栈指针，称为 SP（或`esp`现在在 x86 CPU 上）。编译器引用相对于 SP 的变量（在您的情况下为 i、p 和 p2p）。换句话说，编译器决定每个变量的偏移量应该是SP，并相应地生成机器代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:16:26.463

从概念上讲，数据可以存储在 4 个不同的内存区域中，具体取决于其*范围*以及它是*常量*还是*变量*。我说“概念上”是因为内存分配非常依赖于平台，为了尽可能提高现代架构所能提供的效率，策略可能会变得非常复杂。

同样重要的是要意识到，除了少数例外，操作系统不知道也不关心变量驻留在哪里。CPU会。它是 CPU 处理程序中的每个操作、计算地址以及读写内存。事实上，操作系统本身只是一个程序，它有自己的变量，由 CPU 执行。

通常，*编译器*决定为每个变量分配哪种*类型*的内存（*例如堆栈、堆、寄存器）。*如果它选择一个寄存器，它也决定分配*哪个寄存器。*如果它选择另一种类型的内存，它会计算变量从那部分内存开始的*偏移量。*它创建一个“对象”文件，该文件仍然引用这些变量作为从其部分开始的偏移量。

然后*链接器*读取每个目标文件，将它们的变量组合和排序到适当的部分，然后“修复”偏移量。（这是技术术语。真的。）

### 常数数据

**它是什么？**
由于这些数据永远不会改变，它通常与程序本身一起存储在只读内存区域中。在嵌入式系统中，例如微波炉，这可能在（传统上便宜的）ROM 中，而不是（更昂贵的）RAM 中。在 PC 上，它是一段被操作系统指定为仅就绪的 RAM 段，因此尝试写入它会导致分段错误并在程序“非法”更改不应更改的内容之前停止程序。

**它是如何访问的？**
编译器通常引用常量数据作为从常量数据段开始的偏移量。链接器知道段实际所在的位置，因此它修复了段的起始地址。

### 全局和静态数据

**它是什么？**
这些数据必须在运行程序的整个生命周期内都可用，因此它必须驻留在已分配给程序的内存“堆”上。由于数据可以更改，因此堆不能像常量数据那样驻留在只读内存中；它*必须*驻留在可写 RAM 中。

**它是如何访问的？**
CPU 以与常量数据相同的方式访问全局和静态数据：它被引用为从堆开始的偏移量，堆的起始地址由链接器固定。

### 本地数据

**它是什么？** 这些是仅在封闭函数处于活动状态时才存在的变量。它们驻留在动态分配的 RAM 中，然后在函数退出时立即返回给系统。从概念上讲，它们是从随着函数被调用和创建变量而增长的“堆栈”分配的；它随着每个函数的返回而缩小。堆栈还保存每个函数调用的“返回地址”：CPU 记录其在程序中的当前位置，并在调用函数之前将该地址“推入”堆栈；然后，当函数返回时，它会从堆栈中“弹出”地址，以便它可以从函数调用之前的任何位置恢复。但同样，实际的实现取决于架构；重要的是要记住函数的本地数据变得无效，

**它是如何访问的？**
本地数据通过其从堆栈开头的偏移量访问。编译器在进入函数时知道下一个可用的堆栈地址，并且忽略一些深奥的情况，它还知道局部变量需要多少内存，因此它移动“堆栈指针”以跳过该内存。然后它通过计算堆栈中的地址来引用每个局部变量。

### 寄存器

**这些是什么？** 寄存器是 CPU 内部的一小块内存区域。所有计算都发生在寄存器内，寄存器操作非常快。CPU 包含的寄存器数量相对较少，因此它们是有限的资源。

**它们是如何访问的？** CPU 可以直接访问寄存器，这使得寄存器操作非常快速。编译器可能会选择将寄存器分配给变量作为优化，因此它在获取数据或将数据写入 RAM 时无需等待。通常，只有本地数据分配给寄存器。例如，循环计数器可能驻留在寄存器中，而堆栈指针本身就是一个寄存器。

> **您的问题的答案：** 当您在堆栈上声明一个变量时，编译器会计算它的大小并为其分配内存，从堆栈上的下一个可用位置开始。让我们看一下您的示例，做出以下假设：
> 
> 1\. 调用函数时`SP`，堆栈中的下一个可用地址是向下增长的。
> 2\. `sizeof(int)`= 2（只是为了使它与指针的大小不同）。
> 3\. `sizeof(int *)`= `sizeof(int **)`= 4（即所有指针大小相同）。
> 然后：
> 
> ```
>     整数 i, *p = &i;
>     int **p2p = &p;
> ```
> 
> 您声明了 3 个变量：
> 
> `i`: Addr = `SP`, size = `2`, contents = : Addr = , size = , contents = *(address of* *)* : Addr = , size = , contents = *(address of* *)**`uninitialized`*
> `p``SP-2``4``SP` *`i`*
> `p2p``SP-6``4``SP-2` *`p`*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T13:33:11.667

操作系统不关心您的程序使用的地址。每当发出需要使用地址空间内的缓冲区的系统调用时，您的程序都会提供缓冲区的地址。

您的编译器为您的每个函数提供一个堆栈框架。

```
push ebp
mov ebp,esp 
```

然后，任何函数参数或局部变量都可以相对于 EBP 寄存器的值进行寻址，该值是该堆栈帧的基地址。这由编译器通过特定于您的编译器的参考表来处理。

退出函数后，编译器会拆除堆栈帧：

```
mov esp,ebp
pop ebp 
```

在低级别，CPU 仅适用于文字 BYTE/WORD/DWORD/etc 值和地址（它们相同，但使用方式不同）。

所需的内存地址要么存储在命名缓冲区（例如全局变量）中，编译器在编译时用其已知地址替换它，要么存储在 CPU 的寄存器中（非常简化，但仍然正确）

进入操作系统开发，如果您愿意，我很乐意更深入地解释我所知道的任何事情，但这肯定超出了 SOF 的范围，所以如果您有兴趣，我们需要寻找另一个渠道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T13:34:45.860

> i 的值保存在内存地址 p 中等等，但是操作系统如何知道该地址在哪里？

操作系统不知道也不关心变量在哪里。

> 我想 [variables'] 地址被组织在堆栈中。

堆栈不组织变量的地址。它只是包含/保存变量的值。

> 每个声明的变量（标识符）是否被视为与堆栈当前位置的偏移量？

这可能确实适用于某些局部变量。但是，优化可以将变量移动到 CPU 寄存器中，也可以完全消除它们。

> 全局变量呢，操作系统和/或编译器如何在执行期间处理这些变量？

当程序已经编译时，编译器不处理变量。它已经完成了它的工作。

> 操作系统和编译器如何在不使用内存的情况下“记住”每个标识符的地址？

操作系统不记得任何这些。它甚至对你程序的变量一无所知。对于操作系统来说，你的程序只是一些无定形的代码和数据的集合。变量的名称是无意义的，并且在编译程序中很少可用。只有程序员和编译器才需要它们。CPU 和操作系统都不需要它们。

> 是否所有变量都按顺序输入（推送）到堆栈中，并且它们的名称被替换为它们的偏移量？

这将是局部变量的合理简化模型。

> 如果是这样，可以改变声明顺序的条件代码呢？

这就是编译器必须处理的问题。程序编译完成后，一切都已处理完毕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T13:41:53.173

正如@Stochasticly 解释的那样：

> 编译器引用相对于 SP 的变量（在您的情况下为 i、p 和 p2p）。换句话说，编译器决定每个变量的偏移量应该是SP，并相应地生成机器代码。

也许这个例子还向你解释了它。它在 amd64 上，因此指针大小为 8 个字节。如您所见，没有变量，只有寄存器的偏移量。

```
#include <cstdlib>
#include <stdio.h>
using namespace std;

/*
 * 
 */
int main(int argc, char** argv) {

    int i, *p = &i;
    int **p2p = &p;
    printf("address 0f i: %p",p);//0x7fff4d24ae8c
    return 0;
} 
```

拆卸：

```
!int main(int argc, char** argv) {
main(int, char**)+0: push   %rbp
main(int, char**)+1: mov    %rsp,%rbp
main(int, char**)+4: sub    $0x30,%rsp
main(int, char**)+8: mov    %edi,-0x24(%rbp)
main(int, char**)+11: mov    %rsi,-0x30(%rbp)
!
!    int i, *p = &i;
main(int, char**)+15: lea    -0x4(%rbp),%rax
main(int, char**)+19: mov    %rax,-0x10(%rbp)  //8(pointer)+4(int)=12=0x10-0x4
!    int **p2p = &p;
main(int, char**)+23: lea    -0x10(%rbp),%rax
main(int, char**)+27: mov    %rax,-0x18(%rbp) //8(pointer)
!    printf("address 0f i: %p",p);//0x7fff4d24ae8c
main(int, char**)+31: mov    -0x10(%rbp),%rax //this is pointer
main(int, char**)+35: mov    %rax,%rsi //get address of variable, value would be %esi
main(int, char**)+38: mov    $0x4006fc,%edi
main(int, char**)+43: mov    $0x0,%eax
main(int, char**)+48: callq  0x4004c0 <printf@plt>
!    return 0;
main(int, char**)+53: mov    $0x0,%eax
!}
main(int, char**)()
main(int, char**)+58: leaveq 
main(int, char**)+59: retq 
```

# python - python：调整导入的坐标

> ID：15988247
> 
> 赞同：1
> 
> 时间：2013-04-13T13:20:29.867
> 
> 标签：python, coordinates

我有一个 python 脚本，我从两个单独的文本文件中导入三角形元素的坐标和元素定义。我首先为每个三角形元素定义唯一节点，然后在三角形元素之间定义一个新的矩形元素（此 python 脚本为 FEM 计算编写输入文件）。

坐标文件如下所示：

```
id,x,y,
  1,  0,   0
  2,  0,   1
  3,  0,   2
  4,  1,   0
  5,  1,   1
  6,  1,   2
  7,  2,   0
  8,  2,   1
  9,  2,   2 
```

元素文件如下所示：

```
id, n1, n2, n3
 1, 1, 2, 4
 2, 1, 2, 5
 3, 2, 3, 5
 4, 3, 5, 6
 5, 5, 6, 8
 6, 6, 8, 9
 7, 5, 7, 8
 8, 4, 5, 7 
```

我想要发生的是三角形元素的节点的坐标被移动到三角形元素的质心，这样三角形元素之间的矩形元素将获得一个实际的厚度。

![在此处输入图像描述](https://i.stack.imgur.com/hFQaR.png)

但是我在我的 python 脚本中做错了（见下文）。脚本中水平线之间的部分应该改变坐标。但是对于我的脚本，添加了额外的坐标，而不是（对于此处的示例）9 个初始坐标。并且坐标也没有朝正确的方向移动。

为什么会发生这种情况，我该如何解决？

```
#!/usr/bin/env python

# Inlezen coordinaten
open("D://Documents//SkyDrive//afstuderen//99 EEM - Abaqus 6.11.2//scripting//_COORDINATEN.txt", "r")
import csv
import itertools

with open("_COORDINATEN.txt") as file:
    data = csv.reader(file)
    next(data)
    coords = []
    coords = ([[float(x) for x in line[1:]] for line in data])

#inlezen elementen
open("D://Documents//SkyDrive//afstuderen//99 EEM - Abaqus 6.11.2//scripting//_ELEMENTEN.txt", "r")
import csv
import itertools

with open("_ELEMENTEN.txt") as file:
    data2 = csv.reader(file)
    next(data2)
    elems = []
    elems = ([[int(x)-1 for x in line[1:]] for line in data2])

#Flip the original elements if required
for i,elem in enumerate(elems):
    ecoords = [coords[e] for e in elem]

    a = [x2-x1 for x1,x2 in zip(ecoords[0],ecoords[1])]
    b = [x2-x1 for x1,x2 in zip(ecoords[1],ecoords[2])]

    n = a[0]*b[1]-a[1]*b[0]

    if n < 0:
        elems[i] = [ elem[0], elem[2], elem[1] ]

#bewerking elementen
newcoords = []
newelems  = []
for elem in elems:
    ecoords = [coords[e] for e in elem]
    newelem = range( len(newcoords), len(newcoords)+len(ecoords) )

    newcoords += ecoords
    newelems.append( newelem )

cohelems = []
for e,elem in enumerate(elems):
  for edge in [[0,1],[1,2],[2,0]]:

    eedge = [elem[i] for i in edge]

    for e2,elem2 in enumerate(elems[e+1:]):

      e2 += e+1

      for edge2 in [[0,1],[1,2],[2,0]]:

        eedge2 = [elem2[i] for i in edge2]

        if all([i in eedge2 for i in eedge]):

          newedge  = [newelems[e][i] for i in edge ]
          newedge += [newelems[e2][i] for i in edge2]

          cohelems.append( newedge[-1::-1] )
#---------------------------------------------------------------------
def add_vectors(*points):
  new_x = 0.0
  new_y = 0.0
  for point in points:
    new_x += point[0]
    new_y += point[1]
  return [new_x, new_y]

def subtract_vectors(a, b):
  new_x = a[0] - b[0]
  new_y = a[1] - b[1]
  return [new_x, new_y]

def mul_by_scalar(vector, scalar):
  new_x = vector[0] * scalar
  new_y = vector[1] * scalar
  return [new_x, new_y]

new_triangles = []
for elem in elems:
    new_triangles += [coords[e] for e in elem]

print 'new_triangles =', new_triangles

CM = mul_by_scalar(add_vectors(*new_triangles), 1.0/3)

point_to_CM_vectors = []
for point in new_triangles:
  point_to_CM_vectors.append(subtract_vectors(CM, point))

new_triangle2 = []
#for e,elem in enumerate(elems):
for elem in elems:
    for point, motion in zip(new_triangles, point_to_CM_vectors):
      new_triangle2.append(add_vectors(point, mul_by_scalar(motion, 0.01)))
#      new_triangle2 += [add_vectors(point, mul_by_scalar(motion, 0.01))]

print 'new_triangle2 =', new_triangle2
#--------------------------------------------------------------------- 
```

提前感谢大家的帮助！

# java - Java 构造函数奇怪的行为

> ID：15988252
> 
> 赞同：2
> 
> 时间：2013-04-13T13:20:56.587
> 
> 标签：java, constructor, chaining

我已经运行了这段代码

```
public class Redimix extends Concrete{

    Redimix(){
        System.out.println("r ");
    }

    public static void main(String[] args) {
        new Redimix();
    }

}

class Concrete extends Sand{
    Concrete() { System.out.print("c "); }
    private Concrete(String s) { }
}

abstract class Sand{
    Sand(){
        System.out.print("s ");
    }
} 
```

它打印出来了，`s c r`但我所期待的是，只有`r`我的问题是对此的逻辑解释是什么？

如果父基类是具有构造函数的抽象类，然后我们创建另一个类，然后将其扩展为基类（在我们的案例中`Concrete`扩展 Sand），然后我们创建另一个类，然后将其扩展为具体的类名（在我们的case redimix）会调用层次结构中的所有构造函数吗？（从上到下）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T13:23:33.560

超类的构造函数*总是*作为构造函数的第一个动作被调用。

如果您没有显式调用超类的构造函数，则会隐式调用*默认*构造函数（“无参数”构造函数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T13:26:57.557

那是对的。父对象的构造函数总是在子对象之前调用。这确保了对象处于有效状态，并且扩展了另一个类的对象始终可以知道对象处于什么状态。

这是您在编译器在您的行为中插入隐式构造函数调用后提供的代码。注意 super(); 总是首先被调用。

```
public class Redimix extends Concrete{

    Redimix(){
        super();
        System.out.println("r ");
    }

    public static void main(String[] args) {
        new Redimix();
    }

}

class Concrete extends Sand{
    Concrete() { super(); System.out.print("c "); }
    private Concrete(String s) { }
}

abstract class Sand{
    Sand(){
        super();  // invoking the constructor for java.lang.Object
        System.out.print("s ");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:24:02.413

在每个构造函数中，也会调用父构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T13:24:52.753

在每个构造函数中，第一个语句总是`super()`调用超类构造函数，除了`Object`类

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T13:25:56.060

为此，您需要了解[构造函数链接](http://javarevisited.blogspot.in/2012/12/constructor-chaining-in-java-calling-another-constructor.html)。当您调用任何构造**函数时，首先调用所有超类构造函数**。在您的构造函数定义中，如果您没有一个**编译器，则会向超类构造函数添加一个无参数调用，**如下所示：`super();`

这是因为，**层次结构中的所有类都必须在实际类之前构建**，因为您的类依赖于它的超类。

此类到超类构造函数应该始终是构造函数定义中的第一条语句，因为它们必须在此相关类之前构建。所以**Object 类的构造函数总是最先被执行。**

# jquery - 一个完全透明的覆盖层，中间有一个白色的空白框

> ID：15988254
> 
> 赞同：-2
> 
> 时间：2013-04-13T13:21:09.257
> 
> 标签：jquery, colorbox

我也包括`jquery`核心和`colorbox`脚本并链接`colorbox`样式表，但是当我单击应该由颜色框显示的图像时，我得到一个完全透明的覆盖，中间有一个白色空白框，而不是单击的图像。

有什么我错过的吗？

```
<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

<meta charset="utf-8"/>
<title></title>

<style>

</style>

<link rel="stylesheet" href="colorbox.css" />

<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/colorbox/jquery.colorbox-min.js"></script>

<script>
    $(function (){
        $("img.cover").colorbox({rel: "books"});
    });//on doc ready
</script>

</head>

<body>

    <img class="cover" src="pic1.jpg" />

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:46:57.473

它应该是这样的：

HTML：

```
<a class="cover" href="http://images5.fanpop.com/image/photos/29500000/-Swag-bieber-instagram-puppy-justin-bieber-29500273-500-500.jpg">
    <img width="250" src="http://images5.fanpop.com/image/photos/29500000/-Swag-bieber-instagram-puppy-justin-bieber-29500273-500-500.jpg" />
</a> 
```

JS：

```
$("a.cover").colorbox({rel: "books"}); 
```

小提琴：http : [//jsfiddle.net/matias/6Y7cJ/1/](http://jsfiddle.net/matias/6Y7cJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:35:25.307

我也错过了将颜色框的`images`文件夹放在我的项目中的目录中。所以没有按钮和覆盖。

# module - 在 Lua 中调用 require()d 模块上的函数让我“尝试索引本地‘x’（布尔值）”

> ID：15988268
> 
> 赞同：3
> 
> 时间：2013-04-13T13:22:44.677
> 
> 标签：module, lua

我已经阅读了关于创建模块的 PIL 和[ModulesTutorial](http://lua-users.org/wiki/ModulesTutorial)，但我无法`require()`正确使用它们。

这是我的设置：

```
-- File ./lib/3rdparty/set.lua
local ipairs = ipairs
module( "set" )
function newSet (t)
  local set = {}
  for _, l in ipairs(t) do set[l] = true end
  return set
end 
```

和：

```
-- File ./snowplow.lua
local set = require( "lib.3rdparty.set" )
module( "snowplow" )
local SUPPORTED_PLATFORMS = set.newSet { "pc", "tv", "mob", "con", "iot" } 
```

然后，如果我运行`snowplow.lua`：

```
lua: snowplow.lua:4: attempt to index local 'set' (a boolean value)
stack traceback:
  snowplow.lua:4: in main chunk
  [C]: ? 
```

我在模块定义中做错了什么 - 布尔值到底是什么？`return _M;`另外，如果我在底部附加 a `set.lua`，那么一切都会开始工作 - 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:39:38.427

`true`通常由`require`if`module`函数在模块内部未使用并且模块代码不返回值返回。
但无论如何，这似乎很奇怪。

```
-- file m0.lua
module'm0'

--file dir1\m1.lua
module'm1'

--file test.lua
print(require'm0')
print(m0)

print(require'dir1.m1')
print(m1)

for k,v in pairs(package.loaded) do
   if k:match'm%d' then print(k, v) end
end

--output
table: 0036C8C8
table: 0036C8C8
true
table: 0036B6B0
m0      table: 0036C8C8
m1      table: 0036B6B0
dir1.m1 true 
```

因此，您可以简单地使用全局变量`set`而不是局部`set`分配由返回的值`require`。

* * *

**UPD：**
建议避免在模块末尾使用`module`函数并始终使用表格。`return`在那种情况下，整个画面就好了：

```
-- file m0.lua
return 'string0'

--file dir1\m1.lua
return 'string1'

--file test.lua
print(require'm0')
print(m0)

print(require'dir1.m1')
print(m1)

for k,v in pairs(package.loaded) do
   if k:match'm%d' then print(k, v) end
end

--output
string0
nil
string1
nil
m0      string0
dir1.m1 string1 
```

* * *

**UPD2：**
如果替换为 ，问题就会`module( "set" )`消失`module('lib.3rdparty.set')`。
所以，**每个模块都必须记住它的相对路径**。
现在您可以通过调用`require'lib.3rdparty.set'`或读取全局变量来访问它`lib.3rdparty.set`——结果是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T18:02:22.963

```
require("lib.moduleName")
local moduleName = moduleName 
```

我不确定为什么当您需要不同目录中的模块时 Lua 返回布尔值，但似乎该模块已正确设置在全局变量上。所以我只是简单地使用它并将它放在同名的局部变量上。

# c++ - 运行时的动态函数调用 (va_list)

> ID：15988277
> 
> 赞同：1
> 
> 时间：2013-04-13T13:23:41.967
> 
> 标签：c++, c, variadic-functions, dynamic-function

C 中有一种方法可以使用 va_list 获取动态长度参数列表，如下所述： [http ://www.cprogramming.com/tutorial/c/lesson17.html](http://www.cprogramming.com/tutorial/c/lesson17.html)

这很简单，但大多数时候在 C++ 中不需要。我目前正在构建一个顶级包装类来封装一些 Zend 功能。

无论如何，我确实需要从普通函数动态调用 printf**这样的动态函数。**

我的意思是上面描述的例子的相反方式，这是我的战争，也许这更好地解释了我的想法：

```
void ZendParams::setRequired( int &Var  )
{
        // save every var pointer to a stack
        // and save the type with it. (if needed, does not seems to be)
        // after call to ZendParams::fetch()
        // the values are stored in the passed variables
        this->_params.push_back( (void*) &Var );
        this->_paramStr.append( 'i' );
}

size_t ZendParams::fetch()
{
        if ( zend_parse_parameters(
                ZEND_NUM_ARGS() TSRMLS_CC, ,
                this->_paramStr.c_str(),
                ...
                ) !== FAILURE)
        {

        }

        return 0;
} 
```

所以我想动态调用 zend_parse_parameters 。

基本思想是在列表中添加指向 vars 的指针，并将它们动态地传递给 zend 函数（作为引用）。

我认为也必须有一种方法可以使用 va_list 来做到这一点。

但是怎么做？

为了更简单，我使用这个例子：

```
list<int> myList;
myList.push_back(1);
myList.push_back(5);
myList.push_back(10);
myList.push_back(37);
myList.push_back(42);

double function avg( int num, ... )
    va_list arguments;                     
    int sum = 0;

    va_start ( arguments, num );           
    for ( int x = 0; x < num; x++ )        
    {
        sum += va_arg ( arguments, int ); 
    }
    va_end ( arguments );

    return sum / num;      
} 
```

我想`avg`用列表中的所有号码拨打电话。我从上面提到的教程中获取了示例函数，但它应该以非常简单的方式显示我的意思。但是，我不能更改调用的函数，因为它是 zend 框架的一部分。

C 或 C++ 中有什么方法可以做到这一点吗？

* * *

我的第二种方法：

```
template <typename... Arguments>
size_t Zend::getMethodParams( string paramStr, Arguments... Args )
{    
        if ( zend_parse_parameters(
                ZEND_NUM_ARGS() TSRMLS_CC, ,
                paramStr.c_str(),
                Args...
                ) == FAILURE)
        {
            return 0;
        }
} 
```

像这样调用（获取定义的 3 个参数）：

```
string My1stParam;
int My2ndParam;
int My3rdParam;

Zend::getMethodParams<string, int, int>( "sii", &My1stParam, &My2ndParam, &My3rdParam ); 
```

我认为这应该可行，但有一个难题： zend_parse_parameters 函数为字符串返回 2 个值（c 样式字符串！）： - 一个字符指针和 - 字符串长度。

所以我要么不得不这样称呼它：

```
char* My1stParam_str;
int My1stParam_length
int My2ndParam;
int My3rdParam;

Zend::getMethodParams<string, int, int>( "sii", &My1stParam_str, &My1stParam_length, &My2ndParam, &My3rdParam );
string My1stParam;
My1stParam.assign(My1stParam_str, My1stParam_length); 
```

无论如何，这就是我想要阻止的。

或者我必须修改传递给 zend_parse_parameters 函数的参数列表以在内部执行这些附加步骤。

我希望至少可以这样称呼它：

```
string My1stParam;
int My2ndParam;
int My3rdParam;

Zend::getMethodParams<string, int, int>( "sii", &My1stParam, &My2ndParam, &My3rdParam ); 
```

**所以说清楚一点：参数在编译时是已知的，但函数调用在后面的源代码中的所有事件中都会有很大的不同。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:22:36.123

我在 zend 框架中找到了解决此问题的方法。我之前确实搜索过这样的解决方案，但它似乎没有很好的记录（nm 已经被提及，没有像 va_list 函数这样的 zend 内部方式）。

但确实有一个！

对于其他所有遇到此问题的人：

```
long arg;
zval ***args;
int i, argc = ZEND_NUM_ARGS( );

if (zend_parse_parameters(1 TSRMLS_CC, "l", &arg) == FAILURE) return;

array_init(return_value);
add_index_long(return_value, 0, arg);

if(argc>1) {
    args = (zval ***)emalloc(argc * sizeof(zval **));
    if(zend_get_parameters_array_ex(argc, args) == FAILURE) {
        efree(args);
        return;
    }
    for(i = 1; i < argc; i++) {
        zval_add_ref(args[i]);
        add_index_zval(return_value,i, *args[i]);
    }
    efree(args);
} 
```

这就是解决方案；）

这个片段可以在[http://docstore.mik.ua/orelly/webprog/php/ch14_07.htm](http://docstore.mik.ua/orelly/webprog/php/ch14_07.htm)找到，它将所有参数动态解析为 PHP 数组的 c 表示形式。

# c# - C# 应用程序退出，当用 x 关闭不是主窗体时

> ID：15988281
> 
> 赞同：-2
> 
> 时间：2013-04-13T13:24:24.073
> 
> 标签：c#, winforms

我有一个应用程序，它有两种形式，一种主要形式和另一种形式。我在其他表单中有一个退出按钮（按下 Application.Exit() 时），但是当有人单击此表单上的 x 时，我该如何调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:26:26.380

在表单的表单关闭或表单关闭事件中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:29:56.103

在 OtherForm.Closed(sender, e) 或 OtherForm.Closing(sender, e)

```
 Application.Exit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T13:30:03.617

简单的; 在 Form1.cs 中

```
 private void CloseApplicationButton_Click(object sender, EventArgs e)
    {
        Form2 m= new Form2();

        m.X_Click(this, null);

    } 
```

所以在 form2.cs 中公开点击事件

```
 public void X_Click(object sender, EventArgs e)
    {
        Application.Exit();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T20:43:50.047

为什么不让两者都做

```
Application.Exit(); 
```

除非您有一些想要作为退出场景的一部分运行的通用代码？

# c++ - 函数声明有什么问题？

> ID：15988286
> 
> 赞同：1
> 
> 时间：2013-04-13T13:25:02.233
> 
> 标签：c++, visual-studio-2010

请向我解释一下，这种方法的声明/描述中有什么错误？

```
class Set
{
    struct Node {
        // ...
    };
    // ...
    Node* &_getLink(const Node *const&, int) const;
    // ...
};

Node* &Set::_getLink(const Node *const &root, int t) const
{
    // ...
} 
```

我没有看到错误，但编译器（MS VS C++）给出了许多语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:26:30.020

您忘记了完全限定的名称`Node`（在 的范围内定义`Set`）：

```
 Set::Node* &Set::_getLink(const Node *const &root, int t) const
//  ^^^^^ 
```

如果没有完全限定，编译器将查找名为 的全局类型`Node`，该类型不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:26:37.647

问题是范围界定问题。您需要在`Node`此处添加前缀：

```
Set::Node* &Set::_getLink(const Node *const &root, int t) const
{
    // ...
} 
```

实际上，`Node`在遇到它时是未知的（您在命名空间范围内，而不是在`Set`的范围内）。您还可以使用`auto`：

```
auto Set::_getLink(const Node *const &root, int t) const -> Node *&
{
    // ...
} 
```

之后`->`，您就在`Set`'s 范围内并且`Node`为人所知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:30:56.497

您没有在全局范围内定义节点，
因此请使用此代码

```
//by Set::Node we give compiler that this function exist in class Node
Set::Node* &Set::_getLink(const Node *const &root, int t) const
{
   // ...
} 
```

# ruby-on-rails - 在 Rails 3 中支付 Authorize.net 时出现错误 87

> ID：15988289
> 
> 赞同：1
> 
> 时间：2013-04-13T13:25:18.670
> 
> 标签：ruby-on-rails, ruby, authorize.net

我用 Authorize.net 创建了一个测试帐户。我的开发环境是 rails 3，我正在尝试通过使用静态 IP 来实现服务器集成方法 (SIM)。但我收到一个错误：

> "3,1,87,(TESTMODE) 这个市场类型的交易不能在这个系统上处理。,000000,P,0,,,199.00,,auth_capture,,,,,,,,,,,,,,, ,,,,,,,,,,,D3EA25CA1DF97765286A48C6B22287F4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,✓,uSIUUgX0d++dIheYjcHdlztlViD/当向“AuthorizeNet::SIM::Transaction::Gateway::TEST”网关发送请求时，r4YDUP9rEuEy9U8=,Purchase。

我还找到了这个链接：[其他人得到了类似的类型错误](https://stackoverflow.com/questions/3132450/failtestmode-transactions-of-this-market-type-cannot-be-processed-on-this-sys)

但没有帮助。任何建议如何解决此错误？我在操作中编写了以下代码。

```
@amount = 10.00
@sim_transaction = AuthorizeNet::SIM::Transaction.new('API Login ID', 'Transaction Key', @amount, :hosted_payment_form => true)  
@sim_transaction.set_hosted_payment_receipt(AuthorizeNet::SIM::HostedReceiptPage.new(:link_method => AuthorizeNet::SIM::HostedReceiptPage::LinkMethod::GET, :link_text => 'Continue', :link_url => payments_thank_you_url(:only_path => false))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-28T16:58:05.417

由于您是通过 Web 应用程序处理信用卡交易，因此您需要确保您的 Sandbox 帐户为“Card Not Present”类型。如果您不记得将其设置为哪种类型，最好创建一个新帐户并确保选择“卡不存在”选项。否则，您将收到此错误消息。

我希望这有帮助。

# php - 从前端wordpress向表中插入数据

> ID：15988292
> 
> 赞同：0
> 
> 时间：2013-04-13T13:25:45.097
> 
> 标签：php, mysql, wordpress

我正在尝试从 wordpress 的前端和后端将数据插入到自定义表中。下面是我的代码，如果我从后端插入数据，它可以工作，但如果我尝试从前端插入，它会给我错误 404。

```
 <?php
/*
Plugin Name: Custom Form
Description: Custom Plugin
Author: Bijay Luitel

*/

// Create the table if not exixts
?>
<style>
p {
    display:block;
}
h3 {
    height:20px;
    padding:10px 5px;
}

</style>
<?php
//Short Codes
add_shortcode('form_bands','form_bands');
function form_bands(){
    global $wpdb;
    $this_page = $_SERVER['REQUEST_URI'];
    $query1 = "SELECT * FROM grade";
    $result1 = $wpdb->get_results($query1);
    $query2 = "SELECT * FROM branch";
    $result2 = $wpdb->get_results($query2);

    if($_POST['action']==1 && $_POST['name'] != '' ){
     $page_one_table = 'band';
     $name =$_POST['name'];
     $mailingAddress = $_POST['address'];
     $city = $_POST['city'];
     $state = $_POST['state'];
     $zip = $_POST['zip'];
     $email = $_POST['email'];
     $url = $_POST['url'];
     $telephone = $_POST['telephone'];
     $gradeId = $_POST['grade'];
     $branchId = $_POST['branch'];
     $insertMe="INSERT INTO band ('Name', 'MailingAddress', 'City', 'State', 'Zip', 'Email', 'URL', 'Telephone', 'GradeID', 'BranchID') VALUES('$name', '$mailingAddress', '$city', '$state', '$zip', '$email', '$url', '$telephone', '$gradeId', '$branchId')";
     $insert_page_one = $wpdb->query($insertMe);
     //$insert_page_one = $wpdb->insert($page_one_table, $page_one_inputs);

     $form_id = $wpdb->insert_id;
         if($insert_page_one)
         {
            echo '<div id="successMsg" class="updated below-h2"><p>Operation Successful</p></div>';  
         }
         else{ 
         echo '<div id="successMsg" class="updated below-h2"><p>Error ! Recheck and tryagain.</p></div>';   
         }

     }
     elseif ($_POST['action']==1 && $_POST['name'] == ''){
         echo '<div id="successMsg" class="updated below-h2"><p>Error ! Recheck and tryagain.</p></div>';   
     }
?>

<h2>Bands</h2>
<div class="postbox">
    <form action="" method="post">
        <div class="inside">
        <table class="form-table">
            <tr>
                <th>Name :</th>
                <td><input type="text" name="name" /></td>
            </tr>
            <tr>
                <th>Address :</th>
                <td><input type="text" name="address" /></td>
            </tr>
            <tr>
                <th>City :</th>
                <td><input type="text" name="city" /></td>
            </tr>
            <tr>
                <th>State :</th>
                <td><input type="text" name="state" /></td>
            </tr>
            <tr>
                <th>Zip :</th>
                <td><input type="text" name="zip" /></td>
            </tr>
            <tr>
                <th>Telephone :</th>
                <td><input type="text" name="telephone" /></td>
            </tr>
            <tr>
                <th>Email :</th>
                <td><input type="text" name="email" /></td>
            </tr>
            <tr>
                <th>Url :</th>
                <td><input type="text" name="url" /></td>
            </tr>
            <tr>
                <th>Grade :</th>
                <td><select name="grade">
                        <?php foreach($result1 as $row){
                        $value = $row->GradeID;
                        echo '<option value="'.$value.'">';
                        echo $row->Grade;   
                        echo "</option>";
                    }?>
                    </select></td>
            </tr>
            <tr>
                <th>Branch :</th>
                <td><select name="branch">
                        <?php foreach($result2 as $row){
                        $value = $row->BranchID;
                        echo '<option value="'.$value.'">';
                        echo $row->Name;    
                        echo "</option>";
                    }?>
                    </select></td>
            </tr>
        </table>
        <p class="submit">
            <input type="submit" name="add_form" class="button-primary" value="Submit" />
        </p>
        <input type="hidden" name="action" value="1" />
    </form>
</div>
</div>
<?php
 }
function myForm () 
{
     add_menu_page('Forms', 'Forms', '','forms', ''); 
     add_submenu_page("forms", "Bands", "Bands", 0, "Bands", "form_bands"); 
}
add_action('admin_menu','myForm'); 
```

我怎么解决这个问题？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:11:57.237

我预计您遇到的问题与您使用“保留”后变量名称有关`'name'`。

[WordPress Codex 页面`Register_Taxonomy()`](http://codex.wordpress.org/Function_Reference/register_taxonomy#Reserved_Terms)包含“保留条款”列表。

* * *

此外，您标签上的[`action`属性缺少您的 URL。](http://reference.sitepoint.com/html/form/action)`form`这在当前浏览器中处理得很好，但在某些旧浏览器中可能会导致意外行为，并且不保证将来可以正常工作。

更好的做法是完全删除此属性，如果您不打算使用它，因为[规范强烈建议作者不要将其留空](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#attr-fs-action)：

> `action`和`formaction`content 属性（*如果指定*）**必须**具有一个[有效的非空 URL 值，该 URL 可能被空格](http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#valid-non-empty-url-potentially-surrounded-by-spaces)包围。

（这个信息重新`action`属性感谢@mercator[这个答案](https://stackoverflow.com/questions/1131781/is-it-a-good-practice-to-use-an-empty-url-for-a-html-forms-action-attribute-a/1132015#1132015)）

# asp.net - 防止浏览器后退按钮重定向到asp.net mvc2中的上一页

> ID：15988293
> 
> 赞同：0
> 
> 时间：2013-04-13T13:25:46.037
> 
> 标签：asp.net, asp.net-mvc-2

我使用以下文章创建了一个关于在 asp.net mvc2 应用程序中显示会话过期警告消息的 POC。 [http://www.fairwaytech.com/2012/01/handling-session-timeout-gracefully/](http://www.fairwaytech.com/2012/01/handling-session-timeout-gracefully/)

我对代码进行了一项更改，如下所述：

`location.href = expireSessionUrl;`在endSession方法中改成如下代码：

```
window.location.replace(expireSessionUrl); 
```

一旦用户单击会话警告消息对话框中的注销按钮，他就会导航到注销视图。但是在这里，如果他单击浏览器后退按钮，他将被导航到上一页。

如前所述，我有以下修改的过期方法：

```
[Authorize]
public virtual ActionResult Expire()
{
Session.Clear();
FormsService.SignOut();
HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
HttpContext.Response.Cache.SetValidUntilExpires(false);
HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
HttpContext.Response.Cache.SetNoStore();
return Redirect(“/”);
} 
```

你能指导我解决这个问题吗？

在此先感谢 Santosh Kumar Patro

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:35:28.127

你需要让你的缓存过期，试试这个：

```
Page.Response.Cache.SetCacheability(HttpCacheability.NoCache) 
```

或来自[文档](http://msdn.microsoft.com/en-us/library/y18he7cw%28v=vs.100%29.aspx)：

```
Response.Cache.SetExpires(DateTime.Now.AddSeconds(60));
Response.Cache.SetCacheability(HttpCacheability.Public);
Response.Cache.SetValidUntilExpires(true); 
```

或者您可以使用[Response.CacheControl](http://msdn.microsoft.com/en-us/library/ms524721.aspx)来控制页面在用户缓存中的存储方式

# c# - 将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围

> ID：15988296
> 
> 赞同：2
> 
> 时间：2013-04-13T13:26:01.490
> 
> 标签：c#

我有一种日期时间，当我想保存 `DateTime.Now`所有东西时在数据库中是好的。但是当我想保存我的值时我得到错误

```
 LogTime = log.AnswerTime ?? DateTime.Now 
```

将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。

LogTime 值为：`4/3/2013 12:05:04 PM`

我认为一切都很好，但为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:46:45.283

在 .NET DateTime2 和 DateTime 都映射到 System.DateTime 所以没有任何转换。问题来自您的数据库如何处理这两种数据类型。例如，MSSQL 以不同的方式处理它们。在 MSSQL 中，DATETIME 支持 1753/1/1 到 9999/12/31，而 DATETIME2 支持 0001/1/1 到 9999/12/31。

这意味着如果您从 DateTime2 列中从数据库中读取 null 值，您将得到 0001/1/1 ，这绝对是超出范围的值。

.NET 为您提供了一些帮助，您可以在此处阅读[http://msdn.microsoft.com/en-us/library/bb675168.aspx](http://msdn.microsoft.com/en-us/library/bb675168.aspx)。

确保您使用的是 SqlDb 类型，如果您使用的是数据网格，请确保您的列正确使用 typeof，例如

```
new DataColumn("myDate", typeof(DateTime)) 
```

# c++ - 在主窗口添加 DockWidget

> ID：15988306
> 
> 赞同：0
> 
> 时间：2013-04-13T13:27:04.277
> 
> 标签：c++, qt, user-interface, qdockwidget

这是我的用户界面 ![在此处输入图像描述](https://i.stack.imgur.com/3n7xB.jpg)

我希望`red border`程序运行时我可以通过鼠标在图片中向左或向右移动。

我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:33:26.673

将所有这些小部件添加到 UI 设计器中的表单。选择文本编辑小部件和列表小部件。从顶部工具栏中选择“在拆分器中水平布局”。然后选择表单本身并从顶部工具栏中选择“垂直布局”。就是这样，除了列表小部件不可停靠。

**编辑：**

如果您想保持列表小部件的大小不变（以便仅由用户调整大小），请告诉 QSplitter 小部件的拉伸因子，例如：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent), ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    // index 0 is the text edit, stretch factor is 1 (= all stretching goes here)
    ui->splitter->setStretchFactor(0, 1); 

    // index 1 is the list widget, stretch factor is 0
    ui->splitter->setStretchFactor(1, 0);
} 
```

# asp.net - UpdatePanel 不更新列表框

> ID：15988309
> 
> 赞同：0
> 
> 时间：2013-04-13T13:27:21.293
> 
> 标签：asp.net, vb.net, drop-down-menu, listbox, updatepanel

我有一个包含 ListBox 的 UpdatePanel。每当我从 DropDown 更改选择时，我都希望通过 UpdatePanel 更新列表。但是，这是行不通的。

到目前为止，这是我的代码：

```
 Protected Sub drpDepartments_SelectedIndexChanged(sender As Object, e As EventArgs) Handles drpDepartments.SelectedIndexChanged

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim deptComm As String = "SELECT department_id FROM departments WHERE department_name = @DepartmentName"

        Dim deptSQL As New SqlCommand
        Dim dr As SqlDataReader = deptSQL.ExecuteReader()

        deptSQL = New SqlCommand(deptComm, conn)
        deptSQL.Parameters.AddWithValue("@DepartmentName", drpDepartments.SelectedItem.Text)

        dr.Read()

        If dr.HasRows Then

            Dim department_id As Integer = Convert.ToInt32(dr("department_id"))
            Session("DepartmentID") = department_id

        End If

        dr.Close()
        conn.Close() 
```

ASP

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                    <ContentTemplate>
                        <asp:ListBox ID="lstDeptMembers" runat="server" DataSourceID="SqlDataSource4" DataTextField="name" DataValueField="name" Height="176px" Width="204px"></asp:ListBox>
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="drpDepartments" EventName="SelectedIndexChanged" />
                    </Triggers>
                </asp:UpdatePanel>

                <asp:SqlDataSource ID="SqlDataSource4" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT * FROM users u
INNER JOIN 
(
Select x.user_id as userid,x.department_id,y.department_name
 from user_Department x 
inner join departments y 
on x.department_id=y.department_id WHERE x.department_id=@parameter
) 
    f on u.user_id= f.userid">
                    <SelectParameters>
                        <asp:SessionParameter Name="parameter" SessionField="DepartmentID" />
                    </SelectParameters>
                </asp:SqlDataSource> 
```

下拉列表：

```
 <asp:DropDownList ID="drpDepartments" runat="server" DataSourceID="SqlDataSource3" DataTextField="department_name" DataValueField="department_name">
</asp:DropDownList>
<asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT [department_name] FROM [departments]"></asp:SqlDataSource> 
```

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/lUd9k.png)

每当从 DropDown 中单击新选择时，如何使 ListBox 更新？

**编辑：**包含 ListBox 等的表的代码。：

```
<asp:DropDownList ID="drpDepartments" runat="server" DataSourceID="SqlDataSource3" DataTextField="department_name" DataValueField="department_name">
    </asp:DropDownList>
    <asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT [department_name] FROM [departments]"></asp:SqlDataSource>

    <br />

    <br />

     <table style="width:100%;">
            <tr>
                <td style="width: 221px">

                    <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                        <ContentTemplate>
                            <asp:ListBox ID="lstDeptMembers" runat="server" DataSourceID="SqlDataSource4" DataTextField="name" DataValueField="name" Height="176px" Width="204px"></asp:ListBox>
                        </ContentTemplate>
                        <Triggers>
                            <asp:AsyncPostBackTrigger ControlID="drpDepartments" EventName="SelectedIndexChanged" />
                        </Triggers>
                    </asp:UpdatePanel>

                    <asp:SqlDataSource ID="SqlDataSource4" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT * FROM users u
    INNER JOIN 
    (
    Select x.user_id as userid,x.department_id,y.department_name
     from user_Department x 
    inner join departments y 
    on x.department_id=y.department_id WHERE x.department_id=@parameter
    ) 
        f on u.user_id= f.userid">
                        <SelectParameters>
                            <asp:SessionParameter Name="parameter" SessionField="DepartmentID" />
                        </SelectParameters>
                    </asp:SqlDataSource>

                </td>
                <td style="width: 398px">

                    <asp:TextBox ID="txtuserSearch" runat="server"></asp:TextBox>
    &nbsp;&nbsp;&nbsp;&nbsp;
                    <asp:Button ID="btnSearchDeptUser" runat="server" Text="Search" />
                    <br />
                    <asp:Label ID="lblAddDeptUser" runat="server" Visible="False"></asp:Label>

                </td>

            </tr>
            <tr>
                <td >
                    <asp:Button ID="btnRmvDeptMem" runat="server" Text="Remove" />
                </td>
                <td>
                    <asp:Button ID="btnAddDeptUser" runat="server" Text="Add" />
                </td>

            </tr>

        </table> 
```

[Departments.aspx 的完整代码](http://pastebin.com/uVVt44Zb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:40:24.713

如果要`UpdatePanel`在用户选择项目时立即更新，则`DropDownList`必须将其 [`AutoPostBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.autopostback.aspx)属性设置为`"True"`（默认为`false`）：

```
<asp:DropDownList ID="drpDepartments" runat="server" DataSourceID="SqlDataSource3" 
    AutoPostack="True" DataTextField="department_name" DataValueField="department_name">
</asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:41:06.983

试试这个...改变这个

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server"> 
```

和

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional"> 
```

# c# - Android C# Xamarin 编译错误

> ID：15988314
> 
> 赞同：5
> 
> 时间：2013-04-13T13:27:48.013
> 
> 标签：c#, android, xamarin

我正在与 Xamarin 合作；它允许 C# 应用程序在 Android 上运行。但是，我收到以下错误：

> 错误1 “AndroidComputeResPaths”任务不支持“ResourceNameCaseMap”参数。验证该参数是否存在于任务中，并且它是一个可获取的公共实例属性。安卓应用程序1

我用谷歌搜索了这个错误，但只有 1 个结果没有答案。我尝试了 Visual Studio 2012 和 2010，库存 Android 应用程序模板，但我仍然得到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T17:56:20.590

“我删除了 Xamarin android，然后重新安装了 mono-android-4.6.04000.msi，现在可以正常工作了！~”

mousebb 在另一个线程上的这个答案对我有用....

[构建 Android 项目 (Xamarin) 时出现奇怪的错误](https://stackoverflow.com/questions/16031824/wierd-error-accurs-when-building-android-project-xamarin?lq=1)

# java - Itext：在绝对位置显示段落

> ID：15988315
> 
> 赞同：1
> 
> 时间：2013-04-13T13:28:05.700
> 
> 标签：java, itext

有没有办法绝对定位段落，当列表添加到段落时也可以工作？

谷歌搜索显示我应该使用 ColumnText，但如果段落中有列表，我将无法使用它。它只是在同一条线上显示彼此相邻的列表项。这是我的测试程序：

```
 PdfWriter writer=PdfWriter.getInstance(document,new FileOutputStream("/tmp/output.pdf"));
        document.open();
        ColumnText ct = new ColumnText(writer.getDirectContent());
        ct.setSimpleColumn(0,0,300,300);
        Paragraph p=new Paragraph();
        List list=new List();
        list.add(new ListItem("First item"));
        list.add(new ListItem("second item"));
        list.add(new ListItem("third item"));
        p.add(list);
        ct.addElement(p);
        ct.go();
        document.close();
        writer.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:17:20.737

I looked in the changelogs of iText and I discovered that this was fixed in iText 5.2.1, released on March 31st, 2012\. That's over a year ago. Please upgrade to the latest version and the problem will disappear.

Note that all 5.2.x versions were removed from SourceForge because they contained a bug that occasionally produced PDFs that weren't compliant with ISO-32000-1\. Based on the description of your problem, I know that you're using a version of iText that is even older than the 5.2.x series, so you definitely need to upgrade.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T18:19:12.830

在 PDF 文件中组织您的内容的另一种方法是您可以使用 PdfPTable 。首先使用循环指令将列表内容写入表中，然后在输出 pdf 文件中定义该 PdfPTable 的位置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-31T11:25:25.763

您可以使用此功能：

```
private void PlaceChunck(String text, int x, int y) {
    PdfContentByte cb = writer.DirectContent;
    BaseFont bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
    cb.SaveState();
    cb.BeginText();
    cb.MoveText(x, y);
    cb.SetFontAndSize(bf, 12);
    cb.ShowText(text);
    cb.EndText();
    cb.RestoreState();
} 
```

另见：[itext 绝对定位文本](https://stackoverflow.com/questions/1625455/itext-positioning-text-absolutely)；

# php - 如何显示不匹配的mysql结果

> ID：15988317
> 
> 赞同：0
> 
> 时间：2013-04-13T13:28:21.983
> 
> 标签：php, mysql

我正在尝试创建学费收据系统

我在 phpmyadmin 中创建了两个表 1 是入场，2 是费用

1.admission 我在填写录取表格时创建录取 php 表格，所有详细信息都保存在录取表格中

2.fees 与我在费用页面中创建的相同

在录取表中有在我们学校学习的所有学生信息

并在费用表中支付了当月费用的学生的所有信息

但现在我想要学生费用报告谁支付了谁没有支付费用

此代码仅显示付费学生报告

但我想要结果谁有薪和谁没有薪我该怎么做

请帮我解决这个问题

```
<?php
    $con = mysql_connect("localhost","root","");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("student", $con);

    echo "<div id='non-printable'><table class='sortable' border='1' cellpadding='10'>";
    echo "<tr> <th>No</th> <th>Name</th><th>Date</th><th>GRN</th> <th>Reference</th><th>Class</th><th>Roll No</th><th>Fees</th></tr>";

    // get results1 from database
    $result1 = mysql_query("SELECT fees.id,fees.name,fees.date,fees.grn,fees.reference,fees.class,fees.rollno,fees.fees, admission.mothername "." FROM fees, admission ". " WHERE fees.name = admission.name AND fees.date BETWEEN '2013-04-01' AND '2013-04-14' AND fees.class='6' order by class ASC");
    while($row = mysql_fetch_array($result1))
    {
        // echo out the contents of each row into a table
        echo "<tr>";
        echo '<td>' . $row['id'] . '</td>';
        echo '<td>' . $row['name'] . '</td>';
        echo '<td>' . $row['date'] . '</td>';
        echo '<td>' . $row['grn'] . '</td>';
        echo '<td>' . $row['reference'] . '</td>';
        echo '<td>' . $row['class'] . '</td>';
        echo '<td>' . $row['rollno'] . '</td>';
        echo '<td>' . $row['fees'] . '</td>';
        echo '<td>' . $row['mothername'] . '</td>';
        echo "</tr>"; 

        //Increment the value of the Total_total variable
        //by the salary value of one row till the while loop finishes
        $Total_fees=$Total_fees+$row['fees'];
    }

    echo "<tr>";
    echo '<td>Total</td>';
    echo '<td></td>';
    echo '<td></td>';
    echo '<td></td>';
    echo '<td></td>';
    echo '<td></td>';
    echo '<td></td>';
    echo '<td>' . $Total_fees .'</td>';
    echo "</tr>";  

    // close table>
    echo "</table>";

    mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:36:44.583

```
$result1 = mysql_query("SELECT fees.id, fees.name, fees.date, fees.grn, 
   fees.reference, fees.class, fees.rollno, fees.fees, admission.mothername ".
      "FROM admission LEFT JOIN fees ON fees.name = admission.name". 
    "WHERE fees.date BETWEEN '2013-04-01' AND '2013-04-14' AND fees.class='6' 
    order by class ASC"); 
```

使用左连接，您可以获得准入表的所有行和费用表的相应行。这样您也可以获得费用表的空白数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:39:45.920

`UPDATED`

```
<?php
    echo "<div id='non-printable'><table class='sortable' border='1' cellpadding='10'>";
    echo "<tr> <th>No</th> <th>Name</th><th>Date</th><th>GRN</th> <th>Reference</th><th>Class</th><th>Roll No</th><th>Fees</th></tr>";

    $dbserver = 'localhost'; 
    $dblogin  = 'root';
    $dbpassword = '';  
    $dbname = 'student';

    //opening connection
    $mysqli = new mysqli($dbserver, $dblogin, $dbpassword, $dbname);
    if (mysqli_connect_errno()) 
    {
        printf("Connection failed: %s\n", mysqli_connect_error());
        exit();
    }

    //opening connection
    $result = $mysqli->query("SELECT `name`, `mothername` FROM `admission` WHERE `class` = '6' ORDER BY `name` ASC") or die($mysqli->error.__LINE__);
    while($student = $result->fetch_assoc())
    {
        $subresult = $mysqli->query("SELECT * FROM `fees` WHERE `name` = '".$student['name']."' AND `date` BETWEEN '2013-04-01' AND '2013-04-14'") or die($mysqli->error.__LINE__);
        if($row = $subresult->fetch_assoc())
        {
            echo "<tr>";
            echo '<td>Student</td>';
            echo '<td>' . $row['id'] . '</td>';
            echo '<td>' . $row['name'] . '</td>';
            echo '<td>' . $row['date'] . '</td>';
            echo '<td>' . $row['grn'] . '</td>';
            echo '<td>' . $row['reference'] . '</td>';
            echo '<td>' . $row['class'] . '</td>';
            echo '<td>' . $row['rollno'] . '</td>';
            echo '<td>' . $row['fees'] . '</td>';
            echo '<td>' . $student['mothername'] . '</td>';
            echo "</tr>"; 

        }
        else
        {
            echo "<tr>";
            echo '<td>' . $student['name'] . '</td>';
            echo '<td> didn\'t pay any fee.</td>';
            echo "</tr>";
        }
    }
            echo '</table>';

mysqli_close($mysqli); 
?> 
```

# debugging - 查看网络服务器响应

> ID：15988319
> 
> 赞同：0
> 
> 时间：2013-04-13T13:28:40.233
> 
> 标签：debugging, web

在调试网站（例如使用 Wicket 开发）时，可以使用什么客户端工具来查看网络服务器的确切响应（例如 301 或 302）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:38:13.360

use apt-get or similar to install wget and then do

```
wget -S http://localhost:8090 
```

Where "localhost:8090" is the url path to the site To see all headers from the GET request. wget also has options that support POST requests

Alternatively use a browser with firebug to see the response codes

# android - 无法将 PhotoSwipe 与 android webview 一起使用

> ID：15988320
> 
> 赞同：0
> 
> 时间：2013-04-13T13:28:42.460
> 
> 标签：android, webview, gallery, photoswipe

这是我的网络视图配置

```
 WebSettings webSettings = myWebView.getSettings();                           
    webSettings.setJavaScriptEnabled(true);
    webSettings.setBuiltInZoomControls(true);
    webSettings.setSupportZoom(true);
    webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    webSettings.setPluginsEnabled(true);
    webSettings.setLoadWithOverviewMode(true);
    webSettings.setUseWideViewPort(true);
    webSettings.setSupportMultipleWindows(true);
    webSettings.setLoadsImagesAutomatically(true);
    webSettings.setLightTouchEnabled(true);
    webSettings.setDomStorageEnabled(true);
    myWebView.setInitialScale(1);
    myWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    myWebView.setScrollbarFadingEnabled(false);
    myWebView.clearHistory();
    myWebView.clearFormData();
    myWebView.clearCache(true);

    //Set URL
    setExplorer(url+lang);

    //Set Click Url
    myWebView.setWebViewClient(new WebViewClient(){
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            return false;
        }

    });

    //Set Progress Bar
    myWebView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) 
        {
            if(progress < 100 && Pbar.getVisibility() == ProgressBar.GONE){
                Pbar.setVisibility(ProgressBar.VISIBLE);

            }
            Pbar.setProgress(progress);
            if(progress == 100) {
                Pbar.setVisibility(ProgressBar.GONE);
            }
        }
    }); 
```

我正在尝试的网址是“ [http://www.photoswipe.com/latest/examples/04-jquery-mobile.html](http://www.photoswipe.com/latest/examples/04-jquery-mobile.html) ”

当我的 webview 加载网页时，一切看起来都很好，但是当我单击图片库中的图片时，我会看到一个长长的滚动条，我不会看到该图片，或者至少不像我使用 android 4.2 中的 google chrome 那样正确。 1.

我不适合我，我正在使用 android api 7

# rdf - OWL ObjectProperty 在 Protégé 中作为注释加载

> ID：15988321
> 
> 赞同：3
> 
> 时间：2013-04-13T13:29:17.280
> 
> 标签：rdf, ontology, owl, protege

我正在尝试在 Protégé 中加载[本体](http://www.bbc.co.uk/ontologies/wildlife/2010-11-04.shtml)，但未按预期处理。最有问题的是所有对象和数据属性都显示为注释而不是数据属性和对象属性。

我有一个对象属性*王国*：

```
<owl:ObjectProperty rdf:about="&wo;kingdom">
    <rdfs:label xml:lang="en">kingdom</rdfs:label>
    <rdfs:comment xml:lang="en">associates a taxon rank with a kingdom</rdfs:comment>
    <vs:term_status>testing</vs:term_status>
    <rdfs:range rdf:resource="&wo;Kingdom"/>
    <rdfs:domain rdf:resource="&wo;TaxonRank"/>
</owl:ObjectProperty> 
```

`/nature/life/Chordate#kingdom`具有`/nature/life/Animal#kingdom`作为它的王国的价值：

```
<wo:Phylum rdf:about="/nature/life/Chordate#kingdom">
    <rdfs:label>Vertebrates</rdfs:label>
    <wo:kingdom rdf:resource="/nature/life/Animal#kingdom"/>
</wo:Phylum> 
```

但是，在 Protégé 中，该属性显示为注释。我不明白为什么它没有显示为王国的对象属性。

![在此处输入图像描述](https://i.stack.imgur.com/RRD3g.png)

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:25:33.380

这似乎是 Protege 中的一个错误。如何修复它：

*   使用 Protege打开您的文件`index.rdf`，导入一些文件需要一些时间。
*   将本体保存为 RDF/XML 格式，在需要放置的时候选择文件夹并调用它`ontology.owl`。扩展名很重要，将其保存为 OWL 文件。
*   关闭 Protege 并重新打开它，打开文件`ontology.owl`，您现在应该可以看到正确显示的属性。

为什么这样做？我相信 Protege 对 .rdf 感到困惑并错误地解释了数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T14:32:42.990

如果您发现您的对象属性显示为注释，解决方案是导出为本体。这会将您的注释变成类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-15T11:56:18.887

当我将本体保存为 RDF/XML 格式时，实例的对象属性变为注释。但是，如果本体保存为 Turtle Syntax，再次使用 protege 打开时，对象属性将正常显示。

# objective-c - NSString 的性质

> ID：15988322
> 
> 赞同：-1
> 
> 时间：2013-04-13T13:29:18.537
> 
> 标签：objective-c, cocoa, nsstring

这样一个基本的问题，但我不知道答案。究竟有什么区别：

```
NSString *str = @"Hello"; 
```

和

```
NSString *str = [[NSString alloc] initWithString:@"Hello"]; 
```

我应该什么时候使用每一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:14:30.140

表达式在`@""`编译时¹被替换为的实例，该实例是具有固定内存布局²`NSConstantString`的专用子类。这也解释了为什么是唯一可以在编译时初始化的对象³。`NSString`^(`NSString`)

A`[[NSString alloc]initWithString:@""]`产生一个 NSString 实例，用文字表达式初始化该实例，然后释放该实例。因此，对象分配是多余的，立即丢弃。这就是为什么在创建不可变字符串时应该始终只使用文字的原因。

[¹重写表达式的 LLVM 代码`RewriteModernObjC::RewriteObjCStringLiteral`位于[RewriteModernObjC.cpp](http://llvm.org/viewvc/llvm-project/cfe/trunk/lib/Rewrite/Frontend/RewriteModernObjC.cpp?revision=163050&view=markup)中。]
[²要查看`NSConstantString`定义，请在 Xcode 中 cmd+单击它。]
[³为其他类创建编译时常量很容易，但需要编译器使用专门的子类。这会破坏与旧 Objective-C 版本的兼容性。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T13:31:17.437

> 我应该什么时候使用每一个？

```
NSString *str = [[NSString alloc] initWithString:@"Hello"]; //1st one 
```

以上是多余的，与

```
NSString *str = @"Hello"; //2nd one 
```

所以总是使用较短的。即我的例子中的第二个。

**编辑：**

另请参阅此[NSString *s = @"string" 和 NSString *s = [[NSString alloc] initWithString:@"string"] 有什么区别？](https://stackoverflow.com/questions/9034041/whats-the-difference-between-nsstring-s-string-and-nsstring-s-nsstri)

# javascript - CORS 和 Origin 标头？

> ID：15988323
> 
> 赞同：35
> 
> 时间：2013-04-13T13:29:23.643
> 
> 标签：javascript, ajax, http, http-headers, cors

当我们需要调用 Ajax 请求时，我们会这样做：

```
if(typeof XMLHttpRequest !== 'undefined') xhr = new XMLHttpRequest();
else
{
    var versions = ["Microsoft.XmlHttp",
            "MSXML2.XmlHttp",
            "MSXML2.XmlHttp.3.0",
            "MSXML2.XmlHttp.4.0",
            "MSXML2.XmlHttp.5.0"
    ]; 
```

我已经知道使用`XMLHttpRequest-2`，我们可以发出跨源请求**并**添加 ORIGIN 标头。

**问题：**

*   *这个标题是什么时候*添加的？

    *   它是在浏览器（支持 CORS）执行请求时添加的吗？（跨域还是非跨域？）
    *   还是在浏览器“看到”请求目标来源与当前来源不同时自动添加...

我的意思是：He** 粗线是什么意思？

> 跨域 HTTP 请求有一个 Origin 标头。此标头为服务器提供请求的来源。此标头受浏览器保护，不能从应用程序代码中更改。本质上，它是在跨文档消息传递中使用的消息事件上发现的原始属性的网络等价物。origin 标头与较旧的referer [sic] 标头的不同之处在于，referer 是一个包含路径的完整 URL。由于路径可能包含敏感信息，因此试图保护用户隐私的浏览器有时不会发送引荐来源网址。**但是，浏览器将始终在必要时发送所需的 Origin 标头**。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-13T14:06:11.407

## 起源**标**头

> 何时添加此标头？

在标头阶段，在文档正文发送之前（之后`open`，之前`send`）。

> 它是在浏览器（支持 CORS）发出请求时添加的吗？（跨域还是非跨域？）

*当源与创建XMLHttpRequest*的页面不匹配时添加，但也可以在同源请求中发送。

> 还是在浏览器“看到”请求目标来源与当前来源不同时自动添加...

是的。

> 但是，浏览器将始终在必要时发送所需的 Origin 标头。

这是*XMLHttpRequest*规范的一部分；如果您正在发出跨域请求，则会在请求标头中发送一个额外的标头。例如，此标头`Origin: http://www.stackoverflow.com`由遵循标准的浏览器附加，无需用户交互。

* * *

[**您可以在MozillaWiki 的安全部分**](https://wiki.mozilla.org/Security/Origin)、[**WHATWG**](http://fetch.spec.whatwg.org/)和[html5.org](http://html5.org/temp/fetch.html)中阅读有关规范的更多信息。它是由（据我所知）FireFox 和 Google Chrome 实现的。我不相信它是 W3C 的一部分。此外**，不要假设 origin 标头是 true**，因为它可以通过修改后的浏览器或其他软件手动设置。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T13:51:46.610

当您执行跨域请求时，会自动（通常）添加源头。

为了测试它，我在此页面上打开了控制台并发出了两个不同的请求：一个用于另一个域，一个用于“/”，并且第一个添加了原始标头。

顺便说一句，我正在使用 JQuery，我真的建议你也使用它，以便跨浏览器具有相同的行为。

有关该主题的补充信息，请查看：

> 首先要注意的是，一个有效的 CORS 请求*总是*包含一个 Origin 标头。这个 Origin 头是浏览器添加的，用户无法控制。该标头的值是发起请求的方案（例如 http）、域（例如 bob.com）和端口（仅当它不是默认端口时才包括在内，例如 81）；例如：[http](http://api.alice.com) ://api.alice.com 。
> 
> Origin 标头的存在并不一定意味着该请求是跨域请求。虽然所有跨域请求都包含一个 Origin 标头，但某些同源请求也可能有一个。例如，Firefox 在同源请求中不包含 Origin 标头。但是 Chrome 和 Safari 在同源 POST/PUT/DELETE 请求中包含 Origin 标头（同源 GET 请求将没有 Origin 标头）。

[资源](http://www.html5rocks.com/en/tutorials/cors/)

# eclipse - 如何在 Eclipse 中标记引用用法？

> ID：15988324
> 
> 赞同：1
> 
> 时间：2013-04-13T13:29:32.800
> 
> 标签：eclipse, find-occurrences

如何自动显示局部变量、字段、方法、类等的用法？

注意：Eclipse 中的**标记**出现功能完全符合我的要求（请参阅[Eclipse 编辑器显示变量出现](https://stackoverflow.com/questions/3387579/eclipse-editor-show-variable-occurence)），但是......当我移动光标时它不会更新。要更新发生的标记，我必须关闭**标记发生**，然后再次将其打开。

现在有没有一个功能可以标记引用的出现并在我移动光标时自动更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:05:52.297

> 要更新出现的标记，我必须关闭标记出现，然后再将其打开。

您不必这样做，并且只要您单击另一个（变量/字段/方法/类），事件就会自行更新。

唯一不能可靠显示事件的实例是最新的 Eclipse Juno 4.2。
请参阅[错误 400661](https://bugs.eclipse.org/bugs/show_bug.cgi?id=400661)和[错误 398509](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509)，将在 KeplerM7（4 月底）或 Kepler 4.3 完整版本（2013 年 6 月）中修复（通过[此提交）。](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/commit/?id=2223c41bef449202fb6017ee8d7a571cf3e5010f)

# db2 - 在 HADR 备用中无法执行子选择或联合操作

> ID：15988325
> 
> 赞同：0
> 
> 时间：2013-04-13T13:29:38.817
> 
> 标签：db2, union, subquery, standby

尝试使用联合运算符或子选择在具有 RoS（只读备用）的 HADR 数据库中执行一些查询，我收到错误 SQL1773N 原因代码 5。

是什么原因？它们是不生成写入的操作。

联盟

```
with hist(start_time, operationtype) as (
 select start_time, operationtype
 from sysibmadm.db_history
 where operation = 'B' )
select 'delta', timestampdiff(8, current timestamp - char(timestamp(max(start_time))))
from hist
where operationtype = 'D' or operationtype = 'E'
union all
select 'delta', timestampdiff(8, current timestamp - char(timestamp(max(start_time))))
from hist
where operationtype = 'I' or operationtype = 'O' 
```

子选择

```
with hist(start_time, operationtype) as (
 select start_time, operationtype
 from sysibmadm.db_history
 where operation = 'B' )
select 'delta', operationtype, start_time, timestampdiff(8, current timestamp - char(timestamp(start_time)))
from hist
where start_time = (
 select max(start_time)
 from hist
 where operationtype = 'D' or operationtype = 'E') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-17T21:19:53.907

这似乎是特定于`sysibmadm.db_history`.
在启用了 ROS的情况下尝试了以下`union all`和`subSelect`待机，并且都运行良好

```
CREATE TABLE TAB101  (
id bigint NOT NULL,
createTimestamp TIMESTAMP NOT NULL,
primary key (id))

insert into tab101 (id, CREATETIMESTAMP) values 
(1, current timestamp - 35 minutes), 
(2, current timestamp - 30 minutes),
(3, current timestamp - 25 minutes), 
(4, current timestamp - 20 minutes),
(5, current timestamp - 15 minutes), 
(6, current timestamp - 10 minutes),
(7, current timestamp - 5 minutes), 
(8, current timestamp)

with tempTab101 (id, CREATETIMESTAMP) as (
  select id, CREATETIMESTAMP from tab101
)
select id, CREATETIMESTAMP from tempTab101 
where id > 1
union all
select id, CREATETIMESTAMP from tempTab101
where id <= 10

with tempTab101 (id, CREATETIMESTAMP) as (
  select id, CREATETIMESTAMP from tab101
)
select * from tempTab101
where id = (
  select id from tempTab101 where id=2
) 
```

# php - 如何为图表制作活动日志

> ID：15988330
> 
> 赞同：1
> 
> 时间：2013-04-13T13:30:40.320
> 
> 标签：php, mysql, charts

我正在尝试为我的网站进行用户活动。

它不是太复杂......

我需要从用户活动表中制作图表。

这是我的数据库：

```
+-------+-------+
| date  | count |
+-------+-------+ 
```

发生的每个活动计数字段都会增加。

然后我可以随时了解用户活动。

结果：

```
count|                       o   o  o
     |                    o
     |      o  o  o     o
     |  o           o  
     |o
     |_____________________________________date 
```

问题是，我做得对吗？还是这种图表有更好的方法？

因为我认为这种方式不是最优的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:05:55.973

您可以使用 mscharts 在用户屏幕上显示图表。要显示图表，您需要使用 jquery 或 javascript。记录数据库中的每个活动。当您想要显示图表时，查询数据库并将结果作为 json 传递，以便 jquery/javascript 接收数据并显示图表。

# ruby-on-rails - Rails gsub 在视图中不起作用

> ID：15988331
> 
> 赞同：0
> 
> 时间：2013-04-13T13:30:41.977
> 
> 标签：ruby-on-rails, gsub

在我看来，我有以下代码，我不明白为什么 gsub 不起作用。

`<div class="section" id="<%= section.title.gsub(/_/, ' ') %>">`

当`.title = "Test Title"`它只是返回`"Test Title"`而不是`"Test_Title"`

这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:32:56.843

应该是相反的：

```
"Test Title".gsub(/ /, '_') #=> "Test_Title" 
```

# concurrency - 代码有什么好处

> ID：15988333
> 
> 赞同：0
> 
> 时间：2013-04-13T13:30:55.430
> 
> 标签：concurrency, locking, java

在阅读 ArrayBlockingQueue 的源代码时，我发现以下代码：

```
public E take() throws InterruptedException {
    final ReentrantLock lock = this.lock;
    lock.lockInterruptibly();
    try {
        try {
            while (count == 0)
                notEmpty.await();
        } catch (InterruptedException ie) {
            notEmpty.signal(); // propagate to non-interrupted thread
            throw ie;
        }
        E x = extract();
        return x;
    } finally {
        lock.unlock();
    }
} 
```

为什么不使用代码

```
public E take() throws InterruptedException {
     lock.lockInterruptibly();
    try {
        try {
            while (count == 0)
                notEmpty.await();
        } catch (InterruptedException ie) {
            notEmpty.signal(); // propagate to non-interrupted thread
            throw ie;
        }
        E x = extract();
        return x;
    } finally {
        lock.unlock();
    }
} 
```

行代码的好处是什么：**final ReentrantLock lock = this.lock;**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:35:45.047

这个想法是由 Doug Lea 推广的——我认为最初的想法是当使用最终的局部变量时，JVM 可能会执行一些与性能相关的优化。

从讨论这个问题的 OpenJDK 线程中查看[这个线程](http://mail.openjdk.java.net/pipermail/core-libs-dev/2010-May/004165.html)

编辑：

一些研究在堆栈上抛出了这两个相关的问题：

[在 ArrayBlockingQueue 中，为什么要将 final 成员字段复制到本地 final 变量中？](https://stackoverflow.com/questions/2785964/in-arrayblockingqueue-why-copy-final-member-field-into-local-final-variable)

[使用前Java Lock 变量赋值。为什么？](https://stackoverflow.com/questions/8019831/java-lock-variable-assignment-before-use-why)

# php - 检查数组中的值是否大于数字

> ID：15988335
> 
> 赞同：1
> 
> 时间：2013-04-13T13:31:14.010
> 
> 标签：php, arrays, codeigniter

我正在处理 HTML 电子邮件，我需要附加表单，但附加的表单的值小于或等于 37 (<= 37)

我想我在这段代码中发现了我遇到的问题：

```
 if ($this->input->post('form') <= 37) {
              ...........................................
            } 
```

我认为这是要搜索的是数组 form[] 中是否实际上有 37 个键，而不是值是否小于或等于 37。

我想要的是查看数组表单的值是否小于附加这些表单的值，然后我要检查的下一件事是数组表单的值是否> = 38，然后附加下一组表单。

这是我尝试过的：

```
 if ($this->input->post('form') <= 37) {
                // Attach all the forms with a value of less then or equal to 37
            }
            if ($this->input->post('form') >= 38) {
               //Attach all the forms with a value of greater then or equal to 38
            } 
```

这可能吗？

> 编辑 1

只是为了澄清我的问题，我遇到的问题是我想检查我的 form[] 数组中的值是否小于或等于 37，如果它们附加了 ID 小于或等于 37 的所有表单。如果不是，则附上 ID 大于或等于 38 的所有表格。希望这可以解决问题。

> 编辑 2

多亏了 okok 的帮助，他提供了关于如何非常简单地获得价值的提示，我什至没有想过要做这样的事情。干得好

如果有人感兴趣，这是发送电子邮件[的代码片段！](http://pastebin.com/aBAsVKzH)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:33:02.820

无论如何，您的问题有点不清楚，要检查值`> <`或`=`执行此操作

```
 if(is_array($this->input->post('form')) && count($this->input->post('form')) > 0){
       foreach($this->input->post('form') as $value){
        if($value > 37){
        //do somenthing
        }
         if($value <= 38){
        //do somenthing
        }

         //etc ..
        }
    } 
```

检查数组有多少键这样做：

```
if(count($this->input->post('form')) > 37){

}
if(count($this->input->post('form')) <= 38){

} 
```

# php - 方括号中的空间是否具有与空间不同的含义？

> ID：15988338
> 
> 赞同：9
> 
> 时间：2013-04-13T13:31:24.433
> 
> 标签：php, regex

举个例子， 和`/[ ]{0,3}/`有不同的含义`/ {0,3}/`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-13T13:35:58.550

如果启用了允许在正则表达式中的标记之间“自由空间”的修饰符标志（为了可读性并允许在正则表达式中注释） ，它*可能*具有不同的含义。`x`但如果不启用此设置，则两者之间没有功能差异。

有关此选项的详细说明，请参阅此[Regex 教程，其中特别指出：](http://www.regular-expressions.info/freespacing.html)

> ...自由间距模式在字符类中无效。字符类中的空格和换行符将包含在字符类中。

此外，对于 PHP 特定权限，请参阅[PCRE 模式修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)的 PHP 手册，其中指出：

> x (PCRE_EXTENDED) 如果设置了此修饰符，则模式中的空白数据字符将被完全忽略，除非转义或在字符类中...

另请参阅[有关指定修饰符的其他正则表达式教程页面，该页面](http://www.regular-expressions.info/modifiers.html)解释了如何在不同风格的正则表达式中实现修饰符。

修饰符标志可以包含在正则表达式本身中，因为`(?x)`这意味着从正则表达式中的那一点开始到正则表达式的末尾（或直到结束`(?-x)`）都启用了空闲空间。特别是对于 PHP，修饰符标志可以通过尾随正则表达式应用于整个表达式，例如（使用您的示例之一）`/ {0,3}/x`

无论该设置如何，方括号格式 ( `[ ]`) 都明确表示文字空间，并且 IMO 是自我记录的；它非常明确地显示了 devoloper 使用文字空间的意图，可能优先于 " `\s`" 字符类（它还包括制表符和换行符）。

此外，同样只是 IMO，这是一种将空格作为文字“转义”的更可取的方式，而不是使用“ `\` ”，后者很容易被未来的代码维护者误解或忽视。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T13:35:06.927

它们产生相同的结果，但方括号中的结果更具可读性和更深思熟虑。

就个人而言，我宁愿使用`\s`，除非文字空间是唯一允许的。

# java - 在休眠中将枚举映射到字符串

> ID：15988342
> 
> 赞同：110
> 
> 时间：2013-04-13T13:32:24.877
> 
> 标签：java, hibernate, enums

我有一个类别休眠模型：

```
@Entity
@Table(name = "category")
public class Category {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name = "id")
    private long id;

    @Column(name = "type")
    private String type; 
```

其中有一个类型字符串字段。我还有一个 Java 枚举，它代表一个类别的类型：

```
public enum CategoryType {
    INCOME, OUTCOME;
} 
```

我想用它来代替字符串类型。SQL 在 varchar 参数中接受两个不同的值：要么`CategoryIncome`要么`CategoryOutcome`。我希望 Category 模型类接受一个枚举变量 - 并在 hibernate 请求时以某种方式将其映射到字符串。

可能吗？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-04-13T13:39:06.263

是的，是可能的。它应该是：

```
@Enumerated(EnumType.STRING)
@Column(name = "category_type")
private CategoryType categoryType; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-09-25T04:47:09.650

**接受的答案对于PostgreSQL**来说是不够的。我附上了对我有用的实现：

[https://stackoverflow.com/a/64021041/5279996](https://stackoverflow.com/a/64021041/5279996)

# javascript - 如何使用 jquery 在像 http://pinterest.com/ 这样的网格视图中显示带有标题的照片

> ID：15988343
> 
> 赞同：-2
> 
> 时间：2013-04-13T13:32:27.763
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-plugins

我需要在像[http://pinterest.com/](http://pinterest.com/)这样的网格视图中显示带有标题的照片。我想要做什么：如在[http://pinterest.com/](http://pinterest.com/)中，一些图像显示为不同的宽度和高度。所以我想实现同样的事情，就我而言，图像来自数据库（mysql，php），所以所有图像的大小都相同。我需要一些 js 或 jquery 代码在网格视图中显示它们，但随机图像具有不同的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:44:52.297

您遇到的问题是 pInterest 有 5 列，所有列的宽度都相同。这些图像都是不同尺寸的，因此这需要他们将所有图像的大小调整到相同的宽度，并允许它们拥有这些不同高度的图像。

如您所说，如果您的所有图像的高度和宽度都相同，那么如果没有不同的列宽，您将无法获得这种效果。但是，您的所有图像都将与该列中的所有其他图像具有相同的宽度和高度。

您可以使用几个 gridView 插件，例如-

*   [砌体](http://masonry.desandro.com/)
*   [同位素](http://isotope.metafizzy.co/)

这是我上面解释的不同宽度的一个例子。

**pInterests 当前视图** ![在此处输入图像描述](https://i.stack.imgur.com/4yl6I.png)

**宽度相等时你的会是什么样子。** ![在此处输入图像描述](https://i.stack.imgur.com/WZASy.png)

**不同宽度的你会是什么样子** ![在此处输入图像描述](https://i.stack.imgur.com/91CXg.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:43:14.633

首先将其用于类似 Pinterest 的网格： http: [//masonry.desandro.com/](http://masonry.desandro.com/)

然后，如果您从数据库中获取带有图像 URL 的数组，请尝试以下代码：

```
//'Shuffle' the array for random order
<?php shuffle( $arrayImg ); ?>
// Iterates over the array
<?php foreach ( $arrayImg as $src ): ?>
  // Random images width between 200 and 300 with 'rand'
  // Maybe the random width is contradictory... but test it yourself =)
  <img src="images/<?php echo $src ?>" width="<?php rand(200,300) ?>">
<?php endforeach ?> 
```

# c++ - 如何将 sort() 的比较参数与模板和自定义数据结构一起使用

> ID：15988345
> 
> 赞同：2
> 
> 时间：2013-04-13T13:32:47.223
> 
> 标签：c++, templates, sorting, stl

我想创建一个比较函数对象，它可以帮助我对自定义数据结构的向量进行排序。由于我同时使用模板，因此我正在努力确定应该在哪里实现它以及所需的任何其他代码。下面的大部分代码都可以忽略。包含它是为了完整性，但比较函数对象在`printSummary()`. 简而言之，如何实现比较函数对象？

```
#include<map>
#include<vector>
//#include<iostream>
#include<algorithm>
using namespace std;

template <class T>
class Record{
   public:
   T item;
   int total;
};

   template<class T>
   bool compare(const Record<T> & a, const Record<T> & b){ //should a come before b?
      if(a.total > b.total)
         return true;
      if(a.total < b.total)
         return false;
      if(a.total == b.total){
         if(a.item < b.item)
            return true; 
         else
            return false;
      }
   }

template <class T>
class Counter{
   public:
      map<T, int> m;

   void printSummary(){

      typename map<T, int>::const_iterator itr; 
      vector< Record<T> > printlist;
      Record<T> temp;
      int i = 0;

      for( itr = m.begin(); itr != m.end(); ++itr ){
         temp.item = (*itr).first;
         temp.total = (*itr).second;
         printlist.push_back(temp);
         i++;
      }

      sort(printlist.begin(), printlist.end(), compare);

      //output sorted printlist contents
   }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:37:54.307

在您的调用中`sort()`，您指定了函数*模板的名称* **而不实例化它**：

```
sort(printlist.begin(), printlist.end(), compare);
//                                       ^^^^^^^ 
```

函数模板的裸名代表编译器的**整个重载集**（其中该集包括该模板的所有可能的特化）。

为了消除歧义，您需要实例化`compare<>()`以提供*一个*函数的地址：

```
sort(printlist.begin(), printlist.end(), compare<T>);
//                                              ^^^ 
```

或者，您可以制作`compare`一个*仿函数*：

```
struct compare
{
   template<class T>
   bool operator () (const Record<T> & a, const Record<T> & b)
   {
      // should a come before b?
      if(a.total > b.total)
         return true;
      if(a.total < b.total)
         return false;
      if(a.total == b.total){
         if(a.item < b.item)
            return true; 
         else
            return false;
      }
   }
}; 
```

然后，您可以将其传递给`sort()`这种方式，无需模板实例化（但您需要创建仿函数的实例，虽然临时的很好，如下所示）：

```
sort(printlist.begin(), printlist.end(), compare());
//                                       ^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:40:15.510

到目前为止，这看起来不错，您只能`compare`使用类型限定`T`

```
sort(printlist.begin(), printlist.end(), compare<T>); 
```

在您的比较功能中，您可以省略

```
if(a.total == b.total){ 
```

因为在那一点上，它总是平等的。您可以将其减少到

```
if (a.total > b.total)
    return true;

if (a.total < b.total)
    return false;

return a.item < b.item; 
```

# c# - 我应该如何在这里防止多次插入？

> ID：15988352
> 
> 赞同：4
> 
> 时间：2013-04-13T13:33:12.837
> 
> 标签：c#, entity-framework

我正在插入大约 6 家银行的 5000 笔交易，但我在数据库中获得了 5000 行名称重复的银行行。

```
public class Transaction
{
    [Key]
    public int Id { get; set; }
    public DateTime TransDate { get; set; }
    public decimal Value { get; set; }
    public string Description { get; set; }
    public Bank Bank { get; set; }
}

public class Bank
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
}

public class FinancialRecordContext : DbContext
{
    public FinancialRecordContext() : base("FinancialRecordDatabase") { }

    public DbSet<Transaction> Transactions { get; set; }

    public DbSet<Bank> Banks { get; set; }

    public Bank FindOrInsertBank(string bankName)
    {
        var bank = Banks.SingleOrDefault(b => b.Name == bankName);
        if (bank == null)
        {
            bank = new Bank { Name = bankName };
            Banks.Add(bank);
        }
        return bank;
    }
} 
```

然后插入我正在循环一些数据并因此插入：

```
 using (var context = new FinancialRecordContext())
        {
            foreach (var t in data)
            {
                var tran = new Transaction
                {
                    Description = t.Description,
                    Value = t.Value,
                    TransDate = t.TransDate,
                    Bank = context.FindOrInsertBank(t.BankName)
                };
                context.Transactions.Add(tran);
            }
            context.SaveChanges();
        } 
```

看起来该`FindOrInsertBank`方法一直在访问数据库，而不是在本地查看它最近添加的内容，而不是承诺的银行。我怎么能/应该这样做？

我应该`SaveChanges`在每个银行插入之后吗？不是我真正想做的，我希望这只是一笔交易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:52:57.257

您可以尝试查询更改跟踪器（这是一个内存查询，而不是数据库查询）：

```
using (var context = new FinancialRecordContext())
{
    foreach (var t in data)
    {
        Bank bank = context.ChangeTracker.Entries()
            .Where(e => e.Entity is Bank && e.State != EntityState.Deleted)
            .Select(e => e.Entity as Bank)
            .SingleOrDefault(b => b.Name == t.BankName);

        if (bank == null)
            bank = context.FindOrInsertBank(t.BankName);

        var tran = new Transaction
        {
            Description = t.Description,
            Value = t.Value,
            TransDate = t.TransDate,
            Bank = bank
        };
        context.Transactions.Add(tran);
    }
    context.SaveChanges();
} 
```

**编辑**

在此处使用更改跟踪器*可能*对性能不利，因为`Bank.Name`它不是实体的键，我猜查询将是对条目的线性搜索。在这种情况下，使用手写字典可能是更好的解决方案：

```
using (var context = new FinancialRecordContext())
{
    var dict = new Dictionary<string, Bank>();
    foreach (var t in data)
    {
        Bank bank;
        if (!dict.TryGetValue(t.BankName, out bank))
        {
            bank = context.FindOrInsertBank(t.BankName);
            dict.Add(t.BankName, bank);
        }

        var tran = new Transaction
        {
            Description = t.Description,
            Value = t.Value,
            TransDate = t.TransDate,
            Bank = bank
        };
        context.Transactions.Add(tran);
    }
    context.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T14:19:49.013

有几个建议可以尝试：

1）首先检查`Local`集合`DbSet<Bank>`。

```
public Bank FindOrInsertBank(string bankName)
{
    var bank = Banks.Local.SingleOrDefault(b => b.Name == bankName);
    if (bank == null)
    {
        var bank = Banks.SingleOrDefault(b => b.Name == bankName);
        if (bank == null)
        {
            bank = new Bank { Name = bankName };
            Banks.Add(bank);
        }
    }
    return bank;
} 
```

`DetectChanges()`2）每次更新后强制调用

```
context.Transactions.Add(tran);
context.ChangeTracker.DetectChanges(); 
```

# handlebars.js - Handlebars：如何按值访问数组？

> ID：15988361
> 
> 赞同：0
> 
> 时间：2013-04-13T13:34:30.730
> 
> 标签：handlebars.js, mustache

我有一个带有名称和 ID 的简单数组“名称”。我想从其他循环（电话）访问名称。代码如下：

```
{{#names}}
      {{name}} - {{id}} // this shows for example '123456 -  001'

{{/names}}

{{#phones}}
    {{number}} - {{id}}
    -->here i'd like to fetch a 'name' from names based on phone {{id}}

{{/phones}} 
```

有没有类似的东西`{{../names.id['001']}}`？？

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:14:23.097

我正在做这样的事情：

```
{{#phones}}
    {{#../names}}
        {{#ifeq ../id this.id}}
            {{this.name}}
        {{/ifeq}}
    {{/../names}}
{{/phones}} 
```

ifeq 是这个助手：

```
Handlebars.registerHelper('ifeq', function (a, b, options) {
      if (a == b) { return options.fn(this); }
    }); 
```

# css - CSS页码不起作用

> ID：15988367
> 
> 赞同：6
> 
> 时间：2013-04-13T13:35:12.110
> 
> 标签：css, printing

我尝试过使用CSS3`@page`和`counter(page)`功能，但我看不到任何添加到打印输出的页码。无论我做什么，看起来这根本行不通。

我的脚手架看起来像这样：

```
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <style type="text/css">
        @page {
           counter-increment: page;
           counter-reset: page 1;
           @top-right {
              content: "Page " counter(page) " of " counter(pages);
           }
        }
        </style>
<head>

<body>
        <div>

        Lorem ipsum dolor...
        /* this gets long, 2 pages of text */
        </div>
</body>
</html> 
```

我对此进行测试的方式是在浏览器中打开页面，将其打印到 PDF 文件中，最后我正在验证内容。在不同的浏览器中，输出有点不同，但我看不到正确的页码。

操作系统：Linux Mint

浏览器：Chromium 25.0.1364.160、Firefox 20.0.1、Opera（来自包管理器的最新版本）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:25:02.317

浏览器对此的支持达不到标准。

Firefox 新版本支持@page {margin: 2in}，但不支持@page 的其他参数。我相信其他浏览器也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T14:31:19.003

您的文件应如下所示。请注意，页面计数器是特殊的，不需要设置和递增。

Firefox、webkit 和我认为歌剧也不支持 css3-pages 所以它不起作用。较新版本的 IE 也不会，尽管 MSDN 暗示它们会这样做。

```
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <style type="text/css">
        @page {
          @top-right {
              content: "Page " counter(page) " of " counter(pages);
           }
        }
        </style>
<head>

<body>
        <div>

        Lorem ipsum dolor...
        /* this gets long, 2 pages of text */
        </div>
</body>
</html> 
```

# php - 如何从php中popen打开的进程获取输出？

> ID：15988369
> 
> 赞同：11
> 
> 时间：2013-04-13T13:35:22.507
> 
> 标签：php, popen

文件 a.php：

```
<?php
echo "abcdef";
?> 
```

文件 b.php：

```
<?php
$h=popen('php a.php',r);
pclose($h);
?> 
```

问题：

我在控制台上看不到回显结果；为什么以及如何看到它？

我不想在文件 b.php 中这样做：`echo stream_get_contents($h);`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T13:38:43.980

Check the second example in the documentation on [popen](http://php.net/popen), it shows exactly how to do that:

```
<?php
error_reporting(E_ALL);

/* Add redirection so we can get stderr. */
$handle = popen('/path/to/executable 2>&1', 'r');
echo "'$handle'; " . gettype($handle) . "\n";
$read = fread($handle, 2096);
echo $read;
pclose($handle); 
```

This snippet reads from stderr. Remove the pipe to read from stdout.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-22T01:30:18.783

您无法在控制台上看到回显结果，因为它从未进入控制台。通过以读取模式打开进程，它的 STDOUT 链接到打开进程的文件句柄。输出到控制台的唯一方法是从该文件句柄中读取，然后回显它。

换句话说，流程就是这样。

*   b.php 开始运行 - 它的 STDIN 和 STDOPUT 像往常一样链接到您的控制台
*   它以读取模式调用 popen 并将流资源存储在 $h
*   这会导致 a.php 开始运行，它的 STDOUT 链接到 $h 中的文件描述符，而它的 STDIN 没有链接到任何东西
*   如您所见，这意味着 a.php 无法直接访问启动 b.php 的控制台
*   a.php 将其输出写入该流，然后完成运行
*   b.php 从来没有对 $h 中的流做任何事情，它只是关闭它，所以 a.php 的输出丢失了。

希望能解释这里发生了什么。如果你想在控制台看到 a.php 的输出，那么 b.php 需要从 $h 中的流中读取它，然后回显它，因为只有 b.php 可以访问控制台。

或者，如果您使用 system() 而不是 popen()，输出将自动输出到调用脚本的控制台上，因为使用 system() 会将主脚本的 STDIN 和 STOUT 移交给您调用的程序或脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-17T19:47:13.590

尝试这个：

```
while (@ ob_end_flush()); // end all output buffers if any
$proc = popen('/path/to/executable 2>&1', 'r');
while (!feof($proc))
{
    echo fread($proc, 4096);
    @ flush();
} 
```

# html - 如何将 Font Awesome 图标添加到输入字段？

> ID：15988373
> 
> 赞同：92
> 
> 时间：2013-04-13T13:35:36.423
> 
> 标签：html, css, font-awesome

如何使用 Font Awesome 中包含的搜索图标进行输入？我的网站上有一个搜索功能（基于 PHPmotion），我想将其用于搜索。

这是代码：

```
<div id="search-bar">

      <form method="get" action="search.php" autocomplete="off" name="form_search">
        <input type="hidden" name="type" value="videos" />
            <input autocomplete="on" id="keyword" name="keyword" value="Search Videos" onclick="clickclear(this,
            'Search Videos')" onblur="clickrecall(this,'Search Videos')" style="font-family: verdana; font-weight:bold;
            font-size: 10pt; height: 28px; width:186px; color: #000000; padding-left: 2px; float:left; border: 1px solid black; background-color:
            #ffffff" />
            <input type="image" src="http://viddir.com/themes/default/images/search.jpg" height="30" width="30" border="0" style="float:right;"/>
        <div id="searchBoxSuggestions"></div>
        </form>
        </div> 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-04-13T13:49:26.890

You can use another tag instead of `input` and apply FontAwesome the normal way.

instead of your `input` with type `image` you can use this:

```
<i class="icon-search icon-2x"></i> 
```

quick **CSS**:

```
.icon-search {
    color:white;
    background-color:black;
} 
```

Here is a quick fiddle: [**DEMO**](http://jsfiddle.net/VVS2P/)

您可以更好地设置它的样式并向 i 对象添加事件功能，您可以使用`<button type="submit">`对象而不是`i`javascript 或使用 javascript 来完成。

按钮解决方案将是这样的：

```
<button type="submit" class="icon-search icon-large"></button> 
```

和**CSS**：

```
.icon-search {
    height:32px;
    width:32px;
    border: none;
    cursor: pointer;
    color:white;
    background-color:black;
    position:relative;
} 
```

这是我用按钮而不是 i 更新的小提琴： [**DEMO**](http://jsfiddle.net/VVS2P/1/)

* * *

### 更新：*在任何标签上使用 FontAwesome*

FontAwsome 的问题在于它的样式表使用`:before`伪元素将图标添加到元素 - 并且伪元素在元素上不起作用/不允许`input`。这就是为什么不能以正常方式使用 FontAwesome 的原因`input`。

***但是有一个解决方案***- 你可以使用 FontAwesome 作为常规字体，如下所示：

**CSS：**

```
input[type="submit"] {
    font-family: FontAwesome;
} 
```

**HTML：**

```
<input type="submit" class="search" value="&#xf002;" /> 
```

字形可以作为`value`属性的值传递。各个字母/图标的 ascii 代码可以在 FontAwesome css 文件中找到，您只需要将它们更改为 HTML ascii 数字`\f002`，`&#xf002;`就可以了。

链接到 FontAwesome *ascii 代码*（**cheatsheet**）：[**fortawesome.github.io/Font-Awesome/cheatsheet**](http://fortawesome.github.io/Font-Awesome/cheatsheet/)

图标的大小可以通过 轻松调整`font-size`。

请参阅上面使用`input`jsfidde 中的元素的示例：

### [演示](http://jsfiddle.net/VVS2P/91/)

* * *

### 更新：*FontAwesome 5*

在 FontAwesome 版本 5 中，此解决方案所需的 CSS 已更改 - 字体系列名称已更改，并且必须指定字体粗细：

```
input[type="submit"] {
    font-family: "Font Awesome 5 Free"; // for the open access version
    font-size: 1.3333333333333333em;
    font-weight: 900;
} 
```

请参阅@WillFastie 的评论，其中包含更新小提琴的链接。谢谢！

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-11-04T11:29:17.220

这是一个使用简单 CSS 和标准字体真棒语法的解决方案，不需要 unicode 值等。

1.  创建一个标签，然后创建一个带有您需要的图标`<input>`的标准标签。`<i>`

2.  将相对定位与更高的层顺序（z-index）一起使用，并将图标移动到输入字段的上方。

3.  （可选）您可以使图标处于活动状态，以通过标准 JS 提交数据。

有关 HTML / CSS / JS，请参阅下面的三个代码片段。

或者在这里的 JSFiddle 中相同：示例：http: [//jsfiddle.net/ethanpil/ws1g27y3/](http://jsfiddle.net/ethanpil/ws1g27y3/)

```
$('#filtersubmit').click(function() {
  alert('Searching for ' + $('#filter').val());
});
```

```
#filtersubmit {
  position: relative;
  z-index: 1;
  left: -25px;
  top: 1px;
  color: #7B7B7B;
  cursor: pointer;
  width: 0;
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<input id="filter" type="text" placeholder="Search" />
<i id="filtersubmit" class="fa fa-search"></i>
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-24T16:45:31.673

对于那些想知道如何将 FontAwesome 图标添加到 drupal 输入的人，您必须首先像这样 decode_entities：

```
$form['submit'] = array(
'#type' => 'submit',
'#value' => decode_entities('&#xf014;'), // code for FontAwesome trash icon
// etc.
); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-13T14:02:41.593

将您的输入更改为按钮元素，您可以在其上使用 Font Awesome 类。演示中字形的对齐方式不是很好，但你明白了：

[http://tinker.io/802b6/1](http://tinker.io/802b6/1)

```
<div id="search-bar">
  <form method="get" action="search.php" autocomplete="off" name="form_search">
    <input type="hidden" name="type" value="videos" />
        <input autocomplete="on" id="keyword" name="keyword" value="Search Videos" onclick="clickclear(this,
        'Search Videos')" onblur="clickrecall(this,'Search Videos')" style="font-family: verdana; font-weight:bold;
        font-size: 10pt; height: 28px; width:186px; color: #000000; padding-left: 2px; border: 1px solid black; background-color:
        #ffffff" /><!--
        --><button class="icon-search">Search</button>
    <div id="searchBoxSuggestions"></div>
    </form>
</div>

#search-bar .icon-search {
    width: 30px;
    height: 30px;
    background: black;
    color: white;
    border: none;
    overflow: hidden;
    vertical-align: middle;
    padding: 0;
}

#search-bar .icon-search:before {
    display: inline-block;
    width: 30px;
    height: 30px;
} 
```

这里的优点是表单仍然具有完整的功能，而无需为不是按钮但看起来像一个的元素添加事件处理程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-20T05:50:46.740

与上面的答案类似，我在 HTML 的 value= 部分中使用了 unicode 字符，并将 FontAwesome 称为该输入元素上的字体系列。我唯一要补充的是，最佳答案没有涵盖的是，因为我的 value 元素在图标之后也有文本，所以将字体系列更改为 FontAwesome 会使常规文本看起来很糟糕。解决方案是简单地更改 CSS 以包含后备字体：

```
<input type="text" id="datepicker" placeholder="Change Date" value=" Sat Oct 19" readonly="readonly" class="hasDatepicker">

font-family: FontAwesome, Roboto, sans-serif; 
```

这样，FontAwesome 将抓取图标，但所有非图标文本都将应用所需的字体。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-24T09:11:16.007

```
.fa-file-o {
    position: absolute;
    left: 50px;
    top: 15px;
    color: #ffffff
}

<div>
 <span class="fa fa-file-o"></span>
 <input type="button" name="" value="IMPORT FILE"/>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-15T11:42:51.073

新字体的简单方法真棒

```
 <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search" name="txtSearch"  >
                    <div class="input-group-btn">
                        <button class="btn btn-default" type="submit"><i class="fas fa-search"></i></button>
                    </div>
                </div> 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-11-12T10:03:06.943

要使用 unicode 或 fontawesome，您应该添加一个带有如下类的跨度，因为输入标签不支持像 :after 这样的伪类。这不是直接的解决方案

在 html 中：

```
 <span class="button1 search"></span>
<input name="username"> 
```

在 CSS 中：

```
.button1 {
    background-color: #B9D5AD;
    border-radius: 0.2em 0 0 0.2em;
    box-shadow: 1px 0 0 rgba(0, 0, 0, 0.5), 2px 0 0 rgba(255, 255, 255, 0.5); 
    pointer-events: none;
    margin:1px 12px;    
    border-radius: 0.2em;    
    color: #333333;
    cursor: pointer;
    position: absolute;
    padding: 3px;
    text-decoration: none;   

} 
```

# c - C char 数组比较

> ID：15988382
> 
> 赞同：1
> 
> 时间：2013-04-13T13:36:30.143
> 
> 标签：c

假设我有两个 char 数组

```
char names[] = { "Jen" , "Will" , "Smith" } ;
char names2[] = {"Sam" , "Will" , "Dave"}; 
```

并且我想检查两个数组是否在公共索引中具有公共元素，例如 names[] 和 names2[] 在位置 1 中都有单词“Will”（从零开始）

我正在尝试用这种方式

```
for(i = 0; i< 3; i++)
{
    if(strcmp(names[i],names2[i]) == 0)
    printf("Same");
} 
```

但我收到此错误“在预期字符串的位置找到字符”有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:39:50.937

`char []`是一个`char`数组，即一个字符串；你想要的是一个指向字符串文字的指针数组，所以它应该是：

```
const char * names[] = { "Jen" , "Will" , "Smith" } ;
const char * names2[] = {"Sam" , "Will" , "Dave"}; 
```

那么`strcmp`代码应该编译得很好。

请注意，如果您不得不使用用户提供的字符串（而不仅仅是字符串文字），您将不得不求助于`char * []`动态内存分配，或者求助于大型二维字符数组 ( `char names [STRNUM][STRMAXLENGHT]`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:40:17.303

通常在 c 中我们将字符串声明为 char name[] ，如果你正在创建字符串数组意味着你的声明应该是 char name[][]

# c# - Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles) 返回 x86

> ID：15988387
> 
> 赞同：1
> 
> 时间：2013-04-13T13:36:57.817
> 
> 标签：c#, .net, vb.net, directory

我正在尝试搜索可能位于“Program Files”或“Program Files (x86)”目录中的文件。但是，我找不到访问 64 位程序文件的方法。

`Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles)`返回 x86 版本。一个快速的谷歌搜索有很多人有这种冲突，人们使用它会得到不同的结果。

为什么我得到 x86 文件夹，以及如何应对它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T13:39:27.100

可能您以 32 位运行您的应用程序查看此讨论以获取返回 corectlly x86 程序文件目录的代码：[C# - 如何在 Windows 64 位上获取程序文件 (x86)](https://stackoverflow.com/questions/194157/c-sharp-how-to-get-program-files-x86-on-windows-vista-64-bit)

# mongodb - 在 Mongodb 中，如果 nscannedObjects = 集合中的总记录，这是否意味着完整的集合扫描？

> ID：15988388
> 
> 赞同：-1
> 
> 时间：2013-04-13T13:37:06.013
> 
> 标签：mongodb

解释方法给了我以下结果

```
{
    "cursor" : "BtreeCursor headers.From_1",
    "isMultiKey" : false,
    "n" : 83057,
    "nscannedObjects" : 120477,
    "nscanned" : 120477,
    "nscannedObjectsAllPlans" : 120581,
    "nscannedAllPlans" : 120581,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 250,
    "indexBounds" : {
    "headers.From" : [
        [
            {
                "$minElement" : 1
            },
            {
                "$maxElement" : 1
            }
        ]
    ]
    },
    "server" : "Andrews-iMac.local:27017"
} 
```

我的收藏中有 120477 条记录，这是否意味着我的查询执行了完整的收藏扫描？？

任何帮助是极大的赞赏 ！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T14:47:57.180

是的，这意味着所有文件都已扫描。

*   **83057 个**文档与您的查询匹配 ( `n`)
*   **扫描了 120477 个**文档（`nscanned`和`nscannedObjects`）

该[文档](http://docs.mongodb.org/manual/reference/explain/#core-explain-output)解释了解释输出中的字段。

相关部分在这里：

## 解释.n

> n 是一个数字，反映与查询选择条件匹配的文档数。

## 解释.nscanned

> 指定在数据库操作期间扫描的文档或索引条目的总数。您希望 n 和 nscanned 的值尽可能接近。nscanned 值可能高于 nscannedObjects 值，例如索引覆盖查询时。请参见 indexOnly。

# c++ - C++ 类输出

> ID：15988389
> 
> 赞同：0
> 
> 时间：2013-04-13T13:37:09.780
> 
> 标签：c++, class, object, output

我很想了解这个是如何工作的！

例如，如果我有此代码

```
class myclass

{
    public :

        int a;

        myclass(){a=0; cout<<"first"<<endl;}

        myclass(int i){a=i;cout<<"second"<<endl;}

        ~myclass(){cout<<a<<endl;}

};

class yourclass:protected myclass

{
    int x;
    myclass m1;

    public:

        myclass m2;

        yourclass (int i): m2(3),myclass(i){x=i; a=7;}

} 
```

我会做一个这样的对象

```
yourclass ob1(5); 
```

你能解释一下如何工作吗？如何调用构造函数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:02:09.760

当你像这样声明一个类的对象时`myclass`：

```
myclass ob1(5); 
```

这意味着您已经使用**第二个**接受`int`参数的构造函数创建了它。换句话说，您从字面上调用了**第二个**构造函数。顺便说一下，对象是在堆栈上创建的。

当你像这样声明一个类的对象时`myclass`：

```
myclass ob1; 
```

这意味着您已经使用第一个无参数的构造函数创建了**它**。无参数构造函数的正确术语是**默认**构造函数。换句话说，您从字面上调用了**默认**（**第**一个）构造函数。顺便说一句，对象也是在堆栈上创建的（如前一种情况）。

当对象在堆栈上创建时，它们会在对象**超出范围**时自动销毁。**范围**的概念适用于包括函数/方法/块的代码块**。**您可以通过一对大括号轻松区分块`{}`。例如：

```
void function() {
  myclass ob1;
} // <--- think of ob1 being destructed at this point 
```

当函数完成执行时，对象`ob1`将超出范围，因此`ob1`会**自动调用**析构函数 for 。另一个例子：

```
void function() {
  while(true) {
    myclass ob1;
  } // <--- think of ob1 being destructed at this point

  // ob1 does not exist here!
} 
```

注意无限循环和`ob1`每次迭代在其中创建的对象。您可以清楚地看到花括号定义了一个块，该块可以组合构成每次迭代的多个语句（当前只有 1 个语句）。因此，对象`ob1`将在每次迭代结束时自动销毁。

范围的概念也适用于类成员。例如，假设您有一个 class ，并且您通过以下方式`wrapper`声明`myclass`为它的成员 ( )：`m1`

```
class wrapper {
  public:
  myclass m1;
}; 
```

然后让我们以前面的示例之一并创建一个`wrapper`栈上的对象：

```
void function() {
  wrapper w;
} // <--- destructor of w called first, destructor of w.m1 is called after 
```

首先`w`开始执行默认构造函数，在此期间`w.m1`创建（在这种情况下使用默认构造函数，因为我没有在构造函数中指定要调用`w`哪个构造函数）。`w.m1`然后构造函数`w`执行完毕，`w`就可以认为是正式创建了。的执行`function`继续。

当`function`完成执行时，`w`超出范围，并且你还记得它的析构函数会被自动调用。一旦析构函数`w`完成执行，`w.m1`也会自动调用析构函数。你可以把它想象成一个对象`w`在它活着的时候有它自己的内部作用域，一旦它死掉，它的所有成员都会超出作用域并且也应该死掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:58:08.213

好的，我们放轻松，一步一步分析。

**头等舱**

```
class myclass {
public :
    int a;
    myclass(){a=0; cout<<"first"<<endl;}
    myclass(int i){a=i;cout<<"second"<<endl;}
    ~myclass(){cout<<a<<endl;}
}; 
```

这里我们定义了一个类`myclass`，它有一个`a`type的成员变量`int`。它声明了一个默认构造函数（没有参数），它分配给`a`，`0`然后继续 print `first`。

我们还有一个单参数构造函数，它初始化`a`到第一个参数并打印`second`，以及一个析构函数，它在释放之前简单地打印成员变量 a 的值。

**初始化列表**

现在，在构造函数中，您可以定义表单上的*初始化列表*

```
<class name>(...) a(x), b(y), c(z), ... {}
//                ^^^^^^^^^^^^^^^^^^^^^ 
```

当类的任何成员变量的类型没有可用的默认构造函数时，此*初始化列表是必需的。*假设我们创建一个`nogood`没有默认构造函数的类，并定义我们的主类有一个 type 的成员，`nogood`他将如何初始化该成员变量？您可以期望它等到构造函数主体被执行。

**二等舱**

```
class yourclass : protected myclass {
    int x; 
    myclass m1;
public:
    myclass m2;
    yourclass (int i): m2(3),myclass(i){x=i; a=7;}
}; 
```

现在你的类继承`protected`自`myclass`. 这是什么意思？这意味着无论 in`myclass`是公共的还是受保护的，都将受到保护`yourclass`（无论是私有的还是私有的）。

该类`yourclass`定义了两个私有成员`x`和`m1`一个公共成员`m2`。它没有为它定义任何默认构造函数，而是定义了一个参数构造函数（如果需要，它实际上也可以用于隐式转换为`int`）`yourclass`。

**输出：构造函数**

首先，它调用受保护的子对象的构造函数来生成`second`. 然后，由于我们没有`m1`显式初始化，它将使用默认构造函数对其进行初始化，生成输出`first`。最后在构造函数中，我们初始化`m2(3)`哪个类型`myclass`将调用`myclass::myclass(int)`生产`second`作为输出。所以输出是：

```
second
first
second 
```

**输出：析构函数**

现在对于析构函数调用，它将以与初始化相反的顺序为每个成员变量调用析构函数。初始化的顺序是：`m1`, `m2`. 逆序为`m2`, `m1`。`m2`在`3`初始化列表中`m1`被初始化`0`，默认情况下被初始化为。然后最后它调用`ob1`初始化为的析构函数`7`。因此最终输出为：

```
second
first
second
3
0
7 
```

# selenium - HTMLUNIT 驱动程序：完成此操作所需的数据尚不可用

> ID：15988391
> 
> 赞同：2
> 
> 时间：2013-04-13T13:37:35.110
> 
> 标签：selenium, playframework-2.0, htmlunit

我对 play 2.1.1 和 HTMLUNIT 驱动程序的 Scala fluentlenium 测试有疑问。

错误是下一个：

`[error] 2013-04-13 15:15:40,548 - c.g.h.j.StrictErrorReporter - runtimeError: message=[The data necessary to complete this operation is not yet available.] sourceName=[http://localhost:3333/assets/libs/jquery-1.9.1.js] line=[928] lineSource=[null] lineOffset=[0]`

与 jquery 1.7.1 相同。使用 FIREFOX 驱动（电脑上的 firefox 20）测试没问题，版本依赖为 fluentlenium-festassert 0.7.8

我认为这是由于 HTMLUNIT 的默认浏览器版本，但我不会来更改此版本。

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T06:36:46.700

好的，我找到了解决方案。你需要做两件事。更改代码 - 示例似乎不起作用，但您还需要安装 selenium 驱动程序，否则它不会安装 Web 浏览器的插件。为此，请将其添加到您的构建配置中：

```
 "org.seleniumhq.selenium" % "selenium-java" % "2.31.0" 
```

根据这里的讨论：[https ://groups.google.com/forum/?fromgroups=#!searchin/play-framework/browser$20tests/play-framework/AlJwpRfyXv0/Ry8Jsxj8mCcJ](https://groups.google.com/forum/?fromgroups=#!searchin/play-framework/browser%2420tests/play-framework/AlJwpRfyXv0/Ry8Jsxj8mCcJ)

然后，像这样的一些代码将起作用：

```
package Selenium

import org.specs2.mutable._
import play.api.test._
import play.api.test.Helpers._

class SeleniumTest extends Specification {

  val app = FakeApplication()
  "Application" should {

    "works from within a browser" in new WithBrowser(webDriver = Helpers.FIREFOX, app = app) {

      running(FakeApplication()) {
        browser.goTo("/")
        //browser.$("#title").getTexts().get(0) must equalTo("Welcome")
        browser.waitUntil[Boolean]{
          browser.pageSource contains ("Welcome")
        }

        //info(browser.$("#title").toString)
      }
    }
  }
} 
```

很遗憾，这没有更好的记录。

# javascript - Closure Compiler（高级模式）——如何设计类？

> ID：15988396
> 
> 赞同：0
> 
> 时间：2013-04-13T13:38:38.900
> 
> 标签：javascript, google-closure-compiler

我有一个大致具有这种结构的类：

```
function MyClass() {
    // constructur stuff
}

MyClass.prototype.myFunc = function () {
    // example function
};

MyClass.myStaticFunc = function () {
    // example static function
}; 
```

我现在花了一些时间设置闭包编译器注释，终于摆脱了所有警告。你知道吗，它把尺寸缩小了惊人的 100%。因此，我阅读了有关导出函数的信息，但`window['MyClass'] = MyClass`只会导出构造函数。老实说，我宁愿不单独导出每个方法。我认为编译器会导出而不是混淆所有公开可用的方法，但那些带有`@private`注释的方法。

教闭包编译器这样做而不需要单独导出每个方法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:02:27.437

使用`ADVANCED_OPTIMIZATIONS`您必须导出每个公共方法和属性。如果您不想重命名公共方法和属性，请使用`SIMPLE_OPTIMIZATIONS`.

有关更多详细信息，请参阅我的[哪个编译级别适合我](http://closuretools.blogspot.com/2012/09/which-compilation-level-is-right-for-me.html)的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:15:52.987

我相信我找到了答案：我可以`@export`用`--generate_exports`. 但也许有人有更好的方法。

# sql - 通过连接表从数据库中选择数据

> ID：15988401
> 
> 赞同：0
> 
> 时间：2013-04-13T13:38:59.643
> 
> 标签：sql, database, postgresql, servlets, many-to-many

我目前正在制作一个网站，用于为节日宣传汽车共享。我需要列出当前分配给用户的所有行程，但看到数据库关系将是多对多的，我不得不制作一个`client_trip`表格。

我的问题：
如何根据`trip`表格中的信息从表格中选择行程`client_trip`？

我目前正在使用 PostgreSQL 和 Java servlet。非常感谢您的帮助。:)

```
CREATE TABLE users
(
user_id SERIAL,
user_username VARCHAR (20),
user_firstname VARCHAR(20),
user_surname VARCHAR(20),
user_password VARCHAR(50),
user_email VARCHAR(100),
user_role VARCHAR(20),
PRIMARY KEY(user_id)
);

CREATE TABLE trips
(
trip_id SERIAL,
trip_name VARCHAR (100),
trip_user_username VARCHAR (50),
trip_festival_id SERIAL REFERENCES festivals(festival_id),
trip_festival_name VARCHAR(100),
trip_depart_date DATE,
trip_return_date DATE,
trip_spaces INT,
trip_cost Decimal (19,2),
trip_desc VARCHAR,
PRIMARY KEY(trip_id)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:43:13.287

> 我将如何根据我的 client_trip 中的信息从行程表中选择行程

给定`user_id`：

```
SELECT t.*
FROM   trips t
JOIN   client_trip ct USING (trip_id)
WHERE  ct.user_id = ?? 
```

# c# - How simply convert collection of one type to collection of another type

> ID：15988406
> 
> 赞同：1
> 
> 时间：2013-04-13T13:39:34.513
> 
> 标签：c#, .net

Lets say i have collection `IList<Items> items = GetItems();` I want to convert that collection in to collection of `MyDbSet<Items>`

MyDbSet declared like that: `public class MyDbSet<T> : IDbSet<T> where T : class`

How can i do that with the less amount of code, possibly it is better to go with linq?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:50:49.780

我认为除了循环源集合并调用`Add`您的`MyDbSet`类实例之外没有其他方法，但是它可以隐藏在自定义扩展方法中：

```
public static class MyEnumerable
{
    public static MyDbSet<T> ToMyDbSet<T>(this IEnumerable<T> source)
        where T : class
    {
        var collection = new MyDbSet<T>();

        foreach (var item in source)
            collection.Add(item);

        return collection;
    }
} 
```

用法：

```
IList<Items> items = GetItems();

MyDbSet<Items> itemsSet = items.ToMyDbSet(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:46:12.017

对于支持的集合，`ICollection<T>.Add`您可以编写一个这样的辅助方法：

```
public static TCollection CreateCollection<TCollection,TElement>(IEnumerable<TElement> seq)
    where TCollection:ICollection<TElement>, new
{
    var coll=new TCollection();
    foreach(var element in seq)
      coll.Add(element);
    return coll;
} 
```

使用如下：

```
var coll = CreateCollection<MyDbSet<T>, T>(seq); 
```

但就我个人而言，我宁愿写一个`AddRange(seq)`扩展方法，然后像这样使用它：

```
var coll = new MyDbSet<T>();
coll.AddRange(seq); 
```

# c++ - How can I use eclipse to build a GUI in C ? (I want to use only C and not JAVA)

> ID：15988408
> 
> 赞同：0
> 
> 时间：2013-04-13T13:39:47.250
> 
> 标签：c++, linux, windows, eclipse, user-interface

I have been using visual studio in the past now i have started with eclipse it is a good IDE

My question is: I want to know is there anything similar to WindowBuilder for eclipse but for C++ specific I want a widget toolkit that has drag and drop functionality that can be used inside eclipse for building GUI for my desktop apps

i want option both for GTK+, X and QT (QT is strange to me, I love GTK though)

Please also tell me if i can compile my GUI for Windows and linux both I have already installed MinGW for that I want something that works in the visual studio fashion but with eclipse as this is a cross-platform GUI

I want something that has drag and drop functionality for widgets in the perspective itself!!

also tell me (if such product exists) if i can compile that same program/GUI for other OS'es as well like for Mac, Windows and Linux/UNIX

and do i have to pre-install the GTK on the target environment?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:38:59.460

你需要格莱德。它是 GTK 的 GUI 构建器。它是一个独立的应用程序。您实际上并不需要将它与 eclipse 集成，因为它会生成一个 xml 文件，而您唯一需要做的就是加载该文件。我个人使用 Glade 2，一个生成 C 源代码的早期版本，以及应该与 eclipse 兼容的标准 make 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:09:56.507

您不需要 Eclipse 来开发 GTK 应用程序。您最好使用一个好的编辑器（`emacs`或`gedit`）来编辑您的源文件。

您也可以考虑使用`geany`.

如果您的 GTK 应用程序很小并且在一个源文件`foogtk.c`中，您可以使用一个命令编译它（在终端上），例如

```
 gcc -Wall -g foogtk.c $(pkg-config --cflags --libs gtk+-3.0) -o foogtk 
```

如果您的应用程序由多个源文件组成，请使用[GNU make之类的构建器](http://www.gnu.org/software/make/)

另请参阅[这个](https://stackoverflow.com/a/14030094/841108)和[那个](https://stackoverflow.com/a/13024567/841108)答案。

在同一个应用程序中混合 GTK 和 Qt 是不合理的。选择 GTK（使用 C）或 Qt（使用 C++）。

^(如果您真的想用 C++ 编写 GTK 应用程序，您可能希望使用 GTKmm 作为 GTK 的 C++ 包装器)

PS。如果问题是交互式设计 GUI 的工具，请考虑GTK的[glade和 Qt 的](http://glade.gnome.org/)[Qt Creator 和 Qt Designer](http://qt.digia.com/Product/Developer-Tools/)。

# .net - Mono.Cecil Instantiate dynamically created type

> ID：15988410
> 
> 赞同：1
> 
> 时间：2013-04-13T13:39:53.210
> 
> 标签：.net, mono.cecil

How do I create an instance of a type I've just created with AssemblyDefinition/TypeDefinition (I mean in runtime)? Currently, I save the created assembly as a file, read it with System.Reflection.Assembly.Load, find the type, find its constructor, and finally call the constructor.

Is there a way to do that entirely in memory without the temporary file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T14:00:17.757

您可以保存到内存流，然后从字节加载程序集。

# c++ - Code not compiling - ends up in xmemory

> ID：15988411
> 
> 赞同：1
> 
> 时间：2013-04-13T13:39:55.133
> 
> 标签：c++, vector

I just got started trying to learn how to code graphics using C++. When compiling a linear interpolation code, the code does not run and sends VC++ to the xmemory file. No errors or warnings given, thus leaving me with nothing to work on. What did I do wrong? I suspect the problem is connected to the way I assign the vectors, yet none of my changes have worked.

Here is the code:

```
#include "SDL.h"
#include <iostream>
#include <glm/glm.hpp>
#include <vector>
#include "SDLauxiliary.h"

using namespace std;
using glm::vec3;
using std::vector;

const int SCREEN_WIDTH = 640;
const int SCREEN_HEIGHT = 480;
SDL_Surface* screen;

void Draw();

void Interpolate( float a, float b, vector<float>& result ) {

    int i = 0;
    for ( float x=a;x < b+1; ++x )
    {
        result[i] = x;
        i = i + 1;
    }

}

void InterpolateVec( vec3 a, vec3 b, vector<vec3>& resultvec ) {
    int i = 0;    
    for (int add=0; add < 4; ++add) {
        float count1 = (b[add]-a[add])/resultvec.size() + a[add];
        float count2 = (b[add]-a[add])/resultvec.size() + a[add];
        float count3 = (b[add]-a[add])/resultvec.size() + a[add];

        resultvec[i].x = (count1, count2, count3);
        resultvec[i].y = (count1, count2, count3);
        resultvec[i].z = (count1, count2, count3);
        i = i + 1;
    }
}

int main( int argc, char* argv[] )
{
    vector<float> result(10); // Create a vector width 10 floats
    Interpolate(5, 14, result); // Fill it with interpolated values
    for( int i=0; i < result.size(); ++i )
        cout << result[i] << " "; // Print the result to the terminal

    vector<vec3> resultvec( 4 );
    vec3 a(1,4,9.2);
    vec3 b(4,1,9.8);
    InterpolateVec( a, b, resultvec );
    for( int i=0; i<resultvec.size(); ++i )
    {
        cout << "( "
        << resultvec[i].x << ", "
        << resultvec[i].y << ", "
        << resultvec[i].z << " ) ";
    }

    screen = InitializeSDL( SCREEN_WIDTH, SCREEN_HEIGHT );
    while( NoQuitMessageSDL() )
    {
        Draw();
    }
    SDL_SaveBMP( screen, "screenshot.bmp" );

    return 0;
}

void Draw()
{

    for( int y=0; y<SCREEN_HEIGHT; ++y )
    {

        for( int x=0; x<SCREEN_WIDTH; ++x )
        {
            vec3 color(1,0,1);
            PutPixelSDL( screen, x, y, color );
        }
    }

    if( SDL_MUSTLOCK(screen) )
        SDL_UnlockSurface(screen);

    SDL_UpdateRect( screen, 0, 0, 0, 0 );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:29:23.887

我不能对这个问题发表评论，所以我会写下我的想法作为答案。

```
 resultvec[i].x = (count1, count2, count3);
    resultvec[i].y = (count1, count2, count3);
    resultvec[i].z = (count1, count2, count3); 
```

看起来您（或您的库之一）重载`operator,`了`float`to make`vec2`和 after `vec3`。不错的解决方案，但如果我是对的，那么没有理由将每个组件分配给该值，并且您的代码将类似于：

```
 resultvec[i] = (count1, count2, count3); 
```

同样，这只是一个假设！我无法编译您的代码并查看错误。

另外我不明白你为什么使用`i`，这等于`add`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:01:31.753

奇怪的是你们中的一些人无法编译代码；可能是您尚未安装库（n00b 推测，是的......）。

因此，这是我为使其工作所做的工作（在这种情况下，代码越少越好，如第一条评论所述）：

```
void InterpolateVec( vec3 a, vec3 b, vector<vec3>& resultvec ) {
resultvec[0].x = a[0];
resultvec[0].y = a[1];
resultvec[0].z = a[2];

float count1 = (b[0]-a[0])/(resultvec.size() - 1);
float count2 = (b[1]-a[1])/(resultvec.size() - 1);
float count3 = (b[2]-a[2])/(resultvec.size() - 1);

for (int add=1; add < 5; ++add) {
    a[0] = a[0] + count1; 
    a[1] = a[1] + count2; 
    a[2] = a[2] + count3; 
    resultvec[add].x = a[0];
    resultvec[add].y = a[1];
    resultvec[add].z = a[2];
}
 } 
```

我发现（经过一个多小时......）是我不需要添加 count1、count2 和 count3；vec3 就是这样一种类型，添加 count1 可以达到我想要的效果；分配颜色（例如（0,0,1））。我是从那时起做的吗？我的词汇量不是我所知道的那种技术性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:46:16.203

或者，您可以节省一些时间，让我们`glm::vec3`去做`glm::vec3`应该做的事情。

同时; 在这里，有一个 cookie ( *cookie.png* )

```
void Interpolate(vec3 a, vec3 b, vector<vec3>& result) {  
    vec3 diffStep = (b-a) * (1.0f / (result.size() - 1)); // Operator overloading
    result[0] = vec3(a);                                   
    for(int i = 1; i < result.size(); i++) {
        result[i] = result[i-1] + diffStep;
    }

} 
```

# python - 用于出版质量图的 Python Pylab pcolor 选项

> ID：15988413
> 
> 赞同：6
> 
> 时间：2013-04-13T13:40:03.940
> 
> 标签：python, numpy, matplotlib, plot, wolfram-mathematica

我正在尝试`pcolor`在 python 中使用 DFT（离散傅立叶变换）图。我以前一直在使用 Mathematica 8.0 来执行此操作，但我发现 Mathematica 8.0 中的颜色条与我尝试表示的数据的一对一相关性很差。例如，这是我正在绘制的数据：

```
[[0.,0.,0.10664,0.,0.,0.,0.0412719,0.,0.,0.],
[0.,0.351894,0.,0.17873,0.,0.,0.,0.,0.,0.],
[0.10663,0.,0.178183,0.,0.,0.,0.0405148,0.,0.,0.],
[0.,0.177586,0.,0.,0.,0.0500377,0.,0.,0.,0.],
[0.,0.,0.,0.,0.0588906,0.,0.,0.,0.,0.],
[0.,0.,0.,0.0493811,0.,0.,0.,0.,0.,0.],
[0.0397341,0.,0.0399249,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.]] 
```

因此，它在 DFT 矩阵中有很多零或少量数字或少量高频能量。

当我使用mathematica 绘制它时，结果如下：

![使用mathematica 8.0的DFT图](https://i.stack.imgur.com/cOwMr.png)

彩条已关闭，我想我想用 python 来绘制它。我的python代码（我从[这里](http://glowingpython.blogspot.com/2012/10/visualizing-correlation-matrices.html)劫持的）是：

```
from numpy import corrcoef, sum, log, arange
from numpy.random import rand
#from pylab import pcolor, show, colorbar, xticks, yticks
from pylab import *

data = np.array([[0.,0.,0.10664,0.,0.,0.,0.0412719,0.,0.,0.],
[0.,0.351894,0.,0.17873,0.,0.,0.,0.,0.,0.], 
[0.10663,0.,0.178183,0.,0.,0.,0.0405148,0.,0.,0.],
[0.,0.177586,0.,0.,0.,0.0500377,0.,0.,0.,0.],
[0.,0.,0.,0.,0.0588906,0.,0.,0.,0.,0.],
[0.,0.,0.,0.0493811,0.,0.,0.,0.,0.,0.],
[0.0397341,0.,0.0399249,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.]], np.float)

pcolor(data)
colorbar()
yticks(arange(0.5,10.5),range(0,10))
xticks(arange(0.5,10.5),range(0,10))
#show()
savefig('/home/mydir/foo.eps',figsize=(4,4),dpi=100) 
```

这个python代码绘制为：

![python中的DFT图与pcolor](https://i.stack.imgur.com/J9wkK.png)

现在这是我的问题/问题列表：我喜欢python如何绘制这个并且想使用它但是......

1.  如何让所有代表“0”的“蓝色”消失，就像在我的数学图中一样？
2.  如何旋转绘图以使左上角有亮红色的点？
3.  我设置“dpi”的方式对吗？
4.  有什么有用的参考资料可以用来加强我对 python 的热爱吗？

我查看了此处的其他问题和 numpy 的用户手册，但没有找到太多帮助。

我计划发布这些数据，而且我把所有的点点滴滴都做好是相当重要的！`:)`

## 编辑：

修改后的python代码和结果图！有人会建议对此进行哪些改进以使其值得出版？

```
from numpy import corrcoef, sum, log, arange, save
from numpy.random import rand

from pylab import *

data = np.array([[0.,0.,0.10664,0.,0.,0.,0.0412719,0.,0.,0.],
[0.,0.351894,0.,0.17873,0.,0.,0.,0.,0.,0.],
[0.10663,0.,0.178183,0.,0.,0.,0.0405148,0.,0.,0.],   
[0.,0.177586,0.,0.,0.,0.0500377,0.,0.,0.,0.],
[0.,0.,0.,0.,0.0588906,0.,0.,0.,0.,0.],
[0.,0.,0.,0.0493811,0.,0.,0.,0.,0.,0.],
[0.0397341,0.,0.0399249,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.],
[0.,0.,0.,0.,0.,0.,0.,0.,0.,0.]], np.float)

v1 = abs(data).max()
v2 = abs(data).min()
pcolor(data, cmap="binary")
colorbar()
#xlabel("X", fontsize=12, fontweight="bold")
#ylabel("Y", fontsize=12, fontweight="bold")
xticks(arange(0.5,10.5),range(0,10),fontsize=19)
yticks(arange(0.5,10.5),range(0,10),fontsize=19)
axis([0,7,0,7])
#show()

savefig('/home/mydir/Desktop/py_dft.eps',figsize=(4,4),dpi=600) 
```

![改进了 python 代码的输出 DFT 图](https://i.stack.imgur.com/w1f5V.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T15:11:59.743

以下将使您更接近您想要的：

```
import matplotlib.pyplot as plt

plt.pcolor(data, cmap=plt.cm.OrRd)
plt.yticks(np.arange(0.5,10.5),range(0,10))
plt.xticks(np.arange(0.5,10.5),range(0,10))
plt.colorbar()
plt.gca().invert_yaxis()
plt.gca().set_aspect('equal')
plt.show() 
```

默认情况下可用的颜色图列表在[这里](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps)。你需要一个一开始是白色的。

![在此处输入图像描述](https://i.stack.imgur.com/9muYz.png)

如果这些都不适合您的需求，您可以尝试生成自己的，首先查看[`LinearSegmentedColormap`](http://matplotlib.org/api/colors_api.html#matplotlib.colors.LinearSegmentedColormap).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T16:02:34.530

仅作记录，在 Mathematica 9.0 中：

```
GraphicsGrid@{{MatrixPlot[l, 
    ColorFunction -> (ColorData["TemperatureMap"][Rescale[#, {Min@l, Max@l}]] &), 
    ColorFunctionScaling -> False], BarLegend[{"TemperatureMap", {0, Max@l}}]}} 
```

![在此处输入图像描述](https://i.stack.imgur.com/3eFmV.png)

# javascript - 无法引用 Javascript 文件

> ID：15988420
> 
> 赞同：-1
> 
> 时间：2013-04-13T13:40:44.127
> 
> 标签：javascript

我正在创建一个谷歌浏览器扩展并且我遇到了一些麻烦。我得到了一个目标文件，它代表了一个表格和他的动作。我的问题是，在我使用该对象后，有些东西会中断，并且脚本文件上没有代码运行。

**这是表单对象文件：**

```
/// <reference path="../Jquery1.6_vsdoc/ChromeExtenVSdoc.js" />
/// <reference path="../Jquery1.6_vsdoc/jquery-vsdoc.js" />

function FormInputObject() {

this.BusinessName = "";
this.ShortDesc = "";
this.LongDesc = "";
this.Location = "";
this.ContactName = "";
this.Telephone = "";
this.CellPhone = "";
this.FaxNumber = ""
this.Adress = "";
this.City = "";
this.BusinessEmail = "";
this.WebSiteAdress = "";
this.Keywords = "";

this.PrivateName = "";
this.PrivateTelepone = "";
this.PrivateEmail = "";

//get user data from the INPUT html
this.GetInputFormDocument = function (document) {

    this.BusinessName  = $("name");
    this.ShortDesc     = $("descriplittle");
    this.LongDesc      = $("descrip");
    this.Location      = $("area");
    this.ContactName   = $("contactman");
    this.CellPhone     = $("pelephone");
    this.FaxNumber     = $("fax");
    this.Adress        = $("adr");
    this.City          = $("city");
    this.BusinessEmail = $("email");
    this.WebSiteAdress = $("www");
    this.Keywords      = $("keywords");

    this.PrivateName     =  $("firstname1");
    this.PrivateTelepone =  $("phone1");
    this.PrivateEmail    =  $("email1");
}

this.ClearForm = function (document) {

    this.ShortDesc         .text("");
    this.LongDesc          .text("");
    this.Location          .text("");
    this.ContactName       .text("");
    this.CellPhone         .text("");
    this.FaxNumber         .text("");
    this.Adress            .text("");
    this.City              .text("");
    this.BusinessEmail     .text("");
    this.WebSiteAdress     .text("");
    this.Keywords          .text("");

    this.PrivateName       .text("");
    this.PrivateTelepone   .text("");
    this.PrivateEmail      .text("");
}

  //sending only the object fields
   this.sendFormFields = function (command) {
        chrome.extension.sendRequest(null,
            {
                input          : command            ,
                BusinessName   : this.BusinessName  ,
                ShortDesc      : this.ShortDesc     ,
                LongDesc       : this.LongDesc      ,
                Location       : this.Location      ,
                ContactName    : this.ContactName   ,
                CellPhone      : this.CellPhone     ,
                FaxNumber      : this.FaxNumber     ,
                Adress         : this.Adress        ,
                City           : this.City          ,
                BusinessEmail  : this.BusinessEmail ,
                WebSiteAdress  : this.WebSiteAdress ,
                Keywords       : this.Keywords      ,

                PrivateName       : this.PrivateName    ,   
                PrivateTelepone   : this.PrivateTelepone,
                PrivateEmail      : this.PrivateEmail
            },
             function (response) {

             });

   }

    //sending all of the object
   this.sendTheFormObject = function () {
       chrome.extension.sendRequest(null,
           {
               FormInputObject: this
           },
           function (response) {

           });
   }
} 
```

**这是我使用该对象的脚本文件：**

```
/// <reference path="../ChromeExtenVSdoc.js" />
/// <reference path="../Jquery1.6_vsdoc/jquery-vsdoc.js" />
/// <reference path="FormInputObject.js" />

//if i comment this line out, there is no problems and the alerts
//i call in the file run fine
var formInput = new FormInputObject();

$(document).ready(function () {

$("#sendData").click(null, function () {

    formInput.GetInputFormDocument(document);

    formInput.sendFormFields("justFillOutFourm");

});

$("#clearForm").click(null, function () {
    formInput.ClearForm(document);
    alert("asdf");

});
alert("asdf"); 
```

});

我确定我的对象有问题，但我不知道它是什么。（对不起我的英语不好）

编辑：这是如何引用 html 上的文件：

```
 <head>
    <title></title>
     <script src="../Jquery1.6_vsdoc/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="input_page.js" type="text/javascript"></script>
   </head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:53:15.553

`var formInput = new FormInputObject();`文件准备好后移动。还要确保您包含`jquery.js`，并且在任何其他需要它的 JS 之前包含它。

# php - 用于进度条的 imagecopy PHP 不起作用

> ID：15988428
> 
> 赞同：0
> 
> 时间：2013-04-13T13:41:44.763
> 
> 标签：php

我在使`imagecopy`函数在 PHP 中工作时遇到问题。

我什至不知道从哪里开始调试；图像对我来说是一种新的水果。

我有问题的部分：

```
imagecopy($png, $bgr, 0, 0, 0, 0, 0, 0, $width, $height);
        imagecopy($png, $bgr, 0, 0, 0, 0, 0, 0, imagesx($pbuble), imagesy($pbuble)); 
```

完整代码（我的计划是先复制在上面`$png <- $bgr <- $pbuble`）：

```
<?php
//Check for correct GET variables
if (is_numeric($_GET['max']) AND is_numeric($_GET['val'])) {
    $max = $_GET['max'];
    $val = $_GET['val'];
} else {return false;}

    //Create empty placeholder
    $png = imagecreate(380, 37);
    $black = imagecolorallocate($png, 0, 0, 0);
    imagecolortransparent($png, $black);

    //Create background image with transparency
    $bgr = imagecreatefrompng("progress-bgr.png");
        imageAlphaBlending($bgr, true);
        imageSaveAlpha($bgr, true);

    //Calculate width of progress bar atm
        $width = imagesx($bgr);
        $height = imagesy($bgr);

    $pb_width = $val * $width / $max;

    //Percentage buble
    $pbuble = imagecreatefrompng("percentage-bubble.png");
        imageAlphaBlending($pbuble, true);
        imageSaveAlpha($pbuble, true);

        $perct = $val * 100 / $max;
        $txt = $perct . "%";
        $txt_color = imagecolorallocate($pbuble, 255, 255, 255);
        $font = "dejavusans-webfont.ttf";
        $font_size = 7;

        $bbox = imagettfbbox($font_size, 0, $font, $txt);

        $x = $bbox[0] + (imagesx($pbuble) / 2) - ($bbox[4] / 2);
        //$y = $bbox[1] + (imagesy($pbuble) / 2) - ($bbox[5] / 2);

    imagettftext($pbuble, $font_size, 0, $x, 14, $txt_color, $font, $txt);

    //
    imagecopy($png, $bgr, 0, 0, 0, 0, 0, 0, $width, $height);
    imagecopy($png, $bgr, 0, 0, 0, 0, 0, 0, imagesx($pbuble), imagesy($pbuble));

//Output image
header("Content-type: image/png");
imagepng($png);
//
imagedestroy($png);
imagedestroy($bgr);
imagedestroy($pbuble);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:53:03.080

愚蠢的我 ：）

```
imagecopy($png, $bgr, 0, 0, 0, 0, 0, 0, $width, $height); 
```

有两个额外的参数。应该：

```
imagecopy($png, $bgr, 0, 0, 0, 0, $width, $height); 
```

# sms - Kannel 只发送 153 个字符

> ID：15988431
> 
> 赞同：1
> 
> 时间：2013-04-13T13:42:02.290
> 
> 标签：sms, concatenation, sms-gateway, kannel

目前正在做一些涉及 Kannel 的项目，但是我遇到了问题。

当我向 kannel 网关发送长短信时，它会接收短信的第一部分，然后使用 get-url 发送我的 php 脚本以添加到网站。然后第二部分被发送，同样的事情发生了。

有没有办法将完整的短信发送到网站？

非常感谢您的任何帮助。下面是我附加的 kannel.conf

```
group = core
admin-port = <snip>
admin-password = <snip>
status-password = <snip>
smsbox-port = <snip>
wdp-interface-name = "*"
log-file = "/var/log/kannel/bearerbox.log"
log-level = 0

group = smsc
smsc = at
modemtype = auto
device = /dev/ttyUSB1
speed = 9600
connect-allow-ip = 127.0.0.1

group = smsbox
bearerbox-host = 127.0.0.1
sendsms-port = <snip>
sendsms-chars = "0123456789 +-"
log-file = "/var/log/kannel/smsbox.log"
log-level = 0
access-log = "/var/log/kannel/access.log"
global-sender = <snip>
sms-length = 500

group = sendsms-user
username = <snip>
password = <snip>
concatenation = true

group = modems
id = huawei_e220
name = "Huawei_E220"
detect-string = "huawei"
message-storage = sm
speed = 9600

group = sms-service
keyword =
catch-all = 1
max-messages = 0
# trying this below
#assume-plain-text = true
concatenation = true
get-url =  "http://<snip>.net/inbound.php?phone=%p&text=%t"

# Ends 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:03:33.733

因此，问题本身与消息从承载箱到 smsc 和 smsbox 的路由有关。基本上我必须定义一个指向 smsbox 的 smsc 并且似乎可以修复它。但是，我目前没有要发布的代码，对于遇到此问题的其他人 - 请检查您的 smsc 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T15:02:06.440

尝试将以下设置添加到**核心**组以组合来自部件的 MO SM：

```
group = core
...
sms-combine-concatenated-mo = 1
sms-combine-concatenated-mo-timeout = 600 
```

如果这没有帮助 -使用调试级别（log-level = 0）将日志记录添加到您的**smsc部分，以查看来自 Kannel 的诊断。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:26:47.047

它可能与您的 GSM 调制解调器有关。如果我尝试使用真正的 SMSC 进行非常相似的配置，则消息会正确重组。此外，`get-url`对于您的`sms-service`组不正确 -`%t`是消息时间戳，如果您想要整个消息内容，您应该使用`%a`. （至少 Kannel 1.5.0 是这样。）

# xcode - 如何在 Xcode 4.6.x 中快速检查任意变量的值？

> ID：15988445
> 
> 赞同：9
> 
> 时间：2013-04-13T13:43:14.800
> 
> 标签：xcode, debugging, xcode4.6

似乎相当广泛地承认[在 Xcode 4.6.x](https://stackoverflow.com/questions/14760206/po-command-in-xcode-4-6-is-very-slow-the-first-time)[中使用该命令很慢`po`](https://stackoverflow.com/questions/14760206/po-command-in-xcode-4-6-is-very-slow-the-first-time)。有哪些选项可以检查编译时未指定的任意变量的值（排除使用`NSLog()`）不超过 15 秒？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:45:24.297

只需在要学习变量值的地方设置一个断点。一旦程序暂停，所有变量值的摘要将出现在`Varibles view`屏幕左下角。这是一个屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/4WaiQ.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:29:38.327

您可以使用 lldb 命令：

```
p (int) myInt
po myObject
po myObject.memberObject
p (float) myObject.floatMember 
```

请注意，您也可以在最新版本的 Xcode 中使用 p 代替 po。如果您运行`help -a`in llb，它将为您提供命令别名，下面是您可以使用的命令片段。

```
> (lldb) help -a  
p         -- ('expression --')  Evaluate a C/ObjC/C++ expression in the current
         program context, using user defined variables and variables
         currently in scope.  

po        -- ('expression -o  --')  Evaluate a C/ObjC/C++ expression in the
         current program context, using user defined variables and
         variables currently in scope  

print     -- ('expression --')  Evaluate a C/ObjC/C++ expression in the current
         program context, using user defined variables and variables
         currently in scope. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T14:50:54.510

原来答案很简单：下载 Xcode 4.6.2，LLDB 调试速度显着提高。[注意这里](https://stackoverflow.com/a/16174609/392653)的一些讨论

# c - 如何知道文件结尾？

> ID：15988447
> 
> 赞同：1
> 
> 时间：2013-04-13T13:43:42.833
> 
> 标签：c, ftp, client, transfer

我正在编写一个程序来在服务器和客户端之间传输文件。我在服务器中打开一个文件，然后我读取并发送每个字符直到 EOF。但问题出在客户端，我可以读取所有内容，但我无法停止循环，因为我无法发送字符“EOF.

有没有办法停止我的循环？

这是服务器端代码：

```
 while((read(file_fd, &c, 1)) > 0)
   {
     write(connection->socket_client, &c, 1);
   } //works 
```

客户端：

```
while ((i = read(connection->socket_server, &c, 1)) > 0)
write(file_fd, &c, 1); //it read everything but never stop 
```

# php - 我可以为模块和 CGI 安装使用相同的 PHP 代码吗

> ID：15988449
> 
> 赞同：0
> 
> 时间：2013-04-13T13:43:51.143
> 
> 标签：php, apache, cgi, cgi-bin, mod-php

一个简单而愚蠢的问题：

无论 PHP 是作为模块还是作为 cgi 二进制文件安装，我都可以使用完全相同的 PHP 代码吗？我知道这两种情况下的处理是不同的，但是 Apache 会完全为我处理它（前提是我在 httpd.conf 中进行了正确的设置）还是必须以某种方式反映在实际的 PHP 代码中？我可以将代码从 mod_php 解决方案移植到 cgi-bin 解决方案而不更改它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:45:52.823

除非 PHP 版本本身不同（5.4、5.3 等），否则无论安装的网络服务器软件如何，相同的代码块都将运行相同的代码。

# python - 如何使用python测试特定方法

> ID：15988451
> 
> 赞同：-4
> 
> 时间：2013-04-13T13:44:09.800
> 
> 标签：python, testing, plone

我想为登录页面编写一个测试。该方法是 check_input ，代码如下所示

```
def check_input(self):
    form = self.request.form
    username = form.get('name',"")
    password = form.get('password',"")
    session = getSession()
    error = ''
    print session
    if (username == '' and password == ''):
        error = "error: you must enter both username and password"          
    if (username!='') and(password == ''):
        error = "you must enter password"

    if (username and password) not in ['', None]:
        result = session.execute("select UserName,Password from membership where UserName='%s' && Password='%s' "%(username,password))
        if result:
            records = result.fetchall()
            if not records:
                error = 'username and password do not match'

    if not error:
        return self.template_success(name=username)
    else:
        return self.template(error = error) 
```

我要测试的是是否输入了用户名和密码，并且我想检查他/她是否提供密码。我想检查这个方法是否正确。告诉我我想在终端中进行测试的必要事项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:00:15.290

你很幸运，因为 Plone 确实有一个你应该使用的测试框架。

[https://ploneapptesting.readthedocs.org/en/latest/](https://ploneapptesting.readthedocs.org/en/latest/)

# javascript - 如何更改 d3 中圆的半径和不透明度？

> ID：15988455
> 
> 赞同：12
> 
> 时间：2013-04-13T13:44:50.610
> 
> 标签：javascript, d3.js, visualization, data-visualization

我正在d3中进行可视化。它涉及在地图上的国家上绘制圆圈，然后缩放圆圈的大小以与有关这些国家的数据相对应。我想随着圆的半径变大而改变不透明度，但是我的代码不起作用，尽管进行了大量的实验和调整。有人可以指出我在这里缺少什么吗？

我将在下面发布整个代码，以防万一。向下滚动到 showJan 函数以查看我尝试过的操作（不起作用）。提前谢谢了。

```
<div id="viz">
</div>

<div id="cal">
</div>
<a href='#' class='jan'>January</a>
<a href='#' class='feb'>February</a>
<a href='#' class='mar'>March</a>
<a href='#' class='apr'>April</a>
<a href='#' class='may'>May</a>
<a href='#' class='june'>June</a>
<a href='#' class='july'>July</a>
<a href='#' class='aug'>August</a>
<a href='#' class='sept'>September</a>
<a href='#' class='oct'>October</a>
<a href='#' class='nov'>November</a>
<a href='#' class='dec'>December</a>

<script>
  var height = 530;
  var width = 860;
  var svg = d3.select('#viz').append('svg')
                                .attr('height', height)
                                .attr('width', width)

  var countriesData = window.countriesData;
  // This is a big list of all the countries in the world 
  // in a format that d3 likes

  // The skyscanner flight data.
  var sizeData = window.skyscanner;

  // A scale to manage the size of the circles.
  var rScale = d3.scale.log();
  rScale.domain([1, 50000]).range([1, 100])

  // A scale to manage the opacity of the circles.
  var oScale = d3.scale.log();
  oScale.domain([1, 50000]).range([.6, 0])

</script>

<script>
  // Setup a mercator projection
  // A projection is a bit like a scale except it maps 
  // latitudes and longitudes to pixels
  // There are a lot of projections:
  // https://github.com/mbostock/d3/wiki/Geo-Projections

  var projection = d3.geo.mercator()
                           .scale(880)
                           .translate([410, 340])

  // Setup a geo path
  // A path is a magical path drawer, that can take things
  // listed in a geo format called geojson (lots of geo data
  // is formatted like this) and draws those shapes onto your
  // projection

  var path = d3.geo.path().projection(projection)

  // Take our loaded big list of countries and draw it
  // using our path
  //
  // All countries are under a 'countries' group
  // to make them easier to work with
  //
  // The 'path' element is just 
  // a freeform path that joins points to make a shape.
  //
  // The 'path' generator that we pass to .attr('d', path) takes
  // the geo data and draws a path

  var countries = svg.append('g') // make a group to hold them all

  countries.selectAll('path')
              .data(countriesData.features)
              .enter()
              .append('path')
              .attr('d', path) // uses our path to draw the countries

  function calculateCountryCenter(country) {
    var coords;

    //If the country has more than one bounding region (like the usa has
    //the main usa, alaska and hawaii, use the first one)
    //Otherwise just use the only list
    if (country.geometry.coordinates.length > 1) {

        console.log("length " + country.geometry.coordinates.length);
        console.log("name " + country.name);
        console.log("size of first region " + country.geometry.coordinates[0].area);

        for (index = 0; index < country.geometry.coordinates.length; index++) {
        console.log(country.geometry.coordinates[index].area)
        }

        coords = country.geometry.coordinates[0][0]; 

    } else {
        coords = country.geometry.coordinates[0];
    }

    var averageCoords = [0,0];
    coords.forEach(function(coord) {
      averageCoords[0] += coord[0]
      averageCoords[1] += coord[1]
    });

    averageCoords[0] = averageCoords[0] / coords.length
    averageCoords[1] = averageCoords[1] / coords.length
    return averageCoords;
  }

  var countryCirclesGroup = svg.append('g') // a group to hold our circles

  // Bind the data to the country circles group. Bind on country id (see json file)
  var countryCircles = countryCirclesGroup.selectAll('circle')
                        .data(countriesData.features, function(country) 
                        { return country.id })

  // Enter a circle for each data point, with pos. at x and y coords.   
  countryCircles.enter().append('circle')
                  .attr('r', 0)
                  .attr('cx', function(country) {
                    var center = calculateCountryCenter(country);
                    return projection(center)[0] // return x coord of mapped center
                  })
                  .attr('cy', function(country) {
                    var center = calculateCountryCenter(country);
                    return projection(center)[1] // return y coord of mapped center
                  })
                  .style('fill', 'black')
                  .style('opacity', .15)
                  .on('click', function(country) { alert(country.properties.name) })

    // Functions for the month buttons.
    function showJan() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Jan + 1) })
                .style('opacity', function(dataPoint) { return oScale(dataPoint.Jan + 1) })
    }

    function showFeb() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Feb + 1) })                
    }

    function showMar() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Mar + 1) })    
    }   

    function showApr() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Apr + 1) })
    }       

    function showMay() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.May + 1) })
    }  

    function showJune() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Jun + 1) })
    }

    function showJuly() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Jul + 1) })
    }                   

    function showAug() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Aug + 1) })
    }   

    function showSept() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Sep + 1) })
    }   

    function showOct() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Oct + 1) })
    }   

    function showNov() {

        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Nov + 1) })
    }

    function showDec() {

        // This sets the circles with size data as a certain size and as red.
        countryCirclesGroup.selectAll('circle')
            .data(sizeData, function(dataPoint) { return dataPoint.name })
                .transition().duration(1000)
                .attr('r', function(dataPoint) { return rScale(dataPoint.Dec + 1) })
    }       

  // A reset function for debugging help. Rewrite to show Jan sizes.
  function reset() {
        countryCirclesGroup.selectAll('circle')
            .data(sizeData)
            .transition().duration(1000)
            .attr('r', 0)
  }                     

  d3.select('a.jan').on('click', showJan)
  d3.select('a.feb').on('click', showFeb)
  d3.select('a.mar').on('click', showMar)
  d3.select('a.apr').on('click', showApr)
  d3.select('a.may').on('click', showMay)
  d3.select('a.june').on('click', showJune)
  d3.select('a.july').on('click', showJuly)
  d3.select('a.aug').on('click', showAug)
  d3.select('a.sept').on('click', showSept)
  d3.select('a.oct').on('click', showOct)
  d3.select('a.nov').on('click', showNov)
  d3.select('a.dec').on('click', showDec)

</script>

<script>
    //Don't delete this
    reset();
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T16:46:31.650

在`transition`and之后`duration`，您必须更新将要更改的属性。代码示例：

```
var svg = d3.select("body").append("svg");

svg
  .attr('id','mySVG')
  .attr('width', '100%')
  .attr('height', '100%');

// Set the initial properties of the circles
var circle = svg.selectAll('circle')
    .data([2, 5, 8])
    .enter()
    .append('circle')
        .attr('cx', function(item) { return item; })
        .attr('cy', function(item) { return item; })
        .attr('r', 0)
        .attr('fill', '#babdb6');

// Update the attributes that will change
circle
    .transition()
    .duration(2000)
        .attr('fill-opacity', 0.2)
        .attr('r', function(item) { return 100 * item; }); 
```

我写了一个可以帮助你的最小例子。[http://jsfiddle.net/pnavarrc/udMUx/](http://jsfiddle.net/pnavarrc/udMUx/)。

# c# - 在 MVC 4 的部分视图中使用 PagedList 在导航“分页”页面时会抛出 jQuery/JS

> ID：15988457
> 
> 赞同：2
> 
> 时间：2013-04-13T13:44:59.407
> 
> 标签：c#, jquery, asp.net-mvc, razor, asp.net-mvc-4

我刚刚在我的 MVC 4 应用程序中使用 PagedList 实现了分页。我的应用程序的主页包含一个局部视图，显示有关某些对象的汇总数据列表。每个列表项旁边都有一个按钮，单击该按钮会启动一个模式窗口，显示有关该特定列表项的更多信息。

在列表项的第一个“分页”页面上一切正常，但是如果我导航到第二个“分页”页面并单击按钮启动模式，则没有任何反应。从 Chrome 中的开发人员工具中，我得到`Uncaught TypeError: Object [object Object] has no method 'modal'`.

有问题的部分输出列表，包含模式的 DIV 和一个用于处理启动模式窗口的按钮单击事件的 JS 函数。这是该部分视图中的 JS：

```
<script type="text/javascript">
$(document).ready(function () {
    $('.show-modal').click(function () {
        var url = $('#modal-view-property-from-get-all').attr('data-url');
        var id = $(this).attr('data-id');

        $.get(url + '/' + id, function (data) {
            $('#view-property-from-get-all-container').html(data);
            $('#modal-view-property-from-get-all').modal('show');
        });
    });
});
</script> 
```

当我导航回第一个“分页”页面时，按钮也不会触发，并且会抛出相同的未捕获 typeError。我使用的另一个截断多行文本的 jQuery 插件也停止工作，并且文本溢出其包含的 DIV。

1.  这里实际发生了什么——为什么使用分页会像这样干扰 JS？
2.  我该如何解决这个问题？

**编辑：**

特定类型的所有记录都从控制器操作返回：

```
return PartialView("_GetAllPropertiesPartial", model.ToPagedList(pageNumber, pageSize)); 
```

由于它是部分的，因此分页导航由以下方式处理`Ajax.ActionLinks()`：

```
@Ajax.ActionLink("<<", "GetAllProperties", new { page = 1 }, new AjaxOptions { UpdateTargetId = "quick-property-search-results" }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:32:32.763

您需要将事件处理程序绑定到标记中未替换的内容，并使用`.on()`方法而不是`.click()`，如下所示：

```
<script>
$(function () {
    $('body').on('click', '.show-modal', function (e) {
        var url = $('#modal-view-property-from-get-all').attr('data-url');
        var id = $(this).attr('data-id');

        $.get(url + '/' + id, function (data) {
            $('#view-property-from-get-all-container').html(data);
            $('#modal-view-property-from-get-all').modal('show');
        });
    });
});
</script> 
```

`body`如果你有一个你知道不会被替换的父元素，你可以使用其他东西。还值得注意的是，您可以使用`.load()`：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

```
$('#view-property-from-get-all-container').load(url + '/' + id, function (response, status, jqxhr) {
    // this is an optional callback
    $('#modal-view-property-from-get-all').modal('show');
}); 
```

# php - PHP、正则表达式和 preg_match

> ID：15988458
> 
> 赞同：1
> 
> 时间：2013-04-13T13:45:02.367
> 
> 标签：php, regex

我正在尝试从下面的字符串中提取与给定正则表达式匹配的子字符串：

“Lorem ipsum dolor sit amet。Lorem `<xy:abc_ref d_id="1234">`ipsum dolor sit amet。Lorem ipsum dolor sit amet。`<xy:abc_ref d_id="1234">`”

正则表达式确实符合预期。但是，由于某种原因，我只能访问第一个解析值。即使计数器 (count($matches)) 表明有两个结果，请参阅输出。

```
$value = 'Lorem ipsum dolor sit amet. <xy:abc_ref d_id="1234">Lorem ipsum dolor sit amet. <xy:abc_ref d_id="5678">Lorem ipsum dolor sit amet.<xy:abc_ref d_id="1234">'; 
```

来源：

```
function test($value)
{
    $RegEx = '/<xy:abc_ref ([^>]{0,})>/';       
    $n = preg_match($RegEx,$value,$matches);
    print("Results count: " . count($matches)."<br>");
    print("matches[0]: " . $matches[0]."<br>");
    print("matches[1]: " . $matches[1]."<br>");
    print("matches[2]: " . $matches[2]."<br>");
}
echo test($value); 
```

输出：

```
Results count: 2
matches[0]:
matches[1]: d_id="1234"
matches[2]: 
```

谢谢， LG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:47:44.527

您必须[`preg_match_all`](http://www.php.net/manual/en/function.preg-match-all.php)改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T13:47:17.500

使用[preg_match_all](http://php.net/preg_match_all)获取所有匹配项。preg_match 只会返回第一个匹配项。Count 将返回两个，因为您捕获了一个组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:57:04.617

```
function test($value)
{
    $RegEx = '/<xy:abc_ref ([^>]{0,})>/';       
    $n = preg_match_all($RegEx,$value,$matches);
    print("Results count: " . count($matches[1])."<br>");
    print("matches[0]: " . $matches[1][0]."<br>");
    print("matches[1]: " . $matches[1][1]."<br>");
    print("matches[2]: " . $matches[1][2]."<br>");
} 
```

# javascript - 在javascript中解析具有未知字段名称的json数组

> ID：15988459
> 
> 赞同：0
> 
> 时间：2013-04-13T13:45:05.447
> 
> 标签：javascript, jquery, json

我在 StackOverflow 上发现了很多关于解析 json 数组的线程，但我似乎无法弄清楚如何取回一些数据。这是我所拥有的...

```
 $('#keyword_form').submit(function(e){  
        var gj = $.post('employee_search.php',$('#keyword_form').serialize(),function(data){                
            if(!data || data.status !=1 )
            {
                alert(data.message);
                return false;
            }
            else
            {
                alert(data.message);
            }
        },'json');  
        e.preventDefault();

    }); 
```

发送给它的 json 数据看起来像这样......

```
{
    "status":1,
    "message":"Query executed in 9.946837 seconds.",
    "usernames_count":{
        "gjrowe":5,
        "alisonrowe":4,
        "bob":"1"
    }
} 
```

正如我的功能所示，我可以做`alert(data.message);`，但我怎样才能访问`usernames_count`数据？

我的困惑来自数据没有名称/标签的事实。`bob`是用户名，`1`是与该用户名关联的返回计数

如果我这样做，`alert(usernames_count);`我会回来`[object Object]`

如果我这样做，`alert(usernames_count[0]);`我会回来`undefined`

我确定我应该做点什么，`JSON.parse();`但我还没有做对

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T13:51:22.773

您可以使用[Object.keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)或[for...in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环 - 请记住在这种情况下使用[hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)：

```
var users = data.usernames_count;
Object.keys(users).forEach(function(user) {
    console.log(user, users[user]);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T13:49:35.603

尝试这个：

```
$.each(data.usernames_count, function(username, val) {
    alert(username+" has a value of "+val);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T13:52:41.570

听起来您的问题是如何迭代`usernames_count`对象中的条目。你可以这样做：

```
var key = '';
for(key in data.usernames_count) {

    //check that this key isn't added from the prototype
    if(data.usernames_count.hasOwnProperty(key) {
        var value = data.usernames_count[key];

        //do something with the key and value
    }
} 
```

# ios - CALayers 从不称其为委托的 drawLayer:inContext: 即使在 [layer setNeedsDisplay] 和 [layer display] 之后

> ID：15988460
> 
> 赞同：9
> 
> 时间：2013-04-13T13:45:23.540
> 
> 标签：ios, objective-c, core-animation, core-graphics, calayer

我不明白为什么我正在创建的 CALayer 没有调用他们的 drawLayer 方法。我为他们创建了一个 drawLayer 委托对象，但它永远不会被调用。从 UIView 子类：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

       UIView *bg = [[UIView alloc] initWithFrame:self.bounds];
       // I have a property called 'bg' to reference the child UIView
       self.bg = bg;
       [self addSubview:self.bg];

       // an NSObject subclass I use as a CALayer delegate
       MyLayerDelegate *drawer = [MyLayerDelegate new];
       self.drawer = drawer;

       CAGradientLayer *layer = [CAGradientLayer layer];;
       layer.delegate = self.drawer;
       layer.name = @"bg";

       [self.bg.layer addSublayer:layer];

       [layer setNeedsDisplay];
       [layer display];

    }
    return self;
} 
```

在 self.drawer 我有：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)context
{
    NSLog(@"layer called drawLayer");
    // Some drawing goes here
} 
```

我尝试了很多不同的东西。我尝试在 self.bg.layer 上设置 setNeedsDisplay，我在 self.bg 上尝试过 setNeedsDisplay，我在 addSublayer 之前和之后尝试过 [layer setNeedsDisplay]，我在 addSublayer 之前和之后尝试过 [layer display]。我尝试过使用和不使用 [layer display] 和 [layer displayIfNeeded]。

为什么图层拒绝绘制？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T14:07:34.617

层框架需要非零。这解决了问题：

```
layer.frame = self.bg.bounds;
[layer setNeedsDisplay];
[self.bg.layer addSublayer:layer]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T13:49:00.090

你有没有在你的 Layer 的委托中实现这个方法？如果是，您的图层委托的这个方法将被调用。

```
- (void)displayLayer:(CALayer *)layer 
```

如果您阅读了 Apple 的 setNeedsDisplay 文档，它清楚地表明

```
Calling this results in the layer potentially calling either the displayLayer: or drawLayer:inContext: method of its delegate. 
```

如果您不想直接设置图层的内容，而是想绘制图层的内容，则不应实现 displayLayer。然后，您可以在 drawLayer:inContext: 方法中进行绘图，该方法应该被调用。

# ios - stringbyevalatingjavascriptstring 从下拉列表中

> ID：15988463
> 
> 赞同：0
> 
> 时间：2013-04-13T13:45:34.207
> 
> 标签：ios, objective-c, webview

我正在尝试使用填充有分段控制器的 web 视图从 html 下拉列表中获取值。

谁知道怎么输入

```
 NSString *string [NSString stringWithFormat:@"document.getElementsBy 
```

对于以下 html 代码并选择选项值之一

```
<div id="loginselect" style="clear:both:">
            <select name="usertype" size="1"  id="usertype" class="select1" >     
<option value="0"  selected="selected">Staff</option>
<option value="1" >Student</option>
<option value="2" >Parent</option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:30:49.297

```
document.getElementByID('usertype').value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:06:07.937

Sixcent 的答案给出了正确的答案。我只需要添加这样的值：

```
document.getElementById('usertype').value='1' 
```

# bash - 字符串变量/通过引用而不是值复制的 Bash 别名

> ID：15988469
> 
> 赞同：2
> 
> 时间：2013-04-13T13:46:23.367
> 
> 标签：bash, variables

考虑以下 Bash 脚本：

`$ A=35
$ echo $A
35
$ B=$A
$ echo $B
35
$ B=43
$ echo $B
43
$ echo $A
35`

我声明了一个变量`A`，为其赋值`35`，使其`B`等于`A`，并将值`43`赋给`B`。在这一切之后似乎`A`保留了该值`35`，所以我猜当您将 bash 中的一个变量分配给另一个变量时，它是按值复制，而不是按引用复制。

我想要做的是 change`B`的值并将其反映在`A`（通过引用复制）。或者，在我的实际情况下，我根本不想产生按值复制的内存开销，因为我知道它是一个大变量并且不想在内存中存储两次。有没有办法在 Bash 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:56:22.680

您可以使用引用另一个变量

```
$ a=42
$ reference=a
$ echo ${!reference}
42 
```

更改引用变量的值

```
$ eval ${reference}=4
$ echo ${!reference}
4
echo $a
4 
```

# jpa - 用于分层数据的动态 JPA CriteriaBuilder

> ID：15988471
> 
> 赞同：1
> 
> 时间：2013-04-13T13:46:32.753
> 
> 标签：jpa, eclipselink

我有一个分层数据结构如下其中节点映射到父节点如下：

```
@Entity
public class Node implements Serializable { 
    @Id
    private long id;

     @Column(name="PARENT_ID")
     private Long parentId;

    @OneToMany    
    @JoinColumn(name="PARENT_ID")    
    public List<Node> children = new LinkedList<Node>();

} 
```

例如，假设我有以下数据：

```
 [A]
          / \
         /   \
        /     \
     [B]      [C]
     / \        \
    /   \        \
  [D]   [E]      [F]
          \
           \
           [G] 
```

现在我想在 JPA CriteriaBuilder 中构建一个动态查询，它可以查询任何节点并返回其子节点的结果。例如，如果我查询 B，我会得到以下结果：

*   乙
*   D
*   乙
*   G

而且，如果我查询 E，我得到：

-E -G

等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T07:06:59.047

由于我使用 SQL Server 2012 作为我的数据库，因此我使用了 with 子句，如下所示：

假设 [E] 节点 id 为 8：

**从上到下：**

```
WITH NODE_TREE AS(
     SELECT N.ID, N.PARENT_ID FROM NODE_TABLE N WHERE N.ID = 8
     UNION ALL
     SELECT N.ID, N.PARENT_ID FROM NODE_TABLE N
     INNER JOIN NODE_TREE NT
     ON N.ID = NT.PARENT_ID
)

SELECT * FROM NODE_TREE; 
```

这将返回一个从上到下的节点列表：

B、E、D、G

**从下到上：**

```
WITH NODE_TREE AS(
     SELECT N.ID, N.PARENT_ID FROM NODE_TABLE N WHERE N.ID = 8
     UNION ALL
     SELECT N.ID, N.PARENT_ID FROM NODE_TABLE N
     INNER JOIN NODE_TREE NT
     ON N.PARENT_ID = NT.ID
)

SELECT * FROM NODE_TREE; 
```

这将返回一个从下到上的节点列表：

乙，甲

# php - Symfony2/3：mongodb 的文档管理器问题

> ID：15988477
> 
> 赞同：10
> 
> 时间：2013-04-13T13:46:54.773
> 
> 标签：php, mongodb, symfony

通过composer.json安装symfony2和mongodb后（安装成功）。但是，当我执行应用程序时，我收到以下错误消息：

```
InvalidArgumentException: Unable to replace alias "doctrine_mongodb.odm.document_manager" with "doctrine.odm.mongodb.document_manager". 
```

这是我的composer.json：

```
"require": {
    "php": ">=5.3.3",
    "symfony/symfony": "2.2.*",
    "doctrine/orm": "~2.2,>=2.2.3",
    "doctrine/doctrine-bundle": "1.2.*",
    "twig/extensions": "1.0.*",
    "symfony/assetic-bundle": "2.1.*",
    "symfony/swiftmailer-bundle": "2.2.*",
    "symfony/monolog-bundle": "2.2.*",
    "sensio/distribution-bundle": "2.2.*",
    "sensio/framework-extra-bundle": "2.2.*",
    "sensio/generator-bundle": "2.2.*",
    "jms/security-extra-bundle": "1.4.*",
    "jms/di-extra-bundle": "1.3.*",
    "doctrine/mongodb-odm-bundle": "3.0.*"
}, 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-01T14:58:57.363

您必须将教义 mongodb 配置添加到**app/config/config.yml**

```
doctrine_mongodb:
    connections:
        default:
            server: mongodb://localhost:27017
            options: {}
    default_database: kickass
    document_managers:
        default:
            auto_mapping: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:15:12.677

您的 composer.json 还应该包含以下这一行，以安装实际的 ODM 库。这将解决您的问题

```
"doctrine/mongodb-odm": "1.0.*@dev", 
```

# java - 如何使用 docx4j 将图像 rel 添加到我的 pptx 幻灯片

> ID：15988482
> 
> 赞同：0
> 
> 时间：2013-04-13T13:47:29.877
> 
> 标签：java, image, powerpoint, generator, docx4j

有人知道如何将一张图片引用到任何数量的幻灯片。我知道如何将图像添加到一张幻灯片，例如它的工作原理：

```
BinaryPartAbstractImage imagePart 
        = BinaryPartAbstractImage.createImagePart(presentationMLPackage, slidePart, file);
.....
  mappings.put("rEmbedId", imagePart.getSourceRelationship().getId() );
  Object o = org.docx4j.XmlUtils.unmarshallFromTemplate(SAMPLE_PICTURE, 
            mappings, Context.jcPML, Pic.class ) ;        
  Part.getJaxbElement().getCSld().getSpTree().getSpOrGrpSpOrGraphicFrame().add(o); 
```

我尝试为另一张幻灯片做同样的工作 - 它有效，但在 pptx/media 文件夹中创建了相同的图像。如果我使用`imagePart`which created for`slidePart1`并添加`slidePart2`对其执行的引用，但是当我尝试通过 PoverPoint 打开 pptx 时会出现错误。

我需要它，因为我用 docx4j 创建了 pptx 生成器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:09:46.693

在第二张幻灯片上，您需要明确添加指向图像的关系。（BinaryPartAbstractImage.createImagePart 会为您自动为第一张幻灯片执行此操作）。

这是示例代码：

```
import java.io.File;

import javax.xml.bind.JAXBException;

import org.apache.log4j.Logger;
import org.docx4j.openpackaging.packages.PresentationMLPackage;
import org.docx4j.openpackaging.parts.PartName;
import org.docx4j.openpackaging.parts.PresentationML.MainPresentationPart;
import org.docx4j.openpackaging.parts.PresentationML.SlideLayoutPart;
import org.docx4j.openpackaging.parts.PresentationML.SlidePart;
import org.docx4j.openpackaging.parts.WordprocessingML.BinaryPartAbstractImage;
import org.docx4j.relationships.Relationship;
import org.pptx4j.jaxb.Context;
import org.pptx4j.pml.Pic;

public class InsertPicture  {

    protected static Logger log = Logger.getLogger(InsertPicture.class);

    public static void main(String[] args) throws Exception {

        // Where will we save our new .pptx?
        String outputfilepath = System.getProperty("user.dir") + "/pptx-picture.pptx";

        // Create skeletal package, including a MainPresentationPart and a SlideLayoutPart
        PresentationMLPackage presentationMLPackage = PresentationMLPackage.createPackage(); 

        // Need references to these parts to create a slide
        // Please note that these parts *already exist* - they are
        // created by createPackage() above.  See that method
        // for instruction on how to create and add a part.
        MainPresentationPart pp = (MainPresentationPart)presentationMLPackage.getParts().getParts().get(
                new PartName("/ppt/presentation.xml"));     
        SlideLayoutPart layoutPart = (SlideLayoutPart)presentationMLPackage.getParts().getParts().get(
                new PartName("/ppt/slideLayouts/slideLayout1.xml"));

        // OK, now we can create a slide
        SlidePart slidePart = presentationMLPackage.createSlidePart(pp, layoutPart, 
                new PartName("/ppt/slides/slide1.xml"));

        // Add image part
        File file = new File(System.getProperty("user.dir") + "/src/test/resources/images/greentick.png" );
        BinaryPartAbstractImage imagePart 
            = BinaryPartAbstractImage.createImagePart(presentationMLPackage, slidePart, file);

        // Add p:pic to slide
        slidePart.getJaxbElement().getCSld().getSpTree().getSpOrGrpSpOrGraphicFrame().add(
                createPicture(imagePart.getSourceRelationship().getId()));

        // Do it again on another slide
        SlidePart slidePart2 = presentationMLPackage.createSlidePart(pp, layoutPart, 
                new PartName("/ppt/slides/slide2.xml"));
        Relationship rel = slidePart2.addTargetPart(imagePart);

        slidePart2.getJaxbElement().getCSld().getSpTree().getSpOrGrpSpOrGraphicFrame().add(
                createPicture(rel.getId()));

        // All done: save it
        presentationMLPackage.save(new java.io.File(outputfilepath));

        System.out.println("\n\n done .. saved " + outputfilepath);

    }   

    private static Object createPicture(String relId) throws JAXBException {

        // Create p:pic         
        java.util.HashMap<String, String>mappings = new java.util.HashMap<String, String>();

        mappings.put("id1", "4");
        mappings.put("name", "Picture 3");
        mappings.put("descr", "greentick.png");
        mappings.put("rEmbedId", relId );
        mappings.put("offx", Long.toString(4214812));
        mappings.put("offy", Long.toString(3071812));
        mappings.put("extcx", Long.toString(714375));
        mappings.put("extcy", Long.toString(714375));

        return org.docx4j.XmlUtils.unmarshallFromTemplate(SAMPLE_PICTURE, 
                mappings, Context.jcPML, Pic.class ) ;   

    }

    private static String SAMPLE_PICTURE =          
          "<p:pic xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:p=\"http://schemas.openxmlformats.org/presentationml/2006/main\"> "
            + "<p:nvPicPr>"
              + "<p:cNvPr id=\"${id1}\" name=\"${name}\" descr=\"${descr}\"/>"
              + "<p:cNvPicPr>"
                + "<a:picLocks noChangeAspect=\"1\"/>"
              + "</p:cNvPicPr>"
              + "<p:nvPr/>"
            + "</p:nvPicPr>"
            + "<p:blipFill>"
              + "<a:blip r:embed=\"${rEmbedId}\" cstate=\"print\"/>"
              + "<a:stretch>"
                + "<a:fillRect/>"
              + "</a:stretch>"
            + "</p:blipFill>"
            + "<p:spPr>"
              + "<a:xfrm>"
                + "<a:off x=\"${offx}\" y=\"${offy}\"/>"
                + "<a:ext cx=\"${extcx}\" cy=\"${extcy}\"/>"
              + "</a:xfrm>"
              + "<a:prstGeom prst=\"rect\">"
                + "<a:avLst/>"
              + "</a:prstGeom>"
            + "</p:spPr>"
          + "</p:pic>";

} 
```

# html - HTML：表格行/表格单元格要关闭还是不关闭？

> ID：15988485
> 
> 赞同：1
> 
> 时间：2013-04-13T13:47:44.823
> 
> 标签：html, tags

我想听听你对这个问题的意见。是否必须关闭`<tr>`and`<td>`标签？大多数网络编辑器/设计软件更喜欢关闭这些标签，我个人认为让标签保持打开状态更符合人体工程学。如果您正确编写代码，您可以轻松区分行的开头和结尾。

```
<table>
<tr><td class="login_cell">Login:
    <td><input type="text" name="user_login" class="input" autocomplete="off">
<tr><td class="login_cell">Password:
    <td><input type="password" name="user_pass" class="input">
<tr><td><a href="">Forgot password?</a>
        <input type="hidden" name="log" value="ok">
    <td><input type="submit" name="btn_login" class="btn" value="Log in">
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:56:22.147

**优点：**

*   更少的字符 --> 页面加载更快
*   （你说的那件事，我认为这不是一个很好的理由）

**缺点：**

*   难以维护
*   没有有效的 XHTML
*   可能会搞砸 CSS/JS
*   并非总是允许
*   所有浏览器可能无法正确呈现（是的，我在和你说话，IE！）
*   糟糕，糟糕的风格……

Summa summarum，我会关闭标签...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:50:14.727

在 HTML5 中始终关闭 HTML 标签！无论是短标签（例如，`<img src="image.png alt="image" />`）还是常规标签。（例如，`<div id="myDiv">Content</div>`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T13:58:56.910

规则是：

XHTML：您必须关闭所有标签。

HTML：您只需要关闭 table 标记。

我的建议是始终关闭表格中的标签。这样可以更轻松地跟踪所有内容，如果您选择使用 XHTML 而不是 HTML，则更容易。

# gwt - 是否可以使用 GQuery 编译时间选择器消除对 CSS 和 HTML 进行硬编码的需要

> ID：15988486
> 
> 赞同：1
> 
> 时间：2013-04-13T13:48:01.950
> 
> 标签：gwt, gwtquery

我正在使用 GWT 开发一个 Web 应用程序。我更喜欢用 Java 编写所有代码，而不是用 HTML 和 CSS 对任何代码进行硬编码。我也在使用 GQuery（或 GWTQuery），我想知道是否使用带有 GWTQuery 的编译时间选择器完全消除了对任何 HTML 或 CSS 进行硬编码的需要 - 并具有完全硬编码的应用程序的速度和性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:09:16.027

让我用几句话解释一下 gwt 和 gquery 是什么。

1- GWT 只是一个编译器，它为您提供从 java 生成优化 javascript 的工具。

2- 用GWT制作的js主要用于修改DOM（除了计算、业务代码、ajax等）。

3- GWT 还为您提供了一组小部件，作为 DOM 的抽象，因此您可以使用面板、按钮、树等而不是原始 HTML。我认为这就是您所说的硬编码html。

4- 但是 GQuery 是对 GWT 的补充。它为您提供了一组从 jQuery 中获取并移植到 java 以编写更少代码的实用程序，它主要面向操作 DOM（选择节点、修改、动画等），除了其他很酷的功能，如更简单的 ajax 语法、安全输入、promise、json/xml 数据绑定等。

说了这么多，不要以为 gwt 小部件抽象会让你完全忘记 dom 和 css。不久之后，您将需要创建自己的小部件，或自定义当前的小部件。

我认为几乎忘记 DOM 的唯一方法是使用 3rd 方小部件库，如[gxt](http://www.sencha.com/products/gxt)、[mosaic](http://code.google.com/p/gwt-mosaic/)、[smart-gwt](http://code.google.com/p/smartgwt/)等。因为 GWT 小部件很坚固，它们旨在为设计师提供轻松样式化它们的选项与CSS。

另一方面，gwtquery 根本不会帮助您忘记 DOM。它旨在增强页面中的静态 DOM 元素，增强 gwt 小部件的 DOM，或基于 html 创建自己的 DOM 结构。

关于 gQuery[编译](https://code.google.com/p/gwtquery/wiki/GettingStarted#Compile_Time_Selectors)选择器，它们的使用方式与动态选择器相同：选择 DOM 元素，但由于编译器对其进行了优化，因此性能要好得多。我认为您误解了他们的目标，他们没有给您任何消除硬编码 HTML 的方法。

**更新**：要回答您的最后一条评论，不可能使用 GWT 或 GQUERY 生成静态 HTML 或 CSS。它们总是生成写入 .js 文件的静态 JAVASCRIPT 代码（或写入 .html 文件中的 javascript 标记，具体取决于链接器）

# image - 在visual basic中获取图像和视频的格式

> ID：15988487
> 
> 赞同：0
> 
> 时间：2013-04-13T13:48:06.930
> 
> 标签：image, vba, video, powerpoint

我的PowerPoint演示文稿中有一些图像和视频。取决于每种格式（jpg，mp3，jpeg，...）我希望它制作不同的东西，所以我需要知道它是什么样的文件。Visual Basic 中有什么可以实现的吗？

已编辑

我想将 iPad 支持的图像和视频与不支持的图像和视频区分开来。这就是为什么我需要知道它们的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:48:20.210

**编辑：明确说明 - 下面的解决方案仅适用于链接到文件的形状！**

```
Function WhatTypeOfMedia(SHP As Shape)

    Select Case Right(SHP.LinkFormat.SourceFullName, 4)
        Case ".jpg", "jpeg"
            WhatTypeOfMedia = "Picture type"
        Case ".wav", ".mp3"
            WhatTypeOfMedia = "Music type"
        '... end other possible types put here
    End Select
End Function 
```

要为活动演示的第一张幻灯片进行测试运行，请尝试以下代码：

```
Sub Take_format_Linked()

    On Error Resume Next    'required for these files which are not linked
    Dim SHP As Shape
    For Each SHP In ActivePresentation.Slides(1).Shapes
    '1st check if format is linked- best option:
    If Len(SHP.LinkFormat.SourceFullName) > 0 Then
        If Err.Number = 0 Then
        'if so, let's call function
            Debug.Print WhatTypeOfMedia(SHP)
        'here you can do what you want based on function result
        Else
            Err.Clear
        End If
    End If
    Next

End Sub 
```

结果，您可以在立即窗口中获得哪种形状是哪种类型的信息。您可以使用这些类型在 main sub 中运行您需要的内容。在这个简单的想法`On Error Resume Next`中，如果 Shape 没有链接，我会一直避免错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:03:44.613

正如已经指出的那样，您可以获取链接文件的文件类型，但无法获取嵌入文件的文件类型。但是，如果您不需要在 VBA 中执行此操作或可以在 VBA 中操作 ZIP 文件，请以 zip 格式打开 PPTX 并查找媒体文件夹。在那里你会找到任何嵌入的文件（图片、声音、电影）。

它们的格式可能与最初的格式不同；PPT 有时会在导入图像时转换图像。但考虑到你所追求的，这不应该是一个问题。

# java - Java- Action Listener 检查是否按下了两个按钮

> ID：15988488
> 
> 赞同：0
> 
> 时间：2013-04-13T13:48:09.013
> 
> 标签：java, swing, jbutton, actionlistener

我想创建一个程序，其中有 4 个按钮，用户需要将它们匹配在一起。

因此，如果有 4 个按钮：按钮 1、按钮 2、按钮 3、按钮 4，并且用户按下按钮 1 和按钮 3，则按钮会改变颜色。否则他们保持不变。

我曾尝试在动作侦听器中使用动作侦听器和 if 语句，但我不太确定我将如何做到这一点，以便它检查两个按钮是否都被按下。

谢谢。

这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.Color.*;
import javax.swing.Box;
import java.awt.Dimension;
import java.awt.Insets;
import java.awt.FlowLayout;
import java.awt.event.*;
import javax.swing.border.LineBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.BorderFactory;
import java.io.*;
import java.net.URL;
import javax.sound.sampled.*;

public class test3 extends JPanel {

    JFrame frame;
    JPanel panel;

    public test3() {

    /*Frame and panel */

    frame = new JFrame("Keyboard");
    panel = new JPanel();

    /* Buttons fot letters*/
    final JButton button1 =new JButton("button1");
    final JButton button2 =new JButton("button2");
    final JButton button3 =new JButton("button3");
    final JButton button4 =new JButton("button4");

    frame.setVisible(true);
    frame.setSize(800,600);
    frame.setLocationRelativeTo(null);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE ); 

    panel.setLayout(null);
    panel.setBackground(Color.WHITE);
    panel.setCursor( new Cursor(Cursor.HAND_CURSOR) ); // set the cursor to a hand 

    frame.add(panel);

    Insets insets = panel.getInsets();

    button1.setLayout(null);
    button1.setBounds(130 + insets.left, 300 + insets.top, 50,50);
    button1.setBackground(Color.WHITE);
    button1.setBorder(BorderFactory.createEmptyBorder());

    button2.setLayout(null);
    button2.setBounds(180 + insets.left, 300 + insets.top,  50,50);
    button2.setBackground(Color.WHITE);
    button2.setBorder(BorderFactory.createEmptyBorder());

    button3.setLayout(null);
    button3.setBounds(230 + insets.left, 300 + insets.top,  50,50);
    button3.setBackground(Color.WHITE);
    button3.setBorder(BorderFactory.createEmptyBorder());

    button4.setLayout(null);
    button4.setBounds(280 + insets.left, 300 + insets.top,  50,50);
    button4.setBackground(Color.WHITE);
    button4.setBorder(BorderFactory.createEmptyBorder());

    panel.add(button1);
    panel.add(button2); 
    panel.add(button3);
    panel.add(button4);
    }

    public static void main(String[] args) {
    new test3();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:03:06.183

由于一次只会触发一个 ActionEvent，因此您需要在第一次按下 button1 或 button3 时设置一个标志，第二次，每当按下 button1/button3 时，检查标志的状态，如果它是真的改变按钮的颜色，否则不要更改。也不要忘记将标志设置为 false，当您完成颜色更改时。这是代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.Color.*;
import javax.swing.Box;
import java.awt.Dimension;
import java.awt.Insets;
import java.awt.FlowLayout;
import java.awt.event.*;
import javax.swing.border.LineBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.BorderFactory;
import java.io.*;
import java.net.URL;
import javax.sound.sampled.*;

public class test3 extends JPanel implements ActionListener {

    JFrame frame;
    JPanel panel;
    boolean flag;
    String buttonPressed;
    final JButton button1;
    final JButton button2;
    final JButton button3;
    final JButton button4;
    Color color1, color2;

    public test3() {

    /*Frame and panel */

    frame = new JFrame("Keyboard");
    panel = new JPanel();
    color1 = new Color(0,0,0);

    /* Buttons fot letters*/
    button1 =new JButton("button1");
    button2 =new JButton("button2");
    button3 =new JButton("button3");
    button4 =new JButton("button4");

    color2 = button1.getBackground();

    frame.setVisible(true);
    frame.setSize(800,600);
    frame.setLocationRelativeTo(null);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE ); 

    panel.setLayout(null);
    panel.setBackground(Color.WHITE);
    panel.setCursor( new Cursor(Cursor.HAND_CURSOR) ); // set the cursor to a hand 

    frame.add(panel);

    Insets insets = panel.getInsets();

    button1.setLayout(null);
    button1.setBounds(130 + insets.left, 300 + insets.top, 50,50);
    button1.setBackground(Color.WHITE);
    button1.setBorder(BorderFactory.createEmptyBorder());

    button2.setLayout(null);
    button2.setBounds(180 + insets.left, 300 + insets.top,  50,50);
    button2.setBackground(Color.WHITE);
    button2.setBorder(BorderFactory.createEmptyBorder());

    button3.setLayout(null);
    button3.setBounds(230 + insets.left, 300 + insets.top,  50,50);
    button3.setBackground(Color.WHITE);
    button3.setBorder(BorderFactory.createEmptyBorder());

    button4.setLayout(null);
    button4.setBounds(280 + insets.left, 300 + insets.top,  50,50);
    button4.setBackground(Color.WHITE);
    button4.setBorder(BorderFactory.createEmptyBorder());

    button1.addActionListener(this);
    button2.addActionListener(this);
    button3.addActionListener(this);
    button4.addActionListener(this);

    panel.add(button1);
    panel.add(button2); 
    panel.add(button3);
    panel.add(button4);
    flag = false;
    buttonPressed = "";
    }

    public void actionPerformed(ActionEvent ae)
    {
    JButton b = (JButton)ae.getSource();
    if( b.equals(button1) )
        {
        flag = true;
        if( buttonPressed.equals("button3") )
            {
            if( button1.getBackground().equals(color2) )
                {
                button1.setBackground(color1);
                button3.setBackground(color1);
                }
            else
                {
                button1.setBackground(color2);
                button3.setBackground(color2);
                }
            flag = false;
            }
        buttonPressed = "button1";
        }
    else if( b.equals(button3) ) 
        {
        flag = true;
        if( buttonPressed.equals("button1") )
            {
            if( button3.getBackground().equals(color2) )
                {
                button1.setBackground(color1);
                button3.setBackground(color1);
                }
            else
                {
                button1.setBackground(color2);
                button3.setBackground(color2);
                }
            flag = false;
            }
        buttonPressed = "button1";
        }
    else
        {
        flag = false;
        }

    }

    public static void main(String[] args) {
    new test3();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T14:19:54.977

你最好使用`toogleButtons`：

```
 final JToggleButton tb1 = new JToggleButton();
    final JToggleButton tb2 = new JToggleButton();
    final JToggleButton tb3 = new JToggleButton();
    final JToggleButton tb4 = new JToggleButton();

    ChangeListener stateChangeListener = new javax.swing.event.ChangeListener() {
        @Override
        public void stateChanged(javax.swing.event.ChangeEvent evt) {
            toggleButtonStateChanged(evt);
        }

        private void toggleButtonStateChanged(ChangeEvent evt) {
            if (tb1.isSelected() && tb3.isSelected()) {
                tb1.setBackground(Color.WHITE);
                tb2.setBackground(Color.WHITE);
                tb3.setBackground(Color.WHITE);
                tb4.setBackground(Color.WHITE);
            } else {
                //Set the color to whatever it was before
            }
        }
    };

    tb1.addChangeListener(stateChangeListener);
    tb2.addChangeListener(stateChangeListener);
    tb3.addChangeListener(stateChangeListener);
    tb4.addChangeListener(stateChangeListener); 
```

# java - java PreparedStatement.setFloat 抛出 NullpointerException，允许 Pstmt.setString 吗？

> ID：15988495
> 
> 赞同：4
> 
> 时间：2013-04-13T13:49:04.233
> 
> 标签：java, prepared-statement

实际上我的整个问题都在标题中。我有一个类来管理我的发票对象到我的 Sqlite DB 的插入和删除。

```
public class Invoice {
    private String str1;
    private Float flt1;
    private String str2Null;
    private Float flt2Null;

    public Invoice(String str1, Float flt1){
        this.str1 = str1;
        this.flt1 = flt1;
   }

  getters & setters...
}

public class InvoiceManager{
    ...Konstruktor...

    public int insertInvoice(Invoice invoice) throws Exception{
        try {
             PreparedStatement stmt = databaseConnection.prepareStatement(
            "INSERT INTO invoice (str1, flt1, str2Null, flt2Null) VALUES (?,?,?,?)");
             stmt.setString(1, invoice.getStr1());
             stmt.setFloat(2, invoice.getFlt1());
             stmt.setString(3, invoice.getStr2Null());
             stmt.setFloat(4, invoice.getFlt2Null());
     .... 
```

因此，当我想将某事物插入数据库并且 Str2Null = null 时，它可以工作并将 NULL 写入 sqliteDB，但是在 Flt2Null = null 的情况下，它会引发异常......有人可以告诉我为什么吗？？？感谢您到目前为止的帮助...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-13T14:07:18.257

看签名`PreparedStatement.setFloat()`：

```
void setFloat(int parameterIndex, float x) throws SQLException 
```

如您所见，它使用原始类型`float`而不是包装类型`Float`，因此您不能传递`null`给它。尝试将`null`类型的值转换`Float`为`float`原因`NullPointerException`。

`String`是引用类型，因此您可以传递`null`给`PreparedStatement.setString()`.

因此，如果`setFloat()`您必须检查`null`并使用`setNull()`以通过它：

```
public static void setFloatOrNull(PreparedStatement ps, int index, Float value) {
    if (value == null) {
        ps.setNull(index, Types.FLOAT);
    } else {
        ps.setFloat(index, value);
    }
} 
```

# php - 无法 ceil 阵列

> ID：15988497
> 
> 赞同：-1
> 
> 时间：2013-04-13T13:49:11.540
> 
> 标签：php, mysql, pagination

我正在尝试使用本[教程](http://www.phpjabbers.com/php--mysql-select-data-and-split-on-pages-php25.html "教程")制作分页页面，但不断出现错误。

这是我的代码：

```
 <?php include "common.php"; ?>
    <?php
    $query = "SELECT COUNT(id) FROM actiongame"; 
    try 
    { 
    // These two statements run the query against your database table. 
    $stmt = $db->prepare($query); 
    $stmt->execute(); 
    } 
    catch(PDOException $ex) 
    { 
    // Note: On a production website, you should not output $ex->getMessage(). 
    // It may provide an attacker with helpful information about your code.  
    die("Failed to run query: " . $ex->getMessage()); 
    }
    $rows = $stmt->fetchAll(); 
    foreach($rows as $row):
    $total_records = $row;print_r($total_records);
    //just to see what is the $total_records
    // i get this reult with print_r : Array ( [COUNT(id)] => 2969 ) 
    $total_pages = ceil($total_records / 48);
    //but i get fatal error = =
    //Fatal error: Unsupported operand types in C:\wamp\www\category.php on line
    print_r($total_pages);
    endforeach;
    unset($row);
    ?> 
```

我的问题是，如何设置`$total_records`

并`2969`使用`ceil($total_record / 48)`?

这是我的`db`连接脚本 common.php 代码：

```
// These variables define the connection information for your MySQL database 
$username = 'root'; 
$password = ''; 
$host = 'localhost'; 
$dbname = 'minigame'; 

// UTF-8 is a character encoding scheme that allows you to conveniently store 
// a wide varienty of special characters, like ¢ or €, in your database. 
// By passing the following $options array to the database connection code we 
// are telling the MySQL server that we want to communicate with it using UTF-8 
// See Wikipedia for more information on UTF-8: 
// http://en.wikipedia.org/wiki/UTF-8 
$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'); 

// A try/catch statement is a common method of error handling in object oriented code. 
// First, PHP executes the code within the try block.  If at any time it encounters an 
// error while executing that code, it stops immediately and jumps down to the 
// catch block.  For more detailed information on exceptions and try/catch blocks: 
// http://us2.php.net/manual/en/language.exceptions.php 
try 
{ 
    // This statement opens a connection to your database using the PDO library 
    // PDO is designed to provide a flexible interface between PHP and many 
    // different types of database servers.  For more information on PDO: 
    // http://us2.php.net/manual/en/class.pdo.php 
    $db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options); 
} 
catch(PDOException $ex) 
{ 
    // If an error occurs while opening a connection to your database, it will 
    // be trapped here.  The script will output an error and stop executing. 
    // Note: On a production website, you should not output $ex->getMessage(). 
    // It may provide an attacker with helpful information about your code 
    // (like your database username and password). 
    die("Failed to connect to the database: " . $ex->getMessage()); 
} 

// This statement configures PDO to throw an exception when it encounters 
// an error.  This allows us to use try/catch blocks to trap database errors. 
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 

// This statement configures PDO to return database rows from your database using an associative 
// array.  This means the array will have string indexes, where the string value 
// represents the name of the column in your database. 
$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 

// This block of code is used to undo magic quotes.  Magic quotes are a terrible 
// feature that was removed from PHP as of PHP 5.4\.  However, older installations 
// of PHP may still have magic quotes enabled and this code is necessary to 
// prevent them from causing problems.  For more information on magic quotes: 
// http://php.net/manual/en/security.magicquotes.php 
if(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc()) 
{ 
    function undo_magic_quotes_gpc(&$array) 
    { 
        foreach($array as &$value) 
        { 
            if(is_array($value)) 
            { 
                undo_magic_quotes_gpc($value); 
            } 
            else 
            { 
                $value = stripslashes($value); 
            } 
        } 
    } 

    undo_magic_quotes_gpc($_POST); 
    undo_magic_quotes_gpc($_GET); 
    undo_magic_quotes_gpc($_COOKIE); 
} 

// This tells the web browser that your content is encoded using UTF-8 
// and that it should submit content back to you using UTF-8 
header('Content-Type: text/html; charset=utf-8'); 

// This initializes a session.  Sessions are used to store information about 
// a visitor from one web page visit to the next.  Unlike a cookie, the information is 
// stored on the server-side and cannot be modified by the visitor.  However, 
// note that in most cases sessions do still use cookies and require the visitor 
// to have cookies enabled.  For more information about sessions: 
// http://us.php.net/manual/en/book.session.php 
session_start(); 

// Note that it is a good practice to NOT end your PHP files with a closing PHP tag. 
// This prevents trailing newlines on the file from being included in your output, 
// which can cause problems with redirecting users. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:53:37.693

您正在尝试对数组设置上限，您可以在数值上执行此操作。

尝试像这样编辑您的查询：

```
$query = "SELECT COUNT(id) AS tot FROM actiongame"; 
```

然后你的PHP代码是这样的：

```
$total_records = $row['tot']; 
```

# objective-c - Objective C 中的调用函数

> ID：15988501
> 
> 赞同：-3
> 
> 时间：2013-04-13T13:49:39.553
> 
> 标签：objective-c, function

我是一名新的 iPhone 开发人员，我正在用 Objective-C 语言练习调用函数。有人可以帮助我吗？有我的节目详情。谢谢！

```
#import <UIKit/UIKit.h>

@interface TestingProgramViewController : UIViewController{
    NSTimer *aTimer;
    id getPic;
}
@end

#import "TestingProgramViewController.h"

@interface TestingProgramViewController ()
@property (weak, nonatomic) IBOutlet UIImageView *testingPic;
@end

@implementation TestingProgramViewController

- (void) obtainPic:(NSString *)picName{
    NSString *urlLink = [[NSString alloc] initWithFormat:@"http://tdcctv.data.one.gov.hk/, %@!", picName];
    NSURL *url = [NSURL URLWithString:urlLink];
    UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]];
    self.testingPic.image = image;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [getPic obtainPic:@"H422F2.JPG"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:53:04.657

您在构建 URL 时出错，请更改此行：

```
NSString *urlLink = [[NSString alloc] initWithFormat:@"http://tdcctv.data.one.gov.hk/, %@!", picName]; 
```

为了：

```
NSString *urlLink = [[NSString alloc] initWithFormat:@"http://tdcctv.data.one.gov.hk/%@", picName]; 
```

这样做我得到这个图像：

[![图片](https://i.stack.imgur.com/LYtsx.jpg)](https://i.stack.imgur.com/LYtsx.jpg)

**编辑**：

调用方法时也有错误`obtainPic`，更改`[getPic obtainPic:@"H422F2.JPG"];`为：

```
[self obtainPic:@"H422F2.JPG"]; 
```

# java - MifareClassic.connect() 上的 NullpointerException

> ID：15988503
> 
> 赞同：1
> 
> 时间：2013-04-13T13:49:54.530
> 
> 标签：java, android, nfc, mifare

所以我想从一个标签中读取，但是在连接到它时得到一个 NullPointerException。我知道我的标签不为空，因为我的活动在检测到它时开始，并且代码中的额外测试证明了这一点。

```
public void getDataFromTag()
{
    tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
    text.setText(tag.toString());
    text.append("\n\n");
    // get NDEF tag details
    MifareClassic mfc = MifareClassic.get(tag);
    byte[] data;
    if (tag == null)
        text.append("\n Tag is null");
    try
    {
        mfc.connect();
        ...
    }
    catch (IOException e) 
    { 
        text.append("\n " + "Error while reading!");
    } 
    catch (NullPointerException e)
    {
        text.append("\n " + e.toString());
    }
} 
```

那么这里的问题是什么？顺便说一句，我正在 Nexus 7 平板电脑上测试我的应用程序。

应大众需求...这里有一个 logCat

```
04-13 15:56:47.101: D/libEGL(2046): loaded /system/lib/egl/libEGL_tegra.so
04-13 15:56:47.121: D/libEGL(2046): loaded /system/lib/egl/libGLESv1_CM_tegra.so
04-13 15:56:47.131: D/libEGL(2046): loaded /system/lib/egl/libGLESv2_tegra.so
04-13 15:56:47.151: D/OpenGLRenderer(2046): Enabling debug mode 0
04-13 15:56:52.161: D/AndroidRuntime(2046): Shutting down VM
04-13 15:56:52.161: W/dalvikvm(2046): threadid=1: thread exiting with uncaught exception (group=0x41037930)
04-13 15:56:52.171: E/AndroidRuntime(2046): FATAL EXCEPTION: main
04-13 15:56:52.171: E/AndroidRuntime(2046): java.lang.RuntimeException: Unable to resume activity {bsp.app/bsp.app.Main_Menue}: java.lang.NullPointerException
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.os.Looper.loop(Looper.java:137)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at java.lang.reflect.Method.invokeNative(Native Method)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at java.lang.reflect.Method.invoke(Method.java:511)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at dalvik.system.NativeStart.main(Native Method)
04-13 15:56:52.171: E/AndroidRuntime(2046): Caused by: java.lang.NullPointerException
04-13 15:56:52.171: E/AndroidRuntime(2046):     at bsp.app.Main_Menue.getDataFromTag(Main_Menue.java:81)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at bsp.app.Main_Menue.onResume(Main_Menue.java:65)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.Activity.performResume(Activity.java:5182)
04-13 15:56:52.171: E/AndroidRuntime(2046):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
04-13 15:56:52.171: E/AndroidRuntime(2046):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:52:35.230

您无需获取 Tag 对象即可获取 NDEF 内容，Android 默认读取 NDEf 内容，您可以使用

```
Parcelable[] messages = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
if (messages != null) {
    NdefMessage[] ndefMessages = new NdefMessage[messages.length];
    for (int i = 0; i < messages.length; i++) {
        ndefMessages[i] = (NdefMessage) messages[i];
    }
    // process messages, usually only a single is present
} 
```

请注意，如果标签实际上不属于该技术，则获取任何特定的标签技术类 (MifareClassic) 都不起作用 - 这就是您所看到的。因此，您应该首先检查您拥有的标签类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:57:16.073

您应该检查是否`mfc`不在`null`该行之后`MifareClassic mfc = MifareClassic.get(tag);`。如果是`null`，则该标签可能不是 MIFARE Classic（也许您应该尝试`MifareUltralight`）。

# java - 使用休眠连接到 Microsoft SQL 2008 服务器

> ID：15988504
> 
> 赞同：3
> 
> 时间：2013-04-13T13:49:55.437
> 
> 标签：java, sql-server-2008, hibernate

我正在尝试通过休眠连接到 Microsoft SQL 2008 服务器。以下是我的 hibernate.cfg.xml 文件：

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.dialect">org.hibernate.dialect.SQLServer2008Dialect</property>
        <property name="connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
        <property name="connection.url">jdbc:sqlserver://127.0.0.1:1433;databaseName=myDBName;instanceName=myInstanceName;</property>
        <property name="hibernate.connection.username">user</property>
        <property name="hibernate.connection.password">pass</property>

        <mapping resource="Obj.hbm.xml"/>
    </session-factory>
</hibernate-configuration> 
```

这是我用来尝试建立连接并进行查询的代码：

```
import java.util.List;

import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

public class SessionsTest {
    private static SessionFactory sessionFactory;
    private static ServiceRegistry serviceRegistry;

    /**
     * @param args
     */
    @SuppressWarnings({ "unchecked"})
    public static void main(String[] args) {
        sessionFactory = configureSessionFactory();

        Session session = sessionFactory.openSession();
        session.beginTransaction();

        List<Obj> result = (List<Obj>) session.createQuery("FROM Obj").list();

        for (Obj obj : result ) {
            System.out.println(obj.getObjID());
        }

        session.getTransaction().commit();
        session.close();

        if ( sessionFactory != null ) {
            sessionFactory.close();
        }
    }

    private static SessionFactory configureSessionFactory() throws HibernateException {
        Configuration config = new Configuration();
        configuration.configure();
        serviceRegistry = new ServiceRegistryBuilder().applySettings(config.getProperties()).buildServiceRegistry();            
        sessionFactory = config.buildSessionFactory(serviceRegistry);
        return sessionFactory;
    }
} 
```

我得到的堆栈跟踪：

```
2013-04-13 15:02:03,449 [main] WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08S01
2013-04-13 15:02:03,449 [main] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - The TCP/IP connection to the host 127.0.0.1, port 1433 has failed. Error: "Connection refused: connect. Verify the connection properties, check that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port, and that no firewall is blocking TCP connections to the port.".
Exception in thread "main" org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:221)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:157)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
    at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1425)
    at com.test.test.ObjTest.main(ObjTest.java:24)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host 127.0.0.1, port 1433 has failed. Error: "Connection refused: connect. Verify the connection properties, check that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port, and that no firewall is blocking TCP connections to the port.".
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:171)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1033)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:817)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:700)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:842)
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:204)
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:292)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:214)
    ... 5 more 
```

我尝试使用不同的驱动程序（JTDS）。我尝试过以各种方式更改 URL 字符串。我尝试将我的方言更改为 org.hibernate.dialect.SQLServerDialect。我还尝试通过将 ;IntegratedSecurity=true 添加到 url 字符串的末尾来使用 Windows 身份验证。除此之外，我一直在服务器属性中四处寻找以确保我提供的实例以及端口都是正确的。我尝试过：telnet localhost 1433 并且无法以这种方式连接，但我可以使用 SQL Server 进行连接管理工作室。此外，我在 cmd 和 TaskList /FI "PID eq 4072" /FO LIST /V 中使用 NetStat -o 来尝试追踪 sql server 以确认端口。奇怪的是我无法以这种方式追踪 sql server .它没有出现在 NetStat 列表中，

我使用 Hibernate 4.2.0 和 SQLJDBC4，当我使用 JTDS 时它是 1.2.7。java -version 的输出： java version "1.6.0_30" Java(TM) SE Runtime Environment (build 1.6.0_30-b12) Java HotSpot(TM) 64-Bit Server VM (build 20.5-b03，混合模式)

请告诉我是否需要任何其他信息，第一次在这里发布。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T14:54:03.043

我认为您的 SQL Server 实例未在 1433 处为 TCP 连接提供服务。 **识别端口：**

*   转到 SQL Server 配置管理器。
*   选择 SQL Server 网络配置
    *   为您的实例寻找协议
    *   点击**TCP IP**（如果没有启用，则启用它，然后客户端可以使用 TCP/IP 连接）
    *   在弹出的结果中，选择**IP 地址选项卡**
    *   向下滚动
    *   您将在**IPAll部分中看到 TCP 动态端口**
    *   抓住那个值，这就是你应该使用的端口

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T22:55:14.470

真的，真的，真的检查你的 SQL Server 实例中是否启用了 TCP/IP 协议。

请按照以下步骤（针对 SS2012 测试）以确保：

*   在“开始菜单\程序\Microsoft SQL Server 2012\Configuration Tools\”中打开“ **Sql Server 配置管理器**”
*   展开“SQL Server 网络配置”
*   进入“协议`<YourInstance>`”
*   启用 TCP/IP

如果您有任何问题，请查看[此博客文章](http://thusithamabotuwana.wordpress.com/2012/01/08/connecting-to-sql-server-using-jtds/)了解详细信息，因为它包含屏幕截图和更多信息。

还要检查**“SQL Server Browser”窗口服务是否已激活并正在运行**：

*   转到控制面板 -> 管理工具 -> 服务
*   打开“SQL Server Browser”服务并启用它（手动或自动，取决于您的需要）
*   启动它。

而已。

在我安装了新的本地 SQL Server 后，我所要做的就是启用 TCP/IP 并启动 SQL Server Browser 服务。

下面是我用来测试与`SQLEXPRESS`本地实例的连接的代码。当然，您应该根据需要更改 IP、DatabaseName 和用户/密码。：

```
import java.sql.Connection;
import java.sql.DatabaseMetaData;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;

public class JtdsSqlExpressInstanceConnect {
    public static void main(String[] args) throws SQLException {
        Connection conn = null;
        ResultSet rs = null;
        String url = "jdbc:jtds:sqlserver://127.0.0.1;instance=SQLEXPRESS;DatabaseName=master";
        String driver = "net.sourceforge.jtds.jdbc.Driver";
        String userName = "user";
        String password = "password";
        try {
            Class.forName(driver);
            conn = DriverManager.getConnection(url, userName, password);
            System.out.println("Connected to the database!!! Getting table list...");
            DatabaseMetaData dbm = conn.getMetaData();
            rs = dbm.getTables(null, null, "%", new String[] { "TABLE" });
            while (rs.next()) { System.out.println(rs.getString("TABLE_NAME")); }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            conn.close();
            rs.close();
        }
    }
} 
```

如果您使用 Maven，请将其添加到您的 pom.xml：

```
<dependency>
    <groupId>net.sourceforge.jtds</groupId>
    <artifactId>jtds</artifactId>
    <version>1.2.4</version>
</dependency> 
```

# php - Fullcalendar 不会将 mysql 表中的数据输入日历

> ID：15988509
> 
> 赞同：0
> 
> 时间：2013-04-13T13:50:28.097
> 
> 标签：php, mysql, json

我正在尝试让 Fullcalendar 从 mysql 表中获取信息并将信息输入到日历中。出现日历，但表中没有任何信息在日历上。

这是我的代码。

**日历.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<style type='text/css'>

    body {
            margin-top: 40px;
            text-align: center;
            font-size: 14px;
            font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
            }

    #loading {
            position: absolute;
            top: 5px;
            right: 5px;
            }

    #calendar {
            width: 900px;
            margin: 0 auto;
            }
</style>

<link rel='stylesheet' type='text/css' href='fullcalendar/fullcalendar.css' />
<script type='text/javascript' src='jquery/jquery.js'></script>
<script type='text/javascript' src='jquery/ui.core.js'></script>
<script type='text/javascript' src='jquery/ui.draggable.js'></script>
<script type='text/javascript' src='fullcalendar/fullcalendar.js'></script>

<script type='text/javascript'>
$(document).ready(function() {
    $('#calendar').fullCalendar({
        editable: true,
        events: "json-events.php",
        eventDrop: function(event, delta) {
        alert(event.title + ' was moved ' + delta + ' days\n' +
           '(should probably update your database)');
     },

    loading: function(bool) {
        if (bool) $('#loading').show();
        else $('#loading').hide();
    }

});

});

</script>

</head>

<body>
    <div id='loading' style='display:none'>loading...</div>
    <div id='calendar'></div>
    <p>json_events.php needs to be running in the same directory.</p>
</body>
</html> 
```

**json_events.php**

```
<?php

    include("dbstuff.inc");

    $conn = mysql_connect($host, $user, $pass) or die(mysql_error());
    mysql_select_db($database, $conn) or die(mysql_error());

    $sql= "SELECT id, title, description, url, email, Stime, Etime, eventDate, DATE_FORMAT(eventDate, '%Y-%m-%dT%H:%i' ) AS startDate
        FROM events
        ORDER BY startDate DESC";
    $check = mysql_query($sql) or die(mysql_error());

    $events = array();
    while ($row = mysql_fetch_assoc($check)) {
        $eventArray['id'] = $row['id'];   
        $eventArray['title'] = $row['title'];
        $eventArray['description'] = $row['description'];
        $eventArray['url'] = $row['url'];
        $eventArray['email'] = $row['email'];
        $eventArray['startTime'] = $row['Stime'];
        $eventArray['EndTime'] = $row['Etime'];   
        $eventArray['title'] =  $row['Stime'] . " " . $row['title'];
        $eventArray['start'] = $row['startDate'];
        $eventsArray['allDay'] = "";
        $events[] = $eventArray;
}
echo json_encode($events);

?> 
```

这是来自 MySQL 文件的数据

```
[
    {
        "id": "1",
        "title": "07:00:00 test1",
        "description": "werewr",
        "url": "http://www.nba.com",
        "email": "someone@host.com",
        "startTime": "07:00:00",
        "EndTime": "09:00:00",
        "start": "2013-04-22T00:00"
    },
    {
        "id": "2",
        "title": "11:00:00 test2",
        "description": "hello",
        "url": "http://www.nba.com",
        "email": "someone@host.com",
        "startTime": "11:00:00",
        "EndTime": "13:00:00",
        "start": "2013-04-15T00:00"
    }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T10:51:39.170

你有事件：“json-events.php”，你的 php 文件是 json_events.php

# c++ - Borland string::find bug

> ID：15988512
> 
> 赞同：4
> 
> 时间：2013-04-13T13:50:50.053
> 
> 标签：c++, string, c++builder, c++builder-5

我支持使用 Borland C++ Builder 5.02（从 1997 年开始）编写的 C++ 应用程序。Borland 字符串类的 find() 方法的行为与我预期的不同：

```
#include <cstring>
#include <iostream>

int main (int argc, char *argv[])
{
   string needle = "length == eighteen";
   string haystack = "<" + needle + ">";
   if (haystack.find(needle) != NPOS)
      cout << "Found it!" << endl;
   else
      cout << "Not found" << endl;

   return 0;
} 
```

该程序输出`Not found`. 如果我把针换成更短的，它会输出`Found it!`。如果我将尖括号换成其他字符，它会找到它。空格有效，但括号也无效。

请注意，我在这里使用的是 Borland 字符串库：如果我改为`#include <string>`使用它，`std::string`那么它的工作方式与我期望的完全一样。遗憾的是，将整个应用程序更改为使用 STL 字符串并不是一个可行的答案！

从文档看来，Borland 使用基于哈希的算法进行字符串搜索。我找不到有关此的更多详细信息，并且我已经完成了拆卸，但并不聪明。

我很难相信这真的是字符串库中的一个错误，特别是因为如果是这样的话，我希望能够找到一篇文章或关于它的东西。我找不到任何此类信息。

但是，我已经没有想法了！这是一个已知的错误？有解决办法吗？

编辑：再次查看反汇编后，我认为它正在尝试执行类似 Rabin-Karp 算法的操作，其中哈希函数的计算方式为 mod 33554393（最大素数 < 2^25）。它很可能是底数为 32 的多项式哈希函数（即 a_0 + 32 a_1 + 32^2 a_2 + .. + 32^n a_n），但这只是一种预感。正如 Daniel Fischer 所建议的那样，听起来可能会溢出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:12:33.517

我发现 1998 年的参考资料表明 Borland 搜索字符串的实现有一个错误：

[https://groups.google.com/forum/?fromgroups=#!searchin/borland.public.cpp.language/cstring](https://groups.google.com/forum/?fromgroups=#!searchin/borland.public.cpp.language/cstring) $20bug/borland.public.cpp.language/XBzjaJmCYpk/gtMPm-j8jugJ

此外，似乎在历史上的某个时刻，C++ 委员会决定字符串类将成为标准 C++ 的一部分，而 cstring 的字符串类是这个的残余：

[https://groups.google.com/forum/?fromgroups=#!searchin/borland.public.cpp.language/borland](https://groups.google.com/forum/?fromgroups=#!searchin/borland.public.cpp.language/borland) $20cstring/borland.public.cpp.language/2psY2seRmS4/ywVrqwU1C2wJ

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T07:40:26.563

如果您有原始的BC++ 5.02 安装盘，则可以在BC5\SOURCE\RTL\SOURCE\STRING 下找到字符串类源。

以下是 string::find_case_index() 函数（由 string::find() 调用）的代码摘录：

```
const long q = 33554393L;
const long q32 = q<<5;

size_t testlength = length() - startindex;
size_t patternlength = patl = strlen(cp);
if( testlength < patternlength )
    return NPOS;
if( patternlength == 0 )
    return 0;

long patternHash = 0;
long testHash = 0;

const char _FAR *testP = c_str()+startindex;
const char _FAR *patP = cp;
long x = 1;
size_t i = patternlength-1;

while( i-- )
    x = (x<<5)%q;

for( i=0; i<patternlength; i++ )
    {
    patternHash = ( (patternHash<<5) + *patP++  ) % q;
    testHash    = ( (testHash   <<5) + *testP++ ) % q;
    }

testP = c_str()+startindex;
const char _FAR *end = testP + testlength - patternlength;

while (1)
    {

    if(testHash == patternHash)
        if( !get_paranoid_check_flag() ||
            !strncmp( testP, cp, patternlength) )
          return (size_t)(testP-c_str());

    if( testP >= end )
        break;

    // Advance & calculate the new hash value:
    testHash = ( testHash + q32 - *testP * x                 ) % q;
    testHash = ( (testHash<<5)  + *(patternlength + testP++) ) % q;
    }
return NPOS;          // Not found. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T18:11:37.883

您没有使用 Borland 字符串库。 `String`（大写 S）是 Borland 字符串类。`string`（小写的 s），与 完全相同`std::string`，是 STL 字符串类，它不是 Borland 实现（BCB5 中的 STL 是 RogueWave STL）。您的使用`#include <cstring>`可能会带入`std::string`全局名称空间，这就是您的代码编译的原因。但是你真的应该使用`#include <string>`and`std::string`来代替。至于`NPOS`，您应该`string::npos`改用它，因为那是`string::find()`实际返回的。

```
#include <cstring>
#include <iostream>

int main (int argc, char *argv[])
{
   string needle = "length == eighteen";
   string haystack = "<" + needle + ">";
   if (haystack.find(needle) != string::npos)
      cout << "Found it!" << endl;
   else
      cout << "Not found" << endl;

   return 0;
} 
```

或者：

```
#include <string>
#include <iostream>

int main (int argc, char *argv[])
{
   std::string needle = "length == eighteen";
   std::string haystack = "<" + needle + ">";
   if (haystack.find(needle) != std::string::npos)
      std::cout << "Found it!" << std::endl;
   else
      std::cout << "Not found" << std::endl;

   return 0;
} 
```

# arrays - 在 Matlab 中，我需要定期从一个数组中访问值

> ID：15988513
> 
> 赞同：0
> 
> 时间：2013-04-13T13:50:50.247
> 
> 标签：arrays, matlab

我有一个巨大的数据库，每隔半小时读取一次（没有数据间隙）。我需要修改数据，使其每隔 3 小时读取一次。是否可以删除 5 行并跳过一个（并继续到最后）或者我可以只选择每 6 个数据并将其写入另一个数组？有人可以帮我提供这两个选项中的任何一个的代码吗？

```
2005-01-01 03:00:00 0.23 (Retain or write to another array)
2005-01-01 03:30:00 0.28 (Delete)
2005-01-01 04:00:00 0.35 (Delete)
2005-01-01 04:30:00 0.42 (Delete)
2005-01-01 05:00:00 0.50 (Delete)
2005-01-01 05:30:00 0.57 (Delete)
2005-01-01 06:00:00 0.64 (Retain or write to another array)
2005-01-01 06:30:00 0.70 (Delete)
2005-01-01 07:00:00 0.75 (Delete)
2005-01-01 07:30:00 0.79 (Delete)
2005-01-01 08:00:00 0.80 (Delete)
2005-01-01 08:30:00 0.81 (Delete)
2005-01-01 09:00:00 0.79 (Retain or write to another array)
2005-01-01 09:30:00 0.76 (Delete)
and so on..... 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:07:10.880

要选择每 6 个数据点（即 1、7、13、...），您只需按如下方式进行索引

```
reducedArray = originalArray(1:6:end); 
```

# python - 如何在没有任何第三方库的情况下比较两个二维数组的列？

> ID：15988514
> 
> 赞同：3
> 
> 时间：2013-04-13T13:50:56.597
> 
> 标签：python, arrays

我可以简单地通过以下方式比较两个 2-dim 数组的行：

```
arr1[1] == arr2[1] 
```

但是列呢？有没有方便的功能来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T13:53:12.327

您必须遍历“行”并检查`all`“列”的元素是否等于另一个数组中的相应元素：

```
all(row_a[1] == row_b[1] for row_a, row_b in zip(arr1, arr2)) 
```

在纯 python 中没有“2-dim 数组”这样的东西，这些是列表的列表。

```
 #    arr1         arr2
   [             [
    [1, 2, 3],     [9, 2, 8],
    [4, 5, 6],     [7, 5, 7],
    [7, 8, 9]      [3, 8, 1]
   ]             ]

   # zip(arr1, arr2)
   [
     #   row_a       row_b
     ( [1, 2, 3],  [9, 2, 8] ),
     ( [4, 5, 6],  [7, 5, 7] ),
     ( [7, 8, 9],  [3, 8, 1] )
   ]

   [
     #   row_a[1]   row_b[1]
     ( [ , 2,  ],  [ , 2,  ] ),
     ( [ , 5,  ],  [ , 5,  ] ),
     ( [ , 8,  ],  [ , 8,  ] )
   ] 
```

*   [`zip`文件](http://docs.python.org/2/library/functions.html#zip)
*   [`all`文件](http://docs.python.org/2/library/functions.html#all)

# gnuplot - 使用 gnuplot 将函数拟合到一组数据

> ID：15988516
> 
> 赞同：0
> 
> 时间：2013-04-13T13:51:15.523
> 
> 标签：gnuplot

对不起，如果我在这里问一个愚蠢的问题，但我是一个关于 gnuplot 的真正菜鸟，所以请耐心等待。

我有一组数据并试图将其与

```
 f(x)=a * cos(x-b)**2 via a,b. 
```

但它没有用。它应该看起来像这样，

![在此处输入图像描述](https://i.stack.imgur.com/XWBbv.jpg)

但结果是这样的 ![在此处输入图像描述](https://i.stack.imgur.com/UniGV.jpg)

我的拟合方程可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:01:07.590

您的非线性拟合收敛到局部最小值，而不是全局最小值。您需要开始更接近全局最小值（作为人类，您比计算机更容易找到）。

因此，您需要为 a 和 b 指定更接近您期望的起始值，通过

一个 = ...

乙 = ...

在你打电话给健康之前。

看看这个文档部分：

[http://theochem.ki.ku.dk/on_line_docs/gnuplot/gnuplot_21.html#SEC77](http://theochem.ki.ku.dk/on_line_docs/gnuplot/gnuplot_21.html#SEC77)

# image - 检测后人脸匹配

> ID：15988517
> 
> 赞同：4
> 
> 时间：2013-04-13T13:51:17.960
> 
> 标签：image, opengl, opencv, image-processing

我正在开发一种软​​件，它将捕获的图像（面部）与同一个人的 3/4 图像（面部）相匹配。现在有2种可能

1- 捕获的图像（人脸）是同一个人，其 3/4 图像（人脸）已存储在数据库中
2\. 捕获的图像是不同的人

现在我想得到上述2个场景的结果，即在案例1中匹配，在案例2中不匹配。我使用了40个Gabor过滤器，这样我就能得到很好的结果。此外，我在数组（直方图）中得到结果。但它似乎不能正常工作，并且光线等环境条件也会影响匹配过程。任何人都可以建议我实现这一目标的一种良好而有效的技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:38:38.103

嗯，这基本上是人脸识别问题。

您可以使用**LBP**（Local Binary Pattern）从图像中提取特征。LBP 是一种非常健壮且具有光照不变性的方法。

您可以尝试以下步骤-

**训练：-**

1.  提取人脸区域（使用 OpenCV HaarCascade）
2.  将所有提取的人脸区域重新调整为相同大小
3.  将调整大小的人脸分成子区域（例如：8 * 9）
4.  从每个区域中提取 LBP 特征并将它们连接起来，因为特征的定位非常重要
5.  通过这种连接特征训练 SVM，对每个不同的人的图像使用不同的标签

**测试：-**

1.  拍摄人脸图像并按照步骤 1 至 4
2.  使用 SVM 预测（关于这是哪个人的图像）

# mysql - 从对具有快速更改顺序的表的查询中排除大量对象

> ID：15988520
> 
> 赞同：0
> 
> 时间：2013-04-13T13:51:27.627
> 
> 标签：mysql, select

我有一个带有一`score`列的产品表，上面有一个 B-Tree 索引。我有一个查询，它返回当前会话中未向用户显示的产品。我不能简单地使用简单的分页`LIMIT`，因为结果应该由`score`列排序，这可以在查询调用之间改变。

我目前的解决方案是这样的：

```
SELECT * 
FROM products p 
LEFT JOIN product_seen ps 
  ON (ps.session_id = ? AND p.product_id = ps.product_id )
WHERE ps.product_id is null
ORDER BY p.score DESC
LIMIT 30; 
```

这对于前几页效果很好，但响应时间与会话中已显示的产品数量呈线性增长，并在该数量达到约 300 时达到第二个标记。有没有办法在 MySQL 中解决这个问题？或者我应该以完全不同的方式解决这个问题？

* * *

**编辑：** 这是两个表：

```
CREATE TABLE `products` (
 `product_id` int(15) NOT NULL AUTO_INCREMENT,
 `shop` varchar(15) NOT NULL,
 `shop_id` varchar(25) NOT NULL,
 `shop_category_id` varchar(20) DEFAULT NULL,
 `shop_subcategory_id` varchar(20) DEFAULT NULL,
 `shop_designer_id` varchar(20) DEFAULT NULL,
 `shop_designer_name` varchar(40) NOT NULL,
 `created_at` timestamp NULL DEFAULT NULL,
 `product_url` varchar(255) NOT NULL,
 `name` varchar(255) NOT NULL,
 `description` mediumtext NOT NULL,
 `price_cents` int(10) NOT NULL,
 `list_image_url` varchar(255) NOT NULL,
 `list_image_height` int(4) NOT NULL,
 `ending` timestamp NULL DEFAULT NULL,
 `category_id` int(5) NOT NULL,
 `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 `included_at` timestamp NULL DEFAULT NULL,
 `hearts` int(5) NOT NULL,
 `score` decimal(10,5) NOT NULL,
 `rand_field` decimal(16,15) NOT NULL,
 `last_score_update` timestamp NULL DEFAULT NULL,
 `active` tinyint(1) NOT NULL DEFAULT '0',
 PRIMARY KEY (`product_id`),
 UNIQUE KEY `unique_shop_id` (`shop`,`shop_id`),
 KEY `score_index` (`active`,`score`),
 KEY `included_at_index` (`included_at`),
 KEY `active_category_score` (`active`,`category_id`,`score`),
 KEY `active_category` (`active`,`category_id`,`product_id`),
 KEY `active_products` (`active`,`product_id`),
 KEY `active_rand` (`active`,`rand_field`),
 KEY `active_category_rand` (`active`,`category_id`,`rand_field`)
) ENGINE=InnoDB AUTO_INCREMENT=55985 DEFAULT CHARSET=utf8 
```

* * *

```
CREATE TABLE `product_seen` (
 `seenby_id` int(20) NOT NULL AUTO_INCREMENT,
 `session_id` varchar(25) NOT NULL,
 `product_id` int(15) NOT NULL,
 `last_seen` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 `sorting` varchar(10) NOT NULL,
 `in_category` int(3) DEFAULT NULL,
 PRIMARY KEY (`seenby_id`),
 KEY `last_seen_index` (`last_seen`),
 KEY `session_id` (`session_id`,`seenby_id`),
 KEY `session_id_2` (`session_id`,`sorting`,`seenby_id`)
) ENGINE=InnoDB AUTO_INCREMENT=17431 DEFAULT CHARSET=utf8 
```

* * *

**编辑2：**
上面的查询是一个简化，这是真正的查询`EXPLAIN`：

```
EXPLAIN SELECT 
    DISTINCT p.product_id AS id, 
    p.list_image_url AS image, 
    p.list_image_height AS list_height, 
    hearts, 
    active AS available, 
    (UNIX_TIMESTAMP( ) - ulp.last_action) AS last_loved
FROM `looksandgoods`.`products` p
LEFT JOIN `looksandgoods`.`user_likes_products` ulp 
ON ( p.product_id = ulp.product_id AND ulp.user_id =1 )
LEFT JOIN `looksandgoods`.`product_seen` sb 
ON (sb.session_id = 'y7lWunZKKABgMoDgzjwDjZw1' 
    AND sb.sorting = 'trend'
    AND p.product_id = sb.product_id )
WHERE p.active =1
AND sb.product_id IS NULL
ORDER BY p.score DESC
LIMIT 30 ; 
```

* * *

解释输出，仍然有一个临时表和文件排序，虽然连接的键存在：

```
+----+-------------+-------+-------+----------------------------------------------------------------------------------------------------+------------------+---------+----------------------------------+------+----------------------------------------------+
| id | select_type | table | type  | possible_keys                                                                                      | key              | key_len | ref                              | rows | Extra                                        |
+----+-------------+-------+-------+----------------------------------------------------------------------------------------------------+------------------+---------+----------------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | p     | range | score_index,active_category_score,active_category,active_products,active_rand,active_category_rand | score_index      | 1       | NULL                             | 2299 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | ulp   | ref   | love_count_index,user_to_product_index,product_id                                                  | love_count_index | 9       | looksandgoods.p.product_id,const |    1 |                                              |
|  1 | SIMPLE      | sb    | ref   | session_id,session_id_2                                                                            | session_id       | 77      | const                            |  711 | Using where; Not exists; Distinct            |
+----+-------------+-------+-------+----------------------------------------------------------------------------------------------------+------------------+---------+----------------------------------+------+----------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:25:39.403

**新答案**

我认为*真正*查询的问题是`DISTINCT`子句。`product_seen`这意味着和表中的一个或两个可以为每个可能出现在结果集中的`user_likes_products`多行连接（考虑到表上缺少 s有点令人不安），这就是您包含该子句的原因。不幸的是，这也意味着 MySQL 必须创建一个临时表来处理查询。`product_id``UNIQUE KEY``product_seen``DISTINCT`

在我走得更远之前，如果可以的话...

```
ALTER TABLE product_seen ADD UNIQUE KEY (session_id, product_id, sorting); 
```

...和...

```
ALTER TABLE user_likes_products ADD UNIQUE KEY (user_id, product_id); 
```

...那么该`DISTINCT`子句是多余的，删除它应该可以解决问题。注意我并不是建议您一定需要添加这些键，而只是为了确认这些字段始终是唯一的。

如果不可能，那么可能还有另一种解决方案，但我需要更多地了解连接中涉及的表。

**旧答案**

一个`EXPLAIN`为您的查询产生...

```
+----+-------------+-------+------+---------------+------------+---------+-------+------+-------------------------+
| id | select_type | table | type | possible_keys | key        | key_len | ref   | rows | Extra                   |
+----+-------------+-------+------+---------------+------------+---------+-------+------+-------------------------+
|  1 | SIMPLE      | p     | ALL  | NULL          | NULL       | NULL    | NULL  |   10 | Using filesort          |
|  1 | SIMPLE      | ps    | ref  | session_id    | session_id | 27      | const |    1 | Using where; Not exists |
+----+-------------+-------+------+---------------+------------+---------+-------+------+-------------------------+ 
```

...这表明它没有在表上使用索引`products`，所以它必须进行表扫描和文件排序，这就是它很慢的原因。

我注意到有一个索引`(active, score)`，您可以通过将查询更改为仅显示活动产品来使用它...

```
SELECT *
FROM products p
LEFT JOIN product_seen ps
  ON (ps.session_id = ? AND p.product_id = ps.product_id )
WHERE p.active=TRUE AND ps.product_id is null
ORDER BY p.score DESC
LIMIT 30; 
```

...这将更`EXPLAIN`改为...

```
+----+-------------+-------+-------+-----------------------------+-------------+---------+-------+------+-------------------------+
| id | select_type | table | type  | possible_keys               | key         | key_len | ref   | rows | Extra                   |
+----+-------------+-------+-------+-----------------------------+-------------+---------+-------+------+-------------------------+
|  1 | SIMPLE      | p     | range | score_index,active_products | score_index | 1       | NULL  |   10 | Using where             |
|  1 | SIMPLE      | ps    | ref   | session_id                  | session_id  | 27      | const |    1 | Using where; Not exists |
+----+-------------+-------+-------+-----------------------------+-------------+---------+-------+------+-------------------------+ 
```

...现在正在进行范围扫描并且没有文件排序，这应该更快。

或者，如果您希望它也返回非活动产品，那么您`score`只需要添加一个索引，使用...

```
ALTER TABLE products ADD KEY (score); 
```

# android - 安卓 libgdx 触摸板

> ID：15988525
> 
> 赞同：0
> 
> 时间：2013-04-13T13:51:54.540
> 
> 标签：android, libgdx, touchpad

触摸板不可见，没有错误。他在“//创建触摸板皮肤”之间启动。我尝试了很多方法，但都错了。那里有什么问题？

```
public WorldRenderer(World world) {
    spriteBatch=new SpriteBatch();

    this.world = world;
    this.cam = new OrthographicCamera(Gdx.graphics.getWidth(), Gdx.graphics.getHeight());
    SetCamera(CAMERA_WIDTH / 2f, CAMERA_HEIGHT / 2f);  

    loadTextures();

//Create a touchpad skin    

   Texture touchpadTexture = new Texture(Gdx.files.internal("data/touchpad.png"));
    touchpadTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);     
   TextureRegion background = new TextureRegion(touchpadTexture, 0, 0, 75, 75);
   TextureRegion knob = new TextureRegion(touchpadTexture, 80, 0, 120, 120);
   TextureRegionDrawable backgroundDrawable = new TextureRegionDrawable(background);
   TextureRegionDrawable knobDrawable = new TextureRegionDrawable(knob);
   Touchpad touchpad = new Touchpad(10, new Touchpad.TouchpadStyle(backgroundDrawable, knobDrawable));
   touchpad.setBounds(15, 15, 200, 200);
   world.addActor(touchpad);

    //Create a touchpad skin  

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T21:07:04.763

I really do not see the misstake you made but i am trying to help. Your world must be a Stage.. for sure. So here is how i create my touchpad and add it to my stage and it does work without any problems. Maybe there is a problem with your creation of the `TouchpadStyle`.
The Manager is an assetmanager where i loaded my textures while loading the app.

```
private void initTouchpad() {
        skin = new Skin();
        skin.add("knob", this.game.manager.get("touchpad/touchKnob.png"));
        skin.add("background", this.game.manager.get("touchpad/test.png"));

        style = new TouchpadStyle();
        // skin.add
        style.knob = skin.getDrawable("knob");
        style.background = skin.getDrawable("background");

        pad = new Touchpad(10, style);
        pad.setBounds(0, Config.VIRTUAL_VIEW_HEIGHT - 150, 150, 150);
    }

//somewhere in my main
this.stage.addActor(pad); 
```

Hope this may helps.

# php - 对基于条件的搜索结果进行分页

> ID：15988533
> 
> 赞同：0
> 
> 时间：2013-04-13T13:52:36.440
> 
> 标签：php, pagination

这将是我第一次将基于条件的搜索与分页一起使用。

我想对我的搜索查询结果进行分页，并能够根据搜索条件转到我的搜索结果的下一页和上一页。现在分页返回表中的所有记录。我试图在 NEXT 和 PREVIOUS 按钮的 URL 链接中包含一个搜索词，但是当我单击按钮时，我仍然会在下一页加载 MySQL 表中的所有记录。搜索词（例如，gallery.php?cmaterial=$cmaterial）仅在我单击“下一步”而不是当前页面时出现在 URL 中。即使这样，搜索结果也与搜索词不匹配。

我试图从以前关于这个主题的帖子中学习，但我不确定我是不是错了。

这是我的代码：

```
<?php

$s=$_GET['s'];

// rows to return
$limit=12;

// check for a search parameter
//if (!isset($var))
//  {
//  echo "<p>We dont seem to have a search parameter!</p>";
//  exit;
//  }

$ctitle = mysql_real_escape_string($_POST['ctitle']);
$csubject = mysql_real_escape_string($_POST['csubject']);
$creference = mysql_real_escape_string($_POST['creference']);
$cat_id = ($_POST['cat_id']);
$cmaterial = mysql_real_escape_string($_POST['cmaterial']);
$ctechnic = mysql_real_escape_string($_POST['ctechnic']);
$cartist = mysql_real_escape_string($_POST['cartist']);
$csource = mysql_real_escape_string($_POST['csource']);
$stolen = mysql_real_escape_string($_POST['stolen']);

$sql = "SELECT * FROM collections WHERE c_id>0 AND `ctitle` LIKE '%".$ctitle."%' AND `csubject` LIKE '%".$csubject."%' AND `creference` LIKE '%".$creference."%' AND `cat_id` LIKE '%".$cat_id."%' AND `cmaterial` LIKE '%".$cmaterial."%' AND `ctechnic` LIKE '%".$ctechnic."%' AND `cartist` LIKE '%".$cartist."%' AND `csource` LIKE '%".$csource."%'  ORDER BY c_id ASC";

$sql_result = mysql_query ($sql, $connection ) or die ('request "Could not execute SQL query" '.$sql);

 $numresults=mysql_query($sql);
 $numrows=mysql_num_rows($numresults);

// next determine if s has been passed to script, if not use 0
  if (empty($s)) {
  $s=0;
  }

// get results
$sql .= " limit $s,$limit";
  $sql_result = mysql_query($sql) or die("Couldn't execute query");

$count = 1 + $s ;

while ($row = mysql_fetch_assoc($sql_result)) {
    $c_id=$row['c_id'];
?>

..............................................HTML RESULT TABLE ...................................................

<?php
$currPage = (($s/$limit) + 1);

//break before paging
  echo "<br />";

  // next we need to do the links to other results
  if ($s>=1) { // bypass PREV link if s is 0
  $prevs=($s-$limit);
  print "&nbsp;<a href=\"$PHP_SELF?s=$prevs&cmaterial=$cmaterial\">&lt;&lt;
  Prev 10</a>&nbsp&nbsp;";
  }

// calculate number of pages needing links
  $pages=intval($numrows/$limit);

// $pages now contains int of pages needed unless there is a remainder from division

  if ($numrows%$limit) {
  // has remainder so add one page
  $pages++;
  }
echo "</table>";
// check to see if last page
  if (!((($s+$limit)/$limit)==$pages) && $pages!=1) {

  // not last page so give NEXT link
  $news=$s+$limit;

    echo "&nbsp;<a href=\"$PHP_SELF?s=$news&cmaterial=$cmaterial\">Next 10 &gt;&gt;</a>";
  }

$a = $s + ($limit) ;
  if ($a > $numrows) { $a = $numrows ; }
  $b = $s + 1 ;
    echo "<p>Showing results $b to $a of $numrows</p>";

?> 
```

# internet-explorer - 拉斐尔不在 IE 中工作

> ID：15988536
> 
> 赞同：1
> 
> 时间：2013-04-13T13:52:45.517
> 
> 标签：internet-explorer, raphael

大家好，我正在使用 morris.js 图表。该图显示在 Chrome 中，但在 IE 10 中不起作用。这是我得到的 JS 错误

网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.2；Trident/6.0；.NET4.0E；.NET4.0C；InfoPath.3；.NET CLR 3.5.30729；.NET CLR 2.0.50727；.NET CLR 3.0.30729；AskTbCPUID/5.17.1.28235) 时间戳：2013 年 4 月 13 日星期六 13:46:23 UTC

消息：'Raphael' 未定义行：87 字符：7 代码：0 URI：http:// ***** **** /**/morris.js**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:14:20.983

将此添加为 HTML 的第一行

```
<!DOCTYPE HTML> 
```

这`<head></head>`部分：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

它将阻止 IE 切换到较旧的 (IE7-8) 版本。**

# ios - 代表为零

> ID：15988538
> 
> 赞同：1
> 
> 时间：2013-04-13T13:53:00.060
> 
> 标签：ios, properties, uiviewcontroller, delegates, synthesize

我在从父 SplitViewController 设置的 ViewController 上有一个属性：

**财产申报/综合**

```
@interface DownloadRecipesViewController_iPad : DownloadRecipesViewController<PopoverMenuDelegate, RecipeChangeDelegate>{
    id <NSObject, PopoverMenuParentDelegate, RecipeChangeDelegate, RecipeDownloadedDelegate> _selectionDelegate;
}

@property (strong) UIBarButtonItem *btnMenu;
@property (strong) id <NSObject, RecipeChangeDelegate, RecipeDownloadedDelegate> selectionDelegate; 
```

* * *

```
@implementation DownloadRecipesViewController_iPad

@synthesize btnMenu;
@synthesize selectionDelegate = _selectionDelegate; 
```

`viewDidLoad`我在父 SplitViewVC 的方法中连接了委托：

**连接代表**

```
self.downloadVc = [self.storyboard instantiateViewControllerWithIdentifier:@"RecipeDownload"];
[self.downloadVc setSelectionDelegate:self]; 
```

Child VC 中的一个按钮调用一个方法来触发一个事件到父 ViewController，但是当这个事件被调用时，委托是 nil 并且事件不会被触发。我绞尽脑汁想方设法找出发生这种情况的原因，但我完全不知所措。

代表在这里为零（**解雇代表**）：

```
-(IBAction)didTapMenu:(id)sender{
    if([_selectionDelegate respondsToSelector:@selector(shouldToggleMenu)])
        [_selectionDelegate shouldToggleMenu];
} 
```

我也尝试过没有支持属性，但遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:25:34.107

我最终解决这个问题的方法是：

1.  创建一个公开方法的新委托：`-(void)segueBeginning:(UIStoryboardSegue*)destination`
2.  使用此委托将prepareForSegue 从子UINavigationController 公开给父SplitViewController .3。当在子导航控制器中引发 prepareForSegue 时，在父 ViewController 中连接我的子 VC：

    ```
    if([destination.destinationViewController isKindOfClass:[DownloadRecipesViewController_iPad class]] && !self.downloadVc){ // download recipes
        self.downloadVc = destination.destinationViewController;
        self.downloadVc.selectionDelegate = self;
        [self.downloadVc setSnapshotChangeDelegate:self];
        [self.downloadVc.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects:btnAdd, nil]];
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:56:40.003

关于如何找到这个的建议如下。但首先，为什么不节省一些输入并删除 ivar 并删除 @synthesize ——此时它完全没有必要输入。此外，正如评论所说，代表几乎总是应该被键入为弱。

建议：

**1）为selectionDelegate**编写一个（临时）设置器，然后设置一个断点，您实际设置值（或之后），以便您可以验证它是否已设置，并且没有其他东西将其归零。

2）在IBAction方法上设置断点，在if语句所在的行，当你点击它时验证对象与你设置委托的那个对象相同，委托值是什么，然后查看**respondsTo**方法成功（使用单步）。

# ruby - Ruby Date 或 DateTime 对象的范围是多少？

> ID：15988539
> 
> 赞同：0
> 
> 时间：2013-04-13T13:53:01.600
> 
> 标签：ruby, date, datetime

Ruby Date 或 DateTime 对象可以表示的最早和最晚日期是什么？

更具体地说，是大于或小于 Javascript Date 对象的范围（1970 +/- 285,616 年）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:11:11.223

Ruby Date 和 DateTime 类将与其参考日期的偏移量存储为[Rational](http://ruby-doc.org/core-2.0/Rational.html)，因此是无界的。

Time 类通常限制为 unix 纪元 +/- 2^31 或 2^63 秒（取决于您是否在 64 位平台上）

# java - getResource() 出错

> ID：15988542
> 
> 赞同：0
> 
> 时间：2013-04-13T13:53:06.413
> 
> 标签：java, image, exception

我正在尝试在我的 JPanel 中显示图像。当我在 Eclipse 中测试时，这已经 100% 正常工作，但是当我导出并运行时，我得到一个堆栈跟踪。

这是我尝试访问文件的方式：

```
myPicture = ImageIO.read(Window.class.getResource("/images/audiorpglogo.png")); 
```

这就是我得到的：

```
java.lang.IllegalArgumentException: input == null!
    at javax.imageio.ImageIO.read(ImageIO.java:1362)
    at me.pogostick29.audiorpg.window.Window.<init>(Window.java:70)
    at me.pogostick29.audiorpg.window.WindowManager.setup(WindowManager.java:16)
    at me.pogostick29.audiorpg.AudioRPG.main(AudioRPG.java:29) 
```

# java - 是否可以通过词性搜索 Lucene 索引中的单词

> ID：15988546
> 
> 赞同：4
> 
> 时间：2013-04-13T13:53:20.040
> 
> 标签：java, solr, lucene, nlp, tokenize

我在 Lucene 索引中存储了大量文档，并且我正在使用 customAnalyzer，它基本上对文档内容进行标记化和词干化。

现在，如果我在文档中搜索“love”一词，我会得到将 love 用作名词或动词的结果，而我只想要那些仅将 love 用作动词的文档。

如果我还可以将单词的词性与单词一起提到，那么如何实现这样的功能，以使结果仅将love用作动词而不用作名词？

我可以想出一种方法来初始词性标记文档的每个单词并通过在词性后面附加带有“_”或其他内容的词来存储它，然后进行相应的搜索，但想知道是否有在 Lucene 中执行此操作的更聪明的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:26:11.247

我可以想到以下方法。

**方法一**

就像您提到的那样：在索引时识别词性标签并将其附加到实际术语。在查询时做同样的事情。

我想讨论相关的缺点。

*缺点：*

1) 未来的要求可能会要求您获得结果，而不管词性如何。包含修改条款的索引将不起作用。

2) 您可能想要执行像“术语：名词或形容词”这样的 BooleanQuery。您必须自己编写查询扩展器。

**方法二**

尝试使用 Lucene 的 Payloads 功能。

这是[关于 Lucene Payloads 的简短教程](http://searchhub.org/2009/08/05/getting-started-with-payloads/)。

解决您的用例的步骤。

1) 以 Payload 的形式存储词性标签。

2) 每个词性标签都有自定义的相似度类。

3) 根据查询，将对应的 CustomSimilarity 分配给 IndexSearcher。例如，为名词查询分配 NounBoostingSimilarity。

4）基于有效负载提高或“降低”文档的分数。上述教程中给出的示例。

5) 编写一个自定义收集器来过滤掉分数不符合上述分数提升逻辑的文档。

这种方法的优点是索引与任何其他正常搜索保持兼容。

*缺点：*

1) 维护开销：必须为每个相似性维护多个 IndexSearcher。2）有点复杂的代码解决方案。

坦率地说，我对自己的解决方案并不满意，只是想让您知道存在另一种方法。这完全取决于您的方案，该项目是学术一次性项目还是商业项目等。

# java - 字符串标记器的问题

> ID：15988547
> 
> 赞同：-3
> 
> 时间：2013-04-13T13:53:26.740
> 
> 标签：java, string, stringtokenizer

我有一组 3 个字符串，每个字符串都在不同的行中，它们是用空格分隔的整数。

```
1 1 2
3 4 4
4 5 5 
```

我想将它们输入到字符数组中，并以这种方式使用 StringTokenizer：

```
for(int j=0;i<n1;i++){
  s2=bure.readLine();         
  st1=new StringTokenizer(s2);

  for(int k=0;k<n2;k++){
    a[j][k]=Integer.parseInt(st1.nextToken());
  }      
} 
```

其中 n1 和 n2 是行数和列数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:37:56.883

您的代码中似乎有错字，第一行 - 'i' 应该是 'j'：

```
for(int j=0;j<n1;j++){
  s2=bure.readLine();         
  st1=new StringTokenizer(s2);

  for(int k=0;k<n2;k++){
    a[j][k]=Integer.parseInt(st1.nextToken());
  }      
} 
```

试试这个方法。如果您从外部源接收数据，并且不是您自己构建的，那么使用 st1.hasMoreElements() 似乎也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:25:33.240

```
 Scanner sc = new Scanner(System.in);
    StringTokenizer st1;
    final int nrLines = 3;
    final int maxNrColumns = 3;
    int[][] a = new int[nrLines][maxNrColumns];
    for (int j = 0; j < nrLines; j++) {
        String s2 = sc.nextLine();
        st1 = new StringTokenizer(s2);
        for (int k = 0; k < maxNrColumns; k++) {
            if (st1.hasMoreElements()) {
                a[j][k] = Integer.parseInt(st1.nextToken());
            }
        }
    }
    // show the array
    for (int i = 0; i < nrLines; i++) {
        for (int j = 0; j < maxNrColumns; j++) {
            System.out.print(a[i][j]);
        }
        System.out.println("");
    } 
```

# android - NdefRecord 崩溃取决于设备

> ID：15988548
> 
> 赞同：1
> 
> 时间：2013-04-13T13:53:29.930
> 
> 标签：android, nfc

我有一种奇怪的情况，一行代码使一部手机崩溃，另一部没有。特定的行是我创建新的 NdefRecord() 的行。我在下面包含了代码片段。虽然评论中的版本适用于两款手机，但我仍然想知道为什么我会看到这种效果。

我不清楚 NdefRecord (short tnf, byte[] type, byte[] id, byte[] payload) 的构造函数的引用。根据源代码，它不应该使用 null 作为参数（[Grepcode](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/nfc/NdefRecord.java#NdefRecord.%3Cinit%3E%28short,byte%5B%5D,byte%5B%5D,byte%5B%5D%29)的源代码）。

```
 private void setNdefBinary(byte[] bdata, int size, int index) {
    NdefRecord record;
    byte[] payload;

    // copy bytes into payload
    payload = new byte[size + 1];
    payload[0] = (byte) (index & 0xff);
    System.arraycopy(bdata, 0, payload, 1, size);

    /* this works on Xperia S and Samsung S3
        byte[] empty = new byte[0]; 
        record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, payload); */

        // this crashes on Xperia S, but works on Samsung S3
        record = new NdefRecord(NdefRecord.TNF_UNKNOWN, null, null, payload);

    ndefRecords[index] = record; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:47:14.753

您会在 Android SDK 中看到 NdefRecord 的不同实现。较新的 Android SDK 允许空参数，而较早的则不允许。

Android >= 16 接受空负载。传递 inn 空字节数组以使其全部向后兼容。

# spring - Spring MVC 简单项目 - 404

> ID：15988552
> 
> 赞同：1
> 
> 时间：2013-04-13T13:53:41.217
> 
> 标签：spring, tomcat, spring-mvc, libraries

我是 Spring 新手，我正在尝试创建一个简单的项目，但我无法弄清楚！

我有最新的 java JDK 7。

Apache Tomcat 7 是最新的。

Spring 3 框架/Eclipse JUNO 4 集成。

[这](http://emanuelepirro.altervista.org/Java_EE_-_SpringMVCsrccontrollerHomeController.png) 是我的项目结构（对不起，我没有 10 个声誉点的外部链接）

我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

我的 servlet-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Scans within the base package of the application for @Components to configure as beans -->
    <!-- @Controller, @Service, @Configuration, etc. -->
    <context:component-scan base-package="controller" />

    <!-- Enables the Spring MVC @Controller programming model -->
    <mvc:annotation-driven />

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

</beans> 
```

我的 HomeController.java 文件：

```
package controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

/**
 * Handles requests for the application home page.
 */
@Controller
public class HomeController {

    @RequestMapping(value = "/home")
    public String home() {
        System.out.println("HomeController: Passing through...");
        return "home";
    }
} 
```

我的问题是，当我从浏览器调用 servlet 时（例如以这种方式）：

```
http://localhost:8080/SpringMVC/home 
```

**我有一个 HTTP 400 错误 - 描述 请求的资源不可用。**

我怀疑是库问题，但我将所有 Spring 库（以及更多）放在 WEB-INF/lib 中。在 Eclipse 项目中，显然我在类路径中添加了所有内容。

我粘贴 Tomcat 的 localhost 日志：

*

```
apr 13, 2013 3:44:43 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextDestroyed()
apr 13, 2013 3:44:43 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextDestroyed()
apr 13, 2013 3:44:47 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
apr 13, 2013 3:44:47 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
apr 13, 2013 3:44:47 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@189b904') 
```

*

和 Tomcat strERR 日志：

*

```
2013-04-13 15:44:46 Commons Daemon procrun stderr initialized
apr 13, 2013 3:44:47 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\AMD APP\bin\x86;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files\NVIDIA Corporation\PhysX\Common;C:\oraclexe\app\oracle\product\10.2.0\server\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Windows Live\Shared;C:\Program Files\Autodesk\Backburner\;C:\Program Files\QuickTime\QTSystem\;C:\Program Files\Microsoft\Web Platform Installer\;C:\Program Files\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files\Windows Kits\8.0\Windows Performance Toolkit\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;;.
apr 13, 2013 3:44:47 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
apr 13, 2013 3:44:47 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 397 ms
apr 13, 2013 3:44:47 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
apr 13, 2013 3:44:47 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.39
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\.metadata
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\docs
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\examples
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\host-manager
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\manager
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\ROOT
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\Servers
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\SpringMVC
apr 13, 2013 3:44:47 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
apr 13, 2013 3:44:47 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
apr 13, 2013 3:44:47 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 540 ms 
```

*

我筋疲力尽，我从昨天开始就在为这个项目而战，请帮帮我！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:32:48.353

10 次中有 9 次在 Spring MVC 中看到 404 错误，这通常是因为我粗手指了控制器返回的视图名称/路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:08:12.913

```
<servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </context-param>
    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:32:51.177

“C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\SpringMVC”目录中究竟有什么？它有 webapp 目录结构吗？

根据 stdErr 日志，Tomcat 似乎没有检测到您的 appServlet(org.springframework.web.servlet.DispatcherServlet)。

如果您正确部署了 SpringMVC 应用程序，您应该会在日志文件中看到以下消息：

```
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization started
...
...
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization completed in 725 ms 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T11:34:31.777

这可能是由于缺少所需的库而导致的。以下是 spring 包含在其模板项目中的库列表（库版本可能不同）。

![SpringMVC模板项目中的默认库列表](https://i.stack.imgur.com/it3D2.png)

继续前进时，您可能会体验到复制库是痛苦的，必须有更好的方法来做到这一点。

我准备了[一篇](http://anuruddhapremalal.blogspot.com/2013/02/hello-world-spring-mvc-application.html)关于如何借助 eclipse 的 spring toolsuit 插件轻松设置 springMVC 项目的博文。希望它对您有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-28T02:26:48.077

根据您的代码结构，一切看起来都很完美。
如果我是你，我会检查 System.out.println() 值以查看控制器是否真的被调用，然后我会确保 home.jsp 的位置是正确的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-14T07:29:13.983

Try changing the request mapping of controller method to :

```
@Controller
public class HomeController {

    @RequestMapping(value = "home")
    public String home() {
        System.out.println("HomeController: Passing through...");
        return "home";
    }
} 
```

Remove `/` from `/home`.

Also your `web.xml` does not seem to have context listener.

```
<context-param>
    <param-name>contextConfigLocation</param-name><param-value>     
        /WEB-INF/spring/appServlet/spring-security.xml,
        /WEB-INF/spring/appServlet/hibernate-config.xml         
    </param-value>
</context-param>

<!-- you seem to be missing this -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
<servlet-name>appServlet</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

# android - 无法在 MacDonst 视频播放器中播放此视频错误

> ID：15988553
> 
> 赞同：1
> 
> 时间：2013-04-13T13:53:44.497
> 
> 标签：android, cordova, video-player

我正在尝试通过 MACDONST 插件播放一个简单的 .MP4，但在显示视频播放器后立即收到错误消息“无法播放此视频”。我可以在 Android 独立视频播放器中播放视频文件，也可以通过插件调用 Youtube 视频。非常感谢您的帮助！这是我的页面代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>InAppBrowser.addEventListener Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="video.js"></script>

       <script type="text/javascript">

        //app.initialize();

        function init()
         {
           document.addEventListener("deviceready", console.log('ready'), true);
        }

       function playVideo(vidUrl) {
        //alert("Starting Vid Script");
           window.plugins.videoPlayer.play(vidUrl);
      }
  </script>

   </head>
    <body onload="javascript:init()">
          <a href="#" onclick="playVideo('https://www.youtube.com/watch?v=gYOLV66XukY')">Play Stream</a><br>
          <a href="#" onclick="playVideo('file:///stigma.mp4')">Play File</a><br>
            <a href="#" onclick="playVideo('file:///sdcard/stigma.mp4')">Play File from SD</a><br>
    </div>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T12:57:42.767

首先，您在 www 位置目录中创建目录，我将其命名为视频。然后将您的 stigma.mp4 文件放入视频目录中，然后像下面提到的那样调用您的路径

播放文件

注意：您的视频文件不包含任何特殊字符，如 (, & - & _ 等。) 只有文件扩展名 .mp4

# php - php登录会话未登录但重复同一页面

> ID：15988556
> 
> 赞同：0
> 
> 时间：2013-04-13T13:54:34.150
> 
> 标签：php, mysql

```
session_start();
      include_once 'oesdb.php';

 //redirect to registration page
      if(isset($_REQUEST['register']))
      {
            header('Location: register.php');
      }
      else if($_REQUEST['stdsubmit'])
      {

 //Perform Authentication
          $result=executeQuery("select *,DECODE(stdpassword,'oespass') as std from student where stdname='".htmlspecialchars($_REQUEST['name'],ENT_QUOTES)."' and stdpassword=ENCODE('".htmlspecialchars($_REQUEST['password'],ENT_QUOTES)."','oespass')");
          if(mysql_num_rows($result)>0)
          {

              $r=mysql_fetch_array($result);
              if(strcmp(htmlspecialchars_decode($r['std'],ENT_QUOTES),(htmlspecialchars($_REQUEST['password'],ENT_QUOTES)))==0)
              {
                  $_SESSION['stdname']=htmlspecialchars_decode($r['stdname'],ENT_QUOTES);
                  $_SESSION['stdid']=$r['stdid'];
                  unset($_GLOBALS['message']);
                  header('Location: stdwelcome.php');
              }else
          {
              $_GLOBALS['message']="Check Your user name and Password.";
          }

          }
          else
          {
              $_GLOBALS['message']="Check Your user name and Password.";
          }
          closedb(); 
```

这是我的 index.php 的一部分。它注册成功，当我检查服务器上的数据库时，看到新用户，但是当我尝试登录时，它通过不显示无效密码来接受，但它拒绝登录。我猜它没有创建登录所需的会话。

# css - 加载带有大图像的 DIV 会停止加载页面的其余部分

> ID：15988558
> 
> 赞同：1
> 
> 时间：2013-04-13T13:54:57.607
> 
> 标签：css, performance, html, bxslider

我是[http://concretetoboggan.uwaterloo.ca](http://concretetoboggan.uwaterloo.ca)的网站管理员，并且是第一次做网页设计师，所以我在 CSS 上有点磕磕绊绊。我一直有一个奇怪的问题。

如果您访问该链接（第一次），则页面会在主幻灯片上停顿 2-3 秒，然后再加载页面的其余部分。这真的很让人分心，而且看起来很容易修复，但我无法修复它。

这是该站点的网络时间线，如您所见，Firebug 显示出一个神秘的差距。 ![在此处输入图像描述](https://i.stack.imgur.com/imQix.jpg)

页面执行的事件顺序是（假设是）：

1.  在页面开头加载 jQuery
2.  加载页面
3.  显示幻灯片的第一张图像（其余图像加载到具有“隐藏”类的 div 中，大概是浏览器异步执行此操作）
4.  继续加载页面
5.  移除 DOM 上的“隐藏”类
6.  在 DOM 上加载 jQuery bxSlider 准备就绪

每张幻灯片都由一个内部带有 img 标签的 div 和一个绝对位于底部：0 的标题栏子 div 组成。

我已经厌倦了以下优化，这些优化几乎没有帮助：

*   删除幻灯片下方加载的表格（似乎加快了速度，仍然停滞不前）
*   减小加载图像的大小（加快速度，仍然停滞不前）
*   将 img 'src' 放在 'dsrc' 属性中，然后在 DOM 就绪时重新分配它（仍然停止）
*   将图像放在背景中：div 的 CSS（不需要的布局问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:02:13.253

通常，“停滞”是由于页面没有足够的信息来计算布局，因为它在加载图像之前不知道图像的尺寸。

如果您碰巧知道图像的尺寸，则可以通过将`<img>`标签从...更改来避免此特定问题

```
<img src="myimage.jpg"/> 
```

...到...

```
<img src="myimage.jpg" width="640" height="480"/> 
```

...或者无论他们碰巧是什么。

但是，页面停滞的原因还有很多。

* * *

**更新**

有时您可以做的另一件事来加快速度：如果您正在加载带有标签的脚本，该`<script>`标签不需要呈现页面，但仅用于处理后续用户输入，您可以将脚本加载推迟到之后页面已通过添加`defer`属性呈现，例如更改...

```
<script src="http://someslowsite.com/somescript.js"> 
```

...到...

```
<script src="http://someslowsite.com/somescript.js" defer="defer"> 
```

...但是如果您需要脚本来呈现页面，那么这是不可能的。如果您认为用户能够比第三方网站更快地从您的网站加载脚本，请制作副本并自己托管。

# php - 在 php 中编码图形进度条（覆盖问题）

> ID：15988559
> 
> 赞同：1
> 
> 时间：2013-04-13T13:55:00.763
> 
> 标签：php, gd

![在此处输入图像描述](https://i.stack.imgur.com/GB9rJ.jpg)

到目前为止，我有后台工作，并且我有`%`漂浮在酒吧顶部的气泡工作。使用 PHP/GD 函数一切顺利。

但我不知道如何添加黄色部分。我的意思是，我可以轻松地叠加纯色。但是我将如何显示带有垂直条纹、渐变、圆形边框和内阴影的进度条呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:06:55.757

实际上，我找到了一个使用`php`,`javascript`和`html` [here](http://w3shaman.com/article/php-progress-bar-script)的示例，您也可以在[此处](http://w3shaman.com/article/php-progress-bar-script)使用 jquery 实现。`html`这是我在和`css` [这里](http://jsfiddle.net/VhRtC/)制作的一个简单的。

### 编辑

其实是有办法的。

`PHP/GD`

PHP 代码

```
<?php  
// set the type of data (Content-Type) to PNG image  
header("Content-Type: image/png");  

// extract GET global array  
extract($_GET);  

// set defaults  
if(! isset($max)) $max = 100;  
if(! isset($val)) $val = 100;  

// this method prepare blank true color image with given width and height  
$im = imagecreatetruecolor(400, 20);  

// set background color (light-blue)  
$c_bg = imagecolorallocate($im, 222, 236, 247);  
// set foreground color (dark-blue)  
$c_fg = imagecolorallocate($im, 27, 120, 179);  

// calculate the width of bar indicator  
$val_w = round(($val * 397) / $max);  

// create a rectangle for background and append to the image  
imagefilledrectangle($im, 0, 0, 400, 20, $c_bg);  
// create a rectangle for the indicator and appent to the image  
imagefilledrectangle($im, 2, 2, $val_w, 17, $c_fg);  

// render the image as a PNG  
imagepng($im);  

// finally destroy image resources  
imagedestroy($im);  
?> 
```

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />  
<title>PHP GD-Progress Bar</title>  
</head>  

<body>  

    <img src="progressbar.php?max=100&val=70" />  

</body>  

</html> 
```

# python - 如何在python中使这种嵌套求和有效？

> ID：15988563
> 
> 赞同：2
> 
> 时间：2013-04-13T13:55:22.560
> 
> 标签：python, dictionary, nested, sum

我有一个问题是要在寻根算法中使用一个有效的函数。我需要创建一个对标签进行三重求和的函数，其中包含对一对列表的三重求和。我已经尝试了几种实现，例如使用嵌套列表、字典、将内部三重求和拆分为两个双求和（带有中间列表）、使用 itertools.izip() 将“m”和“n”字典/列表分开一起检查 R 和 E，可能还有一些我忘记了。

这个想法是我需要能够区分其他函数的标签，所以我需要一种有效的方法来存储、访问和汇总这些数字集。

现在，这个函数是迭代的一部分，所以第一次，这些列表大部分是空的。然后我需要对电子词典中的每个值使用寻根算法（非常简单）。使用根查找算法（取决于此函数）后，列表将重新填充其解决方案。这意味着在第二次迭代中，每个列表将包含大约 1000 个数字。之后，rootfinding 再次与这个新函数一起使用，在每个列表中给出（重新组合后）1000 个新数字。

显然，如果在第一次迭代中这个寻根已经花费了几分钟，我就有问题了。我对第一次迭代有一个特定的实现（由于列表内容中的所有空/只有一个值，它减少到标签上的 3 个循环），它可以在两秒内找到所有这些根。

我怎样才能有效地进行汇总，同时仍然能够区分各种列表？

提前致谢

注意：这段代码不是我最漂亮的尝试，但它是我想要完成的最清楚的。

```
E = {}
R = {}
for i in labels:
    E[i] = {'m':[i], 'n':[]}    #the label happens to be the value that's in here
    E[-i] = {'m':[], 'n':[-i]}
    R[i] = {'m':[1], 'n':[]}
    R[-i] = {'m':[], 'n':[1]}

def function(A, En):
    temp = 0
    for a in E:
        if (not(ACTIVATE) or a != A):
            for b in E:
                for c in E:
                    if ( not(ACTIVATE) or b != c):
                        for i in xrange(len(R[a]['n'])):
                            for j in xrange(len(R[b]['m'])):
                                for k in xrange(len(R[c]['m'])):
                                    temp += R[a]['n'][i]*R[b]['m'][j]*R[c]['m'][k]/(En - (-E[a]['n'][i] + E[b]['m'][j] + E[c]['m'][k]))
                        for i in xrange(len(R[a]['m'])):
                            for j in xrange(len(R[b]['n'])):
                                for k in xrange(len(R[c]['n'])):
                                    temp += R[a]['m'][i]*R[b]['n'][j]*R[c]['n'][k]/(En + (E[a]['m'][i] - E[b]['n'][j] - E[c]['n'][k]))
    return .5*temp 
```

# wordpress - 当您进行空白搜索时，WordPress 搜索会转到帖子页面

> ID：15988564
> 
> 赞同：1
> 
> 时间：2013-04-13T13:55:25.403
> 
> 标签：wordpress, search

是的，我的wordpress主题是我放在一起的......

当您单击搜索按钮（搜索字段为空）时，它会将您带到博客页面。我已将 index.php 指定为博客页面，并创建了另一个页面并将其指定为主页。

任何人都可以帮忙吗？它不是一个主要问题，但它是我想摆脱的一个小故障。

谢谢。

特里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-03T05:47:41.070

我也遇到了同样的问题，这是wordpress默认的。

但幸运的是，我找到了一些对我有帮助的东西。

在“Functions.php”中添加以下内容

```
 function SearchFilter($query) {
    // If 's' request variable is set but empty
    if (isset($_GET['s']) && empty($_GET['s']) && $query->is_main_query()){
        $query->is_search = true;
        $query->is_home = false;
    }
    return $query;}
add_filter('pre_get_posts','SearchFilter'); 
```

然后在 search.php 中替换下面的行（第 15 行）

```
<?php if ( have_posts() && strlen( trim(get_search_query()) ) != 0 ) : ?> 
```

也许它也会帮助你

有关详细信息，请阅读：[自定义空搜索 wordpress](http://www.evagoras.com/2012/11/01/how-to-handle-and-customize-an-empty-search-query-in-wordpress/#comment-12185)

# linux - 使用 vmstat 时没有通过管道写入任何内容

> ID：15988565
> 
> 赞同：0
> 
> 时间：2013-04-13T13:55:27.630
> 
> 标签：linux, bash

我希望写入终端或文件的一些命令管道在经过很长时间之前不会写入任何内容。

看起来数据没有被行缓冲，但是如果我使用 Ctrl-C 发送 SIGINT ，则不会出现任何预期的输出。是什么原因造成的？

当我最终决定停止收集时，我想在不丢失数据的情况下修改和收集 vmstat 输出的每一行。

以下是一些密切相关的例子：

```
output to terminal: vmstat -n 1 | sed ''
output to terminal: echo foo | sed '' | tee /dev/null
output to file: vmstat -n 1 > somefile
output to file: echo foo | sed '' > somefile
no output to terminal: vmstat -n 1 | sed '' | tee /dev/null
no output to file: vmstat -n 1 | sed '' > somefile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:22:57.350

You can try [`stdbuf`](http://linux.die.net/man/1/stdbuf) with option `--output=L` or `--output=0` to make the output line buffered or unbuffered respectively

```
stdbuf --output=L vmstat -n 1 >somefile 
```

# java - 在 Java CORBA 中传递 DII 参数

> ID：15988572
> 
> 赞同：1
> 
> 时间：2013-04-13T13:56:02.810
> 
> 标签：java, corba, idl

我有以下 IDL 接口：

```
 interface ItemA : Item {
     void actionA(in float a, out long b);
  }; 
```

在我的 Java 实现中，我想`actionA`动态调用操作（使用 DII）。这里的`item`对象实现了`Item`接口，因此对`actionA`. 这是片段：

```
org.omg.CORBA.Request r = item._request("actionA");
r.add_in_arg().insert_float(a);
// add the out argument
r.set_return_type(orb.get_primitive_tc(org.omg.CORBA.TCKind.tk_void));
r.invoke();
// get the out argument result 
```

我该如何填写这些空白？我尝试了各种方法，主要是不同的用途，`r.add_out_arg()`但似乎没有任何效果。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:08:31.347

试试这个：

```
org.omg.CORBA.Request r = item._request("actionA");
r.add_in_arg().insert_float(a);
Any val = r.add_out_arg();
val.type(orb.get_primitive_tc(TCKind.tk_long));
r.set_return_type(orb.get_primitive_tc(org.omg.CORBA.TCKind.tk_void));
r.invoke();

if( r.env().exception() == null )
{
    System.out.println("returned: " + r.arguments().item(1).value().extract_long());  
} 
```

它对我有用（我已经在某个地方看到过这个 idl ......：P）。

# mysql - mysql程序-运行总计

> ID：15988573
> 
> 赞同：1
> 
> 时间：2013-04-13T13:56:19.907
> 
> 标签：mysql, stored-procedures, cumulative-sum

当试图在 phpmyadmin 的 SQL 窗口中运行它时，会返回以下错误。

# SQL

```
DELIMITER $$

DROP FUNCTION IF EXISTS `stock_in_stock_ids` $$
CREATE DEFINER=`root`@`localhost` FUNCTION `stock_in_stock_ids`(_running_total_limit INT, _product_id INT, _block_id INT) RETURNS TEXT
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE _running_qty INT DEFAULT 0;
    DECLARE _id INT;
    DECLARE _qty INT;
    DECLARE _ids TEXT DEFAULT NULL;

    DECLARE _cur CURSOR FOR
        SELECT id, qty
        FROM stock
        WHERE block_id=_block_id && type=2 && product_id=_product_id
        ORDER BY time DESC, id DESC;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    OPEN _cur;

    read_loop: LOOP
        FETCH _cur INTO _id, _qty;

        IF done THEN
            SET _ids = '';
            LEAVE read_loop;
        END IF;

        SET _running_qty = _running_qty + _qty;
        SET _ids = CONCAT_WS(',', _ids, _id);

        IF _running_qty >= _running_total_limit THEN
            LEAVE read_loop;
        END IF;
    END LOOP read_loop;

    CLOSE _cur;

    RETURN _ids;
END $$

DELIMITER ; 
```

# 错误

```
#1418 - This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable) 
```

# 更新（工作解决方案）

```
SELECT qty, price_cost, @running_total:=@total running_total, @total:=@total+qty total
FROM stock, (SELECT @running_total:=0, @total:=0) vars
WHERE block_id=101 && type=2 && product_id=20
HAVING running_total<=3000
ORDER BY time DESC, id DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:11:48.870

您想使用存储过程但正在使用函数。有区别，你知道吗？

另外我认为您根本不需要程序，更不用说游标了。光标非常昂贵。

这能得到你想要的吗？

```
SELECT * FROM (
  SELECT 
  id, 
  qty,
  @running_total:=@running_total + qty as running_total
  FROM stock
  , (SELECT @running_total:=0) vars
  WHERE block_id=_block_id && type=2 && product_id=_product_id
  ORDER BY time DESC, id DESC
) sq 
WHERE running_total <= $yourRunningTotalLimit 
```

# spring - 为嵌入式 tomcat 指定自定义 web.xml

> ID：15988578
> 
> 赞同：11
> 
> 时间：2013-04-13T13:56:41.990
> 
> 标签：spring, tomcat, tomcat7, embedded-tomcat-7

使用嵌入式 tomcat 实例时，有没有办法指定不同于`web.xml`标准的方法？`WEB-INF/web.xml`

我想`web.xml`在我的`src/test/resources`（或其他一些区域）中放置一个并`web.xml`在启动嵌入式 tomcat 时参考它。

这是我现有的启动tomcat实例的代码

```
tomcat = new Tomcat();
String baseDir = ".";
tomcat.setPort(8080);
tomcat.setBaseDir(baseDir);
tomcat.getHost().setAppBase(baseDir);
tomcat.getHost().setAutoDeploy(true);
tomcat.enableNaming();

Context ctx = tomcat.addWebApp(tomcat.getHost(), "/sandbox-web", "src\\main\\webapp");
File configFile = new File("src\\main\\webapp\\META-INF\\context.xml");
ctx.setConfigFile(configFile.toURI().toURL());

tomcat.start(); 
```

我从一个 tomcat 实例启动这个服务器，我想在运行单元测试时执行以下操作

*   关闭`contextConfigLocation`
*   指定一个自定义`ContextLoaderListener`来设置嵌入式 tomcat 的父`ApplicationContext`级。

这个文件可以这样指定：

```
File webXmlFile = new File("src\\test\\resources\\embedded-web.xml"); 
```

# 编辑

在经历了很多挫折之后，我意识到无论我做什么，我都无法说服 tomcat`WEB-INF`寻找`web.xml`. 看来我必须完全忽略并以编程方式`web.xml`设置项目。`web.xml`

我最终得到了这个配置：

## cucumber.xml 用于配置测试

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <bean id="applicationContextProvider" class="ca.statcan.icos.sandbox.ApplicationContextProvider"/>

    <bean id="sandBoxDataSource" class="org.apache.tomcat.dbcp.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:mem:testdb;shutdown=true;" />
        <property name="username" value="SA" />
        <property name="password" value="" />
    </bean>

    <!-- Support for JPA related annotation support (@PersistenceUnit and @PersistenceContext) -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <!-- JTA Configuration -->
    <bean id="jtaTransactionManager" class="com.atomikos.icatch.jta.UserTransactionManager"
        init-method="init" destroy-method="close">
        <property name="forceShutdown"><value>true</value></property>
    </bean>

    <bean id="jtaUserTransaction" class="com.atomikos.icatch.jta.UserTransactionImp" />

    <bean id="springTransactionManager"
        class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManager" ref="jtaTransactionManager" />
        <property name="userTransaction" ref="jtaUserTransaction" />
    </bean>

    <!-- JPA Entity Manager configuration -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
        lazy-init="true">
        <property name="persistenceUnitName" value="sandBox" />    
        <property name="dataSource" ref="sandBoxDataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="database" value="SQL_SERVER" />
                <property name="showSql" value="true" />
                <property name="generateDdl" value="true" />
            </bean>
        </property>
        <property name="jpaPropertyMap">
            <props>
                <prop key="hibernate.archive.autodetection">class</prop>
                <prop key="hibernate.cache.use_second_level_cache">false</prop>
                <prop key="hibernate.cache.use_query_cache">false</prop>
                <!--  Second Level Cache : EHCache in dev
                <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.EhCacheProvider</prop> -->
                <prop key="hibernate.hbm2ddl.auto">create</prop>
             </props>
        </property>
    </bean>

    <bean class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <import resource="classpath:META-INF/applicationContext-core.xml" />
    <import resource="classpath:META-INF/applicationContext-web.xml" />

</beans> 
```

## applicationContext-core.xml - 配置服务的地方

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd"
    default-autowire="byName">

    <bean id="propertyPlaceholderConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations" value="classpath*:META-INF/fms-local.properties" />
        <property name="systemPropertiesModeName">
            <value>SYSTEM_PROPERTIES_MODE_OVERRIDE</value>
        </property>
    </bean>

    <!-- 
    Classpath scanning to load all the service classes
  -->
    <context:component-scan base-package="ca.statcan"
        use-default-filters="false">
        <context:include-filter type="regex" expression="ca\.statcan\.icos.*\.service\..*Service" />
        <context:include-filter type="regex" expression="ca\.statcan\.icos.*\.builders\..*Builder" />
    </context:component-scan>

        <!-- 
    Spring TransactionManager
  -->
    <tx:advice id="txAdvice" transaction-manager="springTransactionManager">
        <tx:attributes>
            <!-- all methods starting with 'get' are read-only -->
            <tx:method name="get*" read-only="true" propagation="SUPPORTS" isolation="DEFAULT"/>
            <tx:method name="find*" read-only="true" propagation="SUPPORTS" isolation="DEFAULT"/>
            <!-- other methods use the default transaction settings -->
            <tx:method name="*" read-only="false" propagation="REQUIRED" isolation="DEFAULT"/>
        </tx:attributes>
    </tx:advice>

    <!-- 
    AOP Weaving for all Service methods
  -->
    <aop:config proxy-target-class="true">
        <aop:pointcut id="icosServiceMethods" expression="execution(* ca.statcan.icos..*.service.*.*(..))" />
        <aop:advisor advice-ref="txAdvice" pointcut-ref="icosServiceMethods" />
    </aop:config>

</beans> 
```

## 自定义 ContextLoaderListener

```
public class EmbeddedContextLoaderListener extends ContextLoaderListener {

    @Override
    protected WebApplicationContext createWebApplicationContext(ServletContext sc) {
        GenericWebApplicationContext context = new GenericWebApplicationContext(sc);
        context.setParent(ApplicationContextProvider.getApplicationContext());
        return context;
    }

    @Override
    protected ApplicationContext loadParentContext(ServletContext servletContext) {
        return ApplicationContextProvider.getApplicationContext();
    }
} 
```

**修改的嵌入式 Tomcat 包装器**

```
public class EmbeddedTomcat {
    /** Log4j logger for this class. */
    @SuppressWarnings("unused")
    private static final Logger LOG = LoggerFactory.getLogger(EmbeddedTomcat.class);

    private Tomcat tomcat;

    public void start() {
        try {
            tomcat = new Tomcat();
            String baseDir = ".";
            tomcat.setPort(8080);
            tomcat.setBaseDir(baseDir);
            tomcat.getHost().setAppBase(baseDir);
            tomcat.getHost().setDeployOnStartup(true);
            tomcat.getHost().setAutoDeploy(true);
            tomcat.enableNaming();

            Context context = tomcat.addContext("/sandbox-web", "src\\main\\webapp");
            Tomcat.initWebappDefaults(context);
            configureSimulatedWebXml(context); 

            LOG.info("Starting tomcat in: " + new File(tomcat.getHost().getAppBase()).getAbsolutePath());

            tomcat.start();
        } catch (LifecycleException e) {
            throw new RuntimeException(e);
        }
    }

    public void stop() {
        try {
            tomcat.stop();
            tomcat.destroy();
            FileUtils.deleteDirectory(new File("work"));
            FileUtils.deleteDirectory(new File("tomcat.8080"));
        } catch (LifecycleException e) {
            throw new RuntimeException(e);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public void deploy(String appName) {
        tomcat.addWebapp(tomcat.getHost(), "/" + appName, "src\\main\\webapp");
    }

    public String getApplicationUrl(String appName) {
        return String.format("http://%s:%d/%s", tomcat.getHost().getName(),
                tomcat.getConnector().getLocalPort(), appName);
    }

    public boolean isRunning() {
        return tomcat != null;
    }

    private void configureSimulatedWebXml(final Context context) {
        // Programmatically configure the web.xml here

        context.setDisplayName("Sandbox Web Application");

        context.addParameter("org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG", "/WEB-INF/tiles-defs.xml,/WEB-INF/tiles-sandbox.xml");

        final FilterDef struts2Filter = new FilterDef();
        struts2Filter.setFilterName("struts2");
        struts2Filter.setFilterClass("org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter");
        struts2Filter.addInitParameter("actionPackages", "ca.statcan.icos.sandbox.web");
        context.addFilterDef(struts2Filter);    

        final FilterMap struts2FilterMapping = new FilterMap();
        struts2FilterMapping.setFilterName("struts2");
        struts2FilterMapping.addURLPattern("/*");
        context.addFilterMap(struts2FilterMapping);

        context.addApplicationListener("org.apache.tiles.web.startup.TilesListener");
        context.addApplicationListener("ca.statcan.icos.sandbox.EmbeddedContextLoaderListener");

        context.addWelcomeFile("index.jsp");
    }
} 
```

## 步骤定义

```
public class StepDefs {

    @Autowired
    protected EmployeeEntityService employeeEntityService;

    @Given("^the following divisions exist$")
    public void the_following_divisions_exist(DataTable arg1) throws Throwable {
        final Employee employee = new Employee(3, "Third", "John", null, "613-222-2223");
        employeeEntityService.persistEmployee(employee);
    }

    @Given("^there are no existing surveys$")
    public void there_are_no_existing_surveys() throws Throwable {
    }

    @When("^I register a new survey with the following information$")
    public void I_register_a_new_survey_with_the_following_information(DataTable arg1) throws Throwable {
        Capabilities capabilities = DesiredCapabilities.htmlUnit();
        final HtmlUnitDriver driver = new HtmlUnitDriver(capabilities);

        driver.get("http://localhost:8080/sandbox-web/myFirst");
    }

    @Then("^the surveys are created$")
    public void the_surveys_are_created() throws Throwable {
        // Express the Regexp above with the code you wish you had
        throw new PendingException();
    }

    @Then("^a confirmation message is displayed saying: \"([^\"]*)\"$")
    public void a_confirmation_message_is_displayed_saying(String arg1) throws Throwable {
        // Express the Regexp above with the code you wish you had
        throw new PendingException();
    }
} 
```

## 动作类

```
@Results({ @Result(name = "success", location = "myFirst.page", type = "tiles") })
@ParentPackage("default")
@Breadcrumb(labelKey = "ca.statcan.icos.sandbox.firstAction")
@SuppressWarnings("serial")
public class MyFirstAction extends HappyfActionSupport {

    private List<Employee> employees;

    @Autowired
    private EmployeeEntityService employeeEntityService;

    @Override
    public String execute() {
        employees = employeeEntityService.getAllEmployee();
        if (employees.size() == 0) {

            // persist data in memory
            final Employee employee1 = new Employee(1, "First", "John", null, "613-222-2222");
            employeeEntityService.persistEmployee(employee1);

            final Employee employee2 = new Employee(2, "Second", "John", null, "613-222-2223");
            employeeEntityService.persistEmployee(employee2);

            employees = employeeEntityService.getAllEmployee();
        }
        return SUCCESS;
    }

    public List<Employee> getEmployees() {
        return employees;
    }

} 
```

有了这个，嵌入式 tomcat 可以正确启动，并且在我尝试导航到网页之前一切似乎都很顺利。在`StepDefs`课堂上，`EmployeeEntityService`正确注入了。但是，在`Action`类中，`EmployeeEntityservice`没有注入（它仍然存在`null`）。

据我所知，我正在`ApplicationContext`正确设置嵌入式 Tomcat 的父级。那么为什么服务器不使用父上下文来获取`EmployeeEntityService`呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-31T15:24:27.820

我遇到了类似的问题，使用替代方案的解决方案`web.xml`比人们想象的要简单：

2行：

```
Context webContext = tomcat.addWebapp("/yourContextPath", "/web/app/docroot/");
webContext.getServletContext().setAttribute(Globals.ALT_DD_ATTR, "/path/to/custom/web.xml"); 
```

瞧！魔法发生在`org.apache.catalina.startup.ContextConfig#getWebXmlSource`

**免责声明：**在 Tomcat 7.0.42 上测试

# ios - iOS在webview中加载Base 64编码数据

> ID：15988582
> 
> 赞同：0
> 
> 时间：2013-04-13T13:57:07.097
> 
> 标签：ios, uiwebview, base64, nsdata

我正在尝试在 webview 中加载 base64 编码数据。以下是我正在使用的代码

```
NSDictionary *fileFormatDic=[[NSDictionary alloc]initWithObjectsAndKeys:@"text/html",@"html",@"mage/jpeg",@"jpe",@"image/jpeg",@"jpeg",@"image/jpeg",@"jpg",@"application/pdf",@"pdf",@"application/vnd.ms-powerpoint",@"pdf",@"text/plain",@"txt",@"application/vnd.ms-excel",@"xls",@"application/msword",@"doc",nil];
NSData *fileData= [dbServiceMgr getDocumentDataForTheTaskId:[_fileDetailsDic objectForKey:@"taskId"] andFileId:[_fileDetailsDic objectForKey:@"fileId"]];
NSLog(@"filedata length---%d",fileData.length);

NSString *mimeType=[fileFormatDic objectForKey:[_fileDetailsDic objectForKey:@"fileFormat"]];

[_webView loadData:fileData MIMEType:mimeType textEncodingName:@"Base64" baseURL:nil]; 
```

但是我的网页视图中没有显示任何内容。有人可以告诉我，出了什么问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:22:29.563

我不确定这是您获得白屏的原因（可能是），但您必须了解`textEncodingName`需要文本编码（意味着将 Unicode 字符串编码为字节序列的方法）并且您提供的是二进制数据到文本编码。所以可以说这是一种不同的编码。有效值为 UTF8 或 UTF16（尽管 UTF8 是您通常想要的）。因此，您应该首先解码您的 Base64 数据，然后将其呈现到屏幕上。

[您可以在此处](http://www.joelonsoftware.com/articles/Unicode.html)阅读有关 Unicode 编码的更多信息。

# c# - 如何通过c#安排自定义任务

> ID：15988583
> 
> 赞同：7
> 
> 时间：2013-04-13T13:57:10.590
> 
> 标签：c#, scheduled-tasks

我正在使用[任务计划程序](http://taskscheduler.codeplex.com/)在 c# 应用程序中安排我的任务。我想我对这个图书馆有了基本的了解。

但是现在我停留在一个地方，我想创建一个自定义操作，该操作将按设定的时间表执行。就像[内置操作，](http://taskscheduler.codeplex.com/wikipage?title=ActionSamples&referringTitle=Documentation)即*EmailAction*（它将按设定的时间表发送邮件），*ShowMessageAction*（它将显示警报消息） schedule )，我想创建一个操作来运行我的 c# 代码，并且该代码会将一些数据保存到我的数据库中。

我尝试过的是：我创建了一个继承*Action的类**CustomAction*，例如：

 *```
public class NewAction : Microsoft.Win32.TaskScheduler.Action
{
    public override string Id
    {
        get
        {
            return base.Id;
        }
        set
        {
            base.Id = value;
        }
    }

    public NewAction()
    {
    }
} 
```

这是我的任务调度程序代码：

```
 ..  
    ... 
    // Get the service on the local machine
    using (TaskService ts = new TaskService())
    {
        // Create a new task definition and assign properties
        TaskDefinition td = ts.NewTask();
        td.RegistrationInfo.Description = "Does something";

        // Create a trigger that will fire the task at this time every other day
        TimeTrigger tt = new TimeTrigger();

        tt.StartBoundary = DateTime.Today + TimeSpan.FromHours(19) + TimeSpan.FromMinutes(1);
        tt.EndBoundary = DateTime.Today + TimeSpan.FromHours(19) + TimeSpan.FromMinutes(3);
        tt.Repetition.Interval = TimeSpan.FromMinutes(1);

        td.Triggers.Add(tt);

        // Create an action that will launch Notepad whenever the trigger fires
        td.Actions.Add(new NewAction());   <==========================

        // Register the task in the root folder
        ts.RootFolder.RegisterTaskDefinition(@"Test", td);

        // Remove the task we just created
        //ts.RootFolder.DeleteTask("Test");
    }
    ...
    .... 
```

在线（由箭头指向）我得到了异常：

> 值不在任务调度程序的预期范围内

我不确定我想要实现的目标是否可能，如果有可能，请指导我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:35:15.463

根据我对你问题的理解。我已经实现了同样的事情，但我使用了“Quartz”调度程序而不是“任务调度程序”。这很容易实现。也许你也可以试试这个。

参考：http: [//quartznet.sourceforge.net/tutorial/](http://quartznet.sourceforge.net/tutorial/)

如果我错了，请纠正我。*

# android - 无法将库导入 Eclipse

> ID：15988585
> 
> 赞同：0
> 
> 时间：2013-04-13T13:57:21.037
> 
> 标签：android, eclipse, androidplot

当我尝试使用库时，它们对我来说都是空的（当我尝试导入它们时，我只能看到“空”包）。我尝试了两种方法：将库拖放到 \libs 并导入它们。我不知道是什么导致了这个问题......

我正在尝试导入**androidplot**库，但我没有在他们的板上发现这个特殊问题，所以也许我做错了什么？！

![查看图书馆](https://i.stack.imgur.com/dBPio.png)

编辑

![库文件夹中的文件](https://i.stack.imgur.com/N5Ol0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T15:01:13.297

您正在导入无法工作的 androidplot 源 jar，因为它充满了 .java 文件而不是预期的 .class 文件。[请改用库 jar](https://androidplot.jira.com/builds/artifact/ANDROIDPLOT-TRUNK/RELEASE/build-132/Jars/androidplot-core-0.5.2.jar)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:25:39.553

您应该将它们放在下面的“libs”文件夹中，其中包括“android-support-v4”等其他文件夹，而不是 Android 的依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:53:08.017

根据您使用的 ADT 版本，您可能需要从[此处开始阅读](http://developer.android.com/tools/projects/projects-cmdline.html#ReferencingLibraryProject)

请注意，lib 使用不再是将 jar 复制到文件夹并构建的简单过程。库项目可能需要在 eclipse 中并构建为“库”，然后在链接中提到的特定习语中称为依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T17:02:57.873

请按照以下步骤操作。这可能会对您有所帮助：

1->右键单击您的项目

2->点击构建路径

3-> 选择配置构建路径

4-> 选择添加外部 JAR

5-> 在您的系统中找到 Jar 文件并添加

# jquery - jquery datepicking 默认定位

> ID：15988589
> 
> 赞同：0
> 
> 时间：2013-04-13T13:57:33.167
> 
> 标签：jquery, jquery-ui

我一直试图弄清楚为什么我的 jquery datepicker 显示在输入字段上方而不是下方。

这是链接--> [http://jsfiddle.net/HerrLoop/dVfP2/3/](http://jsfiddle.net/HerrLoop/dVfP2/3/)

单击输入字段。

请注意，如果您将主 h1 标签更改为：

```
 <h1></h1> 
```

然后日期选择器在输入字段下方按应有的方式加载。

为什么是这样？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:10:04.427

这是由您的日期选择器元素在屏幕上的定位引起的。如果您将 datapicker 元素移动为您的第一个输入，您将看到它会在单击时显示在下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:08:45.743

您可以像这样定位您的日期选择器：

```
.ui-datepicker { 
  position:relative !important;
  margin-left: 0px;
  margin-top: 0px
} 
```

[**小提琴**](http://jsfiddle.net/mohammadAdil/dVfP2/5/)

# xml - 如何在 xslt 中构建动态节点名

> ID：15988591
> 
> 赞同：0
> 
> 时间：2013-04-13T13:57:39.257
> 
> 标签：xml, xslt

我有一个由这个脚本转换的 xml：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" indent="no" omit-xml-declaration="yes"/>

<xsl:template match="/">
    <xsl:apply-templates select="LogDataExport/logdata"/>
</xsl:template>

<!-- Build your output file, set date and time and then recurse the rest
of input doc -->
<xsl:template match="logdata">
    <xsl:copy>
        <xsl:element name="Date">
                <!-- Grab the Date/Time from the first LogDataSet/t element -->
            <xsl:value-of select="substring-before(LogDataSet[1]/t,'T')"/>
        </xsl:element>
        <xsl:element name="Time">
            <xsl:value-of select="substring-after(LogDataSet[1]/t,'T')"/>
        </xsl:element>
        <xsl:apply-templates/>
    </xsl:copy>
</xsl:template>

<!-- For each name element in LogDataSet create an element with that value
and set the value to the content of the value element -->
<xsl:template match="LogDataSet">
    <!-- remove spaces and % symbol from name value -->
    <xsl:element name="{translate(translate(translate(name,' ',''),'%','P'),'&#252;','u')}">
        <xsl:value-of select="value"/>
    </xsl:element>
</xsl:template>

<!-- Identity template recurse input document elements and attributes -->
<xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

输出如下所示：

```
<logdata><Date>2013-04-13</Date><Time>01:04:18.329</Time>
    <Sensor1>26.45</Sensor1>
    <Sensor2>48.24</Sensor2>
    <aquaeroCPU>33.14</aquaeroCPU>
    <Flow1>162.2</Flow1>
    <Flow2>152</Flow2>
    <Fan2>892</Fan2>
    <Fan3>900</Fan3>
    <Fan4>877</Fan4>
    <FullstandinP>80</FullstandinP>
    <Wassertemperatur>28.76</Wassertemperatur>
    <Pumpe>87.852875717465153</Pumpe>
    <Pumpe>12.147540983606557</Pumpe>
    <Pumpe>0.584</Pumpe>
    <Pumpe>5271.1725430479091</Pumpe>
  </logdata> 
```

您会看到最后 4 个名称都相同。

我怎样才能得到名称后面的数字，例如：

```
<Pumpe1>
<Pumpe2>
<Pumpe3>
... 
```

或者是否可以从原始 xml 中的其他两个名称生成一个名称：

```
<LogDataSet>
  <t>2013-04-13T01:08:47.751</t>
  <value>0.5696</value>
  <name>Pumpe</name>
  <unit>A</unit>
  <valueType>current</valueType>
  <device>aquastream xt</device>
</LogDataSet>

this should transformed to <Pumpe-current> aka <xsl:element name="name" - "valueType"> 
```

谢谢你

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:23:17.377

You can use an [attribute value template](http://www.w3.org/TR/xslt#dt-attribute-value-template). Your existing stylesheet already has one but only uses `name`. This:

```
<xsl:element name='{name}-{valueType}'><xsl:value-of select='value'/></xsl:element> 
```

should give you:

```
<Pumpe-current>0.5696</Pumpe-current> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:29:39.660

首先，将带有所有`translate`操作的裸名称放入变量中很方便。

```
 <xsl:variable name="element-name" select="translate(translate(translate(name,' ',''),'%','P'),'&#252;','u')"/> 
```

然后，要在名称的末尾添加索引，只需计算前面`LogDataSet`具有相同名称值的元素的数量即可。

```
 <xsl:element name="{concat($element-name, 1+count(preceding::LogDataSet[name=current()/name]))}"> 
```

Ord 附加 的值`valueType`，只需使用`concat`

```
 <xsl:element name="{concat($element-name, '-', valueType)}"> 
```

# android - 当我卸载我的应用程序时，我们可以删除通过我的应用程序创建的文件夹吗？

> ID：15988592
> 
> 赞同：10
> 
> 时间：2013-04-13T13:57:50.140
> 
> 标签：android

我面临这个问题，当我卸载我的应用程序文件夹时，SD卡路径中仍然可用，

我应该怎么做才能删除它？

请提出一些建议以实现它...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-13T14:00:52.037

> 我应该怎么做才能删除它？

使用`getExternalFilesDir()`和/或`getExternalCacheDir()`用于外部存储（“sdcard”）上的文件。当您的应用程序被卸载时，这些目录会自动删除。

除此之外，没有其他可能，因为当您的应用程序被删除时您无法控制。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-18T04:44:05.150

不幸的是，简单来说，答案是：**不，你不能。**

### 原因：

1.  你需要广播，当你的应用程序被卸载时你可以收听。但是将要卸载的应用程序不会因为它的卸载而得到任何广播。

2.  如果您在设备的外部存储上创建了任何文件夹，则当用户卸载您的应用程序时，您无法调用代码。

### 建议和解决方案：

1.  唯一的方法是如果您使用`getExternalCacheDir()`, 则只有在卸载应用程序时会自动删除文件夹。

2.  如果您的目标是 API 级别 8 或更高，您可以将`Context#getExternalFilesDir()`其用于您的外部文件，这些文件将在卸载时被删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T14:08:16.657

一些读数：http: [//developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

如果您使用 API 级别 8 或更高版本，请使用 getExternalFilesDir() 打开一个文件，该文件代表您应该保存文件的外部存储目录。此方法接受一个类型参数，该参数指定您想要的子目录的类型，例如 DIRECTORY_MUSIC 和 DIRECTORY_RINGTONES（传递 null 以接收应用程序文件目录的根目录）。如有必要，此方法将创建适当的目录。(...)

如果您使用 API 级别 7 或更低版本，请使用 getExternalStorageDirectory() 打开代表外部存储根目录的文件。然后，您应该将数据写入以下目录：

/Android/data/"package_name"/files/

“package_name”是您的 Java 风格的包名称，例如“com.example.android.app”。

**如果用户的设备运行 API 级别 8 或更高版本并且他们卸载了您的应用程序，则此目录及其所有内容将被删除。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-17T13:09:18.303

卸载应用程序后，您将无法运行代码，因此您必须允许操作系统为您进行清理。这意味着您不能将文件放在 SD 卡上的任何位置，而必须遵循操作系统的规则。

因此，您不必在 SD 卡上创建自己的目录结构，而是必须将编写的文件放在调用`getExternalFilesDir()`和返回的目录中`getExternalCacheDir()`。然后，Android 在卸载时会自动删除这些目录的所有内容。

# javascript - 如何让一些揭示模块代码仅在 DOM 准备好后运行？

> ID：15988594
> 
> 赞同：3
> 
> 时间：2013-04-13T13:58:06.570
> 
> 标签：javascript, jquery, jquery-validate, module-pattern, revealing-module-pattern

我们使用显示模块模式将内容组织到“命名空间”中。一些初始化代码（用于 jQuery Validation 插件）只能在文档加载后调用。

```
Namespace.Foo.Bar = (function($) {

  var init = function() {

    $(function() {                // <--- within DOM ready wrapper it never runs
      $.validator.setDefaults({
        // ...
      });
    });

    (function(){                  // <--- but within an IIFE it will run
      $.validator.setDefaults({
        // ...
      });
    })();

  };

  init();

  // public functions/variables
  return {
  };

}(jQuery)); 
```

当`$.validator.setDefaults`位在 DOM 就绪包装器中时，它永远不会被调用，但当它在 IIFE 中时，它会被调用。

为什么？标记某些模块代码以在 DOM 准备好后运行的“最佳”方法是什么？

编辑：使示例代码更能说明问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:07:59.227

`init`由于您定义函数的方式（即），它不起作用。参见[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

执行时`init()`，`init`函数尚未定义，会报错。

```
Namespace.Foo.Bar = (function($) {
    // init this module
   console.log(typeof init);   // this prints `undefined`
   init();                     // this throws an error

   // module initialisation
   var init = function() {
     ...
   }
   ...
}(jQuery)); 
```

您应该将`init()`调用移到函数体的末尾，或者使用以下方法定义函数：

```
function init() { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:59:45.583

你应该试试`$(document).ready()`

[http://docs.jquery.com/Tutorials:Introducing_$(document).ready()](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T12:54:44.927

我相信你正在寻找的是这样的：

请注意这两个示例之间的区别：

```
//working
var myNamespace = (function($) {
    $(function(){
        var init = (function(){
            var text = document.createTextNode("Everything's ready!");
            document.body.appendChild(text);
        })();
    });

}(jQuery));

//Error: Cannot call method 'appendChild' of null 
var myNamespace = (function($) {

        var init = (function(){
            var text = document.createTextNode("Everything's ready!");
            document.body.appendChild(text);
        })();

}(jQuery)); 
```

但是，这里发生的事情是**init()**实际上不能被命名空间中的任何其他东西访问，因为它是在 DOM 加载之后发生的。

尽管如此，这与您遇到的问题很接近，我认为...

我假设您希望模块中的 DOM 就绪包装器用于组织目的。

另请注意，您可以像通常从模块外部一样访问模块：

```
//appends to the body: "Everything's ready!undefined
var myNamespace = (function($) {
   var private = " Hello world";
        $(function(){
            var hello =(function(){
                var text = document.createTextNode("Everything's ready!" +myNamespace.private);
                document.body.appendChild(text);
            }());
        });

    return{
        public: " Hello World"   
    }

}(jQuery));

 //works as expected 
    var myNamespace = (function($) {    
     var private = " Hello world";
     $(function(){
      var hello =(function(){
       var text = document.createTextNode("Everything's ready!" +myNamespace.public);
       document.body.appendChild(text);
      }());
     });

     return{
      public: " Hello World"   
     }   }(jQuery)); 
```

# html - IE7问题：如何用子div的动态内容扩展父div的高度？

> ID：15988599
> 
> 赞同：0
> 
> 时间：2013-04-13T13:58:46.843
> 
> 标签：html, css, internet-explorer-7

我需要在 IE7 浏览器上解决这个问题，其中父 div 的高度没有随着子 div 的动态内容而扩展。

这是我的 HTML 标记：

```
<div class="parent">
  <div class="middle">
    <div class="inner">
      ....
      ....
      ....
    </div>
  </div>
</div> 
```

CSS：

这个 CSS 垂直对齐中间的文本并且工作正常。它只是没有扩大父 div 的高度。80px 的高度`.parent`很重要，它是通过 PHP 动态设置的，不能更改为百分比或任何其他值。

```
.parent { position: relative; width: 100px; height:80px; }
.middle { position: absolute; top: 50%; }
.inner { position: relative; top: -50%; padding:10px 0; width:100px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:34:59.507

改变内部班级位置，

错误的：`.inner { position: relative; top: -50%; padding:10px 0; width:100px; }`

真的 ：`.inner { position: absolute; top: -50%; padding:10px 0; width:100px; }`

看这个例子： 代码：[http](http://cdpn.io/nrcKa) ://cdpn.io/nrcKa 整页：[http ://codepen.io/anon/pen/nrcKa](http://codepen.io/anon/pen/nrcKa)

# php - 使用 php 和 apache 意外重置服务器

> ID：15988602
> 
> 赞同：7
> 
> 时间：2013-04-13T13:59:05.363
> 
> 标签：php, mysql, apache, debugging

我有一个与数据库交互的应用程序。突然间，有时，页面`Server connection Reset`在我的 Web 浏览器中显示错误。更令人惊讶的是，在`localhost`页面上访问会触发 avast 上的警报。

如果我使用 刷新页面`Ctrl+R`，它偶尔会发生。PHP 没有显示任何错误消息，而且服务器似乎比平时花费了更多的时间来响应。

我将 wamp 与 apache 2.4、PHP 5.4.3 一起使用。我不知道从哪里开始调试或问题出在哪里。

```
[Sun May 13 13:01:14 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Sun May 13 13:01:14 2012] [notice] Apache/2.2.22 (Win32) mod_ssl/2.2.22 OpenSSL/0.9.8x configured -- resuming normal operations
[Sun May 13 13:01:14 2012] [notice] Server built: May 13 2012 12:51:11
[Sun May 13 13:01:14 2012] [notice] Parent: Created child process 3660
Apache server interrupted...
arn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Sun May 13 13:01:15 2012] [notice] Child 3660: Child process is running
[Sun May 13 13:01:15 2012] [notice] Child 3660: Acquired the start mutex.
[Sun May 13 13:01:15 2012] [notice] Child 3660: Starting 64 worker threads.
[Sun May 13 13:01:15 2012] [notice] Child 3660: Starting thread to listen on port 80.
[Sun May 13 13:01:15 2012] [notice] Child 3660: Starting thread to listen on port 80.
[Sun May 13 13:01:28 2012] [notice] Parent: Received shutdown signal -- Shutting down the server.
[Sun May 13 13:01:28 2012] [notice] Child 3660: Exit event signaled. Child process is ending.
[Sun May 13 13:01:29 2012] [notice] Child 3660: Released the start mutex
[Sun May 13 13:01:30 2012] [notice] Child 3660: All worker threads have exited.
[Sun May 13 13:01:30 2012] [notice] Child 3660: Child process is exiting
[Sun May 13 13:01:30 2012] [notice] Parent: Child process exited successfully. 
```

**更新：**

当使用“连接请求”时，`cachegrind`它会显示方法调用堆栈的部分列表。意味着它不会运行所有代码。它显示了一些 require_once 调用和它。下次如果我重试获取页面，页面将执行并显示整个调用堆栈。

当“发生连接请求”时，它显示

```
18 different functions called in milliseconds (1 runs, 18 shown) 
```

重试后

```
220 different functions called in 329 milliseconds (2 runs, 220 shown) 
```

我不知道为什么它显示 2 次运行。执行页面也需要更多时间。在它完成之前不到 100 毫秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:37:42.577

1.  重新启动您的计算机并关闭/禁用所有正在运行的应用程序，包括防病毒软件，只保留最小的一组正在运行的应用程序。关闭所有内容，即使是您确定无法干扰的应用程序 - 您永远不知道..

2.  确保 PHP 显示所有错误/警告：

    ```
    error_reporting(E_ALL);
    ini_set('display_errors', '1'); 
    ```

确保查看从 PHP 收到的每个警告。它可能会给你一个线索。

1.  尝试隔离问题。注释一段您怀疑会导致问题的代码。继续评论直到停止收到错误。然后开始取消注释，直到找到有问题的地方。这样你可以隔离有问题的代码，一旦你看到它，你就可以理解问题所在。

2.  添加大量将写入日志文件（或只是回显）的语句。然后您可以分析日志文件并了解错误发生的时间点，从而帮助您隔离问题......

最终，您将找到有问题的代码块，并能够跟踪问题。希望 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:47:38.520

将 apache 监听端口从 80 更改为8080 文件`httpd.conf`，更改并重新启动 apache`listen 80``listen 8080`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:50:48.487

也许这不是一个正确的解决方案，但为什么不尝试其他 WAMP 版本或者正确设置您的系统时钟？**您是否尝试过以最低配置运行 Apache？**您可以禁用所有扩展和模块（包括 php 本身），如果 Web 服务器按预期工作，您可以逐个打开模块。我不了解您的环境，但您也可以尝试将工作线程数和其他值更改为最小。我敢打赌它没有帮助，但至少你会尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:00:22.833

重新尝试暂时禁用防病毒软件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T18:38:03.397

看起来其他一些人在使用 Wamp 时遇到了同样的问题：您是否已经阅读了这篇属于官方论坛的帖子中列举的每个要点：

[http://forum.wampserver.com/read.php?2,67660](http://forum.wampserver.com/read.php?2,67660)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T12:55:55.773

通过 PHP 重新启动 Apache 使用 PHP 中的以下代码

```
exec('/etc/init.d/httpd graceful'); 
```

并查看[手册](http://httpd.apache.org/docs/2.0/en/stopping.html#graceful)...并更改 httpd 的路径

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T17:57:59.323

如果您启用了 mod_security，请尝试禁用并查看是否会发生同样的情况.. 有时您可能会过度警惕 mod_security，这只会导致 http 失败（有时就像将带有 & 符号的数据插入数据库一样简单）并且不会写入服务器日志中的任何错误使其难以排除故障，听起来与您遇到的类似，我将禁用 mod_security 重新启动服务器并查看行为是否已停止！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-08T13:22:28.427

你确定你没有包含/要求循环吗？

这种循环使 PHP 消耗了太多的内存，而 apache 会杀死自己来避免它。

或者可能是某种 404 循环错误……如果有时出现 404 错误，就会发生这种循环。这是一个例子：

您有一个缺少图像的布局，因此会触发 404 错误。为了显示页面，404 错误会在包含丢失图像的错误页面周围添加布局，这会触发另一个 404 错误。

希望有帮助。

# java - Java Jung 画椭圆

> ID：15988603
> 
> 赞同：-1
> 
> 时间：2013-04-13T13:59:14.143
> 
> 标签：java, geometry, jung

我正在使用 jung (java) 尝试在背景上画圆圈。我没有得到任何输出，想知道为什么它不起作用。

我正在使用 PreRenderPaintable 和 PostRenderPaintable 但仍然没有结果。

```
 vv.addPreRenderPaintable(new VisualizationViewer.Paintable() {

        public void paint(Graphics g) 
        {
               System.out.println("PRE RENDER");
               System.out.println("vv.getComponentCount()= " + vv.getComponentCount());

            Graphics2D      g2d         = (Graphics2D)g;
            AffineTransform oldXform    = g2d.getTransform();
            AffineTransform lat         = vv.getRenderContext().getMultiLayerTransformer().getTransformer(Layer.LAYOUT).getTransform();
            AffineTransform vat         = vv.getRenderContext().getMultiLayerTransformer().getTransformer(Layer.VIEW).getTransform();
            AffineTransform at          = new AffineTransform();
            at.concatenate(g2d.getTransform());
            at.concatenate(vat);
            at.concatenate(lat);
            g2d.setTransform(at);

            g.drawOval(100, 100, 150, 150);

            g.drawString("adsadd", 200, 200);

            g2d.setTransform(oldXform);
        }

        public boolean useTransform() { return false; }
    });

vv.addPostRenderPaintable(new VisualizationViewer.Paintable()
    {
        public void paint(Graphics g)
        {
            System.out.println("POST RENDER");
            System.out.println("vv.getComponentCount()= " + vv.getComponentCount());
            Component comp = vv.getComponent(0);
            System.out.println(comp);
            System.out.println(comp.getClass());

            g.drawString("adasasdsadasdsadsadasdasdsadd", 300, 300);
        }

        public boolean useTransform() 
        {
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:52:31.403

问题是没有设置输出的颜色。例如：

```
 g.setFont(font);
  Color oldColor = g.getColor();
  g.setColor(Color.lightGray); 
```

# android - 初学者 - 将 sqlite 数据加载为全局变量

> ID：15988604
> 
> 赞同：-2
> 
> 时间：2013-04-13T13:59:15.050
> 
> 标签：android, eclipse, sqlite

数据库.java

```
public class Data extends SQLiteOpenHelper {
public static String week, classes, title, mat, it, comp, que; 
```

///更常见的代码，如创建、删除数据库

```
 public String[] getAllIAI(){

    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_IAI + "WHERE KEY_week =" +LessonPlanner.itemWeek+ "AND KEY_class=" +LessonPlanner.itemClass ;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor3 = db.rawQuery(selectQuery, null);
    String[] data = null;
    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {

            title=cursor.getString(3);
            mat=cursor.getString(4);
            it=cursor.getString(5);
       } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning lables
    return data;
} 
```

推荐.Java

宣布

```
TextView  title, mat, IT;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recomend);

    title = (TextView) findViewById(R.id.titleText);
    mat = (TextView) findViewById(R.id.materialText);
    IT = (TextView) findViewById(R.id.instTText);

    title.setText(Data.title);
    mat.setText(Data.mat);
    IT.setText(Data.it); 
```

我认为代码在某处是错误的，因为 Textview（多行文本）没有显示任何内容。谁能指出我的错误？我对 Eclipse 完全陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:20:46.270

你的代码有几个错误，首先，你返回的数组“数据”总是空的，所以你当然不能从中得到任何东西。

其次，如果您打算从数据库中获取多个结果，您应该声明一个列表并将您从数据库中获得的对象添加到其中，目前您的循环完全没用，您实例化您从未使用过的变量......

这是一个示例，展示了如何从数据库中获取列表，但您也可以获取游标、数组或任何您需要的东西：

```
// Getting All Categories By ID
    public List<Category> getCategoriesList() {
        String selectQuery = "SELECT " + CATEGORY_ID + ", " + CATEGORY_NAME + " FROM " + CATEGORY_TABLE + " ORDER BY " + CATEGORY_ID + " ASC";
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null); 

        List<Category> categoriesList = new ArrayList<Category>();

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Category category = new Category(cursor.getInt(0), cursor.getString(1), false);
                categoriesList.add(category);
            } while (cursor.moveToNext());
        }

        cursor.close();
        db.close();
        return categoriesList;
    } 
```

注意：在此示例中，我从数据库中获取了几行，如果您只想获取一行，只需删除循环 do-while 并直接返回对象。

# eclipse - 无效的通道 117 - Eclipse / EGit

> ID：15988615
> 
> 赞同：3
> 
> 时间：2013-04-13T13:59:59.447
> 
> 标签：eclipse, git, egit, assembla

我正在使用最新版本的 Eclipse (4.2.1) 和 EGit (2.3.1) 将代码推送到托管在 Assembla 的 git 存储库。最近我开始收到这些消息：“无效的频道 117”。推送似乎进入了低谷，所以它并没有真正受到伤害，但它很烦人，因为我看不到推送的结果。有任何想法吗？谢谢！

错误日志：

```
An exception occurred during push on URI git@git.assembla.com:cool_awesome_app.git: Invalid channel 117
org.eclipse.jgit.api.errors.TransportException: Invalid channel 117
at org.eclipse.jgit.api.PushCommand.call(PushCommand.java:157)
at org.eclipse.egit.core.op.PushOperation.run(PushOperation.java:215)
at org.eclipse.egit.ui.internal.push.PushOperationUI.execute(PushOperationUI.java:147)
at org.eclipse.egit.ui.internal.push.PushOperationUI$1.run(PushOperationUI.java:209)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: org.eclipse.jgit.errors.PackProtocolException: Invalid channel 117
at org.eclipse.jgit.transport.SideBandInputStream.needDataPacket(SideBandInputStream.java:175)
at org.eclipse.jgit.transport.SideBandInputStream.read(SideBandInputStream.java:136)
at org.eclipse.jgit.util.IO.readFully(IO.java:246)
at org.eclipse.jgit.transport.PacketLineIn.readLength(PacketLineIn.java:186)
at org.eclipse.jgit.transport.PacketLineIn.readString(PacketLineIn.java:138)
at org.eclipse.jgit.transport.BasePackPushConnection.readStringLongTimeout(BasePackPushConnection.java:352)
at org.eclipse.jgit.transport.BasePackPushConnection.readStatusReport(BasePackPushConnection.java:293)
at org.eclipse.jgit.transport.BasePackPushConnection.doPush(BasePackPushConnection.java:187)
at org.eclipse.jgit.transport.BasePackPushConnection.push(BasePackPushConnection.java:142)
at org.eclipse.jgit.transport.PushProcess.execute(PushProcess.java:141)
at org.eclipse.jgit.transport.Transport.push(Transport.java:1162)
at org.eclipse.jgit.api.PushCommand.call(PushCommand.java:153)
... 4 more

eclipse.buildId=M20130204-1200
java.version=1.6.0_43
java.vendor=Apple Inc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T13:10:36.590

我为 Assembla 工作，这是我们处理边带通信信道的方式中的一个问题——它应该被修复。奇怪的是只有 jgit/egit 抱怨这一点，而不是 c 版本的 git。

请再看一遍。

# php - 带有 CSS 工具提示的 HTML5 (php) 显示远离超链接

> ID：15988616
> 
> 赞同：1
> 
> 时间：2013-04-13T14:00:05.110
> 
> 标签：php, html, css, tooltip

如果我将鼠标悬停在超链接上，工具提示会显示，但不会显示。它显示在超链接下方几英寸处。我从互联网的演示中获得了代码。

如何在超链接下方获得工具提示？

这是我使用的**PHP**代码：

```
if ($teller == 3) {
    echo '<p><a href="#" class="tooltip">...<span>';

    foreach ($bericht->datums as $date) {
        echo date('d/m/Y', strtotime($date->datum)) . ' om ' . date('H:i', strtotime($date->beginUur)) . '<br />';
    }

        echo '</span></a></p>';
    } 
```

上面的代码在**HTML**中生成了这个代码：

```
<p>
   <a href="#" class="tooltip">...
      <span>
         13/04/2013 om 13:49<br />
         15/04/2013 om 12:50<br />
         29/04/2013 om 16:00<br />
      </span>
   </a>
 </p> 
```

这是属于它的**CSS ：**

```
a.tooltip span {
    position:absolute;
    z-index: 999;
    white-space:nowrap;
    bottom:9999px;    
    background:#81b0b0;
    color:#e0e0e0;
    padding:5px 12px;
    line-height: 24px;
    height: auto;
    opacity: 0;
    transition:opacity 0.5s ease-out;
    }

a.tooltip span::before {
    content: "";
    display: block;
    border-left: 6px solid #81b0b0;
    border-top: 6px solid transparent;
    position: absolute;
    top: -6px;
    left: 0px;
}

a.tooltip:link {
    color:#FFF;
}

a.tooltip:visited {
    color:#FFF;
}

a.tooltip:hover span {
    opacity: 1;
    bottom:-35px;
    } 
```

有人可以帮帮我吗？谢谢！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:36:28.403

当你使用

```
position:absolute; 
```

它定位在链中最近的具有位置集的容器上；因此，如果您没有在包含它的任何元素或其父元素上设置位置，它将定位在身体上。

尝试在包含 p 标签上放置绝对或相对位置

# forms - 表单错误 i18n Play 框架

> ID：15988619
> 
> 赞同：2
> 
> 时间：2013-04-13T14:00:32.507
> 
> 标签：forms, templates, internationalization, playframework-2.0

我正在使用表单助手和自定义表单模板在 Play 框架中呈现我的表单，如下所示：

```
@(lang: Lang)(myForm: Form[MyModel])

@import play.i18n._
@import helper._

@implicitField = @{ FieldConstructor(formTemplate.f) }

@form ( action = routes.Application.index() ){
    @inputText(
        field = myForm("username"),
        '_label -> Messages.get(lang, "username")
    )
} 
```

当使用不同的值调用模板时`lang`，标签将以相应的语言显示。

但是，提交表单时，**错误消息总是以主要语言显示**。（即对于`Required`字段它总是`This field is required.`）

正如对[这篇文章](https://stackoverflow.com/q/11263712/538047 "覆盖播放 2.0 的默认 i18n 消息")[的回答](https://stackoverflow.com/a/11265036/538047)所提到的，我在我的语言文件中更改了默认错误消息（目前只有 2 个）：

**消息.en**：

```
username=Username
error.required=This field is required 
```

**消息.nl**：

```
username=Gebruikersnaam
error.required=Dit veld is verplicht 
```

如何确保错误以正确的语言打印？

我已经尝试在我的自定义模板中执行以下操作，但没有成功：

```
@(elements: helper.FieldElements)

<!-- snipped some HTML code -->
<span class="help">
    @(elements.infos(elements.args.get('_lang) match { 
        case Some(language) => language.asInstanceOf[play.api.i18n.Lang] 
        case None => new Lang("en","uk")
    }).mkString(", "))
</span> 
```

并加入`'_lang -> lang`我的`@inputText`电话。

我习惯用 Java 编程，只在 Play 模板中做过一些 Scala。我正在使用 Play 2.0.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:11:42.077

我发现最简单的方法（注意：我用 Java 编程）是在您的一个模型中定义一个返回用户语言的静态方法：

```
public class User{
    import play.i18n.Lang;

    //simplified
    public static Lang getLanguage(){        
    if(session("language" != null){
        return Lang.forCode(session.get("language"));
    } else {
        return Lang.forCode("en"); //default language
    }
} 
```

然后，您可以在 Scala 表单模板中调用此静态函数，如下所示：

```
<span class="errors">@elements.errors(User.getLanguage()).mkString(", ")</span> 
```

根据您的 messages.xx 文件中的默认错误消息显示已翻译的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T02:30:46.053

一般来说，如果您的错误代码也在 messages.xx 资源文件中找到，它们会被本地化，即使您在其他地方编写自定义验证器也是如此。您不必将 Lang 放在范围内，也不必自己调用 Messages()。例如在 Scala Play 中：

```
 val validPhone = """\+?[0-9_\-\. \(\)]*$""".r

  val phoneCheckConstraint: Constraint[String] = Constraint("constraints.phonecheck")({
    plainText =>
      val errors = plainText match {
        case validPhone() => Nil
        case _ => Seq(ValidationError("error.phonenumber"))
      }
      if (errors.isEmpty) {
        Valid
      } else {
        Invalid(errors)
      }
  }) 
```

如果你只有

```
error.phonenumber=Invalid phone number 
```

在您的messages.en 文件和其他messages.xx 文件中的翻译版本中，即使在声明时没有Lang 在范围内，它们也会被Play 本地化。因此，除了在您的模板和其他地方进行显式 Messages() 调用外，无需传递 Lang。

# php - php多维数组获取数据

> ID：15988624
> 
> 赞同：0
> 
> 时间：2013-04-13T14:01:06.840
> 
> 标签：php, arrays, multidimensional-array

我需要一些帮助从 PHP 中的多维数组中获取数据。这个数组充满了问题，以及这些问题的答案。每个问题可以有多个答案，但大多数问题的答案数量不同。这是它的 var_dump：

```
object(CommandResponse)#3 (3) 
{ 
    ["success"]=> bool(true) 
    ["message"]=> string(6) "Got it" 
    ["value"]=> array(2) 
    { 
       [0]=> array(3) 
       { 
           ["questionId"]=> string(2) "25" 
           ["question"]=> string(9) "Question 1" 
           ["answers"]=> array(2) 
           { 
               [0]=> array(2) 
               { 
                   ["answerId"]=> string(1) "1" 
                   ["answer"]=> string(9) "Answer 1" 
               } 
               [1]=> array(2) 
               { 
                  ["answerId"]=> string(2) "18" 
                  ["answer"]=> string(22) "Answer 2 for question 1" 
               }
         }
    } 
    [1]=> array(3) 
    { 
        ["questionId"]=> string(2) "26" 
        ["question"]=> string(9) "Question 2" 
        ["answers"]=> array(1) 
        { 
            [0]=> array(2) 
            { 
                ["answerId"]=> string(2) "17" 
                ["answer"]=> string(9) "Answer 2" 
            } 
        } 
    } 
} 
```

我想从中得到这样的东西：

```
Question 1
  Answer 1
  Answer 2
Question 2
  Answer 1
  Answer 2 
```

到目前为止，我已经尝试过：

得到这样的问题：`print $myArray->value[0]['question'];` 得到这样的第一个答案：`print $myArray->value[0]['anwsers'][0]['answer'];`

我也尝试在一些 foreach 循环中循环它，但我没有从中得到任何好处。

```
foreach ($myArray->value as $key => $value)
{
    print $value['question'].' - ';
    print $value['answers'][0]['answer'].'<br />';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:29:18.893

假设变量中提供了数据`$object`。

```
// Assign questions array to $questions
$questions = $object->value;

// Loop through questions
echo '<ul>';
foreach ($questions as $q) {
    echo '<li>' . $q['question'];

    // Loop through answers
    echo '<ul>';
    foreach($q['answers'] as $a) {
        echo '<li>' . $a['answer'] . '</li>';
    }
    echo '</ul>';
    echo '</li>';
}
echo '</ul>'; 
```

应该输出想要的

*   问题 1
    *   答案 1
    *   答案 2
*   问题2
    *   答案 1
    *   答案 2

# python - 带类的Python自引用字典

> ID：15988626
> 
> 赞同：2
> 
> 时间：2013-04-13T14:01:14.357
> 
> 标签：python

我正在尝试将参数列表作为类中的字典。由于数据的性质，一些参数是从其他参数派生的，但使用得足够频繁，我更愿意将它们的派生保留在参数字典中。我已经设法整理了一个自引用字典，当我可以直接命名字典时它工作得很好，但是因为它是一个类的一部分并且可能在许多不同的文件中实现我很难让它能够给自己命名。

```
class foo:
    class ParamDict(dict):
        def __getitem__(self, key):
            val = dict.__getitem__(self, key)
            return callable(val) and val() or val

    params = ParamDict({
        'a': 5,
        'b': lambda: 2**self['a']
        })

if __name__ == '__main__':
    X = foo()
    Y = foo()
    Y.params['a'] = 3

    print X.params['a'], X.params['b']
    print Y.params['a'], Y.params['b'] 
```

因为我不知道从哪里调用 lambda 函数我不知道如何给它一个字典的引用，不幸的是，它似乎没有从**getitem**定义中提取“自我”。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:33:20.750

`self`不只是神奇地出现；Python 函数在通过实例访问时（通过[将函数作为描述符调用](http://docs.python.org/2/reference/datamodel.html#invoking-descriptors)）被包装在方法中，`self`然后作为第一个参数传递给函数。

`self`对于您的 lambda ，您需要*显式*传入：

```
class ParamDict(dict):
    def __getitem__(self, key):
        val = dict.__getitem__(self, key)
        return callable(val) and val(self) or val

params = ParamDict({
    'a': 5,
    'b': lambda self: 2**self['a']
    }) 
```

# vb.net - LINQ lambda 可空总和在 where 条件下

> ID：15988627
> 
> 赞同：0
> 
> 时间：2013-04-13T14:01:17.293
> 
> 标签：vb.net, linq, entity-framework

我有以下 LINQ 查询，它可以根据需要工作，除了在链接表中没有记录的情况下，并非所有记录都返回。

```
Dim query as List(Of Project) = context.Projects.Where(Function(a) a.Invoices.Sum(Function(b) b.InvoiceAmount) - a.Payments.Sum(Function(c) c.PaymentAmount) <> 0) 
```

如果项目在发票表中有条目，但在付款表中没有条目，则不会返回记录。

我已经查看了一个类似的问题[Linq to Sql，其中 lambda sum 作为 where 条件](https://stackoverflow.com/questions/8000482/linq-to-sql-with-lambda-sum-as-a-where-condition)，但无法解决如何更正上述查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:17:06.563

Why not just add a condition to return all projects with no payments?

(I'll do this in C#, but I'm sure you can quickly translate it to VB.NET)

```
var query = context.Projects.Where(p => p.Payments.Count() == 0 || p.Invoices.Sum(i => i.InvouceAmount) - p.Payments.Sum(pm => pm.PaymentAmount) != 0) 
```

# javascript - asp.net usercontrol 不会在 updatepanel 中触发 javascript

> ID：15988629
> 
> 赞同：8
> 
> 时间：2013-04-13T14:01:29.217
> 
> 标签：javascript, asp.net, user-controls

我已经看到了与此类似的问题和答案，但似乎没有一个可以解决问题。

我在更新面板中有一个用户控件。在我的用户控件中，我输出 javascript。

触发时javascript不会触发。如果我将 javascript 移动到 usercontrol/updatepanels 之外的父页面，那么它会触发。这样做是没有意义的，因为我不能在另一个页面上使用这个用户控件而不复制代码......通过复制整个 javascript（不同的站点）或在每个页面中添加对 .js 文件的引用它使用在（同一站点）上。它只是不太便携

我只想输出带有控件的javascript（在更新面板内）。

提到更新面板是为了确保我正在做的事情的准确性。即使我将用户控件放在更新面板之外，它也不起作用。

保持简单（这对我不起作用）：

用户控制：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="_location.ascx.cs" Inherits="_location" %>
<script type="text/javascript">
    function test() {
        alert('Hello World!');
    }
</script>

<a href="javascript:void(0);" onclick="javascript:test();">
    Find For Me
</a> 
```

家长：

```
<uc1:_location runat="server" ID="_location"  /> 
```

chrome 中的调试告诉我“未捕获的 ReferenceError：未定义测试”

如果我将javascript直接添加到onclick，如下所示：

```
onclick="alert('Hello World!');" 
```

如上所述，将功能移动到父页面也可以。

就好像浏览器忽略了用户控件的脚本输出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T14:21:50.630

当您有一个`UpdatePanel`并且`UpdatePanel`更新它的内容时，它会将其内容视为简单的文本/html（不是代码），它没有任何可用于运行脚本并使其可用于页面的解析器。

所以这个内容，

```
<script type="text/javascript">
    function test() { alert('Hello World!'); }
</script>

<a href="javascript:void(0);" onclick="javascript:test();">
    Find For Me
</a> 
```

在更新面板的客户端代码运行并更新页面内容后，脚本部分不会被解析 - 它是页面的简单文本/html。

然而，这部分运行

```
<a href="javascript:void(0);" onclick="alert('Hello World!');">Find For Me</a> 
```

`onclick`因为当你点击它时，属性的解析就完成了。

有以下解决方法可用：

1.  将您的 javascript 移动到外部文件中
2.  将您的脚本移到 UpdatePanel 之外
3.  [使用RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerclientscriptblock(v=vs.100).aspx)或替代函数在后面的代码中注册脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:12:51.103

感谢 Aristos 让我走上了正确的道路......虽然他的解决方案有效，但它没有回答从用户控件内部输出 javascript 的问题，而是建议将其移到外面。如前所述，这不是预期的结果，因为它没有保存在控件内部以便于移植。

这是我完成此任务的解决方案： CS 文件：

```
String script = "<script type=\"text/javascript\">";
script += "function test() {";
    script += "alert('Hello World!');";
script += "</script>";

Page.ClientScript.RegisterClientScriptBlock(Page.GetType(), "locationScript", script); 
```

如果脚本较长，则可以使用字符串生成器，但无论如何都可以。

这将代码完全保留在用户控件中，并且它从 a 标记的 onclick 事件开始工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T13:11:19.510

除了 Adam Wood 发布的解决方案之外，我应该说您必须在使用更新面板时使用 ScriptManager 来注册脚本，至少在 .net 4.0 中是这样，否则它将无法工作。

所以你可以放上用户控件的PageLoad事件：

```
string script = @" alert('this is a test');
alert('it worked')";
ScriptManager.RegisterStartupScript(Page,Page.GetType(),"scriptMelhoria",script,true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-05T08:46:48.787

尝试这个;

您可以在 udpdate 面板回调后找到您的脚本元素并对其进行评估。

在您的内联脚本标签中添加一个特殊属性以在回调请求后选择元素。

```
<script type="text/javascript" data-tag='myscript'>
    function test() {
        alert('Hello World!');
    }
</script> 
```

并将此脚本添加到您的更新面板容器 aspx 文件中。

```
<script>

        if (Sys !== undefined) {
            var prm = Sys.WebForms.PageRequestManager.getInstance();
            prm.add_endRequest(endPostbackRequest);
        }

        function endPostbackRequest(sender, args) {
            $("script[data-tag='myscript']:not([data-run])").each(
                function () {
                    eval.apply(window, [$(this).text()]);
                    $(this).attr('data-run', '1');
                });
        }

</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-13T14:27:38.990

处理绑定到 DOM 元素的 javscript 代码的首选方法`UpdatePanel`是订阅[PageRequestManager](http://www.asp.net/ajax/documentation/live/ClientReference/Sys.WebForms/PageRequestManagerClass/default.aspx)`endRequest`的事件并在此处执行您的代码。例如，您想在此处设置单击事件处理程序。

```
// that is standard way for asp.net to execute JS on page load
// pretty much the same as $(function(){ ...}) with jquery
function pageLoad() {
    // find PRM instance and subscribe to endRequest
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequest);
}

function endRequest() {
    // set all handlers to DOM elements that are within UpdatePanel
    $('<%= myButton.ClientID %>').on('click', test)
}

function test(e) {
   alert('Hi')
} 
```

替代解决方案是使用[事件委托](https://learn.jquery.com/events/event-delegation/#event-propagation)，如下所示：

```
function pageLoad() {

    // delegate click event on .myButton inside .container
    // to the .container DOM element
    $('.container').on('click', '.myButton', test)

} 
```

并有一个围绕您的更新面板`div`命名的类。`container`在这种情况下，您`div.container`永远不会从 DOM 中删除，因此其上的所有事件处理程序将在部分回发后保留。

没有 jquery 并且仅使用 asp.net ajax 的相同代码将如下所示：

```
function pageLoad() {
   Sys.UI.DomEvent.addHandler($("myContainer"), "click", delegatedTest);
}

function delegatedTest(e) {
   // since asp.net ajax does not support event delegation
   // you need to check target of the event to be the right button 
   if (e.target.id == "myButton") test(e)
}

function test(e) {
   alert("HI")
} 
```

# ruby-on-rails - Params 数组被控制器和方法替换

> ID：15988637
> 
> 赞同：0
> 
> 时间：2013-04-13T14:03:02.150
> 
> 标签：ruby-on-rails

我试图在我的 RoR 应用程序中检索发布参数。但是，当我打印时：

```
params 
```

它回应

```
{
"action":"new",
"controller":"question"
} 
```

这只是控制器和动作。我如何从控制器中引用 post 变量？

在我的日志中，我收到错误：`WARNING: Can't verify CSRF token authenticity`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:06:40.157

这就是您获得帖子变量的方式。如果他们不在那里，那么您的表格或提出请求的任何东西都有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:54:02.783

放弃您的自定义路线`match "/new/question" => "question#new", :via => :post`您不需要它，这只是令人困惑的事情。新操作不接受参数，只应响应 GET 请求。

只需发送一个 HTTPPOST 请求`your/url/questions`，rails 就会知道调用 create 操作，你可以传入任何你需要的参数。

新操作用于呈现不用于接受 POST 请求的表单。同样，如果您向 rails 发送 PUT 请求，`your/url/questions`只需知道在问题控制器中调用更新操作。这就是 RESTfull 路由的全部意义所在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T16:46:02.583

伙计，您的布局中是否包含“csrf_meta_tags”？

```
<%= csrf_meta_tags %> 
```

如果不是，那么 Rails 将放弃所有 POST 参数...

# objective-c - 从触摸中禁用某些 UIView

> ID：15988638
> 
> 赞同：0
> 
> 时间：2013-04-13T14:03:04.960
> 
> 标签：objective-c

我有一个名为 TileView 的类，它扩展了 UIView。在另一个视图中，我创建了 9 个 TileView 对象并将它们显示在屏幕上。以下是其中 1 个的示例

```
tile1 = [[TileView alloc]
             initWithFrame:CGRectMake(20,20, 100, 150)
             withImageNamed:@"tile1.png"
             value: 1
             isTileFlipped: NO]; 
```

用户可以触摸任何瓷砖。当一个瓷砖被触摸时，它被“翻转”——图像被命名为一个普通的棕色瓷砖，并`isTileFlipped`设置为“是”。现在是我坚持的部分：有一个确认按钮。

当按下确认按钮时，它会获取所有翻转的图块并将它们添加到一个名为 的数组`acceptedTiles`中。按下确认后，我需要确保`acceptedTiles`无法按下或与之交互的瓷砖。我不知道什么是最好的方法。在这里`touchesBegan`，您可以了解正在发生的事情。

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

int currentTileCount = [(BoxView *)self.superview getTileCount];
int currentTileValue = [self getTileValue];
int tilecount;

if (!isFlipped) {
    [image setImage:[UIImage imageNamed:@"tileflipped.png"]];
    isFlipped = YES;
    tilecount = currentTileCount + currentTileValue;
    [(BoxView *)self.superview setTileCount:tilecount];
    [(BoxView *)self.superview addToArray:self index:currentTileValue-1];
}

else {
    [image setImage:[UIImage imageNamed:imageNamed]];
    isFlipped = NO;
    tilecount = currentTileCount - (int)currentTileValue;
    [(BoxView *)self.superview setTileCount:tilecount];
    [(BoxView *)self.superview removeFromArray: currentTileValue-1];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:22:46.383

如果您想要的只是不与之交互的图块，那么肯定很简单：

```
for (UIView *tile in acceptedTiles) {
    [tile setUserInteractionEnabled:NO];
} 
```

如果这不符合您的要求，请详细说明。它对你来说似乎很完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:20:53.807

如果您不想过多地更改代码，则可以`acceptedTiles`在执行任何其他操作之前检查视图是否已添加`touchesBegan:withEvent`，以及是否只是返回。

但是，我想知道你为什么不在`UITapGestureRecognizer`这里使用 a 呢？如果您这样做了，您可以设置一个委托来实现该`gestureRecognizerShouldBegin:`方法，您可以在其中检查视图是否在`acceptedTiles`其中，而不是将其与您的其他点击识别逻辑混合。

# javascript - Backbonejs + MarionetteJD - 将 Backbone 列表视图转换为 MarionetteJS 集合视图

> ID：15988640
> 
> 赞同：0
> 
> 时间：2013-04-13T14:03:06.350
> 
> 标签：javascript, backbone.js, coffeescript, marionette

我的 BackboneJS “列表项视图”定义如下：

```
 class TagListView extends Backbone.View
    el:"#tags"

    render: =>
      @collection = new TagCollection
      @collection.fetch_data
        order_by : "name"
      , =>
        @on_success()

    on_success: =>
      view_arr  = []      
      @collection.each (tag_model) =>
        tag = new TagView {model: tag_model}
        view_arr.push tag.render().el
      @$el.empty().append view_arr 
```

我如何将其更改为 MarionetteJS 集合视图？我尝试了以下方法，它似乎不起作用？

```
 class TagListView extends Marionette.CollectionView
    el:"#tags"
    itemView:TagView

    onBeforeRender: =>
      @collection = new TagCollection
      @collection.fetch_data
        order_by : "name"
      , =>
        @render() 
```

我只是删除了 on_sccess() 方法，因为我的理解是 CollectionView 将通过它的渲染方法来渲染它的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:37:47.450

你是对的。

`The collection view binds to the "add", "remove" and "reset" events of the collection that is specified.`一旦发生这些事件中的任何一个，集合视图将自动更新视图，无论是部分还是整体。

您可能想知道的另一件事是在 1.0.0 版本中，当一个集合进行提取时，默认情况下它不会再触发该`reset`事件。要获得旧行为，请通过`{reset: true}`.

# vb.net - 声音不会在用户控件中播放，但会在我的主页中播放 - Windows Phone

> ID：15988642
> 
> 赞同：0
> 
> 时间：2013-04-13T14:03:20.190
> 
> 标签：vb.net, windows-phone-7, xaml

我的应用程序中有一个 .wav 文件音效。出于某种原因，它在一个地方（一个普通的电话页面）可以正确播放，但是当在其他地方（在用户控件内）使用时它不会播放（尽管我使用的是相同的代码并且代码*正在*执行）。

奇怪的是（至少对我来说：））如果我在播放声音之前设置了一个断点，然后单击继续，声音将实际在模拟器中播放，这让我觉得我需要做一些额外的事情来让我的用户控件播放听起来正确（因为相同的代码在其他地方工作）。

我像这样在 XAML 中设置我的声音：

```
<MediaElement x:Name="StampSound"
             Source="/Sounds/stamp.wav"
             Volume="1"                          
             AutoPlay="False" /> 
```

我在 XAML 页面和我的用户控件中使用相同的代码来设置声音。然后，当我想要播放声音时，我使用以下内容：

```
 StampSound.Play() 
```

这在我的主页中正常工作，但在我的用户控件中它不会发出声音（但代码正在执行，如果我在其中放置断点然后继续声音将播放）。

所以我认为我的代码没问题，但也许我在用户控件中遗漏了一些东西。我尝试在 UserControl_Loaded 子中播放声音，在那里我还（成功地）实现了一个与音频一起使用的动画（顺便说一下，与我主页中的声音一致的动画相同）。

这里有一些我不知道的时间类型问题吗？我将不胜感激任何帮助或想法。

这适用于 Windows Phone 8 XAML + VB.net，但我可以使用 C# 代码进行管理。

编辑：找到答案

好的，我在即将发布此内容时找到了答案，但答案是针对一个略有不同的问题，所以我想我会回答这个问题，以防其他人遇到它。

[（此处输入链接描述](https://stackoverflow.com/questions/14335987/wp7-playing-mediaelement-after-page-is-loaded)的答案

我显然是在加载声音之前尝试播放声音，所以我只是添加了一个处理程序，用于处理声音何时完成加载并在那里播放声音：

```
Private Sub StampSound2_MediaOpened(sender As Object, e As RoutedEventArgs) Handles StampSound2.MediaOpened
    StampSound2.Play()
End Sub 
```

这对我有用，因为我需要尽快播放声音（即它应该在控件加载后立即播放）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:52:54.940

好的，我在即将发布此内容时找到了答案，但答案是针对一个略有不同的问题，所以我想我会回答这个问题，以防其他人遇到它。

[（此处输入链接描述](https://stackoverflow.com/questions/14335987/wp7-playing-mediaelement-after-page-is-loaded)的答案

我显然是在加载声音之前尝试播放声音，所以我只是添加了一个处理程序，用于处理声音何时完成加载并在那里播放声音：

```
Private Sub StampSound2_MediaOpened(sender As Object, e As RoutedEventArgs) Handles StampSound2.MediaOpened
    StampSound2.Play()
End Sub 
```

这对我有用，因为我需要尽快播放声音（即它应该在控件加载后立即播放）。

# focus - 如何将光标移动到输入字段？

> ID：15988643
> 
> 赞同：3
> 
> 时间：2013-04-13T14:03:20.303
> 
> 标签：focus, dart

如何将光标移动到 Dart 中的输入字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:37:26.053

假设您有对[InputElement](http://api.dartlang.org/docs/releases/latest/dart_html/InputElement.html)的引用`input`：

```
input.focus(); 
```

成功了。您可以通过调用来获得该参考`query()`，例如：

```
input = query('#input_id');
input.focus(); 
```

或者您自己创建了元素：

```
var input = new InputElement();
document.body.children.add(input);
input.focus(); 
```

# c++ - 使用 sfinae 启用/禁用 typedef 是不可能的。解决方法？

> ID：15988646
> 
> 赞同：3
> 
> 时间：2013-04-13T14:03:42.387
> 
> 标签：c++, templates, sfinae

我有不同类型的矩阵，我想创建一个通用的子矩阵参考类`MatrixRef`。

矩阵只实现了一些成员，如,`row(i)`等，当然还定义了相应的类型等。`column(i)``diagonal()``row_vector`

在`MatrixRef`我想要的情况下，如果模板参数 C 没有定义 eg `col_vector`，`MatrixRef`也没有定义`col_vector`。或者作为解决方法定义它`void`。

对于函数成员，我找到了一个可行的解决方案，但在 typedefs 上却没有。

```
struct Matrix
{
    typedef vector<double>& row_vector;
    //typedef ColumnContainerReference col_vector;
    typedef DiagonalContainerReference diag_vector;

    row_vector row(size_type i);
    //col_vector col(size_type i);
    diag_vector diagonal();
};

template<typename C>
struct MatrixRef
{
    typedef typename C::row_vector row_vector;
    typedef typename C::col_vector col_vector;
    typedef typename C::diag_vector diag_vector;

    template<typename C1 = C>
    typename enable_if<is_matrix<C1>::has_rows, row_vector>::type
    row(size_type i);
    ...... col(size_type i);
    ...... diagonal();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:16:55.890

您可以定义一个特征基类：

```
template<typename C, typename = void>
struct row_vector_alias_definer{ };

template<typename C>
struct row_vector_alias_definer<C,
    typename std::enable_if<
        std::is_same<typename C::row_vector, typename C::row_vector>::value
        >::type>
{
    typedef typename C::row_vector row_vector;
}; 
```

然后让您的类从该特征模板的适当实例化中派生：

```
template<typename C>
struct MatrixRef : public row_vector_alias_definer<C>
{
    // ...
}; 
```

其他可选类型别名也是如此。

# shell - 如何使用 CTRL+箭头制作 byobu 前向词和后向词？

> ID：15988647
> 
> 赞同：6
> 
> 时间：2013-04-13T14:03:54.460
> 
> 标签：shell, zsh, ergonomics, byobu

当我在 uxterm 中使用时，zsh 会在我按下`ctrl+left`and时跳词`ctrl+right`。当在普通未配置的 byobu（tmux 后端）中使用时，它不是。光标坐在那里什么也不做。

然而，我可以通过使用 alt+b 和 alt+f 来实现这一点，但我真的很想使用 ctrl+arrow 以符合一般系统范围的人体工程学。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T14:09:36.287

`~/.byobu/.tmux.conf`使用此值创建：

```
set-window-option -g xterm-keys on 
```

然后将以下内容添加到`~/.byobu/keybindings.tmux`

```
unbind-key -n C-Left
unbind-key -n C-Right 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T18:47:41.937

好的，我找到了解决方法：

```
bindkey '^[[1;5D' backward-word
bindkey '^[[1;5C' forward-word 
```

在`~/.zshrc`

为了找出我必须`cat -v`输入的神秘密钥代码。天哪，我的工作效率提高了 15%。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-01T20:11:19.800

此处的补丁为我在 Ubuntu 12.04 上解决了问题

[https://code.launchpad.net/~jake-biesinger/byobu/byobu/+merge/126830](https://code.launchpad.net/~jake-biesinger/byobu/byobu/+merge/126830)

# css - 修复 CSS3 旋转后文本的脆/锯齿状渲染

> ID：15988648
> 
> 赞同：2
> 
> 时间：2013-04-13T14:03:54.723
> 
> 标签：css, rotation, css-transforms

我敢肯定你会注意到 CSS3 旋转后文本的恼人外观。文字看起来很脆，锯齿状，未对齐......

我找到了一些答案，其中包括`-webkit-font-smoothing`但根本没有效果。

之后，我找到了自己的解决方案：只需应用一些`filter`属性！是的，这行得通！它适用于任何过滤器（不透明度、灰度、模糊）！

因此，如果我们旋转一些文本并应用（对于 Chrome）

```
-webkit-filter: blur(0px); 
```

和（对于 FF）

```
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); 
```

结果好多了。文字对齐很好，没有松脆和锯齿状的效果。但是......现在文字有点模糊。不是因为 filter `blur`，所以任何其他过滤器的结果都是一样的。再次，`-webkit-font-smoothing`没有效果。

**[这是 jsfiddle](http://jsfiddle.net/NKgHW/)**，您可以看到这两段之间的区别。（如果您申请，您甚至可以更好地看到差异[`color: red;`。`p`](http://jsfiddle.net/NKgHW/10/)）

* * *

现在，我的问题是 - 是否有更好的方法可以在文本旋转后使用其他一些属性来解决这个渲染问题？或者至少在使用滤镜后如何修复这种模糊效果？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:24:52.207

我认为对此无能为力。

计算机字体被开发为在水平和垂直对齐的二次像素网格中显示 - 将字符旋转 90°（或可能 45°）的倍数之外的任何其他值都很难产生令人满意的结果（至少在小尺寸字体中不会）显示在普通网站上¹），因为仍然只有二次像素可用于渲染它们，因此必须进行大量舍入和插值，因此您最终会得到多个像素，现在必须以某种方式显示部分内容之前只有一个小“点”——即使是亚像素渲染也无法解决这个问题（有时它甚至会增加旋转文本的感知“模糊性”）。

* * *

¹ 尝试将 fiddle 中的字体大小更改为 5em——您会注意到旋转后的文本看起来非常好。对于不可能的小文本尺寸，至少在当今屏幕的像素密度下是不可能的（在视网膜显示器上可能看起来比在普通 TFT 上好一点）。

# xml - Windows Phone 8：从 Web 读取 XML

> ID：15988649
> 
> 赞同：1
> 
> 时间：2013-04-13T14:03:55.413
> 
> 标签：xml, vb.net, visual-studio-2012, windows-phone-8

作为我正在处理的项目的一部分，我正在尝试将此 XML 页面 ( [http://weather.yahooapis.com/forecastrss?w=2459115](http://weather.yahooapis.com/forecastrss?w=2459115) ) 加载到我的 Windows Phone 8 应用程序中，并将一些值保存为变量.

我正在使用 Visual Studio 2012 专业版和 VB.net。

到目前为止，我已经搜索并尝试了多种方法，只是试图保存一个变量以开始，但我无法读取它。

这就是我到目前为止所拥有的

```
Partial Public Class MainPage
Inherits PhoneApplicationPage
Private XMLHANDLE As WebClient

Dim lang As String

Public Sub New()
    InitializeComponent()

    SupportedOrientations = SupportedPageOrientation.Portrait Or SupportedPageOrientation.Landscape

    Dim XML As String = "http://weather.yahooapis.com/forecastrss?w=2459115"
    XMLHANDLE = New WebClient()
    XMLHANDLE.DownloadStringAsync(New Uri(XML))

    AddHandler XMLHANDLE.DownloadStringCompleted, AddressOf XMLHANDLE_DownloadStringCompleted
    AddHandler XMLHANDLE.DownloadProgressChanged, AddressOf XMLHANDLE_DownloadProgressChanged
End Sub

Private Sub XMLHANDLE_DownloadProgressChanged(sender As Object, e As DownloadProgressChangedEventArgs)

End Sub

Private Sub XMLHANDLE_DownloadStringCompleted(sender As Object, e As DownloadStringCompletedEventArgs)
    If e.[Error] Is Nothing AndAlso Not e.Cancelled Then
        Dim resultElements As XElement = XElement.Parse(e.Result)

        lang = resultElements.Element("language").Value
        Console.WriteLine(lang)
    End If

End Sub 
```

我的代码一直在此行上查找空值异常

```
lang = resultElements.Element("language").Value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:09:06.093

`Element`仅查看当前元素的直接子元素，因此您无法获得`language`那么简单的元素。

试试看：

```
lang = resultElements.Element("channel").Element("language").Value 
```

或使用`Descendants`方法：

```
lang = resultElements.Descendants("language").First().Value 
```

# android - 安卓一次性登录系统

> ID：15988651
> 
> 赞同：0
> 
> 时间：2013-04-13T14:04:04.087
> 
> 标签：android, android-intent, start-activity

我正在尝试设计一个一次性登录系统。

*   在 loginActivity 中，用户输入一个电话号码，我通过 SMS 向该电话号码发送密码

*   在确认活动中，用户输入密码。

如果密码成功，我想`finish`同时确认活动和登录活动。要从 loginActivity 做到这一点，我会这样做

```
Intent intent = new Intent(this, ConfirmationActivity.class);
startActivityForResult(intent, EXIT_CODE); 
```

然后再次在 loginActivity 我调用

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  if (resultCode == RESULT_OK) {
    if (requestCode == EXIT_CODE) {
      finish();
    }
  }
} 
```

为了测试我的系统是否工作，注册后，我点击返回按钮：

*   预期行为：无法返回或关闭应用程序

*   实际行为：回到loginActivity（注意跳过了confirmationActivity）

我的希望是，一旦用户成功注册，他们就不应该再次访问确认活动或登录活动。当他们关闭我的应用程序并重新启动它时，它会跳过这两个页面并将用户直接带到主页。

注意：看起来该`onActivityResult`方法从未被调用过。我在那里打了几个 println 调用，但它们从未打印在 LogCat 上。

免责声明：上次我提出问题并展示代码片段时，一位受访者分心并开始谈论代码片段而不是解决问题。这里的片段只是为了展示我尝试过的内容。显然它并没有解决问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:12:02.953

一种可能的解决方案可能是：

您无需使用 LoginActivity 打开应用程序，而是创建一个名为 FirstActivity 的新应用程序。

在此活动中，您检查是否在 sharedPreferences 中设置了标志。

1.  如果此检查为真，则继续您的登录活动。

2.  如果此检查返回错误，则启动 LoginActivity。在用户成功输入“秘密”后，您应该在 sharedPreferences 中设置一个标志。下次用户打开应用程序时，sharedPreferences 中的标志将被设置，您将知道该用户已经注册。

任何问题？在下面发表评论

# crystal-reports-2008 - 如何在 Crystal Reports 2008 中创建累积变量

> ID：15988654
> 
> 赞同：0
> 
> 时间：2013-04-13T14:04:42.530
> 
> 标签：crystal-reports-2008

也许是一个愚蠢的问题，但我找不到一个例子：

```
CurrencyVar x;
if(x=0) then
   x:= {saldo}+{CtaCte.Haber}-{CtaCte.Debe}
else
   x:=x+{CtaCte.Haber}-{CtaCte.Debe} 
```

当前，此计算字段失败。变量 x 始终保持为零

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:49:43.817

寻找我保存的示例，我发现要做到这一点，我必须执行以下操作：

```
CurrencyVar x;
if(PreviousIswNull({CtaCte.Haber})) then
   x:= {saldo}+{CtaCte.Haber}-{CtaCte.Debe}
else
   x:=x+{CtaCte.Haber}-{CtaCte.Debe} 
```

这是有效的，因为前一个值的第一条记录将始终为空

# matlab - 在 MATLAB 中使用 princomp 的 PCA（用于人脸识别）

> ID：15988655
> 
> 赞同：2
> 
> 时间：2013-04-13T14:04:58.163
> 
> 标签：matlab, machine-learning, gpgpu, face-recognition, pca

我正在尝试使用[MATLAB](http://en.wikipedia.org/wiki/MATLAB) `princomp`进行降维，但我不确定我做对了。

这是我的代码仅用于测试，但我不确定我的投影是否正确：

```
A = rand(4,3)
AMean = mean(A)
[n m] = size(A)
Ac = (A - repmat(AMean,[n 1]))
pc = princomp(A)
k = 2; %Number of first principal components
A_pca = Ac * pc(1:k,:)'  %Not sure I'm doing projection right
reconstructedA = A_pca * pc(1:k,:)
error = reconstructedA- Ac 
```

我使用 ORL 数据集进行人脸识别的代码：

```
%load orl_data 400x768 double matrix (400 images 768 features)
%make labels
orl_label = [];
for i = 1:40
    orl_label = [orl_label;ones(10,1)*i];
end

n = size(orl_data,1);
k = randperm(n);
s = round(0.25*n); %Take 25% for train

%Raw pixels
%Split on test and train sets
data_tr = orl_data(k(1:s),:);
label_tr = orl_label(k(1:s),:);
data_te = orl_data(k(s+1:end),:);
label_te = orl_label(k(s+1:end),:);

tic
[nn_ind, estimated_label] = EuclDistClassifier(data_tr,label_tr,data_te);
toc

rate = sum(estimated_label == label_te)/size(label_te,1)

%Using PCA
tic
pc = princomp(data_tr);
toc

mean_face = mean(data_tr);
pc_n = 100;
f_pc = pc(1:pc_n,:)';
data_pca_tr = (data_tr - repmat(mean_face, [s,1])) * f_pc;
data_pca_te = (data_te - repmat(mean_face, [n-s,1])) * f_pc;

tic
[nn_ind, estimated_label] = EuclDistClassifier(data_pca_tr,label_tr,data_pca_te);
toc

rate = sum(estimated_label == label_te)/size(label_te,1) 
```

如果我选择足够多的主成分，它会给我相同的识别率。如果我使用少量的[主成分](https://en.wikipedia.org/wiki/Principal_component_analysis)(PCA)，那么使用 PCA 的比率会更差。

这里有一些问题：

1.  函数是使用 MATLAB`princomp`计算前**k个主成分的最佳方法吗？**
2.  使用 PCA 投影特征与原始特征并不能提供额外的准确性，而只能提供更小的特征向量大小？（更快地比较特征向量）。
3.  如何自动选择与原始特征向量具有相同精度的最小**k （主成分数）？**
4.  如果我有非常大的样本集，我可以只使用其中的子集并具有相当的准确性吗？或者我可以在某个集合上计算 PCA，然后“添加”一些其他集合（我不想为 set1+set2 重新计算 pca，但以某种方式迭代地将来自 set2 的信息添加到来自 set1 的现有 PCA）？

我还简单地尝试了 GPU 版本`gpuArray`：

```
%Test using GPU
tic
A_cpu = rand(30000,32*24);
A = gpuArray(A_cpu);
AMean = mean(A);
[n m] = size(A)
pc = princomp(A);
k = 100;
A_pca = (A - repmat(AMean,[n 1])) * pc(1:k,:)';
A_pca_cpu = gather(A_pca);
toc
clear;

tic
A = rand(30000,32*24);
AMean = mean(A);
[n m] = size(A)
pc = princomp(A);
k = 100;
A_pca = (A - repmat(AMean,[n 1])) * pc(1:k,:)';
toc
clear; 
```

它的工作速度更快，但不适合大型矩阵。也许我错了？

如果我使用一个大矩阵，它会给我：

> 使用 gpuArray 时出错 设备内存不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T21:34:43.340

“princomp 函数是使用 MATLAB 计算前 k 个主成分的最佳方法吗？”

它正在计算完整的 SVD，因此在大型数据集上会很慢。您可以通过在开始时指定所需的维数并计算部分 svd 来显着加快这一速度。部分 svd 的 matlab 函数是`svds`.

如果 svds' 对你来说不够快，这里有一个更现代的实现：

[http://cims.nyu.edu/~tygert/software.html（matlab](http://cims.nyu.edu/~tygert/software.html)版本：[http](http://code.google.com/p/framelet-mri/source/browse/pca.m) ://code.google.com/p/framelet-mri/source/browse/pca.m ）

（参见描述算法的论文[http://cims.nyu.edu/~tygert/blanczos.pdf](http://cims.nyu.edu/~tygert/blanczos.pdf)）

您可以通过增加计算的奇异向量的数量来控制近似误差，在链接的论文中有精确的界限。这是一个例子：

```
>> A = rand(40,30); %random rank-30 matrix
>> [U,S,V] = pca(A,2); %compute a rank-2 approximation to A
>> norm(A-U*S*V',2)/norm(A,2) %relative error               

ans =

    0.1636

>> [U,S,V] = pca(A,25); %compute a rank-25 approximation to A
>> norm(A-U*S*V',2)/norm(A,2) %relative error                 

ans =

    0.0410 
```

当您拥有大量数据和稀疏矩阵时，通常不可能计算完整的 SVD，因为这些因素永远不会稀疏。在这种情况下，您必须计算部分 SVD 以适应内存。例子：

```
>> A = sprandn(5000,5000,10000);
>> tic;[U,S,V]=pca(A,2);toc;
no pivots
Elapsed time is 124.282113 seconds.
>> tic;[U,S,V]=svd(A);toc;   
??? Error using ==> svd
Use svds for sparse singular values and vectors.

>> tic;[U,S,V]=princomp(A);toc;
??? Error using ==> svd
Use svds for sparse singular values and vectors.

Error in ==> princomp at 86
    [U,sigma,coeff] = svd(x0,econFlag); % put in 1/sqrt(n-1) later

>> tic;pc=princomp(A);toc;     
??? Error using ==> eig
Use eigs for sparse eigenvalues and vectors.

Error in ==> princomp at 69
        [coeff,~] = eig(x0'*x0); 
```

# android - 将活动从 OnClickListner 和 Intent 发送到外部类

> ID：15988656
> 
> 赞同：0
> 
> 时间：2013-04-13T14:05:02.390
> 
> 标签：android, performance

我有一些转储问题。我有一些 Onclick 监听器：

```
 OnClickListener listener = new OnClickListener() {
        public void onClick(View myView) {
...
                if (gameInfo.isWin()){
                    //Dialogs.showWinWindow(FifteenActivity);
                }
...
    } 
```

我想将我的主要活动发送到外部静态方法以显示一些对话框。如果我在 onClickListener 之外，我会写：

```
 if (gameInfo.isWin()){
                Dialogs.showWinWindow(this);
            } 
```

但在这种情况下，我将发送 OnClickListener。我必须在这个方法中写什么来发送我的活动？

**Quatoin 2.**从外部方法重新启动 Activity 的问题相同。在我使用的 mainActivity 类中

```
 public void restart()   
{  
    Intent intent = getIntent();
    overridePendingTransition(0, 0);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    finish();
    overridePendingTransition(0, 0);
    startActivity(intent);
} 
```

有用。但是我如何可以将此方法用作外部类的“静态”。就像是：

```
Dialogs.restart(/*Some info?*/); 
```

谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:16:30.877

当您需要在侦听器或类似的东西中执行代码时传递您的活动的引用时，您必须这样做：

```
OnClickListener listener = new OnClickListener() {
    public void onClick(View myView) {
            ...
            if (gameInfo.isWin()){
                Dialogs.showWinWindow(FifteenActivity.this);
            }
            ...
} 
```

注意FifteenActivity.this，这将返回对您的活动的引用。

关于问题 2，您必须这样做：

```
public static void restart()   
{  
    Intent intent = getIntent();
    overridePendingTransition(0, 0);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    finish();
    overridePendingTransition(0, 0);
    startActivity(intent);
} 
```

这意味着，如果不将其声明为静态方法，就无法以这种方式调用 restart 方法。

# css - 放置具有不同高度的多个 div（在底部）

> ID：15988666
> 
> 赞同：0
> 
> 时间：2013-04-13T14:05:42.653
> 
> 标签：css

我正在尝试使用我自己的 css 为一个简单的 html 页面实现条形图。我正处于创建 html 和 css 的初始阶段。下面是我的html和css。

小提琴：http: [//jsfiddle.net/ismailvtl/GJUmq/](http://jsfiddle.net/ismailvtl/GJUmq/)

即使我改变了 "bar" 的高度，**我**也希望我的**"bar"**保持在**"line"**上。

 **HTML：

```
<div class="bar-holder">
<div class="bar car"></div>
<div class="bar fat"></div>
<div class="bar iron"></div>
</div>
<div class="line"></div> 
```

CSS：

```
.bar-holder
{
height:auto;
width:100%;
float:left;  
}
.line {
width:100%;
height:3px;
background:#000;
float:left;
position:relative;
}
.bar {
height:350px;
width:40px;
float:left;
margin-left:20px;
border:1px solid #dedede;
bottom:0;
}
.car {
background:blue;
height:240px;
}
.fat {
background:red;
height:300px;
}
.iron {
background:black;
height:330px
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:30:36.843

[http://codepen.io/anon/pen/kiwqE](http://codepen.io/anon/pen/kiwqE)

你所有的酒吧都必须是绝对的并且有一个底部 0**

# caching - 如何更新在两台机器上运行的两个 jvm 中的缓存

> ID：15988667
> 
> 赞同：0
> 
> 时间：2013-04-13T14:05:44.157
> 
> 标签：caching

我想知道如何更新在两台机器上运行的两个 jvm 之间的缓存。我有请求者出现并在缓存中找到的情况（我们必须在这两个之上使用 Web 服务器和一个负载均衡器），如果找到则返回，如果找不到则转到 db 并更新缓存并返回。此时，一个缓存已更新为新值，但另一台服务器仍具有旧值。我想用相同的值更新其他服务器缓存。提前致谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-13T14:09:29.580

您应该询问分布式系统的设计者

# matlab - Matlab CUDA基础实验

> ID：15988669
> 
> 赞同：3
> 
> 时间：2013-04-13T14:05:54.213
> 
> 标签：matlab, cuda

***（正确且有指导意义的回答，见下文）***

我开始用 matlab 和 gpu (nvidia gtx660) 做实验。

现在，我编写了这个简单的蒙特卡罗算法来计算 PI。以下是CPU版本：

```
function pig = mc1vecnocuda(n)
countr=0;
A=rand(n,2);
 for i=1:n

   if norm(A(i,:))<1
    countr=countr+1;
   end
 end
pig=(countr/n)*4;
end 
```

这需要很少的时间在 CPU 上执行，将 100000 个点“扔”到单位圆中：

```
 >> tic; mc1vecnocuda(100000);toc;

      Elapsed time is 0.092473 seconds. 
```

相反，请参阅算法的 gpu 化版本会发生什么：

```
 function pig = mc1veccuda(n)
   countr=0;
   gpucountr=gpuArray(countr);
   A=gpuArray.rand(n,2);
   parfor (i=1:n,1024)
    if norm(A(i,:))<1
        gpucountr=gpucountr+1;
    end
   end

   pig=(gpucountr/n)*4;
   end 
```

现在，这需要很长时间才能执行：

```
>> tic; mc1veccuda(100000);toc;
Elapsed time is 21.137954 seconds. 
```

我不明白为什么。我对 1024 个工作人员使用 parfor 循环，因为用 gpuDevice 查询我的 nvidia 卡，1024 是 gtx660 上允许的最大并发线程数。

有人能帮我吗？谢谢。

编辑：这是避免 IF 的更新版本：

```
function pig = mc2veccuda(n)
countr=0;
gpucountr=gpuArray(countr);
A=gpuArray.rand(n,2);
parfor (i=1:n,1024)

    gpucountr = gpucountr+nnz(norm(A(i,:))<1);

end

pig=(gpucountr/n)*4;
end 
```

**这是按照 Bichoy 的指导方针编写的 代码（实现结果的*正确代码）：***

```
function pig = mc3veccuda(n)
countr=0;
gpucountr=gpuArray(countr);
A=gpuArray.rand(n,2);
Asq = A.^2;
Asqsum_big_column = Asq(:,1)+Asq(:,2);
Anorms=Asqsum_big_column.^(1/2);
gpucountr=gpucountr+nnz(Anorms<1);

pig=(gpucountr/n)*4;
end 
```

请注意 n=10 百万的执行时间：

```
>> tic; mc3veccuda(10000000); toc;
Elapsed time is 0.131348 seconds.
>> tic; mc1vecnocuda(10000000); toc;
Elapsed time is 8.108907 seconds. 
```

我没有测试我原来的 cuda 版本（for/parfor），因为它的执行需要几个小时，n=10000000。

伟大的比乔伊！;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:19:35.193

我想问题出在`parfor`!

`parfor`应该在 MATLAB worker 上运行，那是你的主机而不是 GPU！我猜实际发生的情况是您在主机（而不是 GPU）上启动了 1024 个线程，并且每个线程都在尝试调用 GPU。这会导致您的代码花费大量时间。

尝试重新编写代码以使用矩阵和数组操作，而不是 for 循环！这将显示一些加速。另外，请记住，您应该在 GPU 中进行更多计算，否则，内存传输只会支配您的代码。

# 代码：

这是包含几个人的所有更正和建议后的最终代码：

```
function pig = mc2veccuda(n)
  A=gpuArray.rand(n,2); % An nx2 random matrix
  Asq = A.^2; % Get the square value of each element
  Anormsq = Asq(:,1)+Asq(:,2); % Get the norm squared of each point
  gpucountr = nnz(Anorm<1); % Check the number of elements < 1
  pig=(gpucountr/n)*4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:28:44.187

很多原因比如：

1.  主机和设备之间的数据移动
2.  每个循环内的计算量非常小
3.  对 GPU 的调用`rand`可能不是并行的
4.  `if`循环内的条件可能导致分歧
5.  对公共变量的累加可以串行运行，有开销

很难分析 Matlab+CUDA 代码。您可能应该尝试使用本机 C++/CUDA 并使用并行 Nsight 来查找瓶颈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-15T17:19:24.297

正如 Bichoy 所说，CUDA 代码应该始终进行矢量化处理。在 MATLAB 中，除非您正在编写 CUDA 内核，否则您获得的唯一大幅加速是在具有数千个（慢速）内核的 GPU 上调用矢量化操作。如果您没有大型向量和向量化代码，那将无济于事。

另一件没有提到的事情是，对于像 GPU 这样的高度并行架构，您希望使用与“标准”算法不同的随机数生成算法。因此，添加到 Bichoy 的答案中，添加参数“Threefry4x64”（64 位）或“Philox4x32-10”（32 位，速度更快！超快！）可以导致 CUDA 代码的大幅加速。MATLAB 在这里解释了这一点：http: [//www.mathworks.com/help/distcomp/examples/generating-random-numbers-on-a-gpu.html](http://www.mathworks.com/help/distcomp/examples/generating-random-numbers-on-a-gpu.html)

# jquery - jquery - 将 LI 从 UL A 拖到 UL B 并从 UL A 中删除？

> ID：15988670
> 
> 赞同：4
> 
> 时间：2013-04-13T14:05:55.527
> 
> 标签：jquery, html-lists, draggable, jquery-ui-sortable

我有两个列表，第二个列表是`sortable`，我可以从第一个列表拖动到第二个列表，但不知道如何从第一个列表中删除。

`li`如果我删除项目 ( ) 确实会被删除，`helper: "clone"`但拖放操作效果不佳（晃动，不顺畅）。

（奖励积分 - 空时也删除左侧 UL）

![在此处输入图像描述](https://i.stack.imgur.com/oXCGR.png)

小提琴：http: [//jsfiddle.net/Nme9a/](http://jsfiddle.net/Nme9a/)

```
<html>
  <head>
    <style>
    #categorizer { padding: 2px; }
    #list_to_process, #categories  { color: blue; background-color: green; border: solid; border-width: 4px }
    ul { padding: 10px; margin: 50px; float:left; list-style:none; }
    li { color: yellow; padding: 25px 80px; cursor: move; }
    li:nth-child(even) { background-color: #000 }
    li:nth-child(odd) { background-color: #666 }
  </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
    <script type="text/javascript">
      $(document).ready( function() {
        $("#categories").sortable({
          revert: true
        });
        $("li.to_process").draggable( {
          connectToSortable: "#categories",
          helper: "clone",
          revert: "invalid"
        });
      });
    </script>

  </head>
  <body>
    <div id="categorizer">
      <ul id="list_to_process">
        <li class="to_process" id="left1">1</li>
        <li class="to_process" id="left2">2</li>
        <li class="to_process" id="left3">3</li>
        <li class="to_process" id="left4">4</li>
      </ul>
      <ul id="categories">
        <li id="righta">a</li>
        <li id="rightb">b</li>
        <li id="rightc">c</li>
        <li id="rightd">d</li>
        <li id="righte">e</li>
      </ul>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:33:27.350

您可以将“接收”选项中的回调传递给 sortable()，如下所示：

```
 $(document).ready( function() {
    $("#categories").sortable({
      revert: true,
      receive: function(evt, ui) {
        ui.item.remove();
      }
    });
    $("li.to_process").draggable( {
      connectToSortable: "#categories",
      revert: "invalid",
      helper: "clone"
    });
  }); 
```

[迈克尔编辑]

请注意，我还添加了：

```
$('#list_to_process li').length == 0) {
  $('#list_to_process').remove();
} 
```

在`ui.item.remove();`这样之后仍然有填充和边框的空`UL`，即

![在此处输入图像描述](https://i.stack.imgur.com/PC6XH.png)

将被删除。

# windows-phone-8 - 如何强制键盘不与堆栈面板重叠

> ID：15988680
> 
> 赞同：2
> 
> 时间：2013-04-13T14:07:32.060
> 
> 标签：windows-phone-8

我是 WP 开发的新手，正在尝试动手操作。

如果您查看钱包 pin 屏幕，焦点会自动设置为文本框，以便用户可以开始输入，并且键盘不会隐藏/重叠*完成*和*取消*按钮。

![在此处输入图像描述](https://i.stack.imgur.com/bprHj.png)

此外，如果您按回键，这些按钮将保留在底部，如下所示。 ![在此处输入图像描述](https://i.stack.imgur.com/IT0ka.png)

我也在尝试拥有相同类型的用户界面。但是，就我而言

1.  加载页面后，我无法将焦点设置到文本框。我无法在 OnNavigatedTo 事件中获取文本框的 .Focus() 方法。我应该在哪里做这个？

2.  当我手动点击文本框输入值时，键盘与包含“保存”和“取消”按钮的堆栈面板重叠，如下所示。我不希望这种情况发生。相反，屏幕应如第二张图片所示。

![在此处输入图像描述](https://i.stack.imgur.com/9hMON.png)

下面是我尝试过的 XAML 代码。

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <StackPanel>
        <TextBlock Name="txtLimit" TextWrapping="Wrap" Text="Enter the value" Style="{StaticResource PhoneTextSubtleStyle}"/> 
        <TextBox AcceptsReturn="True" InputScope="Number"  />
    </StackPanel>

    <StackPanel VerticalAlignment="Bottom" HorizontalAlignment="Center" Orientation="Horizontal" >
        <Button Content="save" Width="200" />
        <Button Content="cancel" Width="200"/>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:33:15.690

要为第一次导航设置焦点，您显然必须在`Loaded`事件处理程序中设置它。

对于后退导航（从您的应用程序关闭时开始），其中的导航`OnNavigatedTo`将按您的预期触发。

```
 // Constructor
    public MainPage()
    {
        InitializeComponent();
        this.Loaded += (sender, args) => this.textBox.Focus();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        this.textBox.Focus();
    } 
```

但是，您需要将按钮添加到`ApplicationBar`屏幕键盘下方以显示。

但是 SDK 不允许在应用程序栏中使用矩形按钮，只能使用图标按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:22:55.020

In the OnNavigatedTo method, can you try to use the Dispatcher like this :

```
Dispatcher.BeginInvoke(()=>{
    this.textBox.Focus();
  }); 
```

And, as pointed out, you can NOT have rectangular buttons in the appBar but you can use standard one (like the linked in button for example).

# ios - 如何在同一视图上的 2 个 UITableView 之间拆分数据

> ID：15988681
> 
> 赞同：0
> 
> 时间：2013-04-13T14:07:33.743
> 
> 标签：ios, objective-c, uitableview

例如，我正在尝试将一个地名加载到我的 top`UITableView`中，称为`myTableView`. 在底部，我试图*只*显示“test2”。

自然，所有数据都被加载到每个`UITableView`. 如果我滚动到底部`myTableView2`，会显示“test2”这个词，但我希望它是那里唯一的东西。

有没有办法，也许通过委派不同的数据源，我可以分离每个我想要的数据`UITableView`？我尝试用 if 语句分隔，但很快意识到这没有效果。

在我看来，我可能需要为 设置单独的数据源`myTableView2`，但我不知道该怎么做......

代码在这里：

```
- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{

   [self setString];
   NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];

   NSString *string1 = [dic objectForKey:@"name"];

   for (NSDictionary *diction in dic)
   {
      [array addObject:string1];
   }

   [[self myTableView] reloadData];

   NSString *string2 = [NSString stringWithFormat:@"test2"];

   [array addObject:string2];

   [[self myTableView2] reloadData];

   [indicator stopAnimating];
   indicator.hidden=YES;
   [indicator removeFromSuperview];
   ilabel.hidden = YES;
} 
```

![顶部是 myTableView，底部是 myTableView2](https://i.stack.imgur.com/7nXix.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T00:52:41.717

用下面的代码解决。关键是要有两个不同的数组来加载各自的数据，并将其显示在我能够区分 UITableViews 和 IF 语句的最底部：

```
- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
 [self setString];
 NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
 NSString *string1 = [dic objectForKey:@"name"];
 NSString *string2 = [NSString stringWithFormat:@"test2"];

  for (NSDictionary *diction in dic)
  {
      [array addObject:string1];
      [array2 addObject:string2];

      [[self myTableView] reloadData];
      [[self myTableView2] reloadData];
  }

  [indicator stopAnimating];
  indicator.hidden=YES;
  [indicator removeFromSuperview];
  ilabel.hidden = YES;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
 static NSString *CellIdentifier = @"Cell";
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

 if(!cell)
 {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
 }

 if (tableView == self.myTableView)
 {
  if ([[array objectAtIndex:indexPath.row] isKindOfClass:[NSNumber class]])
  {        
    cell.textLabel.text = [[array objectAtIndex:indexPath.row] stringValue];
    cell.textLabel.textColor = [UIColor whiteColor];
    cell.textLabel.textAlignment = NSTextAlignmentCenter;
  }
  else
  {        
    cell.textLabel.text = [array objectAtIndex:indexPath.row];
    cell.textLabel.textColor = [UIColor whiteColor];
    cell.textLabel.textAlignment = NSTextAlignmentCenter;
  }
 }
 if (tableView == self.myTableView2)
 {
    if ([[array2 objectAtIndex:indexPath.row] isKindOfClass:[NSNumber class]])
    {
        cell.textLabel.text = [[array2 objectAtIndex:indexPath.row] stringValue];
        cell.textLabel.textColor = [UIColor whiteColor];
        cell.textLabel.textAlignment = NSTextAlignmentCenter;
    }
    else
    {
        cell.textLabel.text = [array2 objectAtIndex:indexPath.row];
        cell.textLabel.textColor = [UIColor whiteColor];
        cell.textLabel.textAlignment = NSTextAlignmentCenter;
    }
 }
 return cell;
} 
```

# javascript - AngularJS资源未解决

> ID：15988683
> 
> 赞同：2
> 
> 时间：2013-04-13T14:07:43.273
> 
> 标签：javascript, resources, angularjs, promise

我是 AngularJS 的新手，所以请温柔一点。

我想使用 AngularJS 的 $resource 属性从后端检索数据，但是似乎在实际调用完成之前该属性已被加载。

目前我有以下代码：

**控制器：**

```
MyApp.controller('IndexCtrl', function IndexCtrl($scope, socket, carsRes) {
    console.log(carsRes.cars.get());
    $scope.cars = carsRes.cars.get();
}); 
```

**工厂**

```
.factory('carsRes', function($resource) {
        var result = {};
        result.cars = $resource('/cars/:id', {}, {
            'get': {method: 'GET'},
            'save': {method: 'POST'},
            'query': {method: 'GET', isArray: true},
            'remove': {method: 'DELETE'},
            'delete': {method: 'DELETE'}
        });

        return result;
 }); 
```

但是在我想在 $scope.cars 中存储 carsRes.cars.get() 的时候，调用还没有完成，console.log 告诉我 $resolved 仍然是错误的。

我怎样才能等待电话得到解决？我读过一些关于 $q 的东西，但对我来说并不是很清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T14:43:13.890

这是因为`resource.get()`是异步的。它立即返回一个空引用，然后在 ajax 调用完成后填充实际数据。

处理结果的最佳方法是使用回调函数：

```
carsRes.cars.get(function(response){ 
    // We now have a completed ajax call, with the response
    $scope.cars = response;
}); 
```

[`$resource`](http://docs.angularjs.org/api/ngResource.%24resource)在文档中查看更多示例。

# ios - iOS：恢复的交易继续到达沙盒

> ID：15988684
> 
> 赞同：0
> 
> 时间：2013-04-13T14:07:47.113
> 
> 标签：ios, transactions, app-store-connect, in-app-purchase

我在应用程序购买中进行 iTunes 沙盒环境测试。我使用在 iTunes Connect 中创建的测试用户，并且购买代码运行良好。现在我正在测试恢复事务。这是恢复的代码：

```
 [[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

执行此代码一次后，每次我重新启动应用程序并使用代码注册 TransactionObserver：

```
 [[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

我被要求输入用于测试还原的最后一个用户的密码。它的交易每次都会返回给我。因此，无法在“未购买”状态下测试应用程序。我已经尝试注销该用户并以非测试用户身份登录，但它没有改变，我总是被要求插入该*测试*用户的密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:08:58.017

终于找到问题了：当观察者在方法中收到恢复的事务时

```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

我正在处理它并打电话

```
[[SKPaymentQueue defaultQueue] finishTransaction:transaction.originalTransaction]; 
```

问题是我还需要打电话

```
[[SKPaymentQueue defaultQueue] finishTransaction:transaction]; 
```

关于容器事务本身。错过了这一点，沙盒一遍又一遍地向我发送相同的交易，因为我从未确认收到它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T13:08:07.880

首先，您处于沙盒环境中，仅供测试用户使用。因此，请再次尝试创建新的测试用户。（您可以使用不存在的电子邮件地址创建一个测试用户，可以测试；））

我认为您将购买状态保存到 NSUserDefaults，因此要使用新用户进行测试并达到未购买的情况，您应该删除该应用程序并再次运行它。

祝你好运！

# c# - WPF - 绑定到 dll 函数

> ID：15988694
> 
> 赞同：1
> 
> 时间：2013-04-13T14:08:42.610
> 
> 标签：c#, wpf, data-binding, dll

如何绑定 ListBox 以`ObservableCollection`通过某个 dll 中的函数显示该返回中的所有项目？

我在 dll 单音类中调用`FilesManager`了一个函数，该函数`Instance()`返回指向该类的指针。然后我有一个名为 的函数`GetFiles()`，它的返回`ObservableCollection`包含所有文件名。

我在 xml 中有一个 ListBox，我想将它`ItemsSource`的属性绑定到
`FilesManager.Instance().GetFiles()`，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:12:38.557

您应该考虑使用 MVVM 设计模式。在这种情况下，您的视图模型上将有一个公开`FilesManager.Instance().GetFiles()`集合的属性，并且您的视图将绑定到该属性。

```
public class MyViewModel
{
    public MyViewModel()
    {
        this.Files = FilesManager.Instance().GetFiles();
    }

    public XXX Files { get; private set; }
}

<ListBox ItemsSource="{Binding Files}" ... /> 
```

如果您想`Files`在构建后更改引用，则需要实现`INotifyPropertyChanged`以更新 UI。

# html - 开发、托管和管理 HTML5 游戏和购物系统

> ID：15988710
> 
> 赞同：0
> 
> 时间：2013-04-13T14:10:22.947
> 
> 标签：html, gambling

我正在为一家正在构建 HTML5 赌博游戏平台的初创公司工作。我被要求建议应该使用的服务器技术和托管解决方案。游戏需要能够进行通信，除其他事项外，还需要允许在网站内购物的积分系统。你有什么建议吗？请列出您推荐的所有技术/框架/等作为此类游戏平台的集成解决方案 - 可在任何设备上播放。还请推荐可能有助于开发、托管和管理的书籍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:27:54.643

让我们将您的问题分解为更简单的部分。许多技术可以在这些部分中的每一个方面提供帮助。我将列出最受欢迎的开源项目。

1.  **Ruby on Rails：**用于快速开发和部署可扩展的 Web 应用程序。
2.  **数据库：**许多选项可用，具体取决于 RDBMS 方法或 NoSQL 方法。生产级性能示例包括 sqlite、mongoDB 等。
3.  **Twitter Bootstrap：**在多个设备上获得最佳的前端 GUI 体验。
4.  **CMS：** Joomla，Drupal 用于快速入门。不推荐用于非常快速的可扩展性。
5.  **基础设施：**没有人能在价格上击败亚马逊！您有许多解决方案可供选择，并且只需为您使用的基础架构付费。

此外，请关注非常成功的游戏公司（Rovio、Zynga 等）的开发博客，以获取有关他们使用的堆栈的更多详细信息。

如果您能告诉我您的初创公司已经使用的技术的详细信息，我可以放大解决方案，这些解决方案会让您的开发人员更快地切换到该解决方案。

# ruby - Ruby 中是否有与 Java 的 Iterator.hasNext() 类似的 Array 操作？

> ID：15988712
> 
> 赞同：0
> 
> 时间：2013-04-13T14:10:36.790
> 
> 标签：ruby

我只能找到查找数组特定元素的方法。

在我的对象中。每个 |a| 循环，我想知道我什么时候在最后一个元素，所以我可以有一个像这样的循环：

```
objects.each |a|
   if objects.hasNext()
       puts a.name + ","
   else
       puts a.name 
```

Iterator 的 hasNext() 确定 Array 的迭代器在当前正在评估的元素之后是否还有另一个元素。

我想强调的是，我希望打印出这些值，而不是将它们转换为数组。.join 不是我在这里寻找的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T14:23:23.997

不，没有。但是，请注意，这`hasNext`也不是`Array`Java 中的操作。这是一个`Iterator`操作，Ruby 相当于 Java 的`Iterator`is `Enumerator`， not `Array`.

但是，Ruby 的`Enumerator`工作方式与 Java 有点不同：不是询问是否有下一个元素，然后推进迭代器，而是简单地尝试查看下一个元素，`StopIteration`当没有更多元素时它会抛出异常。

所以，相当于Java的

```
iter.hasNext); 
```

大概是

```
begin
  enum.peek
  true
rescue StopIteration
  false
end 
```

但是，您几乎*从不*在 Ruby 中手动迭代。相反，您使用更高级别的迭代方法，例如`join`, `flat_map`, `group_by`, `uniq`, `sort`, `sort_by`, `inject`, `map`, `each_with_object`,`each`等。

例如：

```
%w(pretty ugly stupid).join(', ') # => 'pretty, ugly, stupid' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T14:19:05.363

> Ruby 中是否有与 Java 的 hasNext() 类似的 Array 操作？

首先，Java 的 Array 本身没有任何`hasNext`方法，因为它没有任何意义。它是拥有它的[迭代器](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)。在 Ruby 中，没有列表这样的东西，强大的迭代器方法（`each`及其`each_*`家族）会让它变得毫无用处：

```
my_array.each do |current|

    // operations

    // implicit:
    // if (current.has_next) current = current.next
    // else break
end 
```

所以，不，没有这样的事情。

> 我正在使用 .each |a| 运行循环。我想每次都打印一个逗号，除非它是最后一个。我想要这个列表（漂亮、丑陋、愚蠢）而不是（漂亮、丑陋、愚蠢）。有什么想法吗

你应该看看`.join`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T00:12:51.787

在 Ruby 库中，迭代器被实现为内部迭代器，而 Java 实现了外部迭代器。两者的关键区别在于前者的设计目的是不让客户端控制迭代，而后者则将这个责任留给客户端。

like 方法的目的`hasNext`是直接控制迭代，因此在 Ruby 中不存在这样的东西。我猜想，类似`peek`和`next`定义的方法`Enumerator`不是为了直接控制迭代，而是为了实现自定义的内部迭代器。

也就是说，您的问题很容易通过以下代码解决：

```
puts objects.map(&:name).join(', ') 
```

`Enumerator`然而，有时使用一个对象来构建你自己的内部迭代器可能很有用：

```
module Enumerable
  def puts_each_with_separator(separator)
    enum = each
    loop do
      print yield(enum.next)
      enum.peek rescue break
      print separator
    end
    puts
  end
end

objects.puts_each_with_separator(', ', &:name) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T05:14:46.430

通常，当学习一门新语言时，人们倾向于寻找熟悉的东西:)

您的具体问题可以通过使用轻松解决`each_with_index`。

```
objects.each_with_index do |object ,index|
    if index == (object.length -1) then 
        puts a.name + ","
    else
        puts a.name
    end
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T18:43:29.380

> 我想强调的是，我希望打印出这些值，而不是将它们转换为数组。.join 不是我在这里寻找的。

实际上，我认为 .join 正是您正在寻找的。.join 的结果是一个字符串，而不是一个数组，所以

```
puts objects.join(",") 
```

做你说你想要的。

# lambda - funcall 与 elisp 中的 lambda 应用

> ID：15988716
> 
> 赞同：3
> 
> 时间：2013-04-13T14:11:03.793
> 
> 标签：lambda, elisp, function-pointers

在 elisp 中，为什么调用 lambda 函数会起作用，但应用它会引发错误？

```
ELISP> (funcall (lambda ()))
nil
ELISP> (apply (lambda ()))
*** Eval error ***  Invalid function: lambda 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:15:41.237

我的 emacs 给出了另一个错误：

```
*** Eval error ***  Wrong number of arguments: apply, 1 
```

我认为它解释了一切。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T16:49:58.510

Apply 必须有参数，见 (describe-function) 结果：

```
apply is a built-in function in `C source code'.

(apply FUNCTION &rest ARGUMENTS)

Call FUNCTION with our remaining args, using our last arg as list of args.
Then return the value FUNCTION returns.
Thus, (apply '+ 1 2 '(3 4)) returns 10.

[back] 
```

# r - 将线性回归超平面投影到二维图（类似斜线）

> ID：15988718
> 
> 赞同：-2
> 
> 时间：2013-04-13T14:11:14.937
> 
> 标签：r, lm, projection-plane

我有这个代码

```
factors<-read.csv("India_Factors.csv",header=TRUE)  
marketfactor<-factors[,4]  
sizefactor<-factors[,5]  
valuefactor<-factors[,6]  
dati<-get.hist.quote("SI", quote = "AdjClose", compression = "m")  
returns<-diff(dati)  
regression<-lm(returns ~ marketfactor + sizefactor + valuefactor,na.action=na.omit) 
```

进行多线性回归。我想在 2D 平面上绘制针对某个因子的回报（这当然是微不足道的），并叠加了特定因子的线性回归超平面的投影。更清楚地说，结果应该是这样的：[wolfram 演示](http://demonstrations.wolfram.com/ExpectedReturnsOfTheDowIndustrialsFamaFrenchModel/)（请参阅快照）。

任何帮助将不胜感激。感谢您抽出宝贵时间，祝您周末愉快。乔治.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:07:37.050

尽管我的评论中的要点是，这是从 R 中的拟合模型为预测变量组合生成输出的规范方法。真的不清楚你想要显示什么情节，但对我来说有意义的是部分情节；其中一个变量在其范围内变化，同时将其他变量保持在某个共同值。在这里，我在保持变量常量时使用样本均值。

首先是一些虚拟数据，只有协变量，但这扩展到任何数字

```
set.seed(1)
dat <- data.frame(y = rnorm(100))
dat <- transform(dat,
                 x1 = 0.2 + (0.4 * y) + rnorm(100),
                 x2 = 2.4 + (2.3 * y) + rnorm(100)) 
```

拟合回归模型

```
mod <- lm(y ~ x1 + x2, data = dat) 
```

接下来使用模型预测一些数据值。您可以在单个预测中执行所有变量，然后对结果对象进行子集化以仅绘制相关行。或者，更清楚（尽管更冗长），您可以分别处理每个变量。下面我创建了两个数据框，模型中的每个协变量一个。在一个数据框中，我在变化的协变量范围内生成 100 个值，并重复其他协变量的平均值。

```
pdatx1 <- with(dat, data.frame(x1 = seq(min(x1), max(x1), length = 100),
                               x2 = rep(mean(x2), 100)))
pdatx2 <- with(dat, data.frame(x1 = rep(mean(x1), 100),
                               x2 = seq(min(x2), max(x2), length = 100))) 
```

在直线线性回归中，你真的不需要 100 个值——协变量范围的两个端点就可以了。但是，对于拟合函数*不是*线性的模型，您需要在更多位置进行预测。

接下来，使用模型在这些数据点进行预测

```
pdatx1 <- transform(pdatx1, yhat = predict(mod, pdatx1))
pdatx2 <- transform(pdatx2, yhat = predict(mod, pdatx2)) 
```

现在我们准备绘制部分图。首先计算`y`轴的范围 - 这里主要是多余的，但是如果您要添加置信区间，则需要在下面包含它们的值，

```
ylim <- range(pdatx1$y, pdatx2$y, dat$y) 
```

要绘图（这里将两个数字放在同一个绘图设备上），我们可以使用以下代码

```
layout(matrix(1:2, ncol = 2))
plot(y ~ x1, data = dat)
lines(yhat ~ x1, data = pdatx1, col = "red", lwd = 2)
plot(y ~ x2, data = dat)
lines(yhat ~ x2, data = pdatx2, col = "red", lwd = 2)
layout(1) 
```

哪个生产

![在此处输入图像描述](https://i.stack.imgur.com/dZajR.png)

# android - 建筑室内地图 - Android

> ID：15988722
> 
> 赞同：3
> 
> 时间：2013-04-13T14:11:47.467
> 
> 标签：android, map, bluetooth, indoor-positioning-system

我正在尝试创建一个应用程序，该应用程序将告诉人们他们所在的建筑物的哪个区域。我正在使用蓝牙加密狗来获取大致位置，而不是确切位置，并在地图上向用户显示他们所在的位置. 我希望它只是突出他们所在的区域，而不是特定的位置。

我可以得到我正在使用的建筑物的平面图，所以我只是想知道是否有一种简单的方法可以将其合并到具有现有 API 的某种地图中？我在[这里](https://stackoverflow.com/questions/3204796/indoor-custom-maps-application)发现了一个问题，指出他们只是在图像上使用叠加层来显示人在哪里的标记。这会容易一些吗？

这是我最后一年的项目，所以如果可能的话，我想有一些华丽的地图，但我不确定从哪里开始寻找或者是否可能。

我还发现[了这个](https://stackoverflow.com/questions/9717111/indoor-map-for-a-private-building)问题，它提供了多种实现和室内地图的应用程序，但我认为我不能只从它们中提取我需要的一小部分功能，因为它们似乎是完整的应用程序。

任何信息都会有很大帮助。任何有这种事情经验的人请分享你的知识:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:56:14.233

仅仅为此编写自己的自定义视图听起来并不复杂。将地图图像绘制到画布上。然后对于用户所在的区域，在您刚刚绘制的地图上绘制另一个“突出显示”图形。

如果您不确定如何执行此操作，有一个关于如何[创建自己的可绘制小部件](http://developer.android.com/guide/topics/graphics/2d-graphics.html#shape-drawable)的相当基本的指南，它应该为您指明正确的方向。有很多关于在画布上绘制图像的例子，例如[这个](https://stackoverflow.com/questions/5176441/drawable-image-on-a-canvas)。

# javascript - 在 Chrome 扩展程序背景页面中获取文本选择

> ID：15988728
> 
> 赞同：0
> 
> 时间：2013-04-13T14:12:20.470
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

我正在开发一个 chrome 扩展，我希望它能够按用户获取选定的文本，当我在类似的非扩展页面上运行它时代码工作正常，但它在我的后台页面扩展中不起作用。即使我尝试在 console.log 中获取选择的值，它也不会返回任何内容。这是我的 javascipt 文件：

```
window.onload = myOnload;
function myOnload(){
  var button = document.getElementById("button");
  chrome.contextMenus.create({
    "title":"MissLang Fix",
    "contexts":["all"],
    "onclick": myClick2 
  });

  document.getElementById("input").innerHTML = "mojtaba";
  button.onclick= function(){myClick()};
}

function myClick2(){
  var txt = '';
  if (chrome.extension.getBackgroundPage().window.getSelection)
    txt = chrome.extension.getBackgroundPage().window.getSelection();
  else if (chrome.extension.getBackgroundPage().document.getSelection)
    txt = chrome.extension.getBackgroundPage().document.getSelection();
  else if (chrome.extension.getBackgroundPage().document.selection)
    txt = chrome.extension.getBackgroundPage().document.selection.createRange().text;
  console.log("this is the console message");
  console.log("txt: " + txt);
}    
function myClick(){
  var myString = document.getElementById("input").value;
  for(var i=0;i<myString.length;i++){
    myString = myString.replace("q","ض");
    myString = myString.replace("w","ص");
  }
  document.getElementById("output").innerHTML = myString;
} 
```

这是我的 manifest.json 文件：

```
{
    "name": "MissLang Fix extension",
    "manifest_version": 2,
    "version": "1.0",
    "description": "fixing english to farsi typings.",
    "icons":{
        "16":"icon_16.png",
        "128":"icon_128.png"
    },

    "background":{
        "scripts":["script.js"]
    },

    "browser_action":   {
        "default_icon": "icon.png",
        "default_popup": "missLangFix.html"
    },

    "permissions": [
        "tabs",
        "contextMenus"
    ]

} 
```

# sencha-touch - getCount of store 返回之前的计数

> ID：15988731
> 
> 赞同：0
> 
> 时间：2013-04-13T14:12:44.613
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

我有一个应用程序，允许用户输入搜索条件，结果从商店填充到表格中。如果表中未显示任何结果，我将尝试显示一条消息。我通过点击如下按钮将商店加载到我的控制器中：

```
 Ext.StoreMgr.get('Places').getProxy().setUrl('');
    Ext.StoreMgr.get('Places').load();    

    var count = Ext.StoreMgr.get('Places').getCount();
    console.log(count); 
```

使用 var count 我试图获取商店位置的计数，但我似乎第一次得到的只是 0，然后是从那里开始的上一次搜索的计数。有人对我如何排序有任何指导吗？我尝试[了这个](https://stackoverflow.com/questions/15266605/ext-data-store-gettotalcount-doesnt-calculate-after-load)解决方案，但无法让它工作

更新：

安慰：

```
 museum|art_gallery| History.js:96
 10000 History.js:97
 20 History.js:116
 Results History.js:119
 museum|art_gallery| History.js:96
 10000 History.js:97
 20 History.js:116
 Results History.js:119
 20 History.js:116
 Results History.js:119
 museum|art_gallery| History.js:96
 10000 History.js:97
 20 History.js:116
 Results History.js:119
 20 History.js:116
 Results History.js:119
 20 History.js:116
 Results History.js:119 
```

实现的代码：

```
var store = Ext.StoreMgr.get('Places');
store.getProxy().setUrl('');
 store.on('load', function () {
var count = store.getCount();
console.log(count);

if (count>=1) {
console.log("Results");
 } else  if(count<=0) {
console.log("No Results");
}
});
store.load(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:58:08.127

也许您的商店在执行时尚未加载`getCount();`

试着做

```
var store = Ext.StoreMgr.get('Places');

store.getProxy().setUrl('');
store.on('load', function () {
  var count = store.getCount();
  console.log(count);
});
store.load(); 
```

希望这可以帮助

# c++ - 带有 Thrift 和 Qt 的简单服务器

> ID：15988733
> 
> 赞同：1
> 
> 时间：2013-04-13T14:12:54.643
> 
> 标签：c++, qt, ipc, thrift

我目前的任务是基于 Qt 库创建带有 Thrift IPC 接口的简单服务器。我已经下载了 thrift、编译、创建了 interface.thrift 文件并生成了存根（ --gen cpp ）。此外，我已经成功编译了简单的示例，但所有这些东西都没有 Qt。现在，我需要将 thrift 与 Qt 集成，但 TQTcpServer 需要 Async 处理器！在存根中我没有找到任何异步处理器（只有 TDispatchProcessor）。

如何将处理器传递给 TQTcpServer ？小例子将是最好的。

```
TQTcpServer(boost::shared_ptr<QTcpServer> server,
          boost::shared_ptr<TAsyncProcessor> processor,
          boost::shared_ptr<apache::thrift::protocol::TProtocolFactory> protocolFactory,
          QT_PREPEND_NAMESPACE(QObject)* parent = NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:36:58.027

我找到了解决方案，可能对其他有用

要在 Qt 中使用 Thrift，您需要创建具有异步支持的 STUB

```
thrift --gen cpp:cob_style ./your_name.thrift 
```

将类 your_nameAsyncHandler、your_nameHandler 从生成的 STAB 复制到您的项目

```
boost::shared_ptr<QTcpServer> tcp_server_( new QTcpServer() )
if( !tcp_server_->isListening() && !tcp_server_->listen(QHostAddress::Any, 9090) )
{
    // throw exception
    return;
}

shared_ptr<your_nameAsyncHandler> handler(new your_nameAsyncHandler());
shared_ptr<TAsyncProcessor> processor(new your_nameAsyncProcessor(handler));
shared_ptr<TProtocolFactory> protocolFactory(new TBinaryProtocolFactory());

boost::shared_ptr<apache::thrift::async::TQTcpServer> thrift_server_( new apache::thrift::async::TQTcpServer( tcp_server_, processor, protocolFactory) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T08:41:38.230

这是我的主要外观，它非常简单，这一切都在本地主机上运行。

```
 int main(int argc, char *argv[]) {
    QCoreApplication a(argc, argv);

    boost::shared_ptr<QTcpServer> tcp_server_( new QTcpServer() );
    boost::shared_ptr<UserStorageAsyncHandler> handler(new UserStorageAsyncHandler());
    boost::shared_ptr<TAsyncProcessor> processor(new UserStorageAsyncProcessor(handler));
    boost::shared_ptr<TProtocolFactory> protocolFactory(new TBinaryProtocolFactory());

    boost::shared_ptr<apache::thrift::async::TQTcpServer> thrift_server_(
                new apache::thrift::async::TQTcpServer( tcp_server_, processor, protocolFactory) );

    if (!tcp_server_->listen(QHostAddress::Any, 27015)) {
        std::cout << "TCP Server not listening" << std::endl;
        return 1;
    }
    return a.exec();
} 
```

# c# - 无效的 TextBox 值由 ComboBox 的 DataBinding 重置

> ID：15988734
> 
> 赞同：1
> 
> 时间：2013-04-13T14:13:25.517
> 
> 标签：c#, validation, data-binding

**情况：**带有 TextBox 和 ComboBox 的 AC# Windows 窗体应用程序。AutoValidate 设置为 EnableAllowFocusChange。

TextBox 表示并显示为百分比值，例如“10 %”，它存储为 int。两个输入控件都是数据绑定的，TextBox 具有解析和格式化的 ConvertEventHandler 以及 Validating CancelEventHandler。

当输入像“abc”这样的无效输入并离开控件时：执行我的验证但失败（例如取消 = true，ErrorProvider ..）。我的解析失败（e.Value 保持“abc”）。

**问题：**当我现在更改 ComboBox 的值并将其保留（失去焦点/执行验证）或执行 ValidateChildren 时，我的格式函数会使用最后一个有效百分比值调用，并且错误的输入会丢失。

**Stacktrace：**问题是由 ComboBox 的 ReportPropertyChanged 触发的，并导致 Binding.PushData、FormatObject 和 OnFormat -> 使用原始值调用我的格式函数。

我希望我的 TextBox 保持无效并且没有神奇的重置。我能做些什么来防止值重置？或者我做错了什么？

谢谢！

# jquery-mobile - 面板不会打开，pageinit 不会触发

> ID：15988736
> 
> 赞同：0
> 
> 时间：2013-04-13T14:13:46.073
> 
> 标签：jquery-mobile

我正在尝试通过代码打开一个 jquery 移动面板，但该方法无法识别。

我得到的错误是：“对象[对象对象}没有方法'面板'”

我有一个 html 页面，由几个 jquery-mobile div 页面和一个外部 javascript 文件组成。

**这是js函数：**

```
function open_panel() {

    var selected_child=$('#kids_select').val();
    alert(selected_child);

    $("#mypanel").panel("open");
      //    $("#mypanel").panel().panel("open");

}

$('#mypanel').live('pageinit', function () {
    alert("works");
}); 
```

我是另一个学生开始的项目，他在 html head 部分包含了重复的 js 文件。我猜这是因为旧的 jquery mobile 加载了 1.3，但是当我尝试删除一些引用时，设计变得混乱或无法识别其他一些代码。

**这是头部：**

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />
    <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title></title>
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="my.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
    </script>

    <script src="js/js_functions.js" type="text/javascript"></script> 
```

最后，我在指向面板的“a”标签中添加了一个 href 属性，并在函数启动后加载它，但面板的 pageinit 函数不会启动。

**我试过了：**

```
$('#mypanel').live('pageinit', function () {
    alert("works");
}); 
```

**和：**

```
 $('#mypanel').live('pageshow', function () {
        alert("works");
    }); 
```

但这不起作用

**这是 html 正文的相关部分：（与面板）**

```
 <div data-role="page" id="mainpage">

            <div data-theme="b" data-role="header">
                <h3>
                    Iallow
                </h3>
            </div>

            <div data-role="content" style="text-align: center;">
                <div>

                    <div style="width: 50%; float: left">
                        <label for="NewkidBTN">
                            Click to add new kid</label>
                        <a id="NewkidBTN" data-role="button" data-theme="b" href="#RegisterChild" data-icon="plus"
                            data-iconpos="right">Add Kid</a>
                    </div>

                    <div id="kids_div">

                    </div>
                </div>
                <a onclick="open_panel()" href="#mypanel" data-role="button" data-inline="true" data-icon="bars">Add transaction</a>

            </div>

            <div data-role="panel" id="mypanel">
                    <h3>enter action</h3>
                    <select name="select-type" id="select-type" onclick="return select-type_onclick()">
                        <option value="deposit">deposit</option>
                        <option value="withdrawal">withdrawal</option>
                    </select>
                    <label for="ammount">Write the ammount</label>
                    <input type="number" data-clear-btn="false" name="ammount" id="ammount" value="">
                    <label for="desc" class="ui-hidden-accessible">
                        description:</label>
                    <input type="text" name="desc" id="descTB" value="" placeholder="description" runat="server" />
                    <button id="Button1" type="submit" data-theme="b" data-icon="check" runat="server" onclick="transaction">
                        submit</button>
                </div> 
```

**编辑：**

我通过删除旧的 jquery mobile 和 jquery 更改了 head 部分。现在面板加载，但我添加到面板的 pageinit 函数不会启动。我尝试了每种语法，例如：

```
$('#mypanel').live('pageshow', function () {
    alert("works");
});

$('#mypanel').live('pageinit', function () {
    alert("works");

$('#mypanel').on('pageshow', function () {
    alert("works");
});

$('#mypanel').on('pageinit', function () {
    alert("works");
}); 
```

也许面板不像 jquery mobile 中的页面那样工作..

头部现在看起来像这样：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <!--<link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />-->
    <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" />
    <!--<script type="text/javascript" src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>-->
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title></title>
    <!--<link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />-->

    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>-->
    <!--<script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
    </script>-->

    <script src="js/js_functions.js" type="text/javascript"></script> 
```

# magento - PayPal 在 PayPal 方面向 Magento 购物车添加额外的税收

> ID：15988740
> 
> 赞同：0
> 
> 时间：2013-04-13T14:14:19.847
> 
> 标签：magento, paypal

我遇到了 Magento 的问题。

在为客户实时启动网站后，11 天一切正常。昨天，一位客户告诉我们，他们的付款已被标记为涉嫌欺诈。我们去检查，发现 Magento 网站和 PayPal 上的金额不同。在检查了原因后，我们看到 PayPal 正在对从 Magento 转移的金额添加另一项税款，尽管 Magento 已经包含了所有金额。

这是我更改为 PayPal 快速结帐时遇到的错误。

PayPal 网关已拒绝请求。购物车项目总金额与订单金额不匹配（#10413：由于参数无效，交易被拒绝。有关详细信息，请参阅其他错误消息）。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:19:17.157

我找到了解决方案。不确定这是最好的方法。但是，它有效。

澄清一下，我想在 Magento 中使用 PayPal 网络标准。

\app\code\core\Mage\Paypal\Model\Api\Standard.php

我注释掉了以下内容。

```
49 //  'tax'           => 'tax_amount',

65 //'tax'      => '_filterAmount',

93 //Mage_Paypal_Model_Cart::TOTAL_TAX      => 'tax', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:44:09.350

Suggested you log what was posted to Paypal against what went into paypal order related DB.

Use similar details to what was there for that specific case.

Probably some code of yours( additional module ) added tax in paypal form that was posted where this addiitonal amount didnt update order total so order details were intact.

# c# - 使用自定义符号

> ID：15988743
> 
> 赞同：1
> 
> 时间：2013-04-13T14:14:31.943
> 
> 标签：c#, output, windows-applications

如何`TextBox`在 C# Windows 窗体应用程序中使用的字符串中使用自定义符号？

我需要使用积分、分数和指数等符号创建数学输出。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:35:43.290

选择`Programs`> `Accessories`> `System Tools`> `Character Map`。选择字体“Arial Unicode MS”。按 分组`Unicode Subrange`。这将打开一个“分组依据”窗口。选择`Mathematical Operators`。

![在此处输入图像描述](https://i.stack.imgur.com/ky69B.png)

![在此处输入图像描述](https://i.stack.imgur.com/fRpne.png)

当然，您可以使用包含这些特殊数学运算符的任何字体。

* * *

**更新**

如果您仍需要创建自己的符号，可以使用字体编辑器来完成。但是创建或更改字体并不是那么容易。一个好的编辑器是[FontForge](http://sourceforge.net/projects/fontforge/files/)（开源）。

# java - 按使用 case when 计算的临时列排序

> ID：15988744
> 
> 赞同：1
> 
> 时间：2013-04-13T14:14:32.070
> 
> 标签：java, hibernate, jpa, criteria, criteria-api

我有 2 个实体 Book 和 BookProperty 处于一对多关系中。我需要检索按 upload_date 排序的书籍，英语书籍首先使用 JPA 标准和分页和东西（JPQL/native sql 不是一个选项）。

这是此操作的本机查询的样子（postgres）：

```
select distinct 
    b.book_id, 
    b.name, b.author, ... , 
    b.upload_date, 
    case when p.property_name='language' and lower(p.property_value)='english' 
         then 0 else 1 end as book_language, 
from books b 
left outer join book_properties p 
on b.book_id=p.book_id 
order by book_language asc, b.upload_date desc; 
```

问题是我无法通过标准 API 选择“案例”部分并按其排序。我知道可以通过多选和元组实现，但我想避免这种情况，因为我真的不需要应用程序中的这一列。我只想检索已排序的 Book 对象，而不是（Book，Integer）的元组。

我试图将 case 部分移入 order by 并设法通过 JPA Criteria 计算查询，但在这种情况下 setDistinct(true) 会导致错误，因为 order by 中的所有列都必须是 distinct 的一部分。因此，将机箱部件移至订单看起来不是一种选择。

请帮助我使用 JPA Criteria 实现此查询，最好不使用元组或包装器对象，但如果没有其他选项也可以。

# javascript - 如何让盒子粘在顶部？

> ID：15988745
> 
> 赞同：0
> 
> 时间：2013-04-13T14:14:44.810
> 
> 标签：javascript, html, css

我想在我的网站上做以下布局：

* * *

## 带A

* * *

## 带 B

* * *

## 条 C

向下滚动时，stripA 和 stripB 将不再可见。但是，stripC 将粘在浏览窗口的顶部并且始终可见。

以防用户再次上卷。然后会看到最初的stripA、stripB和stripC。

1）这个功能怎么称呼？2）如何实现？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:19:17.880

利用

```
position: fixed; 
```

在你的地带 C

# ruby-on-rails - 如何在 Rails 4 中进行路由约束

> ID：15988746
> 
> 赞同：1
> 
> 时间：2013-04-13T14:15:00.143
> 
> 标签：ruby-on-rails, routing, subdomain, ruby-on-rails-4

这不起作用：

```
get '/' => 'addresses#show', :constraints => Subdomain 
```

库/子域.rb：

```
class Subdomain  
  def self.matches?(request)  
    request.subdomain.present? && request.subdomain != 'www'  
  end  
end 
```

这条路线被忽略了......

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:17:42.293

**Solution:**

the specified route has to go before

```
root to: 'home#index' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T09:01:49.413

这工作得很好，只有你需要在你的路由中手动添加 subdomain.rb

```
get '/' => 'addresses#show', :constraints => Subdomain 
```

库/子域.rb：

```
class Subdomain  
  def self.matches?(request)  
    request.subdomain.present? && request.subdomain != 'www'  
  end  
end 
```

添加routes.rb

```
 require 'subdomain' 
```

是的，指定的路线必须先走

```
root to: 'home#index' 
```

# jquery - 如何在 jquerymobile 的 div data-role="button" 中垂直居中文本

> ID：15988753
> 
> 赞同：0
> 
> 时间：2013-04-13T14:15:41.823
> 
> 标签：jquery, css, jquery-mobile

我在 JqueryMobile 中有一个带有图像的 div data-role="button"。使用图像时，文本会出现在顶部，我无法找到将其垂直居中的方法。

这是我的代码：

[http://jsfiddle.net/2srMp/1/](http://jsfiddle.net/2srMp/1/)

```
<div data-role="button" onclick="someFunction()">
    <img align="left" width="35px" src="http://www.google.com/get/topcontributor/images/icons/icon-android.png"/>
    Button 1
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:22:23.813

```
.ui-btn-text{      
    line-height:43px;   
} 
```

[**演示**](http://jsfiddle.net/mohammadAdil/2srMp/2/show/)

# java - 无法完成饼图的圆圈

> ID：15988754
> 
> 赞同：5
> 
> 时间：2013-04-13T14:15:44.233
> 
> 标签：java, swing, graphics2d, pie-chart

我正在制作一个包含 4 个不同元素的饼图。我可以让元素出现在 JFrame 中，但我无法完成饼图圆圈。这些是元素：

```
public static class PieChart extends JComponent { 

        IAPieChart[] pieValue = {new IAPieChart(5, Color.green),
                                new IAPieChart(4, Color.orange),
                                new IAPieChart(3, Color.blue),
                                new IAPieChart(2, Color.red)

        }; 
```

现在元素已实例化并加载到数组中，我使用此方法绘制它们：

```
public void paintComponent(Graphics g) {

            drawPie((Graphics2D) g, getBounds(),  pieValue);

        } 
```

这种方法将元素放在 JFrame 上，但只给了我大约 120 度的圆。：

```
void drawPie(Graphics2D g, Rectangle area, IAPieChart[] pieValue){

            double sum = 0.0;
            for (int i = 0; i < pieValue.length; i++) {

                sum += pieValue[i].arcValue;
            }

            double endPoint =  0.0D;
            int arcStart = 0; 
            for (int i = 0; i < pieValue.length; i++){

                endPoint = (int) (endPoint * 360 / sum);
                int radius = (int) (pieValue[i].arcValue * 360/ sum);
                g.setColor(pieValue[i].color);
                g.fillArc(area.x, area.y, area.width, area.height, arcStart , radius);
                radius += pieValue[i].arcValue;
            }

        }
    } 
```

我不知所措。我有大约 10 周的 Java 经验，所以这主要是反复试验。我正在寻找一种方法来完成这个圈子。我将值降低到可以显示所有颜色的最低点。任何更大的东西都会消除一种颜色或另一种颜色。

我希望你能帮忙。这是完整的程序 IAPieChart：

```
package iapiechart;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import javax.swing.JComponent;
import javax.swing.JFrame;

class IAPieChart{

    double arcValue;        // passes a value for the calculation of the arc.
    Color color;            // holds value for color (expressed as an integer 

    public IAPieChart(double value, Color color){

        this.arcValue = value;
        this.color = color;
    }

    public static class PieChart extends JComponent { 

        IAPieChart[] pieValue = {new IAPieChart(5, Color.green),
                                new IAPieChart(4, Color.orange),
                                new IAPieChart(3, Color.blue),
                                new IAPieChart(2, Color.red)

        };

        public void paintComponent(Graphics g) {

            drawPie((Graphics2D) g, getBounds(),  pieValue);

        }

        void drawPie(Graphics2D g, Rectangle area, IAPieChart[] pieValue){

            double sum = 0.0;
            for (int i = 0; i < pieValue.length; i++) {

                sum += pieValue[i].arcValue;
            }

            double endPoint =  0.0D;
            int arcStart = 0; 
            for (int i = 0; i < pieValue.length; i++){

                endPoint = (int) (endPoint * 360 / sum);
                int radius = (int) (pieValue[i].arcValue * 360/ sum);
                g.setColor(pieValue[i].color);
                g.fillArc(area.x, area.y, area.width, area.height, arcStart , radius);
                radius += pieValue[i].arcValue;
            }

        }
    }
     public static void main(String[] args) {

        JFrame frame = new JFrame();

        frame.getContentPane().add(new PieChart());
        frame.setSize(300, 300);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:37:02.930

如果您只想显示饼图`arc value`段的权重，请更改绘制周期。

```
int arcStart = 0; 
for (int i = 0; i < pieValue.length; i++){
    int radius = (int) (pieValue[i].arcValue * 360.0 / sum);
    g.setColor(pieValue[i].color);
    g.fillArc(area.x, area.y, area.width, area.height, arcStart, radius);
    arcStart += radius;
} 
```

结果是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/hjNo7.png)

如您所见，有一个小的空白区域，我想这是由累积的舍入误差引起的。可以通过使用 arcValue 绘制最后一段来解决，该弧值将所有 previos 的总和补充为 360。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T14:52:44.510

`arcStart`原始方法中的计算有点混乱。它应该从前一个弧的末端开始。考虑这个稍微修改的方法。注释描述了更新的行。

```
void drawPie(Graphics2D g, Rectangle area, IAPieChart[] pieValue){

    double sum = 0.0;
    for (int i = 0; i < pieValue.length; i++) {

        sum += pieValue[i].arcValue;
    }

    double endPoint =  0.0D;
    int arcStart = 0;

    for (int i = 0; i < pieValue.length; i++){
        arcStart = (int) (endPoint * 360 / sum); //old line was: endPoint = (int) (endPoint * 360 / sum);
        int radius = (int) (pieValue[i].arcValue * 360/ sum);
        g.setColor(pieValue[i].color);
        g.fillArc(area.x, area.y, area.width, area.height, arcStart , radius);
        endPoint += pieValue[i].arcValue;  //old line was: radius += pieValue[i].arcValue;
    }
} 
```

它取代了行：

```
endPoint = (int) (endPoint * 360 / sum); 
```

和：

```
arcStart = (int) (endPoint * 360 / sum); 
```

并替换行：

```
radius += pieValue[i].arcValue; 
```

和：

```
endPoint += pieValue[i].arcValue; 
```

结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/yozVC.png)

别忘了打电话`super.paintComponent(g);`。`paintComponent()`此外，您可能需要添加抗锯齿渲染提示以使图像平滑一点，即：

```
 public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        drawPie((Graphics2D) g, getBounds(),  pieValue);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T15:26:38.453

我了解到我从 phcoding 和 mishadoff 的回复中累积了错误的值。然而，根据 phcoding 的建议，我想出了 pieValue 数组的附加实例。两种回答都丰富了我的经验，通过您的回答增加了我的经验。

mishadoff：我可以像您在回复中提到的那样定义“权重”吗？当我想到权重时，我想象弧线开始的锚点，然后给出的值是它沿着圆的半径行进时会增加多少。这么近吗？

phcoding & mishadoff : 我打算把它放到一个 Applet 中，你认为这样做有什么问题吗，比如将这个代码转移到 Applet 中？我之所以这么问，是因为你给我的任何建议都会占用我几个小时的编程时间，而我将需要它们。

非常感谢你们！

埃德。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T14:36:55.740

你有

```
 double endPoint =  0.0D;
            int arcStart = 0; 
            for (int i = 0; i < pieValue.length; i++){

            endPoint = (int) (endPoint * 360 / sum);
            ... 
```

但是，这将始终给出 endPoint = 0，因为您每次都乘以零。尝试制作

```
 endPoint += (int) (endPoint * 360 / sum); 
```

# mysql - Sql select where子句问题

> ID：15988755
> 
> 赞同：1
> 
> 时间：2013-04-13T14:15:44.750
> 
> 标签：mysql, sql, select, where

希望有人可以帮助这正在推动我。

谁能告诉我这个选择有什么问题，它目前可以正确搜索，但它会检查“画廊”中的每个结果，而不仅仅是“类别：夏季”和“状态：使用”中的结果。

所以我想要它做的是搜索关键字（$find），只有当它们属于“夏季”类别和“使用”状态时。任何想法我需要做什么。大声笑在这一点上会采取任何措施。强调:)

```
$result = mysql_query("
  SELECT
     Gallery_URL,
     Thumbnail_URL,
     Nickname,
     Description 
  FROM Galleries
  WHERE 
    Category = 'summer' 
    AND Status = 'Used'
    AND Nickname LIKE '%$find1%'
    OR Nickname LIKE '%$find2%'
    OR Nickname LIKE '%$find3%'
    OR Description LIKE '%$find1%'
    OR Description LIKE '%  $find2%'
    OR Description LIKE '%$find3%'
  LIMIT 0 , 10"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:20:40.827

像这样添加括号：

```
SELECT Gallery_URL, Thumbnail_URL, Nickname, Description 
FROM Galleries  
WHERE 
   Category = 'summer' 
   AND Status = 'Used' 
   AND (Nickname LIKE '%$find1%' 
   OR Nickname LIKE '%$find2%' 
   OR Nickname LIKE '%$find3%' 
   OR Description LIKE '%$find1%' 
   OR Description LIKE '%  $find2%' 
   OR Description LIKE '%$find3%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:21:05.130

您正在使`AND`and`OR`运算符短路。尝试`OR`通过将它们放在一个组中来隔离它们，

```
SELECT  Gallery_URL, 
        Thumbnail_URL, 
        Nickname,
        Description 
FROM    Galleries 
WHERE   Category = 'summer' AND 
        Status = 'Used' AND 
        (
            Nickname LIKE '%$find1%' OR 
            Nickname LIKE '%$find2%' OR 
            Nickname LIKE '%$find3%' OR 
            Description LIKE '%$find1%' OR 
            Description LIKE '% $find2%' OR 
            Description LIKE '%$find3%' 
        )
LIMIT   0 , 10 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T14:23:11.480

尝试对 where 子句中的表达式进行分组。例如

```
$result = mysql_query("SELECT Gallery_URL, Thumbnail_URL
, Nickname, Description 
FROM Galleries 
WHERE Category = 'summer' 
AND Status = 'Used' 
AND (Nickname LIKE '%$find1%' 
OR Nickname LIKE '%$find2%' 
OR Nickname LIKE '%$find3%' 
OR Description LIKE '%$find1%' 
OR Description LIKE '% $find2%' 
OR Description LIKE '%$find3%') 
LIMIT 0 , 10"); 
```

# java - 使用 ResponseEntity Spring MVC

> ID：15988760
> 
> 赞同：2
> 
> 时间：2013-04-13T14:16:41.640
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我想使用 ResponseEntity 而不返回正文，只设置状态代码和标题。ResponseEntity 是一个泛型类，在这种情况下我是否需要指定类型，如果，应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T14:24:17.960

不，你不，只是做这样的事情

```
ResponseEntity responseEntity  = new ResponseEntity(HttpStatus.BAD_REQUEST); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T23:28:08.463

您可以使用`return ResponseEntity<Void>`

# javascript - 将数据从一个控制器操作传递到 mvc 中的另一个视图

> ID：15988770
> 
> 赞同：0
> 
> 时间：2013-04-13T14:17:30.137
> 
> 标签：javascript, asp.net-mvc-4

我需要将一个控制器操作中的变量传递给另一个视图中的 javascript..

在控制器动作 A 中：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Create(FormCollection args)
    {
        var obj = new ProjectManagernew();

        var res = new ProjectViewModelNew();
        try
        {
            UpdateModel(res);
            if (obj.AddUpdateOrderField(res))
            {
                ViewBag.RecordAdded = true;
                ViewBag.Message = "Project Added Successfully";
                TempData["Name"] = "Monjurul Habib";
            }
            return View(res);
        }
        catch (Exception)
        {
            //ModelState.AddRuleViolations(res.GetRuleViolations());
            return View(res);
        }
    } 
```

在另一个 javascript 中：

```
function gridA() {
   var message = '@TempData["Name"]';
   $('#mylabel').text(message);
} 
```

只有 Tempdata 有效但不是第一次从我调用动作控制器后的第二次开始

1.  我想临时数据第一次工作
2.  我想在使用后清除数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:53:45.423

如果您的 javascript 位于采用 ProjectViewModelNew 的同一视图中，您可以为您的视图使用不同的类型，例如您可以使用组合：

```
public class MyCompositeClass
{
  ProjectViewModelNew ProjectViewModel{get;set;};
  string Name{get;set;}
} 
```

然后您的操作方法将是：

```
 [AcceptVerbs(HttpVerbs.Post)]
public ActionResult Create(FormCollection args)
{
    var obj = new ProjectManagernew();

    var res = new ProjectViewModelNew();

    var myView = new MyCompositeClass();
    try
    {
        UpdateModel(res);
        myView.ProjecViewModel = res;
        if (obj.AddUpdateOrderField(res))
        {
            ViewBag.RecordAdded = true;
            ViewBag.Message = "Project Added Successfully";
            myView.Name= "Monjurul Habib";
        }
        return View(myView);
    }
    catch (Exception)
    {
        //ModelState.AddRuleViolations(res.GetRuleViolations());
        return View(myView);
    }
} 
```

你的 js 将是：

```
function gridA() {
   var message = '@Model.Name';
   $('#mylabel').text(message);
} 
```

# ios - 以编程方式创建的 UIButtonBarItem 没有拾取 UIAppearance

> ID：15988772
> 
> 赞同：0
> 
> 时间：2013-04-13T14:18:02.420
> 
> 标签：ios, uiappearance

我在我的 appdelegate 中添加了 UIAppearance 代码来自定义 UIButtonBarItem。导航控制器中的后退按钮获取 UI 外观。但是我以编程方式创建的 UIButtonBarItems 出现在第一个导航栏上并没有获得 uiappearance。UIAppearance 不应该适用于所有创建的 UIButtonBarItems 吗？如果我将 UIButtonBarItem 放入情节提要的导航栏中，也会发生同样的事情。导航栏拾取 UIAppearance 但 UIButtonBarItem 没有。

在应用程序中

```
-(void) configureAppearance
{
    // navbar background
    UIView* bk0 = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 480.0f, 44.0f)];
    UIView* bk1 = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 480.0f, 22.0f)];
    UIView* bk2 = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 22.0f, 480.0f, 22.0f)];
    [bk0 addSubview:bk1];
    [bk0 addSubview:bk2];
    bk1.backgroundColor=LIGHT_PURPLE;
    bk2.backgroundColor=DARK_PURPLE;
    UIImage* navimg=ChangeViewToImage(bk0);
    [[UINavigationBar appearance] setBackgroundImage:navimg forBarMetrics:UIBarMetricsDefault];

#define BUTTON_SIZE 34.0f
    UIView* bbk0 = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, BUTTON_SIZE, BUTTON_SIZE)];
    UIView* bbk1 = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, BUTTON_SIZE, BUTTON_SIZE)];
    bbk0.backgroundColor=[UIColor clearColor];
    bbk1.backgroundColor=DARK_PURPLE;

    [bbk0 addSubview:bbk1];
    addBorderAndShadow(bbk1, VERY_DARK_PURPLE, 1.0, 2.0);
    UIImage* bimg=ChangeViewToImage(bbk0);

    bimg = [bimg resizableImageWithCapInsets:UIEdgeInsetsMake(0.0f, BUTTON_SIZE, 0, 0)]; // this will keep it square

    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:bimg
                                                      forState:UIControlStateNormal
                                                    barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, bimg.size.height*2) forBarMetrics:UIBarMetricsDefault]; // to not show text on button but still get nav ani

    //[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setBackButtonBackgroundImage:bimg forState:UIControlStateNormal  barMetrics:UIBarMetricsDefault];

} 
```

在我的一个视图控制器中（没有 uiappearance

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

    //AppDelegate* appdel = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    //[appdel configureAppearance];

    UIBarButtonItem* backButton = [[UIBarButtonItem alloc] initWithTitle:@"" style:UIBarButtonItemStylePlain target:self
                                                                  action:@selector(revealMenu:)];
    self.navigationItem.leftBarButtonItem = backButton;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:07:13.760

试试这样：

[UIBarButtonItem apperanceWhenContainedIn: [UINavigationController class],nil] setBackgroundImage:bimg forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

# java - Libgdx: Infinity world. How to?

> ID：15988774
> 
> 赞同：0
> 
> 时间：2013-04-13T14:18:06.420
> 
> 标签：java, android, libgdx

I write simple game with libGdx. I have a hero, which always is in screen center and I must move my background sprite (or region?) to make move illusion. But my background sprite isn't infinity.

*   How can I create illusion of seamless infinity world?

Of course I can add several background sprites to try to cover all empty space of screen. But I must to draw out of the sceen a lot of all another objects: Houses, monsters, others heroes, etc. So I have a second question:

*   When I try to draw other object (a lot of objects!) out of the screen, how badly it affects memory? How to draw it correctly?

I know that OrthographicCamera in libgdx draw only viewportWidth-viewportHeight area. If it's right, then I must to move my camera and all my sprites too. I think it's not correctly.

*   How can I render infinity world in libgdx with OrthographicCamera?

![enter image description here](https://i.stack.imgur.com/vQoSb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:20:10.577

> 如何创造无缝无限世界的幻觉？

创建平铺背景。平铺背景意味着如果它在自身之外或顶部或底部，则观察者将看不到粘贴线的边缘。
为此，请在 Photoshop 中打开您的背景图像，然后转到“滤镜”>“其他”>“偏移”。设置偏移滤镜以将背景偏移到中心，然后尝试使用 Photoshop 工具隐藏边缘（图像中的 + 形状）。现在再次转到偏移并返回到 0、0 并保存背景。

> 当我尝试从屏幕上绘制其他对象（很多对象！）时，它对内存的影响有多严重？如何正确绘制？

我已经检查过了，在我的测试中并没有多少 fps 丢失。所以不用担心。

> 如何使用 OrthographicCamera 在 libgdx 中渲染无限世界？

将相机移动到任何你想要任何 x、y 的地方。每次查看相机在哪里并计算需要绘制的平铺背景（例如每次绘制 3x3=9 个粘在一起的背景）。

# c# - 如何从一个 xaml 文件访问 RichTextBox 到另一个 xaml 文件？

> ID：15988778
> 
> 赞同：0
> 
> 时间：2013-04-13T14:18:53.613
> 
> 标签：c#, wpf, parameters, richtextbox

我正在制作一个文本编辑器，并且我已经使用了`RichTextBox`. 工具栏在另一个`user control`. 当我使用像下标这样的编辑命令时，应该响应相同的命令，`RichTextBox`但我没有`richTextBox`在另一个中获得名称`user control`。虽然我已经尝试使用`get`and`set`并直接通过`obj`. 但我无法获得该字段的名称。

```
 <RichTextBox x:Name="body" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" AcceptsTab="True"
                         Grid.Row="1" ></RichTextBox> 
```

并且用户控件是

```
 <local:Hidden_bar Visibility="Visible" ComboBox.SelectionChanged="Toolbar_SelectionChanged" Grid.Row="2" VerticalAlignment="Bottom"
                          Grid.ColumnSpan="3" /> 
```

该类`Hidden_bar`需要`RichTextBox` 实例，以便可以对它们进行更改，但我无法在`local:Hidden_bar`类中获取该实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:09:13.723

您需要在您的`MainClass`：

```
static public RichTextBox rich; 
```

并将您分配`RichTextBox`给它，您的完整代码`MainClass`是：

```
public partial class MainClass : Form
    {
        public MainClass()
        {
            InitializeComponent();
            rich = this.richTextBox1;  //assign in the constructor
        }
        static public RichTextBox rich;
    } 
```

现在你可以打电话`MainClass.rich`和得到`text`，打电话`MainClass.rich.Text`。

# c# - N 层应用程序和 SQL Server Compact 4.0

> ID：15988780
> 
> 赞同：0
> 
> 时间：2013-04-13T14:19:01.317
> 
> 标签：c#, .net, sql-server-ce, connection-string, n-tier-architecture

我目前正在用 C# 开发一些应用程序，并且正在使用 n 层架构和嵌入式数据库 SQL Server Compact。SQL Server Compact 对我来说很新，我在连接到这个数据库的字符串方面遇到了一些问题。我的 n 层应用程序由`DataTier`, `MiddleTier`, `PresentationTier`. 每一层都是解决方案中的单独项目。

`DataTier`包含 db 文件`db.sdf`和 EF 5.0 的文件，包括实体。模型是使用数据库优先的方法创建的。

我知道我可以直接将这个嵌入式数据库构建到`dataTier.dll`其他层并从其他层引用它，但我不想让连接字符串成为绝对的，所以我目前以这种形式使用连接字符串：

```
Data Source = |DataDirectory|\db.sdf 
```

在每一层中，这是无稽之谈，因为它为每一层创建单独的数据库，但我不知道如何在`dataTier`. 这甚至可能吗？

你能指出我正确的方向或解决这个问题的最佳方法吗？

谢谢

# position - 如何确定精灵在 pygame 中的位置？

> ID：15988782
> 
> 赞同：0
> 
> 时间：2013-04-13T14:19:05.783
> 
> 标签：position, pygame, sprite

我是 pygame 的新手，正在制作一个僵尸跑步游戏。我正在用箭头键控制人类，我希望在第一次创建僵尸时让僵尸跑向玩家的位置。我不确定如何确定玩家位置以将僵尸设置在正确的方向。僵尸不必跟随人类，只需在僵尸创建时朝着玩家位置的方向前进。

```
class Human(pygame.sprite.Sprite):
 def __init__(self):
    pygame.sprite.Sprite.__init__(self)
    self.image=pygame.image.load("human.jpg")
    self.image=self.image.convert()
    self.rect=self.image.get_rect()
    self.x=100
    self.y=430
    self.dx=50
    self.dy=0
 def update(self):
    keys=pygame.key.get_pressed()
    if keys[pygame.K_LEFT]:
        self.x-=self.dx
    if keys[pygame.K_RIGHT]:
        self.x+=self.dx
    self.rect.center=(self.x,self.y)
class ZombieChase(pygame.sprite.Sprite):
 def __init__(self):
    pygame.sprite.Sprite.__init__(self)
    self.image=pygame.image.load("zombie.jpg")
    self.image=self.image.convert()
    self.rect=self.image.get_rect()
    self.reset()
    self.dx=15
    self.dy=15
    #self.xStart=random.randrange(0,screen.get_width())

 def update(self):
    self.rect.centery+=self.dy

    self.rect.centerx+=self.dx

    if self.rect.top>screen.get_height():
        self.reset()
    if self.rect.right>screen.get_width():
        self.reset()
    if self.rect.left<0:
        self.reset()

 def reset(self):
    self.rect.top=0
    speed=random.randrange(20,36)
    xStart=random.randrange(0,screen.get_width())
    yStart=0
    #humanx, humany  !!!!!!this is where i don't know what to put!!!!!
    try:
        self.dx=(humanx-xStart)/speed
    except ZeroDivisionError:
        self.dx=0
    try:
        self.dy=(humany-yStart)/speed
    except ZeroDivisionError:
        self.dy=1

    self.rect.centerx=xStart 
```

抱歉，如果标签不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T21:44:50.007

如果您`pygame.sprite.Sprite`对位置进行子类化，则为`zombie.rect`. 对于坐标，`zombie.rect.center`或`zombie.rect.topleft`

# jquery - 从 jQuery POST 请求中解析信息？

> ID：15988787
> 
> 赞同：-1
> 
> 时间：2013-04-13T14:19:25.607
> 
> 标签：jquery, ajax, api, post

我已经尝试了 2 周来从该站点的 API 获取和解析信息： [http](http://www.imei.info/api/imei/docs/) ://www.imei.info/api/imei/docs/ 我是 Web 开发新手（RT C++ 开发人员），我可以似乎得到的不是工作。

我的代码在这里：

```
<!DOCTYPE html>
<html>
<head>

    <script src="Scripts/jquery-1.4.1.js" type="text/javascript">
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("input").keyup(function () {
                txt = $("input").val();
                $.post("http://www.imei.info/api/checkimei/", { login: "XXX", password: "XXX", imei: "XXX" }, function (data) {
                    $("span").html(data);
                    $('#message').html(data);
                });
            });
        });
    </script>
</head>
<body>
    <p>Start typing a name in the input field below:</p>
    First name:

    <input type="text" />
    <div id="message"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:13:52.803

It's returning a JSON response. You can do var responseObj = JSON.parse(data) and access the fields like responseObj.imei or responseObj.brand

# wcf - 无论我做什么，WCF 服务只处理 10 个并发调用

> ID：15988795
> 
> 赞同：6
> 
> 时间：2013-04-13T14:20:25.500
> 
> 标签：wcf, concurrency

我意识到已经有很多与此相关的问题，但无论我尝试什么，我的问题似乎都有一些不同之处，这使得任何其他解决方案都无法修复它。

问题是：我有一个简单的 WCF 服务。似乎只允许10个并发调用，我需要支持的不止这些。这与我`maxConcurrentCalls`在配置中设置的内容无关。在这种情况下，为了简化问题，我什至没有真正的 .Net WCF 客户端调用它，我只是在几台机器上使用 fiddler 向服务发出一堆 HTTP 帖子。他们都单独工作，但我看到他们一次进来 10 个。随着#1 完成，#11 开始，依此类推。

对于这个例子，我的服务是一个简单的“睡眠 30 秒并返回一个字符串”。

下面是我的 web.config。你可以看到我已经把我的`maxConcurrentCalls`和我`maxConcurrentSessions`的提高到了比默认值更多的程度。这似乎根本没有影响，因为我一次仍然只能看到 10 个并发请求。

为了允许更多并发请求，我错过了哪一部分？

**编辑：这是托管在 IIS 7.5 中。**

网络配置：

```
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>

<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <security>
        <authentication>
            <anonymousAuthentication enabled="true" />
        </authentication>
    </security>
</system.webServer>
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
                <serviceThrottling 
                    maxConcurrentCalls="32" 
                    maxConcurrentInstances="2147483647" 
                    maxConcurrentSessions="20"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
</configuration> 
```

服务：

```
using System;
using System.ServiceModel;

namespace WCFTestService
{
    using System.Diagnostics;
    using System.Threading;

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Single)]
    public class TestService : ITestService
    {

        public string RequestIdentifier { get; set; }

        public int i;

        public string DoWork(string id)
        {
            var secondsBeforeResponding = 20;

            i++;

            this.RequestIdentifier = id;

            Debug.WriteLine("Request: " + id + " Instance:" + i.ToString() + " Thread:" + Thread.CurrentThread.ManagedThreadId.ToString() + " Time:" + DateTime.Now.ToString());

            Thread.Sleep(secondsBeforeResponding * 1000);

            Debug.WriteLine("                                                          Done with request: " + this.RequestIdentifier);

            return "Done with request: " + this.RequestIdentifier;
        }
    }
} 
```

测试服务：

```
[ServiceContract(SessionMode = SessionMode.NotAllowed)]
public interface ITestService
{
    [OperationContract]
    string DoWork(string requestIdentifier);
} 
```

输出：

```
Request: b3 Instance:1 Thread:54 Time:4/13/2013 1:50:31 PM <!--- this is the first 10, they all start at pretty much the same time
Request: b4 Instance:1 Thread:47 Time:4/13/2013 1:50:31 PM
Request: b1 Instance:1 Thread:48 Time:4/13/2013 1:50:31 PM
Request: b2 Instance:1 Thread:45 Time:4/13/2013 1:50:31 PM
Request: b5 Instance:1 Thread:44 Time:4/13/2013 1:50:31 PM
Request: b6 Instance:1 Thread:42 Time:4/13/2013 1:50:31 PM
Request: b7 Instance:1 Thread:41 Time:4/13/2013 1:50:32 PM
Request: b8 Instance:1 Thread:39 Time:4/13/2013 1:50:32 PM
Request: b9 Instance:1 Thread:40 Time:4/13/2013 1:50:33 PM
Request: b10 Instance:1 Thread:38 Time:4/13/2013 1:50:34 PM
                                                          Done with request: b3
                                                          Done with request: b4
                                                          Done with request: b1
                                                          Done with request: b2
Request: b11 Instance:1 Thread:35 Time:4/13/2013 1:50:51 PM  <--- this request only starts after the first one finishes
Request: b13 Instance:1 Thread:45 Time:4/13/2013 1:50:51 PM
Request: b14 Instance:1 Thread:54 Time:4/13/2013 1:50:51 PM
Request: b12 Instance:1 Thread:37 Time:4/13/2013 1:50:51 PM
                                                          Done with request: b5
Request: b15 Instance:1 Thread:44 Time:4/13/2013 1:50:51 PM
                                                          Done with request: b6
Request: b16 Instance:1 Thread:42 Time:4/13/2013 1:50:51 PM
                                                          Done with request: b7
Request: b17 Instance:1 Thread:41 Time:4/13/2013 1:50:52 PM
                                                          Done with request: b8
Request: b18 Instance:1 Thread:39 Time:4/13/2013 1:50:52 PM
                                                          Done with request: b9
Request: b19 Instance:1 Thread:40 Time:4/13/2013 1:50:53 PM
                                                          Done with request: b10
Request: b20 Instance:1 Thread:38 Time:4/13/2013 1:50:54 PM
...
...
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T15:39:14.573

您可能会遇到操作系统限制。尝试将您的服务部署到服务器并从那里重现行为。

# ios - Restkit 一对多映射

> ID：15988801
> 
> 赞同：1
> 
> 时间：2013-04-13T14:20:58.593
> 
> 标签：ios, core-data, restkit

我有这样的映射：

```
RKObjectMapping *pageMapping = [RKEntityMapping mappingForEntityForName:@"Page" inManagedObjectStore:[RKManagedObjectStore defaultStore]];
[pageMapping addAttributeMappingsFromArray:@[ @"rows, columns", @"header", @"size", @"backgroundColor" ]];

RKObjectMapping *objectMapping = [RKEntityMapping mappingForEntityForName:@"Object" inManagedObjectStore:[RKManagedObjectStore defaultStore]];
[objectMapping addAttributeMappingsFromArray:@[ @"content", @"crop", @"fontName", @"fontSize", @"height", @"width",
 @"paddingLeft", @"paddingTop", @"paddingRight", @"paddingBottom", @"src", @"textColor", @"type", @"url", @"posX", @"posY" ]];

[objectMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"objects" toKeyPath:@"objects" withMapping:pageMapping]];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:pageMapping pathPattern:nil keyPath:@"pages" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[[RKObjectManager sharedManager] addResponseDescriptor:responseDescriptor];

[[RKObjectManager sharedManager] getObjectsAtPath:[magazine contentPath]
                                       parameters:nil
                                          success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                                              [self sortPageResult];
                                              Page *page = (Page *)[self.pagesFetchedResultController objectAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
                                              NSLog(@"%d", [[page objects] count]);

                                              //[self changeStatusToDownloaded:[magazine magazineID]];
                                              [self.collectionView reloadData];
                                          } failure:^(RKObjectRequestOperation *operation, NSError *error) {
                                              [self displayError];
                                              NSLog(@"Product error: %@", [error localizedDescription]);
                                              [self.collectionView reloadData];
                                          }]; 
```

而且我的映射有问题。我清楚地映射“页面”对象，但我无法映射“对象”。当我尝试它时，我得到这样的东西：

```
Relationship 'objects' fault on managed object (0x1d8b57a0) <Page: 0x1d8b57a0> (entity: Page; id: 0x1d8b0740 <x-coredata://30A44191-D972-4222-88DF-539C2875F293/Page/p1> ; data: {
backgroundColor = FFFFFF;
columns = 0;
content = nil;
header = 1;
link = nil;
magazine = nil;
margin = 0;
objects = "<relationship fault: 0x1d8aea40 'objects'>";
pageID = nil;
rows = 0;
size = 1;
}) 
```

谢谢回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:58:57.093

新进展

我改变了：

```
[objectMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"objects" toKeyPath:@"objects" withMapping:pageMapping]]; 
```

反而：

```
[pageMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"items" toKeyPath:@"items" withMapping:itemMapping]]; 
```

现在映射正确，但映射会导致重复的“对象”实体。只有一个对象，一次又一次地重新制作：/

# javascript - 循环内的jQuery多个延迟动画，动画有时不执行

> ID：15988802
> 
> 赞同：1
> 
> 时间：2013-04-13T14:20:59.203
> 
> 标签：javascript, jquery, loops

我正在制作一个动画时间线（参见下面的 jsFiddle），其中的条目（左右交替）`fade in`在它们指定的`delay`. 这在`for`-loop 的帮助下。

如果支持不透明度，我将使用`.animate({ opacity: 1 })`. 否则`.fadeIn()`。

使用`.animate()`和`.fadeIn()`，有时会跳过一个或多个条目的动画。注意：发生这种情况的可能性似乎很小。

所以我的意图是检查`do-while`主循环内的`for`, 条目是否确实可见，如果不可见，则再次运行动画。

但是，这似乎会导致无限循环。是否有更好的方法来检查并重新设置动画？

`do-while`我已经在下面的 jsFiddle 中注释掉了该部分。

[jsFiddle](http://jsfiddle.net/jlmmns/B5yUC/1/embedded/result/)

提前致谢。

**更新[jsFiddle](http://jsfiddle.net/jlmmns/B5yUC/3/)**，感谢[sweetamylase](https://stackoverflow.com/questions/15988802/jquery-multiple-delayed-animations-inside-a-loop-animation-sometimes-not-execut/15990065?noredirect=1#15990065)。

**更新 2**：我注意到我的代码的另一部分，`.hover()`即条目上的一个事件，如果在加载时间线时我的光标位于条目上，它们就不会出现。这是由于`.stop(1, 1).animate()`在我的代码的那一部分中使用了。

```
$('.timeline .entry').hover(function() {
    $(this).stop(1, 1).animate({backgroundColor: '#f3f3f3'}, 350);

}, function() {
    $(this).stop(1, 1).animate({backgroundColor: '#f8f8f8'}, 350);
}); 
```

我怎样才能`.stop(1, 1)`在这部分中仍然使用，以便在快速悬停时不会建立那些悬停动画？

**更新 3**：我只使用 a now，仅在指定时间后`setTimeout()`允许事件。`.hover`

```
setTimeout(function() {
    $('.timeline .entry').hover(function() {
        $(this).stop(1, 1).animate({backgroundColor: '#f3f3f3'}, 350);
    }, function() {
        $(this).stop(1, 1).animate({backgroundColor: '#f8f8f8'}, 350);
    });
}, 6000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:26:01.127

问题可能是因为您让 jQuery 在循环的每次迭代中查找条目，**这需要时间**，这可能是它有时会跳过条目上的动画的原因：

```
$('.timeline .entry').eq(i).delay(delays[i]).animate({opacity: 1}, 'slow'); 
```

最好尽量减少*查询*量，因为这是一项昂贵的操作。因此，只需找到元素一次，然后使用您已有的索引遍历它们：

```
var delays = [600, 950, 1200, 1550, 1750, 2300, 2600, 3100, 3750, 4200];
var entries = $('.timeline .entry');

for (var i = 0, numEntries = delays.length; i < numEntries; i++) {
    if (opacitySupport) {
        $(entries[i]).delay(delays[i]).animate({opacity: 1}, 'slow');
    } else {
        $(entries[i]).delay(delays[i]).fadeIn('slow');
    }
} 
```

仅供参考，我使用`[]` *数组文字表示法*而不是调用数组*构造函数*，因为我发现它不太容易混淆：http: [//www.mattlunn.me.uk/blog/2012/04/the-use-of-literals-vs-构造函数/](http://www.mattlunn.me.uk/blog/2012/04/the-use-of-literals-vs-constructors/)

# c#-4.0 - 如何使用存储库在实体框架中包含对象？

> ID：15988816
> 
> 赞同：0
> 
> 时间：2013-04-13T14:22:51.927
> 
> 标签：c#-4.0, entity-framework-5, lazy-loading, repository-pattern

我使用以下功能从存储库中获取“粘贴”，但我无法访问在获取粘贴时应包含的对象。（粘贴.FilterGroup.Ads）。

我的存储库功能：

```
 public T Find<T>(Expression<Func<T, bool>> predicate) where T : class
    {
        return Context.Set<T>().FirstOrDefault<T>(predicate);
    } 
```

在我的代码中我试试这个。

```
 oPaste = _repository.Find<Paste>(x => x.PasteID == oPaste.PasteID);

            if (oPaste.FilterGroup != null)
            {
                _log.Debug("FilterGroup: " + oPaste.FilterGroup.Name);

                if (oPaste.FilterGroup.Ads != null && oPaste.FilterGroup.Ads.Count() > 0)
                {
                    _log.Debug("FINALLY");
                }
                else
                {
                    _log.Debug("Paste " + oPaste.PasteID + " has no ads");
                }
            }
            else
            {
                _log.Debug("Paste " + oPaste.PasteID + " has no filtergroup");
            } 
```

**编辑：** 粘贴类包含

```
public virtual FilterGroup FilterGroup { get; set; } 
```

FilterGroup 类包含

```
public virtual IEnumerable<Ad> Ads { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:05:59.443

你必须更换

```
public virtual IEnumerable<Ad> Ads { get; set; } 
```

经过

```
public virtual ICollection<Ad> Ads { get; set; } 
```

或其他一些实现`ICollection<T>`. `IEnumerable<T>`不会，EF 会忽略它作为导航属性。

只要您的上下文还活着，您的导航属性就应该通过延迟加载来加载。

您还可以在存储库中支持预先加载：

```
using System.Data.Entity; // required for the lambda version of Include

// ...

public T Find<T>(Expression<Func<T, bool>> predicate, 
    params Expression<Func<T, object>>[] includes) where T : class
{
    IQueryable<T> query = Context.Set<T>();

    if (includes != null)
        foreach (var include in includes)
            query = query.Include(include);

    return query.FirstOrDefault<T>(predicate);
} 
```

然后这样称呼它：

```
oPaste = _repository.Find<Paste>(x => x.PasteID == oPaste.PasteID,
    x => x.FilterGroup.Ads); 
```

# python - 艰难地学习python，练习25

> ID：15988817
> 
> 赞同：-5
> 
> 时间：2013-04-13T14:22:56.803
> 
> 标签：python, import

大家好，我是 python 语言的新手，我选择了以艰难的方式学习 python 来学习它并更好地理解......我对练习 25 感到困惑，当我们将代码直接导入终端时

```
>>> import ex25
>>> sentence = "All good things come to those who wait."
>>> words = ex25.break_words(sentence) 
```

然后我得到一个属性错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'break_words' 
```

我在 Windows 7 上使用 python 2.7 请帮助..... [http://learnpythonthehardway.org/book/ex25.html](http://learnpythonthehardway.org/book/ex25.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:31:59.330

在我看来，该练习并未指示学习者在导入之前保存文件。为了使其工作，您必须使用文本编辑器将定义 break_words 函数的代码保存在名为 ex25.py 的文件中。然后，从同一目录中通过键入以下命令打开 python 解释器：

```
python 
```

并且您应该能够导入 ex25 并运行 ex25.py 模块定义的 break_words 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T14:31:15.647

您链接中的代码`ex25.py`确实包含该功能-您的代码并不表明您在将代码转录到文件中时以某种方式错过了它。检查您是否`ex25.py`包含页面中的所有代码，特别是包含此功能（它是最上面的）：

```
def break_words(stuff):
    """This function will break up words for us."""
    words = stuff.split(' ')
    return words 
```

考虑将代码*粘贴*到编辑器中而不是转录它，以避免出现此类错误。

# c++ - 编辑日期时显示日历

> ID：15988822
> 
> 赞同：1
> 
> 时间：2013-04-13T14:23:30.340
> 
> 标签：c++, qt, mingw

我正在编写一个带有表格视图的简单 Qt 程序。我在这个元素中有日期字段，我想让编辑模式就像在 QSqlTableModel 中一样。当用户单击日期时，会出现要编辑的日历。

请帮助如何做到这一点。我为重新实现的 QAbstractTableModel 创建了自己的模型 rowcount/columncount/data/flags/headerData 我还需要什么吗？

# php - 数组键：值不输出元素名称

> ID：15988823
> 
> 赞同：0
> 
> 时间：2013-04-13T14:23:56.843
> 
> 标签：php, arrays, key-value

我正在从数据库创建一个数组，并且它被正确创建，如下所示。

```
array(2) { 
    ["members"]=> bool(true) 
    ["maps"]=> bool(true) 
} 
```

问题是当我使用 key:value 输出数组时，键正在输出元素编号，例如 0 代表“成员”，1 代表“地图”。

```
foreach($vPrivileges as $vKey => $vValue) {
   echo "$vKey: $vValue";
} 
```

我需要输出元素的实际名称和值，我花了一段时间在网上查找并尝试了一些代码示例，但未能找到解决方案，非常感谢任何帮助。

我还注意到，如果我获取数组并在其上使用`sort()`函数，它会按预期排序，但有一个例外是将所有数组元素重命名为 0、1 等。

```
array(2) { 
    [0]=> bool(true) 
    [1]=> bool(true) 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:26:18.463

使用[asort](http://php.net/asort)而不是 sort 来保留数组键。这将解决您的问题（假设您在 foreach 循环之前调用 sort ）。

# cocoa - 可可绑定错误

> ID：15988827
> 
> 赞同：4
> 
> 时间：2013-04-13T14:24:11.600
> 
> 标签：cocoa, core-data, cocoa-bindings, nsarraycontroller

试图围绕可可绑定包裹我的头无法确定此错误的原因

我有一个简单的应用程序，其中应用程序委托将 Managedobjectcontext 传递给 Window Controller，后者将其传递给视图控制器。与视图关联的 nib 是带有数组控制器的基于视图的表。

我在应用程序委托中启动了一些托管对象，当我运行应用程序时，表中填充了对象但是引发了以下错误

[_NSControllerArrayProxy firstIndex]：无法识别的选择器发送到实例 0x100165510

由于代码很少，不知道如何调试

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T15:24:47.897

谢谢Anoop，您的第二个链接解决了我的问题我将选择索引的控制器键设置为排列对象，我将其更改为selectionIndexes，一切正常。

# ios - 停止 UIACtivityIndi catorView 气质 iOS

> ID：15988829
> 
> 赞同：0
> 
> 时间：2013-04-13T14:24:35.827
> 
> 标签：ios, nsurlconnection, uiactivityindicatorview, nsurlconnectiondelegate

我使用异步进行发布请求

```
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) 
```

我有连接停止时的回调，在这里我调用我的方法来停止 UIActivityIndi​​catorView

```
-(void)connectionDidFinishLoading:(NSURLConnection*)connection
{
NSLog(@"Connection finish");
[self stopAnimatingSpinner];
} 
```

继承人停止动画方法（我已经尝试了组合和所有以下停止，删除隐藏方法

```
-(void)stopAnimatingSpinner{

[submittingActivity stopAnimating];
submittingActivity.hidden = YES;
[submittingActivity removeFromSuperview];
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

} 
```

现在的问题是有时它会停止，有时它不会停止并且非常随机。如果我将活动的停止移动到完成数据解析而不是依赖连接回调，则行为完全相同。有时他们停止有时他们没有？

我唯一能想到的是连接阻塞了主线程，但为什么它有时会工作而不是其他人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:05:53.157

如果您`NSURLConnection`从主线程调用，那么您的完成处理程序也将从主线程调用。`dispatch_sync`因此，停止微调器时不应调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:33:06.887

两个主要问题：

1.  如果您使用 的`sendAsynchronousRequest:`（等）方法`NSURLConnection`，则完成时只会调用完成块，而`connectionDidFinishLoading:`委托方法则不会。那是另一个 API。

2.  如果要更新 UI，则应**始终在主线程上进行。**否则，您的程序会调用未定义的行为。因此，将停止动画的代码包装在主线程上调度的块中：

    `dispatch_sync(dispatch_get_main_queue(), ^{ [self stopAnimatingSpinner]; });`

# python - 你如何将一个 Numpy 数组 (mxn) 维度展开到单个向量中

> ID：15988832
> 
> 赞同：8
> 
> 时间：2013-04-13T14:24:41.190
> 
> 标签：python, matlab, numpy

我只想知道是否有将 numpy 数组展开为单个向量的捷径。例如（将以下 Matlab 代码转换为 python）：

Matlab方式：A = zeros(10,10) %
A_unroll = A(:) % <- 我如何在python中做到这一点

预先感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T14:28:16.540

这是你的想法吗？

编辑：正如帕特里克指出的那样，将 A(:) 翻译成 Python 时必须小心。

当然，如果您只想展平矩阵或二维零数组，那也没关系。

因此，这是一种获得类似 matlab 行为的方法。

```
>>> a = np.array([[1,2,3], [4,5,6]])
>>> a
array([[1, 2, 3],
       [4, 5, 6]])
>>> # one way to get Matlab behaivor
... (a.T).ravel()
array([1, 4, 2, 5, 3, 6]) 
```

`numpy.ravel`确实会展平二维数组，但不会像 matlab`(:)`那样做。

```
>>> import numpy as np
>>> a = np.array([[1,2,3], [4,5,6]])
>>> a
array([[1, 2, 3],
       [4, 5, 6]])
>>> a.ravel()
array([1, 2, 3, 4, 5, 6]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T22:43:53.440

您必须在这里小心，因为 ravel 不会像 Matlab 使用 A(:) 那样解开元素。如果您使用：

```
>>> a = np.array([[1,2,3], [4,5,6]])
>>> a.shape
(2,3)
>>> a.ravel()
array([1, 2, 3, 4, 5, 6]) 
```

在 Matlab 中：

```
>> A = [1:3;4:6];
>> size(A)
ans =

     2     3
>> A(:)

ans =

     1
     4
     2
     5
     3
     6 
```

在 Matlab 中，元素首先按列分解，然后按行分解。在 Python 中则相反。这与元素的存储顺序有关（NumPy 中的默认 C 顺序与 Matlab 中的 Fortran 顺序）。

知道 A(:) 等价于 reshape(A,[numel(A),1])，您可以在 Python 中获得相同的行为：

```
>>> a.reshape(a.size,order='F')
array([1, 4, 2, 5, 3, 6]) 
```

注意 order='F' 指的是 Fortran 顺序（列首先解开）。

# c - GSL gsl_vector 更好的内存管理

> ID：15988836
> 
> 赞同：0
> 
> 时间：2013-04-13T14:25:04.987
> 
> 标签：c, performance, optimization, memory-management, gsl

当我用 C++ 编写线性代数程序时，我使用 Armadillo 库。它基于模板，它为我提供了一种定义任何长度的向量的方法，这些向量不一定需要额外的内存分配，因为它们在编译时静态分配了适当的内存缓冲区。当我使用`arma::Col<double>::fixed<3>`编译器时，会即时创建一个“新类型”，以便向量包含正好 3 个双精度的缓冲区。

现在我正在使用 C 语言编写线性代数程序，并且正在使用 GNU 科学库 (GSL)。为了实例化一个 3D 向量，我这样做：`gsl_vector_alloc(3)`返回一个`gsl_vector*`. 问题是这个操作会导致一小部分内存的动态分配，并且在程序运行期间会发生数百万次。我的程序正在浪费大量资源来执行数千万`malloc`/`free`次操作。

我检查了内部结构`gsl_vector`：

```
typedef struct
{
   size_t size;
   size_t stride;
   double * data;
   gsl_block * block;
   int owner;
} gsl_vector; 
```

为了使库正常工作，`data`应该指向向量的第一个元素，通常在这样的`gsl_block`结构内：

```
typedef struct
{
   size_t size;
   double * data;
} gsl_block; 
```

其中包含另一个`data`指针。所以，为了实例化一个简单的 3D 向量，这个`malloc`s 序列发生：

1.  一个`gsl_vector`结构是`malloc`'d （在 x86_64 上大约 40 个字节）。
2.  一个`gsl_block`结构是`malloc`'d (16 bytes) 并且 gsl_vector 的`block`指针被设置为刚刚分配的 gsl_block 的内存地址
3.  3 个双精度数组是`malloc`'d，其内存地址分配给两个`data`指针（一个 in`gsl_block`和一个 in `gsl_vector`）。

`malloc`通过删除两个s ，我获得了 40% 的性能提升。我创建了我的自定义`gsl_vector`创建例程，它分配了一个包含 3 个双精度数的数组，并将`data`指针设置`gsl_vector`为该数组的地址。然后我返回一个`gsl_vector`（不是指针）。
但这样做，我仍然得到数百万次`malloc(3 * sizeof(double))`操作。

我没有设法将 3 个双精度数组“嵌入”到`gsl_vector`结构中，因为如果`data`指针指向结构本身*内部*的东西（hacky！），那么当向量被复制到别处时指针不再有效！

你有什么想法（除了切换到 C++ 或滚动我自己的线性代数库）？我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:42:14.550

在我看来，您好像误解了`gls_block`数据结构的目的。在我看来，您应该只使用它在数据结构中分配一大块数据`gsl_block`，然后将该块拆分为多个`gsl_vector`. 如果您`gsl_vector`通过分配一组数组来一次性分配所有内容，那么您就快到了。在初始化期间，您只有两次调用`malloc`和一些簿记。

这将强加给您的是，您必须提前准确地考虑`gsl_vector`您需要什么。但这是您使用没有内置垃圾收集的语言时要付出的“代价”。如果您对此进行投资，大多数时候它具有构建代码的优势，您可能会学到很多关于如何组织计算的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:43:07.560

C 有点太原始，无法正确执行此操作。

如果您需要使用 GSL 中的函数，您可能仍然可以使用 C++ Armadillo 向量和矩阵。

例如，您可以通过[.memptr()](http://arma.sourceforge.net/docs.html#memptr)成员函数获取指向向量或矩阵使用的内存的指针。这也适用于固定大小的矩阵/向量。

或者，您可以告诉 Armadillo 使用已分配的内存块，方法是在向量​​或矩阵[构造](http://arma.sourceforge.net/docs.html#adv_constructors_mat)期间给它一个指针。

# php - pass an array of objects from jquery to php and save to database

> ID：15988842
> 
> 赞同：0
> 
> 时间：2013-04-13T14:26:32.963
> 
> 标签：php, javascript, jquery

Hi I have been trying to pass an array of objects with geolocation data from jquery to a php script to save to a database. been up all night trying to get this working so may be missing something small from lack of sleep.

the jquery objects stucture is the following

```
var testData = [];            

        var coords = {
        lat: 12.6544885,
        lng: 23.545665
        };

        var pos = {
         timestamp: 1222355465,
          latlng: coords
            };

            testData.push(pos);

            var coords = {
        lat: 55.6544885,
        lng: 55.545665
        };

        var pos = {
         timestamp: 555,
          latlng: coords
            };

            testData.push(pos); 
```

I am trying to post this via .ajax using the following

```
$.ajax({
            type: 'POST',
            data: JSON.stringify(testData),
            //change the url for your project
            url: 'www.mydomain.com/save2.php',
            success: function(data){
                console.log(data);
                alert('Sucess');
            },
            error: function(){
                console.log(data);
                alert('Error');
            }
        }); 
```

and I am decoding at the php side and attempting to place in a database using the following.

```
$myData = json_decode($_REQUEST['testData']);

$sql = "INSERT INTO walk (timestamp, latitude, longitude) ";
$sql .= "VALUES ($myData->timestamp, $myData->latlng->lat, $myData->latlng->lng)"; 
```

I would appriciate any input on this issue thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:36:36.343

In ajax options, try changing `data: JSON.stringify(testData),` to

```
data: { 'testData': JSON.stringify(testData) }, 
```

otherwise you won't have a valid query string.

# javascript - 如何使用带有 jQ uery 的 urlparam 来选择单选按钮？

> ID：15988844
> 
> 赞同：1
> 
> 时间：2013-04-13T14:27:21.687
> 
> 标签：javascript, jquery, jquery-selectors, radio-button, url-parameters

我有这个网址：`../foo::bar{2}233{13}171{1}1{20}0.html`

参数在`{}`，值在后面。

有了这个，我可以得到值：

```
var vars = [], hash;
var q = document.URL.split('bar')[1];
if(q != undefined){
    q = q.split('%7B');
    for(var i = 0; i < q.length; i++){
        hash = q[i].split('%7D');
        vars.push(hash[1]);
        vars[hash[0]] = hash[1];
    }
}; 
```

如何设置匹配的单选按钮`selected`来提交表单？

```
<input id="233" type="radio" value="233" name="id[2]">
<label title="orange" for="233">
    <img style="background: #FF6600; color: #668014" src="img/orange.gif">
</label> 
```

此外，我想`style`将以下内容`img`用作其他 div 样式的值。对于页面上的选择，我有这个：

```
$('label img').click(
    function() {
        var bg = $(this).css('background-color'); 
        var bc = $(this).css('color'); 
        $('.basic').css("background-color", bg);
        $('.detail').css("border-color", bc);
}); 
```

`document.write(String(vars['2']));`是不足够的...

# joomla - Joomla：上传一个清晰的演示文稿

> ID：15988846
> 
> 赞同：0
> 
> 时间：2013-04-13T14:27:30.653
> 
> 标签：joomla

我有一个客户使用 Articulate 做了一些演示。他们向我发送了演示文稿的 zip 文件，我正在尝试将它们上传到他们的 Joomla 网站，以便可以在线查看演示文稿。

我已按照此视频中的说明进行操作：

[http://www.youtube.com/watch?v=8MqqPs6n9rM](http://www.youtube.com/watch?v=8MqqPs6n9rM)

我不确定是否应该将 iframe 路径设置为播放器或演示文稿本身。当我在计算机的本地驱动器上单击播放器时，它将加载演示文稿。所以我假设我的 iframe 路径应该是播放器，但现在只有播放器正在加载，没有演示。我不确定演示文稿在加载时需要参考播放器的位置。我模仿了计算机上目录的结构，但这也不起作用。

我对 Joomla 还是很陌生，根本不使用 Articulate，所以感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:02:19.263

我想到了。如果其他人需要知道，请确保通过 FTP 以二进制而不是 ASCII 格式上传文件。如果没有，XML 数据就会混乱。除此之外，我在上面发布的 youtube 视频很有帮助。

# delphi - 销毁迭代器中的调用保证

> ID：15988848
> 
> 赞同：2
> 
> 时间：2013-04-13T14:27:49.233
> 
> 标签：delphi, iterator, freepascal

假设我们在 FreePascal 中有一个自定义迭代器作为对象：

```
{$MODE OBJFPC}
....
type TLuaTablesEnumerator = object
private
  {...}
public
  constructor Create( aState : PLua_State; aIndex : Integer );
  destructor Destroy;
  function MoveNext : Boolean;
  function GetEnumerator : TLuaTablesEnumerator;
public
  property Current : TLuaTable read FCurrent;
end; 
```

是否有保证`Destroy`将始终被调用？我尝试了基本案例，似乎是这样，尽管文档中没有提到它。

特别是 -`Destroy`将始终被调用，即使在以下情况下：

1.  我们正常退出循环
2.  `Break`我们使用or提前退出循环`Exit`
3.  我们通过引发的异常退出循环

如果对这些问题中的任何一个问题的答案是“否”——一个后续问题——如果迭代器是一个类，它会改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:24:48.110

对所有都没有。

与 Delphi 中相同，仅在接口引用计数变为零时才隐式调用析构函数。（尽管该接口可能在 olevariant 中）。

TP 对象是静态的，在 FPC 中它们还尊重嵌套的自动化类型。但是析构函数仍然需要显式调用

由于您的问题均不涉及界面使用，因此答案是**否定**的。

# gnuplot - 如何平均具有不同 x 和 y 值的多个表文件

> ID：15988850
> 
> 赞同：2
> 
> 时间：2013-04-13T14:27:53.343
> 
> 标签：gnuplot, octave

我得到了一些包含相同测量结果的表格文件，但由于差异很小，数据点得到了不同的*x*和*y*值。但我需要所有六个文件的平均值。以下是两个（缩短的）示例文件：

```
# file1.dat
  9.840000000000000E+00  1.680000000000000E+02
  9.840071206052514E+00  1.730000000000000E+02
  9.840142412105029E+00  1.630000000000000E+02
  9.840213618157543E+00  1.730000000000000E+02
  9.840284824210057E+00  1.690000000000000E+02
  9.840356030262573E+00  1.720000000000000E+02
  9.840427236315087E+00  1.660000000000000E+02
  9.840498442367601E+00  1.750000000000000E+02
  9.840569648420116E+00  1.650000000000000E+02
  9.840640854472630E+00  1.720000000000000E+02 
```

```
# file2.dat
  9.840000000000000E+00  1.720000000000000E+02
  9.840071016422547E+00  1.760000000000000E+02
  9.840142032845096E+00  1.610000000000000E+02
  9.840213049267643E+00  1.530000000000000E+02
  9.840284065690192E+00  1.590000000000000E+02
  9.840355082112739E+00  1.590000000000000E+02
  9.840426098535286E+00  1.690000000000000E+02
  9.840497114957834E+00  1.790000000000000E+02
  9.840568131380381E+00  1.680000000000000E+02
  9.840639147802928E+00  1.620000000000000E+02 
```

[还有四个类似的文件……]

如果我将它们全部绘制成`gnuplot`除了每个表作为自己的曲线，我会得到这个
![gnuplot](https://i.stack.imgur.com/D1YUI.png)

但我需要一条曲线来显示所有六张表的平均值。

我试过`join`了，但结果是一个空文件，我猜它不起作用，因为第一列（*x*值）在每个文件中不包含相同的值。尝试用`gnuplot`with进行求和`plot data1 u 1:2 + data2 u 1:2`也失败了。

我发现[合并多个数据文件以绘制在一个图表中](https://stackoverflow.com/q/7218201/1018250)，但仅合并文件并没有帮助。

* * *

我使用的是 Mac OS X，但可以访问 Ubuntu，所以如果有任何工具可以做到这一点……</p>

* * *

脚本的新输出

```
> AVDEBUG=1 octave -qf avfiles.m messung3.dat messung4.dat
warning: ================
warning: processing file: messung3.dat
warning: size of the matrix in the file: 2248      3
warning: min(x): 0.000000e+00
warning: max(x): 0.000000e+00
warning: min(y): 9.840000e+00
warning: max(y): 1.000000e+01
warning: ================
warning: processing file: messung4.dat
warning: size of the matrix in the file: 2254      3
warning: min(x): 0.000000e+00
warning: max(x): 0.000000e+00
warning: min(y): 9.840000e+00
warning: max(y): 1.000000e+01
warning: yp is undefined at 2248 points 
```

如果您愿意，可以从[这里 (tweh.de/texsx/data-files-avarage.zip)](http://tweh.de/texsx/data-files-avarage.zip)下载我的数据文件。平均应由所有文件组成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:59:15.013

[八度音阶](http://www.gnu.org/software/octave/)很容易。创建文件`avfiles.m`. 用法：

```
octave -qf avfiles.m file1.dat file2.dat 
```

`octave -q --eval "test avfiles"`使用测试数据创建文件`aux_file[0-9]`。

**avfiles.m:**

```
#!/usr/bin/octave -qf
# Average y values in several files
# Usage:
# octave -qf avfiles.m aux_file0 aux_file1 aux_ file2

if isempty(getenv("AVDEBUG"))
  warning ("off", "avfiles")
endif

setenv("LC_NUMERIC", "C"); 

arg_list = argv ();
for k = 1:nargin
  fname = arg_list{k};
    warning ("avfiles", "================");
    warning ("avfiles", "processing file: %s", fname);
    data = dlmread(fname);
    warning ("avfiles", "size of the matrix in the file: %s", num2str(size(data)));
    x = data(:, 1);
    y = data(:, 2);
    warning ("avfiles", "min(x): %e", min(x));
    warning ("avfiles", "max(x): %e", max(x));
    warning ("avfiles", "min(y): %e", min(y));
    warning ("avfiles", "max(y): %e", max(y));
    [x, idx] = sort(x);
    y = y(idx);
    if k==1
      % use x values from the first file
      xp = x; yp = y;
    else
      yp = 1/k * ( (k-1)*yp + interp1(x, y, xp) );
      warning ("avfiles", "yp is undefined at %d points", sum(isnan(yp)));
    endif
endfor

idx = !isnan(yp);
dlmwrite("/dev/stdout", [xp(idx), yp(idx)], ' ');

%!test
%! n = 100;
%! for k=0:9
%!   x = unifrnd(0, 2*pi, n, 1);
%!   y = sin(x) + 0.05*stdnormal_rnd(n, 1);
%!   dlmwrite(sprintf("aux_file%i", k), [x y], " ");
%! end
%! system("octave -qf avfiles.m aux_file[0-9] > aux_out");
%! data = dlmread("aux_out");
%! x = data(:, 1); y = data(:, 2);
%! assert(sin(x), y, 0.08); 
```

运行`AVDEBUG=1 octave -qf avfiles.m file1.dat file2.dat`以获取跟踪。有了你的示例文件，我得到：

```
warning: ================
warning: processing file: file1.dat
warning: size of the matrix in the file: 10    2
warning: min(x): 9.840000e+00
warning: max(x): 9.840639e+00
warning: min(y): 1.530000e+02
warning: max(y): 1.790000e+02
warning: ================
warning: processing file: file2.dat
warning: size of the matrix in the file: 10    2
warning: min(x): 9.840000e+00
warning: max(x): 9.840641e+00
warning: min(y): 1.630000e+02
warning: max(y): 1.750000e+02
warning: yp is undefined at 0 points 
```

# database-design - 高效检索的数据库设计

> ID：15988851
> 
> 赞同：0
> 
> 时间：2013-04-13T14:28:02.073
> 
> 标签：database-design, relational-database

这是我的面试问题之一。有一个庞大的数据库将保存数百万条员工记录。我应该能够有效地根据名字、姓氏、年龄、位置等任何字段进行查询，并且应该快速检索结果。您将如何设计数据库。我根据索引等回答，但面试不满意。关于这个设计是如何完成的有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:00:27.183

这些要求建议我考虑使用键值存储而不是传统的 SQL 数据库。

键值存储将允许您进行相对非结构化的查询（即您不需要提前定义模式）并且专为非常快速的读取而设计。

例子：

*   雷迪斯

*   卡桑德拉

*   长椅

*   MongoDB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:19:21.797

也许面试官想要一个关键词：`normalisation`

世界上所有的索引都不会帮助一个非规范化的数据库——也许有问题的“员工记录”包含姓名、地址……在每条记录上，记录是项目、假期、病假、等等

我相信，线索就在“数百万”“员工”记录中。即使是最大的政府部门也没有“数百万”员工，因此数据库没有标准化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T14:57:11.883

我不确定问题的上下文，但据我了解，您被问及数据建模，而不是现有数据库/查询的“纯”优化。

我会采用以下方法。企业可以拥有针对输入新数据（最少的索引集，高度规范化）进行优化的“操作数据库”或 OLTP，以及从规范化角度来看具有大量冗余的“决策支持数据库”（数据仓库、OLAP 系统），但允许您非常快速地按不同的标准进行搜索。从 OLTP 系统建模数据仓库是一个相当大的话题，需要深入了解业务需求。

为了回答有关通过员工搜索的问题，我建议构建一个简单的星型模式（其中每个搜索条件由一个维度表表示）。然后可以在模型之上添加适当的技术，如索引、分区、物化视图。

# c# - 通过 C# 中的 Start-Job 在计划任务中使用 powershell 映射驱动器

> ID：15988853
> 
> 赞同：0
> 
> 时间：2013-04-13T14:28:22.490
> 
> 标签：c#, powershell, drive

我目前正在尝试在我的 Web 服务上运行一个 powershell 脚本，它将驱动器映射到另一个系统上的共享文件夹并将一个文件夹复制到它。我目前遇到的奇怪问题是**脚本似乎执行得很好**，但是运行脚本的作业似乎没有正确完成。因此，我必须为强制完成任务设置超时，否则它根本不会完成。然而，这并不是我真正想要的，因为如果脚本花费的时间比预期的长等，它可能会产生一些令人讨厌的副作用。另一方面，我希望在给定的场景中尽可能快地执行，所以我想要让脚本“自然”完成。

这是我目前的设置

C# Web 服务调用 powershell 脚本，如下所示：

```
public Collection<PSObject> executeCommand(String pCommand, String pName)
        {
            // Call the script
            var runspaceConfiguration = RunspaceConfiguration.Create();
            var runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
            runspace.Open();
            var pipeline = runspace.CreatePipeline();

            pipeline.Commands.AddScript(pCommand);
            pipeline.Commands.AddScript("Wait-Job -Name " + pName + " -Timeout 60");
            pipeline.Commands.AddScript("Receive-Job -Name " + pName);

            return pipeline.Invoke();
        }

String shareArguments = "some stuff here";
        String shareCommandName = "copyFolder";
        String shareCommand = "Start-Job -filepath " + currentDirectory + "\\scripts\\copyFolder.ps1 -ArgumentList " + shareArguments + " -Name " + shareCommandName + " -RunAs32";
        Collection<PSObject> results1 = executeCommand(shareCommand, shareCommandName);

        StreamWriter sharestream = new StreamWriter("D:\\shareoutput.txt");
        foreach (PSObject obj in results1)
        {
            sharestream.WriteLine(obj.ToString());
        }
        sharestream.Close(); 
```

脚本本身：

```
 param($sharepath,$shareuser,$sharepassword,$hostname,$sourcefolder)

   # create a credentials object
   $secpasswd = ConvertTo-SecureString $sharepassword -AsPlainText -Force
   Write-Output "0"
   $cred = New-Object System.Management.Automation.PSCredential ($shareuser, $secpasswd)
   Write-Output "1"
   # Access the share
   New-PSDrive -Name J -PSProvider FileSystem -Root $sharepath -Credential $cred
   Write-Output "2"
   # Copy the folder including the file
   Copy-Item $sourcefolder "J:\" -Recurse -Force
   Write-Output "3"
   # Unmap drive
   Remove-PSDrive -Name J 
```

当我检索作业的调试输出时，输出如下所示。所以似乎 New-PSDrive 调用似乎以某种方式在这里阻塞：

```
0
1 
```

知道这是什么原因以及如何解决它吗？

提前感谢您的任何提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-02T19:49:39.153

您对 New-PSDrive 有疑问。首先检查您的 PSCredential 对象。然后更新脚本

**New-PSDrive** *-Name* J **-PSProvider** FileSystem **-Root** $sharepath **-Credential** $cred ***-Persist***

完美文章： [https ://technet.microsoft.com/en-us/library/hh849829.aspx](https://technet.microsoft.com/en-us/library/hh849829.aspx)

# python - 在矩阵中设置值 - Python

> ID：15988855
> 
> 赞同：3
> 
> 时间：2013-04-13T14:28:22.990
> 
> 标签：python, arrays, multidimensional-array, matrix, setting

我做了 i 矩阵 5x3

```
field = []
fields = []
    for i in range(0,5):
        for j in range(0,3):
            x = 1
            field.append(x)
    fields.append(field) 
```

当我想更改一个字段时

```
fields[2][2] = 0 
```

我明白了：

```
fields[0][0] = 1
fields[0][1] = 1
fields[0][2] = **0**
fields[1][0] = 1
fields[1][1] = 1
fields[1][2] = **0**
fields[2][0] = 1
fields[2][1] = 1
fields[2][2] = **0**
fields[3][0] = 1
fields[3][1] = 1
fields[3][2] = **0**
fields[4][0] = 1
fields[4][1] = 1
fields[4][2] = **0** 
```

* * *

相反，我得到了五个改变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:35:29.430

发生这种情况的原因是您的列表的每一行都引用同一个对象，名为 的列表`field`。您可以通过查看`id`每一行的 来看到这一点。你会发现：

```
id(fields[0]) == id(fields[1])
id(fields[0]) == id(fields[2]) 
```

等等。每一行实际上都是同一个对象。

您需要为每一行创建一个单独的列表：

```
fields = []
for i in range(0,5):
    field = []
    for j in range(0,3):
        x = 1
        field.append(x)
    fields.append(field) 
```

现在你会看到：

```
id(fields[0]) != id(fields[1]) 
```

等等。您修改单个元素的尝试将按照您的意图进行。

但实际上，如果你想使用矩阵，那么你应该使用 numpy.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T14:35:40.833

`field`这是因为您在所有行中都引用了相同的内容。

你要这个：

```
for i in range(0,5):
    field = []
    for j in range(0,3):
        x = 1
        field.append(x)
    fields.append(field) 
```

`field`应该为每一行重置。这就是为什么你应该把它放在第一个循环中。现在你`fields[2][2] = 0`会工作。

```
>>> fields
[[1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1]]
>>> fields[2][2] = 0
>>> fields
[[1, 1, 1], [1, 1, 1], [1, 1, 0], [1, 1, 1], [1, 1, 1]] 
```

# c# - 如何使用c#制作完整文件夹的rar文件

> ID：15988856
> 
> 赞同：1
> 
> 时间：2013-04-13T14:28:34.053
> 
> 标签：c#, process, winrar

我有一个制作.rar 文件的程序。

## 代码

```
 public static void RarFilesT(string rarPackagePath, Dictionary<int, string> accFiles)
    {
        string[] files = new string[accFiles.Count];
        int i = 0;
        foreach (var fList_item in accFiles)
        {
            files[i] = "\"" + fList_item.Value;
            i++;
        }
        string fileList = string.Join("\" ", files);
        fileList += "\"";
        System.Diagnostics.ProcessStartInfo sdp = new System.Diagnostics.ProcessStartInfo();
        string cmdArgs = string.Format("A {0} {1} -ep",
            String.Format("\"{0}\"", rarPackagePath),
            fileList);
        sdp.ErrorDialog = true;
        sdp.UseShellExecute = true;
        sdp.Arguments = cmdArgs;
        sdp.FileName = rarPath;//Winrar.exe path
        sdp.CreateNoWindow = false;
        sdp.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        System.Diagnostics.Process process = System.Diagnostics.Process.Start(sdp);
        process.WaitForExit();
    } 
```

这个生产者需要一个文件列表的字符串数组来制作 rar 文件。谁能告诉我如何制作带有子文件夹和文件的完整文件夹的 rar。抱歉 1 个错误，我还需要从给定文件夹中选择的扩展文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T10:22:59.830

# 更新功能

```
 /// <summary>
    /// Package files. (Build Rar File)
    /// </summary>
    /// <param name="rarPackagePath">Rar File Path</param>
    /// <param name="accFiles">List Of Files To be Package</param>
    public static string RarFiles(string rarPackagePath,
        Dictionary<int, string> accFiles)
    {
        string error = "";
        try
        {
            string[] files = new string[accFiles.Count];
            int i = 0;
            foreach (var fList_item in accFiles)
            {
                files[i] = "\"" + fList_item.Value;
                i++;
            }
            string fileList = string.Join("\" ", files);
            fileList += "\"";
            System.Diagnostics.ProcessStartInfo sdp = new System.Diagnostics.ProcessStartInfo();
            string cmdArgs = string.Format("A {0} {1} -ep1 -r",
                String.Format("\"{0}\"", rarPackagePath),
                fileList);
            sdp.ErrorDialog = false;
            sdp.UseShellExecute = true;
            sdp.Arguments = cmdArgs;
            sdp.FileName = winrarPath;//Winrar.exe path
            sdp.CreateNoWindow = false;
            sdp.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
            System.Diagnostics.Process process = System.Diagnostics.Process.Start(sdp);
            process.WaitForExit();
            error = "OK";
        }
        catch (Exception ex)
        {
            error = ex.Message;
        }
        return error;
    } 
```

为此，您可以使用完整的文件夹路径制作 rar。-r 参数可以递归文件夹和文件。感谢旁观者。您还可以指定包装的扩展名。

## 前任。

```
string rarPackage = "E:/Backup.rar";
Dictionary<int, string> accFiles = new Dictionary<int, string>();
accFiles.Add(1, "D://*.txt");
accFiles.Add(2, "D://*.html");
accFiles.Add(3, "D://*.jpg");
RarFiles(rarPackage, accFiles); 
```

## 解压

```
public static void UnrarFiles(string rarPackagePath, string dir)
    {
        System.Diagnostics.ProcessStartInfo sdp = new System.Diagnostics.ProcessStartInfo();
        string cmdArgs = string.Format("X {0} * {1}",
            String.Format("\"{0}\"", rarPackagePath),
            String.Format("\"{0}\"", dir));
        sdp.Arguments = cmdArgs;
        sdp.ErrorDialog = true;
        sdp.UseShellExecute = true;
        sdp.CreateNoWindow = false;
        sdp.FileName = rarPath;
        sdp.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        System.Diagnostics.Process process = System.Diagnostics.Process.Start(sdp);
        process.WaitForExit();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T14:24:29.477

Ashish，感谢您发布此信息；这对我很有帮助，因为我在最后一刻被告知，我必须通过 FTP 传输的一些文件应该首先是 RARed。

但我很好奇——为什么 accFiles 是字典，而不是 string[] 或 Collection？微软建议不要在公共 API 中传递字典：http: [//msdn.microsoft.com/en-us/library/dn169389 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/dn169389(v=vs.110).aspx)

此外，使用 StringBuilder 会清理构建文件列表。我建议这样做：

```
 public static string RarFiles(string rarPackagePath,
        Collection<string> accFiles)
    {
        string error = "";
        try
        {
            StringBuilder fileListBuilder = new StringBuilder();
            foreach (var fList_item in accFiles)
            {
                fileListBuilder.Append("\"" + fList_item + "\" ");
            }
            string fileList = fileListBuilder.ToString();

           ... (no change from this point on)
    } 
```

再次感谢 - 这对我真的很有帮助。我希望我的建议对你也有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T14:36:11.690

-r 参数可以递归文件夹和文件..

所以你添加“-r”到

```
 string cmdArgs = string.Format("A {0} {1} -ep -r",
        String.Format("\"{0}\"", rarPackagePath),
        fileList); 
```

# java - Android / Java - 将 DataInputStream 转换为字符串

> ID：15988859
> 
> 赞同：0
> 
> 时间：2013-04-13T14:29:02.393
> 
> 标签：java, android, string, datainputstream

我目前与一些中间件建立了连接，通过它我将 SQL 查询发送到数据库。

我在将 DataInputStream 转换为可用格式（无论是否为字符串）时遇到了一些麻烦。我查看了[另一个 StackOverflow 问题](https://stackoverflow.com/questions/3870847/how-to-convert-the-datainputstream-to-the-string-in-java)，但是这并没有解决我的问题，因为使用

```
in.readLine(); 
```

被“弃用”，无论这意味着什么。我需要能够从我的中间件读取响应。

```
private class NetworkTask extends AsyncTask<String, Void, Integer> 
{
    protected Integer doInBackground(String... params)
    {
        Message message = networkHandler.obtainMessage();

        String ip = "example ip";
        int port = 1234;

        try 
        {
            InetAddress serverAddr = InetAddress.getByName(ip);
            Log.d("EventBooker", "C: Connecting...");
            Socket socket = new Socket(serverAddr, port);               

            DataInputStream in = new DataInputStream(socket.getInputStream());

            try 
            {
                Log.d("EventBooker", "C: Connected. Sending command.");
                PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
                out.println(params[0]);
                networkHandler.sendMessage(message);
                Log.d("EventBooker", "C: Sent.");
            } 
            catch (Exception e) 
            {
                Log.e("EventBooker", "S: Error", e);
            }
            Log.d("EventBooker", "C: Reading...");

            Log.d("EventBooker", "C: Response read, closing.");
            socket.close();
            Log.d("Eventbooker", "C: Closed.");
        } 
        catch (Exception e)
        {
            Log.e("EventBooker", "C: Error", e);
        }
        return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:36:31.243

将您的转换`DataInputStream`为`BufferedReaderStream`这样的：

```
BufferedReader d = new BufferedReader(new InputStreamReader(in)); 
```

然后你想得到你的实际`String`，要做到这一点，你做这样的事情：

```
StringBuffer sb = new StringBuffer();
String s = "";

while((s = d.readLine()) != null) {
    sb.append(s);
}

String data = sb.toString();

//Use data for w/e 
```

轻松简单！

我们不只是将它附加到已经存在的字符串的原因是 Java`Strings`是不可变的，因此每次`String`重新创建对象时都会产生性能问题。因此`StringBuffer`！

# javascript - 如何使用 JS 文件中的 javascript 从 web.config 读取会话超时值

> ID：15988865
> 
> 赞同：1
> 
> 时间：2013-04-13T14:29:24.673
> 
> 标签：javascript, asp.net

谁能指导我使用 .js 文件中包含的 javascript 读取会话超时值的值。

我需要访问 javascript 文件中的值并处理该值。

我尝试在 test.js 文件中遵循以下方法，但它不起作用：

```
var sessionTimeout = <%= Session.Timeout %>;
alert(sessionTimeout); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:32:59.903

您的问题是 .JS 文件未执行，因此它们不包含 Session.Timeout 变量。

你可以做两件事：

1.  将您的 javascript 直接包含在您的 ASP/ASPX 页面中，该页面确实具有正在执行的代码。
2.  在您的代码中注册您的 JS 脚本。

**注册你的 JS**

请参阅：http: [//msdn.microsoft.com/en-us/library/aa479011.aspx#aspnet-usingjavascript_topic07](http://msdn.microsoft.com/en-us/library/aa479011.aspx#aspnet-usingjavascript_topic07)

```
Page.RegisterClientScriptBlock("MyScript", _
   "<script language=javascript src='MyJavaScriptFile.js'>") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:50:42.933

我有共享 m 代码，用于此代码中的连接字符串，您可以替换会话的逻辑。

```
<script language="javascript" type ="text/javascript"> 
function ReadWebConfig()
{
    var strCon = '<%=ConfigurationManager.ConnectionStrings["MysqlCon"].ConnectionString %>'
    alert(strCon);
    var strTemp = '<%=ConfigurationManager.AppSettings["WordTemplate"].ToString() %>'
    alert(strTemp);
}
</script> 
```

# common-lisp - 如何与 SBCL/Common Lisp 中的进程输入/输出交互

> ID：15988870
> 
> 赞同：5
> 
> 时间：2013-04-13T14:29:59.640
> 
> 标签：common-lisp, sbcl

我有一个文本文件，每行一个句子。我想使用 hunspell（-s 选项）对每一行中的世界进行词形还原。由于我想分别拥有每一行的引理，将整个文本文件提交给 hunspell 是没有意义的。我确实需要一行接一行地发送每一行的 hunspell 输出。

遵循[如何在 Steel Bank Common Lisp 中处理输入和输出流的答案？](https://stackoverflow.com/q/2353353/121095)，我能够逐行发送 hunspell 的整个文本文件，但我无法为每一行捕获 hunspell 的输出。在发送另一行之前如何与发送该行并读取输出的过程进行交互？

我当前读取整个文本文件的代码是

```
(defun parse-spell-sb (file-in)
  (with-open-file (in file-in)
    (let ((p (sb-ext:run-program "/opt/local/bin/hunspell" (list "-i" "UTF-8" "-s" "-d" "pt_BR") 
                 :input in :output :stream :wait nil)))
      (when p
        (unwind-protect 
          (with-open-stream (o (process-output p)) 
            (loop 
         :for line := (read-line o nil nil) 
         :while line 
         :collect line)) 
          (process-close p)))))) 
```

再一次，这段代码给了我整个文本文件的 hunspell 输出。我想分别为每个输入行输出 hunspell 。

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T00:33:19.907

我想您要运行的程序有缓冲问题。例如：

```
(defun program-stream (program &optional args)
  (let ((process (sb-ext:run-program program args
                                     :input :stream
                                     :output :stream
                                     :wait nil
                                     :search t)))
    (when process
      (make-two-way-stream (sb-ext:process-output process)
                           (sb-ext:process-input process))))) 
```

现在，在我的系统上，这将适用于`cat`：

```
CL-USER> (defparameter *stream* (program-stream "cat"))
*STREAM*
CL-USER> (format *stream* "foo bar baz~%")
NIL
CL-USER> (finish-output *stream*)       ; will hang without this
NIL
CL-USER> (read-line *stream*)
"foo bar baz"
NIL
CL-USER> (close *stream*)
T 
```

注意[`finish-output`](http://clhs.lisp.se/Body/f_finish.htm)- 没有这个，读取将挂起。（还有[`force-output`](http://clhs.lisp.se/Body/f_finish.htm)。）

交互模式下的 Python 也可以工作：

```
CL-USER> (defparameter *stream* (program-stream "python" '("-i")))
*STREAM*
CL-USER> (loop while (read-char-no-hang *stream*)) ; skip startup message
NIL
CL-USER> (format *stream* "1+2~%")
NIL
CL-USER> (finish-output *stream*)
NIL
CL-USER> (read-line *stream*)
"3"
NIL
CL-USER> (close *stream*)
T 
```

但是，如果您在没有该`-i`选项（或类似选项，如`-u`）的情况下尝试此操作，您可能会因为正在缓冲而倒霉。例如，在我的系统上，读取 from`tr`将挂起：

```
CL-USER> (defparameter *stream* (program-stream "tr" '("a-z" "A-Z")))
*STREAM*
CL-USER> (format *stream* "foo bar baz~%")
NIL
CL-USER> (finish-output *stream*)
NIL
CL-USER> (read-line *stream*)          ; hangs
; Evaluation aborted on NIL.
CL-USER> (read-char-no-hang *stream*)
NIL
CL-USER> (close *stream*)
T 
```

由于`tr`没有提供关闭缓冲的开关，我们将使用 pty 包装器包装调用（在本例`unbuffer`中来自预期）：

```
CL-USER> (defparameter *stream* (program-stream "unbuffer"
                                                '("-p" "tr" "a-z" "A-Z")))
*STREAM*
CL-USER> (format *stream* "foo bar baz~%")
NIL
CL-USER> (finish-output *stream*)
NIL
CL-USER> (read-line *stream*)
"FOO BAR BAZ
"
NIL
CL-USER> (close *stream*)
T 
```

所以，长话短说：`finish-output`在阅读之前尝试在流上使用。如果这不起作用，请检查阻止缓冲的命令行选项。如果它仍然不起作用，您可以尝试将程序包装在某种 pty-wrapper 中。

# python - 当字符串列内容长于已经存在的内容时，HDFStore.append(string, DataFrame) 失败

> ID：15988871
> 
> 赞同：10
> 
> 时间：2013-04-13T14:30:07.140
> 
> 标签：python, dataframe, pandas, hdf5, pytables

我有一个通过 HDFStore 存储的 Pandas DataFrame，它基本上存储了关于我正在执行的测试运行的摘要行。

每行中的几个字段包含可变长度的描述性字符串。

当我进行测试运行时，我创建了一个新的 DataFrame，其中包含一行：

```
def export_as_df(self):
    return pd.DataFrame(data=[self._to_dict()], index=[datetime.datetime.now()]) 
```

然后调用`HDFStore.append(string, DataFrame)`将新行添加到现有 DataFrame。

这工作正常，除了其中一个字符串列内容大于已经存在的最长实例之外，我收到以下错误：

```
File "<ipython-input-302-a33c7955df4a>", line 516, in save_pytables
store.append('tests', test.export_as_df())
File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/io/pytables.py", line 532, in append
self._write_to_group(key, value, table=True, append=True, **kwargs)
File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/io/pytables.py", line 788, in _write_to_group
s.write(obj = value, append=append, complib=complib, **kwargs)
File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/io/pytables.py", line 2491, in write
min_itemsize=min_itemsize, **kwargs)
File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas/io/pytables.py", line 2254, in create_axes
raise Exception("cannot find the correct atom type -> [dtype->%s,items->%s] %s" % (b.dtype.name, b.items, str(detail)))
Exception: cannot find the correct atom type -> [dtype->object,items->Index([bp, id, inst, per, sp, st, title], dtype=object)] [values_block_3] column has a min_itemsize of [51] but itemsize [46] is required! 
```

在创建 DataFrame 时，我找不到任何有关如何指定字符串长度的文档。这里的解决方案是什么？

更新：

失败的代码：

```
 store = pd.HDFStore(pytables_store)            
        for test in self.backtests:
            try:
                min_itemsizes = { 'buy_pattern' : 60, 'sell_pattern': 60, 'strategy': 60, 'title': 60 }
                store.append('tests', test.export_as_df(), min_itemsize = min_itemsizes) 
```

这是0.11rc1下的错误：

```
File "<ipython-input-110-492b7b6603d7>", line 522, in save_pytables
  store.append('tests', test.export_as_df(), min_itemsize = min_itemsizes)
File "/Users/admin/dev/pandas/pandas-0.11.0rc1/pandas/io/pytables.py", line 610, in append
  self._write_to_group(key, value, table=True, append=True, **kwargs)
File "/Users/admin/dev/pandas/pandas-0.11.0rc1/pandas/io/pytables.py", line 871, in _write_to_group
  s.write(obj = value, append=append, complib=complib, **kwargs)
File "/Users/admin/dev/pandas/pandas-0.11.0rc1/pandas/io/pytables.py", line 2707, in write
  min_itemsize=min_itemsize, **kwargs)
File "/Users/admin/dev/pandas/pandas-0.11.0rc1/pandas/io/pytables.py", line 2447, in create_axes
  self.validate_min_itemsize(min_itemsize)
File "/Users/admin/dev/pandas/pandas-0.11.0rc1/pandas/io/pytables.py", line 2184, in validate_min_itemsize
  raise ValueError("min_itemsize has [%s] which is not an axis or data_column" % k)
ValueError: min_itemsize has [buy_pattern] which is not an axis or data_column 
```

数据样本：

```
 all_day              buy_pattern  \
2013-04-14 12:11:44.377695   False  Hammer() and LowerLow()   

                                                           id instrument  \
2013-04-14 12:11:44.377695  tafdcc96ba4eb11e2a86d14109fcecd49     EURUSD   

                            open_margin periodicity sell_pattern strategy  \
2013-04-14 12:11:44.377695       0.0001     1:00:00                 Tsl()   

                           title  top_bottom  wick_body  
2013-04-14 12:11:44.377695   tsl         0.5          2 
```

数据类型：

```
print prob_test.export_as_df().get_dtype_counts() 

    bool       1
    float64    2
    int64      1
    object     7
    dtype: int64 
```

我每次都删除 h5 文件，因为我想要干净的结果。想知道是否有一些愚蠢的事情因为在第一次追加时 h5 中不存在 df （因此也不存在任何列）而失败？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T12:43:29.410

这是有关此内容的新文档部分的链接：http: [//pandas.pydata.org/pandas-docs/stable/io.html#string-columns](http://pandas.pydata.org/pandas-docs/stable/io.html#string-columns)

这个问题是您在 min_itemsize 中指定的列不是 data_column。简单的解决方法是添加`data_columns=True`到您的追加语句，但我还更新了代码以在您传递有效列名时自动创建 data_columns。我认为这是有道理的，你想要一个最小的列大小，所以让它发生。

还创建了一个新的文档部分字符串列以显示更完整的示例和解释（文档将很快更新）。

```
# this is the new behavior (after code updates)
n [340]: dfs = DataFrame(dict(A = 'foo', B = 'bar'),index=range(5))

In [341]: dfs
Out[341]: 
     A    B
0  foo  bar
1  foo  bar
2  foo  bar
3  foo  bar
4  foo  bar

# A and B have a size of 30
In [342]: store.append('dfs', dfs, min_itemsize = 30)

In [343]: store.get_storer('dfs').table
Out[343]: 
/dfs/table (Table(5,)) ''
  description := {
  "index": Int64Col(shape=(), dflt=0, pos=0),
  "values_block_0": StringCol(itemsize=30, shape=(2,), dflt='', pos=1)}
  byteorder := 'little'
  chunkshape := (963,)
  autoIndex := True
  colindexes := {
    "index": Index(6, medium, shuffle, zlib(1)).is_CSI=False}

# A is created as a data_column with a size of 30
# B is size is calculated
In [344]: store.append('dfs2', dfs, min_itemsize = { 'A' : 30 })

In [345]: store.get_storer('dfs2').table
Out[345]: 
/dfs2/table (Table(5,)) ''
  description := {
  "index": Int64Col(shape=(), dflt=0, pos=0),
  "values_block_0": StringCol(itemsize=3, shape=(1,), dflt='', pos=1),
  "A": StringCol(itemsize=30, shape=(), dflt='', pos=2)}
  byteorder := 'little'
  chunkshape := (1598,)
  autoIndex := True
  colindexes := {
    "A": Index(6, medium, shuffle, zlib(1)).is_CSI=False,
    "index": Index(6, medium, shuffle, zlib(1)).is_CSI=False} 
```

# email - 跟踪在电子邮件中打开（图像/像素的替代品）

> ID：15988891
> 
> 赞同：6
> 
> 时间：2013-04-13T14:32:29.907
> 
> 标签：email, tracking, pixel

我只是好奇是否有任何技术可以记录电子邮件打开而不是使用托管像素/图像。

我已经阅读了一些 facebook 使用 bgsound src 标签来执行此操作的地方，但它似乎不适用于我的基于 Web 的 gmail 客户端。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-19T22:45:07.403

Facebook 肯定使用标准跟踪像素（几乎所有其他电子邮件发送领域的像素都是如此）。您还可以通过点击重定向进行跟踪（如果有人点击链接，他们可以先访问您的网站，您将其记录为打开的证据，然后执行 301 重定向到另一个网站），但这需要点击，即不保证。

目前，跟踪像素是事实上的标准。只要您遵守良好的操作原则（像素应该是 1x1，大小为零字节，并且 HTTP 标头应该指示标准图像格式和 200 响应代码），您的跟踪像素应该可以正常运行。

# ruby-on-rails - 范围 Lambda 参数数量错误

> ID：15988893
> 
> 赞同：1
> 
> 时间：2013-04-13T14:32:48.900
> 
> 标签：ruby-on-rails

谁能看看我做错了什么？这是 Rails 3：

```
class Ad < ActiveRecord::Base
belongs_to :postingtemplate

    scope :active, (lambda do |ad| 
        Item.exists?(:postingtemplate => ad.postingtemplate_id)
    end)

end 
```

它是 Ad 模型中的一个范围，应该返回所有广告，其中 Item 存在于`item.postingtemplate == ad.postingtemplate_id`

**更新**

把它分成两个范围，它起作用了:)

```
class Ad < ActiveRecord::Base
  belongs_to :postingtemplate
  scope :active, where(:postingtemplate_id => Postingtemplate.active)
end

class Postingtemplate < ActiveRecord::Base
  has_many :ads
  scope :active, where(:id => Item.all.collect{|x| x.postingtemplate}.uniq)
end 
```

如果有人知道更好的方法 - 随时告诉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:58:47.737

你可以用一个[`join`](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)

```
scope :active, lambda { |ad| joins(:postingtemplate => :items).where(:postingtemplate => {:postingtemplate_id => ad.postingtemplate_id}) } 
```

也许这也可以：

```
scope :active, lambda { |ad| joins(:postingtemplate => :items).where(:postingtemplate => ad.postingtemplate) } 
```

# arrays - 搜索字符串，将其输出到数组，然后根据用户输入将其删除

> ID：15988896
> 
> 赞同：0
> 
> 时间：2013-04-13T14:32:59.747
> 
> 标签：arrays, string, bash, shell

所以我正在开发一个简单的地址簿并且进展顺利。它使用单个文本文件来存储其所有信息。

此刻我可以在文件中搜索特定字符串，这不是问题。

我很确定我可以让它根据用户输入删除一个字符串，这很容易，但我认为为了更加时髦，如果我能抓住搜索词的输出 - 多行，那将是一个好主意输出说 - 并将每个新行存储到一个数组中，每个数组分配一个数字。从那里，用户可以指定他们想根据他们的输入删除该行。

到目前为止，这是“删除”脚本：

```
ADDRESSBOOK=~/Documents/Address-Book/add_data.txt

export ADDRESSBOOK

echo "=============================== Delete a Record ==============================="
echo "==============================================================================="
echo "============ Search A Record, then delete it! Type 'exit' to exit ============="

exit=0
search(){
    while [ $exit -ne 1 ]
    do

        echo "Find something for me to delete"
        echo -n "-----------------------> "

        read searchTerm
        if [ "$searchTerm" = "exit" ]
        then
            exit=1
        else

            searchOutput=$(grep $searchTerm*.$ $ADDRESSBOOK | sort)

            echo "$searchOutput"
        fi
    done

    exit 0
}

search 
```

地址簿会自动使用 /n 添加每条记录，因此无论如何它都会在新行上显示每条记录。

是否可以获取 $searchRecord 变量并将其传递给数组？

在我开始思考数组之前，这甚至是我想要做的最好的方法吗？

我目前正在尝试类似的东西

```
if [ "$searchTerm" = "exit" ]
then 
    exit=1
else

    searchOutput=$(grep $searchTerm*.$ $ADDRESSBOOK | sort)
    echo {$searchOutput[*] '/n' }

fi 
```

'/n' 是为了尝试并让每个记录出现在新行上。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:33:26.483

尝试类似：

```
l=$(grep $searchTerm $ADDRESSBOOK | \
    sort | { \
        n=0; \
        while read a; \
            do echo "searchOutput[$n]=\"$a\";" ; \
                n=$((n + 1)) ; \
            done; \
    })
eval $l

for line in "${searchOutput[@]}"
do
    echo $line
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T18:23:48.357

```
 while  read -p 'Find something for me to delete> ' searchTerm
  [[ $searchTerm != 'exit' ]]   do readarray -t searchOutput < <(grep -i -w "$searchTerm" "$ADDRESSBOOK" | sort)

        if ((${#searchOutput[@]}>0)); then

        PS3="Select line to delete: "

            select line in "${searchOutput[@]}"; do

            [[ -z $line ]] && break

            line=$(fgrep -nx "$line" "$ADDRESSBOOK")

        sed -i ${line%%:*}d "$ADDRESSBOOK"

                echo "Deleting line" $line
            done
        elif [ $searchTerm = "exit" ]
        then 
        exit=1
            else
                echo "------------- Could Not Find > " $searchTerm
        exit=1
                fi
done
exit 0
} 
```

# algorithm - 找到基本单词并估计它们的难度

> ID：15988904
> 
> 赞同：4
> 
> 时间：2013-04-13T14:33:30.257
> 
> 标签：algorithm, language-agnostic, nlp, heuristics

我正在寻找以下问题的可能简单的解决方案：

**给定一个句子的输入，**例如

```
"Absence makes the heart grow fonder." 
```

**生成一个*基本*单词列表，然后是它们的难度/复杂性**

```
[["absence", 0.5], ["make", 0.05], ["the", 0.01"], ["grow", 0.1"], ["fond", 0.5]] 
```

**让我们假设**：

*   句子中的所有单词都是有效的英语单词
*   受欢迎程度是一种可接受的难度/复杂性衡量标准
*   可以以任何建设性方式理解基本词（见下文）
*   难度/复杂性从 0 分到 1 分 - 令人难以置信
*   难度偏差是可以的，最好被误认为是容易而不是其他方式
*   工作简单的解决方案优于完美但复杂的东西
*   **[编辑]**没有与用户的交互
*   **[编辑]**我们可以处理任何正确的英文输入
*   **[编辑]**一个词并不比它的基本形式更难（因为作为聪明的人，如果我们知道*快乐，我们就会不快乐**地*创造出来），除非它创造了一个新词（*不太可能*和喜欢不*一样*）

 *****总体思路：**

我考虑使用 Google 搜索或[Wordcount 之](http://www.wordcount.org/main.php)类的网站来估计可能表明其难度的单词流行度。但是，两种解决方案都会根据输入单词的形式给出不同的结果。谷歌给出了 316m 的结果，但 11m 的结果是*foder ，而**Wordcount*给出了 6k 和 54k 的排名。

将单词转换为其基本形式不是必须的，但可以解决歧义问题（并且可以轻松创建字典链接），但这不是一项简单的任务，我觉得它的意义值得商榷。显然应该采用*喜欢而不是**喜欢*，但是调查*相信*而不是*难以置信*似乎是一种矫枉过正（**[编辑]**这可能不是最好的例子，但有一段时间在修改基本词时我们会创建一个新词，*例如*->*可能*) 和*门卫*之类的词不应该一分为二。

一些关于什么应该被认为是基本词的想法可以[在维基百科](http://en.wikipedia.org/wiki/Basic_English#Rules)上找到，但也许更简单的确定它的方法是使用字典。例如，根据dictionary.reference.com，[难以置信是一个基本词](http://dictionary.reference.com/browse/unbelievable)，而[喜爱来自喜爱](http://dictionary.reference.com/browse/fonder)，但[成长与成长不同](http://dictionary.reference.com/browse/growing)

**解决方案的想法：**

在我看来，处理该问题的最佳方法是使用字典查找*基本*单词，应用一些 Wikipedia 规则，然后使用 Wordcount（可能与 Google 搜索次数相结合）来估计难度。

尽管如此，可能（可能是更简单和更好的）方法或准备使用算法。我将不胜感激任何解决此问题且易于实施的解决方案。也许我只是想重新发明轮子（或者你知道我的方法会很好用，我在浪费时间思考而不是编写我所拥有的东西）。但是，我宁愿避免实施频率分析算法或准备文本语料库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:25:42.030

一些术语：

*   词的核心部分称为*词干*或*词根*。稍后将详细介绍这种区别。您可以将词根/词干视为承载单词主要含义并将出现在字典中的部分。
*   （英文）大多数单词由一个*词根*（例外：像“windshield”这样的复合词）/一个词干和零个或多个*词缀*组成：词根/词干之后的词缀称为*后缀*，词根/之前的词缀词干称为*前缀*。示例：“驱动程序”=“驱动器”（根/词干）+后缀“-er”；“unkind”=“kind”（根/词干）+“un-”（前缀）。
*   后缀/前缀（=词缀）可以是*屈折*的或*派生*的。例如，在英语中，第三人称单数动词`s`的末尾有一个：“I drive”但“He drive-s”。这些一致的后缀不会改变单词的类别：“drive”是动词，与屈折的“s”无关。另一方面，像“-er”这样的后缀是*派生*的：它需要一个动词（例如“drive”）并将其变成一个名词（例如“driver”）
*   词干是没有任何*屈折*词缀的单词片段，而词根是没有任何*派生*词缀的单词片段。例如，复数名词“drivers”可分解为“drive”（词根）+“er”（派生词缀，形成新*词干*“driver”）+“s”（复数）。
*   派生单词“基本”形式的过程称为“词干”。

所以，有了这个术语，对于你的任务来说，最有用的事情似乎是*阻止*你遇到的每一种形式，即删除所有的*屈折*词缀，并保留派生词缀，因为派生词缀可以改变这个词的常见程度被认为是。想一想：如果我用英语告诉你一个新词，你[总是知道如何使它复数](http://en.wikipedia.org/wiki/Wug_test)，第三人称单数，但是，您可能不知道可以从中派生出的其他一些词）。英语是一种缺乏屈折变化的语言，不需要担心很多屈折变化后缀（谷歌搜索很好地去除了它们，所以也许你可以通过谷歌搜索运行你的词表来使用谷歌的词干引擎得到突出显示的结果）：

*   第三个单数动词`-s`：“I drive”/“He drive-s”
*   名词复数 `-s'：“One wug”/“Two wug-s”。注意这里有一些不规则的形式，比如“孩子”、“牛”、“鹅”等，我想我不会担心这些。
*   动词过去时形式和分词形式。常规的很容易：过去时有`-ed`过去时和过去分词（“I walk”/“I walk-ed”/“I had walk-ed”），但有很多不规则的（fall/跌倒/跌倒，潜水/鸽子/潜水？等）。也许列出这些？
*   动词`-ing`形式：“walk”/“walk-ing”
*   形容词比较级`-er`和最高级`-est`。有一些不规则的/补充的（“好”/“更好”/“最好”），但这些不应该是一个大问题。

这些是英语中主要的屈折词缀：我可能忘记了一些你可以通过阅读语言学入门书籍来发现的。还有一些边缘情况，例如“un-”，它是如此混杂，以至于我们可能认为它是屈折的。有关这些类型的更多信息，请参阅[Level 1 vs. Level 2 affixation](http://www-01.sil.org/linguistics/GlossaryOfLinguisticTerms/WhatIsLexicalPhonology.htm)，但出于您的目的，我会将这些情况视为派生，而不是阻止它们。

至于“分级”各种词干的常见程度，除了谷歌之外，您还可以使用各种免费提供的[文本语料库](http://en.wikipedia.org/wiki/Text_corpus)。链接到的维基百科文章有一些免费语料库的链接，您可以通过谷歌搜索找到更多链接。从这些语料库中，您可以构建每个词干的频率计数，并使用它来判断形式的常见程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:06:03.333

对于寻找“基本”表格的任务，恐怕没有简单的解决方案。我的基础是我对机器学习教科书的记忆，其中语言分析是其中的一部分。您需要一些数据库，您可以从中获取它们。

同时，请注意，人们在日常语言中使用的词汇量并不大。您可以随时询问用户您从未见过的世界的基本形式是什么。（除非这是你的作业，它会被自动检查）

最终，如果您不关心覆盖所有单词，您可以创建简单的数据库，其中包含最常见单词的不同形式，然后尝试对不太常见的单词使用语法规则（这将是一个很好的近似，实际上，英语中最常见的单词是不规则的，而不常见的单词是规则的，因为它们的原始形式已被遗忘）。

但是请注意，我不是专家，我只是想提供帮助:-)***

# maven - Maven 多模块执行点

> ID：15988906
> 
> 赞同：2
> 
> 时间：2013-04-13T14:33:43.513
> 
> 标签：maven, maven-2, maven-3, m2eclipse

我想使用由 4 个模块组成的 Maven 多模块：域模块、DAL 模块、服务模块和 Web 模块。所有这些模块都有一个父项目。问题是我不知道执行点在哪里？我应该从 Web 模块运行它吗？还是来自父 Maven 项目？如果我从父项目运行它，父项目的包装是“POM”而不是“WAR”？要改吗？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:46:17.380

如果你有这样的结构，你必须从父模块运行它：

```
root
  +-- pom.xml
       +--- domain
       !     +-- pom.xml 
       +--- dal
       !     +-- pom.xml 
       +--- service
       !     +-- pom.xml 
       +--- web
             +-- pom.xml 
```

这意味着进入**根**目录并执行**mvn clean**或**mvn package**之类的操作。

而且您不应该**更改**根项目的包装。

# f# - 为什么在 F# 中使用默认参数（FSharpOption ) 是引用类型吗？

> ID：15988913
> 
> 赞同：10
> 
> 时间：2013-04-13T14:34:36.783
> 
> 标签：f#, optional-arguments

C# 和 F# 对默认（或可选）参数有不同的实现。

在 C# 语言中，当您向参数添加默认值时，您不会更改其基础类型（我的意思是参数的类型）。实际上，C# 中的可选参数是一种轻量级的语法糖：

```
class CSharpOptionalArgs
{
  public static void Foo(int n = 0) {}
}

// Somewhere in the call site

CSharpOptionalArgs.Foo();
// Call to Foo() will be transformed by C# compiler
// *at compile time* to something like:
const int nArg = GetFoosDefaultArgFromTheMetadata();
CSharpOptionalArgs.Foo(nArg); 
```

但 F# 以不同的方式实现此功能。与 C# 不同，F# 可选参数在*被调用者*站点而不是在*调用者*站点解析：

```
type FSharpOptionalArgs() =
    static let defaultValue() = 42

    static member public Foo(?xArg) =
        // Callee site decides what value to use if caller does not specifies it
        let x = defaultArg xArg (defaultValue())
        printfn "x is %d" x 
```

这种实现是绝对合理的，而且功能更强大。C# 可选参数仅限于编译时常量（因为可选参数存储在程序集元数据中）。在 F# 中，默认值可能不太明显，但我们可以使用任意表达式作为默认值。到目前为止，一切都很好。

由 F# 编译器转换`Microsoft.FSharp.Core.FSharpOption<'a>`为**引用类型**的 F# 可选参数。这意味着**在 F# 中对带有可选参数的方法的每次调用都将导致在托管头部进行额外分配，并将导致垃圾收集压力**。

```
**EDITED**
// This call will NOT lead to additional heap allocation!
FSharpOptionalArgs.Foo()
// But this one will do!
FSharpOptionalArgs.Foo(12) 
```

我不担心应用程序代码，但这种行为可能会大大降低库的性能。如果每秒调用数千次带有可选参数的库方法怎么办？

**这个实现对我来说真的很奇怪。但也许有一些规则库开发人员应该避免使用此功能，或者 F# 团队将在 F# 的未来版本中更改此行为？**

以下单元测试教授认为可选参数是引用类型：

```
[<TestFixture>]
type FSharpOptionalArgumentTests() =

    static member public Foo(?xArg) =
        // Callee site decides what value to use if caller does not specifies it
        let x = defaultArg xArg 42
        ()

    [<Test>]
    member public this.``Optional argument is a reference type``() =
        let pi = this.GetType().GetMethod("Foo").GetParameters() |> Seq.last

        // Actually every optional parameter in F# is a reference type!!
        pi.ParameterType |> should not' (equal typeof<int>)
        pi.ParameterType.IsValueType |> should be False
        () 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T19:43:48.507

Because nobody in F# team is not interesting yet in compiling "simple", `Option`-like discriminated unions as value types, supporting pattern-matching over such unions and so on :)

Remember, tuples types are heavly used in functional languages like F# (much more than default arguments), but still implemented in CLR as refererence types - nobody cares about memory allocation and functional_languages-specific GC tweaks.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-30T13:47:03.457

F# 4.1 具有 C# 可选属性兼容性。但是，如果您正在开发 F# 也将使用的功能，那么您应该使用常规语法：

`member this.M (?i : int) = let iv = defaultArg i 12 iv + 1`

F# 4.1 可选参数文档： [https ://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/members/methods](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/members/methods)

# php - 使用 php 数组生成单个 MySQL INSERT 查询

> ID：15988914
> 
> 赞同：0
> 
> 时间：2013-04-13T14:34:40.627
> 
> 标签：php, mysql, pdo, implode

我有一个动态生成的表格，列出了给定组中的所有用户，每个用户的姓名旁边都有一个复选框。组管理员可以选择/取消选择这些复选框以包含/排除用户。在 MySQL 表中，每个用户都有一个状态列，即 a`0`或 a `1`。我使用隐藏值来处理框的未选中状态，并将数据作为数组发布，每个用户的唯一 ID 作为键。

所以我的 POST 数据是一个这样的数组：

`Array ( [105] => 1 [106] => 1 [107] => 0 [108] => 0 [109] => 1 )`

现在，我需要更新数据库。这是我希望查询的外观：

```
INSERT INTO users (uid,status) VALUES (105,1),(106,1),(107,0),(108,0),(109,1)
ON DUPLICATE KEY UPDATE status=VALUES(status); 
```

当然，这不会 INSERT 任何内容，但它会使用单个查询更新每一行。

我想不通的是**如何使用数组来生成查询。特别是考虑到用户数量（数组中的项目数）会有所不同。**

* * *

经过进一步研究，我的问题似乎可以归结为：

是否可以`implode`用来转动这个数组：

`Array ( [105] => 1 [106] => 1 [107] => 0 [108] => 0 [109] => 1 )`

进入这个字符串：

`(105,1),(106,1),(107,0),(108,0),(109,1)`

可以灵活地在数组中包含更多或更少的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:20:09.300

使用**[foreach](http://php.net/manual/en/control-structures.foreach.php)**循环，您可以将数组转换为字符串，如下所示：

```
foreach( $array as $key => $value ) {

$queryString .= "($key,$value), ";

} 
```

然后，您可以使用**[rtrim()](http://php.net/manual/en/function.rtrim.php)**从查询中删除逗号，如下所示：

`rtrim( $queryString, "," )`

或者通过在你的 foreach 循环中设置一些计数函数来仅在它不是数组中的最后一项时附加一个逗号。

您的最终查询将如下所示：

```
INSERT INTO users (uid,status) VALUES $queryString ON DUPLICATE KEY UPDATE status=VALUES(status); 
```

# c# - 如何使用 .NET Process.Start() 设置应用程序的窗口文本？

> ID：15988917
> 
> 赞同：2
> 
> 时间：2013-04-13T14:35:17.263
> 
> 标签：c#, .net, console-application

以前，我使用一个`.bat`文件来运行一些控制台应用程序 .exe。当我这样做时，我可以设置进程窗口标题文本。

例如：-

`START "1 - 203.46.105.23:20600 - Sydney 24/7 #1" "C:\MyApplication\Streams\PBUcon\pbucon.exe" ini="C:\MyApplication\Streams\Active\1-203.46.105.23.20600.ini"`

所以这会执行文件 pbucon.exe 并将一些参数传递给 exe。控制台窗口标题是`1 - 203.46.105.23:20600 - Sydney 24/7 #1`

![在此处输入图像描述](https://i.stack.imgur.com/ui20Z.png)

我不确定如何使用 Process 命令以编程方式执行此操作？

这就是我正在做的...

```
var processStartInfo = new ProcessStartInfo
    {
        Arguments = string.Format("ini={0}", GameServerFile(gameServer, false)),
        FileName = newPbUconFile,
        WorkingDirectory = ActiveFolder
    };

Process.Start(processStartInfo); 
```

可能吗？

对于它的价值，我还在运行一个控制台应用程序，它启动那些 pbucon.exe（在需要时）......并做很多其他的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T15:17:05.157

在您的代码中的某处：

```
[DllImport("user32.dll")]
static extern IntPtr FindWindow(string windowClass, string windowName);

[DllImport("user32.dll")]
static extern bool SetWindowText(IntPtr hWnd, string text);

public void startProcess(string path, string title) {
   Process.Start(path);
   Thread.Sleep(1000); //Wait, the new programm must be full loaded
   IntPtr handle = FindWindow("ConsoleWindowClass", path); //get the Handle of the 
                                                           //console window
   SetWindowText(handle, title); //sets the caption
} 
```

## Pure Krome 更新

该过程没有寻找句柄，而是已经拥有该信息......所以我这样做了（因为我开始的程序是一个控制台应用程序，如果这与此有关......）

```
..... snipped .....
var process = Process.Start(path);
Thread.Sleep(1000); // Wait for the new program to start.
SetWindowText(process.MainWindowHandle, title); 
```

HTH。

# asp.net - 在 ASP.NET MVC 中将数据从视图传递到控制器

> ID：15988921
> 
> 赞同：1
> 
> 时间：2013-04-13T14:35:35.553
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我有一个模型类人

```
public class Person
{
    public string name { get; set; }
    public string area { get; set; }
} 
```

现在，在我的索引视图中，我想通过从用户和区域 =“foo”获取值名称属性来将值从视图传递到控制器。我知道如何通过如下方式从用户获取值

```
@using (Html.BeginForm())
{
  @Html.Label("Name")
  @Html.TextBoxFor(m=>m.name)

  <input type="submit" value="Name" /> 
} 
```

现在，我想要视图中的 area ="foo"。我试图用谷歌搜索这个问题，但没有找到解决方案。这是一般问题。不要像在控制器中设置值 area="foo" 这样回答。请帮助我，不要在没有评论的情况下投反对票，以便我将来改进我的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:38:57.030

在表单中添加一个名为“ **area** ”的隐藏字段，并将值设置为您想要的任何值。当您的表单发布时，隐藏字段值也将发布到您的操作方法。

```
@using (Html.BeginForm())
{
  @Html.Label("Name")
  @Html.TextBoxFor(m=>m.name)
  <input type="hidden" name="area" value="foo" />
  <input type="submit" value="Name" /> 
} 
```

现在你可以在你的**HttpPost**操作方法中得到它

```
[HttpPost]
public ActionResult Create(Person model)
{
  // check for model.name and model.area.
  // TO DO : Save and redirect
} 
```

您应该记住，人们总是可以使用诸如 firebug 之类的工具来更新浏览器中的隐藏字段值。如果它是敏感信息（***购物门户中商品的价格***），请不要从客户那里读到这样的信息。从服务器读取它。

# linux - 如何在 Linux 的 Cortex A9 上使用全局定时器？

> ID：15988925
> 
> 赞同：1
> 
> 时间：2013-04-13T14:35:58.307
> 
> 标签：linux, linux-kernel, arm, embedded-linux

我编写了一个程序来读取 OMAP4460 (Pandaboard ES) 的皮质 A9 上的全局计时器。从 OMAP4 TRM [第 4.4.1 节] 和 Cortex-A9 MPCore TRM[第 1.5 节](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0407g/CACCJFCJ.html)，我可以看出 ARM9 全局定时器寄存器的基地址是 0x4824 0200。Cortex-A9 MPCore TRM[第 4.4.1 节](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0407g/CIHHEJDF.html)说“那里是两个定时器计数器寄存器。它们是偏移量 0x00 处的低 32 位定时器计数器和偏移量 0x04" 处的高 32 位定时器计数器。所以我写的代码如下，但它因段错误而中止。我不知道怎么了？有谁知道如何在 Linux 中准确读取 cortex A9 上的全局计时器？

```
#define GLOBAL_TIMER_BASE 0X48240200U

void  rdGlobalTimer()
{
  unsigned int _low,_high;
  unsigned int addr = GLOBAL_TIMER_BASE;
  __asm__ __volatile__("ldr %0, [%1]\n\t"\
        : "=&r"(_low)
            : "r" (addr)
        : "memory");

  __asm__ __volatile__("ldr %0, [%1]\n\t"\
        : "=&r"(_high)
            : "r" (addr + 4)
        : "memory");

   printf("low:%x,high:%x\n",_low,_high);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:31:11.590

您需要映射 ( `mmap`) 该地址空间，最明显的方法是通过`/dev/mem`.

例如，尝试为您的目标编译和使用[devmem2.c](http://www.lartmaker.nl/lartware/port/devmem2.c)

```
devmem2 0X48240200 
```

你应该研究这个例子，但想法只是

```
...
if((fd = open("/dev/mem", O_RDWR | O_SYNC)) == -1) FATAL;
map_base = mmap(0, MAP_SIZE, PROT_READ | PROT_WRITE, MAP_SHARED, fd, target & ~MAP_MASK);
if(map_base == (void *) -1) FATAL;
... 
```

# java - Ubuntu 12.10：Eclipse 自动关闭

> ID：15988931
> 
> 赞同：0
> 
> 时间：2013-04-13T14:36:35.383
> 
> 标签：java, eclipse, ubuntu

我正在使用 Ubuntu 12.10。Eclipse 会自动关闭，不会在 Eclipse 日志或命令行中显示任何错误消息。

我使用的是 Eclipse Juno，然后在阅读[了这篇](https://askubuntu.com/questions/206182/eclipse-juno-4-2-1-crashes-frequently-after-upgrading-to-ubuntu12-10-from-12-0)文章后切换到了 Kepler。

我也从 OpenJDK 切换到 Oracle Java。

命令行中的消息是 [debug] execute contextualize

```
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize
[debug] execute contextualize 
```

在日志中

```
!ENTRY org.eclipse.jface 2 0 2013-04-13 18:13:39.232
!MESSAGE Keybinding conflicts occurred.  They may interfere with normal accelerator operation.
!SUBENTRY 1 org.eclipse.jface 2 0 2013-04-13 18:13:39.232
!MESSAGE A conflict occurred for CTRL+D:
Binding(CTRL+D,
ParameterizedCommand(Command(org.eclipse.debug.ui.commands.eof,EOF,
    Send end of file,
    Category(org.eclipse.debug.ui.category.run,Run/Debug,Run/Debug command category,true),
    org.eclipse.ui.internal.MakeHandlersGo@508b0f99,
    ,,true),null),
org.eclipse.ui.defaultAcceleratorConfiguration,
org.eclipse.debug.ui.console,,,system)
  Binding(CTRL+D,
ParameterizedCommand(Command(org.eclipse.ui.edit.text.delete.line,Delete Line,
    Delete a line of text,
    Category(org.eclipse.ui.category.textEditor,Text Editing,Text Editing   Commands,true),
    org.eclipse.ui.internal.MakeHandlersGo@59ad2f1e,
    ,,true),null),
org.eclipse.ui.defaultAcceleratorConfiguration,
org.eclipse.ui.textEditorScope,,,system)
!SESSION 2013-04-13 18:29:20.228 -----------------------------------------------
eclipse.buildId=4.3.0.I20130314-1330
java.version=1.7.0_17
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_IN
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os linux -ws gtk -arch x86_64 -product    org.eclipse.epp.package.jee.product

!ENTRY org.eclipse.core.resources 2 10035 2013-04-13 18:29:30.276
!MESSAGE The workspace exited with unsaved changes in the previous session; refreshing workspace to recover changes. 
```

顺便说一句，每次eclipse关闭时，这个错误都不会出现在日志中。

我正在使用以下 eGit 和 m2e

好吧，我的日志中也有这个错误。但不确定这是否会导致问题。

```
java.io.FileNotFoundException: /icons/m2.gif 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:49:03.560

Eclipse 4.2/Juno 不适用于您的 Ubuntu 12.10，而且 Eclipse 4.3/Kepler 还没有完成。回到 Eclipse 3.8 怎么样？

我个人喜欢 Springsource Tool Suite，它目前有两种风格（基于 Eclipse 4.2 和基于 Eclipse 3.8）。也许基于 3.8 的 STS 适合您。即使您不需要已经与 STS 捆绑的 Eclipse 附加组件，在 Ubuntu 13.04 或 Eclipse 4.3 发布之前，这对您来说可能是一个很好的解决方案。

你可以在这里找到 STS：[http ://www.springsource.org/downloads/sts-ggts](http://www.springsource.org/downloads/sts-ggts)

# python - 这段代码中的 op = "" 是什么意思？

> ID：15988934
> 
> 赞同：-3
> 
> 时间：2013-04-13T14:36:55.147
> 
> 标签：python, variables

```
def three():
    op = ""      
    num = int(input("Input a number:"))
    while num > 0:
        r = num % 2
        num = num // 2
        op = str(r) + op  
    print (op) 
```

*   有人可以解释代码的第二行，因为它似乎没有设置任何东西吗？
*   另外，有人还可以解释第二条底线在做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:39:02.737

`op``r`只是一个最初为空的字符串（第 2 行），它由循环内部的字符串表示形式（倒数第 2 行）前置。

假设选择的数字是 5。这些是循环的迭代：

1.  r = 5%2 = 1

    数量 = 5//2 = 2

    操作 =“1”

2.  r = 2%2 = 0

    数量 = 2//2 = 1

    操作 =“0”+“1”=“01”

3.  r = 1%2 = 1

    数 = 1//2 = 0

    操作 =“1”+“01”=“101”

总体而言，循环生成一个字符串，它是输入数字的二进制表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:39:07.707

op 需要在 while 循环中使用之前声明为变量；否则会出现语法错误。删除第一行并查看。

它被分配为“”，因为稍后它被添加到（或者更确切地说，替换为一段新的文本及其末尾的当前值）。所以只是做

```
op = None 
```

不会工作（你不能添加一个str和None）

第二条底线连接起来；r 需要转换为字符串（因为它是一个 int），因此它最终将 r 的值作为字符串添加到 op。

# grails - Vaadin：如何从视图中使用导航器？

> ID：15988936
> 
> 赞同：9
> 
> 时间：2013-04-13T14:37:01.623
> 
> 标签：grails, vaadin, vaadin7

我目前正在查看 Grails 中的 Vaadin 插件，这就是我想要实现的：

我有一个`UI`班级和两个`View`班级

UI 代码中有一个导航器：

```
class MyUI extends UI {

    @Override
    protected void init(VaadinRequest vaadinRequest) {
        Navigator navigator = new Navigator(this, this)

        navigator.addView(MainView.NAME, new MainView())

        navigator.addView(CountView.NAME, CountView.class)

    }
} 
```

在 MainView 中有一个，我希望在单击按钮后将`Button`用户重定向到。`CountView`我添加了`Button.ClickListener()`，但我无法在 中获取`Navigator`实例`View`以导航到所需的页面。

如果你能给我一个这样的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-13T16:58:27.797

你可以说

```
getUI().getNavigator().navigateTo("foobar"); 
```

或者

```
UI.getCurrent().getNavigator().navigateTo("foobar"); 
```

# java - 我使用解析正确吗？

> ID：15988939
> 
> 赞同：0
> 
> 时间：2013-04-13T14:37:20.887
> 
> 标签：java, parsing, joptionpane

据我所知，我做得对（显然不是）我试图将字符串更改为双打，因为我无法从 JPane 获得双打。它给了我一个对象未​​初始化的错误。我如何解决它？

```
import javax.swing.JOptionPane;

    public class jwindows {
    public static void main (String args[]) {

        double a, b, c;
        double sum = a + b + c;
        double product = a * b * c ;
        double avarge = a * b * c / 3;

    String stringA = JOptionPane.showInputDialog
            (null, "Please enter first number");
        a = Double.parseDouble(stringA);

    String stringB = JOptionPane.showInputDialog
            (null, "Please enter second number: ");
        b = Double.parseDouble(stringB);

    String stringC = JOptionPane.showInputDialog
            (null, "Please enter third number: ");  
        c = Double.parseDouble(stringC);

        JOptionPane.showInternalMessageDialog
        (null, "The sum of the 3 numbers is " + sum);

        JOptionPane.showInternalMessageDialog
        (null, "The avarge of the 3 numbers is " + avarge);

        JOptionPane.showInternalMessageDialog
        (null, "The sum of the 3 numbers is " + product);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:48:27.353

```
double a, b, c;
double sum = a + b + c;
double product = a * b * c ;
double avarge = a * b * c / 3; 
```

您只是定义了变量，但没有初始化它们。在获得 a、b、c 的所有值后，将它们移到右下方。

还有一件事：更改`showInternalMessageDialog`为`showMessageDialog`根本没有父组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:44:30.553

变量`a`, `b`,`c`尚未初始化（并且不包含任何值）等等`sum`，`product`因此`avarage`无法计算。要解决这个问题，只需移动`sum`,直到你解析, `product`, . 像这样：`avarge``a``b``c`

```
import javax.swing.JOptionPane;

public class jwindows {
public static void main (String args[]) {
double a, b, c;

String stringA = JOptionPane.showInputDialog(null, "Please enter first number");
a = Double.parseDouble(stringA);

String stringB = JOptionPane.showInputDialog(null, "Please enter second number: ");
b = Double.parseDouble(stringB);

String stringC = JOptionPane.showInputDialog(null, "Please enter third number: ");  
c = Double.parseDouble(stringC);

double sum = a + b + c;
double product = a * b * c ;
double avarge = a * b * c / 3;

JOptionPane.showMessageDialog(null, "The sum of the 3 numbers is " + sum);
JOptionPane.showMessageDialog(null, "The avarge of the 3 numbers is " + avarge);
JOptionPane.showMessageDialog(null, "The sum of the 3 numbers is " + product);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T14:45:01.187

您不会得到变量**sum、averge 和 product 的预期值。**您在开始时计算它的值：

```
double a, b, c;
double sum = a + b + c;
double product = a * b * c ;
double avarge = a * b * c / 3; 
```

你必须在这里得到编译错误，因为 a,b 和 c 是局部变量，在使用它们之前没有初始化。所以编译器在这种情况下会抛出错误。即使将它们初始化为某个值，在从 showInputDialog 为这些变量赋值之后，您也必须计算 sum、averge 和 prodcut 的值。

尝试使用这个：

```
sum = a+b+c;

     JOptionPane.showInternalMessageDialog
    (null, "The sum of the 3 numbers is " + sum);

     averge = (a+b+c)/3;
    JOptionPane.showInternalMessageDialog
    (null, "The avarge of the 3 numbers is " + avarge);
    product = a*b*c;
    JOptionPane.showInternalMessageDialog
    (null, "The sum of the 3 numbers is " + product); 
```

# java - Eclipselink/Derby：外键约束

> ID：15988943
> 
> 赞同：2
> 
> 时间：2013-04-13T14:37:55.887
> 
> 标签：java, foreign-keys, eclipselink, derby

我正在尝试删除一个对象`CATEGORY`。此特定对象中的所有键都是`<null>`. 此对象的 ID 也不是另一个对象中任何外键的一部分。还是我违规了。我不知道`'CCNTCTGSLCTDCTGRSD'`可能是什么。

我不知道如何进一步调查这个问题，我已经选择了对象 ( `SELECT * FROM CATEGORY WHERE ID = 1`)，并且我已经对任何其他可能具有外键 ( `SELECT * FROM xxx WHERE CATEGORY_ID = 1`) 的对象运行了查询。

```
Error code -1, SQL state 23503: DELETE on table 'CATEGORY' caused a violation of foreign key constraint 'CCNTCTGSLCTDCTGRSD' for key (1).  The statement has been rolled back. 
```

这条消息是我得到的全部。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:55:21.983

尝试使用“ij”工具连接到数据库并使用 DESCRIBE 和 SHOW INDEXES 命令来更好地了解 DDL 和表上的约束。

您还可以从 SYS.SYSCONSTRAINTS 中选择以列出数据库模式中存在的所有约束。

一些参考资料：

[http://db.apache.org/derby/docs/10.9/tools/rtoolsijcomrefdescribe.html](http://db.apache.org/derby/docs/10.9/tools/rtoolsijcomrefdescribe.html)

[http://db.apache.org/derby/docs/10.9/tools/rtoolsijcomrefshow.html](http://db.apache.org/derby/docs/10.9/tools/rtoolsijcomrefshow.html)

[http://db.apache.org/derby/docs/10.9/ref/rrefsistabs23241.html](http://db.apache.org/derby/docs/10.9/ref/rrefsistabs23241.html)

# java - Netbeans 7.3 中缺少输出

> ID：15988950
> 
> 赞同：-1
> 
> 时间：2013-04-13T14:38:47.430
> 
> 标签：java, netbeans, output

我测试了以下课程：

```
public class PrintLine {

    public static void main(String[] args) {

        System.out.println("print line!");

    }

} 
```

**Netbeans 说：**

```
run:
BUILD SUCCESSFUL (total time: 0 seconds) 
```

**在日食中** `I read >> print line! <<`

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:17:13.877

Netbeans 可能设置为为*Output*打开不同的窗口。您正在查看的是编译器输出。也许您只是说*build* 或*clean and build*。您需要按下带有*运行的小**播放*符号的按钮， 或者您可以使用键：*F6*。

 **如果*输出*窗口没有自动打开，请转到菜单*窗口*->*输出*->*输出* （或使用键*ctrl* + *4*）**

# ruby-on-rails - 测试空值或零值字符串

> ID：15988960
> 
> 赞同：121
> 
> 时间：2013-04-13T14:39:49.137
> 
> 标签：ruby-on-rails, ruby

我正在尝试在 Ruby 中有条件地设置一个变量。如果变量为 nil 或为空（0 长度字符串），我需要设置它。我想出了以下几点：

```
variable = id if variable.nil? || (!variable.nil? && variable.empty?) 
```

虽然它有效，但对我来说似乎不是很像 Ruby。是不是更简洁的表达方式？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2013-04-13T14:44:20.300

第二个子句不需要`!variable.nil?`检查——如果评估达到该点，`variable.nil`则保证为假（因为[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)）。

这应该足够了：

```
variable = id if variable.nil? || variable.empty? 
```

* * *

如果您正在使用 Ruby on Rails，[`Object.blank?`](http://api.rubyonrails.org/classes/Object.html#method-i-blank-3F)则可以解决这个确切的问题：

> 如果对象为假、空或空白字符串，则该对象为空。例如，`""`、`" "`、`nil`、`[]`和`{}`都是空白的。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2014-06-11T19:12:56.560

如果您在 Rails 中，`.blank?`应该是您正在寻找的方法：

```
a = nil
b = []
c = ""

a.blank? #=> true
b.blank? #=> true
c.blank? #=> true

d = "1"
e = ["1"]

d.blank? #=> false
e.blank? #=> false 
```

所以答案是：

```
variable = id if variable.blank? 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-04-13T15:10:03.917

```
variable = id if variable.to_s.empty? 
```

# java - Restlet：将Java接口作为@Put参数传递

> ID：15988961
> 
> 赞同：0
> 
> 时间：2013-04-13T14:39:50.293
> 
> 标签：java, rest, interface, restlet, restlet-2.0

我想将 java 接口传递给 @Put 调用：

```
public interface IMyInterface {
...
}

public class MyClass implements IMyInterface, Serializable {
...
}

public class Service extends ServerResource {

    @Put
    public void f(IMyInterface a) {
        ...
    }

} 
```

当我通过 ClientResource 调用 f() 时，我收到错误消息“不支持的媒体类型 (415)”，我认为这是因为 IMyInterface 不可序列化。

是否可以将 MyClass 对象作为 IMyInterface 传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:16:58.883

您需要借助 @XmlSeeAlso 和 @XmlJavaTypeAdapter 注释使 JSON/XML 序列化程序与接口一起工作。

看：

*   [Jersey REST/JAXB 错误，映射接口](https://stackoverflow.com/questions/4931960/jersey-rest-jaxb-error-mapping-an-interface)和
*   [http://www.attivio.com/blog/56-java-development/636-configuring-java-interfaces-to-work-with-jaxb-and-web-services.html](http://www.attivio.com/blog/56-java-development/636-configuring-java-interfaces-to-work-with-jaxb-and-web-services.html)

例如。添加不会有什么坏处

```
@Consumes("application/xml")
@Consumes("application/json")
@PUT
public void f(IMyInterface a) {
    ...
} 
```

# linux - 动态内存分配是否在缓存中分配行？

> ID：15988965
> 
> 赞同：1
> 
> 时间：2013-04-13T14:40:32.070
> 
> 标签：linux, caching, malloc, allocation

在 Linux 中在运行时使用动态内存分配会在 RAM 中分配一些内存。但是，我想知道**缓存行是否也同时在该内存的****缓存**中分配。

例如，在我使用分配一些内存`malloc()`并存储 4 个字节的数据（缓存行可能是 4 或 16 个字节）之后，缓存是否会发生写入未命中？

# php - html标签在点击时使用jquery和ajax向上或向下传输

> ID：15988966
> 
> 赞同：-9
> 
> 时间：2013-04-13T14:40:40.650
> 
> 标签：php, javascript, jquery, html, mysql

我的HTML如下：

```
<div id="line1"> <a>down</a> </div>
<div id="line2"> <a>up</a> <a>down</a> </div>
<div id="line3"> <a>up</a> <a>down</a> </div>
<div id="line4"> <a>up</a> <a>down</a> </div>
<div id="line5"> <a>up</a> </div> 
```

当我单击向上或向下链接时，我希望 div 分别交换。

我不是在寻找拖放功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T15:46:55.110

将类添加到您的上/下链接：

```
<div id="menu">
    <div id="line1"> A <a class='up'>up</a> <a class='down'>down</a></div>
    <div id="line2"> B <a class='up'>up</a> <a class='down'>down</a></div>
    <div id="line3"> C <a class='up'>up</a> <a class='down'>down</a></div>
    <div id="line4"> D <a class='up'>up</a> <a class='down'>down</a></div>
    <div id="line5"> E <a class='up'>up</a> <a class='down'>down</a></div>
</div> 
```

添加 CSS 以隐藏未使用的第一个和最后一个链接：

```
#menu > div:first-child a:first-child,
#menu > div:last-child  a:last-child { display: none; } 
```

jQuery：

```
$('#menu').on('click', 'a', function() {
    var divs = $('#menu > div');
    var p = $(this).parent();
    var pos = p.index();

    if($(this).hasClass('up')) {
        p.insertBefore(divs.eq(--pos));
    }
    else if($(this).hasClass('down')) {
        p.insertAfter(divs.eq(++pos));
    }
}); 
```

[http://jsfiddle.net/samliew/P4Xaf/](http://jsfiddle.net/samliew/P4Xaf/)

# html - 删除 Google Chrome 上的输入焦点

> ID：15988967
> 
> 赞同：10
> 
> 时间：2013-04-13T14:40:43.480
> 
> 标签：html, google-chrome, css

我正在使用 Firefox 和 Google Chrome。

在 Firefox 上我没有问题，焦点颜色是蓝色。

![火狐焦点](https://i.stack.imgur.com/3MuiP.png)

在 Chrome 上，焦点是蓝色 + 橙色。

![铬焦点](https://i.stack.imgur.com/b83J7.png)

怎么去掉橘子？它是 Chrome 中的默认输入焦点。

```
.input {
  border: 1px solid #dbdbdb;
  padding: 0 5px 0 5px;
  height: 26px;
  width: 200px;
  border-radius: 3px;
  font-family: "Arial Black", Gadget, sans-serif;
  font-size: 13px;
}

.input:focus {
  border: 1px solid rgba(51, 153, 255, 0.4);
  box-shadow: 0 0 5px rgba(51, 153, 255, 0.4);
}
```

```
<td><input type="text" name="user_login" class="input" autocomplete="off"></td>
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-13T14:42:43.797

你应该可以删除它

`outline: none`

这是一个更新的小提琴：http: [//jsfiddle.net/cvv5h/1/](http://jsfiddle.net/cvv5h/1/)

看看这个：[如何重置/删除 chrome 的输入突出显示/焦点边框？](https://stackoverflow.com/questions/2943548/best-way-to-reset-remove-chromes-input-highlighting-focus-border)

# javascript - 如何将光标置于 contenteditable div 上的子标签之前

> ID：15988968
> 
> 赞同：0
> 
> 时间：2013-04-13T14:40:44.780
> 
> 标签：javascript, jquery, html, contenteditable

我有这个html：

```
<div id="myEditor" contenteditable="true">
    Hey Jony whats up. Are you up. Also need <a id="89" contenteditable="false">Philly</a> for today's presentation
</div> 
```

如何使用 jQuery 将光标置于“a#89”之前？一直在经历各种答案，但发现它们有点过于复杂。

这是我找到的一个片段，但到目前为止没有任何价值：

```
function setCursor(contentEditableElement)
{
    var range,selection;
    if(document.createRange)//Firefox, Chrome, Opera, Safari, IE 9+
    {
        range = document.createRange();
        range.selectNodeContents(contentEditableElement);
        range.collapse(false);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
    }
    else if(document.selection)//IE 8 and lower
    { 
        range = document.body.createTextRange();
        range.moveToElementText(contentEditableElement);
        range.collapse(false);
        range.select();
    }
} 
```

# mysql - 有趣的选择mysql

> ID：15988969
> 
> 赞同：0
> 
> 时间：2013-04-13T14:40:46.343
> 
> 标签：mysql

我有三张表——用户、城市和地区。

```
users - u_id, u_city
cities - c_id, r_c_id
regions - r_id, r_alias 
```

由和由和由`users`和捆绑。我有区域表的 r_alias。是否可以计算我选择的那个地区的用户（我有 r_alias）（）。`cities``u_city = c_id``cities``regions``r_c_id = r_id``COUNT(u_id)`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:38:33.310

在附近执行选择语句会更有效

```
SELECT STRAIGHT_JOIN
  r.*,
  COUNT(u.u_id) AS `users`

FROM (
  SELECT * FROM regions
  WHERE r_alias LIKE '$region_alias'
) AS r

LEFT OUTER JOIN cities AS c ON (r.r_id = c.r_c_id)

LEFT OUTER JOIN users  AS u ON (u.u_city = c.c_id)

GROUP BY r.r_id; 
```

因为它在加入其余表之前过滤到特定区域。

*（代码在 MySQL 5.6.10 上测试过）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:45:48.193

对的，这是可能的。

你需要先加入表格，

```
SELECT  a.r_alias, COUNT(*) AS TotalUser
FROM    regions a
        INNER JOIN cities b
            ON a.r_id = b.r_c_id
GROUP   BY a.r_alias 
```

这将列出所有区域及其特定用户数量。如果要计算指定区域，只需添加`WHERE`子句。

```
SELECT  a.r_alias, COUNT(*) AS TotalUser
FROM    regions a
        INNER JOIN cities b
            ON a.r_id = b.r_c_id
WHERE   a.r_alias = 'valHERE'
GROUP   BY a.r_alias 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T14:46:48.897

尝试这个：

```
select count(u_id)
from users
join cities on u_city = c_id
join regions on r_c_id = r_id
where r_alias = "r_alias_value' 
```

# vb.net - 什么变量类型可以容纳 10^100？

> ID：15988973
> 
> 赞同：-1
> 
> 时间：2013-04-13T14:41:38.050
> 
> 标签：vb.net, math, visual-studio-2012, int, long-integer

我需要一个变量来保存最多 10^100 的数字。整数会持有它还是我应该使用它们的另一种变量类型？

我正在使用 Visual Studio 2012 和 VB.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:42:36.797

您可以使用[`BigInteger`](http://msdn.microsoft.com/en-gb/library/system.numerics.biginteger.aspx)：

> 表示任意大的有符号整数。

# sql - 从现金流入的表中返回包含我的每日资本的行列表？

> ID：15988976
> 
> 赞同：0
> 
> 时间：2013-04-13T14:41:40.997
> 
> 标签：sql

我有一个包含现金流入列表的数据库：

```
Amount Date
100    11/4/2013
150    12/4/2013
50     12/4/2013
240    13/4/2013 
```

我需要每天获取带有我的大写字母的行列表（到该日期的所有行的总和）。

在这种情况下，结果应该是：

```
Capital Date
100     11/4/2013
300     12/4/2013
540     13/4/2013 
```

我通常会附加我正在尝试的内容，但我不知道该怎么做。有人能告诉我如何在 SQL 上做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:45:56.080

```
SELECT T2.date, SUM(T1.Amount) AS SUM FROM SomeTable T1
INNER JOIN SomeTable T2 ON T1.date <=T2.date
GROUP BY T2.date 
```

# jquery - AJAX 调用后的函数

> ID：15988979
> 
> 赞同：0
> 
> 时间：2013-04-13T14:42:29.373
> 
> 标签：jquery

我有以下 AJAX 调用，它工作正常，因为检索到的数据已发布到 PHP 并出现在数据库中。但是，在发布请求之后，函数调用中不会立即触发任何内容。

在下面的代码中，我在他们的测试中放置了一个简单的 alert("Test") 命令，这也不会触发。

类似的代码确实适用于其他页面，但这是我配置为使用 JQuery UI 的第一个页面，这可能是问题吗？

我正在使用 jquery v1.9.1。

```
 function  CreateNewStaff(str, str2, str3, str4, str5, str6){
            $.post('scripts/dbc_AddNewStaff.php', { staffid:str, username:str2, firstname:str3, lastname:str4, password:str5, accesslevel:str6 },
            function(data){ 
            alert("Test");
            jsResponse =  trim_ws(data.Response);
            if (jsResponse  === 'Success')      
                {
                alert("Test");
                }
        }, "json");
    } 
```

# javascript - 检测由 CSS 过渡引起的 HTML 元素的移动

> ID：15988983
> 
> 赞同：6
> 
> 时间：2013-04-13T14:42:47.617
> 
> 标签：javascript, jquery, dom, css-transitions

我的页面上有一个 Flash 元素，由于 Flash 通常非常精细，因此需要将其定位在整数像素值处（如果您需要详细信息，请参阅[Flash 网络摄像头访问请求提示无响应）。](https://stackoverflow.com/q/3107586/1180785)

我通过将 包装在`object`中，在 上`div`设置，并使用 jQuery 设置并舍入到包含的. 那是一口，这里是代码形式：`position:absolute``object``left``top``offset``div`

```
<div id="wrapper">
    <object id="flash" blah style="position:absolute">
        <!-- blah -->
    </object>
</div>
<script>
    function update(){
        var p=$('#wrapper').offset();
        $('#flash').css({'left':Math.round(p.left),'top':Math.round(p.top)});
    }
    $(document).ready(function(){
        $(window).resize(update);
        update();
    });
</script> 
```

这一切都很好（如果上面的代码有错误，那只是把它删掉了）

这将在浏览器更改大小时更新位置，并且在某些 JavaScript 更改位置时更新它很容易，但页面也使用 CSS`transition-duration`为一些更改设置动画。我怎样才能检测到这个？至少，我想检测影响对象的过渡何时发生，并知道它何时停止。理想情况下，我想知道如何捕捉任何运动（例如由字体大小更改或图像加载引起的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:26:06.670

Could you check this fiddle: [http://jsfiddle.net/DpYNm/](http://jsfiddle.net/DpYNm/) It logs when a movement starts and ends, I'm not sure if it's the solution to your problem, but it just might help you in the right direction!

```
function checkForMove() {
if ($('#testDiv').prop('user_default_width') === undefined) {
    $('#testDiv').prop('user_default_width', $('#testDiv').width());
    $('#testDiv').prop('user_is_moving', false);
}

if ($('#testDiv').width() != $('#testDiv').prop('user_default_width') && !$('#testDiv').prop('user_is_moving')) {
    $('#log').html($('#log').html() + "Move started<br/>");
    $('#testDiv').prop('user_is_moving', true);
}
if ($('#testDiv').width() == $('#testDiv').prop('user_default_width') && $('#testDiv').prop('user_is_moving')) {
    $('#log').html($('#log').html() + "Move ended<br/>");
    $('#testDiv').prop('user_is_moving', false);
}

setTimeout(checkForMove, 1); 
```

}

```
checkForMove(); 
```

The checkForMove is called every ms and in the first call it will save the width of the div to a property. Everytime it changes (start of transition) it will log and save a helper property to ensure it will not log again until the transition is back to the default size. I'm sure you can change that part to fit it to your needs! :)

# c++ - 捕获文本文件行中的错误、跳过和报告

> ID：15988985
> 
> 赞同：0
> 
> 时间：2013-04-13T14:43:05.407
> 
> 标签：c++, string, whitespace, split

我有一个需要阅读的文本文件，每一行都是一个 IP、一个 URL，最后是一个日期，所有这些都由空格分隔。我想将每条信息分配给我的类对象“访问者”的适当变量。我有一个数组来存储它们。我的问题是当我尝试浏览文本文件时，这些行......我一直在所有文本之间出现空格。

```
class Visitors{

public:
string IP;
string URL;
string dateAccessed;

};

int main(){

Visitors hits[N];

string filename, theLine;
ifstream infile;

cout << "Enter file name (with extension):" << flush;

while(true){

    string infilename;
    getline(cin, infilename);
    infile.open(infilename.c_str());
    if(infile) break;

    cout << "Invalid file. Please enter valid file name: " << flush;

}

cout << "\n";

while(!infile.eof()){

    getline(infile, theLine);

    istringstream iss(theLine);

    do{

        string ip;
        string url;
        string date;

        iss >> ip;
        iss >> url;
        iss >> date;

        if(ip != "\n"){

             cout << "The IP: " << ip << endl;

        }

        if(url != "\n"){

             cout << "The URL: " << url << endl;

        }

        if(date != "\n"){

            cout << "The DA: " << date << endl;

        }

    }while(iss);

}

return 0;

} 
```

我尝试使用 if 语句来获取所有只是“换行符”的字符串并忽略它们，但这不起作用，所以我不完全确定如何忽略它们。我还想添加检查以查看是否有任何信息错误（日期不是 2/2/4 个字符长，URL 中缺少 www. 等）

这是一些示例输出，以更好地展示我的问题...

```
Enter file name (with extension):hits.txt

The IP: 192.168.1.101
The URL: www.cs.stonybrook.edu
The DA: 01/01/2013
The IP:
The URL:
The DA:
The IP: 192.168.1.101
The URL: www.cs.stonybrook.edu
The DA: 01/01/2013
The IP:
The URL:
The DA:
The IP: 123.112.15.151
The URL: www.cs.stonybrook.edu
The DA: 01/01/2013 
```

编辑：好的，所以我已经弄清楚如何遍历每一行，将其分解并相应地将字符串添加到它在对象数组中的类变量中所属的位置。现在的问题是我想检查每行的每个字符串是否有错误（例如，日期是不可能的，或者 IP 中的数字之一是 256 等）。发现该错误后，我想跳到下一行，进行相同的检查，如果一切正常，它将在数组中的适当位置初始化类变量。这是我的代码，可让您了解我要做什么...

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>

#define N 50

using namespace std;

class Visitors{

public:
string IP;
string URL;
string dateAccessed;

};

int main(){

Visitors hits[N];

string infilename, filename, ip, url, date;
ifstream infile;

int i = 0;

cout << "Enter file name (with extension):" << flush;

while(true){

    infilename = "";
    getline(cin, infilename);
    infile.open(infilename.c_str());
    if(infile) break;

    cout << "Invalid file. Please enter valid file name: " << flush;

}

cout << "Loading " << infilename << "..." << endl;;
cout << "\n";

while(infile.good()){

    string line;
    getline(infile, line);
    stringstream ss(line);

    if(ss >> ip >> url >> date){

        cout << "The IP: " << ip << endl;
        hits[i].IP = ip;

        cout << "The URL: " << url << endl;
        hits[i].URL = url;

        cout << "The DA: " << date << endl;
        hits[i].dateAccessed = date;

        i++;

    }

    else{

        cerr << "error" << std::endl;

    }

    /*

    if(ip.length() > 15 || ip.length() < 7){

        cout << "Found a record with an invalid IP format (not XXX.XXX.XXX.XXX)...ignoring entry";

    }

    //if(any of the numbers in the IP address are great then 255)
        //INVALID IP...IGNORE ENTRY

    else{

        cout << "The IP: " << ip << endl;
        hits[i].IP = ip;

    }

    //if(url doesnt start with www. or doesnt end with .xxx)
        //INVALID URL...IGNORE ENTRY

    else{

        cout << "The URL: " << url << endl;
        hits[i].URL = url;

    }

    //if(date.length != 10)
        //INVALID DATE FORMAT...IGNORE ENTRY

    //if(first 2 numbers in date arent between 01 and 12
         //OR if second 2 numbers arent between 01 and 31 depending on month OR etc.)
         //INVALID....IGNORE ENTRY

    else{

        cout << "The DA: " << date << endl;
        hits[i].dateAccessed = date;

    }

    i++;*/

}

return 0;

} 
```

它显然没有组织或组合起来，但它是我想要完成的总体思路。我最大的问题是如何跳过文件中的一行而不影响我在数组中的位置，或者如果所有行都有错误，它会捕获每一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:52:10.313

您不需要字符串流和内部循环：

```
#include <string>
#include <iostream>
#include <fstream>
#include <sstream>
int main(){
    std::string filename, theLine;
    std::ifstream infile;
    std::cout << "Enter file name (with extension):" << std::flush;
    while(true){
        std::string infilename;
        getline(std::cin, infilename);
        infile.open(infilename.c_str());
        if(infile) break;
        std::cout << "Invalid file. Please enter valid file name: " 
            << std::flush;
    }

    std::cout << "\n";
    std::string ip, url, date;
    while(infile.good()) {
        std::string line;
        getline(infile, line);
        std::stringstream ss(line);
        if (ss >> ip >> url >> date) {
            std::cout << "The IP: " << ip << std::endl;
            std::cout << "The URL: " << url << std::endl;
            std::cout << "The DA: " << date << std::endl;
        } else {
            std::cerr << "error" << std::endl;
        }
    }

    return 0;
} 
```

您尝试重复解析同一行而不从文件中读取新行的内部循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:52:26.750

```
cout << "Enter file name (with extension):" << flush;

string infilename;
getline(cin, infilename);
infile.open(infilename.c_str());

// You don't need to loop here. You can just exit the program. 
// But this is optional.
if(!infile) {
   cout << "Invalid file. Please enter valid file name: " << endl;
   exit(1);
}

cout << endl;

int line_nr = 1;
while(getline(infile, theLine)){
    istringstream iss(theLine);
    string ip;
    string url;
    string date;

    // A line is expected to have ip url date format. Otherwise it is error.
    if(iss >> ip >> url >> date)
        cout << "The IP: " << ip << endl;
        cout << "The URL: " << url << endl;
        cout << "The DA: " << date << endl;

     }

     else {
        cout << "Error reading data on line: " << line_nr << flush;
        break;
     }

     ++line_nr;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T14:54:58.543

最简单的解决方案（**就您必须更改多少代码而言**）只是比较`""`而不是比较`"\n"`：

```
if (ip   != "") { cout << "The IP: "  << ip   << endl; }
if (url  != "") { cout << "The URL: " << url  << endl; }
if (date != "") { cout << "The DA: "  << date << endl; } 
```

（经测试）

# python - 如何通过继承 QNetworkAccessManager 使用 createRequest 伪造请求？

> ID：15988988
> 
> 赞同：0
> 
> 时间：2013-04-13T14:43:31.340
> 
> 标签：python, qt, webkit, qtwebkit, qnetworkaccessmanager

我想从网站下载动态生成的图像。该网站有 javascript 代码和单击按钮转到上一个图像和下一个图像。我检查了 chrome 中的 http 请求和响应。除了图像名称外，请求几乎相同（数字增加，如：）`000001.jpg,000002.jpg`。现在我可以访问第一个图像并将其保存到磁盘，方法是使用自定义的 QNetworkAccessManager 子类化 QWebView。我重载了 createRequest 函数：

```
import sys,urllib,time,os
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
from PyQt4.QtNetwork import *
from PIL import Image

class NetworkAccessManager(QNetworkAccessManager):
    def __init__(self,old_manager):
    QNetworkAccessManager.__init__(self)
    self.old_manager = old_manager
    self.setCache(old_manager.cache())
    self.setCookieJar(old_manager.cookieJar())
    self.setProxy(old_manager.proxy())
    self.setProxyFactory(old_manager.proxyFactory())
    self.imreply=None
    self.reqstr=None
    self.otherreply=None
    self.current_req=None
    self.cnt=0
    self.jpgName="test.jpg"
    self.first=True
    self.ba=QByteArray()
    self.ba.clear()

    def createRequest(self, operation, request, data):
        req = request.url().toString()
        if req.contains(QString("zoom=")) and req.contains(QString("ss2jpg")) and not req.contains(QString("pi=2")):
            strreq=str(req)
            l=strreq.find("jid=")
            r=strreq.find(".jpg&a")
            self.jpgName=strreq[l+5:r+4]
            self.jpgcnt=int(strreq[l+5:r])
            print self.jpgName,self.jpgcnt
            self.imreply=QNetworkAccessManager.createRequest(self,operation, request, data)
            self.connect(self.imreply,SIGNAL("readyRead()"),self.saveImage)
            return self.imreply
        elif req.contains(QString("uf=ssr")):
            strreq=str(req)
            self.reqstr=strreq
            self.current_req=request
            r=strreq.find("?")
            self.jpgcnt=int(strreq[r-6:r])
            self.otherreply=QNetworkAccessManager.createRequest(self,operation, request, data)
            return self.otherreply
        else:
            return QNetworkAccessManager.createRequest(self,operation, request, data)

    def saveImage(self):
        if self.imreply.header(QNetworkRequest.ContentTypeHeader).toString().contains(QString("image/jpeg")) or self.imreply.header(QNetworkRequest.ContentTypeHeader).toString().contains(QString("image/png")):
            contentLen,flag = QString(self.imreply.rawHeader("Content-Length")).toInt()
            self.ba=self.ba.append(self.imreply.readAll())
            if self.ba.size() == contentLen:
            #self.ba=self.imreply.readAll()
            im=QImage.fromData(self.ba)
            im.save(self.jpgName)
            im=Image.open(self.jpgName)
            print "saving image",contentLen,self.jpgName
            im.save(self.jpgName)
            self.ba.clear()
            self.emit(SIGNAL("nextPage()"))

class dxWebView(QWebView):
    def __init__(self):
        QWebView.__init__(self)

    def clickNext(self):
        manager=self.page().networkAccessManager()
        if manager.cnt<50:
            nextreq=manager.current_req
            nexturl=manager.reqstr.replace(str(manager.jpgcnt),str(manager.jpgcnt+1))
            print "next url",nexturl
            nextreq.setUrl(QUrl(nexturl))
            manager.get(QNetworkRequest(nextreq))
            manager.cnt=manager.cnt+1

def main():
    app=QApplication(sys.argv)
    QWebSettings.globalSettings().setAttribute(QWebSettings.PluginsEnabled, True);
    view=dxWebView()
    old_manager=view.page().networkAccessManager()
    new_manager=NetworkAccessManager(old_manager)
    view.page().setNetworkAccessManager(new_manager)
    QObject.connect(new_manager,SIGNAL("nextPage()"),view.clickNext)
    url="http://www.yishuleia.cn/DrsPath.do?kid=686A67696A6F6A673134343438303337&username=gdnz2&spagenum=201&pages=50&fid=14813857&a=3fc3e380601ced0f08749c964294120e&btime=2013-04-03&etime=2013-04-23&template=bookdsr1&firstdrs=http%3A%2F%2Fbook.duxiu.com%2FbookDetail.jsp%3FdxNumber%3D000008299393%26d%3D592DC22226A893A958A6578E7D039A43"
    view.load(QUrl(url))
    view.show()
    sys.exit(app.exec_())

if __name__=='__main__':
    main() 
```

保存第一张图片后，触发clickNext，qnetworkaccessmanager发送下一个请求。但我发现manager.get(nextreq)不起作用。http分析器没有筛选任何http请求和响应。我在 clickNext 功能中错了吗？这个怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T11:04:26.693

因此，QNetworkAccessManager 是 QWebPage 对象的一部分，只要从呈现的 HTML（及其包含的任何 javascript）对资源有任何请求，就会调用 createRequest() 方法。据我了解，clickNext() 函数实际上无法以您需要的方式访问网页的实际 DOM。

如果您的目标是构建一个可以下载所有这些图片的应用程序，您可以在网站上运行一些简单的 javascript，自动点击进入“下一个”图像。然后，正如您所做的那样，您在重载的 createRequest() 函数中观察加载图像的请求。

# jquery - JavaScript 中的下拉列表不起作用

> ID：15988995
> 
> 赞同：0
> 
> 时间：2013-04-13T14:44:13.350
> 
> 标签：jquery, asp.net-mvc, html-select

我正在开发一个基于 MVC 4 的网站。当我开始开发时，我使用了 jQuery 1.7，然后是 1.8。我在一个页面上有 2 个下拉列表。我想使用第一个的值更新第二个。所以我尝试使用 onChange()。由于模板的原因，我迁移到了 jQuery 1.9，但我的代码仍然无法正常工作。有什么建议么？

```
 @Html.DropDownList("CategoryList", "---Select Category ---")
    @Html.DropDownList( "SkillList" , "-- select Skill --")
    <script>
    $('#CategoryList').onChange(function() {
        var selectedCategory = $(this).val();
        $.getJSON('@Url.Action("Category")', { id: selectedCategory }, function (months) {
            var monthsSelect = $('#SkillList');
            skillSelect.empty();
            // other of code ...

        });
    } );
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:38:58.390

从 jquery 1.9.0v 中删除/修改了几个 API。要了解 1.9v 中所做的所有更改，请参阅[此](http://jquery.com/upgrade-guide/1.9/)链接。您需要在您的应用程序中包含 jquery 迁移脚本才能使用那些已弃用的功能。

请参阅以下链接。

[http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)

[https://github.com/jquery/jquery-migrate/](https://github.com/jquery/jquery-migrate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:48:41.340

我认为您的问题出在此处...您设置了一个名为 monthsSelect 的变量，但随后尝试访问不同的变量名称。您是否需要将 SkillSelect 变量设置为指向另一个列表？或者也许这是一个错字，你有错误的变量名？

```
 var monthsSelect = $('#SkillList');
        skillSelect.empty(); 
```