# StackOverflow 问答 14768000-14768999

# java - 没有图像的小程序闪烁

> ID：14768005
> 
> 赞同：0
> 
> 时间：2013-02-08T07:53:53.160
> 
> 标签：java, applet, screen

我目前正在构建一个小程序并遇到了更新/重绘问题。我绘制了更新鼠标坐标的字符串。当我移动鼠标时，问题就开始了。坐标更新（通过方法`repaint()`内的`mouseMoved()`方式，但小程序闪烁，直到我停止移动。

我试过寻找解决方案，但他们只处理存在图像的情况。我的小程序只包含按钮、文本 ( `drawString()`) 和渐变背景。当它闪烁时，除了按钮之外的所有东西都会闪烁。在处理不使用图像文件的小程序时，是否有其他方法可以停止闪烁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:45:52.460

在 Java Swing 中有一个[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html) (EDT) 的概念：

您可以尝试输入您的`Applet.init()`方法

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        createAndShowGUI();
    }
}); 
```

并仅在 EDT 中执行所有相关的 GUI 内容。

# c# - 简单冒泡排序 c#

> ID：14768010
> 
> 赞同：30
> 
> 时间：2013-02-08T07:54:04.033
> 
> 标签：c#, arrays, sorting, bubble-sort

```
int[] arr = {800,11,50,771,649,770,240, 9};

int temp = 0;

for (int write = 0; write < arr.Length; write++)
{
    for (int sort = 0; sort < arr.Length - 1; sort++)
    {
        if (arr[sort] > arr[sort + 1])
        {
            temp = arr[sort + 1];
            arr[sort + 1] = arr[sort];
            arr[sort] = temp;
        }       
    }   
    Console.Write("{0} ", arr[write]);  
} 
```

我正在尝试做的只是对这个数组进行简单的冒泡排序。我想弄清楚为什么排序搞砸了。例如，这里是数组时`{800,11,50,771,649,770,240, 9}`：

这是显示的内容： `11, 50, 649, 9, 649, 770, 771, 800`

我在想我可能会在比较中遗漏一些东西。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-08T07:59:28.270

不，您的算法有效，但您的`Write`操作在外循环中放错了位置。

```
int[] arr = { 800, 11, 50, 771, 649, 770, 240, 9 };

int temp = 0;

for (int write = 0; write < arr.Length; write++) {
    for (int sort = 0; sort < arr.Length - 1; sort++) {
        if (arr[sort] > arr[sort + 1]) {
            temp = arr[sort + 1];
            arr[sort + 1] = arr[sort];
            arr[sort] = temp;
        }
    }
}

for (int i = 0; i < arr.Length; i++)
    Console.Write(arr[i] + " ");

Console.ReadKey(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-22T10:14:34.520

这个对我有用

```
public static int[] SortArray(int[] array)
{
    int length = array.Length;

    int temp = array[0];

    for (int i = 0; i < length; i++)
    {
        for (int j = i+1; j < length; j++)
        {
            if (array[i] > array[j])
            {
                temp = array[i];

                array[i] = array[j];

                array[j] = temp;
            }
        }
    }

    return array;        
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-14T16:38:37.580

```
public static void BubbleSort(int[] a)
    {

       for (int i = 1; i <= a.Length - 1; ++i)

            for (int j = 0; j < a.Length - i; ++j)

                if (a[j] > a[j + 1])

                    Swap(ref a[j], ref a[j + 1]);

    }

    public static void Swap(ref int x, ref int y)
    {
        int temp = x;
        x = y;
        y = temp;
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-01T19:23:54.900

```
int[] arr = { 800, 11, 50, 771, 649, 770, 240, 9 };

int temp = 0;

for (int write = 0; write < arr.Length; write++)
{
    for (int sort = 0; sort < arr.Length - 1 - write ; sort++)
    {
        if (arr[sort] > arr[sort + 1])
        {
            temp = arr[sort + 1];
            arr[sort + 1] = arr[sort];
            arr[sort] = temp;
        }
    }
}

for (int i = 0; i < arr.Length; i++) Console.Write(arr[i] + " ");

Console.ReadKey(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-12T15:36:22.127

我看到有人将此示例用作工作申请测试的一部分。我对他的反馈是，当数组大部分被排序时，它缺乏从外循环的逃逸。

考虑在这种情况下会发生什么：

```
int[] arr = {1,2,3,4,5,6,7,8}; 
```

这是更有意义的事情：

```
int[] arr = {1,2,3,4,5,6,7,8};

int temp = 0;
int loopCount=0;
bool doBreak=true;

for (int write = 0; write < arr.Length; write++)
{
    doBreak=true;
    for (int sort = 0; sort < arr.Length - 1; sort++)
    {
        if (arr[sort] > arr[sort + 1])
        {
            temp = arr[sort + 1];
            arr[sort + 1] = arr[sort];
            arr[sort] = temp;
            doBreak=false;
        }
        loopCount++;
    }
    if(doBreak){ break; /*early escape*/ }
}

Console.WriteLine(loopCount);
for (int i = 0; i < arr.Length; i++) Console.Write(arr[i] + " "); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-16T11:38:21.690

我想在接受的答案中添加一些不同的东西：也可以减少迭代次数，如下所示。

```
int[] arr = { 800, 11, 50, 771, 649, 770, 240, 9 };

int temp = 0;
int arrLength = arr.Length;

for (int write = 0; write < arr.Length - 1; write++, arrLength--)
{
    for (int sort = 0; sort < arrLength - 1; sort++)
    {
        if (arr[sort] > arr[sort + 1])
        {
            temp = arr[sort + 1];
            arr[sort + 1] = arr[sort];
            arr[sort] = temp;
        }
    }
}

foreach (var item in arr)
{
    Console.WriteLine(item);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T08:07:37.007

你`Console.Write("{0} ", arr[write]);`的太早了。您在**排序仍在进行时**打印值。例如，您正在打印`9`为数组中的索引 3，但在循环的下一次迭代中，它`9`已移至索引 2 并`240`已移至索引 3...但您的外部循环已向前移动，因此它`649`第二次打印并且`240`永远不会被打印。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-09T20:53:45.060

```
int[] array = new int[10] { 13, 2, 5, 8, 23, 90, 41, 4, 77, 61 };

for (int i = 10; i > 0; i--)
{
    for (int j = 0; j < 9; j++)
    {
        if (array[j] > array[j + 1])
        {
            int temp = array[j];
            array[j] = array[j + 1];
            array[j + 1] = temp;
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-06T22:55:38.223

```
 static bool BubbleSort(ref List<int> myList, int number)
    {
        if (number == 1)
            return true;
        for (int i = 0; i < number; i++)
        {
            if ((i + 1 < number) && (myList[i] > myList[i + 1]))
            {
                int temp = myList[i];
                myList[i] = myList[i + 1];
                myList[i + 1] = temp;
            }
            else
                continue;
        }
        return BubbleSort(ref myList, number - 1);
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-24T15:26:13.367

只是另一个示例，但使用外部 WHILE 循环而不是 FOR：

```
public static void Bubble()
    {
        int[] data = { 5, 4, 3, 2, 1 };
        bool newLoopNeeded = false;
        int temp;
        int loop = 0;

        while (!newLoopNeeded)
        {
            newLoopNeeded = true;
            for (int i = 0; i < data.Length - 1; i++)
            {
                if (data[i + 1] < data[i])
                {
                    temp = data[i];
                    data[i] = data[i + 1];
                    data[i + 1] = temp;
                    newLoopNeeded = false;
                }
                loop++;
            }
        }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-07T22:27:46.817

```
public static int[] BubbleSort(int[] arr)
{
   int length = arr.Length();

   while (length > 0)
   {
      int newLength = 0;
      for (int i = 1; i < length; i++)
      {
         if (arr[i - 1] > arr[i])
         {
            Swap(ref arr[i - 1], ref arr[i]); 
            newLength = i;   
         }   
      }
      length = newLength;
   }
}

public static void Swap(ref int x, ref int y)
{
   int temp = y;
   y = x;
   x = temp;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-27T03:10:16.640

带排序方向的冒泡排序 -

```
using System;

public class Program
{
    public static void Main(string[] args)
    {
        var input = new[] { 800, 11, 50, 771, 649, 770, 240, 9 };

        BubbleSort(input);

        Array.ForEach(input, Console.WriteLine);

        Console.ReadKey();
    }

    public enum Direction
    {
        Ascending = 0,
        Descending
    }

    public static void BubbleSort(int[] input, Direction direction = Direction.Ascending)
    {
        bool swapped;
        var length = input.Length;

        do
        {
            swapped = false;
            for (var index = 0; index < length - 1; index++)
            {
                var needSwap = direction == Direction.Ascending ? input[index] > input[index + 1] : input[index] < input[index + 1];

                if (needSwap)
                {
                    var temp = input[index];
                    input[index] = input[index + 1];
                    input[index + 1] = temp;
                    swapped = true;
                }
            }
        } while (swapped);
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-07T12:20:45.010

这是我使用递归方法编写的：

```
 public static int[] BubbleSort(int[] input)
    {
        bool isSorted = true;
        for (int i = 0; i < input.Length; i++)
        {
            if (i != input.Length - 1 && input[i] > input[i + 1])
            {
                isSorted = false;
                int temp = input[i];
                input[i] = input[i + 1];
                input[i + 1] = temp;
            }
        }
        return isSorted ? input : BubbleSort(input);
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-02-27T01:09:25.680

它以更优雅的方式做同样的事情。

```
var arrayValues = new[] { 99, 12, 11, 300, 400, 10, 9, 3, 6, 5, 7, 8};
for (var mainLoop = 0; mainLoop < arrayValues.Length; mainLoop++)
{
   for (var innerLoop = mainLoop + 1; innerLoop < arrayValues.Length; innerLoop++)
   {
       if (arrayValues[mainLoop] <= arrayValues[innerLoop])
       {
         continue;
       }

       var temp = arrayValues[mainLoop];
       arrayValues[mainLoop] = arrayValues[innerLoop];
       arrayValues[innerLoop] = temp;
  }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-04-22T01:32:03.430

所以我把我的作为一个递归函数（不需要嵌套循环），如果这效率低下（与其他解决方案相比），也许有人可以评论。

```
 public static int[] BubbleSort(int[] arrayOfValues)
    {
        var swapOccurred = false;

        for (var i = 0; i < arrayOfValues.Length; i++)
        {
            if (i == arrayOfValues.Length - 1)
                continue;

            if (arrayOfValues[i] > arrayOfValues[i + 1])
            {
                //swap values
                var current = arrayOfValues[i];
                var next = arrayOfValues[i + 1];

                arrayOfValues[i] = next;
                arrayOfValues[i + 1] = current;

                swapOccurred = true;
            }
        }

        if (swapOccurred)
        {
            // keep going until no further swaps are required:
            BubbleSort(arrayOfValues);
        }

        return arrayOfValues;
    } 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-09-20T18:55:36.243

```
int[] arr = { 800, 11, 50, 771, 649, 770, 240, 9 };
for (int i = 0; i < arr.Length; i++)
{
    for (int j = i; j < arr.Length ; j++)
    {
        if (arr[j] < arr[i])
        {
            int temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
        }
    }
}
Console.ReadLine(); 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-09-07T12:18:06.117

```
 using System; 
 using System.Collections.Generic; 
 using System.Linq;  
using System.Text; 
 using System.Threading.Tasks;

namespace Practice {
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Enter the size");
            int n = Convert.ToInt32(Console.ReadLine());
            int[] mynum = new int[n];
            Console.WriteLine("Enter the Numbers");
            for (int p = 0; p < n;p++ )
            {
                mynum[p] = Convert.ToInt32(Console.ReadLine());

            }
            Console.WriteLine("The number are");
                foreach(int p in mynum)
                {
                    Console.WriteLine(p);
                }
                for (int i = 0; i < n;i++ )
                {
                    for(int j=i+1;j<n;j++)
                    {
                        if(mynum[i]>mynum[j])
                        {
                            int x = mynum[j];
                            mynum[j] = mynum[i];
                            mynum[i] = x;
                        }
                    }
                }
                Console.WriteLine("Sortrd data is-");
            foreach(int p in mynum)
            {
                Console.WriteLine(p);
            }
                    Console.ReadLine();
        }
    } } 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2017-10-11T21:40:22.153

```
 public void BubbleSortNum()
    {
        int[] a = {10,5,30,25,40,20};
        int length = a.Length;
        int temp = 0; 
        for (int i = 0; i <length; i++)
        {               
            for(int j=i;j<length; j++)
            {
                if (a[i]>a[j])
                {
                    temp = a[j];
                    a[j] = a[i];
                    a[i] = temp;
                }     
            }
           Console.WriteLine(a[i]);
        }       
     } 
```

# javascript - 使用 jQuery 的浏览器返回和关闭事件

> ID：14768014
> 
> 赞同：1
> 
> 时间：2013-02-08T07:54:24.573
> 
> 标签：javascript, jquery

一旦单击浏览器后退按钮以及使用 jQuery 关闭浏览器，尝试使会话无效。如何捕获浏览器返回按钮事件和浏览器关闭事件？javascript有什么优势吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:09:52.063

希望这可以帮助您：

[http://api.jquery.com/unload/](http://api.jquery.com/unload/)

> 当用户离开页面时，unload 事件被发送到窗口元素。这可能意味着许多事情之一。用户可以单击链接离开页面，或者在地址栏中输入新的 URL。前进和后退按钮将触发事件。关闭浏览器窗口将导致事件被触发。即使是页面重新加载也会首先创建一个卸载事件。

# highcharts - Highcharts 性能增强方法？

> ID：14768021
> 
> 赞同：10
> 
> 时间：2013-02-08T07:54:54.623
> 
> 标签：highcharts

由于大量数据（过去 10 年每天一个数据），我的 highchart 图表加载非常缓慢。我已经关掉了动画。而且它仍然很慢。有没有办法加快或提高性能以允许更快的加载时间并能够在没有任何延迟的情况下放大？谢谢。不过，带有 highchart 的网页只有 77kb。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T16:31:00.290

您可以使用`dataGrouping`并设置`enableMouseTracking`为`false`.

**启用鼠标跟踪**：`Boolean`

> 启用或禁用特定系列的鼠标跟踪。这包括点工具提示和图表和点上的点击事件。使用共享工具提示（股票图表中的默认设置）时，不需要鼠标跟踪。对于大型数据集，它可以提高性能。默认为真。

**更新**

在它的文档上找到以下内容。

> **如何从 Highcharts 中获得最佳性能？**
> 
> 在处理具有大量数据点的系列时，需要考虑一些事项。
> 
> 对于线图，建议您禁用点标记，因为这些会增加性能开销。见`http://highcharts.com/demo/line-time-series`。
> 
> 禁用阴影可以提高性能，因为为每个包含阴影的形状创建了三个阴影元素。
> 
> 对于大型列系列，建议您禁用初始动画 plotOptions.column.animation，至少对于基于 VML 的浏览器。区分快速 SVG 浏览器和较慢 VML 浏览器的最佳方法是使用 Highcharts.svg 布尔属性。

**参考**

*   [启用鼠标跟踪](http://api.highcharts.com/highstock#plotOptions.series.enableMouseTracking)
*   [数据分组](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping)
*   [常问问题](http://www.highcharts.com/docs/getting-started/frequently-asked-questions)

# css - jquery datepicker 创建不必要的空格

> ID：14768028
> 
> 赞同：0
> 
> 时间：2013-02-08T07:55:30.817
> 
> 标签：css, jquery-ui-datepicker

jquery datepicker 功能非常好。只是尺寸太大了。我试过了：

```
ui-datepicker{
font-size:10px;} 
```

调整它的大小，但结果在每行上方和下方都有不必要的空格。如何删除它？我只是 CSS 新手。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:20:16.980

在您的示例`ui-datepicker`中缺少一个点。尝试更改`font-size`以下内容：`.ui-datepicker`或`.ui-datepicker table`

在演示站点[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)上，字体大小可以正常工作，并且日单元格会根据定义的字体大小进行缩放。转到该页面并使用浏览器中的开发人员工具栏进行测试（例如 Firefox 中的 Firebug）。使用此类开发人员工具可以让您更改 CSS 并直接查看更改。

# boost-asio - asio链和数据同步

> ID：14768033
> 
> 赞同：0
> 
> 时间：2013-02-08T07:55:49.627
> 
> 标签：boost-asio

我发现 asio 关于同步的文档`strand`是晦涩难懂的。它只是说在线程池设计 asio 应用程序中，处理程序可以在任何具有 call 的线程中运行`io_service::run()`。使用 a`strand`扭曲这些处理程序可以使它们的执行正确并发。在它的[example3](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/http/server3/connection.cpp)中，所有`handle_read`的都是 wrap by `strand`，我认为`Connection`类中的变量，比如`buffer`已经同步过`strand`，不同的线程调用`handle_read`会得到最新的数据，没关系。但是如果在类中定义了`Connection`一个也被处理程序访问的数据成员没有被包装`strand`呢？我认为这是一个问题，不是吗？

在其文档[example3](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/http/server3/server.cpp)中，为什么`handle_accept`不被 a 包裹`strand`？由`new_connection_`多线程访问：`new_connection_.reset`由线程A`server::handle_accept`调用并由线程B调用。我认为它需要在这里进行数据同步，否则线程B可能会使用`new_connection_`尚未调用其重置的过期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:04:54.933

我认为您以某种方式错过了**strand**的含义。*它不同步数据访问。*它同步处理程序调用。这可以理解为“不会同时调用给定**链包裹的所有处理程序”。**

所以，你的第一个问题：如果某些处理程序没有被 strand 包裹 - 现在可以同时调用它。因此它会受到同步问题和/或 RC 的影响。请注意，如果您包裹在一个地方并不意味着您受到 RC 的保护；这应该在每次通话中完成。因为 strand 不知道你从其他线程调用什么，除非你使用`.wrap`

第二个问题：在给定的示例**start_accept**设置接受处理程序**handle_accept**，并且**handle_accept**正在设置新的接受处理程序（通过调用**start_accept**）。因此，它们不会被同时调用，因为您不能创建 2 个或更多**async_accept**事件。当然，如果其他线程为同一个“服务器”实例调用**start_accept** - 这个例子可能/将会失败，但这样做是一个明显的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:24:30.670

[HTTP Server 3](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/http/server3/connection.cpp)的设计方式使其实际上不需要`strand`.

Boost.Asio 的一个基本特征是，对于给定的操作，处理程序最多会被调用一次。这种行为允许将异步编程的调用路径更多地设想为调用链。

例如，检查`server`接受连接的图示调用链：

```
server::server(...)
{
  start_accept();  --.
}                    |
    .----------------'
    |      .----------------------------------------.
    V      V                                        |
void server::start_accept()                         |
{                                                   |
  new_connection_.reset(new connection(...));       |
  acceptor_.async_accept(..., handle_accept);  --.  |
}                                                |  |
    .--------------------------------------------'  |
    |                                               |
    V                                               |
void server::handle_accept(...)                     |
{                                                   |
  if (!error)                                       |
  {                                                 |
    new_connection_->start();                       |
  }                                                 |    
  start_accept();  ---------------------------------'
} 
```

如图所示，仅存在一个异步事件链。由于不可能在 上同时执行处理程序或操作`new_connection`，因此据说它在隐式链中运行。处理程序运行的线程`server::handle_accept`无关紧要。

这个问题回答[了](https://stackoverflow.com/questions/12794107/#12801042)`connection::handle_read`调用链和有关股的更多详细信息。

# java - java泛型1.6早期版本和更高版本中的歧义

> ID：14768037
> 
> 赞同：1
> 
> 时间：2013-02-08T07:56:17.427
> 
> 标签：java, generics, jdk1.6

最近我遇到了一个奇怪的问题`Java generics`。我用下面的代码片段简化了问题：

```
public static void main(String[] args) {
        String s = "Hello";
        System.out.println(blindlyReturnGetObject());
    }

    private static <T> T getObject() {
        return (T) new Object();
    }

    private static <T> T blindlyReturnGetObject() {
        return getObject();
    } 
```

在`JDK 1.6.0_03`早期版本的情况下，我们遇到了臭名昭著的编译错误

```
type parameters of <T>T cannot be determined; no unique maximal instance exists for type variable T with upper bounds T,java.lang.Object 
```

而此代码在`JDK 1.6.0_26`及更高版本中完美运行。

`jdk 1.6`由于我们的构建服务器仍在早期版本中运行，是否有办法解决早期版本的这个问题`jdk 1.6`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:16:04.703

在谷歌搜索与此问题相关时，我遇到了`sun`与此问题相关的错误`generics type inference`。

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6302954](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6302954)

所以这被发现在以后的版本中得到修复，`jdk 1.6.0_20`因此它正在工作`jdk 1.6.0_26`

认为它值得分享。

# jquery - 特殊字符验证

> ID：14768042
> 
> 赞同：0
> 
> 时间：2013-02-08T07:56:30.983
> 
> 标签：jquery

我有一个这样的 JQuery 代码：

```
// Validation to avoid non alphanumeric characters from being typed
function alphanumeric(eventSource) {
    var numaric = eventSource.val();
    for (var j = 0; j < numaric.length; j++) {
        var alphaa = numaric.charAt(j);
        var hh = alphaa.charCodeAt(0);
        // If the value contains non alphanumeric characters
        if (!((hh > 47 && hh < 58) || (hh > 64 && hh < 91) || (hh > 96 && hh < 123))) {
            eventSource.val(numaric.substring(0, j) + numaric.substring(j + 1,  numaric.length));
        }
    }
} 
```

我正在尝试验证文本框输入的特殊字符。但不知何故，它也验证了字符代码为 32 的空格（键盘上的空格键）。请提供建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:03:00.577

试试这个代码

```
var regtest = 'dfdsfdsf23424';
var letters = /^[a-zA-Z0-9]+$/;    
var result = letters.test(regtest );
console.log(result);​//true

regtest = 'dfdsfdsf 23424';
result = letters.test(regtest );
console.log(result);​//false 
```

测试小提琴[http://jsfiddle.net/Stw2Y/](http://jsfiddle.net/Stw2Y/)

对于您的功能，您将避免使用特殊字符，然后试试这个

```
var letters = /^[a-zA-Z0-9]+$/;    
function alphanumeric(eventSource) {
    var numaric = eventSource.val();
    var str='';
    for (var j = 0; j < numaric.length; j++) {
        var alphaa = numaric.charAt(j);
        // If the value contains non alphanumeric characters
        if(letters.test(alphaa))
        {
             str+=alphaa;
        }
    }
    eventSource.val(str);   
} 
```

在这里测试[http://jsfiddle.net/Stw2Y/1/](http://jsfiddle.net/Stw2Y/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:05:39.670

试试这个 ：

```
 function alphanumeric(eventSource) {
            var numaric = eventSource.val();
            for (var j = 0; j < numaric.length; j++) {
                var alphaa = numaric.charAt(j);
                var hh = String.charCodeAt(alphaa);                
                // If the value contains non alphanumeric characters
                if (hh != 32 && !((hh > 47 && hh < 58) || (hh > 64 && hh < 91) || (hh > 96 && hh < 123))) {
                    eventSource.val(numaric.substring(0, j) + numaric.substring(j + 1, numaric.length));
                }
            }
        } 
```

# java - JSESSIONID 未过期，SPRING_SECURITY_REMEMBER_ME 已过期

> ID：14768045
> 
> 赞同：5
> 
> 时间：2013-02-08T07:56:47.333
> 
> 标签：java, spring-security, session-cookies

因此，我在我的应用程序中使用了 spring security 并在选中复选框时引入了记住我的功能。

我想知道确切的行为是什么：如果我设置`</remember-me>`标签并指定`rememberMeServices` `tokenValiditySeconds`to`20`秒，会话是否应该过期并要求我再次登录？我必须设置：

```
<session-config>
   <session-timeout>XX</session-timeout>
</session-config> 
```

所以它匹配`SPRING_SECURITY_REMEMBER_ME`cookie `tokenValiditySeconds`？

**更新**

如果我实现了自己的，这有关系`PersistentTokenBasedRememberMeServices`吗？我必须覆盖`PersistentTokenBasedRememberMeServices`来自 spring 的默认值，因为`PersistentRememberMeToken`没有任何无参数构造函数，因此无法为此使用 hibernate，所以我所做的只是编写了自己的`PersistentRememberMeToken`，`PersistentTokenBasedRememberMeServices`（顺便说一下，没有任何东西在我旁边特别介绍了无参数构造函数`PersistentRememberMeToken`，除此之外，它是从spring的源代码复制粘贴）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:28:26.517

拥有一个在会话超时时间内有效的记住我令牌将不会影响您在该会话期间的身份验证，如果这是您所要求的。

在会话期间通过身份验证后，您的身份验证在该会话期间有效，除非您注销或会话过期。

仅当您未经身份验证时才考虑记住我令牌，否则将被忽略。

# c# - 在 windows c# 中从 XML 添加运行时控件

> ID：14768048
> 
> 赞同：0
> 
> 时间：2013-02-08T07:57:08.047
> 
> 标签：c#, xml, hashtable

我有一个工具可以在文档中查找短语并进行计数。我在 xml 中有这些短语。我为此使用哈希表概念。每次我都会有越来越多的短语添加到 xml 中。所以现在我希望在运行时向 xml 添加一个短语时创建控件。我的 UI 对每个短语都有复选框，我可以在其中检查我想要的任何短语。我力求找到与此相关的任何示例。这是我使用短语的代码的一部分。

```
Hashtable _optionTable = null;
            Hashtable _optionOccuranceTable = null;
            if (optionBox.Checked == true)
                ProcessNode(usrXmldoc, "Option", out _optionTable, out _optionOccuranceTable, oWord, oDoc);

                            Hashtable _QualityPhraseTable = null;
            Hashtable _QualityPhraseOccuranceTable = null;
            if (qualityBox.Checked == true)
                ProcessNode(usrXmldoc, "QualityPhrase", out _QualityPhraseTable, out _QualityPhraseOccuranceTable, oWord, oDoc);

            Hashtable _DirectiveTable = null;
            Hashtable _DirectiveOccuranceTable = null;
            if (directiveBox.Checked == true)
                ProcessNode(usrXmldoc, "Directive", out _DirectiveTable, out _DirectiveOccuranceTable, oWord, oDoc);

             Hashtable _ContinuanceTable = null;
            Hashtable _ContinuanceOccuranceTable = null;
            if (continuanceBox.Checked == true)
                ProcessNode(usrXmldoc, "Continuance", out _ContinuanceTable, out _ContinuanceOccuranceTable, oWord, oDoc);

                            This is the XML part

   string usrXmlConfigFile = CurrentDirectory + "\\Dictionary.xml";
   FileStream usrFs = new FileStream(usrXmlConfigFile, FileMode.Open, FileAccess.Read,
                           FileShare.ReadWrite);
    XmlDocument usrXmldoc = new XmlDocument();
                    usrXmldoc.Load(usrFs); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:24:57.933

您可以使用[FileSystemWatcher](http://msdn.microsoft.com/es-es/library/system.io.filesystemwatcher%28v=vs.100%29.aspx)来了解 xml 文件何时发生更改，如[本例所示](https://stackoverflow.com/questions/721714/notification-when-a-file-changes)。

读取并解析 xml 文件，如[本例所示](https://stackoverflow.com/questions/5604330/c-sharp-xml-parsing-read-a-simple-xml-file-and-retrieve-values)。

最后，在 winforms 中动态添加控件，如[本例所示](https://stackoverflow.com/questions/2688915/adding-removing-dynamic-controls-in-c-sharp-winforms)。

# c# - C# Xml反序列化加设计建议

> ID：14768052
> 
> 赞同：1
> 
> 时间：2013-02-08T07:57:23.970
> 
> 标签：c#, xml, xmlserializer, xml-deserialization

在我的项目中，我需要构建一个应该向后兼容的通用反序列化器。示例：XML 看起来像

```
<PolicyDef name = "sample" type="type1">
  <Options ......>
</PolicyDef> 
```

“类型”是枚举 - PolicyTypes 例如

```
public Enum PolicyTypes
{
 type1 = 0,
 type2 = 1
} 
```

PolicyDef 类定义为

```
[XmlRoot("PolicyDef")]
    public class PolicyDef
    {
        private string policyName;
        private PolicyTypes policyType;

        public PolicyDefinition()
        {         
        }

        [XmlAttribute]
        public string Name
        {
            get
            {
                return this.policyName;
            }
            set
            {
               this.policyName = value;

            }
        }      
        [XmlAttribute]
        public PolicyTypes Type
        {
            get
            {
                return this.policyType;
            }
            set
            {
               this.policyType = value;

            }
        }           
    } 
```

这种方法的问题是，如果稍后我输入除类型 1 或类型 2 之外的任何类型，XMLDeserializer 将抛出异常。所以如果我有像

```
<PolicyDef name = "sample" type="type_new">
  <Options ......>
</PolicyDef> 
```

反序列化器将抛出错误，因为 type_new 无效。

我想知道是否有一种方法可以连接到反序列化器进程来捕获它并设置默认值而不是抛出错误。说如果有任何无效值，那么我会将其设置为“type1”

或者愿意接受有关如何处理此问题的建议

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:12:47.690

[这可能是C# XML Deserialization W/Default Values](https://stackoverflow.com/questions/1969901/c-sharp-xml-deserialization-w-default-values)的副本

不幸的是，在反序列化期间似乎没有办法回退到默认枚举值。这将需要更多的工作，但是如果您按照链接的示例并在 PolicyDef 类中实现 IXmlSerializable ，您将能够以类似的方式实现 ReadXml 方法（按顺序使用 try/catch 块反映每个属性检查默认值）。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:30:12.113

感谢 Chris 的建议，但我不想最终编写完整的解析代码，如果 XML 和相应的类庞大而复杂，这可能会很混乱。无论如何，我使用了不同的方法。我将所有枚举字段更改为字符串。在这种情况下，不会出现解析错误，然后公开另一个属性，该属性将解析值作为枚举返回，如果解析失败，则返回默认枚举值。例如

```
private string policyName;
[XmlAttribute("Type")]
public string Type
{
    private get
    {
        return this.policyType;
    }
    set
    {
        this.policyType = value;
        try
        {
            this.PolicyType = (PolicyTypes)Enum.Parse(typeof(PolicyTypes), this.policyType);
        }
        catch(Exception)
        {
            this.PolicyType = PolicyTypes.DefaultPolicy;
        }
    }
}

public PolicyTypes PolicyType
{
    get;
    private set;
} 
```

并使用类属性来访问值而不是 xml 属性字段。

# java - Java：如何杀死服务器线程以便再次运行服务器不会导致“地址已在使用”

> ID：14768055
> 
> 赞同：1
> 
> 时间：2013-02-08T07:57:28.847
> 
> 标签：java, multithreading, sockets

我用 GUI 编写了一个服务器和一个客户端来在它们之间传输文本，它们运行良好。我搜索了谷歌“如何通过网络发送文件”，然后我找到[了这个](http://www.coderanch.com/t/509758/sockets/java/Send-file-network)漂亮的解决方案（参见 Andrey Kozhanov 的回复）。我将链接中的服务器类移动到我的服务器包和链接到我的客户端包中的客户端类尝试并且它们运行良好。现在我可以发送即时文本消息和即时文件。

我写了所有必要的东西，以使通信顺利进行以满足用户的期望。

**问题是**问题发生在特定场景中。

两台服务器的端口号不同；（我的文本和文件链接中的那个）
**第 1 阶段**
1- 客户端请求服务器发送文件。
2-服务器回复（**是**）（*对话是-否-选项*）。
3-客户端浏览文件选择器的列表。
4-客户端取消文件选择器（没有发送文件）。
5-服务器通知客户端取消。
**阶段 2**
-**再次**
是 1- 客户端请求服务器发送文件。
2-服务器回复（**是**）。 服务器端发生**错误；**

错误的第一行是：

> java.net.BindException：地址已在使用中：JVM_Bind

我像这样在 Server 包中开始接收线程

```
 recieverThread = new Recieving();
        recieverThread.setDaemon(true);
        recieverThread.start(); 
```

问题可追溯到**第 1 阶段**第 5 阶段（5- 服务器通知客户端取消。）。由于用于从客户端接收文件的服务器线程启动，那么在第 5 点我必须停止它。停止这个线程我使用组合

```
 recieverThread.interrupt();
        recieverThread = null; 
```

但是当它在**第 2 阶段**再次启动时，它似乎仍在运行并且没有停止。我想杀死它，这样当我想启动一个新线程时就不会发生错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:08:17.403

那不是线程问题，而是服务器套接字问题。TCP/IP 不允许立即重用 Socket，因为重用者可以看到针对旧用户的数据包。

有关如何重用套接字的信息，请参阅[此问题。](https://stackoverflow.com/questions/10516030/java-server-socket-doesnt-reuse-address)

# javascript - 通过 OAuthSimple.js 发布到 Twitter

> ID：14768062
> 
> 赞同：1
> 
> 时间：2013-02-08T07:57:57.350
> 
> 标签：javascript, oauth, google-chrome-extension, twitter, twitter-oauth

我已经坚持了一段时间了。我正在尝试使用 OAuthSimple.js 在我编写的 Chrome 扩展程序中与 Twitter 交互。

签名过程似乎适用于检索用户状态的请求，但是当我尝试转发、回复或将推文标记为收藏时，我似乎无法构建一个能够成功验证的请求。

我正在按照[这里](https://github.com/jrconlin/oauthsimple)的指南进行操作。我还尝试了多种构建请求的方法，并将请求内容与 Twitter 提供的 OAuth 工具的输出进行比较（这似乎已签出），但我仍然收到 401 错误和通用“我们无法验证你”的回应。

这是我尝试形成请求的方式：

```
var sendTwitterRequest = function(url, params, method, callback) {

  var request = null;

        if ( localStorage.twitterAuthToken ) {
            OAuthSimple().reset();
            request = OAuthSimple(TwitterConsumerKey,TwitterConsumerSecret).sign({
                action:method,
                method:"HMAC-SHA1",
                dataType:"JSON",
                path:url,
                parameters:params,
                signatures:{
                    oauth_version:'1.0',
                    oauth_token:localStorage.twitterAuthToken,
                    oauth_secret:localStorage.twitterAuthVerifier
                }
            });

            console.log(request);

            $j.ajax({
                url:request.signed_url,
                type:method,
                data:request.parameters,
                success:callback
            });     

        }
    }; 
```

然后，像这样调用这个方法：

```
 // this works, I get the data and can do stuff with it
  sendTwitterRequest('http://api.twitter.com/1/statuses/user_timeline.json?user_id=',null,'GET',someMethod());

  // this fails and throws a 401 error every time 
  sendTwitterRequest("https://api.twitter.com/1/statuses/retweet/"+tweetKey+".json",null,'POST',someOtherMethod()); 
```

我错过了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:55:45.983

事实证明，我创建的请求很好，我只需要最后一个请求令牌来交换 OAuth 令牌。当提示用户输入时，我认为这一步已经涵盖，但事实证明我错了。

我也最终从 OAuthSimple.js 切换到 OAuth.js，因为我只能让 OAuth.js 处理令牌请求和时间线请求。

其中一些非常特定于我的应用程序正在执行的操作，因此您可能需要对其进行修改。

新的 sendTwitterRequest 方法：

```
var sendTwitterRequest = function(options){

        var accessor={
            consumerSecret:TwitterConsumerSecret
        };

        var message={
            action:options.url,
            method:options.method||"GET",
            parameters:[
                ["oauth_consumer_key",TwitterConsumerKey],
                ["oauth_signature_method","HMAC-SHA1"],
                ["oauth_version","1.0"]
            ]
        };  

        if(options.token){
            message.parameters.push(["oauth_token",options.token])
        }

        if(options.tokenSecret){
            accessor.tokenSecret=options.tokenSecret
        }

        for(var a in options.parameters) {
            message.parameters.push(options.parameters[a])
        }

        OAuth.setTimestampAndNonce(message);
        OAuth.SignatureMethod.sign(message,accessor);

        try {
            $j.ajax({
                url:message.action,
                async:options.async||true,
                type:message.method||'GET',
                data:OAuth.getParameterMap(message.parameters),
                dataType:options.format||'JSON',
                success:function(data) {
                    if (options.success) {options.success(data);}
                }
            });
        } catch ( e ) {
        }

    }; 
```

以及依赖它的方法：

```
// asks Twitter for an oauth request token. User authorizes and the request token is provided
requestTwitterToken = function() {  
    // this is semi-specific to what my extension is doing, your callback string may need
    // to be slightly different.
    var callbackString = window.top.location + "?t=" + Date.now();

    var params = [
        [ 'oauth_callback', callbackString ]
    ];

    sendTwitterRequest({
        url: "https://api.twitter.com/oauth/request_token",
        method: 'POST',
        parameters: params, 
        format: 'TEXT',
        success: function(data) {
            var returnedParams = getCallbackParams(data);
            if ( returnedParams.oauth_token ) {
                chrome.tabs.create({
                    url:"https://api.twitter.com/oauth/authorize?oauth_token=" + returnedParams.oauth_token
                });
            }
        },error:function( e ) {
            console.log( 'error' );
            console.log( e );
        }
    }); 
};

// exchanges the Twitter request token for an actual access token.
signIntoTwitter = function(token, secret, callback) {
    var auth_url = "https://api.twitter.com/oauth/access_token";

    var authCallback = function(data) {
        var tokens = getCallbackParams(data);

        localStorage.twitterAuthToken = tokens.oauth_token || null;
        localStorage.twitterAuthTokenSecret = tokens.oauth_token_secret || null;

        callback();
    };
    try {
        sendTwitterRequest({url:auth_url, method:'POST', async:true, format:'TEXT', token:token, tokenSecret:secret, success:authCallback});
    } catch ( e ) {
        console.log(e);
    }

}; 
```

有了这个，步骤如下：

*   向 Twitter 索要令牌 ( `requestTwitterToken()`) 并提供回调
*   在回调中，检查是否提供了令牌。如果是这样，它是一个初始令牌
*   将令牌传回 Twitter 并打开 Twitter 身份验证页面，该页面允许用户授予访问权限
*   在此调用的回调中，查看是否提供了访问令牌
*   将请求令牌交换为访问令牌 ( `signIntoTwitter()`)

之后，我只需使用该`sendTwitterRequest()`方法访问 Twitter 的 API 以获取时间线并发布推文。

# php - 用一些数字 PHP 对一些 ID 字符串进行排序

> ID：14768065
> 
> 赞同：-1
> 
> 时间：2013-02-08T07:58:07.870
> 
> 标签：php

我有这个`var_dump($productId)`：

```
string(1) "9"

string(2) "11"

string(2) "12"

string(2) "17"

string(2) "18" 
```

现在，我希望例如 function_x 不为 id 18 和 17 执行，所以我想做这样的事情：

```
$test=array('18','17');
if(!in_array($test,array($productId))){} 
```

但似乎不起作用，我的想法是如果我只想赚 18 岁：

```
$test=18;
if($test != $productId){} 
```

这是可行的，但是如何为多个号码/ ID 执行此操作？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:39:07.827

我认为其他答案是假设您`$productId`是一个数组。我猜你是在 foreach 或其他东西中运行 var_dump() 。

```
if(17 != $productId && 18 != $productId)
{
    // If $productId is not 17 and is not 18.
}

// Alternatively, if you want to add more IDs to ignore, you could use in_array.
$ignore = array(17,18,19,20);

if(false == in_array($productId,$ignore))
{
    // If $productId is not in the ignore array.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:11:33.293

如果你`$productId`一次得到一个字符串：

```
if(!in_array($productId,$test)) {
    // execute function
} 
```

如果`$productId`是一个数组：

```
$test=array('18','17');
foreach ($productId as $id) {
    if(!in_array($id,$test)) {
        // execute function
    }
} 
```

# windows - 如何在 Microsoft Visual Studio 中使用 GCC？

> ID：14768073
> 
> 赞同：53
> 
> 时间：2013-02-08T07:58:38.930
> 
> 标签：windows, visual-studio, gcc, cygwin

我正在创建一个非常大的项目（几千行），因此宁愿不使用 Notepad++。IDE 将使它变得如此容易。我有使用 Microsoft Visual Studio 的经验并且喜欢它。是否有一些简单的方法可以在 Microsoft Visual Studio 中使用 Cygwin 的 GCC？

或者，除了 NetBeans 和 Eclipse 之外，还有其他适用于 GCC 的好的 Windows IDE 吗？（我非常讨厌他们两个。）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-11T19:30:39.860

有几种方法可以去这里：

## 选项 1：创建自定义构建工具

Visual Studio 2005 和更新版本将允许您[注册自定义构建工具](http://www.codeproject.com/Articles/31257/Custom-Tools-Explained)。它们告诉 IDE 如何将一种形式的文件（例如`.cpp`文件）转换成另一种形式（例如`.obj`文件）。

据我所知，还没有人为 GCC 做过这件事。而且，自己做这件事需要编写 COM 代码，这对于一个项目来说可能太深了，无法深入研究。你必须有一个令人信服的理由才能接受这个项目。

然后，您必须手动调整每个项目以告诉它使用自定义构建工具而不是默认工具，因为您使用的`.cpp`是 Visual C++ 已经知道的文件扩展名（可能是 ）。如果您尝试将 VC++ 和 g++ 编译器混合用于从多个模块构建的单个可执行文件，则会遇到麻烦。

从好的方面来说，如果你想开始一个开源项目，这对我来说听起来不错。我希望您能迅速收集到庞大的用户群。

## 选项 2：Makefile 项目

1.  启动 Visual Studio 并说文件 > 新项目。

2.  在 Visual C++ 部分中，选择 Makefile 项目

3.  填写 Makefile 项目向导：

    *   **构建命令行：** make
    *   **清理命令：** make clean
    *   **重建命令行：** make clean all

如果您以项目名称命名可执行文件并且它位于 Visual Studio 期望找到它的位置，则可以单独保留“**输出（用于调试）”字段。**

保留其余字段，除非您知道它们是什么以及为什么要更改它们。例如，您可以选择在**预处理器定义**`-D`行上传递一个标志来获得单独的调试和发布输出。如果你知道你想要这个，你就知道如何设置它，所以我不会为了解释它而做出更长的答案。

 **对于发布版本，您将被问到相同的一组问题。如果您想打扰单独的调试和发布版本，您可以在此处进行任何更改。

完成所有这些之后，您仍然需要创建`Makefile`，并将一个添加`make.exe`到您的`PATH`. 与调试与发布问题一样，进入该级别的详细信息会使该答案偏离主题。

尽管看起来很丑，但它仍然比创建自定义构建工具更容易。`Makefile`另外，你说你最终需要移植到 Unix，所以无论如何你都需要它。

## 选项 3：跨平台开发

您说您想在某个时候将该程序移植到 Unix，但这并不意味着您现在必须在 Windows 上使用 GCC。很有可能编写您的程序，以便它在 Windows 上的 Visual C++ 和 *ix 系统上的 GCC/Makefiles 下构建。

有几个工具可以让这更容易。一个非常流行的选项是[CMake](http://www.cmake.org/)，它在较新版本的 Visual Studio 中作为安装时间选项提供。有许多替代品，例如[SCons](http://www.scons.org/)和[Bakefile](https://bakefile.org/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-27T21:52:47.567

**铛**

您可以将 Clang 编译器与 Visual Studio 结合使用，以针对 Android、iOS 和 Windows。

如果您的目标是 Android，您可以使用 Android NDK 和工具链附带的 Clang/LLVM 编译器来构建您的项目。同样，Visual Studio 可以使用在 Mac 上运行的 Clang 来构建面向 iOS 的项目。“使用 C++ 进行移动开发”工作负载中包含对 Android 和 iOS 的支持。有关定位 Android 或 iOS 的更多信息，请查看我们用关键字“Android”和“iOS”标记的帖子。

如果您的目标是 Windows，您有几个选择：

1.  使用[Clang/LLVM](https://releases.llvm.org/download.html)；“Clang for Windows”包括在 Visual Studio 中将 Clang/LLVM 作为平台工具集安装的说明。
2.  使用 Clang 以 Clang/C2（带有 Microsoft 代码生成的 Clang 前端）的 Windows 为目标。 [![在此处输入图像描述](../Images/93f57094b75aad3cd5e5691f7b40ea28.png)](https://i.stack.imgur.com/yTLQX.png)

**海合会**

如果您的项目针对 Linux 或 Android，您可以考虑使用 GCC。Visual Studio 的 C++ Android 开发本机支持使用 Android NDK 附带的 GCC 构建您的项目，就像它为 Clang 所做的那样。您还可以使用 GCC以 Linux 为目标——远程或本地使用[适用于 Linux 的 Windows 子系统。](https://docs.microsoft.com/en-us/archive/blogs/wsl/)

[![在此处输入图像描述](../Images/68d0163bcf01db914f4d8e275003acb2.png)](https://i.stack.imgur.com/Ur2Na.png)

查看我们在[Visual C++ for Linux Development](https://devblogs.microsoft.com/cppblog/visual-c-for-linux-development-with-cmake/)上的帖子，了解有关如何使用 Visual Studio 以 GCC 为目标的 Linux 的更多信息。如果您对在本地定位 WSL 特别感兴趣，请查看[从 Visual Studio 定位 WSL](https://blogs.msdn.microsoft.com/vcblog/2017/02/08/targeting-windows-subsystem-for-linux-from-visual-studio/)。

来源：[https ://devblogs.microsoft.com/cppblog/use-any-c-compiler-with-visual-studio/](https://devblogs.microsoft.com/cppblog/use-any-c-compiler-with-visual-studio/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-06T10:39:42.207

我来自未来。

我使用Win/Lin/Mac 上的[Visual Code和从](https://code.visualstudio.com/)[Choclaty](https://chocolatey.org/)安装的 MinGW保持（戳）一个 C/C++ 工具链。（这是为了我的理智而做的——随心所欲地安装 GDB 和 GCC）

我已经使用 MS 自己奇怪的 JSON 生成文件，使用带有 IntelliSense 的 GCC 和 GDB 运行它。有一天，有人（你？）会编写一个 Gradle 或 Python 脚本来生成这些；现在[，文档中的在线示例](https://code.visualstudio.com/docs/languages/cpp)似乎有效。

它似乎需要三种类型的 JSON 东西；

*   整个工作区的单个[IntelliSense配置](https://code.visualstudio.com/docs/languages/cpp#_intellisense)
*   您要调试的每个二进制文件 的[调试配置条目](https://code.visualstudio.com/docs/languages/cpp#_debugging-your-code)
    *   这些可以调用构建任务
*   每个工件 的[构建任务](https://code.visualstudio.com/docs/languages/cpp#_building-your-code)
    *   我认为没有“需要”或“依赖”的东西-mah-bob；对不起**

# c# - While循环，检查上次运行

> ID：14768076
> 
> 赞同：0
> 
> 时间：2013-02-08T07:58:47.653
> 
> 标签：c#, .net, foreach, while-loop

我的 While 循环有问题，这个 while 循环需要在最后一次在我的 While 循环中发生更改时进行更新。

这是我的代码，它在一个线程中运行：

```
private void CheckAllPorts()
{
    while (true)
    {
            MultipleClock = false;
            OneClock = false;
            NoClock = false;

            portCount = 0;

            //clear the string list.
            MultiplePortNames.Clear();

            //create an object searcher and fill it with the path and the query provided above.
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);

            try
            {
                foreach (ManagementObject queryObj in searcher.Get())
                {
                    if (queryObj["InstanceName"].ToString().Contains("USB") || queryObj["InstanceName"].ToString().Contains("FTDIBUS"))
                    {
                        portCount = searcher.Get().Count;

                        if (portCount > 1)
                        {
                            MultiplePortNames.Add(queryObj["PortName"].ToString());
                            form1.UpdateListBox(MultiplePortNames);
                            MultipleClock = true;
                        }
                        else if (portCount == 1)
                        {
                            MultiplePortNames.Add(queryObj["PortName"].ToString());
                            form1.UpdateListBox(MultiplePortNames);
                            OneClock = true;
                        }
                    }
                    else
                    {
                        NoClock = true;
                        form1.UpdateListBox(MultiplePortNames);
                    }
                }
            }
            catch
            {
                NoClock = true;
                form1.UpdateListBox(MultiplePortNames);
            }

        Debug.WriteLine("NoClock = " + NoClock);
        Debug.WriteLine("OneClock = " + OneClock);
        Debug.WriteLine("MultipleClock = " + MultipleClock);

        Thread.Sleep(500);
    }
} 
```

因此，如果上次 portCount 是 1，而这次是其他值，例如：0 或 4，那么它需要执行以下代码：

```
form1.UpdateListBox(MultiplePortNames); 
```

当 portCount 上次是 2，这次也是 2 时，代码不应该被执行。

有人知道我的问题的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:11:22.577

除了这段代码的整体结构存在明显问题（你能告诉我你打算什么时候退出那个while（true）吗？）并且只关注你的问题，我认为你应该以这种方式改变内部循环

```
 int lastCount = 0;
    while (true)
    {
            portCount = 0;
            MultipleClock = false;
            OneClock = false;
            NoClock = false;

            //clear the string list.
            MultiplePortNames.Clear();

            //create an object searcher and fill it with the path and the query provided above.
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);

            try
            {
                portCount = searcher.Get().Count;

                foreach (ManagementObject queryObj in searcher.Get())
                {
                    if (queryObj["InstanceName"].ToString().Contains("USB") || queryObj["InstanceName"].ToString().Contains("FTDIBUS"))
                    {

                        if (portCount >= 1)
                            MultiplePortNames.Add(queryObj["PortName"].ToString());
                    }
                }
            }
            catch
            {
                 // Don't like an empty catch, but perhaps in this case it could be justified
            } 
            if(portCount == 1) 
                OneClock = true;
            else if(portCount > 1)
                MultipleClock = true;
            else
                NoClock = true;

            if(lastCount != portCount)
            {
                 lastCount = portCount;
                 form1.UpdateListBox(MultiplePortNames);
            }
            Debug.WriteLine("NoClock = " + NoClock);
            Debug.WriteLine("OneClock = " + OneClock);
            Debug.WriteLine("MultipleClock = " + MultipleClock);

            Thread.Sleep(500);
    } 
```

我添加了一个`lastCount`变量来跟踪上一个循环在 USB 端口发现代码上的结果，并将内部循环更改为仅在 foreach 循环结束时调用列表框更新。不知道 xxxClock 变量是否仍在使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:16:39.983

尝试像这样重新排列您的代码：

```
private void CheckAllPorts()
{
    while (true)
    {
        MultipleClock = false;
        OneClock = false;
        NoClock = false;

        portCount = 0;

        //clear the string list.
        MultiplePortNames.Clear();

        //create an object searcher and fill it with the path and the query provided above.
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);

        try
        {
            var results = searcher.Get().Where(queryObj=>
                    queryObj["InstanceName"].ToString().Contains("USB") || 
                    queryObj["InstanceName"].ToString().Contains("FTDIBUS"));

            if (portCount != results.Count())
            {
                portCount = results.Count();

                if (portCount > 1)
                {
                    MultipleClock = true;
                }
                else if (portCount == 1)
                {
                    OneClock = true;
                }
                else if (portCount == 0)
                {
                    NoClock = true;
                }

                foreach (ManagementObject queryObj in results)
                {
                        MultiplePortNames.Add(queryObj["PortName"].ToString());
                }

                form1.UpdateListBox(MultiplePortNames);
            }
        }
        catch
        {
            NoClock = true;
            form1.UpdateListBox(MultiplePortNames);
        }

        Debug.WriteLine("NoClock = " + NoClock);
        Debug.WriteLine("OneClock = " + OneClock);
        Debug.WriteLine("MultipleClock = " + MultipleClock);

        Thread.Sleep(500);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T08:11:37.630

您需要添加另一个变量来保留上一次检查的值。然后您可以将当前金额与之前的金额进行比较，并相应地执行您的逻辑。

将该值存储为 try 块中的最后一步。但是，不要将 int newVar=0 放在 while 块的开头，否则这将没有所需的结果。

您还需要稍微清理一下代码。

编辑：看起来史蒂夫刚刚做到了。（额外的变量+清理）

# c# - 复制 来自一个的标签 到另一个使用 open xml 2.0

> ID：14768077
> 
> 赞同：0
> 
> 时间：2013-02-08T07:58:50.297
> 
> 标签：c#, ms-word, vsto, openxml, word-contentcontrol

`contentControl.Range.WordOpenXml`我使用VSTO (C#) 中的属性检索了一个包含单个富文本内容控件内容的 XML 字符串。

根据内容控件中的内容，这包含包含在`<pkg:part>`标签内的许多标签。`<pkg:package>`如果内容中有图像，它们将作为字节数组内联包含在不同的`<pkg:part>`标签中。

如何使用此 XML 将此富文本控件的内容复制到不同 Word 文档中的内容控件。

PS：我正在使用 Open Xml SDK 2.0、C# 和 Word 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T13:55:46.130

`WordOpenXML`正如您所发现的，文档和范围有一个属性。然而，范围也有一个`InsertXML`接受 WordOpenXML 字符串的方法，例如：

```
var wordOpenXML = contentControl.Range.WordOpenXml;

document.Range().InsertXML(wordOpenXML); 
```

这将导致 Content Control 的内容被插入到`document`. 您可以使用更具体的范围来确定将内容复制到文档中的确切位置。当然，它也可以在同一个文档中工作。

# php - ie浏览器中的返回按钮

> ID：14768078
> 
> 赞同：-1
> 
> 时间：2013-02-08T07:58:55.013
> 
> 标签：php, internet-explorer, http-headers

每当我按下 IE 的后退按钮时，浏览器都会显示消息“网页已过期”。

我有一个注册页面，即 reg.php 现在我在 save_reg.php 中保存了数据，然后按下返回按钮并显示消息“网页已过期”。

我尝试了以下代码：

```
header("Expires: Sat, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT");
header("Cache-Control: post-check=0, pre-check=0",false);
session_cache_limiter("must-revalidate"); 
```

但消息仍然存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T09:28:54.617

我通过使用解决了这个问题

```
BrowserMatch MSIE force-no-vary 
```

在我的 .htaccess 文件中。Vary 标头是由 mod_rewrite 生成的，即不能很好地处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:08:24.040

设置未来的到期日期：

```
header("Expires: ".date("D, d M Y H:i:s", time() + $desiredDuration)." GMT"); 
```

[`time`](http://php.net/manual/en/function.time.php)返回自 Unix 纪元以来以秒数测量的当前时间，并以秒为单位添加所需的时间，并使用[`date`](http://php.net/date)函数对其进行格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:11:02.560

这意味着您要返回的页面是一个 POST 请求。它与标题完全无关。

摆脱这种情况的最简单方法是在开头使用以下代码：

```
session_start();
if( $_POST) {
  $_SESSION['postdata'] = $_POST;
  header("Location: ".$_SERVER['REQUEST_URI']);
  exit;
}
if( $_SESSION['postdata']) {
  $_POST = $_SESSION['postdata'];
  unset($_SESSION['postdata']);
} 
```

# java - 将文件句子拆分为单词

> ID：14768079
> 
> 赞同：1
> 
> 时间：2013-02-08T07:58:59.353
> 
> 标签：java

谁能帮帮我？

我正在尝试将其拆分`sentences[]`为`words[]`. 但它显示`Syntax error on token "j", delete this token`...

我的代码是：

```
try
{
    int j;
    String paragraph = sample.readFileString(f);
    String[] sentences = paragraph.split("[\\.\\!\\?]");
    for (int i=0;i<sentences.length;i++)
    {  
        System.out.println(i);
        System.out.println(sentences[i]);  
        for( j=0;j<=i;j++)
        {
            String  word[j]=sentences[i].split(" ");
        }
    }
} 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:06:44.150

```
String  word[j]=sentences[i].split(" ");
          ^^^^^^^^ 
```

这不是有效的`String`或`String array`声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:07:07.957

`String.split()`返回一个数组。所以你必须改变

```
String word[j] = sentences[i].split(" "); 
```

对此

```
String[] word = sentences[i].split(" "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:08:01.700

而不是使用 j 变量的 for 循环：

```
String[] words = sentences[i].split(" "); 
```

对于多维数组：

```
String paragraph = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras non varius nisi. In at erat est, sit amet consectetur est. ";
String[] sentences = paragraph.split("[\\.\\!\\?]");

String[][] words = new String[sentences.length][];

for (int i=0;i<sentences.length;i++) {  
   words[i] = sentences[i].trim().split(" ");
}

System.out.println(words[0][1]); //[sentence][word] - it would be second word of first sentence 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:12:29.170

分裂看起来像`String[]split(String regex)`[分裂](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

所以改变你`String word[j] = sentences[i].split(" ");` 的

```
String  word[] = sentences[i].split(" "); 
```

# python - Python - 访问顶级变量的更快方法

> ID：14768083
> 
> 赞同：1
> 
> 时间：2013-02-08T07:59:14.810
> 
> 标签：python, class

我目前正在用python编写游戏。我有一个主类（engine.py）和许多子类。主类有一些重要的变量，比如播放器。当我现在在一个子类中，并且想要访问另一个变量或函数时，它通常看起来像这样：

```
self.handleToEngine.player.playerObj.animationHandler.doSomething() 
```

有没有办法缩短这个？我不相信性能有那么好，而且它也不是干净的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:07:34.997

给它一个本地名称（也节省查找时间）：

```
f = self.handleToEngine.player.playerObj.animationHandler.doSomething
f () 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:07:26.227

属性链反映了您的类结构，因此如果有意义，您当然可以对其进行重构。此外，在 Python 2.2 或更高版本中，您可以使用它[`__slots__`](http://docs.python.org/2/reference/datamodel.html#slots)来改进对成员数据的访问，但有一些注意事项。

# c# - 返回具有空项的元组

> ID：14768084
> 
> 赞同：1
> 
> 时间：2013-02-08T07:59:19.950
> 
> 标签：c#

我有一些看起来像这样的代码：

```
public Tuple<bool, SomeObjectModel> CheckIfJsonIsValid(string IncomingJson)
{
   SomeObjectModel TheObjectModel = new SomeObjectModel();
   JavascriptSerializer TheSerializer = new JavascriptSerializer();
   .....

   try
   {
       TheObjectModel = TheSerializer.Deserialize<SomeObjectModel>(IncomingJson);
   }
   catch
   {
       return new Tuple<bool, SomeObjectModel>(false, null); //question here
   }

   .....
   return new Tuple<bool, SomeObjectModel>(true, TheObjectModel);
} 
```

调用方法首先检查返回元组的 Item1，如果为 false，则结束其进程。

更好的做法是 a) 在元组中返回空值还是 b) 返回 SomeObjectModel 的新实例？是否有任何性能影响？

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:08:36.617

让我建议三个替代解决方案：

* * *

**ParseJsonIfValid**：如果反序列化有效，则 TheObjectModel 始终为非空。因此，不需要布尔值：

```
public SomeObjectModel ParseJsonIfValid(string IncomingJson)
{
   JavascriptSerializer TheSerializer = new JavascriptSerializer();
   .....

   try
   {
       return TheSerializer.Deserialize<SomeObjectModel>(IncomingJson);
   }
   catch
   {
       return null;
   }
} 
```

在调用函数中只需检查返回值是否为空。

* * *

**ParseJson**：如果 JSON*通常是*有效的，而无效的 JSON 是出现严重错误的迹象，只需抛出异常：

```
public SomeObjectModel ParseJson(string IncomingJson)
{
   JavascriptSerializer TheSerializer = new JavascriptSerializer();
   .....

   try
   {
       return TheSerializer.Deserialize<SomeObjectModel>(IncomingJson);
   }
   catch (Exception e)
   {
       throw new TheServerSentRubbishException(e);
   }
} 
```

确保包含内部（“真实”）异常，以便调用函数可以记录错误的真正原因以进行调试。

* * *

**TryParseJson**：如果`null`可以是*有效*的反序列化，则可以使用以下模式，其优点是与`TryParse`.NET框架的方法一致：

```
public bool TryParseJson(string IncomingJson, out SomeObjectModel theObjectModel)
{
   JavascriptSerializer TheSerializer = new JavascriptSerializer();
   .....

   try
   {
       theObjectModel = TheSerializer.Deserialize<SomeObjectModel>(IncomingJson);
       return true;
   }
   catch (Exception e)
   {
       return false;
   }
} 
```

# c# - 具有大数据集的 Sql Server Compact

> ID：14768086
> 
> 赞同：1
> 
> 时间：2013-02-08T07:59:23.017
> 
> 标签：c#, .net, sql-server, wpf

我是 .NET 和桌面应用程序的新手，我有一个应用程序，其数据集相当大，大约 600、000，目前我正在使用 SQl Server Express 运行，问题是用户可能没有安装 Sql Server 我开始寻找替代方案，遇到了 SQl Server Compact 但我不确定 SQL Compact 是否可以处理 600、000 条记录

任何建议或帮助表示赞赏

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:07:57.107

SQL CE 可以处理这么多的记录。在我的一个项目中，我有一张包含超过 200 万条记录的表。

# css - 全宽子 div，在页面下方多次

> ID：14768089
> 
> 赞同：0
> 
> 时间：2013-02-08T07:59:30.477
> 
> 标签：css, html, width

所以我有一个设计，它在页面下方有多个 100% 浏览器宽度的图像。我尝试在页面下方创建一些 div 并将它们设置为绝对位置（即使父项和后续子项设置为相对位置），但文本浮动在图像后面。

我尝试了其他一些事情并尝试在此处搜索答案（不使用 jQuery），但我只是想更清楚地了解如何最好地解决这个问题。我在下面附上了一个图像样本：

![样本](../Images/065efe95ce38e76b0a60c0688bfca96a.png)

我能找到的最接近的示例通常在页面顶部只有 1 张图片。

# javascript - 仅根据浏览器宽度显示有限的 div

> ID：14768094
> 
> 赞同：1
> 
> 时间：2013-02-08T07:59:51.317
> 
> 标签：javascript, jquery, css, media-queries

我有一个 php 脚本，它创建了一堆包含图像和一些文本的 div。div 是浮动的，所以它们都是从左到右读取的。我的问题是，当浏览器调整大小或在较小的屏幕尺寸上查看时，div 将在彼此下方浮动，这是您期望 css 做的，但不是我想要的。如果屏幕上只有 4 个 div，那么它应该只显示 4 个 div。If 7 then 7\. 这就是它目前正在做的事情![在此处输入图像描述](../Images/655b224cc69a044450f38da7477a0c08.png)

这就是它的样子

![在此处输入图像描述](../Images/9eca6dcbe148c7f5bb1e1270c4813905.png)

我的代码是什么样的

```
<div id="mainContent2">

                                    <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/7599385542.jpg" height="150px"  /></center>
                <span>Live -Frat Party At</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 200.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/7599399935.jpg" height="150px"  /></center>
                <span>Road To Revolution:</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 250.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/9362424712.jpg" height="150px"  /></center>
                <span>2 Points Of Authority</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 100.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/9362426132.jpg" height="150px"  /></center>
                <span>Somewhere I Belong</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 100.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/9362426302.jpg" height="150px"  /></center>
                <span>Faint (Single)</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 100.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/9362483262.jpg" height="150px"  /></center>
                <span>Reanimation (Remix</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 150.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/9362484622.jpg" height="150px"  /></center>
                <span>Meteora (Import)</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 150.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/WBCD 1987.jpg" height="150px"  /></center>
                <span>Hybrid Theory</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 100.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/WBCD 2024.jpg" height="150px"  /></center>
                <span>Reanimation (Remix Album)</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 100.00</span>
                </div>
                                        <div id="newReleaseDiv"><center><input type="image" img src="Images/Database Images//GALLO/WBCD 2061.jpg" height="150px"  /></center>
                <span>Live In Texas</span><br  />
                 <span> 
                 Linkin Park</span><br />
                <span>R 100.00</span>
                </div>

</div> 
```

像这样的页面上会有多个 div，所以这里最好的解决方案是什么，如果调整浏览器的大小，它将隐藏或显示更多 div 而无需重新加载页面，这是跨浏览器兼容的

我使用了这个在 ff、chrome、opera 中工作但不是 IE 的脚本。它会正确加载页面，但是当您调整浏览器的大小时，它不会隐藏或显示更多 div。您将不得不再次重新加载页面

```
<script type="text/javascript">
          function newReleaseDisplay () {
               if (width > 1000) {
       var divsToDisplay = Math.floor(width / 175);
       $("#mainContent2 > div").slice(1).show();
       $("#mainContent2 > div").slice(divsToDisplay).hide();
       }
       else {
            var divsToDisplay = Math.floor(1000 / 175);
            $("#mainContent2 > div").slice(1).show();
            $("#mainContent2 > div").slice(divsToDisplay).hide();

       }
      }
    var width = $(window).width();
    window.onload = newReleaseDisplay();

$(window).resize(function(){
   if($(this).width() != width){
      width = $(this).width();
       console.log(width);
       newReleaseDisplay ();
   }
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:03:42.170

只是浮动全部`.newReleaseDiv`离开，并设置`#mainContent2`为具有一排高度的固定高度和`overflow: hidden;`

JavaScript 在这里并不是必需的。CSS 应该用于显示/布局。

# c++ - 使用 MongoDB C++ 驱动程序处理通用 BSON 文档数组

> ID：14768097
> 
> 赞同：2
> 
> 时间：2013-02-08T07:59:57.223
> 
> 标签：c++, arrays, mongodb, bson

我的 MongoDB 测试数据库中有以下文档：

```
> db.a.find().pretty()
{
    "_id" : ObjectId("5113d680732fb764c4464fdf"),
    "x" : [
            {
                "a" : 1,
                "b" : 2
            },
            {
                "a" : 3,
                "b" : 4
            }
          ]
} 
```

我正在尝试访问和处理“x”数组中的元素。但是，Mongo 驱动程序似乎不是将其识别为 JSON 文档的数组，而是将其识别为 Date 类型，如下面的代码所示：

```
auto_ptr<DBClientCursor> cursor = c.query("test.a", BSONObj());
while (cursor->more()) {      
  BSONObj r = cursor->next();
  cout << r.toString() << std::endl;
} 
```

输出是：

```
{ _id: ObjectId('51138456732fb764c4464fde'), x: new Date(1360233558334) } 
```

我正在尝试遵循[http://api.mongodb.org/cplusplus](http://api.mongodb.org/cplusplus)和[http://docs.mongodb.org/ecosystem/drivers/cpp-bson-array-examples/](http://docs.mongodb.org/ecosystem/drivers/cpp-bson-array-examples/)中的文档，但它很差。我发现了处理数组的其他示例，但总是使用简单类型（例如整数数组），但当数组中的元素是 BSON 文档本身时则不然。

你有一些处理数组的代码示例，哪些元素是通用 BSON 元素，好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:30:31.443

您可以使用 .Array() 方法或 getFieldDotted() 方法：如下所示：

```
Query query = Query();
auto_ptr<DBClientCursor> cursor = myConn.query("test.a", query);

while( cursor->more() ) {
    BSONObj nextObject = cursor->next();

    cout << nextObject["x"].Array()[0]["a"] << endl;
    cout << nextObject.getFieldDotted("x.0.a") << endl;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:28:38.250

最后，embeddedObject() 方法似乎是关键：

```
auto_ptr<DBClientCursor> cursor = c.query("test.a", BSONObj());
while (cursor->more()) { 
  BSONObj r = cursor->next();
  cout << "Processing JSON document: " << r.toString() << std::endl;
  std::vector<BSONElement> be = r.getField("x").Array();
  for (unsigned int i = 0; i<be.size(); i++) {
      cout << "Processing array element: " << be[i].toString() << std::endl;
      cout << "                 of type: " << be[i].type() << std::endl;
      BSONObj bo = be[i].embeddedObject();
      cout << "Processing a field: " << bo.getField("a").toString() << std::endl;
      cout << "Processing b field: " << bo.getField("b").toString() << std::endl;
  }
 } 
```

我错误地检索了不同的 ObjectID 和不同的类型（日期而不是数组），因为我正在寻找不同的集合：$

对不起，噪音。我希望上面的片段可以帮助其他人弄清楚如何使用 MongoDB C++ 驱动程序来操作数组。

# networking - 服务器之间的会话通信

> ID：14768099
> 
> 赞同：1
> 
> 时间：2013-02-08T07:59:59.540
> 
> 标签：networking, communication

想象一下一个巨大的聊天网络，微软的 MSN 规模。这样的网络有数千台具有多种服务器类型的服务器。想想这个：

用户始终连接到一个服务器，该服务器称为调度服务器，该服务器将用于传达状态更改，传入和传出的会话请求等。用户只要连接到该服务器，就连接到该服务器网络。

当用户开始新的对话，或其他用户与用户交谈时，调度服务器将在白板服务器上创建一个会话，并将该服务器的地址与元数据一起发送给两个用户。白板服务器管理此聊天会话。

现在想一想：用户 A 连接到调度服务器 A，用户 B 连接到调度服务器 B。用户 A 改变他的在线状态（从在线到离开），他的客户端通知调度服务器 A。

接下来会发生什么？在拥有数千个调度服务器的网络中，调度服务器 B 如何知道这一变化。调度服务器如何相互通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:10:20.200

有当前用户连接到的用户订阅。服务器使用此列表来了解其他要更新的内容 - 因此涉及的服务器较少

# c# - 执行 *.reg 文件

> ID：14768101
> 
> 赞同：2
> 
> 时间：2013-02-08T08:00:00.193
> 
> 标签：c#, file, regedit

我有个问题。我执行如下代码。之后我查看了 regedit 文件，“test.reg”文件没有添加。你怎么看这个问题

regedit 文件的内容是：

```
REGEDIT4

[HKEY_LOCAL_MACHINE\Software\Wow6432Node\efe]

"key1"="value"
"key2"="value2" 
```

代码是：

```
 static void Main()
    {
        Process regeditProcess = Process.Start("regedit.exe", "/s " + @"D:\Projects\efe\efe\bin\Debug\test.reg");
        regeditProcess.WaitForExit();

        Console.WriteLine("Press any key to continue.");
        Console.ReadKey();
    } 
```

谢谢你的建议...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:14:23.287

如果您有管理权限，这应该可以工作，如果没有，您可以尝试直接从 c# 创建注册表项：

```
 Microsoft.Win32.Registry.LocalMachine.CreateSubKey(@"Software\Wow6432Node\efe");
        Microsoft.Win32.Registry.LocalMachine.OpenSubKey(@"Software\Wow6432Node\efe",true).SetValue("key1", "value", Microsoft.Win32.RegistryValueKind.String); 
```

我从头输入了代码，所以也许您必须进行一些更改。为此，您还需要对您的应用程序具有管理权限。

# localization - Sublime text 2 Plugin Development - 如何获取当前文件的语言

> ID：14768104
> 
> 赞同：1
> 
> 时间：2013-02-08T08:00:04.083
> 
> 标签：localization, sublimetext2

**== 更新 ===**

所以我意识到 Sublime 已经有了添加评论的命令。所以如果我有这样插入的代码：

```
comment = " ----------------------------------------" + '\n'
comment += " " + title + '\n'
comment += " @author " + author + '\n'
comment += " @url " + url + '\n'
comment += " ---------------------------------------" + '\n'
comment = self.view.run_command('toggle_comment')
code = items['code']
layout = comment + code
self.view.replace(edit, sel[0], layout) 
```

如何让命令工作以便注释掉注释变量？谢谢。

***最初的问题***

我正在为 Sublime Text 2 创建一个插件，并希望确保它在插入/替换代码时也会插入注释，但为此我需要它为各种语言插入正确的注释类型。我知道我可以运行以下命令：

`view.settings().get('syntax')`

这将返回如下内容：

`Packages/Python/Python.tmLanguage`

有没有办法让它只返回 PHP、Python、C++ 等？

我确信我可以在 Python 中执行子字符串命令，但是因为我可以看到查看所有文件设置的简单方法，所以我想确保没有快速简单的方法来执行此操作。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:37:37.570

您在寻找 scope_name 吗？

> **范围名称（点）** | ***字符串***| 返回在给定点分配给字符的语法名称。

# mysql - 如何从mysql中的多个相同日期获取最新的日期时间

> ID：14768108
> 
> 赞同：2
> 
> 时间：2013-02-08T08:00:14.930
> 
> 标签：mysql, sql, group-by

如何从mysql中的多个相同日期获取最新的日期时间？

```
SELECT start_time FROM times WHERE start_time BETWEEN '2013-01-27' AND '2013-02-02' ORDER BY start_time 
```

这输出：

```
2013-01-27 00:00:00 
2013-01-28 09:00:00 
2013-01-29 00:00:00 
2013-01-30 09:00:00 
2013-01-31 00:00:00     
2013-02-01 09:00:00      
2013-02-01 21:00:00      
2013-02-02 00:00:00 
```

我希望所有这些都输出，除了我想要 2013-02-01 的最新日期时间，所以它会输出如下：

```
2013-01-27 00:00:00 
2013-01-28 09:00:00 
2013-01-29 00:00:00 
2013-01-30 09:00:00 
2013-01-31 00:00:00          
2013-02-01 21:00:00  <<<<<<<<    
2013-02-02 00:00:00 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:06:19.720

```
SELECT MAX(start_time)
FROM times 
WHERE start_time BETWEEN '2013-01-27 00:00:00' AND '2013-02-02 23:59:59' 
GROUP BY DATE(start_time)
ORDER BY start_time 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0b238/5)

# cocos2d-iphone - sharedScheduler 已弃用？

> ID：14768109
> 
> 赞同：1
> 
> 时间：2013-02-08T08:00:19.507
> 
> 标签：cocos2d-iphone, deprecated

所以，我想创建一个慢动作效果，我正在使用这种方法：

```
[[CCScheduler sharedScheduler] setTimeScale:0.5]; 
```

但是，不推荐使用 sharedScheduler。

创建慢动作效果的等效方法是什么？

感谢所有答案和建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:32:29.157

您必须使用 [CCDirector 调度程序]。

> CCActionManager、CCScheduler、CCTouchDispathcer (iOS) 和 CCEventDispatcher (Mac) 不再是单例。相反，它们是 CCDirector 的属性。

文档链接： [http ://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrate_to_v2.0](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrate_to_v2.0)

--

如果我正确理解慢动作效果的含义，您还可以使用如下操作（这里是干编码，因此可能需要清理）：

```
CCNode *obj = //some object;

[obj runAction:[CCSequence actions:
   [CCDelayTime actionWithDuration:0.5],
   [CCCallFunc actionWithTarget:self selector:@selector(YOURFUNCTION)],nil]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T02:02:03.240

**尝试更换：**

`[[CCScheduler sharedScheduler] setTimeScale:0.5];`

**和：**

`[[[CCDirector sharedDirector] scheduler] setTimeScale:0.5];`

# entity-framework - 实体框架：context.AddObject 不添加主人

> ID：14768110
> 
> 赞同：3
> 
> 时间：2013-02-08T08:00:23.357
> 
> 标签：entity-framework

伙计们，

我在创建具有 master 的新对象时遇到问题。问题实际上是 EF 也在尝试创建主对象，但我不需要它。

我的两个 poco 课程如下所示：

```
[DataContract(IsReference = true)]
public class Application
{
    [DataMember]
    public int ID { get; set; }

    [DataMemeber]
    public int ProjectManagerId {get; set; }

    [DataMember]
    public ProjectManager PM { get; set;}
}

[DataContract(IsReference = true)]
public class ProjectManager
{
    [DataMember]
    public int ID { get; set; }

    [DataMember]
    public string FullName { get; set; }

} 
```

当我在 ASP.NET MVC 页面上创建新对象时，我有一个`Application`类对象，它的 ProjectManagerId 等于 1，PM 字段的 ID = 0 和 FullName，例如“Forest Gump”。

所以，当我添加对象时，我有异常 application.PM.ID 不能为 0：

```
context.Applications.AddObject(application); 
context.SaveChanges(); 
```

是否可以在不添加主对象的情况下添加对象我的对象？

我找到了解决方法，但我不喜欢它：它在将对象添加到上下文之前将 PM 字段分配给 null

```
application.PM = null; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:09:04.777

EF 有一个您必须了解的核心规则。它适用于整个对象图，并且不允许在同一个对象图中组合分离和附加的实体。这意味着`Attach`and`AddObject`方法将始终在对象图中的所有实体上执行（它将遍历您的导航属性并递归执行操作）。

由于这种基本行为，您必须手动处理现有对象。你有三个选择：

不要使用导航属性。你的`Application`班级`ProjectManagerId`暴露了。您只需将此属性设置`ID`为现有管理器的属性，而无需填充`ProjectManager`导航属性来构建关系。

```
var application = new Application { ProjectManagerId = 1 };
context.Applications.AddObject(application);
context.SaveChanges(); 
```

附加您的父母，添加孩子，然后才在他们之间建立联系：

```
// Create attached existing project manager
var projectManager = new ProjectManager { ID = 1 };
context.ProjectManagers.Attach(projectManager);

// Create a new added application
var application = new Applications();
context.Applications.AddObject(application);

// Now you are making relation between two entities tracked by the context
application.ProjectManager = projectManager;  
context.SaveChanges(); 
```

最后一个选项是简单地修复现有实体的状态。在这种情况下，您将设置项目管理器保持不变，而应用程序仍将保持在添加状态：

```
// Add application and its related project manager
context.Applications.AddObject(application);
context.ObjectStateManager.ChangeObjectState(application.ProjectManager, EntityState.Unchanged);
context.SaveChanges(); 
```

# java - 运算符 += 未定义参数类型 int、AtomicLong

> ID：14768112
> 
> 赞同：3
> 
> 时间：2013-02-08T08:00:27.293
> 
> 标签：java, atomic-long

我有一张地图如下 -

```
ConcurrentHashMap<Long, AtomicLong> histogram = new ConcurrentHashMap<Long, AtomicLong>(); 
```

该映射包含很多键值对。将`AtomicLong`值作为值是必要的，所以这就是我在该地图中放置这样的原因。

所以现在如果我试图遍历`ConcurrentHashMap`我上面提到的，它总是在这条线上给我错误-

```
buckets[i] += histogram.get(time); 
```

作为-`The operator += is undefined for the argument type(s) int, AtomicLong`

我不确定如何解决此问题？我无法返回并将数据结构更改为 all`Integer`而不是`Long`and `AtomicLong`。

所以我需要找出如何在下面的代码中进行更改，以便它开始工作。我正在考虑转换为整数。但它也没有工作。

下面是我的代码

```
private static void logHistogramInfo() {

    System.out.println("From Main Thread: " + histogram);

    int[] definition = { 0, 20, 40, 60, 80, 100 };
    int[] buckets = new int[definition.length];

    for (Long time : histogram.keySet()) {
        for (int i = definition.length - 1; i >= 0; i--) {
            if (time >= definition[i]) {
                      //error on the below line
                buckets[i] += histogram.get(time);
                break;
            }
        }
    }
    for (int i = 0; i < definition.length; i++) {
        String period = "";
        if (i == definition.length - 1) {
            period = "greater than " + definition[i] + "ms";
        } else {
            period = "between " + (definition[i] + 1) + " and " + definition[i + 1] + "ms";
        }
        System.out.println(buckets[i] + " came back " + period);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:05:30.807

该`+=`运算符最初旨在与原始数据类型 ( `int`, `long`...) 一起使用。由于这些不能放在地图中，因此存在包装类。当您将`Integer`or`Long`与任何算术运算符一起使用时，它们会自动“拆箱”为相应的原始类型。

但是，没有对应于 any 的原始类型`AtomicXYZ`。但是，您可以使用`Number`该类提供的任何方法来获取其原始值，例如`longValue()`或`intValue()`。请注意，您的 atomic long 的值原则上可以大于最大值`int`（或`Integer`），因此您可能希望以某种方式处理潜在的溢出。

[编辑] 或者您可以使用`get()`assylias 指出的方法（我不知道，因为我以前从未使用过原子类型），它与`longValue()`for `AtomicLong`（和`intValue()`for `AtomicInteger`）做同样的事情，可以看出从其实施。

# java - 使用 POI 将 HTML 数据表导出到 Excel

> ID：14768115
> 
> 赞同：3
> 
> 时间：2013-02-08T08:00:35.047
> 
> 标签：java, apache-poi

能否请您告诉我，在这种情况下我们如何进行，我们有一个表格形式的纯 HTML 数据，应该将其转换为适当的 excel 工作表。

这是我写的源代码，我得到一个异常 --> 错误：无效的标头签名；读取 0x6D78206C6D74683C，预期 0xE11AB1A1E011CFD0|#]

```
 // Resulting byte stream from the DB
    resultBytes = dokumentSession.getXlsZuAuftrag(ts);
    if (resultBytes != null && resultBytes.length > 0) {
        try {
            InputStream fos = new ByteArrayInputStream(resultBytes);
            HSSFWorkbook workbook = new HSSFWorkbook(fos);
            workbook.createSheet("sheet1");
            FileOutputStream fileOut = new FileOutputStream("ipa_loader.xls");
            workbook.write(fileOut);
            fileOut.close();
        } catch (Exception e)
        {// Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }
    } 
```

请让我知道这方面的任何意见，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:27:28.113

使用任何 HTML 解析器，您必须解析 HTML 内容，然后使用 POI 将内容写入 Excel。

**链接：**

兴趣点示例

[http://viralpatel.net/blogs/java-read-write-excel-file-apache-poi/](http://viralpatel.net/blogs/java-read-write-excel-file-apache-poi/)

HTML 解析器示例

[http://jsoup.org/cookbook/extracting-data/example-list-links](http://jsoup.org/cookbook/extracting-data/example-list-links)

此外，您还可以轻松地将您的 html 代码转换为 XLS。在这里您可以找到示例 [http://wiki.sdn.sap.com/wiki/display/WDJava/Export+to+Excel+%28Without+third+party+APIs%29](http://wiki.sdn.sap.com/wiki/display/WDJava/Export+to+Excel+%28Without+third+party+APIs%29)

# iphone - __NSDictionaryM setObject:forKey:]: 消息发送到释放的实例

> ID：14768116
> 
> 赞同：1
> 
> 时间：2013-02-08T08:00:36.853
> 
> 标签：iphone, xcode4.5, nsmutabledictionary

我正在通过 NSXMLParser 进行 XML 解析。但是当谈到 NSXMLParser 的 didendElement 时，它有时会崩溃并有时会给出结果。我不明白我哪里出错了？

```
 arr3=[[NSMutableArray alloc] init];
    drr3=[[NSMutableDictionary alloc]init];

    NSURL *urlString2= [NSString stringWithFormat:@"http://www.XXX.YYY/services/SService.svc/Get"];
  currentURL=@"1";
/// calling the service url and getting the repsnse in array (arr3)

if([arr3 count]==0)
{
 currentURL=@"2";
    //calling another service url and storing in arr3.
}

    - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
    if(currentURL==@"1")
{
        if([elementName isEqualToString:@"PWList"])
        {
            arr3=[[NSMutableArray alloc] init];
            drr3=[[NSMutableDictionary alloc] init];

        }
        if([elementName isEqualToString:@"Name"])
        { 

            drr3=[[NSMutableDictionary alloc] init];        
        }
        srr3=[[NSMutableString alloc] init]; 

}
if(currentURL==@"2")
{
      if([elementName isEqualToString:@"WeeksList"])
          {
              arr3=[[NSMutableArray alloc] init];

          }
          if([elementName isEqualToString:@"Person"])
          {

              drr3=[[NSMutableDictionary alloc]init];
          }

          srr3=[[NSMutableString alloc] init];
    }
}
    - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
if(curentURL==@"1")
{

   //some code 
     if([elementName isEqualToString:@"PWList"])
        {

            [drr3 release],drr3=nil;
        }
}
if(curentURL==@"2")
{     
if([elementName isEqualToString:@"Code"])
            {

                [drr3 setObject:srr3 forKey:@"Code"]; //crashes at this line
                [srr3 release],srr3=nil;
                return;
            }
    }
} 
```

当涉及到`[drr3 setObject:srr3 forKey:@"Code"];`给我错误“`__NSDictionaryM setObject:forKey:]: message sent to deallocated instance".`

有时我确实得到了结果。

我能做些什么来摆脱这个错误？

# ruby-on-rails - 在 Rails 3 中向 find_by_id 添加附加条件

> ID：14768119
> 
> 赞同：1
> 
> 时间：2013-02-08T08:00:55.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Mac 上使用 Rails 3.2.11

我有这个工作正常的声明：

`object= Object.find_by_id(params[:id])`

我正在尝试向该语句添加一个条件，所以我这样做了：

```
object = Object.where("id = :id AND level <= :level",{:id => params[:id], :level =>     current_user.level}) 
```

这种方法会有风险吗？有什么选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:05:41.870

如果 ActiveRecord 继续遵守清理输入的合同，则此声明不存在任何风险。另一种选择是范围，但这实际上只是用不同的语法做同样的事情。

您可以做的一件事是设置一个定义限制[的默认范围](http://apidock.com/rails/ActiveRecord/Scoping/Default/ClassMethods/default_scope)`level`，然后您可以只做一个标准的`find_by_id`. 但如果这是不可取的，只需正确使用语法：

```
Object.where(id: params[:id], level: current_user.level) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:33:35.470

只要你让 Rails 处理你的价值观，你就没有问题。我的意思是使用用户输入从 Rails 运行 sql 命令，例如

```
Object.where("id = #{params[:id]} AND level <= #{current_user.level}") 
```

将容易受到sql注入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:18:48.437

没有风险，但它的定义方式并不容易理解。

简单的语句将起作用：

```
object = Object.where("id = ? AND level <= ?",{params[:id],   current_user.level}) 
```

# java - 以与 Java 中的变量类似的方式使用对象

> ID：14768122
> 
> 赞同：1
> 
> 时间：2013-02-08T08:01:09.260
> 
> 标签：java, variables, object, global-variables

我可以使用以下代码吗？它不会在 Object 上而是在 obj.i 上抛出任何错误。这是使用对象的合法方式吗？另外，除了使用普通语法 obj s = new obj(); 之外，我还有多少种方法可以创建对象？

```
public class Test {

    static int i;
    static Test obj;
    obj.i = 10; //am getting a compilation error here "Syntax error on token "i", VariableDeclaratorId expected after this token"

    public static void main(String[] args) {
        System.out.println(i+" "+ obj);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:05:02.817

您需要在 obj.i 赋值语句周围放置一个静态块才能使其工作：

```
public class Test {
   static int i;
   static Test obj;
   static { obj.i = 10; }

   public static void main(String[] args) {
       System.out.println(i+" "+ obj);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:05:41.933

这不是，你没有初始化。此外，您可能不想使用`static`.

```
public static void main(String [] args) {
int i = 10;
Test obj = new Test();
obj.setI(i);
System.out.println("my objects I = "+ obj.getI());
} 
```

现在在你的`Test`对象中

```
public class Test {
private int i;

public void setI(int i) {
this.i = i;
}

public int getI() {
return this.i;
}
} 
```

# c# - 如何在 lucene 搜索之前通过外键过滤我的数据？

> ID：14768127
> 
> 赞同：2
> 
> 时间：2013-02-08T08:01:46.133
> 
> 标签：c#, .net, linq, entity-framework, lucene.net

我想在我的项目中使用 Lucene 搜索，因为它很快，但是有一个问题。

我有数据库表用户和友谊。我想通过搜索表单找到用户的朋友。使用 lucene 我只能通过搜索查询找到所有用户，获取他们的 id，将他们放入实体框架，然后只获取用户的朋友，但是如果系统中的用户千万，而该用户的朋友只有几个呢？所以我需要带用户的朋友，然后通过搜索查询过滤他们。我怎样才能做到这一点？我听说过 Linq to Lucene，但我不确定它是否是我需要的。请帮我解决我的麻烦。

PS对不起我的英语，我来自乌克兰，英语说得不好:)

我找到了解决方案。我会将好友 ID 存储在索引中，并通过这些 ID 查找用户好友。这不是最好的解决方案，因为索引会经常被编辑，但我无法实现另一个想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T08:42:37.133

这可以通过使用[过滤器](http://lucenenet.apache.org/docs/3.0.3/d3/dc7/class_lucene_1_1_net_1_1_search_1_1_filter.html)来完成。这是一个简短的演示，它将结果限制为仅具有 FriendsWith:Beta 的那些文档。这将需要重新索引受更改的友谊连接影响的文档。TermsFilter类可以在 contrib 包中找到[。](http://lucenenet.apache.org/docs/3.0.3/d9/d81/class_lucene_1_1_net_1_1_search_1_1_terms_filter.html)

```
using System;
using System.Collections.Generic;
using Lucene.Net.Analysis;
using Lucene.Net.Documents;
using Lucene.Net.Index;
using Lucene.Net.Search;
using Lucene.Net.Store;
using Directory = Lucene.Net.Store.Directory;
using Version = Lucene.Net.Util.Version;

namespace ConsoleApplication {
    public static class Program {
        public static void Main(string[] args) {
            var directory = new RAMDirectory();
            var analyzer = new KeywordAnalyzer();

            using (var writer = new IndexWriter(directory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED)) {
                var users = new [] { "Alfa", "Beta", "Gamma", "Delta" };
                var friendships = new Dictionary<String, String[]> {
                    { "Alfa", new [] { "Beta", "Gamma", "Delta" } },
                    { "Beta", new [] { "Gamma", "Delta" } },
                    { "Gamma", new [] { "Delta" } },
                    { "Delta", new String[0] } // Noone likes Delta.
                };

                foreach (var userName in users) {
                    var doc = new Document();
                    doc.Add(new Field("Name", userName, Field.Store.YES, Field.Index.NO));

                    foreach (var friendName in friendships[userName]) {
                        doc.Add(new Field("FriendsWith", friendName, Field.Store.NO, Field.Index.NOT_ANALYZED_NO_NORMS));
                    }

                    writer.AddDocument(doc);
                }

                writer.Commit();
            }

            // This should be the real query provided by the user (city, age, description, ...)
            var query = new MatchAllDocsQuery();

            // Create a filter limiting the result to those being friends with the current user,
            // in this example the user "Beta".
            var filter = new TermsFilter();
            filter.AddTerm(new Term("FriendsWith", "Gamma"));

            var reader = IndexReader.Open (directory, readOnly: true);
            var searcher = new IndexSearcher(reader);

            var result = searcher.Search (query, filter, 10);
            foreach(var topDoc in result.ScoreDocs) {
                var doc = searcher.Doc(topDoc.Doc);
                var foundName = doc.Get ("Name");
                Console.WriteLine("Matched user '{0}'", foundName);
            }

            Console.ReadLine();
        }
    }
} 
```

# java - 存在哪些用于多维数据的纯 Java 库/组件？

> ID：14768128
> 
> 赞同：1
> 
> 时间：2013-02-08T08:01:51.610
> 
> 标签：java, collections, multidimensional-array, guava, olap

我目前正在使用 Guava 的[`Table`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html). 在某些情况下，我需要类似的东西：

```
Table<SomeMyKey, SomeMyKey, List<SomeMyDataClass>> 
```

我正在使用 Java 中的多维数据，因此拥有类似 a 的东西会很棒`Table`，但具有更多维度（不仅是行和列）并且具有值的集合。我知道我不能将它用于非常大量的数据，但是以当前的 RAM 量，我认为我应该能够维护数千个元素......

我知道嵌入式 Java DB，但我不想拥有所有的 SQL 开销......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:47:11.093

我认为您正在寻找的是 Olap4J：

[http://www.olap4j.org/](http://www.olap4j.org/)

另请查看[http://mondrian.pentaho.com/](http://mondrian.pentaho.com/)

# node.js - 如何将 tropo 与 node.js-socketstream 框架一起使用？

> ID：14768130
> 
> 赞同：0
> 
> 时间：2013-02-08T08:01:55.740
> 
> 标签：node.js, socketstream, tropo

在我的应用程序中，我使用带有 socketstream 框架的 node.js。现在我需要使用 tropo 模块来发送短信、接收短信、拨打电话和接听来电。我使用 npm 安装了 tropo-webapi。我添加了这个节点代码在服务器端。运行以下代码时，我没有得到任何输出。我不知道如何在 tropo 网站中链接此文件以及如何接收短信和电话。

```
 exports.actions = function(req, res, ss) {
  return{

sendMessage:function(){

    var tropoAPI = require('tropo-webapi');
    var tropo = new tropoAPI.TropoWebAPI(); 
  tropo.call("+18197924547", null, null, null, null, null, "SMS", null,  null,null);
        tropo.say("HI How Are You!!");

    },
makeCall:function(){

      var tropoAPI = require('tropo-webapi');
      var tropo = new tropoAPI.TropoWebAPI(); 
      tropo.call("+18197924547");
      tropo.say("Hi,how ary yoo!");

    }

};

     }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:28:10.053

因此，您没有指定此片段来自哪个文件，但我感觉到，它来自`server/rpc/<yourfilename>`远程过程调用所在的位置。
！！！注意`<yourfilename>`

你定义的方法是为客户端生成的，他可以通过套接字接口触发它，让我写一个片段，我想你会明白：
- 让我们写入这个文件 =>`client/code/app/app.js`

```
ss.rpc('<yourfilename>.sendMessage','here comes params which is now a string'); 
```

要了解这个`ss`对象是什么`client/code/app/entry.js`，你会看到它。

# java - SWTError：未实现[多个显示]

> ID：14768131
> 
> 赞同：2
> 
> 时间：2013-02-08T08:01:58.797
> 
> 标签：java, swt

我正在尝试在按钮单击事件中打开[SWT 文件浏览器。](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/SimpleFileBrowserinSWTTable.htm)

```
tnAddFiles.addSelectionListener(new SelectionAdapter() {
                @Override
                public void widgetSelected(SelectionEvent e) {
                     new FileBrowser();

                }
            }); 
```

我收到此错误

```
Exception in thread "main" org.eclipse.swt.SWTError: Not implemented [multiple displays]
    at org.eclipse.swt.SWT.error(SWT.java:4387)
    at org.eclipse.swt.widgets.Display.checkDisplay(Display.java:706)
    at org.eclipse.swt.widgets.Display.create(Display.java:807)
    at org.eclipse.swt.graphics.Device.<init>(Device.java:130)
    at org.eclipse.swt.widgets.Display.<init>(Display.java:699)
    at org.eclipse.swt.widgets.Display.<init>(Display.java:690)
    at com.rawzor.ui.FileBrowser.<init>(FileBrowser.java:34) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T09:01:13.510

我猜你正在使用该网站的实现。如果是这种情况，则此代码使用以下行：

```
Display display = new Display(); 
```

这将初始化一个新的`Display`. 由于您的应用程序已经有一个，`Display`这将导致

> SWTError：未实现[多个显示]

解决方案是使用内置类[`FileDialog`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FFileDialog.html)进行文件选择：

```
FileDialog fd = new FileDialog(shell, SWT.OPEN);
fd.setText("Open file");
fd.setFilterPath("C:/");
String[] filterExt = { "*.txt", "*.doc", ".rtf", "*.*" };
fd.setFilterExtensions(filterExt);
String file= fd.open();
System.out.println(file); 
```

或[`DirectoryDialog`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FDirectoryDialog.html)用于目录选择：

```
DirectoryDialog dlg = new DirectoryDialog(shell);
dlg.setText("Choose directory");
dlg.setFilterPath("C:/");
String dir = dlg.open();
System.out.println(dir); 
```

# node.js - 向 node.js 中的现有 json 对象添加新属性

> ID：14768132
> 
> 赞同：28
> 
> 时间：2013-02-08T08:02:00.517
> 
> 标签：node.js, mongodb, mongoose

我有一个像这样的对象

```
==================records=========={ Id: 5114a3c21203e0d811000088,
  userId: 'test',
  sUserId: test,
  userName: 'test',
  url: 'test',
  Title: 'test'
} 
```

我需要在上面的记录中添加一个新字段**Name : 'test'**，我尝试给 records.Name = name，它没有用。

请帮忙

谢谢，普拉茨

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-05-04T18:39:24.660

我假设您正在尝试将属性添加到返回的 Mongoose 文档以在其他地方重用它。Mongoose 返回的文档不是直接的 JSON 对象，您需要将它们转换为对象以向它们添加属性。以下应该有效：

```
//... record is a mongoose Document
var r = record.toObject();
r.Name = 'test';
console.log("Record ",r); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-11T20:29:11.720

那些发现这个问题的人，OP 在原始问题下方的评论中提到，这个问题的解决方案是：

```
records.set('Name', 'test') 
```

这添加了一个新属性，称为`Name`具有值`test`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-18T20:16:46.727

只需使用，

```
var convertedJSON = JSON.parse(JSON.stringify(mongooseReturnedDocument); 
```

进而，

```
convertedJSON.newProperty = 'Hello!' 
```

'你好！' 可以是任何东西、数字、对象或 JSON 对象文字。

干杯! :)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-06-08T22:31:16.640

我遇到了类似的问题，并希望我数小时的存在挫败感能帮助处于同样情况的其他人。我倾向于相信通过 Mongoose 返回的文件是只读的。这实际上是不正确的。

但是，您不能将不在架构中的属性分配给文档。

因此，除非您的架构具有以下内容：

```
{
    Name: {String}
} 
```

尝试将 Name 分配给您的文档时，您会经常感到沮丧。

现在，上面的答案中有一些对我有用的解决方法，但它们并没有解决问题的根源：

```
myDocument.toObject();
JSON.parse(JSON.stringify(myDocument); 
```

这些会起作用，但在我看来，它们只是隐藏了问题。真正的问题是 Mongoose 比我们意识到的更聪明，并且正在强制执行您的模式，因为它应该。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-13T03:06:46.077

您也可以使用[lea()](http://mongoosejs.com/docs/api.html#query_Query-lean)方法，例如`const users = await Users.find().lean().exec()`

从猫鼬文档中：

> 从启用了精简选项的查询返回的文档是纯 javascript 对象，而不是 MongooseDocuments。他们没有应用保存方法、getter/setter 或其他 Mongoose 魔法

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-29T07:51:58.310

我的变种。

如果用您定义的架构`{strict:false}` 可以简单地添加新属性

`recorcd.newProp = 'newvalue';`

如果与您一起定义的架构`{strict:true}`可以将 Mongoose 对象转换为前面提到的对象或使用命令

`record.set('newProp','newValue',{strict:false})`

请参阅[http://mongoosejs.com/docs/api.html#document_Document-schema](http://mongoosejs.com/docs/api.html#document_Document-schema)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-08T08:10:20.780

如果您已将此对象加载到`records`中，则两者`records.Name = "test"`或`records['Name'] = "test"`都将起作用。您要么没有正确加载对象，要么正在向其中插入未定义的值。

测试：添加`console.log(records.userId)`，这应该将“测试”打印到终端。

同时添加`console.log(name)`. 如果你得到`ReferenceError: name is not defined`，你显然不能这样做：`records.Name = name`

# logging - 在 Windows 8 Metro 应用程序中收集分析和错误的策略

> ID：14768134
> 
> 赞同：0
> 
> 时间：2013-02-08T08:02:07.257
> 
> 标签：logging, error-handling, microsoft-metro, analytics, winjs

我已经使用 javascript 构建了一个 Metro 应用程序，我已经编写了大约 6000 行代码。

我正在寻找收集两件东西的方法

1.  用户在做什么，用户行为分析
2.  用户可能面临的错误，收集日志文件或其他策略。

有哪些可用的选项以及有哪些可用的策略来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:07:42.867

我会使用云连接来完成，以便在集中位置轻松查看使用情况。我会在用户本地存储中创建日志消息、分析点、错误等的集合，然后在应用程序启动时（可能每隔几分钟）启动一个异步服务，以确保用户连接到互联网，然后我会将记录从本地存储推送到 Azure 移动服务。如果您以前没有设置过 Azure 移动服务，那么它们超级简单、便宜且方便。您可以创建一个表来存储数据点并为用户的收据 ID 添加一个额外的属性（唯一标识他们和他们的机器）。现在，您始终拥有一张表格，用于记录所有用户的使用情况数据。那是我的 0.02 美元。

# python - 如何使 setUpClass 中的 python 单元测试失败？

> ID：14768135
> 
> 赞同：44
> 
> 时间：2013-02-08T08:02:10.607
> 
> 标签：python, unit-testing, python-2.7

我正在使用 python 进行一些单元测试，并在`setUpClass`. 如何在中抛出`unitest`- ，如下面的简单示例：`fail``setUpClass`

```
class MyTests(unittest.TestCase):

    @classmethod
    def setUpClass(cls):    
        unittest.TestCase.fail("Test")

    def test1(self):
        pass

if __name__ == '__main__':
    unittest.main() 
```

给出错误`TypeError: unbound method fail() must be called with TestCase instance as first argument (got str instance instead)`。

我知道我得到的错误失败是一个实例方法，我还没有一个实例`MyClass`。即时使用实例

```
unittest.TestCase().fail("Test") 
```

也不起作用，因为`unittest.TestCase`它本身没有测试。当不满足`MyClass`某些条件时，任何想法如何使所有测试失败？`setUpClass`

后续问题：有没有办法查看测试`setUpClass`？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-08T08:05:58.733

`self.fail("test")`放入您的 setUp 实例方法未通过所有测试

我认为在类级别执行此操作的最简单方法是创建一个类变量，例如：

```
@classmethod
def setUpClass(cls):
   cls.flag = False

def setUp(self):
   if self.flag:
       self.fail("conditions not met") 
```

希望这是你想要的。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-08T08:16:04.087

使用简单的断言应该可以工作

```
assert False, "I mean for this to fail" 
```

# iphone - 在不是 ICarousel 中的子视图的标签中显示 iCarousel 的当前索引

> ID：14768142
> 
> 赞同：1
> 
> 时间：2013-02-08T08:02:54.067
> 
> 标签：iphone, ios, uiview, uiscrollview

我在我的应用程序中使用 iCarousel，我需要获取 iCarousel 的当前索引并将该索引显示在标签（self.view 的子视图）中，该标签不是 iCarousel 的子视图。我能够得到当前的索引

```
int index=iCarousel.currentIndex; 
```

如何在每次滚动轮播时更新 label.text 中的索引。在哪种方法中我必须编写代码来更新标签。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T08:11:56.657

每当您滚动时，都会调用以下委托，因此您可以在此处更新您的标签

```
- (void)carouselCurrentItemIndexUpdated:(iCarousel *)carousel1
{
  int index=carousel1.currentIndex;
  yourlabel.text = [NSString stringWithFormat:@"%d",index];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T08:13:04.383

[对于使用 iCarousel，最好在从iCarousel 文档](https://github.com/nicklockwood/iCarousel)开始实施之前彻底研究其文档。

因此，对于您面临的问题，文档中提供了 2 种方法 -

```
- (NSInteger)indexOfItemView:(UIView *)view; 
```

> 轮播中给定项目视图的索引。适用于项目视图和占位符视图，但是占位符视图索引与数据源使用的索引不匹配，并且可能为负数（有关更多详细信息，请参见上面的 indexsForVisibleItems 属性）。此方法仅适用于可见项目视图，并且将为当前未加载的视图返回 NSNotFound。对于所有当前加载的视图的列表，请使用 visibleItemViews 属性。

```
- (NSInteger)indexOfItemViewOrSubview:(UIView *)view 
```

> 此方法为您提供传递的视图或包含作为参数传递的视图的视图的项目索引。它的工作原理是从传递的视图开始向上遍历视图层次结构，直到找到项目视图并返回其在轮播中的索引。如果没有找到当前加载的项目视图，则返回 NSNotFound。此方法对于处理嵌入在项目视图中的控件上的事件非常有用。这允许您将所有项目控件绑定到视图控制器上的单个操作方法，然后确定触发该操作的控件与哪个项目相关。您可以在 Controls Demo 示例项目中看到此技术的示例。

希望这可以帮助 ！！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-06T16:15:32.330

有点晚了，但对其他人来说，以下委托方法对我有用（有多个轮播）

```
- (void)carouselCurrentItemIndexDidChange:(iCarousel *)carousel
{
    NSLog(@"%s", __FUNCTION__);

    if (carousel == carousel2) {
        NSLog(@"here");
        long (or int) currentIndex = carousel.currentItemIndex;

    }
} 
```

# html - 使用方案时，浏览器如何确定 href 中的 URL 是否是相对的？

> ID：14768153
> 
> 赞同：4
> 
> 时间：2013-02-08T08:04:08.430
> 
> 标签：html, http, url, browser, url-protocol

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:24:54.417

The href value is parsed as a URI (see RFC 3986). As a result of the parsing, the browser will know that this was an absolute URI, not a relative reference.

As a matter of fact, unescaped ":" is allowed in the path component; it's just that they need to occur after the first "/"; otherwise they could be parsed as scheme delimiter if the preceding characters are all valid scheme name characters.

See [http://greenbytes.de/tech/webdav/rfc3986.html#path](http://greenbytes.de/tech/webdav/rfc3986.html#path)

The RFC also has the following to say in [section 4.2](https://www.rfc-editor.org/rfc/rfc3986#section-4.2) (titled “Relative Reference”): “A path segment that **contains a colon character** (e.g., "this:that") cannot be used as the first segment of a relative-path reference, as it would be mistaken for a scheme name. Such a segment must be preceded by a dot-segment (e.g., "./this:that") to make a relative-path reference.” (emphasis added).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:08:21.713

See [RFC 3966](https://www.rfc-editor.org/rfc/rfc3966) for the `tel` URI specification, and [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) for the more generic URL specification. It's the colon (`:`) that separates scheme from the "hier part".

# javascript - 带有条件的Javascript中的特定正则表达式

> ID：14768154
> 
> 赞同：1
> 
> 时间：2013-02-08T08:04:09.103
> 
> 标签：javascript, regex, pattern-matching, string-matching

如何在 JavaScript 中格式化正则表达式：

```
http://localhost:3000/sales?&tp=Home+Stay&am=Pool&pl=1620&pt=Flash+Sale&st=5 
```

我想得到**&pl=和****&** pl=之后的所有数字。所以在这种情况下，结果将是 &pl=1620。请帮助如何执行此操作？你的帮助对我来说意义重大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:07:21.500

这个脚本可以解决问题：

```
var regex = /&pl=\d*/;
var match = regex.exec(yourtext)[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:08:38.403

遵循正则表达式应该这样做

```
/&pl=\d*/.exec('http://localhost:3000/sales?&tp=Home+Stay&am=Pool&pl=1620&pt=Flash+Sale&st=5')[0] 
```

演示：[菲德尔](http://jsfiddle.net/arunpjohny/bc4MG/)

# android - 重新进入活动时，Android 应用程序中的活动屏幕变为空白

> ID：14768156
> 
> 赞同：2
> 
> 时间：2013-02-08T08:04:13.343
> 
> 标签：android, user-interface

我有一个包含列表视图的活动。当另一个活动显示此活动时，一切正常，我能够返回到第一个活动。但是，如果我稍后再次调用相同的活动，该活动将启动并且代码确实会被执行。我什至可以看到列表视图的适配器被调用，所以一切似乎都工作正常。但是一旦 onCreate 完成并且 listview 完成了显示其项目的工作，该活动的屏幕就会变成空白。更糟糕的是，如果我按下返回按钮，我将无法返回到第一个活动。我的应用程序没有挂起，因为我确实在后台运行了一项服务，并且可以通过在其中放置断点来验证它是否仍在运行。此外，我可以在 Eclipse 中看到该应用程序仍在运行。那么是什么导致屏幕变黑并导致键盘冻结？我可以发布代码，但它相当复杂，目前只是在寻找线索。

# python - 从Python类中的函数获取返回值

> ID：14768162
> 
> 赞同：6
> 
> 时间：2013-02-08T08:04:55.737
> 
> 标签：python

我试图简单地使用带有返回值的简单函数从我的类中获取值，我确信这是一个微不足道的错误，但我对 python 很陌生

我有一个简单的类设置如下：

```
class score():
#initialize the score info 
    def __init__(self):
        self.score = 0
        self.num_enemies = 5
        self.num_lives = 3

    # Score Info
    def setScore(num):
        self.score = num

    # Enemy Info
    def getEnemies():
        return self.num_enemies

    # Lives Info
    def getLives():
        return self.getLives

etc..... 
```

比我这样创建类的实例：

```
scoreObj = score()

for enemies in range(0, scoreObj.getEnemies):
    enemy_sprite.add(enemy()) 
```

我收到错误消息说需要一个整数，但它有一个实例方法

获取此信息的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T08:09:06.630

`scoreObj.getEnemies`是对方法的引用。如果你想调用它，你需要括号：`scoreObj.getEnemies()`.

您应该考虑为什么要为此使用方法，而不是`self.num_enemies`直接阅读。在 Python 中不需要像这样的琐碎的 getter/setter 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T08:09:50.660

python中成员函数的第一个参数是对Object的引用。

传统上您称其为“self”，但无论您如何称呼第一个参数，它都指回“self”对象：

每当我收到关于 python 中参数类型的奇怪错误时，我都会检查是否忘记了 self 参数。被这个bug咬过几次。

```
class score():
#initialize the score info 
    def __init__(self):
        self.score = 0
        self.num_enemies = 5
        self.num_lives = 3

    # Score Info
    def setScore(self, num):
        self.score = num

    # Enemy Info
    def getEnemies(self):
        return self.num_enemies

    # Lives Info
    def getLives(foo): #foo is still the same object as self!!
        return foo.num_lives
        #Works but don't do this because it is confusing 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T08:28:01.297

## 此代码有效：

```
class score():
    def __init__(self):
        self.score = 0
        self.num_enemies = 5
        self.num_lives = 3

    def setScore(self, num):
        self.score = num

    def getEnemies(self):
        return self.num_enemies

    def getLives(self):
        return self.getLives

scoreObj = score()

for enemy_num in range(0, scoreObj.getEnemies()):
    print enemy_num
    # I don't know what enemy_sprite is, but
    # I commented it out and just print the enemy_num result.
    # enemy_sprite.add(enemy()) 
```

**学过的知识：**

类函数必须**始终**采用一个参数，`self`。那是因为当你在类中调用一个函数时，总是以*类名*作为调用对象来调用它，比如：

```
scoreObj = score()
scoreObj.getEnemies() 
```

类对象在哪里`x`，它将`getEnemies()`作为根对象传递给，意思是发送给类的第一个参数。

其次，当调用类中的函数（或根本调用）时，总是以 结尾，`()`因为这是在 Python 中调用某些东西的定义。

然后，问问自己，*“为什么我没有像这样获取'scoreObj.num_lives'？我是否节省了处理能力？”* 按照你的选择去做，但如果你直接从类对象中获取值会更快，除非你想同时计算东西。那么你的逻辑就很合理了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T08:08:06.130

`getEnemies`是一个函数，所以像任何其他函数一样调用它`scoreObj.getEnemies()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T08:08:30.173

你犯了一个简单的错误：

```
scoreObj.getEnemies() 
```

# asp.net - 将 Select 命令作为参数传递并在临时表中执行

> ID：14768163
> 
> 赞同：2
> 
> 时间：2013-02-08T08:04:56.040
> 
> 标签：asp.net, .net, sql, sql-server-2008

我想将`SELECT`查询作为参数传递给`STORED PROCEDURE`SQL Server 2008。
在该 sp 中执行该查询并存储到临时表，然后我想在该临时表的 2 字段上循环游标。

那我该怎么做？？

主要是这部分：**`execute that query and store to temp table`**

编辑 ：

询问 ：

```
SELECT * FROM SomeView WHERE COL1 = '1' AND COL = GETDATE() ORDER BY COL0 
```

SomeView 中有很多字段，但我只想要 2 个：COLS1、CLOS2 我只想在这 2 个字段上循环 CURSOR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:38:09.800

以下是将动态 SQL 查询的查询结果存储到临时表的方法：

```
DECLARE @sql NVARCHAR(1000)
SET @sql = 'SELECT COL1, COL2 FROM SomeView WHERE COL1 = ''1'' AND COL = GETDATE() ORDER BY COL0'

CREATE TABLE #temp(col1 <yourDataType>, col2 <yourDataType>)
INSERT INTO #temp EXEC sp_executesql @sql 
```

但是您应该真正考虑替代游标，游标会降低性能，游标逐行操作，而查询执行基于集合的操作。SQL Server 针对基于集合的数据访问进行了优化。如果您可以编写查询，请不要使用游标。

# gradle - 更改生成的war文件的名称并复制war文件

> ID：14768164
> 
> 赞同：14
> 
> 时间：2013-02-08T08:04:56.830
> 
> 标签：gradle

我想在部署到存储库之前设置战争任务输出的文件名。例如项目名称是`abc`，最初它会导致 abc-1.0.0-SNAPSHOT.war

但我希望应该有两个生成的战争文件具有相同的内容：

*   `def-1.0.0-SNAPSHOT.war`
*   `ghi-1.0.0-SNAPSHOT.war`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-10-01T12:56:07.720

在 build.gradle 中，您可以设置存档名称：

```
war.archiveName "YOUR_SPECIAL_NAME.war" 
```

[毕业参考](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.bundling.War.html#org.gradle.api.tasks.bundling.War%3aarchiveName)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-09T11:50:27.730

另一个，例如：

```
war {
    baseName = 'service'
    version = '0.0.1-SNAPSHOT-' + System.currentTimeMillis();
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-28T13:47:57.120

```
task doPack(type: War, dependsOn: []) {
    archiveName "ROOT.war" 
```

这对我有用

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-26T10:42:47.347

对于 gradle 版本 5 及更高版本，它们已弃用属性“baseName”和“archiveName”。

因此，您可以改用“archivesBaseName”。

```
war {
    archivesBaseName = 'name'
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-13T16:36:15.750

另一种解决方案：

```
war {
    baseName = 'name'
    archiveName = "${baseName}.${extension}"
} 
```

# android - IOUtils 异常 Android

> ID：14768166
> 
> 赞同：0
> 
> 时间：2013-02-08T08:04:58.043
> 
> 标签：android

我正在实施扩展文件。我使用技术从这个[答案](https://stackoverflow.com/questions/11715855/steps-to-create-apk-expansion-file)中读取 zip 文件。一切都很好，我得到的唯一错误是在 IOUtils 上。其中说 IOUtils 无法解决。我的项目api级别是3.0及以上。

这是行：

```
 **IOUtils**.copy(inputStream, outputStream); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:14:04.040

IOUtils 类可用作 Apache Commons 库。可能您需要下载 jar 并将其放在 libs 目录中，然后才能使用它。

或者将以下行添加到您的 build.gradle 并同步您的项目。

```
compile 'commons-io:commons-io:2.5' 
```

# java - 将表示键值对的字符串转换为 Map

> ID：14768171
> 
> 赞同：41
> 
> 时间：2013-02-08T08:05:14.223
> 
> 标签：java, dictionary

如何将字符串转换为地图：

```
Map m = convert("A=4 H=X PO=87"); // What's convert?
System.err.println(m.getClass().getSimpleName()+m); 
```

预期输出：

```
HashMap{A=4, H=X, PO=87} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-08T08:11:45.210

没有必要重新发明轮子。Google Guava 库提供了[`Splitter`该类](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/Splitter.html)。

以下是如何将它与一些测试代码一起使用：

```
package com.sandbox;

import com.google.common.base.Splitter;
import org.junit.Test;

import java.util.Map;

import static org.junit.Assert.assertEquals;

public class SandboxTest {

    @Test
    public void testQuestionInput() {
        Map<String, String> map = splitToMap("A=4 H=X PO=87");
        assertEquals("4", map.get("A"));
        assertEquals("X", map.get("H"));
        assertEquals("87", map.get("PO"));
    }

    private Map<String, String> splitToMap(String in) {
        return Splitter.on(" ").withKeyValueSeparator("=").split(in);
    }

} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-10-12T16:50:36.120

Java 8 来救援！

```
import static java.util.stream.Collectors.*;

Map<String, String> result = Arrays.stream(input.split(" "))
    .map(s -> s.split("="))
    .collect(Collectors.toMap(
        a -> a[0],  //key
        a -> a[1]   //value
    )); 
```

注意：假设没有重复。否则请查看第三个“mergeFunction”参数。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-08T08:07:18.993

你不需要图书馆来做到这一点。您只需要使用 StringTokenizer 或[String.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)并遍历令牌以填充地图。

库的导入及其设置几乎与您自己完成所需的三行代码一样大。例如 ：

```
public static Map<String, String> convert(String str) {
    String[] tokens = str.split(" |=");
    Map<String, String> map = new HashMap<>();
    for (int i=0; i<tokens.length-1; ) map.put(tokens[i++], tokens[i++]);
    return map;
} 
```

请注意，在现实生活中，与您的业务需求高度耦合的令牌和字符串的验证可能比您在此处看到的代码更重要。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-12-30T10:30:22.643

```
public static Map<String, String> splitToMap(String source, String entriesSeparator, String keyValueSeparator) {
    Map<String, String> map = new HashMap<String, String>();
    String[] entries = source.split(entriesSeparator);
    for (String entry : entries) {
        if (!TextUtils.isEmpty(entry) && entry.contains(keyValueSeparator)) {
            String[] keyValue = entry.split(keyValueSeparator);
            map.put(keyValue[0], keyValue[1]);
        }
    }
    return map;
} 
```

现在您可以将它用于不同类型的条目/键值分隔符，就像这样

```
Map<String, String> responseMap = splitToMap(response, " ", "="); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-08T08:07:45.837

用“”拆分字符串，然后用“=”拆分每个项目并将对放入映射中。为什么你需要“图书馆”来做这样基本的事情？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-20T08:35:05.133

```
private HashMap<String, String> convert(String str) {
    String[] tokens = str.split("&");
    HashMap<String, String> map = new HashMap<String, String>();
    for(int i=0;i<tokens.length;i++)
    {
        String[] strings = tokens[i].split("=");
        if(strings.length==2)
         map.put(strings[0], strings[1].replaceAll("%2C", ","));
    }

    return map;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-10T09:03:39.817

当您在不同的行中有键值对时，让我针对特定情况提出另一种方法：使用 Java 的内置`Properties`类：

```
Properties props = new Properties();
props.load(new StringReader(s)); 
```

## 好处：

*   短的
*   适用于任何 Java 版本
*   为您提供了一个现成的 Map<Object, Object> 还提供了方便的`String props.getProperty(String)`方法
*   `StringReader`具有内置 8k 缓冲区（您可以在兆输入上调整缓冲）
*   对不同的换行符保持稳定
*   您可以基于默认映射`new Properties(defaultsMap)`

## 警告（可能是美德或恶习）：

*   对“.properties”格式有特殊的解析规则（你可能想在`Properties`课堂上偷看以了解更多信息）：
    *   从键/值中修剪空格/制表符
    *   具有特殊含义的字符：
        *   `!`,`#`行首是注释
        *   `=`或者`:`是键值分隔符
        *   `\`用作 unicode/特殊字符的转义字符。例如，您可能希望使用`s = s.replace("\\", "\\\\");`
*   生成的 Map 基于`HashTable`在大多数情况下不需要同步

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-01-30T04:47:01.963

```
String elementType = StringUtility.substringBetween(elementValue.getElementType(), "{", "}");
Map<String, String>  eleTypeMap = new HashMap<String, String>();
StringTokenizer token = new StringTokenizer(elementType, ",");
while(token.hasMoreElements()){
    String str = token.nextToken();
    StringTokenizer furtherToken = new StringTokenizer(str,"=");
    while(furtherToken.hasMoreTokens()){
        eleTypeMap.put(furtherToken.nextToken(), furtherToken.nextToken());
    }
} 
```

# django - Django：覆盖单个模型字段验证

> ID：14768173
> 
> 赞同：1
> 
> 时间：2013-02-08T08:05:21.307
> 
> 标签：django, django-models, django-forms

我在一种情况下使用 django.db.models.fields.DecimalField，但它的验证错误非常糟糕。

就像，当用户输入 3,4 而不是 3.4 时，它会说 - '输入一个数字'。在某些国家，3,4 和 3.4 一样多。至少对于那些可能不精通计算机的人来说。

因此，出于这个原因，我试图覆盖此字段验证，以便我可以自己验证它。

我的问题是 - 在调用 modelforms clean_my_field() 之前，模型自己的验证工作并且它已经引发了错误。

所以我查找了[https://docs.djangoproject.com/en/dev/ref/models/instances/#validating-objects](https://docs.djangoproject.com/en/dev/ref/models/instances/#validating-objects)

读完后我明白我可以做到

```
def full_clean(self):
    super(MyModel, self).full_clean(exclude = 'my_field') 
```

并且 my_field 将被排除在验证之外，我可以自己验证它

```
def clean(self)
    pass
    #how do i access cleaned data here anyway?
    #self.cleaned_data does not exist
    #is self.my_field the only way? 
```

但唉 - 它不起作用。self.my_field 值是 clean() 方法中的旧值，clean_data 无处可寻。

这一切让我觉得我的做法是错误的。我想我可以编写自己的字段来扩展 django 的 DecimalField。我认为这种方法会起作用......有人可以为我解决这个问题 - 为什么它不起作用。如果它不起作用，为什么会在那里排除？顺便说一句，Django 版本 1.4.2。

艾伦

编辑：我挖得更深。似乎即使我覆盖了所有模型清理方法并且根本不在它们中使用超级 - 字段仍然在某个时候被清理并且到那时已经引发了错误。

我想我会在这种情况下对 django.db.models.fields.DecimalField 做一些扩展。

关于为什么在 full_clean 方法中存在排除的答案仍然很好。如果它不起作用，为什么它在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T02:54:12.263

我知道这是一个老问题，但对于那些没有找到答案的问题，我所做的是在管理站点的 ModelAdmin 中添加 localize=True ：

```
formfield_overrides = {
    models.DecimalField: {'localize': True},
} 
```

这将使 FormField 语言环境感知，接受逗号作为小数分隔符（当然取决于当前语言环境）。它还将显示本地化。

[https://docs.djangoproject.com/en/dev/topics/i18n/formatting/#locale-aware-input-in-forms](https://docs.djangoproject.com/en/dev/topics/i18n/formatting/#locale-aware-input-in-forms)

如果您的目标是单个 DecimalField 或者您正在编写自定义表单或模型表单，只需按照 URL 上的说明进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:11:24.677

```
def views_name(request):
    ......
    field = dec_num(form.cleaned-data['....'])
    .........

    return render(request, 'page.html', {.....})

def dec_num(value):
    return value.replace(",",".") 
```

# browser - 自动禁用 Web 浏览器上的 JavaScript

> ID：14768179
> 
> 赞同：0
> 
> 时间：2013-02-08T08:05:55.977
> 
> 标签：browser

我需要一种在网络浏览器中“禁用 JavaScript”/“不运行 JavaScript”的方法。

是否可以使用 JavaScript 或其他一些自动方式来做到这一点？

**更新：**这是为什么？很简单，有一些“在线电视网站”使用多个 iframe 指向“跨站点 url”，而且总是出现多个“广告”弹出窗口很烦人。通过编写我自己的网络浏览器“插件/扩展”，我尝试“删除”html节点和一些Javascript，它适用于“主页”代码，不适用于iframe“跨域URL”......所以我认为在电影开始后禁用 javascript 将是一个不错的解决方案。

**更新 2：** 我想要的视频是 iframe 级联链的结果....跨域”通信正在共享“运行时密钥”以避免我想要完成的事情（也许有更多时间我可以做到）但这就是为什么我认为一个简单快速的解决方案就是在电影开始后禁用 javascript。

**注意**：其他扩展程序（例如 Adblock 和类似程序）不起作用，因为网站检测到它并且视频永远不会加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:08:05.790

不，不可能使用另一个 JavaScript 加载项/扩展程序以编程方式禁用用户浏览器上的 JavaScript。

但是，如果您使用 PHP 作为代理来拦截您想要的页面，并去除所有脚本标记，则可能是可能的。您甚至可以提取所需的视频 URL 并使用另一个（闪存？）播放器播放。

如果您是系统管理员并且想在您网络的所有计算机上禁用 JavaScript，请改为在 SuperUser 上发帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:22:46.827

您不能禁用，但可以覆盖 javascript 函数。 `alert = function(){} alert("hello")`

您甚至可以通过标签名称杀死这些 iframe。

# ruby-on-rails - KineticJS：匿名函数中没有方法“_addId”

> ID：14768182
> 
> 赞同：0
> 
> 时间：2013-02-08T08:06:08.820
> 
> 标签：ruby-on-rails, kineticjs

因此，尝试完成 KineticJS.Image 教程，但我遇到了一个问题。

这有效：

```
$(document).ready( function() { 
  var icon = new Image();    
  icon.onload = function() { 
    var stage = new Kinetic.Stage({ 
      container: 'canvas',      
      width: 730,            
      height: 700,           
    });
    var layer = new Kinetic.Layer();

    var im = new Kinetic.Image({    
      x: -14,
      y: -13,
      image: icon,
      width: 30,
      height: 30
    });
    layer.add(im);        
    stage.add(layer);        
  };                         
  icon.src = '#{asset_path "icons.png"}';
}); 
```

这与教程代码非常接近，但没有：

```
$(document).ready( function() { 
  var stage = new Kinetic.Stage({
    container: 'targetCanvas',
    width: 730,
    height: 700,
  });
  var layer = new Kinetic.Layer();
  var icon = new Image();    
  icon.onload = function() { 
    var im = new Kinetic.Image({
      image: icon,
      width: 30,
      height: 30,
    });
    layer.add(im);        
    stage.add(layer);        
  };                         
  icon.src = '#{asset_path "designer_icons.png"}';
}); 
```

它抛出：

```
Uncaught TypeError: Object #<Object> has no method '_addId' kinetic.js:28
  Kinetic.Container.add
  Kinetic.Stage.add
  icon.onload 
```

我的环境中可能有一些严重的问题，因为这是一个项目的严重黑客工作（Rails w/Backbone、Require、Bootstrap 和 Kinetic），而且我真的不知道 javascript 或各种库，所以我我在黑暗中摸索着。

任何想法是什么导致了这个以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:56:07.410

似乎 stage 没有正确初始化为 Kinetic.Node 。你能确定这存在吗？

```
<div id="targetCanvas"></div> 
```

另外，请确保您使用的是 4.3.1 版本？我没有看到 4.3.1 有那条线。

如果以上没有帮助，请发布您的示例，以便我看一下。

# php - php json_encode() 输出随机跳过字符

> ID：14768188
> 
> 赞同：0
> 
> 时间：2013-02-08T08:06:44.543
> 
> 标签：php, json, output, buffered

我在亚马逊 ec2 实例上使用 PHP 5.3.15 (cli)（构建时间：2012 年 7 月 20 日 23:10:20）。当我调用 json_encode() 时，生成的 JSON 会随机跳过字符，因此 JSON 不再有效。即使使用完全相同的参数/数据进行调用，这种情况也只会在某些时候发生。奇怪的是它发生在不同的地方，随机的地方，没有模式。在我的本地 MAMP 安装中，相同的数据和相同的代码以及相同版本的 PHP 不会发生这种情况

> ..."updateTime":"2012-12-21 03:24:14","createTime":"2012-12-21:"21","updateTime":"2012-12-25 19:33:25 “，……

你可以在 21:"21" 看到上面的效果。我什至不知道从哪里开始解决这个问题。

我已经重新启动，甚至创建了新的服务器虚拟实​​例。

我非常需要帮助。你能提出的任何建议都会很棒！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:11:12.843

您必须为 QUOT 或其他设置 json 编码参数

```
 $json=json_encode($array,JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP | JSON_UNESCAPED_UNICODE); 
```

这是 php.net 上的 json 编码示例

```
 <?php
   $a = array('<foo>',"'bar'",'"baz"','&blong&', "\xc3\xa9");

   echo "Normal: ",  json_encode($a), "\n";
   echo "Tags: ",    json_encode($a, JSON_HEX_TAG), "\n";
   echo "Apos: ",    json_encode($a, JSON_HEX_APOS), "\n";
   echo "Quot: ",    json_encode($a, JSON_HEX_QUOT), "\n";
   echo "Amp: ",     json_encode($a, JSON_HEX_AMP), "\n";
   echo "Unicode: ", json_encode($a, JSON_UNESCAPED_UNICODE), "\n";
   echo "All: ",     json_encode($a, JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT |JSON_HEX_AMP | JSON_UNESCAPED_UNICODE), "\n\n";

   $b = array();

   echo "Empty array output as array: ", json_encode($b), "\n";
   echo "Empty array output as object: ", json_encode($b, JSON_FORCE_OBJECT), "\n\n";

   $c = array(array(1,2,3));

   echo "Non-associative array output as array: ", json_encode($c), "\n";
   echo "Non-associative array output as object: ", json_encode($c, JSON_FORCE_OBJECT), "\n\n";

    $d = array('foo' => 'bar', 'baz' => 'long');

   echo "Associative array always output as object: ", json_encode($d), "\n";
   echo "Associative array always output as object: ", json_encode($d, JSON_FORCE_OBJECT), "\n\n";
 ?> 
```

输出：

```
 Normal: ["<foo>","'bar'","\"baz\"","&blong&","\u00e9"]
 Tags: ["\u003Cfoo\u003E","'bar'","\"baz\"","&blong&","\u00e9"]
 Apos: ["<foo>","\u0027bar\u0027","\"baz\"","&blong&","\u00e9"]
 Quot: ["<foo>","'bar'","\u0022baz\u0022","&blong&","\u00e9"]
 Amp: ["<foo>","'bar'","\"baz\"","\u0026blong\u0026","\u00e9"]
 Unicode: ["<foo>","'bar'","\"baz\"","&blong&","é"]
 All: ["\u003Cfoo\u003E","\u0027bar\u0027","\u0022baz\u0022","\u0026blong\u0026","é"]

 Empty array output as array: []
 Empty array output as object: {}

 Non-associative array output as array: [[1,2,3]]
 Non-associative array output as object: {"0":{"0":1,"1":2,"2":3}}

 Associative array always output as object: {"foo":"bar","baz":"long"}
 Associative array always output as object: {"foo":"bar","baz":"long"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T20:00:29.637

我使用代理来分析发生了什么。我紧接着提出了两个相同的请求。重要的是要注意请求是在objective-c中，并且可能不是php破坏了，而只是第二个请求取消了第一个请求。

# android - 如何从内部存储中读取文件内容 - Android 应用

> ID：14768191
> 
> 赞同：47
> 
> 时间：2013-02-08T08:06:48.123
> 
> 标签：android, internal

我是使用 Android 的新手。文件已在该位置创建`data/data/myapp/files/hello.txt`；这个文件的内容是“你好”。如何读取文件的内容？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-08T08:19:23.757

看看如何在 android [http://developer.android.com/guide/topics/data/data-storage.html#filesInternal中使用存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

要从内部存储读取数据，您需要您的应用程序文件夹并从此处读取内容

```
String yourFilePath = context.getFilesDir() + "/" + "hello.txt";
File yourFile = new File( yourFilePath ); 
```

您也可以使用这种方法

```
FileInputStream fis = context.openFileInput("hello.txt");
InputStreamReader isr = new InputStreamReader(fis);
BufferedReader bufferedReader = new BufferedReader(isr);
StringBuilder sb = new StringBuilder();
String line;
while ((line = bufferedReader.readLine()) != null) {
    sb.append(line);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-06T21:02:18.457

将文件作为字符串完整版本读取（处理异常，使用 UTF-8，处理新行）：

```
// Calling:
/* 
    Context context = getApplicationContext();
    String filename = "log.txt";
    String str = read_file(context, filename);
*/  
public String read_file(Context context, String filename) {
        try {
            FileInputStream fis = context.openFileInput(filename);
            InputStreamReader isr = new InputStreamReader(fis, "UTF-8");
            BufferedReader bufferedReader = new BufferedReader(isr);
            StringBuilder sb = new StringBuilder();
            String line;
            while ((line = bufferedReader.readLine()) != null) {
                sb.append(line).append("\n");
            }
            return sb.toString();
        } catch (FileNotFoundException e) {
            return "";
        } catch (UnsupportedEncodingException e) {
            return "";
        } catch (IOException e) {
            return "";
        }
    } 
```

注意：您不需要只关心文件名的文件路径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T08:19:38.750

以文件路径为参数调用以下函数：

```
private String getFileContent(String targetFilePath){
           File file = new File(targetFilePath);
           try {
                    fileInputStream = new FileInputStream(file);
           }
           } catch (FileNotFoundException e) {
                  // TODO Auto-generated catch block
                  Log.e("",""+e.printStackTrace());
           }
           StringBuilder sb;
           while(fileInputStream.available() > 0) {

                 if(null== sb)  sb = new StringBuilder();

            sb.append((char)fileInputStream.read());
           }
       String fileContent;
       if(null!=sb){
            fileContent= sb.toString();
            // This is your fileContent in String.

       }
       try {
          fileInputStream.close();
       }
       catch(Exception e){
           // TODO Auto-generated catch block
           Log.e("",""+e.printStackTrace());
       }
           return fileContent;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:23:15.423

从内部存储读取文件：

> 调用 openFileInput() 并将要读取的文件的名称传递给它。这将返回一个 FileInputStream。使用 read() 从文件中读取字节。然后用 close() 关闭流。

代码：：

```
StringBuilder sb = new StringBuilder();
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line).append("\n");
            }
            is.close();
        } catch(OutOfMemoryError om){
            om.printStackTrace();
        } catch(Exception ex){
            ex.printStackTrace();
        }
        String result = sb.toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-27T12:55:50.480

```
 String path = Environment.getExternalStorageDirectory().toString();
    Log.d("Files", "Path: " + path);
    File f = new File(path);
    File file[] = f.listFiles();
    Log.d("Files", "Size: " + file.length);
    for (int i = 0; i < file.length; i++) {
        //here populate your listview
        Log.d("Files", "FileName:" + file[i].getName());

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-20T07:38:17.533

我更喜欢使用`java.util.Scanner`：

```
try {
    Scanner scanner = new Scanner(context.openFileInput(filename)).useDelimiter("\\Z");
    StringBuilder sb = new StringBuilder();

    while (scanner.hasNext()) {
        sb.append(scanner.next());
    }

    scanner.close();

    String result = sb.toString();

} catch (IOException e) {} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-04-02T14:17:19.357

对于寻找文件不可读的答案的其他人，尤其是在 sdcard 上，请先像这样编写文件。注意 MODE_WORLD_READABLE

```
try {
            FileOutputStream fos = Main.this.openFileOutput("exported_data.csv", MODE_WORLD_READABLE);
            fos.write(csv.getBytes());
            fos.close();
            File file = Main.this.getFileStreamPath("exported_data.csv");
            return file.getAbsolutePath();
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        } 
```

# java - Java，JMenuBar 和其他组件之间的分隔符

> ID：14768196
> 
> 赞同：1
> 
> 时间：2013-02-08T08:07:18.180
> 
> 标签：java, separator, jmenubar

在 Java Swing 中，如何更改`JMenuBar`与其他组件之间的分隔符的颜色。或者，我想删除分隔符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:12:38.360

AFAIU：

```
jMenuBar.setBorder(BorderFactory.createLineBorder(Color.black)); 
```

# javascript - Android webview 不显示 Javascript Append

> ID：14768198
> 
> 赞同：1
> 
> 时间：2013-02-08T08:07:20.910
> 
> 标签：javascript, android, jquery, webview

我正在为我的 Android 应用程序使用 webview，我正在从我的服务器在线获取我的 php、html 文件。问题是，当我在桌面浏览器中尝试它时，它会显示附加的文本，但是当我在我的 Android 手机上尝试它时，它没有显示。

请注意，我的 webview 设置中启用了 Javascipt。我也使用 JQuery Mobile 插件。

代码：

```
function loadMore()
{
    $('#htmlDivID').append("HELLO WORLD.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:48:00.250

尝试使用 jquery 移动：

```
function loadMore(){
   $('#htmlDivID').append("HELLO WORLD.");
}
$(document).on('pageinit', function(event){
  loadMore();
}); 
```

来自文档：

> 在初始化发生后，在正在初始化的页面上触发。我们建议绑定到此事件而不是 DOM ready()，因为无论是直接加载页面还是将内容作为 Ajax 导航系统的一部分拉入另一个页面，这都会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:12:07.257

尝试这个：

```
mWebView.setWebChromeClient(new WebChromeClient()); 
```

即通过提供默认`WebChromeClient()`值足以开始`JavaScript alert()`工作。

# asp.net - 如何为 ASP.NET Web 服务设置 SOAP 协议？

> ID：14768210
> 
> 赞同：0
> 
> 时间：2013-02-08T08:07:49.713
> 
> 标签：asp.net, web-services, soap, web

我是 ASP.NET Web 服务的新手。我已经编写了我的网络服务、网络方法。我希望 Web 服务的输出采用 SOAP 而不是默认的 HTTP POST 协议。我怎么做？我需要输出是 SOAP，因为我需要在我将使用 Web 服务的 Web 应用程序中反序列化 xml 文件。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:16:18.503

按着这些次序

```
 1.In the Web Service Details window, select an operation for that Web service.
  2.On the Diagram menu, choose Properties.
  3.In the Properties window, set the appropriate SOAP properties under the Implementation heading. 
```

[http://msdn.microsoft.com/en-us/magazine/cc164007.aspx](http://msdn.microsoft.com/en-us/magazine/cc164007.aspx)

# ember.js - Emberjs pre4 嵌套路由默认 URI

> ID：14768215
> 
> 赞同：2
> 
> 时间：2013-02-08T08:08:08.937
> 
> 标签：ember.js

有人可以解释为什么嵌套资源需要在路由名称中列出路径层次结构而不仅仅是路由吗？

例如。资源 1 > 资源 1.资源 2

Emberjs 似乎就是为了减少代码量。是否有一些我看不到的资源用例解释了为什么应该以这种方式定义资源。

我无法让我的示例在 jsfiddle 或 jsbin 中工作，所以我在这里托管它：http: [//emberjs.mattmazzola.net/](http://emberjs.mattmazzola.net/)

我的解决方案基于这个类似的 StackOverflow 问题中描述的技术：[Ember.js pre4 multiple nested routing](https://stackoverflow.com/questions/14712608/ember-js-pre4-multiple-nested-routing)

基本上，您注意到我有一个资源“动物”，其中包含子资源“猫”和“狗”。但是，如果我分别将它们命名为“猫”和“狗”，路由器会说“找不到路由动物。猫”。然后如果我添加“动物”。前缀使嵌套路由“animals.cats”的 url 变为 index#/animals/animals.cats 这没有意义。当然我们通过覆盖路径属性来解决这个问题，但我不明白为什么 Emberjs 没有默认情况下不这样做。 **我是否错误地定义了我的资源/路由，这是一个副作用？**

**换句话说，我目前正在这样做：**

```
App.Router.map(function() {
    this.resource('products', function() {
        this.route('desktops');
        this.route('laptops');
    });
    this.resource('animals', function() {
                // the url for this route is bad, but default behavior?
        this.resource('animals.cats', function() {
            this.route('cat', {path: ':cat_id'});
        });
        // Why does this require stating the parent route 'animals' again?
        this.resource('animals.dogs', {path: 'dogs/'}, function() {
            this.route('dog', {path: ':dog_id'});
        });
    });

}); 
```

**我怎样才能写出这样的路线：**

```
App.Router.map(function() {
    this.resource('products', function() {
        this.route('desktops');
        this.route('laptops');
    });
    this.resource('animals', function() {
        this.resource('cats', function() {
            this.route('cat', {path: ':cat_id'});
        });
        this.resource('dogs', function() {
            this.route('dog', {path: ':dog_id'});
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:59:38.807

嗯，我认为第二个版本应该可以工作，如果你有`App.AnimalsIndexRoute`，`App.CatsIndexRoute`并且`App.DogsIndexRoute`（可能还有其他一些 Ember.Routes）定义正确。如果您仍然有这个问题，您可以在这里或在 jsfiddle 中发布您的其余代码吗？

# android - 如何从“管理应用程序”获取“清除数据”的共享偏好值

> ID：14768221
> 
> 赞同：2
> 
> 时间：2013-02-08T08:08:25.170
> 
> 标签：android, sharedpreferences

我正在开发应用程序，并在该应用程序中将值存储在`SharedPreference`. 我能够成功存储所有值并检索`SharedPreference`数据。但是当我`Manage Application`从`Settings`设备中清除数据时，它会清除所有这些值。`SharedPreference`清除数据时，我必须对这些值执行多项操作。`clear data`我可以在我的 android 活动中检查此事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T01:12:22.433

如果您想检查用户是否在 android 的活动中从管理应用程序中触发了清除数据，请检查您的 SharedPreference 如果您要查找的所有值都是空的，例如

```
SharedPreferences pref = getSharedPreferences(PREF_NAME, PRIVATE_MODE);
Log.i("Cointain Values" ,prefs.getAll().toString()); 
```

# c - malloc 用于 C 中的结构和指针

> ID：14768230
> 
> 赞同：98
> 
> 时间：2013-02-08T08:08:44.957
> 
> 标签：c, memory-management

假设我想定义一个表示向量长度及其值的结构：

```
struct Vector{
    double* x;
    int n;
}; 
```

现在，假设我想定义一个向量 y 并为它分配内存。

```
struct Vector *y = (struct Vector*)malloc(sizeof(struct Vector)); 
```

我在互联网上的搜索表明我应该为 x 单独分配内存。

```
y->x = (double*)malloc(10*sizeof(double)); 
```

但是，似乎我为 y->x 分配了两次内存，一次为 y 分配内存，另一次为 y->x 分配内存，这似乎是浪费内存。如果让我知道编译器真正做了什么以及初始化 y 和 y->x 的正确方法是什么，我们将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2013-02-08T08:11:54.197

不，您*不会*`y->x`两次分配内存。

相反，您正在为结构（包括指针）分配内存以及*该*指针指向的内容。

这样想：

```
 1          2
        +-----+    +------+
y------>|  x------>|  *x  |
        |  n  |    +------+
        +-----+ 
```

因此，您实际上需要两个分配 (`1`和`2`) 来存储所有内容。

此外，您的类型应该是`struct Vector *y`因为它是一个指针，并且您永远不应该从`malloc`C 中转换返回值，因为它可以隐藏您不想隐藏的某些问题 - C 完全能够将`void*`返回值隐式转换为任何其他指针。

而且，当然，您可能希望封装这些向量的创建，以便更轻松地管理它们，例如：

```
struct Vector {
    double *data;    // no place for x and n in readable code :-)
    size_t size;
};

struct Vector *newVector (size_t sz) {
    // Try to allocate vector structure.

    struct Vector *retVal = malloc (sizeof (struct Vector));
    if (retVal == NULL)
        return NULL;

    // Try to allocate vector data, free structure if fail.

    retVal->data = malloc (sz * sizeof (double));
    if (retVal->data == NULL) {
        free (retVal);
        return NULL;
    }

    // Set size and return.

    retVal->size = sz;
    return retVal;
}

void delVector (struct Vector *vector) {
    // Can safely assume vector is NULL or fully built.

    if (vector != NULL) {
        free (vector->data);
        free (vector);
    }
} 
```

通过像这样封装创建，您可以确保向量要么完全构建，要么根本不构建——它们不可能半构建。它还允许您在将来完全更改底层数据结构而不影响客户端（例如，如果您想让它们成为稀疏数组以牺牲空间换取速度）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T08:11:44.070

第一次，您为 分配内存`Vector`，这意味着变量`x`, `n`。

但是`x` **还没有指出任何有用的东西**。

这就是为什么**也需要第二次分配的**原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T08:22:24.230

原则上你已经做对了。对于你想要的，你需要两个`malloc()`s。

只是一些评论：

```
struct Vector y = (struct Vector*)malloc(sizeof(struct Vector));
y->x = (double*)malloc(10*sizeof(double)); 
```

应该

```
struct Vector *y = malloc(sizeof *y); /* Note the pointer */
y->x = calloc(10, sizeof *y->x); 
```

在第一行中，您为 Vector 对象分配内存。`malloc()`返回指向已分配内存的指针，因此 y 必须是 Vector 指针。在第二行中，您为 10 个双精度数组分配内存。

在 C 语言中，您不需要显式强制转换，并且编写`sizeof *y`而不是`sizeof(struct Vector)`更利于类型安全，此外，它还节省了键入时间。

你可以重新排列你的结构并像这样做一个`malloc()`：

```
struct Vector{    
    int n;
    double x[];
};
struct Vector *y = malloc(sizeof *y + 10 * sizeof(double)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-08T08:14:12.050

几点

`struct Vector y = (struct Vector*)malloc(sizeof(struct Vector));`是错的

应该是`struct Vector *y = (struct Vector*)malloc(sizeof(struct Vector));`因为`y`持有指向`struct Vector`.

第一个`malloc()`只分配足够的内存来保存 Vector 结构（它是指向 double + int 的指针）

2nd`malloc()`实际上分配内存来容纳 10 双。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T08:11:28.080

当您为`struct Vector`您分配内存时，只需为指针分配内存`x`，即空间，其中包含地址的值将被放置。因此，您不会为`y.x`将引用的块分配内存。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T08:11:56.973

首先 malloc 为 struct 分配内存，包括用于 x 的内存（指向 double 的指针）。第二个 malloc 为 x 指向的 double 值分配内存。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-08T08:17:29.783

您实际上可以通过同时分配 Vector 和数组在单个 malloc 中执行此操作。例如：

```
struct Vector y = (struct Vector*)malloc(sizeof(struct Vector) + 10*sizeof(double));
y->x = (double*)((char*)y + sizeof(struct Vector));
y->n = 10; 
```

这会分配 Vector 'y'，然后使 y->x 指向 Vector 结构之后立即分配的额外数据（但在同一内存块中）。

如果需要调整向量的大小，您应该按照建议使用两个分配来进行。然后可以调整内部 y->x 数组的大小，同时保持向量结构 'y' 完整。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-11-20T00:26:25.150

当您`malloc(sizeof(struct_name))`自动为结构的完整大小分配内存时，您不需要 malloc 内部的每个元素。

使用`-fsanitize=address`flag 检查您如何使用程序内存。

# jquery - pjax 打破 jquery.chosen

> ID：14768236
> 
> 赞同：1
> 
> 时间：2013-02-08T08:09:10.763
> 
> 标签：jquery, ruby-on-rails-3, pjax, jquery-chosen

我使用 jquery 选择的插件进行多个选择控制，当我将 pjax 包含到我的项目中时，选择在我重定向到链接后不起作用。但是如果我按 F5 选择现在可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:35:46.513

发生这种情况是因为选择应用于文档就绪事件。当 Ajax 文档就绪事件更新的 smth 未被触发时。您应该在 Ajax 完成后应用选择。例如在咖啡脚本中：

```
$(document).ajaxComplete ->
  $('select').chosen() 
```

# deployment - WSO2 碳部署 BPS

> ID：14768237
> 
> 赞同：0
> 
> 时间：2013-02-08T08:09:26.197
> 
> 标签：deployment, wso2esb, wso2carbon

我刚刚开始使用 wso2 开发人员工作室，并且由于这个示例 ( [BankingSample](http://wso2.org/project/developer-studio/2.0.1/docs/banking_sample.html) )，我能够使一切正常工作。

现在，我想知道是否有可能，而不是使用不同的服务器作为 AS、DSS、ESB 和 BPS（如本例中所述），将所有内容部署在单个服务器上（例如 WSO2 Carbon）......我已经已经在 Carbon.xml 中添加了所有这样的服务器角色

```
<ServerRoles>
<Role>CarbonServer</Role>
<Role>EnterpriseServiceBus</Role>
<Role>BusinessProcessServer</Role>
<Role>ApplicationServer</Role>
<Role>DataServicesServer</Role>
</ServerRoles> 
```

但这还不够，因为它不起作用..我认为axis2.xml文件中的传输有一些问题，并且与esb的axis2.xml配置文件相比，输入/输出传输不同。

所以我试着把事情混为一谈，把一些 esb 的配置复制到 carbon 的配置中（例如不阻塞 8280 端口），但它仍然不起作用关于如何使其正常工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:15:16.930

您需要安装每台服务器的功能。请关注此博客 [1]

[1] [http://dileepajayakody.blogspot.com/2012/05/how-to-install-features-via-feature.html](http://dileepajayakody.blogspot.com/2012/05/how-to-install-features-via-feature.html)

# android - Android setHorizo ntalFadingEdgeEnabled 不适用于三星 Galaxy S3 GT-I9300

> ID：14768241
> 
> 赞同：1
> 
> 时间：2013-02-08T08:09:47.983
> 
> 标签：android, android-layout

所以问题是我不能用设备禁用我的 Horizo​​ntalScrollView 的褪色边缘，是否有一些黑客可以做到这一点？

使用`setHorizontalFadingEdgeEnabled(false)`不起作用，也`setFadingEdgeLength`没有影响。

我测试了读取 mViewFlags 属性，它没有设置褪色边缘标志，仍然显示褪色边缘。也许三星有一些调整，你不能禁用褪色边缘？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:17:06.587

我想通了。在 2.3.1+ 中，有一个可配置的属性“过度滚动模式”，我可以在 Eclipse 中将其设置为“从不”，当您过度滚动内容时它会隐藏褪色边缘！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:45:34.723

好的，找到了：

[改变 Horizo​​ntalScrollView 的灯光颜色 - OverScrollMode](https://stackoverflow.com/questions/8647131/change-horizontalscrollviews-light-color-overscrollmode)

关键是调用 setOverScrollMode。

# c# - 即使我使用了正则表达式验证器，用户仍在创建电子邮件格式错误

> ID：14768248
> 
> 赞同：1
> 
> 时间：2013-02-08T08:10:14.917
> 
> 标签：c#, asp.net, membership

我正在尝试使用创建用户向导创建用户。对于电子邮件验证，我使用的是正则表达式控制。我`ControlToValidate`为电子邮件文本框的 id 赋予了属性。当我给出错误的电子邮件 ID 并单击创建用户时，它会显示我在其中配置的错误消息，`<asp:RegularExpressionValidator>`但它会进入下一步并说**用户创建成功**。 电子邮件格式错误时**如何停止注册用户。**我正在尝试`CreatingUser`像这样修改事件

```
protected void CreateUserWizard1_CreatingUser(object sender, LoginCancelEventArgs e)
        {
            bool allfieldsstatus = false;
            RegularExpressionValidator emailvalidator = (RegularExpressionValidator)CreateUserWizardStep1.ContentTemplateContainer.FindControl("emailvalidator");

            if (!emailvalidator.Visible)
            {
                allfieldsstatus = true;
            }

            if (allfieldsstatus)
            {
                e.Cancel = false;
            }
            else
            {
                e.Cancel = true;
            }
        } 
```

但这不起作用。可见性属性根本没有显示。我以另一种方式尝试了这种`if`情况，因为 `if(!emailvalidator.ErrorMessage.length!=0) { allfieldstatus = true; }` 这也不起作用。因为该`ErrorMessage`属性始终存在于配置中，`<asp:RegularExpressionValidator >` 对此有什么解决方案？

```
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server" 
            CssClass="createUseWizard" AutoGeneratePassword="True" ContinueDestinationPageUrl="~/Account/AdminRegister.aspx"
            CreateUserButtonText="Register User" 
            OnCreatedUser="CreateUserWizard1_CreatedUser" BorderStyle="None" 
            DisplayCancelButton="True" oncreatinguser="CreateUserWizard1_CreatingUser" 
            LoginCreatedUser="False">
            <WizardSteps>
                <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
                    <ContentTemplate>
                        <div id="registerUserDiv">
                            <div id="registerUserHeader">
                                Register New User
                            </div>
                            <div>
                                <div class="registerUserLable">
                                    <asp:Label ID="UserNameLabel" runat="server" Text="User Name" AssociatedControlID="UserName"></asp:Label>
                                </div>
                                <div class="inputTextbox">
                                    <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                                    <asp:RequiredFieldValidator CssClass="showInRed" ID="UserIDrequired" runat="server" ControlToValidate="UserName"
                                        ErrorMessage="Email is required." ToolTip="User Name is required." ValidationGroup="CreateUserWizard1"
                                        SetFocusOnError="True">*</asp:RequiredFieldValidator>
                                </div>
                            </div>
                            <div>
                                <div class="registerUserLable">
                                    <asp:Label ID="Label1" runat="server" Text="E-mail" AssociatedControlID="Email"></asp:Label></div>
                            </div>
                            <div class="inputTextbox">
                                <asp:TextBox ID="Email" runat="server"></asp:TextBox>
                                <asp:RequiredFieldValidator CssClass="showInRed" ID="RequiredFieldValidator1" runat="server"
                                    ControlToValidate="Email" ErrorMessage="E-mail is required." ToolTip="E-mail is required."
                                    ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>                                
                            </div>
                            <div>
                                <div class="registerUserLable">
                                    <asp:Label ID="Label2" Text="Select Role" runat="server" />
                                </div>
                                <div class="inputTextbox">
                                    <asp:DropDownList ID="rolesDropdown" runat="server">
                                    </asp:DropDownList>
                                </div>

                            </div>
                            <div>
                                <div class="errorEmail">
                                    <asp:RegularExpressionValidator ID="emailvalidator" runat="server" 
                                    ErrorMessage="Email Should be in correct format" ControlToValidate="Email" 
                                    SetFocusOnError="True" 
                                    ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
                                        Display="Dynamic"></asp:RegularExpressionValidator>
                                </div>
                            </div>
                            <div>
                                <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
                            </div>
                        </div>
                    </ContentTemplate>
                </asp:CreateUserWizardStep>
                <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server">
                </asp:CompleteWizardStep>
            </WizardSteps>
        </asp:CreateUserWizard> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:19:04.150

通常，您应该检查验证是否通过`IsValid`单个验证器控件或页面本身的属性：

```
if (!emailvalidator.IsValid) {
    e.Cancel = true;
} 
```

或者

```
if (!Page.IsValid) {
    e.Cancel = true;
} 
```

对于向导，​​您可以在`NextButtonClick`和`FinishButtonClick`事件处理程序中执行此检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:24:35.187

如果您认为这是 RegExp 问题，请尝试以下操作：

```
/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i 
```

# symfony - Symfony2 多对多具有独特的表

> ID：14768254
> 
> 赞同：1
> 
> 时间：2013-02-08T08:10:38.160
> 
> 标签：symfony, doctrine-orm

我正在使用 Symfony2.0.18/Doctrine 来实现一个功能。

有两个表“student”和“teacher”，其中他们的用户名必须是唯一的。它们也是多对多的关系。我想做的是使学生能够添加/删除教师。如果老师已经存在，只需在关系表“student_2_teacher”中插入一个条目。

我为“老师”和“学生”以及“StudentController.php”创建了实体。如果老师没有退出 $student->addTeacher($teacher); ，它工作正常。但是，如果老师存在，我总是会遇到独特的错误。

PS：我怎样才能确保保存教师和学生之间的关系？

有人可以给我一些建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:35:34.657

I got it!

"form collections" is unnecessary. There are 2 things, which have to be considered.

1.  because teacher username is unique, it must be checked at first. If teacher username exists already, just add the relationship with "addTeacher($teacherOld)", if not, using "addTeacher($teacher)"
2.  save relationship between teacher and student with $student->addTeacher($teacher);

`public function addAction(Request $request) { $student = $this->container->get('security.context')->getToken()->getstudent();`

```
$teacher = new teacher();
$form = $this->createFormBuilder($teacher)
    ->add('teacherUsername', 'text')
    ->getForm();

if($request->getMethod() == 'POST')  {
    $form->bindRequest($request);
    if($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        $teacherUsername = $form->get('teacherUsername')->getData();

        // check teacherUsername exist?
        $teacherOld = $this->getDoctrine()->getRepository('PSEMainBundle:teacher')->findOneByTeacherUsername($teacherUsername);
        if ($teacherOld) {
            $student->addTeacher($teacherOld);
        } else {
            $teacher->setTeacherUsername($teacherUsername);
            $student->addTeacher($teacher);
        }

        // add relations
        $em->persist($student);
        $em->flush();

        return $this->redirect($this->generateUrl('_teacher'));
    }
}

return $this->render('PSEMainBundle:teacher:add.html.twig', array('form' => $form->createView()));} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:49:46.633

仅供参考，您应该始终自行处理关系的拥有和反面。逻辑相当简单，我从[https://gist.github.com/Ocramius/3121916](https://gist.github.com/Ocramius/3121916)的要点中提取了它：

```
public function addTeacher(Teacher $teacher)
{
    if ($this->teachers->contains($teacher)) {
        return;
    }

    $this->teachers->add($teacher);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T08:18:36.110

您需要检查教师是否存在于学生实体中。

在您的学生实体类方法 addTeacher 中：

```
public function addTeacher($teacher)
{
    if (!in_array($teacher, $this->teachers->toArray())) {
        $this->teachers[] = $teacher;
    }
} 
```

# jsf - 使用 JSF 验证器

> ID：14768257
> 
> 赞同：1
> 
> 时间：2013-02-08T08:10:42.533
> 
> 标签：jsf, validation

我使用 Prime faces 3.4.1 作为组件框架和 JSF 2.0 作为服务器端框架

以下是我的要求

1）我有一个标签为“需要开会”的字段。然后我有 SelectOneRadio 有两个选项“否”和“是”，默认值为“否”。我正在使用 JSF/HTML 组件 h:SelectOneRadio。

2）我有另一个字段是日历组件，这是一个 primefaces 日历组件。当用户选择表示“需要会议”的“是”时，用户应该从日历控件中选择一个日期。

3) 如果用户选择“是”并且没有选择日期，则应显示验证消息，指示应选择日期。

我创建了一个自定义验证组件并附加到 SelectOneRadio，我可以在自定义验证器中看到选定的值。现在，我尝试从 Calendar 组件中获取值以检查该值是否为空，通过 UIComponent.getParent().findCompoent("rvmDate")，我得到了组件但我不知道如何检查日期组件为空或包含任何值。

请帮我获取用户选择的日期值。

请帮我解决问题。或者还有其他方法吗？请找到源代码。

## XHTML 页面

```
<h:selectOneRadio id="rvmMeetingOption"
    readonly="#{wipMB.rvmMeetingOptionReadOnly}"
    value="#{wipMB.requirementsMeeting}" 
    disabled="#{wipMB.rvmMeetingOptionDisabled}"
    validator="#{wipMB.validateRVMDate}"
    validatorMessage="Please enter RVM Date>

     <f:selectItem itemLabel="No" itemValue="0"></f:selectItem>
     <f:selectItem itemLabel="Yes" itemValue="1" ></f:selectItem>
     <f:attribute value="#{rvmDateComp}" name="rvmDateComp"></f:attribute>
</h:selectOneRadio>

<p:calendar id="rvmDate" 
        readonly="#{wipMB.rvmMeetingDateReadOnly}"
        disabled="#{wipMB.rvmMeetingDateDisabled}"
        readonlyInput="true"
        navigator="true" mode="popup" 
        pattern="dd/MM/yyyy" 
        value="#{wipMB.rvmDate}" 
        effect="explode" 
        yearRange="1900:2500" 
        style="margin-left:5px"
        binding="#{rvmDateComp}"
</p:calendar>
<p:message id="rvmDateMsg" for="rvmDate" display="both" ></p:message> 
```

## 自定义验证器

```
public void validateRVMDate(FacesContext context, UIComponent component, Object value)
        throws ValidatorException
{
    String invalidDate;
    String rvmOption;
    Date rvmDate;
    String rvmDt = "";

    try
    {

        FacesContext fc = FacesContext.getCurrentInstance();

        rvmOption = value.toString();
        DateFormat formatter = new SimpleDateFormat("E MMM dd HH:mm:ss Z yyyy");

        UIInput rvmCompDt = (UIInput)component.getAttributes().get("rvmDateComp");

        rvmDateId = rvmCompDt.getId();
        rvmDt = rvmCompDt.getSubmittedValue() == null ? "" : rvmCompDt.getSubmittedValue().toString();

        if (rvmOption.equals("1") && rvmDt.isEmpty())
        {

            FacesMessage msg = new FacesMessage("RVM date is required");
            msg.setSeverity(FacesMessage.SEVERITY_ERROR);
            fc.addMessage("rvmDateMsg", msg);
            throw new ValidatorException(msg);

        }
    }

    catch (Exception ex)
    {
        String msg = ex.getMessage();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:35:05.197

您首先需要`immediate="true"`从中删除`<p:calendar>`，否则在处理单选按钮时根本不会处理它。

然后，要检查字符串是否为空或空，只需执行

```
String dt = (String) uiCalendar.getSubmittedValue();

if (dt == null || dt.isEmpty()) {
    // dt is null or empty. Throw validator exception depending on the 
    // current radio button value. Note: you should not catch it yourself!
} 
```

请注意，这与 JSF 无关。这只是基本的Java。您最初的尝试`if (dt == "")`确实是完全无效的。是一个对象，而`String`不是一个原始的。比较`==`对象是通过引用，而不是通过它们的内部值。从技术上讲，您应该使用它`if (dt.equals(""))`，但`isEmpty()`更好。

* * *

**与具体问题无关**，更简单的方法是检查`required`日历组件属性中的单选按钮值。首先将单选按钮组件通过绑定到视图中的变量，然后在属性中`binding`引用其`UIInput#getValue()`方法。`required`

```
<h:selectOneRadio id="rvmMeetingOption" binding="#{rvmMeetingOption}"
        readonly="#{wipMB.rvmMeetingOptionReadOnly}"
        value="#{wipMB.requirementsMeeting}" 
        disabled="#{wipMB.rvmMeetingOptionDisabled}">
    <f:selectItem itemLabel="No" itemValue="0"></f:selectItem>
    <f:selectItem itemLabel="Yes" itemValue="1" ></f:selectItem>
</h:selectOneRadio>

<p:calendar id="rvmDate" 
        readonly="#{wipMB.rvmMeetingDateReadOnly}"
        disabled="#{wipMB.rvmMeetingDateDisabled}"
        readonlyInput="true"
        navigator="true" mode="popup" 
        pattern="dd/MM/yyyy" 
        value="#{wipMB.rvmDate}" 
        effect="explode" 
        yearRange="1900:2500" 
        style="margin-left:5px"
        required="#{rvmMeetingOption.value == 1}">
</p:calendar> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:16:12.403

在 JSF 中，每个组件都是自己的一个小 MVC 堆栈；有模型（存储为值）、控制器（组件对象）和视图（渲染器）。验证器和控制器是架构的一部分，需要在模型和视图之间移动值。

虽然 JSF 验证器发挥着重要作用，但它只在这个小的 MVC 堆栈内部很重要。它们不是为了“验证表单”而设计的，它们是为了“验证组件价值”而设计的。可悲的是，“验证器”这个名字让每个来到 JSF 的人都认为，每次需要进行任何验证时，验证器就是解决方案。奇怪的是，转换器并没有被滥用。

在您的情况下，构建自定义验证器会产生一种奇怪的情况，其中：

*   验证器和视图相互之间具有循环依赖关系，
*   需要使用 hack（例如“立即”）和低级 API，
*   在不太可能的地方硬编码视图逻辑，
*   需要更多的知识并且是片状的。例如，根据单选按钮在文档顺序中是在日历之前还是之后，从日历获取值的逻辑可能会有所不同。

上面的问题是可以解决的，但是由于都是滥用JSF架构造成的，我觉得还是重新思考问题比较好。由于您的验证涉及应用程序流程，因此它非常适合 action 方法，其中所有复杂性都将分解为带有条件“addMessage”的单个简单“if”语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:43:03.557

利用

```
UIInput uiCalendar = (UIInput) component.getParent().findComponent("rvmDate");
Date test = uiCalendar.getValue();
if(test==null){
throw ValidatorException
} 
```

然后 test 将填写日期，或者在日期字段中未选择任何内容时为 null

# android - 应用程序不启动

> ID：14768258
> 
> 赞同：1
> 
> 时间：2013-02-08T08:10:45.960
> 
> 标签：android, eclipse, android-emulator

我的 android 项目和 eclipse 有一些错误，当我启动仿真时它失败了：

![在此处输入图像描述](../Images/33598341f8b64d088f16018c4b7e3b62.png)

我认为它是 Eclipse 的问题，因为它昨天工作，但今天我有这个错误。

我没有更多信息，控制台什么也没有，LogCat 也没有。

我试图清理项目，但错误仍然存​​在。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:15:05.727

转到任务管理器杀死 adb.exe

并重新启动日食

而不是清洁项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:22:08.533

转到cmd，键入以下命令：

```
adb kill -server

adb start server 
```

然后运行程序，肯定它正在工作。

# highcharts - Highcharts柱状图中的“厚度”和“空间使用”列

> ID：14768259
> 
> 赞同：0
> 
> 时间：2013-02-08T08:10:50.963
> 
> 标签：highcharts, bar-chart

我的柱形图没有使用所有可用空间。列可能会更厚，但是当我将 pointWidth 更改为更高的值时，列会变得更厚，但它们并没有占用更多的可用空白空间，而是开始重叠。

[这](http://geodev.grid.unep.ch/megatrends/data/soil_use_ch.php)是图表。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:11:12.120

两件事情：

*   如果可能，将 Highcharts 更新到最新版本 (2.3.5)
*   您的系列包含三个点，[ value, value, NaN] - 您的 CSV 中可能有一个额外的结束行“\n”。添加检查 parseFloat 是否不返回 NaN（使用 isNaN() 函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:11:19.857

如果你改变 pointWidth 你也应该关心 groupPadding / pointPadding 定义空间之间的点/组。

[http://api.highcharts.com/highcharts#plotOptions.column.pointPadding](http://api.highcharts.com/highcharts#plotOptions.column.pointPadding) [http://api.highcharts.com/highcharts#plotOptions.column.groupPadding](http://api.highcharts.com/highcharts#plotOptions.column.groupPadding)

# asterisk - Asterisk CDR 报告在目标字段中显示“s”

> ID：14768264
> 
> 赞同：0
> 
> 时间：2013-02-08T08:11:12.437
> 
> 标签：asterisk, elastix

我在平台上遇到问题已经有一段时间了，当有人呼叫 ivr 系统时，cdr 报告目标字段显示一个“s”代替被叫号码。DID 的入站路由设置为 ivr 菜单。这是我的拨号计划：“

```
exten => 800000031,1,Set(__FROM_DID=${EXTEN})
exten => 800000031,n,Gosub(app-blacklist-check,s,1)
exten => 800000031,n,ExecIf($[ "${CALLERID(name)}" = "" ] ?Set(CALLERID(name)=${CALLERID(num)}))
exten => 800000031,n,Set(__CALLINGPRES_SV=${CALLERPRES()})
exten => 800000031,n,Set(CALLERPRES()=allowed_not_screened)
exten => 800000031,n(dest-ext),Goto(ivr-3,s,1)* 
```

"

我怀疑问题出在最后一行，但不允许直接编辑文件。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T12:37:02.347

在 Goto(ivr-3,s,1) 中使用 ${EXTEN} 代替 s，同样在 ivr-3 上下文中使用通配符创建拨号计划。例如

```
exten => 800000031,1,Set(__FROM_DID=${EXTEN})
exten => 800000031,n,Gosub(app-blacklist-check,${EXTEN},1)
exten => 800000031,n,ExecIf($[ "${CALLERID(name)}" = "" ] ?Set(CALLERID(name)=${CALLERID(num)}))
exten => 800000031,n,Set(__CALLINGPRES_SV=${CALLERPRES()})
exten => 800000031,n,Set(CALLERPRES()=allowed_not_screened)
exten => 800000031,n(dest-ext),Goto(ivr-3,${EXTEN},1)

[ivr-3]
exten => _X.,1,NoOp("Hello world") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T10:57:06.210

s 是 asterisk 中的默认扩展名，查看日志并尝试找出执行该调用的上下文。当您没有为 extension.conf 中的任何特定 DID 创建上下文时，通常会发生这种情况。然后呼叫被路由到星号默认上下文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T10:47:30.090

我们有 IVR。当外部呼叫者收听 IVR 并决定在 IVR 结束通话之前挂断，在报告中我们将“s”视为目的地。否则，在报告中，我们会看到在 IVR 通话之后或同时拨打分机。我想这很正常。如果您被黑了，您会看到其他不同的目的地，但看不到“s”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-30T16:46:23.687

解决了我们的问题，没有为接收环组设置默认目的地。我们将其指向 IVR，现在不再看到 s 目的地。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T21:09:31.507

这很可能意味着您已被黑客入侵。请检查您是否未启用访客呼叫，联系安全专家查找漏洞并修复它。

# html - CSS导致右侧空白

> ID：14768272
> 
> 赞同：0
> 
> 时间：2013-02-08T08:11:30.563
> 
> 标签：html, css

这段 css 代码引起了问题。[http://www.asifslab.com](http://asifslab.com)他们是显示的未使用空间，但我找不到错误。当我取出这段代码时，它们的侧面没有空间，但当它存在时，右侧有很长的间隙。

```
@import url(http://fonts.googleapis.com/css?family=Oxygen+Mono);
/* Starter CSS for Menu */
#cssmenu {
  padding: 0;
  margin: 0;
  border: 0; }

#cssmenu ul, #cssmenu li {
  list-style: none;
  margin: 0;
  padding: 0; }

#cssmenu ul {
  position: relative;
  z-index: 597; }

#cssmenu ul li {
  float: left;
  min-height: 1px;
  vertical-align: middle; }

#cssmenu ul li.hover,
#cssmenu ul li:hover {
  position: relative;
  z-index: 599;
  cursor: default; }

#cssmenu ul ul {
  visibility: hidden;
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 598;
  width: 100%; }

#cssmenu ul ul li {
  float: none; }

#cssmenu ul ul ul {
  top: 0;
  left: auto;
  right: -99.5%; }

#cssmenu ul li:hover > ul {
  visibility: visible; }

#cssmenu ul ul {
  bottom: 0;
  left: 0; }

#cssmenu ul ul {
  margin-top: 0; }

#cssmenu ul ul li {
  font-weight: normal; }

#cssmenu a {
  display: block;
  line-height: 1em;
  text-decoration: none; }

/* Custom CSS Styles */
#cssmenu {
  background: #333;
  border-bottom: 4px solid #ff3a34;
  font-family: 'Oxygen Mono', Tahoma, Arial, sans-serif;
  font-size: 12px; 
    position: relative;
  margin-left: -8px;
  margin-right: -8px;
  z-index: 1000; 
}

  #cssmenu:after, #cssmenu ul:after {
    content: '';
    display: block;
    clear: both; }
  #cssmenu ul {
    text-transform: uppercase; }
    #cssmenu ul ul {
      border-top: 4px solid #ff3a34;
      text-transform: none;
      min-width: 190px; }
      #cssmenu ul ul a {
        background: #ff3a34;
        color: #FFF;
        border: 1px solid #ff0901;
        border-top: 0 none;
        line-height: 150%;
        padding: 16px 20px; }
      #cssmenu ul ul ul {
        border-top: 0 none; }
      #cssmenu ul ul li {
        position: relative; }
        #cssmenu ul ul li:first-child > a {
          border-top: 1px solid #ff0901; }
        #cssmenu ul ul li:hover > a {
          background: #ff534d; }
        #cssmenu ul ul li:last-child > a {
          -moz-border-radius: 0 0 3px 3px;
          -webkit-border-radius: 0 0 3px 3px;
          border-radius: 0 0 3px 3px;
          -moz-background-clip: padding;
          -webkit-background-clip: padding-box;
          background-clip: padding-box;
          -moz-box-shadow: 0 1px 0 #ff3a34;
          -webkit-box-shadow: 0 1px 0 #ff3a34;
          box-shadow: 0 1px 0 #ff3a34; }
        #cssmenu ul ul li:last-child:hover > a {
          -moz-border-radius: 0 0 0 3px;
          -webkit-border-radius: 0 0 0 3px;
          border-radius: 0 0 0 3px;
          -moz-background-clip: padding;
          -webkit-background-clip: padding-box;
          background-clip: padding-box; }
        #cssmenu ul ul li.has-sub > a:after {
          content: '+';
          position: absolute;
          top: 50%;
          right: 15px;
          margin-top: -8px; }
    #cssmenu ul li:hover > a, #cssmenu ul li.active > a {
      background: #ff3a34;
      color: #FFF; }
    #cssmenu ul li.has-sub > a:after {
      content: '+';
      margin-left: 5px; }
    #cssmenu ul li.last ul {
      left: auto;
      right: 0; }
      #cssmenu ul li.last ul ul {
        left: auto;
        right: 99.5%; }
  #cssmenu a {
    background: #333;
    color: #CBCBCB;
    padding: 0 20px; }
  #cssmenu > ul > li > a {
    line-height: 48px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:48:57.173

而不是使用该`visibility`属性，`display`而是使用。

需要更改以下选择器：

```
#cssmenu ul ul {
    visibility: hidden;
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 598;
    width: 100%;
}

#cssmenu ul li:hover > ul {
    visibility: visible;
} 
```

对此：

```
#cssmenu ul ul {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 598;
    width: 100%;
}

#cssmenu ul li:hover > ul {
    display: block;
} 
```

这将解决您的问题。

[jsFiddle 上的工作示例](http://jsfiddle.net/htmled/y9fE6/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:47:22.667

只是为了澄清 htmled 的答案，来自 w3schools.com 的两句话：

"visibility:hidden 隐藏了一个元素，但它仍然会占用和以前一样的空间。元素会被隐藏，但仍然会影响布局。"

"display:none 隐藏元素，不会占用任何空间。元素会被隐藏，页面会显示为元素不存在。"

链接：[http ://www.w3schools.com/css/css_display_visibility.asp](http://www.w3schools.com/css/css_display_visibility.asp)

# silverlight - 调整浏览器窗口大小时，Silverlight 子窗口从边缘裁剪

> ID：14768285
> 
> 赞同：0
> 
> 时间：2013-02-08T08:12:08.113
> 
> 标签：silverlight, layout, childwindow

我`ChildWindow`在我的应用程序中使用普通的 Silverlight。当调整浏览器窗口的大小时，特别是当它的宽度小于子窗口的宽度时，子窗口的边缘会被裁剪，因此无法通过关闭按钮关闭它，因为它不再可见。我尝试了许多解决方法，但没有任何帮助。特别是我已经订阅`SizeChanged`了子窗口的事件，并设置了相对于布局根的大小的大小。这是`SizeChanged`事件处理程序的代码：

```
// Get the dimensions of the application screen
Size appSize = Application.Current.RootVisual.RenderSize;
// Make the child window occupy the 90% of width and 40% of height of the entire screen
this.Width = appSize.Width * 9 / 10;
this.Height = appSize.Height * 4 / 10; 
```

这段代码修改了子窗口的大小，但同时也更新了叠加层的大小，使其不再覆盖整个页面，这是一个很奇怪的行为。

有没有人遇到过这种问题？请分享任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T02:43:55.400

我有一个类似的问题。发生这种情况是因为浏览器中的比例高于 100%。

# c++ - 未处理的异常 - 如何解决它，C++

> ID：14768286
> 
> 赞同：1
> 
> 时间：2013-02-08T08:12:14.970
> 
> 标签：c++, pointers, error-handling, constants

我在使用这个程序时遇到了问题。编译器在成功编译程序后给我这个：“0x0f6bd540（msvcr100d.dll）”中的未处理异常“progBUS.exe”
程序有什么问题，因为一切似乎都运行良好，但最后，在按下“ Enter" 退出控制台，错误 - 给出未处理的异常。如何解决？非常感谢！

```
# include <iostream>
# include <cstring>

using namespace std;

template < class T>
void switcher(T &a, T &b){
    T c=a;
    a=b;
    b=c;
}

char* f(char* word){
    static char* ss("u");
    static int iter(0);

    cout<<"word \""<<word<<"\" has been thrown\n";
    if ( strcmp(word,ss)!=0 && strcmp(word,"")!=0) {ss=word; iter=0;} //if another word has been thrown
    cout<<"ss="<<ss<<"  iter="<<iter<<endl;
    static char ret[15];//return word value
    memset(ret, '\0', 14);//clean up ret value

    int len = strlen(ss);
    int j=0;
    if (iter == len-1) return nullptr;//we have reached the end of word

    for (int i=iter;i<len;i++){
        //cout<<"*(ss+i)="<<*(ss+i)<<endl;
        if (*(ss+i)!=' ') ret[j]=*(ss+i);
        else { iter=i+1; return ret;}
        //cout<<*(ss+i);
        j++;
        if(i==len-1) {iter=i+1; return ret;}
    }
    return nullptr;
}

int main(){
    int a=1,b=2;

    cout<<f("fr rewfer ewr")<<endl;
    cout<<f("fr rewfer ewr")<<endl;
    cout<<f("43 34")<<endl;
    cout<<f("")<<endl;
    cout<<f("")<<endl;
    cout<<f("fr rewfer ewr")<<endl;
    //char ss[]("fr rewfer ewr");
    //size_t len = (sizeof ss)/(sizeof ss[0]);
//  cout<<"len="<<len<<endl;

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:52:59.553

你需要一些纪律。你想使用：

```
f("fr rewfer ewr"); 
```

文字字符串可能位于只读内存中。你需要承诺你不会改变它：

```
char*f(const char* word) ; 
```

你有`s("U");`，`ss=word;`所以你也需要：`static const char* ss;` 但是`ss` `static`你需要确保`ss`在通话之间保持有效的内容。复制单词？现在，你`ret[15]`只有 0 和 14。为什么不是 15？而且您无法控制您可能可以在其中写入超过 14 个字符。F 可以返回`nullptr`，但在你的 main 中你不测试`nullptr`. `std::string`如果您使用其他 C++ 标准库工具，您的一些问题可能会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:08:28.180

所有的问题都在

```
cout<<f("")<<endl; 
```

当 f 退休时 nullptr

# collections - ASP.NET MVC 4 代码优先多对多添加到集合

> ID：14768287
> 
> 赞同：1
> 
> 时间：2013-02-08T08:12:19.890
> 
> 标签：collections, asp.net-mvc-4, many-to-many, add, code-first

我在数据库层使用 ASP.NET MVC 4 代码优先模式。我在 UserProfile 和 Task 之间有多对多的关系。当我尝试将任务添加到用户的任务集合中时，它已被添加，但如果我尝试查询它并查看它是否存在，它不会显示出来。

我的模型：

```
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string SirName { get; set; }
    public string Position { get; set; }
    public string Email { get; set; }
    public ICollection<TaskModels> Tasks {get; set; }
    public bool? isActive { get; set; }

    public UserProfile()
    {
        Tasks = new HashSet<TaskModels>();
    }
}

public class TaskModels
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public DateTime? StartDate { get; set; }
    public DateTime? EndDate { get; set; }
    public ICollection<UserProfile> Employees { get; set; }
    public int TimeNeeded { get; set; }
    public int TimeWorked { get; set; }
    public string Status { get; set; }
    public bool isActive { get; set; }

    public TaskModels()
    {
        Employees = new HashSet<UserProfile>();
    }
}

public class WorkLogModels
{
    public int Id { get; set; }
    public UserProfile Author { get; set; }
    public DateTime TimeBeganWorking { get; set; }
    public int TimeWorkedOn { get; set; }
    public TaskModels Task { get; set; }
    public string Description { get; set; }
} 
```

公共类TimeTrackerDb：DbContext {公共TimeTrackerDb（）：base（“DefaultConnection”）{

```
 }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<TaskModels> Tasks { get; set; }
    public DbSet<WorkLogModels> WorkLogs { get; set; }
} 
```

我尝试检查任务的员工列表中是否已经存在 UserProfile 并且它始终为空。

```
 [HttpPost]
    public ActionResult Create(WorkLogModels worklogmodels)
    {
        var tasks = db.Tasks.Where(x => x.Name == worklogmodels.Task.Name).SingleOrDefault();
        if (tasks == null)
        {
            return View(worklogmodels);
        }
        if (ModelState.IsValid)
        {
            var user = db.UserProfiles.Where(x => x.UserId == WebSecurity.CurrentUserId).FirstOrDefault();
            var task = db.Tasks.Where(x => x.Name == worklogmodels.Task.Name).FirstOrDefault();
            WorkLogModels log = new WorkLogModels();
            log.Description = worklogmodels.Description;
            log.TimeBeganWorking = worklogmodels.TimeBeganWorking;
            log.TimeWorkedOn = worklogmodels.TimeWorkedOn;
            log.Author = user;
            log.Task = task;
            db.WorkLogs.Add(log);

            if (!db.UserProfiles.Where(x => x.UserId == WebSecurity.CurrentUserId).First().Tasks.Any(x=> x.Name == worklogmodels.Task.Name))
            {
                db.UserProfiles.Where(x => x.UserId == WebSecurity.CurrentUserId).FirstOrDefault().Tasks.Add(task);
                db.Tasks.Where(x => x.Name == worklogmodels.Task.Name).FirstOrDefault().Employees.Add(user);
            }
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(worklogmodels);
    } 
```

我已经为此奋斗了两天了。

任何帮助将不胜感激

**编辑：**

我不确定我是否说清楚了。在 WorkLog 控制器的 Crate 操作中，我试图将当前用户放入当前任务的集合中，反之亦然。它第一次正常工作，但是如果我再次这样做，它将无法跳过 if 语句并尝试再次添加它并引发异常：System.Data.SqlClient.SqlException。它试图将相同的记录添加到中间表。

# c++ - C++程序在OpenCV应用程序中不区分大小写字母

> ID：14768291
> 
> 赞同：2
> 
> 时间：2013-02-08T08:12:28.783
> 
> 标签：c++, opencv

我正在编辑一些同事编写的一个相对较大的基于 OpenCV 的程序。我面临的问题是程序不区分大小写击键（即击键'd'和'D'都被视为0x65）我的同事告诉我，他通过编译解决了他机器上的问题他机器上的 OpenCV 库直接来自源代码。

我是一个新手，但也很好奇为什么会发生这种事情以及它与 OpenCV 安装有什么关系！

我的机器上仍然有问题，但我还没有尝试重新安装 openCV。

编辑：OS Linux-Ubuntu 12.10 **64bit** 这些字母是来自键盘的击键，它们用于 switch 语句。

```
 static int process_key(struct cam_segment* cs, int key){
    int res = 0;
    double pdist;
    struct stat sb;
    char fn[4096];
    static int out_id = 0;
    fprintf( stderr, "%d\n", key&0xff );
    switch (key & 0xff) {
    case 'm':
        show_merged = !show_merged;
        res = 1;
        break;
    case '1':
    case '2':
    case '3':
    case '4':
    case '5':
    case '6':
        cam_id = (key & 0xff) - '1';
        res = 1;
        break;
    case 'D':
        ocv_mgrid_set_distortion( cs->mg, 0 );
        res = 1;
        break;
    case 'd':
        ocv_mgrid_set_distortion( cs->mg, 1 );
        res = 1;
        break;
    case 'n':
        res = 1;
        break;
    case 'C':
        init_calibration(cs);
        calibrate_camera_distortion(cs->mg);
        output_calibration_results(cs);
        cs->calib_mode = 1;
        res = 1;

        break;
    case 'c':
        init_calibration(cs);
        fprintf(stderr,"searching.....");
        calibrate_camera_rotation(cs->mg);
        output_calibration_results(cs);
        fprintf(stderr,"e1 %f\n",water_error(cs->mg));
        cs->calib_mode = 1;
        res = 1;
        break;
    case 'M':
        init_calibration(cs);
        fprintf(stderr,"searching pricipal point.....");
        calibrate_camera_center(cs->mg);
        output_calibration_results(cs);
        cs->calib_mode = 1;
        res = 1;
        break;
    case 'a':
        init_calibration(cs);
        int misscnt;
        double e,en;
        en = e = HUGE;
        misscnt = 0;
        for(int i=0;i<20;i++) {
            e = water_error(cs->mg);
            fprintf(stderr,"e1 %f %d \n",e,misscnt);
            calibrate_camera_rotation(cs->mg);
            output_calibration_results(cs);
            en = water_error(cs->mg);
            fprintf(stderr,"en1 %f\n",en);
            if (en >= e)
                misscnt++;
            else
                misscnt = 0;
            if (misscnt > 3)
                break;
            e = water_error(cs->mg);
            fprintf(stderr,"e %f %d\n",e,misscnt);
            calibrate_coupled_focal_length(cs->mg);
            output_calibration_results(cs);
            en = water_error(cs->mg);
            fprintf(stderr,"en %f\n",en);
            if (en >= e)
                misscnt++;
            else
                misscnt = 0;
            if (misscnt > 3)
                break;
            e = water_error(cs->mg);
            if (e > 100) 
                continue;
            fprintf(stderr,"e %f %d\n",e,misscnt);
            calibrate_camera_distortion(cs->mg);
            output_calibration_results(cs);
            en = water_error(cs->mg);
            fprintf(stderr,"en %f\n",en);
            if (en >= e)
                misscnt++;
            else
                misscnt = 0;
            if (misscnt > 3)
                break;
        }
        cs->calib_mode = 1;
        res = 1;
        break;
    case 'p':
        init_calibration(cs);
        calibrate_coupled_focal_length(cs->mg);
        output_calibration_results(cs);
        cs->calib_mode = 1;
        res = 1;
        break;
    case 'F':
        init_calibration(cs);
        calibrate_focal_lengths(cs->mg);
        output_calibration_results(cs);
        cs->calib_mode = 1;
        res = 1;
        break;
    case 't':
        init_calibration(cs);
        calibrate_target(cs->mg);
        output_calibration_results(cs);
        cs->calib_mode = 1;
        res = 1;
        break;
    case 'e':
        sprintf(fn, "%s_%03d.png",cs->inp_prefix, cs->inp_id);
        if (!(input = cvLoadImage(fn, CV_LOAD_IMAGE_COLOR))) {
            fprintf(stderr,"error calc: loading input failed\n");
        } else if (!(ocv_mgrid_set_input(cs->mg, input))) {
            fprintf(stderr,"error calc error 1\n");
        }
        pdist = water_error(cs->mg);
        fprintf(stderr,"watererror: %f\n",pdist);
        break;
    case 'N':
        res = 1;
        cs->inp_id++;
        cerr << "inp_id=" << cs->inp_id << "\n";
        break;
    case 'P':
        res = 1;
        cs->inp_id--;
        cerr << "inp_id=" << cs->inp_id << "\n";
        break;

    case 'z':
        cs->color_mode = OCV_MGRID_CMODE_THETA;
        res = 1;
        break;
    case 'Z':
        cs->color_mode = OCV_MGRID_CMODE_THETA_CHECK;
        res = 1;
        break;
    case 'l':
        cs->draw_legend = !(cs->draw_legend);
        res = 1;
        break;
    case 'x':
        cs->color_mode = OCV_MGRID_CMODE_X;
        res = 1;
        break;
    case 'y':
        cs->color_mode = OCV_MGRID_CMODE_Y;
        res = 1;
        break;
    case 'X':
        cs->color_mode = OCV_MGRID_CMODE_X_CHECK;
        res = 1;
        break;
    case 'Y':
        cs->color_mode = OCV_MGRID_CMODE_Y_CHECK;
        res = 1;
        break;
    case 'o':
        cs->color_mode = OCV_MGRID_CMODE_NONE;
        res = 1;
        break;
    case 's':

        sprintf(fn, "input_%03d.png",out_id);
        while(stat(fn, &sb) != -1) {
            out_id++;
            sprintf(fn, "input_%03d.png",out_id);
        }
        fprintf(stderr,"saving %s \n",fn);
        cvSaveImage(fn,OCV_MGRID_GET_INPUT(cs->mg));
        break;
    case 'r':
        if (projection)
            cvResetImageROI(projection);
        if (merged_projection)
            cvResetImageROI(merged_projection);
        if (merged_grid)
            cvResetImageROI(merged_grid);
        if (output)
            cvResetImageROI(output);
        break;
    case 'R':
        reset_defaults();
        reset_trackbars();
        break;
    case 'f':
        ocv_mgrid_get_best_projection_distance(cs->mg, &pdist);
        fprintf(stderr,"best match %f\n",pdist);
        tb_pdist = (int) pdist;
        cvSetTrackbarPos("proj_distance", "tbars", tb_pdist);
        res = 1;
        break;
    case 'w':
        if (use_camera)
            if (!(ocv_ueye_whitebalance(cs->ueye)))
                return 1;
        break;
    case 'W':
        save_params(cs);
        break;
    default:
        break;
    }
    return res;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:09:44.567

直到现在我都不知道为什么！但是我已经删除了旧的 OpenCV 库并编译了最新版本。现在它确实区分了大写和小写字母。

新版本有一些细微的差别，不一定是好的，例如不能通过点击它们来编辑轨迹条的值。此外（@kebs）现在必须用 0xff 屏蔽击键！

我不知道也许我一直都有一个奇怪的 OpenCV 版本！

# jquery - 使用 jQuery 获取 2 个 ID 并显示自定义内容

> ID：14768292
> 
> 赞同：2
> 
> 时间：2013-02-08T08:12:33.637
> 
> 标签：jquery, html, image, click

我是 jQuery 新手，我知道这个问题可能看起来很愚蠢。但是，这是我到目前为止所拥有的...... [http://jsfiddle.net/jHyJu/](http://jsfiddle.net/jHyJu/)

```
$('[id^=content]').hide();
$('#baseSection').delegate("li", "click", function() {
var id = $(this).attr('id').replace('bcontent','');
$("#baseContent").html($("#content-"+id).html());
});

$('[id^=content]').hide();
$('#headSection').delegate("li", "click", function() {
var id = $(this).attr('id').replace('hcontent','');
$("#headContent").html($("#content-"+id).html());
}); 
```

我需要脚本来组合单击的 ID，以便显示自定义内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:16:15.117

```
 $('[id^=content]').hide();
    $('#baseSection, #headSection').delegate("li", "click", function() {
    var id = $(this).attr('id').replace('bcontent','').replace('hcontent','');
    $("#baseContent, #headContent").html($("#content-"+id).html());
    }); 
```

试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:25:28.130

您可以使用

```
 $('#baseSection, #headSection').delegate 
```

并保持所有代码相同，除了以下几行

```
var id = $(this).attr('id').replace('hcontent','');
var id = $(this).attr('id').replace('bcontent',''); 
```

在这里，您可以将“hcontent/bcontent”作为元素的属性，并可以使用它

```
$(this).attr('<attribute name>') 
```

并用作变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:32:11.967

利用`ternary operator`：`[http://jsfiddle.net/jHyJu/1/](http://jsfiddle.net/jHyJu/1/)`

```
 $('[id^=content]').hide();
    $('#baseSection, #headSection').on("click", "li", function () {
        var id = ($(this).parent().attr('id') == 'selectable') ? $(this).attr('id').replace('bcontent', '') : $(this).attr('id').replace('hcontent', '');
        $("#baseContent").html($("#content-" + id).html());
    }); 
```

并`.on()`改用`if you are using jquery version 1.7+`

# jquery - 为什么 jQuery getJSON 有效，即。使用 http://picasaweb.google.com/data/feed/api/user/ 或 'http://query.yahooapis.com/v1/public/

> ID：14768294
> 
> 赞同：-3
> 
> 时间：2013-02-08T08:12:54.023
> 
> 标签：jquery, json, get, yahoo, picasa

为什么 jQuery getJSON 或类似调用适用于 picasweb 或 yahoo API，而它们不适用于 my page 域之外的任何其他 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:24:49.413

[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)：

> 在计算中，同源策略是许多浏览器端编程语言（例如 JavaScript）的重要安全概念。该策略允许在源自同一站点的页面上运行的脚本（方案、主机名和端口号的组合）无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。

# c# - 如何将数据从一个gridview复制到另一个gridview

> ID：14768296
> 
> 赞同：0
> 
> 时间：2013-02-08T08:13:04.647
> 
> 标签：c#, asp.net, gridview, datatable

我有两个文本框，三个按钮和两个网格视图，当我在 textboex 中输入值并按下添加到数据表中的添加按钮值时，可以看到网格视图，当我单击提交按钮时，我现在可以在下一个 girdview 中查看该详细信息我从第一个网格视图中选择任何行并单击删除按钮它从第一个网格视图中删除该行直到那时所有代码都运行良好现在我想要的是当我从第一个网格视图中删除行并按下提交按钮时我只能查看该数据在第一个网格视图中出现的第二个网格视图中

这是我的代码：

```
private void BindGrid(int rowcount)
{
     DataTable dt = new DataTable();
     DataRow dr;

     dt.Columns.Add("First Name", typeof(String));
     dt.Columns.Add("Last Name", typeof(String));

     if (ViewState["CurrentData"] != null)
     {
        for (int i = 0; i < rowcount + 1; i++)
        {
            dt = (DataTable)ViewState["CurrentData"];
            if (dt.Rows.Count > 0)
            {
                dr = dt.NewRow();
                dr[0] = dt.Rows[0][0].ToString();

            }
        }
        dr = dt.NewRow();
        dr[0] = TextBox1.Text;
        dr[1] = TextBox2.Text;
        dt.Rows.Add(dr);
    }
    else
    {
        dr = dt.NewRow();
        dr[0] = TextBox1.Text;
        dr[1] = TextBox2.Text;

        dt.Rows.Add(dr);

    }

     // If ViewState has a data then use the value as the DataSource
     if (ViewState["CurrentData"] != null)
     {
         GridView1.DataSource = (DataTable)ViewState["CurrentData"];
         GridView1.DataBind();

    }
     else
    {
         // Bind GridView with the initial data assocaited in the DataTable
         GridView1.DataSource = dt;
         GridView1.DataBind();
    }
     // Store the DataTable in ViewState to retain the values
      ViewState["CurrentData"] = dt;

 } 
```

添加按钮上的单击事件：

```
protected void Button1_Click(object sender, EventArgs e)
     {
         // Check if the ViewState has a data assoiciated within it. If
         if (ViewState["CurrentData"] != null)
        {
             DataTable dt = (DataTable)ViewState["CurrentData"];
             int count = dt.Rows.Count;
             BindGrid(count);
         }
         else
         {
            BindGrid(1);
         }
          TextBox1.Text = string.Empty;
          TextBox2.Text = string.Empty;
          TextBox1.Focus();
      }
} 
```

提交按钮事件：

```
if (ViewState["CurrentData"] != null)
        {
            GridView2.DataSource = (DataTable)ViewState["CurrentData"];
            GridView2.DataBind();
        } 
```

删除按钮事件：

```
protected void DeleteButton_Click(object sender, EventArgs e)
    {

        foreach (GridViewRow row in GridView1.Rows)
       {
           CheckBox cb = (CheckBox)row.FindControl("CheckBox1");
           if (cb != null && cb.Checked)
           {
               row.Visible = false;
           }
           else
           {
                Response.Write("Select check box to Delete");
           }
       }
   } 
```

这是我的 aspx 页面代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default4.aspx.cs" Inherits="Default4" %>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head runat="server">
  <title></title>
  </head>
  <body>
     <form id="form1" runat="server">
     <div>
     <asp:TextBox ID="TextBox1" runat="server"/>&nbsp;&nbsp;&nbsp;&nbsp;
  <asp:TextBox ID="TextBox2" runat="server"/>&nbsp;&nbsp;&nbsp;<asp:DropDownList 
              ID="DropDownList1" runat="server">
              <asp:ListItem>ADT</asp:ListItem>
              <asp:ListItem>INF</asp:ListItem>
              <asp:ListItem>SC</asp:ListItem>
           </asp:DropDownList>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <asp:Button ID="Button1" runat="server" Text="Add" OnClick="Button1_Click" />
  &nbsp;&nbsp;&nbsp;&nbsp;<br />
          &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
          <asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
             GridLines="None">
             <AlternatingRowStyle BackColor="White" />
             <EditRowStyle BackColor="#2461BF" />
             <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
             <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
              <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
             <RowStyle BackColor="#EFF3FB" />
             <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" /> 
             <SortedAscendingCellStyle BackColor="#F5F7FB" />
             <SortedAscendingHeaderStyle BackColor="#6D95E1" />
             <SortedDescendingCellStyle BackColor="#E9EBEF" />
             <SortedDescendingHeaderStyle BackColor="#4870BE" />
             <Columns>
            <asp:TemplateField>
             <ItemTemplate>
                <asp:CheckBox ID="CheckBox1" runat="server"  />
             </ItemTemplate>
        </asp:TemplateField>
     </Columns>

         </asp:GridView>

         <br />
         <asp:Button ID="btnSubmit" runat="server" onclick="btnSubmit_Click" 
             Text="Submit" />
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <asp:Button ID="DeleteButton" runat="server" Text="Delete" 
              onclick="DeleteButton_Click" />
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

          <br />
      <br />
         <asp:GridView ID="GridView2" runat="server" CellPadding="4" ForeColor="#333333" 
             GridLines="None">
            <AlternatingRowStyle BackColor="White" />
            <EditRowStyle BackColor="#2461BF" />
            <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" /> 
            <RowStyle BackColor="#EFF3FB" />
            <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" /> 
            <SortedAscendingCellStyle BackColor="#F5F7FB" />
            <SortedAscendingHeaderStyle BackColor="#6D95E1" />
            <SortedDescendingCellStyle BackColor="#E9EBEF" />
            <SortedDescendingHeaderStyle BackColor="#4870BE" />
         </asp:GridView>
        </div>
     </form>
 </body>
</html> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:42:27.347

首先，您不是从中删除数据，`DataTable`而是在 DataGridView1 中隐藏行。

如果要删除它，请在删除事件中执行以下操作：

```
var dt = (DataTable)ViewState["CurrentData"];
if (dt != null)
{
     var firstname = (row.FindControl("labelFirstName") as Label).Text; //my guess that you are binding DataRows to labels in grid view? if not this has to be changed
     var lastname = (row.FindControl("labelLastName") as Label).Text; //same as above

     var row = dt.AsEnumerable().FirstOrDefault(x => x.Field<string>("First Name") == firstname && x.Field<string>("Last Name") == lastname);

     dt.Rows.Remove(row);     

     GridView1.DataSource = dt;
     GridView1.DataBind();

     GridView2.DataSource = dt;
     GridView2.DataBind();

     ViewState["CurrentData"] = dt;
} 
```

这就是您从 DataTable 中删除行的方式。

但是，如果您只想隐藏它们，那么您必须在 DataGridView2 中找到具有相同数据的行并将其隐藏。

```
foreach (GridViewRow row in GridView1.Rows)
{
    CheckBox cb = (CheckBox)row.FindControl("CheckBox1");
    if (cb != null && cb.Checked)
    {
        row.Visible = false;
        var firstname = (row.FindControl("labelFirstName") as Label).Text; //my guess that you are binding DataRows to labels in grid view? if not this has to be changed
        var lastname = (row.FindControl("labelLastName") as Label).Text; //same as above

        foreach (GridViewRow row in GridView2.Rows)
        {
             var found = false;
             // logic to search for row
             if (found)
             {
                  row.Visible = false;
             }
        }
    }
    else
    {
        Response.Write("Select check box to Delete");
    }
} 
```

我希望我正确理解了您的问题，这就是您想要的:)。如果没有，请写评论，我会进一步帮助:)

* * *

这个应该可以的。

```
protected void DeleteButton_Click(object sender, EventArgs e)
{
    var dt = (DataTable)ViewState["CurrentData"];

    if (dt == null)
    {
        return;
    }

    List<DataRow> rowsToDelete = new List<DataRow>();
    foreach (GridViewRow row in GridView1.Rows)
    {        
        CheckBox cb = (CheckBox)row.FindControl("CheckBox1");
        if (cb != null && cb.Checked)
        {
            row.Visible = false;

            //remove row by its index as it should GridViewRow index == DataRow index
            //it is not the best way but from your code I dont have information how your GridView looks
            rowsToDelete.Add(dt.Rows[row.RowIndex]);
        }
        else
        {
            Response.Write("Select check box to Delete");
        }
    }

    for (int i = 0; rowsToDelete.Count; i++)
    {
        dt.Rows.Remove(rowsToDelete[i]);
    }
} 
```

这个编辑是正确的，最后一个不是那么多，忽略了可能有更多的行要删除:)。

要更改 DataBound 中的数据，`GridView`您必须修改它`DataSource`而不是`GridView`它本身！这就是为什么您必须从您的项目中删除项目`DataTable`并将数据源重新绑定到您的两个网格中发生的更改:)

# c# - 获取应用于通用方法的 PostSharp OnMethodBoundaryAspect 的通用参数

> ID：14768298
> 
> 赞同：1
> 
> 时间：2013-02-08T08:13:07.780
> 
> 标签：c#, postsharp

给定以下设置的 PostSharp OnMethodBoundaryAspect，我如何`typeof(T1)`在`OnEntry`or期间获得`OnExit`：

*不使用反射的奖励积分。*

**方面：**

```
public class MyOnMethodBoundaryAspect : OnMethodBoundaryAspect
{
    public override void OnEntry(MethodExecutionArgs args)
    {   
        //args.??? -- How to get typeof(T1)
    }
} 
```

**方法：**

```
[MyOnMethodBoundaryAspect]
public void Foo<T1>()
{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:16:09.407

我已经很久没有使用 PostSharp 了，但*看起来*你只需要使用该[`Method`](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/P_PostSharp_Aspects_MethodExecutionArgs_Method.htm)属性：

> 如果执行的方法是泛型的或其声明类型是泛型的，则当前属性包含正在执行的泛型实例。

所以你应该可以[`MethodBase.GetGenericArguments`](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getgenericarguments.aspx)用来获取类型参数。

# c# - 如何在 CAS 中注册 URL 或站点？

> ID：14768301
> 
> 赞同：0
> 
> 时间：2013-02-08T08:13:17.317
> 
> 标签：c#, asp.net, single-sign-on, cas

我正在一个已经使用 CAS 进行单点登录的网站上工作。有人告诉我将此功能应用于新站点。那就是当我点击一个按钮时，它会自动让我在那个新网站上登录。

那么，如何添加一个赋予其单点登录功能的新站点？

我使用的语言是 Asp.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:03:02.300

您需要在 CAS 服务器的后台声明您的应用程序：`https://wiki.jasig.org/display/CASUM/Services+Management`为了保护您的网站，您需要使用 .Net 的 CAS 客户端：`https://wiki.jasig.org/display/CASC/.Net+Cas+Client`。

# php - 使用 AJAX 分页从所有 asp.net 页面中抓取数据

> ID：14768302
> 
> 赞同：16
> 
> 时间：2013-02-08T08:13:30.717
> 
> 标签：php, asp.net, curl, web-scraping, screen-scraping

我想废弃一个网页，其中包含带有地址、电子邮件等的用户列表。网页包含带有分页的用户列表，即当我单击第 2 页链接时，页面包含 10 个用户，它将通过 AJAX 加载用户列表表单第 2 页并更新列表，所以打开所有分页链接。

网站是在扩展名为 .aspx 的 asp ie 页面中开发的，因为我对 asp.net 以及 asp 如何管理分页和 AJAX 一无所知

我正在使用简单的 html dom [http://sourceforge.net/projects/simplehtmldom/](http://sourceforge.net/projects/simplehtmldom/)来废弃包含

对于有用户的页面，`<=10` 我不必像用户单击分页链接时那样模拟 AJAX 请求

但是对于具有分页以从其他页面获取数据的页面，我正在模拟发布 AJAX 请求

```
require 'simple_html_dom.php';

$html = file_get_html('www.example.com/user_list.aspx');

$viewstate = $html->find("#__VIEWSTATE");
$viewstate = $viewstate[0]->attr['value'];

$eventvalidation        = $html->find("#__EVENTVALIDATION");
$eventvalidation        = $eventvalidation[0]->attr['value'];
$number_of_pageinations = 3;

$pageNumberCodes = array(
    'ctl00$cphMainContent$rdpMembers$ctl01$ctl01',
    'ctl00$cphMainContent$rdpMembers$ctl01$ctl02',
    'ctl00$cphMainContent$rdpMembers$ctl01$ctl03'
); // this code is added for each page in POST  as  __EVENTTARGET 

for ($i = 0; $i < $number_of_pageinations; $i++) {
    $options = array(
        CURLOPT_RETURNTRANSFER => true, // return web page
        CURLOPT_HEADER => false, // don't return headers
        CURLOPT_ENCODING => "", // handle all encodings
        CURLOPT_USERAGENT => "Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.8.1.7) Gecko/20070914 Firefox/2.0.0.7'", // who am i
        CURLOPT_AUTOREFERER => true, // set referer on redirect
        CURLOPT_CONNECTTIMEOUT => 120, // timeout on connect
        CURLOPT_TIMEOUT => 1120, // timeout on response
        CURLOPT_MAXREDIRS => 10, // stop after 10 redirects
        CURLOPT_POST => true,
        CURLOPT_VERBOSE => true,
        CURLOPT_POSTFIELDS => urlencode('ctl00%24scriptManager=ctl00%24cphMainContent%24ctl00%24cphMainContent%24rdpMembersPanel%7C' . $pageNumberCodes[0] . '&__EVENTTARGET=' . $pageNumberCodes[0] . '&__EVENTARGUMENT=' . '&__VIEWSTATE=' . $viewstate . '&__EVENTVALIDATION=' . $eventvalidation . "&google=" . '&ctl00%24cphMainContent%24txtZip=' . '&ctl00%24cphMainContent%24cboRadius=Exact' . '&ctl00%24cphMainContent%24txtMemberName=' . '&ctl00%24cphMainContent%24txtCity=Honolulu' . '&ctl00%24cphMainContent%24cboState=HI' . '&ctl00%24cphMainContent%24txtAddress=' . '&ctl00_cphMainContent_rdpMembers_ClientState=' . '&ctl00%24cphMainContent%24ddList=-Select%20field%20to%20sort-' . '&ctl00_cphMainContent_ddList_ClientState=' . '&ctl00_cphMainContent_rdlMembers_ClientState=' . '&ctl00_cphMainContent_ddList_ClientState=' . '&ctl00_cphMainContent_rdlMembers_ClientState=' . '&ctl00_cphMainContent_rdpMembers1_ClientState=' . '&__ASYNCPOST=true' . 'RadAJAXControlID=ctl00_cphMainContent_RadAjaxManager1')
    );
    $ch      = curl_init($url);
    curl_setopt_array($ch, $options);
    $return = curl_exec($ch);
    curl_close($ch);
    echo $return;

    $newHtml = str_get_html($return);

    $viewstate = $newHtml->find("#__VIEWSTATE");
    $viewstate = $viewstate[0]->attr['value'];

    $eventvalidation = $newHtml->find("#__EVENTVALIDATION");
    $eventvalidation = $eventvalidation[0]->attr['value'];
} 
```

这应该回显来自不同页面的数据，但它总是打印第一页的数据，任何人都可以指出我在哪里磨损以及缺少什么我不知道 asp 如何管理分页和 AJAX 请求以及是什么`__EVENTARGUMENT`，`__VIEWSTATE`并且`__EVENTVALIDATION`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-19T17:44:17.897

通常，为了使 ASP.NET 网站认为您实际上按下了一个按钮（更笼统地说 - 执行了回发），您需要执行以下操作：

1.  获取页面上每个 INPUT 和 SELECT 元素的值。可能并非在每种情况下都需要它，但您应该始终至少获取名称以“__”开头的所有隐藏字段的值（例如 __VIEWSTATE）。您实际上并不需要知道其中写入了什么——只需要将其中的值原封不动地发送回服务器即可。

2.  创建对服务器的 POST 请求。您需要使用经典的 POST，避免任何 AJAX 请求。使用某些浏览器插件（在 Firefox 或 Chrome 中）可能会禁用 XMLHttpRequest，以便您可以使用 Fiddler 等工具拦截非 AJAX 请求。

3.  将 #1 中的每个值添加到该发布请求。您只需覆盖两个值：__EVENTTARGET 和 __EVENTARGUMENT。除非您尝试模仿的链接或按钮具有`onclick`类似`<a href="javascript:__doPostBack('ctl00$login','')">`. 如果是，则解析此链接中的值 - 第一个是事件目标（它通常会匹配页面上某些元素的 ID），第二个是事件参数。

4.  如果您正确执行了请求，您应该会返回 HTML 页面。如果您收到部分响应，请检查您是否没有传递请求异步结果的 HTTP 标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:33:22.893

我最好的建议是使用 iMacros [https://addons.mozilla.org/en-US/firefox/addon/imacros-for-firefox/](https://addons.mozilla.org/en-US/firefox/addon/imacros-for-firefox/)

宏：

1.  记录您的页面下载流程。[http://wiki.imacros.net/First_Steps](http://wiki.imacros.net/First_Steps)
2.  将网页保存到本地目录。[http://wiki.imacros.net/SAVEAS](http://wiki.imacros.net/SAVEAS)
3.  使用 PHP 脚本报废电子邮件、地址等。

无论是 ajax - .aspx、.jsp 还是 .php。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T00:59:12.953

我会建议扩展到 Ruby 并尝试[Capybara](https://github.com/jnicklas/capybara)，这是使用 Selenium 的一种明智的方式。它允许您访问页面，然后检查实际的 DOM。您可以单击所有内容，等待事件等。它使用真正的浏览器。

```
visit "http://www.google.com" 
page.find("button[name=btnK]") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-01T23:57:14.737

我得到了一些使用你的作为基础的测试代码，我发现的唯一问题是这一行。

```
CURLOPT_POSTFIELDS => urlencode('ctl00%24scriptManager=ctl00%24cphMainContent%24ctl00%24cphMainContent%24rdpMembersPanel%7C' . $pageNumberCodes[0] . '&__EVENTTARGET=' . $pageNumberCodes[0] . '&__EVENTARGUMENT=' . '&__VIEWSTATE=' . $viewstate . '&__EVENTVALIDATION=' . $eventvalidation . "&google=" . '&ctl00%24cphMainContent%24txtZip=' . '&ctl00%24cphMainContent%24cboRadius=Exact' . '&ctl00%24cphMainContent%24txtMemberName=' . '&ctl00%24cphMainContent%24txtCity=Honolulu' . '&ctl00%24cphMainContent%24cboState=HI' . '&ctl00%24cphMainContent%24txtAddress=' . '&ctl00_cphMainContent_rdpMembers_ClientState=' . '&ctl00%24cphMainContent%24ddList=-Select%20field%20to%20sort-' . '&ctl00_cphMainContent_ddList_ClientState=' . '&ctl00_cphMainContent_rdlMembers_ClientState=' . '&ctl00_cphMainContent_ddList_ClientState=' . '&ctl00_cphMainContent_rdlMembers_ClientState=' . '&ctl00_cphMainContent_rdpMembers1_ClientState=' . '&__ASYNCPOST=true' . 'RadAJAXControlID=ctl00_cphMainContent_RadAjaxManager1') 
```

将需要移动 urlencode 看起来像这样

```
CURLOPT_POSTFIELDS => 'ctl00%24scriptManager=ctl00%24cphMainContent%24ctl00%24cphMainContent%24rdpMembersPanel%7C' . $pageNumberCodes[0] . '&__EVENTTARGET=' . $pageNumberCodes[0] . '&__EVENTARGUMENT=' . '&__VIEWSTATE=' . rawurlencode($viewstate) . '&__EVENTVALIDATION=' . rawurlencode($eventvalidation) . "&google=" . '&ctl00%24cphMainContent%24txtZip=' . '&ctl00%24cphMainContent%24cboRadius=Exact' . '&ctl00%24cphMainContent%24txtMemberName=' . '&ctl00%24cphMainContent%24txtCity=Honolulu' . '&ctl00%24cphMainContent%24cboState=HI' . '&ctl00%24cphMainContent%24txtAddress=' . '&ctl00_cphMainContent_rdpMembers_ClientState=' . '&ctl00%24cphMainContent%24ddList=-Select%20field%20to%20sort-' . '&ctl00_cphMainContent_ddList_ClientState=' . '&ctl00_cphMainContent_rdlMembers_ClientState=' . '&ctl00_cphMainContent_ddList_ClientState=' . '&ctl00_cphMainContent_rdlMembers_ClientState=' . '&ctl00_cphMainContent_rdpMembers1_ClientState=' . '&__ASYNCPOST=true' . 'RadAJAXControlID=ctl00_cphMainContent_RadAjaxManager1' 
```

# php - 从主题文件夹内加载资产

> ID：14768303
> 
> 赞同：0
> 
> 时间：2013-02-08T08:13:39.080
> 
> 标签：php, codeigniter

在试图找出如何进行以下工作。我有位于此处的模板库，我试图弄清楚如何让仪表板在下面的文件结构中查找 images/css/js 文件，而不是 public_html 文件夹中的常规资产文件夹，因为这些文件仅与那个主题有关。

[https://github.com/philsturgeon/codeigniter-template](https://github.com/philsturgeon/codeigniter-template)

```
/application
   /themes
      /supr
          /views
              dashboard.php
          /assets
             /js
             /css
             /images
/public_html
    /assets
        /js
        /css
        /images
    index.php 
```

还有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:32:02.523

您最好对其进行重组，这在 Apache 服务器上是不可能实现的，因为`mod_rewrite`不允许在目录之外进行重写（一个或多个级别），如果您是，您必须阅读 nginx 上的一堆文档才能做到这一点不熟悉重写。您可以尝试通过检查文件是否存在于您的主题文件夹中并将其渲染到输出来让 CodeIgniter 为您执行此操作，但这将极大地降低性能，因为每个图像都会调用 CI 并最终会在您的应用程序中增加错误。

我建议你改用这个结构：

```
/application
   /themes
      /supr
          /views
              dashboard.php
/public_html
    /assets
        /js
        /css
        /images
        /themes
            /supr
                /js
                /css
                /images
            /kewl_theme2
                /js
                /css
                /images 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:55:10.090

我正在使用相同的库并进行了一些修改：[https ://github.com/FDiskas/MightMedia_TVS/](https://github.com/FDiskas/MightMedia_TVS/)

有了结构，我很高兴：

```
/themes
    /demo
        /views
            /mobile
            /web
                /layouts
                /modules
                /partials
                /resources
                    /css
                    /img
                    /js 
```

在生产中，所有这些 css 和 js 文件都被合并并压缩到 `application/resource/compiled`文件夹中

在这里演示：http: [//pac.lt/en.html](http://pac.lt/en.html)

# ruby - Test-First Learn_Ruby 00_hello Rake 中止

> ID：14768305
> 
> 赞同：1
> 
> 时间：2013-02-08T08:13:51.620
> 
> 标签：ruby, rake

您的帮助将不胜感激。我是编程新手，想尝试启动 alexch 的 Learn_Ruby，但我坚持第一课：00_hello。我正在运行“rake”测试，出现奇怪的错误：

```
Justins-MacBook-Pro:00_hello Justin$ rake
(in /Users/Justin/Desktop/learn_ruby-master)
rake aborted!
undefined method `gem' for main:Object
/Users/Justin/Desktop/learn_ruby-master/Rakefile:2
(See full trace by running task with --trace) 
```

我只是按照课程中的说明进行操作：[https ://github.com/alexch/learn_ruby/blob/master/index.html](https://github.com/alexch/learn_ruby/blob/master/index.html)

这是我的规格： ruby​​ 1.8.7 rspec 2.12 gem 1.8.25

还有什么我想念的吗？？非常感谢您的帮助。

这是宝石清单：

```
Justins-MacBook-Pro:00_hello Justin$ gem list

*** LOCAL GEMS ***

activemodel (3.2.11)
activerecord (3.2.11)
activesupport (3.2.11)
arel (3.0.2)
builder (3.1.4, 3.0.4)
diff-lcs (1.2.0, 1.1.3)
i18n (0.6.1)
multi_json (1.5.0)
rspec (2.12.0)
rspec-core (2.12.2)
rspec-expectations (2.12.1)  
rspec-mocks (2.12.2)
rubygems-update (1.8.25)
tzinfo (0.3.35)
uuidtools (2.1.3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:53:16.757

首先通过以下命令更新 ruby​​gems：

```
gem update --system 
```

那应该解决它。

如果没有，请尝试从 rakefile 中删除以下行

```
gem 'rspec', '~>2' 
```

# php - 使用 htaccess addhandler 将 mp3 解析为 php

> ID：14768306
> 
> 赞同：2
> 
> 时间：2013-02-08T08:13:58.220
> 
> 标签：php, .htaccess

我正在尝试使用 htaccess 中的这一行将 mp3 文件解析为 php：

```
AddHandler application/x-httpd-php5 .mp3 .MP3 
```

目的是运行 auto_prepend_file

一切正常。但是在运行 auto_prepend_file 之后，服务器会输出 mp3 并运行时出现错误，例如：

```
Warning: Unexpected character in input: '' (ASCII=23) state=0 i 
```

似乎它将mp3文件解析为php。无论如何只是告诉服务器将 mp3 文件视为 php，这样我就可以使用 auto_prepend_file 指令，然后取消 php 处理

（我不能为此使用 mod_rewrite）

问题归结为：有没有办法在中间脚本中取消 php 解析。这样处理后，mp3就会通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:55:41.810

我会这样尝试：使用 mod_rewrite 来运行 php 脚本。

```
RewriteRule (\w+\.mp3)$ phpscript.php?file=$1 
```

在这个脚本中，添加你想要的东西，然后读取给定的文件并输出它。

```
<?php
$file = $_GET['file'];
include("prependfile.php");

header('Content-Type: audio/mpeg3');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($file));
readfile($file);
?> 
```

# highcharts - 具有单个数据点的 Highcharts 时间线

> ID：14768308
> 
> 赞同：1
> 
> 时间：2013-02-08T08:14:02.573
> 
> 标签：highcharts

当我创建基于时间线的 highcharts 图表时，当只有一个点时，它无法在 x 轴上呈现时间。一个例子：http: [//jsfiddle.net/EAmBG/](http://jsfiddle.net/EAmBG/)

```
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: {
                day: '%e of %b'   
            }
        },

        series: [{
            data: [29.9],
            pointStart: Date.UTC(2010, 0, 1),
            pointInterval: 24 * 3600 * 1000 // one day
        }]
    });
}); 
```

当有多个点时完美运行。

到目前为止，我还没有找到解决此问题的标志。关于这个有什么提示吗？

提前致谢， 蒂莫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:08:56.593

你设置点开始

```
pointStart: Date.UTC(2010, 0, 1) 
```

这意味着`start at 2010/1/1 - 00:00:00`正如预期的那样，它从这一点开始。

如果你设置点开始是这样的：

```
pointStart: Date.UTC(2010, 0, 1,5,3,7) 
```

结果是`2010/1/1 - 05:03:07`

图表合乎逻辑。没有问题。如果您设置一个点，那么这应该是起点。这有什么问题？

# mschart - 如何在 MSChart c# 中为 X 轴和 Y 轴标记 0 线

> ID：14768312
> 
> 赞同：1
> 
> 时间：2013-02-08T08:14:13.027
> 
> 标签：mschart, gridlines

我已经实现了一个正确显示值的 MsChart。一切运行良好。我的问题是我需要突出显示 X 轴上的 0 和 Y 轴上的 0 的网格线。所有其他网格线将有不同的颜色除了那里 2。请提前建议谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:45:33.427

我已经想通了。如果有人需要在这里参考它是：Area.axisX.Linecolor = color.Red;

# c# - 通过 Visual Studio (C#) 打开命令提示符，运行一些命令，然后通过文本框在命令提示符中显示生成的详细信息

> ID：14768313
> 
> 赞同：0
> 
> 时间：2013-02-08T08:14:12.777
> 
> 标签：c#, visual-studio-2008, cmd

这是我写的打开cmd，运行IPERF作为**客户端**的程序。连接服务器后，应该会显示网络的带宽。但是命令提示符关闭，我需要的信息仅在服务器端可用。

如何获取信息并将其显示在 MessageBox 中？

任何形式的帮助都非常感谢。

```
string output;
ProcessStartInfo start = new ProcessStartInfo(@"C:\Windows\System32\cmd.exe");
start.UseShellExecute = false;
start.ErrorDialog = false;
start.WindowStyle = ProcessWindowStyle.Normal;
start.RedirectStandardError = true;
start.RedirectStandardInput = true;
start.RedirectStandardOutput = true;
Process cmd = new Process();
cmd.StartInfo = start;
cmd.Start();
try
{
  Process.Start("cmd", "/C iperf -c " + IP_Address);
}
catch
{
}
Thread.Sleep(1000);
StreamReader outputReader = cmd.StandardOutput;
StreamReader errorReader = cmd.StandardError;         
output = outputReader.ReadToEnd();
MessageBox.Show( output ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-21T14:13:24.020

`try { Process.Start("cmd", "/C iperf -c " + IP_Address); }`

你试过“cmd /k”吗？它应该防止终端在您的参数完成后关闭。

`try { Process.Start("cmd /k", "/C iperf -c " + IP_Address); }`

# php - PHP shmop 问题

> ID：14768328
> 
> 赞同：2
> 
> 时间：2013-02-08T08:15:43.360
> 
> 标签：php, shared-memory

我正在使用 shmop 通过跟踪当前服务器连接的数量并在数量高于某个阈值时拒绝新的连接来进行一些简单的服务器限制。本质上，当脚本启动时，它会在 shmop 中增加一个共享计数器变量，并在注册的关闭函数中减少它。

这就像一个魅力和 shmop_x 似乎真的很容易使用。我使用的内存块的大小很小，16 字节。

但是，鉴于在我认为应该检查之前我从未使用过 shmop - 使用 shmop 时是否需要注意任何问题、竞争条件等？

# iphone - iPhone 5 硬件上的奇怪 colorWithPatternImage

> ID：14768331
> 
> 赞同：12
> 
> 时间：2013-02-08T08:15:58.910
> 
> 标签：iphone, objective-c, hardware

在一个空白的 UIViewController 中，我通过以下方式更改屏幕颜色：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"blackPattern.png"]]; 
```

然后我用我的 iPhone 5 截屏。图像看起来像：

![在此处输入图像描述](../Images/5bd0522c1f63bfe5e8491e3cd2f40911.png)

如果您以 100% 的比例查看图像，您将看到三个条（顶部、左侧和底部）。但是，我的图案图像非常简单（blackPattern@2x.png）：

![在此处输入图像描述](../Images/ed5f3e6086c9ed046bab89e792236101.png)

这是用于视网膜显示的 8x8 png。

具有讽刺意味的是，当应用程序在模拟器上运行时，这些栏是不可见的。它是 iPhone 5 硬件特定的症状吗？

ps 如果你想看到它运行，你可以下载我的应用程序：[这里](https://itunes.apple.com/us/app/dead-spotter/id565048990?mt=8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:10:39.487

有趣的。我可以在 iPhone 5 上重现该问题（不在模拟器上，甚至在视网膜模式下）。

一些想法和观察： 小图案图像中的颜色恰好是黑色和白色（0 和 255，每个 r、b 和 g）。在全屏图像中它不是。中间是 8 和 247，底部是 12，243，侧面是 4，251。

这看起来很像一个插值工件：当 Core Graphics 将图像中的像素绘制到设备像素上并且像素不完全匹配时，它会根据相邻源像素计算插值颜色。黑色和白色会产生深灰色和亮灰色：我们在这种情况下看到的效果。

我仍然不知道为什么这只发生在设备上。

玩一点这个问题我没有找到原因，但解决了您的问题：自己创建棋盘图案颜色：

```
static void patternDrawPatternCallback(void *info, CGContextRef c)
{
    for (int y = 0; y < 8; ++y) {
        for (int x = 0; x < 8; ++x) {
            CGFloat v = (x + y) & 1;
            CGContextSetRGBFillColor(c, v, v, v, 1);
            CGContextFillRect(c, (CGRect){{x, y}, {1, 1}});
        }
    }
}

static void patternReleaseInfoCallback(void *info)
{
}

static UIColor *checkerColor()
{
    CGPatternCallbacks callbacks = {
        .drawPattern = patternDrawPatternCallback,
        .releaseInfo = patternReleaseInfoCallback,
    };

    CGFloat scale = 1.0f / [UIScreen mainScreen].scale;
    CGPatternRef pattern = CGPatternCreate(NULL,
                                           (CGRect){.size={8, 8}},
                                           CGAffineTransformMakeScale(scale, scale),
                                           8, 8,
                                           kCGPatternTilingConstantSpacing,
                                           YES,
                                           &callbacks);

    CGFloat components[] = {1, 1, 1, 1};
    CGColorSpaceRef colorspace = CGColorSpaceCreatePattern(NULL);
    CGColorRef color = CGColorCreateWithPattern(colorspace, pattern, components);
    CGColorSpaceRelease(colorspace);
    CGPatternRelease(pattern);

    UIColor *checkerColor = [UIColor colorWithCGColor:color];
    CGColorRelease(color);

    return checkerColor;
} 
```

使用此代码中的颜色我无法重现该问题（即使我使用了图案平铺并将平铺的大小设置为略微偏离）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:18:48.857

我不知道这是否是您的确切问题，但是这一行：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:
    [UIImage imageNamed:@"blackPattern.png"]]; 
```

...意味着您正在使用名为“blackPattern.png”的文件，无论设备是否为视网膜。该行应该是：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:
    [UIImage imageNamed:@"blackPattern"]]; 
```

...（`.png`最后没有）。这样，如果设备是视网膜，您的程序将使用“blackPattern.png”（如果非视网膜）和“blackPattern@2x.png”。

可能您运行此代码的模拟器不是视网膜，所以看起来不错；您看到问题的只是视网膜设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:13:10.420

看起来您正在创建 UIImageView 或 UIView 并具有透明背景。由于您使用的图像包含不透明和透明的颜色，您仍然可以看穿它。

# php - php 会话在实时服务器上工作正常，但在本地主机上不工作？

> ID：14768332
> 
> 赞同：1
> 
> 时间：2013-02-08T08:16:01.280
> 
> 标签：php, session, session-variables

有一个在实时服务器上的实时 php 网站。现在我的工作必须改变一些样式表问题。所以我只是用数据库下载所有文件。我刚刚在我的本地主机（LAMP）上设置了站点。当我在本地主机上浏览该站点时，它只显示一个空白屏幕。现在，当我浏览代码并检查问题时。我可以看到有很多地方已经定义了会话。所有这些会话都在实时服务器上工作，但不在我的本地主机上工作。我也尝试过放置

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

在我的文件顶部区域。但我仍然没有运气。所以有人可以帮我解决这个问题。任何帮助和建议都将不胜感激。谢谢

**更新** 这里是我的实时服务器和本地主机的 cookie 的详细信息。

实时服务器 Cookie

![在此处输入图像描述](../Images/df01717e8936ba899ab2c4d5d3292c7e.png)

本地主机 Cookie 信息

![在此处输入图像描述](../Images/2049fa2ec736af42152eb87feaccc8f3.png)

# ruby - 如何在 Rails 中创建和使用全局静态类/单例？

> ID：14768334
> 
> 赞同：0
> 
> 时间：2013-02-08T08:16:08.173
> 
> 标签：ruby, ruby-on-rails-3, singleton

我需要一些可在控制器中全局访问且易于使用的类或单例对象。现在它在这样的`libs/`文件夹中实现：

```
class User
  class << self

    @user = nil
    attr_reader :uid, :name

    def init session
      if session[:user_info].nil?
        @user = nil
      end

      @user = session_data[:user]
    end

    def signed_in?
      @user.nil? ? false : true
    end

    def guest?
      not signed_in?
    end

  end
end 
```

这段代码显然不好，因为用户只在应用程序启动时初始化一次，如果使用不当，用户将不会被更新。我想保存使用类或对象的能力，而无需太多附加步骤，但每个新连接都有一个新的全局实例。应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:30:38.710

您可以添加`include Singleton`到您的用户类定义，然后使用`User.instance`go 获取用户实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:40:21.820

看起来您正在尝试创建标准的“当前用户”方法。我认为你使事情复杂化了一点。您需要做的就是根据会话信息加载用户对象并将其缓存在实例变量中。像这样的东西：

```
class ApplicationController < ActionController::Base
  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
end 
```

第一次调用它时，它会根据会话中存储的 ID 查找当前用户。后续调用将返回您已加载的用户对象。如果用户未登录，`current_user`将只是`nil`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:41:17.143

将代码放在**Application Controller**中，因为这是所有类的基类。这样做也可以在所有控制器中全局访问。

# ruby-on-rails-3 - 如何在 iframe 中填充文本字段中的值

> ID：14768348
> 
> 赞同：4
> 
> 时间：2013-02-08T08:16:52.580
> 
> 标签：ruby-on-rails-3, selenium, cucumber, capybara

我正在编写黄瓜功能，我需要在 iframe 中的文本字段中填充值。我试过了

```
find("#user_email").set "malicious_value" 
```

但无法获得成功。我有硒网络驱动程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:57:19.567

这是带有 selenium 的 ruby​​ 代码，用于在 iframe 中切换。你可以这样做：

```
#Move into iframe
page.driver.browser.switch_to.frame "name or id of frame"

#Move to default content or outsite frame
page.driver.browser.switch_to.default_content 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:37:04.773

如果你想在`frame`. 首先，您必须进入框架内部。

**进入框架的代码：**

```
 //Assume driver is initiated properly some where.
  driver.switchTo.frame(FrameName);

(Or)  
  driver.switchTo.frame(FrameIndexValue);  

(Or)  
  WebElement element = driver.findElement(By.id(LocatorValue));  
  driver.switchTo.frame(element); 
```

完成框架内的动作后。您必须使用

**离开框架的代码：**

```
 driver.switchTo.defaultContent(); 
```

如果您正在处理，`iframe`那么 defaultContent() 会将您带到所有 iframe 上方的主页，但如果您处理`frame`this 方法，则会将您带到页面的第一帧。

有关[帧处理](http://darrellgrainger.blogspot.ca/2012/04/frames-and-webdriver.html)的更多信息。

# java - struts 动作调用了两次

> ID：14768352
> 
> 赞同：-1
> 
> 时间：2013-02-08T08:17:01.387
> 
> 标签：java, struts

我正在使用 struts 1.1，每次我发出一个请求时，我的 strut 操作都会被调用两次。我在 jsp 页面中没有提交按钮。表单提交由 jquery 完成。是因为我的电脑吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:49:32.783

使用**Firebug**（Firefox 扩展）或**Live Http Headers**之类的工具并检查浏览器发送到服务器的 HTTP 请求。可能有一些`javascript`或`meta-refresh`标签在某处产生对同一资源的多个请求？

编辑：还要检查，由于您的 JSP/动作中的重定向/转发配置错误，例如 page1 -> page2 -> page1，可能会出现循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:28:50.937

我有一段时间面临同样的问题。但我发现在我的`web.xml`我有：

```
 <servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>
        org.apache.struts.action.ActionServlet
    </servlet-class>
    <load-on-startup>2</load-on-startup>
  </servlet> 
```

启动元素的负载设置为 2：

```
<load-on-startup>2</load-on-startup> 
```

所以我把它设置为1：

```
<load-on-startup>1</load-on-startup> 
```

它解决了我的问题。希望这可以帮助。

# android - 在一个应用程序中，活动和服务会在同一个进程中运行吗？

> ID：14768353
> 
> 赞同：5
> 
> 时间：2013-02-08T08:17:21.383
> 
> 标签：android, service

面试题：在一个Application中，Activity和Service是运行在同一个进程还是不同进程？我的回答是 ::: 在同一个过程中。

下一个问题 ::: 如果是这样，那么 Activity 和 Service 是如何同时运行的？我的回答是 ::: 操作系统将负责执行。（坦率地说，我不知道答案）。

有人可以解释上述问题吗？如果我的答案是错误的，那么正确的答案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:27:18.160

如果服务和活动属于您的应用，则：

如果没有另外定义，则相同的过程。您可以创建将在单独进程中运行的服务。

Service 和 Activity 共享同一个线程。所以它们不能同时运行。但是您可以创建新线程来处理 Service 中的命令。或者使用 IntentService 在自己的线程中处理所有命令。一些服务方法总是在 UI 线程上执行（例如 onCreate） 然后活动和服务可以并行运行（如果你有 2 个或更多内核 =）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T08:25:28.127

根据定制，它们都可以在相同或不同的过程中工作。是的，操作系统负责执行这两个。检查此以获取详细说明：http: [//developer.android.com/guide/topics/manifest/service-element.html#proc](http://developer.android.com/guide/topics/manifest/service-element.html#proc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T08:23:39.893

无法同时启动在同一进程中运行的 Activity 和 Service（这是默认行为）。

Service 的 onCreate() 方法在主 (UI) 线程上运行。

Activity 的 onCreate() 方法也在主（UI）线程上运行。

让两者或多或少同时启动的唯一方法是让服务在单独的进程中运行。

您可以尝试启动几个线程并使用带有屏障标志的信号量。

# java - 为什么这是一个遥不可及的声明？

> ID：14768361
> 
> 赞同：0
> 
> 时间：2013-02-08T08:17:50.287
> 
> 标签：java, if-statement, unreachable-statement

在此代码的底部，我收到“无法访问的语句”错误。我尝试了一些事情，但无法弄清楚为什么会这样。错误在代码的底部（我已经用//评论了错误所在的位置）请帮助我指出正确的方向，我很难过！

```
/**
* Describes a certain model.
* 
* @author (Joshua Baker) 
* @version (1.0)
*/
public class Model
{
public static final int IN_PER_FOOT = 12;
public static final int BASE_RATE = 60;
public static final int TALL_INCHES = 67;
public static final double THIN_POUNDS = 140.0;
public static final int TALL_THIN_BONUS = 5;
public static final int TRAVEL_BONUS = 4;
public static final int SMOKER_DEDUCTION = 10;

private String firstName;
private String lastName;
private int heightInInches;
private double weightInPounds;
private boolean travel;
private boolean smokes;
private String newHeight;
private int perHourRate;

/**
 * Default constructor
 */
public Model()
{
    setFirstName ("");
    setLastName  ("");
    setHeightInInches  (0);
    setWeightInPounds  (0.0);
    setTravel  (false);
    setSmokes  (false);
}

/**
 * 
 */
public Model (String whatIsFirstName, String whatIsLastName, int whatIsHeight, double whatIsWeight,
boolean canTravel, boolean smoker)
{
    setFirstName  (whatIsFirstName);
    setLastName  (whatIsLastName);
    setHeightInInches  (whatIsHeight);
    setWeightInPounds  (whatIsWeight);
    setTravel  (canTravel);
    setSmokes  (smoker);
}

/**
 *@return first name
 */
public String getFirstName()
{
    return firstName;
}

/**
 *@return last name
 */
public String getLastName()
{
    return lastName;
}

/**
 *@return height in inches
 */
public int getHeightInInches()
{
    return heightInInches;
}

/**
 *@return the converted height 
 */
public String getNewHeight()
{
    return newHeight;
}

/**
 *@return weight in pounds
 */
public double getWeightInPounds()
{
    return weightInPounds;
}

/**
 *@return models pay per hour rate
 */
public int getPerHourRate()
{
    return perHourRate;
}

/**
 *@return travel
 */
public boolean getTravel()
{
    return travel;
}

/**
 *@return smokes
 */
public boolean getSmokes()
{
    return smokes;
}

/**
 * models first name
 */
public void setFirstName(String whatIsFirstName)
{
    firstName = whatIsFirstName;
}

 /**
 * models last name
 */
public void setLastName(String whatIsLastName)
{
    lastName = whatIsLastName;
}

 /**
 * models height in inches
 */
public void setHeightInInches(int whatIsHeight)
{
    if (whatIsHeight >0){
    heightInInches = whatIsHeight;
    }

}

 /**
 * models weight in pounds
 */
public void setWeightInPounds(double whatIsWeight)
{
    if (whatIsWeight >0){
    weightInPounds = whatIsWeight;
    }
}

 /**
 * can model travel
 */
public void setTravel(boolean canTravel)
{
    travel = canTravel;
}

 /**
 * does model smoke
 */
public void setSmokes(boolean smoker)
{
    smokes = smoker;
}

/**
 * Converts to feet and inches
 */
public String convertheightToFeetInches() 
{
int leftOver = (heightInInches %= IN_PER_FOOT);
int newHeight = (heightInInches % IN_PER_FOOT);
return newHeight + "Foot" + leftOver + "Inches";
}

/**
 * 
 */
public int calculatePayPerHour(){
    if (heightInInches  >= TALL_INCHES && (weightInPounds <= THIN_POUNDS)) {
        perHourRate = BASE_RATE + TALL_THIN_BONUS;
        return perHourRate;
    }
    else
    {
        perHourRate = BASE_RATE;
        return perHourRate;
    }

    if (travel)  {          //unreachable statement

        perHourRate = BASE_RATE + TRAVEL_BONUS;   
        return perHourRate;
    }
    else
    {
        perHourRate = BASE_RATE;
        return perHourRate;

    }

    if (smokes) {             //unreachable statement
        perHourRate = BASE_RATE - SMOKER_DEDUCTION;
        return perHourRate;
    }

    else {}

    }

/**
 * Displays details
 */
public  void displayInfo()
{
    System.out.print("Name : " + getFirstName() + " ");
    System.out.println(getLastName());
    System.out.println("Height : " + getNewHeight() + "inches");
    System.out.println("Weight : " + getWeightInPounds() + "pounds");
    System.out.print("Travel : " + getTravel() + " " );
    System.out.print("Smokes : " + getSmokes() );
    System.out.println("Hourly rate : " + getPerHourRate() );
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T08:19:33.783

那是因为您的程序将从您的第一个`if block`或相应的`else`块返回：-

```
if (heightInInches  >= TALL_INCHES && (weightInPounds <= THIN_POUNDS)) {
    perHourRate = BASE_RATE + TALL_THIN_BONUS;
    return perHourRate;
}
else
{
    perHourRate = BASE_RATE;
    return perHourRate;
}
System.out.println("This will never get printed. And will show compiler error"); 
```

因此，将执行两个 return 语句中的任何一个。因此，任何进一步的代码都无法访问。

* * *

似乎您希望获得所有 的累积总和`service rates`以获得最终的`perHourRate`，为此，您可以`return statement`从每个`if-else`块中删除 。然后对于`if-else`第一个块之后的所有块，而不是分配`current price`to `perHourRate`，做一个`compound addition` `+=`.

此外，由于您正在处理实例字段 - `perHourRate`，因此您根本不需要返回它。您所做的更改`perHourRate`可以使用`getPerHourRate()`. 因此，将返回类型更改为`void`.

您可以尝试将您的`calculatePayPerHour`方法更新为以下方法：

```
public void calculatePayPerHour(){
    if (heightInInches  >= TALL_INCHES && (weightInPounds <= THIN_POUNDS)) {
        perHourRate = BASE_RATE + TALL_THIN_BONUS;  // Initial assignment

    } else {
        perHourRate = BASE_RATE;  // Initial assignment
    }

    /** Rest of the assignment will be compound assignment, since you
        are now updating the `perHourRate` **/

    if (travel)  {      
        perHourRate += TRAVEL_BONUS;   
    } // You don't need an else now. Since BASE_RATE is already added

    if (smokes) {    
        perHourRate -= SMOKER_DEDUCTION;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T08:20:02.100

在您的`calculatePayPerHour`方法中，您有一个 if/else 并且永远不会到达该语句，因为在这两种情况下您都返回一个结果：

```
if (heightInInches  >= TALL_INCHES && (weightInPounds <= THIN_POUNDS)) {
    perHourRate = BASE_RATE + TALL_THIN_BONUS;
    return perHourRate; // you return in the if
}
else
{
    perHourRate = BASE_RATE;
    return perHourRate; // you return in the else
}

... the execution will never reach here 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T08:20:44.217

```
if (heightInInches  >= TALL_INCHES && (weightInPounds <= THIN_POUNDS)) {
    perHourRate = BASE_RATE + TALL_THIN_BONUS;
    return perHourRate; // <------------
}
else
{
    perHourRate = BASE_RATE;
    return perHourRate;  // <------------
} 
```

无论您的身高或体重如何，这两个返回中的一个都会触发，因此它之后的任何语句都不会被执行。这与下面的代码相同。

```
if (heightInInches  >= TALL_INCHES && (weightInPounds <= THIN_POUNDS)) {
    perHourRate = BASE_RATE + TALL_THIN_BONUS;
}
else
{
    perHourRate = BASE_RATE;
}

return perHourRate;  
//unreachable 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T08:22:41.277

*   在您的方法`public int calculatePayPerHour()`中，第一个 if else 语句在任何情况下都返回一个值（在 if 和 else 块中）。
*   如果您试运行该程序，您将看到**控制流**永远不会到达此块下方的语句，因此您的异常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-08T08:21:29.350

在代码上方的 if/else 中，您已经有 2 个 return 语句......这意味着它永远不会到达下面的代码......

# java - 用于基于内容的图像检索系统的算法

> ID：14768364
> 
> 赞同：1
> 
> 时间：2013-02-08T08:17:55.373
> 
> 标签：java, image, image-processing, rgb, pixels

我最近听说了一个名为“基于内容的图像检索系统”的话题。我正在尝试了解本主题中使用的算法。我已经找到了 2 种算法。1）AverageRGB——计算图像中每个像素的红、绿、蓝通道的平均值。

2) GlobalColorHistograms - 它使用 RGB 颜色空间的 2 个有效位创建 64 个颜色桶。

这是我的问题。我们如何通过 RGB 通道的 2 个有效位获得 64 种不同的颜色。有效位的值是多少？我看过不同的地方，但什么都不懂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:40:06.183

首先将 RGB 通道拆分为`R`、`G`和`B`。鉴于您将只选择 2 位，唯一可能的值是`00`、`01`、`10`或`11`。无论您在每个通道中拥有什么值，这些都是您可以在给定通道中获得的仅有的四个值。假设您在每个通道中找到了所有四个值，那么您可以从中构建 64 种可能的 6 位颜色。

```
R: 00 01 10 11
G: 00 01 10 11
B: 00 01 10 11 
```

用`R`at`00`你会得到 16 种颜色：`000000`, `000001`, `000010`, `000011`, `000100`, ... 然后更多 16`01`种以此类推，组合的基础知识。

# java - 用于处理 Android 客户端请求的 Java Web 服务器

> ID：14768366
> 
> 赞同：-1
> 
> 时间：2013-02-08T08:18:02.843
> 
> 标签：java, android, webserver

由于我是 Java Web 服务器的新手，我不知道从哪里开始用 Java 创建服务器来回复 Android 设备请求（**A WEB SERVER NOT AN ACTUAL SITE）**。

我应该使用哪种技术，应该阅读哪些文件？我在 Internet 上搜索了有关 Java 的信息，但我发现了很多技术，但我不知道我可以使用哪一种。

Spring MVC,JSF,JSP,Struts,Servlet.......

希望这个问题足够清楚，您可以回答。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:33:15.033

在服务器端处理 android 设备请求并不重要。在这种情况下，主要思想是http通信-客户端发送请求，服务器处理此请求并向客户端发送响应，您可以在服务器端使用任何技术-java，php等。如果您更喜欢java，我建议您尝试servlet，它是您上面提到的最简单的技术。

# c# - Spring.net Nhibernate dao 为空

> ID：14768368
> 
> 赞同：3
> 
> 时间：2013-02-08T08:18:25.663
> 
> 标签：c#, nhibernate, spring.net

我遵循了 spring.net 文档和北风示例。

贝瑞克道

```
[Repository]
public class BereikDao : HibernateDao, IBereikDao
{
    [Transaction(ReadOnly = true)]
    public model.Bereik getById(int id)
    {
        return CurrentSession.Get<Bereik>(id);
    }

    [Transaction(ReadOnly = true)]
    public IList<Bereik> getAll()
    {
        return getAll<Bereik>();
    }
} 
```

休眠道

```
public abstract class HibernateDao
{
    private ISessionFactory sessionFactory;

    /// <summary>
    /// Session factory for sub-classes.
    /// </summary>
    public ISessionFactory SessionFactory
    {
        protected get { return sessionFactory; }
        set { sessionFactory = value; }
    }

    /// <summary>
    /// Get's the current active session. Will retrieve session as managed by the 
    /// Open Session In View module if enabled.
    /// </summary>
    protected ISession CurrentSession
    {
        get { return sessionFactory.GetCurrentSession(); }
    }

    protected IList<T> getAll<T>() where T : class
    {
        ICriteria criteria = CurrentSession.CreateCriteria<T>();
        return criteria.List<T>();
    }
} 
```

spring-dao.xml

```
<objects xmlns="http://www.springframework.net"
         xmlns:db="http://www.springframework.net/database"
         xmlns:tx="http://www.springframework.net/tx">
    <db:provider id="DbProvider"
                       provider="IfxOdbc" connectionString="Dsn=${db.dsn};Host=${db.host};Server=${db.server};Service=${db.service};Database=${db.database};UID=${db.user};Password=${db.password};"/>
  <object id="appConfigPropertyHolder"
         type="Spring.Objects.Factory.Config.PropertyPlaceholderConfigurer, Spring.Core">
     <property name="configSections" value="databaseSettings"/>
      </object>
      <object id="NHibernateSessionFactory" type="Demo.dao.CustomLocalSessionFactoryObject">
        <property name="DbProvider" ref="DbProvider"/>
        <property name="MappingAssemblies">
          <list>
            <value>Demo</value>
          </list>
        </property>
        <property name="HibernateProperties">
          <dictionary>
            <entry key="hibernate.connection.provider" value="NHibernate.Connection.DriverConnectionProvider"/>
            <entry key="dialect" value="NHibernate.Dialect.InformixDialect1000"/>
            <entry key="connection.driver_class" value="NHibernate.Driver.IfxDriver"/>
            <entry key="show_sql" value="true" />
          </dictionary>
        </property>

    <property name="ExposeTransactionAwareSessionFactory" value="true" />

    </object>

  <object id="transactionManager"
        type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate33">
    <property name="DbProvider" ref="DbProvider"/>
    <property name="SessionFactory" ref="NHibernateSessionFactory"/>
  </object>

  <object type="Spring.Dao.Attributes.PersistenceExceptionTranslationPostProcessor, Spring.Data"/>

  <object id="bereikDao" type="Demo.dao.BereikDao">
    <property name="SessionFactory" ref="NHibernateSessionFactory"/>
  </object>

  <object id="bereikService" type="Demo.service.impl.BereikService">
    <property name="bereikDao" ref="bereikDao"/>
  </object>

  <tx:attribute-driven transaction-manager="transactionManager" proxy-target-type="true"/>

</objects> 
```

BereikService

```
public class BereikService : IBereikService
{
    private IBereikDao _bereikDao;

    public IBereikDao bereikDao
    {
        get { return _bereikDao; }
        set { _bereikDao = value; }
    }

    [Transaction]
    public IList<model.Bereik> getAll()
    {

        return _bereikDao.getAll();
    }
} 
```

在我的应用程序中：

```
bereikService = (BereikService)ctx.GetObject("bereikService");
IList<Bereik> bereiken = bereikService.getAll(); 
```

在 bereikService 中调试 bereikDao 时为空。

突然出现以下错误：

```
'Errors' node cannot be resolved for the specified context [System.InvalidCastException: Kan een object van het type System.Data.Odbc.OdbcConnection niet converteren naar het type IBM.Data.Informix.IfxConnection.
   bij IBM.Data.Informix.IfxCommand.System.Data.IDbCommand.set_Connection(IDbConnection value)
   bij NHibernate.AdoNet.AbstractBatcher.Prepare(IDbCommand cmd) in p:\nhibernate-core\src\NHibernate\AdoNet\AbstractBatcher.cs:regel 112
   bij NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd) in p:\nhibernate-core\src\NHibernate\AdoNet\AbstractBatcher.cs:regel 217
   bij NHibernate.Loader.Loader.GetResultSet(IDbCommand st, Boolean autoDiscoverTypes, Boolean callable, RowSelection selection, ISessionImplementor session) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:regel 1226
   bij NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:regel 421
   bij NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:regel 251
   bij NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:regel 1564]. 
```

翻译：无法将 System.Data.Odbc.OdbcConnection 的对象转换为 IBM.Data.Informix.IfxConnection。休眠错误？

从调试：

```
Spring.Data.NHibernate.HibernateTransactionManager - Exposing Hibernate transaction as ADO transaction [System.Data.Odbc.OdbcConnection] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T04:09:05.800

如果您在执行此操作后仍然出现错误，请告诉我。

首先将对象引用添加到 Dao.XML 并将其绑定到 SessionFactory，如下所示：

```
<object id="BereikDao" type="Spring.Northwind.Dao.NHibernate.HibernateBereikDao,     Spring.Northwind.Dao.NHibernate">
<property name="SessionFactory" ref="NHibernateSessionFactory"/>
</object> 
```

您还必须将对象引用添加到 Service.xml 并将其绑定到 BereikDao，如下所示：

```
<object id="BereikService" type="Spring.Northwind.Service.BereikService, Spring.Northwind.Service">
<property name="BereikDao" ref="BereikDao"/>
</object> 
```

# c# - 用C#中的其他标签将html标签替换为属性

> ID：14768371
> 
> 赞同：0
> 
> 时间：2013-02-08T08:18:35.153
> 
> 标签：c#, replace, tags, html

基本上，我想用其他标签替换 html 标签，例如：

```
</br> --> <LineBreak/>
<p> --> <Paragraph> 
```

一开始，我用

```
convertedHtml = html.replace("</br>","<LineBreak/>"); 
```

这种方法的问题是它需要管理所有案例，我想要一个通用类。例如，此标签内容无法使用此方法：

```
<p class="foo"> --> <Paragraph>
<p id="bar"> --> <Paragraph>
..... 
```

我该如何解决这个问题？

编辑：请注意，我事先不知道标签中有哪些属性。我想替换包含“p”、“/p”、“br”、“b”、...的标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:26:04.397

也许您可以使用 HTML Agility Pack ( [http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/) )

您可以通过 NuGet 获取它，它允许您使用 xPath 从 htmlDoc 获取节点列表...然后您可以遍历这些列表并对每个节点执行操作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:23:16.507

您应该使用正则表达式来解决此问题。更多信息可在[本网站](http://www.regular-expressions.info/dotnet.html)获得。它将为您提供区分大小写/不区分大小写匹配的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:26:38.323

我查看了我的一个较旧的项目，在那里我做了类似的事情。

看看我一直在使用的这个方法：

```
 private static Regex _validAttributeOrTagNameRegEx = 
                       new Regex(@"^\w+$", RegexOptions.Compiled |RegexOptions.IgnoreCase);
        private const string STR_RemoveHtmlAttributeRegex = 
                           @"(?<=<)([^/>]+)(\s{0}=['""][^'""]+?['""])([^/>]*)(?=/?>|\s)";
    public static string RemoveHtmlAttribute(this string input, string attributeName) {
       if (_validAttributeOrTagNameRegEx.IsMatch(attributeName)) {
          Regex reg = new Regex(string.Format(STR_RemoveHtmlAttributeRegex, attributeName),
             RegexOptions.IgnoreCase);
          return reg.Replace(input, item => item.Groups[1].Value + item.Groups[3].Value);
       } else {
          throw new ArgumentException("Not a valid HTML attribute name", "attributeName");
       }
    } 
```

我不确定这是否符合您的要求，但它可能是关于如何解决它的想法。从 html-tags 中删除属性后，您可以使用旧方法`convertedHtml = html.replace("</br>","<LineBreak/>");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:54:31.843

您可以尝试一些简单的字符串操作，不包括额外的命名空间和工具：

看这个例子，也许它可以解决你的问题：

```
string html = string.Concat("<p class=\"foo\">", 
                             "<p class=\"bar\">",
                             "<p>",
                             "</br>",
                             "<P>",
                             "</BR>"); // tags can be upper case as well

string strAux = html;
int tagOpenedAt=-1, tagClosedAt=-1;
bool isError = false;

do
{
   tagOpenedAt = strAux.IndexOf('<');
   tagClosedAt = strAux.IndexOf('>');
   if(tagOpenedAt<tagClosedAt)
   {
       string fullTag = strAux.Substring(tagOpenedAt, tagClosedAt - tagOpenedAt + 1);

       //<p> --> <Paragraph>
       if (fullTag.ToLower().Equals("<p>") || fullTag.ToLower().StartsWith("<p ")) 
           html = html.Replace(fullTag, "<Paragraph>");

       //</br> --> <LineBreak/>
       if (fullTag.ToLower().Equals("</br>")) 
           html = html.Replace(fullTag, "<LineBreak/>");

       //more if conditions as you need them

       strAux = strAux.Substring(tagClosedAt + 1);
   }
   else
   {
       isError = true;
   }
} 
while (tagOpenedAt>-1 && tagClosedAt>-1 && !isError); 
```

抱歉代码不好，也许你可以通过简单地执行一次**.ToLower()**而不是在每个**if**语句中进行改进。另外，我没有检查坏标签，代码只是假设 html 是有效的。

**刚刚编辑了一点**

```
 string html = string.Concat("<p class=\"foo\">","\n",
                                    "<p class=\"bar\">", "\n",
                                    "<p>", "\n",
                                    "</br>", "\n",
                                    "<P>", "\n",
                                    "</BR>");

        Console.WriteLine("HTML is :\n{0}\n", html);

        string strAux = html;
        int tagOpenedAt=-1, tagClosedAt=-1;
        bool isError = false;

        do
        {
            tagOpenedAt = strAux.IndexOf('<');
            tagClosedAt = strAux.IndexOf('>');
            if(tagOpenedAt < tagClosedAt)
            {
                string _fullTag = strAux.Substring(tagOpenedAt, tagClosedAt - tagOpenedAt + 1);
                string _lower = _fullTag.ToLower();
                string _replace = null;

                //<p> --> <Paragraph>
                if (_lower.Equals("<p>") || _lower.StartsWith("<p "))
                    _replace = "<Paragraph>";

                //</br> --> <LineBreak/>
                if (_lower.Equals("</br>")) 
                    _replace = "<LineBreak/>";

                //more if conditions as you need them

                if(_replace != null)
                {
                    html = html.Replace(_fullTag, _replace);
                    Console.WriteLine("Replaced {0} with {1}", _fullTag, _replace);
                }

                strAux = strAux.Substring(tagClosedAt + 1);
            }
            else
            {
                isError = true;
            }
        } 
        while (tagOpenedAt>-1 && tagClosedAt>-1 && !isError);

    Console.WriteLine("\nNew html is :\n{0}",html); 
```

# jquery - Jquery 和画廊

> ID：14768375
> 
> 赞同：0
> 
> 时间：2013-02-08T08:18:46.357
> 
> 标签：jquery

这可能是一个长镜头，但是，我使用的是galleriffic Jquery插件，并且我正在使用javascript通过附加和替换img src来动态更改图像：

```
 $.each(paths,function(index, value) {
       if(size > 0) {
    var src = $('.thumbs li:nth-child('+index+')').find('img').attr('src', value);
    var str = value; 
    var big_img=str.replace("_s","_b");
    var src = $('.thumbs li:nth-child('+index+')').find('a').attr('href', big_img);
     size -- ;    
        } 
```

我遇到的问题是它以某种方式使用哈希函数来转换图像 URL 以显示完整大小的图像，并且由于我在加载 DOM 后更改了 img src，因此任何更改的图像都不会显示在查看器中。

你可以在这里看到效果 [http://www.riskycode.com/wordpress/#](http://www.riskycode.com/wordpress/#)

点击设计重点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:42:16.863

那是因为你的插件绑定事件的方式

因此，在更改图像属性之前，您必须销毁 Gallerific 实例；

然后在您更改图像属性完成后重新实例化

注意：非常旧的插件，但无论如何

浏览此代码；替换`this`为您的实例名称；根据您的选项，脚本的一部分很可能是不必要的；

从`gallery.initializeThumbs();`仅开始就足够了（但我认为不会触发预加载）

```
 // Initialize the thumbails
    this.initializeThumbs();

    if (this.maxPagesToShow < 3)
        this.maxPagesToShow = 3;

    this.displayedPage = -1;
    this.currentImage = this.data[0];
    var gallery = this;

    // Hide the loadingContainer
    if (this.$loadingContainer)
        this.$loadingContainer.hide();

    // Setup controls
    if (this.controlsContainerSel) {
        this.$controlsContainer = $(this.controlsContainerSel).empty();

        if (this.renderSSControls) {
            if (this.autoStart) {
                this.$controlsContainer
                    .append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'">'+this.pauseLinkText+'</a></div>');
            } else {
                this.$controlsContainer
                    .append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'">'+this.playLinkText+'</a></div>');
            }

            this.$controlsContainer.find('div.ss-controls a')
                .click(function(e) {
                    gallery.toggleSlideshow();
                    e.preventDefault();
                    return false;
                });
        }

        if (this.renderNavControls) {
            this.$controlsContainer
                .append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'">'+this.prevLinkText+'</a><a class="next" rel="history" title="'+this.nextLinkText+'">'+this.nextLinkText+'</a></div>')
                .find('div.nav-controls a')
                .click(function(e) {
                    gallery.clickHandler(e, this);
                });
        }
    }

    var initFirstImage = !this.enableHistory || !location.hash;
    if (this.enableHistory && location.hash) {
        var hash = $.galleriffic.normalizeHash(location.hash);
        var imageData = allImages[hash];
        if (!imageData)
            initFirstImage = true;
    }

    // Setup gallery to show the first image
    if (initFirstImage)
        this.gotoIndex(0, false, true);

    // Setup Keyboard Navigation
    if (this.enableKeyboardNavigation) {
        $(document).keydown(function(e) {
            var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;
            switch(key) {
                case 32: // space
                    gallery.next();
                    e.preventDefault();
                    break;
                case 33: // Page Up
                    gallery.previousPage();
                    e.preventDefault();
                    break;
                case 34: // Page Down
                    gallery.nextPage();
                    e.preventDefault();
                    break;
                case 35: // End
                    gallery.gotoIndex(gallery.data.length-1);
                    e.preventDefault();
                    break;
                case 36: // Home
                    gallery.gotoIndex(0);
                    e.preventDefault();
                    break;
                case 37: // left arrow
                    gallery.previous();
                    e.preventDefault();
                    break;
                case 39: // right arrow
                    gallery.next();
                    e.preventDefault();
                    break;
            }
        });
    }

    // Auto start the slideshow
    if (this.autoStart)
        this.play();

    // Kickoff Image Preloader after 1 second
    setTimeout(function() { gallery.preloadInit(); }, 1000); 
```

否则你添加/删除图像，如图所示： http: [//www.twospy.com/galleriffic/example-4.html](http://www.twospy.com/galleriffic/example-4.html)

# f# - 使用 F# Freebase 类型提供程序访问链接项目的正确方法是什么

> ID：14768389
> 
> 赞同：3
> 
> 时间：2013-02-08T08:19:45.673
> 
> 标签：f#, freebase, type-providers, f#-data

我有以下代码，旨在列出在 Freebase 上列出的证券交易所网站：

```
#if INTERACTIVE
#r @"C:\Users\kit\Documents\Visual Studio 11\Projects\Demo\packages\FSharpx.TypeProviders.1.7.4\lib\40\FSharpx.TypeProviders.dll"
#r @"C:\Users\kit\Documents\Visual Studio 11\Projects\Demo\packages\FSharpx.TypeProviders.Freebase.1.7.4\lib\40\FSharpx.TypeProviders.Freebase.dll"
#r @"C:\Users\kit\Documents\Visual Studio 11\Projects\Demo\packages\FSharpx.TypeProviders.Freebase.1.7.4\lib\40\FSharpx.TypeProviders.Freebase.DesignTime.dll"
#endif 

let GetExchanges() =
    let dc = FreebaseData.GetDataContext()
    dc.DataContext.SendingRequest.Add(fun e -> printfn "url: %s" e.RequestUri.AbsoluteUri)

    dc.``Products and Services``.Business.``Stock exchanges``
    |> Seq.truncate 10
    |> Seq.iter (fun exchange -> printfn "Exchange: %s" exchange.Name
                                 exchange.``Official website``
                                 |> Seq.iter (fun site -> printfn "%s" site.Name)) 
```

如果没有最后两行（即仅列出 Exchange 名称），则代码可以正常工作。有了这些行，我得到了 400（错误请求）。

该行生成的 URL 是这样的：

[https://www.googleapis.com/freebase/v1/mqlread?query=%5B%7B%22/type/object/id%22:null,%20%22/type/object/name%22:null% 20,%20%22可选%22:true,%20%22/type/object/type%22:%22/type/uri%22,%20%22!/common/topic/official_website%22:%20% 5B%7B%22/type/object/id%22:%22/en/amex%22,%22/type/object/type%22:%22/common/topic%22%20,%20%22limit% 22:%20500%7D%5D%7D%5D&光标](https://www.googleapis.com/freebase/v1/mqlread?query=%5B%7B%22/type/object/id%22:null,%20%22/type/object/name%22:null%20,%20%22optional%22:true,%20%22/type/object/type%22:%22/type/uri%22,%20%22!/common/topic/official_website%22:%20%5B%7B%22/type/object/id%22:%22/en/amex%22,%22/type/object/type%22:%22/common/topic%22%20,%20%22limit%22:%20500%7D%5D%7D%5D&cursor)

...如果我浏览到它，我会从 Freebase 得到这个：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "badRequest",
    "message": "Can't reverse /common/topic/official_website as it expects /type/uri, not an object"
   }
  ],
  "code": 400,
  "message": "Can't reverse /common/topic/official_website as it expects /type/uri, not an object"
 }
} 
```

Am I using the correct approach to accessing linked entities? If so, is this a bug in the Type Provider? I get similar errors accessing other linked entities.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:42:51.293

This was a bug in the Type Provider that has since been fixed: [https://github.com/fsharp/FSharp.Data/issues/68](https://github.com/fsharp/FSharp.Data/issues/68)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T16:55:20.977

Like the error says, you can't reverse a property which is primitive value property. You need to turn the query inside out so that it looks like:

```
[{
  "/type/object/id": "/en/amex",
  "/common/topic/official_website": [{
    "value":    null,
    "optional": true
  }]
}]​ 
```

The library must have some knowledge of primitive values, so perhaps it's a simple as adding /type/uri to whatever list it has containing /type/text, /type/rawstring, etc.

# entity-framework - 在具有标识列的 SQL Server Compact 4.0 表中插入的性能呈指数下降

> ID：14768394
> 
> 赞同：4
> 
> 时间：2013-02-08T08:20:01.163
> 
> 标签：entity-framework, ef-code-first, sql-server-ce, identity-column

编辑：以下问题已在实体框架 6 中修复。

运行下面的代码需要令人失望的 2 分 10 秒。第二次运行它需要 6.5 分钟。这个问题与[这个有关](https://stackoverflow.com/questions/14740710/is-using-a-sequential-guid-the-only-viable-alternative-to-a-database-generated/14745976#comment20661044_14745976)

```
Private Sub RunTest()
    Dim sw As New Stopwatch
        sw.Restart()
        Using db As New TestDB
            db.Configuration.AutoDetectChangesEnabled = False
            For n = 1 To 100
                For m = 1 To 100
                    db.Tops.Add(New Top)
                Next
            Next
            db.SaveChanges()
        End Using
        MsgBox(sw.Elapsed.ToString)
    End Sub 
```

实体：

```
Public Class Top
    Public Sub New()
        MyBase.New()
        One = "arerjlwkerjglwejrglwergoiwerhgiowehrowerlwelfvbwlervbowerghpiweurhgpiwuerviiervljwebbrlvjnepvjnweprvupiweurv"
        Two = "w;lrjgwwergkjwervgjwelrgjhwelghlwekglwergiuwehrgwjergjwervgjwerjgnwekrngpwergjpowergllwejrnglkwerngpoierhpiiuewrpjwenrwenrv;lwenrvkjernpgpsrvpi"

    End Sub

    'ID'
    Public Property ID As Integer

    'NATIVE PROPERTIES'
    Public Overridable Property One As String
    Public Overridable Property Two As String

    'NAVIGATION PROPERTIES'

End Class 
```

在第二级交互中移动 Using 块并在那里调用 SaveChanges 只会使情况变得更糟。

TestDB 只是继承 DBContext 而没有任何进一步的配置。当我禁用 Top.ID 属性的数据库生成并自己提供 ID 时，性能提高了 30 倍。这个问题使得在 SQL Server Compact 中使用数据库生成的 ID 成为不可能。除了使用客户端生成的 ID 之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:26:20.300

我发现了这个问题，它是由获取生成的 id 导致表扫描的语句引起的，我在这里提出一个修复，用 4000 个实体测试，从 17 秒下降到 2 秒。[http://entityframework.codeplex.com/workitem/857](http://entityframework.codeplex.com/workitem/857) - 它将包含在 Alpha 3 之后的 EF6 构建中

# javascript - 如何在浏览器中开发点对点聊天应用程序

> ID：14768403
> 
> 赞同：-1
> 
> 时间：2013-02-08T08:20:50.653
> 
> 标签：javascript, chat, p2p

我希望在浏览器中开发一个点对点聊天应用程序（在 Javascript 中），它使用一些已经开发的 javascript 代码与服务器进行交互。我已经实现了网络套接字，但在浏览器中开发聊天应用程序时遇到问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:45:54.933

我想给你一个我能想到的只使用 javascript 的计算机之间最简单的通信的想法，给你一些想法让你开始。据我了解，您希望对所有内容都使用 javascript，所以我们开始：

如果您使用 Node.js，代码如下：

```
var sys = require("sys"),  
my_http = require("http");  
my_http.createServer(function(request,response){  
    sys.puts("I got kicked");  
    response.writeHeader(200, {"Content-Type": "text/plain"});  
    response.write("Hello World");  
    response.end();  
}).listen(8080);  
sys.puts("Server Running on 8080"); 
```

这使得服务器监听一个端口，你可以让它在这个端口上发送和接收。把它放在两台电脑上，你就可以在你选择的端口上进行它们之间的通信了。

放一些窗口来输入文本并放一个发送按钮，你就在路上了。您将传入的数据放入一个数组中，然后在文本窗口中显示...在 3 小时内您可以启动并运行它...

这只是为了让你开始考虑这个......不是我应该如何制作点对点聊天应用程序的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:50:03.463

玩转 Node.js

请参阅[http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial](http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial) 它是仅在 Node 中工作的聊天示例（JS 规则！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:56:32.263

您应该创建服务器到客户端到客户端的聊天。在服务器端使用任何语言。在本教程中使用 PHP 作为服务器端请检查 [http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-simple-web-based-chat-application/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-simple-web-based-chat-application/)

# c# - 设置组框不可见或在其上添加阴影c#

> ID：14768404
> 
> 赞同：0
> 
> 时间：2013-02-08T08:20:50.807
> 
> 标签：c#, winforms

我试图了解 windowsforms 中的 groupboxes 是如何工作的。我现在的问题。我有 2 个组框，每个组框有 2 个单选按钮。例如，当单击 groupbox1 中的单选按钮 2 时，我希望整个 groupbox2 不可见，或者更好地在其上放置类似白色阴影的东西，并且不允许用户使用它。我在这里阅读，但没有找到[http://msdn.microsoft.com/en-us/library/system.windows.forms.groupbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.groupbox.aspx)。我尝试了**可见**的属性，但使整个窗口不可见。这是我的示例代码。提前致谢

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace groupbox
{
   public partial class Form1 : Form
  {
    public Form1()
    {
        InitializeComponent();
        radioButton1.Checked = true;
        radioButton3.Checked = true;
    }

    private void groupBox1_Enter(object sender, EventArgs e)
    {
        if (radioButton4.Checked == true) {
            this.Visible = false;
        }
    }

    private void groupBox2_Enter(object sender, EventArgs e)
    {
        if (radioButton2.Checked == true)
        {
            this.Visible = false;
        }
       }
  }
  } 
```

我也读了这个[你可以让一个组框不可见但它的内容可见吗？](https://stackoverflow.com/questions/8844993/can-you-make-a-groupbox-invisible-but-have-its-contents-visible)但无论如何没有面板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:24:39.520

`this`指代码所在的类——在本例中为表单。

你应该尝试`groupBox1.Visible = false;`或`groupBox1.Enabled = false;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:26:52.013

试试这个：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        radioButton1.Checked = true;
        radioButton3.Checked = true;
        radioButton2.CheckedChanged += radioButton2_CheckedChanged;
    }

    void radioButton2_CheckedChanged(object sender, EventArgs e)
    {
        groupBox2.Enabled = !radioButton2.Checked;
    }
} 
```

# core-data - 如何在 Master 和 Detail 部分使用具有 TableViewControllers 的 SplitView

> ID：14768411
> 
> 赞同：0
> 
> 时间：2013-02-08T08:21:48.320
> 
> 标签：core-data, uitableview, uisplitviewcontroller, one-to-many

我正在尝试使用 SplitView 来显示有关员工的信息。Master部分有一个部门列表。单击部门时，需要在详细信息中显示在所选部门工作的雇主列表。我正在将 CoreData 与两个实体一起使用：“部门”和“员工”，它们与“对多”关系相连。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:22:31.493

这是一个简化的概述，因为您提出了一个非常广泛的问题。

1.  创建一个`UITableViewController`子类作为您的主视图。它应该有一个 type 的属性`NSManagedObjectContext`，它应该处理获取和显示部门。（你可以把它们拿进来`loadView`，或者你可以用`NSFetchedResultsController`……）

2.  创建另一个`UITableViewController`子类作为您的详细视图。给它一个 type 的属性`NSManagedObjectContext`，还有一个 type 的属性`Department`。让它显示该部门的员工。您需要让它在`department`属性更改时重新加载其数据。

3.  向您的主视图控制器添加一个属性，以引用详细视图控制器（因此是 type 的属性`EmployeeViewController`，或者您称之为的任何内容）。然后在`tableView:didSelectRowAtIndexPath:`您的主视图控制器中，设置`self.employeeViewController.department = <selected department>`.

4.  创建拆分视图控制器。如果这是您的应用程序的顶级视图，您将希望在您的应用程序委托中创建它，否则在将其推送到堆栈的视图控制器中创建它。这是如何做到的（在伪代码中）：

    *   创建一个新的细节视图控制器
    *   设置它的 managedObjectContext 属性
    *   创建一个新的主视图控制器
    *   设置它的 managedObjectContext 属性
    *   将主视图控制器的`employeeViewController`属性设置为您的详细视图控制器
    *   创建一个新的拆分视图控制器
    *   将拆分视图控制器的`viewControllers`属性设置为包含主视图控制器和详细视图控制器的数组
    *   以某种方式在屏幕上获取拆分视图控制器，方法是将其推送到导航堆栈或将其设置为`applicationDidFinishLaunching:`.

# c++ - 分割向量的有效方法是什么

> ID：14768416
> 
> 赞同：1
> 
> 时间：2013-02-08T08:22:34.597
> 
> 标签：c++, vector

除了使用以下方法之外，还有其他固定时间的方法来分割向量吗？

```
 std::vector<int> v_SplitVector(start , end); 
```

这将需要 O(N) 的复杂度。在这种情况下 O（结束 ​​- 开始）。是否有一个恒定的时间操作来做到这一点。

**还是**我为任务使用了错误的容器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:26:09.917

这是副本而不是拆分，因此很复杂。您可能可以编写一个`list`可能表现更好的拆分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T08:33:26.480

“*拆分*”一个容器的行为，对于像向量这样的容器，其中元素位于连续的内存上，必然需要复制/移动所有需要在另一边的东西。

容器之类`list`的，每个元素都在自己的内存块上，可以很容易地重新排列（参见`std::list::splice`）

但是在非连续内存中包含元素可能会由于更频繁的缓存丢失而导致内存访问性能降低。

换句话说，算法的复杂性可能不是影响性能的唯一因素：一个不频繁的线性副本可能比在分散元素上频繁的线性游走对你造成的*伤害要小。*

权衡主要取决于硬件如何管理缓存以及您使用的 std 实现如何处理（以及编译器最终如何优化）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T08:55:52.703

`std::vector`不支持以下内容，但如果有效的“拆分”操作对您非常重要，那么您也许可以编写自己的容器。这将是相当多的工作。

您可以如下定义“拆分”：

*   删除容器的初始段，并返回包含这些元素的新容器。对这些元素的引用继续引用新容器中的相同元素。旧容器包含剩余的元素。新容器的容量等于它的大小，旧容器的容量减少了删除元素的数量。

然后旧容器和新容器将共享一个底层存储块（可能带有引用计数）。如果您追加到新容器，则必须重新分配它（因为立即在其元素末尾的内存正在使用中），但只要这种情况很少发生或永远不会发生，它可能是一个胜利。

但是，您的示例代码需要一个副本，它不会修改原始容器。如果需要逻辑副本，则无需实际复制您需要 COW 或不可变对象的元素即可。

`std::list`具有`splice()`可以将一系列元素从一个列表移动到另一个列表的功能。这避免了复制元素，但从 C++11 开始，它实际上保证不是`O(1)`，因为它需要计算它移动了多少元素。在 C++03 中，实现可以选择是否希望此操作成为`O(1)`或`list::size()`成为`O(1)`，但在 C++11`size()`中，要求所有容器的时间都是恒定的。

不过，比较`std::vector`with的性能`std::list`通常不仅仅是一项操作。您必须考虑`list`没有随机访问迭代器，等等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T09:30:43.693

创建一个新的`std::vector`必然需要复制，因为向量不允许共享其实现的一部分。您从中获取的容器中的修改，`start` 不应`end`影响`splitVector`.

您可以相当容易地做的是创建一个`View`容器，它只包含两个迭代器，并通过它们映射所有访问。类似于以下内容：

```
template <typename Iterator>
class View
{
    Iterator myBegin;
    Iterator myEnd;
public:
    typedef typename std::iterator_traits<Iterator>::value_type value_type;
    //  And the other usual typedefs, including...
    typedef Iterator iterator;

    View( Iterator begin, Iterator end )
        : myBegin( begin )
        , myEnd( end )
    {
    }

    iterator begin() { return myBegin; }
    iterator end()   { return myEnd; }
    value_type operator[]( ptrdiff_t index ) { return *(myBegin + index ); }
    //  ...
}; 
```

这需要相当多的样板文件，因为与 vector 之类的接口相当完整，但一切都非常直接和简单。然而，你不能做的一件事是修改底层容器或任何容器的拓扑结构——任何`View`可能使任何迭代器无效的事情当然会破坏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T08:27:38.827

当向/从不同于开始/结束的地方添加或删除元素时，由于需要内部移位，向量*必须*具有至少 o(n) 的复杂度。当您不仅要删除元素，还要将元素移出时，sme 就会出现：对于向量，它们必须被复制，因此，每个元素至少移动 1 个操作。这意味着将元素移出向量的时间至少为 O(N)，其中 N 是移动的元素数量。

如果您需要近乎恒定的时间添加/删除操作（无论是添加/插入一个或多个元素），您应该查看列表/链表容器，其中所有元素和子列表都很容易“可拆卸”，特别是如果您知道指针/迭代器。或树，或任何其他动态结构。

顺便说一句，我感觉到了什么`v_SplitVector`，但它是从哪里来的？我不记得 stdlib 或 boost 中的这种函数/方法？

# linux - 使用 perl 将字符替换为文本文件中的其他字符

> ID：14768417
> 
> 赞同：-4
> 
> 时间：2013-02-08T08:22:40.010
> 
> 标签：linux, perl

我在解析文本文件的输出时遇到问题。我想在字符之间添加管道符号进行类似于 egrep 的多重搜索，文本文件如下

```
service entered the stopped state,critical
service entered the running state,clear 
```

代码：

```
open(my $data, '<', $Config_File) or die "Could not open '$Config_File"
my $reg_exp;
my $severity;
my @fields=();
while (my $line = <$data>) 
{  
   chomp $line;   
   if(!$line =~ /^$/)
   {
   @fields = split "," , $line;
   $reg_exp = $fields[0];
   $severity = $fields[1]; 
   print $reg_exp;
   }
 }

 #print $fields[0];
 #last unless defined $line;

 close($data); 
```

预期产出

```
service entered the stopped state|service entered the running state 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:35:37.037

你并不遥远，你只需要实际连接字符串。最简单的方法是将其推`$fields[0]`送到一个数组，然后等到输入完成再打印它。IE：

```
my @data;
while (my $line = <$data>) {
   next if $line =~ /^$/;            # no need to chomp
   my @fields = split /,/, $line;
   push @data, $fields[0];
}
print join("|", @data), "\n"; 
```

我感觉到您正在尝试使用此代码实现其他目标，这就是所谓的[XY-problem](https://meta.stackexchange.com/q/66377)。

# actionscript-3 - 创建一个 JSON 文件并保存到磁盘

> ID：14768421
> 
> 赞同：1
> 
> 时间：2013-02-08T08:22:49.893
> 
> 标签：actionscript-3, apache-flex, flex4.6, flexjson

如何为任何对象创建 JSON 文件并将其保存在磁盘上。几天后找回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:30:15.967

写入共享对象

```
var so:SharedObject = SharedObject.getLocal("mySharedObject");
so.data.storedJSON = myJSON;
so.flush(); 
```

在别处取回它

```
var so:SharedObject = SharedObject.getLocal("mySharedObject");
myJSON = so.data.storedJSON; 
```

转换为字节数组

节省

阅读此文档：[registerClassAlias](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#registerClassAlias%28%29)

```
registerClassAlias("com.myDomain", MyClass);
var myClass:MyClass = new MyClass();
var ba:ByteArray = new ByteArray();
ba.writeObject(myClass);
so.data.byteArray = ba;
ba.position = 0; 
```

读

```
myClass = so.data.byteArray.readObject(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:26:00.107

使用共享对象。[在这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)阅读它们。

# java - 不相交集问题

> ID：14768427
> 
> 赞同：0
> 
> 时间：2013-02-08T08:23:37.460
> 
> 标签：java, kruskals-algorithm, disjoint-sets

我正在尝试使用不相交集编写 Kruskal 算法的实现。我想我几乎可以正常工作，但我似乎无法让一段代码正常工作。代码需要检查图表上的节点是否已经在它试图添加到的集合中；否则，您不想添加它。这是我正在使用的代码：

```
public static boolean difSets(int index1, int index2, ArrayList<Node> sets[], Node nodes[])
{
    int setnum1 = 0;
    int setnum2 = 0;
    for(int i = 0; i < nodes.length; i++)
    {
        for(int j = 0; j < sets[i].size(); j++)
        {
            if(nodes[index1].getX() == sets[i].get(j).getX() && nodes[index1].getY() == sets[i].get(j).getY());
                setnum1 = i;
            if(nodes[index2].getX() == sets[i].get(j).getX() && nodes[index2].getY() == sets[i].get(j).getY());
                setnum2 = i;
        }
    }
    if(setnum1 == setnum2)
        return false;
    else
        return true;
} 
```

一点信息：这个方法是确定两个节点是否已经在同一个集合中。节点数组包含图上的所有点（节点是一个只存储 x 和 y 值并可以检索它们的类。集合是节点的 ArrayLists 数组。在问题开始时，每个节点都将在一个 ArrayList 本身；到最后，它们应该都在同一个 ArrayList 中。索引 1 和 2 对应于 Nodes 数组中的节点。

不幸的是，这段代码似乎没有给我正确的输出；我已经盯着它看了一个多小时，我无法弄清楚问题是什么，所以我希望这里有人能帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:02:32.700

解决了。java中对我来说根本没有意义的许多事情之一。

```
public static boolean difSets(int index1, int index2, ArrayList<Node> sets[], Node nodes[])
{
    int setnum1 = 0;
    int setnum2 = 0;
    int x1 = nodes[index1].getX();
    int y1 = nodes[index1].getY();
    int x2 = nodes[index2].getX();
    int y2 = nodes[index2].getY();
    for(int i = 0; i < nodes.length; i++)
    {
        for(int j = 0; j < sets[i].size(); j++)
        {
            int x3 = sets[i].get(j).getX();
            int y3 = sets[i].get(j).getY();
            if(x1 == x3 && y1 == y3)
                setnum1 = i;
            if(x2 == x3 && y2 == y3)
                setnum2 = i;
        }
    }
    if(setnum1 == setnum2)
        return false;
    else
        return true;
} 
```

这实际上应该和我之前的完全一样。尽管如此...

# javascript - ajax请求后未定义的变量

> ID：14768432
> 
> 赞同：1
> 
> 时间：2013-02-08T08:24:07.140
> 
> 标签：javascript, jquery, ajax, json

我正在使用 jQuery。我有一个从名为“get_cats”的远程服务器获取数据的函数。我调用它来用返回的值填充一个数组。AJAX 完成后，我想返回这些值。但它不起作用，返回的值是未定义的。这是非常基本的，但我看不出它失败的地方。有人有线索吗？

```
$(function () {
        var url = "http://someurl.com/service/";
        var cats = [];
        cats = get_cats(url);

        function get_cats(url) {
            var categories = [];
            $.getJSON(url + "cats", function (data) {
                $.each(data, function (i) {
                    categories.push(data[i].name);
                });
                return categories;
            });
        }

        $(document).ajaxStop(function () {
            console.log(cats); // fails and returns undefined :'(
        });

    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:25:45.207

哦，没有 AJAX 是异步的，你不能从中返回任何东西。您应该只在成功回调中使用 AJAX 请求的结果：

```
$(function () {
    var url = "http://someurl.com/service/";
    get_cats(url);

    function get_cats(url) {
        var categories = [];
        $.getJSON(url + "cats", function (data) {
            $.each(data, function (i) {
                categories.push(data[i].name);
            });
            // Only here you can consume the results of the AJAX request
            // Do not attempt to return them, it doesn't make any sense
            console.log(categories);
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T08:31:00.687

你可以试试：

```
$.ajaxSetup({async:false}); 
```

在 AJAX 调用之前。

但它会在返回响应时停止浏览器。

# spring - Spring MVC 和安全 - 登录后找不到错误 404 页面

> ID：14768433
> 
> 赞同：1
> 
> 时间：2013-02-08T08:24:11.517
> 
> 标签：spring, security, model-view-controller, mapping

我需要这个 Spring 测试项目的帮助。我有一个带有安全检查的简单登录页面，Spring 检测良好或床登录但在重定向到登录成功页面或登录失败页面时给出 404 Page not fount 错误。

配置是

**应用背景**

```
 <!--
    Most controllers will use the ControllerClassNameHandlerMapping above, but
    for the index controller we are using ParameterizableViewController, so we must
    define an explicit mapping for it.
    -->
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="login.htm">LoginController</prop>
            </props>
        </property>
    </bean>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <!--
    The index controller.
    -->
    <bean name="LoginController"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          p:viewName="login" />

</beans> 
```

**安全**

```
 <http auto-config="true">
        <intercept-url pattern="/welcome*" access="ROLE_USER" />
        <form-login login-page="/login" default-target-url="/welcome"
            authentication-failure-url="/loginfailed" />
        <logout logout-success-url="/logout" />
    </http>

    <authentication-manager>
      <authentication-provider>
        <user-service>
            <user name="mkyong" password="123456" authorities="ROLE_USER" />
        </user-service>
      </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

**WEB.XML**

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
<param-value>
        /WEB-INF/dispatcher-servlet.xml,
        /WEB-INF/spring-security.xml 
</param-value>
</context-param>

<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>

<welcome-file-list>
    <welcome-file>redirect.jsp</welcome-file>
</welcome-file-list>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**登录控制器是**

```
@Controller 
```

公共类登录控制器 {

```
@RequestMapping(value="/welcome", method = RequestMethod.GET)
public String printWelcome(ModelMap model, Principal principal ) {

    String name = principal.getName();
    model.addAttribute("username", name);
    model.addAttribute("message", "Spring Security Custom Form example");
    return "hello";

}

@RequestMapping(value="/login", method = RequestMethod.GET)
public String login(ModelMap model) {

    return "login";

}

@RequestMapping(value="/loginfailed", method = RequestMethod.GET)
public String loginerror(ModelMap model) {

    model.addAttribute("error", "true");
    return "login";

}

@RequestMapping(value="/logout", method = RequestMethod.GET)
public String logout(ModelMap model) {

    return "login";

} 
```

}

错误在哪里？传统知识。

# c# - 返回不同类型时是否建议使用多种方法？

> ID：14768434
> 
> 赞同：2
> 
> 时间：2013-02-08T08:24:13.673
> 
> 标签：c#, generics, methods, return-type, generic-method

我正在从一个`Entity`对象返回值。其中有些是`String`打字的，有些不是。现在，我做了一个快速的解决方案，如下所示。

```
private String GetStringValue(Entity entity, String attribute, String substitute = "")
{
  if(entity.Contains(attribute)
    return entity[attribute] as String;
  return substitute;
}

private String GetIntValue(Entity entity, String attribute, int substitute = 0)
{
  if(entity.Contains(attribute)
    return entity[attribute] as int;
  return substitute;
} 
```

然后我记得有一个通用类型的语法（类似于`<TypeX>`）。但是，我的问题是，是否有必要开始更改现有代码。我需要在两个地方（返回类型和替代类型）更改方法的签名，但我担心我还需要在方法**内部**进行一些复杂的编码。

另一方面，我有一个很好的方法来处理**所有**可能的类型（我有一种预感，我们将使用的不仅仅是字符串和整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:30:31.740

您将不得不在*三个*地方更改方法的签名，因为您还必须添加泛型参数：

```
private T GetValue<T>(Entity entity, String attribute, T substitute) 
```

*在*该方法中，实际上不需要任何复杂的编码；将当前出现的`string`or`int`分别替换为 ,`T`就足够了。（请注意，`as`只有在限制为引用类型时才能应用运算符`T`- 您可能不想这样做，因为`int`它是一种值类型）。

请注意，此方法存在两个您可能会认为缺点的问题：

*   这种通用方法将支持“所有可能的类型”，但它也将支持任何*不可能*的类型（用户可以自由指定他们喜欢的任何类型，并且在仍然支持和的同时`T`没有办法限制。`T``string``int`
*   您不能为每种类型指定任意默认替代值。您可以做的是为 声明一个默认值`substitute`，即`default(T)`，但至少为`string`，这不是一个空字符串，而是`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:27:51.150

如果您不想更改方法签名，您可以编写一个泛型函数并从所有这些非泛型版本中调用它。

```
private String GetStringValue(...){
    return GetValue<String>(...);
} 
```

顺便说一句，您正在寻找[通用方法](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)

例如（来自 msdn）

```
static void Swap<T>(ref T lhs, ref T rhs)
{
    T temp;
    temp = lhs;
    lhs = rhs;
    rhs = temp;
}

...

Swap<int>(ref a, ref b); 
```

要不就

```
Swap(ref a, ref b); //type int is infered based on type of arguements and method signature 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T08:29:10.490

你是对的“类似”是通用方法。[在那里查看通用方法。](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx) 下一个方法看起来很适合您的目的。

```
 private  static T GetValue<T>(Entity entity, string attribute, T defaultValue)
        {
            if (!entity.Contains(attribute))
                return defaultValue;

            return  (T)entity[attribute];
        } 
```

**编辑：**根据 w0lf 的评论更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T08:33:31.367

什么课`Entity`？假设它是一个自定义类，让它也通用，那么它的工作原理：

```
private T Get<T>(Entity<T> entity, T attribute, T substitute = default(T))
{
    if (entity.Contains(attribute))
        return entity[attribute];
    return substitute;
} 
```

您可以通过这种方式检索值：

```
var entity = new Entity<string>();
string val = Get<string>(entity, "attr", "subst"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T08:40:07.810

你应该定义你的`Entity<T>`类：

```
public class Entity<T>
{
    // TODO: implement
    public T this[string i] { get; set; }

    // TODO: implement
    internal bool Contains(string attribute)
    {
        return true;
    }
    // TODO: implement
    // other properties and methods       
} 
```

您可以使用通用方法：

```
private T GetStringValue<T>(Entity<T> entity, String attribute, T substitute = default(T))
{
    if (entity.Contains(attribute))
        return entity[attribute];
    return substitute;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T08:41:50.813

如果可以在方法中概括代码，我绝对建议以通用方式使用它。它使类更小，可读性更好，如果需求发生变化，您只需更改一种方法。您的方法看起来可以轻松通用。

```
private T GetIntValue<T>(Entity entity, String attribute, T substitute = default(T))
{
    if(entity.Contains(attribute))
        return (T)entity[attribute];
    return substitute;
} 
```

如果要执行更多逻辑，您还可以使用具有不同类型函数的字典：

```
private IDictionary<Type, Func<Entity, string, object>> actions;

private void InitActions()
{
    actions = new Dictionary<Type, Func<Entity, string, object>>
        {
            {
                typeof (string), (entity, attribute) =>
                    {
                        // this could be your custom code for string
                        return entity[attribute];
                    }
            },
            {
                typeof (int), (entity, attribute) =>
                    {
                        // this could be your custom code for int
                        return entity[attribute];
                    }
            }
        };
}

private T GetIntValue<T>(Entity entity, String attribute, T substitute = default(T))
{
    if (entity.Contains(attribute) && actions.ContainsKey(typeof (T)))
    {
        Func<Entity, string, object> action = actions[typeof (T)];
        return (T)action(entity, attribute);
    }
    return substitute;
} 
```

# c# - 抑制 C# 中的“成员从未分配给”警告

> ID：14768436
> 
> 赞同：14
> 
> 时间：2013-02-08T08:24:17.203
> 
> 标签：c#, inotifypropertychanged, suppress-warnings, reactiveui, callermembername

我有以下代码：

```
ViewPortViewModel _Trochoid;
public ViewPortViewModel Trochoid
{
    get { return _Trochoid; }
    set { this.RaiseAndSetIfChanged(value); }
} 
```

使用 ReactiveUI INPC 支持。编译器总是警告我`Trochoid`从未分配过并且永远为空。然而，由于`RaiseAndSetIfChanged`通过`CallerMemberName`支持执行的魔法，代码确实有效并且编译器是错误的。

如何在我的代码中*干净地*抑制这些警告？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T08:33:44.180

> 如何在我的代码中**完全**抑制这些警告

不适当分配的替代方法是仅 a `#pragma`：

```
#pragma warning disable 0649 // Assigned by reflection
ViewPortViewModel _Trochoid;
#pragma warning restore 0649 
```

这应该可行，并且它将丑陋准确地保留在记录它有意义的地方 - 在字段声明中。

如果您有多个以相同方式处理的字段，则可以将它们全部放在禁用警告的同一个“块”中，并带有适用于所有字段的注释。

当然，您是否将其视为“干净”是一个品味问题。我认为我更喜欢它而不是仅用于消除警告*的副作用的作业。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T19:40:14.880

现在每个平台都有`CallerMemberNameAttribute`ReactiveUI 的支持，你就不用再受强迫编译器的压迫了：

```
ViewPortViewModel _Trochoid;
public ViewPortViewModel Trochoid
{
    get { return _Trochoid; }
    set { this.RaiseAndSetIfChanged(ref _Trochoid, value); }
} 
```

其他的重载现在真的没必要了，但我把它们留在里面，因为删除它们是一个重大的改变，因此在 ReactiveUI 5.0 之前不会完成

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T08:25:39.900

您可以为它分配一个引用类型的默认值：

```
ViewPortViewModel _Trochoid = null; 
```

# java - 如何将文件路径保存到sql数据库

> ID：14768437
> 
> 赞同：0
> 
> 时间：2013-02-08T08:24:21.563
> 
> 标签：java, mysql, netbeans

我正在开发一个应用程序，我必须从应用程序中打开文档。我必须将文件的路径保存到 sql 数据库。sql 中插入文件路径的列的类型为 VARCHAR(255)。

如果文件的路径是`C:\Users\UPS21120\Downloads\doc1.pdf`，则它在数据库中保存为 as `C:UsersUPS21120Downloadsdoc1.pdf`（保存路径中的反斜杠在哪里？）。

当我检索此路径以打开文件时`doc1.pdf`，***我收到一个异常，指出 doc1 不存在***。以下是我用来保存路径的代码。请帮忙。

```
 JFileChooser fc = new JFileChooser(); 
      returnVal = fc.showOpenDialog(view_doc.this);
      File file1=fc.getSelectedFile();

      if (returnVal == JFileChooser.APPROVE_OPTION) {
      String str = "INSERT INTO document(doc_path) VALUES ('"+file+"')";
                  // open connection..execute query etc--works fine

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:29:24.780

您必须先转义要插入的值，然后才能将其插入数据库。或者，您可以使用准备好的语句来为您做到这一点。

另请参阅：[Java - 转义字符串以防止 SQL 注入](https://stackoverflow.com/questions/1812891/java-escape-string-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:31:07.067

在java中转义字符串

[http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html)

> 使用 Java 字符串规则转义字符串中的字符。... 正确处理引号和控制字符（制表符、反斜杠、cr、ff 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:05:19.860

最简单的解决方案是使用`/`而不是`\`在路径中。然后您可以轻松地将路径字符串插入数据库。不会有错误。java也可以使用路径`/`

# java - 从 blob 反序列化 java 对象

> ID：14768439
> 
> 赞同：5
> 
> 时间：2013-02-08T08:24:27.690
> 
> 标签：java, oracle, oracle11g, blob, deserialization

![我从开发人员那里得到的东西](../Images/7f50b30e8877e69d1fc54ee56d67dcd1.png)

首先，我道歉，我要问一组愚蠢的问题。我根本不懂java，也不知道我们是否可以问这样的问题。

如果不是 - 删除我的主题。

oracle 中有一个存储 blob 的表。它是二进制的，我可以解码它，输出看起来像这样

```
¬í sr /com.epam.insure.credentialing.forms.StorageBeanÀÓ ¯w/§ L     variablest Ljava/util/Map;xpsr java.util.HashMapÚÁÃ`Ñ F 
loadFactorI     thresholdxp?@     w      t $_hasCompletedt  t 
$_wf_progresssr java.lang.Integerâ ¤÷‡8 I valuexr java.lang.Number†¬•”à‹  xp   t $_wf_statussq ~    t $_form_instance_idsr java.lang.Long;‹äÌ#ß J valuexq ~          ‹©t $_isVisitedt truet 1sq ~  sq ~ ?@     `w   €   _t  confidential readable infot 1t confidential readable infot $_errorssr java.util.ArrayListxÒ™Ça I sizexp    w   
xt regionIdsq ~       ët 
confidential readable infot t  t $_subbean_errorssq ~     w   
xt regiont  SOUTHWESTt idt  t codet  t reqTypeNamet 
confidential readable infot t confidential readable infot tint  t $_hasCompletedt falset comRequiredt  t 
lineImpactq ~ t prChiropractorsq ~ t fromTypeReqt not zipt 342t changeToTypeReq6t confidential readable infot t 
prPodiatristsq ~ t 
$_isValidatedt truet $_hasErrorsq ~ -t EVPapprovalsq ~  sq ~ ?@     w   Approvedq ~ Ct 
NEGOTIATORq ~ Et 
Negotiatort datet 
03/31/2006q ~ It confidential readable infot q ~ \xt updateRequiredt noq ~ t truet  approverssr .forms.StorageBeanList«WtúœG  xq ~    w   
q ~ Rsq ~  sq ~ ?@     w      t commentst  t decisiont Approvedq ~ Ct RVPq ~ Et RVPt datet 
04/04/2006q ~ It t commentst  t decisiont Approvedq ~ Ct COOq ~ Et COOt datet 
04/14/2006q ~ It ~ †xsq ~  sq ~ ?@     w      t commentsq ~ Pt decisiont Approvedq ~ Ct CEOq ~ Et CEOt d 
```

所以这是我的问题

1.  出于某种原因，当我尝试将解码后的 blob 值（我在上面发布的内容）插入表中时（我打算将其移动到 MS Access 并在那里解析它。这将是一个可怕的解决方案，但我很绝望） -唯一插入的是没有引号的“¬í”。此外，我无法选择全部并从 DBMS 输出窗口复制它，再次，唯一粘贴的是“¬í”，没有引号。似乎这个文本并不存在。有人知道如何将其插入表格吗？

2.  如果我要以正确的方式做它并使用java，我从哪里开始？请原谅这种愚蠢，但我什至不知道如何运行 java 代码。我在网上找到了一些示例代码，但我不知道在哪里粘贴它:)

我用谷歌搜索了一下，发现我必须在文本编辑器中创建一个 .java 文件，然后编译它，这对我来说是真的吗？我想也许那是一些不同的java代码，我想也许就我而言，我必须从oracle运行它，因为那是表格所在的地方。

我也有表格结构，我附上了一块。此 blob 存储一个表。

无论如何，我确信现在很明显我一无所知。如果有人能指出我的某个地方，我会非常感激。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-24T17:22:29.167

这是一个从 blob 反序列化 java 对象的 oracle 11g java 存储函数的示例。作为免费奖励添加了一个 oracle java 存储过程的示例，以使用序列化的 java 对象更新 blob。

如果对象的类不是 java 内置的（如我的情况），您还需要在 oracle 数据库中[发布它的源（包含所有依赖项）。](https://stackoverflow.com/questions/10922415/java-running-in-oracle-the-imported-jars)

```
CREATE OR REPLACE JAVA SOURCE NAMED "ServiceParamsBLOBHandler" AS
import java.io.*;
import java.util.*;
public class ServiceParamsBLOBHandler {

    private static Object deserialize(InputStream stream) throws Exception {

        ObjectInputStream ois = new ObjectInputStream(stream);
        try {
            return ois.readObject();
        } finally {
            ois.close();
        }
    }

    private static byte[] serialize(Object object) throws IOException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(object);
        oos.close();
        return baos.toByteArray();
    }

    //@SuppressWarnings("unchecked")
    private static List<Map<String, String>> getParams(oracle.sql.BLOB blob) throws Exception {
        return (List<Map<String, String>>) deserialize(blob.getBinaryStream());
    }

    public static oracle.sql.BLOB updatedParamField(oracle.sql.BLOB blob, String paramName, String fieldName, String value)
            throws Exception {

        List<Map<String, String>> params = getParams(blob);
        Map<String, String> param = getParam(params, paramName);
        param.put(fieldName, value);
        oracle.sql.BLOB res = oracle.sql.BLOB.createTemporary(blob.getOracleConnection(), true, oracle.sql.BLOB.DURATION_CALL);
        res.setBytes(1, serialize(params));
        return res;
    }

    public static void updateParamField(oracle.sql.BLOB[] blobs, String paramName, String fieldName, String value)
            throws Exception {

        oracle.sql.BLOB blob = blobs[0];
        List<Map<String, String>> params = getParams(blob);
        Map<String, String> param = getParam(params, paramName);
        param.put(fieldName, value);
        blob.truncate(0);
        blob.setBytes(1, serialize(params));
    }

    private static Map<String, String> getParam(List<Map<String, String>> params, String name) {
        for (Map<String, String> param : params) {
            if (name.equals(param.get("name"))) {
                return param;
            }
        }
        return null;
    }

    public static String getParamField(oracle.sql.BLOB blob, String paramName, String fieldName) throws Exception {
        Map<String, String> param = getParam(getParams(blob), paramName);
        return param == null ? null : param.get(fieldName);
    }

}
/

alter java source "ServiceParamsBLOBHandler" compile
--select * from SYS.USER_ERRORS
/

CREATE OR REPLACE function getServiceParamField(b IN BLOB, paramName IN VARCHAR2, fieldName IN VARCHAR2) RETURN VARCHAR2
as LANGUAGE JAVA NAME 'ServiceParamsBLOBHandler.getParamField(oracle.sql.BLOB, java.lang.String, java.lang.String) return String';
/

CREATE OR REPLACE function updatedServiceParamField(b IN BLOB, paramName IN VARCHAR2, fieldName IN VARCHAR2, value IN VARCHAR2) RETURN BLOB
as LANGUAGE JAVA NAME 'ServiceParamsBLOBHandler.updatedParamField(oracle.sql.BLOB, java.lang.String, java.lang.String, java.lang.String) return oracle.sql.BLOB';
/

CREATE OR REPLACE PROCEDURE updateServiceParamField(b IN OUT BLOB, paramName IN VARCHAR2, fieldName IN VARCHAR2, value IN VARCHAR2)
AS LANGUAGE JAVA NAME 'ServiceParamsBLOBHandler.updateParamField(oracle.sql.BLOB[], java.lang.String, java.lang.String, java.lang.String)';
/

-- oracle blob read usage example:
select getServiceParamField(byte_value, 'account', 'format') from entity_property where name='params';

-- oracle blob update with java stored function usage example:
update entity_property set byte_value=updatedServiceParamField(byte_value, 'account', 'format', '15')
where name='params' and entity_id = 123

-- oracle blob update with java stored procedure usage example:
BEGIN
   FOR c IN (select byte_value from entity_property where name='params' and entity_id = 123 for update) LOOP
       updateServiceParamField(c.byte_value, 'account', 'format', '13');
   END LOOP;
END;
/ 
```

**更新**

相关案例的具体片段。

1) 满载对象

```
 private static String getVariable(oracle.sql.BLOB blob, String name) throws Exception {
        ObjectInputStream ois = new ObjectInputStream(blob.getBinaryStream());
        try {
            //noinspection unchecked
            return ((HashMap<String, String>) ((StorageBean) ois.readObject()).variables).get(name);
        } finally {
            ois.close();
        }
    } 
```

2) 部分场载荷

```
 private static String getVariable(oracle.sql.BLOB blob, String name) throws Exception {
        ObjectInputStream ois = new ObjectInputStream(blob.getBinaryStream());
        try {
            ois.skipBytes(variablesOffset);
            //noinspection unchecked
            return ((HashMap<String, String>) ois.readObject()).get(name);
        } finally {
            ois.close();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T03:34:43.240

我会在某个时候学习在 java 中执行此操作，但由于这很匆忙 - 我决定使用 SQL 从 blob 中提取字段。我把这个放在这里，以防其他人迫切地想要这样做。

这是一个非常丑陋和缓慢的解决方案，但到目前为止我能够获得一些领域。完成后我会更新，说我是否能够得到所有东西。

这是我正在使用的代码（这仅适用于 1 个字段，但它会给你一个想法）

```
 DECLARE
     CURSOR c_dts IS
       SELECT Form_ID
         FROM NR_DTS_FORMTABLE
        WHERE   1 = 1
           --AND ROWNUM BETWEEN 501 AND 4500
           AND form_ID > 204815
           --AND ROWNUM < 5000
           AND ROWNUM < 3
           --AND form_id IN (SELECT form_id FROM NR_DTS_BLOB)
           AND Form_Type_ID = 102;
     DTS c_dts%ROWTYPE;
BEGIN
     OPEN c_dts;
     LOOP
       FETCH c_dts INTO DTS;
       EXIT WHEN c_dts%NOTFOUND;
       DECLARE
         v_hold_blob BLOB;
         v_len NUMBER;
         v_raw_chunk RAW(10000);
         v_chr_string VARCHAR2(32767);
         -- v_chr_string CLOB;
         v_position NUMBER;
         c_chunk_len NUMBER := 1;
         Form_ID NUMBER;
       BEGIN
         SELECT form_content
           INTO v_hold_blob
           FROM NR_DTS_FORMTABLE
          WHERE Form_ID = DTS.Form_ID;
         v_len := DBMS_LOB.getlength(v_hold_blob);
         v_position := 1;
         WHILE (v_position <= LEAST(v_len, 32767)) LOOP
              v_raw_chunk := DBMS_LOB.SUBSTR(v_hold_blob, c_chunk_len, v_position);
              v_chr_string := v_chr_string || CHR(hex_to_decimal(RAWTOHEX(v_raw_chunk)));
              v_position := v_position + c_chunk_len;
         END LOOP;

         --insert into table
         INSERT INTO NR_DTS_BLOBFIELDS_VARCHAR(formid
                               ,regionId)
              SELECT DTS.Form_ID
                 ,SUBSTR(v_chr_string
                     ,INSTR(v_chr_string, 'regionIdt') + LENGTH('regionIdt') + 2
                     ,INSTR((SUBSTR(v_chr_string, INSTR(v_chr_string, 'regionIdt') + LENGTH('regionIdt') + 2))
                        ,CHR(116) || CHR(0)))
                    regionId
             FROM DUAL;
       END;
     --  DBMS_OUTPUT.put_line(DTS.Form_ID);
     END LOOP;
     CLOSE c_dts;
END; 
```

# r - R 控制结构双回路

> ID：14768444
> 
> 赞同：0
> 
> 时间：2013-02-08T08:24:42.940
> 
> 标签：r, loops, double

这是一段简单的代码：

```
for (i in c("red", "green"))
    for (j in c("blood", "trees")) {
        k <- paste(i, j, sep=" ")
        print(k)
    }
} 
```

我希望它只输出`"red blood"`和`"green trees"`. 剩余的组合将被丢弃。这可以在循环内完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:27:02.240

你不需要一个循环：

```
R> paste(c("red","green"), c("blood","trees"))

[1] "red blood"   "green trees" 
```

# java - 如何使用 Java 解析后台进程的输出？

> ID：14768451
> 
> 赞同：4
> 
> 时间：2013-02-08T08:25:16.647
> 
> 标签：java, postgresql

在我的 Java 程序中，我想启动一个 PostgreSQL 服务器。对于此任务，我使用以下代码：

```
ProcessBuilder pb = new ProcessBuilder(pgHome + "/bin/pg_ctl", "start");

Map<String, String> env = pb.environment();
env.put("PGDATA", pgDataDir);

Process p = pb.start();

InputStream is = p.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(is));
String line;
boolean started = false;

while (!started && (line = reader.readLine()) != null) {
    started = line.contains("database system is ready to accept connections");
}

if (!started) {
    throw new IllegalStateException("Unable to start PostgreSQL server");
} 
```

当我在命令行上使用相同的选项启动 postgres 服务器时，我收到：

```
server starting
LOG:  database system was shut down at 2013-02-08 09:07:50 CET
LOG:  autovacuum launcher started
LOG:  database system is ready to accept connections 
```

在命令返回之前打印第一行（服务器启动）。以下所有行均由后台进程打印。

我的 Java 代码只看到第一行，但我想解析 LOG 消息。有没有办法读取这样一个后台进程的输入？

我还遇到了一个奇怪且无法重现的行为：当我调试代码时，输​​出被完全解析，包括 LOG 语句。起初我认为这是一个时间问题，但即使在启动过程后等待也没有改变这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:38:09.590

很可能`pg_ctl`不是实际的数据库程序。它只是一个脚本或包装程序，它输出第一`server starting`行，然后将数据库作为后台守护进程启动，然后返回。您不能将该新进程的输出流附加到您的程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:37:59.927

您想要的行可能会打印到 stderr，在这种情况下您要使用`Process.getErrorStream ()`.

# iphone - 如何将导航栏和 UIButton 添加到从底部滑动的 UIView

> ID：14768452
> 
> 赞同：0
> 
> 时间：2013-02-08T08:25:25.657
> 
> 标签：iphone, uiview

下面是我`UIView`在工具栏下显示的代码。它通过单击工具栏上的按钮来显示。现在我想在`UIView`弹出的按钮上添加一个按钮，以便取消它。如果可能的话，导航栏上的按钮可以使 UI 更好？任何人都可以指出我的教程吗？

```
-(void)likeButton:(UIBarButtonItem *)button
 {                                                
     CGRect frame = CGRectMake(0, 480, 320, 190);
     frame.origin.y = CGRectGetMaxY(self.optionsToolBar.frame)-frame.size.height;   
     bottomView.frame = frame;
     [self.optionsToolBar.superview insertSubview:bottomView              
                                      belowSubview:self.optionsToolBar];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:15:57.633

```
 -(void)likeButton:(UIBarButtonItem *)button
  {                                                
      CGRect frame = CGRectMake(0, 480, 320, 190);
      frame.origin.y = CGRectGetMaxY(self.optionsToolBar.frame)-frame.size.height;   
      bottomView.frame = frame;

      UIView *navigationView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)]; 
      [navigationView setBackgroundColor:[UIColor blueColor]];
      UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
      [button setTitle:@"close" forState:UIControlStateNormal];
      [button addTarget:self action:@selector(closeView:) forControlEvents:UIControlEventTouchUpInside];
      [navigationView addSubView:button];
      [bottomView addSubView:navigationView];

      [self.optionsToolBar.superview insertSubview:bottomView              
                                  belowSubview:self.optionsToolBar];

  }

  - (void) closeView :(id)sender{
      [[sender superView] removeFromSuperView];          
  } 
```

# cassandra - 使用 Cassandra CQL 时出错：错误请求：第 3:11 行在输入“长”时没有可行的替代方案

> ID：14768459
> 
> 赞同：1
> 
> 时间：2013-02-08T08:25:44.640
> 
> 标签：cassandra, cql

我正在尝试使用以下命令创建新表：

```
CREATE TABLE CPU_High (
                   ... VM_MetricID varchar,
                   ... MetricTime long,
                   ... MetricValue float); 
```

但它给了我以下错误：

> 错误请求：第 3:11 行在输入“长”时没有可行的替代方案

看来我用的是旧版本，能详细说明如何更新吗？我读到我必须复制 lib/*.zip 但有人可以具体吗？就像从哪里和什么文件到哪个位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:42:29.697

在 CQL 中，“long”不是有效的数据类型。

[在这里](http://www.datastax.com/docs/1.1/references/cql/cql_data_types#cql-data-types)，您可以找到有效数据类型的列表。可能，您想使用 bigint 或 int。

# ios - PCM 到 AAC 的转换在设备中花费了太多时间

> ID：14768465
> 
> 赞同：2
> 
> 时间：2013-02-08T08:26:06.720
> 
> 标签：ios, objective-c, audio, pcm, aac

我需要将线性 PCM 录制的音频文件转换为 AAC 格式，并且它也可以正常工作。但在模拟器中需要不到 2 秒，但在 iPhone4 中为 33 秒，在 iPhone 4S 中为 51 秒。它是一个 6 分钟的音频文件。如何减少设备中的转换时间？请帮忙..

# java - 如何在 Java 中同时处理 Collection 中的元素

> ID：14768467
> 
> 赞同：16
> 
> 时间：2013-02-08T08:26:12.447
> 
> 标签：java, collections, concurrency

我需要同时处理一些 Collection 实例中的元素。换句话说，而不是迭代 Collection 实例

```
for (Someclass elem : coll){
     process(elem);
} 
```

我想同时处理这些元素。说，类似的东西`ConcurrentCollectionExecutor(coll, new Callable{…}, numberOfThreads)`。此外，应该修复多个同时线程。

任何灵活的模式已经存在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T08:38:13.823

一个好的解决方案是：

1.  实例化一个包含要处理的元素的[ArrayBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)
2.  实例化一个[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)来同时执行你的处理
3.  实例化你`Runnable`的 s 给他们[ArrayBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)作为参数
4.  实现`run`方法：当队列中有元素时，轮询它们并处理它们
5.  将您`Runnable`的 s 提交给`ExecutorService`

编码：

```
BlockingQueue<Someclass> toProcess = 
    new ArrayBlockingQueue<Someclass>(coll.size(), false, coll);
ExecutorService es = Executors.newFixedThreadPool(numberOfThreads);
for(int count = 0 ; count < numberOfThreads ; ++c) {
    es.submit(new MyRunnable(toProcess));
}

private static class MyRunnable() implements Runnable {
    private final BlockingQueue<Someclass> toProcess;

    public MyRunnable(BlockingQueue<Someclass> toProcess) {
        this.toProcess = toProcess;
    }

    @Override
    public void run() {
        Someclass element = null;
        while((element = toProcess.poll()) != null) {
            process(element);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-08T08:32:35.580

使 process 方法成为一个名为 MyRunnable 的类中的 run() 方法，该类实现 Runnable 并且其构造函数将 elem 作为输入并将其存储为实例变量。然后使用：

```
ExecutorService executor = Executors.newFixedThreadPool(numberOfThreads);
for (Someclass elem : coll){
   Runnable worker = new MyRunnable(elem);
   executor.execute(worker);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T08:43:16.600

下面是此类执行器类的“手工”版本。请注意，您必须传递的不是`Callable`（或`Runnable`）的实例，而是此类处理器类的类名。

```
public class ConcurrentCollectionExecutor<T> {

private Collection<T> collection;
private Class<Runnable> processor;
private int numberOfThreads;
private Executor executor;

public ConcurrentCollectionExecutor(Collection<T> collection, Class<Runnable> processor, int numberOfThreads) {
    this.collection = collection;
    this.processor = processor;
    this.numberOfThreads = numberOfThreads;
    this.executor = Executors.newFixedThreadPool(numberOfThreads);
}

public void run() {
    try {
        Constructor<Runnable> constructor = null;
        for (T t : collection) {
            if (constructor == null) {
                constructor = processor.getConstructor(t.getClass());
            }
            executor.execute(constructor.newInstance(t));
        }
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}      
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:33:57.320

我不知道这有什么模式，但作为一个想法，你可以根据线程数来定义你的集合元素，所以每个线程都会得到 X 元素来处理，例如：

Collection 有 20 个元素，你所有的函数都提供 4 个线程，然后实习生你像这样开始它们：

```
thread1 gets the elements [0 .. 4]
thread2 gets the elements [5 .. 9]
thread3 gets the elements [10 .. 14]
thread1 gets the elements [15 .. 19] 
```

请注意，从集合中删除元素可能会导致问题，然后特别是线程 4 尝试访问 element[19]，而您的集合中的元素少于 20 个。

**编辑**：

正如大脑根据元素处理时间提到的那样，这个想法可能不是有效的，好像处理前 5 个元素中的一个需要 10 秒，但其他元素只需要 0.5 秒，然后线程 1 会很忙，但其他线程最终不会并行运行很长时间。

# node.js - nodejs 将服务器实例作为属性传递给类

> ID：14768468
> 
> 赞同：0
> 
> 时间：2013-02-08T08:26:14.520
> 
> 标签：node.js

我有一个关于传递实例的问题，如下

应用程序.js

```
// nodejs var
var app = express()
    , server = http.createServer(app)
    , _Server = io.listen(server);

/**
 * To log
 * Before, to display the _Server instance, the content should be
 */
console.log(util.inspect(_Server));

// app var
var _Session = new Session(_Server); 
```

session.js

```
var Session = function Session(server) {
    this.m_server = server;

    /**
     * To log
     * After, to display the m_server property, the content actually is
     */
    console.log(util.inspect(this.m_server));
} 
```

我想知道为什么这些结果与我预期的不一样。结果我无法在 Session 类中调用 this.m_server.emit(...) 。我想做的是委派一个行为

```
from
    _Server.emit(...) // in app.js
to
    this.m_server.emit(...) // in session.js 
```

这样就可以在不同的文件中实现很多事件。我该怎么做才能做到？谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:54:40.817

试试这个：

应用程序.js：

```
_Server = module.exports.io = io.listen(server); 
```

会话.js：

```
this.m_server = require('app').io; 
```

# sql-server - SQL Server 2000 未安装

> ID：14768470
> 
> 赞同：0
> 
> 时间：2013-02-08T08:26:21.277
> 
> 标签：sql-server, sql-server-2000

我有一个问题.. 我正在尝试将 SQL Server 2000 Enterprise Edition 安装到云托管中的 Windows XP Professional 上，并且安装在“启动服务器并设置您的配置”阶段停止（可能是这个，但我不记得了） ，我等了大约 10 分钟，安装停止并给了我日志...在日志中是捷克语，我是翻译它！

```
21:54:09 Begin Setup
21:54:09 8.00.194
21:54:09 Mode = Normal
21:54:09 ModeType = NORMAL
21:54:09 GetDefinitionEx returned: 0, Extended: 0x0
21:54:09 ValueFTS returned: 1
21:54:09 ValuePID returned: 0
21:54:09 ValueLic returned: 0
21:54:09 System: Windows NT WorkStation
21:54:09 SQL Server ProductType: Enterprise Evaluation Edition [0x3]
21:54:09 Begin Action: SetupInitialize 
21:54:09 End Action SetupInitialize
21:54:09 Begin Action:  SetupInstall
21:54:09 Reading Software\Microsoft\Windows\CurrentVersion\CommonFilesDir ...
21:54:09 CommonFilesDir=C:\Program Files\Common Files
21:54:09 Windows Directory=C:\WINDOWS\
21:54:09 Program Files=C:\Program Files\
21:54:09 TEMPDIR=C:\WINDOWS\TEMP\
21:54:09 Begin Action:  SetupInstall
21:54:09 Begin Action:  CheckFixedRequirements
21:54:09 Platform ID: 0xf000000
21:54:09 Version: 5.1.2600
21:54:09 File Version - C:\WINDOWS\system32\shdocvw.dll: 6.0.2900.5512
21:54:09 End Action:  CheckFixedRequirements
21:54:09 Begin Action:  ShowDialogs
21:54:09 Initial Dialog Mask: 0x8300037, Disable Back=0x1
21:54:09 Begin Action ShowDialogsHlpr: 0x1
21:54:09 Begin Action:  DialogShowSdWelcome
21:54:10 End Action  DialogShowSdWelcome
21:54:10 Dialog 0x1 returned: 1
21:54:10 End Action ShowDialogsHlpr
21:54:10 ShowDialogsGetDialog returned: nCurrent=0x2,index=1
21:54:10 Begin Action ShowDialogsHlpr: 0x2
21:54:10 Begin Action:  DialogShowSdMachineName
21:54:11 ShowDlgMachine returned: 1
21:54:11 Name = ZIZKA-59FF41BAF, Type = 0x1
21:54:11 Begin Action:  CheckRequirements
21:54:11 Processor Architecture: x86 (Pentium)
21:54:11 Service Pack:  768
21:54:11 ComputerName: ZIZKA-59FF41BAF
21:54:11 User Name: Nuclear
21:54:11 IsAllAccessAllowed returned: 1
21:54:11 OS Language: 0x405
21:54:11 End Action CheckRequirements
21:54:11 This combination of Package and Operating System allows a full product install.
21:54:11 CreateSetupTopology(ZIZKA-59FF41BAF), Handle : 0x14841d0, returned : 0
21:54:11 CreateSetupTopology returned : 0, Handle : 0x14841d0
21:54:11 Topology Type : 1, Return Value : 0
21:54:11 ST_GetPhysicalNode returned : 0, PNHandle : 0x1484220
21:54:11 PN_EnumerateEx returned : 0
21:54:11 PN_GetSQLStates returned : 0, SqlStates : 0x0
21:54:11 PN_StartScan [0x1484220] returned : 0
21:54:11 PN_GetNext [0x1484220] returned : 18, Handle: [0x0]
21:54:11 No more items in enumeration.
21:54:11 ReleaseSetupTopology
21:54:11 Named instance limit: 100, quota: 0
21:54:11 End Action  DialogShowSdMachineName
21:54:11 begin ShowDialogsUpdateMask
21:54:11 nFullMask = 0x8300037, nCurrent = 0x2, nDirection = 0
21:54:11 Updated Dialog Mask: 0xbf00037, Disable Back = 0x1
21:54:11 Dialog 0x2 returned: 0
21:54:11 End Action ShowDialogsHlpr
21:54:11 ShowDialogsGetDialog returned: nCurrent=0x4,index=2
21:54:11 Begin Action ShowDialogsHlpr: 0x4
21:54:11 Begin Action:  DialogShowSdInstallMode
21:54:12 ShowDlgInstallMode returned: 1
21:54:12 InstallMode : 0x1
21:54:12 End Action  DialogShowSdInstallMode
21:54:12 begin ShowDialogsUpdateMask
21:54:12 nFullMask = 0xbf00037, nCurrent = 0x4, nDirection = 1
21:54:12 Updated Dialog Mask: 0xbf40037, Disable Back = 0x1
21:54:12 Dialog 0x4 returned: 1
21:54:12 End Action ShowDialogsHlpr
21:54:12 ShowDialogsGetDialog returned: nCurrent=0x10,index=4
21:54:12 Begin Action ShowDialogsHlpr: 0x10
21:54:12 Begin Action:  DialogShowSdRegisterUserEx
21:54:12 End Action DialogShowSdRegisterUserEx
21:54:12 Dialog 0x10 returned: 1
21:54:12 End Action ShowDialogsHlpr
21:54:12 ShowDialogsGetDialog returned: nCurrent=0x20,index=5
21:54:12 Begin Action ShowDialogsHlpr: 0x20
21:54:12 Begin Action:  DialogShowSdLicense
21:54:13 End Action DialogShowSdLicense
21:54:13 Dialog 0x20 returned: 1
21:54:13 End Action ShowDialogsHlpr
21:54:13 ShowDialogsGetDialog returned: nCurrent=0x40000,index=18
21:54:13 Begin Action ShowDialogsHlpr: 0x40000
21:54:13 Begin Action:  DialogShowSdCliSvr
21:54:13 DisplaySystemPreReq
21:54:15 ShowDlgClientServerSelect returned: 1
21:54:15 Type : 0x2
21:54:15 End Action  DialogShowSdCliSvr
21:54:15 begin ShowDialogsUpdateMask
21:54:15 nFullMask = 0xbf40037, nCurrent = 0x40000, nDirection = 1
21:54:15 Updated Dialog Mask: 0xbfc0037, Disable Back = 0x1
21:54:15 Dialog 0x40000 returned: 1
21:54:15 End Action ShowDialogsHlpr
21:54:15 ShowDialogsGetDialog returned: nCurrent=0x80000,index=19
21:54:15 Begin Action ShowDialogsHlpr: 0x80000
21:54:15 Begin Action:  DialogShowSdInstanceName
21:54:15 Begin Action: ShowDlgInstanceName
21:54:17 End Action: ShowDlgInstanceName
21:54:17 ShowDlgInstanceName returned : 1
21:54:17 InstanceName : MSSQLSERVER
21:54:17 CreateSetupTopology(ZIZKA-59FF41BAF), Handle : 0x14841d0, returned : 0
21:54:17 CreateSetupTopology returned : 0, Handle : 0x14841d0
21:54:17 Topology Type : 1, Return Value : 0
21:54:17 ST_GetPhysicalNode returned : 0, PNHandle : 0x1484220
21:54:17 PN_EnumerateEx returned : 0
21:54:17 PN_GetSQLStates returned : 0, SqlStates : 0x0
21:54:17 PN_StartScan [0x1484220] returned : 0
21:54:17 PN_GetNext [0x1484220] returned : 18, Handle: [0x0]
21:54:17 No more items in enumeration.
21:54:17 ReleaseSetupTopology
21:54:17 End Action  DialogShowSdInstanceName
21:54:17 begin ShowDialogsUpdateMask
21:54:17 nFullMask = 0xbfc0037, nCurrent = 0x80000, nDirection = 1
21:54:17 Updated Dialog Mask: 0xbfc0037, Disable Back = 0x1
21:54:17 Dialog 0x80000 returned: 1
21:54:17 End Action ShowDialogsHlpr
21:54:17 ShowDialogsGetDialog returned: nCurrent=0x100000,index=20
21:54:17 Begin Action ShowDialogsHlpr: 0x100000
21:54:17 Begin Action:  DialogShowSdSetupType
21:54:17 Begin Action: Setup Type
21:54:19 SQL program folder: C:\Program Files\Microsoft SQL Server
21:54:19 SQL data folder: C:\Program Files\Microsoft SQL Server
21:54:19 Windows system folder: C:\WINDOWS\system32\
21:54:19 Prog req: 38073, Data req: 34432, Sys req: 158694
21:54:19 Prog avail: 967915440, Data avail: 967915440, Sys avail: 967915440
21:54:19 Prog req vs. avail, 231199, 967915440
21:54:19 Data req vs. avail, 34432, 967915440
21:54:19 Sys req vs. avail, 193126, 967915440
21:54:19 DisplaySystemPreReq
21:54:19 [SetupTypeSQL]
21:54:19 szDir = C:\Program Files\Microsoft SQL Server
21:54:19 szDir = %PROGRAMFILES%\Microsoft SQL Server
21:54:19 Result = 301
21:54:19 szDataDir = C:\Program Files\Microsoft SQL Server
21:54:19 szDataDir = %PROGRAMFILES%\Microsoft SQL Server
21:54:19 End Action: Setup Type
21:54:19 Setup Type: Typical (301)
21:54:19 End Action  DialogShowSdSetupType
21:54:19 begin ShowDialogsUpdateMask
21:54:19 nFullMask = 0xbfc0037, nCurrent = 0x100000, nDirection = 301
21:54:19 Updated Dialog Mask: 0xbdc0037, Disable Back = 0x1
21:54:19 Dialog 0x100000 returned: 301
21:54:19 End Action ShowDialogsHlpr
21:54:19 ShowDialogsGetDialog returned: nCurrent=0x400000,index=22
21:54:19 Begin Action ShowDialogsHlpr: 0x400000
21:54:19 Begin Action:  DlgServices
21:54:21 ShowDlgServices returned: 1
21:54:21 [DlgServices]
21:54:21 Local-Domain   = 3855
21:54:21 AutoStart      = 15
21:54:21 Result = 1
21:54:21 End Action DlgServices
21:54:21 begin ShowDialogsUpdateMask
21:54:21 nFullMask = 0xbdc0037, nCurrent = 0x400000, nDirection = 1
21:54:21 Updated Dialog Mask: 0xbdc0037, Disable Back = 0x1
21:54:21 Dialog 0x400000 returned: 1
21:54:21 End Action ShowDialogsHlpr
21:54:21 ShowDialogsGetDialog returned: nCurrent=0x800000,index=23
21:54:21 Begin Action ShowDialogsHlpr: 0x800000
21:54:21 Begin Action:  DlgSQLSecurity
21:54:22 ShowDlgSQLSecurity returned: 1
21:54:22 LoginMode = 1,szPwd
21:54:22 End Action DlgSQLSecurity
21:54:22 begin ShowDialogsUpdateMask
21:54:22 nFullMask = 0xbdc0037, nCurrent = 0x800000, nDirection = 1
21:54:22 Updated Dialog Mask: 0xbdc0037, Disable Back = 0x1
21:54:22 Dialog 0x800000 returned: 1
21:54:22 End Action ShowDialogsHlpr
21:54:22 ShowDialogsGetDialog returned: nCurrent=0x1000000,index=24
21:54:22 Begin Action ShowDialogsHlpr: 0x1000000
21:54:22 Begin Action:  DlgCollation
21:54:22 ShowDlgCollation returned: 1
21:54:22 collation_name = Czech_CI_AS,locale_name = Czech,lcid = 0x405,SortId = 0,dwCompFlags = 0x30001
21:54:22 End Action DlgCollation
21:54:22 begin ShowDialogsUpdateMask
21:54:22 nFullMask = 0xbdc0037, nCurrent = 0x1000000, nDirection = 1
21:54:22 Updated Dialog Mask: 0xbdc0037, Disable Back = 0x1
21:54:22 Dialog 0x1000000 returned: 1
21:54:22 End Action ShowDialogsHlpr
21:54:22 ShowDialogsGetDialog returned: nCurrent=0x2000000,index=25
21:54:22 Begin Action ShowDialogsHlpr: 0x2000000
21:54:22 Begin Action:  DlgNetwork
21:54:22 ShowDlgNetwork returned: 1
21:54:22 [DlgServerNetwork]
21:54:22 NetworkLibs = 255
21:54:22 TCPPort = 1433
21:54:22 TCPPrxy = Default
21:54:22 NMPPipeName = \\.\pipe\sql\query
21:54:22 Result = 1
21:54:22 End Action DlgNetwork
21:54:22 begin ShowDialogsUpdateMask
21:54:22 nFullMask = 0xbdc0037, nCurrent = 0x2000000, nDirection = 1
21:54:22 Updated Dialog Mask: 0xbdc0037, Disable Back = 0x1
21:54:22 Dialog 0x2000000 returned: 1
21:54:22 End Action ShowDialogsHlpr
21:54:22 ShowDialogsGetDialog returned: nCurrent=0x8000000,index=27
21:54:22 Begin Action ShowDialogsHlpr: 0x8000000
21:54:22 Begin Action:  DialogShowSdStartCopy
21:54:22 End Action DialogShowSdStartCopy
21:54:22 begin ShowDialogsUpdateMask
21:54:22 nFullMask = 0xbdc0037, nCurrent = 0x8000000, nDirection = 1
21:54:22 Updated Dialog Mask: 0xbdc0037, Disable Back = 0x1
21:54:22 Dialog 0x8000000 returned: 1
21:54:22 End Action ShowDialogsHlpr
21:54:22 ShowDialogsGetDialog returned: nCurrent=0x0,index=0
21:54:22 End Action ShowDialogs
21:54:22 Begin Action ProcessBeforeDataMove:
21:54:22 DeinstallStart returned (C:\Program Files\Microsoft SQL Server\MSSQL): 0
21:54:22 End Action   ProcessBeforeDataMove:
21:54:22 Begin Action SetToolsComponentSelection:
21:54:22 End Action SetToolsComponentSelection:
21:54:22 Begin Action ProcessComponentSelection:
21:54:22 End Action ProcessComponentSelection
21:54:22 Begin Action LogSelectedComponents:
21:54:22 SQLProg
21:54:22 SQLProg\SQLServr
21:54:22 SQLProg\SQLServr\Help
21:54:22 SQLProg\SQLServr\SCMDev
21:54:22 SQLProg\SQLServr\SCMDev\SCMh
21:54:22 SQLProg\SQLServr\SCMDev\SCMX86Lb
21:54:22 SQLProg\SQLServr\SCMDev\SCMALb
21:54:22 SQLProg\SQLServr\Rs1033
21:54:22 SQLProg\SQLServr\RsIntl
21:54:22 SQLProg\SQLServr\ActiveX
21:54:22 SQLProg\SQLServr\System
21:54:22 SQLProg\UpgTools
21:54:22 SQLProg\UpgTools\UpgSys
21:54:22 SQLProg\UpgTools\ActiveX
21:54:22 SQLProg\UpgTools\Res1033
21:54:22 SQLProg\UpgTools\ResOther
21:54:22 SQLProg\UpgTools\Resld
21:54:22 SQLProg\ReplSupp
21:54:22 SQLProg\ReplSupp\ReplDat
21:54:22 SQLProg\ReplSupp\RepComm
21:54:22 SQLProg\ReplSupp\RepNoDk
21:54:22 SQLProg\ReplSupp\ActiveX
21:54:22 SQLProg\Install
21:54:22 SQLProg\System
21:54:22 SQLProg\SvrExt
21:54:22 SQLProg\SvrExt\Help
21:54:22 SQLProg\SvrExt\SvrExtRs
21:54:22 SQLProg\SvrExt\ResIntl
21:54:22 SQLProg\Dat
21:54:22 SQLProg\DatSmpl
21:54:22 SQLProg\BaseSys
21:54:22 SQLProg\BaseBinn
21:54:22 SQLProg\BaseInst
21:54:22 SQLProg\Symbols
21:54:22 SQLProg\Symbols\EXE
21:54:22 SQLProg\Symbols\DLL
21:54:22 SQLProg\Perfmon
21:54:22 SQLProg\Perfmon\System
21:54:22 SQLProg\Root
21:54:22 MgtTool
21:54:22 MgtTool\SEM
21:54:22 MgtTool\SEM\HTML
21:54:22 MgtTool\SEM\MSD98
21:54:22 MgtTool\SEM\MSD98SYS
21:54:22 MgtTool\SEM\MSD98Res
21:54:22 MgtTool\SEM\MSD98Hlp
21:54:23 MgtTool\SEM\Help
21:54:23 MgtTool\SEM\Res1033
21:54:23 MgtTool\SEM\ResIntl
21:54:23 MgtTool\SEM\MSD98RsI
21:54:23 MgtTool\SEM\ActiveX
21:54:23 MgtTool\SEM\ActiveX\Res1033
21:54:23 MgtTool\SEM\ActiveX\ResIntl
21:54:23 MgtTool\SEM\Scripts
21:54:23 MgtTool\SEM\OLEDB
21:54:23 MgtTool\SEM\OLEDB\Res1033
21:54:23 MgtTool\SEM\OLEDB\ResIntl
21:54:23 MgtTool\Profiler
21:54:23 MgtTool\Profiler\Help
21:54:23 MgtTool\Profiler\Res1033
21:54:23 MgtTool\Profiler\ResIntl
21:54:23 MgtTool\Qryanlz
21:54:23 MgtTool\Qryanlz\Help
21:54:23 MgtTool\Qryanlz\Res1033
21:54:23 MgtTool\Qryanlz\ResIntl
21:54:23 MgtTool\DTCCLi
21:54:23 MgtTool\Wzcnflct
21:54:23 MgtTool\Wzcnflct\WzcnHlp
21:54:23 MgtTool\Wzcnflct\Wzcn1033
21:54:23 MgtTool\Wzcnflct\WzcnOthr
21:54:23 MgtTool\Wzcnflct\WzcnCmn
21:54:23 MgtTool\UtilSys
21:54:23 MgtTool\UtilBinn
21:54:23 Connect
21:54:23 Connect\ConnSys
21:54:23 Books
21:54:23 Books\Bookso
21:54:23 Books\Bookso\Utils
21:54:23 DevTools
21:54:23 DevTools\Dbg Int
21:54:23 DevTools\Dbg Int\Dbg Int Common
21:54:23 DevTools\Dbg Int\EXE
21:54:23 CoreRepl
21:54:23 CoreRepl\Res1033
21:54:23 CoreRepl\ResIntl
21:54:23 Core
21:54:23 Core\Res1033
21:54:23 Core\ResOther
21:54:23 Repostry
21:54:23 Repostry\RepstSys
21:54:23 Repostry\Res1033
21:54:23 Repostry\ResIntl
21:54:23 CoreMisc
21:54:23 CoreMisc\ActiveX
21:54:23 CoreMisc\ActiveX\Res1033
21:54:23 CoreMisc\ActiveX\ResIntl
21:54:23 CoreMisc\Res1033
21:54:23 Monarch
21:54:23 Monarch\Monr1033
21:54:23 Monarch\MonrIntl
21:54:23 Jet
21:54:23 CoreInst
21:54:23 CoreCOM
21:54:23 CoreCOM\Res1033
21:54:23 CoreCOM\ResIntl
21:54:23 CoreTool
21:54:23 CoreTool\Res1033
21:54:23 CoreTool\ResOther
21:54:23 DBLibCli
21:54:23 SFExt
21:54:23 SFExt\ActiveX
21:54:23 SFExt\ActiveX\Res1033
21:54:23 SFExt\ActiveX\ResIntl
21:54:23 SFExt\Res1033
21:54:23 SFExt\ResIntl
21:54:23 Trace
21:54:23 Trace\Res1033
21:54:23 Trace\ResOther
21:54:23 MiscCore
21:54:23 MC
21:54:23 MC\MC1033
21:54:23 MC\MCIntl
21:54:23 MC\Help
21:54:23 SQLMgr
21:54:23 SQLMgr\Res1033
21:54:23 SQLMgr\ResIntl
21:54:23 SvrTool
21:54:23 SvrTool\Res1033
21:54:23 SvrTool\ResIntl
21:54:23 DTSUI
21:54:23 DTSUI\Res1033
21:54:23 DTSUI\ResIntl
21:54:23 MSOlap
21:54:23 MSOlap\Res1033
21:54:23 MSOlap\ResIntl
21:54:23 ATL
21:54:23 ATL\winnt
21:54:23 ATL\win9x
21:54:23 MFC42U
21:54:23 VC
21:54:23 VB
21:54:23 OCX1
21:54:23 SQLAdHlp
21:54:23 SQLAdHlp\Res1033
21:54:23 SQLAdHlp\ResOther
21:54:23 {E07FDDBE-5A21-11d2-9DAD-00C04F79D434}
21:54:23 {E07FDDC7-5A21-11d2-9DAD-00C04F79D434}
21:54:23 {E07FDDC0-5A21-11d2-9DAD-00C04F79D434}
21:54:23 {E07FDDBF-5A21-11d2-9DAD-00C04F79D434}
21:54:23 End Action LogSelectedComponents
21:54:23 Begin Action InstallPkgs:
21:54:23 Begin Action: Locked Connectivity Files Check
21:54:23 ConnectivityLocked returned: 0
21:54:23 Operation has been suceffull ended. //Translated

21:54:23 End Action: Locked Connectivity Files Check
21:54:23 Setup is installing Microsoft Data Access Components (MDAC) ...
21:54:23 C:\SQLEVAL\x86\Other\sqlredis.exe /q:a /C:"setupre.exe WARN=1 -s -SMS"
21:54:30 ExitCode: 0
21:54:30 Setup is installing Microsoft Distributed Transaction Coordinator (MSDTC) ...
21:54:30  C:\WINDOWS\TEMP\SqlSetup\Bin\cldtcstp.exe -SupportDir "C:\WINDOWS\TEMP\SqlSetup\Bin" -DTCPkg "C:\SQLEVAL\x86\Other\dtcsetup.exe" -LogFile "C:\WINDOWS\sqlstp.log"
21:54:30 Process Exit Code: (0) 
21:54:30  /Q:A /T:C:\WINDOWS\TEMP\ixp001.tmp
21:54:30 Setup is installing HTML Help ...
21:54:30 HTML Help installer exit code: 0
21:54:51 End Action InstallPkgs
21:54:51 Begin Action MoveFileData:
21:54:51 Enabled SELFREGISTERBATCH
21:54:51 Enabled CORECOMPONENTHANDLING
21:55:01 Begin Action:  MoveFileDataSpecial
21:55:01 End Action:  MoveFileDataSpecial
21:55:01 End Action   MoveFileData
21:55:01 Begin Action ProcessAfterDataMove:
21:55:01 C:\SQLEVAL\x86\Binn\hhcol.exe C:\Program Files\Microsoft SQL Server\80\Tools\Books
21:55:01 End Action   ProcessAfterDataMove
21:55:01 Begin Action BuildServer:
21:55:01 C:\WINDOWS\TEMP\SqlSetup\Bin\scm.exe  -Silent 1 -Action 5 -ExePath "C:\Program Files\Microsoft SQL Server\MSSQL\binn\sqlservr.exe" -Service "MSSQLSERVER"
21:55:02 Process Exit Code: (0) 
21:55:02 Begin Action: CreateRegistrySetSQL
21:55:02 End Action: CreateRegistrySetSQL
21:55:02 Begin Action: RegWriteSetupEntry
21:55:02 End Action: RegWriteSetupEntry
21:55:02 Begin Action: CreateSer
21:55:02 End Action: CreateSer
21:55:02 Begin Action: SkuIt
21:55:02 End Action: SkuIt
21:55:02 SetFileSecuritySQLAndAdmin for C:\Program Files\Microsoft SQL Server\MSSQL returned: 0, 0
21:55:02 SetRegSecuritySQLAndAdmin for Software\Microsoft\MSSQLServer\MSSQLServer returned: 0, 0
21:55:02 Begin Action: UpdateSystemPath
21:55:02 Path successfully updated.
21:55:02 %SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\Program Files\Microsoft SQL Server\80\Tools\BINN
21:55:02 End Action: UpdateSystemPath
21:55:03 C:\Program Files\Microsoft SQL Server\80\Tools\Binn\cnfgsvr.exe  -F "C:\WINDOWS\sqlstp.log" -I MSSQLSERVER -V 1 -M 0 -Q "Czech_CI_AS" -H 3211902 -U sa -P 
###############################################################################

Starting Service ...

Czech_CI_AS

-m -Q -T4022 -T3659

Connecting to Server ...

driver={sql server};server=ZIZKA-59FF41BAF;UID=sa;PWD=;database=master

[Microsoft][ODBC SQL Server Driver][Shared Memory]SQL Server not exists or access denied. //Translated

[Microsoft][ODBC SQL Server Driver][Shared Memory]ConnectionOpen (Connect()).

driver={sql server};server=ZIZKA-59FF41BAF;UID=sa;PWD=;database=master

[Microsoft][ODBC SQL Server Driver][Shared Memory]SQL Server not exists or access denied. //Translated

[Microsoft][ODBC SQL Server Driver][Shared Memory]ConnectionOpen (Connect()).

driver={sql server};server=ZIZKA-59FF41BAF;UID=sa;PWD=;database=master

[Microsoft][ODBC SQL Server Driver][Shared Memory]SQL Server not exists or access denied. //Translated

[Microsoft][ODBC SQL Server Driver][Shared Memory]ConnectionOpen (Connect()).

SQL Server configuration failed.

###############################################################################

21:57:03 Process Exit Code: (-1) 
22:56:35 Setup failed to configure the server.   Refer to the server error logs and C:\WINDOWS\sqlstp.log for more information.
22:56:35 Action CleanUpInstall:
22:56:35 C:\WINDOWS\TEMP\SqlSetup\Bin\scm.exe  -Silent 1 -Action 4 -Service SQLSERVERAGENT
22:56:35 Process Exit Code: (1060) Selected service not installed. // Translated

22:56:35 C:\WINDOWS\TEMP\SqlSetup\Bin\scm.exe  -Silent 1 -Action 4 -Service MSSQLSERVER
22:56:55 Action Exit Handler:
22:56:58 Process Exit Code: (0) 
22:56:58 StatsGenerate returned: 2
22:56:58 StatsGenerate (0x0,0x1,0xf000000,0x300,1033,303,0x0,0x1,0,0,0
22:56:58 StatsGenerate -1,Nuclear)
22:56:58 Installation Failed. 
```

我在“安装服务......”阶段检查了谷歌股票，我发现我是否拥有所有 NTFS 权限......有管理权限，但不知道 NTFS 权限......

有什么问题？

# android - PhoneGap Build - 为 Android 设备设置启动画面

> ID：14768471
> 
> 赞同：4
> 
> 时间：2013-02-08T08:26:28.513
> 
> 标签：android, cordova, splash-screen, phonegap-build

我目前正在尝试在 phonegap 构建中为 Android 设备设置启动画面。我设置了 4 个不同的屏幕，但不知何故，屏幕变形并失去了纵横比。有没有办法防止这种情况？

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:42:20.460

Do'h，错过了关于 Android 的问题，这是我的 config.xml 中的 Android 部分：

```
<gap:splash src="img/splash/android/ldpi.png" gap:platform="android" gap:density="ldpi" />
<gap:splash src="img/splash/android/mdpi.png" gap:platform="android" gap:density="mdpi" />
<gap:splash src="img/splash/android/hdpi.png" gap:platform="android" gap:density="hdpi" />
<!--<gap:splash src="splash/android/xhdpi.png" gap:platform="android" gap:density="xhdpi" />--> 
```

是的，Apple 更容易！在 Android 上，它们使用称为“密度”的限定符。

据我所知，PhoneGap Build 目前只支持四个中的三个。ldpi、mdpi、hdpi 和 NOT xdpi（这就是上面注释掉的原因）。

我的理解是，所有 Android 设备都将使用这四种尺寸中的一种。在数百种不同的设备上获得完美的纵横比可能有点挑战，但这样你至少可以接近。

读这个，我知道它很多，但值得一读：http: [//developer.android.com/guide/practices/screens_support.html#support](http://developer.android.com/guide/practices/screens_support.html#support)

而且，PGB 指南：[http ://build.phonegap.com/docs/config-xml](http://build.phonegap.com/docs/config-xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T11:30:56.417

我们可以通过三种方式设置它

1.  通过 config.xml
2.  通过活动类设置属性
3.  通过脚本

参考更多示例源代码示例源代码以及 phonegap-build-set-splash-screen 示例

[http://getmebyclickme.blogspot.in/2013/10/phonegap-build-set-splash-screen-for.html](http://getmebyclickme.blogspot.in/2013/10/phonegap-build-set-splash-screen-for.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:31:04.553

请参阅Phonegap 的启动画面详细信息@Phonegap[中的启动画面](https://github.com/phonegap/phonegap/wiki/App-Splash-Screen-Sizes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:33:44.683

```
import android.os.Bundle;
   import org.apache.cordova.*;

  public class RemindMeActivity extends DroidGap {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl("file:///android_asset/www/index.html", 10000);

}
} 
```

这将帮助您使用 phonegap 显示启动画面

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T17:02:45.373

这就是我拥有 PGB config.xml 的方式（您的文件夹结构和文件名会有所不同），这支持我相信的大多数 IOS 设备。你有多少发射图像？

```
<gap:splash src="img/splash/ios/Default.png" width="320" height="480" />
<gap:splash src="img/splash/ios/Default_at_2x.png" width="640" height="960" />
<gap:splash src="img/splash/ios/Default_iphone5.png" width="640" height="1136" />
<gap:splash src="img/splash/ios/Default-Landscape.png" width="1024" height="768" />
<gap:splash src="img/splash/ios/Default-Portrait.png" width="768" height="1024" />
<gap:splash src="img/splash/ios/Hi-Rez-Portrait.png" width="1536" height="2008" />
<gap:splash src="img/splash/ios/Hi-Rez-Landscape.png" width="2048" height="1496" /> 
```

苹果的指导方针：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

Phonegap Build 的指南：[http ://build.phonegap.com/docs/config-xml](http://build.phonegap.com/docs/config-xml)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-26T10:07:16.433

这可能会满足您的需求。`config.xml`它允许您在一个漂亮的直观界面中自定义和添加所有相关设置、图像和启动画面。

我建议下载文件并手动安装。基于网络的空气安装程序似乎不起作用。

[http://aj-software.com/configap/index.html](http://aj-software.com/configap/index.html) [目前离线]

# r - 在圆形块（列）中寻找邻居（左右）的发生矩阵

> ID：14768479
> 
> 赞同：-1
> 
> 时间：2013-02-08T08:27:31.613
> 
> 标签：r

考虑一个具有`r`行和`c`列并且包含0 到;`v`之间的整数的矩阵。`v-1`在以下示例中`r=4`，`c=2`、 和`v=6`。

```
L <- c(0,1,1,2,0,1,2,3)
(x <- matrix(L,nrow=4,ncol=2,byrow = TRUE))

 ## 0 1 
 ## 1 2 
 ## 0 1 
 ## 2 3 
```

目标是按列关联矩阵生成`r*c`（行）`v`，如下所示：

*   每行对应于原始矩阵的一个元素（按列优先顺序，即在此处的示例中，第 4 行对应于`x[4,1]`，第 5 行对应于`x[1,2]`）
*   找到每个元素上方和下方的“邻居”，从矩阵的顶部到底部（循环地）环绕；计算 的每个值的相邻元素的数量`v`。

例如`x[1,1]`，矩阵`1`（. 该行的其余部分设置为零：`2``0:(v-1)`

```
 rownames  0  1  2  3  4  5            
  [1]       0  1  1  0  0  0 
```

下一个元素 ( `x[2,1]`)`0`在两侧（上方和下方）都有，因此第一列（对应于 0）设置为 2，其余元素为零。

```
 [2]       2  0  0  0  0  0 
```

上面示例的完整矩阵是：

```
 rownames  0  1  2  3  4  5            
  [1]       0  1  1  0  0  0
  [2]       2  0  0  0  0  0
  [3]       0  1  1  0  0  0
  [4]       2  0  0  0  0  0
  [5]       0  0  1  1  0  0
  [6]       0  2  0  0  0  0
  [7]       0  0  1  1  0  0  
  [8]       0  2  0  0  0  0 
```

行总和均为 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:18:15.893

```
L =c(0,1,1,2,0,1,2,3)
x=matrix(L,nrow=4,ncol=2,byrow = TRUE) 
```

可能有一种更清洁的方法来做到这一点：

```
wrapind <- function(i,n)
    ifelse((r <- i %% n) == 0, n, r)

n <- nrow(x)
v <- 6
incmat <- matrix(0,ncol=v,nrow=prod(dim(x)),
                 dimnames=list(NULL,0:(v-1)))
k <- 1
for (i in seq(ncol(x)))
    for (j in seq(nrow(x))) {
        cat(i,j,k,"\n")  ## unnecessary
        tt <- table(as.character(x[wrapind(c(j-1,j+1),n),i]))
        incmat[k,names(tt)] <- tt
        k <- k+1
    } 
```

# asp.net - System.InvalidOperationException：内部连接致命错误

> ID：14768484
> 
> 赞同：0
> 
> 时间：2013-02-08T08:27:47.497
> 
> 标签：asp.net

我们在 .Net 4.0 和 SQL Server 2008 R2 上的暂存 Web 应用程序运行平稳超过 2 个月。突然之间，我们开始在应用程序中收到错误消息：

> 错误消息：System.InvalidOperationException：内部连接致命错误。在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler，TdsParserStateObject stateObj）在 System.Data.SqlClient.SqlDataReader.HasMoreResults()

每当我的数据库查询返回超过约 700 行时，就会出现这种情况。奇怪的是，我的生产网站（与登台具有相同的代码库）在连接到登台数据库时运行良好。

我尝试将我的登台 Web 服务器连接到生产数据库（登台数据库的类似副本），但我得到了同样的错误。这个错误是暂时的，有时页面加载，有时我得到错误。

如果我将行数减少到 700 以下，则页面可以正常工作。

特定的存储过程在我的页面中只被调用一次。

我做了以下事情：

1.  修改代码以在**using**块中使用命令对象。
2.  使用完成后立即关闭连接。
3.  比较暂存和生产 IIS 服务设置，它们看起来很相似。
4.  两个 Web 服务器上都安装了相同的 MDAC。

但没有任何帮助，我仍然在登台 Web 服务器中遇到错误。该查询在 SQL Server Management Studio 中运行良好，耗时 < 3 秒。

任何人都可以提出任何解决方案吗？

这是调用存储过程的代码库：

```
 string strSPName = SQLSchema.strSQLSchema + SPNames.<Some SP Name>;

 using (conn)
    {

        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = strSPName;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Connection = conn;
        cmd.Parameters.Add(SPParams.<Some Param>, SqlDbType.Int);
        cmd.Parameters[0].Value = <value of Param>;
        conn.Open();

        dsSubmitter = new DataSet();
        SqlDataAdapter adapter = new SqlDataAdapter(cmd);
        adapter.Fill(dsSubmitter);
        if (dsSubmitter.Tables.Count != 0)
        {
            dsSubmitter.Tables[0].TableName = DALConstants.<Table Name>;
        }

        conn.Close();
    } 
```

SP 非常简单，带有一个 select 语句以及主表和详细表之间的 INNER 连接。主表有约 400 行，明细表 > 10,000 行。SQL 查询返回大约 4000 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:10:55.980

看起来像是 SqlAdapter 的问题，你为什么不尝试再次安装 .net 框架。

清理解决方案并重建它。

# asp.net-mvc - MVC API 控制器的目的

> ID：14768487
> 
> 赞同：0
> 
> 时间：2013-02-08T08:27:57.973
> 
> 标签：asp.net-mvc

我试图了解如何在 ASP.NET MVC 中使用 API 控制器。

默认情况下，方法为 Get、Post、Put、Delete。我应该对 Knockout 框架使用它。但我试图了解我是否可以扩展 api 控制器以返回更复杂的数据，或者 api 控制器是否应该只处理 CRUD？

谢谢指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:40:52.443

你可以做任何你想做的事。Web API 只是常规控制器的扩展，它允许您通过内容协商和更轻松的数据查询创建易于使用的 Web 服务。

默认情况下，方法装饰有某些属性以供您注意，您应该使用 GET 进行数据提取，使用 DELETE 进行删除，使用 POST 和 PUT 进行创建、修改。这只是一个正确启动的模板。

ASP.NET Web API 页面上的第一个示例不使用 CRUD：

[http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

# selenium - 如何选择此跨度元素？

> ID：14768491
> 
> 赞同：5
> 
> 时间：2013-02-08T08:28:05.263
> 
> 标签：selenium, selenium-webdriver

我刚从 Selenium 开始，现在需要选择这个元素：

```
<span class=" close">Matrices</span> 
```

这行代码返回零个元素，所以我猜它不是正确的:-)

```
ReadOnlyCollection<IWebElement> matrixLink = driver.FindElements(By.PartialLinkText("Matrices")); 
```

但是我找不到另一个合适的，除了 Xpath，但看起来像这样（`//*[@id=\"Navigation\"]/div[2]/div[2]/ul/li[7]/span`），这对我来说似乎有点脆弱？

**编辑**：跨度具有“关闭”类。它是菜单的一部分，其中有 19 个跨度为“关闭”类，因此不幸的是它不是唯一的选择器......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T09:43:20.593

这将起作用：

```
//*[@id=\"Navigation\"]/descendant::span[text()='Matrices'] 
```

请注意，如果可以，请在 XPath 查询中具体说明，主要是为了提高可读性和提高性能……也就是说，`*`在您的查询中将查询页面中的**所有**元素。我不知道**Navigation**元素是什么类型的元素，但你应该把它的确切元素类型放入，例如，如果它是一个 div，就让它：

```
//div[@id=\"Navigation\"]/descendant::span[text()='Matrices'] 
```

对此 XPath 的一个简单解释是，它将抓取`Navigation`元素，并简单地查看其中的*任何位置*以找到`span`具有`Matrices`. 如果没有`descendant`XPath 中的位，它只会搜索**直接 children**。这意味着元素是 的子元素`Navigation`，仅此而已 - 因此，如果元素是 的子元素的子元素`TestDiv`，`Navigation`则会`descendant`捕获它，没有它，您将不会返回任何结果。

至于为什么`By.PartialLinkText`不起作用，这只会搜索锚链接。如您所见，锚链接`span`内部有一个元素是很常见的，或者有时它只是一个`span`独立的元素。

`By.PartialLinkText`同样`By.LinkText`不会“看到”这个元素，因为它不是锚元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:14:52.400

对于这些情况，我最喜欢的问题解决者：

*   安装[Selenium IDE](http://seleniumhq.org/projects/ide/plugins.jsp)
*   点击你需要的链接
*   在 Selenium IDE 的“目标”中，您将看到不同的 xpath 可能性

但我会使用这种方法，它的第 N 个元素具有“关闭”类（`//span[7]`或类似的东西）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T11:37:59.777

您可以使用 //span[text()='Matrices'] 它将选择您的元素。

# verilog - Verilog 程序编辑器和编译器

> ID：14768492
> 
> 赞同：2
> 
> 时间：2013-02-08T08:28:32.473
> 
> 标签：verilog

这个学期，我有一门需要使用 Verilog 的硬件课程。我在 Google 上搜索了一些免费的 Verilog IDE，我可以在其中编写 Verilog 程序并编译和运行它们（我认为正确的词是“模拟”，但请原谅，我仍然习惯于 C！），但我没有得到任何东西。

您能推荐一些在 Windows 7 上编写和模拟 Verilog 程序的免费软件吗？我的大学在大学 PC 中提供了一些名为 Xilinx 的软件，但我认为那不是免费软件。他们也不愿意在我们的个人电脑上提供给我们。因此，任何建议将不胜感激！

另外，我是 Verilog 的新手。如果您至少在某种程度上知道初学者掌握 Verilog 的任何重要资源，那么也请在这里分享它们！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:32:00.910

看看[http://iverilog.icarus.com](http://iverilog.icarus.com)这是一个免费的模拟器和综合工具。任何文本编辑器都可以。很多人喜欢 vi，但你也使用 sublime text 之类的东西。

编辑：如果你想要一个完整的 IDE，有[Xilinx WebPack](http://www.xilinx.com/products/design-tools/ise-design-suite/ise-webpack.htm)。它包括一个模拟器。它是免费的（就像免费啤酒一样），但与完整的赛灵思软件相比是有限的。但足以让你开始。如果您的大学正在使用相同的软件，您可能应该尝试一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T13:31:35.967

有专业的工具提供商，例如[Modelsim](http://model.com/)和[Aldec](http://www.aldec.com/)，他们提供了类似 IDE 的东西 - 具有以下功能：

*   源代码编辑器，您可以在其中设置断点。
*   运行编译过程
*   运行模拟
*   查看波形和其他输出

对于 Eclipse，我什么都不知道——然后[RossRogers 的](https://stackoverflow.com/users/20712/ross-rogers)评论将我指向[DVT Eclipse——](http://www.dvteclipse.com/)尽管我们都没有使用过它 :)

就个人而言，我使用 Emacs，一个 makefile，然后“手动”运行模拟器

# ios - 使用分组样式时如何计算 UITableView 中单元格的大小？

> ID：14768493
> 
> 赞同：1
> 
> 时间：2013-02-08T08:28:41.520
> 
> 标签：ios, cocoa-touch, uitableview

我正在开发一个通用应用程序，而我正在开发的视图对于 iPhone 和 iPad 来说是通用的。我显示了一个 UITableView （具有分组样式）并制作了一个自定义单元格（以编程方式 - 没有笔尖）。我在某处（无法再找到位置）读到边距为表格的 1/16 * 宽度。所以我将自定义单元格的宽度设置为 14/16 * 表格的宽度，但这并不好。或者至少它不能很好地工作。

有人可以确认或无效边距是表格的 1/16 * 宽度吗？

在不是 1/16 的情况下，如何计算该大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:10:20.373

iPhone 纵向边距：10 像素
iPhone 横向或 iPad 边距：
- 如果表格宽度<400，则为 10 像素
- 否则边距 = 表格宽度的 6%，最小为 31 像素，最大为 45 像素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:43:57.357

我相信默认的水平边距是 10 像素。但是您可以使用自动调整大小，例如 UIViewAutoresizingFlexibleWidth。查看 UIView 文档。

# c# - 是否可以将一个进度条用于多个可变长度的进程？

> ID：14768495
> 
> 赞同：0
> 
> 时间：2013-02-08T08:28:50.567
> 
> 标签：c#, winforms, visual-studio-2010

在我目前的情况下，我有一个 winform 应用程序 dat 为用户选择的几种数据类型生成随机数据。用户还可以选择必须生成多少行，对于生成我使用在 button_click 方法中调用的几个函数。行数和每行列数的长度是可变的。现在我的问题是可以为整个进度制作一个进度条吗？这是我自己制作的第一个 C# 项目，我已经找到了有关后台工作人员的信息，但如果我的问题可能，我找不到信息。希望somewhane可以帮助我，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:34:31.730

那么你可以知道有多少行和列。然后将 progressBar1.Maximum 设置为行 + 列，当后台工作程序中的程序执行一列时，您增加 progressBar1.Value += 1; . 所有这些都必须在 backgroundWorker 中，这样 progressBar 才能顺利运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:35:45.073

[ProgressBar](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.value%28v=vs.100%29.aspx)有一个名为“Value”的成员。如果您知道将创建多少个项目，则可以相应地进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:40:31.157

如果我正确理解您的问题，是的，您可以`ProgressBar`从代码的不同部分更新您的问题的值。

如果您想为不同的操作分配不同的值，只需制作一种方法即可。例如：

假设`myProgressBar.Maximum = rowCount + columnCount;`

```
public void UpdateProgressBar(int i)
{
   if(myProgressBar.Value < myProgressBar.Maximum)
   {
      if(myProgressBar + i > myProgressBar.Maximum)
          myProgressBar.Value = myProgressBar.Maximum;
      else myProgressBar.Value += i;
   }
   myProgressBar.Update();
} 
```

同样，您可以在您希望反映在您的 中的任何事件中调用类似的代码`ProgressBar`，例如添加或删除行或按钮单击。

查看一些关于 的教程`BackGroundWorker`，这将使您的 UI 保持响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T09:04:55.087

你可以在没有后台工作人员的情况下做到这一点。使用进度条的最小值、最大值和值属性来实现这一点。将 progressbar1.Maximum 设置为行的计数和行内循环，将值增加 1。

```
progressBar1.Minimum = 1;
progressBar1.Maximum = Rows.Count;

progressBar1.Value = 1;
for (int i = 1; i <= Row.Count; i++)
{
  progressBar1.Value = progressBar1.Value + 1;
  ...
  ... do your code
  ... 
```

# php - 我无法使用 PHP 邮件功能发送邮件...我收到错误消息

> ID：14768499
> 
> 赞同：0
> 
> 时间：2013-02-08T08:29:12.407
> 
> 标签：php

我无法使用 PHP mail() 函数发送邮件。我收到一条错误消息。它有什么问题？请帮我...

`Warning: mail() [function.mail]: Failed to connect to mailserver at "localhost" port 25, verify your "SMTP" and "smtp_port" setting in php.ini or use ini_set() in E:\xampp\htdocs\SimpleEmail.php on line 14`

`Email could not be sent.`

```
 <html>
          <head>
            <title>Simple Send Mail Form</title>
        </head>
         <body>
          <h1>Mail Form</h1>
        <form name="form1" method="post" action="SimpleEmail.php">
       <table>
         <tr><td><b>To</b></td><td><input type="text" name="mailto" size="35"></td></tr>
            <tr><td><b>Subject</b></td>
      <td><input type="text" name="mailsubject" size="35"></td></tr>
        <tr><td><b>Message</b></td>
      <td><textarea name="mailbody" cols="50" rows="7"></textarea></td>
      </tr>
         <tr><td colspan="2">
        <input type="submit" name="Submit" value="Send">
      </td>
        </tr>
        </table>
   </form>
      </body>
     </html>  

      //SimpleEmail.php//

         <?php
      if (empty ($mailto) ) {
    die ( "Recipient is blank! ") ;
    }

if (empty ($mailsubject) ){
   $mailsubject=" " ;
}

if (empty ($mailbody) ) {
   $mailbody=" " ; 
}

$result = mail ($mailto, $mailsubject, $mailbody) ;

if ($result) {
   echo "Email sent successfully!" ;
}else{
   echo "Email could not be sent." ;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:56:55.253

您可以按照本教程中的给定步骤尝试在本地主机中测试您的 PHP 邮件脚本。 [http://blogs.bigfish.tv/adam/2009/12/03/setup-a-testing-mail-server-using-php-on-mac-os-x/](http://blogs.bigfish.tv/adam/2009/12/03/setup-a-testing-mail-server-using-php-on-mac-os-x/)

愿它对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:33:42.997

不用担心...在我们的本地服务器中，其中许多不基于 SMTP（简单邮件传输协议）运行，因此我们不会发送邮件，但某些服务器可能会在其上运行，如果您配置为 SMTP 协议端口，那么您可以也送他们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:32:55.780

该错误信息意味着您需要安装 SMTP 服务器才能让邮件功能正常工作。
由于您使用 xampp，您可以配置 XAMPP 附带的 Mercury Server ..
一旦您安装并配置它，邮件功能将正常工作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:31:49.173

您没有运行自己的邮件服务器，也没有配置为使用其他人的邮件服务器。那么邮件会去哪里呢？与系统管理员或托管服务提供商交谈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T09:36:33.473

使用以下代码发送电子邮件

```
ini_set("SMTP","aspmx.l.google.com");
$to = "yourmailid@gmail.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "toemail@gmail.com";
$headers  = 'From: '.$from. "\r\n" .
            'Reply-To: '.$from. "\r\n" .
            'MIME-Version: 1.0' . "\r\n" .
            'Content-type: text/html; charset=iso-8859-1' . "\r\n" .
            'X-Mailer: PHP/' . phpversion();
if(mail($to,$subject,$message,$headers)) echo "Mail Sent."; 
```

# javascript - 谷歌饼图点击问题

> ID：14768507
> 
> 赞同：0
> 
> 时间：2013-02-08T08:29:36.660
> 
> 标签：javascript, jquery, google-visualization

我正在创建这样的谷歌饼图

```
 var totrefuelList=[{"veId":220,"trName":"Bus 04","totamt":2,"toqt":10.0},{"veId":384,"trName":"KL 20 B 3966","totamt":0,"toqt":430.00},{"veId":385,"trName":"KL 20 7511","totamt":0,"toqt":0.0},{"veId":386,"trName":"KL 20 D 7426","totamt":0,"toqt":0.0},{"veId":387,"trName":"KL 20 C 3985","totamt":0,"toqt":190.0},{"veId":388,"trName":"KL 01 AM 8356","totamt":0,"toqt":90.0},{"veId":389,"trName":"KL 01 C 8247","totamt":0,"toqt":234.0},{"veId":390,"trName":"KL 01 X 4435","totamt":0,"toqt":678.0},{"veId":391,"trName":"KL","totamt":768,"toqt":0.0},{"veId":392,"trName":"KL 20 B 7544","totamt":0,"toqt":67.0},{"veId":393,"trName":"KL","totamt":0,"toqt":0.0},{"veId":394,"trName":"KL","totamt":0,"toqt":460.0},{"veId":395,"trName":"KL","totamt":0,"toqt":56.0},{"veId":396,"trName":"KL","totamt":0,"toqt":78.0},{"veId":397,"trName":"KL","totamt":0,"toqt":890.0},{"veId":399,"trName":"KL","totamt":70,"toqt":88.0},{"veId":400,"trName":"KL 20 B 5478","totamt":0,"toqt":768.0},{"veId":401,"trName":"KL 01 D 6795","totamt":0,"toqt":760.0},{"veId":402,"trName":"KL","totamt":0,"toqt":0.0},{"veId":403,"trName":"KL 20 B 3968","totamt":0,"toqt":776.0},{"veId":398,"trName":"KL","totamt":1,"toqt":329.72972972972974}];
 function drawchartfromRefuel()
   {
    alert("RefuelLength"+totrefuelList.length);
    alert("veId:"+totrefuelList[0].veId);
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Task');
    data.addColumn('number', '');
    data.addRows(totrefuelList.length);
      for (var i=0;i<totrefuelList.length;i++)
        {
          data.setValue(i, 0, totrefuelList[i].trName);
          data.setValue(i, 1, totrefuelList[i].toqt);
        }

    var options = {
              title: 'Refuel Trend',
              height:'500',
              width:'400',
              backgroundColor: { fill:'transparent' }
            };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
       google.visualization.events.addListener(chart, 'select', selectHandler);
    chart.draw(data, options);

   }

   function selectHandler(e) {
    var selection = chart1.getSelection();
    var item = selection[0];
    alert( item.row)

} 
```

点击饼图中的一个项目，我想得到相应的行号。我该怎么做。我试过了，但是点击它会卡住。如何纠正它？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:37:31.383

尝试这个：

```
google.visualization.events.addListener(chart, 'select', function(e) {
    var selection = chart.getSelection();
    console.log("selected row:", selection[0].row, data.getRow(selection[0].row));
}); 
```

# python - 带有 model_utils.Choices 的自定义模板

> ID：14768508
> 
> 赞同：0
> 
> 时间：2013-02-08T08:29:46.643
> 
> 标签：python, django, django-models, django-templates

我有一个使用 model_utils.Choices 的 CharField 模型：

```
from model_utils import Choices

class UserTestStatistics(models.Model):
TEST_STATUSES = Choices(
    ('NR', 'not_readed'),('NP', 'not_passed'),
    ('FL', 'failed'), ('PD', 'passed'),        
)
status = models.CharField(choices=TEST_STATUSES, max_length=2) 
```

在模板中，我想根据状态字段中的值添加自定义 css 类。我试过这个：

```
{% if lecture.status == 'NP' %}
    label-warning
{% endif %} 
```

这没有用。然后我尝试了这个：

```
context['statuses'] = UserTestStatistics.TEST_STATUSES

{% elif lecture.status == statuses.not_passed %}
    label-warning
{% endif %} 
```

它也失败了。这就是为什么：

```
>>> s = UserTestStatistics.objects.get(lecture=l)
>>> type(s.status)
<type 'unicode'>
>>> type(UserTestStatistics.TEST_STATUSES.passed)
<type 'str'> 
```

快速而肮脏的解决方案是添加自定义模板标签，将两者都转换为 uncode 然后进行比较，但对我来说，它看起来好像我错了。

任何人都可以请建议更漂亮的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-27T18:40:22.873

我更喜欢拥有属性而不是在模板上使用硬编码字符串的方法。

```
@property
def is_not_readed(self):
    return self.status == UserTestStatistics.TEST_STATUSES.STATUS.NR 
```

因此，在您的模板中：

```
{% if lecture.is_not_readed %}
    label-warning
{% endif %} 
```

或者，您可以将 TEST_STATUSES 作为

```
Choices('draft', 'published')
class UserTestStatistics(models.Model):
    TEST_STATUSES = Choices('not_readed', 'not_passed', 'failed', 'passed')
... 
```

所以，在模板中：

```
{% if lecture.status = lecture.TEST_STATUSES.not_readed %}
    label-warning
{% endif %} 
```

请记住，就重构和易读性而言，在模板上使用魔术“字符串”并不是很好的想法。

我希望这可以帮助一些人。或者，如果您有不同的想法/方法，请让每个人都知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:35:12.223

```
 def __unicode__(self):
    return self.status 
```

# git - 无法签出 git 子模块路径

> ID：14768509
> 
> 赞同：37
> 
> 时间：2013-02-08T08:29:53.443
> 
> 标签：git, git-submodules

使用 git 子模块时遇到问题。

每当我从上游存储库收到新的子模块引用时，执行`git submodule update`都会给出以下结果：

```
fatal: reference is not a tree: dd208d46ecdd1ac0d2b2594a610fe4c9150fece1
Unable to checkout 'dd208d46ecdd1ac0d2b2594a610fe4c9150fece1' in submodule path 'submodule/path' 
```

需要注意的是，子模块有几个遥控器，其中上游遥控器应该用于更新子模块引用树。我猜我的问题在那里，但我不确定。

我的设置如下：

**项目**

遥控器：

1.  `origin`（我的 git 叉子）
2.  `upstream`（项目回购）

子模块“模块”，有遥控器：

1.  `origin`（我的 git 叉子）
2.  `upstream`（项目回购）

有谁知道是什么导致了我的问题？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-08T16:19:12.210

这样做时`git submodule update`，git 会尝试检查保存在超级项目中的提交/树（在您的示例中，具有提交 id 的那个`dd208d4...`）

我认为您收到错误是因为在子模块中不存在这样的对象。你必须确保它在那里。通常这意味着您必须先从远程获取/拉取它。

可能你必须

```
git submodule foreach git fetch
git submodule update 
```

或许

```
git fetch --recurse-submodules 
```

假设子模块已配置，以便它可以从远程获取丢失的提交`origin`。最后，*你*必须知道，你可以从哪里获取丢失的提交并且你必须得到它。

您可以`dd208d4...`通过执行以下操作来检查是否有：

```
cd ./module
git log dd208d46ecdd1ac0d2b2594a610fe4c9150fece1
git cat-file -p dd208d46ecdd1ac0d2b2594a610fe4c9150fece1
git ls-tree dd208d46ecdd1ac0d2b2594a610fe4c9150fece1 
```

这种问题的一个可能原因是，从超级模块发布新提交的人没有从子模块发布必要的提交。他必须首先从子模块发布提交。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-22T12:16:48.010

**确保子模块被推送**

```
cd submodule-dir
git push 
```

就我而言，我有：

*   致力于子模块
*   不推
*   使用更新的子模块提交给父级
*   推了父母

所以难怪找不到。

然后，如果您使用的是 GitHub 等 Web 界面，您还可以转到子模块存储库网页，并仔细检查您需要的提交是否显示在那里。

**`push.recurseSubmodules on-demand`**

可以通过以下方式进一步自动化推送：

```
git push --recurse-submodules=on-demand 
```

它还根据需要推送子模块，或者从 2.7 开始：

```
git config push.recurseSubmodules on-demand
git push 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-29T13:26:35.943

我遇到了同样的问题，我解决了为父项目添加新提交并推送所有![从您的模块检查子项目提交和提交](../Images/3b3ec2f7ff5902c8586c1712063dcc4d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-27T16:38:18.013

我的问题是，在`cat .gitmodules`我的回购中，我为子模块的回购指向了错误的遥控器（我最初用原始遥控器克隆了它，但后来切换到它的一个分支；`gitmodules`文件从未更新以反映更改） .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-08T18:02:55.923

我的问题是我在其 build.gradle 文件中的子模块中有未提交的更改（我认为这些更改是自动更改的）。他们出现在`git diff`. 我只是`git checkout .`将子模块 repos 重置为没有更改，然后`git submodule update`工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-05T19:32:12.463

当我忘记在我的一个子模块中推送更改时才看到这个问题

确保推送更改

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-21T05:00:08.707

另一种方法可能是，没有命令行 git 选项，而是手动执行此操作。这种情况主要发生在子模块路径已被移动/替换（但不正确）时，因此仍指向本地结帐存储库中的旧引用。

1）找到存储库和子模块

```
ls -la .git/modules
   rm -f .git/modules/<module-with-issue> 
```

2) 移除旧的本地子模块配置

```
 gedit .git/config 
```

（此处删除子模块 url 条目）

它看起来像这样；

```
 *[submodule "module-with-issue"]
       url = ...* 
```

3) 现在，重新获取和更新子模块 git fetch git submodule update --recursive --init

**注意：** *在尝试子模块更新之前，可能还必须删除存储库中本地签出的子模块文件夹。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-27T08:31:11.833

`git rm --cached <submodule-directory>`在 gitlab 上添加对我有帮助：

```
.prepare_deploy: &prepare_deploy
  before_script:
    - bundle install -j $(nproc) --path vendor
    - which ssh-agent || (apt-get update -y && apt-get install openssh-client -y)
    - mkdir -p ~/.ssh
    - chmod 700 ~/.ssh
    - eval $(ssh-agent -s)
    - echo -e "Host *\n\tStrictHostKeyChecking no\n\n" > ~/.ssh/config
    - (echo "$SSH_PRIVATE_KEY" | base64 --decode) > ~/.ssh/id_rsa
    - chmod 600 ~/.ssh/id_rsa
    - git rm --cached <submodule-directory>
    - git submodule sync --recursive
    - git submodule update --init --recursive 
```

# android - Edittext焦点转到屏幕上可见edittext中的最后一个edittext

> ID：14768510
> 
> 赞同：0
> 
> 时间：2013-02-08T08:29:58.967
> 
> 标签：android, android-widget

我有多个`LinearLayout`和两个`EditText`这样，在`EditText`我使用过的每个`android:nextFocusDown`中，当用户使用软键盘上的下一个按钮时，焦点会`EditText`在同一行上的第二个。

一切正常，但是当屏幕滚动时，焦点会自动转到屏幕上`EditText`所有可见的最后一个`EditText`。

请给出你的建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:10:18.987

`<requestFocus/>`在第一个 EditText 框下方使用。

# android - 两个活动之间的Android Flipboard动画

> ID：14768520
> 
> 赞同：3
> 
> 时间：2013-02-08T08:30:54.483
> 
> 标签：android, animation

如何在两个活动之间为 Flipboard 动画制作动画？

我需要动画看起来像[这样](http://www.youtube.com/watch?v=w1fTI7oYfbI)。

# c++ - Dictionary access optimization describen - does it take place anywhere?

> ID：14768521
> 
> 赞同：2
> 
> 时间：2013-02-08T08:30:55.013
> 
> 标签：c++, performance, optimization, dictionary, hashtable

Most of us compiler nerds have read Google's paper on V8 object property access where the resulting technique is just (in-)directly accessing an array member. My question is:

Does anyone optimize the dictionary access the same way (assigning a fixed index to a (compile time) fixed key)? It doesn't have to be applicable everywhere but perhaps when it's compilation-unit wide? Or the dictionary is readonly? Or between the compilation units at a pass? Whatever, maybe even unrolling the dict. access or inlineing it using a *fixed array index instead of a key*.

I do know how constant time lookup dictionaries work, but maybe the proposed optimization takes place to further boost the compiled languages (e.g. C++) where the hardware is coached to deal with V-table-like structures at runtime.

Please, if you know any of that, give me a hunch. Thank you much!

TL;DR I want to know of an existing way to optimize *dictionary* access, (e.g. accessing `std::map` via array index), not of internal struct/object arrangment in a particular language

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:22:57.637

**Doubtful**

While this could in theory be possible (being that `std::map` implementation is part of the Standard library) I know of no C++ compiler that performs such a trick.

And they do not really have to: if you want array indexing in C++, you pick an array and index it (possibly with named constants).

# android - SurfaceView 始终显示在屏幕上

> ID：14768522
> 
> 赞同：2
> 
> 时间：2013-02-08T08:30:58.643
> 
> 标签：android, surfaceview

是否可以在 Android 中创建一个始终显示在顶部的 SurfaceView，无论正在显示什么应用程序或活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:32:48.983

这不是关于表面视图，而是关于窗口类型。您要创建的窗口是系统类型的窗口。

# android - 如何在 Eclipse 模拟器中从 DDMS 重命名文件夹？

> ID：14768528
> 
> 赞同：0
> 
> 时间：2013-02-08T08:31:21.163
> 
> 标签：android, eclipse, ddms

我想从 DDMS 重命名文件夹。DDMS 仅支持删除文件和空文件夹。我想将文件夹的名称更改`/mnt/sdcard/NewFolder`为`/mnt/sdcard/NewFolder2`. 有没有办法重命名文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:31:21.163

在 cmd 中使用以下命令：

```
C:\> adb shell
$ cd /mnt/sdcard
$ mv NewFolder NewFolder2 
```

# java - 如何使用ini4j编写ini文件

> ID：14768533
> 
> 赞同：1
> 
> 时间：2013-02-08T08:31:41.587
> 
> 标签：java, api, stream, output, ini4j

我正在使用 ini4j API [http://ini4j.sourceforge.net/](http://ini4j.sourceforge.net/)

到目前为止，我能够使用填充所需字段的 JFileChooser 从 ini 文件中读取；我需要能够获取这些文本字段的内容（作为字符串）并使用 API 将它们写入 ini 文件。

我到目前为止的代码是：

```
public void writeIniFile() throws IOException{
    JFileChooser saveinijfc = new JFileChooser(currdir);
    int savereturnval = saveinijfc.showSaveDialog(null);
    if (savereturnval == JFileChooser.APPROVE_OPTION){
        File inioutfile = new File(saveinijfc.getSelectedFile(), "");
        Wini ini = new Wini(new File(inioutfile.getAbsolutePath()));

            // [GLOBAL]
            ini.put("GLOBAL", "clientname", getClientnameText());

            // [PREBACKUP]
            ini.put("PREBACKUP", "prebackup-enabled", String.valueOf(getPrebackupenabledSelection()));

            // [OPENVPN]
            ini.put("OPENVPN", "ovpnprofilename", getOvpnprofileText());

            ini.put("OPENVPN", "remotegatewayip", getOpenvpngatewayipText());

            // [NETWORK DRIVE]
            ini.put("NETWORK DRIVE", "drive-letter", getNetworkdriveletterText());

            ini.put("NETWORK DRIVE", "ipofshare", getIpofshareText());

            ini.put("NETWORK DRIVE", "sharename", getSharenameText());

            ini.put("NETWORK DRIVE", "shareusername", getShareusernameText());

            ini.put("NETWORK DRIVE", "sharepassword", getSharepasswordText());

            // [REGISTRY BACKUP]
            ini.put("REGISTRY BACKUP", "registrybackup-enabled", String.valueOf(getRegistrybackupenabledSelection()));

            ini.put("REGISTRY BACKUP", "hklm-software", String.valueOf(getHklmsoftwareenabledSelection()));

            ini.put("REGISTRY BACKUP", "reg-custompath-enabled", getRegistrycustompathenabledSelection());

            ini.put("REGISTRY BACKUP", "reg-custom-path", getRegistrycustompathText());

            // [EMAIL]
            ini.put("EMAIL", "emailenabled", String.valueOf(getEmailenabledSelection()));

            ini.put("EMAIL", "gmailusername", getGmailusernameText());

            ini.put("EMAIL", "gmailpassword", getGmailpasswordText());

            ini.put("EMAIL", "clientemail", getClientemailText());

            // STORE INI FILE
            ini.store();
    }

} 
```

我怀疑我需要创建一些输出流来编写文件，我正在关注本教程[http://ini4j.sourceforge.net/tutorial/OneMinuteTutorial.java.html](http://ini4j.sourceforge.net/tutorial/OneMinuteTutorial.java.html)以供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:52:31.880

为什么不直接打电话：

```
File inioutfile = new File(saveinijfc.getSelectedFile(), "");
//Insert here.
if(!inioutfile.exists()) {
    if(!inioutfile.createNewFile()) return;
}
Wini ini = new Wini(new File(inioutfile.getAbsolutePath())); 
```

这应该确保该文件确实存在，如果不存在，它将成功，如果无法成功，它将退出。

# python - django - 基本模板中的静态文件

> ID：14768534
> 
> 赞同：9
> 
> 时间：2013-02-08T08:31:45.640
> 
> 标签：python, html, css, django

如何使基础模板使用静态文件，并使继承基础模板的其他模板使用相同的静态文件？

正如我在 django 文档中所读到的，它写了如何使用用于特定应用程序的静态文件。但我似乎无法找到一种方法让它使用来自外部应用程序的静态文件。

给定的应用程序继承一切，但静态文件。

我的设置.py：

```
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.

)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)
INSTALLED_APPS = (    
'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'south',
    'myproject.apps.finance',
    'myproject.apps.base',
    'django.contrib.admin',
  )

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.contrib.auth.context_processors.auth',
    'django.contrib.messages.context_processors.messages',
) 
```

这是我当前的主页设置：

主页网址：

```
from django.conf.urls import patterns, include, url
from myproject.views import hello

urlpatterns = patterns('',
   ('', hello),
) 
```

主页视图：

```
from django.shortcuts import render_to_response
from django.http import Http404, HttpResponse
import datetime

def hello(request):
    hello = "Hello World"
    return render_to_response('home/home.html', {'hello': hello}) 
```

主页模板：

```
{% extends "base/base.html" %}

{% block title %} My Homepage {% endblock %}
{% block content %}
<p>I say {{ hello }}</p>

{% endblock %} 
```

基本模板：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <link rel="stylesheet" href="{{ STATIC_URL }}/css/style.css">
    <title>{% block title %}{% endblock %}</title>
</head>
<body>
    <h1>My Personal Finance Site</h1>
    {% block content %}{% endblock %}
    {% block footer %}
    <section class="divider1">
    <p>Thanks for visiting my site.</p>
    <p>All rights reserved</p>
    </section>
    {% endblock %}
</body>
</html> 
```

我的 CSS 文件位于名为 base 的空项目中。但我认为可能有更好的方法来使用给定应用程序之外的静态文件。

那么将基本模板与 css 文件链接以制作其他模板的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T08:39:04.010

**base.html**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    {% block css %}
    <link rel="stylesheet" href="{{ STATIC_URL }}/css/style.css">
    {% endblock %}
    <title>{% block title %}{% endblock %}</title>
</head>
<body>
    <h1>My Personal Finance Site</h1>
    {% block content %}{% endblock %}
    {% block footer %}
    <section class="divider1">
    <p>Thanks for visiting my site.</p>
    <p>All rights reserved</p>
    </section>
    {% endblock %}
</body>
</html> 
```

**page.html**

```
{% extends "base/base.html" %}

{% block title %} My Homepage {% endblock %}

{% block css %}{{block.super}}
//put css here
{% endblock %}

{% block content %}
<p>I say {{ hello }}</p>

{% endblock %} 
```

**网址.py**

```
from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

from project_name import settings

admin.autodiscover()

urlpatterns = patterns('',
   .......
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

urlpatterns += staticfiles_urlpatterns() 
```

**设置.py**

```
import os
import sys

..........................

SITE_ROOT = os.path.dirname(__file__)
sys.path.insert(0, os.path.join(SITE_ROOT, 'app_name'))

MEDIA_ROOT = os.path.join(SITE_ROOT, 'media')
MEDIA_URL = '/media/'

STATIC_ROOT = os.path.join(SITE_ROOT, 'static')
STATIC_URL = '/static/'

STATICFILES_DIRS = (
   # Put strings here, like "/home/html/static" or "C:/www/django/static".
   # Always use forward slashes, even on Windows.
   # Don't forget to use absolute paths, not relative paths.
   os.path.join(SITE_ROOT, 'staticfiles'),
)

TEMPLATE_DIRS = (
   # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
   # Always use forward slashes, even on Windows.
   # Don't forget to use absolute paths, not relative paths.
   os.path.join(SITE_ROOT, 'templates'),
)

.................... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-13T16:26:52.957

确保模板标签“ `{% load static %}`”位于 .html 文件的顶部。这将加载您的静态文件夹。

样本

```
{% load static %}
{% extends "base/base.html" %}

{% block title %} My Homepage {% endblock %}

{% block css %}{{block.super}}
//put css here
{% endblock %}

{% block content %}
<p>I say {{ hello }}</p>
{% endblock %} 
```

# ruby-on-rails - 使用 Thor 删除文件中的一行

> ID：14768535
> 
> 赞同：3
> 
> 时间：2013-02-08T08:31:47.903
> 
> 标签：ruby-on-rails, thor

是否可以使用 Thor 操作从文件中删除一行文本。例如，我想删除 ruby​​ 评论。到目前为止，我发现了 2 个操作：`comment_lines`- 注释掉行，以及`gsub_file`

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T00:24:11.413

这对删除评论不起作用吗？

```
gsub_file(filename, /#.*$/, '') 
```

编辑：

如果您想删除评论并删除仅包含评论信息的行，您可以尝试：

```
gsub_file(filename, /\S*#.*$/, '')   # removes partial comments
gsub_file(filename, /^\s*#.*\n/, '') # removes full line comments 
```

# c# - 检查位置是否出现多个子字符串的最快方法

> ID：14768537
> 
> 赞同：2
> 
> 时间：2013-02-08T08:31:51.860
> 
> 标签：c#, .net, string

.NET中有一个功能 `public static TSource ElementAt<TSource>(this IEnumerable<TSource> source, int index);`

有没有一种简单的方法可以使用类似的函数来找出子字符串是否出现在某个位置（索引）？

我是说：

```
public static bool ElementAtPosContains(this string, int index, string[] valuesToCheck)
{ ... }

string test1 = "abcd5f";
string[] substrings = {"1" , "2", "3", "4", "5"};
if (test.ElementAtPosContains(4, substrings))
 {
    DoSomething();
 } 
```

如果字符串中的 4 位置有 1、2、3、4、5 - 返回 true。我可以做这件事：

```
 public static bool ElementAtPosContains(this string inputStr, int index, string[] valuesToCheck)
   { 
     if (valuesToCheck == null)
       return false;

     foreach (string value in valuesToCheck)
     {
       if (inputStr.Substring(index, value.Length) == value)
         return true;
     }
     return false;
    } 
```

但这似乎不是很有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:42:08.247

这似乎更聪明：

```
public static bool ElementAtPosContains(this string inputStr, int index, IList<String> valuesToCheck)
{
    if (valuesToCheck == null || inputStr.Length < index)
        return false;

    return valuesToCheck.Any(s => s.Length + index <= inputStr.Length 
                             &&   inputStr.IndexOf(s, index) == index);
} 
```

[**演示**](http://ideone.com/VKyT4l)

虽然我认为你正在做过早的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:44:53.667

试试这个：

```
 public static bool ElementAtPosContains(this string inputStr, int index, string[] valuesToCheck)
    {
        if (valuesToCheck == null || valuesToCheck.Length == 0 || inputStr.Length < index)
            return false;

        return valuesToCheck.Any(sub => string.CompareOrdinal(inputStr, index, sub, 0, sub.Length) == 0);
    } 
```

`CompareOrdinal`比较总是区分大小写，并且不考虑文化。这使他们比平时`Compare`或`=`操作员更快。如果您不需要区分区域性的比较或不区分大小写的比较，则此方法应该可以更快地完成工作，因为它比较字符串中字符的数值。

[**演示**](http://ideone.com/aOhKym)

# css - 修复在 Firefox 中的活动？

> ID：14768541
> 
> 赞同：0
> 
> 时间：2013-02-08T08:32:06.160
> 
> 标签：css, firefox

在 Firefox 中遇到一个小问题：http: [//jsfiddle.net/3jmeS/](http://jsfiddle.net/3jmeS/)，当单击链接`active`样式时，所有元素都会触发，但我只需要当前。有解决办法吗？

HTML：

```
<nav>
    <div id="left-nav">
        <ul>
            <li class="active">
                <a href="#">Dashboard</a>
            </li>
            <li>
                <a href="#">Dashboard</a>
            </li>
            <li>
                <a href="#">Dashboard</a>
            </li>
            <li>
                <a href="#">Dashboard</a>
            </li>
            <li>
                <a href="#">Dashboard</a>
            </li>
        </ul>
    </div>
</nav> 
```

CSS：

```
#left-nav {
    float: left;
    font-family: Tahoma;
    font-size: 13px;
    height: 38px;
    position: relative;
    width: 600px;
    min-width: 600px;
}

#left-nav li{
    display: inline-block;
    padding: 0 12px;
}

#left-nav li a {
    color: #fff;
    display: block;
    line-height: 35px;
    padding: 0 11px;
}

#left-nav li a:active{
    position: relative;
    top:1px;
}

#left-nav li.active a{
    display: block;
} 
```

# java - 更改屏幕方向时重置操作

> ID：14768542
> 
> 赞同：3
> 
> 时间：2013-02-08T08:32:07.217
> 
> 标签：java, android, layout, action, screen-orientation

我有一个带有一些片段等的小应用程序。现在每次我改变屏幕的方向时，动作都会重新启动，这意味着如果你转动设备，输入就会丢失。我怎样才能防止这种情况？此外，我想保留更改方向的可能性，并且应用程序随之更改，我只想保留内容。

魔法发生在 MainActivity.java 中，显示在 SearchFragment.xml

MainActivity.java：

```
package mypackage;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Toast;
import android.view.View;
import android.view.inputmethod.InputMethodManager;

public class MainActivity extends Activity {

public final static String EXTRA_MESSAGE = "mypackage.MESSAGE";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //addListenerOnSpinnerItemSelection();

 // lädt die ActionBar
        ActionBar actionbar = getActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionbar.setDisplayShowHomeEnabled(true);
        actionbar.setDisplayShowTitleEnabled(true);
        actionbar.setDisplayShowCustomEnabled(false);

        // lädt die Tabs in die Actionbar
        String search = getString(R.string.search_fragment);
        String user = getString(R.string.user_fragment);
        String recent = getString(R.string.recent_fragment);

        ActionBar.Tab TabA = actionbar.newTab().setText(search);
        ActionBar.Tab TabB = actionbar.newTab().setText(user);
        ActionBar.Tab TabC = actionbar.newTab().setText(recent);

        // erstellt neue Fragmente
        Fragment fragmentA = new SearchFragment();
        Fragment fragmentB = new UserFragment();
        Fragment fragmentC = new UpdateFragment();

        // Listener werden angelegt
        TabA.setTabListener(new MyTabsListener(fragmentA));
        TabB.setTabListener(new MyTabsListener(fragmentB));
        TabC.setTabListener(new MyTabsListener(fragmentC));

        // Tabs werden in die actionbar geladen
        actionbar.addTab(TabA);
        actionbar.addTab(TabB);
        actionbar.addTab(TabC);

}

public void sendMessage(View view) 
{

    Spinner mySpinner = (Spinner) findViewById(R.id.criterion);
    String text = mySpinner.getSelectedItem().toString();

    //manual initialation of array - later to be created by XML-Parser
    String[][] array = {{"Opel", "Astra", "2010", "120 PS", "12 l/100km", "Blau, Rot, Grün, Braun", "File 1", "File 2"}, 
                        {"Opel", "Corsa", "2012", "80 PS", "8 l/100km", "Grün, Rot, Blau, Gelb, Magenta", "File 1", "File 2", "File 3"},
                        {"Opel","Vectra", "1980", "200 PS" ,"20 l/100km", "Braun", "file 1"},
                        {"Opel", "Astra", "2010", "120 PS", "12 l/100km", "Blau, Rot, Grün, Braun", "File 1", "File 2"}, 
                        {"Opel", "Corsa", "2012", "80 PS", "8 l/100km", "Grün, Rot, Blau, Gelb, Magenta", "File 1", "File 2", "File 3"},
                        {"Opel","Vectra", "1980", "200 PS" ,"20 l/100km", "Braun", "file 1"}    };

//        Intent intent = new Intent(this, DisplayMessageActivity.class);

    EditText editText = (EditText) findViewById(R.id.edit_message);

    String output = "";

    //add Elements of Array on output string
    for(int i = 0; i <array.length; i++)
    {
        int count = 0;

        //Standard values
        for(int j = 0; j<6; j++)
        {
            output = output + array[i][j];
            if(count<5)
            {
                output = output + " - ";
            }
            count++;
        }

        output = output + "\n";

        int count2 = 6;

        //User generated values with diferent length
        for(int k = 6; k <array[i].length; k++)
        {
            output = output + array[i][k];
            if(count2<array[i].length-1)
            {
                output = output + " - ";
            }
            count2++;
        }

        output = output + "\n\n";
    }

    String message = getText(R.string.search_text)+" "+text+": "+ editText.getText().toString() + "\n\n"+output;

   //display results 
   TextView viewText1 = (TextView) findViewById(R.id.showResults);
   viewText1.setText(message);

   //Clear EditText field
   editText.setText("");

   //Hides Softkeyboard on "Send" Button
   InputMethodManager imm = (InputMethodManager)getSystemService(
              Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(editText.getWindowToken(), 0);

//        intent.putExtra(EXTRA_MESSAGE, message);
//        startActivity(intent);

}

class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // wenn das Tab erneut gewŠhlt wird.
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }

}

@Override //creates the action bar menu using the text information from strings.xml and the method menu() from R.java
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);
    return true; //number of points in overflow menu or sth like this

}

public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
    case R.id.menu_settings:
    {
        Intent intent = new Intent(this, Settings.class);
      startActivity(intent);
      break;
    }
    case R.id.about_section:
    {
        Intent intent = new Intent(this, About.class);
        startActivity(intent);
        break;
    }
    case R.id.faq_section:
    {
        Intent intent = new Intent(this, FAQ.class);
        startActivity(intent);
        break;
    }
    case R.id.search_section:
    {
        Intent intent = new Intent(this, MainActivity.class);
        startActivity(intent);
        break;
    }
    }

  return true;
}
} 
```

搜索片段.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_gravity="center"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/welcome" />
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="70dp"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/edit_message"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:hint="@string/edit_message" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp" >

        <Spinner
            android:id="@+id/criterion"
            android:layout_width="117dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="5dp"
            android:layout_marginLeft="5dp"
            android:layout_weight="1"
            android:entries="@array/array"
            android:prompt="@string/prompt" />

        <Button
            android:id="@+id/btnSubmit"
            android:layout_width="136dp"
            android:layout_marginRight="5dp"
            android:layout_marginLeft="5dp"
            android:layout_height="match_parent"
            android:layout_gravity="clip_vertical"
            android:onClick="sendMessage"
            android:text="@string/button_send"
            android:background="@drawable/android" />
    </LinearLayout>

    <TextView
        android:id="@+id/showResults"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:23:50.747

使用此方法：只需调用`Activity.getLastNonConfigurationInstance`以检索您在`onRetainNonConfigurationInstance`. 请务必检查 null 并转换为正确的类（您可以返回/获取任何类）。`Activity.getLastNonConfigurationInstance`

示例用法`pseudo-code`如下：

```
onRetainNonConfigurationInstance:
    return "I need to remember this next time";

onCreate:
    ...
    String messageToShow = null;
    Object data = getLastNonConfigurationInstance();
    if(data != null)
        messageToShow = (String)data;
    else
        messageToShow = "Nothing to show"; 
```

因此，如果您的目标是 2.xx，您可以使用该方法。否则，google 建议您使用 Fragment.setRetainInstance。这是通过兼容性包向后兼容的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T08:38:43.287

据我所知，此方向更改有一个侦听器，以便您可以在方向更改之前保存一些数据，因为当方向更改活动在内部重新启动时。

查看[http://developer.android.com/reference/android/view/OrientationListener.html](http://developer.android.com/reference/android/view/OrientationListener.html)

那是类看看那里。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:38:16.440

如果水平和垂直的布局相同，请将以下内容添加到清单中的活动中：

```
<activity android:name="yourpackage.MainActivity" android:configChanges="orientation"/> 
```

现在活动不会重置。

# ftp - 如何使用外部用户支持应用在 owncloud 中配置外部授权？

> ID：14768544
> 
> 赞同：0
> 
> 时间：2013-02-08T08:32:15.340
> 
> 标签：ftp, authorization, owncloud

我正在测试owncloud。这是一个非常好的系统。我必须使用带有插件“外部用户支持”的 ftp 服务器测试身份验证。当我在 Web 管理面板中启用它时，什么都没有发生。我不知道在哪里设置可以启用我的 ftp 服务器授权的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:54:16.450

根据您使用的 ownCloud 版本，请参阅

*   [http://doc.owncloud.org/server/5.0/admin_manual/configuration/custom_user_backend.html](http://doc.owncloud.org/server/5.0/admin_manual/configuration/custom_user_backend.html) 或
*   [http://doc.owncloud.org/server/4.5/admin_manual/custom_user_backend.html](http://doc.owncloud.org/server/4.5/admin_manual/custom_user_backend.html)

# javascript - Javascript 警报框中的古吉拉特语文本未显示

> ID：14768545
> 
> 赞同：0
> 
> 时间：2013-02-08T08:32:24.717
> 
> 标签：javascript

我正在尝试在我的网站上以古吉拉特语显示警报框消息。我正在尝试为此目的使用 javascript 警报。但古吉拉特语未显示在警报框中

```
<input  type="button" style="margin-left: 0px"  style="border:none" style="color:#999999" style="background-color: #fff0e0" value=" ક્લિક કરો " onclick=javascript:msg1001() /><script language="JavaScript">function msg1001(){alert("(A) વિકલ્પ Assam");}</script></td></tr><td valign="top" width="5%"><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:38:04.610

在一些文本编辑器中打开您的 HTML 页面，我建议使用[Notepad++](http://notepad-plus-plus.org/)将编码设置为 UTF-8，然后再次预先输入字符。运行html，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:49:10.183

添加元标记将起作用。

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:46:22.980

这是您的代码的 HTML。Jsfilddle[在这里](http://jsfiddle.net/yelinaung/4eFhh/)。

```
<input  type="button" style="margin-left: 0px"  style="border:none" style="color:#999999" style="background-color: #fff0e0" value=" ક્લિક કરો " onclick="msg1001()" /> 
```

和JS

```
function msg1001(){
    alert("(A) વિકલ્પ Assam");
} 
```

请使用适当的编辑器使用 UTF-8 编码保存您的 HTML 文档。

# javascript - 如何从用户动态地将 src 提供给 img

> ID：14768546
> 
> 赞同：0
> 
> 时间：2013-02-08T08:32:24.887
> 
> 标签：javascript, html, css

我正在尝试从具有类型的输入按钮的值中为图像提供源：“文件”但由于我从输入类型的值中获得的虚假路径，图像不会出现：值有没有另一种方法来获取 jpg 或 png （图像）的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:37:09.067

您可以使用它来获取文件内容，然后对它们进行 base64 编码并推送到`src`值：

[http://www.htmlgoodies.com/html5/tutorials/working-with-binary-files-using-the-javascript-filereader-.html#fbid=kLaP_XSD5_E](http://www.htmlgoodies.com/html5/tutorials/working-with-binary-files-using-the-javascript-filereader-.html#fbid=kLaP_XSD5_E)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:12:24.590

您可以使用 HTML5 FileReader API。如果下面的链接没有帮助，请参阅下面的链接或尝试使用谷歌搜索如何使用 API

[http://www.onlywebpro.com/2012/01/24/create-thumbnail-preview-of-images-using-html5-api/](http://www.onlywebpro.com/2012/01/24/create-thumbnail-preview-of-images-using-html5-api/)

请注意，这不适用于低于 10 版的 IE 和低于 6 版的 Safari。参考请参阅：[http ://caniuse.com/filereader](http://caniuse.com/filereader)

出于安全原因，这些浏览器不允许用户在本地计算机上获取正确的路径。如果您真的想在这些浏览器上进行这项工作，您可以尝试将图像存储在后端。

希望能帮助到你。干杯!

# java - Java（ArrayList）：按名称对人员列表进行分组

> ID：14768550
> 
> 赞同：0
> 
> 时间：2013-02-08T08:32:36.627
> 
> 标签：java, list

我有一份人员名单。person bean 具有以下结构：

```
class Person {
    private String name;
    private String occupation;
    /* Getters and setters*/
    /* toString method */
} 
```

此列表以`ArrayList<Person>`. 问题是当我打印它的数据时，我得到：

```
Foo, scientist
Foo, teacher
Bar, student 
```

我想这样打印：

```
Foo, scientist, teacher
Bar, student 
```

那么，如何自动对数据进行分组呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:47:32.433

如果您正在寻找一个干净的库，您可以使用[emaze-dysfunctional](https://bitbucket.org/rferranti/emaze-dysfunctional)编写

```
Groups.groupBy(persons, new Pluck<String, Person>(Person.class, "occupation")) 
```

获得一个`Map<String, List<Person>>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:00:40.930

这可以通过多种方式解决。我可能会使用 Map 对象，比如说

```
Map<String, List<String>> occupationsByName = new LinkedHashMap<String, List<String>>(0); 
```

然后，我将遍历人员列表，使用名称作为 Map 对象的键，并在我发现该键以前在 Map 中不存在时初始化 List 对象说，

```
for ( Iterator<String> persons = personsList.iterator(); persons.hasNext() ) {
    String person = persons.next().getName();
    if ( occupationsByName.containsKey( person ) ) {
        occupationsByName.get( person ).add( person.getOccupation() );
    } else {
        occupationsByName.put(person, new ArrayList<String>(0) );
        occupationsByName.get( person ).add( person.getOccupation() );
    }
} 
```

然后我会将职业添加到每个键下的列表中，然后最后打印出地图。

我必须声明，我假设您知道如何使用集合类，即使您不知道，您也可以使用[Java API](http://docs.oracle.com/javase/7/docs/api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:38:07.663

如果您有两个`Person`名称相同但职业不同的实例，并且您认为它们是同一个人，那么您需要告诉 JVM，如果两个名称相同，那么人们的名称也相同。你通过覆盖所做的`equals()`

现在第二步是更新列表，以便一旦您尝试添加`Person`列表中已经存在的一个（即有一个同名的人），然后您将新职业添加到旧职业上（例如通过字符串连接）。

你不需要任何库来做你想做的事，只需要编写完整的类。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:49:41.370

这个测试用例通过了我：

```
package com.sandbox;

import com.google.common.base.Joiner;
import com.google.common.collect.LinkedListMultimap;
import com.google.common.collect.Multimap;
import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

import static org.junit.Assert.assertEquals;

public class SandboxTest {

    @Test
    public void testQuestionInput() {
        List<Person> persons = new ArrayList<Person>();
        persons.add(new Person("Foo", "scientist"));
        persons.add(new Person("Foo", "teacher"));
        persons.add(new Person("Bar", "student"));
        String outputString = getOutputString(persons);
        assertEquals("Foo, scientist, teacher\n" +
                "Bar, student\n", outputString);
    }

    private String getOutputString(List<Person> in) {

        Multimap<String, String> map = LinkedListMultimap.create();
        for (Person person : in) {
            map.put(person.name, person.occupation);
        }

        StringBuilder buf = new StringBuilder();
        Joiner joiner = Joiner.on(", ");
        for (String key : map.keySet()) {
            buf.append(key).append(", ").append(joiner.join(map.get(key))).append("\n");
        }
        return buf.toString();
    }

    class Person {

        Person(String name, String occupation) {
            this.name = name;
            this.occupation = occupation;
        }

        private String name;
        private String occupation;
    /* Getters and setters*/
    /* toString method */
    }

} 
```

它获取 Person 列表并将它们传递给 Multimap。 [Multimap 来自 Google guava 库。](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

但是，您可能想使用 maurocchi 的答案。它比这干净得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T08:53:27.513

如果要按名称对数据进行分组。然后使用“比较器”。

例如：

```
Comparator comparator = new TestComparator();
Collections.sort(listTobeSorted, comparator); 
```

现在，我们将在 listTobeSorted 中有一个排序列表。因此您可以根据需要打印数据。

//新建内部类

```
public class TestComparator implements Comparator<Person > {

    @Override
    public int compare(Person o1, Person o2) {
       //To write logic, Please refer the tutorial for Comparator
    }
} 
```

我希望这会对您的问题有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T08:58:47.723

根据您的问题，我假设您的列表中共享相同名称的人员实际上是同一个人。如果是这样，你真的应该重新考虑你的数据组织。例如，您可以为每个人存储一份职业列表。

```
class Person {
    private String name;
    private final List<String> occupations = new ArrayList<String>();

    public boolean addOccupation(String occupation) {
        return occupations.add(occupation);
    }
    // getters
} 
```

按姓名对人员进行分组最好使用 Map 而不是 List。然后您可以编写一个简单的打印方法，如下所示：

```
String personsToString(Map<String, Person> personMap) {
    StringBuilder sb = new StringBuilder();
    for (Person person: personMap.values())
        sb.append(person.getName()).append(", ").append(person.getOccupations()).append("\n");
    return sb.toString();
} 
```

# ios - 在 Xcode 中清除缓冲区内存

> ID：14768553
> 
> 赞同：0
> 
> 时间：2013-02-08T08:32:54.607
> 
> 标签：ios, xcode, ipad, cocoa-touch

我制作了一个应用程序，其中包含滚动视图中的图像视图。
我有 3 个班级，每个班级都将图像添加到图像视图中。

当我按下button1时，它调用class1并填充Class1images（从image001到image200）。
当我按下button2时，它调用class2并填充Class2images（从image201到image400）

问题是当我调用 class1 时，图像视图显示 class1images（从 image001 到 image200）。
调用class1后，我调用class2。
当我调用 class2 时，我的图像视图无法显示 class2images（从 image201 到 image400）
但是，class1Images（从 image001 到 image200）仍在应用程序中。

我认为class1图像仍在内存中，因此class2图像无法添加到内存中。
我想在调用 class2 时删除 class1images。
当我调用下一节课时，它将删除内存中的旧图像并替换为新图像。

但是，我的应用程序是使用故事板和 ARC 开发的。
所以，我不能在 ARC 模式下手动释放内存。
有什么方法可以删除内存中的旧图像？

```
- (void)viewDidLoad{
[super loadView];  
self.view.backgroundColor = [UIColor grayColor];

ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width,self.view.frame.size.height)];
ScrollView.pagingEnabled = YES;

NSInteger numberOfViews = 200;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;

    // Create a UIImage to hold Info.png
    UIImage *image1  = [UIImage imageNamed:@"Image001.jpg"];
    UIImage *image2 = [UIImage imageNamed:@"Image002.jpg"];
:
:
UIImage *image200 = [UIImage imageNamed:@"Image200.jpg"];

    NSArray *images = [[NSArray alloc] initWithObjects:image1,image2, . . . ,image200,nil];

    ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(xOrigin, 0,self.view.frame.size.width, self.view.frame.size.height)];

    [ImageView setImage:[images objectAtIndex:i]];

    [ScrollView addSubview:ImageView];} 
```

ScrollView.contentSize = CGSizeMake(self.view.frame.size.width*numberOfViews,self.view.frame.size.height);

```
[self.view addSubview:ScrollView];} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:40:23.353

将 imageview 的`animationImages`属性设置为新数组将删除 olf 数组并为新数组设置动画。

要 110% 安全调用 stopAnimation，设置图像，调用 startAnimation

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:50:36.420

我认为你的滚动视图没有得到清理。您需要从 scrollView 中删除以前的图像，然后从下一个类中添加图像。

尝试实现这样的东西来从滚动视图中删除图像，然后在按钮单击上添加其他图像

```
for(UIView *subView in self.ScrollView.subviews)
{
    if([subView isKindOfClass:[UIImageView class]])
            [subView removeFromSuperview];
} 
```

希望能帮到你。试一试。

# php - mysql-php mysql_fetch_array()

> ID：14768556
> 
> 赞同：0
> 
> 时间：2013-02-08T08:33:03.093
> 
> 标签：php, mysql

```
 $avg_pgt = mysql_query("SELECT avg(convert(custom_var_v1,unsigned)),min(convert(custom_var_v1,unsigned)), max(convert(custom_var_v1,unsigned) FROM `table_name` WHERE server_time BETWEEN '$date 00:00:00' AND '$date 23:59:59'");

        $row_all = mysql_fetch_array($avg_pgt);         
        $string_avg = (string)$row_all[0];      
        echo $string_avg; 
```

它给出了一个错误 mysql_fetch_array() 期望参数 1 是代码中给出的资源布尔值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:39:18.613

```
max(convert(custom_var_v1,unsigned) 
```

最后缺少一个 ) ，这将起作用：

```
 $avg_pgt = mysql_query("SELECT avg(convert(custom_var_v1,unsigned)),min(convert(custom_var_v1,unsigned)), max(convert(custom_var_v1,unsigned)) FROM `table_name` WHERE server_time BETWEEN '$date 00:00:00' AND '$date 23:59:59'");

    $row_all = mysql_fetch_array($avg_pgt);         
    $string_avg = (string)$row_all[0];      
    echo $string_avg; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:34:31.487

```
$avg_pgt = mysql_query("SELECT avg(convert(custom_var_v1,unsigned)),min(convert(custom_var_v1,unsigned)), max(convert(custom_var_v1,unsigned) FROM `table_name` WHERE server_time BETWEEN '$date 00:00:00' AND '$date 23:59:59'"); 
```

此查询失败并`mysql_query`正在返回`false`。检查您的查询是否正常并在其他地方返回结果。真的`table_name`是你表的名字吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:35:13.293

你不应该使用 mysql_* 函数，因为它们从 php5.x 开始就被弃用了。

使用 PDO 或 mysqli！

从[mysql_query()](http://php.net/manual/en/function.mysql-query.php)文档页面：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 如果用户无权访问查询引用的表，mysql_query() 也会失败并返回 FALSE。

调用[mysql_error()](http://www.php.net/manual/en/function.mysql-error.php)找出问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:44:42.130

你错过`)`了`max(convert(custom_var_v1,unsigned)`

不推荐使用 mysql_* 函数，请使用 mysqli_ 或 PDO

# php - Auto_Prepend_File 用于非 PHP 文件？

> ID：14768559
> 
> 赞同：0
> 
> 时间：2013-02-08T08:33:20.753
> 
> 标签：php, .htaccess

我以不同的形式问了这个问题。现在问题更清楚了，我以这种形式添加它：

想为二进制文件 (mp3) 运行 auto_prepend_file 脚本（或类似的脚本）。

如果我尝试使用 Addhandler 将 mp3 视为 php，则会出现各种错误，因为 php 会尝试解析 mp3 文件。

是否有一些等效的方法可以为二进制文件运行 auto_prepend_file ？

（我不能使用 mod_rewrite）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:37:56.977

如果你可以使用`.htaccess`，你可以简单地为任何类型的请求强制前置文件：

```
php_value auto_prepend_file "prepend.php" 
```

然后在`prepend.php`检查请求的内容并执行某些操作（例如，如果是 mp3）或不执行（对于任何其他类型的文件）

**更新：**

好的，对于非 PHP 文件，它不会自动运行，但您可以执行以下技巧（尽管它不是那么好的解决方案）：

强制`.hatccess`您的`mp3`文件被视为`PHP`：

```
AddHandler php5-script .mp3
php_value auto_prepend_file "prepend.php" 
```

然后在`prepend.php`：

```
// your custom logic here...

header(/* your headers here */);
readfile($_SERVER['SCRIPT_FILENAME']); // serve the requested file
exit(0); 
```

这样它应该可以工作（用PNG文件测试）

# regex - HTML5 输入模式与非拉丁字母

> ID：14768560
> 
> 赞同：7
> 
> 时间：2013-02-08T08:33:21.550
> 
> 标签：regex, html, internationalization, validation

我想用新的 HTML5 模式属性对一些输入表单进行预验证。我的数据集是“域名”，因此`<input type="url">`未应用正则表达式预设。

但是有一个问题，我不会使用`A-Za-z`，因为该死的 IDN（国际化域名）。

所以问题：有什么方法可以`<input pattern="">`用于随机非英文字母验证？

我试过`\w`了，但它只适用于拉丁语......

也许有人有一组`\xNN-\xNN`保证输入所有 unicode 字母字符的集合，或者其他方式？

**编辑：** *“这个问题在这里可能已经有了答案：”* -**不，没有答案。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-02T02:57:06.953

根据我的测试，HTML5 模式属性支持 Unicode 字符代码点[的方式与 JavaScript 支持和不支持的方式完全相同](http://www.regular-expressions.info/unicode.html)：

*   它仅支持`\u`unicode 代码点的表示法，因此`\u00a1`将匹配“¡”。
*   因为这些定义了字符，所以您可以在字符范围内使用它们，例如`[\u00a1-\uffff]`
*   `.`也将匹配 Unicode 字符。

您并没有真正指定您希望如何进行预验证，所以我真的无法为您提供更多帮助，但是通过查找 unicode 字符值，您应该能够在您的正则表达式中找出您需要的内容。

请记住，模式正则表达式的执行总体上相当愚蠢，并且没有得到普遍支持。我建议在模式值之上使用一些 javascript 进行渐进增强（您甚至可以或多或少地重用正则表达式）。

与往常一样，永远不要相信用户输入 - 向您的表单端点发出请求并或多或少地传递他们喜欢的任何数据并不需要天才。您的服务器端验证必须更加明确。您的客户端验证可能会更加慷慨，具体取决于误报或误报是否对您的用例有更大的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T02:13:36.010

我知道这不是你想听到的，但是...

HTML5 模式属性对于程序员来说并不像它对用户那样真正适用。因此，考虑到 的不幸限制`pattern`，您最好提供一个“松散”的模式——一种不会给出假阴性但允许一些假阳性的模式。当我遇到这个问题时，我发现最好的办法是一个由黑名单 + 几个最低要求组成的模式。希望这可以在您的情况下完成。

# android - 在 Android 中使用 HTML 内容时出现 Web 视图错误

> ID：14768567
> 
> 赞同：0
> 
> 时间：2013-02-08T08:33:43.083
> 
> 标签：android, android-webview, android-websettings

```
Errors I am getting when passing Html(textstring) content value to webview.loaddata(textstring , "text/html", "utf-8"); 
```

在姜饼、果冻豆等中效果很好……但在冰淇淋三明治中遇到问题……请帮我解决这个问题

```
02-08 13:52:56.899: W/webcore(1694): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
02-08 13:52:56.899: W/webcore(1694):    at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1671)
02-08 13:52:56.899: W/webcore(1694):    at android.webkit.WebViewCore$EventHub.access$7800(WebViewCore.java:920)
02-08 13:52:56.899: W/webcore(1694):    at android.webkit.WebViewCore.removeMessages(WebViewCore.java:1783)
02-08 13:52:56.899: W/webcore(1694):    at android.webkit.WebView.sendOurVisibleRect(WebView.java:2858)
02-08 13:52:56.899: W/webcore(1694):    at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:586)
02-08 13:52:56.899: W/webcore(1694):    at android.webkit.ZoomManager.access$1700(ZoomManager.java:49)
02-08 13:52:56.899: W/webcore(1694):    at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:977) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:44:51.067

试试这个我这个对你有帮助

```
String data = ...;  // the html data
String base64 = android.util.Base64.encodeToString(data.getBytes("UTF-8"),  
android.util.Base64.DEFAULT);
webView.loadData(base64, "text/html; charset=utf-8", "base64"); 
```

你也试试这个

```
 webView.getSettings().setDefaultTextEncodingName("utf-8");      
   webView.loadDataWithBaseURL(null, html, "text/html", "utf-8", null); 
```

并参考此链接

[WebView 和 ICS 上的 UTF-8 编码](https://stackoverflow.com/questions/8572818/utf-8-encoding-on-webview-and-ics)

# user-interface - LTK：删除条目小部件中的字符回声

> ID：14768575
> 
> 赞同：2
> 
> 时间：2013-02-08T08:34:07.733
> 
> 标签：user-interface, lisp, common-lisp, sbcl, ltk

无论如何要删除在 LTK 的 Entry 小部件中键入的字符的回显？

对于 CLI 界面，我使用 c-string 函数（alien 例程）

```
(sb-alien:define-alien-routine getpass sb-alien:c-string (prompt sb-alien:c-string)) 
```

不太清楚如何在 LTK 中应用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:39:49.843

将条目的`-show`( `:show`) 选项设置为所需的占位符。您可以在小部件创建期间执行此操作：

```
(make-instance 'ltk:entry ...... :show "*") 
```

或以后：

```
(ltk:configure my-entry :show "*") 
```

# image - 如何从 SQL Server 获取图像

> ID：14768576
> 
> 赞同：0
> 
> 时间：2013-02-08T08:34:11.703
> 
> 标签：image, sql-server-2005

我有一个叫表`IMG`，有列`ID`，里面有`Content`图片。

怎么可能从那里得到图片？

我用谷歌搜索了这个问题，我得到的只是 vb.net、c# 和 php - mysql。

也许有人可以说获取图片的最佳和最简单的方法是什么（示例、复制/粘贴代码、程序）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:57:49.277

经过大量阅读和工作找到了解决方案！

这里是！工作 100%

```
 Dim conn, sql, a, filename
      Dim dir 
      dir = "c:\images\" //saves files into this directory
      Dim fileObj
      Set fileObj = CreateObject("Scripting.FileSystemObject")
      Set conn = CreateObject("ADODB.Connection")
      Dim strStream
      Set strStream = CreateObject("ADODB.Stream")
      Dim rstRecordset
      Set rstRecordset = CreateObject("ADODB.Recordset")
      conn.Open "Provider=SQLOLEDB;Data Source=yourserver;Integrated Security = SSPI","username","password"
      rstRecordset.Open "Select xxx, yyy, zzz from table (nolock) where xxx = '' order by xxx desc", conn    ', adOpenKeyset, adLockOptimistic
      Set fso = CreateObject("Scripting.FileSystemObject")

      While Not rstRecordset.EOF  
     filename = rstRecordset.Fields(0) 
     er = 0

Do
    er = er+1
Loop While (fso.FileExists(dir & filename & "_" & er  & ".JPG"))  

    filename = dir & filename & "_" & er  & ".JPG"
    strStream.Type = 1
    strStream.Open
    strStream.Write rstRecordset.Fields(2).Value
    strStream.SaveToFile filename
    strStream.Close
        rstRecordset.MoveNext
    Wend 
```

这里是！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:40:14.527

尝试这样的事情（来自 d_r_w 的回答）：

```
SqlDataAdapter dataAdapter = new SqlDataAdapter(
   new SqlCommand("SELECT pic FROM imageTest WHERE pic_id = 1", 
     yourConnectionReference));

DataSet dataSet = new DataSet();
dataAdapter.Fill(dataSet);

if (dataSet.Tables[0].Rows.Count == 1)
{
    Byte[] data = new Byte[0];
    data = (Byte[])(dataSet.Tables[0].Rows[0]["pic"]);
    MemoryStream mem = new MemoryStream(data);
    yourPictureBox.Image= Image.FromStream(mem);
} 
```

看看[完整的答案](https://stackoverflow.com/a/8084628/395659)

执行此操作的更多选项：

*   [向/从 SQL Server 上传/下载图片](http://www.codeproject.com/Articles/8681/Uploading-Downloading-Pictures-to-from-a-SQL-Serve)
*   [http://www.sqlusa.com/bestpractices/imageimportexport/](http://www.sqlusa.com/bestpractices/imageimportexport/)

我发现[这篇文章](http://www.codewalkers.com/c/a/Database-Articles/Storing-Images-in-Database/3/)是关于 PHP 但使用 MySQL（你需要更改与服务器的连接）：

```
<?php 
// image.php - by Hermawan Haryanto &lt;hermawan@dmonster.com&gt; 
// Example PHP Script, demonstrating Storing Image in Database 
// Detailed Information can be found at http://www.codewalkers.com 

// database connection 
$conn = mysql_connect("localhost", "user", "password") 
  OR DIE (mysql_error()); 
@mysql_select_db ("hermawan", $conn) OR DIE (mysql_error()); 
$sql    = "SELECT * FROM image WHERE image_id=".$_GET["iid"]; 
$result = mysql_query ($sql, $conn); 
if (mysql_num_rows ($result)&gt;0) { 
  $row = @mysql_fetch_array ($result); 
  $image_type = $row["image_type"]; 
  $image = $row["image"]; 
  Header ("Content-type: $image_type"); 
  print $image; 
} 
?> 
```

# c# - 如何验证服务器上的客户端证书？

> ID：14768589
> 
> 赞同：4
> 
> 时间：2013-02-08T08:35:30.517
> 
> 标签：c#, asp.net, .net, certificate

我必须实现一个由预定义的第三方调用的 Web 服务。文件说

> 您负责验证调用者的证书指纹。仅接受来自具有正确公钥的证书的调用。

并且有一个带有证书公钥的 .cer 文件。

现在在`HttpRequest`类中有`ClientCertificate`一个可能包含一个`HttpClientCertificate`对象的属性，该对象又具有`PublicKey`type 属性`byte[]`。

假设我已加载该 .cer 文件并获得另一个证书对象，该对象也具有可访问的公钥。

如何根据我已加载的证书验证请求中包含的证书？我只是比较两个公钥`byte[]`数组还是做其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-19T15:13:34.617

如果您在机器的证书存储中导入证书，任何使用 HTTPS 端点的行为都将由 .NET Framework（WCF、HttpClient 等）自动验证。

如果它是由受信任的 CA 颁发的，那就更好了，因为你甚至不需要导入证书。

您不需要手动验证它。

# php - 生成儒略日期

> ID：14768593
> 
> 赞同：-2
> 
> 时间：2013-02-08T08:36:00.800
> 
> 标签：php, date, julian-date

我有一段代码可以生成儒略日期，但我需要生成一个三位数的儒略日期。任何人都可以帮助我吗

代码：

```
$jd = GregorianToJD(08, 02, 2013); 
```

输出： **2456507**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:45:20.263

看到这个函数**cal_from_jd**返回日历信息树，如月、日、年、星期 [http://www.php.net/manual/en/function.cal-from-jd.php](http://www.php.net/manual/en/function.cal-from-jd.php)

```
 $jd = GregorianToJD(08, 02, 2013);
  print_r(cal_from_jd($jd, CAL_JULIAN)); 
```

如果您有 php 5.3 和更新版本，您可以使用可以转换为所有日历和时区的**IntlDateFormatter**
[http://www.php.net/manual/en/class.intldateformatter.php](http://www.php.net/manual/en/class.intldateformatter.php)

# php - php中iphone json响应的json解码

> ID：14768601
> 
> 赞同：-1
> 
> 时间：2013-02-08T08:37:36.250
> 
> 标签：php, json

我收到 json 响应表单 iphone 应用程序如下

```
{"json":{"age":"23","userid":"1","weight":"55","fullname":"goutham"}}; 
```

谁能告诉我如何解码它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:39:02.147

使用 PHP 的函数：[json_decode](http://php.net/json_decode)

```
<?php
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

var_dump(json_decode($json));
var_dump(json_decode($json, true));

?> 
```

来源：来自上述参考手册的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:54:29.877

我认为我们在这里遗漏了问题，从您提供的 json 字符串中查看，您可以清楚地看到您有一个具有属性的对象。

看看 json 的规格[http://www.json.org/](http://www.json.org/)

{json:{年龄:23 等

我希望通过对它执行 json_decode ，您可以通过简单地说：$json->age 来获取对象属性

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:39:30.933

使用 json_decode

```
$array = json_decode($string, true);
/// please note the second parameter 'true' here, it is needed if you want your o/p as array or you will get it as object

print_r($array); 
```

参考： http: [//php.net/json_decode](http://php.net/json_decode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:41:21.577

您可以使用

```
json_decode(); 
```

喜欢

```
json_decode($my_json); 
```

或者你可以使用像 json_code.age;json_code.userid 这样的参考这个[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

或者你可以参考这个在线转换器[http://json.parser.online.fr/](http://json.parser.online.fr/)

# ios - 将 NSDict 转换为 NSDate

> ID：14768608
> 
> 赞同：-1
> 
> 时间：2013-02-08T08:37:59.427
> 
> 标签：ios, date

我正在尝试将 NSDict 转换为 NSDate。任何人都可以提出一些例子。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:47:24.977

```
NSSString *str = [dict objectForKey:@"billdate"];
NSDateFormater *f = [[NSDateFormatter alloc] init];

NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
f.locale = usLocale;
f.dateFormat = @"MM/dd/yyyy"; // The format string uses the format patterns from the Unicode Technical Standard #35

NSDate *date = [f dateFromString:str]; 
```

# perl - 从perl中的多个文本文件中删除重复条目？

> ID：14768609
> 
> 赞同：1
> 
> 时间：2013-02-08T08:38:00.393
> 
> 标签：perl

我是这个站点的新手，需要帮助从多个文本文件中删除重复条目（在循环中）。尝试了下面的代码，但这并没有删除多个文件的重复项，但是它适用于单个文件。

代码 ：

```
my $file = "$Log_dir/File_listing.txt";
my $outfile  = "$Log_dir/Remove_duplicate.txt";; 

open (IN, "<$file") or die "Couldn't open input file: $!"; 
open (OUT, ">$outfile") or die "Couldn't open output file: $!"; 
my %seen = ();
{
  my @ARGV = ($file);
  # local $^I = '.bac';
  while(<IN>){
    print OUT $seen{$_}++;
    next if $seen{$_} > 1;
    print OUT ;
  }
} 
```

谢谢，艺术

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:11:57.547

脚本中的错误：

*   您用 覆盖（的新副本）`@ARGV`，`$file`因此它永远不会有更多的文件参数。
*   ...这没关系，因为您在分配 to 之前打开文件句柄，而且`@ARGV`您不会循环参数，您只是`{ ... }`在代码周围有一个没有任何用途的块。
*   `%seen`将包含您打开的所有文件的重复数据删除数据，除非您重置它。
*   您将计数打印`$seen{$_}`到输出文件，我相信您不需要。

* * *

您可以使用菱形运算符来使用参数的隐式打开`@ARGV`，但由于您（可能）需要为每个新文件分配一个正确的输出文件名，因此这种解决方案是不必要的复杂化。

```
use strict;
use warnings;                      # always use these

for my $file (@ARGV) {             # loop over all file names
    my $out = "$file.deduped";     # create output file name
    open my $infh,  "<", $file or die "$file: $!";
    open my $outfh, ">", $out  or die "$out: $!";
    my %seen;
    while (<$infh>) {
        print $outfh $_ if !$seen{$_}++;   # print if a line is never seen before
    }
} 
```

请注意，使用词法范围`%seen`的变量会使脚本检查每个单独文件中的重复项。如果将变量移到 for 循环之外，您将检查*所有*文件中的重复项。我不确定你喜欢哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:08:13.497

我认为您的`File_listing.txt`包含行，其中一些有多次出现？如果是这种情况，只需使用 bash shell：

```
sort --unique <File_listing.txt >Remove_duplicate.txt 
```

或者，如果您更喜欢 Perl：

```
perl -lne '$seen{$_}++ and next or print;' <File_listing.txt >Remove_duplicate.txt 
```

# twitter-bootstrap - Jasny bootstrap IE8 中的标志性图标

> ID：14768610
> 
> 赞同：0
> 
> 时间：2013-02-08T08:38:02.380
> 
> 标签：twitter-bootstrap, internet-explorer-8, ie-developer-tools, jasny-bootstrap

如何在 IE8 ( [http://jasny.github.com/bootstrap/base-css.html#iconic](http://jasny.github.com/bootstrap/base-css.html#iconic) ) 中使用所有这些标志性图标？它们中的大多数似乎在 IE8 中不起作用......

这是 Jansy 插件中的错误还是缺少 IE8？

顺便说一句，如果我打开我的 Internet Explorer 开发工具，我确实在 IE8 中看到了两个关于 @font-face 的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:14:41.593

After finding [Font Awesome](http://fortawesome.github.com/Font-Awesome/#examples) on the internet, I am certain it is a bug in the Jansy plugin as [Font Awesome](http://fortawesome.github.com/Font-Awesome/#examples) even works in IE7\.

# streaming - 带有 PushStreamContent 的 Selfhosted WebApi 可以处理多个请求吗？

> ID：14768611
> 
> 赞同：2
> 
> 时间：2013-02-08T08:38:03.687
> 
> 标签：streaming, asp.net-web-api, self-hosting

我正在使用 HttpSelfHostServer 来托管我的 WebApi。我像这样返回 PushStreamContent

```
 public HttpResponseMessage Get(HttpRequestMessage request)
        {
            var response = request.CreateResponse();
            response.Content = new PushStreamContent(OnStreamAvailable, "text/eventstream");
            return response;
        } 
```

在我向我的 api 发出第二个请求之前，一切都按预期工作。第一个请求被阻塞，第二个请求在我关闭第一个请求之前不会到达 Get-function。

我已经像这样设置了我的配置

```
 HttpSelfHostConfiguration config = new HttpSelfHostConfiguration(_baseAddress);
            config.TransferMode = System.ServiceModel.TransferMode.Streamed;
            config.MaxConcurrentRequests = 10; 
```

为什么第一个电话会阻塞第二个电话？

**编辑：这是我的完整控制器：**

```
 public class PushController : ApiController
    {
        private static readonly ConcurrentBag<StreamWriter> _Writers = new ConcurrentBag<StreamWriter>();

        public HttpResponseMessage Get(HttpRequestMessage request)
        {
            var response = request.CreateResponse();
            response.Headers.Add("Access-Control-Allow-Origin", "*");
            response.Headers.Add("Cache-Control", "no-cache, must-revalidate");
            response.Content = new PushStreamContent(OnStreamAvailable, "text/event-stream");
            return response;
        }

        private void OnStreamAvailable(Stream stream, HttpContent content, TransportContext context)
        {
            _Writers.Add(new StreamWriter(stream) { AutoFlush = true });
        }

        public static void Say(string text)
        {
            try
            {
                foreach (var w in _Writers)
                {
                    w.Write("data:{ text : \"" + text + "\" }\n\n");
                }
            }
            catch { }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-23T23:23:47.877

我不明白为什么自托管 WebAPI 不能服务并发请求，即将第二个请求分派到单独的线程上。

但是......我认为一旦你写了你要写的所有内容，你应该总是`Close`流给你。`PushStreamContent`您尚未添加`Content-Length`标头，因此客户端不知道何时停止等待更多数据。关闭输出流将告诉客户端没有更多的来了。

# iphone - 如何设置日期选择器以单独显示 1910-2010 之间的年份

> ID：14768616
> 
> 赞同：1
> 
> 时间：2013-02-08T08:38:12.710
> 
> 标签：iphone, ios, ios4, uidatepicker

我试图仅显示 1910-2010 之间的日期选择器。我的意思是用户只能在 1910 - 2010 之间进行选择。我尝试了下面的代码，但它不工作。

日期可以从 1 日到 31 日选择，月份也可以从 1 月到 12 月选择。

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
        NSDate *currentDate = [NSDate date];
        NSDateComponents *comps = [[NSDateComponents alloc] init];
        [comps setYear:-3];
        NSDate *maxDate = [calendar dateByAddingComponents:comps toDate:0 options:0];
        [comps setYear:1];
        NSDate *minDate = [calendar dateByAddingComponents:comps toDate:0 options:0];

    [self.myPicker setMaximumDate:maxDate];
    [self.myPicker setMinimumDate:minDate]; 
```

请让我知道，我做错了什么。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:47:12.703

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd"];
NSDate *minDate = [formatter dateFromString:@"1910-01-01"];
NSDate *maxDate = [formatter dateFromString:@"2010-12-31"];
self. myPicker.minimumDate = minDate;
self. myPicker.maximumDate = maxDate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:47:28.930

看看这些链接，

[如何将 MaxDate 和 MinDate 设置为从 ios 上的 web 服务返回的 DatePicker](https://stackoverflow.com/questions/7559286/how-to-set-maxdate-and-mindate-to-datepicker-returned-from-webservice-on-ios)

[如何在 UIDatePickerModeTime 中设置时间范围](https://stackoverflow.com/questions/7568284/how-to-set-time-range-in-uidatepickermodetime)

[显示 18 年前的 datepicker 并在 ios 中锁定 ui datepicker](https://stackoverflow.com/questions/12853795/showing-datepicker-18-years-back-and-lock-the-ui-datepicker-in-ios)

希望它可以帮助你...

# zend-framework2 - Zend Framework 2 教程：模块（应用程序）无法初始化

> ID：14768621
> 
> 赞同：13
> 
> 时间：2013-02-08T08:38:16.550
> 
> 标签：zend-framework2

我正在关注 2.1 版的 Zend Framework 2 官方教程。在[单元测试](http://framework.zend.com/manual/2.1/en/user-guide/unit-testing.html)部分，我应该在模块/应用程序/测试中运行 phpunit，我遇到了以下问题：

```
user@xubuntu1210:~/Desktop/zf2-tutorial/module/Application/test$ phpunit
PHPUnit 3.7.13 by Sebastian Bergmann.

Configuration read from /home/user/Desktop/zf2-tutorial/module/Application/test/phpunit.xml.dist

E

Time: 0 seconds, Memory: 4.00Mb

There was 1 error:

1) ApplicationTest\Controller\IndexControllerTest::testIndexActionCanBeAccessed
Zend\ModuleManager\Exception\RuntimeException: Module (Application) could not be initialized.

/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/ModuleManager/ModuleManager.php:140
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/ModuleManager/ModuleManager.php:81
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php:460
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php:204
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/ModuleManager/ModuleManager.php:100
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Mvc/Application.php:239
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:146
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:173
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:193
/home/user/Desktop/zf2-tutorial/vendor/zendframework/zendframework/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:236
/home/user/Desktop/zf2-tutorial/module/Application/test/ApplicationTest/Controller/IndexControllerTest.php:20

FAILURES!
Tests: 1, Assertions: 0, Errors: 1. 
```

我从教程中复制了 IndexControllerTest.php 的内容。

```
<?php

namespace ApplicationTest\Controller;

use Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase;

class IndexControllerTest extends AbstractHttpControllerTestCase
{
    public function setUp()
    {
        $this->setApplicationConfig(
            include '/home/user/Desktop/zf2-tutorial/config/application.config.php'
        );
        parent::setUp();
    }

    public function testIndexActionCanBeAccessed()
    {
        $this->dispatch('/'); // this is line 20
        $this->assertResponseStatusCode(200);

        $this->assertModule('application');
        $this->assertControllerName('application_index');
        $this->assertControllerClass('IndexController');
        $this->assertMatchedRouteName('home');
    }
} 
```

我不知道为什么应用程序不会初始化，我将不胜感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-12T16:02:45.743

This is an autoloading problem that may be related with the `module_paths` option in `config/application.config.php` (in the tutorial, it's the one you have in `/path/to/application/config/test/application.config.php`).

That `application.config.php` probably looks like following:

```
return array(
    'modules' => array(
        'Application',
        'Album',
    ),

    'module_listener_options' => array(
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
); 
```

To fix your problem, change the value `./module` into an absolute path, for example `__DIR__ . '/../module`, assuming the `application.config.php` is in `config/` in your application's root dir.

To clarify: the problem occurs because `./module` is a path relative to your `cwd`. Your `cwd` when running `phpunit` is inside the test dir, where there isn't (obviously) any `module` dir.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T14:26:51.840

检查根配置文件夹中的 application.config 文件，我们必须在“模块”中定义应用程序。

示例代码：

```
'modules' => array(
        'Application',
        'FrontEnd',
              ), 
```

# haskell - 不清楚 foldl 类型定义

> ID：14768628
> 
> 赞同：7
> 
> 时间：2013-02-08T08:38:57.007
> 
> 标签：haskell

```
foldl :: (a -> b -> a) -> a -> [b] -> a
foldl step zero (x:xs) = foldl step (step zero x) xs
foldl _    zero []     = zero 
```

我不太明白为什么 (a -> b -> **a** ) 返回**a**， (a -> b -> a) -> a -> [b] -> **a**返回**a**。我认为它应该是： (a -> b -> **c** ) -> a -> [b] -> **c**。有人可以根据下面的示例向我解释一下。谢谢！

```
foldl (+) 0 (1:2:3:[])
foldl (+) (0 + 1) (2:3:[])
foldl (+) ((0 + 1) + 2) (3:[])
foldl (+) (((0 + 1) + 2) + 3) ([])
foldl (+) (((0 + 1) + 2) + 3) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T08:57:35.867

`a`表示累加器值`b`的类型，表示输入中每个元素的类型。`(a -> b -> a)`是一个函数，它接受一个累加器值，列表中的某个项目，并返回一个可以传递到下一步的新累加器值。

初始值的类型必须是`a`函数的第一次调用可以接收累加器值。累加器函数必须接受`a`并返回一个`a`，以便可以将累加器值传递给折叠的每个步骤。fold 的最终值必须是 a `a`，因为这是最终调用 fold 函数将返回的累加器的类型。

`(a -> b -> c) -> a -> [b] -> c`不能表示折叠，因为折叠函数不采用`c`. 折叠函数的输入和输出*必须*是相同的类型，这样累加器才能传递到下一个折叠步骤。

让我们看一个例子，如果 fold 函数返回 a 会发生什么`c`。

```
f :: Integer -> Integer -> Bool   -- this is a valid (a -> b -> c)
f acc n = (acc + n) > 0 
```

假设我们正在使用动态语言，并尝试使用`f`. 运行时会发生什么？

```
foldl f 0 [1]     ~ (0 + 1) > 0            == True :: Bool

foldl f 0 [1, 2]  ~ ((0 + 1) > 0) + 2) > 0 == error - no instance of (+) for Bool
                     \_________/   \
                          |         \
                         Bool      + Integer 
```

您可以看到，如果您尝试使用不兼容的类型进行累积，则无法进行折叠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T08:50:27.960

折叠函数（类型`(a -> b -> a)`）的返回类型必须与其第一个输入的类型相同。这是因为，查看（几乎是正确的，除了最后一行，它不应该有`foldl (+)`）您给出的评估，折叠函数的先前调用的结果作为第一个输入传递给下一次调用。因此，类型必须匹配。在`(a -> b -> c)`第一个参数的类型中，结果只匹配 if `a ~ c`（类型相等），但在这种情况下，因为 a 和 c 相等，我们不妨将它们都称为 a。假设折叠函数返回 a 类型的东西，整个 foldl 调用的结果也将是 a 类型，因为它只是返回最后一次调用折叠函数的结果。

# android - 如何从 9-patch 图像中删除一个像素边框？安卓

> ID：14768629
> 
> 赞同：1
> 
> 时间：2013-02-08T08:38:58.293
> 
> 标签：android, nine-patch

我使用 draw9patch 工具创建了一个扩展名为 name.9.png 的 9-patch 图像。在我的应用程序中，图像相应地拉伸，我在 draw9patch 工具中标记了单像素边框，但是在我的应用程序中，单像素边框以黑色可见。现在如何从 9patch 图像中删除一个像素的边框或使边框透明我的意思是在我的应用程序中不可见边框。请在这方面帮助我。

你可以在下面看到我的 9-patch 图片。

![在此处输入图像描述](../Images/09a7cdca79a287e27c082b63015a9f29.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:08:45.487

您的 9-patch 图像不正确。虽然可以有多个可拉伸区域（图像顶部和左侧的黑线），但填充区域（图像底部和右侧的黑线）不能分成多个部分。有关详细信息，请参阅[本指南。](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

此外，您似乎缺少图像底部的 1 个额外像素行，您可以在其中指定水平填充区域。即使您的图像不需要水平填充，您仍应包含额外的像素行并将其留空。

试试这张图片：

![在此处输入图像描述](../Images/b2c9fa4104db96256402c935add19ce4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-29T07:12:57.473

如果您正在查看如何取消选择您选择的区域：这就是您的操作方式：**按住 Shift 并单击** 将取消选择该像素（或者只需移动并单击+拖动以取消选择一条线）

# python - 将三个列表合并在一起

> ID：14768633
> 
> 赞同：0
> 
> 时间：2013-02-08T08:39:06.000
> 
> 标签：python, merge

为了好玩，我正在尝试实现 k 方式合并排序，其中 k = 3。递归调用合并排序没有问题，但我试图将三个列表合并在一起，但没有得到排序列表。基本思想是我比较每个列表的第一个元素，如果它是最小的，我将它附加到一个列表中。我对所有数组重复该过程。

```
def three_merge(a,b,c):
    i =0
    j =0
    k=0
    list = []
    while(i < len(a) or j < len(b) or k < len(c)):
        while(a[i] <= b[j] and a[i] <= c[k]):
            list.append(a[i])
            i=i+1
            print i
        while(b[j] <= a[i] and b[j] <= c[k]):
            list.append(b[j])
            j=j+1
            print j
        while(c[k] <= a[i] and c[k] <= b[j]):
            list.append(c[k])
            k=k+1
            print k
   return list    

a = [1,2]
b = [-5,10]
c = [-11, 100]
print three_merge(a,b,c) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:22:08.650

问题是`i, j, k`您将附加到排序列表的每个值的索引提前，这意味着在从列表中获取所有元素后，索引比相应输入列表的长度大一。因此，当您比较不同输入列表的元素值时，您最终会达到您想要做的点，实际上`a[len(a)]`，虽然总是会给出索引错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:05:30.257

这是一个用于 n 路合并的简单函数。如果您有任何问题，请随时提问：

```
def merge(*args):
    lst = list(args)
    idx = [0] * len(lst)
    out = []

    while lst:
        m = 0
        for i in range(len(lst)):
            if lst[i][idx[i]] < lst[m][idx[m]]:
                m = i
        out.append(lst[m][idx[m]])
        idx[m] += 1
        if idx[m] >= len(lst[m]):
            del lst[m]
            del idx[m]

    return out

print merge([1,2,11], [2,9], [8]) # [1, 2, 2, 8, 9, 11] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:35:42.680

为什么不将三个列表的合并视为两个列表的两个合并的组合

```
def merge(a,b):
    L = a
    l = b
    i = 0
    j = 0
    res = []
    if (len(b)>len(a)):
        L=b
        l=a
    #print L
    #print l
    while (i<len(L)):
        if(len(l)>0):
            while (j<len(l)):
                if (L[i]<=l[j]):
                    res.append(L[i])
                    del L[i]
                    break
                else:
                    res.append(l[j])
                    del l[j]
        else:
            #print res
            res = list(res+L)
            L=[]
            break
    if len(l)>0:
        res = list(res+l)
        l=[]
    return res

def threeMerge(a,b,c):
    return merge(merge(a,b),c)

aa = [1,2]
bb = [-5,3,20]
cc= [-11, 23,45]
print threeMerge(aa,bb,cc) 
```

# ajax - cakephp 2.3.0 的简单 ajax 示例

> ID：14768635
> 
> 赞同：15
> 
> 时间：2013-02-08T08:39:09.537
> 
> 标签：ajax, cakephp

请帮助我，如果有人可以给我一个例子，如何在 cakephp 2.3.0 中使用 ajax 一个例子是这样的

```
<?php echo $this->html->link('Original', '#', 
                array('onclick'=>'return false;', 'id'=>'remanufactured-link', 'class'=>'get-type-product-link')); ?>   

<div id="content">
</div> 
```

当我单击`original`链接时，带有 id 的 div`content`会发生变化。我怎么能用 cakephp 2.3.0 做到这一点？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-08T11:46:48.633

将 CakePHP 与 Ajax 一起使用与普通的 HTML/PHP 和 Ajax 并没有太大区别。

下面是一个 Cake APP 中的 ajax 调用和响应示例：

jQuery：

```
$.ajax({
    url: '/types/fetch/original',
    cache: false,
    type: 'GET',
    dataType: 'HTML',
    success: function (data) {
        $('#context').html(data);
    }
}); 
```

（不要忘记更改 url 参数以匹配您的设置）。

这将向您的 Types 控制器发出 ajax 请求，并使用参数“original”调用方法 fetch()。

你的 TypesController 看起来像这样：

```
class TypesController extends AppController {

    public $components = array(
        'RequestHandler'
    );

    public function fetch($type) {

        $data = $this->Type->find('all', array(
            'conditions'=>array(
                'Type.type'=>$type
            )
        );

        $this->set('data', $data);

    }
} 
```

添加 RequestHandler 组件意味着 Cake 在呈现您的 Ajax 请求时将自动使用最小的 Ajax 布局。通常这是在 AppController 中添加的，因此所有 Controller 都可以使用它。

以及相关的视图：

/app/View/Types/fetch.ctp

```
<ul>
    <?php foreach($data as $item): ?>
    <li><?php echo $item['Type']['name']; ?></li>
    <?php endforeach; ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-08T11:41:10.363

请参见下面的示例：

```
 $.ajax({
            dataType: "html",
            type: "POST",
            evalScripts: true,
            url: '<?php echo Router::url(array('controller'=>'your-controller','action'=>'your-action'));?>',
            data: ({type:'original'}),
            success: function (data, textStatus){
                $("#div1").html(data);

            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T12:11:48.137

我刚开始使用 cakePHP 和 Ajax，但从我收集到的信息来看，这似乎是更简单的方法。在您看来使用：

```
echo $this->Js->link(
    'Original',
    '#',
    array('async' => true,
          'update' => 'content',
                  'id' => 'remanufactured-link'
        )
);
<div id="content">
</div> 
```

这意味着您从中调用此视图的控制器的一些事情（例如，将通过单击链接等来调用索引操作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:43:28.330

您可以使用 jquery/ajax

```
$("#remanufactured-link").click(function(){ whatyouneed.appenTo("#content"); }) 
```

whatyouneed 可以是 post/get 或其他东西的数据响应。

# iphone - 如何阻止 UIView 消失？

> ID：14768636
> 
> 赞同：1
> 
> 时间：2013-02-08T08:39:13.573
> 
> 标签：iphone, uiview, keyboard, viewwillappear

通过单击后退按钮，我保存`UITextFields`了`UIView`. 当 a 中的信息`UITextField`不正确并且我单击后退按钮时，我想打开键盘，但我的视图消失了。如何阻止 UIView 消失并改为打开我的键盘。

我想我应该把我的代码放在 viewShouldDissapear 中，但是没有这样的方法。

这是我的代码：

```
- (void) viewWillDisappear:(BOOL)animated
{

if ([textField1 length] < 3 || [textField1 length] > 17) {

    tableView.contentInset = UIEdgeInsetsMake(65, 0, 10, 0);

    [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:7 inSection:indexPath.section]
                     atScrollPosition:UITableViewScrollPositionTop animated:NO];

    [txtSerieSasiu becomeFirstResponder];
    return;
}

if (shouldSave)
    [self save];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:54:30.580

将此代码写入从按钮按下调用的选择器中，如果一切正常，则仅弹出/关闭您的视图控制器。如`viewWillDisAppear`您可以要求控制器取消消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:01:07.123

我假设您在导航控制器上有后退按钮。
然后在此处添加一个自定义按钮，如果一切正确，则将其关闭，否则显示键盘

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:[UIImage imageNamed:@"goback.png"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(popVC:) forControlEvents:UIControlEventTouchUpInside];
    [button setFrame:CGRectMake(0, 0, 32, 32)];
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button];
}

- (void)popVC:(id)sender
{
    if (isValueCorrect) {
        [self.navigationController popViewControllerAnimated:YES];
    }
    else{
        [textView becomeFirstResponder];
    }
} 
```

# android - 如何在android中使用传感器管理器方位角值旋转图像？

> ID：14768642
> 
> 赞同：0
> 
> 时间：2013-02-08T08:39:28.373
> 
> 标签：android, view, azimuth, sensormanager

```
 public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        //accel
        sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        sensor = sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);

        setContentView(R.layout.sample);
    }

    ///////////////// Basics
    /**
     * Called when the application is in the background
     */
    public void onPause()
    {
        super.onPause();
        sensorManager.unregisterListener(this);

        //this is important because Android applications
        //do not close, they are in the background
        //so resources would be hogged otherwise
    }

    /**
     * Called when the application is started
     * or in the foreground again
     */
    public void onResume()
    {
        super.onResume();
        sensorManager.registerListener(this, sensor, rate);

    }

    //==================Accel=====================
    /**
     * Called when the values of the acceleration sensor changes
     * 
     * @param e Details about the change
     */
        public void onSensorChanged(SensorEvent e) 
        {
            float azimuth=e.values[0];

                    Log.i("azimuth",String.valueOf(azimuth));

        }

        /**
         * Called when accuracy of the sensor is changed
         * 
         * @param sen Which sensor's accuracy changed
         * @param acc The new accuracy degree
         */
        public void onAccuracyChanged(Sensor sen, int acc) 
        {
        } 
```

在这里，我正在使用传感器管理器获取方位角值。我想知道如何使用方位角值像指南针一样旋转图像视图？谁能给出一些想法？如何在这里使用 OnDraw 函数？没有在 OnDraw 方法内绘制圆或线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T20:15:54.580

这是旋转图像视图的方法：

```
Matrix matrix=new Matrix();
imageview.setScaleType(ScaleType.MATRIX);   //required
matrix.postRotate((float) -azimuth, imageview.getDrawable().getBounds().width()/2, 
imageview.getDrawable().getBounds().height()/2);            

imageview.setImageMatrix(matrix); 
```

对于 API 11+，有一个简单的方法：

```
arrow.setRotation((float) -azimuth); 
```

您可以查看此[博客](http://sunil-android.blogspot.in/2013/02/create-our-android-compass.html)以了解圆和线罗盘。

希望这可以帮助。

# java - NoClassDefFoundError：servlet 中的 antlr/RecognitionException，但在普通 java 程序中有效

> ID：14768646
> 
> 赞同：1
> 
> 时间：2013-02-08T08:39:45.630
> 
> 标签：java, jsp, servlets, antlr, noclassdeffounderror

在我下面的 servlet 类中，我在 tomcat 服务器中部署时收到一些 NoClassDefFoundError: antlr/RecognitionException 和 NoClassDefFoundError: antlr/TokenStreamException。带有*****的星号线是导致它的原因。当我评论这些行时，它很容易部署。我在 Eclipse 的构建路径中包含了必要的 .jar 文件。

基本上在下面的 Servlet 我想从 web 调用我的 java 程序。当我从控制台使用我的 Java 代码时，它不会出现任何错误并且运行良好。对于我的大多数外部包含的 jar 文件，catalina.out 都在为 NoClassDefFound 哭泣。我是否遗漏了某些东西或对于 Servlet，我必须在某处指定有关外部 jar 类的信息？

提前致谢..

```
package i2r.hlt.iris;

import i2r.hlt.iris.utils.JSenti;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.antlr.v4.runtime.RecognitionException;

import antlr.TokenStreamException;

import es.upv.nlel.utils.FileIO;

public class UserInputServlet extends HttpServlet {

@Override
public void init(ServletConfig config) throws ServletException {
    ServletContext context = config.getServletContext();
    homeJsp = context.getRequestDispatcher("/WEB-INF/jsp/iris.jsp");

    ....

    ret.setIndexPath(index_path);

    try {
        ret.loadUtts();
        ret.loadDlgs();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

private RequestDispatcher homeJsp, userInput;
private Retrieval ret;

protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {

    String input = req.getParameter("user");
    req.setAttribute("message", input);

    homeJsp.forward(req, resp);
}

protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException{

    String input = req.getParameter("user");

    List<String> list = new ArrayList<String>();
    list.add(input);

    Add add = new Add();
    String out = null;

/*******            try {
*****           out = "IRIS: " + FileIO.fileToString(new File(ret.uttMap.get(ret.selectBestUtt(list))));
*****           } catch (antlr.RecognitionException e) {
*****               throw new ServletException(e);
*****           }catch (TokenStreamException e) {
*****           throw new ServletException(e);
*****           }*/

    req.setAttribute("message", out);
    homeJsp.forward(req, resp);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:18:46.037

您需要将 ANTLR v2 库放在 Tomcat 的 lib 文件夹中（见注释）。Java 在特定目录中搜​​索库。您要使用的库必须位于 Java/Tomcat 可以找到的这些目录之一中。

如果您希望 Eclipse 自动部署依赖项，这可能会有所帮助：

[Eclipse Web 项目依赖项](https://stackoverflow.com/questions/1693322/eclipse-web-project-dependencies)

# xcode - 为什么 NSString 不总是在 Xcode 调试器中显示它的文本？

> ID：14768650
> 
> 赞同：3
> 
> 时间：2013-02-08T08:40:08.253
> 
> 标签：xcode, nsstring

这似乎完全是任意的，有时 NSString 在调试器中会显示得很好：

```
 myStr  NSString *  0x0000000104e00040 @"Hello" 
```

其他时候只是：

```
myStr   NSString *  0x0000000104e00040 
```

NSStrings 没有问题，只是它们在调试器中的显示方式。有什么因素会影响这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:43:00.763

我认为这是 IDE 中的一个错误，我认为我们对此无能为力。

也许堆栈深度会影响...但那是猜测。

`po MyStr`控制台中的a总是可以正常工作:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T09:44:05.943

您也可以 ctrl + 单击一个对象，然后选择打印说明。

![在此处输入图像描述](../Images/05c55ced02cb01b417bc096cb3f4c51a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-04T17:05:11.153

对于`po myString`不起作用的情况，可能是您在 IDE 中过滤控制台输出。例如，我正在过滤“myFunc”，然后执行`po myString`. 除非`myString`包含字符串“myFunc”，否则它不会显示。这也过滤掉了上面提到的打印描述方法。

我认为这不是 XCode 的最佳行为，如果过滤器仅应用于程序的输出，而不是调试行为，那会更好。

# view - 如何在模态窗口中放置 Joomla 2.5 后端视图

> ID：14768658
> 
> 赞同：3
> 
> 时间：2013-02-08T08:40:33.473
> 
> 标签：view, joomla, components, modal-dialog, backend

我喜欢在模态窗口中打开组件后端视图。我所有的尝试都引导我进入一个模态窗口，在模态窗口的 iframe 中显示整个后端。我使用此链接打开窗口：

```
<?php 
$link = 'index.php?option=com_serveradmin&view=filehistory&layout=modal&id=' . (int)$file->id;
?>
<a href="<?php echo JRoute::_($link);?>" class="modal"
rel="{handler: 'ajax', size: {x: 875, y: 550}, onClose: function() {}}" >
<?php echo $file->orig_name; ?>
</a> 
```

视图文件夹包含带有以下代码的 modal.php：

```
 defined('_JEXEC') or die;
    JHtml::_('behavior.modal');
    ?>

<h1>This is the file history</h1> 
```

仅此而已，这就是我想在第一步中展示的全部内容。以前有人试过吗？有没有办法做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:53:48.533

您可以添加`tmpl=component`到您的 url，因此 Joomla 只会呈现没有模板的组件。事实上，Joomla 将使用`component.php`您当前模板中的。

# highcharts - 堆叠两个图表时，highcharts 缺少 x 轴标签

> ID：14768659
> 
> 赞同：1
> 
> 时间：2013-02-08T08:40:43.510
> 
> 标签：highcharts, highstock

[http://jsfiddle.net/3p6FC/](http://jsfiddle.net/3p6FC/)

我使用了演示烛台/条形图，边距和间距都设置为 0，并且设置如下：

```
chart.height = 325

yAxis[0].height = 200
yAxis[1].height = 50
yAxis[1].top = 250 
```

我认为将高度设置为 250 将为 x 轴标签在下方呈现足够的空间。不幸的是，他们没有出现。谁能提供有关我在这里做错了什么的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:19:11.057

您可以设置 xAxis 的偏移量：

```
 xAxis: {
            offset: -25 /* 325 - 250 - 50*/
        }, 
```

示例：http: [//jsfiddle.net/3p6FC/1/](http://jsfiddle.net/3p6FC/1/)

# wordpress - Wordpress 3.5 的帖子分页

> ID：14768660
> 
> 赞同：0
> 
> 时间：2013-02-08T08:40:45.440
> 
> 标签：wordpress, pagination

我无法在显示特定类别帖子的页面中进行分页工作。分页显示，但它不会改变页面。一些帮助会很棒，谢谢！

这是我在 index.php 文件中的代码：

```
<?php
if (is_page('Blog') || is_category('Blogposts')) { 
$post_per_page = '3'; 
$args=array('category_name' => 'Blogposts', 'posts_per_page' => $post_per_page);
?>

<?php 
query_posts($args); 
if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

    <div class="post" id="post-<?php the_ID(); ?>">
        <h1><a href="<?php the_permalink(); ?>" title="<?php the_title();?>"><?php          the_title(); ?></a></h1>
            <p><?php the_time('j.n.Y')?></<p>
            <p><?php comments_number('No comments','1 comment','% comments'); ?></p>
        <?php the_content(); ?>
    </div>

  <?php endwhile; 
      endif; 

  wp_pagenavi();

 next_posts_link('« Previous Post' );
 previous_posts_link('Next Post »' );

 }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:46:14.633

使用类似的东西

```
$page = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args=array('category_name' => 'Blogposts', 'posts_per_page' => $post_per_page, 'paged' => $page); 
```

在你的第一个代码中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T12:51:00.993

```
<?php
     $category=get_category_by_slug('home');

   $category_id = $category->term_id;

   $page = (get_query_var('paged')) ? get_query_var('paged') : 1;
         query_posts( "cat=5&showposts=2&paged=".$paged);
   if (have_posts()) : while (have_posts()) : the_post();

   ?>

 <div class="contentTitle"> <?php the_title(); ?> </div>
 <div class="contentText"><?php the_content();?> </div>

   <?php  endwhile; endif; ?>
   <?php if(function_exists('wp_pagenavi')) : ?>
                           <div class=`enter code here`"pnavi">
            <?php wp_pagenavi(); ?>
                           </div>
        <?php else : ?>
            <div class="alignleft"><?php// next_posts_link(__('&laquo; Older Entries')); ?></div>
            <div class="alignright"><?php// previous_posts_link(__('Newer Entries &raquo;')); ?></div>
        <?php endif; ?> 
```

# css - 拉伸动态嵌套 div 以适应固定容器？

> ID：14768662
> 
> 赞同：1
> 
> 时间：2013-02-08T08:40:54.573
> 
> 标签：css, size, containers, stretch, html

**HTML**

```
<div class="container">
    <div class="a">dummy content</div>
    <div class="b"></div>
</div> 
```

**CSS**

```
.container {
    height: 200px; /* Fixed height */
}

.a {
    height: auto; /* Dynamic height */
}

.b {
    height: 100%; /* I want this to fit inside .container, relative to .a */
} 
```

当 .a 获得例如 100px 的动态高度时，我希望 .b 为 .container 高度 - 100px。我希望这使用纯 CSS 自动发生。

请参阅我的 jsFiddle：http: [//jsfiddle.net/59MKS/](http://jsfiddle.net/59MKS/)。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:56:01.890

添加`float:left;`到课堂`.a`

简单，但有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:47:03.650

试试这个：

```
.container {
position: absolute;
background-color: red;
width: 100px;
height: 200px; /* Fixed height */
}

.a {
position: relative;
 background-color: green;
 width: 90px;
 height: auto; /* Dynamic height */
}

.b {   
background-color: blue;
 width: 80px;
   height: 100%; /* I want this to fit inside the red container */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:18:55.583

我猜你必须使用 jQuery。这是我的做法[http://jsfiddle.net/59MKS/4/](http://jsfiddle.net/59MKS/4/)

```
var height = $(".container").height() - $(".a").height();

$(".b").css("height", height); 
```

# html - 如何删除 HTML 文件中的重复属性？

> ID：14768665
> 
> 赞同：0
> 
> 时间：2013-02-08T08:41:00.457
> 
> 标签：html, html-parsing

我需要删除/忽略 HTML 中的重复属性。我使用 xerces2 html 解析器。它不会解析标签中具有重复属性的 HTML 文件。

例子：

```
<img src="url" width="100" height="200" width="123"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:45:12.023

您可以尝试使用cyber neko html parser 来解析您的html 文件。 [http://sourceforge.net/projects/nekohtml/](http://sourceforge.net/projects/nekohtml/)

# c# - 扩展的 WPF 工具包繁忙指示器

> ID：14768668
> 
> 赞同：1
> 
> 时间：2013-02-08T08:41:18.200
> 
> 标签：c#, wpf, wpftoolkit

我正在使用扩展 WPF 工具包的 busyindicator 工具 _busy is busyindicator

```
_busy.IsBusy = true;

// Thread.Sleep(20000);                                
downloadsomedata();

_busy.IsBusy = false; 
```

忙指示灯不显示。虽然当我把整个东西放进去时它可以工作，`BackgroundWorker`但我只需要在执行后执行其他命令`downloadsomedata()`。谁能帮我这里发生了什么？我试着只放 thread.sleep 而不是`downloadsomedata();`但仍然没有显示进度条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:43:45.833

该类`BackgroundWorker`有[BackgroundWorker.RunWorkerCompleted Event](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)。因此，您可以在此事件的事件处理程序中执行其他命令（参见 MSDN 上此事件的示例）。

# 更新

再举一个例子：[扩展的 WPF 工具包——使用 BusyIndi​​cator](http://brianlagunas.com/2011/10/07/extended-wpf-toolkitusing-the-busyindicator/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-29T11:38:24.153

你可以试试这个简单的 WPF 进度指示器。

[https://www.nuget.org/packages/WPF.ProgressNotifier](https://www.nuget.org/packages/WPF.ProgressNotifier)

这是一个 WPF 控件，用于显示长时间（aync）运行任务的进度

[![努吉特](../Images/948df4f3db2425816f864977a0ffd6ef.png)](https://www.nuget.org/packages/WPF.ProgressNotifier)

## 安装

在[Nuget上可用](https://www.nuget.org/packages/WPF.ProgressNotifier/)

```
Install-Package WPF.ProgressNotifier 
```

# c# - 应用程序记录 Azure Web 应用程序的最佳实践？

> ID：14768671
> 
> 赞同：1
> 
> 时间：2013-02-08T08:41:25.560
> 
> 标签：c#, sql, asp.net-mvc-3, azure, azure-table-storage

我正在使用 asp.net mvc 3、windows azure 开发应用程序。我正在寻找有关错误日志记录和应用程序日志记录的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:54:04.283

我建议您使用 Enterprise 库并配置一个 DiagnosticMonitorTraceListener 写入您的表存储。

您可以在此处找到有关跟踪侦听器的一些信息：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/](http://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/)

# maven - 防止 Spring Roo 中的 maven 更新替换了 AspectJ 文件中的所有文件？

> ID：14768673
> 
> 赞同：2
> 
> 时间：2013-02-08T08:41:27.083
> 
> 标签：maven, spring-roo

在 spring roo 中更新 maven 时，它会替换 AspectJ 文件中的所有文件。如何预防？

我想在控制器文件中编写代码，并且不想在 maven 更新后替换我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:22:44.193

您是否正在修改 XyzController.java 或 XyzController_Roo_Controller.aj？更新 .aj 文件总是会让你对 Roo 感到悲伤。通常，您会将要更新的方法复制到 XyzController.java 并在那里进行更改。下次刷新后，Roo 将不再在 .aj 文件中创建方法，您的更改不会消失。

# flash - Fancybox 和 Flash 覆盖问题

> ID：14768675
> 
> 赞同：0
> 
> 时间：2013-02-08T08:41:38.653
> 
> 标签：flash, fancybox

我有一个旧网站，上面有一个 Flash 标题。我实现了fancybox，当我单击图像时，flash header 覆盖了fancybox

这是代码：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" width="900" height="200">
      <param name="movie" value="header.swf" />
      <param name="SCALE" value="noborder" /> 
      <param name="wmode" value="transparent" />      
      <embed src="header.swf" wmode="transparent" width="900" height="200" scale="noborder" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" ></embed>
</object> 
```

我该如何解决？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:35:05.903

我用 swfobject 2.2 解决了

多谢你们

# android - 数据未从数据库显示到 Spinner

> ID：14768677
> 
> 赞同：0
> 
> 时间：2013-02-08T08:41:43.400
> 
> 标签：android, database, spinner

我正在开发一个小应用程序，我必须在其中使用带有数据库的微调器。我在用

```
 spinner.setOnItemSelectedListener(this);
     loadSpinnerData(); 
```

我的 loadSpinnerData() 在下面

```
 private void loadSpinnerData() {
        // database handler
     AndroidContext.setContext(this);

        sqlitedatabase_obj = DatabaseHelper.getInstance().getDb();

        // Spinner Drop down elements
         DatabaseHelper db = new DatabaseHelper(getApplicationContext());
        List<String> lables = db.getAllLabels();

        // Creating adapter for spinner
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, lables);

        // Drop down layout style - list view with radio button
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        // attaching data adapter to spinner
        spinner.setAdapter(dataAdapter);
    } 
```

getAllLabels 在 DatabaseHelper 类中定义

```
 public List<String> getAllLabels(){
    List<String> labels = new ArrayList<String>();

    // Select All Query
    String selectQuery = "SELECT _id, product_name  FROM list_create WHERE _id = ?";

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(1));
        } while (cursor.moveToNext());
    }

    // closing connection
    cursor.close();
    db.close();

    // returning lables
    return labels;
} 
```

我想用数据库中的数据显示动态微调器。但是即使我没有得到异常或错误，我也无法从数据库中填充数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:47:01.333

`WHERE _id = ?`

那可能是你的问题。它正在寻找您的`_id`列等于该字符的行（通常它包含唯一的 long 值）。我的想法是您想要一个不太具体的查询。尝试调整它，然后记录您的游标计数以验证是否实际返回了任何内容：`cursor.getCount();`

# c# - 如何在我的 winform 进度条中显示状态？

> ID：14768685
> 
> 赞同：-2
> 
> 时间：2013-02-08T08:42:20.143
> 
> 标签：c#, winforms, c#-4.0, progress-bar

在将数据从一个表传输到另一个表时，我想要一个进度条在我的表单上显示状态。我尝试了一些方法，但它不起作用。

```
if (dataGridView1.RowCount - 1 == no_Of_rows)
{
    progressBar1.Value = 100;
    dataGridView1.Visible = true;
}
else
{
    progressBar1.Value = 50;
    dataGridView1.Visible = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:55:27.613

这是一个如何使用后台工作程序的示例。

```
private BackgroundWorker worker;
    public Form1()
    {
        InitializeComponent();

        this.worker = new BackgroundWorker
            {
                WorkerReportsProgress = true
            };
        worker.DoWork += WorkerOnDoWork;
        worker.ProgressChanged += WorkerOnProgressChanged;
        worker.RunWorkerCompleted += delegate
            {
                //Set the value of the progressbar to the maximum value if the work is done
                this.progressBar1.Value = this.progressBar1.Maximum;
            };
        worker.RunWorkerAsync();
    }

    private void WorkerOnProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        //Set the value of the progressbar, or increment it.
        //You can use the e.ProgressPercentage to get the value you set in the DoWork-Method
        //The e.UserState ist a custom-value you can pass from the DoWork-Method to this Method
        this.progressBar1.Increment(1);
    }

    private void WorkerOnDoWork(object sender, DoWorkEventArgs e)
    {
        // Do you stuff here. Here you can tell the backgroundworker to report the progress like.
        this.worker.ReportProgress(5);
        //You can not access properties from here, so if you want to pass a value or something else to the
        //progresschanged-method you have to use e.Argument. 

    } 
```

这是一个winforms应用程序。在表单上只有一个名为 progressbar1 的进度条

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:46:17.380

使用进度条窗口控件

供参考： http: [//www.codeproject.com/Articles/449594/Progress-Bars-Threads-Windows-Forms-and-You](http://www.codeproject.com/Articles/449594/Progress-Bars-Threads-Windows-Forms-and-You)

# c# - 在 ASP.NET 中隐藏文件下载的物理路径

> ID：14768687
> 
> 赞同：0
> 
> 时间：2013-02-08T08:42:33.567
> 
> 标签：c#, asp.net, file-io, path, download

我想让一些用户从我的网站下载一些文件，我不希望他们看到下载文件的物理路径。

我将文件移动到我的 web 文件夹之外的文件夹中，并使用 Response.WriteFile(filePath) 下载它们。这有助于我隐藏路径，但这种方法不支持我真正想要的恢复下载。

那你推荐我用什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:46:20.277

创建一个临时目录并将文件复制到那里。您甚至可以将文件重命名为其他名称，使其不可“猜测”。

我假设他们是否可以下载该文件，其内容适用于该人，因此用户知道直接链接是没有问题的。其他人将无法猜测随机目录和/或文件名。

```
var directoryName = String.Format("{0}\{1}\{2}", 
Server.MapPath("original Path"),System.Guid.NewGuid().Replace("-",""), fileName); 
```

这与我们用于从系统导出信息的过程几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:47:44.297

很简单，我以前也做过。只需隐藏“输入文件”控件，使其隐藏在 UI 上，然后创建一个单击事件触发“输入文件”控件的单击事件的按钮。然后，您还可以使用 javascript（在我的情况下是 JQuery），将浏览文件的名称放入代表文件名称的文本框中。

因此，文件路径对 UI 是隐藏的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:56:40.907

我将实现一个文件处理程序（.ashx 文件），它根据查询字符串中的某种 id 或名称来提供文件，并像这样发送它：

[asp.net ashx 处理程序提示下载而不是显示文件](https://stackoverflow.com/questions/3452125/asp-net-ashx-handler-prompting-download-instead-of-displaying-file)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T07:36:12.127

这是最好的方法：

```
 public static bool DownloadFile(HttpContext httpContext, string filePath, long speed)
    {
        // Many changes: mostly declare variables near use
        // Extracted duplicate references to HttpContext.Response and .Request
        // also duplicate reference to .HttpMethod

        // Removed try/catch blocks which hid any problems
        var response = httpContext.Response;
        var request = httpContext.Request;
        var method = request.HttpMethod.ToUpper();
        if (method != "GET" &&
            method != "HEAD")
        {
            response.StatusCode = 501;
            return false;
        }

        if (!File.Exists(filePath))
        {
            response.StatusCode = 404;
            return false;
        }

        // Stream implements IDisposable so should be in a using block
        using (var myFile = new FileStream(filePath, FileMode.Open, FileAccess.Read))
        {
            var fileLength = myFile.Length;
            if (fileLength > Int32.MaxValue)
            {
                response.StatusCode = 413;
                return false;
            }

            var lastUpdateTiemStr = File.GetLastWriteTimeUtc(filePath).ToString("r");
            var fileName = Path.GetFileName(filePath);
            var fileNameUrlEncoded = HttpUtility.UrlEncode(fileName, Encoding.UTF8);
            var eTag = fileNameUrlEncoded + lastUpdateTiemStr;

            var ifRange = request.Headers["If-Range"];
            if (ifRange != null && ifRange.Replace("\"", "") != eTag)
            {
                response.StatusCode = 412;
                return false;
            }

            long startBytes = 0;

            // Just guessing, but I bet you want startBytes calculated before
            // using to calculate content-length
            var rangeHeader = request.Headers["Range"];
            if (rangeHeader != null)
            {
                response.StatusCode = 206;
                var range = rangeHeader.Split(new[] { '=', '-' });
                startBytes = Convert.ToInt64(range[1]);
                if (startBytes < 0 || startBytes >= fileLength)
                {
                    // TODO: Find correct status code
                    response.StatusCode = (int)HttpStatusCode.BadRequest;
                    response.StatusDescription =
                        string.Format("Invalid start of range: {0}", startBytes);
                    return false;
                }
            }

            response.Clear();
            response.Buffer = false;
            response.AddHeader("Content-MD5", GetMD5Hash(filePath));
            response.AddHeader("Accept-Ranges", "bytes");
            response.AppendHeader("ETag", string.Format("\"{0}\"", eTag));
            response.AppendHeader("Last-Modified", lastUpdateTiemStr);
            response.ContentType = "application/octet-stream";
            response.AddHeader("Content-Disposition", "attachment;filename=" +
                                                        fileNameUrlEncoded.Replace("+", "%20").Replace(",",";"));
            var remaining = fileLength - startBytes;
            response.AddHeader("Content-Length", remaining.ToString());
            response.AddHeader("Connection", "Keep-Alive");
            response.ContentEncoding = Encoding.UTF8;

            if (startBytes > 0)
            {
                response.AddHeader("Content-Range",
                                    string.Format(" bytes {0}-{1}/{2}", startBytes, fileLength - 1, fileLength));
            }

            // BinaryReader implements IDisposable so should be in a using block
            using (var br = new BinaryReader(myFile))
            {
                br.BaseStream.Seek(startBytes, SeekOrigin.Begin);

                const int packSize = 1024 * 10; //read in block，every block 10K bytes
                var maxCount = (int)Math.Ceiling((remaining + 0.0) / packSize); //download in block
                for (var i = 0; i < maxCount && response.IsClientConnected; i++)
                {
                    response.BinaryWrite(br.ReadBytes(packSize));
                    response.Flush();

                    // HACK: Unexplained sleep
                    var sleep = (int)Math.Ceiling(1000.0 * packSize / speed); //the number of millisecond
                    if (sleep > 1) 
                        Thread.Sleep(sleep);
                }
            }
        }
        return true;
    }

    static string GetMD5Hash(string input)
    {
        // Create a new instance of the MD5CryptoServiceProvider object.
        MD5 md5Hasher = MD5.Create();

        // Convert the input string to a byte array and compute the hash.
        byte[] data = md5Hasher.ComputeHash(Encoding.Default.GetBytes(input));

        // Create a new Stringbuilder to collect the bytes
        // and create a string.
        StringBuilder sBuilder = new StringBuilder();

        // Loop through each byte of the hashed data 
        // and format each one as a hexadecimal string.
        for (int i = 0; i < data.Length; i++)
        {
            sBuilder.Append(data[i].ToString("x2"));
        }

        // Return the hexadecimal string.
        return sBuilder.ToString();
    } 
```

# sql - 如何在 Oracle Pro*C 中显示包含主变量值的 SQL 语句？

> ID：14768688
> 
> 赞同：5
> 
> 时间：2013-02-08T08:42:52.380
> 
> 标签：sql, c, oracle, binding

[`sqlgls()`在 Pro*C 代码中，您可以通过（甚至`SQLStmtGetText()`）](http://docs.oracle.com/cd/E14072_01/appdev.112/e10825/pc_09err.htm#i6810)获取最后执行的 SQL 语句。

这对于记录目的很有用——尤其是对于动态语句。

但是这些 SQLLIB 函数返回的 SQL 语句只包含绑定标记（即，类似`:b1`，`:b2`...）。不包括使用的主机变量的实际值。

因此，我有以下问题：如何显示包含主机变量值的最后一条 SQL 语句？

否则我必须在打印返回的字符串后手动打印所有使用的变量`sqlgls()`。这并不比完全不使用打印 SQL 语句更方便`sqlgls`。

例如，而不是

```
INSERT INTO MYTABLE VALUES (:b1, :b2, :b3); 
```

我想打印：

```
INSERT INTO MYTABLE VALUES ("hello", "world", 12); 
```

（除了日志记录，为了更容易将它复制到 SQL-shell 中 - 即用于测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:25:35.730

您可以使用**v$sql_bind_capture**来跟踪绑定变量值。

v$sql_bind_capture 已被引入以报告有关 SQL 游标使用的绑定变量的信息。此视图允许检索给定 SQL 游标的绑定变量的实际值。此外，您可以从 v$sqlarea 或 v$sqltext 或 v$sqltext_with_newlines 获取 sql 文本。

```
SELECT 
   a.sql_text, 
   b.name, 
   b.position, 
   b.datatype_string, 
   b.value_string 
FROM
  v$sql_bind_capture b,
  v$sqlarea          a,
  v$session          c, 
WHERE
   c.sid = (select sys_context('USERENV','SID') from dual)
AND
   b.sql_id = c.prev_sql_id
AND 
   b.sql_id = a.sql_id; 
```

您需要在此语句上尝试嵌入式 sql。并获取获取完整语句所需的变量。而且您需要一个简单的脚本来获取具有绑定值的 sql 文本，我认为这并不比自己打印绑定值更方便。

另一种方法是[运行 10046 4 级跟踪](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:4254158186083)，但您需要再次执行一些技巧来支持 copynpaste 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T18:30:17.640

我查看了 Pro*C 生成的代码，经过一些实验后，我导出了使用的内部 Oracle 库函数的 API/ABI。

因此，我[创建了跟踪库 libtraceproc](https://github.com/gsauthof/traceproc)，它在预加载时会拦截相关的 Oracle 库函数调用并漂亮地打印包括主机变量值的 SQL 语句。

该库有一些运行时选项，例如，用于记录到文件、输​​出统计信息以及在实际 Oracle 调用之前和/或之后启用跟踪。

它还支持 OCI API 的低级跟踪，即您也可以将它用于 OCI/OCCI/OTL 程序。

## 例子

```
$ LD_PRELOAD=./libtraceproc.so TRACEPROC_OPTIONS="-intercept -notime -sql" ./example/main
[..]
-- Before execution:
-- example/main.pc:274
insert into example_tbl (str,n) values ('a' ,0 ) returning n into :s5:s6  ;
insert into example_tbl (str,n) values ('b' ,1 ) returning n into :s5:s6  ;
[..]
-- After execution:
-- example/main.pc:274
insert into example_tbl (str,n) values ('a' ,0 ) returning n into 0  ;
insert into example_tbl (str,n) values ('b' ,1 ) returning n into 1  ;
[..] 
```

`libtraceproc.so`是跟踪库，`main`是一个示例 Pro*C 应用程序。

请注意，无需重新编译或重新链接 Pro*C 代码。跟踪库由运行时链接器预加载。

一个

```
$ LD_PRELOAD=./libtraceproc.so TRACEPROC_OPTIONS="-help" ./example/main 
```

显示库的帮助屏幕。

# parallel-processing - Make：拆分文件和并行化

> ID：14768693
> 
> 赞同：2
> 
> 时间：2013-02-08T08:43:18.283
> 
> 标签：parallel-processing, makefile, bioinformatics

我的生物信息学工作流程使用**make**的选项“-j”并行处理数据。

```
mutations.tsv : file1.data file2.data file3.data
       find-mutations $^ > $@

file1.data: raw1.txt
        (....)
(...) 
```

**mutation.tsv**是一个瓶颈，但如果

1）我可以在 file1.data file2.data 中找到不同染色体的数量

2) 为每条染色体运行“查找突变”

3) 将所有结果合并到 'mutations.tsv'

就像是：

```
mutations.tsv : file1.data file2.data file3.data
       for CHROM in `cut -d ' ' -f 1 $< | sort -u` ; do grep $${CHROM} $^| find-mutations -  >> $@ ; done 
```

如何更改它以创建并行工作流？

注意：这个 makefile 本身是动态生成的。在创建 Makefile 之前我不知道染色体的数量，所以我不能使用以下解决方案：

```
mutations.tsv  : chr1.tsv chr2.tsv chr3.tsv chr4.tsv
            cat $^ > $@

chr1.tsv: file1.data file2.data file3.data
        grep chr1 $^| find-mutations -  > $@

chr2.tsv: .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:30:37.723

我认为您所说的无法完成的解决方案是正确的。您可以使用`wildcard`make 获取可变数量的 chr 文件。例如：

```
chrs = $(wildcard chr*.tsv)
files = $(wildcard file*.data)

mutations.tsv : $(chrs)
            cat $^ > $@

$(chrs): $(files)
        grep chr1 $^| find-mutations -  > $@ 
```

# java - Java CentOs 带有特殊字符和空格的文件路径 FileNotFound

> ID：14768695
> 
> 赞同：-1
> 
> 时间：2013-02-08T08:43:24.510
> 
> 标签：java, centos

我在访问 java 中的某些文件时遇到问题。尽管使用 folder.listFiles() 等文件从文件系统中加载文件......

我遇到的问题是某些文件有特殊字符和空格。

例子：

```
 /test folder/subtestfolder/>> my file.txt 
```

我认为java将其翻译为：

```
 '/test folder/subtestfolder/?? my file.txt' 
```

将其传递给 CentOs。但是因为有空格和特殊字符，所以没有对???进行分析。**是否可以强制使用 >> 或对其进行编码？**

这是我从我使用的库中得到的错误：

```
java.io.FileNotFoundException: /test folder/subtestfolder/?? my file.txt(No such file or directory)
    at java.io.FileInputStream.open(Native Method)... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:50:04.263

Java 系统属性`file.encoding`应该与控制台的字符编码相匹配。在命令行上启动 java 时必须设置该属性：

```
java -Dfile.encoding=UTF-8 … 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:50:07.217

逃脱他们使用`\`

像`/test folder/subtestfolder/\>\> my file.txt`

# android - 我如何在android上发送这样的POST请求？

> ID：14768696
> 
> 赞同：0
> 
> 时间：2013-02-08T08:43:25.703
> 
> 标签：android, http, post

我有这个格式页面

```
<html><head><script>
function sendForm(form)
{
      form.value.value = "{ \"y\": " + form.example2.value + " }"
      form.submit();
}
</script></head>
<body>
<form action="https://....WEBSITE..." method="post">
<input type="hidden" name="value">
number:<input type="text" name="example2">
<input type="button" value="Submit" onClick="sendForm(this.form);">
</form>
  </body>
</html> 
```

我想知道，如何将其转换为 android 中的 post 对象？我希望从我的 android 手机发送完全相同的数据，假设我有一个变量，其中包含我希望发送的整数和代表我的 url 的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:45:53.433

使用`StringEntity`类。您可以将 StringEntity 对象设置为您的`HttpPost`using`setEntity()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:54:47.803

尝试这个

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("value", value));
params.add(new BasicNameValuePair("example2", example2_value));

try {
    HttpParams httpParameters = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParameters, 10000);
    HttpConnectionParams.setSoTimeout(httpParameters, 10000);
    HttpClient httpClientpost = new DefaultHttpClient(httpParameters);

    HttpPost post = new HttpPost("https://....WEBSITE...");

    UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params, HTTP.UTF_8);
    post.setEntity(ent);

    HttpResponse responsePOST = httpClientpost.execute(post);
    HttpEntity resEntity = responsePOST.getEntity();
    String getresponse = EntityUtils.toString(resEntity); //Response from the server
} catch (IOException e) {
    e.printStackTrace();
} catch (JSONException e) {
    e.printStackTrace();
} 
```

# mysql - 在没有数据填充的情况下重命名mysql中的列

> ID：14768698
> 
> 赞同：1
> 
> 时间：2013-02-08T08:43:33.197
> 
> 标签：mysql, alter, table-rename

在 mysql中，
当我们使用`alter table`语法重命名列时，该列将发生数据填充。
例如认为这种情况，

```
create table table1(i int(10) primary key,k varchar(10));

alter table table1 change k j varchar(10); 
```

这里我们只想重命名一个列，而不是数据类型。无论如何，我们必须在上述情况下声明一个数据类型。因此，即使数据类型相同，也会发生迭代以更改数据。我们不想要这个迭代。

我的问题，
有什么选择可以减少这个迭代？或者是否有任何选项可以在没有此迭代的情况下重命名列？

# git - Git 状态显示 X 提交前的本地分支 - 应该只有 1

> ID：14768701
> 
> 赞同：1
> 
> 时间：2013-02-08T08:43:45.813
> 
> 标签：git, git-commit, fast-forward

我一直在堆栈和其他论坛上搜索并尝试各种解决方案，但似乎无法解决这个问题。

> [Git：Branch 领先于 X 次提交。没有帮助做 git pull](https://stackoverflow.com/questions/10966498/git-branch-is-ahead-by-x-commits-doesnt-help-doing-git-pull)
> 
> [当我看起来是最新的并且推拉（无文件）修复它时，为什么 git 说我提前 40 次提交？](https://stackoverflow.com/questions/12009089/why-does-git-say-i-am-40-commits-ahead-when-i-seem-up-to-date-and-a-push-pull-n)
> 
> [当我需要 *pull* origin master 时，为什么它会说“您的分支比 origin/master 领先 857 次提交”](https://stackoverflow.com/questions/11032661/why-does-it-say-your-branch-is-ahead-of-origin-master-by-857-commits-when-i-ne)

总体问题是我拉了一个站点结帐，然后不得不对配置（数据库、api 位置等）进行一些本地更改，并防止每次我继续提交本地更改时都必须存储和重新应用这些文件。我在 1 个本地提交下完成了所有这些作为“本地配置提交”。而此时 git status 显示其提前 1。

```
root@web1 web]# git status
 On branch master
 Your branch is ahead of 'origin/master' by 1 commits. 
```

然而，在过去的一个月里，我们一直在开发和修复一些东西。我们都从我们单独的分支中工作并合并回一个开发分支，然后从那里到 master 等等。一切准备就绪后，我进入生产环境并使用“git pull”拉下更改。这似乎一直运作良好，但是我今天注意到状态现在已经改变。

```
root@web1 web]# git status
On branch master
Your branch is ahead of 'origin/master' by 31 commits. 
```

当我查看针对 origin/master 的 git 日志时，似乎我看到合并作为本地提交进入？

小日志片段：

```
[root@web1 web]# git log origin/master..HEAD 
commit 336743eb411804487ad2f8a2e31701b094fb03f0
Merge: 58c8230 3478924
Author: root <root@web1.(none)>
Date:   Fri Feb 1 15:32:35 2013 -0500

    Merge branch 'master' of http://gitrepo.com/Site

commit 58c82303c523a3c9217dd677ba23582e168007cc
Merge: 6c9de32 0e1c327
Author: root <root@web1.(none)>
Date:   Fri Feb 1 15:04:58 2013 -0500

    Merge branch 'master' of http://gitrepo.com/Site

commit 6c9de32c2fed77e442e73389aa8041f067a23cc4
Merge: ff586b4 52a7ea9
Author: root <root@web1.(none)>
Date:   Fri Feb 1 14:38:08 2013 -0500

    Merge branch 'master' of http://gitrepo.com/Site 
```

我怀疑我的回购已经被适当地“快进”了，并且在每次拉取后仍然提前 1 次提交。在对 origin/master 进行比较时，您可以看到我没有太多更改（似乎）只是配置。这是来自原始配置更改和本地提交。

```
[root@web1 web]# git diff origin/master..HEAD --name-only
application/config/api.php
application/config/config.php
application/config/database.php 
```

我已经尝试了上面的各种链接，并尝试了获取、更多拉取等，但均无济于事。有没有一种方法可以让我的本地仓库正确地快进，这样我只能看到我所做的 1 个本地提交是我的 var 'ahead'？我不能完全将这些更改推送到 master，因为这会导致这些更改被拉到其他安装。然后我想在解决这个问题之后，最好的部署方式是什么，更改一些配置并能够不断更新。根据我的理解 stash 会起作用，但这实质上会使您的更改不合适，然后您可以拉动，然后重新申请，但我无法承受这个小步骤的停机时间，特别是如果它涉及必须整理任何合并冲突。

或者，有没有办法可以以某种方式将这些文件从提交中提取出来，以便我可以推动对所有内容进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:32:40.383

如果你有一个不在的本地提交，你就不能快进`origin/master`，它必须是一个合并。当您在遥控器后面时，将完成快进，没有本地更改。由于您有本地更改，因此您不能快进。

也许您想要的是变基，这将暂时撤消您的本地提交，快进到远程分支的尖端，然后重新应用您的本地提交作为最后一次提交。

```
git rebase origin/master 
```

或者，如果它被设置为默认上游，并且您没有使用旧版本的 Git，只需

```
git rebase 
```

有些人*总是*使用变基从远程拉取，如果远程配置为拒绝合并提交，则需要使用变基，但您应该在使用它之前了解变基的作用，请参阅[http://git-scm.com/book /en/Git-Branching-Rebase](http://git-scm.com/book/en/Git-Branching-Rebasing)和[http://darwinweb.net/articles/the-case-for-git-rebase](http://darwinweb.net/articles/the-case-for-git-rebase)

# opencv - 无法安装 OpenCV

> ID：14768702
> 
> 赞同：1
> 
> 时间：2013-02-08T08:43:49.143
> 
> 标签：opencv

我一直在尝试在我的计算机上安装 OpenCV（用于 python 开发），但一直没有运气。

我试过跑步`brew install opencv`，但我得到了 404

`http://threadingbuildingblocks.org/sites/default/files/software_releases/source/tbb41_20121003oss_src.tgz`

```
$ uname -a
Darwin 12.2.0 Darwin Kernel Version 12.2.0: root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:37:14.983

你应该按照这里的步骤：http: [//opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)

您也可以尝试从源代码构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T17:52:09.757

我也很难使用自制软件安装 opencv。我认为这与安装的多个版本的 python 有关。您可以使用

```
python --version 
```

这就是最终为我工作的原因。不能保证别人成功：

1.  如果您已经使用自制软件，请卸载 opencv

    `$ brew uninstall opencv`

2.  在 macports 上使用 selfupdate 命令

    `$ sudo port selfupdate`

3.  然后升级安装的端口

    `$ port upgrade outdated`

4.  用自制软件重新安装opencv

    `$ brew install opencv`

5.  那时，它告诉我将以下内容添加到我的 ~/.bash_profile

    `export PYTHONPATH=/usr/local/lib/python2.7/site-packages:$PYTHONPATH`

你可以用

```
$ python
>> import cv2 
```

我注意到这个过程将我的多个 python 版本减少到只有 python 2.7.5。可能有更好的方法来做到这一点，但试一试。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-13T12:25:32.400

在尝试了每一种方法之后，它们都不适合我。终于找到了使用此命令安装 opencv 的方法。对于 python 3- `pip3 install opencv-contrib-python` 对于 python 2- `pip install opencv-contrib-python`

# javascript - 将 xml 列表处理成 HTML

> ID：14768703
> 
> 赞同：0
> 
> 时间：2013-02-08T08:43:49.797
> 
> 标签：javascript, html, xml

我希望有人能够帮助我，我是 javaScript 和 XML 的新手，目前我正在尝试将产品的 xml 列表处理为我的 HTML 页面中的 ul 列表。我想从 xml 中获取所有产品并将它们显示为页面上的 li 元素。我已经设法编写代码来遍历 xml，但它只返回 xml 列表中的最后一个产品。我怎样才能得到所有的产品？欢迎任何建议。到目前为止我的代码：

```
 <script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","product.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

var x=xmlDoc.getElementsByTagName("product");
for (i=0;i<x.length;i++)
  { 
  liOpen=("<li><p>");
  title=(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
  divOpen=("</p><div class='prod-sq-img'>");
  image=(x[i].getElementsByTagName("imgfile")[0].childNodes[0].nodeValue);
  closingTags=("</div></li>");
  txt=  liOpen +  title + divOpen + image + closingTags ;
document.getElementById("ulList").innerHTML=txt;
  }

        </script> 
```

感谢您的任何帮助

我的其他代码工作正常，它从列表中获取所有产品，但我需要将它传递到 DIV，有什么想法吗？

```
document.write("<ul class='prod-sq'>");
var x=xmlDoc.getElementsByTagName("product");
for (i=0;i<x.length;i++)
  { 
  document.write("<li><p>");
  document.write(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
  document.write("</p><div class='prod-sq-img'>");
  document.write(x[i].getElementsByTagName("imgfile")[0].childNodes[0].nodeValue);
  }
document.write("</ul>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:00:03.627

试试这个..

```
 var liOpen=("<li><p>");
      var divOpen=("</p><div class='prod-sq-img'>");  
      var closingTags=("</div></li>");
    var txt;
    var image;
    var title;
var y=xmlDoc.getElementsByTagName("product");
    for (j=0;j<y.length;j++)        {
    var x=xmlDoc.getElementsByTagName("product");
    for (i=0;i<x.length;i++)
      { 
      title=(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
      image=(x[i].getElementsByTagName("imgfile")[0].childNodes[0].nodeValue);
      txt=  liOpen +  title + divOpen + image + closingTags ;
      }

    document.getElementById("ulList").innerHTML=txt;  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:21:50.173

我认为更改以下行将解决问题。

```
document.getElementById("ulList").innerHTML+=txt; 
```

# git - 合并来自同一贡献者的多个拉取请求时遇到问题

> ID：14768705
> 
> 赞同：2
> 
> 时间：2013-02-08T08:43:50.413
> 
> 标签：git, github

我收到了来自同一个贡献者的几个拉取请求。我遵循了 GitHub ' [Using Pull Request](https://help.github.com/articles/using-pull-requests) ' 的建议，并毫无问题地合并了他的第一个请求：

```
git checkout master
git remote add username git://github.com/username/repo.git
git fetch username
git merge username/pull-request1 
```

在合并来自同一个人的其他拉取请求之前，我向 master 添加了一些提交，然后推送。他的拉取请求自动关闭，我很高兴。

然后，今天我继续合并他的第二个拉取请求。

```
git merge username/pull-request2 
```

合并时没有冲突，但来自 pull-request2 的代码不存在（有些块存在）。读完[这篇](https://stackoverflow.com/questions/14391421/merging-pull-requests-together)文章后，我怀疑在合并剩余的拉取请求之前提交 master 是一个错误，但现在我不知道该怎么做。由于我推送到主仓库而其他人可能已经撤消，所以我无法及时返回。

编辑：我刚刚尝试了第三个请求，并且那个请求合并得很好。所以它一定与 pull #2 有关，但实际上，它只是一个 pull request。我不明白为什么它不应该合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:14:13.343

我在这里发布我的发现，希望它们可以对其他读者有所帮助。

那个 PR 唯一奇怪的是贡献者的分支名称，这恰好是`master`他想要合并的分支。我认为这可能是问题所在。在调查时，我什至发现了对此类问题的[引用：](http://codeinthehole.com/writing/pull-requests-and-other-good-practices-for-teams-using-github/)

> 当您的拉取请求合并到目标分支时，维护者可能会决定重新调整您的提交以避免合并提交，或者将提交压缩为单个连贯的提交。**如果您的拉取请求来自您的 'master' 分支，则在将目标分支合并回您自己的 'master' 时会遇到问题**。

我们最终关闭了麻烦的 PR。然后贡献者从不同的分支提交了一个新的，它合并得很好。

# c++ - 创建动态整数数组时遇到问题

> ID：14768708
> 
> 赞同：0
> 
> 时间：2013-02-08T08:43:59.047
> 
> 标签：c++, arrays, dynamic, integer, dynamic-arrays

我确定它很小，但我一直收到一个关于我如何在初始化之前尝试使用它的初始化错误。

```
#include <iostream>
using namespace std;
int main()
{
    int* ordered;

    ordered[0] = 5;
    cout << ordered[0];
    return 0;
} 
```

额外的问题，我可以`*ordered`用来访问开始地址并循环使用数组`*ordered++`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:48:42.220

```
int* ordered;
ordered[0] = 5; 
```

`ordered`是一个未初始化的指针。它指向任何随机地址。取消引用这样的指针会导致***未定义的行为***，并且很可能会使您的程序崩溃。
为了能够用这个指针做一些有意义的事情，它需要指向一些有效的内存区域。你可以这样做：

```
int *ordered = new[x]; 
```

现在，`ordered`指向一个足以容纳`x`整数的内存区域。但是，您必须记住在使用后释放内存：

```
delete []ordered; 
```

* * *

在 C++ 中，您最好使用`std::vector`而不是动态分配的数组，因为您不必手动管理使用`new []`. 简单地说，很难出错`std::vector`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T08:45:40.037

问题是没有与`ordered`. 你有一些选择：

*   分配一些内存来`ordered`使用`new[]`
*   **改用`std::vector<int>`a**

如果您使用，`vector`您可以在开始时分配内存或使用它的`push_back`方法，这将导致它根据需要增长。

# c# - 保留 toString 中的小数位

> ID：14768709
> 
> 赞同：1
> 
> 时间：2013-02-08T08:44:00.123
> 
> 标签：c#, winforms, textbox, rounding, tostring

有没有办法让“double.toString()”的结果字符串包含双精度的确切值？

例如

```
double d = 123.0   ->   toString() will be "123" 
```

我找到了一些使用自定义格式的解决方案，`.toString("#.0")`但如果我想添加更多小数位，我会回到我开始的地方

```
double d = 123.00   ->  toString("#.0") will be 123.0
double d = 123.0    -> toString("#.00") will be 123.00 
```

我尝试这样做的原因是因为我有自定义文本框，必须使用与实际显示的值不同的值，并且当您尝试在此文本框中输入您自己的值时，文本框会忽略您的文本尝试在小数位输入零。因此，我需要该`toString`值等于 的确切值，`double`以便可以正确输入该数字。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:45:16.717

> 有没有办法让“double.toString()”的结果字符串包含双精度的确切值？

它*确实*包含 a 的确切值`double`- 但 a`double`不存储 123、123.0 和 123.00 之间的任何差异。

`decimal`但是，存储差异 - 如果您关心精确的十进制数字，则更合适。

另一方面，听起来你*实际上*是在错误的地方进行比较：

> 我尝试这样做的原因是因为我有自定义文本框，必须使用与实际显示的值不同的值，并且当您尝试在此文本框中输入您自己的值时，文本框会忽略您的文本尝试在小数位输入零。

不要比较*字符串*值 - 解析值（到`decimal`或`double`），然后比较解析的值。

This will also prevent problems with *leading* zeroes, where "0123" and "123" represent the same value, but are different strings.

# ruby-on-rails-3 - rails 自定义验证器使用载波验证 mime 类型

> ID：14768717
> 
> 赞同：0
> 
> 时间：2013-02-08T08:45:00.117
> 
> 标签：ruby-on-rails-3, validation, mime-types, carrierwave

我正在使用以下方式通过载波验证上传文件内容的 mime 类型。

[https://gist.github.com/denyago/1298417](https://gist.github.com/denyago/1298417)

但即使没有上传任何内容，此验证也会一直运行。这显然失败了，因为没有什么可以验证的。

```
 validates :logo, :file_mime_type => {:content_type => /image/} 
```

没有上传任何内容时，是否有任何解决方法可以跳过验证？

谢谢 ！！

**更新：**

在没有上传的内容存在之前，使用 proc 或 lambda 效果很好。

```
 ..., if => Proc.new{|company| company.logo.present?}

      @company.save #works will when @company contains correct mime type logo file 

      @company.save #fails when @company contains no logo file 
```

一旦有人上传徽标，它就会正确保存对象，并开始在没有图像上传的任何其他保存上引发错误的 mime 类型异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T19:28:47.503

当我尝试保存包含载波属性的模型时遇到了这个问题，比如您的示例中的图像标题。

```
validates :logo, :file_mime_type => { :content_type => /image/ },
:if => Proc.new{ |img| img.logo.present? and img.logo_changed? } 
```

_改变了吗？可用于判断该特定属性是否已更改：[如何检测模型的属性更改？](https://stackoverflow.com/questions/1586536/how-to-detect-attribute-changes-from-model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:31:29.323

尝试添加 if 条件。例如：

`validates :logo, :file_mime_type => {:content_type => /image/}, :if => Proc.new{|img| img.logo.present?}`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T00:20:44.993

如载波文档中所述。

```
class MyUploader < CarrierWave::Uploader::Base
  def extension_white_list
   %w(jpg jpeg gif png)
  end
end 
```

# php - 两个 javascript 文件冲突

> ID：14768734
> 
> 赞同：-1
> 
> 时间：2013-02-08T08:45:41.960
> 
> 标签：php, javascript, jquery, asp.net, web-deployment

我在我的网页上使用了 fancybox。并且还使用了另一个使用以下 javascript 文件的滑块

```
<script src="NewsSlider/Allmaritim.all.min.js" type="text/javascript"></script> 
```

问题是，fancybox 无法正常工作。当我删除上面的 javascript 文件时，fancybox 工作正常。

有没有办法让javascript文件分开工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:51:04.303

问题可能是您在两个文件中定义了相似的函数[至少函数名称]。您的花哨的盒子是否附加到点击或加载事件？否则，请重新排序包含文件的方式：也就是说，在您的花哨的盒子脚本之后包含 Allmaritim.all.min.js。如果在加载之前不需要此文件，您也可以在页面底部包含！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:51:43.930

他们可能都在使用 jquery

尝试`jQuery.noConflict(true);`在两个 javascript 调用之间调用两个脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:51:24.567

您可以使用 $.noConflict(); 或 jQuery.noConflict();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:52:00.503

有时 javascript 库变量，名称与其他名称冲突。与`jQuery` $ 变量一样，有时可能会与其他库发生冲突。他们`[noConflict]` [在这里](http://api.jquery.com/jQuery.noConflict/)提供了一个解决方案。因此，您需要阅读这些 javascript 库的文档以解决冲突问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T09:56:19.137

```
<html><head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <div id="log">
    <h3>Before $.noConflict(true)</h3>
    </div>
<script src="http://code.jquery.com/jquery-1.6.2.js"></script>
<script>
    var $log = $( "#log" );
    $log.append( "2nd loaded jQuery version ($): " + $.fn.jquery + "<br>" );
    jq162 = jQuery.noConflict(true);
    $log.append( "<h3>After $.noConflict(true)</h3>" );
    $log.append( "1st loaded jQuery version ($): " + $.fn.jquery + "<br>" );
    $log.append( "2nd loaded jQuery version (jq162): " + jq162.fn.jquery + "<br>" );
</script></body></html> 
```

查看此示例代码。请参阅此链接以获取更多信息[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)。

# java - 正则表达式仅在标签内替换（需要帮助编写正则表达式）

> ID：14768735
> 
> 赞同：1
> 
> 时间：2013-02-08T08:45:44.970
> 
> 标签：java, regex

我需要编写替换`a`为`b`但仅在`<pre>`标签内的正则表达式。

例子

```
a <pre> c a <foo> a d </pre> a 
```

结果

```
a <pre> c b <foo> b d </pre> a 
```

请帮助编写java`String.replace`函数的表达式。保证`pre`标签没有嵌套。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:23:58.303

我认为你可以用 String.replace() 做的最好的事情是：

```
String string = ...
for (;;)
{
    String original = string;
    string = string.replaceFirst("(<pre>.*?)a(.*?</pre>)", "$1b$2");
    if (original.equals(string))
        break;
} 
```

（**编辑**：@Bohemian 已经注意到上述正则表达式无法正常工作。因此需要将其更改为：（
`(<pre>(?:(?!</pre>).)*a((?:(?!<pre>).)*</pre>)`未经测试）以避免在部分之外匹配`<pre>...</pre>`。通过此更改，我们不需要`*?`量词并且可以使用更多常见的“贪婪”（`*`）量词。这开始看起来很像我的其他答案，我只是开玩笑！）

你最好使用匹配器（按照我脑海中的代码）：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

Pattern pattern = Pattern.compile("(?<=<pre>)(.*?)(?=</pre>)");
Matcher m = pattern.matcher(string);
StringBuffer replacement = new StringBuffer();

while (matcher.find())
{
     matcher.appendReplacement(replacement, "");
     // Careful using unknown text in appendReplacement as any "$n" will cause problems
     replacement.append(matcher.group(1).replace("a", "b"));
}    
matcher.appendTail(replacement);
String result = replacement.toString(); 
```

**编辑**：更改了上面的模式，使其与周围`<pre>`的 and不匹配`</pre>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:57:07.000

这是一个可以完成这项工作的正则表达式（我认为：我不会在它通过所有测试方面下太多赌注![在此处输入图像描述](../Images/1ac43e12e7eb7b28f49ae13b187a4650.png)）

```
String replacement = original.replaceAll(
    "(?<=<pre>(?:(?!</pre>).){0,50})a(?=(?:(?!<pre>).)*</pre>)", 
    "b"); 
```

解释：

*   `(?<=<pre>(?:(?!</pre>).){0,50})`- `<pre>`只要我们不回头`</pre>`找到它，就向后看。Java 需要有限的最大长度后视，所以我们使用`{0,50}`而不是`*`.
*   `a`- 我们要替换的字符
*   `(?=(?:.(?!<pre>))*</pre>)`- 向前看，`</pre>`只要我们不穿越过去`<pre>`就可以找到它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T09:23:23.510

```
Pattern pattern = Pattern.compile("<pre>(.+?)</pre>");
java.util.regex.Matcher matcher = pattern.matcher("a <pre> c a <tag> a d </pre> a"); 
```

试试这个：

# ios - 具有 UITapGestureRecognizer 操作的 UICollectionViewCell 仅在状态 3 下调用一次

> ID：14768747
> 
> 赞同：1
> 
> 时间：2013-02-08T08:46:43.453
> 
> 标签：ios, objective-c

我的实现基于 UICollectionViewController。我尝试在 UiTableCell 上实现触摸行为以识别 touchdown 和 up 事件。我的解决方案基于一些研究，但我不确定这是完成它的正确方法。

我在每个表格单元格上附加了 UITapGestureRecognizer：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    NSDictionary *homeItem = self.homeItems[indexPath.row];
    HomeCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:homeItem[@"cell"] forIndexPath:indexPath];

    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(cellClicked:)];
    //NSArray* recognizers = [cell gestureRecognizers];
    //    tapGesture.numberOfTapsRequired = 1;
    tapGesture.numberOfTouchesRequired = 1;

//    // Make the default gesture recognizer wait until the custom one fails.
//    for (UIGestureRecognizer* aRecognizer in recognizers) {
//        if ([aRecognizer isKindOfClass:[UITapGestureRecognizer class]])
//            [aRecognizer requireGestureRecognizerToFail:tapGesture];
//    }

    [cell addGestureRecognizer:tapGesture];

    return cell;
} 
```

但是对于识别器状态 3 (UIGestureRecognizerStateEnded)，只调用了一次声明的操作

```
- (void)cellClicked:(UIGestureRecognizer *)recognizer {
    Log(@"cellClicked with state: %d", [recognizer state]);
} 
```

这一切都可能是由 CollectionView 行为的默认实现引起的。

我是 objc 和 ios 开发的新手，所以我不确定我能做些什么来完成我的实现，以通过状态更改单元格的样式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:01:36.207

如[*iOS 事件处理指南*](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html#//apple_ref/doc/uid/TP40009541-CH2-SW9)中所述，手势识别器有两种类型：*离散*和*连续*。A`UITapGestureRecognizer`是离散的，这意味着它在识别其手势时只发送一个动作消息。

离散识别器，例如`UITapGestureRecognizer`在状态中发送动作`UIGestureRecognizerStateRecognized`，它是`UIGestureRecognizerStateEnded`.

如果您想分别识别触地和触地事件，您最好的选择可能只是使用自定义子类`UICollectionViewCell`（或您需要检测事件的任何视图），并覆盖`touchesBegan:withEvent:`相关消息。

# c++ - 在 C++ 控制台应用程序中打印字符串资源（字符串表）

> ID：14768750
> 
> 赞同：2
> 
> 时间：2013-02-08T08:46:54.197
> 
> 标签：c++, visual-c++

**背景：** 我正在开发一个可以同时运行 GUI 和控制台模式的 C++ MFC 应用程序。但在这两种情况下，用户都需要使用带有一些参数的命令提示符运行应用程序。当初始化应用程序时，它会检查命令提示符上的使用输入参数，并决定在控制台模式或 GUI 模式下运行。此应用程序需要使用多种语言。所以我使用字符串表来存储显示文本。

因此，在这里我使用此功能将现有命令提示符附加到应用程序，以在应用程序以控制台模式运行时显示状态。

```
BOOL CMyclass::EnableConsolePrinting(){
    BOOL GotConsoleAttach = FALSE;    
    if (AttachConsole(ATTACH_PARENT_PROCESS))
    {   
        int osfh = _open_osfhandle((intptr_t) GetStdHandle(STD_OUTPUT_HANDLE), 8);
        if ((HANDLE)osfh != INVALID_HANDLE_VALUE)
        {
            *stdout = *_tfdopen(osfh, _T("a"));
            GotConsoleAttach = TRUE;
        }
    }
    return GotConsoleAttach;
} 
```

然后像这样将状态打印到控制台。

```
this->EnableConsolePrinting();  
cout << CMsg(IDS_STRING_ERROR_MESSAGE); 
```

在 GUI 模式下，我使用此方法在标签中显示文本。

```
lblError.SetWindowTextW(CMsg(IDS_STRING_ERROR_MESSAGE)); 
```

**问题：**两种方法都编译并运行良好。但是 GUI 模式会显示正确的字符串，并且控制台会打印一些有意义的代码，比如这样。`00C2D210`对于相同的字符串。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:50:45.637

这是因为字符串是宽字符串（从尾随猜测，`W`使用`SetWindowTextW`窄字符时宽字符串的输出`std::cout`通常是一个神秘的十六进制数字）。用于`wcout`将宽字符串输出到控制台。

```
std::wcout << CMsg(IDS_STRING_ERROR_MESSAGE); 
```

* * *

可能是标准输出流可能无法`CString`直接打印，在这种情况下，您可能必须为其添加输出运算符重载：

```
std::ostream& operator<<(std::ostream& os, const CString& str)
{
    auto length = str.GetLength();
    os << str.GetBuffer(length + 1);
    str.ReleaseBuffer();

    return os;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:41:54.640

在这里，我通过几天的测试来回答我的问题。这是针对windows环境的。

```
#define GetCMsg(x) CString(MAKEINTRESOURCE(x))

void myClass::redirectIOToConsole()
{
    #define MAX_CONSOLE_LINES  500

    int hConHandle;
    long lStdHandle;

    CONSOLE_SCREEN_BUFFER_INFO coninfo;
    FILE *fp;

    // If you need to allocate a new console for this app
    //AllocConsole();

    //Attach existing console for this application
    AttachConsole(ATTACH_PARENT_PROCESS);

    // set the screen buffer to be big enough to let us scroll text
    GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE),&coninfo);
    coninfo.dwSize.Y = MAX_CONSOLE_LINES;
    SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE),coninfo.dwSize);

    // redirect unbuffered STDOUT to the console
    lStdHandle = (long)GetStdHandle(STD_OUTPUT_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);
    fp = _fdopen( hConHandle, "w" );
    *stdout = *fp;
    setvbuf( stdout, NULL, _IONBF, 0 );

    // redirect unbuffered STDIN to the console
    lStdHandle = (long)GetStdHandle(STD_INPUT_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);
    fp = _fdopen( hConHandle, "r" );
    *stdin = *fp;
    setvbuf( stdin, NULL, _IONBF, 0 );

    // redirect unbuffered STDERR to the console
    lStdHandle = (long)GetStdHandle(STD_ERROR_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);
    fp = _fdopen( hConHandle, "w" );
    *stderr = *fp;
    setvbuf( stderr, NULL, _IONBF, 0 );

    // make cout, wcout, cin, wcin, wcerr, cerr, wclog and clog
    // point to console as well
    ios::sync_with_stdio();
}

void myClass::writeToConsole(wstring result){   
    const HANDLE stdOut = GetStdHandle(STD_OUTPUT_HANDLE);
    DWORD numWritten = 0;
    WriteConsoleW(stdOut, result.c_str(), result.size(), &numWritten, NULL);    
    cout.flush();
}

void myClass::myFoo(){
//attache current console to application
 this->redirectIOToConsole();
//write Unicode strings to current console 
 this->writeToConsole(GetCMsg(IDS_STRING_ERROR_MESSAGE));
} 
```

# java - Action类Struts 2中的复选框值

> ID：14768755
> 
> 赞同：1
> 
> 时间：2013-02-08T08:47:10.460
> 
> 标签：java, javascript, jsp, checkbox, struts2

我想访问我在 javascript 中设置的操作类中的复选框值

```
<s:checkbox key="mstDesignations.isActive" id="isActive"></s:checkbox>

<button type="button" class="submitBtn" onclick="adddesignation()"></button> 
```

**javascript:**

```
function adddesignation() {    
    if(document.designationForm.isActive.checked==true){
      document.designationForm.isActive.fieldValue=1;               
    }
    else if( document.designationForm.isActive.checked==false)
    {
      document.designationForm.isActive.fieldValue=2;
    }
    alert(document.designationForm.isActive.fieldValue);
    document.designationForm.submit();
} 
```

当我尝试在下面的操作类中访问它时，我得到 null

```
public MDesig mstDesignations=new MDesig();

System.out.println("Is Active value:::" +mstDesignations.getIsActive()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:43:02.150

您需要更改 javascript 以按名称分配字段的值。Assumed`designationForm`是表单名称，并且`mstDesignations.isActive`是字段名称。

```
this.designationForm['mstDesignations.isActive'].value=1; 
```

# asp.net - 如何在不使用 ajaxtoolkit 的情况下将日历控件添加到文本框中

> ID：14768764
> 
> 赞同：0
> 
> 时间：2013-02-08T08:47:34.530
> 
> 标签：asp.net, .net, ajaxcontroltoolkit

如何在不使用in 的情况下将*Calender Control*添加到.`Textbox``ajaxtoolkit``asp.net`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:07:46.453

您可以使用以下 jquery 和代码执行此操作：

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
 <script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
 <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
 <script type="text/javascript">
    $(function () {
        $("#txtStartDate").datepicker();
        $("#txtEndDate").datepicker();
    });
 </script> 
```

// 在上面的代码中 txtStartDate 和 txtEndDate 是你的文本框的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:49:04.840

使用 jquery 添加日历怎么样？

看一看：[Jquery datepicker](http://jqueryui.com/datepicker/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:38:43.057

试试这段代码...

**代码**：

```
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Datepicker - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
 <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
 <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
 <link rel="stylesheet" href="/resources/demos/style.css" />
 <script>
   $(function() {
    $( "#datepicker" ).datepicker();
  });
 </script>
</head>
<body>

 <p>Date: <input type="text" id="datepicker" /></p>

 </body>
 </html> 
```

# c# - 为什么 Metro WebView 不加载 LAN IP？

> ID：14768765
> 
> 赞同：1
> 
> 时间：2013-02-08T08:47:35.580
> 
> 标签：c#, visual-studio-2010, webview, microsoft-metro

我非常沮丧...我正在尝试为我们的 HIFI 系统的 Denon 页面构建一些简单的 WebWrapper。问题是 Metro WebView 不会加载 LAN ip 地址。如果我将地址更改为“ [http://www.google.com](http://www.google.com) ”，它就可以工作。没有抛出任何错误，而且似乎一切正常。这是我的按钮单击应该加载的内容。我也尝试直接在 Source 属性中设置 URI，但仍然无效。

```
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Uri hostUri = new Uri("http://192.168.0.10");
        Uri relativeUri = new Uri("MainZone/index.html", UriKind.Relative);
        Uri fullUri = new Uri(hostUri, relativeUri);
        this.webView1.Navigate(fullUri);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T18:39:45.313

您是否在包清单中启用了“私有网络（客户端和服务器）”权限？

# c# - Pagination in repeater

> ID：14768767
> 
> 赞同：0
> 
> 时间：2013-02-08T08:47:51.290
> 
> 标签：c#, asp.net, .net, pagination, repeater

I am trying to create a pagination for a website. However, whenever I click the button that signals the server to go to the next page, it will still load the same page (e.g. from page 1 to page 2), but it then works correctly from page 2 onwards displaying an incorrect page number in the page label (e.g. pagelabel = 3, currentpage=2). There is also the issue of not reaching the last page since the page does not seem to start at page 1, but when I proceed to click the page_back_button, it will then proceed to display the last page. I am having troubles in finding the source of this problem. Here is the source code that I created.

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        LoadPageSizer();
        LeadStatusDDL();
        Session["curr_page"] = 1;
    }

    rptLeadsPager.DataSource = ListLeads(ddlLStatus.Text.ToString(), Convert.ToInt16(Session["curr_page"]), Convert.ToInt16(ddlPageSize.Text));
    rptLeadsPager.DataBind();

    BuildPagination(Convert.ToInt16(Session["total_page"]), Convert.ToInt16(Session["curr_page"]), 10);
}

#region DDL List for Results/Page
private void LoadPageSizer()
{
    ddlPageSize.Items.Add("10");
    ddlPageSize.Items.Add("15");
    ddlPageSize.Items.Add("20");
    ddlPageSize.Items.Add("25");
    ddlPageSize.Items.Add("30");
    ddlPageSize.Items.Add("40");
    ddlPageSize.Items.Add("50");
}
#endregion

#region DDL List for LeadsStatus
private void LeadStatusDDL()
{
    ddlLStatus.Items.Add(new ListItem("Not Qualified"));
    ddlLStatus.Items.Add(new ListItem("Qualified"));
}
#endregion

#region SQL Stored Procedure
private DataTable ListLeads(string leadStatus, int pageNumber, int pageSize)
{
    int searchResultsCount;
    DataSet dsSearchResults;

    using (SqlConnection sqlConnection = new SqlConnection(ConfigurationManager.AppSettings["sqlConnection"]))
    {
        using (var sqlCommand = new SqlCommand("LeadsPager", sqlConnection))
        {
            sqlCommand.CommandType = CommandType.StoredProcedure;

            //add parameters
            sqlCommand.Parameters.AddWithValue("@LeadsStatus", leadStatus);
            sqlCommand.Parameters.AddWithValue("@PageNumber", pageNumber);
            sqlCommand.Parameters.AddWithValue("@ResultsPerPage", pageSize);

            var resultsCountParam = new SqlParameter("@SearchResultsCount", SqlDbType.Int);
            resultsCountParam.Direction = ParameterDirection.Output;
            sqlCommand.Parameters.Add(resultsCountParam);

            using (var sqlDataAdapter = new SqlDataAdapter(sqlCommand))
            {
                dsSearchResults = new DataSet();
                sqlDataAdapter.Fill(dsSearchResults);

                searchResultsCount = int.Parse(resultsCountParam.Value.ToString());
            }
        }
    }

    if (searchResultsCount == 0)
    {
        ResultHeader.Visible = false;
        ResultFooter.Visible = false;
    }
    else
    {
        Session["total_page"] = GetTotalPage(pageSize, searchResultsCount);
        lblTotalPage.Text = Session["total_page"].ToString();
        ResultHeader.Visible = true;
        ResultFooter.Visible = true;
    }

    RenderToolbar();

    if (dsSearchResults.Tables.Count > 0)
        return dsSearchResults.Tables[0];
    else
        return null;
}
#endregion

#region Header Function
private void RenderToolbar()
{
    int intCurPage = Session["curr_page"] == null ? 1 : Convert.ToInt16(Session["curr_page"]);
    int intTotalPage = Session["total_page"] == null ? 1 : Convert.ToInt16(Session["total_page"]);
    btnUpPageBack.Visible = intCurPage > 1;
    btnUpPageNext.Visible = intTotalPage > intCurPage;
    lblPage.Text = Session["curr_page"] == null ? "1" : Session["curr_page"].ToString();
}
#endregion

#region Pagination
protected void BuildPagination(int PageCount, int CurrentPageIndex, int ButtonsCount)
{
    pnlPager.Controls.Clear(); //

    if (PageCount <= 1) return; // at least two pages should be there to show the pagination

    //finding the first linkbutton to be shown in the current display
    int start = CurrentPageIndex - (CurrentPageIndex % ButtonsCount);

    //finding the last linkbutton to be shown in the current display
    int end = CurrentPageIndex + (ButtonsCount - (CurrentPageIndex % ButtonsCount));

    //if the start button is more than the number of buttons. If the start button is 11 we have to show the <<First link
    if (start > ButtonsCount - 1)
    {
        pnlPager.Controls.Add(createButton("&lt;&lt;", 0));
        pnlPager.Controls.Add(createButton("..", start - 1));
    }

    int i = 0, j = 0;

    for (i = start; i < end; i++)
    {
        //LinkButton lnk;
        if (i < PageCount)
        {
            if (i + 1 == CurrentPageIndex) //if its the current page
            {
                Label lbl = new Label();
                lbl.Text = (i + 1).ToString();
                pnlPager.Controls.Add(lbl);
            }
            else
            {
                pnlPager.Controls.Add(createButton((i+1).ToString(), i));
            }
        }
        j++;
    }

    //If the total number of pages are greaer than the end page we have to show Last>> link
    if (PageCount > end)
    {
        pnlPager.Controls.Add(createButton("..", i));
        pnlPager.Controls.Add(createButton("&gt;&gt;", PageCount - 1));
    }
}

private LinkButton createButton(string title, int index)
{
    LinkButton lnk = new LinkButton();
    lnk.ID = "btnPage" + title + "_" + index.ToString();
    lnk.Text = title;
    lnk.CommandArgument = index.ToString();
    lnk.Click += new EventHandler(lnkPager_Click);
    return lnk;
}

#endregion Pagination

#region Get Total Page Function
private static string GetTotalPage(int vPageDisplay, int vTotalData)
{
    decimal dlQuot = decimal.Divide(vTotalData, vPageDisplay);
    int dlPresQuot = vTotalData / vPageDisplay;
    return (dlQuot > dlPresQuot ? dlPresQuot + 1 : dlPresQuot).ToString();
}
#endregion

#region Navigating Page with Buttons Function
protected void NextPage_Click(object sender, EventArgs e)
{
    Session["curr_page"] = Convert.ToInt16(Session["curr_page"]) + 1;
    //Converts Results/Page to INT
    ListLeads(ddlLStatus.Text.ToString(), Convert.ToInt16(Session["curr_page"]), Convert.ToInt16(ddlPageSize.Text));
}

protected void BackPage_Click(object sender, EventArgs e)
{
    Session["curr_page"] = Convert.ToInt16(Session["curr_page"]) - 1;
    ListLeads(ddlLStatus.Text.ToString(), Convert.ToInt16(Session["curr_page"]), Convert.ToInt16(ddlPageSize.Text));
}

protected void lnkPager_Click(object sender, EventArgs e) //Page index changed function
{
    LinkButton lnk = (LinkButton)sender;
    Session["curr_page"] = int.Parse(lnk.CommandArgument) + 1;
    ListLeads(ddlLStatus.Text.ToString(), Convert.ToInt16(Session["curr_page"]), Convert.ToInt16(ddlPageSize.Text));
}
#endregion 
```

**UPDATE!** I have fixed the problem of the link buttons.

However, there is a new problem. Whenever I am in a specific page (ex. Page Number 6) and I select from the Results Per Page Drop-Down List (ex. From 20 to 50) the total page would then change from (ex. 9 to 3).

However! The specific page that I am currently on (Page 6) is out of bounds of the Total Page (ex. total page = 3, my current page = 6). It will then display nothing and I have to click the button backwards just to reach the last page of the new Results Per Page list.

I have created a code to specify where the Session["curr_page"] should be whenever this happens. However, I could not determine where to put this code, since it does not fire whenever I change the results per page drop down list. Here is the code that I made.

```
if (Convert.ToInt16(Session["curr_page"]) > Convert.ToInt16(Session["total_page"]))
{
    Session["curr_page"] = Session["total_page"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:23:50.993

The problem is you are not rebinding your data. The first time they hit your page, `Session["curr_page"] = 1;`, you build and set your data source, and then bind it. When the user clicks the Next button, the page reloads and on `Page_Load`, `Session["curr_page"]` still equals 1, you build and set your data source, and then bind it (so, same results as initial page load).

Then `NextPage_Click` executes, you increment `Session["curr_page"]`, and rebuild your datasource... but you never set and bind it.

So you could do something like:

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            LoadPageSizer();
            LeadStatusDDL();
            Session["curr_page"] = 1;
            BindAndPage();
        }
    }

    private void BindAndPage()
    {
        rptLeadsPager.DataSource = ListLeads(ddlLStatus.Text.ToString(), Convert.ToInt16(Session["curr_page"]), Convert.ToInt16(ddlPageSize.Text));
        rptLeadsPager.DataBind();

        BuildPagination(Convert.ToInt16(Session["total_page"]), Convert.ToInt16(Session["curr_page"]), 10);
    }

    //other code

    protected void NextPage_Click(object sender, EventArgs e)
    {
        Session["curr_page"] = Convert.ToInt16(Session["curr_page"]) + 1;
        BindAndPage();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-03T11:12:42.287

You can use "DataTable" javascript functionality for this problem. Please refer [https://www.datatables.net/](https://www.datatables.net/).

```
$(document).ready(function(){
    $('#myTable').DataTable();
}); 
```

only set your table id here and it will automatically set pagination, sorting, filtering of your table.

Thanks

# c++ - 接口的自动代理类

> ID：14768768
> 
> 赞同：1
> 
> 时间：2013-02-08T08:47:54.787
> 
> 标签：c++, inheritance, interface

我有几个接口`IFace1`，`IFace2`等等。接口有不同的方法集，所有方法都有不同的返回和输入参数类型。

我想要一个代理类

```
template<typename IFace>
class TheProxyClass : public<IFace>
{
/*...................*/
private:
  IFace * iface;
} 
```

我需要该类具有`IFace`方法，使它们通过`iface`属性传输调用。一种自动生成`IFace`方法，只通过调用对应的方法`iface`。

我有办法吗？没有 C++11，允许升压。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:31:36.327

这里 - [http://yadi.sk/d/dyOfa8yo2SbRf](http://yadi.sk/d/dyOfa8yo2SbRf) - 是我的一个 Python 脚本，它为给定的接口生成执行。现在方法体是空的，但我认为修改它们以插入类似的东西并不难

```
"iface->" + funcName 
```

# c# - 输入时根据 iasp.net 文本框过滤 asp.net GridView 数据

> ID：14768771
> 
> 赞同：1
> 
> 时间：2013-02-08T08:48:00.900
> 
> 标签：c#, asp.net

我已经完成了应用程序中最重要的部分，在当前阶段我正在调用文本框事件`TextChanged`。但我想知道是否有任何方法可以像 asp.net 中的文本更改事件一样执行此任务。否则我如何实现像`onTextChanging`asp.net 中的事件。请问有什么帮助..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:01:14.657

您可以将客户端`keyup`事件处理程序附加到文本框并使用`__doPostBack`以下功能从文本框回发：

```
var tbPostBackTimeout = null;

function onTextBoxChanging(sender) {
    clearTimeout(tbPostBackTimeout);

    tbPostBackTimeout = setTimeout(function () {
        __doPostBack(sender.name, '');
    }, 500);
} 
```

这里使用超时来避免在文本框中键入文本期间连续回发。

# c - 如何在 Windows Phone 运行时库中使用本机 C 代码？

> ID：14768772
> 
> 赞同：2
> 
> 时间：2013-02-08T08:48:05.887
> 
> 标签：c, windows-phone-8

如何在 Windows Phone 运行时库中使用本机 C 代码？

我尝试了几种方法，但没有找到任何帮助或示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:50:46.347

这可能会回答您：[是否可以仅使用标准 C++ 为 Windows Phone 7 编程？](https://stackoverflow.com/questions/4539876/is-it-possible-to-program-for-windows-phone-7-in-standard-c-only)

WP7 不可能，但对于某些开发，WP8 可能

# eclipse - Eclipse 无法识别常见类型

> ID：14768776
> 
> 赞同：2
> 
> 时间：2013-02-08T08:48:18.040
> 
> 标签：eclipse

我正在编写一个动态网络项目。过了一会儿，我的 Eclipse 就无法识别非常常见的类，例如“HttpServlet”（请参阅​​附图）。我不记得更改 Eclipse 或项目中的任何设置。而且这个问题之前发生过很多次，不仅仅是这个项目。我自己唯一的解决方案是创建另一个项目并复制我的代码。它工作了一段时间，但问题又来了。拜托了，好痛 任何提示或提示都会非常有帮助！

附加图片 - 这是我的项目现在的样子：

![在此处输入图像描述](../Images/b348c6f747e75452c03c798b03ba3752.png)

![在此处输入图像描述](../Images/594880ba86feaf8c8d4e82fbb231c3f7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:51:48.573

您需要`servlet-api.jar`在构建路径中导入。

`properties-> build path -> configure build path -> add external jars`.

从`servlet-api.jar`您的tomcat文件夹中选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:01:47.513

1.  您需要添加一个导入语句。

    `import javax.servlet.*;`

2.  确保将包含 的 jar`javax.servlet.*`添加到项目的类路径中。

# parallel-processing - 在全局地址空间中维护了多少个在 opencl 内核函数中声明的全局变量的副本

> ID：14768777
> 
> 赞同：1
> 
> 时间：2013-02-08T08:48:23.180
> 
> 标签：parallel-processing, opencl

我是 Opencl 编程的新手。为了更好地学习opencl，在花了一些时间阅读了一些教程之后，我开始开发一个简单的模式匹配内核函数。但我有一些疑问：

首先，我在内核函数中声明了全局变量。这是否意味着每个工作项共享每个变量的一个副本？

其次，我如何使用标准 C 库，尤其是。“字符串.h”。

```
 __kernel void matchPatterns_V1(__global char *strings, __global char *patterns, __global int *matchCount,
                            int strCount, int strLength, int patCount, int patLength) {

    int id = get_global_id(0);
    int rowIndex = id*strLength;
    int i, matches = 0;     

    __global char *pos = strings;
    __global char *temp = strings;
    __global char *pat = patterns;

    for(i = 0; i < patCount; i++)
    {
            temp = &strings[rowIndex];      
            pat = &patterns[i*patLength];
            while(pos != '\0') {
                    pos = StrStr(temp, pat);
                    if(pos != '\0') {
                            matches++;
                            temp = pos + patLength;
                    }
            }
    }
    matchCount[id] = matches;
    } 
```

总而言之，每个工作项是否都有自己的变量“pos”、“temp”和“pat”的副本？

非常感谢任何有关学习 Opencl 的建议，包括对最佳书籍/教程网站的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:26:36.597

不，它在全局内存空间中，因此通常每个内核调用都有一个副本，供所有工作项共享。如果你不能保证每个工作组在全局内存中都有自己独特的“项目”，那么写入全局内存是很危险的——或者更一般地说，你的内核中没有两个工作项目会同时写入内存中的同一位置）因为会有竞争条件。

如果您只是从这些全局内存变量中读取数据，那当然没关系。

您也**不能**在内核中声明`__global`变量，因为它们**只能**是内核*参数*。如果您尝试这样做，您将从 OpenCL 编译器中获得以下信息：

```
error: global variables cannot be allocated inside kernel code 
```

有充分的理由，除非技术上不可能：全局变量根本没有任何作用......我什至能想到的唯一可能的原因是工作项之间的通信，这将是一种疯狂的设计模式。

* * *

至于您的问题，请在评论中查阅 OpenCL 规范第 6.5 节中的此代码段：

```
// declares a pointer p in the __private address space that
// points to an int object in address space __global
__global int *p; 
```

因此，与指针类型相关的内存空间表示它们指向的变量的内存空间，而不是指针本身，它们总是`__private`（即每个工作项）。

* * *

您不能在 OpenCL 中使用标准 C 库中的字符串操作函数，但如果您愿意，您可以重新编码它们以在 GPU 上使用（其中大多数很难实现）。

# css - 如何在 LESS CSS 中逐字传递 mixin 参数？

> ID：14768780
> 
> 赞同：0
> 
> 时间：2013-02-08T08:48:53.480
> 
> 标签：css, less

这是我的混音：

```
.gradient (...) {
    background-image: -webkit-linear-gradient(@arguments);
    background-image: -moz-linear-gradient(@arguments);
    background-image: -ms-linear-gradient(@arguments);
    background-image: -o-linear-gradient(@arguments);
    background-image: linear-gradient(@arguments);
} 
```

我正在尝试像这样使用它：

```
.gradient(top, #333333 0%, #282828 100%); 
```

问题是 LESS 去掉了所有的逗号，所以输出看起来像这样：

```
background-image: linear-gradient(top #333333 0% #272727 100%); 
```

是否有可能让 LESS 从字面上传递论点？或者，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:07:23.197

为了实现您要查找的内容，我认为您必须`@arguments`使用以下语法之一将其作为文字字符串传递：

> 1.  `~"top, #333333 0%, #282828 100%"`
>     
>     
> 2.  `e("top, #333333 0%, #282828 100%")`

语法`~"value"`和`e("value")`几乎是等价的。

然后你应该`.gradient( @arguments )`像这样调用你的 mixin：

> `.gradient( e("top, #333333 0%, #282828 100%") );`

# c++ - 对指向非堆对象的指针调用 delete

> ID：14768781
> 
> 赞同：2
> 
> 时间：2013-02-08T08:48:57.053
> 
> 标签：c++, memory

对我来说令人困惑的问题：

```
C c1;
C *p = &c1;
delete p; 
```

什么可能是输出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T08:50:07.527

真的什么都有。这是未定义的行为`delete`ing 未分配的内容`new`。

# php - 我不明白这个纺织正则表达式

> ID：14768788
> 
> 赞同：3
> 
> 时间：2013-02-08T08:49:08.367
> 
> 标签：php, regex, perl

我在 Textism Textile 的 PHP 代码中找到了以下正则表达式：

```
/\b ?[([]TM[])]/i 
```

我认为自己在阅读正则表达式方面经验丰富，但这对我来说是个谜。开始很容易，但我不明白为什么已经打开的字符类中有两个空字符类`[[][]]`？

有人可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T08:56:18.783

这是一个相当神秘的...

这就是它的意思：

```
/     # start regex pattern
\b    # word boundary
 ?    # an optional space
[([]  # char class: either '(' or '['
TM    # literal 'TM'
[])]  # char class: either ']' or ')'
/     # end regex pattern
i     # match case insensitive 
```

需要注意的一些事项：

*   在字符类中，`[`不是特殊的，不需要转义（`[([]`因此有效！）
*   在字符类中，第一个字符，可能是特殊字符，不需要转义（`[])]`因此有效：`]`不需要转义！）

总而言之，它匹配由or和or`"TM"`包围的不区分大小写（它们不需要匹配：在大多数情况下都会匹配）。我说在大多数情况下，因为会导致在下面的演示中被排除在匹配项之外，因为它前面是which does not match ：`[``(``]``)``"[TM)"``\b ?``"[tm)"``". "``\b ?`

```
<?php
preg_match_all(
    '/\b ?[([]TM[])]/i', 
    "... [tm) foo (TM) bar [TM] baz (tm] ...", 
    $matches
);
print_r($matches);
?>
/*
Array
(
    [0] => Array
        (
            [0] =>  (TM)
            [1] =>  [TM]
            [2] =>  (tm]
        )

)
*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T08:53:50.007

编辑：`]`如果正则表达式遵循正则表达式的 POSIX 风格，则似乎允许作为字符类的第一个字符。请参阅[http://www.regular-expressions.info/posixbrackets.html](http://www.regular-expressions.info/posixbrackets.html)。在 PHP 中，`eregs_`函数使用 POSIX，而`preg_`函数使用不允许这种构造的更新的 PCRE 风格。

因此，提供了 POSIX 风格：

```
[([] 
```

是一个由 ( 和 [ 和

```
[])] 
```

是另一个由]和)组成的。大多数正则表达式引擎需要编写第二个字符类

```
[\])] 
```

反而。

# java - 用于 MCU 数据的自定义 USB 驱动程序

> ID：14768791
> 
> 赞同：0
> 
> 时间：2013-02-08T08:49:10.957
> 
> 标签：java, usb, driver, microcontroller

我有一个跨平台的 JAVA 程序，它需要来自插入 USB 的 MCU 的数据。我需要大致了解如何实现这一点。是否可以编写一个 USB 驱动程序，将传入的 USB 数据发送到本地套接字端口，然后我可以从 Java 中连接到该端口？使用虚拟 COM 端口驱动程序是否有更好的选择？

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T00:51:25.913

我想分享一个简单的项目，其中我通过虚拟 COM (CDC) 开发了一个定制的 USB 通信。这个项目基于 8 位微控制器 - 特别是 MC9S08JS 系列 - 在 CodeWarrior Development Studio 10.3 上工作。我附上了两个 zip 文件。其中一个是完整的 CodeWarrior 项目，另一个是 USB CDC 驱动程序。文件工作正常，显然它们是完全安全的。用户只需添加他们的例程即可通过端点功能发送和接收数据。

链接：

1- [CodeWarrior 项目](https://mega.co.nz/#!bI02XZjJ!GcbKz250W6jiJq1POD06G0hi_o5EOjgtt6v7Ez8nfhA)。

2- [USB CDC 驱动程序](https://mega.co.nz/#!6B9hHRRC!VY6tDEKVyFCaeakRrDP2h2xuWA5_sRrdmh52AqKDQjg)。

我真的希望它可以帮助你。如果您有任何问题，请告诉我。

最好的问候，毛里西奥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T16:27:04.160

研究开发 CDC 驱动程序或实现 FTDI 芯片。后者更容易，但如果您正在考虑降低产品成本，拥有自己的 USB 堆栈是非常宝贵的。无论哪种情况，您的设备都会按照您的要求显示为虚拟通讯端口，并且可以作为常规通讯端口轻松访问。

一个好的起点是查看飞思卡尔 USB 堆栈 v4.1.1。有 MSD、CDC、HID 和许多其他类的工作示例可帮助您入门。如果您不使用飞思卡尔 micros，您的里程可能会有所不同，但仍然值得一读。

最后，根据我的经验，我发现跨平台 Java 的串行端口访问有点棘手。我使用了 Cloudhopper 的 RXTX 分支，但我听说过有关[https://code.google.com/p/java-simple-serial-connector/](https://code.google.com/p/java-simple-serial-connector/)的好消息。

祝你好运！

# plone - 如何从文件内容中提取 SearchableText？

> ID：14768793
> 
> 赞同：1
> 
> 时间：2013-02-08T08:49:22.790
> 
> 标签：plone

在我的 Plone 4.2 安装中，所有文件的 SearchableText 字段都设置为 []。我不知道为什么，因为我最后一次（在 12 月）看起来一切都是正确的。实时搜索没有找到任何文件，找到了所有其他内容。我们的主要内容是文件。我如何告诉 Plone 新建这个字段？我已经更新了目录，但这会将空字段添加到索引目录中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:57:09.753

检查应该索引您的文件的程序（wvware、poppler 和朋友）是否正在运行，并且您的 plone 用户可以访问。在前台模式下运行测试实例，您应该能够添加一个新文档并看到它们处于活动状态。如有必要，打开另一个终端，并在其中运行“top”或“htop”以查看它们是否会在您上传 PDF 或 doc 时启动。（这是一个稍微以 linux 为中心的答案）

# jquery - Highcharts 无法重新加载多个系列图表

> ID：14768798
> 
> 赞同：2
> 
> 时间：2013-02-08T08:50:03.147
> 
> 标签：jquery, highcharts

我正在使用 highcharts，我没有问题为单系列图表重新加载数据。但是，我似乎无法更新多个系列图表。每当我尝试时，它只会呈现空白。这是我的示例代码：

```
for (i=0; i < response_data.line_data.length; i++) {
    line_chart.series[i].setData(response_data.line_data[i], false);
}
line_chart.redraw(); 
```

我知道数据是正确的，因为我首先使用相同的函数来创建图表。

非常感谢您的帮助。谢谢！

保罗

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T11:00:25.350

请看我的示例更新系列正常工作的地方，

```
$('#button').click(function() {
var newSeries = [],
    i;
newSeries[0] = [5,4,3,2,1];
newSeries[1] = [10,9,8,7,6];
newSeries[2] = [12,2,1,12,3];

var len = newSeries.length;

for(i = 0;i<len;i++)
{
    chart.series[i].setData(newSeries[i],false);
}

chart.redraw(); 
```

});

[http://jsfiddle.net/ebuTs/13919/](http://jsfiddle.net/ebuTs/13919/)

# php - .htaccess mod rewrite 在本地服务器上不起作用很奇怪

> ID：14768805
> 
> 赞同：0
> 
> 时间：2013-02-08T08:50:13.700
> 
> 标签：php, apache, .htaccess

*我已阅读并尝试了此论坛上类似主题的所有内容，因此请不要将此问题标记为非建设性或重复性。*

所以，这就是像往常一样的问题。我想使用蛞蝓并因此转换`website/trivias.php?id=xyz`为`website/xyz`

`mod_rewrite is ON`在 config 和 httpd 配置中显示。

```
<Directory />
Options FollowSymLinks
AllowOverride All
Order deny,allow
</Directory>

<Directory "c:/wamp/www/">
Options Indexes FollowSymLinks
AllowOverride all
Order Deny,Allow
Allow from 127.0.0.1
</Directory> 
```

我的 .htaccess 文件是：

```
RewriteEngine on
RewriteRule ^/([0-9a-z]+) trivias.php?id=$1 [L] 
```

任何帮助将不胜感激。我试过不同的版本
`.htaccess with <IfModule mod_rewrite.c>`等等。甚至尝试过`trivias/reg exp`但没有用。

谢谢艾哈迈尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:56:28.660

尝试：

```
RewriteRule ^([0-9a-z]+)$ trivias.php?id=$1 [L] 
```

没有`/`

# r - 静态文档中的自述文件

> ID：14768807
> 
> 赞同：5
> 
> 时间：2013-02-08T08:50:20.007
> 
> 标签：r

[staticdocs](https://github.com/hadley/staticdocs/)是一个 Hadley Wickham 包，可以为一个包制作漂亮的网页。我[使用它](http://trinker.github.com/qdap/)取得了巨大的成功（虽然还没有弄清楚如何添加示例而不出错）但是每次我必须手动重新格式化所`index.html`创建文件的自述文件部分。这似乎很愚蠢，因为从[ggplot2 staticdocs 使用](https://github.com/hadley/ggplot2/blob/master/inst/staticdocs/index.r)来看，有一种方法可以在`inst/staticdocs/`.

现在 Hadley 还没有很好地记录包（静态文档），我不确定如何更改索引文件中的自述参数/列表条目。有没有人对这个格式应该是什么样子有指导？即，条目的格式应该如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:54:51.510

在 Hadley 和他的团队能够开发 staticdocs 及其文档之前，我在一个[非常粗糙的包](https://github.com/trinker/acc.roxygen2)中找到了更多的工作：

```
#' Change read.me File
#'
#' Alter the read.me file with a preset.
#' 
#' @param path Path to the index.html file.
#' @param readme Path to the readme file.
#' @param file The path/file name to output.
readme_statdoc <- function(path, readme, file = NULL) {
    if (length(path) > 1) {
        x <- path
    } else {
        x <- suppressWarnings(readLines(path))
    }
    y <- suppressWarnings(readLines(readme))
    start <- which(grepl("<h1></h1>", x))
    end <- which(grepl("<h2>Help topics</h2>", x))
    x <- c(x[1:start], "", y, "", x[end:length(x)])
    if (!is.null(file)) {
        cat(paste(x, collapse="\n"), file = file)
    }
    return(x)
} 
```

基本上，您创建一个外部文档以插入自述部分。我在 qdap 中使用了它，您可以通过[这个脚本](https://github.com/trinker/qdap/blob/master/inst/maintenance.R)看到我是如何使用它来创建[staticdoc 网站](http://trinker.github.com/qdap/)的。

# asp.net-mvc - 为什么在 ASP.NET MVC 中使用 lambdas 而不是反射？

> ID：14768808
> 
> 赞同：6
> 
> 时间：2013-02-08T08:50:20.107
> 
> 标签：asp.net-mvc, reflection, lambda

使用 Asp.Net MVC 已经有一段时间了，但我遇到了一个非常奇怪的问题。每次创建模型时，我都会使用 lambda 表达式，例如：

```
@Html.EditorFor(model=>model.SomeProperty) 
```

为什么 Asp.Net MVC 使用这种类型的架构？

为什么我不能只使用反射传入一个属性？

使用 lambda 表达式更快吗？因为在幕后，我认为要获得属性名称，它必须使用反射。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T08:52:42.553

Lambda > 反射

使用 lambdas 你得到：

*   设计时的强类型属性选择器。
*   使用内置的 Visual Studio 重构工具使重构变得容易。

多亏了 lambdas，任何 API 都可以从属性选择器中知道很多事情：

*   属性类型。
*   属性的对象。
*   检查属性元数据。

另外，检查方法签名（[http://msdn.microsoft.com/en-us/library/ee402949(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/ee402949(v=vs.108).aspx)）：

```
public static MvcHtmlString EditorFor<TModel, TValue>(
    this HtmlHelper<TModel> html,
    Expression<Func<TModel, TValue>> expression
) 
```

它是一个表达式树，而不是一个常规的 lambda。这允许 MVC（以及任何 API）操作表达式，以便在运行时调用它之前添加更多行为，而无需反射发射。

了解有关表达式树的更多信息：

*   [http://msdn.microsoft.com/en-us/library/bb397951.aspx](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T12:27:03.487

我的回答不会受欢迎。

我相信 Lambda 的 99% 始终是更好的选择，原因有以下三个。

首先，假设您的开发人员很聪明，这绝对没有错。其他答案有一个基本前提，即除了您之外的每个开发人员都是愚蠢的。不是这样。

其次，Lamdas (et al) 是一种现代语法——明天它们将比现在更普遍。您的项目代码应该来自当前和新兴的约定。

第三，以“老式方式”编写代码对您来说似乎更容易，但对编译器来说却并不容易。这很重要，随着编译器的修订，遗留方法几乎没有机会改进。依赖编译器扩展它们的 Lambdas（等）可以受益，因为编译器会随着时间的推移更好地处理它们。

总结一下：

1.  开发人员可以处理
2.  每个人都在做
3.  有未来的潜力

Again, I know this will not be a popular answer. And believe me "Simple is Best" is my mantra, too. Maintenance is an important aspect to any source. I get it. But I think we are overshadowing reality with some cliché rules of thumb.

# c# - id 没有从 ExecuteNonQuery() 返回；

> ID：14768810
> 
> 赞同：1
> 
> 时间：2013-02-08T08:50:31.530
> 
> 标签：c#, asp.net, vsto

在这里我需要创建一个DataTable，但它没有返回一个ID。没有错误。实际上我在这里提供了一个电子邮件地址（epost）。我需要从数据库返回ID。

编码部分在这里。

```
public string GetAllMails()
    {
        DataConnection dc = new DataConnection();

        string e="";
        int uid=-1,sid=0;

        DataTable dt = new DataTable();
        dt.Columns.Add("id");
        dt.Columns.Add("uid");
        dt.Columns.Add("email");

        Microsoft.Office.Interop.Outlook.Application oApp;
        Microsoft.Office.Interop.Outlook._NameSpace oNS;
        Microsoft.Office.Interop.Outlook.MAPIFolder oFolder;
        Microsoft.Office.Interop.Outlook._Explorer oExp;

        oApp = new Microsoft.Office.Interop.Outlook.Application();
        oNS = (Microsoft.Office.Interop.Outlook._NameSpace)oApp.GetNamespace("MAPI");
        oFolder = oNS.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox);
        oExp = oFolder.GetExplorer(false);
        oNS.Logon(Missing.Value, Missing.Value, false, true);

        Microsoft.Office.Interop.Outlook.Items items = oFolder.Items;

        SqlConnection conn = dc.SqlConnection;
        if (conn.State != ConnectionState.Open) conn.Open();
        SqlCommand cmd = new SqlCommand("GetDetailsByEmail", conn);
        cmd.CommandType = CommandType.StoredProcedure;
        SqlParameter param = new SqlParameter();

        foreach (Microsoft.Office.Interop.Outlook.MailItem mail in items)
        {
            if (mail.UnRead == true)
            {
                e=mail.SenderEmailAddress;

               // param   <-- add sql parameters
                cmd.Parameters.Add(new SqlParameter("@epost",e));

                uid = cmd.ExecuteNonQuery();

                //send to db and take the id (uid)

                //if returned id
                DataRow row = dt.NewRow();

                row["id"] = sid;
                sid++;

                row["uid"] = uid;// uid

                row["email"] = e;

                dt.Rows.Add(row);

            }
        }

        return e;
    } 
```

存储过程在这里

```
ALTER Procedure [dbo].[GetDetailsByEmail]

@epost nvarchar(50)

AS
BEGIN
Select Medlems_ID,[E-post]
from dbo.Members
where [E-post] = @epost
END 
```

当我编辑我的编码时，uid 是一个 int。

```
uid = cmd.ExecuteReader(); or uid = cmd.ExecuteScalar(); // it shows me conversion error.here i put as a comment 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T08:53:35.697

如果您阅读文档，[`ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)您将看到以下行：

> 针对连接执行 Transact-SQL 语句并返回受影响的行数。

你需要用来[`SqlCommand.ExecuteReader`](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)做你想做的事。

编辑：

以下是根据您的评论您的代码的外观。您的 sproc 返回 2 列但您只对 1 列感兴趣，这有点奇怪。此外，您是否期望多行也不清楚。

```
if (dc.SqlConnection.State != ConnectionState.Open) 
    dc.SqlConnection.Open();

using (var cmd = new SqlCommand("GetDetailsByEmail", dc.SqlConnection))
{
    cmd.CommandType = CommandType.StoredProcedure;

    foreach (Microsoft.Office.Interop.Outlook.MailItem mail in items)
    {
        if (mail.UnRead)
        {
            e = mail.SenderEmailAddress;

            //this is a little nasty
            if (cmd.Parameters.Count > 0)
                cmd.Parameters.RemoveAt(0);

            cmd.Parameters.AddWithValue("@epost", e);

            using (var reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    uid = reader.GetInt32(0);

                    DataRow row = dt.NewRow();
                    row["id"] = sid;
                    sid++;
                    row["uid"] = uid;// uid
                    row["email"] = e;
                    dt.Rows.Add(row);
                }
            }
        }
    }
} 
```

# iphone - 解除分配呈现/上一个视图控制器

> ID：14768811
> 
> 赞同：4
> 
> 时间：2013-02-08T08:50:35.567
> 
> 标签：iphone, ios, memory, uiviewcontroller

我的应用程序有一个登录页面，然后是一个主页。我想在用户登录时释放登录页面，并且由于主页很重，我显然希望在我注销并再次进入登录页面时释放它。如何做到这一点？我使用`presentModalViewController`但我发现使用这种方法注销时内存消耗不会减少。导航控制器（带有`pushViewController`方法）会这样做吗？如何解除/解除分配/无呈现/上一个视图控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:10:15.640

尝试带有隐藏标签栏的标签栏控制器。只需制作一个标签 - 登录屏幕，另一个 - 应用程序主屏幕。当用户登录时，只需显示应用程序屏幕，然后将初始选项卡栏控制器的视图控制器设置为只有一个 vc - 主应用程序 vc。并确保您已将所有适当的属性设置为 nil 以允许 ARC 完成它的工作并释放登录屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-09T13:56:09.457

您可以使用以下代码实现：

```
MainViewController *mainController = [MainViewController new];
UIWindow *mainWindow = [[[UIApplication sharedApplication] windows] firstObject];
[mainWindow.rootViewController removeFromParentViewController];
[mainWindow setRootViewController:mainController]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:58:15.820

视图控制器使用堆栈的概念，因此您必须有一个根视图控制器来处理切换。拥有一个基本上是空白的主视图控制器，并根据需要将其他两个视图控制器添加到其中。

# intellij-idea - 在 IntelliJ 12 中构建工件之前执行 ant 目标？

> ID：14768817
> 
> 赞同：1
> 
> 时间：2013-02-08T08:50:58.490
> 
> 标签：intellij-idea

我有一个 ant 目标，它创建一个具有保持当前颠覆修订号的常量的类。

通过`Execute on / Before Compilation`设置，修订号将始终是最新的。但！当您处于开发模式并经常编译和运行时，您不希望在运行 ant 目标时出现烦人的延迟。此外，还会弹出 Ant 消息窗口。不好。

显然，当我构建 WAR 文件时，我只想在构建生产之前运行 ant 目标。其中`Project Settings / Artifacts`有一个预处理选项卡，可以在构建工件之前运行 ant 目标。但是，目标仅在编译完成后运行。

有没有办法让 IntelliJ 12 在编译和创建 WAR 文件之前执行 Ant 目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:54:46.537

你可以使用一个虚拟的运行配置来运行一些不相关的东西，但是在**启动前**放一些类似的东西：

1.  运行 Ant 目标
2.  制作
3.  构建工件

现在您可以将此配置用于生产构建。

# android - 该地图在分布式/发布的应用程序中不可见，但在开发版本中工作正常

> ID：14768821
> 
> 赞同：0
> 
> 时间：2013-02-08T08:51:09.593
> 
> 标签：android, google-maps-api-3

我在 android 的应用程序中使用了 google map api。它在开发版本中与 api 密钥一起工作正常，但在发布版本中同样不显示地图视图。只显示网格。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:52:42.740

为此，您必须生成一个签名的 apk，请参见下面的链接

[Android 签名的 APK 未显示 Googlemap](https://stackoverflow.com/questions/9877312/android-signed-apk-not-showing-googlemap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:20:27.180

您在已发布版本中使用调试密钥库密钥，这就是它不显示地图的原因。您已经为您发布的版本创建了密钥库，对吧？您需要获取该密钥库的 Google Maps API 密钥（通过提供 SHA/MD 5 密钥）。之后，该地图也将显示到已发布的版本中。

# php - 表 DATABASE SERVER 中的 EMPTY RECORD 使用 cURL 发送数据

> ID：14768822
> 
> 赞同：0
> 
> 时间：2013-02-08T08:51:09.877
> 
> 标签：php, curl

我尝试将一些数据从本地数据库发送到数据库服务器。本地数据库中的表名称为“inbox”。我将“收件箱”中的数据转换为 XML 这是用于`inboek2.php`本地 pc 中此脚本的代码 ( )

```
<?php
mysql_connect('localhost', 'root', '');
mysql_select_db('sms');

header('Content-Type: text/xml');
echo "&lt;?xml version='1.0'?&gt;";

echo "<inbox>";

$query = "SELECT  inbox.id, ReceivingDateTime, SenderNumber, TextDecoded FROM inbox ORDER BY inbox.id";
$hasil = mysql_query($query);
while ($data = mysql_fetch_array($hasil))
{
   // representasi data sms
   echo "<data>";
   echo "<id>".$data['id']."</id>";
   echo "<tgl>".$data['ReceivingDateTime']."</tgl>";
   echo "<nope>".$data['SenderNumber']."</nope>";
   echo "<isi>".$data['TextDecoded']."</isi>";
   echo "</data>";
}
echo "</inbox>";
?> 
```

脚本的结果`inboek2.php`，会被脚本捕获`proses.php`

这是用于代码`proses.php`（本地电脑中的此脚本）：

```
 <?php
    // koneksi ke mysql di server localhost
    mysql_connect('localhost', 'root', '');
    mysql_select_db('sms');

    // baca data XML dari script inboek2.php yang digenerate oleh data.php
    $dataxml = simplexml_load_file&#40;'http://localhost/baca/inboek2.php'&#41;;
    foreach($dataxml->data as $data)
    {

       $id = $data->id;
       $tgl = $data->tgl;
       $nope = $data->nope;
       $isi = $data->isi;

       $curlHandle = curl_init();
       $curResponse = curl_exec&#40;$curlHandle&#41;;
       curl_setopt($curlHandle, CURLOPT_URL, 'http://www.adibiken.com/SEM/kir.php');
       curl_setopt($curlHandle, CURLOPT_POSTFIELDS, 'id='.$id.'&amp;tgl='.$tgl.'&amp;nope='.$nope.'&amp;isi='.$isi);
       //and if i delete another variable atleast still the last one variable the data has been sucessfull sending whitout empty record ,,this is weird,,,,,
       curl_setopt($curlHandle, CURLOPT_HEADER, 0);
       curl_setopt($curlHandle, CURLOPT_RETURNTRANSFER, 1);
       curl_setopt($curlHandle, CURLOPT_TIMEOUT,30);
       curl_setopt($curlHandle, CURLOPT_POST, 1);
       curl_exec&#40;$curlHandle&#41;;
       curl_close($curlHandle);
       echo $curResponse;
    }
    ?> 
```

最后一个，这是`kir.php`HOSTING中的代码

```
<?php
include "koneksi.php";

$id = $_POST['id'];
$tgl = $_POST['tgl'];
$isi = $_POST['isi'];
$nope = $_POST['nope'];

// query insert data ke mysql
$quer = "INSERT INTO `adibiken_sem`.`inbox` (`id`,`tgl` ,`isi` ,`nope`) VALUES ( '".$id."','".$tgl."', '".$isi."', '".$nope."')";
mysql_query($quer);
?> 
```

**问题：我应该怎么做才能使变量：`$id , $tgl, $isi, $nope`是否已成功发送到数据库而没有空记录？**

如果我删除另一个变量至少仍然是最后一个变量，则数据已成功发送空白记录，这很奇怪，，，，，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:18:34.167

您可以尝试检查每个变量的长度，以确保它们在插入之前不为空。这可以使用 strlen 或 mb_strlen 来完成。

[http://www.php.net/manual/en/function.mb-strlen.php](http://www.php.net/manual/en/function.mb-strlen.php)

[http://php.net/manual/en/function.strlen.php](http://php.net/manual/en/function.strlen.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:00:27.883

您可以通过以下方式检查：

```
if(isset($_POST['id'])){
    $id = $_POST['id']; 
}else{
    //the POST variable was empty, do something.
} 
```

# python - 获取/帐户/登录

> ID：14768824
> 
> 赞同：0
> 
> 时间：2013-02-08T08:51:13.093
> 
> 标签：python, django, url

我正在运行一个使用cherrypy作为服务器的django web服务器。

我注意到我得到了以下信息

```
"GET /accounts/login/?next=/diary/events HTTP/1.1" 500 381 
```

我不知道这起源于哪里。我的任何 html 文件中都没有 /accounts/login url。（如果我使用 django 服务器，我也会收到此消息。

该应用程序在 VPS 主机上实现。当我在本地运行它时，该消息不会出现。

# svn - 如果不是组中的每个人都可以，我如何使用 SVN

> ID：14768830
> 
> 赞同：1
> 
> 时间：2013-02-08T08:51:39.083
> 
> 标签：svn, version-control, web

我已经尝试建立一种使用颠覆的合乎逻辑的方式（或任何其他 VCS，但我用 svn 玩得更多）。

让我从解释我的问题开始，我们是几个需要每天更改客户网站的同事，但是客户也可以通过他们在网站上的“管理面板”更改一些文件。以及在服务器上生成的一些文件、日志文件、导出/导入数据、站点地图等。

我们现在正在通过 FTP 工作，为了维护某种文件历史，我们制作了 .bak.revision#.php 文件，但它*几乎*无法管理。最重要的是，我使用 Netbeans 作为我的 IDE，这需要文件的本地副本。

要开始一个项目，我需要与我的客户同步更改的文件（或者最坏的情况下下载完整的项目）（这可能需要很长时间）。

我真的很喜欢使用 Netbeans，但现在我有时最终会改用 notepad++。

我设置了一个非常好的使用 SVN 的方式，它带有一个 post-commit 钩子，可以将项目导出到一个 http 文件夹中，这样我就可以对我的本地副本进行更新，进行更改，然后提交 -done-

但我不想覆盖服务器上可能已更改的文件，例如他们可以对自己进行更改的客户 CSS 文件。

所以我认为我不能是唯一一个遇到这个问题的人，如果不是团队中的每个人都这样做，如何使用 SVN？（在我的情况下是客户）

我猜我可以在那些文件上使用 svn:ignore 吗？

（这是测试环境） 我的 post commit hook 很简单；svn 导出文件：///svn/repo/LIVE /var/www/html/ --force

* * *

编辑我会研究的合理解决方案，如果我创建一个预提交，甚至更好？预更新？挂钩导入已经在仓库中的覆盖文件，这将解决我的问题，不是吗？

NVM Import 运行提交。提交和预提交不能很好地工作，因为它会创建一个无限循环

* * *

最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:57:23.360

在您的情况下，最合乎逻辑和技术性的方式（但**不是最简单**的）将是

*   将站点树转换为通用（使用您的 Netbeans）存储库的工作副本 - 这需要在服务器上安装 Subversion 和一些安装后技巧，因此：SSH root-access to host
*   使用管理面板中的 crontab 作业|特殊按钮将现场直接更改提交到 repo
*   更改提交后挂钩，在这种情况下，必须在从“外国”主机提交后更新服务器的 WC

更奇特的方式：颠覆所有人（对于某些用户 - 幕后）

*   每个人都（直接）或间接使用 Subversion - 没有人在现场接触文件
*   存储库中的更改（作为导出）存储在站点上，就像现在发生的那样

对于开发人员来说，这种方式不会改变任何事情。**对于您**建议的技术平庸的客户，准备和配置[EasySVN](http://svn-ref.assembla.com/easysvn.html)（以及因此，Assembla 的存储库） - 他们只会获得本地文件夹（或树），其中所有更改（*自动*）与相关存储库同步（反向也可以工作 -从 repo 传递到 WC 的后台更新）。Assembla 空间的 SSH 或 FTP 工具将更改传输到站点（自动提交或手动按需）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T03:07:14.050

您可以在网络服务器上本地使用 DVCS。与集中式 VCS 相比，分散式 VCS 将客户方面发生的事情与团队内部发生的事情分离。此外，这种情况是关于合并的，任何值得称道的 DVCS 都是关于合并，并且做得最好。

我在这里给出了一个使用 Git 的具体工作流程，但这对任何其他 DVCS 都是可行的。我将假设`{TEAM}`团队和网络服务器都可以访问一个存储库，以使这里的工作流程更简单，但是有多种方法可以做到这一点。您只是不能以更改文件的方式将您的开发团队直接推送到网络服务器的存储库，请参阅我对[为什么您不能推送到 Git 中的已签出分支的](https://stackoverflow.com/questions/11117823/git-push-error-refusing-to-update-checked-out-branch/14878413#14878413)解释。

# 网络服务器保存历史

在 中，您有一个主要分支，即**TEAM/dev**，您的开发发生在这里。您可以像这样创建网络服务器的存储库：

```
~$ git clone -b dev {TEAM} /var/www/mystuff
~$ cd /var/www/mystuff
mystuff$ git checkout -b locall-changes 
```

在某些时候，您将提交网络服务器所做的任何事情。它可能是一项 cron 作业、一些 PHP 代码或手动干预：

```
mystuff$ git ci --all -m "Webserver modifications" 
```

**--all**选项告诉 Git 提交对已被 Git 跟踪的文件的所有修改。如果网络服务器可能会创建您想要跟踪的新文件，您必须放置忽略模式（用于日志文件等）并以这种方式提交：

```
mystuff$ git add .
mystuff$ git ci -m "Webserver modifications" 
```

此时请注意，自初始克隆以来，网络服务器和您的团队之间没有发生任何通信。这就是 DVCS 的优势：网络服务器的操作及其保存历史是完全自主的。您可能会破产或被核武器抹去，它不仅会继续工作，而且有人可以填补并无缝地继续您正在做的事情。

# 你与你的发展融为一体

您可以通过将其存储库设置为您身边的远程来跟踪网络服务器（您只需执行一次）：

```
myrepo$ git remote add webserver ssh://webserver/var/www/mystuff
myrepo$ git fetch webserver
myrepo$ git branch changes webserver/local-changes 
```

当您想将新代码发布到网络服务器时，您首先要获取它的历史记录并检查它是如何合并的：

```
myrepo$ git co changes
myrepo$ git pull 
```

这将从远程网络服务器获取新提交并将**更改**分支更新为网络服务器上的**本地更改**。

```
myrepo$ git merge dev 
```

现在您检查合并是如何进行的，当您解决冲突并提交合并时，您可以在 {TEAM} 中使用它：

```
myrepo$ git push {TEAM} changes 
```

# 回到网络服务器

一个网络服务器，你现在只需要拉那个合并。唯一的问题是，在此期间可能已经进行了一些新的提交。可以肯定的是，只有当您的合并是当前提交的直接后代时，您才能强制更新分支（Git 称之为**快进**合并）：

```
mystuff$ git pull --ff-only {TEAM}/changes 
```

如果没有 FF 是可能的，则此命令不会更改文件并以非零错误代码退出，这使得可以让自动脚本触发它并让您知道它是否真的发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T22:42:22.130

:::我的发现:::

（@LazyBadger 这个答案太长了，无法发表评论。）

导出不起作用，我需要一个真正的工作目录。但是我可以直接在 httpd.conf 中拒绝访问，换句话说，.htaccess 文件没有任何麻烦。

我可以使用 UPDATE 在提交后脚本中使 web 目录保持最新。（下面的例子）

```
#!/bin/sh

REPOS="$1" REV="$2" cd /var/www/html/ 
MESSAGE=$(svnlook propget --revprop -r $REV $REPOS svn:log) 
Author=$(svnlook propget --revprop -r $REV $REPOS svn:author) 
CHANGES=$(svnlook changed -r $REV $REPOS)

echo "" >> /$REPOS/SVN.Log 
echo "Commit | $REPOS | $REV | $MESSAGE | $CHANGES | $Author" >> /$REPOS/SVN.Log 
echo update >> /$REPOS/SVN.Log 
svn update >> /$REPOS/SVN.Log 
echo klar >> /$REPOS/SVN.Log 
```

为了使客户编辑的文件保持同步，我可以使用忽略（只是在存储库中没有这些文件），很可能用于二进制文件和日志文件，以控制存储库的大小。

然后我们可以使用提交守护进程来保持存储库最新，不幸的是，EasySVN 解决方案（顺便说一句很棒的软件，也是免费的，也可以与任何服务器一起使用）不适用于 Linux 环境（目前还没有）。

*顺便说一句，EasySVN 可以轻松用于将文件备份到任何 SVN，并具有文件历史记录的巨大优势。小心！为了使用 svn+ssh 支持，您需要下载一个可以处理 -q 标志的 sshclient（例如来自这个包：[http](http://sharpsvn.open.collab.net/servlets/ProjectProcess?pageID=3794) ://sharpsvn.open.collab.net/servlets/ProjectProcess?pageID=3794 ）。并使用腻子中的选美*

但是我可以偶尔使用 CRON 创建一个提交脚本或运行提交，它确实应该嵌入到 php 保存功能中，但这是一项主要工作，也许在我们软件的未来版本中它会:)

示例提交脚本：

```
#!/bin/sh
cd /var/www/html/ && svn commit -m webedit -q 
```

那当然可以改进很多，例如我们可以先检查更改^^。

像脚本一样的示例守护程序，用于检查更改并在需要时提交

```
#!/bin/bash
SVNREPOS=( "/var/www/html/" )
cd /PATH/TO/THIS/SCRIPT/
LCK_FILE=`basename $0`.lck
if [ -f "${LCK_FILE}" ]; then
  echo LOCK exists
  MYPID=`head -n 1 $LCK_FILE`  

  if [ -n "`ps -p ${MYPID} | grep ${MYPID}`" ]; then
    echo `basename $0` is already running [$MYPID].
    exit
  else
    rm "${LCK_FILE}" -f
    sh $0
    exit
  fi

else
  echo $$ > $LCK_FILE
   while :; do
    for i in "${SVNREPOS[@]}"
     do
      cd $i
         #What are we doing here? Basicly we are testing if anything is to commit, if so commit it
         test ! $(svn st|wc -l) -eq 0 && svn ci -m SERVERCOMMIT -q 
      sleep 5s
     done
    done
echo ENDED LOOP IT SHOULD NOT HAVE DONE THAT
 rm "${LCK_FILE}" -f
 sh $0
fi

echo $$ > $LCK_FILE 
```

用于启动/停止守护进程的 Init.d 脚本

```
#! /bin/bash
#SVN CHANGED MONITOR DAEMON
. /etc/init.d/functions

RETVAL=0
SCRIPTDAEMON=/PATHTO/changemonitor.sh
getpid() {
    pid=`ps -eo pid,command | grep "sh $SCRIPTDAEMON" | grep -v "grep" | awk '{ print $1 }'`
    }

start(){
    gprintf "Starting SVNChangeMonitor: "
    echo_failure
    getpid
    if [ -z "$pid" ]; then
      sh $SCRIPTDAEMON &
    fi

     getpid
     if [ -n "$pid" ]; then
         echo_success
     else
         echo_failure
     fi
    echo
    return $RETVAL
}

stop() {
    gprintf "Stopping SVNChangeMonitor: "
    echo_failure
    getpid
    if [ -n "$pid" ]; then
        kill -s kill $pid
        rm $SCRIPTDAEMON.lck -f

        getpid
         if [ -z "$pid" ]; then
             echo_success
         else
             echo_failure
         fi

    else
        echo_failure
    fi
    echo
    return $RETVAL
}

# See how we were called.
case "$1" in
  start)
        start
        ;;
  stop)
        stop
        ;;
  restart)
        stop
        start
                gprintf "SVNChangeMonitor is restarted\n"
        ;;
  status)
        getpid
        if [ -n "$pid" ]; then
               gprintf "SVNChangeMonitor (pid %s) is running." "$pid"
               echo_success
                echo
        else
                RETVAL=1
                gprintf "SVNChangeMonitor is stopped\n"
                                echo
        fi
        ;;
  *)
        gprintf "Usage: %s {start|stop|restart|status}\n" "$0"
        echo
        exit 1
        ;;
esac

exit $RETVAL 
```

感谢您的帮助和指点！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T22:54:25.483

与其试图强迫客户使用 svn（有意或无意），不如将客户站点视为副本，并使用[Unison](http://www.cis.upenn.edu/~bcpierce/unison/)之类的工具将非托管方（客户）与托管方（您的）保持一致。Unison 有点像 rsync，只是它处理双向的更改，因此客户更改的文件将被复制到您的系统中。

所以你的工作流程是：

*   一致（将本地与远程同步；拉下他们的更改）
*   svn commit（检查他们的更改）
*   编辑编辑编辑
*   svn commit（签入你的更改）
*   一致（将遥控器与本地同步，也下拉任何他们可能有变化的东西）

# qooxdoo - QooxDoo - Firefox 以 270 度呈现 Indigo 主题渐变

> ID：14768834
> 
> 赞同：0
> 
> 时间：2013-02-08T08:51:58.453
> 
> 标签：qooxdoo

有没有人在使用 Qooxdoo 的 Firefox 中遇到过这个问题。

***Firefox 以 270 度角呈现 Qooxdoo UI 元素的渐变。*** ![Firefox 呈现：](../Images/3e39861c798cd09b96454899bf2b357d.png)

***Google Chrome 中的相同 qooxdoo 页面：*** ![谷歌浏览器渲染：](../Images/ce54b65ea0f09c80c0aa2a046a2c98e1.png)

**有什么办法可以解决吗？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:02:33.037

这仅在与 Firefox 和`qooxdoo <= 2.0.1`. 也许你想升级。这包含在[迁移文档](http://manual.qooxdoo.org/current/pages/tool/migration/migration_guide.html)中。

查看渐变行为：

*   [http://demo.qooxdoo.org/2.0.1/playground/](http://demo.qooxdoo.org/2.0.1/playground/) （不行）
*   [http://demo.qooxdoo.org/2.0.2/playground/](http://demo.qooxdoo.org/2.0.2/playground/) （好的）
*   [http://demo.qooxdoo.org/2.0.3/playground/](http://demo.qooxdoo.org/2.0.3/playground/) （好的）
*   [http://demo.qooxdoo.org/2.0.4/playground/](http://demo.qooxdoo.org/2.0.4/playground/) （好的）
*   [http://demo.qooxdoo.org/2.1/playground/](http://demo.qooxdoo.org/2.1/playground/) （好的）
*   [http://demo.qooxdoo.org/2.1.1/playground/](http://demo.qooxdoo.org/2.1.1/playground/) （好的）

# mysql - 一个查询来获取单元格在不同表中的记录

> ID：14768836
> 
> 赞同：0
> 
> 时间：2013-02-08T08:52:02.560
> 
> 标签：mysql, sql

表用户：

```
user_id     user_username   user_password
-----------------------------------------
1           tomasr          NULL 
```

表用户项：

```
f_user_id   f_moduleItem_id     userItem_value
--------------------------------------------------
1           1                   John
1           2                   Wayne 
```

表模块：

```
module_id   module_systemTitle  module_title
------------------------------------------------
1           users               Users 
```

表模块项：

```
moduleItem_id   f_module_id     moduleItem_title    moduleItem_order
----------------------------------------------------------------------------
1               1               Firstname           1
2               1               Lastname            2 
```

大家好，如何从 useritems 表中获取包含数据的用户列表，例如一个用户的一行。那是平均数行数等于用户数。

期望结果是：

```
user_id user_username   firstname    lastname
------------------------------------------------------------------------------

1       tomasr          John         Wayne 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:19:12.167

```
SELECT  a.user_ID,
        a.user_username,
        MAX(CASE WHEN c.moduleItem_title = 'Firstname' THEN b.userItem_value ELSE NULL END) `Firstname`,
        MAX(CASE WHEN c.moduleItem_title = 'Lastname' THEN b.userItem_value ELSE NULL END) `Lastname`
FROM    users a
        INNER JOIN useritems b
            On a.user_ID = b.f_user_id
        INNER JOIN moduleitems c
            ON b.f_moduleItem_id = c.moduleItem_id
GROUP   BY a.user_ID, a.user_username 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/111be/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:00:20.747

您将需要使用[INNER JOIN](http://www.w3schools.com/sql/sql_join_inner.asp)将两个表连接在一起。该链接将更好地解释它，但类似这样：

```
SELECT u.user_username, i.userItem_value 
FROM users u 
INNER JOIN userItems i ON u.user_id=i.f_user_id; 
```

这将返回找到匹配项的所有行，但请记住，如果 userItems 中没有与 users 表行匹配的行，则 users 行将不会包含在结果中。为此，您将需要查看 LEFT JOINS 并使用 IFNULL（类似的东西）。

# sql-server - 单个数据库中的行级物理数据分离

> ID：14768843
> 
> 赞同：0
> 
> 时间：2013-02-08T08:52:44.190
> 
> 标签：sql-server, database, database-design, multi-tenant

**问题：**

假设我们有 5 个客户。目前，每个客户都有自己的数据库副本。这是因为有数百万行，我们不希望一个客户端数据库的负载影响另一个客户端数据库的性能。

这不是最佳设计，因为：

*   为每个客户端管理单独的连接并不灵活，
*   更改需要在多个数据库中传播，并且
*   需要为每个新客户端创建一个新数据库。

**问题：**

是否可以将所有这些数据包含在一个数据库中，但在客户端数据之间进行某种形式的物理隔离，以便它的性能类似于拥有多个数据库？

这种隔离不会在表（或模式）级别，而是在行级别。例如，我不想`Employee`为每个客户端（如`Employee_ClientA`, `Employee_ClientB`, `Employee_ClientC`）创建单独的表，而是希望使用`Employee`带有`ClientID`外键的表。这意味着表内的数据需要在物理上分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:43:18.727

如果性能是您主要关心的问题，您可以使用[分区表](http://msdn.microsoft.com/en-gb/library/ms190787.aspx)功能将单独的客户端数据放在单独的文件组中。

如果要限制每个客户端对其他客户端数据的可见性，可以考虑[在 SQL Server 中授予行级权限中概述的选项](http://msdn.microsoft.com/en-us/library/bb669076.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:57:18.823

您的问题与多租户数据库架构有关。我已经为您添加了多租户标签。在进行更改之前，您可能需要单击它并阅读其他一些多租户问题和答案。 [这个 SO 答案](https://stackoverflow.com/a/8343142/562459)总结了大多数权衡，并链接到 Microsoft 的一篇文章。

> 是否可以将所有这些数据包含在一个数据库中，但在客户端数据之间进行某种形式的物理隔离，以便它的性能类似于拥有多个数据库？

不，不是。*物理隔离*意味着每个客户端都必须有自己的数据库或自己的模式。

> 而是一个带有 ClientID 外键的 Employee 表。这意味着表内的数据需要在物理上分开。

在所有客户端之间共享一个表，并通过它们的 client_id 隔离每个客户端的行不是物理隔离。这就是*逻辑*隔离。为特定客户端选择行取决于在 WHERE 子句中使用它们的 client_id。

您不会*在相同的硬件上*获得类似的性能，因为每个表包含的行数是原始表的五倍，并且每个查询都必须在 WHERE 子句中包含“client_id”。对于少数客户端和少数行，您*可能会*获得类似的性能，但随着数据库的增长，差异将变得更加明显。

# c# - Wpf GridView 多行条目

> ID：14768844
> 
> 赞同：0
> 
> 时间：2013-02-08T08:52:45.003
> 
> 标签：c#, .net, wpf

我正在开发一个`WPF`应用程序。我需要制作一个`GridView`. 但是有一个条件：每行实际上应该是两行，第一行包含 3 列。像：

* * *

| 单元格1 | 单元格2 | 单元格3 |

* * *

| 单元格4 |

* * *

项目类别是

```
 Data{string id, string Name, string type, string Path} 
```

在这种情况下：路径太长，所以我应该在整行上显示它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:27:02.090

您可以使用始终可见 RowDetails 的 Datagrid，例如：

```
<DataGrid ItemsSource="{Binding YourItemSource}" RowDetailsVisibilityMode="Visible">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding id}" Header="Id" />
                <DataGridTextColumn Binding="{Binding Name}" Header="Name" />
                <DataGridTextColumn Binding="{Binding Type}" Header="Type" />
            </DataGrid.Columns>
            <DataGrid.RowDetailsTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path}" />
                </DataTemplate>
            </DataGrid.RowDetailsTemplate>
</DataGrid> 
```

# jquery - JQuery水平幻灯片没有正确推动我的div

> ID：14768845
> 
> 赞同：1
> 
> 时间：2013-02-08T08:52:48.117
> 
> 标签：jquery, slide

所以我做了一些搜索，但没有找到我的问题的答案。

我的页面左侧有一个“反馈”菜单，我希望该“反馈”链接与反馈 div 一起滑动。

取而代之的是，链接只是被推开。

[这是我现在所做的 jsFiddle](http://jsfiddle.net/66aa7/106/)。

```
$(document).ready(function(){
$("#feedback-titre").click(function(){
    $("#feedback-commentaire").toggle("slide");
});
}); 
```

CSS：

```
 #menu-leftfeedback{
    position: fixed;
    left: 0px;
    top: 250px;
}

#feedback-titre{
    float:left;
    background-color:#FFF;
    color:#000;
    font-weight:bold;
    border-radius: 5px 5px 0px 0px;
    border:solid 1px #9C8E69;
    border-bottom:0px;
    cursor:pointer;
    display:block;
    width:100px;
    height:30px;
    font-size:large;
    -webkit-transform: rotate(90deg);
    -webkit-transform-origin: bottom left;
    -moz-transform: rotate(90deg);
    -moz-transform-origin: bottom left;
    -ms-transform: rotate(90deg);
    -ms-transform-origin: bottom left;
    -o-transform: rotate(90deg);
    -o-transform-origin: bottom left;
    transform: rotate(90deg);
    transform-origin: bottom left;
}

#feedback-commentaire{
    float:left;
    background-color:cyan;
    display:none;
    width:300px;
    height:330px;
}

#feedback-commentaire input, #feedback-commentaire textarea{
    width:290px;
    border: medium none;
    color: #7B7B7B;
    font-size: 18px;
    height: 38px;
    padding: 2px 10px 2px 7px;
}

#feedback-commentaire button{
    background-color:transparent;
    border:0;
    color:#D42E00;      
} 
```

我的猜测：它是 CSS，但我尝试了很多东西都没有成功。我变成你来帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:15:43.427

这是我如何让它工作的：

**CSS**

```
#menu-leftfeedback{
    position: fixed;
    left: -300px;
    top: 250px;
}

#feedback-commentaire{
    float:left;
    background-color:cyan;
    /*XXXXXXX REMOVED XXXXXXX display:none;*/
    width:300px;
    height:330px;
} 
```

**JS**

```
var feedbackButton = $("#feedback-titre"),
    feedbackContent = feedbackButton.parent();

feedbackButton.click(function(){
    feedbackContent.animate({
        left: parseInt(feedbackContent.css('left'),10) == 0 ? -feedbackContent.outerWidth() + feedbackButton.outerWidth() : 0
    }, 500);
}); 
```

**演示**

[http://jsfiddle.net/66aa7/110/](http://jsfiddle.net/66aa7/110/)

# php - NuSOAP 是否支持 UDDI？

> ID：14768849
> 
> 赞同：1
> 
> 时间：2013-02-08T08:53:06.073
> 
> 标签：php, web-services, wsdl, nusoap, uddi

也许我不完全理解[UDDI](http://en.wikipedia.org/wiki/Universal_Description_Discovery_and_Integration)的全部内容，但我正在考虑**一种在一个服务器上发布所有提供的服务的技术？**

通过“服务器”，我应该理解**物理地址**（如`www.example.com`）**还是只是编程工具**（例如谈论 NuSOAP 一个 PHP 文件，包括`nusoap.php`）？

因此，如果服务器只是 PHP 文件，则附加`?wsdl`到该文件将为我提供所有已注册函数的列表。这已经是所谓的 UDDI 了吗？

最后，**NuSOAP 是否支持 UDDI？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:02:22.753

看来您有些事情混淆了，所以让我们尝试消除一些混乱。首先是一些定义！

**[Web 服务](http://en.wikipedia.org/wiki/Web_service)**是一种允许机器对机器通信的方式。当您通过网络公开一些操作时，您就创建了一个 Web 服务。其他机器使用这些操作与您的机器“对话”，它们成为您的 Web 服务的客户端。客户端从您的 Web 服务请求信息，据说他们“使用”您的 Web 服务。当然，没有提供者就不能拥有消费者，所以你有一个网络服务“提供者”。

但是机器怎么知道如何相互交谈呢？

**[SOAP](http://en.wikipedia.org/wiki/SOAP)**是一种用于交换信息的协议。它通过将消息包装在标准信封 + 标题 + 正文请求中来定义讨论的共同基础（机器使用相同的语言）。

但是消息本身呢？那是怎么定义的？当您公开 Web 服务时，您必须告诉其他人如何实现客户端（即记录您的操作，以及要发送或期望返回的消息）。您可以使用 PDF 来执行此操作，例如详细说明操作、消息格式、参数类型等。但是有一种更好的方法，允许您动态生成客户端：WSDL（按照约定可从添加`?wsdl`Web 服务端点地址）。

**[WSDL](http://en.wikipedia.org/wiki/Web_Services_Description_Language)**提供了一个机器可读的描述，描述了如何调用服务、它期望什么参数以及它返回什么（基本上你必须遵守什么契约才能调用它）。有一些工具可以读取 WSDL 并为您的 Web 服务客户端创建代码或提供实用功能，使您可以更轻松地调用 Web 服务，而无需对消息进行低级操作。

**[NuSOAP](http://sourceforge.net/projects/nusoap/)**就是这样一个工具。它是一组允许您使用 SOAP Web 服务的 PHP 类。

但是，在您拥有执行呼叫所需的一切之后，您如何知道您可以拨打该呼叫的 Web 服务地址在哪里？

作为提示，您可以在 WSDL 中找到它，[但这并不总是可靠的](https://stackoverflow.com/questions/9992847/why-does-the-webservice-return-data-even-if-the-ip-address-in-the-wsdl-is-wrong/)，因此您必须从 Web 服务提供商处获取它。然后，您使用该地址一次又一次地调用 Web 服务。

但是，如果提供商对其基础设施进行了一些更改，而现在 Web 服务暴露在另一个地址上怎么办？您的客户端不再工作，因为它连接到旧地址。您必须再次从提供商处获取地址。如果您可以在运行时以某种方式发现此地址然后连接到 Web 服务，那不是更容易吗？

如果提供商在不同地址多次公开相同的服务（作为备份）怎么办？您可以连接到其中一个，如果出现问题，您可以搜索另一个公开相同合同的 Web 服务。

但是，如果我们谈论的是合同，为什么要将自己限制在一个供应商上呢？无论提供者如何，为什么不搜索公开特定合同的服务？.... 在这一点上，事情有点失控，因为人们想象一个世界，通过使用一个充当黄色（[实际上是三种颜色](http://en.wikipedia.org/wiki/Universal_Description_Discovery_and_Integration#Structure)）Web 服务页面的注册表，服务将自发地相互连接。

**[UDDI](http://en.wikipedia.org/wiki/Universal_Description_Discovery_and_Integration)**是一个注册中心，生产者注册他们的 Web 服务，而消费者查询注册中心以查找具有特定合同的 Web 服务，然后连接到他们找到的内容。交互是这样的：

![在此处输入图像描述](../Images/d2d1e8acd4dd3cd293bc022a1dcb5681.png)
[http://juddi.apache.org/docs/3.x/userguide/html/chap-UDDI_Registry.html](http://juddi.apache.org/docs/3.x/userguide/html/chap-UDDI_Registry.html)

这个想法在定义合同并创建实现的企业内部很有效，并且所有 Web 服务都具有已知的质量和功能。但是在网上是不行的。

如果没有适当的先验测试和验证，以及保证 Web 服务不会向不希望的方向发展或完全停止发展的东西，就没有适当的方法来验证服务是否真的在做它所宣传的事情.

因此，（公共）UDDI 实际上并没有在野外使用，而是在企业中有所使用，因为企业签署了定义规则的合同，以保证您从（私有）UDDI 得到的东西是真实的.

总之（以确保我完全解决了您的问题）UDDI 是提供者发布有关其 Web 服务的信息的地方。这包括规范、接口等，还有端点地址。它只是有关 Web 服务的信息，而不是 Web 服务本身，因此`nusoap.php`不会发布到注册表。

至于支持 UDDI 的 NuSOAP，不清楚您对此有何理解。[UDDI 可通过 SOAP API 访问，](http://www.tutorialspoint.com/uddi/uddi_api_references.htm)因此您可以使用 NuSOAP 来简化对它的访问，如果您需要的话。

# sql - 如何计算数据库字段中的标记

> ID：14768851
> 
> 赞同：0
> 
> 时间：2013-02-08T08:53:08.567
> 
> 标签：sql, database

我在下面有一个查询，我的问题只是我如何计算`StudentMarks`属于特定 StudentId 和 QuestionId 的所有内容并显示它？

例如：

Student_Answer 表：

```
StudentAnswerId (PK auto)  QuestionId (Fk Question) StudentId (Fk Student)  StudentMarks    
1                          72                          39                          2
2                          73                          39                          2
3                          73                          39                          1
4                          73                          39                          0
5                          72                          40                          0
6                          73                          40                          0
7                          73                          40                          1
8                          73                          40                          2 
```

现在，如果我运行以下查询：

```
SELECT
        sa.StudentId, q.QuestionId,
        GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, StudentMark
        FROM Student st
        INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
        INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId) AND sa.QuestionId = sr.QuestionId
        INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
        INNER JOIN Answer an ON q.QuestionId = an.QuestionId
    WHERE q.SessionId = 27
          GROUP BY sa.StudentId, q.QuestionId
          ORDER BY StudentAlias, q.SessionId, QuestionNo 
```

它显示这个：

```
StudentId  QuestionId StudentAnswer  StudentMark
39         72         C              0
39         73         A,C,E          0
40         72         D              2
40         73         B,C,D          2 
```

但是计数`StudentMark`不正确，应该是：

```
StudentId  QuestionId StudentAnswer  StudentMark
39         72         C              2
39         73         A,C,E          3
40         72         D              0
40         73         B,C,D          3 
```

**更新：**

```
 SELECT
        sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, 
        QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
        GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
        GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, 
        SUM(StudentMark) AS SumStudentMarks
        FROM Student st
        INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
        INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId) AND sa.QuestionId = sr.QuestionId
        INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
        INNER JOIN Answer an ON q.QuestionId = an.QuestionId
        LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
        LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
    GROUP BY StudentId,QuestionId

Student - Student_Answer (StudentId)
Student - Student_Response (StudentId)
Student_Answer - Question (QuestionId)
Student_Response - Question (QuestionId)
Question - Answer (QuestionId)
Question - Reply (ReplyId)
Question - Option_Table (OptionId) 
```

以下是表格列表：

**学生：**

```
StudentId (PK auto)  StudentForename  StudentSurname 
39                   Luke             McFadzen
40                   Chris            Tucker 
```

**学生回答：**

```
StudentAnswerId (PK auto)  QuestionId (FK Question)  StudentAnswer  StudentId (FK student)
1                          72                         D             39
2                          73                         B             39
3                          73                         C             39
4                          73                         D             39
5                          72                         C             40
6                          73                         A             40
7                          73                         C             40
8                          73                         E             40 
```

**学生响应：**

```
StudentResponseId (PK auto)  QuestionId (FK Question) ResponseTime  StudentId (FK student)
1                            72                       00:00:05      39
2                            73                       00:00:15      39
3                            72                       00:00:09      40
4                            73                       00:00:26      40 
```

**问题：**

```
QuestionId (PK auto)  QuestionNo  SessionId (FK Session) ReplyId (FK Reply) OptionId (FK Option)    
72                    1           23                     1                  3
73                    2           23                     2                  7 
```

**回答：**

```
AnswerId (PK auto)    QuestionId (FK Question)      Answer  
1                          72                         C             
2                          73                         A             
3                          73                         C             
4                          73                         D 
```

**回复：**

```
ReplyId (PK auto)  ReplyType
1                  Single
2                  Multiple 
```

**选项表：**

```
ReplyId (PK auto)  ReplyType
1                  A-C
2                  A-D
3                  A-E
4                  A-F
5                  A-G
6                  A-H
7                  A-I
8                  A-J 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:02:05.860

`SUM(StudentMark)`而不仅仅是`StudentMark`.

# javascript - 使用 Javascript 获取 Google Analytics ID

> ID：14768855
> 
> 赞同：4
> 
> 时间：2013-02-08T08:53:24.060
> 
> 标签：javascript

我正在尝试从 html 文档中提取 Google 分析 ID。

我发现了以下功能：

```
function get_UA() {

txt = document.getElementById('scripttag').value;

var matches = txt.match(/(UA-[\d-]+)/);

if (matches[1]) {

    alert(matches[1]);

}

} 
```

但我收到这个错误：

> TypeError：'null' 不是对象（评估'document.getElementById('scripttag').value'）

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T09:12:04.213

您可以访问 _gaq 变量吗？如果可以，并且页面正在使用异步跟踪...

```
var accountId = _gaq._getAsyncTracker()._getAccount(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-20T02:05:10.433

在 2017 年 4 月，这有效：

`ga.getAll()[0].b.data.values[':trackingId']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-08T14:54:50.617

```
ga.getAll()[0].get('trackingId') 
```

如果你已经有一个跟踪器，你可以通过

```
tracker.get('trackingId') 
```

**小心**，不要忘记[谷歌分析最佳实践](https://developers.google.com/analytics/devguides/collection/analyticsjs/ga-object-methods-reference)

> 不要在 readyCallback 之外使用 ga 对象方法，因为这些方法可能还不可用。

# ios - 如何在故事板中访问正确的导航控制器

> ID：14768859
> 
> 赞同：0
> 
> 时间：2013-02-08T08:53:48.940
> 
> 标签：ios, objective-c, uinavigationcontroller, uitabbarcontroller, storyboard

你可以在这里看到我的故事板。

![在此处输入图像描述](../Images/869c3d4afaaad6939cccbd84e8b07bd2.png)

我现在的问题是我应该如何以正确的方式在代码中访问不同的导航控制器。因为有时我会遇到一些麻烦。

例如，访问 NAV 1 和访问 NAV 2 或 NAV 3 ... 之间有什么区别。

有什么帮助吗？谢谢

**设置标题的代码**

```
- (void)addEvent:(id)sender {
    NSLog(@"pressed event");

    EKEventEditViewController *addController = [[EKEventEditViewController alloc] initWithNibName:nil bundle:nil];

    // set the addController's event store to the current event store.
    addController.eventStore = self.eventStore;
    addController.editViewDelegate = dataSource;
    // present EventsAddViewController as a modal view controller
    addController.title = @"";
    self.title = @"";
    self.parentViewController.title = @"";
    self.navigationController.parentViewController.title = @"";
    self.navigationController.visibleViewController.title = @"";
    self.navigationController.title = @"";
    self.navigationItem.title = @"";
    addController.navigationItem.title = @"";
    addController.navigationController.title = @"";
    self.tabBarController.navigationController.title = @"";
    [self presentModalViewController:addController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:19:46.527

答案就在故事板本身。

Nav1 是将屏幕推送到选项卡 1 的根导航控制器。您正在创建单独的导航控制器并启动另一个导航的流程。所以要获得导航 2，剩下的你必须依赖于 tabcontroller 选项卡 1

编辑：在 VC 中设置标题

```
[self.navigationItem setTitle:@"Title"]; 
```

重新编辑：

插入导航控制器并模态显示导航控制器

```
EKEventEditViewController* myController = [[EKEventEditViewController alloc] init];
myController.title = @"My Title";

UINavigationController* modalController = [[UINavigationController alloc] initWithRootViewController:myController];
[self presentViewController:modalController animated:YES completion:nil];

[modalController release];
[myController release]; 
```

# linux - 防止使用 USB 闪存驱动器

> ID：14768861
> 
> 赞同：1
> 
> 时间：2013-02-08T08:53:49.917
> 
> 标签：linux, security, usb, driver

我需要的是编写一个*linux 程序/驱动程序*，它只允许使用带有注册 UUID 的闪存驱动器。未注册的闪存驱动器不应被访问。

据我了解，如果我有 root 访问权限，我可以绕过任何类型的系统。这就是为什么我认为它应该适用于非特权用户。

我真的不知道从哪里开始。这可以从用户空间完成吗？这个系统有什么限制？

编写 udev 规则而不是程序不是答案，因为这是我的课程项目 =)

**我没有重新编译内核或现有模块的选项**

# entity-framework-5 - EF 5.0 模型优先 - 如何制作未映射的属性

> ID：14768863
> 
> 赞同：3
> 
> 时间：2013-02-08T08:54:02.810
> 
> 标签：entity-framework-5

Code First 对不被映射的属性具有 [NotMapped] 属性：如何在模型优先模式下实现相同的目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T12:51:25.787

`NotMapped`属性不是映射的一部分。当使用模型优先方法时，EDMX 表示映射，因此图中定义的每个属性都被映射。如果您想拥有非映射属性，则不得在图中定义它。EF 的代码生成生成的所有类都是部分的，因此您只需要创建自己的类的部分部分（它必须与生成的部分位于相同的命名空间和程序集中）并在代码中定义您的非映射属性。

# java - Android：SQLite：如果 isDatabaseIntegrityOK() 返回 false

> ID：14768874
> 
> 赞同：2
> 
> 时间：2013-02-08T08:54:39.040
> 
> 标签：java, android, sqlite, logging, data-integrity

如果 SQLiteDatabase.isDatabaseIntegrityOK() 返回 false，我如何访问数据库应该返回的 1-100 行日志？

我想在我的 Android 应用中显示完整性检查的结果。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:23:21.737

只需自己执行命令，并假装它是`SELECT`：

```
Cursor cursor = db.rawQuery("PRAGMA integrity_check", null);
while (cursor.moveToNext()) {
    String s = cursor.getString(0);
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T18:21:07.520

使用 Android 的 DatabaseUtils 的替代方法：

```
StringBuilder sb = new StringBuilder();
DatabaseUtils.dumpCursor(db.rawQuery("PRAGMA integrity_check", null), sb); 
```

# propel - 将类添加到推进行为的使用部分

> ID：14768877
> 
> 赞同：0
> 
> 时间：2013-02-08T08:54:47.943
> 
> 标签：propel, behavior, symfony-2.0

而已。我创建了行为，并且由于我的行为，只有它的一些类被添加到 head 中`use`。

例如，行为创建名为 的新表`acme`。Propel 生成器添加到我的`Foo`类（app/propel/AppPropelModel/AcmeBundle/om/BaseFoo.php）`AcmeBehavior`和`AcmeBehaviorQuery`，但不是`AcmeBehaviorPeer`。

我不想在行为构建类中弄乱完整的类名`AcmeBehaviorObjectBuilderModifier.php` 如何让 Propel 也添加`use AppPropelModel\HornsAndHooves\AcmeBundle\AcmeBehaviorPeer`到目标类文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T09:31:17.787

如果您使用一个类并希望将其添加到“使用”块中，则必须在构建器中声明该类。只需在此函数中使用您的完整命名空间调用 declareClass：

```
class MyBehavior extends Behavior {
    ...

    public function objectMethods($builder)
    {
        $builder->declareClass('MyNamespace\\MyBundle\\Subfolder');
    }
} 
```

这将导致：

```
use MyNamespace\MyBundle\Subfolder;

abstract class MyModelClass extends ... 
```

# google-apps-script - google 可视化 API 查询 ReferenceError: "google" is not defined

> ID：14768879
> 
> 赞同：1
> 
> 时间：2013-02-08T08:55:00.610
> 
> 标签：google-apps-script

当我将此代码粘贴到我的脚本中时怎么会：

[https://code.google.com/apis/ajax/playground/?type=visualization#using_the_query_language](https://code.google.com/apis/ajax/playground/?type=visualization#using_the_query_language)

并运行它，它给了我这个错误：

> ReferenceError：未定义“google”。

？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:01:23.007

需要先加载“Google Visualization API”：[按照快速入门](https://developers.google.com/chart/interactive/docs/quick_start)。

> 您可以将下面的代码段复制到计算机上的文件中，然后在浏览器中打开它以显示如上所示的饼图：

链接中的代码片段：

```
<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

  // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() {
    // !!! Use Google Visualization API here !!!
  }
</script> 
```

请注意，Google Visualization API*仅*在`drawChart`调用后可用。

# sql - 从 oracle 到水晶报表的调用过程

> ID：14768880
> 
> 赞同：1
> 
> 时间：2013-02-08T08:55:00.297
> 
> 标签：sql, oracle, crystal-reports, date-arithmetic

我创建了一个 oracle 过程，它正在使用 oracle SQL 编辑器。
我想在水晶报表中使用该过程。
从数据库专家中，我选择了该过程并且出现了一条错误消息：

==============================
查询引擎错误：'ADO 错误代码：0x
来源：OraOLEDB
描述：ORA-01850：小时必须在 0 和 23 之间
ORA-06512：在“NPLS.PROC_YEARLYACTIVELIST2”，第 19 行
ORA-06512：在第 1 行本
机错误：'
==================== ==========

我这样声明变量：
==============================
str INT;
inv_date 日期；
==============================

过程如下，
================ ==============
创建或替换过程 PROC_YEARLYACTIVELIST2(in_year IN VARCHAR)
AS

ctr INT;
字符串整数；
curr_rowid VARCHAR2(50);
inv_date 日期；

开始从TBLACTIVELISTYEARLY2

中删除；
ctr := 1;
FOR ctr IN 1..12
LOOP

IF ctr = 1 THEN
str := '01';
inv_date := to_date('31-01-' || in_year || '23:59:59', 'DD-MM-YYYY HH24:MI:SS');
万一;
结尾;
/
===============================

我一直在尝试解决这个问题很长时间，但仍然找不到解决方案。
我希望你能帮助我。

谢谢！:)

-米歇尔（在职实习生）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:34:09.820

一种可能性是 in_year 没有被 Crystal 传入或作为 NULL 传入。

请验证这一点。您可以添加此代码作为快速检查：

```
 if (trim(in_year) is null) or length(in_year != 4))
  then
    raise_application_error(-20000, 'year is invalid: '  || in_year);
  end if;
 inv_date := to_date('31-01-' || in_year || ' 23:59:59', 'DD-MM-YYYY HH24:MI:SS'); 
```

那会抛出什么错误？

好像年份是空的，我们会得到那个错误：

```
SQL> declare
  2    inv_date DATE;
  3     in_year varchar2(42) ;
  4  begin
  5   inv_date := to_date('31-01-' || in_year || ' 23:59:59', 'DD-MM-YYYY HH24:MI:SS');
  6  end;
  7  /
declare
*
ERROR at line 1:
ORA-01850: hour must be between 0 and 23
ORA-06512: at line 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:36:13.273

该功能有效且有效。格式掩码中的年份和小时之间有一个多余的破折号。Oracle 应该能够忽略这一点，但也许 Crystal 不能：如果只是为了从查询中消除它，清理它肯定是值得的。

如果不是这样，那么唯一可能的就是`in_year`. 你能把它写到跟踪文件中看看它是什么吗？

或者，这是一种更复杂但可能不那么不稳定的方式来获得相同的日期时间：

```
last_day(trunc(to_date( in_year, 'YYYY') , 'YYYY') ) + (86399/86400)

                          ^  first day of current month
          ^ first day of current year
 ^ last day of month
                                                        ^ last second of the day 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T15:47:54.850

检查您的数据库 nls 时间设置。我认为这与您的水晶报告设置不同。

如果您需要更改 nls 设置，请使用此查询-- alter session set nls_date_format ='your date format here';

# php - 注销facebook graph api的问题

> ID：14768885
> 
> 赞同：0
> 
> 时间：2013-02-08T08:55:19.973
> 
> 标签：php, facebook, facebook-graph-api

我在注销 Facebook 时遇到问题。我有一个名为注销的按钮。单击此按钮时，它将用户重定向到他的主页，之后用户只能使用 facebook 中提供的选项注销。但我希望在用户单击注销后立即自动完成。

```
$user            =   null; //facebook user uid
try{
    include_once "src/facebook.php";
}
catch(Exception $o)
{
    error_log($o);
}

$facebook = new Facebook(array(
  'appId'  => $fbconfig['appid'],
  'secret' => $fbconfig['secret'],
  'cookie' => true,
  'fileUpload' => true,));

//Facebook Authentication part
$user       = $facebook->getUser();
if ($user) 
{
  try {

    $user_profile = $facebook->api('/me');

  } catch (FacebookApiException $e) {
   error_log($e); 
    $user = null;
  }
}

$loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'         => "manage_pages",
            'redirect_uri'  => $fbconfig['baseurl']
        )
);

$logoutUrl  = $facebook->getLogoutUrl(); 
```

//索引.php

```
 <?php if (!$user) { ?>
   FB Login Button
    <a href="<?=$loginUrl?>"><fb:login-button           
    scope="create_event,manage_pages,user_photos"> </fb:login-button></a>
   <?php } else { ?>
    <a href="<?=$logoutUrl?>">Facebook Logout</a>
   <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T02:11:00.197

请在您的应用设置中添加您的域 URL。它会像魔术一样工作。

# c# - Datetime.ParseExact() 不起作用

> ID：14768886
> 
> 赞同：2
> 
> 时间：2013-02-08T08:55:24.230
> 
> 标签：c#, asp.net, datetime

我在c#中编译了以下代码

```
string datetime = String.Format("{0:MM/dd/yyyy hh:mm:ss tt}", root.SelectSingleNode("lasttime").InnerText);

lastUpdateTimestamp = DateTime.ParseExact(datetime, "MM/dd/yyyy hh:mm:ss tt", CultureInfo.CurrentCulture); 
```

但在输出中我得到 lastUpdateTimestamp 是 2/8/2013 7:00:24 AM 而不是 02/08/2013 07:00:24 AM

知道我缺少什么吗？

获得此值后，我正在运行查询并收到此错误

```
Invalid month in timestamp "2": cannot find leading zero [SQL query syntax invalid or unsupported.] 
```

大家好，我得到了解决方案，我现在不是通过 lastUpdateTimestamp 而是在字符串变量中获取日期并以正确的格式对其值进行计算。它的工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:02:13.137

`root.SelectSingleNode("lasttime").InnerText`返回一个字符串。

您正在尝试使用 DateTime 格式说明符来格式化字符串。

不知道你想做什么，但这样的事情应该有效

```
string xmlstring = root.SelectSingleNode("lasttime").InnerText;
DateTime parsed = DateTime.ParseExact(xmlstring, "M/d/yyyy h:mm:ss tt");

string datetime = string.Format("{0:MM/dd/yyyy hh:mm:ss tt}", parsed); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:05:43.427

来自评论：

> 我得到作为 lastUpdateTimestamp.ToString() 的输出。它应该是 02/08/2013 07:00:24 AM，但它显示的是 2/8/2013 7:00:24 AM

`lastUpdateTimestamp.ToString()`将使用当前文化的一般日期时间格式进行格式化。在你的情况下，这显然是`M/dd/yyyy...`.

如果您想要不同的格式，则需要将其指定为 的参数`DateTime.ToString`，例如：

```
lastUpdateTimestamp.ToString("MM/dd/yyyy hh:mm:ss tt") 
```

或者对于独立于当前文化的固定格式：

```
lastUpdateTimestamp.ToString("MM/dd/yyyy hh:mm:ss tt", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:22:27.710

因此，您的问题不是如何将字符串解析为 a `DateTime`，`Datetime.ParseExact`而是如何从 a 获取正确的字符串`DateTime`：

```
DateTime dt = DateTime.Now;
string dtStr = dt.ToString("dd/MM/yyyy hh:mm:ss tt"
                          , System.Globalization.CultureInfo.InvariantCulture); 
```

结果：

```
08/02/2013 10:20:18 AM 
```

但是由于您从数据库中获得了异常：

> 找不到前导零 [SQL 查询语法无效或不受支持

您应该真正使用参数并传递`DateTime`而不是`string`！

# android - Android：ProgressBar 和有关进度的文本信息

> ID：14768895
> 
> 赞同：0
> 
> 时间：2013-02-08T08:56:13.683
> 
> 标签：android, progress-bar

我正在编写一个应用程序，它在开始时下载数据并更新数据库。由于这需要相当长的时间，我想向用户显示一个进度条和一些关于目前所做工作的文本信息。

我的代码：

```
public class MainActivity extends Activity {

    private static final String TAG = "MainActivity";

    public static int count = 0;
    public static File path; 

    private ProgressBar myProgressBar;
    private int myProgress = 0;
    private TextView textView; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        myProgressBar=(ProgressBar)findViewById(R.id.progressbar_Horizontal);
        textView = (TextView) findViewById(R.id.show_progress);
        new Thread(progressBarThread).start(); 
```

...
... 更新数据 ...

```
 Intent showList = new Intent(this, ListFragmentActivity.class);
        startActivity(showList); 

    }

    private Runnable progressBarThread = new Runnable(){

        public void run() {
            // TODO Auto-generated method stub
            while (myProgress<100){
                try{
                    myHandle.sendMessage(myHandle.obtainMessage());
                    Thread.sleep(1000);
                }
                catch(Throwable t){ }
            }
        }

        Handler myHandle = new Handler(){

            @Override
            public void handleMessage(Message msg) {
                // TODO Auto-generated method stub
                //
                myProgressBar.setProgress(myProgress);
            }
        };
    };
} 
```

我尝试手动设置进度，例如使用 myProgress=60; 和 textView.setText("Die Datenbank wird aktualisiert.");

不幸的是，没有显示 ProgressBar，也没有显示文本信息。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:06:53.707

尝试将它用于您的进度条，执行它`new ProgressBarAsync().execute();`

```
public class ProgressBarAsync extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void... counter) {
        while (myProgress<100){
            try{
                publishProgress(myProgress);
                Thread.sleep(1000);
                myProgress++;
            }
            catch(Throwable t){ }
        }
        return null;
    }

    protected void onProgressUpdate(Integer... values) {
        myProgressBar.setProgress(values[0]);
        super.onProgressUpdate(values);
    }
} 
```

# python - 在python unittest中双重继承TestCase类时如何避免属性错误？

> ID：14768911
> 
> 赞同：0
> 
> 时间：2013-02-08T08:57:09.200
> 
> 标签：python, unit-testing, inheritance

我有以下构造，我从中派生一个类`unittest.TestCase`，其中调用了在实际测试类中定义的方法`MyTests`。

```
import unittest

class TestCase1(unittest.TestCase):

    @classmethod
    def setUpClass(cls):  
        print cls.extra()

class TestCase2(TestCase1):

    @classmethod
    def setUpClass(cls):
        TestCase1.setUpClass()

class MyTests(TestCase1):

    @classmethod
    def extra(cls):
        return 42

    def test1(self):
        pass

if __name__ == '__main__':
    unittest.main() 
```

就目前而言，上面的代码按预期工作。当我执行测试时，`setUpClass`of`TestCase1`正在运行，它`extra()`在`MyTests`.

当我想改用时，问题就出现了`TestCase2`，`TestCase1`即当我在以下行中将 '1' 更改为 '2' 时：

```
class MyTests(TestCase2): # using TestCase2 instead 
```

这个想法是`setUpClass`被`TestCase2`调用的，它本身`setUpClass`从基本类调用，即`TestCase1`执行方法`extra`。但是，我收到一个属性错误：

```
AttributeError: type object 'TestCase1' has no attribute 'extra' 
```

我似乎误解了这里的一些概念。我本来希望我的代码在这两种情况下都能工作（可能有一些错误），或者在这两种情况下都失败。非常感谢这里可能有什么问题或我如何解决问题的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:15:54.140

原因是当它从`TestCase2`被`cls`传递的继承时`TestCase1.setUpClass()`被调用是类型`TestCase1`，它没有`extra()`方法。当从 MyTests 调用时，它`cls`是一个`MyTests`具有额外方法的实例。

`super`将`cls`参数从传递`MyTests.setUpClass(cls)`到`TestCase1.setUpClass(cls)`。所以当它到达时`TestCase1`，`cls`有一个`extra()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:01:38.963

我强烈建议使用[super](https://stackoverflow.com/questions/576169/understanding-python-super-and-init-methods)而不是`TestCase1.setUpClass()`.

# android - 以编程方式访问有关 Android 应用的唯一标识信息？

> ID：14768916
> 
> 赞同：0
> 
> 时间：2013-02-08T08:57:51.313
> 
> 标签：android, google-play

当您将 .apk 上传到 Google Play 时，您将获得一个 Base64 编码的 RSA 公钥作为您的许可证密钥。如何在他们的 Android 应用程序代码中以编程方式访问相同的密钥？

其次，这个密钥是保持不变，还是每次上传给定应用程序的更新时都会改变（大概是从 .apk 二进制文件生成的）？

如果是这样，您是否可以通过编程方式从应用程序中获取任何其他唯一标识信息，无论更新如何，这些信息都将保持不变。可以明确识别特定应用程序的东西？

举个简单的例子，如果一个库是专有的，但您想将其配置为仅适用于一组预先确定的 Android 应用程序。您可以通过验证一些有关在运行时使用它的应用程序的编程可访问的唯一信息来做到这一点。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:11:29.443

您将用于许可证验证和应用内计费的密钥与用于签署应用程序的密钥混淆了。[您可以使用 this](http://developer.android.com/reference/android/content/pm/Signature.html)获取签名密钥。大多数应用程序不使用许可证密钥，如果需要，必须将其嵌入应用程序中。通常，应用程序由包名称和签名证书（或其哈希值）唯一标识。

# c# - C# xml内联数组反序列化

> ID：14768918
> 
> 赞同：2
> 
> 时间：2013-02-08T08:57:56.327
> 
> 标签：c#, xml

像这样反序列化 xml 的最简单方法是什么：

```
<root>
    <item id="1"/>
    <item id="2"/>
    <item id="3"/>
</root> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T16:46:57.527

实际上，这是可能的 -[这里](https://stackoverflow.com/a/314343/165656)的答案显示了如何。只需将属性定义为数组，但使用注释`XmlElement`

```
public class Item
{
    [XmlAttribute("id")]
    public int Id { get ;set; }

    [XmlText]
    public string Name { get; set; }
}

[XmlRoot("root")]
public class Root
{
    [XmlElement("item")]
    public Item[] Items { get;set;}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T09:03:40.970

```
List<string> items = XDocument.Parse("the xml")
                         .Descendants("item")
                         .Select(item => item.Attribute("id").Value).ToList(); 
```

使用 XDocument！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:02:11.727

最好的方法是解析xml。

反序列化它需要 XmlSerializer 支持的方案，使用 XDocument 来解析它。

下面是一个序列化的例子：

**定义类**

```
public class item
{
    [XmlAttribute("item")]
    public string id { get; set; }
} 
```

**序列化它**

```
var xs = new XmlSerializer(typeof(item[]));
xs.Serialize(File.Open(@"c:\Users\roman\Desktop\ser.xml", FileMode.OpenOrCreate), new item[] { new item { id = "1" }, new item { id = "1" }, new item { id = "1" } }); 
```

**结果：**

```
<?xml version="1.0"?>
<ArrayOfItem xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <item item="1" />
  <item item="1" />
  <item item="1" />
</ArrayOfItem> 
```

如您所见，它使用特殊的 xml 模式，使您的 xml 无法解析，这意味着您必须手动解析 xml，使用 XDocument 或 XmlDocument，或者先使用 XmlSerializer 序列化数据，然后反序列化它。

# php - 使用 CakePHP 2.2.5 的错误密码验证消息

> ID：14768920
> 
> 赞同：0
> 
> 时间：2013-02-08T08:58:04.533
> 
> 标签：php, cakephp

我有一个非常奇怪的问题，我创建了一个简单的表单来将用户添加到数据库中。

该代码运行良好，用户已正确保存到数据库中。

但...

我在使用验证时遇到问题，这是关于密码字段的验证数组的摘录：

```
public $validate = array(        
    ...
    'password'  => array(
        'rule'     => array('minLength', 4),
        'required' => true,
        'message'  => "La password deve essere lunga almeno 4 caratteri"
    )
); 
```

minLength 规则正常工作，但如果我尝试显示消息：

```
debug($this->User->validationErrors); 
```

在我的控制器中。我看到这个输出：

```
array(
    'password' => '*****'
) 
```

为什么是“ ***** ”？？我想得到我在`$validate`数组中写的消息。

此问题仅发生在**密码**字段上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:48:03.943

这是一个必须实施的愚蠢的“安全功能”，以避免一些粗心的人在他们的网站上显示他们的数据库密码（因为他们忘记关闭调试）。因此，如果键“密码”、“模式”等在数组中，则该值将被隐藏。

只需使用 pr()、var_dump()、print_r() 或任何其他不这样做的方法。

PS：你可以发现看看代码（[https://github.com/cakephp/cakephp/blob/master/lib/Cake/Utility/Debugger.php#L449](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Utility/Debugger.php#L449)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:52:18.883

因为密码是散列的，并且有超过 4 个字符。您必须检查密码并在 beforeSave 中验证哈希后:)

您使用的是哪种版本的 Cake？

# python - 正则表达式 - python 2.6 和 3.3 中的不同输出

> ID：14768922
> 
> 赞同：1
> 
> 时间：2013-02-08T08:58:13.300
> 
> 标签：python, regex

当我为正则表达式执行相同的代码时，我在 python 2 和 3 中得到不同的输出。

假设这是我想要的位于网页某处的数据。

```
source = ['\x1e\x1e5.5.30-log\x1epcofiowa@localhost\x1epcofiowa_pci\x1e',
          '\x1e\x1e5.5.30-log\x1epcofiowa@localhost\x1epcofiowa_pci\x1e', 
          '\x1e\x1e5.5.30-log\x1epcofiowa@localhost\x1epcofiowa_pci\x1e', 
          '\x1e\x1e5.5.30-log\x1epcofiowa@localhost\x1epcofiowa_pci\x1e'] 
```

因此，当我在 python 2.6 中运行以下代码时，它运行良好。我得到了像上面这样的精确输出。

```
match = re.findall("\x1e\x1e\S+",source) 
```

但是当我在 python 3.3 中执行它时，例如：

```
match = re.findall("\x1e\x1e\S+", str(source)) 
```

我得到了 match 变量的输出，例如：

```
['\x1e\x1e5.5.30-log', '\x1e\x1e5.5.30-log', '\x1e\x1e5.5.30-log','\x1e\x1e5.5.30-log'] 
```

那么，你能告诉我为什么它没有在 python 3 中使用整个字符串吗？为什么`\x1epcofiowa@localhost\x1epcofiowa_pci\x1e`每次都跳过？我想要像 python 2.6 这样的输出。

所以，我此刻一无所知。我在等待你的答复。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:16:24.200

似乎在和`\S`中表现不同。`Python 2``Python 3`

根据[Python 3 re 模块文档](http://docs.python.org/3/library/re.html#regular-expression-syntax)：-

> `\S`- 匹配任何不是 Unicode 空白字符的字符。这与`\s`. 如果`ASCII flag`使用了 this 则等效于`[^ \t\n\r\f\v]`（但该标志会影响整个正则表达式，因此在这种情况下使用显式`[^ \t\n\r\f\v]`可能是更好的选择）。

现在，因为`\x1e`(相当于`U+001E`, 在 your 之后出现的`\x1e\x1e5.5.30-log`是对 activestate 的`unicode whitespace`字符[引用](http://code.activestate.com/lists/python-list/193571/)`\S`，所以它在 Python 3中不匹配 by 。

* * *

而在[Python 2](http://docs.python.org/2/howto/regex.html)中：-

> `\S`- 匹配任何非空白字符；这相当于类`[^ \t\n\r\f\v]`。

So, it only considers the `ASCII` character set for matching non-whitespace, and hence it matches `\x1e`.

# ios - 使用 AR 框架跟踪简单的几何形状？

> ID：14768926
> 
> 赞同：1
> 
> 时间：2013-02-08T08:58:48.877
> 
> 标签：ios, image-processing, augmented-reality, layar

我想在增强现实 iOS 应用程序中检测和跟踪简单的 2D 几何对象（例如红色矩形、蓝色圆圈）。这是 AR 框架可以做到的吗？

[例如， metaio](http://dev.metaio.com/sdk/tracking-configuration/optical-tracking-technologies/markerless/)中的无标记 2D 跟踪似乎依赖于参考图像，这不是我所需要的。我怀疑[SLAM](http://en.wikipedia.org/wiki/Simultaneous_localization_and_mapping)（如无标记 3D 跟踪）可能也不合适（2D 形状，用户在它们面前保持相当“静态”）。尽管如此，我更愿意使用这样的 AR 框架，而不是像[OpenCV](https://stackoverflow.com/questions/11424002/how-to-detect-simple-geometric-shapes-using-opencv)这样的较低级别的抽象。我也更喜欢包含免费许可选项的框架（例如，通过 Layar 的 metaio）。

如果适用，最欢迎命名 AR 框架和适当 API 调用的特定响应（例如输入：矩形宽度/高度、视频源；输出：视频坐标系中的矩形 x/y/角度）。在这种情况下使用 SLAM 的第一手经验也是如此。

# ruby-on-rails - 嵌套路由在创建时失败

> ID：14768927
> 
> 赞同：0
> 
> 时间：2013-02-08T08:58:52.450
> 
> 标签：ruby-on-rails

地点有列表。从位置索引中，我希望用户能够添加一个新列表（属于该位置），然后被重定向到更新的索引。

我的路线如下：

```
match 'listings/search' => 'listings#search'
resources :locations do
   resources :listings
end
resources :locations
resources :listings
match "listings/:location" => 'listings#show' 
```

这是列表的表格：

```
<%= form_for(@listing, :url=>"/locations/#{@location_id}/listings") do |f| %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我认为应该调用listings_controller中的create方法：

```
def create
  @location= Location.find(params[:location_id])
  @location_id = @location.id
  @listing = @location.listings.create(params[:listing])

  respond_to do |format|
    if @listing.save
      redirect_to location_listings_path(@location_id)
    else
      format.html { render action: "new" }
    end
  end
end 
```

当我按下提交时，它会重定向到 /locations/1/listings 这正是我想要的。但是窗口是空白的。如果我按刷新（访问位置/1/列表任何其他时间），它会正确显示索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:12:47.133

您还可以将您的 form_for 更改为：

```
<%= form_for([@location, @listing]) do |f| %> 
```

所以你不必添加 :url 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:17:45.200

做了一些返工：

```
# config/routes.rb
resources :locations do
   resources :listings
   get :search, on: :collection # will be directed to 'locations#search' automatically
end

resources :listings 
```

表单 url 可以这样使用，也可以按照 Peter 建议的方式使用：

```
<%= form_for(@listing, url: location_listings_path(@location)) do |f| %>
  <div class="actions">
  <%= f.submit %>
  </div>
<% end %> 
```

您的控制器也可以清理：

```
# app/controllers/listings_controller.rb
def create
  @location = Location.find(params[:location_id])
  @listing = @location.listings.build(params[:listing])

  if @listing.save
    redirect_to location_listings_path(@location_id)
  else
    render action: :new
  end
end 
```

# mysql - 与 mysql_real_escape_string 连接错误

> ID：14768930
> 
> 赞同：-4
> 
> 时间：2013-02-08T08:58:59.977
> 
> 标签：mysql, php

当我浏览我的网站时，一切正常。该网站与数据库连接并显示结果。但是，每当遇到此错误时，我都会收到此错误`mysql_resl_escape_string`：

> mysql_real_escape_string() [function.mysql-real-escape-string]: 无法通过socket '/var/lib/mysql/mysql.sock' (2) in......

请注意，一旦我从每个页面中删除 mysql_real_escape_string 代码，该网站就会运行良好。但是，这是没有道理的。这件事有什么解决办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:02:25.283

为了`mysql_real_escape_string`工作，您首先必须通过以下方式连接到 MySQL`mysql_connect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:03:08.703

该错误意味着默认的 mysql 数据库连接未在您的`php.ini`.

您可能会`mysql_real_escape_string`在没有先连接到数据库的情况下使用，在这种情况下 PHP 会尝试使用默认配置从`php.ini`.

在您的情况下，这些默认设置效果不佳，仅此而已。

更改配置并且错误消失 - 或 - 提供有效的 mysql 数据库连接作为[`mysql_real_escape_string`](http://php.net/mysql_real_escape_string)函数调用的参数。

*附加说明：*如果您正在编写新代码，请删除`mysql_*`访问 mysql 数据库的函数。选择`Mysqli`或`PDO`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T09:05:04.857

您传入从 mysql_connect 返回的连接变量作为第二个参数？

附带说明一下，您真的应该转而使用[PDO](http://www.php.net/manual/en/book.pdo.php)，如果您使用它的 prepare 函数，它会自动转义字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T09:04:39.377

您以错误的方式使用此功能。
您不是在将**字符串值**放入查询之前仅处理它们，而是在代码顶部的某处处理**所有用户输入值。**
它将引导您进行 sql 注入

# linux - VmRSS 增加

> ID：14768931
> 
> 赞同：3
> 
> 时间：2013-02-08T08:59:05.680
> 
> 标签：linux

我正在 redhat linux 上执行一个多线程 c++ 应用程序。

在应用程序运行时，我观察到 VmRSS 增加了大约 20-80 kB，并且随着这个值的增加，在一段时间内 VmSize 也会增加并导致内存不足。

VmStk 和 VmData 值保持不变。

**VmRSS 值增加的原因可能是什么？** 代码中有适当的新建和删除操作。

这个值是否会随着容器上的大型操作/由于应用程序中更多的线程而增加？或者如果有任何内存泄漏，价值会增加吗？

如果 VmRSS 确实随着应用程序的使用而增加，那么如何防止内存不足的情况？

我知道 VmRss 是正在使用的实际物理内存。如果有人可以提供有关 VmRSS 的更多信息，那将很有帮助。

谢谢！

# phpunit - 在 Chrome 和 IE 中启动 phpunit-selenium2 测试

> ID：14768933
> 
> 赞同：11
> 
> 时间：2013-02-08T08:59:12.770
> 
> 标签：phpunit, selenium-webdriver

我使用本教程[http://net.tutsplus.com/tutorials/php/how-to-use-selenium-2-with-phpunit/](http://net.tutsplus.com/tutorials/php/how-to-use-selenium-2-with-phpunit/)创建了测试。一切正常，但我只能在 Firefox 上启动此测试。我在互联网上阅读了很多关于此的文章，但我没有找到任何解决方案。我有 Sebastian Bergmann 的 Windows XP、PHP 5.4.7、PHPUnit 3.7.13。在运行测试之前，我启动了 selenium-server-standalone-2.28.0.jar。有我的测试

```
<?php
class Example extends PHPUnit_Extensions_Selenium2TestCase
{   protected function setUp()
    {   
    $this->setBrowser("firefox");
        $this->setBrowserUrl('http://test.com/');
    }

    public function testogin()
    {
        $this->url('http://test.com/');
        $this->timeouts()->implicitWait(10000);
        $username = $this->byId('user_login');
        $username->value('test.ru');
        $password = $this->byId('user_pass');
        $password->value('test');
        $this->byId('login_btn')->click();
    }
}
?> 
```

请帮我在其他浏览器上运行这个测试。如果您需要更多信息，请询问我。谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T10:02:10.837

对于铬：

*   浏览[文档](http://code.google.com/p/selenium/wiki/ChromeDriver)
*   下载[ChromeDrive](https://sites.google.com/a/chromium.org/chromedriver/)
*   使用额外的参数启动 Selenium：`java -jar selenium-server-standalone-<version>.jar -Dwebdriver.chrome.driver=/path/to/chromedriver.exe`
*   现在`$this->setBrowser('chrome');`在你的 setUp() 方法中做

我还没有尝试过 IE 驱动程序，所以我不能为你做更多然后指向[文档](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)。

最后，尝试在所有这些浏览器上运行您的测试，您可以为所有浏览器提供一个数组：[https](https://phpunit.de/manual/4.8/en/selenium.html) ://phpunit.de/manual/4.8/en/selenium.html 同样，我自己还没有尝试过这个，所以我不能比那些文档更具体。

希望我现在已经给了你足够多的指示...... :)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-16T07:52:48.090

对于 IE：

*   下载[InternetExplorerDriver](https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver)
*   使用额外的参数启动 Selenium：

    java -jar selenium-server-standalone-.jar -Dwebdriver.chrome.driver=/path/to/chromedriver.exe **-Dwebdriver.ie.driver=/path/to/IEDriverServer.exe**

*   现在做 $this->setBrowser('iexplore'); 在你的 setUp() 方法中

# javascript - 使用 Backbone.js 路由器进行路由而不是使用服务器端代码的原因

> ID：14768940
> 
> 赞同：10
> 
> 时间：2013-02-08T08:59:46.017
> 
> 标签：javascript, model-view-controller, backbone.js

何时以及为什么要使用 Backbone.js 路由器进行路由，而不是通过服务器端代码进行路由？有人可以详细说明一下，因为这是我第一次在客户端进行路由。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T22:36:30.847

你提出了错误的二分法。现实情况是，您可能*永远不会*使用**Backbone 的**路由器代替服务器端解决方案。[也就是说，使用客户端路由器（不是特别是 Backbone 的）来创建单页应用程序（例如Ember.js](http://emberjs.com/)）肯定是一种增长趋势。以下是您的选择：

## 仅服务器端路由

这是经典的方法，是 Rails 等框架的重要组成部分。这是一种成熟的策略，可以在模型、视图和控制器之间划清界限。它肯定不会很快消失，并且有充分的理由：如果您不开发单页应用程序，那就太好了，大多数人都没有。

## 仅客户端路由

这就是像 Ember 这样的东西为您提供的。您可以在客户端编写所有路由，然后客户端负责更新状态、丢弃旧对象等。这需要模型、视图和控制器的健壮 JavaScript 实现才能正常工作。否则你很快就会得到一堆烂意大利面。如果您要这样做，*请不要使用 Backbone*。Backbone 的路由器最适用于状态等简单的事情。根本没有干净的方法可以使用 vanilla Backbone 来替换服务器端路由器。

## 混合方法

混合方法是 Backbone 路由器大放异彩的地方。您使用服务器端路由来提供视图/模板，然后使用 Backbone 的路由增强它们。这里有几个例子：

1.  具有内联编辑器的用户配置文件页面。路由可能是：`/users/me#mode=edit`，其中`/users/me`是服务器提供的典型路由，并且`#mode=edit`是将视图更改为“编辑”模式的主干路由，用户可以在其中编辑其个人资料信息。
2.  突出显示日期的日历。路线可能是：`/calendars/work#date=today`. 这是一个服务器端路由*无法*做到的示例：突出显示日历的特定单元格（即`today`）。

除非您准备编写单页应用程序，否则可以肯定地说，您不会从使用客户端路由器中获得太多好处。即使您*正在*编写单页纸，您也可能不应该指望 Backbone 来完成它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T13:53:10.617

好处

*   快，通常你只需要加载页面的一部分
*   令人难忘，历史被保留一页，你可以控制什么进入历史，什么不是
*   有条理，当您构建客户端应用程序时，最好在客户端拥有所有必要的逻辑，包括调度程序（路由器）等重要组件
*   很容易做到，实现几乎与服务器端相同，您指定路由和处理程序，然后在锚点 href attr 中链接。

例外情况

*   当您想要提交包含文件的表单时，只使用操作 url 来处理多部分数据会更容易

只是我的 2 美分

编辑：在令人难忘的行中删除了“作为服务器端”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:41:13.803

这完全是一个偏好问题。它基本上是询问何时执行 AJAX 请求而不是完整请求的另一个版本。您可以将 Backbone 完全用于单页应用程序的路由，然后让后端通过 API 代表模型的纯表示。如果追求 HTML5 -> 移动类型的解决方案，这将特别有用。我建议您根据您和您的同事的技能组合开始采用更温和的方法。

最好的第一步通常是确保使用诸如骨干路由器之类的东西来表示与主要应用程序目的一致的可寻址前端状态更改。如果前端正在执行诸如显示从 AJAX 请求创建的详细视图之类的操作，那么与其通过附加到某个 UI 元素的事件处理程序来实现它，您应该使用 UI 的哈希段和前端路由来实现它元素链接到。因此，例如 UI 元素将只是一个链接到类似的东西`/#/item/45`，然后路由器会选择它并运行附加到模式的处理程序，例如`/#/item/{itemId}`. 这更好地代表了状态，并为利用浏览器历史记录和创建以干净方式使用现有前端代码的链接打开了大门。

从这里开始后，您可以根据需要越来越多地实现路由器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T15:52:59.020

为什么我会使用它：

*   更简洁的 UI 应用程序代码。集中处理问题的方法。**这对于复杂的 UI 应用程序**起着重要作用。

*接下来的两项与客户端路由有些相关（虽然不是直接相关）：*

*   Ajax 请求不需要取回整个页面（尽管仍然可以）。
*   Ajax 请求可以使用紧凑的数据格式（例如 JSON），这使得请求处理更快。

* * *

为什么我**不会**使用它：

*   **SEO变得有点难以完成。**客户端路由主要映射到客户端功能，而不是 URL。这意味着，搜索引擎将看到不会指向*不同内容*页面的链接。这显然是不希望的。在某种程度上，您可以尝试使用站点地图来克服它。
*   作为对上述问题的另一个克服，网站开发人员有时必须在客户端和服务器端支持相同的 URL 结构（路由）。这是*为了达到同样的目的而付出更多的努力*。在我看来，这是一个错误，因为这些网站一开始被认为是公开的，但被设计为私有的。在大多数情况下，此类应用程序的设计可能只考虑 Ajax，而不考虑客户端路由。

* * *

**结论：**

话虽如此，在我看来，客户端路由对于不需要爬网的富 UI 应用程序最有意义（主要是因为它们受密码保护）。

例如电子邮件、聊天、企业应用程序、游戏、其他自定义应用程序。

另一方面，您可能已经注意到，旨在被抓取的网站不使用客户端路由。

例如博客、公共网站、维基页面等。

值得一提的是，您可以在同一个应用程序中混合使用这两种方法，只要它具有属于上述不同类别的不同部分即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T00:00:15.330

对于单页应用程序，浏览器不会在每次用户进行操作时重绘整个页面，而是由 Javascript 生成内容并注入到页面中。客户端路由在地址栏中维护状态，以便用户可以直接返回到该状态，这使得这些状态可收藏、可共享等。

您仍然需要进行服务器端路由。从骨干文档：

> 例如，如果您有 /documents/100 的路由，如果浏览器直接访问该 URL，则您的 Web 服务器必须能够提供该页面。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T10:19:53.527

您将进行服务器*和*客户端路由。

从客户端到服务器的请求仍然需要在服务器上路由。从您的服务器的角度来看，路由仍然是为 Ajax 请求完成的。

客户端路由器用于路由`#links`到您的主干应用程序。因此，当有人单击`#`链接时，您的路由器将拾取它并采取行动 - 很可能会触发适当的事件。

路由器非常不同，现在我想不出在任何情况下你会使用一个而不是另一个。

# c# - 如何实现 git id 或构建到 c# 应用程序

> ID：14768941
> 
> 赞同：3
> 
> 时间：2013-02-08T08:59:46.117
> 
> 标签：c#, git

我想在使用 git 的应用程序的对话框中实现构建 ID。我知道从 git 获取构建 ID 的 unix 命令，但我不知道如何在构建过程中获取它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T09:55:38.950

可能最简单的方法是使用预构建事件。解决方案是调用`git`命令，将输出转储到文本文件，将该文件作为资源包含在 C# 代码中并加载资源。

`prebuild.cmd`将以下内容添加到您的项目目录中：

```
cd %1
git log -n 1 --format=format:"%%h" HEAD > %2 
```

转到您的项目属性，选项卡`Build Events`并输入以下命令作为预构建事件命令行：

```
"$(ProjectDir)prebuild.cmd" "$(ProjectDir)" "$(ProjectDir)revision.txt" 
```

在您的项目目录中创建一个空`revision.txt`文件（或运行一次构建）。将其添加到您的项目并`Embedded Resource`为其设置构建操作。将此文件添加到其中也很有意义，`.gitignore`因为它是自动生成的。

在您的 C# 项目中添加一个新的实用程序类：

```
public static class GitRevisionProvider
{
    public static string GetHash()
    {
        using(var stream = Assembly.GetExecutingAssembly()
                                    .GetManifestResourceStream(
                                    "DEFAULT_NAMESPACE" + "." + "revision.txt"))
        using(var reader = new StreamReader(stream))
        {
            return reader.ReadLine();
        }
    }
} 
```

不要忘记替换`DEFAULT_NAMESPACE`为您项目的默认命名空间（它被添加到资源名称之前，并且没有通用的方法来获取它，您必须对其进行硬编码）。

此解决方案假定路径`git`存在于`%PATH%`环境变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:53:01.913

如果您使用的是 Nant，则必须执行一组任务才能获取 git id

在此之后，您可以执行正则表达式并获取 ID 并将其设置为属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T11:42:22.187

根据[max 的回答](https://stackoverflow.com/a/14769886/279610)，这里有一个替代解决方案，它不创建资源，而是直接从`prebuild.cmd`.

使用以下内容添加`prebuild.cmd`到您的项目目录：

```
@echo off
cd %1
for /F "delims=" %%i in ('git describe --always --dirty --tags') do set git_revision=%%i
echo public static class Git> %2
echo {>> %2
echo     public static string GetRevision()>> %2
echo     {>> %2
echo         return "%git_revision%";>> %2
echo     }>> %2
echo }>> %2 
```

转到您的项目属性，选项卡`Build Events`并输入以下命令作为预构建事件命令行：

```
"$(ProjectDir)prebuild.cmd" "$(ProjectDir)" "$(ProjectDir)Git.cs" 
```

在您的项目目录中创建一个空`Git.cs`文件（或运行一次构建）并将（现有项目...）添加到您的项目中。还要添加`Git.cs`到，`.gitignore`因为它是自动生成的。

# c# - 如何在 Windows Phone 8 上使用 c# 添加 CycleTile 磁贴？

> ID：14768946
> 
> 赞同：0
> 
> 时间：2013-02-08T09:00:07.387
> 
> 标签：c#, windows-phone-8

我有以下代码用于在 Windows Phone 8 上添加磁贴，但我无法显示磁贴。

```
CycleTileData cycletile = new CycleTileData();
cycletile.Title = "Test";
cycletile.SmallBackgroundImage = new Uri(root.data[0].user.profile_picture,UriKind.RelativeOrAbsolute); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:23:50.603

[您需要使用ShellTile.Create()](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207966%28v=vs.105%29.aspx)将磁贴添加到开始屏幕。设置 CycleImages 属性也无妨。

```
List<Uri> list = [your image list];
Uri smallImage = [your image];

CycleTileData tileData = new CycleTileData() 
{ 
    Title = group.Title, 
    SmallBackgroundImage = smallImage
    CycleImages = list 
 }; 

 ShellTile.Create(new Uri(NavSource, UriKind.Relative), tileData, true); 
```

[Microsoft Dev Center](http://code.msdn.microsoft.com/wpapps/Windows-Phone-8-JumpStart-2b8a0d79/sourcecode?fileId=73381&pathId=719636597)或[Windows Phone Geek](http://windowsphonegeek.com/articles/live-tiles-in-windows-phone-8-part-1-tile-templates)上有很多示例

# php - 如何使用简单的 html DOM 抓取这两个表？

> ID：14768947
> 
> 赞同：0
> 
> 时间：2013-02-08T09:00:08.810
> 
> 标签：php, html, dom, scrape

我一直在试图弄清楚如何使用 php 简单的 html DOM 来刮取`td class="job"`其各自的薪水。我可以通过 id 或 class 找到和刮掉 div 没问题，但我不知道如何攻击这样的表。任何帮助，将不胜感激！

```
<table cellpadding="0" cellspacing="0" border="0" class="table01">
<tr>
    <td class="head">Test</td>
    <td class="job">
    <a href="/Illustrator" id="UniqueID1">Illustrator</a><br/>
    $23,729 - $95,429
    </td>
</tr>
<tr>
    <td class="head">Test</td>
    <td class="job">
    <a href="/Small_Business_Owner_%2f_Operator" id="UniqueID2">Small Business Owner / Operator</a><br/>
    $24,369 - $174,991
    </td>
</tr>
<tr>
    <td class="head">Test</td>
    <td class="job">
    <a href="/Waiter%2fWaitress" id="UniqueID3">Waiter/Waitress</a><br/>
    $7,483 - $34,188
    </td>
</tr>
</table>

<table cellpadding="0" cellspacing="0" border="0" class="table02">
<tr>
    <td class="head">Test</td>
    <td class="job" style="padding-right: 20px">
    <a href="/Graphic_Artist_%2f_Designer" id="UniqueID1">Graphic Artist / Designer</a><br/>
    $23,789 - $55,409
    </td>
</tr>
<tr>
    <td class="head">Test</td>
    <td class="job" style="padding-right: 20px">
    <a href="/Illustrator" id="UniqueID2">Illustrator</a><br/>
    $23,729 - $95,429
    </td>
</tr>    
<tr>
    <td class="head">Test</td>
    <td class="job" style="padding-right: 20px">
    <a href="/Art_Director" id="UniqueID3">Art Director</a><br/>
    $34,160 - $85,943
    </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:07:05.480

```
 $dom = new DOMDocument();
    $html = "your html data";
    // load html
    $dom->loadHTML($html);
    $xpath = new DOMXPath($dom);

    //this will gives you all td with class name is jobs.
    $my_xpath_query = "//table//td[contains(@class, 'job')]";
    $result_rows = $xpath->query($my_xpath_query);

    //iterate all td
    foreach ($result_rows as $result_object){
        echo $result_object->nodeValue;
    } 
```

# javascript - JSF 从 JavaScript 调用托管 bean 方法

> ID：14768950
> 
> 赞同：0
> 
> 时间：2013-02-08T09:00:13.543
> 
> 标签：javascript, jsf-2

有没有办法从 JavaScript 调用托管 bean 方法？

我在数据表中有一个链接，该链接应该转到相应投标的文档存储库。请检查屏幕截图。但是面板内的数据表位于布局内，因此链接不会将页面转移到所需的路径。所以我试图从链接中调用 JavaScript，然后从托管 bean 中调用一个方法，该方法将返回到所需的页面。我试图隐藏一个按钮并使其在单击链接时提交。但它不起作用。

![在此处输入图像描述](../Images/6e766e0a0f15076524b7bd5a604206c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:31:41.030

要导航到要求页面，您需要在 f:param 中传递所需的信息（例如，在您的情况下传递唯一的 id 或编号，或者可能是投标编号）并在其上调用 ManagedBean 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:27:47.480

好的，我终于明白了。

在命令链接中，如果我使用动作它不会转移。但我将其更改为 actionListener 并且它有效。

```
 <p:commandLink id="submitButton" actionListener="#{docManagedBean.viewDocs(action)}" 
                                                     value="View Docs">

                                     </p:commandLink> 
```

和我的托管 Bean 方法

```
 public void viewDocs(ActionEvent action) throws IOException{
 FacesContext ctx = FacesContext.getCurrentInstance();
FacesContext.getCurrentInstance().getExternalContext().redirect("/Proj-war/faces" +      "/DocumentRepositary/documentsView" + ".xhtml");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:53:39.960

`<h:link>`如果您只想在点击时执行导航，为什么不使用 simple呢？并且您可以设置`<f:param>`通知链接中的投标 ID 或其他唯一值。由于您的招标搜索结果位于 内`<ui:repeat>`，我想，只需添加简单的链接即可导航到招标文档。我的观点是，从动作侦听器方法进行重定向实际上是设计中的一个大问题。如果您想在页面上或在查看目标页面之前执行某些操作，则可以使用命令按钮。

简单示例：search.xhtml 的一部分：

```
<ui:repeat var="tender" value="#{tenderBean.tenders}">
    <!-- UI part of table -->
    <h:link value="View tender docs"utcome="path/to/tender/docs/viewDocs.xhtml">
        <f:param name="tenderId" value="#{tender.id}" />
    </h:link>
</ui:repeat> 
```

简单示例继续：viewDocs.xhtml 的一部分：

```
<f:metadata>
    <f:viewParam name="tenderId" value="#{tenderDocsBean.tenderId}" required="true" />
    <f:event type="preRenderView" listener="#{tenderDocsBean.loadTenderDocs}" />
</f:metadata> 
```

看看这个关于使用的[答案](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)`<f:viewParam>`。

# c++ - 具有包扩展的可变参数函数模板不在最后一个参数中

> ID：14768951
> 
> 赞同：20
> 
> 时间：2013-02-08T09:00:15.623
> 
> 标签：c++, templates, c++11, variadic-templates, function-templates

我想知道为什么以下代码无法编译：

```
struct S
{
    template <typename... T>
    S(T..., int);
};

S c{0, 0}; 
```

此代码无法使用 clang 和 GCC 4.8 编译。这是clang的错误：

```
test.cpp:7:3: error: no matching constructor for initialization of 'S'
S c{0, 0};
  ^~~~~~~
test.cpp:4:5: note: candidate constructor not viable: requires 1 argument, but 2 were provided
    S(T..., int);
    ^ 
```

在我看来，这应该可行，并且 T 应该被推断为长度为 1 的包。

如果标准禁止这样做，有谁知道为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T12:22:31.437

因为当一个函数形参包不是最后一个形参时，不能从中推导出模板形参包，模板实参推导会忽略它。

因此，将这两个参数`0, 0`与 进行比较`, int`，产生不匹配。

像这样的推导规则需要涵盖许多特殊情况（例如当两个参数包彼此相邻出现时会发生什么）。由于参数包是 C++11 中的一项新功能，因此相应提案的作者保守地起草了规则。

请注意，如果没有以其他方式推导，尾随模板参数包将为空。所以当你用一个参数调用构造函数时，事情就会起作用（注意这里模板参数包和函数参数包的区别。前者是尾随，后者不是）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T21:40:41.260

因此，应该有一个解决方法。这些方面的东西：

```
namespace v1 {
  // Extract the last type in a parameter pack.
  // 0, the empty pack has no last type (only called if 1 and 2+ don't match)
  template<typename... Ts>
  struct last_type {};

  // 2+ in pack, recurse:
  template<typename T0, typename T1, typename... Ts>
  struct last_type<T0, T1, Ts...>:last_type<T1, Ts...>{};

  // Length 1, last type is only type:
  template<typename T0>
  struct last_type<T0> {
    typedef T0 type;
  };
}
namespace v2 {
  template<class T> struct tag_t{using type=T;};
  template<class T> using type_t = typename T::type;
  template<class...Ts>
  using last = type_t< std::tuple_element_t< sizeof...(Ts)-1, std::tuple<tag_t<Ts>...> > >;
  template<class...Ts>
  struct last_type {
    using type=last<Ts...>;
  };
}
template<class...Ts>
using last_type=v2::late_type<Ts...>; // or v1   

struct S
{
    // We accept any number of arguments
    // So long as the type of the last argument is an int
    // probably needs some std::decay to work right (ie, to implicitly work out that
    // the last argument is an int, and not a const int& or whatever)
    template <typename... T, typename=typename std::enable_if<std::is_same<int, typename last_type<T...>::type>>::type>
    S(T...);

}; 
```

我们检查参数包的最后一个类型是一个`int`，或者我们只传递了一个`int`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-19T01:52:08.450

我实际上对同一件事有点兴趣（想根据最终参数专门化模板化参数包）。

`std::make_tuple`我相信通过组合元组反转（ ，C++ 14 的后向端口`std::apply`等）可能会有一条前进的道路：

*   [如何反转可变参数模板函数的参数顺序？](https://stackoverflow.com/questions/15904288/how-to-reverse-the-order-of-arguments-of-a-variadic-template-function/15908420#15908420)

如果成功的话会回到这里。

相关文章：

*   [函数中参数包后的参数](https://stackoverflow.com/questions/42026891/parameters-after-parameter-pack-in-function?noredirect=1&lq=1)
*   [参数包后具有非推导类型的参数](https://stackoverflow.com/questions/41262641/parameter-with-non-deduced-type-after-parameter-pack)

**编辑**：是的，过了一会儿想通了；不完美，因为有额外的副本飞来飞去，但这是一个开始。

如果您知道比我在下面列出的更简单的方法，请不要犹豫发布！

## TL;博士

可以做这样的事情：

```
auto my_func_callable = [] (auto&& ... args) {
    return my_func(std::forward<decltype(args)>(args)...);
};
auto my_func_reversed =
    stdcustom::make_callable_reversed(my_func_callable); 
```

然后实现这个伪代码：

```
template<typename ... Args>
void my_func(Args&& ... args, const my_special_types& x); 
```

通过执行以下操作：

```
template<typename... Args>
void my_func(Args&& ... args)
    -> call my_func_reversed(args...)
template<typename... RevArgs>
void my_func_reversed(const my_special_types& x, RevArgs&&... revargs)
    -> do separate things with revargs and my_special_types
    -> sub_func_reversed(revargs...) 
```

使用上述实用程序。

有一些（很多）缺点。将在下面列出。

## 范围

这是为 C++14（可能是 C++11）的用户准备的，他们想从未来（C++17）中借鉴。

## 第 1 步：反转论点

有几种不同的方法可以做到这一点。我在这个例子中列出了一些替代方案：

*   [tuple.cc](https://github.com/EricCousineau-TRI/repro/blob/fa514e1/cpp_quick/tuple.cc) - 两种选择的游乐场（源代码中的学分）：
    1.  使用可折叠表达式并操作通过`std::apply_impl`(credit: Orient) 传递的索引。
    2.  使用递归模板构造一个反向的`index_sequence`（来源：Xeo）
*   [tuple.output.txt](https://github.com/EricCousineau-TRI/repro/blob/fa514e1/cpp_quick/tuple.output.txt) - 示例输出

    *   这将打印出`reversed_index_sequence`Xeo 示例中的模板。我需要这个来调试。

        ```
        >>> name_trait<std::make_index_sequence<5>>::name()
        std::index_sequence<0, 1, 2, 3, 4>
        >>> name_trait<make_reversed_index_sequence<5>>::name()
        std::index_sequence<4, 3, 2, 1, 0> 
        ```

我选择了备选方案 1，因为它更容易消化。然后，我尝试快速将其正式化：

*   [tuple_future.h](https://github.com/EricCousineau-TRI/repro/blob/fa514e1/cpp_quick/tuple_future.h) - 借用未来（`namespace stdfuture`），并进行扩展（`namespace stdcustom`）
*   [tuple_future_main.cc](https://github.com/EricCousineau-TRI/repro/blob/fa514e1/cpp_quick/tuple_future_main.cc) - 使用上面的简单、高级和有用的（见下文）示例
*   [tuple_future_main.output.txt](https://github.com/EricCousineau-TRI/repro/blob/fa514e1/cpp_quick/tuple_future_main.output.txt) - 示例输出

`std::apply`定义片段（改编自cppreference.com 上的 C++17 可能实现）：

```
namespace detail {
template <class F, class Tuple, std::size_t... I>
constexpr decltype(auto) apply_reversed_impl(F &&f,
    Tuple &&t, std::index_sequence<I...>) 
{
    // @ref https://stackoverflow.com/a/31044718/7829525
    // Credit: Orient
    constexpr std::size_t back_index = sizeof...(I) - 1;
    return f(std::get<back_index - I>(std::forward<Tuple>(t))...);
}
} // namespace detail
template <class F, class Tuple>
constexpr decltype(auto) apply_reversed(F &&f, Tuple &&t) 
{
    // Pass sequence by value to permit template inference
    // to parse indices as parameter pack
    return detail::apply_reversed_impl(
        std::forward<F>(f), std::forward<Tuple>(t),
        std::make_index_sequence<
            std::tuple_size<std::decay_t<Tuple>>::value>{});
} 
```

用法片段：（来自`tuple_future_main.output.txt`，从上面复制）

```
auto my_func_callable = [] (auto&& ... args) {
    return my_func(std::forward<decltype(args)>(args)...);
};
auto my_func_reversed =
    stdcustom::make_callable_reversed(my_func_callable); 
```

## 第 2 步：扣上你的鞋子（使用反向参数包）

首先，为您希望使用的最终参数建立模式。您必须明确列举这些，因为您只能有一个参数包。

（取自[tuple_future_main.cc](https://github.com/EricCousineau-TRI/repro/blob/fa514e1/cpp_quick/tuple_future_main.cc#L58)）：

示例场景：

我们喜欢将东西添加到具有名称的容器中，形式如下：

```
add_item(const Item& item, const string& name, Container& c) 
```

我们还可以构造一个具有 [非常大] 数量的重载的 Item，并且我们有方便的重载：

```
add_item(${ITEM_CTOR_ARGS}, const string& name, Container& c) 
```

为此，我们可以声明以下内容：

```
void add_item_direct(const Item& item, const string& name, Container& c)
Item create_item(Args&&... args) 
```

然后定义我们的通用接口：

```
template<typename... Args>
void add_item(Args&&... args) {
    ...
    auto reversed = stdcustom::make_callable_reversed(callable);
    reversed(std::forward<Args>(args)...);
}
template<typename ... RevArgs>
void add_item_reversed(Container& c, const string& name, RevArgs&&... revargs)
{
    ...
    static auto ctor = VARIADIC_CALLABLE(create_item,);
    ...
    auto item = ctor_reversed(std::forward<RevArgs>(revargs)...);
    add_item_direct(item, name, c);
} 
```

现在我们可以做类似的事情：（取自`tuple_future_main.output.txt`）

```
>>> (add_item(Item("attribute", 12), "bob", c));
>>> (add_item("attribute", 12, "bob", c));
>>> (add_item(Item(2, 2.5, "twelve"), "george", c));
>>> (add_item(2, 2.5, "twelve", "george", c));
>>> (add_item(Item(2, 15.), "again", c));
>>> (add_item(2, 15., "again", c));
>>> c
bob - ctor3: ctor3: ctor1: attribute (12, 10)
bob - ctor3: ctor1: attribute (12, 10)
george - ctor3: ctor3: ctor2: 2, 2.5 (twelve)
george - ctor3: ctor2: 2, 2.5 (twelve)
again - ctor3: ctor3: ctor2: 2, 15 ()
again - ctor3: ctor2: 2, 15 () 
```

请注意额外的复制构造函数... :(

## 缺点

*   丑得要命
*   可能没用
    *   重构你的接口可能更容易
        *   但是，这可以用作过渡到更通用接口的权宜之计。
        *   可能要删除的行更少。
    *   特别是如果它用模板爆炸来插入你的开发过程
*   无法确定额外副本的来源。
    *   这可能是由于对可变参数 lambda 的明智使用
*   你必须精心设计你的基本功能
    *   您不应该尝试扩展现有功能。
    *   参数包会贪婪地匹配函数
    *   您要么需要明确说明您想要的每个重载，要么屈服并让可变参数包调度到您想要的功能
        *   如果您找到解决此问题的优雅方法，请告诉我。
*   模板错误很糟糕。
    *   诚然，不算太坑爹。但是很难推断您错过了可用的过载。
*   在 lambdas 中包装了许多简单的功能
    *   您可能能够使用`make_reversed_index_sequence`并直接分派给该功能（在其他 SO 帖子中提到）。但这重复起来很痛苦。

## 去做

*   摆脱多余的副本
*   最小化对所有 lambdas 的需求
    *   如果您有`Callable`
*   尝试对抗参数包贪婪

    *   是否存在与左值和右值引用匹配的通用`std::enable_if`匹配，并且可能处理转发兼容的隐式复制构造函数？

        ```
        template<typename ... Args>
        void my_func(Args&& ... args) // Greedy
        void my_func(magical_ref_match<string>::type, ...)
            // If this could somehow automatically snatch `const T&` and `T&&` from the parameter pack...
            // And if it can be used flexible with multiple arguments, combinatorically 
        ```

## 希望

*   也许 C++17 将支持非最终参数包参数，这样所有这些都可以被丢弃......*手指交叉*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T09:09:45.663

从标准 N3376 § 14.1 的工作草案中可以阅读有关此内容的部分。

以下是第 14.1.11 节

> 如果类模板或别名模板的模板参数具有默认模板参数，则每个后续模板参数应提供默认模板参数或模板参数包。如果主类模板或别名模板的模板参数是模板参数包，它应该是最后一个模板参数。函数模板的模板形参包后面不应有另一个模板形参，除非该模板形参可以从函数模板的形参类型列表中推导出来或具有默认实参。

# excel - 如何在Excel中增加列中的所有行？

> ID：14768955
> 
> 赞同：0
> 
> 时间：2013-02-08T09:00:41.377
> 
> 标签：excel, csv, increment

如何将 A 列中的所有行增加 4？例如，我想将 A5 到 A250 中的当前值增加 5。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T09:18:25.733

1.  添加`4`到任何空白单元格
2.  复制此单元格
3.  选择要增加的范围
4.  *选择性粘贴*->*添加*-> 确定

完毕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:04:02.987

在 B1 列中输入以下公式：

```
= A1 + 5; 
```

然后按回车，然后转到B1单元格，ctrl + c，阻止B2直到B250单元格，粘贴。

# java - 如何获取执行操作的 Alfresco 规则类型？

> ID：14768956
> 
> 赞同：0
> 
> 时间：2013-02-08T09:00:41.287
> 
> 标签：java, alfresco

[我在How to get Alfresco Action status](https://stackoverflow.com/questions/10687676/how-to-get-alfresco-action-status)中找到了这个问题的答案。

我有一个单操作执行器类，它为入站和出站和更新规则类型触发。Tahir Malik 告诉我们可以为动作添加一个额外的参数（#2），我该怎么做？我没有找到如何在运行时获取动作执行器的规则类型。

为我通过引导程序添加的 PS 规则和操作。

问候，尤金

=====================================

**更新：**

```
<rule:rule view:childName="rule:sampleRule">
...
<view:properties>
  <rule:ruleType>
    <view:values>
      <view:value>inbound</view:value>
      <view:value>update</view:value>
      <view:value>outbound</view:value>
    </view:values>
  </rule:ruleType>
  ...
</view:properties>
<view:associations>
  <rule:action>
    <act:compositeaction view:childName="rule:action">
      ...
      <view:associations>
        <act:actions>
          <act:action view:childName="act:actions">
            <view:properties>
              ... 
              <act:definitionName>myActionBean</act:definitionName>
              <act:executionActionStatus>New</act:executionActionStatus>
            </view:properties>
            ...
          </act:action>
        </act:actions>
        <act:conditions>
          ... // There is condition to check mime type of a node
        </act:conditions>
      </view:associations>
    </act:compositeaction>
  </rule:action>
</view:associations> 
```

============================================

**更新2：**

```
<view:reference view:pathref="rule:ruleFolder">
  <view:associations>
    <cm:contains>
      <rule:rule view:childName="rule:inboundRule">
        ...
        <view:properties>
          <rule:ruleType>
            <view:values>
              <view:value>inbound</view:value>
            </view:values>
          </rule:ruleType>
          ...
        </view:properties>
        <view:associations>
          <rule:action>
            <act:compositeaction view:childName="rule:action">
              ...
              <view:properties>
                ...
                <act:definitionName>myActionBean</act:definitionName>
                <act:executionActionStatus>Completed</act:executionActionStatus>
              </view:properties>
              <view:associations>
                <act:actions>
                  <act:action view:childName="act:actions">
                    <view:properties>
                      ...
                    </view:properties>
                    <view:associations>
                      <act:parameters>
                        <act:actionparameter view:childName="act:parameters">
                          <view:properties>
                            <act:parameterName>ruleType</act:parameterName>
                            <act:parameterValue>
                              <view:value view:datatype="d:text">inbound</view:value>
                            </act:parameterValue>
                          </view:properties>
                        </act:actionparameter>
                      </act:parameters>
                    </view:associations>
                  </act:action>
                </act:actions>
                <act:conditions>
                  <act:compositeactioncondition view:childName="act:conditions">
                    <view:properties>
                      <act:definitionName>composite-condition</act:definitionName>
                      <act:or>
                        <view:value view:datatype="d:boolean">true</view:value>
                      </act:or>
                      <act:invert>false</act:invert>
                    </view:properties>
                    <view:associations>
                      <act:compositeconditions>
                        <act:actioncondition view:childName="act:compositeconditions">
                          <view:properties>
                            <act:definitionName>compare-mime-type</act:definitionName>
                            <act:invert>false</act:invert>
                          </view:properties>
                          <view:associations>
                            <act:parameters>
                              <act:actionparameter view:childName="act:parameters">
                                <view:properties>
                                  <act:parameterName>value</act:parameterName>
                                  <act:parameterValue>
                                    <view:value view:datatype="cmis:id">my-first-mimeType</view:value>
                                  </act:parameterValue>
                                </view:properties>
                              </act:actionparameter>
                            </act:parameters>
                          </view:associations>
                        </act:actioncondition>
                        <act:actioncondition view:childName="act:compositeconditions">
                          <view:properties>
                            <act:definitionName>compare-mime-type</act:definitionName>
                            <act:invert>false</act:invert>
                          </view:properties>
                          <view:associations>
                            <act:parameters>
                              <act:actionparameter view:childName="act:parameters">
                                <view:properties>
                                  <act:parameterName>value</act:parameterName>
                                  <act:parameterValue>
                                    <view:value view:datatype="cmis:id">my-second-mimeType</view:value>
                                  </act:parameterValue>
                                </view:properties>
                              </act:actionparameter>
                            </act:parameters>
                          </view:associations>
                        </act:actioncondition>
                      </act:compositeconditions>
                      <act:parameters>
                        <act:actionparameter view:childName="act:parameters">
                          <view:properties>
                            <act:parameterName>orconditions</act:parameterName>
                            <act:parameterValue>
                              <view:value view:datatype="d:boolean">true</view:value>
                            </act:parameterValue>
                          </view:properties>
                        </act:actionparameter>
                      </act:parameters>
                    </view:associations>
                  </act:compositeactioncondition>
                </act:conditions>
              </view:associations>
            </act:compositeaction>
          </rule:action>
        </view:associations>
      </rule:rule>
      ...
    </cm:contains>
  </view:associations>
</view:reference> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:45:07.340

我可能理解你的困惑。您需要做的是首先更改您的自定义 Java Action。

添加这样一行：

```
protected void executeImpl(Action action, NodeRef actionedUponNodeRef) {

String status= (String) action.getParameterValue("status"); 
```

然后你需要编写一个 JavaScript 文件来[触发动作](http://wiki.alfresco.com/wiki/4.0_JavaScript_API#ScriptAction_API)，例如：

```
var custom = actions.create("myActionBean");    
custom.parameters.status = "My New Status";
custom.execute(document); 
```

最后，您需要配置一个触发此 JavaScript 的规则。

您可能还可以通过引导程序设置参数，但问题是您通过引导程序获得的控制较少。使用 JavaScript，您可以在运行时修改它（新版本）。

如果要在引导程序上发送参数，请查看此引导程序文件：

> /alfresco/bootstrap/transferTargetRule.xml

# meteor - Meteor 更新集合时如何防止内容滚动

> ID：14768957
> 
> 赞同：3
> 
> 时间：2013-02-08T09:00:46.507
> 
> 标签：meteor

[我的问题与这个](https://stackoverflow.com/questions/10681918/how-do-i-prevent-window-focus-change-when-meteor-reactive-template-update-from-d)和[那个](https://stackoverflow.com/questions/13421090/re-rendering-list-template-causes-page-to-scroll-to-top?rq=1)非常相似， 但不完全相同。

我的 Meteor 应用程序中有以下模板：

```
<template name="items">
    <div class="mainframe">
    <h3>Available items:</h3>
        <div class="items-table-container">
            <table class="table table-hover">
                <tbody>
                    {{#each all_items}}
                       {{> item}}
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
    <div class="btn-group">
    <button id="create" class="btn">Create new item</button>
    </div>
</template> 
```

模板函数很简单：

```
Template.items.all_items = function () {
    return Items.find({}, {sort: {name: 1}}).fetch();
} 
```

还有一个绑定到`#create`按钮的事件，它将一个新项目插入到 Items 集合中，并且工作正常。

现在最重要的部分是 CSS：

```
.items-table-container {
    height:340px;
    overflow-y: scroll;
} 
```

所以基本上我希望我的表格在固定大小的区域内有可滚动的内容。当我在一个浏览器中向下滚动项目表的内容，然后在另一个浏览器中添加一个新项目时，问题就开始了。第一个浏览器更新项目列表并将内容滚动回顶部位置。

问题是如何防止单个模板的自动更新？我认为在这种特殊情况下，我实际上需要像传统网页更新这样的东西：如果用户没有立即看到新添加的项目，而是在他重新加载页面之后看到，那也没关系。

另一个想法是做某种分页而不是可滚动的内容。我认为这会解决问题，但这会复杂得多，我想避免这种情况。

我认为理想情况下我希望能够告诉 Meteor 我希望 Meteor 更新模板不是在模型更改时而是通过请求来更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:40:51.410

将您的项目列表放在可滚动 div 容器内的另一个模板中：

```
<template name="items">
    <div class="mainframe">
    <h3>Available items:</h3>
        <div class="items-table-container">
            <table class="table table-hover">
                <tbody>
                    {{> myitems}}
                </tbody>
            </table>
        </div>
    </div>
    <div class="btn-group">
        <button id="create" class="btn">Create new item</button>
    </div>
</template>

<template name="myitems">
    {{#each all_items}}
        {{> item}}
    {{/each}}
</template> 
```

Javascript：

```
Template.myitems.all_items = function () {
    return Items.find({}, {sort: {name: 1}}).fetch();
}

//Template.items.all_items = function () {
// remove this helper
//} 
```

这样，您可以保持反应性，而无需提出更新请求。只有可滚动框内的部分被重新渲染，保持可滚动容器滚动到的位置。

编辑：要保留/冻结您的内容，您可以使用[保留](http://docs.meteor.com/#template_preserve)功能，它需要一个 css 选择器作为输入。例如

```
Template.items.preserve(['.items-table-container']); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-21T03:13:20.140

隔离数组迭代。

```
{{#isolate}}
  {{#each all_items}}
    {{> item}}
  {{/each}}
{{/isolate}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T22:24:27.057

要使整个区域保持不变以使其不会重新渲染，您可以使用块助手 {{#constant}}。

如果您要保留特定的 DOM 元素，则可以使用 Template.myTemplate.preserve() ，它将要保留的节点的选择器作为参数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-29T15:55:13.817

您还可以让 jquery 句柄固定滚动位置。我的用例是在主体文档中的当前滚动点上方插入了一些内容，使文本滚动得更低。

还不确定每次更新发布集时如何让流星运行回调，但您应该明白：

```
before = document.body.scrollHeight
// insert your elements
after = document.body.scrollHeight

if $(document).scrollTop() != 0
  # scroll us equal to the amount of scroll height added
  window.scrollTo(0, $(document).scrollTop()+(after-before) ) 
```

# javascript - 正确的 html 中 javascript 的文档位置

> ID：14768961
> 
> 赞同：-3
> 
> 时间：2013-02-08T09:00:52.130
> 
> 标签：javascript, html, format

简单的。您的 javascript 应该放在 html 文档中的哪个位置。在头上？还是在页面底部？什么决定了定位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:01:53.097

你可以把它放在你想要的任何地方。但请记住，当浏览器找到它时，javascript 将立即执行。这可能导致阻塞情况。所以它通常出现在 HTML 的末尾，就在所有元素加载后运行的主体之前。

尽管 jQuery 用著名的方法解决了这个问题：

```
$(document).ready(function(){ ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:03:44.890

好吧，这一切都取决于脚本在做什么。

我个人将 JQuery JqueryUI 和 JQuery Validation 的引用放在 Head 中，然后将所有其他自定义脚本放在正文之后。

这样做的原因是因为我希望我的 Jquery 项目在页面完成加载之前加载。

我的所有自定义代码通常都放在 body 标记之后，因为这些代码可以在页面完成渲染后加载。

# single-sign-on - WSO2 单点注销实现

> ID：14768962
> 
> 赞同：2
> 
> 时间：2013-02-08T09:00:53.003
> 
> 标签：single-sign-on, wso2, logout, saml-2.0

我正在尝试在我的 java webapp 中实现 WSO2 Single Logout 功能。
我无法理解这件事：

我为我的 2 个发行人设置了 SAML 单一注销选项。

然后我为第一个服务提供商 (SP) 调用注销，IdP 使用 SAML 响应将其重定向到某个注销 url，SP 获取此请求并使 http 会话无效。

第二个 SP 也通过 SAML 响应从 IdP 获取请求，但是此请求中的 http 会话是 IdP 和 SP 之间的会话，我需要使 Web 浏览器和 SP 之间的会话无效。我怎样才能得到这个会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:02:59.757

您需要做的是手动跟踪哪个 http 会话与哪个 sessionSAMLIndex 相关联（您在登录时的断言中得到这个）。也许`Map<String, HttpSession>`

LogoutRequest 包含会话索引。当您收到 LogoutRequest 时，您会找到 http 会话并将其无效。

# c# - 将数据存储在内存中并全部插入与一一插入

> ID：14768963
> 
> 赞同：0
> 
> 时间：2013-02-08T09:00:54.187
> 
> 标签：c#, web-services, oracle

我需要从服务中获取数据并将其插入数据库。以下是有关服务的一些信息：我必须从服务中获取 id 并根据该 id 获取数据。该操作每天进行一次。每天必须插入大约 10.000 个 ID 的数据。获取 id 列表所需的时间大约为 20 秒，获取该 id 的数据从 0.5 到 9 秒不等。

我必须选择：

第一个选项是：

1.  从 Web 服务获取所有数据，将所有内容存储在 List<>
2.  对该 List<> 进行一些操作
3.  打开连接一次将所有内容插入数据库，然后关闭连接

    代码示例：

    ```
    //Get datafrom service and store it List<> or some collection
    TestService client = new TestService();
    MyClass changedData;
    List<MyClass> serviceResult = new List<MyClass>();

    string[] changedDataIDs = client.GetChangedIDs();

    foreach (string id in changedDataIDs)
    {
        changedData = client.GetData(id);
        serviceResult.Add(changedData);
    }

    //Make some operttions on that data
    List<Person> persons = serviceResult.Perons......;

    //Insert everything into database at once
    string conString = "..";
    OracleConnection con = new OracleConnection(conString);
    OracleCommand cmd = new OracleCommand("MY_STORED_PROCEDURE", con);
    //Add parameters
    cmd.Parameters.Add(new OracleParameter(....));
    .........

    try
    {
        con.Open();

        foreach (var item in collection)
        {
            //Give values to parameters
            cmd.Parameters[0] = item.value;
            cmd.ExecuteNonQuery();
        }
    }
    finally
    {
        con.Close();
    } 
    ```

第二种选择是：

1.  从服务中单独获取数据
2.  对该数据进行必要的操作
3.  打开连接将数据插入数据库关闭连接并重复步骤

    代码示例：

    ```
    //Get changed IDs from service
    TestService client = new TestService();
    string[] changedDataIDs = client.GetChangedIDs();
    MyClass changedData;
    Person changedPersonDetails;
    OracleCommand cmd = new OracleCommand("MY_STORED_PROCEDURE");
    //Add parameters
    cmd.Parameters.Add(new OracleParameter(....));
    .........

    foreach (string id in changedDataIDs)
    {
        //Get data individually from service
        changedData = client.GetData(id);

        //Make needed operations on that data
        changedPersonDetails = changedData.Person.........;

        //Give values to parameters
        cmd.Parameters[0] = changedPersonDetails.Contact...;

        //Open connection insert data to databse close connection
                    //ExecuteCommand is a method
        ExecuteCommand(cmd);
    }

    public int ExecuteCommand(OracleCommand cmd)
    {
        int affectedRowCount = 0;
        OracleConnection con = new OracleConnection("");
        cmd.Connection = con;

        try
        {
            con.Open();
            affectedRowCount = cmd.ExecuteNonQuery();
        }
        finally
        {
            con.Close();
        }

        return affectedRowCount;
    } 
    ```

我认为第一个选项的坏处是 RAM 消耗，而第二个选项的坏处是多次打开和关闭连接。现在我想现在将在 List<> 中存储大量数据会导致内存异常或 C# 将处理这个？我应该使用哪个选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:08:28.690

两者似乎都不合适恕我直言。当您一一插入时，不使用任何事务。如果一个或多个失败而其他人致力于数据库怎么办？

如果您尝试在一次操作中插入全部，如果一次失败，则所有事务都将失败，那么数据库中将不会有更新（最好创建一个事务，您提供的代码中没有使用该事务）。

您可以选择两全其美；创建更小的块，例如 100 个项目。然后尝试将这些插入事务中。然后插入另外 100 个。如果其中任何一个事务失败，只需尝试再次运行该事务。

关于内存消耗的问题；它仅取决于您使用的实体，没有人可以直接回答。

# spring-mvc - 文件上传在 Firefox 中有效，但在 IE 中使用 spring 显示异常

> ID：14768964
> 
> 赞同：0
> 
> 时间：2013-02-08T09:01:02.700
> 
> 标签：spring-mvc, file-upload, internet-explorer-9, forms, http-post

我在spring mvc中有文件上传它在firefox中工作正常但在`IE9`

```
 com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 1 of 1-byte UTF-8 sequence. 
```

这就是我的形式：

这就是我的控制器：

```
@RequestMapping(value = "/CIMtrek_Regional_WhseFormAddSave", method = RequestMethod.POST)
    public ModelAndView CIMtrek_Regional_Whse(
            @RequestParam("CIMtrek_xmlData") String CIMtrek_xmlData,
            @RequestParam("CIMtrek_formName") String CIMtrek_formName,@RequestParam("fileUPload") MultipartFile uploadFile,HttpServletRequest request) {

        UtilService fileUploadService = new UtilService();
        if(!uploadFile.isEmpty()) {
            fileUploadService.saveFile(uploadFile, request.getRealPath(""));
        }
        ViewContent vc = new ViewContent();
        String HTML = vc.getContent(CIMtrek_xmlData, CIMtrek_formName);
        List<String> ls = new ArrayList<String>();
        ls.add(HTML);
        logger.info("Welcome  CIMtrek_Regional_Whse Add!");
        return new ModelAndView("form", "list", ls);
    } 
```

文件保存方法：

```
public void saveFile(MultipartFile uploadItem, String requestPath) {
        File dir;
        File file;
        try {
            String fileName = null;
            InputStream inputStream = null;
            OutputStream outputStream = null;
            if (uploadItem.getSize() > 0) {
                inputStream = uploadItem.getInputStream();
                fileName = requestPath + "\\resources\\Attachment\\";
                dir = new File(fileName);
                if (!dir.exists()) {
                    dir.mkdirs();
                }
                fileName += uploadItem.getOriginalFilename();
                file = new File(fileName);
                if (!file.exists()) {
                    file.createNewFile();
                }
                outputStream = new FileOutputStream(file);
                int readBytes = 0;
                byte[] buffer = new byte[10000];
                while ((readBytes = inputStream.read(buffer, 0, 10000)) != -1) {
                    outputStream.write(buffer, 0, readBytes);
                }
                outputStream.flush();
                outputStream.close();
                inputStream.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

请帮我解决这个问题。提交表单时，我将文件保存到指定位置。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:31:00.280

许多 Windows 程序在保存为 UTF-8 的任何文档的开头添加字节 0xEF、0xBB、0xBF。这是 Unicode 字节顺序标记 (BOM) 的 UTF-8 编码，通常称为 UTF-8 BOM，尽管它与字节顺序无关。此缺陷的一个示例是 Internet Explorer，它将呈现仅在以文档类型声明开头时才在标准模式下。所以我想你需要检查并跳过可能的 BOM 字节

```
String enc = "ISO-8859-1"; // or NULL to use systemdefault
     FileInputStream fis = new FileInputStream(file);
     UnicodeInputStream uin = new UnicodeInputStream(fis, enc);
     enc = uin.getEncoding(); // check and skip possible BOM bytes
     InputStreamReader in;
     if (enc == null) in = new InputStreamReader(uin);
     else in = new InputStreamReader(uin, enc); 
```

来源：[UnicodeInputStream](http://koti.mbnet.fi/akini/java/unicodereader/UnicodeInputStream.java.txt)

# image - 带有标题的 SVG 图像标签

> ID：14768967
> 
> 赞同：3
> 
> 时间：2013-02-08T09:01:13.090
> 
> 标签：image, svg, tags

有没有机会我可以将标题属性添加到 SVG 中的图像标签，将鼠标悬停在该图像上时我会得到一个工具提示？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:35:11.207

[w3.org:TitleAndDescriptionElements](http://www.w3.org/TR/SVGTiny12/struct.html#TitleAndDescriptionElements)加上[示例](http://www.w3.org/TR/SVGTiny12/examples/title-desc-tooltip.svg)
[SVG 标题（工具提示）](http://www.mecxpert.de/svg/tooltips.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-16T11:16:50.207

您可以在标签`<title>Tooltip text</title>`内使用`<image>`标签。

# php - 使用 ftp_get 自动停止从服务器下载图像

> ID：14768972
> 
> 赞同：0
> 
> 时间：2013-02-08T09:01:41.860
> 
> 标签：php

```
<?php
    //user name and password
    $ftp_server="";
    $ftp_user_name="";
    $ftp_user_pass="";

    // define some variables
    $local_file = 'localphoto/';
    $server_file `enter code here`= 'serverPhoto/';

// set up basic connection
$conn_id = ftp_connect($ftp_server);
if($conn_id)
{
    echo "connected";
}
{
 die("Couldn't connect to $ftp_server");
}

ftp_set_option($conn_id, FTP_TIMEOUT_SEC, 18000);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

$contents = ftp_nlist($conn_id, $server_file); 
    foreach ($contents as $file) { 

           $cont = explode('/',$file);
           $ret = ftp_get($conn_id, $local_file.$cont[4], $file,  FTP_BINARY);              
}       

// close the connection
ftp_close($conn_id); 
```

?>

我总共有 500 张图片，但它最多只能下载 200 张然后停止下载。在浏览器中，脚本一直在运行，但图像尚未下载。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:06:52.653

你必须添加**set_time_limit(0);** 为了保持活动状态直到运行 php 脚本，我建议为浏览器回显某些内容以了解 php 不挂断并保持活动状态

```
 <?php
   set_time_limit(0);
   //user name and password
   $ftp_server="";
   $ftp_user_name="";
   $ftp_user_pass="";

   // define some variables
   $local_file = 'localphoto/';
   $server_file `enter code here`= 'serverPhoto/';

  // set up basic connection
  $conn_id = ftp_connect($ftp_server);
  if($conn_id)
  {
     echo "connected";
  }else
  {
   die("Couldn't connect to $ftp_server");
  }

  ftp_set_option($conn_id, FTP_TIMEOUT_SEC, 18000);

  // login with username and password
  $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

  $contents = ftp_nlist($conn_id, $server_file); 
  foreach ($contents as $file) { 

       $cont = explode('/',$file);
       $ret = ftp_get($conn_id, $local_file.$cont[4], $file,  FTP_BINARY);  
       echo $file."<br>";  //echo something for browser to know php not hangup and keeping Alive
       ob_flush();         
  }       

  // close the connection
  ftp_close($conn_id); 
```

# php - 如何从漂亮照片灯箱中删除滚动条？

> ID：14768977
> 
> 赞同：0
> 
> 时间：2013-02-08T09:01:50.007
> 
> 标签：php, jquery, css, plugins, prettyphoto

我已经为灯箱 .ie 使用了一个插件`prittyPhoto`，

除了`ie7`.

将在灯箱上显示滚动条。那么如何在 IE7 浏览器中删除滚动条？/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:14:21.390

试试下面的

```
body{overflow-x: hidden;} 
```

在这种情况下，如果您将其应用于 html 而不是 body

```
html{overflow-x: hidden;} 
```

别的

```
html{
    overflow:auto;
} 
```

如果您想将样式表与其他样式表分开，请尝试放置

```
<!--[if IE 7]>
    Link to alternate style sheet
    OR
    <style> /*CSS in here*/ </style>
<![endif]--> 
```

# svn - 如何使用批处理脚本在某个修订 ID 后获取文本文件中的所有文件夹

> ID：14768980
> 
> 赞同：0
> 
> 时间：2013-02-08T09:02:04.207
> 
> 标签：svn, batch-file, tortoisesvn, visualsvn

我想使用批处理文件在 SVN 中的某个 revID 之后将所有文件夹列表放入文件中。

目前我正在使用命令：

```
svn.exe list <URL> -R>test.txt 
```

使用这个命令，我得到了文本文件中的所有文件夹和文件。您有什么方法可以在某个修订 ID 之后获取唯一的文件夹。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:32:36.810

如果我翻译错误，请以更自由的形式写下您的要求，因为“SVN 中某些 revID 之后的旧列表”对我来说似乎是白噪声。

您想**在修订版 N 的状态下获取存储库树**吗？“修订后...”是指“在从 N+1 到 HEAD 的任何修订状态”

`svn ls -R [-v] -r N URL`，如写在`svn help ls`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:23:22.043

也许您可以使用[svn](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.propset.html) propset 为每个文件夹设置新属性，例如：svn_folder

然后您可以根据以下属性获取所有文件夹：

```
 svn.exe propget svn_folder <URL> -R>test.txt 
```

我不知道是否有其他更好的解决方案。

# qt - QRubberBand 颜色在 Mac 下没有改变

> ID：14768986
> 
> 赞同：1
> 
> 时间：2013-02-08T09:02:25.997
> 
> 标签：qt

此代码在 Windows 下以蓝色绘制 QRubberBand，但在 MacOs 下不起作用。我想知道为什么？

```
QRubberBand *rubberBand = new QRubberBand(QRubberBand::Rectangle, this->imageLabel);
rubberBand->setGeometry(rec);

QPalette palette;
palette.setBrush(QPalette::Highlight, QBrush(Qt::darkBlue));
rubberBand->setPalette(palette); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T10:07:11.710

我已经这样解决了：

```
QRubberBand *rubberBand = new QRubberBand(QRubberBand::Rectangle, this->imageLabel);
rubberBand->setGeometry(rec);

QPalette palette;
QColor color(Qt::blue);
color.setAlpha(80);
palette.setBrush(QPalette::Highlight, QBrush(color));
rubberBand->setPalette(palette); 
```

现在橡皮筋在 MacOS 和 Windows 下是一样的。

# android - 如何在不向 android 中的特定号码显示拨号器活动的情况下拨打电话？

> ID：14768993
> 
> 赞同：1
> 
> 时间：2013-02-08T09:03:16.723
> 
> 标签：android, android-intent

如何在不将用户带到拨号器活动的情况下拨打电话。有什么办法吗？我有一个要求，我必须在没有用户交互的情况下自动实现它。我有以下代码将我带到我必须避免的拨号器。

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:123456789"));
startActivity(callIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:19:36.067

试试这样。

```
Intent callIntent = new Intent(Intent.ACTION_CALL_BUTTON);
callIntent.setData(Uri.parse("tel:123456789"));
startActivity(callIntent); 
```

即使用 ACTION_CALL_BUTTON 的 ACTION_CALL