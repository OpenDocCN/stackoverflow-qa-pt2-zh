# StackOverflow 问答 14525000-14525999

# mysql - MySQL 文件导入

> ID：14525002
> 
> 赞同：1
> 
> 时间：2013-01-25T15:37:21.370
> 
> 标签：mysql

我有以下文本，并希望将数据导入 MySQL 数据库，每个文件都是一条记录。

我尝试了 mysqlimport，但我认为字段名称混淆了导入。有什么方法可以导入忽略字段名称的数据。我假设所有字段都被导入，没有留下任何数据。如果有任何命令行工具，这可以帮助这个或“开源”工具，可以创建一个脚本/程序，将通过计划任务（Windows）运行导入，这会更好。

```
VERS: 355.046
DATE: 2013-01-21
TIME: 15:04:43.242
FILE: C:\Recordings\20130121_150443_242_00_002.WAV
CONN: 8274
STOP: 16595
SIGN: 1601 (0156A70C1300007F)
UNIT: 00
PORT: 002
DIR : 1
CLI : 011*
DDI : 078*
MSGA: 
MSGB: 
MSGC: 
INFO: 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:40:13.260

如果您可以将其整理成[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)可以处理的格式，那么您的状态会好得多。如果您有熟悉的脚本语言，这通常不会太难。

如果您可以期待一致的列，则标准格式可能是 CSV。

# android - Android OCR 使用 tess-two 一个 tesseract 的分支

> ID：14525004
> 
> 赞同：3
> 
> 时间：2013-01-25T15:37:25.343
> 
> 标签：android, eclipse, ocr, logcat, tesseract

我在正在做的项目中使用 OCR 作为模块。在深入研究了一个星期后，我认为我应该在 eclipse 上运行一个测试应用程序，看看它的工作原理有多准确。我发现 tess-two 是 tesseract 的一个分支，作为对我的 OCR 的支持。我从以下位置下载了 tess-two：

[https://github.com/rmtheis/tess-two/downloads](https://github.com/rmtheis/tess-two/downloads)

我已经准备好将 tess-two 导入到我的 Eclipse 中。我确实将我的 Eclipse 设置为处理和构建涉及本机代码的项目。在解决了 1 或 2 个构建路径错误后，我确实成功构建了 tess-2。完毕！

然后我找到了一个使用相同 tess-two 的简单 OCR 应用程序。我从以下位置下载它：

[https://github.com/GautamGupta/Simple-Android-OCR](https://github.com/GautamGupta/Simple-Android-OCR)

我将此项目导入我的工作区。更正了构建路径，我将 tess-two 作为支持项目包含在构建路径中。当我成功构建这两个项目并在我的目标设备上运行它时，应用程序成功运行。当我使用按钮运行相机时，相机会打开，但是当我保存图片以便 ocr 在其上运行时，出现异常：

```
could not find class 'com.googlecode.tesseract.android.TessBaseAPI' referenced from     method com.datumdroid.android.ocr.simple.SimpleAndroidOCRActicity.picturetaken' 
```

这是 eclipse 上的 logcat 生成的异常。知道如何处理和删除此异常吗？Tess-2 是 android target-8，简单的 ocr 应用程序是 target-10。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T06:35:03.827

1.  打开项目属性

2.  添加`tess-two`所需项目

3.  勾选`tess-two`按顺序和导出复选框
4.  现在清理并构建你的`Simple-Android-OCR`

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:50:44.310

确保您在属性中将 tess-two 标记为库，然后右键单击您的简单 ocr 并在属性中添加 tess 两个库并应用

# azure - 如何从 Windows azure 中的两台机器访问远程桌面

> ID：14525005
> 
> 赞同：0
> 
> 时间：2013-01-25T15:37:27.690
> 
> 标签：azure, remote-desktop, azure-web-roles

我从 VS2010 发布了启用远程桌面的云服务。我下载了该实例的远程桌面连接。我刚刚使用远程桌面登录到云服务器。现在我从另一台计算机上发布了相同的应用程序。当我想从新机器连接远程桌面时，它无法连接到服务器。即使我从以前的机器上尝试过，我也得到了同样的结果。

应用程序有 1 个角色和 1 个实例。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:14:03.653

将 RDP 发布到云时必须允许它...检查发布设置一次...

# android - Android通过电话号码有效地获取联系人姓名以在ListView中显示

> ID：14525006
> 
> 赞同：3
> 
> 时间：2013-01-25T15:37:29.357
> 
> 标签：android

我正在创建一个短信应用程序，它`ListView`在主活动中包含一个显示来自短信收件箱的所有对话的短信应用程序。每`ListView`行显示一个对话以及电话号码、消息正文和消息时间。现在我想显示联系人姓名而不是电话号码（如果存在）。

到目前为止，为了通过电话号码获取联系人姓名，我找到了这个代码

```
private String getDisplayNameByNumber(String number) {
    Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));

    Cursor contactLookup = context.getContentResolver().query(uri, new String[] {ContactsContract.PhoneLookup._ID,
                                            ContactsContract.PhoneLookup.DISPLAY_NAME }, null, null, null);

    int indexName = contactLookup.getColumnIndex(ContactsContract.Data.DISPLAY_NAME);

    try {
        if (contactLookup != null && contactLookup.moveToNext()) {
            number = contactLookup.getString(indexName);
        }
    } finally {
        if (contactLookup != null) {
            contactLookup.close();
        }
    }

    return number;
} 
```

但这似乎效率低下，因为它必须单独查询每个联系人姓名并且滞后于应用程序。因此，我尝试从手机中获取所有联系人姓名并将其存储在`HashMap`以电话号码作为键和联系人姓名作为值的情况下，以便我可以随时从`HashMap`. 但似乎还有另一个问题，电话号码以许多不同的格式存储，例如：

```
+91 4324244434
04324244434
0224324244434 
```

那么我如何从中搜索电话号码，`HashMap`因为它可以以多种不同的格式存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:45:27.957

在将联系人添加到 之前`HashMap`，请使用正则表达式来获取电话号码。这样，无论电话号码是什么格式，正则表达式都能抓取到所需的适当号码。

获取号码后，将其添加到`HashMap`相应的号码中。

希望这能回答你的问题。

# c# - 将项目转换为 VS 2010 时出现命名空间错误

> ID：14525011
> 
> 赞同：1
> 
> 时间：2013-01-25T15:38:03.210
> 
> 标签：c#, visual-studio, namespaces, migration, compatibility

所以我是一个初出茅庐的程序员，被分配去了解一个已经开发了很长一段时间的应用程序（在 VS2005 中，然后在 2008 年）。在项目的整个生命周期中，其中的命名约定变得有些复杂。为了举例，这里是一段命名结构。

> `_MegaCorp.sln`
> 
> > `Application_Install`
> > 
> > `Megacorp`
> > 
> > > `DbResources.csproj`
> > > 
> > > `Forms`
> > > 
> > > > `Megacorp.Forms.Concept.csproj`
> > > > 
> > > > > `Properties`
> > > > > 
> > > > > `Resources`
> > > > > 
> > > > > `Megacorp`
> > > > > 
> > > > > > `Forms`
> > > > > > 
> > > > > > > `Concept`
> > > > > > > 
> > > > > > > > `xyz.cs`

这可能不是组织信息的最佳方式，但它在 VS2008 中运行良好。更新到 VS2010 不需要对现有代码进行大修，对吧？

发生的事情是这样的：当 xyz 调用 DbResources 时，Visual Studio 正在查找 Megacorp.Forms.Concept.Megacorp，而不是父级 Megacorp 文件夹。所有正确的引用和使用语句都是有序的：正如我所说，在 VS2008 中一切正常。这里发生了什么事？

```
 Error   826 The type or namespace name 'xxx' does not exist in the namespace 'MegaCorp.Forms.Concept.Megacorp.Forms.Concept' (are you missing an assembly reference?)   C:\x\y\c-sharp\Megacorp\Forms\Concept\ConstructEditor.Designer.cs   99  63  MegaCorp.Forms.Concept 
```

更新：如果我`global::`在每次使用 xyz.cs 中的类之前添加，这可以解决问题。但是，大约有 1,000,000 行代码，编译器报告的错误超过 400 个。我敢肯定，如果我梳理 400 个错误中的`global::`每一个，在每个错误之前粘贴，就会出现更多错误。必须有另一种方法来做到这一点，因为同样，该解决方案包含一个在 VS2008 中编译的非常实用且正在使用的应用程序。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:03:07.437

我有类似的问题，发现它与**Target Framework**相关。检查所有添加的引用是否都是针对同一目标框架的解决方案。

# c# - 什么样的事件通知 WPF Window.Icon 更改？

> ID：14525013
> 
> 赞同：0
> 
> 时间：2013-01-25T15:38:25.423
> 
> 标签：c#, .net, wpf, events, window

每当有人更改某个 WPF 窗口的 Icon 属性时，我都想得到通知。我需要听哪些事件，我该怎么做？

谢谢和最好的问候帕斯卡

# r - 使用 ldply() 从 GLM 模型列表中提取偏差

> ID：14525014
> 
> 赞同：0
> 
> 时间：2013-01-25T15:38:27.447
> 
> 标签：r, statistics, extract, plyr, graph-modelling-language

我想使用 ldply() 从 GLM 模型列表中提取偏差

**示例数据（来自 R 基础安装）：**

```
 library(reshape2)
    library(plyr)
    mtcars.1 <- mtcars[, c("am",  "qsec" , "drat")  ]
    mtcars.m <- melt(mtcars.1, id= 1 ) 

    glm.cars <- dlply( mtcars.m ,  .(variable) ,  
    glm,  formula=  am ~ value , family=binomial ) 
```

**走到这一步：**

```
 ldply(  glm.cars  ,  summarise ,   "Null Deviance" = null.deviance , 
        "Residual Deviance" = deviance , "Deviance"= "??"    ) 
```

**这给出了这个：**

```
 variable  Null Deviance     Residual Deviance    Deviance
1     qsec      43.22973          41.46512             ??
2     drat      43.22973          21.65003             ?? 
```

**偏差不见了！我该如何提取它？**

那么如何提取上面示例中的偏差呢？

当然，我可以做 null.deviance + deviance ，但我只是不想那样做。我想我想更好地了解 G 统计数据的原因。我觉得我经历了提取、减去和做 chisqr 的步骤，我会学得更好。

PS 我很困惑地发现 glm.model$devinc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:19:06.800

正如你所说，你很困惑。对于每个模型，您都有两个偏差。有趣的统计测量是这两个偏差的差异（......不是它们的总和）。（我猜你是在类比残差平方和和模型平方和的加性性质，但如果是这样，那么你在语言类比洞中跟着错误的兔子走。）你需要将差异与95% 卡方值，其自由度与空模型和“残差模型”之间的自由度差异相同。如果您在模型上执行 str(.)，您可以向下滚动列表输出以发现名称是：

```
 str(glm(am~qsec, mtcars, family=binomial)  )
 .....
 $ deviance         : num 41.5
 $ aic              : num 45.5
 $ null.deviance    : num 43.2
 .....
 $ df.residual      : int 30
 $ df.null          : int 31
 ..... 
```

因此，您的 dlply 代码需要提取这些，然后您计算`null.deviance-deviance`并`df.null -df.residual`可能显示`qchisq(0.95, df.null-df.residual)`. 如果您想了解它是如何被 R-Core 打包的，请查看：

```
 anova( glm(am~qsec, mtcars, family=binomial)  ) 
```

# cuda - 如何从 Cuda-Memcheck 中破译错误代码

> ID：14525015
> 
> 赞同：1
> 
> 时间：2013-01-25T15:38:36.353
> 
> 标签：cuda

**问题：**

在控制台中的 Windows 上运行 cuda-memcheck 正在报告

> 程序在 CUDA API 调用 cudaLaunch 时遇到错误 2。

问题是“错误2”是什么意思？我认为这是 cudaError 枚举中包含的错误代码，但我不确定。

**平台：** Windows 7（64 位）

**编译器**(Visual Studio 2010)

**计算能力**：1.1（Quadro FX 3800M）

**CUDA 版本**(5.0)

**问题：**您如何找出错误编号的含义？

**Cuda-Memcheck 结果**

```
 Running 1 test case...
    ========= CUDA-MEMCHECK
    ========= Program hit error 2 on CUDA API call to cudaLaunch 
    =========     Saved host backtrace up to driver entry point at error
    =========     Host Frame:C:\Windows\system32\nvcuda.dll
                     (cuD3D11CtxCreate + 0x11f702) [0x144812]
    =========     Host Frame:C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\cudart64_50_35.dll
                     (cudaLaunch + 0x2a5) [0x235c5]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                 (__device_stub__ZN17signal_processing6kernel24cfar_move_valid_elementsEPjPK6float2PS2_fS1_S1_ + 0xab) [0x313cb]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (signal_processing::kernel::cfar_move_valid_elements + 0x1d) [0x313ed]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (signal_processing::algorithm::constant_false_alarm_rate::identify_valid + 0x1af) [0x2a46f]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (signal_processing::algorithm::constant_false_alarm_rate::process + 0x2e3) [0x2bc03]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (server::stream::operator() + 0x5c2) [0x20ce2]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::`anonymous namespace'::thread_start_function + 0x21) [0xe01a1]
    =========     Host Frame:C:\Windows\system32\MSVCR100.dll
                     (endthreadex + 0x43) [0x21d9f]
    =========     Host Frame:C:\Windows\system32\MSVCR100.dll
                     (endthreadex + 0xdf) [0x21e3b]
    =========     Host Frame:C:\Windows\system32\kernel32.dll
                     (BaseThreadInitThunk + 0xd) [0x1652d]
    =========     Host Frame:C:\Windows\SYSTEM32\ntdll.dll
                     (RtlUserThreadStart + 0x21) [0x2c521]
    =========
    ========= Program hit error 17 on CUDA API call to cudaFree 
    =========     Saved host backtrace up to driver entry point at error
    =========     Host Frame:C:\Windows\system32\nvcuda.dll
                     (cuD3D11CtxCreate + 0x11f702) [0x144812]
    =========     Host Frame:C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\cudart64_50_35.dll
                     (cudaFree + 0x248) [0x24a98]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (signal_processing::algorithm::pulse_compression::~pulse_compression + 0x38) [0x29228]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::detail::sp_counted_impl_pd<signal_processing::algorithm::pulse_compression * __ptr64,boost::detail::sp_ms_deleter<signal_processing::algorithm::pulse_compression> >::dispose + 0x18) [0x18538]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (server::stream::~stream + 0xe7) [0x167e7]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::detail::thread_data<server::stream>::`scalar deleting destructor' + 0x26) [0x14246]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::thread::join + 0x12d) [0xe146d]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::thread_group::join_all + 0x49) [0x13fd9]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (unit_tests::test_stream::test_method + 0x430) [0x14a50]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused,void (__cdecl*)(void)>::invoke + 0xc) [0x6dcc]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::unit_test::ut_detail::callback0_impl_t<int,boost::unit_test::`anonymous namespace'::zero_return_wrapper_t<boost::unit_test::callback0<boost::unit_test::ut_detail::unused> > >::invoke + 0x16) [0xdab16]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::execution_monitor::catch_signals + 0xb1) [0xdb561]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::execution_monitor::execute + 0x37) [0xdb627]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::unit_test::unit_test_monitor_t::execute_and_translate + 0x5e) [0xdaa8e]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::unit_test::framework_impl::visit + 0x122) [0x92cc2]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::unit_test::traverse_test_tree + 0xae) [0x8d82e]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::unit_test::traverse_test_tree + 0xae) [0x8d82e]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::unit_test::framework::run + 0x4a2) [0x93c62]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (boost::unit_test::unit_test_main + 0x7e) [0xe5ffe]
    =========     Host Frame:C:\Users\Stephen.Torri\Documents\Visual Studio 2010\Projects\signal_processing\Win64\Bin\RelWithDebInfo\test_stream.exe
                     (__tmainCRTStartup + 0x11a) [0xe2082]
    =========     Host Frame:C:\Windows\system32\kernel32.dll
                     (BaseThreadInitThunk + 0xd) [0x1652d]
    =========     Host Frame:C:\Windows\SYSTEM32\ntdll.dll (RtlUserThreadStart + 0x21) [0x2c521]
    =========
    ========= LEAK SUMMARY: 0 bytes leaked in 0 allocations
    ========= ERROR SUMMARY: 2 errors 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:46:08.240

请参考 CUDA 运行时 API 中的[cudaLaunch()](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__EXECUTION_1gf4f3215d06b6d90849a3d977f9440002)。

您可以在该文档中细化错误代码的含义。[关联](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__TYPES_1g3f51e3575c2178246db0a94a430e0038)

> cudaErrorMemoryAllocation = 2
> 
> API 调用失败，因为它无法分配足够的内存来执行请求的操作。

另一方面，我建议您显示更多 cuda-memcheck 的输出，通常它会显示更多人类可读的信息，而不仅仅是代码。

# spring - Spring Social 使用来自提供者的值预填充本地注册表单

> ID：14525021
> 
> 赞同：0
> 
> 时间：2013-01-25T15:39:05.217
> 
> 标签：spring, spring-social

我正在尝试使用 Linkedin 回调预填充我的本地注册。当我尝试注册时，我在“电子邮件”字段中收到 NullPointer 异常。

Linkedin 可能无法访问电子邮件地址字段，但 Class UserProfile（用于填充字段）文档另有说明-“模型以统一的方式提供对这些公共字段的访问”。

它适用于 Facebook。当通过单击“使用 Facebook 登录”按钮触发身份验证过程时，我将被重定向回本地站点（身份验证后），本地注册表单中预先填充了姓名和电子邮件。

这不适用于 LinkedIn 或 Twitter，两者都会抛出 NullPointer 异常。我想要 LinkedIn 和 Twitter 的设置。

这是我的表格

领英

```
<form name="linkedin_signin" id="linkedin_signin" action="${linkedin_uri}" method="POST">
    <input type="image" src="${linkedin_img}" />
</form> 
```

推特

```
<form:form id="twitter_signin" action="${twitter_uri}" method="POST">
<input type="image" src="${twitter_img}" />
</form:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:47:43.120

在为您的 LinkedIn 申请授权时，您必须请求**r_emailaddress**权限。

```
<form name="linkedin_signin" id="linkedin_signin" action="${linkedin_uri}" method="POST">
    <input type="image" src="${linkedin_img}" />
    <input type="hidden" name="scope" value="r_emailaddress" />
</form> 
```

*   LinkedIn 的权限：[https ://developer.linkedin.com/documents/authentication#granting](https://developer.linkedin.com/documents/authentication#granting)
*   Facebook 的权限：http: [//developers.facebook.com/docs/reference/login/#permissions](http://developers.facebook.com/docs/reference/login/#permissions)

看起来你不能用 twitter [https://dev.twitter.com/discussions/4019](https://dev.twitter.com/discussions/4019)

# proxy - 从 SOAP 请求中获取数据元素

> ID：14525024
> 
> 赞同：1
> 
> 时间：2013-01-25T15:39:16.373
> 
> 标签：proxy, cxf, mule, interceptor, soapheader

我的请求如下

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:hel="http://example.org/HelloService">
   <soapenv:Header>
<sampler>Test</sampler>     
   </soapenv:Header>
   <soapenv:Body>
  <hel:LastName>
     <lastName>Test</lastName>
  </hel:LastName>
   </soapenv:Body>
</soapenv:Envelope> 
```

我的暴露 CXF:proxy-service 的流程如下

```
<flow name="WS_In">
    <http:inbound-endpoint address="http://localhost:8080/HelloService"
        exchange-pattern="request-response">            
        <cxf:proxy-service wsdlLocation="classpath:helloservice.wsdl"
            namespace="http://example.org/HelloService" service="ProxyService" >
            <cxf:inInterceptors>
            <spring:bean id="inLogger"  
                class="org.apache.cxf.interceptor.LoggingInInterceptor" />  
            <spring:bean id="msgInt" class="com.example.components.MessageInterceptor"/>            
            </cxf:inInterceptors>                           
        </cxf:proxy-service>
    </http:inbound-endpoint>
    <component>
        <spring-object bean="proxyService"></spring-object>         
    </component>        
    <echo-component></echo-component>   
</flow> 
```

但我无法获取肥皂标题中的元素。我尝试使用如下方法使用拦截器

```
@Override
public void handleMessage(SoapMessage message) throws Fault {
    System.out.println("The headers is " + message.getHeaders() );

} 
```

但这是打印一个emply Collection。

请建议我如何得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:15:43.893

尝试在代理服务之前在您的流程中添加自定义处理器

```
<flow name="WS_In">
<http:inbound-endpoint address="http://localhost:8080/HelloService"
    exchange-pattern="request-response">
    <custom-processor class="your.package.SoapHeaderObserver" />   
    <cxf:proxy-service wsdlLocation="classpath:helloservice.wsdl"
        namespace="http://example.org/HelloService" service="ProxyService" >
        <cxf:inInterceptors>
        <spring:bean id="inLogger"  
            class="org.apache.cxf.interceptor.LoggingInInterceptor" />  
        <spring:bean id="msgInt" class="com.example.components.MessageInterceptor"/>            
        </cxf:inInterceptors>                           
    </cxf:proxy-service>
</http:inbound-endpoint>
<component>
    <spring-object bean="proxyService"></spring-object>         
</component>        
<echo-component></echo-component> 
```

```
public class SoapHeaderObserver { 
   doSomething(SoapMessage message) {
     //try to get header here
   } 
} 
```

此外，您的自定义处理器可以实现 MessageProcessor 或 Callable。在此处查看[如何实现 Mule 消息观察器？](https://stackoverflow.com/questions/13361727/how-to-implement-a-mule-message-observer)

而且，该框架有很多您可能会使用的处理器，而不是构建您自己的处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:49:59.927

我得到的解决方案是在我的代理服务之前添加一个消息处理器。

下面给出的是我的处理器。

```
public class SOAPHeaderExtractor implements MessageProcessor {

    @Override
    public MuleEvent process(MuleEvent event) {     
        try
        {
            MuleMessage inputMessage =  event.getMessage(); 
            SOAPMessage soapMsg = MessageFactory.newInstance().createMessage(null, 
                    new java.io.ByteArrayInputStream(inputMessage.getPayloadAsString().getBytes()));
             SOAPHeader header = soapMsg.getSOAPHeader();            
             System.out.println(header.getElementsByTagName("sampler").item(0).getTextContent() );
        }
        catch(Exception e){
            e.printStackTrace();            
        }       
        return event ;
    }
} 
```

以及我的流程的变化。

```
<http:inbound-endpoint address="http://localhost:8080/HelloService"
        exchange-pattern="request-response">
        <custom-processor class="com.example.processors.SOAPHeaderExtractor" /> 
        <cxf:proxy-service wsdlLocation="classpath:helloservice.wsdl"
            namespace="http://example.org/HelloService" service="ProxyService" >
            <cxf:inInterceptors  >
            <spring:bean id="inLogger" class="org.apache.cxf.interceptor.LoggingInInterceptor" />   
            </cxf:inInterceptors>   
        </cxf:proxy-service>        
</http:inbound-endpoint> 
```

如果有更好的方法，请提出建议。

# javascript - 如何使用 spry 选项卡式面板创建主页链接

> ID：14525028
> 
> 赞同：1
> 
> 时间：2013-01-25T15:39:31.073
> 
> 标签：javascript, hyperlink, dreamweaver, spry, panels

我有一个网站，主要使用 spry 选项卡式面板在页面之间进行链接。在网站的最顶部，我有一个徽标，我想将其用作刷新页面或将其带回原始选项卡的链接。**问题是，由于我使用了 spry 选项卡式面板，当我从一个选项卡式页面移动到另一个选项卡式页面时，站点中的 URL 永远不会更改，从而无法创建“主页”链接。**

有谁知道如何在我的网站上创建一个带有 logo.jpeg 的链接，该链接将刷新页面或打开原始选项卡备份？

这是网站： [http ://emilymagnuson.com/trustbank/index.html](http://emilymagnuson.com/trustbank/index.html)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:50:27.493

Spry 选项卡式面板基本上是 JavaScript。~~似乎没有一种简单的方法可以将自定义 JavaScript 调用挂接到脚本中以允许外部元素（如徽标）触发显示的选项卡。~~所以我会推荐一个快速简单的解决方案。将徽标图像包装在将完全重新加载页面的链接中。所以这：

```
<img src="images/logo.jpg" width="100" height="100"> 
```

变成这样：

```
<a href="/" target="_top"><img src="images/logo.jpg" width="100" height="100"></a> 
```

或者，如果您不介意`index.html`展示，也许可以这样做：

```
<a href="index.html" target="_top"><img src="images/logo.jpg" width="100" height="100"></a> 
```

**编辑/清洁解决方案：**好的，我刚刚找到[了这个官方的 Adob​​e 文档](http://adobe.github.com/Spry/samples/tabbedpanels/tabbed_panel_sample.htm)，所以似乎可以进行外部 JavaScript 调用。具体参考“使用链接打开标签”。所以你可以这样做：

```
<a href="#" onclick="TabbedPanels1.showPanel(0); return false;"><img src="images/logo.jpg" width="100" height="100"></a> 
```

或者这样做：

```
<a href="#" onclick="TabbedPanels6.showPanel('first'); return false;"><img src="images/logo.jpg" width="100" height="100"></a> 
```

但我发现那些推荐的添加`<a href>`标签的方法很笨重，所以我会尝试这些。无需额外代码即可单击图像本身，而只需一个简单的 JavaScript`onclick`事件：

```
<img src="images/logo.jpg" width="100" height="100" onclick="TabbedPanels1.showPanel(0); return false;">

<img src="images/logo.jpg" width="100" height="100" onclick="TabbedPanels6.showPanel('first'); return false;"> 
```

希望这可以帮助！

# python - 在 Flask 中执行耗时的函数时显示“正在加载”消息

> ID：14525029
> 
> 赞同：52
> 
> 时间：2013-01-25T15:39:44.527
> 
> 标签：python, html, flask, loading

我对 Flask 还是比较陌生，而且总体上有点网络菜鸟，但到目前为止我已经取得了一些不错的成绩。现在我有一个表单，用户可以在其中输入一个查询，该查询被赋予一个函数，该函数可能需要 5 到 30 秒才能返回结果（使用 Freebase API 查找数据）。

问题是我不能让用户知道他们的查询在这段时间内正在加载，因为结果页面只有在函数完成工作后才会加载。有没有办法可以在此过程中显示加载消息？我发现一些 Javascript 可以在页面元素仍在加载时显示加载消息，但我的等待期发生在“render_template”之前。

我拼凑了一些示例代码，只是为了演示我的情况：

Python：

```
from flask import Flask
from flask import request
from flask import render_template
import time

app = Flask(__name__)

def long_load(typeback):
    time.sleep(5) #just simulating the waiting period
    return "You typed: %s" % typeback

@app.route('/')
def home():
    return render_template("index.html")

@app.route('/', methods=['POST'])
def form(display=None):
    query = request.form['anything']
    outcome = long_load(query)
    return render_template("done.html", display=outcome)

if __name__ == '__main__':
    #app.debug = True
    app.run() 
```

摘自 index.html：

```
<body>
    <h3>Type anything:</h3>
    <p>
    <form action="." method="POST">
        <input type="text" name="anything" placeholder="Type anything here">
        <input type="submit" name="anything_submit" value="Submit">
    </form>
    </p>    
</body> 
```

摘自 done.html：

```
<body>
    <h3>Results:</h3>
    <p>
        {{ display }}
    </p>
</body> 
```

任何帮助将不胜感激，我希望这个例子有所帮助。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2015-03-19T13:56:51.400

将此添加到您的 index.html 或 js 文件中（我假设您在这里有 jQuery，您当然可以使用标准 javascript。）：

```
<script type="text/javascript">// <![CDATA[
        function loading(){
            $("#loading").show();
            $("#content").hide();       
        }
// ]]></script> 
```

将此添加到您的 html 或 css 文件中：

```
div#loading {
    width: 35px;
    height: 35px;
    display: none;
    background: url(/static/loadingimage.gif) no-repeat;
    cursor: wait;
    } 
```

[您可以从http://www.ajaxload.info/](http://www.ajaxload.info/)获得足够的 GIF 。下载并将其放入您的静态文件夹。

然后更改您的提交按钮以调用上面的 js 函数：

```
<input type="submit" name="anything_submit" value="Submit" onclick="loading();"> 
```

并将加载和内容 div 添加到您的基本 html 文件中：

```
<body>
    <div id="loading"></div>
    <div id="content">
        <h3>Type anything:</h3>
        <p>
        <form action="." method="POST">
            <input type="text" name="anything" placeholder="Type anything here">
            <input type="submit" name="anything_submit" value="Submit" onclick="loading();">
        </form>
        </p>
    </div>    
</body> 
```

现在，当您单击“提交”时，js 函数应该隐藏您的内容并显示加载 GIF。这将一直显示，直到您的数据被处理并且烧瓶加载新页面。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-25T21:04:02.200

这可以通过使用`div`包含“正在加载 gif”图像的图像来完成。单击提交按钮时，将使用 javascript 显示 div。要实现这一点，您可以查看此网站： http://web.archive.org/web/20181023063601/http: [//www.netavatar.co.in/2011/05/31/how-to-show -a-loading-gif-image-while-a-page-loads-using-javascript-and-css/](http://web.archive.org/web/20181023063601/http://www.netavatar.co.in/2011/05/31/how-to-show-a-loading-gif-image-while-a-page-loads-using-javascript-and-css/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-14T09:24:03.877

我发现纯粹依赖 CSS 的加载器非常有用。它不依赖于外部资源：

[https://www.w3schools.com/howto/howto_css_loader.asp](https://www.w3schools.com/howto/howto_css_loader.asp)

[![在此处输入图像描述](../Images/50ab88ec65440191af11d21a3eb0c360.png)](https://i.stack.imgur.com/4ZFS3.gif)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T13:50:34.780

这是一个有点老的话题，但我今天需要处理这个问题并自己提出了一个解决方案。我正在运行一个机器学习模型，它接收来自用户的图像输入并执行一些魔术。

基本上这就是我所做的。

在我的 index.html 文件中，我在传递文件名的“提交”按钮上调用了一个加载函数，因为我稍后会使用它：

```
<form method="post" action="/loading/{{filename}}" 
enctype="multipart/form-data">
    <input type="submit" value="Submit!">
</form> 
```

在 Flask 上，我创建了一个路由，用于在执行耗时任务之前渲染加载屏幕，同时还传递了文件名：

```
@app.route('/loading/<filename>', methods=['POST'])
def loading_model(filename):
    return render_template ("loading.html", filename=filename) 
```

然后，在 loading.html 上，我渲染我的 .gif 动画，最后我将页面重定向到耗时的任务函数：

```
<!doctype html>
<head>
    <link rel= "stylesheet" type= "text/css" href= "{{url_for('static',filename='styles/main.css') }}">
</head>

<div id="preloader">
    <div id="status">&nbsp</div>
    <h1 class="ml13">ANALYZING...</h1>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js> </script>
</div>

<title>Title</title>

<script src="{{url_for('static', filename='main.js')}}"></script>

<script> window.location.replace('/task/{{filename}}'); </script> 
```

然后，最后一步，回到 Flask，调用任务函数：

```
@app.route('/task/<filename>', methods=['POST', 'GET'])
def task(filename):
    # Do your stuff
return render_template ("results.html") 
```

通过这样做，gif 动画将在函数完成其工作的同时继续播放，然后呈现您想要的结果或下一页。

您显然必须编辑 css 文件，以便“预加载器”和“状态”的行为如您所愿，这就是我使用它的方式：

```
#preloader {
    background-color: white;
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}

#status {
    background-image: url("lalala.gif");
    background-repeat: no-repeat;
    width: 800px;
    height: 600px;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -400px;
    margin-left: -400px;
} 
```

它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-14T00:03:41.520

出色的@jka.ne，但情况令人困惑。

我只需要在单击按钮时介绍加载 gif。

我的解决方案是：

```
<script type="text/javascript">
function loading(){
  $("#loading").show();
  window.location.href="../target_html";     
}
</script> 
```

然后：

```
<button type="button" class="xxx"  onclick="loading();">Run</button> 
```

最后：

```
<div id="loading"></div> 
```

# wpf - wpf 将多种样式合并为一种样式

> ID：14525030
> 
> 赞同：2
> 
> 时间：2013-01-25T15:39:45.047
> 
> 标签：wpf, resources, styles

我有一个由列表视图组成的 UserControl，它看起来像：

```
<UserControl
           ....

    <UserControl.Resources>

        <Style TargetType="Thumb">
            <!-- Style Content -->
        </Style>

        <Style  TargetType="GridViewColumnHeader">
            <!-- Style Content -->
        </Style>

        <Style  TargetType="{x:Type ScrollBar}">
            <!-- Style Content -->
        </Style>

        <Style  TargetType="{x:Type ScrollViewer}">
            <!-- Style Content -->
        </Style>

        <Style TargetType="{x:Type ListViewItem}">
            <!-- Style Content -->
        </Style>

    </UserControl.Resources>

    <ListView Name="ListView1" >
            <!-- ListViewContent -->
    </Style>
</UserControl> 
```

我有 3 个用户控件，它们之间唯一不同的是`<UserControl.Resources>`. 不必仅仅因为我需要不同的外观和感觉就必须创建具有相同功能的多个控件。我现在要做的是将所有样式`<UserControl.Resources>`合并为一种样式。如果我设法将所有这些样式归为一个，我将能够删除 3 个控件并将样式更改为：

```
 <ListView Style={DynamicResource style1} ... 
```

* * *

目前，如果我这样做

```
<UserControl.Resources>
     <Style x:Key="style1">
         <!-- Place all styles in here -->
     </Style>
</UserControl.Resources> 
```

这没用。

* * *

## 编辑

感谢 iltzortz 的回答，我现在有了：

**字典1.xaml：**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="Grid">        
        <Setter Property="Background" Value="Green"></Setter>
    </Style>

    <SolidColorBrush x:Key="Foo" Color="Red"></SolidColorBrush>

</ResourceDictionary> 
```

**字典2.xaml：**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="Grid">        
        <Setter Property="Background" Value="Black"></Setter>
    </Style>

    <SolidColorBrush x:Key="Foo" Color="Orange"></SolidColorBrush>

</ResourceDictionary> 
```

**我的用户控件：**

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="97" d:DesignWidth="91">

    <UserControl.Resources>
        <ResourceDictionary Source="Dictionary1.xaml" ></ResourceDictionary>
    </UserControl.Resources>

    <Grid >
        <Ellipse Fill="{DynamicResource Foo}" />
    </Grid>
</UserControl> 
```

我像这样动态更改资源字典：[switching wpf resource dictionaries at runtime](https://stackoverflow.com/q/2381085/637142)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:57:49.800

将资源字典添加到您的应用程序，例如 common.xaml

![在此处输入图像描述](../Images/2fb09c1c5eff5333cf83b9f0b6bb26d0.png)

把你常用的样式放在那里

然后你可以重用它：

```
 <UserControl.Resources>
    <ResourceDictionary Source="common.xaml"/>
 </UserControl.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:58:36.573

您可以创建 3 个资源字典并在运行时合并它们。在我的示例代码中，我使用了两个资源字典。

例子：

*字典1.xaml*：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style x:Key="btnStyle" TargetType="Button">
        <Setter Property="Margin" Value="0,10,0,0" />
    </Style>
</ResourceDictionary> 
```

*字典2.xaml*：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style x:Key="btnStyle" TargetType="Button">
        <Setter Property="Margin" Value="50,50,0,0" />
    </Style>

</ResourceDictionary> 
```

在应用程序启动时，您可以在`App.xaml`文件中设置默认样式：

```
<Application x:Class="Example.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Dictionary1.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

如果要更改样式，可以合并资源字典：

```
ResourceDictionary dict = new ResourceDictionary();
dict.Source = new Uri("\\Dictionary2.xaml", UriKind.Relative);            
this.Resources.MergedDictionaries.Add(dict); 
```

现在绑定看起来像这样：

```
<Button Style="{DynamicResource btnStyle}" Content="Click me!" /> 
```

现在，如果您调用代码来合并资源字典，按钮样式将自动更改。

# uitableview - 如何使用 DTCoreText 在 UITableViewCell 中显示图像

> ID：14525035
> 
> 赞同：0
> 
> 时间：2013-01-25T15:39:59.237
> 
> 标签：uitableview, lazy-loading

我`DTAttributedTextContentView`在 UITableViewCell 中并尝试使用 html（带图像）加载它，但找不到合适的方法来执行此操作。我`DemoTextViewController.m`在 Demo 中查看了具有图像加载的

```
- (void)lazyImageView:(DTLazyImageView *)lazyImageView didChangeImageSize:(CGSize)size {
    NSURL *url = lazyImageView.url;
    CGSize imageSize = size;

    NSPredicate *pred = [NSPredicate predicateWithFormat:@"contentURL == %@", url];

    // update all attachments that matchin this URL (possibly multiple images with same size)
    for (DTTextAttachment *oneAttachment in [_textView.attributedTextContentView.layoutFrame textAttachmentsWithPredicate:pred])
    {
        oneAttachment.originalSize = imageSize;

        if (!CGSizeEqualToSize(imageSize, oneAttachment.displaySize))
        {
            oneAttachment.displaySize = imageSize;
        }
    }

    // redo layout
    // here we're layouting the entire string, might be more efficient to only relayout the paragraphs that contain these attachments
    [_textView.attributedTextContentView relayoutText];
} 
```

但我不知道这将如何适用于我试过的 UITableViewCell

```
- (void)lazyImageView:(DTLazyImageView *)lazyImageView didChangeImageSize:(CGSize)size {
    NSURL *url = lazyImageView.url;
    CGSize imageSize = size;

    NSPredicate *pred = [NSPredicate predicateWithFormat:@"contentURL == %@", url];

    for (UITableViewCell *cell in self.tableView.visibleCells) {
        if ([cell isKindOfClass:[CommentCell class]]) {
            CommentCell *cc = (CommentCell *)cell;
            for (DTTextAttachment *oneAttachment in [cc.attributedTextContentView.layoutFrame textAttachmentsWithPredicate:pred])
            {
                oneAttachment.originalSize = imageSize;

                if (!CGSizeEqualToSize(imageSize, oneAttachment.displaySize))
                {
                    oneAttachment.displaySize = CGSizeMake(300, 100);
                }
            }
            [cc.attributedTextContentView relayoutText];
        }

    }

} 
```

但是单元格高度无法正确显示，并且图像未调整大小以适合`DTAttributedTextContentView`大小。我找不到任何关于如何实现这一点的文档。

如果您有更好的选择或解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T17:50:50.157

我也很难让它工作，关于这个的信息不多，但我终于让它工作了。当您将`DTAttributedTextCell`set 的`DTAttributedTextContentView`属性委托给您的 tableviewcontroller

`cell.attributedTextContextView.delegate = self;`

并实现这个方法：

```
- (UIView *)attributedTextContentView:(DTAttributedTextContentView *)attributedTextContentView viewForAttachment:(DTTextAttachment *)attachment frame:    (CGRect)frame{

    if([attachment isKindOfClass:[DTImageTextAttachment class]]){

       FVLazyImageView *imageView = [[FVLazyImageView alloc] initWithFrame:frame];
       imageView.contextView = attributedTextContentView;
       imageView.delegate = self;

       // url for deferred loading
       imageView.url = attachment.contentURL;
       return imageView;
   }
    return nil;
} 
```

从这个方法内部创建你的`DTLazyImageView`并设置它的委托。我创建了一个子类`DTLazyImageView`来保存一个额外的属性，`DTAttributedTextContentView`即对该单个单元格的引用，以便在`DTLazyImageViewDelegate`调用时使用。

然后在`- (void)lazyImageView:(DTLazyImageView *)lazyImageView didChangeImageSize:(CGSize)size`调用时获取`lazyImageView`传递的变量并将其转换为您的子类以获取`DTAttributedTextContentView`您存储的变量。使用示例中的相同方法，但只需将 替换`_textView.attributedTextContentView`为`DTAttributedTextContentView`您保留的。

还要确保按照他在 DemoSnippetsViewController 中的方式制作单元格，如果您正在加载图像，您将需要具有可变高度的单元格并且您必须实现`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

### Stricklands 问题更新

我已经有大约一年没有碰过我的代码了，所以我对此不太确定。但这就是我认为正在发生的事情。我从不调用`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`，我只是实现它，并在重新加载单元格时调用它。什么时候重新加载？根据我收集的信息，我实现了延迟图像视图的委托`- (void)lazyImageView:(DTLazyImageView *)lazyImageView didChangeImageSize:(CGSize)size;` 所以在从网络下载图像后，在该调用中我检查图像大小是否已更改并调用`[DTAttributedTextContentView relayoutText]`，我认为这会启动重新加载。

这是我的 heightForRowAtIndexPath 实现：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    DTAttributedTextCell *cell = (DTAttributedTextCell *)[self tableView:tableView preparedCellForIndexPath:indexPath];
    if([indexPath isEqual:self.selectedIndex]){
        return MAX([cell requiredRowHeightInTableView:tableView] + 40,120);
    }
    return MAX([cell requiredRowHeightInTableView:tableView], 80);
} 
```

下载完成并调用刷新后，它会调用`[DTAttributedTextCell requiredRowHeightInTableView:]`以传递新大小和一个小缓冲区。

# node.js - heroku nodejs app 如何获得我的应用程序根目录的绝对路径？

> ID：14525036
> 
> 赞同：1
> 
> 时间：2013-01-25T15:40:00.550
> 
> 标签：node.js, heroku

我有一个 nodejs 应用程序。

如何获得应用程序根目录的绝对路径？var rootDir = ....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:42:18.390

var absolute_path = __dirname;

到目前为止，我只看到根目录是“/app”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-10T17:41:20.357

3年后有点晚了，但对于后代来说。__dirname 的问题仅与调用它的文件相关。

我使用 nodejs 的路径模块来获取我的应用程序的根路径

```
path.dirname(require.main.filename) 
```

# opengl - GLSL 1.5 - 渲染到纹理数组的不同层

> ID：14525037
> 
> 赞同：2
> 
> 时间：2013-01-25T15:40:03.903
> 
> 标签：opengl, glsl

我有`GL_TEXTURE_2D_ARRAY`并且我这样做：

**1.**将我想要 FBO 的所有内容渲染到纹理数组

**2.**在渲染的“主要阶段”对该数组进行采样

为了实现第一个目标，我添加了一个小几何着色器，其中包含`gl_Layer`对每个图元的调用。另外，我已经在我的着色器中实现了一些类似于[Nvidia 教程](http://developer.download.nvidia.com/SDK/10.5/opengl/src/cascaded_shadow_maps/doc/cascaded_shadow_maps.pdf)的“翻译” ，用于第二阶段的渲染。

那么，***我的问题***是什么：

**条件：**相同的顶点、相同的 FBO、相同的着色器、相同的纹理数组

**1)**`glFramebufferTextureLayer`在我的 FBO 中使用调用重新绑定渲染目标乘以工作正常。

**2)**将纹理数组保存为`glFramebufferTexture`并且仅更改`gl_Layer`值会导致意外行为（第一层（代码中的 0）是正确的，我接下来尝试渲染的每一层都是无效的）。

**3)**我不想**1)**，我想做**2)**。*我怎么做？*

我在渲染 FBO 时使用的着色器。

*//顶点着色器*

```
#version 150 core

uniform mat4 orthoView;
in vec4 in_Position;

void main(void) { 
    gl_Position = orthoView * in_Position; 
} 
```

*//几何学*

```
#version 150 core

uniform int lr;

layout (triangles) in;
layout (triangle_strip, max_vertices = 3) out;
out int gl_Layer;

void main(void){
//pass-thru!
for(int i=0; i<3; i++)
  {
    gl_Position = gl_in[i].gl_Position;
    EmitVertex();
  }
gl_Layer = lr;
EndPrimitive();
} 
```

*//片段为空*

**编辑：**

感谢大家的帮助！我的问题现在解决了，这是我的几何着色器：

```
#version 150 core

uniform int lr;

layout (triangles) in;
layout (triangle_strip, max_vertices = 3) out;

void main(void){
//pass-thru!
for(int i=0; i<3; i++)
  {
    gl_Layer = lr;
    gl_Position = gl_in[i].gl_Position;
    EmitVertex();
  }

EndPrimitive();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:42:12.920

`gl_Layer`，就像*所有几何着色器*的输出一样，每个顶点的输出。哪个顶点控制特定图元的层是[实现定义的](http://www.opengl.org/wiki/Geometry_Shader#Which_vertex)。在您的情况下，没有理由在`EmitVertex`通话之前不将其设置在您的循环中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T17:10:05.320

我之前实际上没有使用过 gl_Layer，但是查看[文档](https://www.opengl.org/sdk/docs/manglsl/xhtml/gl_Layer.xml)，听起来它是一个每个顶点的属性（这很奇怪......）。

```
 The actual layer used will come from one of the vertices in the primitive being shaded 
```

所以尝试在 for 循环中设置值，在 EmitVertex 之前，也许？

# android - 在模拟器上下载文件

> ID：14525046
> 
> 赞同：0
> 
> 时间：2013-01-25T15:40:29.357
> 
> 标签：android, download

我刚刚下载了这个例子[http://developer.android.com/training/basics/network-ops/index.html](http://developer.android.com/training/basics/network-ops/index.html)。它不适用于模拟器，但它适用于我的android设备。我在模拟器上有互联网连接。浏览器工作。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:49:29.027

有一篇关于如何在模拟器上运行 Google Play 并伪装成任何设备的博客文章。可能想检查一下： [https ://apkudo.com/?p=510](https://apkudo.com/?p=510)

# facebook - 即使在运行调试器之后，共享博客文章时也不会显示图像

> ID：14525050
> 
> 赞同：0
> 
> 时间：2013-01-25T15:40:36.090
> 
> 标签：facebook, image, wordpress

这是博客文章：[http ://rocketpressmedia.com/jim-croce/](http://rocketpressmedia.com/jim-croce/)

我无法显示预览图像，我已经尽我所能尝试了一切。任何人都可以帮忙吗？我为此付出了很大的努力，并希望图像显示出来，以便我可以分享。

我已经运行调试器并完成了我能找到的所有研究。我每周分享几篇博客文章，这是我第一次遇到这个问题并且永远无法解决它。

有任何想法吗？谢谢 ：）

我用wordpress，记录一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:01:32.107

您的图像的宽高比大于 3:1 (777 x 216px = 3.56:1)。

如果你想分享你的图片，你`og:image`应该至少有 200px 的一面，纵横比小于 3:1。尝试将“中等”大小的图片设置为帖子的特色图片。我认为这适用于 Jetpack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T18:39:07.473

[我的博客http://3rank.com/ 也](http://3rank.com/)发生了同样的事情。简单的解决方案 - 确保您的特色图片大于 200*200。

# python - 如何使用内部列表的值对字典进行排序（两个顺序标准）

> ID：14525055
> 
> 赞同：1
> 
> 时间：2013-01-25T15:40:45.053
> 
> 标签：python

我需要使用两个顺序标准对这个字典进行排序：“rank”降序，“fruit”升序（如果排名结果相同）。

dict的结构是这样的

```
'object':['fruit',rank] 
```

例如我有：

```
myDict = {'item2': ['bananas', 3], 'item3': ['cocumbers', 11], 'item1': ['pinapples', 3], 'item4': ['pears', 3]} 
```

我的目标是获得这个：

```
{'item3': ['cocumbers', 11], 'item2': ['bananas', 3],'item4': ['pears', 3], 'item1': ['pinapples', 3]} 
```

和

```
sorted(myDict.items(), key=lambda (k, v): v[1], reverse=True) 
```

我只获得了正确的排名排序，但没有获得具有相同排名的对象的排序顺序：

```
[('item3', ['cocumbers', 11]), ('item2', ['bananas', 3]), ('item1', ['pinapples', 3]), ('item4', ['pears', 3])] 
```

如何在 python 2.7 中解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:42:16.907

`sorted(myDict.items(), key=lambda (k, v): (-v[1],v[0]))`

应该做的伎俩。由于`rank`是一个整数，我们可以很容易地通过使键函数只返回负值而不需要`reverse=True`关键字来使其降序排序`sorted`。在平局的情况下，我们依靠字符串的自然顺序。

这是因为python中的序列按字典顺序排序（`tuples`是一种序列类型）——Python按顺序比较每个序列中的元素，直到其中一个元素不相等，这给出了序列对的排序。

在无法轻松替换`reverse=True`为关键功能的情况下，您需要排序两次：

```
l1 = sorted(myDict.items(),key=lambda (k,v):v[0])
l1.sort(key=lambda (k,v):v[1],reverse=True) 
```

这依赖于记录在案的事实，即 python 排序必须是稳定的。也就是说，排序前后相等的元素的相对顺序是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:42:36.323

您将需要使用[collections.OrderedDict](http://docs.python.org/2/library/collections.html#ordereddict-objects)来维护字典内的顺序。

# c# - LINQ 查询返回 Grandparent、Parent、Grandchild，其中 Grandchild 具有值

> ID：14525058
> 
> 赞同：0
> 
> 时间：2013-01-25T15:40:47.503
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我正在构建一个用于生成调查和处理响应的系统，我有一个视图模型 SurveyTakeViewModel

```
namespace Survey.ViewModel
{
     public class SurveyTakeViewModel
     {
         public Models.Survey Survey { get; set; }
         public bool TakenBefore { get; set; }
     }
 }

namespace Survey.Models
{
    public class Survey
    {
        [Key]
        public int SurveyId { get; set; }

        public string Name { get; set; }
        public bool Active { get; set; }

        public string MessageStart { get; set; }
        public string MessageEnd { get; set; }

        public virtual ICollection<Question> Question { get; set; }
    }
}

namespace Survey.Models
{
    public class Question
    {
         public virtual int SurveyId { get; set; }

         [Key]
         public int QuestionId { get; set; }
         public int DisplayOrder { get; set; }
         public string QuestionText { get; set; }
         public string QuestionNote { get; set; }
         public int QuestionTypeId { get; set; }

         public virtual QuestionType QuestionType { get; set; }

         public virtual ICollection<QuestionAnswerOption> QuestionAnswerOption{ get; set; }
         public virtual ICollection<QuestionAnswer> QuestionAnswer { get; set; }
     }
 }

 namespace Survey.Models
 {
     public class QuestionAnswer
     {
         public virtual int QuestionId { get; set; }

         [Key]
         public int QuestionAnswerId { get; set; }
         public int SurveyId { get; set; }
         public string UserId { get; set; }
         public string QuestionActualResponse { get; set; }
     }
 } 
```

这一切都适用于问卷调查，但是当用户重新访问他们之前回答过的问卷调查时，我想用特定用户 ID 的答案填充视图模型的 QuestionAnswer 部分，此时我得到每个答案。我尝试了很多不同的 Linq 查询，最初我的 ICollections<> 是 List<>，我被告知这可能会导致所有记录都被返回。

目前我正在使用

```
Survey = db.Survey.FirstOrDefault(s => s.SurveyId == 1) 
```

返回所有 QuestionAnswer

我尝试过类似的事情

```
Survey = db.Survey.FirstOrDefault(a => a.Question
.Any(b => b.QuestionAnswer
.Any(c => c.UserId == userId))); 
```

但它仍然为每个 userId 返回所有 QuestionAnswer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:56:06.553

似乎您知道您想要哪个调查，但是当您访问各种属性时，它们会填充额外的信息......您想要更少的孙子记录。

我不知道足够的 LinqToEntities 以所需的方式限制加载（LinqToSql 将使用`DataLoadOptions.LoadsWith`and `DataLoadOptions.AssociateWith`）。相反，我在加载后提供了这种数据的手动整形。也许它会帮助专家理解问题，然后他们可以在 LinqToEntities 查询中表达它。

```
int surveyId = GetSurveyId();
int userId = GetUserId();

Survey mySurvey = db.Survey.FirstOrDefault(s => s.SurveyId == surveyId);

ILookup<int, QuestionAnswer> qaLookup = db.QuestionAnswer
  .Where(qa => qa.SurveyId == surveyId && qa.UserId == userId)
  .ToLookup(qa => qa.QuestionId);

foreach(Question q in mySurvey.Questions)
{
  //limit q.QuestionAnswer to only this user's answers.
  q.QuestionAnswer = qaLookup[q.QuestionId].ToList();
} 
```

# sql - DB2 SQL 连接和最大值

> ID：14525061
> 
> 赞同：2
> 
> 时间：2013-01-25T15:40:57.520
> 
> 标签：sql, join, db2, max

我正在访问的数据库有两个需要使用 DB2 SQL 查询的表，这里显示为 nametable 和 addresstable。该查询用于查找所有有一定余额的人。地址存储在单独的表中以跟踪地址更改。在addresstable中，最新的地址由一个序号（ADDRSEQUENCE）决定。AddressID 字段出现在两个表中，并将每个人与特定地址联系起来。最高的序列号是当前地址。我需要每个人的当前地址，而且只有那个。我知道我将不得不在某个地方使用 MAX 作为序列号，但我不知道如何在给定连接的情况下定位它。这是我当前的查询，当然会返回所有地址...

```
SELECT NAMETABLE.ACCTNUM AS ACCOUNTNUMBER, 
NAMETABLE.NMELASTBUS AS LASTNAME,
NAMETABLE.NAME_FIRST AS FIRSTNAME, 
NAMETABLE.BALDUE AS BALANCEDUE,
ADDRESSTABLE.STREETNAME AS ADDR, 
ADDRESSTABLE.ADDRLINE2 AS 
ADDRLINE2,ADDRESSTABLE.CITYPARISH AS CITY, 
ADDRESSTABLE.ADDRSTATE AS STATE,
ADDRESSTABLE.ZIPCODE AS ZIP, 
ADDRESSTABLE.ADDIDSEQNO AS ADDRSEQUENCE
FROM NAMETABLE JOIN ADDRESSTABLE ON NAMETABLE.ADDRESSID = ADDRESSTABLE.ADDRESSID
WHERE NAMETABLE.BALANCEDUE >= '50.00' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:52:35.240

您可以像这样进行子选择`MAX(ADDRSEQUENCE)`：

```
SELECT 
     N.ACCTNUM AS ACCOUNTNUMBER
    ,N.NMELASTBUS AS LASTNAME
    ,N.NAME_FIRST AS FIRSTNAME
    ,N.BALDUE AS BALANCEDUE
    ,A.STREETNAME AS ADDR, 
    ,A.ADDRLINE2 AS 
    ,A.ADDRLINE2
    ,A.CITYPARISH AS CITY, 
    ,A.ADDRSTATE AS STATE,
    ,A.ZIPCODE AS ZIP, 
FROM NAMETABLE AS N 
JOIN ADDRESSTABLE AS A 
  ON N.ADDRESSID = A.ADDRESSID
WHERE N.BALANCEDUE >= '50.00'
  AND A.ADDRSEQUENCE = (
    SELECT MAX(ADDRSEQUENCE)
    FROM ADDRESSTABLE AS A2
    WHERE A.ADDRESSID = A2.ADDRESSID
) 
```

这在 DB2 中非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:49:22.653

您可以使用 row_number 和 partition by 来执行此操作。像这样的东西：

```
with orderedaddress as (
 select row_number() over (partition by ADDRESSID order by ADDRSEQUENCE desc) as rown,
 STREETNAME,ADDRESSID, ... from ADDRESSTABLE 
)
select NAMETABLE.ACCTNUM AS ACCOUNTNUMBER,
...
oa.STREETNAME 
...
from NAMETABLE JOIN orderedaddress oa on NAMETABLE.ADDRESSID = oa.ADDRESSID
where oa.rown = 1
and NAMETABLE.BALANCEDUE >= '50.00' 
```

# c++ - 尝试以任何方式删除所有编译器警告是最佳实践吗

> ID：14525063
> 
> 赞同：5
> 
> 时间：2013-01-25T15:41:13.043
> 
> 标签：c++, compiler-construction, warnings

我们的项目经理最近制定了一项政策，要求开发人员删除所有编译器警告。我知道有些警告确实很容易删除，有些则不那么容易。因此，一些开发人员使用各种可能的方式来实现目标。例如，使用显式强制转换将 double 转换为 float、float 转换为 int、signed 转换为 unsigned 等等。由于我们的代码库如此之大，20 多年 30-50 开发人员的工作，我真的怀疑这有多少努力真的可以帮助我们，如果它确实有一些优点。谁能给你一些建议或论点？我们的项目使用 C++。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T15:47:01.487

一旦你让编译器警告溜走，“真正的”警告也会被忽略。我数不清有多少次我进入一个带有大量警告的项目，只要稍加小心，就会连同一堆非常微妙的错误一起被删除。if 中的意外分配，switch 中的意外跌落或没有默认值，意外；在 for 循环结束时，无意的类型转换等。警告的存在是有原因的 - 使用它们。是的，有些是非常悬疑的，但只需一点点工作就可以省去很多麻烦。

清洁警告并保持清洁。你会写出更好的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T16:04:34.810

修复大型项目中的所有警告可能非常棘手。并且一些编译器对“需要警告的正确事情”有相当模糊的感觉。

修复警告绝对是一件好事。但它应该以正确的方式完成 - 有时，正确的做法是简单地禁用该警告。

一些真正令人讨厌的是“未使用的参数” - 好吧，如果接口确定使用两个参数调用此函数，但您只使用一个（或没有），因为这个特定实现所做的不是使用这些参数，那么它就是很难修复警告[您当然可以删除变量的名称（或将其作为注释）]。

同样，有时编译器可能非常挑剔，以至于不可能是正确的——我遇到过这样的情况：函数底部没有返回会给出“并非所有路径都导致返回”，而当我在底部添加返回时该功能，它说“无法访问的代码” - 好吧，你想要它？这是（对于该部分代码）禁用相关警告的正确做法。

如果您必须使用多个编译器编译代码，情况会变得更糟 - 有时编译器中的“好”在另一个编译器中变成警告，并且该警告的修复在下一个编译器中变成警告，这可以很难解决。

一旦您制定了应对警告的策略，并删除了您想要删除的那些，禁用了您想要禁用的那些，我建议您使用“将警告视为错误”来构建您的产品。

大多数时候，警告对程序员来说是“好”的，不应该被忽视。但有时“我知道我在做什么，编译器闭嘴！” 是正确的方法——当然，大多数时候，这些都是通过应用演员或类似的方法来解决的——当它是解决问题的正确方法时应该这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T15:48:38.033

**不**，不是所有的警告，也不是任何手段。

*并非所有警告：*一些编译器已经实现了风格或不准确的警告，通常最好停用这些警告，因为它们会分散实际问题的注意力。

*无论如何都不是：*编译器使用警告来表示可疑的事情，例如，最有趣的警告表示可能的未定义行为。目标不应该*只是为了安抚编译器*而删除警告，而应该是确保行为是明确定义的，如果不是使其明确定义。

我的建议是首先查看已激活的警告集，并删除无用的警告。然后，了解留下的警告是关于什么的，并就处理每个警告的最佳方式达成一致（目标是获得明确的行为）。最后，您将能够开始使用您的代码库。

# php - codeigniter 中的受影响行（）

> ID：14525064
> 
> 赞同：0
> 
> 时间：2013-01-25T15:41:14.353
> 
> 标签：php, mysql, codeigniter

假设我有一个表单，当单击某个链接时会填充该表单，并且允许用户更新数据并保存对这些字段所做的更改。

```
$data = array('somevalue, 'somevalue');            
$this->db->where('id', $this->input->post('id'))->update('links', $data);

            if($this->db->affected_rows() == 1){
                return TRUE;
            }else{
                return FALSE;
            } 
```

当我进行一些更改并进行保存时，一切正常，因为它返回`TRUE`. `affected_rows() == 1`如果我不进行任何更改并进行保存怎么办？没有任何行会受到影响，它会返回`FALSE`。

解决此问题的适当方法是什么？主要问题是我仅在返回时才显示成功消息`TRUE`。因此，如果没有进行任何更改并单击保存按钮，则会出现问题（即不显示任何消息）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:46:22.910

只返回真。

如果连接到您的数据库时出现问题，您将在应用程序到达该点之前收到一条错误消息。

这是冗余代码。

你应该能够做到

```
return $this->db->where('id', $this->input->post('id'))->update('links', $data); 
```

但是您需要检查 codeigniter 在哪些情况下返回 false。

PS为什么不在codeigniter中使用表单验证来检查字段是否为空，然后再进入模型？

# c# - Wi-Fi Direct 无法连接 WinRT 上的设备

> ID：14525065
> 
> 赞同：5
> 
> 时间：2013-01-25T15:41:22.417
> 
> 标签：c#, windows-8, windows-store-apps

我正在尝试通过 Wi-Fi Direct 连接两台设备，但这些设备未连接。我在我的应用程序和[Proximity Sample](http://code.msdn.microsoft.com/windowsapps/Proximity-Sample-88129731)中都进行了测试，出现了同样的错误：

*   **“由于超时期限已过，此操作返回错误。（来自 HRESULT 的异常：0x80070584）”** - 在请求连接的人旁边
*   **“连接到系统的设备无法运行。（HRESULT 异常：0x8007001F）”** - 接受连接的一方。

这发生在通话期间：

```
StreamSocket socket = await PeerFinder.ConnectAsync(peer); 
```

有时设备已连接，但在大多数情况下未连接。

有人有同样的问题吗？有没有什么办法解决这一问题？

# java - 如何获取 RHINO 中变量的类型？

> ID：14525066
> 
> 赞同：1
> 
> 时间：2013-01-25T15:41:24.280
> 
> 标签：java, javascript, rhino

我正在将一些使用 SpiderMonkey 的代码翻译成 RHINO，它使用 JSVAL_IS_INT(val) 方法，其中 'val' 是 jsval(SpiderMonkey 代码)，我尝试使用 RHINO 的 toNumber(val)，其中 'val' 是Object 的一个实例，但 toNumber 似乎没有检查“val”的类型。

这是一个类似案例的代码，带有toBoolean：

```
 ContextTest ct = new ContextTest();
    ct.val = "lol";
    System.out.println(Context.toBoolean(ct.val));
    System.out.println(ct.val); 
```

由此可见：

```
true
lol 
```

但是 toBoolean() 不应该返回 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:16:04.110

toBoolean、toNumber 等上下文方法不适合检查类型。这些方法尝试进行“强制转换”并且它们不检查类型。在您的示例中，toBoolean 返回 true，因为 string 不为空（请参阅[上下文类源](https://code.google.com/p/closure-compiler-rhino/source/browse/src/org/mozilla/javascript/Context.java?r=4fdefdd0af7b17604f0fbc979c6bae0d317a5f5e&spec=svn50e933d402d2160635f778ecef297c492b8a15ee)）。

要将值检查/转换为整数，请使用：

```
 if(val instanceof Integer) {
           Integer valInt = (Integer) val;
           System.out.println(valInt);
        } else if(val instanceof Scriptable) { //Rhino class embedes any js value
           Scriptable s = (Scriptable) val;
           String className = s.getClassName();// ECMA class name
           System.out.println(className);
           if(className.toLowerCase().equals("number")) {
              System.out.println(Context.toNumber(val)); 
           }
        } 
```

# zend-framework2 - 如何在 Zendframework 2 中使用 ZendSearch 与自动加载器而不使用 Zend 应用程序

> ID：14525067
> 
> 赞同：0
> 
> 时间：2013-01-25T15:41:28.713
> 
> 标签：zend-framework2, zend-search-lucene

我在具有该代码的项目中使用 Zend Framework 2：

```
require_once APPPATH . "third_party/Zend/Loader/StandardAutoloader.php";

 $loader = new StandardAutoloader(array('autoregister_zf' => true));
 $loader->register(); 
```

如何从这个 github 存储库添加 ZendSearch：[https ://github.com/zendframework/ZendSearch](https://github.com/zendframework/ZendSearch)

我不知道如何将它复制到 zend 目录中，以便自动加载器找到它。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:58:15.267

女士们，先生们，这是解决方案：

```
$loader = new StandardAutoloader(array('autoregister_zf' => true));
$loader->registerNamespace('ZendPdf', APPPATH . "third_party/ZendPdf");
$loader->registerNamespace('ZendSearch', APPPATH . "third_party/ZendSearch");
$loader->register(); 
```

生活可以如此简单；）

# sql-server - 创建具有唯一标识符列的视图

> ID：14525068
> 
> 赞同：1
> 
> 时间：2013-01-25T15:41:29.353
> 
> 标签：sql-server, sql-server-2008

我需要从数据库中的表中获取数据，在我的情况下为 dbo.EventsCollage 并为其创建一个视图。

视图应包含所基于的表的所有记录，而且我应该添加一个名为 Id of 的列`datatype uniqueidentifier`。

应为视图中显示的每条记录自动创建一个唯一标识符值（随机生成）

这是我如何创建视图

```
CREATE VIEW testView
AS
SELECT
x.Name
FROM dbo.EventsCollage as x; 
```

你能指出我的代码示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:51:17.497

使用`newId()`. （***注意：每次选择时，这将为您提供每行的新 ID***）

```
CREATE VIEW testView
AS
SELECT
newId() Id, x.Name
FROM dbo.EventsCollage as x; 
```

([演示 - 1](http://sqlfiddle.com/#!3/269e1/3) )

或者，如果您每次都需要每行具有相同的唯一标识符，请尝试（***注意：这最多只能使用 1 亿条记录***）

```
CREATE VIEW testView
AS

SELECT convert(uniqueidentifier,
       stuff('62799568-6EF2-4C95-84E7-4953A6959C99',1,len(rn),convert(varchar,rn))) id,
       T.Name
FROM ( 
  select x.Name,  ROW_NUMBER() over (order by x.Name) rn
FROM dbo.EventsCollage as x ) T; 
```

([演示 - 2](http://sqlfiddle.com/#!3/269e1/1) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:51:35.490

我认为您需要考虑使用`NEWID()`：

```
CREATE VIEW testView
AS
SELECT
x.Name, NEWID() as youruniquecol
FROM dbo.EventsCollage as x; 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/7642f/1)。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-16T19:07:58.997

你也可以这样做：

```
SELECT ROW_NUMBER() OVER( ORDER BY col1 ) AS id, col1, col2, col3
FROM MyResults 
```

请参阅： [将标识列添加到 SQL Server 2008 中的视图](https://stackoverflow.com/questions/10382287/add-identity-column-to-a-view-in-sql-server-2008)

# c# - 编码问题：尽管存在，但在 db 中找不到该项目

> ID：14525069
> 
> 赞同：0
> 
> 时间：2013-01-25T15:41:30.017
> 
> 标签：c#, encoding, decoding

我的数据库中有这个条目：

```
tést 
```

我从用户那里得到的是：

```
"t&eacute;st" 
```

当我在 db 中搜索它时，我得到空结果，因为它不存在。如何转换`&eacute;`为é？

这是我的代码：

```
(from x in db.tblMyTable where x.name == "t&eacute;st" select x) 
```

我使用实体框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:43:24.023

要转换该字符串，您将使用 HtmlDecode 方法：

```
str = Server.HtmlDecode(str); 
```

但是，您应该研究为什么值实际上不应该进行 HTML 编码。

# android - Android opengl es 2.0 软件渲染

> ID：14525070
> 
> 赞同：0
> 
> 时间：2013-01-25T15:41:31.893
> 
> 标签：android, opengl-es-2.0, android-build

我在 vexpress 平台上使用 android 4.1.2 (linaro)。由于没有硬件 GPU，我想知道是否可以使用软件渲染器来支持 opengl es 2.0。

问候

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T15:43:33.917

Yoy不需要GPU来使用OpenGL。它在所有图形硬件上都受支持和兼容。

# iphone - 脸书 API 权限

> ID：14525074
> 
> 赞同：0
> 
> 时间：2013-01-25T15:41:49.903
> 
> 标签：iphone, ruby, facebook, facebook-fql, koala

刚开始使用 Facebook 的 API。我有一个客户端在 iPhone 上登录 FB 后向我发送 access_token。我想知道我会在哪里指定我需要的权限，例如访问电子邮件或用户的音乐数据？

是通过客户端使用`FBSession`，还是通过`Koala`（我在服务器端使用 access_token 来获取用户信息的 ruby​​ gem）或 Facebook 的应用设置页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:46:30.540

虽然我不是移动开发方面的专家，所以我无法为您提供功能示例（甚至无法正确解释如何执行此操作）我在 Developers 网站的 Facebook API 部分进行了一些浏览，我相信我有你的问题的答案。这不仅会回答在哪里，而且还应该为您提供如何，出于许多不同的目的，您必须添加不同的权限，并且此页面让您了解如何执行所有这些操作。 [http://developers.facebook.com/docs/reference/login/](http://developers.facebook.com/docs/reference/login/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:47:47.673

如果您的用户通过 iOS 应用程序登录，您需要`permissions`在`FBSession`. [https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#permissions](https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#permissions)

# javascript - .val 在选择时具有无效值

> ID：14525075
> 
> 赞同：4
> 
> 时间：2013-01-25T15:41:54.517
> 
> 标签：javascript, jquery

我有一个`<select>`, 按钮点击用户可以选择下一个选项：

```
$(".someButton").on('click', function () {
   var $opt = $("select :selected");

   $("select").val($opt.next().val());
}); 
```

问题是在最后一个选项上，`$opt.next().val()`返回一些不可选择的值，显然 jQuery 默认选择第*一个*选项。我想要的是它留在最后一个选项。

有没有办法做到这一点（最好不检查 的位置`$opt`或长度`$opt.next()`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:50:26.330

这是一种更有效的方法：

```
$(".someButton").on('click', function () {
   var el = $("select")[0];
   el.selectedIndex = Math.min(el.selectedIndex + 1, el.length - 1);
}); 
```

* * *

如果您想坚持使用 jQuery，请将 设置`option`为选中：

```
$opt.next().prop('selected', true); 
```

如果`$opt`是最后一个，`.next()`将返回一个空集，所以什么都不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:47:51.917

老实说，我只会处理这个案子。添加以下内容很简单：

```
if(!$opt.is(':last-child')) {
    $("select").val($opt.next().val());
} 
```

# razor - 在剃刀辅助方法中添加非中断空间

> ID：14525076
> 
> 赞同：16
> 
> 时间：2013-01-25T15:41:55.317
> 
> 标签：razor, asp.net-mvc-4

如何`&nbsp;`在 Razor 辅助方法中包含不间断空格 ( )？这是有问题的助手：

```
@helper RenderClipResult(Clip clip, IList<string> searchTerms)
{
    <div class="result">
        <!-- other clip stuff -->
        @if (clip.ThirdPartyMaterials != null && clip.ThirdPartyMaterials.Count > 0)
        {
            <p>
                <span class="heading">Third Party Material</span><br/>
                @foreach (var material in clip.ThirdPartyMaterials)
                {
                    &nbsp; @AddElement("Description", material.Description, searchTerms) @AddElement("Cost", material.Cost, searchTerms)
                    <br />
                }
            </p>
        }
    </div>
} 
```

`AddElement`是另一个自定义助手。我正在寻找的输出是这样的：

```
Third Party Material
 first entry
 second entry
 third entry 
```

我可以将该`AddElement`行包装在 span 标记中以进行样式设置，但它是另一个 html 标记和 css 规则，只是将某些文本缩进单个字符宽度。可能不得不这样做，因为 Razor 无法解析空间

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-25T16:58:04.497

`@:`在您的不间断空格 html 代码之前添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-31T16:20:53.770

第二种选择是使用构造：@Html.Raw(" ") 。这也可以是具有相乘 nbsp-signs 的用户，因此您可以将字符串生成器的结果放入 RAW 函数。

# jsf - 条件渲染 f:selectItem 可能出现的问题

> ID：14525078
> 
> 赞同：3
> 
> 时间：2013-01-25T15:41:58.333
> 
> 标签：jsf, jsf-2, selectonemenu, rendered-attribute

我有一个包含多个`h:selectOneMenu`or的页面`p:selectOneMenu`，我想使用同一个页面来编辑和添加数据。当我将编辑我需要的数据时`f:selectItem`。我知道这个组件没有渲染属性。我读到我可以使用`<c:if>`.

好的。例如，如果我写

```
<p:selectOneMenu rendered="#{not empty bean.id}"
    value="#{bean.selectedId}">
    <c:if test="${editableBean != null}">
        <f:selectItem itemLable="#{editableBean.name} itemValue=#{editableBean.id} />
    </c:if>
    <f:selectItems value="#{bean.listItems}" var="item"
        itemLabel="#{item.name}" itemValue="#{item.id}"/>
</p:selectOneMenu> 
```

它会在 primefaces 和 ajax 监听器中正常工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:53:59.593

简单的解决方案（但性能较差）将是`boolean editMode`在托管 bean 中有一个属性来启用/禁用组件。基本示例：

```
<p:selectOneMenu rendered="#{not empty bean.id}" disabled="#{bean.editMode}"
    value="#{bean.selectedId}">
    <f:selectItems value="#{bean.listItems}" var="item"
        itemLabel="#{item.name}" itemValue="#{item.id}"/>
</p:selectOneMenu> 
```

在你的豆子里

```
@ManagedBean
@ViewScoped
public class Bean {

    private int id;
    private boolean editMode;
    //other attributes...
    //getters and setters...

    @PostConstruct
    public void init() {
        //a way to know if the bean it's in edit mode
        editMode = (id != 0);
    }
} 
```

这个解决方案的性能很差，因为每个`<p:selectOneMenu>`人都必须加载所有数据，然后选择实际值，但它会做你想做的事。另一种选择是将此属性用于 和 的属性`rendered`（或可能）。另一个基本示例：`<p:selectOneMenu>``<h:inputText disabled="true" readonly="true" />``<h:outputText />`

```
<p:selectOneMenu rendered="#{not empty bean.id && not bean.editMode}"
    value="#{bean.selectedId}">
    <f:selectItems value="#{bean.listItems}" var="item"
        itemLabel="#{item.name}" itemValue="#{item.id}"/>
</p:selectOneMenu>

<h:inputText rendered="#{bean.editMode}" value="{bean.selectedText}"
    disabled="true" readonly="true" /> 
```

# sql - SQL 按年龄范围和性别对患者进行分组

> ID：14525079
> 
> 赞同：2
> 
> 时间：2013-01-25T15:42:04.427
> 
> 标签：sql, count, group-by, case

表是 patient.birthdate 和 patient.sex 我无法创建新表。

大家好，我的查询试图按性别和年龄范围列出患者。我目前有这个。

```
SELECT CASE
     WHEN patient.birthdate  > '01-jan-1988'  THEN '1-25' 
     WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
     WHEN patient.birthdate > '01-jan-1938' THEN '50-75' 
     ELSE '75+' 
   END AS Age_Range, 
   COUNT(patient.sex) AS "M",
   (SELECT COUNT(patient.sex) FROM patient WHERE patient.sex = 'F' ) AS "F" 
FROM patient
WHERE patient.sex = 'M'
GROUP BY CASE 
       WHEN patient.birthdate > '01-jan-1988'  THEN '1-25' 
       WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
       WHEN patient.birthdate > '01-jan-1938' THEN '50-75'
       ELSE '75+' 
     END
     ORDER BY Age_Range; 
```

这是我的输出正确地对男性进行分组和计数，但对于女性，我在每个年龄范围（3538）中得到相同的数字，即女性患者的总数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:45:15.187

```
SELECT CASE
  WHEN patient.birthdate  > '01-jan-1988'  THEN '1-25' 
  WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
  WHEN patient.birthdate > '01-jan-1938' THEN '50-75' 
  ELSE '75+' 
END AS Age_Range, 
SUM(CASE WHEN patient.Sex = 'M' THEN 1 ELSE 0 END) AS Males,
SUM(CASE WHEN patient.Sex = 'F' THEN 1 ELSE 0 END) AS Females
FROM patient
GROUP BY CASE
  WHEN patient.birthdate  > '01-jan-1988'  THEN '1-25' 
  WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
  WHEN patient.birthdate > '01-jan-1938' THEN '50-75' 
  ELSE '75+' 
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:45:29.533

```
SELECT CASE
     WHEN patient.birthdate  > '01-jan-1988'  THEN '1-25' 
     WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
     WHEN patient.birthdate > '01-jan-1938' THEN '50-75' 
     ELSE '75+' 
   END AS Age_Range, 
   SUM(CASE WHEN patient.sex = 'M' THEN 1 ELSE 0 END) AS "M Count",  
   SUM(CASE WHEN patient.sex = 'F' THEN 1 ELSE 0 END) AS "F Count"
FROM patient
WHERE patient.sex = 'M'
GROUP BY CASE 
       WHEN patient.birthdate > '01-jan-1988' THEN '1-25' 
       WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
       WHEN patient.birthdate > '01-jan-1938' THEN '50-75'
       ELSE '75+' 
     END
     ORDER BY Age_Range; 
```

我也建议这样做（如果您的系统支持 CTE），我认为它更清晰（并且可能更快）

```
WITH NewAge AS
(
  SELECT CASE
       WHEN patient.birthdate > '01-jan-1988' THEN '1-25' 
       WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
       WHEN patient.birthdate > '01-jan-1938' THEN '50-75' 
       ELSE '75+' 
     END AS Age_Range, 
     CASE WHEN patient.sex = 'M' THEN 1 ELSE NULL END AS "M",  
     CASE WHEN patient.sex = 'F' THEN 1 ELSE NULL END AS "F"  
  FROM patient
)
SELECT Age_Range, COUNT(M) AS "M Count", COUNT(F) AS "F Count"
FROM NewAge
GROUP Age_Range
ORDER BY Age_Range; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:46:59.133

利用`CASE`

```
SELECT CASE
     WHEN patient.birthdate  > '01-jan-1988'  THEN '1-25' 
     WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
     WHEN patient.birthdate > '01-jan-1938' THEN '50-75' 
     ELSE '75+' 
     SUM(CASE WHEN patient.Sex = 'M' THEN 1 ELSE 0) AS M,
     SUM(CASE WHEN patient.Sex = 'F' THEN 1 ELSE 0) AS F
   END AS Age_Range, 
FROM patient
WHERE patient.sex = 'M'
GROUP BY CASE 
       WHEN patient.birthdate > '01-jan-1988'  THEN '1-25' 
       WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
       WHEN patient.birthdate > '01-jan-1938' THEN '50-75'
       ELSE '75+' 
     END
     ORDER BY Age_Range; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:47:12.603

```
SELECT CASE
     WHEN patient.birthdate  > '01-jan-1988'  THEN '1-25' 
     WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
     WHEN patient.birthdate > '01-jan-1938' THEN '50-75' 
     ELSE '75+' 
   END AS Age_Range, 
   COUNT(CASE WHEN patient.sex = 'M' THEN patient.sex END) AS "M Count",  
   COUNT(CASE WHEN patient.sex = 'F' THEN patient.sex END) AS "F Count"
FROM patient
GROUP BY CASE 
       WHEN patient.birthdate > '01-jan-1988'  THEN '1-25' 
       WHEN patient.birthdate > '01-jan-1963' THEN '25-50'
       WHEN patient.birthdate > '01-jan-1938' THEN '50-75'
       ELSE '75+' 
     END
     ORDER BY Age_Range; 
```

# c# - 以 byte[] 作为输入参数的 C# 的 zlib.net 代码示例

> ID：14525089
> 
> 赞同：0
> 
> 时间：2013-01-25T15:42:41.887
> 
> 标签：c#, vb6-migration

我花了 3 个小时搜索如何使用 Zlib.net.dll 解压缩字符串，但没有发现任何有用的东西。

由于我的字符串是由使用 zlib.dll 的旧 VB6 程序压缩的，所以我不想每次解压缩字符串时都使用文件访问。

问题是您需要知道压缩前 byte[] 的原始大小。或者您可以使用动态数组来解码数据。

代码在这里：

```
 private string ZlibNetDecompress(string iCompressData, uint OriginalSize)
    {
        byte[] todecode_byte = Convert.FromBase64String(iCompressData);
        byte[] lDecodeData = new byte[OriginalSize];
        string lTempoString = System.Text.Encoding.Unicode.GetString(todecode_byte);
        todecode_byte = System.Text.Encoding.Default.GetBytes(lTempoString);
        string lReVal = "";
        MemoryStream outStream = new MemoryStream();
        MemoryStream InStream = new MemoryStream(todecode_byte);
        zlib.ZOutputStream outZStream = new zlib.ZOutputStream(outStream);
        try
        {
            CopyStream(InStream, outZStream);
            lDecodeData = outStream.GetBuffer();
            lReVal = System.Text.Encoding.Default.GetString(lDecodeData);
        }

        finally
        {
            outZStream.Close();
            InStream.Close();
        }
        return lReVal;
    }

    private void CopyStream(System.IO.Stream input, System.IO.Stream output)
    {
        byte[] buffer = new byte[2000];
        int len;
        while ((len = input.Read(buffer, 0, 2000)) > 0)
        {
            output.Write(buffer, 0, len);
        }
        output.Flush();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:16:06.743

您可以使用框架中的 GZipStreamClass。

```
var data = new byte[resultSizeMax];
using (Stream ds = new DeflateStream(stream, CompressionMode.Decompress)) 
  for (var i=0; i< 1000; i+=ds.Read(data, i,1000-i); 
```

# visual-studio-2010 - 包生成器无法在 tibco spotfire 中添加 Oracle.Data.Access.dll

> ID：14525090
> 
> 赞同：2
> 
> 时间：2013-01-25T15:42:47.477
> 
> 标签：visual-studio-2010, tibco, tibco-rv, tibco-gi

我正在 Visual Studio 2010 中开发一个自定义包。这个包可以连接到 oracle DB（读取、写入一些数据）。对于此功能，我需要参考安装的 Oracle.Data.Access.dll（64 位）和 Oracle 客户端。我在`C:\oracle\odp.net\bin\4\`文件夹下找到它。当我开发控制台应用程序时，一切正常。但是当我尝试在包生成器中验证并保存我的扩展时，我收到了这个错误：

> 无法从文件 C:...\Oracle.Data.Access.dll 创建程序集。该文件不是有效的 .NET 程序集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:15:37.407

我找到了解决方案。为此目的仅使用 system.data.oracleclient 程序集。它与 tibco 包生成器和 tibco 播放器完美配合。

# php - 如何先用 vales 再用键对数组进行排序？

> ID：14525096
> 
> 赞同：-4
> 
> 时间：2013-01-25T15:43:00.640
> 
> 标签：php, sorting

正如标题所说。例如：

原来的

```
{18=>13, 0=>13, 27=>13, 9=>13, 19=>13, 12=>12, 21=>12, 31=>12, 4=>12, 22=>12} 
```

我希望它变成这样：

```
{0=>13, 9=>13, 18=>13, 19=>13, 27=>13, 4=>12, 12=>12, 21=>12, 22=>12, 31=>12} 
```

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:46:12.073

[http://php.net/manual/en/array.sorting.php](http://php.net/manual/en/array.sorting.php)

```
$array = //Your array value

asort($array);
ksort($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:01:18.140

试试看

```
$array = array(array_values($array),array_keys($array));
array_multisort($array[0], SORT_DESC, $array[1], SORT_ASC);
$sorted_array = array_combine($array[1],$array[0]); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-25T15:45:29.367

看看ksort

[http://php.net/manual/en/function.ksort.php](http://php.net/manual/en/function.ksort.php)

例如...

```
<?php
$fruits = array("d"=>"lemon", "a"=>"orange", "b"=>"banana", "c"=>"apple");
ksort($fruits);
foreach ($fruits as $key => $val) {
  echo "$key = $val\n";
}
?> 
```

**输出**

a = 橙色

b = 香蕉

c = 苹果

d = 柠檬

# android - 取消选中自定义 ListView 的第一个复选框时，LinearLayout 隐藏一次

> ID：14525097
> 
> 赞同：0
> 
> 时间：2013-01-25T15:43:03.420
> 
> 标签：android, android-layout, android-listview

我看到了这个问题[android how to hide linearlayout when no checkbox is check in listview](https://stackoverflow.com/questions/14469590/android-how-to-hide-linearlayout-when-no-checkbox-is-checked-in-listview) 我在每一行都有带有复选框的列表视图，我希望当至少有一个复选框被选中时，一个线性布局（包含两个按钮）可见并且没有复选框被选中我希望该 lineylayout 隐藏，

我提出了完全一样的问题，但它只适用于第一个复选框，我的意思是当我选中第一个复选框时它工作，然后如果我取消选中线性布局隐藏但如果我选中另一个复选框，线性布局仍然始终可见适配器

```
public class AdapterFavoriteFoods extends BaseAdapter {

    private ArrayList<Boolean> cb_status = new ArrayList<Boolean>();
    private static LayoutInflater inflater = null;
    private ArrayList<HashMap<String, String>> data;
    Activity activity;
    LinearLayout ll_CancelDone;
    private int checkedBoxs = 0;
    CheckBox[] allCheckBoxes;

    public AdapterFavoriteFoods(Activity activity,
            ArrayList<HashMap<String, String>> data, LinearLayout ll_CancelDone) {
        // TODO Auto-generated constructor stub
        this.activity = activity;
        this.data = data;
        this.ll_CancelDone = ll_CancelDone;
        inflater = (LayoutInflater) this.activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        for (int i = 0; i < data.size(); i++) {
            cb_status.add(false);
        }
        allCheckBoxes = new CheckBox[data.size()];
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return arg0;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View vi = convertView;
        if (vi == null)
            vi = inflater.inflate(R.layout.profile_list_item_checkbox, null);
        TextView tv_name = (TextView) vi
                .findViewById(R.id.tv_profile_list_item_checkbox_title);
        ImageView iv_image = (ImageView) vi
                .findViewById(R.id.iv_profile_list_item_checkbos_image);
        CheckBox cb_selected = (CheckBox) vi
                .findViewById(R.id.cb_profile_list_item_checkbox_checkbox);
        allCheckBoxes[position] = cb_selected;
        cb_selected.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                if (isChecked) {
                    cb_status.set(position, true);
                    checkedBoxs++;
                    if (ll_CancelDone.getVisibility() == View.GONE)
                        ll_CancelDone.setVisibility(View.VISIBLE);
                } else {
                    cb_status.set(position, false);
                    checkedBoxs--;
                    if (checkedBoxs == 0)
                        ll_CancelDone.setVisibility(View.GONE);
                }
            }
        });
        cb_selected.setChecked(cb_status.get(position));

        HashMap<String, String> hm = data.get(position);
        tv_name.setText(hm.get("name"));
        iv_image.setImageResource(Integer.parseInt(hm.get("image")));
        return vi;
    }
}

  [1]: https://stackoverflow.com/questions/14469590/android-how-to-hide-linearlayout-when-no-checkbox-is-checked-in-listview 
```

当我`Log.d("num", checkedBoxs+"");`在 oncheckchange 的 else 语句中执行此操作时，结果仍然为 1 ，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:05:45.987

这不是你应该保持状态的方式，最重要的是不要保持对 row 的引用`CheckBoxes`。试试这个：

```
//...
CheckBox cb_selected = (CheckBox) vi.findViewById(R.id.cb_profile_list_item_checkbox_checkbox);
cb_selected.setChecked(cb_status.get(position));
cb_selected.setOnCheckedChangeListener(new OnCheckedChangeListener() {

     @Override
     public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
          cb_status.set(position, isChecked);
          boolean status = false;
          for (Boolean b : cb_status) {
               if (b) {
                   status = true;
                   break;   
               }
          }  
          ll_CancelDone.setVisibility(status ? View.VISIBLE : View.GONE);
     }
}); 
```

# javascript - 静态 HTML 页面、客户端缓存和传递参数

> ID：14525098
> 
> 赞同：0
> 
> 时间：2013-01-25T15:43:13.553
> 
> 标签：javascript, html, asp.net-mvc, jquery-mobile, knockout.js

我正在构建一个相当大的移动应用程序，该应用程序当前构建在 jQuery Mobile 和 KnockoutJS 之上。我的第一个方法大量使用了单页应用程序设计，同时通过 Knockout 和 ajax 调用加载所有动态内容和数据。这工作正常，但是随着 jQuery Mobile 越来越多地加载到 DOM 中，维护和开发变得非常复杂。

我想知道是否可以迁移到更传统的、单独的 HTML 页面，这些页面完全是静态的，同时仍然通过 Knockout 和 ajax 加载数据。这将允许浏览器缓存应用程序的最大部分：HTML 页面。

问题：

如何在不创建禁止客户端浏览器缓存的唯一 URL 的情况下最好地在页面之间传递参数？**我希望浏览器积极缓存页面。**

我意识到我可以实现各种服务器端缓存，但这不是我的目标。`/Display/3`并且`/Display/5`是同一页。浏览器会将这些缓存为一个吗？

我想知道在哈希标记之后传递参数吗？`/Display#3`和`/Display#5`？在全局命名空间中通过 JavaScript 传递参数怎么样？

希望这里有一个标准的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:01:08.670

好的，很抱歉造成误解，但我认为你的方法走错了路。您不能那样使用 GET 参数，而且 JQueryMobile 在 AJAX 的 url 处理方面有点混乱。

通常，如果使用 AJAX 刷新内容，则不需要重新加载页面。所以你不需要缓存，因为页面已经存在，只有一些内容通过 AJAX 重新加载。但是 JQM 的单页方法不适用于动态创建的内容。您只能动态创建一个包含所有内容的页面，而 JQM 通过切换可见性来显示内容。然后 # 可用于在页面之间切换（# 不会强制重新加载，如用于侧面导航）。

您可以编写自己的加载函数调用按钮和链接（而不是使用 URL GET 参数）。通过将 JQuery 的 $.ajax 方法与 dataType "html"（而不是 json，默认）一起使用，您可以在其成功处理程序中进行内容刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:24:25.330

你可以试试 html5 sessionStorage/localStorage。如果 html5 是一个问题，那就是普通的旧 cookie。澄清一下，如果有多个 HTML 页面，每个页面都必须有自己的 URL。

# jquery - 从updatepanel中的下拉列表中获取更新的值到jquery中

> ID：14525101
> 
> 赞同：0
> 
> 时间：2013-01-25T15:43:29.463
> 
> 标签：jquery, asp.net, updatepanel

使用 ASP.Net/JQuery 我在更新面板中有一个下拉列表。当下拉列表的值发生更改并进行异步回发时，如何使用下拉列表的新值更新我的 jquery 函数中的变量？

我很难将下拉列表中的新值获取到 jquery 函数中，它只会获取先前选择的值。

在 pre_render 中，我们正在注册脚本。

谢谢

TR

```
<script type="text/javascript">

$(document).ready(function () {
var selectedText = $('#ddlTest option:selected').text();
   alert(selectedText);
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:55:40.943

在更改下拉列表后完成代码隐藏时，您需要使用[ScriptManager.RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerclientscriptblock.aspx)将一些 js 传递到客户端。通过这种方式，您可以将所需的任何值返回到客户端脚本。

看到一些代码会有所帮助:)

# php - 更改选定产品尺寸 Magento 的 SKU

> ID：14525102
> 
> 赞同：0
> 
> 时间：2013-01-25T15:43:32.247
> 
> 标签：php, magento

> **可能重复：**
> [在选择时将添加到购物车按钮更改为预购](https://stackoverflow.com/questions/14523059/change-add-to-cart-button-to-preorder-on-select)

我的脚本在选择每个产品的 sku 时遇到了一个小问题。

问题是，如果我添加 2 个下拉选项，jquery 将匹配相同的 id 两次。但是，如果我只有 1 个带有颜色或大小的下拉菜单，则 sku 映射显示正确。

我的问题是......我怎样才能获得第二种颜色的正确 sku？

```
 <?php
    $_product    = $this->getProduct();
    $_attributes = Mage::helper('core')->decorateArray($this->getAllowAttributes());
    ?>
    <?php if ($_product->isSaleable() && count($_attributes)):?>
    <dl>
        <?php foreach($_attributes as $_attribute): ?>
        <dt><label class="required"><em>*</em><?php echo $_attribute->getLabel() ?></label></dt>
        <dd<?php if ($_attribute->decoratedIsLast){?> class="last"<?php }?>>
            <div class="input-box">
                <select name="super_attribute[<?php echo $_attribute->getAttributeId() ?>]" id="attribute<?php echo $_attribute->getAttributeId() ?>" class="required-entry super-attribute-select"
                        onchange="return changeSku(<?php echo $_attribute->getAttributeId() ?>, this);">
                    <option><?php echo $this->__('Choose an Option...') ?></option>
                </select>
            </div>
        </dd>
        <?php endforeach; ?>
    </dl>
    <script type="text/javascript">
        var spConfig = new Product.Config(<?php echo $this->getJsonConfig() ?>);
    </script>

<div id="sku-container"></div>
<?php
$conf = Mage::getModel('catalog/product_type_configurable')->setProduct($_product);
$col = $conf->getUsedProductCollection()->addAttributeToSelect('*')->addFilterByRequiredOptions();

$productMap = array();
foreach($col as $simpleProduct){
    $productMap[$simpleProduct->getId()] = $simpleProduct->getAttributeText('sku');
}
?>

<script type="text/javascript">

document.observe("dom:loaded", function() {
  $("sku-container").update("<strong>SKU: </strong> ...");
});

function changeSku(confAttributeId, sel) {
    var productMap = <?php echo Mage::helper('core')->jsonEncode($productMap);?>;
    var selectedAttributeId = sel.options[sel.selectedIndex].value;
    if (selectedAttributeId) {
        var options = spConfig.config.attributes[confAttributeId].options;
        var productId = options.find(function (option) {return option.id == selectedAttributeId}).products[0]
        $("sku-container").update("<strong>SKU: </strong>" + productMap[productId]);
    } else {
        $("sku-container").update("<strong>SKU: </strong> ...");
    }
}
</script> 
```

spConfig 结果：`var spConfig = new Product.Config({"attributes":{"80":{"id":"80","code":"color","label":"Color","options":[{"id":"42","label":"Blue","price":"0","oldPrice":"0","products":["6873","6874"]},{"id":"46","label":"Green","price":"0","oldPrice":"0","products":["6881","6882","6883","6884","6885"]}]},"123":{"id":"123","code":"size","label":"Size","options":[{"id":"13","label":"4 UK","price":"0","oldPrice":"0","products":["6881"]},{"id":"12","label":"4.5 UK","price":"0","oldPrice":"0","products":["6873","6882"]},{"id":"11","label":"5 UK","price":"0","oldPrice":"0","products":["6874","6883"]},{"id":"10","label":"5.5 UK","price":"0","oldPrice":"0","products":["6884"]},{"id":"9","label":"6 UK","price":"0","oldPrice":"0","products":["6885"]}]}},"template":"#{price}\u00a0USD","basePrice":"489","oldPrice":"489","productId":"9844","chooseText":"Select\u0163i o op\tion...","taxConfig":{"includeTax":true,"showIncludeTax":true,"showBothPrices":false,"defaultTax":24,"currentTax":24,"inclTaxTitle":"Whit tax"}});`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:18:56.843

SCP 简单可配置产品解决的问题。由有机互联网制作。

[链接到扩展](http://www.magentocommerce.com/magento-connect/simple-configurable-products.html)

# java - 读取流式 Jsons Java 的标准方法

> ID：14525104
> 
> 赞同：0
> 
> 时间：2013-01-25T15:43:40.133
> 
> 标签：java, json, stream, jackson, gson

有一种 Java 标准方法可以在**不**使用 Gson、Jackson、...（其他 json 解析器）的情况下读取/写入 Json 流？，目前我有一个这样的文件：

文件.conf：

```
01={"string":"Test","number":25,"array":[1,2,3],"object":{"property":"Jack","subobj":{"arr":["php","java"],"numero":1}}}

02=other json object 

03=other json object 
```

我需要最**标准**的方式来获取对象（PO​​JO）。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:47:51.640

Java 没有用于解析 JSON 的标准类。这就是为什么有这么多库的原因（[json.org 列出了 23 个](http://json.org/)）。

当您真的想在没有外部库的情况下这样做时，您可以尝试使用正则表达式和/或字符串操作构建自己的解析器，但这将是一个糟糕的主意。真的，不要重新发明轮子并选择图书馆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:53:33.230

在普通的 java API 中没有任何实现。

另外，我不建议您创建您的实现（解析器并不那么容易实现）。

# unit-testing - ant：创建包含文件集中文件的所有目录的目录集

> ID：14525110
> 
> 赞同：0
> 
> 时间：2013-01-25T15:44:04.047
> 
> 标签：unit-testing, ant, python-2.7, dirset

上下文：一个目录，递归包含python `unittest.TestCase`：

```
projectdir/build.xml
projectdir/src/x.java
projectdir/distribute/p.jar
projectdir/tests/a/test1.py
projectdir/tests/a/test2.py
projectdir/tests/b/test1.py
projectdir/tests/c/test1.py
projectdir/tests/javaunittests/test2.java 
```

我想让蚂蚁打电话

```
python -m unittest discover -s a b c 
```

现在我试图将 a 转换为`fileset`包含`dirset`目录的？这个想法是运行 python 单元测试：

```
<apply command="python">
   <arg line="-m unittest"/>
   <arg value="-s"/>
   <dirset include="${python_unittests}"/>
</apply> 
```

其中`${python_unittests}" would refer to a`文件集`（但我不知道如何）是这样的：

```
<fileset id="python_unittests" include="**/*.py">
    <containsregexp expression="\(unittest.TestCase\)"/>
</fileset> 
```

还是我错了，有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:56:05.733

你想要所有带有测试用例的 python 文件，你不需要 dirset，使用：

```
<apply executable="python">
  <arg line="-m unittest"/>
  <arg value="-s"/>
  <fileset dir="projectdir" includes="**/*.py">
    <contains text="unittest.TestCase"/>
  </fileset>
</apply> 
```

**编辑**

在您发表评论后，刚刚检查了[python.org 上的 unittest 文档。](http://docs.python.org/dev/library/unittest.html)
据我了解，这应该足够了：

```
<property name="projectroot" location="foo/bar/yourprojectdir"/>
<exec executable="python" failonerror="true">
 <arg line="-m unittest discover ${projectroot} 'test*.py'"/>
</exec> 
```

作为 python 文档第 26.3.3 节。测试发现解释：

```
The -s, -p, and -t options can be passed in as positional arguments in that order. The following two command lines are equivalent:

    python -m unittest discover -s project_directory -p '*_test.py'<br>
    python -m unittest discover project_directory '*_test.py' 
```

我希望发现从 project_directory 开始递归地工作。

# intellij-idea - Glassfish 登录 Idea 12

> ID：14525111
> 
> 赞同：0
> 
> 时间：2013-01-25T15:44:05.887
> 
> 标签：intellij-idea

我正在使用带有 Idea 12 的 GF 3，并且如果不在文件系统中跟踪它们（Ubuntu），就无法看到 Glassfish 日志。

我根据屏幕截图激活了复选框，但我仍然只看到像这样的基本消息，但没有调试或 println 消息。

我错过了一步，还是误读了文档？

```
Admin Port: 4848  
Command start-domain executed successfully.
Connected to server 
```

![运行/调试配置](../Images/505acd65d88035e01bd732943724c5ed.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:48:48.297

您可以在 IDEA 中编辑应用程序服务器的运行/调试配置，以自动跟踪特定的日志文件（请参阅服务器运行/调试配置中的“日志”选项卡）。

还要确保您没有使用显示日志的选项卡右上角的“日志级别”组合框过滤日志。

# magento - Magento 1.7.0.2 收集和提取订单状态状态

> ID：14525120
> 
> 赞同：0
> 
> 时间：2013-01-25T15:44:36.700
> 
> 标签：magento, state, status, ecommerce-sales

我到处搜索，找不到有效的答案。

如何获取所有销售/订单状态_状态的集合。一个使用 ResourceModel 还是一个简单的 Model ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:57:29.027

你可以使用

```
$collection = Mage::getResourceModel( 'sales/order_status_collection' )->joinStates(); 
```

或者

```
$collection = Mage::getSingleton( 'sales/order_status' )->getCollection()->joinStates();
$collection = Mage::getModel( 'sales/order_status' )->getCollection()->joinStates(); 
```

它们都返回一个集合，但第一个直接返回集合，单例版本使用单例，因此两次为同一模型调用 getSingleton 只会创建一个类实例，然后创建一个新集合，而 getModel 版本将为两次调用创建两个不同的模型和然后以与 getSingelton 版本相同的方式创建集合。

因此，区别仅在于在返回集合之前创建了多少类的开销。

您无法直接使用“sales/order_status_state”，因为它的模型、资源模型和集合不存在 - 状态通过 joinStates() 函数加入状态集合。

# servicestack - 自动引导 ID

> ID：14525125
> 
> 赞同：3
> 
> 时间：2013-01-25T15:45:04.127
> 
> 标签：servicestack, ormlite-servicestack

使用 Guid Id 设置我的 poco 对象，它们似乎至少按预期存储......但我没有看到它为 Id 创建新的 Guid，除非手动完成。是否有设置它的技巧，以便 db.CreateDatabase() 将 id 字段设置为身份规范（mssql 服务器）或简单地使用 Guid.NewGuid() 自动填充它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:28:27.557

您有责任创建自己的指南

如果您的 id 是整数，那么您可以使用 [AutoIncrement] 属性并拥有更多选项，但您需要自行处理 Guid。

# php - 如何从用 PHP 编写的 Web 服务输出 JSONArray

> ID：14525126
> 
> 赞同：1
> 
> 时间：2013-01-25T15:45:04.073
> 
> 标签：php, json, web-services

我有用 PHP 编写的 web 服务，它从本地数据库读取并以 JSON 格式输出结果。

但是，我无法将其输出到 JSONArray。

这是php脚本

```
<?php
$username = "root";
$password = "";
$hostname = "localhost"; 

$response=array();

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
or die("Unable to connect to MySQL");

//select a database to work with
$selected = mysql_select_db("test",$dbhandle) 
or die("Could not select test");

//execute the SQL query and return records
$result = mysql_query("SELECT name, country FROM android");

$response["infos"] = array();   

while ($row = mysql_fetch_assoc($result)) {

    $info = array();
$info["name"]=$row["name"];
$info["country"]=$row["country"];

    print(json_encode($info));

}

//close the connection
mysql_close($dbhandle);
?> 
```

这是网络服务的输出

```
{"name":"develop","country":"mru"}{"name":"fufu","country":"tutu"}  {"name":"chikaka","country":"aceVentura"} 
```

但有人告诉我这不在 JSONArray 中。

我在这里想念什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T15:52:12.980

在您的示例中，您正在回显多个 JSON 字符串，因为您的输出代码在一个`while`循环中。JSON 字符串应该只有一个输出。下面的代码将为您提供 JSON 格式的二维数组。

```
$info = array();

while ($row = mysql_fetch_assoc($result)) 
{
     $arr = array();
     $arr["name"] = $row["name"];
     $arr["country"] = $row["country"];
     $info[] = $arr;
}

echo json_encode($info); 
```

# image - 图片与文字对齐

> ID：14525127
> 
> 赞同：0
> 
> 时间：2013-01-25T15:45:06.017
> 
> 标签：image, css, alignment

我想对齐 2 张用文本包裹的图像，但我还没有找到任何方法或任何可以提供帮助的帖子。

像这样的东西：

```
text text text text text  image1
text text text text text  image2
text text text text text  text t
text text text text text  text t 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:03:04.140

你可以把它放在一张桌子上，或者像 Wesley Murch 说的，你可以使用 CSS 的 float 和 clear 属性 ( `float:right;clear:right;`) 将它移动到页面的右侧，并防止文本出现在图像的右侧。

# .net - vb.net 通过普通的 Oledb 连接对象建立 mySQL 连接

> ID：14525129
> 
> 赞同：0
> 
> 时间：2013-01-25T15:45:11.020
> 
> 标签：.net, mysql, vb.net, connection, oledb

我正在尝试/我可以通过普通的 Oledb 连接对象和连接字符串建立数据库连接......？

我想保留我当前的数据库方法，已经花了很多时间在它们上面，它们都使用了 oledb 连接对象。我不希望“改变”它们，在需要时使用不同的连接对象，也不希望用不同的连接对象重新做所有这些。

我正在访问数据库和 mySQL 数据库之间进行交互。

```
Private db_cn As New Data.OleDb.OleDbConnection 
```

'访问连接字符串

```
cn_connection_string = "PROVIDER=MSDataShape;Provider=Microsoft.ACE.OLEDB.12.0;Jet OLEDB:Database Password=****;Data Source=" & DbPath

db_cn = New Data.OleDb.OleDbConnection(cn_connection_string) 
```

现在，到目前为止，我的 mySQL conn 字符串是这样的......

```
cn_connection_string = "Server=*****;Uid=*****;Pwd=******;Database=*****;" 
```

Oledb 报告说我没有指定“驱动程序”。如果我确实指定了在服务器资源管理器连接字符串中找到的驱动程序，则 oledb 报告它未注册。

我的服务器资源管理器确实成功连接到数据库。

任何帮助将不胜感激。

*编辑 - 28-01-2013

这是在服务器资源管理器属性中使用 priovder 时的确切错误。

“'.NET Framework Data Provider for MySQL' 提供程序未在本地计算机上注册。”

代码中的连接字符串是这样的：cn_connection_string = "provider=.NET Framework Data Provider for MySQL; *** *;Uid=* *** ;Pwd= *** *;Database=* *** ;"

服务器资源管理器中的连接字符串是这样的： server= *** *;User Id=* *** ;database= *** *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:21:40.953

您即将迁移，`Ms Access`to`mySQL`或其中之一，请注意这两个有不同的库。所以简短的回答是**否定的**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:08:04.637

在服务器资源管理器中，右键单击连接并选择属性。完整的连接字符串就在那里！

# node.js - 使用 Mongoose 时的 MongoDB 写入问题

> ID：14525131
> 
> 赞同：2
> 
> 时间：2013-01-25T15:45:17.900
> 
> 标签：node.js, mongodb, express, mongoose

我正在`mongoose`为我的 Express.js 应用程序使用该模块，每次启动应用程序时都会收到此错误：

```
========================================================================================
=  Please ensure that you set the default write concern for the database by setting    =
=   one of the options                                                                 =
=                                                                                      =
=     w: (value of > -1 or the string 'majority'), where < 1 means                     =
=        no write acknowlegement                                                       =
=     journal: true/false, wait for flush to journal before acknowlegement             =
=     fsync: true/false, wait for flush to file system before acknowlegement           =
=                                                                                      =
=  For backward compatibility safe is still supported and                              =
=   allows values of [true | false | {j:true} | {w:n, wtimeout:n} | {fsync:true}]      =
=   the default value is false which means the driver receives does not                =
=   return the information of the success/error of the insert/update/remove            =
=                                                                                      =
=   ex: new Db(new Server('localhost', 27017), {safe:false})                           =
=                                                                                      =
=   http://www.mongodb.org/display/DOCS/getLastError+Command                           =
=                                                                                      =
=  The default of no acknowlegement will change in the very near future                =
=                                                                                      =
=  This message will disappear when the default safe is set on the driver Db           =
======================================================================================== 
```

我不知道如何设置写关注。我正在像这样连接到我的数据库：

```
mongoose.connect('mongodb://localhost/reader') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T01:57:39.887

你想做的是：

```
mongoose.connect('mongodb://localhost/reader', {db:{safe:false}}) 
```

这将为您提供在 mongo 驱动程序中发生整个显式写入问题之前存在的默认行为。

更多信息在这里： http: [//mongoosejs.com/docs/api.html#index_Mongoose-createConnection](http://mongoosejs.com/docs/api.html#index_Mongoose-createConnection)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:34:13.533

那是因为`connect-mongodb`包裹。我将其更改为`connect-mongo`，这解决了问题！

# javascript - 在带有 RequireJS 的 TypeScript 中使用 JQuery 等

> ID：14525133
> 
> 赞同：2
> 
> 时间：2013-01-25T15:45:20.083
> 
> 标签：javascript, requirejs, typescript

> **可能重复：**
> [如何在 TypeScript 中通过 AMD 要求 jquery](https://stackoverflow.com/questions/12763684/how-to-require-jquery-via-amd-in-typescript)

我在`TypeScript`. 我用`RequireJS`. 一切正常，直到我需要`JQuery`...

这是我的文件结构：

![文件结构](../Images/4b9d8edf26959cef6c87099be33523f1.png)

如您所见，我在`jquery-1.8.d.ts`文件`modules`夹中有文件。的`.js`文件`jQuery`在`lib`文件夹内。当我使用配置文件导入模块时`RequireJS`：

```
/// <reference path="../modules/require.d.ts" />
/// <reference path="AppMain.ts" />

require.config({
    baseUrl: '../',
    paths: {
        jquery: 'lib/jquery-1.8.3'
    },
    shim: {
        jquery: {
            exports: '$'
        }
    },
    name: "app/AppMain",
    out: "../!built/Test.js",
    optimize: "none"
});

require(['jquery', 'app/AppMain',
],
    ($, main) => {
        var appMain = new main.AppMain();
        appMain.run();
    }); 
```

...然后它被导入到`JavaScript`. 如果我想在里面`TypeScript`怎么办？我需要使用`JQuery`,`JQueryStatic`和`JQueryPromise`, 在`.d.ts`文件中声明。

当我尝试简单地导入一个新模块时，我收到一个错误：

```
import JQueryExternal = module("../../../modules/jquery-1.8.d"); // error: The name does not exist in the currect scope. A module cannot be aliased to a non-module type
interface Test {
    MyMethod(): JQueryPromise; // here's a sample usage
} 
```

一开始我认为路径是错误的，但我试图将它移动到`classes`文件夹中，然后我以其他类的方式导入它。同样的错误：/

如何以我想要的方式`jQuery`使用？`TypeScript`可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:39:38.827

这是完全混乱的：

```
import JQueryExternal = module("../../../modules/jquery-1.8.d"); 
```

您不会将定义文件作为模块导入以便在 TypeScript 中使用它。无论您是使用 AMD/RequireJS 还是 Node.js 样式的模块来导入最终代码，您总是`d.ts`以相同的方式在文档顶部引用定义文件：

```
/// <reference path="YOUR-RELATIVE-PATH-HERE/jquery.d.ts" /> 
```

这不会使库在*JavaScript*中可用，但它会使定义在您编写*TypeScript*时可用。

我正在开发一个与您的范围相似的大型应用程序，它大量使用了 RequireJS 和 JQuery。我看不到将 JQuery 作为模块加载的任何好处。我只是导入引用（如上所述），并确保我的页面首先加载 JQuery（和任何其他库）：

```
<script type="text/javascript" src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="//ajax.aspnetcdn.com/ajax/jquery.ui/1.9.0/jquery-ui.min.js"></script>
... etc ...
<script type="text/javascript" src="/content/client/libs/require.js" data-main="/content/client/pe.framework"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:02:40.147

我在这两者配合得很好时遇到了一些麻烦，所以当我将 requireJS 与 JQuery 一起使用时，我使用了一个捆绑版本来加载它们。不过，我不知道打字稿，所以我不确定这会有多大帮助。

捆绑包链接：[https ://github.com/jrburke/require-jquery](https://github.com/jrburke/require-jquery)

# jquery - 将变量从 .each 循环传递到函数内的 if 语句

> ID：14525158
> 
> 赞同：1
> 
> 时间：2013-01-25T15:46:23.310
> 
> 标签：jquery, var

我是 Jquery/Javascript 编程的新手，所以请保持温柔；）

下面的函数检查是否选择了来自特定组的单选按钮。但是我无法得到：

> var checkifonechecked = true;

传递给 if 语句。它返回一个 Uncaught ReferenceError: checkifonechecked is not defined。我怎样才能通过这个变量？

```
function stap3() {
$('input[name=ostap2]').each(function() {
    if (this.checked) {
        var checkifonechecked = true;
    }
});
if(checkifonechecked){  
        $('#stap1, #stap2, #stap4, #stap5, #stap6, #stap7').hide();
        $('#stap3').show();
    } else {
        alert('neen'); }
} 
```

非常感谢任何帮助，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:51:26.597

您只需要检查实际检查了多少。真的不需要每个语句或变量

```
function stap3() {
   if($('input[name=ostap2]:checked').length){  
        $('#stap1, #stap2, #stap4, #stap5, #stap6, #stap7').hide();
        $('#stap3').show();
    } else {
        alert('neen'); 
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:50:20.407

您的问题是因为您`checkifonechecked`在匿名函数（又名 lambda）中声明变量。匿名函数结束后，变量不再存在，因此尝试在`stap3`函数中使用它将失败，并出现您所描述的“未捕获的 ReferenceError”。

您需要在保证执行的地方（例如`stap3`函数的开头）声明变量，如下所示：

```
function stap3() {
    // DECLARE your variable outside the anonymous function.
    var checkifonechecked = false;

    $('input[name=ostap2]').each(function()  // This is the anonymous function.
    {
        if (this.checked) {
            // ASSIGN a value to your variable.
            checkifonechecked = true;
        }
    });

    if(checkifonechecked)
    {  
        $('#stap1, #stap2, #stap4, #stap5, #stap6, #stap7').hide();
        $('#stap3').show();
    } 
    else
    {
        alert('neen'); 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:50:32.440

您正在检查在不同范围内声明的变量。您需要在更高的范围内声明变量：

```
function stap3() {
    var checkifonechecked = false;
    $('input[name=ostap2]').each(function () {
        if (this.checked) checkifonechecked = true;
    });

    if (checkifonechecked) {
        $('#stap1, #stap2, #stap4, #stap5, #stap6, #stap7').hide();
        $('#stap3').show();
    } else {
        alert('neen');
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T15:52:22.577

问题是checkifonechecked的范围，需要移到stap3函数

```
function stap3() {
    var checkifonechecked = false;
    $('input[name=ostap2]').each(function () {
        if (this.checked) {
            checkifonechecked = true;
        }
    });

    if (checkifonechecked) {
        $('#stap1, #stap2, #stap4, #stap5, #stap6, #stap7').hide();
        $('#stap3').show();
    } else {
        alert('neen');
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T15:54:31.810

您能否发布 HTML 部分（包含表单的部分），另外，如果您将变量定义为全局变量，则不要重复 (var checkifonechecked = true) 只需使用 (checkifonechecked = true)。

现在，为了节省资源，一旦找到选定的复选框，就中断循环，因为只有其中一个可以被选中，如果找到选中的复选框，您不需要查看其他复选框。

# node.js - node.js 与 mongoose 中的异步调用

> ID：14525159
> 
> 赞同：0
> 
> 时间：2013-01-25T15:46:23.477
> 
> 标签：node.js, mongoose

我有一个使用 mongoose 连接到 mongodb 的 node.js 应用程序；我需要选择所有插入的文档，我遇到了异步问题。

我制作了一个具有以下功能的模型：

```
exports.listItems=function() {
    Ticket.find({}, function(err,tkts) {
            console.log(tkts);
            return tkts;
    });
} 
```

我正确地看到了“tkts”的值，但是当我从以下位置调用它时：

```
exports.list = function(req,res) {
    var items=db.listItems();
    console.log("Items:"+items);
    res.render('list', { title: title, items:items });
} 
```

在 app.js 中定义为：

```
app.get('/list', routes.list); 
```

items 未定义（我认为是因为 db.list() 的非异步定义）。

我做错了什么，如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:50:39.847

您需要更恰当地使用回调。

更传统的`listItems`功能是

```
exports.listItems = function(done) {
    Ticket.find({}, done);
} 
```

然后，在 中`list`，您可以执行以下操作：

```
exports.list = function(req,res) {
    db.listItems(function(err,items){
        console.log("Items:"+items);
        res.render('list', { title: title, items:items });
    });
} 
```

由于 Node.JS 的**异步**特性，您应该始终在函数中传递（并期望）回调。这样您就可以在执行异步操作时推迟执行。

Also: be sure to check out [**async**](https://github.com/caolan/async), its an insanely good and easy-to-use library, that will simplify complex async scenarios in a breeze.

# firefox - Firefox 什么时候会有 ICE 支持

> ID：14525162
> 
> 赞同：1
> 
> 时间：2013-01-25T15:46:27.073
> 
> 标签：firefox, webrtc, ice

有没有人知道需要多少时间或在哪个版本的 Firefox 中，是否会完全支持类似于 chrome 的 ICE？

我也很想了解关于歌剧的信息，关于它对 webRTC 的支持。

我用谷歌搜索过它，但看起来与 ICE 和 firefox 没有任何关系。（如果我错了请纠正我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:54:33.803

好问题。我想没有人真正知道，但考虑到最新的 Nightly 版本中提供了支持，Firefox 的常规版本可能会在未来 3-6 个月内获得支持。

我感觉所有的浏览器制造商都希望在 2013 年底之前实现对 WebRTC 的全面支持（希望是统一的）。

# php - 使用 php 从 mysql db 获取分类帐报告

> ID：14525166
> 
> 赞同：0
> 
> 时间：2013-01-25T15:46:38.097
> 
> 标签：php, mysql, vba

嘿，我对 php/mysql 编程比较陌生。我正在将我们的数据库从 Access 转移到 mysql，我在 vba 方面比较了解。

我的问题是我正在保存个人现金分类账的记录。事务存储在结构如下的数据库中：

**tblclientpc事务**

```
transactionid
clientid -fk
date
description
depositamount
withdrawlamount 
```

我需要做的是为特定时间范围生成一个分类帐，并按时间顺序显示信息，并有另一个字段显示该点的余额。又名

> 日期| 客户ID | 描述 | 存款金额 | 提款金额 | 运行平衡

在 access/vba 中，我使用 dsum() 函数来获取特定行的值，不知道如何完成这是 php.ini 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:50:22.443

你可以在 MySql 中做这样的事情来获取你的报告数据：

```
SELECT `date`,
       `clientid`,
       `description`,
       `depositamount`,
       `withdrawlamount`,
       (@rt:=@rt + `depositamount` - `withdrawlamount`) AS runningbalance
FROM `transactions`, (SELECT @rt:=0) rt
WHERE `date` < CURDATE() AND
      `clientid` = 1
ORDER BY `date` 
```

`CURDATE()`随您的报告日期更改。

现在，假设您的表中有以下数据：

```
transactionid clientid date       description depositamount withdrawlamount
---------------------------------------------------------------------------
1             1        2013-01-01 NULL               100.00            0.00
2             1        2013-01-05 NULL                50.00           20.00
3             1        2013-01-07 NULL                 0.00           30.00
4             1        2013-01-15 NULL               200.00            0.00
5             1        2013-01-20 NULL                 0.00           50.00 
```

这将是你的输出：

```
date       clientid description depositamount withdrawlamount runningtotal
--------------------------------------------------------------------------
2013-01-01 1        NULL               100.00            0.00       100.00
2013-01-05 1        NULL                50.00           20.00       130.00
2013-01-07 1        NULL                 0.00           30.00       100.00
2013-01-15 1        NULL               200.00            0.00       300.00
2013-01-20 1        NULL                 0.00           50.00       250.00 
```

然后，您可以像这样在 php 脚本中使用查询：

```
date_default_timezone_set('America/New_York');
$client_id = 1;
$report_date = date('Y-m-d');

$db = new PDO('mysql:host=localhost;dbname=yourdbname;charset=UTF-8', 'user', 'password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$query = $db->prepare("
    SELECT `date`,
           `clientid`,
           `description`,
           `depositamount`,
           `withdrawlamount`,
           (@rt:=@rt + `depositamount` - `withdrawlamount`) AS runningbalance
    FROM `transactions`, (SELECT @rt:=0) rt
    WHERE `date`     < :report_date AND
          `clientid` = :client_id
    ORDER BY `date`");

$query->execute(array(':report_date' => $report_date, ':client_id' => $client_id));
$rows = $query->fetchAll(PDO::FETCH_ASSOC);

//your code to render the report goes here 
```

为简洁起见，将跳过所有错误处理和检查。

# java - 在 Java 中扩展泛型类型

> ID：14525174
> 
> 赞同：3
> 
> 时间：2013-01-25T15:47:08.193
> 
> 标签：java, generics, code-injection

在Java中是否可以让一个类扩展一个泛型类型，以便您可以将一个方法注入到通过您的代码传递的任何类中？（或者有没有其他方法可以用 Java 将方法注入或覆盖到现有类中？）

我的意思是“扩展通用类型”是这样的（类“T扩展GameObject”属于游戏，可能不会更改并且未知，因为在运行时加载到游戏中（从其他mods））：

```
class GameObject {
    void moveForward(float amount) {
        this.camera.z += amount;
    }
}

class Extender<T extends GameObject> extends T {
    void onTick(float time) {
        this.camera.z -= amount;
    }
} 
```

onTick 由 GameEngine 调用，通过这种方式，我可以将每个现有的游戏对象替换为在每个刻度上向后移动的版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T15:49:42.987

不可以。您不能扩展泛型超类型。您可以扩展使用泛型类型的类（例如`public class MyClass<T> extends TheirClass<T>`），但不能扩展纯泛型类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:09:19.910

在我看来，您可以找到解决方案，而不是在语言的特性中，而是在某些设计模式中，如[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)或[模板方法模式](http://en.wikipedia.org/wiki/Template_method)。

如果行为是在运行时确定的，您可以查看[行为模式](http://en.wikipedia.org/wiki/Behavioral_pattern)。

# ruby-on-rails - AJAX 调用未渲染我的部分 rails 3

> ID：14525175
> 
> 赞同：1
> 
> 时间：2013-01-25T15:47:10.840
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我试图让 Ajax 调用在 Rails 中工作，不太确定我做错了什么

所以在我的索引中，我有一个调用 api 然后将结果返回到结果路径的表单。所以我想做的是让结果呈现在索引页面上

到目前为止我所拥有的是

控制器

```
def index

end

def results
 results = contact_search(params[:search])
 @results = results
end 
```

指数

```
<div class="container">
 <div class="row">
  <div class="span6 offset3">
   <h2>Search for a contact</h2>
    <%= form_tag  results_path,  :method => "get", :remote => true do %>
    <%= text_field_tag 'search', nil, :placeholder => "Enter Email Address here...." %>
    <%= submit_tag 'Search' , :id => "submitForm" %>
   <% end %>
  </div>
 </div>
</div>

 <div class="container">
  <div class="row">
<div class="span6 offset3">
 <div class="cResults">

     </div>
    </div>
  </div>
 </div> 
```

部分 _contactResults.html.erb

```
<h1>The Results</h1>
 <%= @results["contactInfo"]["familyName"] %><br>
 <img src= <%= @results["photos"].first["url"] %> /> 
```

索引.js.erb

```
$('.cResults').html("<%= escape_javascript(render partial: 'contactResults') %>"); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:59:31.060

您的 javascript 文件应命名为“计算”结果的操作：

```
# in results.js.erb, not index.js.erb
$('.cResults').html("<%= escape_javascript(render partial: 'contactResults') %>"); 
```

如果您需要为控制器的操作执行 Javascript，您可以将文件命名为操作，`.js.erb`而不是 common `.html.erb`。当控制器收到此操作的请求时，将执行此文件，解释为 JS。

# javascript - 是否有任何将 json 转换为 url 参数的本机函数？

> ID：14525178
> 
> 赞同：76
> 
> 时间：2013-01-25T15:47:17.913
> 
> 标签：javascript, json

我需要将 json 对象转换为 url 形式，例如：“parameter=12&asd=1”

我完成了这个：

```
 var data = {
            'action':'actualiza_resultado',
            'postID': 1,
            'gl': 2,
            'gl2' : 3
        };

        var string_=JSON.stringify(data);

        string_=string_.replace(/{/g, "");
        string_=string_.replace(/}/g, "");
        string_=string_.replace(/:/g, "=")
        string_=string_.replace(/,/g, "&");
        string_=string_.replace(/"/g, ""); 
```

但我想知道javascript或JSON对象中是否有任何函数可以做到这一点？

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-01-25T15:53:10.137

jQuery 提供[`param`](http://api.jquery.com/jQuery.param/)的正是这样做的。如果您不使用 jquery，请查看[源代码](https://github.com/jquery/jquery/blob/master/src/serialize.js#L58)。

基本上，它是这样的：

```
url = Object.keys(data).map(function(k) {
    return encodeURIComponent(k) + '=' + encodeURIComponent(data[k])
}).join('&') 
```

**2019 年更新**[`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)：现在有一个用于此类事物的内置对象：

```
let myParams = {'foo': 'hi there', 'bar': '???'};

let u = new URLSearchParams(myParams).toString();

console.log(u);
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-10-27T14:54:03.573

使用 ES6 语法：

```
var data = {
  'action':'actualiza_resultado',
  'postID': 1,
  'gl': 2,
  'gl2' : 3
};

let urlParameters = Object.entries(data).map(e => e.join('=')).join('&');

console.log(urlParameters);
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-03-02T13:09:56.580

我做了一个支持嵌套对象和数组的实现，即

```
var data = {
    users: [
    {
      "name": "jeff",
      "tasks": [
        "Do one thing",
        "Do second thing"
      ]
    },
    {
      "name": "rick",
      "tasks": [
        "Never gonna give you up",
        "Never gonna let you down"
      ]
    }
  ]
} 
```

将会：

```
users[0][name]=jeff&users[0][tasks][0]=Do%20one%20thing&users[0][tasks][1]=Do%20second%20thing&users[1][name]=rick&users[1][tasks][0]=Never%20gonna%20give%20you%20up&users[1][tasks][1]=Never%20gonna%20let%20you%20down 
```

所以，这里是实现：

```
var isObj = function(a) {
  if ((!!a) && (a.constructor === Object)) {
    return true;
  }
  return false;
};
var _st = function(z, g) {
  return "" + (g != "" ? "[" : "") + z + (g != "" ? "]" : "");
};
var fromObject = function(params, skipobjects, prefix) {
  if (skipobjects === void 0) {
    skipobjects = false;
  }
  if (prefix === void 0) {
    prefix = "";
  }
  var result = "";
  if (typeof(params) != "object") {
    return prefix + "=" + encodeURIComponent(params) + "&";
  }
  for (var param in params) {
    var c = "" + prefix + _st(param, prefix);
    if (isObj(params[param]) && !skipobjects) {
      result += fromObject(params[param], false, "" + c);
    } else if (Array.isArray(params[param]) && !skipobjects) {
      params[param].forEach(function(item, ind) {
        result += fromObject(item, false, c + "[" + ind + "]");
      });
    } else {
      result += c + "=" + encodeURIComponent(params[param]) + "&";
    }
  }
  return result;
};

var data = {
  users: [{
      "name": "jeff",
      "tasks": [
        "Do one thing",
        "Do second thing"
      ]
    },
    {
      "name": "rick",
      "tasks": [
        "Never gonna give you up",
        "Never gonna let you down"
      ]
    }
  ]
}

document.write(fromObject(data));
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-25T15:49:18.080

您不需要序列化此对象文字。

更好的方法是这样的：

```
function getAsUriParameters(data) {
   var url = '';
   for (var prop in data) {
      url += encodeURIComponent(prop) + '=' + 
          encodeURIComponent(data[prop]) + '&';
   }
   return url.substring(0, url.length - 1)
}
getAsUriParameters(data); //"action=actualiza_resultado&postID=1&gl=2&gl2=3" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-01T16:29:12.987

我发现在 ES6 中看起来很漂亮的东西：

```
function urlfy(obj) {
    return Object
        .keys(obj)
        .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(obj[k])}`)
        .join('&');
} 
```

稍后更新（同样的事情，也许更干净一些）：

```
const urlfy = obj => Object
    .keys(obj)
    .map(k => encodeURIComponent(k) + '=' + encodeURIComponent(obj[k]))
    .join('&'); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-14T03:16:36.740

就像@georg 所说，您可以将[JQuery.param](http://api.jquery.com/jQuery.param/)用于平面对象。

如果您需要处理复杂的对象，您可以使用[JsonUri](http://guidj.github.io/jsonuri-py/)，这是一个执行此操作的 python 包。它也有 JavaScript 库

*免责声明：我是 JSONURI 的作者*

**编辑**：我后来了解到，您也可以只对您的有效负载进行 base64 编码 - 大多数语言都支持 base64 编码/解码

例子

```
x = {name: 'Petter', age: 47, places: ['Mozambique', 'Zimbabwe']}
stringRep = JSON.stringify(x)
encoded = window.btoa(stringRep) 
```

给你`eyJuYW1lIjoiUGV0dGVyIiwiYWdlIjo0NywicGxhY2VzIjpbIk1vemFtYmlxdWUiLCJaaW1iYWJ3ZSJdfQ==`，你可以用它作为一个uri参数

```
decoded = window.atob(encoded)
originalX = JSON.parse(decoded) 
```

不用说，它有自己的警告

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-25T15:51:41.720

> 但我想知道javascript中是否有任何功能

核心中没有预先写好的东西。

> 或json来做到这一点？

JSON 是一种数据格式。它根本没有功能。

* * *

这是一个相对微不足道的问题，至少对于平面数据结构来说是这样。

不要将对象编码为 JSON，然后：

```
function obj_to_query(obj) {
    var parts = [];
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
            parts.push(encodeURIComponent(key) + '=' + encodeURIComponent(obj[key]));
        }
    }
    return "?" + parts.join('&');
}

alert(obj_to_query({
    'action': 'actualiza_resultado',
    'postID': 1,
    'gl': 2,
    'gl2': 3
})); 
```

没有标准的方法来编码复杂的数据结构（例如嵌套对象或数组）。扩展它以模拟 PHP 方法（在字段名称中使用方括号）或类似方法并不难。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-09-06T15:14:37.393

这一个通过将数组更改为多个来处理`name`数组`name[]`

```
function getAsUriParameters (data) {
  return Object.keys(data).map(function (k) {
    if (_.isArray(data[k])) {
      var keyE = encodeURIComponent(k + '[]');
      return data[k].map(function (subData) {
        return keyE + '=' + encodeURIComponent(subData);
      }).join('&');
    } else {
      return encodeURIComponent(k) + '=' + encodeURIComponent(data[k]);
    }
  }).join('&');
}; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-01-13T21:36:42.163

Vanilla JavaScript 的最佳解决方案：

```
var params = Object.keys(data)
  .filter(function (key) {
    return data[key] ? true : false
  })
  .map(function (key) {
    return encodeURIComponent(key) + '=' + encodeURIComponent(data[key])
  })
  .join('&');
```

PS：这里使用过滤器来去除空或未定义的参数。它使网址看起来更干净。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-02T17:58:01.977

上面的自定义代码只处理平面数据。并且 JQuery 在本机反应中不可用。所以这里有一个 js 解决方案，它可以在 react native 中处理多级对象和数组。

```
function formurlencoded(data) {
const opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

let sorted = Boolean(opts.sorted),
    skipIndex = Boolean(opts.skipIndex),
    ignorenull = Boolean(opts.ignorenull),
    encode = function encode(value) {
        return String(value).replace(/(?:[\0-\x1F"-&\+-\}\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g, encodeURIComponent).replace(/ /g, '+').replace(/[!'()~\*]/g, function (ch) {
            return '%' + ch.charCodeAt().toString(16).slice(-2).toUpperCase();
        });
    },
    keys = function keys(obj) {
        const keyarr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Object.keys(obj);
        return sorted ? keyarr.sort() : keyarr;
    },
    filterjoin = function filterjoin(arr) {
        return arr.filter(function (e) {
            return e;
        }).join('&');
    },
    objnest = function objnest(name, obj) {
        return filterjoin(keys(obj).map(function (key) {
            return nest(name + '[' + key + ']', obj[key]);
        }));
    },
    arrnest = function arrnest(name, arr) {
        return arr.length ? filterjoin(arr.map(function (elem, index) {
            return skipIndex ? nest(name + '[]', elem) : nest(name + '[' + index + ']', elem);
        })) : encode(name + '[]');
    },
    nest = function nest(name, value) {
        const type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : typeof value === 'undefined' ? 'undefined' : typeof(value);
        let f = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;

        if (value === f) f = ignorenull ? f : encode(name) + '=' + f; else if (/string|number|boolean/.test(type)) f = encode(name) + '=' + encode(value); else if (Array.isArray(value)) f = arrnest(name, value); else if (type === 'object') f = objnest(name, value);

        return f;
    };

return data && filterjoin(keys(data).map(function (key) {
    return nest(key, data[key]);
})); 
```

}

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-16T09:01:06.770

Make a utility **if you have nodejs**

```
const querystring = require('querystring')

export function makeQueryString(params): string {
  return querystring.stringify(params)
} 
```

import example

```
import { makeQueryString } from '~/utils' 
```

example of use

```
 makeQueryString({
    ...query,
    page
  }) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-13T22:23:28.060

基于georg的回答，但也在`?`字符串之前添加并使用ES6：

```
 const query = !params ? '': Object.keys(params).map((k, idx) => {
    let prefix = '';
    if (idx === 0) {
      prefix = '?';
    }
    return prefix + encodeURIComponent(k) + '=' + encodeURIComponent(params[k]);
  }).join('&'); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-31T14:05:26.093

由于大多数答案仅将平面对象转换为查询参数，我想分享一下我的。

这个函数可以处理平面对象，以及嵌套数组/对象，同时只使用普通 JS。

```
 function incapsulateInBrackets(key)
        {
            return '[' + key + ']';
        }

        function encode(object, isSubEncode=false, prefix = '')
        {
            let parts = Object.keys(object).map( (key) => {

                let encodedParts = [];

                if(Array.isArray(object[key]))
                {
                    object[key].map(function(innerKey, index){

                        encodedParts.push( encode(object[key][index], true, prefix + key + incapsulateInBrackets(index)));

                    });
                }
                else if(object[key] instanceof Object)
                {
                    Object.keys(object[key]).map( (innerKey) => {

                        if(Array.isArray(object[key][innerKey]))
                        {
                            encodedParts.push( encode(object[key][index], true, prefix + incapsulateInBrackets(key) + incapsulateInBrackets(innerKey)) );
                        }
                        else
                        {
                            encodedParts.push( prefix + incapsulateInBrackets(key) + incapsulateInBrackets(innerKey) + '=' +  object[key][innerKey] );
                        }

                    });
                }
                else
                {
                    if(isSubEncode)
                    {
                        encodedParts.push( prefix + incapsulateInBrackets(key) + '=' + object[key] );
                    }
                    else
                    {
                        encodedParts.push( key + '=' + object[key] );
                    }
                }

                return encodedParts.join('&');

            });

            return parts.join('&');
        } 
```

# c# - 无法创建常量值。只有原始类型

> ID：14525182
> 
> 赞同：10
> 
> 时间：2013-01-25T15:47:32.543
> 
> 标签：c#, linq, entity-framework

```
dbEntities db = new dbEntities();
foreach (ttCategory c in db.ttCategories)
{
    var tags=(from t in db.ttproduktes where t.ttCategories.Contains(c) select t.ttTags);
    foreach (ttTag t in tags)  // here it says:
                               // Unable to create a constant value - only primitive types
    {
       t.ToString();
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-25T15:52:24.547

在 linq-to-entities 中，不能将 Contains 与类一起使用，只能将其与原始类型一起使用，因此需要更改：

```
where t.ttCategories.Contains(c) 
```

到

```
 where t.ttCategories.Any(x => x.UniqueProperty == c.UniqueProperty) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:54:02.480

```
var tags = (from t in db.ttproduktes
            where t.ttCategories.Any(q => q.Id == c.Id)
            select t.ttTags); 
```

# php - uploadify 不上传到服务器

> ID：14525184
> 
> 赞同：0
> 
> 时间：2013-01-25T15:47:37.347
> 
> 标签：php, upload, uploadify

它没有显示错误，并且看起来像在工作。但它不会将图像上传到服务器。

在本地主机上工作的相同代码。

阅读有关此问题的内容，但仍然没有解决方案：

同样的问题：

[http://www.uploadify.com/forums/discussion/6974/upload-ok-but-file-not-in-target-folder/p1](http://www.uploadify.com/forums/discussion/6974/upload-ok-but-file-not-in-target-folder/p1)

[http://www.uploadify.com/forum/#/discussion/5527/upload-does-not-work-no-errors/p1](http://www.uploadify.com/forum/#/discussion/5527/upload-does-not-work-no-errors/p1)

查询：

```
$("#fileUpload2").fileUpload({
    'uploader': 'uploadify/uploader.swf',
    'cancelImg': 'uploadify/cancel.png',
    'script': 'uploadify/upload.php',
    'folder': '/files',
    'multi': true,
    'buttonText': 'start upl',
    'checkScript': 'uploadify/check.php',
    'displayData': 'speed',
    'simUploadLimit': 2,
    'onComplete':function(event, ID, fileObj, response, data){
        foto=foto+fileObj.name;

        }
}); 
```

上传.php

```
<?php
if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $_GET['folder'] . '/';
    $targetFile =  str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];
    $ff= $_FILES['Filedata']['name'];
    echo $ff;
    // Uncomment the following line if you want to make the directory if it doesn't exist
    // mkdir(str_replace('//','/',$targetPath), 0755, true);

    move_uploaded_file($tempFile,$targetFile);
}

echo '1';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:51:16.333

你在那里有无效的错误处理。检查非空 $_FILES**不是**检查成功上传的正确方法。失败的上传仍会将数据填充到 $_FILES 中。至少，你应该有

```
if ($_FILES['Filedata']['error'] !== UPLOAD_ERR_OK) {
   die("Upload failed with error code " . $_FILES['Filedata']['error'];
} 
```

然后看看你得到什么错误代码：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

您还在 move() 调用中直接使用用户提供的文件名，从而允许恶意用户在您的服务器上的任何地方乱写他们上传的文件**，**从而让您敞开心扉接受完整的系统接管。在您花时间学习基本的 PHP（和 Web）安全性之前，不要将此代码放到实时网站上。

# regex - sed-检测精确长度和乘词

> ID：14525190
> 
> 赞同：-2
> 
> 时间：2013-01-25T15:47:58.460
> 
> 标签：regex, sed

单词是没有空格和\n 的字符序列。在 sed 中编写一个脚本，该脚本将文件名作为参数，该脚本输出文件中恰好包含 4 个单词的行。此外，与正则表达式匹配的每一行，它的第一个单词都必须相乘。

例如 F1 包含：

```
Hello hi 123
if a equals b
you
one abc two three four
dany uri four 123 
```

如果我们输入 P9.4 F1 脚本文件名为 P9.4 ，输出将是

```
if if a equals b    
dany dany uri four 123 
```

我实际上已经想到了一个解决方案：

```
sed 's/\(^([ ]*[^ ]\+[ ]\+)[^ ]\+[ ]\+[^ ]\+[ ]\+[^ ]\+[ ]*$\)/\2&/' $1 >>tmp 
```

我收到一个错误：

```
sed: -e expression #1, char 62: invalid reference \2 on `s' command's RHS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:56:12.973

```
$ sed -nr '/^(\w+)\s+\1\s+(\w+\s*){3}$/p' file
if if a equals b
dany dany uri four 123 
```

# android - 位置未自动更新

> ID：14525192
> 
> 赞同：0
> 
> 时间：2013-01-25T15:48:08.117
> 
> 标签：android, android-location

我在我的 Fragment 类中实现 LocationListener 并使用以下代码来跟踪位置更新，尽管它没有得到应有的频繁更新。我需要在 Google Navigator 等地图上显示用户位置。

寻找最佳供应商

```
mLocationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);
Criteria criteria = new Criteria();

// if I uncomment the next line, it takes too long to get the location
// criteria.setAccuracy(Criteria.ACCURACY_FINE);
// if I leave the line above commented, the app seems to receiving location from triangulation

mProvider = mLocationManager.getBestProvider(criteria, false);
Location location = mLocationManager.getLastKnowLocation(mProvider); 
```

LocationChanged 事件

```
@Override
public void onLocationChanged(Location location) {
    LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());

    setMapCameraPosition(latLng);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:00:29.070

您只要求最后一个已知位置，它可能存在也可能不存在。为了使用 LocationListener，您必须调用其中一种[`requestLocationUpdates()`](https://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)方法。

```
mLocationManager.requestLocationUpdates(mProvider, 0, 0, mLocationListener); 
```

# rest - 具有许多输入参数（包括集合）的 REST API 设计

> ID：14525194
> 
> 赞同：0
> 
> 时间：2013-01-25T15:48:09.333
> 
> 标签：rest

我需要设计和实现一个 REST API，用户需要在其中传递许多输入参数。在这些输入参数中，很少是整数的集合，其中很少是日期字符串等。获得所有这些参数后，我需要在响应中返回唯一的 id。为了实现这个 API，我应该使用什么方法类型（PUT、POST 或 GET）？如何将所有这些参数传递给 API？我不希望用户将输入参数列表格式化为 XML 或 JSON 并作为请求正文发布。

如果有人能就这个话题提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:18:31.933

`POST`是为了创造新的资源。

`PUT`用于更新现有资源。调用应该是幂等的`PUT`，即两次发出相同的请求将不会产生副作用。

要全面了解 RESTful 服务的工作原理，[请阅读本文](http://tomayko.com/writings/rest-to-my-wife)。

是的，如果您希望您的用户提交一组复杂的参数，JSON/XML 当然是最好的方法。

# c++ - QThread相关问题

> ID：14525196
> 
> 赞同：0
> 
> 时间：2013-01-25T15:48:16.830
> 
> 标签：c++, qt, qthread

我有一些关于 QThread 的问题和疑问。1) 当我使用 QThread->quit() 时，finished() 信号不会发出。 2) 构建和完成线程执行的正确方法是什么？

1）完成的信号代码——头文件。

```
#ifndef MYTHREAD_H
#define MYTHREAD_H

#include <QThread>

class MyThread: public QThread
{
     Q_OBJECT
public:
    explicit MyThread(QObject *parent = 0);

signals:

public slots:
    void finished();

protected:
    void run();

};

#endif // MYTHREAD_H 
```

1) CPP 文件。

```
#include "MyThread.h"

MyThread::MyThread(QObject *parent) :
    QThread(parent)
{
}

void MyThread::finished()
{
    //never gets called...
    qDebug() << "Finished.";
}

void MyThread::run()
{
    connect(this, SIGNAL(finished()), this, SLOT(finished()), Qt::DirectConnection);
    this->exec();
} 
```

我正在用这个构建它：

```
MyThread *mThread = new MyThread(this); //What does parent do/mean ?
mThread->start();
Sleep(5000); //Windows.
mThread->quit(); //Finish thread. 
```

我什至不明白 Qt::DirectConnection 做了什么，我已经阅读了文档，但我真的不明白如何以及何时使用 Direct/Queued 连接。

刚才想到的另一个问题。

1）我怎样才能完成和清理自己的线程？（我的意思是，线程应该自行退出并进行清理。）

2）如何正确创建/运行新线程的原因以及为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:34:02.650

Don't sub-class `QThread`. Instead, create a worker object (that inherits `QObject`), create a `QThread`, then call the `moveToThread()` method on your worker object.

```
class Worker : public QObject
{
  Q_OBJECT
public:
  Worker( QObject * parent = 0 )
    : QObject( parent )
  {
    connect( this, SIGNAL(done()), \
             this, SLOT(deleteLater())
            );
  }

public slots:
  void doWork() { // work, work }

signals:
  void done();  // emit this when you're finished with the work
};

// in your main function (or wherever)
QThread * thread = new QThread();
Worker * w = new Worker();
w->moveToThread( thread );
thread->start();
// clean up your thread
QObject::connect( w, SIGNAL(destroyed()), thread, SLOT(quit()) );
QObject::connect( thread, SIGNAL(finished()), thread(deleteLater()) );

// at some point, emit a signal connected to your workers 'doWork()' slot.
// when the work is finished, the worker and thread will both clean themselves up. 
```

**Edit: What if I'm using an older version of Qt?**

In recent Qt releases, the default implementation of the `QThread::run()` method is to call `exec()`, which starts the thread's event loop. If you're supporting an older version of Qt, you do need to subclass QThread in order for the above code to work.

```
class MyThread : public QThread
{
  void run() { exec(); }
}; 
```

Then, just use `MyThread` instead of `QThread`, and all of the above still applies. In this case, it makes perfect sense to subclass `QThread` because you're creating a specialized thread class (one that runs its own event loop when you call `start()`).

As for thread clean-up, the above still applies.

```
QObject::connect( thread, SIGNAL(finished()), thread, SLOT(deleteLater()) ); 
```

When you call `MyThread::quit()`, the event loop will return, `run()` will return, then the thread object emits the `finished()` signal. Since the `MyThread` object actually lives in the main event loop, the `deleteLater()` slot invocation will still be delivered.

# c# - 对象初始化可以确定成员是否默认？

> ID：14525197
> 
> 赞同：0
> 
> 时间：2013-01-25T15:48:19.333
> 
> 标签：c#

如果我有课

```
class widget {
    public int theNum;
    public string theName;
} 
```

我像这样初始化

```
widget wgt = new widget { thename="tom" }; 
```

`theNum`将为零。

有没有办法让我检查实例 wgt 以确定成员 theNum 是默认的，即从对象初始化中排除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:50:47.507

一种选择是`theNum`改为`int?`改为...然后默认值为空值，它不同于 0。

请注意，我希望那些是公共*属性*而不是公共字段 - 在这种情况下，您可以通过测试字段值是否为空来创建*属性*类型`int`，保持`int?`作为支持字段类型并提供一些其他检查初始化的方法.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:50:19.840

只要`theNum`是一个字段，您就无法判断它是未初始化还是已显式初始化为其默认值（在这种情况下为`0`，但如果您有 ，则可能会有所不同`public int theNum = 42`）。

如果`theNum`是一个属性，那么您可以从属性设置器中设置一个标志，该标志允许您确定是否调用了设置器，无论您将属性设置为什么值。例如：

```
class widget {
    private int theNum;
    private bool theNumWasSet;
    public string theName;

    public int TheNum
    {
        get { return theNum; }
        set { theNumWasSet = true; theNum = value; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:51:51.607

而不是`int`使用 an `int?`(这是 . 的简写，`System.Nullable<int>`然后，如果没有人将其初始化为有效的 int，则它将为 null。

# php - mysqli数组失败？

> ID：14525201
> 
> 赞同：0
> 
> 时间：2013-01-25T15:48:36.233
> 
> 标签：php, string, mysqli

我有一个文本块和一个 preg_match_all 序列来从文本中的某些元素创建一个数组（$matches）。

然后，我使用 mysqli 为第一个数组中的每个字符串查找相应的条目，并接收第二个数组 - ($replacement)。

我想用第二个数组替换原始文本中第一个数组的位置，重新找到第一个数组并将其命名为 $arraytoreplace。这是我使用的代码：

```
$replacement = array();
$myq = "SELECT code,title FROM messages WHERE ID=?";
if ($stmt = $mysqli2->prepare($myq)) {
   foreach($matches[1] as $value) {
     $stmt->bind_param("s", $value);
     $stmt->execute();
     // bind result variables
     $stmt->bind_result($d,$cc);
     if($stmt->fetch()) {
       $replacement[] = '<a href="'. $d .'">' . $cc . '</a>';
     }

   }
   $stmt->close();
} 
```

如果我在 str_replace 之前在数组上使用 var_dump ，如下所示：

```
var_dump($arraytoreplace);
var_dump($replacement); 
```

我得到：

```
array(4) {
         [0]=> string(3) "111"
         [1]=> string(2) "12"
         [2]=> string(4) "1234"
         [3]=> string(1) "0"
         }

array(4) {
         [0]=> string(5) "hello"
         [1]=> string(2) "hi"
         [2]=> string(3) "foo"
         [3]=> string(3) "bar"
         } 
```

然后我使用 str_replace 将第二个数组放到原始文本中第一个数组的位置。

通常这很好，但是一旦达到数组标记中的 10 个字符串，一切都会中断。而不是`Text hello text hi`我会得到`Text 11foo text foo1`或同样奇怪的东西。

有任何想法吗？

编辑：用于替换数组的代码如下：

```
$messageprep = str_replace($arraytoreplace, $replacement, $messagebody);
$messagepostprep = str_replace('#', '', $messageprep);
echo '<div class="messagebody">' . $messagepostprep . '</div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:22:42.547

当一串数字包含在更长的字符串中时，看起来你得到了部分替换，即`23`inside `1234`。

您需要在搜索字符串的边界上使用正则表达式进行替换。就像是...

```
$text = preg_replace("/\b" . $replace . "\b/", $value, $text); 
```

另一种可能的解决方案是考虑更改要替换的值，以便用零填充它们......

```
Array(
    [0] => string(3) "0111"
    [1] => string(2) "0012"
    [2] => string(4) "1234"
    [3] => string(1) "0000"
) 
```

...并确保您的搜索字符串也用零填充，因为`0012`永远不会`12`与`0123`.

# cuda - Nsight 在远程调试时跳过（忽略）VS10 Cuda 中的断点，但如果在目标机器上本地调试它工作正常

> ID：14525203
> 
> 赞同：0
> 
> 时间：2013-01-25T15:48:37.353
> 
> 标签：cuda, gpu, nsight, cuda-gdb

当我在主机上远程调试我的 cuda 项目时，它会忽略断点但完全执行。但是当我在目标机器上本地调试我的项目时，它工作正常。

我检查了我的驱动程序版本是 301.42，我的 nsight 版本是 2.2

我的目标机器有 Geforce 8600GT，主机有 Geforce 6200 turboCache。我认为我的主机的 GPU 没有启用 TCC。

nsight 分析活动在本地和远程都可以正常工作，但 cuda 调试只能在本地模式下工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:45:20.250

that problem was because I bring project that already has built on my target to the host , but when I clean the project on host and rebuild it it dosent work because of one link error I search the link error and find the solution

solution was doing flowing instruction : project -> propertiy->configuration properties->linker->general -> enable Incremental linking and update it to NO(/INCREMENT:NO)

and then debugging is work remotely

I am sorry about my ignorance :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:56:33.283

这很可能是驱动程序版本问题。我的经验是，并非每个驱动程序版本都适用于 Nsight。目前我正在运行最新的驱动程序版本（310.90），Nsight 3.0 在本地和远程都可以正常工作。如有疑问，请使用 Nsight 下载页面上列出的驱动程序版本。

# android - Android 浏览器不加载 XHTML Jquery Mobile 页面

> ID：14525207
> 
> 赞同：0
> 
> 时间：2013-01-25T15:48:45.143
> 
> 标签：android, html, jquery-mobile, xhtml

考虑以下`XHTML`页面，`page1.xhtml`其中包含 Jquery Mobile 脚本：

```
<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml">
    <head> 

        <title>Page 1</title> 

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

    </head> 

    <body> 

        <div data-role="page">

            <div data-role="header">
                <h1>Page Title</h1>
            </div><!-- /header -->

            <div data-role="content">   
                <a href="page2.xhtml">Go to page 2</a>
            </div><!-- /content -->

            <div data-role="footer">
                <h4>Page Footer</h4>
            </div><!-- /footer -->

        </div><!-- /page -->

    </body>
</html> 
```

单击链接时，`page2.xhtml`未加载。（仅显示加载动画图像，仅此而已）

这个问题只出现在`XHTML`页面上，而不是 HTML。

我使用三星 GT-S5302 设备和一些 Android（手机和平板电脑）模拟器进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:38:50.220

正如有人已经提到的，jQuery Mobile 在 XHTML 方面存在问题。

您的问题可以通过删除此行来解决，但我不知道您是否会喜欢它：

```
<!DOCTYPE html> 
```

这是一个证明： http: [//www.fajrunt.org/page1.xhtml](http://www.fajrunt.org/page1.xhtml)

**编辑 ：**

这里的主要问题是 webkit 浏览器将整个 HTML 包装在另一个 DIV 中。不要问我为什么，并且存在导致这个问题发生。

# nservicebus - NSB的建筑设计

> ID：14525210
> 
> 赞同：0
> 
> 时间：2013-01-25T15:48:48.647
> 
> 标签：nservicebus

我最近以开发人员/分析师的身份与一位新的项目经理一起参与了 NServiceBus 的实施。该项目已经过了可行性和设计阶段。之前的实施工作是在 Pub/Sub 设置中使用 NSB 端点完成的。

项目经理现在更改了设计，以便他希望在单个服务器上组织所有端点。通过这种方式，他想模仿代理系统，甚至指定让发布者轮询共享上的 XML 文件。消息将流经总线（在同一服务器上），订阅者端点（同样，同一代理）将 XML 文件放置在目标系统上。他坚信通过这种方式可以解耦系统，并认为在 XML 文件中界定总线职责方面具有很大优势。

我试图用这些论点建立一个案例

*   解耦位于端点之间
*   EAI 逻辑应该受益于 NSB 容错系统
*   中央架构造成单点故障
*   NSB 之外的 EAI 逻辑需要自己的监控和日志记录（不可扩展）
*   新应用程序将具有 XML 导入/导出要求

为了构建我的案例，我参考了很多优秀的文档。问题是所有的文档都非常技术性，真正的创新是在字里行间读到的。

所以我的问题是通过分享你的想法和/或任何好的（人类可读的）参考来帮助（反驳）我的案例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:24:36.383

所提议的内容听起来像是 Biztalk 做得非常好的和注定要做的一个非常古老的版本。

一些包含有关 Biztalk 与 NSB 的信息的文章（来自 NSB 网站）： [http://support.nservicebus.com/customer/portal/articles/861018-overview](http://support.nservicebus.com/customer/portal/articles/861018-overview) http://support.nservicebus.com/customer/portal /articles/861257-nservicebus-and-biztalk

实施 Biztalk 的成本相当高，包括所需的硬件（包括故障转移）和软件许可（SQL Server 和 Biztalk 本身）。

不过，一般来说，您的问题可能比 StackOverflow 的问答形式更适合讨论论坛。您可以将其发布在 NSB 组中：

[http://tech.groups.yahoo.com/group/nservicebus/](http://tech.groups.yahoo.com/group/nservicebus/)

# ios - 将滑动面板添加到 UITabBarController

> ID：14525212
> 
> 赞同：1
> 
> 时间：2013-01-25T15:48:57.010
> 
> 标签：ios, uitabbarcontroller

我制作了一个带有标签的面板，可以从屏幕底部向上拖动。

我想将它添加到 UITabBarController 中，以便它出现在所有 tabBar 子视图中，但必须看起来从标签栏本身的顶部滑出。我可以将面板添加到与 UITabBarController 相同的顶级视图中，但它会滑过选项卡栏的顶部。

UITabBarController 中是否有一个子视图，可以在其中添加此滑块以使其按需要运行，而无需以编程方式裁剪面板视图的底部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:07:35.983

你可以试试这个，它适用于 iOS 5+（这是使用故事板）：

• 创建一个UITabBarController 的子类（我称之为“TabViewController”）。

• 在您的故事板中，选择您的UITabBarViewController，并为其指定类`TabViewController（在右侧栏，第三部分，自定义类）。

• 在您的 TabViewController.m 文件中，使用以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIView *theView = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 50, 50)];
    theView.backgroundColor = [UIColor redColor];
    [self.view addSubview:theView];

    [self.view bringSubviewToFront:self.tabBar];
} 
```

在将 view 添加到 self.view 之前，你可以对它做任何你想做的事情，这里我只是在位置 (50, 50) 处创建一个 50x50 的红色方块。该视图将位于 TabBar 后面并停留在您的 ViewControllers 之上。

在这里，`theView`将是您自己的控件（您的“可以从屏幕底部向上拖动的选项卡”）。

# oracle - Java EE：解压缩 BLOB 并获取其中的文件

> ID：14525213
> 
> 赞同：0
> 
> 时间：2013-01-25T15:49:09.873
> 
> 标签：oracle, jakarta-ee, zip, blob

我正在构建一个 Java EE 应用程序，并在我的 servlet 中从 Oracle 数据库中检索一个 BLOB。

查询完美运行。

现在我不知道 BLOB 的确切格式，它应该是一种压缩文件，因为在 SQL Developer 中我可以将它保存在我的桌面上，用 .ZIP 扩展名重命名它，解压缩它，然后我可以在里面找到一个TXT文件。

所以应该是一个txt文件被压缩了。

我想在我的 Java Servlet 中检索 txt 文件内容。所以解压文件并读取txt文件。

我试过使用 GZIPInputStream：

```
gStream = new GZIPInputStream(blob.getBinaryStream()); 
```

如此[处所述，在文件末尾](http://www.developerfusion.com/article/84515/smaller-is-better-8211-shrink-your-world-with-java-compression-apis/)

但我得到了例外：“不是 GZIP 格式”。

那么你能帮帮我吗？

*   我需要先解压缩 BLOB 吗？
*   然后怎么获取里面的txt文件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:02:04.517

[Zip](http://en.wikipedia.org/wiki/Zip_%28file_format%29)和[Gzip](http://en.wikipedia.org/wiki/Gzip)是完全不同的格式。前者是一种*归档*和*压缩*格式，后者只是一种*压缩*格式。您需要一个能够理解 zip 格式的输入流，请尝试[`ZipInputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)改用。

# cocoa - 在 IKImageView 上设置图像不起作用？

> ID：14525221
> 
> 赞同：2
> 
> 时间：2013-01-25T15:49:23.587
> 
> 标签：cocoa, core-graphics, ikimageview

    我正在使用 IKImageView。我有一个文件路径 URL，用于将图像添加到 IKImageView。我尝试了 2 种方法：
**1.** `- (void)setImage: (CGImageRef)image imageProperties: (NSDictionary *)metaData;`
**我正在传递一个 CGImageRef ，它来自**
`CGImageRef image =CGImageSourceCreateImageAtIndex(CGImageSourceCreateWithURL((CFURLRef)fileURL, NULL), 0, NULL);`
**和用于 metaData ：**

```
NSDictionary *image_metadata = (NSDictionary *)CGImageSourceCopyPropertiesAtIndex(imageSource,0,(CFDictionaryRef)[NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:NO], (NSString *)kCGImageSourceShouldCache,
                             nil]) 
[preview_ImageView setImage:image imageProperties: image_metadata]; 
```

**2.** - (void)setImageWithURL: (NSURL *)url;

```
 [preview_ImageView setImageWithURL:fileURL]; 
```

我跟踪了日志 fileURL、image_metadata、image，而它们都返回值。另外要添加的是，我已将 IKImageView 连接到我的 FileOwner，添加了 QuartzCore、Quartz 和 ImageIO 框架。我的 Xcode 版本是 MacOSX 10.8 上的 4.5.2 。不知道我哪里出错了？

# ruby-on-rails - Rails 资产管道中的自定义咖啡脚本

> ID：14525222
> 
> 赞同：2
> 
> 时间：2013-01-25T15:49:24.923
> 
> 标签：ruby-on-rails, coffeescript, asset-pipeline

我在 app/assets/javascripts/custom.js 中创建了一个带有函数定义的小型自定义 javascript 文件

```
round_number = function(num, dec) {
  return Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);
}; 
```

该应用程序运行良好，因为该文件已插入到资产管道中。然后，出于学习目的，我将其转换为 coffescript：

```
round_number = (num, dec) ->
  Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec) 
```

但令我惊讶的是，该应用程序不起作用。我在 localhost:3000/assets/custom.js 中检查了 coffescript 被翻译成：

```
(function() {
  var round_number;

  round_number = function(num, dec) {
    return Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);
  };

}).call(this); 
```

为什么额外的包装，使功能在我需要的地方不可用？

如果我不是在 custom.js.coffee 文件中插入 coffescript 函数，而是在 app/assets/javascripts/orders.js.coffee （其中 Order 是我的类）中，它将被翻译成预期的 javascript。

我想把共享的 javascript 函数放在一个单独的文件中，因为它更有序。我知道，即使我将函数放在 orders.js.coffee 中，它也会在整个应用程序中可用（这就是我想要完成的），但我很困惑。我在这里缺少最佳实践吗？

- - 编辑 - -

我从[Rails 3.1 和 Coffeescript 的“找不到变量”错误中了解到](https://stackoverflow.com/questions/6089992/cant-find-variable-error-with-rails-3-1-and-coffeescript/6090251#6090251)

我想我会以这种方式组织我的 Rails 应用程序：

1) 创建文件 app/assets/javascripts/global.js.coffee 以包含所有全局变量和函数。在这个文件中放一行

```
window.Global ||= {} 
```

定义一个命名空间 Global。将函数定义为

```
Global.function_name = (arguments) ->
  ... 
```

2）调用函数：

```
Global.function_name(arguments) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:10:51.900

是的，如果您想要全局可用的东西，请将其设置为`window`. Coffeescript 编译器将您的代码包装在一个匿名函数中，以防止意外的名称冲突。

# eclipse-rcp - Eclipse RCP OSGi 冲突 org.mortbay.jetty

> ID：14525224
> 
> 赞同：1
> 
> 时间：2013-01-25T15:49:28.083
> 
> 标签：eclipse-rcp, osgi, osgi-bundle

启动 Eclipse RCP 应用程序时，我遇到以下错误：

!MESSAGE Bundle org.eclipse.equinox.http.jetty_2.0.0.v20090520-1800 [154] 未解决。!SUBENTRY 2 org.eclipse.equinox.http.jetty 2 0 2013-01-21 17:31:55.618 !MESSAGE 包使用冲突：Import-Package:org.mortbay.jetty; 版本="[6.1.0,7.0.0)"

这会导致问题，即在 RCP 应用程序中，无法启动帮助系统（由于 ClassNotFoundException）。

据我了解，捆绑包 org.mortbay.jetty 存在一些问题，因为它存在于错误版本或多个不正确版本中。因此，我使用程序参数 -console 启动了我的 Eclipse RCP 应用程序，以便获得一个 OSGi 控制台。

我打字

```
osgi> packages org.mortbay.jetty 
```

了解此软件包的所有导入和导出。这给了我以下结果：

```
org.mortbay.jetty; version="6.1.15"<org.mortbay.jetty.server_6.1.15.v200905151201 [491]> 
```

但这对我来说似乎没问题。显然，org.mortbay.jetty 是由 org.mortbay.jetty.server 导出的，它的导出版本是 6.1.15，在 [6.1.0,7.0.0) 的范围内。此外，当我的同事尝试启动应用程序时，他们没有遇到任何问题。

我还尝试为 RCP 应用程序使用新的工作区，但这也无济于事……我现在真的一无所知……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:48:50.367

Problem is fixed, within the launch configuration some important plug-ins were not checked to be launched. In fact, I needed to switch from a feature-based configuration to a plug-in-based configuration.

See: [http://www.eclipse.org/forums/index.php/m/631827/](http://www.eclipse.org/forums/index.php/m/631827/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:00:19.033

前段时间我在码头遇到了同样的问题。

解决方案：

1) 如果您使用基于插件的 eclipse rcp 应用程序 -> 删除插件版本（主要/主要）或

2) 如果您使用基于功能的 rcp 应用程序 --> 确保设置 match="compatible"

# php - Zend Framework 2 Doctrine 2 CLI generate-entities from YAML 每个模块

> ID：14525228
> 
> 赞同：6
> 
> 时间：2013-01-25T15:49:41.467
> 
> 标签：php, orm, doctrine-orm, yaml, zend-framework2

我有干净的项目 ZendSkeletonApplication 通过 Composer 集成了 Doctrine 2 模块“doctrine-orm-module”等。Doctrine CLI 从 vendor/bin 工作。

我有“应用程序”和“博客”模块，我的模块配置：

```
<?php
namespace Blog;

return array(
  'router' => array(
    'routes' => array(
      'post' => array(
        'type' => 'segment',
        'options' => array(
          'route' => '/post[/:action][/:id]',
          'constraints' => array(
            'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
            'id' => '[0-9]+',
          ),
          'defaults' => array(
            'controller' => 'Blog\Controller\Post',
            'action' => 'index',
          ),
        ),
      ),
    ),
  ),
  'controllers' => array(
    'invokables' => array(
      'Blog\Controller\Post' => 'Blog\Controller\PostController'
    ),
  ),
  'view_manager' => array(
    'template_path_stack' => array(
      'blog' => __DIR__ . '/../view',
    ),
  ),
  'doctrine' => array(
    'driver' => array(
      __NAMESPACE__ . '_driver' => array(
        'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
        'cache' => 'array',
        'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
      ),
      'orm_default' => array(
        'drivers' => array(
          __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
        )
      )
    )
    )
); 
```

如何从每个模块的 YAML 文件生成实体以及如何配置我的模块数组以使用 YAML？例如，我在 ZendSkeletonApplication/mapping/yml 中有我的所有 .yml 文件，很少有 .yml 文件有博客模块实体的定义，很少有应用程序模块实体的定义。

我的实体位于博客模块的 Blog/src/Blog/Entity 文件夹中。我只想通过 Doctrine CLI generate-entities 中的一次调用从放置在 mapping/yml 文件夹中的所有 .yml 文件中创建所有实体每个模块？是否可以？任何人都可以提供教义配置的简单示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:24:09.430

以下方法快速而肮脏的方法对我有用：

1.  将以下行添加到 ...vendor\doctrine\doctrine-module\bin\doctrine-module.php：

    ```
    $driverImpl = new \Doctrine\ORM\Mapping\Driver\YamlDriver(
         array("YOUR_PATH_TO_YAML_FILES"));
    /* @var $em \Doctrine\ORM\EntityManager */
    $em = $application->getServiceManager()->get('doctrine.entitymanager.orm_default');
    $em->getConfiguration()->setMetadataDriverImpl($driverImpl);

    //...old code...
    /* @var $cli \Symfony\Component\Console\Application */        
    $cli = $application->getServiceManager()->get('doctrine.cli'); 
    ```

2.  现在你可以在命令行界面上调用这个教义模块.php

    ```
     orm:generate-entities --generate-annotations=1 PATH_TO_YOUR_ENTITY_CLASSES 
    ```

    小心命名空间。YAML 驱动程序期望 namespace.entity.dcm.yml 是 \Namespace\Entity YAML 文件的名称。该工具将为您创建 PATH_TO_YOUR_ENTITY_CLASSES\Namespace\Entity.php。

如果您想更频繁地使用这种方法，那么沿着这些行扩展 Doctrine\ORM\Tools\Console\CommandGenerateEntitiesCommand[并向 cli 添加一个新命令](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/tools.html#entity-generation)可能会更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-26T06:19:24.227

在 module.config.php 上以这种方式配置您的学说驱动程序

```
'doctrine' => array(
    'driver' => array(
        'orm_default' => array(
            'drivers' => array(
                'Application\Entity' => 'application_entities_yaml'
                //replace Application by your module namespace
            ),
        ),
        'application_entities_yaml' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\YamlDriver',
            'paths' => array(__DIR__ . '/../src/' .__NAMESPACE__.  '/Yml/')
            //should be where are yours Yml files.
        ),
    ),
), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T04:24:32.197

要解决此问题，请确保您已生成为它们指定命名空间的实体。你的命令行应该是这样的：

```
vendor/doctrine/doctrine-module/bin/doctrine-module orm:convert-mapping annotation module/MyNamespace/src/ --namespace="MyNamespace\Entity\\" --from-database 
```

如果没有选项*--namespace*，您的实体将不在命名空间内，因此该学说无法找到您的实体。

从这里您可以使用另一个学说命令，例如 orm:generate-repositories （您需要配置您的实体指定存储库名称），如下所示：

```
<?php

namespace MyNamespace\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity(repositoryClass="MyNamespace\Repository\UserRepository")
 */
class User
{
.....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:17:00.327

`DoctrineModule`不正式支持实体生成。使用 ORM ( `./vendor/bin/doctrine`) 的本机 CLI 生成实体，然后将它们移动到模块中的所需位置。

# c# - 如果不是空快捷方式，C# 使用会话值

> ID：14525232
> 
> 赞同：1
> 
> 时间：2013-01-25T15:49:46.853
> 
> 标签：c#

在 C# 中是否有更短的方法来编写以下代码：

```
var token = Session["token"];
if(token != null)
{
    if((String)token != "")
    {
        var a = (String)token;
    }
} 
```

是否有`string.IsNullOrEmpty(Object.ToString())`可能为 null 而不会导致异常的对象的等价物？

编辑：显示实际代码，将变量名换成“token”和“a”。var a 实际上是一个属性引用，但是为了在以后的情况下有帮助，保留为 var a。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T15:51:54.760

那么，如果您删除了冗余，那么您的代码会更简单：

```
var value = Session["value"];
if (value != null)
{
    string text = value.ToString();
    if (text != "")
    {
        // Use text
    }
} 
```

这已经表达了每个逻辑操作一次，这很好。

或者，您可以使用 null-coalescing 运算符：

```
var text = (Session["value"] ?? "").ToString();
if (text != "")
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:59:24.690

那这个呢：

```
var candidate = Convert.ToString(Session["var"]);
if(candidate.Length > 0){
     DoSomething(candidate);

} 
```

[Convert.ToString(Object)](http://msdn.microsoft.com/en-us/library/astxcyeh.aspx)将处理转换，无论它的实际类型是什么，`string.Empty`如果值为. 则返回`null`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T15:51:03.667

```
object myObj = Session["value"];
if (myObj != null && myObj.ToString() != string.Empty)
string myStr = myObj.ToString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T15:59:21.523

使用`as`to cast to`string`来避免异常：

```
string text = Session["value"] as string;

if(!string.IsNullOrEmpty(text))
{
    var a = text;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T15:53:36.303

也许：

```
string value = Session["value"] as string ?? "";
// no need for an `if` 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T15:58:13.533

你有没有尝试过？

```
if(!string.IsNullOrEmpty(Session["Value"]) as string)
{
      //do something
} 
```

或者

```
var a = string.IsNullOrEmpty(Session["value"] as string) ? "" : Session["value"].ToString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T16:05:35.663

[就我个人而言，我会使用@JonSkeet 的答案，使用`??`带有括号的空合并运算符在调用之前将语句解析为字符串`ToString`- 单行。]

只是另一个毫无意义的选择：您可以将其压缩为扩展方法，因为扩展方法调用适用于空“目标”：

```
public static class ObjectExtensions
{
    public static string SafeToString(this object o)
    {
        if (o != null)
        {
            return o.ToString();
        }

        return "";
    } 
} 
```

然后你可以调用：

```
string a = Session["value"].SafeToString();

if (string.IsNullOrEmpty(a))
{
    // Handle null or empty strings.
} 
```

不确定我是否会自己这样做，因为 null 项方法调用有效可能看起来很奇怪 - 除非那个人记得扩展方法是如何编译的。

`object`此外，如果您对命名空间不严格，扩展确实会污染对象的类型接口。

# dom - vbscript如何从单元格中获取单选按钮

> ID：14525233
> 
> 赞同：0
> 
> 时间：2013-01-25T15:49:53.507
> 
> 标签：dom, vbscript

我有

```
table.rows(i).cells(0).innerHtml outputs

<INPUT name=group_478 value=2 type=radio> 
```

如何使用此输入元素作为变量`table.rows(i).cells(0)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:56:00.817

这应该可以帮助您：

```
table.Rows(i).Cells(0).getElementsByTagName("input")(0).Value 
```

或者也一样

```
table.Rows(i).Cells(0).childNodes(0).Value 
```

# regex - 用于 mm-dd-yyyy 的 Powershell 正则表达式

> ID：14525236
> 
> 赞同：1
> 
> 时间：2013-01-25T15:50:07.657
> 
> 标签：regex, powershell

我正在使用 Powershell 搜索一个大文件，以查找所有包含 mm-dd-yyyy 格式的字符串。然后我需要提取字符串以确定日期是否为有效日期。该脚本在大多数情况下都有效，但返回的结果太多，并且没有提供我想要的所有信息。文件中有像 012-34-5678 这样的字符串，为此我会失败，并且 12-34-5678 的值将作为无效日期返回。我也无法返回发现无效日期的行号。有人可以看看我下面的脚本，看看我做错了什么吗？

被注释掉的两行将返回字符串编号和在该行中找到的整个字符串，但我不知道如何仅从该行中获取 mm-dd-yyyy 部分并确定它是否是有效日期。

任何帮助将不胜感激。谢谢。

```
#$matches = Select-String -Pattern $regex -AllMatches -Path "TestFile_2013_01_06.xml" | 

#$matches | Select LineNumber,Line

$regex = "\d{2}-\d{2}-\d{4}"     

$matches = Select-String -Pattern $regex -AllMatches -Path "TestFile_2013_01_06.xml" |
   Foreach {$_.Matches | Foreach {$_.Groups[0] | Foreach {$_.Value}}}

foreach ($match in $matches) {

    #$date = [datetime]::parseexact($match,"MM-dd-yyyy",$null)  

    if (([Boolean]($match -as [DateTime]) -eq $false ) -or ([datetime]::parseexact($match,"MM-dd-yyyy",$null).Year -lt "1800")) {
        write-host "Failed $match"
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:57:28.837

您可以在正则表达式本身中进行大量验证，使其更加健壮：

```
$regex = "(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}" 
```

上述匹配任何介于 1900 年 1 月 1 日到 2099 年 12 月 31 日之间的日期，并接受正斜杠、破折号、空格和圆点作为日期分隔符。它不*拒绝*无效日期，例如 2 月 30 日或 31 日、11 月 31 日等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:57:37.660

行号在 Select-String 输出的对象上可用，但您没有在 $matches 中捕获它。尝试这个：

```
$matchInfos = @(Select-String -Pattern $regex -AllMatches -Path "TestFile_2013_01_06.xml")
foreach ($minfo in $matchInfos)
{
    #"LineNumber $($minfo.LineNumber)"
    foreach ($match in @($minfo.Matches | Foreach {$_.Groups[0].value}))
    {
        if ($match -isnot [DateTime]) -or 
            ([datetime]::parseexact($match,"MM-dd-yyyy",$null).Year -lt "1800")) {
          Write-host "Failed $match on line $($minfo.LineNumber)"
        }
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:14:47.887

我可能只是尝试将 Select-String 的结果与*实际*匹配项联系起来。我没有包括检查日期是否足够“新”的条件：

```
Select-String -Pattern '\d{2}-\d{2}-\d{4}' -Path TestFile_2013_01_06.xml -AllMatches | 
    ForEach-Object {
        $Info = $_ | 
            Add-Member -MemberType NoteProperty -Name Date -Value $null -PassThru |
            Add-Member -MemberType NoteProperty -Name Captured -Value $null -PassThru
        foreach ($Match in $_.Matches) {
            try {
                $Date = [DateTime]::ParseExact($Match.Value,'MM-dd-yyyy',$null)
            } catch {
                $Date = 'NotValid'
            } finally {
                $Info.Date = $Date
                $Info.Captured = $Match.Value
                $Info
            }
        }
    } | Select Line, LineNumber, Date, Captured 
```

当我对一些示例数据进行尝试时，我得到了这样的结果：

```
Line                                  LineNumber Date                Captured  
----                                  ---------- ----                --------  
Test 12-12-2012                                1 2012-12-12 00:00:00 12-12-2012
Test another 12-40-2030                        2 NotValid            12-40-2030
20-20-2020 And yet another 01-01-1999          3 NotValid            20-20-2020
20-20-2020 And yet another 01-01-1999          3 1999-01-01 00:00:00 01-01-1999 
```

# ruby - Ruby 中的正则表达式跳过了双斜杠

> ID：14525238
> 
> 赞同：0
> 
> 时间：2013-01-25T15:50:13.237
> 
> 标签：ruby, regex

我需要帮助 Ruby 中的正则表达式失败，我不知道为什么。我正在使用 Ruby 从大型生物数据库中获取部分文本，该数据库具有以下结构（为简单起见，我将仅显示两项）：

```
//
ID   IPI00303292.1         IPI;      PRT;   538 AA.
AC   IPI00303292;
DR   Superfamily; SSF48371; ARM; 1.
DR   UniProt/Swiss-Prot; P52294; IMA1_HUMAN; M.
DR   CleanEx; HS_KPNA1; -; -.
//
ID   IPI00301082.1         IPI;      PRT;   309 AA.
AC   IPI00301082;
DT   06-JUN-2003 (IPI Human rel. 2.20, Created)
// 
```

即数据库条目以包含IPI 代码的行开始，并以双正斜杠结束。我想检索与特定 IPI 代码相关的信息。假设我只想获取`IPI00303292.1`从 IPI 代码到以下内容的文本行`//`。

正则表达式的 Rubular 测试`/(IPI00303292\.1).*\/\//m`抓取整个显示的文本（即两个条目），识别最后一个`//`，同时跳过两者之间的第二个。

***更新：*** 嗨，根据您的宝贵建议，我想我已经接近为我的目的获得可用的程序了。代码是：

```
matches = []
no_matches = []

ipi = File.open('mini_alphaIPI.txt').collect do | var | # read the file containing IPI search codes
    var = var.chomp 

db = File.open('mini_human.dat') # read the file containing IPI data

db.readlines.map(&:chomp).slice_before(%r(\A//)).each do |db_record|
  db_record.shift
  next if db_record.empty?

matches.push(db_record) if db_record.first.include?(var)

if db_record.first.include?(var)  then
    matches.push(db_record)
    else
    no_matches.push(var)
end
end
end

File.open('out_raw.txt', "wb") do |file|
     matches.each do |z|
      file.puts z
  end
end 
```

现在要解决的最后一个问题是，我在正确选择的正面命中的输出文件中获得了两个副本。我无法摆脱这样的错误。请帮忙 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:28:46.763

Ruby 配备了[`slice_before`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-slice_before)一个很好的工具来解决这类问题：

```
require 'pp'

DATA.readlines.slice_before(%r(\A//)).each do |db_record|
  pp db_record
end

__END__
//
ID   IPI00303292.1         IPI;      PRT;   538 AA.
AC   IPI00303292;
DR   Superfamily; SSF48371; ARM; 1.
DR   UniProt/Swiss-Prot; P52294; IMA1_HUMAN; M.
DR   CleanEx; HS_KPNA1; -; -.
//
ID   IPI00301082.1         IPI;      PRT;   309 AA.
AC   IPI00301082;
DT   06-JUN-2003 (IPI Human rel. 2.20, Created)
// 
```

运行代码输出：

```
["//\n",
 "ID IPI00303292.1 IPI；PRT；538 AA。\n",
 "AC IPI00303292;\n",
 "DR 超家族；SSF48371；ARM；1.\n",
 "DR UniProt/Swiss-Prot；P52294；IMA1_HUMAN；M.\n",
 "DR CleanEx；HS_KPNA1；-；-。\n"]
["//\n",
 "ID IPI00301082.1 IPI；PRT；309 AA。\n",
 "AC IPI00301082;\n",
 "DT 06-JUN-2003 (IPI Human rel. 2.20, Created)\n"]
["//\n"]

```

它扫描一个数组，在出现与模式匹配的行时将其中断，在这种情况下，模式是`%r(\A//)`，或者在英语中，“以两个正斜杠开头的行”。生成的数组数组将是由 分隔的每组记录`//`。

请注意，这些行有尾随的换行符。可以使用以下方法修复：

```
DATA.readlines.map(&:chomp).slice_before(%r(\A//)).each do |db_record| 
```

如果要跳过第一个子数组`//`条目，请使用：

```
pp db_record[1..-1] 
```

或者：

```
db_record.shift
pp db_record 
```

清理后代码如下：

```
require 'pp'

DATA.readlines.map(&:chomp).slice_before(%r(\A//)).each do |db_record|
    db_record.shift
    pp db_record
end 
```

运行它看起来像：

```
["ID IPI00303292.1 IPI；PRT；538 AA。",
 "AC IPI00303292;",
 “DR 超家族；SSF48371；ARM；1.”，
 "DR UniProt/Swiss-Prot；P52294；IMA1_HUMAN；M.",
 “DR CleanEx；HS_KPNA1；-；-。”]
["ID IPI00301082.1 IPI；PRT；309 AA。",
 "AC IPI00301082;",
 “DT 06-JUN-2003（IPI Human rel. 2.20，已创建）”]
[]

```

两次调整，你就完成了：

```
DATA.readlines.map(&:chomp).slice_before(%r(\A//)).each do |db_record|
  db_record.shift
  next if db_record.empty?

  pp db_record if db_record.first['IPI00303292.1']

end 
```

哪个输出：

```
["ID IPI00303292.1 IPI；PRT；538 AA。",
 "AC IPI00303292;",
 “DR 超家族；SSF48371；ARM；1.”，
 "DR UniProt/Swiss-Prot；P52294；IMA1_HUMAN；M.",
 “DR CleanEx；HS_KPNA1；-；-。”]

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:01:29.417

这是使用贪心量词引起的典型问题`*`。请改用非贪婪量词`*?`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:39:16.380

*   项目清单

在这种情况下，正则表达式方法非常困难，我认为问题`.`还在于匹配`/`。

几乎用这个正则表达式实现了它：

```
%r{
  //\n                  # Match '//' and new line
  (?<item>              # Capture the item...
    [\n\w\s.,;\-\(\)]+  # And here comes the !"#%&@ł
  )                     # You need this to match a single appearance of '/' 
}x                      # e.g., not '//', and partial regex negation is a bit tricky... 
```

`split('//')`但是，从那里开始使用并继续该过程会容易得多。

```
DATA.split('//').each do |item|
  item.each_line do |line|
    # etc
  end
end 
```

你好：这工作[http://rubular.com/r/kH12xUyxR9](http://rubular.com/r/kH12xUyxR9)

```
%r{
  (//)?\n
  (?<item>.+?)
  \n//
}xm 
```

但这只是出于好奇，说真的，只需使用`split('//')`.

# couchdb - Couchdb，如何获得键中第二个元素的唯一列表？

> ID：14525239
> 
> 赞同：0
> 
> 时间：2013-01-25T15:50:15.930
> 
> 标签：couchdb, unique

我的观点是这样的：

对于给定的 值`session`，我想检索 的唯一列表`type`。

```
function (doc) {
 if (doc.sesion) {
    emit([doc.sesion, doc.type], doc);
 }
} 
```

我应该如何查询视图？我需要创建另一个视图吗？

我知道我应该使用 include_docs 而不是在视图中发出文档，但暂时不用担心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:55:03.317

这样做：

```
?startkey=["session_value",""]&endkey=["session_value",{}] 
```

但是，像这样重新格式化您的视图会更容易：

```
function (doc) {
 if (doc.sesion) {
    emit(doc.sesion, doc.type);
 }
} 
```

并像您提到的那样查询：

```
?key="session_value"&include_docs=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:54:13.020

要获得您可以使用的唯一类型集，请在没有（或，请参阅[视图 API](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)）的情况下`reduce`查询视图，如此[处](http://wiki.apache.org/couchdb/View_Snippets#Generating_a_list_of_unique_values)所述。请注意，这种方式您不能使用，因为您只能使用它（没有）。`group=true``group_level``group_level=exact``startkey=["YOUR_SESSION"]&endkey=["YOUR_SESSION",{}]``include_docs``map``reduce`

# java - Java Applet SwingUtilities 空屏

> ID：14525253
> 
> 赞同：0
> 
> 时间：2013-01-25T15:51:00.797
> 
> 标签：java, applet

> **可能重复：**
> [HTML 不显示我的带有 JLabel 的 Java 小程序](https://stackoverflow.com/questions/14524480/html-does-not-display-my-java-applet-with-a-jlabel)

我有 Java Applet 的下一个代码源：

```
package m2mcom.web;
import m2mcom.entities.AutomatedTelnetClient;
import javax.swing.JApplet;
import javax.swing.SwingUtilities;
import javax.swing.JLabel;

public class Displaytext extends JApplet {
//Called when this applet is loaded into the browser.
public void init() {
    //Execute a job on the event-dispatching thread; creating this applet's GUI.
    try {
        SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
                AutomatedTelnetClient telnet = new AutomatedTelnetClient();
                String answer = telnet.request();
                JLabel lbl = new JLabel(answer);
                add(lbl);
            }
        });
    } catch (Exception e) {
        System.err.println("createGUI didn't complete successfully");
    }
}
} 
```

telnet 请求是在 AutomatedTelnetClient 类中发出的，一旦获得响应，会话也会关闭。当我执行 .html 文件时，没有绘制任何内容并且屏幕为空。任何人都知道它为什么会这样。还有其他方法可以将字符串添加到 Applet 中吗？难道问题出在 SwingUtilities 的 inovkeAndWait 上吗？

这是 HTML：

```
<HTML>
<HEAD>
</HEAD>
<BODY>
<div >
<APPLET CODE="m2mcom.web.Displaytext.class" WIDTH="800" HEIGHT="500">
</APPLET>
</div>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:14:40.677

尝试不运行

```
AutomatedTelnetClient telnet = new AutomatedTelnetClient(); 
```

在 SwingUtilities 线程中。b/c telnet 请求很可能是异步调用。尝试在不使用线程的情况下直接运行上面的代码，看看你得到了什么。

- -更新 - -

另一个问题可能是我下面代码中的最后一行，它将标签添加到您的小程序 contentPane 组件中。这可能是问题所在。

如果这两个修复不起作用，那么很可能是您的*AutomatedTelnetClient*类逻辑有问题。

```
package m2mcom.web;
import m2mcom.entities.AutomatedTelnetClient;
import javax.swing.JApplet;
import javax.swing.SwingUtilities;
import javax.swing.JLabel;

public class Displaytext extends JApplet {
//Called when this applet is loaded into the browser.
public void init() {
    //Execute a job on the event-dispatching thread; creating this applet's GUI.
    try {

                AutomatedTelnetClient telnet = new AutomatedTelnetClient();
                String answer = telnet.request();
                JLabel lbl = new JLabel(answer);
                getContentPane().add(lbl);

    } catch (Exception e) {
        System.err.println("createGUI didn't complete successfully");
    }
}
} 
```

# c++ - Qt 向移动到线程的对象发出信号

> ID：14525257
> 
> 赞同：0
> 
> 时间：2013-01-25T15:51:12.817
> 
> 标签：c++, qt, signals-slots, qthread

为了通过设置标志（然后从线程内返回）来启动停止线程，我需要与它通信。

线程是这样实现的

```
MyClass* obj = new MyClass(0);
connect( this,SIGNAL( stop() ),obj, SLOT(stop()));
emit stop();    // slot is called (qDebug output)

MyThread = new QThread;
obj->moveToThread(MyThread);
connect( ... started() ... quit() ... finished() ... deleteLater() ...
....

emit stop();    // slot isn't called (qDebug output) 
```

该插槽还没有任何逻辑，它只是使用 qDebug() 输出。对象创建和连接发生在主窗口方法中。

不幸的是，我无法弄清楚我做错了什么：一旦将对象移动到线程，插槽就不再运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:08:58.580

也许您只是忘记复制/粘贴它，但您错过了一个`MyThread->start()`电话。此外，声明线程的行应该是`QThread * MyThread = new QThread();`，但这可能只是一个错字。

现在，在您的回答中，您说使用 a`Qt::DirectConnection`似乎已经解决了您的问题。但是，使用直接连接调用的槽只是直接调用槽方法。slot 方法正在运行，但它是从调用线程（`stop()`发出信号的地方）运行的。即使您的线程未启动，这也将起作用。您真正想要的是通过`Qt::QueuedConnection`. 这将在工作线程的事件循环中放置一个事件，然后调用该插槽。请注意，如果您不指定，Qt 将处理连接类型。

如果排队的连接不起作用，那么您的工作可能会阻塞线程的事件循环。在您的工作方法中，您是否曾经将控制权传递回事件循环以允许它处理事件？还是它只是在`while`循环中运行，等待标志改变状态？

此外，您的代码不会按原样编译/运行。我假设你已经在处理这些`QApplication`东西了——也就是说，在你的函数`QApplication::exec()`中设置好所有东西之后调用。`main`如果您不调用`exec()`，则永远不会启动主事件循环。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T15:51:12.817

调试输出实际上是在线程完成工作之后才发生的。使用

```
connect( this, SIGNAL(stop()), obj, SLOT(stop()), Qt::DirectConnection); 
```

解决了这个问题。

# javascript - 通过 cid 而不是 id 在 Backbone.js 集合中查找模型

> ID：14525258
> 
> 赞同：13
> 
> 时间：2013-01-25T15:51:14.497
> 
> 标签：javascript, backbone.js, backbone.js-collections

对于尚未保存到服务器的模型，我可以使用 Collection.get(id) 在 cid 的 Backbone.js 集合中查找模型吗？

从文档来看，.get 似乎应该通过它的 id 或 cid 找到一个模型。但是，`collection.get(cid)`没有找到模型，而这确实找到了`collection.find(function(model) {return model.cid===cid; })`. 大概我忽略了一些基本的东西。

[jsFiddle 例如下面](http://jsfiddle.net/gradualstudent/ReTQk/4/)

```
var Element = Backbone.Model.extend({});
var Elements = Backbone.Collection.extend({ model:  Element });

var elements = new Elements(), el, cids = [];

for (var i=0; i<4; i++) {
    el = new Element({name: "element"+i})
    elements.add(el);
    cids.push(el.cid);
}

console.log(cids);
el1 = elements.get(cids[0]);     
console.log(el1);  // undefined

el1a = elements.find(function(model) { return model.cid === cids[0]; });
console.log(el1a);  // success 
```

[Backbone.js - id vs idAttribute vs cid](https://stackoverflow.com/questions/12169822/backbone-js-id-vs-idattribute-vs-cid)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-25T15:55:34.723

在主干 0.9.9（[参见变更日志](http://backbonejs.org/#changelog)）中，他们删除了该`.getByCid()`方法并将该功能直接折叠到`.get()`- 如果您使用低于 0.9.9，您可以使用该`.getByCid()`方法；我认为他们已经从文档中删除了它以反映图书馆的最新状态。

编辑：

See @Ferdinand Prantl's comment below for more detail, but passing the `cid` as the property of an object literal will accomplish what you're looking for here: `.get({ cid: "xxx" })`. My apologies for any confusion.

# ios - 在 ASIHTTPRequest 中找不到“libxml/HTMLparser.h”文件

> ID：14525264
> 
> 赞同：9
> 
> 时间：2013-01-25T15:51:22.547
> 
> 标签：ios, objective-c, asihttprequest, libxml2

> **可能重复：**
> [ASIHTTPRequest；安装问题](https://stackoverflow.com/questions/4301143/asihttprequest-installation-issues)

我已逐步按照[设置教程](http://allseeing-i.com/ASIHTTPRequest/Setup-instructions)`'libxml/HTMLparser.h' file not found`进行操作，但出现此错误： . 我还[克隆了 libxml 库](http://git.gnome.org/browse/libxml2/)，但它不起作用。任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-26T19:14:07.270

我已通过将 Header Search Paths 调整为：来修复它`${SDK_DIR}/usr/include/libxml2`，您可以在[ASIWebPageRequest 指令](http://allseeing-i.com/ASIHTTPRequest/ASIWebPageRequest)中找到它。

# css - 使用 TokenInput 和 CSS 使 X，“删除按钮”大于文本

> ID：14525273
> 
> 赞同：1
> 
> 时间：2013-01-25T15:52:09.650
> 
> 标签：css, jquery-tokeninput

我正在使用著名的 TokenInput 并且我正在重新设置 CSS 的样式，并且我想让“X”看起来更大，但文本不会与它对齐并停留在底部。任何想法我怎么能做到这一点？我有点难过。

![在此处输入图像描述](../Images/d898e6cf9e711218f6157ba080d3e3f0.png)

* * *

**更新：**

我现在在 CodePen 上放了一个工作演示（当时 JSFiddle 已经关闭，但这也很好）。

[http://cdpn.io/oauIs](http://cdpn.io/oauIs)

谢谢

* * *

**CSS：**

```
/*actual token created*/
li.token-input-token-facebook 
{
    overflow: hidden; 
    height: auto !important; 
    height: 15px;
    margin: 2px;
    padding: 5px 3px 5px 5px;
    background: -webkit-gradient(linear, left top, 
                left bottom, from(rgba(170, 214, 221, 1)), to(rgba(0, 128, 183, 1)));
    color: white;
    cursor: default;    
    font-size: 11px;
    border-radius: 4px;
    float: left;
    white-space: nowrap;
}

/*actual writing inside token*/
li.token-input-token-facebook p 
{
    display: inline;
    padding: 0;
    margin: 0;
}

/*Little "x" button to cancel token*/
li.token-input-token-facebook span 
{
    color: white;
    margin: 0 0 0 12px;
    font-weight: bold;
    cursor: pointer;
    font-size: 20px;  /*Here is where I have made it bigger */
} 
```

* * *

**HTML**

```
<ul class="token-input-list-facebook">
    <li class="token-input-token-facebook" data-uniqueid="u1"><p>Duval,B</p>
    <span class="token-input-delete-token-facebook">×</span>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:44:56.973

这可以通过在文本中添加 line-height 并浮动到十字来解决。

检查这个小提琴：[http ://codepen.io/anon/pen/jdJAs](http://codepen.io/anon/pen/jdJAs)

我分别在第 56 行和第 66 行添加了上述属性。由于文本的字体大小以百分比指定，因此您可能需要在修改字体大小时手动调整行高。

干杯

# compilation - 为什么 GHC 不会以这个 GADT 模板 Haskell 模块终止？

> ID：14525276
> 
> 赞同：1
> 
> 时间：2013-01-25T15:52:13.167
> 
> 标签：compilation, ghc, template-haskell, gadt

我在使用模板 Haskell 生成 GADT 时遇到问题。问题是我无法让代码完全编译。加载文件时 GHCI 不会终止，并且 ghc 进程会使用尽可能多的内存和 cpu（2.4GB，50~70%）。

我试图做一个最小的例子，它仍然会发生。我是使用牛津符号 ( `[| |]`) 还是通过手动应用 TH 数据类型来构建函数都没有关系。考虑这个简单的模块：

```
{-# LANGUAGE GADTs, TemplateHaskell #-}
module Test where
$( [d| data Test a where
         T :: Test String
     |] ) 
```

我在用于 x64 的 Haskell 平台的 OSX Mountain Lion 上使用 GHC 7.4.2。

有谁知道为什么会这样？也许我错误地使用了一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:15:08.403

事实证明，在我的带有 GHC 7.4.2 32 位的 32 位 Ubuntu 机器上，代码运行正确。所以我的猜测是问题在于操作系统或处理器架构的差异。

安装 32 位 Haskell 平台后，代码编译。猜猜这是编译器中的一个错误。我也会尝试为此提交一个错误。这应该用 GHC 还是模板 haskell 来完成？

# sql-server - 如何从一组名称中的 SQL Server 2000-2008 中的多个表中选择列名

> ID：14525279
> 
> 赞同：1
> 
> 时间：2013-01-25T15:52:18.020
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2000

如果我有一组这样的名称：

```
('first', 'fname', 'firstname', 'namef', 'namefirst', 'name') 
```

SQL Server 2000 - 2008 中检索包含特定数据库上述集合中列名的不同表名的最佳方法是什么？

我想从显示的表列表中排除系统表和临时表。

```
SELECT so.name
FROM   sysobjects so
       INNER JOIN syscolumns sc
            ON  so.id = sc.id
WHERE  sc.name IN ('first', 'fname', 'firstname', 'namef', 'namefirst', 'name') 
```

我相信这是这个[问题的派生词。](https://stackoverflow.com/questions/14113487/select-same-column-name-in-microsft-sql-server-from-multiple-tables)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:28:10.063

# 对于 SQL Server 2005 及更高版本

对于较新版本的 SQL Server 的 FWIW 我更喜欢目录视图`INFORMATION_SCHEMA`，原因在此博客文章中概述：

[反对`INFORMATION_SCHEMA`意见的案例](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)

另请参阅MSDN上关于[TABLES (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186224.aspx)主题的警告：

> 不要使用 INFORMATION_SCHEMA 视图来确定对象的架构。查找对象架构的唯一可靠方法是查询 sys.objects 目录视图。INFORMATION_SCHEMA 视图可能不完整，因为它们并未针对所有新功能进行更新。

因此，我将使用的查询如下（过滤掉系统对象并在您使用 tempdb 时避免使用 #temp 表）：

```
SELECT t.name, c.name
  FROM sys.tables AS t
  INNER JOIN sys.columns AS c
  ON t.[object_id] = c.[object_id]
  WHERE c.name IN (N'name', N'firstname', etc.)
  AND t.is_ms_shipped = 0
  AND t.name NOT LIKE '#%'; 
```

对所有数据库重复此操作：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'
  UNION ALL SELECT db = N''' + name + ''', 
    t.name COLLATE Latin1_General_CI_AI, 
    c.name COLLATE Latin1_General_CI_AI
  FROM ' + QUOTENAME(name) + '.sys.tables AS t
  INNER JOIN ' + QUOTENAME(name) + 'sys.columns AS c
  ON t.[object_id] = c.[object_id]
  WHERE c.name IN (N''name'', N''firstname'', etc.)
  AND t.is_ms_shipped = 0
  AND t.name NOT LIKE ''#%'''
FROM sys.databases
-- WHERE ... -- probably don't need system databases at least

SELECT @sql = STUFF(@sql, 1, 18, '') 
  -- you may have to adjust  ^^ 18 based on copy/paste, cr/lf, tabs etc.
  + ' ORDER BY by db, s.name, o.name';

EXEC sp_executesql @sql; 
```

（这些`COLLATE`子句是为了防止在您拥有具有不同排序规则的数据库的情况下出现错误。）

# 对于 SQL Server 2000

请注意，上述内容对 SQL Server 2000 没有帮助，但我认为您不应该将能够在每个版本上运行相同的查询作为目标。SQL Server 2000 已有 13 年的历史，几年后不再支持；当然，您可以证明有特殊代码是合理的。在这种情况下，我仍然会选择您所拥有的查询`INFORMATION_SCHEMA`，只需过滤掉系统对象和临时表（同样，仅与您在 tempdb 中的事件相关）：

```
SELECT [object] = so.name, [column] = sc.name, 
  [type]  = st.name,   [precision] = st.xprec, 
  [scale] = st.xscale, st.length
FROM sysobjects AS so
INNER JOIN syscolumns AS sc
ON  so.id = sc.id
INNER JOIN systypes AS st
ON sc.xtype = st.xtype
WHERE sc.name IN 
  (N'first', N'fname', N'firstname', N'namef', N'namefirst', N'name')
AND so.name NOT LIKE '#%'
AND OBJECTPROPERTY(so.id, 'IsMsShipped') = 0; 
```

您也可以对 SQL Server 2000 中的每个数据库执行此操作，但由于您不能使用`NVARCHAR(MAX)`，您将不得不使用游标、一堆变量或[高度不推荐的 sp_msforeachdb](https://sqlblog.org/2020/01/31/reliable-flexible-replacement-sp_msforeachdb)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:56:17.063

您可以使用`INFORMATION_SCHEMA`架构。

```
SELECT DISTINCT t.TABLE_NAME
  FROM INFORMATION_SCHEMA.TABLES t
  JOIN INFORMATION_SCHEMA.COLUMNS c
  ON t.TABLE_NAME = c.TABLE_NAME
  WHERE c.COLUMN_NAME IN (your list of names) 
```

我不记得这是否包括临时表，但您可以查看其他列`TABLES`以查看要过滤的内容。

# javascript - 防止默认行为不起作用

> ID：14525282
> 
> 赞同：0
> 
> 时间：2013-01-25T15:52:25.890
> 
> 标签：javascript

我试图阻止没有像 jQuery 这样的 JavaScript 库的动态图片库的默认操作。这是项目 - [http://the-session.co.uk/JSgallery/](http://the-session.co.uk/JSgallery/)当我不想要它们时，链接似乎仍在将用户带到链接的目的地。我`onclick`在我的 HTML 标记中使用内联事件处理程序来调用该函数。

```
<a href="images/tuco.jpg" onclick="showPic(this)" title="Tuco">Tuco Salamanca</a> 
```

功能：

```
function showPic(whichpic) { 

    var source = whichpic.getAttribute("href");  
    var placeholder = document.getElementById("placeholder"); 
    placeholder.setAttribute("src",source); 

    var event = window.event;
    if(event.preventDefault) {
        event.preventDefault(); // handles most browsers
    }
    else {
        return false;          // handles ie
    }
} 
```

单击鼠标时，此错误会在控制台中显示一瞬间：

![在此处输入图像描述](../Images/f8dc55190fb236d959cc1310b33d4fd4.png)

现在肯定已经在上面的行中定义了事件：有`var event = window.event;`解决问题的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:57:37.487

该对象`window.event`仅存在于 Internet Explorer 中，而不存在于其他浏览器中。

在其他浏览器中，事件作为参数传递给处理事件的函数。

你真正想要的是这样的：

```
<a href="images/tuco.jpg" onclick="showPic(event)" title="Tuco">Tuco Salamanca</a> 
```

和

```
function showPic(e) { 

    if (!e) var e = window.event;

    var whichpic = e.target

    var source = whichpic.getAttribute("href");  
    var placeholder = document.getElementById("placeholder"); 
    placeholder.setAttribute("src",source); 

    if(e.preventDefault) {
        e.preventDefault(); // handles most browsers
    }
    else {
        return false;          // handles ie
    }
} 
```

[怪癖模式](http://www.quirksmode.org/js/events_access.html)有一个很好的概述。

FWIW：事件处理规范化是使用 JavaScript 库或框架带来的最大优势之一。看看jQuery、Dojo、Prototype等等等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:54:40.533

当你`onclick`在 an 中使用时，`href`你必须跟随动作`return false;`，否则一旦动作完成`href`就会跟随动作。`onclick`

与其使用`onclick`和内联您的事件，不如考虑使用基于`id`. 我绝对推荐使用 jQuery 之类的库。事件处理是微不足道的，就像这样......

```
$('#someid').click(function() { alert('hi') }); 
```

即使使用原生 JavaScript，这也比在 HTML 中乱扔`onclick`...

```
document.getElementById('someid').click = function() {
    alert('hi');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T10:28:58.863

I've been having fun with a similar problem, and found that this solution works:

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html" />
</head>
<body>
<a id="mylink" href="http://www.stackoverflow.com/" target="_blank">Go to SO.</a>
<script>
var linkClicked = false;

window.onload = function()
{
    document.getElementById("mylink").onclick = function(e)
    {

        if (!e) var e = window.event;
        if (!linkClicked)
        {
            linkClicked = true;
            // Add code to change appearance of link so that people will know not to click it.

        }
        else
        {

                if(e.preventDefault) 
                {
                    e.preventDefault(); // handles most browsers
                }
                else
                {
                    return false;          // handles ie
                }
        }   
    }
}    
</script>

</body>
</html> 
```

In this example, the link will work and open a new window once. All further clicks will have no effect.

I would recommend you add styling to make it obvious that the link no longer works.

I got help from Dancrumb's answer, so if you like this, like that too!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:56:46.073

尝试这个：

```
<a href="images/tuco.jpg" onclick="showPic(event,this)" title="Tuco">Tuco Salamanca</a> 
```

和：

```
function showPic(event, whichpic) { 

    var source = whichpic.getAttribute("href");  
    var placeholder = document.getElementById("placeholder"); 
    placeholder.setAttribute("src",source); 

    if(event.preventDefault) {
        event.preventDefault(); // handles most browsers
    }
    else {
        return false;          // handles ie
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T15:56:57.820

window.event 可能未定义，这就是您的变量未定义的原因。看看这个问题是否有助于解决您的问题：[Why FF says that window.event is undefined? （添加事件侦听器的调用函数）](https://stackoverflow.com/questions/9813445/why-ff-says-that-window-event-is-undefined-call-function-with-added-event-list)

# php - Magento 中的交易 ID 和支付对象

> ID：14525283
> 
> 赞同：1
> 
> 时间：2013-01-25T15:52:30.127
> 
> 标签：php, magento, variables

我的问题可能看起来很流行，但我面临着困难..

部分功能代码是

```
 public function capture(Varien_Object $payment, $amount){

            if(!$this->isEnabled()){
                return parent::capture($payment, $amount);
            }else{
    ---- MORE CODE--
    $quote = Mage::getSingleton('customer/session');
        $nickname = $quote->getAuthorizenetNickname();
        $profile = $quote->getProfile();
        $postedNickname = $quote->getNickname();

        if ($payment->getCcTransId()) {
        $payment->setAnetTransType(self::REQUEST_TYPE_PRIOR_AUTH_CAPTURE);
        } else {
        $payment->setAnetTransType(self::REQUEST_TYPE_AUTH_CAPTURE);
        }

        $payment->setAmount($amount);

        $request= $this->_buildRequest($payment);
        $result = $this->_postRequest($request);

        MORE CODE HERE, NOT RELEVENT TO MY ISSUE 
```

我这里有两个问题

**我如何传递交易 ID**

```
$payment->setAmount($amount);   
$request= $this->_buildRequest($payment);
$result = $this->_postRequest($request); 
```

第二个问题是

> 我如何回显/调试正在传递的 transactionID 的值

对你来说可能很容易，但我失败了

**到目前为止尝试过**

```
$payment->setTransID($payment->gerOrder->getTransID());   
and 
$payment->gerOrder->getTransID()
$payment->setAmount($amount);   
$request= $this->_buildRequest($payment); 
```

感谢您的帮助和指导

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T10:18:54.743

我以前遇到过这个问题，这是我的发现:)

付款与交易完全不同，尽管它们有关系。

付款对象包含有关订单总额的完整信息（折扣、总计、取消、运输等...）

交易仅包含与 if 相关的信息，例如来自支付网关（`txn_id`，`parent_txn_id`- 如果它有父交易 - 等...），因此它不涉及支付多少/剩余多少/取消/运送多少等。

*   付款与交易具有一对多关系（因此您无法为其设置交易ID）您需要将last_trans_id设置为付款，或者如果它是信用卡交易（一次性）您可以设置和使用此字段cc_trans_id换句话说如何将交易分配给付款，您需要执行以下操作：-
    *   创建分配给订单的新支付对象并保存所有数据等。（或者如果您从支付网关返回，则加载订单/报价并获取支付对象`$order->getPayment();`）
    *   创建 Transaction Object 将其分配给该 paymentID 和 order ID 等。然后保存它
    *   分配`last_trans_id`给付款对象并保存！
    *   然后使用该付款对象保存订单或保存已分配给该订单的付款对象。

我希望这可以帮助你 ：）

请找到我为将交易添加到付款中所做的付款集成示例的代码

```
 /**
 * Creates Transactions for directlink activities
 *
 * @param Mage_Sales_Model_Order $order
 * @param int $transactionID - persistent transaction id
 * @param int $subPayID - identifier for each transaction
 * @param array $arrInformation - add dynamic data
 * @param string $typename - name for the transaction exp.: refund
 * @param string $comment - order comment
 * 
 * @return Cashu_Helper_DirectLink $this
 */
public function directLinkTransact($order,$transactionID, $subPayID,
    $arrInformation = array(), $typename, $comment, $closed = 0)
{
    $payment = $order->getPayment();
    $payment->setTransactionId($transactionID."/".$subPayID);
    $transaction = $payment->addTransaction($typename, null, false, $comment);
    $transaction->setParentTxnId($transactionID);
    $transaction->setIsClosed($closed);
    $transaction->setAdditionalInformation("arrI    nfo", serialize($arrInformation));
    $transaction->save();
    $order->save();
    return $this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:35:13.853

我也在构建一个 CIM 支付模块。所以我确切地知道你要经历什么（我想我快要完成了，但在过去的 3 周里我又一直这么说）

从您上面的代码中，您似乎正在尝试做一个`PRIOR_AUTH_CAPTURE`，这意味着您应该在进行交易时存储交易 ID `AUTH_ONLY`。

看一眼

> /app/code/core/Mage/Paygate/Model/Authorizenet.php

设置交易 ID 的代码 ( `PRIOR_AUTH_CAPTURE`)

```
protected function _preauthorizeCaptureCardTransaction($payment, $amount, $card)
{
    $authTransactionId = $card->getLastTransId();
    $authTransaction = $payment->getTransaction($authTransactionId);
    $realAuthTransactionId = $authTransaction->getAdditionalInformation($this->_realTransactionIdKey);

    $payment->setAnetTransType(self::REQUEST_TYPE_PRIOR_AUTH_CAPTURE);
    $payment->setXTransId($realAuthTransactionId); 
```

保存交易 id 的代码 ( `AUTH_ONLY`)

```
protected function _place($payment, $amount, $requestType)
{
    ....
    switch ($result->getResponseCode()) {
        case self::RESPONSE_CODE_APPROVED:
            $this->getCardsStorage($payment)->flushCards();
            $card = $this->_registerCard($result, $payment); //<-- take a look at

    .....

    $this->_addTransaction(
          $payment,
          $card->getLastTransId(),
          $newTransactionType,
          array('is_transaction_closed' => 0),
          array(
              $this->_realTransactionIdKey => $card->getLastTransId(), //<-- take a look at
              $this->_isTransactionFraud => true
          ), 
```

更新

```
$payment->setAmount($amount);   
$payment->setXTransId({put your transaction id here});
$payment->setAnetTransType($requestType);
$request= $this->_buildRequest($payment);
$result = $this->_postRequest($request); 
```

然后在构建您的请求时

```
protected function _buildRequest(Varien_Object $payment)
{
   ....
   switch ($payment->getAnetTransType()) {
   .....
        case self::REQUEST_TYPE_PRIOR_AUTH_CAPTURE: //<-- for all the request that need Transaction id 
            $request->setXTransId($payment->getXTransId());
            break; 
```

# regex - 正则表达式匹配之间的所有字符

> ID：14525286
> 
> 赞同：20
> 
> 时间：2013-01-25T15:52:31.173
> 
> 标签：regex, sublimetext3, sublimetext2

我正在使用 sublime text 2 编辑器。我想使用正则表达式来匹配所有`h1`标签之间的所有字符。

截至目前我正在使用这样的

```
<h1>.+</h1> 
```

如果 h1 标签没有中断，它工作正常。

我的意思是

```
<h1>Hello this is a hedaer</h1> 
```

它工作正常。

但如果标签看起来像这样，它就不起作用

```
<h1>
   Hello this is a hedaer
</h1> 
```

有人可以帮我语法吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-25T15:54:36.077

默认`.`匹配除换行符以外的所有字符。

在这种情况下，您将需要 DOTALL 选项，它将`.`匹配任何字符，包括换行符。DOTALL 选项可以内联指定为`(?s)`. 例如：

```
(?s)<h1>.+</h1> 
```

但是，您会看到它不起作用，因为量词的默认行为是**贪婪**的（在本例中为`+`），这意味着它将尝试使用尽可能多的字符。您需要通过在量词之后添加 extra 来使其变得**懒惰**（使用尽可能少的字符）：`?``+?`

```
(?s)<h1>.+?</h1> 
```

* * *

或者，正则表达式可以是`<h1>[^<>]*</h1>`. 在这种情况下，您不需要指定任何选项。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-05-13T13:38:54.050

由于这个问题是搜索正则表达式的顶级谷歌搜索结果，它试图找到h1 标签*之间*的所有字符，我想我也会给出这个答案。因为那是我一直在寻找的。

```
(?s)(?<=<h1>)(.+?)(?=</h1>) 
```

该正则表达式，如果在示例文本上使用，`<h1>A title</h1> <p>Some content</p> <h1>Another title</h1>`则只会返回`A title`.

# python - Python POST 登录请求

> ID：14525294
> 
> 赞同：0
> 
> 时间：2013-01-25T15:52:49.233
> 
> 标签：python, python-2.7, urllib2

我正在尝试使用 POST 方法登录，请帮助。

```
import urllib2, cookielib
cookie_support= urllib2.HTTPCookieProcessor(cookielib.CookieJar())
opener = urllib2.build_opener(cookie_support, urllib2.HTTPHandler)
urllib2.install_opener(opener)
content = urllib2.urlopen("https://indivinet.ca/api/v1/login",api_key=5f1d5cb35ca1953ecd8f63ac0ac44d3b&location_id=location&username=username&password=password).read() 
```

它只是说无效的语法。

请有人更正语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:54:15.680

您需要将数据值设为字符串；它不是 python 表达式：

```
content = urllib2.urlopen(
    "https://indivinet.ca/api/v1/login",
    "api_key=5f1d5cb35ca1953ecd8f63ac0ac44d3b&location_id=location&username=username&password=password"
).read() 
```

# arrays - 如何检查变量是否为数组？

> ID：14525296
> 
> 赞同：46
> 
> 时间：2013-01-25T15:52:51.407
> 
> 标签：arrays, bash

我有一个变量名循环，我需要检查变量的内容是否为数组：

```
for varname in AA BB CC; do
  local val
  if [ "$varname" is array ]; then # how can I perform this test?
    echo do something with an array
  else
    echo do something with a "'normal'" variable
  fi
done 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-12-02T16:38:21.377

为避免调用 grep，您可以使用：

```
if [[ "$(declare -p variable_name)" =~ "declare -a" ]]; then
    echo array
else
    echo no array
fi 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-25T15:54:26.237

根据[this wiki page](http://fvue.nl/wiki/Bash:_Detect_if_variable_is_an_array)，您可以使用以下命令：

```
declare -p variable-name 2> /dev/null | grep -q '^declare \-a' 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-03-18T16:58:04.357

从 bash 4.3 开始，它不再那么容易了。

使用“declare -n”，您可以添加对另一个变量的引用，并且可以一遍又一遍地执行此操作。好像这还不够复杂，使用“declare -p”，您不会得到类型或原始变量。

例子：

```
$ declare -a test=( a b c d e)
$ declare -n mytest=test
$ declare -n newtest=mytest
$ declare -p newtest
declare -n newtest="mytest"
$ declare -p mytest
declare -n mytest="test" 
```

因此，您必须遍历所有引用。在 bash-only 中，这看起来像这样：

```
vartype() {
    local var=$( declare -p $1 )
    local reg='^declare -n [^=]+=\"([^\"]+)\"$'
    while [[ $var =~ $reg ]]; do
            var=$( declare -p ${BASH_REMATCH[1]} )
    done

    case "${var#declare -}" in
    a*)
            echo "ARRAY"
            ;;
    A*)
            echo "HASH"
            ;;
    i*)
            echo "INT"
            ;;
    x*)
            echo "EXPORT"
            ;;
    *)
            echo "OTHER"
            ;;
    esac
} 
```

用上面的例子：

```
$ vartype newtest
ARRAY 
```

要检查数组，您可以修改代码或将其与 grep 一起使用：

```
vartype $varname | grep -q "ARRAY" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-19T23:28:21.600

我从上面鲁本的[精彩回答](https://stackoverflow.com/a/27254437/1255289)开始。我实施了一些评论和一些我自己的改进，并得出了这个结论：

```
#!/bin/bash
array_test() {
    # no argument passed
    [[ $# -ne 1 ]] && echo 'Supply a variable name as an argument'>&2 && return 2
    local var=$1
    # use a variable to avoid having to escape spaces
    local regex="^declare -[aA] ${var}(=|$)"
    [[ $(declare -p "$var" 2> /dev/null) =~ $regex ]] && return 0
} 
```

现在我可以这样做了：

```
foo=(lorem ipsum dolor)
bar="declare -a tricky"
declare -A baz

array_test foo && echo "it's an array"
array_test bar && echo "it's an array"
# properly detects empty arrays
array_test baz && echo "it's an array"
# won't throw errors on undeclared variables
array_test foobarbaz && echo "it's an array" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-19T18:39:54.517

另一种方式：

*例如，创建一个数组：*

```
Variable=(The Quick Brown Fox...) 
```

*测试变量：*

```
if [ "${#Variable[@]}" -gt "1" ] ;
 then echo "Variable is an Array"; 
else echo "Variable is NOT an Array" ; 
fi 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-02T11:50:45.647

```
is_array() {
  local variable_name=$1
  [[ "$(declare -p $variable_name)" =~ "declare -a" ]]
}

is_array BASH_VERSINFO && echo BASH_VERSINFO is an array 
```

* * *

```
is_array() {
    local variable_name=$1
    [[ "$(declare -p $variable_name 2>/dev/null)" =~ "declare -a" ]]
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-14T14:30:17.210

我认为这样做，它检查数组索引不匹配“”或“0”

对于小型阵列和非阵列，它应该很便宜。

它通过测试数组索引中的任何非零字符来工作

```
is_array() {
  eval [[ "\"\${!$1[*]}\"" =~ "[1-9]" ]]
}

an_array=(1 2 3)
wierd_array[4]=3
non_array="Joe"
unset non_exist

is_array an_array && echo pass || echo fail
is_array wierd_array && echo pass || echo fail
is_array non_array && echo fail || echo pass
is_array non_exist && echo fail || echo pass 
```

输出应该是

```
pass
pass
pass
pass 
```

# yii - PHP 代码在 XAMPP 但不是 AWS 中抛出奇怪的错误

> ID：14525297
> 
> 赞同：0
> 
> 时间：2013-01-25T15:52:50.917
> 
> 标签：yii, amazon-web-services, xampp

我的代码在 Amazon Web Services (AWS) Elastic Beanstalk 上运行，效果很好。使用 Yii 框架和 MySQL (RDS) 数据库编写的 PHP 网站。

我在通过 XAMPP 运行的 Widows 7 64 位机器上有一个代码的本地实例，效果很好。

让外部开发人员在某些页面上工作，在这里和那里添加一些小东西。所有代码在 AWS 中运行良好，但现在我有时在我自己的 XAMPP localhost 版本的网站中会遇到奇怪的错误。

在本地，我可以很好地访问我的数据库和网站的许多页面。但是，在某些页面上，我看到以下错误：致命错误：第 51 行的 C:\xampp\htdocs\greenlancer\protected\components\FlexDetailActiveRecord.php 中未找到 Class 'COutputProcessor'（仅供参考 - 此行是文件只有一个关闭}）

和“错误 500：只能通过引用传递变量”

这些完全相同的页面可以在 AWS 服务器上完美运行。是否有人提出可能是外部开发人员在 Mac 上工作，所以换行符以某种方式搞砸了（我不确定他在什么操作系统上工作）？我查看了代码，确实有 LF 而不是 CRLF，但这真的会导致这样的错误吗？工作的页面也包含 LFs 而不是 CRLFs。如果这是问题所在，我将如何解决这个问题（请记住，由于 MVC 结构，有很多页面需要构建 1 个 HTML 页面，所以不知道实际错误是从哪里抛出的）。

如果不是这个换行符，我不知道还能尝试什么。我已经更新了我的 XAMPP，运行了无数次代码等等。关于接下来要研究什么的任何想法？什么可能导致代码在 AWS 上完美执行但在 XAMPP 上出错？如果这是一个权限问题，或者我的路径设置错误，我会认为我将无法使用任何网站 - 但事实并非如此。帮助！？

# c++ - c float 精度命令的 C++ 等效项是什么？

> ID：14525300
> 
> 赞同：4
> 
> 时间：2013-01-25T15:53:17.797
> 
> 标签：c++, c, format-string

在 C 语言中，我们有这样的语句：

```
printf("%6.3f ",floatNumber); 
```

这限制了打印时的位数。
我怎样才能实现类似的行为`C++`？我知道，`setprecision`但这并不能帮助我做同样的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T18:44:26.940

`%6.3f`要获得与仅使用标准 iostream 操纵器指定的格式相似的格式，您可以执行以下操作：

```
std::cout << std::fixed << std::setw(6) << std::setprecision(3) << f; 
```

具体`std::fixed`表示与格式字符串中相同的基本格式`f`，例如，“精度”对格式字符串和 ostream 表示相同的含义。`std::setprecision(3)`然后实际设置精度并`std::setw(6)`设置字段宽度。如果不进行设置`std::fixed`，您将获得与格式字符串指定的格式相似的格式`"%6.3g"`。

请注意，除了`setw`这些操纵器是粘性的。也就是说，它们在一个变量输出后仍然有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T16:03:23.127

您最好的选择是使用`boost::format`. 请参阅[文档](http://www.boost.org/doc/libs/1_52_0/libs/format/)，尤其[是示例](http://www.boost.org/doc/libs/1_52_0/libs/format/example/sample_formats.cpp)

下一个最好的（如果你不能`boost`在你的项目中使用）是继续使用`printf`. 它是 C++ 标准库的一部分，因此只要您`#include <stdio.h>`喜欢它，它就应该“正常工作”。

# java - 在特定时间开始任务

> ID：14525305
> 
> 赞同：0
> 
> 时间：2013-01-25T15:53:37.563
> 
> 标签：java

我使用以下代码每 5 分钟执行一次任务。

```
this.timer.schedule(new Send(), new Date(), TEN_SECONDS*6*5); 
```

我的问题是，我怎样才能在这种时间开始我的任务：xx:00, xx:05, xx:10, xx:15 - 跳跃 5 分钟，所以我想从最近的 5 开始我的任务分钟跳跃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:59:59.073

你可以用石英。

它是开源的并且具有类似 cron 的功能。

[http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example3](http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:40:03.017

这并不难，非常简单的数学。

```
d1.setMinutes(d1.getMinutes() + 5 - d1.getMinutes()%5); 
```

# jquery - jQuery Read More/Read Less 附加在全文之后，仅用于 Read Less 状态

> ID：14525306
> 
> 赞同：0
> 
> 时间：2013-01-25T15:53:38.957
> 
> 标签：jquery, slidetoggle

我可以对这一点 jQuery 使用一些指导。这似乎是一个热门话题，到目前为止，我的阅读更多/阅读更少文本在点击时发生变化，并且单个实例在页面上有多个实例的情况下独立工作。

我现在需要做的是将 Read Less 附加到全文的末尾。我现在有这个工作，但toggleSlide（向上滑动）因此中断。

我现在正在学习 jQuery（喜欢它！）所以任何帮助将不胜感激。

下面的代码：

```
$(document).ready(function() {
$('.fulltext').hide();

    $('.blog-item .readmore').click(function(event) {
     event.preventDefault();
        $(this).parent().nextAll('.fulltext').first().slideToggle('slow');
        $(this).text($(this).text() == 'Read less...' ? 'Read more...' : 'Read less...');
        $(this).appendTo($('.fulltext'));
    });            
}); 
```

[http://jsfiddle.net/Techbot/AuAKn/](http://jsfiddle.net/Techbot/AuAKn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:04:54.200

您遇到的问题是在幻灯片切换后将 .readmore 锚附加到末尾，这会破坏 dom 遍历的功能

```
 $(this).parent().nextAll('.fulltext').first().slideToggle('slow'); 
```

我已经分叉了你的小提琴，并向你展示了一种更简单的方法。现在您只需使用 CSS 定位“阅读更多”锚点

[http://jsfiddle.net/AcQ6s/2/](http://jsfiddle.net/AcQ6s/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:15:29.893

只是对 HighParkCoder 的回答稍作调整，但它更健壮，并且可以对每个博客项目的结构进行更改。相反，也更新该行：

```
$(this).closest('.blog-item').find('.fulltext').slideToggle('slow'); 
```

`$(this)`当您在代码中多次引用它时，它也值得缓存。让你的代码保持更通用总是值得的，这样如果你决定改变你的博客项目的结构，javascript就可以工作了。使用 .parent() 与您的博客项目的当前结构更紧密地联系在一起。

JSF中：

[http://jsfiddle.net/D7a6E/3/](http://jsfiddle.net/D7a6E/3/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T16:05:38.123

你几乎拥有它；只是一些调整。首先，重新排序您的 HTML：

```
<div class="blog-item">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed at urna ac
        leo vulputate egestas a ut odio. In hac habitasse platea dictumst. Donec
        in erat velit, eu ultricies diam.

    <div class="fulltext">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed at urna ac
            leo vulputate egestas a ut odio. In hac habitasse platea dictumst.</p>
    </div>
    <a class="readmore" href="#">Read more...</a>
    </p>
</div> 
```

然后，只需在单击时切换文本：

```
$(document).ready(function () {
    $('.fulltext').hide();

    $('.blog-item .readmore').click(function (event) {
        event.preventDefault();
        $('.fulltext').slideToggle('slow');
        $(this).text($(this).text() == 'Read less...' ? 'Read more...' : 'Read less...');
    });
}); 
```

这应该够了吧！这是一个小提琴：

[http://jsfiddle.net/sablefoste/AuAKn/1/](http://jsfiddle.net/sablefoste/AuAKn/1/)

# postgresql - 只使用redis实现活动流有多安全？

> ID：14525307
> 
> 赞同：5
> 
> 时间：2013-01-25T15:53:41.187
> 
> 标签：postgresql, design-patterns, stream, redis, social-networking

我正在建立一个网站，该网站将允许用户“关注”不同的成员，并且每当该成员发布时，它都会按时间倒序将其添加到所有关注者活动流中。这些天很常见的东西。

但是我无法确定实现这一点的最具可扩展性/面向未来的方式（没有连接）。

我正在使用烧瓶/heroku/sqlalchemy/postgres。我正在考虑使用 Open-redis 插件并做类似 instagram 提到的事情：每个用户都有一个 redis 列表，每当“关注”帖子时，它会将帖子添加到每个关注者列表的开头并修剪其总大小。

我只是对 redis 了解得不够多，不知道在每个用户流中单独依赖它是否安全。对于 open-redis，他们没有提到任何关于持久性的事情，所以我不知道这是否只是现在假设的一个足够普遍的事情。

如果 redis 不是 100% 可靠/安全的，关于我如何使用 postgres/Hstore 做到这一点的任何想法（请不要加入）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-30T11:57:36.677

我们为第二大在线时尚社区构建了一个解决方案，并将我们的方法开源： [https](https://github.com/tschellenbach/Feedly) ://github.com/tschellenbach/Feedly 它是目前最大的旨在解决这个问题的开源库。您可以使用 Redis 和 Cassandra 作为存储后端。

我们已经在 Redis 上运行了一年多，没有遇到任何问题。如果设置正确，它运行非常稳定，不太可能丢失数据。

构建 Feedly 的同一团队还提供了一个托管 API，可以为您处理复杂性。看看[getstream.io](https://getstream.io)有 Python、PHP、Node 和 Ruby 的客户端库。

另外看看这篇高可扩展性帖子，我们解释了一些涉及的设计决策：http: [//highscalability.com/blog/2013/10/28/design-decisions-for-scaling-your-high-traffic-提要.html](http://highscalability.com/blog/2013/10/28/design-decisions-for-scaling-your-high-traffic-feeds.html)

[本教程](http://www.mellowmorning.com/2013/10/18/scalable-pinterest-tutorial-feedly-redis/)将帮助您使用 Redis 设置像 Pinterest 的提要这样的系统。这很容易上手。

要了解有关提要设计的更多信息，我强烈建议阅读我们基于提要的一些文章：

*   [雅虎研究论文](http://research.yahoo.com/files/sigmod278-silberstein.pdf)
*   [Twitter 2013 基于 Redis](http://highscalability.com/blog/2013/7/8/the-architecture-twitter-uses-to-deal-with-150m-active-users.html)，带有回退
*   [Instagram 上的卡桑德拉](http://planetcassandra.org/blog/post/instagram-making-the-switch-to-cassandra-from-redis-75-instasavings)
*   [Etsy 饲料缩放](http://www.slideshare.net/danmckinley/etsy-activity-feeds-architecture/)
*   [脸书历史](http://www.infoq.com/presentations/Facebook-Software-Stack)
*   [Django 项目](http://justquick.github.com/django-activity-stream/)，具有良好的命名约定。（但仅限数据库）
*   [http://activitystrea.ms/specs/atom/1.0/](http://activitystrea.ms/specs/atom/1.0/)（演员、动词、宾语、目标）
*   [Quora 上关于最佳实践的帖子](http://www.quora.com/What-are-best-practices-for-building-something-like-a-News-Feed?q=news%20feeds)
*   [Quora 扩展社交网络提要](http://www.quora.com/What-are-the-scaling-issues-to-keep-in-mind-while-developing-a-social-network-feed)
*   [Redis 红宝石示例](http://web.archive.org/web/20130525202810/http://blog.waxman.me/how-to-build-a-fast-news-feed-in-redis)
*   [FriendFeed 方法](http://backchannel.org/blog/friendfeed-schemaless-mysql)
*   [Thoonk 设置](http://blog.thoonk.com/)
*   [Twitter的方法](http://www.slideshare.net/nkallen/q-con-3770885)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:16:34.067

我认为它足够安全。Redis 支持两种形式的[持久化](http://www.redis.io/topics/persistence)。您可以配置 AOF 持久性，这样在发生崩溃时您可能不会丢失任何数据。

Redis 是比较简单的软件，不容易崩溃。我的轶事证据是一个应用程序，其中*所有内容*都存储在 Redis 中。它目前在 Redis 中为大约 22 万用户和相关信息存储了大约 34 万个密钥。Redis 从未崩溃或出现过任何问题。该应用程序已经运行了将近 6 个月，我只在重新启动服务器几次时重新启动了 Redis。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T00:56:08.013

您正在做的事情的名称称为“写时扇出”，这里有一些关于此方法和其他方法的很好的讨论：[http ://www.quora.com/Activity-Streams/What-are-the-scaling -在开发社交网络供稿时要牢记的问题](http://www.quora.com/Activity-Streams/What-are-the-scaling-issues-to-keep-in-mind-while-developing-a-social-network-feed)。

实际上，这里有一篇专门针对 Redis 执行此操作的帖子：http: [//nosql.mypopescu.com/post/4588381681/activity-feeds-with-redis](http://nosql.mypopescu.com/post/4588381681/activity-feeds-with-redis)。

我提醒人们注意的一件事是过早的扩展——在你需要更进一步之前，尽量使用可行的方法。在相当大的规模之前，您对 Redis 的使用应该是相当安全的。

这是一篇旧帖子，因此您可能已经完成了该项目，但对于正在冒险走这条路的其他人来说，使用将为您处理活动流的服务可能是有意义的。全面披露：我公司的服务 Collabinate ( [http://www.collabinate.com](http://www.collabinate.com) ) 明确旨在使构建活动流变得非常简单、高效且可扩展。

# apache - 是否有显示 apache vhost 配置的命令？

> ID：14525308
> 
> 赞同：0
> 
> 时间：2013-01-25T15:53:47.983
> 
> 标签：apache, vhosts

我在一个拥有数百个虚拟主机和虚拟主机配置的开发系统上工作。手动识别哪些文件路径、主机名和虚拟主机配置相关可能很耗时，并且可能并不总是产生准确或完整的结果。

是否有 Apache 命令可以显示与给定主机名或路径相关的虚拟主机配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:04:31.463

恐怕没有这样的命令，但是您可以使用“apache2ctl -S”（或“httpd -S”，取决于您的发行版）来列出每个虚拟主机及其定义位置。

请注意，-s 是“-t -D DUMP_VHOSTS”的较短同义词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T13:58:33.977

鉴于您的虚拟主机整齐地组织在文件中，并且这些文件在某种程度上代表主机名，这可能在命令行上工作

```
grep "DocumentRoot" /etc/apache2/sites-enabled/* 
```

# iphone - UITableView 行插入崩溃

> ID：14525311
> 
> 赞同：1
> 
> 时间：2013-01-25T15:53:56.623
> 
> 标签：iphone, ios, objective-c, uitableview

我正在尝试将行/单元格添加到 tableview，但在 [Table endUpdates] 之前；...应用程序因错误而崩溃：

*** -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit/UIKit-2372/UITableView.m:909 中的断言失败 ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“尝试将第 33 行插入第 0 部分，但存在更新后第 0 节中只有 33 行'

```
-(IBAction)createTask
{
    Data  *sharedManager = [Data sharedManager]; //singleton class
    [Table  beginUpdates];

    [Table insertRowsAtIndexPaths:[NSArray arrayWithObject:
                                          [NSIndexPath indexPathForItem: 
                                                [sharedManager._NAME count] inSection:0]] 
                                          withRowAnimation:UITableViewRowAnimationNone];

     // sharedManager._NAME is NSMutableArray wich consists names for cells
    [Task_handler createTask]; // adds objects to NSMutableArray's 
                               // (like names for cels and so on)

    [Table  endUpdates];
    [Table reloadData];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    Data  *sharedManager = [Data sharedManager];
    NSLog(@"numberOfRowsInSection : %d",[sharedManager._NAME count]);

    return [sharedManager._NAME count];
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:23:03.797

在向表格添加行时，您需要让 TableView 知道它有更多的单元格要管理。在使用之前`insertRowsAtIndexPaths:`，您需要运行该`[TaskHandler createTask]`方法，该方法将为您的数据源数组创建一个对象。该数组应该是由您的 TableView 委托方法计算的实例变量`numberOfRowsInSection:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:16:51.870

这个怎么样：

```
-(IBAction)createTask
{
    Data  *sharedManager = [Data sharedManager]; //singleton class
    [Table  beginUpdates];
    [Table insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForItem: [sharedManager._NAME count]+1 inSection:0]] withRowAnimation:UITableViewRowAnimationNone];
    [Task_handler createTask]; //adds objects to NSMutableArray's (like names for cels and so on)
    [Table reloadData];
    [Table  endUpdates];
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-31T09:50:47.650

通过将代码更改为：

```
Data  *sharedManager = [Data sharedManager];
[Table  beginUpdates];
[Table insertRowsAtIndexPaths:[NSArray arrayWithObject:
                                          [NSIndexPath indexPathForItem: 
                                                [sharedManager._NAME count] inSection:0]] 
                                      withRowAnimation:UITableViewRowAnimationNone];
[Task_handler createTask];
[Table  endUpdates]; 
```

# excel - 代码行中的宏错误

> ID：14525314
> 
> 赞同：-1
> 
> 时间：2013-01-25T15:54:01.530
> 
> 标签：excel, vba

我有一个宏，它向 a 列中的每个数字添加零，直到数字中的总位数为 7，它一直工作到今天，我在 For1= i=1 To endrow = -1 和我无法弄清楚这意味着什么。

代码是

```
Sub AddZeroes()
'Declarations
Dim i As Integer, j As Integer, endrow As Long
'Converts the A column format to Text format
Application.ScreenUpdating = False
Columns("A:A").Select
    Selection.NumberFormat = "@"
'finds the bottom most row
endrow = ActiveSheet.Range("A1").End(xlDown).Row
'selects the top cell in column A
ActiveSheet.Range("A1").Select

'loop to move from cell to cell
For i = 1 To endrow - 1
                'Moves the cell down 1\. Assumes there's a header row so really starts at row 2
                ActiveCell.Offset(1, 0).Select
                'The Do-While loop keeps adding zeroes to the front of the cell value until it hits a length of 7
    Do While Len(ActiveCell.Value) < 7
                                ActiveCell.Value = "0" & ActiveCell.Value
                Loop
Next i
Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:58:39.733

`i`可能已达到整数的上限（32767）。`Row`返回 a`Long`所以`i`应该是 a `Long`，比如`EndRow`

`Dim i As Long`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:11:47.923

我重写了你的代码：

```
Sub test()
    Dim c As Range, rngTarget As Range
    Set rngTarget = Range("A:A").SpecialCells(xlCellTypeConstants, xlNumbers)
    rngTarget.NumberFormat = "@"
    For Each c In rngTarget
        c.Value = Left(c.Value & "0000000", 7)
    Next c
End Sub 
```

更清晰，更快。

# java - Android - 在默认图库应用程序中从 drawable 打开图像

> ID：14525316
> 
> 赞同：0
> 
> 时间：2013-01-25T15:54:01.903
> 
> 标签：java, android

我正在开发具有多个图像视图的应用程序，当我单击图像时，我希望它通过 android 默认图库图像选择器打开。我试过这样：

```
String str = "android.resource://" + getPackageName() +"/"+R.drawable.wall1;

Uri path = Uri.parse(str);
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(path, "image/*");
startActivity(intent); 
```

但它不起作用，我得到异常： android.content.ActivityNotFoundException: 没有找到处理 Intent { act=android.intent.action.VIEW dat=android.resource://com.example.demo/2130837505 typ= 的活动图片/* }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:55:52.820

这是因为您的设备上没有任何活动能够查看`Uri`该`android:resource://`方案中的图像。如果我不得不猜测，大约 99% 的 Android 设备都会有类似的问题。

编写您自己的图像查看器，或者将图像移动到第三方应用程序更可能支持的位置，例如您自己`ContentProvider`的文件或本地文件。

# asp.net - 在 IIS Express 上获取 403 错误 Azure 项目

> ID：14525319
> 
> 赞同：0
> 
> 时间：2013-01-25T15:54:08.033
> 
> 标签：asp.net, iis, azure

我有 MVC4 Azure 项目。我正在毫无问题地部署到云端，但是当我尝试在 IIS Express 上发布时出现 403 错误。如果我从项目中删除 azure，它在 IIS 中运行良好，但我需要同时发布 Azure 和 IIS。

我尝试更改 Azure Web 角色，但没有任何改变。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:16:38.853

您无法将 Azure 项目（Web 角色）部署到 IIS - 您将 Web 项目发布到 IIS - 要在本地运行 Azure 项目，您必须使用模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:01:21.170

您需要安装 Azure 工具来运行 Azure 项目。您可以从这里获取它 [http://www.windowsazure.com/en-us/develop/downloads/](http://www.windowsazure.com/en-us/develop/downloads/)

Azure Project 将被部署到本地计算模拟器，并且它也可以选择使用存储模拟器......

# asp.net-mvc - 使用 MVC 自定义登录页面的基于声明的安全性

> ID：14525321
> 
> 赞同：1
> 
> 时间：2013-01-25T15:54:17.877
> 
> 标签：asp.net-mvc, wif, claims-based-identity

我正在开发 MVC 应用程序并希望使用基于 WIF 和声明的安全性。但是，我对登录的方式感到非常失望。我的意思是重定向到 STS 登录页面，然后重定向回我的页面。这根本不是用户友好的。

我想在我的应用程序中实现登录页面（实际上它将是弹出对话框）。与使用 Web API 相比，我希望能够执行 STS 请求并获取安全令牌并初始化 WIF 基础结构（原理等）。

这是一个好方法吗？有没有人做过类似的事情？有人有我想要做的一些样本吗？

我只是担心我无法控制 STS 登录页面的布局和样式。此外，我将拥有移动应用程序，并且必须使用 Web API 服务执行登录。

你有什么建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T00:29:25.330

考虑使用[MembershipReboot](https://github.com/brockallen/BrockAllen.MembershipReboot)成员提供程序，它使用基于声明的安全性，而不是基于 Microsoft 的传统成员提供程序。

它没有文档，但在 zip 文件中，您可以找到 2 个使用 MemebershipReboot 提供程序的示例项目，其中解释了您需要了解的所有信息。

事实上，在今天阅读这篇[博文后](http://brockallen.com/2012/09/02/think-twice-about-using-membershipprovider-and-simplemembership)，我决定在我当前的项目中使用这种方法。我现在还在挣扎，我很兴奋！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:28:16.767

好吧 - 你当然可以这样做。这不需要特定于 WIF。调用服务，传递凭据 - 并在确定时设置登录 cookie。

但是，如果您想要 SSO，您必须使用户代理往返 STS - 否则您无法建立登录会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T15:06:59.847

除了 Ashkan 的建议之外，[Brock Allen](http://brockallen.com/)还提供了有关如何实现[MembershipReboot](https://github.com/brockallen/BrockAllen.MembershipReboot)与 IdentityServer 关联的可靠文档。您可以在此处发现它们是一种配置自定义实现的方法。他们还有一些来自 Dominick Baier (leastprivilege) 的关于 vimeo 的教程，这些教程将提供一个完整的入门指南！我希望这有帮助！

# c# - 默认字符串排序顺序

> ID：14525325
> 
> 赞同：4
> 
> 时间：2013-01-25T15:54:22.183
> 
> 标签：c#, .net

默认排序顺序是实现细节吗？或者如何选择默认比较器？

它让我想起了这个建议。“不要在数据库中存储 HashCodes”

以下代码是否保证以相同的顺序对字符串进行排序？

```
string[] randomStrings = { "Hello", "There", "World", "The", "Secrete", "To", "Life", };
randomStrings.ToList().Sort(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:56:38.377

字符串始终按字母顺序排序。

默认 ( `string.CompareTo()`) 使用当前文化的 Unicode 比较规则：

```
 public int CompareTo(String strB) {
        if (strB==null) { 
            return 1;
        } 

        return CultureInfo.CurrentCulture.CompareInfo.Compare(this, strB, 0);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:57:48.887

此重载[`List<T>.Sort`](http://msdn.microsoft.com/en-us/library/3da4abas.aspx)使用字符串的[默认比较器](http://msdn.microsoft.com/en-us/library/azhsac5f.aspx)，其实现[方式如下](http://msdn.microsoft.com/en-us/library/35f0x18w.aspx)：

> 此方法使用当前区域性执行单词（区分大小写和区域性）比较。有关单词、字符串和序数排序的更多信息，请参阅`System.Globalization.CompareOptions`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:58:49.527

如果您未指定比较器，则 sort 将使用按字母顺序排序的默认比较器。因此，要回答您的问题，是的，代码将始终以相同的顺序返回字符串。

sort 方法有一个重载，如果您希望以不同的顺序对数据进行排序，则允许您指定自己的比较器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:56:41.483

您的代码从数组复制创建一个新列表，对该列表进行排序，然后将其丢弃。它根本不会改变数组。

尝试：

```
Array.Sort(randomStrings); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T16:08:13.753

我想在您对字符串进行排序时发布与文化相关的回复，但 Jon 已经添加了它：-(。是的，我认为您也可能会考虑 acc 这个问题，因为默认情况下它是按字母顺序选择的，如果是随机字符串除了英语（即西班牙语）之外，作为外语存在，毕竟会放在英语之后，但它们出现在相同的第一个字母中。这意味着你需要一个全球化的命名空间来处理它。

顺便说一句，蒂莫西，这是**秘密**而不是**秘密**：D

# ruby-on-rails - 试图让delayed_job 3.0.4 作为守护进程运行

> ID：14525328
> 
> 赞同：3
> 
> 时间：2013-01-25T15:54:28.463
> 
> 标签：ruby-on-rails, delayed-job

所以我在生产应用程序上安装了延迟作业。它通过 rake jobs:work 运行良好。但是当我尝试通过 capistrano 启动脚本时：

```
run "if [ -d #{current_path} ]; then cd #{current_path} && RAILS_ENV=#{rails_env} script/delayed_job start -n 2; fi" 
```

它开始时没有错误。但是如果我检查`script/delayed_job status`它告诉我没有实例正在运行。有什么建议么？

**编辑**

看起来有东西在运行（通过`sudo ps aux | grep delayed`）：

```
 1000      7952  0.0  0.1 112312   832 pts/0    S+   16:17   0:00 grep delayed 
```

运行脚本时的输出：

```
/path/to/latest/release/config/initializers/bypass_ssl_verification_for_open_uri.rb:2: warning: already initialized constant VERIFY_PEER 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:22:16.690

检查您的 shared/tmp/pid 文件夹的权限。

除非运行 capistrano 的用户有权将 PID 文件写入文件夹，否则延迟作业将不会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:55:32.227

这就是我使用 capistrano 启动延迟工作恶魔的方式，也许这也对你有用：

```
require "delayed/recipes"

%w[start stop restart].each do |command|
  after "deploy:#{command}", "delayed_job:#{command}"
end 
```

的输出`ps aux | grep delayed`只显示了它自己的进程，所以 DJ 没有在你的机器上运行。也许这与您的 -`if`子句有关。您可以尝试删除它，看看它是否使用`ps aux | grep`命令正确启动。输出应该是这样的：

```
username    9989  0.0  0.0   7640   892 pts/0    S+   10:54   0:00 grep delayed
username   10048  0.0  9.4 288244 99156 ?        Sl   Jan22   2:16 delayed_job 
```

# mysql - 另一个查询中的 SQL 查询

> ID：14525342
> 
> 赞同：0
> 
> 时间：2013-01-25T15:55:12.053
> 
> 标签：mysql

我有一个包含客户的表格和另一个包含所有订单的表格。

我想显示一个客户列表，并同时显示他们订单的总价值。

显然，我可以遍历客户，然后使用 PHP 运行另一个查询来获取每个客户的收入。我不认为这是有效的。

我希望实现这样的目标：

```
SELECT username, [SELCT sum(revenue) from orders where userID=userID] from customers 
```

为此显示输出：

```
bob      10000
jeff     25000
alan     500 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:57:15.413

```
SELECT  a.username, SUM(b.revenue) totalRevenue
FROM    customers a
        LEFT JOIN Orders b
            ON a.userID = b.UserID
GROUP   BY a.username 
```

这将列出所有有或没有的客户`Orders`。

要进一步了解有关加入的更多信息，请访问以下文章，

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:57:23.200

你很近...

```
 SELECT username, (SELECT sum(revenue) from orders where userID=c.userID) rev 
 from customers c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:57:42.947

您可以加入表格并按订单名称对它们进行分组

```
SELECT o.username, 
       sum(revenue) as sum_revenue
from orders  o
left outer join customers c on c.userid = o.userid
group by o.username 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:58:24.040

不需要子选择。尝试这样的事情： -

```
SELECT customers.userID, customers.username, SUM(revenue)
FROM customers INNER JOIN orders ON customers.userID = orders.userID
GROUP BY customers.userID, customers.username 
```

# arrays - numpy 数组的最大大小是多少？

> ID：14525344
> 
> 赞同：30
> 
> 时间：2013-01-25T15:55:18.440
> 
> 标签：arrays, numpy, python-2.7, size, max

我正在尝试创建一个包含 2 708 000 000 个元素的矩阵。当我尝试创建一个这种大小的 numpy 数组时，它给了我一个值错误。有什么办法可以增加最大数组大小吗？

## a=np.arange(2708000000)

ValueError Traceback（最近一次调用最后一次）

ValueError：超出最大允许大小

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-25T16:06:17.027

您正在尝试创建一个包含 27 亿个条目的数组。如果您正在运行 64 位 numpy，每个条目 8 个字节，那么总共将是 20 GB。

所以几乎可以肯定你只是用完了你机器上的内存。numpy 中没有一般的最大数组大小。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-24T00:07:49.673

ValueError 表示大小太大而无法分配，而不是内存不足。在我的笔记本电脑上，使用 64 位 python，如果我减少位数，我可以分配它：

```
In [16]: a=np.arange(2708000000)
---------------------------------------------------------------------------
MemoryError                               Traceback (most recent call last)
<ipython-input-16-aaa1699e97c5> in <module>()
----> 1 a=np.arange(2708000000)

MemoryError: 

# Note I don't get a ValueError

In [17]: a = np.arange(2708000000, dtype=np.int8)

In [18]: a.nbytes
Out[18]: 2708000000

In [19]: a.nbytes * 1e-6
Out[19]: 2708.0 
```

在您的情况下， arange 使用`int64`位，这意味着它是 16 倍，或大约 43 GB。一个 32 位进程只能访问大约 4 GB 的内存。

根本原因是用于访问数据的指针的大小以及您可以用这些位表示多少个数字：

```
In [26]: np.iinfo(np.int32)
Out[26]: iinfo(min=-2147483648, max=2147483647, dtype=int32)
In [27]: np.iinfo(np.int64)
Out[27]: iinfo(min=-9223372036854775808, max=9223372036854775807, dtype=int64) 
```

请注意，如果我尝试创建一个大得离谱的数组，我可以复制您的 ValueError ：

```
In [29]: a = np.arange(1e350)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-29-230a6916f777> in <module>()
----> 1 a = np.arange(1e350)

ValueError: Maximum allowed size exceeded 
```

如果您的机器有很多内存，如您所说，它将是 64 位，因此您应该安装 Python 64 位才能访问它。另一方面，对于如此大的数据集，您应该考虑使用核外计算的可能性。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-18T00:41:37.873

我能够创建一个大小为 60 亿的数组，占用了 45GB 的内存。默认情况下，numpy 创建了一个 dtype 为 float64 的数组。通过降低精度，我能够节省大量内存。

```
np.arange(6000000000,dtype=np.dtype('f8'))
np.arange(6000000000,dtype=np.dtype('f4'))
#etc... 
```

默认 == float64

*   np.float64——45.7GB

*   np.float32 -- 22.9GB

*   np.int8——5.7GB

显然8位整数不能存储6B的值。 **我确信在某个时候存在最大大小，但我怀疑它在 2016 年已经超出了任何可能。**有趣的是，“Python Blaze”允许您在磁盘上创建 numpy 数组。我记得前段时间玩过它并创建了一个占用 1TB 磁盘的超大阵列。

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2014-05-23T22:06:51.987

确实和系统最大地址长度有关，简单来说是32位系统还是64位系统。这是对这些问题的解释，最初来自 Mark Dickinson

简短的回答：Python 对象开销正在杀死你。在 64 位机器上的 Python 2.x 中，字符串列表每个列表条目消耗 48 个字节，甚至在考虑字符串内容之前。对于您描述的数组大小，这超过了 8.7 Gb 的开销。在 32 位机器上会好一些：每个列表条目只有 28 个字节。

更详细的解释：您应该知道 Python 对象本身可能非常大：即使是简单的对象，如整数、浮点数和字符串。在您的代码中，您最终会得到一个字符串列表列表。在我的（64 位）机器上，即使是一个空字符串对象也会占用 40 个字节，为此您需要为指向内存中该字符串对象的列表指针添加 8 个字节。所以这已经是每个条目 48 个字节，或大约 8.7 Gb。鉴于 Python 一次以 8 个字节的倍数分配内存，并且您的字符串几乎可以肯定是非空的，您实际上正在查看每个条目 56 或 64 个字节（我不知道您的字符串有多长）。

可能的解决方案：

(1) 通过将条目从字符串转换为适当的整数或浮点数，您可能会做得更好。

(2) 通过使用 Python 的数组类型（与列表不同！）或使用 numpy：你会做得更好：那么你的 int 或 float 将只占用 4 或 8 个字节。

从 Python 2.6 开始，您可以使用 sys.getsizeof 函数获取有关对象大小的基本信息。请注意，如果将其应用于列表（或其他容器），则返回的大小不包括包含的列表对象的大小；仅用于容纳这些对象的结构。这是我机器上的一些值。

# c# - 来自 com 服务器的回调很慢

> ID：14525345
> 
> 赞同：1
> 
> 时间：2013-01-25T15:55:19.610
> 
> 标签：c#, com, callback, com-interop

我正在使用来自 .Net C# 应用程序的本机 COM 服务器

一切正常，除了从 COM 服务器到 .Net 应用程序的回调逐渐变慢。服务器和 .Net 应用程序始终在同一台机器上运行。

从 .Net 调用 COM 服务器总是很快的。

奇怪的是，即使它们运行相同的二进制文件，它也不会在所有计算机上发生。

我在这个问题上花了很多时间。将回调速度快的环境与回调速度慢但没有发现任何特别之处的环境进行比较。

*   回调开始很快，但随着时间的推移呈指数级增长。
*   回调是否分配给 .Net 方法并不重要。（有一个服务器开关可以关闭所有回调。这就是我知道问题出在回调的方式）
*   速度较慢的计算机使用 Window 7 64 位，但相同的配置在其他计算机上速度很快。
*   同一域和网络上有慢速和快速计算机
*   不管用户是本地管理员还是标准用户
*   我已经监控了磁盘/网络活动，但慢和快之间没有区别
*   内存消耗没有明显差异
*   从WinDbg查看了CLR内存，没有发现什么奇怪的

我注意到的一些事情：

*   当回调很慢时，服务器进程使用 100% CPU。
*   用进程资源管理器查看调用堆栈，服务器大部分时间都在 RPC Ndr* 函数之一中，即[NdrClientCall2](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374215%28v=vs.85%29.aspx)。

我现在没有想法，需要一些帮助来解决这个问题。

# php - 如何在 Code Igniter 中创建我自己的对象

> ID：14525352
> 
> 赞同：1
> 
> 时间：2013-01-25T15:55:42.267
> 
> 标签：php, codeigniter, class, object

我想在现有的 CodeIgniter 项目中创建自己的类。

我将在控制器中从该类创建一个对象（比如 Object1）（基于用户 ID）。该对象将检索数据库中的数据以填充其变量。

我希望能够在我的控制器的任何功能中使用这个对象，如果可能的话，我想将它传输到我的视图中。

在不久的将来，我可能会添加另一个包含多个 Object1 的对象（比如 Object2）。

正确的方法是什么？我开始在模型中写它，但它似乎不合适..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:16:50.180

万一有人感兴趣，我最终使用了一个存储在 /classes/ 中的普通 php 文件。

# python - Python 自动化 - pythoncom.CoInitialize 不起作用

> ID：14525355
> 
> 赞同：1
> 
> 时间：2013-01-25T15:55:52.523
> 
> 标签：python, powerpoint, win32com, pythoncom

我正在自动化 PowerPoint。以前一切正常，但现在如果我在一个线程中实例化 PPT，即使在调用 pythoncom.CoInitialize() 之后，我也无法在另一个线程中获得它的名称和幻灯片计数。

线程 1：

```
pythoncom.CoInitialize()
self.pptApp = win32com.client.Dispatch("PowerPoint.Application") 
```

线程2（一段时间后）：

```
pythoncom.CoInitialize()
print "name", self.pptApp.ActivePresentation 
```

请注意，如果我在初始线程上运行 Thread2 中的代码，它就可以工作。否则如上所述，它会引发此错误：

```
self.activePres = self.pptApp.ActivePresentation
File "C:\Python26\Lib\site-packages\win32com\client\dynamic.py", line 505, in __getattr__
ret = self._oleobj_.Invoke(retEntry.dispid,0,invoke_type,1)
com_error: (-2147220995, 'Object is not connected to server', None, None) 
```

# java - 将 playframework 1.2.5 与现有数据库一起使用

> ID：14525359
> 
> 赞同：1
> 
> 时间：2013-01-25T15:56:06.007
> 
> 标签：java, jpa, playframework, playframework-1.x

我正在尝试从 Oracle 10g 数据库中获取一些数据。因此，我在 application.conf 文件中添加了 db 相关详细信息，当我启动服务器时，在命令提示符中显示连接成功。

我创建了一个实体类，数据库中存在一个类似于类名的表。

```
Query query = JPA.em().createQuery("select * from Emp");
    List<Emp> empList = query.getResultList();
    for(Emp employees : empList)
        System.out.println(employees.emp_name); 
```

当我尝试运行代码时出现以下异常：

`IllegalArgumentException occured : org.hibernate.hql.ast.QuerySyntaxException: unexpected token: * near line 1, column 8 [select * from models.Emp]`

**编辑：**

如果我将代码更改为：

```
List<Emp> empList = Emp.all().fetch();
    for(Emp employees : empList)
        System.out.println(employees.emp_name); 
```

然后我得到一个例外：

`JPAQueryException occured : Error while executing query from models.Emp: ORA-00904: "EMP0_"."ID": invalid identifier`

这是我的名为 Emp.java 的模型类：

```
package models;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;

import play.data.validation.Required;
import play.db.jpa.Model;

@Entity
public class Emp extends Model {

@Id
@Column(name="Emp_Id")
public Integer id;
public String emp_name;
public Integer dept_id;
public Integer age;
public String sex;

} 
```

这是`emp`Oracle DB 中存在的表，其中包含一些数据：

```
EMP_ID  NUMBER. EMP_NAME VARCHAR2(20), DEPT_ID NUMBER, AGE NUMBER, SEX VARCHAR2(6) 
```

因为我不知道这个问题的原因，所以我改写了这个线程的标题。

请让我知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:05:25.223

这样做的方法是

```
List<Emp> empList = Emp.all().fetch(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:25:09.357

我会做一个： `List<Emp> empList = Emp.findAll();`

但我不认为这是实际的问题。问题出在到数据库表的映射中。您的错误信息：

```
`JPAQueryException occured : Error while executing query from models.Emp: ORA-00904:        "EMP0_"."ID": invalid identifier` 
```

意味着实际查询尝试获取列“ID”而不是您想要的实际列（根据您的注释，`@Column(name="Emp_Id")`）。

注释没有按预期工作。也许大写/小写字符有问题？

编辑回复：

您的模型类 EMP 从生成唯一标识符 id 的 playframework 父模型类继承。这可能会导致您的问题。

# ruby-on-rails - Mobile-Fu 将桌面 IE 检测为平板电脑

> ID：14525360
> 
> 赞同：1
> 
> 时间：2013-01-25T15:56:09.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internet-explorer, mobile-fu

通常大多数 IE 发送这个用户代理

```
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; MS-RTC LM 8) 
```

但是一些 IE 发送这个 Useragent

```
 Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Tablet PC 2.0; .NET4.0C; .NET4.0E; MS-RTC LM 8) 
```

我有 2 个布局，application.html.haml 和 application.mobile.haml
因为第二个包括“Tablet PC 2.0”，Mobile-Fu 将格式设置为 :tablet，它不会在我的 rails 应用程序中呈现布局。

请帮助我解决此问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:07:21.423

如果请求来自 IE 并且包括平板电脑，我暂时通过更改用户代理来修复，

```
class ApplicationController < ActionController::Base

  before_filter :change_user_agent_for_ie

  def change_user_agent_for_ie
    if request.env["HTTP_USER_AGENT"].include?("Tablet PC 2.0") && (request.env["HTTP_USER_AGENT"].include?("MSIE"))
      request.env["HTTP_USER_AGENT"] = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; MS-RTC LM 8)"
    end
  end 
```

不确定永久修复此问题的方法是什么。

# c# - 在 Windows 8 桌面应用程序上使用 MediaCapture

> ID：14525363
> 
> 赞同：7
> 
> 时间：2013-01-25T15:56:23.267
> 
> 标签：c#, windows-8, webcam, winrt-xaml, windows-store-apps

在 Windows 8 桌面应用程序上，我需要使用 C# 4.5 中的相机拍照。

我尝试使用 CameraCaptureUI 类，但它在桌面应用程序上不可用。

所以我尝试使用适用于 Metro 应用程序或桌面应用程序的 MediaCapture 类。根据此处找到的示例，它效果很好：http: [//code.msdn.microsoft.com/windowsapps/media-capture-sample-adf87622/](http://code.msdn.microsoft.com/windowsapps/media-capture-sample-adf87622/)

```
var capture = new MediaCapture();
// Find the camera device id to use
string deviceId = "";
var devices = await Windows.Devices.Enumeration.DeviceInformation.FindAllAsync(Windows.Devices.Enumeration.DeviceClass.VideoCapture);
for (var i = 0; i < devices.Count; i++) {
     Console.WriteLine(devices[i]);
     deviceId = devices[i].Id;
}

// init the settings of the capture
var settings = new MediaCaptureInitializationSettings();
settings.AudioDeviceId = "";
settings.VideoDeviceId = deviceId;
settings.PhotoCaptureSource = Windows.Media.Capture.PhotoCaptureSource.Photo;
settings.StreamingCaptureMode = Windows.Media.Capture.StreamingCaptureMode.Video;
await capture.InitializeAsync(settings);

// Find the highest resolution available
VideoEncodingProperties resolutionMax = null;
int max = 0;
var resolutions = capture.VideoDeviceController.GetAvailableMediaStreamProperties(MediaStreamType.Photo);
for (var i = 0; i < resolutions.Count; i++) {
     VideoEncodingProperties res = (VideoEncodingProperties)resolutions[i];
     Console.WriteLine("resolution : " + res.Width + "x" + res.Height);
     if (res.Width * res.Height > max) {
          max = (int)(res.Width * res.Height);
          resolutionMax = res;
     }
}
await capture.VideoDeviceController.SetMediaStreamPropertiesAsync(MediaStreamType.Photo, resolutionMax);

ImageEncodingProperties imageProperties = ImageEncodingProperties.CreateJpeg();
var fPhotoStream = new InMemoryRandomAccessStream();

// THE 2 LINES I NEED TO ADD
// captureElement.Source = capture;
// await capture.StartPreviewAsync();

// Take the photo and show it on the screen
await capture.CapturePhotoToStreamAsync(imageProperties, fPhotoStream);
await fPhotoStream.FlushAsync();
fPhotoStream.Seek(0);

byte[] bytes = new byte[fPhotoStream.Size];
await fPhotoStream.ReadAsync(bytes.AsBuffer(), (uint)fPhotoStream.Size, InputStreamOptions.None);

BitmapImage bitmapImage = new BitmapImage();
MemoryStream byteStream = new MemoryStream(bytes);
bitmapImage.BeginInit();
bitmapImage.StreamSource = byteStream;
bitmapImage.EndInit();
image.Source = bitmapImage; 
```

我可以使用相机拍照，但无法在拍照前显示预览。为了能够显示预览，我必须使用组件 CaptureElement，例如使用以下代码：

```
captureElement.Source = mediaCapture;
await mediaCapture.startPreviewAsync(); 
```

不幸的是，我不能在非商店应用程序上使用 CaptureElement。我可以在 WPF 或 WinForm 应用程序中使用另一个组件来显示相机的预览吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-19T22:42:30.500

迟到的回复，但以防将来对人们有所帮助：可以通过 D3DImage 和一些本机互操作来在 WPF 中预览 MediaCapture（创建自定义媒体基础接收器，获取 DirectX 11 纹理，将它们转换为 DirectX 9）。它是一些代码，但可以封装，因此从 C# 调用它仍然很简单。这是一些代码示例： [https ://github.com/mmaitre314/MediaCaptureWPF](https://github.com/mmaitre314/MediaCaptureWPF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T15:04:11.620

拍摄照片后，我执行以下操作：

```
_ms.Seek(0);
var _bmp = new BitmapImage();
_bmp.SetSource(_ms);
preview1.Source = _bmp; 
```

预览 XAML 控件是

```
<Image x:Name="preview1" Margin="850,90,102,362" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T09:56:51.620

> Unfortunately, I cannot use a CaptureElement on a non store app. Is there another component that I >can use in a WPF or WinForm app, to be able to show the preview of the camera ?

For a solution to using something similar to CaptureElement in a non-WinRT application, I've found this: [http://wpfcap.codeplex.com/](http://wpfcap.codeplex.com/)

I have used it on a wpf control hosted in a Windows forms app and had no problems. Only that I had to keep using MediaCapture to capture photos and I'm also having the problem of the pictures too dark on the tablet (ok on pc). It seems that calling capture.CapturePhotoToStreamAsync sincronously takes the photo as you see it on the preview.

# visual-studio-2010 - 重新安装操作系统后使用 VS 2010 文件夹

> ID：14525371
> 
> 赞同：0
> 
> 时间：2013-01-25T15:56:47.113
> 
> 标签：visual-studio-2010, windows-7

我不得不重新安装我的操作系统。Visual Studio 2010 位于 D 上，因此它在新安装的 Windows 中仍然存在。我现在可以“一如既往”使用 VS2010 还是必须设置路径变量等？

除此之外，我必须使用哪个可执行文件来启动 VS？我搜索了 VS 文件夹中的可执行文件，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:40:41.540

您将不得不重新安装，因为新操作系统中将缺少关联（以及此类其他注册表项）。

幸运的是，VS 安装程序有一个**修复**选项，因此它不需要复制很多文件。

# jquery - Fancybox ajax 加载图像会减慢 chrome

> ID：14525372
> 
> 赞同：0
> 
> 时间：2013-01-25T15:56:49.183
> 
> 标签：jquery, performance, google-chrome, fancybox

所以我将一个图像列表加载到一个 jQuery Fancybox 中（大约 10 个图像，都在几个 mbs 下），它使 chrome 浏览器陷入困境，以至于无法使用。在我的进程列表中查看 chrome 显示，当它加载时，它从大约 165mb 内存跳到超过 250mb，当我将鼠标悬停在任何东西上时，它可以高达 300mb 以上。我不确定这是否是 fancybox 或 chrome 的已知问题，还是什么？我不确定我是否可以为此写一个小提琴。任何想法/意见表示赞赏。

花式盒：1.3.4

jQuery：1.8.3

小提琴：http: [//jsfiddle.net/codephobia/zUWrb/](http://jsfiddle.net/codephobia/zUWrb/)

**编辑：**

我已经包含了一个 Fiddle 来展示一些使用的 css、html 和 javascript。这一切都很基本。输出的图像 html 如下所示：

```
<ul>
    <li data-width="60" data-height="60" data-photo="6889639425_49a61a9559_b_photo.jpg" data-thumb="6889639425_49a61a9559_b_thumb.jpg">
        <img src="../photos/contacts/6889639425_49a61a9559_b_thumb.jpg" width="100" height="100" border="0" alt="6889639425_49a61a9559_b_thumb.jpg">
        <div class="photo-details clearfix">
            <a href="#" class="photo-delete" data-id="">Delete</a>
            <a href="../photos/contacts/6889639425_49a61a9559_b_photo.jpg" class="photo-view" target="_blank">View</a>
        </div>
        <div class="check-icon"></div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:00:25.440

在没有看到代码的情况下很难说出可能导致这种情况的原因，我建议使用 Chrome 浏览器开发者控制台（Windows 上的 Ctrl-Shift-I）中的“配置文件”功能来创建 JavaScript CPU 配置文件，这将向您显示哪一部分你的 JS 代码占用了 CPU。

# html5-canvas - 在文本路径上选择字体大小

> ID：14525373
> 
> 赞同：0
> 
> 时间：2013-01-25T15:56:49.137
> 
> 标签：html5-canvas, kineticjs

我正在开发一个径向菜单（用于游戏），并且在获取沿路径的文本以完全按照我想要的方式运行时遇到了一些麻烦。[这是](http://www.placeholder-software.co.uk/static-files/.radial/radial.html)目前菜单的示例：

![轻微破碎](../Images/9f5f830935a7fed9b14f490cf4232c62.png)

我希望所有文本都与它所在的节点的中心对齐，并且 fontSize 足够小以使文本适合可用空间。通过缩放字体并测量宽度直到它适合，这对于纯文本来说是相当简单的：

```
var fontSize = 19;
var titleText = new Kinetic.Text({
    text: title,
    fontSize: fontSize ,
    fontFamily: 'Calibri',
    fill: 'white',
    rotationDeg: rotation
});

while (titleText.getWidth() > availableSpace)
    titleText.setFontSize(--fontSize); 
```

但是，这种方法不能应用于弯曲的文本，因为（据我所知）没有办法测量字符串沿路径放置时的长度。

*当文本沿路径放置时，我应该如何实现文本的居中和缩放？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:43:36.313

这是一个关于居中的技巧，但你明白了：

[http://jsfiddle.net/ysaLp/2/](http://jsfiddle.net/ysaLp/2/)

基本上，当您的列表中有每个项目时，您希望在开头添加空格，具体取决于弧中的总空间。

你可以做（​​同样，在一个循环内）：

```
textPathObjectName.setText(' ' + textPathObjectName.getText()); //dependent on the length of the width of text ( .getTextWidth() ) 
```

在调整大小方面你得到：http: [//jsfiddle.net/ysaLp/5/](http://jsfiddle.net/ysaLp/5/)

```
 for (var i = 1; i < 5 && titleText.getTextWidth() > circumference ; i++)
        titleText.setFontSize(titleText.getFontSize()-i); 
```

这会降低你的字体，直到它“适合”你的楔形圆周

它还有助于以较低的值开始字体，因为您正在计算路径数据，所以首先将字体大小设置为 15。

# c - 如果没有明显使用，编译器是否允许删除对结构成员的分配？

> ID：14525374
> 
> 赞同：6
> 
> 时间：2013-01-25T15:56:49.427
> 
> 标签：c, standards-compliance

考虑以下代码：

```
char buffer[256];

struct stX
{
    int a;
    int b;
    int c;
};

void * my_memcpy ( void * destination, const void * source, size_t num );

int main()
{
    struct stX x;
    x.a = 1;
    x.b = 2;
    x.c = 3;
    my_memcpy(buffer, &x.b, 2 * sizeof(int));
    {
        int i;
        for (i = 0; i < 2 * sizeof(int); ++i) {
            printf("%d\n", buffer[i]);
        }
    }
    return 0;
} 
```

嵌入式系统的特定编译器决定删除对 xa 和 xc 的分配（因为它们从未使用过（至少不明显））。这是 c 标准允许的优化吗？

当然，将结构实例定义为 volatile 会导致包含的分配。

gcc 和 msvc 不执行此优化（但这并不是真正的推理）。

**更新：**正如一些答案（正确）假设的那样，由于 memcpy 的已知定义，编译器可以优化，但是，这不是我的特定实现所做的。（它为堆栈上的结构保留内存，只是不执行分配。）假设我们用编译器没有可用定义的函数替换了 memcpy。另外，假设在函数调用之后使用缓冲区。我相应地更新了上面的示例代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:00:17.730

是的，只要应用程序的可观察行为不变，编译器就可以自由地做任何事情。^*

~~但这假设您有一个*符合要求的程序*，即具有明确定义的程序。您的代码没有表现出明确定义的行为；`x.c`通过取消引用指向的指针进行访问是无效的`x.b`（这是您隐含的要求`memcpy`）。~~

~~**更新：**上面的段落可能不正确；请参阅评论中的讨论...~~

 ~~* * *

[* 有关更严格的定义，请参阅 C99 标准的第 5.1.2.3 节：

> 访问 volatile 对象、修改对象、修改文件或调用执行任何这些操作的函数都是*副作用*，它们是执行环境状态的变化。
> 
> ...
> 
> 如果实际实现可以推断出它的值没有被使用并且没有产生所需的副作用，则它不需要评估表达式的一部分] 

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:06:35.597

GCC 进行了完全相同的优化（使用 x86_64 和 -O3）：

```
 .file   "test.c"
        .section        .text.startup,"ax",@progbits
        .p2align 4,,15
        .globl  main
        .type   main, @function
main:
.LFB12:
        .cfi_startproc
        movl    $2, -20(%rsp)
        movl    $3, -16(%rsp)
        movq    -20(%rsp), %rax
        movq    %rax, buffer(%rip)
        ret
        .cfi_endproc
.LFE12:
        .size   main, .-main
        .comm   buffer,256,32
        .ident  "GCC: (GNU) 4.7.2 20120921 (Red Hat 4.7.2-2)"
        .section        .note.GNU-stack,"",@progbits 
```

正如人们可以阅读的那样，`x.a = 1`不执行。它可能会进一步优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:10:52.523

**是**的。编译器可以对假定变量值不能“自行”更改的代码应用任何优化。

来自[维基百科](http://en.wikipedia.org/wiki/Volatile_variable)

```
void bar(void) {
    foo = 0;

    while (foo != 255)
         ;
} 
```

优化编译器会注意到没有其他代码可能更改存储在 foo 中的值，并假定它始终保持等于 0。因此，编译器将用类似于以下的无限循环替换函数体：

```
void bar(void) {
    foo = 0;

    while (true)
         ;
} 
```

但是， foo 可能表示可以随时由计算机系统的其他元素更改的位置，例如连接到 CPU 的设备的硬件寄存器。上面的代码永远不会检测到这样的变化

为了防止编译器像上面那样优化代码，使用了**volatile**关键字：

```
static volatile int foo;

void bar (void) {
    foo = 0;

    while (foo != 255)
        ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T19:43:32.330

几个初步的观点：

*   您的`main`函数返回`void`，这意味着就标准而言，您的程序的行为没有定义。但是让我们假设您的实现明确允许`void`从`main`. `memcpy`由于您没有`string.h`再次包含 UB，因此范围内也没有原型。

*   中的值`buffer`从未使用过，因此实际上您的整个程序没有可观察到的行为。因此允许编译器删除您的*任何或所有*代码。就标准而言，一个什么都不做的程序与另一个程序一样好。

我会假装您编写了一个程序，该程序从以下位置打印`2*sizeof(int)`字节：`buffer``memcpy`

```
#include <string.h>
#include <stdio.h>

char buffer[256];

struct stX
{
    int a;
    int b;
    int c;
};

int main()
{
    struct stX x;
    x.a = 1;
    x.b = 2;
    x.c = 3;
    memcpy(buffer, &x.b, 2 * sizeof(int));
    {
        int i;
        for (i = 0; i < 2 * sizeof(int); ++i) {
            printf("%d\n", buffer[i]);
        }
    }
    return 0; /* just in case this is C89 */
} 
```

因此，据我了解，编译器删除`x.a`此代码中的分配是可以的，但删除分配`x.c`意味着您的编译器不符合标准。除非结构包含奇怪的填充。

*如果*在和之间至少`sizeof(int)`有填充字节，那么删除分配也可以。该标准允许这样的填充，但我想我可以有把握地猜测你正在使用的实际实现没有它;-)`b``c``struct stX``x.c`

解释是`x`在抽象机器中具有定义的状态，其值为`a`、`b`和`c`。`x`还有一个“对象表示”，它是`sizeof(stX)`内存中的字节序列。您对这些字节的`memcpy`访问`2*sizeof(int)`的调用，从`x.b`. 所有这些都是合法的，并且保证`x.b`至少`2*sizeof(int)`从结构末尾返回字节，因为 C 保证结构的数据成员按照定义的顺序排列。所以`c`一定要来`b`。实现的唯一自由是它是否紧随其后，或者它们之间是否有填充。

允许编译器“知道”`memcpy`标准中是如何定义的，因此它可以推断此调用`memcpy`不会访问 的任何字节`x.a`，因为它们在之前`x.b`。这允许它进行优化，使得物理内存中的那些字节不包含它们在抽象机器中的值。但是，不允许推断调用`memcpy`不访问任何字节`x.c`（除非结构中有那么多填充），因此不允许省略将这些字节的正确值复制到`buffer`.

如果超出末尾读取的附加字节`x.b`是填充而不是 的内容`x.c`，那么赋值与否当然`x.c`是无关紧要的，因此可以省略。

另一个合法的优化是将代码转换为：

```
int main() {
    ((int*)buffer)[0] = 2;
    ((int*)buffer)[1] = 3;
    ... same printf loop as before ...
} 
```

也就是说，没有要求`x`（或就此而言`buffer`）在物理内存中的任何地方“真正存在”，但标准确实要求打印出来的字节应该是正确的字节，具体取决于`int`您在实现中的表示方式以及如何`struct stX`在您的实施中进行布局。~~

# c# - 来自 C# .NET 注释的 Doxygen 注释中的有序列表

> ID：14525375
> 
> 赞同：0
> 
> 时间：2013-01-25T15:56:54.057
> 
> 标签：c#, doxygen, xml-comments, doxywizard

我有一些 C# 文档注释，如下所示：

```
/// <para>
/// Pre-Conditions:
/// </para>
/// <para>
///     1\. The sky must be clear.
/// </para>
/// <para>
///     2\. It must be night time.
/// </para>
/// <para>
/// Post-Conditions:
/// </para>
/// <para>
///     1\. A picture of the sky will be saved.
/// </para>
/// <para>
///     2\. Some second thing will be true that I can't think of.
/// </para>
/// <para>
/// Invariants:
/// </para>
/// <para>
///     1\. Existing pictures will not be changed.
/// </para>
void TakePictureOfStars(); 
```

我将所有内容都制作成了自己的段落，因此当我在 Visual Studio 中使用鼠标悬停工具提示时，它可以正确显示。

我使用 Doxygen 生成评论，但我不断收到以下 HTML：

```
<ol type="1">
    <li>The sky must be clear.</li>
</ol>
<ol type="1">
    <li>It must be night time.</li>
</ol> 
```

看起来像这样：

```
1\. The sky must be clear.

1\. It must be night time. 
```

所以，问题来了：如何让每个编号的项目在 Visual Studio 工具提示中显示在自己的行上，并在我的代码输出中获得有序列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:01:25.667

设置`MARKDOWN_SUPPORT`为`NO`将避免 1\. 2\. 3\. 标记被视为有序列表。

要保留空间，您可以使用`<pre>`and `</pre>`：

```
/// <para><pre>
/// Pre-Conditions:
/// </pre></para>
/// <para><pre>
///     1\. The sky must be clear.
/// </pre></para>
/// <para><pre>
///     2\. It must be night time.
///        a. half moon
///        b. full moon
/// </pre></para> 
```

# azure - 下载 Azure - 现在所有构建在 VS2012 中都失败

> ID：14525376
> 
> 赞同：0
> 
> 时间：2013-01-25T15:56:54.620
> 
> 标签：azure, asp.net-mvc-4, visual-studio-2012, azure-sdk-.net

我刚刚开始使用 Azure。[http://www.windowsazure.com/en-us/develop/net/tutorials/get-started/](http://www.windowsazure.com/en-us/develop/net/tutorials/get-started/)

下载了 Azure SDK，并创建了站点（一个空的 mvc4 站点）。构建失败。

更糟糕的是，我所有的 VS2012 网站现在都无法构建。

输出示例（未提供更多信息）

========== 构建：0 成功，2 失败，0 最新，0 跳过 ==========

事件日志中没有任何内容。

尝试卸载并重新安装 Azure SDK。仍然失败。

请问我怎样才能让它再次工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:29:09.927

对于任何找到这个的人。

我按照 Petar 的建议调高了详细程度。结果...

“项目'testrestart'不是最新的。缺少输出文件”

1.  做了很多谷歌搜索 - 没有任何效果。
2.  记得那天早些时候我一直在玩 MS Build。看了一下 MS Build。奇怪的是它是一个 0KB 的文件。

3.  删除了所有 MS Build 文件并在 VS2012 上进行了修复安装。问题解决了。

# java - JSF 看不到我的注释 Bean

> ID：14525377
> 
> 赞同：0
> 
> 时间：2013-01-25T15:56:55.913
> 
> 标签：java, jsf-2, annotations

我尝试制作简单的 JSF 示例并有几个文件管理器。我使用 Maven，并已存储在 META-INF flolder faces-confid.xml 中。

在尝试执行时的输出中我看到：

```
Welcome to JSF. #{test.test} 
```

但我认为它一定是别的东西。

他们来了：

豆文件

```
import java.io.Serializable;
import javax.enterprise.context.RequestScoped;
import javax.inject.Named;

@Named("test")
@RequestScoped
public class TestBean implements Serializable{
    private String test = "test";

    public String getTest() {
        return test;
    }

    public void setTest(String test) {
        this.test = test;
    }    
} 
```

XHTML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Welcome</title>
    </h:head>
    <h:body>
        <h3>Welcome to JSF. #{test.test}</h3>
    </h:body>
</html> 
```

WEB.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   version="2.5">
   <servlet>
      <servlet-name>Faces Servlet</servlet-name>
      <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
   </servlet>
   <servlet-mapping>
      <servlet-name>Faces Servlet</servlet-name>
      <url-pattern>/faces/*</url-pattern>
   </servlet-mapping>
   <welcome-file-list>
      <welcome-file>new.xhtml</welcome-file>
   </welcome-file-list>
   <context-param>
      <param-name>javax.faces.PROJECT_STAGE</param-name>
      <param-value>Development</param-value>
   </context-param>
</web-app> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:00:23.493

如果 JSF 没有找到 bean，您就不会看到`#{test.test}`，而只是一个空字符串来代替那个 EL 表达式。EL 表达式没有被评估有一个不同的原因：当前的 HTTP 请求根本没有调用`FacesServlet`，因此它无法为您执行所有 JSF 工作。为了调用它，您需要确保您在浏览器地址栏中看到的请求 URL 与定义的 URL 模式`FacesServlet`匹配`web.xml`。

另一个证据可以通过右键单击查看 webbrowser 中的 HTML 源代码*View Source*找到。你会注意到所有这些`<h:xxx>`标签都没有被解析。这`FacesServlet`也是负责这项工作的人。

假设您的 web 应用程序在其上运行`http://example.com/context/`并且您有一个 Facelet 文件`/page.xhtml`，那么根据 URL 模式有以下场景`FacesServlet`：

*   如果是`*.jsf`，那么您需要通过以下方式打开`http://example.com/context/page.jsf`
*   如果是`*.faces`，那么您需要通过以下方式打开`http://example.com/context/page.faces`
*   如果是`/faces/*`，那么您需要通过以下方式打开`http://example.com/context/faces/page.xhtml`

另一种方法是将其映射到`*.xhtml`. 这样您就无需担心虚拟 URL。

### 也可以看看：

*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:01:17.893

您需要将 faces-config.xml 和 web.xml 存储在 WEB-INF 文件夹中。xhtml 文件应该在 WebContent 中。

# python - 从图 matplotlib 中选择点

> ID：14525379
> 
> 赞同：4
> 
> 时间：2013-01-25T15:56:58.323
> 
> 标签：python, matplotlib, wxpython

目前我有一个散点图，我可以放大、移动等
。我还想做的是能够在图表上选择一定数量的点，然后将选定的点存储在一个数组中。
我可以使用 matplotlib 中的任何特殊功能吗？
任何帮助将不胜感激

我的代码

```
import os
import wx
import numpy as nump
import matplotlib
matplotlib.use('WXAgg')
import matplotlib.figure as fg
import matplotlib.backends.backend_wxagg as wxagg

class MyFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'Title')
        self.create_main_panel()
        self.draw_figure()

def create_main_panel(self):

    self.panel = wx.Panel(self)
    self.dpi = 100
    self.fig = fg.Figure((5.0, 4.0), dpi=self.dpi)
    self.canvas = wxagg.FigureCanvasWxAgg(self.panel, -1, self.fig)
    self.axes = self.fig.add_subplot(111)
    self.toolbar = wxagg.NavigationToolbar2WxAgg(self.canvas)
    self.vbox = wx.BoxSizer(wx.VERTICAL)
    self.vbox.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
    self.vbox.AddSpacer(25)
    self.vbox.Add(self.toolbar, 0, wx.EXPAND)
    self.panel.SetSizer(self.vbox)
    self.vbox.Fit(self)

def draw_figure(self):
    self.axes.clear()
    x, y = [2,3,4,5]
    self.axes.scatter(x, y)
    self.canvas.draw()

def on_exit(self, event):
    self.Destroy()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    app.frame = MyFrame()
    app.frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:10:59.727

下面的代码提供了一个可能的解决方案。基本方法可以总结如下：

*   一个附加了一个处理程序，`pick_event`它不断将选取的数据索引附加到一个列表中`self._picked_indices`。
*   每当用户按下键时，`key_press_event`处理程序都会清除列表。`self._picked_indices``escape`
*   该方法`MyFrame.picked_points`返回当前选定点的坐标列表。`None`如果尚未选择任何点，则此方法返回（如果更方便，您可以修改它以在这种情况下返回一个空列表）。

这样，您可以通过单击它们来继续选择点。但是，如果您想重新开始，只需按下`escape`并重新开始采摘。

```
#! /usr/bin/env python
import os
import wx
import numpy as nump
import matplotlib
matplotlib.use('WXAgg')
import matplotlib.figure as fg
import matplotlib.backends.backend_wxagg as wxagg

class MyFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'Title')
        self.create_main_panel()
        self.draw_figure()
        self._is_pick_started = False
        self._picked_indices = None

    def create_main_panel(self):
        self.panel = wx.Panel(self)
        self.dpi = 100
        self.fig = fg.Figure((5.0, 4.0), dpi=self.dpi)
        self.canvas = wxagg.FigureCanvasWxAgg(self.panel, -1, self.fig)
        self.axes = self.fig.add_subplot(111)
        self.toolbar = wxagg.NavigationToolbar2WxAgg(self.canvas)
        self.vbox = wx.BoxSizer(wx.VERTICAL)
        self.vbox.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.vbox.AddSpacer(25)
        self.vbox.Add(self.toolbar, 0, wx.EXPAND)
        self.panel.SetSizer(self.vbox)
        self.vbox.Fit(self)
        self.fig.canvas.mpl_connect('pick_event', self.on_pick)
        self.fig.canvas.mpl_connect('key_press_event', self.on_key)

    def draw_figure(self):
        self.axes.clear()
        self._x_data, self._y_data = [[2,3], [4,5]]
        self.axes.scatter(self._x_data, self._y_data, picker=5)
        self.canvas.draw()

    def on_exit(self, event):
        self.Destroy()

    def picked_points(self):
        if self._picked_indices is None:
            return None
        else:
            return [ [self._x_data[i], self._y_data[i]]
                    for i in self._picked_indices ]

    def on_pick(self, event):
        if not self._is_pick_started:
            self._picked_indices = []
            self._is_pick_started = True

        for index in event.ind:
            if index not in self._picked_indices:
                self._picked_indices.append(index)
        print self.picked_points()

    def on_key(self, event):
        """If the user presses the Escape key then stop picking points and
        reset the list of picked points."""
        if 'escape' == event.key:
            self._is_pick_started = False
            self._picked_indices = None
        return

if __name__ == '__main__':
    app = wx.PySimpleApp()
    app.frame = MyFrame()
    app.frame.Show()
    app.MainLoop() 
```

# asp.net - 需要帮助尝试在 WinDBG 中复制 Microsoft 步骤

> ID：14525383
> 
> 赞同：2
> 
> 时间：2013-01-25T15:57:02.770
> 
> 标签：asp.net, debugging, windbg

我们将此转储发送给 MS，他们将这些结果发回给我们。我正在尝试复制此内容，以便我们可以找出 Web 应用程序在另一台服务器上崩溃的原因。我的评论以@@@ 开头。任何帮助是极大的赞赏。

```
0:025> !critlist @@@ *This command is no longer available so I used !locks*
CritSec at 786dd8e0\.  Owned by thread 25\. 
```

  线程 25 持有关键部分（或缺少），下面是正在等待它的线程。

  这个锁的影响@@@*我可以在调试诊断工具中重现这个*

  70.42% 的线程被阻塞

  （螺纹 15 30 31 32 33 34 35 36 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 78 78 74 79 8 76 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 134 135 138)

    -- 检查调用堆栈：

```
:025> kL

ChildEBP RetAddr  

0285fcc4 7c827b69 ntdll!KiFastSystemCallRet

0285fcc8 77e6202c ntdll!ZwWaitForMultipleObjects+0xc

0285fd70 77e62fbe kernel32!WaitForMultipleObjectsEx+0x11a

0285fd8c 79f8e39a kernel32!WaitForMultipleObjects+0x18

0285fdac 79f8e48c mscorwks!SVR::WaitForFinalizerEvent+0x77

0285fdc0 79e9caff mscorwks!SVR::GCHeap::FinalizerThreadWorker+0x49

0285fdd4 79e9ca9b mscorwks!ManagedThreadBase_DispatchInner+0x4f

0285fe68 79e9c9c1 mscorwks!ManagedThreadBase_DispatchMiddle+0xb1

0285fea4 79f20508 mscorwks!ManagedThreadBase_DispatchOuter+0x6d

0285fecc 79f20519 mscorwks!ManagedThreadBase_NoADTransition+0x32

0285fedc 79f220eb mscorwks!ManagedThreadBase::FinalizerBase+0xd

0285ff14 79f0e255 mscorwks!SVR::GCHeap::FinalizerThreadStart+0xbb

0285ffb8 77e6482f mscorwks!Thread::intermediateThreadProc+0x49

0285ffec 00000000 kernel32!BaseThreadStart+0x34 
```

  -- 重建堆栈：@@@我不知道如何重建堆栈以产生以下结果。我需要知道哪个 DLL 导致了锁定。在此示例中为 secSSo.dll。一旦我发现我可以使用命令 lmvm 来查找线程的所有者。

```
0285dc00  00000000

0285dc04  000b7a80

0285dc08  23000003*** ERROR: Symbol file could not be found.  Defaulted to export symbols 

for secSSO.dll - 

 secSSO!SSOStartLogin+0x8d6f4

0285dc0c  0285dc74

0:025> lmvm secSSO
start    end        module name
22f70000 23036000   secSSO     (export symbols)       secSSO.dll

    Loaded symbol image file: secSSO.dll

    Image path: C:\Program Files\Business Objects\Common\2.8\bin\secSSO.dll

    Image name: secSSO.dll

    Timestamp:        Sun Oct 14 01:39:17 2007 (4711AB85)

    CheckSum:         000C83D4

    ImageSize:        000C6000

    File version:     10.5.0.1943

    Product version:  10.5.0.1943

    File flags:       8 (Mask 3F) Private

    File OS:          4 Unknown Win32

    File type:        1.0 App

    File date:        00000000.00000000

    Translations:     0409.04b0

    CompanyName:      Business Objects

    ProductName:      Crystal Enterprise

    InternalName:     Crystal Enterprise

    OriginalFilename: Crystal Enterprise

    ProductVersion:   10.5.0.1943

    FileVersion:      10.5.0.1943

    FileDescription:  Crystal Enterprise

    LegalCopyright:   Copyright (C)1995-2007 Business Objects

    LegalTrademarks:  Crystal Enterprise (tm) is a trademark of Business Objects 
```

  -- 所以线程 25 已经泄露了关键部分或者什么都不做，其余的线程只是在等待它。

# c - ALSA：耳机插孔感应的 API 是什么？

> ID：14525387
> 
> 赞同：0
> 
> 时间：2013-01-25T15:57:14.603
> 
> 标签：c, linux, audio, alsa

我可以使用 alsa API 检测耳机的插入和移除吗？我应该使用哪个 API？我的内核是在 ARM 上运行的 3.0 Linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:19:52.097

正是想要这个功能用于嵌入式项目，我做了一些调查并得出结论（大约 6 个月前）ALSA 中没有任何通用支持插孔插入检测。

有趣的是，我*确实*在我使用的编解码器驱动程序 (tlv310aic3xxx) 中找到了耳机（和麦克风）检测支持，但似乎没有被插入任何上层。我怀疑存在的原因是Android。

基本上有两种添加这种支持的方法：

1.  添加对编解码器驱动程序的支持 - 可能会暴露`sysfs`用户空间中的某些东西可以阻止的节点。

2.  强制访问挂起编解码器的 I2C 总线（编解码器驱动程序通常“拥有”设备）并从用户空间对相关寄存器进行编程。

您可能会面临一个额外的架构问题，即虽然编解码器可以检测插入事件，但它需要某种方式来中断 CPU。tlv310aic3xxx 器件具有可编程 GPIO 引脚，可以连接到主 CPU 上的中断线（如果在嵌入式平台上，这将是另一条 GPIO 线）。没有这个，你需要轮询它。

# c++ - 使用 C++ 在 Linux 中计算磁盘读/写

> ID：14525390
> 
> 赞同：2
> 
> 时间：2013-01-25T15:57:16.993
> 
> 标签：c++, linux, profiling

我的要求是使用总磁盘读/写操作（或读/写的数据量）来分析当前进程磁盘读/写操作。我需要每隔一秒采样一次并在这两者之间绘制一个图表。我需要在 C++ 中的 Linux (Ubuntu 12.10) 上执行此操作。

是否有任何 API/工具可用于此任务？我找到了一个工具`iotop`，但我不确定如何将它用于当前进程与系统范围的使用。

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T16:29:15.377

`/proc/diskstats`您可以每秒读取文件。每行代表一个设备。

从内核的“文档/iostat.txt”：

```
Field  1 -- # of reads completed
    This is the total number of reads completed successfully.
Field  2 -- # of reads merged, field 6 -- # of writes merged
    Reads and writes which are adjacent to each other may be merged for
    efficiency.  Thus two 4K reads may become one 8K read before it is
    ultimately handed to the disk, and so it will be counted (and queued)
    as only one I/O.  This field lets you know how often this was done.
Field  3 -- # of sectors read
    This is the total number of sectors read successfully.
Field  4 -- # of milliseconds spent reading
    This is the total number of milliseconds spent by all reads (as
    measured from __make_request() to end_that_request_last()).
Field  5 -- # of writes completed
    This is the total number of writes completed successfully.
Field  7 -- # of sectors written
    This is the total number of sectors written successfully.
Field  8 -- # of milliseconds spent writing
    This is the total number of milliseconds spent by all writes (as
    measured from __make_request() to end_that_request_last()).
Field  9 -- # of I/Os currently in progress
    The only field that should go to zero. Incremented as requests are
    given to appropriate struct request_queue and decremented as they finish.
Field 10 -- # of milliseconds spent doing I/Os
    This field increases so long as field 9 is nonzero.
Field 11 -- weighted # of milliseconds spent doing I/Os
    This field is incremented at each I/O start, I/O completion, I/O
    merge, or read of these stats by the number of I/Os in progress
    (field 9) times the number of milliseconds spent doing I/O since the
    last update of this field.  This can provide an easy measure of both
    I/O completion time and the backlog that may be accumulating. 
```

对于每个进程，您都可以获得 use `/proc/<pid>/io`，它会产生如下内容：

```
rchar: 2012
wchar: 0
syscr: 7
syscw: 0
read_bytes: 0
write_bytes: 0
cancelled_write_bytes: 0 
```

*   rchar, wchar：读/写的字节数。
*   syscr, syscw：读/写系统调用的数量。
*   read_bytes, write_bytes：读/写到存储介质的字节数。
*   cancelled_write_bytes：据我所知，是由于调用“ftruncate”取消挂起对同一文件的写入而引起的。可能最常见的是 0。

# php - 使用 PHP 格式化百分比

> ID：14525393
> 
> 赞同：19
> 
> 时间：2013-01-25T15:57:21.680
> 
> 标签：php

我想将 0.45 格式化为 45%。

我知道我可以做类似的事情`FLOOR($x*100).'%'`，但想知道是否有更好的方法（更好的定义为更标准，不一定更快）。

一种想法是[http://php.net/manual/en/class.numberformatter.php](http://php.net/manual/en/class.numberformatter.php)。这是更好的方法吗？有没有人用过它，你能举个例子吗？谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-25T16:01:33.717

最有可能的是，您想要`round`而不是`floor`. 但除此之外，这将是最“标准”的方式。或者，您可以使用`sprintf`例如：

`sprintf("%.2f%%", $x * 100)`这将打印 $x 的百分比，精度为小数点后两位，然后是百分号。

执行此操作的最短方法`NumberFormatter`是：

```
$formatter = new NumberFormatter('en_US', NumberFormatter::PERCENT);
print $formatter->format(.45); 
```

如果您的应用程序支持各种语言环境，那么这样做会更好，但否则您只是添加另一行代码而没有太多好处。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-06T19:32:56.800

你也可以使用一个函数。

```
function percent($number){
    return $number * 100 . '%';
} 
```

然后使用以下内容显示结果。

```
percent($lab_fee) 
```

# php - Magento 隐藏的自定义产品属性

> ID：14525395
> 
> 赞同：2
> 
> 时间：2013-01-25T15:57:23.920
> 
> 标签：php, magento

我目前正在制作一个模块，以便用户在结帐页面上看到类似：“购买产品 X 的人还购买了 Y、Z 和 T”。

我做了一个 cronjob 来计算每个产品的相关产品，并在安装脚本中为产品添加了一个属性。

我决定（为了简单起见） - 存储最相关的 5 个产品，所以我想存储类似：`123-3-5543-1290-9911`. 但我不希望管理员在任何地方看到这个，我尝试了以下方法：

```
$setup->addAttribute('catalog_product', $attrCode, array(
    // more stuff
    'type' => 'hidden',
    'input' => 'text',
    'visible' => 0,
    // more stuff
)); 
```

我看了这里： http: [//blog.chapagain.com.np/magento-adding-attribute-from-mysql-setup-file/](http://blog.chapagain.com.np/magento-adding-attribute-from-mysql-setup-file/)我发现了一些有趣的东西，但不是如何完全隐藏这个字段。

另一种方法是创建我自己的表，但这似乎是一个稍微优雅的解决方案。

你怎么看？是创建自己的表更好，还是添加属性并隐藏它？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:19:22.500

将目录属性的 'is_visible' 属性设置为 0 会将它们从后端的管理表单中隐藏起来，从这段代码中可以看出（[Mage_Adminhtml_Block_Widget_Form::_setFieldset()](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/code/core/Mage/Adminhtml/Block/Widget/Form.php#L172)）：

```
 protected function _setFieldset($attributes, $fieldset, $exclude=array())
    {
        $this->_addElementTypes($fieldset);
        foreach ($attributes as $attribute) {
            /* @var $attribute Mage_Eav_Model_Entity_Attribute */
            if (!$attribute || ($attribute->hasIsVisible() && !$attribute->getIsVisible())) {
                continue;
            } 
```

所以执行

```
 $setup->updateAttribute('catalog_product', $attrCode, 'is_visible', '0'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T17:17:43.310

我是这样解决的。

转到**目录**>>**属性**>>**管理属性**>>**添加新属性**

然后，保存。然后，转到数据库并运行此查询：

```
SELECT * FROM eav_attribute WHERE attribute_code ='attribute_code'; 
```

将列*frontend_input*的值更改为隐藏，然后保存。

希望能帮助到你。

# php - 禁止域名扩展 buddypress

> ID：14525400
> 
> 赞同：-4
> 
> 时间：2013-01-25T15:57:34.050
> 
> 标签：php

谁能帮帮我，我正在使用 Buddypress/wordpress，我想禁止一些域扩展，例如 .pl、.ru、.asia。我尝试了以下适用于电子邮件域但不适用于扩展的功能。

```
function my_bp_ban_domains( $result ) {
    $banned = array('.ru', '.pl');
    $error = 'God catch you brah !!!, Spammers are not welcome here, try your luck elsewhere.';
    $email = $result['user_email']; 
    $domain = array_pop(explode('@', $email));
    if ( in_array($domain, $banned)) {
        $result['errors']->add('user_email', __($error, 'my_bp_ban_domains' ) );
    };
    return $result;
}

add_filter( 'bp_core_validate_user_signup', 'my_bp_ban_domains' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:05:01.183

下面应该可以正常工作。我只是更进一步并使用`.`数组中的最后一项来拆分域：

```
function my_bp_ban_domains( $result ) {
    $banned = array('ru', 'pl');
    $error = 'Your email domain has been the source of spam. Please use another email address.';
    $email = $result['user_email']; 
    $domain = array_pop(explode('@', $email));
    $ext = array_pop(explode(',',$domain));
    if ( in_array($ext, $banned)) {
        $result['errors']->add('user_email', __($error, 'my_bp_ban_domains' ) );
    };
    return $result;
} 
```

通知`$banned = array('ru', 'pl');`略有更改（删除了前导点）

# php - CURDATE() 在 INSERT MySQL 上添加间隔

> ID：14525402
> 
> 赞同：0
> 
> 时间：2013-01-25T15:57:37.550
> 
> 标签：php, mysql, time, timezone

`CURTIME()`在 MySQL INSERT 语句中添加小时的正确语法是什么。

```
$query = "INSERT INTO `ordisp` (`date`, `time`, `operator`, `status`, `completed`, `name`, `email`) VALUES (CURDATE(), CURTIME(INTERVAL 2 HOUR), '".mysql_real_escape_string($operator)."', '".mysql_real_escape_string($status)."', '".mysql_real_escape_string($complete)."', '".mysql_real_escape_string($name)."', '".mysql_real_escape_string($email)."')"; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:59:43.197

您可以使用[DATE_ADD](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

```
time(date_add(curdate(), interval 2 hour)) 
```

要不就

```
time(curdate() + interval 2 hour) 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/6495)

顺便说一句，为什么不将`date`and`time`列合并为一`datetime`列？

# java - 从 jsp 页面访问 javabean

> ID：14525405
> 
> 赞同：0
> 
> 时间：2013-01-25T15:57:40.327
> 
> 标签：java, jsp, struts, jstl

我有一个带有一些字符串属性的会话 bean。

如何从 jsp 页面访问它及其属性，检查其中一个是否等于给定字符串？

我想我必须使用`<c:choose>`和`<bean:write>`标记，但是如何？一个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:00:12.537

```
<c:if test="${beanName.beanProp == 'the string'}">
  It's equal.
</c:if> 
```

# asp.net-mvc-4 - 如何手动正确构造依赖对象？

> ID：14525411
> 
> 赞同：0
> 
> 时间：2013-01-25T15:57:55.883
> 
> 标签：asp.net-mvc-4, ninject, ninject.web.mvc

我正在使用 Ninject.Web.Common，到目前为止我真的很喜欢 Ninject。我还不习惯依赖注入，所以我有一个非常蹩脚的问题，但到目前为止我无法谷歌并回答。假设我有一个消息处理程序，它取决于我的 IUnitOfWork 实现。我需要构造我的处理程序的一个实例以将其添加到 Web API 配置中。我已经设法使用以下代码实现了这一点：

```
var resolver = GlobalConfiguration.Configuration.DependencyResolver;
            config.MessageHandlers.Add((myproject.Filters.ApiAuthHandler)resolver.GetService(typeof(myproject.Filters.ApiAuthHandler))); 
```

我真的不喜欢打字这种东西，所以我想知道我是否做得对。手动构造依赖对象的常用方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:36:09.447

好吧，我仅在半年前就在现实世界的项目中使用了依赖注入，所以我对这些东西还很陌生。我真的会推荐[.NET 中的依赖注入](http://www.manning.com/seemann/)这本书，其中所有概念都描述得很好，我从中学到了很多东西。

到目前为止，对我来说最有效的是像这样覆盖默认控制器工厂：

```
public class NinjectControllerFactory : DefaultControllerFactory
{
    private IKernel _kernel;

    public NinjectControllerFactory()
    {
        _kernel= new StandardKernel();
        ConfigureBindings();
    }

    protected override IController GetControllerInstance(RequestContext requestContext,
        Type controllerType)
    {
        return controllerType == null
            ? null
            : (IController)_kernel.Get(controllerType);
    }

    private void ConfigureBindings()
    {
        _kernel.Bind<IUnitOfWork>().To<MessageHandler>();
    }
} 
```

在 Application_Start 函数的 Global.asax 中，您只需添加以下行：

```
ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory()); 
```

这种方法称为组合根模式，被认为是依赖注入的“好”方式。

我还建议如果您有多个端点，例如服务和其他工作人员，您应该创建一个 Application.CompositionRoot 项目并在那里为您的应用程序的不同端点处理不同的绑定配置。

# android - android listView 最小化文本和潜文本之间的差距

> ID：14525415
> 
> 赞同：0
> 
> 时间：2013-01-25T15:58:10.963
> 
> 标签：android, android-layout

最小化线性布局和垂直的两个 TextView（主要文本和子文本）之间的差距。我试图将潜文本填充到顶部，更改潜文本的高度并更改上边距，但间隙仍然存在，我只是得到了一个不必要的高度。我的 XML 已附加

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

    <ImageView
        android:id="@+id/imgIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:scaleType="fitStart"       
        android:layout_marginTop="5dp" 
        android:layout_marginRight= "10dp"
        android:gravity="center_vertical" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txtTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:textColor="#000000"            
            android:textSize="20sp" 

            />

        <TextView
            android:id="@+id/subString"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"                        
             />

    </LinearLayout>

</LinearLayout> 
```

这是一张应该是什么样子的图片， ![在此处输入图像描述](../Images/93f44da380333ed93d9f4a054e4bdc4b.png) 但我实际上拥有的是 IMDB 和帐户之间的巨大差距

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:07:07.420

您的屏幕截图没有显示，但是您可以尝试的一件事对我有用，就是将标题的下边距和子字符串的上边距设置为负值；IE

```
<TextView
    android:id="@+id/txtTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginBottom="-10dp"
    android:textColor="#000000"            
    android:textSize="20sp" /> 
```

# android - android sms中两个用户之间的对话

> ID：14525418
> 
> 赞同：1
> 
> 时间：2013-01-25T15:58:14.273
> 
> 标签：android, sms

我想在 android sms 中查看两个用户之间的对话。我正在尝试制作一个 sms 项目，用户将在其中在列表的收件箱中找到发件人号码。然后当他点击一个特定的列表项时，他会发现他和发件人之间的对话。但现在我正在修复如何做到这一点，我在谷歌搜索了很多但找不到合适的解决方案。

假设，我向 x 发送消息“你好”。x 给我发消息“嗨”。然后他发给我“你在做什么？” . 我发给他“什么都没有”。我想在我的 android 短信收件箱中以这种方式查看此对话===

```
 me: hello 
 hi:x
 what are you doing?:x
 me: n8ing 
```

# javascript - 找不到模块 express --on windows

> ID：14525423
> 
> 赞同：1
> 
> 时间：2013-01-25T15:58:20.507
> 
> 标签：javascript, node.js, express, npm

我在 Windows 控制台上使用“npm install -g express”。但是当我尝试“node app.js”时，它向我显示错误“找不到模块 express”，我设置了环境变量“NODE_PATH”，但什么也没有发生了，我需要你的帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:35:07.470

如果没有完整路径，则无法访问全局安装的模块。您需要安装`express`在您的项目目录或其父目录中。[查看](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)有关模块加载的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T17:57:20.013

npm 允许两种方式安装模块：本地和全局。

全局安装（使用 完成`npm install -g xyz`）用于在系统范围内提供一些工具。与表达相关的这提供了全局`express`引导程序，您可以使用它来为您的应用程序创建一个初始框架，只需键入：`express .`. 如果您需要有关如何使用此命令的帮助，请查看其帮助参数：`express --help`.

相反，模块的本地安装为特定应用程序提供此模块。本地安装总是在应用程序的`node_modules`文件夹中进行。当您尝试`require`使用模块时，Node.js 会在此文件夹中搜索请求的模块。

因此，多次安装 express 是非常好的：一次全局用于引导程序，多次本地（每个应用一次）。

所以，长话短说：要让您的应用程序运行，请在本地安装 express 使用`npm install express`，仅此而已:-)。

# javascript - 手工构建的 JSON 与 JSON.stringify

> ID：14525425
> 
> 赞同：1
> 
> 时间：2013-01-25T15:58:25.477
> 
> 标签：javascript, json, stringify

## 背景

我有一堆对象需要它们的状态以 json 表示形式发送到服务器。它目前的工作原理是这样的：

```
MyClass.prototype.GetJSON(){
    return '{"title":"' + m_Title + '","description":"' + m_Desc + '"}'; 

}; 
```

## 问题

和我一起工作的人建议我做这样的事情：

```
MyClass.prototype.GetJSON(){
    return JSON.stringify( {title:m_Title, description:m_Desc} ); 

}; 
```

做这样的事情有什么好处/坏处？它比我已经在做的效率更高/更低吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:02:07.343

如果 m_Title 里面有 JS 元字符怎么办？

```
m_Title = 'John "Beast" Johnson'; 
```

生产

```
{"title":"John "Beast" Johnson", ...}
                ^^^^^--oops 
```

不错的语法错误。很抱歉您的代码刚刚导致动力装置崩溃。

当您的宿主语言可以为您完成时，切勿手动构建 JSON。

这与 SQL 注入问题完全相同 - 没有考虑到您插入的文本正在使用的环境，并且盲目地假设任何事情都不会出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:00:02.463

与字符串混搭相比，使用 JSON 库的优势：

*   代码更清晰：更容易阅读，更容易调试，更容易理解代码的*目的*
*   库中需要一个（不太可能的）错误来生成无效的 JSON

使用字符串混搭的优点：

没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:59:27.237

使用`JSON.stringify`.

它是

*   更标准
*   更容易阅读：无需检查代码是什么
*   一定要逃避需要逃避的东西

保留现有代码会在字符串中有引号或尝试将当前应用程序逻辑扩展到其他类型的那一天给您带来惊喜。

如果支持 IE7 对您很重要，您应该考虑到您需要一个库（请参阅[兼容性](http://caniuse.com/#search=json)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T16:00:11.180

它的效率会稍低一些，但会更加标准化。另外，使用`stringify`将防止诸如注入之类的事情...

# java - 此错误的任何解决方案？

> ID：14525432
> 
> 赞同：0
> 
> 时间：2013-01-25T15:58:48.820
> 
> 标签：java, android, eclipse, sqlite

`01-25 23:51:14.507: WARN/System.err(616): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 2`

我有一个将使用`SQLite`数据库的 android 应用程序。但是当它到达 select 语句时，它会强制关闭。我有一个用于执行此操作的类文件：

```
package com.thesis.menubook;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
import java.util.ArrayList;
import java.util.List;

public class DBConnect {

        int id = 0;
        public static final String KEY_ROWID = "_id";
        public static final String KEY_IP = "saved_ip_address";
        private static final String TAG = "DBConnect";

        private static final String DATABASE_NAME = "MenuBook";
        private static final String DATABASE_TABLE_1 = "ipaddress";
       //private static final String DATABASE_TABLE_2 = "menudb";
       //private static final String DATABASE_TABLE_3 = "recipelist";
        private static final int DATABASE_VERSION = 1;

        private static final String DATABASE_CREATE_TABLE_1 =
            "CREATE TABLE ipaddress (_id integer primary key autoincrement, " +
                                 "saved_ip_address text not null " +
                                 "); ";
        private static final String DATABASE_CREATE_TABLE_2 =
            "CREATE TABLE menudb (menu_ID varchar primary key not null, " +
                                 "menu_name longtext, " +
                                 "menu_price double null default, " +
                                 "menu_description longtext, " +
                                 "menu_category text, " +
                                 "menu_status text " +
                                 "); ";
        private static final String DATABASE_CREATE_TABLE_3 =
            "CREATE TABLE recipelist (recipe_ID integer primary key not null autoincrement, " +
                                 "menu_ID varchar null default, " +
                                 "stock_ID varchar null default, " +
                                 "recipe_quantity double null defualt " +
                                 ");" ;

        private final Context context;

        private static DatabaseHelper DBHelper;
        private static SQLiteDatabase db;

        public DBConnect(Context ctx)
        {
            this.context = ctx;
            DBHelper = new DatabaseHelper(context);
        }

        public static class DatabaseHelper extends SQLiteOpenHelper
        {
            DatabaseHelper(Context context)
            {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }

            @Override
            public void onCreate(SQLiteDatabase db)
            {
                db.execSQL(DATABASE_CREATE_TABLE_1);
                db.execSQL(DATABASE_CREATE_TABLE_2);
                db.execSQL(DATABASE_CREATE_TABLE_3);
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion,
                                  int newVersion)
            {
                Log.w(TAG, "Upgrading database from version " + oldVersion
                      + " to "
                      + newVersion + ", which will destroy all old data");
                db.execSQL("DROP TABLE IF EXISTS ipaddress");
                db.execSQL("DROP TABLE IF EXISTS menudb");
                db.execSQL("DROP TABLE IF EXISTS recipelist");
                onCreate(db);
            }

        }

        //---opens the database---
        public DBConnect open() throws SQLException
        {
            db = DBHelper.getWritableDatabase();
            return this;
        }

        //---closes the database---
        public void close()
        {
            DBHelper.close();
        }

        //---insert a title into the database---
        public long insertIPAddress(String ipaddress)
        {
            ContentValues initialValues = new ContentValues();
            initialValues.put(KEY_IP, ipaddress);
            return db.insert(DATABASE_TABLE_1, null, initialValues);
        }

        public String getIP()
        {
            String retrievedIP;

            String query = "SELECT saved_ip_address FROM ipaddress WHERE _id = (SELECT MAX(_id) FROM ipaddress)";
            Cursor cursor = db.rawQuery(query, null);
            retrievedIP= cursor.getString(cursor.getColumnIndex("saved_ip_address"));
            cursor.close();
            return retrievedIP;
        }

        public List<ColumnValue[]> select(final String query)
        {
            List<ColumnValue[]> result = null;
            Cursor cursor = db.rawQuery(query, null);

            if (cursor.moveToFirst())
            {
                result = new ArrayList<ColumnValue[]>();

                do
                {
                    int columns = cursor.getColumnCount();
                    ColumnValue[] cvarray = new ColumnValue[columns];

                    for (int i=0; i<columns; i++)
                    {
                        String key = cursor.getColumnName(i);
                        String value = cursor.getString(i);
                        ColumnValue cv = new ColumnValue(key, value);
                        cvarray[i] = cv;
                    }

                    result.add(cvarray);
                }
                while (cursor.moveToNext());
            }

            cursor.close();

            return result;
        }

        public class ColumnValue
        {
            public String column, value;

            public ColumnValue(String c, String v)
            {
                column = c; value = v;
            }
        }

} 
```

我认为它在`getID()`子句上，但我看不出它有什么问题，也看不到我的 SELECT 语句。我在这里要做的是获取位于表格`saved_ip_address`最底部的值。`ipaddress`

这是我的 LogCat，错误的开始以粗体显示。

谢谢你

**01-25 23:51:14.507: WARN/System.err(616): android.database.CursorIndexOutOfBoundsException: 请求索引 -1，大小为 2**

```
01-25 23:51:14.568: WARN/System.err(616):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:421)
01-25 23:51:14.568: WARN/System.err(616):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:117)
01-25 23:51:14.578: WARN/System.err(616):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:31)
01-25 23:51:14.590: WARN/System.err(616):     at com.thesis.menubook.DBConnect.getIP(DBConnect.java:113)
01-25 23:51:14.590: WARN/System.err(616):     at com.thesis.menubook.ChooseTable$GetTableDetails$1.run(ChooseTable.java:103)
01-25 23:51:14.622: WARN/System.err(616):     at android.os.Handler.handleCallback(Handler.java:587)
01-25 23:51:14.622: WARN/System.err(616):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 23:51:14.622: WARN/System.err(616):     at android.os.Looper.loop(Looper.java:132)
01-25 23:51:14.648: WARN/System.err(616):     at android.app.ActivityThread.main(ActivityThread.java:4025)
01-25 23:51:14.688: WARN/System.err(616):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 23:51:14.688: WARN/System.err(616):     at java.lang.reflect.Method.invoke(Method.java:491)
01-25 23:51:14.688: WARN/System.err(616):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-25 23:51:14.688: WARN/System.err(616):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-25 23:51:14.688: WARN/System.err(616):     at dalvik.system.NativeStart.main(Native Method)
01-25 23:51:14.998: DEBUG/AndroidRuntime(616): Shutting down VM
01-25 23:51:15.008: WARN/dalvikvm(616): threadid=1: thread exiting with uncaught exception (group=0x40014760)
01-25 23:51:15.138: ERROR/AndroidRuntime(616): FATAL EXCEPTION: main
01-25 23:51:15.138: ERROR/AndroidRuntime(616): java.lang.IllegalArgumentException: Host name may not be null
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at org.apache.http.HttpHost.<init>(HttpHost.java:83)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at org.apache.http.impl.client.AbstractHttpClient.determineTarget(AbstractHttpClient.java:497)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at com.thesis.menubook.JSONParser.makeHttpRequest(JSONParser.java:62)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at com.thesis.menubook.ChooseTable$GetTableDetails$1.run(ChooseTable.java:119)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at android.os.Handler.handleCallback(Handler.java:587)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at android.os.Looper.loop(Looper.java:132)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at android.app.ActivityThread.main(ActivityThread.java:4025)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at java.lang.reflect.Method.invoke(Method.java:491)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-25 23:51:15.138: ERROR/AndroidRuntime(616):     at dalvik.system.NativeStart.main(Native Method)
01-25 23:51:15.328: WARN/ActivityManager(83):   Force finishing activity com.thesis.menubook/.ChooseTable
01-25 23:51:15.958: WARN/ActivityManager(83): Activity pause timeout for ActivityRecord{408b4228 com.thesis.menubook/.ChooseTable}
01-25 23:51:20.048: INFO/Process(616): Sending signal. PID: 616 SIG: 9
01-25 23:51:21.068: INFO/ActivityManager(83): Process com.thesis.menubook (pid 616) has died.
01-25 23:51:21.089: ERROR/InputDispatcher(83): channel '408408d0 com.thesis.menubook/com.thesis.menubook.IPAddress (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
01-25 23:51:21.098: ERROR/InputDispatcher(83): channel '408408d0 com.thesis.menubook/com.thesis.menubook.IPAddress (server)' ~ Channel is unrecoverably broken and will be disposed!
01-25 23:51:21.768: INFO/WindowManager(83): WIN DEATH: Window{408408d0 com.thesis.menubook/com.thesis.menubook.IPAddress paused=false}
01-25 23:51:22.108: INFO/WindowManager(83): WIN DEATH: Window{407b66d8 com.thesis.menubook/com.thesis.menubook.ChooseTable paused=false}
01-25 23:51:22.246: INFO/WindowManager(83): WIN DEATH: Window{4097d668 com.thesis.menubook/com.thesis.menubook.ChooseTable paused=false}
01-25 23:51:22.358: INFO/WindowManager(83): WINDOW DIED Window{408408d0 com.thesis.menubook/com.thesis.menubook.IPAddress paused=false}
01-25 23:51:22.449: ERROR/InputDispatcher(83): Received spurious receive callback for unknown input channel.  fd=188, events=0x8
01-25 23:51:22.449: ERROR/InputDispatcher(83): Received spurious receive callback for unknown input channel.  fd=190, events=0x8
01-25 23:51:23.468: DEBUG/dalvikvm(147): GC_EXPLICIT freed <1K, 4% free 12942K/13383K, paused 285ms+19ms
01-25 23:51:23.858: WARN/InputManagerService(83): Got RemoteException sending setActive(false) notification to pid 616 uid 10004
01-25 23:52:15.278: DEBUG/SntpClient(83): request time failed: java.net.SocketException: Address family not supported by protocol
01-25 23:57:15.589: DEBUG/SntpClient(83): request time failed: java.net.SocketException: Address family not supported by protocol 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:01:45.733

得到一个`Cursor`对象后，你需要前进到第一行......

```
 cursor.moveToFirst(); 
```

在从游标中获取之前。您还需要检查游标中是否确实存在任何行。

# android - Android 平板电脑 nexus 10 在小部件“无法安装在此设备上”时出现异常

> ID：14525433
> 
> 赞同：0
> 
> 时间：2013-01-25T15:58:49.173
> 
> 标签：android, widget

每个人

我在平板电脑 nexus 10 上遇到了一个异常，该小部件未显示在小部件列表中。异常如下所示：

10-11 16:53:20.185 E/AppsCustomizePagedView(2811): Widget ComponentInfo{com.allocine.androidapp/com.allocine.androidapp.providers.WidgetAlloCineProvider} 不适合此设备 (1400, 1200)

如果有人可以提供帮助，我们将不胜感激。

谢谢。

平

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T18:31:18.320

The exception you are getting is because of the minimum width and height size that you have define for your widget in widget info xml is too much for this device.

Try reducing the min_height and min_width and you should be able to see your widget in the list.

# jquery - setDate 之后的 jquery datepicker 不再能够更改标题中的月份和年份

> ID：14525436
> 
> 赞同：1
> 
> 时间：2013-01-25T15:58:55.467
> 
> 标签：jquery, datepicker, jquery-ui-datepicker, uidatepicker

我正在使用 JQuery UI Datepicker 来选择日期。我在初始化时将**“changeMonth”和“changeYear”**设置为true。

```
$( "#from" ).datepicker({
  defaultDate: "+1w",
  changeMonth: true,
  changeYear: true,
  dateFormat: 'yy-mm-dd',
  onClose: function( selectedDate ) {
    $( "#to" ).datepicker( "option", "minDate", selectedDate );
  }
});
$( "#to" ).datepicker({
  defaultDate: "+1w",
  changeMonth: true,
  changeYear: true,
  dateFormat: 'yy-mm-dd',
  onClose: function( selectedDate ) {
    $( "#from" ).datepicker( "option", "maxDate", selectedDate );
  }
}); 
```

但是我希望默认设置 datepicker，所以我在changeMonth 和 changeYear的设置之前使用了**setDate ：**

```
$(#from).datepicker('setDate', '10-10-2010');
$(#to).datepicker('setDate', '10-10-2011'); 
```

这是成功的。但是，在标题的下拉日历中，我无法再直接更改月份和年份。

有谁知道发生了什么或知道解决方案？或者我应该改变另一种设置日期的方式？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:15:02.753

我尝试了您使用的相同脚本。它对我有用。检查这个[http://jsfiddle.net/XE68u/](http://jsfiddle.net/XE68u/)

```
 $( "#from" ).datepicker({
  defaultDate: "+1w",
  changeMonth: true,
  changeYear: true,
  dateFormat: 'yy-mm-dd',
  onClose: function( selectedDate ) {
    $( "#to" ).datepicker( "option", "minDate", selectedDate );
  }
});
$( "#to" ).datepicker({
  defaultDate: "+1w",
  changeMonth: true,
  changeYear: true,
  dateFormat: 'yy-mm-dd',
  onClose: function( selectedDate ) {
    $( "#from" ).datepicker( "option", "maxDate", selectedDate );
  }
});

$("#from").datepicker('setDate', '10-10-10')
$("#to").datepicker('setDate', '11-10-10') 
```

# haskell - 简单的 Haskell WebSockets 应用程序——连接在客户端启动后立即关闭（连接已准备好，但未打开）

> ID：14525437
> 
> 赞同：4
> 
> 时间：2013-01-25T15:58:55.497
> 
> 标签：haskell, websocket

好的，这是本主题的延续：[如何运行 Haskell WebSockets 库的官方示例](https://stackoverflow.com/questions/14521553)。我想要一个服务器，它将在循环中响应每个客户端请求。

```
{-# LANGUAGE OverloadedStrings #-}

import Data.Char (isPunctuation, isSpace)
import Data.Monoid (mappend)
import Data.Text (Text)
import Control.Exception (fromException)
import Control.Monad (forM_, forever)
import Control.Concurrent (MVar, newMVar, modifyMVar_, readMVar)
import Control.Monad.IO.Class (liftIO)
import qualified Data.Text as T
import qualified Data.Text.IO as T
import Network.WebSockets

meow :: TextProtocol p => WebSockets p ()
meow = forever $ do
    msg <- receiveData
    sendTextData $ msg `T.append` ", meow."

app :: Request -> WebSockets Hybi00 ()
app _ = meow

main :: IO ()
main = runServer "0.0.0.0" 8000 app 
```

现在我尝试从 JavaScript 中使用它：

```
var socket;  
var host = "ws://localhost:8000";  
var socket = new WebSocket(host);  
    console.log("ready");  
    socket.onopen = function(){  
         console.log("open");  
         socket.send("cats do ");
    }  
    socket.onmessage = function(msg){  
         console.log("msg");  
    }  
    socket.onclose = function(){  
         console.log("close");  
    } 
```

但是连接在客户端启动后立即关闭（连接已准备好，但未打开）。我期待别的东西...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:28:45.043

您需要先[接受请求](http://hackage.haskell.org/packages/archive/websockets/latest/doc/html/Network-WebSockets.html#v%3aacceptRequest)，然后才能开始使用 websocket 连接。例如

```
app :: Request -> WebSockets Hybi00 ()
app req = do
    acceptRequest req
    meow 
```

# jquery - 如何选择一个 id 包含某个字符串的按钮？

> ID：14525439
> 
> 赞同：1
> 
> 时间：2013-01-25T15:59:05.817
> 
> 标签：jquery

如何选择 id 包含某个字符串的按钮？我问的原因是 asp.net webform 是将容器的名称添加到元素的 id 中。

```
$(document).ready(function () {
$('input[submit]:addNewRow').click(function(){
    //Do someting...
    });      
}); 
```

按钮的`id`包含`AddNewRow`。

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:00:37.527

使用[包含选择器的属性值](http://api.jquery.com/attribute-contains-selector/)。如果`id`包含“AddNewRow”，那就是

```
$("[id*='AddNewRow']") 
```

# c - 如何增加取消引用的双指针？

> ID：14525444
> 
> 赞同：5
> 
> 时间：2013-01-25T15:59:27.337
> 
> 标签：c, pointers, dereference

在代码中，我通常会使用：

```
#include <stdlib.h>

void dref1(char **blah)
{
    (*blah)[0] = 'a';
    (*blah)[1] = 'z';
    (*blah)[2] = 0x00;
}

/* or */

void dref2(char **blah)
{
    char *p = *blah;

    *p++ = 'w';
    *p++ = 't';
    *p = 0x00;
}

int main(void)
{
    char *buf = malloc(3);

    dref1(&buf);
    puts(buf);
    dref2(&buf);
    puts(buf);
    free(buf);

    return 0;
} 
```

我的问题是是否有可能/如何直接取消引用和增加指针：

```
**blah = 'q';       /* OK as (*blah)[0] ? */
(*blah)++;          /* Why not this? */
*((*blah)++) = 'w'; /* ;or. */
... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T16:05:59.350

我不知道您的真正意图是什么，但在我看来，您需要了解`*p++`和`(*p)++`作为表达式之间的区别。

第一个表达式取消引用指针并推进指针本身，而不是指向的值。

第二个表达式取消引用指针并通过应用后缀运算符修改指向的值`++`。指向的值是指针还是整数都无关紧要。

这与一元运算`*`符和后缀`++`运算符的优先级有关。在没有括号的情况下，`++`首先应用运算符并将其结果用作运算符的操作数`*`。

编辑：

假设它`blah`是 type `char **`，这里列出了可能的操作以及每个操作的列表：

*   显然，`blah`产生一个类型的值`char **`；
*   `*blah`产量`char *`；
*   `**blah`产量`char`；
*   `*(*blah)++`取消引用`blah`以获得 a `char *`，然后`*p++`类比就来了。
*   `**blah++`取消引用`blah`两次以获取指向的值，然后递增`blah`指针。
*   `(**blah)++`两次取消引用`blah`指针，然后`(*p)++`类比来了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T17:01:24.667

我们可以。只测试一窝。我想你有这个想法。

使用`blah`你写的方式的问题是，当你回到 main 时，不仅缓冲区的内容发生了变化（如你所愿），而且指针`buf`本身也发生了变化。这可能不是你想要的，也绝对不是你需要释放的。

测试：

```
#include <stdlib.h>

void dref1(char **blah)
{
    (*blah)[0] = 'a';
    (*blah)[1] = 'z';
    (*blah)[2] = 0x00;
}

/* or */

void dref2(char **blah)
{
    char *p = *blah;

    *p++ = 'w';
    *p++ = 't';
    *p = 0x00;
}

void dref3(char **blah)
{
    *(*blah)++ = 'w';
    *(*blah)++ = 't';
    *(*blah) = 0x00;
}

void dref4(char **blah)
{
    **blah = 'q';       /* OK as (*blah)[0] ? */
    (*blah)++;          /* Why not this? */
    *((*blah)++) = 'w'; /* ;or. */

}

int main(void)
{
    char *buf = (char*)malloc(3);
    char *buf1=buf;
    dref1(&buf);
    puts(buf);
    dref2(&buf);
    puts(buf);
    dref3(&buf);
    puts(buf);
    puts(buf1);

    buf=buf1;
    dref4(&buf);
    puts(buf);
    puts(buf1);

    free(buf1);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T05:55:07.807

我认为 . 没有任何问题`dref1`。

`(*blah)[0] = *(*blah)+0 = **blah`

所以你可以写`(*blah)[0]='a';`

这样做是没有意义的，`(*blah)++;`您只是在增加和丢失由 . 返回的地址`malloc`。

# android - 如何从自定义对话框中删除边框和黑色空间？

> ID：14525446
> 
> 赞同：1
> 
> 时间：2013-01-25T15:59:27.657
> 
> 标签：android, android-dialog, android-theme

我想创建并显示一个自定义对话框：

```
AlertDialog dialog=new AlertDialog.Builder(this,R.style.BubbleDialog).create();
dialog.setView(detailsView,0,0,0,0);
dialog.show(); 
```

这就是风格：

```
<style name="BubbleDialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
</style> 
```

但是，我得到：

![在此处输入图像描述](../Images/ad163e89a117cb14c1974ae15a313693.png)

如果你仔细观察，你会发现视图周围有一个深灰色的边框，而且，因为角是圆形的，所以在矩形角的地方会有一些小的黑色空间。

我怎样才能摆脱这一切？我尝试玩主题等，但到目前为止无济于事。谢谢！

# javascript - 在 div 中找到一个字符串并将其替换为新字符串

> ID：14525449
> 
> 赞同：-1
> 
> 时间：2013-01-25T15:59:31.693
> 
> 标签：javascript, jquery

我有一个

```
<h3 class="recomendedProduct">Protect</h3> 
```

我想用 Prime 代替 Protect。我不能改变它是如何到达 dom 所以我必须通过 jquery 替换它

有什么建议么？我已经看到了一堆解决方案，但似乎无法决定如何进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:01:02.850

```
$('.recomendedProduct').text('Prime'); 
```

或者

```
$('.recomendedProduct').html('Prime'); 
```

如果您的字符串包含 HTML

（[API](http://api.jquery.com/text/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:08:10.223

您的标题和问题并没有完全加起来。但如果我理解你的问题，你想替换一个特定的实例。在这种情况下：

```
$("h3.recomendedProduct").html('Prime'); 
```

# c# - C# EWS API - 访问与配置帐户访问的服务器不同的 Exchange 服务器上的项目

> ID：14525452
> 
> 赞同：0
> 
> 时间：2013-01-25T15:59:33.753
> 
> 标签：c#, .net, api, exchange-server, exchangewebservices

我在 Exchange Server 上创建了一个帐户`A`，我正在尝试访问`X`在 Exchange server 上配置的共享邮箱上的项目`B`。我需要访问邮箱的权限，`X`并且可以使用 MS Outlook 进行访问，但无法使用 EWS 托管 API 进行访问。我使用了以下代码：

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
service.Credentials = new WebCredentials("user.name@organization.com", "password");
service.Url = new Uri("https://organization.com/EWS/Exchange.asmx");
Mailbox somemailbox = new Mailbox("some.mailbox@organization.com");
FolderId folderInbox = new FolderId(WellKnownFolderName.Inbox, somemailbox);
FindFoldersResults findResults = service.FindFolders(folderInbox, new FolderView(int.MaxValue)); 
```

这将返回一个错误：`"The account accessing the resource must be on the same Mailbox Server version as the delegate account being accessed."`指向代码的最后一行 (service.FindFolders)。

一开始我以为服务器的版本不兼容，但是当我`ExchangeVersion`将代码的第1行更改为“Exchange2007_SP1”以外的任何其他内容时，我收到了错误消息`Exchange Server doesn't support the requested version.`，所以我想这不是版本相关的问题。我想在这种情况下，我将无法使用工作正常的 MS Outlook 进行连接。

我认为我错过了一些非常容易的东西，但我不知道是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:18:25.933

问题是您连接到主服务器。如果要访问委托帐户，则必须将 ews-url 更改为存储邮箱的服务器的 ews-address。我的公司有几乎相同的情况，并且使用不同的网址对我来说效果很好。如果您的交换服务器配置正确，您可以使用托管 api 的自动发现功能 'service.Autodiscover()' 来获取正确的 ews-address。

# python - 突出显示 python 命令行的特定部分

> ID：14525459
> 
> 赞同：0
> 
> 时间：2013-01-25T15:59:52.947
> 
> 标签：python, command-line, highlight

我正在使用 Python 3.3... 在命令行中执行脚本时，我想突出显示某些部分。我需要突出显示特定行的特定部分，例如第 25 行的字符 5 到 19（类似的东西）。我在文档中找到了 curses 模块，但我得到了：

```
Traceback (most recent call last):
  File "C:\Programs\Python33\proj\proj16\logdisp.py", line 14, in <module>
    import curses
  File "C:\Programs\Python33\lib\curses\__init__.py", line 13, in <module>
    from _curses import *
ImportError: No module named '_curses' 
```

我猜模块 curses 被删除了（或者我做错了什么......）我也尝试了 pygments，但我没有安装它。它适用于 Python 3.3 吗？

无论如何，如何使用 Python 3.3 进行高亮显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:14:26.683

你在 Windows 上吗？在这种情况下，请参阅[此](http://effbot.org/zone/console-index.htm)内容，因为您没有 windows 的诅咒。

# java - 如何检测用户是否有 Java 中的扩展桌面/显示器？

> ID：14525460
> 
> 赞同：1
> 
> 时间：2013-01-25T15:59:53.783
> 
> 标签：java, screen, awt

我的问题很简单，我相信我只是遗漏了一些小东西，但我不知道它是什么。

我知道如何使用 GraphicsEnvironment、GraphicsConfiguration 和 GraphicsDevice。我知道如何获取所有显示设备等。我知道如何显示到特定设备。

我唯一想不通的是用户的桌面是否被扩展、复制或显示到单个监视器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:47:04.483

它`GraphicsDevice`不一定等同于硬件设备，而是可以由 Java 应用程序使用的“显示器”。因此，当用户的桌面被复制或显示单个显示器时，即使是否连接了第二个显示器（硬件）， `getScreenDevices`（来自`GraphicsEnvironment`）也只显示一个 GraphicsDevice。因此，我相信您将无法使用此 Java API 识别这些设置。

您的解决方案可能需要 JNI 代码。[轻量级 Java 游戏库](http://sourceforge.net/projects/java-game-lib/?source=directory)项目有类似的东西，[看看 Display 类](http://java-game-lib.svn.sourceforge.net/viewvc/java-game-lib/trunk/LWJGL/src/java/org/lwjgl/util/Display.java?revision=3838&view=markup)。

# ruby - Rails 4 直播

> ID：14525464
> 
> 赞同：0
> 
> 时间：2013-01-25T16:00:05.057
> 
> 标签：ruby, ruby-on-rails-3, redis, railscasts, ruby-on-rails-4

我正在关注这个 railscast，它解释了如何实现聊天应用程序。我一步一步地遵循了一切，它似乎一直在工作，直到我开始使用 redis 发布/订阅版本以使其更快，但我的应用程序现在没有更新聊天。每次收到新消息时，我都必须刷新页面！

这是我的代码：

```
class MessagesController < ApplicationController
    include ActionController::Live

  def index
    @messages = Message.all
  end

  def create
    response.headers["Content-Type"] = "text/javascript"
    @message = Message.create!(params[:message].permit(:content, :name))
    $redis.publish('messages.create',@message.to_json)
  end

  def events   
    response.headers["Content-Type"] = "text/event-stream"
    redis=Redis.new
    redis.psubscribe('messages.create') do |on|
      on.pmessage do |pattern, event, data|
       response.stream.write("event: #{event}\n")
      end
    end
    rescue IOError
      logger.info "Stream closed"
    ensure
      redis.quit
      response.stream.close  
    end
end 
```

在消息/index.html.erb

```
<h1>Chat</h1>

<ul id="chat">
  <%= render @messages %>
</ul>

<%= form_for Message.new, remote: true do |f| %>
  <%= f.text_field :name, placeholder: "Name" %>
  <%= f.text_field :content %>
  <%= f.submit "Send" %>
<% end %> 
```

我在 assets/javascript 文件夹中有一个 .js 文件，它负责监听服务器事件。

```
var evnt = new EventSource('/messages/events');

evnt.addEventListener('messages.create', function(e){
  var message;
  message = $.parseJSON(e.data).message;
  return $('#chat').append($('<li>').text("" + message.name + ": " + message.content));
}); 
```

我正在像这样的单独终端上启动 redis-server

```
$: redis-server 
```

我没有使用 brew 安装 redis，只是下载了一个 tar 文件并解压缩了它。它被系统识别，所以应该没问题。

当我尝试应用程序时，它不会使用新消息更新聊天。我需要刷新页面以使它们显示。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:05:30.247

似乎您没有将任何数据写入流，只有事件类型。

```
redis.psubscribe('messages.*') do |on|
  on.pmessage do |pattern, event, data|
    response.stream.write("event: #{event}\n")
    response.stream.write("data: #{data}\n\n") # You are missing this line.
  end
end 
```

# javascript - UI 术语和“标记”滚动条的实现

> ID：14525465
> 
> 赞同：0
> 
> 时间：2013-01-25T16:00:05.953
> 
> 标签：javascript, user-interface, scrollbar

我不确定它在 UI 词汇表中的名称。

我在网络浏览器中有一个（可能很长）文档。当用户搜索一个词时，我想在滚动条上放置彩色哈希标记以显示文档中任何匹配项的相对位置。

例如，当您在页面上“查找”文本时，Google Chrome 会执行此操作，但我想针对元素类执行此操作。

所以，两个问题：

1.  我可以搜索的这个 UI 工件的正确术语是什么？

2.  已经有这样的事情的 jQuery 实现了吗？

# php - Magento 1.6CE 分层导航“重置过滤器”缺少 href 属性（JavaScript 位置？）

> ID：14525472
> 
> 赞同：1
> 
> 时间：2013-01-25T16:00:20.490
> 
> 标签：php, javascript, magento

我的 magento 分层导航出现问题，其中用于清除“购物依据”过滤器的“重置”功能不起作用。

单击时控制台中没有任何显示，页面只是刷新。

我认为锚元素中有一个空的 href 属性必须相关。

```
<div class="actions">
   <a href>Clear All</a>
</div> 
```

我查看了模板提示指示正在生成 html 的目录/层/view.phtml。没有对 div.actions 的引用。

但是，在我希望找到它的地方有以下脚本调用

```
<script type="text/javascript">decorateDataList('narrow-by-list')</script> 
```

有人能告诉我这个引用的代码的位置，并可能解释发生了什么。我对 JavaScript 没问题，但不知道 Prototype——它看起来像是对函数的调用，尽管我希望它以分号结尾。真的，我只需要找到它引用的文件。

如果这无关紧要，我应该在别处寻找生成链接的代码，请告诉我。

非常感谢

# java - 通过黑名单验证 Java 字符串

> ID：14525475
> 
> 赞同：0
> 
> 时间：2013-01-25T16:00:28.607
> 
> 标签：java, regex, string

如果字符串包含“非法字符”，我想编写一个简单的验证器来抛出异常，特别是：

> ~、@、+、% 和 |

我正在寻找最干净的方法，并希望有一种方法可以定义一个“黑名单”正则表达式，它可能看起来像：

```
String blacklist = "~@+%|";
String toValidate = getInputFromUser();

if(toValidate.matches(blacklist))
    throw new RuntimeException("Illegal characters found!"); 
```

但是我知道正则表达式不正确。我是朝着正确的方向前进还是偏离了基础（即是否有更简单的解决方案）？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:03:00.960

正则表达式应该是`^.*[~@+%|].*$`

* * *

或者，您可以使用`[~@+%|]`with`find`方法而不是`matches`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:03:39.450

如果您正在寻找一种清晰简洁的方法，我不会使用正则表达式，因为它在 Java 中的 API 往往会变得混乱。阿帕奇`commons-lang`有`StringUtils.containsAny("text","blacklisted");`. 无论如何，它通常是一个很好的库，因为它对 Java 的补充远不止几个字符串实用程序。

# asp.net - Access数据库错误“找不到文件”？

> ID：14525477
> 
> 赞同：4
> 
> 时间：2013-01-25T16:00:31.850
> 
> 标签：asp.net, vb.net

我长期以来一直使用 Access 数据库作为首选数据库，这是我第一次遇到以下错误消息：

```
Could not find file 'C:\Program Files\Common Files\Microsoft Shared\DevServer\10.0\dbo.mdb' 
```

首先，我没有一个名为 dbo.mdb 的数据库。

其次，数据库的路径在我的 web.config 文件中定义，因此：

```
<connectionStrings>
<add name="cingconstrng" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\inetpub\wwwroot\Roster\App_Data\AllStars.mdb" providerName="System.Data.OleDb" />
</connectionStrings> 
```

最有趣的部分是我将连接字符串传递给一些文件而没有问题。

那么，为什么这个文件不同呢？

是因为我用这个文件将记录插入到数据库中吗？

非常感谢任何想法。从昨晚开始，我一直在研究这个问题，谷歌搜索没有提供任何解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T16:36:53.823

如果您的 SQL 语句使用命名空间，您可以看到此行为：

```
INSERT INTO dbo.someTable ... 
```

删除命名空间，它应该可以解决问题。

# python - 在 Python 中断言失败

> ID：14525478
> 
> 赞同：1
> 
> 时间：2013-01-25T16:00:35.487
> 
> 标签：python, hex, tornado, assert

我有这个代码：

```
/server/frontend/wsn.py
Line 866:        
    netid = hextransform(int(nid), 16)

Line 156: 
    def hextransform(data, length):
        data = hex(data)[2:]
        assert(len(data) <= length)
        # zero-padding
        data = ('0' * (length - len(data))) + data
        # Swap 'bytes' in the network ID
        data = list(data)
        for i in range(0, length, 2):
            tmp = data[i]
            data[i] = data[i + 1]
            data[i + 1] = tmp
        # Reverse the whole string (TODO: CHECK) 
        data.reverse()
        #data = "".join(data)
        return data 
```

我的问题是当我有一个`nid = 15579202759033880576`例子时。是不是太长了？

我从 Tornado 收到的错误是这样的：

```
Traceback (most recent call last):
  File "/usr/lib/python2.6/site-packages/tornado/web.py", line 988, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/tornado/web.py", line 1739, in wrapper
    return method(self, *args, **kwargs)
  File "./wsn.py", line 866, in get
    netid = hextransform(int(nid), 16)
  File "./wsn.py", line 158, in hextransform
    assert(len(data) <= length)
AssertionError 
```

但`netid`在十六进制中是 `0xd834725e00000000`and `len(nid) = 16`。

我不知道问题是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:08:28.290

Python`L`为长数字添加了一个：

```
>>> hex(int(15579202759033880576))
'0xd834725e00000000L' 
```

再增加一个字符。使用不同的方法创建一个十六进制数：

```
format(data, '016x') 
```

反而。该[`format()`功能](http://docs.python.org/2/library/functions.html#format)允许您使用[格式规范迷你语言](http://docs.python.org/2/library/string.html#formatspec)来转换您的数据；`x`在这种情况下是一个小写的十六进制表示，你不需要切片任何东西：

```
>>> format(15579202759033880576, '016x')
'd834725e00000000' 
```

注意格式中的 016；如果您的号码小于 16 位十六进制数字，它将为您填充零：

```
>>> format(1557920, '016x')
'000000000017c5a0' 
```

您的字节交换也可以更轻松地完成；python 支持多个赋值，让您无需临时变量即可交换两个值：

```
for i in range(0, length, 2):
    data[i], data[i + 1] = data[i + 1], data[i] 
```

因此，您的`hextransform`方法可以简化为：

```
def hextransform(data, length):
    data = format(data, '0{0}x'.format(length))
    assert(len(data) == length), '{0!r}, {1}'.format(data, length)
    # Swap 'bytes' in the network ID
    data = list(data)
    for i in range(0, length, 2):
        data[i], data[i + 1] = data[i + 1], data[i]
    data.reverse()
    return data 
```

导致：

```
>>> hextransform(15579202759033880576, 16)
['0', '0', '0', '0', '0', '0', '0', '0', '5', 'e', '7', '2', '3', '4', 'd', '8'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:17:12.230

来自的'L'`hex(int(num))`是你的问题：

```
>>> hex(int(15579202759033880576))[2:]
'd834725e00000000L'   <-- 17 with the L 
```

最快的解决方法就是更新你的子串印章以摆脱那个 L ：

```
data = hex(data)[2:].split('L')[0] 
```

这会将您的字符串拆分为 L（如果存在）并为您提供十六进制部分。它是安全的，因为 'L' 不是十六进制字符，所以它只会在你有一个长字符串时出现。

# r - 从 R 中的观察中选择日期和时间间隔

> ID：14525484
> 
> 赞同：1
> 
> 时间：2013-01-25T16:00:50.887
> 
> 标签：r, time-series

有了 zoo 类的对象，我们可以使用以下函数选择一系列感兴趣的日期的观测值：

```
window(z, start = as.Date("2006-01-05"), end = as.Date("2006-01-08")) 
```

在运行此函数时，会出现以下警告消息：

```
Warning messages:
1: In which(in.index & all.indexes >= start & all.indexes <= end) :
  Metodi incompatibili ("Ops.POSIXt", "Ops.Date") per ">="
2: In which(in.index & all.indexes >= start & all.indexes <= end) :
  Metodi incompatibili ("Ops.POSIXt", "Ops.Date") per "<=" 
```

我检查了该对象是否属于动物园类，并且日期是否包含在时间序列中。

这怎么可能？

根据要求在 str(z) 下方：

```
 ‘zoo’ series from 2006-01-03 to 2013-01-24
  Data: num [1:1795, 1:40] 3.65 3.68 3.69 3.72 3.7 ...
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:1795] "1" "2" "3" "4" ...
  ..$ : chr [1:40] "EURARS" "EURAUD" "EURBRO" "EURCAD" ...
  Index:  POSIXct[1:1795], format: "2006-01-03" "2006-01-04" "2006-01-05" "2006-01-06" ... 
```

根据要求在 dput(head(z)) 下方：

```
structure(c(3.6511, 3.6833, 3.6931, 3.7152, 3.7027, 3.6897, 1.62349, 
1.62257, 1.62011, 1.6115, 1.60243, 1.61108, 2.802, 2.7692, 2.7727, 
2.7741, 2.7238, 2.729, 1.38937, 1.39109, 1.40716, 1.41627, 1.41196, 
1.40666, 1.55055, 1.5472, 1.5448, 1.54335, 1.54215, 1.545, 623.73, 
624.16, 628.43, 638.11, 632.27, 630.7, 9.6988, 9.7803, 9.7689, 
9.802, 9.7492, 9.7354, 2742.03, 2765.68, 2758.65, 2769.27, 2753.3, 
2747.31, 29.047, 28.972, 28.9, 28.88, 28.764, 28.792, 7.4616, 
7.4601, 7.4612, 7.458, 7.46, 7.4589, 6.8983, 6.9551, 6.9594, 
6.9838, 6.9374, 6.9253, 0.6882, 0.68905, 0.68961, 0.6863, 0.68473, 
0.68358, 9.3178, 9.3963, 9.3889, 9.4207, 9.3702, 9.3516, 251.72, 
250.28, 250.66, 250.39, 249.89, 250.86, 11657.46, 11677.26, 11612.05, 
11603.59, 11433.35, 11403.84, 5.5244, 5.5808, 5.5799, 5.6134, 
5.5858, 5.5957, 53.5288, 54.0151, 54.0323, 54.0105, 53.5591, 
53.6189, 74.96, 74.88, 74.41, 73.94, 73.79, 73.84, 139.6, 140.71, 
140.39, 139.09, 138.39, 137.93, 1208.3493, 1210.0214, 1195.7746, 
1200.3966, 1181.3457, 1184.9635, 160.65, 162.15, 162.02, 162.53, 
161.7, 161.43, 10.9802, 10.997, 10.9947, 10.9635, 10.9909, 10.9874, 
12.7724, 12.8255, 12.8746, 12.8338, 12.7859, 12.8273, 4.5416, 
4.5702, 4.5623, 4.5597, 4.5308, 4.5229, 7.9654, 7.9248, 7.9254, 
7.914, 7.9574, 8.0011, 1.7571, 1.7626, 1.7622, 1.7574, 1.7411, 
1.7391, 4.1276, 4.1608, 4.1665, 4.1818, 4.1606, 4.1534, 63.2627, 
63.4733, 63.6725, 63.7198, 63.3608, 63.3412, 3.8295, 3.8116, 
3.807, 3.805, 3.7609, 3.7799, 3.6732, 3.6815, 3.6834, 3.6842, 
3.6644, 3.6492, 34.5475, 34.8363, 34.7254, 34.8369, 34.68, 34.39, 
9.3648, 9.3279, 9.3321, 9.3152, 9.3389, 9.3603, 1.9844, 1.9932, 
1.9938, 1.9902, 1.9766, 1.9716, 48.9853, 48.9426, 48.6762, 48.3184, 
47.9995, 48.0187, 1.6149, 1.6195, 1.6193, 1.6204, 1.6155, 1.6148, 
1.6129, 1.6175, 1.6184, 1.6201, 1.6182, 1.6221, 39.2261, 39.1868, 
38.7569, 39.1189, 38.6148, 38.6309, 6.0673, 6.114, 6.1208, 6.1484, 
6.1095, 6.1082, 1.2019, 1.2119, 1.211, 1.2151, 1.2088, 1.2065, 
7.4834, 7.4559, 7.4658, 7.3872, 7.3206, 7.3497), .Dim = c(6L, 
40L), .Dimnames = list(c("1", "2", "3", "4", "5", "6"), c("EURARS", 
"EURAUD", "EURBRO", "EURCAD", "EURCHF", "EURCLP", "EURCNO", "EURCOP", 
"EURCZK", "EURDKK", "EUREGP", "EURGBP", "EURHKD", "EURHUF", "EURIDO", 
"EURILS", "EURINO", "EURISK", "EURJPY", "EURKRO", "EURKZT", "EURMAD", 
"EURMXN", "EURMYO", "EURNOK", "EURNZD", "EURPEN", "EURPHO", "EURPLN", 
"EURRON", "EURRUB", "EURSEK", "EURSGO", "EURTHO", "EURTND", "EURTRY", 
"EURTWO", "EURUAH", "EURUSD", "EURZAR")), index = structure(c(1136242800, 
1136329200, 1136415600, 1136502000, 1136761200, 1136847600), class = c("POSIXct", 
"POSIXt"), tzone = ""), class = "zoo") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:20:04.397

你不应该`Date`与`POSIXct`

试试这个：

```
window(z, start = as.POSIXct("2006-01-05"), end = as.POSIXct("2006-01-08")) 
```

* * *

或者，正如[@JoshuaUlrich在](https://stackoverflow.com/users/271616/joshua-ulrich)[评论](https://stackoverflow.com/questions/14525484/selecting-dates-and-time-interval-from-observations-in-r/14525886#comment20255166_14525886)中指出的那样，您的数据是每日频率，因此您最好`Date`对数据使用索引类以避免时区异常。

```
index(z) <- as.Date(index(z))
window(z, start = as.Date("2006-01-05"), end = as.Date("2006-01-08")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:20:25.933

它看起来`window`不会自动转换。您必须在与数据相同的类中指定时间：`Date``POSIXct`

```
window(z, start = as.POSIXct("2006-01-05"), end = as.POSIXct("2006-01-08"))
                    EURARS EURAUD EURBRO  EURCAD  EURCHF EURCLP EURCNO  EURCOP
2006-01-05 23:00:00 3.7152 1.6115 2.7741 1.41627 1.54335 638.11  9.802 2769.27
                    EURCZK EURDKK EUREGP EURGBP EURHKD EURHUF   EURIDO EURILS
2006-01-05 23:00:00  28.88  7.458 6.9838 0.6863 9.4207 250.39 11603.59 5.6134
                     EURINO EURISK EURJPY   EURKRO EURKZT  EURMAD  EURMXN
2006-01-05 23:00:00 54.0105  73.94 139.09 1200.397 162.53 10.9635 12.8338
                    EURMYO EURNOK EURNZD EURPEN  EURPHO EURPLN EURRON  EURRUB
2006-01-05 23:00:00 4.5597  7.914 1.7574 4.1818 63.7198  3.805 3.6842 34.8369
                    EURSEK EURSGO  EURTHO EURTND EURTRY  EURTWO EURUAH EURUSD
2006-01-05 23:00:00 9.3152 1.9902 48.3184 1.6204 1.6201 39.1189 6.1484 1.2151
                    EURZAR
2006-01-05 23:00:00 7.3872 
```

# sql - 何时使用 Oracle 提示？

> ID：14525486
> 
> 赞同：3
> 
> 时间：2013-01-25T16:00:53.450
> 
> 标签：sql, oracle10g, query-optimization

我正在对 Oracle Schema（oracle 版本 10）进行一些重构，并且我看到很多使用提示的视图`*+ALL_ROWS*/`。在其他视图中，还有其他类型的提示。为什么我应该使用提示？数据库不是在查询基础上做出最佳选择吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:13:52.300

这是一个很好的问题，但没有单一的答案，因为有不同类别的提示适用于不同的建议。[http://docs.oracle.com/cd/E11882_01/server.112/e16638/hintsref.htm#PFGRF501](http://docs.oracle.com/cd/E11882_01/server.112/e16638/hintsref.htm#PFGRF501)

ALL_ROWS 是一种优化方法，指定它是完全有效的，以明确您的目标是尽早获得结果集的最后一行，而不是第一行。在许多情况下，优化器无论如何都会从查询中推断出它，因此它可能是多余的，但正确使用它不会损害任何东西。

然后是不同的类别，其中一些可能被描述为用于测试和探索，例如 optimizer_features_enable。可以说影响连接顺序、访问路径和连接操作的提示属于这种类型，因为有时不鼓励在应用程序中使用它们。但是优化器不是完美的，也没有完美的信息，有时会根据不完整的信息做出选择，需要修正。

一些提示无疑是有用和适当的—— APPEND 可能是最好的例子，因为它是调用直接路径插入的标准方法。

最后，很难就此给出笼统的建议。确实，每个提示都需要解决是否应该在生产代码中使用，但是如果您了解优化器并了解您正在考虑的提示的真正作用以及是否有更好的选择 - 例如更好的统计数据，不同的初始化参数或动态采样（本身就是一个提示）——如果遇到挑战，您将能够做出自己的评估并捍卫它。

# python - Django 中的链接

> ID：14525487
> 
> 赞同：1
> 
> 时间：2013-01-25T16:00:54.243
> 
> 标签：python, django, hyperlink

我试图让我的链接在 Django 中工作。输入时所有 URL 都有效，但我无法弄清楚内部导航。它们都是 app.com/storename/pagename 的格式，所以如果我在 app.com/shoestore/products 上并单击位置，我应该转到 app.com/shoestore/location。我失去了鞋店的部分。

这是一个示例视图：

```
def homepage(request, store_subdomain):
    store_db, store_products = database_selector(store_subdomain)
    return render_to_response('base.html', 
            {'store_name': store_db.name, 'store_subdomain':store_subdomain}) 
```

我的 urls.py：

urlpatterns = 模式（''，

```
url(r'^admin/', include(admin.site.urls)),
url(r'^(?P<store_subdomain>\w+)/$', homepage),
url(r'^(?P<store_subdomain>\w+)/products/$', products),
url(r'^(?P<store_subdomain>\w+)/shoppingcart/$', shoppingcart),
url(r'^(?P<store_subdomain>\w+)/checkout/$', checkout),
url(r'^static/(?P<path>.*)$', 'django.views.static.serve',
    {'document_root': settings.STATIC_ROOT}),
url(r'^media/(?P<path>.*)$', 'django.views.static.serve',
             {'document_root': settings.MEDIA_ROOT}), 
```

)

和我的导航标签：

```
<li><a href = "/">Home</a></li>
<li><a href = "/products/"}>Products</a></li> 
<li><a href = "/location/">Location</a></li>
<li><a href="mailto:{{store_db.email}}">Email Us</a> </li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:22:58.113

使用命名的[url 模式](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)。

`url(r'^(?P<store_subdomain>\w+)/$', homepage, name='home')`

```
<li><a href="{% url home store_subdomain %}">Home</a></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:33:42.680

`url(r'^(?P<store_subdomain>\w+)/$', 'homepage', name='homepage'),`

```
<a href="{% url home store_subdomain=value %}">Home</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:11:37.617

这里没有魔法。您在导航中编写了根绑定 url。在这种情况下，我建议使用 django 的 urlresolvers 中的 reverse() 函数。

# ios - 我可以以编程方式在分层 UITableView 结构中选择详细信息页面吗？

> ID：14525489
> 
> 赞同：0
> 
> 时间：2013-01-25T16:00:57.290
> 
> 标签：ios, core-data, ios6, uinavigationcontroller, uitableview

我有以下问题，我找不到可行的解决方案。

我有一个使用 CoreData 的分层数据模型，它通常表示包含类别和产品的产品目录。用户可以手动浏览结构（CategoryList -> SubCategoryList -> ProductList -> ProductDetail 页面）而不会出现任何问题。

但是来了！我们有一个包含特色产品的页面。我们想要做的是，如果用户点击特色产品，选项卡应该切换到目录（正常工作）并且应该显示所选产品的详细信息视图（也可以通过创建 detailsViewCotroller 并推送来正常工作它放到堆栈上），但是在类别上下文中（我不知道该怎么做）。因此，用户应该可以点击详细视图导航栏中的“返回”按钮，并且所有子类别和类别都应该就位以供浏览。

这甚至可以管理吗？同样，我将 CoreData 用于具有父属性的模型。关于如何构建导航堆栈的任何想法或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:40:10.057

假设您知道特色产品所属的类别和子类别，您可以使用导航控制器方法 setViewControllers:animated:，并传入一个控制器数组，一个用于类别，一个用于子类别，一个用于详细信息。您将以与现在相同的方式获取这些数据。

# mongodb - MongoDB 设计问题 - 2 种方式参考

> ID：14525497
> 
> 赞同：1
> 
> 时间：2013-01-25T16:01:22.890
> 
> 标签：mongodb, database, nosql

我是 MongoDB 新手，所以如果这些问题很简单，我深表歉意。

我正在开发一个应用程序，它将跟踪特定的用户交互并将有关用户和交互的信息放入 MongoDB。有几种类型的交互都会从用户那里收集不同的信息。

我的第一个问题是：所有这些交互应该在同一个集合中还是应该按类型将它们分开（就像在 RDBMS 中那样）？

此外，我希望能够查找：

1.  特定用户进行的所有交互
2.  所有进行了特定交互的用户

我正在考虑为用户在其文档中执行的每个交互添加一个对交互文档的手动引用，并为在每个交互文档中执行交互的用户手动引用。

我的第二个问题是：这种手动引用的“加倍”是否有意义或者有更好的方法来做到这一点？

任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:06:16.097

> 我的第一个问题是：所有这些交互应该在同一个集合中还是应该按类型将它们分开（就像在 RDBMS 中那样）？

在不太了解您的数据大小、写入量、读取量、查询需求等的情况下，我会说；是的，都在一个集合中。

我不确定是否将它们分开是我将如何在 RDBMS 中设计它。

> “这种手动引用的“加倍”有意义还是有更好的方法来做到这一点？”

不，它不会对我进行合理的数据库设计。

在交互集合文档上放一个`user_id`听起来就足够了。

因此，当您想要获取所有用户交互时，您只需通过交互集合进行查询`user_id`。

当您想以相反的方式查询适合您的查询区域的所有交互时，请取出那些`user_id`s 然后`$in`在用户集合上执行一个子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:25:59.310

> 我的第一个问题是：所有这些交互应该在同一个集合中还是应该按类型将它们分开（就像在 RDBMS 中那样）？

文档存储相对于关系数据库的最大优势正是您可以做到这一点。将所有不同的交互放入一个集合中，不要害怕为它们提供不同的字段集。

> 此外，我希望能够查找：
> 
> > 特定用户进行的所有交互
> 
> 我正在考虑为用户在其文档中执行的每个交互添加一个对交互文档的手动引用，并为在每个交互文档中执行交互的用户手动引用。

请注意，拥有无限增长的文档通常不是一个好主意。MongoDB 有文档大小的上限（默认：16MB）。MongoDB 不擅长处理大型文档，因为文档完全加载到内存缓存中。当您有许多大对象时，缓存中容纳不了多少。此外，当文档增长时，有时需要将它们移动到另一个硬盘驱动器位置，这会减慢更新速度（这也是[自然顺序](http://docs.mongodb.org/manual/reference/glossary/#term-natural-order)的螺丝钉，但无论如何你都不应该依赖它）。

> > 所有进行了特定交互的用户

您是指特定的交互*实例*（假设多个用户可以是一个交互的一部分）还是已经执行特定交互*类型*的所有用户？

在后一种情况下，我将向用户文档添加一组执行的交互类型，因为否则您将不得不执行类似连接的操作，这需要 MapReduce 或一些应用程序端的逻辑。

第一种情况，与 Sammaye 的建议相反，我建议不要使用用户集合的 _id 字段，而是使用用户名。当您在 user.username 上使用带有唯一标志的索引时，它与通过 user._id 搜索一样快，并且保证了唯一性。

原因是当您搜索特定用户的交互时，您更有可能知道用户名而不是 id。当您只有用户名并且通过 id 引用用户时，您首先必须搜索 users 集合以获取用户名的 _id，这是一个额外的数据库查询。

这当然假设您并不总是手头有 user._id。当你这样做时，你当然可以使用 _id 作为参考。

# postgresql - Postgres 问题编码“UTF8”在编码“LATIN1”中没有等价物

> ID：14525505
> 
> 赞同：31
> 
> 时间：2013-01-25T16:01:34.007
> 
> 标签：postgresql, encoding, latin1

我们的 postgres 生产数据库服务器有一个名为 crd_production 的数据库，它源于`template1`模板数据库。顺便说一句，在 Ubuntu 12.04 机器上，初始创建 pgcluster 时 template1 和 template0 数据库的默认编码具有 LATIN1 的默认编码。我已经删除了`template1`数据库并使用 utf-8 编码重新创建了它，如下所示。

```
 Name      |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   
----------------+----------+----------+------------+------------+-----------------------
 crd_production | deployer | UTF8     | en_US.utf8 | en_US.utf8 | 
 postgres       | postgres | UTF8     | en_US.utf8 | en_US.utf8 | 
 template0      | postgres | LATIN1   | en_US      | en_US      | =c/postgres          +
                |          |          |            |            | postgres=CTc/postgres
 template1      | postgres | UTF8     | en_US.utf8 | en_US.utf8 | 
(4 rows) 
```

我们最终部署了我们的 rails(3.2.11) 应用程序并开始使用`crd_production`db 作为主数据库。ActiveRecord 正在写入/读取数据时没有问题，但是当我尝试从`psql`该数据库上的命令行触发任何 sql 查询时，会发生以下错误 -

```
crd_production=# select * from users;
ERROR:  character with byte sequence 0xe2 0x80 0x9c in encoding "UTF8" has no equivalent in encoding "LATIN1" 

crd_production=# select * from features;
ERROR:  character with byte sequence 0xe2 0x80 0x99 in encoding "UTF8" has no equivalent in encoding "LATIN1" 
```

这里可能是什么问题？是客户端的问题吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-25T16:01:34.007

正如猜测的那样，问题出在数据库上的 client_encoding 上。

```
crd_production=# show client_encoding;
 client_encoding 
-----------------
 LATIN1
(1 row) 
```

要将客户端编码更改为 UTF-8，您需要执行此操作

```
crd_production=#  SET client_encoding = 'UTF8';
SET 
```

再检查一遍

```
crd_production=# show client_encoding;
 client_encoding 
-----------------
 UTF8
(1 row) 
```

现在一切正常。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-09-08T22:43:19.017

我以前在 postgresql 10 上使用 ruby​​ on rails 有同样的情况。这就是诀窍

```
update pg_database set encoding = pg_char_to_encoding('UTF8') where datname = 'thedb' 
```

资料来源：[如何更改 postgres 数据库的字符编码？](https://stackoverflow.com/questions/5090858/how-do-you-change-the-character-encoding-of-a-postgres-database)

# image - 多个文件上传代码错误

> ID：14525511
> 
> 赞同：0
> 
> 时间：2013-01-25T16:01:40.387
> 
> 标签：image, file-upload

```
<?php
if(isset($_FILES['files']['name']))
{
    foreach($_FILES['files']['name'] as $key)
    {
    echo $file_name = $_FILES['files']['name'][$key];
    }
}
?>

<form action="test.php" method="POST" enctype="multipart/form-data">
<input type="file" name="files[]" multiple />
<input type="submit" value="submit">
</form> 
```

我想回显文件名。但我有错误

注意：未定义索引：第 6 行 D:\xampp1\htdocs\imageupload\test.php 中的 1_t.jpg

注意：未定义索引：第 6 行 D:\xampp1\htdocs\imageupload\test.php 中的 2_t.jpg

注意：未定义索引：第 6 行 D:\xampp1\htdocs\imageupload\test.php 中的 007.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:11:28.870

这应该工作

```
<?php
$filenames = array();
if(isset($_FILES['files']['name'])) {
    foreach($_FILES['files']['name'] as $name) {
      $filenames[] = $name;
    }
}
print implode('<br/>', $filenames);
?>

<form method="POST" enctype="multipart/form-data">
<input type="file" name="files[]" multiple />
<input type="submit" value="submit">
</form> 
```

# java - uk.co.mmscomputing.device.twain.TwainIOException：无法加载 Twain 源管理器

> ID：14525515
> 
> 赞同：3
> 
> 时间：2013-01-25T16:01:47.440
> 
> 标签：java, open-source, applet, twain

我想通过Java扫描一些论文。我找到了 mm 的计算孪生库。当我`TwainExample.java`在站点上运行示例时，我收到此错误。

系统信息：Windows 7 Ultimate 64 位 - jre 7 32 位

```
JarLib.load: Successfully loaded library [jar:file:/C:/Users/i_t_manager/
  Documents/myJavaProject/JavaApplication11/build/classes/
  uk.co.mmscomputing.device.twain.jar!
  /uk/co/mmscomputing/device/twain/win64/jtwain.dll] from jar file location 
```

在我点击选择源按钮后：

```
uk.co.mmscomputing.device.twain.TwainIOException: Cannot load Twain Source Manager. 
```

谢谢你的帮助。我的代码如下。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package uk.co.mmscomputing.device.twain.applet;

/*
A scanner plugin for ImageJ which uses the free mm's computing java library 
(available at http://www.mms-computing.co.uk/)

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.*/

import ij.IJ;
import ij.ImagePlus;
import ij.plugin.PlugIn;
import java.awt.Rectangle;
import java.awt.image.BufferedImage;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import uk.co.mmscomputing.device.scanner.Scanner;
import uk.co.mmscomputing.device.scanner.ScannerDevice;
import uk.co.mmscomputing.device.scanner.ScannerIOException;
import uk.co.mmscomputing.device.scanner.ScannerIOMetadata;
import uk.co.mmscomputing.device.scanner.ScannerListener;
import javax.swing.WindowConstants;

public class Scan_ extends JFrame implements PlugIn, ScannerListener {

    private static final long serialVersionUID = 1L;
    private JPanel jContentPane = null;
    private JButton jButton = null;
    private JButton jButton1 = null;
    private Scanner scanner;

    public static void main(String[] args) {
        new Scan_().setVisible(true);
    }

    public void run(String arg0) {

        new Scan_().setVisible(true);
    }

    /**
     * This is the default constructor
     */
    public Scan_() {
        super();
        initialize();
        try {
            scanner = Scanner.getDevice();
            scanner.addListener(this);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    /**
     * This method initializes this
     * 
     * @return void
     */
    private void initialize() {
        this.setSize(300, 120);
        this.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        this.setResizable(false);
        this.setContentPane(getJContentPane());
        this.setTitle("Scan");
        this.addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent e) {

            }
        });
    }

    /**
     * This method initializes jContentPane
     * 
     * @return javax.swing.JPanel
     */
    private JPanel getJContentPane() {
        if (jContentPane == null) {
            jContentPane = new JPanel();
            jContentPane.setLayout(null);
            jContentPane.add(getJButton(), null);
            jContentPane.add(getJButton1(), null);
        }
        return jContentPane;
    }

    /**
     * This method initializes jButton
     * 
     * @return javax.swing.JButton
     */
    private JButton getJButton() {
        if (jButton == null) {
            jButton = new JButton();
            jButton.setBounds(new Rectangle(4, 16, 131, 42));
            jButton.setText("Select Device");
            jButton.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent e) {
                    if (scanner.isBusy() == false) {
                        selectDevice();
                    }

                }
            });
        }
        return jButton;
    }

    /**
     * This method initializes jButton1
     * 
     * @return javax.swing.JButton
     */
    private JButton getJButton1() {
        if (jButton1 == null) {
            jButton1 = new JButton();
            jButton1.setBounds(new Rectangle(160, 16, 131, 42));
            jButton1.setText("Scan");
            jButton1.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent e) {

                    getScan();

                }
            });
        }
        return jButton1;
    }

    /* Select the twain source! */
    public void selectDevice() {

        try {
            scanner.select();
        } catch (ScannerIOException e1) {
            IJ.error(e1.toString());
        }

    }

    /* Get the scan! */
    public void getScan() {

        try {
            scanner.acquire();
        } catch (ScannerIOException e1) {
            IJ.showMessage("Access denied! \nTwain dialog maybe already opened!");
            // e1.printStackTrace();

        }

    }

    public void update(ScannerIOMetadata.Type type, ScannerIOMetadata metadata) {

        if (type.equals(ScannerIOMetadata.ACQUIRED)) {

            ImagePlus imp = new ImagePlus("Scan", metadata.getImage());
            imp.show();
            metadata.setImage(null);
            try {
                new uk.co.mmscomputing.concurrent.Semaphore(0, true).tryAcquire(2000, null);
            } catch (InterruptedException e) {
                IJ.error(e.getMessage());
                // e.printStackTrace();
            }

        } else if (type.equals(ScannerIOMetadata.NEGOTIATE)) {
            ScannerDevice device = metadata.getDevice();
            try {
                device.setResolution(100);
            } catch (ScannerIOException e) {
                IJ.error(e.getMessage());
            }
            /*
             * More options if necessary! try{
             * device.setShowUserInterface(true);
             * device.setShowProgressBar(true);
             * device.setRegionOfInterest(0,0,210.0,300.0);
             * device.setResolution(100); }catch(Exception e){
             * e.printStackTrace(); }
             */
        } else if (type.equals(ScannerIOMetadata.STATECHANGE)) {

            // IJ.error(metadata.getStateStr());
        } else if (type.equals(ScannerIOMetadata.EXCEPTION)) {
            IJ.error(metadata.getException().toString());

        }

    }

} // @jve:decl-index=0:visual-constraint="95,130" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-18T18:02:13.827

我对此很清楚......这只是环境问题。

解决方案是，

您可以看到您的驱动程序软件支持 32 位或 64 位。(C:/windows/twain_32) 或 (C:/windows/twain_64)。twain_32 表示您应该安装 32 位 java 或 twain_64 表示您应该安装 64 位 java 环境。

感谢您

# android - 布局中未找到资源错误

> ID：14525516
> 
> 赞同：0
> 
> 时间：2013-01-25T16:01:48.090
> 
> 标签：android

在启动应用程序之前，我尝试使用 splash 。图像名称匹配并且在 xml 文件和 java 文件中没有显示任何错误。但是项目显示错误：找不到与给定名称匹配的资源这些是 splash.java 和 splash.xml 代码： splash.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical" android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <ImageView android:layout_width="wrap_content"
          android:layout_height="fill_parent"
          android:src="@drawable/splash"
          android:layout_gravity="center"/>

</LinearLayout> 
```

飞溅.java：

```
package com.splash;
import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.os.Handler;

 public class Splash extends Activity {
 @Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.splash);

int secondsDelayed = 1;
new Handler().postDelayed(new Runnable() {
        public void run() {
                startActivity(new Intent(Splash.this, menu.class));
                finish();
        }
}, secondsDelayed * 1000);
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:53:00.280

我也在我的应用程序中发现了这个错误。在我的应用程序中，我通过在所有可绘制对象的文件夹中复制 png 图像解决了我的问题，即 drawable-ldpi、drawable-mdpi、drawable-hdpi、drawable-xhdpi。这在我的应用程序中正常工作。希望这能解决您的问题。

# jquery - jquery datepicker 在滚动后也总是在输入之上

> ID：14525518
> 
> 赞同：0
> 
> 时间：2013-01-25T16:01:56.820
> 
> 标签：jquery, datepicker

我快疯了！有很多解决方案，但不工作！为什么在 IE 中滚动后 mij datepicker 会改变位置？我希望它贴在我的输入字段的左上角，即使页面滚动...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:46:20.007

几天后自己找出来！把它放在演出前：

```
function legen_array(input, inst) {
    setTimeout(function() {
        inst.dpDiv.position({
               my: 'left bottom',
               at: 'left top',
               collision: 'none',
               of: input
       });
        }, 1);
)}; 
```

# ruby - Graph API 的 URL 权限

> ID：14525519
> 
> 赞同：0
> 
> 时间：2013-01-25T16:01:59.910
> 
> 标签：ruby, facebook, facebook-graph-api, koala

我正在使用 ruby​​ 和 gem 重新实现一些旧的服务器端代码`Koala`。旧应用程序调用：

```
https://graph.facebook.com/me/music?method=GET&metadata=true&format=json&access_token= 
```

我很困惑

1-应用程序需要使用此URL的Facebook权限是什么

2-对象名称是什么？我正在使用考拉：[https](https://github.com/arsduo/koala) ://github.com/arsduo/koala ，它使用 get_object 方法并需要一个字符串。我不确定要传递什么。“音乐”不起作用。

谢谢

# perl - Perl Archive::Rar 用密码处理档案？

> ID：14525525
> 
> 赞同：1
> 
> 时间：2013-01-25T16:02:08.897
> 
> 标签：perl, extract, archive, rar

寻找一种使用密码解压缩档案的方法！我将它用于没有通过的人：

```
use strict;
use warnings;
use Archive::Rar;

$archive = "test.rar";

$unrar = Archive::Rar->new(archive => "$archive");
$unrar->Extract (); 
```

密码为“pass123”。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:23:36.423

`Archive::Rar`是真正的二进制文件的薄而复杂的包装器，提供非常狭窄的过程控制，同时在其中移动大量无意义的数据。请考虑`rar`通过 Perl 的许多 IPC 工具手动调用二进制文件，或者`Archive::Unrar`在 Windows 平台上使用。

无论如何，因为这个模块有相当草率的数据控制，如果你只想为*一个镜头任务*快速而肮脏的脚本，你可以通过在文件列表中注入标志来欺骗它把你想要的任何东西放在命令行中：

```
my $unrar = Archive::Rar->new(archive => $archive);
$unrar->{args}{-files} = ['.', '-ppass123'];
$unrar->Extract; 
```

# widget - Symfony - 关系 n:m - sfWidgetFormPropelChoice

> ID：14525526
> 
> 赞同：1
> 
> 时间：2013-01-25T16:02:14.997
> 
> 标签：widget, symfony-1.4, propel

我直奔主题；）我在数据库中有这样一个方案：

```
 <table name="kongres">
    <column name="id" type="integer" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="is_actived" type="boolean" default="0"/>
    <column name="is_homepage" type="boolean" default="0"/>
    <column name="template" type="VARCHAR" size="50" required="true"/>
    <column name="produkt" type="integer" required="true"/>
</table>

<table name="menugroup">
    <column name="id" type="integer" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="tytul" type="varchar" size="255"/>
</table>

<table name="kongresmenugroup">
    <column name="id" type="integer" required="true" autoIncrement="true" primaryKey="true"/>
    <column name="kongres_id" type="integer" required="true"/>
    <foreign-key foreignTable="kongres" onDelete="CASCADE">
        <reference local="kongres_id"
                   foreign="id"/>
    </foreign-key>
    <column name="menugroup_id" type="integer" required="true"/>
    <foreign-key foreignTable="menugroup" onDelete="CASCADE">
        <reference local="menugroup_id"
                   foreign="id"/>
    </foreign-key>
</table> 
```

一旦正确的命令： symfony propel: build-model 和 symfony propel: build-forms 我得到了一个表单（我添加并扩展了多个选项，因为我需要在子菜单中保存比一个更多的会议）（后端） ：

```
 public function configure()
{

$this->setWidgets(array(
'id' => new sfWidgetFormInputHidden(),
'kongres_id' => new sfWidgetFormPropelChoice(array('model' => 'Kongres', 'add_empty' => false, 'expanded' => true, 'multiple' => true)),
'menugroup_id' => new sfWidgetFormPropelChoice(array('model' => 'Menugroup', 'add_empty' => false)),
));

$this->setValidators(array(
'id' => new sfValidatorPropelChoice(array('model' => 'Kongresmenugroup', 'column' => 'id', 'required' => false)),
'kongres_id' => new sfValidatorPropelChoice(array('model' => 'Kongres', 'column' => 'id','multiple' => true)),
'menugroup_id' => new sfValidatorPropelChoice(array('model' => 'Menugroup', 'column' => 'id','multiple' => true)),
));

$this->widgetSchema->setNameFormat('kongresmenugroup[%s]');

$this->errorSchema = new sfValidatorErrorSchema($this->validatorSchema);

} 
```

现在我的问题是，好像我点击保存它会将数据保存到数据库，但它们不正确，它总是写入字段：例如，menugroup_id -> 1 和 kongres_id -> 1，尽管事实上国会已经选择的 ID = 21 并且 ID 菜单等于例如 3 请告诉我我做错了什么，因为我已经迷路了；/ 谢谢！

顺便提一句。对不起我的英语不好 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:39:15.817

这是因为您`'multiple' => true`的表单中有外键，该值被保存到`1`; 外键关系不理解该表单控件发送的数组。
将 multiple 更改为 false，或更改架构以使 kongres_id 和 menugroup_id 不是外键。

# c - 反转字符串并计算在 C 中反转的字符数

> ID：14525527
> 
> 赞同：1
> 
> 时间：2013-01-25T16:02:16.680
> 
> 标签：c, string, reverse

我的教授已经开始编写代码了，看起来……

```
#include "stdafx.h"

int main(int argc, char* argv[])
{
    int numchar;

    char mystring[] = "This is the string to be printed  in reverse order";
    numchar = reverseString(mystring);

    puts("Reversed String is  ");
    puts(mystring);
}
int reverseString(char *mystring)
{

} 
```

现在我应该完成它，这就是我卡住的地方。我查找了无数个反转字符串的示例程序，但所有这些程序都以不同的方式完成，我不知道如何将其“转换”为我的教授为我们布置的代码的适当上下文。我也对“int argc”应该是什么感到困惑。但是，我想在计算和返回反转的字符数时，我可以简单地输入这样的`for(int length=0; str[length]!='\0';length++);`内容，但除此之外，我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:18:21.323

如果您担心函数 reverseString() 将返回什么，您将反转整个字符串。所以，如果字符串的长度是偶数，函数应该返回`length`，如果长度是奇数，它应该返回`length-1`

除此之外，根据您的问题，它是通常的字符串反转功能。

```
int reverseString(char *string) 
{
   int length, c;
   char *begin, *end, temp;

   length = string_length(string);

   begin = string;
   end = string;

   end += length - 1;    
   while(begin<end){
      temp = *end;
      *end = *begin;
      *begin = temp;

      begin++;
      end--;
   }
   if(length % 2 == 0) return length;
   else return length-1;
}

int string_length(char *pointer)
{
   int c = 0;

   while( *(pointer+c) != '\0' )
      c++;

   return c;
} 
```

# .htaccess - .htaccess - 制作像 page:part 这样的网址

> ID：14525529
> 
> 赞同：0
> 
> 时间：2013-01-25T16:02:21.813
> 
> 标签：.htaccess

我有一个 .htaccess 发送这些网址：

```
http://example.com/this/is/test/ 
```

到 index.php 得到这样的 url：

```
index.php?var1=this&var2=is&var3=test 
```

我想要做的就是改变`/`to`:`意味着 url 将是这样的：

```
http://example.com/this:is:test 
```

就像以前一样将变量发送到索引页面。这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([^/]+)?/?([^/]+)?/?([^/]+)?/?   [NC]
RewriteRule .*     index.php?var1=%1&var2=%2&var3=%3   [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:34:08.097

你不应该`%{REQUEST_URI}`用来匹配零件。因此，为了制作您想要的东西，您必须将您的更改`/`为`:`. 我还将使用更好的语法。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/([^:]+):([^:]+):([^/]+)/? index.php?var1=$1&var2=$2&var3=$3 [L] 
```

# css - ColorMatrix CSS 过滤器将黑白图像转换为双色调

> ID：14525530
> 
> 赞同：4
> 
> 时间：2013-01-25T16:02:22.217
> 
> 标签：css, colormatrix, colormatrixfilter

我需要创建一个自定义 CSS 过滤器，它将黑白图像转换为具有两种自定义颜色的双色图像。

我想以这种方式应用过滤器（不确定这种语法是否可行，可能需要单独传递 6 个参数）：

```
.duotone {
    -webkit-filter: custom(none url(/filters/duotone.fs),
        black_color [255, 0, 0] white_color [255, 192, 203]);
} 
```

因此，在这种情况下，黑色替换为红色，白色和透明色（背景）都替换为粉色，所有灰色阴影都替换为中间的颜色（使用直线曲线）。

也许甚至可以在没有外部文件的情况下在 CSS 中定义过滤器？

此过滤器的应用是在运行时将黑白图标转换为彩色图标。

关于如何做到这一点的例子很少，[这个](http://blattchat.com/2012/05/30/webkit-filter-shaders-oh-my/)非常通用，涵盖了更广泛的过滤器，[规范](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html#custom-filter)也不是那么容易理解。

有人可以发布一个工作过滤器来做这个或类似的事情吗？或者至少你可以给我指出一些与我的情况相关的更集中的 ColorMatrix 应用示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T01:32:45.123

**更新：**

为此，您需要在 CSS 上使用 -webkit-mask-image。这曾经只是一个 webkit，但现在是 w3c css3。

该支持仅存在于 webkit 上。为了保持向后兼容性并显示常规的黑色图标，您需要确定浏览器是否具有此功能。我已经使用[modernizr](http://modernizr.com/)存档了。

[http://jsfiddle.net/kkobold/Zq5FZ/5/](http://jsfiddle.net/kkobold/Zq5FZ/5/)

旧答案：

> 我相信这就是您正在寻找的结果：
> 
> [http://s7.postimage.org/vo5v33tuj/Screen_Shot_2013_02_03_at_11_28_46_PM.png](http://s7.postimage.org/vo5v33tuj/Screen_Shot_2013_02_03_at_11_28_46_PM.png)
> 
> 您可以通过过滤到棕褐色然后更改色调度来将其存档。不同的组合会产生不同的结果。但是可以为色调制作一个简单的颜色选择器，为棕褐色制作一个幻灯片，以增加或减少颜色变化的强度。
> 
> 和 CSS3。
> 
> ```
> <div class="pull-left span4" >
> <img src="/img/bw.jpg" style="-webkit-filter: sepia(0.0) hue-rotate(0deg);" width="300"/><br />
> -webkit-filter: sepia(0) hue-rotate(0deg);
> </div>
> <div class="pull-left span4" >
> <img src="/img/bw.jpg" style="-webkit-filter: sepia(0.8) hue-rotate(50deg);" width="300"/><br />
> -webkit-filter: sepia(0.8) hue-rotate(50deg);
> </div>
> <div class="pull-left span4" >
> <img src="/img/bw.jpg" style="-webkit-filter: sepia(0.8) hue-rotate(100deg);" width="300"/><br />
> -webkit-filter: sepia(0.8) hue-rotate(100deg);
> </div>
> <div class="pull-left span4" >
> <img src="/img/bw.jpg" style="-webkit-filter: sepia(0.8) hue-rotate(150deg);" width="300"/><br />
> -webkit-filter: sepia(0.8) hue-rotate(150deg);
> </div>
> <div class="pull-left span4" >
> <img src="/img/bw.jpg" style="-webkit-filter: sepia(0.8) hue-rotate(200deg);" width="300"/><br />
> -webkit-filter: sepia(0.8) hue-rotate(200deg);
> </div>
> <div class="pull-left span4" >
> <img src="/img/bw.jpg" style="-webkit-filter: sepia(0.8) hue-rotate(250deg);" width="300"/><br />
> -webkit-filter: sepia(0.8) hue-rotate(250deg);
> </div>
> <div class="pull-left span4" >
> <img src="/img/bw.jpg" style="-webkit-filter: sepia(0.8) hue-rotate(300deg);" width="300"/><br />
> -webkit-filter: sepia(0.8) hue-rotate(300deg);
> </div>
> <div class="pull-left span4" >
> <img src="/img/bw.jpg" style="-webkit-filter: sepia(0.8) hue-rotate(350deg);" width="300"/><br />
> -webkit-filter: sepia(0.8) hue-rotate(350deg);
> </div> 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-30T05:38:49.633

在这里聚会有点晚了，但我已经为您构建了一个 CSS 自定义过滤器，它完全符合您的要求。所有代码都可以在 GitHub 上找到：[https ://github.com/awgreenblatt/css-custom-filters/tree/master/duotone](https://github.com/awgreenblatt/css-custom-filters/tree/master/duotone)

由于安全限制，自定义过滤器无法读取像素；他们只能对他们应用转换。因此，例如，过滤器不能说，如果像素是黑色的，则将其更改为红色。但是，仍然有办法做到这一点。

每个颜色分量的范围为 [0,1]：源图像中的所有白色像素将为 (1, 1, 1, 1)，源图像中的所有黑色像素将为 (0, 0, 0, 1)

让我们调用您想要将黑色映射到的颜色：(br, bg, bb, 1) 和您想要将白色映射到的颜色：(wr, wg, wb, 1)

您可以在片段着色器中定义一个 css_ColorMatrix，它将对源图像应用变换。如果我们将混合模式设置为“乘”，那么 css_ColorMatrix 将与当前源图像的颜色相乘。

因此，我们将 css_ColorMatrix 设置为：

```
wr - br,       0,       0,     0,
      0, wg - bg,       0,     0,
      0,       0, wb - bb,     0,
     br,      bg,      bb,     1 
```

如果源像素是黑色的 (0, 0, 0, 1)，那么乘法的结果将是 (br, bg, bb, 1) 如果源像素是白色 (1, 1, 1, 1)，那么乘法的结果将是

((wr - br + br), (wg - bg + bg), (wb - bb + bb), 1) 或 (wr, wg, wb, 1)

这是片段着色器源：

```
precision mediump float;

uniform vec3 black;
uniform vec3 white;

// Main

void main()
{
  vec3 b = black / 255.0;
  vec3 w = white / 255.0;

  css_ColorMatrix = mat4(w.r-b.r, 0.0, 0.0, 0.0,
                         0.0, w.g - b.g, 0.0, 0.0,
                         0.0, 0.0, w.b - b.b, 0.0,
                         b.r, b.g, b.b, 1.0);
} 
```

顶点着色器只是默认设置：

```
precision mediump float;

// Built-in attributes

attribute vec4 a_position;

// Built-in uniforms

uniform mat4 u_projectionMatrix;

// Main

void main()
{
  gl_Position = u_projectionMatrix * a_position;
} 
```

然后您按如下方式应用过滤器：

```
-webkit-filter: custom(url(duotone.vs) mix(url(duotone.fs) normal source-atop), 
             1 1 border-box, black 255 0 0, white 255 192 203); 
```

# android - 倒数计时器停止在后台运行

> ID：14525533
> 
> 赞同：0
> 
> 时间：2013-01-25T16:02:33.440
> 
> 标签：android, timer, continue

我在我的应用程序中实现了倒数计时器。它在后台运行得很好而且花花公子，但是当我使用高级任务杀手时，它会停止计时器并且重新启动它的唯一方法是再次打开应用程序。无论如何，即使我使用高级任务杀手之类的东西，计时器是否仍然存在？

代码：

```
 TextView tv;
    final MyCounter timer = new MyCounter(10000,1000);

    tv  = (TextView)findViewById(R.id.healthtext);
    tv.setText("10"); 
    timer.start();
}

public class MyCounter extends CountDownTimer{

    public MyCounter(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {
        Toast.makeText(getApplicationContext(), "death", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onTick(long millisUntilFinished) {
        tv.setText((millisUntilFinished/1000)+""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:11:08.327

据我所知 - 不，因为任务杀手会破坏您的应用程序的进程，导致任何正在运行的线程退出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:13:11.067

当计时器是您的应用程序的一部分时不是。您当然可以制作一个不属于应用程序的计时器。

# java - 处理unicode�，如何摆脱？安卓/java

> ID：14525535
> 
> 赞同：10
> 
> 时间：2013-01-25T16:02:36.160
> 
> 标签：java, android, unicode, character-encoding

我正在使用终端仿真器库来创建终端，然后使用它将通过串行输入的数据发送到串行设备。图书馆可以在[这里](https://github.com/jackpal/Android-Terminal-Emulator/tree/master/libraries/emulatorview)看到。

当我将数据输入终端时，正在发送/接收一系列奇怪的字符。我认为 unicode 替换字符是通过串行发送的，串行设备不知道它是什么并返回 ~0。

当我写“测试”时，终端中出现的屏幕截图：![在此处输入图像描述](../Images/547fbef7fc9f4563c0e21fdd7b8a44cb.png)

以及显示发送的字符串和接收的数据的日志。![http://i.imgur.com/x79aPzv.png](../Images/fc3eb205ee124080412c2e9f03998bfb.png)

我创建了一个 EmulatorView，它是终端视图。[它在这里](https://github.com/jackpal/Android-Terminal-Emulator/blob/master/libraries/emulatorview/src/jackpal/androidterm/emulatorview/EmulatorView.java)提到了钻石。

```
private void sendText(CharSequence text) {
                int n = text.length();
                char c;
                try {
                    for(int i = 0; i < n; i++) {
                        c = text.charAt(i);
                        if (Character.isHighSurrogate(c)) {
                            int codePoint;
                            if (++i < n) {
                                codePoint = Character.toCodePoint(c, text.charAt(i));
                            } else {
                                // Unicode Replacement Glyph, aka white question mark in black diamond.
                                codePoint = '\ufffd';
                            }
                            mapAndSend(codePoint);
                        } else {
                            mapAndSend(c);
                        }
                    }
                } catch (IOException e) {
                    Log.e(TAG, "error writing ", e);
                }
            } 
```

有没有什么办法解决这一问题？任何人都可以在库类中看到为什么会这样吗？，如果我愿意，我如何在 java 中引用 � 来解析它？我不能说如果 (!str.contains("�") 我接受它。

当我在终端中输入时，它会运行：

```
public void write(byte[] bytes, int offset, int count) {

 String str;
try {
    str = new String(bytes, "UTF-8");
      Log.d(TAG, "data received in write: " +str );

      GraphicsTerminalActivity.sendOverSerial(str.getBytes("UTF-8"));
} catch (UnsupportedEncodingException e) {
    Log.d(TAG, "exception" );
    e.printStackTrace();
}

        // appendToEmulator(bytes, 0, bytes.length);

 return;
} 
```

这就是我所说的发送数据。sendData(Byte[] data) 是一个库方法。

```
public static void sendOverSerial(byte[] data) {
        String str;
        try {
            str = new String(data,"UTF-8");
             if(mSelectedAdapter !=null && data !=null){
                 Log.d(TAG, "send over serial string==== " + str);

                mSelectedAdapter.sendData(str.getBytes("UTF-8"));
                 }
        } catch (UnsupportedEncodingException e) {
            Log.d(TAG, "exception");
            e.printStackTrace();
        }

    } 
```

发送数据后，将在此处收到回复：

```
public void onDataReceived(int id, byte[] data) {

        try {
            dataReceived = new String(data, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            Log.d(TAG, "exception");
            e.printStackTrace();
        }

        try {
            dataReceivedByte = dataReceived.getBytes("UTF-8");
        } catch (UnsupportedEncodingException e) {
            Log.d(TAG, "exception");
            e.printStackTrace();
        }
        statusBool = true;
        Log.d(TAG, "in data received " + dataReceived);
        ((MyBAIsWrapper) bis).renew(data);

        runOnUiThread(new Runnable(){

            @Override
            public void run() {

                mSession.appendToEmulator(dataReceivedByte, 0, dataReceivedByte.length);

            }});

    viewHandler.post(updateView);

} 
```

写入字符的库类的相关部分：

类的相关部分：

```
private void sendText(CharSequence text) {
                int n = text.length();
                char c;
                try {
                    for(int i = 0; i < n; i++) {
                        c = text.charAt(i);
                        if (Character.isHighSurrogate(c)) {
                            int codePoint;
                            if (++i < n) {
                                codePoint = Character.toCodePoint(c, text.charAt(i));
                            } else {
                                // Unicode Replacement Glyph, aka white question mark in black diamond.
                                codePoint = '\ufffd';
                            }
                            mapAndSend(codePoint);
                        } else {
                            mapAndSend(c);
                        }
                    }
                } catch (IOException e) {
                    Log.e(TAG, "error writing ", e);
                }
            }

            private void mapAndSend(int c) throws IOException {
                int result = mKeyListener.mapControlChar(c);
                if (result < TermKeyListener.KEYCODE_OFFSET) {
                    mTermSession.write(result);
                } else {
                    mKeyListener.handleKeyCode(result - TermKeyListener.KEYCODE_OFFSET, getKeypadApplicationMode());
                }
                clearSpecialKeyStatus();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:26:56.100

Java 在内部将文本存储为未编码的 Unicode。曾经是 16 位，现在我猜测它是 32 位，因为您在终端上为您尝试输出的每个 unicode 字符获得了四个输出字符。

您可能想要做的是使用类似 string.getBytes("ASCII") 的东西将您的 unicode 字符串转换为直接的单字节 ascii。如果您的终端模拟器处理其他字符集（如 Latin-1），请使用它而不是“ASCII”。

然后，将字节传输到终端仿真器而不是字符串。

注意：我不肯定“ASCII”是字符集的确切名称；你会想自己研究。另外，我不知道 getBytes() 会对无法转换为 ascii 的 unicode 字符做什么，所以你也想研究一下。

ETA：我无法从您发布的废料中遵循您的代码逻辑。谁调用了 write()，数据从哪里来，又去了哪里？同样的问题也适用于 sendOverSerial() 和 onDataReceived()。

无论如何，我几乎可以肯定，在*某个地方*，原始的 32 位 Unicode 数据在没有被编码的​​情况下被转换为字节。从那时起，无论是按原样发送还是将其重新编码为 UTF-8 都会产生您所看到的效果。我看不出这在您发布的任何代码中是如何发生的，所以我猜它发生在您向我们展示的任何函数被调用之前的其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:28:07.917

您正在使用的库似乎将代码点作为 int（32 位）发送，并且您的代码假设其编码为 utf-8，它不能正确处理 4 字节。这与 java 如何在内部存储文本无关。顺便说一句，Java 在内部将文本存储为编码的 UTF-16，而不是未编码的 unicode。同样，这不是导致此问题的原因。这是您与正在使用的库进行交互的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:53:05.277

我通过编辑我正在使用的库解决了这个问题。他们正在使用一种将字节转换为 int 的方法，它接受一个 codePoint 并对其进行转换。因此，每次按键都会使用 4 个字节。我改变了这一点，以便使用一个字节而不是一个 int。没有更多的额外字节。与编码格式无关。

# javascript - 我不知道如何让我的 javascript onclick 事件工作

> ID：14525540
> 
> 赞同：0
> 
> 时间：2013-01-25T16:02:48.327
> 
> 标签：javascript

当我单击按钮时，除非我在 html 中调用该函数，否则什么也不会发生。我正在尝试删除所有内联 javascript。我已经包含了有效的 html 的注释掉部分。在此先感谢您的帮助！

**JavaScript：**

```
var welcomeString;
const TEST = 1;

function setWelcomeString() {
    "use strict";
    welcomeString = prompt("Please enter your name: ", "nobody");
}

function writeOutput() {
    "use strict";
    document.getElementById("demo").innerHTML = "Hello, " + welcomeString;
}

function main() {
    "use strict";
    setWelcomeString();
    document.getElementById("sayHi").onclick = writeOutput();
}

main(); 
```

**HTML：**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>**SET TITLE**</title>
        <link href="css/style.css" rel="stylesheet">
        <script src="firstScript.js"></script>
    </head>

    <body>
        <h1 id="wiggles">TEMPLATE</h1>
        <!--<button id="sayHi" onclick="writeOutput()">Say Hi</button>-->
        <button id="sayHi">Say Hi</button>
        <p id="demo"></p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:04:46.290

当您将函数分配为事件的处理程序时，您需要分配函数本身，而不是执行函数并像您一样分配它的返回值。改变这个：

```
document.getElementById("sayHi").onclick = writeOutput(); // parens 
```

对此：

```
document.getElementById("sayHi").onclick = writeOutput; // no parens 
```

这是一个带有工作示例的[jsfiddle 链接。](http://jsfiddle.net/kunjee/yYYSh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:07:02.190

你必须在里面添加你的整个代码`load`，就像这样

```
window.load = function(){
    // your javascript here
}; 
```

此外，正如 jbaby 提到的，使用

```
document.getElementById("sayHi").onclick = function(){ writeOutput();}; 
```

或者

```
document.getElementById("sayHi").onclick = writeOutput; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:12:09.273

你有两个问题。

第一个被 jbabey 覆盖。

第二个是 firstScript.js 出现在您的按钮之前。当您将`onClick`处理程序分配给它时，这是有问题的。它在dom中不存在。

尝试将整个主脚本放入其中`window.onload = function () { ... }`或将其移动到标记的底部。

# ruby-on-rails - 太阳黑子模型协会

> ID：14525542
> 
> 赞同：0
> 
> 时间：2013-01-25T16:02:56.957
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sunspot, sunspot-rails

我有两个模型，一个`School`模型和`Price`模型。每个学校都有价格。我想返回搜索结果学校及其价格。我正在使用导轨和太阳黑子。

**学校控制器：**

```
class SchoolsController < ApplicationController
def index
 @query = params[:search]
 @search = School.search do 
   fulltext params[:search]
     paginate :page => params[:page], :per_page => 7
   end
 @results = @search.results
end
end 
```

**学校模式：**

```
class School < ActiveRecord::Base
 has_many :prices
 # sunspot search
  searchable do
   text :name, :locality
  end
end 
```

**索引 - 视图**

```
<% for result in @results %>
   <tr>
    # School name, from the school-model
    <td><h3><%= link_to result.name, result %></h3></td>
    # School price, from the price-model
    <td><h3><%= result.prices.min %> kr</h3></td>
   </tr>
<% end %> 
```

我如何为每所学校返回其价格，包括黑子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:08:51.353

也许您可以使用以下方法进行急切加载`:include`：

```
@search = School.search(:include => :prices) do # or :include => :price, depends on the relation
 fulltext params[:search]
 paginate :page => params[:page], :per_page => 7
end 
```

附加：

如果学校只能有一个价格，您应该在您的学校模型中替换`has_many :prices`为。`has_one :price`完成此操作后，您可以通过以下方式访问您想要的价格：（`result.price.min`查看[number_to_currency](http://apidock.com/rails/ActionView/Helpers/NumberHelper/number_to_currency)，您可能对这个 Helper 感兴趣）

# iphone - 从商店或 TestFlight 安装应用程序时，可达性表示不覆盖

> ID：14525547
> 
> 赞同：0
> 
> 时间：2013-01-25T16:03:07.900
> 
> 标签：iphone, ios, objective-c, ipad, reachability

我在 iOS 上遇到了这个非常奇怪的可达性问题。如果我在设备上以调试方式运行我的应用程序，则完全没有问题，该应用程序运行良好。但是当我从商店或从 TestFlight 安装它时，即使我在 Wi-Fi 上，我也会收到无覆盖错误，但只有当我尝试执行某些操作时。如果我不执行该特定操作，则应用程序运行良好，直到我执行为止。

这是我处理可达性的代码部分：

```
- (void)connectionReachabilityChanged:(NSNotification *)notice {
  NetworkStatus status = [self.connectionReachability currentReachabilityStatus];
  if (status == NotReachable) {
    self.inCoverage = NO;
  } else {
    self.inCoverage = YES;
  }
}

- (void)hostReachabilityChanged:(NSNotification *)notice {
  NetworkStatus status = [self.hostReachability currentReachabilityStatus];
  if (status == NotReachable) {
    self.inCoverage = NO;
  } else {
    self.inCoverage = YES;
  }
}

- (void)displayAlertOfType:(AlertType)type {
  if (type == AlertTypeNoCoverage) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"No coverage"
                                                    message: @"You current have no data coverage, try again later"
                                                   delegate: self
                                          cancelButtonTitle: @"OK"
                                          otherButtonTitles: nil];
    [alert show];
  }

  if (type == AlertTypeOperationNotCompleted) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Whoops... Something went wrong" 
                                                    message:@"The operation couldn't be completed, try again later" 
                                                   delegate:self 
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles:nil];
    [alert show];
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:50:45.913

```
 Reachability *reachability = [Reachability sharedReachability];
 [reachability setHostName:@"http://www.google.com/"]; 
 NetworkStatus remoteHostStatus = [reachability remoteHostStatus];

if(remoteHostStatus == NotReachable) {
 //no internet connection

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"No coverage"
                                                    message: @"You current have no data coverage, try again later"
                                                   delegate: self
                                          cancelButtonTitle: @"OK"
                                          otherButtonTitles: nil];
    [alert show];
 }
 else if (remoteHostStatus == ReachableViaWiFiNetwork) {
 //wifi connection found
 }
 else if (remoteHostStatus == ReachableViaCarrierDataNetwork) {
 //EDGE or 3G connection found
 } 
```

# css - 为什么使用 CSS 旋转元素会产生锯齿？

> ID：14525549
> 
> 赞同：2
> 
> 时间：2013-01-25T16:03:14.187
> 
> 标签：css, html

我在 div 上测试旋转。我注意到当我用 CSS 旋转 div 时，它会产生看起来很尴尬的锯齿。这是小提琴：

[***小提琴***](http://jsfiddle.net/8Hr7u/1/)

**CSS：**

```
.alaised {
    width:200px;
    height:200px;
    border:2px solid green;
    transform:rotate(-8deg);
    -webkit-transform:rotate(-8deg);
    -moz-transform:rotate(-8deg);
    margin:50px;
} 
```

在小提琴中，当 div 旋转时，它会产生锯齿，并且在不旋转时悬停，抗锯齿。

我怎样才能消除这种行为？我尝试在网上搜索并尝试添加具有相同颜色的小宽度阴影，但它的阴影也有别名。

注意：在更高分辨率的屏幕上未检测到此行为。但是在 1024x768 和更少的分辨率下，这些天最常见的分辨率会受此影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:13:56.200

刚刚找到一种方法： http: [//jsfiddle.net/zGAvZ/1/](http://jsfiddle.net/zGAvZ/1/)（在 fx 18 上试过）

相关的 CSS

```
.aliased {
    width:200px;
    height:200px;
    margin:50px;
}

.aliased:after {
    content: "";
    display: block;
    width: 100%;
    height: 100%;
    border:2px solid green;
    transform:rotate(-8deg);
    -webkit-transform:rotate(-8deg);
    -moz-transform:rotate(-8deg);
}

.aliased:hover {
    transform:rotate(8deg);
    -webkit-transform:rotate(8deg);
    -moz-transform:rotate(8deg);    
} 
```

这个想法是`:after`在正常状态下旋转伪元素，并在悬停时对元素本身进行相反的旋转。在 Firefox 18 上，即使在悬停状态之后，正方形看起来也不错

# c++ - 在opengl中连接两个模型

> ID：14525550
> 
> 赞同：0
> 
> 时间：2013-01-25T16:03:15.000
> 
> 标签：c++, opengl

我有两个模型，每个模型都存储在一个单独的 VBO 中。我想要做的是链接它们，以便旋转一个旋转另一个，同时仍然让另一个连接到第一个模型。我现在要做的是拥有三个模型矩阵：一个用于整个对象的主矩阵，一个用于每个模型，以便它们可以相对于主矩阵进行转换。但是，当我这样做时，如果我旋转它们，两个模型就会断开连接。我将如何链接这两个模型，以便它们在旋转或平移期间保持连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:10:59.627

通常你会这样做：

```
glLoadMatrix( mainMatrix );
glPushMatrix();
glMultMatrix( firstModelMatrix );
drawFirstModel();
glPopMatrix();
glMultMatrix( secondModelMatrix );
drawSecondModel(); 
```

当然，如果您更改`firstModelMatrix`或`secondModelMatrix`，则可能会导致两个模型断开连接。但是，这就是你的意图。如果您想让他们保持联系，只需更改`mainMatrix`.

但是，请注意，这些矩阵运算已被弃用。尽管如此，您应该能够从代码中获得诀窍。

编辑：假设你有一个头和一个身体。你想旋转头部。除了关于如何计算你的头部矩阵之外，应用平移和旋转的顺序尤为重要。我想，现在你有这样的东西：

```
HeadMatrix = Rotation * Translation 
```

但是你需要的是这样才能使头部保持在身体的顶部：

```
HeadMatrix = Translation * Rotation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T01:23:35.243

您没有两个模型。您所拥有的只是两个字节缓冲区，只有在与访问缓冲区中的数据并将其解释为三角形的 glDrawArrays 或 glDrawElements 调用结合使用时，它们才成为几何图形。

OpenGL 不知道什么是“模型”。OpenGL 不维护模型之间的场景或关系。它只是一次将点、线或三角形绘制到帧缓冲区，而没有任何回忆以前绘制过哪些其他点、线或三角形。

如果你想要一个场景，你必须自己维护它。

# php - 小问题 - Foursquare Venue API - cURL 和 json

> ID：14525552
> 
> 赞同：1
> 
> 时间：2013-01-25T16:03:30.697
> 
> 标签：php, json, curl, foursquare

我正在尝试使用场地 ID 在 Foursquare 中获取场地的详细信息，但有一些不正确的小问题：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.foursquare.com/v2/venues/4c599c84f346c9287ff84cca?client_id=[MY_ID]&client_secret=[MY_SECRET]&v=20120609');

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$contents = curl_exec ($ch);
$result = json_decode($contents);
var_dump($result);
curl_close ($ch); 
```

*   如果我将 URL 更改为 Google 新闻 RSS 或我的 XML 提要页面之一，我会得到结果，cURL 部分是正确的
*   如果我将上面的 URL 粘贴到我的浏览器中（使用我的实际 ID&Secret），那么我会得到一个 json 格式的结果，其中包含我期望的数据（正确的场地名称等）。所以我知道网址是正确的。
*   如果我从上述过程中复制 json 并将其放入代码中的变量中，然后将 $result 设置为该变量的解码版本，那么我可以正确看到结果。所以我知道解码/输出位正在工作。

在检索结果并将其存储在变量中以进行解码之间的某个地方出现了问题。我不得不假设它是愚蠢而简单的，因为所有部分都在那里，但我无法弄清楚。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:14:40.823

答案原来是我必须添加以下两行：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
```

# android - 如何从 Android 应用程序打开特定浏览器

> ID：14525553
> 
> 赞同：2
> 
> 时间：2013-01-25T16:03:31.753
> 
> 标签：android, google-chrome, browser

我想从 Android 应用程序在浏览器中打开一个 url。这很简单：[如何从我的应用程序中打开 Android 网络浏览器中的 URL？](https://stackoverflow.com/questions/2201917/how-can-i-open-a-url-in-androids-web-browser-from-my-application)

但是，如果存在，我如何在特定浏览器中打开 url。

```
if(user has chrome)
    open url in chrome;
else if(user has opera)
    open url in opera;
else
    open url in default browser; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:07:10.307

您不应强制用户将特定应用程序用于一般事件，例如打开 URL。Android 旨在让用户可以自由使用他们想要的任何应用程序。

这就是为什么当您在手机上单击 URL 时，您会看到一个对话框，询问您要使用哪个应用程序来执行该操作。您可以选择一个应用程序来始终处理该类型的操作，但应用程序不应该为您选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:09:42.880

一般来说，Tanis 是对的，你不应该为 Android 做这样的事情。

但是，如果你真的需要。您可以使用[Intent.setPackage](http://developer.android.com/reference/android/content/Intent.html#setPackage%28java.lang.String%29)。这会将缩进发送到适当的应用程序包。

# django-templates - Django {{ c }} 不呈现

> ID：14525554
> 
> 赞同：2
> 
> 时间：2013-01-25T16:03:34.273
> 
> 标签：django-templates

问题是我无法为我的模板获得价值。

视图.py：

```
from django.shortcuts import get_object_or_404, render_to_response
from django.httpimport HttpResponse

def index(request):
 c='hi'
 return render_to_response('list.html', c) 
```

列表.html：

```
{% extends "base.html" %}

{% block content %}
 list{{ c }}
{% endblock %} 
```

它呈现`list`但不是`{{ c }}`什么可能导致这种情况？它没有错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:14:17.383

`render_to_response`期望它的[上下文是一个字典](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)，而你直接传递你的字符串：

```
def index(request):
    context = { 'c': 'hi' }
    return render_to_response('list.html', context) 
```

根据您在下面的评论，如果您希望 'c' 成为事物列表，则它看起来像这样：

```
def index(request):
    context = { 'c': ['hello', 'world'] }
    return render_to_response('list.html', context) 
```

基本思想是您正在构建要在模板中引用的变量的映射。您在模板中引用的名称是字典中的*键*。

# c - 当 db-journal 文件存在时，准备语句会导致 SQLITE_IOERR_LOCK

> ID：14525557
> 
> 赞同：1
> 
> 时间：2013-01-25T16:03:40.740
> 
> 标签：c, sqlite

我在使用 C 中的 sqlite3 API（Linux RHEL5，64 位）从崩溃中恢复时遇到问题，我留下了一个`.db`和一个`.db-journal`文件。

如果我用二进制文件本身检查`.db`文件并运行，二进制文件会删除文件并恢复正常。 `sqlite3``SELECT * from t;``.db-journal`

然而，在我的应用程序中，我在有效的情况下准备了相同的语句`sqlite*`，它返回`SQLITE_IOERR | SQLITE_IOERR_LOCK`：

```
#define SQLITE_IOERR_LOCK              (SQLITE_IOERR | (15<<8))
#define SQLITE_IOERR       10   /* Some kind of disk I/O error occurred */ 
```

如何告诉 sqlite 我希望它使用 db-journal 文件恢复？

```
#include "sqlite3.h"
#include <stdio.h>
#include <string.h>

int main(int argc,char* argv[])
{
    sqlite3* db_ptr = NULL;
    int sqlite_result = SQLITE_ERROR;
    sqlite3_stmt* query=NULL;
    int prepare_result=-1;

    if ( argc > 2 )
    {
        sqlite_result = sqlite3_open_v2(argv[1],
                                        &db_ptr,
                                        SQLITE_OPEN_READONLY,
                                        NULL);
        if ( sqlite_result == SQLITE_OK )
        {
            sqlite3_extended_result_codes(db_ptr,1);
            prepare_result = sqlite3_prepare_v2(db_ptr,
                                                argv[2],
                                                strlen(argv[2])+1,
                                                &query,
                                                NULL);
            sqlite3_close(db_ptr);
            if ( prepare_result != SQLITE_OK )
            {
                fprintf(stderr,"Error: %d\n",prepare_result);
            }
            else
            {
                fprintf(stdout,"Success\n");
            }
        }
    }

    return prepare_result;
} 
```

结果：

```
Error: 3850 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:03:40.740

我在阅读我的问题时找到了答案......显然要恢复到 db 文件，程序需要使用 READWRITE 访问权限打开它。呃。改变：

```
 sqlite_result = sqlite3_open_v2(argv[1],
                                    &db_ptr,
                                    SQLITE_OPEN_READONLY,
                                    NULL); 
```

至：

```
 sqlite_result = sqlite3_open_v2(argv[1],
                                    &db_ptr,
                                    SQLITE_OPEN_READWRITE,
                                    NULL); 
```

解决了这个问题。在真正的程序中，而不是测试应用程序中，我的 open 距离 prepare 语句太远了，以至于我什至没有注意到它在特定情况下是 READONLY 。

# api - AlphaBlend 不适用于 XP，但适用于 Vista 和 Windows 7、8

> ID：14525561
> 
> 赞同：0
> 
> 时间：2013-01-25T16:04:08.810
> 
> 标签：api, alphablending

我正在使用 AlphaBlend。没有什么特别的。

我的代码在 Vista、Windows 7 和 Windows 8 上运行良好，但在 Windows XP 上运行良好。

通常 AlphaBlend 返回 1，但在 XP 上返回 0。我在 2 台 XP 计算机上对其进行了测试。

我完全感到困惑。

GetLastError 返回“成功完成”。

我很确定 AlphaBlend 应该可以在 XP 上运行。有人知道如何继续吗？

我的（VB6-）代码是

```
 Dim LBF As Long
    Dim bf As BLENDFUNCTION
    With bf
        .BlendOp = AC_SRC_OVER
        .SourceConstantAlpha = 255
    End With

    Call CopyMemory(LBF, bf, Len(bf))    'Copy struct into a Long var 
```

（......这里还有一些其他的东西......）

```
 Dim iRet&
    iRet = AlphaBlend(Me.Picture1.hdc, 0, 0, lDestWidth, lDestHeight, lOtherDC, 0, 0, (rOtherWin.Right - rOtherWin.Left), (rOtherWin.Bottom - rOtherWin.Top), LBF) 
```

所有值都有效且符合预期，但 AlphaBlend 返回 0。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:51:49.247

我发现了 AlphaBlend 失败的原因。我尝试从离屏幕只有一点点的 DC 使用 AlphaBlend。如果它完全在屏幕内，AlphaBlend 效果很好。

但是我不确定为什么会这样。如果有人知道，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:22:52.087

根据 AlphaBlend 的文档：源矩形必须完全位于源曲面内，否则会发生错误并且函数返回 FALSE。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd183351(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183351(v=vs.85).aspx)

# php - “权限不足”谷歌分析 API 服务帐号

> ID：14525565
> 
> 赞同：32
> 
> 时间：2013-01-25T16:04:22.733
> 
> 标签：php, google-analytics-api, jwt

我正在尝试通过服务帐户使用 Google Analytics API 获取数据。

我一直在搜索 stackoverflow 如何做到这一点，并使用在几篇文章中找到的完全相同的代码，但遇到问题才能使其正常工作。

资料来源：

[服务应用程序和 Google Analytics API V3：服务器到服务器 OAuth2 身份验证？](https://stackoverflow.com/questions/9863509/service-applications-and-google-analytics-api-v3-server-to-server-oauth2-authen/10089698#10089698)

[服务应用程序和 Google Analytics API V3：错误 101 (net::ERR_CONNECTION_RESET)](https://stackoverflow.com/questions/13465689/service-applications-and-google-analytics-api-v3-error-101-neterr-connection)

[http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/prediction/serviceAccount.php](http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/prediction/serviceAccount.php)

这就是我得到的：

```
require_once('googleAPIGoogle_Client.php');
require_once('googleAPI/contrib/Google_AnalyticsService.php');

const CLIENT_ID = 'xxxxxxxx001.apps.googleusercontent.com';
const SERVICE_ACCOUNT_NAME = 'xxxxxx001@developer.gserviceaccount.com';

$keyfile = $_SERVER['DOCUMENT_ROOT']."/xxxxxxx284-privatekey.p12";

$client = new Google_Client();
$client->setAccessType('offline');
$client->setApplicationName("cc insights");

$key = file_get_contents($keyfile);
$client->setClientId(CLIENT_ID);

$client->setAssertionCredentials(new Google_AssertionCredentials(
    SERVICE_ACCOUNT_NAME,
    array('https://www.googleapis.com/auth/analytics.readonly'),
    $key)
);

$service = new Google_AnalyticsService($client);

$data = $service->data_ga->get("ga:xxxx7777", "2012-01-01", "2013-01-25", "ga:pageviews");
var_dump($data); 
```

执行时出现以下错误：

> 致命错误：未捕获的异常“Google_ServiceException”和消息“调用 GET 时出错” [https://www.googleapis.com/analytics/v3/data/ga?ids=ga%3Axxxx7777&start-date=2012-01-01&end-date=2013- 01-25&metrics=ga%3Apageviews](https://www.googleapis.com/analytics/v3/data/ga?ids=ga%3Axxxx7777&start-date=2012-01-01&end-date=2013-01-25&metrics=ga%3Apageviews): (403) 用户对此配置文件没有足够的权限。' 在 /Applications/XAMPP/xamppfiles/htdocs/insights/application/libraries/googleAPI/io/Google_REST.php:66 堆栈跟踪：#0 /Applications/XAMPP/xamppfiles/htdocs/insights/application/libraries/googleAPI/io/Google_REST .php(36): Google_REST::decodeHttpResponse(Object(Google_HttpRequest)) #1 /Applications/XAMPP/xamppfiles/htdocs/insights/application/libraries/googleAPI/service/Google_ServiceResource.php(178): Google_REST::execute(Object (Google_HttpRequest)) #2 /Applications/XAMPP/xamppfiles/htdocs/insights/application/libraries/googleAPI/contrib/Google_AnalyticsService.php(383): Google_ServiceResource->__call('get', Array) #3 /Applications/XAMPP/ xamppfiles/htdocs/insights/application/libraries/Google.php(46): Google_DataGaServiceResource->get('

因为我使用与工作示例完全相同的代码，我认为这可能是 API 或服务帐户设置的问题？

这是我添加到分析帐户的用户： ![分析用户](../Images/e2eed77529ac0a7f24d7cdbb2593d02f.png)

这是 api 访问帐户： ![api访问](../Images/677631c2a13404d7f760da4b1f2bd80c.png)

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-06-17T12:18:00.200

我得到了完全相同的错误，这为我解决了它：

我使用的是帐户 ID 而不是视图 ID。切换到视图 ID 修复了它 - 它始终是“视图 ID”，而不是帐户或属性 ID（看起来像“UA-xxx”）。查看 ID 用于特定的网络媒体资源，可以在管理->查看（第 3 列）->查看设置中找到。它是一个没有破折号的整数。

[https://stackoverflow.com/a/15789266/1391229](https://stackoverflow.com/a/15789266/1391229)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-29T12:48:26.160

今天也有同样的问题，profileId 很难找到，你可以在分析中的每个 Url 中找到它，比如说[https://www.google.com/analytics/web/#management/Settings/aXXXXXXwYYYYYYYpZZZZZZZ/](https://www.google.com/analytics/web/#management/Settings/aXXXXXXwYYYYYYYpZZZZZZZ/) 这是 ZZZZZZZ 部分

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-09T08:48:34.870

同样的问题。通过使用 VIEW id 而不是帐户 ID (UA-XXXXX-1) 解决了这个问题。

```
Analytics Console > Admin -> View (Profile) -> View Settings -> View ID 
```

**和**

确保将服务帐户添加到 Google Analytics Console 中的用户列表中。只需在开发人员控制台的凭据、API 和权限部分进行设置，仍不会授予它访问您的分析的权限。

```
Analytics Console > Admin -> Account -> User Management -> "Add permissions for:" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-27T11:17:10.043

使用查看 ID 不是帐户 ID，在“管理”选项卡上的“查看设置”“查看 ID”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-05T13:41:17.827

得到了同样的错误，但过了一会儿我意识到我正在使用我的谷歌浏览器（我自己的电子邮件地址）使用这个脚本，但分析 API 正在公司电子邮件上运行。所以解决方案可能是编辑你的谷歌浏览器的设置。只需在您的谷歌浏览器（设置）中断开与 gmail 帐户的连接并再次测试。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-09T12:00:56.960

在尝试找到解决方案 2 周后对我有很大帮助：

> 分析控制台 -> 管理员 -> 查看（配置文件）-> 查看设置 -> 查看 ID

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-10T05:56:21.453

我在使用 .net 库时遇到了同样的问题，经过一些修补后，我找到了解决方案：

转到您的谷歌分析管理站点并将服务帐户添加为用户并授予该帐户必要的权限

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-25T17:50:11.280

在另一个应用程序上，我得到“权限不足”，发现我的 .htaccess 文件有一些导致问题的文件限制。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-16T04:42:25.710

有问题..事实证明帐户 ID 隐藏在您的分析帐户的 URL 中！

[https://developers.google.com/analytics/devguides/reporting/core/v3/#user_reports](https://developers.google.com/analytics/devguides/reporting/core/v3/#user_reports)

URL 通常如下所示：

[https://www.google.com/analytics/web/?hl=en#management/Settings/a51343283w84330433](https://www.google.com/analytics/web/?hl=en#management/Settings/a51343283w84330433) **p87396224** /%3Fm.page%3DAccountSettings/

我们要查找的 ID 跟在字母 p 后面。

在上面的示例中，有效的 ID 是：87396224

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-14T10:38:03.067

可能是您正在使用其他客户端 ID：客户端密码：获取另一个配置文件 ID 详细信息

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-13T19:17:55.217

请创建共享段...它将起作用

[http://www.periscopix.co.uk/blog/google-analytics-new-feature-shared-segments/](http://www.periscopix.co.uk/blog/google-analytics-new-feature-shared-segments/)

# php - 将发布在选定选项上的数据库内容放入具有单个字段的表单中

> ID：14525566
> 
> 赞同：0
> 
> 时间：2013-01-25T16:04:27.953
> 
> 标签：php, javascript, html, sql, forms

我有一个带有选择的表格。这些选项来自数据库并显示在选择中。

数据库中的列是：

```
id, date, title, body. 
```

在选择时，我只显示日期和标题。在同一页面中，我有一个表格：

```
 date -> input text
 title -> input text
 body -> text area 
```

我希望当用户单击选择中的选项时，下面的字段将使用从包含数据库数据的选定选项中保留的内容进行更新。

现在我不知道如何获取以下字段中的数据。我的想法是获取下拉选项的索引。这可能吗？

编辑完整代码：

```
<html>
<body>

<div class="normal">
<table style="width:100%;height:100%;" border="1">
    <tr>
        <td width="174"><strong>geste n</strong></td>

        <td width="505" valign="middle" height="24">

            <input type="radio" name="n" id="new" value="nuova" onchange="shown(this.id);" <?php if($_POST['n'] == "nuova"){echo "CHECKED";} ?> />Nuova n
            <input type="radio" name="n" id="mod" value="modifica" onchange="shown(this.id);" <?php if($_POST['n'] == "modifica"){echo "CHECKED";} ?> />Modifica n
                <select id="sceltannascosta" style="display:none">
                    <?php
                        include("/login/flock/sql.php");
                        $conn = mysqli_connect($host, $user, $pw, $db) or die("Impossibile connettersi"); 
                        $a = "SELECT * FROM n ORDER BY id DESC";
                        $b = mysqli_query($conn, $a);                       
                            print '<option></option>';                      
                        while ($c = $b->fetch_object()) {
                            print '<option>'.$c->id.$c->data.$c->title.$c->body.'</option>';
                        }
                        $b->close();
                        $conn->close;      
                    ?>    
                </select>

                <select id="sceltan" style="display:none" onChange="showEntry(this,this.value);setndamod(this);">
                    <?php
                        include("/login/flock/sql.php");
                        $conn = mysqli_connect($host, $user, $pw, $db) or die("Impossibile connettersi"); 
                        $a = "SELECT * FROM n ORDER BY id DESC";
                        $b = mysqli_query($conn, $a);                       
                            print '<option></option>';                      
                        while ($c = $b->fetch_object()) {
                            print '<option>'.$c->data.' - '.$c->title.'</option>';
                        }
                        $b->close();
                        $conn->close;      
                    ?>  
                </select>                
            <input type="submit" id="botenascostogeste" class="button">       
        </form>
        </td>
    </tr>
</table>
</div>

<p>&nbsp;</p>

<div class="normal" id="c" style="display:none">
<table style="width:100%;height:100%;">
  <tr>
      <td colspan="3" border="0">
        <strong class="confirm">c nuova n</strong>
      </td>
  </tr>

  <tr>
    <td width="107" align="right">
        <strong>Data</strong>
    </td>
    <td colspan="2">
        <form name="nuovan" method="post" action="cht.php?c=yes">
            <input name="datan" type="text" maxlength="10" size="8" value="<?php echo date(d.".".m.".".Y) ?>"> gg.mm.aaaa
    </td>
  </tr>

  <tr>
      <td align="right">
        <strong>Titolo</strong>
      <td width="360">
                <input name="titolon" type="text" maxlength="50" size="50" value="<? echo htmlspecialchars("titolo n - lunghezza massima 50 caratteri") ?>" onKeyPress="return taLimit(this)" onKeyUp="return taCount(this,'myCounter')">
      </td>
      <td width="522">
          <b><span id=myCounter>6</span></b> caratteri rimanenti per il titolo</font>
      </td>
  </tr>

  <tr>
    <td colspan="3">
                <textarea name="teston"><?php if(isset($_POST['teston'])){echo $_POST['teston'];}else{echo 'Testo n con stile personalizzato';} ?></textarea>
                <script>
                    CKEDITOR.replace('teston');
                </script>
    </td>
  </tr>

  <tr>
    <td align="right">
        <input type="submit" name="c" class="button" onClick="document.getElementById('botenascostogeste').click();">
    </form>
    </td>
    <td colspan="2">
    <?php
        $c = $_GET['c'];                
        $titolon = $_POST['titolon'];
        $teston = $_POST['teston'];
        $datascritta = $_POST['datan'];

        if($c == 'yes'){                        
            if($_POST['titolon'] == NULL || $_POST['teston'] == NULL || $_POST['datan'] == NULL){
                echo '<img src="'.$imagen.'" style=width:"' . $width . 'px;height:' . $height . 'px;">';
            } else {

                function verificadata($datascritta) { 
                    list($dd,$mm,$yyyy)=explode(".",$datascritta); 
                    if (is_numeric($dd) && is_numeric($mm) && is_numeric($yyyy)) 
                    { 
                        return checkdate($mm,$dd,$yyyy); 
                    } 
                    return false;            
                }

                if(verificadata($datascritta)){
                    $connessione = mysql_connect ($host, $user, $pw) or     //connect to the database 
                        die('<img src="'.$imagen.'" style=width:"' . $width . 'px;height:' . $height . 'px;">');                                                    
                    mysql_select_db ($db); //select the database                
                    mysql_query("INSERT INTO n(data, title, body) VALUES ('$datascritta', '$titolon', '$teston')");
                    mysql_close($connessione);
                    echo ('<img src="'.$imagey.'" style=width:"' . $width . 'px;height:' . $height . 'px;"> Ok'); // It worked.
                } else { die('<img src="'.$imagen.'" style=width:"' . $width . 'px;height:' . $height . 'px;">');                                                   
                }
            }
        }
    ?>    
    </td>
</table>
</div>

<div class="normal" id="modifica" style="display:none">
<table style="width:100%;height:100%;">
  <tr>
      <td colspan="3" border="0">
        <strong class="confirm">Modifica n</strong>
      </td>
  </tr>

  <tr>
    <td width="107" align="right">
        <strong>Data</strong>
    </td>
    <td colspan="2">
        <form name="modifican" method="post" action="cht.php?modifica=yes">
            <input name="idmodifican" type="text" style="display:none" value="INSERIRE ID DI MODIFICA DEL DATABASE QUI">
            <input name="datanmodificata" type="text" maxlength="10" size="8" value="POST DATE FROM THE n TO MODIFY SELECTED"> gg.mm.aaaa
    </td>
  </tr>

  <tr>
      <td align="right">
        <strong>Titolo</strong>
      </td>
      <td width="360">
                <input name="modificatitolo" type="text" maxlength="50" size="50" value="POST TITLE FROM THE n TO MODIFY SELECTED" onKeyPress="return taLimit(this)" onKeyUp="return taCount(this,'myCounter')">
      </td>
      <td width="522">
          <b><span id=myCounter>50</span></b> caratteri rimanenti per il titolo</font>
      </td>
  </tr>

  <tr>
    <td colspan="3">
                <textarea name="modificatesto">POST BODY FROM THE n TO MODIFY SELECTED</textarea>
                <script>
                    CKEDITOR.replace('modificatesto');
                </script>
    </td>
  </tr>

  <tr>
    <td align="right">
        <input type="submit" name="modifica" class="button">
    </form>
    </td>
    <td colspan="2">
    PHP I HAVE TO DO TO UPDATE THE n ON THE DATABASE (I'm able to do this part).
    </td>
</table>
</div>  

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:34:41.823

为此，您需要进行 ajax 调用。
然后使用jquery根据选择字段中选择的值设置字段，您可以设置其他字段的值尝试根据需要修改它

```
<body>
    <form>
        <select id="sel_opt">
        <?php 
          $i = 1;
          foreach($valueformdb as $value)
          {
              echo "<option class=\"option\" id=\"opt_$i\">";
              echo $value;
              echo '</option>';
              $i++;
          }

        ?>    
        </select>
       <input type="text" id="txt_date" value="" />
       <input type="text" id="txt_title" value="" />
       <textarea id="ta_body"></textarea>
    </form>
    <script type="text/javascript">
    $(document).ready(function(){
       $('.sel_opt').on('change', function(){
           var id = $(this).attr('id');
           $.ajax({
          type:'POST',
          dataType: 'json',
          url:" ",// path of file to handle ajax request
          data:'option='+id, // this will be posted on the page which handle the ajax and give back the data from db
          success:function(data){
              $('#txt_date').val(data[date]);// ajax respond the array containg the value its advised to use json
              $('#txt_title').val(data[title]);
             }
          });
       });
    });
    </script>
</body> 
```

这不是您需要稍微修改的确切代码，因为我不知道您要实现的确切目标

# javascript - 如何在 d3 地图中的鼠标悬停时显示属性文本

> ID：14525572
> 
> 赞同：3
> 
> 时间：2013-01-25T16:05:01.917
> 
> 标签：javascript, json, d3.js, geojson

我是 d3 的新手，并试图弄清楚如何在将鼠标悬停在地图中的多边形上时显示一个属性（“NAME”）。我知道我应该按照以下方式做一些事情，`.on("mouseover", function(d,i) { some function that returns properties.NAME }`但不知道从那里去哪里。这是编写的 js，它只是将 NAME 属性静态放置在每个多边形上：

```
 <script>

        var width = 950,
        height = 650;

        var projection = d3.geo.albers()
        .scale(120000)
        .center([22.85, 40.038]);

        var path = d3.geo.path()
        .projection(projection);

        var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

        d3.json("newnabes.json", function(error, topology) {
                var nabes = topojson.object(topology, topology.objects.temp);

                svg.selectAll("path")
                .data(nabes.geometries)
                .enter().append("path")
                .attr("d", path);

                svg.selectAll(".subunit-label")
                .data(nabes.geometries)
                .enter().append("text")
                .attr("class", function(d) { return "subunit-label " + d.id; })
                .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"; })
                .attr("dy", ".35em")
                .text(function(d) { return d.properties.NAME; });
            });

        </script> 
```

这是json的一小块

```
{"type":"Topology",
  "transform":{
  "scale":[0.00003242681758896625,0.000024882264664420337],
  "translate":[-75.28010087738252,39.889167081829875]},
  "objects":{
    "temp":{
      "type":"GeometryCollection",
      "geometries":[{
         "type":"Polygon",
         "id":1,
         "arcs":[[0,1,2,3,4,5,6]],
         "properties":{"NAME":"Haddington"}
       },{
         "type":"Polygon",
         "id":2,
         "arcs":[[7,8,9,10,-3,11]],
         "properties":{"NAME":"Carroll Park"}
       }... 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:18:45.340

So I figured it out, courtesy of: [Show data on mouseover of circle](https://stackoverflow.com/questions/10805184/d3-show-data-on-mouseover-of-circle)

The simplest solution is to just append the names to the svg title attribute:

```
svg.selectAll("path")
 .data(nabes.geometries)
 .append("svg:title")
 .attr("class", function(d) { return "path " + d.id; })
 .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"; })
 .attr("dy", ".35em")
 .text(function(d) { return d.properties.NAME; }); 
```

Still investigating a more stylish solution to the problem (eg tipsy).

# c# - 打开 XML SDK：尝试填充超过 25 列时出现“不可读的内容”错误

> ID：14525573
> 
> 赞同：7
> 
> 时间：2013-01-25T16:05:05.980
> 
> 标签：c#, spreadsheet, openxml-sdk

我在 C# 中使用 Open XML SDK 创建了一个电子表格，并成功填充了两个工作表。

尝试填充第三个时，我在打开已完成的文档时收到*“不可读的内容”*错误，并且当我尝试在第三个中连续填充超过 25 个单元格时似乎会发生这种情况。

我正在使用与文档中其他地方成功运行的代码片段相同的代码片段：

```
string[] headers2 = {
    "Reference", "Raised", "Priority", "Affected", "Linked incidents",
    "Points", "SLA", "Stopped", "Target" };
// remaining headers are month/years created on the fly
string[] headerCells = {
    "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M",
    "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", 
    "AA", "AB", "AC", "AD", "AE", "AF", "AG", "AH" };
...
// headers
// once we've finished the presets, the month/year pairs take over
cellNo = (uint)0;
foreach (string h in headers2)
{
    cell = InsertCellInWorksheet(headerCells[cellNo++], 2, worksheetPart);
    cell.CellValue = new CellValue(h);
    cell.DataType = new EnumValue<CellValues>(CellValues.String);
}

string[] monthYears = 
    GetData_month_years(currentReportingPeriod - 1);
for (int j = 0; j < monthYears.Count(); j++)
{
    cell = InsertCellInWorksheet(headerCells[cellNo++], 2, worksheetPart);
    cell.CellValue = new CellValue(monthYears[j].ToString());
    cell.DataType = new EnumValue<CellValues>(CellValues.String);
} 
```

唯一填充的单元格是 A 和 AA 到 AH。

我是否认为我正在达到某种限制，如果是这样，重置它的方法是什么？

我已经看过几篇关于不可读内容错误的帖子，并且我已经查看了文档，但到目前为止我还没有找到任何适用的内容。

帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-08T23:24:29.163

接受的答案绝对正确，但它是一种解决方法。仅当您按顺序插入单元格时，它才会起作用。

如果您使用[MSDN](http://msdn.microsoft.com/en-us/library/office/cc861607(v=office.15).aspx)中的 InsertCellInWorksheet 方法，则在比较不同长度的单元格引用（例如“Z”和“AA”）时，单元格引用比较存在错误。

```
// Cells must be in sequential order according to CellReference. 
// Determine where to insert the new cell.
Cell refCell = null;
foreach (Cell cell in row.Elements<Cell>())
{
    if (string.Compare(cell.CellReference.Value, cellReference, true) > 0)
    {
        refCell = cell;
        break;
    }
} 
```

您可能想要更改字符串。比较：

```
if (ColumnNameParse(cell.CellReference.Value) > ColumnNameParse(cellReference))
{
    refCell = cell;
    break;
} 
```

使用取自[此答案](https://stackoverflow.com/a/8739121/2712478)的 ColumnNameParse 方法：

```
public int ColumnNameParse(string cellReference)
{
    var value = cellReference.TrimEnd("1234567890".ToCharArray());

    // assumes value.Length is [1,3]
    // assumes value is uppercase
    var digits = value.PadLeft(3).Select(x => "ABCDEFGHIJKLMNOPQRSTUVWXYZ".IndexOf(x));
    return digits.Aggregate(0, (current, index) => (current * 26) + (index + 1));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T11:21:57.187

请查看“InsertCellInWorksheet(...)”方法。如果你在里面使用这个结构 -

```
...

row.InsertBefore(newCell, refCell);

... 
```

如果您想填写“A - Z”和“AA - ...”列，它将无法正常工作，即使您只想填写两列（例如）-“Z”和“AA” . 因此，请尝试改用此方法：

```
...
row.Append(newCell);
... 
```

祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-01T16:12:07.420

改变

```
if (string.Compare(cell.CellReference.Value, cellReference, true) > 0) 
```

至

```
if (string.Compare(cell.CellReference.Value, cellReference, true) > 0
                        && cell.CellReference.Value.Length >= cellReference.Length) 
```

# javascript - jquery选择数组中除了id之外的所有东西？

> ID：14525578
> 
> 赞同：1
> 
> 时间：2013-01-25T16:05:21.400
> 
> 标签：javascript, jquery

我在一个数组中有一些 Id，我想选择 div 中的所有元素，除了那些在数组中具有相同 Id 的元素。

是否可以使用 jquery 功能来做到这一点，而不必循环数组并比较 Id。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T16:06:16.120

使用[`:not`](http://api.jquery.com/not-selector/)选择器，并在选择器中加入数组：

```
$('div :not(#' + array.join(', #') + ')'); 
```

# r - 在另一个 R 文件中的 R 文件上调用 source() 时如何传递命令行参数

> ID：14525580
> 
> 赞同：62
> 
> 时间：2013-01-25T16:05:24.000
> 
> 标签：r

在一个 R 文件中，我计划获取另一个支持读取两个命令行参数的 R 文件。这听起来像是一项微不足道的任务，但我在网上找不到解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-25T16:42:44.730

我假设源脚本使用 ? 访问命令行参数`commandArgs`？如果是这样，您可以在父脚本中覆盖`commandArgs`以在您正在采购的脚本中调用它时返回您想要的内容。看看这是如何工作的：

**file_to_source.R**

```
print(commandArgs()) 
```

**main_script.R**

```
commandArgs <- function(...) 1:3
source('file_to_source.R') 
```

输出`[1] 1 2 3`

如果您的主脚本本身不接受任何命令行参数，您也可以只向该脚本提供参数。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-02-20T22:16:26.503

最简单的解决方案是`source()`用`system()`and替换`paste`。尝试

```
arg1 <- 1
arg2 <- 2
system(paste("Rscript file_to_source.R", arg1, arg2)) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-25T16:38:10.740

如果您有一个脚本来源另一个脚本，您可以在第一个脚本中定义可供来源脚本使用的变量。

```
> tmpfile <- tempfile()
> cat("print(a)", file=tmpfile)
> a <- 5
> source(tmpfile)
[1] 5 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-30T15:35:20.507

@Matthew Plourde 答案的扩展版本。我通常做的是有一个 if 语句来检查命令行参数是否已经定义，否则读取它们。

此外，我尝试使用 argparse 库来读取命令行参数，因为它提供了更简洁的语法和更好的文档。

**要获取的文件**

```
 if (!exists("args")) {
         suppressPackageStartupMessages(library("argparse"))
         parser <- ArgumentParser()
         parser$add_argument("-a", "--arg1", type="character", defalt="a",
               help="First parameter [default %(defult)s]")
         parser$add_argument("-b", "--arg2", type="character", defalt="b",
               help="Second parameter [default %(defult)s]")
         args <- parser$parse_args()
 }

 print (args) 
```

**文件调用 source()**

```
args$arg1 = "c" 
args$arg2 = "d"
source ("file_to_be_sourced.R") 
```

c, d

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-25T16:22:46.263

这有效：

```
# source another script with arguments
source_with_args <- function(file, ...){
  commandArgs <<- function(trailingOnly){
    list(...)
  }
  source(file)
}

source_with_args("sourcefile.R", "first_argument", "second_argument") 
```

请注意，必须使用而不是`commandArgs`重新定义内置函数。据我了解，这使得它的范围超出了定义它的功能。`<<-``<-``source_with_args()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-09T13:36:23.920

我在这里测试了一些替代方案，我最终得到了这个：

**文件调用源：**

```
source_with_args <- function(file, ...){
  system(paste("Rscript", file, ...))
}
source_with_args(
  script_file,
  paste0("--data=", data_processed_file),
  paste0("--output=", output_file)
) 
```

**文件来源：**

```
 library(optparse)
  option_list = list(
    make_option(
      c("--data"),
      type="character",
      default=NULL,
      help="input file",
      metavar="filename"
    ),
    make_option(
      c("--output"),
      type="character",
      default=NULL,
      help="output file [default= %default]",
      metavar="filename"
    )
  )
  opt_parser = OptionParser(option_list=option_list)
  data_processed_file <- opt$data
  oputput_file <- opt$output
  if(is.null(data_processed_file) || is.null(oputput_file)){
    stop("Required information is missing")
  } 
```

# azure - Microsoft azure 帐户的登录问题

> ID：14525586
> 
> 赞同：1
> 
> 时间：2013-01-25T16:05:40.353
> 
> 标签：azure

我有一个 v-xxxxx.microsoft.com ID，通过它我在 microsoft Azure 90 天免费试用帐户中创建了一个帐户。
我无法通过 v-xxxxx.microsoft.com ID 登录 microsoft axure 门户。它向我显示错误“抱歉，我们无法使用您的@MICROSOFT.COM 帐户在此处登录。”

请问有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:42:22.707

您可以尝试以下几件事：

1.  在 IE9/10 中使用私人浏览，看看您是否可以输入您的凭据
2.  使用 #1 尝试使用 URL 重定向到域 ID [https://manage.windowsazure.com/?whr=microsoft.com](https://manage.windowsazure.com/?whr=microsoft.com)
3.  如果您的 Azure 订阅中已包含其他真实帐户作为共同管理员或服务管理员，请改用该真实帐户。

最后，如果上述选项均无效，则您的问题可能与挥之不去的 ordid 问题有关。您可以直接联系 Microsoft 支持并要求他们将您的问题发送给 Windows Azure 支持。这仅特定于 Windows Azure 门户登录问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:10:20.723

使用其他电子邮件地址创建一个新帐户。每个电子邮件地址都可以免费试用。

# html - 是否有类似 Expression Web 的查找和替换标签功能的 .net 库

> ID：14525590
> 
> 赞同：1
> 
> 时间：2013-01-25T16:05:50.427
> 
> 标签：html, text, replace, ide

Microsoft FrontPage 及其继任者 Expression Web 在“查找和替换”对话框中有一项功能，可让您按名称查找标签，并执行各种操作，例如：

*   替换标签和内容
*   仅替换内容
*   删除标签
*   更改标签
*   设置属性值。

该功能在文档中进行了描述[设置 HTML 规则以查找文本](http://msdn.microsoft.com/en-us/library/cc295353(v=expression.40).aspx)，并具有定义良好的[查询模式](https://msdn.microsoft.com/en-us/library/office/aa218656(v=office.11).aspx#odc_fp_extendfindandreplaceunderstandingqschema)

你知道实现相同功能的库吗？

具体来说，该库应尽可能多地实现“查找标记、替换操作和 HTML 规则”功能。

![查找和替换对话框](../Images/2e1ba21777e32da91b7ffd0dfee23d8a.png)

# c# - EF4.4 中每个混凝土类型 (TPC) 映射的表

> ID：14525591
> 
> 赞同：3
> 
> 时间：2013-01-25T16:05:52.877
> 
> 标签：c#, .net, sql-server-2008, entity-framework-4

我正在尝试在 EF 4.4 上实现 TPC 设计。

我有一组已经映射到现有表的类，并添加了一个具有相同结构的新集合，这些类将映射到具有不相交 ID 的不同表。

所以这几乎是旧类的新设计（没有我要添加的新类型的层次结构）。

```
public abstract class HierarchyLevel
{
   public virtual int Id { get; set; }
   public string Name { get; set; }
}

public class MainHierarchyLevel : HierarchyLevel { }

public abstract class HierarchyItem
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public virtual HierarchyLevel Level { get; set; }
}

public class MainHierarchyItem : HierarchyItem { }

public abstract class HierarchyTreeItem
{
    public int Id { get; set; }
    public virtual HierarchyTreeItem ParentTreeItem { get; set; }
    public virtual HierarchyItem Parent { get; set; }
    public virtual HierarchyItem Child { get; set; }
}

public class MainHierarchyTreeItem : HierarchyTreeItem { } 
```

无论我对配置做什么，EF 总是会创建一个表名，例如，我得到一个类似的查询

```
SELECT 
[Extent1].[Id] AS [Id], 
'0X0X' AS [C1], 
[Extent2].[Name] AS [Name], 
[Extent2].[Description] AS [Description], 
[Extent2].[Level_Id] AS [Level_Id]
FROM  [dbo].[HierarchyItems] AS [Extent1]
INNER JOIN [dbo].[HierarchyItems1] AS [Extent2] ON [Extent1].[Id] = [Extent2].[Id] 
```

HierarchyItems1 由 EF 组成。

这是我对配置所做的示例：

```
public class HierarchyItemsConfiguration : EntityTypeConfiguration<HierarchyItem>
{
    public HierarchyItemsConfiguration()
    {
        Property(hierarchyItem => hierarchyItem.Id).HasColumnName("Id").IsRequired();
        Property(hierarchyItem => hierarchyItem.Name).HasColumnName("Name").IsRequired();
        Property(hierarchyItem => hierarchyItem.Description).HasColumnName("Description").IsOptional();
    }
}

public class MainHierarchyItemsConfiguration : EntityTypeConfiguration<MainHierarchyItem>
{
    public MainHierarchyItemsConfiguration()
    {
        Map(mb =>
                {
                    mb.MapInheritedProperties();
                    mb.ToTable("HierarchyItems");
                });
        ToTable("HierarchyItems");
        HasKey(hierarchyItem => hierarchyItem.Id);
        HasRequired(hierarchyItem => hierarchyItem.Level).WithMany().Map(e => e.MapKey("Level_Id"));
    }
} 
```

**关于如何正确配置的任何想法？**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:33:52.643

像这样更改您的配置：

```
public class MainHierarchyLevelConfiguration : EntityTypeConfiguration<MainHierarchyLevel>
{
    public MainHierarchyLevelConfiguration()
    {
        Map(mb =>
        {
            mb.MapInheritedProperties();
            mb.ToTable("MainHierarchyLevels");
        });
    }
}

public class MainHierarchyItemsConfiguration : EntityTypeConfiguration<MainHierarchyItem>
{
    public MainHierarchyItemsConfiguration()
    {
        Map(mb =>
        {
            mb.MapInheritedProperties();
            mb.ToTable("MainHierarchyItems");
        });
        HasKey(hierarchyItem => hierarchyItem.Id);
        HasRequired(hierarchyItem => hierarchyItem.Level).WithMany().Map(e => e.MapKey("Level_Id"));
    }
}

public class HierarchyContext : DbContext
{
    public DbSet<MainHierarchyLevel> MainHierarchyLevels { get; set; }
    public DbSet<MainHierarchyItem> MainHierarchyItems { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Configurations.Add(new MainHierarchyLevelConfiguration());
        modelBuilder.Configurations.Add(new MainHierarchyItemsConfiguration());
    }
} 
```

运行以下测试程序时，将创建 2 个表 - 一个用于两个具体类 MainHierarchyLevel 和 MainHierarchyItem 中的每一个。

```
using (var db = new HierarchyContext())
{

    var level = new MainHierarchyLevel { Name = "Level1" };
    level = db.MainHierarchyLevels.Add(level);

    var mh = new MainHierarchyItem { Name = "m1", Description = "m1 desc", Level = level };
    db.MainHierarchyItems.Add(mh);
    db.SaveChanges();

    var query = from m in db.MainHierarchyItems
                orderby m.Name
                select m;

    Console.WriteLine("All mains in the database:");
    foreach (var item in query)
    {
        Console.WriteLine(item.Name);
    }

    Console.WriteLine("Press any key to exit...");
    Console.ReadKey();
} 
```

# c# - 转换期间的 C# T4 模板“错误”

> ID：14525592
> 
> 赞同：1
> 
> 时间：2013-01-25T16:05:53.133
> 
> 标签：c#, t4

我有一个 C# 项目，其中有 8 个 T4 模板，它们根据我的 DBML 自动转换我的模型/服务/存储库等。

`Transform All Templates`实际编译项目时，一切都在正常转换并且没有收到任何错误，但是在实际运行命令时我确实收到了以下内容。尽管它似乎并没有真正影响任何东西，但我只是试图找出这个错误的根源。有什么想法吗？

```
Error   44  Running transformation: System.IndexOutOfRangeException: Index was outside the bounds of the array. at Microsoft.VisualStudio.TextTemplatingA0408758CBA091AEC8619A75CCA2AD32.GeneratedTextTransformation.TransformText() at Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation(TemplateProcessingSession session, String source, ITextTemplatingEngineHost host, String& result)      1   1 
```

[http://i.imgur.com/gABbpRP.png](https://i.imgur.com/gABbpRP.png)

![在此处输入图像描述](../Images/90d8f1fbb649ee3966f2eca4d5285a3c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T00:26:44.807

解决方案中是否有 T4 文件或本地实际不存在的任何项目？也许它不在下载的源代码中。这可能会显示为黄色感叹号，而不是解决方案资源管理器中的错误。

此外，您也没有提到您是否手动运行每个模板以确保它们都运行良好。

# ios - 在 Objective-C 中解析一个 SOAP 响应

> ID：14525594
> 
> 赞同：-2
> 
> 时间：2013-01-25T16:05:58.523
> 
> 标签：ios, objective-c, parsing, soap, nsxmlparser

经过几个小时的研究，我无法解析肥皂响应。我没有使用`WSDL2OBJC`或`SudZc`解析我的 WSDL 文件，我使用`SoapUI`了它返回 XML。

例如：

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"   xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility- 1.0.xsd">
     <s:Header>
     <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis- open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
     <u:Timestamp u:Id="_0">
     <u:Created>2013-01-25T12:19:59.906Z</u:Created>
     <u:Expires>2013-01-25T12:24:59.906Z</u:Expires>
     </u:Timestamp>
     </o:Security>
     </s:Header>
     <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
     <getAllEntitiesResponse xmlns="http://tempuri.org/">
     <getAllEntitiesResult>
     <Entity Id="2" Name="red" Hexa="#CD0000" Alpha="1" LastUpdated="2012-06-27T10:36:33.39">
     <EntityKey>

     /* Some code */

     </EntityKey>
     </Entity> 
```

我的问题是：我怎样才能解析这个，只是为了拥有“实体”属性（只有实体 id=2 名称=红色的行...）？

提前致谢，

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:10:03.763

使用 NSXML 解析器，然后让实体实现 NSCoding 协议。Insider initWithCoder，您将能够获取属性并填充对象。

# ssrs-2008 - 查询在 SSMS 中执行但使 BIDS 崩溃

> ID：14525596
> 
> 赞同：0
> 
> 时间：2013-01-25T16:06:00.383
> 
> 标签：ssrs-2008, reporting-services

我有以下查询，它在 SSMS 中完美执行。但是，当我将代码粘贴到新创建的数据集并单击“执行”时，BIDS 崩溃并在没有通知的情况下关闭 - 关于原因的任何建议？

代码：

```
SELECT  MSP_EpmProject_UserView.ProjectOwnerName,
        MSP_EpmProject_UserView.ProjectUID,
        CurrentActivities.Activities_Current
FROM    MSP_EpmProject_UserView 
        Left Join
            (Select t1.projectUID, STUFF(
                (Select ', ' + t2.TaskName
                From (SELECT   MSP_EpmProject_UserView.ProjectUID, MSP_EpmTask_UserView.TaskName
                    FROM MSP_EpmAssignmentByDay_UserView INNER JOIN MSP_EpmTask_UserView ON MSP_EpmAssignmentByDay_UserView.TaskUID = MSP_EpmTask_UserView.TaskUID INNER JOIN MSP_EpmProject_UserView on MSP_EpmAssignmentByDay_UserView.ProjectUID = MSP_EpmProject_UserView.ProjectUID
                    WHERE (MSP_EpmAssignmentByDay_UserView.TimeByDay = @refDate) AND MSP_EpmProject_UserView.[Project Departments] = @prjDep) t2
                Where t1.ProjectUID = t2.ProjectUID
                Order by t2.TaskName
                For XML Path(''), Type).value('.','varchar(max)'),1,2,'') as Activities_Current
            From
                (SELECT   MSP_EpmProject_UserView.ProjectUID, MSP_EpmTask_UserView.TaskName
                FROM MSP_EpmAssignmentByDay_UserView INNER JOIN MSP_EpmTask_UserView ON MSP_EpmAssignmentByDay_UserView.TaskUID = MSP_EpmTask_UserView.TaskUID INNER JOIN MSP_EpmProject_UserView on MSP_EpmAssignmentByDay_UserView.ProjectUID = MSP_EpmProject_UserView.ProjectUID
                WHERE (MSP_EpmAssignmentByDay_UserView.TimeByDay = @refDate) AND MSP_EpmProject_UserView.[Project Departments] = @prjDep) t1
            Group by t1.ProjectUID) CurrentActivities On CurrentActivities.ProjectUID = MSP_EpmProject_UserView.ProjectUID
WHERE   (MSP_EpmProject_UserView.[Project Departments] = @prjDep) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:20:56.887

我会尝试创建一个视图，看看它是否仍然崩溃。BIDS 并不意味着是 SSMS，它对 XML 解析的解释可能会把它搞砸。您正在使用“for xml”翻译查询中的值，使用“type”删除 xml 的根元素，然后扩展它，然后嵌套它，然后嵌套它，然后左连接它，然后你有一个常规sql表达式。根据我的经验，BIDS 并不意味着要做很多动态 SQL、密集的 CLR 和 xml 节点或 xquery 表达式嵌套的东西。每次我抛出大量的 XML、表变量、递归 CTE、动态 SQL ......它都会爆炸。我猜它的解释器正在爆炸，因为它没有 SSMS 评估表达式的资源并以爆炸的形式放弃。

我对视图的想法是，解释将被强制在数据库中的 SQL 引擎上执行它的逻辑和执行计划，然后返回结果。BIDS 只会知道这是一个执行的调用，但不必推理出逻辑。在我的回忆中，2008 年带有 BIDS 的 SSRS 在复杂查询逻辑和 SSAS 多维数据集方面存在许多问题。

这可能行不通，但我知道将内容放到视图、函数或 proc 中通常会解决引擎必须执行的复杂逻辑的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:19:52.527

我设法解决了这个问题，只需将代码粘贴到数据集中，更新字段，不单击“查询设计器”并手动添加 BIDS 未自动检测到的参数（在我的情况下是 DATEADD() 的 INT 参数）。然后当我关闭数据集窗口并在报告中使用数据集时，一切正常

# magento - 更改交易电子邮件中的徽标

> ID：14525599
> 
> 赞同：3
> 
> 时间：2013-01-25T16:06:06.467
> 
> 标签：magento

我有一封包含以下代码的交易电子邮件：

```
<a href="{{store url=""}}"><img src="{{var logo_url}}" alt="{{var logo_alt}}" style="margin-bottom:10px;" border="0"/></a></td> 
```

和 /public_html/skin/frontend/fortis/default/images 中的徽标 logo.png 我应该在 store url="" 和 {{var logo_url}} 中放入什么以在交易电子邮件中显示我的徽标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:54:07.290

要全局更改此设置，请转到：

> 系统 > 配置 > 常规 > 设计 > 事务性电子邮件

并上传到那里。我正在使用 Magento 版本。1.9.0.1

您的文件夹中应该有一个与“打印视图”页面`logo_email.gif`相同的图像。`logo_print.gif`

所以：

“/public_html/skin/frontend/fortis/default/images/logo_email.gif”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T01:22:40.080

如果你必须使用你的 logo.png 文件，你需要使用这样的东西

```
src="{{skin url="images/logo.png" _area='frontend' _package="fortis" _theme="default"}}" 
```

但更好的方法是将您的电子邮件徽标转换为 SteveyO 建议的 email_logo.gif 并将其放入 /public_html/skin/frontend/fortis/default/images/logo_email.gif 这样您就不需要编辑每封交易电子邮件，并确保一切都在系统->配置->通用->设计中设置

可以在此处找到更多信息[如何替换交易电子邮件中的默认徽标？](https://stackoverflow.com/questions/5985376/how-to-i-replace-the-default-logo-in-transactional-emails)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T16:29:01.203

您应该在 Magento 后端（配置 > 设计 > 事务性电子邮件）中更改它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-20T07:12:09.857

为此，在此**skin/frotend/default/YOUR_THEME/images**结构下的主题皮肤层次结构中，您应该将徽标文件命名为“logo_email.gif”。只需将其替换为您的新徽标文件（保持相同的名称）。

这不需要任何进一步的更新，清除缓存并检查它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-21T22:00:46.200

要全局更改此设置，请转到：

System>Configuration>General>Design>Transactional Emails 并上传到那里。我正在使用 Magento 版本。1.9.0.1

# windows - 有没有办法以编程方式将焦点放在 Windows 中的应用程序上？

> ID：14525600
> 
> 赞同：2
> 
> 时间：2013-01-25T16:06:08.383
> 
> 标签：windows, vb.net

我想使用 Visual Basic 构建一个将在 Windows 环境中运行的应用程序。应用程序应该非常简单：两个按钮，每个按钮都会使不同的应用程序获得焦点，将其向前拉到 Visual Basic 应用程序的前面。

这可以做到吗？

如果不能用 Visual Basic 完成，是否有另一种编程语言可以在很容易创建简单 UI 的情况下完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:11:03.643

像这样的东西

```
01  ' Used to get access to Win API calling attributes
02  Imports System.Runtime.InteropServices
03   
04  Public Class Form1
05      ' This is 2 functions from user32.dll (1 for finding the application and 1 to set it to foreground with focus)
06      <DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
07      Private Shared Function FindWindow( _
08       ByVal lpClassName As String, _
09       ByVal lpWindowName As String) As IntPtr
10      End Function
11   
12      <DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
13      Private Shared Function SetForegroundWindow(ByVal hWnd As IntPtr) As Long
14      End Function
15   
16      ' Here we are looking for notepad by class name and caption
17      Dim lpszParentClass As String = "Notepad"
18      Dim lpszParentWindow As String = "Untitled - Notepad"
19   
20      Dim ParenthWnd As New IntPtr(0)
21   
22   
23      Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
24          ' Find the window and get a pointer to it (IntPtr in VB.NET)
25          ParenthWnd = FindWindow(lpszParentClass, lpszParentWindow)
26   
27          If ParenthWnd.Equals(IntPtr.Zero) Then
28              Debug.WriteLine("Notepad Not Running!")
29          Else
30              ' Found it, so echo that we found it to debug window
31              ' Then set it to foreground
32              Debug.WriteLine("Notepad Window: " & ParenthWnd.ToString())
33              SetForegroundWindow(ParenthWnd)
34          End If
35      End Sub
36  End Class
enter code here 
```

[https://www.google.nl/search?client=opera&q=focus+program+VB](https://www.google.nl/search?client=opera&q=focus+program+VB)

不要使用 Google 可能也会告诉您的 AppActivite。

# c# - 如何将 NInject 模块链接在一起

> ID：14525601
> 
> 赞同：11
> 
> 时间：2013-01-25T16:06:13.920
> 
> 标签：c#, asp.net, dependency-injection, ninject

我有一个使用 NInject 来解决依赖注入的多层应用程序。每一层都有一个特定的 NInject 模块：

```
服务层 - ServiceModule
数据层 - 数据模块

```

在我的表示层中，我真的不想加载每个模块。而不是我想要的，例如，加载 ServiceModule 并且模块负责加载其依赖项。

我怎样才能做到这一点？

例如，这是我的 ServiceModule：

```
public class ServicesModule : NinjectModule
{
    public override void Load()
    {
        ...
        Bind<IProductService>().To<ProductService>();
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T16:07:03.903

很简单，在 NInject 模块中，您可以访问内核：

```
Kernel.Load(new [] { new [YourModule]() }); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-01-18T13:35:58.527

如果您的模块有一个依赖的模块，您可以从该模块（而不是`NinjectModule`）继承并调用`base.Load()`：

```
public override void Load()
{
    base.Load();
    ...
} 
```

这将有效地链接模块。

# vim - vim硬拷贝中行号的颜色

> ID：14525605
> 
> 赞同：3
> 
> 时间：2013-01-25T16:06:20.597
> 
> 标签：vim

当我使用 vim 从 vim 打印时，`hardcopy`我得到的行号以红色打印，语法突出显示。我尝试按照此处[VIM 初始设置的建议更改颜色：更改左侧行号的背景颜色？](https://stackoverflow.com/questions/250652/vim-initial-settings-change-backgound-color-for-line-number-on-the-left-side). 但似乎这只会影响屏幕上的行号。这里讨论：[http](http://marc.info/?l=vim-dev&m=101738036626869&w=2) ://marc.info/?l=vim-dev&m=101738036626869&w=2 应该添加一个打印选项来调整颜色。由于帖子较旧，我想知道今天是否存在这样的功能。

# .net - 我可以在不告诉 EF 的情况下将复杂数据类型与 EF 提供的 WCF 数据服务一起使用吗？

> ID：14525606
> 
> 赞同：1
> 
> 时间：2013-01-25T16:06:23.583
> 
> 标签：.net, entity-framework, wcf-data-services, odata

我正在使用实体框架提供的 WCF DataService 来公开 OData 端点。我想创建一个返回新类型的服务操作。但我得到：

> 异常消息是“无法加载返回类型‘System.Linq.IQueryable `1[MyNamespace+MyNewType]' of method 'System.Linq.IQueryable`1[MyNamespace+MyNewType] FlightHours()’的元数据。”。有关更多详细信息，请参阅服务器日志。

我怎样才能让 DataService 知道我希望它了解 MyNewType？我是否必须在 EF DataContext 上巧妙地制作一个假实体，或者我可以以某种方式简单地“添加”它？ [这篇文章提出了那个黑客，](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/e473e2b9-f385-412d-9aba-44acf9719fd8)但我希望事情发生了变化，或者他们错过了一些东西。

更新相关链接：

*   我假设[WCF DataService with Entity Framework: TimeSpan 支持](https://stackoverflow.com/questions/9454747/wcf-dataservice-with-entity-framework-timespan-support)将以相同的方式解决。
*   [这个 MSDN 讨论](http://social.msdn.microsoft.com/Forums/hr/adodotnetdataservices/thread/1225c65f-089d-4ad7-846a-71626f2b2282)暗示反射和自定义源存在这样的方法，但没有提及 EF。
*   2013 年 6 月更新：感谢@dgorissen，他发现了这个可能的反例：[WCF Data Services 5.0 Workaround for return POCOs?](https://stackoverflow.com/q/11421648/237091) 我自己没有机会测试这个，我不知道它为什么会起作用，但也许它会......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:56:11.390

目前除了告诉 EF 存在这种类型之外别无他法。当您为 WCF DS 使用 EF 提供程序时，整个元数据仅来自 EF，WCF DS 不会以任何（有意义的）方式对其进行修改。

# javascript - jQuery最接近（）不选择动态添加的类

> ID：14525612
> 
> 赞同：1
> 
> 时间：2013-01-25T16:06:40.300
> 
> 标签：javascript, jquery

我有[以下 jsFiddle](http://jsfiddle.net/WFawp/)，它有一个`.tab`类（在跨度上），应该删除/替换 onclick 上的打开（或关闭）类`.container`——虽然我的控制台日志显示成功，但使用`closest()`我无法抓住有问题的特定课程以更改/切换该课程。

我已经尝试了很多变体，但不确定我是否选择了错误。

任何指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:46:43.500

.closest 实际上是向外工作的，所以更好的选择是

```
$(this).find('.panel .close').removeClass('close').addClass('open'); 
```

# c# - Phone.Maps - 在使用 ItemsSource 之前，Items 集合必须为空

> ID：14525618
> 
> 赞同：4
> 
> 时间：2013-01-25T16:07:05.240
> 
> 标签：c#, .net, windows-phone-8

我查看了类似的错误，但找不到与我的场景匹配的错误。

我正在使用这里的示例： [http ://wp.qmatteoq.com/maps-in-windows-phone-8-and-phone-toolkit-a-winning-team-part-2/](http://wp.qmatteoq.com/maps-in-windows-phone-8-and-phone-toolkit-a-winning-team-part-2/)

经常，但不是每次..我收到以下异常：

```
An exception of type 'System.InvalidOperationException' occurred in Microsoft.Phone.Controls.Toolkit.DLL but was not handled in user code

Items collection must be empty before using ItemsSource. 
```

堆栈跟踪：

```
 at Microsoft.Phone.Maps.Toolkit.MapItemsControl.OnItemsSourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
 at System.Windows.DependencyObject.RaisePropertyChangeNotifications(DependencyProperty dp, Object oldValue, Object newValue)
 at System.Windows.DependencyObject.UpdateEffectiveValue(DependencyProperty property, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, ValueOperation operation)
 at System.Windows.DependencyObject.SetValueInternal(DependencyProperty dp, Object value, Boolean allowReadOnlySet)
 at System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value)
 at Microsoft.Phone.Maps.Toolkit.MapItemsControl.set_ItemsSource(IEnumerable value)
 at NextBuses.MainPage.GetMembersCompleted(Object sender, GetMembersCompletedEventArgs e)
 at NextBuses.SQLService.Service1Client.OnGetMembersCompleted(Object state) 
```

我正在做的是在 Windows Phone 8 中填充地图。当它工作时，它很好。我的列表中有 25 项作为图钉添加到列表中。

XAML：

```
<my:Map Height="696" MouseLeftButtonDown="Close_popup" HorizontalAlignment="Left" Name="map1" VerticalAlignment="Top" Width="480" Grid.RowSpan="2" ZoomLevel="5.5"  >
             <toolkit:MapExtensions.Children>
                <toolkit:UserLocationMarker x:Name="UserLocationMarker" Visibility="Visible" />
                <toolkit:MapItemsControl >
                    <toolkit:MapItemsControl.ItemTemplate>
                        <DataTemplate>
                            <toolkit:Pushpin  MouseLeftButtonUp="pin_click" GeoCoordinate="{Binding Location1}"  Template="{StaticResource PushpinControlTemplate1}"/>
                        </DataTemplate>
                    </toolkit:MapItemsControl.ItemTemplate>
                </toolkit:MapItemsControl>
            </toolkit:MapExtensions.Children>
        </my:Map> 
```

C＃

```
 ObservableCollection<DependencyObject> children = MapExtensions.GetChildren(map1);
        var obj = children.FirstOrDefault(x => x.GetType() == typeof(MapItemsControl)) as MapItemsControl;
        obj.ItemsSource = details; 
```

'details' 是一个列表，其中包含地理坐标等变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:30:37.533

设置 ItemsSource 的那一刻，Items 变为只读。您必须选择要使用的那个。你不能在这里混搭。所以在设置 ItemsSource 之前，调用 Items.Clear()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:16:47.167

AFAIK 你不能有数据绑定的项目，也不能为同一个 ItemsControl 硬编码项目。这意味着只要您使用 DataBinding，硬编码的 UserLocationMarker 就不会在那里工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-29T18:32:42.677

我一直在寻找解决这个问题的方法，当我检查了 Extension 的源代码时，发现当 ItemsSource 发生变化时，有一个 if 语句检查 Items.Count > 0 并抛出异常。

因此，要将新 Collection 设置为 ItemsSource，您可以使用这样的代码：

```
MapItemsControl MIC = MapExtensions.GetChildren(map1).FirstOrDefault(x => x is MapItemsControl) as MapItemsControl;
if (MIC != null && MIC.ItemsSource != null)
{
   (MIC.ItemsSource as IList).Clear() // clear old collection
   MIC.ItemsSource = null;
}
MIC.ItemsSource = details; // new collection 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:36:20.117

我在清除 ItemsSource 列表时遇到问题。我的解决方案是在 Items 上使用 Clear 但不要忘记设置 ItemsSource = null 因为这会触发它。然后您可以为 ItemsSource 设置一个新值。当然，这必须在 Dispatcher 块中完成，因为它在 UI 线程上运行。

# c# - 动态改变背景颜色

> ID：14525626
> 
> 赞同：1
> 
> 时间：2013-01-25T16:07:28.947
> 
> 标签：c#, windows-phone-7, background, brush

在我的 Windows Phone 7 应用程序中，我希望`ContentPanel`的背景在指定时间内（在本例中为 3 秒）更改其颜色。基本上我希望它“**闪烁**”。

但问题是循环工作时不会出现更改，颜色仅在循环完成后更改一次。为什么？

```
byte R;
TimeSpan ts = new System.TimeSpan(0, 0, 0, 3);
DateTime dt1 = new DateTime();           
DateTime dt2 = new DateTime();    

requirement = true;
while (requirement)
{ 
    R = Convert.ToByte(0.5 * 255 * (1 + Math.Sin(DateTime.Now.Millisecond)));
    ContentPanel.Background = new SolidColorBrush(Color.FromArgb(255, R, 125, 70));
    dt1 = DateTime.Now;
    dt2 = DateTime.Now;
    dt2.Subtract(dt1);
    if (dt2.Subtract(ts).CompareTo(dt1) > 0) requirement = false;
 } 
```

甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:18:47.820

看起来你的循环太紧了。

试试这个：

```
private DispatcherTimer _timer;

private void StartFlash()
{
  _timer = new DispatcherTimer();
  _timer.Interval = new TimeSpan(0,0,1);
  _timer.Tick += (s,e) => ChangeColour;
}

private void StopFlash()
{
  _timer = null;
}

private void ChangeColour() {
  // Your colour changing logic goes here
  ContentPanel.Background = new SolidColorBrush(Color.FromArgb(a,r,g,b));
} 
```

将该代码放在一个类中。在某处调用 StartFlash()。ChangeColor 将每秒执行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:19:10.677

尝试使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)以异步方式执行。

UI 不会在您的方法执行期间更新，此外，如果您在 UI 线程中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:15:34.460

您要求 DateTime.Now 太快了，因此差异将等于 0，因为 DateTime 的准确度没有达到纳秒（毕竟日期是从 unix 纪元开始以**毫秒为单位标记的）。**

您可能希望使用更可靠的逻辑来限制时间。

# java - 手动设置程序集包名称，但安装插件会忽略它们

> ID：14525627
> 
> 赞同：1
> 
> 时间：2013-01-25T16:07:30.097
> 
> 标签：java, maven

我遇到了一些我需要配置的功能的问题。
这是我的 POM 的一部分，我在其中将项目配置为组装成两个不同的文件：FirstNameProject-VERSION-bin.zip 和 SecondNameProject-VERSION-bin.zip。这个想法是我**必须**保持这些名称的设置，即使原始的人工制品很常见。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://maven.apache.org/xsd/maven-4.0.0.xsd">4.0.0

```
<groupId>com.project.my</groupId>
<artifactId>MyGenericProject</artifactId>
<name>Generic Project</name>

<version>2.0.2-SNAPSHOT</version>
...
<build>
     <plugins>
        ....
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <execution>
                    <id>first</id>
                    <configuration>
                        <finalName>FirstNameProject-${project.version}-bin</finalName>
                        <appendAssemblyId>false</appendAssemblyId>
                        <descriptors>
                            <descriptor>src/main/assembly/resources_first.xml</descriptor>
                        </descriptors>
                    </configuration>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
                <execution>
                    <id>second</id>
                    <configuration>
                        <finalName>FirstNameProject-${project.version}-bin</finalName>
                        <appendAssemblyId>false</appendAssemblyId>
                        <descriptors>
                            <descriptor>src/main/assembly/resources_second.xml</descriptor>
                        </descriptors>
                    </configuration>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>                   
            </executions>
        </plugin>
    </plugins>
</build> 
```

这工作正常，在`mvn package`日志中我可以看到：

```
[INFO] --- maven-assembly-plugin:2.2.1:single (first) @ MyGenericProject ---
[INFO] Reading assembly descriptor: src/main/assembly/resources_first.xml
[INFO] Building zip: C:\MyPath\MyProject_trunk\target\FirstNameProject-2                                                                   .0.2-bin.zip
[INFO]
[INFO] --- maven-assembly-plugin:2.2.1:single (second) @ MyGenericProject ---
[INFO] Reading assembly descriptor: src/main/assembly/resources_second.xml
[INFO] Building zip: C:\MyPath\MyProject_trunk\target\SecondNameProject-2.0                                                                   .2-bin.zip 
```

问题是，在**安装**期间，它只是恢复为通用名称并将正确命名的文件安装为通用文件！

[INFO] --- maven-install-plugin:2.3.1:install (default-install) @MyGenericProject --- [INFO] 安装 C:\MyPath\MyProject_trunk\target\MyGenericProject-2.0.2-SNAPSHOT.jar 到C:.m2\repository\com\project\my\MyGenericProject\2.0.2-SNAPSHOT\MyGenericProject-2.0.2-SNAPSHOT.jar [INFO] 安装 C:\MyPath\MyProject_trunk\pom.xml 到 C:.m2\ repository\com\project\my\MyGenericProject\2.0.2-SNAPSHOT\MyGenericProject-2.0.2-SNAPSHOT.pom [INFO] 安装 C:\MyPath\MyProject_trunk\target\FirstNameProject-2.0.2-SNAPSHOT-bin.zip 到C:.m2\repository\com\project\my\MyGenericProject\2.0.2-SNAPSHOT\MyGenericProject-2.0.2-SNAPSHOT.zip

我想这是因为安装插件无法准确了解程序集插件的配置方式，所以我问你：如何配置安装插件，以便最终得到**FirstNameProject-VERSION-bin.zip**和**SecondNameProject- VERSION-bin.zip**安装在我的存储库中？？

我希望我足够清楚，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:40:19.283

听起来 Maven 正在以默认名称将程序集工件“附加”到项目中。第一个选项是搜索程序集插件配置，看看是否有办法控制它。我自己看了一下，我看不出有办法做到这一点。我原以为它会使用您的最终名称配置，但如果没有，它不会。

我可以提供的解决方法，我希望有人可以提供更标准的东西，就是[将程序集配置为不附加自身](http://maven.apache.org/plugins/maven-assembly-plugin/single-mojo.html#attach)。

接下来，获取它创建的文件，具有您想要的名称的文件，并使用[build-helper 插件](http://mojo.codehaus.org/build-helper-maven-plugin/attach-artifact-mojo.html)将文件附加到您想要的精确坐标下。

# jquery - 总是收到“无效的 Web 服务调用，参数缺失值：”和/或“未找到 Web 方法”。

> ID：14525631
> 
> 赞同：0
> 
> 时间：2013-01-25T16:07:48.053
> 
> 标签：jquery, ajax, asp.net-mvc, web-services

多年来，我一直使用 MVC 调用这样的方法，没有任何问题。每当我尝试通过 asmx Web 服务调用它们时，我都会遇到各种不同的错误。这些都没有为我的问题提供任何真正的线索。任何帮助，将不胜感激。我尝试添加 ScriptMethod、更改属性等。没有任何效果。WTF 我在这里失踪了吗？

**这是我的jQuery代码**

```
 function savePerson() {
        $.ajax({
            type: "POST",
            url: "Service.asmx/SavePerson",
            data: "{'Name': 'Jim','Age': '32'}",
            contentType: "application/json; charset=utf-8",
            dataType:"json",
            success: function (response) {
                var data = response.d;
                $('#output').html(data)
            },
            failure: function (msg) {
                $('#output').text(msg);
            }
        }); 
```

**这是我的网络服务代码**

```
[WebMethod]
public string SavePerson(Person p)
{
    return p.Name + " was saved successfully.";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:37:46.330

它确实需要是 a`ScriptMethod`才能从 JavaScript 调用它；我怀疑另一个问题是您的参数 - ASMX 方法不会执行 MVC 方法将执行的自动映射，因此您需要显式发送具有适当名称和字段的对象，或实现采用属性的方法单独并构造适当的对象服务器端。

# javascript - 如果元素有类则运行函数，否则运行另一个

> ID：14525632
> 
> 赞同：0
> 
> 时间：2013-01-25T16:07:50.913
> 
> 标签：javascript, jquery, css, html

我的页面上有一个元素，我想让它成为可拖动的。

在单击事件中，我添加了“活动”类，这只是扩展了我的 div 和其中的图像。

所以最初我的 div 看起来像......

```
<div class="work-showcase"> 
```

点击它变成...

```
<div class="work-showcase active"> 
```

我想说如果 div 有类活动，执行 X 功能，否则执行 Y。

```
$(body).click(function(){

        if($('.work-showcase').hasClass('active')){

            var bleft = 4900 ;
            var bright = $(window).width() - 200;

            $('.active > ul li').draggable({
                 axis: "x", 
                 revert: false,
                 stop: function(event, ui) {
                    if(ui.position.left < -bleft)
                    {   
                    $(this).animate({"left": "0px"}, 600);
                    }
                    if(ui.position.left > bright)
                    {   
                    $(this).animate({"left": "0px"}, 600);
                    }

                }
            });

            } else {

     var sleft = 1846 ;
     var sright = $(window).width() - 200;

            $('.work-showcase > ul li').draggable({
                 axis: "x", 
                 revert: false,
                 stop: function(event, ui) {
                    if(ui.position.left < -sleft)
                    {   
                    $(this).animate({"left": "0px"}, 600);
                    }
                    if(ui.position.left > sright)
                    {   
                    $(this).animate({"left": "0px"}, 600);
                    }

                }
            });

        }

    }); 
```

我的 If 语句似乎不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:27:43.510

试试这个而不是你目前拥有的（如果有问题请告诉我）

```
$('body').click(function () {
    var drag, left, right;

    if ($('.work-showcase').hasClass('active') === true) {
        drag = '.active > ul li';
        left = -4900;
        right = $(window).width() - 200;
    } else {
        drag = '.work-showcase > ul li';
        left = -1846;
        right = $(window).width() - 200;
    }

    $(drag).draggable({
        axis: 'x',
        revert: false,
        stop: function (event, ui) {
            if (ui.position.left < left) {
                $(this).animate({'left': '0px'}, 600);
            } else if (ui.position.left > right) {
                $(this).animate({'left': '0px'}, 600);
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:28:13.143

这个选择器：

```
$(body).click(function(){ ... }); 
```

需要是 ：

```
$('body').click(function(){ ... } 
```

注意引号！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:20:07.740

使用 jQuery：

```
if($(this).hasClass("active")){
    //do this
} else {
    //do that
} 
```

**编辑：**它返回`true`或`false`：[jQuery hasClass Documentation](http://api.jquery.com/hasClass/)

# c# - CRM 2011 中 CRM 4 方法 CrmService.CreateAsync(UpdateAsync) 的模拟

> ID：14525634
> 
> 赞同：2
> 
> 时间：2013-01-25T16:07:57.777
> 
> 标签：c#, asynchronous, ssis, dynamics-crm-2011, crm

是否可以像在 Crm 4 中那样进行异步调用

```
 crmService.UpdateAsync(card, Guid.NewGuid()); 
```

在 CRM 2011 中？？？

我必须在 SSIS 的帮助下在 CRM 和某些系统之间进行同步。在目标脚本组件中，我想使用异步调用，但我不想自己编写异步调用。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:35:00.880

我主要使用 CRM 2011（而不是 CRM 4），但听起来您将要部署一个插件。如果没有，请立即停止阅读。:)

如果是，您可以在 PRT 中注册插件时将调用类型设置为异步。只需单击该选项。

你还有另一个选择。如果您正在运行最新的 .NET 框架，则有一个新关键字 - *async 异步*执行该方法。如果您的目标是较旧的 .NET 版本，请不要绝望 - 我使用线程进行了长时间的更新，而且效果也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:14:24.267

[这](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.messages.executemultiplerequest.aspx)可能是这个问题的答案，但只有在 CRM 2011 UR 12 中才有可能

```
 #region Execute Multiple with Results
// Create an ExecuteMultipleRequest object.
requestWithResults = new ExecuteMultipleRequest()
{
    // Assign settings that define execution behavior: continue on error, return responses. 
    Settings = new ExecuteMultipleSettings()
    {
        ContinueOnError = false,
        ReturnResponses = true
    },
    // Create an empty organization request collection.
    Requests = new OrganizationRequestCollection()
};

// Create several (local, in memory) entities in a collection. 
EntityCollection input = GetCollectionOfEntitiesToCreate();

// Add a CreateRequest for each entity to the request collection.
foreach (var entity in input.Entities)
{
    CreateRequest createRequest = new CreateRequest { Target = entity };
    requestWithResults.Requests.Add(createRequest);
}

// Execute all the requests in the request collection using a single web method call.
ExecuteMultipleResponse responseWithResults =
    (ExecuteMultipleResponse)_serviceProxy.Execute(requestWithResults);

// Display the results returned in the responses.
foreach (var responseItem in responseWithResults.Responses)
{
    // A valid response.
    if (responseItem.Response != null)
        DisplayResponse(requestWithResults.Requests[responseItem.RequestIndex], responseItem.Response);

    // An error has occurred.
    else if (responseItem.Fault != null)
        DisplayFault(requestWithResults.Requests[responseItem.RequestIndex], 
            responseItem.RequestIndex, responseItem.Fault);
} 
```

来自 MSDN 的代码

# matrix - 在着色器问题中计算法线

> ID：14525636
> 
> 赞同：1
> 
> 时间：2013-01-25T16:08:07.117
> 
> 标签：matrix, glsl, shader, projection, lighting

我有以下顶点着色器来[旋转法线](https://stackoverflow.com/questions/14196252/rotate-normals-in-shader)。在我实现之前，我还传递了网格的旋转矩阵来计算法线。那个时候灯光还不错。

```
#version 150

uniform mat4 projection;
uniform mat4 modelview;

in vec3 position;
in vec3 normal;
in vec2 texcoord;

out vec3 fposition;
out vec3 fnormal;
out vec2 ftexcoord;

void main()
{
    mat4 mvp = projection * modelview;

    fposition   = vec3(mvp * vec4(position, 1.0));
    fnormal     = normalize(mat3(transpose(inverse(modelview))) * normal);
    ftexcoord   = texcoord;
    gl_Position = mvp * vec4(position, 1.0);
} 
```

但是使用这个着色器，在片段着色器中计算的光照会随着相机转动。我没有更改片段着色器，所以问题应该在上面的代码中。

我在计算法线时做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:17:25.927

您用于创建普通矩阵的步骤可能不正常。

尝试：

```
fnormal = normalize(transpose(inverse(mat3(modelview))) * normal) 
```

**编辑：**

由于您正在反转 mat4，因此平移值（当 mat4 转换为 mat3 时会被截断）可能会影响逆矩阵的计算。

# nltk - 条件频率分布问题

> ID：14525637
> 
> 赞同：1
> 
> 时间：2013-01-25T16:08:07.797
> 
> 标签：nltk

我有以下代码：

```
corpus= CategorizedPlaintextCorpusReader(loc,'(?!\.svn).*\.txt', cat_pattern=r'(Shakespeare|Milton)/.*')
    cfd=nltk.ConditionalFreqDist ((genre,word)
                          for genre in corpus.categories()
                          for word in corpus.words(categories = genre))
    genres=['Shakespeare','Milton']
    pronouns=['I','you','he','she', 'it','we','they']

    cfd.tabulate (conditions=genres,samples=pronouns) 
```

现在，由于一些非常奇怪的原因，我收到以下错误：“category = re.match(self._pattern, file_id).group(1) AttributeError: 'NoneType' object has no attribute 'group'”

有人知道那是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:30:11.963

```
category = re.match(self._pattern, file_id).group(1) 
AttributeError: 'NoneType' object has no attribute 'group' 
```

此错误消息告诉您`re.match`返回的`None`. 换句话说，没有匹配。当您查找 group(1) 时，它会引发错误。

在前进方面，您有几个选择：

1.  简化匹配命令。

2.  保持防守。首先使用 an`if`检查是否有 a`match`然后查找它的组。

3.  通常，当您遇到此类错误时，请继续简化代码以查看导致问题的原因。Python 可以用非常简洁的方式编写，但我发现在学习时更具描述性会更好。

这个[SO question](https://stackoverflow.com/questions/1491277/python-regex-object-has-no-attribute)应该给你更多的选择。

希望能帮助你前进。

# spring - 当数据库不可用时，如何防止数据库调用挂在 jdbcTemplate.query 中？

> ID：14525639
> 
> 赞同：1
> 
> 时间：2013-01-25T16:08:11.723
> 
> 标签：spring, jdbctemplate, bonecp

我正在使用 Spring JDBC 模板和 BoneCP 连接池。当我故意将 JDBC URL 设置为无效值（以测试我的系统在数据库连接失败时如何工作）时，它会引发`UnknownHostException`服务器启动，但服务器会继续启动。当我提交请求时，该`jdbcTemplate.query(sql)`方法挂起。什么是处理这个问题的好方法，这样系统就不会挂起`jdbcTemplate.query(sql)`？

如果数据库由于网络连接问题而关闭，则可能出现这种情况。我试图玩弄`idleMaxAgeInSeconds`and`maxConnectionAgeInSeconds`值；我将它们都设置为 10，但代码仍然挂在`jdbcTemplate.query()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:53:05.787

我不确定我是否理解您的问题，但在我看来，如果发生异常，您不希望服务器启动，或者您想设置一个静态变量，在尝试联系数据库之前检查数据库是否打开（初始化 jdbc 时没有 UnknownHostException）。

也许这会指向您的答案：

[http://www.cubrid.org/blog/dev-platform/understanding-jdbc-internals-and-timeout-configuration/](http://www.cubrid.org/blog/dev-platform/understanding-jdbc-internals-and-timeout-configuration/)

祝你好运！

# javascript - 当我指定更改事件时，为什么在页面加载时会触发 Javascript 事件？

> ID：14525643
> 
> 赞同：0
> 
> 时间：2013-01-25T16:08:23.063
> 
> 标签：javascript, jquery

我有一个 ddl 并尝试使用 jquery 在所选选项更改时执行事件，但更改事件的函数在页面加载时正在执行。

```
$(function () {
$("#<%= ddlMake.ClientID %>").change(handleddl1());}); 
```

它是否是由 sql 数据源填充的 asp ddl 是否重要？

任何关于我为什么以及如何使其根据需要工作的解释都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:08:49.457

因为你*打电话* `handleddl1`而不是仅仅*通过*它。改用这个：

```
$(function () {
    $("#<%= ddlMake.ClientID %>").change(handleddl1);
}); 
```

# java - 自动刷新数据库并与 java 连接

> ID：14525646
> 
> 赞同：0
> 
> 时间：2013-01-25T16:08:38.333
> 
> 标签：java, mysql

我正在使用带有卡片布局和几个面板的框架。在第一个面板中，有一个读取名称的 textField 对象和一个按钮，单击该按钮会将名称添加到数据库表中。在第二个面板中，有一个下拉框，它从前一个面板插入的数据库中读取值。

我的问题是，数据库中的值没有添加到第二个面板的下拉框中。这仅在我关闭程序并再次运行时才有效。

有没有办法刷新表和数据库以及数据库连接，这样我就可以看到下拉框中的值而无需重新启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:11:52.377

只需将事件绑定到按钮即可刷新下拉菜单。

# breeze - 删除未保存实体时的错误

> ID：14525648
> 
> 赞同：2
> 
> 时间：2013-01-25T16:08:48.683
> 
> 标签：breeze

我认为当您将子实体添加到另一个实体然后将子实体标记为已删除（之前未保存更改）时，我发现了一个错误。

这是测试：

```
test("delete unsaved entity", 1, function () {
    var realEm = newEm();
    //ok(realEm.hasChanges() === false, "The entity manager must not have changes");
    var query = EntityQuery.from("Customers")
        .where("CustomerID", "==", "729de505-ea6d-4cdf-89f6-0360ad37bde7")
        .expand("Orders");
    stop();
    realEm.executeQuery(query)
        .then(function (data) {
            var cust = ko.observable(data.results[0]);
            var newOrder = realEm.createEntity("Order", {}, breeze.EntityState.Detached);
            cust().Orders.push(newOrder);
            //ok(newOrder.entityAspect.entityState.isAdded() === true, "The entity is Added");
            newOrder.entityAspect.setDeleted();
            //ok(realEm.hasChanges() === true, "The entity manager must have changes? Not clear to me but it's true");
            realEm.saveChanges();
            ok(realEm.hasChanges() === false, "The entity manager must not have changes");
        })
    .fin(start);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:16:40.743

从微风 v1.0.0 开始，此错误现已修复。抱歉耽搁了

## 下面是旧帖

感谢您的复制，**它真的很有帮助**。这里有一个错误，它可能会在今天晚些时候或明天早些时候的下一个版本中修复。

需要明确的是，在“setDeleted”调用之后的“hasChanges”调用应该返回 false，但当前返回 true。原因是删除“添加”记录只是将实体从 entityManager 中分离出来；因此将 entityManager 恢复到“添加”之前的状态。分离确实发生了，但在这种情况下 hasChanges 函数被破坏了。

不过还有两个问题。

首先，您可以替换此行

```
 var cust = ko.observable(data.results[0]); 
```

有了这个

```
 var cust = data.results[0]; 
```

因为 Breeze 会自动从查询返回的任何实体中创建 ko observables。

第二次调用 saveChanges

```
 realEm.saveChanges();
  ok(realEm.hasChanges() === false); 
```

需要转换为承诺，因为 saveChanges 是异步的。

```
 realEm.saveChanges().then(function(r) { 
      ok(realEm.hasChanges() === false);
  } 
```

# algorithm - 从无限大列表/数组中的短列表/数组中查找 char 的出现次数

> ID：14525652
> 
> 赞同：1
> 
> 时间：2013-01-25T16:08:52.843
> 
> 标签：algorithm, data-structures

我一直在研究一个需要算法的实际情况，并从中提出了一个通用问题。考虑到有两个数组：-

源[10] = {'a', 'v', 'l', 'r', 'p', 's', 'x', 'd', 'q', 'o' , 'g', '我'}

目标[N] = {'a', 'v', 'l', 'r', 'p', 's', 'x', 'd', 'q', 'o' , 'g', 'm',a', 'v', 'l', 'r', 'p',a', 'v', 'l', 'r', 'p',a',

'v'，'l'，'r'，'p'，a'，'v'，'l'，'r'，'p'，a'，'v'，'l'，'r'， 'p',a', 'v', 'l', 'r', 'p',a', 'v', 'l', 'r', 'p',a', 'v',

'l', 'r', 'p',a', 'v', 'l', 'r', 'p', ....}

我们需要有一个有效的算法来找到来自 Source 中的字符在 Target 中的出现频率。

我曾想过散列完整的目标列表，然后遍历源并在散列列表中进行查找。人们可以评论/验证该方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:42:49.760

如果您的字符集受到合理限制，您可以使用字符代码作为计数数组的索引。假设您有 16 位字符。你可以这样做：

```
int[] counts = new int[65536];
foreach (char c in Target)
    counts[c]++; 
```

有了手中的数组，您可以通过从数组中`counts`查找代码轻松找到频率。`Source``counts`

这个解决方案尽可能快地渐近，但它可能不是内存效率最高的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:16:03.190

我不知道哈希列表是什么，所以我不能对此发表评论。为了提高效率，我建议将目标数组转换为多集。[Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)有一个很好的实现（尽管 Java Collections Framework 没有）。[Apache Commons](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/Bag.html)（称为 a ）也是如此`Bag`。然后，您可以简单地遍历源并查找多重集中每个元素的频率。如[该线程](https://stackoverflow.com/questions/8860770/guava-multiset-vs-map)中所述，使用多重集比使用`HashMap`从元素到频率更容易，尽管它确实需要使用第三方库。

# url - 从网页名称中删除扩展名 html

> ID：14525657
> 
> 赞同：0
> 
> 时间：2013-01-25T16:09:01.707
> 
> 标签：url, web

当我输入地址栏时，我网站的第一页称为 index.html： `http://websit/index.html`它有效

**但**

现在我的老板问我他想要这个名字 `http://websit/index`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:12:38.947

标准的 Web 服务器行为是将“index.html”文件加载为路径调用的根文件。这意味着：

```
http://websit/ 
```

与此相同：

```
http://websit/index.html 
```

这样做（如下）只会导致更多问题，因为索引似乎是路径而不是文件：

```
http://websit/index 
```

因此，如果您想清理任何东西，只需提及`http://websit/index.html`只是`http://websit/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:30:48.500

如果您使用的是 Apache，则需要检查是否启用了 Mod Rewrite，然后阅读有关 .htaccess 和 mod rewrite 的文章。

解决方案：在根目录（index.html 所在的位置）上创建一个名称为 .htaccess 的文件。然后，复制此代码（将其粘贴到 .htaccess 文件中）并使用没有 .html 的 website/index 再次测试它

```
#comments
RewriteEngine On

#base directory for this file, if its root, then its one /, if its test then its /test
RewriteBase /

#if the URL for the resource that requested is not exist as file
RewriteCond %{SCRIPT_FILENAME} !-f

#if the URL for the resource not exist as directory
RewriteCond %{SCRIPT_FILENAME} !-d

#then it anything types after the website/() redirect it to ().html
RewriteRule ^(.*)$ $1.html [NC,L]

#the ^ and $ used for matching whole string (from beginning to end)
#the () used for grouping matching strings
#the . used for matching any character
#the $1 represents the match group, for our example we used one () then its $1 
```

[1] [http://httpd.apache.org/docs/current/howto/htaccess.html](http://httpd.apache.org/docs/current/howto/htaccess.html)

# wcf - SSL 安全 WCF SOAP 服务中的非 SSL 操作

> ID：14525661
> 
> 赞同：1
> 
> 时间：2013-01-25T16:09:30.147
> 
> 标签：wcf, soap, wcf-security, wshttpbinding

我对此感到非常困惑。

我有一个 SOAP 客户端，正在与某处的服务器通信。我正在使用带有 wsHttpBinding 的 WCF 与之交谈。

在我的 app.config 中，端点地址设置为

```
<endpoint address="https://something.example.com/someService" 
```

由于这是一个 https 地址并且我使用的是传输绑定，所以一切都很愉快。

但是，在为此服务提供的 WSDL 中，指定了一些操作，例如：

```
<soap:operation soapAction="http://something.example.com/someService/someAction" style="document" /> 
```

请注意该操作如何不使用 HTTPS。这有什么关系？您可以在一项服务中混合和匹配传输吗？这不会引起问题吗？你怎么能和这样的服务说话？我的客户端应用程序是否必须根据操作是否具有 HTTPS 来使用不同的端点配置？

# jquery - 任何人都知道一个 jQuery 插件，它通过比较锚散列和导航返回页面？

> ID：14525668
> 
> 赞同：1
> 
> 时间：2013-01-25T16:09:55.783
> 
> 标签：jquery, html, url, jquery-plugins, navigation

这是网站[http://www.numidia.it/](http://www.numidia.it/)它有一个非常酷的导航，我想知道是否有一个插件可以做类似的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:15:05.873

[jQuery 地址插件](http://www.asual.com/jquery/address/)可以做到这一点，此外，您可以定义不带哈希（#）的 url。

这是一个例子：[http ://www.asual.com/jquery/address/samples/express/portfolio](http://www.asual.com/jquery/address/samples/express/portfolio)

但是如果你想自己做，你可以`window.location.hash`使用价值。

```
<a href="#/home">Home</a>
<a href="#/about">About</a>

<div class="pages homePage">...</div>
<div class="pages aboutPage">...</div>

//response for page load
var anchor = window.location.hash;
if( anchor === '#/home' ) {
   $('.pages').hide();
   $('.homePage').show();
}else if( anchor === '#/about' ) {
   $('.pages').hide();
   $('.aboutPage').show();
}

//response for a clicked
$('a').click(function() {
    var target = $(this).attr('href');
    if( target === '#/home' ) {
       $('.pages').hide();
       $('.homePage').show();
    }else if( target === '#/about' ) {
       $('.pages').hide();
       $('.aboutPage').show();
    }
}); 
```

# android - 带有源代码的android eclipse调试jar文件

> ID：14525672
> 
> 赞同：0
> 
> 时间：2013-01-25T16:10:10.680
> 
> 标签：android, eclipse, debugging, jar

我正在尝试调试带有附加源代码的 jar 文件。我能够逐步调试它，但看不到任何变量值。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:38:03.130

为了查看 Java 字节码中的变量值，需要使用调试符号对其进行编译。jar 的典型发布版本不会包含此调试信息。

相关：[为什么有些java库编译时没有调试信息](https://stackoverflow.com/questions/1872491/why-are-some-java-libraries-compiled-without-debugging-information)

通常，在这种情况下，我会在断点之前在自己的代码中创建一个调试变量，例如：

```
...
int debugVal = libraryClass.getValueIWantToDebug();
System.out.println("Breakpoint");
... 
```

然后，您将在自己的代码中获得该值，在调试期间可以访问该值。

# n2cms - N2CMS：限制某个类型的 ContentItem 数量低于另一个 ContentItem

> ID：14525673
> 
> 赞同：3
> 
> 时间：2013-01-25T16:10:12.417
> 
> 标签：n2cms, n2

我正在使用 N2CMS，并且我有两个从 ContentItem 继承的类——比如 HomePage 和 NewsPage。NewsPage 设置为仅出现在 HomePage 下（使用 RestrictParents 属性）：

```
[RestrictParents(typeof(HomePage))] 
```

我可以让它在主页下方有最大数量的新闻页面（在这种情况下为 1）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:45:32.187

答案是您可以使用

```
[RestrictCardinality] 
```

属性。在我在问题中给出的示例中，您将使用

```
[RestrictCardinality(ComparableType=typeof(NewsPart), MaximumCount=1)] 
```

# .net - 我可以在 MS 应用程序块中使用 Ninject 代替 Unity 吗？

> ID：14525674
> 
> 赞同：0
> 
> 时间：2013-01-25T16:10:13.157
> 
> 标签：.net, ninject, unity-container, application-blocks

我正处于大型应用程序设计的早期阶段。使用 Microsoft 企业应用程序块（缓存、安全性、日志记录）将更容易实现许多功能。过去（过去两年）我曾使用 Ninject 来满足我的 DI 需求，并且与其他 DI 容器相比，它的易用性和让其他开发人员加快速度非常满意。

有人用 Ninject 换了 Unity Block 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:28:18.563

如果您使用的是 Enterprise Library 5，则可以使用挂钩插入您想要的任何 DI 容器。早期版本没有这些钩子。

唯一的例外是策略注入块；那个人对 Unity 有很强的依赖。

话虽如此，我不知道是否有人为 ENtlib 5 编写了 NInject 的适配器层。

# python - Python、记事本和丹麦字母

> ID：14525676
> 
> 赞同：0
> 
> 时间：2013-01-25T16:10:15.220
> 
> 标签：python

> **可能重复：**
> [Mac os X 终端中的 Python unicode](https://stackoverflow.com/questions/918294/python-unicode-in-mac-os-x-terminal)

我使用记事本++编写python程序。当我用丹麦语写作时，我们经常使用æ、ø 和 å。但是在我的程序中，当我打印到屏幕上时，这些字母是不可读的。

我试过这个：

```
# -*- encoding: utf-8 -*-
print "æøæææ" 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:22:14.437

我尝试了你的脚本，它通过 SSH 在我的 Linux 服务器上运行良好，但在 Windows CMD 上它搞砸了。

```
C:\py>python test.py
├ª├©├ª├ª├ª 
```

可悲的是，它看起来永远不会真正在 Windows 上运行（至少是当前版本），请在此处对问题的评论中阅读更多内容：[How to print a unicode string in python in windows cmd](https://stackoverflow.com/questions/6725249/how-to-print-a-unicode-string-in-python-in-windows-cmd "如何在 Windows cmd 中的 python 中打印 unicode 字符串")

# spring - 登录时清除 Spring 会话？

> ID：14525677
> 
> 赞同：3
> 
> 时间：2013-01-25T16:10:17.847
> 
> 标签：spring, session, spring-security

**更新**：我预计这个问题与我使用的特定 Spring 版本有关，但 Rob 的回答表明它可能与我的环境有关。我们已经找到了解决这个特定问题的方法（一个在登录时手动清除会话的过滤器），所以我将 Rob 的答案标记为正确。

* * *

在我的 Spring 应用程序中，我的会话在登录之间保持不变。我希望在登录时清除会话。

我正在使用 Spring Security 2.0.4（不要问），我的安全配置看起来像这样

```
<security:http ...
session-fixation-protection="newSession">
...
        <security:logout invalidate-session="true" logout-success-url="/login.html" />
</security:http> 
```

我的印象是*session-fixation-protection="newSession"*会清除用户登录时的会话。另一个有趣的点是会话在注销*时*被清除，因此*invalidate-session="true"*具有预期的效果。

测试时，我使用以下方法：

```
@RequestMapping(value = "writeSession")
String writeSession(HttpServletRequest request) {
  request.getSession().setAttribute("username", MySecurityService.getLoggedInUsername());
  ...
}

@RequestMapping(value = "readSession")
String readSession(HttpServletRequest request) {
  log.info("Current username: " + request.getSession().getAttribute("username");
  ...
} 
```

然后我：

1.  以 user1 身份登录
2.  访问 writeSession（将会话用户名设置为“user1”）
3.  访问 readSession（日志输出：*当前用户名：user1*）
4.  以 user2 身份登录（无需注销）
5.  访问 readSession（日志输出：*当前用户名：**user1***）

请注意，如果我在第 3 步和第 4 步之间注销，我会得到预期的结果（*当前用户名：null*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:36:23.427

我创建了一个示例，证明通常这应该有效。有关工作示例，请参阅[此 git 存储库的 so-clear-spring-session-on-login 分支。](https://github.com/rwinch/spring-security-sample/tree/so-clear-spring-session-on-login)

根据您的其余配置，可能有一些事情可能会导致您出现问题。

*   您可以分享其余的 Spring Security 配置吗？例如，如果您在 HTTP 和 HTTPS 之间切换，它可能会切换正在使用的会话。您可以参考[Spring Security FAQ](http://static.springsource.org/spring-security/site/faq.html#faq-session-management)以获取有关会话可能出现问题的更多详细信息。

*   MySecurityService 的实现是什么样的？

*   你的 web.xml 是什么样的？

# android - 键盘通知

> ID：14525678
> 
> 赞同：0
> 
> 时间：2013-01-25T16:10:18.617
> 
> 标签：android, android-cursoradapter

我有一个变量“余额”，我在单击一个按钮时将其初始化为“0”，该按钮调用了我的自定义适配器“MyAdpater”。我的活动中有一个 EditText。当我隐藏/显示键盘时，我不会收到有关它的通知。我已经徒劳地尝试了 configChnage 方法。

```
 @Override
 public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    Toast.makeText(Ledger.this, "Config Change has been called.", Toast.LENGTH_SHORT).show();
    // Checks whether a hardware or on-screen keyboard is available
    balance = 0;
        ourCursor = db.getLedger(et.getText().toString(), from.getText()
                .toString(), to.getText().toString());

        id.clear();
        adapter = new MyAdapter(Ledger.this, ourCursor, false);
        lv.setAdapter(adapter);
} 
```

（当出现键盘（dis）时不会调用此方法，因为 Toast 没有出现。）

这是我的代码

```
class MyAdapter extends CursorAdapter {
    public MyAdapter(Context context, Cursor c, boolean autoRequery) {
        super(context, c, autoRequery);
        // TODO Auto-generated constructor stub
        balance = 0;
    }

    @Override
    public void bindView(View view, Context ctxt, Cursor c) {
        // TODO Auto-generated method stub

        TextView tv1 = (TextView) view.findViewById(R.id.tvAB1);
        TextView tv2 = (TextView) view.findViewById(R.id.tvAB2);
        TextView tv3 = (TextView) view.findViewById(R.id.tvAB3);
        TextView tv4 = (TextView) view.findViewById(R.id.tvAB4);
        TextView tv5 = (TextView) view.findViewById(R.id.tvAB5);
        String date = c.getString(1);
        tv1.setText(date.substring(6, 8) + "/" + date.substring(4, 6) + "/"
                + date.substring(0, 4));
        tv2.setText("" + c.getDouble(3));
        tv3.setText("" + c.getDouble(4));
        balance = balance + c.getDouble(4) - c.getDouble(3);
        tv4.setText("" + (balance));
        tv5.setText((c.getDouble(3) > c.getDouble(4) ? "CR." : "DR."));
    }

    @Override
    public View newView(Context ctxt, Cursor c, ViewGroup parent) {
        // TODO Auto-generated method stub
        LayoutInflater inflater = getLayoutInflater();
        return inflater.inflate(
                R.layout.text_view_for_list_view_account_balance, parent,
                false);
    }
} 
```

当我显示/隐藏键盘时，它不会初始化我的变量“balance = 0”的值，因此，每次显示/隐藏键盘时，balance 的值都会不断增加。每当我显示/隐藏键盘时，我都想设置 balance = 0 。有什么方法可以做到这一点吗？

请帮忙。谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:20:02.060

在[ListView 的世界](https://www.youtube.com/watch?v=wDBM6wVEO70)（或[TurboCharge Your UI](https://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)）中，Android 的 Romain Guy 声明您不能依赖适配器的构建顺序。它可以自上而下、自下而上地构建，或者从中间的某个地方开始并朝任一方向移动；这种设计选择与效率有关。

所以你需要找到一种`balance`不依赖于构建顺序的计算方法......

* * *

此外，您当前的适配器不支持滚动，因为`newView()`不会为数据库中的每一行调用。`newView()`在您的 ListView（或 Spinner 等）中调用的时间数与用户屏幕上适合的行数有关。

# jsf - 多个支持 bean 属性的 JSF 输入

> ID：14525679
> 
> 赞同：3
> 
> 时间：2013-01-25T16:10:19.150
> 
> 标签：jsf, tags, backing-beans

在某些情况下，我有一个 JSF 页面，对于单个输入，我想在支持 bean 上设置多个值，而不在支持 bean 中执行代码。

我可以设置一个值：

```
 <h:selectOneRadio id="selectMembershipLevel" class="TODO_SELECT" 
value="#{joinBackingBean.map[joinBackingBean.map.primary_memberInfo_membershipType_code]}">
 <f:selectItem id="basic" itemLabel="#{overrideMsg.pbBasic}" itemValue="B" />
 <f:selectItem id="plus" itemLabel="#{overrideMsg.pbPlus}" itemValue="P" />
 <f:selectItem id="plusRV" itemLabel="#{overrideMsg.pbPlusRV}" itemValue="RV" /> 
```

但是，如果我想一次设置多个，可以在 JSF 页面上完成吗？

```
#{joinBackingBean.map[joinBackingBean.map.primary_memberInfo_membershipType_code]}
#{joinBackingBean.map[joinBackingBean.map.primary_memberInfo_membershipType_desc]}//Bdesc
#{joinBackingBean.map[joinBackingBean.map.primary_memberInfo_membershipType_type]}//Btype 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T18:06:11.633

在第一个输入事件期间通过绑定其他属性`<h:inputHidden>`并使用 JavaScript`change`将这些隐藏输入的值操作为与第一个输入的当前值相同。

这是一个启动示例：

```
<h:form id="form">
    <h:selectOneRadio value="#{bean.input1}" onchange="document.getElementById('form:input2').value = document.getElementById('form:input3').value = this.value">
        <f:selectItem itemValue="one" />
        <f:selectItem itemValue="two" />
        <f:selectItem itemValue="three" />
    </h:selectOneRadio>
    <h:inputHidden id="input2" value="#{bean.input2}" />
    <h:inputHidden id="input3" value="#{bean.input3}" />
    ...
</h:form> 
```

显然，您可以随意重构为 JS 函数或添加一些 jQuery。请记住，如果客户端禁用了 JS，这一切都将不起作用，并且最终用户可以操纵 JS 代码和请求参数。如果您绝对需要值相等，则服务器端解决方案会更加健壮。

# telerik - 无法在 RadGrid 中使用 AsyncPostBackTrigger 下载文件

> ID：14525681
> 
> 赞同：1
> 
> 时间：2013-01-25T16:10:27.350
> 
> 标签：telerik, updatepanel, radgrid

大家好，我在我的应用程序中使用 RadGrid，因为我希望我的 RadGrid 不刷新我在更新面板中有我的 RadGrid，如下所示

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
            <Triggers>
            <asp:AsyncPostBackTrigger ControlID="RadGrid1" EventName="ItemCommand" />
                <%--<asp:PostBackTrigger ControlID="RadGrid1" />--%>
            </Triggers>
            <ContentTemplate>
                <telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="false" OnItemCommand="RadGrid1_ItemCommand"
                    OnNeedDataSource="RadGrid1_NeedDataSource">
                    <MasterTableView Width="950" AutoGenerateColumns="false" DataKeyNames="EmpID" GridLines="None"
                        TableLayout="Auto">
                        <Columns>
                            <telerik:GridBoundColumn DataField="EmpID" HeaderText="Emp ID" ReadOnly="true" HeaderStyle-HorizontalAlign="Left"
                                ItemStyle-HorizontalAlign="Left" UniqueName="EmpID" FilterControlWidth="30px"
                                AutoPostBackOnFilter="true" CurrentFilterFunction="Contains" />
                            <telerik:GridButtonColumn DataTextField="ButtonName" ItemStyle-ForeColor="Blue" CommandName="Generate"
                                ConfirmTextFields="ButtonName" ConfirmTextFormatString="Would you like to  {0} ACH file ?"
                                ConfirmDialogType="RadWindow" Reorderable="false" UniqueName="ButtonName" ConfirmTitle="ACH File">
                            </telerik:GridButtonColumn>
                            <telerik:GridBoundColumn DataField="EmployeeName" HeaderText="Employee Name" ReadOnly="true"
                                HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="Left" UniqueName="EmployeeName"
                                FilterControlWidth="60px" AutoPostBackOnFilter="true" CurrentFilterFunction="Contains" />
                        </Columns>
                    </MasterTableView>
                </telerik:RadGrid>
            </ContentTemplate>
        </asp:UpdatePanel> 
```

当我单击下载按钮时，我无法下载文件，这是我在 Itemcommand 中的代码

```
protected void RadGrid1_ItemCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
    {
        if (e.CommandName == "Generate")
        {
            Response.ContentType = "text/plain";
            Response.AppendHeader("Content-Disposition", "attachment;filename= errorLog.txt");
            Response.AddHeader("content-length", "0");
            Response.Flush();
            Response.End();
        }
    } 
```

有人可以帮我解决这个问题吗`AsyncPostBackTrigger`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:00:45.167

您不能使用 AsyncPostBack 调用 Response。这是 Ajax 框架的限制。

**2013 年 1 月 28 日更新**

由于您使用的是 Telerik，我更喜欢使用 RadAjaxManager。基本上，当单击生成按钮时，它使用常规回发而不是 ajax。在我的示例中，排序仍然使用 ajax。

```
<telerik:RadGrid ID="RadGrid1" AutoGenerateColumns="false" AllowSorting="True" runat="server" 
    OnNeedDataSource="RadGrid1_NeedDataSource" OnItemCommand="RadGrid1_ItemCommand">
    <MasterTableView DataKeyNames="EmpID">
        <Columns>
            <telerik:GridTemplateColumn>
                <ItemTemplate>
                    <asp:Button runat="server" CommandName="Generate" ID="GenerateButton" 
                        Text="Generate" OnClientClick="Generate(this, event); return false;" />
                </ItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridBoundColumn DataField="EmpID" HeaderText="Emp ID" UniqueName="EmpID" SortExpression="EmpID" />
            <telerik:GridBoundColumn DataField="EmployeeName" HeaderText="Employee Name" UniqueName="EmployeeName" />
        </Columns>
    </MasterTableView>
</telerik:RadGrid>
<%-- RadAjaxManager --%>
<telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="RadGrid1">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="RadGrid1" LoadingPanelID="RadAjaxLoadingPanel1" />
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager>
<%-- RadAjaxLoadingPanel --%>
<telerik:RadAjaxLoadingPanel ID="RadAjaxLoadingPanel1" runat="server" Skin="Default">
</telerik:RadAjaxLoadingPanel>
<telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">
    <script type="text/javascript">
        function Generate(sender, e) {
            $find("<%= RadAjaxManager1.ClientID %>").__doPostBack(sender.name, "");
        }
    </script>
</telerik:RadCodeBlock>

public class Employee
{
    public int EmpID { get; set; }
    public string EmployeeName { get; set; }
}

protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    RadGrid1.DataSource = new List<Employee>
        {
            new Employee {EmpID = 1, EmployeeName = "John"},
            new Employee {EmpID = 2, EmployeeName = "Marry"},
            new Employee {EmpID = 3, EmployeeName = "Eric"}
        };
}

protected void RadGrid1_ItemCommand(object sender, GridCommandEventArgs e)
{
    if (e.CommandName == "Generate")
    {
        Response.ContentType = "text/plain";
        Response.AppendHeader("Content-Disposition", "attachment;filename= errorLog.txt");
        Response.AddHeader("content-length", "0");
        Response.Flush();
        Response.End();
    }
} 
```

![在此处输入图像描述](../Images/33a916edff279136f1ba7b115c90829a.png)

# javascript - 根据单元格值隐藏/显示行的jQuery函数

> ID：14525682
> 
> 赞同：-3
> 
> 时间：2013-01-25T16:10:28.907
> 
> 标签：javascript, jquery, html, html-table

我有以下表格布局：

```
Company_Name | Address | Date
------------------------------
Company A     address1   date 
Company A     address1   diff-date
Company A     address1   diff-date 
```

有没有办法隐藏底部的两行，当点击第一行“公司 A”时应该显示这两行？基本上，我希望将公司名称的任何相同值隐藏为公司第一个实例的子行。

编辑：当前代码：

```
<table id="companyTable" class="tablesorter">
    <thead>
    <tr>
        <th>Company_Name</th>
        <th>Address</th>
        <th>Date</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>CompanyA</td>
        <td>Address1</td>
        <td>Date</td>
    </tr>
    <tr>
        <td>CompanyA</td>
        <td>Address1</td>
        <td>Diff-Date</td>
    </tr>
    <tr>
        <td>CompanyA</td>
        <td>Address1</td>
        <td>Diff-Date</td>
    </tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:22:44.163

```
<tr class="company_a">
  ...
</tr>
<tr class="company_a">
  ...
</tr>
<tr class="company_a">
  ...
</tr>
<script>

// hide all company_a
$(".company_a").hide();

// show first company_a
$(".company_a:first").show().click(function() {

  // show all company_a when first company_a is clicked
  $(".company_a").show();

});
</script> 
```

# c++ - getline() 函数正在跳过输入

> ID：14525683
> 
> 赞同：1
> 
> 时间：2013-01-25T16:10:30.590
> 
> 标签：c++, visual-studio-2010, io

> **可能重复：**
> [cin 和 getline 跳过输入](https://stackoverflow.com/questions/10553597/cin-and-getline-skipping-input)

请看下面的代码

**UIHandler.h**

```
#pragma once
class UIHandler
{
public:

    ~UIHandler(void);

    void bookAddWizard();

    //static UIHandler *getInstance();
    static UIHandler& getInstance();

private:
    int bookCounter;

    UIHandler();
}; 
```

**UIHandler.cpp**

```
#include "UIHandler.h"
#include <iostream>

using namespace std;

UIHandler::UIHandler()
{
    {

    }

}

UIHandler::~UIHandler(void)
{
}

UIHandler& UIHandler::getInstance()
{
    static UIHandler uiHandler;
    return uiHandler;
}

void UIHandler::bookAddWizard()
{
        cout << endl << endl << endl;
        cout << "..................Welcome to Book Adding Wizard................." << endl;

        while(true)
        {
            if(bookCounter==10 || bookCounter>10)
            {
                cout << endl << endl;
                cout << "Library is Full. No books will be accepted." << endl;
                mainCaller();
                break;
            }
            string id;
            string bookName;
            string auther;
            string publisher;
            string confirmation;

            cout << endl;

            cout << "Please enter Book ID: ";
            //cin >> id;
            getline(cin,id);
            cout << endl;

            cout << "Please enter Book Name: ";
            //cin >> bookName;
            getline(cin,bookName);

            cout << "Please enter Auther's Name: ";
            //cin >> auther;
            getline(cin,auther);

            cout << "Please enter publisher: ";
            //cin >> publisher;
            getline(cin,publisher);

            books[bookCounter] = new Book();

            books[bookCounter]->setAuther(auther);
            books[bookCounter]->setBookName(bookName);
            books[bookCounter]->setId(id);
            books[bookCounter]->setPublisher(publisher);
            books[bookCounter]->createCopy(bookCounter);

            cout << "Book Added" << endl;
            bookCounter++;
            cout << bookCounter << endl;
            cout << "Do you want to continue? Y/N: ";

            cin >> confirmation;

            if(confirmation=="Y" || confirmation=="y")
            {
                continue;
            }
            else
            {
                break;
            }
        }

} 
```

在这里，由于某种原因，getline 函数跳过了第一个输入。它不显示输入的光标，而是简单地进入第二个输入！它显示在图像中。请帮忙![在此处输入图像描述](../Images/780216150d1895bec069c88e4443ff06.png)

# actionscript-3 - 在 AS3 中，将不同的事件类型合并为一个具有多个值的事件类型是否更有效？

> ID：14525684
> 
> 赞同：1
> 
> 时间：2013-01-25T16:10:35.700
> 
> 标签：actionscript-3, flash, apache-flex, events, actionscript

其中一个是否比另一个更有效？

* * *

1：

A类内：

```
var b:B = new B();
b.addEventListener(B.TYPE1, onType1);
b.addEventListener(B.TYPE2, onType2);
b.addEventListener(B.TYPE3, onType3); 
```

B类内：

```
dispatchEvent(new Event(TYPE1));
.
.
.
dispatchEvent(new Event(TYPE2));
.
.
.
dispatchEvent(new Event(TYPE3)); 
```

* * *

2：

A类内：

```
var b:B = new B();
b.addEventListener(CEvent.TYPE, onCEvent);
.
.
.
private function onCEvent(pEvent:CEvent):void
{
    switch (pEvent.code)
    {
        case B.TYPE1:
            onType1();
            break;

        case B.TYPE2:
            onType2();
            break;

        case B.TYPE3:
            onType3();
    }
} 
```

B类内：

```
dispatchEvent(new CEvent(TYPE1));
.
.
.
dispatchEvent(new CEvent(TYPE2));
.
.
.
dispatchEvent(new CEvent(TYPE3)); 
```

C类事件：

```
public class CEvent extends Event
{
    public static const TYPE:String = "cEvent";

    private var m_strCode:String;
    public function get code():String
    {
        return m_strCode;
    }

    public function CEvent(pCode:String, bubbles:Boolean=false,
            cancelable:Boolean=false)
    {
        super(TYPE, bubbles, cancelable);
        m_strCode = pCode;
    }

    override public function clone():Event
    {
        return new CEvent(m_strCode, bubbles, cancelable);
    }
} 
```

* * *

我的理解是 #2 将比 #1 更节省时间，而现在，我需要真正努力寻找各种方法来使我的代码几乎尽可能快地运行（几乎就像在视频游戏编程）。早些时候我并没有使用第二种技术，所以需要做很多工作来整合散布在我的代码中的不同类型。我需要先询问并确保这是合理的。谢谢！

* * *

**编辑**

发布此消息后不久，我意识到 ActionScript 3 的事件模型因效率低下而受到批评，主要是因为每次创建事件时都会创建一个全新的对象。创建对象本身可能是一个稍微庞大的过程，因此基于一遍又一遍地创建全新对象的事件模型可能会因此而变得相当低效。

在我写这个问题的时候，我不知道这是批评的根源，或者对象创建很慢的事实，从这个角度来看，上述任何一种方法都不能真正解决问题那个问题。（方法 2 最终可能会更糟。）我不想把它作为答案，但我确实希望在这个线程上写下一点上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:14:43.880

1.  你确定*需要*优化吗？
2.  无论哪种方式，差异都可能可以忽略不计。
3.  你`switch`是一个半生不熟的临时实现`EventDispatcher`。你正在尝试发明一辆自行车，它很可能有方形轮子。这是`EventDispatcher`提供添加或删除处理程序的工具，管理调用什么处理程序以及何时调用等的工作。如果您对它的工作方式不满意`EventDispatcher`（为什么？） - 解决它的方法是扩展和更改内部的某些内容它，或编写替代实现。尝试为少数函数的某些特定情况在本地“修复”它会给您的代码带来混乱，使其难以维护，并且就目前而言，更加冗长。

# ios - UITableViewCell indexPathForRowAtPoint 总是返回 nil

> ID：14525685
> 
> 赞同：2
> 
> 时间：2013-01-25T16:10:37.887
> 
> 标签：ios, uitableview

我正在尝试按照 Apple 的示例使用自定义披露按钮。我正在做以下事情

```
- (void) customButtonTapped:(UIButton *)sender event: (id) event{

    NSSet *touches = [event allTouches];
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPosition = [touch locationInView:self.tableView];
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint: currentTouchPosition];
    NSLog(@"index path %@", indexPath);
    if (indexPath != nil)
    {

    }

} 
```

问题是索引路径始终为零。每次都无懈可击。有没有其他人遇到过这个？

**编辑** 这就是我添加按钮的方式

```
 cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
 UIImage *image = [UIImage imageNamed:@"Gear"];
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
 CGRect frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);
 button.frame = frame;
 [button setBackgroundImage:image forState:UIControlStateNormal];
 button.backgroundColor = [UIColor clearColor];
 [button addTarget:self action:@selector(customButtonTapped:event:) forControlEvents:UIControlEventTouchUpInside];
 cell.accessoryView = button; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:49:18.593

调用`indexPathForRowAtPoint:`可以返回`nil`if`self.tableView`是`nil`。

确保`self.tableView`已设置（例如，如果它是 IBOutlet，请确保它已连接到 xib 中的表视图）。

# jquery - 如何在使用 fadeOut 和 appendTo 时结束 setInterval 使用图像

> ID：14525686
> 
> 赞同：1
> 
> 时间：2013-01-25T16:10:37.727
> 
> 标签：jquery

我有一个代码，在它到达最后一个图像（IMAGE5）后我需要停止。目前，它一直旋转回第一张图像，但我希望它有效地计算图像数量并在最后一张图像之后停止执行代码。

对不起，我不太擅长这个，所以婴儿语言会非常有用。提前致谢！

```
<center>
<div class="fadein">
<IMG src="IMAGE" width=500/>
<IMG src="IMAGE2" width=500/>
<IMG src="IMAGE3" width=500/>
<IMG src="IMAGE4" width=500/>
<IMG src="IMAGE5" width=500/>

</div>
<script>
    $(function(){
      $('.fadein img:gt(0)').hide();
      setInterval(function(){$('.fadein :first-child').fadeOut().next('img').fadeIn().end().appendTo('.fadein');}, 6000);    
});
</script>
</center> 
```

那么现在，会是这样吗？

```
<div class="fadein">
 <IMG src="IMAGE" width=500/>
<IMG src="IMAGE2" width=500/>
<IMG src="IMAGE3" width=500/>
<IMG src="IMAGE4" width=500/>
<IMG src="IMAGE5" width=500/>
</div>

<script>
$(function() {
$('.fadein').find('img').each(function() {
    $(this).fadeIn().delay(6000);
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:07:34.207

我不会为此使用 setInterval 。如果您只想一张一张地淡化图像，请执行以下操作。

```
$(function() {
    $('.fadein').find('img').each(function() {
        $(this).fadeIn();
    });
}); 
```

如果您想在每个淡入之间添加延迟，只需在`.delay(6000)`之后添加`.fadeIn()`

# java - 如何在两个对象上调用加法运算符？

> ID：14525687
> 
> 赞同：0
> 
> 时间：2013-01-25T16:10:39.083
> 
> 标签：java, object, polymorphism

在java中，我有两个`Object`支持加法（+）的s，例如两个`int`s或两个`String`s。我如何编写一个函数来真正添加它们而不指定类型？

**注意：**我不想要 C++ 函数模板之类的东西，因为两个操作数只是`Object`s，即我想实现一个函数`add`：

```
Object add(Object a, Object b){
    // ?
} 
```

然后能够做这样的事情：

```
Object a = 1, b = 2;
Object c = add(a, b); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-30T17:20:11.333

我也需要类似的东西，所以我拼凑了一些东西，*希望*返回与内置加法运算符返回的类型相同的类型（除了向上转换为对象）。我使用[java 规范](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)来找出类型转换的规则，特别是第 5.6.2 节 Binary Numeric Promotion。我还没有测试过这个：

```
public Object add(Object op1, Object op2){

    if( op1 instanceof String || op2 instanceof String){
        return String.valueOf(op1) + String.valueOf(op2);
    }

    if( !(op1 instanceof Number) || !(op2 instanceof Number) ){
        throw new Exception(“invalid operands for mathematical operator [+]”);
    }

    if(op1 instanceof Double || op2 instanceof Double){
        return ((Number)op1).doubleValue() + ((Number)op2).doubleValue();
    }

    if(op1 instanceof Float || op2 instanceof Float){
        return ((Number)op1).floatValue() + ((Number)op2).floatValue();
    }

    if(op1 instanceof Long || op2 instanceof Long){
        return ((Number)op1).longValue() + ((Number)op2).longValue();
    }

    return ((Number)op1).intValue() + ((Number)op2).intValue();
} 
```

理论上，您可以使用数值引用类型、数值原始类型甚至字符串来调用此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:31:48.777

如果您只关心参数是“Object”类型，但可以在 add() 方法中指定类型，则可以使用“instanceof”

```
private Object add(Object a, Object b) {
    // check if both are numbers
    if (a instanceof Number && b instanceof Number) {
        return ((Number) a).doubleValue() + ((Number) b).doubleValue();
    }

    // treat as a string ... no other java types support "+" anyway
    return a.toString() + b.toString();
}

public void testAdd()
{
    Object a = 1;
    Object b = 3;
    Object strC = "4";
    Object numResult = add(a, b);
    Object strResult = add(strC, a);
} 
```

# java - Java：使用结果测试在循环内插入到

> ID：14525690
> 
> 赞同：0
> 
> 时间：2013-01-25T16:10:47.233
> 
> 标签：java, sql, sql-server, resultset

当我尝试在我的数据库（MS - SQL）中插入一些数据时，我遇到了一个小问题。我正在使用这段代码（我只是复制粘贴所有代码，所以有人可能会理解我不理解的东西）

```
 try 
              {
                  Connection connection = null;
                  Statement Statement = null;
                  ResultSet ResultSet = null;
                  String query = "";

              // jdbc:sqlserver://[serverName[\instanceName][:portNumber]][;property=value[;property=value]]
              String host = "jdbc:sqlserver://server;databaseName=db";
              String username = "user";
              String password = "pass";
              Statement = connection.createStatement();
              DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
              Calendar cal = Calendar.getInstance();

              DateFormat dateFormat1 = new SimpleDateFormat("dd.MM.yyyy");
              Calendar cal1 = Calendar.getInstance();

              for (int k = 0; k < idArray.length ; k ++ )
              {
                  query = "INSERT INTO Companies (ID,Company,Company2,Company3,Country,ZIP,City,Street," +
                        "Phone,Fax,Email,Internet,CustomerNo,AccountMngr,Icon,AddressSource," +
                        "UserDefined1,UserDefined2,CreatedOn,CreatedBy,ColectedInformation) " +
                        " VALUES ('" + UUID.randomUUID() + "','" + company_nameArray[k] 
                                + "','" + company_name2Array[k] + "','" + company_name3Array[k] + "','DE','"   
                                + zipArray[k] + "','" + cityArray[k] + "','" + streetArray[k] + "','"  
                                + phone_Array[k] + "','" + faxArray[k] + "','" + emailArray[k] + "','"
                                + internetArray[k] + "','" + customer_noArray[k] 
                                + "','d','131','60','Baufinder Import','Import Datum "
                                + dateFormat1.format(cal1.getTime()) + "','" 
                                + dateFormat1.format(cal1.getTime()) + "','d','" 
                                + "cxcxvcx" +  
                                "')";

                  ResultSet = Statement.executeQuery(query);   
              }

              connection.close();
          }
          catch(NullPointerException e)
          {
                System.out.println("NullPointerException");
          }
          catch ( SQLException err ) 
          {
              System.out.println( "SQL Exception:" ) ;

              // Loop through the SQL Exceptions
              while( err != null )
                 {
                  System.out.println( "State  : " + err.getSQLState()  ) ;
                  System.out.println( "Message: " + err.getMessage()   ) ;
                  System.out.println( "Error  : " + err.getErrorCode() ) ;

                  err = err.getNextException() ;
                 }
          }
          catch( Exception e )
          {
              System.out.println( "There is a problem with " + e ) ;
          }

    } 
```

我收到了这个错误：

> SQL 异常：状态：空 消息：该语句没有返回结果集。错误：0

我不明白结果测试的问题。我一直在使用它，因为我尝试从另一个数据库读取数据，现在我尝试将它们插入另一个数据库。此外，所有这些表都不包含空值。

先感谢您：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:14:45.120

使用[Statement#executeUpdate(String)](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)而不是 Statement#execute(query);

```
for (int k = 0; k < idArray.length ; k ++ )
          {
              query = "INSERT INTO Companies (ID,Company,Company2,Company3,Country,ZIP,City,Street," +
                    "Phone,Fax,Email,Internet,CustomerNo,AccountMngr,Icon,AddressSource," +
                    "UserDefined1,UserDefined2,CreatedOn,CreatedBy,ColectedInformation) " +
                    " VALUES ('" + UUID.randomUUID() + "','" + company_nameArray[k] 
                            + "','" + company_name2Array[k] + "','" + company_name3Array[k] + "','DE','"   
                            + zipArray[k] + "','" + cityArray[k] + "','" + streetArray[k] + "','"  
                            + phone_Array[k] + "','" + faxArray[k] + "','" + emailArray[k] + "','"
                            + internetArray[k] + "','" + customer_noArray[k] 
                            + "','d','131','60','Baufinder Import','Import Datum "
                            + dateFormat1.format(cal1.getTime()) + "','" 
                            + dateFormat1.format(cal1.getTime()) + "','d','" 
                            + "cxcxvcx" +  
                            "')";

              int updatedRowCount = Statement.executeUpdate(query);   
          } 
```

笔记：

1.  如果某些数据由用户直接输入，请考虑使用[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)以防止*SQL 注入的可能性。*
2.  如果您需要提高插入性能，请尝试使用[批量插入。](http://viralpatel.net/blogs/batch-insert-in-java-jdbc/)

# jquery - jQuery UI 可排序的表格和模式弹出窗口

> ID：14525695
> 
> 赞同：1
> 
> 时间：2013-01-25T16:11:02.360
> 
> 标签：jquery, jquery-ui, html-table, jquery-ui-sortable

**一**：我需要一个带有可排序行的表（参见 jqueryui.com）。通常，这些示例会为您提供列表项，但很有可能使用表格行来执行此操作。这是我的作业[http://www.foliotek.com/devblog/make-table-rows-sortable-using-jquery-ui-sortable/](http://www.foliotek.com/devblog/make-table-rows-sortable-using-jquery-ui-sortable/)和他的 jsfiddle：http: [//jsfiddle.net/bgrins/tzYbU/](http://jsfiddle.net/bgrins/tzYbU/)他基本上解释了与使表行可排序的修复程序。

**二**：我需要这些可排序的表格行在悬停时弹出模式。看来我只能有一个或另一个。可排序的行移动，但弹出窗口不起作用（[http://jsfiddle.net/anschwem/gAmnQ/2/](http://jsfiddle.net/anschwem/gAmnQ/2/)它在我的末端排序/拖动但不是小提琴）**或**模态弹出窗口工作和排序，但它是列表项。（[http://jsfiddle.net/anschwem/gAmnQ/1/](http://jsfiddle.net/anschwem/gAmnQ/1/)）。然后有一个奇怪的事件，其中一行被踢出表格，只有它的悬停工作（[http://jsfiddle.net/anschwem/gAmnQ/2/](http://jsfiddle.net/anschwem/gAmnQ/2/)）。无论如何，由于正确的间距以及我还需要动态创建新行的事实，我需要行。有任何想法吗？

**这是我的可排序表的 HTML：**

```
<table class="table_177" id="sortable2" class="connectedSortable inputboxes">
<thead>
  <tr>
    <th>Vessel Name</th>
    <th>Hull/IMO No.</th>
  </tr>
</thead>  
  <tr>
    <a class="productsModal1" style="text-decoration:none">
    <td class="ui-state-highlight" style="border-right:none">SS Mary Mae</td>
    <td class="ui-state-highlight" style="border-left:none">12345</td></a>
  </tr>      
  <tr>
    <a class="productsModal1" style="text-decoration:none">
    <td class="ui-state-highlight" style="border-right:none">EMS 234</td>
    <td class="ui-state-highlight" style="border-left:none">12346</td></a>
  </tr> 
</table> 
```

我的隐藏模式的 HTML 和 CSS：

```
<style>
div.productsModal1
{
    display:none;
    position:absolute;
    border:solid 1px black;
    padding:8px;
    background-color:white;
}
a.productsModal1:hover + div.productsModal1
{
    display:block;
/*  animation:fade-out .5s 1;
    animation-transition-property: opacity;*/
}
div.productsModal1:hover
{
    display:block;
/*  animation:fade-out .5s 1;
    animation-transition-property: opacity;*/
}
</style>
    <div class="productsModal1" style="top: 230px; left: 320px; z-index:9999" >
  <table id="menu1">
    <tr>
      <th>Vessel Name</th>
      <th>Vessel Type</th>
      <th>Hull/IMO No.</th>
    </tr>
    <tr>
      <td>SS Mary Mae</td>
      <td>Barge</td>
      <td>12345</td>
    </tr>
  </table>
  </div>
  <div class="productsModal1" style="top: 230px; left: 320px; z-index:9999" >
  <table id="menu1">
    <tr>
      <th>Vessel Name</th>
      <th>Vessel Type</th>
      <th>Hull/IMO No.</th>
    </tr>
    <tr>
      <td>EMS 234</td>
      <td>Barge</td>
      <td>67891</td>
    </tr>
  </table>
  </div> 
```

**和我的代码：**

```
$(window).load(function(){
// Return a helper with preserved width of cells
var fixHelperModified = function(e, tr) {
    var $originals = tr.children();
    var $helper = tr.clone();
    $helper.children().each(function(index)
    {
      $(this).width($originals.eq(index).width())
    });
    return $helper;
};
    $("#sortable2 tbody").sortable({helper: fixHelperModified}).disableSelection();
});//]]> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:00:25.710

*   首先，删除包装的锚标签，`td`因为那是无效的 HTML.. 并将类添加到您的 tr，还使用数据索引来存储默认索引，因为您将移动它们并需要一种方法来关联它们到模态

将 tr 更改为此

```
<tr class="productsModal1" data-index=0>
  <td class="ui-state-highlight" style="border-right:none">SS Mary Mae</td>
  <td class="ui-state-highlight" style="border-left:none">12345</td>
</tr>
<tr class="productsModal1" data-index=1>
  <td class="ui-state-highlight" style="border-right:none">EMS 234</td>
  <td class="ui-state-highlight" style="border-left:none">12346</td>
</tr> 
```

*   不知道为什么 $(window).load 函数不起作用..但是使用 document.ready 函数修复了排序不起作用的小提琴..

*   然后您可以使用 jQuery 显示/隐藏相关的 div

JS

```
$('#sortable2 tbody tr').on({
    mouseenter: function () {
      $('div.' + $(this).attr('class')) // <-- this gets the div.. though the share the same class so can probably just hardcode
            .eq($(this).data('index')) // <-- gets the correct one according to data-index
            .show();
    },
    mouseleave: function () {
      $('div.' + $(this).attr('class'))
            .eq($(this).data('index'))
            .hide();
    }
}); 
```

[小提琴](http://jsfiddle.net/99Mdz/)

另一件事是，如果您不想进入并硬编码数据属性。您可以在 document.ready 函数中编写 use jQuery 并动态添加它。

```
$('#sortable2 tbody tr').each(function(i,v){
     $(this).data('index',i);
}); 
```

# javascript - 与 IE7 和 IE8 的滑块兼容问题

> ID：14525699
> 
> 赞同：-2
> 
> 时间：2013-01-25T16:11:16.033
> 
> 标签：javascript, html, css, internet-explorer-8, slider

我在网上买了一个引导模板[应用](http://wbpreview.com/previews/WB005EL63/)程序。滑块与我的 IE7 和 IE8 不兼容，如下图所示：

![在此处输入图像描述](../Images/e2814acb224996cc1ef45b0ca04acbf7.png)

有谁知道如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:30:01.517

这是解决方案。

添加这个CSS：

.right-side img{background-color: none !important;}

# c# - 需要编写 c# 方法，将我创建的泛型类作为参数并解析出属性的值

> ID：14525700
> 
> 赞同：0
> 
> 时间：2013-01-25T16:11:16.543
> 
> 标签：c#, .net

我正在处理的项目中有许多类，以简化处理需要读入和读出文本文件并分配给程序中的数据对象的数据。我需要编写一个方法来获取这些类中的任何一个并返回值的 csv 字符串。同样，我希望能够返回属性名称的 csv 字符串。我可以为每个类编写特定的方法，但我试图以一种只有一种方法来做到这一点的方式一般地做到这一点。

示例类：

```
public class Student
{
    public string StudentID;
    public string Form;
    public string ScaleForm;
    public double Totalscore;
    public double MatrixRawScore;
    public double ScaleScore;
    public double Theta;
    public int PerformanceLevel;
    public double LowScaleScore;
    public double HighScalescore;
    public string AdminID;
    public string Group;
    public int GroupIndex;
    public string ResponseVector;
} 
```

这是我为实现目标所做的努力，但这显然行不通：

```
 public static string ObjectToCsv<T>(T myObject)
    {
        var fields = typeof(T).GetProperties();
        var objectString = "";

        foreach (PropertyInfo prop in fields)
        {
            objectString = prop.GetValue(myObject, null).ToString() + ',';
        }
        objectString.TrimEnd(',');
        return objectString;
    } 
```

当我的代码运行此方法时，PropertyInfo[] 的长度为 0，没有 PropertyInfo，因此该方法返回一个空白字符串。关于我可能需要做些什么来完成这项工作的任何想法？

编辑代码块以反映以下建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:14:51.377

我认为您缺少获取属性的代码行（并初始化您的字段变量）

```
typeof(T).GetProperties(); 
```

在您的情况下，您需要添加以下内容：

```
var fields = myObject.GetType().GetProperties(); 
```

我会在你的类自动属性中创建字段，如下所示：

```
public class Student
{
    public string StudentID { get; set;}
    public string Form { get ; set;}
    ...
} 
```

请记住，该`GetProperties()`方法有一个重载，可以`BindingFlags`在返回的属性上添加约束。

*   您必须指定 BindingFlags.Instance 或 BindingFlags.Static 才能获得回报。

*   指定 BindingFlags.Public 以在搜索中包含公共属性。

*   指定 BindingFlags.NonPublic 以在搜索中包含非公共属性（即私有、内部和受保护的属性）。只返回基类的受保护和内部属性；不返回基类的私有属性。

*   指定 BindingFlags.FlattenHierarchy 以在层次结构中包含公共和受保护的静态成员；不包括继承类中的私有静态成员。

*   BindingFlags.DeclaredOnly 仅搜索在 Type 上声明的属性，而不是简单继承的属性

[http://msdn.microsoft.com/en-GB/library/kyaxdd3x.aspx](http://msdn.microsoft.com/en-GB/library/kyaxdd3x.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:43:21.720

你可能想做一些更像这样的事情：

```
 public static string ObjectToCsv<T>(T myObject)
{
    var objectString = "";

    foreach (FieldInfo field in typeof(T).GetFields())
    {
        objectString += field.GetValue(myObject).ToString() + ',';
    }
    return objectString.TrimEnd(',');
} 
```

从您发布的内容来看，您似乎正在处理字段，而不是属性。此外，你会想要 += 你的字符串而不是设置它的值，否则你每次给它一个新字段时都会覆盖它。出于某种原因，TrimEnd() 对我不起作用，但我会把它留在那里。祝你好运！

编辑： TrimEnd() 已修复。

# ant - 如何在 Ant 任务中加载文件列表作为资源？

> ID：14525702
> 
> 赞同：3
> 
> 时间：2013-01-25T16:11:26.297
> 
> 标签：ant, filelist

我已经在网上查看了如何加载包含空格且尚不存在于 Ant 任务的文件列表。

我有一个文件，每行包含一个文件路径，如下所示：

```
dir1/dir2/dir with spaces/file1.js
dir1/dir2/dir with spaces/dir3/file2.js
dir1/file1.js 
```

由于路径有空格，我不能使用：

```
<filelist files="..." /> 
```

这些文件也不存在，所以我似乎无法使用

```
<fileset>
    <includesfile name="..." />
</fileset> 
```

任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T18:48:27.223

您可以为此使用资源列表。例如，如果您的文件列表位于名为“files.txt”的文件中：

```
<resourcelist id="files">
    <file file="files.txt"/>
</resourcelist>

<touch mkdirs="true">
    <resources refid="files" />
</touch> 
```

对我来说，这会产生：

```
[touch] Creating .../filelist/dir1/dir2/dir with spaces/file1.js
[touch] Creating .../filelist/dir1/dir2/dir with spaces/dir3/file2.js
[touch] Creating .../filelist/dir1/file1.js 
```

这样做的原因是 a`<resourcelist>`将读取的文件中的每一行视为单独的资源，因此行分隔符而不是逗号或空格分隔项目。

# c# - Lambda 表达式未按预期运行

> ID：14525706
> 
> 赞同：1
> 
> 时间：2013-01-25T16:11:34.830
> 
> 标签：c#, .net, lambda

我正在尝试构建一个 lambda 表达式，它将一个数组的元素与第二个数组匹配。以下是此查询的简化版本：

```
class Program
{
    static void Main(string[] args)
    {
        string[] listOne = new string[] { "test1", "test2", "test3" };
        MyClass[] listTwo = new MyClass[] { new MyClass("test1") };

        string[] newVals = listOne.Where(p => listTwo.Select(e => e.Name).Equals(p)).ToArray();

        //string[] newVals2 = listOne.Intersect(listTwo.Select(t => t.Name)).ToArray();
    }

    class MyClass
    {
        public MyClass(string name)
        {
            Name = name;
        }
        public string Name {get; set;}
    }
} 
```

我希望`newVals`返回一个包含 1 个值的数组，但它是空的。我意识到取消注释 myVals2 将获得相同的结果，但类列表的根本差异比显示的要大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:14:23.980

您正在使用`Equals`，但您应该使用`Contains`. 您正在检查`IEnumerable<>`是否等于`p`，但您想检查是否`IEnumerable<>`包含`p`，因此请替换：

```
string[] newVals = listOne.
                   Where(p => listTwo.Select(e => e.Name).Equals(p)).
                   ToArray(); 
```

和

```
string[] newVals = listOne.
                   Where(p => listTwo.Select(e => e.Name).Contains(p)).
                   ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:19:18.727

您可能想对`Join`2 个集合执行 a 。

```
var q = 
  listOne
  .Join(
    listTwo,
    l2 => l2,
    l1 => l1.Name,
    (l2, l1) => new { l2, l1, }); 
```

您可以更改选择器（最后一个参数）以满足您的需要，如果它只是 listOne 中的值，例如然后 have `(l2, l1) => l1`。

其他解决方案将起作用，但可能不像您期望的那样。

**在 where 子句中**使用 Linq-Objects Contains 将`listTwo`导致对.**`listOne`**

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T16:14:31.270

尝试这个：

```
string[] listOne = new string[] { "test1", "test2", "test3" };
        MyClass[] listTwo = new MyClass[] { new MyClass("test1") };

        string[] newVals = listOne
                       .Where(p => listTwo.Select(e => e.Name).Contains(p))
                       .ToArray(); 
```

`listTwo.Select(e => e.Name)`是一个`IEnumerable<string>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T16:15:35.787

像这样的东西怎么样：

```
string[] newVals = listOne.Where(p => listTwo.Any(e => e.Name.Contains(p))).ToArray(); 
```

或者更严格地使用`==`而不是`Contains`.

但是，如果您想获得两者之间共有的项目，为什么不直接调用`.Intersect()`??

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T16:21:14.107

您正在尝试执行联接，从技术上讲，您最好简化 linq 语句以使用联接。下面包括一个示例。

```
 static void Main(string[] args)
    {
        string[] listOne = new [] { "test1", "test2", "test3" };
        MyClass[] listTwo = new [] { new MyClass("test1") };

        string[] newVals = (from str1 in listOne
                           join str2 in  listTwo.Select(e => e.Name) on str1 equals str2
                           select str1).ToArray();
        foreach (var newVal in newVals)
        {
            Console.WriteLine(newVal);
        }

        //string[] newVals2 = listOne.Intersect(listTwo.Select(t => t.Name)).ToArray();
    }

    class MyClass
    {
        public MyClass(string name)
        {
            Name = name;
        }
        public string Name { get; set; }
    } 
```**

# google-app-engine - 即使后端正在运行，以后端为目标的 App Engine 任务也会收到 503

> ID：14525709
> 
> 赞同：5
> 
> 时间：2013-01-25T16:11:39.333
> 
> 标签：google-app-engine, task-queue

许多任务无法执行，因为它们从目标后端获得 503。这很奇怪，因为大多数任务都会执行，但似乎如果它得到 503 一次，它总是会得到 503。

我尝试手动运行任务，并且后端处于活动状态并正在服务，但如果任务之前因 503 失败，它将再次失败并当场出现 503。

有什么线索吗？

# html - 如何强制菜单项适合列宽？

> ID：14525710
> 
> 赞同：0
> 
> 时间：2013-01-25T16:11:39.507
> 
> 标签：html, css, web-applications

我有一个这样的左侧菜单：

```
 <table table-layout="fixed" width="800px">
        <tr valign="top">
            <td width="140px" overflow="hidden">
                 <div class="link-list">
                    <ul class="tablist">
                        <li> <a href="/url1/">Short</a> </li>
                        <li> <a href="/url2/">MediumItem</a> </li>
                        <li> <a href="/url3/">ThisIsALongWidthItem</a></li>
                    </ul>
                </div>
            </td>  
            <td>
                  the page main content here                                        
            </td>      
        </tr>   
    </table> 
```

CSS是这样的：

```
.tablist 
{
list-style:none; 
height:2em;
padding:0; 
margin:0; 
border: none;
white-space:nowrap;
}

.tablist li 
{
float:left; 
margin-right:0.13em;     
}

.tablist li a 
{
display:block;
padding:0.5em 3em;    /*I'm trying to set this value*/
text-decoration:none;
border:0.06em solid #000;
border-bottom:0;
} 
```

我想让项目填满左列的整个宽度。当将填充设置为较小的值时，它们会在右侧留下空间，因为项目的宽度不同。因此，我试图将其设置为较大的值（希望它可以填充空白空间），但它们超出了列边距并与右侧 col 的内容混合。如何将其分隔为列宽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:18:28.593

使用常规盒子模型很难考虑填充和边框，因为它们被添加到声明的宽度中，因此您必须进行计算以从宽度中减去它们。最好的选择是回到原来的 IE 盒子模型，它在宽度中包括填充和边框（所以当你声明宽度 100% 时，你知道它总是 100%，包括边框和填充）。为此，请使用以下 CSS 规则集：

```
* {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:21:29.157

您可以在 li 上放置一个最大宽度，以确保它不会进一步成为父容器。

```
max-width: 100%; 
```

我不确定这是否是你的意思。如果您可以设置一个 JSFiddle 来模拟该问题，那将是最好的。

看起来您可能在同时使用 li 和 a 作为宽度时遇到了问题。

# coldfusion - 在 FW1 中将子域连接到子系统

> ID：14525712
> 
> 赞同：2
> 
> 时间：2013-01-25T16:11:49.990
> 
> 标签：coldfusion, coldfusion-9, fw1

我在我的应用程序中设置了一个子系统：

```
example.com/index.cfm/subsys:foo/bar 
```

我想要做的是将子域映射到该子系统，以消除 PATH 中对子系统规范的需要

```
subsys.example.com/index.cfm/foo/bar 
```

我们目前通过 IIS6 为我们的 FW1 应用程序提供服务，但可能会迁移到 Apache，因此任何一种解决方案都是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:48:45.943

使用 Apache 的[mod_rewrite](https://httpd.apache.org/docs/current/mod/mod_rewrite.html)您可以执行以下操作：

```
RewriteCond %{HTTP_HOST} ^(subsys)\.example\.com
RewriteRule /index.cfm/(.*) /index.cfm/%1:$1 
```

要使其适用于多个子域/子系统，请在括号内使用管道分隔的列表：

```
RewriteCond %{HTTP_HOST} ^(sub1|sub2|sub3)\.example\.com 
```

要使其适用于*任何*非 www 子域，对于任何域，请使用以下条件：

```
RewriteCond %{HTTP_HOST} ^((?!www\.)\w+)\. 
```

对于 IIS6，您可能需要第三方软件，例如[Helicon Tech 的 ISAPI Rewrite](http://www.isapirewrite.com)，它支持 mod_rewrite 语法。

# python - PyQT 在给定网站上严重崩溃

> ID：14525713
> 
> 赞同：1
> 
> 时间：2013-01-25T16:11:50.897
> 
> 标签：python, segmentation-fault, pyqt

我设法创建并线程化了一个 PyQt 应用程序，以对 url 列表进行一些截图。它工作得非常好，但它总是在某些网站上崩溃（或者至少肯定会崩溃）。

[Softpedia.com](http://www.softpedia.com)就是其中之一。它只是在**loadFinished**事件之前因分段错误而使 Python 崩溃。即使我不使用我的线程应用程序，而是使用“原始”PyQt。

我用[我在网上找到的基于 PyQt 的基本浏览器](https://github.com/Artem-Mamchych/python-PyQt-browser-with-plugins/tree/master/src)进行了测试，我遇到了同样的问题。

有人有想法吗？我开始认为这可能是一个死胡同，这并不是一个好消息。

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:06:38.653

您使用的代码可能存在某种问题，此代码不应引发错误：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui, QtWebKit

class MyWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.barProgress = QtGui.QProgressBar(self)
        self.barProgress.setFixedSize(80, 15)
        self.barProgress.setVisible(False)

        self.barStatus = QtGui.QStatusBar(self)
        self.barStatus.addPermanentWidget(self.barProgress)

        self.webView = QtWebKit.QWebView(self)

        settingsWeb =   [    
                            QtWebKit.QWebSettings.PluginsEnabled
                        ]

        for setting in settingsWeb:
            self.webView.settings().setAttribute(setting, True)

        self.setStatusBar(self.barStatus)
        self.setCentralWidget(self.webView)

        self.webView.loadFinished.connect(self.on_webView_loadFinished)
        self.webView.loadFinished.connect(self.barProgress.hide)
        self.webView.loadStarted.connect(self.barProgress.show)
        self.webView.loadProgress.connect(self.barProgress.setValue)

    @QtCore.pyqtSlot()
    def on_webView_loadFinished(self):            
        QtGui.QMessageBox.information(None, "Info", "Load finished!")  

    def loadUrl(self, url):
        self.webView.load(QtCore.QUrl(url))

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()
    main.loadUrl("http://www.example.com/")

    sys.exit(app.exec_()) 
```

# bash - 在 Unix 中过滤 /etc/passwd

> ID：14525722
> 
> 赞同：3
> 
> 时间：2013-01-25T16:12:21.873
> 
> 标签：bash, unix

我想过滤 的内容`/etc/passwd`，只显示第三列中的值大于的行 `999`。

有没有一种简单的方法可以用一个衬垫做到这一点？我想不写无聊的就去做`for-loop`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T16:17:13.593

这是一个简单的方法：

```
awk -F: '$3 > 999' /etc/passwd 
```

这`awk`与字段分隔符一起使用`:`并指示它在第三个字段大于 999 时打印该行。如果您只想打印第一个字段（用户名）或基于字段构造一些新行，这是一个起点：

```
awk -F: '{if ($3 > 999) print "user", $1, "uid", $3}' /etc/passwd 
```

# sql-server-2008 - SQL Server 2008 幽灵备份

> ID：14525724
> 
> 赞同：0
> 
> 时间：2013-01-25T16:12:29.470
> 
> 标签：sql-server-2008

最近安装了 sqlserver 2008。发生了卸载和重新安装。出于某种原因，我现在有一个“幽灵”备份发生在我的 2 个数据库上。我在尝试“tweek”备份时创建并删除了维护计划，所以我认为这已经被破坏了。当前没有将这些数据库备份到进行备份的路径的维护计划。我有一份正在运行以删除这些额外副本的工作，但我想知道如何终止这项工作。任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:29:05.353

如果备份是定期进行的，那么可能会有一个 SQL 代理作业从某事遗留下来。查看服务器上的作业，看看它们中是否有任何正在运行备份。

一些常见的事情是：

*   以“.Subplan_1”结尾的作业（或不同于 1 的数字）
*   运行 SSIS 包且包路径以“维护计划”开头的作业

# mysql - 工作人员和服务器之间的 SQLAlchemy 事务隔离

> ID：14525727
> 
> 赞同：0
> 
> 时间：2013-01-25T16:12:39.740
> 
> 标签：mysql, concurrency, sqlalchemy

我有以下问题，使用 SQLALchemy 0.7.8、Flask-SQLAlchemy 0.16 和 MySQL 5.5。

我有一个在服务器 A 上运行的 cron 脚本，它查询表 T 以获取与特定状态匹配的所有行的 id，将这些 id 发送到代理，该代理将其分发给许多其他机器上的工作人员。

工作人员获取 id，查询该表 T 和其他一些表的数据，更新表以将该 id 标记为正在处理，提交事务，并通过 REST API 将这些发送到服务器 X。

一旦服务器 X 完成工作，它会将结果发送到另一个服务器 Y 的另一个 REST API 中的回调。服务器 Y 进行一些处理并将结果保存回表 T。提交之后，它将 id 发送给另一个worker，这可能是在第一步得到它的那个人，并且那个worker现在应该获取一些其他数据并发送回另一个服务，但是它不会在这一步做任何更新。

问题是，在最后一步，worker 没有通过回调获取服务器 Y 更新的数据，而是从更新之前获取数据。

我认为工作人员仍然在它用来首先将数据发送到服务器 X 的会话上，并且没有刷新，因为在它与下一次查询数据之间没有发生提交或回滚，当服务器 Y 被回调时。

在这种情况下，适当的解决方案是什么？到目前为止，我尝试在任务开始时调用 session.commit()，在工作人员查询数据之前，它似乎正在工作，但我对此不太确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:10:34.230

这个问题的讨论发生在[https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/yXSroyVNKYM](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/yXSroyVNKYM)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:08:44.470

问题是长时间运行的事务，虽然它可以通过管理会话而不是使用 Flask 全局 db.session 来解决，但在 Flask-SQLAlchemy 下执行此操作的正确方法是为每个任务调用创建一个新上下文。

所以，而不是：

```
def task(args):
    session = Session(engine)
    try:
       ... do stuff here
        session.commit()
    finally:
        session.close() 
```

它只需要：

```
def task(args):
    with app.app_context():
        ... do stuff here 
```

相关讨论： [https ://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/yXSroyVNKYM](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/yXSroyVNKYM)

# jquery - 约束视图中的弹出窗口

> ID：14525729
> 
> 赞同：0
> 
> 时间：2013-01-25T16:12:47.870
> 
> 标签：jquery, html, css

我知道如何在页面上弹出一个窗口（使用 Jquery），我想要做的是限制页面上弹出的窗口，这样当你向下滚动时它不会向上。“父页面”可能很长，但是当弹出窗口出现时，我希望页面“调整大小”，这样你就不能向下滚动页面。弹出窗口可能会停留在页面的中心。

好吧，我知道我说得不够清楚。让我们看一些例子。

1）课程。如果你曾经从 Coursera 上过一门课程（你绝对应该），当你观看视频时，视频会弹出。但是，当您向下滚动时，视频会上升，甚至会消失在您的视线范围内。这不是我想要的。

2）品脱。当您单击图片时，将弹出一个新窗口，您可以注意到滚动条状态发生了变化。它不再是弹出窗口出现之前的那个。

现在我的弹出窗口有一个绝对位置样式，如下所示：

```
.popup{
position: absolute;
top: 40px;
...
} 
```

那么我应该如何设置弹出窗口的样式以便实现目标？如果我有什么不清楚的地方，请询问。

**编辑**：将弹出窗口固定为这两个答案很好，但是有没有办法根据弹出窗口而不是初始页面滚动？这意味着，如果弹出窗口需要滚动才能看到整个内容，您可以滚动，但如果弹出窗口已经完好无损，则无论初始页面的高度如何，您都无法滚动。

那么有没有办法在下面的答案给出的示例中弹出弹出窗口时使滚动条消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:19:37.147

你是这个意思吗？

```
.popup {
    position: fixed;
    top: 50%;
} 
```

[http://jsfiddle.net/VE76x/1/](http://jsfiddle.net/VE76x/1/)

好吧，它仍然滚动，但弹出窗口保持固定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:39:38.310

这是基于安东尼回答的跨浏览器解决方案。IE 使用绝对位置而不是固定位置。

```
.popup {
    position: fixed;
    top: 50%;
}
<!--[if IE]>
    .popup {
        position: absolute;
        top: 50%;
    }
<![endif]--> 
```

[http://jsfiddle.net/BerkerYuceer/VE76x/2/](http://jsfiddle.net/BerkerYuceer/VE76x/2/)

# javascript - 从请求中接收截断的 javascript

> ID：14525730
> 
> 赞同：1
> 
> 时间：2013-01-25T16:12:52.063
> 
> 标签：javascript, html, truncated

我正在[http://yourworldclocks.juplo.com/](http://yourworldclocks.juplo.com/)上的一个页面上工作。此页面加载一个`/incl/tzs.js`函数`initNames();`在文档就绪中定义和调用的位置。FireBug 说这个函数没有定义，但是在`tzs.js`.

当我查看请求时，它返回 465,6 KB，但`tzs.js`在服务器上是 701.82 KB。我没有看到其他错误消息。

我以前从未见过那个错误。我已经重置了提供商的帐户并重新加载了网站，但我仍然遇到同样的问题。有谁知道发生了什么？有任何想法吗？谢谢。

**PS：**该网站在 15 分钟前运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:25:15.827

重新启动 Firefox 使问题消失。虽然不知道是什么原因造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-22T10:34:18.960

遇到类似的行为，深入挖掘发现这是 HTTP 标头的怪异之处。就我而言，我使用的是 nginx；不确定您在哪个服务器上。问题是，为了为我的资源定义 gzip 压缩，我启用了如下压缩 `# gzip settings gzip on; gzip_min_length 900; gzip_buffers 4 32k; gzip_types application/x-javascript text/xml text/css application/json; gzip_vary on; # gzip settings end`

这里重要的考虑因素是线路`gzip_min_length 900;`。这指示 nginx 如果内容大小小于 900 字节，则不要压缩该资源。

我的文件大小是 506 字节（小于 900），所以 nginx 没有压缩它。但是，它发送的`Content-Length`资源好像它实际上*已经*压缩了它（566 字节）。（是的，压缩时资源大小实际上增加了。对于较小的文件，这是可以预料的，这就是为什么`gzip_min_length`首先有一个指令的原因）

所以为了解决这个问题，我简单地将阈值降低`gzip_min_length`到 100。现在 nginx 压缩文件（它稍微膨胀到 566 字节），并发送正确的`Content-Length`标头（566 字节）。

希望这对某人有帮助！

# facebook - Facebook。致命错误：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息

> ID：14525731
> 
> 赞同：2
> 
> 时间：2013-01-25T16:12:55.280
> 
> 标签：facebook, facebook-graph-api, access-token, fatal-error

使用我的应用程序在 facebook 上的管理员帐户，我的应用程序可以正常工作，但使用其他帐户时出现错误：`Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user.` 我在使用其他应用程序之前遇到过这个问题（在用户的墙上发布文本），但在我添加后修复 `$user = $facebook->getUser();`了这里有什么问题？我已添加`offline_access`权限...请帮助我，如果可以的话，非常感谢。

```
<?php
    require_once('images/Facebook.php');

      $facebook = new Facebook(array(
        'appId'  => '456080124457246',
        'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
      ));
      $user_profile = $facebook->api('/me','GET');
    $accessToken = $facebook->getAccessToken();

      # Get User ID
      $user = $facebook->getUser();
      $facebook->setAccessToken($accessToken);
      $facebook->api(456080124457246);

     if ($user) {
        try {

      # Photo Caption
      $photoCaption = $user_profile['name'] . ' patarimų plaukams sužinojo čia http://goo.gl/otwhf';

      # Absolute Path to your image.
      $imageUrl = 'http://padekime.wu.lt/plaukai/images/PlaukaiNeuzvedus.jpg'; // Example URL

      # Post Data for Photos API
      $post_data = array(
          'message' => $photoCaption,
          'url' => $imageUrl

      );

          $apiResponse = $facebook->api('/me/photos', 'POST', $post_data);

      } catch (FacebookApiException $e) {
        error_log($e);
      }
    } else {
        $loginUrl = $facebook->getLoginUrl( array(
            'scope' => 'publish_stream,photo_upload'
        ));
        echo("<script>top.location.href = '" . $loginUrl . "';</script>");
      }
    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T02:56:32.147

在这种情况下，它甚至没有到达你的 $facebook->getUser() 调用——它一到达这一行就会抛出异常：

```
$user_profile = $facebook->api('/me','GET'); 
```

$facebook->api() 使用起来有点棘手，因为如果它不知道“/me”是谁，它会立即抛出异常......即使你稍后尝试修复它。

我认为，诀窍是将整个事物包装在一个 try...catch 块中。像这样：

```
<?php

require_once('images/facebook.php');

$facebook = new Facebook(array(
  'appId'  => '456080124457246',
  'secret' => 'xxxxx',
));

try {
  $user_profile = $facebook->api('/me','GET');
  # Get User ID
  $user = $facebook->getUser();

 if ($user) {
    try {
  # Photo Caption
  $photoCaption = $user_profile['name'] . ' patarimų plaukams sužinojo čia http://goo.gl/otwhf';

  # Absolute Path to your image.
  $imageUrl = 'http://padekime.wu.lt/plaukai/images/PlaukaiNeuzvedus.jpg'; // Example URL

  # Post Data for Photos API
  $post_data = array(
      'message' => $photoCaption,
      'url' => $imageUrl

  );

  $apiResponse = $facebook->api('/me/photos', 'POST', $post_data);

  } catch (FacebookApiException $e) {
    error_log($e);
  }
} else {
    $loginUrl = $facebook->getLoginUrl( array(
        'scope' => 'publish_stream,photo_upload'
    ));
    echo("<script>top.location.href = '" . $loginUrl . "';</script>");
  }      

} catch (Exception $e) {
    $loginUrl = $facebook->getLoginUrl( array(
        'scope' => 'publish_stream,photo_upload'
    ));
    echo("<script>top.location.href = '" . $loginUrl . "';</script>");
}

?> 
```

* * *

这会立即将用户重定向到登录 url，然后返回所有内容。您不必使用此设置设置 accessToken。

这实际上可能会不必要地重复某些功能，但希望它是一个开始。

顺便说一句，[offline_access 权限正在逐步淘汰。](https://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T09:35:23.460

我停止使用“我”关键字来获取登录用户的个人资料。而不是 $facebook->api('/me','GET')，我改为 $facebook->api('/用户的 facebook ID','GET');

这减少了第二次尝试捕获的需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T00:32:04.437

如果你这样做

if (!empty($user)) {}

那应该有帮助...

# sql - 如何在 SQL Server CE 中更改列的类型？

> ID：14525733
> 
> 赞同：4
> 
> 时间：2013-01-25T16:13:03.457
> 
> 标签：sql, sql-server-ce

我想更改 SQL Server Compact Edition 数据库中表列的类型，但似乎该语句

```
ALTER TABLE [table name] modify [column name] [new type] 
```

不工作（VS2010 给了我错误：“不支持 ALTER TABLE SQL 构造或语句。”）。

我的原始类型是 INT，我想将其更改为 BIGINT。

SQL Server CE 完全不支持它还是我必须执行另一种查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:16:54.367

您尚未说明“不起作用”的确切含义，但根据[联机丛书](http://msdn.microsoft.com/en-us/library/ms174123%28v=sql.90%29.aspx)，语法应该`ALTER TABLE [table name] ALTER COLUMN [column name] [new type]`与 SQL Server 的任何其他实例一样。

但是，如果新数据类型不支持列中的数据，则会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:15:19.930

另一种方法是创建一个新表，然后将当前表的值插入新表，然后删除旧表。然后重命名新的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:28:14.547

不要忘记，如果其中的数据与新的 COLUMN 类型冲突，则不能 ALTER COLUMN。例如：COLUMN 类型是 VARCHAR2 并且有符号，你想 ALTER 到 NUMBER。或者数据类型是 VARCHAR2(20) 并且您想更改为 VARCHAR2(5) 并且字符串长度超过 5 个符号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T17:03:20.763

事实上，Visual Studio 似乎是我的问题的根源，通过使用[CompactView](http://sourceforge.net/projects/compactview/)程序，查询

```
ALTER TABLE [table name] ALTER COLUMN [column name] [new type] 
```

工作并解决了我的问题。：） 非常感谢你的帮助 ！

# ruby-on-rails - 将控制器中的 url 参数哈希传递给另一个方法，变为 nil

> ID：14525734
> 
> 赞同：3
> 
> 时间：2013-01-25T16:13:07.107
> 
> 标签：ruby-on-rails, controller, ruby-on-rails-3.2

我有一个匹配的路由，`/edit_account => accounts#edit`因为没有提供帐户 ID，它应该使用当前用户 ID，并且该`account#edit`方法与`/accounts/[:id]/edit`.

```
class AccountController < ApplicationController
  ...
  def edit
    # This doesn't work:
    params = retrieve_id_if_missing(params)

    # This works:
    # aHash = params
    # params = retrieve_id_if_missing(aHash)
  end

  def retrieve_id_if_missing(params)
    # raise params.inpect => returns nil at this point
    if params[:id].nil? and !logged_in?
      redirect_to root_path
    else params[:id].nil?
      params[:id] = current_user.id
    end
      params
  end
end 
```

我遇到的问题是`params`，当传递给类方法时`retrieve_id_if_missing`，变成`nil`. 但是，如果我分配`params`给另一个变量。例如，`aHash`在将它传递给`retrieve_id_if_missing`它之前，它将包含预期的数据，`{"action" => "edit", "controller" => "account"}`。

我试图寻找一个原因，但没有找到原因，有人可以向我解释为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:23:15.573

你有没有尝试过

```
class AccountController < ApplicationController
  ...
  def edit

    retrieve_id_if_missing

  end

  def retrieve_id_if_missing()
    if params[:id].nil? and !logged_in?
      redirect_to root_path
    else params[:id].nil?
      params[:id] = current_user.id
    end
      params
  end
end 
```

我相当确定参数将在该方法的范围内。

无论如何，请为此查看 gem 设计。它应该拥有您想要的一切以及更多

使用设计，您可以使用

```
before_filer :authenticate_user! 
```

在控制器的顶部

[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T22:23:32.700

Ruby 解释器将`params`其视为局部变量，并`nil`在看到赋值时对其进行初始化。这发生在它执行之前`retrieve_id_if_missing`。

这就是为什么在调用方法之前显式地为局部变量赋值可以避免错误的原因，因为`nil`Ruby 的初始化不会发生。

以下示例证明了这一点：

**示例 #1**

```
def foo(bar)
  puts "foo bar: #{bar.class}"
end
bar = foo(bar) # => nil
puts "bar: #{bar.class}"

# Outputs: 
#     foo bar: NilClass 
#     bar: bar: NilClass 
```

**示例 #2**

```
a = a # => nil
puts "a: #{a.class}"

# Outputs: 
#    a: NilClass 
```

**示例#3**

```
a = 123 if a # => nil
puts "a: #{a.class}"

# Outputs: 
#    a: NilClass 
```

参考：

[为什么`a = a` `nil`在 Ruby 中？](https://stackoverflow.com/questions/8908050/why-is-a-a-nil-in-ruby)

> Ruby 解释器在看到对它的赋值时用 nil 初始化一个局部变量。它在执行赋值表达式之前或什至在赋值不可访问时初始化局部变量（如下例所示）。这意味着您的代码用 nil 初始化 a ，然后表达式 a = nil 将评估为右手边的值。
> 
> a = 1 如果为假 a.nil？# => true 第一个赋值表达式没有执行，而是用 nil 初始化 a。

[Ruby：方法被莫名其妙地覆盖并设置为零](https://stackoverflow.com/a/20225072/37966)

> 这是另一个例子：
> 
> a = 123 if a # => nil a # => nil 我们不应该说 if a 因为我们从未设置 a，但是 Ruby 看到 a = 123 并初始化 a，然后得到 if a 在该点 a是零
> 
> 我认为这是解释器的一个怪癖，真的。[Gary Bernhardt 在 wat ( https://www.destroyallsoftware.com/talks/wat](https://www.destroyallsoftware.com/talks/wat) ) 中用 a = a取笑它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:35:18.843

虽然我无法回答为什么您的 params 对象会被提供的代码覆盖，但这里有一些想法。

```
class AccountController < ApplicationController
  before_filter :retrieve_id_if_missing, only: :edit

  def edit
    # You'll find params[:id] prepopulated if it comes here,
    # else the request has been redirect
  end

protected

  # There should be no need to pass the params object around, it should be accessible everywhere
  def retrieve_id_if_missing
    if logged_in?
      params[:id] ||= current_user.id # conditional assignment will only happen if params[:id] is nil
    end

    # Redirect to root if params[:id] is still blank, 
    # i.e. user is not logged in and :id was not provided through route
    if params[:id].blank?
      flash[:alert] = 'You need to be logged in to access this resource.'
      return redirect_to root_url # early return!
    end
  end
end 
```

# python - django 服务：wsgi.py? '不能作为 Python 模块加载'

> ID：14525736
> 
> 赞同：5
> 
> 时间：2013-01-25T16:13:14.890
> 
> 标签：python, django

尝试为 django 管理站点提供服务无济于事。请求时发生 500 内部服务器错误。该错误声称 wsgi.py 无法作为 Python 模块加载。下面查看内部服务器错误和相关文件。

可能相关：起初是尝试使用本地构建的python。另一个系统管理员尝试了 python 的这个 loca 构建，但它不会执行。此本地构建仅适用于我的用户。我说这可能是相关的，但也尝试过使用系统 python。

请求站点时出现 500 内部服务器错误。这是服务器错误日志：

```
[error] [client 208.120.168.168] mod_wsgi (pid=20239): Target WSGI script '/home/andrew/public_html/7DigAdmin/wsgi.py' cannot be loaded as Python module.
[error] [client 208.120.168.168] mod_wsgi (pid=20239): Exception occurred processing WSGI script '/home/andrew/public_html/7DigAdmin/wsgi.py'.
[error] Traceback (most recent call last):
[error] File "/home/andrew/public_html/7DigAdmin/wsgi.py", line 5, in ?
[error] import os
[error] ImportError: No module named os 
```

wsgi.py：

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "/home/andrew/SCTN_7DigAdmin/SCTN_7DigAdmin/SCTN_7DigAdmin.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

wsgi.conf：

```
LoadModule wsgi_module modules/mod_wsgi.so

WSGIPythonHome /usr/local/bin/python2.7 
```

httpd.conf：

```
WSGIScriptAlias /7dadmin /home/andrew/public_html/7DigAdmin/wsgi.py
  <Directory /home/andrew/public_html/7DigAdmin>
     Order allow,deny
     Allow from all
  </Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:52:53.360

我想这个错误是因为你正在设置`WSGIPythonHome`Python bin 目录。正如[mod_wsgi 文档](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPythonHome)所解释的，它应该指向库目录。您的错误是因为正常的库文件（例如`os`模块）不在该 bin 目录中。

但是，该指令仅应在库文件位于意外位置的情况下使用，而您似乎并非如此。您应该完全删除该指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T10:22:07.577

我有一个类似的问题，对我来说这解决了它：

```
chmod a+x wsgi.py 
```

# ios - iOS：Popover 关闭后重绘父视图

> ID：14525740
> 
> 赞同：0
> 
> 时间：2013-01-25T16:13:35.233
> 
> 标签：ios

我有一个父视图控制器和另一个用于弹出框的视图控制器。弹出框已正确关闭。按父视图控制器上的按钮将按预期生成弹出窗口。弹出视图中有一个按钮，当按下该按钮时，应更改父视图上按钮的颜色。

我遇到的问题是，当我按下弹出窗口中的按钮时，它会关闭，但父视图控制器中的按钮不会改变。

我`[self.view setNeedsDisplay]`在父视图控制器中尝试过。我试过在弹出窗口委托方法和`- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController`方法中调用它。后一种方法永远不会被调用。调用前一种方法，但它不会重绘父视图控制器内的视图。

我试图在`performSelector: withObject: afterDelay:`没有运气的情况下为重绘添加延迟。

我试图只重绘不起作用的按钮对象本身。我也打电话`removeFromSuperview`之前打电话`setNeedsDisplay`没有运气。

根据我所做的研究，我觉得有必要声明我没有对这个应用程序进行任何类型的多线程处理。此外，这个小应用程序是用 Storyboard 构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T03:42:49.107

我在使用时犯了一个简单的错误`setNeedsDisplay`。阅读文档后，我意识到`setNeedsDisplay`如果有一些内容更改会重新绘制。我没有正确更改内容，因此它没有触发更改。

我在也关闭了弹出框的委托方法期间更改了按钮的颜色。变色后我打电话`setNeedsDisplay`。这很好。

# php - PHP - 优化 - Levenshtein 距离与优先级

> ID：14525743
> 
> 赞同：5
> 
> 时间：2013-01-25T16:13:47.150
> 
> 标签：php, optimization, levenshtein-distance

我正在尝试用一个小插件来实现[levenshtein 算法。](http://en.wikipedia.org/wiki/Levenshtein_distance)我想优先考虑具有连续匹配字母的值。我尝试使用下面的代码实现我自己的形式：

```
function levenshtein_rating($string1, $string2) {
    $GLOBALS['lvn_memo'] = array();
    return lev($string1, 0, strlen($string1), $string2, 0, strlen($string2));
}

function lev($s1, $s1x, $s1l, $s2, $s2x, $s2l, $cons = 0) {
    $key = $s1x . "," . $s1l . "," . $s2x . "," . $s2l;
    if (isset($GLOBALS['lvn_memo'][$key])) return $GLOBALS['lvn_memo'][$key];

    if ($s1l == 0) return $s2l;
    if ($s2l == 0) return $s1l;

    $cost = 0;
    if ($s1[$s1x] != $s2[$s2x]) $cost = 1;
    else $cons -= 0.1;

    $dist = min(
                (lev($s1, $s1x + 1, $s1l - 1, $s2, $s2x, $s2l, $cons) + 1), 
                (lev($s1, $s1x, $s1l, $s2, $s2x + 1, $s2l - 1, $cons) + 1), 
                (lev($s1, $s1x + 1, $s1l - 1, $s2, $s2x + 1, $s2l - 1, $cons) + $cost)
            );
    $GLOBALS['lvn_memo'][$key] = $dist + $cons;
    return $dist + $cons;
} 
```

您应该注意这`$cons -= 0.1;`是我添加一个值以优先考虑连续值的部分。这个公式将检查一个大型的字符串数据库。（高达 20,000 - 50,000）我已经使用 PHP 内置的基准测试`levenshtein`

```
Message      Time Change     Memory
PHP          N/A             9300128
End PHP      1ms             9300864
End Mine     20ms            9310736
Array
(
    [0] => 3
    [1] => 3
    [2] => 0
)
Array
(
    [0] => 2.5
    [1] => 1.9
    [2] => -1.5
) 
```

基准测试代码：

```
$string1 = "kitten";
$string2 = "sitter";
$string3 = "sitting";

$log = new Logger("PHP");
$distances = array();
$distances[] = levenshtein($string1, $string3);
$distances[] = levenshtein($string2, $string3);
$distances[] = levenshtein($string3, $string3);
$log->log("End PHP");

$distances2 = array();
$distances2[] = levenshtein_rating($string1, $string3);
$distances2[] = levenshtein_rating($string2, $string3);
$distances2[] = levenshtein_rating($string3, $string3);
$log->log("End Mine");
echo $log->status();

echo "<pre>" . print_r($distances, true) . "</pre>";
echo "<pre>" . print_r($distances2, true) . "</pre>"; 
```

我认识到 PHP 的内置函数本质上可能总是比我的要快。但我想知道是否有办法加快我的速度？

所以问题是：有没有办法加快速度？我在这里的替代方法是运行 levenshtein，然后搜索其中最高的 X 结果并另外确定它们的优先级。

* * *

根据 Leigh 的评论，复制 PHP 的内置形式的 Levenhstein 将时间降低到 3 毫秒。（编辑：发布带有连续字符扣除的版本。这可能需要调整，似乎可行。）

```
function levenshtein_rating($s1, $s2, $cons = 0, $cost_ins = 1, $cost_rep = 1, $cost_del = 1) {
    $s1l = strlen($s1);
    $s2l = strlen($s2);
    if ($s1l == 0) return $s2l;
    if ($s2l == 0) return $s1l;

    $p1 = array();
    $p2 = array();

    for ($i2 = 0; $i2 <= $s2l; ++$i2) {
        $p1[$i2] = $i2 * $cost_ins;
    }

    $cons = 0;
    $cons_count = 0;
    $cln = 0;
    $tbl = $s1;
    $lst = false;

    for ($i1 = 0; $i1 < $s1l; ++$i1) {
        $p2[0] = $p1[0] + $cost_del;

        $srch = true;

        for($i2 = 0; $i2 < $s2l; ++ $i2) {
            $c0 = $p1[$i2] + (($s1[$i1] == $s2[$i2]) ? 0 : $cost_rep);
            if ($srch && $s2[$i2] == $tbl[$i1]) {
                $tbl[$i1] = "\0";
                $srch = false;
                $cln += ($cln == 0) ? 1 : $cln * 1;
            }

            $c1 = $p1[$i2 + 1] + $cost_del;

            if ($c1 < $c0) $c0 = $c1;
            $c2 = $p2[$i2] + $cost_ins;
            if ($c2 < $c0) $c0 = $c2;

            $p2[$i2 + 1] = $c0;
        }

        if (!$srch && $lst) {
            $cons_count += $cln;
            $cln = 0;
        }
        $lst = $srch;

        $tmp = $p1;
        $p1 = $p2;
        $p2 = $tmp;
    }
    $cons_count += $cln;

    $cons = -1 * ($cons_count * 0.1);
    return $p1[$s2l] + $cons;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:04:48.267

我认为你的函数的主要减速是它是递归的。

正如我在评论中所说，PHP 函数调用对于引擎来说是出了名的繁重工作。

PHP 本身实现`levenshtein`为一个循环，保持插入、替换和删除所产生的运行总成本。

我敢肯定，如果您也将代码转换为循环，您会看到一些巨大的性能提升。

我不确切知道您的代码在做什么，但我已将本机 C 代码移植到 PHP 中，以便为您提供一个起点。

```
define('LEVENSHTEIN_MAX_LENGTH', 12);

function lev2($s1, $s2, $cost_ins = 1, $cost_rep = 1, $cost_del = 1)
{
    $l1 = strlen($s1);
    $l2 = strlen($s2);

    if ($l1 == 0) {
        return $l2 * $cost_ins;
    }
    if ($l2 == 0) {
        return $l1 * $cost_del;
    }

    if (($l1 > LEVENSHTEIN_MAX_LENGTH) || ($l2 > LEVENSHTEIN_MAX_LENGTH)) {
        return -1;
    }

    $p1 = array();
    $p2 = array();

    for ($i2 = 0; $i2 <= $l2; $i2++) {
        $p1[$i2] = $i2 * $cost_ins;
    }

    for ($i1 = 0; $i1 < $l1; $i1++) {
        $p2[0] = $p1[0] + $cost_del;

        for ($i2 = 0; $i2 < $l2; $i2++) {
            $c0 = $p1[$i2] + (($s1[$i1] == $s2[$i2]) ? 0 : $cost_rep);
            $c1 = $p1[$i2 + 1] + $cost_del;
            if ($c1 < $c0) {
                $c0 = $c1;
            }
            $c2 = $p2[$i2] + $cost_ins;
            if ($c2 < $c0) {
                $c0 = $c2;
            }
            $p2[$i2 + 1] = $c0;
        }
        $tmp = $p1;
        $p1 = $p2;
        $p2 = $tmp;
    }
    return $p1[$l2];
} 
```

我做了一个快速基准测试，比较了你的、我的和 PHP 的内部函数，每个迭代 100,000 次，时间以秒为单位。

```
float(12.954766988754)
float(2.4660499095917)
float(0.14857912063599) 
```

显然它还没有得到你的调整，但我相信他们不会减慢那么多。

如果你真的需要更多的速度提升，一旦你想出了如何改变这个函数，应该很容易将你的更改移植回 C，制作 PHP 函数定义的副本，并实现你自己的本地 C 版本您修改的功能。

有很多关于如何制作 PHP 扩展的教程，所以如果你决定走这条路，你应该不会有那么大的困难。

**编辑：**

正在寻找进一步改进它的方法，我注意到

```
 $c0 = $p1[$i2] + (($s1[$i1] == $s2[$i2]) ? 0 : $cost_rep);
        $c1 = $p1[$i2 + 1] + $cost_del;
        if ($c1 < $c0) {
            $c0 = $c1;
        }
        $c2 = $p2[$i2] + $cost_ins;
        if ($c2 < $c0) {
            $c0 = $c2;
        } 
```

是相同的

```
 $c0 = min(
            $p1[$i2 + 1] + $cost_del,
            $p1[$i2] + (($s1[$i1] == $s2[$i2]) ? 0 : $cost_rep),
            $c2 = $p2[$i2] + $cost_ins
        ); 
```

`min`我认为这与您的代码中的块直接相关。但是，这会显着**降低**代码速度。（我猜这是额外函数调用的开销）

`min()`以区块作为第二次计时的基准。

```
float(2.484846830368)
float(3.6055288314819) 
```

您对第二个`$cost_ins`不属于您的看法是正确的-我的复制/粘贴失败。

# jsf - JSF selectBooleanCheckbox 单击后取消选中

> ID：14525746
> 
> 赞同：0
> 
> 时间：2013-01-25T16:13:56.480
> 
> 标签：jsf, checkbox

我`<h:selectBooleanCheckbox>`在我的页面中使用，它们的价值来自支持 bean。这样：

```
<h:selectBooleanCheckbox value="#{billing.selected}">
    <f:ajax render="billingEventsGroup" event="valueChange" execute="@this" />
</h:selectBooleanCheckbox> 
```

我检查了它，然后转到下一页或后页（我有 PrimeFaces 向导来执行此操作）。当我回到页面时，复选框未选中。

关于这种行为的一些线索？

# jquery - 如何使用具有多个跨度类的非选择器？

> ID：14525758
> 
> 赞同：0
> 
> 时间：2013-01-25T16:14:35.230
> 
> 标签：jquery, jquery-selectors, selector, html

***延伸到我以前的问题*** [如何选择具有多个类的跨度并放置在锚点内？](https://stackoverflow.com/questions/14506319/how-to-select-a-span-with-multiple-classes-and-placed-inside-an-anchor)

**为此添加扩展，我想添加一个需要从点击事件中忽略的类。因此我使用了下面不起作用的代码。任何帮助将不胜感激！

```
$('span.c3, span.c4:not(.c5)').parents('a').click(function (e) {
            alert("clicked!");
   }); 
```

我也尝试在非选择器中使用 span.c5 但这也不起作用:(

请在下面找到 html 更改：

```
<div class="c0 c">
        <a class="c1 c2">
        <span class="c3 c4 c5"></span>Anchor_Text
        </a>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:15:59.143

您可以使用[`.not`](http://api.jquery.com/not/)，它将过滤您选择的所有元素：

```
$('span.c3, span.c4').not('.c5').parents('a').click(function (e) {
    alert("clicked!");
}); 
```

顺便说一句，你确定你想要的是[`parents`](http://api.jquery.com/parents/)什么？我想你真正想要的是[`closest`](http://api.jquery.com/closest/)。

* * *

这是小提琴：http: [//jsfiddle.net/GCNKg/](http://jsfiddle.net/GCNKg/)

* * *

**更新**：由于您在评论中提到您必须使用`:not`选择器，因为您正在使用事件委托，因此您必须添加`:not`到*每个*选择器，或者只需将以下过滤器添加到您的脚本中：

```
$.expr[':'].any = $.expr.createPseudo(function( selector ) {
    return function (el) {
        return $.find.matches(selector, [el]).length > 0;
    }
}); 
```

这会将[`:any`](https://developer.mozilla.org/en-US/docs/CSS/:any)选择器添加到 jQuery/Sizzle（我基于[此 jQuery 功能请求](http://forum.jquery.com/topic/feature-req-any-selector-filter)，但对其进行了更新，使其适用[于 jQuery 自 1.8 版以来使用的新 Sizzle 选择器引擎](https://stackoverflow.com/questions/11624345/getting-the-match-object-in-a-custom-filter-selector-in-jquery-1-8)）。

包含该过滤器后，您可以`:any`在选择器中使用它，它可以很好地与`:not`：

```
$(document.body).on('click', 'span:any(.c3, .c4):not(.c5)', function (e) {
    alert("clicked!");
}); 
```

这是小提琴：http: [//jsfiddle.net/GCNKg/1/](http://jsfiddle.net/GCNKg/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:16:45.123

使用[`.not()`](http://api.jquery.com/not/)函数，而不是选择器。例如：

```
$('span.c3, span.c4').not('.c5').parents('a').click(function (e) {
    alert("clicked!");
}); 
```

这是一个[jsFiddle 演示](http://jsfiddle.net/SNHSH/)。

# android - 图库中的 Facebook 照片

> ID：14525762
> 
> 赞同：0
> 
> 时间：2013-01-25T16:14:41.003
> 
> 标签：android, facebook-graph-api

我找到[了这个简单的教程](http://java.dzone.com/articles/browsing-facebook-albums)，它解释了如何从 facebook 添加画廊照片，但是有一个问题.. 当它下载照片时，它最多下载 25 张照片（在我的相册中有 150 张照片）。

问题出在哪里？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:39:06.337

您需要在字符串中添加一些[分页](https://developers.facebook.com/docs/reference/api/pagination/)参数。`facebook_url_photos`

具体来说，`&limit=200`应该做好本职工作。

# objective-c - 带有可点击图像和文本的 NSButton

> ID：14525772
> 
> 赞同：1
> 
> 时间：2013-01-25T16:15:07.817
> 
> 标签：objective-c, cocoa, nsbutton

我创建了一个 NSButton（见下面的代码）。该按钮显示我想要的方式（无边界，文本上方的图像）。如果我单击按钮的文本部分，按钮将按下并调用它的操作。如果我单击按钮的图像部分，那么绝对不会发生任何事情。如何使 NSButton 的图像部分可点击？我确定我可以将 NSButtonCell 子类化以使其工作，但我不明白为什么有必要这样做。

```
NSButton *button = [[NSButton alloc] initWithFrame:NSZeroRect];
[button setBezelStyle:NSRegularSquareBezelStyle];
[button setBordered:YES];
[button setImagePosition:NSImageAbove];
[button setButtonType:NSMomentaryChangeButton];
[button setImage:[NSImage imageNamed:@"myImage"]];
[button setTitle:@"Button Title"];
[button setTarget:self];
[button setAction:@selector(buttonAction:)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T16:24:23.230

也许其他一些视图与您的按钮图像重叠？在上面的代码中，当然，如果您提供适当的按钮框架，一切正常（对于有边框和无边框按钮）。在干净的项目中尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:34:01.307

按钮本身的图像。无需使其可点击。您的点击事件将被 buttonAction 捕获。

您只需要显示图像被点击的动画。为此，您需要另一个反向图像。并跟踪鼠标按下事件，当你单击向下显示其他图像，当你释放鼠标（鼠标向上）显示默认图像。

这将给人一种点击图像的感觉。

# c# - 如何在 c# 中表示没有 31 天的月份的日期范围？

> ID：14525775
> 
> 赞同：0
> 
> 时间：2013-01-25T16:15:12.353
> 
> 标签：c#, datetime, datarow

我想找到一个员工一个月内请的假。该代码适用于所有日期。现在，如果我想找到员工在一月份的休假，范围是：

```
DateTime first = Convert.ToDateTime(DateTime.Now.Month + "01" + DateTime.Now.Year);
DateTime end = Convert.ToDateTime(DateTime.Now.Month + "31" + DateTime.Now.Year); 
```

问题是有些月份没有 31 天。有没有一种简单的方法可以分配变量 From 和 To 范围。当月份的 2 月或 4 月时会出现错误，因为它们没有 31 天。

执行搜索的代码是：

```
returnedRows = LeaveDS.Tables["Leave"].Select("LeaveDate >= #" + first + "# AND LeaveDate <= #" + end + "#"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:17:05.360

你可以这样做：

```
DateTime end = first.AddMonths(1).AddDays(-1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T16:18:04.950

```
DateTime.DaysInMonth(DateTime.Now.Year, DateTime.Now.Month) 
```

它会给你一个月的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T16:18:56.037

采用`DateTime.DaysInMonth(int year, int month)`

```
 int days = DateTime.DaysInMonth(2012, 2);
        int days2 = DateTime.DaysInMonth(2011, 2); 
```

输出：

```
 days = 29
 days2 = 28 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T16:20:05.070

您可以通过 获取一个月中的天数`DateTime.DaysInMonth(year,month)`，并将其用作查询的基础。

另一种方法是使用每个月的第一天，但​​将您的选择查询更改为小于结束日期。

```
DateTime first = Convert.ToDateTime(DateTime.Now.Month + "01" + DateTime.Now.Year);
DateTime end = first.AddMonths(1); // Becomes 01 of next month

returnedRows = LeaveDS.Tables["Leave"].Select("LeaveDate >= #" + first + "# AND LeaveDate < #" + end + "#"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T16:19:17.883

有一个很好的方法来获取一个月中的天数，它叫做[DateTime.DaysInMonth](http://msdn.microsoft.com/en-us/library/system.datetime.daysinmonth%28v=vs.90%29.aspx)

```
DateTime end = new DateTime(first.Year, first.Month, DateTime.DaysInMonth(first.Year, first.Month); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T16:17:55.813

```
var enddate = DateTime.Now.AddMonths(1);
DateTime end = new DateTime(enddate.Year,enddate.Month,1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T16:27:05.313

顺便说一句，如果您使用 .NET 3.5 或更高版本，Linq-To-DataSet 将简化和改进代码：

```
int month = 2; // f.e. for february
var currentCalendar = System.Globalization.CultureInfo.CurrentCulture.Calendar;
int daysInMonth = currentCalendar.GetDaysInMonth(month);
DateTime start = new DateTime(DateTime.Now.Year, month, 1);
DateTime end = new DateTime(DateTime.Now.Year, month, daysInMonth);
var filteredRows = LeaveDS.Tables["Leave"].AsEnumerable()
    .Where(r => r.Field<DateTime>("LeaveDate").Date >= start
             && r.Field<DateTime>("LeaveDate").Date <= end );
// use ToArray for an array, CopyToDataTable for a DataTable etc. 
```

# android - 使用 Android SIP 堆栈进行点对点 SIP 呼叫？

> ID：14525777
> 
> 赞同：7
> 
> 时间：2013-01-25T16:15:16.823
> 
> 标签：android, sip, voip

我一直在寻找一种方法来设置 Android SIP 堆栈，以便能够以 ad-hoc 方式在同一网络上的两台设备之间建立 SIP 呼叫。即无需注册到 SIP 服务器。

我无法让它工作，因为 SIP 演示包含服务器注册，如果没有这一步，我无法让它拨打或接听电话。

我什至不确定这是否应该是可能的。我能找到的很少提及这一点是相互矛盾的（有人说它可以通过特定的设置来完成，他们没有说是什么，还有人说 Android SIP API 不适合这个）。

我想知道是否有人让这个工作或有任何线索来说明如何为此配置 API，因为我想在查看第三方 API 之前使用内置的 SIP API。

我正在开发的应用程序是一个内部应用程序，它将始终在相同的设备上运行，因此并非所有设备上都存在 SIP API 这一事实对我来说不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-31T10:58:43.473

我一直被困在同样的问题上。

如果您可以在没有 android sip api 的情况下实现它，您可以查看[rtp api](http://developer.android.com/reference/android/net/rtp/package-summary.html)，它为您提供了一些较低级别的工具来制作 P2P VOIP 应用程序而无需服务器。

> 要支持音频会议和类似用途，您需要将两个类实例化为流的端点：
> 
> AudioStream 指定一个远程端点，由网络映射和配置的 AudioCodec 组成。AudioGroup 代表一个或多个 AudioStreams 的本地端点。AudioGroup 混合了所有的 AudioStreams，并且可以选择同时与设备扬声器和麦克风进行交互。

对应的是，您必须编写自己的设备发现协议才能知道音频流对等方使用的端口，如本[答案中所述](https://stackoverflow.com/a/19996334/4408021)

如果您只打算进行一对一的对话，问题并不难，但如果您想进行一对一的对话，问题就有点棘手了。

对于一对 n 对话​​，会议主持人必须为他想要呼叫的每个远程设备实例化 n 个音频流。每个远程对等点只有一个音频流链接到一个主机音频流。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-28T20:12:52.900

您可以使用开源的 CSipSimple 执行此操作：[http ://code.google.com/p/csipsimple/](http://code.google.com/p/csipsimple/)

您设置本地帐户，注册到自己而不是服务器，然后使用 TXT 模式拨打电话并拨打 remote_account_name@remote_ip_address。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-26T07:38:37.327

sip peer 就像一个分机号码，用于在 sip phone 中配置。请查找创建 sip peer 的详细信息。我正在使用 centos 6.9 64 位并安装了 asterisk 11 您可以使用 asterisk server 创建 sip peer 。转到 vi /etc/asterisk/sip.conf

```
[1001]
username=1001
secret=123
qualify=yes
type=friend
disallow=all
allow=ulaw,alaw,gsm
host=dynamic 
```

为了更详细和易于理解。请参考以下链接

```
https://youtu.be/27wm-fu25SM 
```

或者

```
http://rulariteducation.blogspot.in/2017/07/how-to-add-sip-peer-in-asterisk.html 
```

# sqlite - 使用 SQLite 时如何让 ServiceStack.OrmLite 强制执行外键？

> ID：14525781
> 
> 赞同：5
> 
> 时间：2013-01-25T16:15:24.310
> 
> 标签：sqlite, servicestack, ormlite-servicestack

根据this [other](https://stackoverflow.com/questions/3020197/foreign-key-isnt-being-enforced) SO answer，SQLite似乎不会自动强制执行外键关系，并且必须为每个连接显式启用。这是 ServiceStack.OrmLite 的一个报告[问题](https://github.com/ServiceStack/ServiceStack.OrmLite/issues/125)。我自己用 ServiceStack.OrmLite 3.9.33 和 SQLite 1.0.84 重现了这种行为，其中单元测试成功（允许删除具有外键引用的记录）但实际应用程序（合法地）失败。

我不清楚的是如何/在哪里执行必要的“PRAGMA foreign_keys = ON;” SQL 命令，使其适用于我的 SQLite 单元/集成测试的*任何*连接，但不适用于我的主要 SQL Server 连接。理想情况下，它似乎是 IDbConnectionFactory 注册的一部分。

任何人都可以帮忙吗？

**编辑：**级联删除将是处理这种情况的另一种方法，但是尽管使用[ForeignKey](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite/ForeignKeyAttribute.cs)属性在我的 FK 列上正确设置了这一点，但 ServiceStack.OrmLite 在与 SQLite 一起使用时似乎不遵守这一点（[在此处](https://github.com/ServiceStack/ServiceStack.OrmLite/pull/71)注明），尽管后者支持为了它。这可能与原始问题有关，默认情况下禁用 SQLite 的 FK 强制执行，如果首先启用它，它将正常工作。

# java - 从 Eclipse 或 JAR 运行时，Charset.defaultCharset() 结果不同

> ID：14525783
> 
> 赞同：1
> 
> 时间：2013-01-25T16:15:29.567
> 
> 标签：java, eclipse, ant, character-encoding, default

我有一个非常简单的代码：

```
package org;

import java.nio.charset.Charset;

public class Test
{
  public static void main(String[] args)
  {
    System.out.println(Charset.defaultCharset());
  }
} 
```

我在 Windows7 RUS JRE7 上运行它。

当我使用“Debug”或“Run”从 Eclipse 4.2 (20120614-1722) 运行它时（我没有为 Eclipse 或项目设置任何额外的编码首选项），我得到以下结果：

```
windows-1252 
```

这对我来说似乎是正确的。

但是当我使用 ANT 1.8.2 将其打包到具有默认设置的 JAR 中时：

```
<project name="Test" default="dist" basedir=".">
    <description>
        Simple build XML
    </description>
    <!-- set global properties for this build -->
    <property name="src" location="src"/>
    <property name="build" location="build"/>
    <property name="dist"  location="dist"/>

    <target name="init">
        <!-- Create the build directory structure used by compile -->
        <delete dir="${build}"/>
        <mkdir dir="${build}"/>
    </target>

    <target name="compile" depends="init" description="compile the source" >
        <!-- Compile the java code from ${src} into ${build} -->
        <javac srcdir="${src}" destdir="${build}" includeantruntime="false"/>
    </target>

    <target name="dist" depends="compile" description="generate the distribution" >
        <!-- Create the distribution directory -->
        <delete dir="${dist}"/>
        <mkdir dir="${dist}"/>
        <!-- Put everything from ${build} into the test.jar file -->
        <jar jarfile="${dist}/test.jar" basedir="${build}">
            <manifest>
                <attribute name="Main-Class" value="org.Test"/>
            </manifest>
        </jar>
    </target>
</project> 
```

运行时我得到以下结果：

```
>java -jar test.jar
windows-1251 
```

我希望在这里得到相同的结果。我究竟做错了什么？那么确定默认字符集的正确方法是什么？

更新：问这个问题的原因是，我并没有真正读取或写入文件，我可以在其中手动指定编码。我只是从 **javax.sound.sampled.Mixer.Info.getName()**返回了一个字符串， 并且需要在不同的系统字符集中正确显示它。

Update2：看来，原因是 javax.sound.sampled.Mixer.Info.getName() 使用 CP1251 对“系统字符集”特定结果进行编码，所以我需要将其解码回“系统字符集”。但是如何发现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:22:37.600

答案是你永远不应该依赖默认的字符编码：

[如何在 Java 中查找默认字符集/编码？](https://stackoverflow.com/questions/1749064/how-to-find-default-charset-encoding-in-java)

[设置默认的 Java 字符编码？](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)

相反，当您写入或读取时，您需要明确指定所需的编码。

例如，应该首选第二个构造函数。

```
InputStreamReader(InputStream in) 
InputStreamReader(InputStream in, String charsetName) 
```

# javascript - 如果窗口不活动，则运行函数

> ID：14525789
> 
> 赞同：1
> 
> 时间：2013-01-25T16:15:54.107
> 
> 标签：javascript

我目前正在开发一个小型对话系统。

当用户编写新消息时，页面的标题会更改为*New Message*，这是预期的。

但是，如果在收到消息时窗口处于活动状态，则不应**更新**标题。

目前，无论窗口是否处于活动状态，它都会显示*新消息，并且仅当用户更改选项卡并返回时再次将其删除。*

`if (newCount !== messagesCount)`如果窗口**未**处于活动状态，如何使其仅运行该功能？

这是当前代码：

```
if (newCount !== messagesCount) {
    document.title = 'New Message - ' + title;
}

$(window).focus(function() {
    document.title = title;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:27:55.373

您可以尝试跟踪监听*onfocus*和*onblur* windows 事件的窗口状态，例如：

```
var hasFocus = true;
window.onfocus = function(){ hasFocus = true;}
window.onblur = function(){ hasFocus = false;} 
```

并在您的方法中检查*hasFocus的值*

# java - java正则表达式月份2位数

> ID：14525792
> 
> 赞同：3
> 
> 时间：2013-01-25T16:16:01.143
> 
> 标签：java, regex

我只想捕获以下内容之一：

```
01 , 02 , ... , 09 , 10 , 11 , 12 
```

以下正则表达式是否完整或我错过了什么？

```
String monthPat = "^[1][0-2]|[0][1-9]$" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T16:20:01.220

当前正则表达式的问题在于，通过交替，您正试图匹配以下表达式之一：

```
^[1][0-2]     # strings that start with '10', '11', or '12'
[0][1-9]$     # strings that end with '01' through '09' 
```

这意味着您可以部分匹配较长的字符串，例如您将匹配“1000”开头的“10”，以及“2009”结尾的“09”。

确保在 的每一侧都包含两个锚`|`以解决此问题：

```
^1[0-2]$|^0[1-9]$ 
```

或者，您可以在组内进行交替并将锚点放在外面：

```
^(1[0-2]|0[1-9])$ 
```

请注意，我还从`[1]`and中删除了字符类（方括号） `[0]`，因为含义相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:20:59.333

从我所见，你正在做验证。如果您使用 String 类中的方法执行它们`matches`，那么锚点`^`和`$`是不必要的。

您可以将其缩短一点，因为当只有 1 个字符时不需要字符类：

```
"1[0-2]|0[1-9]" 
```

`matches`如果您在 String 类中将其与方法一起使用，则可以使用上面改进的正则表达式，因为如果提供的模式与整个字符串匹配，则`matches`方法将返回。`true`

请注意，如果单独考虑，您的正则表达式的含义会略有不同。

```
"^[1][0-2]|[0][1-9]$" 
```

如果你把它喂给`Pattern.compile`，然后使用`Matcher.find`类，这将匹配以 10 到 12 开头或以 01 到 09 结尾的子字符串，因为交替将在 2 个子模式之间交替：`^[1][0-2]`和`[0][1-9]$`. 将其更改为

```
"^(?:1[0-2]|0[1-9])$" 
```

如果字符串正好是 01 到 12，它只会找到匹配项。

当您用其他语言编写代码时，这些知识很有用，因为`match`如果您不指定锚点`^`和`$`.

# css - 流体宽度如何工作？

> ID：14525794
> 
> 赞同：1
> 
> 时间：2013-01-25T16:16:03.617
> 
> 标签：css, twitter-bootstrap

我在 twitter-bootstrap.css 中注意到以下内容：

```
.row-fluid .span4 {
  width: 31.914893617021278%;
  *width: 31.861702127659576%;
} 
```

我有两个问题：

1.  是什么`*width`？

2.  它是身体宽度的 31.9% 还是 .row-fluid/ancestral 元素的宽度？我假设它的宽度是`row-fluid`因为 my`body`是**1349px**，`row-fluid`是**1147px**并且`span4`是**366px ，结果是****1147**的 31.9% 。但是这也应该起作用：

HTML：

```
<div id="right" class="span4">
    <div id="high">
    </div>
</div> 
```

CSS：

```
#right #high{position:fixed; width:100%;padding-left:10px;} 
```

如果 Q#2 中的第二种情况是正确的，那么 的宽度`#high`应该是 100%，即与 #right 的宽度相同。但是我在浏览器中得到#right **367px**宽和#high **1349px**宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:18:56.880

1.  `*width`仅针对 IE7
2.  百分比宽度与它们所在的容器相关

当你制作一个 item`position:absolute`时，它是相对于整个文档而不是它所在的容器，所以在这种情况下`body`.

# java - 一起使用 DefaultTableModel 和 AbstractTableModel

> ID：14525796
> 
> 赞同：1
> 
> 时间：2013-01-25T16:16:09.930
> 
> 标签：java, swing, jtable, abstracttablemodel

我有一个从文件中读取记录并显示它们的表，并且有一个删除按钮，当用户选择一行并单击时，该行也会从表和文本文件中删除。

（更新）

```
public class Readuser_A extends AbstractTableModel {

String[] columns = { "Fname", "Lname", "Gender", "Date", "ID" };
ArrayList<String> Listdata = new ArrayList<String>();
String[][] Arraydata;

public Readuser_A() {
    try {
        FileReader fr = new FileReader("AllUserRecords.txt");
        BufferedReader br = new BufferedReader(fr);
        String line;
        while ((line = br.readLine()) != null) {
            Listdata.add(line);
        }
        br.close();
        Arraydata = new String[Listdata.size()][];
        for (int i = 0; i < Listdata.size(); i++) {
            Arraydata[i] = Listdata.get(i).split("     ");
        }
    } catch (IOException e) {
    }
}

 public void RemoveMyRow(int row){
  Listdata.RemoveElement(row);
   }

@Override
public String getColumnName(int colu) {
    return columns[colu];

}

public int getRowCount() {
    if (null != Arraydata) {
        return Arraydata.length;
    } else {
        return 0;
    }
}

public int getColumnCount() {
    return columns.length;
}

public Object getValueAt(int rowIndex, int columnIndex) {
    return Arraydata[rowIndex][columnIndex];
}
} 
```

我的第二课：

```
public class ReaduserM_A {
final JLabel myLable = new JLabel();

public ReaduserM_A() {

    final Readuser_A RU = new Readuser_A();
    final JTable mytable = new JTable(RU);
    final JFrame Uframe = new JFrame("All Users");
    JButton DellButton = new JButton("Delete User");

    DellButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if (mytable.getSelectedRow() != -1) {
                removeRow(mytable.getSelectedRow());
                RU.fireTableRowsDeleted(mytable.getSelectedRow(),
                        mytable.getSelectedRow());
            } else {
                JOptionPane.showMessageDialog(null, "No Row Selected");
                return;
            }

            //Now, Delete from text file too
            deleteFromFile();
        }

    });

    JPanel panel = new JPanel();
    JScrollPane sp = new JScrollPane(mytable);
    panel.add(sp);
    panel.add(DellButton);
    panel.add(myLable);
    Uframe.add(panel);
    Uframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Uframe.setSize(570, 500);
    Uframe.setLocation(300, 60);
    Uframe.setVisible(true);
}

public void deleteFromFile() {
    File Mf = new File("AllUserRecords.txt");
    File Tf = new File("Uoutput.txt");
    try {
        FileReader Ufr = new FileReader(Mf);
        BufferedReader Ubr = new BufferedReader(Ufr);
        PrintWriter Upw = new PrintWriter(new FileWriter(Tf));
        String Us;
        while ((Us = Ubr.readLine()) != null) {
            String[] Ust = Us.split("     ");
            String Unumber = Ust[4];

            //How find the selected row line by it's ID and delete that row?
        }
        Upw.close();
        Ubr.close();
        Mf.delete();
        Tf.renameTo(Mf);

    } catch (FileNotFoundException e1) {
        myLable.setText("File Not Found");
    } catch (IOException ioe) {
        myLable.setText("IO Error");
        ioe.printStackTrace();
    }
}

public static void main(String[] args) {
    new ReaduserM_A();
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:37:14.467

```
removeRow(mytable.getSelectedRow()); 
```

上面的陈述可能是问题所在。因为如果没有选定的行则`getSelectedRow`返回-1。

检查该行是否存在。如果存在则删除。

```
if(mytable.getSelectedRow() != -1) {
  removeRow(mytable.getSelectedRow());
} 
```

**更新：**

我运行了我`NullPointerException`在你的类`getRowCount`方法中得到的代码。`TableModel`

```
public int getRowCount() {
   return Arraydata.length;
} 
```

所以`null`在你得到计数之前做一个检查。

```
public int getRowCount() {
if(null != Arraydata) {
    return Arraydata.length;
} else {
    return 0;
}
} 
```

现在，如果您运行，您将获得`ArrayOutOfBoundException`索引 -1。这是因为删除操作。正如我之前所说，检查行是否存在，然后执行相应的操作。下面的代码就是这样做的。

```
public void actionPerformed(ActionEvent e) {
    if(mytable.getSelectedRow() != -1) { 
      removeRow(mytable.getSelectedRow());
      rftl2.fireTableRowsDeleted(mytable.getSelectedRow(), mytable.getSelectedRow());
    } else {
      JOptionPane.showMessageDialog(null, "No Row Selected");
       return;
    }

    //Now, Delete from text file too
    deleteFromFile();
 } 
```

最后你得到输出（如果没有这样的选定行。）

![在此处输入图像描述](../Images/95ec468cb2283f2b939446763611aeb7.png)

# c# - 验证来自数据库中的配置 - 添加到模型 - 在运行时添加到 ViewModel？

> ID：14525799
> 
> 赞同：0
> 
> 时间：2013-01-25T16:16:24.957
> 
> 标签：c#, asp.net-mvc, entity-framework, validation

使用实体框架（代码优先）：

每个客户都有不同的要求，例如某些字段是必需的。

或 Max Min 等。

因此，从配置中，我正在考虑找到一种将“数据注释”（例如 IsRequired 和 MaxLength）注入存储库/服务和 MVC 的 ViewModel 使用的模型（使用 EntityTypeConfiguration + Fluent API？）的方法。

显然，视图模型可能有额外的验证。

对于 MVC，我在 DataAnnotationsModelMetadataProvider 中覆盖 GetValidators？

这有意义吗？

如果是这样。我希望我必须在表甚至必须存在之前将配置注入模型构建器！！？

# node.js - 如何获取当前的 ssh 密钥指纹？

> ID：14525802
> 
> 赞同：0
> 
> 时间：2013-01-25T16:16:34.580
> 
> 标签：node.js, heroku

我在 Heroku 上有一个 nodejs 应用程序。

如何获取当前的 ssh 密钥指纹？

我需要的不是我自己的 heroku 应用程序公共 ssh 密钥。我想 git push 到其他 Heroku 应用程序，所以我需要 Heroku 使用的当前 ssh 密钥将其公共版本发送到其他 Heroku 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:31:06.623

如果您没有旧的私钥，则无法恢复它。因为您只上传您的公钥。但是，如果您想重新访问您的存储库，您可以这样做`heroku keys:add`，它将生成一个新的密钥对并将其上传到 Heorku。

# javascript - 将具有特定类的 div 设置为与窗口 innerHeight 相同的高度

> ID：14525807
> 
> 赞同：0
> 
> 时间：2013-01-25T16:16:49.777
> 
> 标签：javascript

所以，这在我的脑海中似乎很容易做到，但我无法让它工作，谷歌也没有帮助我，你能看到我做错了什么吗？

我有 5 个 div，我希望它们与浏览器窗口的高度相同。即使在调整大小。

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
function setDivHeight(){
    var windowHeight = window.innerHeight;
    if(windowHeight > 400){
        document.getElementsByClassName("minHeight").style.backgroundColor = 'black';
    }
    else if(windowHeight < 400){
        document.getElementsByClassName("minHeight").style.backgroundColor = 'red';
    }
}

window.addEventListener("resize",setDivHeight,false);
</script>
</head>
<style type="text/css">

body{margin:0; padding:0;}

.minHeight{
    height:20px;
}

.a{
    background: #09C;
}
.b{
    background: #09b;
}
.c{
    background: #09d;
}
.d{
    background: #09e;
}
.e{
    background: #09f;
}

</style>
<body onload="setDivHeight()">
<div class="a minHeight"></div>
<div class="b minHeight"></div>
<div class="c minHeight"></div>
<div class="d minHeight"></div>
<div class="e minHeight"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:34:27.230

您不需要为此使用 javascript。在此处查看[**JSFiddle 演示**](http://jsfiddle.net/NjrnY/)

检查以下代码

**HTML**

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <body>
        <div class="a minHeight"></div>
        <div class="b minHeight"></div>
        <div class="c minHeight"></div>
        <div class="d minHeight"></div>
        <div class="e minHeight"></div>
    </body>
</html> 
```

**CSS**

```
html{height:100%}
body{margin:0; padding:0;height:100%;}
.minHeight{
    height:100%;
    width: 40px;
}
.a{
    background-color: #09C;
}
.b{
    background-color: #09b;
}
.c{
    background-color: #09d;
}
.d{
    background-color: #09e;
}
.e{
    background-color: #09f;
}

div{float: left;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:24:35.803

所以你想让`div`你的屏幕和你的屏幕一样大吗？ `position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px;`

# css - 使用尽可能少的 CSS 类是否有很大的性能提升？

> ID：14525808
> 
> 赞同：1
> 
> 时间：2013-01-25T16:16:50.587
> 
> 标签：css, mobile-website

最近我遇到了一个使用很长的 CSS 类名的移动 UI 工具包，似乎没有使用多个类名和 CSS 继承（例如`".container-element-subelement"`）。这样做有很大的性能提升吗？因为以后必须维护这些样式表听起来像是一场噩梦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:12:50.057

您提到的性能提升应该可以忽略不计（当然，取决于用户的硬件、页面大小和浏览器）。

这里有一些讨论：[CSS子选择器性能与类膨胀](https://stackoverflow.com/questions/14013585/css-child-selector-performance-vs-class-bloat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:25:30.330

那么答案是肯定的，它会影响性能。

如果您使用 .css 框架只是为了一个小选项（例如加载所有 jquery-ui，只是为了在单个 div 上制作圆角，... non-sence.

另外，更深入地比较一下： .this-verry-long-way-too-long-css-selector-to-do-something {} 和 .thisselector {}

*   45个字符差异=许多字节差异，
*   乘以过长选择器名称的数量，
*   乘以服务器发送 .css 文件的次数 **= 带宽**

您可以使用该工具：**yslow** 'firefox plugin' 来帮助您学习和 tweek .css 性能

编辑：好的，我理解你的问题。然后，这是一个与 DOM 引擎相关的好问题。

所以，*我认为*如果堆叠基本的简单选择器，DOM 引擎会表现得更好。

您可以使用 Chrome 开发人员工具的 Selector Profiler（在“配置文件”面板中）来分析浏览器处理页面中的选择器所需的时间（匹配 + 将样式应用于匹配元素。）

这里有一个文档：http: [//moduscreate.com/efficient-dom-and-css/](http://moduscreate.com/efficient-dom-and-css/)

继续

# asp.net - ASP.NET / MVC Syntax

> ID：14525811
> 
> 赞同：6
> 
> 时间：2013-01-25T16:16:57.793
> 
> 标签：asp.net, asp.net-mvc-4

> **Possible Duplicate:**
> [ASP.NET “special” tags](https://stackoverflow.com/questions/649428/asp-net-special-tags)

I am trying to understand an MVC application. It has multiple user controls. In these controls I see syntax like:
`<%= ...some text ... %>`

I have also seen:
`<%: ...some text ... %>`
`<@ ...some text ... %>`
`<% ...some text ... %>`
`<%# ...some text ... %>`

I can see that it enables me to write code in the control/javascript but I don't fully understand the difference between %, %:, %= and %#.

When are they "executed/evaluated"?

Is there a difference if `<%= ... =>` is in a user control or enclosed in single quotes in a Javascript function?

I am not even sure if my title is correct, I don't get anything when googling it. So I would be delighted with an explanation, more than happy with a link to documentation and happy with the correct terminology.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:25:11.360

Assuming you are using the WebForms view engine in ASP.NET MVC all you need to know are the following :

*   `<%= %>` - Output the result of the evaluation of the input to the response. For example `<%= "<div>foo</div>" %>` outputs `<div>foo</div>`.
*   `<%: %>` - Same as the first one except that it HTML encodes the output. Thus `<%: "<div>foo</div>" %>` will output `&lt;div&gt;foo&lt;/div&gt;`.
*   `<% %>` - Evaluates the expression on the server but doesn't output anything in the response. For example you could declare a variable: `<% string foo = "foo bar"; %>` that you could use later to output with one of the 2 previous methods
*   `<%@ %>` - This is only used to define the Page or Control directives of the view. It also allows you to bring namespaces and assemblies into scope for the given view. For example `<%@ Import Namespace="System.IO" %>` will bring the `System.IO` namespace into scope.

As far as `<%#` is concerned, this is not used in ASP.NET MVC. It is a concept called data binding and works only in classic WebForms applications.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:22:47.040

`<%= ...some text ... %>`: Contains an expression. The result of that expression will have `.ToString()` called on it, and the resulting string is output directly.

`<%: ...some text ... %>`: Contains an expression. If the expression result is an `IHtmlString`, `.ToHtmlString()` will be called on it, and the results will be output directly. Otherwise, the result of that expression will have `.ToString()` called on it, and the resulting string is *escaped* before being output.

`<@ ...some text ... %>`: Contains a page directive for things like namespaces to be included. This is a compiler directive, and is evaluated when the view is getting compiled (usually the first time the view is invoked).

`<% ...some text ... %>`: Contains one or more statements. These statements are executed.

`<%# ...some text ... %>`: This is a data-binding expression in ASP.NET WebForms. I don't think it's valid syntax for an MVC View. However, you keep mentioning "user controls", which are not really part of the MVC paradigm, so you might want to reconsider whether this question is really about MVC.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:24:42.797

`<%# ...some text ... %>` is for data-binding expressions; like when you have something like:

```
<asp:itemtemplate>
  <asp:label Text='<%#Eval("Property")%>' .../>
</asp:itemtemplate> 
```

`<%= some text %>` is basically a shortcut for `Response.Write()`

`<%@ some text %>` are for application directives; for example when you need to import a namespace: `<%@ Import namespace="value" %>`

I just noticed Stripling warrior answer which compliments this one...

# google-app-engine - GWT Fileupload，用户单击选择文件按钮时的事件或处理程序

> ID：14525812
> 
> 赞同：0
> 
> 时间：2013-01-25T16:17:00.240
> 
> 标签：google-app-engine, events, gwt, file-upload, handler

我是 GWT/GAE 的新手。要使用 GAE Blobstore 服务，必须从服务器端返回一个上传 url，如[本博客](http://www.fishbonecloud.com/2010/12/tutorial-gwt-application-for-storing.html)中的教程。

但似乎可以在用户浏览文件时调用此获取上传 url 服务，因此我需要在用户按下选择文件按钮时找到要处理的事件，并在那里设置表单面板的操作属性。

fileupload 本身具有附加/分离或更改事件，但它似乎不是我想要的。

我可以上传到 blobstore 的代码如下： 上传表单是：

```
import java.util.Arrays;
import java.util.Date;
import java.util.List;
import com.google.gwt.cell.client.DateCell;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.FileUpload;
import com.google.gwt.user.client.ui.FormPanel;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.VerticalPanel;
import com.google.gwt.user.client.ui.FormPanel.SubmitCompleteHandler;
import com.google.gwt.user.client.ui.FormPanel.SubmitCompleteEvent;
import com.google.gwt.user.client.ui.FlowPanel;
import com.google.gwt.user.client.ui.TextArea;

public class UploadFilePanel implements EntryPoint {
    private FileServiceAsync upls = GWT.create(FileService.class);
    AsyncCallback<String> callback;
    FormPanel form;
    String upload_url;

public void onModuleLoad() {

    get_upload_url();

    RootPanel rootPanel = RootPanel.get();

    FlowPanel flowPanel = new FlowPanel();
    rootPanel.add(flowPanel, 0, 0);

    add_submit_form(flowPanel);
}

private void add_submit_form(FlowPanel flowPanel) {
    VerticalPanel panel = new VerticalPanel();
    flowPanel.add(panel);

    // Create a FormPanel and point it at a service.
    form = new FormPanel();
    panel.add(form);
    form.setEncoding(FormPanel.ENCODING_MULTIPART);
    form.setMethod(FormPanel.METHOD_POST);

    form.addSubmitCompleteHandler(new SubmitCompleteHandler() {
        @Override
        public void onSubmitComplete(SubmitCompleteEvent event) {
            RootPanel.get().clear();
            RootPanel.get().getElement()
                    .setInnerHTML("upload complete " + event.toString());
        }
    });

    form.setSize("222px", "52px");

    // Create a FileUpload widget.
    FileUpload upload = new FileUpload();
    form.setWidget(upload);
    upload.setSize("100%", "100%");
    upload.setName("myFile");

    TextArea textArea = new TextArea();
    panel.add(textArea);
    textArea.setWidth("100%");

    // Add a 'submit' button.
    Button submitbtn = new Button("Submit");
    panel.add(submitbtn);
    submitbtn.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            upls.get_upload_url("/stmtgen/upload", callback);
        }
    });
}

private void get_upload_url() {
    callback = new AsyncCallback<String>() {
        @Override
        public void onSuccess(String result) {
            form.setAction(result);
            upload_url = result;
            form.submit();

        }

        @Override
        public void onFailure(Throwable caught) {
            RootPanel.get().clear();
            RootPanel.get().getElement()
                    .setInnerHTML("Can't get upload url");
        }
    };
    if (upls == null)
        upls = GWT.create(FileService.class);
}
} 
```

我用来获取上传网址的异步服务是这样的：

```
import com.google.gwt.user.client.rpc.AsyncCallback;
public interface FileServiceAsync {
void get_upload_url(String up, AsyncCallback<String> callback);
} 
```

问题是当用户点击提交按钮时，有两个服务调用会减慢响应速度。

我尝试了 addHandler(Handler, Type) 如下，它不起作用。

```
FileUpload upload = new FileUpload();
upload.addHandler(new ClickHandler() {

                @Override
                public void onClick(ClickEvent event) {
                    //get upload url here
                }
            }, ClickEvent.getType()
); 
```

# jquery - TypeError: a.offset(...) 在使用基础 css 时未定义

> ID：14525813
> 
> 赞同：2
> 
> 时间：2013-01-25T16:17:04.400
> 
> 标签：jquery, typeerror, zurb-foundation

我已经使用基础 css 框架构建了一个站点，但是它抛出了许多错误，说 TypeError: a.offset(...) is undefined。

它似乎只在我向下滚动页面时发生。有没有其他人遇到过这个问题，更重要的是有没有人找到解决方法？

# javascript - 在 JavaScript 中创建一个 `data-win-control`

> ID：14525820
> 
> 赞同：0
> 
> 时间：2013-01-25T16:17:19.963
> 
> 标签：javascript, winjs

是否可以在 JavaScript 中实例化一个 data-win-control 对象，而不必将其放到 DOM 上并调用`WinJS.UI.processAll()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:31:24.527

是的，这是可能的，你可以在后面的代码中做到这一点：

```
// Object is a new FlipView component instantiate in code behind
// element can be an element already existing in the DOM or just created with JS
var object = new WinJS.UI.FlipView(element, options); 
```

# javascript - 有没有一种好方法可以遍历 Javascript 对象的所有子属性？

> ID：14525821
> 
> 赞同：3
> 
> 时间：2013-01-25T16:17:21.013
> 
> 标签：javascript, properties, iteration

鉴于我有一个 javascript 对象，有没有办法遍历所有原始子属性？

例如，如果我有一个对象

```
{
  foo: 17,
  bar: {
    a: 2,
    b: 7
  }
} 
```

我想遍历 foo、bar.a 和 bar.b。

请记住，我更喜欢迭代 Object.keys() 而不是使用 for/in 循环，尽管我确信我可以将任何 for/in 循环响应转换为 Object.keys() 迭代。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T16:34:55.403

您可以使用这样的递归函数：

```
var x = {
    foo: 17,
    bar: {
        a: 2,
        b: 7
    }
}

function parseObject(something) {
    var keys = Object.keys(something);
    for (var i = 0; i < keys.length; i++) {
        if (typeof something[keys[i]] === 'object') parseObject(something[keys[i]])
        else console.log(keys[i] + " : " + something[keys[i]]);
    }
}
parseObject(x); 
```

生成输出：

```
foo : 17 
a : 2 
b : 7 
```

关于此功能的说明。它递归在任何对象上。例如，如果对象中有一个数组，那么数组中的每个项目都会有单独的行。

所以对于以下对象：

```
var x = {
    foo: 17,
    bar: {
        a: 2,
        b: 7
    },
    foobar: [1,2,3]    
} 
```

输出将出现：

```
foo : 17 
a : 2 
b : 7 
0 : 1 
1 : 2 
2 : 3 
```

显然有很多方法可以处理这个问题，但您需要调整功能以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:25:20.597

**更新**：您可以这样做（取自以下链接之一）：

```
for (var key in validation_messages) {
   var obj = validation_messages[key];
   for (var prop in obj) {
      alert(prop + " = " + obj[prop]);
   }
} 
```

这是一个可能的副本：

[遍历对象属性](https://stackoverflow.com/questions/8312459/javascript-iterate-through-object-properties)

[如何以对象为成员循环遍历纯 JavaScript 对象？](https://stackoverflow.com/questions/921789/how-to-loop-through-javascript-object-literal-with-objects-as-members)

你可以在上面的帖子中找到你的答案。

# javascript - 局部变量使用推理

> ID：14525824
> 
> 赞同：0
> 
> 时间：2013-01-25T16:17:39.713
> 
> 标签：javascript

我有足够多的功能，看起来像：

```
var functionName = function(e) {
  // 
}; 
```

所有参数都在单个容器中传入`e`。大多数时候值是简单值（无函数），例如：

```
{ parameter1: 1, parameter2: "Name", parameter3:{ subParameter1: "A"}} 
```

但有时我传递函数如下：`{ p2:function(){...} }`

在使用参数值时，我有两种选择：

选项 1：从链中获取参数值，从`e`：e.parameter1、e.parameter3.subParameter1 等开始。

选项 2：使用缓存的参数值：

```
var parameter1 = e.parameter1;
var subParameter1 = e.parameter3.subParameter1; 
```

第二个选项提高了可读性，但增加了变量的数量和代码库的大小。另一方面，当使用长链时，它会更干燥，即`e.p1.p2.p3`等。

我应该使用什么推理在这两个选项之间进行选择？

```
**Update 1 - the question sounds quite subjective, let me re-prase it.** 
```

我不介意一直使用链，没有本地变量代码库更小，我总能弄清楚是什么，在任何情况下缓存是必须的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:31:18.300

基于深度（`e.p1`vs `e.p1.sp2.ssp3`）和使用频率的组合。更深的子属性和任何子属性的高使用率都受益于​​缓存。

嵌套属性查找可能会变得昂贵，如果您要经常使用它，在执行一次查找后缓存值是很有价值的。如果您不止一次地访问链上的特定属性，这只会更有效，并且您访问它的次数越多，您从缓存中受益越多。

如果您只有一层 deep( `e.p1, e.p2, e.p3`) 并且您只查找每个属性值一次，请不要打扰。

如果您在`e.p1.sp2.ssp3`整个函数中访问所有内容，请确保将其缓存。

# java - 如何调整 smartgwt 的 Listgrid 的 rownumber 列的大小？

> ID：14525825
> 
> 赞同：6
> 
> 时间：2013-01-25T16:17:40.437
> 
> 标签：java, gwt, smartgwt

smartgwt 的 Listgrid 具有显示行号的功能。我试着把它用在小桌子上，它就像一个魅力。

但是对于行数超过 9999 的表，“行号”列显示的位数不超过 4 位。

![在此处输入图像描述](../Images/6dd7304d50e90d7b9f2c18e110f60b66.png)

所以，这里有一个问题。如何使 Listgrid 显示“行号”列中的所有数字？

我的测试网格：

```
 ListGrid listGrid=new ListGrid();
    listGrid.setWidth(300);
    listGrid.setHeight(200);
    ListGridField name = new ListGridField("name", "Name");
    listGrid.setFields(name);
    listGrid.setShowRowNumbers(true);

    Record[] records=new Record[10000];
    for (int i=0; i<records.length; i++){
        Map<String, String> map=new HashMap<String, String>();
        map.put("name", "Hello");
        records[i]=new Record(map);
    }

    listGrid.setData(records);
    listGrid.setAutoFitData(Autofit.HORIZONTAL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:24:15.887

看看[这个](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/grid/ListGrid.html#setRowNumberFieldProperties%28com.smartgwt.client.widgets.grid.ListGridField%29)。您将能够更改宽度。

代码应该类似于

```
ListGridField rowNumberField = new ListGridField();

// Either
//-------------------------------------------------------
  rowNumberField.setWidth(15); //Whatever width you want
//-------------------------------------------------------
// Or
//-------------------------------------------------------
  rowNumberField.setAutoFitWidth(true);
//-------------------------------------------------------

ListGrid listGrid = new ListGrid();

listGrid.setRowNumberFieldProperties(rowNumberField); 
```

# html - 添加填充的奥秘

> ID：14525829
> 
> 赞同：0
> 
> 时间：2013-01-25T16:17:51.360
> 
> 标签：html, css, padding

我最近设计并完成了 2 个时事通讯；但是当我回去进行快速更改（在容器外部添加背景颜色）时，我意识到内容和背景颜色之间存在一些神秘的填充，我想要完成的是获取背景在主要内容的边缘着色。我已经玩了很多 CSS，但仍然没有想出一个修复..

以下是时事通讯的完整来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <title>The Cook's Nook</title>
        <style type="text/css">
            /* Client-specific Styles */
            #outlook a{padding:0;} /* Force Outlook to provide a "view in browser" button. */
            body{width:100% !important;} .ReadMsgBody{width:100%;} .ExternalClass{width:100%;} /* Force Hotmail to display emails at full width */
            body{-webkit-text-size-adjust:none;} /* Prevent Webkit platforms from changing default text sizes. */

            /* Reset Styles */
            body{margin:0; padding:0;}
            img{border:0; height:auto; line-height:100%; outline:none; text-decoration:none; float: left;}
            table td{border-collapse:collapse;}
            #backgroundTable{height:100% !important; margin:0; padding:0; width:100% !important;}

            /* Template Styles */

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: COMMON PAGE ELEMENTS /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Page
            * @section background color
            * @tip Set the background color for your email. You may want to choose one that matches your company's branding.
            * @theme page
            */
            body, #backgroundTable{
                background-color:#000000;
            }

            .bodyContent{
                padding-left: 40px;
            }
            /**
            * @tab Page
            * @section email border
            * @tip Set the border for your email.
            */
            #templateContainer{
                border: 2px solid #CCC;
            }

            /**
            * @tab Page
            * @section heading 1
            * @tip Set the styling for all first-level headings in your emails. These should be the largest of your headings.
            * @style heading 1
            */
            h1, .h1{
                color:#202020;
                display:block;
                font-family:sans-serif;
                font-size:34px;
                font-weight:normal;
                line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-bottom:10px;
                margin-left:0;
                text-align:left;
            }

            /**
            * @tab Page
            * @section heading 2
            * @tip Set the styling for all second-level headings in your emails.
            * @style heading 2
            */
            h2, .h2{
                color:#000000;
                display:block;
                font-family:Arial;
                font-size:12px;
                line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-bottom:10px;
                margin-left:0;
                text-align:left;
                font-weight: normal;
            }

            /**
            * @tab Page
            * @section heading 3
            * @tip Set the styling for all third-level headings in your emails.
            * @style heading 3
            */
            h3, .h3{
                color:#202020;
                display:block;
                font-family:Arial;
                font-size:26px;
                font-weight:bold;
                line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-bottom:10px;
                margin-left:0;
                text-align:left;
            }

            /**
            * @tab Page
            * @section heading 4
            * @tip Set the styling for all fourth-level headings in your emails. These should be the smallest of your headings.
            * @style heading 4
            */
            h1, .h1{
                color:#000000;
                display:block;
                font-family:Arial;
                font-size:16px;
                line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-bottom:10px;
                margin-left:0;
                text-align:left;
            }
            h4, .h4{
                color:#871d2a;
                display:block;
                font-family:Arial;
                font-size:13px;
                font-weight:bold;
                line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-bottom:10px;
                margin-left:0;
                text-align:left;
            }

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: PREHEADER /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Header
            * @section preheader style
            * @tip Set the background color for your email's preheader area.
            * @theme page
            */
            #templatePreheader{
                background-color:#FAFAFA;
            }

            /**
            * @tab Header
            * @section preheader text
            * @tip Set the styling for your email's preheader text. Choose a size and color that is easy to read.
            */
            .preheaderContent div{
                color:#505050;
                font-family:Arial;
                font-size:10px;
                line-height:100%;
                text-align:left;
            }

            /**
            * @tab Header
            * @section preheader link
            * @tip Set the styling for your email's preheader links. Choose a color that helps them stand out from your text.
            */
            .preheaderContent div a:link, .preheaderContent div a:visited, /* Yahoo! Mail Override */ .preheaderContent div a .yshortcuts /* Yahoo! Mail Override */{
                color:#336699;
                font-weight:normal;
                text-decoration:underline;
            }

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: HEADER /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Header
            * @section header style
            * @tip Set the background color and border for your email's header area.
            * @theme header
            */
            #templateHeader{
                background-color:#FFFFFF;
                border-bottom:0;
            }

            /**
            * @tab Header
            * @section header text
            * @tip Set the styling for your email's header text. Choose a size and color that is easy to read.
            */
            .headerContent{
                color:#202020;
                font-family:Arial;
                font-size:34px;
                font-weight:bold;
                line-height:100%;
                padding:0;
                text-align:center;
                vertical-align:middle;
            }

            /**
            * @tab Header
            * @section header link
            * @tip Set the styling for your email's header links. Choose a color that helps them stand out from your text.
            */
            .headerContent a:link, .headerContent a:visited, /* Yahoo! Mail Override */ .headerContent a .yshortcuts /* Yahoo! Mail Override */{
                color:#336699;
                font-weight:normal;
                text-decoration:underline;
            }

            #headerImage{
                height:auto;
                max-width:600px;
            }

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: MAIN BODY /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Body
            * @section body style
            * @tip Set the background color for your email's body area.
            */
            #templateContainer, .bodyContent{
                background-color:#FFFFFF;
            }

            /**
            * @tab Body
            * @section body text
            * @tip Set the styling for your email's main content text. Choose a size and color that is easy to read.
            * @theme main
            */
            .bodyContent div{
                color:#707070;
                font-family:Arial;
                font-size:8pt;
                line-height:150%;
                text-align:left;
                margin-bottom: 80px;
            }
            .bodyContent strong{
                color:#707070;
                font-family:Arial;
                font-size:9pt;
            }

            /**
            * @tab Body
            * @section body link
            * @tip Set the styling for your email's main content links. Choose a color that helps them stand out from your text.
            */
            .bodyContent div a:link, .bodyContent div a:visited, /* Yahoo! Mail Override */ .bodyContent div a .yshortcuts /* Yahoo! Mail Override */{
                color:#336699;
                font-weight:normal;
                text-decoration:underline;
            }

            .bodyContent img{
                display:inline;
                height:auto;
                padding-bottom: 5px;
            }
            .butn-img {
                float: right;
                margin-top: 10px;
            }

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: SIDEBAR /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Sidebar
            * @section sidebar style
            * @tip Set the background color and border for your email's sidebar area.
            */
            #templateSidebar{
                 background-color:#FFFFFF;
                 border-left:0;
            }

            /**
            * @tab Sidebar
            * @section sidebar text
            * @tip Set the styling for your email's sidebar text. Choose a size and color that is easy to read.
            */
            .sidebarContent div{
                color:#969696;
                font-family:Arial;
                font-size:12px;
                line-height:150%;
                text-align:left;
            }

            /**
            * @tab Sidebar
            * @section sidebar link
            * @tip Set the styling for your email's sidebar links. Choose a color that helps them stand out from your text.
            */
            .sidebarContent div a:link, .sidebarContent div a:visited, /* Yahoo! Mail Override */ .sidebarContent div a .yshortcuts /* Yahoo! Mail Override */{
                color:#336699;
                font-weight:normal;
                text-decoration:underline;
            }

            .sidebarContent img{
                display:inline;
                height:auto;
            }
            .sidebarContent div strong{
                color: #707070;
            } 
            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: FOOTER /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Footer
            * @section footer style
            * @tip Set the background color and top border for your email's footer area.
            * @theme footer
            */
            #templateFooter{
                background-color:#FFFFFF;
                border-top:0;
            }

            /**
            * @tab Footer
            * @section footer text
            * @tip Set the styling for your email's footer text. Choose a size and color that is easy to read.
            * @theme footer
            */
            .footerContent div{
                color:#707070;
                font-family:Arial;
                font-size:12px;
                line-height:125%;
                text-align:left;
            }

            /**
            * @tab Footer
            * @section footer link
            * @tip Set the styling for your email's footer links. Choose a color that helps them stand out from your text.
            */
            .footerContent div a:link, .footerContent div a:visited, /* Yahoo! Mail Override */ .footerContent div a .yshortcuts /* Yahoo! Mail Override */{
                color:#336699;
                font-weight:normal;
                text-decoration:underline;
            }

            .footerContent img{
                display:inline;
            }

            /**
            * @tab Footer
            * @section social bar style
            * @tip Set the background color and border for your email's footer social bar.
            * @theme footer
            */
            #social{
                background-color:#FAFAFA;
                border:0;
            }

            /**
            * @tab Footer
            * @section social bar style
            * @tip Set the background color and border for your email's footer social bar.
            */
            #social div{
                text-align:center;
            }

            /**
            * @tab Footer
            * @section utility bar style
            * @tip Set the background color and border for your email's footer utility bar.
            * @theme footer
            */
            #utility{
                background-color:#FFFFFF;
                border:0;
            }

            /**
            * @tab Footer
            * @section utility bar style
            * @tip Set the background color and border for your email's footer utility bar.
            */
            #utility div{
                text-align:center;
            }

            #monkeyRewards img{
                max-width:190px;
            }

        </style>
    </head>
    <body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0">
        <center>
            <table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="backgroundTable">
                <tr>
                    <td align="center" valign="top">
                        <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateContainer">
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Header \\ -->
                                    <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateHeader">
                                        <tr>
                                            <td class="headerContent">
                                            <img src="images/header-bg.png" />
                                                <!-- // Standard Header Image \\ -->
                                                <a href="http://www.heartlandresearch.com/"><img src="images/logo.png" style="padding-bottom:5px; padding-top:25px;padding-bottom:25px;"/></a>
                                                <div style="float:right;">
                                                <span style="float:right;padding-right:25px;"><a href="https://www.facebook.com/TheCooksNook"><img src="images/fb-social.gif" style="margin-top:15px;"/></a></span>
                                                <br /><br /><div style="float:right;">
                                                    <h1 style="padding-right:25px;text-align:right;" class="h1">620-241-7180</h1>
                                                    <h2 style="padding-right:25px;text-align:right;" class="h2">219 North Main Street, McPherson, KS 67460</h1>
                                                </div>

                                                <!-- // Standard Header Image \\ -->

                                            </td>
                                            <td class="headerContent">

                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="headerContent" style="padding-bottom:20px;">
                                            <a href="http://www.heartlandresearch.com/"><img src="images/butn-home.png" /></a>
                                            <a href="http://www.heartlandresearch.com/studies"><img src="images/butn-about-us.png" /></a>
                                            <a href="http://www.heartlandresearch.com/volunteers/getting-started"><img src="images/butn-in-store-coupons.png" /></a>
                                            <a href="http://www.heartlandresearch.com/sponsors"><img src="images/butn-photo-gallery.png" /></a>
                                            <a href="http://www.heartlandresearch.com/locations"><img src="images/butn-recipe-blog.png" /></a>
                                            <a href="http://www.heartlandresearch.com/locations"><img src="images/butn-contact-us.png" /></a>
                                            </td>
                                        </tr>
                                    </table>
                                    <!-- // End Template Header \\ -->
                                </td>
                            </tr>
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Body \\ -->
                                    <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateBody">
                                        <tr>
                                            <td valign="top">
                                                <table border="0" cellpadding="0" cellspacing="0">
                                                    <tr>
                                                        <td valign="top" class="bodyContent">

                                                            <!-- // Standard Content \\ -->
                                                            <table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-top: 5px;">
                                                                <tr>
                                                                    <td valign="top" style="border-right: 1px solid #E1E1E1;padding-right:20px;">
                                                                        <div>
                                                                            <img src="images/featured-image.png" style="padding-right:20px;margin-bottom:10px;"/>
                                                                            This scrumptious appetizer is quick and easy to make, try it for you next party, your guests will keep coming back for more.<br /><br /><strong>Captain Rodney's Cheese Bake</strong><br /><img src="images/featured-image-2.png" style="margin-top:5px;"/>                                                                        <div><ul style="float:left;list-style:bullet;padding-left: 13px;">
                                                                            <li>½ cup Mayonnaise</li>
                                                                            <li>8 oz package cream cheese</li>
                                                                            <li>2 cups grated sharp cheddar cheese</li>
                                                                            <li>2 green onions – chopped</li>
                                                                            <li>6 Ritz style crackers – crushed</li>
                                                                            <li>8 slices bacon – cooked and crumbled or ½ cup of real 
   bacon bits</li>  
                                                                            <li>½ cup of Captain Rodney’s Boucan Glaze – found at The 
   Cook’s Nook</li>                                                                         
                                                                           </ul></div><span style="float:left;">Mix mayonnaise, cream cheese, cheddar and onions till blended.  Place in pie pan.  Top with crackers and bake at 350 degrees for 15 minutes.  Top with bacon and Captain Rodney’s Glaze.  Serve with crackers.</span>                                                                        
                                                                       </div>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <!-- // Standard Content \\ -->

                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <!-- // Begin Sidebar \\  -->
                                            <td valign="top" width="200" id="templateSidebar">
                                                <table border="0" cellpadding="0" cellspacing="0" width="200" style="margin-left:-10px;">
                                                    <tr>
                                                        <td valign="top" class="sidebarContent">                                                       

                                                            <!-- // Top Image with Content \\ -->
                                                            <table border="0" cellpadding="20" cellspacing="0" width="100%">
                                                                <tr>
                                                                    <td valign="top" style="padding-left:20px;padding-top: 5px;">
                                                                        <div>
                                                                            <h1 style="text-align:center;" class="h4">This Month's Coupons</h1>
                                                                            <a href="#"><img src="images/sidebar-image.png" style="margin-bottom:15px;"/></a>
                                                                            <a href="#"><img src="images/sidebar-image-2.png" style="margin-bottom:15px;" /></a>
                                                                            <a href="#"><img src="images/butn-view-print-coupons.png" /></a>
                                                                        </div><br />
                                                                        <div>                                                                                                                                              
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <!-- // Top Image with Content \\ -->

                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <!-- // End Sidebar \\ -->
                                        </tr>
                                    </table>
                                    <!-- // End Template Body \\ -->
                                </td>
                            </tr>
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Footer \\ -->
                                    <table border="0" cellpadding="10" cellspacing="0" width="600" id="templateFooter">
                                        <tr>
                                            <td valign="top" class="footerContent">                                
                                                <!-- // Standard Footer \\ -->
                                                <table border="0" cellpadding="10" cellspacing="0" width="100%">
                                                    <img src="images/footer-bg.png" />
                                                </table>
                                                <!-- // Standard Footer \\ -->
                                            </td>
                                        </tr>
                                    </table>
                                    <!-- // End Template Footer \\ -->
                                </td>
                            </tr>
                        </table>
                        <br />
                    </td>
                </tr>
            </table>
        </center>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:31:42.713

我不确定为什么在 CSS 之上有很多内联样式。是否有一个原因？

但是，如果我理解这一点，您是否希望在中心容器中的内容和外部容器的黑色背景之间没有空间？

首先查看电话号码和地址部分，它们位于 H1 和 H2 中，它们都具有内联样式`padding-right: 25px`，这将解析标题部分。

在第 38 行，您有以下规则：`.bodyContent { padding-left: 40px; }`，它将解析左对齐的内容区域。

然后对于“This Month's Coupons”，您将对齐文本以使其居中。但是，其中一个父表（您在这里有很多嵌套表。这似乎非常不必要），您的负左边距为 10px。

# visual-studio-2010 - .Net Framework 4 项目使用 X86 DLL

> ID：14525831
> 
> 赞同：0
> 
> 时间：2013-01-25T16:17:53.627
> 
> 标签：visual-studio-2010, .net-4.0

我有一个在 VS2010 中构建的 .Net 项目，它针对使用较旧的 32 位 dll 的 .Net 4 进行编译。该项目将部署到 Windows 2008 64 位服务器，使用的 dll 已在 SYSWOW64 中注册，并被其他遗留程序使用。我遇到了一个问题，通过在项目属性的构建选项卡上将平台目标更改为 X86 来解决。最初，我编译了项目，并将有问题的 dll 复制到 bin 文件夹中。为了测试，我将发布文件夹复制到服务器桌面，程序运行良好。但是，如果我将本地副本设置为 false，则 dll 不会包含在 bin 中 - 正如预期的那样，但程序不再在服务器上运行。开发环境为 XP Service Pack 3。

为什么程序在SYSWOW64中找不到并使用该dll的注册副本？

# ajax - 将 JSON 解析为 highcharts - 使用 AJAX 收集的数据

> ID：14525834
> 
> 赞同：0
> 
> 时间：2013-01-25T16:18:01.550
> 
> 标签：ajax, json, parsing, dynamic, highcharts

我的 JSON 看起来像

```
[{"target": "sumSeries(integral(org.example.fib.hi.value),integral(org.example.fib.hi1.value))", 
"datapoints": 
    [
        [2, 1359214560], 
        [3, 1359215040], 
        [4, 1359215050], 
        [null, 1359215060], 
        [null, 1359215070], 
        [5, 1359215080], 
        [7, 1359215090], 
        [9, 1359215100], 
        [10, 1359215110], 
        [null, 1359215120], 
        [10, 1359215130], 
        [14, 1359215140], 
        [null, 1359215150]
    ]}
] 
```

我正在尝试从我的本地主机中获取这些数据并让 highcharts 呈现折线图。我有类似的东西：

```
$(function() {

$.getJSON('http://localhost/render?target=sumSeries(integral(org.example.fib.*.value))&from=-10minutes&format=json', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },

        series : [{
            name : 'AAPL',
            data : data,
            tooltip: {
                yDecimals: 2
            }
        }]
    });
});

}); 
```

如何解析这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:55:29.807

我假设您使用时间戳（作为 JSON 中的第二个参数），因此应该解析数据以显示为日期时间。如果是，您应该在 JSON 中恢复您的数据参数，并将时间戳乘以 1000（javascript 时间戳格式）。解析示例：

```
var tmpdata = [],
        i = 0,
        len = data[0].datapoints.length;

    for(i=0;i<len;i++)
    {
        tmpdata[i] = [data[0].datapoints[i][1]*1000,data[0].datapoints[i][0]];
    } 
```

然后在系列数据中：

```
series : [{
        name : 'AAPL',
        data : tmpdata,
        tooltip: {
            yDecimals: 2
        }
    }] 
```

# ios - NSInvalidArgumentException, unrecognized selector sent to instance when using performSegueWithIdentifier

> ID：14525839
> 
> 赞同：0
> 
> 时间：2013-01-25T16:18:15.137
> 
> 标签：ios, objective-c, uibutton, ibaction, uistoryboardsegue

I know the unrecognized selector to instance message is very common but I can't seem to find what's causing it in my project. I'm trying to basically segue from one controller to another when a particular button is tapped. I define the segue in storyboard. The buttons however are not created in storyboard, the buttons are created programmatically in a view controller, which is then inherited by the controller that I'm trying to segue from. Here's the code of what I'm trying to do: First this is part of my ButtonViewController.m which has the button and it this controller that I'm inheriting

```
UIButton *EButton=[UIButton buttonWithType:UIButtonTypeCustom];
[EButton setFrame:CGRectMake(0, 450, 106, 60)];
[EButton setAutoresizingMask:UIViewAutoresizingFlexibleTopMargin];
[EButton setImage:[UIImage imageNamed:@"test1.png"] forState:UIControlStateNormal];
[EButton setImage:[UIImage imageNamed:@"test2.png"] forState:UIControlStateHighlighted];
[EButton setEnabled:YES];
[EButton addTarget:self action:@selector(EButtonPressed) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:EButton];
-(IBAction)EButtonPressed:(id)sender
{
[self performSegueWithIdentifier:@"WorldtoE" sender:self];
} 
```

Now, I inherit this ButtonViewController.m in my WorldViewController. (Reason for this is, I need this button in different controller throughout my app and would prefer to just make changes once in case I need to). Now, the button is created perfect when I'm running the app, but as soon as I tap on it, I get this error: Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[WorldViewController EButtonPressed]: unrecognized selector sent to instance I even tried defining -(IBAction)EButtonPressed:(id)sender in my WorldViewController .h file and have also tried includingg the whole ibaction function in my .m file but I still get the same NSInvalidArgumentexception when I tap on the button. What am I doing wrong? And yes I have given the segue the same title in storyboard.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:19:30.093

Replace line:

```
[EButton addTarget:self action:@selector(EButtonPressed) forControlEvents:UIControlEventTouchUpInside]; 
```

to:

```
[EButton addTarget:self action:@selector(EButtonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

# ios - iOS Facebook SDK - 强制用户输入凭据

> ID：14525841
> 
> 赞同：1
> 
> 时间：2013-01-25T16:18:23.773
> 
> 标签：ios, facebook

在有一个中心用户和许多访客用户的 iOS 应用程序上工作。我希望来宾用户能够在应用程序上登录他们的 Facebook 帐户，而无需注销中央用户。我尝试使用 FBSessionLoginBehaviorForcingWebView 设置新的 FBSession 并设置我自己的令牌缓存策略（实际上根本没有缓存令牌），但它仍然使用默认应用程序用户的凭据并且不显示登录网络查看窗口。

根据 FB iOS sdk 文档，将行为设置为 FBSessionLoginBehaviorForcingWebView 应该强制 Web 视图显示用户必须输入其凭据的位置，但在我的应用程序中，它只是自动授权当前登录的中央用户。

我从 FB 提供的 Switch Users 示例中复制了大部分代码，只是我取出了“插槽”，因为它对来宾用户的数量设置了上限。这是问题的一部分吗？

```
FBSessionLoginBehavior behavior = FBSessionLoginBehaviorForcingWebView;
FacebookCustomerTokenCachingStrategy *tokenCachingStrategy = [[FacebookCustomerTokenCachingStrategy alloc] init];
self.session = [[FBSession alloc] initWithAppID:nil
                                    permissions:nil
                                urlSchemeSuffix:nil
                             tokenCacheStrategy:tokenCachingStrategy];

[self.session openWithBehavior:behavior
             completionHandler:^(FBSession *session,
                                 FBSessionState status,
                                 NSError *error) {                     
                 //do whatever                   
             }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:31:57.607

找到了解决方案。基本上，调用以下内容：

```
[FBSession.activeSession closeAndClearTokenInformation];
[FBSession.activeSession close];
[FBSession setActiveSession:nil]; 
```

仅清除本地 FB 会话信息，但不清除 Safari cookie。因此，在我登录用户后，我清除了 Safari cookie：

```
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies]) {
    [storage deleteCookie:cookie];
}
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

它不是很优雅，但它确实有效。现在，当下一个用户尝试登录时，它会强制他们输入凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:23:44.660

您是否尝试单击您注册的 Facebook 帐户的帐户设置，然后单击应用程序并删除授权的应用程序？

编辑

我知道一些应用程序也这样做，但我个人不知道该怎么做。在我看来，我认为应用程序需要强制 facebook 会话自动注销应用程序。因为有一种方法可以检测用户 facebook 帐户是否已登录，所以我认为也应该有一种相反的方法，对不起

# php - mcrypt 编码/解码链接问题

> ID：14525851
> 
> 赞同：0
> 
> 时间：2013-01-25T16:18:51.283
> 
> 标签：php, mcrypt

这是我的编码网址参数`aKVXt4_P78X64w5ApVAZJ0fSNpV_GGFWxBs0aE_xw_24ghq1C5awAAPPKYbZSi0rGJUmyPlohVsP0fE4-jHQnN`

当加密类对其进行解码时，结果是`±­�ыП^ґрьI§эЁ¶шЪ™МkVЃ°(ѓ7m‰e+и *“V«;Ё@ЧB§Z{Ћ‹JЈи_ЈWfUѕe`

我不明白这个问题的原因，它很少发生但带来了一些麻烦。

要对链接进行解码/解码，我使用此类。

```
class Encryption {
// config local ENCRIPTION_KEY
var $skey = ENCRIPTION_KEY; 

private function safe_b64encode($string) {
    $data = base64_encode($string);
    $data = str_replace(array('+','/','='),array('-','_',''),$data);
    return $data;
}

private function safe_b64decode($string) {
    $data = str_replace(array('-','_'),array('+','/'),$string);
    $mod4 = strlen($data) % 4;
    if ($mod4) {
        $data .= substr('====', $mod4);
    }
    return base64_decode($data);
}

public  function encode($value){
    if(!$value){return false;}
    $text = $value;
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $crypttext = trim(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $this->skey, trim($text), MCRYPT_MODE_ECB, $iv));
    return trim($this->safe_b64encode($crypttext));
}

public function decode($value){
    if(!$value){return false;}
    $crypttext = $this->safe_b64decode($value);
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $decrypttext = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $this->skey, $crypttext, MCRYPT_MODE_ECB, $iv);
    return trim($decrypttext);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T09:59:09.917

我相信您遇到的问题是您正在使用随机 IV 进行加密，然后尝试使用完全不同的随机 IV 进行解密。拥有一个随机 IV 很重要，但您需要相同的 IV 才能解密。只要隐藏了常量 KEY，IV 就不需要保密。

@Daniel 说欧洲央行不使用 IV 时也是正确的。它会忽略它，所以最后一段现在是静音的。但是，您应该考虑从 ECB 切换到 CBC，因为它更安全（仅仅是因为它确实使用了 IV）。

我编写了一个小类来在 CBC 模式下使用 MCRYPT 进行加密/解密（允许任何支持的加密算法，例如 BLOWFISH、TWOFISH、RIJNDAEL 等）。加密时，它会创建一个随机 IV，然后将其添加到加密字符串之前，然后以十六进制返回整个批次。然后当它需要解密相同的字符串时，它将转换回 bin，确定加密算法的 iv 大小，从加密字符串中删除 IV 并使用它返回解密的字符串。如果您认为它可能有帮助，您可以[检查一下](http://www.at-wd.com/code/6/php-two-way-cipher-class)。希望能帮助到你。

# sed - 动态构建 rsync 和 egrep 格式的排除列表

> ID：14525852
> 
> 赞同：1
> 
> 时间：2013-01-25T16:18:54.820
> 
> 标签：sed, awk, find, rsync, grep

我想知道是否有人可以帮助我尝试解决我的问题。

我编写了一组 shell 脚本，目的是基于审计服务器上的 GOLD 构建审计远程文件系统。

作为其中的一部分，我执行以下操作：

1) 使用 rsync 计算任何新文件或目录，任何修改或删除的文件

2）`find ${source_filesystem} -ls`在本地和远程使用以解决权限差异

现在作为其中的一部分，我排除了某些文件或目录，即日志、跟踪文件等。

因此，为了实现这一点，我使用了 2 种方法：

1) RSYNC - 我有一个使用`--exclude-from`标志添加的排除列表

2) `find -ls`- 我使用一个`egrep -v`语句来排除与 rsync 排除列表相同的内容：

例如`find -L ${source_filesystem} -ls | egrep -v "$SEXCLUDE_supt"`

所以我的问题是我必须维护 2 个单独的列表，这有点像管理员的噩梦。

我正在寻找有关是否可以动态构建可用于 rsync 或`find -ls`?

以下是排除列表的格式：

同步：

```
*.log
*.out
*.csv
logs
shared
tracing
jdk*
8.6_Code
rpsupport
dbarchive
inarchive
comms
PR116PICL
**/lost+found*/
dlxwhsr*
regression
tmp
working
investigation
Investigation
dcsserver_weblogic_*.ear
dcswebrdtEAR_weblogic_*.ear 
```

寻找：

```
SEXCLUDE_supt="\.log|\.out|\.csv|logs|shared|PR116PICL|tracing|lost\+found|jdk|8\.6\_Code|rpsupport|dbarchive|inarchive|comms|dlxwhsr|regression|tmp|working|investigation|Investigation|dcsserver_weblogic_|dcswebrdtEAR_weblogic_" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:50:56.443

最后 grep -Evf 有点像噩梦，因为 rsync 不支持正则表达式，它使用正则表达式但不一样。

因此，我通过解析 rsync 排除列表并动态构建变量以传递给 egrep 来追求我的另一个想法，即为 egrep 动态构建排除列表。

这是我使用的方法：

```
#!/bin/ksh
# Create Signature of current build

AFS=$1

#Create Signature File
crSig()
{
  find -L ${SRC} -ls | egrep -v **"$SEXCLUDE"** | awk '{fws = ""; for (i = 11; i <= NF; i++) fws = fws $i " "; print $3, $6, fws}' | sort >${BASE}/${SIFI}.${AFS}
}

#Setup SRC, TRG & SCROOT
LoadAuditReqs()
{
  export SRC=`grep ${AFS} ${CONF}/fileSystem.properties | awk {'print $2'}`
  export TRG=`grep ${AFS} ${CONF}/fileSystem.properties | awk {'print $3'}`
  export SCROOT=`grep ${AFS} ${CONF}/fileSystem.properties | awk {'print $4'}`
  **export BEXCLUDE=$(sed -e 's/[*/]//g' -e 's/\([._+-]\)/\\\1/g' ${CONF}/exclude-list.${AFS} | tr "\n" "|")**
  **export SEXCLUDE=$(echo ${BEXCLUDE} |  sed 's/\(.*\)|/\1/')**
}

#Load Properties File
LoadProperties()
{
  . /users/rpapp/rpmonit/audit_tool/conf/environment.properties
}

#Functions
LoadProperties
LoadAuditReqs
crSig 
```

所以有了这些新变量：

```
 **export BEXCLUDE=$(sed -e 's/[*/]//g' -e 's/\([._+-]\)/\\\1/g' ${CONF}/exclude-list.${AFS} | tr "\n" "|")**
  **export SEXCLUDE=$(echo ${BEXCLUDE} |  sed 's/\(.*\)|/\1/')** 
```

我用它们来删除“*”和“/”，然后匹配我的特殊字符并在前面加上“\”来转义它们。

然后它使用“tr”用“|”替换换行符 然后重新运行该输出以删除尾随的“|” 使变量 $SEXCLUDE 用于在 crSig 函数中使用的 egrep。

你怎么看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:51:37.747

您不需要为您的`find`命令创建第二个列表。`grep`可以使用`-f`标志处理模式列表。从手册：

```
-f FILE, --file=FILE
    Obtain patterns from FILE, one per line. The empty file contains zero 
    patterns, and therefore matches nothing. (-f is specified by POSIX.) 
```

这是我要做的：

```
find -L ${source_filesystem} -ls | grep -Evf your_rsync_exclude_file_here 
```

这也适用于包含换行符和空格的文件名。请让我知道情况如何。

# ruby-on-rails - Rails 2 + SQL server：如何制作应该有多个时间戳的表？

> ID：14525857
> 
> 赞同：0
> 
> 时间：2013-01-25T16:18:57.727
> 
> 标签：ruby-on-rails, sql-server

您好我目前正在开发一个使用 Microsoft SQL Server 的 Rails 2 项目。我即将实现delayed_job gem，它允许后台进程。为此，我必须在迁移中创建一个如下所示的表：

```
class CreateDelayedJobs < ActiveRecord::Migration
  def self.up
    create_table :delayed_jobs, :force => true do |table|
      table.integer  :priority, :default => 0      # Allows some jobs to jump to the front of the queue
      table.integer  :attempts, :default => 0      # Provides for retries, but still fail eventually.
      table.text     :handler                      # YAML-encoded string of the object that will do work
      table.text     :last_error                   # reason for last failure (See Note below)
      table.datetime :run_at                       # When to run. Could be Time.zone.now for immediately, or sometime in the future.
      table.datetime :locked_at                    # Set when a client is working on this object
      table.datetime :failed_at                    # Set when all retries have failed (actually, by default, the record is deleted instead)
      table.string   :locked_by                    # Who is working on this object (if locked)
      table.timestamps
    end

    add_index :delayed_jobs, [:priority, :run_at], :name => 'delayed_jobs_priority'
  end

  def self.down
    drop_table :delayed_jobs  
  end
end 
```

请注意，有 3 个日期时间列。但是，我必须使用 SQL Server 语法在纯 SQL 中执行此操作。根据 W3 学校：

```
timestamp   Stores a unique number that gets updated every time a row gets created or modified. The timestamp value is based upon an internal clock and does not correspond to real time. Each table may have only one timestamp variable

CREATE TABLE delayed_jobs
{
    id uniqueidentifier,
    priority int,
    attempts int,
    handler text,
    last_error text,
    run_at timestamp,
    locked_at timestamp,
    failed_at timestamp,
    locked_by varchar(255)
}; 
```

1.  我怎样才能绕过这个单一的时间戳限制？
2.  如何添加索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:23:52.253

只是提醒一下，你会因为在这里提到 W3 学校而被钉死。:-) 这是一个邪恶的网站。无论如何，您可以根据需要拥有尽可能多的时间戳列。它们可以保存系统时间或您想要的任何其他时间戳。没有限制。

对于索引，使用：

```
CREATE INDEX index_name
ON table_name (column_name) 
```

或者

```
CREATE UNIQUE INDEX index_name
ON table_name (column_name) 
```

# java - 从PNG图像中提取元数据

> ID：14525858
> 
> 赞同：2
> 
> 时间：2013-01-25T16:18:59.423
> 
> 标签：java, image, imagemagick, png, metadata

我正在尝试从 PNG 图像格式中提取元数据。我正在使用这个库？[http://code.google.com/p/metadata-extractor/](http://code.google.com/p/metadata-extractor/)

尽管它声称支持 PNG 格式，`File format is not supported`但当我使用 PNG 图像尝试它时会出现错误。从源代码（在方法中`readMetadata`，它看起来也不支持 PNG 格式：[http ://code.google.com/p/metadata-extractor/source/browse/Source/com/drew/imaging/ImageMetadataReader.java ?r=1aae00f3fe64388cd14401b2593b580677980884](http://code.google.com/p/metadata-extractor/source/browse/Source/com/drew/imaging/ImageMetadataReader.java?r=1aae00f3fe64388cd14401b2593b580677980884)

我也尝试过这段代码，但它也没有提取 PNG 上的元数据。

顺便说一句，我正在使用 imagemagick 在 PNG 上添加元数据，如下所示：

```
mogrify -comment "Test" Demo/myimage.png 
```

有没有人将此库用于 PNG 格式，或者是否有其他方法可以从 PNG 图像中提取元数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:27:09.673

你可以试试[PNGJ](https://github.com/leonbloy/pngj)（我是开发者）

参见例如here一个转储所有块的[示例。](https://github.com/leonbloy/pngj/blob/master/src/test/java/ar/com/hjg/pngj/samples/SampleShowChunks.java)如果你想读取一个特定的文本块（回想一下，在 PNG 中，每个文本元数据都有一个键和一个值），你可以写

```
 pngr.getMetadata().getTxtForKey("mykey") 
```

一个有用的小 Windows 程序可以窥视 PNG 块结构是[TweakPNG](http://entropymine.com/jason/tweakpng/)

更新：如果您想检查所有文本块（请记住，三种类型存在一些差异，但是......）

```
PngReader pngr = FileHelper.createPngReader(new File(file));
pngr.readSkippingAllRows();
for (PngChunk c : pngr.getChunksList().getChunks()) {
      if (!ChunkHelper.isText(c))   continue;
      PngChunkTextVar ct = (PngChunkTextVar) c;
      String key = ct.getKey();
      String val = ct.getVal();
      // ... 
} 
```

还要记住，允许具有重复键的文本块。

# c# - 最小化图像的内存消耗列表框（WPF）

> ID：14525859
> 
> 赞同：6
> 
> 时间：2013-01-25T16:19:00.707
> 
> 标签：c#, wpf, listbox

我有绑定到 ObservableCollection 并使用文件名显示图像的列表框 ![在此处输入图像描述](../Images/fe001ca8bc868fa9ebc6eae44a4cd0e0.png)

我的xml是：

```
<Window x:Class="ThumbnailsView.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="578" WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="55"/>
        </Grid.RowDefinitions>

            <ListBox Grid.Row="0" x:Name="ImageListbox"
        ItemsSource="{Binding}" 
        Background="AliceBlue" ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Height="16" VerticalAlignment="Top" Margin="0,10,0,0"/>
                            <Image Margin="10,10,10,0" Height="64" Width="64" VerticalAlignment="Top">
                                <Image.Source>
                                    <BitmapImage DecodePixelWidth="64" UriSource="{Binding Path=Name}"/>
                                </Image.Source>                            
                            </Image>
                    </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>

        <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
            </ListBox>

            <Button Grid.Row="1" Content="Get Images" Name="getImageBtn" Click="getImageBtn_Click" Width="100" Height="30"></Button>

    </Grid>
</Window> 
```

问题是，它会加载整个图像，如果我有大量集合，它将消耗大量内存。如何最小化它的内存消耗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:20:25.450

启用 UI 虚拟化。然后 UI 控件将被回收并使用最少的内存。

您还可以加载缩略图而不是完整的照片。

* * *

一些要阅读的资源：

[http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization) [https://stackoverflow.com/questions/14456075/how-to-enable-ui-virtualization-in-standard-wpf-listview](http://www.zagstudio.com/blog/497#.UQKxpScqb6U) [WPF ListBox使用 ListBox - UI 虚拟化和滚动](https://stackoverflow.com/questions/1977929/wpf-listbox-with-a-listbox-ui-virtualization-and-scrolling) [http://www.zagstudio.com/blog/497#.UQKxpScqb6U](http://www.zagstudio.com/blog/497#.UQKxpScqb6U)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:24:26.280

加载图像后，将其调整为更易于管理的大小，然后释放未使用的大图像。这仍然需要很长时间才能加载，但会占用更少的内存。要减少加载时间，请参阅`dutzu's`答案并使用延迟加载和虚拟化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:24:38.067

使用虚拟化堆栈面板查看链接以获取有关如何执行此操作的示例。

[http://www.jonathanantoine.com/2011/10/07/wpf-4-5-%E2%80%93-part-11-new-features-for-the-virtualizingpanel/](http://www.jonathanantoine.com/2011/10/07/wpf-4-5-%E2%80%93-part-11-new-features-for-the-virtualizingpanel/)

# php - 无法让排序数组工作

> ID：14525872
> 
> 赞同：1
> 
> 时间：2013-01-25T16:19:32.917
> 
> 标签：php, arrays, sorting

> **可能重复：**
> [php sort($array) 不工作 - 返回 1 而不是排序数组](https://stackoverflow.com/questions/6443493/php-sortarray-not-working-returning-1-instead-of-sorted-array)

我很难让数组 sort() 函数按预期工作，我也尝试过 ksort() 等。 :::

**这很好用**

```
foreach( (array) $query as $post ) {
   $VP = ( ( empty($PMD['vehicle_price'][0]) ) ?  $VP = 'On Request' : $VP = $PMD['vehicle_price'][0] ); 
      $vehicle_p[] = $VP;
}

$return = array_count_values($vehicle_p); //Key Value Unique ( count )

foreach($return as $value => $count) {
   <li><span class="key">' . $value . '</span> (' . $count . ')</li>
} 
```

**最终结果：** 480000 (1)、80000 (2)、120400 (1)

我现在想对此进行排序，因此 80000 (2) 在列表中的第一位，然后是 120400 (1)，然后是 480000 (1)

只要我添加任何如下所示的**sort()**函数，我只会得到一个输出 1

我无法让它工作任何帮助将不胜感激

```
$return = array_count_values($vehicle_p); //Key Value Unique ( count )
$return = sort($return);
print_r($return); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:22:18.723

[sort](http://us3.php.net/manual/en/function.sort.php)函数返回一个布尔值。

因此，`$return`通过将此布尔值分配给`$return`.

简单地做

```
sort($return); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T16:24:44.773

如果我理解正确，您想按升序对数组进行排序？如果这是正确的看看`asort()`哪个将按值对数组进行排序但保持索引/键不变

[http://php.net/manual/en/function.asort.php](http://php.net/manual/en/function.asort.php)

请记住，排序函数返回一个布尔值，因此不要将它们分配给变量，只需调用数组上的函数。

```
asort($array); 
```

# git - git ignore_global 设置但未被 git 使用

> ID：14525881
> 
> 赞同：0
> 
> 时间：2013-01-25T16:20:00.673
> 
> 标签：git, github, gitignore

我已经阅读了其他问题 git ignore files 的解决方案，但我仍然无法让它工作。

所以这就是我所做的：

1.  创建的`.gitignore_global`文件。
2.  添加`.mp3 .mp4 .oog .wmv .wma`然后保存。
3.  执行了这个命令：

`git config --global core.excludesfile .gitignore_global`

但是当我提交时，它仍然会添加我的 mp3 文件。`git rm -r --cached .`然后我什至尝试`git add .`清除缓存，但即使在那之后它仍然将其添加回来。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:42:52.887

您可以尝试添加到`.gitignore_global`以下行：

```
# Audio files #
###############

*.mp3 
*.mp4 
*.oog 
*.wmv 
*.wma 
```

请参阅文档[Ignoring-files](https://help.github.com/articles/ignoring-files)。

# c# - 带锁的 C# 多线程

> ID：14525888
> 
> 赞同：0
> 
> 时间：2013-01-25T16:20:05.417
> 
> 标签：c#, .net, multithreading

我是 C# 的初学者。我正在查看多线程示例。

我已经设置了一个多线程的方法调用`DoTransactions()`，它又会生成一个随机数 as `amount`，并调用方法来`Withdraw()`扣除`salary`。`amount`

1）我不明白的是为什么作者选择锁定对象`thisLock`而不是锁定工资？我看到其他一些人也通过声明一个对象并锁定它来以这种方式锁定线程。

2）有时我无法调试其他线程运行时调用的方法。（按 F10/F11）。（例如方法`Withdraw()`）。这有什么原因吗？

```
Department dep = new Department(1000); 
Thread t = new Thread(new ThreadStart(dep.DoTransactions));   //set up 1000 threads.

class Department
    {
        private Object thisLock = new Object();
        int salary = 10000;

        int Withdraw(int amount)
        {
            lock (thisLock)
            {
                if (salary >= amount)
                {
                    salary = salary - amount;
                    return amount;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:23:58.650

1.  您只能锁定类（引用类型），而 Salary 是一个值类型的 int。

MSDN：

> lock 语句的表达式必须表示引用类型的值。不会对 lock 语句的表达式执行任何隐式装箱转换（第 6.1.5 节），因此表达式表示值类型的值是编译时错误。

[http://msdn.microsoft.com/en-us/library/aa664735(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664735%28v=vs.71%29.aspx)

1.  不能调试是什么意思？调试器可能会在线程之间跳转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:24:41.290

您在`lock`语句中输入的内容（如`lock (thisLock)`）**不是被锁定的数据**。如果您考虑一下，情况并非如此：如果您想修改两个变量，您会将哪个变量放入`lock`？（答案：不存在答案。不可能。）。

取而代之的是，当访问在逻辑上受锁保护的数据时，您将引用始终**按惯例锁定的对象。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:31:09.687

在调试多线程应用程序时，使用断点来强制查看特定的代码行。你不能依赖你的步入和跨步依次工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T16:32:04.630

回答你的第二个问题：

可能您需要先选择“全部中断”（单击“全部中断”按钮）停止运行所有线程，然后转到“调试|Windows|线程”查看可以调试的所有线程的列表。（当然，每个都有一个单独的堆栈帧。）

从那里你可以双击一个线程来查看它是否有任何源代码。（有些是您没有启动的“内部”线程，并且这些线程没有您可以看到的源代码。只需继续单击线程，直到找到一个有趣的线程。;）

除此之外，在您感兴趣的线程将执行的代码中设置断点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T16:21:56.070

使用锁是为了让只有 1 个线程可以随时访问该位代码。为了启用线程之间的同步，它们必须轮流锁定一个对所有线程都可用的对象。

# .net - MOSS 2007 中的 SharePoint 2010 功能区

> ID：14525891
> 
> 赞同：0
> 
> 时间：2013-01-25T16:20:11.093
> 
> 标签：.net, sharepoint

我想知道你们中是否有人对如何在 MOSS 2007 中实现功能区控件有任何经验/建议/想法，这与 SP 2010 中可用的版本相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:19:57.610

有趣的问题，听起来像是我想做的事情......

我认为我的方法是利用 Javascript 和 JQuery 来构建功能区以及相关的按钮和子按钮。使它们成为模块化的小段 html，并存储在 SharePoint 列表中。然后创建一个包含 url 方案和对该 html 库的查找的查找列表。渲染时，让 JS 功能区根据给定页面 url 的列表中的内容确定要显示的 html 位。也许使用正则表达式。也有一个默认功能区。

立即想到的一个设计问题是，您如何设计它以使功能区足够智能，可以知道它位于列表页面还是文档库。否则，您必须为每个 url 方案设置一些 url+ribbon html 组合。

# html - CSS3 动画和悬停 - 一起工作？

> ID：14525894
> 
> 赞同：0
> 
> 时间：2013-01-25T16:20:15.770
> 
> 标签：html, css, css-transitions

我正在尝试使元素悬停效果这是我的代码片段和小提琴

[http://jsfiddle.net/Fbk9t/](http://jsfiddle.net/Fbk9t/)

```
/* Setting up the "myAnim1" for all browser types
-------------------------------------------------*/
 @keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
}
/* Firefox */
 @-moz-keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
}
/* Safari and Chrome */
 @-webkit-keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
}
/* Opera */
 @-o-keyframes myAnim1 {
    0% {
        background-color: #212121;
    }
    50% {
        background-color: #31f4dc;
    }
    100% {
        background-color: #212121;
    }
}
/* Attaching the animations to the elements
Notice the difference between timing!!
-------------------------------------------------*/
 .firstelement {
    display:inline-block;
    animation:myAnim1 5s;
    -moz-animation:myAnim1 5s infinite;
    -webkit-animation:myAnim1 5s infinite;
    -webkit-transition: 0.3s ease;
    -moz-transition: 0.3s ease;
    -ms-transition: 0.3s ease;
    -o-transition: 0.3s ease;
    transition: 0.3s ease;
}
 .firstelement:hover {
    background-color: #ff0000;} 
```

因此，无论我如何设置悬停，动画都会继续运行。帽子是解决这种情况的正确途径吗？

还要注意过渡..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:48:58.463

您需要在`:hover`元素时停止动画循环，因此：

```
 .firstelement:hover {
    background-color: #ff0000;
    animation: none;
    -moz-animation: none;
    -webkit-animation: none;
} 
```

这是示例[http://jsfiddle.net/Fbk9t/1/](http://jsfiddle.net/Fbk9t/1/)

我希望它对你有帮助；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:52:02.703

将以下代码从无限更改为 1：

```
Old version:
    -moz-animation:myAnim1 5s infinite;
    -webkit-animation:myAnim1 5s infinite;
New version
    -moz-animation:myAnim1 5s 1;
    -webkit-animation:myAnim1 5s 1; 
```

# sql - 我应该如何组合这些 SQL 查询：自联接还是使用临时表？

> ID：14525895
> 
> 赞同：1
> 
> 时间：2013-01-25T16:20:18.687
> 
> 标签：sql, self-join, temp-tables

我正在创建一个存储过程，从几个不同的表中提取聚合总和值。另外，查询很简单，使用不同的过滤器。

查询需要连接在一起，如下所示：

```
select distinct(bus_name), sum(act) as 'totrev', sum(budget) as 'budget rev' 
from finance
where year = '2011' 
and type_desc = 'rev'
group by bus_code, bus_name
order by bus_name asc

select distinct(bus_name), sum(act) as 'totalexp', sum(budget) as 'budget exp' 
from finance
where year = '2011' 
and type_desc = 'exp'
group by bus_code, bus_name
order by bus_name asc

select distinct(bus_name), sum(end_balance) as 'total assets' 
from Balance
where year = '2011' 
and type_desc = 'assets'
group by bus_code, bus_name
order by bus_name asc

select distinct(bus_name), sum(end_balance) as 'Cash' 
from Balance
where year = '2011' 
and type_desc = 'equity'
group by bus_code, bus_name
order by bus_name asc

select bus_code, bus_name, count(bus_code) as '#of bldgs'
from building
group by bus_code, bus_name
order by bus_name asc 
```

我希望合并/连接所有要在一个表中查看的列。财务
表列 = bus_code、bus_name、# of bldgs、tot_rev、budget_rev、totalexp、budget exp、总资产、现金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:05:13.997

通过使用嵌套查询尝试这样的事情：

```
SELECT T5.bus_code, T5.bus_name, T5.[# of bldgs], T1.tot_rev, T1.budget_rev, T2.totalexp, T2.[budget exp], T3.[total assets], T4.cash
FROM
    (
    select distinct(bus_name), sum(act) as 'totrev', sum(budget) as 'budget rev' 
    from finance
    where year = '2011' 
    and type_desc = 'rev'
    group by bus_code, bus_name
    order by bus_name asc
    ) T1 INNER JOIN
    (
    select distinct(bus_name), sum(act) as 'totalexp', sum(budget) as 'budget exp' 
    from finance
    where year = '2011' 
    and type_desc = 'exp'
    group by bus_code, bus_name
    order by bus_name asc
    ) T2 ON T1.bus_name = T2.bus_name
    INNER JOIN
    (
    select distinct(bus_name), sum(end_balance) as 'total assets' 
    from Balance
    where year = '2011' 
    and type_desc = 'assets'
    group by bus_code, bus_name
    order by bus_name asc
    ) T3 ON T2.bus_name = T3.bus_name
    INNER JOIN
    (
    select distinct(bus_name), sum(end_balance) as 'Cash' 
    from Balance
    where year = '2011' 
    and type_desc = 'equity'
    group by bus_code, bus_name
    order by bus_name asc
    ) T4 ON T3.bus_name = T4.bus_name
    INNER JOIN
    (
    select bus_code, bus_name, count(bus_code) as '#of bldgs'
    from building
    group by bus_code, bus_name
    order by bus_name asc
    ) T5 ON T4.bus_name = T5.bus_name 
```

我假设内部联接，但如果其中一些没有特定业务的条目，您可能需要使用外部联接。但是一般的技术是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:03:53.127

如果您的 SQL 支持 CASE 表达式，您可以使用它们为每种类型创建“虚拟”字段，然后将它们汇总。

```
select bus_code, bus_name
 ,sum(case when type_desc = 'rev' then act else 0 end) as 'totrev'
 ,sum(case when type_desc = 'rev' then budgetelse 0 end) as 'budget rev' 
 ,sum(case when type_desc = 'exp' then act else 0 end) as 'totexp'
 ,sum(case when type_desc = 'exp' then budgetelse 0 end) as 'budget exp' 
 ... ... etc.
from finance
where year = '2011' 
group by bus_code, bus_name
order by bus_name asc 
```

最后一个（建筑）表可以简单地连接到这个，在总线代码上

# preg-match - preg_match 以简单模式失败

> ID：14525897
> 
> 赞同：0
> 
> 时间：2013-01-25T16:20:21.610
> 
> 标签：preg-match

我正在尝试分析**上传文件**（应该是图像）的内容，以阻止任何恶意篡改。因此，在处理之前，我想检测文件是否包含例如 PHP 代码。

```
$patern = "/<?php/" ;
                    $handle  = fopen ($_FILES['image']['tmp_name'], "r");
                    if ($handle) 
                    {
                        while (($buffer = fgets($handle, 4096)) !== false)
                        {                                   
                                if ( preg_match ( $patern , $buffer ) );
                                {
                                echo "PHP files are forbidden";                                 
                                }                               
                        }
                        if (!feof($handle))
                            {
                            echo "Error: fgets() failed\n";
                            }
                        fclose($handle);
                    } 
```

发送图像后，结果是“PHP 文件被禁止”回显了 180 次。好的，正常，它在循环中，但在 mi pic 中没有一个**php**模式......有什么问题？模式？预匹配？亨德尔？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:20:56.970

对不起，

错误是：语法错误：末尾的分号：

```
 if ( preg_match ( $patern , $buffer ) ); 
```

否则它工作正常

# xcode - CMake 没有设置 Xcode 的用户包含路径

> ID：14525898
> 
> 赞同：1
> 
> 时间：2013-01-25T16:20:23.857
> 
> 标签：xcode, cmake

使用 CMake 生成 Xcode 项目时，它不会添加`/usr/local/include`到 Xcode 的标头搜索路径中。有没有办法在 CMake 构建文件中解决这个问题，而无需在每次生成项目时手动更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:44:31.413

我发现这比我想象的要容易，因为我需要做的只是一个简单的：

```
include_directories(/usr/local/include) 
```

为了可移植性，我最终选择了以下内容，尽管我不确定这是否对非 Linux 平台有很大帮助，无论如何：

```
include_directories(${CMAKE_INSTALL_PREFIX}/include) 
```

# android - Android 自定义滚动条区域

> ID：14525903
> 
> 赞同：0
> 
> 时间：2013-01-25T16:20:34.823
> 
> 标签：android

我正在开发一个可以左右滚动和上下滚动的地图。什么是最好的视图？

我不想使用 WebView。我想使用一些滚动查看带有 MATCH_PARENT 的位图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:51:29.133

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView android:id="@+id/ScrollView02" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        xmlns:android="http://schemas.android.com/apk/res/android">
<HorizontalScrollView android:id="@+id/HorizontalScrollView01" 
                  android:layout_width="wrap_content" 
                  android:layout_height="wrap_content">
 <ImageView android:id="@+id/ImageView01"
       android:src="@drawable/pic" 
       android:isScrollContainer="true" 
       android:layout_height="fill_parent" 
       android:layout_width="fill_parent" 
       android:adjustViewBounds="true">
  </ImageView>
  </HorizontalScrollView>
  </ScrollView> 
```

# cisco - 在自动配置期间禁用 CISCO WLC 上的警告

> ID：14525904
> 
> 赞同：-1
> 
> 时间：2013-01-25T16:20:35.920
> 
> 标签：cisco

我正在创建一个脚本来自动配置 CISCO WLC，并想知道是否有办法在脚本运行之前禁用警告，然后在最后重新启用。这将消除必须回答警告问题。

例如，如果您发送“auth-list ap-policy lsc enable”，则 WLC 的返回是“警告！设置 LSC 模式不适用于 Mesh APs.Apply(y/n)？” 我想关闭警告，只使用控制器，除了命令并继续前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:43:17.530

如果您让脚本推出配置，请使用 expect 来处理这个问题。既然你知道问题来了，这很容易。

```
expect -re "(y/n)?\r"
send "y\r" 
```

或者，您可以将配置自动作为平面文件，然后

```
'transfer download datatype config' 
```

# javascript - 哪个在 JavaScript 中有更好的性能？绑定到 jQuery.data 属性的变量还是闭包范围内的变量？

> ID：14525905
> 
> 赞同：1
> 
> 时间：2013-01-25T16:20:44.153
> 
> 标签：javascript, performance

在以下代码中，我将变量 t 和 hoverCalled 保存在闭包范围内。如果我将它们保存在 jQuery.data 属性中，性能会更好吗？我听说创建闭包范围在性能方面有点昂贵。但是，我不知道它是否比替代品更糟糕。

`hoverDelay = function(hoverIn,hoverOut) {`

 ````
var t=null;
var hoverCalled=false;
return {
    hoverIn:function() {        
        t = setTimeout(function() {     
            //$(self).data('hoverCalled',true);
            hoverCalled=true;
            hoverIn();          
        }, 500);
        $(this).data('timeout', t);     
    },
    hoverOut:function() {   
        if (hoverCalled){
            hoverOut();
            hoverCalled=false;
        } else {
            //var t=$(self).data('timeout');
            //clearTimeout($(this).data('timeout'));        
            t&&clearTimeout(t);
        }                               
    }

}; 
```` 

`};`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:35:19.677

> .data() 方法允许我们以一种安全的方式将任何类型的数据附加到 DOM 元素，从而避免循环引用，从而避免内存泄漏。

说 JQuery 文档。所以是的，如果你关心性能，你最好将值存储在 JQuery.data() 中。但是，您不太可能在小型应用程序中看到任何差异。

此外，DOM 修改可能非常昂贵。但是同样，如果您不是构建非常大的应用程序，您几乎不会注意到差异。如果你这样做了，那么我想你应该根据你拥有的代码来决定什么是最好的。

# javascript - 调用 jquery "parse/format" html 函数

> ID：14525906
> 
> 赞同：0
> 
> 时间：2013-01-25T16:20:59.117
> 
> 标签：javascript, jquery, html, jquery-mobile

我有一个简单的 html 页面：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.2">
    <link rel="stylesheet" href="js/jquery.mobile-1.2.0.css" />
    <script src="js/jquery-1.8.2.js"></script>
    <script src="js/jquery.mobile-1.2.0.js"></script>
</head>
  <body>
    <div id="c">

        <div data-role="page">
            <div data-role="header">
                <h1> My Title </h1>
            </div>                        
        </div>

    </div>
  </body>
</html> 
```

当页面加载时，jquery 如何“解析/格式化”该 html 的正文：

```
<body>
    <div id="c" class="ui-mobile-viewport ui-overlay-c">
        <div data-role="page" data-url="/jqueryMobile/TC_Page/main.html" tabindex="0" class="ui-page ui-body-c ui-page-active"
            style="min-height: 1464px;">
            <div data-role="header" class="ui-header ui-bar-a" role="banner">
                <h1 class="ui-title" role="heading" aria-level="1">
                    My Title
                </h1>
            </div>
        </div>
        <div class="ui-loader ui-corner-all ui-body-a ui-loader-default">
            <span class="ui-icon ui-icon-loading"></span>
            <h1>
                loading</h1>
        </div>
    </div>
</body> 
```

请注意，标签具有新属性。**现在我的问题是我怎么知道 jquery 移动库的功能在做什么？**我想调用这样做的方法！

* * *

我之所以喜欢调用该方法，是因为我用 ajax 替换了 div id 'c' 的内容，并且页面没有按我想要的方式呈现。换句话说，做：

```
$.ajax({
    url: 'someUrl',
    success: function (result) {

        /*
         result = "content of first example" = 

              <div data-role="page"><div data-role="header"><h1> My Title </h1></div></div>
        */
         $('$c').html( result );   

         // I will like to call here something like:     $('#c').RrenderHtml();

    } 
}); 
```

没有按照我的意愿呈现。它无法正确呈现的原因是 div id c 中的标签没有页面加载时 jquery 在它们上创建的属性。

* * *

此问题的解决方案将返回：

```
 <div data-role="page" data-url="/jqueryMobile/TC_Page/main.html" tabindex="0" class="ui-page ui-body-c ui-page-active"
            style="min-height: 1464px;">
            <div data-role="header" class="ui-header ui-bar-a" role="banner">
                <h1 class="ui-title" role="heading" aria-level="1">
                    My Title
                </h1>
            </div>
        </div>
        <div class="ui-loader ui-corner-all ui-body-a ui-loader-default">
            <span class="ui-icon ui-icon-loading"></span>
            <h1>
                loading</h1>
  </div> 
```

代替：

```
 <div data-role="header">
            <h1>
                My Title
            </h1>
        </div> 
```

在ajax调用上。该解决方案的问题在于，当页面加载时，我必须弄清楚 jquery 如何在新页面上格式化每个响应。还有一些响应我像表格一样动态地创建它们。**也许我可以创建一个 iFrame 将 jquery 库放在那里，还有来自正文中 ajax 调用的响应等待页面加载，然后最终获得最终结果**希望我正确地解释了我的自我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:30:59.873

你不需要知道这些方法。已经提供了一种增强注入页面的方法，它是：

```
.trigger('create') 
```

更多关于这里：

*   [http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html)
*   [http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)

# mysql - MySQL中管理客户订单的最佳实践

> ID：14525909
> 
> 赞同：-1
> 
> 时间：2013-01-25T16:21:09.270
> 
> 标签：mysql, database

当我正在开发一个内部站点时，我实验室的人员可以通过中央数据库订购某些材料，以保持事情的可管理性。

一个人会下订单（可以是一个项目，也可以是多个项目，每个项目都有不同的数量等），我会将其记录到数据库中。但是，当我决定如何设置数据库时，我会看到两个选项：

**选项 1 将所有数据放入一个表中：**

```
|   Salt   |    Name    |     Email     |   Product ID   | Quantity |Sent|
==========================================================================
|0000000001|John Doe    |john.doe@au.dk |175463          |25        |1   |
--------------------------------------------------------------------------
|0000000001|John Doe    |john.doe@au.dk |300146          |169       |1   |
--------------------------------------------------------------------------
|0000000001|John Doe    |john.doe@au.dk |855457          |5         |1   |
--------------------------------------------------------------------------
|0000000001|John Doe    |john.doe@au.dk |290142          |13        |1   |
--------------------------------------------------------------------------
|0000000002|Jane Doe    |jane.doe@au.dk |173755          |3         |0   |
--------------------------------------------------------------------------
|0000000002|Jane Doe    |jane.doe@au.dk |256984          |39        |0   |
-------------------------------------------------------------------------- 
```

许多行重复增加了读/写/更新速度并大大增加了存储空间。但它更简单，因为一切都在一个地方。

**选项 2：**

两张桌子。一个记录订单（并分配一个唯一的盐）。另一个记录订单详细信息（项目），并记录盐。盐在第二个表中不是唯一的，因为某些订单可能包含多个项目。这两个数据库是链接在一起的，例如，当我尝试拉出一个订单，并且所有按该订单放置的项目时，我将简单地搜索盐。

表格1：

```
|   Salt   |    Name    |     Email     |Sent|
==============================================
|0000000001|John Doe    |john.doe@au.dk |1   |
----------------------------------------------
|0000000002|Jane Doe    |jane.doe@au.dk |0   |
---------------------------------------------- 
```

表 2：

```
|   Salt   |   Product ID   | Quantity |
========================================
|0000000001|175463          |25        |
----------------------------------------
|0000000001|300146          |169       |
----------------------------------------
|0000000001|855457          |5         |
----------------------------------------
|0000000001|290142          |13        |
----------------------------------------
|0000000002|173755          |3         |
----------------------------------------
|0000000002|256984          |39        |
---------------------------------------- 
```

我想第二个选项的优点是每行中的冗余信息较少 - 相反，第一个选项的优点是我只需维护一个表，而不是两个表。

我应该使用最初更容易处理的单个表，还是使用多个表来遵守数据库规范化最佳实践？你用来决定走哪条路的过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T13:22:27.097

在我工作的十年里（在我在那里之前），一个程序员的宠物项目已经扩展成数万行代码。该程序在阳光下做了所有事情，一团糟。由于程序员想要快速完成工作并且不遵守永恒的编码原则，因此它变得一团糟。

所以作为一个乱七八糟的具体例子。有一个包含 200 到 300 列的数据库表。它总是有问题，你不能把它分解成一个更直观的结构，因为那将是一个巨大的项目。你通过合理化“把所有东西都塞在一个地方，因为它更容易”的谬论来开始滚雪球。

始终使数据库尽可能地封装、规范化、高效和直观。即使现在更难，未来必须处理您的代码的程序员也会感谢您。此外，如果人们看到你在代码中弄得一团糟，即使是微不足道的项目，你也不会被选中在未来 35 年的某个时候在从小行星带开采资源的宇宙飞船上练习你的手艺。做一件漂亮的工作，因为你想被委以更重要的事情。

# java - 是否需要在 `synchronized` 关键字之外添加 `volatile` 关键字才能使此类线程安全？

> ID：14525910
> 
> 赞同：1
> 
> 时间：2013-01-25T16:21:11.310
> 
> 标签：java, multithreading, thread-safety, volatile, synchronized

首先，我有以下（这里是简化的）类：

```
public class MyClass {

    private static Map<String, Object> objects = new HashMap<String, Object>();

    public static Object get(String key) {
        return objects.get(key);
    }

    public static void set(String key, Object object) {
        objects.put(key, object);
    }

} 
```

然后，我想让它变得安全，所以我尝试了如下`synchronized`关键字：

```
public class MyClass {

    private static Map<String, Object> objects = new HashMap<String, Object>();

    public static synchronized Object get(String key) {
        return objects.get(key);
    }

    public static synchronized void set(String key, Object object) {
        objects.put(key, object);
    }

} 
```

问题是，`synchronized`在我的情况下，关键字是否足够，或者是否有必要添加`volatile`一个，即：

```
public class MyClass {

    private static volatile Map<String, Object> objects = new HashMap<String, Object>();

    public static synchronized Object get(String key) {
        return objects.get(key);
    }

    public static synchronized void set(String key, Object object) {
        objects.put(key, object);
    }

} 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:22:31.987

只有重新分配volatile`objects`才会产生影响`objects`。在您的示例中，您没有这样做，因此它不会产生影响并且是不必要的。

请注意，通过设置`objects`final 来强制执行“不可重新分配”是一种很好的做法。

[在您的情况下，您可以简单地通过使用线程安全映射实现](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)来委派线程安全（这肯定会比您的同步实现更好地扩展）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T16:24:08.453

`volatile`不会神奇地使您的代码线程安全，它只是为了防止 JVM 进行在多线程上下文中不相关的优化（或者更糟的是，阻止您的程序按预期运行）。

我建议您改为查看[ConcurrentHashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)，它可能对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:22:36.853

您不会更改存储在 中的引用，因此使用关键字`objects`没有任何价值。`volatile`

# asp.net - 如何使用asp中继器制作比较html表（数据轮换）

> ID：14525914
> 
> 赞同：0
> 
> 时间：2013-01-25T16:21:17.917
> 
> 标签：asp.net, html, sql, sql-server, datarepeater

我需要制作一个 HTML 格式的比较表，问题是数据库中的项目以列的形式出现，但在比较表中它必须是行！

例子

数据库中的数据如下所示

```
 ID  Name     Color   Weight
-------------------------------
 1   Ball     Red     10
 2   Table    Black   50
 3   Chair    Green   30 
```

它必须在比较表中如下所示

```
ID      1         2        3
Name    Ball      Table    Chair
Color   Red       Black    Green
Weight  10        50       30 
```

我正在使用带有中继器的 ASP.NET，但它不起作用，请你帮我找到最好的方法来做到这一点。

我必须使用中继器之类的东西，因为比较表中的列数会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:45:17.277

一个可能的解决方案：

给定以下 DataTable 作为数据源：

```
protected DataTable Data
{
    get
    {
        if (ViewState["Data"] == null)
        { 
            DataTable table = new DataTable();
            table.Columns.Add("ID", typeof(int));
            table.Columns.Add("Name");
            table.Columns.Add("Color");
            table.Columns.Add("Weight", typeof(int));

            table.Rows.Add(1, "Ball", "Red", 10);
            table.Rows.Add(2, "Table", "Black", 50);
            table.Rows.Add(3, "Chair", "Green", 30);
            ViewState["Data"] = table;
        }
        return (DataTable)ViewState["Data"];
    }
} 
```

还有一些用于循环和构建表格的 ASP 代码：

```
<table>
<%
  for (int i = 0; i < Data.Columns.Count; i++)
  {
        %>
        <tr>
            <td><%= Data.Columns[i].ColumnName %></td>
            <%
                for (int j = 0; j < Data.Rows.Count; j++)
                {
                    %>
                    <td><%= Data.Rows[j][i] %></td>
                    <%
                }

             %>
        </tr>
        <%  
  } 
%>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:49:24.683

所以这不适用于 ASP.NET，但您可以转换它。这是我用来在 SQL Server 中创建动态数据透视表的代码。这使您可以做您想做的事情，而不必知道将有多少列。数据透视表的问题在于它们需要计算，因此您必须这样做才能使其正常工作。希望这可以帮助。

```
DECLARE @columns varchar(500)

Select @columns = STUFF(( select distinct
            '],[' + cast(Name as varchar)
              from table_name as t1
              order by '],[' + cast(Name as varchar)
              for XML path('')
              ), 1, 2, '') + ']'

DECLARE @query varchar(max)

SET @query = 'select *
             from table_name
             pivot
             (
              count(Name)
              for Name in (' +@columns+ ')
             )as pvt'

execute(@query) 
```

# javascript - 如何将一堆编号列表附加到 ul？

> ID：14525918
> 
> 赞同：-1
> 
> 时间：2013-01-25T16:21:28.757
> 
> 标签：javascript, jquery

这是我所拥有的，这会导致错误：

```
for (var x = 0; x < 10; x++){
    $('.wrapper ul').append('<li>Root Option 'x'</li>');
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:22:26.010

连接时错过了`+`运算符`x`

```
for (var x = 0; x < 10; x++){
    $('.wrapper ul').append('<li>Root Option ' + x + '</li>');
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:22:48.147

您没有连接字符串。改用这个：

```
for (var x = 0; x < 10; x++){
    $('.wrapper ul').append('<li>Root Option ' + x + '</li>');
} 
```

看看这篇[MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Description)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:22:58.787

```
for (var x = 0; x < 10; x++){
    $('.wrapper ul').append('<li>Root Option '+x+'</li>');
}; 
```

连接不正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T16:23:02.783

```
for (var x = 0; x < 10; x++){
    $('.wrapper ul').append($('<li>', {html: 'Root Option ' + x}));
} // just for fanciness ^_^ 
```

# java - 如何使用 jQuery params() 解析深层 URL？

> ID：14525920
> 
> 赞同：1
> 
> 时间：2013-01-25T16:21:32.310
> 
> 标签：java, android, jquery, json, url

构建一个需要使用 jQuery 解析使用深度参数构建的 URL 的 Android 应用程序`params()`。

示例网址：

```
http://webapp.example.com/#params%5Bid%5D=33330&type=detail&channel=ss&view=Detail 
```

结果应该是 JSON，我可以将其输入 Gson。手动解析不是最优的；一个通用的解决方案是可取的。

如何完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:09:06.007

乍一看，我认为您需要一个 js/jquery 解决方案。但仔细观察，可能是 java.lang. Anywhoo，我已经没有前者，所以你得到了两个！

js/jquery

```
url="http://webapp.example.com/#params%5Bid%5D=33330&type=detail&channel=ss&view=Detail";

delimatedString = url.substring(url.indexOf("#")+1,url.length); //remove everything before the #

var jsonObject = new Object();

$.each(delimatedString.split("&"), function(index, item) {//for loop to spit at the *&
   //item is now in the syntax key=value 
   var keyValPair = item.split("="); //split each item at the = to seperate
   var key = keyValPair[0];
   var value = keyValPair[1];

   jsonObject[key]=value;
}); 
```

爪哇

```
String delimatedStrings = url.substring("&"+1, url.length)
String[] keyValuePairs = delimatedString.split("&");  
Map<String, String> map = new HashMap<String, String>();  
for (String keyValuePair : keyValuePairs)  
   {  
      String key = delimatedString.split("=")[0];  
      String value = delimatedString.split("=")[1];  
      map.put(key, value);  
    } 
```

附言。我没有编译 java，你需要一个外部库来处理映射到 JSON 的转换。

# php - Joomla ACL 用于自定义组件中的特定视图

> ID：14525926
> 
> 赞同：1
> 
> 时间：2013-01-25T16:22:10.550
> 
> 标签：php, joomla2.5, acl

我已经编写了一个扩展，现在我正在尝试将它集成到 ACL 中。我一直在这里使用文档：http: [//docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL)

到目前为止，我已经能够为整个组件设置访问权限，但我真正想要的是让一个用户组能够对某个“视图”执行操作，如果您愿意的话，而另一个组被拒绝访问该特定视图。我猜这是这里解释的：http: [//docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL#Adding_more_actions.2C_also_at_category_level_and_item_level](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL#Adding_more_actions.2C_also_at_category_level_and_item_level)

我遇到的问题是当我单击“选项”按钮并更改访问选项并保存时，选定的选项不会被保存。我在表类中添加了资产函数，并在表中添加了asset_id 列。

[http://i50.tinypic.com/ofsjtt.png](http://i50.tinypic.com/ofsjtt.png)

有谁知道我做错了什么？甚至可以像这样分离权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:25:25.423

查看访问级别称为“ViewLevels” [http://docs.joomla.org/Access_Control_List/2.5/Tutorial#ACL_View_Access_Levels_Examples](http://docs.joomla.org/Access_Control_List/2.5/Tutorial#ACL_View_Access_Levels_Examples)。

如果您希望人们对某些项目执行某些操作，那么您需要为这些项目创建不同于组件 acl 的另一组权限。

例如，您有一个商店组件，您有该组件的 ACL，但您只能有产品类别的 ACL。

# entity-framework - 为什么从 EntityFramework DbContext 中分离对象会将 null 设置为导航属性？

> ID：14525927
> 
> 赞同：3
> 
> 时间：2013-01-25T16:22:10.300
> 
> 标签：entity-framework

我有两个类使用 EF 映射到 db 表：

```
public class Relation
{
    // some properties

    public Address MainAddress { get; set; }
}

public class Address
{
    // some properties
} 
```

在一种方法中，我执行以下操作：

```
 public Relation AddRelation(Relation relation)
    {
        var dbRelation = this.DbContext.Set<Relation>().Create();
        dbRelation.MainAddress = this.DbContext.Set<Address>().Create();

        // this one copies properties from one instance to another
        this.Copy(relation, dbRelation); 

        dbRelation.Id = Guid.NewGuid();
        dbRelation.MainAddress.Id = Guid.NewGuid();
        dbRelation.MainAddress.RelationId = dbRelation.Id;

        this.Add(dbRelation);

        this.Context.SaveChanges();

        // before detaching dbRelation.MainAddress != null
         this.Context.Entry<Relation>(dbRelation).State = EntityState.Detached;

        // afterwards dbRelation.MainAddress == null

        return dbRelation;
    } 
```

我想使用与上下文分离的 dbRelation。但是 dbRelation.MainAddress 在执行 Detach 后分配了一个空值。

我的问题是：为什么 null 存在？我应该怎么做才能改变这种行为？

# ruby - 如何为 Ruby 中的所有实例设置默认（而不是 nil）变量初始化

> ID：14525929
> 
> 赞同：1
> 
> 时间：2013-01-25T16:22:13.680
> 
> 标签：ruby, metaprogramming

实例变量第一次在哪里初始化为零？我可以将所有实例的默认值重新定义为其他值吗？

例如：

```
class Class
  #some code here or maybe in an Object class
end

class Foo1
  attr_accessor :bar
end

class Foo2
  attr_accessor :bar
end

p Foo1.new.bar # result is not nil
p Foo2.new.bar # result is not nil 
```

这可以通过修改阅读器来完成：

```
class Class
  def attr_accessor(attr_name)
    ...
    define_method "#{attr_name}" do
      if instance_variable_get "@#{attr_name}_history"
        instance_variable_get "@#{attr_name}_history"
      else
        "Not nil"
      end
    end
    ...
  end
end 
```

但这无助于理解 Ruby 的核心。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:57:20.780

如果要设置默认值，可以在`initialize`类的方法中分配它们。

例如：

```
class Test

  attr_accessor :bar

  def initialize
    @bar = 'bar'
  end

end

Test.new.bar
# => "bar" 
```

请记住，它`attr_accessor :bar`为您提供了设置和获取底层实例变量的辅助方法`@bar`。

如果你想要很多类的默认值，你可以让它们从一个将实例变量设置为非 nil 的类继承：

```
class Foo < Test

end

Foo.new.bar
# => "bar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:26:02.300

（根据 Jörg W Mittag 的评论更正）

你不能。当您调用实例变量而不为它们分配值时，它们会被~~设置~~为评估值。`nil`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:54:25.610

在类中定义一个新方法`Class`。通过使用获取实例变量`:instance_variables`并将它们设置为您喜欢的任何内容`:instance_variable_set(:@var,default_value)`

```
class Class

    alias oldNew new
        def new(*args)
        result = oldNew(*args)
        default = 2354 # set default here
        a = result.instance_variables
        a.each do
        |d|
        result.instance_variable_set(d,default)
        end

    return result
    end

end 
```

# asp.net - 设置 ASP:ControlParameter 以使用变量从中获取值

> ID：14525932
> 
> 赞同：1
> 
> 时间：2013-01-25T16:22:19.940
> 
> 标签：asp.net, vb.net, controlparameter

在 ASP.Net VB.Net 代码隐藏文件中，我们有这个变量：

```
Public Shared blnTuesdayCheckBoxState As Boolean 
```

我们正在尝试将变量用于 ASP:ConrolParameter 但似乎没有正确设置所有内容。

你能告诉我我需要做什么来纠正它吗？

这是在 DataSource 标记中使用的 ASP:ControlParameter：

```
<UpdateParameters>
    <asp:Parameter Name="DayOfWeekMonday" Type="String" />

    <asp:ControlParameter 
        ControlID="blnTuesdayCheckBoxState" 
        Name="DayOfWeekTuesday" 
        PropertyName="Text" 
        Type="String" />

    <asp:Parameter Name="DayOfWeekWednesday" Type="String" />
    <asp:Parameter Name="DayOfWeekThursday" Type="String" />
    <asp:Parameter Name="DayOfWeekFriday" Type="String" />
    <asp:Parameter Name="DayOfWeekSaturday" Type="String" />
    <asp:Parameter Name="DayOfWeekSunday" Type="String" />
    <asp:Parameter Name="StartTime" Type="String" />
    <asp:Parameter Name="EndTime" Type="String" />
    <asp:Parameter Name="ClassID" Type="Int32" />
    <asp:Parameter Name="TeacherID" Type="Int32" />
    <asp:Parameter Name="ID" />
</UpdateParameters> 
```

如果我们可以让 DayOfWeekTuesday 工作，我们将在一周的其他日子里做同样的事情。

在 DetailsView 中是这个 ImageButton：

```
<asp:TemplateField HeaderText="Tuesday:">
    <EditItemTemplate>
        <asp:ImageButton 
            ID="ImageButtonEditDayOfWeekTuesday" 
            runat="server" 
            ImageUrl='<%# getChecked(Eval("DayOfWeekTuesday"))%>' 
            Height="15"
            Width="15" 
            OnClick="ImageButtonDayOfWeekTuesdayEdit_Click" 
            CausesValidation="False">
        </asp:ImageButton>
    </EditItemTemplate>
</asp:TemplateField> 
```

当用户单击 ImageButton 时，此代码将执行以填充变量：

```
Protected Sub ImageButtonDayOfWeekTuesdayEdit_Click(sender As Object, e As ImageClickEventArgs)

    '     Dim chkTheCheckBox As New CheckBox
    Dim imgTheImageButton As New ImageButton

    '        chkTheCheckBox = DetailsView.FindControl("CheckBoxEditDayOfWeekTuesday")
    imgTheImageButton = DetailsView.FindControl("ImageButtonEditDayOfWeekTuesday")

    If blnTuesdayCheckBoxState = True Then
        imgTheImageButton.ImageUrl = "../../Images/unchecked.png"

        '           chkTheCheckBox.Checked = False
        blnTuesdayCheckBoxState = False
    Else
        imgTheImageButton.ImageUrl = "../../Images/checked.png"

        '          chkTheCheckBox.Checked = True
        blnTuesdayCheckBoxState = True
    End If
End Sub 
```

上面的代码模拟了 CheckBox 的勾选，只是它是一个正在使用的图像而不是一个实际的 CheckBox。

如注释掉的代码所示，用于使用实际 CheckBoxes 存储要保存到数据库的值的原始编码，但我们希望将它们全部替换为 ImageButtons。

此外，如果我为 ASP:ControlParameter 使用 ASP:Label，那么一切正常。由于一周中有 7 天，我们希望使用变量而不是在网页上放置许多标签。

# ruby-on-rails - 使用带有 Rails MongoId 日期字段的 jquery datepicker 会导致“参数超出范围”错误

> ID：14525934
> 
> 赞同：2
> 
> 时间：2013-01-25T16:22:22.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我正在尝试将我的 rails 模型的日期字段呈现为日期选择器。

模型看起来像：

```
class Appointment
  include Mongoid::Document
  field :date, type: Date  
end 
```

_form.html.haml 视图如下所示：

```
= form_for @appointment, :url => {:action => :create} do |f| 
  = f.text_field(:date, {:class => 'datepicker'})
  %button{:type => 'submit'} Book appointment

:javascript
    jQuery(document).ready(function($) {
      $('.datepicker').datepicker();
    }); 
```

控制器动作如下所示：

```
class AppointmentsController < ApplicationController
  def create
    @appointment = Appointment.new(params[:appointment])

    # rest left out for demo purposes
  end
end 
```

当“new”获取时，调用发生错误：

```
ArgumentError in AppointmentsController#create

argument out of range 
```

我知道该值发布为 MM/DD/YYYY，即 2013 年 3 月 11 日

如何告诉 Rails 如何正确序列化该字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:08:34.313

我参加聚会有点晚了，但是...

Mongoid 对您作为日期提供的字符串的格式非常特别。据我了解，只有 dd-mm-yyyy 可以。幸运的是，jQuery UI 日期选择器为您提供了格式化其输出的选项。Mongoid 想要的格式如下所示：

```
$('.datepicker').datepicker({ dateFormat: 'dd-mm-yy' }); 
```

有关 datepicker 选项和格式的更多信息：

[http://api.jqueryui.com/datepicker/#option-dateFormat](http://api.jqueryui.com/datepicker/#option-dateFormat)

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:19:32.563

弄清楚了。我添加了另一个字段 date_string 作为 attr_accessor，它不会存储在 db 中但可以显示在表单中，并可用于转换为内部日期字段。模型改为：

```
class Appointment
  # extend these two to get accesss to drop down options
  include Mongoid::Document
  before_validation :parse_date_if_not_null

  #person info
  field :date, type: Date

  attr_protected :date
  attr_accessor :date_string

  def parse_date_if_not_null
    unless self.date_string.nil? || self.date_string == ''
      self.date = Date.strptime self.date_string, '%m/%d/%Y'
    end
  end
end 
```

在视图中，使用了 date_string 字段：

```
= form_for @appointment, :url => {:action => :create} do |f| 
  = f.text_field(:date_field, {:class => 'datepicker'})
  %button{:type => 'submit'} Book appointment

:javascript
    jQuery(document).ready(function($) {
      $('.datepicker').datepicker();
    }); 
```

这工作正常，我已经验证该字段在数据库中正确设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T07:49:51.790

问题是 rails/activerecord 期望日期为 ISO 格式“yyyy-mm-dd”。但这不是一种用户友好的格式

我认为最简单的解决方案是在 datepicker 上使用 alt 属性 - 基本上，显示日期格式但提交另一种日期格式：

```
 = f.text_field :your_date, id: "your_date", class: "hidden" // This is hidden
  // This will show up
  = text_field_tag "date[something_we_will_not_use]", f.object.your_date.strftime("%m/%d/%Y"),
    class: "datepicker", 'data-alt-field' => '#your_date' 
```

**日期选择器初始化**

```
$('.datepicker').each(function() {

      var alt_field = $(this).attr('data-alt-field');

      $this.datepicker({
        dateFormat: "mm/dd/yy",
        prevText: '<i class="fa fa-chevron-left"></i>',
        nextText: '<i class="fa fa-chevron-right"></i>',
        altField: alt_field, // This is the tag where the date will be filled
        altFormat: "yy/mm/dd" // This is how the date will be posted to your controller
      });
    }) 
```

# python - 熊猫重采样跳过时间序列的第一个日期

> ID：14525942
> 
> 赞同：2
> 
> 时间：2013-01-25T16:22:40.067
> 
> 标签：python, pandas

鉴于：

```
foo = pd.Series(index=pd.bdate_range(datetime.date(2000,1,1),datetime.date(2001,1,1)))
foo.resample("BMS")
foo.resample("BMS").resample("B") 
```

第一次重采样从 2000-01-03 开始​​，第二次重采样从 2000-01-04 开始

这是一个错误还是我错过了对重采样工作原理的概念性理解？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:52:28.990

pandas 尝试推断“关闭”和“标签”参数值，以便默认重采样行为正确。这是推断这些值以进行上采样的错误。我们将修复下一个版本。感谢您的错误报告。

作为一种解决方法，执行 foo.resample("BMS").resample("B", closed="right", label="right")

# javascript - jQuery 插件 - 使用 HTML5 数据属性作为备用配置选项的问题

> ID：14525943
> 
> 赞同：0
> 
> 时间：2013-01-25T16:22:40.503
> 
> 标签：javascript, jquery, html, scroll

我正在尝试制作我的第一个 jQuery 插件，但在尝试扩展插件以接受 HTML5 数据属性时遇到了一些问题。用户应该能够通过仅使用 HTML 中的数据属性来启动和调整设置（如果需要，用户也可以在脚本中进行初始化）。

一些示例 HTML：

```
<ul id="list" data-foo-scroll="true" data-foo-fadeIn="1">
 <li>Phone 1</li>
</ul> 
```

data-foo-scroll 自动初始化插件很好，但我现在尝试（并且失败）传递 fadeIn 属性。

这是我的插件js：

```
;(function ( $, window, document, undefined ) {

    var pluginName = "fooScroll",
        defaults = {
            loadingText:    "loading",
            loadingClass:   "foo-loading",
            showText:       "show more",
            nextLink:       ".next",
            fadeIn:         500,
            autoLoad:       false,
            autoLoadOffset: 100
        };

    function Plugin( element, options ) {
        this.element = element;
        this.options = $.extend( {}, defaults, options );
        this._defaults = defaults;
        this._name = pluginName;
        this._next = $(this._defaults.nextLink).attr('href');
        this.init();
    }

    Plugin.prototype = {

        init: function() {
            $(this.options.nextLink).hide();    
            this.getNextPage(this.element, this.options);
        },

        getNextPage: function(el, options) {
            var self = this;
            if(this.options.autoLoad===true) {
                this.options.showText = '&nbsp';
                $(window).scroll(function() {
                   if($(window).scrollTop() + $(window).height() == $(document).height()) {
                       $('#foo-more').trigger('click');
                   }
                });
            };
            $(el).after("<div id='foo-more'><a href='#'>"+this.options.showText+"</a></div>")
            $("#foo-more").on("click", function(event){
                $('#foo-more a').text(options.loadingText);
                $('#foo-more').addClass(options.loadingClass);
                $.ajax({
                    url: self._next,
                    datatype: 'html',
                    success: function (data) {
                        var list;
                        $(el).attr('id') ? list = '#'+$(el).attr('id'): list = '.'+$(el).attr('class');
                        $(el).append('<div class="foo-new" />');
                        $(el).find('div:last').append( $('<div />').html(data).find(list).children()).hide();

                        // if ajax returns any images then delay DOM update until they are all loaded
                        if ($('<div />').html(data).find(list).find('img').length > 0) {
                            $(el).find('img').on('load', function() { 
                                self.showNextPage();
                            });
                        } else {
                            self.showNextPage();
                        }
                        // update show me more link with latest href
                        self._next = $('<div />').html(data).find(options.nextLink).attr('href');
                        // if ajax doesnt return a next button then hide show me more link
                        if (($('<div />').html(data).find(options.nextLink).length == 0)) $('#foo-more').remove();
                    }
                })
                event.preventDefault();
            });
        },

        showNextPage: function() {
            $(this.element).find('div.foo-new:last').fadeIn(this.options.fadeIn); 
            $('#foo-more a').text(this.options.showText);
            $('#foo-more').removeClass(this.options.loadingClass);
        }     

    };

    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            var objD = $(this).data();
            console.log(objD);
            if (!$.data(this, "plugin_" + pluginName)) {
                $.data(this, "plugin_" + pluginName, new Plugin( this, options ));
            }
        });
    };

    // auto init
    $("[data-foo-scroll='true']").fooScroll();

})( jQuery, window, document ); 
```

请注意，console.log 确实会打印出来：

```
Object { fooFadein=1, fooScroll=true } 
```

所以它被拾起，但我无法弄清楚如何实际“使用”它作为插件的一部分。

非常感谢任何帮助或指示。

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:27:21.257

这个文档解释得很清楚，通读一遍。

[http://api.jquery.com/data/](http://api.jquery.com/data/)

我看到你正在尝试做的是：`var fooFadein = $(this).attr('foo-fadeIn')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:38:58.720

如果我理解正确，您是否只需将自定义属性值合并到插件的选项参数中？

```
$.fn[pluginName] = function ( options ) {
  return this.each(function () {
    if (!$.data(this, "plugin_" + pluginName)) {
      var objD = $(this).data();
      $.extend(options, objD); // extend with data-stuff
      $.data(this, "plugin_" + pluginName, new Plugin( this, options ));
    }
  });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:27:56.110

好的，找到了如何让它工作（见下文）插件可能是这样的（扩展 jquery 插件样板）：

```
function Plugin( element, options, objD ) {
    this.element = element;
    this.options = $.extend( {}, defaults, options, objD );
    this._defaults = defaults;
    this._name = pluginName;
    this.init();
}

$.fn[pluginName] = function ( options ) {
  return this.each(function () {
    if (!$.data(this, "plugin_" + pluginName)) {
        var objD = $(this).data();
        $.data(this, "plugin_" + pluginName, new Plugin( this, options, objD ));
    }
  });
}; 
```

我不是大师，但对我来说效果很好

# ios - 如何在服务器上聚合 iOS 位置数据？

> ID：14525951
> 
> 赞同：0
> 
> 时间：2013-01-25T16:22:51.800
> 
> 标签：ios, location

1.  如何将位置数据从 iPhone 发送到某个网络服务器？
2.  Web 服务器是存储这些数据的最佳方式吗？
3.  如果是这样，什么样的服务器？

编辑：由于人们对这个问题感到困惑，可以理解的是，我真的在寻找关于如何在网络服务器中存储位置数据的最佳实践。我不知道服务器是SQL还是no-SQL，我对Web服务器的方式经验很少。

所以这就是我所知道的：

*   我知道如何获取用户的位置。
*   我知道使用 CoreLocation。

我的问题：

*   如何将位置数据从应用程序发送到服务器，包括 SQL 和非 SQL？
*   在服务器端：如何存储这些数据？我对 SQL 有点熟悉，但我想要存储的只是 GPS 坐标，所以我不确定表格是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:37:13.047

请尝试扩展您的问题，它将帮助其他人帮助您。

但是，我建议您首先阅读 iOS 位置感知编程指南 - 这将告诉您如何获取设备的位置。

接下来，阅读 REST/Web 服务器/Web 框架等，并查看 AFNetworking 框架，用于将数据从 iOS 发送到 Web 服务器。

然后您需要决定如何存储数据：在 SQL/no-SQL 数据库中？这实际上取决于您想对数据做什么以及您可以访问/体验的 Web 服务器（如果有）。

恐怕您当前形式的问题只会引发更多问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:23:30.947

虽然这个答案并不一定会促进自己学习如何做后端的事情，但有一项名为[Parse](http://parse.com)的惊人服务可以为您处理几乎所有事情。它非常棒，可以节省大量时间。此外，它还免费提供多达 1,000,000 次 API 调用和 1GB 存储空间。非常适合小型企业/初创公司。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:33:05.640

1.  核心位置
2.  是的，猜你想用它做一些不在应用程序中的事情，否则只需使用数据库。
3.  懒得用 parse.com 云代码之类的东西。（每月免费 100 万个 api 请求）

你能给我们一个背景，这不是一个很好的问题。您在使用该位置做什么以及为什么需要在线使用它。

# python - 在 python 中，如何将一系列命令分配给一个变量？

> ID：14525952
> 
> 赞同：2
> 
> 时间：2013-01-25T16:22:56.717
> 
> 标签：python, dictionary, function

我通过深入研究自学python。如果你把它留空，我不确定一个函数是否会这样做：

```
#My first section that pulls a value from a random shuffle of codes
print "\n"
print "-"*10
print 'This is a test of the %s system'% codes[0]
print "-"*10
print "\n"

#My second section that pulls a value from a random shuffle of codes
print "\n"
print "-"*10
print 'This is not a test of the %s system and all is good'% codes[1]
print "-"*10
print "\n" 
```

我的问题是，有没有办法让它看起来更好看，代码行更少？还是我坚持打印 10 行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:24:46.447

你可以使用一个函数：

```
def print_stuff(what,addendum=''):
    print "\n"
    print "-"*10
    print 'This is a test of the %s system%s' % (what,addendum)
    print "-"*10
    print "\n"

print_stuff(codes[0])
print_stuff(codes[1],addendum = " and all is good") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T16:28:26.420

Python 有非常棒的多行字符串：

```
def print_it(somethig):
    print """
----------
This is a test of the {} system.
----------
""".format(something)

print_it(0)
print_it(1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T16:25:19.993

使用索引号创建一个函数：

```
def print_codes(i):
    #My first section that pulls a value from a random shuffle of codes
    print "\n"
    print "-"*10
    print 'This is a test of the %s system'% codes[i]
    print "-"*10
    print "\n"

print_codes(0)
print_codes(1) 
```

另请阅读此[文档](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T16:38:09.117

如果要显示不同的消息，可以定义一个函数来接收要打印的消息：

```
def print_message(message):
    print "\n"
    print "-"*10
    print message
    print "-"*10
    print "\n"

print_message('This is a test of the %s system' % codes[0])
print_message('This is not a test of the %s system and all is good'% codes[1]) 
```

# parsing - Rebol 2 与 Rebol 3 解析中的 INTO 行为差异

> ID：14525958
> 
> 赞同：1
> 
> 时间：2013-01-25T16:23:04.573
> 
> 标签：parsing, rebol

Rebol 的 INTO 允许解析器降级为系列类型（例如 BLOCK！或 PAREN！）以将匹配规则应用于块的内容。这是 Rebol 3 中的一个简单示例：

```
data: [(a b)]

parse data [into [pos: 'a 'b (
    probe pos
    either pos = (first data) [
        print rejoin ["equal to original " mold first data]
    ] [
        print rejoin ["not equal to original " mold first data]
    ]
)]] 
```

由于块中唯一的内容是带括号的系列，因此 INTO 规则立即匹配。使用 SET-WORD!，告诉解析器在进入括号时捕获位置`pos`。A 和 B 匹配为文字 LIT-WORD!s，然后执行随后的代码。预期的结果发生：

```
(a b)
equal to original (a b) 
```

那太棒了。但奇怪的是，Rebol 2 将括号转换为相同代码的块：

```
[a b]
not equal to original (a b) 
```

如果您的输入是`data: [a/b]`：

```
[a b]
not equal to original a/b 
```

为什么会这样？如果您使用的是 Rebol 2，有没有办法获得 Rebol 3 的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:40:15.997

这是 Carl 在 R2 中发现的“奇怪”的属性。因此，他在 R3 中将其替换为更可预期的行为。奇怪的是，您通过这种方式获得的块与paren 相同！（只是尝试更改内容），但声明它具有不同的类型。但是，如果您需要参考 R2 中的括号，您的代码可以轻松调整：

```
data: [(a b)]

parse data [pos: into ['a 'b (
    pos: first pos
    probe pos
    either pos = (first data) [
        print rejoin ["equal to original " mold first data]
    ] [
        print rejoin ["not equal to original " mold first data]
    ]
)]] 
```

另一个为您提供所需结果的修改：

```
data: [(a b)]
parse data [set pos into ['a 'b] (
    probe pos
    either pos = (first data) [
        print rejoin ["equal to original " mold first data]
    ] [
        print rejoin ["not equal to original " mold first data]
    ]
)] 
```

# c# - 如何在 C# 中使用指定的第三方程序打开文件？

> ID：14525961
> 
> 赞同：1
> 
> 时间：2013-01-25T16:23:15.843
> 
> 标签：c#, asp.net, process

所以我要做的是使用名为 UltraCompare 的第三方比较工具打开一个文件（嗯，实际上是*两个文件夹，但我想我现在将从一个文件开始）。*我在 Visual Studio 2010（Express 版）的 C# 网站项目中工作。我在这里看到了如何使用不同的程序打开文件：[Open a file with Notepad in C#](https://stackoverflow.com/questions/4055266/open-a-file-with-notepad-in-c-sharp)。

问题是，这只允许您使用该文件类型的默认程序打开它。但我想在*指定*的程序中打开它。例如，文本文件应该在 UltraCompare 中打开，而不是在记事本中打开。这是执行此操作的代码：

```
string textBoxContents1 = TextBox1.Text;
Process.Start(textBoxContents1); 
```

网络表单上的文本框接受一个字符串，用户在其中键入文件的完整路径（不是我所知道的最人性化的设计，但我不确定如何允许他们使用 asp 中的 GUI 界面浏览*文件夹*。网）。然后将该文件传递给 Process.Start() 方法，该方法使用该文件类型的默认程序打开它。

有没有办法修改它以使用 UltraCompare 打开它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:25:14.477

您可以指定要在其中打开文件的程序：

```
Process.Start("yourprogram.exe", textBoxContents1); 
```

**更新**

要在 Ultracompare 中打开两个文件，您可能会执行以下操作：

```
Process.Start("yourprogram.exe", "file1.txt file2.txt"); 
```

请记住，[`Process.Start`](http://msdn.microsoft.com/en-us/library/h6ak8zt5%28v=vs.90%29.aspx)方法的第二个参数是传递给程序的参数。

我说这可能会起作用，因为我认为 Ultracompare 很可能需要 2 个参数，但情况可能并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:29:25.933

快速提问：您是否要为客户端计算机执行此操作？希望不是而且我猜它会查看 PATH 变量以找到您的 exe

# java - 从 Mybatis / Ibatis 运行 DBCC 命令

> ID：14525971
> 
> 赞同：0
> 
> 时间：2013-01-25T16:24:12.373
> 
> 标签：java, sql-server, jdbc, ibatis, mybatis

我正在尝试从 mybatis 调用 Sql Server DBCC 命令，并返回结果名称列表，但没有返回值。

```
@select("dbcc useroptions")
List dbccUserOptions(); 
```

仅返回选项名称列表。任何想法如何获得价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:55:20.463

试试这个：

```
@Select("dbcc useroptions")
@MapKey("Set Option")
Map<String, String> dbccUserOptions(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:40:47.803

经过一些实验，我发现这是可行的：

```
@select("dbcc useroptions")
List<Map> dbccUserOptions(); 
```

事实证明，Mybatis 正在检查返回类型，如果它是一个标量列表，它将只返回第一项。

# php - getimagesize 在尝试确定图像是垂直还是水平时失败

> ID：14525975
> 
> 赞同：2
> 
> 时间：2013-01-25T16:24:14.343
> 
> 标签：php, image, exif

我用 getimagesize 构建了一个简单的函数来确定图像是水平的还是垂直的。

```
// get height and width and then return
list($width, $height) = getimagesize('/path/to/imag.jpg');
if ($width > $height || $width == $height) {
    return 'HORIZONTAL';
} elseif ($height > $width) {
    return 'VERTICAL';
} 
```

但这似乎在某些图像上失败了。特别是在使用移动设备拍摄的照片上，将其垂直放置。Photoshop 打开它并垂直显示它，Mac Preview 也是如此，但 getimagesize 一直告诉我宽度大于高度。

所以我假设信息，这个“水平”图像应该在照片应用程序中显示“垂直”存储在其他地方......

但是在哪里...... Exif？

# python - 如何使用 pySerial 从 serialException 中恢复

> ID：14525977
> 
> 赞同：12
> 
> 时间：2013-01-25T16:24:21.760
> 
> 标签：python, pyserial

我有一个应用程序可以读取数据并将其传输到通过 USB 连接的设备。我正在使用 pySerial 来促进这种交流。一切正常，直到从 PC 上拔下 USB 电缆并引发异常。重新插入电缆后，我似乎无法恢复并重新连接到我的设备。我恢复的唯一方法是关闭应用程序并拔下并重新插入电缆。任何有助于理解正在发生的事情将不胜感激。

这是我用来帮助我理解该过程的基本测试代码。

```
# Class used to communicate with USB Dongle

import serial
import time
import sys

class LPort:
  def __init__(self, port=0):
    "initialize the LPort class"
    self.error = ""
    self.traffic = ""
    self.dest = None
    if port == None:
        self.simulation = True
    else:
        self.simulation = False
        self.port = port # serial port we should use
    self.reset()
    self.time = time.time()

def reInit(self):
    self.close()

def reset(self):
    "flush port, reset the LPort, initialize LPort"
    if self.simulation:
        r = "LPort simulator"
    else:
        self.port.flushInput()
        self.port.flushOutput()           
        self.fail = False
        self.command("/H1")
        self.dest = None
        r = "reset"
    self.error = ""
    self.traffic = ""
    return r  

def status(self):
    "return accumulated status info, reset collection"
    s = self.error
    self.error = ""
    return s 

def data(self):
    "return accumulated traffic data, reset collection"
    s = self.traffic
    self.traffic = ""
    return s   

def set_dest(self, addr):
    "set the destination address (if necessary)"
    if addr != self.dest:
        self.dest = addr
        self.command("/O")
        r = self.command("/D%02X" % addr)
        if r != "*":
            self.dest = None
            self.error += r
        else:
            r = True
    return r 

def checksum(self, bytes):
    "calculate the CRC-8 checksum for the given packet"
    crc_table = [
            # this table is taken from the CP rectifier code
            0x00,0x07,0x0E,0x09,0x1C,0x1B,0x12,0x15,0x38,0x3F,
            0x36,0x31,0x24,0x23,0x2A,0x2D,0x70,0x77,0x7E,0x79,
            0x6C,0x6B,0x62,0x65,0x48,0x4F,0x46,0x41,0x54,0x53,
            0x5A,0x5D,0xE0,0xE7,0xEE,0xE9,0xFC,0xFB,0xF2,0xF5,
            0xD8,0xDF,0xD6,0xD1,0xC4,0xC3,0xCA,0xCD,0x90,0x97,
            0x9E,0x99,0x8C,0x8B,0x82,0x85,0xA8,0xAF,0xA6,0xA1,
            0xB4,0xB3,0xBA,0xBD,0xC7,0xC0,0xC9,0xCE,0xDB,0xDC,
            0xD5,0xD2,0xFF,0xF8,0xF1,0xF6,0xE3,0xE4,0xED,0xEA,
            0xB7,0xB0,0xB9,0xBE,0xAB,0xAC,0xA5,0xA2,0x8F,0x88,
            0x81,0x86,0x93,0x94,0x9D,0x9A,0x27,0x20,0x29,0x2E,
            0x3B,0x3C,0x35,0x32,0x1F,0x18,0x11,0x16,0x03,0x04,
            0x0D,0x0A,0x57,0x50,0x59,0x5E,0x4B,0x4C,0x45,0x42,
            0x6F,0x68,0x61,0x66,0x73,0x74,0x7D,0x7A,0x89,0x8E,
            0x87,0x80,0x95,0x92,0x9B,0x9C,0xB1,0xB6,0xBF,0xB8,
            0xAD,0xAA,0xA3,0xA4,0xF9,0xFE,0xF7,0xF0,0xE5,0xE2,
            0xEB,0xEC,0xC1,0xC6,0xCF,0xC8,0xDD,0xDA,0xD3,0xD4,
            0x69,0x6E,0x67,0x60,0x75,0x72,0x7B,0x7C,0x51,0x56,
            0x5F,0x58,0x4D,0x4A,0x43,0x44,0x19,0x1E,0x17,0x10,
            0x05,0x02,0x0B,0x0C,0x21,0x26,0x2F,0x28,0x3D,0x3A,
            0x33,0x34,0x4E,0x49,0x40,0x47,0x52,0x55,0x5C,0x5B,
            0x76,0x71,0x78,0x7F,0x6A,0x6D,0x64,0x63,0x3E,0x39,
            0x30,0x37,0x22,0x25,0x2C,0x2B,0x06,0x01,0x08,0x0F,
            0x1A,0x1D,0x14,0x13,0xAE,0xA9,0xA0,0xA7,0xB2,0xB5,
            0xBC,0xBB,0x96,0x91,0x98,0x9F,0x8A,0x8D,0x84,0x83,
            0xDE,0xD9,0xD0,0xD7,0xC2,0xC5,0xCC,0xCB,0xE6,0xE1,
            0xE8,0xEF,0xFA,0xFD,0xF4,0xF3]
    for i in range(len(bytes)):
        b = int(bytes[i])
        if i == 0: chksum = crc_table[b]
        else: chksum = crc_table[chksum ^ b]
    return chksum  

def command(self, cmd):
    "transmit distinct commands to unit, and accept response"
    if self.simulation:
        r = "*"
    else:
        try:
            self.port.write(cmd + chr(13))
        except serial.serialutil.SerialTimeoutException:
            r = "/TO"
            return r              
        except:
            print "Unexpected error:", sys.exc_info()[0]
            r = "/Unknown"
            return r
        r = ""
        eol = False
        while True:
            c = self.port.read(1)
            if not c:
                r = "/FAIL " + r + " " + cmd
                self.error = r
                break
            else:
                r += c
                ordc = ord(c)
                if ordc == 13 or ordc == 42:
                    break           
    return r

def checkRawDataForErrors(self, raw, errors = []):

    errorCodes = {'/SNA':'Slave Not Acknowledging',
                    '/I81':'Busy, Command Ignored',
                    '/I88':'Connection Not Open',
                    '/I89':'Invalid Command Argument',
                    '/I8A':'Transmit Not Active',
                    '/I8F':'Invalid Command',
                    '/I90':'Buffer Overflow',
                    '/DAT':'Data Error',
                    '/BADPEC':'Bad PEC Value',
                    '/NO_MRC':'No Master Read Complete Signal',
                    '/FAIL':'General Failure',
                    '/LEN':'Data Length Error'}

    for ekey, eval in errorCodes.items():
        if ekey in raw:
            errors.append(eval)

    return errors        
# self-testing module
if __name__ == "__main__":

  com = serial.Serial(port=4, baudrate=115200, timeout=1, xonxoff=0)

  if com:
    port = LPort(com)
    print port
    time.sleep(5)

    port = LPort(com)

    print "/V =", port.command("/V")
    print "/V", port.data(), port.status()
    print "/O =", port.command("/O")
    print "/O", port.data(), port.status()
    print "/A =", port.command("/A")
    print "/A", port.data(), port.status()
    print "/L =", port.command("/L")
    print "/L", port.data(), port.status()
    com.close()
else:
    print "cannot open com port" 
```

更新：以下是 serialwin32.py 中 creatfile() 周围的代码，它返回以下消息：serial.serialutil.SerialException：无法打开端口 COM5：[错误 2] 系统找不到指定的文件。

```
 self.hComPort = win32.CreateFile(port,
           win32.GENERIC_READ | win32.GENERIC_WRITE,
           0, # exclusive access
           None, # no security
           win32.OPEN_EXISTING,
           win32.FILE_ATTRIBUTE_NORMAL | win32.FILE_FLAG_OVERLAPPED,
           0)
    if self.hComPort == win32.INVALID_HANDLE_VALUE:
        self.hComPort = None    # 'cause __del__ is called anyway
        raise SerialException("could not open port %s: %s" % (self.portstr,  ctypes.WinError())) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-01T14:21:43.647

假设您的设备运行良好，您所要做的就是：

*   关闭你的串口（`serial.Serial`实例）
*   再次找到您的端口的 COMX 名称
*   打开串口

第二部分是有问题的，因为 Windows 试图变得聪明。在您的情况下，会发生以下情况：

*   USB 设备已连接并分配了名称`COM2`
*   您的程序打开设备
*   USB 断开连接
*   在您的程序注意到设备死机之前，USB 会快速重新连接
*   Windows 发现它`COM2`很忙，并为此 USB 设备分配了不同的名称
*   （可选）您的程序关闭设备
*   您的程序尝试`COM2`再次打开，但该名称没有硬件

巧妙地绕过 Windows 的方法是——您可以`COMX`在设备管理器、COM 端口、您的端口、高级选项中专门为该设备分配固定名称。

另一种选择是快速检测设备死机并关闭文件句柄。如果你很幸运，那么到设备重新连接时，原始设备`COM2`将再次免费。

另一种选择是使用来自另一个制造商的 USB 串行转换器，该制造商使用另一个驱动程序。不知何故`COMX`，字母分配是特定于驱动程序的。更好的驱动程序可能会给你一个稳定的名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-13T14:06:10.383

我也遇到过这个问题。有时再次插入设备时我的程序已锁定。

**注意。**我已经修复了`COMx`@qarma 提到的端口名称

我重新安排了我的程序，以便一旦从`read()`或`write()`方法抛出异常，`Serial`我就停止调用这些方法。

然后我有一个功能，它会定期重试打开端口以尝试检测设备何时再次插入。

此函数创建一个`Serial`与原始实例具有相同参数的新实例并尝试打开它：

```
def try_to_open_new_port(self):
    ret = False
    test = serial.Serial(baudrate=9600, timeout=0, writeTimeout=0)
    test.port = self.current_port_name
    try:
        test.open()
        if test.isOpen():
            test.close()
            ret = True
    except serial.serialutil.SerialException:
        pass
    return ret 
```

返回`True`表示该端口再次存在。

# java - 光标的空列表问题

> ID：14525980
> 
> 赞同：2
> 
> 时间：2013-01-25T16:24:27.227
> 
> 标签：java, android, cursor, linked-list

我的问题`List<String>`

```
List<String> werte = new LinkedList<String>();
if(c.moveToNext()){
        werte.add(c.getString(c.getColumnIndex("fragencount")));
}
String size = "" +werte.size();
tv.setText(size); 
```

我想将光标中的字符串添加到`LinkedList<String>()`. 当我尝试时`c.getCount()`，我得到 13。当我尝试读取我的大小时`LinkedList`，我得到 0。我不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:29:19.080

用于`do-while`在 LinkedList 中添加所有值

```
 LinkedList<String> werte = new LinkedList<String>();
  if(c.moveToFirst())
    {
        do
        {
            werte.add(c.getString(c.getColumnIndex("fragencount")));
        }while(c.moveToNext());
    }
    c.close();
String size = "" +werte.size();
tv.setText(size); 
```

# sql-server - 关于 SQL Server 中重音不敏感的问题 (Latin1_General_CI_AS)

> ID：14525981
> 
> 赞同：5
> 
> 时间：2013-01-25T16:24:26.987
> 
> 标签：sql-server, collation, accent-insensitive

我们所有的数据库都是使用默认排序规则 ( `Latin1_General_CI_AS`) 安装的。

我们计划更改排序规则，以允许客户在不区分口音的情况下搜索数据库。

问题：

1.  拥有对口音不敏感的数据库有什么负面影响（如果有的话）？

2.  对口音不敏感的数据库是否有任何性能开销？

3.  为什么 SQL Server 排序规则的默认值区分重音；为什么有人要默认区分重音？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:20:07.557

说真的，更改数据库排序规则是一件非常痛苦的事情。从 codeproject 看到这个 HOWTO，然后在你做之前认真思考！这是简单的方法！

*   [http://www.codeproject.com/Articles/302405/The-Easy-way-of-sharing-Collat​​ion-of-all-Database](http://www.codeproject.com/Articles/302405/The-Easy-way-of-changing-Collation-of-all-Database)

首先，您只需指定作为搜索的一部分，您不必更改排序规则，就可以允许对不区分重音的数据库进行搜索。

```
 select * from TableName
 where name collate Latin1_General_CI_AI like @parameter 
```

简单如。但是，这将损害指数。

另一种方法是提供一个可以单独索引的计算字段。

```
 create table TableName(
    ix int identity primary key,
    name nvarchar(20) collate latin1_general_ci_as
    )
    go
    alter table TableName
    add  name_AI as name collate latin1_general_CI_AI
    go
    create index IX_TableName_name_AI
    on dbo.TableName(name_AI) 
```

上面的示例将它放在表中，但您也可以创建一个索引视图。

```
 create view dbo.TableName_AI
    with schemabinding
    as 
    select ix,
    name collate Latin1_general_CI_AI as name
    from dbo.TableName
    go
    -- Need a unique clustered index first
    create unique clustered index IX_TableName_AI_Clustered on dbo.TableName_AI(ix)
    -- then the index for searching
    create index IX_TableName_AI_name on dbo.TableName_AI(name) 
```

然后，对于不区分重音的搜索，使用 view `TableName_AI`。

要回答您的具体问题：

1.  在不区分口音的数据库中，区分口音的搜索会比较慢。

2.  是的，但不是你会注意到的

3.  就是这样。某些东西必须是默认值：如果您不喜欢它，请不要使用默认值！

    这样想：“Hard”和“Herd”不是同一个词。一个元音差异就足够了——即使它们听起来很相似。

    重音差异（a vs.á）介于大小写差异（A vs. a）和字母差异（a​​ vs e）之间。你必须在某处画线。

    口音会影响单词的发音并使其具有不同的含义，尽管我很难想出例子。我想对于那些在他们的数据库中使用一种使用口音的语言的人来说，这更有意义。

# java - 从 Java servlet 中的 POST 请求获取请求有效负载

> ID：14525982
> 
> 赞同：122
> 
> 时间：2013-01-25T16:24:30.760
> 
> 标签：java, http, servlets, post

我有一个 javascript 库正在向我的 Java servlet 发送 POST 请求，但是在该`doPost`方法中，我似乎无法获取请求有效负载的内容。在 chrome 开发者工具中，所有内容都在 headers 选项卡的 Request Payload 部分中，并且内容在那里，我知道 doPost 方法正在接收 POST，但它只是空白。

对于`HttpServletRequest` 对象，我可以通过什么方式获取请求有效负载中的数据？

做`request.getParameter()`或`request.getAttributes()` 两者都没有数据

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-01-25T16:28:33.597

简单回答：
使用 getReader() 读取请求正文

更多信息：
有两种方法可以读取正文中的数据：

1.  [`getReader()`](https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletRequest.html#getReader--)返回一个[BufferedReader](https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html?is-external=true)，它允许您读取请求的正文。

2.  [`getInputStream()`](https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletRequest.html#getInputStream--)如果需要读取二进制数据，则返回[ServletInputStream 。](https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletInputStream.html)

文档中的注释：“可能会调用 [任一方法] 来读取正文，而不是同时调用两者。”

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-02-14T23:27:54.100

```
String payloadRequest = getBody(request); 
```

使用这种方法

```
public static String getBody(HttpServletRequest request) throws IOException {

    String body = null;
    StringBuilder stringBuilder = new StringBuilder();
    BufferedReader bufferedReader = null;

    try {
        InputStream inputStream = request.getInputStream();
        if (inputStream != null) {
            bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
            char[] charBuffer = new char[128];
            int bytesRead = -1;
            while ((bytesRead = bufferedReader.read(charBuffer)) > 0) {
                stringBuilder.append(charBuffer, 0, bytesRead);
            }
        } else {
            stringBuilder.append("");
        }
    } catch (IOException ex) {
        throw ex;
    } finally {
        if (bufferedReader != null) {
            try {
                bufferedReader.close();
            } catch (IOException ex) {
                throw ex;
            }
        }
    }

    body = stringBuilder.toString();
    return body;
} 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2014-09-02T06:44:04.453

您可以从请求中使用 Buffer Reader 来读取

```
 // Read from request
    StringBuilder buffer = new StringBuilder();
    BufferedReader reader = request.getReader();
    String line;
    while ((line = reader.readLine()) != null) {
        buffer.append(line);
        buffer.append(System.lineSeparator());
    }
    String data = buffer.toString() 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2015-02-07T00:20:53.393

Java 8 流

```
String body = request.getReader().lines()
    .reduce("", (accumulator, actual) -> accumulator + actual); 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2016-09-30T13:04:27.673

使用[Apache Commons IO](https://commons.apache.org/proper/commons-io/)，您可以在一行中完成此操作。

```
IOUtils.toString(request.getReader()) 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2017-08-11T12:51:48.833

如果正文的内容是 Java 8 中的字符串，您可以执行以下操作：

`String body = request.getReader().lines().collect(Collectors.joining());`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-01-25T19:54:53.100

如果您能够以 JSON 格式发送有效负载，这是读取播放负载的最方便的方法：

示例数据类：

```
public class Person {
    String firstName;
    String lastName;
    // Getters and setters ...
} 
```

示例有效负载（请求正文）：

```
{ "firstName" : "John", "lastName" : "Doe" } 
```

在 servlet 中读取有效负载的代码（需要 com.google.gson.*）：

```
Person person = new Gson().fromJson(request.getReader(), Person.class); 
```

就这样。漂亮，简单，干净。不要忘记将 content-type 标头设置为 application/json。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-31T18:43:00.590

使用 Java 8 尝试资源：

```
 StringBuilder stringBuilder = new StringBuilder();
    try(BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(request.getInputStream()))) {
        char[] charBuffer = new char[1024];
        int bytesRead;
        while ((bytesRead = bufferedReader.read(charBuffer)) > 0) {
            stringBuilder.append(charBuffer, 0, bytesRead);
        }
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-14T11:13:14.037

你只需要

> request.getParameterMap()

用于获取 POST 和 GET - 参数。

该方法返回一个`Map<String,String[]>`.

您可以通过以下方式读取地图中的参数

```
Map<String, String[]> map = request.getParameterMap();
//Reading the Map
//Works for GET && POST Method
for(String paramName:map.keySet()) {
    String[] paramValues = map.get(paramName);

    //Get Values of Param Name
    for(String valueOfParam:paramValues) {
        //Output the Values
        System.out.println("Value of Param with Name "+paramName+": "+valueOfParam);
    }
} 
```

# python - Heroku 和 Twisted

> ID：14525983
> 
> 赞同：2
> 
> 时间：2013-01-25T16:24:34.383
> 
> 标签：python, heroku, twisted, telnet

我正在尝试学习 Twisted，一个 Python 框架，我想把一个基本的应用程序放到网上，当它收到一条消息时，它会发回。我决定使用 Heroku 来托管它，并按照他们文档上的说明进行操作。

```
import os
from twisted.internet import protocol, reactor

class Echo(protocol.Protocol):
    def dataReceived(self, data):
        self.transport.write(data)

class EchoFactory(protocol.Factory):
    def buildProtocol(self, addr):
        return Echo()

port = int(os.environ.get('PORT', 5000))
reactor.listenTCP(port, EchoFactory(), interface = '0.0.0.0')
reactor.run() 
```

一切正常，除了（我知道这是一个愚蠢的问题），我该如何向它发送消息？当我在本地工作时，我只是这样做`telnet localhost <port>`，但现在我不知道。另外，由于 heroku 连接到一个随机端口，我怎么知道它将我的应用程序连接到哪个端口？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:53:10.683

我对 Twisted 不是很熟悉，但我不确定 Heroku 是否支持您尝试做的事情。Heroku 目前只支持 HTTP[S] 请求，不支持原始 TCP。[这个问题的答案中](https://stackoverflow.com/a/13469883/2942)有更多细节。

如果您想连接到您的应用程序，您应该使用`myapp.herokuapp.com`主机名或您添加的任何自定义域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:30:23.720

“Cedar 完全支持纯 Python 应用程序，例如无头进程和事件 Web 框架（如 Twisted）。”

参考：[https ://devcenter.heroku.com/articles/python-support](https://devcenter.heroku.com/articles/python-support)

# yii-extensions - Yii:: WARNING 无法在某些页面上包含文件；请解释

> ID：14525987
> 
> 赞同：1
> 
> 时间：2013-01-25T16:24:38.077
> 
> 标签：yii-extensions, yii

将应用程序上传到在线服务器后，我最近遇到了这个问题，我不断收到警告，例如：

```
YiiBase::include(CJuiInputWidget.php) [<a href='yiibase.include'>yiibase.include</a>]:       failed to open stream: No such file or directory 
```

- 或者 -

```
YiiBase::include(YiiMailer.php) [<a href='yiibase.include'>yiibase.include</a>]: failed to open stream: No such file or directory 
```

- 或者 -

```
YiiBase::include(CGridColumn.php) [<a href='yiibase.include'>yiibase.include</a>]: failed to open stream: No such file or directory 
```

这里真正的问题是，所有这些页面都可以在我的本地主机或在线服务器上的其他页面上完美运行。当我隐藏警告时，一些页面正常显示而另一些页面不正常显示，我知道错误仍然存​​在。

我的本地主机规格是：XAMPP、Windows 7 操作系统、PHP 版本 5.3.8

在线服务器规格：XAMPP、Windows 7 操作系统、PHP 版本 5.2.6

我目前正在通过在 main.xml 中导入所需的小部件来解决这个问题。例如，同样疯狂的是 CGridColumn 和 CJuiInputwidget 在其他页面上运行良好，我确保考虑了区分大小写。

任何人都可以指出正确的方向或给我任何关于正在发生的事情的指示或想法，任何提示或建议都非常感谢！

这也是正在发生的事情的堆栈跟踪：

```
**Stack trace:
 #0 D:\...\yii\framework\YiiBase.php(395): spl_autoload_call()
 #1 D:\...\yii\framework\YiiBase.php(395): autoload()
 #2 D:\...\yii\framework\YiiBase.php(296): autoload()
 #3 D:\...\yii\framework\YiiBase.php(196): import()
 #4 D:\...\yii\framework\zii\widgets\grid\CGridView.php(363): 
```

创建组件（）**

如您所见，主要问题与自动加载有关

感谢您抽出时间来阅读，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:34:28.813

可能是在 Windows 上开发、在 Linux 上托管的常见问题。Windows 不关心文件名的大小写，Linux 关心。我会检查您编写或包含的任何小部件以及您拥有的任何自定义包定义。只要确保大小写正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:23:10.253

好吧，我将此添加到 Index.php 以隐藏警告...在我的 POV 中非常脏

```
ini_set('error_reporting', E_NOTICE); 
```

问题解决了，我仍然无法理解发生了什么！

# php - 我看不到 wordpress .php 文件？

> ID：14525988
> 
> 赞同：0
> 
> 时间：2012-12-01T15:33:39.677
> 
> 标签：php, dreamweaver, wordpress

我在 Windows XP 上安装了 WAMP 服务器 - 它工作正常。我将**Wordpress 3.4.2**安装到`www.wordpress`- 没问题。在 Dreamweaver CS5 中，我使用`www.wordpress`根文件夹创建了一个站点，并分配了一个本地测试服务器 - 没问题。

在 Dreamweaver 中，我打开`twentyten`主题 - `index.php`- 并按下`F12`以在 Firefox 中查看页面 - 并得到：

```
Fatal error: Call to undefined function get_header()... - on line 16 
```

这是一个全新且清晰的 wordpress 安装。**为什么函数 ( `get_header`) - 未定义？**为了检查服务器，我将另一个 .php 文件复制到同一个文件夹中`F12`——它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:50:01.187

当您单击`F12`Dreamweaver 中的 时，它将使用 Windows 本地路径文件系统在浏览器中打开该文件，因为您应该在 localhost 上运行该文件。

使用`F12`文件将打开为`C:\\Wamp\Wordpress\index.php`.

但是您应该将其打开为`localhost/wordpress/`.

此外，您应该`index.php`在 wordpress 文件夹中运行，而不是在主题文件夹中的索引文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:08:20.607

如果您运行的是 DesktopServer Premium 而不是 WAMP，则可以直接处理主题文件。在处理 WordPress 模板文件时，它是唯一支持 Dreamweaver 的 WYSIWYG 的 Web 服务器。

[http://www.youtube.com/watch?v=2bCTbjoBWa8&feature&t=4m39s](http://www.youtube.com/watch?v=2bCTbjoBWa8&feature&t=4m39s)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T18:15:32.140

发生错误是因为您试图在 WP 层次结构中查看错误的 index.php 文件。主题文件夹中的 index.php 并不是为了加载 WP 环境的所有功能。

打开文档根目录中的顶级 index.php 文件。（与 wp-admin、wp-content 和 wp-includes 文件夹位于同一目录中的 index.php 文件。）当通过 Web 访问您的站点时，该文件处理在浏览器（或 DW 实时视图）中看到的所有内容网址。

您可以通过编辑位于 /wp-content/themes/YOUR-THEME 的主题文件来更改主题

进行更改后，您可以通过预览顶级 index.php 文件来查看它们。

***您应该使用正确的 index.php 文件来通过 DW 预览查看您的网站，默认情况下应该只有以下代码。***

```
<?php
/**
 * Front to the WordPress application. This file doesn't do anything, but loads
 * wp-blog-header.php which does and tells WordPress to load the theme.
 *
 * @package WordPress
 */

/**
 * Tells WordPress to load the WordPress theme and output it.
 *
 * @var bool
 */
define('WP_USE_THEMES', true);

/** Loads the WordPress Environment and Template */
require( dirname( __FILE__ ) . '\wp-blog-header.php' ); 
```

# .net - OpenCover 在 CruiseControl.NET 下不产生结果

> ID：14525999
> 
> 赞同：1
> 
> 时间：2013-01-25T16:25:07.350
> 
> 标签：.net, msbuild, cruisecontrol.net, opencover

我有一个非常奇怪的情况，OpenCover 在 CruiseControl.NET 下没有产生结果，但是如果我从命令提示符运行相同的命令行，它确实会产生结果。

以下来自我的 CruiseControl 构建日志：

```
Build started 01/25/2013 10:11:10
Project "E:\GEMS_Build\Integration\Coverage.xml" (Coverage target(s)):
Target "Coverage":
E:\OpenCover\OpenCover.Console.exe -register:user -target:"E:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\mstest.exe" -output:"E:\GEMS_Build\Integration_Artifacts\shared.coverage.xml" -targetargs:"/testcontainer:E:\GEMS_Build\Integration\src\GEMS.Shared\GEMS.Shared.UnitTests\bin\Debug\GEMS.Shared.UnitTests.dll" -filter:"+[*]*" -mergebyhash
Microsoft (R) Test Execution Command Line Tool Version 11.0.50727.1
Copyright (c) Microsoft Corporation. All rights reserved.
Loading E:\GEMS_Build\Integration\src\GEMS.Shared\GEMS.Shared.UnitTests\bin\Debug\GEMS.Shared.UnitTests.dll...
Starting execution...
Results Top Level Tests
------- ---------------
Passed GEMS.Shared.UnitTests.Data.FilterTests.ANDFilterTest
Passed GEMS.Shared.UnitTests.Data.FilterTests.BasicFilterTest
Passed GEMS.Shared.UnitTests.Data.FilterTests.FilterEncodeDecodeTest
Passed GEMS.Shared.UnitTests.Data.FilterTests.ORFilterTest
Passed GEMS.Shared.UnitTests.Data.FilterTests.ValidateFieldsTest
Passed GEMS.Shared.UnitTests.Security.ActiveDirectoryHelperUnitTests.GetAllUsers
Passed GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.NoParameter
Passed GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.NoParameterWithCallback
Passed GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.OneParameterNoCallback
Passed GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.OneParameterWithCallback
Passed GEMS.Shared.UnitTests.Text.StringExtensionsTests.TestPlurals
11/11 test(s) Passed
Summary
-------
Test Run Completed.
Passed 11
----------
Total 11
Results file: E:\GEMS_Build\Integration\TestResults\SYSTEM_GCOVA38 2013-01-25 10_11_14.trx
Test Settings: Default Test Settings
Committing...
No results - no assemblies that matched the supplied filter were instrumented
this could be due to missing PDBs for the assemblies that match the filter
please review the output file and refer to the Usage guide (Usage.rtf) 
```

但是我然后复制并粘贴此命令行：

```
E:\OpenCover\OpenCover.Console.exe -register:user -target:"E:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\mstest.exe" -output:"E:\GEMS_Build\Integration_Artifacts\shared.coverage.xml" -targetargs:"/testcontainer:E:\GEMS_Build\Integration\src\GEMS.Shared\GEMS.Shared.UnitTests\bin\Debug\GEMS.Shared.UnitTests.dll" -filter:"+[*]*" -mergebyhash 
```

从我的 msbuild XML 中定义为 workingDirectory 的目录进入命令提示符，我得到以下结果：

```
Microsoft (R) Test Execution Command Line Tool Version 11.0.50727.1
Copyright (c) Microsoft Corporation. All rights reserved.

Loading E:\GEMS_Build\Integration\src\GEMS.Shared\GEMS.Shared.UnitTests\bin\Debug\GEMS.Shared.UnitTests.dll...
Starting execution...

Results               Top Level Tests
-------               ---------------
Passed                GEMS.Shared.UnitTests.Data.FilterTests.ANDFilterTest
Passed                GEMS.Shared.UnitTests.Data.FilterTests.BasicFilterTest
Passed                GEMS.Shared.UnitTests.Data.FilterTests.FilterEncodeDecodeTest
Passed                GEMS.Shared.UnitTests.Data.FilterTests.ORFilterTest
Passed                GEMS.Shared.UnitTests.Data.FilterTests.ValidateFieldsTest
Passed                GEMS.Shared.UnitTests.Security.ActiveDirectoryHelperUnitTests.GetAllUsers
Passed                GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.NoParameter
Passed                GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.NoParameterWithCallback
Passed                GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.OneParameterNoCallback
Passed                GEMS.Shared.UnitTests.Tasks.AsyncHelperTests.OneParameterWithCallback
Passed                GEMS.Shared.UnitTests.Text.StringExtensionsTests.TestPlurals
11/11 test(s) Passed

Summary
-------
Test Run Completed.
  Passed  11
  ----------
  Total   11
Results file:  E:\GEMS_Build\Integration\TestResults\pd7562_GCOVA38 2013-01-25 10_16_00.trx
Test Settings: Default Test Settings
Committing...
Visited Classes 17 of 30 (56.6666666666667)
Visited Methods 46 of 120 (38.3333333333333)
Visited Points 402 of 938 (42.8571428571429)
Visited Branches 76 of 279 (27.2401433691756)

==== Alternative Results (includes all methods including those without corresponding source) ====
Alternative Visited Classes 17 of 31 (54.8387096774194)
Alternative Visited Methods 55 of 146 (37.6712328767123) 
```

我完全不知道可能导致这种情况的原因。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:22:17.160

OpenCover 在[PDF](https://github.com/sawilde/opencover/raw/master/main/OpenCover.Documentation/Usage.pdf)中有一个关于构建集成的部分，它建议您预先注册分析器程序集，而不是使用 -register:user 开关。