# StackOverflow 问答 12668000-12668999

# c++ - 具有非静态 lambda 成员的类不能使用默认模板参数？

> ID：12668003
> 
> 赞同：4
> 
> 时间：2012-10-01T05:39:31.243
> 
> 标签：c++, gcc, lambda, c++11

这个小测试程序：

```
#include <functional>

//template<class T>            // <-- with this, gcc compiles  ok
template<class T=void>
struct  c{
        std::function<int(int)> f = [](int i){return i+i;};
};

int main() {}; 
```

Clang-3.2 可以编译，但是从 GCC 4.7.1 和 4.8 开始出现奇怪的错误：

```
t.cc:6:31: error: default argument for template parameter for class enclosing ‘struct __lambda0’
  function<int(int)> f = [](int i){return i+i;};
                               ^ 
```

这是没有人知道的那些晦涩的 C++ 规则异常之一，还是 GCC 错误？

**编辑** 看起来像一个错误。我已经提交了[错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54764)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T06:31:26.503

我认为这是一个带有默认成员初始化的 g++ 错误。我对此并不肯定，因此有以下支持证据：

```
template<class T=void>
struct  c {
   std::function<int(int)> f;
   c() : f([](int i){return i+i;}) {
   }
};

int main() {} 
```

如果这行得通，那么您正在做的事情也应该行得通。它确实如此，即使你构造了一个`c`.

就个人而言，我认为应该谨慎使用默认成员初始化。我认为它很容易造成很多混乱，因为大多数人希望所有初始化都在构造函数中完成，并且成员初始化器不一定靠近任何构造函数。所以他们可以让一些人摸不着头脑，想知道某些成员是如何获得特定价值的。

我可以看到一些案例，尤其是简单的、主要是数据类的案例，它可以很好地工作。但大多数情况下，我认为如果你有任何类型的构造函数体，你可能不应该使用默认成员初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:31:59.920

这段代码无论如何都会出错`gcc`。是的，没有默认参数它可以被编译。它可以编译，因为`struct c`它不在任何地方使用。但是如果你尝试创建这个结构的实例，你会得到错误。

```
#include <functional>

template<class T>
struct c {
    std::function<int(int)> f = [](int i){return i+i;};
};

int main() {
    c<int> _c; // error
} 
```

它看起来像一个错误`gcc`。这种方式可以帮助避免问题。

```
#include <functional>
#include <iostream>

template<class T=void>
struct c {
   c() : f([](int i){return i+i;}) {
   }

   std::function<int(int)> f;
};

int main() {
   c<> _c; 
   std::cout << _c.f(10) << std::endl;
} 
```

# ruby-on-rails - 如何使用 Rails 自定义像 /users/Tom 这样的 url？

> ID：12668006
> 
> 赞同：1
> 
> 时间：2012-10-01T05:39:45.500
> 
> 标签：ruby-on-rails, url

我正在使用 Rails 开发一个项目。我想更改此 url

**http://my_domain/users/1**

至

**http://my_domain/users/汤姆**

1 是**id**，而 Tom 是数据库中的**名称**。

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:46:01.783

在控制器中：

```
def to_param
  “#{name}”
end 
```

现在您可以通过以下方式找到用户

```
@users = User.find_by_name(params[:id]) 
```

在视图中：

```
<% @users.each do |user| %>
...
<%= link_to "Detail", user_path(user.name) %>
<% end %> 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:02:52.370

[友好的 ID gem](https://github.com/norman/friendly_id)非常适合。[这是](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)描述要做什么的 Railscast。

# c# - 当您将鼠标悬停在项目上时，如何使 Silverlight 树视图不突出显示项目

> ID：12668013
> 
> 赞同：1
> 
> 时间：2012-10-01T05:41:03.703
> 
> 标签：c#, silverlight

我知道这涉及到一个模板，但我对模板所做的工作很少，我不想为了完成这件事而制作一个巨大的新模板。当您将鼠标悬停在项目上时，silverlight 中的默认树视图会突出显示项目。有没有一种简单的方法可以让它不这样做？我还没有发现任何其他提及它；我搜索的大多数其他问题是人们询问如何使其突出显示，而不是相反。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:53:16.927

据我所知，您必须更改 TreeView 控件的默认模板才能完成所需的行为。

以下链接为您提供 TreeView 样式和模板：

*   [http://msdn.microsoft.com/en-us/library/dd728671%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/dd728671%28v=vs.95%29.aspx)

# javascript - 如何检查图像是否加载？

> ID：12668014
> 
> 赞同：0
> 
> 时间：2012-10-01T05:41:03.780
> 
> 标签：javascript, jquery

使用 ajax 我得到一组图片 URL，然后我需要从它们创建图库。我还需要制作一个显示下载图像数量的计数器，它看起来像这样：

```
var images;
var load_image = new Image();
load_image.onload = function(){
    myPhotoSwipe.show(0);
}
$.each(images['images'], function(key, value) { 
    load_image.src = ('index.php?load_image=' + value);
    $('#image_count').remove();
    $('span[class="loading"]').after('<div id="count"><h6>Images: ['+key+' / '+images_array['images'].length+']</h6></div>');
    images+= '<li><a href="index.php?load_image='+value+'"><img src="index.php?load_image='+value+'" /></a></li>';
}); 
```

问题是计数器总是在倒数第二个元素加载并保持在那里直到所有图像都被加载，但我需要像进度一样显示每个元素的负载。

PS我也试过`complete`，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:46:55.860

你快到了。问题是您正在重复使用相同的图像对象。当每个实例返回时，您需要创建一个 load_image 实例数组并在 onload 中增加您的计数器。

```
 function load(){
                var imageUrls = [];
                imageUrls.push('http://www.nasa.gov/images/content/690106main_iss033e005644_full.jpg');
                imageUrls.push('http://www.nasa.gov/images/content/690669main_201209210010_full.jpg');
                imageUrls.push('http://www.nasa.gov/images/content/691806main_hs3_full_full.jpg');
                imageUrls.push('http://www.nasa.gov/images/content/689231main_Webb_Mirror_Cans_orig_full.jpg');
                var images = [];
                var i;
                var counter = 0;
                var mainDiv = document.getElementById('somediv');
                var counterDiv = document.getElementById('counter');

                for (i = 0; i < imageUrls.length; i++)
                {
                    images[i] = new Image();
                    images[i].width = 100;
                    images[i].height = 100;
                    images[i].onload = function () {
                        counter++;
                        counterDiv.innerText = counter;
                    }
                    mainDiv.appendChild(images[i]);
                    images[i].src = imageUrls[i];
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:03:47.990

这应该解决它。原因是负载处理程序仅绑定到 1 个图像对象。

```
var images;

$.each(images['images'], function(key, value) { 
 var load_image = new Image();

 load_image.src = ('index.php?load_image=' + value);

$('#image_count').remove();

$('span[class="loading"]').after('<div id="count"><h6>Images: ['+key+' / '+images_array['images'].length+']</h6></div>');
images+= '<li><a href="index.php?load_image='+value+'"><img src="index.php?load_image='+value+'" /></a></li>';

load_image.onload = function(){
    myPhotoSwipe.show(0);
}

}); 
```

# ant - 使用 ant 脚本更改目录 (CD)

> ID：12668017
> 
> 赞同：3
> 
> 时间：2012-10-01T05:41:14.603
> 
> 标签：ant, cd

如何使用 ant 脚本更改目录 (CD)？ant 中是否有任何任务：cd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:47:01.117

> 在 Java 中没有办法做到这一点。

请参阅[更改 Java 中的当前工作目录？](https://stackoverflow.com/questions/840190/changing-the-current-working-directory-in-java)

所以蚂蚁也做不到。

当前目录只能为嵌套任务更改，例如[java](https://ant.apache.org/manual/Tasks/java.html)在单独的进程中使用`fork="yes"`.

# vb.net - 程序忽略它所在的文件夹

> ID：12668018
> 
> 赞同：0
> 
> 时间：2012-10-01T05:41:24.203
> 
> 标签：vb.net, asp.net-mvc-3

我已将我的程序放在服务器上的子文件夹中：localhost/program 并且当程序运行时它运行正确但是所有操作链接和图像都指向 localhost/... 而不是 localhost/program/...？

我试图通过在“{controller}/..”的开头添加“program/”来更改路由，但这似乎效果不大？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:54:39.107

您应该使用[`Url.Content`](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content%28v=vs.100%29.aspx)来解决您网站上任何文件或资源的 url。传递的参数是带有前缀（~）的相对路径：

```
<img src="@Url.Content("~/image/logo.jpg")"/> 
```

结果将是（根据您的设置）：

```
<img src="http://localhost/program/image/logo.jpg"/> 
```

相对虚拟路径是相对于应用程序根目录的，如果它只是一个波浪号 (~) 或以波浪号和双反斜杠 (~\\) 或波浪号和斜杠标记 (~/) 开头。

# linux - 从 grep 输出中删除字符

> ID：12668020
> 
> 赞同：36
> 
> 时间：2012-10-01T05:41:27.847
> 
> 标签：linux, bash, grep

我一直在减少我的 grep 输出（归结为我打算与其他字段关联的数字列表。）我的问题是 999 以上的数字中有逗号，我想知道如何打印输出没有逗号。

所以而不是输出是：

```
1,200,300 
```

它只是：

```
1200300 
```

关于我可以添加的其他管道命令的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-01T05:47:37.710

试试这个

```
< your command > | tr -d ',' 
```

tr 将删除所有逗号

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-01T05:42:42.837

```
 < your command > | sed -e 's/,//g' 
```

这将用“nothing”替换所有逗号而不更改任何其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T06:22:48.927

而不是 grep 使用单个 awk 命令，如下所示

```
awk '/your pattern/{gsub(",","");print}' your_file 
```

# iphone - 有什么方法可以知道 iPhone 连接到哪个网络（LTE 与 GSM）

> ID：12668021
> 
> 赞同：7
> 
> 时间：2012-10-01T05:41:30.197
> 
> 标签：iphone, objective-c, ios6, reachability, lte

随着 iOS 6 和 iphone 5 的发布，我试图弄清楚我的应用程序如何知道手机是处于 LTE 模式还是 GSM 模式。

我还没有看到 Reachability API 的任何更新，它可以给出它是否连接到 Wifi 和 WWAN，但我需要知道它是哪种 WWAN 连接。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-22T20:23:50.750

从 iOS 7 开始，您可以使用CoreTelephony 框架中的`currentRadioAccessTechnology`属性找到这一点。`CTTelephonyNetworkInfo`

```
#import <CoreTelephony/CTTelephonyNetworkInfo.h>

CTTelephonyNetworkInfo *networkInfo = [CTTelephonyNetworkInfo new];

if ([networkInfo.currentRadioAccessTechnology isEqualToString:CTRadioAccessTechnologyLTE]) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T15:45:44.593

对于 iO6 及以下，您不能这样做。

我在 Apple 开发者论坛上[问过这个问题](https://devforums.apple.com/message/735047)，Apple 确认他们还没有这个功能。

您可以提交[功能请求错误](https://bugreport.apple.com)。我已经这样做了（#12375460），但是重复的次数越多，实现的机会就越大。

这也是[这个问题](https://stackoverflow.com/questions/10159167/is-it-possible-to-detect-lte-connection-using-ios-sdk)的副本。

# php - 使用 AJAX 向页面传递值

> ID：12668024
> 
> 赞同：0
> 
> 时间：2012-10-01T05:41:55.213
> 
> 标签：php, jquery, ajax

[这是这个问题](https://stackoverflow.com/questions/1280767/how-do-i-run-php-code-when-a-user-clicks-on-a-link)的下一步

我有下面的脚本

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
function doSomething() {
    $.get("somepage.php");
    return false;
}
</script>

<a href="#" onclick="doSomething();">Click Me!</a> 
```

我的问题是，如果我想在有人点击链接后向 somepage.php 页面发送一个值，我该怎么做。

我的新`a`链接看起来像这样 `<a href="#" onclick="doSomething(<?php echo $id; ?>);">Click Me!</a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:44:49.200

尝试这个...

```
function doSomething(id) {
    $.get("somepage.php?id="+id);
    return false;
} 
```

或者

```
function doSomething(id) {
    $.get("somepage.php", { id: id } );
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:45:05.157

```
function doSomething(myData ) {    
$.get("somepage.php" , {'data': myData } , function(result){
    });
} 
```

这里数据是使用键值对发送的。如果你想在回调函数中处理返回的数据。否则你可以删除它..

# php - 添加朋友按钮/链接

> ID：12668025
> 
> 赞同：1
> 
> 时间：2012-10-01T05:42:03.377
> 
> 标签：php, javascript, html

我正在使用 PHP 和 HTML 创建一个社交网站。我想在我的网站上添加“**添加朋友**”按钮或链接。我想知道我该怎么做。意味着每当用户搜索某个名称时，相关搜索就会按顺序显示。

我想要的是在搜索列出的每个用户前面添加朋友按钮..有什么办法可以做到吗？

**因此，如果用户单击该按钮，则用户 ID 和朋友 ID 会被插入到朋友表中？**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:01:25.873

好的，我已经这样做了，首先设置一个会话变量并将当前登录的用户 ID 存储在其中

```
$_SESSION['user_id'] = //loggedin user id 
```

现在我不知道您使用的是哪种数据库设计，或者因为您没有指定或提供任何代码，但您可以简单的方法是制作一个简单的提交按钮将其封装在表单标签中，并且使用 post 方法

```
<?php
if(isset($_POST['add_friend'])) {
$current_user = $_SESSION['user_id']; //This will fetch user id of the person who is logged in and for this you need to have a user id in your session for the user who logs in

$friendid = $_POST['friend_id']; //This will assign friend id to variable $friendid

//Now execute the insert statement
if(mysqli_query($connect, "INSERT INTO addfriendtable(user_id, friend_id) VALUES('$current_user','$friendid')")) {
echo 'success';
} else {
echo 'Error Occured';
}
}

$fetch_records = mysqli_fetch_array($connect, "SELECT name, userid FROM table");
while ($show_users = mysqli_fetch_array($fetch_records)) {
//loop all search results
//place this code in front of all results
?>
<form method="post">
<input type="hidden" value="<?php echo $show_users['user_id']; ?>" name="friend_id">
<input type="submit" name="add_friend" value="Add Friend" />
</form>
<?php
}
?> 
```

# python - “扩展” numpy ndarray 的好方法？

> ID：12668027
> 
> 赞同：54
> 
> 时间：2012-10-01T05:42:10.943
> 
> 标签：python, numpy, multidimensional-array

有没有“扩展” numpy ndarray 的好方法？假设我有一个这样的 ndarray：

```
[[1 2]
 [3 4]] 
```

我希望每一行通过填充零来包含更多元素：

```
[[1 2 0 0 0]
 [3 4 0 0 0]] 
```

我知道必须有一些蛮力的方法来做到这一点（比如用零构造一个更大的数组，然后从旧的更小的数组中复制元素），只是想知道是否有 pythonic 方法来做到这一点。试过`numpy.reshape`但没有用：

```
import numpy as np
a = np.array([[1, 2], [3, 4]])
np.reshape(a, (2, 5)) 
```

Numpy 抱怨说：`ValueError: total size of new array must be unchanged`

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2014-08-07T03:43:20.010

您可以使用[`numpy.pad`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.pad.html)，如下所示：

```
>>> import numpy as np
>>> a=[[1,2],[3,4]]
>>> np.pad(a, ((0,0),(0,3)), mode='constant', constant_values=0)
array([[1, 2, 0, 0, 0],
       [3, 4, 0, 0, 0]]) 
```

这里`np.pad`说，“获取数组`a`并在其上方添加 0 行，在其下方添加 0 行，在其左侧添加 0 列，在其右侧添加 3 列。用“`constant`指定的`constant_values`”填充这些列。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-10-01T05:59:41.790

有索引技巧`r_`和`c_`.

```
>>> import numpy as np
>>> a = np.array([[1, 2], [3, 4]])
>>> z = np.zeros((2, 3), dtype=a.dtype)
>>> np.c_[a, z]
array([[1, 2, 0, 0, 0],
       [3, 4, 0, 0, 0]]) 
```

如果这是性能关键代码，您可能更喜欢使用等效`np.concatenate`而不是索引技巧。

```
>>> np.concatenate((a,z), axis=1)
array([[1, 2, 0, 0, 0],
       [3, 4, 0, 0, 0]]) 
```

还有`np.resize`and `np.ndarray.resize`，但它们有一些限制（由于 numpy 在内存中布置数据的方式），因此请阅读这些文档字符串。您可能会发现简单地连接更好。

顺便说一句，当我需要这样做时，我通常只是按照您已经提到的基本方式（创建一个零数组并在其中分配较小的数组），我看不出有什么问题！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-01T12:09:41.917

需要明确的是：没有扩展 NumPy 数组的“好”方法，因为 NumPy 数组**不可**扩展。一旦定义了数组，它在内存中占据的空间，它的元素数量和每个元素的大小的组合，是固定的，不能改变。您唯一能做的就是创建一个新数组并用原始数组的元素替换其中的一些元素。

为了方便起见，可以使用许多函数（[`np.concatenate`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.concatenate.html)函数及其`np.*stack`快捷方式、[`np.column_stack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.column_stack.html)、索引例程[`np.r_`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.r_.html)和`np.c_`...），但仅此而已：便利函数。其中一些在 C 级别进行了优化（`np.concatenate`我认为是和其他的），有些则不是。

请注意，您最初建议“手动”创建一个大数组（可能用零填充）并自己用初始数组填充它，这根本没有任何意义。更复杂的解决方案可能更具可读性。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-01T05:56:01.897

您应该使用`np.column_stack`或`append`

```
import numpy as np

p = np.array([ [1,2] , [3,4] ])

p = np.column_stack( [ p , [ 0 , 0 ],[0,0] ] )

p
Out[277]: 
array([[1, 2, 0, 0],
       [3, 4, 0, 0]]) 
```

附加似乎更快：

```
timeit np.column_stack( [ p , [ 0 , 0 ],[0,0] ] )
10000 loops, best of 3: 61.8 us per loop

timeit np.append(p, [[0,0],[0,0]],1)
10000 loops, best of 3: 48 us per loop 
```

并且与`np.c_`[ `np.hstack`append 似乎仍然是最快的] 进行比较：

```
In [295]: z=np.zeros((2, 2), dtype=a.dtype)

In [296]: timeit np.c_[a, z]
10000 loops, best of 3: 47.2 us per loop

In [297]: timeit np.append(p, z,1)
100000 loops, best of 3: 13.1 us per loop

In [305]: timeit np.hstack((p,z))
10000 loops, best of 3: 20.8 us per loop 
```

并且`np.concatenate`[这比`append`] 还要快一点：

```
In [307]: timeit np.concatenate((p, z), axis=1)
100000 loops, best of 3: 11.6 us per loop 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-06-19T05:45:00.093

## 一个简单的方法：

```
# what you want to expand
x = np.ones((3, 3))

# expand to what shape 
target = np.zeros((6, 6))

# do expand
target[:x.shape[0], :x.shape[1]] = x

# print target
array([[ 1.,  1.,  1.,  0.,  0.,  0.],
       [ 1.,  1.,  1.,  0.,  0.,  0.],
       [ 1.,  1.,  1.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.]]) 
```

## 功能方式：

[从https://stackoverflow.com/a/35751427/1637673](https://stackoverflow.com/a/35751427/1637673)借用，稍作修改。

```
def pad(array, reference_shape, offsets=None):
    """
    array: Array to be padded
    reference_shape: tuple of size of narray to create
    offsets: list of offsets (number of elements must be equal to the dimension of the array)
    will throw a ValueError if offsets is too big and the reference_shape cannot handle the offsets
    """

    if not offsets:
        offsets = np.zeros(array.ndim, dtype=np.int32)

    # Create an array of zeros with the reference shape
    result = np.zeros(reference_shape, dtype=np.float32)
    # Create a list of slices from offset to offset + shape in each dimension
    insertHere = [slice(offsets[dim], offsets[dim] + array.shape[dim]) for dim in range(array.ndim)]
    # Insert the array in the result at the specified offsets
    result[insertHere] = array
    return result 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-25T13:16:08.187

还有类似的方法，如 np.vstack、np.hstack、np.dstack。我喜欢这些而不是 np.concatente，因为它清楚地表明了正在“扩展”的维度。

```
temp = np.array([[1, 2], [3, 4]])
np.hstack((temp, np.zeros((2,3)))) 
```

很容易记住，因为 numpy 的第一个轴是垂直的，所以 vstack 扩展了第一个轴，第二个轴是水平的，所以 hstack。

# jquery - SignalR 的 $.hubConnection() 不工作

> ID：12668035
> 
> 赞同：5
> 
> 时间：2012-10-01T05:43:12.457
> 
> 标签：jquery, asp.net-mvc, signalr

我正在尝试根据[此处的示例在](http://geekswithblogs.net/jeroenb/archive/2011/12/14/signalr-starter-application.aspx)ASP.NET MVC 4 应用程序中实现聊天模块。由于这个没有使用最新的 SignalR 版本（0.5.3），我不得不调整代码以使其工作。

问题是，我什至无法让 hubConnection 工作。我遇到一个 JS 错误，上面写着：

```
Uncaught TypeError: Object function ( selector, context ) {
        // The jQuery object is actually just the init constructor 'enhanced'
        return new jQuery.fn.init( selector, context, rootjQuery );
    } has no method 'hubConnection' 
```

我不确定为什么没有 hubConnection 方法。我有最新的 jQuery 和 SignalR 库，我只是按照[这里](http://blogs.msdn.com/b/webdev/archive/2012/08/22/announcing-the-release-of-signalr-0-5-3.aspx)的 SignalR 0.5.3 发行说明进行操作。这是我的视图中生成的代码片段：

```
<script src="/Scripts/jquery-1.8.2.js"></script>
<script src="/Scripts/jquery.signalR-0.5.3.js"></script>
<script type="text/javascript" src="/signalr/hubs"></script>
<script type="text/javascript">
    $(function () {
        var connection = $.hubConnection();
        var chatHubClient = connection.createProxy("chatHub");

        connection.start(function () {
            chatHubClient.join('TEST');
        });
    });
</script> 
```

我希望有人能指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T06:08:50.780

我想您已经按照 0.5.3 公告中的演练进行了操作？[http://blogs.msdn.com/b/webdev/archive/2012/08/22/announcing-the-release-of-signalr-0-5-3.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/22/announcing-the-release-of-signalr-0-5-3.aspx)

确保您可以在浏览器中同时打开 /Scripts/jquery.signalR-0.5.3.js 和 /signalr/hubs。

# windows-phone-7 - 如何像在灯光主题中一样更改切换开关的按钮样式？

> ID：12668036
> 
> 赞同：2
> 
> 时间：2012-10-01T05:43:14.367
> 
> 标签：windows-phone-7, xaml, expression-blend

我想让它像这样：

![](../Images/80b9ed68466554e0d296b5f39b359929.png)

但是，当我使用深色主题时，我的 ToggleSwitch 看起来像

![在此处输入图像描述](../Images/0b9b79bf8835c855d6678352ebe18a8e.png)

是否可以定义 ToggleSwitch 应该使用浅色主题样式？或者我应该如何更改我的 ToggleSwitch 样式以获得第一张图片上的按钮？

我认为，代码并不重要，因为现在它就像一个模板副本（因为它看起来像默认但有另一个背景）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:16:35.137

您应该使用预定义电话资源中的正确颜色：

在 xaml 中，您可以访问：

```
<Rectangle Stroke="{StaticResource PhoneContrastBackgroundColor}" /> 
```

所以你会在浅色主题中看到黑色，在黑色主题中看到颜色。

# python - 使用 ADT 方法 python 转换程序

> ID：12668038
> 
> 赞同：1
> 
> 时间：2012-10-01T05:43:30.023
> 
> 标签：python, class

我是一个初级程序员。

我一直在使用六猜算法的主脑求解器编写代码以进行分配。

（有关 mastermind 及其算法的更多信息：[Mastermind on wiki](http://en.wikipedia.org/wiki/Mastermind_%28board_game%29)）

我几天前就想通了。但是我们的教授设置了固定的模板，然后我不知道如何将我的代码转换成它。

下面是我的代码。可能很尴尬，但它有效，而且速度并不慢。

* * *

```
def product(*args, repeat=1):
    pools = [list(pool) for pool in args] * repeat
    result = [[]]
    for pool in pools:
        result = [x+[y] for x in result for y in pool]
    for prod in result:
        yield list(prod)

def sort_list(total_list):
    d0=list()
    d1=list()
    d2=list()
    d3=list()
    d4=list()

    for x in total_list:
        mlist=list()
        alist = x
        n = 0
        while n<4:
            m = alist.count(alist[n])
            mlist.append(m)
            n = n + 1
        if max(mlist)==1:
            d0.append(alist)
        elif max(mlist)==2 and mlist.count(2)==2:
            d1.append(alist)
        elif max(mlist)==2 and mlist.count(2)>2:
            d2.append(alist)
        elif max(mlist)==3 :
            d3.append(alist)
        elif max(mlist)==4 :
            d4.append(alist)

    total_list = d0+d1+d2+d3+d4
    possible = [''.join(p) for p in total_list]
    return total_list

def computeFeedback(code,guess):    
    b = 0
    w = 0
    inCodeCount = {'A':0,'B':0,'C':0,'D':0, 'E':0, 'F':0}
    inGuessCount = {'A':0,'B':0,'C':0,'D':0, 'E':0, 'F':0}
    for i in range(0,4):
        if code[i] == guess[i]:
            b += 1
        inCodeCount[code[i]]+=1
        inGuessCount[guess[i]]+=1
    for ch in inCodeCount:
        w+=min(inCodeCount [ch], inGuessCount [ch])
    w-=b 
    feedback = str(w)+'w'+str(b)+'b'
    return feedback

guesscount=0
code=input()
while guesscount<8:
    guesscount += 1
    if guesscount==1:
        guess='ABCD'
        print("My guess is:",guess)
        feedback=computeFeedback(code,guess)
        if feedback!='0w4b':
            combinations=sort_list([''.join(x) for x in product('ABCDEF',repeat=4)])
            overlap=list()
            for x in combinations:
                fb=computeFeedback(guess,x)
                overlap.append(x)
                if fb != feedback:
                    overlap.pop()
            common=overlap
            overlap=list()

        else:
            print("Game Over in", guesscount,"steps")
            break
    if guesscount==2:
        guess='BCDE'
        print("My guess is:",guess)
        feedback=computeFeedback(code,guess)
        if feedback!='0w4b':
            combinations=sort_list([''.join(x) for x in product('ABCDEF',repeat=4)])
            overlap=list()
            for x in combinations:
                fb=computeFeedback(guess,x)
                overlap.append(x)
                if fb != feedback:
                    overlap.pop()
            common=[token for token in overlap if token in common]
            overlap=list()

        else:
            print('Game Over in,', guesscount,'steps')
            break
    if guesscount==3:
        guess='CDEF'
        print("My guess is:",guess)
        feedback=computeFeedback(code,guess)
        if feedback!='0w4b':
            combinations=sort_list([''.join(x) for x in product('ABCDEF',repeat=4)])
            overlap=list()
            for x in combinations:
                fb=computeFeedback(guess,x)
                overlap.append(x)
                if fb != feedback:
                    overlap.pop()
            common=[token for token in overlap if token in common]

            overlap=list()
        else:
            print('Game Over in', guesscount,'steps')
            break
    if guesscount==4:
        if common[0]=="acfb".upper():
            guess="dcad".upper()
        if common[0]=="aebf".upper():
            guess="edfd".upper()
        if common[0]=='AEFB':
            guess='EACC'
        if common[0]=='AFBE':
            guess='BFCD'
        if common[0]=='BAFE':
            guess='EADC'
        if common[0]=='BEAF':
            guess='EDAE'
        if common[0]=='BEFA':
            guess='EEDA'
        if common[0]=='EABF':
            guess='FDFB'
        if common[0]=='AADB':
            guess='BABD'
        if common[0]=='ABAE':
            guess='BBCC'
        if common[0]=='AEAF':
            guess='CFFD'
        if common[0]=='CAFA':
            guess='FDFA'
        if common[0]=='AAEE':
            guess='DDDF'
        else:
            guess=common[0]
        print("My guess is:",guess)
        if len(common)>1:
            common.pop(0)

            feedback=computeFeedback(code,guess)
            if feedback!='0w4b':
                combinations=sort_list([''.join(x) for x in product('ABCDEF',repeat=4)])
                overlap=list()
                for x in combinations:
                    fb=computeFeedback(guess,x)
                    overlap.append(x)
                    if fb != feedback:
                        overlap.pop()
                common=[token for token in overlap if token in common]
                overlap=list()
            else:
                print('Game Over in', guesscount,'steps')
                break
        else:
            print('Game Over in', guesscount,'steps') 
            break
    if guesscount==5:
        guess=common[0]
        print("My guess is:",guess)
        if len(common)>1:
            common.pop(0)

            feedback=computeFeedback(code,guess)
            if feedback!='0w4b':
                combinations=sort_list([''.join(x) for x in product('ABCDEF',repeat=4)])
                overlap=list()
                for x in combinations:
                    fb=computeFeedback(guess,x)
                    overlap.append(x)
                    if fb != feedback:
                        overlap.pop()
                common=[token for token in overlap if token in common]

                overlap=list()
            else:
                print('Game Over in', guesscount,'steps')
                break
        else:
            print('Game Over in', guesscount,'steps')
            break
    if guesscount==6:
            guess=common[0]
            print("My guess is:",guess)
            if len(common)>1:
                common.pop(0)

                feedback=computeFeedback(code,guess)
                if feedback!='0w4b':
                    combinations=sort_list([''.join(x) for x in product('ABCDEF',repeat=4)])
                    overlap=list()
                    for x in combinations:
                        fb=computeFeedback(guess,x)
                        overlap.append(x)
                        if fb != feedback:
                            overlap.pop()
                    common=[token for token in overlap if token in common]

                    overlap=list()
                else:
                    print('Game Over in', guesscount,'steps')
                    break
            else:
                print('Game Over in', guesscount,'steps')
                break
    if guesscount==7:
            guess=common[0]
            print("My guess is:",guess)
            if len(common)>1:
                common.pop(0)
                feedback=computeFeedback(code,guess)
                if feedback!='0w4b':
                    combinations=sort_list([''.join(x) for x in product('ABCDEF',repeat=4)])
                    overlap=list()
                    for x in combinations:
                        fb=computeFeedback(guess,x)
                        overlap.append(x)
                        if fb != feedback:
                            overlap.pop()
                    common=[token for token in overlap if token in common]

                    overlap=list()
                else:
                    print('Game Over in', guesscount,'steps')
                    break
            else:
                print('Game Over in', guesscount,'steps')
                break
if guesscount==8:
    print('Failure') 
```

* * *

是的，这里有我必须完成的代码破解功能和运行该功能的策划引擎的模板：

* * *

模板

```
class CodeBreaker:
    def __init__(self):

    def makeGuess(self):

        return guess

    def getFeedback(self, feedbackStr): 
```

* * *

引擎

```
from mastermind import CodeBreaker

def computeFeedback(code,guess):
    # Given a code and guess computes the feedback string

    b = 0
    w = 0
    inCodeCount = {'A':0,'B':0,'C':0,'D':0, 'E':0, 'F':0}
    inGuessCount = {'A':0,'B':0,'C':0,'D':0, 'E':0, 'F':0}
    for i in range(0,4):
        if code[i] == guess [i]:
            b += 1
        inCodeCount[code[i]] += 1
        inGuessCount[guess[i]] += 1
    for ch in inCodeCount:
        w += min(inCodeCount [ch], inGuessCount [ch])
    w -= b 
    feedback = str(w)+'w'+str(b)+'b'
    return feedback

code = input()

while (code != None):
    guesscount = 0
    myBreaker = CodeBreaker()
    while (guesscount < 8):
        guess = myBreaker.makeGuess()
        print("My guess is:",guess)
        guesscount += 1
        feedback = computeFeedback(code, guess)
        print(feedback)
        if feedback == "0w4b":
            print("Game Over in", guesscount,"steps")
            break
        myBreaker.getFeedback(feedback)
    if guesscount == 8:
        print("Failed to find the solution in 8 steps")
    code = input() 
```

* * *

我上课不好。我什至不知道**init**应该包含什么。任何人都可以帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:39:13.537

将代码转换为类的最简单方法是将所有代码放入`getFeedback`方法中，除了计算您发送给评估的猜测之外，记住属性中的猜测`self.guess`，并在下次`makeGuess`函数时返回叫。您还需要将所有全局变量（如`common`）转换为属性（如`self.common`）。这是一个草图：

```
class CodeBreaker:
    def __init__(self):
        self.guess_count = 0
        self.guess = 'ABCD'
        self.common = []

    def makeGuess(self):
        return self.guess

    def getFeedback(self, feedback):
        self.guess_count += 1
        if self.guess_count == 1:
            # ... your code here ...
            self.guess = 'BCDE'
        elif self.guess_count == 2:
            # ... your code here ...
            self.guess = 'CDEF'
        elif self.guess_count == 3:
            # ... your code here ...
        # ... and so on ... 
```

我应该补充一点，您的代码非常重复。以下更改将是值得的：

1.  Python 标准库已经包含一个函数[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product)来完成你的函数的工作`product`（尽管它以不同的方式获取它的参数），所以你最好使用它。

2.  您为每个猜测复制基本上相同的代码（生成组合集，根据最近的猜测评估组合，更新`common`等等）。将此代码放入方法中应该很简单，这样您就不必多次复制它。

3.  猜测 4 和更高的代码几乎相同：当然根本不需要复制此代码（只需同时编写`if guesscount >= 4:`和处理它们）。

您可能想研究这个类（它使用与您的解决方案类似的方法，但删除了所有重复），看看您是否能弄清楚它是如何工作的：

```
from itertools import product
from random import choice
from copy import copy

class CodeBreaker(object):
    all_codes = [''.join(c) for c in product(*['ABCDEF'] * 4)]

    def __init__(self):
        self.codes = copy(self.all_codes)
        self.guess = 'AABB'     # Best first guess!

    def makeGuess(self):
        return self.guess

    def getFeedback(self, feedback):
        self.codes = [c for c in self.codes if computeFeedback(c, self.guess) == feedback]
        self.guess = choice(self.codes) 
```

在最坏的情况下，该算法最多可以进行 8 次猜测，但您有 8 次猜测可用，所以没关系。如果您只有六个可用的猜测，那么您需要一个更聪明的方法。以下替代算法基于一次前瞻做出最佳猜测，最多需要六次猜测。（但是，它运行得非常慢！）同样，您可能会发现研究它的工作原理很有趣（提示：它需要[最大值列表中的最小值](http://en.wikipedia.org/wiki/Minimax)）。

```
 def getFeedback(self, feedback):
        self.codes = [c for c in self.codes if computeFeedback(c, self.guess) == feedback]
        def key(g): return max(Counter(computeFeedback(c, g) for c in self.codes).values())
        self.guess = min(self.codes, key = key) 
```

这是[Knuth 的五猜算法](http://en.wikipedia.org/wiki/Mastermind_%28board_game%29#Five-guess_algorithm)（运行速度更慢）：

```
 def getFeedback(self, feedback):
        self.codes = [c for c in self.codes if computeFeedback(c, self.guess) == feedback]
        if len(self.codes) == 1:
            self.guess = self.codes[0]
        else:
            def key(g): return max(Counter(computeFeedback(c, g) for c in self.codes).values())
            self.guess = min(self.all_codes, key = key) 
```

PS你教授的代码也不完美！除了不遵循传统的 Python 风格（参见[PEP8](http://www.python.org/dev/peps/pep-0008/)）之外，它似乎也相当复杂和冗长。为什么不利用 Python 的[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)类来写一些简短而简单的东西：

```
from collections import Counter

def computeFeedback(code, guess):
    """
    Return the string `{white}w{black}b` where `black` is a count of the
    characters in `guess` that appear at the same position in `code`
    and `white` is a count of the characters in `guess` that appear at
    a different position in `code`.

    >>> computeFeedback('ABCD', 'ACAD')
    '1w2b'
    >>> computeFeedback('ABAB', 'AABB')
    '2w2b'
    >>> computeFeedback('ABCD', 'DCBA')
    '4w0b'
    """
    w = sum((Counter(code) & Counter(guess)).values())
    b = sum(c == g for c, g in zip(code, guess))
    return '{}w{}b'.format(w - b, b) 
```

# xml-parsing - 在连接的结果集中：错误：[XPTY0004] 预期单个项目，（元素 x { ... }，元素 x { ... }，...）找到

> ID：12668040
> 
> 赞同：0
> 
> 时间：2012-10-01T05:43:49.160
> 
> 标签：xml-parsing, xquery

我发现以下代码适用于我的一小部分数据，但我没有意识到我没有采取任何带有多个注释的样本。当我尝试将代码应用于每个条目有多个评论的实际数据库时，我收到了上述错误。

当前代码：

```
for $doc in doc('test')
let $results :=
(
  let $pKeywords := ('best clients', 'Very', '20')
  return
    for $kw in $pKeywords
    return
    (
      $doc/set/entry[contains(comment, concat('!', $kw))],
      $doc/set/entry[contains(comment, $kw)]
    )
  [not(position() gt 2)]
)
for $i in (1 to count($results))
return
(
  subsequence($results/comment, $i, 1),
  subsequence($results/buyer, $i, 1)
) 
```

文档：

```
<set>
  <entry>
    <comment>The client is only 20 years old.  Do not be surprised by his youth.</comment>
    <buyer></buyer>
    <id>1282</id>
    <industry>International Trade; Fish and Game</industry>
  </entry>
  <entry>
    <comment>!On leave in October.</comment>
    <comment>!Planning to make a large purchase before Christmas.</comment>
    <buyer></buyer>
    <id>709</id>
    <industry>Real Estate</industry>
  </entry>
    <entry>
    <comment>Is often !out between 1 and 3 p.m.</comment>
    <buyer></buyer>
    <id>127</id>
    <industry>Virus Software Marketting</industry>
  </entry>
  <entry>
    <comment>Very personable.  One of our best clients.</comment>
    <buyer></buyer>
    <id>14851</id>
    <industry>Administrative support.</industry>
  </entry>
  <entry>
    <comment>!Very difficult to reach, but one of our top buyers.</comment>
    <comment>His wife often answers the phone.  That means he is out of the office.</comment>
    <buyer></buyer>
    <id>1458</id>
    <industry>Construction</industry>
  </entry>
  <entry>
    <comment></comment>
    <buyer></buyer>
    <id>276470</id>
    <industry>Bulk Furniture Sales</industry>
  </entry>
  <entry>
    <comment>A bit of an eccentric.  One of our best clients.</comment>
    <buyer></buyer>
    <id>1506</id>
    <industry>Sports Analysis</industry>
  </entry>
  <entry>
    <comment>Very gullible, so please !be sure she needs what you sell her.  She's one of our best clients.</comment>
    <buyer></buyer>
    <id>1523</id>
    <industry>International Trade</industry>
  </entry>
  <entry>
    <comment>He wants to buy everything, but !he has a tight budget.</comment>
    <comment>!His company may be closing soon.</comment>
    <buyer></buyer>
    <id>1524</id>
    <industry>Public Relations</industry>
  </entry>
</set> 
```

结果：

```
Stopped at line 9, column 22: [XPTY0004] document-node()(...): function(item()*) as item()* expected, document-node() found. 
```

我遇到了类似的错误并且能够修复它，但是当我尝试应用修复时，它不起作用。例子：

```
 $doc('test')/set/entry[contains(., concat('!', $kw))],
  $doc('test')/set/entry[contains(., $kw)] 
```

返回相同的结果。

遍历期望的结果：

如果条目的子项包含 中的三个关键字中的任何一个，则第一个`return`应返回every`entry`及其子项。`comment``$pKeywords`

`concat('!', $kw)`应该优先考虑包含 ! 的评论。

第二个从第一个的结果中`return`分割出`comment`和`buyer`节点`return`。

只要`comment`每个条目中恰好有 1 个命名节点，代码就可以正常执行。当有 2 个或更多`comment`-named 节点时，代码失败，编译器返回上述错误：

`Stopped at line 9, column 22: [XPTY0004] document-node()(...): function(item()*) as item()* expected, document-node() found.`

**-编辑-**

期望的结果：

```
<comment>The client is only 20 years old.  Do not be surprised by his youth.</comment>
<buyer/>
<comment>Very personable.  One of our best clients.</comment>
<buyer/>
<comment>!Very difficult to reach, but one of our top buyers.</comment>
<buyer/>
<comment>A bit of an eccentric.  One of our best clients.</comment>
<buyer/> 
```

澄清期望的结果：

```
//contains ! and the first keyword, "best clients"; so, the first result should come from this entry.
  <entry>
    <comment>Very gullible, so please !be sure she needs what you sell her.  She's one of our best clients.</comment>
    <buyer></buyer>
    <id>1523</id>
    <industry>International Trade</industry>
  </entry>

//Only one entry contains ! and "best clients".  So, the first result containing "best clients" contains nodes for the second result.
  <entry>
    <comment>Very personable.  One of our best clients.</comment>
    <buyer></buyer>
    <id>14851</id>
    <industry>Administrative support.</industry>
  </entry>

//This contains ! and the second keyword, "Very", but it is a duplicate.  So, ideally its children should not be returned.
  <entry>
    <comment>!Very difficult to reach, but one of our top buyers.</comment>
    <comment>His wife often answers the phone.  That means he is out of the office.</comment>
    <buyer></buyer>
    <id>1458</id>
    <industry>Construction</industry>
  </entry>

//This contains ! and a string, "very" (part of everything).  Nodes from this entry should be returned as the third result.
  <entry>
    <comment>He wants to buy everything, but !he has a tight budget.</comment>
    <comment>!His company may be closing soon.</comment>
    <buyer></buyer>
    <id>1524</id>
    <industry>Public Relations</industry>
  </entry>

//The only entry whose comment child contains the keyword '20'.  There is no '!'-containing comment with 20, so this nodes is the top and only node whose children should be returned.
  <entry>
    <comment>The client is only 20 years old.  Do not be surprised by his youth.</comment>
    <buyer></buyer>
    <id>1282</id>
    <industry>International Trade; Fish and Game</industry>
  </entry> 
```

**-编辑2-**

Next pass 让我更好地了解了我要完成的工作，但存在一些明显的语法错误（例如，我仍在探索如何使用数组，如第 8 行所示）。我将在解决语法错误时更新它：

```
<set>
{
    let $kw := ('best clients', 'Very', '20')
    let $entry := doc('test')/set/entry
    let $priority := '!'

    for $i in (1, count($kw))
    let $priority_result[$i] :=
    (
        for $entries in $entry
        where $entry contains(., $priority) and where $entry contains $kw[$i]
        return subsequence($priority_result[$i], 1, 2)
    )

    if $priority_result[$i] < 2
    for $i in (1, count($kw))
    let $secondary_result[$i] :=
    (
        for $entries in $entry
        where $entry contains $kw[$i] and where $entry not($priority_result) and where $entry not($secondary_result[1..($i-1)])
        return $secondary_result[$i]
    )
    else let $secondary_result[$i] := ''

    for $i in (1, count($kw))
    return
    (
        $primary_result[$i],
        $secondary_result[$i]
    )
}
</set> 
```

以及建议的更改，它返回一个空结果：

```
for $doc in doc('test')
let $results :=
(
  let $pKeywords := ('best clients', 'Very', '20')
  return
    for $kw in $pKeywords
    return
    (
      $doc/set/entry/comment[contains(., concat('!', $kw))],
      $doc/set/entry/comment[contains(., $kw)]
    )
  [not(position() gt 2)]
)
for $i in (1 to count($results))
return
(
  subsequence($results/comment, $i, 1),
  subsequence($results/buyer, $i, 1)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:50:09.150

错误消息似乎在抱怨试图将 a`document-node()`作为函数调用。

`$doc('test')`对比`$doc`

* * *

要么，要么`comments(...)`只适用于单个节点，而不是节点集。

`contains(comment, $kw)`与`comment/contains(.,$kw)`
或`comment[contains(.,$kw)]`
或`comment[contains(text(),$kw)]`

* * *

这对我有用：

```
<set>{
    for $entry in doc('test')/set/entry
    let $kw := (
        for $prefix in ('!','')
        for $kw in ('best clients', 'Very', '20')
        where exists($entry/comment[contains(., concat($prefix,$kw))])
        return concat($prefix,$kw)
    )[1]
    where exists($kw)
    order by not(starts-with($kw,'!'))
    return <entry keyword="{$kw}">{
      ( $entry/comment,
        $entry/buyer )
    }</entry>
}</set> 
```

结果（每条评论多条`<entry>`）：

```
<set>
   <entry keyword="!Very">
      <comment>!Very difficult to reach, but one of our top buyers.</comment>
      <comment>His wife often answers the phone.  That means he is out of the office.</comment>
      <buyer/>
   </entry>
   <entry keyword="20">
      <comment>The client is only 20 years old.  Do not be surprised by his youth.</comment>
      <buyer/>
   </entry>
   <entry keyword="best clients">
      <comment>Very personable.  One of our best clients.</comment>
      <buyer/>
   </entry>
   <entry keyword="best clients">
      <comment>A bit of an eccentric.  One of our best clients.</comment>
      <buyer/>
   </entry>
   <entry keyword="best clients">
      <comment>Very gullible, so please !be sure she needs what you sell her.  She's one of our best clients.</comment>
      <buyer/>
   </entry>
</set> 
```

* * *

这将为您提供每个评论的单独条目：

```
<set>{
    for $entry in doc('test')/set/entry
    for $comment in $entry/comment
    let $kw := (
        for $prefix in ('!','')
        for $kw in ('best clients', 'Very', '20')
        where exists($comment[contains(., concat($prefix,$kw))])
        return concat($prefix,$kw)
    )[1]
    where exists($kw)
    order by not(starts-with($kw,'!'))
    return <entry keyword="{$kw}">{
      ( $comment,
        $entry/buyer )
    }</entry>
}</set> 
```

输出：

```
<set>
   <entry keyword="!Very">
      <comment>!Very difficult to reach, but one of our top buyers.</comment>
      <buyer/>
   </entry>
   <entry keyword="20">
      <comment>The client is only 20 years old.  Do not be surprised by his youth.</comment>
      <buyer/>
   </entry>
   <entry keyword="best clients">
      <comment>Very personable.  One of our best clients.</comment>
      <buyer/>
   </entry>
   <entry keyword="best clients">
      <comment>A bit of an eccentric.  One of our best clients.</comment>
      <buyer/>
   </entry>
   <entry keyword="best clients">
      <comment>Very gullible, so please !be sure she needs what you sell her.  She's one of our best clients.</comment>
      <buyer/>
   </entry>
</set> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:31:52.683

作为参考，这是我们开始的代码（有点吓人，我还是不明白）：

```
for $doc in doc('test')
let $results :=
(
  let $pKeywords := ('best clients', 'Very', '20')
  return
    for $kw in $pKeywords
    return
    (
      $doc/set/entry[contains(comment, concat('!', $kw))],  (: *1 :)
      $doc/set/entry[contains(comment, $kw)]                (: *1 :)
    )
  [not(position() gt 2)]
)
for $i in (1 to count($results))
return
(
  subsequence($results/comment, $i, 1), (: *2 :)
  subsequence($results/buyer, $i, 1)    (: *2 :)
) 
```

不抛出错误的版本以典型方式解决。我花了一段时间才发现第二个错误，标记为`*2`. 基本上，因为我在搜索中要更深一层`*1`，所以我需要为我的结果再上一层`..`：

```
for $doc in doc('test')
let $results :=
(
  let $pKeywords := ('best clients', 'Very', '20')
  return
    for $kw in $pKeywords
    return
    (
      $doc/set/entry/comment[contains(., concat('!', $kw))], (: *1, went deeper :)
      $doc/set/entry/comment[contains(., $kw)]               (: *1, went deeper :)
    )
  [not(position() gt 2)]
)
for $i in (1 to count($results))
return
(
  subsequence($results/../comment, $i, 1), (: *2, added .. :)
  subsequence($results/../buyer, $i, 1)    (: *2, added .. :)
) 
```

我仍在努力解决的问题：

1) 的使用`concat()`。我的理解是，它将两件事放在一起，其结果 for`$kw[1]`将等同于`"!best clients"`. 然而，结果并没有表明这一点。结果，感叹号并不总是直接位于优先级查询之前。

2) 不返回重复结果。我希望每个条目都是独一无二的。我需要在某处添加一个例程，该例程要么限制重复项进入我的结果集，要么消除之前的重复项`[not(position() gt 2)]`，其中结果的数量被修剪/切片。

感谢所有的观众和作品中的努力！仍然期待更好的答案！

# neo4j - 意外的 neo4j 密码查询结果

> ID：12668041
> 
> 赞同：0
> 
> 时间：2012-10-01T05:43:51.740
> 
> 标签：neo4j, cypher

我想确定与认识特定人的邻居的对话持续时间的相对百分比。

例如，当首先观察节点 A 时，我们必须知道他花了多少时间与他的所有邻居交谈，这是通过以下查询执行的：

```
neo4j-sh (0)$ start a = node(351061) match (a)-[r:TALKED_TO]->(b) return sum(r.duration)
==> +-----------------+
==> | sum(r.duration) |
==> +-----------------+
==> | 12418           |
==> +-----------------+
==> 1 row, 0 ms 
```

接下来，我们必须检查他的哪些邻居认识特定的人（例如 c），并仅将 b 认识 c 的 a 和 b 之间的对话持续时间相加：

```
neo4j-sh (0)$ start a = node(351061) match (a)-[r:TALKED_TO]->(b)-[p:KNOWS]->(c) return sum(r.duration)
==> +-----------------+
==> | sum(r.duration) |
==> +-----------------+
==> | 21013           |
==> +-----------------+
==> 1 row, 0 ms 
```

这里似乎不合逻辑的是，第二个总和大于第一个，而第二个应该只是第一个的一部分。有谁知道获得这样的结果可能是什么问题？该错误出现在 15000 个用户中的 7 个用户上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:13:51.983

您没有在该查询中查看特定的人 C。您正在匹配任何 :KNOWS 关系的所有路径，因此如果您有 a->b->c 和 a->b->d 您在 a->b 之间的持续时间将被计算两次。

您可能需要做的是：

```
start a = node(351061), c=node(xxxxx) // set c explicitly
match (a)-[r:TALKED_TO]->(b)
where b-[:KNOWS]->c // putting this in the where clause forces you to set C
return sum(r.duration) 
```

这是控制台中的一个示例：http: [//console.neo4j.org/r/irm0zy](http://console.neo4j.org/r/irm0zy)

请记住，这会`match`扩大和`where`收紧结果。您也可以使用 来执行此操作`match`，但您需要在 中指定 c `start`。

测试聚合函数在做什么的一个好方法是返回所有命名变量（或设置可以返回的路径）——这样你就可以看到聚合被分成小计。像这样：

```
start a=node(1) 
match a-[r:TALKED_TO]->b-[:KNOWS]->c 
return sum(r.duration), a,b,c;
+-----------------------------------------------------------------------------------------------+
| sum(r.duration) | a                       | b                       | c                       |
+-----------------------------------------------------------------------------------------------+
| 20              | Node[1]{name:"person1"} | Node[2]{name:"person2"} | Node[4]{name:"person4"} |
| 20              | Node[1]{name:"person1"} | Node[2]{name:"person2"} | Node[3]{name:"person3"} |
| 20              | Node[1]{name:"person1"} | Node[5]{name:"person5"} | Node[6]{name:"person6"} |
+-----------------------------------------------------------------------------------------------+ 
```

# ajax - Magento 管理模块使用 ajax 加载不同的表单

> ID：12668051
> 
> 赞同：1
> 
> 时间：2012-10-01T05:44:49.617
> 
> 标签：ajax, magento

我正在为管理面板开发一个模块。在模块中，它们是主表和 3 个子表。3 个子表有 3 种不同的形式。

记录正确插入到主表中。现在我添加了包含 2 个下拉列表的第二个选项卡，第一个下拉列表有主条目，第二个下拉列表有 3 个表单名称。我想在第二个下拉列表的基础上调用一个表单。

所以请帮我用ajax调用不同的表单，我还必须用ajax保存三种表单的数据。

谢谢

# matlab - 如何使用 for 循环将元素附加到矩阵？

> ID：12668054
> 
> 赞同：1
> 
> 时间：2012-10-01T05:45:06.543
> 
> 标签：matlab, matrix

我有以下数据矩阵，我想遍历该矩阵并根据给定行查看最后一列中的值，并将该行 - 该行的最后一个元素添加到新矩阵中。

```
5.1000    3.3000    1.7000    0.5000    1.0000
6.8000    3.2000    5.9000    2.3000    3.0000
5.0000    2.3000    3.3000    1.0000    2.0000
7.4000    2.8000    6.1000    1.9000    3.0000
6.5000    3.2000    5.1000    2.0000    3.0000
4.8000    3.4000    1.9000    0.2000    1.0000
4.9000    3.0000    1.4000    0.2000    1.0000
5.1000    3.8000    1.5000    0.3000    1.0000
5.1000    3.4000    1.5000    0.2000    1.0000
5.5000    2.6000    4.4000    1.2000    2.0000 
```

这是我拥有的代码

```
 M1 = [];
 M2 = [];
 M3 = [];
    for i=1:length(currentCell)
        if currentCell(1,5) == 1.00
            m3Data = currentCell(1:1,1:4);
            %how can I add m3Data to M1
        end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:00:28.423

让你的原始矩阵是`M`，然后这个

```
M1 = M(find(M(:,5)==1),1:4) 
```

将所有以 a 结尾的行`1`放入 M1，不包括最后一列。那是你要的吗 ？

如果需要，您可以使用 for 循环来完成，但我认为没有任何必要。

# cordova - 没有可用的艺术品 iphone build for ios6

> ID：12668062
> 
> 赞同：1
> 
> 时间：2012-10-01T05:45:57.107
> 
> 标签：cordova

iPhone 应用程序在资源文件夹中有 icon.png。当我在 iPhone 设备上执行我的应用程序时，该图标可用，但如果我进行构建并拖动到 iTunes 中。它没有图标。我正在使用 Xcode 4.5 iOS 6。如何解决这个问题？

提前感谢您分享您的知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:52:15.000

这看起来在 2.2.0 [https://issues.apache.org/jira/browse/CB-1482中已修复（通过提供默认值）](https://issues.apache.org/jira/browse/CB-1482)

您可能可以从[https://github.com/brion/incubator-cordova-ios/commit/c0c345389336381c5e1e8306ecbe560201267f8c复制东西](https://github.com/brion/incubator-cordova-ios/commit/c0c345389336381c5e1e8306ecbe560201267f8c)

# java - JNA 调用 RegisterDeviceNotification 返回 1066 错误

> ID：12668063
> 
> 赞同：0
> 
> 时间：2012-10-01T05:46:00.513
> 
> 标签：java, java-native-interface, jna

我已经阅读了以下帖子并将返回类型更改为 nativelong 但仍然失败并出现 1066 错误，并且我的代码看起来与以下链接中的 [完全相同](https://stackoverflow.com/questions/10540011/jna-call-registerdevicenotification-fails-with-error-1066)

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:31:44.877

解决了我所做的唯一改变是

“将RegisterDeviceNotification（）的第二个参数声明为DEV_BROADCAST_DEVICEINTERFACE类型并直接传递arg（而不是Structure.getPointer（））”并且它起作用了。还有一些建议要记住：

1.  确保您声明了结构字段顺序（3.5.0 及更高版本需要此；如果您未指定，则更早依赖于 JVM 执行预期的操作）。
2.  dbcc_name 可能是 char[] 或 byte[] 取决于您是否使用 ASCII/UNICODE 映射。

希望这会有所帮助...谢谢。

# django - 不在管理界面启用 Satchmo 运输模块

> ID：12668065
> 
> 赞同：0
> 
> 时间：2012-10-01T05:46:02.113
> 
> 标签：django, satchmo, ups

我在 Django 中使用 Satchmo。我想激活其中的 UPS 运输模块或使用设置文件将其设置为默认运输模块。但是，我不想使用管理界面来做与[这里](http://www.satchmoproject.com/docs/dev/shipping.html#enabling-modules)描述的相同的事情。

我能做些什么来实现这一目标或类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:44:13.600

Satchmo 中的运输模块设置在[django-livesettings](http://django-livesettings.readthedocs.org/en/latest/)中完成，即它们可以通过管理界面进行设置（并存储在数据库中）。然而，在生产系统上，这通常通过从数据库中导出设置并将相应的 LIVESETTINGS_OPTION 放入 settings.py来[禁用。](http://www.satchmoproject.com/docs/dev/configuration.html#disabling-the-live-settings-system)

这意味着您无需使用管理界面来更改您的设置。如果您将它们（以及您可能在 YOURSITEADDRESS/admin/settings/ 的管理界面中更改的所有其他内容）放入 LIVESETTINGS_OPTIONS，它们将无法再通过管理员访问。在 YOURSITEADDRESS/admin/settings/export/ 有一个方便的设置导出功能。

# php - PHP preg_match 直到双换行符

> ID：12668066
> 
> 赞同：2
> 
> 时间：2012-10-01T05:46:03.223
> 
> 标签：php, preg-match

我在 mysql 字段中有这些数据：

```
First text text text text
 text text text text
 text text text text text text
 text text text text text text

Second text text text text
 text text text text
 text text text text text text
 text text text text text text 
```

*我试图从第一个单词开始匹配直到双换行符。*我试过了：

```
preg_match('/First(.*)\n\n/', $mysqlrow, $m); 
```

这不返回任何行。我也尝试了`m`and`s`修饰符，它不返回正确的字符串。我也试过`\r\n`不返回任何东西。

你怎么做到这一点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T05:54:57.170

您需要`s`修饰符，还需要将通配符量词更改为非贪婪：

```
preg_match('/First(.*?)\n\n/s', $mysqlrow, $m); 
```

该`s`选项将导致`.`通配符匹配`\n`，非贪婪将导致`*`通配符在匹配之前不吃掉`\n\n`它所遇到的所有内容`\n\n`。

您还可以选择匹配`\r`以防万一您的数据库中有它：

```
preg_match('/First(.*?)\r?\n\r?\n/s', $mysqlrow, $m); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T05:55:45.833

这是您需要的另一个标志。标志“s”允许点捕获换行符。但它会吃掉你的双重'\n'。

你可以试试 ：

```
preg_match('/First(.*?)\n\n/s', $mysqlrow, $m); 
```

与？反转贪婪行为。请注意，可以使用可能更适合您的情况的 split 函数来拆分字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-14T12:41:25.217

尽管有像“s”这样的标志，但我遇到了 preg_match() 在多行字符串上不匹配的问题，但是模式不同。原来，我的正则表达式在 [] 内的字符集太长，带有许多不必要的转义序列 (\)。简化后它开始工作。

# ant - java.lang.OutOfMemoryError：生成报告时的 Java 堆空间

> ID：12668067
> 
> 赞同：0
> 
> 时间：2012-10-01T05:46:18.060
> 
> 标签：ant, junit

我正在尝试从执行 junit 测试用例后生成的 txt 格式报告生成 HTML 报告。在正确位置使用 build.xml 运行 ant 命令时，我收到以下错误消息

```
java.lang.OutOfMemoryError: Java heap space 
```

`ANT_OPTS=-Xmx1024m`我尝试通过命令增加堆空间。

仍然面临同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T05:52:22.863

在启动 Ant 之前使用`export JAVA_OPTS=-Xmx1024m`，因为 ANT_OPTS 可能会被 JAVA_OPTS 覆盖，如果它们是系统设置的

# c++ - 使用不同类型 nsuinteger (aka unsigned int) vs cdvdestinationtype 重新定义 Typedef

> ID：12668069
> 
> 赞同：2
> 
> 时间：2012-10-01T05:46:22.990
> 
> 标签：c++, typedef, redefinition

我正在使用 Cordova，`#import <Cordova/CDV.h>`在我的项目中，我使用了另一个 C++ 风格的库，所以我的文件必须是`*.mm`.

问题是，当我编译时，出现以下错误：

```
typedef redefinition with different types nsuinteger (aka unsigned int) vs cdvdestinationtype 
```

此错误位于`CDVCamera.h`：

```
enum CDVDestinationType {
    DestinationTypeDataUrl = 0,
    DestinationTypeFileUri
};
typedef NSUInteger CDVDestinationType; 
```

似乎问题出在我混合了 Objective-C 和 C++ 的事实。

我该如何解决？

# extjs - 如何检查是否在 Selenium 中选中了在 ExtJs 中实现为按钮的复选框？

> ID：12668073
> 
> 赞同：1
> 
> 时间：2012-10-01T05:47:01.923
> 
> 标签：extjs, selenium

> **可能重复：**
> [Selenium 复选框属性“已选中”](https://stackoverflow.com/questions/8187772/selenium-checkbox-attribute-checked)

我正在测试在 ExtJs 中实现的应用程序。

复选框和单选按钮被实现为按钮。

如果选中或未使用 Selenium，我正在尝试获取复选框的状态。

这是实现：

```
<td id="checkboxfield-1258-bodyEl" class="x-form-item-body x-form-cb-wrap" role="presentation" colspan="3" style="width: 100%;">
<input id="checkboxfield-1258-inputEl" class="x-form-field x-form-checkbox" type="button" hidefocus="true" autocomplete="off" aria-invalid="false" data-errorqtip="" style="-moz-user-select: text;">
<label id="checkboxfield-1258-boxLabelEl" class="x-form-cb-label x-form-cb-label-after" for="checkboxfield-1258-inputEl">Use External tag</label>
</td> 
```

有人可以指导我如何检查状态吗？

谢谢，哈帕尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:51:23.410

第一个可能的解决方案：您是否在 API 中尝试过这个 isSelected() 方法？

```
isChecked = e.findElement(By.tagName("input")).Selected;

isChecked = e.findElement(By.tagName("input")).isSelected; 
```

[在这里](https://stackoverflow.com/questions/8187772/selenium-checkbox-attribute-checked)查看一些附加信息 第二种可能的解决方案：这是获取元素某些属性的函数：

```
public String jsGetColor(String css){

        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;

    } 
```

希望这对你有帮助）

# memcached - Memcache 使用磁盘存储？

> ID：12668077
> 
> 赞同：6
> 
> 时间：2012-10-01T05:47:28.067
> 
> 标签：memcached

可以将 Memcache 配置为使用磁盘存储而不是 RAM 吗？

我在高 IO Amazon EC2 实例上运行 Memcache 服务器。该实例有 2TB 的 SSD 存储可用。我可以将 Memcache 配置为使用 SSD 存储来存储缓存内容吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T08:15:48.217

Twitter 刚刚在 SSD 上发布了他们的 Memcache，名为[fatcache](https://github.com/twitter/fatcache)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:01:14.007

据我所知，这是行不通的。但是这里指出了其他选择：[memcached-like key/value cache that uses the RAM and disk](https://stackoverflow.com/questions/3080741/memcached-like-key-value-cache-that-uses-both-ram-and-disk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T19:45:58.620

而不是 memcache，您可以使用 redis 女巫在磁盘上写入并将使用您的 ssd。

# c++ - 为什么 long int 不是 100% 准确的？

> ID：12668081
> 
> 赞同：0
> 
> 时间：2012-10-01T05:47:59.770
> 
> 标签：c++, linux, long-integer

我在 Linux 上尝试了 time -p 命令，我写了一些代码来浪费 CPU 周期：

```
#include <iostream>

using namespace std;

int main() {
 long int c;

 long int ss;

 for(c = 0;c < 10000000;c++) {
  ss += c*c;
 }

 cout<<ss<<endl;

 return 0;
} 
```

运行几次后，我注意到一些有趣的事情，但是：

```
me@octopus:~/Desktop> ./test
1292030741067648912
me@octopus:~/Desktop> ./test
1292030742538841328
me@octopus:~/Desktop> ./test
1292030742228685600
me@octopus:~/Desktop> ./test
1292030740402651312
me@octopus:~/Desktop> ./test
1292030740207543344
me@octopus:~/Desktop> ./test
1292030740346553856
me@octopus:~/Desktop> ./test
1292030741629275040
me@octopus:~/Desktop> ./test
1292030740397307072
me@octopus:~/Desktop> ./test
1292030742928964784
me@octopus:~/Desktop> ./test
1292030741780094096 
```

正如我所料，我不仅每次都没有得到相同的号码，甚至一次都没有得到相同的号码。这里发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T05:50:45.453

您尚未将 ss 初始化为零，因此其初始值未定义。你需要：

```
long int ss = 0; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T05:50:09.727

你还没有初始化`ss`。初始值可以是任何东西。

```
long int ss = 0; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T05:51:31.477

你必须初始化`ss`，否则你会得到不可预知的结果。

`long int ss = 0;`

未初始化的变量在 C 和 C++ 中具有未确定的值，这与 Java 和 C# 等其他一些编程语言不同，它们根据类型获得适当的默认值。因此，请注意 C/C++ 的这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T05:52:32.850

```
ss += c*c; 
```

总是不同的，因为在循环的第一次迭代中 ss 总是随机的。

您必须先将其初始化为 0 才能按预期工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T08:00:07.927

听听编译器怎么说很有趣：

```
#include <cstdio>

int main() {
  long int ss;

  for(long int c = 0; c < 10000000; c++) {
    ss += c*c;
  }

  printf("%ld", ss);

  return 0;
} 
```

（我使用 C IO，因为它在 IR 中产生的垃圾更少，但行为与流相似）

产生以下 LLVM IR（开启优化）：

```
define i32 @main() nounwind uwtable {
  %1 = tail call i32 (i8*, ...)* @printf(c"%ld\00", i64 undef)
  ret i32 0
} 
```

我相信这不`undef`言自明。

# xml - 在不使用 IIS 的情况下使用 XSLT 编辑 XML

> ID：12668083
> 
> 赞同：0
> 
> 时间：2012-10-01T05:48:31.677
> 
> 标签：xml, iis, xslt, scripting, asp-classic

我正在尝试使用 xslt 编辑 xml 文档。我需要使用 XSLT 将 XML 文件转换为可编辑的 HTML 表单，然后用户在 HTML 表单中所做的更改应该反映在 XML 文件中。我找到了这个教程。[http://www.w3schools.com/xsl/xsl_editxml.asp](http://www.w3schools.com/xsl/xsl_editxml.asp)

但问题是我没有安装 IIS，需要在不使用 IIS 的情况下执行此操作。那么有没有其他方法可以在不使用 IIS 的情况下使用 XSLT 编辑 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:05:33.620

如果我对您的理解正确，您只是在寻找一种无需使用 IIS（或其他支持此功能的 Web 服务器）即可使用 XSLT 处理器的方法。有很多方法可以测试 XSLT 转换，而无需安装任何软件。大量不同的网页将为您转换 XML（给定您的 XSLT 和目标 XML）。仅举几例：

1.  [http://www.xmlper.com/](http://www.xmlper.com/)
2.  [http://www.online-toolz.com/tools/xslt-transformation.php](http://www.online-toolz.com/tools/xslt-transformation.php)

但是，这些在线工具通常使用符合 XSLT 1.0 标准的处理器。这意味着如果您打算使用 XPath 函数/其他如此丰富的功能，您最好下载一个专门支持 XSLT 2.0 转换的 IDE。

商业产品包括[Visual Studio](http://www.microsoft.com/visualstudio/eng)、[Altova 的 XML Spy](http://www.altova.com/xmlspy.html)等。

在这种情况下，我对免费软件产品不太熟悉，但我认为您也可以尝试使用带有“XML 工具插件”的 Netbeans IDE。（如果使用 Netbeans：如果您需要 XSLT 2.0 支持，您可能必须将其配置为使用 Saxon 处理器（支持 XSLT2.0）而不是默认的 Xalan 处理器（支持 XSLT1.0））。

编辑：正如 Ignacio 所指出的，显然有很多方法可以使用命令行工具转换 XSLT。我在这个答案中的目标是视觉转换器，因为我发现这些对初学者更友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:54:00.520

如何使用三行 Powershell 脚本：

```
$xsl = New-Object -TypeName System.Xml.Xsl.XslCompiledTransform
$xsl.Load("stylefile.xsl")
$xsl.Transform("xmlfile.xml", "newfile.html") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:14:39.017

如果我理解正确，您需要对某些 ​​XML 执行 XSLT 转换，向用户呈现生成的 HTML 表单或可编辑的 HTML，以这种形式收集用户输入（或对 HTML 的更改）并将它们转换回更改XML。

要完成这些事情，您需要一个 XSLT 处理器和一种执行带有一些相关代码的 HTML 表单的方法。您可以使用任何 Web 浏览器执行这些操作——您不需要任何服务器组件，例如 IIS。一个独立的 HTML 页面可以包含所有必要的逻辑：您在浏览器中打开这个 HTML 页面，它就可以完成工作。

为了比这更具体，我们需要有关整个过程的更多细节，包括代码、表单、XML 等的一些示例（参见 Dimitre 评论）。

# captcha - 我们可以在 siebel 中实现这个 Captcha

> ID：12668087
> 
> 赞同：0
> 
> 时间：2012-10-01T05:48:48.457
> 
> 标签：captcha, siebel

您好，我想在 Siebel 应用程序中尝试验证码。

thyese Captcha 是否有任何第三方应用程序，以便我可以将其与 siebel 集成。如果有这样的网站，请分享。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:59:18.763

这是一个老问题！但由于这可能对将来的某人有用，我正在回答它..

我建议你调用外部 dll ..

```
Set objTime = CreateObject("SAMPLE_PRJ_NAME.SAMPLE_CLASS_NAME")
objTime.METHOD_NAME 
```

您可以从这里找到示例 VB 代码：
[http ://www.vbforums.com/showthread.php?645886-Captcha-Generator](http://www.vbforums.com/showthread.php?645886-Captcha-Generator)

# python-3.x - Python 导入在 VS2012 中不起作用

> ID：12668092
> 
> 赞同：3
> 
> 时间：2012-10-01T05:49:25.237
> 
> 标签：python-3.x, visual-studio-2012

我在 VS2012 中使用 python 导入时遇到问题。使用导入时，我无法编译/运行项目。如果我没有任何导入，python 将运行 main ok（并打印“hello world”）。这似乎是 VS 的错误，可能是配置，因为当我在 VS 中禁用异常时，它运行良好。

起初它错误地说：

```
[WinError 2] The system cannot find the file specified 
```

如果我继续几次，它会显示：

```
[WinError 2] The system cannot find the file specified: 'C:\\Users\\Drew Cross\\Documents\\Visual Studio 2012\\Projects\\Test\\Model\\__init__.pyd' 
```

然后它终于在继续运行了几次。

我有以下目录结构：

```
main.py
Model
    /__init__.py
    /graph.py 
```

主要.py：

```
import Model.graph

def main():
    print('Hello World')

if __name__ == '__main__':main() 
```

图.py：

```
class graph():
    def __init__(self):
        neighbors = [] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T19:29:20.777

`FileNotFoundError`我在使用 Python 3.3 时看到了这一点，它引发了 Python Tools for Visual Studio 尚未正确抑制的新异常（例如）。

临时解决方法是忽略以下异常，这些异常通常在导入过程中引发。您可以通过添加以下 Python 异常（通过 Visual Studio 的异常对话框）并取消选中“用户未处理”以忽略它们来做到这一点。

*   `exceptions.FileNotFoundError`
*   `exceptions.PermissionError`
*   `zipimport.ZipImportError`

更多讨论可以在[这个讨论](http://pytools.codeplex.com/discussions/398848)中找到。

# ajax - 从具有主干的外部 API 检索 JSON

> ID：12668093
> 
> 赞同：2
> 
> 时间：2012-10-01T05:49:30.520
> 
> 标签：ajax, json, api, backbone.js

我是backbone.js 的新手，我已经阅读了类似问题的其他解决方案，但仍然无法让我的示例正常工作。我有一个基本的 rails api，它从下面的 url 返回一些 JSON，我正在尝试通过一个backbone.js 前端访问。由于它们是不同的服务器，我认为我需要使用“jsonp”请求。我目前正在通过覆盖我的骨干集合中的同步功能来做到这一点。

API 网址： http: [//guarded-wave-4073.herokuapp.com/api/v1/plans.json](http://guarded-wave-4073.herokuapp.com/api/v1/plans.json)

```
sync: function(method, model, options) {
    options.timeout = 10000;
    options.dataType = 'jsonp';
    options.url = 'http://guarded-wave-4073.herokuapp.com/api/v1/plans.json'
    return Backbone.sync(method, model, options);
} 
```

为了测试这一点，我在我的 chrome 控制台中使用“plans = new Plans()”创建了一个新的“plans”集合，然后使用“plans.fetch()”来尝试获取 JSON。

当我之后调用 plan.models 时，我仍然有一个空数组，并且从 plan.fetch() 返回的对象似乎没有包含任何 json 数据。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:40:13.053

I have had the same problem before. You should not have to override your sync method.

Taken from [Stackoverflow Answer](https://stackoverflow.com/questions/2921242/how-to-use-jsonp-to-overcome-xss-issue)

"The JSONP technique uses a completely different mechanism for issuing HTTP requests to a server and acting on the response. It requires cooperating code in the client page and on the server. The server must have a URL that responds to HTTP "GET" requests with a block of JSON wrapped in a function call. Thus, you can't just do JSONP transactions to any old server; it must be a server that explicitly provides the functionality."

Are you sure your server abides to the above? Test with another compatible jsonp service (Twitter) to see if you receive results?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:46:19.650

您是否也尝试过覆盖 fetch 方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:03:59.553

您应该添加`?callback=?`到您的 api url 以启用 jsonp

# ios - 重新排序 UtableView 单元格时重新排序数据库

> ID：12668098
> 
> 赞同：0
> 
> 时间：2012-10-01T05:50:02.007
> 
> 标签：ios, sqlite, uitableview

我在 iOS 的 UITableView 中使用重新排序。我希望当我在 UITableView 单元格中重新排序时，我的数据库也应该重新排序。到目前为止，我找不到任何有用的教程。如何在 UITableview 中按顺序更改数据库。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:56:53.203

我不认为有任何内置的方法可以做到这一点。

你可以做这样的事情。

1.添加新列并将其命名为“订单”或“排序”

2.在这个 1,2 ,3 ....中插入序列号

3.当你在 UITableView 中更改顺序时更新此列。

4.现在当你选择数据时按此列排序

# macos - R：在 Mac 和 Linux 中更改 Tcltk 窗口的图标

> ID：12668102
> 
> 赞同：0
> 
> 时间：2012-10-01T05:50:12.240
> 
> 标签：macos, r, icons, tcl, tk

我创建了一个进度条来密切关注某些 R 脚本的执行情况。我想在栏中插入一个自定义图标，而不是默认的“Tk”图标。我可以使用 .ico 文件和以下命令在 Windows 上执行此操作

```
tcl('wm', 'iconbitmap', .win, 'Icon.ico') 
```

但我对如何在 Mac OSX 和 Linux 中做同样的事情感到茫然。显然，.ico 格式不起作用，但 .png、.jpg、.bmp、.xbm 或 .xpm 也不起作用。关于我如何继续进行的任何建议？下面附上示例图像和进度条码：-

[示例图片 http://tinypic.com/r/jt8efn/6](http://tinypic.com/r/jt8efn/6) - [http://tinypic.com/r/jt8efn/6](http://tinypic.com/r/jt8efn/6)

```
tkProgressBar2 <- function (title = 'Test progress bar', label = '', min = 0, max = 100, initial = 0, width = 300, userfn='helvetica', backg='white') {
  useText <- FALSE
  have_ttk <- as.character(tcl('info', 'tclversion')) >= '8.5'
  if (!have_ttk && as.character(tclRequire('PBar')) == 'FALSE') useText <- TRUE
  .win <<- tktoplevel(background=backg)
  tkfocus()
  tcl('wm', 'geometry', .win, '500x100+450+350')
  tcl('wm', 'iconbitmap', .win, '@Icon.xbm')
  .val <- initial
  .killed <- FALSE
  tkwm.geometry(.win, sprintf('%dx80', width + 40))
  tkwm.title(.win, title)
  fn <- tkfont.create(family = userfn, size = 12)
  if (useText) {
    .lab <- tklabel(.win, text = label, font = fn, padx = 0, background=backg)
    tkpack(.lab, side = 'left')
    fn2 <- tkfont.create(family = userfn, size = 16)
    .vlab <- tklabel(.win, text = '0%', font = fn2, padx = 20, background=backg)
    tkpack(.vlab, side = 'right')
    up <- function(value) {
      if (!is.finite(value) || value < min || value > max) return()
      .val <<- value
      tkconfigure(.vlab, text = sprintf('%d%%', round(100 * (value - min)/(max - min))))
    }
  } else {
    .lab <- tklabel(.win, text = label, font = fn, pady = 0, background=backg)
    .tkval <- tclVar(0)
    tkpack(.lab, side = 'top')
    tkpack(tklabel(.win, text = '', font = fn, background=backg), side = 'bottom')
    pBar <- if (have_ttk)
      ttkprogressbar(.win, length = width, variable = .tkval) else
        tkwidget(.win, 'ProgressBar', width = width, variable = .tkval)
    tkpack(pBar, side = 'bottom')
    up <- function(value) {
      if (!is.finite(value) || value < min || value > max) return()
      .val <<- value
      tclvalue(.tkval) <<- 100 * (value - min)/(max - min)
    }
  }
  getVal <- function() .val
  kill <- function() if (!.killed) {
    tkdestroy(.win)
    .killed <<- TRUE
  }
  title <- function(title) tkwm.title(.win, title)
  lab <- function(label) tkconfigure(.lab, text = label)
  tkbind(.win, '<Destroy>', function() stop())
  up(initial)
  structure(list(getVal = getVal, up = up, title = title, label = lab, kill = kill), class = 'tkProgressBar')
}

pb <- tkProgressBar2(title='Performing k-Means clustering', label='Some information in %', min=0, max=100, initial=0, width=400, userfn='verdana', backg='white') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:27:14.113

在 Linux 上，您使用[`wm iconphoto`](http://www.tcl.tk/man/tcl8.5/TkCmd/wm.htm#M36);设置图标 `wm iconbitmap`完全做其他事情。为此，您需要创建一个包含图像数据的[照片图像](http://www.tcl.tk/man/tcl8.5/TkCmd/photo.htm)。

我猜你在 R 中这样写：

```
tcl('wm', 'iconphoto', .win, tcl('image', 'create', 'photo', '-file', 'Icon.gif')) 
```

我不太确定您使用的 Tk 版本支持哪些图像格式，包括它可用的任何图像格式支持包。除非您（勇敢地）使用 8.6，否则最小的设置是 GIF 和 PPM，此时默认情况下也可以使用 PNG。

（您也可以通过编程方式创建照片图像的内容，但由于各种原因这很慢。）

OSX 没有相同意义上的窗口图标。每个最小化的窗口在最小化到扩展坞时仅显示其自身的快照是正常的。

# android - PDF在android中动态生成

> ID：12668105
> 
> 赞同：2
> 
> 时间：2012-10-01T05:50:28.130
> 
> 标签：android, pdf, pdf-generation

在我的 Pdf 文件中，数据来自服务器。所以在每一行中没有预先声明的列数和它的大小地雷宽度。在每一行中，任何内容都来自服务器图像或文本。我尝试过使用表格和段落，也可以使用 droidtext lib。但没有得到我想要的确切结果。如何从父文档左侧设置每列填充每列应从零（0）y轴开始。在这里，我的数据从顶部按行排列，因此在第一行 2 数据中，任何人都有想法请帮助我。为了解决这个问题。在这里发布一张我想要的结果并将我的数据格式化为相同的图像，在此先感谢。 ![在此处输入图像描述](../Images/3cc7a48f40a633340d5a8ec4aa9618ee.png)

# sts-springsourcetoolsuite - 如何获取 STS 中的菜单项

> ID：12668111
> 
> 赞同：0
> 
> 时间：2012-10-01T05:51:29.347
> 
> 标签：sts-springsourcetoolsuite

我不小心在我的 STS 中做了一些事情，现在菜单项工具栏不见了（文件、编辑等 Windows、帮助）![在此处输入图像描述](../Images/fe5c9c3cf867d5845b64701e9ec4e38d.png)

如何启用它？我希望有人可以帮助我，请这让我发疯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:18:12.730

您可以尝试的一件事是重置视​​角。右键单击屏幕右上角与当前透视图相对应的按钮（在屏幕截图中标记为“资源”），选择“重置”，然后选择“是”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-03T16:26:52.963

转到“窗口>新窗口”，然后它将打开一个带有顶部菜单的新窗口，然后您可以关闭另一个窗口。

# asp.net - 客户端验证和服务器端验证

> ID：12668119
> 
> 赞同：0
> 
> 时间：2012-10-01T05:52:19.760
> 
> 标签：asp.net, validation

为什么我们需要客户端和服务器端验证？我已经读过，出于安全原因，两者都是必需的..所以如果可以绕过客户端验证，那么为什么不只使用服务器端..使用客户端有什么用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:55:41.547

客户端验证可帮助用户更正错误，而无需包含所有错误消息的完整回发。它提高了效率，但它只是一种方便，显然可以绕过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:58:03.573

对每个验证进行回发并不是一个好习惯，因此您需要将客户端验证用于验证强制性字段，因此您也应该进行客户端验证

关于服务器端验证，如果浏览器 javascript 被禁用，你不能在客户端真正完成，最好在服务器端进行验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:59:44.790

通过客户端呈现，您的初始请求会加载页面布局、CSS 和 JavaScript。除了不包括部分或全部内容外，这都很常见。相反，JavaScript 发出另一个请求，获取响应（可能是 JSON），并生成适当的 HTML（可能使用模板库）。对于页面的后续更新，客户端呈现方法重复它用来获取的步骤最初的内容。即，JavaScript 用于获取一些 JSON 数据，模板用于创建 HTML。

使用服务器端渲染的更新是许多开发人员开始深入研究的地方。他们实际上认为页面刷新

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T06:03:26.427

对于互联网连接速度慢/受限/受限的用户来说，避免对服务器的不必要请求（例如，请求提交包含无效数据的表单，最终会被服务器拒绝）是很重要的。等待响应的时间可能会成为用户离开您的网页，然后向朋友和亲戚甚至任何人谈论您网站的坏话的理由。

我们总是想让所有用户开心，不是吗（即使有时我们觉得他们是敌人）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-08T15:30:15.387

出于多种原因，需要客户端和服务器端。我正在写几点来解释为什么它是必要的

*   对于每个来自验证的请求，都会从 Web 浏览器发送到 Web 服务器。因此，检查每个控件以进行验证对服务器来说是不必要的开销。假设有 1,00,000 人向服务器发送相同的请求。对于每个请求和响应，都需要一些时间（可能以纳秒为单位），这确实是不必要的。所以建议使用客户端验证。
*   出于安全原因，我们必须使用服务器端验证。作为程序员，它有责任阻止不良数据进入我们的应用程序。假设在浏览器中有人有意或无意地禁用 JavaScript 并尝试插入数据。如果不存在服务器端验证，那么我们的应用程序可能会出现不良数据。数据可能是一些错误信息，也可能是一个自我执行的程序，这对我们的应用程序确实有害。

因此建议同时使用客户端和服务器端验证以获得更好的标准应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T05:55:09.320

您不需要客户端，但如果不需要回发，对用户来说会更方便。如果你不关心用户体验，你可以让你的所有验证器只在服务器端，你的数据和操作将受到保护。

# vb.net - vb.net 到 mySQL 日期时间的转换

> ID：12668126
> 
> 赞同：1
> 
> 时间：2012-10-01T05:53:20.733
> 
> 标签：vb.net, datetime

嗨，我有这段代码，它给了我错误：

> 值的类型与列类型不匹配无法在 time_in_am 列中存储 <10/1/2012 3:43:30 PM>。预期类型是 MySqlDateTime。

“time_in_am”的 mySQL 数据类型是 DateTime。

```
dataRow = dataSet.Tables(0).NewRow()
dataRow("time_in_am") = DateTime.Now
dataSet.Tables(0).Rows.Add(dataRow) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:21:16.177

我相信 MySQL 接受的 DateTime 格式是`yyyy-mm-dd hh:mm:ss`

因此，将代码的第二行更改为：

```
dataRow("time_in_am") = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") 
```

有关每种格式“魔术字符串”的含义，请参见[此处](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#Y200)

如果您发现自己经常使用它（这很可能），您可以创建一个扩展：

```
Imports System.Runtime.CompilerServices

Public Module MyExtensions

    <Extension()>
    Public Function ToMySql(d As Date) As String
        Return d.ToString("yyyy-MM-dd HH:mm:ss")
    End Function

End Module 
```

现在您可以在代码中使用它，如下所示：

```
dataRow("time_in_am") = DateTime.Now.ToMySql() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:49:13.793

```
Return d.toString("yyyy-MM-dd HH:mm:ss") 
```

会解决的.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-13T12:29:45.343

我认为另一种最短的方法是使用 Format()

`dataRow("time_in_am") = Format(DateTime.Now, "yyyy-MM-dd HH:mm:ss")`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-09T03:56:05.997

我正在寻找一种方法来将此 vb6 日期转换为 mysql 接受的值转换为 vb.net；

'将日期转换为mysql格式

```
Public Function convToYMD(strDate)

strYear = CStr(Year(strDate))
strmonth = CStr(Month(strDate))
strday = CStr(Day(strDate))
strhour = CStr(Hour(strDate))
strminute = CStr(Minute(strDate))
strsecond = CStr(Second(strDate))

If Len(strhour) = 1 Then
    strhour = "0" & strhour
ElseIf Len(strhour) = 0 Then
    strhour = "00"
End If

If Len(strminute) = 1 Then
    strminute = "0" & strminute
ElseIf Len(strminute) = 0 Then
    strminute = "00"
End If

If Len(strsecond) = 1 Then
    strsecond = "0" & strsecond
ElseIf Len(strsecond) = 0 Then
    strsecond = "00"
End If

If Len(strday) = 1 Then
    strday = "0" + strday
ElseIf Len(strday) = 0 Then
    strday = "00"
End If

If Len(strmonth) = 1 Then
    strmonth = "0" & strmonth
ElseIf Len(strmonth) = 0 Then
    strmonth = "00"
End If

convToYMD = strYear + "-" + strmonth + "-" + strday + " " + strhour + ":" + strminute + ":" + strsecond

end function 
```

找到了这段代码并解决了我的问题！我刚刚在模块内添加

```
 If DateFormat.ShortDate Then
         Return d.ToString("yyyy-MM-dd")
    ElseIf DateFormat.LongDate Then
         Return d.ToString("yyyy-MM-dd HH:mm:ss")
    End If 
```

非常感谢！

# c# - 插入大量数据后代码无法正常工作？

> ID：12668127
> 
> 赞同：-2
> 
> 时间：2012-10-01T05:53:26.890
> 
> 标签：c#, asp.net

我有一个用于显示处于待机动员状态的员工的网格视图。最初在网格视图中加载了大约 2000 名员工。我的问题是，在动员页面中，当我们动员员工时，数据插入正确，但没有调用填充网格

它在我的本地系统中工作正常，但在服务器中却没有。是因为数据量大吗。其他所有功能都正常工作....

这是我的插入代码

```
int i = clsMob.InsertMobilizationDetails(dsMobilizn.GetXml());
if (i>0)
{
   FillGrid();
   ClearAll();
   string str = "<script>alert('Successfully mobilized the selected employees')</script>";
                 ScriptManager.RegisterStartupScript(Page, Page.GetType(), "Validation Error", str, false);
                 return;
} 
```

函数插入动员详情

```
public int InsertMobilizationDetails(string xml)
{
    Database_Operations dbo = new Database_Operations("TransMob_InDetails", true);
    dbo.AddParameter("@xmlMob", xml);        
    return dbo.ExecuteQuery();  //returns value as 1     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:40:07.087

如果记录数超过 2000 条，则可能存在服务消息大小的问题，默认消息大小约为 65536。增加消息大小并尝试加载应用程序。

# sql - Windows 服务无法访问 SQL？

> ID：12668129
> 
> 赞同：0
> 
> 时间：2012-10-01T05:53:32.133
> 
> 标签：sql, sql-server, windows, service

我创建了一个访问 SQL 数据库的 Windows 服务。连接字符串是从 app.config 文件中获取的。

以下是连接字符串的格式

> connectionString="Integrated Security=SSPI;Persist Security Info=False;server=xxxxx\SQLEXPRESS;database=Sample;uid=sa;password=xxxxx;Trusted_Connection=False"

Windows 安装程序帐户类型是 LocalSystem。此服务在某些系统上成功运行，但在某些系统上显示“SA”登录失败。

请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:06:36.130

很简单：`login failure for 'SA'`指的是登录名`sa`存在，但密码不存在。特别是，`sa`系统默认登录始终存在，但您可能在不同的服务器上设置了不同的密码。

要检查的另一件事是机器上是否有多个实例。它可能是 \SQLExpress 在一个上，但在另一个上是您要连接的默认实例。

# javascript - 在插入 DOM 的元素上调用函数

> ID：12668131
> 
> 赞同：0
> 
> 时间：2012-10-01T05:53:56.567
> 
> 标签：javascript, jquery

我无法控制何时以及如何将此元素添加到 DOM。但是当它被添加时，我想在它上面调用一个 jQuery 函数。我正在寻找匹配`form[data-validate]`元素，然后调用我编写的 jQuery 函数：`validate`

我想出了一个临时解决方案：

```
document.addEventListener('DOMNodeInserted', function(event) {
  if (event.target.nodeName === 'FORM' && $(event.target).data('validate')) {
    return $(event.target).validate();
  }
}, false); 
```

根据[https://developer.mozilla.org/en-US/docs/DOM/Mutation_events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events) ，此代码将“大大降低对该文档的进一步 DOM 修改的性能（使它们慢 1.5 - 7 倍！）”和浏览器兼容性比较差。

有人可以做得更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:58:05.613

尝试委派活动..

```
$(document).on('DOMNodeInserted' , 'form' , function(event){
    if (event.target.nodeName === 'FORM' && $(event.target).data('validate')) {
       return $(event.target).validate();
    }
     return false;
}); 
```

这将确保在创建新表单时调用该函数...

# c# - 在 teradata 中删除表

> ID：12668132
> 
> 赞同：0
> 
> 时间：2012-10-01T05:54:04.293
> 
> 标签：c#, teradata

如果表存在，我尝试使用 C# 在 Teradata 数据库中删除表。

```
cmd.CommandText = string.Format("IF EXISTS
(SELECT * FROM sysobjects WHERE type = 'U' AND name = '{0}')  
     BEGIN DROP TABLE '{0}' END", Customer.TableName);  
cmd.ExecuteNonQuery(); 
```

但以上总是失败：

> {“[Teradata Database] [3706] 语法错误：预期在请求的开头和 'IF' 关键字之间有一些内容。”}

我尝试了第二个代码，下面的代码有效！

```
cmd.CommandText = "select count (*) from Customer.TableName";
                    reader = cmd.ExecuteReader();

                    if (reader.FieldCount > 0)
                    {
                        reader.Close();
                        cmd.CommandText = "Drop table Customer.TableName";
                        reader = cmd.ExecuteReader();
                    } 
```

但是，它仅在获得表存在时才有效。如果表 Customer.TableName 不存在，则执行此操作将失败

```
"select count (*) from Customer.TableName";
                        reader = cmd.ExecuteReader(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:07:18.027

得到它的工作

```
"select count(*) from DBC.TABLES WHERE TABLENAME ='" + table.Split('.')[1] + "' and DatabaseName = '" + databasename+ "'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:03:32.297

你可以试试

```
IF EXISTS(SELECT 1 FROM dbc.tables WHERE databasename = db_name 
AND tablename = table_name) THEN DROP TABLE table_name 
```

首先在编辑器中尝试此操作，然后放入您的 .net c# 代码中。

这将确保表的存在，如果存在，它将删除它。

# android - 如何在android字典中获取保存的单词

> ID：12668133
> 
> 赞同：3
> 
> 时间：2012-10-01T05:54:20.563
> 
> 标签：android, dictionary

我正在开发一个可以向**UserDictionary**添加单词并从中查询的应用程序。在平板设备上运行应用程序时，它工作正常。但是在非平板设备上运行它并将自动更正的单词保存到我的单词列表并查询它时，它没有检索到单词。

所以我应该做些什么来查询和选择所有保存的自动更正的单词。

```
// this to add word to dictionary
    Uri dic = UserDictionary.Words.CONTENT_URI;
    UserDictionary.Words.addWord(this, "word", 100, UserDictionary.Words.LOCALE_TYPE_ALL);

// this to query 
         Uri dic = UserDictionary.Words.CONTENT_URI;
         ContentResolver resolver = getContentResolver();
         Cursor cursor = resolver.query(dic, null, null, null, null);
         while (cursor.moveToNext()){
            String word = cursor.getString(cursor.getColumnIndex(UserDictionary.Words.WORD));
            int id = cursor.getInt(cursor.getColumnIndex(UserDictionary.Words._ID));
            String app = cursor.getString(cursor.getColumnIndex(UserDictionary.Words.APP_ID));
            int frequency = cursor.getInt(cursor.getColumnIndex(UserDictionary.Words.FREQUENCY));
            String locale = cursor.getString(cursor.getColumnIndex(UserDictionary.Words.LOCALE));
            Log.i("", "word: "+word+"\nId: "+id+"\nAppID: "+app+"\nfrequency: "+frequency+"\nLocale: "+locale);
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:21:37.380

要添加单词，[Javadoc](http://developer.android.com/reference/android/provider/UserDictionary.Words.html)建议使用 UserDicrionary.Words.addWord。

要使用拼写检查器，Android 4.0 以上有一个[框架](http://developer.android.com/guide/topics/text/spell-checker-framework.html#SpellCheckClient)，以及一些使用示例。希望这些帮助。

# iphone - 手势识别器在 UIScrollView 子类中不起作用

> ID：12668135
> 
> 赞同：1
> 
> 时间：2012-10-01T05:54:26.673
> 
> 标签：iphone, ios, xcode, ios5, uiscrollview

我有子类`UIScrollView`，并且`UIScrollView`我的笔尖中有一个，手势工作正常，但是当我将`UIScrollView`Identity Inspector 中的类更改为我的子类时`UIScrollView`，手势停止工作，并且我的界面生成器中有这个警告。

```
ScrollView does not have an outlet collection named gestureRecognizors. 
```

我的子类中还有一个代表，它也发出警告：

这是子类：

```
@protocol ScrollViewDelegate <NSObject>

-(void)onScrollViewTouch;

@end

@interface ScrollView : UIScrollView <UIScrollViewDelegate>

@property(nonatomic, retain) id<ScrollViewDelegate> subDelegate;

@end 
```

这是 ScrollView.m

```
@implementation ScrollView

@synthesize subDelegate;

- (id)initWithFrame:(CGRect)frame {
self = [super initWithFrame:frame];
if (self) {
    self.canCancelContentTouches = NO;
    self.delaysContentTouches = NO;
    [self setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
    [super setDelegate: self];
}
return self;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
[super touchesBegan:touches withEvent:event];
[delegate onScrollViewTouch];
}

@end 
```

谁能建议我在这里做错了什么？感谢大家 ：）

# php - 在php中添加删除按钮

> ID：12668141
> 
> 赞同：3
> 
> 时间：2012-10-01T05:55:09.027
> 
> 标签：php, mysql

我已经在我的数据库中创建了一个项目表，它非常完美，但是我现在想在我输出的数据的另一列中添加一个删除按钮。

但是我只是不知道该怎么做，我确实为每个表都有一个唯一的ID，所以我可以使用它作为ID，或者你会怎么称呼它的按钮？

```
<?php

//Start session
    //... all the connection stuff here

$result = mysql_query("SELECT * FROM feathermattresstoppers");

echo "<table border='1'>
<tr>
<th>name</th>
<th>old price</th>
<th>price</th>
<th>delete</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['name'] . "</td>";
  echo "<td>" . $row['old_price'] . "</td>";
  echo "<td>" . $row['price'] . "</td>";
echo "<td>"<!-- how could I add a button here? -->"</td>";
  echo "</tr>";
  }
echo "</table>";

?> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T05:59:55.617

在你的桌子之前：

```
<form action="" method="post"> 
```

并关闭表格后的表单标签。

将此代码作为删除按钮：

```
echo '<td><button type="submit" name="deleteItem" value="'.$row['id'].'" />Delete</button></td>"'; 
```

在 PHP 中，您应该执行以下操作

```
<?php

if(isset($_POST['deleteItem']) and is_numeric($_POST['deleteItem']))
{
  // here comes your delete query: use $_POST['deleteItem'] as your id
  // $delete = $_POST['deleteItem']
  // $sql = "DELETE FROM `tablename` where `id` = '$delete'"; 
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:00:43.100

是的，但是您需要将此表放入表格中。您可以创建一个按钮，单击该按钮将提交表格行的表单（复选框），您的复选框 id 将是数据库行中的唯一 id，然后您可以简单地删除具有提交 ID 的行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T06:01:43.663

两种方法：

1.）您为表格中的每一行编写一个小的 html 表单。该表单在按钮旁边的隐藏输入文件中包含行 ID。在您的处理 php 代码中，您将获得已按下删除按钮的信息以及要删除的行的 ID。

2.）您使用javascript以动态方式对其进行编码。然后，您只需在表格的所有行中编写相同的删除按钮即可。此外，您将一个简短的 javascript 函数绑定到所有这些按钮的“单击”事件。如果单击一个，则调用您的函数，它可以通过查找按钮父元素并读取其 ID 来识别单击的按钮所属的行。然后你发回那个ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:58:53.600

最简单的方法是将每个 tr 包含在一个表单中，并将唯一键添加为隐藏字段。

```
while($row = mysql_fetch_array($result))
{
echo '<form action="here_maybe" method="POST" >'
echo '<input name="row_id" type="hidden" value="'.$row['id'].'"/>'
echo "<tr>";
echo "<td>" . $row['name'] . "</td>";
echo "<td>" . $row['old_price'] . "</td>";
echo "<td>" . $row['price'] . "</td>";
echo "<td><input type="submit" value="Delete" name="delete_command"/></td>";
echo "</tr>";
echo "</form>"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T06:02:12.227

试试这个代码，

```
<?php
//codes 
echo "<td><form name='frmDelete' action='your delete page here' method='post'><input type='hidden' name='itemid' value='{echo ID here}'><input type='submit' name='dlteBtn' value='delete'></form></td>";
//codes
?> 
```

在删除页面

```
<?php
if(isset($_POST['dlteBtn'])){
 $id=$_POST['itemid'];
 //delete query for row with id,  $id
 }
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T06:11:39.540

```
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['name'] . "</td>";
  echo "<td>" . $row['old_price'] . "</td>";
  echo "<td>" . $row['price'] . "</td>";
echo "<td>"<a href="delete.php?<?php echo $row['id'];  ?>">delete</a></td>";

  echo "</tr>";
  }
echo "</table>";

?> 
```

在你的 delete.php 中

```
if(isset($_REQUEST['id']) && is_numeric($_REQUEST['id']))
{
 //query for delete.
} 
```

//w3c 说除了从数据库中检索之外，您不应该将 get 方法用于任何操作，因此更好的方法是使用 post 。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-12-22T07:52:34.813

```
 echo '<td><a href="yourpagename.php?delete=1&id='.$row["stud_no"].'"><button type="submit" style="font-weight:bold;" name="delete" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span> Delete</button></a></td>'; 
```

您可以将按钮放在标签内。并覆盖它将标记和href属性，您可以将您的页面名称放在其中显示url的位置。就像使用 delete=1 一样，这样您就可以设置此按钮并将 &id 显示并在其中存储 id。因此，在同一页面或下一页中，您可以使用 get 或 post 方法获取该 ID。例如，我使用了 id=$row['stud_no'] 这将显示您单击的 id 并且 id 将显示在 url 中，然后在该页面或下一页中，您可以使用 $id = $_POST['id ']; 通过这样做，您可以在 $id 中获取您的 stud_no。要查看您是否获得了正确的 id ，您可以回显 $id 并查看它。

# xamarin.ios - 使用 MonoTouch 部署 IOS6 应用程序时出错

> ID：12668144
> 
> 赞同：4
> 
> 时间：2012-10-01T05:55:31.297
> 
> 标签：xamarin.ios, ios6, xcode4.5

我正在尝试让 iOS6 在我的笔记本电脑上运行。

我正在运行 xcode 4.5 和最新的 MonoTouch。每当我尝试部署到我的手机时，我都会收到错误消息

```
Installing application    
Installation failed: Executable Twiddle Failed Error (error: 0xe8000046)
error MT1006: Could not install the application '/Users/Me/Projects/MasterDetail/MasterDetail/bin/iPhone/Debug/MasterDetail.app' on the device: 
    Executable Twiddle Failed Error (error: 0xe8000046).
The application was terminated by a signal: SIGHUP 
```

该应用程序没有自定义代码。它提供的主详细信息模板。

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:36:20.907

尝试从您的设备（使用设备）中删除**MasterDetail.app**应用程序，然后重新安装它（从 MonoDevelop）。

您是否使用 iOS6 的 beta 版本（之前/最初）部署了应用程序？我已经看过一两次了，我*认为*它与此有关（但我不完全确定并且不能再重复这个问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:25:58.713

Mono 和 XCode 协同工作的方式并不完美。MonoDevelop 将创建 XCode 用于 UI 等的项目副本，并且调试器似乎也使用 XCode 系统。

我遇到了这个问题，并通过关闭 MonoDevelop 并将 .obj 和 .bin 目录拖到垃圾箱并在完全重建项目之前清空垃圾箱来解决这个问题。

这似乎也纠正了其他错误，例如当 MonoDevelop 调用 XCode 拒绝编辑 XIB 时。

# mysql - magento - 使用 php 脚本将 csv 导入数据库

> ID：12668152
> 
> 赞同：0
> 
> 时间：2012-10-01T05:56:13.580
> 
> 标签：mysql, magento

我是 magento 的新手。我想知道如何将一个巨大的 csv 文件导入到 magento db。我已经使用配置文件导出了 csv 文件，并使用适当的值更新了 csv。使用 php 脚本我需要导入回 magento。

我想使用 php 脚本的原因是我可以把它作为一个 cron 让它自动执行。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:00:40.377

我们从 xtento 购买了一个导入/导出扩展。它工作得很好。如果他们没有可以进口您需要的东西，我相信他们可以手动滚动一些东西。

和我平时的：

> 我的理念是在尝试用 magento 编写任何东西之前开始研究扩展。当升级破坏某些东西时特别有用；他们通常会免费修复明显影响他们自己的扩展的升级问题。

请投入大量精力来使用尽可能少的代码来满足您的需求。:)

# c# - 将复杂对象中的所有 DateTime 字段从本地时区转换为 UTC

> ID：12668163
> 
> 赞同：1
> 
> 时间：2012-10-01T05:58:14.587
> 
> 标签：c#, datetime, utc

我有一个客户对象，其中包含有关客户出生日期、加入日期等的所有详细信息。

我想将所有日期字段转换为通用日期时间并存储在数据库中。

谁能帮助我如何从客户对象中获取所有日期字段并将其转换为通用日期时间？

我想要一个解决方案，当我调用 Customer.ChangeToUTC() 时，客户中存在的所有日期时间字段都应该更改为通用时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-16T09:12:59.153

我遇到了同样的问题。在我的情况下，解决方案是必要的，因为我们有太多不同的复杂模型和`DateTime`字段。为了我的需要，我写了下一个扩展：

```
public static class ObjectExtensions
{
    /// <summary>
    /// Convert all DateTime fields in a complex object from UTC to a destination time zone.
    /// </summary>
    /// <typeparam name="TInput">Type of an object that will be converted.</typeparam>
    /// <param name="obj">Object that will be deeply converted.</param>
    /// <param name="destTimeZone"><c>TimeZoneInfo</c> object of a destination time zone.</param>
    public static void DeepConvertFromUtc<TInput>(this TInput obj, TimeZoneInfo destTimeZone)
        where TInput : class
    {
        obj.DeepConvert(TimeZoneInfo.Utc, destTimeZone);
    }

    /// <summary>
    /// Convert all DateTime fields in a complex object from source time zone to UTC.
    /// </summary>
    /// <typeparam name="TInput">Type of an object that will be converted.</typeparam>
    /// <param name="obj">Object that will be deeply converted.</param>
    /// <param name="sourceTimeZone"><c>TimeZoneInfo</c> object of a source time zone.</param>
    public static void DeepConvertToUtc<TInput>(this TInput obj, TimeZoneInfo sourceTimeZone)
        where TInput : class
    {
        obj.DeepConvert(sourceTimeZone, TimeZoneInfo.Utc);
    }

    /// <summary>
    /// Convert all DateTime fields in a complex object from UTC to a destination time zone.
    /// </summary>
    /// <typeparam name="TInput">Type of an object that will be converted.</typeparam>
    /// <param name="obj">Object that will be deeply converted.</param>
    /// <param name="sourceTimeZone"><c>TimeZoneInfo</c> object of a source time zone.</param>
    /// <param name="destTimeZone"><c>TimeZoneInfo</c> object of a destination time zone.</param>
    public static void DeepConvertTime<TInput>(this TInput obj, TimeZoneInfo sourceTimeZone, TimeZoneInfo destTimeZone)
        where TInput : class
    {
        obj.DeepConvert(sourceTimeZone, destTimeZone);
    }

    private static void DeepConvert<TInput>(this TInput obj, TimeZoneInfo sourceTimeZone, TimeZoneInfo destTimeZone)
        where TInput : class
    {
        if (obj == null)
        {
            return;
        }

        var items = obj as ICollection;
        if (items != null)
        {
            foreach (var item in items)
            {
                item.DeepConvert(sourceTimeZone, destTimeZone);
            }

            return;
        }

        var props = obj.GetType().GetProperties();
        foreach (var prop in props.Where(prop => !IsIgnore(prop)))
        {
            if (prop.PropertyType == typeof(DateTime) || prop.PropertyType == typeof(DateTime?))
            {
                prop.ConvertDateTime(obj, sourceTimeZone, destTimeZone);
                continue;
            }

            var value = prop.GetValue(obj);
            var list = value as ICollection;
            if (list != null)
            {
                foreach (var item in list)
                {
                    item.DeepConvert(sourceTimeZone, destTimeZone);
                }

                continue;
            }

            // here I check that an object is located in one of my assemblies
            if (prop.PropertyType.Assembly.FullName.StartsWith("Should be your namespace"))
            {
                value.DeepConvert(sourceTimeZone, destTimeZone);
            }
        }
    }

    private static void ConvertDateTime<TInput>(this PropertyInfo prop, TInput obj, TimeZoneInfo sourceTimeZone, TimeZoneInfo destTimeZone)
        where TInput : class
    {
        var value = prop.GetValue(obj);
        if (value != null)
        {
            var dateTime = DateTime.SpecifyKind((DateTime)value, DateTimeKind.Unspecified);
            value = TimeZoneInfo.ConvertTime(dateTime, sourceTimeZone, destTimeZone);

            var setMethod = prop.SetMethod;
            if (setMethod != null)
            {
                setMethod.Invoke(obj, new[] { value });
            }
        }
    }

    private static bool IsIgnore(this PropertyInfo prop)
    {
        var attr = prop.GetCustomAttribute<IgnoreUtcConversionAttribute>();
        return attr != null;
    }
}

public class IgnoreUtcConversionAttribute : Attribute
{
} 
```

你可以很简单地使用它：

```
yourComplexObject.DeepConvertToUtc(TimeZoneInfo.Local);

// a collection could be converted as well
collection.DeepConvertToUtc(TimeZoneInfo.Local); 
```

您也可以从方法中获取`TimeZineInfo`对象：`FindSystemTimeZoneById`

```
var timeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById("Belarus Standard Time");
yourComplexObject.DeepConvertToUtc(timeZoneInfo); 
```

如果您的模型中有两种方式的引用，则必须用以下方式装饰一个引用`[IgnoreUtcConversion]`：

```
public class Customer
{
    public string FirstName { get; set; }

    public string LastName { get; set; }

    public DateTime Birth { get; set; }

    public Address Address { get; set; }
}

public class Address
{
    public string Street { get; set; }

    public DateTime LastUpdated { get; set; }

    [IgnoreUtcConversion]
    public Customer Customer { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:02:27.507

这是一件简单的事情：

```
TimeZone ltz = TimeZone.CurrentTimeZone;

DateTime t1 = DateTime.Now;

DateTime t2 = ltz.ToUniversalTime(t1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T06:03:01.450

> 任何人都可以帮助我如何从客户对象中获取所有日期字段并将其转换为通用日期时间

只需手动执行即可。但是，我*不会*通过重用原始`Customer`类型中的属性来做到这一点。我要么*在*您创建对象之前（当您第一次获取数据时）执行此操作，要么将其作为轻量级 DTO 的一部分执行，仅用于数据库传输。

*当您知道*如何解释任何特定属性时，对日期/时间属性的推理就足够困难了——如果您不知道某个属性是通用的、本地的还是未指定的，那将变得更加困难。

*日期*之类的事情甚至没有多大意义来考虑是否普遍。为了将它们存储在数据库中，您可能希望明确地使用它们来创建它们`DateTimeKind.Utc`，但从根本上说，日期就是日期。.NET 框架的问题之一是它没有单独的日期数据类型。

我有一个名为[Noda Time](http://noda-time.googlecode.com)的项目，它是 .NET 的替代日期/时间 API。当然，一种选择是使用它，但假设您想坚持使用 BCL 类型，我仍然认为值得阅读我们的[概念](http://noda-time.googlecode.com/hg/docs/userguide/concepts.html)和[类型选择](http://noda-time.googlecode.com/hg/docs/userguide/type-choices.html)文档，以帮助您以正确的方式思考日期和时间。最好弄清楚模型中的每个属性*将*使用哪种类型，然后记录下来。您将希望在代码中以不同方式处理它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:00:26.860

如果您熟悉日期时间，这很简单；

```
customer.BirthDate = customer.BirthDate.ToUniversalTime(); 
```

只需对您的所有日期字段执行上述操作，并在您的客户 ID 号上使用 where 子句运行更新查询。

# qt4 - 用 Qt4 渲染 ANSI 颜色？

> ID：12668168
> 
> 赞同：1
> 
> 时间：2012-10-01T05:58:57.843
> 
> 标签：qt4, pyqt4, ansi

我想在 QLabel 或 QTextEdit 或其他任何可以做的事情中使用 Qt4 渲染 ANSI 颜色。

现在，`QLabel(""\033[94m HELLO \033[0m"")`按原样呈现字符串。

如何渲染 ANSI 颜色或 Qt4 中有什么好的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:02:24.053

您需要解析字符串。QLabel 要么显示纯文本，要么显示 html。这意味着您很可能需要将其转换为 html 跨度。

# azure - Azure 表存储：无法使用 CloudTableClient 实例创建表

> ID：12668170
> 
> 赞同：2
> 
> 时间：2012-10-01T05:59:27.857
> 
> 标签：azure, azure-storage, azure-java-sdk

我在这里关注 Azure 关于 Java API 的基本教程：[https ://www.windowsazure.com/en-us/develop/java/how-to-guides/table-service/#CreateTable](https://www.windowsazure.com/en-us/develop/java/how-to-guides/table-service/#CreateTable)

但是遇到以下错误：

> 找不到标志
> 
> 符号：方法 createTableIfNotExists(java.lang.String)
> 
> 位置：com.microsoft.windowsazure.services.table.client.CloudTableClient 类

整个小程序（从Azure教程复制）：

```
import com.microsoft.windowsazure.services.core.storage.*;
import com.microsoft.windowsazure.services.table.client.*;
import com.microsoft.windowsazure.services.table.client.TableQuery.*;

public class AzureTableWrite {
  public static void main(String[] args) {
    // Define the connection-string with your values
    final String storageConnectionString =
        "DefaultEndpointsProtocol=http;" +
        "AccountName=skivvy;" +
        "AccountKey=foobar";

    // Retrieve storage account from connection-string
    CloudStorageAccount storageAccount =
        CloudStorageAccount.parse(storageConnectionString);

    // Create the table client.
    CloudTableClient tableClient = storageAccount.createCloudTableClient();

    // Create the table if it doesn't exist.
    String tableName = "people";
    tableClient.createTableIfNotExists(tableName);
  }
} 
```

有没有人遇到过同样的问题？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:13:40.707

正如我在 MSDN 论坛 ( [http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/78c12f97-4209-41a1-86d6-267f5e9f51f6](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/78c12f97-4209-41a1-86d6-267f5e9f51f6) ) 上的回复中提到的，这个例子似乎有问题你正在使用。

请改用这个：

```
 CloudTableClient tableClient = storageAccount.createCloudTableClient();
    CloudTable table = tableClient.getTableReference("people");
    table.createIfNotExists(); 
```

希望这可以帮助。

# sql-server-2005 - 如何从日期中删除时间戳而不将其转换为 sql server 中的 varchar？

> ID：12668181
> 
> 赞同：0
> 
> 时间：2012-10-01T06:00:18.793
> 
> 标签：sql-server-2005

我正在使用 DATEDIFF() 将“日期”与当前日期（GETDATE()）进行比较。

我面临的问题是“日期”采用 dd/MM/yyyy 格式，并且我使用 GETDATE() 获得的日期也包括时间戳。

请指导我如何从 GETDATE() 中删除时间戳，并且还想比较这两个日期。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T06:04:35.803

> 请指导我如何从 GETDATE() 中删除时间戳，

的[文档`GETDATE`](http://msdn.microsoft.com/en-us/library/ms188383%28v=sql.90%29.aspx)在页面底部有这个贡献：

```
CAST(DATEDIFF(Day, 0, GETDATE()) AS DATETIME) 
```

# ios - 使用 MPMoviePlayerController 将 mp4 视频用作背景

> ID：12668184
> 
> 赞同：1
> 
> 时间：2012-10-01T06:00:28.220
> 
> 标签：ios, xcode, cocos2d-iphone, mp4, movie

我`MPMoviePlayerController`用来显示视频。它正在工作，但我有几个问题。我想要做的是让视频的某些部分可点击并播放其他视频（想想旧的点击游戏）。

**问题 1：** 如果我双击它改变比例的视频，我该如何禁用它？我用了

```
[[[CCDirector sharedDirector] view] setUserInteractionEnabled:false]; // I'm using cocos2D 
```

和

```
[moviePlayerController.view setUserInteractionEnabled:false];
[moviePlayerController setControlStyle:MPMovieControlStyleNone]; 
```

但我仍然可以双击更改比例。

**问题2：**我想获取水龙头位置。除了考虑使用之外，我还没有做任何事情`GestureRecognizer`，这是正确的方法吗？

谢谢 ：-）

# java - 在不使用 Collection 作为返回类型的情况下从 java 函数中重新调整多个值？

> ID：12668186
> 
> 赞同：1
> 
> 时间：2012-10-01T06:00:44.113
> 
> 标签：java, function

我有这样的方法：

```
public boolean isDocumentsDeletedFormDB(String strDocumentsID) {
} 
```

在这种方法中，我也想返回一个`Integer`值。由于已经有一个返回类型 as `Boolean`，我怎样才能返回`Integer`值呢。

将Wrapper`Integer`作为协议传递也不能解决我的问题。

`Collection`任何人都可以在不使用返回类型的情况下提出解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T06:06:35.177

首先我必须说你的方法有问题；**一个方法必须只做一件事**，而您的方法必须做两件事（计算您需要返回的两个值）。正确的解决方案是创建另一个方法，该方法的目的是返回其中一个值，而另一个由原始方法返回。

无论如何，如果你真的需要这样做，你有一些选择：

1.  创建一个包含两个值作为私有字段的包装类，并从您的方法返回这个新类的值。
2.  将返回的对象之一提取为字段变量，该变量将由其他需要的方法读取（如果仅私有方法需要它）。
3.  如果这些返回类型之一是错误状态，请使用异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:05:33.570

返回多个元素的标准方法是返回封装这些元素的对象。

例如：

```
public static class DeletedFromDBReturn {
  public final int integerValue;
  public final bool booleanValue;

  private DeletedFromDBReturn(int i, bool b) {
    integerValue = i; booleanValue = b;
  }
}

DeletedFromDBReturn sDocumentsDeletedFormDB(String strDocumentsID) {
  // ...
  return new DeletedFromDBReturn(intVal, boolVal);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:07:20.197

您可以做的是将返回类型更改为`int`. 其他`-1`情况下返回`false``Valid integer.`

从方法名称我可以猜到您使用`boolean`返回类型来检查文档是否被删除。而`Integer`你想要的回报将会`number of documents deleted`。

```
 public int isDocumentsDeletedFormDB(String strDocumentsID) {} 
```

因此您可以签入使用此功能的功能

```
 if(isDocumentsDeletedFormDB(str)==-1)
    //Do that you do when it is false. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:10:25.127

您可能想要使用一个简单的字符串，它可以返回这两种类型，但以字符串形式。在您的调用代码中，只需检查它是否为（“true”或“false”）并相应地解析它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T06:03:17.053

您**不能**从 Java 中的函数返回多个值。您必须使用集合或类或结构来包含这 2 个值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T06:03:22.197

您必须定义一个具有`Boolean`and`Integer`字段的对象并返回该对象，否则，如果您可以使用外部库，您可以查看[`Pair<L,R>`](http://commons.apache.org/lang/api/org/apache/commons/lang3/tuple/package-summary.html)Apache Commons 提供的类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T06:04:22.480

创建一个*普通的旧 Java 对象*(POJO) 类并返回它的一个实例。你的 POJO 类可以是这样的：

```
public class MyPOJO{
    private boolean booleanValue;
    private Integer integerValue;

    public void setBooleanValue(boolean booleanValue){
        this.booleanValue = booleanValue
    }

    public void setIntegerValue(Integer integerValue){
        this.integerValue = integerValue
    }

    public boolean getBooleanValue(){
        return this.booleanValue;
    }

    public Integer getIntegerValue(){
        return this.integerValue;
    }
} 
```

您需要更改方法签名并执行以下操作：

```
public MyPOJO isDocumentsDeletedFormDB(String strDocumentsID){
    /*
    * Your logic
    */

    MyPOJO pojo = new MyPOJO();
    pojo.setIntegerValue(/* Your integer value */);
    pojo.setBooleanValue(/* Your boolean value */);

    return pojo;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-01T06:05:10.513

您可以编写一个通用的 Pair<First,Second> 类并返回一个 Pair<Boolean,Integer>。但是恕我直言，您也应该考虑更改方法名称，因为每个人都希望名为 isSomething() 的方法只返回布尔值。

# apache - Solr 和 Apache Web 服务器日志

> ID：12668191
> 
> 赞同：1
> 
> 时间：2012-10-01T06:01:33.523
> 
> 标签：apache, solr, webserver

我一直在尝试使用 Solr 以 txt 文件格式索引 Apache Web 服务器日志。

我在发布文件时遇到了困难。我是 Solr 的新手。我需要一条路可走。有些人建议使用 Python 代码或 Java 代码。但是我不知道在编写代码时要遵循什么。我被这个问题困住了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:20:22.000

您需要采取的简单步骤如下：

*   下载[Solr](http://lucene.apache.org/solr/)并运行它。
*   编辑[schema.xml](http://wiki.apache.org/solr/SchemaXml)文件并添加要为其存储索引的字段。
*   通过使用库（[Solrj](http://wiki.apache.org/solr/Solrj)、Python 等），读取日志文件和索引数据。

# c# - 组合框中的水印绑定

> ID：12668198
> 
> 赞同：0
> 
> 时间：2012-10-01T06:02:22.960
> 
> 标签：c#, .net, wpf, xaml

如何在数据源列表之前或文本框为空时添加水印。

例如我有这样的事情：

选择产品... 冰淇淋汁鼠标

这是我的xml

```
 <ComboBox Name="cbProduct" Height="40" Width="200" IsEditable="True"  
                                  ItemsSource="{Binding Source={StaticResource ProductsSource}}" 
  /> 
```

# web-services - 如何在 umbraco 中调用 Web 服务

> ID：12668200
> 
> 赞同：3
> 
> 时间：2012-10-01T06:02:25.927
> 
> 标签：web-services, umbraco, umbraco5

我有一个这样的 URL 我需要从 umbraco CMS 调用这个 URL，因为 URL 是我的网络服务

```
eg
http://www.mydomain.com/webservices/MyWebservice.asmx/MyFunction 
```

但是这个网络服务只能在执行一些语句后通过.net用户控件调用任何人都可以分享你的想法或与我链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:11:40.010

以下是步骤......

1）创建一个Visual Studio项目说ServiceClient。

2) 在用户控制下创建 ServiceAgnet.ascx。

3) 添加对[http://www.mydomain.com/webservices/MyWebservice.asmx/MyFunction的服务引用](http://www.mydomain.com/webservices/MyWebservice.asmx/MyFunction)

4）使用ServiceAgnet.ascx中的服务

5) 发布代码。

6) 将ASCX 放在umbraco 用户控制目录中。

7) 将 DLL 放在 Umbraco 安装的 Bin 文件夹中。

7) 使用上面的用户控件创建一个宏。

8）将宏放在页面上，您可以看到正在使用的网络服务。

9) 最重要的将服务引用部分放在 web.config 中，从 Visual Studio 项目到 Umbraco web.config，除非它失败。

以上希望有所帮助。

# c# - 从 Azure 上的存储加载 DLL

> ID：12668208
> 
> 赞同：1
> 
> 时间：2012-10-01T06:03:21.633
> 
> 标签：c#, asp.net, azure

我目前有 3 个项目都以相同的角色上传到 Azure。这些项目中的每一个都包含 6MB 的 AjaxControlToolkit.dll。

因此，我每次上传，意味着上传这个 dll 会立即占用 18Mb，而我在大约 1 年内没有更改过。

无论如何，DLL 是否可以从存储位置检索并在 Azure 结束时添加到项目中？或者接受任何其他建议以减少这些 DLL 的上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:38:39.340

是的，您确实可以从存储中下载 .dll - 在 Visual Studio 解决方案资源管理器树中，将“复制本地”设置为“False”以从服务包中排除 .dll。然后在启动任务或 OnStart() 内部下载文件并将其放入`bin`.

# sql - 在sql中限制表中记录数的最佳方法

> ID：12668215
> 
> 赞同：0
> 
> 时间：2012-10-01T06:03:57.507
> 
> 标签：sql, sqlite

我有一张`users`桌子。用户数应该限制在100。也就是说，一旦用户数达到100，我就不能再添加任何用户了。

我首先想到的是首先查询`select * from users`. 如果返回的行数 < 100，我仍然可以添加更多用户。否则，我再也不能了。

这将需要 2 个查询来满足我的需求。知道如何仅在 1 个查询中使用它吗？我遇到过使用该`trigger`语句，但我想知道这是否是个好主意。请添加代码片段作为示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:12:17.433

正如评论所说，**通过前端处理此问题的最佳方法..**

这是**另一种选择**..

如果表中有标识列，则可以为此表添加约束。

```
ALTER TABLE <your_table>
ADD CONSTRAINT chk_users
CHECK( <identity_column> < 100) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:14:20.553

这实际上不是使用 RDBMS 的正常方式，所以这就是为什么没有简单的方法来做到这一点。

~~可能我会这样做的方式是编写一个存储过程并调用它而不是插入。存储过程本质上将封装您的两个查询解决方案，但在数据库层。~~ （编辑 - sqlite 中没有存储过程）

但是，重要的是要考虑**为什么**需要限制用户数量。如果是一次只能有 100 个活跃用户的情况，那么我会强烈考虑改为存储所有用户，但还要存储一个指示他们是否活跃的状态。这使您有机会将不活跃的用户转移到活跃的用户，反之亦然……这只是一种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:08:50.290

我认为让数据库确保数据是干净的总是一个好主意，如果它可以这样做的话。

一种双层方法，您可以触发以确保数据良好并检查应用程序也可能很好。

# java - Java - 如何在视图中显示后清除消息

> ID：12668216
> 
> 赞同：2
> 
> 时间：2012-10-01T06:03:58.440
> 
> 标签：java

我想使用在我的视图`home.jsp`中显示错误消息`<c:out value="${message}" />`。但是在显示它之后，我想清除它。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:07:25.193

使用`Ajax`OR 普通`Javascript`。

另一种方法是刷新整个页面；但不推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:07:50.950

假设您想自动清除它，您可以在给定的时间段后使用诸如 JQuery 之类的东西[`.delay`](http://api.jquery.com/delay/)来执行操作，这可能是将用户重定向到另一个页面，或者只是隐藏`div`用于呈现错误的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:08:19.730

使用javascript方法`setTimeout()` [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:06:11.107

添加`RedirectAttributes redirectAttributes`到您的`@RequestMapping`函数参数并使用以下方法设置属性：

```
redirectAttributes.addFlashAttribute("message", "whatever went wrong") ;
return "redirect:/path_to_your_view" ; 
```

请记住：这与 Spring 的`redirect:`功能密切相关。

# javascript - fusion-tables，从表中获取最新数据并将其插入地图代码所需的帮助

> ID：12668225
> 
> 赞同：1
> 
> 时间：2012-10-01T06:04:57.907
> 
> 标签：javascript, html, google-maps, google-fusion-tables

大家好，试图找到代码以从谷歌融合表中提取最新坐标并将其作为原点插入到下面的代码中。(var origin1)

GOOGLE Fusion 表设置；

```
 {
     "kind": "fusiontables#columnList",
     "totalItems": 15,
     "items": [
      {
       "kind": "fusiontables#column",
       "columnId": 0,
       "name": "description",
       "type": "STRING"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 1,
       "name": "kind",
       "type": "STRING"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 2,
       "name": "name",
       "type": "STRING"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 3,
       "name": "placeId",
       "type": "STRING"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 4,
       "name": "info1",
       "type": "STRING"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 5,
       "name": "info2",
       "type": "STRING"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 6,
       "name": "info3",
       "type": "STRING"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 7,
       "name": "info4",
       "type": "STRING"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 8,
       "name": "accuracy",
       "type": "NUMBER"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 9,
       "name": "speed",
       "type": "NUMBER"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 10,
       "name": "heading",
       "type": "NUMBER"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 11,
       "name": "altitude",
       "type": "NUMBER"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 12,
       "name": "altitudeAccuracy",
       "type": "NUMBER"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 13,
       "name": "timestamp",
       "type": "NUMBER"
      },
      {
       "kind": "fusiontables#column",
       "columnId": 14,
       "name": "geometry",
       "type": "LOCATION"
      }
     ]
    } 
```

这是它保留的一些数据，我正在尝试获取“最新”几何坐标并添加我的地图，以提供实时更新。

```
{
 "kind": "fusiontables#sqlresponse",
 "columns": [
  "description",
  "kind",
  "name",
  "placeId",
  "info1",
  "info2",
  "info3",
  "info4",
  "accuracy",
  "speed",
  "heading",
  "altitude",
  "altitudeAccuracy",
  "timestamp",
  "geometry"
 ],
 "rows": [
  [
   "",
   "",
   "Location at Mon 14/05/2012 13:42:58",
   "",
   "resourceasstring",
   "",
   "",
   "",
   "65",
   NaN,
   NaN,
   NaN,
   NaN,
   1.336966978085E12,
   {
    "geometry": {
     "type": "Point",
     "coordinates": [
      144.9339931215855,
      -37.83169408321385,
      0.0
     ]
    }
   }
  ],
  [
   "",
   "",
   "Location at Mon 14/05/2012 19:20:11",
   "",
   "resourceasstring",
   "",
   "",
   "",
   "1414",
   NaN,
   NaN,
   NaN,
   NaN,
   1.336987211753E12,
   {
    "geometry": {
     "type": "Point",
     "coordinates": [
      145.2516605102396,
      -37.92732182161065,
      0.0
     ]
    }
   }
  ],
  [
   "",
   "",
   "Location at Mon 14/05/2012 19:40:12",
   "",
   "resourceasstring",
   "",
   "",
   "",
   "1414",
   NaN,
   NaN,
   NaN,
   NaN,
   1.336988412041E12,
   {
    "geometry": {
     "type": "Point",
     "coordinates": [
      145.3447657261889,
      -37.91152087158031,
      0.0
     ]
    }
   }
  ],
  [
   "",
   "",
   "Location at Tue 15/05/2012 09:41:57",
   "",
   "resourceasstring",
   "",
   "",
   "",
   "65",
   NaN,
   NaN,
   NaN,
   NaN,
   1.337038917553E12,
   {
    "geometry": {
     "type": "Point",
     "coordinates": [
      144.9339498133275,
      -37.8317148043096,
      0.0
     ]
    }
   }
  ], 
```

这是显示地图的 html/java 代码；

```
 <!DOCTYPE html>
    <html>
      <head>
        <title>Google Maps API v3 Example: Distance Matrix</title>
        <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

        <style>
          body {
            margin: 20px;
            font-family: courier, sans-serif;
            font-size: 12px;
          }
          #map {
            height: 480px;
            width: 640px;
            border: solid thin #333;
            margin-top: 20px;
          }
        </style>

        <script>
        //Taken and adopted from https://developers.google.com/maps/documentation/javascript/distancematrix
        //Need to make the fusion table part work next!!
          var map;
          var geocoder;
          var bounds = new google.maps.LatLngBounds();
          var markersArray = [];

//var origin1 is where i want it to pull the data from the fusion table.
          var origin1 = new google.maps.LatLng(-37.83169408321385,144.9339931215855);
          var destinationA = 'glen iris, Australia';

          var destinationIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=D|FF0000|000000';
          var originIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=O|FFFF00|000000';

          function initialize() {
            var opts = {
              center: new google.maps.LatLng(-37.83,144.93),
              zoom: 20,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById('map'), opts);
            geocoder = new google.maps.Geocoder();
          }

          function calculateDistances() {
            var service = new google.maps.DistanceMatrixService();
            service.getDistanceMatrix(
              {
                origins: [origin1],
                destinations: [destinationA],
                travelMode: google.maps.TravelMode.DRIVING,
                unitSystem: google.maps.UnitSystem.METRIC,
                avoidHighways: false,
                avoidTolls: false
              }, callback);
          }

          function callback(response, status) {
            if (status != google.maps.DistanceMatrixStatus.OK) {
              alert('Error was: ' + status);
            } else {
              var origins = response.originAddresses;
              var destinations = response.destinationAddresses;
              var outputDiv = document.getElementById('outputDiv');
              outputDiv.innerHTML = '';
              deleteOverlays();

              for (var i = 0; i < origins.length; i++) {
                var results = response.rows[i].elements;
                addMarker(origins[i], false);
                for (var j = 0; j < results.length; j++) {
                  addMarker(destinations[j], true);
                  outputDiv.innerHTML += origins[i] + ' to ' + destinations[j]
                      + ': ' + results[j].distance.text + ' in '
                      + results[j].duration.text + '<br>';
                }
              }
            }
          }

          function addMarker(location, isDestination) {
            var icon;
            if (isDestination) {
              icon = destinationIcon;
            } else {
              icon = originIcon;
            }
            geocoder.geocode({'address': location}, function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                bounds.extend(results[0].geometry.location);
                map.fitBounds(bounds);
                var marker = new google.maps.Marker({
                  map: map,
                  position: results[0].geometry.location,
                  icon: icon
                });
                markersArray.push(marker);
              } else {
                alert('Geocode was not successful for the following reason: '
                  + status);
              }
            });
          }

          function deleteOverlays() {
            if (markersArray) {
              for (i in markersArray) {
                markersArray[i].setMap(null);
              }
              markersArray.length = 0;
            }
          }

        </script>
      </head>
      <META HTTP-EQUIV="refresh" CONTENT="60">
      <body onload="initialize(), calculateDistances()">
        <div id="inputs">
          <pre class="prettyprint">
    This will automatically calculate distances on load and then will re-load every minute. hahaha...
    Really need to work out how to pull data from a fusion table as well.
          </pre>
          <p><button type="button" onclick="calculateDistances();">Force Re-Calculate
            distances</button></p>
        </div>
            <div id="outputDiv"></div>
        <div id="map"></div>
      </body>
    </html> 
```

谢谢马特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:16:33.757

概念证明：

[http://www.geocodezip.com/v3_GoogleEx_FusionTables_latestData.html](http://www.geocodezip.com/v3_GoogleEx_FusionTables_latestData.html)

使用 FusionTables API v1.0 查询表中的数据；为“最新”位置（时间戳列中具有最大值的位置）创建原生 Google Maps API v3 标记。

请注意，如果您有很多标记或只有标记，您可能需要修改方法。

# java - 使用Java从运行时链接下载时如何获取文件/应用程序名称？

> ID：12668228
> 
> 赞同：0
> 
> 时间：2012-10-01T06:05:16.067
> 
> 标签：java

我想在从 URL 下载时获取文件的名称。URL 仅显示文件的部分名称，但我在运行时需要文件的确切名称。建议我在 Java 中获取确切文件名的最佳方法。

我正在做自动化测试和下载文件是不同语言环境要求的一部分。

我想在下载时获取文件名，并且需要以编程方式打开相同的文件名。我在 Mac 上工作。

# java - 使用 WLST 创建数据源时出错

> ID：12668229
> 
> 赞同：0
> 
> 时间：2012-10-01T06:05:20.467
> 
> 标签：java, weblogic, weblogic11g, wlst

我正在尝试使用 wlst 创建数据源。我正在使用 jython 脚本并创建了一个名为 createDataSource.py 的文件。当我尝试从 ant 脚本运行此文件时，出现以下错误。

```
[wlst] Creating JDBCSystemResource with name MyDataSource
    [wlst] Traceback (innermost last):
  [wlst]   File "<iostream>", line 528, in create
    [wlst]  at weblogic.management.scripting.EditHandler.create(EditHandler.java:531)
    [wlst]  at     weblogic.management.scripting.WLScriptContext.create(WLScriptContext.java:332)
    [wlst]  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [wlst]  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    [wlst]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    [wlst]  at java.lang.reflect.Method.invoke(Unknown Source)
    [wlst] java.lang.ClassCastException: java.lang.ClassCastException:   java.lang.reflect.InvocationTargetException cannot be cast to     weblogic.management.scripting.ScriptException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:45:06.763

感谢@Mani 的有用评论。这是我的错误，我提供了错误的密码。

# java - 以编程方式启动 Derby

> ID：12668231
> 
> 赞同：5
> 
> 时间：2012-10-01T06:05:29.903
> 
> 标签：java, jdbc, derby, javadb

请看下面的代码

**数据库连接器.java**

```
 import java.sql.*;
 import javax.swing.*;

    public class DataBaseConnector
    {
        private Connection con;

        public DataBaseConnector()
        {

        }

        private boolean createConnection()
        {
            try
            {
                Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
                con = DriverManager.getConnection("jdbc:derby://localhost:1527/contact;create=true","yohanrw","knight");
            }
            catch(Exception e)
            {      
                System.out.println("Error getConnection");
                e.printStackTrace();
                JOptionPane.showMessageDialog(null,e.getLocalizedMessage());
                return false;
            }
            return true;   
        }

        private void closeConnection()
        {
            try
            {
                con.close();
            }
            catch(Exception e)
            {
                JOptionPane.showMessageDialog(null,e.getLocalizedMessage());
            }
        }

        public void insertData(int id, String firstName, String lastName)
        {
            createConnection();
            try
            {
                PreparedStatement ps = con.prepareStatement("insert into APP.FRIENDS values(?,?,?)");
                ps.setInt(1, id);
                ps.setString(2, firstName);
                ps.setString(3, lastName);

                int result = ps.executeUpdate();

                if(result>0)
                {
                    JOptionPane.showMessageDialog(null,"Data Inserted");
                }
                else
                {
                    JOptionPane.showMessageDialog(null,"Something Happened");
                }
            }
            catch(Exception e)
            {
                e.printStackTrace();
                JOptionPane.showMessageDialog(null,e.getLocalizedMessage());
            }
            finally
            {
                closeConnection();
            }
        }

        public void viewData()
        {
            createConnection();

            try
            {
                Statement st = con.createStatement();
                ResultSet rs = st.executeQuery("select * from APP.FRIENDS");

                StringBuffer sb = new StringBuffer("");

                while(rs.next())
                {
                    sb.append(rs.getInt(1)+"\n");
                    sb.append(rs.getString(2)+"\n");
                    sb.append(rs.getString(3)+"\n");

                }

                JOptionPane.showMessageDialog(null,sb);
            }
            catch(Exception e)
            {

            }
        }

    } 
```

**数据库界面**

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.*;

public class DatabaseUI extends JFrame
{
    private JLabel firstName, id, lastName;
    private JTextField idTxt, firstNameTxt, lastNameTxt;
    private JButton ok, view;

    public DatabaseUI()
    {
     firstName = new JLabel("First Name: ");
     lastName = new JLabel("Last Name: ");
     id = new JLabel("ID: ");

     firstNameTxt = new JTextField(10);
     lastNameTxt = new JTextField(10);
     idTxt = new JTextField(10);

     ok = new JButton("ADD");
     ok.addActionListener(new OKAction());
     view = new JButton("View");
     view.addActionListener(new ViewAction());

     JPanel centerPanel = new JPanel();
     centerPanel.setLayout(new GridLayout(4,2));
     centerPanel.add(id);
     centerPanel.add(idTxt);
     centerPanel.add(firstName);
     centerPanel.add(firstNameTxt);
     centerPanel.add(lastName);
     centerPanel.add(lastNameTxt);
     centerPanel.add(view);
     centerPanel.add(ok);

     getContentPane().add(centerPanel,"Center");

     this.pack();
     this.setVisible(true);
     this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    private class OKAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {
            DataBaseConnector db = new DataBaseConnector();

            int id = Integer.parseInt(idTxt.getText());

            db.insertData(id, firstNameTxt.getText().trim(), lastNameTxt.getText().trim());
        }
    }

    private class ViewAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {
            DataBaseConnector db = new DataBaseConnector();

            db.viewData();
        }
    }

    public static void main(String[]args)
    {
        new DatabaseUI();
    }
} 
```

在这种情况下，我需要通过右键单击*database node > start server*手动启动 derby（我正在使用 NetBeans） 。这是一个嵌入式数据库，这意味着我将它从一台机器带到另一台机器，并且愿意通过双击 jar 文件来启动，而不是在每台机器上配置数据库并手动启动它们。但是，如果我没有手动启动数据库，我会得到一个错误

> java.sql.SQLNonTransientConnectionException：java.net.ConnectException：连接到端口 1527 上的服务器 localhost 时出错，并显示消息连接被拒绝：连接。

即使在 NetBeans 内部，如果我没有手动启动它，就会出现错误。如何在我的程序中启动 Derby，而无需手动启动它？我尝试了一些方法，比如“ `create=true`”参数、NetworkServer.start()，但都不好。但是我不确定我是否正确地做到了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T06:37:14.380

> 这是一个嵌入式数据库，这意味着我将它从一台机器带到另一台机器，并且愿意通过双击 jar 文件来启动，

在 derby 的情况下，嵌入式数据库意味着数据库在 JVM 中运行并写入文件系统。这意味着您可以随心所欲地移动 jar 文件，但是如果您使用嵌入式数据库，那么您运行程序的每台机器都将拥有自己独立的数据库，并且只有一个 JVM 可以使用该数据库时间。那是你要的吗？

如果是这样，则问题出在程序使用的 URL 上。`"jdbc:derby://localhost:1527/contact;create=true"`是一个告诉 DriverManager 连接到远程数据库的 URL。程序首先加载嵌入式驱动程序并不重要。

Derby 中的嵌入式 URL 看起来像这样。`jdbc:derby:bar;create=true`这将使用 Derby 系统主目录或当前工作目录之外的 bar 目录中的嵌入式数据库。有关嵌入式 url 的更多信息，请参阅此处[连接到基于文件的 derby 数据库](https://stackoverflow.com/questions/10666313/connecting-to-a-file-based-derby-database/10666543#10666543)。

# javascript - 为什么cookie没有被删除？

> ID：12668234
> 
> 赞同：1
> 
> 时间：2012-10-01T06:05:49.250
> 
> 标签：javascript, asp.net, cookies, session-cookies

我通过 javascript 创建了一个 cookie。我想在注销时清除。该站点在 SSL 上运行。以下是我用于创建和删除 cookie 的 JS 代码。请注意，它是一个普通的 cookie（非 http、非安全且尽可能简单）。下面是创建cookie的函数，它创建cookie就好了，这个cookie是一个会话cookie，所有其他细节都是用于创建这个cookie的参数。

```
login: function () {
"use strict";
var cookieKeys, cookieValues;
if (cookieExists(this.systemPolicyCookie)) {
    cookieKeys = this.activeUserCookieName + '=';
    cookieValues = 'Email=' + this.activeUserCookieValues.Email + '&';
    cookieValues += 'UserId=' + this.activeUserCookieValues.UserId;
    cookieKeys += encodeURIComponent(cookieValues) + cookieDelimiter;
    cookieKeys += 'domain=' + this.activeUserCookieDomain + cookieDelimiter + cookiePath;
    document.cookie = cookieKeys;
    document.location.href = document.location.protocol + '//' + document.location.host + '/User/Landing/';
} else {
    alert('System policies are missing, please login online.');
    document.location.href = document.location.protocol + '//' + document.location.host;
} 
```

},

下面的代码块应该删除上面创建的 cookie，这不起作用。

```
logout: function () {
"use strict";
var cookies = cookieArray(),
    name;
for (name in cookies) {
    if (name != null && (this.systemPolicyCookie.toString()
        .toLowerCase() !== name.toString()
        .toLowerCase())) {
        document.cookie = name + '="";-1; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
    }
}
document.location.href = document.location.protocol + '//' + document.location.host; 
```

},

cookieArray() 函数返回所有 cookie 的列表，如下所示：

```
var cookieArray = function () {
"use strict";
var cookies = {},
counter,
split,
nameValue;
if (document.cookie && document.cookie !== '') {
    split = document.cookie.split(';');
    for (counter = 0; counter < split.length; counter++) {
        nameValue = split[counter].split("=");
        nameValue[0] = nameValue[0].replace(/^ /, '');
        cookies[decodeURIComponent(nameValue[0])] = decodeURIComponent(nameValue[1]);
    }
}
return cookies; 
```

你能帮我让 cookie 删除代码正常工作吗，否则我将不得不关闭浏览器（糟糕的 Ux）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:14:15.007

你使用的是什么浏览器？？

据我所知，IE 会缓存 cookie，因此它们将被删除，直到您重新启动浏览器。我不确定 FireFox 或 Chrome 是否也这样做

您是否尝试过在 Chrome 和/或 FireFox 中测试您的代码？

# python - django。需要网络开发的提示

> ID：12668238
> 
> 赞同：0
> 
> 时间：2012-10-01T06:06:32.060
> 
> 标签：python, django, url, web

我是网络开发的新手。我已经有一些使用 django 的经验。但它是一个简单的网站，有几个表格。我想继续使用 django。现在我有了一个想法，我想看到什么活着，需要一些提示、建议和正确的方向。我不知道我应该在搜索请求中使用什么“正确的词”，我希望你能帮助我。我不需要现成的解决方案，我只需要起点。

这个想法是我想实现网络服务，用户可以在其中创建自己的简单网站，其中包含几个带有现成模板的页面。所以，有两个问题：

1) 用户注册后应自动获取自己的网址。例如，我有 LAMP，我的域是 example.com。用户将获得 user_name.example.com。我看到了类似的实现，所以这不是不可能的。但是服务器如何处理呢？它是由 django、apache 还是其他东西制作的？

2) 用户应该有自己的管理页面，例如 user_name.example.com/admin。它可以是 django-admin 页面，但仅适用于该用户，也可以是我将为他制作的任何页面。在该页面上，他可以修改其页面的内容。最后我会得到这样的结构：

```
 user_1.example.com
        user_1.example.com/page_1
        user_1.example.com/page_2

    user_2.example.com
        user_2.example.com/page_1
        user_2.example.com/page_2 
```

那么，这些技术如何调用搜索呢？感谢您的帮助！

PS 当然，如果您提供一些代码、教程或示例，我不能拒绝您的帮助 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:05:37.690

使用 Django，你必须利用它的主要优势——更大的社区：

1.  [http://github.com/ennio/django-hosts](http://github.com/ennio/django-hosts)（如前所述，您可以使用中间件按域识别用户）
2.  使用 django 管理员：[https](https://github.com/lukaszb/django-guardian) ://github.com/lukaszb/django-guardian 。您可以分配必要的权限来更改页面，例如：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:31:45.817

1.  Web 服务器负责它所服务的域名。不过，您将需要编写中间件来从主机名中提取用户名。

2.  Django 的管理页面仅此而已。如果你想按用户分离，那么我建议你独立实现它们（尽管重用 Django 的管理工具提供的一些类不会有坏处）。

# c# - 动态创建的复选框checkedchanged事件问题

> ID：12668251
> 
> 赞同：1
> 
> 时间：2012-10-01T06:08:09.717
> 
> 标签：c#, asp.net

我的问题是我需要在文本框的 textchanged 事件上动态创建复选框，这些复选框都被选中，并将它们的选中状态计数保存在一个 int 变量中，将其分配给一个标签；直到这里一切都已成功完成，但现在的问题是，如果我取消选中任何一个复选框，我希望它们的计数减少一个，但 checkchanged 事件没有触发，并且通过取消选中任何一个复选框，所有这些都消失了......这是我的代码：

```
 if (DDLType.SelectedItem.Text == "Sick Leave")
            {

                DateTime f = DateTime.Parse(txtFrom.Text);
                DateTime t = DateTime.Parse(txtTo.Text);
                double daydiff = (t - f).TotalDays;

                double p = daydiff;
                for (int i = 1; i <= daydiff; i++)
                {
                    string a = f.ToString("ddd");
                    chklist = new CheckBox();
                    chklist.AutoPostBack = true;
                    chklist.CheckedChanged += new EventHandler(CheckChanged);

                    chklist.ID = "chk" + i;
                    chklist.Text = a;
                    chklist.Font.Name = "Trebuchet MS";
                    chklist.Font.Size = 9;
                    chklist.Checked = true;
                    checkcount++;
                    pnlCheck.Controls.Add(chklist);

                    if (a == "Thu" || a == "Fri")
                    {
                        p--;
                        chklist.Checked = false;
                        checkcount--;

                    }
                    f = f.AddDays(1);
                }
                daydiff = p;
                lblCheck.Text = checkcount.ToString(); 
```

}

```
 protected void CheckChanged(object sender, EventArgs e)
       {

        if (!chklist.Checked)
        {
            checkcount--;
            lblCheck.Text = checkcount.ToString();
        }
    } 
```

我不知道出了什么问题...

在这方面的任何帮助将不胜感激在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:00:07.877

您需要对事件处理程序进行更改并仅选中单击的复选框。

```
protected void CheckChanged(object sender, EventArgs e)
{
        chk = (CheckBox)sender
        if (!chk.Checked)
        {
            checkcount--;
            lblCheck.Text = checkcount.ToString();
        }
        else
        {
            checkcount++;
            lblCheck.Text = checkcount.ToString();
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:21:36.010

1.  这是因为当您在取消选中复选框后发送回发时，其余复选框需要动态添加，就像您在文本更改事件之后所做的那样

2.  将此添加到您的 CheckChanged 事件中： chklist = (CheckBox)sender 在**if**子句之前

# java - JOOQ 无连接配置问题

> ID：12668252
> 
> 赞同：5
> 
> 时间：2012-10-01T06:08:10.997
> 
> 标签：java, mysql, jooq

我正在使用 JOOQ 向 MySql 插入一条记录，这是我的代码

```
if (f.getConnection()!=null) {
    UserRecord us = new UserRecord();
    us.setAccountId(UInteger.valueOf(accountId));
    us.setCode(code);
    us.setEnd(new java.sql.Date(end.getTime()));
    us.setStart(new java.sql.Date(start.getTime()));
    us.setPhoneNumberId(UInteger.valueOf(phnNUmberId));            
    us.store();
} 
```

（f 是数据库连接工厂类）
它
在线程“main”org.jooq.exception.DetachedException 中给出异常：无法执行查询。未配置连接

但是数据库连接是坚果空，可能是什么原因？
（选择查询使用相同的连接）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T10:41:25.090

您的用户记录没有“附加”到那个`Factory`（jOOQ 2.0，在更新的版本中，它被称为`Configuration`）。你有两个选择：

```
// Attach the user record prior to calling "store"
f.attach(us);
us.store();

// Create a pre-attached user record:
UserRecord us = f.newRecord(Tables.USER);
// [...]
us.store(); 
```

如果未附加，jOOQ 将无法发现应该使用什么工厂（配置）来存储您的记录。

# c# - 想要使用 C#.net 桌面应用程序在 Windows 7 中调用碎片整理过程

> ID：12668253
> 
> 赞同：1
> 
> 时间：2012-10-01T06:08:17.920
> 
> 标签：c#, .net, desktop-application

我想使用 Visual Studio 2010 C# .Net 在 Windows 7 中打开磁盘碎片整理程序窗口。

我使用这段代码：

```
Process.Start("dfrgui"); // 'dfrgui' is used to open disk defragment window in Windows 7 
```

但窗口没有出现。

但在 Windows XP 中，我使用

```
Process.Start("dfrg.msc"); 
```

这里确实出现了窗口。

在 Windows 7 中是否有另一种调用碎片整理程序的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T09:34:42.867

使用这个命令我希望它适用于每个系统

```
ProcessStartInfo pf = new ProcessStartInfo(Path.Combine(Environment.SystemDirectory, "dfrgui.exe"));
pf.Verb = "runas";

Process.Start(pf); 
```

# c# - 如何在c#中处理另一个键单击事件中按下的键

> ID：12668255
> 
> 赞同：0
> 
> 时间：2012-10-01T06:08:29.920
> 
> 标签：c#, wpf, c#-4.0

我有一个文本块和几个按钮我想做的是看看文本块中的最后一个字符是否是 ^ 如果是这样我希望下一个所有数字都进入上标

这就是我所做的

```
 private void buttonxn_Click(object sender, RoutedEventArgs e)
  {
      textBlock1.Text = textBlock1.Text + "x^";

  }

  private void button1_Click(object sender, RoutedEventArgs e)
  {
      int len=textBlock1.Text.Length;
      string x = textBlock1.Text.Substring(len-1, 1);
      if(x=="^")
      {
          textBlock1.Text = textBlock1.Text + "\x2070";
      }

      else
          textBlock1.Text = textBlock1.Text + "1";
  } 
```

但这仅在功率为一位数时才有帮助，如何使其适用于 x^12 或其他我试图制作字符串并检查的东西

```
 string power ={ "\x2070", "\x00b9", "\x00b2", "\x00b3", "\x2074", "\x2075", "\x2076", "\x2077", "\x2078", "\x2079" }; 
```

现在在所有按钮的单击事件中，我可以在最后一个字符处于“电源”状态时进行检查，因此按下的下一个数字按钮也将处于电源状态，直到按下任何其他键（如 +，-）......我希望我自己清楚..对不起，如果我有点新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:15:57.477

您想要的是将您当前的应用程序状态与您的 UI 分开。此代码将是一个简化的示例，但最好研究执行此操作的模式（MVC、MVP、MVVM）。虽然对于非常小的应用程序来说，使用这些模式大多是矫枉过正，但可以从中学到的东西非常简洁。基本上你想在某些按钮上切换状态，如果它们影响其他按钮的行为。在此示例中，您的 +/-... 按钮将切换回默认值。

```
 public enum EntryState
        {
            Default,
            Power
        }

        private EntryState _state = EntryState.Default;

        private void buttonxn_Click(object sender, RoutedEventArgs e)
        {
            textBlock1.Text = textBlock1.Text + "x^";
            _state = EntryState.Power;
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            if (_state == EntryState.Power)
                textBlock1.Text = textBlock1.Text + "\x2070";
            else
                textBlock1.Text = textBlock1.Text + "1";
        } 
```

# java - 在 JSF 中有一个“常量”类

> ID：12668263
> 
> 赞同：8
> 
> 时间：2012-10-01T06:08:54.360
> 
> 标签：java, jsf, primefaces, constants, el

我正在使用 JSF/Primefaces 构建一个 Web 应用程序。我需要有一个“常量”类，即一个由常量组成的类。这些常量主要是将在整个应用程序中使用的导航命令。我这样做的原因是避免临时实例化字符串。

我如何实现这一点，使常量可以从支持 bean 和 XHTML 文件中访问？

我曾尝试使用`@ApplicationScoped`和使用单例模式（单例类），但由于范围问题，我无法使其正常工作。

或者，也许我只是使用了错误的方法。欢迎任何想法/建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T11:39:48.997

> *我如何实现这一点，使常量可以从支持 bean 和 XHTML 文件中访问？*

在支持 bean 中，这显然很容易。由于它们只是 Java 类，因此与“普通”Java 方式没有什么不同。您可以使用`enum`s 或`public static final`字段。在视图中，这是一个不同的故事。在即将发布的 3.0 版本之前，EL 不以任何方式支持常量。

我建议使用枚举，因为 EL 在字符串比较中对它们具有隐式支持。它不执行任何编译时/运行时类型安全检查，但您可以将枚举名称用作字符串。例如

```
<h:someComponent ... rendered="#{order.status == 'SHIPPING'}" /> 
```

如果您更喜欢更多的自我记录代码和运行时检查（不，编译时检查是不可能的），那么您可以考虑使用[OmniFaces](http://omnifaces.org) [`<o:importConstants>`](http://showcase.omnifaces.org/taghandlers/importConstants)。

```
<o:importConstants type="com.example.OrderStatus" />
<h:someComponent ... rendered="#{order.status == OrderStatus.SHIPPING}" /> 
```

这只是 IMO 有点笨拙。然而，运行时检查在开发过程中很好。一个错字很容易被监督。

在即将到来的 EL 3.0（[JSR-341](http://jcp.org/en/jsr/detail?id=341)，Java EE 7 的一部分）中，可以以相同的方式引用常量。另请参阅[如何在 EL 中引用常量？](https://stackoverflow.com/questions/3732608/how-to-reference-constants-in-el/3735006#3735006)这只需要以编程方式导入常量，因为没有标准的 JSP/Facelets 标记。

# c - C 指针分段错误

> ID：12668269
> 
> 赞同：-1
> 
> 时间：2012-10-01T06:10:01.697
> 
> 标签：c, pointers, segmentation-fault

> **可能重复：**
> [尝试在结构上使用 scanf 时出现分段错误](https://stackoverflow.com/questions/10221537/segmentation-fault-when-trying-to-use-scanf-on-a-struct)

我是 C 编程新手，并且有以下代码。

```
char *s;
scanf("%s",s);
printf("This is s %s",s); 
```

上面的代码行导致了分段错误。你能解释一下为什么吗？是否有一些文章可以让我阅读以更深入地理解这些概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:12:40.633

您可以写入该特定实体 **拥有的内存地址。**

例如：

```
char s[10]; 
```

编译器保留足够的内存来存储`10`字符`s`，您可以自由地对其进行写入。

当你说：

```
char *s; 
```

指针`s`只是指向一些不属于它或为其保留的随机内存地址。写入该内存地址会导致写入某个其他实体拥有的内存。从技术上讲，这是**未定义的行为**。
实际上，可能会发生或不发生段错误，具体取决于写入的内存地址是否属于某个其他实体。因此，您很幸运遇到了引起您注意的崩溃。无论如何，这是未定义的行为，因此应始终避免。

您需要为指针分配内存以便能够对它进行任何有意义的操作。无论是堆栈上的内存还是堆上的内存，但它应该是拥有的，因此可以写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:50:08.780

使用 fgets 使用数组和指针尝试此操作：

```
static void get_input()
{
    /* Array of 32 btyes long - no input can be 32 characters in total */
#define CHAR_SIZE 32
    char str_array[CHAR_SIZE];
    char *str_ptr = calloc(sizeof(char), CHAR_SIZE);

    /* Get input from user - limit the input to 32 bytes using fgets which is safer */
    printf("Please enter something: ");
    /* Clear the memory before using it */
    memset(str_array, 0, CHAR_SIZE);
    fgets(str_array, CHAR_SIZE, stdin);
    printf("The input was [ %s ]\n", str_array);

    /* Doing the same thing with a pointer */
    printf("Please enter something again: ");
    fgets(str_ptr, CHAR_SIZE, stdin);
    printf("The input again was [ %s ]\n", str_ptr);

    /* free memory */
    free(str_ptr);
} 
```

希望能帮助到你，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:18:51.780

指针存储地址。并且该地址应该始终是某些保留内存的地址。

意思是做完之后`char *s`。您需要使用`malloc`或为其保留/分配一些内存`calloc`。

```
char *s=malloc(10*sizeof(char)); 
```

假设 char 的大小为 1 个字节，这将分配 10 个字节的内存。请记住，`free`完成目的后，您需要使用免费功能分配的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:34:35.060

您已经创建了一个指针，但现在它未初始化（可能指向您无权访问的某个位置）。

```
char *s; 
```

要么将其声明为数组

```
char s[20]; //this number should be big enough to hold the input 
```

或者分配一些内存然后指向它。

```
char *s = (char *) malloc (20*sizeof(char)); 
```

参考：[scanf](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)

# ckeditor - 在编辑器中添加特殊字符

> ID：12668274
> 
> 赞同：0
> 
> 时间：2012-10-01T06:10:29.767
> 
> 标签：ckeditor

`Ji&#345;&iacute;`在 CKEditor 源代码视图中，我编写`Jiří`并保存在 mysql db 中，它在浏览器上看起来很好，但是当我在编辑视图中打开但没有任何更改时，保存并重新检查浏览器显示`Ji?í`我正在使用

`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">` 我是否需要在标签中指定另一个字符集（UTF-16？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:27:46.323

固定：我遵循[HOW TO:Produce UTF-8](http://dev.ektron.com/kb_article.aspx?id=403) 我的相关点是：

*   确保您的数据库（如果您使用的是一个）设置为接受 UTF-8 或 Unicode (UCS-2) 字符。

# java - 需要一些帮助来为 Java 创建一个 Triangle 类

> ID：12668277
> 
> 赞同：0
> 
> 时间：2012-10-01T06:11:00.167
> 
> 标签：java, eclipse, oop

我应该为我在学校的项目制作自己的 Java Triangle 类。一个新的三角形按从左到右的顺序获取 3 个点的 (x,y) 坐标。我关心的主要是我制作 sideAB、sideBC 和 sideAC 实例变量的方式以及它们在构造函数中初始化它们的方式。此外，maxAngle 和 minAngle 看起来像一团糟，我希望它有 angleA、angleB 和 angleC 变量，类似于我有边的方式。另外，我不确定我的任何变量是否应该是静态的。如果我的代码真的很菜，我很抱歉，但这是我班级的第一个 Java 项目。

这就是我所拥有的。它有效，但我认为我没有以正确的方式做所有事情：

```
public class Triangle {
    private double ax;
    private double ay;
    private double bx;
    private double by;
    private double cx;
    private double cy;
    //added these variables because I use them so frequently when calculating angles, area, perimeter, etc.
    private double sideAB;
    private double sideBC;
    private double sideAC;

    public Triangle(double x1, double y1, double x2, double y2, double x3, double y3)
    {
        ax = x1;
        ay = y1;
        bx = x2;
        by = y2;
        cx = x3;
        cy = y3;
        sideAB= Math.abs(Math.sqrt(Math.pow(bx-ax,  2)+Math.pow(by-ay, 2)));
        sideBC= Math.abs(Math.sqrt(Math.pow(cx-bx,  2)+Math.pow(cy-by, 2)));
        sideAC= Math.abs(Math.sqrt(Math.pow(cx-ax,  2)+Math.pow(cy-ay, 2)));
    }
    public double getPerimeter()
    {
        //add the 3 sides together for the perimeter
        double perimeter = sideAB + sideBC + sideAC;
        return perimeter;
    }
    public double getArea()
    {
        //used Heron's formula to find the area of the triangle
        double s = (sideAB + sideBC + sideAC)/2;
        double area = Math.sqrt(s*(s - sideAB)*(s - sideBC)*(s - sideAC));
        return area;
    }
    public double getSideAB()
    {
        return sideAB;
    }
    public double getSideBC()
    {
        return sideBC;
    }
    public double getSideAC()
    {
        return sideAC;
    }
    public double getAngleC()
    {
        //Law of cosines to find the angle
        double a2 = Math.pow(sideAB, 2);
        double b2 = Math.pow(sideBC, 2);
        double c2 = Math.pow(sideAC, 2);
        double cosC = ((b2 + c2)-a2)/((2*sideBC)*sideAC);
        double angleC = Math.acos(cosC);
        angleC = Math.toDegrees(angleC);
        return angleC;
    }
    public double getAngleB()
    {
        double a2 = Math.pow(sideAB, 2);
        double b2 = Math.pow(sideBC, 2);
        double c2 = Math.pow(sideAC, 2);
        double cosB = ((a2+b2-c2)/(2*sideAB*sideBC));
        double angleB = Math.acos(cosB);
        angleB = Math.toDegrees(angleB);
        return angleB;
    }
    public double getAngleA()
    {
        double a2 = Math.pow(sideAB, 2);
        double b2 = Math.pow(sideBC, 2);
        double c2 = Math.pow(sideAC, 2);
        double cosA = ((a2+c2-b2)/(2*sideAB*sideAC));
        double angleA = Math.acos(cosA);
        angleA = Math.toDegrees(angleA);
        return angleA;
    }
    public double maxSide()
    {
        //if-else if-else statements for max and min sides functions
        if (sideAB >= sideBC && sideAB >= sideAC)
        {
            return sideAB;
        }
        else if(sideBC >= sideAB && sideBC >= sideAC)
        {
            return sideBC;
        }
        else
        {
            return sideAC;
        }
    }
    public double minSide()
    {
        if (sideAB <= sideBC && sideAB <= sideAC)
        {
            return sideAB;
        }
        else if(sideBC <= sideAB && sideBC <= sideAC)
        {
            return sideBC;
        }
        else
        {
            return sideAC;
        }
    }
    public double maxAngle()
    {
        double a2 = Math.pow(sideAB, 2);
        double b2 = Math.pow(sideBC, 2);
        double c2 = Math.pow(sideAC, 2);
        double cosC = ((b2 + c2)-a2)/((2*sideBC)*sideAC);
        double angleC = Math.acos(cosC);
        angleC = Math.toDegrees(angleC);
        double cosB = ((a2+b2-c2)/(2*sideAB*sideBC));
        double angleB = Math.acos(cosB);
        angleB = Math.toDegrees(angleB);
        double cosA = ((a2+c2-b2)/(2*sideAB*sideAC));
        double angleA = Math.acos(cosA);
        angleA = Math.toDegrees(angleA);
        if (angleA >= angleB && angleA >= angleC)
        {
            return angleA;
        }
        else if(angleB >= angleA && angleB >= angleC)
        {
            return angleB;
        }
        else
        {
            return angleC;
        }       
    }
    public double minAngle()
    {
        double a2 = Math.pow(sideAB, 2);
        double b2 = Math.pow(sideBC, 2);
        double c2 = Math.pow(sideAC, 2);
        double cosC = ((b2 + c2)-a2)/((2*sideBC)*sideAC);
        double angleC = Math.acos(cosC);
        angleC = Math.toDegrees(angleC);
        double cosB = ((a2+b2-c2)/(2*sideAB*sideBC));
        double angleB = Math.acos(cosB);
        angleB = Math.toDegrees(angleB);
        double cosA = ((a2+c2-b2)/(2*sideAB*sideAC));
        double angleA = Math.acos(cosA);
        angleA = Math.toDegrees(angleA);
        if (angleA <= angleB && angleA <= angleC)
        {
            return angleA;
        }
        else if(angleB <= angleA && angleB <= angleC)
        {
            return angleB;
        }
        else
        {
            return angleC;
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:18:28.953

三角形的显着属性（至少在二维欧几里得空间中）是它的三个点。

就是这样，这就是您需要存储的*所有内容。*其他一切都可以据此计算。您不需要边的长度或顶点的角度，它们都可以从这三个点推导出来。

我的建议是简单地创建一个`Point`类型，然后`Triangle`从其中三个构建你的类型。

如果您确定这些派生值的计算过于昂贵，那么并且*只有在那时，*您才应该考虑缓存该信息。但我怀疑情况会如此。如果*确实*如此，那么（至少）有两种方法。

首先是在非派生值发生变化时计算派生值。`setSomething()`这样做的好处是，无论何时更改某些内容并且简化代码（每个方法和构造函数都简单地调用该`calcAllDerivedValues()`方法），都可以确保所有值都是最新的。

其次，您可以在更改非派生值时将派生值标记为脏值。然后，每当您需要派生数据时，计算它的方法可以检查它们是否脏，然后计算（并缓存）它们（如果是）。

如果它们*不*脏，它们只会返回缓存的值。这有点复杂，但可以消除不必要的计算，特别是如果每​​个派生值都有一个脏标志 - 你只计算你需要的，当你需要它时。

而且，对于您的具体问题，如果它们在*所有*实例`static`之间共享，则仅使用静态类级变量。由于边的角度或长度特定于*一个*实例，它们不应该是静态的。

 *** * *

这就是我要开始的方式。首先，一个`Point`具有`x`和`y`成员的类（以及它们的 getter 和 setter），以及计算到另一点的距离和角度（相对于“直线向上”等固定角度）的能力，例如：

```
private double x, y;

public double getX();
public double getY();
public void setX(double newX);
public void setY(double newY);
public void setXY(double newX, double newY);
public double getDistance (Point other);
public double getAngle (Point other); 
```

然后，您的`Triangle`班级需要其中三点：

```
private Point a, b, c; 
```

以及适当的 setter 和 getter，以及计算所需派生属性所需的任何函数。

那将是这样的：

*   通过计算和之间`a->b`的距离来获取周长（使用类方法完成）然后添加它们。`b->c``a->c``Point``getDistance()`
*   使用相同的信息（三行长度）来获取该区域。
*   根据（例如）和（对于角度 A）的`Point`类结果之间的差异来获取角度。如果这个角度大于 180 度，显然那是三角形的*外角*，你应该从 360 度中减去它以获得内角。`getAngle()``a->b``a->c`

 *而且您不需要为每种情况复制*所有代码。*例如，您希望能够计算出三个顶点中任意一个的角度。您*不需要*为每一个复制所有智能代码。

而是编写*一次*复杂的代码并以三种不同的方式调用它。

我的意思是：

```
// Can just call Point stuff directly for distances (simple code).
double getDistAB() { return a.getDistance (b); }
double getDistAC() { return a.getDistance (c); }
double getDistBC() { return b.getDistance (c); }

double getPerimeter() { return getDistAB() + getDistAC() + getDistBC(); }

// Returns the angle inside triangle at the first vertex (complex code).
double getAngleAtPointX (Point x, Point y, Point z) {
    double angle = x.getAngle (y) - x.getAngle (z);
    if (angle < 0)
        angle = -angle;
    if (angle > 180)
        angle = 360 - angle;
    return angle;
}

// Then just call that with different arguments.
double getAngleA() { return getAngleAtPoint (a, b, c); }
double getAngleB() { return getAngleAtPoint (b, a, c); }
double getAngleC() { return getAngleAtPoint (c, a, b); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:21:53.053

在大多数情况下，代码是正确的。

但是，最大的问题是您编写的代码多次执行相同的操作。例如这个方法：

```
public double maxAngle()
{
    double a2 = Math.pow(sideAB, 2);
    double b2 = Math.pow(sideBC, 2);
    double c2 = Math.pow(sideAC, 2);
    double cosC = ((b2 + c2)-a2)/((2*sideBC)*sideAC);
    double angleC = Math.acos(cosC);
    angleC = Math.toDegrees(angleC);
    double cosB = ((a2+b2-c2)/(2*sideAB*sideBC));
    double angleB = Math.acos(cosB);
    angleB = Math.toDegrees(angleB);
    double cosA = ((a2+c2-b2)/(2*sideAB*sideAC));
    double angleA = Math.acos(cosA);
    angleA = Math.toDegrees(angleA);
    if (angleA >= angleB && angleA >= angleC)
    {
        return angleA;
    }
    else if(angleB >= angleA && angleB >= angleC)
    {
        return angleB;
    }
    else
    {
        return angleC;
    }       
} 
```

计算最大角度，但您可以使用已经实现的方法`getAngleA()` ，`getAngleB()`并`getAngleC()`像这样编写这个：

```
public double maxAngle() {
  if(getAngleA() => getAngleB() && getAngleA() => getAngleC())
    return getAngleA();
  if(getAngleB() => getAngleA() && getAngleB() => getAngleC())
    return getAngleB();
  return getAngleC();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:23:10.550

如果性能很重要，您应该预先计算所有值（假设不能更改三角形的任何点），尤其是角度，如果它们被多次访问。

不，您绝对不应该使用任何静态变量，因为这些变量将由您的 Triangle 类的每个实例共享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:44:37.100

可以在您的代码中进行的一些修改是：-

*   创建一个**Coordinate**类来存储三角形的三个坐标的 x 和 y 坐标。
*   创建一个**Side**类来存储所有三个面。
*   创建一个**角度**类来查找和存储所有角度..

*   现在，不必在一个类中创建所有内容，您可以在各自的类中计算它们..然后从那里获取..

*   **EG： -**让一个特定的**`Angle`**实例找出它**自己的角度**，你可以从那里得到角度。所以，你不必编写逻辑来创建三次角度。

*   您可以将您的**`findMaxSide()`**, 和**`findMinSide()`**代码移动到您的**Side**类中。因为理想情况下，您的方法应该在`class containing the information`您的方法正在使用的那个中。

*   同样移动**`findMaxAngle()`**到**`findMinAngle()`**你的**角度**类。

所以，我在这里为您提供`Angle`可以使用的课程..您可以自己创建您的`Coordinate`课程`Side`：-

```
public class Angle {

    private double angle;

    public Angle() {

    }

    public double getAngle() {
        return this.angle;
    }

    public void setAngle(Side side1, Side side2, Side side3) {

        double a2 = Math.pow(side1.getLength(), 2);
        double b2 = Math.pow(side2.getLength(), 2);
        double c2 = Math.pow(side3.getLength(), 2);
        double cosB = ((a2+b2-c2)/(2*side1.getLength()*side2.getLength()));

        double tempAngle = Math.acos(cosB);

        this.angle = Math.toDegrees(tempAngle);
    }

    public Angle maxAngle(Angle angle1, Angle angle2) {

        Angle temp = angle1.getAngle() > angle2.getAngle() ? angle1 : angle2;
        return temp.getAngle() > this.getAngle() ? temp : this;
    }

    public Angle minAngle(Angle angle1, Angle angle2) {

        Angle temp = angle1.getAngle() < angle2.getAngle() ? angle1 : angle2;
        return temp.getAngle() < this.getAngle() ? temp : this;
    }
} 
```

`side1`并且`side2`是您要在其之间找到角度的边..

你可以从你的`Triangle`班级中使用这个班级，如下所示： -

```
public class Triangle {

    private Coordinate a;
    private Coordinate b;
    private Coordinate c;
    //added these variables because I use them so frequently when calculating angles, area, perimeter, etc.

    private Side sideAB;
    private Side sideBC;
    private Side sideAC;

    private Angle angleA = new Angle();
    private Angle angleB = new Angle();
    private Angle angleC = new Angle();

    public Triangle(double x1, double y1, double x2, double y2, double x3, double y3)
    {

        a = new Coordinate(x1, y1);
        b = new Coordinate(x2, y2);
        c = new Coordinate(x3, y3);

        sideAB= new Side(a, b);
        sideBC= new Side(b, c);
        sideAC= new Side(a, c);

        angleA.setAngle(sideAB, sideAC, sideBC);
        angleB.setAngle(sideAB, sideBC, sideAC);
        angleC.setAngle(sideAC, sideBC, sideAB);
    }

    /** Your other methods to calculate Perimeter and Area **/
} 
```

我刚刚展示了构造函数，展示了如何设置三角形类的所有三个属性。

我认为这么多信息将帮助您继续创建一个好的设计。***

# git - Mercurial 和 Git 自定义 SSH 密钥位置

> ID：12668278
> 
> 赞同：2
> 
> 时间：2012-10-01T06:11:07.013
> 
> 标签：git, mercurial, ssh, key

是否有任何方法可以为每个克隆的 repo 定义它应该使用哪个 SSH 密钥对的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:33:12.387

是的，您需要定义一个`~/.ssh/config`文件，您可以在其中声明不同的 ssh 名称，并使用自定义完整路径名供公钥/私钥使用。

```
Host AHostName -- name you will use for the ssh address
User gituser
Hostname SSH IP address 
Port 1234 -- use this if you need custom ports
IdentityFile "path to your private ssh key" 
```

从那里，repo 的 ssh url 可以是：

```
AHostName:myrepo 
```

也可以看看：

*   “ [git + assembla + 多个 ssh 密钥/多台计算机](https://stackoverflow.com/a/8172628/6309)”
*   “[如何从已将 SSH 密钥添加到工作相关 GitHub 帐户的办公计算机上处​​理个人 GitHub 存储库？](https://stackoverflow.com/questions/12066895/how-to-work-on-personal-github-repo-from-office-computer-whose-ssh-key-is-alread/12066973#12066973) ”

# google-app-engine - 如何更改 Google AppEngine 中的日志记录格式

> ID：12668281
> 
> 赞同：9
> 
> 时间：2012-10-01T06:11:37.543
> 
> 标签：google-app-engine, logging, java.util.logging

AppEngine 使用 JUL 进行日志记录，我已经配置了 logging.properties 文件并在 appengine-web.xml 中引用了该文件

问题是 AppEngine 在控制台日志中显示数据的格式在每条日志行大约 180 个字符后被截断。而且由于其中很大一部分被方法和类名（包括包）和日期占用，因此没有太多实际的日志消息出现。

我试图以编程方式和通过 logging.properties 配置我自己的格式化程序，但没有运气。

我意识到我可以通过 slf4j、logback 或 log4j 推送我的所有日​​志，但我相信这样做会导致所有此类日志在 AppEngine 日志控制台中显示为标准输出，该控制台具有自己的冗长风格。

有没有办法为 AppEngine 日志定义特定格式，如果有，如何定义？如果每个日志行没有被截断为 180 个字符，就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:29:25.817

您是否尝试过使用日志下载功能：它不会截断日志，您可以查看所有内容，并且可以指定要下载的日志条目的天数和严重性。

```
C:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.7.2.1\appengine-java-sdk-1.7.2.1\bin>appcfg.cmd --severity=DEBUG --num_days=2 request_logs C:\workspace\my_app\war C:\workspace\MY_LOGS.TXT

<path to SDK>/appcfg.cmd --severity=DEBUG --num_days=2 request_logs <path to war> <path to log> 
```

这是我发现能够查看日志详细信息的唯一方法。默认日志级别是 INFO，因此您必须使用严重性和 num_days 参数才能使其有用。

此外，如果要下载后端的日志，则需要在命令行中使用以下选项指定后端版本。其中worker是后端的名称。

```
 --version=worker 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:38:30.123

在深入研究之后，我无法获得自定义 JUL 处理程序或格式化程序以被 appengine 运行时拾取。因此，我创建了一个 ServletContextListener 来使用我自己的自定义格式化程序初始化根记录器，如下所示：

```
<listener>
   <listener-class>MyLoggingListener</listener-class>
</listener> 
```

这是一个示例 ServletContextListener：

```
public class MyLoggingListener implements ServletContextListener
{
    private static Logger LOG;

    @Override
    public void contextInitialized(ServletContextEvent sce)
    {
        LOG = Logger.getLogger("");
        Handler[] handlers = LOG.getHandlers();
        for (Handler handler : handlers)
        {
            handler.setFormatter(new MyLogFormatter());
        }
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce)
    {}
} 
```

**更新：** 上面的代码在开发环境中工作，但在 Appengine 上似乎被忽略了。回到这个绘图板上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:05:46.103

查看 App 引擎配置工具本身的源代码，我看到它所做的一切都是调用同一个 LogService，您可以通过 LogService API 访问自己。

**因此，您的问题的答案真的很简单，只需将以下链接中的代码放到您的代码库中，仅将其保护给管理员用户并解决问题。**

[https://developers.google.com/appengine/docs/java/logservice/overview](https://developers.google.com/appengine/docs/java/logservice/overview)

# java - 本地计算机上的 Hazelcast 单元测试，无法使用 127.0.0.1 创建集群

> ID：12668284
> 
> 赞同：1
> 
> 时间：2012-10-01T06:12:06.280
> 
> 标签：java, distributed-caching, hazelcast

我有一个带有 hazelcast 版本的 spring-hibernate Web 应用程序：1.9.4.8 我使用默认的 hazelcast 配置而不是 spring 集成。我使用 JUnit 非事务性测试进行单元测试。我首先使用 @Before 关闭 Hazelcast 的所有实例。同样@After 进行清理。

由于我的计算机在我公司的网络中，我正在配置启用了 hazelcast tcp-ip 的相应 IP，这些 IP 将在其自己的本地测试和使用该应用程序。

但是，每当我将 IP 从网络 ip 更改为 127.0.0.1 时，我都无法加入多个成员。但之前，当 ip 的 conf. 就像：192.168.24.27

我需要将其从特定的 ip 地址更改为 127.0.0.1 之类的标准，以使不同的开发人员也可以在自己的计算机上进行测试...

这是我的示例单元测试的一部分：

```
 ///
        LOG.info("test is begining");
        Map map;
        int memberSize = 0;
        Config config = new Config();
        // Hazelcast cluster member 1
        final HazelcastInstance customInstance1 = Hazelcast.newHazelcastInstance(null);  
        assertEquals(2, clusterListener.getMemberSize());   
        getApplicationMap().put("member2", 2);  

        // shutdown member 1
        customInstance1.getLifecycleService().shutdown(); 

        // Hazelcast cluster new member 1
        final HazelcastInstance customInstance2 = Hazelcast.newHazelcastInstance(null); 
        assertEquals(2, clusterListener.getMemberSize());   
        getApplicationMap().put("member2_new", 2);  

        assertEquals(3, getApplicationMap().size()); 

        LOG.info("\n\n *** Hazelcast test is OK. *** \n");
  /// 
```

这是我的问题的hazelcast配置的简短但相关的部分：...

```
<port auto-increment="true">5701</port>
    <join>
        <multicast enabled="false">
            <multicast-group>224.2.2.3</multicast-group>
            <multicast-port>54327</multicast-port>
        </multicast>
        <tcp-ip enabled="true">
            <interface>127.0.0.1</interface>  // it was 192.168.24.27 before and was working
        </tcp-ip>
    </join>
    <interfaces enabled="true">
            <interface>127.0.0.*</interface> 
    </interfaces> 
```

...

这里是相关日志：...

```
Members [1] {
Member [127.0.0.1:5701] this
}

28.Eyl.2012 16:01:40 com.hazelcast.impl.management.ManagementCenterService
INFO: /127.0.0.1:5701 [elekCluster] Hazelcast Management Center started at port 5801.
28.Eyl.2012 16:01:40 com.hazelcast.impl.LifecycleServiceImpl
INFO: /127.0.0.1:5701 [elekCluster] Address[127.0.0.1:5701] is STARTED
16:01:40,149  INFO HazelcastTest:35 - test is begining
28.Eyl.2012 16:01:40 com.hazelcast.config.XmlConfigBuilder
INFO: Looking for hazelcast.xml config file in classpath.
28.Eyl.2012 16:01:40 com.hazelcast.config.XmlConfigBuilder
INFO: Using configuration file /C:/dev/WORKSPACE_Myeclipse/elek_workspace/elek/elek_core_service/target/test-classes/hazelcast.xml in the classpath.
28.Eyl.2012 16:01:40 com.hazelcast.system
INFO: /127.0.0.1:5702 [elekCluster] Hazelcast 1.9.4.8 (20120209) starting at Address[127.0.0.1:5702]
28.Eyl.2012 16:01:40 com.hazelcast.system
INFO: /127.0.0.1:5702 [elekCluster] Copyright (C) 2008-2011 Hazelcast.com
28.Eyl.2012 16:01:40 com.hazelcast.impl.LifecycleServiceImpl
INFO: /127.0.0.1:5702 [elekCluster] Address[127.0.0.1:5702] is STARTING
28.Eyl.2012 16:01:40 com.hazelcast.impl.TcpIpJoiner
INFO: /127.0.0.1:5702 [elekCluster] connecting to Address[127.0.0.1:5703]
28.Eyl.2012 16:01:40 com.hazelcast.impl.TcpIpJoiner
INFO: /127.0.0.1:5702 [elekCluster] connecting to Address[127.0.0.1:5701]
28.Eyl.2012 16:01:40 com.hazelcast.nio.InSelector
INFO: /127.0.0.1:5701 [elekCluster] 5701 is accepting socket connection from /127.0.0.1:63486
28.Eyl.2012 16:01:40 com.hazelcast.nio.InSelector
INFO: /127.0.0.1:5701 [elekCluster] 5701 accepted socket connection from /127.0.0.1:63486
28.Eyl.2012 16:01:40 com.hazelcast.nio.ConnectionManager
WARNING: /127.0.0.1:5701 [elekCluster] Two connections from the same endpoint Address[127.0.0.1:5702], acceptTypeConnection=true,  now accept=false
28.Eyl.2012 16:01:40 com.hazelcast.nio.InSelector
INFO: /127.0.0.1:5702 [elekCluster] 5702 is accepting socket connection from /127.0.0.1:63479
28.Eyl.2012 16:01:40 com.hazelcast.nio.InSelector
INFO: /127.0.0.1:5702 [elekCluster] 5702 accepted socket connection from /127.0.0.1:63479
28.Eyl.2012 16:01:40 com.hazelcast.cluster.ClusterManager
INFO: /127.0.0.1:5702 [elekCluster] Removing Address Address[127.0.0.1:5701]
28.Eyl.2012 16:01:45 com.hazelcast.impl.TcpIpJoiner
INFO: /127.0.0.1:5702 [elekCluster] 

Members [1] {
    Member [127.0.0.1:5702] this
}
... 
```

我会很感激任何帮助，在此先感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:42:57.820

请参阅邮件组中的相关[邮件线程](https://groups.google.com/forum/?fromgroups=#!topic/hazelcast/HX7hBmcmsBY)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:16:48.113

当我将 hazelcast 的版本从 1.9.4.8 升级到 2.3.1 时，问题就消失了。

# spring - Mockito 注入不适用于构造函数和 setter 一起模拟

> ID：12668289
> 
> 赞同：12
> 
> 时间：2012-10-01T06:12:35.533
> 
> 标签：spring, constructor, code-injection, mockito, setter

我有一个类，它的成员通过构造函数注入，其他成员通过设置器注入。我似乎无法让 Mockito 注入二传手。构造函数注入被模拟得很好，但设置器返回为空。当我将 setter-ed 成员翻转到构造函数注入时，一切都很好。这是原始生产代码：

```
@Autowired
private BetRepository betRepository;

public void setBetRepository(BetRepository betRepository) {
this.betRepository = betRepository;
}

public TournamentScoringCache(TournamentScoringCacheInitializer cacheInitializer,
        ScoringEngineInitializer scoringEngineInitializer) {
    tournamentUserStates = cacheInitializer.initCache();
    scoringEngines = scoringEngineInitializer.initEngines();
}

public <T extends SideScore> void updateGameScore(Long tournamentId, Long gameId, MatchScore<T> score) {
    Map<Long, UserTournamentState> userStates = tournamentUserStates.get(tournamentId);
    ScoringEngine<?> scoringEngine = scoringEngines.get(tournamentId);
    List<Bet> bets = betRepository.getBetsByGameId(gameId);  //HERE IS WHERE I GET THE NPE
....
} 
```

测试代码：

```
@Mock
BetRepository betRepository;
@Mock
TournamentScoringCacheInitializer cacheInitializer;
@Mock
ScoringEngineInitializer engineInitializer;

@InjectMocks
private TournamentScoringCacheAndDB tournamentScoringCache;

@Test
public void testUpdateGameScore() {
....        
when(cacheInitializer.initCache()).thenReturn(utss);
    when(betRepository.getBetsByGameId(1L)).thenReturn(createBets());
    when(engineInitializer.initEngines()).thenReturn(createEngines());
    when(engine.getBetScore(bet1, score)).thenReturn(betScore);
    when(engine.getBetScore(bet2, score)).thenReturn(betScore2);

    tournamentScoringCache.updateGameScore(tournamentId, gameId, score);
....
} 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-01T06:58:48.940

是的，@InjectMocks 注释使 Mockito 要么进行构造函数注入，要么进行 setter/field 注入，但从不两者兼而有之。选择的规则非常复杂，这也是我尽可能避免使用@InjectMocks 的原因之一。

总而言之，Mockito FIRST 从类拥有的构造函数中选择一个构造函数，然后分析该构造函数是否可以用于构造函数注入。它选择的那个永远是具有最多参数的那个。如果有多个具有相同数量参数的构造函数，则不确定选择哪一个。

如果 CHOSEN 构造函数的一个或多个参数的类型是原始类型、最终类或私有类，则不会使用构造函数注入。即使有其他可以使用的构造函数。

如果不使用构造函数注入，或者如果唯一的构造函数是默认构造函数，则将使用 setter/field 注入。但是 setter/field 注入永远不会与构造函数注入一起使用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-07-12T12:04:13.850

尽管强烈建议使用构造函数注入，并且我强烈建议不要混合注入方法，但我遇到过这样一个我无法重构的类。要解决此问题，[请调用`initMocks`explicity](https://mhaligowski.github.io/blog/2014/05/30/mockito-with-both-constructor-and-field-injection.html)。例如：

```
@InjectMocks
private ThingWithMixedDependencies thing;

@Mock
private FieldInjected secondDependency;

@BeforeEach
void setUp() {
  // This cannot be a mocked field or else it will reinitialise thing.
  ConstructorInjected firstDependency = Mockito.mock(ConstructorInjected.class);
  thing = new ThingWithMixedDependencies(firstDependency);
  MockitoAnnotations.initMocks(this);
}

@Test
void checkDependencies() {
  assertThat(thing.getFirstDependency(), is(notNullValue()));
  assertThat(thing.getSecondDependency(), is(notNullValue()));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-04T18:07:07.787

这是 mockito 框架想要的。请参阅此[Github 问题](https://github.com/mockito/mockito/issues/195)。

我发现如果您从任何其他类扩展您的测试类（我创建了一个具有有意义名称和小注释的空类），则可以绕过此行为。

我不知道确切原因，但我相信在扩展测试类的情况下，任何内部例程都会进行两次注入。可能是因为 mockito 遍历类 hiracy 并且有一个内部例程，该例程在第一次和第二次注入构造函数时，他进行了 setter/property 注入。只是一个猜测。如果我有时间，我会看看 mockito 的实现。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-11-25T15:03:29.000

在这种情况下，最简单的解决方法是使用。这将注入基于构造函数的模拟以及基于设置器的模拟：

```
 @Before
  public void setUp() throws Exception {
    MockitoAnnotations.initMocks(this);
  } 
```

# php - 使用 Jquery 和 PHP 进行排序

> ID：12668290
> 
> 赞同：0
> 
> 时间：2012-10-01T06:12:37.947
> 
> 标签：php, jquery, mysql

以下是我的 Jquery 代码：

```
jQuery(document).ready(
            function() {
                jQuery("#document-list-1").sortable({
                    update : function () {
                        serial = jQuery('#document-list-1').sortable('serialize');
                        jQuery.ajax({
                        url: "/?module=website_documents&action=reorder_website_document_by_dragdrop&website_id=18374",
                        type: "post",
                        data: serial,
                        error: function(){
                            alert("there is an error with AJAX");
                        }
                    });
                }
            });
        });
        jQuery(document).ready(
                function() {
                    jQuery("#documentChildList").sortable({
                        update : function () {
                            serial = jQuery('#documentChildList').sortable('serialize');
                            jQuery.ajax({
                            url: "/?module=website_documents&action=reorder_website_document_by_dragdrop&website_id=18374",
                            type: "post",
                            data: serial,
                            error: function(){
                                alert("there is an error with AJAX");
                            }
                        });
                    }
                });
            }); 
```

HTML 代码：

```
<ul id="document-list-1">
  <li><img src="images/move.jpg">Test1
   <ul id="documentChildList">
      <li><img src="images/move.jpg">test2</li>
      <li><img src="images/move.jpg">test3</li>
    </ul>
  </li>
</ul> 
```

对于父类别排序工作正常。但是对于子类别，在 IE8 中，当我单击它时，它的图像（即 move.jpg）会移动到右侧，并且整个列表以及父类别也会上下移动。

如果我删除 'document-list-1' 的 jQuery 代码，则子类别的排序也可以正常工作，但父类别排序不起作用。

不知道出了什么问题。

# excel - 在 Excel VBA 中使用多个条件搜索记录

> ID：12668294
> 
> 赞同：0
> 
> 时间：2012-10-01T06:13:28.570
> 
> 标签：excel, vba

我搜索了许多博客，但仍然无法有效地找到解决方案。请帮我。

我有这样的工作表数据

```
Recipie Ingredient      No of Grams     Ingredient Cost  
A10     OREGANO          0.25 gr        10  
A10     OSTUR           60.00 gr        11  
A10     SÓSA            65.50 gr        14  
Á10     HAKK            38.00 gr        18 
```

如果已经存在成分，我想更新配方的成分成本。否则我需要插入一条新记录。

我可以通过使用简单的 for 循环并检查匹配配方，然后在该配方中搜索成分并更新来做到这一点。我试过了，效果很好。我的问题是当行数增加到 10K 时，搜索将对所有 10K 行一一运行。

我正在寻找一种解决方案，它允许我通过在搜索中指定多个列来搜索记录并直接找到该单个记录，而不是扫描每一行。

在自动过滤器中，过滤器在后台发生，当宏运行时，我能够看到过滤器正在发生。我希望工作表显示所有记录。

请帮我 。

数据结构如下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T23:45:49.990

我想提出一些建议： 1\. 在模块级别将 dCompare 声明为 Dictionary 2\. 在您填写字典的过程中创建一个新的 dCompare 实例：

```
Set dCompare = New Dictionary 
```

3.将构成 KEY 的所有值转换为字符串 `CStr(Value1)`，...

1.  当它们不再有用时丢弃所有对象（引号不起作用？？？）：

    If Not dCompare Is Nothing 然后设置 dCompare = Nothing

5.以正确的方式声明你的论点：

```
findCorrelate(ByVal value1 As String, ByVal value2 As String) As Long 
```

并不是：

我也喜欢使用这个非常强大的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:48:52.947

使用该方法而不是循环您可能会很幸运`Find`，但是这些天我发现自己`Dictionary`越来越多地使用该对象，尤其是对于像这样的任务。您需要从“工具”菜单启用“Microsoft Scripting Runtime”作为参考，然后它很简单，例如：

```
Dim dCompare As New Dictionary 
....
For i = 2 To bottomRow
    dCompare.Add (Worksheets("...").Range("L" & i).value & Worksheets("...").Range("I" & i).value), i
Next i 
```

基本上你可以随心所欲地填写它，但我只是将我需要的工作表值作为键连接起来，并将行号作为值。然后进行检索：

```
Function findCorrelate(ByVal value1, value2 As String) As Long
Dim oppositeRow As Long
    oppositeRow = dCompare.Item(value1 & value2)
findCorrelate = oppositeRow
End Function 
```

您输入需要搜索的值（它们一起是键），如果存在，它将为您吐出行号作为值。否则它将返回 0（但您可能更喜欢 -1）。这样你只需要循环一次。至少，您会看到这样做的执行时间显着减少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T09:44:17.940

正如我在上面的评论中所说，这是您应该访问的典型功能（即使您更喜欢使用 Excel 作为前端）。我在上面看到的是一个表格结构，在输入电子表格之前要求查询食物。

MS Access 允许您创建索引和基于索引的搜索，其目的是在您拥有许多记录时显着提高您的性能。（系统将根据索引记录进行搜索，而不需要遍历每条记录）。如果您正在谈论具有 10K 记录的表，我怀疑 Access 无疑会更好。

虽然我不建议这样做，但您可以通过添加对文件的库引用，使用 ADODB 或 DAO（Access 使用本机 DAO）将 Excel 工作表视为数据库表。通过这种方式，您可以使用 SQL 对数据表执行所有 CRUD 操作。
我不推荐它的原因是因为 Excel 并不打算被 RDBMS 取代（例如，不支持关系数据库结构，这使得它更难支持，并且你需要管理你的引用/数据完整性通过 VBA 或手动。
学习如何在 Access 中做一些基本的事情可能需要你 1 天的时间，但是通过对所有内容进行编程（包括检查和从另一个工作表中检索数据等）来维护这个系统可能需要你永远。

另外：
代码会很慢的原因是因为我怀疑您从 Excel 表中逐行读取并明确检查了每条记录。
如果您仍然希望使用循环使该代码运行得更快，则需要将整个范围读入一个数组并通过循环遍历该数组来执行内存检查。
我怀疑代码执行是可以接受的，但您可以通过设置计时器来检查其性能，并在状态栏 (application.statusbar) 上显示计数器的进度通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T14:49:38.287

为什么不使用简单的 vlookup 来查找另一个工作表（或同一工作表上的另一个范围）中成分的价格（每单位）？

这意味着对于价格更新或成分添加，您只需要在一个位置更改/添加一些东西。然后甚至可以手动完成，而不是通过 VBA。

# asp.net - 每次打开解决方案时，Visual Studio 2010 都会崩溃

> ID：12668295
> 
> 赞同：0
> 
> 时间：2012-10-01T06:13:38.190
> 
> 标签：asp.net, visual-studio-2010

我在 Visual Studio 2010 中有一个 Web 应用程序。每次打开解决方案并在我的 Web 应用程序中设计特定页面时，Visual Studio 都会崩溃。所有其他页面都运行顺利！问题签名是

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: devenv.exe
  Application Version:  10.0.30319.1
  Application Timestamp:    4ba1fab3
  Fault Module Name:    msenv.dll
  Fault Module Version: 10.0.30319.1
  Fault Module Timestamp:   4ba1fd94
  Exception Code:   c0000005
  Exception Offset: 00023169
  OS Version:   6.1.7600.2.0.0.256.1
  Locale ID:    1033 
```

有关该问题的其他信息：

```
LCID:   1033 
```

我收到此错误消息“ **devenv.exe 中 0x775e45bb 处的未处理异常：0xC015000F：被停用的激活上下文不是最近激活的。** ”当我调试错误时...任何人都可以帮助我解决我陷入的这个错误它....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:18:06.137

您可以执行一些步骤，并且可能会摆脱这些步骤。

1.  在您的项目目录中找到与您的项目同名但以 结尾的隐藏文件`.suo`，例如`ProjectName.suo`并将其删除。
2.  转到您的 tempo 目录并通过删除那里的文件来清除它。要找到它，请键入`cd %temp%`
3.  清除位于`c:\WINDOWS\Microsoft.NET\Framework\`被调用的子目录中的 asp.net 临时文件`Temporary ASP.NET Files`
4.  如果以上所有方法都不起作用，您最终可以清除 vs 的类缓存。这位于您的个人数据文件夹中，在 Application data/microsoft/visualstudio 下，并在那里搜索目录`ReflectedSchemas`并清除它们。VS 将再次创建它们。

从这一切来看，第一步可能会解决您的问题。

# c# - 当我对我的班级进行抽样时，避免 GUI 卡住的最佳方法是什么

> ID：12668300
> 
> 赞同：-2
> 
> 时间：2012-10-01T06:13:55.453
> 
> 标签：c#, winforms

```
 private void bgWSniffer_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        dumpFile = e.UserState as DumpFile;
        lblNumberOfPacketsTabSniffer2.Text = dumpFile._packetsCount.ToString("#,##0");
        lblTrafficRateTabSniffer2.Text = (dumpFile._bitsPerSecond * 
    } 
```

在这个函数中，我正在对我的课程进行采样，但是由于高速我的 GUI 卡住了，如果我想每 500 毫秒对我的课程进行一次采样，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:15:56.603

你可能想看看

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

> BackgroundWorker 类允许您在单独的专用线程上运行操作。下载和数据库事务等耗时的操作可能会导致您的用户界面 (UI) 在运行时似乎停止响应。当您需要响应式 UI 并且面临与此类操作相关的长时间延迟时，BackgroundWorker 类提供了一种方便的解决方案。

# c# - 使用 Kofax 和 C# 进行 OCR

> ID：12668301
> 
> 赞同：1
> 
> 时间：2012-10-01T06:13:56.380
> 
> 标签：c#, ocr, kofax

在 C#.Net 项目中，我们有 OCR 模块来读取纸质表格并将详细信息保存在 SQL Server 数据库中。为此，我如何使用 Kofax 产品（可能是 Kofax Capture）？请分享您使用 Kofax 和 C# 进行 OCR 处理的经验。

谢谢，

查图拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:35:06.493

Kofax Capture 最终可能会完全替代您当前的 .NET 应用程序。它开箱即用，内置 OCR 和数据库导出模块，以及许多其他内置和附加功能，可以帮助清理文档以进行识别、导出、导入和其他功能。您需要考虑的最重要的事情是扫描仪兼容性、扫描量和硬件要求。这个软件我用过很多次，而且很满意。

尝试对表单进行 OCR 时要考虑的最重要的事情是，对于给定的“类型”表单，它们都是相同的。如果所有表单的布局从一个实例到下一个实例变化很大，除非您能够考虑所有不同的变化（可能需要大量工作），否则您将遇到问题。可能是审查或修改表单布局以使其更适用于 OCR 的好时机。

我还为 Kofax Capture 编写了 C# 扩展。我建议对此进行培训，即使文档中有一些相当不错的示例，并且它附带了许多不同扩展的源代码。很多示例都在 VB.NET 或 VB6 中，但据我所知，您绝对可以在 Kofax Capture 的最新版本中将 C# 用于任何内容。Kofax Support 在这方面也对我有所帮助。

# web2py - 在实际文件数据上传之前检查上传文件大小

> ID：12668310
> 
> 赞同：1
> 
> 时间：2012-10-01T06:15:27.480
> 
> 标签：web2py

在我的 web2py 控制器中，我正在访问文件数据，例如：

```
vfile = request.post_vars.video.file 
```

但是在上传实际文件数据`Content-Length` *之前*如何检查？上传文件后检查文件大小对我来说不是一个好主意。

注意：我没有使用`FORM()`帮助程序和数据库，而只是使用原始的常规文件上传。有什么方法可以连接到 web2py 内部来做我需要的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:48:01.837

我认为您必须在浏览器中检测到它并将其传递给 web2py。这就是我在服务器端处理它的方式。我知道您在上传之前询问了尺寸，但我认为这可能会有所帮助。

```
#insert file in db
image = db.image.file.store(request.vars["files[]"].file, request.vars["files[]"].filename)
id = db.image.insert(file=image,title=request.vars["files[]"].filename)
#get filename in db
record = db.image[id]
#find size
path_list = []
path_list.append(request.folder)
path_list.append('uploads')
path_list.append(record['file'])
print os.path.getsize(os.path.join(*path_list)) 
```

# php - 将 HTML Checkbox 函数转换为 PHP 输出

> ID：12668312
> 
> 赞同：0
> 
> 时间：2012-10-01T06:15:44.210
> 
> 标签：php, html

我有一个接受 2 个参数的函数（$group，$array）

$group = 输入属性的“名称” $array = 复选框值的数组

```
function checkboxes($group, $array) {
    $string = NULL;
    $group = (string)$group."[]";
    foreach($array as $key => $value) {
        $string .= "<br /><input type='checkbox' id=".$value." name='".$group."'        value='".$value."' /><label for=".$value.">$value</label>";
    }
    return $string;
} 
```

我要做的是将其转换为正确的 HTML，以便我可以处理脚本中的值。

这是输入：

```
checkboxes("class", array("Warrior","Mage","Priest","Rogue"));

$boxes = $_POST['class'];
for ($i=0; $i<count($boxes); $i++) {
    echo $boxes[$i];
} 
```

输出：“R”（当同时检查多个时）

任何帮助都会很棒，如果我忘记了什么，对不起。

这是作业，所以请不要给我违反 stackoverflow 条款/我的学校荣誉代码的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:21:57.487

试试这个。它似乎打印了所有选中的框。

```
<?php
function checkboxes($group, $array) {
    $string = NULL;
    $group = (string)$group."[]";
    foreach($array as $key => $value) {
        $string .= "<br /><input type='checkbox' id=".$value." name='".$group."'        value='".$value."' /><label for=".$value.">$value</label>";
    }
    return $string;
}

if( isset( $_POST[ 'class' ] ) ) {
    $boxes = $_POST['class'];
    for ($i=0; $i<count($boxes); $i++) {
        echo $boxes[$i] . '<br />';
    }

}
?>
<form action="t23.php" method="POST">
    <?php
    echo checkboxes("class", array("Warrior","Mage","Priest","Rogue"));
    ?>
    <input type="submit"  name="btnOutput" value="submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:28:54.403

我不知道您的安排在您的页面中如何，但是：

```
<?php
    if(isset($_POST) && !empty($_POST['class'])){
        echo 'SELECTED: <br /><br />';
        $boxes = $_POST['class'];
        for ($i=0; $i<count($boxes); $i++) {
            echo $boxes[$i].'<br />';
        }

    }

    function checkboxes($group, $array) {
        $string = NULL;
        $group = (string)$group."[]";
        foreach($array as $key => $value) {
            $string .= "<br /><input type='checkbox' id=".$value." name='".$group."'        value='".$value."' /><label for=".$value.">$value</label>";
        }
        return $string;
    }
    echo '<form method="post">';
    $boxes = checkboxes("class", array("Warrior","Mage","Priest","Rogue"));
    echo $boxes;
    echo '<input type="submit">';
?> 
```

# jquery - 更改 div 位置

> ID：12668313
> 
> 赞同：2
> 
> 时间：2012-10-01T06:15:54.203
> 
> 标签：jquery, css, html

我在页面上有 20 个 div，看起来像并排的平铺。我想通过更改 jquery Mansory 代码来移动这些 div 位置（在实时页面上）。例如：

```
<div>1</div> <div>2</div> <div>3</div> <div>4</div> <div>5</div> <div>6</div> 
```

我已经编写了上面的代码，它以以下方式显示内容（借助 css - float）：

1 2 3 4 5 6 7 8 9 10 11 12 13 14

在不改变 HTML 结构的情况下，什么脚本或 css 将帮助我在以下结构中显示内容：-

1 2 7 8 13 14
3 4 9 10 ...
5 6 11 12
谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:40:22.053

试试这个很酷的 jquery 插件 - [http://masonry.desandro.com/index.html](http://masonry.desandro.com/index.html)

从现场：砌体垂直排列元素，将每个元素定位在网格中的下一个开放位置。结果使不同高度的元素之间的垂直间隙最小化，就像石匠在墙上安装石头一样。

干杯!

编辑：试试[这个](http://isotope.metafizzy.co/custom-layout-modes/category-rows.html)同位素插件 - 根据它们的类别将元素排列成行。

您可以对 div 进行分类，并让插件进行相应的排序。上面的链接根据类名重新排列了 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:22:08.070

用它对所有人做...

```
<!doctype html public "-//W3C//DTD HTML 3.2 Final//EN">
    <html>
       <head>
          <style>
          .Text{
            font-family: Verdana,Arial,Sans-serif,'Times New Roman';
            font-size: 9pt;
            font-weight: normal;
            font-style: normal;
            color: #666;
            text-decoration: none;
          }

          .alertsBoxTitle{
            font-family: Verdana,Arial,Sans-serif,'Times New Roman';
            font-size: 9pt;
            font-weight: bold;
            font-style: normal;
            color: #ffffff;
            text-decoration: none;
          }
          .alertsBox{
            background: #ECF1F9;
            border: 1px #a1bcdf solid;
          }
          body{
           overflow:hidden;
          }
          </style>

          <script language="javascript">
          // browser detection
          var agt=navigator.userAgent.toLowerCase();
          var is_major = parseInt(navigator.appVersion);
          var is_minor = parseFloat(navigator.appVersion);

          var is_nav  = ((agt.indexOf('mozilla')!=-1) && (agt.indexOf('spoofer')==-1)
                      && (agt.indexOf('compatible') == -1) && (agt.indexOf('opera')==-1)
                      && (agt.indexOf('webtv')==-1) && (agt.indexOf('hotjava')==-1));
          var is_nav4 = (is_nav && (is_major == 4));
          var is_nav6 = (is_nav && (is_major == 5));
          var is_nav6up = (is_nav && (is_major >= 5));
          var is_ie     = ((agt.indexOf("msie") != -1) && (agt.indexOf("opera") == -1));

          var dragapproved=false
          var z,x,y
          var maxleft,maxtop,maxright,maxbottom;

          function setdragBounds()
          {
              // you can set the bounds of the draggable area here
              maxleft = 10;
              maxtop = 10;
              maxright = document.body.clientWidth - 10;
              maxbottom = document.body.clientHeight - 100;
          }

          function move(e)
          {
               var tmpXpos = (!is_ie)? temp1+e.clientX-x: temp1+event.clientX-x;
               var tmpYpos = (!is_ie)? temp2+e.clientY-y : temp2+event.clientY-y;
               if (dragapproved)
               {
                  z.style.left = tmpXpos;
                  z.style.top = tmpYpos;

                  if (tmpXpos < maxleft)
                      z.style.left = maxleft;

                  if (tmpXpos > maxright)
                      z.style.left = maxright;

                  if (tmpYpos < maxtop)
                      z.style.top = maxtop;
                  if (tmpYpos > maxbottom)
                      z.style.top = maxbottom;

                  return false
               }
          }

          function drags(e)
          {
                 if (!(is_ie)&&!(!is_ie)) return

                 var firedobj=(!is_ie)? e.target : event.srcElement
                 var topelement=(!is_ie)? "HTML" : "BODY"

                 while (firedobj.tagName!=topelement && firedobj.className!="drag" && firedobj.tagName!='SELECT' && firedobj.tagName!='TEXTAREA' && firedobj.tagName!='INPUT' && firedobj.tagName!='IMG')
                 {
                     // here you can add the elements that cannot be used for drag . using their class name or id or tag names
                     firedobj=(!is_ie)? firedobj.parentNode : firedobj.parentElement
                 }

                 if (firedobj.className=="drag")
                 {
                     dragapproved = true
                     z = firedobj
                     var tmpheight = z.style.height.split("px")
                     maxbottom = (tmpheight[0])?document.body.clientHeight - tmpheight[0]:document.body.clientHeight - 20;

                     temp1 = parseInt(z.style.left+0)
                     temp2 = parseInt(z.style.top+0)
                     x = (!is_ie)? e.clientX: event.clientX
                     y = (!is_ie)? e.clientY: event.clientY
                     document.onmousemove = move

                     return false
                 }
          }

          document.onmousedown=drags
          document.onmouseup=new Function("dragapproved=false")
       </script>
    </head>

    <body>
      <div id="Dialog" style="width:316px;height:119px;max-width:316px;position:relative;top:50px;left:140px; z-index:1000;" class="drag">
        <table width="100%" style="width:315px;height:119px" cellspacing="0" cellpadding="0" class="alertsBox" id="dialog_table">
          <tr style="cursor:move">
            <td class="alertsBoxTitle notselectable" colspan="2" align="left" height="21" style="cursor:move;background-color:#32426F">Drag Me</td>
          </tr>
          <tr>
            <td align="center" colspan="2" height="5"> </td>
          </tr>
          <tr>
            <td align="center" colspan="2">
              <table width="97%"  border="0" cellspacing="0" cellpadding="0" align="center">
                <tr>
                  <td valign='top' align="center">
                    </td>
                </tr>
                <tr>
                  <td valign='top' colspan="2" class="Text">this div can be placed any where</td>
                </tr>
                <tr>
                  <td valign='top' colspan="2" align="center"><br/><input type="button" value="Ok"/></td>
                </tr>
              </table></td>
          </tr>
        </table>
      </div>
    </body>
</html> 
```

[http://mukhesh.mywapblog.com/category/java-script-27/1.xhtml](http://mukhesh.mywapblog.com/category/java-script-27/1.xhtml)

# c# - 在 C# 中实现 runas

> ID：12668319
> 
> 赞同：2
> 
> 时间：2012-10-01T06:16:23.493
> 
> 标签：c#, runas

如何使用 C# 实现 runas /noprofile /netonly /user:@。

System.Diagnostics.ProcessStartInfo 具有用户、域、密码、动词（我们可以在其中使用 runas）等字段，但如何设置 netonly。使用 Cmd 它不需要令牌，但在使用诊断时请求令牌，因为出现安全错误“{“服务器上的安全数据库没有此工作站信任关系的计算机帐户”}”，因为我的系统不是该域中值得信赖的合作伙伴。在 Cmd 中没有遇到这样的问题。我想使用 UI 输入用户信息。由于我的系统不是值得信赖的合作伙伴，我无法使用模拟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:22:14.587

您已尝试使用带有 ProcessStartInfo 的 runas 动词执行新进程。但这与从命令提示符执行 runas 进程不同。

因此，复制您在命令提示符下所做的操作的简单方法是执行传递所有参数的 runas 程序，就像您在命令提示符下执行的操作一样。

```
Process.Start("runas.exe", "/noprofile /netonly ......"); 
```

我不明白你正在尝试的细微差别。但是，如果通过 cmd 运行完全符合您的需要，那么您可以这样做：

```
Process.Start("cmd.exe", "/c runas /noprofile /netonly ......"); 
```

# php - 将 PDO 选择查询存储到 php 变量

> ID：12668325
> 
> 赞同：0
> 
> 时间：2012-10-01T06:16:59.663
> 
> 标签：php, mysql

我想将 PDO 选择查询的结果存储到一个变量中，以便我可以将该变量调用到 INSERT 语句中，

有没有办法做到这一点？

这是我的普通 SQL 代码，我想将其转换为 PDO：

```
$resultbrgy = mysql_query("SELECT BarangayName FROM npos.ref_barangay WHERE BarangayID=$brgy");
$barangayname=mysql_result($resultbrgy, 0); 
```

我很难为 mysql_result 进行转换，这`$barangayname`将是我将用来执行另一个 SQL 的变量，它是一个 INSERT 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:37:51.763

我刚刚解决了我的问题，我将返回的值存储在一个数组中并创建一个 = $variable;

```
 `foreach($result as $row1) {
    }
    $barangayname=$row1['BarangayName'];` 
```

# linux - Postfix邮件发送问题？

> ID：12668328
> 
> 赞同：12
> 
> 时间：2012-10-01T06:17:09.380
> 
> 标签：linux

我在后缀中遇到了一些问题。我没有收到来自 postfix 的任何邮件。日志文件也不显示任何错误日志。日志文件正常。在进一步分析中，我发现邮件将进入但不在 postfix 的活动文件夹中。我在邮件日志文件中只找到一件事：

**后缀/清理[30369]：警告：数据库 /etc/postfix/virtual.db 比源文件 /etc/postfix/virtual 旧**

邮件日志文件的其余部分正常。

我能够找到问题。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-01T06:43:11.630

跑：

```
postmap /etc/postfix/virtual 
```

然后重启后缀。

警告意味着您有文件的文本版本和哈希图版本`virtual`。文本版本是您编辑的人类可读版本，然后您使用它构建一个哈希图，这`postmap`就是 postfix 读取的内容。它只是告诉您，您可能已经对人类可读的内容进行了更改而忘记创建新`.db`内容。

# c - 如果收到所有内容，则执行一个函数，MPI C

> ID：12668332
> 
> 赞同：0
> 
> 时间：2012-10-01T06:17:53.073
> 
> 标签：c, mpi

使用 MPI，在 C 中，当且仅当我在我的主进程 ID 0 中从 N 个处理器接收到所有数据时，我如何才能执行一个函数？

编辑：有没有办法以与发送时相同的顺序接收所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:27:47.053

如果我正确地回答了您的问题，[MPI_Reduce](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Reduce.html)就是您所需要的。

编辑：所以我没有正确回答您的问题。你需要的是[MPI_Gather](http://www.open-mpi.org/doc/v1.5/man3/MPI_Gather.3.php)。在本文档中，您会看到：`Each process (root process included) sends the contents of its send buffer to the root process. The root process receives the messages and stores them in rank order.`希望这能回答您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:31:44.073

尝试查看[MPI_Gather](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Gather.html)函数。调用后，您可以通过以下方式检查条件执行：

```
if (ierr == MPI_SUCCESS) {
  // Execute a function
} 
```

# ruby-on-rails - 如何处理 Ruby on Rails 中的 404 错误？

> ID：12668335
> 
> 赞同：1
> 
> 时间：2012-10-01T06:18:06.620
> 
> 标签：ruby-on-rails

当发生路由错误时，如何编写控制器、路由或视图以呈现 404？

例如，如果用户访问一个 url 地址

`http://0.0.0.0:3000/posts/likes`

`likes`路径不是路由中的方法。如何将其重定向到 404 页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:23:54.533

快速谷歌搜索提供的资源很少。我建议以下两个。

*   [https://github.com/Sharagoz/rails_exception_handler](https://github.com/Sharagoz/rails_exception_handler)
*   [http://ramblinglabs.com/blog/2012/01/rails-3-1-adding-custom-404-and-500-error-pages](http://ramblinglabs.com/blog/2012/01/rails-3-1-adding-custom-404-and-500-error-pages)

虽然我个人没有使用过这些，但我认为 gem 可以为您提供强大的帮助。是的，第二个链接来自现实生活场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:24:13.967

1.在**application_controller.rb中**

```
# ..
rescue_from ActiveRecord::RecordNotFound, :with => :record_not_found

private
def record_not_found(e)
  render ‘errors/not_found’, :status => 404
end 
```

2.创建一个**errors**文件夹和一个名为**not_found.html.erb的文件**

3.将源添加到**application_controller.rb**

```
def record_not_found(e)
  render ‘errors/not_found’, :status => 404, :layout => ‘error’
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T06:32:14.157

Rails 允许您定义自己的“异常应用程序”来处理错误。这是处理错误的一种方法。在`application.rb`：

```
config.exceptions_app = self.routes 
```

然后在您的路线中：

```
match '/404', to: 'errors#not_found'
match '/500', to: 'errors#error' 
```

然后你只需要一个`ErrorsController`with 方法来处理你想要处理的不同错误，以及每个错误的模板文件，`errors.html.erb`如果你想使用它，还需要一个布局文件。

`ActionController::RoutingError`并`ActiveRecord::RecordNotFound`在生产中自动引发 404。

# html - 如何使用@face-font inline 作为内联样式规范？

> ID：12668337
> 
> 赞同：1
> 
> 时间：2012-10-01T06:18:17.027
> 
> 标签：html, css

我试图在页面内添加这个东西，但它不起作用。有没有办法内联指定这些样式？

```
 @font-face {
  font-family: 'Cuprum';
  font-style: normal;
  font-weight: 400;
  src: local('Cuprum'), local('Cuprum-Regular'), url(http://themes.googleusercontent.com/static/fonts/cuprum/v4/sp1_LTSOMWWV0K5VTuZzvQ.woff) format('woff');
}
@font-face {
  font-family: 'Cuprum';
  font-style: normal;
  font-weight: 700;
  src: local('Cuprum Bold'), local('Cuprum-Bold'), url(http://themes.googleusercontent.com/static/fonts/cuprum/v4/SfDyn5tWOk7I1we45jpLKz8E0i7KZn-EPnyo3HZu7kw.woff) format('woff');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:43:53.647

将它们放在`style`元素内部的`head`元素中，例如

```
<!doctype html>
<title>Your title</title>
<style>
  /* put your CSS code here */
</style>
<h1>Hello world</h1> 
```

如果您无法在`head`部件中设置元素（可能是，在以 HTML 格式合成电子邮件时，取决于编写程序），那么您可以尝试将`style`元素放在`body`. 那将是无效的，但它仍然适用于浏览器。

电子邮件客户端是否会识别它并使用可下载字体是一个不同的问题 - 并且取决于客户端。

# javascript - 用于更改表单的 JQuery

> ID：12668338
> 
> 赞同：0
> 
> 时间：2012-10-01T06:18:22.530
> 
> 标签：javascript, jquery, forms

我正在使用 JQuery 来处理未保存的表单数据中的更改，用户进入页面，编辑数据，尝试离开页面而不保存并且它有点工作，因为我在更改表单时收到了对话框： ![在此处输入图像描述](../Images/3bb8f67aa0369dd98d27b0e586b171b1.png)

上面说：“你想离开这个页面吗？你有未保存的数据，你想继续而不保存你的更改吗？”

它运行良好，并且在非常少的代码中提供了很多功能：

```
<script>
    $(function() {
        // Set the unload message whenever any input element get changed.
        $(':input').on('change', function() {
            setConfirmUnload(true);
        });

        // Turn off the unload message whenever a form get submitted properly.
        $('form').on('submit', function() {
            setConfirmUnload(false);
        });
    });

    function setConfirmUnload(on) {
        var message = "Vill du gå vidare utan att spara eventuella ändringar?";
        window.onbeforeunload = (on) ? function() { return message; } : null;
    }
</script> 
```

与我使用的相比，上面看起来比我当前的 Java + JS 组合要好得多，它使用隐藏的表单变量来判断表单数据是否已更改，然后在 Java 和 JS 上进行测试以启用根据我的规范的警告：

![在此处输入图像描述](../Images/3b7b4f4f47e864e7f23f5f0b4d1e21ac.png)

以上是它应该看起来的样子。问题是，我希望用户能够更改表单并将其提交到页面而不会收到警告，并且我还想从警告中排除搜索框“fastseach”，因此可以排除组件吗？以及如何将对话框的显示更改为我自己的？我自己的对话框是这样绘制的：

```
 // is this necessary?
    function doAsk(title, msg, action, command, actionNo, commandNo, search) {  
        document.getElementById("fastsearch").value = search;
        document.actionForm.saveStatus.value = ''
        var funcYes = 'doYes()';
        var funcNo = 'hideDialog()';
        if (title == 'Fel') {
            var s = "<div style=\"position:absolute; z-index:1000001; left:15%; top:75%; font-size: 70% \"><input id=\"dialogaterga\" style=\"font-family:calibri; width:70px; float:right; margin-right:35px;\" type=button onclick=\"javascript:"
                    + funcNo + "\" value=\"Återgå\" /></div>";
            showDialog(title, msg + s);
        } else if (title == 'Varning') {
                var v = "<div style=\"position:absolute; z-index:1000001; left:15%; top:75%\"><input  style=\"font-family:calibri; width:70px\" type=button onclick=\"javascript:"
                        + funcNo
                        + "\" value=\"Nej\" /></div><div style=\"position:absolute; left:70%; top:75%\"><input  id=\"dialogwarnyes\" style=\"font-family:calibri; width:70px\" type=button onclick=\"javascript:doSubmit('"
                        + action + "','" + command + "'); \" value=\"Ja\" /></div>";
            showDialog(title, msg + v);
        } else if (title == 'Information') {
            var i = "<div style=\"position:absolute; z-index:1000001; left:70%; top:75%\"><input type=button class=\"dialogbuttonlink\" id=\"dialogstang\" onclick=\"javascript:hideDialog()\" value=\"St&auml;ng\" /></div>";
            showDialog(title, msg + i, true);
        } else if (title == 'Fel2') {
            title = 'Fel';
            var s2 = "<div style=\"position:absolute; z-index:1000001; left:15%; top:75%; font-size: 70% \"><input id=\"dialogaterga\" style=\"font-family:calibri; width:70px; float:right; margin-right:35px;\" type=button onclick=\"javascript:"
                    + funcNo + "\" value=\"OK\" /></div>";
            showDialog(title, msg + s2);
        }
        initFocus();    
    }
function showDialog(title, message, autohide) {
    //alert("showdialog");
    var type = 'prompt';
    var dialog;
    var dialogheader;
    var dialogclose;
    var dialogtitle;
    var dialogcontent;
    var dialogmask;
    var link1
    var link2

    if (!document.getElementById('dialog')) {
        dialog = document.createElement('div');
        dialog.id = 'dialog';
        link2 = document.createElement('a');
        link2.id = 'modalFocusLink';
        link2.setAttribute('onclick', 'return false');
        link2.setAttribute('onblur', 'redirectFocus');
        link2.setAttribute('href', '#');
        dialog.appendChild(link2);
        dialogheader = document.createElement('div');
        dialogheader.id = 'dialog-header';
        dialogtitle = document.createElement('div');
        dialogtitle.id = 'dialog-title';
        dialogclose = document.createElement('div');
        dialogclose.id = 'dialog-close'
        dialogcontent = document.createElement('div');
        dialogcontent.id = 'dialog-content';
        dialogmask = document.createElement('div');
        dialogmask.id = 'dialog-mask';
        document.body.appendChild(dialogmask);
        document.body.appendChild(dialog);
        dialog.appendChild(dialogheader);
        dialogheader.appendChild(dialogtitle);
        dialogheader.appendChild(dialogclose);
        dialog.appendChild(dialogcontent);
        dialogclose.setAttribute('onclick', 'hideDialog()');
        dialogclose.onclick = hideDialog;
        link1 = document.createElement('a');
        link1.id = 'modalBlurLink';
        link1.setAttribute('onclick', 'return false');
        link1.setAttribute('onfocus', 'redirectFocus');
        link1.setAttribute('href', '#');

        dialog.appendChild(link1);

    } else {
        dialog = document.getElementById('dialog');
        dialogheader = document.getElementById('dialog-header');
        dialogtitle = document.getElementById('dialog-title');
        dialogclose = document.getElementById('dialog-close');
        dialogcontent = document.getElementById('dialog-content');
        dialogmask = document.getElementById('dialog-mask');
        dialogmask.style.visibility = "visible";
        dialog.style.visibility = "visible";
    }
    dialog.style.opacity = .00;
    dialog.style.filter = 'alpha(opacity=0)';
    dialog.alpha = 0;
    var width = pageWidth();
    var height = pageHeight();
    var left = leftPosition();
    var top = topPosition();
    var dialogwidth = dialog.offsetWidth;
    var dialogheight = dialog.offsetHeight;
    var topposition = 33;// top + (height / 3) - (dialogheight / 2);
    var leftposition = width - dialogwidth - 30; // left + (width / 2) -
                                                    // (dialogwidth / 2);
    dialog.style.top = topposition + "px";
    dialog.style.left = leftposition + "px";
    dialogheader.className = type + "header";
    dialogtitle.innerHTML = title;
    dialogcontent.className = type;
    dialogcontent.innerHTML = message;
    var content = document.getElementById(WRAPPER);
    dialogmask.style.height = content.offsetHeight + 'px';

    if (title == 'Information') {
        dialog.alpha = 100;
        dialog.style.opacity = (1.0);
        dialog.style.filter = 'alpha(opacity=' + 100 + ')';
        dialog.style.visibility = "visible";
        dialogmask.style.visibility = "hidden";
        var fodi = document.getElementById("dialogstang");
        fodi.focus();
    } else {
        if (title == 'Fel') {
            var fo = document.getElementById("dialogaterga");
            fo.focus();
        } else if (title == 'Varning') {
            var vafo = document.getElementById("dialogwarnyes");
            vafo.focus();
        }
        dialog.timer = setInterval("fadeDialog(1)", TIMER);

        if (autohide) {
            dialogclose.style.visibility = "hidden";
            // window.setTimeout("hideDialog()", (autohide * 1000));
        } else {
            dialogclose.style.visibility = "visible";
        }
        if (title == 'invisible')
            dialog.style.visibility = "hidden";
    }

} 
```

我想排除的组件可能是“更新”按钮，因为按下“更新”不应激活警告，只会离开页面。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:57:49.707

无法更改该浏览离开警告对话框的外观。它是浏览器提供的本机工具。事实上，在 Firefox[版本 4](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)上，您甚至无法通过提供自己的字符串作为返回值来自定义消息，而是总是这样说：

> “此页面要求您确认是否要离开 - 您输入的数据可能不会被保存。”

至于从浏览离开警告中排除页面上的各种组件，这不仅仅是扩展您已经使用的技术的问题，在您的用户事件处理程序中禁用 onbeforeunload 事件吗？例如，当单击更新按钮或搜索按钮时，您可以首先确保通过将 onbeforeunload 事件分配给 null 或无操作函数来“取消挂钩”。

顺便说一下，看看你正在做的所有原始 DOM 构造（所有`appendChild()`调用和`setAttribute()`调用等），我建议你看看一些客户端模板框架。 [这是一个看起来不错的替代品列表](http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more)。[来自 Google 的Angular.js](http://angularjs.org/)也很酷，尽管它本身不仅仅是一个模板系统。

# php - 在php中添加图像

> ID：12668342
> 
> 赞同：0
> 
> 时间：2012-10-01T06:19:38.257
> 
> 标签：php, html, wordpress

我有一个 Wordpress 插件，它显示了谷歌的评价片段。1.0 - 5.0，我想在评分之后为所选值添加一个图像，但它没有。

到目前为止，我已经让它加载图像，但它没有显示在我想要的位置，这就是我卡住的地方。

[示例图片](http://i.stack.imgur.com/Qxs4Z.gif)

这是我尝试添加的：

```
if ($rating == "5.0"){ print("<IMG SRC ="stars/5-0.png>");} 
```

这是插件代码：

```
<?php
$prefix = 'pk_rs_';

DEFINE ('PK_RS_DEFAULT_RATING', '-');

DEFINE ('PK_RS_DISPLAY', true);

$pk_rs_meta_box = array(
    'id' => 'pk_rich_snippet_review',
    'title' => 'Google Rich Snippets: Reviews',
    'page' => 'post',
    'context' => 'normal',
    'priority' => 'high',
    'fields' => array(
        array(
            'name' => 'Rating',
            'desc' => 'Product rating, from 1 to 5.',
            'id' => 'rating',
            'type' => 'select',
            'options' => array('-', '1.0', '1.5', '2.0', '2.5', '3.0', '3.5', '4.0', '4.5', '5.0')
        ),  
        array(
            'name' => 'Author',
            'desc' => 'Author display name.',
            'id' => 'author',
            'type' => 'text',
            'std' => ''
        )

    )
);

add_action('admin_menu', 'pk_rich_snippet_add_box');

// Add meta box
function pk_rich_snippet_add_box() {
    global $pk_rs_meta_box;

    add_meta_box($pk_rs_meta_box['id'], $pk_rs_meta_box['title'], 'pk_rich_snippet_show_box', $pk_rs_meta_box['page'], $pk_rs_meta_box['context'], $pk_rs_meta_box['priority']);
}

// Callback function to show fields in meta box
function pk_rich_snippet_show_box() {
    global $pk_rs_meta_box, $post;

    // Use nonce for verification
    echo '<input type="hidden" name="pk_rich_snippet_nonce" value="', wp_create_nonce(basename(__FILE__)), '" />';

    echo '<table class="form-table">';

    foreach ($pk_rs_meta_box['fields'] as $field) {
        // get current post meta data
        $meta = get_post_meta($post->ID, $field['id'], true);

        echo '<tr>',
                '<th style="width:20%"><label for="', $field['id'], '">', $field['name'], '</label></th>',
                '<td>';
        switch ($field['type']) {
            case 'text':
                echo '<input type="text" name="', $field['id'], '" id="', $field['id'], '" value="', $meta ? $meta : $field['std'], '" size="30" style="width:97%" />',
                    '<br />', $field['desc'];
                break;
            case 'textarea':
                echo '<textarea name="', $field['id'], '" id="', $field['id'], '" cols="60" rows="4" style="width:97%">', $meta ? $meta : $field['std'], '</textarea>',
                    '<br />', $field['desc'];
                break;
            case 'select':
                echo '<select name="', $field['id'], '" id="', $field['id'], '">';
                foreach ($field['options'] as $option) {
                    echo '<option', $meta == $option ? ' selected="selected"' : '', '>', $option, '</option>';
                }
                echo '</select>', '<br />', $field['desc'];
                break;
            case 'radio':
                foreach ($field['options'] as $option) {
                    echo '<input type="radio" name="', $field['id'], '" value="', $option['value'], '"', $meta == $option['value'] ? ' checked="checked"' : '', ' />', $option['name'];
                }
                break;
            case 'checkbox':
                echo '<input type="checkbox" name="', $field['id'], '" id="', $field['id'], '"', $meta ? ' checked="checked"' : '', ' />', 
                '<br />', $field['desc'];
                break;
        }
        echo    '<td>',
            '</tr>';
    }

    echo '</table>';
}

add_action('save_post', 'pk_rs_save_data');

// Save data from meta box
function pk_rs_save_data($post_id) {
    global $pk_rs_meta_box;

    // verify nonce
    if (!wp_verify_nonce($_POST['pk_rich_snippet_nonce'], basename(__FILE__))) {
        return $post_id;
    }

    // check autosave
    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {
        return $post_id;
    }

    // check permissions
    if ('page' == $_POST['post_type']) {
        if (!current_user_can('edit_page', $post_id)) {
            return $post_id;
        }
    } elseif (!current_user_can('edit_post', $post_id)) {
        return $post_id;
    }

    foreach ($pk_rs_meta_box['fields'] as $field) {
        $old = get_post_meta($post_id, $field['id'], true);
        $new = $_POST[$field['id']];

        if ($new && $new != $old) {
            update_post_meta($post_id, $field['id'], $new);
        } elseif ('' == $new && $old) {
            delete_post_meta($post_id, $field['id'], $old);
        }
    }
}

add_filter('the_content', 'pk_rs_add_rich_snippet_to_content', 20);
function pk_rs_add_rich_snippet_to_content($content){
    if (is_single()&&!is_feed()){
        global $post;
        $rating = get_post_meta($post->ID, 'rating', true); 
        $rating = ( '-' == $rating && '-' != PK_RS_DEFAULT_RATING ) ? PK_RS_DEFAULT_RATING : $rating;  
        if ( '-' != $rating ){
            $title = $post->post_title ;
            $dateTime = date_create( $post->post_date );
            $date = $dateTime->format("Y-m-d");
            $date_only = $dateTime->format("M j");
            $author = get_post_meta($post->ID, 'author', true);
            $author = ( '' == $author ) ? ucfirst(get_the_author_meta('display_name', $post->post_author)) : $author;
            $summary = get_post_meta($post->ID, 'summary', true);
            $description = get_post_meta($post->ID, 'description', true);
            if ( !PK_RS_DISPLAY ) {
                $output = "<div class=\"hreview\" style=\"display:none\">";
                $output .= "<span class=\"item\"><span class=\"fn entry-title\">".$title."</span></span>";
                $output .= "Reviewed by <span class=\"reviewer\">".$author."</span> on <span class=\"dtreviewed\"> ".$date_only."<span class=\"value-title\" title=\"".$date."\"></span></span>";
                $output .= "Rating: <span class=\"rating\">".$rating."</span>";         
                $output .= "<span class=\"summary\">".$summary."</span>";
                $output .= "<span class=\"description\">".$description."</span>";
                $output .= "</div>";
            } else {
                $output = "<div class=\"hreview\" style=\"display:block; margin: 0 0 10px 10px; padding: 10px; background: #F6F6F6; border: 1px solid #DDD; -moz-border-radius: 3px; border-radius: 3px; font-size: 0.8em; width: 30%; float: right;\">";
                $output .= "Title: <span class=\"item\"><span class=\"fn entry-title\" style=\"font-size: 0.8em;font-weight: normal;\">".$title."</span></span><br />";
                $output .= "Reviewed by <span class=\"reviewer\">".$author."</span> on <span class=\"dtreviewed\"> ".$date_only."<span class=\"value-title\" title=\"".$date."\"></span></span><br/>";
                $output .= "Rating: <span class=\"rating\">".$rating."</span><br/>";
                $output .= ( 0 < strlen($summary) ) ? "Summary: <span class=\"summary\">".$summary."</span><br/>" : "";
                $output .= ( 0 < strlen($description) ) ? "<p><span class=\"description\">".$description."</span></p>" : "";
                $output .= "</div>";
            }

            $content = $output.$content ;
        }
    }
    return $content;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:31:53.883

您的引用不正确。这个

```
if ($rating == "5.0"){ print("<IMG SRC ="stars/5-0.png>");} 
```

一定是

```
if ($rating == "5.0"){ print("<IMG SRC =\"stars/5-0.png\">");} 
```

如果这只是一个错字，请检查 if 条件是否运行良好。如果是这样，请检查相对路径**stars/5-0.png**是否正确。

使用[Firebug](http://www.getfirebug.com)检查您的 html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:26:48.457

对于初学者......这个：

```
if ($rating == "5.0"){ print("<IMG SRC ="stars/5-0.png>");} 
```

应该是这样的：

```
if ($rating == "5.0"){ print('<IMG SRC ="stars/5-0.png">');} 
```

或者

```
if ($rating == "5.0"){ print("<IMG SRC =\"stars/5-0.png\">");} 
```

您正在尝试在引号内打印引号，这本身可能会导致您的问题......并且您为图像源遗漏了结束引号。

# sql - 在检查多列中任何值的引用时，如何获取表及其列的名称？

> ID：12668343
> 
> 赞同：2
> 
> 时间：2012-10-01T06:19:54.310
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

从团队表中删除任何团队时，我需要检查 teamId 在其他表中是否可用。为此，我使用以下查询：-

```
 select  count(TeamId) from 
        ( select TeamId from Project union all 
          select  TeamId from TeamMember union all 
          select  TeamId from Department union all 
          select TeamId from Role   union all 
        ) as Id where TeamId = 1 
```

此查询工作正常，并返回计数。

但现在我需要该表及其列的名称，我在其中找到了该 teamId。

如果可能的话，请给我正确的解决方案。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:24:44.173

```
 select 'Project' tableName from Project
 where TeamId = 1
 union all 
 select 'TeamMember' from TeamMember
 where TeamId = 1
 union all 
 select 'Department' from Department
 where TeamId = 1
 union all 
 select 'Role' from Role
 where TeamId = 1 
```

我不明白为什么您需要找到它的“列”，因为在所有情况下您都列出了“TeamId”。如果它在不同的表中被命名为不同的东西，那么你可以使用这个：

```
 select 'Project' tableName, 'TeamId' columnName from Project
 where TeamId = 1
 union all 
 select 'TeamMember', 'Member_TeamId' from TeamMember
 where Member_TeamId = 1 
```

最后，如果您想要“行”（记录），您可以将 ID 添加到列中：

```
 select 'Project' tableName, ProjectID idInTable from Project
 where TeamId = 1
 union all 
 select 'TeamMember', TeamMemberId from TeamMember
 where TeamId = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:26:10.387

```
select * from 
        ( select 'Project'    as table_name, TeamId from Project    union all 
          select 'TeamMember' as table_name, TeamId from TeamMember union all 
          select 'Department' as table_name, TeamId from Department union all 
          select 'Role'       as table_name, TeamId from Role    
        ) Id 
where TeamId = 1 
```

# asp.net - 为什么我的查询不能正常工作？

> ID：12668344
> 
> 赞同：-4
> 
> 时间：2012-10-01T06:19:56.210
> 
> 标签：asp.net, entity-framework, ef-database-first

嗨，我使用此查询更新我的数据库，但无法正常工作：

```
if (Request["mode"] != null)
        {
            Int32 ID = Int32.Parse(Request["Id"].ToString());
            using (NoavaranModel.NoavaranEntities1 dbContext = new NoavaranModel.NoavaranEntities1())
            {
                var ToEdit = (from n in dbContext.Packages
                                  where n.Id == ID
                                  select n).FirstOrDefault();
                ToEdit.Name = txtName.Text;
                ToEdit.Level = txtLevel.Text;
                ToEdit.Description = txtDescription.Text;
                ToEdit.ForAge = ddlAgeFor.SelectedItem.Text;
                ToEdit.CatId = ddlCategory.SelectedIndex + 1;
                dbContext.SaveChanges();
                //Response.Redirect("Packages.aspx");
                //return;*/
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:28:52.527

尝试将`SaveOptions.DetectChangesBeforeSave`参数添加到`SaveChanges()`：

```
dbContext.SaveChanges(SaveOptions.DetectChangesBeforeSave); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T06:59:51.387

我解决了我的问题，我忘记了我使用 IsPostBack ：

```
if (!IsPostBack)
        {
            if (Request["Id"] != null)
            {
                Int32 ID = Int32.Parse(Request["Id"].ToString());
                using (NoavaranModel.NoavaranEntities1 dbContext = new NoavaranModel.NoavaranEntities1())
                {
                    var query = (from list in dbContext.Packages
                                 where list.Id == ID
                                 select list).FirstOrDefault();
                    txtName.Text = query.Name;
                    txtLevel.Text = query.Level;
                    txtDescription.Text = query.Description;
                    Image2.ImageUrl = "PackageImages/" + query.Image;
                    ddlAgeFor.Text = query.ForAge;
                    //ddlCategory.Text = query.CatId.ToString();
                }
            }
        } 
```

# python - 如何在 Python 正则表达式中验证 unicode“单词字符”？

> ID：12668348
> 
> 赞同：5
> 
> 时间：2012-10-01T06:20:09.333
> 
> 标签：python, regex, django, django-forms

我有字段形式：

```
name = forms.RegexField(regex=r'\w+$', label=u'Name', required=True) 
```

但是如果我输入特殊字符（例如ś）形式不通过 is_valid() 函数。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T06:28:56.753

激活[Unicode](http://docs.python.org/library/re.html#re.U)匹配`\w`。

```
name = forms.RegexField(regex=r'(?u)\w+$', label=u'Name', required=True) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T06:29:36.117

除了将正则表达式定义为字符串之外，您还可以先将其编译为正则表达式对象，并设置[re.U](http://docs.python.org/library/re.html#re.U)标志：

```
import re

name_regex = re.compile(r'\w+$', re.U)
name = forms.RegexField(regex=name_regex, label=u'Name', required=True) 
```

# android - WebView 不加载 URL

> ID：12668349
> 
> 赞同：2
> 
> 时间：2012-10-01T06:20:10.720
> 
> 标签：android, webview

我想在我的 webView 中加载一个网页。

尝试将`webView.loadurl("")`in `AsyncTask`'s `doinbackground`/`onpostexecute` 和`onresume`.

网址是正确的，但没有任何反应，它只是显示一个白页。在 android 清单文件中启用了互联网访问。

加载 webview 还需要做什么？应用程序不会崩溃或显示任何错误。在我的模拟器中，我使用我的用户名和密码设置代理。

这是我用来加载 URL 的代码：

```
webView = (WebView) findViewById(R.id.webView1);
webView.getSettings().setJavaScriptEnabled(true);
webView.setWebViewClient(new WebViewClientSubClass());
webView.loadUrl(promoURL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:34:10.187

```
myVideoView = (WebView) findViewById(R.id.webView1);
    myVideoView.setWebViewClient(new  WebViewClientSubClass());
        myVideoView.getSettings().setJavaScriptEnabled(true);
        myVideoView.setPersistentDrawingCache(0);
        myVideoView.getSettings().setPluginsEnabled(true);
        myVideoView.requestFocus(View.FOCUS_DOWN);
           myVideoView.loadUrl(promoUrl); 
```

试试这个应该可以工作，并检查它是否在普通浏览器中以**https打开。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:58:28.040

我建议您检查您`webViewClient`收到的回调。我猜该站点要求进行身份验证，因此请覆盖`onReceivedHttpAuthRequest`并执行类似的操作

```
@Override
    public void onReceivedHttpAuthRequest(WebView view,
        HttpAuthHandler handler, String host, String realm) {

        Log.d(TAG, "onReceivedHttpAuthRequest"));
        handler.proceed(username, password);
    } 
```

或者，如果身份验证不是问题，您可以随时覆盖`onReceivedSslError`以查看是否存在某些证书问题。

不过，作为第一步，我建议您使用浏览器查看是否可以加载页面。我在使用需要身份验证的 https 站点时遇到了一些问题，我输入了我的凭据并且该站点无法加载（这是在 android 2.3 上）

# google-chrome-extension - 谷歌浏览器应用程序打开一个网站？

> ID：12668350
> 
> 赞同：1
> 
> 时间：2012-10-01T06:20:19.670
> 
> 标签：google-chrome-extension

如何制作一个只打开一个网站的谷歌浏览器应用程序？

像网站的快捷方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:43:49.483

这很容易：

**`manifest.json`**

```
{
    "manifest_version": 2,
    "name": "Test App",
    "description": "I'm a test app",
    "version": "1.0.0",
    "app": {
        "launch": {
            "web_url": "http://www.example.org/"  // This is the redirect URL
        }
    },
    "icons": {
        "16": "16.png",
        "48": "48.png",
        "128": "128.png"
    }
} 
```

只需将`manifest.json`, `16.png`,`48.png`和`128.png`放入文件夹中，您的扩展程序就完成了。

之后，打开**扩展**页面并选中**开发者模式**复选框。从那里，您可以捆绑您的扩展程序，或者通过导航到扩展程序的文件夹将其解压安装：

![在此处输入图像描述](../Images/9593bb940e4a7b72158a7d3c9f6541b9.png)

# php - JOOMLA：错误 310（net::ERR_TOO_MANY_REDIRECTS）：重定向太多

> ID：12668351
> 
> 赞同：0
> 
> 时间：2012-10-01T06:20:26.710
> 
> 标签：php, joomla, joomla2.5

我正在使用 Joomla 2.5.6，从以前的版本升级后，现在我只收到这个错误：

错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。

我试图更改 .httaccess 配置，但它不起作用。

htaccess 代码：

```
##
# @package      Joomla
# @copyright    Copyright (C) 2005 - 2012 Open Source Matters. All rights reserved.
# @license      GNU General Public License version 2 or later; see LICENSE.txt
##

##
# READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE!
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that dissallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
##

## Can be commented out if causes errors, see notes above.
# For security reasons, Option followsymlinks cannot be overridden.
#Options +FollowSymLinks
Options +SymLinksIfOwnerMatch

## Mod_rewrite in use.

RewriteEngine On

## Begin - Rewrite rules to block out some common exploits.
# If you experience problems on your site block out the operations listed below
# This attempts to block the most common type of exploit `attempts` to Joomla!
#
# Block out any script trying to base64_encode data within the URL.
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL.
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL.
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL.
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
## End - Rewrite rules to block out some common exploits.

## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.
#
## End - Custom redirects

##
# Uncomment following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##

# RewriteBase /

## Begin - Joomla! core SEF Section.
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for something within the component folder,
# or for the site root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
## End - Joomla! core SEF Section. 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-16T12:38:48.747

对我来说，问题是客户删除了分配给文章的类别。因此，如果您遇到这种情况，请创建缺失的类别或取消发布无效的文章，然后再次发布它们。

# ruby-on-rails - Ryan Bates 在他的 Stripe Railscasts 教程中使用了什么角色系统？

> ID：12668354
> 
> 赞同：1
> 
> 时间：2012-10-01T06:20:51.687
> 
> 标签：ruby-on-rails, ruby, authorization, railscasts

我正在查看 Ryan Bates 的 Railscasts 集成条带教程 ( [http://railscasts.com/episodes/288-billing-with-stripe](http://railscasts.com/episodes/288-billing-with-stripe) )，我很高兴尝试一下。

不过，在他开始本教程之前，他已经拥有一个具有不同角色的授权系统。我假设他在数据库中有一个 role_id 表，并在此基础上通过调用 plan_id= 将用户划分为不同的计划。

我不知道如何解决这个问题，有没有人知道一个好的教程，或者创建 plan_id 类型授权系统的资源，所以我可以继续这个教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:23:10.813

即使对于像我这样的菜鸟来说，源代码也很棒：P。

他有两个模型——计划和用户。之后，他通过说 Plan has_many users 和 users belongs_to Plan 将它们关联在一起。其余的在源代码中！感谢 Apneadiving

# javascript - 防止表格元素折叠

> ID：12668372
> 
> 赞同：0
> 
> 时间：2012-10-01T06:22:22.727
> 
> 标签：javascript, jquery, html, css

我有一个函数可以重新加载`table`.

目前，当删除和重新添加表行时，表会折叠。

有没有办法保持以前的表大小并在操作完成后“释放”它？

```
function loadValues() {

    $('#tableId tbody').empty(); // Table rows are being removed here

    $.post("page.php?action=getValues",
        {},
        function(dataT) {

            for ( var i in dataT) {

                var data = dataT[i];

                $('#tableId tbody').append(
                    '<tr>'
                        + '<td>data.id</td>'
                        + '<td>data.other</td>'
                    '</tr>'
                );
            }

        }
        ,"json"
    );

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:23:41.060

如果你这样做：

```
function loadValues() {
    $.post("page.php?action=getValues",
        {},
        function(dataT) {
            $('#tableId tbody').empty(); // Table rows are being removed here
            for ( var i in dataT) {
                var data = dataT[i]; 
                $('#tableId tbody').append(
                    '<tr>'
                        + '<td>data.id</td>'
                    '</tr>'
                );
            }
        }
        ,"json"
    );
} 
```

桌子不会倒塌。原因是用户脚本运行时窗口没有更新。在您的第一个版本中，崩溃是可见的，因为用户脚本在等待服务器响应时必须停止。

* * *

如果需要性能并且添加许多行的详细信息：构建一个大的 html 字符串并在最后只做一个附加会更有效。在这种情况下，我通常是这样进行的：

```
function loadValues() {
    $.post("page.php?action=getValues",
        {},
        function(dataT) {
            var html = '';
            for ( var i in dataT) {
                var data = dataT[i]; 
                html += '<tr>'
                    + '<td>'+data.id+'</td>'
                '</tr>'
                ;
            }
            $('#tableId tbody').html(html);
        }
        ,"json"
    );
} 
```

然后 DOM 只更改一次。

# tomcat - 如何更改 Web-Inf/lib 的路径

> ID：12668373
> 
> 赞同：0
> 
> 时间：2012-10-01T06:22:22.137
> 
> 标签：tomcat

我想更改将 .jar 文件从 Web-Inf/lib 放置到任何其他位置的位置。有什么方法可以在不影响我的项目的情况下更改它。谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:03:41.613

Tomcat安装目录下有一个common/lib文件夹。然后，您的应用程序项目可以参考此位置的 jars。另请阅读：[如果它们位于两个 Web 应用程序中，Tomcat 是否会将相同的库文件加载到内存中两次？](https://stackoverflow.com/questions/267953/managing-libraries-in-tomcat)

# oracle - ORA-01438: 该列允许的值大于指定的精度

> ID：12668374
> 
> 赞同：2
> 
> 时间：2012-10-01T06:22:30.677
> 
> 标签：oracle, plsql, ora-01438

以下是我的代码，我不明白我做错了什么。任何帮助将不胜感激

```
CREATE OR REPLACE
PROCEDURE COMP_LATE_FEE(LATE_APT_FINE IN NUMBER, LATE_GRG_FINE IN NUMBER)
AS
DIFF NUMBER;
TYPE MBCUR IS REF CURSOR RETURN MONTHLY_BILL%ROWTYPE;
MONBILL MBCUR;
MBREC MONTHLY_BILL%ROWTYPE;
BEGIN
--DIFF := FLOOR(SYSDATE - (TRUNC(SYSDATE,'MM')));
--DBMS_OUTPUT.PUT_LINE(DIFF);

OPEN MONBILL FOR
    -- checking the status of all last month's bills
    SELECT * FROM MONTHLY_BILL
    WHERE STATUS = 'PENDING' AND SYSDATE > ED_DT;
FETCH MONBILL INTO MBREC;
    -- adding the late fee amount for any bills that are past the due date
    -- due date = last day of the month
    DIFF := FLOOR(ABS(MBREC.ED_DT - (TRUNC(SYSDATE,'MM'))));
    UPDATE MONTHLY_BILL
    SET LATE_FEE = DIFF * LATE_APT_FINE
    WHERE BILL_NUM = MBREC.BILL_NUM;
    -- if a garage is rented by the resident then the respective additional fee is included
    IF (MBREC.GARAGE_RENT != 0) THEN
        UPDATE MONTHLY_BILL
        SET LATE_FEE = LATE_FEE + DIFF * LATE_GRG_FINE
        WHERE BILL_NUM = MBREC.BILL_NUM;
    END IF;

    COMMIT;
CLOSE MONBILL;
 END;
/ 
```

程序编译没有任何错误。但是当我调用proc时出现以下错误

```
BEGIN
COMP_LATE_FEE(70,20);
END;
/ 
```

错误报告：

```
ORA-01438: value larger than specified precision allowed for this column
ORA-06512: at "LALLURI.COMP_LATE_FEE", line 19
ORA-06512: at line 2
01438\. 00000 -  "value larger than specified precision allowed for this column"
*Cause:    When inserting or updating records, a numeric value was entered
           that exceeded the precision defined for the column.
*Action:   Enter a value that complies with the numeric column's precision,
           or use the MODIFY option with the ALTER TABLE command to expand
           the precision. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T06:47:46.520

假设第 19 行的语句是这样的

```
UPDATE MONTHLY_BILL
SET LATE_FEE = DIFF * LATE_APT_FINE
WHERE BILL_NUM = MBREC.BILL_NUM; 
```

问题似乎是计算结果对于表中的列`diff * late_apt_fine`来说太大了。根据传入的参数的值，我们知道是70。由于我们不知道错误时变量的值，也不知道中列的定义，所以很难知道问题是否是需要更改的定义或计算值是否大于您的预期并且需要更改算法。`late_fee``monthly_bill``late_apt_fine``diff``late_fee``monthly_bill``late_fee`

# magento - 我无法登录magento

> ID：12668379
> 
> 赞同：0
> 
> 时间：2012-10-01T06:22:56.287
> 
> 标签：magento, logging

我无法登录 Magento，

我安装了 GTSPEED 扩展。我从管理员注销，现在我无法登录，但它没有显示任何类型的错误。

我该如何解决？我的网站正在运行，我需要运行。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:46:53.433

在安装这样的模块之前，您必须关闭缓存（如果您使用它，则关闭编译器）并且只有在模块正确安装后才能重新启用。

事后恢复表明您将需要清除缓存（手动删除所有 mage--? var/cache 中的文件夹），以便刷新所有旧的 Magento 代码，以便 Magento 可以正确地重新读取所有配置文件并将模块正确集成到其正在运行的系统中，然后通过删除 var/session 中的文件来删除所有活动会话。完成此操作后，您将必须登录管理面板并退出大约两到三次，以便它开始加载菜单和配置设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:19:16.527

只需检查您是否评论此行的天气

```
app\code\core\Mage\Core\Model\Session\Abstract\Varien.php 
```

如果您不评论它，只需评论这一行找到以下行并评论它

```
call_user_func_array('session_set_cookie_params', $cookieParams); 
```

然后检查天气是否有效

# android - 在gridview中的android图像替换问题中

> ID：12668381
> 
> 赞同：1
> 
> 时间：2012-10-01T06:23:03.527
> 
> 标签：android

我在这里提供我的代码。我已将图像分成 9 个部分并在网格视图中显示如何通过单击它们来更改图像，即（第一个单击的图像应替换为第二个单击的图像，反之亦然）我使用了位图数组用于分割图像并将它们放置在网格视图中。那么如何通过单击两个图像来更改网格视图中的图像应该完成图像的交换，任何人都可以帮助我。

```
public class Imagepieces extends Activity {
                ArrayList<Bitmap> breakedimages,duplicate;
                GridView g;
                int i=0,temp,temp2,rpos;

                @Override

                protected void onCreate(Bundle savedInstanceState) {
                    // TODO Auto-generated method stub
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_image);
                    breakedimages = getIntent().getParcelableArrayListExtra("breaked image");
                    duplicate = new ArrayList<Bitmap>(breakedimages);
                    Collections.shuffle(duplicate);
                    g = (GridView) findViewById(R.id.gridView1);
                    g.setAdapter(new CutAdapter(this, breakedimages));
                    g.setNumColumns((int) Math.sqrt(breakedimages.size()));
                    g.setOnItemClickListener(new OnItemClickListener() {

                        @Override
                        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                                long arg3) {                
                            // TODO Auto-generated method stub
                            //=================================================
                            {

                        }
                    });
                }

                class CutAdapter extends BaseAdapter {
                    int iwidth, iheight; 
                    Context context;

                    public CutAdapter(Imagepieces ipieces, ArrayList<Bitmap> breakedimages) {
                        // TODO Auto-generated constructor stub
                        iwidth = breakedimages.get(0).getWidth();
                        iheight = breakedimages.get(0).getHeight();
                        context = ipieces;
                    }

                    @Override
                    public int getCount() {
                        // TODO Auto-generated method stub
                        return duplicate.size();
                    }

                    @Override
                    public Object getItem(int arg0) {
                        // TODO Auto-generated method stub
                        return duplicate.get(arg0);
                    }

                    @Override
                    public long getItemId(int arg0) {
                        // TODO Auto-generated method stub
                        return arg0;
                    }

                    @Override
                    public View getView(int arg0, View arg1, ViewGroup arg2) {
                        // TODO Auto-generated method stub
                        ImageView i=new ImageView(context);

                        i.setLayoutParams(new GridView.LayoutParams(iwidth +5,iheight +5));
                        i.setPadding(0, 0, 0, 0);
                        i.setImageBitmap(duplicate.get(arg0));

                        return i;
                    }

                }
            }

can any one do the need for me as i have stuck here how to move the images among themselves 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:56:57.270

首先按照@Terril Thomas's 选择两个图像进行交换，

这是在列表中交换两个图像的方法，

```
 public void swapImage(Bitmap i1,Bitmap i2){

    int position1,position2;
    position1 = duplicate.indexOf(i1);
    duplicate.remove(position1);
    position2 = duplicate.indexOf(i1);
    duplicate.remove(position2);

    if(position2>position1){
        duplicate.add(position2, i1);
        duplicate.add(position1, i2);
    }
    if(position2<position1){
        duplicate.add(position1, i2);
        duplicate.add(position2, i1);
    }
} 
```

像这样改变onCreate

```
CutAdapter ca = new CutAdapter(this, breakedimages);
g.setAdapter(ca); 
```

比刷新你的适配器

```
 ca.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:01:15.443

我们可以实现的另一种方式。

在`onItemClickListener()`

```
 i++;
     Bitmap b = null;
     if (i % 2 != 0) {
       temp = arg2;
       b = duplicate.get(temp);
     }
     if (i % 2 == 0) {
        temp2 = arg2;
        duplicate.set(temp, duplicate.get(arg2));
        duplicate.set(temp2, b);
     } 
```

# spring - 映射.jsp Spring

> ID：12668382
> 
> 赞同：0
> 
> 时间：2012-10-01T06:23:07.940
> 
> 标签：spring, jsp, servlets

今天我正在使用 Java Spring 开发一个项目，尤其是在`CONTEXT-SERVLET.xml`（上下文）中，通常声明一个 bean 以将 a`.jsp`与 Java 类或控制器（映射）链接起来。

传统的工作流程是：a`viewA.jsp`链接（映射）到`controller.java`（控制器），然后`controller.java`调度另一个`viewB.jsp`.

您可以在不通过控制器的情况下将一个链接`viewA.jsp`到另一个吗？`viewB.Jsp`这个怎么进去`CONTEXT-SERVLET.xml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:48:25.483

您可以使用[`ParameterizableViewController`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/ParameterizableViewController.html)将请求重定向到 jsp 文件而无需访问控制器。
例如
1\. 映射`/welcome.htm`到`welcomeController`

```
<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="/welcome.htm">welcomeController</prop>
            </props>
        </property>
</bean> 
```

2.to的映射`viewName`属性`welcomeController``WelcomePage`

```
<bean name="welcomeController" 
            class="org.springframework.web.servlet.mvc.ParameterizableViewController">
        <property name="viewName" value="WelcomePage" />
</bean> 
```

3.定义视图解析器

```
<bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
            <property name="prefix">
              <value>/WEB-INF/pages/</value>
            </property>
            <property name="suffix">
              <value>.jsp</value>
            </property>
 </bean> 
```

它将映射`/welcome.htm`到`/WEB-INF/pages/welcomePage.jsp`.
[来源](http://www.mkyong.com/spring-mvc/spring-mvc-parameterizableviewcontroller-example/)了解更多详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T08:50:43.723

< mvc:view-controller path="/" view-name="home" />

这是定义 ParameterizableViewController 的快捷方式，该控制器在调用时立即转发到视图。在视图生成响应之前没有要执行的 Java 控制器逻辑的静态情况下使用它。

见链接[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-view-controller](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-view-controller)

# javascript - 在请求中查找数据

> ID：12668384
> 
> 赞同：0
> 
> 时间：2012-10-01T06:23:09.610
> 
> 标签：javascript, node.js

我在一篇文章中找到了如下代码。在这段代码中， jsonrequest[define.AddStudent]) 是什么意思？[define.AddStudent] 是否类似于变量 jsonrequest 中的“包含”字符串？请帮助B行是什么意思？

```
var jsonrequest = JSON.parse(data); //Line A

if(jsonrequest[define.AddStudent]) { // Line B
    //where define.AddStudent="add student";
    console.log("Request for " + define.AddStudent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:52:19.123

jsonrequest**变量**是一个 JavaScript 对象。

**define**变量也是一个 JavaScript 对象 。**AddStudent**是定义对象的属性/方法。让我们假设它是一个包含“添加学生”的字符串属性，正如评论告诉我们的那样。

那么，B行的意思是：“如果定义了**jsonrequest**对象的名为**“add student”的属性。”**

# ios - 是否有用于在 iOS 下发送 HCI 命令的私有 API

> ID：12668387
> 
> 赞同：0
> 
> 时间：2012-10-01T06:23:55.870
> 
> 标签：ios, bluetooth, iphone-privateapi, hci

有没有办法在 iOS 下发送 HCI 命令（甚至使用私有 API）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:07:40.223

基于快速浏览，我没有找到它（我找到了更高级别的接口）

我检查了两个框架（欢迎您仔细检查，因为我的蓝牙知识有限）

*   /System/Library/PrivateFrameworks/BluetoothManager.framework/BluetoothManager
*   /System/Library/Frameworks/CoreBluetooth.framework/CoreBluetooth

我在 BTServer 中找到了一些对它的引用：

*   /usr/sbin/BTServer

据我了解，这是一个守护进程，它在 iOS 上完成与 BT 相关的所有工作。但是，它不提供内部功能的接口，除非通过框架。

# java - 如何从函数发送自定义返回消息？

> ID：12668388
> 
> 赞同：2
> 
> 时间：2012-10-01T06:24:00.140
> 
> 标签：java

我有一个执行数据库操作并发送`boolean`成功/失败值的函数。假设它失败了，我想将失败原因作为返回值发送。

现在，我已经将返回值定义为一个字符串。如果失败我返回`"failure: reason"`，如果成功，我返回`"success"`。但这不是一个好习惯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:27:13.730

在失败时，您可以抛出一个已检查的`custom Exception`.

```
public class DBException extends Exception{
  public DBException(String exp){super(exp)}
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:28:07.883

您可以将错误消息设置为静态最终字符串，以便其他类能够访问它们，例如：

```
public static final String DB_FAILURE_REASON1 = "failure: reason1"; 
```

否则，创建异常的子类，并将特定原因存储为异常，或者`msg`为特定的失败原因创建子类的更多子类：

```
public class MyDBFailure extends Exception 
```

并将 a 添加`throws`到您的方法中：

```
public String myDBMethood() throws MyDBFailure 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:28:53.063

理想情况下，您应该抛出异常（如果现有的都不适合您的需要，您可以自定义它们）。你的方法更像C。

如果你真的不能使用异常（这将提供谁曾经使用你的代码来决定做什么），你可能会求助于枚举，列出一些可能的结果，如果不是全部的话。请注意，这种方法可能非常麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:28:56.287

使用包含返回值和 getter（或重载方法）的字符串字段编写您自己的`Result`类：`toString()`

```
 public class Result {
     String message;

     public Result(String message) {
          this.message = message;

     }

     public String toString() {
          return message;
     }
 } 
```

另一种选择是使用枚举。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T06:28:57.053

您可以在失败时抛出异常并在 try-catch 语句中调用该函数。

您可以创建一个字符串类型的全局变量并将其设置为失败并返回 false，然后您可以从全局变量中获取错误消息。

您可以返回一个数组，其中第一个元素是返回值，第二个元素是错误消息。

我个人最喜欢的是第二种选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T06:29:21.183

这就是你的用途`throw exception`。您可以很好地更改方法签名并将返回值设置为布尔值。然后创建一个自定义异常类：

```
public class MyCustomException extends RuntimeException {
    // define error code, error message etc.
    // create getters & setters
} 
```

之后，每当您找到失败的原因时，请执行以下操作：

```
if (some_failure_reason == true) {
    throw new MyCustomException(error_code) ;
} 
```

在您的控制器（或服务）中，捕获异常：

```
try {
    // call the method in question
} catch (MyCustomException mce) {
    if(mce.getErrorCode() == some_error_code) {
        // do stuff
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T06:30:10.543

`CustomException`与返回错误代码一起使用。识别错误原因的一种更好的方法是在枚举中定义它，以便每当发生错误情况时，您都可以使用枚举构造异常。

如果需要，您还可以扩展此范例以处理单个异常中的多个错误代码。

每当检测到错误条件时，创建实例`CustomException`然后抛出它。

```
 //Error Condition detected
  if(input<10)
  throw new CustomException("Invalid Input it should be greater 
    than 10 ", ErrorCode.ErrorCode1); 
```

您可以使用多个错误条件，如下所示。

```
 if(intput>100 && input < 1000)//Just a sample case.
   throw new CustomException("Invalid Input it should be not be greater
     than 100 and less than 1000 ", EnumSet.of(ErrorCode.ErrorCode1,
     ErrorCode.ErrorCode2)); 
```

来源`CustomException`：

```
public class CustomException extends Exception {

    private EnumSet<ErrorCode> errorCodes;// You can also maitain multiple
                                            // error codes for same
                                            // exception

    public CustomException(String message, ErrorCode errorcode) {
        super(message);
        this.errorCodes = EnumSet.of(errorcode);
    }

    public CustomException(String message, EnumSet<ErrorCode> errorcode) {
        super(message);
        this.errorCodes = EnumSet.copyOf(errorcode);
    }

}
public enum ErrorCode {
    ErrorCode1(1, "First Error"), ErrorCode2(2, "Second Error");
    int code;
    String reason;

    private ErrorCode(int code, String reason) {
        this.code = code;
        this.reason = reason;
    }
} 
```

# authentication - 在 SharpSvn .NET 库中设置提交作者会引发 SvnRepisitoryIOException 异常

> ID：12668389
> 
> 赞同：1
> 
> 时间：2012-10-01T06:24:05.520
> 
> 标签：authentication, tortoisesvn, commit, sharpsvn, author

如果您有使用 SharpSvn .NET 库的经验，我可以利用您的专业知识在 SVN 提交期间设置提交作者。我尝试了一些事情，但除非用户保存在 TortoiseSVN 中，否则它们都会抛出 SvnRepisitoryIOException。但是，我想根据情况使用不同的用户凭据。如果我保存了用户的默认凭据，TortoiseSVN 会在设置 > 保存的数据 > 验证数据中记住它们，并且能够使用该验证用户作为提交作者来提交文件。如果您在此处单击“清除”，SharpSVN 将不知道在提交期间要对谁进行身份验证。

假设你的班级中有这些指令： using SharpSvn; 使用 SharpSvn.Security；我正在使用适用于 Windows 的免费版 VisualSVN 服务器。而且我有两个用户，一个名为“user1”，密码为“pass1”，以使下面的示例中的事情变得简单，但失败了。

如何防止此异常被抛出并使用作者的不同用户提交（在我的提交日志中）？

**尝试#1：**

```
 using (SvnClient client = new SvnClient())
    { 
        client.Authentication.Clear();  // Clear a previous authentication 
        client.Authentication.DefaultCredentials = new System.Net.NetworkCredential("user1", "pass1");

        SvnCommitArgs ca = new SvnCommitArgs();
        ca.LogMessage = "svn log message created at " + DateTime.Now.ToString();
        bool action = client.Commit(@"C:\demo_repo\demo_project\trunk\file.txt", ca);
    } 
```

**尝试#2：**

```
 using (SvnClient client = new SvnClient())
    {
        client.SetProperty(("", "svn:author", "user1");

        SvnCommitArgs ca = new SvnCommitArgs();
        ca.LogMessage = "svn log message created at " + DateTime.Now.ToString();
        bool action = client.Commit(@"C:\demo_repo\demo_project\trunk\file.txt", ca);
    } 
```

**尝试#3：**

```
 using (SvnClient client = new SvnClient())
    {
        client.Authentication.Clear(); // Clear predefined handlers
        client.Authentication.UserNamePasswordHandlers
            += delegate(object obj, SharpSvn.Security.SvnUserNamePasswordEventArgs args)
        {
            args.UserName = "user1";
            args.Password = "pass1";
        }; 

        SvnCommitArgs ca = new SvnCommitArgs();
        ca.LogMessage = "svn log message created at " + DateTime.Now.ToString();
        bool action = client.Commit(@"C:\demo_repo\demo_project\trunk\file.txt", ca);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:21:07.543

在以管理员身份运行应用程序时获取堆栈跟踪后，我能够使用框架捕获异常并接受不受信任的证书颁发者。

*未处理的异常：SharpSvn.SvnRepositoryIOException：提交失败（详细信息如下）：===> SharpSvn.SvnRepositoryIOException：无法连接到 URL 'https://mycomputer/svn/demo_repo/demo_project/trunk/file.txt' 的存储库--> SharpSvn.SvnRepositoryIOException: OPTIONS of '': 服务器证书验证失败：颁发者不受信任 (https://mycomputer) --- 内部异常堆栈跟踪结束 --- --- 内部异常堆栈跟踪结束 - -- 在 SharpSvn.SvnClientArgs.HandleResult(SvnClientContext 客户端，SvnException 错误，对象目标) 在 SharpSvn.SvnClientArgs.HandleResult(SvnClientContext 客户端，svn_error_t* 错误，对象目标) .....*

**新代码：**

```
 client.Authentication.Clear(); // Clear predefined handlers
            client.Authentication.UserNamePasswordHandlers
                += delegate(object obj, SharpSvn.Security.SvnUserNamePasswordEventArgs args)
            {
                args.UserName = "user1";
                args.Password = "pass1";
            }; 

            client.Authentication.SslServerTrustHandlers​ +=
            delegate(object sender, SvnSslServerTrustEventArgs e)
            {
              e.AcceptedFailures = e.Failures;
              e.Save = true; // Save acceptance to authentication store
            };

            SvnCommitArgs ca = new SvnCommitArgs();
            ca.LogMessage = "svn log message created at " + DateTime.Now.ToString();
            bool action = client.Commit(@"C:\demo_repo\demo_project\trunk\file.txt", ca); 
```

# c# - 获取xml文件的最后一个元素

> ID：12668391
> 
> 赞同：2
> 
> 时间：2012-10-01T06:24:12.420
> 
> 标签：c#, xml, linq, xmldocument

假设我有以下 xml 文件

```
<Users>
 <User>
  <Name>David</Name>
  <Date>9/30/2012 10:52:00 PM</Date>
 </User>
 <User>
  <Name>David</Name>
  <Date>9/30/2012 11:02:05 PM</Date>
 </User>
 <User>
  <Name>David</Name>
  <Date>9/30/2012 11:52:00 PM</Date>
 </User>
 <User>
 <Name>Michelle</Name>
 <Date>9/30/2012 11:02:13 PM</Date>
 </User>
 <User>
  <Name>Michelle</Name>
  <Date>9/30/2012 11:02:54 PM</Date>
 </User>
</Users> 
```

我想阅读 David 的最后日期并将其放在我的 C# 程序中的一个字符串上，在这种情况下它将是“9/30/2012 11:52:00 PM”我有以下代码应该阅读特定用户的日期，但它不起作用

```
 public void readLastDate(string name)
        {      
        string filePaths = "logins.xml";
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(filePaths);

        xmlDoc.DocumentElement.SetAttribute("searching",name);
        XmlNodeList tests = xmlDoc.SelectNodes("//Users[Name =/*/@searching]/User");
        foreach (XmlNode test in tests)
        {
            string myDate = test.SelectSingleNode("LoginDate").InnerText;
            InfoBox.Items.Add("Last  Date:" + myDate);

        } 
```

另外，如果我想读取不在 xml 文件中的用户的日期，我将如何处理错误。}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:30:26.027

在 XPath 中，`(/Users/User[Name = 'David'])[position() = last()]`

但是，首先您必须修复 XML 文件中的错误；-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:35:12.460

您可以使用 LINQ to XML，例如如何读取*David*的*最后日期*

 *```
var xDoc = XDocument.Load("logins.xml");

var userElements = xDoc.Descendants("User")
    .Where(x => x.Element("Name").Value == "David")
    .ToList();

if (userElements.Any())
{
    string lastDate = userElements.Select(x => 
                                       DateTime.Parse(x.Element("Date").Value))
        .OrderByDescending(x => x)
        .First()
        .ToString();
} 
```

更多信息：

[http://msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T08:00:56.827

我也会使用 Linq-to-XML。我认为我的方法很干净。

```
var result =
    XDocument
        .Load(fileName)
        .Element("Users")
        .Elements("User")
        .Where(xe => xe.Element("Name").Value == "David")
        .Select(xe => DateTime.Parse(xe.Element("Date").Value))
        .OrderByDescending(d => d)
        .FirstOrDefault();

if (result == default(DateTime))
{
    /* no value */
} 
```*

# php - MySQL中的更新表

> ID：12668393
> 
> 赞同：0
> 
> 时间：2012-10-01T06:24:30.377
> 
> 标签：php, mysql, sql-update

被卡住了，需要一些帮助，这应该相对简单，但几周来一直是我的祸根，快要放弃了！问题是我正在构建的社交网络的用户注册表单我想做的就是当用户将他们的地址输入数据库时​​用 + 替换空格。我有一个名为activation.php 的页面，当用户激活您的电子邮件地址时，它会被调用，并且我在页面上有这个代码块......

```
 $sql = mysql_query("UPDATE myMembers SET email_activated='1' WHERE id='$id' AND password='$hashpass'"); 
   $sql = mysql_query("UPDATE myMembers SET firstname = REPLACE(firstname, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET lastname = REPLACE(lastname, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET housenumber = REPLACE(housenumber, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET addressone = REPLACE(addressone, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET addresstwo = REPLACE(addresstwo, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET county = REPLACE(county, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET city = REPLACE(city, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET country = REPLACE(country, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET postcode = REPLACE(postcode, ' ', '+'");
   $sql = mysql_query("UPDATE myMembers SET phone = REPLACE(phone, ' ', '+'");
   $sql_doublecheck = mysql_query("SELECT * FROM myMembers WHERE id='$id' AND password='$hashpass' AND email_activated='1'"); 
   $doublecheck = mysql_num_rows($sql_doublecheck); 
```

但当然它不是用 + 更新空间，我是在某处错过了一个技巧还是这注定要失败！当然不用说，我会提前感谢大家！问候-P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T06:29:20.983

所有`REPLACE()`调用都没有右括号。

```
 $sql = mysql_query("UPDATE myMembers SET email_activated='1' WHERE id='$id' AND password='$hashpass'"); 
 $sql = mysql_query("UPDATE myMembers SET firstname = REPLACE(firstname, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET lastname = REPLACE(lastname, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET housenumber = REPLACE(housenumber, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET addressone = REPLACE(addressone, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET addresstwo = REPLACE(addresstwo, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET county = REPLACE(county, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET city = REPLACE(city, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET country = REPLACE(country, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET postcode = REPLACE(postcode, ' ', '+')");
 $sql = mysql_query("UPDATE myMembers SET phone = REPLACE(phone, ' ', '+')");
 $sql_doublecheck = mysql_query("SELECT * FROM myMembers WHERE id='$id' AND password='$hashpass' AND email_activated='1'"); 
 $doublecheck = mysql_num_rows($sql_doublecheck); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:32:01.433

几个问题

正如 Bart Friederichs 所指出的，您缺少右括号。

您的大部分 UPDATE 语句将更新您的所有数据库条目（没有 WHERE 语句的查询）

您为每个字段创建一个查询以更新...

```
UPDATE myMembers SET 
   email_activated='1',
   firstname = REPLACE(firstname, ' ', '+'),
   lastname = REPLACE(lastname, ' ', '+'),
   housenumber = REPLACE(housenumber, ' ', '+')
   --etc
WHERE 
   id='$id' AND password='$hashpass' 
```

# c# - 无法在 C# 的客户端机器上运行我的视频项目？

> ID：12668398
> 
> 赞同：1
> 
> 时间：2012-10-01T06:24:59.490
> 
> 标签：c#, directx

我在 c# 中制作了一个窗口应用程序，它一次播放多个视频......我使用 DirectX SDK 2010 年 6 月......它在我的机器上工作正常，但它在客户端机器上出现异常......机器安装了 DirectX11 所以这不是问题......我得到的例外是......

```
************** Exception Text **************
Error in the application.
-2147220891 (VFW_E_UNSUPPORTED_STREAM)
at Microsoft.DirectX.AudioVideoPlayback.Video.Open(String fileName, Boolean autoRun)
at Microsoft.DirectX.AudioVideoPlayback.Video..ctor(String fileName)
at Video_Project.FormMain.FormMain_Load(Object sender, EventArgs e) in   D:\Video_Project\Video_Project\Form1.cs:line 240
at System.Windows.Forms.Form.OnLoad(EventArgs e)
at System.Windows.Forms.Form.OnCreateControl()
at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
at System.Windows.Forms.Control.CreateControl()
at System.Windows.Forms.Control.WmShowWindow(Message& m)
at System.Windows.Forms.Control.WndProc(Message& m)
at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
at System.Windows.Forms.ContainerControl.WndProc(Message& m)
at System.Windows.Forms.Form.WmShowWindow(Message& m)
at System.Windows.Forms.Form.WndProc(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

请有人帮我解决这个问题.....请我一整天都在这

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:40:52.710

要检查机器安装的 wmp 编解码器：转到 WMP，按 alt 进入菜单，选择帮助->关于...，然后单击技术支持信息。它将生成一份报告，其中列出了所有支持的音频和视频编解码器。

在两台机器上执行此操作，希望这应该显示丢失的编解码器。

# shell - 简单的 sftp get 有时会导致错误

> ID：12668400
> 
> 赞同：0
> 
> 时间：2012-10-01T06:25:31.067
> 
> 标签：shell, unix, sftp

我想就检查 shell 脚本的错误发表意见。我支持的系统包含一个由另一个应用程序（java）多次运行的简单 shell 脚本。java调用一个shell脚本，执行ftp连接打开，移动本地目录，mget命令，最后是一个再见命令。然后它检查 $? 在再见命令之后。

我知道首先这段代码是可疑的，因为它应该只检查 bye 命令，但它会间歇性地导致错误。我已经要求 UNIX 管理员查看系统中是否存在日志错误，但他们说没有。

基本上脚本的一般结构是：

```
sftp -oPort=<port forwarding port> <ip and user> <<==
lcd <some variable>
mget <some variable>
bye

rtn=$?
if [ ${rtn} != 0 ]
then
        exit 1
fi

exit 0 
```

任何想法为什么$？有时返回非零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T09:57:09.150

非零退出代码的原因：

1.  lcd 命令失败，您处于批处理模式
2.  mget 命令失败（glob 不起作用）并且您处于批处理模式
3.  再见命令失败（低概率）并且您处于批处理模式
4.  远程端没有 sftp 服务器（退出代码 == 255）

如果你想故意忽略正在使用的命令的错误，那么你可以在命令前面加上`-`eg `mget`become`-mget`

尝试调试时要做的一件重要事情是捕获命令的输出并在命令失败时转储它，例如

```
trap 'rm -f /tmp/logfile.$$' EXIT HUP
sftp -oPort=<port forwarding port> <ip and user> >&/tmp/logfile.$$ <<EOM
lcd <some variable>
mget <some variable>
bye
EOM
rtn=$?
if ((rtn != 0)); then
    cat /tmp/logfile.$$
    exit 1
fi
exit 0 
```

`trap`脚本终止时删除文件。

# java - 如何将图像存储在文件缓存中并加载以供以后在程序中使用

> ID：12668401
> 
> 赞同：0
> 
> 时间：2012-10-01T06:25:39.733
> 
> 标签：java, android

我想在程序启动时从 url 加载图像并将其保存在文件中....

然后我必须访问文件并从文件中检索图像......

图像的加载不应造成时间延迟.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:31:01.530

有一个适用于 android 的开源惰性图像加载器。使用此加载器，您可以下载并保存图像，如果您已经下载了它，以后可以使用它。

[这](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)是此 StackOverFlow 问题的链接...希望对您有所帮助！

# html - CSS 选择框箭头样式

> ID：12668404
> 
> 赞同：21
> 
> 时间：2012-10-01T06:26:33.793
> 
> 标签：html, css

我想从选择框中删除默认箭头并想使用自定义图标。从之前关于 SO 的答案中，我发现这是不可能的（使其适用于主要浏览器）。唯一的可能是将选择包装在 div 内，并将其宽度设置为大于 div 宽度并设置溢出：隐藏。我正在尝试关注，但它不起作用。我做错了什么？

```
.selectParent {
  width: 80px;
  overflow: hidden;
}

.selectParent select {
  width: 100px;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  padding: 2px 30px 2px 2px;
  border: none;
  background: transparent url("http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png") no-repeat right center;
}
```

```
<div class="selectParent">
  <select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>           
   </select>
</div>
```

**JSFiddle：http:** [//jsfiddle.net/gcPmC/](http://jsfiddle.net/gcPmC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-11T08:32:55.803

请按照以下方式进行：

```
.selectParent {
	width:120px;
	overflow:hidden;   
}
.selectParent select { 
	display: block;
	width: 100%;
	padding: 2px 25px 2px 2px; 
	border: none; 
	background: url("http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png") right center no-repeat; 
	appearance: none; 
	-webkit-appearance: none;
	-moz-appearance: none; 
}
.selectParent.left select {
	direction: rtl;
	padding: 2px 2px 2px 25px;
	background-position: left center;
}
/* for IE and Edge */ 
select::-ms-expand { 
	display: none; 
}
```

```
<div class="selectParent">
  <select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>           
   </select>
</div>
<br />
<div class="selectParent left">
  <select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>           
   </select>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:34:05.387

尝试更换

```
padding: 2px 30px 2px 2px; 
```

和

```
padding: 2px 2px 2px 2px; 
```

它应该工作。

# macos - Mac OSX 10.7 上的网络摄像头捕获 - QucikTime/QTKit/AV Foundation

> ID：12668405
> 
> 赞同：4
> 
> 时间：2012-10-01T06:26:41.280
> 
> 标签：macos, webcam, qtkit

我是 Mac 编程的新手，我真的很困惑捕获任何网络摄像头的正确方法。

**学习：**
在 Windows 上 - Directshow 过滤器是唯一推荐的方式。
在 Mac 上，至少有三个框架。这是我通过论坛搜索了解到的。如果我错了，请纠正我。
*QuickTime* - 仅限 32 位应用程序
*QTKit* - 仅限 64 位应用程序
*AV Foundation* - OS X 10.7 及更高版本。
（我看过一些帖子说 - 当使用 QTKit 时，一些网络摄像头甚至没有被识别。但不明白该怎么做）

**要求：**在基于 OS X 10.6 的 64 位应用程序中捕获 Mac OS X 10.7 及更高版本上的任何网络摄像头（内部或外部 - 任何供应商）（由于当前大量框架未迁移到 Xcode 4 代码必须在 OS X 10.6 上基于 Xcode 3.2.5 构建。我们计划迁移到 Xcode 4，但它需要更多时间，并且无法适应当前的发布时间表）。所以，我不能使用 AV Foundation。

**问题：**如果我们单独使用 QTKit，应用程序是否能够捕获所有网络摄像头？或者某些带有 32 位驱动程序或仅支持 AV Foundation 的驱动程序的网络摄像头会失败？在 Mac 上捕获的正确方法是使用所有三个框架实现捕获功能吗？

# javascript - 从 Javascript 中的另一个成员函数调用成员函数

> ID：12668406
> 
> 赞同：0
> 
> 时间：2012-10-01T06:26:43.763
> 
> 标签：javascript, dom-events, prototype

> **可能重复：**
> [使用 JavaScript 原型对象时事件方法中的“this”关键字](https://stackoverflow.com/questions/1369004/this-keyword-in-event-methods-when-using-javascript-prototype-object)

我创建了一个`MyClass`用 Javascript 调用的类，并将事件绑定`onclick`到页面上的一个按钮。当`onclick`事件触发时，我想调用另一个成员函数，但它给了我未定义的错误。请帮忙。

```
//MyClass constructor
MyClass = function() {

//Find search button
this.ctrlSearchButton = $("#btnSearch");

//Attach onclick event to search button
this.ctrlSearchButton.click(this.onSearchButtonClick);
};

MyClass.prototype.onSearchButtonClick = function () {
    DoSearch();// ERROR : Object Expected
};

MyClass.prototype.DoSearch = function () {
    alert("search called");
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:32:39.967

```
MyClass = function() {
    var self = this;
    this.onSearchButtonClick = function () {
        self.DoSearch();// ERROR : Object Expected
    };
   this.DoSearch = function () {
       alert("search called");
    };
  ....
} 
```

# asp.net - 网站性能问题

> ID：12668408
> 
> 赞同：1
> 
> 时间：2012-10-01T06:26:44.770
> 
> 标签：asp.net, database, performance, iis

我有一个带有一个网页的 Asp.Net 网站，其唯一目的是以查询字符串的形式接收数据，然后根据需要将其分开并将这些数据存储到数据库中。

该数据来自多个车辆跟踪系统。每辆车每 30 秒发送一串数据作为查询字符串。

我在我的网页中编写了这样的代码，当网页被访问时，在页面加载中，我读取查询字符串并对数据库执行插入操作。像这样的东西-

```
protected void Page_Load(object sender, EventArgs e)
{
    con.Open();
    string input = Request.QueryString["vinput"];
    var m = Regex.Match(input, @"~(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@");
    if (m.Success)
    {
        string[] vals = new string[20];
        int j = 1;
        for (int i = 0; i < 20; i++)
        {
            vals[i] = m.Groups[j].Value;
            j++;
        }
        cmd.CommandText = "insert into tracking (vehicle_no,hardware_id,lat,lng,speed,direction,an0,an1,an2,an3,di0,di1,di2,di3,do0,do1,do2,do3,tdate,ttime) values('" + vals[0] + "','" + vals[1] + "','" + vals[2] + "','" + vals[3] + "','" + vals[4] + "','" + vals[5] + "','" + vals[6] + "','" + vals[7] + "','" + vals[8] + "','" + vals[9] + "','" + vals[10] + "','" + vals[11] + "','" + vals[12] + "','" + vals[13] + "','" + vals[14] + "','" + vals[15] + "','" + vals[16] + "','" + vals[17] + "','" + vals[18] + "','" + vals[19] + "')";
        cmd.Connection = con;
        cmd.ExecuteNonQuery();
    }
} 
```

我创建了一个模拟器应用程序来测试这个站点来代替车辆跟踪系统。当有来自一到三个模拟器实例的数据时，此站点工作正常，但当超过 3 个模拟器实例同时发送数据时（大约）无法将数据保存到数据库。

例如，我要发送 5 条记录，每次从模拟器发送一条记录，并有 6 个这样的模拟器实例向页面发送数据。在数据库的最后，我看到只插入了 15 条记录，而不是 30 条记录。顺便说一下，这个网站在**IIS 5.1**中运行。

我该如何处理这个问题？请提出建议。

* * *

**更新**：终于找到了问题。经过大量谷歌搜索后找到了这个[链接](http://forums.iis.net/t/1164347.aspx)和[这个](http://www.carehart.org/blog/client/index.cfm/2011/2/2/iis_request_execution_limits)。它与服务器有关，因为在 windows xp IIS 中基本/启动器的请求限制仅为 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:36:49.067

当您可以使用重量较轻的东西（例如处理程序）时，使用 Page 毫无意义。您可以切换一些东西，但这不是一个繁重的操作。这是一种非常理想的方法，有一个例外，那就是创建一个存储过程，而不是从字符串生成插入语句：

```
public class htest : System.Web.IHttpHandler
{
    public bool IsReusable
    {
        get { return false; }
    }

    public void ProcessRequest(System.Web.HttpContext context)
    {
        System.Web.HttpRequest Request = context.Request;
        Match m = Regex.Match(Request.QueryString["vinput"], @"~(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@(.+)@");
        if (m.Success)
        {
            using (System.Data.SqlClient.SqlConnection con = new System.Data.SqlClient.SqlConnection())
            {
                try
                {
                    con.Open();
                    System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand("command", con);
                    string[] vals = new string[20];
                    int j = 1;
                    for (int i = 0; i < 20; i++)
                    {
                        vals[i] = m.Groups[j].Value;
                        j++;
                    }
                    cmd.CommandText = "insert into tracking (vehicle_no,hardware_id,lat,lng,speed,direction,an0,an1,an2,an3,di0,di1,di2,di3,do0,do1,do2,do3,tdate,ttime) values('" + vals[0] + "','" + vals[1] + "','" + vals[2] + "','" + vals[3] + "','" + vals[4] + "','" + vals[5] + "','" + vals[6] + "','" + vals[7] + "','" + vals[8] + "','" + vals[9] + "','" + vals[10] + "','" + vals[11] + "','" + vals[12] + "','" + vals[13] + "','" + vals[14] + "','" + vals[15] + "','" + vals[16] + "','" + vals[17] + "','" + vals[18] + "','" + vals[19] + "')";
                    cmd.Connection = con;
                    cmd.ExecuteNonQuery();
                }
                catch
                {
                   //At least do some type of logging in this event.
                }
                finally
                {
                    con.Close();
                }
            }
        }
        context.Response.ContentType = "text/plain";
        context.Response.Write("Success");
    }
} 
```

显然，您可以使用一些布尔值来确定最后写回客户端的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:31:42.447

几个建议。。

> 您正在打开连接。请在底部关闭它。也处理 cmd 对象。
> 
> 将您的 INSERT 语句放入 SQL 事务中
> 
> 使用 try 和 Catch（使用 Catch 子句将错误消息存储到 Database 中，ex.message 返回错误详细信息。）

# c - 遍历 GLib 数组时出错

> ID：12668410
> 
> 赞同：0
> 
> 时间：2012-10-01T06:27:12.693
> 
> 标签：c

我无法从我的 GArray 中检索值。

```
GArray * get_leakddata(struct memory* mem) {
struct leak_data {
    char *file;
    int line;
    char *pointer;
    size_t sz;
}; 
```

......

```
GArray * get_leakddata(struct memory* mem) {
    GArray *leak_array = g_array_new(false, false,sizeof(struct leak_data));
    g_hash_table_foreach(mem->metadata_hashtable,(GHFunc)get_leakdata_from_metadata, leak_array);
,struct leak_data *,3)->sz);

    return leak_array;
}

void get_leakdata_from_metadata(char *key_address, struct metadata_record *metarec, GArray *leak_array) {
    if(!get_isallocated(metarec))
        return;
    static int i=0;
    struct leak_data * ld = (struct leak_data *) malloc(sizeof(struct leak_data));
    ld->file = get_prev_file(metarec);
    ld->line = get_prev_line(metarec);
    ld->pointer = key_address;
    ld->sz = get_metadata_recordsize(metarec);

    printf("get_leakdata_from_metadata sz: %d\n",ld->sz);

    g_array_append_val(leak_array,ld);

    i++;

    printf("get_leakdata_from_metadata 2: %d\n",g_array_index(leak_array,struct leak_data*,i)->sz);

} 
```

打印出来：

```
get_leakdata_from_metadata sz: 12
get_leakdata_from_metadata 2: 1 
```

最终我得到一个段错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:09:21.907

数组是`struct leak_data`s，而不是指向它们的指针。所以你的索引代码：

```
g_array_index(leak_array,struct leak_data*, i)->sz 
```

是错的。这有点令人惊讶，但 GArray 真正建模的是数组，而不是指针数组。有 GPtrArray 。:) 所以，以上应该是

```
g_array_index(leak_array, struct leak_data, i).sz 
```

# iphone - 在 UIView 缩放问题后滑动

> ID：12668414
> 
> 赞同：1
> 
> 时间：2012-10-01T06:27:34.537
> 
> 标签：iphone, uiview, uiswipegesturerecognizer, pinchzoom

我有一个`UIView`启用缩放功能和一个滑动手势识别器设置。当用户未缩放时，滑动效果很好，但是一旦用户放大，滑动就不会出现。

缩放后滑动有什么秘诀吗？

# c# - 查找程序的安装路径

> ID：12668418
> 
> 赞同：0
> 
> 时间：2012-10-01T06:28:01.423
> 
> 标签：c#

我是 C# 新手，我制作了一个简单的 Windows 窗体应用程序，它基本上更新了游戏的人员文件。

他们必须手动移动和删除某些文件夹，以便每次更改版本。我已经成功地做到了这一点。

但是，在我开始发布之前，我真的应该改进它。我知道我需要更改进程的名称并删除我的描述 ETC。

我偶然发现了一个错误，我认为最好从更有经验的人那里获得关于如何执行此操作的意见，而不是猜测。

我将使用 Inno Setup 为我的应用程序制作安装程序，这样我可以确定它将进入他们的 32 位和 64 位程序文件。所以我知道这将在程序文件中。

所以现在我想知道我是否以正确的方式做到了这一点？我正在使用这种格式来查找他们的程序文件：

```
string programFilesFolder = Environment.GetEnvironmentVariable("PROGRAMFILES(X86)") ?? Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles); 
```

但是，这适用于所有 Windows 系统（XP、Vista、Win7、Win8）吗？它是否完全准确？我打算使用上面的，然后使用这个：

```
 string PATCHSELECTOR = Path.Combine(programFiles, @"PATCH SELECTOR");
        if (Directory.Exists(PATCHSELECTOR))
        {
            string GamereliteFolder = Path.Combine(programFiles, @"GAMERELITE~1");
            if (Directory.Exists(GamereliteFolder)) 
```

然后我使用字符串方法移动文件。如果文件存在，则在我将文件从 PATCH SELECTOR 复制到 GAMERELITE 之前将其删除。

Windows XP 是否也支持使用嵌入了程序集资源的 .exe，这使得程序需要以管理员身份运行？我以前通过 UAC 使程序集工作，但是如果他们关闭了 UAC 或者如果它是 XP，那将不会总是有效，所以我想我会尝试使用管理程序集。

谁能给我一些见解，想法或链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:38:04.827

几件事：

*   在已经说明的答案中，Assembly.GetExecutingAssembly().Location 还将为您提供当前“正在执行”的程序集的完整文件路径。（或者，GetCurrentAssembly）

*   如果我正确阅读了您的问题，那么您正在尝试查找您自己的位置以及另一个应用程序的位置。我*强烈*建议查看其他应用程序是否具有指定确切位置的注册表项 - 它会使您的复制步骤更加稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:07:33.230

对于可执行文件（对于网站和 Web 应用程序不确定），这将返回可执行文件所在的目录（它实际上是框架将探测要加载的程序集的基本路径，99% 的内容是相同的）。

```
System.AppDomain.CurrentDomain.BaseDirectory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:31:56.627

此方法适用于位于 Windows PATH 变量中定义的文件夹中的任何可执行文件：

```
private string LocateEXE(String fileName)
{
    string path = Environment.GetEnvironmentVariable("path");
    string[] folders = path.Split(';');

    foreach (var folder in folders)
    {
        if (File.Exists(Path.Combine(folder, fileName))) 
        {
            return Path.Combine(folder, fileName);
        }
    }

    return String.Empty;
} 
```

用法：

```
string pathToEXE = LocateEXE("Example.exe"); 
```

参考：

*   [如何找到已安装软件的执行路径](https://stackoverflow.com/questions/909910/how-to-find-the-execution-path-of-a-installed-software)
*   [如何以编程方式获取另一个应用程序的安装路径？](https://stackoverflow.com/questions/3916713/how-can-i-get-another-applications-installation-path-programmatically)

# mysql - mySQL 逗号分隔

> ID：12668421
> 
> 赞同：0
> 
> 时间：2012-10-01T06:28:11.703
> 
> 标签：mysql, comma

我有两张桌子：

**表1：用户**

```
| user_Id  | likes       |               
| 100      | 200,201,217 |
| 101      | 200,215,216 | 
```

**表2：文章**

```
| article_id| author_id | title             |
| 216       | 100       | This is test      |
| 200       | 101       | this is only test | 
```

当用户登录成功`$userId=user_Id`时，显示该用户喜欢的所有文章？

我不知道如何从用户表中的 likes 列中删除带有逗号的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:33:58.343

你也可以使用`FIND_IN_SET`

```
SELECT a.user_id, b.*
FROM user a, articles b
WHERE  FIND_IN_SET(b.article_id, a.likes) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/ec8f9/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:37:04.830

```
SELECT 
    * 
FROM user 
LEFT JOIN articles on FIND_IN_SET(articles.article_id , likes) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:35:40.520

```
select * 
  from articles a,
       user u
 where FIND_IN_SET (a.article_id, likes) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T07:09:55.610

您可以使用过程来完成它，不像`FIND_IN_SET`，这样您就可以从索引中获得所有好处，随着数据库的增长，索引速度会更快并且可以更好地扩展：

```
DELIMITER |
create procedure articles_liked_by_user(user_id_in INT)
BEGIN
set @sql = CONCAT('select * from articles where article_id in (', (select likes from user where user_id = user_id_in), ')');
PREPARE stm from @sql;
EXECUTE stm;
END;
|
DELIMITER ; 
```

使用：

```
call articles_liked_by_user(100); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-01T06:32:04.413

查看。

```
 select * 
from articles
where FIND_IN_SET(articles.article_id,(select likes from user where user_id=100)); 
```

# javascript - 如何使用 JavaScript 或 JQuery 在 ASP.NET 中左右滚动图像？

> ID：12668422
> 
> 赞同：1
> 
> 时间：2012-10-01T06:28:36.453
> 
> 标签：javascript, jquery, asp.net, jquery-ui

我正在 Asp.net 中开发一个应用程序，我需要在其中滚动图像。图像将使用服务器端代码从文件夹加载。

假设文件夹中有 20 张图像，则页面应仅显示 5 张图像，而当向左或向右箭头滚动时应显示其他图像![在此处输入图像描述](../Images/faa6f292e9338cd32604cd60f0edf8a9.png)

不确定，如何使用 javascript 或 jquery 来实现这一点。有任何想法吗 ？？

# java - 向 JLabel 添加工具提示文本可防止包含 JPanel 抛出 MouseEvents

> ID：12668434
> 
> 赞同：0
> 
> 时间：2012-10-01T06:29:31.563
> 
> 标签：java, tooltip, mouseevent

我有一个 JPanel ( `pNums`)，其中包含另一个 JPanel ( `pGrid`)。`pGrid`它本身包含一个`JLabel[][]`标签网格（在 GridLayout 中）。有一个鼠标侦听器可以从中捕获事件`pGrid`并对其执行相当重要的操作（例如，程序的整个功能都依赖于 mouseClicked() 事件）。这完美地工作，完全按照我想要的方式......直到我向标签添加工具提示。

一旦我调用`JLabel.setToolTipText("SomeString")`监听器就停止对事件做出反应（我已经尝试了大多数，如果不是所有的鼠标事件，它们似乎都没有被调用）。

顺便说一句，我*确信*它是工具提示，注释掉`setToolTipText()`完全解决了问题。当然，由于我*需要*工具提示，它也会导致许多其他问题。

我环顾四周，虽然我没有找到任何`quite`正确的东西，但我觉得我只是选择了一种非常糟糕的方式来做我想做的事。但我也想确定。

我可以同时获得事件和工具提示，还是应该回到绘图板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:53:33.977

我认为您可以通过在工具提示外观上设置延迟来“修复”此问题。但是一旦它出现，用户无论如何都必须点击隐藏它。

[http://docs.oracle.com/javase/7/docs/api/javax/swing/ToolTipManager.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/ToolTipManager.html)

原因可能是，工具提示本身需要鼠标单击才能隐藏。

# objective-c - 自定义 NSDrawer

> ID：12668438
> 
> 赞同：1
> 
> 时间：2012-10-01T06:29:58.357
> 
> 标签：objective-c, cocoa, nswindow, drawer

我试图`NSDrawer`通过改变它来制作一个自定义，`NSWindow`但子类化`NSDrawer`并没有帮助。我想知道是否可以`NSDrawer`完全定制外观。如果是，最好的方法是什么？

# ruby-on-rails - 将在 Linux 平台上运行的 Ruby on Rails 应用程序部署到 Microsoft Azure 平台

> ID：12668441
> 
> 赞同：0
> 
> 时间：2012-10-01T06:30:11.270
> 
> 标签：ruby-on-rails, azure

我正在研究 Ruby on Rails。我的平台是Linux。

现在我想将我的 Ruby on Rails 应用程序部署到 Microsoft Azure 平台。我是 Azure 平台的新手。

那么如何将 ROR 应用程序从 Linux 平台部署到 Azure 平台。

谢谢，米拉普沙阿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:27:11.497

此页面可能包含一些对您有用的文章：

[https://www.windowsazure.com/en-us/manage/linux/](https://www.windowsazure.com/en-us/manage/linux/)

你基本上需要做的是：

1.  在 Windows Azure 门户中创建您的虚拟机，然后选择您喜欢的 Linux 风格。
2.  SSH 到机器上，并安装您的应用程序需要的各种组件，即 Ruby、Gems、Ruby on Rails 等。（在此提供帮助：http: [//guides.rubyonrails.org/getting_started.html#installing-rails](http://guides.rubyonrails.org/getting_started.html#installing-rails)）
3.  在门户中，打开 Windows Azure 防火墙中的必要端点（即端口 80），以使流量能够通过您的应用程序。

# java - 如何显示数组中负数的数量？

> ID：12668450
> 
> 赞同：0
> 
> 时间：2012-10-01T06:31:04.273
> 
> 标签：java, arrays, negative-number

如何显示数组中负数的数量？

这是我到目前为止所拥有的：

```
public static void main(String args[]){
    int arrayNumbers[] = { 3, 4, 7, -3, -2};
    for (int i = 0; i <= arrayNumbers.length; i++){
        int negativeCount = 0;
        if (arrayNumbers[i] >= 0){
                negativeCount++;
    }
    System.out.println(negativeCount);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:32:29.227

您几乎拥有它，但您不断重新初始化计数器。取出`int negativeCount = 0;`并放在循环之前。

编辑正如另一位用户在评论中提到的那样，您计算的是正数而不是负数。所以，修复`if (arrayNumbers[i] >= 0)`也。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:47:02.563

您需要执行以下操作；

1）在循环外声明变量negativeCount。

2）将statememt的条件更改为小于0且不大于或等于。（或者你可以在当前条件前添加一个非运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:42:22.663

`negativeCount`每次发现负数时，您都会将变量变回 0，并且您还需要检查是否`arrayNumbers[i]<0`

```
 public static void main(String args[])
     {
            int arrayNumbers[] = { 3, 4, 7, -3, -2};
            int negativeCount = 0;
            for (int i = 0; i <= arrayNumbers.length; i++)
            {

              if (arrayNumbers[i] < 0)
               {
                 negativeCount++;
               }

            }

             System.out.println(negativeCount);
      }

        } 
```

# java - 定义（或覆盖）Arrays.sort 方法

> ID：12668451
> 
> 赞同：0
> 
> 时间：2012-10-01T06:31:11.213
> 
> 标签：java, sorting, overriding

我有一堂课如下。

```
public class MyClass{
  int x;
  String str;
  public MyClass(int x)
    {
     this.x=x;
    }
public static void main(String args[])
{
   MyClass[] myclass=new MyClass[10];
   Random rnd=new Random();
   for(int i=0;i<10;i++)
    {
      myclass[i]=new MyClass(rnd.nextInt());
     }
}
} 
```

现在，在初始化每个数组对象之后，我现在希望根据它们的 x 值对其进行排序。是否可以重写 Arrays.sort 方法来做到这一点，或者我需要定义自己的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T06:32:50.263

在您的情况下，由于您的`MyClass`类显然具有自然顺序，因此最简单的方法是让它实现[Comparable](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html)接口。

之后，您可以使用[Arrays 类的标准排序方法](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)。

```
public class MyClass implements Comparable<MyClass> {
     int x;
      ...
      @Override
        public int compareTo(MyClass o) {
            return o.x-x;
        }
    public static void main(String args[]) {
       MyClass[] myarray=new MyClass[10];
       ...
       Arrays.sort(myarray);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:35:26.393

存在许多`Array.sort`方法重载。其中之一是

```
public static void sort(Object[] a, int fromIndex, int toIndex, Comparator c) 
```

> 根据指定比较器的顺序对指定对象数组的指定范围进行排序。要排序的范围从 index fromIndex（包括）扩展到 index toIndex（不包括）。（如果 fromIndex==toIndex，则要排序的范围为空。）范围内的所有元素必须通过指定的比较器相互比较（即 c.compare(e1, e2) 不得为任何元素 e1 抛出 ClassCastException和 e2 在范围内）。

您可以定义`Comparator`并使用它。

而且，因为它是一种`static`方法，所以它不能被覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T09:33:13.963

您可以使用 arrays.sort 获取用户输入并进行相应排序

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;

public class SortMyNumbers {
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        String strUserInput = "";
        String strOp = "";
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                System.in));

        do {
            System.out
                    .println("...Enter no.s or Type End to terminate the program...");
            try {
                strUserInput = reader.readLine();

            } catch (IOException e) {
                e.printStackTrace();
            }
            if (!strUserInput.equalsIgnoreCase("end")
                    && strUserInput.contains(",")) {
                System.out.println(" Entered No.s are ..." + strUserInput);
                System.out.println("Enter no.s...");
                String strArr[] = strUserInput.split(",");

                double iArr[] = new double[strArr.length];
                int i = 0;
                // Arrays.sort(strArr);
                for (String s : strArr) {
                    iArr[i] = Double.parseDouble(s);
                    i++;
                }
                Arrays.sort(iArr);
                for (double j : iArr) {
                    strOp += String.valueOf(j) + ",";
                }
                System.out.println(" Sorted No  are " + strOp);
            } else {
                // System.out.println("Invalid i/p terminating...");
            }
            strOp = strOp.substring(0, strOp.length() - 1);

        } while (!strUserInput.equalsIgnoreCase("end"));
    }
} 
```

# excel - 如何从另一个工作表调用宏。？

> ID：12668452
> 
> 赞同：-2
> 
> 时间：2012-10-01T06:31:10.030
> 
> 标签：excel, vba

我已将宏分配给工作表 2 中的按钮。我在新工作表中创建了一个新按钮，现在我希望从工作表 4 运行或调用相同的宏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:58:10.817

...唔....

将您的代码放入模块中：

![在此处输入图像描述](../Images/112fcef4a7ccbe14d7c82c50f2817e18.png)

然后，您可以从任何地方调用它。如果要将 ActiveX 控件添加到工作表，则只需在设计模式下双击按钮并将代码修改为以下内容，它应该可以工作：

```
Private Sub CommandButton1_Click()
  Call CallMeFromAnyWorkSheet
End Sub 
```

# database - 表单中的多个下拉菜单。如何在 db 表中管理

> ID：12668453
> 
> 赞同：0
> 
> 时间：2012-10-01T06:31:18.753
> 
> 标签：database, drop-down-menu, crud

我正在为导入导出系统创建一个应用程序。
在这个应用程序中，我有很多表格。
现在让我们谈谈一个单一的形式。
我在这个表格中有 8 个下拉菜单。
为了允许管理员向每个下拉列表添加新值，我必须为每个下拉列表创建表，以便它具有管理员定义的所有值。
我想知道这个问题是否有替代方案，因为我在应用程序中看到有近 35 个不同的下拉菜单，我不想为每个下拉菜单创建 35 个表格和表单然后 CRUD。
如何以优化和简单的方式管理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:15:54.380

我已经用这种方法找到了解决这个问题的方法

```
Table : dropdown
Columns : id , dropdown_name

Table : dropdown_fields
Columns : id , field_name , dropdown_id 
```

这将我将创建两个 cruds 一个用于下拉标签。在这个管理员中，将定义 crud 标题或名称，仅此而已。

在第二个中，管理员将首先从来自数据库表下拉列表的下拉列表中选择下拉列表名称，然后他将有一个字段 field_name 来定义。

在我需要这些下拉列表的形式中，我可以使用 ids。完成了！

# java - 运行包含库 jar 的 jar 时出现 Java NoClassDefFoundError

> ID：12668454
> 
> 赞同：3
> 
> 时间：2012-10-01T06:31:20.000
> 
> 标签：java, ant, classpath

几个小时后，即使在阅读了大量文档和 SO 问题之后，我也束手无策。我确定我遗漏了一些明显的东西，但我就是想不通。

我创建了许多 java 文件，包括带有 main 方法的单个入口点。该类还使用了一个“库”类，该类位于 com.test.lib.MyLibraryClass.class 中，位于 jar 文件 mylib.jar 中。我正在使用以下 ant XML 成功构建*我的jar 文件。*

```
<target name="jar" depends="compile">
        <jar destfile="${jar.dir}/${jar.name}.jar">
            <fileset dir="${classes.dir}" />
            <fileset dir="${lib.dir}" />
            <manifest>
                <attribute name="Main-Class" value="${main-class}" />
                <attribute name="Class-Path" value="mylib.jar"/>
            </manifest>
        </jar>
    </target> 
```

当我检查通过执行该目标创建的 jar 时，我发现它确实包含我的所有 .class 文件以及 mylib.jar。

但是，当我尝试运行 jar 时，出现以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/test/lib/MyLibraryClass
    at com.mytest.MyMain.<init>(Unknown Source)
    at com.mytest.MyMain.main(Unknown Source)
Caused by: java.lang.ClassNotFoundException: com.test.lib.MyLibraryClass
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 2 more 
```

我需要改变什么？我是否生成了格式错误或不完整的清单？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T06:46:57.917

问题是标准类加载器无法找到在另一个 JAR 中的 JAR 中的类。`Class-Path`manifest 变量*实际上是*告诉 JVM 将当前目录中的文件添加到`mylib.jar`类路径中。

有三种解决方案：

*   将`mylib.jar`文件放在可以找到的地方（并相应地设置清单属性。

*   创建一个 Uber-jar，将主 JAR 中的类和所有相关的库 JAR 合并到一个 JAR 文件中。

*   编写一个时髦的类加载器，它知道如何从 JAR-in-a-JAR 加载，并修改应用程序以实例化和使用类加载器。（不推荐这种方法...）

请注意，前两个替代方案通过摆脱 JAR-in-a-JAR 结构来解决问题......以不同的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:43:57.543

如果您尝试使用该`java`命令运行它，则不支持在 jar 中嵌入 jar。使用清单中的该条目，类加载器将在您启动类的基本文件夹中查找 jar，而不是在 Jar 中。您可以放入`mylib.jar`基本文件夹并`java`使用 -cp mylib.jar` 选项运行，或者使用任何支持运行带有嵌入式 jar 的 jar 的工具。看看[这个](https://stackoverflow.com/q/183292/1434089)或只是谷歌“罐子里的罐子”，你会得到大量的点击。

# visual-studio-2010 - Visual Studio F5 和 Ctrl+F5？

> ID：12668455
> 
> 赞同：-1
> 
> 时间：2012-10-01T06:31:22.587
> 
> 标签：visual-studio-2010, debugging

我这里有一个奇怪的问题。我正在使用 Visual Studio 2010。当我使用 调试代码`F5`时，出现错误。但如果没有调试 ( `Ctrl`+ `F5`) 代码运行良好。那么谁能告诉我问题是什么，它们之间有什么区别以及如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:38:28.160

我想（因为您没有提供那么多细节）当您谈论错误时，您可能正在谈论异常，对吗？事实是，当您使用 CTRL+F5 运行项目时，您正在运行而不进行调试，而 F5 “调试”。

因此，如果您在“调试”时遇到异常，而不是在“未调试”时遇到异常，这似乎意味着这些异常已被正确捕获。摆脱这些异常的一种方法是检查调试菜单/然后检查异常并检查所有“抛出”复选框是否未选中。这个异常窗口用于强制调试过程在异常情况下中断，即使它们被正确捕获。

希望这可以帮助。

# sql - 在cte查询sqlserver 2008中初始化和增加变量

> ID：12668468
> 
> 赞同：5
> 
> 时间：2012-10-01T06:32:22.200
> 
> 标签：sql, sql-server, sql-server-2008, common-table-expression

我正在使用 sqlserver 2008，我想`@NUMTwo`在我的第二部分（问题行）中同时初始化和增加变量（）。

我正在创建一个 cte 查询。

这可能吗，如果是，请告诉我。

以下是一个示例。我希望我很清楚。

```
CREATE table #TempTable 
(
childProductID  INT,parentProductID INT,productModel varchar(50),[Num2] VARCHAR(100)
)

DECLARE @NUMTwo  INT = 0
WITH tableR   AS    
 (

        -- First Part
    SELECT childProductID = null,parentProductID=null,productModel  from Products where productid in (@a),[Num2] = convert(varchar(100), '')
            UNION ALL
            --Second Part            
    SELECT e.childProductID,e.parentProductID,prd.productModel FROM ProductIncludes AS e  
            ,[Num2] = convert(varchar(100),'1.'  + @NUMTwo+=1 )    -- Problem line
    INNER JOIN  Products AS PRD ON e.childProductID = PRD.productID      
    WHERE parentProductID in (@a)  

      )

INSERT INTO #TempTable(childProductID,parentProductID,productModel,[Num2])
SELECT childProductID,parentProductID,productModel,[Num2]

END 
SELECT * FROM #TempTable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T06:41:24.347

您需要在查询的 acnhor 部分中“初始化”一列，然后在递归部分中“增加”该列。

就像是

```
DECLARE @NUMTwo  INT = 0
;WITH Test AS (
    SELECT  [Num2] = convert(varchar(MAX), ''),
            @NUMTwo [N] 
    UNION ALL
    SELECT  [Num2] = '1.'  + convert(varchar(MAX),[N]+1),
            [N]+1
    FROM    TEst
    WHERE   [N] < 10
)
SELECT  *
FROM    Test 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/4771/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:41:36.883

如果该参数`@NUMTwo`仅用于编号行，则可以使用 the`ROW_NUMBER() OVER(...)`代替它，如下所示：

```
WITH tableR   AS    
 (
    SELECT childProductID = NULL, parentProductID = NULL, 
      productModel, NUMTwo = CAST('0' AS VARCHAR(10))
    FROM Products 
    WHERE 
      productid in (@a),
      [Num2] = convert(varchar(100), '')
    UNION ALL          
    SELECT e.childProductID, e.parentProductID, 
      prd.productModel, 
      NUMTwo = '1.' + 
        CAST( ROW_NUMBER() OVER(ORDER BY (SELECT 0)) AS VARCHAR(10))
    FROM ProductIncludes AS e
    INNER JOIN  Products AS PRD ON e.childProductID = PRD.productID      
    WHERE parentProductID in (@a)  
) 
```

# c# - 实体框架部分加载

> ID：12668469
> 
> 赞同：5
> 
> 时间：2012-10-01T06:32:25.210
> 
> 标签：c#, entity-framework, entity-framework-5

我的表中有以下列

*   标识（整数）
*   名称 (nvarchar) 通常 < 100 个字符
*   数据 (nvarchar) 平均 1MB

我正在编写一个程序，它将遍历每一行并对 Name 字段执行一些操作。由于我只使用 Name 字段并且 Data 字段非常大，是否可以指示 EF 仅加载 Id 和 Name 字段？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T06:34:03.837

当然是

```
ctx.YourDbSet.Select(p=> new { Id = p.Id, Name = p.Name}); 
```

此方法正在选择匿名类。

如果你想再次保存它，你可以用我称之为虚拟实体的东西来做到这一点：

```
foreach(var thing in ctx.YourDbSet.Select(p=> new { Id = p.Id, Name = p.Name}))
{
    var dummy = new YourEntity{Id = thing.Id};
    ctx.YourDbSet.Attach(dummy);
    dummy.Name = thing.Name + "_";
}
ctx.SaveChanges(); 
```

此方法适用于快照跟踪，因为 EF 仅跟踪在附加调用后所做的更改以在更新语句中发回。这意味着您的查询将仅包含该实体上 name 属性的更新（即它不会触及数据）

注意：您要确保在您严格控制的上下文中执行此操作，因为您无法附加已附加到 EF 跟踪图的对象。在上述情况下，选择**不会**将实体作为匿名附加到图形（因此使用相同的上下文是安全的）

# c# - 如何将 Outlook 电子邮件复制并粘贴到 C#.Net windows 窗体上？

> ID：12668470
> 
> 赞同：1
> 
> 时间：2012-10-01T06:32:26.253
> 
> 标签：c#

我正在尝试复制 Outlook 电子邮件并将其粘贴到表单上。每当我执行粘贴操作时，Outlook 邮件（MSG 文件）都应该保存到某个目录，并且我已经实现了一些代码，如下所示。

```
private void OutlookMailCopyPaste_KeyDown(object sender, KeyEventArgs e)
{
  if (e.Control && e.KeyCode == Keys.V)
  {
    if (Clipboard.ContainsData("FileGroupDescriptor"))
    {
      if (Clipboard.ContainsData("FileGroupDescriptorW"))
      {
        Stream fileStream = (Stream)Clipboard.GetData("FileGroupDescriptor");
        byte[] fileGroupDescriptor = new byte[fileStream.Length];
        fileStream.Read(fileGroupDescriptor, 0, fileGroupDescriptor.Length);
        fileStream.Close();
        System.Text.StringBuilder fileName = new System.Text.StringBuilder("");
        for (int i = 76; i < fileGroupDescriptor.Length; i++)
        {
          fileName.Append(Convert.ToChar(fileGroupDescriptor[i]));
        }

        //fileGroupDescriptor = Encoding.Convert(Encoding.GetEncoding("iso-8859-1"), Encoding.UTF8, fileGroupDescriptor);
        //string tempString = Encoding.UTF8.GetString(fileGroupDescriptor, 0, fileGroupDescriptor.Length);
        string tempString = fileName.ToString().Substring(fileName.ToString().IndexOf('.'));
        if (tempString.ToUpper().StartsWith(".MSG"))
        {
          if (Clipboard.ContainsData("FileContents"))
          {
            MemoryStream[] filestreams = (MemoryStream[])Clipboard.GetData("FileContents");
            if (filestreams != null && filestreams.Length > 0)
            {
              MemoryStream filestream = filestreams[0];
              //save the file stream using its name to the application path
              FileStream outputStream = File.Create(fileName.ToString());
              filestream.WriteTo(outputStream);
              outputStream.Close();
            }
          }
        }
        else
        {
          MessageBox.Show("Please copy and paste MSG file only.");
        }
      }
    }
  }
} 
```

当我将剪贴板数据读入内存流时，我会遇到一个异常，例如“内存不足，无法继续执行程序”。在线

> MemoryStream[] 文件流 = (MemoryStream[])Clipboard.GetData("FileContents");

此外 Clipboard.GetData("FileContents") 有 null 虽然我正在检查它是否在此行之前有一些数据

> if (Clipboard.ContainsData("FileContents"))

谢谢和问候， 拉梅什·莫拉萨

# c# - 如何在 C# Windows 窗体中将文本框数据绑定到字典项

> ID：12668472
> 
> 赞同：1
> 
> 时间：2012-10-01T06:32:30.013
> 
> 标签：c#, winforms, data-binding

我想将一个文本框的数据绑定到一个`Dictionary<string,string>`条目。我试图通过数据绑定来实现这一点，因此在用户编辑文本框后内容会得到更新。

这是我所做的演示代码：

具有`Name`和`List`字典的classA：

```
class ClassA
{
    public string Name { get; set; }
    public Dictionary<string, string> List { get; set; }

    public ClassA()
    {
        this.Name = "Hello";

        this.List = new Dictionary<string, string>
        {
            {"Item 1", "Content 1"},
            {"Item 2", "Content 2"}
        };
    }
} 
```

在表单中，我绑定`textBox1`到`Name`并绑定`textBox2`到`List["Item 1"]`：

```
ClassA temp = new ClassA();

public Form1()
{
    InitializeComponent();

    textBox1.DataBindings.Add("Text", temp, "Name");
    textBox2.DataBindings.Add("Text", temp.List["Item 1"], "");

    label1.DataBindings.Add("Text", temp, "Name");
}

private void textBox2_TextChanged(object sender, EventArgs e)
{
    label1.Text = temp.List["Item 1"];
} 
```

如果我更改`textBox1`文本，`label1`内容 ( `Name`) 将成功更新。

但是如果我更改`textBox2`文本，`label1`内容将显示原始`List["Item 1"]`值。

如何`textBox2`正确绑定`List["Item 1"]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:08:55.273

使用显式绑定并使用其事件来实现您的目标

```
 Binding binding = new Binding("Text", temp, "List");
        binding.Parse += new ConvertEventHandler(binding_Parse);
        binding.Format += new ConvertEventHandler(binding_Format);
        textBox2.DataBindings.Add(binding); 
```

当数据绑定控件的值发生更改时，将发生 Parse 事件。

```
 void binding_Parse(object sender, ConvertEventArgs e)
    {
        temp.List["Item 1"] = e.Value.ToString();
        label1.Text = temp.List["Item 1"]; 
    } 
```

当控件的属性绑定到数据值时，将发生 Format 事件。

```
 void binding_Format(object sender, ConvertEventArgs e)
    {
        if (e.Value is Dictionary<string, string>) 
        { 
            Dictionary<string, string> source = (Dictionary<string, string>)e.Value;
            e.Value = source["Item 1"];

        } 
    } 
```

# php - 使用 for 循环从 MySQL 查询中增量选择值

> ID：12668474
> 
> 赞同：0
> 
> 时间：2012-10-01T06:32:41.263
> 
> 标签：php, mysql, for-loop

我正在尝试使用 for 循环通过 MySQL 查询选择增量值。我在下面包含了示例代码：

```
<?php

$day_1="sep_28";
$day_2="sep_29";
$day_3="sep_30";

$query = mysql_query("SELECT * FROM table WHERE id = '$id'");

while ($row = mysql_fetch_assoc($query))
{
for ($i = 1; $i <= 3; $i++) 
    {
        $dayVar = "day_".$i;
        //$dayVarCount = $dayVar."_count"; // Don't really need this anymore, so removed.
        $dayVarCount = $row[$$dayVar];
        echo "$$dayVar.': '.$dayVarCount<p>"; // Edited.
    }      
}
?> 
```

我想我已经接近了，但是当我运行代码时，我的页面显示如下：

$day_1.': '.0

$day_2.': '.2

$day_3.': '.5

有什么额外的建议吗？感谢您的大力帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:05:07.310

替换这一行：

```
echo "$$dayVar.': '.$dayVarCount<p>"; 
```

有了这个：

```
echo $$dayVar . ': ' . $dayVarCount . '<br>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:40:04.187

尝试一个变量变量：

```
for ($i = 1; $i <= 3; $i++) 
{
    $dayVar = "day_".$i;
    $dayVarCount = $dayVar."_count";
    $$dayVarCount = $row[$$dayVar];
    echo $$dayVar.': '.$$dayVarCount.'<p>'; // Edited.
} 
```

这基本上使用字符串来通过名称引用变量。

只是这样想：

```
$variable = 'hello';

$string = 'variable';

echo $$string;
// Is the same thing as:
echo $variable;

// Because you can thing of $$string as ${$string} ---> $variable when {$string} is interpreted into 'variable' 
```

[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:52:30.080

```
<?php

$day_1="January 1";
$day_2="January 2";
$day_3="January 3";

$query = mysql_query("SELECT * FROM dates WHERE id = '$id'");

while ($row = mysql_fetch_assoc($query))
{
for ($i = 1; $i <= 3; $i++) 
    {
        $var = $."day_".$i;
        $day_$i_count=$row['$var'];
        echo "$day_$i: $day_$i_count<p>";
    }       
}
?> 
```

你也可以试试这个代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T07:06:58.530

这一切似乎都过于复杂，但可能我没有充分理解这个问题。这行得通吗？

```
$day[1]="sep_28";
$day[2]="sep_29";
$day[3]="sep_30";

$query = mysql_query("SELECT * FROM table WHERE id = '$id'");

while ($row = mysql_fetch_assoc($query))
{
    foreach ($day as $day_str) 
    {
        echo $day_str . ':' . $row[$day_str] . '<p>';
    }      
} 
```

# android - 评论来自 android 应用程序的linkedin 更新

> ID：12668478
> 
> 赞同：1
> 
> 时间：2012-10-01T06:33:13.103
> 
> 标签：android, comments, linkedin

任何人都可以帮我对linkedin中的特定帖子发表评论/回复吗？

我可以使用以下代码使用人员 ID 通过我的 android 应用程序发送直接消息链接。

```
id = update.getUpdateContent().getPerson().getId() 
```

......

```
LinkedInAccessToken accessToken = new LinkedInAccessToken(
            linkedInTokens[0], linkedInTokens[1]);
    LinkedInApiClientFactory clientFactory = LinkedInApiClientFactory
            .newInstance(LinkedInConstants.LINKEDIN_CONSUMER_KEY,
                    LinkedInConstants.LINKEDIN_CONSUMER_SECRET);
    LinkedInApiClient client = clientFactory
            .createLinkedInApiClient(accessToken);
    client.sendMessage(Arrays.asList(id), "subjectText",
                    "postingText"); 
```

谁能帮我回复一个帖子？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:35:29.720

假设您知道要评论的更新的网络更新密钥，执行此操作的 API 调用将是：

[发布 http://api.linkedin.com/v1/people/~/network/updates/key=](http://api.linkedin.com/v1/people/~/network/updates/key=) {网络更新密钥}/update-comments

注释的 XML 正文示例：

```
<?xml version='1.0' encoding='UTF-8'?>
<update-comment>
  <comment>Really great article!</comment>
</update-comment> 
```

# java - 反射中无法识别 Java 继承

> ID：12668479
> 
> 赞同：2
> 
> 时间：2012-10-01T06:33:16.597
> 
> 标签：java, inheritance, reflection

我一般反对扩展，因为它在类之间创建了非常强的连接，很容易意外中断。

但是，我最终认为我已经找到了一个合理的案例——我想在现有系统中选择使用文件类型的压缩版本。压缩版本几乎与未压缩版本一样快，并且具有完全相同的可用方法（即读取和写入）——唯一的区别在于磁盘上的表示。因此，我让压缩版本扩展了未压缩版本，以便可以使用任何一种文件，只需选择性地实例化另一种类型即可。

```
public class CompressedSpecialFile extends SpecialFile(){ ... }

if (useCompression){
    SpecialFile = new CompressedSpecialFile();
} else {
    SpecialFile = new SpecialFile();
} 
```

但是，在程序的稍后阶段，我们使用反射：

```
Object[] values = new Object[]{SpecialFile sf, Integer param1, String param2, ...}
Class myclass = Class.forName(algorithmName);
Class[] classes = // created by calling .getClass on each object in values
constructor = myclass.getConstructor(classes); 
Algorithm = (Algorithm) constructor.newInstance(values) 
```

一切正常，但现在 myclass.getConstructor 类抛出 NoSuchMethodException，因为 SpecialFile 的运行时类型是 CompressedSpecialFile。

但是，我认为扩展应该是这样工作的——因为 CompressedSpecialFile 扩展了 SpecialFile，所以任何接受 SpecialFile 的参数都应该接受 CompressedSpecialFile。这是Java反射的错误，还是我理解的失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:35:23.410

嗯，对这个错误报告的响应似乎表明这是故意的。 [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4301875](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4301875)

> 出于兼容性原因，我们无法进行此更改。此外，我们希望 getConstructor 的行为类似于 getDeclaredMethod，后者也需要完全匹配，因此在不更改另一个的情况下更改一个是没有意义的。但是，可以添加一组额外的方法，这些方法的不同之处仅在于参数类型的匹配方式。在某些情况下，我们可能希望在反射期间在运行时应用编译器静态使用的相同重载解决算法，即在调试器中。但是，使用现有 API 实现此功能并不困难，因此将此功能添加到核心反射的情况很弱。

该错误报告已作为以下错误报告的副本关闭，它提供了更多实现细节： [http ://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=1b08c721077da9fffffffff1e9a6465911b4e?bug_id=4287725](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=1b08c721077da9fffffffff1e9a6465911b4e?bug_id=4287725)

> 解决方法getMethod
> 的用户必须准确识别传递给参数的类。
> 
> 评估
> 这个请求的本质是用户希望 Class.getMethod 应用与编译器相同的重载规则。我认为这是一个合理的要求，因为我看到在某些类型的反射程序（例如调试器和脚本解释器）中经常需要这样做，并且有一个标准的实现会很有帮助，以便每个人都能正确地做到这一点。然而，为了兼容性，现有 Class.getMethod 的行为应该保持不变，并定义一个新方法。有一种情况可以根据足迹忽略此功能，因为它可以使用现有的 API 来实现，尽管效率有些低。另见 4401287。共识似乎是我们应该在反射中提供重载解决方案。
> 出于兼容性原因， Class.get(Declared)+{Method,Constructor} 实现不应更改；应该引入新的方法。这些方法的规范确实需要修改以定义“匹配”。请参阅错误 4651775。

您可以继续深入研究那些引用的错误和我提供的实际链接（在那里进行了讨论以及可能的解决方法），但我认为这是有道理的（尽管为什么还没有实现一种在反射中反映 java oop 的新方法） ， 我不知道）。

就解决方法而言，我认为对于单级深度版本的继承，您可以在每个名称为扩展类的类上调用 getSuperclass() ，但这非常不雅，并且与您仅在您的课程以规定的方式实施。非常笨拙。不过，我会尝试寻找另一种选择。

# javascript - javascript amCharts 图表项目点击事件

> ID：12668482
> 
> 赞同：12
> 
> 时间：2012-10-01T06:33:20.857
> 
> 标签：javascript, jquery-mobile, amcharts

在[amCharts](http://www.amcharts.com/) flash 图表中，有一个事件名称 clickGraphItem ，它作为单击图形项目工作，在获取此事件后，我们可以对图形项目单击执行任何操作。

我需要[javascript amCharts](http://www.amcharts.com/javascript/)中的相同功能。那么是否可以在javascript amCharts中实现clickGraphItem？

请提供解决方案。任何源代码将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-01T08:01:02.790

您可以通过以下方式将事件处理程序添加到 AMCharts Javascript 库

```
// add click listener
chart.addListener("clickGraphItem", handleClick); 
```

这是 jsFiddle ：

[http://jsfiddle.net/amcharts2/cV8GG/](http://jsfiddle.net/amcharts2/cV8GG/)

# regex - VIM - 如何粘贴没有特殊字符的搜索寄存器？

> ID：12668484
> 
> 赞同：2
> 
> 时间：2012-10-01T06:33:27.737
> 
> 标签：regex, search, vim

在插入模式下，`Ctrl``r``/`（参见`:h "/`）将粘贴搜索寄存器的内容。但是，如果你用`*`搜索寄存器搜索一个词并粘贴，它会放入特殊的词边界字符`\<`和`\>`。或者，如果你幸运的话，你可能会得到 ' `\Vsearch`。我认为这很愚蠢，但我确信 VIM 有它让我的生活变得更艰难的原因。如果没有特殊的 vim 魔术字符，我将如何获取搜索寄存器的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:12:21.250

为什么您希望搜索寄存器包含除先前搜索模式之外的*任何其他内容？*`@/`包含模式，而不是匹配。

如果你这样做`/\Vfoo*bar`是正常的，并且预计你会`\Vfoo*bar`进入`/`登记册。与`/foo\*bar`你得到的地方一样`foo\*bar`……搜索寄存器的要点是要重复使用以进行进一步的搜索和替换：如果它包含`foo*bar`而不是`\Vfoo*bar`，你不能做`n`or `N`or `:s//baz`，这会让每个人的生活变得更加艰难。

由于没有`verynomagic`选项可以在你的`~/.vimrc`我猜你可以在粘贴之前对寄存器的内容进行替换。

```
fee faa foo*bar baz bam
/\Vfoo*bar<CR>
:reg /<CR>
\Vfoo*bar
:let @a = substitute(@\, '\\V', '', '')<CR>
"ap
foo*bar 
```

也许您可以创建一个一次性完成替换和粘贴的映射。

但我有一种预感，你*真正*想要的是重用匹配的文本，而不是搜索模式。如果我是对的，请参阅[此提示](http://vim.wikia.com/wiki/Copy_search_matches)以获取可能的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T08:10:26.243

搜索寄存器可能包含 no（简单`/foo`搜索）、少数（`\<cword\>`从 * 命令搜索）或很多（`^\%(foo\|bar\)\w\+!\?`）“特殊字符”。对于前两个，通常只有一个匹配，对于最后一个，可以有多个匹配。

最初我使用过滤掉特殊正则表达式原子的映射，但后来我编写了一个更通用的[PatternComplete 插件](http://www.vim.org/scripts/script.php?script_id=4248)（刚刚发布），它提供插入模式和命令行映射来插入匹配项。它还允许您输入正则表达式，然后插入所有匹配项。

# javascript - 多个鼠标悬停方法的示例在 FF 或 Chrome 上都不起作用，都在 IE 上起作用。为什么？

> ID：12668495
> 
> 赞同：0
> 
> 时间：2012-10-01T06:34:22.353
> 
> 标签：javascript, jquery, google-chrome, mouseover

我已经将我麻烦的 wenpage 压缩成一个简单的例子。当鼠标滑过它时，我想要一个简单的图像更改或替换。我尝试了多种方法，但没有一种方法能始终如一地工作。

这是一个测试网页的 html，所有鼠标悬停在 IE 中都可以正常工作，但在 FF 或 Chrome 中无法正常工作

```
<!DOCTYPE html>
<html lang="en">
  <head>
<title></title>

<!--[if IE]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</script>
    <script src="../js/jquery-1.8.0.min.js"></script>
    <script src="../js/jquery.colorbox.js"></script>
    <script>
        $(document).ready(function(){
            //Examples of how to assign the ColorBox event to elements   addnewbut
            $(".syncarea").hover(function() {
                $(this).attr("src","../images/syncarea.jpg");
                    }, function() {
                $(this).attr("src","../images/syncareafilld.jpg");
            });
            $('img').bind('mouseover mouseout', function() {
                $(this).attr({
                    src: $(this).attr('data-other-src') 
                    , 'data-other-src': $(this).attr('src') 
                })
            });
        });
if (document.images) { 

     img1on= new Image;
     img1on.src="../images/syncareafilld.jpg";  

     img1off= new Image;
     img1off.src="../images/syncarea.jpg";

} 

function rollon(imgName){
   if (document.images)
      {
             imgOn=eval(imgName + "on.src");
             document[imgName].src= imgOn;
      }
}

function rolloff(imgName)
 {
   if (document.images)
      {
            imgOff=eval(imgName + "off.src");
            document[imgName].src= imgOff;
      }
 }

</script>
  </head>
  <body>
    Quick test of browser rolover responces. <br> 
    <center>
    HTML style <br>
    <a nohref="#nohref" onMouseOver='syncarea.src="../images/syncareafilld.jpg"' onMouseOut='syncarea.src="../images/syncarea.jpg"'>
    <img src="../images/syncarea.jpg" name="syncarea" title="Special Functions Area (Sync Control panel)" usemap="#spclfuncarea" /></a><br>
    jQuery type 1<br>
      <img data-other-src="../images/syncareafilld.jpg" src="../images/syncarea.jpg" 
       title="Special Functions Area (Sync Control panel)" usemap="#spclfuncarea" /> <br>
       jQuery type 2 <br>
       <img src="../images/syncarea.jpg" class="syncarea"  title="Special Functions Area (Sync Control panel)" usemap="#spclfuncarea" /> <br>
      plain Javascript version 1<br>

      <A onmouseover="rollon('img1')" onmouseout="rolloff('img1')">
         <IMG SRC="../images/syncarea.jpg" name="img1" title="Special Functions Area (Sync Control panel)" 
             usemap="#spclfuncarea" /> </A><br>

    </center>
        <map name="spclfuncarea" id="spclfuncarea">

      <area shape="rect" coords="7,44,94,66" href="maksats.html" title="Make Satellite Databases" />
      <area shape="rect" coords="107,44,185,67" href="syncsats.html" title="Synchronize Databases" />
      <area shape="rect" coords="86,14,184,35" class="small" href="#dbtyp-info" title="Database Type Marker" alt="Database Type"/>

      <area shape="default"  nohref="#nohref"  title="Special functions area."/> </map>  </body>
</html> 
```

为什么这些不适用于 FF 和 Chrome？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:04:24.820

我测试了你的页面，似乎 jquery 和 imagemaps 有问题。或者他们需要以其他方式对待。

如果您省略“usemap”属性。HTML、Jquery Type2 和纯 JavaScript 版本完美运行。

我认为要么你必须将你的事件附加到地图上，而不是使用该地图的元素。或者你只需​​要单独对待它。

如果将事件附加到地图不起作用，请参阅此以获得另一个提示：

[http://jquery-howto.blogspot.de/2009/01/jquery-and-html-image-maps.html](http://jquery-howto.blogspot.de/2009/01/jquery-and-html-image-maps.html)

**编辑：**再次测试。将事件附加到地图将不起作用。因此，您需要以特殊方式处理这些 imageMap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:39:48.113

尝试将您的事件替换`mouseover mouseout`为`mouseenter mouseleave`. 你可能也想读一读[这个](http://www.bennadel.com/blog/1805-jQuery-Events-MouseOver-MouseOut-vs-MouseEnter-MouseLeave.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:56:05.570

如果您试图通过以下代码使用和事件来获得`hover`效果`mouseover``mouseout`

```
$('img').bind('mouseover mouseout', function() {...}) 
```

那么它就行不通了。

相反，您可以尝试使用`mouseenter`并且`mouseleave`仅在具有属性的图像上进行悬停效果`data-other-src`

```
$('img[data-other-src]').on('mouseenter', function(){
    // code for mouseenter
}).on('mouseleave', function(){
    // code for mouseleave
}); 
```

# php - 在 Yii CGridView 的标题列中禁用排序

> ID：12668496
> 
> 赞同：4
> 
> 时间：2012-10-01T06:34:24.553
> 
> 标签：php, yii, yii-extensions, yii-components, yii-events

Yii 提供列表排序功能。如何禁用排序，以便在单击列标题时不会对我的记录进行排序？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-01T06:43:53.540

`'enableSorting' => false` 在您的列表/网格视图定义中设置 。

```
$this->widget('zii.widgets.CListView', array(
        ......
        'enableSorting' => false,
        ......
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T07:08:01.887

使用 Bootstrap 时，您可以使用以下语法禁用排序 -

```
$this->widget('bootstrap.widgets.TbExtendedGridView',
  array(
         ......
         'enableSorting' => false, //tag for sorting - true or false
         .........
  )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T08:29:48.823

如果你使用[GridView](http://www.yiiframework.com/doc-2.0/yii-grid-gridview.html)

然后你可以这样做：

```
$dataProvider =  new yii\data\ActiveDataProvider([
        'sort'=>false,
    'query' => **some query here**
]); 
```

或者如果你想对某些列进行排序：

```
$dataProvider =  new yii\data\ActiveDataProvider([
            'sort'=>['attribute'=>[**attribute names here**]],
        'query' => **some query here**
    ]); 
```

然后在您的小部件中使用此*数据提供程序*`GridView`：

```
<?= GridView::widget([
     'dataProvider'=>$dataProvider,
      ...
]) ?> 
```

# ios - 在 xcode 4.3.2 上安装 phonegap 版本 2.0.0 时出错

> ID：12668502
> 
> 赞同：0
> 
> 时间：2012-10-01T06:35:12.103
> 
> 标签：ios, xcode, cordova

我正在尝试使用以下链接中给出的步骤安装新的 phonegap 2.0.0 版：-

```
http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS 
```

但是当我运行 ./create 命令时，我收到以下错误：-

```
/Volumes/Cordova-2.0.0/bin/replaces: line 28: tmpFile: Read-only file system
mv: tmpFile: No such file or directory 
```

当我从我的文件夹位置启动 xcode.proj 时，我没有将我的项目名称作为列表中的目标（下拉列表包含“ **TESTING** ”、“CordovaLib”、“CordovaLibApp”）并且我没有得到信息plist 文件也是。

谁能告诉我为什么会这样。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:38:14.643

使用`sudo`并提供管理员凭据，例如：

```
sudo ./create 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:32:05.297

这听起来像是在 2.0 中尝试创建名称或路径中包含空格的项目时发生的错误。这在 2.1 中已修复（或选择不带空格的路径和名称）

# asp.net-mvc-3 - MVC3 Razor 视图引擎中带有目标 div 的部分视图显示

> ID：12668504
> 
> 赞同：2
> 
> 时间：2012-10-01T06:35:20.870
> 
> 标签：asp.net-mvc-3

我的控制器动作是：

```
 public ActionResult PVInPage()
        {
            return View();
        }

        public ActionResult ViewPage2()
        {
            return PartialView();
        } 
```

我的主要观点：

```
@using (Html.BeginForm("ViewPage2", "PartialViewInPage"))
{    
    <input type="submit" value="Call Page Two" />  
}

<div id="DisplayPartilView">

        @*display partial view *@

</div> 
```

我的部分观点是：

```
 @{
        ViewBag.Title = "View Page 2";
    }

    <div style="width:500px; height:200px; background-color:Gray" >

     <h1> This is my Partial view </h1>

    </div> 
```

现在我想做：当我在主视图中单击提交按钮时，我的部分视图出现在

我的主视图内部 div 带有 id="DisplayPartilView"。感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:42:57.310

如果您想将 data/html 加载到页面中而不导航到其他页面，则需要使用 Ajax。

ASP.Net MVC 提供了一组使用 Ajax 的助手（它们都在后台使用[jQuery.Ajax](http://api.jquery.com/jQuery.ajax/)，因此您始终可以返回到一个级别并手动编写您的 ajax 调用）。

但在您的情况下，`Ajax.BeginForm`它提供了您需要的一切：

因此，将您的主视图更改为：

```
@using (Ajax.BeginForm("ViewPage2", "PartialViewInPage", 
        new AjaxOptions() { UpdateTargetId = "DisplayPartilView" }))
{    
    <input type="submit" value="Call Page Two" />  
}

<div id="DisplayPartilView">

        @*display partial view *@

</div> 
```

为了使其工作，您需要在主视图或 jQuery 之后的布局文件中引用以下脚本：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:43:25.770

```
@using (Html.BeginForm("ViewPage2", "PartialViewInPage")) 
```

将刷新页面，这就是您需要的原因`ajax`

[.serialize()](http://api.jquery.com/serialize/)从所有输入中获取数据，[.ajax()](http://api.jquery.com/jQuery.ajax/)发出`post`请求，然后设置部分：

```
$('#DisplayPartilView').html(response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:46:08.577

在我的项目中，我正在这样做，它在下面

这是我的按钮，我点击然后我的部分视图像这样加载到我的 div 中

```
<script type="text/javascript">
    $(function () {
        $("#btnLode").click(function () {
            $("#LodeForm").load("/City/ShowAllState", function () {
                alert("Your page loaded Successfully !!!!!!!");
            });
        });
    });

</script>

<div id="LodeForm">
</div> 
```

这是这个问题的另一个解决方案

```
@using (Ajax.BeginForm("SearchCountry", "City",
    new AjaxOptions
    {
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "Get",
        LoadingElementId = "ajax-loader",
        UpdateTargetId = "CountryListID",
    }))
{

    <input type="submit" value="search Country" data-autocomplete-source="@Url.Action("SearchCountry", "City")" />        
}
<div id="CountryListID">
</div> 
```

我想这会对你有所帮助

# ipad - 是否可以通过 iPad 应用程序编辑 .ePub 文件？

> ID：12668509
> 
> 赞同：3
> 
> 时间：2012-10-01T06:35:43.470
> 
> 标签：ipad, pdf, epub

iPad 应用程序的要求是显示一个`ebook`允许用户编辑和保存它。进一步的要求如导航和书签。确切地说，与**iBooks**应用程序类似。

我的问题是，可以编辑`.epub`文件吗？我相信我们可以编辑`.pdf`文件（正如我在 iTunes 上看到的一些应用程序）。我尝试在谷歌上搜索，我只能找到，如何显示 ePub 文件以及如何自定义 ePub 文件的外观。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:43:35.850

看一下

*   [**印记**](http://code.google.com/p/sigil/)

由于它是开源的，您可以对其进行调整以在 IOS 上运行。

维基百科的[ePub 编辑系统列表](http://en.wikipedia.org/wiki/EPUB#Editing_systems)还没有 IOS 条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T15:13:58.877

有一个用于编辑 ePub 文件的应用程序，但目前有点贵（撰写本文时为 14.99 美元）：

*   [Easy ePub Creator Pro（链接到 App Store）](https://itunes.apple.com/us/app/easy-epub-creator-pro/id496165321?mt=8)

还有一种使用[GoodReader](https://itunes.apple.com/us/app/goodreader-4/id777310222?mt=8&ign-mpt=uo%3D2)的方法，但是需要几个步骤来获取一个 ePub 文件并将其放入 GoodReader，可编辑，然后在编辑后反转该过程。但是GoodReader比上面的选项便宜，而且很多iPad用户已经将它用于其他目的，所以我觉得值得一提。以下博客文章涵盖了它。

*   [完全在 iPad 上编辑 ePub 文件（“The Bergen Street Paper Co.”的博文）](http://www.bergenstreetpaper.com/2010/12/editing-epub-files-entirely-on-ipad.html)

此外，Kurt 的回答指出，[维基百科的 ePub 编辑器列表](http://en.wikipedia.org/wiki/EPUB#Editing_systems)不包含 iOS 版本，但值得注意的是，该列表中有几个条目在网络上运行。您或许可以在 iPad 上的 Mobile Safari 中编辑您的图书。我没有尝试过，但它可能值得研究。

# javascript - 在 rhomobile 的 $.getJSON 中没有调用函数（数据）

> ID：12668510
> 
> 赞同：0
> 
> 时间：2012-10-01T06:36:06.643
> 
> 标签：javascript, ruby-on-rails-3, jquery, rhomobile

我在身体负载的javascript回调函数中有以下代码：

```
 alert("calling get json");
 $.getJSON("http://localhost:3000/books/show.json", {book: 3}, function(data) 
 {
         alert("data received");
 }); 
```

在收到“calling get json”被调用的警报后，服务器返回状态 200 ok。仍然控制没有传递给函数（数据），并且没有调用“收到数据”的警报。
那么，怎么了？

# php - 我可以声明一个变量并稍后分配一个值吗？

> ID：12668512
> 
> 赞同：3
> 
> 时间：2012-10-01T06:36:41.713
> 
> 标签：php, variables

我可以声明一个变量并稍后赋值吗？

这在某种程度上可行吗？

```
$redirect = "recording.php?album=$albumid";

$albumid = 4; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T07:15:58.387

如果您想要更大的灵活性，那么您可以将字符串包装在一个函数中，如下所示：

```
function getRedirect($albumid)
{
    return "recording.php?album=$albumid";
} 
```

然后像这样调用它：

```
$redirect = getRedirect(4); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T06:39:28.733

不，你不能做你所要求的。不过，还有其他选择。

```
$redirect = "recording.php?album=";

$albumid = 4;

$redirect .= $albumid;

// use your $redirect var here... 
```

这够了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T06:39:34.003

负数...值必须在使用前分配给变量，否则它将返回空值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:57:23.387

您可以使用此代码。

```
$albumid = "";
$redirect = "recording.php?album=$albumid";
$albumid = 4; 
```

实际上，当您使用 $redirect = "recording.php?album=$albumid"; 那个时候它得到错误未定义的变量名。所以，首先将该变量设置为null..然后根据需要更改值。

这可以帮助你吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T06:42:15.033

不，你不能这样做。相反，只需将专辑 ID 附加到重定向 url 即可。

```
 $redirect = "recording.php?album=";
        $albumid = 4;
        $redirect .= $albumid; 
```

快乐编码:) :)

# php - mysql 在 2 个表上查询总和

> ID：12668516
> 
> 赞同：2
> 
> 时间：2012-10-01T06:36:55.427
> 
> 标签：php, mysql, sql

我在生成适用于我所处情况的查询时遇到了一些困难。以下是详细信息...

1 表 = 计费
1 表 = 计费日期

billing = 基本上在生成发票时，它会在计费中创建一行，其中包含主键、发票 ID、用户 ID、用户用户名、他们的实际姓名、发票日期、发票总额和付款

计费日期 = 当对发票进行付款时，它会在计费日期中创建一行，其中包含一个主键、一个 id（与计费表中的主键相同）、一个发票 id（与billing), 用户 id (与 billing 中的用户 id 相同), 支付日期, 支付金额

我正在尝试创建一个帐龄报告，该报告将提取每张未结发票并将其显示在 PHP 中的 30/60/90/90+ 表中给最终用户。因此，如果发票 #12 上有 100 美元的余额，以及两次 10 美元的付款，并且发票已有 60 天的历史，它将在报告中显示此信息。这是我所拥有的...

```
 $sql17 = "SELECT 
 $mysql_billing.login_id, $mysql_billing.primary_key, $mysql_billing.a_name,
 SUM($mysql_billing.custotal) AS finaltotal,
 SUM($mysql_billing_dates.amount) AS paidtotal,
 $mysql_billing.custotal - $mysql_billing_dates.amount AS total
 FROM $mysql_billing
 LEFT JOIN $mysql_billing_dates ON $mysql_billing.login_id = $mysql_billing_dates.login_id
 GROUP BY login_id
 ORDER BY a_name ASC"; 
```

当我运行它时，有些是正确的，而大多数不是。我无法弄清楚不一致是什么。任何想法将不胜感激，也许我走错了路？ **更多**
当我执行以下操作时，正确的值会显示...

```
 SELECT 
 $mysql_billing.login_id, $mysql_billing.primary_key, $mysql_billing.a_name,
 SUM($mysql_billing.custotal) AS finaltotal
 FROM $mysql_billing
 GROUP BY login_id
 ORDER BY a_name ASC 
```

但在原始示例中，它并不总是拉出正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:49:29.320

好的，我相信我明白发生了什么。

因此，大概每个表中的每个 login_id 都可以有多个记录，这就是您要进行 sum 和 group by 的原因。但是，当您取出聚合和分组依据时，看看您的查询给您带来了什么，我想您可能会理解这个问题。

假设您有表 1，其中有 2 条记录用于 login_id xxx1234，表 2 有 3 条记录用于该 login_id。然后，当您离开时加入他们，您将获得**6 条记录**。

例如

```
table 1:
  login, custotal
  xxx111, 10
  xxx111, 20

table 2:
  login, amount
  xxx111, 30
  xxx111, 40
  xxx111, 50

after the join:
  login, custotal, amount
  xxx111 10, 30
  xxx111 10, 40
  xxx111 10, 50
  xxx111 20, 30
  xxx111 20, 40
  xxx111 20, 50 
```

因此，您可能会获得数倍于您预期金额的金额。

相反，您想要做的是这样的：

```
 SELECT 
 billing_totals.login_id, billing_totals.primary_key, billing_totals.a_name, 
 billing_totals.finaltotal,
 billing_dates_totals.paidtotal,
 (billing_totals.finaltotal - billing_dates_totals.paidtotal) AS total
 FROM
   (SELECT $mysql_billing.login_id, 
   $mysql_billing.primary_key, 
   $mysql_billing.a_name, 
   SUM($mysql_billing.custotal) AS finaltotal 
   FROM $mysql_billing GROUP BY login_id) billing_totals 
 LEFT JOIN 
   (SELECT $mysql_billing_dates.login_id, 
   SUM($mysql_billing_dates.amount) AS paidtotal 
   FROM $mysql_billing_dates GROUP BY login_id) billing_dates_totals 
 ON (billing_totals.login_id = billing_dates_totals.login_id) 
 ORDER BY a_name ASC"; 
```

可能需要稍微调整一下，因为我目前没有 mysql 来测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:55:57.267

> `$sql17 = "SELECT $mysql_billing.login_id, $mysql_billing.primary_key, $mysql_billing.a_name, SUM($mysql_billing.custotal) AS finaltotal, SUM($mysql_billing_dates.amount) AS paidtotal, SUM($mysql_billing.custotal) - SUM($mysql_billing_dates.amount) AS total FROM $mysql_billing LEFT JOIN $mysql_billing_dates ON $mysql_billing.login_id = $mysql_billing_dates.login_id GROUP BY login_id ORDER BY a_name ASC";`

编辑：我为你尝试了这样的事情。

```
SELECT a.id, (select sum(custotal) from `billing` where id=a.id) as total1,(select sum(amount) 
from `billing_dates`
where id=a.id) as total1 from `billing` a 
```

# c# - 如何在远程服务器上执行 bat 文件？

> ID：12668518
> 
> 赞同：0
> 
> 时间：2012-10-01T06:37:07.500
> 
> 标签：c#, batch-file

我有两台物理机。第一台机器想在第二台机器上执行一个 bat 文件。我在第二台服务器上创建了一个共享位置，并尝试从第一台机器上运行它，但它不起作用。bat文件可以在本地机器上正常运行。

这是 bat 文件中的代码示例。创建文件只是一个蝙蝠。

```
echo. 2>EmptyFile.txt 
```

这是我用来执行 bat 文件的代码。

```
private static void ExecuteBatFile()
{
    System.Diagnostics.Process proc = new System.Diagnostics.Process();
    System.Security.SecureString ssPassword = new System.Security.SecureString();

    proc.StartInfo.UseShellExecute = false;
    proc.StartInfo.FileName = @"\\my_remote_server\my_bat.bat";
    proc.StartInfo.Domain = "my_domain";
    proc.StartInfo.UserName = "my_username";

    Console.Write("Enter your password: ");
    string password = Console.ReadLine();

    for (int x = 0; x < password.Length; x++)
    {
        ssPassword.AppendChar(password[x]);
    }

    proc.StartInfo.Password = ssPassword;
    proc.Start();
} 
```

我想知道如何在远程服务器上运行 bat 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:42:26.990

[您可以使用PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553)在远程机器上执行命令。我用它来执行批处理文件并将参数传递给它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T05:04:55.357

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.Run "psexec \\my_remote_server -u my_username -p " & password & " my_bat.bat" 
```

或者，如果您需要指定域：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.Run "psexec \\my_remote_server -u my_domain\my_username -p " & password & " my_bat.bat" 
```

`psexec`**是我**知道如何在远程计算机上执行程序的唯一方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-21T13:35:13.707

这可以从命令提示符或 bat 文件轻松完成

```
wmic /node:MachineName> process call create "cmd.exe c:\Test\Test.bat" 
```

对于帮助类型：

```
wmic /? 
```

# asp.net - 在 WCF 服务中使用企业库数据？

> ID：12668521
> 
> 赞同：0
> 
> 时间：2012-10-01T06:37:21.770
> 
> 标签：asp.net, wcf, enterprise-library

我想在 WCF 服务（Visual Studio 2010、ASP.net 4.0、VB.net） 中使用[Microsoft 企业库。](http://msdn.microsoft.com/en-us/library/ff648951.aspx)

但是当我输入`Microsoft.Practices.EnterpriseLibrary`它时，它只显示`Common`和“记录”，没有`Data`......？

是的，引用了数据 :-) 这在我的 asp.net 页面中运行良好。

当我尝试使用`Imports Microsoft.Practices.EnterpriseLibrary.Data`它时说：

> 导入“Microsoft.Practices.EnterpriseLibrary.Data”中指定的命名空间或类型不包含任何公共成员或找不到。确保命名空间或类型已定义并包含至少一个公共成员。确保导入的元素名称不使用任何别名。

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:03:03.177

固定的。以前我使用 WCF 服务库，现在我使用 WCF 服务应用程序重新创建了它，它编译得很好。谢谢！

# php - 在 php 中显示验证码图像

> ID：12668525
> 
> 赞同：0
> 
> 时间：2012-10-01T06:37:37.407
> 
> 标签：php, captcha

当我显示验证码图像时，出现以下错误：-

警告 (2): imagettftext() [function.imagettftext]: 找不到/打开字体我已将字体文件保存在根目录下。

这是我的代码 -

```
$path = fullpath to site images folder
$imgname = 'noise.jpg';
$imgpath  = $path.'/'.$imgname;

$captchatext = md5(time());
$captchatext = substr($captchatext, 0, 5);
$_SESSION['captchatext'] = $captchatext;
$im = imagecreatefromjpeg($imgpath); 
$grey = imagecolorallocate($im, 128, 128, 128);
$font = site_root_directory_path/BIRTH_OF_A_HERO.ttf;
header('Content-Type: image/png');
$im = imagecreatetruecolor(400, 30);
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);
$text = $_SESSION['captchatext'];
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);
imagepng($im);
imagedestroy($im); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:58:11.120

您的字体路径需要是绝对的或相对于脚本。

例如：

```
$font = '/var/www/website/BIRTH_OF_A_HERO.ttf'; - absolute
$font = '../../BIRTH_OF_A_HERO.ttf'; - relative 
```

# php - Highstock mysql json多数据

> ID：12668527
> 
> 赞同：2
> 
> 时间：2012-10-01T06:37:41.567
> 
> 标签：php, mysql, json, highcharts, highstock

我在尝试通过 Json 将多个数据传递到 Highstock 图表时遇到问题，这是我目前的代码：

```
 $(function() {
    var seriesOptions = [],
        yAxisOptions = [],
        seriesCounter = 0,
        names = ['MSFT', 'AAPL'],
        colors = Highcharts.getOptions().colors;

    $.each(names, function(i, name) {

        $.getJSON('data.php',   function(data) {

            seriesOptions[i] = {
                name: name,
                data: data
            };

            // As we're loading the data asynchronously, we don't know what order it will arrive. So
            // we keep a counter and create the chart when all the data is loaded.
            seriesCounter++;

            if (seriesCounter == names.length) {
                createChart();
            }
        });

    });

    // create the chart when all data is loaded
    function createChart() {

        chart = new Highcharts.StockChart({
            chart: {
                renderTo: 'container'
            },

            rangeSelector: {
                selected: 4
            },

            yAxis: {
                labels: {
                    formatter: function() {
                        return (this.value > 0 ? '+' : '') + this.value + '%';
                    }
                },
                plotLines: [{
                    value: 0,
                    width: 2,
                    color: 'silver'
                }]
            },

            plotOptions: {
                series: {
                    compare: 'percent'
                }
            },

            tooltip: {
                pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
                valueDecimals: 2
            },

            series: seriesOptions

        });
    }
}); 
```

这是我的 data.php 文件：

```
$query = "SELECT tiempo,Fp1Ref,F7Ref
            FROM GraficaEEG limit 10";
    $data = mysqli_query($dbc, $query);
    $i=0;
    while($row = mysqli_fetch_array($data)) {

        $rows[$i]=array((float)$row['tiempo'],(float)$row['Fp1Ref']); 
        $rows1[$i]=array((float)$row['tiempo'],(float)$row['F7Ref']); 

        $i++;
    }

    echo json_encode($rows), "\n";
    echo json_encode($rows1); 
```

我以这种形式接收数据：

```
[[0,3001],[0.005,4937.22],[0.01,4130.55],[0.015,4213.15],[0.02,4010.61],[0.025,3914.34],[0.03,3785.33],[0.035,3666.13],[0.04,3555.25],[0.045,3447.77]]

[[0,2995.12],[0.005,4931.59],[0.01,4125.99],[0.015,4203.38],[0.02,4005.27],[0.025,3911.41],[0.03,3777.35],[0.035,3659.15],[0.04,3552.75],[0.045,3442.12]] 
```

我不知道我做错了什么以及如何将两组数据传递给 Highstock 图表，如果我只传递一个 $rows 它可以工作，但它在三行中给了我相同的数据，我会将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:42:54.173

有 3 种方法可以将数据传递到 Highstock。

1.  数值列表。例如`data: [0, 5, 3, 5]`

2.  具有两个值的数组列表，例如`data: [[5, 2], [6, 3], [8, 2]]`

3.  具有命名值的对象列表。

例如

```
data: [{
    name: 'Point 1',
    color: '#00FF00',
    y: 0
}, {
    name: 'Point 2',
    color: '#FF00FF',
    y: 5
}] 
```

您可以为每一行创建 Json 对象并将它们存储在 Json 数组中。然后在另一个 Json 对象中使用命名属性（也称为键）传递 Json 数组，该对象将保存多个 Json 数组，每个数组具有不同的键。

在返回的 Response 中，使用其 Key 检索每个数组。

查看文档以获取更多详细信息： http: [//api.highcharts.com/highstock#series.data](http://api.highcharts.com/highstock#series.data)

我从来没有在 PHP 上工作过所以，我不能帮助直接，但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T18:22:23.687

我没有异步加载数据，而是将保存最终数据字符串的变量转储到 Javascript 中。

例如，

```
chart = new Highcharts.StockChart({
          chart: { renderTo: 'container' },

          ...all those chart options...

          series: <?php echo $formattedDataString; ?>

        }); 
```

因此，当 Highcharts 加载时，所有数据都已经到位。当然，这假设数据格式正确，正如 Hardik 所提到的。
如果您需要动态更新数据，那么您仍然可以进行 AJAX 调用和 .update() 图表。

# sql - SQL Server：GROUP BY 子句获取逗号分隔值

> ID：12668528
> 
> 赞同：100
> 
> 时间：2012-10-01T06:37:41.777
> 
> 标签：sql, sql-server-2008

> **可能重复：**
> [SQL Server 中的 SQL group_concat 函数](https://stackoverflow.com/questions/8868604/sql-group-concat-function-in-sql-server)

我正在寻找创建一个查询，但不知何故我无法这样做。任何人都可以在这里帮助我吗？

原始数据

```
ID    ReportId     Email
1     1            a@a.com
2     2            b@b.com
3     1            c@c.com
4     3            d@d.com
5     3            e@e.com 
```

我想按 分组`ReportId`，但所有电子邮件都应该用逗号分隔。所以结果应该是：

```
ReportId     Email
1            a@a.com, c@c.com
2            b@b.com
3            d@d.com, e@e.com 
```

做这个的最好方式是什么？

我正在尝试 group by 子句，但如果还有其他事情，我也愿意实施。我非常感谢您的时间和帮助。谢谢你。

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-10-01T06:40:09.970

试试这个：

```
SELECT ReportId, Email = 
    STUFF((SELECT ', ' + Email
           FROM your_table b 
           WHERE b.ReportId = a.ReportId 
          FOR XML PATH('')), 1, 2, '')
FROM your_table a
GROUP BY ReportId 
```

# [SQL小提琴演示](http://sqlfiddle.com/#!3/0c7d6/2)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-01T06:40:47.743

```
SELECT  [ReportId], 
        SUBSTRING(d.EmailList,1, LEN(d.EmailList) - 1) EmailList
FROM
        (
            SELECT DISTINCT [ReportId]
            FROM Table1
        ) a
        CROSS APPLY
        (
            SELECT [Email] + ', ' 
            FROM Table1 AS B 
            WHERE A.[ReportId] = B.[ReportId]
            FOR XML PATH('')
        ) D (EmailList) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!18/3192a/1)

# ios - 如何在 UDP 中传输 NSData？

> ID：12668541
> 
> 赞同：1
> 
> 时间：2012-10-01T06:39:10.820
> 
> 标签：ios, cocoa-touch, udp, nsdata, avcapturesession

我一直在开发视频聊天应用程序，我们也为 windows 和 android 开发了相同的应用程序，现在我正在尝试为 IOS 做并在它们之间进行通信。为此，我通过这个委托捕获了原始视频数据......

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
       fromConnection:(AVCaptureConnection *)connection 
```

现在我想使用套接字并通过网络传输原始数据。

```
 UIImage *temp_image = [self getUIImageFromBuffer:sampleBuffer];
        NSData *data = UIImageJPEGRepresentation(temp_image, 1.0);

        const void *bytes = [data bytes];

udp_obj->send_packet((char*)bytes, size, "30.0.0.104", 2030); 
```

其中 udp_obj 是 C++ udp 类。

我一直使用这个字节作为原始数据通过 UDP 传输，我在这里做吗？其他端数据包正在接收，但每个数据包看起来都一样，我不确定我是否朝着正确的方向前进。谁能指导我...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:44:07.833

上面的代码工作正常。如果有人想通过 UDP 发送原始数据，你可以按照这个。

# asp.net - 在虚拟主机上部署网站

> ID：12668543
> 
> 赞同：0
> 
> 时间：2012-10-01T06:39:20.277
> 
> 标签：asp.net, web-deployment

我创建了一个 ASP.net 网站。我有虚拟主机，并且有用于部署网站的 ftp 访问权限。当我部署或者我们可以说复制我的网站的发布时，它工作正常**www.myweb.in**。但是我想将网站链接结构设为**www.myweb.in/betav1**。我已经`betav1`在根目录上创建了文件夹并将我所有的发布内容复制到它，但似乎它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:42:00.870

您将需要在您的域下设置一个虚拟目录。也许托管服务提供商将能够为您提供这些权限。检查有关如何管理这些文件/说明。

请阅读[本文](http://msdn.microsoft.com/en-us/library/bb763173%28v=vs.100%29.aspx)以了解如何在 IIS 7 上配置虚拟目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:42:09.620

可能有很多因素可以回答为什么它不起作用。

app_code,bin_app_data 文件夹必须在您网站的主根目录下。您的 web.config 是否为虚拟主机正确配置？您在 Web 应用程序中的链接格式是否正确，以 /betav1 开头？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T07:24:55.767

这主要是因为您`betav1`创建的文件夹未配置为 IIS 中的应用程序，或者它不是虚拟目录。

您的网站将指向服务器中配置为虚拟目录的文件夹。由于子文件夹是您创建的，因此不会将其标记为虚拟目录或服务器中的应用程序。这是问题的可能性很大。

要将此文件夹配置为“应用程序”，您需要转到其属性并单击创建按钮将其配置为应用程序。

由于它是远程服务器，因此您应该询问您的服务提供商。一旦你这样做了，你的问题很可能会得到解决。

# objective-c - 从 AppController 调用正在运行的 CCLayer 方法

> ID：12668545
> 
> 赞同：3
> 
> 时间：2012-10-01T06:39:31.350
> 
> 标签：objective-c, cocos2d-iphone

我目前正在为 iOS 编写一个 Cocos2d 游戏。

在这个游戏中，我创建了一个 GameState 单例来保存我的游戏状态（项目详细信息和位置、持续时间、分数等）。

我的主 CCScene 包含一个`-(void) saveData:`方法，当从正在运行的游戏（玩家点击 backToMenu 按钮 -> `-(void) backToMenu:`）中调用该方法时，会相应地执行：

我们被送回菜单，因为`GameState.sharedState -> PLAYING = true`出现了 Resume 按钮并允许我们恢复当前游戏。

直到这里，它按预期工作。

现在，我如何`-(void) backToMenu:`从`appController`'s 方法调用该方法`applicationWillEnterBackground`？

我尝试调用，`[[CCDirector sharedDirector] runningScene]`但它以某种方式崩溃，也在恢复时，这意味着我什至不确定我是否保存了正确的内容。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:52:13.260

在 AppDelegate.h 中添加：

```
@class CCLayer;

@interface AppController : NSObject <UIApplicationDelegate, CCDirectorDelegate,UIGestureRecognizerDelegate>
{
    CCLayer             *mCurrentLayer;

}

@property (nonatomic, retain) CCLayer *currentLayer; 
```

在 AppDelegate.mm 中添加：

```
@implementation AppController
@synthesize currentLayer = mCurrentLayer; 
```

在您的 Layer init 类中使用它。在所有场景方法中。

```
@implementation MyMainMenu

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    MyMainMenu *layer = [MyMainMenu node];

    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    app.currentLayer = layer;

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
} 
```

您可以检查项目中的任何位置..

在 appDelegate

```
-(void) applicationDidEnterBackground:(UIApplication*)application 
{
   if([self.currentLayer  isKindOfClass:[MyMainMenu class]])
   MyMainMenu *mm = (MyMainMenu*) self.currentLayer;
   [mm calFunction]; 
} 
```

在其他班级：

```
-(void)callUpdateButtonsInLayer
{    
     AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
     if([app.currentLayer  isKindOfClass:[MyMainMenu class]])
     {
         MyMainMenu *mm = (MyMainMenu*) app.currentLayer;
         [mm calFunction]; 
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T19:43:34.117

**更新：**刚刚发现[这个](https://stackoverflow.com/questions/2191594/how-to-send-and-receive-message-through-nsnotificationcenter-in-objective-c)。例如，我是否可以`NSNotification`在 appController 的`applicationWillEnterBackground`方法中创建一个，然后在我的 CCLayer 对象中处理它，在该对象中我会在其`init`方法中添加一个 NSObserver 来接收此类通知？

# android - 共享位置与共享意图活动

> ID：12668551
> 
> 赞同：13
> 
> 时间：2012-10-01T06:40:05.620
> 
> 标签：android, android-intent, android-location

我需要使用共享意图活动从我的应用程序中共享位置，我已经经历了一些示例并且知道如何实现共享意图。但是我被困在 setType 上。我需要我的应用程序来共享位置详细信息以及地图上的用户位置。

顺便说一句，我复制了一个带有非常相似问题的用户代码“无罪”

任何帮助将不胜感激。

```
Intent intent1 = new Intent(Intent.ACTION_SEND); 
intent1.setType("text/plain"); 
intent1.putExtra(Intent.EXTRA_TEXT, "The status update text"); 
startActivity(Intent.createChooser(intent1, "Select prefered Service")); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T07:03:24.923

这是使用位置向地图触发意图的代码：

```
String uri = "geo:" + latitude + ","
                    +longitude + "?q=" + latitude
                    + "," + longitude;
startActivity(new Intent(android.content.Intent.ACTION_VIEW,
                    Uri.parse(uri))); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-24T11:57:42.997

```
Double latitude = user_loc.getLatitude();
Double longitude = user_loc.getLongitude();

String uri = "http://maps.google.com/maps?saddr=" +latitude+","+longitude;

Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.setType("text/plain");
String ShareSub = "Here is my location";
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, ShareSub);
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, uri);
startActivity(Intent.createChooser(sharingIntent, "Share via")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-01T05:45:39.760

```
 String uri = "https://www.google.com/maps/?q=" + latitude+ "," +longitude ;
    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,  uri);
    startActivity(Intent.createChooser(sharingIntent, "Share in...")); 
```

# java - 映射到列表转换

> ID：12668553
> 
> 赞同：0
> 
> 时间：2012-10-01T06:40:14.007
> 
> 标签：java, xml, parsing

我有两个类，其中一个正在实现地图，我想将其更改为列表，但我面临的问题是 get 和 put 方法。

我的第一堂课是解析 xml 并将其返回到地图中，所以请帮我将其转换为列表 这是我的第一堂课

```
public class XmlReaderPrompt {  
    public Map<String, PromptBean> load(String langMode)
    {
        String fileName="db_processor/English.xml";     
        DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
        InputStream prompt_configfile=Thread.currentThread().getContextClassLoader().getResourceAsStream(fileName);
        DocumentBuilder db = null;
        Map<String, PromptBean> promptMap = new HashMap<String, PromptBean>();
        try {
            try {
                db = dbf.newDocumentBuilder();
            } catch (ParserConfigurationException e) {              
                e.printStackTrace();
            }
            Document doc = null;
            try {
                doc = db.parse(prompt_configfile);
            }
            catch(FileNotFoundException fnfexp)
            {
                fnfexp.printStackTrace();               
            }
            catch (SAXException e) {                
                e.printStackTrace();
            }           
            NodeList nodeList=doc.getElementsByTagName("prompt");
            for(int i=0;i<nodeList.getLength();i++)
            {
                Node node=nodeList.item(i);
                if(node.getNodeType()==Node.ELEMENT_NODE)
                {                                           
                    Element element=(Element)node;
                    String id = element.getAttribute("id");             
                    String name = element.getAttribute("name");                 
                    String prompt=getTextValue(element);
                    promptMap.put(id, new PromptBean(id,name,prompt));
                }
            }
        }        
        catch(Exception io)
        {
            io.printStackTrace();           
        }
        finally
        {
            db=null;
            dbf=null;
        }       
        return promptMap;
    }   

    private String getTextValue(Element element) {      
        String textValue=element.getFirstChild().getTextContent().toString();
        return textValue;
    }   

} 
```

第二类功能是在我想使用列表时解析 xml 并将其返回到地图，但我在 Map 的 put ad get 方法中遇到错误

```
public class UserFunction{  

        Map<String,PromptBean> promptObject=new HashMap<String,PromptBean>(); 
        Map<String,AudioBean> audioObject = new HashMap<String,AudioBean>();

        XmlReaderPrompt xrpObject=new XmlReaderPrompt();

        public String getPromptFunction(String promptTag,String langMode )
        {           
            Map<String, PromptBean> promptObject=xrpObject.load(langMode);
            PromptBean promptBean= (PromptBean)promptObject.get(promptTag);             
            String pv=StringEscapeUtils.escapeXml(promptBean.getPrompt());          
            return pv;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:07:45.297

头等舱

```
class XmlReaderPrompt {  
public List<PromptBean> load(String langMode)
{
    String fileName="db_processor/English.xml";     
    DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
    InputStream prompt_configfile=Thread.currentThread().getContextClassLoader().getResourceAsStream(fileName);
    DocumentBuilder db = null;
    List<PromptBean> promptMap = new ArrayList<PromptBean>();
    try { 
        try {
            db = dbf.newDocumentBuilder();
        } catch (ParserConfigurationException e) {              
            e.printStackTrace();
        }
        Document doc = null;
        try {
            doc = db.parse(prompt_configfile);
        }
        catch(FileNotFoundException fnfexp)
        {
            fnfexp.printStackTrace();               
        }
        catch (SAXException e) {                
            e.printStackTrace();
        }           
        NodeList nodeList=doc.getElementsByTagName("prompt");
        for(int i=0;i<nodeList.getLength();i++)
        {
            Node node=nodeList.item(i);
            if(node.getNodeType()==Node.ELEMENT_NODE)
            {                                           
                Element element=(Element)node;
                String id = element.getAttribute("id");             
                String name = element.getAttribute("name");                 
                String prompt=getTextValue(element);
                promptMap.add(new PromptBean(id,name,prompt));
            }
        }
    }        
    catch(Exception io)
    {
        io.printStackTrace();           
    }
    finally
    {
        db=null;
        dbf=null;
    }       
    return promptMap;
}   

private String getTextValue(Element element) {      
    String textValue=element.getFirstChild().getTextContent().toString();
    return textValue;
}   

} 
```

二等的方法

```
public String getPromptFunction(String promptTag,String langMode )
{           
    List<PromptBean> promptObject=xrpObject.load(langMode);
    for (Iterator iterator = promptObject.iterator(); iterator.hasNext();) {
        PromptBean promptBean = (PromptBean) iterator.next();
        if(promptBean.getId().equalsIgnoreCase(promptTag)){
            return StringEscapeUtils.escapeXml(promptBean.getPrompt());          
        }
    }
    return null;
} 
```

# c# - 创建 WCF 服务安装程序以安装在 IIS 服务器中

> ID：12668558
> 
> 赞同：0
> 
> 时间：2012-10-01T06:40:30.367
> 
> 标签：c#, wcf, iis

如何使用 VS 2008 创建 WCF 服务的打包和部署设置以安装在 IIS 服务器中？我们应该从我们的 Windows 应用程序调用这个服务吗？

编辑：

我在下面得到了答案。此外，当我将它作为 IIS Web 服务器中的 Web 应用程序托管时，它对我来说效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:04:45.487

使用网络设置：

![在此处输入图像描述](../Images/0a247e68c66690974162083ca3156269.png)

另外请查看以下链接：

[http://msdn.microsoft.com/en-us/library/aa751792.aspx](http://msdn.microsoft.com/en-us/library/aa751792.aspx)

[http://keithelder.net/blog/archive/2008/04/28/Configuring-WCF-and-IIS-7-With-HTTP-Bindings-and-Multiple.aspx](http://keithelder.net/blog/archive/2008/04/28/Configuring-WCF-and-IIS-7-With-HTTP-Bindings-and-Multiple.aspx)

[http://archdipesh.blogspot.com/2008/02/how-do-i-deployhost-wcf-service-on.html](http://archdipesh.blogspot.com/2008/02/how-do-i-deployhost-wcf-service-on.html)

# regex - VBA 多级正则表达式或改进的模式？

> ID：12668564
> 
> 赞同：1
> 
> 时间：2012-10-01T06:41:51.983
> 
> 标签：regex, vba

我在 VB 中处理正则表达式时遇到问题。我的文字是：

> 遗憾的是目前在多伦多总站未定晚

我在 Expresso 中测试了我的正则表达式，并为我的目的找到了这个正则表达式。事情是：多伦多总站也只能是“多伦多”。所以这是我的模式：

```
is sadly currently in (([A-Za-z]*)(\s|-)){1,3}(.|\s)*?undetermined 
```

问题是在 VB 中处理正则表达式，因为我的 Pattern 给了我这样的结果：

*   遗憾的是目前在多伦多总站未确定
    *   未定
        *   多伦多
        *   主要的
        *   未定
    *   未定
        *   多伦多
        *   主要的
        *   未定....

但我无法通过 VB 访问 toronto 和 main 这两个词——我也不希望“未确定”成为结果的一部分。我试过了，但如果我尝试并声明没有这样的对象，`match.item(0).submatches.item(0).submatches.item(0)`VBA 已经抛出错误- 显然它无法处理一些“多级”正则表达式。`match.item(0).submatches.item(0).submatches`有没有办法改进我的模式，以便我只需要使用一个子匹配，或者是否可以通过 VBA 使用多个子匹配？！

编辑：

```
GetDelay.Pattern = is sadly currently in (([A-Za-z]*)(\s|-)){1,3}(.|\s)*?undetermined"
GetDelay.IgnoreCase = True
GetDelay.Multiline = True
...
If GetDelay.TEst(MailBody) Then
        Set m = GetDelay.Execute(MailBody)
        If m.Item(0).SubMatches.Count > 0 Then
            OrtBody = m.Item(0).SubMatches.Item(0).SubMatches.Item(0) + " " + m.Item(0).SubMatches.Item(0).SubMatches.Item(1)  'Error 424 comes here - Object required
            If GetReason.TEst(AbweichungsmailBody) Then
                Set m = GetReason.Execute(AbweichungsmailBody)
                If m.Item(0).SubMatches.Count > 0 Then
                    Reason= m.Item(0).SubMatches.Item(0)
                Else
                    Reason= "Error!"
                End If
            Else
                Reason = "Keine Angabe gefunden!"
            End If
        Else
            thisfunction= False
        End If
    Else
        thisfunction= False
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:08:32.470

从重复的子表达式（在您的情况下`(([A-Za-z]*)(\s|-)){1,3}`）捕获结果在任何语言中都会变得棘手。我建议以下作为一种更简单的方法：

1）用一个简单的正则表达式匹配您感兴趣的整个部分：

```
GetDelay.Pattern = "is sadly currently in (.*?) undetermined" 
```

2) 一旦你匹配了感兴趣的部分，进行进一步的分析以获得你想要的。您可以在此步骤中使用另一个 RegEx，但我认为您可以只[`Split()`](http://msdn.microsoft.com/en-us/library/6x627e5f%28v=vs.80%29.aspx)使用空格作为分隔符。

# ios - 段控制宽度 iOS 6

> ID：12668571
> 
> 赞同：1
> 
> 时间：2012-10-01T06:42:36.430
> 
> 标签：ios, ios6, uisegmentedcontrol

我有一个简单的段控件，我在其中放置突出显示和正常状态的图像。
我设置了段控制的框架，使其完美地适合图像。在 iOS 6 之前它工作得非常好。它显示出意外的行为，它将段控制高度更改为所需的高度，但宽度保持不变。图像小于段，因此需要在图像大小或段控制属性上进行调整。

这是以下代码：

```
- (void)initTitleControl:(id)delegate {
    UIImage *leftImage;
    UIImage *rightImage;
    UIImage *leftImageText = [GBImageManager drawTextOnImage:leftImage color:UIColorFromRGB(0xffffff) text:@"List"];
    UIImage *rightImageText = [GBImageManager drawTextOnImage:rightImage color:UIColorFromRGB(0x076aac) text:@"Map"];
    UISegmentedControl *segmentControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:leftImageText, rightImageText, nil]];

    [segmentControl setSelectedSegmentIndex:0];
    [segmentControl setTintColor:UIColorFromRGB(0x076aac)];
    [segmentControl setSegmentedControlStyle:UISegmentedControlStyleBar];
    [segmentControl setMomentary:YES];
    CGRect frame = CGRectMake(0, 0, 105, 32);
    [segmentControl setFrame:frame];    
    [segmentControl addTarget:self action:@selector(onSegmentedChanged:) forControlEvents:UIControlEventValueChanged];

    self.navigationItem.titleView = segmentControl;
    [delegate setSegmentedControl:segmentControl];
} 
```

我不明白它在以前的 iOS 版本中是否可以正常工作，为什么在 iOS 6 中会出现这种行为。还有哪些其他控件在 iOS 6 中表现异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:14:00.543

我也使用更宽的图像解决了这个问题。但我发现一个更简洁的方法是：

```
 float version = [[[UIDevice currentDevice] systemVersion] floatValue];
 if (version >= 6.0) {
[[UISegmentedControl appearance] setWidth:leftImage.size.width -1.5 forSegmentAtIndex:0];
[[UISegmentedControl appearance] setWidth:rightImage.size.width -1.5 forSegmentAtIndex:1];} 
```

我在 iOS 4.3 模拟器中做了版本检查，这是不允许的，因为这种方法可以在 iOS 5 或更高版本中使用。我做了宽度 - 1.5 到图像大小，因为我没有使用任何分隔图像，并且它显示了两个段之间的间隙。我仍然想知道是否有人有另一种方法或回答为什么它在 iOS 6 中表现不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T12:05:27.077

在`.h`文件中：

```
IBOutlet UISegmentedControl *segmentCont; 
```

在`.m`文件中，设置段数组。

```
noArray=@[@"OneDay",@"20-20",@"Test"];

segmentCont=[[UISegmentedControl alloc] initWithItems:noArray];
    segmentCont.segmentedControlStyle = UISegmentedControlStyleBar;

    segmentCont.selectedSegmentIndex = 0;
    lbl1.text=[noArray objectAtIndex:0];
    [segmentCont addTarget:self action:@selector(Select_Value:) forControlEvents:UIControlEventValueChanged];

// Segment Control
-(void)Select_Value:(id)sender{

    UISegmentedControl *segmentedControl2 = (UISegmentedControl *)sender;
    lbl1.text=[segmentedControl2 titleForSegmentAtIndex: [segmentedControl2 selectedSegmentIndex]];// intValue];

} 
```

# html - 如何在电子邮件中应用内联 Cufon 样式？

> ID：12668573
> 
> 赞同：0
> 
> 时间：2012-10-01T06:42:51.227
> 
> 标签：html, css

我正在尝试将内联样式用于 Cufon 的 HTML 电子邮件。有没有办法实现 Cufon 内联样式？

```
 @font-face {
  font-family: 'Cuprum';
  font-style: normal;
  font-weight: 400;
  src: local('Cuprum'), local('Cuprum-Regular'), url(http://themes.googleusercontent.com/static/fonts/cuprum/v4/sp1_LTSOMWWV0K5VTuZzvQ.woff) format('woff');
}
@font-face {
  font-family: 'Cuprum';
  font-style: normal;
  font-weight: 700;
  src: local('Cuprum Bold'), local('Cuprum-Bold'), url(http://themes.googleusercontent.com/static/fonts/cuprum/v4/SfDyn5tWOk7I1we45jpLKz8E0i7KZn-EPnyo3HZu7kw.woff) format('woff'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:43:08.627

抱歉，您不能在电子邮件中使用 Cufon。HTML 电子邮件就像 8 年前的网络一样。为了获得体面的跨电子邮件浏览器结果，您最好保持简单并使用图像进行字体替换，我敢说，即使使用表格进行布局。

这是一个很好的资源。它清楚地列出了你能做什么和不能做什么。

[http://www.emailology.org/](http://www.emailology.org/)

# mysql - 如何在mysql表中删除外键关系

> ID：12668576
> 
> 赞同：2
> 
> 时间：2012-10-01T06:43:08.130
> 
> 标签：mysql, mysql-workbench

我有一张表 X。我需要删除表中的所有外键。我不知道怎么放下。任何人都可以请说查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T06:52:17.743

可能，您应该使用

```
SHOW CREATE TABLE <your_table> 
```

然后一一删除外键

```
ALTER TABLE <table_name> DROP FOREIGN KEY <key_name>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:47:30.163

阅读此内容将对您有所帮助[http://bugs.mysql.com/bug.php?id=14347](http://bugs.mysql.com/bug.php?id=14347)
[http://www.w3schools.com/sql/sql_foreignkey.asp](http://www.w3schools.com/sql/sql_foreignkey.asp) 外键约束必须由约束名称而不是索引名称。**语法是**：

 **```
alter table test_table drop foreign key test_tableconstraint 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-22T06:36:15.193

1.  转到表的结构视图

2.  您将在顶部看到 2 个选项
    。表结构
    B. **关系视图**。

3.  现在点击**Relation view**，在这里你可以删除你的外键约束。**

# iphone - 来自网络服务的 Json 响应 NULL

> ID：12668577
> 
> 赞同：0
> 
> 时间：2012-10-01T06:43:09.730
> 
> 标签：iphone, asp.net, json, web-services

嗨，我在 iPhone 中使用 Web 服务，当我使用本地服务器运行时，我正在获取 Json 响应 null，我正在获取响应，这是我的代码

```
 [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        } 
```

这是我调用网络服务的链接

**http://tagcheckin.com/Webservice/Webservice1.asmx**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:54:46.813

要从 AJAX 调用 WebService，您需要使用`[ScriptService]`属性装饰服务

如果您想使用以下方式访问您的服务`GET`：

*   将`[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]`属性添加到 web 方法

    ```
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
    public string HelloWorld() 
    ```

*   `<system.web>`在（Web 服务所在的服务器配置）下将以下配置添加到您的 web.config 。

    ```
    <webServices>
      <protocols>
        <add name="HttpGet" />
        <add name="HttpPost" />
      </protocols>
    </webServices> 
    ```

提醒一下，使用 XML 服务时，您需要访问返回的对象：

```
success: function (m) {
    $res.append("Message: " + m.d);
} 
```

# jquery - jQuery数据表重新分组

> ID：12668580
> 
> 赞同：2
> 
> 时间：2012-10-01T06:43:19.030
> 
> 标签：jquery, row, jquery-datatables, grouping

我正在使用 jQuery 数据表行分组。

```
 $('#report').dataTable({
    "bRetrieve": true
    }).rowGrouping({
    iGroupingColumnIndex: 3,
    bExpandableGrouping: true
 }); 
```

我如何在 columnIndex:2 上重新分组这个表？

# twitter-bootstrap - 是否有任何维护良好且及时更新的 compass/sass 引导项目

> ID：12668582
> 
> 赞同：5
> 
> 时间：2012-10-01T06:43:31.883
> 
> 标签：twitter-bootstrap, sass, compass-sass

是否有任何维护良好且及时更新的 compass/sass 引导项目。

我知道 githib 上的几个项目，但是 1）很难在叉子丛林中找到原始 repo 和 2）大多数 repo 都是旧的，并且不跟踪最新的 Bootstrap 版本。

因此，我求助于你 - 哦，强大而明智的 stackoverflow 社区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:08:03.023

最受欢迎的选项似乎是：

*   [https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass) - 最后更新于 1 天前
*   [https://github.com/vwall/compass-twitter-bootstrap](https://github.com/vwall/compass-twitter-bootstrap) - 最后更新 1 个月前

[相关答案](https://stackoverflow.com/a/7300450/1684247)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T23:20:09.667

正如 Sara 所指出的，[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)是两者中更活跃的一个，它的 v2.1.0.0 似乎与最新的 Bootstrap 版本非常匹配——我已经在生产中使用了几天，没有注意到任何严重的移植问题，少数问题得到[了](https://github.com/thomas-mcdonald/bootstrap-sass/commit/2a7c21d40692b512c02deb730fe8caefe1e474da)解决。
通过使用他们的 SASS 版本覆盖 Bootstrap 的默认变量以及使用一些 Bootstrap 的 mixin 可以完美地工作，尽管我还没有开始[在网格上工作](http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html)。

追溯，

*   Bootstrap 2.1 于 2012[年 8 月 20 日](https://github.com/twitter/bootstrap/wiki/Changelog)发布……</li>
*   bootstrap-sass master[更新了 ~ 两周后](https://github.com/thomas-mcdonald/bootstrap-sass/commit/bc406b198148d8d2a4b56b7cd6592df60b961556)……</li>
*   更新的 gem 于[同一天发布](http://rubygems.org/gems/bootstrap-sass/versions/2.1.0.0)

– 所以我的印象是，该项目尽最大努力与 Bootstrap 本身保持同步。我不必自己做出 bootstrap-sass 的决定——在我进入项目之前就已经决定了。

“ [Twitter Bootstrap、Less 和 Sass：了解 Rails 3.1 的选项](http://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/)”，一篇关于该主题的内容丰富的文章，详细查看

*   [少导轨引导](https://github.com/metaskills/less-rails-bootstrap)
*   [sass-twitter-bootstrap](https://github.com/jlong/sass-twitter-bootstrap)
*   [引导程序](https://github.com/thomas-mcdonald/bootstrap-sass)
*   [引导导轨](https://github.com/anjlab/bootstrap-rails)

提到另一个值得一看的 gem：[bootstrap-rails](https://github.com/anjlab/bootstrap-rails)，它也使用 SASS 并与 Twitter Bootstrap v2.1.1 匹配——似乎它的[发布日期甚至超过了前面提到的](http://rubygems.org/gems/anjlab-bootstrap-rails).

# html - 如何将 div 保持在最大宽度内并始终位于顶部

> ID：12668589
> 
> 赞同：1
> 
> 时间：2012-10-01T06:43:55.970
> 
> 标签：html, css, position, z-index

我不完全确定如何用技术术语描述我的问题，但我不确定如何执行它。我有一个要放置在页面上的 div。它应该保留在另一个具有最大宽度的 div 中。所以当浏览器窗口增加时，一个div中的这个div永远不会超出另一个div的max-width。

但是，当您减小浏览器窗口的大小时，我不希望隐藏此 div。我希望它保持在所有内容之上，并与浏览器窗口的边缘对齐。

那有意义吗？我有一张图片：

![在此处输入图像描述](../Images/6ec693f05ee7f0f4baed234fa82d14b9.png)

深色矩形不会超出某个最大宽度。当浏览器较小时，它会向上推到浏览器边缘并始终保持可见。

我该怎么做呢？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:51:56.617

HTML

```
<div class="main">
  <div class="Parent">
  </div>
</div> 
```

CSS

```
.Parent{
  width:200px;
 height:100px;
 background:red;
 position:absolute;
 right:0;
top:200px;
}
.main{
  width:700px;
  margin:auto;
  height:1000px;
  background:blue;

} 
```

[​演示](http://jsfiddle.net/afshinprofe/qhCsJ/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:55:41.780

尝试这样的事情：

[http://jsfiddle.net/Mk9KV/](http://jsfiddle.net/Mk9KV/)

# iphone - 如何为测验应用程序实现倒数计时器？

> ID：12668593
> 
> 赞同：-3
> 
> 时间：2012-10-01T06:44:13.540
> 
> 标签：iphone, ios, nstimer

在我的测验应用程序中，我想为整个测验包含一个倒数计时器。任何人都可以给我链接或任何关于倒数计时器实施的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:54:03.710

```
int seconds = time % 60;
int minutes = (time - seconds) / 60;
theTimer.text = [NSString stringWithFormat:@"%d:%.2d", minutes, seconds]; 
```

# java - Spring MVC Controller 方法定义控制

> ID：12668596
> 
> 赞同：0
> 
> 时间：2012-10-01T06:44:43.370
> 
> 标签：java, spring-mvc, architecture

预先，我是 Spring MVC 的新手。我经常使用 Struts2，可能正因为如此，我在 Spring MVC 控制器方法定义方面有点挣扎。

正如我在文档中所读到的，您可以在 Spring MVC 控制器方法中[定义各种可能的参数类型（实际上是 20 个）](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-arguments)，也可以返回[各种返回类型（实际上是 9 个）](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-return-types)。并且基于此，Spring MVC 会采取*相应*的行动。

虽然这可能提供很大的灵活性，但我的架构师正在尝试定义一些规则或限制，以便我的团队不需要被额外灵活的规则所困扰！

我希望定义一些限制来控制各种人的各种编码。我正在考虑为我的控制器编写某种标记接口。在Struts2的[xxxAware 接口行中。](http://struts.apache.org/2.3.3/struts2-core/apidocs/org/apache/struts2/interceptor/package-summary.html)

或者可能在 Spring MVC 中已经存在类似的东西，我只是还不知道。或者可能在开源域之外。

寻找您的建议。您是如何获得 Spring MVC 提供的灵活性的？

# button - 为按钮 Titanium 设置禁用

> ID：12668597
> 
> 赞同：1
> 
> 时间：2012-10-01T06:44:52.580
> 
> 标签：button, titanium, titanium-mobile

我有一个按钮，当单击该按钮时显示一个选项对话框。单击选项对话框的项目并设置与项目名称对应的按钮标题。为按钮设置标题后，我想禁用按钮（无法单击按钮或单击按钮但没有事件）。我设置如下但不是真的..

```
button.enable=false; 
```

你能帮助我吗..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T06:50:26.340

@user1478916 您的代码缺少“启用”替换为“启用”

```
 button.enabled=false; 
```

从 SDK 3.3.0 开始，这在 Android 上已弃用。请改用 touchEnabled 属性。

# c++ - 在对象向量上调用成员函数

> ID：12668598
> 
> 赞同：4
> 
> 时间：2012-10-01T06:44:53.427
> 
> 标签：c++, boost, lambda, foreach, std

给定 a `vector<Object>`，其中 Object 有一个 function `run()`，有没有办法只使用 std 函数/模板来调用`run()`a ？`for_each`

请注意，`run()`它不是静态函数，它实际上应该转换被引用的对象（当然在我的小例子中不是这种情况）

我知道`boost::lambda`路

```
class Object
{
public:
    int run(){/* change object state */}
};

vector<Object> v(10);
for_each(v.begin(), v.end(), bind(&Object::run, _1)); 
```

但我很好奇这是否是一种标准（**非 Cxx11**）方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T06:50:22.910

有（曾经）C++ 03 方式：

```
for_each(v.begin(), v.end(), mem_fun_ref(&Object::run)); 
```

见[http://www.cplusplus.com/reference/std/functional/mem_fun_ref/](http://www.cplusplus.com/reference/std/functional/mem_fun_ref/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:06:54.980

对于任何有兴趣的人，这里有一个关于如何使用 for_each 的更详细的示例

```
class Object
{
public:
    int run(){/* change object state */}
    int run2(char c){/* change object state */}
};

vector<Object> v(10);
char c = 'a'; 
```

如果你想向你的函数发送一个参数（最多一个，对于 C++03），你可以

```
for_each(v.begin(), v.end(), std::bind2nd( std::mem_fun_ref(&Object::run2), c)); 
```

请注意，您绑定了第二个参数。第一个是`this`指向当前对象的指针。你还记得任何成员函数总是`this`作为第一个参数吗？

而 lambda 方式（C++11）**要好得多！**

```
for_each( v.begin(), v.end(), [&] (const Object& val)
{
    val.run();  
    // this is effectively the most flexible way to specify the function params
    val.run2(c); 
} ); 
```

最后，**boost::lambda**方式，适用于有参数的情况。至于 C++11，很容易扩展到更多参数

```
for_each(v.begin(), v.end(), bind(&Holder::run, _1, c) ); 
```

# javascript - 如何使用 JSON 数组的输入参数调用 evaluateJavaScript 函数？

> ID：12668600
> 
> 赞同：1
> 
> 时间：2012-10-01T06:44:54.957
> 
> 标签：javascript, json, qt

在 Qt 中，如何`evaluatejavascript`使用 JSON 数组的输入参数调用函数？

# php - 使用php从C盘自动上传到Web服务器

> ID：12668603
> 
> 赞同：0
> 
> 时间：2012-10-01T06:45:28.450
> 
> 标签：php, file-upload

我需要使用 php 将照片上传到服务器。通常，用户使用html文件输入选择要上传的图像，我们在提交时上传文件。我的要求是避免文件选择步骤。用户访问我的网页后，必须将 C:\photo.jpg 中的文件上传到服务器。是否可以使用php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:48:15.253

不可能，您不能直接从浏览器访问驱动器。这是一个安全问题。

想想如果我可以从每个访问者那里收集 1 个文件会发生什么，比如说从浏览器保存的密码？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T06:53:32.757

我认为这是可能的，但有 j 查询。bcoz 如果在图像滑块上看到，在许多图像滑块中，图像是从一个特殊文件夹中拾取并显示在滑块中的。

# authentication - Modeshape 2.8 编程配置

> ID：12668604
> 
> 赞同：0
> 
> 时间：2012-10-01T06:45:34.567
> 
> 标签：authentication, configuration, jcr, modeshape

嗨，我该怎么做存储库的编程配置，因为存储库中的大多数配置参数只能在运行时确定。

当我尝试打印它在下面抛出 NPE 代码的会话时，似乎我无法使用匿名凭据

```
 config.repositorySource("store")
          .usingClass(DiskSource.class)
          .setProperty("repositoryRootPath", "c:/x/repo1")
          .setProperty("defaultWorkspaceName","default");

          config.repository("content")
          .setOption(JcrRepository.Option.USE_ANONYMOUS_ACCESS_ON_FAILED_LOGIN, "true")
          .setSource("store");

    Session session  =  engine.getRepository("content").login("default"); 
```

我可以将自定义身份验证器添加到 JcrConfiguration 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:04:22.083

配置 ModeShape 引擎的正确方法是使用 JcrConfiguration 对象，如此处[所述](https://docs.jboss.org/author/display/MODE28/Configuring+ModeShape#ConfiguringModeShape-ProgrammaticConfiguration)。这似乎是你正在做的，所以那部分是正确的。

创建配置后，您可以检查它是否存在问题：

```
if ( !configuration.getProblems().isEmpty() ) {
    for ( Problem problem : configuration.getProblems() ) {
         // Report these problems!
    }
} 
```

假设没有问题，您可以使用您的配置创建一个新的 JcrEngine 实例（请参阅[文档](https://docs.jboss.org/author/display/MODE28/Using+the+JCR+API+with+ModeShape#UsingtheJCRAPIwithModeShape-ModeShape%27s%7B%7BJcrEngine%7D%7D)）：

```
JcrConfiguration config = ...
JcrEngine engine = config.build();
engine.start(); 
```

然后，按名称查找存储库并使用 JCR API 登录：

```
javax.jcr.Repository repository = engine.getRepository("Name of repository");

Credentials credentials = ...; // JCR credentials
String workspaceName = ...;  // Name of repository workspace
Session session = repository.login(credentials,workspaceName); 
```

# android - Android：在我的 Android 设备上运行时，它可以正常工作。但我无法弄清楚为什么在我的模拟器中没有发生同样的事情

> ID：12668611
> 
> 赞同：-1
> 
> 时间：2012-10-01T06:46:18.390
> 
> 标签：android

> **可能重复：**
> [检查 android 上的互联网连接](https://stackoverflow.com/questions/4086159/checking-internet-connection-on-android)

在我的应用程序中，我想检查互联网连接。如果设备未连接到互联网，我想关闭我的应用程序。所以我使用这种方法来检查互联网连接。

```
public boolean isDeviceConnectedToInternet() {
        ConnectivityManager cm =
            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    } 
```

用户权限设置：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我关闭了我的 wifi 并运行了应用程序，我在 Log cat 中得到了正确的结果。

> 在我的 Android 设备上运行时，它正在工作。但我不明白为什么我的模拟器没有发生同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:50:26.263

```
 public void checkConnection() throws NoInternetException {
    boolean connected = false;

    ConnectivityManager cm = 
            (ConnectivityManager) 
            context.getSystemService(Context.CONNECTIVITY_SERVICE);

    if (cm != null) {
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();

        for (NetworkInfo ni : netInfo) {
            if ( ni.isConnected() && ni.isAvailable() ) {
                connected = true;
            }
        }
    }
    if (! connected) {
        throw new NoInternetException("NO INTERNET CONNECTION");
    }
} 
```

如果没有网络，我在这里抛出异常。无论如何，您可以返回已**连接的变量**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:53:16.263

检查 Internet 连接的简单代码。

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo netInfo = cm.getActiveNetworkInfo();

String status = netInfo.getState().toString();
if (status.equals("CONNECTED")) 
{
    //DO you work or return your flag
} 
else 
{
    Log.e("error", "No connection available ");
} 
```

# iphone - 分配单个字符串的数组，然后在修改后获取其值

> ID：12668612
> 
> 赞同：0
> 
> 时间：2012-10-01T06:46:18.917
> 
> 标签：iphone, objective-c

我在 viewDidLoad 中声明了一个数组。

```
 -(void) viewDidLoad{
   status=[[NSMutableArray alloc] init];
   [status addObject:@"Pending"];
 } 
```

现在在某些功能中，我需要将“待定”的值更改为“已批准”。然后在 cellforRow 中检查该条件。我目前正在做的是：

```
some function: [[ objectAtIndex:0] addObject: "Approved"];

cellForRow:  

if( [[status objectAtIndex:0] isEqual:@"Pending"){
  //do this
}
else if ([[status objectAtIndex:0] isEqual:@"Approved"){
  //do that
} 
```

它抛出一个异常：

```
NSInvalidArgumentException :[__ NSCFCConstantString addObject:]: unrecognized selector sent to instance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:50:54.817

您需要在某些功能中添加代码

```
[status replaceObjectAtIndex:0 withObject:"Approved"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:54:50.190

只需将值替换为数组的索引号

```
[yourArray replaceObjectAtIndex:0 withObject:@"Approved"]; 
```

:)

# excel - 将所有工作表中固定范围内的值粘贴到一张工作表上

> ID：12668613
> 
> 赞同：2
> 
> 时间：2012-10-01T06:46:21.647
> 
> 标签：excel, vba

我有大约 30 个工作表（一个月中的几天），每张工作表上

我想将每个工作表上的范围`A293:AL293`和值复制`A296:AL296`到我的活动工作表中（例如，从每月 1 日到 30 日的连续行中）。

这些范围分别使用 `MIN`和`PERCENTILE`公式。但是，当我运行宏时，单元格包含 !REF 错误，因为复制的是公式而不是实际的单元格值。

我应该如何修改宏，使其复制和粘贴值而不是公式？

我从另一个用于将数据从 30 张纸复制并粘贴到一张纸中的宏修改的代码是：

```
Sub test()
Dim curRow As Integer
Dim activeWorksheet As Worksheet
Set activeWorksheet = ActiveSheet
curRow = 1
For Each ws In ActiveWorkbook.Worksheets
    If Not ws.Name = activeWorksheet.Name Then
        ws.Range("A293:AL293").Copy Destination:=activeWorksheet.Range(CStr(curRow) & ":" & CStr(curRow + 288))
     curRow = curRow + 289   
    End If
Next ws
End Sub 
```

我发现的另一个代码是：

```
Option Explicit
Sub CreateTempPSDReport()
Dim WS As Worksheet, Rept As Worksheet

Set Rept = Sheets("Temporary PSD Report")
Application.ScreenUpdating = False

'--> Loop through each worksheet except the report and
'--> Copy the set range to the report
For Each WS In ThisWorkbook.Worksheets
    If Not WS.Name = "Temporary PSD Report" Then
        WS.Range("A42", "I42").Rows.Copy
        Rept.Cells(Rows.Count, "A").End(xlUp).Offset(1, 0).PasteSpecial _
        Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False
    End If
Next
Application.ScreenUpdating = True
End Sub 
```

但我不确定是什么

```
 WS.Range("A42", "I42").Rows.Copy
        Rept.Cells(Rows.Count, "A").End(xlUp).Offset(1, 0).PasteSpecial _
        Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False 
```

部分可以。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:03:39.470

要将这对行复制到摘要表中，您可以执行此操作。需要注意的两点

*   使用 复制值而不是公式`.Value`。在这种情况下，我使用`.Value2`
*   您不需要复制和粘贴（除非您想复制格式），您可以简单地将一个范围设置为等于另一个范围中的值

    ```
    Sub test()
    Dim ws1 As Worksheet
    Dim ws2 As Worksheet
    Dim lngCnt As Long

    Set ws1 = ActiveSheet
    Application.ScreenUpdating = False
    For Each ws2 In ActiveWorkbook.Worksheets
        If Not ws1.Name = ws2.Name Then
            ws1.[a1].Offset(lngCnt, 0).Resize(1, 38).Value2 = ws2.Range("A293:AL293").Value2
            ws1.[a1].Offset(lngCnt + 1, 0).Resize(1, 38).Value2 = ws2.Range("A296:AL296").Value2
            lngCnt = lngnct + 2
        End If
    Next ws2
    Application.ScreenUpdating = True
    End Sub 
    ```

# javascript - javascript - 类似于 php 的 __construct 的对象初始化函数？

> ID：12668614
> 
> 赞同：0
> 
> 时间：2012-10-01T06:46:24.460
> 
> 标签：javascript, initialization, init

> **可能重复：**
> [Javascript 对象中的构造函数](https://stackoverflow.com/questions/1114024/constructors-in-javascript-objects)

我有一个简单的 JS 对象，如下所示：

```
MyObj = {
    var: 'text',

    fn1: function(){

    },

    fn1: function(){

    }
} 
```

对象在运行时初始化时是否执行了默认函数，例如 _init() 或 _construct()？

# ruby-on-rails - Rails：如何生成像 django 这样的翻译文件

> ID：12668615
> 
> 赞同：5
> 
> 时间：2012-10-01T06:46:30.777
> 
> 标签：ruby-on-rails, django, ruby-on-rails-3, rails-i18n

我正在尝试在 Rails 中使用国际化。在这里，我发现该命令

```
<%= t :hello_world %> 
```

我知道需要像这样在文件**config/locales/en.yml中定义****:hello_world**

 **```
# config/locales/en.yml
en:
  hello_world: Hello world! 
```

我想知道的是，在**django**中它使用**makemessages****生成翻译**文件，有**没有办法在 rails 中做到这一点**？查找和编写完整的翻译成为一项乏味的任务。

 ****谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:52:26.283

您可以考虑检查[https://github.com/svenfuchs/i18n-missing_translations](https://github.com/svenfuchs/i18n-missing_translations)，它提供了一种在浏览应用程序时构建缺少翻译键的 yml 的方法。

如果您有详尽的覆盖范围，在运行测试时连接它应该会产生所有丢失的翻译。

它看起来不像 Django 的 makemessages 那样流畅，但这是一个开始。******

# java - Jetty 8 中的默认配置是否适用于负载非常重的 Web 应用程序？

> ID：12668616
> 
> 赞同：7
> 
> 时间：2012-10-01T06:46:45.130
> 
> 标签：java, performance, jetty, default, jetty-8

决定将应用程序部署到 Jetty 8，以前使用的是 Tomcat 7。Jetty 8 使用默认值，似乎工作正常，但偶尔等待连接，查看 jetty.xml 我很困惑关于线程和连接器之间的相互作用。

但是一般的问题是默认值是否应该适用于负载非常重的 Web 应用程序，或者是否需要对其进行明显的更改？

**更新** 让我尝试一下，我对此更具体。

在 jetty.xml 中它说 maxThreads=200 所以理论上它可以并行处理 200 个请求（比我们必须处理的要多），但是对于应该配置多少内存码头来处理这个问题，是否有经验法则.

它还定义了一个 SelectChannelConnector 连接器，我假设这是接收请求并将它们发送到线程的东西。这个连接器是我们可用的性能最好的连接器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:58:32.950

是的，对于您所描述的内容，默认值通常应该没问题。您可以进行的快速调整是将接受器的数量设置为您拥有的 cpu 数量。除此之外，您始终可以启用 jmx 并使用 jconsole 查看内存方面的情况，以查看可能需要调整的其他内容。

我们在此链接上也提到了一些与操作系统相关的内容：

[http://wiki.eclipse.org/Jetty/Howto/High_Load](http://wiki.eclipse.org/Jetty/Howto/High_Load)

# c# - 打印时如何设置背景颜色？

> ID：12668617
> 
> 赞同：1
> 
> 时间：2012-10-01T06:46:48.260
> 
> 标签：c#, asp.net

我正在使用 ASP.NET 和 C#。我正在单击按钮时将整个 aspx 页面打印到新窗口中。

这是我的代码..

```
 Page pg = new Page();
    pg.EnableEventValidation = false;
    HtmlForm frm = new HtmlForm();
    pg.Controls.Add(frm);
    frm.Controls.Add(ctrl);
    pg.DesignerInitialize();
    pg.RenderControl(htmlWrite);
    string strHTML = stringWrite.ToString();
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.Write(strHTML); 
```

这工作正常。现在我需要打印的页面应该具有与 aspx 页面相同的背景颜色。然后aspx页面有一些文本框。所以我需要在打印后文本框中的值不能改变。现在通过这段代码它是可变的。

可能吗？

谢谢。

# eclipse - 我添加了对 pom 文件的依赖，但没有效果

> ID：12668619
> 
> 赞同：0
> 
> 时间：2012-10-01T06:46:57.500
> 
> 标签：eclipse, maven, servlets, jboss

当我用 JBoss 编译 Java EE 时，一些配置文件说：

> jboss 找不到 javax/servlet/ServletContext 的类文件

所以，我在我的 pom 中添加了依赖项：

```
<dependency>
    <groupId>org.jboss.spec.javax.servlet</groupId>
    <artifactId>jboss-servlet-api_3.0_spec</artifactId>
    <version>1.0.2.Final</version>
</dependency> 
```

但是，它没有任何作用。它仍然无法`javax.serlet.ServletContext`在我的 pom 依赖项中找到包。

只有当我在包含路径中添加“规范包”时，它才有效。

我使用 Eclipse，有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:51:15.200

您缺少`javaee-web-api`依赖项：

```
 <dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
  </dependency> 
```

# jboss - JBOSS JMXInvokerServlet 安全访问问题

> ID：12668621
> 
> 赞同：1
> 
> 时间：2012-10-01T06:47:07.357
> 
> 标签：jboss

审计团队对 JMXInvoker servlet 安全访问提出了以下担忧。

> “在我们的测试过程中，我们执行了漏洞扫描并确定了一个不需要对 JMXInvokerSerlet 进行身份验证的 Jboss 服务器。可以利用它来上传和执行任意 JSP 页面到服务器。我们无法利用这个漏洞"

任何人都可以帮助我们提出一种解决方案，使“ [http://ServerName:8080/invoker/JMXInvokerServlet](http://ServerName:8080/invoker/JMXInvokerServlet) ”安全，这样任何人都无法进行未经授权的访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T00:08:57.297

要阻止对 JMXInvokerServlet 的未经授权的访问，我建议您在防火墙中设置一条规则来访问 Internet，以阻止对 URL http:///invoker/JMXInvokerServlet 的访问。为了运行一些内部工具，需要访问 JMXInvokerServlet，因此在网络边缘阻止它仍将允许用户在您的 Intranet 或通过 VPN 连接上运行本地工具，同时阻止来自 Internet 的恶意访问。

如果需要本地应用程序访问不是问题，则按照以下网页上的说明进行操作（大约在页面的一半，副标题“保护 JMX 调用程序”）

# c - 我可以只使用 percolateDown 来实现堆吗？

> ID：12668624
> 
> 赞同：0
> 
> 时间：2012-10-01T06:47:19.763
> 
> 标签：c, data-structures, heap

我需要在 C 中实现一个 Heap 数据结构。当我在做一些研究时，我看到人们使用 buildHeap()、constructHeap() 将数组转换为堆。我的问题是，每次我需要添加到堆中时，我是否可以只在新添加的项目上调用 percolateDown() 而不是实现这些功能？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:53:10.507

堆可以在线性时间内构建，而您提出的方法将需要 O(N log(N)) 时间。更好地在单独的函数中构造堆以获得更好的性能。

# debugging - 在启动过程中很早就调试内核

> ID：12668628
> 
> 赞同：1
> 
> 时间：2012-10-01T06:47:43.960
> 
> 标签：debugging, linux-kernel, arm, porting

我正在将 Linux 内核移植到一个新平台，但在调试时遇到了一些麻烦。

`Uncompressing Linux... done, booting the kernel.`内核在打印到 UART后似乎挂起。我已经启用了 early printk，但它仍然没有打印任何新内容，所以我假设它在启动过程中很早就挂起。

我要移植到的平台确实有一个 LED，我可以用它来尝试确定它实际挂在哪里。问题是它很乱，我不知道 MMU 什么时候会打开，所以我不能可靠地访问端口。

还有其他方法可以尝试查明内核挂起的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:55:57.993

[MMU 在内核引导程序 ( head.S](http://lxr.free-electrons.com/source/arch/arm/kernel/head.S) )中打开，因此只需在此处添加一些 LED。有关 ARM Linux 上的引导顺序的概述，请参阅[这个稍微过时的文件](http://gicl.cs.drexel.edu/people/sevy/linux/ARM_Linux_boot_sequence.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T08:51:26.693

在我看来，这里唯一真正的选择是 JTAG 调试探针。市场上有一些相对便宜的设备。

不确定您使用的是哪个 SoC 系列，但如果是 TI， [Code Composer Studio](http://processors.wiki.ti.com/index.php/Download_CCS#Code_Composer_Studio_Version_5_Downloads)和 [XDS560](http://processors.wiki.ti.com/index.php/XDS560v2_System_Trace)系统跟踪器可能值得一试。

Pandaboard[社区](http://www.pandaboard.org/content/debug-ti-pandaboard-jtag-using-busblaster-v2-and-openocd)可能也是一个值得关注的好地方——这里的重点是低成本解决方案。

虽然这些都是 TI 的重点，但探头通常支持不同供应商的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-16T11:05:28.433

内核确实有一个 EARLY_PRINTK 配置。启用此选项将在标准控制台启动之前打印调试消息。

请注意，此选项取决于 DEBUG_LL 选项。

# sql - SQL 选择案例

> ID：12668630
> 
> 赞同：5
> 
> 时间：2012-10-01T06:47:48.183
> 
> 标签：sql, vb.net

我有以下 sql 表

```
oitems table

    +---------+-----------+----------+
    | orderid | catalogid | numitems |
    +---------+-----------+----------+
    | O737    |       353 |        1 |
    | O738    |       364 |        4 |
    | O739    |       353 |        3 |
    | O740    |       364 |        6 |
    | O741    |       882 |        2 |
    | O742    |       224 |        5 |
    | O743    |       224 |        2 |
    +---------+-----------+----------+

Orders table
+-----------------+------------+------------+
|         orderid | ocardtype  |   odate    |
+-----------------+------------+------------+
|     O737        | Paypal     |            | 'OK
|     O738        | MasterCard | 01.02.2012 | 'OK
|     O739        | MasterCard | 02.02.2012 | 'OK
|     O740        | Visa       | 03.02.2012 | 'OK
|     O741        | Sofort     |            | 'OK
|     O742        |            |            | 'ignore because ocardtype is empty
|     O743        | MasterCard |            | 'ignore because Mastercard no odate
+-----------------+------------+------------+ 
```

调用的结果数据表`result`

```
 +-----------+----------+--------------+
| catalogid | numitems | ignoreditems |
+-----------+----------+--------------+
|       353 |        4 |            0 |
|       364 |       10 |            0 |
|       882 |        2 |            0 |
|       224 |        0 |            7 |
+-----------+----------+--------------+ 
```

想法是将具有相同依赖关系的产品的 numitems 列与表`catalogid`中的数据相加，并`oitems`具有以下条件

1.  如果`ocardtype`为空，则忽略`numitems`并将其视为`0`总和并将忽略的项目加到`ignoreditems` 列中
2.  如果`ocardtype`某个订单是`MasterCard`or`Visa`并且`odate`是空的，则忽略`numitems`并将其视为 `0`并将忽略的项目加到`ignoreditems`列中
3.  如果`ocardtype`是`Paypal`or `Sofort`，那么只做`numitems` 总和而不检查日期，因为这些类型不需要`odate`

基本上我想将结果数据表保存到临时数据表并将其加载到 vb.net 数据表

我很难弄清楚如何在 sql 查询中执行此操作！我需要这个作为 vb.net 的 sql 命令，能够使用循环使用 vb.net 数据表以编程方式执行它，并且可以选择使用 linq 进行大量检查，但我只需要从服务器获取它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:53:10.520

就像是：

```
SELECT
     oi.catalog_id,
     SUM(CASE
            WHEN ocardtype in ('Paypal','Sofort') THEN numitems
            WHEN ocardtype in ('Mastercard','Visa') and odate is not null THEN numitems
            ELSE 0 END) as numitems,
     SUM(CASE
            WHEN ocardtype is null then numitems
            WHEN ocardtype in ('Mastercard','Visa') and odate is null THEN numitems
            ELSE 0 END) as ignoreditems
FROM
   oitems oi
      inner join
   Orders o
      on
         oi.orderid = o.orderid
GROUP BY
   oi.catalog_id 
```

（假设您在叙述中使用了“空”这个词，您的意思是该栏是`NULL`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:54:39.957

```
select catalogid, numitems, allitems - numitems ignoreditems
from (
  select i.catalogid,
    sum(case when (ocardtype in ('PayPal','Sofort') OR
                   ocardtype in ('mastercard','visa') and
                   odate is not null) AND NOT EXISTS (
                     select * from booked b
                     where b.ignoredoid = o.orderid
                   ) then numitems
                   else 0 end) numitems,
    sum(numitems) allitems
  from orders o
  join oitems i on i.orderid=o.orderid
  group by i.catalogid
) X 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T10:34:39.190

这是原始请求的 Linq-to-sql 版本（作为 LINQpad 查询）：

```
Dim odateRequired = {"MasterCard", "Visa"}
Dim odateNotRequired = {"Paypal", "Sofort"}
Dim result = From o In Orders Join i In Oitems On o.orderid Equals i.orderid _
             Let check = o.ocardtype IsNot Nothing _
                     AndAlso ((odateRequired.Contains(o.ocardtype) _
                               AndAlso o.odate IsNot Nothing) _
                        OrElse odateNotRequired.Contains(o.ocardtype)) _
         Group By i.catalogid Into _
         numitem = Sum(If(check, i.numitems, 0)), _
         ignored = Sum(If(check, 0, i.numitems))

result.Dump 
```

您对 RichardTheKiwi 的回答的评论中的额外要求（它只包括`Not (From b In Bookeds Where b.ignoredoid=i.orderid).Any AndAlso`在前面`check`）：

```
Dim odateRequired = {"MasterCard", "Visa"}
Dim odateNotRequired = {"Paypal", "Sofort"}
Dim result = From o In Orders Join i In Oitems On o.orderid Equals i.orderid _
             Let check = Not (From b In Bookeds Where b.ignoredoid = i.orderid).Any _
                     AndAlso o.ocardtype IsNot Nothing _
                     AndAlso ((odateRequired.Contains(o.ocardtype) _
                               AndAlso o.odate IsNot Nothing) _
                        OrElse odateNotRequired.Contains(o.ocardtype)) _
         Group By i.catalogid Into _
         numitem = Sum(If(check, i.numitems, 0)), _
         ignored = Sum(If(check, 0, i.numitems))

result.Dump 
```

# javascript - 搜索和突出显示文本

> ID：12668631
> 
> 赞同：0
> 
> 时间：2012-10-01T06:47:56.593
> 
> 标签：javascript, jquery

我想通过双击它来选择一个单词，然后突出显示该单词在页面的特定部分中的所有发现，即仅使用 jquery 在该特定 div 中。提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:50:47.317

简单的想法...

给你的 div 一个 id，这样你就可以用 jquery 在那个 id 中搜索。

获取该 div 的所有文本，并用空格 { } 分隔它。

现在循环遍历文本。如果它与选定的比较，则围绕它制作跨度，并在该跨度上设置背景......

# php - 使用 JQuery 禁用未绑定的字段数量

> ID：12668633
> 
> 赞同：-3
> 
> 时间：2012-10-01T06:48:06.690
> 
> 标签：php, javascript, jquery, forms

我有一个表格，可以说 50 个复选框。我想在表单加载时禁用它们，我这样做：

```
$(document).ready(function() {
   $("#check").attr("disabled", "disabled");
}); 
```

但这只会禁用第一个复选框。所有复选框都有`id='check'`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:50:03.767

您的复选框需要具有唯一 ID，ID = 唯一标识符。而是使用类：

`check`为每个复选框添加类：

```
$(document).ready(function() {
   $(".check").attr("disabled", true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:50:27.780

在 HTML 中，每个`id`属性都应该是唯一的，尝试为您的复选框添加类并使用该类选择它们，或者只使用属性选择器，例如`$('input[type=checkbox]')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:51:12.530

Id 应该是唯一的，您可以尝试使用这样的类名

```
$(document).ready(function() {
   $(".classname").attr("disabled", true);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:51:19.277

`id`s 是唯一的，因此不能在元素之间共享。如果要将许多元素组合在一起，请改用 a `class`：

**HTML**：

```
<input class="check" ...>
<input class="check" ...>
<input class="check" ...> 
```

**JavaScript**：

```
$(document).ready(function() {
   $('.check').prop('disabled', true);
}); 
```

# jakarta-ee - 依赖注入和上下文依赖注入

> ID：12668636
> 
> 赞同：1
> 
> 时间：2012-10-01T06:49:00.643
> 
> 标签：jakarta-ee

我不知道什么是依赖注入。依赖注入和上下文依赖注入有什么区别。谁能帮帮我

# objective-c - 定义 NSString 全局常量时出错

> ID：12668637
> 
> 赞同：0
> 
> 时间：2012-10-01T06:49:04.270
> 
> 标签：objective-c, xcode, nsstring

> **可能重复：**
> [接口类型不能静态分配？](https://stackoverflow.com/questions/8460340/interface-type-cannot-be-statically-allocated)

这是我的代码，就像其他人一样：

**TZNotifications.h**
`extern NSString *const TZNotificationKeywordAuthentication;`

**TZNotifications.m**
`NSString *const TZNotificationKeywordAuthentication = @"NOTIFICATION_KEYWORD_AUTHENTICATION";`

但是我得到两个这样的代码错误：

![在此处输入图像描述](../Images/cffdb9513e8354aaf5283f7bfa28611b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:37:55.950

替换 'const' 和类型声明：

TZNotifications.h

```
extern const NSString *TZNotificationKeywordAuthentication; 
```

TZNotifications.m

```
const NSString *TZNotificationKeywordAuthentication = @"NOTIFICATION_KEYWORD_AUTHENTICATION"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:53:47.323

感谢你们。结果我愚蠢地在我的一个头文件的末尾添加了一个无意义的字符串，导致了这个奇怪的错误。对于那个很抱歉...

# vb.net - 许多控件的 Keydown 处理程序

> ID：12668644
> 
> 赞同：4
> 
> 时间：2012-10-01T06:49:49.590
> 
> 标签：vb.net, winforms

有没有更好的方法来为繁忙表单上的许多控件设置 keydown 处理程序？（在某些情况下，单独使用表单处理程序是行不通的。）

```
Private Sub rText_KeyDown(ByVal Sender As Object, ByVal e As KeyEventArgs) Handles rText0.KeyDown, txTaxon.KeyDown, txCommon.KeyDown, _
  txConfidence.KeyDown, txDate.KeyDown, txDateAdded.KeyDown, txFileName.KeyDown, txGPS.KeyDown, txRating.KeyDown, _
  txConfidence.KeyDown, txQuality.KeyDown, txRemarks.KeyDown, txKeyWords.KeyDown, txOriginalPath.KeyDown, txDateAdded.KeyDown, _
  txLink.KeyDown, chkLink.KeyDown, rview.KeyDown, cmdNext.KeyDown, tvTaxon.KeyDown, Me.KeyDown, _
  cmdTaxon.KeyDown
Call globalkey(e)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:04:39.680

我是一名 C# 程序员，因此无法提供有效的解决方案（如在 vb.net 代码中）。

我认为您可以通过执行以下操作来完成此工作。

1.  为您各自的控件编写一个[AddHandler](http://msdn.microsoft.com/en-us/library/6yyk8z93%28v=vs.80%29.aspx)的方法，当且仅当它们具有设置为属性的特定值（详细信息在下面的步骤 #2 中）
2.  您希望将公共处理程序附加到的所有控件，将其[Tag](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)属性设置为唯一值，例如 : `"KeyDown"`。在这种情况下，我建议使用`Enum`虽然，而不是`string`
3.  现在，在您的`Form`构造函数中，在`InitializeComponent`调用之后，调用您在上面 #1 中编写的方法。这会将处理程序附加到所有所需的控件。
4.  如果您有多个具有此要求的表单，您可以将此功能添加到一个主表单，它就像所有其他表单的父表单（继承）

希望我足够清楚，这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:03:43.297

我喜欢AYK的回答。您可能会使用这样的函数：

```
Public Shared Function GetAllControlsRecurs(ByVal list As List(Of Control), _
  ByVal parent  As Control, ByVal ctrlType As System.Type) As List(Of Control)
    If Parent Is Nothing Then Return list
    If Parent.GetType Is ctrlType Then
        list.Add(Parent)
    End If
    For Each child As Control In Parent.Controls
        GetAllControlsRecurs(list, child, ctrlType)
    Next
    Return list
End Function 
```

我发现这是一个方便的功能，可以在某些父控件中获取给定类型的所有控件（包括控件内的控件）。通过按照 AYK 的建议标记您的控件（即：`Tag`在设计器中设置属性），您可以运行上述所有控件并以编程方式添加处理程序（可能在构造函数中）。

```
Dim textboxList As New List(Of Control)

For Each ctl As TextBox In GetAllControlsRecurs(textboxList, Me, GetType(TextBox))
    If ctl.Tag = MyTags.rTextKD then 
        AddHandler ctl.KeyDown, AddressOf rText_KeyDown
    End If
Next 
```

您可以在其中定义`MyTags`一个枚举，其中包含要实现的常用处理程序列表。这`rTextKD`将是枚举的成员（我没有在答案中定义）。这种方法的好处是它是可扩展的——如果你添加一个新的控件并标记它，那么这段代码将选择它并连接处理程序，而无需更改。

虽然以上是对您直接问题的回答，但是如果您尝试制作全局热键，那么这不是这样做的方法。Hans 在评论中提供的链接可能是您想去的地方。

# c# - 从类库修改 ViewState

> ID：12668649
> 
> 赞同：0
> 
> 时间：2012-10-01T06:50:05.540
> 
> 标签：c#, asp.net, viewstate

我假设从单独的类库中的类访问视图状态类似于`session`,`application`和`cache`object. 但是我检查了`HttpContext`课程，发现可以进入视图状态。我正在寻找一种方法来组织我在网络应用程序中使用视图状态的方式，并且我想创建一个处理这些操作的类。

我还检查了`viewstate`在 SO 中标记有标签的问题，我没有发现类似的问题。您能告诉我如何从单独的类库中访问/引用视图状态对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:57:00.470

ViewState 属性属于 Control 类，我们总是使用 Page : Control 中的那个。

页面具有解码的视图状态。您可以通过 Base64 文本获取，`HttpContext.Current.Request`但这没什么用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T08:11:09.710

您可以通过 获取对页面的引用`HttpContext.CurrentHandler`，但无法访问`ViewState`，因为`ViewState`受到保护。

当然使用`Reflection`您可以访问`ViewState`，例如：

```
var page = HttpContext.Current.Handler as Page;
var viewStateProp = page?.GetType().GetProperty("ViewState",
    BindingFlags.FlattenHierarchy | BindingFlags.Instance | BindingFlags.NonPublic);
var viewState = (StateBag)viewStateProp?.GetValue(page); 
```

# java - CXF JibX 数据绑定使用绑定编译器

> ID：12668662
> 
> 赞同：1
> 
> 时间：2012-10-01T06:50:50.260
> 
> 标签：java, cxf, jibx

任何人都幸运地在 CXF 中使用 JibX 数据绑定？我看到我们需要运行绑定编译器。但是，在 CXF 中使用 Jibx 数据绑定时，我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:47:04.203

戈帕尔，
绝对！JiBX 与 CXF 配合得很好。
看看这些例子。这是一个简单的[JiBX 示例](http://jibx.sourceforge.net/schema-library/webservices.html)，您可以在我们的存储库中找到它。
如果您需要分步示例，请查看[我的博客中的这个示例](http://blog.tourgeek.com/2012/04/creating-soap-and-rest-services-for.html)。
希望这可以帮助！
大学教师

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:59:15.397

您的问题的答案是：**是**的- 您可以将 Apache CXF 与 JiBX 数据绑定一起使用。

我在这篇博文中做了一个简单的解释： [使用带有自定义 JiBX 数据绑定的 Apache CXF SOAP 服务，并](http://frvabe.blogspot.de/2013/04/using-apache-cxf-soap-service-with.html)[在此处](https://github.com/FrVaBe/cxf-soap-with-jibx#readme)提供了一个简单的示例应用程序。

# php - 如果自定义字段是特定值然后做某事...（单选按钮）

> ID：12668664
> 
> 赞同：0
> 
> 时间：2012-10-01T06:51:00.823
> 
> 标签：php, wordpress, if-statement, radio-button, conditional

我一直在弄清楚如何根据自定义字段中的输入来显示不同的数据。

我在注册表单中有单选按钮作为我的输入字段，有 3 个选项。X、Y、Z。

它们保存在名为 member_status 的自定义字段中，保存为 user_meta

我的代码工作是这样的……但我想不通！

```
global $current_user;

get_currentuserinfo();

$userID = $current_user->ID;

$memberstatus = get_user_meta($userID,'member_status',true);

If $memberstatus = X {

// do something here if X

} elseif $memberstatus = Y {

// do something here if Y

} elseif  $memberstatus = Z {

// do something here if Z 
```

问题是：.......

我不知道如何正确构造 IF 语句，这只是上面的猜测......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:52:57.867

如果您真的将其保存为元数据，`member_status`则：

```
if($memberstatus == 'X'){
    // do something here if X
} elseif ($memberstatus == 'Y'){
    // do something here if Y
} elseif ($memberstatus == 'Z'){
    // do something here if Z
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:55:29.970

您应该使用`==`而不是`=`进行比较。

`==`是比较运算符，`=`是赋值运算符。

也不要忘记将布尔条件括在括号中`(`和`)`

```
if($memberstatus == X){

}
elseif($memberstatus == Y){

}
// and so on 
```

# javascript - 提交后禁用 Ajax 按钮

> ID：12668668
> 
> 赞同：0
> 
> 时间：2012-10-01T06:51:21.883
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [禁用表单提交上的提交按钮](https://stackoverflow.com/questions/5691054/disable-submit-button-on-form-submit)

我有一个关于 ajax 提交后禁用按钮的问题。实际上，在我将文本输入到 textarea 之前，该按钮首先被禁用。然后，如果我使用单击按钮提交，则必须禁用该按钮。

在我的实际中，单击按钮后，该按钮没有被禁用。

这是我的 JS 代码：

```
$(function()
    {
        $("#submit_h").click(function() 
        {
            var haps = $("#haps").val();
            var dataString = 'haps='+ haps;
            if(haps=='')
            {
                alert('Please type your haps');
            }
            else
            {
                $.ajax({
                type: "POST",
                url: "post_haps.php",
                data: dataString,
                cache: false,
                success: function(html){
                $("#haps").val('');
                $("#content").prepend(html);
                }
                });
            }return false;
        });
    }); 
```

--

```
<textarea id="haps"></textarea>
<input type="submit" class="button inact" value="Share" disabled="disabled" id="submit_h"/> 
```

现在我想做的是，在提交后禁用按钮。任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:00:46.163

与 NullUserException 的链接类似，您可以使用 jquery 设置“禁用”属性：

```
$(".inact").attr('disabled', 'disabled'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:36:48.717

禁用ajax成功的按钮：

```
success: function(html){
                $("#haps").val('');
                $("#content").prepend(html);
                $("#submit_h").attr("disabled", true);
                       } 
```

# encoding - 将 UTF-8 字符序列转换为真正的 UTF-8 字节

> ID：12668670
> 
> 赞同：1
> 
> 时间：2012-10-01T06:51:28.733
> 
> 标签：encoding, utf-8, iconv

我有一个包含 UTF-8 字符序列的纯文本文件 (.yml)，如下所示：

foo: "检测到 \xC3\xB8"

问题在于 \xC3\xB8 - 这些不是“真正的”UTF-8 字节，因为它们在文本文件中保存为 8 个实际字符：\ x C 3 \ x B 8

有没有办法将这些转换成真正的 2 字节 UTF-8 序列？

可以使用任何操作系统/语言/外壳工具:-)

/ 卡斯滕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:47:17.727

使用这个 perl 脚本来转换你的文件：

```
#!/usr/bin/perl
while (<STDIN>) {
  $_ =~ s/\\x([0-9A-F][0-9A-F])/chr(hex($1))/eg;
  print $_;
} 
```

假设您将一个文件命名为 script `bogusutf`，然后使用以下命令进行转换：

> $ perl bogusutf *<输入文件>输出文件*

# jquery - 为什么我的 jQuery 和 updatepanel 在回发后不起作用？

> ID：12668671
> 
> 赞同：0
> 
> 时间：2012-10-01T06:51:28.803
> 
> 标签：jquery, asp.net, updatepanel

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $(function autoComp() {
            $('[id*="tipcombo"]').selectToAutocomplete();
            $('[id*="aractipi"]').selectToAutocomplete();
            $('[id*="bulundugu"]').selectToAutocomplete();
        });
    });

    function pageLoad(sender, args) {
        if (args.get_isPartialLoad()) {
            $('[id*="tipcombo"]').selectToAutocomplete();
            $('[id*="aractipi"]').selectToAutocomplete();
            $('[id*="bulundugu"]').selectToAutocomplete();
        }
    }
</script> 
```

我使用该代码来防止回发，但它不起作用。我还尝试了 Sys.WebForms.PageRequestManager.getInstance() 方法，但它再次不起作用。

```
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm.add_endRequest(function() {
   autoComp();
}); 
```

现在我只是在代码隐藏中编写了简单的函数，并且每个回发事件都使用 stringbuilder append 再次绑定它。但这不是一个健康的解决方案。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:58:19.443

jquery 和 asp.net ajax 库冲突。消除冲突：

```
<script type="text/javascript" language="javascript" src="jquery.min.js"></script>
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function($) {
        $('[id*="tipcombo"]').selectToAutocomplete();
        $('[id*="aractipi"]').selectToAutocomplete();
        $('[id*="bulundugu"]').selectToAutocomplete();
});
</script> 
```

或[访问此](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

# javascript - 自动化javascript中的下一个/上一个按钮

> ID：12668675
> 
> 赞同：0
> 
> 时间：2012-10-01T06:51:42.297
> 
> 标签：javascript, button

下面的代码用于查看飞走的图像。但是您必须单击“下一步”或“上一个”按钮才能发生这种情况。我希望它通过一个计时器自动发生，该计时器在每个图像上停止约 5 秒，然后更改为下一个图像，然后再次开始而不倒带。（我现在可以使用倒带功能，但最终希望它是连续的，这基本上意味着每个图像都必须飞离返回到堆栈的后面。

```
<div id="view">
        <ul id="stack">

            <li><img src="labels/manzonipinotnoir.png" /></li>
            <li><img src="labels/figgepinotnoir.png" /></li>
            <li><img src="labels/marinusbernardusredwine.png" /></li>
            <li><img src="labels/riverbench.png" /></li>

        </ul>
    </div>
<div class="controls">
        <button class="prev"  disabled="disabled">Prev</button>     
        <button class="next" >Next</button>
        <a> Featured Wineries</a>
    </div>

    <script>
    (function($) {

        var y_space = 50,
            z_space = 50;

        var view = $('#view'),
            lis = $('#stack li'),
            prev = $('.controls .prev'),
            next = $('.controls .next'),
            left = $('#rotate_controls .left'),
            centre = $('#rotate_controls .centre'),
            right = $('#rotate_controls .right');

        var z_index = lis.length,
            current_index = 1,
            translate_y = y_space *-1,
            translate_z = z_space *-1;

        lis.each(function() {

            this.style['-webkit-transform'] = 'translate3d(0px, ' + translate_y + 'px, ' + translate_z + 'px)';
            this.style['-moz-transform'] = 'translate3d(0px, ' + translate_y + 'px, ' + translate_z + 'px)';
            this.style['z-index'] = z_index;

            $(this).data('translate_y', translate_y);
            $(this).data('translate_z', translate_z);

            z_index--;
            translate_y -= y_space;
            translate_z -= z_space;

        });

        next.bind('click', function() {
            if($(this).attr('disabled')) return false;
            lis.each(function() {
                animate_stack(this, y_space, z_space);  
            });
            lis.filter(':nth-child(' + current_index + ')').css('opacity', 0);
            current_index ++;
            check_buttons();
        });

        prev.bind('click', function() {
            if($(this).attr('disabled')) return false;
            lis.each(function() {
                animate_stack(this, -y_space, -z_space);    
            });
            lis.filter(':nth-child(' + (current_index - 1) + ')').css('opacity', 1);
            current_index --;
            check_buttons();    
        });

        $(document).bind('mousewheel', function(event, delta, deltaX, deltaY) {
            if(deltaY >= 0) {
                next.trigger('click');
            }
            else {
                prev.trigger('click');
            }
        });

        function check_buttons() {
            if(current_index==1) {
                prev.attr('disabled', true);
            }
            else {
                prev.attr('disabled', false);
            }

            if(current_index == lis.length) {
                next.attr('disabled', true);                
            }
            else {
                next.attr('disabled', false);
            }
        }

        function animate_stack(obj, y, z) {

            var new_y = $(obj).data('translate_y') + y;
            var new_z = $(obj).data('translate_z') + z;

            obj.style['-webkit-transform'] = 'translate3d(0px, ' + new_y + 'px, ' + new_z + 'px)';
            obj.style['-moz-transform'] = 'translate3d(0px, ' + new_y + 'px, ' + new_z + 'px)';
            $(obj).data('translate_y', new_y)
            .data('translate_z', new_z);

        }

    })(jQuery);
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:17:16.433

你不能使用 setInterval 方法：

```
function timer()
 {
  setInterval(function(){nextImg()},5000);
 }

function nextImg()
{
 // whatever code you have written for next.bind
} 
```

# c# - 提高 MMO 游戏性能

> ID：12668680
> 
> 赞同：1
> 
> 时间：2012-10-01T06:52:11.197
> 
> 标签：c#, asp.net, postgresql, mmo

我们都知道MMO游戏的流行趋势。玩家面对面的地方。

> 我关心的领域是存储玩家动作和游戏结果。
> 
> 通过 NPGSQL 适配器使用 Csharp 和 PostgreSql v9.0
> 
> 游戏客户端是基于浏览器的 ASP.NET，并为所有与数据库相关的处理调用 Csharp 函数

要了解我的查询，请考虑以下情况

*我们将游戏进度存储在 postgres 表中。*

**例如**，锦标赛以四名玩家和以下活动开始

1.  每个玩家一开始有 100 个生命值
2.  玩家 1 进行罢工（我们参考图表将打击转换为随机范围 % 的生命值）
3.  玩家 2 有 92HP，并且还击，所以玩家 1 有 98HP

上述两轮现在将在游戏进度表中，如

```
ROW Player1HP Player2HP Strikefrom StrikeTo ReturnStrikeHP Round TimeStamp StrikeMethod
1      100       100         0        0            0          0
2       98        92        P1        P2           2          1 
```

要确定锦标赛是否已经结束，我们检查 3 名玩家的生命值为零或游戏时间已超过上次进度的规定超时值

我们的桌子有一个主键作为锦标赛ID 基于玩家ID的随机32个字符代码（每个玩家8个）

还有其他列，例如护甲，法力，法术，所有这些都为每个玩家结转，总共有48列-每个玩家及其属性为12

最后有一个 gameResult 表，其中包含比赛的结果，带有比赛 ID、比赛时间戳、比赛结果（完成、PlayerSurrender、InvalidSession、SecurityHack、TimeOut）、winnerPlayer、playerMetrics、rowIDfrom、rowIDto

**询问**

> 我的问题集中在减少游戏数据库或 Sql 查询的负载

**a) 如何检测玩家是否未同时登录并打开两个游戏会话但无需参考数据库或使用 Sql**

**b) 如何控制 GameProgress 表中记录的激增。让玩家更快得到响应。服务器在高峰时段或 1000 名玩家在线时开始延迟**

```
There is a tremendous flow of sql queries, for ex. even in the current game version
There are average/minimum 100 tournaments online per 12 minutes or 500 players / hour
In Game Progress table, We are storing each player move 
    a 12 round tourament of 4 player there can be 48 records
    plus around same number for spells or special items
    a total of 96 per tourament or 48000 record inserts per hour (500 players/hour) 
```

我还在考虑在 Csharp 中使用后台进程，该进程不断将过期的锦标赛记录从 GameProgresstable 移动到另一个数据库，在该数据库中我们的服务器没有游戏负载。

**c）我们应该多久运行一次充满 postgres 的 vaccum 。**

我对可以提高性能的新应用程序开源或 toPay 持开放态度。例如。我们使用 FastCsvReader [http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)来改进服务器日志文件的枚举。

问候阿文德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:17:36.253

```
 How to detect if a player has not logged in simutaneously and opened two game sessions 
 but without having to refer to a Database or using Sql 
```

假设您使用多个服务器，您会在某处创建仅注册登录和注销的进程。每当两者之一发生时，您都会调用它。您可以使用该过程来检查用户是否已经登录。您可以通过例如在所有服务器上运行该过程并使用算法仅对一部分用户使用 serverx 来平衡此过程。假设您有 10 台服务器，请执行 (userId % 10) 以获取用户注册登录/注销的服务器的 ID。

这样，您只需在内存中通过服务器之间的调用进行这些检查。可能您将需要超时/刷新调用，以便断开连接的用户或崩溃的服务器不会让用户永远保持登录状态。

```
How to control the surge of records into the GameProgress table. so that players get
response quicker. The Server starts to lag at peak hours or when 1000 players are
online 
```

#1 将 postgress 数据库切换为使用 SSD 进行存储

#2 将整个过程提升到内存中，不要将数据库用于实时工作

#3 更新数据库中的记录而不是创建新记录

#4 使用多个数据库并将用户分布在它们之上

#5 ....

```
Our table has a primarykey as tournamentid a random 32 character code on basis of
playerids. 
```

随机生成的主键是非常糟糕的做法恕我直言。使用一个序列，否则任何东西都保证是唯一的。如果你的随机码不够随机，你会得到非常讨厌的错误。每个游戏只需要生成一次，因此它不是性能瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:28:00.317

我推荐的另一件事是考虑将系统中经常更新的部分移至 VoltDB 之类的东西，尽管它具有复杂性成本。这会带来复杂性成本，您可能希望获得他们的商业许可/支持。但是，如果您还具有灾难恢复功能，主内存数据库在这种负载上的好处可能是值得的。然后，您的 PostgreSQL 实例可以处理长期数据，而 VoltDB 可以处理实时处理。

# string - 如何获取字符串中的字符数

> ID：12668681
> 
> 赞同：175
> 
> 时间：2012-10-01T06:52:15.277
> 
> 标签：string, go, character, string-length

如何在 Go 中获取字符串的字符数？

例如，如果我有一个字符串`"hello"`，该方法应该返回`5`. 我看到它`len(str)`返回字节数**而不是**字符数，所以`len("£")`返回 2 而不是 1，因为 £ 在 UTF-8 中用两个字节编码。

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-10-01T07:06:46.567

[`RuneCountInString`](http://golang.org/pkg/unicode/utf8/#RuneCountInString)您可以从 utf8 包中尝试。

> 返回 p 中的符文数

即，如[本脚本](http://play.golang.org/p/zzB1VrwdER)所示：“世界”的长度可能为 6（用中文书写时：“世界”），但其符文计数为 2：

```
package main

import "fmt"
import "unicode/utf8"

func main() {
    fmt.Println("Hello, 世界", len("世界"), utf8.RuneCountInString("世界"))
} 
```

[Phrozen](https://stackoverflow.com/users/383848/phrozen)[在评论中](https://stackoverflow.com/questions/12668681/go-language-string-length/12668840#comment39875126_12668840)补充道：

实际上你可以`len()`通过类型转换来完成符文。
`len([]rune("世界"))`将打印`2`。至少在 Go 1.3 中。

* * *

并且对于[CL 108985](https://go-review.googlesource.com/c/go/+/108985)（2018 年 5 月，针对 Go 1.11），`len([]rune(string))`现在进行了优化。（修复[问题 24923](https://github.com/golang/go/issues/24923)）

编译器`len([]rune(string))`自动检测模式，并将其替换为 for r := range s 调用。

> 添加一个新的运行时函数来计算字符串中的符文。修改编译器以检测模式`len([]rune(string))` 并将其替换为新的符文计数运行时函数。
> 
> ```
> RuneCount/lenruneslice/ASCII        27.8ns ± 2%  14.5ns ± 3%  -47.70%
> RuneCount/lenruneslice/Japanese     126ns ± 2%   60  ns ± 2%  -52.03%
> RuneCount/lenruneslice/MixedLength  104ns ± 2%   50  ns ± 1%  -51.71% 
> ```

* * *

[Stefan Steiger](https://stackoverflow.com/users/155077/stefan-steiger)指向博文“ [Go 中的文本规范化](https://blog.golang.org/normalization)”

> ## 什么是性格？

> 正如[字符串博客文章](http://blog.golang.org/strings)中提到的，**字符可以跨越多个符文**。
> 例如，一个 ' `e`' 和 '◌́◌́' (acute "\u0301") 可以组合成 'é'（`e\u0301`NFD 中的 " "）。**这两个符文加在一起就是一个字符**。
> 
> 字符的定义可能因应用而异。
> 对于**[标准化](https://godoc.org/golang.org/x/text/unicode/norm)**，我们将其定义为：
> 
> *   以启动器开头的一系列符文，
> *   不修改或向后组合任何其他符文的符文，
> *   随后是可能为空的非首发序列，即能做的符文（通常是重音符号）。
> 
> 规范化算法一次处理一个字符。

使用该包及其[`Iter`类型](https://godoc.org/golang.org/x/text/unicode/norm#Iter)，“字符”的实际数量将是：

```
package main

import "fmt"
import "golang.org/x/text/unicode/norm"

func main() {
    var ia norm.Iter
    ia.InitString(norm.NFKD, "école")
    nc := 0
    for !ia.Done() {
        nc = nc + 1
        ia.Next()
    }
    fmt.Printf("Number of chars: %d\n", nc)
} 
```

在这里，这使用了[Unicode 规范化形式](http://unicode.org/reports/tr15/#Norm_Forms)NFKD “兼容性分解”

* * *

[Oliver](https://stackoverflow.com/users/2046109/oliver)的[回答](https://stackoverflow.com/a/55151396/6309)指出，**[UNICODE TEXT SEGMENTATION](http://unicode.org/reports/tr29/)**是可靠确定某些重要文本元素之间默认边界的唯一方法：用户感知的字符、单词和句子。

为此，您需要一个像[**rivo/uniseg**](https://github.com/rivo/uniseg)这样的外部库，它可以执行**Unicode Text Segmentation**。

这实际上将计算“***[字素](https://en.wikipedia.org/wiki/Grapheme)簇***”，其中多个代码点可以组合成一个用户感知的字符。

```
package uniseg

import (
    "fmt"

    "github.com/rivo/uniseg"
)

func main() {
    gr := uniseg.NewGraphemes("!")
    for gr.Next() {
        fmt.Printf("%x ", gr.Runes())
    }
    // Output: [1f44d 1f3fc] [21]
} 
```

两个字素，即使有三个符文（Unicode 代码点）。

[您可以在“如何在 GO 中操作字符串以反转它们？](https://stackoverflow.com/a/62743214/6309) ”中查看其他示例。

‍ 单独是一个字素，但是，从[unicode 到代码点转换器](https://onlineunicodetools.com/convert-unicode-to-code-points)，有 4 个符文：

*   :[女性 (1f469)](https://apps.timwhitlock.info/unicode/inspect/hex/1F469)
*   [黑皮肤（1f3fe）](https://apps.timwhitlock.info/unicode/inspect/hex/1f3fe)
*   [零宽度连接器 (200d)](https://apps.timwhitlock.info/unicode/inspect/hex/200d)
*   [红头发 (1f9b0)](https://apps.timwhitlock.info/unicode/inspect/hex/1f9b0)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-04-03T16:54:07.620

有一种方法可以通过将字符串转换为 []rune 来获取没有任何包的符文计数`len([]rune(YOUR_STRING))`：

```
package main

import "fmt"

func main() {
    russian := "Спутник и погром"
    english := "Sputnik & pogrom"

    fmt.Println("count of bytes:",
        len(russian),
        len(english))

    fmt.Println("count of runes:",
        len([]rune(russian)),
        len([]rune(english)))

} 
```

> 字节数 30 16
> 
> 符文数 16 16

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-13T21:21:13.340

我应该指出，到目前为止提供的答案都没有像您期望的那样为您提供字符数，尤其是当您处理表情符号时（还有一些语言，如泰语、韩语或阿拉伯语）。[VonC 的建议](https://stackoverflow.com/a/12668840/2046109)将输出以下内容：

```
fmt.Println(utf8.RuneCountInString("️‍")) // Outputs "6".
fmt.Println(len([]rune("️‍"))) // Outputs "6". 
```

那是因为这些方法只计算 Unicode 代码点。有许多字符可以由多个代码点组成。

与使用[标准化包](https://godoc.org/golang.org/x/text/unicode/norm)相同：

```
var ia norm.Iter
ia.InitString(norm.NFKD, "️‍")
nc := 0
for !ia.Done() {
    nc = nc + 1
    ia.Next()
}
fmt.Println(nc) // Outputs "6". 
```

规范化实际上与计数字符不同，许多字符不能规范化为一个代码点等价物。

[masakielastic 的答案](https://stackoverflow.com/a/26728555/2046109)很接近，但只处理修饰符（彩虹标志包含一个修饰符，因此不计为它自己的代码点）：

```
fmt.Println(GraphemeCountInString("️‍"))  // Outputs "5".
fmt.Println(GraphemeCountInString2("️‍")) // Outputs "5". 
```

将 Unicode 字符串拆分为（用户感知的）字符（即字素簇）的正确方法在[Unicode 标准附件 #29](http://unicode.org/reports/tr29/)中定义。这些规则可以在[第 3.1.1 节](http://unicode.org/reports/tr29/#Grapheme_Cluster_Boundary_Rules)中找到。github.com/rivo/uniseg包实现了这些规则，因此您[可以确定](https://github.com/rivo/uniseg)字符串中正确的字符数：

```
fmt.Println(uniseg.GraphemeClusterCount("️‍")) // Outputs "2". 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-03-17T16:00:50.237

有几种方法可以获取字符串长度：

```
package main

import (
    "bytes"
    "fmt"
    "strings"
    "unicode/utf8"
)

func main() {
    b := "这是个测试"
    len1 := len([]rune(b))
    len2 := bytes.Count([]byte(b), nil) -1
    len3 := strings.Count(b, "") - 1
    len4 := utf8.RuneCountInString(b)
    fmt.Println(len1)
    fmt.Println(len2)
    fmt.Println(len3)
    fmt.Println(len4)

} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-01T07:49:51.423

很大程度上取决于您对“角色”的定义。如果“符文等于一个字符”对您的任务来说是可以的（通常不是），那么 VonC 的答案对您来说是完美的。否则，应该注意的是，在少数情况下，Unicode 字符串中的符文数量是一个有趣的值。即使在这些情况下，如果可能的话，最好在处理符文时在“遍历”字符串时推断计数，以避免将 UTF-8 解码工作加倍。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-04T05:49:30.530

如果您需要考虑字素簇，请使用 regexp 或 unicode 模块。由于字素簇的长度是无限的，因此验证也需要计算代码点（符文）或字节的数量。如果要消除极长的序列，请检查序列是否符合[流安全文本格式](http://www.unicode.org/reports/tr15/#Stream_Safe_Text_Format)。

```
package main

import (
    "regexp"
    "unicode"
    "strings"
)

func main() {

    str := "\u0308" + "a\u0308" + "o\u0308" + "u\u0308"
    str2 := "a" + strings.Repeat("\u0308", 1000)

    println(4 == GraphemeCountInString(str))
    println(4 == GraphemeCountInString2(str))

    println(1 == GraphemeCountInString(str2))
    println(1 == GraphemeCountInString2(str2))

    println(true == IsStreamSafeString(str))
    println(false == IsStreamSafeString(str2))
}

func GraphemeCountInString(str string) int {
    re := regexp.MustCompile("\\PM\\pM*|.")
    return len(re.FindAllString(str, -1))
}

func GraphemeCountInString2(str string) int {

    length := 0
    checked := false
    index := 0

    for _, c := range str {

        if !unicode.Is(unicode.M, c) {
            length++

            if checked == false {
                checked = true
            }

        } else if checked == false {
            length++
        }

        index++
    }

    return length
}

func IsStreamSafeString(str string) bool {
    re := regexp.MustCompile("\\PM\\pM{30,}") 
    return !re.MatchString(str) 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-12T15:37:42.680

我试图更快地进行标准化：

```
 en, _ = glyphSmart(data)

    func glyphSmart(text string) (int, int) {
        gc := 0
        dummy := 0
        for ind, _ := range text {
            gc++
            dummy = ind
        }
        dummy = 0
        return gc, dummy
    } 
```

# macos - Filesetattr 不适用于 XE3 (Firemonkey)

> ID：12668685
> 
> 赞同：0
> 
> 时间：2012-10-01T06:52:27.483
> 
> 标签：macos, delphi, firemonkey, delphi-xe3

我想用 Firemonkey (XE3) 在 macosX 环境下创建一个隐藏的 ini 文件。但不幸的是，这个命令在 system.utilys 中已经不为人知了

有人提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:01:34.567

在 Mac 上，有两种方法可以使文件“隐藏”或“不可见”。

与 Linux 或 Unix 一样，[您可以使用点](http://en.wikipedia.org/wiki/Hidden_file_and_hidden_directory#Unix_and_Unix-like_environments)(.) 开始文件名。

您还可以使用 Xcode 附带的[setfile](http://hints.macworld.com/article.php?story=20011018172352562)工具来设置属性以使其不可见（`[setfile a -V filename][3]`）。

根据不同的方式，您必须将 Win32 特定`SetFileAttr`调用替换为特定于 Mac 的重命名，或者找出`setfile`用于设置属性的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:11:09.340

在 UNIX 中（在这一层中，Mac OS 很大程度上是从 FreeBSD 衍生出来的）文件上没有“隐藏”标志，而是特殊文件的名称应该以点开头。 [http://en.wikipedia.org/wiki/Dot-file](http://en.wikipedia.org/wiki/Dot-file)

所以如果你想隐藏一个文件 - 重命名它。

那不是关于Delphi的问题=那是操作系统的问题，Windows vs UNIX。

打开控制台/终端/无论他们在 Apple 中调用什么命令提示符，转到您的主文件夹并发出两个命令：*ls*和*ls -a* - 比较输出中的文件列表。

好吧，对于初学者来说，你可以在 Linux 中进行 - [http://bellard.org/jslinux/](http://bellard.org/jslinux/) - 等待几秒钟让它启动，然后发出*ls*、*ls -l*、*ls -a*、*ls -la*并查看区别。

点文件被特殊处理并默认隐藏。

# javascript - 如何使用 jQuery 检查由 onBlur 触发的元素是否具有某些类

> ID：12668687
> 
> 赞同：2
> 
> 时间：2012-10-01T06:52:37.743
> 
> 标签：javascript, jquery

HTML

```
 <input type="text" id="trainingFee" name ="training Fee" class="number error" value="" onblur="callMe()"> 
```

jQuery

```
 function callMe(){
       if($this.id).hasClass('error')){
        alert("has error class");       
 } 
```

}

但这不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:56:15.893

您正在尝试使用***this***上下文访问元素的当前 id。您需要将其传递给函数才能执行此操作

**onblur="callMe(这个)"**

```
 function callMe(elem){
       if($(elem).hasClass('error')){
        alert("has error class");       
 }
} 
```

否则你可以试试这个方法

[小提琴](http://jsfiddle.net/sushanth009/MTB3K/1/)

```
$(function() {
    $('#trainingFee').on('blur', function() {
        if ($(this).hasClass('error')) {
            alert("has error class");
        }
    });
});​

<input type="text" id="trainingFee" name ="training Fee" class="number error" value=""  /> 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T07:01:08.840

您应该`onblur`从 HTML 中删除该属性，然后使用 jQuery 完成所有操作。

```
$('#trainingFee').blur(function () {
    if ($(this).hasClass('error')) {
        alert('has error class');
    }
}​);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:56:37.560

你可以试试：

```
if ($(this).is('.error')) {
  ...
} 
```

# signals - crossroads.js + require.js “无法读取未定义的属性‘信号’”

> ID：12668691
> 
> 赞同：1
> 
> 时间：2012-10-01T06:52:57.290
> 
> 标签：signals, requirejs

我试图让 crossroads.js 与 require.js 一起工作，这两个项目都是新手。Crossroads 不断失败，因为它的信号依赖被传递为未定义。项目中是否存在错误，或者我做错了什么？

这是一个 jsfiddle： http: [//jsfiddle.net/zkemk/2/](http://jsfiddle.net/zkemk/2/) 检查控制台日志。

这可能是重复的，但我不确定，因为这个问题似乎已经死了并且描述得不是很好：[Crossroads.js and require.js](https://stackoverflow.com/questions/8618444/crossroads-js-and-require-js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:13:30.533

Crossroads 项目的“lib”文件夹中的 JS-Signals 版本已过时，它没有调用`define()`这就是它失败的原因（v0.7+ 调用定义）。我更新了 jsfiddle 以链接到最新版本的信号，它按预期工作：http: [//jsfiddle.net/zkemk/3/](http://jsfiddle.net/zkemk/3/) - 我也会更新 Crossroads 存储库中的文件。带来不便敬请谅解。

# javascript - 使用 Node js 连接到 Sharepoint

> ID：12668693
> 
> 赞同：1
> 
> 时间：2012-10-01T06:52:58.617
> 
> 标签：javascript, node.js

我是节点的新手。我需要执行以下操作。

1.  使用节点 js 连接并请求到 SHarepoint 门户
2.  从 Portal 检索响应 [可能是文档或 excel]
3.  将响应存储在 Mongo DB 中

如何实施？请让我知道上述场景的任何共享点 API 或示例代码或参考。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:55:24.567

你搜索过[npm 注册表](http://npmjs.org)吗？除其他外，它包含[此模块](https://github.com/lstak/node-sharepoint)。

要在 MongoDB 中存储文件，请查看[GridStore](http://mongodb.github.com/node-mongodb-native/markdown-docs/gridfs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T05:17:14.913

该链接可以满足上述要求。对于可能正在寻找带有共享点的节点 js 的人来说可能很有用。节点共享点休息 [https://www.npmjs.org/package/node-sharepoint-rest](https://www.npmjs.org/package/node-sharepoint-rest)

# mysql - UPDATE 语句的 where 子句中的子查询

> ID：12668701
> 
> 赞同：4
> 
> 时间：2012-10-01T06:53:25.020
> 
> 标签：mysql, sql

我有 ATM 卡的数据库，其中有字段 account_no、card_no、is_blocked、is_activated、issue_date 字段帐号和卡号不是唯一的，因为旧卡将过期并标记为 is_block=Y 和另一条具有相同卡号的记录，帐号将被插入到新行中 is_blocked=N 。现在我需要在 issue_date 的帮助下更新 is_blocked/is_activated 即

```
UPDATE card_info set is_blocked='Y' where card_no='6396163270002509' 
AND opening_date=(SELECT MAX(opening_date) FROM card_info WHERE card_no='6396163270002509') 
```

但不允许我这样做，它会引发以下错误

```
1093 - You can't specify target table 'card_info' for update in FROM clause 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T06:56:15.430

试试这个：

```
UPDATE card_info ci
INNER JOIN 
(
  SELECT card_no, MAX(opening_date) MaxOpeningDate
  FROM card_info
  GROUP BY card_no
) cm ON ci.card_no = cm.card_no AND ci.opening_date = cm.MaxOpeningDate
SET ci.is_blocked='Y' 
WHERE ci.card_no = '6396163270002509' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T07:01:03.807

这是 MySQL 解析器的愚蠢限制之一。解决这个问题的常用方法是使用 JOIN 查询，如 Mahmoud 所示。

（至少对我来说）令人惊讶的部分是它确实似乎是*解析器*问题，而不是引擎本身的问题，因为如果将子选择包装到派生表中，这确实有效：

```
UPDATE card_info 
   SET is_blocked='Y' 
 WHERE card_no = '6396163270002509' 
 AND opening_date = ( select max_date 
                      from (
                          SELECT MAX(opening_date) as_max_date 
                          FROM card_info 
                          WHERE card_no='6396163270002509') t
                    ) 
```

# jquery - 使用 Joomla CMS 进行 jQuery 验证

> ID：12668704
> 
> 赞同：1
> 
> 时间：2012-10-01T06:53:34.277
> 
> 标签：jquery, validation, joomla, jquery-validate, joomla2.5

我使用下面的 jquery.validation 在前端验证电子邮件。它工作正常。

```
jQuery(function(){ 
  //checking email is blank or not
  jQuery("#email").validate({
    expression: "if(VAL) return true; else return false;",
    message: "<?php echo JText::_('Error in email'); ?>"
  });
}); 
```

PHP - Joomla 保存按钮

```
JToolBarHelper::save(); 
```

我使用 joomla 本机保存按钮来触发以在我的控制器中保存任务。

HTML

```
<input type="text" name="email" id="email" value=""> 
```

我的问题是 jquery 验证不会停止 joomla 提交。我想要做的是当用户单击保存时，我只想在没有验证错误的情况下提交表单。我该怎么做 ？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T10:08:30.130

愿这对你有帮助-

```
//Joomla 1.5
    function submitbutton(pressbutton) {   
     var isValid = jQuery("#form-id").valid();
     if(isValid){
      submitform(pressbutton); 
     }else{
      return false;
     }
    }
    jQuery(document).ready(function(){
     jQuery("#form-id").validate();
    });

//joomla 2.5
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery("#form-id").validate();
});
Joomla.submitbutton = function(task)
{
    var isValid = jQuery("#form-id").valid();
    if(isValid){
        Joomla.submitform(task, document.getElementById('form-id'));  
    }else{
        return false;
    }
}
</script> 
```

有关更多详细信息 - [http://docs.jquery.com/Plugins/Validation/valid](http://docs.jquery.com/Plugins/Validation/valid)

# ruby-on-rails - mongodb混淆中的嵌套属性

> ID：12668705
> 
> 赞同：0
> 
> 时间：2012-10-01T06:53:36.960
> 
> 标签：ruby-on-rails, mongodb, devise, mongoid

我正在使用带有数据库 Mongodb 的 Rails。我正在使用设计。设计有模型名称用户。用户的 id 在

```
:id => current_user.id 
```

我想制作一个模型，这样当从表单中保存数据时，当前用户的 id 也将保存在集合中。我的员工的模型是

```
 class Employee
  include Mongoid::Document
  field :first_name, type: String
  field :middle_name, type: String
  field :last_name, type: String
  field :otherid, type: String
  field :licennum, type: String
  field :citizennum, type: String
  field :licenexp, type: String
  field :gender, type: String
   field :state, type: String
  field :marital_status, type: String
  field :country, type: String
  field :birthdate, type: String
  field :nickname, type: String
  field :description, type: String
  validates_presence_of :first_name 
```

{ }

```
end 
```

我应该在大括号内放什么，这样当从该模型保存数据时，它也会将当前用户 ID 保存在其中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:58:24.250

您显示的代码仅包含个人信息字段，例如出生日期等。我想最简单的解决方案是将它们放在`User`类中，并使用内置的设计操作来更改它们，例如`devise/registrations#edit`，它将更改应用`current_user`为默认值。

或者，如果您想将 Employee 保留为单独的类，您可以尝试嵌入`Employee`到`User`类中，如下所示：

```
class User 
  include Mongoid::Document

  embeds_one :employee
  (...)

class Employee
  include Mongoid::Document

  embedded_in :user 
```

在这种情况下，您将在控制器级别设置关系，例如：

```
class EmployeesController < ApplicationController

  def create
    current_user.create_employee(params[:employee])
  end 
```

创建后，您可以从 Employee 类访问用户的 ID 作为`user.id`.

# python - 如何修改plone中的url，这样如果修改了我们就不会得到相同的页面？

> ID：12668710
> 
> 赞同：0
> 
> 时间：2012-10-01T06:54:26.477
> 
> 标签：python, plone

在 plone 中使用 atreal.richfile.preview 后，我们得到了一个 pdf 文件的预览，其 url 为 : `http://localhost:8090/plone/sample.pdf/view`。如果我们删除部分 url 即“/view”，`http://localhost:8090/plone/sample.pdf`在浏览器中输入 url: 仍然可以查看，并且 pdf 可以打印或复制。如果修改了相同的url，如何修改url，使其不会在新窗口中显示pdf？使用克隆 4.1。需要添加/编辑哪个模板和什么代码。请指导

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T10:14:30.087

在上面的示例中，sample.pdf 可能是在 Plone 中创建的文件。在这种情况下，不带 /view 的 URL 将呈现文件以供下载，而带 /view 的 URL 将呈现带有下载链接的 Plone 页面。这是标准行为。

真的不可能阻止人们下载 PDF。您可以在 portal_types 中修改 File FTI（转到 ZMI 中的 portal_types/File 并更改方法别名选项卡）。如果您将“（默认）”别名更改为与“视图”别名相同，它将表现相同。请注意，这将影响所有文件。

马丁

# git - Git使用子树或子模块管理外部资源

> ID：12668711
> 
> 赞同：20
> 
> 时间：2012-10-01T06:54:36.313
> 
> 标签：git, git-submodules, git-subtree

我读了很多关于 git 子模块应该有多糟糕的文章，但我不确定这是否只是那些认为它有限制的人的呻吟，或者它是否有严重的问题（尤其是关于我的用例）。

我只想像这样在我的回购中包含不同的回购

```
website/
 libs/
  js/
   fs-slides [external]
   fs-dialog [external] 
```

并且必须有可能轻松更新这些存储库。据我了解，从回购中只包含一个文件并不容易，对吧？（但没关系。）

我应该为此使用子模块吗？
或者它有什么问题吗？还是子树更容易？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T07:31:57.947

子模块非常适合您的情况，尤其是因为您不介意将这些子存储库包含在它们自己的子目录中。

使用子模块可能遇到的主要严重问题是在进行更新时更新它们，如“ [git submodule 究竟是如何工作](https://stackoverflow.com/questions/12078365/how-exactly-does-git-submodule-work/12078816#12078816)的”中所述：

如果您在子模块中进行提交时忘记设置分支，则所述提交将在分离的 HEAD 上进行，并且正在进行的更改将在下一次丢失（如果为您的子模块 repo 激活，您`git submodule update`可以通过`reflog`）。

然后，正如[迈克尔](https://stackoverflow.com/users/627411/michael) [评论](https://stackoverflow.com/questions/12668711/git-using-subtree-or-submodule-to-manage-external-resources/12669096#comment17263309_12669096)和我在上面的链接中详述的那样，您需要在提交之前将子模块推送到它自己的上游并推送父仓库（以避免推送取消发布子模块提交）

# wcf - WCF CollectionDataContract 不使用 ItemName

> ID：12668715
> 
> 赞同：1
> 
> 时间：2012-10-01T06:54:44.433
> 
> 标签：wcf

我有一个本地托管的 WCF 服务，我尝试使用 WCF 的 CollectionDataContract。

服务合同如下所示：

```
[OperationContract]
GetSalesDeliveryNotesResponse GetSalesDeliveryNotes(GetSalesDeliveryNotesRequest request); 
```

GetSalesDeliveryNotesResponse 类有一个属性 Serials，如下所示：

```
[DataMember]
public SerialList Serials { get; set; } 
```

SerialList 类是 GetSalesDeliveryNotesResponse 的内部类，如下所示：

```
[CollectionDataContract(ItemName = "Serial")]
public class SerialList : List<string> {
    public SerialList() : base() { }

    public SerialList(List<string> l) : base() {
        AddRange(l);
    }
} 
```

我用来设置此属性的代码如下所示：

```
Serials = new GetSalesDeliveryNotesResponse.DeliveryNote.Order.Orderline.SerialList(
    (from s in r.Descendants("Serial") 
    select s.Value).ToList()
) 
```

其中 r 是 XElements 的集合（服务连接到 Oracle 数据库，执行一个存储过程，该过程返回一个 XML，我的服务必须将其序列化给客户端）。

请注意，DeliveryNote、Order 和 Orderline 也是 Response-object 的内部类，但为简洁起见被省略（与其他几个属性一样）。

我遇到的问题是我的响应（客户端）中的 Serials 对象如下所示：

```
<Serials>
    <string>123789456</string>
</Serials> 
```

当我希望它看起来像这样时：

```
<Serials>
    <Serial>123789456</Serial>
</Serials> 
```

我在这里想念什么？

//编辑：更多信息：服务的客户端实现对于 SerialList 类有这个：

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
[System.Runtime.Serialization.CollectionDataContractAttribute(Name="GetSalesDeliveryNotesResponse.DeliveryNote.Order.Orderline.SerialList", Namespace="http://schemas.datacontract.org/2004/07/<my_namespace>/DeliveryNoteService.Contract.Response", ItemName="Serial")]
[System.SerializableAttribute()]
public class SerialList : System.Collections.Generic.List<string> { } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:32:51.490

显然我的服务是正确的。使用 WCFTestClient 给出了正确的响应。因此，我自己的测试代码存在问题。

# jetty - 在 ServiceMix (OSGI) 下运行的 Jetty 中设置 ContextPath

> ID：12668718
> 
> 赞同：0
> 
> 时间：2012-10-01T06:55:01.557
> 
> 标签：jetty, embedded-jetty, apache-karaf, apache-felix, apache-servicemix

这是我的环境背景。

我正在尝试通过使 MANIFEST.MF 如下所示将 myapp WAR 转换为 OSGi 兼容，并希望在 ServiceMix 中部署此战争基于 OSGi 的容器。

# 清单文件

```
Manifest-Version: 2.0
Bundle-SymbolicName: myapp
Bundle-Version: 2.1.dev
Bundle-Name: Jetty.myapp
Bundle-Vendor: ABC
Created-By: 1.6.0_25-b06 (Sun Microsystems Inc.)
Bundle-ClassPath: .,WEB-INF/lib, WEB-INF/classes, xforms/xsltforms
Web-ContextPath: myapp
Webapp-Context: myapp
Import-Package: javax.servlet
Built-By: root
Project-Name: ABC_PRJ
Project-Version: 2.1.dev
Project-Build: ${DSTAMP}
SVN-Revision: ${svn.revision} 
```

ContextPath 被设置为 null，我应该在哪里设置 contextPath 以及如何设置？您可能会在 FileNotFound Exception 中观察到“null”字符串。

日志：

```
java.io.FileNotFoundException: null/WEB-INF/myForms-config.xml (No such file or
        directory) 
```

# 我在 myapp 中的 web.xml 是：

```
<contextPath>/</contextPath>
<context-param>
      <param-name>myForms.configfile</param-name>
      <param-value>WEB-INF/myForms-config.xml</param-value>
</context-param> 
```

是 myapp 或 jetty 或 serviceMix 的问题吗？有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:15:58.243

您需要通过 Manifest 而不是通过 web.xml 设置 web-contextpath 以获取更多信息，请查看[Pax-Web](http://team.ops4j.org/wiki/display/paxweb/Pax+Web)

# windows-phone-7 - 在 Windows Phone 中显示没有任何按钮的消息

> ID：12668721
> 
> 赞同：1
> 
> 时间：2012-10-01T06:55:11.530
> 
> 标签：windows-phone-7, windows-phone-7.1, message

我想在 Windows Phone 中创建一个信息消息框。

它应该看起来像一条短信，在屏幕上显示 X 秒，而且我没有像**MessageBox.Show()**那样的任何确认按钮。它将用于向用户显示有关应用程序进度的一些消息，例如“*文件下载开始*”或“*首选项已保存*”。

我尝试使用 Popup 元素创建类似的东西，但它似乎与我想做的有点不同。

通过弹出窗口，我可以创建类似的东西

```
canvas.MouseLeftButtonUp += new MouseButtonEventHandler(popupCloseEvent); 
```

例如，当用户点击它时关闭此弹出窗口。

或类似的东西。（也许可以在那里实现一个计时器以在几秒钟后将其关闭）

有没有更好的方法来创造这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:14:39.760

您可以使用 Coding4Fun 工具包中的 Message Dialog 或 Overlay 控件。

在这里找到：http: [//coding4fun.codeplex.com/](http://coding4fun.codeplex.com/)

它们是非常简单易用的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:20:48.760

试试这个

在 Xaml 中：

```
 <Popup Tap="Popup_Tap"></Popup> 
```

在后面的代码中：

```
 private void Popup_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        (sender as Popup).IsOpen = false;
    } 
```

我希望它有所帮助。

# php - PHPDocx log4php 配置器

> ID：12668729
> 
> 赞同：0
> 
> 时间：2012-10-01T06:56:01.057
> 
> 标签：php, docx, log4php, phpdocx

执行 phpdocx 创建函数时出现错误。虽然它在本地工作正常。

> 严重性：注意 --> 未定义索引：log4php.threshold

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:00:53.787

这只是来自的通知`phpdocx`，可能不是所有的通知都已解决，您可以禁用来自生产服务器的通知。修改`php.ini`：

```
error_reporting = E_ALL & ~E_NOTICE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:01:12.870

当`undefined index`php 脚本在数组中找不到匹配的索引时，会发出通知。

您必须使用`print_r($array)`或`var_dump($array)`是否包含此索引来检查您的数组。

# mysql - 存储大量 blob 的数据库类型是什么？

> ID：12668736
> 
> 赞同：0
> 
> 时间：2012-10-01T06:56:28.997
> 
> 标签：mysql, database

我感觉答案将是 MYSQL，但我也听说原始数据/blob 永远不应该在 mysql 中；）

我需要

1.  以事务方式保存原始数据
2.  数据可以从 16bytes 到 1gb（理论上）
3.  在任何插入上都有某种自动增加/id，这样我就可以将它链接到另一个表中或在原始数据中使用
4.  将一行用作长（或 id 的大小）数组，其中每个值都是唯一的（因此 1、1、2 不能出现）
5.  从所述数组中删除或添加元素
6.  可以是许多演出的大小。Redis 非常支持上述内容，除了我需要更多数据然后我有 ram

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:01:26.297

如果您需要事务、正确的类型和对 SQL 标准的适当支持，请使用 PostgreSQL，并查看 BLOB 存储的管理选项。其中一个关键字将它们移动到不同的物理空间，另一个关键字防止压缩，这可能很有用。您的自动增加 ID 也有 SERIAL。

对于您的第四点，听起来您正在尝试存储位标志？

# c# - 使用asp.net中的代码在页面加载时显示弹出div？

> ID：12668743
> 
> 赞同：0
> 
> 时间：2012-10-01T06:56:57.750
> 
> 标签：c#, javascript, jquery, asp.net, code-behind

我有一个条件，我想在页面加载时显示弹出 div，具体取决于查询字符串。就像如果查询字符串**delete=1**那么我需要打开弹出窗口。我正在使用以下链接中弹出的模式：

[SimpleModal Demos](http://www.ericmmartin.com/projects/simplemodal-demos/)我正在使用**OSX 样式对话框**，请帮助我。

我的代码背后的代码是

```
 if (!string.IsNullOrEmpty(Request.QueryString["delete"]) && !string.IsNullOrEmpty(Request.QueryString["u"]))
    {
        ScriptManager.RegisterStartupScript(this, GetType(), "test", "$('#osx-modal-content').modal({overlayId: 'osx-overlay',containerId: 'osx-container', closeHTML: null,minHeight: 80,opacity: 65, position: ['0',],overlayClose: true, onOpen: OSX.open,onClose: OSX.close }); ", true);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:55:30.270

javasript function pageload(){ //读取查询字符串 $(#div).show(); 通过这个，你可以在页面加载过程中将 div 显示为 pop。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T08:05:24.933

为什么不使用 ASP.net AJAX 控件工具包中包含的 ModalPopupExtender？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T06:59:35.163

osx.js 文件中的用户模式函数，并使用 page.registerstartupscript 从后面的代码中调用它

# java - Java EE 教程源的链接断开

> ID：12668752
> 
> 赞同：0
> 
> 时间：2012-10-01T06:57:41.763
> 
> 标签：java, oracle, jakarta-ee, crud

[http://www.oracle.com/technetwork/articles/javase/gfandmysql-part2-138537.html](http://www.oracle.com/technetwork/articles/javase/gfandmysql-part2-138537.html)上的教程是关于 GlassFish 和 MySQL，第 2 部分：使用数据持久性构建 CRUD Web 应用程序，指向[https： //techdayscode.dev.java.net/servlets/ProjectDocumentList?folderID=9891（petcatalog](https://techdayscode.dev.java.net/servlets/ProjectDocumentList?folderID=9891)应用程序包）作为源代码。

但是链接坏了。

有谁知道我在哪里可以找到源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:18:31.960

根据[这个页面](http://netbeans.org/kb/samples/pet-catalog.html)，它包含在 NetBeans IDE 的 Java EE 包中。

# jsf-1.2 - Tomahawk : t:outputText 不工作

> ID：12668756
> 
> 赞同：0
> 
> 时间：2012-10-01T06:58:00.677
> 
> 标签：jsf-1.2, tomahawk

我正在使用`JSF 1.2`并尝试`Captcha`按照此[链接实施](http://www.jsfcentral.com/articles/tomahawk_in_action_1.html)

所以，我的第一个目标是获取“Hello world”文本，`t:outputText`用于检查是否`Tomahawk`工作正常。我`JSF 1.2`的基础`Servlet`部署在`Jboss AS 5.1.0`. 但是，当我点击我`Servlet`的 时，页面上没有显示任何内容。`Exceptions`日志中也没有任何内容。

下面是我的`xhtml`页面代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:rich="http://richfaces.org/rich"
xmlns:t="http://myfaces.apache.org/tomahawk">

<ui:composition>
<head>  
 <title>CAPTCHA</title>   
</head>
<body>
<h:form id="captchatest">
<t:outputText value="This text is coming from tomahawk"></t:outputText>
</h:form>
</body>
</ui:composition>
</html> 
```

我在下面`jars`使用`WEB-INF/lib`

```
batik-awt-util-1.6-1.jar,
batik-ext-1.6-1.jar,
batik-gui-util-1.6-1.jar,
batik-util-1.6-1.jar,
commons-beanutils.jar,
commons-codec-1.3.jar,
commons-collections.jar,
commons-digester.jar,
commons-el-1.0.jar,
commons-fileupload-1.2.1.jar,
commons-io-1.3.2.jar,
commons-logging.jar,
commons-validator.jar,
el-ri.jar,
itext-1.4.8.jar,
jsf-api-1.2_13.jar,
jsf-facelets-1.1.15.B1.jar,
jsf-impl-1.2_13.jar,
myfaces.jar,
oro-2.0.8.jar,
standard-1.1.2.jar,
tomahawk-1.1.6.jar 
```

我有以下条目`faces-config.xml`

```
 <application>
        <view-handler>com.sun.facelets.FaceletViewHandler</view-handler>
        <locale-config />
    </application> 
```

当我`page source`在浏览器中查看时，我只是得到了我的 xhtml 页面中的任何内容，而不是被解析为 HTML 代码的 Tomahawk 标记 (t:outputText)。

为什么我无法`t:outputText`在浏览器中打印 的值？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:07:49.837

我通过移除这些罐子解决了它 `el-ri.jar, oro-2.0.8.jar and standard-1.1.2.jar`

我在 xhtml 页面中添加了这个

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
```

# authorization - Alfresco 和 google drive like 授权

> ID：12668759
> 
> 赞同：2
> 
> 时间：2012-10-01T06:58:24.617
> 
> 标签：authorization, alfresco

我想授权某些网络应用程序（在我的例子中：diagram.ly）访问我的 Alfresco 存储库，例如用于创建和修改文件的谷歌驱动器。是否有一些 Alfresco 扩展已经可以做到这一点？为 Alfresco 编写这样一个“您允许 XY 访问您的文件”对话框有多难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:06:33.400

Alfresco 的本地版本通常要求您使用用户名和密码进行身份验证，但如果您知道自己在做什么，作为开发人员可以插入其他身份验证机制。

如果您需要更多 OAuth 类型的解决方案来避免直接进行身份验证，您可以注册一个 Alfresco Cloud 帐户。该服务的公共 API，具有基于 OAuth2 的授权，于本周推出。

有关更多详细信息，请参阅[https://developer.alfresco.com/cloud](https://developer.alfresco.com/cloud)。

# c# - 在gridview中覆盖rowcommand

> ID：12668763
> 
> 赞同：1
> 
> 时间：2012-10-01T06:58:39.860
> 
> 标签：c#, asp.net, gridview, rowcommand

我想在gridview中单击删除按钮时刷新页面，但是如果我编写我的onrowcommand函数，我找不到这样做的方法

```
if (e.CommandName == "Delete")
{
Response.Redirect("~/Order.aspx");
} 
```

它首先重定向，并且不删除记录，但是我希望能够删除记录并在之后使用重定向方法刷新页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:09:12.367

不要使用删除命令，而是使用`RowDeleted`服务器端事件。它在行被删除后触发，它可以满足您的目的。

[链接到文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdeleted.aspx)

# iphone - 地址簿中的电子邮件 ID

> ID：12668765
> 
> 赞同：1
> 
> 时间：2012-10-01T06:58:58.420
> 
> 标签：iphone, objective-c, xcode

我正在将地址簿中的所有联系人添加到我的应用程序中，我只需要从所选联系人获取电子邮件地址，这是我的代码

shouldContinueAfterSelectingPerson

```
- (BOOL)peoplePickerNavigationController:

(ABPeoplePickerNavigationController *)peoplePicker

      shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    // Select phone number

    ABMultiValueRef emailProperty = ABRecordCopyValue(person, kABPersonEmailProperty);

    NSString *email = (__bridge NSString *)(emailProperty);

    [self dismissModalViewControllerAnimated:YES];

    self.view.frame = CGRectMake(0, 44, 320, 370);

    return NO;

} 
```

请帮助我摆脱这些人，在此先感谢

我在下面给出的日志中打印它

电子邮件字符串是 ABMultiValueRef 0x1eb2ddb0，值为 0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:11:37.000

```
CFStringRef value, label;
ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);
CFIndex count = ABMultiValueGetCount(multi);
if (count == 1)
{
    value = ABMultiValueCopyValueAtIndex(multi, 0);
    emailid = (NSString*) value;
    NSLog(@"self.emailID   %@",emailid);
    CFRelease(value);
}
else
{
    for (CFIndex i = 0; i < count; i++)
    {
        label = ABMultiValueCopyLabelAtIndex(multi, i);
        value = ABMultiValueCopyValueAtIndex(multi, i);

        // check for Work e-mail label
        if (CFStringCompare(label, kABWorkLabel, 0) == 0)
        {
            emailid = (NSString*) value;
            NSLog(@"self.emailID   %@",emailid);
        }
        else if(CFStringCompare(label, kABHomeLabel, 0) == 0)
        {
            emailid = (NSString*) value;
            NSLog(@"self.emailID   %@",emailid);
        }

        CFRelease(label);
        CFRelease(value);
    }
}
CFRelease(multi); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:54:10.307

您可以添加以下代码来访问电子邮件表单联系人..

```
-(IBAction)Contact 
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;
        [self presentModalViewController:picker animated:YES];
    [picker release];}
- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker {
    [self dismissModalViewControllerAnimated:YES];
 }

- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {
    ABMultiValueRef emailMultiValue = ABRecordCopyValue(person, kABPersonEmailProperty);
    NSArray *email = [(NSArray *)ABMultiValueCopyArrayOfAllValues(emailMultiValue) autorelease];
    CFRelease(emailMultiValue);
   [self dismissModalViewControllerAnimated:YES];}
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{
    return NO;
} 
```

# c++ - 函数重载，无法推导出模板参数

> ID：12668766
> 
> 赞同：1
> 
> 时间：2012-10-01T06:59:05.443
> 
> 标签：c++, templates, stl, iterator, overloading

我正在尝试重载 Sum 函数，该函数接受 [list or vector] 开始和结束迭代器作为参数。这个编译器错误真的让我很困惑。相关代码如下：

```
template <typename T1, typename T2>
const double Sum(const typename T1::const_iterator& start_iter, const typename T2::const_iterator& end_iter)
{// overloaded function that calculates sum between two iterators
    typename T1::const_iterator iterator_begin = start_iter;
    typename T2::const_iterator iterator_end = end_iter;

    double my_sum = 0;

    for (iterator_begin; iterator_begin != iterator_end; iterator_begin++)
        my_sum += *iterator_begin;

    return my_sum;      
}

int main()
{

list<double> test_list(10,5.1);
cout << Sum(test_list.begin(), test_list.end()); // compiler errors here

} 
```

我收到以下编译器错误：

> iterators.cpp(72): 错误 C2783: 'const double Sum(const T1::const_iterator &,const T2::const_iterator &)' : 无法推导出 'T1' 的模板参数
> 
> iterators.cpp(72): error C2783: 'const double Sum(const T1::const_iterator &,const T2::const_iterator &)' : 无法推断出'T2'的模板参数
> 
> iterators.cpp(72): 错误 C2780: 'const double Sum(const std::map &)' : 需要 1 个参数 - 提供 2 个
> 
> iterators.cpp(72): error C2780: 'const double Sum(const T &)' : 需要 1 个参数 - 提供 2 个

编译器如何无法识别我正在尝试使用两个输入调用 Sum 函数？我错误地调用了该函数？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T07:12:33.253

您不需要告诉它迭代器必须是某些类型的成员`T1`，`T2`只需在迭代器类型本身上对其进行模板化：

```
template <typename Iter>
const double Sum(Iter iterator_begin, Iter iterator_end)
{
    double my_sum = 0;
    for (; iterator_begin != iterator_end; ++iterator_end)
        my_sum += *iterator_begin;
    return my_sum;      
}

int main()
{
    std::list<double> test_list;
    std::cout << Sum(test_list.begin(), test_list.end());
    return 0;
} 
```

还有一个标准的[std::accumulate](http://en.cppreference.com/w/cpp/algorithm/accumulate)可以做到这一点：

```
int main()
{
    std::list<double> test_list;
    std::cout << std::accumulate(test_list.begin(), test_list.end(), 0.0);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T07:38:14.893

首先，我认为你不想这样做。并非所有序列都有底层容器。（例如，想想`istream_iterator`s。）更重要的是，您明​​显允许（甚至鼓励）来自不同容器的开始和结束迭代器；没有*任何*情况下您可以合法地使用此功能`T1`并`T2`具有不同的类型。模板应该有一个参数，应该是一个迭代器；按照惯例，对迭代器的约束应该用参数的名称来表示，例如 `InputIterator`（这里的情况）`ForwardIterator`，等等。

至于为什么您的代码无法编译：

> 在大多数情况下，用于构成 P 的类型、模板和非类型值参与模板参数推导。也就是说，它们可用于确定模板参数的值，并且如此确定的值必须与其他地方确定的值一致。然而，在某些情况下，该值不参与类型推导，而是使用在其他地方推导或明确指定的模板参数的值。如果模板参数仅在非推导上下文中使用且未明确指定，则模板参数推导失败。
> 
> 未推断的上下文是：
> 
> — 使用限定 ID 指定的类型的嵌套名称说明符。
> 
> [...]

（来自§14.8.2.5/4,5。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T07:06:13.947

像这样的调用方法..

```
Sum<list<double>,list<double> >(test_list.begin(), test_list.begin()); 
```

# azure - 使用 Windows 天蓝色连接

> ID：12668768
> 
> 赞同：0
> 
> 时间：2012-10-01T06:59:18.253
> 
> 标签：azure, asp.net-mvc-4, azure-connect

部署在 azure 上的 asp.net mvc web api 是否可以使用 Windows 身份验证连接到本地数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:28:12.723

为了实现你想要的，你必须：

1.  [域加入您的 WebRole](http://blogs.msdn.com/b/windows_azure_connect_team_blog/archive/2010/12/10/domain-joining-windows-azure-roles.aspx)
2.  [以编程方式将 AppPool 凭据设置为有权访问本地 DB 的用户](http://blogs.msdn.com/b/windows_azure_connect_team_blog/archive/2011/03/16/windows-azure-connect-use-case-enable-windows-authentication-to-sql-server-using-application-pool-credentials.aspx)。

# jquery - 克隆元素后 Jquery UI Datepicker 不起作用

> ID：12668769
> 
> 赞同：0
> 
> 时间：2012-10-01T06:59:33.800
> 
> 标签：jquery, user-interface, datepicker, clone

我在克隆元素时遇到问题，jQuery UI DatePicker 在克隆元素后不起作用。示例链接：http: [//jsfiddle.net/V25qA/1/](http://jsfiddle.net/V25qA/1/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:24:44.597

你不能（安全地）克隆 jQuery 小部件——它们的状态可能不会被复制。

您应该`.datepicker('destroy')`在克隆它之前调用旧元素，然后`.datepicker()`再次调用克隆的输入元素以重新初始化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:20:32.307

更改以下行

```
$('.dpicker').eq(0).clone().prependTo('#new'); 
```

至

```
$('.dpicker').eq(0).clone().removeClass("hasDatepicker").prependTo('#new'); 
```

然后它将起作用。

当该元素通过 启用日期选择器时，Datepicker 将“hasdatepicker”类分配给该元素`.datepicker();`。如果你克隆这个元素，你也克隆了它的属性。这就是为什么 datepicker 插件在调用`.datepicker();`. 如果您删除此类 datepicker 将在新元素上按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T07:17:12.110

在歌剧中对我来说似乎也很好。

在这种情况下，如果您希望此单击事件适用于新创建的元素，请尝试委托该事件。

```
$('form').live('click', '.dpicker', function(){
     alert('clicked')
     $(this).datepicker().focus();  
}); 
```

另外我建议您使用**.on()**而不是 .live() 因为 .live 从 jquery 1.7 版开始已被弃用

[演示](http://jsfiddle.net/sushanth009/V25qA/3/)

# php - 如何在 Modex CMS 开发中使用基本 url？

> ID：12668772
> 
> 赞同：0
> 
> 时间：2012-10-01T07:00:04.243
> 
> 标签：php, modx

我一直在开发我的第一个 Modex 项目，现在我已经将下载的模板复制到“assets/templates/site”并修复了所有链接 + 将 base_url 添加到标题中，结果代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="EN" lang="EN" dir="ltr">
<head profile="http://gmpg.org/xfn/11">
<base href="[(site_url)]" /> 
<title>PlusBusiness</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta http-equiv="imagetoolbar" content="no" />
<link rel="stylesheet" href="/assets/templates/site/styles/layout.css" type="text/css" />
<script type="text/javascript" src="/assets/templates/site/scripts/jquery-1.4.1.min.js"></script>
<script type="text/javascript" src="/assets/templates/site/scripts/jquery.jcarousel.pack.js"></script>
<script type="text/javascript" src="/assets/templates/site/scripts/jquery.jcarousel.setup.js"></script>
</head>
<body id="top">
<!-- ####################################################################################################### -->
<div class="wrapper col1">
  <div id="header">
    <div id="logo">
      <h1><a href="#">+Business</a></h1>
      <p>Free Open Source CSS Website Template</p>
    </div>
    <div id="topnav">
      <ul>
        <li class="active"><a href="index.html">Home</a></li>
        <li><a href="style-demo.html">Style Demo</a></li>
        <li><a href="full-width.html">Full Width</a></li>
        <li><a href="#">DropDown</a>
          <ul>
            <li><a href="#">Link 1</a></li>
            <li><a href="#">Link 2</a></li>
            <li><a href="#">Link 3</a></li>
          </ul>
        </li>
        <li class="last"><a href="#">A Long Link Text</a></li>
      </ul>
    </div>
    <br class="clear" />
  </div>
</div>
<!-- ####################################################################################################### -->
<div class="wrapper col2">
  <div id="featured_slide">
    <div id="featured_content">
      <ul>
        <li><img src="/assets/templates/site/images/demo/1.gif" alt="" />
          <div class="floater">
            <h2>About This Template !</h2>
            <p>This is a W3C standards compliant Open Source free CSS template from <a href="http://www.os-templates.com/" title="Open Source Templates">OS Templates</a>. This template is distributed under a <a target="_blank" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0 Unported License</a>, which allows you to use and modify the template for both personal and commercial use when you keep the provided credit links in the footer. For more free css templates visit <a href="http://www.os-templates.com/">Open Source Templates</a>.</p>
            <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
          </div>
        </li>
        <li><img src="/assets/templates/site/images/demo/2.gif" alt="" />
          <div class="floater">
            <h2>Cursus penati saccum ut curabitur nulla.</h2>
            <p>Temperinte interdum sempus odio urna eget curabitur semper convallis nunc laoreet. Nullain convallis ris elis vest liberos nis diculis feugiat in rutrum. Suspendreristibulumfaucibulum lobortor quis tortortor ris sapien sce enim et volutpat sus. Urnaretiumorci orci fauctor leo justo nulla cras ridiculum&hellip;</p>
            <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
          </div>
        </li>
        <li><img src="/assets/templates/site/images/demo/3.gif" alt="" />
          <div class="floater">
            <h2>Cursus penati saccum ut curabitur nulla.</h2>
            <p>Temperinte interdum sempus odio urna eget curabitur semper convallis nunc laoreet. Nullain convallis ris elis vest liberos nis diculis feugiat in rutrum. Suspendreristibulumfaucibulum lobortor quis tortortor ris sapien sce enim et volutpat sus. Urnaretiumorci orci fauctor leo justo nulla cras ridiculum&hellip;</p>
            <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
          </div>
        </li>
      </ul>
    </div>
    <a href="javascript:void(0);" id="featured-item-prev"><img src="/assets/templates/site/images/prev.png" alt="" /></a> <a href="javascript:void(0);" id="featured-item-next"><img src="/assets/templates/site/images/next.png" alt="" /></a> </div>
</div>
<!-- ####################################################################################################### -->
<div class="wrapper col3">
  <div id="container">
    <div class="homepage">
      <ul>
        <li>
          <h2><img src="/assets/templates/site/images/demo/60x60.gif" alt="" />Nullamlacus dui ipsum conseque loborttis</h2>
          <p>Nullamlacus dui ipsum conseque loborttis non euisque morbi penas dapibulum orna. Urnaultrices quis curabitur phasellentesque congue magnis vestibulum quismodo nulla et feugiat. Adipisciniapellentum leo ut consequam ris felit elit id nibh sociis malesuada.</p>
          <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
        </li>
        <li>
          <h2><img src="/assets/templates/site/images/demo/60x60.gif" alt="" />Nullamlacus dui ipsum conseque loborttis</h2>
          <p>Nullamlacus dui ipsum conseque loborttis non euisque morbi penas dapibulum orna. Urnaultrices quis curabitur phasellentesque congue magnis vestibulum quismodo nulla et feugiat. Adipisciniapellentum leo ut consequam ris felit elit id nibh sociis malesuada.</p>
          <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
        </li>
        <li class="last">
          <h2><img src="/assets/templates/site/images/demo/60x60.gif" alt="" />Nullamlacus dui ipsum conseque loborttis</h2>
          <p>Nullamlacus dui ipsum conseque loborttis non euisque morbi penas dapibulum orna. Urnaultrices quis curabitur phasellentesque congue magnis vestibulum quismodo nulla et feugiat. Adipisciniapellentum leo ut consequam ris felit elit id nibh sociis malesuada.</p>
          <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
        </li>
      </ul>
      <br class="clear" />
    </div>
  </div>
</div>
<!-- ####################################################################################################### -->
<div class="wrapper col4">
  <div id="footer">
    <div class="box1">
      <h2>A Little Company Information !</h2>
      <img class="imgl" src="/assets/templates/site/images/demo/imgl.gif" alt="" />
      <p>Morbitincidunt maurisque eros molest nunc anteget sed vel lacus mus semper. Anterdumnullam interdum eros dui urna consequam ac nisl nullam ligula vestassa. Condimentumfelis et amet tellent quisquet a leo lacus nec augue</p>
      <p>Portortornec condimenterdum eget consectetuer condis.</p>
    </div>
    <div class="box contactdetails">
      <h2>Our Contact Details !</h2>
      <ul>
        <li>Company Name</li>
        <li>Street Name &amp; Number</li>
        <li>Town</li>
        <li>Postcode/Zip</li>
        <li>Tel: xxxxx xxxxxxxxxx</li>
        <li>Fax: xxxxx xxxxxxxxxx</li>
        <li>Email: info@domain.com</li>
        <li class="last">LinkedIn: <a href="#">Company Profile</a></li>
      </ul>
    </div>
    <div class="box flickrbox">
      <h2>Latest Flickr Images !</h2>
      <div class="wrap">
        <div class="fix"></div>
        <div class="flickr_badge_image" id="flickr_badge_image1"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image2"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image3"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image4"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image5"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image6"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="fix"></div>
      </div>
    </div>
    <br class="clear" />
  </div>
</div>
<!-- ####################################################################################################### -->
<div class="wrapper col5">
  <div id="copyright">
    <p class="fl_left">Copyright &copy; 2010 - All Rights Reserved - <a href="#">Domain Name</a></p>
    <p class="fl_right">Template by <a href="http://www.os-templates.com/" title="Open Source Templates">OS Templates</a></p>
    <br class="clear" />
  </div>
</div>
</body>
</html>

As you can see all links are correct. But when I execute it I will see the page without images and other elements, and the code of page:

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="EN" lang="EN" dir="ltr">
<head profile="http://gmpg.org/xfn/11">
<base href="http://localhost/ModexProject/" /> 
<title>PlusBusiness</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta http-equiv="imagetoolbar" content="no" />
<link rel="stylesheet" href="/assets/templates/site/styles/layout.css" type="text/css" />
<script type="text/javascript" src="/assets/templates/site/scripts/jquery-1.4.1.min.js"></script>
<script type="text/javascript" src="/assets/templates/site/scripts/jquery.jcarousel.pack.js"></script>
<script type="text/javascript" src="/assets/templates/site/scripts/jquery.jcarousel.setup.js"></script>
<script src="http://localhost/ModexProject/assets/js/jquery-1.4.4.min.js" type="text/javascript"></script>
                            <link type="text/css" media="screen" rel="stylesheet" href="http://localhost/ModexProject/assets/plugins/qm/css/colorbox.css" />

                            <style type="text/css">
                            .cboxIE #cboxTopLeft{background:transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://localhost/ModexProject/assets/plugins/qm/css/images/internet_explorer/borderTopLeft.png, sizingMethod='scale');}
                            .cboxIE #cboxTopCenter{background:transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://localhost/ModexProject/assets/plugins/qm/css/images/internet_explorer/borderTopCenter.png, sizingMethod='scale');}
                            .cboxIE #cboxTopRight{background:transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://localhost/ModexProject/assets/plugins/qm/css/images/internet_explorer/borderTopRight.png, sizingMethod='scale');}
                            .cboxIE #cboxBottomLeft{background:transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://localhost/ModexProject/assets/plugins/qm/css/images/internet_explorer/borderBottomLeft.png, sizingMethod='scale');}
                            .cboxIE #cboxBottomCenter{background:transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://localhost/ModexProject/assets/plugins/qm/css/images/internet_explorer/borderBottomCenter.png, sizingMethod='scale');}
                            .cboxIE #cboxBottomRight{background:transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://localhost/ModexProject/assets/plugins/qm/css/images/internet_explorer/borderBottomRight.png, sizingMethod='scale');}
                            .cboxIE #cboxMiddleLeft{background:transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://localhost/ModexProject/assets/plugins/qm/css/images/internet_explorer/borderMiddleLeft.png, sizingMethod='scale');}
                            .cboxIE #cboxMiddleRight{background:transparent; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=http://localhost/ModexProject/assets/plugins/qm/css/images/internet_explorer/borderMiddleRight.png, sizingMethod='scale');}
                            </style>

                            <script type="text/javascript" src="http://localhost/ModexProject/assets/plugins/qm/js/jquery.colorbox-min.js"></script>

                        <script type="text/javascript">

                            var $j = jQuery.noConflict();
                            $j(document).ready(function($)

                            {                      
                                $j("a.colorbox").colorbox({width:"80%", height:"90%", iframe:true, overlayClose:false, opacity:0.5, transition:"fade", speed:150});

                                // Bindings
                                $j(document).bind("cbox_open", function(){
                                    $j("body").css({"overflow":"hidden"});
                                    $j("html").css({"overflow":"hidden"});
                                    $j("#qmEditor").css({"display":"none"});
                                });  

                                $j(document).bind("cbox_closed", function(){      
                                    $j("body").css({"overflow":"auto"});
                                    $j("html").css({"overflow":"auto"});
                                    $j("#qmEditor").css({"display":"block"});
                                    // Remove manager lock by going to home page
                                    $j.ajax({ type: "GET", url: "http://localhost/ModexProject/manager/index.php?a=2" });
                                });                  

                                // Hide QM+ if cookie found
                                if (getCookie("hideQM") == 1)
                                {
                                    $j("#qmEditor").css({"display":"none"});
                                    $j("#qmEditorClosed").css({"display":"block"});    
                                }

                                // Hide QM+
                                $j(".qmClose").click(function () {
                                    $j("#qmEditor").hide("normal");
                                    $j("#qmEditorClosed").show("normal");
                                    document.cookie = "hideQM=1; path=/;";
                                });

                                // Show QM+
                                $j("#qmEditorClosed").click(function () {
                                    {
                                        $j("#qmEditorClosed").hide("normal");
                                        $j("#qmEditor").show("normal");
                                        document.cookie = "hideQM=0; path=/;";
                                    }
                                });

                            });

                            function getCookie(cookieName)
                            {
                                var results = document.cookie.match ( "(^|;) ?" + cookieName + "=([^;]*)(;|$)" );

                                if (results) return (unescape(results[2]));
                                else return null;
                            }

                        </script>

                        <link rel="stylesheet" type="text/css" href="http://localhost/ModexProject/assets/plugins/qm/css/style.css" />
                        <!--[if IE]><link rel="stylesheet" type="text/css" href="http://localhost/ModexProject/assets/plugins/qm/css/ie.css" /><![endif]-->
                        <!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="http://localhost/ModexProject/assets/plugins/qm/css/ie7.css" /><![endif]-->
                        </head>
<body id="top">
                        <div id="qmEditorClosed"></div>

                        <div id="qmEditor">

                        <ul>
                        <li id="qmClose"><a class="qmButton qmClose" href="#" onclick="javascript: return false;">X</a></li>
                        <li><a id="qmLogoClose" class="qmClose" href="#" onclick="javascript: return false;"></a></li>

                        <li class="qmEdit">
                        <a class="qmButton qmEdit colorbox" href="http://localhost/ModexProject/manager/index.php?a=27&amp;id=1&amp;quickmanager=1"><span> �������������&lt;/span></a>
                        </li>

                            <li class="qmAdd">
                            <a class="qmButton qmAdd colorbox" href="http://localhost/ModexProject/manager/index.php?a=4&amp;pid=1&amp;quickmanager=1"><span>�������� ������</span></a>
                            </li>

                            <li class="qmManager">
                            <a class="qmButton qmManager" title="��������" href="http://localhost/ModexProject/manager/" ><span>��������</span></a>
                            </li>

                        <li class="qmLogout">
                        <a id="qmLogout" class="qmButton qmLogout" title="�����" href="http://localhost/ModexProject/manager/index.php?a=8&amp;quickmanager=logout&amp;logoutid=1" ><span>�����&lt;/span></a>
                        </li>

                        </ul>
                        </div>
<!-- ####################################################################################################### -->
<div class="wrapper col1">
  <div id="header">
    <div id="logo">
      <h1><a href="#">+Business</a></h1>
      <p>Free Open Source CSS Website Template</p>
    </div>
    <div id="topnav">
      <ul>
        <li class="active"><a href="index.html">Home</a></li>
        <li><a href="style-demo.html">Style Demo</a></li>
        <li><a href="full-width.html">Full Width</a></li>
        <li><a href="#">DropDown</a>
          <ul>
            <li><a href="#">Link 1</a></li>
            <li><a href="#">Link 2</a></li>
            <li><a href="#">Link 3</a></li>
          </ul>
        </li>
        <li class="last"><a href="#">A Long Link Text</a></li>
      </ul>
    </div>
    <br class="clear" />
  </div>
</div>
<!-- ####################################################################################################### -->
<div class="wrapper col2">
  <div id="featured_slide">
    <div id="featured_content">
      <ul>
        <li><img src="/assets/templates/site/images/demo/1.gif" alt="" />
          <div class="floater">
            <h2>About This Template !</h2>
            <p>This is a W3C standards compliant Open Source free CSS template from <a href="http://www.os-templates.com/" title="Open Source Templates">OS Templates</a>. This template is distributed under a <a target="_blank" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0 Unported License</a>, which allows you to use and modify the template for both personal and commercial use when you keep the provided credit links in the footer. For more free css templates visit <a href="http://www.os-templates.com/">Open Source Templates</a>.</p>
            <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
          </div>
        </li>
        <li><img src="/assets/templates/site/images/demo/2.gif" alt="" />
          <div class="floater">
            <h2>Cursus penati saccum ut curabitur nulla.</h2>
            <p>Temperinte interdum sempus odio urna eget curabitur semper convallis nunc laoreet. Nullain convallis ris elis vest liberos nis diculis feugiat in rutrum. Suspendreristibulumfaucibulum lobortor quis tortortor ris sapien sce enim et volutpat sus. Urnaretiumorci orci fauctor leo justo nulla cras ridiculum&hellip;</p>
            <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
          </div>
        </li>
        <li><img src="/assets/templates/site/images/demo/3.gif" alt="" />
          <div class="floater">
            <h2>Cursus penati saccum ut curabitur nulla.</h2>
            <p>Temperinte interdum sempus odio urna eget curabitur semper convallis nunc laoreet. Nullain convallis ris elis vest liberos nis diculis feugiat in rutrum. Suspendreristibulumfaucibulum lobortor quis tortortor ris sapien sce enim et volutpat sus. Urnaretiumorci orci fauctor leo justo nulla cras ridiculum&hellip;</p>
            <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
          </div>
        </li>
      </ul>
    </div>
    <a href="javascript:void(0);" id="featured-item-prev"><img src="/assets/templates/site/images/prev.png" alt="" /></a> <a href="javascript:void(0);" id="featured-item-next"><img src="/assets/templates/site/images/next.png" alt="" /></a> </div>
</div>
<!-- ####################################################################################################### -->
<div class="wrapper col3">
  <div id="container">
    <div class="homepage">
      <ul>
        <li>
          <h2><img src="/assets/templates/site/images/demo/60x60.gif" alt="" />Nullamlacus dui ipsum conseque loborttis</h2>
          <p>Nullamlacus dui ipsum conseque loborttis non euisque morbi penas dapibulum orna. Urnaultrices quis curabitur phasellentesque congue magnis vestibulum quismodo nulla et feugiat. Adipisciniapellentum leo ut consequam ris felit elit id nibh sociis malesuada.</p>
          <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
        </li>
        <li>
          <h2><img src="/assets/templates/site/images/demo/60x60.gif" alt="" />Nullamlacus dui ipsum conseque loborttis</h2>
          <p>Nullamlacus dui ipsum conseque loborttis non euisque morbi penas dapibulum orna. Urnaultrices quis curabitur phasellentesque congue magnis vestibulum quismodo nulla et feugiat. Adipisciniapellentum leo ut consequam ris felit elit id nibh sociis malesuada.</p>
          <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
        </li>
        <li class="last">
          <h2><img src="/assets/templates/site/images/demo/60x60.gif" alt="" />Nullamlacus dui ipsum conseque loborttis</h2>
          <p>Nullamlacus dui ipsum conseque loborttis non euisque morbi penas dapibulum orna. Urnaultrices quis curabitur phasellentesque congue magnis vestibulum quismodo nulla et feugiat. Adipisciniapellentum leo ut consequam ris felit elit id nibh sociis malesuada.</p>
          <p class="readmore"><a href="#">Continue Reading &raquo;</a></p>
        </li>
      </ul>
      <br class="clear" />
    </div>
  </div>
</div>
<!-- ####################################################################################################### -->
<div class="wrapper col4">
  <div id="footer">
    <div class="box1">
      <h2>A Little Company Information !</h2>
      <img class="imgl" src="/assets/templates/site/images/demo/imgl.gif" alt="" />
      <p>Morbitincidunt maurisque eros molest nunc anteget sed vel lacus mus semper. Anterdumnullam interdum eros dui urna consequam ac nisl nullam ligula vestassa. Condimentumfelis et amet tellent quisquet a leo lacus nec augue</p>
      <p>Portortornec condimenterdum eget consectetuer condis.</p>
    </div>
    <div class="box contactdetails">
      <h2>Our Contact Details !</h2>
      <ul>
        <li>Company Name</li>
        <li>Street Name &amp; Number</li>
        <li>Town</li>
        <li>Postcode/Zip</li>
        <li>Tel: xxxxx xxxxxxxxxx</li>
        <li>Fax: xxxxx xxxxxxxxxx</li>
        <li>Email: info@domain.com</li>
        <li class="last">LinkedIn: <a href="#">Company Profile</a></li>
      </ul>
    </div>
    <div class="box flickrbox">
      <h2>Latest Flickr Images !</h2>
      <div class="wrap">
        <div class="fix"></div>
        <div class="flickr_badge_image" id="flickr_badge_image1"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image2"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image3"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image4"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image5"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="flickr_badge_image" id="flickr_badge_image6"><a href="#"><img src="/assets/templates/site/images/demo/80x80.gif" alt="" /></a></div>
        <div class="fix"></div>
      </div>
    </div>
    <br class="clear" />
  </div>
</div>
<!-- ####################################################################################################### -->
<div class="wrapper col5">
  <div id="copyright">
    <p class="fl_left">Copyright &copy; 2010 - All Rights Reserved - <a href="#">Domain Name</a></p>
    <p class="fl_right">Template by <a href="http://www.os-templates.com/" title="Open Source Templates">OS Templates</a></p>
    <br class="clear" />
  </div>
</div>
</body>
</html> 
```

我看到并非所有链接都是正确的；有正确的链接，也有不使用基本 url 的链接。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:56:47.410

不要硬编码基本网址，如果您移动网站，它会导致问题。基本 url 变量取自系统站点 url 设置。你可以在那里控制所有的 url 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:54:26.837

我将从硬编码您的基本 url 而不是使用站点 url 模板变量开始。这样您就可以控制格式和斜杠；因此，如果您在基本 url 中包含尾部正斜杠，请确保在链接中排除它。

因此，如果您的基本网址是`<base href="http://www.yoursite.com/" />`您的所有链接，则应该是`src="images/example.jpg`

此时 modx 应该为所有 url 使用该基本路径，除非您在其前面加上 HTTP 之类的协议。这就是它的全部。还要确保经常清除缓存以获得准确的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:00:34.680

```
<base href="[(site_url)]" /> 
```

应该：

```
<base href="[[++site_url]]" /> 
```

由于它是占位符，因此您需要使用占位符标签。此外， ( ) 不是 MODX 的有效标记语法。对于 MODx Evoloution，使用单括号，即 [$chunk]。MODX Revolution 使用两个括号，即[[$chunk]]。

如果您愿意，您也可以调用未缓存的站点 url，如文档中所示，只需添加一个感叹号，即 [[!++site_url]]。

# sql - 当前行的累计值 + 前行的总和

> ID：12668785
> 
> 赞同：26
> 
> 时间：2012-10-01T07:01:02.897
> 
> 标签：sql, sql-server, sql-server-2008, cumulative-sum

你将如何从这个转换表中的列：

```
ColumnA   ColumnB
2           a
3           b
4           c
5           d
1           a 
```

对此：

```
ColumnA          ColumnB
3                 a
6(=3+3)           b   
10(=4+3+3)        c   
15(=5+4+3+3)      d 
```

我有兴趣看 esp。你会选择什么方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-01T07:10:03.430

像这样：

```
;WITH cte
AS
(
   SELECT ColumnB, SUM(ColumnA) asum 
   FROM @t 
   gROUP BY ColumnB

), cteRanked AS
(
   SELECT asum, ColumnB, ROW_NUMBER() OVER(ORDER BY ColumnB) rownum
   FROM cte
) 
SELECT (SELECT SUM(asum) FROM cteRanked c2 WHERE c2.rownum <= c1.rownum),
  ColumnB
FROM cteRanked c1; 
```

这应该给你：

```
ColumnA    ColumnB
3             a
6             b
10            c
15            d 
```

* * *

## 这是[一个现场演示](https://data.stackexchange.com/stackoverflow/query/81416/cumulative-sum-with-group-by)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-01T07:12:20.517

我通常会避免尝试这样做，但以下内容符合您的要求：

```
declare @T table (ColumnA int,ColumnB char(1))
insert into @T(ColumnA,ColumnB) values
(2    ,       'a'),
(3   ,        'b'),
(4  ,         'c'),
(5 ,          'd'),
(1,           'a')

;With Bs as (
    select distinct ColumnB from @T
)
select
    SUM(t.ColumnA),b.ColumnB
from
    Bs b
        inner join
    @T t
        on
            b.ColumnB >= t.ColumnB
group by
    b.ColumnB 
```

结果：

```
 ColumnB
----------- -------
3           a
6           b
10          c
15          d 
```

对于小型数据集，这会很好。但对于较大的数据集，请注意表格的最后一行依赖于获取`SUM`原始表格的全部内容。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-01T07:11:05.853

不确定这是否是最佳的，但是（[SQL Fiddle](http://sqlfiddle.com/#!3/07c35/2)）怎么样：

```
SELECT x.A + COALESCE(SUM(y.A),0) ColumnA, x.ColumnB
FROM
(
    SELECT SUM(ColumnA) A, ColumnB
    FROM myTable
    GROUP BY ColumnB
) x
LEFT OUTER JOIN
(
    SELECT SUM(ColumnA) A, ColumnB
    FROM myTable
    GROUP BY ColumnB
) y ON y.ColumnB < x.ColumnB
GROUP BY x.ColumnB, x.A 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-12T06:23:16.073

试试下面的脚本，

```
DECLARE @T TABLE(ColumnA INT, ColumnB VARCHAR(50));

INSERT INTO @T VALUES
    (2, 'a'),
    (3, 'b'),
    (4, 'c'),
    (5, 'd'),
    (1, 'a');

SELECT  SUM(ColumnA) OVER(ORDER BY ColumnB) AS ColumnA,ColumnB
FROM    (   SELECT  SUM(ColumnA) AS ColumnA,ColumnB
            FROM    @T  GROUP BY ColumnB )T 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-01T07:17:43.127

```
create table #T
(
  ID int primary key,
  ColumnA int,
  ColumnB char(1)
);

insert into #T
select row_number() over(order by ColumnB),
       sum(ColumnA) as ColumnA,
       ColumnB
from YourTable
group by ColumnB;

with C as
(
  select ID,
         ColumnA,
         ColumnB
  from #T
  where ID = 1
  union all
  select T.ID,
         T.ColumnA + C.ColumnA,
         T.ColumnB
  from #T as T
    inner join C
      on T.ID = C.ID + 1
)
select ColumnA,
       ColumnB 
from C
option (maxrecursion 0);

drop table #T; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-21T08:07:26.343

使用 SQL 服务器？所以

假设您有一个包含 3 列 C_1、C_2、C_3 并按 C_1 排序的表。只需使用 [Over (Order By C_1)] 为 C_3 的总和添加一列：

选择 C_1, C_2, C_3, Sum(C_3) **Over (Order By C_1)**

如果您也想要行号，请以相同的方式进行：

Select **Row_Number() Over (Order By C_1),** C_1, C_2, C_3, Sum(C_3) Over (Order By C_1)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-15T11:56:13.913

如果您使用的是 SQL Server 2012 或更高版本，那么这将产生所需的结果。

```
DECLARE @t TABLE(
    ColumnA int, 
    ColumnB varchar(50)
);

INSERT INTO @t VALUES
(2,'a'),
(3,'b'),
(4,'c'),
(5,'d'),
(1,'a');

SELECT 
    SUM(ColumnA) OVER (ORDER BY ColumnB ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS ColumnA,
    ColumnB
FROM (
    SELECT
        ColumnB,
        SUM(ColumnA) AS ColumnA
    FROM @t
    GROUP BY ColumnB
) DVTBL
ORDER BY ColumnB 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-12T06:12:56.387

```
DECLARE @t TABLE(ColumnA INT, ColumnB VARCHAR(50));

    INSERT INTO @t VALUES
    (2,           'a'),
    (3  ,         'b'),
    (4   ,        'c'),
    (5    ,       'd'),
    (1     ,      'a');

    ;WITH cte
    AS
    (
        SELECT  ColumnB, sum(ColumnA) value,ROW_NUMBER() OVER(ORDER BY ColumnB) sr_no FROM @t group by ColumnB    
    )

    SELECT ColumnB
    ,SUM(value) OVER (   ORDER BY  ColumnB  ROWS BETWEEN UNBOUNDED PRECEDING  AND  0  PRECEDING) 
    FROM cte c1; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-18T11:10:14.717

最好的解决方案（最简单和最快的）是使用`OVER(ORDER BY)`子句。

我将给出并解释我的问题和找到的解决方案。

我有一个包含一些年度交易的表格，其中包含以下列

```
Yearx    INT
NoSeq    INT
Amount   DECIMAL(10,2)
Balance  DECIMAL(10,2) 
```

前三列有值；`balance`列是空的。

* * *

问题

`Balance`考虑到 1 月 1 日的第一个值是 5000 欧元，如何填写值？

* * *

例子

```
NoSeq    Amount    Balance
-----  --------  ---------
1       120.00+   5120.00+   <= 5000 + 120     
2        16.00-   5104.00+   <= 5000 + 120 - 16
3      3000.00-   2104.00+   <= 5000 + 120 - 16 + 3000   
4       640.00+   2740.00+   <= 5000 + 120 - 16 + 3000 + 640 
```

* * *

解决方案（基于 Abdul Rasheed 的回答）

```
WITH 
t AS
(
SELECT NoSeq
      ,Amount 
  FROM payements
  WHERE Yearx = 2021
)   
SELECT NoSeq
      ,Amount
      ,1179.18 + SUM(Amount) OVER(ORDER BY NoSeq 
                                  ROWS BETWEEN UNBOUNDED PRECEDING 
                                  AND CURRENT ROW
                                 ) AS Balance
  FROM t 
```

考虑到在 PostGreSql 上`ROW BETWEEN`使用 before 是默认的，previous`SELECT`可以简化为

```
WITH 
t AS
(
SELECT NoSeq
      ,Amount 
  FROM payements 
  WHERE Yearx = 2021
)   
SELECT NoSeq
      ,Amount
      ,1179.18 + SUM(Amount) OVER(ORDER BY NoSeq) as balance                              
  FROM t 
```

第一部分（WITH 子句）用于定义`OVER(ORDER BY)`在最终 SELECT 中应用的表。

第二部分使用临时`T`表计算运行总和。

在我的情况下，`WITH`子句不是必需的，`SELECT`命令可以最终简化为以下 SQL 命令

```
SELECT NoSeq
      ,Amount
      ,1179.18 + SUM(Amount) OVER(ORDER BY NoSeq) as balance                              
  FROM payements
  WHERE Yearx = 2021 
```

我在我的-应用程序中使用了最后一个`SQL`命令。`VB.Net``Postgresql`

为了在 2010 年 1 月 1 日计算超过一年的已知`Balance`价值，我使用以下 SQL 命令

```
SELECT Yearx
      ,NoSeq
      ,Amount
      ,-279.34 + SUM(Amount) OVER(ORDER BY Yearx,NoSeq) as balance                              
  FROM payements
  WHERE Yearx BETWEEN 2010 AND 2021 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-21T22:54:49.367

你也可以这样做：

```
WITH grpAllData
AS
(
   SELECT ColumnB, SUM(ColumnA) grpValue
   FROM table_Name 
   gROUP BY ColumnB

)
SELECT g.ColumnB, sum(grpValue) OVER(ORDER BY ColumnB) desireValue
  FROM grpAllData g
 order by ColumnB 
```

在上面的查询中，我们首先聚合了同一组中的所有值，然后在最后的选择中只是对先前的结果应用了一个窗口函数。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-02-11T15:20:57.513

这将基于对列的列累积总和进行分组。

请参阅下面的 SQL

```
SELECT     product, 
           product_group, 
           fiscal_year, 
           Sum(quantity) OVER ( partition BY fiscal_year,a.product_group ORDER BY a.posting_date, a.product_group rows 100000000 PRECEDING) AS quantity
FROM       report 
WHERE 
order by   b.fiscal_year DESC 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-11-20T11:29:46.140

您可以使用以下简单的选择语句

```
SELECT COLUMN_A, COLUMN_B, 
(SELECT SUM(COLUMN_B) FROM #TBL T2 WHERE T2.ID  <= T1.ID) as SumofPreviousRow FROM #TBL T1; 
```

# qt - Qt：使用拖放重新排序 ListView 项目

> ID：12668797
> 
> 赞同：2
> 
> 时间：2012-10-01T07:02:03.537
> 
> 标签：qt, drag-and-drop, qlistview

我已经实现了以下拖放方法

```
void mousePressEvent(QMouseEvent *event);
void dragEnterEvent(QDragEnterEvent *event);
void dragMoveEvent(QDragMoveEvent *event);
void dropEvent(QDropEvent *event);
void startDrag(Qt::DropActions supportedActions); 
```

我有一个 QListView 并使用 setIndexWidget() 在每个模型索引处显示一个自定义小部件。我正在尝试使用拖放来排列列表视图中的项目，但是列表视图中的项目排列不正确，我编写了以下代码：-

```
MyListView::MyListView(QWidget *parent) :
    QListView(parent)
{
    setSelectionMode(QAbstractItemView::SingleSelection);
    setDragEnabled(true);
    setAcceptDrops(true);
    setDragDropMode(QAbstractItemView::InternalMove);
    setDefaultDropAction(Qt::MoveAction);
    setDropIndicatorShown(true);
    setDragDropOverwriteMode(true);
    setMovement(QListView::Snap);
    setFlow(QListView::TopToBottom);
//    setStyleSheet("QListView::item {"
//                  "height: 50px;"
//                  "border: 1px solid black;}");
}

void MyListView::setModel(QAbstractItemModel *model)
{
    QListView::setModel(model);

    for (int i=0; i<model->rowCount(); i++)
    {
        QModelIndex index = model->index(i,0);
        ListWidgetItem *widget = new ListWidgetItem;
        widget->setIndex(i);;
        setIndexWidget(index,widget);
    }
}

void MyListView::mousePressEvent(QMouseEvent *event)
{
    QModelIndex i = indexAt(event->pos());
    if (event->button() ==  Qt::LeftButton)
    {
        ListWidgetItem *item = dynamic_cast<ListWidgetItem *>(childAt(event->pos()));

        if (!item)
            return;

        y = event->pos().y()-item->pos().y();

        QModelIndex indx = indexAt(event->pos());
        currentPixmap = QPixmap::grabWidget(item);
        dragPoint = event->pos();
        if (event->pos().x() < 25 && indx.row() >= 0)
            startDrag(Qt::MoveAction);
    }
}

void MyListView::dragEnterEvent(QDragEnterEvent *event)
{
   if (event->mimeData()->hasFormat("application/x-QListView-DragAndDrop"))
   {
       event->accept();
   }
    else
        event->ignore();
}

void MyListView::dragMoveEvent(QDragMoveEvent *event)
{
    ListWidgetItem *item = dynamic_cast<ListWidgetItem *>(childAt(event->pos()));
    if(!item)
        return;

    itemList.append(item);

    foreach (ListWidgetItem *widget,itemList)
    {
        if (widget == item)
            widget->setStyleSheet("#ListWidget { border-top: 2px solid red; }");
        else
            widget->setStyleSheet("#ListWidget { border-top: 0px solid black; }");
    }
    if (event->mimeData()->hasFormat("application/x-QListView-DragAndDrop"))
    {
        event->setDropAction(Qt::MoveAction);
        event->accept();
    } else
        event->ignore();
}

void MyListView::dropEvent(QDropEvent *event)
{
    if (event->mimeData()->hasFormat("application/x-QListView-DragAndDrop")) {
        QByteArray itemData = event->mimeData()->data("application/x-QListView-DragAndDrop");
        QDataStream dataStream(&itemData,QIODevice::ReadOnly);

        QPoint itemPoint;
        dataStream >> itemPoint;

        ListWidgetItem *item = dynamic_cast<ListWidgetItem *> (childAt(itemPoint));
        if(!item)
            return;

        QModelIndex index = indexAt(event->pos());
        int row = index.row();
        model()->insertRows(row,1);

        QModelIndex idx =model()->index(row,0);
        setIndexWidget(idx,item);

        if (event->source() == this) {
            event->setDropAction(Qt::MoveAction);
            foreach (ListWidgetItem *widget,itemList)
            {
                widget->setStyleSheet("#ListWidget { border-top: 0px solid black; }");
            }
            itemList.clear();
//            model()->removeRow(n+1);

            event->accept();
        }
    } else{
        event->ignore();
    }
}

void MyListView::startDrag(Qt::DropActions supportedActions)
{
    QByteArray itemData;
    QDataStream dataStream(&itemData, QIODevice::WriteOnly);

    ListWidgetItem *item = dynamic_cast<ListWidgetItem *>(childAt(dragPoint));

    dataStream << dragPoint;

    QMimeData *mimeData = new QMimeData;
    mimeData->setData("application/x-QListView-DragAndDrop", itemData);

    drag = new QDrag(this);
    drag->setMimeData(mimeData);
    drag->setHotSpot(mapToParent(QPoint(item->x(),y)));
    drag->setPixmap(currentPixmap);

    QModelIndex indx = indexAt(dragPoint);
    if (drag->exec(Qt::MoveAction | Qt::CopyAction) == Qt::MoveAction)
     {
        model()->removeRow(indx.row());
     }

} 
```

我已经搜索但没有得到任何适当的解决方案。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:59:49.137

你看过 QAbstractItemView 的 DragDropMode 吗？[http://qt-project.org/doc/qt-4.8/qabstractitemview.html#dragDropMode-prop](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#dragDropMode-prop)

听起来好像这就是你想要达到的目标。

# java - 事务日志库

> ID：12668798
> 
> 赞同：11
> 
> 时间：2012-10-01T07:02:04.367
> 
> 标签：java, transaction-log

我需要具有以下功能的事务日志库：

*   最大性能。不强制（刷新），让 O/S 自行决定写入缓冲区。文件大小以大块的形式增加，以最大限度地减少元数据修改。我不在乎是否丢失了一些最后的记录。

    *   以倒序读取记录（最近的在前）。

问题是，如何在读取日志文件时找到最后一条有效记录？可以使用哪些技术，或者是否有现成的开源库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T07:30:38.230

您是否检查[过 HOWL - 高速 ObjectWeb Logger](http://howl.ow2.org/)是否符合您的要求？它相当过时，似乎不允许随机访问或向后阅读。但是，它支持设置标记和从标记开始重播事件。因为它是开源的，所以它可能会适应您的需求。

[您也可以调查JBoss Transaction](http://www.jboss.org/jbosstm)的日志记录部分是否合适。

**请通过事务日志**指定“向后阅读”的含义。事务日志可能包含来自多个事务的日志，每个事务由一系列事件组成。

更多关于事务日志的信息可以在这里找到（当然也可以在网上找到）：

*   Java 事务处理：设计与实现 (ISBN 978-0130352903)
*   事务信息系统基础：理论、算法和并发控制和恢复的实践 (ISBN 978-1558605084)
*   交易处理原则 (ISBN 978-1558606234)
*   以及关于数据库系统概念的各种书籍

希望这有助于更接近您的目标

迈克尔

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-06-12T05:33:11.323

大多数著名的日志系统（如 log4j 和 apache）都支持不同类型的日志机制，您只需正确配置它们即可。但是，如果您想向后记录，它确实会消耗资源，因为流是连续的，您应该将新记录推送到所有其他记录的顶部。也可能您应该自己完成大部分日志记录代码。

# ios - AudioQueue 时间和 AudioQueue 设备时间的区别

> ID：12668803
> 
> 赞同：3
> 
> 时间：2012-10-01T07:02:39.703
> 
> 标签：ios, synchronization, real-time, core-audio

我正在尝试将从主机 iPhone 发送的音乐同步到客户端 iPhone .. 使用 AVAssetReader 读取音频并通过数据包发送到客户端，客户端依次将其馈送到环形缓冲区，该缓冲区反过来填充音频队列缓冲区和开始播放。

我正在查看 AudioQueue 文档，似乎有两个与 audioQueue 相关的时间戳的不同概念：[Audio Queue Time](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html#//apple_ref/c/func/AudioQueueGetCurrentTime)和[Audio Queue Device Time](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html#//apple_ref/c/func/AudioQueueDeviceGetCurrentTime)。我不确定这两者是如何相关的，以及何时应该使用一个而不是（或结合使用）另一个。

# java - 如何将数据从 C# ASP.NET 网页发送到 java webservices

> ID：12668805
> 
> 赞同：0
> 
> 时间：2012-10-01T07:02:56.687
> 
> 标签：java, asp.net

我创建了一个 C# ASP.NET 网页（前端）来从用户那里收集信息，我想知道如何将信息发送到 java Web 服务以处理来自网页的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:19:32.663

您的 Java Web 服务应该使用 SOAP/REST/Plain HTTP 等协议，并且您需要在提交表单后从 ASP.NET 页面适当地构造请求并将请求发送到 Java Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:21:53.667

启用 WEBSERVICE [System.Web.Script.Services.ScriptService] 您可以使用 JAVASCRIPT 从 WEBSERVICE 访问数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T07:39:21.937

这篇文章[如何使用 C# 在 ASP.net 中调用 Java Web 服务](http://www.codeproject.com/Articles/32313/How-to-invoke-Java-web-service-in-ASP-net-using-C)将为您提供一些指导。本质上，您需要：

1.  创建 Java Web 服务
    *   创建一个 Web 应用程序项目
    *   将 Web 服务添加到项目中
    *   向 Web 服务添加操作
    *   实现网络方法
    *   部署和测试 Web 服务
2.  使用 C# 创建 ASP.net 网站
    *   创建 ASP.net 网站
    *   添加网络参考
    *   编写代码以调用 Web 服务
    *   测试 Web 服务客户端应用程序

Bikash Shaw 的上述教程旨在使用 Java Web 服务开发简单的数学函数，如加法、减法等`JSimpCalcWebService`：

```
package calc.ws;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;
import calc.util.NumberFormater;

/**
* @author Bikash Shaw
*/
@WebService()
public class JSimpCalcWebService {

/**
  * Web service operation
  */
  @WebMethod(operationName = "addition")
  public String addition(@WebParam(name = "parameter1")
  double parameter1, @WebParam(name = "parameter2")
  double parameter2) {
 //TODO write your implementation code here:
      return NumberFormater.format((parameter1 + parameter2),0,6);
 } 
```

}

调用 Web 服务的示例 C# 代码：

```
using System;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using JSimpCalcWebServiceService;

public partial class _Default : System.Web.UI.Page 
{
    JSimpCalcWebServiceService.JSimpCalcWebServiceService proxy;

    protected void Page_Load(object sender, EventArgs e)
    {
        proxy = new JSimpCalcWebServiceService.JSimpCalcWebServiceService();
    }

   protected void btnAddition_Click(object sender, EventArgs e)
   {
       try
       {
           lblResultAddition.Text = "Result: " +    proxy.addition(double.Parse(txtbtnAdditionParameter1.Text), 
                                double.Parse(txtbtnAdditionParameter2.Text));
       }
       catch (FormatException)
       {
           lblResultAddition.Text = "Result: Invalide Input";
       }
       UpdatePanelAddition.Update();
   }
 // Add more methods here...
 } 
```

# javascript - 使用 d3 在圆的左上角附加提示工具提示

> ID：12668807
> 
> 赞同：3
> 
> 时间：2012-10-01T07:03:02.207
> 
> 标签：javascript, d3.js, force-layout, tipsy

当我在我的 d3 力有向图上使用醉酒时，我遇到了一个问题：当我将醉酒重力设置为西时，醉酒从我圈子的左上角开始。我怎样才能让它从我圈子的右侧开始？

这是我在 d3 中使用的代码示例：

```
var node = vis.selectAll("g.node")
    .data(json.nodes)
    .enter().append("svg:g");

node.append("svg:circle")
    .attr("r", function(d){return d.credits *5+"px";})
    .style("fill", "orange");

$('svg circle').tipsy({
    gravity: 'w',
    html: true,
    title: function() {
        var d = this.__data__,
            name = d.name;
        return name;
    }
}); 
```

**编辑**在这个问题中：[https](https://stackoverflow.com/a/10806220/1041692) ://stackoverflow.com/a/10806220/1041692他们说如下：

> 您可以尝试将工具提示添加到与实际圆圈重叠的 svg:g 中，但宽度和高度为零。目前它正在使用边界框并将工具提示放在边缘。玩弄醉醺醺的选项也可能会有所帮助。

但是要么我做错了，要么它不起作用，它并没有解决我的问题。

**编辑 2**这个问题也取决于浏览器，在 chrome 中，tipsy 元素附加在圆圈的左上角，而我希望它附加在圆圈右侧的中间。在 Firefox 中，醉酒出现在整个网页的左上方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:23:34.033

D3 Tipsy 教程实际上使用了 Tipsy 的修改版本：

[http://bl.ocks.org/1373263](http://bl.ocks.org/1373263)

稍微调整一下以正确计算 SVG 元素的边界框。所以复制那个源代码，而不是使用从 Tipsy 网站下载的 Tipsy。

# objective-c - xcode4 上的不完整实现

> ID：12668808
> 
> 赞同：-2
> 
> 时间：2012-10-01T07:03:04.647
> 
> 标签：objective-c, xcode, cocoa-touch, cocoa, xcode4

我是 Objective-C 的新手，我还没有进入 cocoa touch 库，但我正在尝试遵循 Objective-C 的书并编写一些课程以进行更多的练习。

我在实施声明中有一个错误，你能告诉我我犯了哪部分错误吗？

```
#import "getterSetter.h"

@implementation getterSetter

@synthesize airportName;

- (char) print : (char) name 
{
    return name;
}

- (int) zip : (int) zipair
{
    return zipair;
}
@end

int main(int argc,char *argv[])
{
    char *airportName;
    getterSetter *airport = [[getterSetter alloc]init];

    NSLog(@"Please enter the airport name:\n");
    scanf("%c",&airportName);

    NSLog(@"Please enter the airport name:\n");
    scanf("%c",&airportName);    

    NSLog(@"Your Airport Name is :\n");
    [airport print:*airportName];
}
#import <Foundation/Foundation.h>

@interface getterSetter : NSObject
{
    char *airportName;
    int zipCode;
    char *airportCityName;
}

- (char) print : (char) name;

- (int) zip;

@property char *airportName;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:17:22.750

在 getterSetter.h 中，您声明了一个方法

```
- (int) zip; 
```

但是在你实现的 .m 文件中

```
- (int) zip : (int) zipair 
```

这是一种不同的方法，因此编译器会抱怨缺少`- (int) zip`.

# ios - iOS变量的LLDB Python访问？

> ID：12668815
> 
> 赞同：2
> 
> 时间：2012-10-01T07:04:13.047
> 
> 标签：ios, lldb

作为调试可能与我的 UIVIews 相关的问题的一部分，我想编写一个 python 脚本以从 LLDB 运行。我曾想过在断点和所有视图子项中提取视图的所有设置，以允许我比较状态。我查看了有关该主题的 WWDC 视频，然后花时间阅读 lldb.llvm.org/scripting.html 上的内容，但没有发现它们很有帮助。对示例的网络搜索导致与这些示例没有本质上的不同。

我的问题是我试图弄清楚如何在断点处访问 iOS 变量。我见过的示例执行转换数字和模拟 shell 命令之类的操作。有趣的东西，但对我的目的没有用。我一直在使用“脚本帮助（lldb.SBValue）”等阅读帮助信息，但是由于结果很大并且不清楚使用模式是什么，因此进展缓慢。我觉得如何遍历几个 iOS 对象的一个​​不错的例子可以帮助我理解系统。有谁知道或可以分享一段代码？

**更新：**

我写这篇文章是为了帮助我找出 UIView 使用中的错误。我想做更多的工作来完善它，看看我是否可以显示整个视图树，但这足以解决我的问题，所以我将它放在这里以节省其他人一些时间。

```
import lldb
max_depth = 6
filters = {'_view':'UIView *', '_layer':'CALayer *', '_viewFlags':'struct'}

def print_value(var, depth, prefix):
    """ print values and recurse """
    global max_depth
    local_depth = max_depth - depth
    pad = ' ' * local_depth
    name = var.GetName()
    typ = str(var.GetType()).split('\n')[0].split('{')[0].split(':')[0].strip()

    found = name in filters.keys() # only visit filter items children
    if found:
        found = (filters.get(name) == typ)

    value = var.GetValue()
    if value is None or str(value) == '0x00000000':
        value = ''
    else:
        value = ' Val: %s' % value

    if var.GetNumChildren() == 0 and var.IsInScope():
        path = lldb.SBStream()
        var.GetExpressionPath(path)
        path = ' pathData: %s' % path.GetData()
    else:
        path = ''

    print '^' * local_depth, prefix, ' Adr:', var.GetAddress(), ' Name:', name, ' Type:', typ, value, path

    if var.GetNumChildren() > 0:
        if local_depth < 2 or found:
            print pad, var.GetNumChildren(), 'children, to depth', local_depth + 1
            counter = 0
            for subvar in var:
                subprefix = '%d/%d' % (counter, var.GetNumChildren())
                print_value(subvar, depth - 1, subprefix)
                counter += 1

def printvh (debugger, command_line, result, dict):
    """ print view hierarchy """
    global max_depth
    args = command_line.split()
    if len(args) > 0:
        var = lldb.frame.FindVariable(args[0])
        depth = max_depth
        if len(args) > 1:
            depth = int(args[1])
            max_depth = depth
        print_value(var, depth, 'ROOT')
    else:
        print 'pass a variable name and optional depth' 
```

我将以下内容添加到我的 .lldbinit 中：

```
script import os, sys
# So that files in my dir takes precedence.
script sys.path[:0] = [os.path.expanduser("~/lldbpy")]
script import views
command script add -f views.printvh printvh 
```

这样我就可以在 LLDB 提示符下键入“printvh self 3”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T09:11:20.187

也许这会有所帮助。下面是一个示例，说明如何在遇到断点时转储简单的局部变量。我没有正确显示 char* 数组，我不确定我应该如何获取这些数据以显示它，就像“帧变量”会显示它一样，但我会在稍后有空闲时间时弄清楚这一点。

```
struct datastore {
  int val1;
  int val2;
  struct {
     int val3;
  } subdata;
  char *name;
};

int main (int argc, char **argv)
{
  struct datastore data = {1, 5, {3}, "a string"};
  return data.val2;
}

Current executable set to 'a.out' (x86_64).
(lldb) br se -l 13
Breakpoint created: 1: file ='a.c', line = 13, locations = 1
(lldb) br comm add -s python
Enter your Python command(s). Type 'DONE' to end.
> def printvar_or_children(var):
>   if var.GetNumChildren() == 0 and var.IsInScope():
>     path = lldb.SBStream()
>     var.GetExpressionPath(path)
>     print '%s: %s' % (path.GetData(), var.GetValue())
>   else: 
>     for subvar in var:
>       printvar_or_children(subvar)
> 
> print 'variables visible at breakpoint %s' % bp_loc
> for var in frame.arguments:
>   printvar_or_children(var)
> for var in frame.locals:
>   printvar_or_children(var)
> 
> DONE
(lldb) r
variables visible at breakpoint 1.1: where = a.out`main + 51 at a.c:13, address = 0x0000000100000f33, resolved, hit count = 1 
argc: 1
*(*(argv)): '/'
data.val1: 1
data.val2: 5
data.subdata.val3: 3
*(data.name): 'a'
Process 84865 stopped
* thread #1: tid = 0x1f03, 0x0000000100000f33 a.out`main + 51 at a.c:13, stop reason = breakpoint 1.1
    frame #0: 0x0000000100000f33 a.out`main + 51 at a.c:13
   10   int main (int argc, char **argv)
   11   {
   12     struct datastore data = {1, 5, {3}, "a string"};
-> 13     return data.val2;
(lldb) 
```

提示 - 为了理智起见，我在侧面文本编辑器中处理了 python，并在我试验时将其粘贴到 lldb 中。

如果您在 lldb 中使用 frame 变量命令在给定的停止位置探索变量，这与您可以通过提供给“frame”对象中的断点 python 命令的 SBFrame 访问它们的基本方式相同。

希望这有助于您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T07:15:43.767

您是否尝试查看存储在以下位置的 python LLDB 格式化模板：

```
XCode.app/Contents/SharedFrameworks/LLDB.framework/Resources/Python/lldb/formatters/objc 
```

# html - 如何在 Visual Studio 2012 中添加 html 自定义验证模式

> ID：12668819
> 
> 赞同：2
> 
> 时间：2012-10-01T07:04:30.620
> 
> 标签：html, validation, visual-studio-2012, intellisense

如何将自定义 HTML 验证模式添加到 VS 2012 中？VS 2005/2008 的解决方案不再起作用，因为注册表项结构已更改。

问候， 罗尼

# java - 项目设置，代码访问所有

> ID：12668821
> 
> 赞同：-1
> 
> 时间：2012-10-01T07:04:50.120
> 
> 标签：java, tortoisesvn

我刚刚创建了一个应用程序，现在我希望我的所有团队都可以访问我的应用程序代码。我想将它放在一个存储库中，我的团队可以访问该存储库。我正在使用 Java 和 apache tomcat 6。我知道有类似 Tortoise SVN 的东西。
你能帮帮我吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:10:18.220

设置一个 git 存储库。

[http://git-scm.com/](http://git-scm.com/)

有一些设置教程。 [http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository](http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository)（例如）

对于日食： [http ://www.eclipse.org/resources/resource.php?id=528](http://www.eclipse.org/resources/resource.php?id=528)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:08:28.720

我建议了解版本控制系统：

[http://en.wikipedia.org/wiki/Comparison_of_revision_control_software](http://en.wikipedia.org/wiki/Comparison_of_revision_control_software)

我可以推荐：

*   Subversion（客户端-服务器；被许多公司使用；在 TortoiseSVN 中的 'svn' 代表 Subversion）
*   Mercurial（分布式；比 Subversion 更现代；例如由 OpenJDK 使用）
*   Git（分布式；比 Subversion 更现代）（我没有经常使用它，但它也很受欢迎）

# android - 内置模拟器 WXGA800 7inch (4.1.1) 没有选择正确的资源

> ID：12668827
> 
> 赞同：0
> 
> 时间：2012-10-01T07:05:26.020
> 
> 标签：android

我正在使用 WXGA800 - 7inch 版本的 Android 4.1.1 模拟器上进行测试。它的分辨率为 800x1280，密度为 213dpi。我有以下文件夹

drawable drawable-h1200dp drawable-xhdpi drawable-hdpi drawable-mdpi drawable-ldpi

我对“布局”有相同的目录结构

我遇到的问题是对于这个“内置”模拟器，drawable-h1200dp 资源没有被选择，所以图像很小。高度是 1280 所以这应该选择 h1200dp 不应该还是我弄错了？如果有人能解释

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:17:38.390

您可以在 EDIT 或 CREATE 一个新的 AVD 时设置抽象 LCD 密度，Android 更关心像素密度而不是分辨率本身，因为它必须在可用的几个资源中选择它应该选择的布局。

# python - 以一种形式从多个下拉列表中获取 POST

> ID：12668833
> 
> 赞同：0
> 
> 时间：2012-10-01T07:06:00.353
> 
> 标签：python, django

有一个表单，用户可以在其中更改属性名称上的名称并更改连接到哪个属性 a（属性 b）。

模板：

```
"<form id="form1" name="form1" method="post" action="/define_a/{{c.id}}/edit/">
{% csrf_token %}
{% endblock %}

{% block buttons %}
<p><input type="submit" value="Save" />&nbsp;<a href="/define_a/{{c.id}}/">Cancel</a>
</p>
{% endblock %}

{% block a_rows %}
{% for a, a_form in a_list %}
<tr><td><img class="icon" src="{{images_dir}}/delete-icon.png" 
onclick="javascript: return confirmDelete_name('Are you sure? 
This will delete the stuff and all associated information. 
The removal happens immediately and cannot be undone.', '{{a.id}}', 'delete');" />
</td><td>{{a_form.name}}</td>
<td>
<select name= "test">
<option value = "Null">None</option>
<option value = "{{a_form.id}}" selected>{{a.b}}</option>
{% for a, a_form in a_list %}
<option value = "{{a_form.id}}">{{a.name}}</option>
{% endfor %}" 
```

看法：

检查它是否是一个帖子并且它是有效的。

```
 post = [myForm(request.POST, instance = test) for a in a's];
                for p in post :
                    if not new_t.b == p:
                        if p == 'None':
                        new_t.b = None;
                    else:
                       new_t.b = p; 
```

但我无法从帖子的下拉列表中获取所有值。我从下拉列表中获得了所有 a.name 但只有一个值，有时我根本没有得到任何值。

有任何想法吗？

# c# - 如何检索 Web 资源中的注释并使用弹出窗口显示它 - crm 2011

> ID：12668835
> 
> 赞同：0
> 
> 时间：2012-10-01T07:06:14.033
> 
> 标签：c#, c#-4.0, dynamics-crm, dynamics-crm-2011

如何使用 html Web 资源在弹出窗口中显示实体中存在的注释。我的要求是在弹出窗口中显示实体中存在的注释，并且在弹出窗口中用户应该能够删除、上传注释并将注释转换为 pdf（如果他愿意）。您能否建议在 crm 2011 中实现此目标的最佳方法。

```
function retann() {
//debugger;

var serverUrl = Xrm.Page.context.getServerUrl();

var GUIDvalue = Xrm.Page.data.entity.getId();

// Creating the Odata Endpoint
var oDataPath = "http://url/organization/XRMServices/2011/OrganizationData.svc/";
var retrieveReq = new XMLHttpRequest();
var Odata = oDataPath + "/AnnotationSet?$select=DocumentBody,FileName,MimeType,ObjectId&$filter=ObjectId/Id eq guid'" + GUIDvalue + "'";
retrieveReq.open("GET", Odata, false);
retrieveReq.setRequestHeader("Accept", "application/json");
retrieveReq.setRequestHeader("Content-Type", "application/json; charset=utf-8");
retrieveReq.onreadystatechange = function () { retrieveReqCallBack(this); };
retrieveReq.send(); 
}

function retrieveReqCallBack(retrieveReq) {
if (retrieveReq.readyState == 4 /* complete */) {

//debugger;

    var retrieved = this.parent.JSON.parse(retrieveReq.responseText).d;

    var message = "";
    var fun_var =
    "<script type=text/javascript>" +
    "function result_value()" +
    "{" +
    "var rad_val;" +
    "for (var i=0; i < document.orderform.test.length; ++i){if (document.orderform.test[i].checked){rad_val = document.orderform.test[i].value;}}" +
    "if(rad_val==null || rad_val=='')" +
    "{" +
    "window.top.opener.Xrm.Page.data.entity.attributes.get('new_radiovalue').setValue('0');" +
     "}" +
    "else" +
    "{" +
    "window.top.opener.Xrm.Page.data.entity.attributes.get('new_radiovalue').setValue(rad_val);" +
    "}" +
     " window.top.opener.Xrm.Page.data.entity.attributes.get('new_fireplugin').setValue(1);" +
     "window.top.opener.Xrm.Page.data.entity.save();" +
    "this.window.close();" +
    "}" +
    "function result_value1()" +
    "{" +
    "var rad_val1;" +
    "for (var i=0; i < document.orderform.test.length; ++i){if (document.orderform.test[i].checked){rad_val1 = document.orderform.test[i].value;}}" +
    "if(rad_val1==null || rad_val1=='')" +
    "{" +
    "window.top.opener.Xrm.Page.data.entity.attributes.get('new_radiovalue').setValue('0');" +
     "}" +
    "else" +
    "{" +
    "window.top.opener.Xrm.Page.data.entity.attributes.get('new_radiovalue').setValue(rad_val1);" +
    "}" +
     " window.top.opener.Xrm.Page.data.entity.attributes.get('new_delete').setValue(1);" +
     "window.top.opener.Xrm.Page.data.entity.save();" +
    "this.window.close();" +
    "}" +
    "</script>";

    var n = retrieved.results.length;
    for (var i = 0; i < retrieved.results.length; i++) {
        message += " <input type='radio' name='test' value=' " + i + "' />" + retrieved.results[i].FileName + "<br />";
    }
    myWindow = window.open('', '', 'width=500,height=150,left=250,top=250,scrollbars=yes,resizable=yes,directories=yes');
    myWindow.document.write(fun_var + "<body bgcolor=GhostWhite style='font-family:verdana;font-size:11px;'><form name='orderform' style='font-family:verdana;font-size:11px;'>" + message + "</br><center ><input type='button' onclick='result_value()' style='font-family:verdana;font-size:11px;' value='Convert To PDF'/></center>" + "</form>");
    myWindow.focus();

}
}

function SetField() {
var AddressType = Xrm.Page.data.entity.attributes.get("new_radiovalue");
AddressType.setValue("");
}

function save_form() {

// var MainPhone = Xrm.Page.data.entity.attributes.get("new_name").getValue(); 
//Xrm.Page.data.entity.attributes.get("new_name").setValue(MainPhone+"."); 
Xrm.Page.data.entity.save();

} 
```

retrieveReqCallBack(this) 函数显示带有注释的弹出窗口。使用上面的代码，我可以将 doc 转换为 pdf。因为我想添加多种功能，例如上传、删除和转换为 pdf。如果存在注释，则弹出窗口应该有上传选项，如果存在注释，则它必须显示删除并转换为 pdf 按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:14:55.290

我发现这是我的问题的解决方案，您需要使用 javascript 创建自定义 Web 资源 (html) 以将数据拉出子网格，解析行，通过 REST 或 SOAP 查询 crm 数据以查看是否有一个注释，然后放一个“回形针”图标，允许用户根据该记录上传附件。

# javascript - 如何在jsTree中获取选定节点的标题？

> ID：12668836
> 
> 赞同：0
> 
> 时间：2012-10-01T07:06:20.233
> 
> 标签：javascript, jquery, jstree

我已经创建了 jsTree，如下所示。

```
$("#treeViewDiv").jstree({
"json_data" : {
    "data":[
        {
            "data" : {
                "title" : "Search engines",
                "state": "closed"
            },
            "children" :[
                {
                    "data":{
                    "title" : "Yahoo"
                    "state": "closed"
                }
                }
            ]
        },
        {
            "data" : {
                "title" : " Networking sites ",
                "state": "closed"
            }
        }
    ]
},  
"plugins" : [ "themes", "json_data", "ui" ]
}); 
```

现在我想获取所选节点的标题。我尝试了以下但它给了我“父节点的标题+子节点的标题”的结果。请帮忙。

```
bind("select_node.jstree", function(e, data){
    var selectedObj = data.rslt.obj;
    selectedObj.text()
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:01:18.357

普拉文的解决方案：

```
$('.jstree-clicked').text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T14:55:46.347

```
<script type="text/javascript" >
   $(function () {
       $("#demo1")
           .jstree({
               // the `plugins` array allows you to configure the active plugins on this instance
               "plugins": ["themes", "html_data", "ui", "crrm", "hotkeys", "json_data"],
               "core": {
                   "initially_open": ["phtml_1"]
               }
           })

          // EVENTS
          // each instance triggers its own events - to process those listen on the container
          // all events are in the `.jstree` namespace
          // so listen for `function_name`.`jstree` - you can function names from the docs
          .bind("loaded.jstree", function (event, data) {
              // Every Work You like do in loaded jstree ...
          })

         .bind("select_node.jstree", function (event, data) {
             //`data.rslt.obj` is the jquery extended node that was clicked   
             alert("Selected node text :" + data.inst.get_text(data.rslt.obj));
             alert("Selected node Tag a text:" + data.rslt.obj.find('a').first().text());
             alert("Selected node Tag a title:" + data.rslt.obj.find('a').attr("title"));
             alert("Selected node Tag a href Address" + data.rslt.obj.children("a").attr("href"));
             alert("Selected node Parent ID = " + data.inst._get_parent(data.rslt.obj).attr("id"));

             var parent = data.inst._get_parent(data.rslt.obj);
             alert("Selected node Parent Text = " + parent.find('a').first().text());
             alert("Selected node Parent Tag a title:" + parent.find('a').attr("title"));

         }
       );

   });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T19:42:04.370

```
var divselected = $('#treeViewDiv').jstree('get_selected'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T16:21:00.437

```
alert("Selected node Tag a title:" + data.rslt.obj.find('a').attr("title")); 
```

# android - 如何加密失效的公钥

> ID：12668838
> 
> 赞同：1
> 
> 时间：2012-10-01T07:06:41.153
> 
> 标签：android

这是我下面的登录页面代码，我还在谷歌上找到了一个 RSA PUBLIC PRIVITE KEY 我如何在我的代码中插入这个代码？任何人都可以帮助我我找到了 rsa 代码 formthis url [http://xtrace.blogspot.com/search/label/RSA](http://xtrace.blogspot.com/search/label/RSA)

```
 public void onCreate(Bundle icicle)
{
    super.onCreate(icicle);
    setContentView(R.layout.agapplogin);

    TextView lblMobileNo = (TextView)findViewById(R.id.lblMobileNo);
    lblMobileNo.setTextColor(getResources().getColor(R.color.text_color_red));

    mobile = (EditText)findViewById(R.id.txtMobileNo);

    TextView lblPinNo = (TextView)findViewById(R.id.lblPinNo);
    lblPinNo.setTextColor(getResources().getColor(R.color.text_color_red));

    pin = (EditText)findViewById(R.id.txtPinNo);

    btnLogin = (Button)findViewById(R.id.btnLogin);
    btnClear = (Button)findViewById(R.id.btnClear);

    btnLogin.setOnClickListener(new OnClickListener() {
         public void onClick(View view) {                
             postLoginData();
         }
         });      

                ;}  

public void postLoginData() 

   {
             Intent i = new   
   Intent(this.getApplicationContext(),new.class);
             Bundle bundle = new Bundle();
             bundle.putString("mno", mobile.getText().toString());
             bundle.putString("pinno", pin.getText().toString());
             i.putExtras(bundle);
             startActivity(i);          }
}

            ///this is RSA code which i found

   import java.io.BufferedOutputStream;
   import java.io.FileOutputStream;
   import java.io.IOException;
   import java.io.ObjectOutputStream;
   import java.math.BigInteger;
   import java.security.Key;
   import java.security.KeyFactory;
   import java.security.KeyPair;
   import java.security.KeyPairGenerator;
   import java.security.NoSuchAlgorithmException;
   import java.security.spec.RSAPrivateKeySpec;
   import java.security.spec.RSAPublicKeySpec;

        /**
        * This class generates key pair and saves in file in current directory
       * 
       * @author amit
       * 
       */
        public class RSAKeyGenerator {

public void generateKeyPair(String publicKeyFileName,
        String privateKeyFileName) {
    KeyPairGenerator kpg = null;
    try {
        kpg = KeyPairGenerator.getInstance("RSA");
    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    kpg.initialize(2048);
    KeyPair kp = kpg.genKeyPair();
    Key publicKey = kp.getPublic();
    Key privateKey = kp.getPrivate();
    try {
        KeyFactory fact = KeyFactory.getInstance("RSA");
        RSAPublicKeySpec pub = fact.getKeySpec(publicKey,
                RSAPublicKeySpec.class);
        RSAPrivateKeySpec priv = fact.getKeySpec(privateKey,
                RSAPrivateKeySpec.class);

        saveToFile(publicKeyFileName, pub.getModulus(),
                pub.getPublicExponent());
        System.out.println("public key saved");
        saveToFile(privateKeyFileName, priv.getModulus(),
                priv.getPrivateExponent());
        System.out.println("private key saved");
    } catch (Exception e) {
        System.out.println("error ");
    }
}

private void saveToFile(String fileName, BigInteger mod, BigInteger exp)
        throws IOException {
    ObjectOutputStream oout = new ObjectOutputStream(
            new BufferedOutputStream(new FileOutputStream(fileName)));
    try {
        oout.writeObject(mod);
        oout.writeObject(exp);
    } catch (Exception e) {
        throw new IOException("Unexpected error", e);
    } finally {
        oout.close();
    }
}

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    RSAKeyGenerator t = new RSAKeyGenerator();
    t.generateKeyPair("public.key", "private.key");

}

        }

        import javax.crypto.Cipher;

         public class RSAEncDec {

private PublicKey readPublicKeyFromFile(String fileloc) throws IOException {
    InputStream in = new FileInputStream(new File(fileloc));

    ObjectInputStream oin = new ObjectInputStream(new BufferedInputStream(
            in));
    try {
        BigInteger m = (BigInteger) oin.readObject();
        BigInteger e = (BigInteger) oin.readObject();
        RSAPublicKeySpec keySpec = new RSAPublicKeySpec(m, e);
        KeyFactory fact = KeyFactory.getInstance("RSA");
        PublicKey pubKey = fact.generatePublic(keySpec);
        return pubKey;
    } catch (Exception e) {
        throw new RuntimeException("Spurious serialisation error", e);
    } finally {
        oin.close();
    }
}

private PrivateKey readPrivateKeyFromFile(String fileLoc)
        throws IOException {
    InputStream in = new FileInputStream(new File(fileLoc));

    ObjectInputStream oin = new ObjectInputStream(new BufferedInputStream(
            in));
    try {
        BigInteger m = (BigInteger) oin.readObject();
        BigInteger e = (BigInteger) oin.readObject();
        RSAPrivateKeySpec keySpec = new RSAPrivateKeySpec(m, e);
        KeyFactory fact = KeyFactory.getInstance("RSA");
        PrivateKey prvKey = fact.generatePrivate(keySpec);
        return prvKey;
    } catch (Exception e) {
        throw new RuntimeException("Spurious serialisation error", e);
    } finally {
        oin.close();
    }
}

public byte[] rsaEncrypt(byte[] data, String fileLoc) {
    try {
        PublicKey pubKey = readPublicKeyFromFile(fileLoc);
        Cipher cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.ENCRYPT_MODE, pubKey);
        byte[] cipherData = cipher.doFinal(data);
        return cipherData;
    } catch (Exception e) {
        System.out.println("some thing went wrong");
    }
    return null;
}

public byte[] rsaDecrypt(byte[] data, String fileLoc) {
    try {
        PrivateKey pubKey = readPrivateKeyFromFile(fileLoc);
        Cipher cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.DECRYPT_MODE, pubKey);
        byte[] cipherData = cipher.doFinal(data);
        return cipherData;
    } catch (Exception e) {
        System.out.println("some thing went wrong");
    }
    return null;
}

/*
 * string
 * 
 * @param data (normal string)
 * 
 * @return
 */
public String encrypt(String data, String fileLoc) {
    byte[] enc = rsaEncrypt(data.getBytes(), fileLoc);
    return Base64.encode(enc);
}

/**
 * return the normal string
 * 
 * @param data
 *            (base64 encoded string)
 * @return
 * @throws Base64DecodingException
 */
public String decrypt(String data, String fileLoc)
        throws Base64DecodingException {
    byte[] enc = Base64.decode(data);
    byte[] decryptedData = rsaDecrypt(enc, fileLoc);
    return new String(decryptedData);
}

/**
 * 
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    RSAEncDec obj = new RSAEncDec();
    String enc = obj.encrypt("hello world", "./public.key");
    System.out.println(enc);
    String dat = null;
    try {
        dat = obj.decrypt(enc, "./private.key");
    } catch (Base64DecodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println(dat);

        }

       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T02:45:22.747

你到底想做什么？

您想在发送到服务器之前使用 RSA 加密 mobileNo 和 pin 吗？

如果是这种情况，您可能希望在您的服务器上生成一个密钥对，并且*只*让您的 android 可以访问公钥。

上面的代码在 Android 中生成了私钥和公钥，我不认为你想在这里做什么。

查看本文以了解如何在您的服务器中生成密钥并在 Android [http://www.helloandroid.com/tutorials/rsa-string-encryption-security中使用它们](http://www.helloandroid.com/tutorials/rsa-string-encryption-security)

# windows-8 - 如何以编程方式更改我的应用程序中的主音量？

> ID：12668839
> 
> 赞同：1
> 
> 时间：2012-10-01T07:06:41.780
> 
> 标签：windows-8, media-player

我想编写一个应用程序，我可以在其中操作当前播放的歌曲（例如从音乐应用程序），例如跳到播放列表中的下一首歌曲，重新启动它或设置音量。

我**搜索了 Windows SDK**并**尝试了所有与我的问题相关的示例**，但我找不到任何可以提示我如何执行此操作的内容。

所以我想问一下 - 如何在 Metro (Windows 8) 应用程序中静音或更改主音量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:39:37.833

不允许 Metro 应用程序更改系统设置。因此，无法从 Metro 应用程序中控制主音量。就是这样，微软提供了一个设置魅力，您可以在其中更改音量。该设置的魅力位于屏幕右侧。

您可以通过 MSDN 上的此链接进行进一步说明

[使用应用程序控制主音量](http://social.msdn.microsoft.com/Forums/sv-SE/winappswithhtml5/thread/b4e34a68-038e-4722-b5d6-ea67d55a5c12)

# android - 如何将图像转换为base64字符串android？

> ID：12668841
> 
> 赞同：4
> 
> 时间：2012-10-01T07:06:45.620
> 
> 标签：android, image, base64

谁能告诉我将图像转换为base64字符串的代码。我写下面的代码没有得到正确的结果。

```
 String filepath = "/sdcard/Image/image1.jpg";
   File imagefile = new File(filepath);
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(imagefile);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Bitmap bm = BitmapFactory.decodeStream(fis);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();  
        bm.compress(Bitmap.CompressFormat.JPEG, 100 , baos);    
        byte[] b = baos.toByteArray(); 

        String encodedImage = Base64.encodeToString(b, Base64.DEFAULT); 
```

我得到的结果格式不正确，它以 3 个点结尾...

字节数组我以 3 个点结束......

```
[-1, -40, -1, -32, 0, 16, 74, 70, 73, 70, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, -1, -37, 0, 67, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, -1, -37, 0, 67, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, -1, -64, 0, 17, 8, 1, 64, 0, -16, 3, 1, 34, 0, 2, 17, 1, 3, 17, 1, -1, -60, 0, 31, 0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, -1, -60, 0, -75, 16, 0, 2, 1, 3, 3, 2, 4, 3, 5, 5, 4, 4, 0, 0, 1, 125, 1, 2, 3, 0, 4, 17, 5, 18, 33, 49, 65, 6, 19, 81, 97, 7, 34, 113, 20, 50, -127, -111, -95, 8, 35, 66, -79, -63, 21, 82, -47, -16, 36, 51, 98, 114, -126, 9, 10, 22, 23, 24, 25, 26, 37, 38, 39, 40, 41, 42, 52, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, -125, -124, -123, -122, -121, -120, -119, -118, -110, -109, -108, -107, -106, -105, -104, -103, -102, -94, -93, -92, -91, -90, -89, -88, -87, -86, -78, -77, -76, -75, -74, -73, -72, -71, -70, -62, -61, -60, -59, -58, -57, -56, -55, -54, -46, -45, -44, -43, -42, -41, -40, -39, -38, -31, -30, -29, -28, -27, -26, -25, -24, -23, -22, -15, -14, -13, -12, -11, -10, -9, -8, -7, -6, -1, -60, 0, 31, 1, 0, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, -1, -60, 0, -75, 17, 0, 2, 1, 2, 4, 4, 3, 4, 7, 5, 4, 4, 0, 1, 2, 119, 0, 1, 2, 3, 17, 4, 5, 33, 49, 6, 18, 65, 81, 7, 97, 113, 19, 34, 50, -127, 8, 20, 66, -111, -95, -79, -63, 9, 35, 51, 82, -16, 21, 98, 114, -47, 10, 22, 36, 52, -31, 37, -15, 23, 24, 25, 26, 38, 39, 40, 41, 42, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, -126, -125, -124, -123, -122, -121, -120, -119, -118, -110, -109, -108, -107, -106, -105, -104, -103, -102, -94, -93, -92, -91, -90, -89, -88, -87, -86, -78, -77, -76, -75, -74, -73, -72, -71, -70, -62, -61, -60, -59, -58, -57, -56, -55, -54, -46, -45, -44, -43, -42, -41, -40, -39, -38, -30, -29, -28, -27, -26, -25, -24, -23, -22, -14, -13, -12, -11, -10, -9, -8, -7, -6, -1, -38, 0, 12, 3, 1, 0, 2, 17, 3, 17, 0, 63, 0, -2, 55, -96, -76, 100, 41, 28, -111, -96, 46, -119, 50, 16, -79, -78, 60, 82, 2, -24, -24, -56, 28, 72, -82, -84, 14, -32, 91, 57, 57, 32, -115, -75, -83, 109, 102, -84, 91, 116, 104, 62, 98, 48, 85, 114, 112, 100, 3, -8, -77, -43, 65, 35, 29, 54, -110, 9, 14, 79, 23, -16, -9, -58, -87, -31, -23, -51, -114, -79, 4, 87, -102, 52, -78, 42, -77, 77, 2, 75, 62, -98, 36, 117, 13, 53, -69, -19, 50, -120, -14, -101, -27, -122, 51, -109, -110, -15, 41, 125, -55, 39, -40, -98, 23, -45, -4, 55, -30, 27, 8, -38, -34, 11, 107, -44, 107, -107, 72, -18, 34, 75, 89, 101, 116, 36, 75, 27, -106, 80, -53, 30, -27, 32, 49, 92, -122, 80, -39, -52, -65, 53, 124, 116, -16, 110, 28, -51, -22, -106, -51, 39, 103, -85, 87, -14, -8, 123, -11, 119, 109, -92, 121, -76, 49, -111, 106, -17, 118, -105, -90, -22, -18, -51, -89, -25, 109, -10, -46, -41, 103, -126, 91, -38, -94, -85, 110, -120, 12, 54, 7, -55, -114, -101, -3, -119, 3, 104, 28, -25, -44, 2, 48, -39, -47, -122, -51, 112, -37, 17, 71, 0, 16, 20, 1, -116, -65, 25, 62, -92, 100, -109, -58, 119, 100, -28, -28, -3, -109, 101, -32, 111, 14, 61, -66, 95, 65, -79, -109, -26, 84, 57, -75, -116, 56, -35, 51, -122, 98, 66, 70, 66, -87, -25, 110, 114, -87, -72, -86, 2, 49, 93, 61, -81, -61, 31, 8, 58, 21, 109, 2, -60, -107, -57, 43, 27, 12, -106, 103, 39, 44, 8, 99, -128, 120, 29, 66, -32, 12, -107, -7, -79, 88, 121, 61, -91, 123, 37, -41, -94, 106, -35, 63, -90, -41, 84, -17, -46, -79, 84, -19, -83, -42, -35, 63, -59, -25, -27, -75, -5, -85, -67, 89, -7, -17, -81, -8, 70, -49, 94, -77, 49, 58, 8, 110, -112, 31, -78, 93, 32, 27, -30, -109, 46, 118, -66, 6, 100, -115, -103, 70, -12, 39, 118, 55, 0, -63, -64, 39, -61, 111, 52, -21, -35, 30, -12, 89, 95, 90, 70, -109, 90, 72, -82, 85, -30, 30, 85, -60, 32, -66, 26, 55, 0, 52, -80, -54, -96, 16, -63, -125, 114, 87, 34, 84, 106, -3, -109, -75, -8, 57, -32, -126, -30, 71, -48, 109, -9, 22, 24, 6, -25, 80, 84, 57, 50, 19, -14, 37, -54, -115, -72, 24, 94, 2, -125, -114, 114, -96, -41, 61, -29, -113, -39, -97, -31, -1, 0, -116, 116, 59, -69, 59, 27, 67, -93, -21, 17, -62, 100, -46, -75, 40, -26, -71, -105, -20, 119, 96, 57, -37, 44, 18, -36, 58, -49, 103, 113, -64, -70, -124, -31, -54, -108, 120, -27, 73, 86, 22, -81, 71, 11, 57, -46, -117, -89, 55, 120, -69, 90, -41, -70, -42, 87, -66, -119, 90, -38, -37, 93, -35, -84, -73, -31, -59, 58, 53, -105, 52, 18, -25, -70, -43, -11, -43, 119, -12, -35, 121, 95, 85, -81, -29, -35, -18, -98, 86, 89, -54, 36, 41, 21, -68, 74, -32, -85, -57, 25, 49, -76, -125, 110, 16, -112, -46, 76, 60, -59, 14, -86, -90, 77, -120, -52, 81, -43, 36, -112, -25, 27, 72, -38, 41, -92, 18, 29, -31, -45, 108, 126, 81, 6, 72, -56, -108, -68, -103, 14, 66, -104, -10, -95, -37, -50, 67, -71, -36, 54, 18, 125, -109, -57, 30, 13, -15, 47, -125, 124, 67, 123, -31, -49, 24, 88, -83, -83, -12, 46, -78, 69, 40, -116, 125, -98, -14, -38, 77, -48, -61, -88, 88, 79, 18, -60, 39, -79, -106, 52, -52, 126, 90, -97, 46, 85, -110, -34, 72, -31, -71, 91, -104, -85, -128, -109, 79, -98, -56, -83, -62, 5, 56, -108, -7, 44, 85, 27, -26, -122, 70, -36, 93, 28, -78, -100, 48, 25, 87, -32, -126, 87, 44, -124, -77, 122, 42, 55, -115, -42, -82, -17, -81, 75, -7, -11, -74, -66, 123, 110, 121, -100, -42, -109, -117, -46, -38, 126, -114, -9, 122, 126, 127, 61, 78, 42, 61, -88, -50, 48, 50, -96, -20, -32, 16, -60, 49, -57, 94, -128, -125, -44, 100, -6, -100, 19, 90, -38, 124, -78, -38, -50, -109, -37, 22, 89, -61, -58, -54, -15, 41, 51, 44, -118, -25, 97, -117, -111, -110, 27, -26, 10, 78, 9, 37, 65, -36, 55, 30, -81, -5, 4, -21, 17, 92, -21, 49, 62, -97, 98, -86, -115, 53, -22, 8, -38, -34, 8, -89, 15, 34, -104, 45, -31, 70, -107, -53, -56, -116, -73, 9, 20, 106, 124, -46, -14, 45, -72, 103, -115, -31, 94, 102, 21, -114, 53, -99, -36, -54, -78, -57, -27, -76, 5, 2, -107, 47, -26, 48, 62, 97, 103, 13, 24, -40, 55, 35, 40, 98, 31, 106, -107, 1, -117, -44, 90, -21, -110, -41, -69, -73, -101, -69, 106, -33, -7, 43, -13, -13, -22, -9, -91, 86, 84, -99, -42, -85, 71, 111, -101, 77, -4, -41, 79, 61, 118, 76, -6, 83, -64, -2, 38, -121, 92, -119, 109, 47, -46, 40, 53, 63, 37, 89, 11, 5, 72, -75, 8, -47, -103, 90, 107, 115, -48, -56, -90, 51, -10, -120, 65, 37, 25, 89, -108, 21, -13, 21, 125, 122, -46, -34, 33, -100, -94, -87, -62, 14, 80, 99, -17, 74, 7, 108, -29, -100, 12, -14, 73, 61, -41, 39, -31, -51, 47, 81, -72, -73, -106, 48, 37, -100, 71, 4, -53, 50, 8, -27, 43, 44, 50, -110, 51, 37, -69, -100, -108, 114, 85, 11, 1, -14, -74, 62, 98, 88, 43, 15, -45, 127, -39, -105, 79, -8, 95, -15, 94, 59, 127, 11, -8, -53, 82, -41, 52, 47, 24, -55, 10, -49, -90, -51, 5, -10, -101, 5, -121, -120, -83, 84, 72, -57, -20, 11, 119, -89, -54, 63, -76, 97, 69, 111, -76, -39, 2, -19, 49, 13, 61, -85, 21, 55, 86, -15, -8, 88, -84, -79, -58, 115, -100, 91, -77, 122, -57, -86, -43, -66, -49, 116, -81, -9, 106, -37, -69, -6, 124, 6, 105, 79, -39, -72, -44, 87, -27, 105, 38, -76, 111, -43, 53, -39, 59, -83, -43, -45, -69, 91, -16, -55, -90, -58, -56, -89, -55, 66, 64, 93, -89, 106, -112, 126, -10, 0, 59, 112, 71, 10, 121, -25, 56, 57, -56, 10, 121, 127, 23, 124, 58, -80, -15, 85, -117, 43, 69, 21, -75, -12, 104, 90, -38, -19, 33, 92, -85, -110, -33, -70, -103, 84, 102, 72, 36, 35, 59, 9, -7, 10, -121, 83, -71, 73, -81, -43, 24, 127, 100, 79, 6, -49, 111, -74, -45, -60, 62, 35, -126, 77, -111, -76, 111, 51, 105, -110, -123, 37, 100, -36, -78, 68, -70, 117, -66, -16, 73, 12, 0, 117, 117, 1, -108, -106, 37, -98, -81, -89, -20, 113, -31, -13, 17, -14, -68, 75, -84, 76, -25, -27, -115, -28, -114, -59, 99, 12, 60, -44, 27, -31, 88, 67, 48, -32, 49, 38, 85, -34, 89, -41, 112, 35, 121, -32, -93, 71, 19, 66, -85, -87, 7, -42, 43, -15, 94, 111, 126, -34, -73, 76, -17, -87, -104, 96, -22, -46, -107, 41, -87, 114, -55, 89, -69, 59, -17, 117, 107, 54, -109, 77, 43, 125, -51, -37, -103, -53, -7, -16, -43, 124, 55, 125, -94, -34, -36, 105, -6, -115, -89, -109, 52, 7, 105, 44, -124, -84, -86, 90, 93, -78, -62, -37, 113, 36, 114, 42, -18, 12, 56, 25, 32, -31, -127, 90, -65, -31, -35, 86, -21, -61, -9, 73, 52, 39, -52, 70, 32, 50, -80, -54, 58, -125, -13, 71, 32, 99, -62, -28, 3, 25, 31, 50, -98, -8, -36, 91, -9, 23, -57, 63, -80, 47, -122, -4, 93, -91, -49, 108, 60, 85, -88, -39, 107, 16, 71, 112, -38, 109, -11, -58, -107, 103, 36, 81, 92, 108, -109, -55, 91, -119, 32, -103, 100, -106, -51, -91, 8, 46, 4, 100, -4, -123, -34, 21, 18, -18, -49, -29, -49, -60, -81, -123, -34, 45, -8, 83, -30, -99, 83, -63, -34, 50, -46, 31, 77, -43, 44, 37, 64, 80, -30, 75, 107, -69, 103, 51, 8, 117, 13, 58, -17, -124, -68, -80, -69, 68, 15, 5, -60, 120, 5, -119, -118, 84, 75, -120, -26, -116, 125, 69, 26, -85, 23, 67, -39, -44, 75, -98, -47, 82, -113, 71, 119, 56, -20, -45, -20, -92, -99, -19, -75, -35, -36, 91, -7, 106, -109, 88, 90, -41, -94, -17, 11, -90, -98, -87, -39, 59, -23, -82, -6, 95, -43, 110, -9, 61, -105, -61, -102, -123, -122, -75, 101, 29, -35, -80, 67, -57, -17, -94, 1, 75, -60, -37, -100, 20, 113, -116, -16, -33, 50, -100, 96, -85, 100, -74, 0, -49, 101, 22, -97, 1, 37, -74, 38, 24, 115, -75, 87, 29, 91, -87, 11, -23, -44, 114, 121, 25, -28, 12, -4, -103, -31, -97, 17, -35, -8, 126, -11, 39, -123, -63, -119, 54, -58, -47, -53, -111, 28, -111, 101, -127, -118, 80, -93, -25, 80, 71, -53, 38, 12, -120, 74, -112, -27, 70, 43, -11, 7, -31, 7, -63, -115, 59, -29, 55, -125, -94, -15, 63, -124, 124, 111, -90, 77, -121, -14, 117, 93, 26, 93, 54, 84, -43, 52, 107, -35, -68, 90, 94, -94, -33, -70, -122, 108, 9, 109, -26, 5, -83, -18, -96, 127, 58, 9, 100, 10, -32, 124, -50, 55, 45, -85, 66, -92, -1... 
```

并且我得到的base64字符串也以3个点结尾，这是不正确的

```
/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAFAAPADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+N6C0ZCkckaAuiTIQsbI8UgLo6MgcSK6sDuBbOTkgjbWtbWasW3RoPmIwVXJwZAP4s9VBIx02kgkOTxfw98ap4enNjrEEV5o0siqzTQJLPp4kdQ01u+0yiPKb5YYzk5LxKX3JJ9ieF9P8N+IbCNreC2vUa5VI7iJLWWV0JEsbllDLHuUgMVyGUNnMvzV8dPBuHM3qls0nZ6tX8vh79XdtpHm0MZFq73aXpuruzafnbfbS12eCW9qiq26IDDYHyY6b/YkDaBzn1AIw2dGGzXDbEUcAEBQBjL8ZPqRkk8Z3ZOTk/ZNl4G8OPb5fQbGT5lQ5tYw43TOGYkJGQqnnbnKpuKoCMV09r8MfCDoVbQLElccrGwyWZycsCGOAeB1C4AyV+bFYeT2leyXXomrdP6bXVO/SsVTtrdbdP8Xn5bX7q71Z+e+v+EbPXrMxOghukB+yXSAb4pMudr4GZI2ZRvQndjcAwcAnw280690e9FlfWkaTWkiuVeIeVcQgvho3ADSwyqAQwYNyVyJUav2Ttfg54ILiR9Bt9xYYBudQVDkyE/Ilyo24GF4Cg45yoNc944/Zn+H/AIx0O7s7G0Oj6xHCZNK1KOa5l+x3YDnbLBLcOs9nccC6hOHKlHjlSVYWr0cLOdKLpzd4u1rXutZXvola2ttd3ay34cU6NZc0Eue61fXVd/TdeV9Vr+Pd7p5WWcokKRW8SuCrxxkxtINuEJDSTDzFDqqmTYjMUdUkkOcbSNoppBId4dNsflEGSMiUvJkOQpj2odvOQ7ncNhJ9k8ceDfEvg3xDe+HPGFitrfQuskUojH2e8tpN0MOoWE8SxCexljTMflqfLlWS3kjhuVuYq4CTT57IrcIFOJT5LFUb5oZG3F0cspwwGVfgglcshLN6KjeN1q7vr0v59ba+e255nNaTi9Lafo73en5/PU4qPajOMDKg7OAQxDHHXoCD1GT6nBNa2nyy2s6T2xZZw8bK8SkzLIrnYYuRkhvmCk4JJUHcNx6v+wTrEVzrMT6fYqqNNeoI2t4Ipw8imC3hRpXLyIy3CRRqfNLyLbhnjeFeZhWONZ3cyrLH5bQFApUv5jA+YWcNGNg3IyhiH2qVAYvUWuuS17u3m7tq3/kr8/Pq96VWVJ3Wq0dvm0381089dkz6U8D+JodciW0v0ig1PyVZCwVItQjRmVprc9DIpjP2iEElGVmUFfMVfXrS3iGcoqnCDlBj70oHbOOcDPJJPdcn4c0vUbi3ljAlnEcEyzII5SssMpIzJbuclHJVCwHytj5iWCsP03/Zl0/4X/FeO38L+MtS1zQvGMkKz6bNBfabBYeIrVRIx+wLd6fKP7RhRW+02QLtMQ09qxU3VvH4WKyxxnOcW7N6x6rVvs90r/dq27v6fAZpT9m41FflaSa0b9U12Tut1dO7W/DJpsbIp8lCQF2napB+9gA7cEcKeec4OcgKeX8XfDqw8VWLK0UVtfRoWtrtIVyrkt+6mVRmSCQjOwn5CodTuUmv1Rh/ZE8Gz2+208Q+I4JNkbRvM2mShSVk3LJEunW+8EkMAHV1AZSWJZ6vp+xx4fMR8rxLrEzn5Y3kjsVjDDzUG+FYQzDgMSZV3lnXcCN54KNHE0KrqQfWK/Feb37et0zvqZhg6tKVKalyyVm7O+91azaTTSt9zduZy/nw1Xw3faLe3Gn6jaeTNAdpLISsqlpdssLbcSRyKu4MOBkg4YFav+HdVuvD90k0J8xGIDKwyjqD80cgY8LkAxkfMp743Fv3F8c/sC+G/F2lz2w8VajZaxBHcNpt9caVZyRRXGyTyVuJIJlkls2lCC4EZPyF3hUS7s/jz8Svhd4t+FPinVPB3jLSH03VLCVAUOJLa7tnMwh1DTrvhLywu0QPBcR4BYmKVEuI5ox9RRqrF0PZ1Eue0VKPR3c47NPspJ3ttd3cW/lqk1ha16LvC6aeqdk76a76X9Vu9z2Xw5qFhrVlHd2wQ8fvogFLxNucFHGM8N8ynGCrZLYAz2UWnwEltiYYc7VXHVupC+nUcnkZ5Az8meGfEd34fvUnhcGJNsbRy5EckWWBilCj51BHyyYMiEqQ5UYr9QfhB8GNO+M3g6LxP4R8b6ZNh/J1XRpdNlTVNGvdvFpeot+6hmwJbeYFre6gfzoJZArgfM43LatCpJwTlCT2s7xd56elrNdXZ2vY+nwGdUHRtVnyztFdW3uu1029+2mr0PnhdPhwTHGhIyeUU85IwAUHAyCB6HqCSC5dLjK5aOPBUZ/dgc5bOVx6+npjIIr7Msf2UvE0iTgeILCS5gwHtY7S5Eiyb24eS4NuI0bAIch22sGaJTtVrT/smeNVX5dU0ecMCSNmoGSMqrMwcR2TqeMBQrtkhgTuK7vOdColfl7frv221vs2t2mjtp5vh25KU1bTfb7T6pys0767aa2Tb+H/AOyosviBGGQV/dqTj94ABk45wcEnONx5wCYJdNi8tsRoNxHBRcjDv7egGfVSA2QBX2PefssfEeEZtZdAuz5saFRd3ds8aurEzSC6sIUWOPGJAHMuduyNgSTlSfswfEhpJFjPh6ZYxGRKupziJ9yb90e7T1fAyEJdFAZWIOwrIajSq8slyuzWmj6319NPvvfRO+jzTDTi4uUVe2t3pq31S7eVuu6v8fPp0SjiMDbgcInIy3OCoIGRkfxZbqW5rB8R6JB4ktJbfVU85fLWNZ2UebCYy/lvGwUsGjPzZDZI4JK5x9fXn7NXxPhMm3TNPm2OsZaHUEdCCCyupMe51+bkgFVYMHYFZSObvf2dPiwuYk0GB0Ku+9NT0/YAokyJGlniKkkFEXaGdm+XcAXrSlCvSkpRWqd/ucmuvW+q83dt6nNUxOEqxnGdSLvpdt3d29b2v111ut27Nn5g694fvPDmoSQTIrRAk29wqrsuoixwUyDtZBgSRnLI2fmKmOR9Lw9qUljN9oiZGxtE1vIR+8jJYEj5PmKHpn5kLAhSA4P2v4z+AXjI6M0OvaLaRQyPm2uTq+hRzLcNFNKhtjNqEbyMqW0sgVFdfLD54DV8P6ho1/omq32mSJ5k1pJskliKSIUcgxyFlkZF3DgkMQHdvmYKrN9FRxCxFGUa0eWSUddL/FJN3bvuk/8AwLVta/OVqbw9X2lGSqRbVuXf4mu7tdK61ur2bvZP2I61pEdol488W11ykZCmbcGc+X5ZOC/vkqVwSxXY1ea6pqs+sz+VHE0NrGVbywvzSliwUsAEOcggjkAg4Y4pml6LdXC+dN5jAOIxggrjdjdgrkYUZ4xyNpJK5btbTQEtxnaSJHCu5wGCgH7rEEn7pyD90MWySSa44eyw85STjKzWq02uk9m/O2u6d7q50KVbEQStKO11a1/ee+no7vSzb3VnzmmaQs6kNAkapKCygIWIVm5LsjOwJO8KSCPmyMsDXSLpsSK8YhDHCBv3YLEFmK9QCx+UYBJPzEBicGujt7BIEIQDJQYDKRknKhicDc6gbiTyxIwSQRUzW758zY2yMpvZkyrf6wdchccdCeCRkEA1yVsc5SlyvRW0b005r2V/u83fWyvvTwMrK17Llvo2t57tpva3fSyuzx/4i/DC+8DXF1f6cG1DQJpUSK6bLS6e8jyhba72MMhgoEFyyiN8BHK3DKH2/g58TX8F339n6m6NoF7NGZmCl5NNkEn/AB9RxA7ngYA/aYYzuJ/fxBpUMT/bcOkWOow3lndW6XVrfxNFPFMoaOWJxIjxGNkYFHHzkHrluqgg/E3xY+EN58PtRbVtJjnufC95ICH2F30maV3/ANEvOSTAxXNpcsDvXEMzecUkl+jpVVUThJNTSV7q17cyuu2/y6Nt3PlHTcU2neLtytesls+91o1o763bP0s8P3Vtf2VveWVxDdWlzGk1vc2zrJBNE+4rJHIhcSKwBYFW9VxkMT6FZ2oID7iqkgEBTnjd8zfePzAMfX7vLEtn8xvgd8Y7vwNcRaNrDzXvhO5ljDqGMk2jzNIQ93YLvLG3YuzXdkpy+DPb4ud6S/qN4evNP1K0tL/T7q3vLK+himtrq3lSaCaKUHZKjqeQRzgncG3oxEgNZ1KKppzirLS711V30vtprbW9tbvXSlNttSd7ctu9rtPfa/u7vS71e76GxtwVHG7O0BiMELjC/KWGSeTg5wc5GQMdJZ6Ysiu+U3jOFKnPJI79QwCt+XcEmrZWy5JVcYdQ4BJ6llDYIIUHHABwMcliee002FEw7gr0BPHzACRSVJPAJOM5xnOR8uTjz8ycktVZWXXX5+vpo9DV6t3stV37ve++lnfbdN3PEPi18EPDnxY8MyaRrNubbUYFeXQ9dtYI3vNLvcOPlLbDNZz7UW9sHdYbmPYytFdx29yn5BeMPhj4h+HPi2bwr42spbNomL2V3Fk6fqdnLJKkF/YTtGFmglZMONyyQTqba7WGaKVR/Qza2McsTjAK7gwLZJCYdsrjI4xgHqO+AAa85+KvwR8I/GDwrN4f8Q2oiuIVebSNchjjXUtGvnVgtzbSEDzInKqLyxkkNteR7Vk2zx2tynRQxHK+Sei0S1ut7b3X+afWxlOgpKUk7u107WWj0vq3rrbs3rZJyf8APdqy3YmJksYYowZVFsYUhUsGaIyOkTq7yrhQk7bSCifeAdjzd4JJTvt4/IAjEeIHkEDqYo433Zd382fYzzqWMMjyOI4o4vkr6P8Aib8H/Fvw18Yjwb44i+z/AOsGia8kU0umazYCV0t7mznXc7xEBFmtnR57GZ2guEQnzD5N/YE8OofYpYXjWeV7Z8hUG7c6I7CUBVBmwfvcMjqHDFq9CPLfmjZu2j6LWVna++/W+q8r8kXKPu77b+rWmu36t67t+dLA0T4ddrhgGHQ5y4BOM9M5Jz6ZJzmu18PeIdW0a5spLS9uofsNxHc2csE8iTWU6uXW4tGWQNDMjKrqUKksq/OrBHFO60w2txeWV3uju4RtgZY1eOSVJCrK0nmoER03GOVBKr4jXaGJYZ0cMiEb1dQMFW2nDruk3c5GRnI46EEZ+XBy0k25t6vtf+bu1ptpro0raM6aTmm+W9kryS2aTe6bXlbre9rn71fsh/tZ6f8AEyysPAXj69trXxxHEkOk6rK0MFv4rjiDeXFKQ+y219YwTJblguoArNaKJhJb1+kWnWMnkqNwJLjk+WWALOoUEAHqAcSE8EZbAAr+RjQNWutKvbe7tJ5oJbaaOaCW3meKWKVHLpJFKjB4pI5FV1dSGDhGUhstX7zfsYftjWfxCtdO+GnxI1GO18apHFa+H/EN3KsUHijaypDZXrsdsevEKqRzDCascrganlZ+TEYRpOUVdNX9VeXnddNG3razaR006qkpXTcVa6/l95Wd7Xs7NtK9tdXufo+ml4mLuvKBUDMhC7i0uT8qFsZ+bkjBJ6jLHwb9oX9mbwX+0B4Ml0fWoY9N8Q2Mc83hnxVBAr3uj3jqx2SKAGvNLunVRqGnu6iVds0Dw3kMNwv1hYQxzRNuUbsYYMMHIZsnPXHJAPJwAcjbWi+mqTI5QbcBlAP3QVI5bqdxDDaewPJYE1wwcqUrwbi0136Pr1X363eqbbJvBtxbVttbbp6Pd2ve6287pJn8h3xW+EPjT4N+L9T8GeM9Key1KyZWguYy8unapYSPKLfU9KvAqJdWF0EcpKoEkbrJZ3cUF9DcWy6nwT+M3i74JeLoPEvhi+KhmSDVtLuHkbS9Z0zexfTtRtg/zR5AktrqPF1ZXG2a3kBMiN/SL+0N+zh4L/aC8JXHh7xBbpaapbrNP4Z8TW9vG2q+H9SZXxKm5lF7p1y0apqelyyJHeQLG0UkN/DZXsP84Hxj+C3jT4H+N9S8F+N9LazvLfMlhexo7aZruneZKkGr6RdPHGbmyufLO3ciXFtOJbS8hivYZIV9elWpYmDhVV5JJNWvfXfW/XXXTXo46884On713ZbWXZuzv5O+m+uulmf0B/B/4u+FvjL4Us/FXhB42knK2/iHRZ5ohqvh2/CFjFcxopFwhYI9hdKI7e9tCZIpUlSa3X223iDyvvRTESAi7cPuV5Q4ALckrs2FepLcheT/ADQ/BD41eLPgp4ytPEfhy8KgNHb3+nXLMdM1XTvMLzabfwlhvgkBLwzpmexuNtzAyyqCf6Ivgx8WfBfxx8Fw+KPCt0nmpHEmueHrmSN9S0TUirOLe7RcCSCR0kk0+9QrDfW6tIhE6T28fmYrCOk3KCcqbtbTZ80t+lr+bs2k27KT0pSdS7Ttbl12T1klptvHba7ervp6CulRy+dt3bC3yCR2O0MX+Uk5UqM4C9g4BHc5Z0W3ghcthIELtvd2ULG3mlwGd/3aIuQgJKRrhQAsaiute8tbS1nur2aGyt4Y2aWa6ZI41VWkLb5HkjUH5OMlWAVQMkkH4q+Nf7Wvw+0DQ77S/C+pQ65qT5AjguFFvGI5CQ11IhkfaSp/cAFpGVI5goZiOSFOT92EXpvo9NZd38/Rrs791GFR2bulFq+rSdnPpfy9F7y66+2avq3h7RbO71DUtS0yysIInlNxJJGuEUs5Zwq7gxjwQm5mbgFcjFfEPxI/axtdGjvD4Z0vTbm1jlWGCW8IS7mXa+yX7O3MKyZDhWjBCOgYsRIo+HPH/wAdPFnju9u5L66laCVVghj82d1hiUou9Cz7Eln8tPNYRICoREKgk14w6anrlyWdpZJHzuZmd5HY+YGcFmyxJKZc5JIJztVq1lShSg3VmtEtE9tZdWn1Ud/K13HmO2EJ1HywTk9FovNr9PxW7TO4+Ifxb8SeP72BriaWJY7uSeFUllYpJJFPHJsCtFGoYSMcJGAq8AEmSQ+XWvh28vrlriVDM3lhsldxcLuHzKRlx+75Yb8ZJOSoFeoaL4FEklrJ87Rg/OMBnWRS+VnicD92/I3AEZYsd6qc+r2XgySLy54v9EkUOkqMkcoESEmNoQ+zduc54O8b84BBLeDiczpU3KMJpNdd5by6dFovNrZWUk/fweTznHnnBv4Xs7PV97vVrTT0Sacn4zpnhOR7RJY1WQoifaYzsTyz5j7fLBAdgUXk87SwBJL4F6fw9NcXbCCIiFIlPCusmY2lRnWKT5ssoRipJAjdCxA4r2+DQZrC6voVj82MSGeJ4EYLOksKbt5EscSnfuExmjEqgKSzDGKd7a3EaJb3cIkQy5jlRIWlRSkjosTtLyvzbSqfKWDjLZOfIeY807K8r2V23fd+fRa9d2tGtfWjl9OEGuSyikr2VtW11d3f56N3Std+GC3Yq0aC8mRDtaSSArGoQsPkdGB2bs7mC7Byd5Ip0mmBYA7NKgdk8ld0m1ipkPIKlGz22knG/kEOa7ZrlXnMcI3umV/e26gSI7NuC+QW5Utj5hjcOeXycm4CQArFalth3PMgZscuzMysS0bBQSxCZI3MGBOa6o1L77W31/vdLv8Al/PXTXF0+RyVla9ru2u9tG2+z7XbV24yb8I0f49+ObFm86ayv125KzWMMYG3efmkt1tyQQAM7iQcsCMNntk/aCv9ctJ7PWPDGjXtpNGsV1ATcvDPGVmV4zFNdTR4kUYyFbBJ3KSV3fI8V0GlJwThdoZjuOAzMSeAuWJOfkJwSMgBRXUaRb65q0wstLtb6+nkI8u0sraW4mb5nHywQI7NnBzhcEkAkYr9Fp0oWk7K+22u+92393Te6Z+VKc1ePXr/AJWTX5/NmzNHYSahO2j27wRXE88sWnhnlNlAZd0MQlkLPK2CkeTjdtL7ldWU/R3wL+NWpfDi+Gl6o9xfeEruRBd2oHmSaVM75e/sAxyACS95ZIVS4AaRCt0CTz/gT9nP4r66xvZNEi0G22gC51+5jtX+bBX/AECCO4v1Yqd6ia1jByQXByx6b4p/s/eL/hnpVj4p+1W3iDSJ4ov7eudNtrmKPRLt2aFTPHN88tpcNtWG/HlgzHybi3hJgeRrlcZQlqns/m+j+d/XfW41dNyW9lda99NbaNrW29+7P1h8L3un61pkOraXeQalpuqQW1zaXtrJvt5ImAIdX56yKd6sQ6ODE6iRJEHolnaA5DfMrEDGADjL55BGei89c4yMAMfx4+Afx31b4X6glhetNqXg3UJ0Oo6XvLS2EsjBf7T0pXdViuEChrm0yLe8TKyMtyIbkfsB4T1rRvEej6frOiahBqOlaisdzZ6haurwywsSjE85ikicGO4hlVZoJ1a3nRZEZK46uHcIvk0V76X1bbXr9nstZNu9lfWlUu5OT3Vtb73W/bXWPl2d7drplqI1LAMyBjH90YA565KnnGfXnGM4J6qHT1liPl4X5cfxHJ3PnOR6g4wwwAeDkscTT4jCzZ6M27LE/MuWG5RnPBKkgZAB6A4FdppRjMZJb5kYL904JBfGOcjg557A9BmuTkl0Tezuk9Vq73u91Z+t92a05JUqibs9bee3/DpdVdXaTZ5D8UPgp4Q+Lvg258K+LLYHImn0jVIYlXUtF1EJJHFe6bM6koy/duLeQmC6ts28yMCCPxB+Jnwk8XfBDxde+EfGkTNaXCxyeHPE8dqTpWrWcU5EN7DJt3xvCoWK8tizXOnXBWOaCW2eC4b+jzYs4KOmVIJyVKEN85Ofl3Z7lc4GV+Y8k+d/E34M+EPjH4NvvCfjCxWWyl+ezvovL/tHRb4JItvqulXTKxguYd3zqd9vcwNJa3UMtvJLGezCV5QbhUV46LVL+Z993s1rfu1qZtQlG6XvLdJPTVrm2aSej3TTvq9j+cXxVZQ6zZWd1J/x+pGF88QRW7RRGfUCsM8McaedG6xpdxTW/wAkYuVt44ysaMcbSreHUrJ9D1SSGxu4Fk/srXTemK0UyQkGG5URSRuZoWSGWaWWGSS28i1nZZIYBXu/xx+A/jX4HeKm8HeJyLnSpZJLjwj4sjWZdG1ax8zHnROQxsLqEGIanpkrPJYztvRprOW1v5fDpNKvb+KaZZFmurePypQSXt76GB5TuiY7S1wEdQqKolkiLyIFKFm9BRhNOySvblavprO17u2qtfqly7vQilVlCUk0nflVvRztrfs/xWjdzz68s3srp4zGsQIQqkUwuIgRvV9s6bgy+YjMELM6ZVJHZl3HsfCetz6LOZYoo51kA2+abiNoJo5N8V1bzW8sM0U9u+5omEvlhyDJHIwTFU2MOrwCG3VYJYgzBp2OWcKcxeYXEbK4KKszKGEiRoyIJBWfLY3emyLH... 
```

但是当我从我的可绘制资源中转换图像时，我得到了正确的 base64 字符串

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.icon);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.JPEG, 100, stream);
    byte[] byteArray = stream.toByteArray();
    String testa = Base64.encodeBytes(byteArray); 
```

任何朋友可以告诉我我在上面的代码中做了什么提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:22:15.423

试试这个。

```
File imageFile = new File("/sdcard/gallery_photo_4.jpg");
Bitmap bitmap = BitmapFactory.decodeFile(imageFile.getAbsolutePath());
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 90, stream);
byte[] image = stream.toByteArray();
String img_str = Base64.encodeToString(image, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T08:41:48.780

我敢说最后的点只是显示值的占位符，对于显示/打印输出为字节数组来说太长了。您的 base64 编码代码没有任何问题，但是您为什么要录制 JPEG？只需在字节数组中读取您的文件（不是一次性，而是分块，我会选择缓冲区大小为 4 的倍数），即时将其转换并将其写入输出流。

PS：在 android 中读取文件是不好的做法，因为内存非常有限 - 你的性能会很差。

这是示例代码，但我懒得编译或调试它：

```
while(( size = inputStream.read(inputBuffer)) != -1 ) {
    // arraycopy only if necessary
    outBuf = Base64.encodeBytes(System.arrayCopy(inputBuffer...))   
    outputStream.write(outBuf);
} 
```

虽然这不是最佳解决方案，因为 arraycopy 可能会复制数据（但这必须在最后一个块上完成）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T07:17:29.647

```
 // uris[] - the file uris array
  if (uris != null && !uris.isEmpty()) {
            for (int i = 0; i < uris.size(); i++) {
                // current image's uri

                // Uri u = Uri.fromFile(filepath)   - YOUR situation
                Uri u = uris.get(i);
                if (u != null) {
                    System.gc();
                    InputStream is = null;
                    byte[] data = null;
                    try {
                        is = mContentResolver.openInputStream(u);
                        // converting to byteArray / my Procedure
                        data = getFileBytes(is);
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
                    u = null;

                    // converting bytes to Base64
                    String data_string = 
                            Base64.encodeToString(data, Base64.URL_SAFE);

                    // my pairs for transfer, may not use
                    if( ! data_string.trim().equals("")){
                        nameValuePairs.add(
                                new BasicNameValuePair(
                                        "data[file_" + i + "]",
                                        data_string
                                )
                        );
                    }
                    data_string = null;
                }
            }
        }

        /* convert InputStream to Byte array procedure */
        public byte[] getFileBytes(InputStream ios) throws IOException {
            ByteArrayOutputStream ous = null;
            try {
                byte[] buffer = new byte[4096];
                ous = new ByteArrayOutputStream();
                int read = 0;

                while ((read = ios.read(buffer)) != -1)
                    ous.write(buffer, 0, read);
            } finally {
                try {
                    if (ous != null)
                    ous.close();
                } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                if (ios != null)
                    ios.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
        return ous.toByteArray();
    } 
```

还要检查你在哪里看到你的base64。如果调试 - 它将被削减！

**行。尝试我的代码将图像解码为您想要的 MPx。这是1兆像素：**

**使用：**

```
 minimizeBitmap(filePath, 1000000, true) 
```

**我的代码：**

```
 public Bitmap minimizeBitmap(String aPath, int aMps, boolean aSaveOrNot) throws FileNotFoundException {
    Uri aUri = null;
    {
        File f = new File(aPath);
        aUri = Uri.fromFile(f);
        f = null;
        System.gc();
    }

    InputStream in = mContentResolver.openInputStream(aUri);
    try {
        final int IMAGE_MAX_SIZE = aMps; 

        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(in, null, o);
        in.close();

        int scale = 1;
        while ((o.outWidth * o.outHeight) * (1 / Math.pow(scale, 2)) > IMAGE_MAX_SIZE) {
            scale++;
        }

        Bitmap b = null;
        in =  mContentResolver.openInputStream(aUri);

        aUri = null;
        if (scale > 1) {
            scale--;

            o = new BitmapFactory.Options();
            o.inSampleSize = scale;
            b = BitmapFactory.decodeStream(in, null, o);

            int height = b.getHeight();
            int width = b.getWidth();

            double y = Math.sqrt(IMAGE_MAX_SIZE
                    / (((double) width) / height));
            double x = (y / height) * width;

            Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, (int) x, (int) y, true);
            b.recycle();
            b = scaledBitmap;

            if (aSaveOrNot) {
                FileOutputStream out = new FileOutputStream(_fileName);
                b.compress(Bitmap.CompressFormat.JPEG, 85, out);
                out.close();
            }

            System.gc();
            return b;
        } else {
            b = BitmapFactory.decodeStream(in);
        }
        in.close();
//
//          Log.i("junr", "out getBitmap");
//          Log.i("junr", String.valueOf(Environment.getExternalStorageDirectory()));
        if (aSaveOrNot) {
            FileOutputStream out = new FileOutputStream(_fileName);
            b.compress(Bitmap.CompressFormat.JPEG, 85, out);
            out.close();
        }
        return b;
    } catch (IOException e) {
        Log.e("junr", e.getMessage(),e);
        return null;
    }

} 
```

# php - PHP中带有种子的MD5哈希

> ID：12668851
> 
> 赞同：2
> 
> 时间：2012-10-01T07:07:29.533
> 
> 标签：php, c, md5

我正在尝试在 PHP 中复制一部分用 C 编写的代码。这是原始源代码。

```
MD5Init( &ctx, seed );
MD5Update( &ctx, data, len );
MD5Final( &ctx ); 
```

我尝试使用以下 PHP 代码生成相同的 MD5 哈希：

```
$ctx = hash_init('md5', HASH_HMAC, $seed);
hash_update($ctx, $str);
$hash = hash_final($ctx); 
```

我在这两种情况下都使用相同的字符串和种子，但生成的哈希是不同的。发生这种情况有什么原因吗？如何生成在 C 中获得的相同哈希结果？

任何帮助将非常感激！

# java - 如何告诉 Java 运行这个 Runtime.getRuntime().exec，而无需等待它必须运行的任何命令，只需在后端运行它？

> ID：12668854
> 
> 赞同：8
> 
> 时间：2012-10-01T07:07:56.053
> 
> 标签：java, linux, swing

如何让 Runtime.getRuntime().exec(p) 在不等待 sleep 10 的情况下运行？目前它是错误的，它等到 exec 完成然后移动到下一个。我需要在飞行中让执行程序运行，以便在 10 秒后它可以杀死 PresentationInProjector.jpg。

```
Example:

   Runtime.getRuntime().exec("(sleep 10; echo '09|00|CC|01|83|88' | nc localhost 58888) &");
   PlayThisSlideShow("PresentationInProjector.jpg"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T07:16:35.717

根据文档[`exec()`：](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)

> 在单独的进程中执行指定的字符串命令。

因此，`exec()`除非您`waitFor()`在`Runtime`.

这是一个小例子（省略异常处理）：

```
Process p=Runtime.getRuntime().exec("cmd.exe /c ping 127.0.0.1 -n 10");

System.out.println("Here 1");//this will execute immediately

try {

    p.waitFor();

    System.out.println("Here 2");//this will only be seen after +- 10 seconds and process has finished

} catch (InterruptedException ex) {
   ex.printStackTrace(); 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T07:25:31.877

`exec()`默认情况下，不会让线程等待生成的进程结束。您需要`process.waitFor()`显式调用以使当前进程等待。我想那`PlayThisSlideShow("PresentationInProjector.jpg");`是在之后立即调用的`exec()`。您所看到的是，只要子进程正在运行，系统就会使 JVM 进程运行。我想没有办法轻松克服这个问题，在子进程仍在运行时杀死父进程。

为什么你不能从 Java 中杀死演示投影仪？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T07:50:04.263

```
Runtime.getRuntime().exec("(sleep 10; echo '09|00|CC|01|83|88' | nc localhost 58888) &"); 
```

不会做你所期望的。`Runtime.exec`不是外壳，不理解`()`分组`;`或`|`. 但是您尝试执行的操作可以纯粹在 Java 中完成，您不需要执行外部进程。例如（省略异常处理）：

```
new Thread(new Runnable() {
  public void run() {
    Thread.sleep(10000); //sleep 10
    Socket s = new Socket("localhost", 58888); // nc
    PrintWriter pw = new PrintWriter(s.getOutputStream());
    pw.print("09|00|CC|01|83|88\n"); // echo
    pw.close();
    s.close();
  }
}).start(); 
```

# javascript - 如何在 extjs 中获取父窗口或在 extjs 中等效的 window.opener？

> ID：12668855
> 
> 赞同：0
> 
> 时间：2012-10-01T07:07:59.003
> 
> 标签：javascript, silverlight, extjs, silverlight-5.0, extjs4.1

我正在使用`HtmlPage.Window.Navigate(Uri, "_blank");`银光启动一个窗口。我想从 extjs 卸载事件通知 silverlight 应用程序。

我正在**app.js中的 extjs 代码中尝试使用 window.opener**

```
Ext.EventManager.on(window, 'beforeunload', function () {
            //window.opener is undefined here
            } 
```

window.opener 是否有任何 extjs 等效项？或者如何从 extjs 获取父窗口？我正在尝试使用示例[http://www.codeproject.com/Articles/293515/Calling-Silverlight-Method-from-Javascript-and-Jav](http://www.codeproject.com/Articles/293515/Calling-Silverlight-Method-from-Javascript-and-Jav)从 javascript 调用 silverlight 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:51:21.993

我不认为这是一个 ExtJS 问题，而是浏览器支持。

看看这个问题： [window.opener 替代品](https://stackoverflow.com/questions/4885765/window-opener-alternatives)

# c# - String.Remove 给出错误

> ID：12668857
> 
> 赞同：-2
> 
> 时间：2012-10-01T07:08:23.697
> 
> 标签：c#

我将不同的文件名传递给下面的代码示例并得到如下错误。但是对于相同的数据，它在我端工作正常，但在客户端给出这些错误。

如果它可能由于其他原因而发生，请建议我。注意：这是一个维护代码，由其他人编写，我需要修复问题并尽可能改进它。

文件名示例：

```
222233334444555561_l.jpg
222233334444555561_l1.jpg

```

代码：

```
if (sFileName.LastIndexOf('_') != -1)
{
    if (fileName.IndexOf("l1") != -1)
        sVin = sFileName.Remove(sFileName.LastIndexOf('_'), 7);
    else
        sVin = sFileName.Remove(sFileName.LastIndexOf('_'), 6);
} 
```

在线错误：

```
sVin = sFileName.Remove(sFileName.LastIndexOf('_'), 7); 
```

这意味着输入样本会出现错误，例如：`222233334444555561_l1.jpg`

错误信息：

```
错误消息：System.ArgumentOutOfRangeException：索引和计数必须引用字符串中的位置。

参数名称：计数
  在 System.String.Remove（Int32 startIndex，Int32 计数）

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:17:46.037

```
string s = "222233334444555561_l1.jpg";
int underScorePos = s.LastIndexOf("_");
if (underScorePos != -1)
    s = s.Substring(1, underScorePos - 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:58:15.663

您可以简化它以避免 ArgumentOutOfRangeException 异常

```
 int lastIndex = sFileName.LastIndexOf('_');
        if (lastIndex != -1)
        {
            sVin = sFileName.Remove(lastIndex, sFileName.Length - lastIndex);
        } 
```

# html - 在四个动态的输出宽度 同一个班级不一样

> ID：12668858
> 
> 赞同：0
> 
> 时间：2012-10-01T07:08:27.240
> 
> 标签：html, css

我创建了四个共享同一个类的动态 li。但是在输出中所有 li 的宽度并不相同。您可以在浏览器中简单地尝试一下。

为什么会这样？如何纠正它？

```
body {
  margin: 0;
  padding: 0;
}

.div-nav {
  width: 100%;
  background-color: #CC3399;
  overflow: hidden;
  padding: 0;
}

.ul-nav {
  list-style: none;
  margin: 0;
  padding: 0;
  width: 100%;
}

.ul-nav li.space {
  background-color: black;
  width: 0.2%;
  height: 40px;
  margin-right: 20px;
  margin-left: 20px;
  float: left;
  padding: 0;
}
```

```
<div class="div-nav">
  <ul class="ul-nav">

    <li class="space"></li>
    <li class="space"></li>
    <li class="space"></li>
    <li class="space"></li>

  </ul>
</div>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:14:36.233

我看到的最大问题是您将这些 li 的宽度指定为“0.2%”，这对我来说只是显示为一条实心黑线，即使其中有内容。其次，您可能还指的是 li 之间的紫色比左侧多。那是因为您将左右边距设置为 20 像素。这意味着最左边的 li 距左侧 20 px，距下一个 li 的右侧 20px，其左侧有 20px 的边距。本质上，最左边的 li 的左边有 20 px，最右边的右边有 20px 的边距，它们之间有 40px (20 + 20)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:28:41.377

您需要向 ul 添加填充

```
.ul-nav{
    padding-left:20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T07:25:01.010

那是因为浏览器如何计算并舍入到整个像素。0.2% 宽度意味着 ~3.35px 宽度。

*（以下不是用中间的空格计算的，但它的工作原理是一样的）*

*   第一个 li 必须在 3.35px 标记处结束并四舍五入为 3px
*   第二个 li 必须在 6.70px 标记处结束并四舍五入为 7px（相差 4px！）
*   第三个 li 必须在 10.05 标记处结束并四舍五入为 10px（相差 3px）
*   第四个 li 必须在 13.40 标记处结束并四舍五入为 13px（相差 3px）

如果你继续这个序列，甚至更多行，你会注意到每隔几行，数字就会向上取整。

纠正它的最佳方法是使用固定尺寸。比如 2px 或 3px。

# python - 相关词的概率计数/频率？

> ID：12668861
> 
> 赞同：1
> 
> 时间：2012-10-01T07:08:34.477
> 
> 标签：python, string, comparison, counter, frequency

我正在寻找一种方法来为具有共同根词/含义的单个词生成数值概率值。

用户将使用诸如“舞者”、“跳舞”、“跳舞”之类的词来生成内容。

如果“dancer”被提交 30 次，跳舞 5 次，我只需要一个值“dance:35”就可以捕捉到所有这些。

但是，当用户还提交诸如“accordance”之类的词时，它不应该影响我的“dance”计数，而是与“according”和“accordingly”等词一起添加到一个单独的计数中。

另外，我没有预先定义的词根列表来查找。我需要根据用户生成的内容动态创建它。

所以我的问题是，实现这一目标的最佳方法可能是什么？我确信不会有完美的解决方案，但我认为这里有人可能会想出比我更好的方法。

到目前为止，我的想法是假设最有意义的单词至少有 3 或 4 个字母。因此，对于我遇到的每个长度大于 4 的单词，将其修剪为 4（“dancers”变为“danc”），检查我的单词列表以查看我以前是否遇到过它，如果是 - 增加它的计数，如果没有 - 将其添加到该列表中，重复。

我看到这里有一些类似的问题。但我还没有找到任何考虑根源的答案，我可以在 python 中实现。答案似乎是针对其中一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:33:09.750

您要查找的内容也称为**词干**（比语言“词根”更具技术性）。您假设没有完美的解决方案是正确的，所有方法要么分析不完善，要么缺乏覆盖。基本上最好的方法是使用包含词干的单词列表或词干算法。在此处查看第一个答案以获得基于 python 的解决方案：

[如何进行词干提取或词形还原？](https://stackoverflow.com/questions/771918/how-do-i-do-word-stemming-or-lemmatization)

我在所有基于 Java 的项目中都使用 Snowball，它非常适合我的目的（它也非常快，并且涵盖了多种语言）。它似乎也有一个 Python 包装器：

[http://snowball.tartarus.org/download.php](http://snowball.tartarus.org/download.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T09:02:10.403

您不需要用于 Java 库的 Python 包装器，nltk 有 Snowball！:)

```
>>> from nltk.stem import SnowballStemmer as SS
>>> stemmer = SS('english')
>>> stemmer.stem('dance')
u'danc'
>>> stemmer.stem('danced')
u'danc'
>>> stemmer.stem('dancing')
u'danc'
>>> stemmer.stem('dancer')
u'dancer'
>>> stemmer.stem('accordance')
u'accord' 
```

词干并不总是会给你确切的根源，但它是一个很好的开始。

以下是使用词干的示例。我正在构建一个字典，`stem: (word, count)`同时为每个词干选择最短的单词。`So ['dancing', 'danced', 'dances', 'dance', 'dancer'] converts to {'danc': ('dance', 4), 'dancer': ('dancer', 1)}`

**示例代码**：（*取自[http://en.wikipedia.org/wiki/Dance](http://en.wikipedia.org/wiki/Dance)的文本）*

```
import re
from nltk.stem import SnowballStemmer as SS

text = """Dancing has evolved many styles. African dance is interpretative.
Ballet, ballroom (such as the waltz), and tango are classical styles of dance
while square dancing and the electric slide are forms of step dances.
More recently evolved are breakdancing and other forms of street dance,
often associated with hip hop culture.
Every dance, no matter what style, has something in common.
It not only involves flexibility and body movement, but also physics.
If the proper physics are not taken into consideration, injuries may occur."""
#extract words
words = [word.lower() for word in re.findall(r'\w+',text)]

stemmer = SS('english')
counts = dict()

#count stems and extract shortest words possible
for word in words:
    stem = stemmer.stem(word)
    if stem in counts:
        shortest,count = counts[stem]
        if len(word) < len(shortest):
            shortest = word
        counts[stem] = (shortest,count+1)
    else:
        counts[stem]=(word,1)

#convert {key: (word, count)} to [(word, count, key)] for convenient sort and print
output = [wordcount + (root,) for root,wordcount in counts.items()]
#trick to sort output by count (descending) & word (alphabetically)
output.sort(key=lambda x: (-x[1],x[0]))
for item in output:
    print '%s:%d (Root: %s)' % item 
```

**输出**：

```
dance:7 (Root: danc)
and:4 (Root: and)
are:4 (Root: are)
of:3 (Root: of)
style:3 (Root: style)
the:3 (Root: the)
evolved:2 (Root: evolv)
forms:2 (Root: form)
has:2 (Root: has)
not:2 (Root: not)
physics:2 (Root: physic)
african:1 (Root: african)
also:1 (Root: also)
as:1 (Root: as)
associated:1 (Root: associ)
ballet:1 (Root: ballet)
ballroom:1 (Root: ballroom)
body:1 (Root: bodi)
breakdancing:1 (Root: breakdanc)
---truncated--- 
```

我不建议针对您的特定需求进行词形还原：

```
>>> from nltk.stem.wordnet import WordNetLemmatizer
>>> lmtzr = WordNetLemmatizer()
>>> lmtzr.lemmatize('dance')
'dance'
>>> lmtzr.lemmatize('dancer')
'dancer'
>>> lmtzr.lemmatize('dancing')
'dancing'
>>> lmtzr.lemmatize('dances')
'dance'
>>> lmtzr.lemmatize('danced')
'danced' 
```

子字符串不是一个好主意，因为它总是会在某个点失败，而且很多时候都失败得很惨。

*   固定长度：伪词 'dancitization' 和 'dancendence' 将分别匹配 4 和 5 个字符的 'dance'。
*   比率：低比率将返回假货（如上）
*   比率：高比率将不够匹配（例如“运行”）

但是有了词干，你会得到：

```
>>> stemmer.stem('dancitization')
u'dancit'
>>> stemmer.stem('dancendence')
u'dancend'
>>> #since dancitization gives us dancit, let's try dancization to get danc
>>> stemmer.stem('dancization')
u'dancize'
>>> stemmer.stem('dancation')
u'dancat' 
```

对于词干“danc”来说，这是一个令人印象深刻的不匹配结果。即使考虑到“dancer”并不源于“danc”，总体而言准确度还是相当高的。

我希望这可以帮助您入门。

# python - netflow v9 中的字段 ID 不正确

> ID：12668864
> 
> 赞同：1
> 
> 时间：2012-10-01T07:08:49.283
> 
> 标签：python, cisco, netflow

在分析 Netflow V9 时，我能够正确获取大多数字段 id 及其值，如

[http://www.iana.org/assignments/ipfix/ipfix.xml](http://www.iana.org/assignments/ipfix/ipfix.xml)

但我得到 40000 ,40001, 40002, ... 而不是 224, 225, 226, ... 对于 NAT 文件，但是我检索到的每个字段的值都是正确的。

我确信所有字段的 id 和 value 都正确获得。我不知道真正的问题是什么。我尝试将主机转换为网络字节，反之亦然

```
field_type = socket.ntohs(struct.unpack('H', template_data[a:b])[0]) 
```

PS我使用cisco路由器进行netflow v9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:15:07.157

Cisco 不使用 IPFIX，而是使用 NetFlow v9。虽然 IPFIX 源自 Cisco 的 NetFlow v9 规范，但还是有一些区别。其中之一是 IPFIX 允许使用 PrivateEnterpriseNumber 在字段类型编号中为每个供应商命名空间。NetFlow v9 没有这样的功能，因此供应商必须任意选择一个数字范围来报告他们的自定义字段，并希望没有其他人选择相同的范围。在这种情况下，我猜您是从 Cisco ASA 获得 NetFlow 票证的，它确实使用了 40000-40005 范围内的多个字段。

有一个名为“ [Cisco ASA 5500 Series Implementation Note for NetFlow Collectors, 8.3](http://www.cisco.com/en/US/docs/security/asa/asa83/netflow/netflow.html) ”的文档描述了这些字段。

# php - 为什么 PHP socket_select() 在客户端发送数据时无法检测到更改

> ID：12668869
> 
> 赞同：2
> 
> 时间：2012-10-01T07:09:13.457
> 
> 标签：php, browser, websocket

我正在编写一个 WebSocket 服务器。虽然握手成功并且服务器可以使用 RFC 标准发送编码数据，但 socket_select() 只能在连接新客户端时检测更改，而不是在客户端向服务器发送数据时检测到更改。怎么了？

```
class Server{
private $address;
private $port;
private $master;
private $sockets;
private $stream_sockets;
private $clients;
private $verbose_mode;

    function __construct($address = '127.0.0.1', $port = 5001, $verbose_mode = true){
        $this->address = $address;
        $this->port = $port;
        $this->verbose_mode = $verbose_mode;
        $this->console("Socket server is starting...");

        //socket creation
        $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
        if(!socket_set_option($socket, SOL_SOCKET, SO_REUSEADDR, 1))
        {
            $this->console("Failed to set socket option: ".socket_strerror(socket_last_error()));
        }

        if(!socket_set_nonblock($socket))
        {
            $this->console("Failed to set socket nonblock: ".socket_strerror(socket_last_error()));
        }

        if(!is_resource($socket))
        {
            $this->console("Failed to create socket: ".socket_strerror(socket_last_error()));
        }
        if(!socket_bind($socket, $this->address, $this->port))
        {
            $this->console("Failed to bind socket: ".socket_strerror(socket_last_error()));
        }
        if(!socket_listen($socket, 20))
        {
            $this->console("Failed to listen: ".socket_strerror(socket_last_error()));
        }
        $this->master = $socket; //add current socket resource as master socket
        $this->sockets = array($socket);//add current resource to all sockets
        $this->console("Socket server started on {$this->address}:{$this->port}");
    }

    public function run(){
        $this->console("Start running...");
        $write = array();
        $except = array();
        while(isset($this->sockets[0])){
            $changed_sockets = $this->sockets;
            $result = socket_select($changed_sockets, $write, $except, 1 ,0);
            //@stream_select($changed_sockets, $write = null, $except = null, 0, 5000);
            if($result > 0)
            {
                $this->console("number of sockets: ".count($this->sockets));
                $this->console("number of changed sockets: ".$result);
                foreach($changed_sockets as $socket)
                {
                    if($socket == $this->master)//self changed
                    {
                        if(($accepted_socket = socket_accept($this->master))!== false)//incoming connection
                        {
                            $this->connect($accepted_socket);//add as a client to the pool with info to be tracked without handshaking at first
                        }
                        else
                        {
                            $this->console("Socket error: ".socket_strerror(socket_last_error()));
                        }
                    }
                    else //must be others in sockets pool
                    {   
                        $this->console("Finding socket associated with the client...");
                        $client = $this->get_client_by_socket($socket); //get client object to track them using socket that they are associated with
                        if($client){
                            $this->console("receiving data from the client.");
                            $bytes = @socket_recv($socket, $data, 2048, MSG_DONTWAIT);
                            $this->console("byte size received: $bytes");
                            if(!$client->get_handshake())//check if handshaking has done
                            {
                                $this->console("handshaking...");
                                $this->handshake($client, $data);//handshaking if it is not done previously
                            }
                            else if($bytes === 0)
                            {
                                $this->disconnect($client);
                            }
                            else
                            {
                                $this->console("incoming data from client {client->get_id()}");
                                $this->read($client, $data);//read from client if there are changes in sockets
                            }
                        }
                    }
                }
            }
        }
    }

    private function slingshot($client, $read){
        $send="00:00:00:00".",DM,SAY,0,".$read;
        fwrite($client->get_stream_socket(), $send);//output to apollo
        //workaround for apollo
        if($client->get_initial())
        {
            $initial = 7;
            $continue = 0;
        }
        else
        {
            $initial = 8;
            $continue = 1;
        }
        while(TRUE)
        {   
            //input from iris
            $num = fgets($client->get_stream_socket(), $initial);//$number of words
            if(ltrim($num) > 0)
            {
                $res = fgets($client->get_stream_socket(), ltrim($num)+1);
                if($res!="")
                {
                    fgets($fp,1);
                    $client->set_initial(false);
                    $res = $num.$res;
                    $res = substr($res,6+$continue);
                    //output to client
                    $message = rtrim($res);
                    send($client, $message);
                    break;
                }
            }
        }
    }

    private function read($client, $received){
        $read = $this->unmask($received);
        $this->console("received from client: ".$read);
        if($read == "##client exit##") {
            $this->console("Killing a child process");
            posix_kill($client->get_pid(), SIGTERM);
            $this->console("Process {$client->get_pid()} is terminated.");
        }
        else
        {
            $this->console("start a child process");
            $pid = pcntl_fork();
            if($pid == -1)
            {
                die('could not fork.');
            }
            else if($pid)
            {
                $client->set_pid($pid);
            }
            else
            {
                //we are the child
                $this->slingshot($client, $read);
            }
        }
    }

    private function disconnect($client){
        $this->console("Disconnecting client #{$client->get_id()}");
        $i = array_search($client, $this->clients);//search client in clients pool
        $j = array_search($client->get_socket(), $this->sockets);//search client's socket in socket pool
        if($j >= 0)
        {
            array_splice($this->sockets, $j, 1);
            socket_close($client->get_socket());
            $this->console("Socket closed.");
        }
        if($i >= 0)
        {
            array_splice($this->clients, $i, 1);
        }
        $this->console("Client #{$client->get_id()} disconnected.");
    }

    private function unmask($payload) {
        $length = ord($payload[1]) & 127;
        if($length == 126)
        {
            $masks = substr($payload, 4, 4);
            $data = substr($payload, 8);
        }
        elseif($length == 127)
        {
            $masks = substr($payload, 10, 4);
            $data = substr($payload, 14);
        }
        else
        {
            $masks = substr($payload, 2, 4);
            $data = substr($payload, 6);
        }

        $text = '';
        for ($i = 0; $i < strlen($data); ++$i){
            $text .= $data[$i] ^ $masks[$i%4];
        }

        return $text;
    }

    private function encode($text){
        // 0x1 text frame (FIN + opcode)
        $b1 = 0x80 | (0x1 & 0x0f);
        $length = strlen($text);

        if($length <= 125)
        {
            $header = pack('CC', $b1, $length);
        }
        elseif($length > 125 && $length < 65536)
        {
            $header = pack('CCS', $b1, 126, $length);
        }
        elseif($length >= 65536)
        {
            $header = pack('CCN', $b1, 127, $length);
        }
        return $header.$text;
    }

    private function send($client, $text){
        $this->console("Client {$client->get_id()}<<".$text);
        $text = $this->encode($text);
        if(socket_write($client->get_socket(), $text, strlen($text)) === false) {
            $this->console("Unable to write to client #{$client->get_id()}'s socket");
            $this->disconnect($client);
        }
    }

    private function start_process(){
        $this->console("start a child process");
        $pid = pcntl_fork();
        if($pid == -1)
        {
            die('could not fork.');
        }
        else if($pid)
        {
            $client->set_pid($pid);
        }
        else
        {
            //we are the child
            $this->send($client, "something to be sent.");
        }
    }

    private function handshake($client, $headers){//data as headers
        $this->console("Getting client WebSocket version...");
        if(preg_match("/Sec-WebSocket-Version: (.*)\r\n/", $headers, $match))
        {
            $version = $match[1];
        }
        else
        {
            $this->console("The client doesn't support WebSocket.");
        }
        $this->console("Client WebSocket version is {$version}, (required: 13)");
        if($version == 13)
        {
            $this->console("Getting headers...");
            if(preg_match("/GET (.*) HTTP/", $headers, $match))
            {
                $root = $match[1];
            }
            if(preg_match("/Host: (.*)\r\n/", $headers, $match))
            {
                $host = $match[1];
            }
            if(preg_match("/Origin: (.*)\r\n/", $headers, $match))
            {
                $origin = $match[1];
            }
            if(preg_match("/Sec-WebSocket-Key: (.*)\r\n/", $headers, $match))
            {
                $key = $match[1];
            }

            $this->console("client Headers are:");
            $this->console("\t- Root: ".$root);
            $this->console("\t- Host: ".$host);
            $this->console("\t- Origin: ".$origin);
            $this->console("\t- Sec-WebSocket-Key: ".$key);

            $this->console("Generating Sec-WebSocket-Accept key...");
            $acceptKey = $key.'258EAFA5-E914-47DA-95CA-C5AB0DC85B11';
            $acceptKey = base64_encode(sha1($acceptKey, true));

            $upgrade = "HTTP/1.1 101 Switching Protocols\r\n".
                       "Upgrade: websocket\r\n".
                       "Connection: Upgrade\r\n".
                       "Sec-WebSocket-Accept: $acceptKey".
                       "\r\n\r\n";

            $this->console("sending this response to the client #{$client->get_id()}:\r\n".$upgrade);
            socket_write($client->get_socket(), $upgrade);
            $client->set_handshake(true);
            $this->console("Handshake is successfully done!");
            return true;
        }
        else
        {
            $this->console("WebSocket version 13 is required (the client supports version {$version})");
            return false;
        }
    }

    private function get_client_by_socket($socket){
        foreach($this->clients as $client)//get all client objects from the pool and check one by one
        {
            if($client->get_socket() == $socket)//if socket returned from the client matches with parameter
            {
                $this->console("client found");
                return $client;
            }
        }
        return false;//no such client
    }

    private function connect($socket){
        $this->console("creating client...");
        $client_id = uniqid();
        while(true){
            $stream_socket = @stream_socket_client("tcp://127.0.0.1:10000", $errno, $errstr);
            if($stream_socket)
            {
                $this->console("Apollo client created for client #$client_id.");
                break;
            }
            else
            {
                $this->console("creation failed. Attempting to recreate Apollo client.");
            }
        }
        $client = new Client($client_id, $socket, $stream_socket);
        $this->clients[] = $client; //add the socket as client to be tracked
        $this->sockets[] = $socket;//add socket as resource to sockets pool
        $this->stream_sockets[] = $stream_socket;//add socket as resource to stream sockets pool
        $this->console("Client #{$client->get_id()} is successfully created!");
    }

    private function console($text, $continue = true){
        if(!$continue)
        {
            die($text);
        }
        if($this->verbose_mode)
        {
            echo date('[Y-m-d H:i:s] ').$text."\r\n";
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:40:59.913

我发现要使套接字选择能够检测来自客户端的数据，套接字服务器必须在握手后立即向客户端发送一条虚拟消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:16:11.320

那是因为您必须使用 接受新的传入连接[`socket_accept()`](http://sg2.php.net/socket_accept)，并传入您使用的套接字`socket_listen()`。

生成的套接字可用于按预期检查传入数据。

**编辑**

您似乎忘记`$write = $this->sockets;`在调用`socket_select()`.

# php - 使用 jquery 循环插件为图像动态添加超链接以进行转换

> ID：12668870
> 
> 赞同：0
> 
> 时间：2012-10-01T07:09:18.533
> 
> 标签：php, jquery, css, jquery-plugins, jquery-cycle

我正在使用 jquery[循环插件](http://jquery.malsup.com/cycle/int.html)进行幻灯片放映。现在一切正常，直到我向图像添加超链接。如果用户希望添加，我正在尝试添加超链接，所以我在控制台中为每个图像都有一个设置按钮。如果用户选择一个超链接并单击设置，它应该设置。现在超链接设置正确，但是，过渡将应用于**锚**标签而不是**img**标签。当我设置链接时，img 标签被包裹在这样的锚标签内。

```
 <a href="www.google.com" id="link" class="link"> 
        <img id="imgBoxRot_1_1" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px; display: none; z-index: 3; opacity: 0;" src="http://localhost/images/layout/slideShow/gallImg1.jpg">
     </a> 
```

我像这样动态创建这个锚标记，并将其附加到图像中。

```
 var newA = document.createElement("a");
    newA.setAttribute("id","lnkImgRotImg_"+iCount+"_"+idT);
    newA.setAttribute("href",document.getElementById(lnk).value);
    newA.setAttribute("class","aTransLink");
    newA.setAttribute("target","_blank"); 
```

在设置锚标记之前，插件可以正常工作并应用过渡，但是在向图像添加锚之后，过渡将应用于锚标记而不是图像。我该如何解决这个问题？
谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:31:33.777

在研究了插件文档后，我了解到，该插件默认应用于它所应用的 div 内的**第一个标签。**
也就是说，如果我们有

```
<div class="">
     <img></img>
     <img></img>         
</div> 
```

现在，如果我像这样在图像周围包裹一个锚点，

```
<div class="">
     <a href="">
       <img></img>
     </a>

     <img></img>         
</div> 
```

该插件在图像标签和锚标签之间混淆，并将过渡应用于**锚而不是图像标签**（因为它是应用循环插件的 div 之后的第一个）。因此，我最初将所有图像都包装在一个锚标记中（**之前我动态添加了锚**）并将插件应用于锚本身而不是图像标签。

# java - 如果条件不能正常工作

> ID：12668871
> 
> 赞同：1
> 
> 时间：2012-10-01T07:09:20.323
> 
> 标签：java, jsp, servlets

实际上我在这段代码中遇到了逻辑问题

*问题*：虽然我输入了正确的 emp_id 和密码，但 if 部分运行正常，但只要我尝试运行此页面（运行方式->在 Server-Tomcat 服务器上运行），就在此 if 条件下......它将进入 else 条件——这使我无法在 if 子句中运行 jsp 页面。

```
 else {
              resp.setStatus(HttpServletResponse.SC_BAD_REQUEST);

                          } 
```

*当它满足 if 子句时，我也想运行 jsp 页面。*

这是我的代码：

```
 try {
          String url="jdbc:mysql://localhost/app";
          Class.forName("com.mysql.jdbc.Driver");
          Connection con=DriverManager.getConnection(url,"****","******");
          stmt = con.prepareStatement("select * from ofc where emp_id=? and password=?");
          stmt.setString(1, employee);
          stmt.setString(2, password);

          ResultSet rs = stmt.executeQuery();

          if(rs.next()) {  //I want to print this jsp page for this If condition
              System.out.println("2> Employee Id : "+employee+" && Password : "+password);
              System.out.println("3> This employee "+employee+" exsists in the database and will be there");      

              resp.setContentType("text/html");
              PrintWriter out = resp.getWriter();
              out.print("<html><body>");       // It's my JSP page,& start from here
              out.print("<head>");
              out.print("<title>Policy Page</title>");
              out.print("</head>");
              List<String> devices = Store.getDevices();
              if (devices.isEmpty())
              {
                out.print("<h2>No  One is there!</h2>");
              } 
              else
              {    
               out.print("<h2>" + devices.size() + " device(s) are there!</h2>");
               out.print("<form name='form' method='POST' action='sendAll'>");
               out.print("<input type='text' name='policy'>");
               resp.setStatus(HttpServletResponse.SC_OK);
               out.print("<input type='submit' value='Apply Policy'>");
               out.print("</form>");
//             getServletContext().getRequestDispatcher("/home").forward(req, resp);

              }
              out.print("</body></html>");       //Completes here
              resp.setStatus(HttpServletResponse.SC_OK);

          }

          else {
              resp.setStatus(HttpServletResponse.SC_BAD_REQUEST);

                          }
      }
      catch(Exception e) {
          e.printStackTrace();
      } 
```

我哪里出错了……在这个编码环境中……//

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:18:42.033

您可以识别和解决此问题的步骤。

1.  检查用户名、密码是否存在于表中
2.  尝试添加`employee.trim()`，`password.trim()`如果有任何额外的空格。`employee`如果or`password`的值为空，您将获得 NullPointerException 。所以这就是原因。然后检查 null 然后再次尝试`trim()`
3.  在查询之前打印结果，这样你就会知道你做错了什么。
4.  如果您使用的是请求参数，那么您需要在 URL 中传递它`?employeeid=someId&password=somepass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:22:58.030

当您调试代码时，调试器是否进入 IF 语句 - 实际上是在 IF 语句的内括号内输入，还是仅评估 IF 语句（将其评估为“IF（False）”）然后移动在 else 语句上？

也许您的 mySQL 查询没有返回任何结果？尝试使用 HasRows 属性。

```
if (rs.HasRows) 
{ 
    while (rs.Read()) 
    { 
        // do stuff
    } 
    } 
    else 
    { 
       // notify user that query returned no results
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T07:23:30.307

您的结果集是空的，这就是您进入 else 语句的原因。尝试直接在数据库上执行SQL，你得到任何记录吗？

我不确定这是否能解决您的问题（这取决于您的调试是否仅基于输出检查代码）但您的 HTML 结构是错误的：它应该是这样的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   <HEAD>

   </HEAD>
   <BODY>

   </BODY>
</HTML> 
```

您将 HEAD 部分混合到 BODY 中。

# c# - 在winforms中为“可见”属性设置动画

> ID：12668874
> 
> 赞同：1
> 
> 时间：2012-10-01T07:10:09.940
> 
> 标签：c#, winforms, animation, button, label

我有一个名为`label1`. 当用户单击`button1`时，我的标签变得不可见：

```
label1.Visible = false; 
```

我可以做些什么来为这个属性设置动画（对于 WinForms）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:06:09.037

您可以在表单的背景颜色（如果有效，则为透明）和最终颜色之间逐渐修改标签的文本颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T07:27:44.190

实际上，WinForms 并不像 WPF 那样支持动画。您将不得不使用自定义解决方案。例如，您可以考虑使用 GDI+。

*   制作标签的“图像”（[示例）](http://www.dreamincode.net/code/snippet3897.htm)
*   将标签的可见性设置为 false。
*   使用 GDI 绘制位图，使用较少的不透明度来模拟不透明度淡入淡出。

# android - 从启动我的应用程序的链接中获取更多信息

> ID：12668877
> 
> 赞同：0
> 
> 时间：2012-10-01T07:10:26.687
> 
> 标签：android

我的应用程序在单击链接时启动。

但是该链接包含我的应用所需的其他信息。

链接是这样的：

[http://update_app_config.com?parameter1='value1'¶meter2='value2'¶meter3='value3](http://update_app_config.com?parameter1=) '

我可以获得一个包含参数和值的键值对对象还是我必须自己解析它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:41:57.547

`getIntent().getUri()`将返回一个`Uri`对象，该对象表示用于启动您的应用程序的链接。然后，您可以调用 和 之类的方法`getQueryParameterNames()`来`getQueryParameters()`访问查询参数（？右侧的东西）。

# php - 为什么我的xampp中的mysql内容不能用php脚本显示？

> ID：12668879
> 
> 赞同：2
> 
> 时间：2012-10-01T07:10:35.607
> 
> 标签：php, mysql

我在 xampp 中创建了一个数据库，制作了一个非常简单的 php 脚本，可以访问/连接到 xampp 中的 mysql（将其保存到 xampp/htdocs）。连接没问题，但是当我在浏览器上运行它时，只出现了我在php中创建的一个表，而mysql中的数据没有。可能是什么问题呢？

这是php代码：

```
<?php

// Make a MySQL Connection

mysql_connect("localhost", "root", "password") or die(mysql_error());

mysql_select_db("test") or die(mysql_error());

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM example") 
or die(mysql_error()); 

echo "<table border='1'>";
echo "<tr> <th>Name</th> <th>Age</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
// Print out the contents of each row into a table
echo "<tr><td>"; 
echo $row['name'];
echo "</td><td>"; 
echo $row['age'];
echo "</td></tr>"; 
} 

echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:25:12.133

如果您刚开始使用 PHP 和 MySQL，为什么不开始学习 PDO，因为`mysql_*`函数已被弃用。

确保`example`表格中有数据，与 PHPMyAdmin 核对并遵循[这个不错的指南](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

您的代码应该是：

```
<?php
    $db = new PDO('mysql:host=localhost;dbname=test;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));

    echo "<table border='1'>";
    echo "<tr> <th>Name</th> <th>Age</th> </tr>";

    $stmt = $db->query("SELECT * FROM example");
    while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        echo "<tr><td>"; 
        echo $row['name'];
        echo "</td><td>"; 
        echo $row['age'];
        echo "</td></tr>"; 
    }

    echo "</table>";
?> 
```

# node.js - Node js和express js的区别

> ID：12668880
> 
> 赞同：93
> 
> 时间：2012-10-01T07:10:37.507
> 
> 标签：node.js, express

我是节点 js 的新手。express JS有什么用？据我了解，它用于网络项目，并有一些模板，如 Jade 和 CSS。

express.js 中是否还有其他额外功能使其比 node.js 更具主导性？在服务器端编码方面，node.js 和 express.js 哪个更好？差异。Express.js 和 node.js 之间。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-10-01T07:19:32.167

比较并不完全正确。node.js 和 express.js 在抽象层次上的区别：

1.  Node.js 是一个*运行时环境*，用于使用 javascript构建服务器端*事件驱动的 i/o 应用程序。*
2.  Express.js 是一个*基于 node.js 的框架，*用于使用 node.js 的原理和方法构建*Web 应用程序*

因此，如果您编写 web 应用程序，您可以尝试使用 Express.js。在所有其他情况下，它不适合您。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-01T07:19:21.543

Express 建立在 Node 之上，所以是的，Express 添加了更多功能。Node 只是一个带有库的 Javascript 环境，可以轻松编写软件，其中 Express 专门扩展了 Node 以使 Web 服务器易于编写。

Express/Connect 添加了中间件的概念，一种管理不同路由的简化方式，与多个模板引擎的自动集成等等。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-01T07:19:19.113

Express js 构建在 Node.js 框架之上。

Express js 使用 node.js 本身，并提供更多功能以在 Node.js 之上构建应用程序

[http://expressjs.com/](http://expressjs.com/)，如果您查看此链接本身，它会显示**Express - node.js Web 应用程序框架。**

# abap - 从更改指针发送 DEBMAS 的完整主数据对象

> ID：12668881
> 
> 赞同：1
> 
> 时间：2012-10-01T07:10:39.380
> 
> 标签：abap, sap-erp, idoc

我需要将完整的 DEBMAS 和完整的 MATMAS idoc 发送到我的其他系统。我能够在更改时创建和发送 MATMAS 和 DEBMAS idocs，但它只发送更改后的（增量）数据。所以我对 FM: CHANGE_POINTERS_READ 做了一个增强，它是这样的：

```
ENHANCEMENT 1  ZSEND_COMPLETE_IDOCS.    "active version

  field-symbols <fs_bdcp> type bdcp.

  if message_type = 'DEBMAS' or message_type = 'MATMAS'.

    loop at change_pointers assigning <fs_bdcp>.

      <fs_bdcp>-fldname = 'ALELISTING'.

    endloop.
  endif.

ENDENHANCEMENT. 
```

然而，这只适用于MATMAS。当我在 MM02 中更改材料时，我的 idoc 会创建完整的段，而不仅仅是更改的段。但是，此增强功能不适用于 DEBMAS！？！？有谁知道为什么？

我需要了解如何将我的 DEBMAS idoc 完全发送到我的其他系统。

提前致谢。

塔尔哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:57:09.577

自己解决了。您需要使用`BD12`tcode 才能发送完整的 idoc `DEBMAS`，其他方式无法正常工作。

# iphone - 应用内购买，由于处理时间长而取消购买

> ID：12668882
> 
> 赞同：3
> 
> 时间：2012-10-01T07:10:44.933
> 
> 标签：iphone, ios, xcode, storekit

我正在为我的游戏实施应用内购买，并且运行良好。购买和其他东西没有问题。但是今天我被困在一个奇怪的地方。

当用户尝试购买时，有时需要超过一分钟才能得到 Apple 的回复。（沙盒环境）。

我想要做的只是在一个中放置一个取消按钮`UIAlertView`，这将帮助用户取消整个购买。因此，如果 Sandbox 响应延迟，用户可以取消购买。我怎样才能做到这一点 ？

我已经有一个 UIAlertView，它以单击购买按钮开始并以`SKPaymentTransactionStatePurchased`方法结束。我想将该取消按钮添加到该警报视图。

很困惑，这又是我的问题，

但是应该调用什么方法来取消处于`SKPaymentTransactionStatePurchasing`状态的整个应用内进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:55:45.857

一旦发送请求，您就不能中断请求。您应该等到 Apple 做出回应。

# sed - 如何使用 sed 或 awk 删除所有具有空白字段的行？

> ID：12668883
> 
> 赞同：1
> 
> 时间：2012-10-01T07:11:00.440
> 
> 标签：sed, awk

我想从文本文件中删除所有具有空白字段的行。如何更改以下代码以直接对文件进行更改？

```
awk '!/^\t|\t\t|\t$/' *.txt    

AD  125.9    MN 124.9
AC  38.9     VG 13.2
AV  34.6     BG 33.0
GL  126.2   
CY  34.9    
CY  44.9 
```

期望的输出

```
AD  125.9    MN 124.9
AC  38.9     VG 13.2
AV  34.6     BG 33.0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T08:22:53.750

替代 awk 单线：

```
awk 'NF==4' yourFile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T09:45:15.487

一种使用方式`GNU sed`：

```
sed -n -s -i '/[^ \t]* [^ \t]* [^ \t]* [^ \t]/p' *.txt 
```

结果：

```
AD  125.9    MN 124.9
AC  38.9     VG 13.2
AV  34.6     BG 33.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T08:24:04.343

假设您的文件最多有 4 个字段：

```
awk '{for(i=1;i<5;i++){if($i=="")next;}print}' file_name 
```

测试如下：

```
> cat temp
AD      125.9    MN     124.9
AC      38.9     VG     13.2
AV      34.6     BG     33.0
GL      126.2
CY      34.9
CY      44.9
>awk '{for(i=1;i<5;i++){if($i=="")next;}print}' temp
AD      125.9    MN     124.9
AC      38.9     VG     13.2
AV      34.6     BG     33.0
> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T08:02:07.077

您可以在原始 awk 命令中使用 for 循环：

```
for f in *.txt
do
  cp $f /tmp/mytempfile
  awk '!/^\t|\t\t|\t$/' /tmp/mytempfile > $f
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T08:02:24.370

使用您的输入这可能有效（但这取决于是否有空格或制表符）：

```
sed '/^.\{13\}\s/d' INPUTFILE 
```

或这个：

```
awk 'substr($0,14,1) = " " { print }' INPUTFILE 
```

# php - 从服务器连接到客户端数据库

> ID：12668885
> 
> 赞同：0
> 
> 时间：2012-10-01T07:11:05.523
> 
> 标签：php, mysql

> **可能重复：**
> [用 php 连接外部 mysql 数据库](https://stackoverflow.com/questions/1698655/connecting-external-mysql-database-with-php)

我设计了一个表格。*当我使用 wamp 在本地机器上执行时*，表单中输入的数据会保存在我的本地机器数据库以及服务器数据库中。我在服务器上上传的同一个文件，当我输入数据时，数据只保存在我的服务器数据库中。数据没有保存在我的本地数据库中。有什么方法可以从服务器连接到本地机器数据库。我用于编码的语言是 php/mysql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:13:51.403

> 有什么方法可以从服务器连接到本地机器数据库

就在这里。您只需将本地数据库配置为接受来自运行脚本的远程主机的连接，并为脚本提供数据库服务器的 WAN 主机名和端口。

这没什么特别的，是一种标准的数据库配置。数据库供应商将针对您的特定配置在您的个别问题中为您提供更专门的支持，您可能还想尝试 Mysql 支持论坛和邮件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:16:25.593

当然你可以......只需要：你需要一个用于服务器连接的 dns 或 ip（你可以简单地使用 dyndns 免费获得一个）并且你需要在你的“调制解调器”上打开端口 3306 或其他任何东西并将其转发到您的 wamp-server ....

# jsf - 带有可切换字段集的 Primefaces ScrollPanel

> ID：12668890
> 
> 赞同：2
> 
> 时间：2012-10-01T07:11:18.687
> 
> 标签：jsf, primefaces

我有一个 Primefaces 滚动面板，它有一个数据表和一个 Primefaces 可扩展字段集，默认情况下它是折叠的。我的滚动面板有固定的高度。现在的问题是，每当我展开 Primefaces 字段集时，滚动面板中存在的一些数据表部分会被截断，因为展开的字段集占用了空间。谁能告诉我如何解决这个问题？

提前致谢

# algorithm - 紧凑的图像缩略图的布局算法

> ID：12668891
> 
> 赞同：3
> 
> 时间：2012-10-01T07:11:19.760
> 
> 标签：algorithm, thumbnails, heuristics, packing, rectangles

我正在处理图片库，我想紧紧地打包图片缩略图。缩略图是：

*   不同的纵横比
*   在相同的源分辨率下可用（最长边 256 像素）

我想提出一个最佳解决方案（可能必须是启发式的），让我能够平衡：

*   每个缩略图之间的填充（最好是恒定的）
*   缩略图大小的一致性（最好都是相同的大小）
*   为显示裁剪的每个图像的数量（最好没有）
*   与其排序顺序一致的图像的接近度（最好排序邻居在网格中彼此靠近）

我认为这是[矩形包装问题](http://en.wikipedia.org/wiki/Packing_problem#Different_rectangles_in_a_rectangle)的变体。

我找到了一些很好的参考：[Fast Optimizing Rectangle Packing Algorithm for Building CSS Sprites](http://www.codeproject.com/Articles/210979/Fast-optimizing-rectangle-packing-algorithm-for-bu)

但我想咨询专家，看看是否有人知道：

*   任何公开可用的既定算法，
*   任何实现它们的开源库或
*   任何其他可能帮助我产生与以下内容一样好的数学参考或指导：http: [//labs.tineye.com/multicolr#colors=4b669e](http://labs.tineye.com/multicolr#colors=4b669e;weights=100) ;weights=100 ；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-15T10:57:54.177

我想出了这样的东西（现在也有 github 上的代码） [https://mendrik.github.io/diorama/](https://mendrik.github.io/diorama/)

我应该补充一点，顺序是随机的，尺寸尽量统一，但对我来说，填满整个空间比保持尺寸一致更重要。您可以调整浏览器窗口的大小以查看其工作方式。

如果您的身高不固定，还有其他几种选择，主要是背包或分区算法。2d bin 支持会给您留下空白或找不到始终适合所有图像的解决方案。

我的算法几乎没有裁剪，并且总是适合所有图像到给定的空间，只要有足够的组合可以这样做。图像越少，裁剪越明显。

# css - 如何居中输入收音机

> ID：12668892
> 
> 赞同：2
> 
> 时间：2012-10-01T07:11:20.610
> 
> 标签：css, jquery-mobile, fieldset

我正在为我的项目使用 jquery mobile。它会自动转换其输入中的所有单选按钮及其样式。主要问题是，在不同的情况下，我有不同数量的按钮（取决于用户），其宽度不同，我每次都需要它中心。

```
<div data-role="fieldcontain" id="inline" >
    <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
        {section name=i loop=$data['input'] start=0}
            <input name="position" id="radio{$smarty.section.i.index}" value="{$data['input'][i]}" type="radio" />
            <label for="radio{$smarty.section.i.index}">
                {$data['input'][i]}
            </label>
        {/section}
    </fieldset>
</div> 
```

![纽扣](../Images/7e5ec3fd44dfff90126fe537894ac4a2.png)

如您所见，每个按钮都有自己的大小（例如，向上和放大是不同的）。正如我之前所说 - 我不知道每个用户会有什么按钮 - 这取决于他们自己的设置，所以我需要以某种方式自动化居中它的过程 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:08:13.473

如果在您的情况下可能的话，您可以尝试使用它`<a>`而不是[文档](http://jquerymobile.com/test/docs/buttons/buttons-grouped.html)`<input>`中所做的那样。

# magento - 在magento中创建捆绑产品时如何设置固定价格

> ID：12668893
> 
> 赞同：0
> 
> 时间：2012-10-01T07:11:22.567
> 
> 标签：magento

像标题一样，如何通过 API 在 Magento 中创建 price_type > 固定的捆绑产品。我试过了

```
price_type : 'fixed'
price_type : 1 
```

但它不起作用，产品仍然是用动态创建的`price_type`

Magento 版本：1.7 CE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:11:31.433

我自己找到了答案。当您创建一个新的捆绑商品时，您需要注意两个问题。

1.  在创建捆绑商品时设置 price_type 将创建一个索引，以便商品在前端正确显示
2.  更新产品时第二次更改`price_type => 1 // fixed or 0 // dynamic`（使用 api ）

# c# - 如何判断文本框是否专注于操作系统？

> ID：12668895
> 
> 赞同：0
> 
> 时间：2012-10-01T07:11:30.547
> 
> 标签：c#

我需要对键盘进行编程，并进行一些配置和自定义。如果任何文本区域在键盘之前聚焦，我需要将其配置为启用。主要是我需要知道选择了什么控件。

键盘是一个独立的应用程序，因此它不能直接处理控件，只需访问操作系统即可。

为了获得更多解释，我将告诉你场景：

1.  用户运行键盘应用程序，它的“最顶层”已设置，`ShowInTaskBar`但未设置，键盘已禁用。
2.  用户单击窗口中的任何文本控件，如记事本或 Microsoft Word 或 Paint 中的 TextBox，然后在单击键盘后启用应用程序。

3.  用户点击键盘应用程序及其按键在步骤 2 中选择的 TextBox 上写入文本，请注意之前的 TextBox 将失去焦点，但键盘仍将启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:53:36.737

你可以试试`Focused property`

```
foreach (var control in this.Controls)
{
    if (control.Focused)
    {
          ....
        }
} 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.control.focused.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.control.focused.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:16:07.910

您将需要两个 Windows API 函数

获取活动窗口（无效）；获取窗口类（）

第一个会给你活动窗口（焦点窗口），第二个会让你知道它是否是一个文本窗口。

您将需要更多函数 sendmessage(...) 来获取窗口的当前文本并设置文本。

它更多地是关于 Windows API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T05:58:14.690

通过搜索插入符号位置很容易，因为它应该大于 0

```
 GUITHREADINFO lpgui = new GUITHREADINFO();
    IntPtr fore = GetForegroundWindow();
    uint tpid = GetWindowThreadProcessId(fore, IntPtr.Zero);
    lpgui.cbSize = Marshal.SizeOf(lpgui.GetType());
    bool flag = GetGUIThreadInfo(tpid, out lpgui);
    WINDOWINFO pwi = new WINDOWINFO();
    pwi.cbSize = (uint)Marshal.SizeOf(pwi.GetType());
    GetWindowInfo((IntPtr)lpgui.hwndCaret, ref pwi);

    if (flag)
    {
        if (!(lpgui.rcCaret.Location.X == 0 && lpgui.rcCaret.Location.Y == 0))
        {

            //TODO

        }
    } 
```

# python - 如何比较不同时区的日期

> ID：12668896
> 
> 赞同：0
> 
> 时间：2012-10-01T07:11:31.417
> 
> 标签：python, django, facebook-graph-api

从 Facebook Graph API 我检索将 start_time 设置为字符串的事件，格式如下：“2012-10-12T23:30:00+0200”。当指定位置时，它还返回事件对象还包含时区（例如：“欧洲/罗马”）。我只是想检查即将发生的事件（比“现在”更新）。

我想知道是否有一种方法可以在不使用 pytz 的情况下做到这一点，pytz 在 Django 中默认没有安装。对于部署，解决方案越便携越好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:17:22.750

您可以在快速解析返回的字符串后使用内置的日期时间模块（使用“-”、“T”和“+”作为标记）。

这是对文档的快速参考：http: [//docs.python.org/library/datetime.html](http://docs.python.org/library/datetime.html)

注意：此模块处理时区（在页面中搜索 tzone）。

# android - 注册时保存用户名和密码，如果在下次登录时输入正确的 ID 和密码，则登录他/她

> ID：12668900
> 
> 赞同：0
> 
> 时间：2012-10-01T07:11:47.780
> 
> 标签：android, login, password-storage

作为 android 应用程序开发的新手.. 我正在制作一个密码管理器类型的应用程序......所以在第一页我要求输入用户名和密码以及一个注册按钮。如果一个人是第一次运行应用程序，那么他/她必须注册并提供用户名，密码，如果他/她忘记了他/她的密码的情况下的安全问题。现在我想保存用户在应用程序中注册时提供的用户名和密码，下次当他/她再次登录并输入用户名和密码时，应用程序应该从保存的用户名和密码中验证它并将其定向到下一页如果他/她输入了正确的用户名和密码，否则一条消息应该显示“用户名或密码不正确”。

为此，我应该在eclipse中做什么编码..？

我已经制作了xml文件，即布局..

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T07:14:39.557

您应该将其保存在一个文件中，我建议使用`SharedPreferences`，然后在每次启动应用程序时从那里读取它，并查看匹配是否正确。

要保存它：

```
SharedPreferences sp = context.getSharedPreferences("loginSaved", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = sp.edit();
editor.putString("username", "some user value");
editor.putString("password", "some password value");
editor.commit(); 
```

为拿到它，为实现它：

```
SharedPreferences sp = context.getSharedPreferences("loginSaved", Context.MODE_PRIVATE);
String username = sp.getString("username", null);
String password = sp.getString("password", null);
if(username != null && password != null){
    // login automatically with username and password    
}
else{
    // login for the first time
} 
```

# android - 在运行时展开布局

> ID：12668902
> 
> 赞同：-2
> 
> 时间：2012-10-01T07:12:00.280
> 
> 标签：android, animation, layout-animation

我有一个包含图像视图和几个文本视图的布局（带有背景图像）。最初，我想显示 ImageView 的一半图像，它的高度与布局背景相匹配。稍后，在运行时，当用户单击布局时，布局应展开并显示 ImageView 已满的动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:24:56.447

将您的布​​局划分为子布局并使用视图的可见性。默认情况下，使您不需要的布局不可见，并且在您单击某些内容后使您的所有布局可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:43:44.837

我得到了答案：我只是使用 android:`android:scaleType="matrix"`在 ImageView 中只显示一半的图像，但我应该硬编码 ImageView 的高度。

# zend-framework - 学说实体管理器不返回相关行集

> ID：12668911
> 
> 赞同：2
> 
> 时间：2012-10-01T07:13:19.110
> 
> 标签：zend-framework, doctrine, entity, one-to-many

我在我的实体中建立了一对多的关系。当尝试获取相关行集时，它会带来空结果，当尝试从子实体中查找父行时，它会抛出**Entity was not found**异常

这是我的 initDoctrine

```
$classLoader = new \Doctrine\Common\ClassLoader(
                        'Doctrine',
                        APPLICATION_PATH . '/../library/'
        );
        $classLoader->register();
        $config = new \Doctrine\ORM\Configuration();
        $cache = new \Doctrine\Common\Cache\ArrayCache;
        $config->setMetadataCacheImpl($cache);
        $config->setQueryCacheImpl($cache);
        $driver = $config->newDefaultAnnotationDriver(array(APPLICATION_PATH . '/models'));
        $config->setMetadataDriverImpl($driver);
        $config->setProxyDir(APPLICATION_PATH . '/../bin/tmp/Proxies');
        $config->setProxyNamespace('App\Proxies');
        $config->setAutoGenerateProxyClasses(true);
        $connectionSettings = $this->getOption('doctrine'); 
```

这是我的关系

```
/**
* @var array $userFacebooks
* 
* @OneToMany(targetEntity="Application_Model_UserFacebook", mappedBy="user")
*/
protected $userFacebooks; 
```

和父母之一

```
/**
* @ManyToOne(targetEntity="Application_Model_User", inversedBy="userFacebooks")
* @JoinColumn(name="user_id", referencedColumnName="id") 
*/
protected $user; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:24:39.973

映射看起来不错。检查您的所有实体类是否都带有以下注释：

```
/**
 * @entity
 */
class Entity_Name { ... } 
```

# c# - 对象引用未设置为对象的实例，而之前使用相同的方法

> ID：12668912
> 
> 赞同：0
> 
> 时间：2012-10-01T07:13:19.033
> 
> 标签：c#

我将 Visual Studio 2010 与 c# 和 SQL Management Studio 一起使用。

我正在研究邮箱功能。

我写了一个方法，如果用户点击回复按钮，回复的内容是这样的..

```
private string adjustContentForReply(List<Guid> sender)
    {
        string content = string.Empty;
        messageID = (Guid)Session["messageID"];

        //haal de ontvangers uit de database van het bericht
        List<Guid> receivers = m.bussinesCollection.BussinesMessageReceiver.GetReceivers(messageID);

        //pas de inhoud van het bericht aan met de details van het vorige bericht
        content = "<br /><br />----------------------------------------<br />";
        content += "Ontvangen op: " + m.bussinesCollection.BussinesMessageReceiver.GetMessageReceiver(messageID, boxOwner).DateReceived.ToString() + "<br />";
        content += "Onderwerp: " + m.bussinesCollection.BussinesMessage.GetMessageSubject(messageID) + "<br />";
        content += "Van: " + m.bussinesCollection.BussinesPerson.GetFullName(sender[0]) + "<br />";
        content += "Aan: ";

        //Voeg één of meerdere ontvangers toe aan details
        foreach (Guid rec in receivers)
        {
            content += m.bussinesCollection.BussinesPerson.GetFullName(rec);
            if (receivers.Count() > 1)
                content += "; ";
        }
        content += "<br />";
        content += "----------------------------------------<br /><br />";

        //voeg de inhoud van het vorige bericht aan de content
        content += m.bussinesCollection.BussinesMessage.GetMessageContent(messageID);

        return content;
    } 
```

它给了我错误

```
content += "Ontvangen op: " + m.bussinesCollection.BussinesMessageReceiver.GetMessageReceiver(messageID, boxOwner).DateReceived.ToString() + "<br />"; 
```

错误是

**你调用的对象是空的。**

GetMessageReceiver() 是这样的

```
public MessageReceiver GetMessageReceiver(Guid msgId, Guid personId)
        {
            var message = from msg in Db.MessageReceivers
                          where msg.MessageID.Equals(msgId) && msg.ReceiverID.Equals(personId)
                          select msg;

          return  message.Count().Equals(1) ? message.First() : null;
        } 
```

当我调试它并获取 messageId 和 BoxOwnerId 并在数据库中触发查询时，它显示给定组合的两行。

谁能帮我？

嘿，问题从那里解决了，现在我可以创建一条回复消息。但是在点击发送按钮页面时，现在在那里抛出了同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:20:32.720

你想拥有

```
return message.First(); 
```

代替

```
return  message.Count().Equals(1) ? message.First() : null; 
```

`null`如果有多个结果，您的代码将返回。你说，你提供的 ID 在数据库中有两行，所以你得到`null`......

您应该使用`First`and not `FirstOrDefault`，因为如果您的消息始终返回 not 的引用，您的代码的结构只能正常工作`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:22:00.320

如果您在该行收到 NullReferenceException：

```
content += "Ontvangen op: " + m.bussinesCollection.BussinesMessageReceiver.GetMessageReceiver(messageID, boxOwner).DateReceived.ToString() + "<br />"; 
```

那么`null`几乎可以在任何地方。除了在这种情况下：显然没有空值，`m.bussinesCollection.BussinesMessageReceiver`否则你会在几行前得到错误。

所以要么`GetMessageReceiver`or`DateReceived`为空。

您确实知道，如果不完全是 1 条消息（所以 0 或 >=2），您的 GetMessageReceiver 方法会返回 null 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T07:20:50.697

您收到错误是因为您没有检查`GetMessageReceiver()`. 您要么需要确保`GetMessageReceiver`不能返回`null`，要么需要在使用任何函数之前检查返回值

```
MessageReceiver receiver = m.bussinesCollection.BussinesMessageReceiver.GetMessageReceiver(messageID, boxOwner);
if (receiver == null)
    // handle error
    return;

content += "Ontvangen op: " + receiver.DateReceived.ToString() + "<br />"; 
```

# javascript - 允许 0-9,az,AZ 和特殊字符 . , @ & ( ) {} [ ] : ; 在文本框中

> ID：12668913
> 
> 赞同：-1
> 
> 时间：2012-10-01T07:13:23.317
> 
> 标签：javascript, jquery, regex

我想允许 0-9,az,AZ 和特殊字符。, @ & ( ) {} [ ] : ; 在文本框中。

请帮我为此编写正则表达式。目前我有一个用空数据替换无字字符的代码，我想进行更改，以便它也允许上面的特殊字符。

```
function deleteSpecialChar(txtName, event) {

    if (txtName.value != '' && txtName.value.match(/^[\w]+$/) == null) {

        txtName.value = txtName.value.replace(/[\W]/g, '');
    };
}
$('input[type=text]').live('keypress keyup keydown cut copy paste', function (event) {

    deleteSpecialChar(this, event);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:42:36.040

只需将要删除的内容放在一组中：

```
[^0-9a-zA-Z.,@&(){}\[\]:;]+ 
```

使用该`test`方法，您可以使用相同的正则表达式进行检查和替换，而不是一正一负：

```
function deleteSpecialChar(txtName, event) {
  var re = /[^0-9,a-z,A-Z\.,@&\(\)\{\}\[\]:;]+/g;
  if (txtName.value != '' && txtName.value.test(re)) {
    txtName.value = txtName.value.replace(re, '');
  };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:45:00.983

尝试

```
txtName.value = txtName.value.replace(/[^\w.,@&(){}\[\]:;]/g, ''); 
```

以 开头的字符类`^`是一个否定类，因此这将替换不在该类中的每个字符。

# c# - 使用浏览器访问 WCF Web 服务

> ID：12668914
> 
> 赞同：2
> 
> 时间：2012-10-01T07:13:23.543
> 
> 标签：c#, wcf

如何使用浏览器访问 WCF 网络服务？目前它只是作为普通的网络服务实现的。请让我知道如何设置 webConfig 设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:20:43.937

为了从您的浏览器中访问和测试您的 WCF 服务，您需要将其设为 RESTFUL Web 服务。

这里有一些资源会有所帮助：

[http://msdn.microsoft.com/en-us/library/dd203052.aspx](http://msdn.microsoft.com/en-us/library/dd203052.aspx) [http://www.codeproject.com/Articles/344512/Building-and-Testing-WCF-RESTful-services](http://www.codeproject.com/Articles/344512/Building-and-Testing-WCF-RESTful-services)

还可以查看这篇总结了构建 RESTFUL Web 服务的需求和各个方面的好文章 [http://predic8.com/rest-webservices.htm](http://predic8.com/rest-webservices.htm)

# java - Red5 在运行时创建流名称别名

> ID：12668922
> 
> 赞同：2
> 
> 时间：2012-10-01T07:14:24.090
> 
> 标签：java, stream, alias, red5

我想在运行时为本地存储的视频文件创建别名。例如，我有一个“test/video.flv”文件，并创建了一个“abc123”别名（如果扩展名很重要，则为“abc123.flv”）。

我想将这些别名用于唯一且一次性的视频路径。所以我需要在 1 次使用后将它们移除。

*   如何在运行时创建别名？
*   如何在运行时删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T14:18:20.573

我已经找到了一个更好的解决方案！在 red5-web.xml 文件中，我添加了一个 bean`<bean id="streamFilenameGenerator" class="myapp.FilenameGenerator"></bean>`并为它创建了类`public class FilenameGenerator implements IStreamFilenameGenerator`。现在我只需要重写`public String generateFilename(IScope scope, String name, GenerationType type)`负责文件名解析的函数。name 参数是请求的流名称，返回值是解析的。从现在开始，这很简单，例如创建一个带有 key=alias name 和 value=real 现有文件路径的 HashMap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:46:26.537

您有多种选择来实现这一点：

一种方法是创建一个符号链接，这样您就可以使用底层操作系统来欺骗 red5 存在一个文件。然后，您必须在 ApplicationAdapter 中添加侦听器以侦听所需的事件。例如： [http](http://dl.fancycode.com/red5/api/org/red5/server/adapter/ApplicationAdapter.html) ://dl.fancycode.com/red5/api/org/red5/server/adapter/ApplicationAdapter.html => streamStart/stop 等等。您必须查找您的 Red5 版本的 ApplicationAdapter 以查看您可以在您正在使用的 Red5 版本中侦听的所有可能事件！

第二种解决方案是编写一个自定义流处理程序。然而，这需要进一步调查。我认为没有标准机制来修改文​​件请求以对其应用某种通配符。它的工作方式类似于第一个解决方案，但您需要重写/覆盖 ApplicationAdapter 的一些机制来处理文件请求。

所以基本上最好的办法是研究你的 ApplicationAdapter 并找到你正在寻找的事件监听器。

# javascript - HTML5 和二维码库

> ID：12668923
> 
> 赞同：-2
> 
> 时间：2012-10-01T07:14:24.050
> 
> 标签：javascript, jquery, html, qr-code

我正在寻找用 HTML5 或 JavaScript 或 jQuery 或 PHP 编写的最新、好的、安全的库，用于读取和创建 QR 码。

我知道有两种方法可以阅读它们：

1.  上传二维码图片。
2.  从网络摄像头扫描它。

如果存在，我希望案例 2 不是 FLASH 库而是 HTML5 库。

任何来源或链接家伙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:19:36.887

不完全确定你在追求什么，但是像这样的图书馆呢？

[http://phpqrcode.sourceforge.net/](http://phpqrcode.sourceforge.net/)

我想这在阅读方面的作用会更少，而在事物的生成/创造方面则更多。

# java - 使用随机访问文件的番石榴多图？

> ID：12668924
> 
> 赞同：0
> 
> 时间：2012-10-01T07:14:27.710
> 
> 标签：java, io, guava, bigdata

我有一个 Integer[]s 文件太大而无法放入内存。我想搜索所有最后一个成员 x 的数组并在其他代码中使用它们。有没有办法使用 Guava 的多重映射来做到这一点，其中 x 是键并存储在内存中，而 Integer[] 是值并存储在磁盘上？在这种情况下，键不是唯一的，但键值对是唯一的。读取这个多图（假设它是可能的）将是并发的。我也愿意接受其他方法来解决这个问题的建议。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:59:14.003

您可以创建一个表示磁盘上的数组的类（基于它在数组文件中的索引），让我们称之为它`FileBackedIntArray`，并将其实例作为 a 的值`HashMultimap<Integer, FileBackedIntArray>`：

```
public class FileBackedIntArray {
    // Index of the array in the file of arrays
    private final int index;
    private final int lastElement;

    public FileBackedIntArray(int index, int lastElement) {
        this.index = index;
        this.lastElement = lastElement;
    }

    public int getIndex() {
        return index;
    }

    public int[] readArray() {
        // Read the file and deserialize the array at the associated index
        return smth;
    }

    public int getLastElement() {
        return lastElement;
    }

    @Override
    public int hashCode() {
        return index;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) {
            return true;
        } else if (o == null || o.getClass() != getClass()) {
            return false;
        }

        return index == ((FileBackedIntArray) o).index;
    }
} 
```

*顺便说一句，你真的需要一个`Integer[]`而不是一个`int[]`（即你可以有`null`值）吗？*正如您在评论中所说，您实际上并不需要s `Integer[]`，因此在任何地方使用`ints`s 将避免装箱/拆箱，并且会节省大量空间，因为您似乎有很多空间。希望最后一个元素 (x) 没有大量可能的值。

然后，您为每个数组创建一个实例并读取最后一个元素以将其放置在`Multimap`不保留数组的情况下。填充`Multimap`需要是顺序的，或者如果并发，则使用锁保护，但读取可以是并发的，没有任何保护。您甚至可以在填充`ImmutableMultimap`后创建一个`HashMultimap`，以防止任何修改，这是并发环境中的安全实践。

# qt - 如何在 Qt 中为 qml gridview 设置背景

> ID：12668928
> 
> 赞同：3
> 
> 时间：2012-10-01T07:14:50.127
> 
> 标签：qt, qml

如何`gridview`从 QML 文件设置背景。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T08:38:31.567

将网格视图嵌套在 Rectangle 中，并使 GridView 元素的代表透明：

```
 Rectangle {
      color: "red"
      GridView {
        delegate: Rectangle {
          color: "transparent"
        }
      }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T07:40:15.810

在 QML 中，您可以通过在彼此之间包含/嵌套小部件/元素来组合复杂的对象。

因此，对于在 Widget 中包含图像，在您的情况下`GridView`，只需在 Element 或其子元素中嵌套一个`Image`元素`GridView`即可。

```
GridView {
    width: 800
    height: 600
    Image: {
       source: "some-image.png"
    }
} 
```

的文档`GridView`有类似和更好的例子 - [http://doc.qt.digia.com/4.7-snapshot/qml-gridview.html#example-usage](http://doc.qt.digia.com/4.7-snapshot/qml-gridview.html#example-usage)

还要注意`anchors`属性，这将帮助您将图像定位在父元素中，或者以其他方式。

元素文档`Image`可在此处获得： http: [//doc.qt.digia.com/latest/qml-image.html](http://doc.qt.digia.com/latest/qml-image.html)

# magento - Magento cron 作业仅在显式运行时发送时事通讯

> ID：12668929
> 
> 赞同：0
> 
> 时间：2012-10-01T07:14:50.523
> 
> 标签：magento, cron

我已经为 Magento 设置了我的 cronjob，使其每两个小时运行一次，这是我的主机可以设置的最快速度。但是，在我真正进入主机的控制面板并单击特定 cronjob 的“运行”按钮之前，不会发送时事通讯。

我做错了什么？我的 cron 路径设置为：`/bin/sh /usr/www/users/FTP_USER/cron.sh`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:43:50.447

这是因为事件观察者是根据上下文（adminhtml、frontend 或在您的情况下为 crontab）加载的。发送时事通讯的观察者不在 crontab 列表中，因此它无法发送电子邮件。

见这篇文章：[http ://www.aschroder.com/2010/01/magento-events-explained-and-a-few-gotchas-avoided/](http://www.aschroder.com/2010/01/magento-events-explained-and-a-few-gotchas-avoided/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:42:26.650

我想这很可能是一种或其他形式的权限/路径问题。当您通过单击控制面板中的某些内容手动触发事件时，它可能会以 Apache 用户（www-data 或等效项，具体取决于平台）身份运行。cron 很可能会以与此不同的用户身份运行。

假设您指的是核心newletters cron ，相对包含路径不正确`Mage_Newsletter_Model_Observer::scheduledSend`不太可能有任何问题。`cwd`这留下了最可能的罪魁祸首 a.) cron 用户对您的 cron.sh 没有执行权限，b.) cron 用户无权访问服务器上的邮件应用程序，因为它不包含在用户路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:19:13.253

以我的经验， cron.sh 脚本还没有达到它。因此，我只运行 cron.php 。这需要使用足够的 RAM 和合理的超时正确设置 php cli。

在您的 crontab 中尝试：

```
 * * * * * /usr/bin/php /home/USER/public_html/cron.php >> /home/USER/public_html/var/log/cron.log 2>&1 
```

我还在 var/log/cron.php 中保留了一个日志文件，以便我可以看到在 cron 作业期间发生的错误。

# javascript - 使用 JavaScript 或 PHP 从 Bookmarklet 中检测 Url/s 的引用

> ID：12668930
> 
> 赞同：2
> 
> 时间：2012-10-01T07:14:55.803
> 
> 标签：javascript, webbrowser-control, bookmarklet, browser-cache

让我们跳出框框思考！

如果没有任何编程技能，您如何说出/检测您是否在列出产品的网页上，而不是在打印产品特定详细信息的页面上？

使用 JavaScript 将 Bookmarklet 插入网站的正文标记之后（eBay、Bloomingdales、Macy's、toys'r'us ...）

现在，我的故事是：（现在需要编程技能）

我有一个书签，我的主要问题是如何检测我是否在列出产品的页面上，或者我是否在打印产品详细信息的页面上。

我能想到的检测我是否在产品的详细信息页面上的最好方法是检测当前 URL 的推荐。（可能是所有的推荐，整个点击历史）

可能的问题：用户将 URL 添加为收藏，但不使用我的书签，并关闭浏览器；然后用户再次使用浏览器，单击收藏链接并使用我的 bookmaklet，我认为在这种情况下我无法检测到推荐；没关系，并非所有情况都涵盖或可能；

在这种情况下，我可以使用缓存检测此链接的引用吗？（我知道这里涉及许多浏览器缓存系统）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T08:58:57.100

不可以。您无法使用小书签或任何普通的客户端 JavaScript 检查历史记录。你是对的，如果从书签加载，推荐人将为空。

但是，小书签第一次使用时可以将引用者存储在 cookie 或 localStorage 中，然后在下次使用时，如果引用者为空，请检查 cookie 或 localStorage。

也就是说，你对这个问题的整个处理方法对我来说似乎真的很奇怪，但我没有足够的细节来知道我们的精神错乱是否是天才。

如果我试图确定当前页面是列表还是详细信息页面，我会检查 url 是否有常见模式或检查页面内容是否有常见模式。

常见 url 模式示例：许多“列表页面”是搜索结果，因此查询字符串将包含“search=”、“q=”、“keywords=”等字词。

页面内容模式示例：一个产品页面将只有 1 个“购买”按钮或“添加到购物车”，无论如何。一个列表页面要么没有这样的按钮，要么有很多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T05:35:49.413

> 您如何说出/检测您是否在列出产品的网页上，而不是在打印产品特定详细信息的页面上

我会设置**[Brain.js](https://github.com/harthur/brain)**（一个用 javascript 实现的神经网络）并在一个（必须广泛和多样的）DOM 样本集上对其进行训练，然后选择一个阈值`product:details`比率来“检测”（尽可能接近）什么类型我所在的页面。

这需要一些试验和错误，但这是我能想到的最好方法（神经网络可以很快得到“足够好”的结果——试试吧，你会对结果感到惊讶）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T03:54:22.363

我想说你的目标首先应该是让它适用于某些网站。然后是许多网站，然后是所有网站。

A) 尝试对亚马逊、eBay 等主要网站进行手工编码……记住一个目标。

B）更有创意的方法可能是保留所有货币符号的列表，然后检测页面是否可能有 10 个分散在各处。例如，$ 符号遍布亚马逊。但是只有当每页有 20 个时，你才能真正说它是一个产品列表（这是一个不好的例子，亚马逊的页面相当疯狂）。也许货币符号不起作用；但是，我认为您可以概括类似的东西。可能有大量的货币符号加上“网格”类型系统的检测，其中的东西排成一排。你会得到很多垃圾，所以你需要很好的过滤。在您有类似这样的算法工作之后，需要进行数据分析。

C）我认为在 B）之后你会意识到你的系统可能会更好地使用 A）的部分。换句话说，您将想要从某些流行的网站（或更多的小众网站）中定制地狱。这应该有助于填补不遵循任何已知模型的网站的空白。

现在就跟踪用户的来源而言，为什么不使用跟踪 cookie 类型的概念。您当然可以使用 indexedDB 或 localstorage 之类的。换句话说，始终通过将最后一页保存在当前页面上来保持对最后一页的引用。你也可以做一些事情，比如有一个堆栈并在每个页面上将 url 推送到它上面。如果您出于某种原因想要保存它，只需将该数据发送回您的服务器。

检测最喜欢的点击可能涉及检测所有 AJAX 流量并对其进行分析（尽管这可能很难......）。您应该首先进行一项调查，看看这些电话通常是什么样子。我想像 amazon.com/favorite/product_id 这样的东西会相当普遍。另外...您可以尝试检测页面上“收藏夹”按钮的选择器，然后添加一个 onclick 处理程序来检测它何时被单击。

我试图解决你提到的每一个问题。我不认为我完全理解你想要做什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T07:20:29.637

为什么不使用网址？那么你可以做这样的事情[http://www.le.url.com?pageid=10&type=DS](http://www.le.url.com?pageid=10&type=DS)然后代码将是这样的：

```
<?php
if(isset($_GET['type']) && $_GET['type'] == 'DS'){
    // Do stuff related to Details Show
} else{
    // Show all the products
}
?> 
```

您可以使用 .htacces 文件制作类似这样的网址：http: [//www.le.url.com/10/DS](http://www.le.url.com/10/DS)

# spring - Spring 3.0 (form:select, form:option(s) ) 标签库支持 HTML 5 data-* 属性

> ID：12668932
> 
> 赞同：0
> 
> 时间：2012-10-01T07:15:17.980
> 
> 标签：spring, spring-mvc, twitter-bootstrap

Spring 3.0 (form:select, form:option(s) ) 标签库是否支持使用 bean 的属性渲染 HTML 5 data-* 属性？如果是，一个例子会有所帮助。背景：我正在开发一个 Spring MVC 应用程序并使用 Bootstarp css 和 JS 以及 spring 提供的标签。需要使用 HTML 5 data-* 属性来保留带有下拉选项的附加数据。根据其中一个下拉列表中的用户选择，我想更新更多下拉列表，并且我想避免 AJAX 调用来获取下一个下拉列表的选项，因为我在页面加载期间拥有数据。我了解 JQuery 具有属性支持，但这需要在页面加载时执行 javascript 代码，因此寻找 HTML 5 支持。欢迎任何其他处理此问题的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T08:05:38.317

Spring 3.0 表单标签支持 Data-* 属性（我相信，还有您指定的任何有效命名的自定义属性）。您还可以使用 bean 的属性值作为属性值，例如

```
<form:input data-test="${myBean.propertyName}" path="propertyName" /> 
```

要回答您问题的第二部分，您询问是否有办法让 Spring 表单标记库使用您指定的 bean 属性的内容填充 data-* 属性，这不会自动发生：您需要编写执行此操作的自定义标签。

# wcf - 如何使用现有的 wsdl 动态调用 WCF 服务？

> ID：12668942
> 
> 赞同：1
> 
> 时间：2012-10-01T07:16:32.343
> 
> 标签：wcf, wsdl

有人知道如何使用现有的 wsdl 文件动态调用 WCF 服务吗？因此，我不需要使用“添加服务引用...”。一切都应该动态完成。

我在互联网上搜索过，没有发现任何类似的东西：

EndpointAddress 地址 = new EndpointAddress("http://localhost:3929/Service1.svc?wsdl");

我使用 VS2008 (.NET 3.5)。

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T07:39:10.667

如果您查看[Channel Factory](http://msdn.microsoft.com/en-us/library/ms734681.aspx)，这应该是您所需要的。

# python - 在线程中调用方法

> ID：12668962
> 
> 赞同：1
> 
> 时间：2012-10-01T07:18:11.960
> 
> 标签：python, multithreading, methods

我的代码产生了许多线程来管理与许多 I/O 板的通信。通常，线程从板接收事件并根据需要更新外部数据源。线程（1 个或更多）被调用为：

```
phThreadDict[devId] = ifkit(self, phDevId, phIpAddr, phIpPort, phSerial)
phThreadDict[devId].start() 
```

这工作正常。但是，在某些情况下，我还需要线程向董事会发送消息。该线程包含一个完成工作的方法，我从主线程调用该方法：（此示例打开数字输出）

```
phThreadDict[devId].writeDigitalOutput(digitalOut, True) 
```

这是线程中包含的方法：

```
def writeDigitalOutput(self,index, state):
    interfaceKit.setOutputState(index, state) 
```

`threading.enumerate()`产生：

```
{134997634: <ifkit(Thread-1, started daemon)>, 554878244: <ifkit(Thread-3, started daemon)>, 407897606: <tempsensor(Thread-4, started daemon)>} 
```

实例是：

```
<ifkit(Thread-3, started daemon)> 
```

如果我只有一个线程，这很好用。但是，如果我有多个线程，则只使用一个 - 选择似乎是在程序启动时随机做出的。

我怀疑将线程标识符存储在 dict 中是问题所在，但它仍然适用于一个线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:26:30.130

而不是将线程存储在“简单”关联数组中，也许您应该事先实例化一个线程池（您可以在此处找到实现示例 h**p://code.activestate.com/recipes/577187-python-thread-pool / 或者直接使用下面的lib [http://pypi.python.org/pypi/threadpool](http://pypi.python.org/pypi/threadpool) )。

还要实例化一个“看门狗”，您的每个线程都将持有对该看门狗的引用，因此当您的线程需要进行回调时，它们会将信息发送回该看门狗。（当心死锁，请查看[http://dabeaz.blogspot.fr/2009/11/python-thread-deadlock-avoidance_20.html](http://dabeaz.blogspot.fr/2009/11/python-thread-deadlock-avoidance_20.html)）。

注意：对不起，蹩脚的“h**p”，但我不会让我发布超过 2 个链接....

# iphone - 对某些库使用 -all_load 但对某些库不使用

> ID：12668963
> 
> 赞同：2
> 
> 时间：2012-10-01T07:18:19.297
> 
> 标签：iphone, ios, ipad, admob, ios6

我用于我的应用程序的组件之一要求我使用 -all_load 作为其链接器标志之一。但是当我添加这个标志时，我从我在我的应用程序中使用的另一个库中得到一个错误。当我归档应用程序时，我收到以下错误：

> Apple Mach-O Linker Error 64 架构 armv7s 的重复符号

这种情况的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:26:31.370

只需删除该标志并尝试不使用它。如果仍然不起作用，请尝试对每个库使用 --force-load。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:55:38.427

不要尝试在没有加载标志的情况下运行您的代码。该标志的原因是为了处理 Apple 链接器问题，即 ObjectiveC 库中的类别没有得到正确处理。尝试切换到这个：

```
-force_load $(BUILD_PRODUCTS_DIR)/libfoo.a 
```

编辑：我已阅读但未验证从 Xcode 4.6 开始不再需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T18:56:07.233

David H 的回答基本正确，但代码示例中有两个错别字。对于需要特殊加载行为的库，链接器参数应如下所示：

```
-force_load $(BUILT_PRODUCTS_DIR)/libfoo.a 
```

`-all_load`注意：我在我的项目中遇到过类似的情况（使用 Xcode 4.6.1），但是当既没有指定也没有`-force_load`指定（针对 iOS5 和 iOS6）时，应用程序仍然无法链接。

# css - 使 maven 服务于 css.gz 和 js.gz 等文件

> ID：12668970
> 
> 赞同：0
> 
> 时间：2012-10-01T07:19:21.953
> 
> 标签：css, jsp, tomcat, maven, compression

我已经使用手动 gzip 手动压缩了我的 CSS，并且我正在尝试从外部源包含 css.gz。

```
<link rel="stylesheet" href="<c:url value="/resources/css/style.css.gz"/>" type="text/css" media="screen" /> 
```

当我使用 PHP 和 Apache 时，它​​很简单并且运行良好。

问题是，我现在正在使用 spring 和 Apache Maven 处理 Java EE 项目。

那么，如何配置 maven 以了解此类预压缩文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:23:37.947

您应该创建一个如下所示的源结构：

```
.
├── pom.xml
└── 源
    └── 主要
        ├── java
        ├── 资源
        └── 网页应用
            ├── WEB-INF
            └── 资源
                └── css
                    └── style.css.gz

```

将`src/main/java`包含您所有的 java 代码。

应包含您的应用程序使用的`src/main/resources/`资源，并且不应公开提供。例如资源包、属性文件等。

这`src/main/webapp/`将包含您的 Web 应用程序特定文件。

还要确保将`<packaging>war</packaging>`标签添加到您的 pom.xml 中。

# sql - 触发器执行插入

> ID：12668977
> 
> 赞同：2
> 
> 时间：2012-10-01T07:19:53.953
> 
> 标签：sql, triggers, sqlanywhere

我必须创建一个触发器，该触发器在某个列（小时结束）中不允许多个空值。这是我写的触发器（我使用的是 Sybase）：

```
ALTER TRIGGER "InsertIntoCardDetail" instead of insert on
DBA.CardDetail
referencing new as new_name
for each row
begin
  declare @nullCount integer;
  if(new_name.hourfinish is null) then
    select COUNT(*) into @nullCount
      from CardDetail
      where hourfinish is null;
    if(@nullCount > 0) then
      raiserror 99999 'Cannot have Multiple Nulls'
    else
      insert into CardDetail( card,hourstart,hourfinish,"work",project,N) 
        values( new_name.card,new_name.hourstart,new_name.hourfinish,new_name."work",new_name.project,new_name.N) 
    end if
  else
    insert into CardDetail( card,hourstart,hourfinish,"work",project,N) 
      values( new_name.card,new_name.hourstart,new_name.hourfinish,new_name."work",new_name.project,new_name.N) 
  end if
end 
```

触发器工作正常。我要问的是是否有执行插入的命令 - 可以替换那些长插入语句的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:48:29.240

尝试将触发器更改为：

```
ALTER TRIGGER "InsertIntoCardDetail" instead of insert on
DBA.CardDetail
referencing new as new_name
for each row
begin
   if(new_name.hourfinish is null) then    
    if exists 
    (select 1
      from CardDetail
      where hourfinish is null) then
      raiserror 99999 'Cannot have Multiple Nulls'
      return 1
    end if --exists 
   end if--(new_name.hourfinish is null) 

    insert into CardDetail( card,hourstart,hourfinish,"work",project,N) 
    values(new_name.card,new_name.hourstart,new_name.hourfinish,new_name."work",new_name.project,new_name.N) 

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:50:15.867

我使用插入前触发器实现了相同的结果。这样我就不需要在触发器中编写任何插入语句。

```
ALTER TRIGGER "InsertIntoCardDetail" before insert on
DBA.CardDetail
referencing new as new_name
for each row
begin
  if(new_name.hourfinish is null)
    and exists(select 1
      from CardDetail
      where hourfinish is null) then
    raiserror 99999 'Cannot have Multiple Nulls'
  end if;
end 
```

# c# - 通过控制器的操作上传文件 - 一个视图中的两个表单

> ID：12668978
> 
> 赞同：1
> 
> 时间：2012-10-01T07:19:59.330
> 
> 标签：c#, asp.net-mvc-3, file-upload

问题是我在同一个视图中有两种形式。控制器是`Users`，我对这两种表单有两个操作：编辑和 UploadPhoto。

我一直在使用编辑部分并且它正在工作。现在我想允许用户在同一页面上上传他们的照片。有一个单独的按钮用于保存用户信息和另一个用于保存图片。

![在此处输入图像描述](../Images/b94aee11d4c426af9c009ca939e6b1eb.png)

页面模型是`@model sportingbiz.Models.ViewModels.UserEditViewModel`

第二种形式

```
<fieldset title="Upload photo">
    <legend>Change Profile Picture</legend>
    <div>
        @using(Html.BeginForm("UploadPhoto", "Users", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            <table>
            <tr>
                <td>
                    <img src="@Url.Content("~/Content/images/noprofilepic.jpg")" 
                </td>
                <td>
                    <input type="file" name="photoFile" />
                    <br /><br />
                    <input type="submit" value="Upload" />
                </td>
            </tr>
            </table>                
        }
    </div>
</fieldset> 
```

控制器

```
public class UsersController : Controller
{
    UsersRepository usersRepo = new UsersRepository();

    [Authorize]
    [HttpPost]
    public void UploadPhoto(HttpPostedFile photoFile)
    {
        if (photoFile == null)
        {
            return;
        }

        if (photoFile.ContentLength <= 0)
        {
            return;
        }

        string filename = Path.GetFileName(photoFile.FileName);
        if (Path.GetExtension(filename) == "")
            return;

    }
} 
```

当我点击上传时，我的页面导航到`http://localhost/mvcapp/Users/UploadPhoto`一个空白屏幕。我想要的是返回编辑页面，并可能向用户显示文件未上传的错误。像`ModelState.IsValid`或`ModelState.AddModelError`

也没有返回相同视图的选项，例如 return View(model)

我这样做错了吗？一些建议是使用 Ajax 上传器或上传器。我还考虑将上传部分放在自己的视图中。PartialView 可以在这方面提供帮助吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:05:33.477

尝试像下面那样验证使用 jquery，这将确保用户被迫选择一些文件......

让我们假设您的视图如下

```
<input type="file" name="Document" id="imgFile" style="height:25px;"/>
<input type="submit" value="Submit" id="btnSubmit"/> 
```

下面是要验证的jquery

```
$('#imgFile').change(function() {
    if ( ! $('#imgFile').val() ) {
    alert('Chose a file!');
    return false;
 }
}); 
```

或者您可以在按钮上执行相同的操作，如下所示

```
$('#btnSubmit').click(function() {
    if ( ! $('#imgFile').val() ) {
    alert('Chose a file!');
    return false;
 }
}); 
```

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:58:04.823

```
[Authorize]
[HttpPost]
public void UploadPhoto(HttpPostedFile photoFile)
{ 
```

带有`void`返回的 Action 很奇怪。让它返回一个`ActionResult`并确定你想去的每个分支。

```
[Authorize]
[HttpPost]
public void UploadPhoto(HttpPostedFile photoFile)
{
    if (photoFile == null)
    {
        return RedirectToAction("ErrorPage");
    }
    ...

    var viewModel = ...;   // but your've lost the Edit part
    return View(viewModel);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T09:15:45.583

你像这样上传你的图像

```
 public void UploadPhoto(HttpPostedFile photoFile)
 {} 
```

我认为你应该像这样改变你的代码

```
 public void UploadPhoto(HttpPostedFileBase photoFile)
 {} 
```

# c# - EF 和表值函数性能

> ID：12668983
> 
> 赞同：4
> 
> 时间：2012-10-01T07:20:29.480
> 
> 标签：c#, sql-server, entity-framework

我们正在使用 Entity Framework 5.0.0，数据库优先方法。

我已经将几个内联表值函数 (ITVF) 导入到我的 EDMX 中，它们返回 IQueryable。一旦返回，我们最常对它们进行某种类型的操作，例如 .Skip().Take()

性能很好，至少几个小时。如果不做任何事情（至少我所知道的），性能会在一夜之间下降。

起初，查询将需要大约 500 毫秒来执行。一夜之间，性能下降到查询返回超时异常（30-60 秒）的水平。这仅在从代码执行表函数时发生，例如：

```
IQueryable<MyResult> results =
            _context.MyTableFunction("searchforthis")
                .Skip(currentPagingPosition*20).Take(20); 
```

（这不仅仅是我们第一次运行查询时会发生这种情况）

然而，如果我们直接从 SQL Server Management Studio 运行相同的表函数，查询将在 ~500 毫秒内执行。

如果我“重新保存”表格功能，例如：

```
ALTER FUNCTION [dbo].[MyTableFunction]...... 
```

无需进行任何“真正的”更改，即使从代码中调用，它也会立即恢复到 500 毫秒的速度。

我错过了一些明显的东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-14T11:03:30.830

因此，我尝试将 Option Recompile 添加到内联 TVF 中，但似乎是不允许的。我发现的唯一方法是创建一个多语句函数，但它们有其缺点：

**设置**

```
CREATE Table MyTest
(
    ID INT PRIMARY KEY Identity,
    SomeValue VARCHAR(MAX),
    UpdateDate Date
)
CREATE INDEX IDX_MyTest_UpdateDate
 ON MyTest(UpdateDate)

GO 
```

**创建函数**

```
 CREATE FUNCTION MyFunction(@FromDate date, @ToDate Date)
 RETURNS TABLE 
 AS
RETURN
(   
    SELECT SomeValue, UpdateDate
    FROM MyTest
    WHERE   UpdateDate >= @FromDate AND
            UpdateDate <=@ToDate
    -- OPTION (RECOMPILE) **** NOT ALLOWED HERE**
)
GO

CREATE FUNCTION MyFunction2(@FromDate date, @ToDate Date)
 RETURNS @retMyFunction TABLE
    (
        SomeValkue VARCHAR(MAX),
        UpdateDate Date
    ) 
 AS
BEGIN
    INSERT INTO @retMyFunction
    SELECT SomeValue, UpdateDate
    FROM MyTest
    WHERE   UpdateDate >= @FromDate AND
            UpdateDate <=@ToDate
    OPTION (RECOMPILE);

    RETURN;
END
GO 
```

**加载数据**

```
 INSERT INTO MyTest (SomeValue, UpdateDate)
 SELECT CAST(X.n * Y.n * z.n AS VARCHAR(Max)), DATEADD(D, ROW_NUMBER() OVER (ORDER BY X.n), '2010-01-01')
 FROM (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) X(n)
 CROSS APPLY (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) Y(n)
 CROSS APPLY (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10)) Z(n) 
```

**测试**

```
-- Index Scan
SELECT * FROM MyTest
 WHERE UpdateDate > '2010-01-02' AND UpdateDate < '2020-01-01'
-- Index Seek
 SELECT * FROM MyTest
 WHERE UpdateDate > '2010-01-02' AND UpdateDate < '2010-01-05'

-- Index Scan
SELECT *
FROM MyFunction('2010-01-02', '2020-01-01')
-- Index Scan
SELECT *
FROM MyFunction('2010-01-02', '2010-01-05')

-- Index Scan
SELECT *
FROM MyFunction2('2010-01-02', '2020-01-01')
-- Index Seek
SELECT *
FROM MyFunction2('2010-01-02', '2010-01-05') 
```

# matlab - 从大型文本文件中读取 Matlab 中的数据

> ID：12668992
> 
> 赞同：2
> 
> 时间：2012-10-01T07:20:57.513
> 
> 标签：matlab, import, text-files

我有一个包含大量数据行的文本文件，其中列用空格分隔。如何使用 MATLAB 读取这些数据？我尝试了以下代码但没有成功：

```
fid = fopen('file.txt');

M = textscan(fid, '%f %f %f');

x = M{1};

y = M{2};

z = M{3}; 
```

数据如下图（列不等间距）：

```
4.55686    0.88751    4.71368       0.00000       0.00000   879.7   0.143   1.77  1  1  Iron - Alpha

4.55686    0.88751    4.71368       0.00000       0.00000   879.7   0.143   1.77  1  1  Iron - Alpha

4.55686    0.88751    4.71368       0.00000       0.00000   879.7   0.143   1.77  1  1  Iron - Alpha

4.55686    0.88751    4.71368       0.00000       0.00000   879.7   0.143   1.77  1  1  Iron - Alpha

4.55686    0.88751    4.71368       0.00000       0.00000   879.7   0.143   1.77  1  1  Iron - Alpha

4.55686    0.88751    4.71368       0.00000       0.00000   879.7   0.143   1.77  1  1  Iron - Alpha 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:15:57.267

首先，考虑您的数据文件。每行包含 10 个数字和 3 个字符串。很容易认为它包含 10 个数字和 1 个字符串，但由于使用空格作为分隔符并且字符`Iron - Alpha`没有用引号括起来，所以它们构成 3 个字符串，而不是 1 个。

Next, `textscan` will only behave itself as you wish if you provide a complete description of the input line in the format specification. For example, the following

```
 M = textscan(fid, '%f %f %f %f %f %f %f %f %f %f %s %s %s') 
```

works just fine for me. Since you only want the first 5 columns of data, and this reads all the data, you can easily delete the unwanted columns.

If you want or need to avoid reading the unwanted data you'll have to get a little smarter. You can instruct `textscan` to ignore specific fields like this:

```
 M = textscan(fid, '%f %f %f %f %f %*f %*f %*f %*f %*f %*s %*s %*s') 
```

which reads only the first 5 fields in each line. The documentation will point you towards ways of refining your reading routine even further.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T08:26:54.910

请尝试 dlmread。

```
data = dlmread('file.txt'); 
```

并检查分隔符是否为空格。它可能包含不可见的字符 '\t'。

# asp.net-mvc - MVC4：外部（OAuth）身份验证和映射到其他表/实体

> ID：12668995
> 
> 赞同：0
> 
> 时间：2012-10-01T07:21:22.953
> 
> 标签：asp.net-mvc, oauth, asp.net-mvc-4

我正在构建一个 MVC4 应用程序，需要使用外部身份验证（Facebook 等）。我的工作正常。我看到 SimpleMembershipProvider 创建了 2 个单独的表来处理这个问题：“ **webpages_Membership** ”和“ **webpages_OAuthMembership** ”。我需要将其他表（外键）映射到用户 ID。问题是两个表都有一个彼此无关的用户 ID。如果需要，我可以忽略数据库中的外键（虽然不喜欢那样），但更大的问题是：在代码中，我将如何确定用户是在外部还是本地获得授权，以便我知道从哪里获取他的其他信息？具体来说，我有一个用户配置文件表，我会将其他属性映射到.. 有 2 种不同类型的用户，如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:29:59.067

是的，我已经了解了更多关于 MVC4 和 SimpleMembershipProvider 的信息，现在我看到两个表上的用户 ID 实际上是名为 UserProfile 的父表的外键。因此，用户 ID 仍然是唯一的。只是映射与我习惯使用的标准 ASP.NET 成员资格提供程序有点不同。电子邮件地址和所需的任何其他属性都可以轻松应用于 UserProfile 表。