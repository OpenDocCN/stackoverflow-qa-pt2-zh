# StackOverflow 问答 14276000-14276999

# javascript - Javascript：文本字符串仅包含字母数字、$ 和 _

> ID：14276001
> 
> 赞同：-5
> 
> 时间：2013-01-11T10:19:22.397
> 
> 标签：javascript

举个例子 To text string 仅包含字母数字，$ 和 _ 使用 javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:04:09.690

var 正则表达式 = /[0-9a-zA-Z$_]+/ig

有关更多信息，请参见此处

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

# apache - 其他系统不挑灯IP地址

> ID：14276002
> 
> 赞同：0
> 
> 时间：2013-01-11T10:19:26.000
> 
> 标签：apache, windows-server-2008, lamp, ubuntu-12.04

我有一个要求，我需要在通过 VM 安装在 Windows 服务器内的 Ubuntu 上设置 PMA。我已经安装了它，它在 Ubuntu 中运行良好。但我想使用 phpMyAdmin 和来自 LAN 网络不同系统的其他应用程序。

我已经配置了启用站点的默认文件，但我无法从不同的系统访问它。它在 Windows 上显示了两个 ip 地址，它显示`1.2.3.4`为虚拟框的 ip 地址，当我看到 Ubuntu 的网络设置时，它显示`5.6.7.8`为它的 ip 地址。

现在的问题是，当我使用`1.2.3.4`ip 地址时，它显示的是安装在 Windows 上的 IIS 服务器，当我在启用的站点中配置默认​​文件时，`5.6.7.8`我只能在 Ubuntu 中使用它，而不是在其他系统中，甚至在 Windows 中安装 Ubuntu 的服务器。

请提出任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:22:52.710

首先禁用 IIS，因为它使用端口 80，这与 VM 内的 apache 使用的端口相同。

其次查看 NAT 配置并确保您从 VM 导出端口 80 作为主机的端口 80。

第三，您可能想使用[`Vagrant`](http://vagrantup.com)它，它是一个 VirtualBox 命令行 VM 管理器，有很多花里胡哨。如果您想尝试`Vagrant`，我会发布一个`Vagrantfile`，这样您就可以快速开始。

## 流浪文件

```
# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant::Config.run do |config|
    #     Specify the virtual machine base box file. This box file
    # is actually a compressed VMDK file with some aditional
    # settings.
    #     The one specified here is a default Ubuntu Lucid Lynx
    # 32bit install but you can find many others online. The url is
    # external (HTTP) because Vagrant cand download this box if you
    # don't already have it
    config.vm.box = "MyVM"
    config.vm.box_url = "http://files.vagrantup.com/lucid32.box"

    #     Tells VirtualBox to not open a GUI, it helps you avoid 
    # having a window for VirtualBox and another window for the VM.
    #     For server management windows are not necessary you can
    # connect to the VM using SSH (putty for example).
    config.vm.boot_mode = :headless

    #     In this section every pair of parameters is a VBoxManage
    # parameter/value configuration.
    config.vm.customize [
        "modifyvm", :id, 

        #     Specify the virtual machine name you want to see in
        # VirtualBox
        "--name", "MyVM",

        #     Memory for the VM
        "--memory", "2048",

        #     This fixes a bug that makes the guest not have DNS
        # proper access and implicitly not internet.
        "--natdnsproxy1", "on",
        "--natdnshostresolver1", "on"
    ]

    #     This forwards port 80 to port 4567
    config.vm.forward_port 80, 4567

    #     This mounts a shared folder between your machine and the
    # VM. The host directory is the current working directory (the
    # one you have put your Vagrantfile in). The directory is
    # mounted inside the guest as /vagrant
    config.vm.share_folder "v-root", "/vagrant", "."
end 
```

# objective-c - 如何删除目标c中文本中的前N个空格？

> ID：14276006
> 
> 赞同：0
> 
> 时间：2013-01-11T10:19:35.283
> 
> 标签：objective-c, whitespace, trim

如果有的话，我想从给定的字符串中删除第一个空格。

堆栈溢出不允许我在单词前输入空格。所以，我会用文字来解释我的要求。

考虑输入单词以大约 4 个空格和空格后的一个句子开头。我应该删除前 4 个空格。

也就是说，我应该从给定字符串中的每个字母开始测试。如果字母是空格，我应该删除它，直到我得到一个字母/数字。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:22:48.793

试试这个代码

```
NSString *val = @"   Test";
val = [val stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]];
NSLog(@"%@",val); 
```

希望对你有帮助。。

# c# - 启用多选的单元格/表格内的 Kendo Grid 文本选择

> ID：14276008
> 
> 赞同：1
> 
> 时间：2013-01-11T10:19:45.113
> 
> 标签：c#, javascript, jquery, .net, kendo-ui

我想让启用多行选择的网格内的文本选择成为可能。我对这个问题的解决方案是使用例如 CTRL 键来临时禁用多选，使用单行选择来启用默认文本选择机制。

我不知道在初始化后是否有更改网格选项的解决方案（我自己也想不通）我在 C# 和 Razor 扩展中使用 Kendo MVC 来创建网格。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:14:47.607

[使用与此](https://stackoverflow.com/questions/14279285/avoid-right-click-on-kendo-grid/14279587#14279587)问题中建议的方法相同的方法。基本上对于您的情况，它看起来像这样：

```
$(function(){
    $('#GridName').data('kendoGrid').tbody.on('mousedown',function(e){
        if(e.ctrlKey){
            e.stopImmediatePropagation()
        }
    })
}) 
```

# android - Android 错误报告 - 没有 Google Play

> ID：14276010
> 
> 赞同：2
> 
> 时间：2013-01-11T10:19:46.057
> 
> 标签：android

我的应用程序不在 Google Play 上。当应用程序崩溃时，有没有办法将错误报告从 LogCat 发送到电子邮件/服务器数据库？

如何？

谢谢，莱斯利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:40:12.217

您可以查看[ACRA](https://github.com/ACRA/acra)，它允许您自动处理崩溃并将其链接到错误跟踪器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:25:21.577

在您的设备上安装[日志收集](https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector&hl=es)器。收集设备日志并使用您选择的方法（电子邮件、消息传递等）将其发送给开发人员。

**编辑：** 您也可以使用此命令在 SD 卡中保存日志猫

```
logcat -d -v threadtime -f /mnt/sdcard/LogCatApp.txt -s YOURTAG 
```

请注意，您需要添加 Log.d("YOURTAG", "info here"); 为了看到一些东西，你也可以用这个保存一个完整的 logcat

```
logcat -d -v threadtime -f /mnt/sdcard/LogCatApp.txt 
```

希望能帮到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:40:21.977

我在工作中使用[hockeyapp](http://hockeyapp.net/)。易于分发和管理版本，并且有一个崩溃报告器可以向您发送 logcat 跟踪。我推荐它！

# eclipse - 如何在 EMF 中使用孩子的属性

> ID：14276011
> 
> 赞同：1
> 
> 时间：2013-01-11T10:19:54.300
> 
> 标签：eclipse, eclipse-rcp, eclipse-emf, eclipse-pde

我有一个像这样的示例 EMF 层次结构 -

*   **父级** ：形状
*   **孩子 1** : 圆圈
*   **孩子 2** : 正方形
*   **孩子 3** : 矩形

现在我想在 Eclipse 中以这样的方式生成我的属性视图。*我有一个带有ShapeType*的下拉菜单，并根据我想要显示子元素属性的形状类型。

本质上，我想根据父项中的“类型”选择来显示/编辑子属性。

有什么想法我能做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:02:44.473

您无法轻松解决此问题，因为在这种情况下，下拉菜单需要更改对象的 EMF 类型，这会导致 Java 类更改。要使这样的事情起作用，您必须创建一个新的 EObject 实例，复制所有相关属性，并删除旧对象（并可能更新选择）。

因此，总而言之，我相信，您想要的基本 EMF 工具是不可能实现的，但是，如果您提供自定义模型操作命令，它应该是可能的。

其他事情，您可以尝试（如果可能在您的域中）：

*   将所有数据移动到父对象的属性中，添加 EValidators 以防止出现不一致的状态，并更新默认的 EMF Edit 命令以过滤掉不必要的编辑器。丑陋，但可能工作。
*   创建自定义表单/编辑器，在手动编码编辑过程中管理对象删除/添加。

# objective-c - NSSet 使用谓词返回匹配给定类的对象

> ID：14276018
> 
> 赞同：7
> 
> 时间：2013-01-11T10:20:20.870
> 
> 标签：objective-c, nspredicate, nsset

假设我有一个 NSSet，其中包含 id<Shape> 类型的对象集合

. . . 其中有 CircleShape、SquareShape、HexagonalShape 实例放入其中（不是真正的协议或类名）。.

是否可以使用谓词或另一行代码来返回 CircleShape 的所有实例？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T10:34:56.630

您可以像这样使用基于块的谓词：

```
NSSet *yourSet = ...;
NSPredicate *pred = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    return [evaluatedObject isKindOfClass:[CircleShape class]];
}];
NSSet *filteredSet = [yourSet filteredSetUsingPredicate:pred]; 
```

这将返回 的所有实例`CircleShape`或子类`CircleShape`。`isMemberOfClass`如果您只想要类的实例而不想要子类的实例，请使用。

# sharepoint-2010 - 如何使用 C# 在 SharePoint 2010 中隐藏自定义用户组的默认网站模板

> ID：14276022
> 
> 赞同：1
> 
> 时间：2013-01-11T10:20:36.607
> 
> 标签：sharepoint-2010, sitetemplate

我需要在 C#`hide`中使用所有编程。`default site templates from a custom user group except Blog and custom site templates`

我有`Level - 2 SharePoint Coordinator group`它应该允许用户从我的自定义站点模板和博客创建站点，所有其他站点模板都应该被隐藏。

我`Level - 3 SharePoint Coordinator group`让它具有完全控制权限级别，因此该组用户应该拥有所有可用的站点模板。

我的代码：

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        SPWeb web = properties.Feature.Parent as SPWeb;
        SPWebTemplateCollection templates = web.GetAvailableWebTemplates(1033, true);
        foreach (SPWebTemplate template in templates)
        {
            if (template.Name != "Blog" && template.DisplayCategory =="CUSTOM")
            {
                //how to attach the user group to a site template or any other suggestions
            }
        }
    } 
```

**我的问题是：** 那么如何将用户组附加到站点模板或如何将自定义站点模板显示到 Level - 2 和 Level - 3 组的所有站点模板？

部分答案。

谢谢西加戴夫。我能够隐藏除博客和我的自定义站点模板之外的默认站点模板。下面是代码。

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        try
        {
            SPWeb web = properties.Feature.Parent as SPWeb;
            SPWebTemplateCollection templates = web.GetAvailableWebTemplates((uint)1033);
            Collection<SPWebTemplate> collection = new Collection<SPWebTemplate>();
            foreach (SPWebTemplate template in templates)
            {
                if(template.Name == "BLOG#0" || template.DisplayCategory == "Custom")
                collection.Add(template);
            }
            web.SetAvailableWebTemplates(collection, (uint)1033);
            web.Update();
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex.ToString());
        }
    }

    public override void FeatureDeactivating(SPFeatureReceiverProperties properties)
    {
        try
        {
            SPWeb web = properties.Feature.Parent as SPWeb;
            // Show all available web templates
            web.AllowAllWebTemplates();
            web.Update();
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex.ToString());
        }
    } 
```

此代码隐藏所有用户的模板，包括网站集管理员，如何启用或向 SC 管理员显示所有网站模板？谢谢。

# java - 在 javafx 中的第一个控件中获取焦点

> ID：14276028
> 
> 赞同：3
> 
> 时间：2013-01-11T10:20:44.673
> 
> 标签：java, javafx

我的布局像：

![在此处输入图像描述](../Images/465f16fab6932c739ea74539424eb857.png)

当我第一次按 TAB 按钮时，我想在公司名称 Texfield 上获得焦点，但现在我在添加按钮上获得焦点，我该如何管理它？

我尝试像这样的代码

```
 ChangeFocus(mTextFieldCompanyName, mTextAreaAboutUs);
    ChangeFocus(mTextAreaAboutUs, mTextAreaContactUs);
    ChangeFocus(mTextAreaContactUs, mButtonVideo);
    ChangeFocus(mButtonVideo, mButtonImage);
    ChangeFocus(mButtonImage, mButtonSave);
    public void ChangeFocus(Control mControlFrom,final Control mControlTo)
    {

   mControlFrom.addEventHandler(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {

         @Override
         public void handle(KeyEvent event)
         {
             if (event.getCode() == KeyCode.TAB)
             {
                System.out.println("TAB pressed");
                mControlTo.requestFocus();
                event.consume(); // do nothing
         }
       }
     });

     } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:13:36.713

尝试将您的 mTextFieldCompanyName 包装在里面`Platform.runLater()`

```
Platform.runLater(new Runnable() {
    @Override
    public void run() {
        mTextFieldCompanyName.requestFocus();  
    }   
}); 
```

希望能帮助到你 ：）

# html - HTA（Html 应用程序）VBScript 读取文本文件行并仅对该行着色

> ID：14276032
> 
> 赞同：1
> 
> 时间：2013-01-11T10:20:50.117
> 
> 标签：html, vbscript, hta

我一直在处理一个聊天 HTA 文件，以便在工作中使用......

:)

它工作得很好，但是有人要求给每个人的文字涂上不同的颜色？

我一直在努力，但我遇到了麻烦，如果可能的话，有人可以帮助我吗？

下面是我所做的基本代码\找到

我已经将每一行放入一个数组中，但随后为我无法解决的每一行分配一种颜色......

或者

如果我不能在不使用文本文件的情况下在 Windows 中显示“聊天”，那会更好\更好（节省清理删除不需要的文本文件..）

还请告诉我如何改进我的编码......我没有那么久......（几个月）

干杯帕维尔。

' HTA 聊天

```
<HTA:APPLICATION 

     SCROLL="auto"
     SINGLEINSTANCE="yes"
     WINDOWSTATE="normal"
>
</head>

<SCRIPT Language="VBScript">

Sub Window_OnLoad
 Window.ResizeTo 400,300
   iTimerID = window.setInterval("Display", 100)
End Sub

    strPath = "C:\Users\Pavle\Desktop\"
    Set wshShell = CreateObject( "WScript.Shell" )
    strSender = wshShell.ExpandEnvironmentStrings( "%USERNAME%" )

Sub Display
    Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objFile = objFSO.OpenTextFile(StrPath & "Chat.txt", 1)

Do Until objFile.AtEndOfStream
    strCharacters = objFile.ReadAll
Loop

 objFile.Close

     DisplayBox.Value = strCharacters

        DisplayBox.ScrollTop = DisplayBox.ScrollHeight

 ' This splits each line.
' sArray = Split(DisplayBox.Value, vbcrlf)

End Sub

Sub InputBox

With document.parentWindow.event
 If .keycode = 13 then
    Const NORMAL_WINDOW = 1

    Const ForAppending = 8

    Set objFSO = CreateObject("Scripting.FileSystemObject")
     Set objTextFile = objFSO.OpenTextFile(StrPath & "Chat.txt", ForAppending, True)
      objTextFile.WriteLine strSender & ":" & Input.Value
       objTextFile.Close

    Input.Value = ""
Set WshShell = CreateObject("WScript.Shell")
WshShell.SendKeys "{BACKSPACE}"

Else
   .cancelbubble = false
     .returnvalue = true
 End If

End With

End Sub

</SCRIPT>
<body>

<textarea name="DisplayBox" rows="6" cols="40"></textarea>
<BR>
<BR>
<BR>
<textarea name="Input" rows="3" onKeydown=InputBox cols="40"></textarea>
</body>
</html>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:34:14.453

以下是您的任务的一些指导方针。

起初，[`textarea`](https://developer.mozilla.org/en-US/docs/HTML/HTML_Elements/textarea)不能有HTML，所以不能用作富文本的填充物。为此，您需要一个`<pre>`或更确切地说是一个。`<div>`例如：

```
<div name="DisplayBox" class="textpad" contenteditable="true"></div> 
```

然后在读取文件时为行添加格式标记。像这样的东西：

```
Dim n
n = 1
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile(StrPath & "Chat.txt", 1)
Do Until objFile.AtEndOfStream
    n = n * (-1)
    strCharacters = strCharacters & "<p class='line" & n & "'>" & objFile.ReadLine() & "</p>"
Loop
objFile.Close
DisplayBox.innerHTML = strCharacters 
```

`<p>`也可以`<div>`。然后你需要一个包含一些类的样式表：

```
.line1 {
    color: red;
}
.line-1 {
    color: blue;
}
.textpad {
    position: relative;
    width: 400px;
    height: 200px;
    border: 2px inset;
    overflow-y: scroll;
} 
```

现在您在`#DisplayBox`. 只需`div`根据需要设置样式即可。

[（顺便说一句，这是我的第一个 VBScript ......）]

# wpf - 我可以用那个滚动查看器做什么？

> ID：14276034
> 
> 赞同：1
> 
> 时间：2013-01-11T10:20:52.123
> 
> 标签：wpf, wpf-controls, scrollview

*   我使用了一个 GroupBox，里面有一个滚动查看器。在滚动查看器里面我放了一个网格并开始放置我的控件（3 个文本块和 7 个文本框）
*   我不能让scrollviewer滚动我的内容..我不知道我是否错过了激活它的东西
*   这是我的 xaml 代码：

    ```
     <GroupBox BorderBrush="#FF0000DD" FontSize="13" FontWeight="Bold" Header="General Information" HorizontalAlignment="Stretch" Margin="363,20,38,486" Name="groupBox1" VerticalAlignment="Stretch" Panel.ZIndex="0">
                        <ScrollViewer Height="Auto" Name="scrollViewer1" Width="Auto" ScrollChanged="scrollViewer1_ScrollChanged" VerticalScrollBarVisibility="Auto" >
                            <Grid Name="grid1" Height="132">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="1" Grid.RowSpan="1" Height="Auto" HorizontalAlignment="Right" Margin="0" Name="textBlock1" Text="Generic ID" VerticalAlignment="Center" FontSize="14" Padding="0" />
                                <TextBlock FontSize="14" Height="Auto" HorizontalAlignment="Right" Margin="0" Name="textBlock2" Text="Generic Name" VerticalAlignment="Center" Grid.Column="1" Grid.Row="1" Padding="0" />
                                <TextBlock FontSize="14" Height="Auto" HorizontalAlignment="Right" Margin="0" Name="textBlock3" Text="Other Names" VerticalAlignment="Center" Grid.Column="1" Grid.Row="2" Padding="0" />
                                <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox1" VerticalAlignment="Center" Width="197" Padding="0" />
                                <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox2" VerticalAlignment="Center" Width="197" Grid.Row="1" Padding="0" />
                                <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox3" VerticalAlignment="Center" Width="197" Grid.Row="2" Padding="0" />
                                <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox4" VerticalAlignment="Center" Width="197" Grid.Row="3" Padding="0" />
                                <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox5" VerticalAlignment="Center" Width="197" Grid.Row="4" Padding="0" />
                                <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox6" VerticalAlignment="Center" Width="197" Grid.Row="5" Padding="0" />
                            </Grid>
                        </ScrollViewer>
                    </GroupBox> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:01:16.513

尝试设置您的 GroupBox 的高度。它正在拉伸以填充整个窗口，并且您的内容正在拉伸以适应。如果您限制 GroupBox 的大小，您将获得 VerticalScroll 并且它将起作用。我将您的代码修改为此，它可以工作：

```
<GroupBox BorderBrush="#FF0000DD" FontSize="13"  FontWeight="Bold" Header="General Information" HorizontalAlignment="Stretch"  Height="132" Name="groupBox1"  Panel.ZIndex="0">
    <ScrollViewer Height="Auto" Name="scrollViewer1" Width="Auto" ScrollChanged="scrollViewer1_ScrollChanged" VerticalScrollBarVisibility="Auto" >
        <Grid Name="grid1" Height="132">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="1" Grid.RowSpan="1" Height="Auto" HorizontalAlignment="Right" Margin="0" Name="textBlock1" Text="Generic ID" VerticalAlignment="Center" FontSize="14" Padding="0" />
            <TextBlock FontSize="14" Height="Auto" HorizontalAlignment="Right" Margin="0" Name="textBlock2" Text="Generic Name" VerticalAlignment="Center" Grid.Column="1" Grid.Row="1" Padding="0" />
            <TextBlock FontSize="14" Height="Auto" HorizontalAlignment="Right" Margin="0" Name="textBlock3" Text="Other Names" VerticalAlignment="Center" Grid.Column="1" Grid.Row="2" Padding="0" />
            <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox1" VerticalAlignment="Center" Width="197" Padding="0" />
            <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox2" VerticalAlignment="Center" Width="197" Grid.Row="1" Padding="0" />
            <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox3" VerticalAlignment="Center" Width="197" Grid.Row="2" Padding="0" />
            <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox4" VerticalAlignment="Center" Width="197" Grid.Row="3" Padding="0" />
            <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox5" VerticalAlignment="Center" Width="197" Grid.Row="4" Padding="0" />
            <TextBox Height="23" HorizontalAlignment="Center" Margin="0" Name="textBox6" VerticalAlignment="Center" Width="197" Grid.Row="5" Padding="0" />
        </Grid>
    </ScrollViewer>
</GroupBox> 
```

结果是：

![在此处输入图像描述](../Images/9d3fbb69944a80b6003083612520ad49.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:55:14.440

我修改了你的代码

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <GroupBox BorderBrush="#FF0000DD" FontSize="13" FontWeight="Bold" Header="General Information" HorizontalAlignment="Stretch" Margin="1,0,0,129" Name="groupBox1" VerticalAlignment="Stretch" Grid.Column="1" Grid.RowSpan="3">
       <ScrollViewer Name="scrollViewer1" Width="Auto"  VerticalScrollBarVisibility="Visible" >
            <Grid  Name="grid1" Width="376" Height="280">
                <TextBlock FontFamily="Times New Roman" FontSize="14" FontWeight="Bold" Height="Auto"  Name="textBlock4" Padding="0" Text="Generic ID" TextAlignment="Right" Margin="-20,0,20,0" />
                <TextBlock FontFamily="Times New Roman" FontSize="14" FontWeight="Bold" Height="Auto"  Name="textBlock5" Padding="0" Text="Generic Name" TextAlignment="Right" Margin="-10,20,10,-20" />
                <TextBlock FontFamily="Times New Roman" FontSize="14" FontWeight="Bold" Height="Auto"  Name="textBlock6" Padding="0" Text="Other Names" TextAlignment="Right" Margin="-15,43,15,-43" />
                <TextBox Height="25" Name="textBox8" Width="225" Margin="22,199,130,44" />
                <TextBox Height="25"  Name="textBox9" Width="225" Margin="20,147,131,95" />
                 <TextBox Height="25" Name="textBox11" Width="225" Margin="20,97,131,159" />
                <TextBox Height="25"  Name="textBox12" Margin="21,122,131,121" />
                <TextBox Height="25"  Name="textBox13" Width="225" Margin="20,159,131,52" />
                <TextBox Height="25"  Name="textBox14" Width="225" Margin="20,222,131,20" />
            </Grid>
        </ScrollViewer>
    </GroupBox>

</Grid> 
```

试试这是否可行。我认为边距和高度是导致问题的原因

# android - Flex 移动应用程序在等待 Web 服务响应时崩溃/挂起

> ID：14276036
> 
> 赞同：0
> 
> 时间：2013-01-11T10:20:54.703
> 
> 标签：android, apache-flex, actionscript, flash-builder

我在用于移动设备的 flash builder 中构建的应用程序中遇到 WSDL/SOAP 服务调用问题。我已经使用内置数据/服务功能的闪存构建器连接到该服务。

在大多数情况下，服务调用运行良好，但偶尔会导致应用程序崩溃 - 在我的 Android 设备上，它完全锁定（旋转动画停止），然后 Android 通知我应用程序没有响应并询问是否我想关闭它。

崩溃似乎经常发生，但没有任何模式。一次它发生在我第三次尝试时，另一次大约花了 30 次，有几次我无法让它发生，大多数时候它发生在两者之间。

似乎崩溃发生在进行服务调用之后但在收到任何响应之前。成功或错误侦听器都不会被解雇。我非常有信心每次都向服务发送完全相同的变量。

我已经在其他应用程序中使用了 Web 服务调用而没有遇到任何问题，所以我不得不假设这个特定的构建中有一些东西导致了问题，但我似乎找不到任何东西。

任何关于可能原因、要测试的事情甚至解决方案的想法都将不胜感激。

谢谢，

杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:31:36.520

您的问题缺乏必要的细节，所以现在我可以建议您设置`Charles`代理并通过它监控您的请求。

如果您同时发送太多请求，您将不会对故障/结果事件有信心，因为空中运行时有限制（无论如何，处理请求超时是一个好习惯）。

# bash - 当前要复制的文件夹/文件的输出文件夹/文件名

> ID：14276039
> 
> 赞同：1
> 
> 时间：2013-01-11T10:21:01.150
> 
> 标签：bash, copy

我不想复制包含文件和文件夹的特定文件夹结构，并有一个输出告诉用户复制的距离。

目前我使用以下内容来复制没有某些特定文件夹的结构：

```
cp -rfv !(Project.buildoutput) $Project_SYNC_DIR 
```

但是`cp -v`输出非常难看：

```
> _55_studio.tests/singles/CustomIdentifier.file -> /Users/<path>/_55_studio.tests/singles/CustomIdentifier.file build.sh
> -> /Users/<path>/build.sh 
```

是否可以仅输出具有干净名称的级别 1 元素。

我当前的文件夹结构：

```
_55_studio
--singles
--mixed
_55_studio.tests
--singles
build.sh
project.settings 
```

复制时输出到以下内容：

```
Copy folder _55_studio
Copy folder _55_studio.tests
Copy file build.sh
Copy file project.settings 
```

有没有一种有效的方法来实现这一目标以及如何实现？

BR，迈贝克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:41:10.750

在单行中使用`find`：

```
find "/path/to/dir" -maxdepth 1 -mindepth 1 -name "Project.buildoutput" -prune -o -exec /bin/bash -c "echo -en \"Copy \"; \
                                                                                                      [ -d '{}' ] && echo -en \"folder \";\
                                                                                                      [ -f '{}' ] && echo -en \"file \"; \
                                                                                                      basename '{}'; \
                                                                                                      cp -fr '{}' \"$Project_SYNC_DIR\"" \; 
```

输出：

```
Copy folder _55_studio
Copy folder _55_studio.tests
Copy file build.sh
Copy file project.settings 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:50:07.957

第一步，提取目录：

```
sed -e 's#^\([^/]\+\) -> .*$#\1#g' -e 's#^\([^/]\+\)/.*$#\1#g' 
```

第一个替换，替换像这样的行：

```
`file_name' -> `path/to/copy/file_name' 
```

到：

```
file_name 
```

第二个替换，替换像这样的行：

```
`path/to/file' -> `other/path/to/copy/file' 
```

到：

```
path 
```

请注意，我添加了 ` 和 ' 因为我的 cp 添加了它们。

第 2 步，删除重复项：

```
uniq 
```

第三步，查看是文件还是目录：

```
while read f; do \
  if [ -d $f ]; then \
    echo Copy folder $f \
  else \
     echo Copy file $f \
  fi \
done 
```

所以：

```
cp -rfv !(Project.buildoutput) $Project_SYNC_DIR | \
  sed -e 's#^`\([^/]\+\)'"'"' -> .*$#\1#g' \
      -e 's#^`\([^/]\+\)/.*$#\1#g' | \
  uniq | \
  while read f; do \
    if [ -d $f ]; then \
      echo Copy folder $f; \
    else \
      echo Copy file $f; \
    fi \
  done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:17:00.880

一种非常接近您所要求的有效方法：

```
for src in !(Project.buildoutput); do 
    stat -c "Copy %-14F %n" "${src}"; cp -rf "$src" $Project_SYNC_DIR; done 
```

（需要`shopt -s extglob`扩展通配符： ! 反转匹配）

或显示每个文件/目录

```
unbuffer cp -rfv !(Project.buildoutput) $Project_SYNC_DIR | 
    while read src dd dst; do stat -c "Copy %-14F %n" "$src"; done 
```

上面使用的GNU `stat`，代替 *BSD 使用`stat -f "Copy %-14SHT %N"`。

我的（GNU coreutils 6.9）`cp -v`坚持在输出中打印断引号，使用上述方法的快速破解是`tr`在管道中添加一个：

```
...  | tr -d \`\' | while ... 
```

如果您的文件/目录名称中有空格或单引号，则需要更详细的内容。

如果你喜欢 perl 做你的繁重工作（并处理 `' 引用）；

```
... | perl -ne $'/\`(.*)\' -> \`(.*)\'/ && 
  printf("Copy %-14s %s\n",(-f $1 ? "file" : -d $1 ? "directory" : "<other>"),$1);' 
```

如果您有很多文件，这应该会更有效，因为只需要一个额外的进程，而不是每个文件/目录复制一个。

在复制期间获得更多反馈的常见解决方案是使用`rsync`：

```
rsync --progress -hrv src/ dest/ 
```

`rsync`比 更有效`cp`，它不会复制不需要的文件，添加“ `-W`”以强制复制`cp`.

# java - Java，线程不启动

> ID：14276040
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:21:02.740
> 
> 标签：java, multithreading

我不明白为什么这只打印 2 个活动线程。

```
/* worker from the example */
for(int i = 0 ; i < 4 ; ++i){
    Worker worker = new Worker(articles, factory);
    worker.start();
    workers.add(worker);            
}       

System.out.println("Number of active threads : " + Worker.activeCount()); 
```

我的 Worker 类是这样写的：

```
class Worker extends Thread{} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:24:36.580

线程需要时间来启动和执行。当前线程不会停止并等待它们启动。这意味着在您打印该消息时，您可能看不到任何线程启动。

注意：线程的全部目的是尽可能独立地运行代码。除非您明确编写代码来保证这一点，否则您无法对事情发生的顺序做出假设。

# django - 搜索查询集的 __contains 过滤器有用吗？

> ID：14276043
> 
> 赞同：1
> 
> 时间：2013-01-11T10:21:09.323
> 
> 标签：django, filter, elasticsearch, contains, django-haystack

我在我的一个项目中运行[django-haystack](http://haystacksearch.org/) v2.0.0和[pyelasticsearch v0.3](https://github.com/rhec/pyelasticsearch)。我有一个`SearchView`渲染列表模板，我想集成结果过滤。搜索运行良好，但我使用的过滤器根本不起作用？我使用以下过滤器**`__contains`**, **`__lte`**，**`__gte`**但它们似乎都不会对结果列表产生影响。

比如说，我有 10 个`SearchView`基于搜索词的结果。在同一个模板上，我有一个过滤器表单（使用该`GET`方法）并调用相同的`SearchView`. 现在在 SearchView 下，我定义了一个自定义私有`_filter_results`方法，如下所示。

```
 def _filter_results(results, filters):
        """  
        This method would return the filtered search results, based on
        the filters applied by a user.
        """

        for item in filters:
            if item == 'location':
                results = results.filter(locations__contains=filters[item])
                print results
            if item == 'age_min':
                results = results.filter(workex_min__gte=filters[item])
            if item == 'age_max':
                results = results.filter(workex_max__lte=filters[item])
        return results 
```

现在，我将结果传递给模板，如下所示：

```
context {'results' : _filter_results(self.results, self.result_filters)} 
```

`self.result_filters`是我在`SearchView`'s`__call__`方法中设置的过滤器字典，它看起来像这样。

```
{
    'location' : request.GET.get('location'),
    'age_min' : request.GET.get('age_min'),
    'age_max' : request.GET.get('age_max'),
} 
```

我没有收到任何错误，并且我仔细检查了每个过滤器值是否正在传递给该`_filter_results`方法。但结果仍然保持不变。

如果在 10 个条目的结果列表中，我尝试使用其中没有一个条目包含该位置的位置进行过滤，我仍然会得到相同 10 个条目的结果。可能是什么原因 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:21:03.400

我没有将 Haystack 与 ElasticSearch 一起使用，但在 Solr 中广泛使用它，但它也应该与 ElasticSearch 相同。

您应该使用 results.narrow() 方法而不是过滤器。Filter 方法本质上将在过滤器中附加主要的初始查询词，并在它们之间运行“OR”查询，因为默认运算符在 haystack 中设置为“OR”。

窄() 方法专门用于过滤初始结果集并进一步细化它们，这也有利于使用窄运行过滤查询，因为在搜索引擎中构造的查询是不同的，并且可以更好地利用内置缓存。

```
def _filter_results(results, filters):
    """  
    This method would return the filtered search results, based on
    the filters applied by a user.
    """

    for item in filters:
        if item == 'location':
            results = results.narrow('locations:%s' % filters[item])
            print results
        if item == 'age_min':
            results = results.narrow('workex_min:[%s TO *]' % filters[item])
        if item == 'age_max':
            results = results.narrow('workex_max:[* TO %s]' % filters[item])
    return results 
```

这也是它与 Solr 一起工作的方式，但是 haystack 方法的概念是相同的，唯一的区别在于每个 SearchEngine 的后端文件。您应该查看 haystack/backends/elasticsearch_backend.py 以获得更好的理解。

也看看 FacetedSearchView 和 FacetedSearchForm

# ruby-on-rails - 关于在 Rails 上使用 migrate 的指南

> ID：14276046
> 
> 赞同：2
> 
> 时间：2013-01-11T10:21:12.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我已经阅读了 Rails 3 上的“迁移”文档（[Rails 3.0 Relese Notes Migrate](http://edgeguides.rubyonrails.org/3_0_release_notes.html)），但我有一些疑问。

例如我创建了两个类：

```
rails generate scaffold User name:string age:integer height:float

rails generate scaffold Hat type:string width:float height:float 
```

这会创建模型、控制器、... **User**和**Hat**及其迁移类：xxx_create_users.rb 和 xxx_create_hats.rb

好的，现在我们猜测我们要修改 User 类并删除 height 属性，并添加 Users 和 Hats 之间的关系：

**用户**

```
class User < ActiveRecord::Base
  attr_accessible :name, :age

  has_many :hats
end 
```

**帽子**

```
class Hat < ActiveRecord::Base
  attr_accessible :type, :width, height

  belongs_to :user
end 
```

我猜的选项：

1.  我删除所有文件 xxx_create_xxx.rb 然后我将再次创建：（`rails generate migration CreateUser`对于 Hat 也是如此）

2.  我创建了一个新的迁移文件：`rails generate migration MyNewMigration`我在其中手动编码所有更改。

是否有另一种方法可以自动更改我的类以将其传递到数据库？正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:35:08.193

迁移的想法是你有一个严格的故事情节，你可以从任何一点开始，向前*和*向后。这意味着永远不需要删除迁移。

相反，您创建了一个新的迁移，它将更改、删除或添加数据库字段。

在您的示例中，您将保留旧迁移，然后创建一个新迁移，如下所示：

```
rails g migration change_user_fields 
```

你在里面`def up`写

```
remove_column :table_name, :column_name
change_column :table_name, :column_name, :data_type 
```

添加`def down`- 这将在迁移反转时运行`rake db:rollback`。内`def down`放：

```
add_column :table_name, :column_name # add the field that you removed (s.a.)
change_column :table_name, :column_name, :data_type # change back to old data type 
```

Rails 3 为您提供了一个很好的快捷方式，可以通过以下方式在表中添加和删除字段：

```
rails g migration add_something_to_users name:string 
```

这将自动创建一个迁移，该迁移将一个名为 name 的字段添加到 users 表中，其数据类型为字符串。或者

```
rails g migration remove_something_from_users name 
```

这将自动创建迁移以从用户表中删除名称字段。这些快捷方式和创建的迁移文件不需要`def down`-rails 将自动足够聪明地在反转时弄清楚这一点。

在这两种情况下，您都可以将“某物”一词替换为您喜欢的任何内容。

但是，我知道无法使用快捷方式更改数据类型，因此您需要进入迁移文件并手动执行此操作。

最终，只要运行`rake db:migrate`，你就会一切就绪！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:27:52.577

Scaffold 仅自动执行固定命令，因此如果您使用支架创建模型及其属性，您的迁移将仅包含您在命令行中指定的字段。无法自动跟踪更改。
如果您在数据库上添加/删除/更改某些内容，则必须手动设置它。迁移很有用，因为您可以按时跟踪这些更改。
所以我建议你永远不要删除迁移。在您描述的这种特殊情况下，您只需创建另一个以反映数据库上的新更改，总共保留 3 个迁移，而不是删除并创建另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:28:54.660

您的问题的答案应该是替代 2。但是，如果您只想添加或删除属性，则不必全部手动完成：http: [//guides.rubyonrails.org/migrations.html#creating-a-独立迁移](http://guides.rubyonrails.org/migrations.html#creating-a-standalone-migration)

# java - 使用 AlarmManager 安排时未发布 Android 通知

> ID：14276050
> 
> 赞同：0
> 
> 时间：2013-01-11T10:21:23.903
> 
> 标签：java, android, android-intent, android-notifications

我试图在一段时间后从我的游戏中发布通知。我从我的 BroadcastReciever 类的 onReceive() 方法调用 PostNotification() 函数，在游戏开始 1 分钟后发布通知。

广播接收器

```
public class NotificationReciever extends BroadcastReceiver
{

private static int count=0;

@Override
public void onReceive(Context context, Intent intent)
{
    try 
    {
         Bundle bundle = intent.getExtras();
         String message = bundle.getString("message");
         int id = bundle.getInt("id");
         PostNotification(message, id);
    }
    catch (Exception e) 
    {
         e.printStackTrace();
    }
    wl.release();
}

public void PostNotification(String notif, int id)
{
    Notification notify=new Notification(R.drawable.icon,
            notif,
            System.currentTimeMillis());
Intent intent = new Intent(MyUtil.getInstance().context, MyActivity.class);
        PendingIntent i=PendingIntent.getActivity(MyUtil.getInstance().context, 0, intent, 0);
        notify.setLatestEventInfo(MyUtil.getInstance().context, "Title", notif, i);  
        MyActivity.notifyMgr.notify(id, notify);
        }
    }
} 
```

我从 MyActivity 的 onCreate() 调用 ScheduleNotification()

```
public void ScheduleNotification()
{
     Calendar cal = Calendar.getInstance();
     Intent intent = new Intent(MyUtil.getInstance().context, NotificationReciever.class);
     intent.putExtra("id", NOTIFY_ID);
     intent.putExtra("message", "message");
     PendingIntent sender = PendingIntent.getBroadcast(MyUtil.getInstance().context, NOTIFY_ID, intent, PendingIntent.FLAG_UPDATE_CURRENT);
     AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
     am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
} 
```

但我没有收到任何通知，并在我的 logcat 中收到以下错误

```
 01-11 19:28:32.455: W/System.err(20661): java.lang.NullPointerException
01-11 19:28:32.475: W/System.err(20661):    at android.content.ComponentName.<init>(ComponentName.java:75)
01-11 19:28:32.475: W/System.err(20661):    at android.content.Intent.<init>(Intent.java:2893)
01-11 19:28:32.475: W/System.err(20661):    at com.games.TestGame.NotificationReciever.PostNotification(NotificationReciever.java:41)
01-11 19:28:32.475: W/System.err(20661):    at com.games.TestGame.NotificationReciever.onReceive(NotificationReciever.java:27) 
```

我知道在创建通知意图时我做错了。当我直接从我的活动中调用时，我会正确收到通知，但是当我通过警报调用它时出现问题

> Intent intent = new Intent(MyUtil.getInstance().context, MyActivity.class);

谁能告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:32:09.643

您使用的 Notification 构造函数的*when*参数仅用于显示目的。它不会延迟通知的显示。

使用闹钟怎么样？不过，它只会接受一个 Intent。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:34:01.830

这是完全的理解错误。看细节`public Notification (int icon, CharSequence tickerText, long when)`。如下所示：

**icon** 要放入状态栏中的图标的资源 ID。

**tickerText**通知首次激活时在状态栏中流过的文本。

**when** 在时间字段中显示的时间。在 System.currentTimeMillis 时基中。

这意味着它只是在通知消息中显示，而不是在通知时间。如果你想在未来的某个时间发出通知，你必须为那个时间设置一个 AlermManager。AlermManager 将调用 BroadcastReceiver。所以你还必须创建一个广播接收器，你必须在其中设置通知。你可以通过这个[链接](http://sankarganesh-info-exchange.blogspot.com/2012/09/notification-in-android-u%20sing.html)。

# python - Python 线-圆碰撞

> ID：14276051
> 
> 赞同：0
> 
> 时间：2013-01-11T10:21:27.823
> 
> 标签：python, line, collision-detection, pygame, geometry

这个问题再次出现在 PyParticles4 上。
[链接到最后一个问题以供参考](https://stackoverflow.com/questions/14137475/python-ball-physics-simulation)

如果不清楚请评论...

我正在开发一个射击游戏，很像[这样](http://www.gamenet.com/game/Shooting-Games-Avalon-Siege/)，但是在平坦的土地上，墙壁每转一圈都会改变它的高度（游戏中的一些有趣的东西）并且有 2 个玩家，每个玩家都有一个可以移动一段距离的大炮（有一个限制，他们不能从他们的起始位置移动超过一定的量）在每轮（玩家决定他是否想移动）。

我的代码：

```
class Bullet(PyParticles.Particle):
    def hit_s(self,shooterlist):
        for shoot in shooterlist:
            #collision with the rect
            dist = math.hypot(dx,dy)
    def hit_w(self,wall):
-------------------------
        #confusion
-------------------------
    # other funcs to added
class Shooter:
    def __init__(self,pos,size):
        self.rect = pygame.Rect(pos,size)
    # other funcs to added
class Wall:
    def __init__(self,(sx,sy),(ex,ey),width):
        self.start = (sx,sy)
        self.end = (ex,ey)
        self.width = width
# (things needed for pygame.draw.line()). 
```

## 我的问题

子弹与墙壁的碰撞。关于如何知道子弹何时击中墙壁的任何想法？

我认为更快的东西会更好..

此外，如果球撞到墙上，球应该会反弹回来，这样它就有机会击中最先击球的球员（强墙！），所以墙不会像游戏中那样被切开（提到在开始时）。

# javascript - 如何从 onclick 另一个函数传递变量？

> ID：14276052
> 
> 赞同：0
> 
> 时间：2013-01-11T10:21:34.940
> 
> 标签：javascript, jquery

我尝试从 onclick 另一个函数传递一个变量。内容是在运行时创建的，所以我使用`on()`JQuery 并且不知道如何传递变量。

```
<a class="call" href="#" onclick="call('.$id['id'].');">...</a> 
```

这里的js：

```
$('.call').on("click", function(id) {
    alert(id);
}); 
```

警报响应`[object Object]`

你不应该是这样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:23:51.190

怎么样

```
<a class="call" href="#" id="'.$id['id'].'">...</a>

$('.call').on("click", function(e) {
    e.preventDefault(); // unless you need to follow the link too
    alert(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:27:06.990

改变：

```
<a class="call" href="#" onclick="call('.$id['id'].');">...</a> 
```

到：

```
<a href="#" onclick="call('<?php echo $id['id']; ?>')">...</a> 
```

和改变：

```
$('.call').on("click", function(id) {
    alert(id);
}); 
```

到：

```
function call(id)
{
    alert(id);
} 
```

# vhdl - Mod-M 计数器 无符号值没有信号

> ID：14276053
> 
> 赞同：1
> 
> 时间：2013-01-11T10:21:41.207
> 
> 标签：vhdl, fpga, hdl

我正在为我的 Nexys2 板编写 RS232 模块。我目前的波特率控制器有问题，我想将其设置为 19200。

为此，我使用了 Mod-M 计数器，经过多次 ISim 模拟后，我的代码的问题在于 mod-m 计数器，因为它没有产生任何滴答声。

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

-- Uncomment the following library declaration if using
-- arithmetic functions with Signed or Unsigned values
use IEEE.NUMERIC_STD.ALL;

-- Uncomment the following library declaration if instantiating
-- any Xilinx primitives in this code.
--library UNISIM;
--use UNISIM.VComponents.all;

entity baud_rate is
    generic (
    N: integer := 8;
    M: integer :=163);
    Port (clk, reset : in  STD_LOGIC;
           tick : out  STD_LOGIC;
              q : out STD_LOGIC_VECTOR(N-1 downto 0));

end baud_rate;

architecture Behavioral of baud_rate is
signal r_reg :  unsigned(N-1 downto 0);
signal r_next : unsigned(N-1 downto 0);
begin
process(clk,reset)
begin
    if (reset ='1') then
        r_reg <= (others=>'0');
    elsif(clk'event and clk='1') then 
    r_reg <= r_next;
    end if;
end process;

r_next <= (others =>'0') when r_reg=(M-1) else r_reg+1;
tick <='1' when r_reg=(M-1) else '0';
q <= std_logic_vector(r_reg);

end Behavioral; 
```

我已经测试了所有的 clk 输入并且运行良好，问题似乎出在 r_reg 和 r_next 寄存器上。在 ISim 中，当在 q 上输出其中任何一个时，我得到 UUUUUUUU，因此它们似乎没有产生信号。由此我可以推断出两个 r_reg 和 r_next 寄存器没有被创建或存储值，使用无符号时是否有问题？

为了确保三重，我什至已经从使用 VHDL 的 FPGA Prototyping 一书中复制了 mod-m 计数器（这是显示的代码）但是这仍然不起作用并且 q 输出是 UUUUUUUU。

如果有任何更好的方法可以从 nexys2 50mz 时钟创建波特率，那也将不胜感激！

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:16:04.460

坦率地说，如果人们期望从一本提供此类示例的书中学习 VHDL，我感到很震惊。我知道作者有一本关于 Verilog 的类似书：人们最终会认为 VHDL 只是更冗长的 Verilog 吗？

具体批评（实际上是7,8更多的意见）：

1) 虚假类型转换。Q 代表一个无符号数。所以让它不签名！

波特率发生器不是 FPGA 中唯一的东西，所以 Q 不太可能是片外端口。制作顶级片外端口 std_logic_vector 有很好的论据，但即使这样也不是强制性的。但是，如果您的客户的规范或编码风格坚持在端口上进行虚假类型转换；跟着它。

2）DRY原则：

```
package CPU_types is
    subtype baud_count is unsigned(7 downto 0);
end CPU_types; 
```

发现维护的简化。
如果您在多个地方使用子类型，请将其放在一个包中；通用代码重用工具。

3) 缩进、格式化。（我认识到这可能已被编辑器设置弄乱了）。它增加了阅读它的大脑负荷。不过，我在这里所做的并不是 The One Way。

4) 假括号围绕逻辑表达式。无害，但看起来像 C 程序员的拐杖。

5) 古色古香的 clk'event 风格。明年，rising_edge 函数将大到可以饮用（在美国。在英国，它已经在每个星期六晚上都贴满了几年了......）

6) r_reg 和 r_next 的“双进程”风格。他是否也在 next_state 上编写了带有单独组合过程的状态机？鉴于此，我猜是这样。单进程状态机更容易、更小（写起来：它们不会生成更小的硬件）和更安全。

7) 我作弊了，我的tick 比原来晚了一个周期。如果这很关键，请恢复外部“tick”分配。我还让它同步，这将有助于提高性能。有些人更喜欢`tick <= '0'`在 else 子句中；但是我使用的默认赋值是安全的，并且可以防止大型设计中出现很多错误（以及不必要的 else 子句）。

8）Q的赋值也可以带入过程；如果您将 r_reg 设为流程变量，则必须这样做。还有其他变化和偏好的空间。

```
 library IEEE;
    use IEEE.STD_LOGIC_1164.ALL;
    use IEEE.NUMERIC_STD.ALL;
    use CPU_types.all;

    entity baud_rate is
        generic (
            M: integer := 163);
        Port (
            clk, reset : in  STD_LOGIC;
            tick : out  STD_LOGIC;
            q    : out baud_count);  
    end baud_rate;

    architecture Behavioral of baud_rate is
        signal r_reg : baud_count;
    begin

    process(clk,reset)
    begin
        if reset ='1' then
            r_reg <= (others=>'0');
        elsif rising_edge(clk) then 
            tick  <= 0;
            r_reg <= r_reg+1;
            if r_reg = M then 
                tick  <= '1';
                r_reg <= (others=>'0');
            end if;
        end if;
    end process;

--    tick <='1' when r_reg = M-1 else '0';
--    or simpler, when r_reg = 0
    q <= r_reg;

    end Behavioral; 
```

# jsdoc - html文件中的jsdoc标签

> ID：14276055
> 
> 赞同：2
> 
> 时间：2013-01-11T10:21:49.757
> 
> 标签：jsdoc

在构建了一个 Web 应用程序后，我试用了 jsdoc-toolkit。在一个配置文件中，我将我的 index.html 添加到源文件列表中，并使用 x 参数使工具包知道 html 文件。

```
java -jar jsrun.jar app\run.js -t=templates\jsdoc -x=html,js -c=conf\my.conf 
```

虽然生成的文档没有任何错误，但它仍然会忽略我在索引文件中所做的任何 jsdoc 注释。当我检查生成的文档时， index.html 文件被列为源文件。

非常简单的文档，例如

```
/**
* testing the doc
* @constructor
*/
function Test(){

} 
```

被简单地忽略可能是因为它嵌入在标签中。您知道如何强制 jsdoc 也使用此代码吗？

干杯，zbug

# javascript - 从不同的div中动态删除元素

> ID：14276061
> 
> 赞同：0
> 
> 时间：2013-01-11T10:22:14.927
> 
> 标签：javascript, jquery

我有以下代码：

```
<div id='a'>
</div>
....
....
<div id='b'>
</div> 
```

结合脚本：

```
$.ajax({
    type:'POST',
    url:'grouplist.php',
    async:false,
    dataType:'json',
    cache:false,
    success:function(result)
    {
        var $ni=$('#a');
        $.each(result,function(key,value)
        {
            var $button=$('<input></input>',{
                'type':'button',
                'id':key,
                'class':'button',
                'value':value
                }).appendTo($ni);
            });
    }}); 
```

`div`这会在 中创建具有动态 id的按钮。现在`div`，如果单击以下按钮之一，我将使用 id b 动态添加元素：

```
$('#a').on('click','.button',function(){
    $('.hmm').remove();
    var x=$(this).attr('id');
    $.ajax({
        type:'POST',
        url:'groupmsg.php',
        async:false,
        data:'id='+x,
        dataType:'json',
        cache:false,
        success:function(result)
        {
            var $na=$('#groups');
            $.each(result,function(key,value)
            {
                var t_msg=value[0]+":"+value[1]+"\t"+value[2];
                var $p = $('<p></p>'{'id':'msg'+key,'class':'.hmm'}).html(t_msg).prependTo($na);
            });
            }
            });}); 
```

我无法删除`div#b`using的元素`$('.hmm').remove();`。有人可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:30:39.263

你的代码有错误，应该是：

```
var $p = $('<p></p>',{'id':'msg'+key,'class':'hmm'}) 
```

设置类时不应使用点 (.)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:27:25.223

似乎您正在将`click`事件附加到 div`id=a`并单击在另一个元素内创建的按钮。尝试将`click`事件附加到文档。

```
$(document).on('click','.button',function(){
  // ...
}); 
```

# jquery - 固定视差标题图像

> ID：14276062
> 
> 赞同：0
> 
> 时间：2013-01-11T10:22:16.577
> 
> 标签：jquery, css, css-position, parallax

我一直在试图弄清楚如何达到类似这样的效果：[ishothim.com](http://ishothim.com/)。包含标题图像或幻灯片的固定 div。当用户向下滚动时，该 div 会与其余内容重叠。还有一个简洁的按钮向下滚动到实际内容。我使用 css`z-index`对不同的 div 和 waypoints.js 进行分层，以确保导航具有粘性。但它似乎还没有完全完善和准备好。

我有一种感觉必须有一种更优雅的 jQuery 方式来执行此操作，但我不知道从哪里开始。我尝试过视差滚动，但对于我想要实现的目标来说，它似乎太复杂了。一定有更简单的东西。非常欢迎任何想法和指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:56:24.853

要使用`z-index`，您还必须在类上指定 a `position`。在这种情况下，它很可能是`position: fixed;`

# css - 制作内容 用可变高度标题填充容器

> ID：14276074
> 
> 赞同：0
> 
> 时间：2013-01-11T10:22:49.120
> 
> 标签：css, layout, html

我觉得我不应该问这么简单的问题，但我找不到任何简单的答案。

我有一个可以是任何高度的标题。它下面的内容需要填满页面上的剩余空间（两者都包含在必要的容器 div 中）。如何使用 HTML 和 CSS 实现这一点？我会考虑使用 JavaScript，但我希望在添加内容或调整窗口大小等时自动调整大小。

HTML 代码：

```
<div id="container" >

    <div id="header" >
      <br/>
      <br/>
      ...variable content in the header (not necessarily text)...
      <br/>
      <br/>
    </div>

    <div id="content"></div>

</div> 
```

CSS 代码：

```
#container
{
  background-color:blue; 
  width:100%; 
  height:100%;
}

#header
{
  background-color:green;
  width:100%; 
  height:auto;
}

#content
{
  background-color:red; 
  width:100%;
  height:100px; /*The height here needs to fill the remaining space in the container div*/
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:30:04.387

我认为这可能有助于做你想做的事：http: [//jsfiddle.net/AGLDV/3/](http://jsfiddle.net/AGLDV/3/)

```
html, body {
  height:100%;
}

#container {
  width:100%;
  height:100%;
  background:#ccc;
  display:table;
}

#header {
  height:1%;
  width:100%;
  background:blue;
  display:table-row;
}

#content {
  width:100%;
  background:red;
  display:table-row;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:44:02.243

## [小提琴](http://jsfiddle.net/AGLDV/2/)

我将标题高度设置为`height: auto;`然后添加`overflow: hidden;`到`body, html`样式中。

只需添加任何文本或`<br />`在标题中，高度就会改变。

# javascript - 带有单选和复选框的 JavaScript“全选”

> ID：14276075
> 
> 赞同：1
> 
> 时间：2013-01-11T10:22:49.553
> 
> 标签：javascript, html, forms, checkbox, radio-button

我在 JS 中有一个函数可以检查表单中的所有复选框：

```
function CheckAll(chk){
    for (i = 0; i < chk.check.length; i++)
        if (chk.All.checked==true){
            chk.check[i].checked = true;
            chk.check[i].disabled = true;
        }
        else {
            chk.check[i].disabled = false;
            chk.check[i].checked = false;
        }
} 
```

我最近`radio`在我的表单中添加了一些按钮，我的问题是：**此功能是否也会激活我的*所有*单选按钮**（我知道只能选择一个单选按钮，但我不确定这在脚本中如何工作那..）？

在这里您可以找到我的表单代码：

```
<form name='MyForm'>
    <b>This is my Simple Form</b></br>
    </br>
    <input type='radio' name='parameter' value='ONE' checked='checked' />ONE<br/>
    <input type='radio' name='parameter' value='TWO' />TWO<br/>
    <input type='radio' name='parameter' value='THREE' />THREE<br/>
    <input type='radio' name='parameter' value='FOUR' />FOUR<br/>
    <input type='radio' name='parameter' value='FIVE' />FIVE<br/>
    <input type='radio' name='parameter' value='SIX' />SIX<br/>
    <input type='radio' name='parameter' value='SEVEN' />SEVEN<br/>
    <script>
        document.write("</br>");
        var count
        var check_value = new Array()
        check_value[0] = "001"
        check_value[1] = "002"
        check_value[2] = "003"
        check_value[3] = "004"
        for(count in check_value){
            var checkbox = "<input type='checkbox' name='check' value='"+check_value[count]+"' />"
            document.write(checkbox + check_value[count] + "  ");
        }
        document.write("<input type='checkbox' name='All' value='All' onClick='CheckAll(document.MyForm);' /> All");
    </script>
    </br>
    </br>
    <input type=button value='Ok' onClick='foo(document.MyForm);'>
</form> 
```

如果这不能按我的意愿工作，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:29:09.207

测试就这么简单：http: [//jsfiddle.net/yk9uD/](http://jsfiddle.net/yk9uD/)

内容 ：

```
<form name='MyForm'>
    <b>This is my Simple Form</b></br>
    </br>
    <input type='radio' name='parameter' value='ONE' checked='checked' />ONE<br/>
    <input type='radio' name='parameter' value='TWO' />TWO<br/>
    <input type='radio' name='parameter' value='THREE' />THREE<br/>
    <input type='radio' name='parameter' value='FOUR' />FOUR<br/>
    <input type='radio' name='parameter' value='FIVE' />FIVE<br/>
    <input type='radio' name='parameter' value='SIX' />SIX<br/>
    <input type='radio' name='parameter' value='SEVEN' />SEVEN<br/>
    <script>
      function CheckAll(chk){
  for (i = 0; i < chk.check.length; i++) {
        if (chk.All.checked==true){
            chk.check[i].checked = true;
            chk.check[i].disabled = true;
        }
        else {
            chk.check[i].disabled = false;
            chk.check[i].checked = false;
        }
}
}
        document.write("</br>");
        var count;
        var check_value = new Array()
        check_value[0] = "001"
        check_value[1] = "002"
        check_value[2] = "003"
        check_value[3] = "004"
        for(count in check_value){
            var checkbox = "<input type='checkbox' name='check' value='"+check_value[count]+"' />"
            document.write(checkbox + check_value[count] + "  ");
        }
        document.write("<input type='checkbox' name='All' value='All' onClick='CheckAll(document.MyForm);' /> All");
    </script>
    </br>
    </br>
    <input type=button value='Ok' onClick='foo(some var);'>
</form> 
```

问题的答案是：不，它不会选择所有单选按钮。

原因是您的代码仅对名称为的输入进行迭代`check`：

```
for (i = 0; i < chk.check.length; i++) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:38:19.407

不，它不适用于单选按钮。单选按钮的名称与复选框的名称不同。因此，您的功能不会触及单选按钮。但是，如果您为提供单选按钮和复选框的类创建了一个事件，则该函数还将包括单选按钮。但在这种情况下，只会检查最后一个单选按钮。事实上，所有单选按钮都会在代码执行时被选中。但是当再次找到同名的单选按钮时，之前的选中属性被删除，选中的属性来到当前节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T10:41:15.260

如果要检查选中的单选框，则可以使用以下代码。

```
$('.myclass input[name="radio_box_name"]:checked').val()) 
```

# r - 错误 rJava 64bit R&Eclipse

> ID：14276078
> 
> 赞同：0
> 
> 时间：2013-01-11T10:23:04.983
> 
> 标签：r, rjava

我一直在尝试切换到 64 位环境，但我遇到了 rJava 无法正常工作的问题。我已经关注了人们遇到相同问题及其解决方案（JDK、JVM.DLL、环境变量等）的线程，但我仍然卡住了

这是我得到的错误：

```
Loading required package: Rbbg
Loading required package: rJava
Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: inDL(x, as.logical(local), as.logical(now), ...)
  error: unable to load shared object 'H:/R/R-2.15.2/library/rJava/libs/x64/rJava.dll':
  LoadLibrary failure:  The specified path is invalid.

Failed with error:  'package 'rJava' could not be loaded' 
```

这是 R.version

```
platform       x86_64-w64-mingw32           
arch           x86_64                       
os             mingw32                      
system         x86_64, mingw32              
status                                      
major          2                            
minor          15.2                         
year           2012                         
month          10                           
day            26                           
svn rev        61015                        
language       R                            
version.string R version 2.15.2 (2012-10-26) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:56:46.010

问题是因为 R 找不到 64 架构的 jvm。

通常如果你已经安装了它，你会得到类似的东西

```
 C:\Program Files\Java\jre7\bin\server 
```

将此添加到您的 Windows 路径并重新启动 R。

**编辑**以检查所有事情是否正确：

类型：

```
Sys.getenv()['PATH'] 
```

您将获得包含 jvm.dll 路径的环境变量。如果您在此处没有 jvm 路径，则需要使用通常的高级系统设置方法添加它并重新启动 R 控制台以使其生效。

```
Sys.getenv()['ProgramW6432'] 
```

您将获得 64 架构的 C:\Program Files。

# c - 以 ASCII 整理顺序打印字符串

> ID：14276079
> 
> 赞同：0
> 
> 时间：2013-01-11T10:23:15.360
> 
> 标签：c

我正在从 Stephen Prata 的*C Primer Plus*中学习C。这是第 11 章中的一个问题。

> 编写一个程序，最多可读取 10 个字符串或 EOF，以先到者为准。是否为用户提供了一个菜单，有五种选择：打印字符串的原始列表、按 ASCII 排序顺序打印字符串、按长度递增的顺序打印字符串、按字符串中第一个单词的长度顺序打印字符串，然后退出。让菜单循环，直到用户输入退出请求。当然，该程序应该实际执行承诺的任务

我理解这个问题，除了它要求“以 ASCII 整理序列打印字符串”的位。这是什么意思？这是否意味着我必须像 ASCII 整理顺序一样更改字符顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:40:47.843

排序规则意味着字符串的“逻辑”排序。对于“C”语言环境，这确实等同于按 ASCII 码排序（使用`strcmp()`）。

**但是**，排序**规则取决于语言环境**。

例如，在 ISO 8859-1 编码和 DE 语言环境中，字母 "ü" (0xfc) 不应在列表末尾的 "z" (0x7a) / 之后结束，就像`strcmp()`排序一样，而是排序等同于“ue”（0x75 0x65）...

并且因为您不可能知道所有现有语言环境的所有事实，标准库提供了、 、`strcoll()`和`strxfrm()`to选项，它们为您执行特定于语言环境的工作。`wcscoll()``wcsxfrm()``LC_COLLATE``setlocale()`

欢迎来到国际化的世界。;-) 幸运的是，这个问题明确要求“ASCII 整理”，这意味着你侥幸逃脱`strcmp()`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:28:03.263

我认为这意味着对您读取的字符串进行简单排序，并根据字符 ASCII 值对它们进行排序。

所以如果输入两个字符串：`"aa"`and `"aA"`，排序后的顺序应该是`"aA"`and `"aa"`。此顺序是因为 的 ASCII 值`'a'`高于 的 ASCII 值`'A'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:28:45.290

排序是定义的顺序，任务是按ASCII顺序对输入字符串进行排序，即作为标准的“排序”命令，而不是改变每个字符串中字符的顺序——措辞可以更清楚，你只能推断基于其他任务的意图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T10:29:12.863

谷歌是你的朋友：

> ascii 整理顺序
> Web 定义 在 ASCII 图表中定义字符的顺序。（见附录 B）。

因此，您应该按其字符代码/字符元素的值对字符串进行排序。

# javascript - 每当我的页面加载时，我希望文本框为空。如何使用 javascript 实现这一点

> ID：14276080
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:23:19.487
> 
> 标签：javascript, jquery

我有一个带有六个输入字段的传真页面。所有输入字段都是文本框。每当页面加载时，我希望文本框为空。

我使用页面初始化加载此页面。这是一个静态页面。

使用 JavaScript 怎么可能？

```
$(document).on('pageinit','#faxIdcard',function(event){
    $('#faxpageyes').bind('click',function(event){
        validationVal = validateFax(); 
        if (validationVal == 0)
        {  
            faxObject.faxNumber= $("#fax1").val+$("#fax2").val+$("#fax3").val();
            faxObject.from=$("#fromfaxpage ").val();
            faxObject.fromPhoneNumber=$("#senderfaxpage ").val();
            faxObject.to=$("# tofaxpage").val();
            faxObject.configurationEmailAddress=$("#configfaxpage ").val();
            /**faxObject.faxcoverpage=$("#coverfaxpage ").val();**/
            faxObject.notes=$("#textareafaxpage ").val(); 

            if($('#faxincludepage').is(":checked")){
                faxObject.faxcoverpage = "True";
            }else
            {
                faxObject.faxcoverpage = "False";
            }   

            return true;    
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:44:04.060

```
$('form *').filter(':input').val(''); 
```

# css - 当 a 处于活动状态时，更改当前选定 li 的 css

> ID：14276089
> 
> 赞同：0
> 
> 时间：2013-01-11T10:23:50.610
> 
> 标签：css, wordpress

所以我有这个菜单，这是结构：

```
<div id="menu-home">
    <ul>
        <li> a.active </li>
           <ul class="sub-menu">
               <li> a </li>
           </ul>
    </ul>
</div> 
```

我需要访问的是，`<ul class="sub-menu">`当 a 处于活动状态时，有人可以指出我吗？我用过：

```
#menu-s a.active ul.sub-menuul {
        display:block;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:51:59.310

你的帖子搞砸了，但如果我明白你想问什么，下面的例子会对你有所帮助。

这应该是您的 HTML：

```
<div id="menu-home">
   <ul>
     <li> 
       <a href="#"> a.active 
         <ul class="sub-menu">
           <li> sample </li>
         </ul>
       </a>
     </li>           
   </ul>
</div> 
```

这应该是你的 CSS：

```
#menu-home ul li a:active ul.sub-menu li {
  color: green;
  border: 1px solid green;
} 
```

我为您添加了一些对 CSS 的更改，以帮助您了解正在发生的事情。

这是带有演示的 jsfiddle 链接：http: [//jsfiddle.net/aWe3n/24/](http://jsfiddle.net/aWe3n/24/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:56:52.337

这不是你应该如何上课`<a href="#" class="active">Link</a>`

# c# - Monotouch 中使用 MvvmCross 的分组表

> ID：14276091
> 
> 赞同：1
> 
> 时间：2013-01-11T10:24:05.450
> 
> 标签：c#, xamarin.ios, mvvmcross

如何使用 MvvmCross 在 MonoTouch 中实现带有分组表的视图，所以你会得到这样的结果：

[http://www.yetanotherchris.me/storage/downloads/UITableViewController.png](http://www.yetanotherchris.me/storage/downloads/UITableViewController.png)

现在我有这段代码，但我无法将 UITableViewStyle 更改为 Grouped：

```
public partial class HomeView : MvxBindingTouchTableViewController<HomeViewModel>
{
    public HomeView(MvxShowViewModelRequest request)
        : base(request)
    {

    }

    public override void ViewDidLoad()
    {
        base.ViewDidLoad();

        NavigationItem.SetRightBarButtonItem(new UIBarButtonItem("History", UIBarButtonItemStyle.Bordered, (sender, e) => ViewModel.DoGoToHistory()), false);

        var source = new MvxActionBasedBindableTableViewSource(
            TableView,
            UITableViewCellStyle.Value1,
            new NSString("HomeView"),
            "{'TitleText':{'Path':'Date'},'DetailText':{'Path':'Location'},'SelectedCommand':{'Path':'ViewDetailCommand'}}",
            UITableViewCellAccessory.DisclosureIndicator);

        this.AddBindings(
            new Dictionary<object, string>()
            {
            { source, "{'ItemsSource':{'Path':'List'}}" },
            { this, "{'Title':{'Path':'TestTitle'}}"}
        });

        TableView.Source = source;
        TableView.ReloadData();
    }
} 
```

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:04:49.630

您的图片仅显示一个部分....假设您只寻找一个部分，但是这种分组样式，那么您需要做的就是以某种方式引入 UITableViewStyle.Grouped 。

我不确定当前的 MvxTableViewController 是否为您公开了这个 - 所以您可能需要编辑 Mvx 源以添加适当的构造函数：

```
 protected MvxTouchTableViewController(MvxShowViewModelRequest request, UITableViewStyle style = UITableViewStyle.Plain)
        : base(style)
    {
        ShowRequest = request;
    } 
```

和

```
 protected MvxBindingTouchTableViewController(MvxShowViewModelRequest request, UITableViewStyle style = UITableViewStyle.Plain)
        : base(request, style)
    {
    } 
```

* * *

或者，您可以使用基本视图控制器（在其中添加表作为子视图）而不是表视图派生的视图控制器。

* * *

如果你想要多个组，那么你需要做更多的工作——因为你需要弄清楚绑定的 TableViewSource 如何计算出节数和每个节中的项目数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-11T02:48:15.690

```
 public class UserView : MvxTableViewController<UserViewModel>
    {
        public UserView()
            :base(UITableViewStyle.Grouped)
        {
        }
    } 
```

请记住使构造函数公开且无参数。

# java - 在 Java 中，如何从头开始实现自己的 ThreadLocal？

> ID：14276094
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:24:14.073
> 
> 标签：java

> **可能重复：**
> [Java 的 ThreadLocal 是如何在底层实现的？](https://stackoverflow.com/questions/1202444/how-is-javas-threadlocal-implemented-under-the-hood)

自从我用 Java 编程以来已经有一段时间了，我想刷新一些理论。

如何从头开始实现自己的 ThreadLocal？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:25:52.650

是的。您可以对线程进行子类化并在 Thread 的源代码中复制实现。或者您可以只阅读代码，但正确获取 ThreadLocal 是很棘手的。

有许多棘手的元素，最明显的是防止未删除的线程导致内存泄漏。

即使是现有的实现也存在子类化 ThreadLocal 对象会阻止 ClassLoader 卸载的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:32:10.693

试试这个：

```
new Thread()
{
    //contents
}.start(); 
```

您可以在代码中的任何位置生成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:41:19.033

原来这个问题是重复的：

这很简单，实际上，它只是存储在每个 Thread 对象中的名称-值对的 Map（请参阅 Thread.threadLocals 字段）。API 隐藏了实现细节，但这或多或少是它的全部。

# java - Java：在等待另一个线程完成时更新 UI

> ID：14276095
> 
> 赞同：0
> 
> 时间：2013-01-11T10:24:16.143
> 
> 标签：java, swing, event-dispatch-thread

我有一些 Java Swing 登录面板。当用户单击“登录”按钮时，会发生广泛的数据库通信。我有一个想法将数据库通信放入另一个线程（数据库通信用于填充一些哈希映射和单例）。将该通信放入单独的线程后，当用户输入它的名称和密码时，会发生 db 繁重的工作。当用户单击“登录”按钮时，代码将等待“繁重”线程加入，然后继续。

问题是，当我的代码正在等待数据库线程加入时，似乎无法进行任何 UI 更新。我认为我不能使用 SwingWorker 进行数据库通信，因为用户可以随时单击“登录”按钮，甚至在 SW 完成之前我也无法加入 SwingWorker（数据库通信必须在实际登录之前进行） .

有没有办法在等待另一个线程加入时启用 Swing ui 更新？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:03:46.867

只需放置两个标志并在两个操作（数据库通信和用户单击）结束时，调用相同的方法并在那里验证两个标志的状态。如果要阻止用户输入，可能会在模式对话框中显示进度条：

```
import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;
import javax.swing.UnsupportedLookAndFeelException;

public class TestThreadJoin {

    private boolean dbWorkDone = false;
    private boolean credentialsProvided = false;
    private JTextField loginTF;
    private JTextField passwordTF;

    protected void initUI() {
        final JFrame frame = new JFrame(TestThreadJoin.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridBagLayout());
        JLabel login = new JLabel("Login: ");
        JLabel password = new JLabel("Password: ");
        loginTF = new JTextField(20);
        passwordTF = new JPasswordField(20);
        GridBagConstraints gbc = new GridBagConstraints();
        panel.add(login, gbc);
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(loginTF, gbc);
        gbc.gridwidth = 1;
        panel.add(password, gbc);
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(passwordTF, gbc);
        JButton loginButton = new JButton("Login");
        loginButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                credentialsProvided = true;
                proceed();
            }
        });
        frame.add(panel);
        frame.add(loginButton, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
        SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>() {

            @Override
            protected Void doInBackground() throws Exception {
                Thread.sleep(10000);
                return null;
            }

            @Override
            protected void done() {
                super.done();
                dbWorkDone = true;
                proceed();
            }
        };
        worker.execute();
    }

    protected void proceed() {
        if (credentialsProvided && dbWorkDone) {
            System.err.println("Continuing ");
        }
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestThreadJoin().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:44:25.183

可以使用 SwingWorker 来完成。将此 ActionListener 添加到您的 JButton。还为“标签”提供 JLabel 字段，为“进度条”提供 JProgressBar 字段。

```
java.awt.event.ActionListener al = new java.awt.event.ActionListener() {
    public void actionPerformed(java.awt.event.ActionEvent evt) {
        SwingWorker swingWorker = new SwingWorker() {

            @Override
            protected Object doInBackground() throws Exception {

                // SIMULATE DB WORK
                for (int i = 0; i < 10; i++) {
                    synchronized (this) {
                        this.wait(300);
                    }
                    publish(10 * i);
                }
                publish(100);

                return 0;
            }

            @Override
            protected void done() {
                label.setText("Work complete");
                button.setEnable(true);
            }

            @Override
            protected void process(List chunks) {
                for (Object object : chunks) {
                    Integer progress = (Integer) object;
                    progressBar.setValue(progress);
                }
            }

        };

        button.setEnable(false);
        swingWorker.execute();
    }
} 
```

由于数据库工作可能无法量化（可测量），请进行以下更改：

*   在“swingWorker.execute()”行上方插入“progressbar.setIndeterminate(true)”，
*   在“label.setText()”行上方插入“progressbar.setIndeterminate(false)”，
*   删除 'publish(int)' 调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:53:11.880

我真的认为你应该尝试一下 SwingWorker，方法是：

*   当用户点击登录时，启动swing worker (new Swingworker<...,...>().execute();)
*   在**doInBackground()**中，先调用**pusblih()**调用**process()**来禁用按钮
*   **然后在doInBackground()**中等待后台线程
***   在**done()**中更新 UI**

 **这样你就不会冻结EDT...

另一种选择是运行你自己的“mini-swingworker”：

```
loginButton.setEnabled(false);  // assuming this runs in the EDT
new Thread(new Runnable() {
  public void run() {
    myOtherBgThread.join();  // here we wait for the BG thread
    SwingUtilities.invokeLater(new Runnable() {
      // go back into the EDT
      // update the UI here...
    }
  }
}.start(); 
```

希望它有帮助，问候

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T10:37:14.770

1.  最简单的解决方案之一是在初始数据库通信完成之前禁用登录按钮。但这需要一些额外的进度条或消息来表明初始化发生，以免混淆用户。在这种情况下，您可以使用`SwingWorker`which 在完成时启用登录按钮。

2.  另一种解决方案是，当用户按下登录按钮时，应再次将处理委托给（另一个）后台线程，该线程等待初始 DB 通信线程加入。这样 EDT（和 GUI）将不会被阻止。实际上连接到 DB 也是一个冗长的操作，所以无论如何都应该在后台线程中完成，即使在禁用登录按钮时，如 1 中所述。

3.  另一个解决方案是创建一个固定大小为 1（例如`java.util.concurrent.Executors.newSingleThreadExecutor()`）的线程池并在那里传递所有后台任务。使用单线程执行器任务将按顺序执行。第一个任务是初始数据库通信，另一个是登录任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T11:26:31.097

使用 ExecutorService。调用`executorService.submit(runnable)`“runnable”执行数据库工作的地方。该`submit`方法将返回一个`Future`. 然后登录后，您可以调用`future.get()`which 将等待完成（如果可运行已完成，则立即返回）。**

# mysql - 获取 from 和 to 日期内的年份数据

> ID：14276097
> 
> 赞同：1
> 
> 时间：2013-01-11T10:24:19.230
> 
> 标签：mysql, sql, sqlite

我有以下查询，它获取年份和日期之间的总和数据。
它完美地工作。

```
SELECT strftime('%Y',Date), SUM(Amount) 
from table where  (Date between '2008-08-01' and '2012-07-31') 
GROUP BY strftime('%Y',Date) 
```

我在条形图上显示总和。
现在，如果我单击相应的年份，它应该显示该年“迄今为止”的所有交易，或者如果该值小于“迄今为止”，则显示全年的交易。

例如：在上面的示例中，它显示 Sum From Date : 2008-08-01 和 To Date: 2012-07-31 。

如果用户点击 2012 年栏列，它应该显示截至日期 2012-07-31 的交易，而不是全年，但如果用户点击 2011，它应该显示全年交易，因为 TO Date 大于 2011年。

与 2008 年相同，它应该显示来自“2008-08-01”而不是全年的数据，如果我点击那一年的条形栏，它应该显示从该特定日期到年底的交易，而不是全年。

我有下面的查询，它返回错误的值。

```
SELECT strftime('%Y',Date) ,* 
from table where (Date between '2011-08-01' and '2012-07-31') 
                 and strftime('%Y',Date)='2012' 
GROUP BY strftime('%Y',Date) 
```

这仅返回日期 2012-01-01 的一行，而不是 2012 年到 2012-07-31 的所有值。

基本上我想在下面的查询中只改变年份，其余的应该是一样的。strftime('%Y',日期)='2012'

我不知道如何解决它或如何解决上述要求。
请帮我修复它或任何替代方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:45:13.753

你不需要`GROUP BY`

```
SELECT strftime('%Y',Date) ,* 
from table where (Date between '2011-08-01' and '2012-07-31') 
                 and strftime('%Y',Date)='2012' 
```

# ruby - 检查哈希

> ID：14276099
> 
> 赞同：0
> 
> 时间：2013-01-11T10:24:28.757
> 
> 标签：ruby, hash, inspect

当我想调试以下哈希时，它返回`try2test2`.

```
dictionary = {
  "test" => 2,
  "try" => 2
}

puts dictionary
# => try2test2 
```

还有其他方法可以做到这一点，以便它会给你完整的列表`{'test': 2, 'try': 2}`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T10:36:03.927

正如 V. Melnychuk 提到的，JSON 是一个不错的选择，只需记住先导入“json”模块：

```
require "json"
dictionary.to_json 
```

通常，您可以通过调用 inspect 来检索对象的可读字符串版本：

```
dictionary.inspect 
```

最后，有一个“pp”模块可以漂亮地打印变量（很像 python 中的 pprint 模块）：

```
require "pp"
pp dictionary 
```

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:26:34.107

尝试将对象转换为 JSON

```
dictionary.to_json 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:30:22.193

您还可以执行默认`p dictionary`发送的操作：`inspect`

```
dictionary = {
  "test" => 2,
  "try" => 2
}

p dictionary      # => {"test"=>2, "try"=>2} 
```

# jquery - Ajax 加载新内容后滚动到 DOM id

> ID：14276120
> 
> 赞同：1
> 
> 时间：2013-01-11T10:26:06.600
> 
> 标签：jquery, ajax, dynamic, scroll

我想在网站上动态显示我的投资组合内容 - 通过 ajax 重新加载整个页面（页眉 + 内容 + 页脚），现在它工作正常，但网站很长，它在加载底部后显示 - 如何自动加载后滚动到投资组合部分？我试过使用`.scrollTo()`但它不起作用（也许我把它放在错误的行 - 请看看我的代码：

```
$(function(){
  $(".screen.fifth a[rel='tab']").click(function(e){
    //e.preventDefault();
    /*
    if uncomment the above line, html5 nonsupported browers won't change the url but will display the ajax content;
    if commented, html5 nonsupported browers will reload the page to the specified link.
    */

    //get the link location that was clicked
    pageurl = $(this).attr('href');

    //to get the ajax content and display in div with id 'content'
    $.ajax({url:pageurl+'?rel=tab',success: function(data){
      $('.screen.fifth .main_wrapper').html(data);
    }});

    //to change the browser URL to the given link location
    if(pageurl!=window.location){
      window.history.pushState({path:pageurl},'',pageurl);
    }
    //stop refreshing to the page given in
    return false;
  });
}); 
```

请帮忙！

编辑：

我已将此页面的链接更改为`<a href=".../project_one.php#project_tag">`chrome，它工作得很好，但在 Firefox 中，它的行为就像我之前描述的那样：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:32:12.500

使用这个功能：

```
function goToByScroll(id){
    $('html,body').animate({scrollTop: $("#"+id).offset().top - 30},'slow');
} 
```

它滚动到输入的 id，因此，如果您想滚动到`#portfolio_tag`然后调用：

```
goToByScroll('portfolio_tag'); 
```

一旦 AJAX 调用完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:07:43.357

看起来正在发生的事情是页面跳转到`#projects`锚点，然后页面在加载时调整大小。

因此，如果您输入以下内容：

```
goToByScroll( window.location.hash.substring(1) ); 
```

在页面`($('.map').width(myWidth);)`在 ready 和 resize 函数中调整大小的代码之后，应该可以解决您的问题

# ruby-on-rails - Rails karmi/轮胎配置问题

> ID：14276121
> 
> 赞同：1
> 
> 时间：2013-01-11T10:26:11.260
> 
> 标签：ruby-on-rails, tire

基本问题是：

我有基于 Rails 的网站和 ElasticSearch 数据库。我更改了`index_name`属性，但查询仍然如下所示：

```
curl -X GET 'http://localhost:9200/index_name/model_name/_search?... 
```

所以它搜索带有 的文档`_type:'search'`，但在 Elastic 中我有带有 的记录`_type:'doc'`。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-04T03:24:12.340

尝试重新索引，

```
rake environment tire:import CLASS=Model FORCE=true 
```

# facebook - 是否值得将 XMPP pubsub 用于提要？

> ID：14276125
> 
> 赞同：2
> 
> 时间：2013-01-11T10:26:26.720
> 
> 标签：facebook, twitter, xmpp, feed, publish-subscribe

我已经阅读[了这篇](http://www.slideshare.net/rabble/beyond-rest-building-data-services-with-xmpp-pubsub)关于为什么使用 XMPP 和 pubsub 来检索经常更新的数据服务（例如提要）的演示文稿。我立即对 pubsub 的推送功能深信不疑，以同情轮询休息请求。

但是，我尝试搜索使用 XMPP pusub 部署的数据 api，但找不到太多（只有[buddycloud](https://buddycloud.org/wiki/XMPP_XEP)和[OneSocialWeb](http://onesocialweb.org/developers-xmpp.html) - 没有更积极的开发）。

据我了解，[Facebook 使用的是 HTTP Etags](https://developers.facebook.com/blog/post/627/)，而 Twitter 使用的是[http push](https://dev.twitter.com/docs/streaming-apis/connecting)，即使我发现一篇[官方博客文章](http://blog.twitter.com/2008/07/twitter-and-xmpp-drinking-from-fire.html)（仅此而已），其中 twitter 提到有一个 xmpp 提要。

这些和其他提供提要的平台是否有任何理由不支持 XMPP pubsub？或者他们只是通过特殊安排提供 XMPP pub-sub 替代方案？

到目前为止，我看到的最好的答案是[这篇博客文章](http://www.defuze.org/archives/163-is-xmpp-for-the-web-ready.html)，它的日期是 2009 年初。从那以后没有任何变化吗？

# android - 如何在两个 SherlockFragment 之间传递值？

> ID：14276130
> 
> 赞同：0
> 
> 时间：2013-01-11T10:26:35.900
> 
> 标签：android, eclipse

我在 ActionBar 中有一个带有两个 SherlockFragment 的 SherlockFragmentActivity。

在每个 SherlockFragment 中，我要求用户提供几个值，例如步骤 1 和步骤 2 任务。在步骤 2 片段中，我有一个调用 webMethod 以执行操作的按钮，但对于此 webMethod，我需要用户在步骤 1 和 2 片段中引入的所有值。

在步骤 2 片段中传递或获取步骤 1 片段值的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:28:14.287

创建一个`Bundle`对象并将值放入包中，然后使用 .将其传递给下一个片段`setArguments()`。

```
Bundle b = new Bundle();
b.putString("myString","String Value");
b.putInt("myInt",9);
yourFragment.setArguments(b); 
```

然后你在第二个片段中检索相同的内容

```
Bundle b = getArguments();
String myStringFromFirstFragment = b.getString("myString");
int myIntFromFirstFragment = b.getInt("myInt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:09:18.150

您可以通过`SherlockFragmentActivity`. 主要思想是创建一个接口并让您的活动实现这一接口，以将数据从fragmentA 传递到Activity 并从这个接口传递到您的另一个fragmentB。

查看Android 文档中的[与活动通信和为活动](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)创建[事件回调以](http://developer.android.com/guide/components/fragments.html#EventCallbacks)获取更多详细信息。

希望这可以帮助。

# twitter-bootstrap - yii助推器日期选择器不工作

> ID：14276132
> 
> 赞同：3
> 
> 时间：2013-01-11T10:26:47.613
> 
> 标签：twitter-bootstrap, yii

我正在使用 yii 助推器引导程序，但 datepicker 不工作。我还发现 bootstrap-datepicker.js 没有在正确的路径中注册。

这是我得到的错误：

`http://localhost/assets/js/bootstrap.datepicker.js?_=1357902515857`

在这里而不是`http://localhost/**myproject**/assets/js/bootstrap.datepicker.js?_=1357902515857`

它应该在 myproject/assets 中。

知道我做错了什么吗？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:45:06.617

通过在页面顶部添加来解决此问题。

```
 Yii::app()->bootstrap->registerAssetCss('bootstrap-datepicker.css');
    Yii::app()->bootstrap->registerAssetJs('bootstrap.datepicker.js'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T07:40:12.073

Yii 助推器日期选择器使用 CJuiDatePicker，这是一个包含在框架中的 zii 小部件。

您应该使用小部件来创建 datepicker 字段，而不是正常的 bootstrap/jquery 方式。

# javascript - 加载事件 jQuery，我可以附加它吗

> ID：14276135
> 
> 赞同：1
> 
> 时间：2013-01-11T10:27:01.033
> 
> 标签：javascript, jquery, ajax, get, load

我想在页面中加载一个带有 ajax 的 html 部分。我有一个 html 页面。使用ajax，我想从其他页面加载部分html。

我做这个代码：

```
$.get(/vision.html/, function(data){
    $(data).find(".container-helper").appendTo(".wrapper");
}); 
```

来自 vision.html 页面。我想加载容器助手 div。我想将该 html 附加到页面中的 .wrapper div 中。但是这段代码不起作用。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:40:03.523

我认为你需要使用`filter`而不是`find`. 像这样：

`$(data).filter('.container-helper').appendTo('.wrapper')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:03:49.083

您必须用以下代码替换您的代码：

```
$.get("vision.html", function(data){
        $response = $(data);
        $response.filter('.container-helper').appendTo('.wrapper');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:34:24.523

vision.html 应该只返回 .container-helper 内容。

```
<div class="container-helper">some content</div>

$.get('vision.html', function(data){
    $(data).appendTo('.wrapper');
}); 
```

# css - 如何将 twitter 引导程序重置为浏览器的原始版本

> ID：14276137
> 
> 赞同：1
> 
> 时间：2013-01-11T10:27:13.117
> 
> 标签：css, twitter-bootstrap, image

基本上，我想为源自 reset.less 文件的 img 重置（撤消）Twitter Bootstrap 2.2 重置。

Twitter Bootstrap 本质上是在设置这个 css：

```
img {
  width: auto\9;
  height: auto;
} 
```

在此之后我可以添加什么 CSS 来撤消此操作？我实际上正在使用 bootstrap-sass gem，所以这就是我需要处理的。

如果我在 gem 源代码中注释掉 CSS，我的问题就解决了，但是当 gem 由 heroku 加载时，这对我没有帮助。所以我需要一个本地覆盖/猴子补丁来解决这个问题。

谢谢。这是问题：[https](https://github.com/desandro/isotope/issues/335#issuecomment-11507013) ://github.com/desandro/isotope/issues/335#issuecomment-11507013和这里：[https ://github.com/twitter/bootstrap/issues/6541](https://github.com/twitter/bootstrap/issues/6541)

没有这个补丁的问题是，令人敬畏的同位素库无法正常运行，因为 chrome 和 safari 无法正确绘制图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:31:54.603

您可以在此下方添加一个新的重复选择器：

```
img {
  width: auto;
  height: auto;
} 
```

那应该覆盖它。将其添加到在文档部分的主要文件下调用的新文件中`<head>`也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:07:12.553

我在这里发布了答案：[https ://github.com/twitter/bootstrap/issues/6541](https://github.com/twitter/bootstrap/issues/6541)

在 CSS 中内联它是有效的，如下所示：

```
<img src="blah-blah" width=398 height=265 style="width:398px; height:265px"> 
```

其实我也测试过Isotope，没有使用width和height属性，像这样：

```
<img src="blah-blah" style="width:398px; height:265px"> 
```

效果很好！如果最好只指定 CSS，有什么建议吗？

通过使用这个 CSS，我可以很容易地在没有 bootstrap（或 bootstrap 2.0）的情况下进行测试：img { width: auto; 高度：自动；}

似乎CSS中的宽度和高度确实覆盖了图像属性，并且在图像加载之前，浏览器不知道要分配多少空间，然后，即使在图像加载之后，间距仍然是错误的，在至少与同位素。内联样式确实解决了这个问题。我想我尝试过使用常规样式，但这似乎不起作用，但我可能遇到了 CSS 优先级问题。无论如何，由于图像大小是由图像属性决定的，所以放入这一点内联 CSS 是很自然的。我希望我们最终能找到更好的解决方案，因为这肯定会在升级时影响其他人。

或者至少应该记录一下，需要对图像的宽度和高度使用内联样式而不是属性。

# gwt - Datanucleus - 尝试实例化实例 JPAAdapter 时发生错误

> ID：14276138
> 
> 赞同：1
> 
> 时间：2013-01-11T10:27:13.617
> 
> 标签：gwt, jpa-2.0, datanucleus, requestfactory

我的项目基于 GWT(2.4)，我的目标是实现 ReqyestFactory（JPA、Datanucleus、Postgresql）。在编译期间我没有任何错误。但是当我向服务器发出请求时，我收到了这个错误：

```
Caused by: org.datanucleus.exceptions.NucleusUserException: Error : An error occurred     trying to instantiate an instance of the API adapter "org.datanucleus.api.jpa.JPAAdapter" (perha ps you dont have the requisite datanucleus-api-XXX jar in the CLASSPATH, or the api jar for the persistence spec you are using?) : {1} 
```

在我的类路径中，我有：

*   datanucleus-api-jpa-3.1.0-release.jar
*   datanucleus-core-3.1.0-release.jar
*   datanucleus-rdbms-3.1.0-release.jar
*   requestfactory-apt.jar
*   requestfactory-client+src.jar
*   requestfactory-server+src.jar
*   geronimo-jpa_2.0_spec-1.1.jar
*   postgresql-9.2-1002.jdbc4.jar
*   ……

这是我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">

<persistence-unit name="DBStorage">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <class>com.test.domain.Myobj</class>
    <exclude-unlisted-classes/>
    <properties>
        <property name="datanucleus.ConnectionDriverName"  value="org.postgresql.Driver" />
        <property name="datanucleus.ConnectionURL" value="jdbc:postgresql://localhost:5432/test" />
        <property name="datanucleus.ConnectionUserName" value="test" />
        <property name="datanucleus.ConnectionPassword" value="123" />
    </properties>
</persistence-unit>

</persistence> 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:41:49.433

我在您的依赖项中没有看到 jdo-api.jar。

# spring - 如何在测试执行之前强制使用新版本的 Spring 上下文

> ID：14276140
> 
> 赞同：22
> 
> 时间：2013-01-11T10:27:13.603
> 
> 标签：spring, junit4

我使用`SpringJUnit4ClassRunner`来编写集成测试。我还`@DirtiesContext`用于将上下文置于损坏状态的测试，并且效果很好。

但是现在我在静态初始化程序中测试了一个重要的 SystemProperty，它又在 Spring 上下文中使用。当测试自行执行时，这又可以正常工作。但是当我使用其他测试运行测试时，Spring 上下文已经在没有该属性集的情况下创建，并被我的新测试重用。

如何在我的测试中强制重新创建 Spring 上下文，然后它将使用更改后的系统属性？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-08-08T08:47:16.243

从 Spring 4.2 开始，[DirtiesContext](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/annotation/DirtiesContext.html)注释支持以下新阶段：[BEFORE_CLASS](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/annotation/DirtiesContext.ClassMode.html#BEFORE_CLASS)、[BEFORE_EACH_TEST_METHOD](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/annotation/DirtiesContext.ClassMode.html#BEFORE_EACH_TEST_METHOD)和[BEFORE_METHOD](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/annotation/DirtiesContext.MethodMode.html#BEFORE_METHOD)。所以你现在可以做例如：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(...)
@DirtiesContext(classMode = ClassMode.BEFORE_EACH_TEST_METHOD)
public class MyTest {
   ..
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-11T12:22:08.040

**春季前 4.2：**

不幸的是，我只能建议一个 hack - 你是对的，似乎没有一种简单的方法来初始化新的应用程序上下文而不是使用缓存的应用程序上下文。这些是我可以建议的一些解决方法：

1.  使用稍微不同`@ContextConfiguration`的方法——一种快速而肮脏的方法可能是向`@ActiveProfiles`测试类添加注释，这样 Spring 将被迫使用新键缓存上下文或使用现有配置定义虚拟上下文作为导入

2.  一个 hack，但 JUnit 4.11+ 允许对测试方法排序进行一定程度的控制，可以在目标测试方法之前有一个测试方法，并且可以在`@DirtiesContext`目标方法被称为新方法时使用 d 注释虚拟测试方法将创建上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:47:18.673

有几种选择：

1.  您可以通过将另一个配置加载到其中来为此测试创建单独的弹簧上下文。这样，您的测试将完全独立于其他所有测试。
2.  您可以为此测试创建精简配置。这将实现相同但更快。
3.  创建一个首先运行此测试的测试套件。

# c# - 如何在 ASP.NET 事件中做几件事

> ID：14276144
> 
> 赞同：0
> 
> 时间：2013-01-11T10:27:31.373
> 
> 标签：c#, asp.net

我有一个隐藏的领域

```
<asp:HiddenField ID="selectedRecievedValue" ClientIDMode="Static" runat="server" /> 
```

然后我有一个带有 onfocus 事件的 TextBox

```
<asp:TextBox runat="server" Text='<%# Eval("value") %>' CssClass="rowSpildValue"
 onfocus='<%# Eval("data_id", "document.getElementById(\"selectedDataID\").value = 
 \"{0}\"; document.getElementById(\"selectedFieldID\").value = \"rowSpildValue\";") %>'
 OnTextChanged="SpildChanged" AutoPostBack="true" ID="rowSpildValue" /> 
```

这已经运行了一些代码，但是我将如何添加另一行代码来设置我的

```
HiddenField = Eval("deliveredValue") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:29:34.587

您可以添加所有您喜欢的 JavaScript 代码，只需用分号分隔行**；**

无论如何，我会这样下去，因为调试和维护可能很奇怪（它也不是跨平台的）

我建议你使用[JQuery](http://jquery.com/)来实现这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:49:15.273

This will work:

```
<asp:TextBox runat="server" Text='<%# Eval("value") %>' CssClass="rowSpildValue"
    onfocus='<%# Eval(
        "data_id", 
        "document.getElementById(\"selectedDataID\").value = \"{0}\";" +
        "document.getElementById(\"selectedFieldID\").value = \"rowSpildValue\";") + 
                Eval(
        "deliveredValue",
        "document.getElementById(\"selectedRecievedValue\").value=\"{0}\"") %>'
    OnTextChanged="SpildChanged" AutoPostBack="true" ID="rowSpildValue" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:31:09.430

将您的 JavaScript 提取为 JS 函数

```
<script>
   function onFocus(data_id) {
     document.getElementById("selectedDataID").value = data_id;          
     document.getElementById("selectedFieldID").value = "rowSpildValue"; 
     document.getElementById("selectedRecievedValue").value = <%# Eval("deliveredValue") %>;
   }
</script> 
```

然后将其设置为事件处理程序

```
<asp:TextBox runat="server" Text='<%# Eval("value") %>' CssClass="rowSpildValue"
 onfocus='<%# Eval("data_id", "onFocus(\"{0}\");") .../> 
```

# css - 将 div 更改为 ulist

> ID：14276145
> 
> 赞同：0
> 
> 时间：2013-01-11T10:27:48.157
> 
> 标签：css, list, html

我没有和 ulist 合作过，是的，而且我知道这是非常重要和有用的东西，目前我有 3 个 div，看起来像这样：

```
 <div style="clear: both;  margin:0 auto; text-align: center; width:100px; background-color:#58794c; color: #ffffff; font-size : 28px; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;" title="Shipping information">Postage</div>
    <div style="margin:0 auto; text-align: center; width:100px; background-color:#558b40; color: #ffffff; font-size : 28px; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;" title="Return information">Return</div>
    <div style=" margin:0 auto; text-align: center; width:100px; background-color:#66ac4a; color: #ffffff; font-size : 28px; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;" title="Payment information">Payment</div> 
```

![在此处输入图像描述](../Images/5daf0d056aab86a46e337d8693de3355.png)

我怎样才能将它们转换为 ulist 以使其看起来像这样？或者也许它不可能？ ![在此处输入图像描述](../Images/f60d3d99ec750b5c3428b70f4439b070.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:31:29.713

将所有样式从`ul`和 float重置`li`到左侧：

html

```
<ul>
<li class="c1">Postage</li>
<li class="c2">Return</li>
<li class="c3">Payment</li>
</ul> 
```

css

```
ul {height:30px;line-height:30px;list-style:none;margin:0;padding:0;}
ul li {float:left;display:block;height:30px;margin:0;padding:0 5px;color: #ffffff; font-size : 28px; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;}
ul li.c1 {background:green;}
ul li.c2 {background:red;}
ul li.c3 {background:blue;} 
```

添加了带有内联 css 的示例：http: [//jsfiddle.net/JBXSz/](http://jsfiddle.net/JBXSz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:34:24.337

用于`display:inline-block`使 li 水平对齐。

**HTML**

```
<ul>
  <li>Postage</li>
  <li>Return</li>
  <li>Payment</li>
</ul> 
```

**CSS**

```
li{display:inline-block; 
  clear: both;  
  margin:0 auto; 
  text-align: center; width:100px; 
  background-color:#58794c; color: #ffffff; 
  font-size : 28px; 
  border-top:1px dotted #015811; 
  border-left:1px dotted #015811; 
  border-right:1px dotted #015811;}
ul li:nth-child(1){background-color:#58794c;  }
ul li:nth-child(2){background-color:#558b40; }
ul li:nth-child(3){background-color:#66ac4a;  } 
```

**[演示](http://jsfiddle.net/HMcr7/7/)**

# google-analytics - 谷歌分析 - 具有多个子域的多个域

> ID：14276149
> 
> 赞同：0
> 
> 时间：2013-01-11T10:27:53.430
> 
> 标签：google-analytics, cross-domain

我正在尝试为我的博客平台设置 Google Analytics。问题是我很少有顶级域和用户可以用他们的名字（“john”）和顶级域之一来选择他们的博客地址。用户的博客地址类似于 john.domain3.com 。

我试图在这里设置所有内容：[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)，分析代码中的顶级域名：

```
_gaq.push(['_setDomainName', 'domain3']); 
```

但是在每次用户单击链接后更改域时的报告中，它都会创建新会话。我用

```
 onclick="_gaq.push(['_link','https://www.A.com/']); return false;" 
```

当然。

我还尝试将 setDomainName 设置为“无”，就像一些文章所说的那样。在报告中它似乎没问题，但它为每个子域设置了新的 cookie，我必须与 gaq.push 链接同一个域的子域。

我已经阅读了该主题： [Google Analytics Cross Domain Tracking and _setDomainName()](https://stackoverflow.com/questions/9534793/google-analytics-cross-domain-tracking-and-setdomainname) 但它并不完全相同（没有子域）。

有人可以给我一些提示吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:57:35.980

假设您有多个顶级域（domaina.com 和 domainb.com）和多个子域（john.domaina.com 和 jane.domaina.com），您需要遵循此处的设置说明：[https://developers。 google.com/analytics/devguides/collection/gajs/gaTrackingSite#multipleDomains](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#multipleDomains)

对于 domaina.com 上的 GA 代码和 domaina.com 的任何子域（例如 john.domaina.com），您必须使用`_gaq.push(['_setDomainName', 'domaina.com']);`. 您无需将 onclick 代码添加到这些域之间的链接。

那么对于 domainb.com 上的 GA 代码，您必须使用`_gaq.push(['_setDomainName', 'domainb.com']);`. 您必须将 onlick 代码添加到此域和 domaina.com 之间的链接。

同样重要的是要注意，对于您在两个站点上的 GA 代码，您还包括`_gaq.push(['_setAllowLinker', true]);`在 setDomainName 之后。

希望有帮助。

# iphone - 表视图自动加载

> ID：14276150
> 
> 赞同：-2
> 
> 时间：2013-01-11T10:27:54.717
> 
> 标签：iphone, ios, xcode

我在一个`UITableView`. 每个单元格都有一组组件`UIButton`，例如`UILabel`和`UISlider`。当我更新第 6 个单元格时，它反映到 1st `cell`。同样，如果我更新第 7 个单元格，它会反映到第 2 个单元格。

我怎样才能防止这种情况？

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {    
   return 1;
 }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
   return viewcount;
 }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {  
   NSString *MyIdentifier=@"mycell";

   ListCell1 *cell = (ListCell1 *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];

  if (cell == nil)
  {
    cell = [[ListCell1 alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier]; 
  }

  cell.selectionStyle = UITableViewCellSelectionStyleNone;
  UIButton *b=[buttonarray objectAtIndex:indexPath.row];

  cell.imageView.frame=CGRectMake(0, 0, 0, 0);
  b.imageView.frame=CGRectMake(0, 0, 30, 30);
  cell.imageView.image=b.imageView.image;
  return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {    
   UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
   ListCell1 *cell1 = (ListCell1 *)[tableView cellForRowAtIndexPath:indexPath];

   [cell1 addSubview:delbutton];
   delpath=indexPath;
 }

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
   return 100.0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:55:54.983

试试这个`CellForRowAtIndexPath`

代码：：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CustomCellIdentifier = @"name";
    customCell *cell = (customCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];
    if (cell == nil)
    {
        NSArray *nib;
        nib= [[NSBundle mainBundle] loadNibNamed:@"name" owner:self options:nil];
        for (id oneObject in nib)
            if ([oneObject isKindOfClass:[customCell class]])
                cell = (customCell *)oneObject;

        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

        cell.imageView.frame=CGRectMake(0, 0, 0, 0);
        b.imageView.frame=CGRectMake(0, 0, 30, 30);
        cell.imageView.image=b.imageView.image;
    }
    return cell;
} 
```

希望它会起作用。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:31:36.527

更新您的`cellForRowAtIndexPath`方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
       // cell.selectionStyle = UITableViewCellSelectionStyleNone;

    }
    **// and add UIButton, UILabel and UISlider. in cell.contentView**

} 
```

可能对你有帮助:)

**编辑**

在您的情况下，您只需要更改`NSString *CellIdentifier`并将 **其放入我的答案中**
并创建自定义方法来**初始化**放在单元格上的所有组件，在此方法中仅对所有组件进行初始化，并且在初始化之后**在单元格之前调用此方法创建**并调用此方法后，您需要将此组件添加到您的`UITableVieCell`( `cell.ContentView`) ;)**试试看 :)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:47:45.167

尝试设置

```
NSString *CellIdentifier = [NSString stringWithFormat: @"%d:%d", indexPath.row, indexPath.section]; 
```

# vim - 如何修复：Vim 完成列表从列表底部选择完成并向上移动

> ID：14276152
> 
> 赞同：1
> 
> 时间：2013-01-11T10:27:58.643
> 
> 标签：vim, omnicomplete

截图：![在此处输入图像描述](../Images/c8f0d1a25a82e8fc14588347d0d2e46c.png)
Vimrc：[http ://pastebin.com/jijwTChi](http://pastebin.com/jijwTChi)

从屏幕截图中可以看出，当完成列表打开时，它首先选择列表底部的单词并向上移动。

如何从列表顶部开始选择 - 几乎所有时间都是最相关的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:07:24.530

自动完成从列表的哪一侧开始，取决于您使用的快捷方式：

*   `Control`+`P`从列表顶部开始向下移动
*   `Control`+`N`从列表底部开始向上移动

查看`:h i_CTRL-N`更多信息

# xml - RequestServerVersionValue 在对 Exchange Web 服务的 API 请求中不起作用

> ID：14276155
> 
> 赞同：0
> 
> 时间：2013-01-11T10:28:06.770
> 
> 标签：xml, delphi, soap, exchange-server

我使用 Exchange Server 2010 托管 EWS 托管 API。当我执行请求 FindItem 时，我从服务器收到错误 - “ErrorIncorrectSchemaVersion” “请求有效，但未在 RequestServerVersion SOAP 标头中指定正确的服务器版本。确保使用正确的 RequestServerVersionValue 设置 RequestServerVersion SOAP 标头。” 但在 XML 中，我将 RequestServerVersionValue 指定为 Exchange2010。我还尝试指定 Exchange2007、Exchange2007_SP1、Exchange2010_SP1，但没有任何改变。

```
 <?xml version="1.0" ?> 
- <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
- <SOAP-ENV:Body>
- <FindItem xmlns="http://schemas.microsoft.com/exchange/services/2006/messages" Traversal="Shallow">
- <ItemShape>
  <BaseShape xmlns="http://schemas.microsoft.com/exchange/services/2006/types">IdOnly</BaseShape> 
  </ItemShape>
  <IndexedPageItemView MaxEntriesReturned="100" Offset="0" BasePoint="Beginning" /> 
- <ParentFolderIds>
- <DistinguishedFolderId xmlns="http://schemas.microsoft.com/exchange/services/2006/types" Id="calendar">
- <Mailbox>
  <EmailAddress>test@test1.com</EmailAddress> 
  </Mailbox>
 </DistinguishedFolderId>
  </ParentFolderIds>
  </FindItem>
- <ExchangeImpersonation xmlns="http://schemas.microsoft.com/exchange/services/2006/types">
- <ConnectingSID>
 <PrimarySmtpAddress>test@test1.com</PrimarySmtpAddress> 
 </ConnectingSID>
  </ExchangeImpersonation>
  <MailboxCulture xmlns="http://schemas.microsoft.com/exchange/services/2006/types">US-en</MailboxCulture> 
  <RequestServerVersion xmlns="http://schemas.microsoft.com/exchange/services/2006/types" Version="Exchange2010" /> 
- <TimeZoneContext xmlns="http://schemas.microsoft.com/exchange/services/2006/types">
- <TimeZoneDefinition Id="FLE Standard Time">
- <Periods>
  <Period Id="FLE Standard Time" /> 
  </Periods>
  </TimeZoneDefinition>
  </TimeZoneContext>
  </SOAP-ENV:Body>
  </SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:31:08.210

您有一个应该位于 SOAP 标头中的 XML 块，如下所示：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Header>
  <ExchangeImpersonation xmlns="http://schemas.microsoft.com/exchange/services/2006/types">
    <ConnectingSID>
    <PrimarySmtpAddress>developer@[snip].nl</PrimarySmtpAddress> 
    </ConnectingSID>
  </ExchangeImpersonation>
  <MailboxCulture xmlns="http://schemas.microsoft.com/exchange/services/2006/types">US-en</MailboxCulture> 
  <RequestServerVersion xmlns="http://schemas.microsoft.com/exchange/services/2006/types" Version="Exchange2010" /> 
  <TimeZoneContext xmlns="http://schemas.microsoft.com/exchange/services/2006/types">
    <TimeZoneDefinition Id="FLE Standard Time">
      <Periods>
        <Period Id="FLE Standard Time" /> 
      </Periods>
    </TimeZoneDefinition>
  </TimeZoneContext>
  </SOAP-ENV:Header>
  <SOAP-ENV:Body>
    <FindItem xmlns="http://schemas.microsoft.com/exchange/services/2006/messages" Traversal="Shallow">
    <ItemShape>
      <BaseShape xmlns="http://schemas.microsoft.com/exchange/services/2006/types">IdOnly</BaseShape> 
    </ItemShape>
    <IndexedPageItemView MaxEntriesReturned="100" Offset="0" BasePoint="Beginning" /> 
    <ParentFolderIds>
      <DistinguishedFolderId xmlns="http://schemas.microsoft.com/exchange/services/2006/types" Id="calendar">
        <Mailbox>
          <EmailAddress>developer@[snip].nl</EmailAddress> 
        </Mailbox>
      </DistinguishedFolderId>
    </ParentFolderIds>
  </FindItem>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

运行它会给你下一个错误 ;-)
ErrorTimeZone - 周期的 Bias 属性设置为 null

我用 SoapUI 发现了这个测试（提示！）

# kendo-ui - Kendo Entity Master-Detail 建议

> ID：14276156
> 
> 赞同：1
> 
> 时间：2013-01-11T10:28:08.127
> 
> 标签：kendo-ui, master-detail

我来自客户端-服务器背景。我正在尝试掌握 MVC-Entities-Kendo，而 StackOverflow 在过去几周帮助了我很多！

我开始使用 KendoGrid ajax 绑定构建主从细节，这样我就可以同时编辑主细节和细节。我阅读了这些示例，但我想要一些教程建议。

我的意思是...对于一个简单的主细节（1 个主细节，1 个细节），我需要多少个控制器，如何从主控获取密钥，当我在主控中更改行时如何检索细节等

抱歉，它有点含糊，但我正在尝试在我的“客户端-服务器”头脑中解决新事物（如 .NET）:)

提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:04:57.737

将[此处](http://demos.kendoui.com/web/grid/hierarchy.html)用于基本 ajax 编辑的[演示](http://demos.kendoui.com/web/grid/editing-inline.html)与用于 Ajax 层次结构的演示结合起来。

基本上，您将需要两个控制器 - 一个用于主 CRUD，一个用于详细 CRUD 操作。不同之处在于细节 CRUD 的每个操作都将接受一个额外的参数，即 masterRowID。

您需要以与在层次结构演示中发送细节网格的 READ 操作相同的方式发送它。

例如使用 EmployeeID

```
.Read(read => read.Action("HierarchyBinding_Orders", "Grid", new { employeeID = "#=EmployeeID#" })) 
```

# r - 使用 as.Date 对字符串 20130118 进行日期转换不成功

> ID：14276160
> 
> 赞同：0
> 
> 时间：2013-01-11T10:28:20.880
> 
> 标签：r, date

我有一组日期格式如下：

```
datevalue <- 20130118 
```

我想将它们格式化为正确的日期，并尝试使用以下代码执行此操作：

```
date <- as.Date(datevalue,"%Y%m%d") 
```

这与文档中列出的示例非常相似，但由于某种原因无法正常工作。在文档中列出了以下示例：

```
dates <- c("02/27/92", "02/27/92", "01/14/92", "02/28/92", "02/01/92")
as.Date(dates, "%m/%d/%y")
[1] "1992-02-27" "1992-02-27" "1992-01-14" "1992-02-28"
[5] "1992-02-01" 
```

但是，我收到以下错误消息：“charToDate(x) 中的错误：字符串不是标准的明确格式”。这在某种程度上对我来说是有意义的，但我觉得我的语法正确地定义了它。谁能解释为什么代码不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:44:03.340

将变量定义为字符（如@Arun 的评论中所述）有效。代码：

```
date2 <- as.Date(as.character(datevalue),"%Y%m%d") 
```

# java - java gwt空指针？

> ID：14276166
> 
> 赞同：2
> 
> 时间：2013-01-11T10:28:43.617
> 
> 标签：java, gwt, null

我有以下代码：

```
public class A extends Composite {
    public String url;
    public String result;
    public A(String url, String result) {
         this.url = url;
         this.result = result;
    }

 public A someObject;
 public VerticalPanel vp = new VerticalPanel();
 public void init() {
    someObject = new A(url, result);
    someObject.setStyleName("style");
    this.vp.add(someObject);
} 
```

但是当我调用 'this.vp.add(...)' 时，它会说：

```
 (TypeError): Cannot read property '__gwt_resolve' of null 
```

这个怎么可能？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:02:30.300

您的`Composite`小部件缺少对 的调用`initWidget()`。如果它是 a`Widget`它可能会错过对`setElement()`.

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomWidgets](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomWidgets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:36:07.363

`add`的方法`VerticalPanel`将小部件作为参数。但是您的 A 类没有扩展 Widget。有关更多信息和如何使用，请参阅此处：[http ://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/垂直面板.java?r=1288](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/VerticalPanel.java?r=1288)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:36:28.433

您的代码片段有点过于简化，无法真正说明，但您只能[将`Widget`'s](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/VerticalPanel.html#add%28com.google.gwt.user.client.ui.Widget%29)添加到 GWT`Panel`中，所以您的`A`类可能不是`Widget`? 它当然不在你的例子中。此外，一个小部件应该调用`setElement(...)`以“宣布”它是 DOM 部分。

尝试

```
public class A extends Widget {
    public String url;
    ...
    // etc

    public A(String url, String result) 
    { 
        setElement( whateverDOMelementYouHave ); 
        ...
    }
} 
```

干杯，

# c++ - 使用带有重载函数的 std::make_tuple 时如何避免 static_cast

> ID：14276179
> 
> 赞同：7
> 
> 时间：2013-01-11T10:29:24.320
> 
> 标签：c++, c++11, tuples

g++ 说

> 错误：函数 'constexpr std::tuple 的参数太多

`std::make_tuple`如果我在通话中省略了 static_cast

```
#include <tuple>

typedef int (*func_t)();

int number() {
  return 2;
}

double number(bool a) {
  return 1.2;
}

int main() {
  // With a static_cast it compiles without any error
  // std::tuple<func_t> tup = std::make_tuple(static_cast<func_t>(number));                                                               

  std::tuple<func_t> tup = std::make_tuple(number);
  return 0;
} 
```

这是完整的错误消息：

```
$ g++ -std=c++11 test.cc
test.cc: In function 'int main()':
test.cc:31:54: error: too many arguments to function 'constexpr std::tuple<typename std::__decay_and_strip<_Elements>::__type ...> std::make_tuple(_Elements&& ...) [with _Elements = {}; typename std::__decay_and_strip<_Elements>::__type = <type error>]'
In file included from test.cc:1:0:
/usr/include/c++/4.7/tuple:844:5: note: declared here
test.cc:31:54: error: conversion from 'std::tuple<>' to non-scalar type 'std::tuple<int (*)()>' requested
$ g++ --version
g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

如果我将主要功能更改为

```
int main() {
  std::tuple<func_t> tup = std::make_tuple(static_cast<func_t>(number));                                                               
  return 0;
} 
```

该程序编译得很好。是否有可能以某种方式省略 static_cast ？似乎没有必要提供两次**func_t类型。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T10:37:52.090

不要使用`std::make_tuple`. 使用*花括号初始化列表*作为：

```
std::tuple<func_t> tup { number }; 
```

现在编译器会选择合适的重载匹配`func_t`。

观看[现场演示](http://stacked-crooked.com/view?id=2188ab7dff57069cd38e2445c0702a13)

# android - 如何使用处理程序将 ProgressDialog 包装在后台线程中？

> ID：14276181
> 
> 赞同：0
> 
> 时间：2013-01-11T10:29:40.780
> 
> 标签：android, listview, youtube-api

我从[这里](http://blog.blundell-apps.com/show-youtube-user-videos-in-a-listview/ "这里")改编了一个教程，通过 JSON 从 YouTube 频道检索视频。一切正常，但我想在后台线程中加载视频时添加一个 ProgressDialog。如果后台线程由 AsyncTask 处理，我知道如何添加 ProgressDialog，但我不知道如何在这种情况下执行此操作。

这是代码的重要部分：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_video);

    listView = (VideosListView) findViewById(R.id.videosListView);
    listView.setOnVideoClickListener(this);

    getUserYouTubeFeed((VideosListView) findViewById(R.id.videosListView));
}

// This is the XML onClick listener to retreive a users video feed
public void getUserYouTubeFeed(View v){
    // We start a new task that does its work on its own thread
    // We pass in a handler that will be called when the task has finished
    // We also pass in the name of the user we are searching YouTube for
    new GetYouTubeUserVideosTask(responseHandler, "videoslusofona").run();
}

// This is the handler that receives the response when the YouTube task has finished
Handler responseHandler = new Handler() {
    public void handleMessage(Message msg) {
        populateListWithVideos(msg);
    };
}; 
```

所以我有一个活动列出打开的视频，最重要的是，我`android:onClick=getUserYouTubeFeed`在 XML 布局中有一个按钮，以便用户可以在需要时刷新。想法是将 ProgressDialog 放在某个位置，以便在活动启动以及用户按下刷新按钮时将其激活。

如果您能告诉我应该将 ProgressDialog 放在哪里，我将不胜感激。

提前致谢。

编辑：

整个活动的代码以及 Pratik Sharma 建议的修改：

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;

import com.example.igestao.youtube.GetYouTubeUserVideosTask;
import com.example.igestao.R;
import com.example.igestao.youtube.Library;
import com.example.igestao.youtube.Video;
import com.example.igestao.youtube.VideoClickListener;
import com.example.igestao.youtube.VideosListView;

/**
 * The Activity can retrieve Videos for a specific username from YouTube</br>
 * It then displays them into a list including the Thumbnail preview and the title</br>
 * There is a reference to each video on YouTube as well but this isn't used in this      tutorial</br>
 * </br>
 * <b>Note<b/> orientation change isn't covered in this tutorial, you will want to     override
 * onSaveInstanceState() and onRestoreInstanceState() when you come to this
 * </br>
 * @author paul.blundell
 */
public class MainVideoActivity extends Activity implements VideoClickListener {
// A reference to our list that will hold the video details
private VideosListView listView;
ProgressDialog dialog = new ProgressDialog(MainVideoActivity.this);

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_video);

    listView = (VideosListView) findViewById(R.id.videosListView);
    listView.setOnVideoClickListener(this);

    getUserYouTubeFeed((VideosListView) findViewById(R.id.videosListView));
}

// This is the XML onClick listener to retreive a users video feed
public void getUserYouTubeFeed(View v){
    // We start a new task that does its work on its own thread
    // We pass in a handler that will be called when the task has finished
    // We also pass in the name of the user we are searching YouTube for
    new VideosLoad().execute();
}

// This is the handler that receives the response when the YouTube task has finished
Handler responseHandler = new Handler() {
    public void handleMessage(Message msg) {
        if (dialog.isShowing()){
            dialog.dismiss();
        }
        populateListWithVideos(msg);
    };
};

/**
 * This method retrieves the Library of videos from the task and passes them to our ListView
 * @param msg
 */
private void populateListWithVideos(Message msg) {
    // Retreive the videos are task found from the data bundle sent back
    Library lib = (Library) msg.getData().get(GetYouTubeUserVideosTask.LIBRARY);
    // Because we have created a custom ListView we don't have to worry about setting the adapter in the activity
    // we can just call our custom method with the list of items we want to display
    listView.setVideos(lib.getVideos());
}

@Override
protected void onStop() {
    // Make sure we null our handler when the activity has stopped
    // because who cares if we get a callback once the activity has stopped? not me!
    responseHandler = null;
    super.onStop();
}

@Override
public void onVideoClicked(Video video) {
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(Uri.parse(video.getUrl()));
    startActivity(intent);

}

private class VideosLoad extends AsyncTask<Void, Void, String>{

    @Override
    protected String doInBackground(Void... arg0){
        new GetYouTubeUserVideosTask(responseHandler, "videoslusofona").run();
        return "Executed";

    }

    @Override
    protected void onPreExecute() {
        dialog.setMessage("Carregando Videos");
        dialog.show();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:03:47.970

所以我终于明白了，它看起来像这样：

异步任务：

```
private class VideosLoad extends AsyncTask<Void, Void, String>{

private Context context;

public VideosLoad(Context context) {
    this.context = context;
 }

@Override
protected void onPreExecute() {
   dialog = ProgressDialog.show(context, "", "Loading", true);
}

@Override
protected String doInBackground(Void... arg0){
    new GetYouTubeUserVideosTask(responseHandler, "videoslusofona").run();
    return "Executed";

} 
```

在处理程序中关闭对话框：

```
Handler responseHandler = new Handler() {
public void handleMessage(Message msg) {
    if (dialog.isShowing()){
        dialog.dismiss();
    }
    populateListWithVideos(msg);
};
}; 
```

和 onCreate

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_video);

listView = (VideosListView) findViewById(R.id.videosListView);
listView.setOnVideoClickListener(this);

getUserYouTubeFeed((VideosListView) findViewById(R.id.videosListView));

}

public void getUserYouTubeFeed(View v){

new VideosLoad(this).execute();

} 
```

感谢您的帮助[Pratik Sharma](https://stackoverflow.com/users/556975/pratik-sharma)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:48:03.483

尝试这样的事情：

```
 Dialog = new ProgressDialog(yourActivity.this);

        public void getUserYouTubeFeed(View v){
            new LongOperation().execute();
        }

        // This is the handler that receives the response when the YouTube task has finished
        Handler responseHandler = new Handler() {
            public void handleMessage(Message msg) {
                if (Dialog.isShowing()) {
                    Dialog.dismiss();
                }
                populateListWithVideos(msg);
            };
        }; 
```

为此声明此 Asyc 任务：

```
private class LongOperation extends AsyncTask<Void, Void, String> {
        @Override
        protected String doInBackground(Void... arg0) {
            new GetYouTubeUserVideosTask(responseHandler, "videoslusofona").run();
            return "Executed";
        }      
        @Override
        protected void onPreExecute() {
            Dialog.setMessage("Loading");
            Dialog.show();
        }
} 
```

# java - Java：使用剪贴板在同一应用程序的不同实例之间复制粘贴 java 对象

> ID：14276182
> 
> 赞同：8
> 
> 时间：2013-01-11T10:29:40.877
> 
> 标签：java, awt, clipboard, copy-paste

我正在尝试在同一应用程序的不同实例之间实现对象的复制粘贴。目前它只适用于一个应用程序（我的意思是，在同一个应用程序实例中复制和粘贴），但在不同实例之间不起作用。

复制代码：

```
// MyObject is a class of objects I want to copy/paste;
// MyObjectSelection is a class that impements Transferable and ClipboardOwner interfaces

Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
MyObject data = new MyObject(selectedItems);
MyObjectSelection dataSelection = new MyObjectSelection(data);
clipboard.setContents(dataSelection, this); 
```

之后，我可以检查剪贴板的内容，如下所示：

```
Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
Transferable clipboardContent = clipboard.getContents(this);

DataFlavor[] flavors = clipboardContent.getTransferDataFlavors();
System.out.println("flavors.length=" + flavors.length);
for (int i = 0; i < flavors.length; i++){
   System.out.println("flavor=" + flavors[i]);
} 
```

如果我从复制对象的同一个应用程序实例中执行此操作，它可以工作：`flavors.length`is `1`， mimetype is `application/x-java-serialized-object`，而且，它可以工作。

但是如果我打开应用程序，执行复制，然后再次打开同一个应用程序（第一个没有关闭，即两个实例同时运行），并尝试从那里检查剪贴板内容，然后`flavors.length`是`0`.

我检查了文档和这些示例：[one](http://goo.gl/qIiL8) , [two](http://goo.gl/aXxaJ)，但我仍然找不到我的实现中有什么问题。

我错过了什么？

* * *

**UPD：**我添加了 sscce: [clipboard_test.zip](http://goo.gl/F4ZMf)。

这是包含 3 个源文件的测试应用程序（我使用 Eclipse 构建它）：

*   `ClipboardTest.java` - 主应用程序类
*   `MyObject.java` - 用于复制/粘贴对象的类（此类仅包含数组`String`）
*   `MyObjectSelection.java` - 实现`Transerable`和`ClipboardOwner`接口的类

    有两个按钮：“复制”、“测试”。

    当您按下“复制”按钮时，将创建 MyObject 的新实例并将其放入剪贴板。

    当您按下“测试”按钮时，将检查剪贴板内容并将其回显到控制台（支持`DataFlavor`的计数和每个`DataFlavor`）

    所以，复制这些步骤：

*   开始申请

*   按“复制”按钮：您将`"object copied"`在日志中看到消息
*   按“测试”按钮：您将看到剪贴板的内容：

    ```
     flavors.length = 1
       flavor[0] = java.awt.datatransfer.DataFlavor[mimetype=application/x-java-serialized-object;representationclass=MyObject] 
    ```

*   启动应用程序的另一个实例（不要关闭第一个）

*   按“测试”按钮：你会看到剪贴板是空的：

    ```
     flavors.length = 0 
    ```

这是为什么？

* * *

**UPD2：** sscce 直接在这里发布：

```
 import java.awt.BorderLayout;

  import java.awt.datatransfer.Clipboard;
  import java.awt.datatransfer.ClipboardOwner;
  import java.awt.datatransfer.DataFlavor;
  import java.awt.datatransfer.Transferable;
  import java.awt.datatransfer.UnsupportedFlavorException;

  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;

  import java.awt.Toolkit;

  import javax.swing.JButton;
  import javax.swing.SwingUtilities; 
  import javax.swing.JFrame;

  public final class ClipboardTest implements Runnable, ClipboardOwner {

     public static void main(String[] args) {
        SwingUtilities.invokeLater (new ClipboardTest());
     } 

     public void run() {

        JFrame f = new JFrame ("Clipboard test");
        f.setDefaultCloseOperation (JFrame.DISPOSE_ON_CLOSE);

        //-- Create "copy" button.
        //   When you click it, new object "test_items" becomes created
        //   and put to the clipboard.
        {
           JButton button_copy = new JButton("copy");
           button_copy.addActionListener(new ActionListener(){
              public void actionPerformed(ActionEvent e){

                 String[] test_items = {
                    "one", "two", "three"
                 };

                 Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
                 MyObject data = new MyObject(test_items);
                 MyObjectSelection dataSelection = new MyObjectSelection(data);
                 clipboard.setContents(dataSelection, ClipboardTest.this);

                 System.out.println("object copied");
              }
           });
           f.add(button_copy, BorderLayout.NORTH);
        }

        //-- Create "test" button.
        //   When you click it, clipboard contents are checked
        //   and echoed to the console (count of supported DataFlavor's, and each DataFlavor)
        {
           JButton button_test = new JButton("test");
           button_test.addActionListener(new ActionListener(){
              public void actionPerformed(ActionEvent e){

                 Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
                 Transferable clipboardContent = clipboard.getContents(this);

                 DataFlavor[] flavors = clipboardContent.getTransferDataFlavors();
                 System.out.println("flavors.length = " + flavors.length);
                 for (int i = 0; i < flavors.length; i++){
                    System.out.println("flavor[" + i + "] = " + flavors[i]);
                 }

              }
           });
           f.add(button_test, BorderLayout.SOUTH);
        }

        f.pack();
        f.setVisible(true);
     }

     // ClipboardOwner implementation

     @Override
     public void lostOwnership(Clipboard clipboard, Transferable transferable){
        System.out.println("ClipboardTest: Lost ownership");
     }

     /* *****************************************************************************************
      * Object that I want to copy/paste
      * ****************************************************************************************/

     public static class MyObject {

        private String[] items;

        public MyObject(String[] items){
           this.setItems(items);
        }

        public String[] getItems(){
           return this.items;
        }

        public void setItems(String[] items){
           this.items = items;
        }

     }

     public static class MyObjectSelection implements Transferable, ClipboardOwner {

        private static DataFlavor dmselFlavor = new DataFlavor(MyObject.class, "Test data flavor");
        private MyObject selection;

        public MyObjectSelection(MyObject selection){
           this.selection = selection;
        }

        // Transferable implementation

        @Override
        public DataFlavor[] getTransferDataFlavors(){
           System.out.println("getTransferDataFlavors");
           DataFlavor[] ret = {dmselFlavor};
           return ret;
        }

        @Override
        public boolean isDataFlavorSupported(DataFlavor flavor){
           return dmselFlavor.equals(flavor);
        }

        @Override
        public synchronized Object getTransferData (DataFlavor flavor)
           throws UnsupportedFlavorException 
        {
           if (isDataFlavorSupported(flavor)){
              return this.selection;
           } else {
              throw new UnsupportedFlavorException(dmselFlavor);
           }
        }

        // ClipboardOwner implementation

        @Override
        public void lostOwnership(Clipboard clipboard, Transferable transferable){
           System.out.println("MyObjectSelection: Lost ownership");
        }

     }

  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T12:36:33.280

引用[本教程](http://docs.oracle.com/javase/tutorial/uiswing/dnd/dataflavor.html)：

> 使用此机制传输数据使用`Object`序列化，因此您用于传输数据的类必须实现`Serializable`接口，任何使用它序列化的类都必须实现。如果所有内容都不可序列化，您将`NotSerializableException`在放置或复制到剪贴板期间看到一个。

你`MyObject`的不是[`Serializable`](http://docs.oracle.com/javase/7/docs/api/index.html?java/io/Serializable.html)，所以它不能工作。该框架显然检测到了这一事实（与可序列化父类的不可序列化子类的情况相反，或者仅在进程中检测到不可序列化的类似情况），因此它甚至不会为其他进程提供这种风格。

一般来说，同一个java应用程序的两个实例不会有相同的地址空间，所以它们不能简单地访问彼此的内存。因此，您传输的所有内容都必须进行序列化。

# android - 提高布局中的图像质量

> ID：14276183
> 
> 赞同：0
> 
> 时间：2013-01-11T10:29:43.410
> 
> 标签：android, android-layout, android-image

我想将我用相机拍摄的图像或从我的图像库中拍摄的图像放在布局中，但质量太低，正如您在这些照片中看到的那样：

原图：

![真实形象](../Images/946eef7b14d36c0559b9f7fddfe27501.png)

![在此处输入图像描述](../Images/82e4c612a564f50224483756f3ea1e65.png)

![在此处输入图像描述](../Images/a384422e4940fc3cdaf34d348df10cc7.png)

1.-真实形象

2.-直接从相机拍摄这张照片

3.-从图片库中获取这张图片

第 2 和第 3 张图片的质量很差，特别是在第 3 张中，但我也想提高第 2 张的质量。有什么办法可以做到吗？

这是我用来拍照的代码（来自相机和图片库）：

```
 public class PhotoEditingActivity extends Activity {

private byte[] photoByteArray;
private Button btnRotate;
private ImageView ivPhoto;
private Bitmap bmp;
private Button btnEditDone;
private ChooseImageInputDialog dialogBuilder;
private AlertDialog dialog;
private Button btnCancel;
private Button btnChooseNewPhoto;
private String actualPath;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photo_editing);
    setUpViews();
    /*try{
        getPhoto();
    }catch(Exception e){
        showOptionsDialog();
    }*/
    showOptionsDialog();
    //first try to get photo from intent, 
    //if there is no photo
    //show options to take one
}

private void showOptionsDialog() {
    dialogBuilder = new ChooseImageInputDialog(this);
    dialog = dialogBuilder.create();
    dialog.show();

}

/*private void getPhoto() {
    Intent i = this.getIntent();
    Bundle extras = i.getExtras();
    photoByteArray = extras.getByteArray("photo");
    bmp = BitmapFactory.decodeByteArray(photoByteArray, 0, photoByteArray.length);
    ivPhoto.setImageBitmap(bmp);

}*/

private void setUpViews() {
    ivPhoto = (ImageView)findViewById(R.id.ivPhotoEditing);
    btnRotate = (Button)findViewById(R.id.btnPhotoEditRotate90);
    btnRotate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Matrix matrix = new Matrix();
            matrix.postRotate(90);
            bmp = Bitmap.createBitmap(bmp, 0, 0, 
                                          bmp.getWidth(), bmp.getHeight(), 
                                          matrix, true);

            ivPhoto.setImageBitmap(bmp);

        }
    });
    btnCancel = (Button)findViewById(R.id.btnPhotoEditingCancel);
    btnCancel.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            PhotoEditingActivity.this.setResult(RESULT_CANCELED);
            PhotoEditingActivity.this.finish();
        }
    });

    btnChooseNewPhoto =(Button)findViewById(R.id.btnPhotoEditingTakeNewPicture);
    btnChooseNewPhoto.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            showOptionsDialog();

        }
    });

    btnEditDone = (Button)findViewById(R.id.btnPhotoEditDone);
    btnEditDone.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            if(photoByteArray!=null){
                ByteArrayOutputStream os = new ByteArrayOutputStream();
                bmp.compress(Bitmap.CompressFormat.PNG, 100, os);
                photoByteArray = os.toByteArray();
                Intent i = PhotoEditingActivity.this.getIntent();
                BitmapData.setBitmap(bmp);
                Log.d("actual path pea", actualPath);
                PhotoEditingActivity.this.setResult(RESULT_OK, i);
                PhotoEditingActivity.this.finish();
            }else{
                Toast t = Toast.makeText(PhotoEditingActivity.this, "Please take a picture first", Toast.LENGTH_SHORT);
                t.show();
            }

        }
    });
}

public String getRealPathFromURI(Uri contentUri) {
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(contentUri, proj, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

private Bitmap decodeFile(File f){
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
    super.onActivityResult(requestCode, resultCode, data); 
    switch(requestCode) { 
    case ChooseImageInputDialog.ACTIVITY_SELECT_PHOTO:
        if(resultCode == RESULT_OK){  
            Log.d("resultcode pea pick", "result ok");
            Uri selectedImageUri=data.getData();
            actualPath=getRealPathFromURI(selectedImageUri);
            File file=new File(actualPath);
            bmp=decodeFile(file); //this is new bitmap which you can use for your purpose 

            ByteArrayOutputStream os = new ByteArrayOutputStream();
            //bmp.compress(Bitmap.CompressFormat.PNG, 65, os);
            photoByteArray = os.toByteArray();
            ivPhoto.setImageBitmap(bmp);
        }else{
            Log.d("resultcode pea pick", "result not ok");
        }
        break;
    case ChooseImageInputDialog.ACTIVITY_CAMERA_PHOTO:
        if(resultCode == RESULT_OK){
            Bundle extras = data.getExtras();
            bmp = (Bitmap)extras.get("data");
            ByteArrayOutputStream os = new ByteArrayOutputStream();
            //bmp.compress(Bitmap.CompressFormat.PNG, 65, os);
            photoByteArray = os.toByteArray();
            ivPhoto.setImageBitmap(bmp);
            actualPath = getRealPathFromURI(data.getData());
            Log.d("take pic actual path", actualPath);

        }
        break;
    }
}
   } 
```

将其放入布局的代码：

```
 private void setUpViews() {
    // TODO Auto-generated method stub
    upSize = up.length;
    upCount = 1;
    downSize = down.length;
    downCount = 1;
    head = (ImageView)findViewById(R.id.galleryUp);
    tShirt = (ImageView)findViewById(R.id.galleryDown);
    rowUp1 = (ImageView)findViewById(R.id.ivMonkeyRowUp1);
    rowUp2 = (ImageView)findViewById(R.id.ivMonkeyRowUp2);
    rowDown1 = (ImageView)findViewById(R.id.ivMonkeyRowDown1);
    rowDown2 = (ImageView)findViewById(R.id.ivMonkeyRowDown2);
    llTab = (LinearLayout)findViewById(R.id.llTab);
    llTop = (LinearLayout)findViewById(R.id.llTop);
    monkeyTab = (LinearLayout)findViewById(R.id.llTab1);
    monkeyTab.setOnClickListener(this);
    shareTab = (LinearLayout)findViewById(R.id.llTab3);
    shareTab.setOnClickListener(this);
    web = (ImageView)findViewById(R.id.imageWeb);
    web.setOnClickListener(this);
    ll = (LinearLayout) findViewById(R.id.llPhoto);
    bmp = BitmapData.getBitmap();
    d =(Drawable) new BitmapDrawable (getResources(), bmp);
    ll.setBackgroundDrawable(d);

    head2 = (ImageView)findViewById(R.id.galleryUp2);
    tShirt2 = (ImageView)findViewById(R.id.galleryDown2);
    rowUp12 = (ImageView)findViewById(R.id.ivMonkeyRowUp12);
    rowUp22 = (ImageView)findViewById(R.id.ivMonkeyRowUp22);
    rowDown12 = (ImageView)findViewById(R.id.ivMonkeyRowDown12);
    rowDown22 = (ImageView)findViewById(R.id.ivMonkeyRowDown22);
    llPhoto2 = (LinearLayout) findViewById(R.id.llPhoto2);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:31:46.373

我认为您在 o2.inSampleSize=scale 中使用的 var scale 的值太大了。您对图片进行了过多的下采样。

# jquery - 当 jQuery 动画运行时，单选按钮选择对用户不可见

> ID：14276185
> 
> 赞同：0
> 
> 时间：2013-01-11T10:29:48.770
> 
> 标签：jquery, jquery-animate, jquery-events

我有一组单选按钮，单击它们时会触发一个隐藏该组并显示下一个的动画。我遇到的问题是动画在用户看到选择之前运行，这可能会造成混淆。所以，我想等待屏幕重新绘制选择，然后动画过渡到下一组，但我还没有找到一种优雅的方式来做到这一点。

我创建了一个显示效果的小提琴（[http://jsfiddle.net/DPnXB/](http://jsfiddle.net/DPnXB/)），为方便起见，我还将在此处添加 Javascript 和 html。

```
function init(){
  $(".panel.first").addClass("focus");
  $("input:radio").on("click", animate);
}
init();

function animate(){
  var currentPanel, nextPanel;

  currentPanel = $(this).parents(".panel");
  nextPanel = $(".panel").not(".focus").first();

  nextPanel.css({opacity: 0}).addClass("focus");
  currentPanel.removeClass("focus");
  nextPanel.animate({opacity: 1}, 300); 
} 
```

```
<div class="panel first">
  First panel
  <label><input type="radio" name="radioGroup1"/> option 1 </label>
  <label><input type="radio" name="radioGroup1"/> option 2 </label>
  <label><input type="radio" name="radioGroup1"/> option 3 </label>
</div>
<div class="panel last">
  Last panel
  <label><input type="radio" name="radioGroup2"/> option 1 </label>
  <label><input type="radio" name="radioGroup2"/> option 2 </label>
  <label><input type="radio" name="radioGroup2"/> option 3 </label>
  <label><input type="radio" name="radioGroup2"/> option 4 </label>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:06:55.290

我认为没有“优雅”的方式，没有其他事件会有所帮助，所以我想你最好的选择是在开始动画之前短暂暂停：

[http://jsfiddle.net/DPnXB/2/](http://jsfiddle.net/DPnXB/2/)

请注意，我已经改变了他们选择当前面板的方式，这是必要的，因为`animate`函数的范围不再是`input`元素，而是`window`对象！

为了以防万一它可能有任何用处，这里有一个稍微修改过的版本，可以正确处理超过 2 个组：

[http://jsfiddle.net/DPnXB/3/](http://jsfiddle.net/DPnXB/3/)

# mysql - MySQL：将输出从 SQL 脚本重定向到日志文件

> ID：14276186
> 
> 赞同：0
> 
> 时间：2013-01-11T10:29:49.573
> 
> 标签：mysql, logfile

我想从 mysql 命令行工具执行一个 SQL 脚本文件，比如

```
mysql database < script.sql 
```

其中脚本*script.sql*包含将输出重定向到文件的语句。

我认为这应该可以通过在脚本中放置一个*tee来实现，如下所示：*

```
tee script.log;

SELECT sysdate() AS "Start" FROM dual;
UPDATE table SET column = 'off';
COMMIT; 
```

不幸的是，这不起作用，没有*script.log*出现。

是否有可能将输出从脚本本身重定向到文件？

用例：这些脚本将在部署应用程序时由我们的服务部门执行。他们希望以尽可能少的步骤和努力来执行脚本，因此在命令提示符的末尾放置一个重定向 ( *> script.log* ) 不是一个真正的选择，至少如果他们必须在一次。

在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:34:59.640

使用 OUTFILE 作为 SELECT 本身的一部分，如下所示：SELECT * FROM myTable INTO OUTFILE '/path/to/file.log'。另外，对于 spoolong，检查 [What is the spool command in mysql](https://stackoverflow.com/questions/11190337/what-is-the-equivalent-of-the-spool-command-in-mysql)

# c# - MVC Action 属性测试

> ID：14276188
> 
> 赞同：2
> 
> 时间：2013-01-11T10:29:53.073
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, mvccontrib

我有一个具有以下操作的 MVC3 应用程序。

```
public class FooController : ApplicationController
{
  [My(baz: true)]
  public void Index()
  {
    return view("blah");
  }
} 
```

我可以使用 MVCContrib 的 TestHelper 以这种方式编写一个测试来验证 Index 是否被 MyAttribute 修饰。

```
[TestFixture]
public class FooControllerTest
{
  [Test]
  public void ShouldHaveMyAttribute()
  {
    var fooController = new FooController();
    fooController.Allows(x => x.Index(), new List<Type>{typeof(MyAttribute)});
  }
} 
```

问题 - 如何更改此测试以测试 MyAttribute 装饰是否包含属性“baz”为真？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:25:12.863

如果要在单元测试中验证属性，则需要使用反射来检查控制器方法，如下所示。

```
[TestFixture]
public class FooController Tests 
{
    [Test]
    public void Verify_Index_Is_Decorated_With_My_Attribute() {
        var controller = new FooController ();
        var type = controller.GetType();
        var methodInfo = type.GetMethod("Index");
        var attributes = methodInfo.GetCustomAttributes(typeof(MyAttribute), true);
        Assert.IsTrue(attributes.Any(), "MyAttribute found on Index");
        Assert.IsTrue(((MyAttribute)attr[0]).baz);
    }
} 
```

这可能会帮助你

# facebook - Facebook 照片分享链接？

> ID：14276189
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:29:55.613
> 
> 标签：facebook, share, photos

是否有任何链接在单击时会自动将您重定向到照片上传页面？

与此共享器类似，但用于照片： http: [//www.facebook.com/sharer/sharer.php](http://www.facebook.com/sharer/sharer.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:31:28.590

如果您要求 Facebook 插件，那么答案是**否定**的。这是Facebook 提供[的所有插件的列表。](https://developers.facebook.com/docs/plugins/)

# php - 如何为openssl加密生成随机密码和IV

> ID：14276191
> 
> 赞同：0
> 
> 时间：2013-01-11T10:29:57.690
> 
> 标签：php, encryption, random, passwords, openssl

我正在使用 openssl（openssl_encrypt 和 openssl_decrypt）加密我的 Web 应用程序文件下载系统，我想为此生成随机密码和 IV。加密方法将是 AES-256-CBC。我是密码学的新手，发现关于这个问题的信息很少。

```
function encryptString($str) {
    $encryptionMethod = "AES-256-CBC";  
    $secretHash = "gererated random secret openssl key here";
    $encryptedStr = openssl_encrypt($str, $encryptionMethod, $secretHash, false, "generated random IV here");
    return $encryptedStr;
} 
```

我试过 openssl_pkey_new(); 但它让我返回布尔值错误。这是正确的方法吗？

我从这里得到了提示：[PHP 中的双向加密](https://stackoverflow.com/questions/1391132/two-way-encryption-in-php)

作为运行 WAMP localhost 的测试环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:03:11.443

由于在 Windows 环境中使用 php 以编程方式执行此操作存在问题，因此我在 Linux 中生成了密码。

```
openssl enc -d -a -md sha1 -aes-256-cbc -nosalt -p 
```

在这里找到了 Windows 的安装说明：php.net/manual/en/openssl.installation.php 但我仍然无法正常工作。

我还需要稍微更改功能以使其正常工作：

```
function encryptUrl($url) {
    $encryptionMethod = "AES-256-CBC";  
    $pass = "Generated Pass";
    $iv = "Generated IV";
    $encryptedUrl = base64_encode(openssl_encrypt($url, $encryptionMethod, $pass, false, $iv));
    return $encryptedUrl;
} 
```

# matlab - 将不同长度的数据导出到带有表头的表中

> ID：14276197
> 
> 赞同：0
> 
> 时间：2013-01-11T10:30:33.360
> 
> 标签：matlab, export

我想将数据从 Matlab 导出到数据文件。我希望导出的表对每个列和标题都有单独的数据。我的问题是，我不知道如何为不同的数据长度获取它。

这是一个小示例，显示我要导出的内容：

标题 1 标题 2 标题
 3 0 2 3
       2 3
             3

# php - 逻辑组合数量

> ID：14276198
> 
> 赞同：1
> 
> 时间：2013-01-11T10:30:34.597
> 
> 标签：php, if-statement, logical-operators

我有以下变量：

```
$start_t = 1;
$start_n = 2;
$end_t = 6;
$end_n = 5; 
```

我想检查 $start_t 和 $start_n AND $end_t 和 $end_n 之间的所有逻辑组合。

我有以下内容：

```
if($start_t >= $start_n && $end_t >= end_n)
{ // Do stuff }
elseif($start_t < $start_n && $end_t >= $end_n)
{ // Do stuff }
elseif($start_t >= $start_n && $end_t < $end_n)
{ // Do stuff }
elseif($start_t < start_n && $end_t < $end_n)
{ // Do stuff } 
```

还有其他我看不到的组合吗？我的意思是在 $start_t、$start_n 和 $end_t 和 $end_n 之间。

有没有办法计算所有可用的组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:33:55.207

缺少相等大小写（`$start_t === $start_n`，类似 for `$end_*`）。否则，所有组合都在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:41:18.857

当您使用二元运算符时，您有 2！= 开始变量的 2 个排列，每个排列 2！= 结束变量的 2 个排列。所以，你总共有 2!*2! = 4 种组合，假设您不需要测试是否相等。这证明了您的代码对每种情况都进行了测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:40:06.437

```
 if($start_t >= $start_n)
        {
            if($end_t >= end_n)
                //do stuff
            else
                //do stuff
        }
        else
        {
            if($end_t >= end_n)
                //do stuff
            else
                //do stuff
        } 
```

像这样的重组将帮助您更好地识别组合。您可以稍后将其重构回原始格式

# html - 将 inline-block 与

> ID：14276201
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:30:41.843
> 
> 标签：html, css

您可能知道在“显示：内联块”元素之间注释空格的钩子。

您如何看待这样的解决方案：

```
 <div style="display:inline-block">Content 1</div><!--
---><div style="display:inline-block">Content 2</div><!--
---><div style="display:inline-block">Content 3</div> 
```

我想最后使用'--->'来保持代码缩进没有空格（我使用四位制表符）。

还有一个问题：在 Sublime text 2 中，它不理解注释是用 '--->' 关闭的，并且在注释之后绘制所有代码并且不突出显示它。有没有简单的方法解决它？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T10:43:27.427

[请参阅有关注释](http://www.w3.org/TR/html5/syntax.html#syntax-comments)的 HTML 5 规范：

> 注释必须以四个字符序列 U+003C LESS-THAN SIGN、U+0021 EXCLAMATION MARK、U+002D HYPHEN-MINUS、U+002D HYPHEN-MINUS ( `<!--`) 开头。按照这个顺序，注释可以有文本，附加限制是文本不能以单个 U+003E GREATER-THAN SIGN 字符 ( `>`) 开头，也不能以 " `-`" (U+002D) 字符后跟 U +003E GREATER-THAN SIGN ( `>`) 字符，也不包含两个连续的 U+002D HYPHEN-MINUS 字符 ( `--`)，**也不以 " `-`" (U+002D) 字符结尾**。最后，注释必须以三个字符序列 U+002D HYPHEN-MINUS、U+002D HYPHEN-MINUS、U+003E GREATER-THAN SIGN ( `-->`) 结束。

`-`您正在以不允许的方式结束评论文本。这会混淆编辑器的语法高亮显示。

使用`-->`而不是`--->`将修复它。（我已经在我的 subl2 副本中对此进行了测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:42:01.090

对于您想要达到的效果，更简洁的解决方案是`float:left`在元素上使用。这是浮动设计的确切情况。这样您就可以在使用内联元素时消除空格问题。

# jquery - fancybox2 iframe 不适用于分页

> ID：14276203
> 
> 赞同：0
> 
> 时间：2013-01-11T10:30:45.123
> 
> 标签：jquery, fancybox-2

我使用 fancybox2 打开外部链接，这在第一个结果页面上运行良好。

移动到第二页会导致 iframe 加载，但它显示为灰色，并且单击鼠标会关闭 iframe。

分页是 POST 完成的，所以页面没有刷新，可能是这个问题？

这是fancybox的代码：

```
$(document).ready(function() {  
    $(".fancybox-html").fancybox({
    type                : 'iframe',
    beforeLoad: function() {
        var hook = $(this.element).attr('hook');
        this.title = '<li onclick="sendIframeDataToParent(\'' + hook + '\');">Submit</li>'
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:12:31.287

通过将 fancybox 移动到 window.onload = function() 让它工作

# iphone - 表数据重载问题

> ID：14276205
> 
> 赞同：0
> 
> 时间：2013-01-11T10:30:59.070
> 
> 标签：iphone, tableview, reload

请参见下面的代码，它从数组中删除对象但不重新加载表

```
- (void)tableView:(UITableView *)aTableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSLog(@" commitEditingStyle");
    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
        NSLog(@" commitEditingStyle Delete ");
        [self.arry removeObjectAtIndex:indexPath.row];
        [tableView reloadData];
    } else if (editingStyle == UITableViewCellEditingStyleInsert)
    {
        NSLog(@" commitEditingStyle Insert ");
        [self.arry insertObject:@"New Row" atIndex:[arry count]];
        [tableView reloadData];
    }
} 
```

我也`[tableView reloadData]`写过`ViewWillAppear`&`ViewDidLoad`但它没有重新加载。

`TableView`通过情节提要添加到 ViewController & IBoutlet 添加到`.h`文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:47:55.313

```
- (void)tableView:(UITableView *)aTableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
```

forRowAtIndexPath:(NSIndexPath *)indexPath {

```
if (editingStyle == UITableViewCellEditingStyleDelete) {
    [arryData removeObjectAtIndex:indexPath.row];
    [tblSimpleTable reloadData];
} else if (editingStyle == UITableViewCellEditingStyleInsert) {
    [arryData insertObject:@"Mac Mini" atIndex:[arryData count]];
    [tblSimpleTable reloadData];
} 
```

}

使用类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:48:22.890

您必须将消息发送到您的插座（如果您有一个 ie `self.tableView`）或直接发送到调用委托方法的 tableview ：（`[aTableView reloadData];`注意**a**）。

如果您仔细查看方法签名，您会看到 tableView 实例以以下方式传递给您`aTableView`：

`-(void)tableView:(UITableView *)`**一个表视图**...

# javascript - 使父函数返回的函数

> ID：14276206
> 
> 赞同：1
> 
> 时间：2013-01-11T10:31:04.037
> 
> 标签：javascript, function

我有一个函数`parent`，它调用`child`，然后在里面做其他事情`otherStuff`：

```
function parent() {
    child();

    otherStuff();
} 
```

是否可以修改`child`（并保持`parent`原样）以便`child`调用`parent`在返回后立即`child`返回？这在 EcmaScript 6 中是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:31:23.460

**这样做的**不好**`child`的方法是在 中抛出一个异常，它会冒泡到`parent`原始调用者。这种方法期望原始调用者`parent`捕获异常。**

 **```
function originalCaller() {
  try {
    parent();
  }
  catch(e) {}
}

function parent() {
  child();
  otherStuff();
}

function child() {
  throw 0;
}

function otherStuff() {
  // other stuff
} 
```

你想就这样离开`parent`，对吧？所以，**丑陋的方法**是让`child`临时修改`otherStuff`：

```
function child() {
  _otherStuff = otherStuff;
 otherStuff = function() { otherStuff = _otherStuff; }
} 
```

这种方式*一次*`otherStuff`什么都不做，然后又回到原来的状态。同样，它不仅完全丑陋，而且对' 的结构做出了假设。*`parent`***

# ruby - 测试优先 Ruby Hello 实验室

> ID：14276210
> 
> 赞同：0
> 
> 时间：2013-01-11T10:31:09.367
> 
> 标签：ruby, rspec

Alex Chaffee 的 test-first ruby​​ 课程教授如何使用 rspec。我目前坚持第一次练习，`00_hello`. 我按照指示创建了一个`hello.rb`包含代码的文件：

```
def hello
   "Hello!"
end 
```

并将其放在`00_hello`带有`hello_specs.rb`. 当我`rake`从目录中输入终端时`00_hello`，我收到以下错误，这些错误与 rspec 错误不同：

```
(in /Users/stevenjli/Documents/App Academy/learn_ruby-master)
/Users/stevenjli/Documents/App Academy/learn_ruby-master/00_hello/hello_spec.rb:116:in `require':     cannot load such file -- hello (LoadError)
from /Users/stevenjli/Documents/App Academy/learn_ruby-master/00_hello/hello_spec.rb:116:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `block in load_spec_files'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `each'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load_spec_files'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:22:in `run'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:80:in `run'
from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun'
rake aborted!

/usr/local/rvm/rubies/ruby-1.9.3-p286/bin/ruby -S rspec /Users/stevenjli/Documents/App\         
Academy/learn_ruby-master/00_hello/hello_spec.rb -I/Users/stevenjli/Documents/App   
Academy/learn_ruby-master/00_hello -I/Users/stevenjli/Documents/App Academy/learn_ruby-master 
/00_hello/solution -f documentation -r ./rspec_config failed 
```

我猜我的设置有问题。这是我正在使用的版本。

*   Mac OS 10.8.2
*   红宝石版本 1.9.3
*   耙 0.9.2.2
*   rspec 版本 2.12.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T01:50:54.783

如果它对任何人有帮助，我在 ruby​​ 1.9.3 上遇到了完全相同的问题。我的解决方案是三方面的：

1.  跑`gem install rspec; bundle update; bundle install`
2.  cd进00_hello，然后编辑`require`行读取`require './hello'`
3.  跑`rspec hello_spec.rb`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T03:50:54.527

检查 00_hello 文件夹的目录结构。应该是这样的

```
 ├── hello.rb
 ├── hello_spec.rb
 └── index.html 
```

`Rakefile`given by`learn_ruby`负责将正确的目录添加到加载路径，因此您不必担心它，除非您在不了解的情况下在某处更改了它。

如果您仍有问题，请`Rakefile`在此处发布

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:04:31.877

您是否尝试过从 test-first 课程的根目录运行 rake？

halfelf 也可能是对的，也许他们一直在运行包含`.`在 $LOAD_PATH 中的 ruby​​ 1.8，而您正在运行的 1.9.3 没有这样做，因为`require_relative`etc没有必要。

# c# - 使用 LINQ 的多对多交集查询

> ID：14276211
> 
> 赞同：1
> 
> 时间：2013-01-11T10:31:16.123
> 
> 标签：c#, linq, entity-framework, asp.net-mvc-4

我有以下课程：-

```
Blog.cs
public int BlogId { get; set; }
public string BlogTitle { get; set; }
public virtual ICollection<BlogTag> BlogTags { get; set; } 
```

和

```
BlogTag.cs
public int BlogTagId { get; set; }
public string BlogTagName { get; set; }
public Blog Blog { get; set; }
public int BlogId { get; set; } 
```

现在我需要获取包含 BlogTagName 的博客列表，所以我尝试了以下方法，但它无法正常工作：-

```
 var tags = viewModel.BlogViewModel.BlogList.Where(post => post.BlogTags.All(tag => tag.BlogTagName.Contains(tagName))); 
```

我怎样才能得到这个工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:32:52.247

`All`用`Any`灵魂代替

这将检查博客的“至少一个”blockTag 是否包含您的 tagName。

使用`All`，博客中的所有 blockTag 都应包含您的 tagName。

# ios - 如何设置最低要求的 iOS 版本？

> ID：14276220
> 
> 赞同：10
> 
> 时间：2013-01-11T10:31:46.417
> 
> 标签：ios, app-store-connect

我有一个 IOS 项目，我在 Targets > Build Settings 下将 IOS Deployment Target 设置为 4.3。我已经将它上传到 iTunes 连接，现在它说需要 IOS 6 或更高版本。有效的架构还有：armv7 armv7。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T10:34:59.283

您的应用程序支持的最低版本在项目的摘要部分中设置。寻找`deployment target`。例如，如果您`4.3`在该字段中指定，则意味着您支持从`4.3`. 仔细检查您的设置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-08T11:03:34.497

部署目标在 xcode 的项目摘要页面中

![在此处设置值](../Images/a53fa87314208627521f8b967071dcdb.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-21T03:39:25.257

假设您已将最低部署目标设置为 iOS 13，这意味着您的应用程序与 iOS 13 及更高版本的设备兼容。

该应用程序无法在低于 13.0 的设备上运行，但可以在高于 iOS 13.0 的任何 iOS 版本上运行

[![在此处输入图像描述](../Images/f5c44817d762939d1b5401bdb355fa91.png)](https://i.stack.imgur.com/KLxtz.png)

# amazon-web-services - 您如何监控 AWS CloudFormation 上的 Auto Scaling？

> ID：14276222
> 
> 赞同：0
> 
> 时间：2013-01-11T10:31:56.233
> 
> 标签：amazon-web-services, amazon-cloudformation

我使用 Visual Studio Toolkit 设置了一个快速 Web 应用程序，并使用默认设置将其部署到 CloudFormation。然后我开始使用 JMeter 加载应用程序，直到它最终停止返回 200 个状态。

从我可以看到没有发生自动缩放 - 即：没有启动重复的实例。这是否需要在 CloudWatch 中手动配置，并根据 CPU 使用情况发出警报，还是 CloudFormation 为我处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:52:17.773

是的，我犯了一个错误——经过进一步测试后，我发现负载均衡器在达到每秒 kb 的某个阈值后确实进行了扩展。我认为问题在于我一开始就很努力，在它有机会扩大规模之前它就陷入了困境。

# c# - 使用桌面资源的 MonoTouch 本地化

> ID：14276223
> 
> 赞同：1
> 
> 时间：2013-01-11T10:32:04.097
> 
> 标签：c#, localization, xamarin.ios

我们有一个桌面应用程序，我们正在尝试使用 Monotouch 将其“移植”到 iPad。

对于桌面，所有本地化字符串都放入资源文件中，并且每种语言都有一个单独的资源 .dll（标准 Visual Studio 方式）。

使用 MonoTouch 重用它的可能性是什么？

标准的 iOS 方式是使用 .lproj 文件夹，我们可以从资源 dll 生成它们，但可能有更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:08:11.303

[您可以使用 resx 文件 - 您可以在此处](https://bugzilla.xamarin.com/show_bug.cgi?id=3708#c0)找到示例项目。

还有[白话](https://github.com/rdio/vernacular)，看起来很有趣，但我自己并没有真正尝试过。

# android - 使用弹出窗口android的个人资料详细信息？

> ID：14276230
> 
> 赞同：0
> 
> 时间：2013-01-11T10:32:17.147
> 
> 标签：android, dialog, popup, chat

我刚刚为 android 创建了一个聊天应用程序，我在使用弹出窗口创建用户配置文件的位置时遇到了问题，弹出窗口顶部是图像，下面是详细信息..（详细信息包括联系人、聊天、时间线等这受出现的选项卡的限制）如下图所示，，，[中心图片...]

[http://developer.android.com/design/media/dialogs_popups_example.png](http://developer.android.com/design/media/dialogs_popups_example.png)

我在哪里可以获得解决此案例的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:54:21.447

好的.. 还有另一种方法可以在没有对话框的情况下执行此操作。我在我的一个项目中使用了这个技巧......

创建以下主题：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">true</item>
  </style>
</resources> 
```

然后在清单文件中将此设置为您的活动的主题，如以下代码所示：

```
<activity android:name=".YourDialogActivity" android:theme="@style/Theme.Transparent"></activity> 
```

现在你可以放任何你想放的东西`Activity`，它看起来就像屏幕截图中的那个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:01:03.197

本文档适合您：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

它解释了自定义对话框，listDialog，...如果您要复制联系人对话框，您可以尝试使用布局的自定义对话框。

# yii - Yii - 视图中的意外注销链接

> ID：14276234
> 
> 赞同：0
> 
> 时间：2013-01-11T10:32:38.773
> 
> 标签：yii

欢迎。

我有一个奇怪的情况，因为我的 Yii 框架本身会生成注销链接并将其放在每个元素（span、div、li 和其他）的视图主体中通过这个问题，每次单击视图主体时我都会得到已登出

为了生成视图，我使用了 $this->render();

结果 DOM 看起来像这样：

```
<section class="top-line">
    <div class="right">
         <a href="/workflow/?r=user/logout"> </a>
    </div>
    <a href="/workflow/?r=user/logout"> </a>
</section>
<a href="/workflow/?r=user/logout">
  <div class="main-box">...</div>
</a>

<footer>
<a href="/workflow/?r=user/logout"> </a>
<div class="container">..</div>
</footer> 
```

@DarkMukke 包括布局/main.php：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="en" />
    <link rel="shortcut icon" href="<?php echo Yii::app()->request->baseUrl; ?>/favicon.ico" type="image/x-icon" />
    <!-- blueprint CSS framework -->
    <link rel="stylesheet" type="text/css" href="<?php echo baseUrl(); ?>/css/screen.css" media="screen, projection" />
    <link rel="stylesheet" type="text/css" href="<?php echo baseUrl(); ?>/css/print.css" media="print" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="<?php echo baseUrl(); ?>/css/ie.css" media="screen, projection" />
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="<?php echo baseUrl(); ?>/css/form.css" />
    <link rel="stylesheet" type="text/css" href="<?php echo baseUrl(); ?>/css/blue/style.css" />

    <?php
    $cs = cs();
    $cssCoreUrl = $cs->getCoreScriptUrl();
    $cs->registerCssFile($cssCoreUrl . '/jui1.9.2/css/base/jquery-ui.css');
    $cs->registerCoreScript('jquery');
    $cs->registerCoreScript('jquery.ui');
    $cs->registerCoreScript('cookie');
    $cs->registerScriptFile('js/block.js');
    $cs->registerScriptFile('js/global.js');
    $cs->registerScriptFile('css/blue/style.js');
    ?>

    <title><?php echo CHtml::encode($this->pageTitle); ?></title>
</head>
<body>

    <header class="top">
        <div class="container">
            <div class="logo">
                <h1><a href="<?php echo Yii::app()->baseUrl; ?>" ><?php echo CHtml::encode(Yii::app()->name); ?></a></h1>
            </div>
            <nav>
                <?php $this->widget('Menu'); ?>
            </nav>
        </div>
    </header>

    <section class="top-line">
        <div class="container">
            <?php if (isset($this->breadcrumbs)): ?>
                <div class="left">
                    <?php
                    $this->widget('zii.widgets.CBreadcrumbs', array(
                        'links' => $this->breadcrumbs,
                    ));
                    ?>
                </div>
            <?php endif ?>
            <?php if (Yii::app()->user->isGuest == false): ?>
                <div class="right">
                    <a href="<?php echo url('/user/logout'); ?>"><?php echo t('Logout') . ' (' . Yii::app()->user->name . ')'; ?>
                </div>
            <?php endif; ?>
        </div>
    </section>

    <div class="main-box">
         <div class="container clear">
                <div class="clear cenetr">
                    <?php
                    foreach (Yii::app()->user->getFlashes() as $key => $message) {
                        echo '<div class="flash-' . $key . '">' . $message . " <span class=\"close-flush-btn\"></span></div>\n";
                    }
                    ?>
                </div>
        </div>
        <div class="wrapper">
            <?php echo $content; ?>
        </div>
    </div>
    <footer>
        <div class="container">
            <div class="wrapper">
                <div class="fleft"><?php echo Yii::app()->params['copyrightInfo']; ?></div>
                <div class="fright"><?php echo Yii::powered(); ?></div>
            </div>
        </div>
    </footer>
</body> 
```

有人遇到过这个问题吗？这可能是由这种行为造成的。

[已解决] 我的愚蠢错误。不要在注销链接中关闭标签，并且正文会在每次点击时做出反应。真可惜..感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:35:11.297

您的标签内有主框

将其用作那里的最后 3 行，否则每次单击主框都不会触发元素

```
<a href="/workflow/?r=user/logout"> </a>
<div class="main-box">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:28:25.117

您希望未登录的用户可以使用的内容，请使用

```
if (Yii::app()->user->isGuest){
echo 'your content';
} 
```

登录用户的内容

```
if (!Yii::app()->user->isGuest){
echo 'your content';
} 
```

Let me now if that works. If it doesn't, you have something wrong in your UserIdentity class

# javascript - 无法阻止页面刷新表单中的返回命中

> ID：14276238
> 
> 赞同：0
> 
> 时间：2013-01-11T10:32:53.873
> 
> 标签：javascript, html, forms, preventdefault

在我的文本字段中点击返回后，我试图阻止我的页面刷新：

```
<input onkeyup="keyPressCodetitle(event, false, false, 0, 6, 20);" class="form_field" id="codeTitle" type="text" name="codename"> 
```

但不知何故，即使有（据我所知）阻止它刷新页面的必要要求，keyPressCodetitle 功能也不会阻止这种情况。（但是，它在 if 语句中相应地显示警报等。因此该功能和 if 工作正常）

我可能错过了什么吗？

```
function keyPressCodetitle (e, caseBoolean, isFragment, generalCode, sourceId, projectId, method) {
    //Get the key entered via onpress(Which for firefox)
    var keycode = (e.keyCode ? e.keyCode : e.which);
    if(keycode == '13'){
        e.preventDefault();
        //Functioncall here
    } else {
        //other function here when not pressing return  
    }
    return false;
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:54:25.170

不是“[Return] 使页面刷新”；一些（很多？）浏览器默认情况下会将文本输入中的 [Return] 视为表单提交的标志。

这似乎发生在 key **down**上，所以在 key **up**上阻止这种情况为时已晚。

添加额外的侦听器`onkeydown`可能会有所帮助：

```
<input onkeydown="preventSubmit(event);" onkeyup="keyPressCodeTitle(event);" /> 
```

[JSFiddle 演示](http://jsfiddle.net/2eEpZ/)

# php - 如何从php中的特定位置取消设置所有上部数组值

> ID：14276240
> 
> 赞同：1
> 
> 时间：2013-01-11T10:32:58.473
> 
> 标签：php, arrays

我在 php 中有一个小任务。我有这两个数组。

图片

```
Array
(
    [0] => 420157_NpFQlK
    [1] => 420157_5yVlp9
    [2] => 420157_hqioBU
    [3] => 420157_a5wbZB
) 
```

级别

```
Array
(
    [0] => 50
    [1] => 100
    [2] => 150
    [3] => 200
    [4] => 250
    [5] => 300
    [6] => 350
    [7] => 400
) 
```

现在我需要像这样显示结果

图片

```
Array
(
    [0] => 420157_NpFQlK
    [1] => 420157_5yVlp9
    [2] => 420157_hqioBU
    [3] => 420157_a5wbZB
) 
```

级别

```
Array
(
    [0] => 50
    [1] => 100
    [2] => 150

) 
```

我想取消所有上层。我的意思是如果图像数组的计数为 4，则未设置的级别 [3]（第 4 个索引）和所有上层。我怎样才能在最短的 php 脚本中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:36:36.250

例如[`array_slice`](http://php.net/manual/en/function.array-slice.php)：

```
$levels = array_slice($levels, 0, count($images) - 1); 
```

您应该注意这些参数，以便在边缘情况下也能完全按照您希望的方式工作（例如，如果`$images`为空会发生什么？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:36:54.143

为此使用array_slice：D

```
$subArray = array_slice($arr,0,$index); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:37:12.787

```
<?php array_slice($levels, 0,count($images)-1); ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T10:41:12.587

使用数组切片。

```
$count =3;
$slice_array=array_slice($levels,0,$count); 
```

# java - JSch 在尝试通过 KeyPairGenerator 加载 RSA 私钥时得到“无效的私钥：”

> ID：14276246
> 
> 赞同：6
> 
> 时间：2013-01-11T10:33:43.070
> 
> 标签：java, ssh, rsa, jsch

我正在使用 java.security.KeyPairGenerator 生成一个 RSA 密钥对，然后尝试通过 Jsch(0.1.49) 中提供的 KeyPair 类加载私钥。编码：

```
public static void main(String[] args) {
    String header = "-----BEGIN RSA PRIVATE KEY-----";
    String footer = "-----END RSA PRIVATE KEY-----";
    KeyPairGenerator keyPairGenerator;
    try {
        keyPairGenerator = KeyPairGenerator.getInstance("RSA");
        keyPairGenerator.initialize(2048, new SecureRandom());
        PrivateKey privateKey = keyPairGenerator.genKeyPair().getPrivate();
        String key = new String(Base64.encodeBase64(privateKey.getEncoded()));
        StringBuffer pem = new StringBuffer(header+"\n");
        int len=key.length();
        for( int idx=0 ; idx < len ; idx+= 64 )
            pem.append(key.substring(idx, (idx+64)<len?(idx+64):len)+"\n");
        pem.append(footer);
        String privateKeyStr = pem.toString();
        System.out.println(privateKeyStr);
        com.jcraft.jsch.KeyPair.load(null, privateKeyStr.getBytes(), null);
    } catch (JSchException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
} 
```

System.out 的输出：

```
-----BEGIN RSA PRIVATE KEY-----
MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCABIDFa/cp23OH
PZwpnBme3mvVun8ErtTpMtjCHBKbFyiVKI84e1sZt6BosIiXVbhJ3wsG+tmcJAVK
+rVRqSHUjPh9lHSI+4QQNvWIQC+v6zPyLKVRo47VK6dKTIZrsfA/A/+3hk/GrNx8
gbx9yENZ6WLg7GQ0mUwdV+kDwudll5sXjL7PHMIkVuxDOFv1cXXYmPuCtnFKvn/X
5XnD6fV8IOgLbwXTNzUxLdfnBn90PFYbRRUJVwIXzqSVJb3EXsEL6WAl2KdQ2BPS
UEv7jEw2Ja+fztUZUjqxWcrckq3rKUeHn3ykhTlq0+Iqg5sbgqz2zYt+6Zq4w42E
XrCqGlmVAgMBAAECggEAYLcGMiBnEpBgr4O0PxtXn9aZ0VacL4WGBMgNSli7FcBh
QI7r5NgM81jvLyhviSWRnP2M7zEExhnQhdzyr0b/7/ywnu9RO0wJcdaTmOQlItqm
3Acuvoa6mgHo2REHXMWJo5H510T5cDeYO9gn9z8c4wiXUyZEbhiCkIih2d2dw/mv
SBwfwOQN/3JXNBlW5c012usG6MLKvbOAYhqLfzq89ZqKJnrRW58Y6m+qb91fx5tt
DKrqVEXPBLcC0faXK+iMINGIbXqv8l1hd69f/SzSveI49yMgJBPCS5mtckcJqCm7
oxMafu3zGhaR7TYUM6CaqP3Sk2nLv6Sy9vNsFt4eAQKBgQD1TM/2nMV2HhVOl6Gm
hqCSGCxb6M+bv92tlkvuijpU0Bx5JjHTQ/dk8+0L0h/x+jPMo1+yrYyXNmE4kzyY
2s4jcDcBch5d8bSKksPv29sKYkMhEv0O31fcGVFhOyHvBm92EtA+l2vDVn0WSo7r
SAjsD3QSAdEr/pOqrUjInJfvMQKBgQCFmgjkVuMHgg5fjM+xQnPtLpJBRbe+gBdj
09jCj5D0mN5WpqvjO2cV40i2vYqaWz3/BgWcmlT4Crf2MtYxmR0rWsSQQsnk34EU
vej5kmkT8Pq4HRMskH2f/kNu55yHjY4TvMn13Gl9UWIb+g5oYdMbpb6B9jol9gm8
Op1wiopfpQKBgAbTvHYApv5CmBU34yffV1i5k4J7WEvday4JoNNixXzWzfQRPBHF
Mn18zHwnvPvfGtH3OhKfAeqzeME6V9VpQZN67Az+QBodQAkbTJjAZbhEQ9oHzUM8
tBVMHxe1rZwZccC3hVQ4oqctIQ4dxRyHRLhNNc3KfyfaTgHSENSEhzYBAoGAS4j8
MAVD1JHeiH03S9PzcQzcmdTN/wGyt7klm1LKNNBdHIadNhr2vHRFPzRIsd6WXaJM
9+51zctZmPPDEEWuLT3jVmC8fw8yjsSUfM4fZKvhRMkDdzW2IQgDnieK40TQKC6b
zMqyRa0GmCS3kqKEVeROonHRDHdfp7FIJEHf3BUCgYAjzIH744n31iTa/WhLXoIx
tR8rvTgdW6tn0YKGKy2RvgkABdDdjFc1oGBOSgNRopn1mL7cVtScMOenPTqKCEgO
yzVVOgE0ON1YmF/t3phOcJYIC9dy1CMHOjnG3deWxu2z3NAidF2TcAf8G/LtKOY2
t6uWCaHlDg2r/WDkbpxsgA==
-----END RSA PRIVATE KEY----- 
```

然后我看到 KeyPair 的异常说它是无效的私钥，我检查了 JSch 的源代码，异常是由于在解析数据时出现**indexoutofbounds**。堆栈跟踪：

```
com.jcraft.jsch.JSchException: invalid privatekey: [B@5f2e5f2e
    at com.jcraft.jsch.KeyPair.load(KeyPair.java:809)
    at com.ibm.maestro.common.utils.Test.main(Test.java:149) 
```

我猜我可以通过在生成密钥对时添加/更改一些参数来解决这个问题，有什么线索吗？您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:17:39.537

当您调用`PrivateKey.getEncoded()`.

您可以使用 BouncyCastle 为您提供所需格式的密钥：

```
import java.io.StringWriter;
import java.security.KeyPairGenerator;
import java.security.PrivateKey;
import java.security.SecureRandom;

import org.bouncycastle.openssl.PEMWriter;

public class JSCH {

  public static void main(String[] args) throws Exception {
    KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA");
    keyPairGenerator.initialize(2048, new SecureRandom());
    PrivateKey privateKey = keyPairGenerator.genKeyPair().getPrivate();

    StringWriter writer = new StringWriter();

    try (PEMWriter pemWriter = new PEMWriter(writer)) {
      pemWriter.writeObject(privateKey);
    }

    String privateKeyStr = writer.toString();
    System.out.println(privateKeyStr);
    com.jcraft.jsch.KeyPair
        .load(null, privateKeyStr.getBytes("US-ASCII"), null);
  }
} 
```

可能有一种更优雅的方法可以将编码的密钥作为字节字符串获取。把它写成 string 和 call 感觉很难`getBytes()`看，但也许你可以研究一下。

示例输出：

```
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEA3r29olF+Kul+aHsB28i9x8RiH6OEgIDoqcN4Ph0+bCYBi9lk
E/TVtLXxNxXvvcsK5DyQLZAWj/W0QmvmItndkzcWFojIoS3XT7kFPeC49hPe6g/W
ihM7eS5W3wTzAoljimyMjFUkw9ahShRrL+Dl6ZeqMW5bTwUXgcIFSKNw4iFQJFFO
5G8a1ObAV5iNA1ve5IFntKjCc5WIA4byilBCLcoXCeQNSPwyGVc1Okz22FTAQFzk
9eQthuF3AIAhHcDgf1yxx6RTTMMMSWzIva6xZvTHCKov3CwTLioH1Ri72UT9GAoq
O4hS/CL4Q4m09X6KGicXR86CpQ8TiXD4A+HwkQIDAQABAoIBAQCLYmrvz1VHnzPm
R8ti8NypzN+mctnw3Do8OcDeBcjRPntLO2+f+V9eJVjcItMSjqOzLZ7/lCI6VgRG
aGTsPC+m9xrQYSpDin8pOVvpW94Cx26ARAb6Aoz+CRx9lQhI9xaeQc015/YIwx/N
TrfAj1jwc2Miaa+j5EjQf0x1Jyn1pr41vgC5z2zD+FyNfVOu7Q4rmiEIi3B+QHWg
33YhtJrP2nWEmka6pn0NiYlS3IZRA6tL7DUC62iTfs7vs5M6OCsg9w7Vfq5YGwr3
cm9n+VencsupB4A6b13XZPWhyaImGO7+5TQy4xX9/mT99GoC6L73RX5O4Ehhg++m
NpB8Bt5tAoGBAO+rR0dleFeH4aHtMeLlatjZhSIWcRzXqW/bkeaq4SrhF7h4GC9J
Spih1fjWMznrfcsHxgJyYtZ3OBPMp7DhUZR9WbeqOwpD5Qd0Kr3LovKiX6HTeNKQ
QyPvca0n3z6a72XGqbKonoXhUJ2OKv8pl7nVaBxO9r/YloTLZ5SOMpmHAoGBAO3r
LU6zxBdUzaJ28tuNx2TCJJyLCDSrnZFgyTA+xexk1wpJXOJxmCVBTl5tajYwhjTc
9OMOVGr8qgcblcDOSCy4khZrgStHfjzZBQA8zesR/vNO+nzGxzfzIMSNey7OKtAB
LoKMEe1O1FuxTCiQZveekzZlT3EKDgU809UDvksnAoGANGXF154fiUNz2Or6lRiD
G5WyvZkacavUp1fhtgR15eIARZw77VqgrG31UcnCuU762YCBkddgNHMsF2gO4WTh
aQ1eqADXl47wa4jCL2xt244USlTpfV98zkZzG+AztoQ5Ao9EWoLy5WI1Nbz3OYHm
YgJ+GHJLD/ZSMgYmRxwvg9ECgYBVDs0l4/Lo/HJ/8NKmV6u/hAEezj3ixrAQd2+2
BdswxmRy0wOYGVBxkUV5UNi2AucYIx6Rxl+72BTZca06PwVip6HizhBh7q9dBaFa
EmLz9X0Wc1fuIAq9H/jJDGPLuf1oW+PK3FTUaGhXV62ImweU42Zx/gpGuXeFu9dn
wmzX5QKBgHgbQHqcf36bvwE/zr9jLCOPSkVZpFPYNt6/uUT/Vb4vDPME2/wk1SoU
wV2I3Vj9bLsnkpsP6fOsX3QqGFwlnnpboF/IS9rObTkDZXsKfLJhT5x6xA6USnWC
ZPY8jO4b1RXf3v1mHpkx21dKmY2YvNetzp6OaK8DzPwFM8KUh5GG
-----END RSA PRIVATE KEY----- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T12:01:37.493

您可以使用 PEMWriter 将您的私钥转换为 JSch 接受的 PEM 格式

以下示例转换从 KeyStore (JKS) 返回的密钥

```
Key privateKey = KeyStore.getKey(privateKeyAlias, keyStorePassword);//get key from JKS
StringWriter stringWriter = new StringWriter();
PEMWriter pemWriter = new PEMWriter(stringWriter);
pemWriter.writeObject(privateKey);
pemWriter.close();

byte[] privateKeyPEM = stringWriter.toString().getBytes(); 
```

# regex - 正则表达式的 Perl 文件处理优化

> ID：14276247
> 
> 赞同：0
> 
> 时间：2013-01-11T10:33:45.693
> 
> 标签：regex, perl

我正在阅读超过百万行的百万文件。

但已尝试对某些字符串使用常规表达式替换它们。

我的字符串是（“tiger”，“lion”，“monkey”）并用字符串“animal”替换它们；

我已经使用正则表达式替换

```
$line =~ s/tiger/animal/g;
$line =~ s/lion/animal/g;
$line =~ s/monkey/animal/g; 
```

处理时，执行过程中需要很多时间。

在这里，我想了解为什么这很慢以及如何以更快的方式解决此问题？

我无法使用任何外部模块来解决此问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T10:47:20.420

使用正则表达式的“预编译形式”：

```
my $regex = qr/\b(?:tiger|lion|monkey)\b/;

# in your loop:
$line ~= s/$regex/animal/g; 
```

注意：正则表达式已简化为一个，并且使用了非捕获组`(?:...)`，因为捕获的文本没有用处。此外，还添加了单词锚点（例如，这意味着`monkey`将匹配但不匹配`greasemonkey`）。如果您还想替换复数，请`s?`在最后一个之前添加。`\b`

但是，这仅关注正则表达式部分：您还谈论其他类型的处理，也许整个过程可以以某种方式进行更改，以便最终更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:54:16.480

您也可以这样做而不是 3 个部分。

```
$line=~s/(tiger|monkey|lion)/animal/g; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:35:52.383

我不清楚“大约超过百万行的百万文件”是什么意思，但是假设您有一百万个文件，每个文件都有一百万行，例如每个 40 个字符。这涉及到 40TB 的信息。

如果数据在硬盘上，以 50MB/s 的速度读取，则读取该数据量需要 40E12/50E6 = 800,000 秒，即仅超过 9 天。

如果您的程序在几个小时内完成，那么您应该非常感激！

# java - ResultSet getFetchSize() 似乎不起作用？

> ID：14276249
> 
> 赞同：7
> 
> 时间：2013-01-11T10:33:51.373
> 
> 标签：java, sql, jdbc

我的`getFetchSize()`功能有问题。

我只需要知道 SQL 查询是否返回零行。

我试过这个简单的说法：

```
if (rs.getFetchSize()==0)
    System.out.println("HEADLINE"); 
```

where`rs`是`ResultSet`类型。上面的代码似乎不起作用。它总是打印消息是否`rs`为空。

我检查了 SQL 查询本身，当存在行时它正确返回了非空结果。

关于如何确定查询是否返回 0 行的任何想法？我用谷歌搜索并找不到任何答案。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-11T10:34:59.430

[ResultSet.getFetchSize()](https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html)不返回结果数！从[这里](http://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#i1023619)：

> 标准 JDBC 还允许您指定查询的每个数据库往返获取的行数，这个数字称为获取大小

您可以遍历结果集，如果没有任何条目，则可以确定没有结果。为什么你不能立即得到结果大小？因为数据库正在向您返回一个指向其结果的指针，并且它依赖于您对其进行迭代（每行返回服务器）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T10:37:54.890

提取大小是每次往返中应从数据库中检索的行数。它与返回的行数无关。

你应该做的是调用 rs.next() - 如果你的查询没有返回任何行，它将返回 false。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-02T23:01:28.597

实际上，我认为另一种方法可以做你正在寻找的事情是这样的：

```
Class.forName("org.exempleDatabase.Driver");
Connection  conn = DriverManager.getConnection("jdbc:exempleDatabase:/../smartytwiti", "username", "password");
ResultSet resset = conn.createStatement().executeQuery("select count(*) from yourTable;");
resset.last();
int resnum = resset.getRow();
if(resnum<1)System.out.println("HEADLINE"); 
```

这将获取 ResultSet，移动到集合的最后一行，然后在***resnum***中给出该行的编号。***如果您要使用resset.next()***遍历结果，请记住使用***resset.beforeFirst()***向后移动。

 *希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-10T09:33:55.023

在 SQL Server 上你可以把它放到 sql 查询中：

```
COUNT(*) OVER(PARTITION BY 1) 
```

像这儿：

```
select COUNT(*) OVER(PARTITION BY 1) as NUM,ident as ID,employee as EMP from invoice where date between '2017-01-01 00:00:00.000' and '2017-01-31 00:00:00.000' 
```

然后，您会得到如下结果：

```
NUM, ID,    EMP
4,   28912, JOHN
4,   28913, JOHN
4,   28914, ADAM
4,   28915, PETER 
```

现在，在处理所有数据之前，您只能读取第一个 col 和第一个单元格以获取记录数。用于存储结果的对象数组 [invoices] 仅声明一次，同时获得渴求结果。

```
Object[][] invoices = null;
Boolean b_inv = false;
[...]
try {
        Statement stmt = db_conn.createStatement();
        boolean results = stmt.execute(sql_query);

        if (results) {
            try (ResultSet rs1 = stmt.getResultSet()) {
                Integer l = 0;

                while (rs1.next()) {
                    if (!b_inv) {
                        invoices = new Object[rs1.getInt(1)][2];
                        b_inv = true;
                    }
                    invoices[l][0] = rs1.getInt(1);
                    invoices[l][1] = rs1.getString(2);
                    l++;
                }
            }
            stmt.close();
        }
    } catch (SQLException | NumberFormatException dbsi1) {} 
```

将记录计数放在 SQL Server 端不是很好吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-16T13:35:06.790

您可以使用以下代码执行您想要的操作：

```
 Class.forName("org.exempleDatabase.Driver");

        Connection  conn = DriverManager.getConnection("jdbc:exempleDatabase:/../smartytwiti", "username", "password");

        ResultSet resset = conn.createStatement().executeQuery("select count(*) from yourTable;");

        resset.next();//set the pointer to the first row(important!)

        if(resset.getInt(1)==0)
            System.out.println("HEADLINE"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-29T03:44:32.093

如前所述，getFetchSize 没有得到结果的数量..

你可以做这样的事情。初始化一个整数并增加它..

```
 int count = 0
 while(rs.next()) {
    count++;
 } 
```*

# clojure - 在不编译 ClojureScript 的情况下运行“lein test”

> ID：14276252
> 
> 赞同：6
> 
> 时间：2013-01-11T10:34:00.527
> 
> 标签：clojure, leiningen, clojurescript

我有客户端-服务器应用程序（Clojure+ring 中的后端，前端使用 ClojureScript 完成）并且有单元测试，但仅限于后端。

每次我运行 'lein test' 时，lein 都必须编译 ClojureScript，因为在 project.clj 中设置了 ':hook [leiningen.cljsbuild]'。

我可以在没有 ClojureScript 重新编译的情况下以某种方式运行测试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:43:13.157

`cljsbuild`提供下一个钩子：

*   编译
*   测试
*   干净的
*   罐

您不能删除/停用其中一个挂钩并使用其他挂钩。我建议你完全不要使用`:hooks [leiningen.cljsbuild]`。只需声明`:aliases`执行您需要的操作：即`compile`应该同时运行`compile`and `cljsbuild once`（您可以使用`do`别名中的语句执行此操作，请参阅[示例项目](https://github.com/technomancy/leiningen/blob/master/sample.project.clj)以获取更多信息）。

# python - IronPython：无法识别双关键字？

> ID：14276256
> 
> 赞同：1
> 
> 时间：2013-01-11T10:34:17.297
> 
> 标签：python, .net, types, ironpython

在 IronPython 中，我可以这样做：

```
Console.WriteLine(int.MaxValue) 
```

其中*int*不是变量，而是 System.Int32。我回来了：

```
Max of int: 2137483647 
```

然而，如果我为*double* (System.Double) 尝试类似的东西，我会得到：

```
NameError: name 'double' is not defined. 
```

*char*（System.Char）的相似之处。怎么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:23:04.780

请参阅[Python 内置类型和 .NET 类型之间的映射](http://ironpython.net/documentation/dotnet/dotnet.html#mapping-between-python-builtin-types-and-net-types)

`int`不是关键字，它是 Python 中的内置类型，IronPython 使用`System.Int32`. 同样`float`使用`System.Double`.

`double`并且`char`不是 Python 中的内置类型。

# java - 在java中使用正则表达式提取xml标签的内容

> ID：14276257
> 
> 赞同：0
> 
> 时间：2013-01-11T10:34:16.960
> 
> 标签：java, regex

我有一个很大的字符串，其中一部分包含以下内容：

```
<df>asdffs</df><titletext xml:lang="eng" original="y">Dose intensity <inf>low</inf> in advanced cancer: Have we answered the question?</titletext><sdf>gfdgas</sdf> 
```

我需要查找标签中是否`<inf>`存在`<titletext>`标签。我正在用 Java 编写它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:41:21.013

我强烈建议使用 XML 解析器（[SAX](http://www.java2s.com/Code/Java/XML/SAXDemo.htm)，因为您的文档应该很大 - 它不会一次将所有文档加载到内存中，而是通过流式传输）并以这种方式解析它。您将避免正则表达式处理程序无法处理的各种边缘情况（因为 XML 不是*常规*的）

在上面的示例中，您可能应该维护一堆遇到的 XML 元素，并跟踪是否`<inf>`在前面`<titletext>`

# android - 在设备管理中创建一个对话框

> ID：14276263
> 
> 赞同：0
> 
> 时间：2013-01-11T10:34:55.453
> 
> 标签：android, dialog, device, alert

我在设备管理员接收器中创建对话框时遇到问题。

错误：无法添加窗口--token null 不适用于应用程序。

我只想创建一个对话框来验证存储在我的首选项中的密码，如果匹配，那么您可以禁用设备管理员复选框，否则它应该退出..

有任何想法吗

```
public static class DeviceAdminSampleReceiver extends DeviceAdminReceiver {
        void showToast(Context context, String msg) {
            //String status = context.getString(R.string.admin_receiver_status, msg);
          //  Toast.makeText(context, status, Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onEnabled(Context context, Intent intent) {

            Toast.makeText(context, "Enabled", Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onDisabled(Context context, Intent intent) {
            showMyDialog(context);
            Toast.makeText(context, "Disabled", Toast.LENGTH_SHORT).show();
        }

        public void showMyDialog(final Context context){
            AlertDialog dialog = null;
            SharedPreferences prefs= context.getSharedPreferences("MainPrefs", 0);
            final String tempPass = prefs.getString("password", "");

            LayoutInflater factory = LayoutInflater.from(context);
            final View deviceDialog = factory.inflate(R.layout.device_receiver_layout, null);
           final EditText input = (EditText) deviceDialog.findViewById(R.id.dialog_editText);
            Button done = (Button) deviceDialog.findViewById(R.id.button2);
            Button cancel = (Button) deviceDialog.findViewById(R.id.button1);

            AlertDialog.Builder builder = new AlertDialog.Builder(context);

            builder.setView(deviceDialog);
            builder.setCancelable(false);
            builder.setTitle("Ultimate SMS Password");
            //builder.show();
            dialog = builder.create();
            dialog.show();
            done.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    if(tempPass.regionMatches(0, input.getText().toString(), 0, tempPass.length()))
                    {
                        Toast.makeText(context, "Matches", Toast.LENGTH_SHORT).show();

                    }else{
                        Toast.makeText(context, "Not Matches", Toast.LENGTH_SHORT).show();
                        //finish();

                }
                }
            });

            cancel.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    Toast.makeText(context, "Exit.", Toast.LENGTH_SHORT).show();
                }
            });     
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-13T10:57:18.123

您不能在非活动上下文中显示对话框。但是，您可以设计一个透明的活动，使其看起来像对话框，并从**设备管理员**调用它，如下所示：

```
Intent intent = new Intent(context, YourActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

上面代码中声明的上下文是类内任何操作方法的属性`DeviceAdminReceiver`。为了更好地理解检查以下内容：

```
@Override
public CharSequence onDisableRequested(Context context, Intent intent) {

    Intent intentcl = new Intent(context, OperationActivity.class);
    intentcl.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intentcl);
    return super.onDisableRequested(context, intent);
} 
```

# android - XML 解析 java.lang.OutOfMemoryError: [内存耗尽]

> ID：14276265
> 
> 赞同：1
> 
> 时间：2013-01-11T10:34:57.660
> 
> 标签：android, android-layout

您好，我正在通过以下代码解析 xml

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    InputStream is = getResources().openRawResource(R.raw.bd);
    try {
        DocumentBuilder docBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = docBuilder.parse(is, null);
        doc.getDocumentElement().normalize();
        NodeList my_words = doc.getElementsByTagName("word");
        for (int i = 0; i < 100; i++) {
            System.out.println(((Element) my_words.item(i)).getAttribute("eng"));
            System.out.println(((Element) my_words.item(i)).getAttribute("guj"));
        }
        is.close();

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

但我收到如下错误...

```
 01-11 16:00:48.709: E/dalvikvm-heap(18535): Out of memory on a 176-byte allocation.
          01-11 16:00:48.709: I/dalvikvm(18535): "main" prio=5 tid=1 RUNNABLE
          01-11 16:00:48.709: I/dalvikvm(18535):   | group="main" sCount=0 dsCount=0 obj=0x40022190 self=0xd018
          01-11 16:00:48.709: I/dalvikvm(18535):   | sysTid=18535 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=-1345002400
          01-11 16:00:48.709: I/dalvikvm(18535):   at java.lang.Throwable.nativeFillInStackTrace(Native Method)
          01-11 16:00:48.709: I/dalvikvm(18535):   at java.lang.Throwable.fillInStackTrace(Throwable.java:135)
          01-11 16:00:48.709: I/dalvikvm(18535):   at java.lang.Throwable.<init>(Throwable.java:74)
          01-11 16:00:48.709: I/dalvikvm(18535):   at java.lang.Error.<init>(Error.java:38)
          01-11 16:00:48.709: I/dalvikvm(18535):   at java.lang.VirtualMachineError.<init>(VirtualMachineError.java:36)
          01-11 16:00:48.709: I/dalvikvm(18535):   at java.lang.OutOfMemoryError.<init>(OutOfMemoryError.java:34)
          01-11 16:00:48.709: I/dalvikvm(18535):   at java.util.ArrayList.add(ArrayList.java:-1)
          01-11 16:00:48.709: I/dalvikvm(18535):   at org.apache.harmony.xml.dom.ElementImpl.setAttributeNode(ElementImpl.java:329)
          01-11 16:00:48.709: I/dalvikvm(18535):   at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:355)
          01-11 16:00:48.709: I/dalvikvm(18535):   at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:360)
          01-11 16:00:48.709: I/dalvikvm(18535):   at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:133)
          01-11 16:00:48.709: I/dalvikvm(18535):   at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:132)
          01-11 16:00:48.709: I/dalvikvm(18535):   at com.example.simplexmlpullapp.MainActivity.onCreate(MainActivity.java:32)
          01-11 16:00:48.709: I/dalvikvm(18535):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
          01-11 16:00:48.709: I/dalvikvm(18535):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
          01-11 16:00:48.709: I/dalvikvm(18535):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
          01-11 16:00:48.709: I/dalvikvm(18535):   at android.app.ActivityThread.access$1500(ActivityThread.java:123)
         01-11 16:00:48.709: I/dalvikvm(18535):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
         01-11 16:00:48.709: I/dalvikvm(18535):   at android.os.Handler.dispatchMessage(Handler.java:99)
         01-11 16:00:48.709: I/dalvikvm(18535):   at android.os.Looper.loop(Looper.java:130)
         01-11 16:00:48.709: I/dalvikvm(18535):   at android.app.ActivityThread.main(ActivityThread.java:3835)
         01-11 16:00:48.709: I/dalvikvm(18535):   at java.lang.reflect.Method.invokeNative(Native Method)
         01-11 16:00:48.709: I/dalvikvm(18535):   at java.lang.reflect.Method.invoke(Method.java:507)
         01-11 16:00:48.709: I/dalvikvm(18535):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
         01-11 16:00:48.709: I/dalvikvm(18535):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
         01-11 16:00:48.709: I/dalvikvm(18535):   at dalvik.system.NativeStart.main(Native Method)
         01-11 16:00:48.729: W/dalvikvm(18535): Exception thrown (Ljava/lang/OutOfMemoryError;) while throwing internal exception (Ljava/lang/OutOfMemoryError;)
        01-11 16:00:48.729: W/dalvikvm(18535): Could not resolve class ref'ed in exception catch list (class index 349, exception Ljava/lang/OutOfMemoryError;)
        01-11 16:00:49.209: I/dalvikvm-heap(18535): Clamp target GC heap from 25.906MB to 24.000MB
        01-11 16:00:49.209: D/dalvikvm(18535): GC_CONCURRENT freed <1K, 11% free 22006K/24519K, external 3K/514K, paused 5ms+6ms
        01-11 16:00:49.509: D/dalvikvm(18535): GC_FOR_MALLOC freed 19308K, 89% free 2698K/24519K, external 3K/514K, paused 294ms
        01-11 16:00:49.509: D/AndroidRuntime(18535): Shutting down VM
        01-11 16:00:49.509: W/dalvikvm(18535): threadid=1: thread exiting with uncaught exception (group=0x40018560)
        01-11 16:00:49.509: E/AndroidRuntime(18535): FATAL EXCEPTION: main
        01-11 16:00:49.509: E/AndroidRuntime(18535): java.lang.OutOfMemoryError: [memory exhausted]
        01-11 16:00:49.509: E/AndroidRuntime(18535):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:41:21.943

Java 中的 SAX XML 解析器

SAX 代表用于 XML 解析的简单 API。这是一个基于事件的 XML 解析，它逐步解析 XML 文件，非常适合大型 XML 文件。SAX XML Parser 在遇到开始标记、元素或属性时触发事件，并相应地进行解析。推荐使用 SAX XML 解析器来解析 Java 中的大型 xml 文件，因为它不需要在 Java 中加载整个 XML 文件，它可以读取小部分的大型 XML 文件。Java 提供对 SAX 解析器的支持，您可以使用 SAX 解析器解析 Java 中的任何 xml 文件，我在这里介绍了使用 SAX 解析器读取 xml 文件的示例。在 Java 中使用 SAX Parser 的一个缺点是，与 DOM Parser 相比，使用 SAX Parser 在 Java 中读取 XML 文件需要更多代码。

DOM 和 SAX XML 解析器之间的区别 以下是 Java 中 DOM 解析器和 SAX 解析器之间的一些高级差异：

1) DOM 解析器将整个 xml 文档加载到内存中，而 SAX 仅将 XML 文件的一小部分加载到内存中。

2) DOM 解析器比 SAX 更快，因为它访问内存中的整个 XML 文档。

3) Java 中的 SAX 解析器比 DOM 解析器更适合大型 XML 文件，因为它不需要太多内存。

4) DOM 解析器适用于文档对象模型，而 SAX 是基于事件的 xml 解析器。

这就是 Java 中 SAX 和 DOM 解析器之间的区别，现在取决于您要选择哪种 XML 解析器。如果 XML 文件足够小，我建议使用 DOM 解析器而不是 SAX 解析器；如果您不知道要处理的 xml 文件的大小或它们很大，我建议使用 SAX 解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:47:07.983

基于这个[答案](https://stackoverflow.com/questions/3926367/android-best-xml-parsing-library)，我`XmlPullParser`在我的项目中使用过。它比 SAX 和 DOM 更容易使用。[您可以在 Vogella.com](http://www.vogella.com/articles/AndroidXML/article.html)上找到有关[Android 开发者网站](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)和教程的更多信息

# c++ - c++ directshow过滤器私有接口

> ID：14276273
> 
> 赞同：0
> 
> 时间：2013-01-11T10:35:18.530
> 
> 标签：c++, visual-c++, directshow, graphedit

我正在使用直接显示示例 ezrgb24 并尝试公开其私有接口。在iez.h 文件中有以下代码

```
DEFINE_GUID(IID_IIPEffect,
0xfd5010a3, 0x8ebe, 0x11ce, 0x81, 0x83, 0x00, 0xaa, 0x00, 0x57, 0x7d, 0xa1);

DECLARE_INTERFACE_(IIPEffect, IUnknown)
{
    STDMETHOD(get_IPEffect) (THIS_
                int *effectNum,         // The current effect
                REFTIME *StartTime,     // Start time of effect
                REFTIME *Length         // length of effect
             ) PURE;

    STDMETHOD(put_IPEffect) (THIS_
                int effectNum,          // Change to this effect
                REFTIME StartTime,      // Start time of effect
                REFTIME Length          // Length of effect
             ) PURE;
}; 
```

构建 dll 后，我使用 cmd 窗口注册了它。我应该如何从我们的项目中公开或使用 get_IPEffect() 或 put_IPEffect() ？

我编码如下，但它没有工作

```
DEFINE_GUID(IID_IIPEffect,
    0xfd5010a3, 0x8ebe, 0x11ce, 0x81, 0x83, 0x00, 0xaa, 0x00, 0x57, 0x7d, 0xa1);
DEFINE_GUID(CLSID_ImageEffect,
    0x8B498501, 0x1218, 0x11CF, 0xAD, 0xC4, 0x00, 0xA0, 0xD1, 0x00, 0x04, 0x1B);

IBaseFilter *pImageEffect = NULL;
chr = CoCreateInstance(CLSID_ImageEffect, NULL, CLSCTX_INPROC_SERVER, 
            IID_IBaseFilter, (void**) &pImageEffect);
chr = pGraph->AddFilter(pImageEffect, L"RGB Resizer");

IIPEffect *pEZrgb24 = NULL;
chr = pImageEffect->QueryInterface(IID_IIPEffect, (void **) &pEZrgb24); 
```

在 IIPEffect 我收到错误“'IIPEffect'：未声明的标识符”我应该如何声明它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T07:19:41.793

感谢 RomarR 和 Wimmel，我在我的项目中包含了 iez.h，它运行良好

# nosql - RavenDB 中的关系数据库删除概念

> ID：14276274
> 
> 赞同：4
> 
> 时间：2013-01-11T10:35:21.210
> 
> 标签：nosql, ravendb

我是 Raven DB 的新手，也是 No SQL DB 概念的新手。我试图摆脱 RDB 附带的一些概念。曾经的概念是，如果某个记录在某处用作外键，RDB 不会让我删除主记录。

假设我不想删除一个类别并且该类别的 ID 正在某个产品中使用，那么 RDB 不会让我删除该记录。这很有帮助，因为我不必担心意外删除记录。如何将相同的概念应用于 Raven DB？我想使用像 RDB 这样的规范化结构，因为我计划将 Raven DB 与一些 RDB 结合使用。我想以防万一，以免因尝试新概念而陷入混乱。

希望我有道理，

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:05:49.377

RavenDB中没有*外键约束*这样的概念。真的，没有*外键*。您的文档中只有一个字符串，可用于获取另一个文档。我们称之为关系，但这是一个宽松的术语。引擎盖下没有任何事情可以将这些文档链接在一起并阻止您进行删除。

在您描述的场景中，您仍然可以加载产品。但是，如果您尝试使用该产品的类别 ID 加载类别，则会得到 null。

你必须自己维护这些关系。唯一可用的助手是[Cascade Delete Bundle](http://ravendb.net/docs/server/bundles/cascade-delete) - 但您仍然必须连接每个实体以进行级联。它不会像使用基于 sql 外键的级联删除那样自动执行此操作。

# javascript - javascript 视图渲染和刷新的良好做法？

> ID：14276275
> 
> 赞同：3
> 
> 时间：2013-01-11T10:35:31.613
> 
> 标签：javascript

我正在制作一个带有连接到 RESTful API 的 javascript 前端客户端的小型单页应用程序。

它基本上是一个简单的 CRUD 应用程序。我首先获取条目的handlebars.js 模板并从JSON 填充它们。这是简单的部分。

我的问题是当我更新数据并想用新数据呈现视图时。我倾向于再次获取 JSON 数据并使用新更改重新呈现所有视图，但我认为这不是一个好习惯，原因有两个：可能可以避免到服务器的另一次往返，我必须存储变量中 UI 的状态，因此一旦重新渲染，我可以将 UI 设置回之前的状态。

更新某些数据后，在 javascript 视图中重新呈现 UI 的良好做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:01:05.713

您不需要渲染所有视图。您可以使用 jquery 更改 html 的那部分。并使用 ajax 调用更新数据库。这样你就不需要另一个 ajax 调用来再次获取整个 JSON

# ruby-on-rails-3.2 - 升级到 Rails 3.2.11 后 Capistrano 部署失败

> ID：14276278
> 
> 赞同：6
> 
> 时间：2013-01-11T10:35:39.923
> 
> 标签：ruby-on-rails-3.2, capistrano

我有用于使用 capistrano 部署的生产 Rails 3.2.3 应用程序。当我决定将 rails 升级到 3.2.11 时，我执行了以下步骤：

1.  在 Gemfile 中更改了 rails 版本
2.  运行“捆绑更新导轨”
3.  从供应商/缓存、Gemfile 和 Gemfile.lock 推送新的 gem
4.  运行“上限生产部署”

Capistrano 现在失败并出现错误：

```
 * 2013-01-11 15:58:25 executing `deploy:assets:precompile'
    triggering before callbacks for `deploy:assets:precompile'
  * 2013-01-11 15:58:25 executing `deploy:assets:update_asset_mtimes'
  * executing "[ -e /home/deploy/projects/otv/shared/assets/manifest.yml ] && cat /home/deploy/projects/otv/shared/assets/manifest.yml || echo"
    servers: ["xxx.xxx.99.51"]
    [xxx.xxx.99.51] executing command
    command finished in 28ms
  * executing "cd -- /home/deploy/projects/otv/releases/20130111095812 && export LANG=en_US.UTF-8 && /usr/local/bin/bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile && cp -- /home/deploy/projects/otv/shared/assets/manifest.yml /home/deploy/projects/otv/releases/20130111095812/assets_manifest.yml"
    servers: ["xxx.xxx.99.51"]
    [xxx.xxx.99.51] executing command
 ** [out :: xxx.xxx.99.51] cp: cannot stat ‘/home/deploy/projects/otv/shared/assets/manifest.yml’: No such file or directory
    command finished in 18773ms 
```

我尝试使用其他项目执行这些步骤，该项目以前成功地使用 capistrano 进行部署，结果相同。

我的[Gemfile 和 deploy.rb](https://gist.github.com/4509574)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:19:24.300

FWIW，我在将 Capistrano 更新到 > 2.14.0 后得到了这个：

```
*** [err :: ourapp.net] cp: cannot stat `/home/deploy/www/ourapp/shared/assets/manifest.yml'
*** [err :: ourapp.net] : No such file or directory 
```

我认为将资产符号链接到共享目录可以解决它，但我没有搞砸（必须得到这个部署），而是将上限降级回 2.13.5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:38:18.757

I had the same issue.

New versions of capistrano now have [some code](https://github.com/capistrano/capistrano/commit/23452d6390d2ff59240f71966409850a7646320f#L1R49) to handle the shared assets path symlinking. My `config/deploy.rb` had some code to handle this, and the paths were conflicting with each other. I just removed this line from it to solve the problem:

```
run "ln -nfs #{shared_path}/public/assets #{release_path}/public/assets" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:25:33.860

您是否在升级之前删除了远程服务器上的所有资产？

有时一些旧的参考资料可能会导致这种问题

干杯，杰里米

# java - 如何从“new map()”HQL 生成的列表中获取值？

> ID：14276289
> 
> 赞同：1
> 
> 时间：2013-01-11T10:36:12.290
> 
> 标签：java, hibernate, map, hql

这是我的 HQL。

```
List<Map<Long, String>> list = getSession().createQuery("select new map(id, fname) from Employee").list(); 
```

当我在控制台上打印列表变量时，我得到

```
{1=Kevin, 0=5}, {1=Louis, 0=8}, {1=Micheal, 0=15} 
```

我只想知道如何迭代上面的列表以及如何从列表中获取值。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:42:22.997

在不知道所涉及的类型的情况下，它将是这样的：

```
for (Map.Entry entry : List) {
  System.out.println(entry.getKey());
  System.out.println(entry.getValue());
} 
```

**更新**

根据新样本，答案是这样的：

```
for (Map<Long, String> map : list) {
  for (Entry<Long, String> entry : map.entrySet()) {
    System.out.println(entry.getKey());
    System.out.println(entry.getValue());
  }
} 
```

# java-me - 为 S60 第三版开发的应用程序可以在 Symbian belle 上运行吗？

> ID：14276290
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:36:14.613
> 
> 标签：java-me, symbian, qt-mobility, symbian3

我想为 Symbian 设备开发应用程序。为 S60 第 3 版和第 5 版开发的应用程序可以在 Symbian Anna 和 Belle 上运行吗？

如何开发一个应用程序来支持尽可能多的更新设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:46:47.377

是的，为第 3 版开发的应用程序适用于 Anna 和 Belle

# c# - 从面向方面编程的角度来看贫血的领域模型。还是贫血？

> ID：14276292
> 
> 赞同：0
> 
> 时间：2013-01-11T10:36:17.833
> 
> 标签：c#, oop, domain-driven-design, domain-model, aop

假设您有一个贫血的域模型 (ADM)：

```
public class Employee
{
    public Employee() 
    {
        _roles = new List<Role>();
    }

    private IList<Role> _roles;

    public Guid Id { get; set; }
    public string Name { get; set; }

    public IList<Roles> Roles { get { return _roles; } }
}

public class EmployeeManager
{
    public Employee GetByName(string name) 
    {
        Contract.Requires(name != null);

        return repositoryOfEmployeesInstance.GetByName(name);
    }

    public void AddEmployee(string name) 
    {
        Contract.Requires(name != null);

        // The unique identifier will be generated by the OR/M behind the scenes...
        repositoryOfEmployeesInstance.Add(new Employee { Name = "Matias" });
    }
} 
```

后来，在其他地方，你有这个代码：

```
Employee some = new EmployeeManager().GetByName("Matias");
some.Roles.Add("Principal"); 
```

现在，除了领域模型之外，还有一个称为的方面`DomainValidationAspect`，它在新员工将要在实现中持久化之前对其进行验证`Repository`。

整体`ValidateEmployeeAspect`可以在添加或更新时验证一个`Employee`，这是添加角色的情况。它负责加载`Employee`的域规则并对其进行验证。域规则是使用*规范模式*实现的。

最后，一切都发生在域事务中。

是的，从面向对象编程的角度来看，它似乎是一个贫乏的领域模型，但面向方面的编程呢？

## 所以问题是...

**...可能只是因为**：

*   **...在这种情况下，`Employee`使用集合接口添加角色？**
*   **`Employee`...从纯面向对象编程的角度来看，没有行为？**

### 一些单词

我的观点是，面向方面的编程确实存在在领域（或任何其他层）的主要流程中隐藏大量细节的缺点，但是对面向对象和面向方面背后的概念进行了鸟瞰方法将映射到*丰富的域模型*而不是*贫乏的域模型*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:58:14.287

想到几点（排名不分先后）：

*   在域驱动设计中，永远不允许聚合（这里是*Employee*）**处于无效状态**。它自己强制执行其不变量，因此不需要外部验证。

*   这对我来说听起来很像 CRUD。为什么要在简单的**CRUD**上强制**DDD**？

***   `EmployeeManager`除了包装存储库方法并因此只是另一层复杂性之外，还能做什么。

    *   A`repositoryOfEmployeesInstance`对我来说听起来很不自然。就像您不会调用类一样，`EmployeeClass`或者`EmployeeManagerClass`为什么要在对象后缀`Instance`?

    另外为什么要附加模式名称（这里是*Repository*）？继续打电话吧`employees`。这听起来很真实：

    `employees.GetByName(name)`

    甚至更好： `employees.Called(name)`** 

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:35:02.443

> 我的观点是，面向方面的编程确实存在在领域（或任何其他层）的主要流程中隐藏大量细节的缺点

IMO，这是在 DDD 中使用此类 AOP 方法的核心问题——它隐藏了细节。现在，对于严格的技术领域，例如日志记录，这通常是可取的。AOP 适用于此类领域，因为从某种意义上说，它是技术领域本身的一个特征——传统 OOP 组合的扩展。另一方面，DDD 针对非技术领域——业务用例。因此，DDD 的目标之一是[领域知识的提炼](http://gorodinski.com/blog/2012/12/10/placing-knowledge-on-center-stage/)尽可能将其从技术问题中解放出来。实现 OOP 的一个步骤是将数据和行为聚集在对象内部。另一个步骤是从行为的技术名称转向行为的更多业务特定名称。这使您可以捕获与行为相关的周围业务上下文，而不仅仅是技术上下文。

对 DDD 有帮助的是一组新的抽象。不是不必要的复杂层，而是创造新语义的东西。正如[Dijkstra](http://en.wikipedia.org/wiki/Edsger_W._Dijkstra)所说，抽象应该创建新的语义级别。这可以以 DSL 的形式出现，允许表达与技术问题无关的领域知识。然后，应用程序会将这个 DSL 表示的域附加到基础设施——持久性、UI、服务等。创建这样的 DSL 既具有表现力又易于“附加”是一个巨大的挑战。

要回答您的问题，是的，您的对象模型本身就是贫血的，即使它通过方面由更丰富的行为组成。但是，这仅针对您的对象模型，并且对象模型是否贫血只是难题的一部分-对象模型是一种战术模式而不是战略模式。

您的目标似乎朝着正确的方向前进——您希望提升抽象级别，使其超出 OOP 单独提供的设施。我只是认为 AOP 的缺点超过了 DDD 案例中的好处。**

# objective-c - SLRequest 给出解析错误：预期]

> ID：14276293
> 
> 赞同：1
> 
> 时间：2013-01-11T10:36:27.607
> 
> 标签：objective-c, facebook, ios6, social-framework, slrequest

我正在为 iOS6 编写 Facebook 解析器。昨天，我做了一个只有解析器的测试项目。这工作得很好。当我想在我的更大项目中实现解析器（使用完全相同的方法代码）时，会给出“解析错误：预期]”。社会和帐户的导入已设置。这是给出错误的行：

```
SLRequest *retrieveWall = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:newsFeed parameters:nil]; 
```

这是完整的方法：

```
-(void)fetchFacebookFrom:(NSString*)userID withAppKey:(NSString*)appKey
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore
                                  accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    NSDictionary *options = @{
    @"ACFacebookAppIdKey" : appKey,
    @"ACFacebookPermissionsKey" : @[@"email"],
    @"ACFacebookAudienceKey" : ACFacebookAudienceEveryone
    };

    [accountStore requestAccessToAccountsWithType:accountType
                                          options:options completion:^(BOOL granted, NSError *error) {
         if(granted)
         {
             NSArray *arrayOfAccounts = [accountStore
                                         accountsWithAccountType:accountType];

             if ([arrayOfAccounts count] > 0)
             {
                 ACAccount *facebookAccount = [arrayOfAccounts lastObject];

                 NSURL *newsFeed = [NSURL URLWithString:@"https://graph.facebook.com/12345678901/feed"];

                 SLRequest *retrieveWall = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:newsFeed parameters:nil];

                 retrieveWall.account = facebookAccount;

                 [retrieveWall performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
                  {
                      if (error)
                      {
                          NSLog(@"Error: %@", [error localizedDescription]);
                      }
                      else
                      {
                          // The output of the request is placed in the log.
                          NSDictionary *jsonResponse = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingAllowFragments error:nil];

                          NSArray *statuses = [jsonResponse objectForKey:@"data"];
                      }
                  }];

             }
         }
         else
         {
             NSLog(@"Not granted");
         }
     }];

} 
```

该错误具体指向方法调用中的“URL”。

这个愚蠢的错误已经让我发疯了 3 个小时。我重新启动了 XCode，清理了项目并重新启动了我的 Mac。谁看到错误？

编辑：似乎这个特定的代码不是问题。我也添加了核心数据，它有一些在方法名称中带有 URL 的函数。现在，方法名称中带有 URL 的每个函数都会给出解析错误并指向“URL”。越来越接近问题，但仍然不存在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:55:28.027

我们在头文件的某处定义了 URL。删除它修复了它。感谢您考虑解决方案！

# javascript - Highcharts - 放大时工具提示位置不正确

> ID：14276300
> 
> 赞同：2
> 
> 时间：2013-01-11T10:36:44.947
> 
> 标签：javascript, html, css, highcharts

好的伙计们，我想我在 Highcharts 或我的代码中发现了一个错误......无论哪种方式，我都非常感谢任何帮助！我在这里准备了 JSFiddle 上的代码：

[http://jsfiddle.net/wC3u7/4/](http://jsfiddle.net/wC3u7/4/)

为了完整起见，我也会在这里发布代码：

HTML：

`<div id="salesReport"></div>`

JS：

```
$(function () {

  var perShapeGradient = {
    x1: 0,
    y1: 0,
    x2: 1,
    y2: 0
  };

  var colors = Highcharts.getOptions().colors;

  colors = [{
    linearGradient: perShapeGradient,
    stops: [
      [0, '#2c95c2'],
      [1, '#0074a6']
    ]
  }, {
    linearGradient: perShapeGradient,
    stops: [
      [0, '#76b978'],
      [1, '#0db381']
    ]
  }];

  var weekDates = {
    "20121": "2012-01-02",
      "20122": "2012-01-09",
      "20123": "2012-01-16",
      "20124": "2012-01-23",
      "20125": "2012-01-30",
      "20126": "2012-02-06",
      "20127": "2012-02-13",
      "20128": "2012-02-20",
      "20129": "2012-02-27",
      "201210": "2012-03-05",
      "201211": "2012-03-12",
      "201212": "2012-03-19",
      "201213": "2012-03-26",
      "201214": "2012-04-02",
      "201215": "2012-04-09",
      "201216": "2012-04-16",
      "201217": "2012-04-23",
      "201218": "2012-04-30",
      "201219": "2012-05-07",
      "201220": "2012-05-14",
      "201221": "2012-05-21",
      "201222": "2012-05-28",
      "201223": "2012-06-04",
      "201224": "2012-06-11",
      "201225": "2012-06-18",
      "201226": "2012-06-25",
      "201227": "2012-07-02",
      "201228": "2012-07-09",
      "201229": "2012-07-16",
      "201230": "2012-07-23",
      "201231": "2012-07-30",
      "201232": "2012-08-06",
      "201233": "2012-08-13",
      "201234": "2012-08-20",
      "201235": "2012-08-27",
      "201236": "2012-09-03",
      "201237": "2012-09-10",
      "201238": "2012-09-17",
      "201239": "2012-09-24",
      "201240": "2012-10-01",
      "201241": "2012-10-08",
      "201242": "2012-10-15",
      "201243": "2012-10-22",
      "201244": "2012-10-29",
      "201245": "2012-11-05",
      "201246": "2012-11-12",
      "201247": "2012-11-19",
      "201248": "2012-11-26",
      "201249": "2012-12-03",
      "201250": "2012-12-10",
      "201251": "2012-12-17",
      "201252": "2012-12-24",
      "201253": "2012-12-31"
  };

  var salesChart = new Highcharts.Chart({
    chart: {
      renderTo: 'salesReport',
      zoomType: 'x',
      type: 'column'
    },
    credits: {
      enabled: false
    },
    colors: colors,
    title: {
      margin: 40,
      style: {
        fontFamily: '"Helvetica Neue", Helvetica, Arial, sans-serif'
      },
      text: 'Buyer Revenue Chart'
    },
    subtitle: {
      style: {
        fontFamily: '"Helvetica Neue", Helvetica, Arial, sans-serif',
        fontSize: '14px'
      },
      text: '<div class="chart-subtitle">' +
        '<span class="text-danger">Low <strong>23234</strong></span>' +
        '<span class="text-success">High <strong>23234</strong></span>' +
        '<span class="text-info">Average <strong>23234</strong></span>' +
        '</div>',
      useHTML: true
    },
    xAxis: {

      categories: [20121, 20122, 20123, 20124, 20125, 20126, 20127, 20128, 20129, 201210, 201211, 201212, 201213, 201214, 201215, 201216, 201217, 201218, 201219, 201220, 201221, 201222, 201223, 201224, 201225, 201226, 201227, 201228, 201229, 201230, 201231, 201232, 201233, 201234, 201235, 201236, 201237, 201238, 201239, 201240, 201241, 201242, 201243, 201244, 201245, 201246, 201247, 201248, 201249, 201250, 201251, 201252, 201253],

      title: {
        margin: 15,
        style: {
          color: 'black',
          fontFamily: '"Helvetica Neue", Helvetica, Arial, sans-serif',
          fontSize: '13px'
        },
        text: 'Week Number'
      },
      labels: {
        step: 2,
        formatter: function () {
          return this.value.toString().substring(4, 6);
        }
      }
    },
    yAxis: {
      gridLineColor: '#eee',
      min: 0,
      title: {
        margin: 15,
        style: {
          color: 'black',
          fontFamily: '"Helvetica Neue", Helvetica, Arial, sans-serif',
          fontSize: '13px'
        },
        text: focus
      },
      stackLabels: {
        enabled: false
      }
    },
    legend: {
      align: 'right',
      x: -100,
      verticalAlign: 'top',
      y: 20,
      floating: true,
      backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
      borderColor: '#eee',
      borderRadius: '3px',
      borderWidth: 1,
      shadow: false
    },
    tooltip: {
      formatter: function () {
        var chart = this.series.chart;

        var categories = chart.xAxis[0].categories;
        var date = new Date(weekDates[this.x]);
        var index = 0;
        var text = '<div><b>' + date.getDate() + date.getPrefix() + ' ' + date.getRealMonth() + ', ' + date.getFullYear() + '</b></div><br /><table class="tooltable"><tbody>';

        while (this.x !== categories[index]) {
          index++;
        }

        $.each(chart.series, function (i, series) {
          text += '<tr>' +
            '<td><b>' + series.name + ': </b></td>' +
            '<td>' + series.data[i].y + '</td>' +
            '</tr>';
        });

        text += '<tr>' +
          '<td><b>Total: </b></td>' +
          '<td>' + this.point.stackTotal + '</td>' +
          '</tr></tbody></table>';

        return text;
      },
      useHTML: true
    },
    plotOptions: {
      column: {
        dataLabels: {
          enabled: false
        },
        groupPadding: 0.1,
        pointPadding: 0,
        stacking: 'normal'
      }
    },
    series: [{
      name: 'Customer Order',
      data: [2741600.12, 3240819.76, 2777109.68, 2832506.66, 2844861.41, 2657199.98, 2507996.89, 2581876.56, 2695478.28, 2715245.81, 2733065.46, 2773672.25, 2687606.05, 2110458.68, 2725741.05, 2919983.30, 2900213.99, 2991106.30, 2607697.77, 2850981.10, 2822168.71, 2634608.38, 1949254.79, 2879637.62, 2670026.79, 2658833.86, 2797097.39, 3077176.21, 2917786.83, 2808457.90, 2641205.61, 2783867.42, 2626519.93, 2846650.78, 2616641.59, 2845208.49, 2691537.53, 2786656.16, 2780019.11, 2856012.46, 2771617.11, 2667414.66, 2693243.67, 2827067.84, 2848628.11, 3223905.16, 2979840.25, 3427409.91, 3495786.77, 4378081.79, 3555828.67, 1144316.55, 2331124.51]
    }, {
      name: 'B2b Order',
      data: [655473.07, 865458.44, 797091.52, 986566.36, 897996.55, 914141.73, 811640.52, 829083.96, 907238.36, 851204.55, 867928.10, 884580.53, 861696.87, 555044.39, 610552.84, 852144.94, 1018430.40, 968275.48, 684276.99, 883282.90, 856661.99, 758853.96, 492659.84, 787532.12, 824337.42, 1016273.86, 842751.01, 883214.33, 978982.08, 859595.15, 892508.61, 834111.07, 774825.16, 860221.95, 766293.83, 900244.12, 896646.90, 819320.00, 896513.77, 923858.67, 912036.93, 922822.48, 874728.95, 909200.43, 838450.91, 911709.43, 1018102.85, 1022509.59, 949326.62, 1209897.51, 900874.52, 135964.34, 584075.05]
    }]
  });

  Array.prototype.max = function () {
    return Math.max.apply(Math, this);
  };

  Array.prototype.min = function () {
    return Math.min.apply(Math, this);
  };

  Date.prototype.getRealMonth = function () {
    if (this.getMonth() === 0) {
      return "January";
    }

    if (this.getMonth() == 1) {
      return "February";
    }

    if (this.getMonth() == 2) {
      return "March";
    }

    if (this.getMonth() == 3) {
      return "April";
    }

    if (this.getMonth() == 4) {
      return "May";
    }

    if (this.getMonth() == 5) {
      return "June";
    }

    if (this.getMonth() == 6) {
      return "July";
    }

    if (this.getMonth() == 7) {
      return "August";
    }

    if (this.getMonth() == 8) {
      return "September";
    }

    if (this.getMonth() == 9) {
      return "October";
    }

    if (this.getMonth() == 10) {
      return "November";
    }

    if (this.getMonth() == 11) {
      return "December";
    }
  };

  Date.prototype.getPrefix = function () {
    switch (this.getDate()) {
      case 1:
      case 21:
      case 31:
        return 'st';
      case 2:
      case 22:
        return 'nd';
      case 3:
      case 23:
        return 'rd';
      default:
        return 'th';
    }
  };

}); 
```

如果您放大图表（在图表上选择一个区域），然后将鼠标悬停在任何列上，您应该能够看到我面临的问题。工具提示似乎会自行抵消，就好像它们试图显示如果你没有放大它们会在哪里。

那么，有人知道发生了什么吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:51:28.883

将 highcharts 升级到版本 3 为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:38:17.180

您可以编写自己的工具提示定位函数：

```
tooltip: {
   positioner: 
      function(boxWidth, boxHeight, point) {         
         return {x:point.plotX + 20, y:point.plotY - 20
      };         
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:20:31.487

我认为没有问题，它可能已经在最新版本的 highcharts 中修复了。

放大后是这样的： ![在此处输入图像描述](../Images/3463679f5fa0e764205b61506bae2f0d.png)

# python - 添加新用户时修改用户配置文件失败并出现“重复输入错误”

> ID：14276301
> 
> 赞同：2
> 
> 时间：2013-01-11T10:36:47.933
> 
> 标签：python, django

用户配置文件类如下所示：

```
class UserProfile(models.Model):

    user = models.OneToOneField(User)
    email_my_machines = models.BooleanField(default=True)
    email_others_machines = models.BooleanField(default=True)

    class Meta(object):
        verbose_name_plural = "Profile"

def create_user_profile(sender, instance, created, **kwargs):
    UserProfile.objects.get_or_create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

`"AUTH_PROFILE_MODULE = 'generic.UserProfile'"`在 settings.py 中添加

一切都按预期工作。

在 Django Admin 中，添加用户涉及两种形式。第一个表单具有最少的字段，例如“用户名”、“密码”、“密码确认”和“用户配置文件”类中提供的字段。当我在此表单中修改“用户配置文件”字段时，应用程序将崩溃并出现错误“（1062，“重复条目 '34' for key 'user_id'”）”。这是一个完整性错误。

我是 Django 的新手。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:57:56.033

我见过的唯一一次是同一信号被发射两次。尝试添加一个`dispatch_uid`到您的信号连接，它应该修复它：

```
post_save.connect(create_user_profile, sender=User, dispatch_uid='create_profile_user') 
```

另请参阅：[https ://docs.djangoproject.com/en/dev/topics/signals/#preventing-duplicate-signals](https://docs.djangoproject.com/en/dev/topics/signals/#preventing-duplicate-signals)

# php - 努力使用 PyroCMS 文件库上传多个文件

> ID：14276304
> 
> 赞同：1
> 
> 时间：2013-01-11T10:37:01.820
> 
> 标签：php, file-upload, pyrocms, multifile-uploader

我将其与 PyroCMS 论坛交叉发布，以向更广泛的受众寻求帮助，因为我似乎无法理解它。

当我尝试使用 PyroCMS 文件库上传多个文件时，我遇到了问题。在调用库时，我似乎可以单独上传文件，并且在绕过库并通过 move_uploaded_file 进行测试时，我也可以上传文件。我在控制器中创建了以下（略微精简）代码：

```
public function upload($id)
{
    // Folder selected or redirect
    $id or redirect('admin/mis/resources');

    // Run on validation
    if ($_FILES)
    {
        if (count($_FILES['userfile']['name'] > 0))
        {                
            foreach ($_FILES['userfile']['name'] as $file)
            {                    
                $upload = Files::upload($id, $file);
            }
        }                                  

        redirect('admin/vle/resources/contents/'.$id);            
    }

    $this->template->build('admin/resources/upload');
} 
```

但是，在运行此代码时，不会上传任何文件。如果我输出上传，我会收到以下消息：

数组 ( [状态] => [消息] =>

您没有选择要上传的文件。

我似乎一辈子都无法弄清楚如何将多个文件传递给 Files::upload。我确定我错过了一些东西。但是，这并不是说我通常无法上传文件，因为如果我将代码更改为本地以进行测试，我的文件就可以正常上传：

```
if($_FILES)
{
    if(count($_FILES['userfile']['name'])) 
    {
        foreach ($_FILES['userfile']['name'] as $file) 
        {
            $img = "c:/wamp/www/testupload/files/".$file;

            move_uploaded_file($_FILES['userfile']['tmp_name'][$i], $img);
        }
    }   
} 
```

文件库的上传方法在这里[https://github.com/pyrocms/pyrocms/blob/2.2/develop/system/cms/modules/files/libraries/Files.php#L333](https://github.com/pyrocms/pyrocms/blob/2.2/develop/system/cms/modules/files/libraries/Files.php#L333)

我已经尝试了很多不同的事情，以至于我的头现在有点旋转，试图掌握这一点。因此，如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T00:05:16.450

文件库目前不支持一个元素上传的多个文件。所以它试图从“userfile”文件输入中找到单个文件，而不是文件数组。

这应该有效：

```
<form method="post" action="/upload/1" enctype="multipart/form-data">
    <input name="userfile" type="file"/>
    <input name="secondfile" type="file"/>
</form

public function upload($folder_id)
{
    $upload = Files::upload($folder_id, 'Descriptive Name', 'userfile');
    $second_upload = Files::upload($folder_id, 'Some Name', 'secondfile');
} 
```

PyroCMS 的管理面板使用 BlueImp jQuery 上传器上传多个文件。也许像这样的 JS 解决方案对您很有效？通过这种方式，用户可以获得进度条，通知他们每次上传的状态，并且他们可以看到每次上传完成的时间。

# html - :before 伪元素不会在 IE8 (Internet Explorer 8) 中居中

> ID：14276309
> 
> 赞同：2
> 
> 时间：2013-01-11T10:37:21.840
> 
> 标签：html, css, internet-explorer-8, alignment

我创建了一个`h4`元素，该元素用`:before`伪元素插入图标字体（在**IcoMoon**生成）。`h4`元素设置为，`text-align: center;`图标设置为，`display: block;`以便它们也居中。完美的！

问题出在 IE8 中。`h4`元素居中，但插入的图标是`:before`左对齐的。我试过给 before 元素一个`text-align: center`属性，我也尝试过应用：

```
display: block;
width: 80px;
margin: 0 auto; 
```

现在我不知道下一步该尝试什么。这是图标的代码：

```
[class^="ico-fonts-"]:before, 
[class*=" ico-fonts-"]:before {
    font-family: @icoFont;
    font-style: normal;
    speak: none;
    font-weight: normal;
    line-height: 1;
} 
```

任何建议，将不胜感激！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:18:09.687

所以我找到了我自己问题的答案，就是这样：

*Internet Explorer 8*将 :before 和 :after 生成的内容**视为元素之外的内容**。

但是，所有其他浏览器（*IE7*除外）都将 :before 和 :after 伪元素生成的内容**视为元素的一部分**。

所以我只需要写：

`.ico-fonts:before { text-align: center~"\9"; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:49:19.610

Have you tried adding zoom:1 yet? Fixes a lot of IE8 CSS quirks.

# ruby - Ruby - system32 中没有这样的文件或目录

> ID：14276310
> 
> 赞同：1
> 
> 时间：2013-01-11T10:37:22.927
> 
> 标签：ruby, windows, system32

我正在尝试在 C:\Windows\System32\ 中执行一个 ruby​​ 脚本，但是当我尝试运行它时，ruby 解释器会抛出一个 LoadError。

有人遇到过这种情况吗？

![](../Images/d46deee7b7ffa2f73b5d5b1ee9725433.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:41:09.277

我不习惯 ruby​​ 但就 cmd 而言尝试`ruby rest.rb`

# hadoop - 将整个 HDFS 从一个集群转移到另一个集群

> ID：14276313
> 
> 赞同：1
> 
> 时间：2013-01-11T10:37:26.820
> 
> 标签：hadoop, hive

我在具有 5 个节点的测试集群上的 HDFS 中存储了很多配置单元表。数据应约为 70 Gb * 3（复制）。不，我想将整个设置转移到具有更多节点的不同环境。两个集群之间的网络连接是不可能的。

问题是我没有太多时间使用新集群，也没有可能使用其他测试环境测试传输。因此我需要一个可靠的计划。:)

我有什么选择？

如何在新集群上以最少的配置工作转移配置单元设置？

是否可以将 5 个节点的 hdfs 目录复制到新集群的 5 个节点，然后将其余节点添加到新集群并启动平衡器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:45:03.097

没有网络连接，这将是棘手的！

我会

1.  将文件从 HDFS 复制到某种可移动存储设备（U 盘、外置硬盘等）
2.  将存储移动到新集群
3.  将文件复制回 HDFS

请注意，这不会保留文件创建/上次访问时间等元数据，更重要的是，所有权和权限。

这个过程的小规模测试应该非常简单。

如果您可以在两个集群之间获得（甚至是暂时的）网络连接，那`distcp`将是可行的方法。它使用 map reduce 来并行传输，可能会节省大量时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:09:14.820

您可以使用 hadoop distcp 命令将目录和文件从一个集群复制到另一个集群

这是一个描述其用法的小示例

[http://souravgulati.webs.com/apps/forums/topics/show/8534378-hadoop-copy-files-from-one-hadoop-cluster-to-other-hadoop-cluster](http://souravgulati.webs.com/apps/forums/topics/show/8534378-hadoop-copy-files-from-one-hadoop-cluster-to-other-hadoop-cluster)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T05:36:44.507

您可以使用以下命令复制数据： sudo -u hdfs hadoop --config {PathtotheVpcCluster}/vpcCluster distcp hdfs://SourceIP:8020/user/hdfs/WholeData hdfs://DestinationIP:8020/user/hdfs/WholeData

# html - 绝对元素的百分比值是指浏览器的宽度和高度？

> ID：14276317
> 
> 赞同：3
> 
> 时间：2013-01-11T10:37:49.837
> 
> 标签：html, css

据我所知，当使用 css 百分比作为相对元素的属性值时，该元素会检查其父元素的值并根据该父元素大小调整大小。

绝对元素的场景是什么？我正在查看一个css文件，我发现了这个：

```
html {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow-x: hidden;
} 
```

可以在绝对元素上使用百分比来获取其浏览器宽度和高度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:03:26.300

当一个元素有`position:absolute`时，`width`和`height`百分比是根据整个浏览器尺寸计算的。

见下面的代码：

```
<html>
    <head>
        <style>
            #a {
                position: absolute;
                width:50%;
            }
        </style>

    </head>
    <body onload="alert(document.getElementById('a').offsetWidth);">
        <div style="width:200px;">
            <div id="a">Hello</div>
        </div>
    </body>
</html> 
```

即使父 div 的宽度仅为`200px`，该元素显示浏览器宽度的一半。

一旦我将其更改为`position:relative;`，警报就会说`100`。

# syntax - .MSF 的语法和设计模式

> ID：14276321
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:38:05.600
> 
> 标签：syntax, cobol, file-type, mainframe

目前我必须处理.MSF文件，但在谷歌挖掘后我不知道该类型文件我发现它在大型机中使用可能是为了消息请建议我正确的链接以了解有关语法和模式的知识类型文件。快速帮助将不胜感激。

**注意：**实际上我想解析该文件并希望在表中包含所需的信息，所以我需要猜测哪些信息是特别需要完整的以及在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:41:13.270

MFS 代表消息格式化服务（或服务）。它是 IBM 的[IMS](http://en.wikipedia.org/wiki/Information_Management_System)分层数据库的一个组件。它曾经被称为IMS DC。

这份 300 页的[IMS Primer](http://www.redbooks.ibm.com/redbooks/pdfs/sg245352.pdf)应该可以帮助您开始了解 IMS。

# sql - ORACLE SQL 查询表使用来自其他表的条件

> ID：14276323
> 
> 赞同：0
> 
> 时间：2013-01-11T10:38:25.410
> 
> 标签：sql, string, oracle

TABLEA 包含数据，而 TABLEB 包含搜索条件

这是一个[包含数据的 SQL Fiddle](http://www.sqlfiddle.com/#!2/a00b8/1)

1.  **表**

    ```
    TABLEA
    visited_states_time
    AL= Alabama,2, AK=Alaska,5
    AR=Arkansas,6
    AZ=Arizona,10
    CA=California, 10,CT=Connecticut,20

    TABLEB
    CRITERIA
    AL
    HI
    CA
    CT
    AK 
    ```

2.  **期望的结果**

    ```
    visited_states ...................................     total_time_spent
    AL= Alabama, AK=Alaska ............................     7
    CA=California, CT=Connecticut...................        30 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:29:27.450

这是一个糟糕的数据模型。你也没有说条件`tableb`。如果有任何状态匹配，或者如果全部匹配？

因为我们需要将行拆分（到 sum()）然后重新组合它们，您可以使用：

```
SQL> with v as (select rownum r,
  2                    ','||visited_states_time||',' visited_states_time,
  3                    length(
  4                      regexp_replace(visited_states_time, '[^,]', '')
  5                    )+1 fields
  6               from tablea)
  7  select trim(both ',' from visited_states_time) visited_states_time,
  8         sum(total_time_spent) total_time_spent
  9    from (select *
 10            from v
 11                 model
 12                 partition by (r)
 13                 dimension by (0 as f)
 14                 measures (visited_states_time, cast('' as varchar2(2)) state,
 15                           0 as total_time_spent, fields)
 16                 rules (
 17                   state[for f from 0 to fields[0]-1  increment 2]
 18                     = trim(
 19                        substr(visited_states_time[0],
 20                               instr(visited_states_time[0], ',', 1, cv(f)+1)+1,
 21                               instr(visited_states_time[0], '=', 1, (cv(f)/2)+1)
 22                               - instr(visited_states_time[0], ',', 1,  cv(f)+1)-1
 23                              )),
 24                   visited_states_time[any]= visited_states_time[0],
 25                   total_time_spent[any]
 26                      = substr(visited_states_time[0],
 27                               instr(visited_states_time[0], ',', 1, (cv(f)+2))+1,
 28                               instr(visited_states_time[0], ',', 1,  (cv(f)+3))
 29                               - instr(visited_states_time[0], ',', 1,  (cv(f)+2))-1
 30                             )
 31                 ))
 32   where state in (select criteria from tableb)
 33   group by visited_states_time;

VISITED_STATES_TIME                   TOTAL_TIME_SPENT
------------------------------------- ----------------
CA=California, 10,CT=Connecticut,20                 30
AL=Alabama,2, AK=Alaska,5                            7 
```

但说真的，重写该数据模型以将它们分开存储。

# java - 贝宝自动充值

> ID：14276326
> 
> 赞同：1
> 
> 时间：2013-01-11T10:38:33.907
> 
> 标签：java, javascript, jsp, paypal, payment

我想实施一个系统，如果我的客户在网站上的余额少于 10，则需要使用 pay pal 自动充值。我看看贝宝经常性。那不是我想要的。[自动向 PayPal 账户收费？](https://stackoverflow.com/questions/2398641/automatically-charge-paypal)在这里，您可以看到与上一个问题相关的问题。但这并不完全符合我的要求。

如果我实施 payal express check out 它是否像**自动充值**一样工作。因为我没有找到相关资料

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:16:48.363

您可以将 Reference Transactions 与 Express Checkout 一起使用，在这种情况下，您将发送上一笔交易的交易 ID 以及您希望在[DoReferenceTransaction](https://www.x.com/developers/paypal/documentation-tools/api/doreferencetransaction-api-operation-nvp)中收取的新金额。为此，您需要在您的 PayPal 账户上获得批准并启用参考交易，以便与 EC 一起使用。

或者，您可以使用[Adaptive Payments](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)平台，该平台包括[Preapproval](https://www.x.com/developers/paypal/documentation-tools/api/preapproval-api-operation)配置文件，允许您使用在他们设置您的应用程序时生成的 preapproval 密钥随时向人们收费。我链接到的 Adaptive Payments 文档的第 8 章对此进行了深入介绍，并且在该文档的其他各个地方也对此进行了介绍。

# c#-4.0 - 如何使用 nettcpbinding 将参数传递给 pub/sub 上的函数

> ID：14276327
> 
> 赞同：1
> 
> 时间：2013-01-11T10:38:35.183
> 
> 标签：c#-4.0, wcf-binding, publish-subscribe, nettcpbinding

我是 nettcpbinding 回调函数的新手，

我有一个场景，我需要根据参数 pass ex 获取结果。messageId 并获取发布者根据 messageId 发布到订阅客户端时的结果数据。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:57:39.683

您可以使用`KnownType`属性执行此操作。

您的结果类必须继承自一个基类，该基类装饰有所有可能的派生类：

```
[KnownType( typeof( ResultClassOne ) )]
[KnownType( typeof( ResultClassTwo ) )]
class ResultBase
{
  public int MessageId { get; set; }
}

class ResultClassOne : ResultBase
{
  ... other properties
}

class ResultClassTwo : ResultBase
{
  ... other properties
} 
```

这将允许正确序列化所有派生类。

然后在你的合约接口中使用基类：

```
ResultBase Method( int messageId ) 
```

在实现中，传回正确派生类的实例：

```
public ResultBase Method( int messageId )
{
  if ( messageId == 1 ) return new ResultClassOne();
  ... 
```

# android - 双卡手机短信管理器？

> ID：14276328
> 
> 赞同：22
> 
> 时间：2013-01-11T10:38:40.730
> 
> 标签：android

我正在使用 SMS Manager 在 android 中发送短信。我使用的代码如下：

```
private void sendSms(String Phnno, String Message) {
    if (Utils.checkSIM(MyActivity.this)) {
        SmsManager smsManager = SmsManager.getDefault();
        smsManager.sendTextMessage(Phnno, null, Message, null, null);
        Utils.showMessage(MyActivity.this,"","Thank You for your interest,please check your inbox for the results.");

    } else {
        showErrorMessage(MyActivity.this, "SIM Error!",
                "Please insert SIM");
    }

} 
```

这段代码在单卡手机上非常适合我，但是当我在双卡手机中检查时，我收到了以下警告，并且从不发送短信。

```
01-11 15:56:13.664: W/sendTextMessage(6656): use single sim interface to sendTextMessage by double sim interface 
```

请建议我如何在我的双卡手机上实现它。在此先感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-08T10:45:38.007

这将适用于这两种情况。如果用户已经选择了默认的 sim 卡，它将自动接受并转到下一个过程，否则在单击发送按钮时，它会要求确认选择任何 sim 卡发送短信。我们已经测试了它的工作正常。

**示例源代码：**

```
try 
{    
     Intent sendIntent = new Intent(Intent.ACTION_VIEW);
     sendIntent.putExtra("sms_body","Body");
     sendIntent.putExtra("address", "PhoneNumber");
     sendIntent.setType("vnd.android-dir/mms-sms");
     startActivity(sendIntent);
} 
catch (Exception e) 
{
     Toast.makeText(getApplicationContext(),"SMS faild, please try again later!",Toast.LENGTH_SHORT).show();
     e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-15T09:15:52.720

`sendTextMessage()`有`scAddress`参数。这用于定义 SMS 中心地址。我认为如果您设置正确，您将能够发送消息。

您可以按照本教程找到号码：http: [//algorithmic-indian.blogspot.hu/2011/03/how-to-change-message-center-number-in.html](http://algorithmic-indian.blogspot.hu/2011/03/how-to-change-message-center-number-in.html) 您也可以试试这个[如何获取android中手机的smsc号码？](https://stackoverflow.com/questions/4446312/how-to-get-the-smsc-number-of-a-phone-in-android)显然似乎没有办法以编程方式获取号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T23:08:37.907

试试这个代码选择sim，然后使用短信发送方法发送短信！

```
//above Android API 22
if (Build.VERSION.SDK_INT > 22) {
//for dual sim mobile
SubscriptionManager localSubscriptionManager = SubscriptionManager.from(this);

if (localSubscriptionManager.getActiveSubscriptionInfoCount() > 1) {
 //if there are two sims in dual sim mobile
    List localList = localSubscriptionManager.getActiveSubscriptionInfoList();
    SubscriptionInfo simInfo = (SubscriptionInfo) localList.get(0);
    SubscriptionInfo simInfo1 = (SubscriptionInfo) localList.get(1);

    final String sim1 = simInfo.getDisplayName().toString();
    final String sim2 = simInfo1.getDisplayName().toString();

}else{
 //if there is 1 sim in dual sim mobile
    TelephonyManager tManager = (TelephonyManager) getBaseContext()
            .getSystemService(Context.TELEPHONY_SERVICE);

    String sim1 = tManager.getNetworkOperatorName();

}

}else{
//below android API 22
        TelephonyManager tManager = (TelephonyManager) getBaseContext()
                .getSystemService(Context.TELEPHONY_SERVICE);

        String sim1 = tManager.getNetworkOperatorName();
} 
```

# wcf - WCF 异常 - 未提供客户端证书

> ID：14276329
> 
> 赞同：2
> 
> 时间：2013-01-11T10:38:47.290
> 
> 标签：wcf, ssl, certificate, self-hosting

WCF 异常 - 未提供客户端证书。在 ClientCredentials 中指定客户端证书。

在阅读了我能找到的关于这个主题的大部分内容并尝试了许多不同的选择之后，我发现我没有更多的头发可以拉，因此这篇文章。

我希望将 SSL 与自托管的 WCF 服务一起使用，安全模式为 TransportWithMessageCredential 和 HTTP 传输。我正在使用 2 台开发机器并通过 LAN 进行测试。

如上所述，我已经阅读并仔细遵循了几乎所有证明这一点的示例，但不知何故仍然存在证书问题。

就证书而言，我尝试了很多方法。

我所做的主要工作是遵循 [http://msdn.microsoft.com/en-us/library/ff647171.aspx中给出的内容](http://msdn.microsoft.com/en-us/library/ff647171.aspx)

[我还使用http://msdn.microsoft.com/en-us/library/ff648360.aspx](http://msdn.microsoft.com/en-us/library/ff648360.aspx)中的“如何：在从 Windows 窗体调用 WCF 中使用证书身份验证和消息安全” 作为基本指南。

我首先使用基于 Http 的 basicHttpBinding 测试了服务和客户端，以进行验证。

然后，我对 wsHttpBinding、SSL 和证书进行了更改。

当我在客户端开发 PC 上“添加服务引用”时，我收到如下错误：

*   窗口标题 -

安全警报

Visual Studio 检测到站点的安全证书存在问题。

颁发者： RootCATest 颁发者： TempCert 证书有效期从---

公司颁发的安全证书不在不信任列表中。它可能是值得信赖的。

安全证书日期有效。

主机“TempCert”的安全证书与您尝试查看的页面名称不匹配。

*   你想继续吗？-

如果我单击“是”继续并运行客户端代码，则会发生 InvalidOperationException 并显示以下消息。

“未提供客户证书。在 ClientCredentials 中指定客户端证书。”</p>

服务配置如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="ServiceBehavior">
                    <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="true" />
                    <serviceCredentials>
                        <serviceCertificate findValue="CN=TempCert" 
                                            storeLocation="LocalMachine"
                                            storeName="My" />
                    </serviceCredentials>
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <bindings>
          <wsHttpBinding>
            <binding name="wsHttpEndpointBinding">
              <security mode="TransportWithMessageCredential">
                <message clientCredentialType="Certificate" />
              </security>
            </binding>
          </wsHttpBinding>
        </bindings>      
        <services>
            <service name="SBSWCFServiceHost.Operations" 
                     behaviorConfiguration="ServiceBehavior">
                <endpoint name="wsHttpEndpoint"
                          address=""
                          binding="wsHttpBinding"
                          bindingConfiguration="wsHttpEndpointBinding"
                          contract="SBSWCFServiceHost.IOperations" >
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>                          
                <endpoint name="mexHttpEndpoint"
                          address="mex"
                          binding="mexHttpsBinding"
                          contract="IMetadataExchange" >
                </endpoint>
                <host>
                    <baseAddresses>
                        <add baseAddress="https://10.0.0.103:8003/SBSWCFServiceHost/Operations/" />
                    </baseAddresses>
                </host>
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

客户端配置如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <behaviors>
            <endpointBehaviors>
                <behavior name="EndpointBehavior">
                    <clientCredentials>
                        <clientCertificate storeLocation="LocalMachine"
                                           storeName="My"
                                           x509FindType="FindByThumbprint"
                                           findValue="e4c87a961f796be6b6cab59c3760e43ffb6e941d"/>
                    </clientCredentials>
              </behavior>
            </endpointBehaviors>
        </behaviors>      
        <bindings>
            <wsHttpBinding>
                <binding name="wsHttpEndpoint" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false"
                    transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="TransportWithMessageCredential">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Certificate" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
          <endpoint address="https://10.0.0.103:8003/SBSWCFServiceHost/Operations/"
              binding="wsHttpBinding" bindingConfiguration="wsHttpEndpoint"
              contract="SBSWCFService.IOperations" name="wsHttpEndpoint">
              <identity>
                  <dns value="localhost" />
              </identity>
          </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

以下是根据大量帖子和文档的内容对我执行的任务进行的总结。

1.  在服务器上创建了一个自签名 CA 证书（名为 RootCATest），并将其放置在本地计算机的 Trusted Root Certification Authorities Certificates 文件夹中。

2.  在服务器上创建了一个由 RootCATest 证书（名为 TempCert）签名的证书，并将其放在本地计算机的 Personal Certificates 文件夹中。

3.  导出了 TempCert 证书和私钥。

4.  将 TempCert .cer 和 .pvk 文件复制到客户端计算机，并将 TempCert 证书导入本地计算机的 Personal Certificates 文件夹。

5.  在服务器机器上执行 ICalcs.exe [private key path] /grant "NT AUTHORITY\NETWORK SERVICE":R，使用 TempCert 证书的私钥路径。

6.  在服务器机器上执行 netsh http add sslcert ipport=oooo:8003 certash=[TempCert thumbprint] appid=[{application id}]

我相信我已经接近完成这项工作。

很明显，该应用程序对 TempCert 证书不满意，但我无法解决这个问题，并且几乎被卡住了。

对于给定配置中的任何问题、我为放置正确证书而执行的步骤以及用于添加访问权限和 sslcert 条目的步骤提供任何帮助，我们将不胜感激。

非常感谢。

经过一些进一步的实验，我注意到了其他行为。

采取的步骤如下：

我删除了客户端和服务器证书，并根据 ....codeproject.com/Articles/36683/9-simple-steps-to-enable-x-509-certificates-on-wcf 重新创建了它们

我使用 netsh 添加了新的 sslcert。然后我从服务器导出客户端证书并将其导入客户端存储。

我用新的证书信息修改了服务 app.config，并启动了服务。

我修改了客户端 app.config 如下：

```
<endpointBehaviors>
  <behavior name="EndpointBehavior">
    <clientCredentials>
      <clientCertificate storeLocation="LocalMachine" storeName="My"  x509FindType="FindBySubjectName" findValue="WCFClient" />
      <serviceCertificate>
        <authentication certificateValidationMode="PeerTrust" />
      </serviceCertificate>
    </clientCredentials>
  </behavior>
</endpointBehaviors> 
```

我更新了服务参考。更新程序再次像以前一样发出安全警报。

然后我执行了客户端，并收到了这个错误：

“未提供客户端证书。在 ClientCredentials 中指定客户端证书。”

然后我在“client = new WCFService.Client();”上设置了一个断点 并检查了“客户端”实例。client.ClientCredentials.ClientCertificate.Certificate 的值 = null。

然后我在“client = new WCFService.Client();”之后的代码中添加了以下内容：

```
X509Store store = new X509Store("My", StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);
X509Certificate2Collection collection = (X509Certificate2Collection) store.Certificates;
foreach (X509Certificate2 x509 in collection)
{
if (x509.Thumbprint == "236D7D4AD95753B8F22D3781D61AACB45518E1B5")
{
    client.ClientCredentials.ClientCertificate.SetCertificate(
        x509.SubjectName.Name, store.Location, StoreName.My);
}
} 
```

执行此代码后，client.ClientCredentials.ClientCertificate.Certificate 包含证书。

然后执行“client.Open();”时 ，抛出异常，内容如下。

基础连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。根据验证程序，远程证书无效。无法为具有权限的 SSL/TLS 安全通道建立信任关系

如果任何了解这里可能发生的事情的人都可以对此有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T21:33:52.853

最后一条错误信息表明您的服务器正在向客户端请求客户端证书（服务器必须要求），并且客户端正在提供证书，但服务器无法根据可用信息确定客户端证书是否有效在服务器机器上。

由于您使用的是自签名证书（不是 CA 颁发的证书），因此您需要告诉服务器如何验证客户端证书。您可能需要在服务器的 My/LocalMachine/Trusted People 证书存储中安装客户端证书，以便 WCF 的默认证书验证可以找到它们，或者在服务器上实现您自己的自定义客户端证书验证器。（见`WebHttpBinding.Credentials.ClientCertificate.Authentication.CertificateValidationMode`和`WebHttpBinding.Credentials.ClientCertificate.Authentication.CustomCertificateValidator`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-07T14:17:48.690

我确实注意到在你的`endpoint`定义中，你没有提到`behavior`你定义的那个。看起来好像您正在通过一些代码手动执行等效操作。在配置中连接它可能更简单。

我希望您的端点看起来（更多）像这样：

```
 <endpoint address="https://10.0.0.103:8003/SBSWCFServiceHost/Operations/"
          binding="wsHttpBinding" bindingConfiguration="wsHttpEndpoint"
          contract="SBSWCFService.IOperations" name="wsHttpEndpoint"
          behaviorConfiguration="EndpointBehavior">
          <identity>
              <dns value="localhost" />
          </identity>
      </endpoint> 
```

这是解决方案，当我收到错误“未提供客户端证书。在 ClientCredentials 中指定客户端证书”时。

# meteor - 带有 CSS 过渡的 Meteor 模板

> ID：14276331
> 
> 赞同：3
> 
> 时间：2013-01-11T10:38:52.220
> 
> 标签：meteor

当通过模板助手触发 CSS 转换时，Meteor 似乎跳过了这些转换。有没有办法解决这个问题？

例子：

```
<template name="example-template">
  <div class="example {{myhelper}}"></div>
</template> 
```

然后，“myhelper”将通过模板助手分配一个触发 css 转换的类名。但是，由于某种原因，应用了该类但跳过了转换。

当模板数据源发生变化时，我认为这与 Meteor 的自动渲染冲突，但我不知道如何解决它（我想避免为此使用 jquery）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:03:02.077

Meteor 还不支持渲染新模板后的 CSS 过渡。原因是当再次渲染模板`example-template`时，新的 HTML 只是以新的类名附加到 DOM 中。由于 DOM 发生了变化，因此不会发生转换。

最好的办法是将该`rendered`事件与`loading`类名结合使用：

```
<template name="example-template">
  <div class="example loading"></div>
</template>

Template['example-template'].rendered = function() {
  // remove the loading classname here, and have that trigger a transition
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T21:37:12.400

在新的 Meteor UI 登陆后，这应该会变得更容易（参见[http://www.youtube.com/watch?v=pGQ-ax5cFnk](http://www.youtube.com/watch?v=pGQ-ax5cFnk)），但在此之前，您可以使用模板的保留指令来执行此操作：

HTML：

```
<template name="example">
  <div id="example-div" class="example {{myhelper}}"></div>
</template> 
```

JS：

```
Template.example.preserve(['#example-div']); 
```

有关更多信息，请参阅[http://docs.meteor.com/#template_preserve](http://docs.meteor.com/#template_preserve)。

# javascript - 在 HTML 表格中显示所选行/单元格的 X 和 Y 值

> ID：14276335
> 
> 赞同：1
> 
> 时间：2013-01-11T10:39:12.713
> 
> 标签：javascript, jquery, html-table

我在该表中创建了一个带有可单击单元格 (td) 的 HTML 表（类似于 Excel）

我有一个输入字段（只读）

```
<input type="text" readonly=""> 
```

我想显示用户单击此输入字段中的表格时单击的坐标。

例如，如果用户单击 X 轴对应于名称 2 和 Y 轴对应于 16 的单元格，那么我希望输入字段显示“名称 2 | 16”

它是一个参考显示，因此用户可以在杂乱的网格中看到他们被点击的内容。当您单击 Excel 中的任何单元格时，Excel 会执行此操作。

我在这里创建了一个 jsfiddle

[http://jsfiddle.net/37PGT/](http://jsfiddle.net/37PGT/)

寻求一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:42:44.287

在 中添加`id`of `cellRef`，`input`然后在您的`mouseup`处理程序中添加以下代码：

```
var row = $(this).closest('tr').index() + 1;
var cell = $(this).index();
$('#cellRef').val(row + ' | ' + cell); 
```

[**更新的小提琴**](http://jsfiddle.net/RoryMcCrossan/37PGT/2/)

要获取行的标签（以便您可以将输入格式化为`Name 1 | 1`，请使用此行设置`row`：

```
var row = $(this).closest('tr').find('td:first').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:04:25.010

好吧，我可以提出以下建议：

```
var rowIndex= jQuery.ArrayIn($(this).parent(),$('#tableID tr'));
var columnIndex=jQuery.ArrayIn($(this),$(this).parent().children('td')); 
```

您的脚本可能会忙于此类操作。*我宁愿建议您将自定义属性（例如行号和列号）存储在每个属性上**`<td>`**，这甚至可以使您的操作不仅简单，而且可以扩展以提供比选择更多的功能。*

# java - Axis WSDL2Java 为某些参数生成错误的数据类型

> ID：14276336
> 
> 赞同：0
> 
> 时间：2013-01-11T10:39:14.857
> 
> 标签：java, apache, wsdl, axis, wsdl2java

在使用 WSDL2Java 生成存根时，wsdl 文件中的字段，一个 int 类型，在存根文件中变成了短类型。

有没有人见过这个 ？？是否有任何已知的解决方法。

```
<complexType name="SsgKey">
    <complexContent>
     <extension base="tns1:ManagedEntityKey">
      <sequence>
       <element name="ssgId" nillable="true" type="xsd:string"/>
      </sequence>
     </extension>
    </complexContent>
   </complexType>
  <complexType name="Ssg">
    <complexContent>
     <extension base="tns1:ManagedEntityValue">
      <sequence>
       <element name="ssgId" nillable="true" type="xsd:string"/>
       <element name="priority" nillable="true" type="xsd:int"/>
       <element name="callProcessingElementType" nillable="true" type="xsd:short"/>
      </sequence>
     </extension>
    </complexContent>
   </complexType>
  </schema></wsdl:types> 
```

# javascript - 使用 JavaScript 检测 Android 捏缩放（除了 Hammer.js）

> ID：14276337
> 
> 赞同：0
> 
> 时间：2013-01-11T10:39:15.863
> 
> 标签：javascript, android, jquery, pinchzoom

在 IOS 中，我使用该`$(window).resize()`事件来检测缩放动作。我在安卓设备上试过了，但没有触发。

我试图通过比较来确定用户是否捏缩放`"document.documentElement.clientWidth" and "window.innerWidth"`

如果窗口大小发生变化，关于使用什么事件的任何想法？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:49:57.327

您需要绑定到`gesturechange`事件。这将允许您检测缩放比例，并相应地调整大小。

```
$(window).on('gesturechange', function(e){ 
     console.log(e) 
});. 
```

将`e`包含您需要了解的有关事件的所有信息，包括原始比例大小和当前比例大小，因此您可以调整大小并做出相应的反应。

# php - PHP preg_match 检查动态特殊字符集？

> ID：14276339
> 
> 赞同：0
> 
> 时间：2013-01-11T10:39:17.587
> 
> 标签：php, preg-match

在应用程序中，我需要对从 db 获取的动态特殊字符集进行特殊字符检查。我尝试了以下方法，但它不起作用，任何帮助将不胜感激。

```
$specialCharacters = SystemParameters::model()->findByAttributes(array('sys_param_name' => 'SPLCHR'));
// [\^Â£$%&*()}{@#~?><>,|=_+Â¬-]'"; This is the resulting value
$var = addslashes($specialCharacters->sys_param_val);

if (preg_match('/' . $var . '/', $string))
    return false;
else
    return true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:40:53.163

像[`preg_quote`](http://php.net/manual/de/function.preg-quote.php)这样引用你的特殊字符。

```
preg_match('/' . preg_quote($var, '/') . '/', $string) 
```

基于这样一个事实，您的数据库结果没有用方括号括起来，我想您希望这样的内容与字符串中的单个特殊字符匹配：

```
preg_match('/[' . preg_quote($var, '/') . ']/', $string) 
```

# objective-c - NSArrayController 在初始化时忽略 filterPredicate

> ID：14276342
> 
> 赞同：0
> 
> 时间：2013-01-11T10:39:26.510
> 
> 标签：objective-c, cocoa-bindings

菜鸟警告！我的应用程序通过 NSArrayController 全部通过绑定在标准 NSTableView 中显示数据。都很酷。

有一个 filterPredicate，“已完成的任务”，由一个复选框切换，该复选框在后台驱动 BOOL。这在应用程序运行、过滤、过滤关闭时效果很好，但是如果我在 init 或 awakeFromNib 中将 BOOL 设置为 NO，NSArrayContoller 会忽略 filterPredicate，但稍后会起作用。

我可以使用谓词将过滤后的数组传递给 AC，但猜测绑定和直接 filterPredicate 会更好。

AC 在 NIB 文件中初始化，通过查看 KVO 反馈，很早就创建了。filterPredicate 在 AppController 初始化时不存在，但在我们到达 awakeFromNIb 时存在。

有什么我想念的想法吗？

编辑：这是复选框操作调用的方法：

```
- (void)displayClosedJobs {
if (self.showClosedJobs)
{
    self.showClosedPredicate=nil;
}
else
{
    NSString *predValue=@"Closed";
    self.showClosedPredicate=[NSPredicate predicateWithFormat:@"!(DisplayName contains[c] %@)",predValue];
}
[self changeTableSortOrder];} 
```

这也在 init 和 awakeFromNib 上调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:05:44.933

您很可能直接在 init/awakeFromNib 中设置 bool 变量，如下所示：

```
_myBoolVariable = NO; 
```

但是，要发送正确的 KVO 绑定通知以通知更改，您必须做的是显式使用 setter 方法

```
[self setMyBoolVariable:NO]; 
```

或通过

```
self.myBoolVariable = NO; 
```

但是，如果没有看到您的初始化代码，就很难判断。如果这不是问题，您应该提供有关如何初始化变量以及如何设置绑定的更多详细信息。

# c# - 如何使用 Viewmodel-first 从代码隐藏设置 viewmodel 属性？

> ID：14276343
> 
> 赞同：5
> 
> 时间：2013-01-11T10:39:25.777
> 
> 标签：c#, wpf, xaml, mvvm, viewmodel

在我的 WPF (4.0) 应用程序中，我使用的是`Viewmodel-first`模式。因此，首先创建我的视图模型，然后是视图 - 使用数据模板。可以在[此处](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)找到工作演示。

现在，从创建的视图（代码隐藏）中，我需要修改视图模型的属性。在一种`View-first`方法中，我只需访问一个命名的视图模型实例。但是，该`Viewmodel-first`方法不允许这样做。有一个视图模型，但视图并不关心它是什么。

## 坏的：

当然，您可以掌握`DataContext`并使用它，但这有效地将视图和视图模型耦合在一起。

```
private void MyView_Loaded(object sender, RoutedEventArgs e)
{
    this.viewModel = DataContext as MyViewModel;
} 
```

为此必须有一个推荐的模式。命令？消息？请帮忙！

**问：如何修改（设置属性）活动视图模型？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:46:11.503

使用绑定将数据从 View 传递到 ViewModel，并使用命令来激活 ViewModel。

命令应该使用绑定来在 ViewModel 上执行命令。

消息应该用于 ViewModel 之间的通信。

.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:46:52.297

你不能那样做。否则 View 将知道 View Model。

如果此初始化在所有视图模型中通用，则您可以在其中定义属性/事件`ViewModelBase`并从此类派生所有视图模型。

> 问：如何修改（设置属性）活动视图模型？

您需要使用[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122(v=pandp.20).aspx)模式进行 View-ViewModel 通信。

您可以使用自己喜欢的[MVVM 框架](https://stackoverflow.com/questions/5069783/which-mvvm-framework-is-the-best-framework-for-wpf-apps)，以及几乎所有框架支持`EventAggregator`（或`MessageBus`或`Enterprise Bus`）。

# xcode - 单击带有“Truncate Head”换行符的非活动 NSTextField 时错误字符之间的光标

> ID：14276344
> 
> 赞同：2
> 
> 时间：2013-01-11T10:39:31.230
> 
> 标签：xcode, macos, nstextfield

我使用 Interface Builder 创建了一个 NSTextField 并将它的 Line Break 设置为 Truncate Head （因为如果它的文本太长而无法一次显示，我宁愿看到最后几个单词而不是前几个单词）。

我的问题是修改后的换行符会影响我在通过单击鼠标使 NSTextField 处于活动状态（又名 First Responder）时将光标置于特定位置的能力。在此示例中，NSTextField 未激活，我尝试将光标放在“lazy”中的“L”和“A”之间。

![点击前](../Images/5617cd4565a288a56773e8a42c0b93f4.png)

点击后，光标出现在“over”字样之前。

![点击后](../Images/ac3cc0cca751840c309791e616a592a1.png)

显然，NSTextField 忽略了修改后的换行符，并将光标定位为默认值。是否可以实现截断头部的效果，但保留通过单击将光标置于特定位置的能力？

我有记录`mouseDown`位置的想法，将其与`attributedStringValue`'s 的大小进行比较，并计算光标应该去的位置，但我很快就搞砸了。

> *原始问题： NSTextField 一直滚动到最后*
> 
> 我有以下愚蠢的问题：
> 
> 我在我的视图上放置了一个单行 NSTextField。我们的想法是它包含一个长 URL，但在我的情况下，大多数情况下结尾很有趣。
> 
> 所以我希望内容看起来像滚动到最后（所以如果它比文本字段长，开头是不可见的）。问题是我不知道如何正确设置它。我尝试了从右到左的“文本方向”选项，然后正确显示，但是一旦用户单击该字段，它就会跳回到开头，从而使用户感到困惑。
> 
> 请让我知道我错过了什么。
> 
> 谢谢！

# actionscript - 无限运行游戏的 AS3 碰撞检测

> ID：14276353
> 
> 赞同：0
> 
> 时间：2013-01-11T10:39:58.823
> 
> 标签：actionscript, collision-detection

我是 AS3 的新手，希望在碰撞检测方面得到一些帮助。我目前正在制作一个与机器人独角兽攻击概念相似的游戏（连续，“无限”，关卡）；横向滚动运行平台游戏。我找到了 0 个关于连续/循环运行风格平台游戏的教程，所以我来了！我有一个静止的玩家，平台被脚本化为移动到屏幕左侧以获得滚动/运行效果。我在舞台上有三个平台实例，但是玩家只会*对*与*其中一个*的碰撞做出反应。正在从所有平台检测到碰撞。

下面的代码用于在我的游戏循环函数中执行的碰撞​​。帮助将不胜感激！:D 谢谢。

```
 for (var i = 0; i < numChildren; i++)
        {
            if (getChildAt(i) is Platform)
            {
                var platformHolder = getChildAt(i) as Platform

                if (platformHolder.hitTestPoint(player.x + leftBumpPoint.x, player.y + leftBumpPoint.y, true))
                {
                    trace("left hit")
                    leftBumping = true;
                }

                else

                {
                    leftBumping = false
                }

                if(platformHolder.hitTestPoint(player.x + rightBumpPoint.x, player.y + rightBumpPoint.y, true))
                {
                    trace("right hit");
                    rightBumping = true;
                }
                else
                {
                    rightBumping = false;
                }

                if(platformHolder.hitTestPoint(player.x + upBumpPoint.x, player.y + upBumpPoint.y, true))
                {
                    trace("Up hit");
                    upBumping = true;
                }
                else
                {
                    upBumping = false;
                }

                if(platformHolder.hitTestPoint(player.x + downBumpPoint.x, player.y + downBumpPoint.y, true))
                {
                    trace("down hit");
                    downBumping = true;
                }
                else
                {
                    downBumping = false;
                }
                }

            }

        if(leftBumping)
        {
            if(xSpeed < 0)
            {
                xSpeed *= -0.5;
            }
        }

        if(rightBumping)
        {
            if(xSpeed > 0)
            {
                xSpeed *= -0.5;
            }
        }

        if(upBumping)
        {
            if(ySpeed < 0)
            {
                ySpeed *= -0.5;
            }
        }

        if(downBumping)
        {
            if(ySpeed > 0)
            {
                ySpeed *= -0.5;
            }
        }
        else
        {
            //if not touching the floor
            ySpeed += gravityConstant;
        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T13:54:34.367

```
If(platformholder[i].hitTestObject(player)) 
```

添加我制作循环的原因

# c# - 如何在 GridView 的 CommandArgument 中传递多个参数？

> ID：14276362
> 
> 赞同：3
> 
> 时间：2013-01-11T10:40:18.207
> 
> 标签：c#, asp.net

我正在研究 asp.net GridView 控件。现在我需要编辑一些行数据。为此，我使用了以下代码：

```
 <asp:LinkButton ID="btnEdit" Text="Edit" runat="server" CommandName="QuickEdit"  OnClick="btnEdit_Click"
  CommandArgument ='<%# ((CheckBox)(((GridViewRow) Container).Cells[4].Controls[0])).Checked %>'/> 
```

`btnEdit_Click`方法是：

```
protected void btnEdit_Click(object sender,EventArgs  e)
{
    LinkButton btn = (LinkButton)sender;
    switch (btn.CommandName)
    {
        case "QuickEdit":

        EditPanel.Visible = true;
        GridPanel.Visible = false;
        CheckBox cbRequiresState = (CheckBox)EditPanel.FindControl("checkRequiresState");

        if (btn.CommandArgument =="True")
        {
            cbRequiresState.Checked = true;
        }
        else
        {
            cbRequiresState.Checked = false;
        }

        break;
    }
} 
```

`CommandArgument`现在，我需要为该`btnEdit_Click`方法传递多个参数。为此我需要做什么？请建议我在该方法中利用这些论点的好方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T10:50:23.040

here is an example :

in your aspx code :

```
<asp:ImageButton ID="btnSelect" runat="server" ImageUrl="~/Images/btnSelect.png" CommandName="Select" CommandArgument='<%# Container.DataItemIndex +";"+Eval("ID") %>' ToolTip="select" CausesValidation="False" /></ItemTemplate> 
```

and in your code behind :

```
 string info = e.CommandArgument.ToString();
    string[] arg = new string[2];
    char[] splitter = { ';' };
    arg = info.Split(splitter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:41:24.880

您可以使用字符串并通过`;`或其他字符分隔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:47:33.797

因为`CommandArgument`是一个简单的字符串，所以将要传递给事件的参数连接起来，在其中放置某种分隔符。

然后`btnEdit_Click`按分隔符拆分值。

**注意：**选择分隔符，使其不是包含在传递给事件的任何参数中的字符。

# ruby-on-rails-3 - 带有设计的 Recaptcha 不适用于 ruby on rails？

> ID：14276374
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:41:00.433
> 
> 标签：ruby-on-rails-3, devise, recaptcha

我收到此错误：

> 应用程序出现意外错误。请联系管理员。错误代码：成功

[我正在使用带有设计的recaptcha，我按照本页](https://github.com/plataformatec/devise/wiki/How-To%3a-Use-Recaptcha-with-Devise)提到的步骤在适当的地方进行了编辑

这是我的`Gemfile`：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

gem 'json'
gem 'execjs'
gem 'therubyracer'
gem 'will_paginate', "3.0.pre4"

group :production do
  gem 'pg'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-fileupload-rails'
  gem "letter_opener"
  gem 'jquery-ui-rails'
end

gem 'jquery-rails'
gem "carrierwave"
gem "fastercsv"
gem 'devise', '2.1.2'
gem 'rmagick'
gem 'mailman', :require=> false
gem 'activeadmin'
gem 'kaminari'
gem 'prawn'
gem 'recaptcha', :require => 'recaptcha/rails' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:05:44.343

我希望您完全[按照文档中的说明](https://github.com/plataformatec/devise/wiki/How-To%3a-Use-Recaptcha-with-Devise)进行操作。例如，为了在 ruby​​ 1.8.X 和 1.9.X 上支持 recaptcha，有不同的代码行。然而，经过短暂的研究，我发现这个[网站](http://thekindofme.wordpress.com/2010/09/25/recaptcha-with-rails-3-without-plugins/)你可以在没有插件的情况下使用 recaptcha，不管你的 rails 版本是什么。我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T13:04:25.633

从 Recaptcha 站点（几乎）....我在 Rails 4 中使用 Devise（显然是硬包）..不，太容易了。程序适用于任何红宝石、任何导轨和设计（或没有设计）。在 ruby​​/rails/devise 1.9.3/3.2.x/2.2.1 & 2.0.x/4.0.x/3.2.4 中测试，最后一个没有设计。

编辑下一个文件：

宝石文件

```
gem 'ruby-recaptcha'
# bundle install 
```

config/initializers/credentials.rb （此路径中的任何文件都可以）

```
# Set constants
RCC_PUB = "your_public_key"
RCC_PRIV= "your_private_key"
# re-start server. Try to keep safety this data using ENV vars. 
```

app/views/devise/registrations/new.html.erb（或您喜欢的形式）

```
# form
<%= simple_form_for(resource, as: resource_name, :url => registration_path(resource_name) do |f| %>
    <%= f.input :email, autofocus: true, required: true %>
    ...
    <!-- Add next line -->
    <div id="captchadiv"></div>
    <%= f.button :submit, "Register", class: 'btn btn-danger' %>
<% end % 
```

在同一文件的末尾（可以在 awesome_funcs.js.erb 文件中）

```
<script type="text/javascript" charset="utf-8">
$(function () {
    function showRecaptcha() {
        Recaptcha.create("<%= RCC_PUB %>", "captchadiv", {
            theme: "white",
            lang: 'en'
        });
    };
    showRecaptcha();
});
</script> 
```

还有一个小技巧，app/controllers/application_controller.rb

```
# On top
include ReCaptcha::AppHelper
before_action :configure_permitted_parameters, if: :devise_controller?
# If already you have this method or any other with before_filter

# Into method
protected
def configure_permitted_parameters
    if controller_name == "registrations" && action_name == "create"
    # Rails 3: If you prefer, put this into registrations#create method
        unless validate_recap(params, User.new.errors) # Or your model
            # wrong input is handled here
            flash[:error] = "Text from images doesn't match with your input"
            redirect_to :back # or other stuff
            # As my submit is with Ajax, I do a render instead redirect:
            # render :json => {other: "recaptcha_failed"}
            # In success callback I evaluate response and Recaptcha.reload() paints a new recaptcha.
        end
    end
    .... 
    # trick: do everything before params sanitizers
end 
```

当我们使用 Ajax 插件时，最后，添加 app/views/layouts/application.html.erb （就在正文结束之前）

```
<body>
    ...
    ...
    <script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
</body> 
```

而已。你有recaptcha

建议：如果您使用 Ajax 进行提交，您可以使用 Recaptcha.reload() 的成功回调，以防图像和输入不匹配。

其他，如果您的表单是“remote: true”，您可以在您的views 目录中的create.js.erb 文件中的“create”方法之后使用上述行为。

重要提示：在某些项目中，当表单从链接到达时，Recaptcha 不会出现。尝试将启动器链接定位到 div 或在父 div 中添加“data-no-turbolink”。我在 Rails 4 中遇到了这个问题。

# php - 使用php查找图像地图的中心点

> ID：14276375
> 
> 赞同：0
> 
> 时间：2013-01-11T10:41:06.350
> 
> 标签：php, image, map

如何从一组 xy 坐标中找到中心点？我有许多图像地图存储在数据库中。我想找到每个的中心点，以便我可以移动图像以对应于选定的地图。下面是我拥有的坐标的一个例子。这可能吗？

谢谢

```
1638,3227,1637,3221,1648,3210,1653,3213,1657,3208,1663,3216,1668,3218,1670,3220,1668,3226,1680,3230,1681,3237,1689,3236,1690,3240,1703,3244,1703,3249,1707,3249,1710,3255,1708,3257,1713,3264,1713,3281,1727,3285,1736,3293,1733,3301,1736,3306,1731,3317,1733,3322,1719,3318,1712,3323,1704,3313,1691,3313,1688,3318,1692,3325,1683,3340,1680,3342,1677,3337,1660,3334,1656,3337,1659,3347,1648,3358,1648,3362,1656,3368,1648,3374,1640,3373,1635,3367,1638,3362,1633,3361,1631,3354,1631,3354,1620,3356,1613,3370,1610,3367,1606,3369,1606,3382,1604,3385,1604,3385,1607,3390,1602,3397,1607,3403,1603,3401,1595,3410,1583,3411,1583,3408,1586,3404,1576,3392,1579,3387,1581,3383,1586,3375,1583,3375,1580,3376,1577,3375,1577,3371,1579,3370,1580,3360,1585,3356,1592,3353,1592,3348,1596,3345,1605,3348,1608,3339,1605,3334,1607,3331,1603,3328,1599,3331,1594,3327,1585,3336,1581,3325,1569,3329,1565,3327,1568,3322,1567,3313,1565,3308,1558,3305,1559,3299,1569,3296,1571,3290,1577,3287,1581,3274,1576,3264,1584,3262,1595,3272,1598,3269,1608,3260,1612,3262,1614,3259,1624,3264,1630,3254,1621,3245,1625,3243,1629,3233,1638,3227 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:18:22.750

我认为这是一个类似的问题：[找到不规则形状多边形中心的最快方法是什么？](https://stackoverflow.com/questions/1203135/what-is-the-fastest-way-to-find-the-center-of-an-irregularly-shaped-polygon)

或者也许可以在维基百科上尝试这篇文章并自己做：[Centroid](http://en.wikipedia.org/wiki/Centroid)

# java - 寻找允许修改源的面向方面的 java (Android) 框架

> ID：14276381
> 
> 赞同：2
> 
> 时间：2013-01-11T10:41:12.247
> 
> 标签：java, android, aspect

我试图找到修改 .java 源文件而不是 .class 本身的面向方面的框架，但到目前为止没有运气？我知道这可能是一个愚蠢的想法......但我想要了解将确切代码粘贴到.class。

基本上我试图为大型 android 项目应用日志记录和其他方面。我在玩 AspectJ，但问题之一是我们已经达到方法声明限制，我不能只添加 AspectJ 以打包到 .apk 中。但是没有 AspectJ 库，我没有得到类 def 异常（原因：java.lang.NoClassDefFoundError：org.aspectj.runtime.reflect.Factory）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:16:19.733

您不太可能找到对源代码进行操作的 aspectJ 等效项。

您似乎想要的是一个源到源程序转换工具，它可以复制方面插入（或足以进行日志记录）。

实际上，转换系统需要了解 Java 实体是如何命名的，以便对命名的 Java 实体进行转换。

您必须编写应用方面的转换；由于某些 AspectJ 方面做了涉及控制流的相当复杂的事情，您可能会发现一些转换很难编写。记录相对容易。

您将运行转换工具以将方面应用到您的源代码库，生成一个方面化的源代码库。生成的代码库将被编译并交付到 Android 上下文中。转换系统本身的任何内容都不会被视为多余的包袱。作为插入方面的一部分，您可能会发现有必要插入对其他库的调用（因为 AspectJ 似乎发现需要支持库“runtime.reflect.Factory”），但至少您知道代码是什么；你会有可检查的源代码。事实上，您会知道，因为此类调用将直接在转换规则本身中可见。

在我所知道的转换工具中，只有我们的 DMS Software Reengineering Toolkit 将 Java 理解到命名级别，并处理控制流。DMS 可以应用以显式转换规则形式编码的方面。

# jquery - 获取隐藏的表单值 jquery 星级

> ID：14276382
> 
> 赞同：0
> 
> 时间：2013-01-11T10:41:13.743
> 
> 标签：jquery

我有一个关于[**jQuery Star-Rating 插件**](http://www.fyneworks.com/jquery/star-rating/)的问题。
我有一页上有很多项目要评分，所以我在每个评分表中添加了一些隐藏字段。

问题是我无法发布这些值。

这是一个例子：

```
<form method="post" id="rate" action="rate.php">
  <input name="rating" type="radio" class="auto-submit-star {split:4}" value="9.75" />
  <input name="rating" type="radio" class="auto-submit-star {split:4}" value="10.00" />
  <input type="hidden" id="post_id" value="1" />
  <input type="hidden" id="ip" value="<?php echo $_SERVER['REMOTE_ADDR']; ?>"/>
</form> 
```

该插件使用这样的回调：

```
<script type="text/javascript">
  $(function() {
    $('.auto-submit-star').rating({
      callback: function(value, link) {    
        alert("The value selected was '" + value + "'\n\nWith this callback function I can automatically submit the form with this code:\nthis.form.submit();");
      }
    });
  });
</script> 
```

单击星号时，我会收到提示消息，这一切都很好，除了我不知道如何获得`post_id`and`ip`值。
我试过了 ：

```
var values = $('#rate').serialize();
alert (values); 
```

但是它总是返回`Object Object`，看起来只有数字被发送到函数。

有没有办法同时发送其他 2 个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:10:05.893

您只需为这些输入设置名称属性：

```
<form method="post" id="rate" action="rate.php">
  <input name="rating" type="radio" class="auto-submit-star {split:4}" value="9.75" />
  <input name="rating" type="radio" class="auto-submit-star {split:4}" value="10.00" />
  <input name="postId" type="hidden" id="post_id" value="1" />
  <input name="ip" type="hidden" id="ip" value="<?php echo $_SERVER['REMOTE_ADDR']; ?>"/>
</form> 
```

# apache-flex - 弹性图表增加类别轴的标签大小

> ID：14276386
> 
> 赞同：0
> 
> 时间：2013-01-11T10:41:19.140
> 
> 标签：apache-flex, charts, axis

我正在使用具有用于显示日期的水平轴的柱形图。

问题是当有大数据点时，它会缩小 x 轴标签的大小，我不希望这种情况发生。

我正在分批显示日期，但标签仍然没有占用可用空间。标签尺寸缩小，文字难以阅读。

无论刻度数如何，我都可以增加标签大小的任何建议。

这是我的代码片段。

谢谢你。

```
 <mx:ColumnChart id = "areaChart"
                  height = "100%" 
                  width = "100%" 
                  seriesFilters="[]"                    
                  showDataTips="false"
                  type="overlaid"
                  columnWidthRatio="0.40"
                  mouseMove="showData(event)"
                  mouseSensitivity="600"
                  change="{callLater(showDefaultData)}"> 

       <mx:horizontalAxis>
            <mx:CategoryAxis categoryField = "date"
                             id = "hax"         
                             ticksBetweenLabels="true"
                             labelFunction="chartsLabel"/>
        </mx:horizontalAxis>

        <mx:horizontalAxisRenderers>
            <mx:AxisRenderer id="har" 
                             axis="{hax}"
                             textAlign="left"
                             tickPlacement="none"   
                             placement="bottom"                                                  
                             axisStroke="{Stroke}"/>

        </mx:horizontalAxisRenderers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T17:18:08.283

不幸的是，CategoryAxis 似乎没有渲染器，因此无法为其设置 canDropLabels 和 canStagger。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:05:46.773

你应该设置

`canDropLabels="true|false"`

`canStagger="true|false"`

图表轴渲染器的样式：如果文本太多，它应该知道该怎么做。

如果要强制移除缩放，还可以设置轴渲染器`scaleX`的属性。`scaleY`但是除非你做一些棘手的事情，否则你不需要它。

您还可以设置`gutters`图表和轴渲染器为绘图标签提供额外的空间，但同样，通常您不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:01:55.957

定义样式`AxisRenderer`并在您的定义中使用它：

风格：

```
<mx:Style>
    .axisStyle {
        fontSize:10;
        color:blue;
    }
</mx:Style> 
```

用法：

```
 <mx:horizontalAxisRenderers>
       <mx:AxisRenderer axis="{axisName}" styleName="axisStyle"/>
    </mx:horizontalAxisRenderers>

    <mx:horizontalAxis>
       <mx:CategoryAxis id="axisName" dataProvider="{dataProvider}" 
            categoryField="someCategory"/>
    </mx:horizontalAxis> 
```

# asp.net-mvc - MVC 管道是如何工作的？

> ID：14276397
> 
> 赞同：0
> 
> 时间：2013-01-11T10:41:59.640
> 
> 标签：asp.net-mvc

有人可以为我澄清这种情况：

1.  我们提出例如 Home\Index 的请求；
2.  在 Global asax 我们有 Application_AuthorizeRequest
3.  Application_AuthorizeRequest 抛出异常
4.  我们有 Application_Error 捕获它并返回新视图

    IController 控制器 = 新的 ErrorController(); //routedata 没问题 controller.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));

5.  执行错误的操作（没关系）

6.  但是 MVC 或 ASP 管道仍然尝试执行 Home\Index，我怎样才能让管道忘记请求？

据我了解 mvc 它是 HttpHandler，我如何确保我的错误操作是整个链中的最后一步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:52:02.933

这个设置有问题。如果要防止调用 Index 操作，则应编写自定义 Authorize 属性而不是使用`Authenticate_Request`事件：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        // perform the logic you were doing in your Authenticate_Request
        // here to authorize the user. You could throw exceptions as well
        throw new Exception("ok");
    }
} 
```

授权过滤器替换了`Authenticate_Request`ASP.NET MVC 应用程序中的方法，这就是您应该使用的。

然后使用此属性装饰您的 Index 操作：

```
public class HomeController: Controller
{
    [MyAuthorize]
    public ActionResult Index()
    {
        ...    
    }
} 
```

现在您的 Application_Error 将被调用，错误控制器被执行并且 Index 操作从未​​触发，正如它应该的那样。

# windows - 如何使用公共 IP 在 Internet 上共享文件或文件夹？

> ID：14276401
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:42:11.700
> 
> 标签：windows

我的老板只是要求我创建 1 个可以通过 Internet 连接从任何地方访问的共享文件夹（同样询问本地共享文件夹，我们不会使用 FTP 服务器）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T10:45:40.680

你不能没有 FTP/WEB 服务器。

# java - p:selectOneMenu 值设置为 null，当在 p:inplace 在刷新的选项卡视图中时

> ID：14276409
> 
> 赞同：3
> 
> 时间：2013-01-11T10:42:36.567
> 
> 标签：java, jsf, primefaces

我正在使用`p:tabView`将可编辑数据拆分为多个部分。所有编辑元素都位于`p:inplace`组件内。问题特别在于`p:selectOneMenu`组件。

刷新整个选项卡视图时，`p:selectOneMenu` 其他选项卡上处于活动状态的 的值设置为 null。我不知道为什么。这是一个错误，还是对**PrimeFaces**组件的错误使用？

环境：

*   PrimeFaces 3.4
*   我的面孔 2.0.7
*   IBM WebSphere 7.0

重现错误的方法：

*   制作一个包含多个选项卡的 tabView
*   将 selectOneMenu 放在一个选项卡中
*   制作将更新 tabView 的按钮
*   选择 selectOneMenu 的值，更改选项卡，单击刷新并使用 selectOneMenu 返回选项卡

示例页面和 bean 的代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:p="http://primefaces.org/ui">
<h:head>
   <f:facet name="first">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   </f:facet>
   <title>QMWPSUI</title>
   <h:outputScript library="qm" name="qmutils.js" />
   <h:outputScript library="qmwpsui" name="process.js" />
</h:head>
<h:body>

<h:form id="main">
   <p:blockUI block="main" trigger="refreshButton" widgetVar="block">
   <p:graphicImage
            value="#{resource['primefaces-qmui:images/waitprogress.gif']}" />
   </p:blockUI> 

   <h3>Test</h3>

      <p:commandButton id="refreshButton" widgetVar="refreshButton"
               action="#{test.refresh}" 
               icon="ui-icon-refresh"   title="#{i18n['action.reload']}"
               onclick="block.show()"
               update="tabView"/>

      <p:tabView id="tabView" orientation="top" dynamic="TRUE">
         <p:tab id="tab1" title="Tab 1" process="@this">
            <h:outputLabel value="Type*:" for="type"/>
            <p:inplace emptyLabel="Click here to change">
               <p:selectOneMenu id="typ" value="#{test.type}" effect="fade"
                  style="width:300px">
                  <f:selectItem itemLabel="" itemValue="" />
                  <f:selectItem itemLabel="Type a" itemValue="a" />
                  <f:selectItem itemLabel="Type b" itemValue="b" />
                  <f:selectItem itemLabel="Type c" itemValue="c" />
               </p:selectOneMenu>
            </p:inplace>
         </p:tab>
         <p:tab id="tab2" title="Tab 2" process="@this">
         </p:tab>
         <p:tab id="tab3" title="Tab 3" process="@this">
         </p:tab>
      </p:tabView>      

</h:form>

</h:body> 
```

豆类：

```
import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean(name = "test")
@ViewScoped
public class TestBean implements Serializable {

   private static final long serialVersionUID = 1L;

   private static final Logger log = LoggerFactory.getLogger(TestBean.class);
   private String type;

   public String getType() {
      return type;
   }

   public void setType(String type) {
      this.type = type;
   }

   @Override
   public String toString() {
      StringBuilder builder = new StringBuilder();
      builder.append("TestBean [");
      if (type != null) {
         builder.append("type=");
         builder.append(type);
      }
      builder.append("]");
      return builder.toString();
   }

   public void refresh() {
      log.info("Refresh");
      log.info("Test = <{}>", this);
   }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-03T22:24:38.753

你需要一个转换器来处理这种情况

公共类 EmptyToNullConverter 实现 Converter {

```
@Override
public Object getAsObject(FacesContext facesContext, UIComponent component,
        String value) {
    Object retorno = value;
    if (value == null || value.isEmpty()) {
        if (component instanceof EditableValueHolder) {
            ((EditableValueHolder) component).setSubmittedValue(null);
        }
        retorno = null;
    }
    return retorno;
}

@Override
public String getAsString(FacesContext facesContext, UIComponent component,
        Object value) {
    return (value == null) ? null : value.toString();
} 
```

}

并在您的 faces-config.xml 中定义

```
<converter>
    <converter-for-class>java.lang.String</converter-for-class>
    <converter-class>org.converter.EmptyToNullConverter</converter-class>
</converter> 
```

# spring-mvc - Spring MVC webUI 的聊天

> ID：14276415
> 
> 赞同：0
> 
> 时间：2013-01-11T10:43:01.117
> 
> 标签：spring-mvc

我需要在我的 Web 应用程序中显示堆叠条形图。该应用程序使用带有 Spring MVC 和 mysql 作为后端的 JSP。请建议我可以使用的任何易于使用的图表库。只需在应用程序中完全拥有 2 个图表，因此拥有一个易于使用并通过我的控制器 api 在我的应用程序中呈现的库将很有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:09:29.397

好吧，您真正需要的可能是一个 JavaScript 库，而您的选择将取决于您选择的基础库。我过去使用过 Dojo，但最近选择了 jQuery。如果我没记错的话，我认为[jqChart](http://www.jqchart.com/)有一个堆积条形图。我确信有一些用于绘制图表的 jQuery 开源库。

您的另一个选择是将图表生成为图像并使用直接的 img 标签将其发布在您的页面上，但我认为这不是现在做事的最佳方式。

# css - 在内指定“溢出：自动” html标签

> ID：14276416
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:43:05.807
> 
> 标签：css, html, overflow

我需要在几个 html 元素上设置“溢出：自动”。

有没有办法将它嵌入到 html 中，而不是在 ie 中定义 div。

```
div.scroll
{
overflow:auto;
} 
```

不是在标签中包含上述代码，而是可以定义 HTML 元素。

这似乎不起作用。

```
<body>
<div {overflow:auto;}>
<table border="1">
<thead>
   <tr>
    <th>Column 1</th>
    <th>Column 2</th
   </tr>
</thead>
<tbody>
</table>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:45:33.437

试试看`<div style="overflow:auto;">`，希望我明白你在问什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:49:46.130

使用外部 css 样式表文档来定义 css 比将内联 css 应用于实际的 html 页面要好得多。

Mu 的建议是定义一个只包含溢出的类：您要在此处使用的自动 css，并将该类应用于您希望与它一起使用的所有 DIV 元素，例如

```
.myclassname {
    overflow:auto;
}

<div id="somedivID" class="myclassname"></div>

<div id="someotherdivID" class="myclassname"></div> 
```

# javascript - Kendo Grid 不能很好地与 Bootstrap 下拉菜单或工具提示配合使用

> ID：14276417
> 
> 赞同：5
> 
> 时间：2013-01-11T10:43:08.500
> 
> 标签：javascript, web-applications, kendo-ui

我正在尝试在 Kendo Grid 中使用某些 Bootstrap 元素，例如 Bootstrap 下拉按钮和工具提示。

问题是下拉列表或工具提示始终位于下方或上方的行下方。我试过调整显示元素的 z-index，但这并不能解决它。

有没有人设法找到解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T07:29:07.933

.btn-group 类，它是下拉菜单的容器，相对定位，因此改变下拉菜单类的 z-index 不会有任何好处。您可以绝对定位，然后从那里调整定位。这样的事情应该让你开始：

```
.k-grid-content .btn-group {
    position: absolute;
}

.k-grid-content .btn-group .btn {  
    top: -10px;
} 
```

[链接](http://jsfiddle.net/gg7Yy/4/)到一个 jsFiddle 演示它的实际操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T08:55:17.000

问题在于将网格内容永久设置为`overflow-y: scroll`它并不真正需要的内容（除非您是具有虚拟化功能的固定高度）。

通过更改网格内容的 CSS 以删除滚动条，设置`overflow: visible`和添加额外的填充以解决缺少的滚动条，它现在可以工作了。

我已经更新了[jsFiddle](http://jsfiddle.net/matbeard/gg7Yy/5/)来演示。

感谢所有的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-28T13:29:19.167

为了将来参考，如果您有其他网格单元格可能包含将溢出到具有上述修复的其他列的数据，您可以将一个类设置为自定义网格操作列，如下所示：

```
columns: [
  {
   field: "Actions", 
   title: " ", 
   filterable: false, 
   attributes: {"class": "actions-column"},
   template: <your action button template or template link here>
  }
] 
```

然后在页面的样式中添加以下 CSS：

```
.k-grid-content tr td.actions-column {
   overflow: visible;
} 
```

编辑：小的 CSS 选择器更改

# php - 计算PHP中的最高和最低分数？

> ID：14276418
> 
> 赞同：0
> 
> 时间：2013-01-11T10:43:10.647
> 
> 标签：php, max, min

我正在创建一个爱好足球统计网站。以下是一些分数：

玩家 1 - 玩家 2

*   5:1
*   5:2
*   0:4
*   0:1

对于 player1，我试图用 php 找到最好和最差的分数。我尝试了一个 mysql_fetch_array

```
$player1max = $row['MAX(player1)']; 
```

但是我得到了 5:2 的分数。然而，正确的比分是 5:1，因为在这种情况下 player1 只进了一个球。

同样的情况发生在

```
$player1min = $row['MIN(player1)']; 
```

我得到 0:1，但我应该得到 0:4（因为进 4 球比进 1 球更糟）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:46:53.173

只需将反目标从制造目标中提取出来，结果要么是最好的，要么是最差的。

例子：

*   5:1 变为 4 (5-1)
*   5:2 变为 3 (5-2)
*   0:4 变为 -4 (0-4)
*   0:1 变为 -1 (0-1)

这样：
最差分数 = -4 (0:4)
最佳分数 = 4 (5:1)

# telerik-grid - 关于 Telerik 下拉列表上的模糊事件

> ID：14276419
> 
> 赞同：0
> 
> 时间：2013-01-11T10:43:12.267
> 
> 标签：telerik-grid, telerik-mvc, blur, focusout

我在 Telerik 网格中使用 Telerik 下拉列表。现在我想在下拉列表上对模糊进行一些验证，或者如果值为“选择”，则将注意力集中在上面。在这里，我没有更改下拉列表中的项目。最初它只是“选择”。任何帮助将不胜感激。

```
$('#Claim_Status').live('blur', function () {                    

        if ($('#Claim_Status').val() == "") {

            var str = "<span class='field-validation-error' data-valmsg-replace='true' data-valmsg-for='Claim_Status'>";
            str = str + "<span class='' for='Claim_Status' generated='true'>Field is required.</span></span>";
            $("span[data-valmsg-for='Claim_Status']").replaceWith(str);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:31:10.303

为什么不直接使用 DropDownList 的[change](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html#OnChange)事件并在它发生时执行你的逻辑呢？

# c++ - 使用 std::thread 调用重载的成员函数

> ID：14276425
> 
> 赞同：16
> 
> 时间：2013-01-11T10:43:43.687
> 
> 标签：c++, c++11, visual-studio-2012, stdthread

是否可以对我们需要使用线程跨越的函数进行重载？

我有一个名为 Complex 的简单类。

```
class Complex
{
public:
    Complex():realPart_(0), imagPart_(0){}

    Complex(double rp, double ip) : realPart_(rp), imagPart_(ip) {}

    double & real() { return realPart_;}
    double & imag() { return imagPart_;}

    const double & real() const { return realPart_;}
    const double & imag() const { return imagPart_;}

    double square() const {return realPart_*realPart_ - imagPart_*imagPart_;}

    void display() const
    {
        std::cout << "Square of the Complex number (" << realPart_ << ") + i (" << imagPart_ << " ) is " << square() << std::endl;  
    }

    void display(unsigned nTimes) const {while(nTimes-- > 0)display();}

private:

    double realPart_;
    double imagPart_;

};

void Test3()
{
    Complex c1(1, 0.74), c2(2, 0.35);

    std::thread sqCalc1(&Complex::display, &c1);
    std::thread sqCalc2(&Complex::display, &c2);

    sqCalc1.join();
    sqCalc2.join();
} 
```

构建此代码时出现错误。

```
error C2661: 'std::thread::thread' : no overloaded function takes 2 arguments 
```

如果没有采用无符号的重载显示函数，那么我显示的代码可以正常工作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-13T18:56:37.493

问题与问题无关`std::thread`（错误具有误导性），可以通过重新排列代码来显示：

```
auto memfunc = &Complex::display;
std::thread sqCalc1(memfunc, &c1);
std::thread sqCalc2(memfunc, &c2); 
```

错误现在将出现在第一行，因为正如其他答案所说，表达式`&Complex::display`指的是重载函数，编译器不知道你指的是哪个。

您可以通过告诉编译器您尝试调用的函数的类型来选择所需的重载，使用强制转换或类似这样：

```
void (Complex::*memfunc)() const = &Complex::display;
std::thread sqCalc1(memfunc, &c1);
std::thread sqCalc2(memfunc, &c2); 
```

现在您已明确请求返回且不带参数的`display`重载。`void`

如果您的编译器支持 C++11 别名声明，您可以使其更易于阅读：

```
using memfunc_type = void (Complex::*)() const;
memfunc_type memfunc = &Complex::display;
std::thread sqCalc1(memfunc, &c1);
std::thread sqCalc2(memfunc, &c2); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T10:49:26.750

lambda 可以在这里使用，您可以调用任何对象函数并传递参数：

```
int main()
{
    Complex c1(1, 0.74), c2(2, 0.35);

    std::thread sqCalc1([=]{c1.display();});
    std::thread sqCalc2([=]{c2.display(3);});

    sqCalc1.join();
    sqCalc2.join();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T13:59:02.077

与对该问题的一些评论相反，这不是 C++11 限制 ctor 参数列表的问题，也不是编译器问题。std::thread 构造函数可以采用指向成员函数的指针，后跟应调用成员函数的对象引用/指针，然后是成员函数参数（如果有的话）。

手头的问题只是一个消歧问题，只是通过查看`&Complex::display`，编译器没有机会知道您指的是哪个重载，因为在扣除模板参数时，它不知道在构造函数内部将调用函数指针其他参数，因此只有一元或 0 元成员函数才有意义。

2 bluescarni 和 billz 提出了可能的解决方案：

1.  将 lambda 传递给线程的构造函数，因为在 lambda 重载分辨率内部可以确定调用哪个显示函数。
2.  将成员函数指针转换为正确的函数指针类型，以便编译器知道选择哪一个进行模板参数推导。

第三种可能性是显式指定函数指针的模板参数，但遗憾[的是不可能显式实例化模板化构造函数：](http://learningcppisfun.blogspot.de/2007/02/constructor-templates-and-explicit.html)

```
std::thread sqCalc1<Complex::*()const>(&Complex::display, &c1); //doesn't work 
```

但是，这不会对显式强制转换和参数推导产生太大影响。而且我更喜欢在所有情况下使用 lambda，即使没有这种歧义，只是因为您可以在函数调用之前放置一个断点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-11T13:14:32.293

也许 typedefing 和 cast 会有所帮助？

```
typedef void (Complex::*display_0)() const;
typedef void (Complex::*display_1)(unsigned) const;

std::thread sqCalc1(display_0(&Complex::display), &c1);
std::thread sqCalc2(display_0(&Complex::display), &c2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-23T08:20:29.303

虽然它不是关于覆盖*成员*函数，但感谢 @billz 提供 lambda 解决方案的唯一方法是贡献“我的”代码，这是线程调用问题的最简单情况，再次使用上面提出的 lambdas 解决。

```
#include <thread>
void f(int a){}
void f(int a, int b){}

int main()
{
   std::thread t([=]{ f(2); });
   t.join();

   return 0;
} 
```

# html - HTML 电子邮件背景颜色

> ID：14276432
> 
> 赞同：-2
> 
> 时间：2013-01-11T10:44:22.233
> 
> 标签：html, css, background, html-email

我创建了一个 HTML 邮件并编辑 css。现在很好。但是，我想给我的窗口提供背景颜色。

我的代码：

```
<body bgcolor="#f2f2f2" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0"> 
```

但不要工作。当 ia 表时，我的结构崩溃。

```
<table bgcolor="#f2f2f2">
--
My Email Structure
**
</table> 
```

我该如何解决？

测试浏览器：

火狐，Safari，铬。

被测客户：

邮箱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:49:45.067

```
<table style="background-color: #f2f2f2;">

</table> 
```

的 bgcolor 属性在 HTML 4.01中**已弃用。**

不推荐使用的元素或属性是已过时的元素或属性。

不推荐使用的元素将来可能会过时，但浏览器应继续支持不推荐使用的元素以实现向后兼容性。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-11T10:48:28.317

试试css

```
 body {background-color:#f2f2f2;} 
```

背景颜色必须有效。 [参考这里](http://www.w3schools.com/css/css_background.asp)

# android - 如何从动态创建的 EditText 中获取值？

> ID：14276433
> 
> 赞同：0
> 
> 时间：2013-01-11T10:44:22.857
> 
> 标签：android, android-edittext

在这里，我通过单击按钮动态创建了 EdiIexts，如何从这些 EditTexts 中获取值？我看过很多例子，但我无法获得价值！

```
 final LinearLayout ll=new LinearLayout(this);
 ll.setOrientation(LinearLayout.VERTICAL);
 Button add_btn=new Button(this);
 add_btn.setText("Click to add TextViiews and EditTexts");
 ll.addView(add_btn);     

 add_btn.setOnClickListener(new OnClickListener() {     
     public void onClick(View v) {

         EditText et=new EditText(getApplicationContext());

         ll.addView(et); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:48:13.200

将此代码添加到要获取编辑文本值的位置

```
 EditText et2=(EditText)ll.getChildAt(l1.getChildCount()); //make sure to create new edittext variable do not use "et"
 String s=et2.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:45:20.067

您可以像处理 .xml 文件的 edittext 一样获取动态创建的 edittext 的值。

```
String value;
add_btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                value = et.getText().toString();
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:48:27.143

Declare `EditText et` as a **Class level Member variables** for your Activity,

```
private EditText et = null; 
```

Now, in Button's onClick

```
add_btn.setOnClickListener(new OnClickListener() {     
 public void onClick(View v) {
     et = new EditText(getApplicationContext());
     ll.addView(et); 
```

Now, you can get the `EditText et` values any where in your Activity scope, using

```
if(et != null)
String value = et.getText().toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-13T11:40:52.730

尝试这个，

```
LinearLayout linearLayoutForm = (LinearLayout) activity.findViewById(R.id.linearLayoutForm);
EditText edit = (EditText) linearLayoutForm.findViewById(id);
String value = edit.getText().toString(); 
```

# linux - 无法在 Unix 中创建文件

> ID：14276442
> 
> 赞同：-2
> 
> 时间：2013-01-11T10:45:13.577
> 
> 标签：linux, unix, aix

我有一个我登录的 Unix Aix 服务器。

当我尝试使用创建文件时，`touch filename.txt`我收到一条错误消息：

```
touch: 0652-046 Cannot create filename.txt 
```

我已经执行了 id 和 ls -lad 。命令并发布结果：

```
Response of id : uid=290975(gaara) gid=10(audit)
Response of ls -lad . : drwxr-xr-x    2 sigadmin student  256 Jan 11 05:57 . 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:50:44.057

首先，检查文件权限。

```
ls -lad . 
```

你会得到这样的回应：

```
drwxrwxr-x   2 user group 4096 Jan 11 11:26 . 
```

这些权限表示`rwx`（用户）`rwx`（组）和`r-x`（其他）。即只有`user`并且`group`可以在这个目录中创建文件（w=写权限）。

将这些与您自己的 UID/GID 进行比较。

```
id 
```

在您的情况下，该目录归`sigadmin`. 组`student`并`others`无权在此目录中创建 (rx)。**所以它不应该工作，因为`sigadmin`它是唯一一个有权在这个目录中写入的人。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:48:02.030

可能无权在该文件系统上创建文件。检查目录previleges。检查谁都拥有该目录的写权限。

# c++ - 无法初始化 GLEW。缺少 GL 版本

> ID：14276444
> 
> 赞同：25
> 
> 时间：2013-01-11T10:45:17.783
> 
> 标签：c++, opengl, qt-creator, sfml, glew

我尝试使用最新版本的 qt creator 设置 SFML 2.0，我已经正确设置了 SFML，并导入了我在 Visual Studio 中编写的一个小游戏。编译后，我得到这个：

![在此处输入图像描述](../Images/a7c7f253e98668aba24536e7dd383a1a.png)

**我试过的**

*   从头开始重新安装整个 qt SDK 和 qt creator IDE
*   重新安装 SFML
*   重新安装mingw
*   我试图编写一个简单的程序来确保它不是我的代码，程序编译正确但是当我关闭应用程序时，我得到了不正常的 OpenGL 错误
*   我尝试在 SFML 论坛上发帖，但无济于事。
*   谷歌搜索错误会显示一些结果，这些结果特定于 OpenGL，并且过于本地化，它们不适用于我，SFML 2.0 中发生的这种情况没有答案

**额外细节**

*   我正在运行 windows XP SP3、mingw 和 qt SDK 和 SFML 的最新版本

*   我尝试使用的代码在 Visual Studio 2010**和**Code::Blocks上没有*任何错误甚至警告*

***   是的，我确信在我的 IDE 上设置了 SFML，基本代码可以工作，但会显示这些错误，更高级的代码会将所有精灵和文本显示为框。

    *   我自己没有编译 SFML

    *   我的 gcc 版本是 4.6.2

    *   我的 gcc 是 DW2 的** 

 **我没有得到任何结果，我什至不知道如何远程接近解决这个问题，甚至不知道从哪里开始。

**编辑** 我无法向您展示我的所有代码，它有 20 多个文件，我几乎 90% 确定这不是我的代码，我在上面已经说过：我可以在任何 IDE 上运行此代码而不会出现任何警告甚至错误除了 qt 创建者。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-24T17:40:05.233

这是因为您没有初始化 OpenGL。lib glut的例子。

错误的：

```
 glewInit();  // ERROR MISSING GL VERSION
 glutInitDisplayMode(GLUT_RGB); 
```

好的：

```
 glutInitDisplayMode(GLUT_RGB);
 glewInit(); 
```

**编辑**我认为 SFML：

```
 sf::Window   App(sf::VideoMode(400, 400, 32), "Window");
 glewInit(); 
```

**编辑 2**测试此代码。

```
#include <SFML/Window.hpp>
#include <iostream>
#include <GL/glew.h>

int
main(int, const char**)
{
    GLenum      err;

    std::cout << "Start" << std::endl;
    std::cout << "Test 1" << std::endl;
    if ((err = glewInit()) != GLEW_OK)
        std::cout << glewGetErrorString(err) << std::endl;

    std::cout << "Init window" << std::endl;
    sf::Window  app(sf::VideoMode(400, 400, 32), "Windows");

    std::cout << "Test 2" << std::endl;
    if ((err = glewInit()) != GLEW_OK)
        std::cout << glewGetErrorString(err) << std::endl;
    std::cout << "End" << std::endl;
    return 0;
} 
```

**我的输出：**

```
Start
Test 1
Missing GL version
Init window
Test 2
End 
```

编译：`g++ -W -Wall -Werror main.cpp -lsfml-window -lGLEW`

祝你好运 ;）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-08T00:45:06.740

应用户 3648895 的要求，我将我的答案单独发布在评论之外。

对于使用 GLFW 而不是 SFML 的用户，您需要在 glfwMakeContextCurrent 之后调用 glewInit()

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-11T00:51:20.473

如果您将 glew 与 glfw 一起使用，请使用`glfwMakeContextCurrent`( [https://github.com/Cloudef/glhck/issues/15](https://github.com/Cloudef/glhck/issues/15) )

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-02T19:54:38.903

对于那些使用 SDL2 的 Renderer 功能的人，它需要在`SDL_CreateRenderer`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-02T16:07:48.533

把 glewInit(); 在 sf::window 创建解决了我使用 glew 和 sfml 的问题之后

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-16T09:39:07.630

它在 GLEW 的文档中明确提到

“首先，您需要创建一个有效的 OpenGL 渲染上下文并调用 glewInit() 来初始化扩展入口点。如果 glewInit() 返回 GLEW_OK，则初始化成功，您可以使用可用的扩展以及核心 OpenGL 功能”

如果您使用的是 GLFW，那么您必须在“glfwMakeContextCurrent(window)”这个函数之后调用。**

# reporting-services - SSRS 报告电子邮件不会发送

> ID：14276447
> 
> 赞同：0
> 
> 时间：2013-01-11T10:45:21.020
> 
> 标签：reporting-services, ssrs-2012

我正在尝试设置我的 SSRS 2012 订阅，尽管我使用了与数据库邮件中使用的所有相同的详细信息，但我无法让它发送电子邮件，但我没有从作业中收到任何错误消息。

我可以看到的唯一区别是在数据库邮件配置向导下列出了 SMTP 身份验证“基本身份验证”详细信息，这些是否需要放在 RSreportsever.config 文件中，如果需要放在哪里？

谢谢菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T20:09:59.240

SSRS 不能像 SQL/数据库邮件那样进行基本身份验证。有一篇关于设置 SSRS 可以发送的虚拟本地 SMTP 服务的文章。然后，这个虚拟 SMTP 将您的电子邮件转发到真正的 SMTP 服务器——它可以使用基本身份验证。[http://en.sql4you.info/?p=132](http://en.sql4you.info/?p=132)

# data-structures - 哈希表中的重新散列

> ID：14276449
> 
> 赞同：3
> 
> 时间：2013-01-11T10:45:27.393
> 
> 标签：data-structures, hash, hashmap, hashtable

我有一个关于重新散列的问题。据我所知，当负载因子（表中的元素数/表的大小）达到 0.5 时，我们使用重新散列，通过重新散列，我们希望减少冲突。我很确定在进行二次探测时可以使用重新散列，我的问题是，重新散列是否可以与线性探测或单独的链接一起使用？在进行单独的链接或线性探测时是否有任何使用 rehash 的逻辑？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:53:07.713

正如您所解释的，当哈希表填充超过某个数字负载因子时，通常我们会重新散列。在进行重新散列时，我们增加哈希表的大小并进行重新散列。Rehashin 不是关于使用替代散列策略，而是关于重新散列成新大小的散列故事（使用旧/新策略）

使用哪种碰撞处理策略取决于您。通常人们会选择封闭散列。我们也可以使用单独的链接，但它仅用于未知和已知大小，但开放寻址用于已知大小。因此，如果大小大多是已知的，我们更喜欢开放寻址以避免数据浪费。

# jquery - $.get 不适用于 jQuery

> ID：14276452
> 
> 赞同：0
> 
> 时间：2013-01-11T10:45:29.660
> 
> 标签：jquery

> **可能重复：**
> [当 url 来自不同的服务器时，jQuery.ajax 失败](https://stackoverflow.com/questions/1201429/jquery-ajax-fails-when-url-is-from-different-server)

我的测试页面上有这样的代码：

```
$(document).ready(function() {

    $.get(
        "http://www.google.com",
        function(data) { alert(data); }
    );

}); 
```

问题是，我从来没有收到警报，我也不知道为什么。

有谁知道错误可能是什么？它是一个简单的 html 页面，所有其他 jQuery 的东西都在工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:49:48.907

这对您不起作用，因为您正在尝试执行跨域 XmlHttpRequest。你可能想看看这个[jQuery 的跨域模块](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:50:26.317

jQuery 中的 $.get 函数使用 GET 的 HTTP 类型执行 AJAX 请求。由于[同源政策](https://en.wikipedia.org/wiki/Same_origin_policy)，您不能从域外请求页面。

如果您需要从另一个域请求页面，则需要设置托管在您的站点上的脚本来代理这些请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:49:32.583

如果您尝试获取它的 google.com，那么它将无法正常工作，XHR 仅适用于您自己的域。另一个站点需要启用跨站点 XMLHttpRequest。

# maven - maven 程序集在最终的 zip/tar 中包含当前项目 jar

> ID：14276453
> 
> 赞同：32
> 
> 时间：2013-01-11T10:45:29.697
> 
> 标签：maven, maven-assembly-plugin

我正在使用 maven 程序集插件生成一个`.tar`包含其他几个文件、依赖 jar 的文件。所有文件都被正确复制到 config 中的给定文件夹中`assembly.xml`。

我也想在最终的 tar 文件中包含原始项目 jar，但目前在其中没有看到它。

`assembly:single`发出目标时，我确实收到以下消息：

> [警告] 不能包含项目工件：com.my.newpkg.project1:jar:0.0.3.0; 它没有关联的文件或目录。

在阅读了 SO 之后，似乎添加了以下配置`pom.xml`应该添加 jar，但仍然没有得到预期的结果。

### pom.xml 中的配置

```
<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-jar-plugin</artifactId>
   <version>2.4</version>
   <configuration>
       <archive>
           <manifest>
               <mainClass>com.my.newpkg.project1.MainClass</mainClass>
               <addClasspath>true</addClasspath>
               <classpathPrefix>lib/</classpathPrefix>
           </manifest>
       </archive>
   </configuration>
</plugin> 
```

### assembly.xml 的片段

```
<formats>
    <format>dir</format>
    <format>tar</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>
<dependencySets>
    <dependencySet>
        <outputDirectory>lib</outputDirectory>
        <excludes>
            <exclude>junit:junit</exclude>
        </excludes>
        <fileMode>0755</fileMode>
    </dependencySet>
</dependencySets> 
```

那么，配置还不正确？还是我在这里遗漏了什么？

我们如何将当前项目的 jar 添加到最终的 tar

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-11T11:07:35.663

在`<dependencySet>`您可以通过说 排除当前项目 jar `<useProjectArtifact>false</useProjectArtifact>`，但默认情况下它是正确的，所以它应该可以工作。

从警告来看，您似乎需要先做，但由于一些内部 Maven 问题，如果您这样做并且在单独的命令中`mvn package`它不起作用。`mvn package``mvn assembly:single`

如果您`mvn package assembly:single`在一个命令中执行此操作，它将起作用。

或者，在您的 pom 中添加 maven-assembly-plugin 并将其绑定到“包”阶段，以便它会自动触发`mvn package`：

```
 <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <executions>
          <execution>
            <id>tar-assembly</id>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
            <configuration>
              <descriptors>
                <descriptor>etc/assembly.xml</descriptor>
              </descriptors>
            </configuration>
          </execution>
        </executions>
      </plugin> 
```

# php - 内部连接错误

> ID：14276454
> 
> 赞同：0
> 
> 时间：2013-01-11T10:45:30.273
> 
> 标签：php, mysql, sql

出于某种原因，我的 INNER JOIN 有问题，它根本不起作用。

这是我的代码

```
SELECT
    `hold`.`id` AS `id`,
`hold`.`name` AS `name`
INNER JOIN `instruktorer`
ON `hold`.`ins` = `instruktorer`.`id`
FROM `hold` 
```

我得到的错误是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INNER JOIN `instruktorer` ON `hold`.`ins` = `instruktorer`.`id` FROM `hold`' at line 4 
```

我几乎每天都进行一次 INNER JOIN，但现在我无法让它工作。

希望可以有人帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:46:02.220

试试这个：

```
SELECT
    `hold`.`id` AS `id`,
`hold`.`name` AS `name`
FROM `hold`
INNER JOIN `instruktorer`
ON `hold`.`ins` = `instruktorer`.`id` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:46:35.543

`FROM`必须来之前`INNER JOIN`。通常，所有查询都有一个定义的顺序。对于 SELECT 它是这样的

```
select
from
join
where
group by
having
order by 
limit 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:52:53.193

JOIN的写法不正确。它应该如下
SELECT 'column_name' ..... FROM 'table1' JOIN TYPE 'table2' ON SOME CONDITION

[请在此处](http://www.w3schools.com/sql/sql_join_inner.asp)检查基础知识。

# sharepoint - 是否有 Powershell 命令可以在没有任何用户输入的情况下重新启动机器并运行脚本？

> ID：14276456
> 
> 赞同：0
> 
> 时间：2013-01-11T10:45:38.820
> 
> 标签：sharepoint, powershell

我正在运行一个安装 sharepoint 先决条件的 powershell 脚本。在安装服务器需要**重新启动**并且必须**运行另一个脚本之后**

有没有办法在powershell中**自动化这个过程？**

重启和恢复？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:33:51.650

^(在重新启动之前，将第二)个脚本添加到[HKLM 下的 RunOnce 键](http://msdn.microsoft.com/en-us/library/aa376977%28v=vs.85%29.aspx)。

```
New-ItemProperty -Path HKLM:\Software\Microsoft\Windows\CurrentVersion\RunOnce `
  -Name "SPPreReq" -PropertyType String -Value "powershell -File C:\foo.ps1"
Restart-Computer 
```

# android - 通过 PhoneGap 中的短信分享手机地理位置坐标（适用于 Android/IOS）

> ID：14276458
> 
> 赞同：1
> 
> 时间：2013-01-11T10:45:54.997
> 
> 标签：android, ios, html, cordova, geolocation

我正在开发一个 PhoneGap 应用程序，该应用程序允许用户通过 SMS 向他的朋友分享他的当前位置（坐标）。

该过程将是：

1.  获取当前地理位置（坐标）
2.  将坐标输入谷歌地图并创建固定位置（标记/标签），显示在指向谷歌地图的 url 链接中。
3.  通过短信将该链接（网址）发送给朋友（使用 PhoneGap SMS 插件或 SMScomposer 插件）
4.  接收者将在短信中打开网址并链接到在线谷歌地图，其中带有显示发送者位置的标记。

有人会好心给我一些关于我应该从哪里开始的指示吗？=)

问候，贾莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:51:11.313

使用Phonegap 一切皆有可能，您只需进行一些挖掘。

1.  [http://docs.phonegap.com/en/2.3.0/cordova_geolocation_geolocation.md.html#Geolocation](http://docs.phonegap.com/en/2.3.0/cordova_geolocation_geolocation.md.html#Geolocation)
2.  [http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt4part1，http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt4p2](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt4part1) _ [_](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt4p2)
3.  [https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMSPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMSPlugin)

# extjs - ExtJS 窗口动画目标

> ID：14276463
> 
> 赞同：4
> 
> 时间：2013-01-11T10:46:03.843
> 
> 标签：extjs, extjs4, extjs4.1

我正在使用[animateTarget](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-animateTarget)为窗口的显示和隐藏设置动画。但是我似乎无法为此设置任何动画选项，例如持续时间和缓动。

在这个特定的用例中，仅设置持续时间和缓动对我来说就足够了。

我正在使用 ExtJS 4.1

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:50:48.557

可以配置此动画，但不能仅将附加配置属性应用于`Ext.window.Window`创建时。动画是通过**[animate](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.fx.Anim-cfg-duration)**方法完成的，`Ext.Element`并且是**[Ext.fx.Anim 类型（有关配置详细信息，请参阅此链接）](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.fx.Anim)**

您将需要扩展并`Ext.window.Window`覆盖私有事件处理程序。在这些中，您可以修改适当的配置。这是一个示例，我将持续时间从默认的 250 毫秒延长到 500 毫秒。这是一个有效的**[JSFiddle 生活演示](http://jsfiddle.net/sran/czrt6/31/)**`afterShow()``onHide()`

```
Ext.define('Ext.ux.Window',{
  extend: 'Ext.window.Window',
  alias: 'widget.animatedwindow',
  initComponent: function() {
    this.callParent(arguments);
  },
  afterShow: function(animateTarget, cb, scope) {
        var me = this,
            fromBox,
            toBox,
            ghostPanel;

        // Default to configured animate target if none passed
        animateTarget = me.getAnimateTarget(animateTarget);

        // Need to be able to ghost the Component
        if (!me.ghost) {
            animateTarget = null;
        }
        // If we're animating, kick of an animation of the ghost from the target to the *Element* current box
        if (animateTarget) {
            toBox = me.el.getBox();
            fromBox = animateTarget.getBox();
            me.el.addCls(me.offsetsCls);
            ghostPanel = me.ghost();
            ghostPanel.el.stopAnimation();

            // Shunting it offscreen immediately, *before* the Animation class grabs it ensure no flicker.
            ghostPanel.el.setX(-10000);

            me.ghostBox = toBox;
            ghostPanel.el.animate({
                from: fromBox,
                to: toBox,
                duration: 500,
                listeners: {
                    afteranimate: function() {
                        delete ghostPanel.componentLayout.lastComponentSize;
                        me.unghost();
                        delete me.ghostBox;
                        me.el.removeCls(me.offsetsCls);
                        me.onShowComplete(cb, scope);
                    }
                }
            });
        }
        else {
            me.onShowComplete(cb, scope);
        }
    },
    onHide: function(animateTarget, cb, scope) {
        var me = this,
            ghostPanel,
            toBox,
            activeEl = Ext.Element.getActiveElement();

        // If hiding a Component which is focused, or contains focus: blur the focused el. 
        if (activeEl === me.el || me.el.contains(activeEl)) {
            activeEl.blur();
        }

        // Default to configured animate target if none passed
        animateTarget = me.getAnimateTarget(animateTarget);

        // Need to be able to ghost the Component
        if (!me.ghost) {
            animateTarget = null;
        }
        // If we're animating, kick off an animation of the ghost down to the target
        if (animateTarget) {
            ghostPanel = me.ghost();
            ghostPanel.el.stopAnimation();
            toBox = animateTarget.getBox();
            ghostPanel.el.animate({
                to: toBox,
                duration: 500,
                listeners: {
                    afteranimate: function() {
                        delete ghostPanel.componentLayout.lastComponentSize;
                        ghostPanel.el.hide();
                        me.afterHide(cb, scope);
                    }
                }
            });
        }
        me.el.hide();
        if (!animateTarget) {
            me.afterHide(cb, scope);
        }
    }
}); 
```

# php - PDO - 3D000 未选择数据库

> ID：14276465
> 
> 赞同：0
> 
> 时间：2013-01-11T10:46:09.720
> 
> 标签：php, mysql, pdo

我想创建一个 PDO mysql 连接。但是 execute() 函数返回 false 并且 errorInfo() 返回“未选择数据库！”。但是我选择了一个数据库。

这是我的代码：

```
 $array = array("db" => "blogscript", "host" => "localhost", "user" => "root", "pass" => "");

    $db = new PDO('mysql:dbname=' . $array['db'] . ';host=' . $array['host'] . '', $array['user'], $array['pass']);

    $statement = $db->prepare('
        SELECT *
          FROM pages
    ');

    $r = $statement->execute();
    if ($r === false) {
        return $statement->errorInfo();
    } 
```

数据库“blogscript”存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T14:40:22.193

`database & host`按此顺序对连接进行硬编码

```
$db = new PDO('dbname=blogscrip;mysql:host=localhost', root, pass); 
```

抛出异常 `could not find driver`

按照 [**文档中的顺序**](http://php.net/manual/en/pdo.connections.php)

```
$dbh = new PDO('mysql:host=localhost;dbname=blogscript', root, pass); 
```

作品

将顺序更改为`host & database`

# android - 服务中的Android自定义布局（警报）（类似于messenger）

> ID：14276468
> 
> 赞同：0
> 
> 时间：2013-01-11T10:46:10.817
> 
> 标签：android, android-intent

我的问题只是我怎样才能从其他应用程序中弹出一个对话框。我四处寻找，许多答案是否定的。

然而，像 Whaxxapp 这样的 Messenger 正是这样做的。在我玩游戏、拍照等（如暂停）时，它可以立即弹出回复

我做了一些研究和工作，我能够创建一个从我的活动（活动 A）开始的服务。并且该服务注册了一个 contentobserver，当观察者 onchange 被触发时，它可以启动一个活动（待定活动 B）和我设置主题透明的活动 B，看起来像一个对话框弹出窗口。但是，它也会将背景更改回我的活动 A 以及弹出窗口。

我想要做的不是回到我的活动 A，而是在我收到 onchange 时弹出（或启动待处理的活动 B）。（与 Whaxxapp 交互弹出消息相同）

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:50:50.467

您应该启动 Activity B 来执行新任务。因此，当您按下回活动 A 时，将不会显示。将 Intent.FLAG_ACTIVITY_NEW_TASK 标志添加到活动 B 意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:06:53.833

我猜，但我认为 Whatsapp“弹出窗口”实际上是一个 Activity，其样式看起来像一个对话框。

您可以将 Activity 的主题更改为：

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

然后，您可以添加 Button 等，就像普通的 Activity 一样添加交互。

# java - 创建一个包含 n 个相同值/对象副本的数组？

> ID：14276470
> 
> 赞同：28
> 
> 时间：2013-01-11T10:46:20.030
> 
> 标签：java, arrays, copy

我想在数组中的`n`每个索引处创建一个大小相同的数组。在 Java 中执行此操作的最佳方法是什么？

例如，如果`n`为 5 且值为 boolean `false`，则数组应为：

```
= [false, false, false, false, false] 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-11T10:48:16.663

你可以试试：

```
boolean[] array = new boolean[5];
Arrays.fill(array, false); 
```

手动数组填充的第二种方法：

```
boolean[] array = new boolean[] {false, false, false, false, false}; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-01-13T11:13:50.770

```
List<Integer> copies = Collections.nCopies(copiesCount, value); 
```

javadoc[在这里](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#nCopies%28int,%20T%29)。

这比 'Arrays.fill' 解决方案要好有几个原因：

1.  它又好又光滑，
2.  它消耗更少的内存（参见[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/Collections.java#3463)），这对于复制大量副本或复制大量对象非常重要，
3.  它创建一个不可变的列表，
4.  它可以创建非原始类型对象的副本列表。不过应该谨慎使用，因为元素本身不会被复制，并且 get() 方法将为每个索引返回相同的值。最好提供一个不可变的对象用于复制或确保它不会被更改。

而且列表比数组更酷 :) 但是如果你真的非常想要一个数组——那么你可以执行以下操作：

```
Integer[] copies = Collections.nCopies(copiesCount, value)
                              .toArray(new Integer[copiesCount]); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T10:48:15.967

[Arrays.fill()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#fill%28boolean%5B%5D,%20boolean%29)将使用相同的值填充现有数组。原语和`Objects`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-11T10:48:30.233

对于那个特定的例子，什么都没有，默认情况下`boolean[]`将初始化为`[false, false, ...]`。

如果要使用非默认值初始化数组，则需要循环或使用`Arrays.fill`which 为您执行循环。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-11T10:50:59.510

[`Arrays.fill(...)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#fill%28boolean%5B%5D,%20boolean%29)就是你要找的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-28T09:48:12.170

或者你可以用低级的方式来做。创建一个包含 n 个元素的数组，并遍历放入相同元素的所有元素。

```
int[] array = new int[n];

for (int i = 0; i < n; i++)
{
    array[i] = 5;
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-11T10:54:59.567

试试这个 ..

```
 Boolean [] data = new Boolean[20];
  Arrays.fill(data,new Boolean(false)); 
```

# sql-server-2008 - 分组时差

> ID：14276471
> 
> 赞同：0
> 
> 时间：2013-01-11T10:46:22.433
> 
> 标签：sql-server-2008, tsql

我有如下表格：

```
 GroupOrderID    Station           Date
-----------------------------------------------
    28797   NB003   2013-01-03 12:53:00
    28797   NB003   2013-01-03 17:12:00
    28797   NB003   2013-01-04 14:45:00
    28797   NB003   2013-01-04 15:57:00
    28797   NB003   2013-01-06 16:08:00
    28797   NB003   2013-01-07 10:28:00
    28797   NB003   2013-01-07 10:29:00
    28797   CRM220  2013-01-07 16:31:00
    28797   CRM220  2013-01-07 17:04:00
    28797   CRM220  2013-01-07 17:04:00
    28797   CRM220  2013-01-07 17:04:00
    28797   CRM220  2013-01-07 17:04:00
    28797   CRM220  2013-01-07 17:24:00
    28797   CRM220  2013-01-07 17:24:00
    28797   STEENOVE    2013-01-11 11:03:00 
```

我想要两个日期之间的时间差（以秒为单位）。对于每个站，就像 Station NB003、CRM220 一样，每个日期都有第一个和最后一个日期，我想要以秒为单位的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:51:03.667

通过应用`max()`和`min()`聚合函数然后使用[`DateDiff()`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)你应该能够得到结果。

```
select GroupOrderID, 
  station,
  datediff(ss, MinDate, MaxDate) DiffSeconds
from
(
  select GroupOrderID, 
    station, 
    min(date) MinDate,
    Max(Date) MaxDate
  from yourtable
  group by GroupOrderID, Station
) src 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/044f5/4)

结果是：

```
| GROUPORDERID |  STATION | DIFFSECONDS |
-----------------------------------------
|        28797 |   CRM220 |        3180 |
|        28797 |    NB003 |      336960 |
|        28797 | STEENOVE |           0 | 
```

如果您想知道每个日期的差异，您可以进一步执行此查询：

```
select GroupOrderID, 
  station,
  Date,
  datediff(ss, MinDate, MaxDate) DiffSeconds
from
(
  select GroupOrderID, 
    station,
    Cast(date as date) date,
    min(date) MinDate,
    Max(Date) MaxDate
  from yourtable
  group by GroupOrderID, Station, Cast(date as date)
) src
order by date 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/044f5/7)

结果是：

```
| GROUPORDERID |  STATION |       DATE | DIFFSECONDS |
------------------------------------------------------
|        28797 |    NB003 | 2013-01-03 |       15540 |
|        28797 |    NB003 | 2013-01-04 |        4320 |
|        28797 |    NB003 | 2013-01-06 |           0 |
|        28797 |   CRM220 | 2013-01-07 |        3180 |
|        28797 |    NB003 | 2013-01-07 |          60 |
|        28797 | STEENOVE | 2013-01-11 |           0 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:59:52.477

```
;with CTE(GroupOrderId, station, Date , r_asc, r_desc) as 
(
select GroupOrderId, station, Date , row_number() over(partition by GroupOrderId, station order by date ) as r_asc, row_number() over(partition by GroupOrderId, station order by date desc) as r_desc
from #temp
)
select a.GroupOrderId, a.station, datediff(SECOND, a.date, b.date)
from CTE a join CTE b on a.GroupOrderId = b.GroupOrderId and a.station = b.station and a.r_asc =1 and b.r_desc = 1 
```

# forms - 如何使用表单引擎在 Alfresco Share 中实现 CRUD 页面

> ID：14276474
> 
> 赞同：4
> 
> 时间：2013-01-11T10:46:35.750
> 
> 标签：forms, share, crud, alfresco

我试图找出在 CRUD 功能中使用表单引擎的最佳方式，尽可能提供最佳的用户体验。

我创建了一个自定义共享页面，它将用作站点管理页面。它的功能之一是管理站点成员，因此它将允许站点管理员搜索当前成员以及查看详细信息、创建、编辑或删除成员。我将管理控制台中的开箱即用用户管理作为模型，因为功能非常相似。

管理控制台中的用户管理不使用表单引擎，但我想将其用于用户创建、编辑和查看其属性。我想知道是否有人通过利用表单引擎实现了类似的功能，以及共享中已经存在类似的功能，但我一无所获。

在花了一些时间阅读表单引擎架构、调查和创建一些试点之后，我想出了以下方法：

**方法一**

为了提供更好的用户体验，我想保留原始管理控制台的用户管理流程，该流程通过执行返回 JSON 响应的 AJAX 请求来动态加载页面所需的内容。我认为我能做到的唯一方法是对表单组件执行异步请求，然后将返回的 HTML 内容添加到当前页面中。例如，对**/share/service/components/form?itemKind=node&itemId=workspace%3A%2F%2FSpacesStore%2F3152987c-4cc9-49c4-b934-4ad293e73884&mode=create&htmlid=to_be_replaced_with_current_htmlid**的请求将返回一个包含用户数据的表单：

```
 <style type="text/css" media="screen">
      @import url("/share/res/yui/calendar/assets/calendar_aa6d35544845f9e37c2e63f30c3fc.css");
      @import url("/share/res/components/object-finder/object-finder_6ace14eb15aeb2f5fc580252b2e234a.css");
      @import url("/share/res/components/form/form_b0441863b8c8626acf9439fcf5430e3.css");
   </style>

   <script type="text/javascript" src="/share/res/components/form/form_759f5c75621bd2fdc25f232733606013.js"></script>
   <script type="text/javascript" src="/share/res/components/form/date_c5fc1a135563584dfe4fa2ebfda6d7c7.js"></script>
   <script type="text/javascript" src="/share/res/components/form/date-picker_867acd42dd913caf3fdf3b5fb915b6b.js"></script>
   <script type="text/javascript" src="/share/res/components/form/period_6687cd14ce6f0519843823e177d338.js"></script>
   <script type="text/javascript" src="/share/res/components/object-finder/object-finder_7613d05fefd03476b1aa73321a9de750.js"></script>
   <script type="text/javascript" src="/share/res/components/form/rich-text_832156d1b3b4b7b336b9fcfd13a7e98.js"></script>
   <script type="text/javascript" src="/share/res/components/form/content_9080c79dc38a9d8a6ce5405a1fc53f.js"></script>
   <script type="text/javascript" src="/share/res/components/form/workflow/transitions_c015c3dc53be0a35a52e8d10f45cbd.js"></script>
   <script type="text/javascript" src="/share/res/components/form/workflow/activiti-transitions_5da4db124822ea4a3062f14ab3402594.js"></script>
   <script type="text/javascript" src="/share/res/components/form/jmx/operations_7cbe27c4e529dd693674fe2a8ff1bd.js"></script>
   <script type="text/javascript">//<![CDATA[
//]]></script>

...
...
...

<div class="form-field">
         <label for="whatever_prop_cm_firstName">First Name:<span class="mandatory-indicator">*</span></label>
      <input id="whatever_prop_cm_firstName" name="prop_cm_firstName" tabindex="0"
             type="text"

             value="Administrator"
             title="The person's first name"

              />
</div>   
   </div>
      </div>

   <div id="whatever-form-buttons" class="form-buttons">
         <input id="whatever-form-submit" type="submit" value="Submit" />&nbsp;
   </div>
         </form>
   </div> 
```

例如，该 HTML 响应可以包含在包装器 div 中。

**方法二**

创建一个由三个不同区域组成的附加页面。每个区域将绑定表单组件，但具有不同的初始化参数：一个区域用于查看模式，另一个用于创建模式，另一个用于编辑模式。就像是：

```
 <component>
     <region-id>view-user</region-id>
     <url>/components/form</url>
     <properties>
        <itemKind>node</itemKind>
        <itemId>{nodeRef}</itemId>
        <mode>view</mode>
        <submitType>json</submitType>
        <showCaption>true</showCaption>
        <showCancelButton>true</showCancelButton>
     </properties>
  </component>

  <component>
     <region-id>edit-user</region-id>
     <url>/components/form</url>
     <properties>
        <itemKind>node</itemKind>
        <itemId>{nodeRef}</itemId>
        <mode>edit</mode>
        <submitType>json</submitType>
        <showCaption>true</showCaption>
        <showCancelButton>true</showCancelButton>
     </properties>
  </component>

  <component>
     <region-id>create-user</region-id>
     <url>/components/form</url>
     <properties>
        <itemKind>node</itemKind>
        <itemId>{nodeRef}</itemId>
        <mode>create</mode>
        <submitType>json</submitType>
        <showCaption>true</showCaption>
        <showCancelButton>true</showCancelButton>
     </properties>
  </component> 
```

对这个附加页面的请求将从搜索页面执行，为每个场景提供适当的参数（查看、创建或更新用户）。例如，可以使用模板实例定义中的自定义评估器显示或隐藏区域。

我想听听对表单引擎有经验的开发人员什么是实现这种解决方案的更好方法。虽然我无法找到任何关于表单引擎组成的类似功能的资源（扩展、博客文章、教程......），但我相信任何人之前都必须做类似的事情是合理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T13:18:19.837

方法 1 相当不错，但我最好的是方法 2a :)。

你的 2 很好，但我不会将 Edit 和 Create 定义为区域。检查 Alfresco Share 默认代码，您会看到（经过一些经验）他们定义了 1 个区域**view-user**。

这样做是因为这个视图中的逻辑最多。比如搜索/过滤，也许还有对用户的一些操作。**create-users**和**edit-users**主要是 webscript(form) 对话框，它们只是打开以执行简单的特定任务。

在您定义分组信息的情况下，我会使用方法 1。就像您已与问题跟踪器集成，并且您想在与跟踪器相关的整个页面上显示多个信息。

您的任何方法仍然没有错，它们都很好，并且在 Alfresco Share 的最佳实践中。

# mercurial - 来自 bitbucket 存储库的 Capistrano 部署代码“授权失败”

> ID：14276478
> 
> 赞同：1
> 
> 时间：2013-01-11T10:46:53.157
> 
> 标签：mercurial, capistrano, bitbucket

我正在尝试使用 Capistrano、私有 bitbucket 存储库和 mercurial 将代码部署到 Amazon EC2 实例。

我成功地`cap deploy:setup`从我的开发箱中跑了出来。

然后我尝试运行`cap deploy:cold`。系统提示我输入正确的 bitbucket 密码，但出现“授权失败”错误消息。结果，我试图将代码部署到的机器无法从 bitbucket 存储库“克隆”代码。

详细情况如下：

```
% cap deploy:cold
triggering load callbacks
* 2013-01-10 18:44:07 executing 'production'
triggering start callbacks for 'deploy:cold'
* 2013-01-10 18:44:07 executing 'multistage:ensure'
* 2013-01-10 18:44:07 executing 'deploy:cold'
* 2013-01-10 18:44:07 executing 'deploy:update'
** transaction: start
* 2013-01-10 18:44:07 executing 'deploy:update_code'
updating the cached checkout on all servers
executing locally: "hg log --verbose -r default --template \"{node|short}\""
command finished in 797ms
* executing "if -d /home/ec2-user/my_project/shared/cached-copy ; then hg pull     --verbose --repository /home/ec2-user/my_project/shared/cached-copy https://bitbucket_user_id@bitbucket.org/bitbucket_user_id/my_project && hg update --verbose --repository /home/ec2-user/my_project/shared/cached-copy --clean 2ec0193d60ff; else hg clone --verbose --noupdate https://bitbucket_user_id@bitbucket.org/bitbucket_user_id/my_project /home/ec2-user/my_project/shared/cached-copy && hg update --verbose --repository /home/ec2-user/my_project/shared/cached-copy --clean 2ec0193d60ff; fi"   
servers: "ec2-123-456-78-999.compute-1.amazonaws.com"
ec2-123-456-78-999.compute-1.amazonaws.com executing command
** ec2-123-456-78-999.compute-1.amazonaws.com :: out http authorization required
** ec2-123-456-78-999.compute-1.amazonaws.com :: out realm: Bitbucket.org HTTP
** ec2-123-456-78-999.compute-1.amazonaws.com :: out user: bitbucket_user_id
** ec2-123-456-78-999.compute-1.amazonaws.com :: out password:
hg password:
** ec2-123-456-78-999.compute-1.amazonaws.com :: out
** ec2-123-456-78-999.compute-1.amazonaws.com :: out abort: authorization failed
command finished in 5410ms
*** deploy:update_code rolling back
* executing "rm -rf /home/ec2-user/my_project/releases/20130110184415; true"
servers: "ec2-123-456-78-999.compute-1.amazonaws.com"
ec2-123-456-78-999.compute-1.amazonaws.com executing command
command finished in  431ms
failed: "sh -c 'if -d /home/ec2-user/my_project/shared/cached-copy ; then hg pull --verbose --repository /home/ec2-user/my_project/shared/cached-copy https://bitbucket_user_id@bitbucket.org/bitbucket_user_id/my_project && hg update --verbose --repository /home/ec2-user/my_project/shared/cached-copy --clean 2ec0193d60ff; else hg clone --verbose --noupdate https://bitbucket_user_id@bitbucket.org/bitbucket_user_id/my_project /home/ec2-user/my_project/shared/cached-copy && hg update --verbose --repository /home/ec2-user/my_project/shared/cached-copy --clean 2ec0193d60ff; fi'" on ec2-123-456-78-999.compute-1.amazonaws.com 
```

这是我的 Capistrano deploy.rb 文件

```
set :application, "my_project"
set :repository,  "https://bitbucket_user_id@bitbucket.org/bitbucket_user_id/my_project"
set :keep_releases, 4

set :scm, :mercurial
set :scm_username, "bitbucket_user_id"
default_run_options:pty = true
set :scm_prefer_prompt, :true
set :scm_verbose, :true

set :deploy_to, "/home/ec2-user/#{application}"
set :deploy_via, :remote_cache

set :user, "ec2-user"
set :use_sudo, false

namespace :deploy do
    desc "Gracefully restarting unicorn"
    task :restart, :roles => :app do
        run "sudo /etc/init.d/start_script upgrade"
    end
    task :start, :roles => :app do
        run "sudo /etc/init.d/start_script start"
    end

    task :stop, :roles => :app do
        run "sudo /etc/init.d/start_script stop"
    end

    task :link, :roles => :app do
        run "mkdir -p #{shared_path}/images"
        run "ln -nfs #{shared_path}/images #{release_path}/tmp/images"
    end
end 
```

我在命令行上手动尝试了这个

```
ssh ec2-user@ec2-123-456-78-999.compute-1.amazonaws.com "hg clone --verbose --noupdate https://bitbucket_user_id@bitbucket.org/bitbucket_user_id/my_project /home/ec2-user/my_project/shared/cached-copy" 
```

我得到了（没有提示输入bitbucket密码）

```
abort: http authorization required 
```

我试过了

```
ssh -t ec2-user@ec2-123-456-78-999.compute-1.amazonaws.com "hg clone --verbose --noupdate https://bitbucket_user_id@bitbucket.org/bitbucket_user_id/my_project /home/ec2-user/my_project/shared/cached-copy" 
```

它奏效了。

我相信 Capistrano 正在使用 ssh（在我的 deploy.rb 中通过这一行打开了伪 tty）

```
default_run_options[:pty] = true 
```

所以它应该可以工作，但为什么它不能与 Capistrano 一起工作？

有人可以帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:09:47.880

I was having a similar issue to this and solved it by looking at this question: [Capistrano deploy failed after moving to bitbucket.org](https://stackoverflow.com/questions/13312985/capistrano-deploy-failed-after-moving-to-bitbucket-org)

An answerer there suggested that the person check that they have made deployment keys in BitBucket. In your BitBucket repo, click your settings wheel and in the left hand sidebar click "Deployment Keys": Use deployment keys to gain read-only access to this repository.

If you don't know how to set up SSH keys, read BitBucket's guide here: [https://confluence.atlassian.com/pages/viewpage.action?pageId=270827678](https://confluence.atlassian.com/pages/viewpage.action?pageId=270827678)

Hope this helps!

# c# - 在 c# 中使用目录搜索器进行 LDAP 用户身份验证

> ID：14276479
> 
> 赞同：1
> 
> 时间：2013-01-11T10:46:55.940
> 
> 标签：c#, asp.net, active-directory

我们有一个使用 c#（VS 2008/3.5 框架）开发的 Web 应用程序。该应用程序使用“Windows”身份验证模式，并使用域 (Domain1) 中存在的服务帐户以 ASP.Net 用户身份运行应用程序。我们要对存在于不同域（域 2）中的用户进行身份验证。使用目录服务（目录搜索器）完成身份验证后，我们可以连接到 domain1 的 LDAP 并绑定它，以便对用户进行身份验证。此外，如果用户已从 domain1 迁移到 domain 2，则用户可以进行身份​​验证。但是，如果在 domain 2 中直接创建了用户 id，则应用程序无法绑定到 Domain2（在 LDAP 身份验证期间）因此，该用户未通过应用程序的身份验证。请提出相同的解决方案。

```
<authentication mode="Windows"/>
<identity impersonate="true" userName="domain1\svc_acc" password="***"/>

public bool ValidateUidPwdAndGetUserTypeGlobal(string TPXId, string password)
        {

            string strADPath = "LDAP://a.b.c/dc=a,dc=b,dc=c";
            try
            {
                DirectoryEntry objDirEntry = new DirectoryEntry(strADPath, TPXId, password);

                DirectorySearcher search = new DirectorySearcher(objDirEntry);
                search.Filter = "(samaccountname=" + TPXId + ")";
                SearchResult result = search.FindOne();
                if (null == result)
                {
                    return false;
                }
                else
                    return true;
            }
            catch (Exception ex)
            {
                return false;
            }
        } 
```

LDAP 身份验证期间抛出异常：未知用户名或错误密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T17:27:28.293

您正在尝试**跨域身份验证**。

阅读[身份验证如何跨域工作？](http://blogs.msdn.com/b/anthonw/archive/2006/08/02/686041.aspx). 它将为您提供如何解决问题的提示。

# c# - 如何使用 linq 从对象数组中检索特定的一组值

> ID：14276481
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:47:01.003
> 
> 标签：c#

我有一堂课如下：

```
public class test
{    
     int i;

     string str;

     Socket s;

     DateTime dt;
} 
```

并且正在创建此类的对象，如下所示

```
public void collection()
{

   test t1=new test{i=1,str="string1", s=soc1, dt=DateTime.Today() };

   test t2=new test{i=2,str="string2", s=soc2, dt=DateTime.Today() };

   test t3=new test{i=3,str="string3", s=soc3, dt=DateTime.Today() };

   ArraList a=new ArrayList();

   a.Add(t1);

   a.Add(t2);

   a.Add(t3);

} 
```

并将所有这些对象（、、、）添加`t1`到`t2`数组`t3`中。现在，如何使用 linq 获取对象数组中的所有套接字成员？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:49:27.597

如果您正在使用 .Net framework 2.0 或更高版本，则应该使用[Generic List而不是 ArrayList。](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)*（您必须将您的字段定义为公共字段才能在课堂外访问）*

```
List<test> list = new List<test>();
list.Add(t1);
.... 
```

要获取所有项目，您可以执行以下操作：

```
var items = list.Select(r=> r.s).ToArray(); 
```

您的代码中还有许多其他问题。`DateTime.Today`像方法一样使用，而它只是一个属性。如果你想使用 ArrayList 那么你的类和更正的代码应该是：

```
public class test
{
    public int i;
    public string str;
    public Socket s;
    public DateTime dt;
}

test t1 = new test { i = 1, str = "string1", s = soc1, dt = DateTime.Today };
test t2 = new test { i = 2, str = "string2", s = soc2, dt = DateTime.Today };
test t3 = new test { i = 3, str = "string3", s = soc3, dt = DateTime.Today };

ArrayList a = new ArrayList();
a.Add(t1);
a.Add(t2);
a.Add(t3); 
```

从 ArrayList 中选择套接字

```
var items = a.Cast<test>().Select(r=> r.s).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:51:52.233

我认为您应该将 ArrayList 转换为“test”类型的集合

所以

```
a.Cast<test>.Select(t => t.s); 
```

会给你结果。

或者，如果您认为您的 ArrayList 可能还包含其他类型的对象，您可以使用

```
a.OfType<test>.Select(t => t.s); 
```

注意：确保 Socket 是可公开访问的属性，并根据您使用的框架，考虑使用通用集合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:54:17.277

您可以这样做（这需要测试的公共属性）：

```
var a = new List<test>()
{
    new test{i=1,str="string1", s=soc1, dt=DateTime.Today() },
    new test{i=2,str="string2", s=soc2, dt=DateTime.Today() },
    new test{i=3,str="string3", s=soc3, dt=DateTime.Today() }

};

var sockets = a.Select(t => t.s); 
```

# php - PHPExcel 返回空的 PDF 文件

> ID：14276482
> 
> 赞同：1
> 
> 时间：2013-01-11T10:47:04.980
> 
> 标签：php, html, phpexcel

我有一个基于 PHPExcel 的项目，我想要两种输出类型：.xls 和 .pdf。.xls 输出效果很好，这没问题，但是只要我想将结果输出为 .pdf 文件，它就无法正常工作……最终的 .pdf 文件是 0B 文件，所以完全是空的。

这是文件开头的 PDF 编写器（tcPDF，位于 /var/www/tcpdf 目录中）初始化部分：

```
/** Include PHPExcel */
require_once 'scripts/PHPExcel.php';

/** Include path **/
set_include_path(get_include_path() . PATH_SEPARATOR . '../../../Classes/');

/** PHPExcel_IOFactory */
include 'scripts/PHPExcel/IOFactory.php';

$objPHPExcel = new PHPExcel();

$rendererName = PHPExcel_Settings::PDF_RENDERER_TCPDF;
$rendererLibrary = 'tcpdf';
$rendererLibraryPath = $rendererLibrary;
if (!PHPExcel_Settings::setPdfRenderer(
        $rendererName,
        $rendererLibraryPath
    )) {
    die(
        'Please set the $rendererName and $rendererLibraryPath values' .
        PHP_EOL .
        ' as appropriate for your directory structure'
    );
} 
```

操作函数来了，所以跳过这些......

这是输出部分：

```
$objPHPExcel->setActiveSheetIndex(0);

if($_GET['format'] == 'xls'){

    header('Content-Type: application/vnd.ms-excel');
    header('Content-Disposition: attachment;filename="bs-export.xls"');

    $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
    $objWriter->save('php://output');
    exit;
}

if($_GET['format'] == 'pdf'){

    header('Content-Type: application/pdf');
    header('Content-Disposition: attachment;filename="bs-export.pdf"');

    $objWriter = new PHPExcel_Writer_PDF($objPHPExcel);
    $objWriter = PHPExcel_IOFactory::createWriter($objPHPexcel, 'PDF'); 
    $objWriter->setSheetIndex(0);
    $objWriter->save('php://output');
    exit;
} 
```

有人可以帮我解决这个问题吗？

非常感谢！！

**编辑：**我没有注意到它有一些变量名错误......所以我更正了

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPexcel, 'PDF'); 
```

行至：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF'); 
```

在此之后，PDF 文件不再是 0B 站点，但它仍然不是空白页...... XLS 输出没问题。

**EDIT2：**很奇怪......这也返回了一个空白页：

```
$objWriter = new PHPExcel_Writer_HTML($objPHPExcel);
$objWriter->save("pdf-test.htm"); 
```

# java - Java Code 在 android 上给出不同的结果

> ID：14276484
> 
> 赞同：1
> 
> 时间：2013-01-11T10:47:09.223
> 
> 标签：java, android, dalvik, sgp4

我有一些代码，在 PC 上作为 java 代码运行，它给出了我想要的答案（正确的答案）。在 android 上，相同的代码给出了非常不同的答案。

我使用的代码最初来自 JsatTrack 项目，并将这些答案 jun 作为 eclipse 中的 java 项目提供（正确答案）：

```
Lat [deg]:10.386382587628313
Lon [deg]:-93.88496253189982
Alt [m]  :418288.8335920386 
```

相同的代码，在 Android 上使用相同的输入给出了这样的结果：

```
Lat [deg]:-37.97635062163793
Lon [deg]:-147.34940989563563
Alt [m]  :6.86973250782099E29 
```

我是java新手，所以我从哪里开始寻找这样的问题。例如，它会以 android 处理数学的方式吗？

所以我想我的问题归结为为什么 PC 和 android 会对相同的数学问题给出不同的答案？2+2 应该在任何平台上给出相同的答案。[SGP4](http://en.wikipedia.org/wiki/Simplified_perturbations_models "SGP4")模型中的数学更复杂，但它仍然只是数学。

如果有人想看，代码可以在这里找到

[https://dl.dropbox.com/u/70291490/jstest.zip](https://dl.dropbox.com/u/70291490/jstest.zip)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:01:01.303

`I am new to java so where would I start looking to track down a problem like this?`

通过 PC 上的 USB 连接您的 Android 手机，然后在 Eclipse 上双击开始进行数学运算的相关代码的左侧，它应该出现一个蓝点（代码断点）。单击 Eclipse 工具栏上带有小错误的按钮（DEBUG 按钮）。它将在设备上启动项目并在您放置点的任何位置停止处理。

现在您可以使用调试视图工具栏逐行浏览代码并将鼠标悬停在您的类/字段上以查看它们的值。您可以在 PC 上执行相同的操作并比较彼此的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:43:17.777

这个问题与我之前关于stackoverflow的问题非常相似（http://stackoverflow.com/questions/14190692/how-to-debug-dalvikvm-rejecting-opcode）

Android 无法处理大量的局部变量，因此在方法之外定义它们是解决方案。在我之前的问题中，dalvikvm 拒绝了该方法。在这种情况下它是不同的，这里的代码：

```
ss = 78.0 / radiusearthkm + 1.0; 
```

将 ss 设置为 1.0，而 radiuseathkm 在调试器的前几行中设置为 0.0，当它应该为 6378.135 时，ss 将 = 1.0122292801892716。然后，该错误会在接下来的几百次计算中传播，问题就出现了。

所以我改变了这个：

```
public static boolean sgp4init(
        Gravconsttype whichconst, char opsmode, final int satn, final double epoch,
        final double xbstar, final double xecco, final double xargpo,
        final double xinclo, final double xmo, final double xno,
        final double xnodeo, SGP4SatData satrec)
{
    /* --------------------- local variables ------------------------ */
    double ao, ainv, con42, cosio, sinio, cosio2, eccsq,
            omeosq, posq, rp, rteosq,
            cnodm, snodm, cosim, sinim, cosomm, sinomm, cc1sq,
            cc2, cc3, coef, coef1, cosio4, day, dndt,
            em, emsq, eeta, etasq, gam, argpm, nodem,
            inclm, mm, nm, perige, pinvsq, psisq, qzms24,
            rtemsq, s1, s2, s3, s4, s5, s6,
            s7, sfour, ss1, ss2, ss3, ss4, ss5,
            ss6, ss7, sz1, sz2, sz3, sz11, sz12,
            sz13, sz21, sz22, sz23, sz31, sz32, sz33,
            tc, temp, temp1, temp2, temp3, tsi, xpidot,
            xhdot1, z1, z2, z3, z11, z12, z13,
            z21, z22, z23, z31, z32, z33,
            qzms2t, ss, j2, j3oj2, j4, x2o3, //r[3], v[3],
            tumin, mu, radiusearthkm, xke, j3;
    double[] r = new double[3];
    double[] v = new double[3]; 
```

对此：

```
static double radiusearthkm, ao, ainv, con42, cosio, sinio, cosio2, eccsq,
        omeosq, posq, rp, rteosq,
        cnodm, snodm, cosim, sinim, cosomm, sinomm, cc1sq,
        cc2, cc3, coef, coef1, cosio4, day, dndt,
        em, emsq, eeta, etasq, gam, argpm, nodem,
        inclm, mm, nm, perige, pinvsq, psisq, qzms24,
        rtemsq, s1, s2, s3, s4, s5, s6,
        s7, sfour, ss1, ss2, ss3, ss4, ss5,
        ss6, ss7, sz1, sz2, sz3, sz11, sz12,
        sz13, sz21, sz22, sz23, sz31, sz32, sz33,
        tc, temp, temp1, temp2, temp3, tsi, xpidot,
        xhdot1, z1, z2, z3, z11, z12, z13,
        z21, z22, z23, z31, z32, z33,
        qzms2t, ss, j2, j3oj2, j4, x2o3, //r[3], v[3],
        tumin, mu,  xke, j3;

public static boolean sgp4init(
        SGP4unit_a.Gravconsttype whichconst, char opsmode, final int satn, final double epoch,
        final double xbstar, final double xecco, final double xargpo,
        final double xinclo, final double xmo, final double xno,
        final double xnodeo, SGP4SatData satrec)
{

    double[] r = new double[3];
    double[] v = new double[3]; 
```

现在一切正常。

# java - Java - 从 1 个 InputStream 读取字节和字符串

> ID：14276487
> 
> 赞同：0
> 
> 时间：2013-01-11T10:47:18.917
> 
> 标签：java, bytearray, inputstream, readline

我想从**一个**InputStream 中读取字符串行和字节数组。我当时就是这样做的：

```
// stream for reading byte arrays
InputStream stream = process.getInputStream();
// reader for reading String lines
BufferedReader reader = new BufferedReader(new InputStreamReader(stream));

String msg = reader.readLine();
// if (msg == "data16")
byte[] bytes = new byte[16];
stream.read(bytes); 
```

当我从*阅读器*那里得到一行**data16**时，这意味着：后面是 16 个字节的字节数组。问题是，如果我尝试从*流*中读取字节，我会得到“data16”ASCII 码。*这意味着当我使用reader 阅读*时，流不会更新位置。有没有办法同步他们的位置？我知道 DataInputStream 可以同时做：读取字节数组和读取行。但它的方法已被弃用，它不能正确地将字节转换为字符。***`readLine`***

 ***字节还可以包含 0、10 和 13 以及所有其他字节，最多 255

性能很重要，所以我真的不想逐个字节或逐个字符地阅读。另外，如果可能的话，我想避免“手动”计算读取的字节和字符以使用“跳过”方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:12:37.667

我不认为你将能够做你想做的事。BufferedReader 不仅仅是读取新行，它还在*缓冲*来自 InputStream 的数据。

您最好的选择是自己完成整个事情，但您不必一次读取一个字节，您可以将缓冲区读入内存并进行处理以减少实际 I/O。***

# android - 连接到 Android 手机的外部 USB 设备

> ID：14276488
> 
> 赞同：0
> 
> 时间：2013-01-11T10:47:19.987
> 
> 标签：android, usb

我想问您是否可以从连接的外部 USB 设备中读取数据？就我而言，我想知道是否可以连接一些信号传感器并通过 USB 将数据获取到我的应用程序。如何进行数据传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:05:19.693

是的。Android 提供[USBHost](http://developer.android.com/guide/topics/connectivity/usb/host.html) API。您可以读取设备信息并打开读/写连接。

# c++ - 在 C++ 中初始化向量时出现错误消息

> ID：14276490
> 
> 赞同：0
> 
> 时间：2013-01-11T10:47:22.530
> 
> 标签：c++, vector, initialization

```
void FakeMas::initLSRKeys() {
    const char* lsrKeysInit[]= {
        "platform.enhancedmetadata.categories.baseurl",
        "platform.enhancedmetadata.eventresolution.baseurl",
        "platform.enhancedmetadata.image.baseurl",
        "platform.enhancedmetadata.ondemands.baseurl",
        "platform.enhancedmetadata.programmes.baseurl",
        "platform.enhancedmetadata.recommend.baseurl",
        "platform.enhancedmetadata.schedule.baseurl",
        "platform.enhancedmetadata.scheduleevents.baseurl",
        "platform.enhancedmetadata.search.baseurl",
        "platform.enhancedmetadata.serviceresolve.baseurl",
        "platform.enhancedmetadata.applicationresolve.baseurl",
        "platform.enhancedmetadata.suggestions.baseurl",
        "platform.enhancedmetadata.summaries.baseurl",
        "platform.enhancedmetadata.bootstrap.baseurl"
    };
    endpointLSRKey(lsrKeysInit, lsrKeysInit+14);
} 
```

然后得到

```
error: no match for call to '(std::__debug::vector<std::basic_string<char> >)
(const char* [14], const char**)' 
```

有人对此有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:50:27.987

这不是*初始化*：[`vector::assign()`](http://en.cppreference.com/w/cpp/container/vector/assign)改用：

```
endPointLSRKey.assign(lsrKeysInit, lsrKeysInit+14); 
```

计算 中的元素数量，`lsrKeysInit`而不是硬编码`14`（如果从 中删除或添加元素，则需要更新`lsrKeysInit`）：

```
endPointLSRKey
    .assign(lsrKeysInit, 
            lsrKeysInit + (sizeof(lsrKeysInit)/sizeof(lsrKeysInit[0]))); 
```

如果 C++11 支持，您可以使用[`std::begin()`](http://en.cppreference.com/w/cpp/iterator/begin)and [`std::end()`](http://en.cppreference.com/w/cpp/iterator/end)：

```
endPointLSRKey.assign(std::begin(lsrKeysInit), std::end(lsrKeysInit)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:51:44.277

您只能`variable(arguments...)`在初始化程序中使用表单（即在声明中）。分配给已经存在的变量时，请使用分配，或者在这种情况下使用`assign`：

```
endpointLSRKey.assign(lsrKeysInit, lsrKeysInit+14); 
```

# .net - 自动增加内部版本号

> ID：14276498
> 
> 赞同：4
> 
> 时间：2013-01-11T10:48:00.767
> 
> 标签：.net, msbuild, teamcity, versioning

我有两个解决方案。一个是版本 3.0.0.*，另一个是 2.0.0.*。我使用 MSBuild 脚本在 Team City 上构建我的解决方案。如何将版本字符串的内部版本号部分注入到 AssemblyVersion 属性中，而将major.minor.patch 保留为在开发时定义的。

换句话说，我想手动控制major.minor.patch（并且专业在解决方案中的库中会有所不同），但会自动增加内部版本号。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T16:09:23.240

TeamCity 将自动为您管理 AssemblyVersion 属性，但有一些注意事项：

1.  它将完全覆盖现有值。
2.  它将更新解决方案中的*所有*AssemblyVersions，因此如果您将不同的项目版本保留在同一解决方案中，这可能对您不起作用。

有了这些警告，以下是我们的设置方式：

*   在构建配置的*常规设置*`Build number format`中，将`%version%.{0}`
*   在您的*构建参数*中定义`%version%`为您的major.minor.patch。
*   在您的*Build Steps*中，滚动到屏幕底部并单击*Add Build Feature*。选择`AssemblyInfo patcher`。确保`Assembly version format`填写为`%build.number%`。

就是这样。TeamCity 会将您的所有程序集信息更新为由 %version% 和构建计数器定义的 major.minor.patch.build，然后在构建的最后一步自动恢复这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:01:19.603

您可以通过 $(BUILD_NUMBER) 在 msbuild 中使用 Teamcity 配置内部版本号。将您的 teambuild no 保留为默认的 {0}。我建议您使用它并通过您自己的自定义 msbuild 编辑两个程序集信息文件。您可以保留每个文件的标记化版本，以便版本文件在版本属性中包含 2.0.0.$(BUILD_NUMBER)，然后使用扩展包 detokenise 来转换两者（或任何数量的文件）。仍然认为您应该在两个项目上使用相同的版本控制...

# c# - 如何调试使用 File.Delete 和 Directory.Delete 删除目录的问题

> ID：14276501
> 
> 赞同：1
> 
> 时间：2013-01-11T10:48:01.563
> 
> 标签：c#, asp.net-mvc-3, debugging

事实证明，这很难调试。先从我的情况说起：

我有一个使用 .Net 4 使用 C# 开发的 ASP.Net MVC3 Web 应用程序。系统的一部分允许用户上传 zip 文件。这样做很好，并保存了 zip 文件。还有一个 Windows 服务会定期查找新的 zip 文件，解压缩它们，做一些工作，然后重新压缩它们。（我`System.IO.Compression`用于拉链的东西）。这部分一切正常，在处理后我最终得到了一个类似的结构。

```
Object1Folder
 \_ Input.zip
 \_ ExtractedFolder
 \_ Output.zip 
```

还有一个功能允许用户删除项目，要求是删除对象文件夹，在本例中为“Object1Folder”。因为我需要删除所有子文件夹和文件，所以我有以下递归函数来完成这项工作......

```
public static void DeleteDirectory(string directoryPath)
{
    string[] files = Directory.GetFiles(directoryPath);
    string[] directories = Directory.GetDirectories(directoryPath);

    foreach (string file in files)
    {
        File.SetAttributes(file, FileAttributes.Normal);
        File.Delete(file);
    }

    foreach (string directory in directories)
    {
        DeleteDirectory(directory);
    }

    Directory.Delete(directoryPath, true);
} 
```

最初被称为...

```
DeleteDirectory("C:\\Objects\\Object1Folder"); 
```

但它不起作用！首先，没有抛出错误，代码似乎成功执行，这很烦人。但结果是只删除了“Input.zip”文件。“ExtractedFolder”和“Output.zip”文件仍然存在。

据我所知，代码是正确的。我看不出它没有尝试删除剩余的文件和文件夹。不幸的是，我们没有在目标服务器上安装 VS，所以我无法单步执行代码并检查它是否试图删除它们。请指出您是否可以看到这是一个潜在的问题？

到目前为止，我最好的猜测是这是某种权限问题。有趣的是（也许）是当我去手动清理问题时（即Windows资源管理器删除“Object1Folder”它说“Denied”并要求我用管理员权限按钮确认它所做的事情。

我知道你们很难解决这个问题，但我正在寻找我应该检查的东西来尝试解决这个问题。我应该确保哪些事情具有正确的权限？他们需要什么权限？有什么好方法可以让我调试这个问题吗？如果其他东西持有这些文件（可能来自 Windows 服务的提取过程），我如何检查这是否是问题所在？

有关该服务器的一些信息可能会有所帮助：它正在运行带有 Service Pack 1 的“Windows Server 2008 R2 Datacenter”，并且是 64 位的。Web 应用程序分配了一个用户，该用户同时是“用户”和“IIS_IUSRS”的成员。

如果你们中的任何人需要一些额外的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:54:23.627

查看服务器上的事件日志；您可能会在那里找到异常\错误消息。

You could consider using `Directory.Delete(path, true)` so you delete the folder and all its content in one call (unless I do not understand your code correctly).

Have a look at files being in use. If a file is in use, the OS can't delete it. So make sure you are releasing all files correctly.

Finally, you can't force the files to be not in use so you might end up writing a clean script that runs every night to delete unwanted files and folders.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:53:45.440

You really should use a temp destination folder for your unpacked files. When they have been used you can try deleting them and if that fails just leave them. The permission to write to a non-temp folder should not really be given to a presentation app residing in the iis.

# c++ - 范围锁定如何工作？

> ID：14276508
> 
> 赞同：9
> 
> 时间：2013-01-11T10:48:18.707
> 
> 标签：c++

我正在学习 C++，我看到作用域锁的源代码非常简单。. 它是如何工作的，这是“资源获取即实例化”（RAII）的一个例子吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T10:53:10.100

这是说明作用域锁的小代码：

```
 void do_something()
 {
    //here in the constructor of scoped_lock, the mutex is locked, 
    //and a reference to it is kept in the object `lock` for future use
     scoped_lock lock(shared_mutex_obj);

    //here goes the critical section code

}//<---here : the object `lock` goes out of scope
 //that means, the destructor of scoped_lock will run.
 //in the destructor, the mutex is unlocked. 
```

阅读评论。这就解释了 scoped_lock 是如何工作的。

以下是`scoped_lock`通常的实现方式（最少的代码）：

```
class scoped_lock : noncopyable
{
     mutex_impl &_mtx; //keep ref to the mutex passed to the constructor
   public:
      scoped_lock(mutex_impl & mtx ) : _mtx(mtx) 
      { 
          _mtx.lock();  //lock the mutex in the constructor
      }
      ~scoped_lock() 
      { 
         _mtx.unlock(); //unlock the mutex in the constructor
      }
}; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-11T10:57:06.157

RAII (Resource Acquisition Is Initialisation) 的理念是创建一个对象并对其进行初始化，这些操作结合在一起成为一个不可分割的动作。这通常意味着它们在对象的构造函数中执行。

作用域锁的工作原理是在构造互斥锁时锁定互斥锁，并在销毁互斥锁​​时解锁。C++ 规则保证当控制流离开作用域时（甚至通过异常），正在退出的作用域的本地对象被正确地破坏。这意味着使用范围锁而不是手动调用`lock()`，并且不可能意外地不解锁互斥锁，例如，当在和`unlock()`之间的代码中间抛出异常时。`lock()``unlock()`

这个原则适用于所有获取需要释放的资源的场景，而不仅仅是锁定互斥锁。为具有类似语法的其他操作提供此类“范围保护”类是一种很好的做法。

例如，我最近研究了一个数据结构类，它通常在修改时发送信号，但是对于一些批量操作必须禁用这些。提供一个作用域保护类，在构造时禁用它们并在销毁时重新启用它们，防止对禁用/启用函数的潜在不平衡调用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T10:57:24.070

基本上它是这样工作的：

```
template <class Lockable>
class lock{
public:
    lock(Lockable & m) : mtx(m){
        mtx.lock();
    }
    ~lock(){
        mtx.unlock();
    }
private:
    Lockable & mtx;
}; 
```

如果你像这样使用它

```
int some_function_which_uses_mtx(){
    lock<std::mutex> lock(mtx);
    /* Work with a resource locked by mutex */
    if( some_condition())
        return 1;
    if( some_other_condition())
        return 1;
    function_witch_might_throw();
    return;
} 
```

您创建一个具有基于范围的生命周期的新对象。每当离开当前范围并且该锁被销毁时，它将自动调用`mtx.unlock()`. 请注意，在此特定示例中，互斥锁上的锁是由`lock`RAIII 的构造函数获取的。

如果没有范围保护，您将如何做到这一点？`mtx.unlock()`每当您离开该功能时，您都需要致电。这是a) 麻烦和b) 容易出错的。此外，您不能在没有范围保护的情况下在返回*后释放互斥锁。*

# android - How android decodes the Resources

> ID：14276512
> 
> 赞同：0
> 
> 时间：2013-01-11T10:48:28.843
> 
> 标签：android, animation, bitmap, size, decode

In the attempt of performing animation with large set of images, I tried with FrameAnimation but I found of outofmemory exception with large set of images, after some exploration for the solution I found one good solution [here](https://stackoverflow.com/questions/8692328/causing-outofmemoryerror-in-frame-by-frame-animation-in-android) Pinhassi's solution.
This one helps me to achieve animation but not smoothly because it taking a time to load the images. Then I decided to decode bitmap before starting the animation (giving bitmap instead of resID to ImageView). Through this I got smooth animation. But it is taking a time to decode the bitmap from the resources.

*Is there any better approach to do the same? Any suggestion would be appreciated.*

Details of the image

Total Number of images =30;

Image Dimension =1000x 720;

Size =180kb

Devices on which I am performing

Manufacture: Motorola

Model: MZ601

Android Version: 3.0

To decode Bitmap

```
 Bitmap mBitmap=BitmapFactory.decodeResource(getResources(),resID);
    int bitmapSize= mBitmap.getRowBytes()*mBitmap.getHeight()) 
```

The approximate bitmapSize values is 3000000 (might be it is in bytes) converting it to kilobytes 23437.5kb

Here original png file is 180kb but after decoding it, taking nearly 2MB of data. **Why?**

Is I am doing anything wrong in analyzing the size of bitmap?

If yes, then how to get the size of decode bitmap?

If no, then any one explain why it is taking large space?

Note: I don’t want to scale the bitmap since it is perfect to my device screen dimension which is (1280 x 752).

Thanks

In advance for valuable suggestions and solutions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:59:33.213

> 这里原始的 png 文件是 180kb，但解码后，需要将近 2MB 的数据。为什么？

假设每个像素 1 个字节，三个颜色通道 (RGB) 字节大小 = 3X(1000X720)/(1024*1024) = 2.05 MB 约。

这种处理可以通过简单的位图加载达到一个限制，这就是视频编解码器存在的原因。

# java - 带有挂毯的电子邮件的正则表达式

> ID：14276514
> 
> 赞同：1
> 
> 时间：2013-01-11T10:48:34.177
> 
> 标签：java, html, regex, tapestry

我在我的 Web 应用程序上使用 Tapestry 4。我有挂毯验证我的电子邮件地址字段。根据挂毯[文档](http://tapestry.apache.org/tapestry4.1/usersguide/validation.html)，它使用正则表达式来验证电子邮件地址

```
^\w[-._\w]*\w@\w[-._\w]*\w\.\w2,6$ 
```

但是，当我输入一个以或类似结尾的电子邮件地址时，`.cat`验证会发现一个错误，并且不会保存电子邮件地址。

有谁知道为什么会发生这种情况，因为我不熟悉正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:18:14.483

我认为您提到的文档可能与该示例存在一些问题。

该正则表达式的正确版本应该是（离给定的不远）

```
^\w[-._\w]*\w@\w[-._\w]*\w\.\w{2,6}$ 
```

最后一部分 ( `\w{2,6}`) 匹配（根据该正则表达式）应为 2 到 6 个字符的顶级域。

看看这个页面[regex101](http://regex101.com/)网站。试验你的正则表达式非常方便

# jquery - offset returns (0,0) in firefox 2

> ID：14276516
> 
> 赞同：1
> 
> 时间：2013-01-11T10:48:36.680
> 
> 标签：jquery, firefox

I'm currently building something that has to work in Firefox 2 as well as modern browsers. I'm using .offset() to get the coords for the position of various elements on the page and it works fine all browsers except Firefox 2 which returns (0,0) for all elements.

Here's an example.

```
<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="jquery-1.8.3.min.js"></script>

<style>

#page
{
    width:200px;
    background:#ff0000;
    margin:210px auto;
    padding:30px;
}

</style>

<script type="text/javascript">

$(document).ready(function () {
    var offset = $('#page').offset();
    alert('x = ' + offset.left + '\n' + 'y = ' + offset.top);
});

</script>

</head>
<body>

<div id="page">
hello
</div> 
```

Is this a bug in jQuery or should I create some kind of workaround?

Thanks

Russell

# proxy - Google Data API Client Libraries with proxy

> ID：14276520
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:48:49.703
> 
> 标签：proxy, google-calendar-api, gdata

I use java and gdata API to manage my Calendar's data. But it works only if I have direct access to the Internet. In my case I have to use proxy. Is there any way to manage my Google calendar's data through the proxy?

I'v tried this way:

```
System.setProperty("http.proxyHost", "myproxy.mydomain.com");
System.setProperty("http.proxyPort", "3128");
URL feedUrl = new URL("http://www.google.com/calendar/feeds/....");
CalendarService myService = new CalendarService("exampleCo-exampleApp-1");      

String encoded = new String(Base64.encodeBase64(new String("proxy_user:proxy_password").getBytes()));
String base64encodedCredentials = "Basic " + encoded;
myService.getRequestFactory().setPrivateHeader("Proxy-Authorization", base64encodedCredentials);

//!!! Exception in this line
myService.setUserCredentials("my_google_accaunt@gmail.com", "my_google_password"); 
```

Exception:

```
Exception in thread "main" com.google.gdata.util.AuthenticationException: Error connecting with login URI
    at com.google.gdata.client.GoogleAuthTokenFactory.getAuthToken(GoogleAuthTokenFactory.java:549)
    at com.google.gdata.client.GoogleAuthTokenFactory.setUserCredentials(GoogleAuthTokenFactory.java:397)
    at com.google.gdata.client.GoogleService.setUserCredentials(GoogleService.java:364)
    at com.google.gdata.client.GoogleService.setUserCredentials(GoogleService.java:319)
    at com.google.gdata.client.GoogleService.setUserCredentials(GoogleService.java:303)
    at calendartest.CalendarTest.getCalendarEventsWithProxy(CalendarTest.java:145)
    at calendartest.CalendarTest.main(CalendarTest.java:195)
Caused by: java.net.ConnectException: Connection timed out
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579) 
```

Without proxy everything works.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:44:22.713

您没有说您使用的是什么语言，但 Java 和 .Net# 的说明位于：

[https://developers.google.com/gdata/articles/proxy_setup](https://developers.google.com/gdata/articles/proxy_setup)

可以在以下位置找到 Python 的说明：

[http://code.google.com/p/gdatacopier/wiki/ProxySupport](http://code.google.com/p/gdatacopier/wiki/ProxySupport)（这些应该适用于任何使用 gdata-python-client 的应用程序）

# jquery - how can assign a jQuery value to a variable in a ftl file?

> ID：14276521
> 
> 赞同：1
> 
> 时间：2013-01-11T10:48:54.320
> 
> 标签：jquery, jquery-ui, freemarker

I am new to jQuery and ftl. The process I'm trying to achieve is to assign a checkbox value to a ftl variable. In my example the variable `selectedValues` contains the necessary value which is to be copied into an ftl variable. Passing jQuery values to an ftl variable is possible.

Here is the example code I tried with:

```
<script type="text/javascript">
$(document).ready(function () 
{
var selectedValues="";
$checkedCheckboxes = $("input:checkbox[name=numbers]:checked");
$checkedCheckboxes.each(function () {
selectedValues +=  $(this).val() +",";
});
alert(selectedValues);
});
</script>

    <#assign checkboxvalue=" ? "/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:01:49.397

这是不可能的，我很害怕。Freemarker 模板在服务器端进行评估。Java Script 在客户端进行评估。

# mysql - Uncommitted transactions in Plone + SqlAlchemy + MySql

> ID：14276522
> 
> 赞同：2
> 
> 时间：2013-01-11T10:49:02.507
> 
> 标签：mysql, sqlalchemy, plone, zope

We have a hybrid web application integrating a MySql db with Plone (last upgrade was to Plone 4.0), using collective.tin, collective.lead and SqlAlchemy.

Ok, I know that collective.tin never was released and collective.lead has been superseded; however all things work (almost) perfectly since a few years.

Recently we experienced a very strange behaviour and are looking for help in order to understand it.

Among others, we have 2 Plone content types, say A and B, defined by subclassing collective.tin, and the corresponding innodb MySql tables; rows of B have a foreign key towards A.

In the time span of 15-20 minutes, 2 different users created 3 A objects and some 10-20 B objects that weren't committed to MySql but were indexed by Plone; queries I executed with a MySql client from the linux shell weren't able to find those A rows (didn't look for B rows); however, queries executed through the web application (the aforementioned components stack) by those 2 users, and also by other users, occasionally were still finding and correctly visualizing some of those 3 A objects.

Only after I restarted the Zope instance, it was possible to resume normal activity from the Plone web interface; 3 A rows and many B rows were still missing from the MySql db, but the autoincrement counter showed the expected increment; I had to remove 3 invalid brains for A objects from the Plone index (didn't worry for B objects).

Any suggestion on possible causes and on how to investigate the problem?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:00:41.147

我们在使用 sqlalchemy 0.4 时遇到了完全相同的问题；会话将与实际的数据库内容不同步。在我们的案例中，这个问题在某种程度上被掩盖了，因为用户通过会话关联被发送到集群中的特定后端。如果亲和力突然消失，消息就会消失。确切的细节有点模糊，因为我无法找到我实施的修复程序的正确（古老）修订历史。

从我可以从上下文中收集到的是，会话身份映射阻止会话要求数据库获取它之前检索到的对象。因此，它不会看到在不同会话中对这些对象所做的更改。

`.expire_all()`解决方法是在每次提交或回滚后调用会话；SQLAlchemy 0.5 及更高版本会自动执行此操作（`autoexpire=True`在会话中，`expire_on_commit`我相信现在称为），但对于 0.4，您需要注册 a`SessionExtension`才能为您执行此操作。

幸运的是，我们也`collective.lead`用于这个项目，所以我的修复就是你的修复：

```
# The identity map should be flushed on commit.
# SQLAlchemy 0.5 does this properly, but in 0.4 we need to do this via
# a SesssionExtension.

from sqlalchemy import __version__
if __version__[:3] == '0.4':
    from sqlalchemy.orm.session import SessionExtension

    class ExpireAllSessionExtension(SessionExtension):
        def after_commit(self, session):
            """Expire the identity-map on commit"""
            session.expire_all()

        def after_rollback(self, session):
            """Expire the identity-map on rollback"""
            session.expire_all()

    def installExtension():
        # Patch collective.lead.database to let us install the extension
        # on the session created there.
        from collective.lead.database import Database
        old_session = Database.session.fget
        def session(self):
            session = old_session(self)
            if session.extension is None:
                session.extension = ExpireAllSessionExtension()
            return session
        Database.session = property(session)
else:
    def installExtension():
        pass 
```

定义映射器时，您可以使用以下方式安装此扩展：

```
from .sessionexpiration import installExtension

# Ensure that sessions get properly expired on commit and rollback.
installExtension() 
```

# leaflet - Click-through markers and polylines in Leaflet

> ID：14276527
> 
> 赞同：5
> 
> 时间：2013-01-11T10:49:20.157
> 
> 标签：leaflet

In Leaflet, is it possible to define a marker or polyline with {clickable:false}, so that a click is passed through to whatever lies beneath - be it the map or a clickable geometry object?

At the moment I solve this problem by making the marker/polyline clickable and passing the event onwards myself. But this leads to the mouse cursor always showing as the hand symbol. Ideally, the mouse cursor should look like the normal pointer or the hand, depending on whether what is beneath the marker/polyline is clickable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T06:47:56.290

这可能不是您正在寻找的答案，但您可以使用 featureGroups 让所有可点击的折线都出现在前面，以便显示操作。

```
var lg_noclick = new L.FeatureGroup().addTo(map);
var lg_click = new L.FeatureGroup().addTo(map);
// Add lines
lg_click.bringToFront(); 
```

更新[的小提琴](http://jsfiddle.net/dP9aG/32/)

此外，如果您有能力事先了解您的行，那么添加行时的正确顺序也将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T16:11:14.740

我知道这并不理想，但它很适合我的情况，所以它也可能对你有好处。

这会隐藏图标并在第二次使用`mouseenter`和`mouseleave`事件后将其恢复：

```
$('.leaflet-marker-icon').mouseenter(function() {
  $(this).hide();
});

$('.leaflet-marker-icon').mouseleave(function() {
  $(this).delay(1000).show(0);
}); 
```

# iphone - iphone 表格中的一些图像会自动旋转

> ID：14276537
> 
> 赞同：0
> 
> 时间：2013-01-11T10:49:38.950
> 
> 标签：iphone, uiimageview

我在相册表中有包含照片的数据库。我得到数组中的所有图像并显示在表格中。问题是很少有图像旋转 90 度。

这是 cellForRow 方法中的内容。

```
AlbumInformation * temp=[albumInfoArray objectAtIndex:indexPath.row];
cell.albumPicImageView.image=temp.albumPictureClass;
return cell; 
```

我得到所有图像，但很少旋转。

请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:39:24.863

请参考以下示例。在 PhotoDisplayViewController.m 测试中有以下两种情况，您将自动得到答案，无需任何人解释。

**案例 1：使用 UIImageOrientation**

```
ALAssetRepresentation *assetRepresentation = [asset defaultRepresentation];

    UIImage *fullScreenImage = [UIImage imageWithCGImage:[assetRepresentation fullScreenImage] scale:[assetRepresentation scale] orientation:(UIImageOrientation)[assetRepresentation orientation]]; 
```

**案例 2：没有 UIImageOrientation**

```
ALAssetRepresentation *assetRepresentation = [asset defaultRepresentation];

    UIImage *fullScreenImage = [UIImage imageWithCGImage:[assetRepresentation fullScreenImage] scale:[assetRepresentation scale] orientation:nil]; 
```

当您从断言中阅读时，有一些方向，例如以下

```
 UIImageOrientationUp,            // default orientation
    UIImageOrientationDown,          // 180 deg rotation
    UIImageOrientationLeft,          // 90 deg CCW
    UIImageOrientationRight,         // 90 deg CW
    UIImageOrientationUpMirrored,    // as above but image mirrored along other axis. horizontal flip
    UIImageOrientationDownMirrored,  // horizontal flip
    UIImageOrientationLeftMirrored,  // vertical flip
    UIImageOrientationRightMirrored, // vertical flip 
```

所以请**下载**通过这个示例演示

**[MyImagePicker 演示](https://developer.apple.com/library/ios/#samplecode/MyImagePicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010135)**

注意：如果要显示所有专辑，则需要更改 RootViewController.m 中的代码，如下所示

```
NSUInteger groupTypes = ALAssetsGroupAlbum | ALAssetsGroupEvent | ALAssetsGroupFaces|ALAssetsGroupLibrary|ALAssetsGroupSavedPhotos|ALAssetsGroupPhotoStream; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:41:51.010

UIImage 有一个分配属性“imageOrientation”；所以这个方法可以帮助你

*   (UIImage *)fixOrientation:(UIImage *)aImage {

    ```
    // No-op if the orientation is already correct  
    if (aImage.imageOrientation == UIImageOrientationUp)   
        return aImage;  

    // We need to calculate the proper transformation to make the image upright.  
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.  
    CGAffineTransform transform = CGAffineTransformIdentity;  

    switch (aImage.imageOrientation) {  
        case UIImageOrientationDown:  
        case UIImageOrientationDownMirrored:  
            transform = CGAffineTransformTranslate(transform, aImage.size.width, aImage.size.height);  
            transform = CGAffineTransformRotate(transform, M_PI);  
            break;  

        case UIImageOrientationLeft:  
        case UIImageOrientationLeftMirrored:  
            transform = CGAffineTransformTranslate(transform, aImage.size.width, 0);  
            transform = CGAffineTransformRotate(transform, M_PI_2);  
            break;  

        case UIImageOrientationRight:  
        case UIImageOrientationRightMirrored:  
            transform = CGAffineTransformTranslate(transform, 0, aImage.size.height);  
            transform = CGAffineTransformRotate(transform, -M_PI_2);  
            break;  
        default:  
            break;  
    }  

    switch (aImage.imageOrientation) {  
        case UIImageOrientationUpMirrored:  
        case UIImageOrientationDownMirrored:  
            transform = CGAffineTransformTranslate(transform, aImage.size.width, 0);  
            transform = CGAffineTransformScale(transform, -1, 1);  
            break;  

        case UIImageOrientationLeftMirrored:  
        case UIImageOrientationRightMirrored:  
            transform = CGAffineTransformTranslate(transform, aImage.size.height, 0);  
            transform = CGAffineTransformScale(transform, -1, 1);  
            break;  
        default:  
            break;  
    }  

    // Now we draw the underlying CGImage into a new context, applying the transform  
    // calculated above.  
    CGContextRef ctx = CGBitmapContextCreate(NULL, aImage.size.width, aImage.size.height,  
                                             CGImageGetBitsPerComponent(aImage.CGImage), 0,  
                                             CGImageGetColorSpace(aImage.CGImage),  
                                             CGImageGetBitmapInfo(aImage.CGImage));  
    CGContextConcatCTM(ctx, transform);  
    switch (aImage.imageOrientation) {  
        case UIImageOrientationLeft:  
        case UIImageOrientationLeftMirrored:  
        case UIImageOrientationRight:  
        case UIImageOrientationRightMirrored:  
            // Grr...  
            CGContextDrawImage(ctx, CGRectMake(0,0,aImage.size.height,aImage.size.width), aImage.CGImage);  
            break;  

        default:  
            CGContextDrawImage(ctx, CGRectMake(0,0,aImage.size.width,aImage.size.height), aImage.CGImage);  
            break;  
    }  

    // And now we just create a new UIImage from the drawing context  
    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);  
    UIImage *img = [UIImage imageWithCGImage:cgimg];  
    CGContextRelease(ctx);  
    CGImageRelease(cgimg);  
    return img; 
    ```

    }

# opengl - 自旋转和不同屏幕尺寸的矩阵乘法

> ID：14276543
> 
> 赞同：0
> 
> 时间：2013-01-11T10:49:51.123
> 
> 标签：opengl, opengl-es, opengl-es-2.0

无论您使用固定着色器管道还是可编程着色器管道，一个常见的顶点管道都包含此矩阵乘法（自定义编码或在幕后）：

```
Projection * Modelview * Position 
```

许多教程指出对象的旋转等项目应该进入`Modelview`矩阵。

我创建了一个基于度数的标准旋转矩阵函数，然后将 90 的适当倍数添加到度数参数中，以说明屏幕的自动旋转方向。作品。

对于不同的屏幕尺寸（屏幕的不同像素宽度和高度），我还可以在其中考虑一个`Scale`乘数，以便`Modelview`矩阵可以包含很多这些。

但是我决定的是一个更冗长的矩阵数学，因为我对这些东西不熟悉，我会很感激关于这是否聪明的反馈。

除了缩放和旋转等对象操作之外，我只需为屏幕尺寸缩放和屏幕方向添加独立矩阵。我最终得到了这个：

```
Projection * ScreenRotation * ScreenScale * Translate * Rotate * Scale * Position 
```

我发现其中一些是可互换的顺序，例如`Rotate`并且`Scale`可以切换。

这为我提供了更精细的代码控制和隔离，例如，我可以只专注于对象的旋转，而无需同时考虑屏幕的方向。

这是适当组织矩阵数学的常见或可接受的策略吗？它似乎工作正常，但这种冗长是否有任何陷阱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:08:25.257

这种冗长的主要问题是，如果在 GPU 上执行，它会浪费宝贵的计算周期。每个矩阵将作为统一提供，从而迫使 GPU 计算每个顶点，而它实际上是整个着色器中的常数。矩阵的好处是，单个矩阵可以容纳整个变换链，并且变换可以通过单个向量矩阵乘法来完成。

典型的段子

> ```
> Projection · Modelview · Position 
> ```

使用两个矩阵的原因在于，通常需要一个中间结果来`Modelview · Position`进行一些计算。从理论上讲，您可以将整个事情缩小到

> ```
> ProjectionViewModel · Position 
> ```

现在你提出这个矩阵表达式

> 投影 * ScreenRotation * ScreenScale * 平移 * 旋转 * 缩放 * 位置

呃……这整件事是不灵活的顶峰。你想要灵活性吗？这个东西是**刚性**的，如果你想对已经旋转的几何体应用一些不均匀的缩放怎么办。矩阵数学中的运算顺序很重要，您不能随意混合它们。假设您正在绘制一个球体

```
Rotate(45, 0, 0, 1) · Scale(1,2,1) · SphereVertex 
```

看起来完全不同

```
Scale(1,2,1) · Rotate(45, 0, 0, 1) · SphereVertex 
```

屏幕缩放和旋转可以而且应该直接应用于投影矩阵，不需要额外的矩阵。关键的理解是，您可以将**每个**线性变换链组合成一个矩阵。出于实际原因，您希望将屏幕像素纵横比应用作为链中的最后一步，并将屏幕旋转作为链中倒数第二步。

因此，您可以构建您的投影矩阵，而不是在着色器中，而是在您的显示例程框架设置代码中。假设你正在使用我的 linmath.h 它看起来像下面

```
mat4x4 projection;
mat4x4_set_identity(projection);
mat4x4_mul_scale_aniso(projection, …);
mat4x4_mul_rotate_Z(projection, …);
if(using_perspective)
    mat4x4_mul_frustum(projection, …);
else
    mat4x4_mul_ortho(projection, …); 
```

然后将生成的矩阵`projection`设置为统一的投影矩阵。

# windows - 适用于多个客户端的 Windows 8 自定义想象 - 请帮助？

> ID：14276546
> 
> 赞同：1
> 
> 时间：2013-01-11T10:49:56.237
> 
> 标签：windows, imaging, group-policy

如果有人可以帮助我们，我将不胜感激！

每周我们都有多台电脑分发给新客户。这些机器必须经过大量定制，有很多细节：

*   删除大多数额外的“垃圾邮件”应用程序——戴尔、华硕、宏碁添加了我们不想要的图标。
*   更改桌面背景
*   添加 2 个特定用户帐户，其中一个根据机器名称命名。
*   在新帐户上设置 2 个特定密码 - 特定于站点
*   为每个登录设置自定义图标
*   这些机器永远不会为域设置，因此不能轻松应用 Active Directory 技术。

数量和预算使得这些机器通常不是企业级设备，并且我们没有为大型 IT 公司使用的任何技术设置，例如组策略驱动的 MSI 更新等。

我们当前的流程是由驴驱动的。在 Windows 7 上，如果安装了 SQL Server，则部署一台完全安装了我们软件的新机器最多需要一个小时，否则需要 55 分钟。这是一项完全手动的工作，我渴望改革。由于机器品牌/型号每月都在变化，我不能依赖将要安装的内容。

我看过 Ghost，但它不起作用，因为每台机器都有自己的特定许可证密钥，而不是卷许可证。

这个过程困扰了我很长时间，但这不是我自己的部门要解决的；但是，在我可以大量部署软件包的学校工作过，当他们说这是完成这项工作的唯一方法时，我无法相信我的同事。

任何人都可以帮忙吗？我们已经在 Windows 7 和现在的 Windows 8 上做了很多谷歌舞来解决这个问题，但没有什么能完全符合我们所做的。

如果这不是这个问题的地方，道歉-我确实寻找了一个更特定于操作系统但没有看到的 Stack 站点！:)。

感谢您提供的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:40:19.703

这不是一件容易的事。我只能给你一个高层次的概述。

寻找 Microsoft 工具[SYSPREP](http://technet.microsoft.com/library/hh824816.aspx) - 使用它，您可以将之前安装的机器重置为您需要的所有软件和驱动程序，使其启动运行“迷你设置”（包括驱动程序发现）的状态。例子：

```
Sysprep /oobe /generalize /shutdown 
```

程序仍然安装。运行 sysprep 后关闭 PC 并使用 Ghost 或您选择的任何其他映像工具拍摄映像。

**笔记：**

*   **在使用 SYSPREP 之前，需要**使用[PNPU​​TIL](http://technet.microsoft.com/de-de/library/ff800798%28v=ws.10%29.aspx)注册目标硬件的所有**基本硬件驱动程序**，如芯片组、硬盘、cpu 等，否则准备和应用的映像会在目标 PC 上启动蓝屏。注册多于您需要的驱动程序并不会造成损害，因为 Windows 会检测到硬件并仅安装它需要的驱动程序。只需将所有驱动程序包放入 中，然后在命令窗口中运行以下命令即可将它们注册为即插即用（注意 using会安装它们，但在这里您只需要，它会宣传它们）。它将在包含文件的所有目录中递归运行：**`C:\drivers``-a -i``-a``*.inf`**

     **`for /f "tokens=*" %i in ('dir /b /s "C:\drivers\*.inf"') do pnputil -a %i`

    提示：如果将此命令放在批处理文件中，则需要`%%i`使用`%i`.** 
***   如果固件不包含供应商安装的 windows 密钥，您必须在“迷你设置”运行后激活 windows。关于**Windows 激活，我至少找到了一些信息，但**[这里](http://technet.microsoft.com/library/ff793432.aspx#EXX)没有太详细。**

 **这就是硬件供应商准备他们的 PC 的方式。

**您可以在Microsoft 的 TechNet**站点上找到很多有关它的信息，请查看：[交付和部署 Windows 8](http://technet.microsoft.com/en-us/windows/hh974336.aspx)

我希望这有帮助。**

# android - 以编程方式更改整个应用程序的文本颜色

> ID：14276550
> 
> 赞同：3
> 
> 时间：2013-01-11T10:50:08.050
> 
> 标签：android, android-layout, background-color

我想在 Java 中更改整个应用程序的颜色`text`和`background` **颜色**，这可能吗？有了这个，我的意思是改变应用程序中**每个**项目的颜色（**`TextViews, ListView`**项目，一切）。

这可能吗？

我尝试过使用定制样式，但我无法让它发挥作用。这是xml文件（放在`res/layout/values`文件夹中）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Light">
        <item name="android:textColor">#00FF00</item>
    </style>
</resources> 
```

假设我现在只想更改文本颜色。

现在我在我的应用程序中这样称呼这种风格：

```
public void onCreate(Bundle icicle) {

    Activity.setTheme(android.R.style.light);
    super.onCreate(icicle);
    setContentView(R.layout.main); 
```

但我得到了错误`light cannot be resolved or is not a field`。

## 更新：

我发现以编程方式执行此操作的一种方法是重新启动活动，调用

```
this.setTheme(R.style.Light);
onCreate(null); 
```

但是，这仅适用于当前活动，不适用于整个应用程序。如果可以启动**另一个**活动，而不仅仅是当前的活动，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:12:48.453

您正在以一种简单的方式尝试它。像这样，您只是在调整一般活动的背景，而不是所有不同的视图。

为了尝试调整每种类型的视图（按钮、TextView 等），您需要解决所有它们自己的样式以覆盖它们。

例如，如果您想调整 Button ，您需要以自己的一般风格：

```
 <item name="android:buttonStyle">@style/ButtonHoloDark</item> 
```

这将指向您自己的自定义样式，该样式从 Android 的标准 Button 获取其父级。

```
<style name="ButtonHoloDark" parent="android:style/Widget.Button">
    <item name="android:background">@drawable/btn_default_holo_dark</item>
    <item name="android:textColor">#ffffff</item>
</style> 
```

请注意，为每个视图执行此操作将带您获得相当多的主题和样式。

您可以在[HoloEverywhere 库](https://github.com/ChristopheVersieux/HoloEverywhere)中找到一个很好的示例，该库对于创建向后移植到 Android 2.2 左右的全息主题基本相同

最后，删除 Activity.setTheme(android.R.style.light); 东西，只需通过清单设置自己的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:19:50.417

好的，所以我找到了一种可能的解决方案，即使用意图和`putExtra`方法在活动之间传递主题信息。

第一个活动的代码（调用者）：

```
Intent i = new Intent(this, ActivityToCall.class);
i.putExtra("key", R.style.Light);
startActivity(i); 
```

第二个活动的代码（被调用的）：

```
public void onCreate(Bundle icicle) {
    int theme = getIntent().getIntExtra("key",-1);
    this.setTheme(theme);
    super.onCreate(icicle);
    // other code... 
```

我不知道这是否是最好的方法，但至少它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:16:14.987

您要更改的属性是：

```
<style name="AppTheme" parent="android:style/Theme.Holo">
   <item name="android:textColorPrimary">...</item>
   <item name="android:textColorSecondary">...</item>
</style> 
```

还有其他几种方法可以更改它们：[请参阅此信息](http://developer.android.com/reference/android/R.attr.html#textColor)

然后您可以通过 Manifest 或`setTheme(R.style.AppTheme)`在您的 Activity 中设置此主题`onCreate(...)`

# android - Android 将事件添加到日历

> ID：14276552
> 
> 赞同：1
> 
> 时间：2013-01-11T10:50:16.657
> 
> 标签：android, calendar

我想在我的 android 应用程序中放置一个按钮。当用户点击按钮时，它应该打开一个默认弹出屏幕，我们可以在其中输入 starttime ， endtime 等以将事件保存到个人日历。

我是 android 开发的新手，所以我无法在我的应用程序中打开那个弹出屏幕，任何人都可以帮我做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:53:46.927

```
Calendar cal = Calendar.getInstance();              
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", cal.getTimeInMillis());
intent.putExtra("allDay", true);
intent.putExtra("rrule", "FREQ=YEARLY");
intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
intent.putExtra("title", "A Test Event from android app");
startActivity(intent); 
```

额外的参数当然是可选的，它们只会在表单上填写一些初始值。您可以选择自己添加或删除它们。

我也不确定，但我认为您需要许可：

```
<uses-permission
   android:name="android.permission.WRITE_CALENDAR">
   </uses-permission> 
```

# javascript - 在网站中加载外国内容比 document.write() 更好的做法？

> ID：14276556
> 
> 赞同：1
> 
> 时间：2013-01-11T10:50:28.547
> 
> 标签：javascript, node.js, meteor, handlebars.js

我有一个小部件（一些 html 代码），应该可以在不同的网站（不受我控制）上加载，但小部件托管在我的服务器上。

到目前为止，我有一个 PHP 脚本生成 javascript 代码，看起来像这样：

```
document.write('<div> ... some more dynamic html ...</div>'); 
```

然后可以将其加载到带有该标签的任何 html 页面上。

现在我正在计划重新设计并想用服务器端的 javascript 来做 PHP 部分。我还需要输出 document.write() 还是现在有更聪明的方法，因为我们有handlebarjs、node.js 等。另外：我会对那些新的花哨的自动更新功能框架感兴趣，比如流星或德比提供...

（我想使用流星（meteor.com）来完成这项工作，但流星输出完整的 html 页面，我不需要整个页面）

感谢您的帮助/建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:01:16.300

> 现在我正在计划重新设计并想用服务器端的 javascript 来做 PHP 部分。我还需要输出吗`document.write()`

您必须输出一些会导致内容在客户端上呈现的内容。

客户端代码将或多或少独立于服务器端代码（尽管如果您开始使用[mojito](http://developer.yahoo.com/cocktails/mojito/)等工具，您可能会得到一些交叉。

> 还是现在有更聪明的方法，因为我们有 handlebarjs、node.js 等。

node.js 对你输出的内容没有帮助，因为它是一个服务器，修改页面的 JS 必须在浏览器中运行。

您*可以*使用像 handlebarjs 这样的模板语言。您*可以*使用库来帮助 DOM 操作。问题是您加载的代码越多（包括库），您就越有可能与嵌入您的代码的第三方网站使用的东西发生冲突，并且您制作的页面越重（并且页面重量大幅增加对于次要内容来说是一个特别糟糕的主意）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:55:01.203

当您想向现有的 HTML 文档添加新的 div 时，您应该通过将新的 HTML 元素插入到文档树中来实现。

```
// create a new div 
var newDiv = document.createElement('div');
// put some text into it
newDiv.innerHTML = 'Hello World!';
// the div won't be displayed yet, because it only exists as a  
// variable in limbo outside of the HTML document tree. We need
// to insert it into the document.
// First, we get the HTML node where it should be inserted
var parentDiv = document.getElementById('id_of_the_div_where_the_new_div_belongs_into');
// then we put it into that div
parentDiv.appendChild(newDiv); 
```

当您想在页面末尾插入 div 时（当脚本应该在您无法控制的许多不同页面上工作时很有用）您还可以插入 document.appendChild()。

当新的 div 不仅包含文本还包含其他 HTML 节点时，您还应该使用 document.createElement 创建这些节点，并使用 appendChild 将它们附加到新创建的 div 中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T10:55:03.610

看看这些：[document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)，[documentFragment](https://developer.mozilla.org/en-US/docs/DOM/DocumentFragment)

# java - Hadoop and hbase java client issues

> ID：14276563
> 
> 赞同：0
> 
> 时间：2013-01-11T10:51:01.167
> 
> 标签：java, hadoop, hbase

I am trying to insert the data into hbase. I have mentioned the code below.

```
try {
    Configuration conf = HBaseConfiguration.create();
    conf.clear();
    conf.set("hbase.zookeeper.quorum", "<HOST_IP>:2181");
    conf.set("hbase.zookeeper.property.clientPort", "2181");
    conf.set("hbase.zookeeper.dns.nameserver", "<HOST_IP>");
    conf.set("hbase.regionserver.port","60020");
    conf.set("hbase.master", "<HOST_IP>:9000");
    HTable table = new HTable(conf, "test");
    Put put = new Put(Bytes.toBytes("row5"));
    put.add(Bytes.toBytes("colfam1"), Bytes.toBytes("qual1"),
    Bytes.toBytes("val1"));
    put.add(Bytes.toBytes("colfam1"), Bytes.toBytes("qual2"),
    Bytes.toBytes("val2"));
    table.put(put);
} catch (MasterNotRunningException e) { 
    e.printStackTrace(); 
} catch (ZooKeeperConnectionException e) { 
    e.printStackTrace(); 
} catch (TableNotFoundException e) { 
    e.printStackTrace(); 
} catch (IOException e) { 
    e.printStackTrace();
} 
```

I am getting the following error

```
zookeeper.ClientCnxnSocket: Connected to an old server; r-o mode will be unavailable. 
```

From command prompt it is working fine, I am able to create table and add data into it. but when I tried "JPS" ,I got the following output:

```
15898 HRegionServer
15359 HMaster
14810 SecondaryNameNode
14616 DataNode
14909 JobTracker
15056 TaskTracker
15988 Jps
14487 NameNode
15302 HQuorumPeer 
```

# javascript - Handlebars.js 中的多个循环失败

> ID：14276564
> 
> 赞同：1
> 
> 时间：2013-01-11T10:51:02.320
> 
> 标签：javascript, handlebars.js, template-engine

在我的 Handlebars 模板中，我试图循环两次相同的数据，但在第二次循环中失败。这是我的模板的外观：

```
<div id="placeholder"></div>
<script type="text/x-handlebars" id="people-template">
  First loop:<br />
  <ul>
    {{#.}}
        <li>{{name}}</li>
    {{/.}}
  </ul>
  Second loop:<br />
  <ul>
    {{#.}}
        <li>{{name}}</li>
    {{/.}}
  </ul>
</script> 
```

这是 JavaScript：

```
var context= [
  { name: "John Doe", location: { city: "Chicago" } },
  { name: "Jane Doe", location: { city: "New York"}  }
];

var template = Handlebars.compile($("#people-template").text());
var html = template(context);
$('#placeholder').html(html); 
```

但是，它不会为第二个循环呈现任何内容：

```
First loop:
John Doe
Jane Doe
Second loop: 
```

我在这里为此创建了一个 jsFiddle：http: [//jsfiddle.net/G83Pk/](http://jsfiddle.net/G83Pk/)，甚至将其作为错误登录[https://github.com/wycats/handlebars.js/issues/408](https://github.com/wycats/handlebars.js/issues/408)。有谁知道如何解决这个问题或知道问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:56:25.963

据我所知，迭代数组的正确方法是通过[`each`块助手](http://handlebarsjs.com/#iteration)

您的模板将写为

```
<script type="text/x-handlebars" id="people-template">
  First loop:<br />
  <ul>
    {{#each .}}
        <li>{{name}}</li>
    {{/each}}
  </ul>
  Second loop:<br />
  <ul>
    {{#each .}}
        <li>{{name}}</li>
    {{/each}}
  </ul>
</script> 
```

更新的小提琴[http://jsfiddle.net/nikoshr/G83Pk/1/](http://jsfiddle.net/nikoshr/G83Pk/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:52:50.090

```
<div id="placeholder"></div>    

<script id="people-template" type="text/x-handlebars">
  First loop:<br />
  <ul>
    {{#each context}}
        <li>{{name}}</li>
    {{/each}}
  </ul>
  Second loop:<br />
  <ul>
    {{#each context}}
        <li>{{name}}</li>
    {{/each}}
  </ul>
</script>

<script type="text/javascript">
var template = Handlebars.compile($("#people-template").html());

var json = {
    "context": [
        { "name": "John Doe", "location": { "city": "Chicago" } },
        { "name": "Jane Doe", "location": { "city": "New York"} }
    ]
};

var html = template(json);
$('#placeholder').html(html);
</script> 
```

您需要更正迭代器以使用 each 块助手。并且您的上下文变量对于每个迭代器都是无效的输入。上面的代码是做你想做的事情的正确方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:21:23.610

不确定评论，但我在代码中遇到类似情况时遇到了非常奇怪的行为。

```
{{#with xxxxx}}
                               {{#each models}}
                                {{#with attributes}}
                                {{value}}                   ---- Worked here
                                {{/with}}
                                {{/each}}

                                {{#each models}}
                                {{#with attributes}}
                                {{value}}                   ---- Didn't Worked here
                                {{/with}}
                                {{/each}}

{{/with}} 
```

它适用于第一个循环，但不适用于第二个循环。最后我用一些奇怪的解决方案做了所有的场景。如果我在第二个循环的 {{#each models}} 末尾添加任何 Html 脚本或注释，那么第二个循环将重新获得其上下文并正确显示值。

所以这完美无缺。

```
{{#with xxxxx}}
                               {{#each models}}
                                {{#with attributes}}
                                {{value}}                   ---- Worked here
                                {{/with}}
                                {{/each}}

                                {{#each models}}   {{! Comment added }}
                                {{#with attributes}}
                                {{value}}                   ---- It works now.
                                {{/with}}
                                {{/each}}

{{/with}} 
```

# unit-testing - 如何对 Web API 调用方法进行单元测试

> ID：14276569
> 
> 赞同：1
> 
> 时间：2013-01-11T10:51:39.340
> 
> 标签：unit-testing, asp.net-mvc-4

我在存储库层中调用 Web Api 方法。任何人都可以建议如何使用 Mocking 进行测试

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T11:28:27.233

如果要模拟对 Web API 方法的调用，则必须抽象调用它的代码。

所以抽象它：

```
public interface IMyApi
{
    MyObject Get();
} 
```

然后您可以使用 HttpClient 调用实际 API 的此接口的特定实现：

```
public class MyApiHttp: IMyApi
{
    private readonly string baseApiUrl;
    public MyApiHttp(string baseApiUrl)
    {
        this.baseApiUrl = baseApiUrl;
    }

    public MyObject Get()
    {
        using (var client = new HttpClient())
        {
            client.BaseAddress = this.baseAddress;
            var response = client.GetAsync('/api/myobjects').Result; 
            return response.Content.ReadAsAsync<MyObject>().Result;
        }
    }
} 
```

现在您的存储库层将简单地将此抽象作为构造函数参数：

```
public class Repository: IRepository
{
    private readonly IMyApi myApi;
    public Repository(IMyApi myApi)
    {
        this.myApi = myApi;
    }

    public void SomeMethodThatYouWantToTest()
    {
        var result = this.myApi.Get();
        ...
    }
} 
```

接下来在您的单元测试中，使用您最喜欢的模拟框架模拟对 API 的访问是微不足道的。例如，您使用 NSubstitute 进行的单元测试可能如下所示：

```
// arrange
var myApiMock = Substitute.For<IMyApi>();
var sut = new Repository(myApiMock);
var myObject = new MyObject { Foo = "bar", Bar = "baz" };
myApiMock.Get().Returns(myObject);

// act
sut.SomeMethodThatYouWantToTest();

// assert
... 
```

# .net - 如何在 MSSQL 2008 中高精度存储价值？

> ID：14276571
> 
> 赞同：0
> 
> 时间：2013-01-11T10:51:45.103
> 
> 标签：.net, sql, sql-server

我在 VisualStudio 端有 Double 类型的值。

我需要将此值以浮点列类型存储在 MSSQL 2008 中。

问题是我的值的精度是该点后的十七位数字，

在 SQL 端，最后几位数字被剪切和四舍五入。

知道如何使 SQL 服务器保持原样（即不更改最后一位）吗？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:00:13.083

使用小数数据类型而不是浮点数。

这是一个例子

```
DECIMAL(30, 17) 
```

30 = 小数位数的最大总数

17 = 可以存储在小数点右侧的最大小数位数。

更多关于这个

[http://msdn.microsoft.com/en-us/library/aa258832(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258832(v=sql.80).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:20:34.640

.Net[`Double`](http://msdn.microsoft.com/en-gb/library/678hzkk9%28v=vs.110%29.aspx)和 MSSQL 服务器[`float`](http://msdn.microsoft.com/en-us/library/ms173773.aspx)是近似数值数据类型。

[它们提供了一种存储“真实”](http://en.wikipedia.org/wiki/Real_number)数字的有效方式。在内部，它们被存储为两个精确的二进制数，基数（matissa）和乘数（指数）。他们的精度根据这两个精确二进制数的相对大小而变化，尤其是尾数。使用这些[浮点数](http://en.wikipedia.org/wiki/Floating_point)的操作在现代处理器上进行了优化，尤其是 GPU。

At the small end of the number there is not a binary value for every real number in the range. When the respective ratios used to store the numbers differ, these gaps are interlaced and you get small rounding errors converting the numbers between ratios. With floating point numbers thats just the way it is. When floating point numbers are used to represent natural data a quintillionth either way doesn't make much difference.

If you really need the extra precision you should use the MSSQL [`decimal`](http://msdn.microsoft.com/en-us/library/ms187746.aspx) or [`numeric`](http://msdn.microsoft.com/en-us/library/ms187746.aspx) and the .Net [`Decimal`](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.110%29.aspx) type. However, they use more space and have lower performance than floating points.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:58:38.393

`FLOAT`不准确。为了获得高精度，您应该将它们作为[DECIMAL / NUMERIC](http://msdn.microsoft.com/en-us/library/ms187746%28v=sql.100%29.aspx)存储在数据库中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T11:01:35.430

您不会从 FLOAT 类型中获得精度，因为 float 是一种近似数据类型

> 用于浮点数值数据的近似数数据类型。浮点数据是近似的；因此，并非数据类型范围内的所有值都可以准确表示

你可以使用[十进制](http://msdn.microsoft.com/en-us/library/ms187746%28v=sql.100%29.aspx)。

# pip - PIP卸载显示包已卸载，但实际上不是

> ID：14276578
> 
> 赞同：1
> 
> 时间：2013-01-11T10:52:14.627
> 
> 标签：pip, openstack

我正在尝试使用`pip`. 问题是，当我运行时`pip uninstall python-keystoneclient`，它显示已成功卸载：

```
root@openstack1:~/cinder# pip uninstall python-keystoneclient
Uninstalling python-keystoneclient:
Proceed (y/n)? y
Successfully uninstalled python-keystoneclient 
```

但是当我做 a 时`pip search python-keystoneclient`，它显示：

```
root@openstack1:~/cinder# pip search python-keystoneclient
python-keystoneclient     - Client library for OpenStack Identity API
                        (Keystone)
INSTALLED: 0.2.1 (latest) 
```

我已尝试再次安装该软件包，但它显示`requirement already satisfied`. 不知道为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T20:57:22.540

很可能它是通过 PIP 不完全了解的包或机制安装在其他地方的。加上最后我听说，pip 卸载在简单的情况下工作，但很容易被愚弄并且在所有平台上并不完全一致。

我已经采取了类似的方法

```
python -c "import sys;import pprint;pprint.pprint(sys.path)" 
```

向我展示 python 可能在哪里找到它的模块 - 这将告诉你是否已经在 python 的系统路径中的某处留下了本地目录（在从目录执行“python setup.py develop”之后发生在我身上当我是root并且不注意时）。

您也可以使用类似的设置询问 keystoneclient 它是从哪里导入的，您可以使用它来查找和核对它：

```
python -c "import keystoneclient;print keystoneclient.__file__" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T02:45:27.720

您必须手动卸载 keystone-client。

在我的服务器上
`/usr/local/lib/python2.7/dist-packages/python_keystoneclient-0.3.2-py2.7.egg-info`（您的服务器上可能有不同的版本号）
下可以找到一个`installed-files.txt`文件，该文件记录了 keystone-client 安装的所有文件。

然后，删除它们以及 dist-packages 中的相关目录。

```
cat installed-files.txt | xargs sudo rm -rf
cd ..
sudo rm -rf keystoneclient python_keystoneclient-0.3.2-py2.7.egg-info 
```

现在，keystoneclient 已被完全卸载。

# browser - Sahi：无法在多个浏览器中执行记录在浏览器中的脚本

> ID：14276579
> 
> 赞同：2
> 
> 时间：2013-01-11T10:52:17.653
> 
> 标签：browser, hyperlink, cross-browser, sahi

我们的 Web 应用程序设计为从 CSS 中选择文本转换。一个网页上有多个链接；因此，我将以 Next 链接为例。

当我将鼠标悬停在 FF 中的 Next 链接上时，它会显示以下代码：_click(_link("Next"));

同样，当我将鼠标悬停在 Chrome 中的同一链接上时，它会显示以下代码：_click(_link("NEXT"));

当脚本在 FF 中记录并在 chrome 中执行时，它在该位置失败，因为“Next”链接不可用。这是链接的一个示例，有多个链接和多个页面。对于这种情况，我是否需要验证每个链接的文本，或者是否有一种通用的方法，即 toLowercase 方法可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:00:23.350

我认为，问题应该是 Sahi 如何通过忽略区分大小写来识别带有文本的元素。任何工具都只能记录当时浏览器上可用的属性。

您可以使用以下代码来实现该功能：

```
_click(_link("/Next/i")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:32:29.643

正如 Kshitij 指出的那样，您可以通过使用正则表达式作为访问器来实现这一点......但您也可以检查控制器中的 Alternatives 下拉菜单。也许有一个更适合两种浏览器的替代访问器。

# javascript - javascript浏览时如何选择文件夹

> ID：14276582
> 
> 赞同：-3
> 
> 时间：2013-01-11T10:52:31.773
> 
> 标签：javascript, html

我想在浏览时选择一个文件夹，我已经实现了

```
<input name="name" type="file"/> 
```

有了这个我可以选择一个文件，但我想选择一个文件夹，谁能帮我.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:55:21.283

据我了解，您只能在浏览器中选择单个文件而不是文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:58:54.100

从“HTML5”开始，只要您使用的行器支持这一点，就可以通过添加输入元素“multiple”-attribute 来启用多个文件选择：

```
<input type="file" multiple> 
```

但是，您无法使用 JavaScript 选择完整的文件夹

# java - 点击设置时动态壁纸崩溃

> ID：14276583
> 
> 赞同：0
> 
> 时间：2013-01-11T10:52:32.973
> 
> 标签：java, android, crash, live-wallpaper

总是当我点击动态壁纸选择器中的*设置...*按钮时，它会停止。然后也停止我的动态壁纸。

![在此处输入图像描述](../Images/3bcbc7d50a667cc681fd4972e6fa6543.png)

你能帮助我吗？

**壁纸.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<wallpaper xmlns:android="http://schemas.android.com/apk/res/android"
android:thumbnail="@drawable/ic_bubbles"
android:name="@string/app_name"
android:description="@string/app_name"
android:settingsActivity="com.chovanec.bubbles.Settings_activity"/> 
```

**Settings_activity.java**

```
package com.chovanec.bubbles;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

public class Settings_activity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d("activity onCreate", "");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings_layout);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        return true;
    }
} 
```

**settings_layout.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Hello, world!"
        tools:context=".Settings_activity" />

</RelativeLayout> 
```

**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.chovanec.bubbles"
    android:versionCode="3"
    android:versionName="1.2">

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />

    <application android:label="@string/app_name"
        android:icon="@drawable/ic_bubbles"
        android:theme="@style/AppTheme">

        <service android:label="Bubbles by MCh"
        android:name="Bubbles"
        android:permission="android.permission.BIND_WALLPAPER">

            <intent-filter>
                <action android:name="android.service.wallpaper.WallpaperService" />
            </intent-filter>

            <meta-data android:name="android.service.wallpaper"
            android:resource="@xml/wallpaper" />

        </service>

    </application>

    <uses-feature android:name="android.software.live_wallpaper" />
</manifest> 
```

**这里的LogCat** 是 logcat

```
01-11 10:57:37.990: E/Trace(1960): error opening trace file: No such file or directory (2)
01-11 10:57:38.150: D/gralloc_goldfish(1960): Emulator without GPU emulation detected.
01-11 10:57:57.801: E/SurfaceTextureClient(1960): queueBuffer: error queuing buffer to SurfaceTexture, -19
01-11 10:57:57.801: E/SurfaceTextureClient(1960): queueBuffer (handle=0x2a1099b0) failed (No such device)
01-11 10:57:57.801: D/AndroidRuntime(1960): Shutting down VM
01-11 10:57:57.801: W/dalvikvm(1960): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-11 10:57:57.940: E/AndroidRuntime(1960): FATAL EXCEPTION: main
01-11 10:57:57.940: E/AndroidRuntime(1960): java.lang.IllegalArgumentException
01-11 10:57:57.940: E/AndroidRuntime(1960):     at android.view.Surface.unlockCanvasAndPost(Native Method)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at com.android.internal.view.BaseSurfaceHolder.unlockCanvasAndPost(BaseSurfaceHolder.java:215)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at com.chovanec.bubbles.Bubbles$BubblesEngine.draw(Bubbles.java:116)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at com.chovanec.bubbles.Bubbles$BubblesEngine.access$0(Bubbles.java:68)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at com.chovanec.bubbles.Bubbles$BubblesEngine$1.run(Bubbles.java:50)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at android.os.Handler.handleCallback(Handler.java:615)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at android.os.Looper.loop(Looper.java:137)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at java.lang.reflect.Method.invokeNative(Native Method)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at java.lang.reflect.Method.invoke(Method.java:511)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-11 10:57:57.940: E/AndroidRuntime(1960):     at dalvik.system.NativeStart.main(Native Method)
01-11 10:58:00.360: I/Process(1960): Sending signal. PID: 1960 SIG: 9
01-11 10:58:05.590: E/Trace(1994): error opening trace file: No such file or directory (2)
01-11 10:58:05.920: D/gralloc_goldfish(1994): Emulator without GPU emulation detected.
01-11 10:58:32.749: D/dalvikvm(1994): GC_CONCURRENT freed 47K, 2% free 8356K/8455K, paused 73ms+42ms, total 271ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:11:54.410

需要申报您的活动`manfiest.xml`

```
 <activity
        android:name=".Settings_activity"
        android:configChanges="keyboardHidden|orientation"
        android:exported="true" /> 
```

# android - 如何扫描未格式化的 NFC 标签

> ID：14276584
> 
> 赞同：1
> 
> 时间：2013-01-11T10:52:37.013
> 
> 标签：android, android-intent, nfc, intentfilter

我有一个应用程序可以扫描 NFC 标签以从有效负载中获取信息，然后通过 Web 服务将该信息发送到服务器。它工作正常。标签是 Mifare。在我加入公司之前，系统的移动部分是用 J2me 为诺基亚 c700 编写的。我已经在 Android 中重新编写了系统。Android 应用可以获取标签 ID 并读取有效负载。如果没有有效负载，那么它只会读取标签 ID，这很好。

问题是当我扫描尚未格式化的标签时，我无法获取 tagID。nokias 上的旧系统可以从未**格式化**的标签中读取标签 ID 。我如何在 Android 中做到这一点？为什么标签必须格式化？

提前致谢。

[编辑]

```
if( intentAction.equalsIgnoreCase(NFC_ACTION)){

             nfcScanTimeFromDB = null;

            cursor = nfcscannerapplication.loginValidate.getLastTagFromTransations();

            if (cursor.getCount() > 0) {
                if (cursor.moveToLast()) {

                    _tagScanTime = cursor.getLong(cursor
                            .getColumnIndex(LoginValidate.C_TAG_SCAN_TIME));

                    nfcScanTimeFromDB = new DateTime(_tagScanTime);

                }
            }

            if(cursor.getCount() == 0){
                //DB must be empty
                Log.e(TAG, "just scanned an nfc tag and DB must be empty");
                Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

                tagId = bytesToHexString(tag.getId());
                Log.e(TAG, "tagId immediately after scanning nfc tag = " + tagId);

                if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {

                    Log.e(TAG, "NFC Tag scanned");

                    // get the messages from the intent
                    Parcelable[] rawMsgs = intent
                            .getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
                    if (rawMsgs != null) {
                        msgs = new NdefMessage[rawMsgs.length];
                        for (int i = 0; i < rawMsgs.length; i++) {
                            msgs[i] = (NdefMessage) rawMsgs[i];
                        }
                    }
                } else {
                    Log.e(TAG, "ndef not discovered!!!!!!");
                }

                 Cursor c = nfcscannerapplication.loginValidate.queryAllFromCarer();

                  if(c.getCount() == 0){

                      Toast.makeText(this, "Please login before signing in",
                                Toast.LENGTH_LONG).show();
                      Intent intent = new Intent(NfcscannerActivity.this, EntryActivity.class);
                      startActivity(intent);
                  }else{
                      c.moveToLast();
                      tagPerson = c.getString(c.getColumnIndex(LoginValidate.C_CARER_ID));
                  }

                // process the msgs array
                for (int i = 0; i < msgs.length; i++) {

                    NdefRecord[] records = msgs[i].getRecords();
                    Log.e(TAG, "ndefrecord has a length of " + records.length);

                    tr = parse(records[i]);
                    payload = tr.getText();

                    Log.e(TAG, "TextRecord.text = " + tr.getText());

                }

                if(payload.length() == 0){

                    tagType = "1";
                    tagCompany = c.getString(c.getColumnIndex(LoginValidate.C_COMP_ID));
                    tagPerson = tagId;//c.getString(c.getColumnIndex(LoginValidate.C_CARER_ID));
                    tagUserName = tagId;
                    tagLatitude = "0.0000000";
                    tagLongitude = "0.0000000"; 

                    if(rotasOnly.trim().equalsIgnoreCase("false")){
                         processinfo();
                    }
                }else{

                // /////////////////////////////////////////////////// split the payload
                // using delimiter. assign value at position[0] to tagType
                String[] splitPayload = payload.split(",");

                tagType = splitPayload[0];
                //tagCompany = splitPayload[1];

                c.moveToLast();
                tagCompany = c.getString(c.getColumnIndex(LoginValidate.C_COMP_ID));

                if(splitPayload[2].length() == 0 || splitPayload[2] == null || splitPayload[2].trim().equalsIgnoreCase("0")){

                    tagPerson = c.getString(c.getColumnIndex(LoginValidate.C_CARER_ID));

                }else{

                tagPerson = splitPayload[2];

                }

                tagUserName = splitPayload[3];
                tagLatitude = "0.0000000";
                tagLongitude = "0.0000000"; 

                if(rotasOnly.trim().equalsIgnoreCase("false")){
                     processinfo();

                }else{
                    Log.e(TAG, "cant process tag because of company option 160 rotas only");
                }

                }   

            }else{

            //DB not empty///////////////////

            DateTime nfcScanTimeMinustagTouchInterval = new DateTime();
            nfcScanTimeMinustagTouchInterval.minusMinutes(Integer.parseInt(tagTouchInterval));

//          AudioManager audioManager = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
//          // For example to set the volume of played media to maximum.
//          audioManager.setStreamVolume (AudioManager.STREAM_MUSIC, 
//                        audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC),0);
//          MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.meep2); 
//          mediaPlayer.start();
            //mediaPlayer.release();
            //mediaPlayer = null; 

        Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

        tagId = bytesToHexString(tag.getId());
        Log.e(TAG, "tagId immediately after scanning nfc tag = " + tagId);

        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {

            Log.e(TAG, "NFC Tag scanned");

            // get the messages from the intent
            Parcelable[] rawMsgs = intent
                    .getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
            if (rawMsgs != null) {
                msgs = new NdefMessage[rawMsgs.length];
                for (int i = 0; i < rawMsgs.length; i++) {
                    msgs[i] = (NdefMessage) rawMsgs[i];
                }
            }
        } else {
            Log.e(TAG, "ndef not discovered!!!!!!");
        }

         Cursor c = nfcscannerapplication.loginValidate.queryAllFromCarer();

          if(c.getCount() == 0){

              Toast.makeText(this, "Please login before signing in",
                        Toast.LENGTH_LONG).show();
              Intent intent = new Intent(NfcscannerActivity.this, EntryActivity.class);
              startActivity(intent);
          }else{
              c.moveToLast();
              tagPerson = c.getString(c.getColumnIndex(LoginValidate.C_CARER_ID));
          }

        // process the msgs array
        for (int i = 0; i < msgs.length; i++) {

            NdefRecord[] records = msgs[i].getRecords();
            Log.e(TAG, "ndefrecord has a length of " + records.length);

            tr = parse(records[i]);
            payload = tr.getText();

            Log.e(TAG, "TextRecord.text = " + tr.getText());
            Log.e(TAG, "payload len = " + payload.length() + " so must be a blank formatted tag!");

        }

        if(payload.length() == 0){

            tagType = "1";
            tagCompany = c.getString(c.getColumnIndex(LoginValidate.C_COMP_ID));
            tagPerson = tagId;//c.getString(c.getColumnIndex(LoginValidate.C_CARER_ID));
            tagUserName = tagId;
            tagLatitude = "0.0000000";
            tagLongitude = "0.0000000"; 

            if(rotasOnly.trim().equalsIgnoreCase("false")){
                 processinfo();
            }
        }else{

        // /////////////////////////////////////////////////// split the payload
        // using delimiter. assign value at position[0] to tagType
        String[] splitPayload = payload.split(",");

        tagType = splitPayload[0];
        //tagCompany = splitPayload[1];
        tagCompany = c.getString(c.getColumnIndex(LoginValidate.C_COMP_ID));

        if(splitPayload[2].length() == 0 || splitPayload[2] == null || splitPayload[2].trim().equalsIgnoreCase("0")){

            tagPerson = c.getString(c.getColumnIndex(LoginValidate.C_CARER_ID));

        }else{

        tagPerson = splitPayload[2];

        }

        tagUserName = splitPayload[3];
        tagLatitude = "0.0000000";
        tagLongitude = "0.0000000"; 

        if(rotasOnly.trim().equalsIgnoreCase("false")){
             processinfo();
        }else{
            Log.e(TAG, "cant process tag because of company option 160 rotas only");
        }

        }   

            }//finished processing tag with a NONE empty DB

        } 
```

[编辑2]

```
if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(getIntent().getAction())) {
                  Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
                  byte[] tagIdbyteArray = tag.getId();
                  Log.e(TAG, "unformatted tag found with a tagID of " + tagIdbyteArray);
                } 
```

[编辑3]

```
<activity
            android:name=".NfcscannerActivity"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="text/plain" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.carefreegroup.QRCODE_ACTION" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="text/plain" />
            </intent-filter>

            <intent-filter>
            <action android:name="android.nfc.action.TECH_DISCOVERED"/>
            </intent-filter> 

            <meta-data android:name="android.nfc.action.TECH_DISCOVERED"
                       android:resource="@xml/nfc_tech_filter" />

        </activity> 
```

.

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
  <tech-list>
      <tech>android.nfc.tech.IsoDep</tech>
        <tech>android.nfc.tech.NfcA</tech>
        <tech>android.nfc.tech.NfcB</tech>
        <tech>android.nfc.tech.NfcF</tech>
        <tech>android.nfc.tech.NfcV</tech>
        <tech>android.nfc.tech.Ndef</tech>
        <tech>android.nfc.tech.NdefFormatable</tech>
    <tech>android.nfc.tech.MifareClassic</tech>
    <tech>android.nfc.tech.MifareUltralight</tech>
  </tech-list>
</resources> 
```

.

```
if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(getIntent().getAction())) {
                  Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
                  byte[] tagIdbyteArray = tag.getId();
                  Log.e(TAG, "unformatted tag found with a tagID of " + tagIdbyteArray);
                } 
```

[编辑 4]

```
01-21 09:27:35.180: D/NativeNfcTag(512): Connect Failed - status = 146
01-21 09:27:35.180: E/NFC JNI(512): doDisconnect() - Target already disconnected 
```

[编辑5]

```
01-21 10:07:25.420: E/NfcService(512): No tag fallback activity found for Intent { act=android.nfc.action.TAG_DISCOVERED (has extras) } 
```

[编辑6]

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
  <tech-list>

    <tech>android.nfc.tech.MifareUltralight</tech>
  </tech-list>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:29:46.440

如果 MIFARE Classic 标签未格式化为包含 NDEF，您可以按如下方式接收它们的意图（并获取 ID）（来自[文档](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#tech-disc)）：

为需要接收意图的活动添加清单：

```
<activity>
  ...
  <intent-filter>
    <action android:name="android.nfc.action.TECH_DISCOVERED"/>
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter>

  <meta-data android:name="android.nfc.action.TECH_DISCOVERED"
    android:resource="@xml/nfc_tech_filter" />
  ...
</activity> 
```

创建一个新文件`<project-root>/res/xml/nfc_tech_filter.xml`，其中包含：

```
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
  <tech-list>
    <tech>android.nfc.tech.MifareClassic</tech>
  </tech-list>
  <tech-list>
    <tech>android.nfc.tech.MifareUltralight</tech>
  </tech-list>
</resources> 
```

在您的活动中，在某个合适的地方，添加：

```
if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(getIntent().getAction())) {
  Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
  byte[] tagId = tag.getId();
} 
```

# c# - C# webservices 维护来自另一个 web 服务的会话

> ID：14276585
> 
> 赞同：1
> 
> 时间：2013-01-11T10:52:39.770
> 
> 标签：c#, asp.net, session

我有一个包含汽车零件的网上商店。零件旁边的价格是从在其他地方运行的 Web 服务加载的。此 Web 服务仅包含一个 Web 方法：**GetArticleInformation**。

在这个网络服务中，有一个链接到另一个在其他地方运行的**网络服务 WebshopServiceClient**，其中包含有关汽车的信息并保存价格。

现在，当用户选择他想要购买的车辆的一部分时，调用第一个 Web 服务并执行**GetArticleInformation**方法。在这种方法中，我想创建一个会话来保存第二个 Web 服务（数据库）的登录。通过这种方式，我想防止每次呼叫都需要新的登录。

```
[WebMethod(EnableSession = true)]
public GetBackItems GetArticleInformation(User user, Items items) 
{
    //Create session if needed
    client = (WebshopServiceClient)Session["SphinxLogon"];
    if (client == null)
    {
        client = new WebshopServiceClient();
        bool done = client.Logon();

        if (done)
        {
             Session["SphinxLogon"] = client;
        }
    }

    //Get information and send it back
    ...
} 
```

现在，当网店中的用户选择一个部件时，会创建会话，但下次用户选择一个部件时，会话再次为空。

我做错了什么或我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:09:20.030

我会考虑通过内部“代理”程序与各种网络服务“交谈”——例如，在应用程序启动时启动——这将处理所有流量等服务。这样，各个客户端会话就不必登录或维护与服务的会话，但仍然可以通过代理进行管理。个别客户会从代理那里得到一张“票”，然后它可以成为他们会话的一部分，并可以用来管理它。

# c++ - Visual Studio 2010 x64 中的地图运行时错误

> ID：14276586
> 
> 赞同：0
> 
> 时间：2013-01-11T10:52:50.867
> 
> 标签：c++, map

我一直在尝试在 Visual Studio 2010 中创建一个示例应用程序。由于代码正在完美编译，我没有得到什么问题，但是给出了运行时错误。这是代码：

```
#include <Map>
#include <string>
#include <sstream>
#include <iostream>
#include <fstream>

using namespace std;

int main(int argc, char* argv[])
{
    map <int, string> *sss = new map<int, string>;
    sss->at(0) = "Jan";
    sss->at(1) = "Feb";
    sss->at(2) = "Mar";
    sss->at(3) = "Apr";
    sss->at(4) = "May";
    sss->at(5) = "Jun";
    string current = NULL;
    ofstream myfile;
    myfile.open("daily_work.txt");
    myfile << "*****   DAILY WORK   *****" << endl;

    for(int i = 0; i < 6; i++)
    {
        string month = sss->at(i);
        for(int j = 1; j < 31; j++)
        {
            stringstream ss;
            ss << j;
            current = ss.str();
            current.append(" ");
            current.append(month);
            current.append(" = ");
            myfile << current << endl;
        }

        current = "";
    }

    printf("Completed!");
    myfile.close();
    sss->clear();
    delete sss;
    sss = NULL;
    return 0;
} 
```

错误在 main 的第 2 行抛出。

```
sss->at(0) = "Jan"; 
```

请在此处查找错误：

![在此处输入图像描述](../Images/6621e926d8af9c2d05a18c89eb882cd2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:55:40.473

来自[http://en.cppreference.com/w/cpp/container/map/at](http://en.cppreference.com/w/cpp/container/map/at)：

```
Returns a reference to the mapped value of the element with key equivalent to key.
If no  such element exists, an exception of type std::out_of_range is thrown. 
```

你需要：

```
map <int, string> sss;
sss[ 0 ] = "Jan"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:55:45.130

这是因为该`at`函数期望该条目已经存在，但事实并非如此。

`[]`如果条目不存在，您可以使用普通索引运算符创建条目。但为此我建议您不要使用`new`分配`map`指针。

```
map <int, string> sss;

sss[0] = "Jan";
// etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:57:23.293

方法`map.at`确实访问了元素 0。您刚刚创建了地图，因此元素 0 为空。使用`insert`并阅读有关地图的文档。

[c++参考图](http://en.cppreference.com/w/cpp/container/map)

我建议你也避免`for 1 ... 6`，迭代器是循环地图的首选方式。这样，如果您将元素添加到地图中，则不需要其他任何内容，循环将自动调整自己。

使用此示例：

```
typedef std::map<int, string>::iterator it_type;
for(it_type iterator = map.begin(); iterator != map.end(); iterator++) {
    // iterator->first = key
    // iterator->second = value
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T10:58:11.947

map::at 需要现有元素的索引。要创建一个新元素，请使用 operator[]：

```
sss[0] = "Jan";
sss[1] = "Feb";
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T11:13:22.183

以前的答案已经解释了这个问题，但是看到你似乎是如何编译 C++11（使用[`at()`](http://www.cplusplus.com/reference/map/map/at/)）为什么不使用新的初始化列表方式：

```
auto sss = new map<int, string> = {
    {0, "Jan"}, 
    {1, "Feb"},
    {2, "Mar"},
    {3, "Apr"},
    {4, "May"},
    {5, "Jun"},
}; 
```

顺便说一句，您可以通过根本不使用该变量来更整洁地构建输出字符串`currrent`，只需更多地使用您的 stringstring 对象。

```
stringstream ss;
ss << j << " " << month << " = \n");
myfile << ss.str(); 
```

# http - 无法分配请求的地址：make_sock：无法绑定到地址

> ID：14276589
> 
> 赞同：3
> 
> 时间：2013-01-11T10:52:58.643
> 
> 标签：http, webserver, apache

以前我的 IP 是 10.0.6.63 ，apache 服务器工作正常。

重新启动时 DHCP 将我的 IP 地址更改为 10.0.15.12 现在，当我尝试启动 apache 时，它​​给了我以下错误

```
$service httpd restart 
```

开始 httpd：[Fri Jan 11 16:17:28 2013] [warn] 模块 wsgi_module 已加载，正在跳过（99）无法分配请求的地址：make_sock：无法绑定到地址 10.0.6.63:80 没有可用的侦听套接字，正在关闭down 无法打开日志

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:58:28.967

如果您正在使用移动 IP 地址，请不要使用**基于 IP 的虚拟主机**，而是使用基于**命名的**虚拟主机。

检查这个[apache 文档链接](http://httpd.apache.org/docs/current/vhosts/name-based.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:14:07.253

已解决：对不起，伙计们，错误。我在 /etc 中有另一个配置，它覆盖了本地配置。这是为旧IP配置的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-19T18:35:55.463

在 /etc/httpd/conf.d/ssl.conf 文件中：

```
#LoadModule ssl_module modules/mod_ssl.so 
#Listen 443 
```

注释掉这些行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T09:13:38.200

我认为您可以检查 httpd.conf（默认配置文件名）配置文件。

```
#Listen 12.34.56.78:80 
```

你可以改变你的服务器IP地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-05T23:27:57.860

我有一个类似的问题。

我通过禁用或注释掉`Listen 192.168.1.80:80`.`/etc/httpd/conf.d/ssl.conf`

我在 Centos 5.11 上运行 Virtualmin

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-02T12:15:18.357

我在使用 apache 时遇到了类似的问题，但是当我检查时，我明白了，我的服务器尝试绑定的特定 IP 地址不存在，因为当我的机器重新启动时，该接口已被删除。我做了以下事情：

1.  运行`dhclient`获取接口和IP
2.  给定命令来创建我为我的 apache 服务器创建的子接口来监听： `ifconfig ens6:1 10.10.0.80/16 up`

# json - 如果 maven 依赖项设置为提供，Jboss 7.1.1 中将忽略 Jackson @JsonSerialize

> ID：14276596
> 
> 赞同：9
> 
> 时间：2013-01-11T10:53:15.293
> 
> 标签：json, jboss, jackson, jax-rs, java-ee-6

我在 JBoss 7.1.1 的 WAR 存档中部署了 Jax-rs 端点。在它的 JSON 响应中，我不希望`null`包含我的字段名称，所以我放`@JsonSerialize`了它。

```
class MyResponse {

    private Long id;

    @JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)
    private String name;

    private List<String> addresses;

    // getters and setters
} 
```

我`pom.xml`的有以下

```
 <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.3.2.Final</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>2.3.2.Final</version>
        <scope>provided</scope>
    </dependency> 
```

当`scope`for`resteasy-jackson-provider`设置为时，`provided`它会忽略注释并`null`在 JSON 响应中返回。但是，当我`scope`从 Maven 依赖项中删除时-它可以工作。

从这里的页面[https://docs.jboss.org/author/display/AS71/Implicit+module+dependencies+for+deployments](https://docs.jboss.org/author/display/AS71/Implicit+module+dependencies+for+deployments)如果发现 Jax-RS 部署，JBoss 应该自动加载此模块。

现在我不知道这是否是一个错误，我是否真的应该包含这个依赖项（不保留它`provided`）。或者也许我在那里做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T09:18:13.433

您需要确保创建一个 JBoss 部署结构描述符。

由于这是一个 Maven 项目，我假设它位于 src/main/webapp/WEB-INF/jboss-deployment-structure.xml 下

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
  <deployment>
    <dependencies>
      <module name="org.codehaus.jackson.jackson-core-asl" />
      <module name="org.codehaus.jackson.jackson-mapper-asl" />
    </dependencies>
  </deployment>
</jboss-deployment-structure> 
```

这将允许对 RESTEasy 和 Jackson 的内置支持在 JBoss 7.1.x 或 JBoss EAP 6.x 中正常工作。如果没有这个描述符，RESTEasy 将使用 Jettison 提供程序。

# mysql - 用mysql连接5个表

> ID：14276597
> 
> 赞同：0
> 
> 时间：2013-01-11T10:53:16.310
> 
> 标签：mysql, join

我正在尝试构建一个查询来检索我，对于每个帖子，其各自的图像、评论、喜欢和收藏的数量。所有这些数据都在单独的关系表中，这些表总是存储帖子的 ID。

但是，当我运行查询时，其他 3 个页面的数据与第一页完全相同。

到目前为止，我已经对此进行了编码

```
SELECT * FROM
        (SELECT pst.* FROM posts as pst
        LEFT JOIN postcategories as pstcat
        ON pst.id = pstcat.id_post
        WHERE pst.date IS NOT NULL AND pst.date >= '2013-01-01 00:00:00' AND pst.date <= '2013-01-11 00:00:00' ) as res1  
        INNER JOIN
        (SELECT pst.*, count(pstcmt.id) as cmtCount
                        FROM posts as pst
                        LEFT JOIN userpostcomments as pstcmt
                        ON pst.id = pstcmt.id_post 
                        GROUP BY pst.id) as res2 ON res1.id = res2.id
        INNER JOIN
        (SELECT pst.id, count(pstlk.id) as lkCount
                        FROM posts as pst
                        LEFT JOIN userpostlikes as pstlk
                        ON pst.id = pstlk.id_post 
                        GROUP BY pst.id) as res3 ON res1.id = res3.id
        INNER JOIN
        (SELECT pst.id, count(pstfav.id) as favCount
                        FROM posts as pst
                        LEFT JOIN userpostfavorites as pstfav
                        ON pst.id = pstfav.id_post 
                        GROUP BY pst.id) as res4 ON res1.id = res4.id
        INNER JOIN
        (SELECT pst.id, count(pstimg.id) as imgCount
                        FROM posts as pst
                        LEFT JOIN postimages as pstimg
                        ON pst.id = pstimg.id_post 
                        GROUP BY pst.id) as res5 ON res1.id = res5.id

                        WHERE res1.deleted = 0 
                        AND res1.date IS NOT NULL 
                        GROUP BY res1.id
                        ORDER BY res1.date DESC 
```

谢谢

更新：按照建议使用 ORDER BY 更新查询。但是数据镜像问题依然存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:03:56.487

也许，这就是你想要的：

```
SELECT pst.id,
      COALESCE(cmtCount, 0) cmtCount,
      COALESCE(lkCount, 0) lkCount,
      COALESCE(pstfavCount, 0) pstfavCount,
      COALESCE(imgCount , 0) imgCount,
FROM posts as pst
        LEFT JOIN 
           (SELECT id_post, count(id) as cmtCount
                FROM userpostcomments GROUP BY id_post) as cmt
            ON pst.id = cmt.id_post
        LEFT JOIN 
           (SELECT id_post, count(id) as lkCount
                FROM userpostlikes GROUP BY id_post) as lk
            ON pst.id = lk.id_post
        LEFT JOIN 
           (SELECT id_post, count(id) as pstfavCount
                FROM userpostfavorites GROUP BY id_post) as pstfav
            ON pst.id = pstfav.id_post
        LEFT JOIN 
           (SELECT id_post, count(id) as imgCount
                FROM postimages GROUP BY id_post) as img
            ON pst.id = img.id_post
 WHERE pst.deleted = 0 
    AND pst.date >= '2013-01-01 00:00:00'
    AND pst.date <= '2013-01-11 00:00:00'
 ORDER BY pst.date DESC 
```

我想，这个查询更快。

```
SELECT pst.id,
      COUNT(DISTINCT cmt.id) cmtCount,
      COUNT(DISTINCT lk.id) lkCount,
      COUNT(DISTINCT pstfav.id) pstfavCount,
      COUNT(DISTINCT img.id) imgCount,
FROM posts as pst
        LEFT JOIN userpostcomments cmt
            ON pst.id = cmt.id_post
        LEFT JOIN  userpostlikes lk
            ON pst.id = lk.id_post
        LEFT JOIN userpostfavorites  pstfav
            ON pst.id = pstfav.id_post
        LEFT JOIN postimages  img
            ON pst.id = img.id_post
 WHERE pst.deleted = 0 
    AND pst.date >= '2013-01-01 00:00:00'
    AND pst.date <= '2013-01-11 00:00:00'
 GROUP BY pst.id
 ORDER BY pst.date DESC 
```

# java - 无法从 JUnit 访问 HSQLDB 表

> ID：14276598
> 
> 赞同：1
> 
> 时间：2013-01-11T10:53:25.373
> 
> 标签：java, hibernate, hsqldb

我的问题是我的单元测试失败了，因为我根本无法访问之前刚刚创建的表。

从控制台的输出中，我可以看到执行了以下 Hibernate 命令。

```
Hibernate: alter table Server_Node drop constraint FK3621657E1249AF15
Hibernate: alter table Server_Node drop constraint FK3621657E2528B004
Hibernate: drop table EmailAccountSettings if exists
Hibernate: drop table Node if exists
Hibernate: drop table Server if exists
Hibernate: drop table Server_Node if exists
Hibernate: create table EmailAccountSettings (id varchar(255) generated by default as identity (start with 1), description varchar(255), name varchar(255), primary key (id))
Hibernate: create table Node (id bigint generated by default as identity (start with 1), name varchar(255), primary key (id), unique (name))
Hibernate: create table Server (id integer generated by default as identity (start with 1), name varchar(255), primary key (id), unique (name))
Hibernate: create table Server_Node (Server_id integer not null, nodes_id bigint not null, primary key (Server_id, nodes_id))
Hibernate: alter table Server_Node add constraint FK3621657E1249AF15 foreign key (nodes_id) references Node
Hibernate: alter table Server_Node add constraint FK3621657E2528B004 foreign key (Server_id) references Server
Hibernate: insert into Server (id, name) values (default, ?) 
```

如您所见，值被插入到表中`Server`。但是下一个测试用例试图在表中插入一些东西`EmailAccountSettings`，这会导致以下错误。

```
javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: user lacks privilege or object not found: EMAILACCOUNTSETTINGS
  at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1377)
  at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
  at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:273)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  ... 
```

知道桌子有什么问题`EmailAccountSettings`吗？

我使用 Spring + Hibernate + HSQLDB + JUnit 只是为了概述所涉及的组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:24:00.500

找到了这个问题的原因。再看一下建表语句，突然亮了起来。

```
Hibernate: create table EmailAccountSettings (id varchar(255) generated by default as identity (start with 1), description varchar(255), name varchar(255), primary key (id)) 
```

无法使用 datatype 创建标识列`varchar`。因此，声明没有成功。但这在运行测试时在控制台中不可见。

更改实体中的数据类型后，一切都按预期工作。

# html - 使用 JSF h:outputLink 生成页面锚点

> ID：14276600
> 
> 赞同：8
> 
> 时间：2013-01-11T10:53:42.860
> 
> 标签：html, jsf, jsf-2, anchor

简单的问题：

你如何创建一个 HTML 锚，如

```
<a id="organization" /> 
```

使用**JSF**，例如

```
<h:outputLink ... /> 
```

还是其他 JSF 链接组件？**有可能吗？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T12:32:52.753

你*可以*用[`<h:link>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/link.html)它。它的`id`属性变为`<a id>`and `<a name>`。

```
<h:link id="organization" value="Organization" fragment="organization" /> 
```

它生成以下 HTML：

```
<a id="organization" name="organization" href="/currentcontext/currentpage.xhtml#organization">Organization</a> 
```

但是在 JSF/HTML 中仅使用普通的`<a>`甚至是完全合法的作为跳转目标。`<span>``<div>`

```
<span id="organization">Organization</span> 
```

为了创建一个跳转到该链接的链接，请使用`<h:link fragment>`without `id`：

```
<h:link value="Jump to organization" fragment="organization" /> 
```

生成的 HTML 将如下所示：

```
<a href="/currentcontext/currentpage.xhtml#organization">Jump to organization</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:11:53.013

为什么不使用

```
<h:outputLink value="www.yourweb/somePage#anchor" /> 
```

或者如果它在同一页面上

```
<h:outputLink value="#anchor" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-30T11:48:07.523

```
<h:link value="test" outcome="icerik">
    <f:param name="id" value="#{icerik.id}" />
</h:link> 
```

这链接到`icerik.xhtml?id=2`并且看起来像`<a href="icerik.xhtml.?id=2">test</a>`

# specflow - 在 SpecFlow 中有针对性地自动生成 abc.feature.cs 文件

> ID：14276604
> 
> 赞同：0
> 
> 时间：2013-01-11T10:53:47.590
> 
> 标签：specflow

我们有一组功能文件，其中使用标签（@services，@UI）在中间层和 UI 之间共享场景现在当我将此功能文件提供给 Specflow 时。它为整个功能文件生成测试运行器连接。包括@services 场景
，因为我们不这样做，所以它是无用的；不在 UI 级别实现它们。

所以我的问题..有没有办法告诉 Specflow 只为带有@UI 标记的场景自动生成测试运行程序接线代码 ..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:37:14.443

除了将功能文件拆分为 UI.feature 和 Services.feature 的明显答案之外，没有。无法从单个 .feature 生成多个 .feature.cs 文件。

但是，我是否可以建议这种步骤混合表明您的规范是跨域的，这通常表明它们可能是非常技术性的，而不是行为驱动的。

# cordova - gwt-phonegap 和 mgwt

> ID：14276605
> 
> 赞同：3
> 
> 时间：2013-01-11T10:53:54.420
> 
> 标签：cordova, mgwt

研究移动应用程序开发并尝试了解那里的技术。这两个东西在哪里适合，mgwt 和 gwt-phonegap，它们是相互竞争的技术/框架还是相互补充。它们在开发周期中处于什么位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:52:49.450

mgwt 为 GWT 提供移动小部件，而 gwt-phonegap 为 phonegap 提供集成。

如果你想建立一个网页，你可以使用 mgwt。如果你想构建一个可以部署到苹果应用商店或谷歌播放的应用程序，你还需要 gwt-phonegap 和 phonegap。

如果你想要一个很好的概述，你可能想在 youtube 上观看我关于 mgwt 的演讲：http: [//youtu.be/0V0CdhMFiao](http://youtu.be/0V0CdhMFiao)

# ios6 - 想检查ios6设备上是否存在EKEventStore权限

> ID：14276606
> 
> 赞同：0
> 
> 时间：2013-01-11T10:54:08.057
> 
> 标签：ios6, ekeventstore

想检查`EKEventStore`ios6设备上是否存在权限。

```
EKEventStore *eventStore = [[UpdateManager sharedUpdateManager] eventStore];

if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
{
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
     {
         if (granted)
         {   
             addEventBlock();
         }
         else
         {
             NSLog(@"Not granted");
         }
     }];
} 
```

此代码仅在第一次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:46:36.060

像这样使用。

```
- (IBAction)btnAddFromDBTouched:(id)sender {
    void (^addEventBlock)();

    addEventBlock = ^
    {
        self.eventStore  = [[EKEventStore alloc] init];
        self.eventsList = [[NSMutableArray alloc] initWithArray:0];
        self.defaultCalendar = [self.eventStore defaultCalendarForNewEvents];
        NSDate *startDate = [NSDate date];

        // endDate is 1 day = 60*60*24 seconds = 86400 seconds from startDate
        NSDate *endDate = [NSDate dateWithTimeIntervalSinceNow:86400*365];

        // Create the predicate. Pass it the default calendar.
        NSArray *calendarArray = [NSArray arrayWithObject:defaultCalendar];
        NSPredicate *predicate = [self.eventStore predicateForEventsWithStartDate:startDate endDate:endDate
                                                                        calendars:calendarArray];

         NSArray *events = [self.eventStore eventsMatchingPredicate:predicate];

        nmfChooseEvent *myView = [[nmfChooseEvent alloc] init];
        [myView setTableSource:events];
        [self presentModalViewController:myView animated:YES];

        myView.mainView=self;
        return;

    };
    if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
    {
        [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
         {
             if (granted)
             {
                 addEventBlock();
             }
             else
             {
                 dispatch_async(dispatch_get_main_queue(), ^{
                     UIAlertView *myView = [[UIAlertView alloc] initWithTitle:@"warning" message:@"To be Able to Use This Function, You Must Authorize xxx in  Settings>>Privacy>>Calendars Section." delegate:nil cancelButtonTitle:"OK" otherButtonTitles:nil, nil];
                     [myView show];
                 });

             }
         }];
    }
    else
    {
        addEventBlock();
    }

} 
```

# xml - 根级别的 JSON 数据无效 line 1 position 1

> ID：14276607
> 
> 赞同：0
> 
> 时间：2013-01-11T10:54:07.917
> 
> 标签：xml, xmldocument

我得到了`HttpWebResponse`as XML，但它甚至看起来不像 XML 文档，因为返回的 XML 不包含标题

```
<?xml version='1.0' encoding='UTF-8'?> 
```

我无法解析它。它抛出异常

> 根级别的数据无效 line 1 position 1

或者

```
System.Xml.XmlException: Root element is missing. 
```

我尝试了所有案例。我无法弄清楚这一点。

```
using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    StreamReader responsereader = new StreamReader(response.GetResponseStream());
    string responsedata = responsereader.ReadToEnd();
    XmlDocument xmldoc = new XmlDocument();
    xmldoc.load(responsedata);
} 
```

我传递给该`load()`方法的文档大致如下：

```
<ns2:HotelListResponse>
    <customerSessionId>0ABAA82C-EBAC-4791-3C22-4DEFAE‌​D93172</customerSessionId>
    <numberOfRoomsRequested>0</numberOfRoomsRequested>
    <more‌​ResultsAvailable>false</moreResultsAvailable>
    <HotelList activePropertyCount="198" size="198">
        <HotelSummary order="0">
            <hotelId>195974</hotelId>
    ...
</ns2:HotelListResponse> 
```

由于它的长度，我只提供了一个片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:23:54.160

[XmlDocument.Load](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.load.aspx)方法从流或其他字节源加载。你想要[XmlDocument.LoadXml](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)。

# java - 这种语法有区别吗？

> ID：14276614
> 
> 赞同：0
> 
> 时间：2013-01-11T10:54:25.683
> 
> 标签：java, arrays, object

我想知道是否在这两种情况下都创建了 MyObject 对象。如果不是，为什么这两种情况都能正常工作？

```
MyObject[] abcd = new MyObject[8];
abcd[0] = MyObject();
String str = abcd[0].someMethod(); 
```

和

```
MyObject[] abcd = new MyObject[8];
String str = abcd[0].someMethod(); 
```

我知道在第一个示例中，创建了一个包含 8 个元素的 MyObject 数组，并存储在该数组的引用变量 abcd 中。我有一个 MyObject 引用数组，但实际上没有 MyObject 对象。所以我创建了这些对象，第一个对象存储在数组 0 中。

在第二个例子中..是一样的，只是更短的代码？

**已编辑：忘记添加 [] 抱歉。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T10:59:02.123

假设你的意思

```
MyObject[] abcd = new MyObject[8];
abcd[0] = new MyObject();
String str = abcd[0].someMethod(); 
```

这将正常工作。

第二个版本将抛出一个`NullPointerException` *除非* `someMethod`碰巧是`static`。在这种情况下，Java 不依赖为`static`要调用的方法创建的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:55:46.083

这不是一回事：当你创建一个数组时（它应该被声明为 a `MyObject[]`，而不是 a `MyObject`），你只是创建了一个“占位符”，你不会在数组中创建单个项目。并且当创建一个数组时，它的元素一开始是空的，或者对于不同的原始类型来说为零。

在您的第一个示例中，您应该这样做`new MyObject()`,`MyObject()`单独将不起作用（除非当前类中有一个名称为*方法*...返回 class 的实例。谈论混淆）。`MyObject()``MyObject`

结果，您的第二个代码将抛出一个`NullPointerException`（除非正如@Reimeus 在他的回答中提到的那样，`.someMethod()`是 class 的静态方法`MyObject`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:56:58.597

```
abcd[0] = MyObject(); 
```

这不是有效的 Java 语法；看起来更像 C++。你需要

```
abcd[0] = new MyObject(); 
```

在 Java 中，对象永远不是变量或数组元素的直接值。没有那行，每个数组元素都是 just `null`，所以你不能在没有得到 的情况下调用它的任何方法`NullPointerException`。

如果您`someMethod`是静态的，那么该行`abcd[0].someMethod()`实际编译成的只是

```
MyObject.someMethod(); 
```

编译器会忽略除表达式的静态类型以外的所有内容`abcd[0]`，即`MyObject`. 这是 Java 语义的一个特例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T10:59:56.037

```
MyObject abcd = new MyObject[8];
abcd[0] = MyObject();
String str = abcd[0].someMethod(); 
```

这个片段不编译它应该是这样的

```
MyObject [] abcd = new MyObject[8];
abcd[0] = new MyObject();
String str = abcd[0].someMethod(); 
```

在这种情况下，您正在创建数组并将一个元素放在索引 0 处。

在你的第二种情况下：

```
MyObject abcd = new MyObject[8];
String str = abcd[0].someMethod(); 
```

它也没有编译，它应该是

```
MyObject []abcd = new MyObject[8];
String str = abcd[0].someMethod(); 
```

并且您将有一个 NullPointerException`abdc[0]`未初始化。（您创建了数组，但没有在其中放入任何元素）。

# blackberry - 黑莓中的开关应用

> ID：14276622
> 
> 赞同：2
> 
> 时间：2013-01-11T10:55:08.183
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

在我的应用程序中，有开关应用程序的功能，它工作得很好。但我想在开关应用程序上编码。

在按下开关应用程序时，我想问“您确定要注销吗？”

我可以这样做吗？

如果是，那么如何？

请帮我..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:26:50.950

这将是 hack 和一些意想不到的行为，但是。

当用户切换应用程序时，活动应用程序进入后台，新的应用程序处于前台。

`Application.deactivate()`当您的应用程序被安排到后台时将被调用。您可以通过“UiApplication.requestForground()”再次请求将应用程序转到前台并显示警告消息。

要小心，因为这个逻辑在收到呼叫或日历事件弹出的情况下应该非常敏感。您可以想象在这种情况下用户会感到沮丧。

在一段时间不活动而不是您的解决方案后，我会自动注销。对于人们来说，选择不同的间隔甚至关闭它可能会很有用。

# java - RXTX 接收错误

> ID：14276625
> 
> 赞同：0
> 
> 时间：2013-01-11T10:55:14.720
> 
> 标签：java, serial-port, rxtx

我正在使用 RXTX-2.1-7 并试图在 Windows 中读取 COM 端口。与使用 PuTTY 接收的数据相比，我发现接收到的数据存在一些不一致。

PuTTY中收到的数据：

```
a5 5a 0b 05 10 00 00 00 00 27 d4 73 30 ae 
```

但是使用 RXTX 接收到的数据完全相同：

```
3f 5a 0b 0510 00 00 00 00 27 3f 73 30 3f 
```

似乎所有接收到的大于至少的字节`a0`都被读取为`3f`. 这是我正在使用的代码的相关部分

```
 char[] buffer = new char[14];
                int i=0;
                Arrays.fill(buffer,(char)0);
                while (i<14)
                {                    
                    buffer[i++] = (char)charReader.read();   /*DOUBT*/
                }
                /*System.out.println(Arrays.toString(buffer));*/
                String bufferString = new String(buffer);
                System.out.println(String.format("%x ", new BigInteger(bufferString.getBytes("ISO-8859-1")))); 
```

并且`charReader`是一个`InputStreamReader`打开的串口。我还检查了`(char)`标记行中的类型转换`/*DOUBT*/`是否是罪魁祸首，但是没有转换的代码我仍然得到不一致。

```
65533, 90, 11, 5, 16, 0, 0, 0, 0, 39, 65533, 115, 48, 65533 
```

任何想法为什么我会出现这种不一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:12:17.767

这是一个字符编码问题：我认为您的 java 程序将端口输入解码为 UTF-8。因此，您可以得到`?`(ascii \x1a) 或 unicode REPLACEMENT CHARACTER (65533) 作为无效字符的占位符。

当您真正使用字节时，最好显式使用字节，而不转换为字符。如果您绝对必须将字节表示为字符，请使用单字节编码`ISO-8859-1`（它具有 1:1 映射到较低的 256 个 unicode 字符）。

# xml - 没有命名空间的纯 XML 的 Web 服务端点

> ID：14276627
> 
> 赞同：0
> 
> 时间：2013-01-11T10:55:17.430
> 
> 标签：xml, web-services, spring

我想`Endpoint`为我的 web 服务创建一个，它将侦听没有命名空间的纯 XML 对象，如下所示：

```
<?xml ....>
<xmlmessage>
   <item>
     <value> some value</value>
   </item>
</xmlmessage> 
```

通常我已经实现`SOAP`了看起来像的端点

```
 @PayloadRoot(localPart = "message", namespace = "http://test.namespace")
    @ResponsePayload
    public messageResponse getmessage(@RequestPayload message param) {
    //logic here
    } 
```

但我相信，试图以这种方式实现我所写的乞讨是不可能的。任何人都可以将我重定向到某个地方吗？我找不到任何合适的文章来写如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:54:26.140

不确定这对您是否可行，但如果您只需要基本功能，您可以尝试使用 Spring WS 的 Spring MVC instread 为您的 web 服务。否则，如果没有适当的命名空间，您可能无法做到这一点

```
@Controller
public class MyEndPoint{

 @RequestMapping(method= RequestMethod.GET, value="/message")
    public @ResponseBody messageResponse getmessage(HttpServletRequest request) {

    ...Here you extract the text from the request, and parse the XML yourself....
    }
} 
```

# dojo - dGrid 中的 100% 高度

> ID：14276631
> 
> 赞同：7
> 
> 时间：2013-01-11T10:55:23.783
> 
> 标签：dojo, dgrid

如何使 dGrid 实例占据其容器高度的 100%？我可以使用 CSS 将“.dgrid”分类的 div 设置为特定高度，但是当我将其设置为 100% 时，它不会显示。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T11:17:48.043

知道了。

```
.dgrid {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    height: auto;
} 
```

（当然，在容器上使用绝对/相对位置）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-02T00:10:03.723

我认为支持的方法是使用[.dgrid-autoheight](https://github.com/SitePen/dgrid/blob/4d1de1b2f5b3bcb93735eb793d7638700e413140/doc/migrating/API-Comparison.md#autoheight) css 类。

```
 require([
            "dgrid/List",
            "dgrid/OnDemandGrid",
            "dgrid/Selection",
            "dgrid/Keyboard",
            "dojo/_base/declare",
            "dgrid/test/data/createAsyncStore",
            "dgrid/test/data/smallColorData",
            "dojo/domReady!"
        ], function(List, Grid, Selection, Keyboard, declare, createAsyncStore, smallColorData){
                window.grid = new (declare([Grid, Selection, Keyboard]))({
                    className: "dgrid-autoheight",
                    collection: createAsyncStore({ data: smallColorData }),
                    columns: {
                        col1: "Color",
                        col5: "R",
                        col6: "G",
                        col7: "B"
                    }
                }, "grid");
            }); 
```

这是来自[测试示例](https://github.com/SitePen/dgrid/blob/4d1de1b2f5b3bcb93735eb793d7638700e413140/test/autoheight.html#L33)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T21:46:49.237

@voidstate 的回答很好。另一种方法是这样的：

HTML：

```
<div class="containsDGrid">
    <div data-dojo-attach-point="dgrid"></div>
</div> 
```

CSS：

```
.containsDGrid {
    height: 500px;
    width: 500px;
}

.dgrid {
    height: 100%;
    width: 100%;
} 
```

关键是，如果将 dgrid 的高度设置为 100%，则 dgrid 的父级必须设置其高度。例如，如果我们不设置`.containsDGrid`div 的高度，那么它将如下所示（注意 2px 的高度）：

![在此处输入图像描述](../Images/dd7d4f2e72c93364c87608ed851d1963.png)

有关另一个示例，请参阅[Dojo Dgrid - 使用块中的剩余空间](https://stackoverflow.com/questions/24396814/dojo-dgrid-use-remaining-space-in-block/24396823#24396823)

# javascript - Bitly API - 用于打开新窗口的 JavaScript 函数

> ID：14276635
> 
> 赞同：0
> 
> 时间：2013-01-11T10:55:39.107
> 
> 标签：javascript, twitter

我正在使用我[在此处找到](https://github.com/dhirajbodicherla/sampletest/blob/master/index.html)的脚本为我的推文按钮动态生成短链接，它运行良好，但我似乎唯一不能做的就是创建链接以在新选项卡或最好是弹出窗口中打开。

我已经尝试了脚本的 window.location 部分的几种变体，但到目前为止我还没有运气。如果有人能指出我正确的方向，我将不胜感激。

这是我正在使用的脚本...

```
<script>
    var TweetThisLink = {
        shorten: function(e) {
            // this stops the click, which will later be handled in the  response method
            e.preventDefault();
            // find the link starting at the second 'http://'
            var url = this.href.substr(this.href.indexOf('http:', 5));
            BitlyClient.shorten(url, 'TweetThisLink.response');
        },

        response: function(data) {
            var bitly_link = null;
            for (var r in data.results) {
                bitly_link = data.results[r]['shortUrl'];
                break;
            }
            var tweet_text = "Text for the Tweet goes here"

            window.location = "http://twitter.com/home?status=" + encodeURIComponent(tweet_text + ' ' + bitly_link + " #Hashtag1 #Hashtag2");

        }
    }

    jQuery('.tweetlink').bind('click', TweetThisLink.shorten);
</script> 
```

提前谢谢了 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:03:04.963

通常你可以这样做`window.open`：

```
window.open("http://twitter.com/home?status=" + encodeURIComponent(tweet_text + ' ' + bitly_link + " #Hashtag1 #Hashtag2"); 
```

但是，由于您在发生这种情况之前正在执行 ajax 调用，因此该窗口弹出窗口可能会被浏览器阻止，因为该`window.open`命令不再与单击关联（浏览器允许在`window.open`命令属于未启动之前有一段时间“弹出”）。

一种解决方案是首先在单击时打开窗口（在您的缩短功能中）：

```
var win = window.open('about:blank'); 
```

然后在您的响应函数中重定向：

```
win.location = 'http://twitter.com/etc...'; 
```

演示：http: [//jsbin.com/usovik/1](http://jsbin.com/usovik/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:57:31.860

也许你正在寻找

```
window.open("http://example.com"); 
```

# xml - 将数据发布到基于网络服务肥皂

> ID：14276639
> 
> 赞同：0
> 
> 时间：2013-01-11T10:55:49.043
> 
> 标签：xml, vb.net, web-services

伙计们，我知道如何将数据发布到 Web 服务，但我不知道如何将 xml 数据发布到 vb.net 中基于肥皂的 Web 服务。另外，如果您能告诉我如何接受来自 Web 服务的基于 xml 的响应，我们将不胜感激. 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:25:04.650

您可以使用 XMLHttpRequest - 如下示例

```
Dim strEnvelope As String
    Dim request As New MSXML.XMLHTTPRequest
    Dim strReturn As String
    Dim objReturn As New MSXML.DOMDocument
    Dim strQuery As String

    Private Sub btnAcct_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnResidentAcct.Click

        strEnvelope = "POST /Account/Account.asmx HTTP/1.1 " & _
        "Host: 1.1.1.1" & _
        "Content-Type: text/xml; charset=utf-8" & _
        "Content(655) : length()" & _
        "SOAPAction: ""http://www.account.net/Account/Account""" & _
              "<soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">" & _
          " <soap:Body>" & _
            "<Account xmlns=""http:// www.account.net/Account "">" & _

              "</Account>" & _
           "</soap:Body>" & _
         "</soap:Envelope>"

        'Set up to post to our localhost server
        request.open("post", "http:// www.account.net/Account ")
        request.setRequestHeader("Content-Type", "text/xml")
        request.setRequestHeader("Account", "http://www.account.net/Account/Account")
        request.send(strEnvelope)
strReturn = request.responsetext
  objReturn.loadXML(strReturn)

        strQuery = "SOAP:Envelope/SOAP:Body/m:AccountResponse/Account" 
```

# c# - RDLC 报告未正确检测 NULL 值

> ID：14276648
> 
> 赞同：6
> 
> 时间：2013-01-11T10:56:18.230
> 
> 标签：c#, reporting, rdlc

我在生成 .rdlc 报告时遇到问题。其中一列具有以下表达式：

```
IIF(CInt(Fields!MyColumn.Value) = 0 or Fields!MyColumn.Value is nothing,"Unknown",Fields!MyColumn.Value) 
```

我还尝试将该字段用作字符串：

```
=IIF(IsNothing(Fields!MyColumn.Value) or Fields!MyColumn.Value is nothing,"Unknown",Fields!MyColumn.Value.ToString()) 
```

当 MyColumn 的值为 not`NULL`时，报表正确显示该值，但当它是`NULL`（或转换为 int 类型时为 0）时，报表返回`#Error`。奇怪的是，当我删除 if 函数并仅显示该字段的值时，报告显示 0 或空白（它不返回错误）。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:15:20.883

您可以尝试在不进行比较的情况下进行验证：

```
=IIf(Fields!YourColumn.Value
    , Fields!YourColumn.Value
    , "Unknown") 
```

或反转您的检查（检查它是否存在，而不是检查它是否不存在）：

```
=IIf(Fields!YourColumn.Value > 0
    , Fields!YourColumn.Value
    , "Unknown") 
```

另外，我不确定，但这可能与在同一列中使用不同的值类型有关。尝试对整个列使用相同的值类型。例如，只输出字符串，或者只输出整数。

如果没有任何效果，您还可以检查代码中的 NULL 值，然后将值设置为 0 或 -1（左右）。然后在你的 RDLC 报告中你可以检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:25:16.513

我认为您必须先检查您的字段是否为空，否则您将在比较中得到错误（`NULL`大于 0？-> 错误！）

所以你的公式必须是：

```
=IIF(IsNothing(Fields!MyColumn.Value) or CInt(Fields!MyColumn.Value) = 0,"Unknown",Fields!MyColumn.Value) 
```

我也会尝试 Switch 功能：

```
=Switch(
    IsNothing(Fields!MyColumn.Value), "Unknown", 
    Fields!MyColumn.Value = 0, "Unknown", 
    Fields!MyColumn.Value > 0, Fields!MyColumn.Value, 
    ) 
```

此外，如果您的字段已经是数字，则不必使用 CInt("")，否则公式将为：

```
=Switch(
    IsNothing(Fields!MyColumn.Value), "Unknown", 
    CInt(Fields!MyColumn.Value) = 0, "Unknown", 
    CInt(Fields!MyColumn.Value) > 0, Fields!MyColumn.Value, 
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T16:49:45.920

根据@Deruijter 的回答下的评论，如果表达式`if (dr.ItemArray.GetValue(15).ToString() == "")`对您有效且没有错误，那么您的字符串不是`NULL`；您的数据集中只有空（即零长度）字符串。在这种情况下，在 RDLC 表达式中，您将使用,或技巧`Len`来代替。`IsNothing``Is Nothing``CInt`

如果这些值是真实的`NULL`，那么一次`IsNothing`检查就足够了。

还要记住，`Or`在使用 VB .NET 的 RDLC 表达式中[**不会短路**](https://stackoverflow.com/questions/1170754/or-versus-orelse)；`or`VB .NET 中与 C# 或 C 类似的等效短路运算符是[**`OrElse`**](https://msdn.microsoft.com/en-us/library/ea1sssb2.aspx)运算符。（不过，这似乎对您没有影响）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T15:51:54.970

您可以简单地去设计器并设置：

```
this.column.AllowDBNull = true; 
```

# ios - UIScrollView 水平

> ID：14276649
> 
> 赞同：0
> 
> 时间：2013-01-11T10:56:21.460
> 
> 标签：ios, objective-c, xcode

我无法让我的 uiscrollview 水平滚动，这让我发疯了。我能够垂直而不是水平地得到它。我在 IB 中将其链接为“滚动”，其余部分在我的 viewDidLoad 中完成。我只是想水平滚动 8 个迷你图像。每张图像为 160 X 97。

有人可以告诉我为什么这不起作用吗？代码如下。太感谢了

```
[self->scroll setScrollEnabled:YES];
[self->scroll setDelegate:self];

// [self->scroll setShowsHorizontalScrollIndicator:NO];
// [self->scroll setIndicatorStyle:UIScrollViewIndicatorStyleDefault];   scroll.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
scroll.contentMode = UIViewContentModeScaleToFill;
[self->scroll setContentSize:CGSizeMake(1300.0,50.0)];
[self.view addSubview:scroll];  
scroll.backgroundColor= [UIColor orangeColor]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:52:05.360

你应该像这样设置滚动框架

```
self.scroll.frame = CGRectMake(0,0,320,50); 
```

# python - 尽管凭据良好，Smtplib 仍返回身份验证失败

> ID：14276653
> 
> 赞同：1
> 
> 时间：2013-01-11T10:56:29.510
> 
> 标签：python, django, smtp, smtplib

我使用 django 后端发送电子邮件（但实际上 django 在这种情况下是无关紧要的），我可以通过独立客户端登录，但不能通过 smtplib。我不断得到：

```
SMTPAuthenticationError (535, '5.7.0 authentication failed') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:56:29.510

在我的情况下，服务器似乎在撒谎，它在 hello 请求中响应了以下字符串：

```
>>> conn.ehlo()
(250,
'edited.host.name Hello host.name [83.24.32.123], pleased to meet you\nENHANCEDSTATUSCODES\nPIPELINING\n8BITMIME\nSIZE\nDSN\nETRN\nAUTH GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN PLAIN\nDELIVERBY\nHELP') 
```

它在其中宣布它支持`CRAM-MD5`身份验证方法，但它没有。

由于我很着急，用管理员解决这个问题最终会错过最后期限，我不得不修补 SMTP 类以更喜欢`PLAIN`身份验证方法。为此，您需要创建子类`SMTP_SSL`并覆盖`login`方法，只需从 SMTP 类中复制`login`更改一行。

换行说：

```
preferred_auths = [AUTH_CRAM_MD5, AUTH_PLAIN, AUTH_LOGIN] 
```

到：

```
preferred_auths = [AUTH_PLAIN, AUTH_LOGIN] 
```

无论如何，我发布了修补类： http: [//pastebin.com/ecL9A3P4](http://pastebin.com/ecL9A3P4)。

# android - 在Android位图中直接从JNI传递一个字节数组

> ID：14276655
> 
> 赞同：4
> 
> 时间：2013-01-11T10:56:30.843
> 
> 标签：android, bitmap, java-native-interface

我在 JNI 中有一个灰度图像作为字节数组，我需要将它传递给 Android 以显示在屏幕上。目前我的代码如下：我将字节数组复制到 JNI 中的一个 int 数组，然后使用该数组设置位图的像素：

JNI端：

```
jintArray frame = g_env->NewIntArray(frameSize);
int tempFrame[frameSize];
for(int pix = 0; pix < frameSize; pix++){
    //convert every byte to int
    jint greyValue = 0xff000000 | (( byteArray[pix] << 16) & 0xffff0000) | ((byteArray[pix] << 8) & 0xff00ff00) | (byteArray[pix] & 0xff0000ff);
    tempFrame[pix] = greyValue;
}
g_env->SetIntArrayRegion(frame, 0, frameSize, tempFrame);

//return the array setting a variable in java
g_env->SetObjectField(g_o, g_env->GetFieldID(g_class, "mFrame", "[I"), frame); 
```

然后，Java方面：

```
//Somewhere in SurfaceView.surfaceCreated method
if(mBitmap == null)
    mBitmap = Bitmap.createBitmap(mImageWidth, mImageHeight, Bitmap.Config.ARGB_8888);

//Somewhere in View.onDraw method
if(mBitmap != null && nativeClass.mFrame != null){
    mBitmap.setPixels(nativeClass.mFrame, 0, mImageWidth, 0, 0, mImageWidth, mImageHeight);

    //Do some operations on the bitmap with mBitmap.setPixel()

    canvas.drawBitmap(mBitmap, srcRect, dstRect, null);
} 
```

我想知道是否有一种方法可以加快这个过程，避免复制数组两次（首先从 jintArray 到 int[]，然后从 int[] 到 Bitmap），例如通过直接在 Bitmap 中写入，或者通过创建JNI 中的位图并将其传递给 Android。（我知道canvas有一个drawBitmap方法接受int[]而不是Bitmap，但是那个方法不接受Rects进行缩放，所以不可行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:21:31.307

简单的方法：

在 Java 代码中创建位图。在本机代码中传递位图引用。用于`AndroidBitmap_lockPixels`获取像素值数组。用数据填充数组。最后打电话`AndroidBitmap_unlockPixels`。

[艰辛的道路。](https://groups.google.com/d/msg/android-ndk/hNapviH05Xk/jDPaxsIgodEJ)

# java - 使用Java泛型的2个集合之间的算术元素逐元素差异

> ID：14276656
> 
> 赞同：0
> 
> 时间：2013-01-11T10:56:32.157
> 
> 标签：java, list, generics, collections, array-difference

假设我们有 2 个有序的数字集合。我们要逐个元素地计算算术差异。我认为我们需要使用数字列表来模拟“有序数字集合”的概念。问题是没有为 Number 定义算术差异（如 3-2 中的平庸的“-”）。我可以将所有内容都转换为 Double，但我更喜欢干净的解决方案。

```
public static <E extends Number> List<E> listDifferenceElementByElement(List<E> minuend, List<E> subtrahend) throws Exception {
    if (minuend.size() != subtrahend.size()) {
        throw new Exception("Collections must have the same size"); //TODO: better exception handling
    }
    List<E> difference = new ArrayList<E>();
    int i = 0;
    for (E currMinuend : minuend) {
        difference.add(currMinuend-subtrahend.get(i)); //error: The operator - is undefined for the argument type(s) E, E
        i++;
    }
    return difference;
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:01:04.390

由于`Number`没有提供任何`subtract`方法，你不能简单地做到这一点。我能想到的替代方案是：

1.  使用提供的`doubleValue()`方法，并返回 a `double`，但如果列表包含 BigDecimal 例如，您可能会丢失精度。
2.  每个可用`Number`的子类都有一个方法，但它可能会创建很多重复的代码......
3.  将类型限制为任何有意义的类型（如果精度无关紧要则说 double 或 BigDecimal 如果确实如此），这是 (2) 的子情况。

选项 2 可以通过替换来`difference.add(currMinuend-subtrahend.get(i));`实现`difference.add(subtract(currMinuend, subtrahend.get(i)));`

那么只需要编写 10 个`subtract`方法即可：

```
private static int subtract(int a, int b) { return a - b; }
private static double subtract(double a, double b) { return a - b; }
private static BigDecimal subtract(BigDecimal a, BigDecimal b) { return a.subtract(b); } 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:03:47.420

这与泛型、数组等无关。Java 不允许运算符重载，因此您不能用 减去 2 个数字`-`，并且`Number`该类没有为数字运算定义任何方法。它不能，因为它可能在不同的子类上运行（例如 Integer.subtract(Double)），这会使定义返回类型变得不可能。

我认为，您将需要在`BigDecimal`这里使用内在类型或（或类似的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:13:34.610

如果您想使用许多算术类型，您可以将您的列表设置为通用列表，然后在您想要找到它们之间的差异时添加处理程序。处理程序检查类型是否为 Double、Integer 或任何您想要的实例。根据每种类型，您可以计算差异。

# python - Python pandas：读取文件跳过评论

> ID：14276661
> 
> 赞同：1
> 
> 时间：2013-01-11T10:56:57.413
> 
> 标签：python, io, pandas

我经常处理包含几列（通常少于 10 列）和多达数千万行的 ascii 表。他们看起来像

```
176.792 -2.30523 0.430772 32016 1 1 2 
177.042 -1.87729 0.430562 32016 1 1 1
177.047 -1.54957 0.431853 31136 1 1 1
...
177.403 -0.657246 0.432905 31152 1 1 1 
```

我有许多读取、操作和保存文件的 python 代码。我一直使用`numpy.loadtxt`并`numpy.savetxt`做到这一点。但`numpy.loadtxt`至少需要 5-6Gb RAM 才能读取 1Gb ascii 文件。

昨天我发现了 Pandas，它几乎解决了我所有的问题：`pandas.read_table`同时`numpy.savetxt`将我的脚本的执行速度（2 个）提高了 3 或 4 倍，同时非常节省内存。

一切都很好，直到我尝试读取开头包含一些注释行的文件。文档字符串 (v=0.10.1.dev_f73128e) 告诉我不支持行注释，这可能会出现。我认为这会很棒：我真的很喜欢在`numpy.loadtxt`. 对这将如何变得可用有任何想法吗？有可能跳过这些行也很好（文档声明它们将作为empy返回）

不知道我的文件中有多少注释行（我处理了来自不同人的数千条注释），现在我打开文件，计算文件开头以注释开头的行数：

```
def n_comments(fn, comment):
    with open(fname, 'r') as f:
        n_lines = 0
        pattern = re.compile("^\s*{0}".format(comment))
        for l in f:
            if pattern.search(l) is None:
                break
            else:
                n_lines += 1
    return n_lines 
```

接着

```
pandas.read_table(fname, skiprows=n_comments(fname, '#'), header=None, sep='\s') 
```

有没有更好的方法（可能在熊猫中）来做到这一点？

最后，在发布之前，我查看了一些代码`pandas.io.parsers.py`以了解`pandas.read_table`引擎盖下的工作原理，但我迷路了。谁能指出我实现文件读取的地方？

谢谢

**EDIT2**：我想得到一些改进，摆脱`if`@ThorstenKranz 的第二个实现中的一些`FileWrapper`，但几乎没有得到任何改进

```
class FileWrapper(file):
    def __init__(self, comment_literal, *args):
        super(FileWrapper, self).__init__(*args)
        self._comment_literal = comment_literal
        self._next = self._next_comment

    def next(self):
        return self._next()

    def _next_comment(self):
        while True:
            line = super(FileWrapper, self).next()
            if not line.strip()[0] == self._comment_literal:
                self._next = self._next_no_comment
                return line
    def _next_no_comment(self):
        return super(FileWrapper, self).next() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:57:15.980

`read_csv`并`read_table`有一个`comment`选项可以跳过从注释字符开始到行尾的字节。如果需要跳过*整*行，这是不正确的，因为解析器会认为它看到的是没有字段的行，然后最终看到有效的数据行并感到困惑。

我建议使用您的解决方法来确定要在文件中手动跳过的行数。当整行是注释时，如果有一个选项可以自动跳过行，那就太好了：

[https://github.com/pydata/pandas/issues/2685](https://github.com/pydata/pandas/issues/2685)

实现这一点需要深入了解 C 标记器代码。它并不像听起来那么糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:51:12.883

我通过创建一个类继承找到了一个紧凑的解决方案`file`：

```
import pandas as pd

class FileWrapper(file):
    def __init__(self, comment_literal, *args):
        super(FileWrapper, self).__init__(*args)
        self._comment_literal = comment_literal

    def next(self):
        while True:
            line = super(FileWrapper, self).next()
            if not line.startswith(self._comment_literal):
                return line

df = pd.read_table(FileWrapper("#", "14276661.txt", "r"), delimiter=" ", header=None) 
```

Atm, pandas (0.8.1) 只使用`.next()`- 方法来迭代类似文件的对象。在我的示例中，我们可以重载此方法并仅返回那些不以专用注释文字开头的行`"#"`。

对于输入文件：

```
176.792 -2.30523 0.430772 32016 1 1 2 
# 177.042 -1.87729 0.430562 32016 1 1 1
177.047 -1.54957 0.431853 31136 1 1 1
177.403 -0.657246 0.432905 31152 1 1 1 
```

我们得到

```
>>> df
       X.1       X.2       X.3    X.4  X.5  X.6  X.7
0  176.792 -2.305230  0.430772  32016    1    1    2
1  177.047 -1.549570  0.431853  31136    1    1    1
2  177.403 -0.657246  0.432905  31152    1    1    1 
```

并且对于

```
176.792 -2.30523 0.430772 32016 1 1 2 
177.042 -1.87729 0.430562 32016 1 1 1
177.047 -1.54957 0.431853 31136 1 1 1
177.403 -0.657246 0.432905 31152 1 1 1 
```

我们得到

```
>>> df
       X.1       X.2       X.3    X.4  X.5  X.6  X.7
0  176.792 -2.305230  0.430772  32016    1    1    2
1  177.042 -1.877290  0.430562  32016    1    1    1
2  177.047 -1.549570  0.431853  31136    1    1    1
3  177.403 -0.657246  0.432905  31152    1    1    1 
```

除了继承，您还可以使用委托，这取决于您的喜好。

**编辑** 我尝试了许多其他方法来提高性能。不过，这是一项艰巨的工作。我试过了

*   线程：使用低级 io 操作和大块在一个线程中提前读取文件，将其拆分为行，将这些排入队列并且仅从队列中获取`next()`
*   与多处理相同
*   类似的多线程方法，但使用`readlines(size_hint)`
*   `mmap`从文件中读取

令人惊讶的是，前三种方法速度较慢，因此没有任何好处。使用a`mmap`显着提高了性能。这是代码：

```
class FileWrapper(file):
    def __init__(self, comment_literal, *args):
        super(FileWrapper, self).__init__(*args)
        self._comment_literal = comment_literal
        self._in_comment = True
        self._prepare()

    def __iter__(self):
        return self

    def next(self):
        if self._in_comment:
            while True:
                line = self._get_next_line()
                if line == "":
                    raise StopIteration()
                if not line[0] == self._comment_literal:
                    self._in_comment = False
                    return line
        line = self._get_next_line()
        if line == "":
            raise StopIteration()
        return line

    def _get_next_line(self):
        return super(FileWrapper, self).next()

    def _prepare(self):
        pass

class MmapWrapper(file):
    def __init__(self, fd, comment_literal = "#"):
        self._mm = mmap.mmap(fd, 0, prot=mmap.PROT_READ)
        self._comment_literal = comment_literal
        self._in_comment = True

    def __iter__(self):
        return self #iter(self._mm.readline, "")#self

    def next(self):
        if self._in_comment:
            while True:
                line = self._mm.readline()
                if line == "":
                    raise StopIteration()
                if not line[0] == self._comment_literal:
                    self._in_comment = False
                    return line
        line = self._mm.readline()
        if line == "":
            raise StopIteration()
        return line

if __name__ == "__main__":
    t0 = time.time()    
    for i in range(10):    
        with open("1gram-d_1.txt", "r+b") as f:
            df1 = pd.read_table(MmapWrapper(f.fileno()), delimiter="\t", header=None)
    print "mmap:", time.time()-t0

    t0 = time.time()    
    for i in range(10):    
        df2 = pd.read_table(FileWrapper("#", "1gram-d_1.txt", "r"), delimiter="\t", header=None)
    print "Unbuffered:", time.time()-t0

    print (df1==df2).mean() 
```

给出作为输出

```
mmap: 35.3251504898
Unbuffered: 41.3274121284
X.1    1
X.2    1
X.3    1
X.4    1 
```

我还实施了评论检查，直到找到第一个非评论行。这符合您的解决方案并进一步提高了性能。

但是，对于`mmap`s，存在一些限制。如果文件很大，请确保有足够的 RAM。如果您使用的是 32 位操作系统，您将无法读取大于 2GB 的文件。

# php - 显示包含的请求的 php 页面？

> ID：14276663
> 
> 赞同：2
> 
> 时间：2013-01-11T10:56:59.700
> 
> 标签：php, debugging

我想知道是否有可能以某种方式了解并最终显示在单个 http 请求期间处理的所有 php 页面。

例如，如果页面是 /index.php 我想调用该页面并立即知道获得响应所需的所有包含的 php 页面是什么，而无需明显调试页面......

也许通过日志或转储？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T10:58:39.887

有[`get_included_files`](http://php.net/get_included_files)方法。

> 获取使用 include、include_once、require 或 require_once 包含的所有文件的名称。

# c - 我们可以在 PC 上构建 linux 内核并将其安装在另一台 PC 上吗？

> ID：14276664
> 
> 赞同：0
> 
> 时间：2013-01-11T10:57:00.903
> 
> 标签：c, linux, kernel

我在我的计算机上编译了一个内核，然后我将它安装在同一台计算机上，它工作正常。我的问题是如何在另一台计算机上安装相同的内核？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:08:07.783

您需要将`vmlinuz-[version number]`和`initrd.img-[version number]`文件一起复制`/lib/modules/[version number]`到另一台计算机。当然，将另一台机器的引导加载程序指向这些文件。

还有一些工具可以将内核打包到 *.deb 包中，这样更容易部署。我认为该程序是`make-kpkg`在 Debian 上调用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:59:11.293

是的，您甚至可以为不同的架构构建内核

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:05:12.650

您只需将 zImage 文件复制到新计算机即可。并修改 GRUB 或您用来加载它的任何引导加载程序。

[对于 GRUB，您可以在此处](http://www.dedoimedo.com/computers/grub-2.html)找到有关如何操作的必要信息

# jsp - 404 找不到jsp

> ID：14276666
> 
> 赞同：0
> 
> 时间：2013-01-11T10:57:07.707
> 
> 标签：jsp, servlets, redirect, http-status-code-404, response.redirect

这是我的登录 Servlet 的 post 方法

```
/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String login = request.getParameter("login").trim();
    String password = request.getParameter("password");

    User user = getUsersDao().login(login, DigestUtils.shaHex(password));

    if (user == null) {
        request.setAttribute("login", login);
        request.setAttribute("error", "Wrong username or password.");
        forward(request, response, LOGIN_JSP);
    } else {
        request.getSession().setAttribute(USER_SESSION, user);
        response.sendRedirect(LOGGED_IN_URL);
    }
} 
```

where`LOGGED_IN_URL is "WEB-INF/jsp/index.jsp";`
和 index.jsp 存在于这个地址上，这仅在登录后才起作用。用户的 if 条件是好的（我通过将其设置为 false 来检查它）。

为什么会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:21:06.023

文件夹中的资源`/WEB-INF`不可公开访问（否则最终用户只需直接打开即可看到敏感信息，例如数据源用户名/密码`web.xml`）。

您需要将可公开访问的 JSP 文件放在该`/WEB-INF`文件夹之外。

```
LOGGED_IN_URL = "/index.jsp"; 
```

并重定向如下

```
response.sendRedirect(request.getContextPath() + LOGGED_IN_URL); 
```

中的资源`/WEB-INF`仅可用于转发和包含。

# erlang - Erlang 测试用例手册失败

> ID：14276669
> 
> 赞同：1
> 
> 时间：2013-01-11T10:57:19.450
> 
> 标签：erlang, testcase

在 Erlang 通用测试中手动使测试用例失败的最佳方法是什么？我正在使用这样的东西：

```
ok = nok, % fail as soon as possible 
```

引发 badmatch 异常并使案例失败。我想知道是否还有其他（更好的）方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:18:25.843

[`ct:fail/1`](http://www.erlang.org/doc/man/ct.html#fail-1)并且[`ct:fail/2`](http://www.erlang.org/doc/man/ct.html#fail-2)似乎因为这个原因在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:29:22.183

不，这是一个标准的非常好的方法。另一种选择是不仅失败，而且尝试生成更相关的错误。例如，如果函数在成功时`foo_test()`返回`ok`，那么另一种方法可能是编写：

```
ok = foo_test() 
```

测试并生成错误。它仍然是一个`badmatch`错误，但更容易看出哪里出了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:14:10.787

我有时会使用以下`error`功能：

```
error(incorrect_foo) 
```

这样我就可以很容易地在同一个测试用例中区分不同的失败原因。例如，我可能`error(incorrect_bar)`在同一个函数的某个地方。

# bash - bash：如何删除最后一个符号

> ID：14276673
> 
> 赞同：4
> 
> 时间：2013-01-11T10:57:28.493
> 
> 标签：bash, shell, awk

我正在尝试从 bash 命令输出中提取一些信息：

```
uptime | awk '{print $3}' 
```

运行它时，我得到以下结果：`8:27,`

如何删除最后一个符号（即逗号）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T11:00:40.323

另一个变体（替换和`awk`）：`sed``cut`

```
# "unnecessary" echo with evil backticks to get rid of extra spaces
echo `uptime|cut -d, -f1' 
```

似乎工作......直到正常运行时间达到一天（感谢@sudo_O指出）。然后输出格式将包括天数，我们需要

```
echo `uptime|cut -d, -f2` 
```

（后者是我最初的答案，因为我测试的正常运行时间 > 24 小时）。

UPD：这两种解决方案都不起作用：后者打印没有天数的正常运行时间，前者无法提取小时数，因为没有天数时它们前面没有逗号分隔符 - 但其余答案实际上由那些证明失败。

整个方法容易出错。几个月和几年后会发生什么？（我似乎记得它仍然显示 N 天，但我可能会出错）。如果正常运行时间是本地化的怎么办？（他们是否因为现有脚本而拒绝这样做？）它为 1 个用户、“1 个用户”或“1 个用户”显示了什么？如果我们知道所有的答案，我们还想依赖它们吗？

如果我们的目的是向用户显示正常运行时间，那么使用正则表达式提取“up”和“users”之间的部分就可以了：

```
uptime | sed 's/^.*up\(.*\), *[0-9]\+ *users.*$/\1/' 
```

如果我们想比较时间或收集统计数据，像 Linux 特定的东西`/proc/uptime`会更好（第一列`/proc/uptime`是原始正常运行时间秒数）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T11:08:17.783

你几乎拥有它，只是`substr`or`gsub`函数`awk`

```
$ uptime | awk '{print substr($3,1,length($3)-1)}'
2:49

$ uptime | awk '{sub(/,/,"");print $3}'
2:49 
```

不需要过多的管道或不正确地使用反引号。

*使用(GNU)*`uptime`给定不同的输出，更好更健壮的解决方案： *`grep -Po "\d{1,2}:\d{2}(?=,)"`*

 *```
# More than one day    
$ uptime
12:46:18 up 92 days,  5:00,  2 users,  load average: 0.00, 0.01, 0.05
$ uptime | grep -Po "\d{1,2}:\d{2}(?=,)"
5:00

# Less than one day
$ uptime
12:47:30 up  4:24,  7 users,  load average: 0.34, 0.12, 0.07       
$ uptime | grep -Po "\d{1,2}:\d{2}(?=,)"
4:24 
```

或与`sed -rn 's/.*([0-9]{1,2}:[0-9]{2}),.*/\1/p`：

```
# More than one day
$ uptime
12:54:00 up 92 days,  5:07,  2 users,  load average: 0.03, 0.02, 0.05
$ uptime | sed -rn 's/.*([0-9]{1,2}:[0-9]{2}),.*/\1/p'
5:07

# Less than one day 
$ uptime
12:54:55 up  4:31,  7 users,  load average: 0.07, 0.10, 0.08
$ uptime | sed -rn 's/.*([0-9]{1,2}:[0-9]{2}),.*/\1/p'
4:31 
```

* * *

**更新：**所以如果`uptime`不到一个小时，输出是否再次不同！？

```
$ uptime
14:46:03 up 3 min,  4 users,  load average: 0.54, 0.75, 0.36

$ uptime
14:53:40 up 11 min,  4 users,  load average: 0.48, 0.62, 0.46 
```

一个`regexp`统治他们的人：

```
$ sed -rn 's/.*up\s+(.*),\s+[0-9]+ users.*/\1/p' file
92 days,  5:00
4:24
11 min
3 min 
```

我假设这也能处理好几年！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T11:00:12.583

`uptime | awk '{print $3}' | tr -d ,`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T13:08:33.677

鉴于@sudo_O 的正常运行时间输出示例（谢谢！）：

```
$ cat file
12:46:18 up 92 days,  5:00,  2 users,  load average: 0.00, 0.01, 0.05
12:47:30 up  4:24,  7 users,  load average: 0.34, 0.12, 0.07

$ awk -F'[ ,]+' '{print $3 (/days/?" "$4" "$5:"")}' file
92 days 5:00
4:24

$ sed 's/.*up *\(.*\), *[0-9]* users.*/\1/' file
92 days,  5:00
4:24 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T10:58:35.873

使用`sed`：

```
uptime | awk '{print $3}' | sed '$ s/,$//' 
```*

# iphone - 搜索查询未提供所需结果？

> ID：14276679
> 
> 赞同：1
> 
> 时间：2013-01-11T10:57:57.207
> 
> 标签：iphone, database, sqlite, cocoa-touch, uisearchbar

我有这个代码：

```
 DBManager *db = [[DBManager alloc] initWithPath:DB_NAME];
    if(sites) {
        [sites release];
        sites = nil;
    }
    NSString *q = [NSString stringWithFormat:@"%@ AND site.name LIKE \"%%%@%%\" LIMIT %d", filterQuery, self.searchString, MAX_SEARCH_RESULTS];
    sites = [[db smartQueryForArrayWithStatement:q] retain];
    [db release];
    siteLoading = NO;

    if(self.filterApplied) {
        NSLog(@"filterApplied");
    }
    [self.tablView reloadData];
} 
```

![在此处输入图像描述](../Images/6d05a3cad4473176fb256ae8365d6988.png)

但我得到了这个输出。但它应该返回我`NULL VALUE`（即没有位置或与输入的搜索查询匹配的任何其他类似搜索结果）。

我是否需要更改我的数据库查询才能获得确切的结果？如果有人能告诉我我需要做些什么改变，因为对于其他所有搜索结果，我得到了除了珀斯、昆士兰、达尔比之外的所需结果，这给了我错误的结果，如图所示。

# git - 使用包含多个项目的 Git 存储库配置 Jenkins

> ID：14276681
> 
> 赞同：0
> 
> 时间：2013-01-11T10:58:02.057
> 
> 标签：git, github, jenkins, continuous-integration

我们已经从 SVN 迁移到 GIT，并且我们的存储库结构在一个存储库中有许多项目（不使用子模块）。

我想在带有 GitHub 的 Windows Server 2008 R2 上配置 Jenkins，以便它从存储库中检出子文件夹。

假设我们有一个存储库，里面有文件夹 A，B 对应于 Maven 项目

我想为 A 和 B 设置 Jenkins 的任务。

这有没有可能 ？还是我必须使用子模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:13:01.357

恕我直言，我认为这是不可能的，原因很简单，即无法克隆 GIT 存储库的子目录。这是不可能的，因为任何客户端回购的完整性都会受到损害。

当您来自 subversion 时，这是一个常见的误解，我认为您应该将每个项目迁移到他自己的 GIT 存储库中。然后使用子模块组成更大的超级项目。

# asp.net-mvc - 如何从@Html.ActionLink 清除所有锚样式

> ID：14276682
> 
> 赞同：0
> 
> 时间：2013-01-11T10:58:01.870
> 
> 标签：asp.net-mvc, html.actionlink

在我的 MVC 应用程序中，我使用了`@Html.ActionLink`. 我已经将它们的样式设置为像按钮一样显示它们，但问题是`a, a:link`CSS 文件中有 stome 样式等（我的意思是所有锚行为），这就是为什么链接`@Html.ActionLink`看起来像链接，而不是纯文本。有什么想法可以摆脱那些特定`@Html.Actionlink`控件的所有锚行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:02:43.853

使用 jQuery 是一种选择吗？您可以编写一个函数来在启动时从每个链接中删除 css。

```
$(document).ready(function() {
    // to clear css from a specific item
    $("#your-link-id").removeClass();

    // to clear css from a bunch of links
    $("your-selector a").each(function() {
        $(this).removeClass();
    });
}); 
```

或者，您可以创建额外的 CSS 类来覆盖`a`标签上的样式。

```
<style type="text/css">
    .whatever { background-color:black !important; }
</style> 
```

`@Html.ActionLink("MyAction", "MyController", new { @class = "whatever" })`

# php - 使用 PHP/CURL 从谷歌检索 cookie

> ID：14276683
> 
> 赞同：0
> 
> 时间：2013-01-11T10:58:09.403
> 
> 标签：php, cookies, curl, login, gmail

我正在尝试创建一个脚本，允许用户登录一次（在域上使用相同的用户名和密码），以便他们可以访问门户和 gmail，而不是登录两次（一个到门户，另一个到他们的 gmail ）。

我一直在尝试从 gmail 中检索 cookie，但没有运气。有没有人成功地尝试过这个？

请让我知道，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:00:46.030

使用[Google 帐户身份验证和授权](https://developers.google.com/accounts/)。

啊[PHP 库](http://code.google.com/p/oauth-php/ "PHP 的 OAuth 消费者和服务器库")可用。

# iphone - 如何使用 xcode 在 iOS 中制作通用库 /9 .a 文件？

> ID：14276692
> 
> 赞同：1
> 
> 时间：2013-01-11T10:58:23.460
> 
> 标签：iphone, ios

如何使用 xCode 在 iOS 中制作通用静态库（.a 文件）？[iOS 作品集](http://www.solutionanalysts.com/portfolio-tag/ios)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:05:23.743

按照这个截图：

![在此处输入图像描述](../Images/258eb0acea7a8f24569a00db7e1f6372.png)

您可以通过创建一个新的 Project > Cocoa Touch Static Library 来创建一个静态库。

让我知道它是否有效。

谢谢，

鹤芒。

# html - Chrome 打包的后台应用程序功能和行为

> ID：14276695
> 
> 赞同：0
> 
> 时间：2013-01-11T10:58:36.193
> 
> 标签：html, google-chrome, web-applications, background, google-chrome-app

我们正在探索诱人的 Chrome 打包应用程序来开发我们基于 HTML5 的离线 Web 应用程序，为此，chrome 的后台应用程序功能非常有趣并且符合我们的要求。但是，我有以下疑问： 1\. 如果用户关闭了 Chrome 浏览器窗口，应用程序会继续在后台运行吗？实际上，我想将我的数据同步到在线服务器并希望它继续运行，即使用户关闭了浏览器窗口。谁能指导 Chrome 打包的后台应用程序中是否可以使用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:50:27.277

您可以在 Chrome 打包应用程序中使用以下技术之一：

*   [Alerts API](http://developer.chrome.com/trunk/apps/alarms.html)：它允许您安排特定代码的定期运行

*   [云服务和 PushMessaging API](http://developer.chrome.com/trunk/apps/cloudMessaging.html)：虽然处于实验状态，但此 API 将允许您的 Chrome 应用程序接收来自第三方的通知，例如您自己的服务器。但是，这不适用于广播，因为每次推送消息都会发送给一个应用程序和一个用户。

# ios - dispatch_queue 并返回数据

> ID：14276704
> 
> 赞同：0
> 
> 时间：2013-01-11T10:58:55.487
> 
> 标签：ios, queue, grand-central-dispatch

我正在尝试编写返回`NSArray`. 我的`NSMutableArray`（friendUsers）正确添加了对象，但在 dispatch_async 之外，数组是空的。我尝试将用户添加到主队列中（如图所示），但数组为空。有任何想法吗 ？感谢你的帮助。

```
- (NSArray *)checkUsersInGroup {

    NSMutableArray *friendUsers = [[NSMutableArray alloc] init];

    dispatch_queue_t checkUSers = dispatch_queue_create("CheckUsers", NULL);
    dispatch_async(checkUSers, ^{

        NSArray *totalUsers = [VVDataRead lecturaDades];
        NSArray *usersToSearch = [_grup objectForKey:@"groupFriends"];

        for (NSString *tempUserId in usersToSearch){
            for (NSDictionary *user in totalUsers){
                NSString *id = [user objectForKey:@"id"];
                    if ([tempUserId isEqualToString:id])
                        dispatch_async(dispatch_get_main_queue(), ^{
                            [friendUsers addObject:user];
                        });
            }
        }

    });
    NSLog(@"people:%@",friendUsers);
    return [friendUsers copy];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:32:36.690

你可以使用积木，在这种情况下它可以让你的生活更轻松。

```
- (void)checkUsersInGroupWithCompleteBlock:(void(^)(NSMutableArray * resultArray))completeBlock {

    NSMutableArray *friendUsers = [[NSMutableArray alloc] init];

    dispatch_queue_t checkUSers = dispatch_queue_create("CheckUsers", NULL);
    dispatch_async(checkUSers, ^{

        NSArray *totalUsers = [VVDataRead lecturaDades];
        NSArray *usersToSearch = [_grup objectForKey:@"groupFriends"];

        for (NSString *tempUserId in usersToSearch){
            for (NSDictionary *user in totalUsers){
                NSString *id = [user objectForKey:@"id"];
                if ([tempUserId isEqualToString:id])
                    dispatch_async(dispatch_get_main_queue(), ^{
                        [friendUsers addObject:user];
                    });
            }
        }

        // call the complete block with the result when you finished
        if (completeBlock) completeBlock(friendUsers);
    });
} 
```

...这是调用该方法的方法：

```
- (void)anyMethod {

    // ... do whetever you want here before

    [self checkUsersInGroupWithCompleteBlock:^(NSMutableArray *resultArray) {
        NSLog(@"%@", resultArray);
    }];

    // ... or after

} 
```

* * *

**编辑：**

*注意：这是另一种可能的解决方案，但在您的情况下，它只是暂停主线程（这绝对是**不好的**），因此您不会通过此解决方案获得任何收益，但主线程会很痛苦，但如果您在两个后台线程上，这个解决方案可以给出线程之间同步的一个很好的例子。*

```
- (NSArray *)checkUsersInGroup {

    NSMutableArray *friendUsers = [[NSMutableArray alloc] init];

    // our semaphore is here
    dispatch_semaphore_t _semaphore = dispatch_semaphore_create(0);

    dispatch_queue_t checkUSers = dispatch_queue_create("CheckUsers", NULL);
    dispatch_async(checkUSers, ^{

        NSArray *totalUsers = [VVDataRead lecturaDades];
        NSArray *usersToSearch = [_grup objectForKey:@"groupFriends"];

        for (NSString *tempUserId in usersToSearch){
            for (NSDictionary *user in totalUsers){
                NSString *id = [user objectForKey:@"id"];
                if ([tempUserId isEqualToString:id])
                    dispatch_async(dispatch_get_main_queue(), ^{
                        [friendUsers addObject:user];
                    });
            }
        }
        // the process finished
        dispatch_semaphore_signal(_semaphore);

    });

    // ... we are wainitng for the semaphore's signal
    dispatch_semaphore_wait(_semaphore, DISPATCH_TIME_FOREVER);
    dispatch_release(_semaphore);

    NSLog(@"people:%@",friendUsers);
    return [friendUsers copy];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:14:25.593

有很多策略可以解决这个问题，但是由于您的操作发生在后台线程上，因此返回数组不是其中之一。您可以`NSNotificationCenter`用来表示任务已完成并读取数组。IE

```
- (void)checkUsersInGroup {

    NSMutableArray *friendUsers = [[NSMutableArray alloc] init];

    dispatch_queue_t checkUSers = dispatch_queue_create("CheckUsers", NULL);
    dispatch_async(checkUSers, ^{

        NSArray *totalUsers = [VVDataRead lecturaDades];
        NSArray *usersToSearch = [_grup objectForKey:@"groupFriends"];

        for (NSString *tempUserId in usersToSearch){
            for (NSDictionary *user in totalUsers){
                NSString *id = [user objectForKey:@"id"];
                    if ([tempUserId isEqualToString:id])
                        dispatch_async(dispatch_get_main_queue(), ^{
                            [friendUsers addObject:user];
                        });
            }
        }

        // Signal background task is finished
        // Make sure to add an observer to this notification
        [[NSNotificationCenter defaultCenter] postNotificationName:@"friendsAddLiteral"
                                                                object:nil];

    });
}

//this method will respond to the notification
- (void) onFriendsAdded:(NSNotification*)notif {
    //do something on the main thread
} 
```

# hadoop - Sqoop 导入后无法查询 Hive 表

> ID：14276707
> 
> 赞同：1
> 
> 时间：2013-01-11T10:59:03.697
> 
> 标签：hadoop, hive, sqoop

我通过 sqoop 将几个 oracle 数据库表导入 hive。该命令看起来像这样：

```
./sqoop import --connect jdbc:oracle:thin:@//185.2.252.52:1521/orcl --username USER_NAME --password test --table TABLENAME--hive-import 
```

我使用的是嵌入式 Metastore（至少我是这么认为的。在这方面我没有更改默认配置）。当我在 HIVE 中执行 SHOW TABLES 时，导入的表不会显示，但我为通过命令行测试创建的一些表会显​​示。这些表都在 hdfs 上的同一个仓库目录中。似乎 sqoop 导入没有使用相同的元存储。

但它在哪里？使用命令行查询时如何切换到它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:34:54.427

我认为整个问题都在嵌入式 Metastore 中，因为 HIVE 会在默认情况下创建它，以防它在用户当前工作目录中不存在。因此 Sqoop 最终将使用与 hive 不同的元存储。我建议将 MySQL 配置为 Metastore 的后端。

# javascript - 用于制作不需要版本的标签的 JavaScript？

> ID：14276711
> 
> 赞同：-3
> 
> 时间：2013-01-11T10:59:12.380
> 
> 标签：javascript, html, tabs

对于不需要`<head>`版本的标签，我需要 JavaScript（这不可能）。

我有三个链接和三个 div，我需要这样的东西，在链接推送时会显示一个 div，其他隐藏，在其他链接推送时，显示其他 div 和所有其他隐藏然后。

这是我的代码：

```
<div style="text-align: left;">
            <ul style="margin: 0 0 0 0;">
                <li style="display:inline; margin-left: 3px; text-align: center; width:90px; background-color:#58794c; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;"><a style="color: #ffffff; font-size: 28px; text-decoration: none;" href="#">Postage</a></li>
                <li style="display:inline; margin-left: 3px; text-align: center; width:90px; background-color:#558b40; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;"><a style="color: #efda5d; font-size: 28px; text-decoration: none;" href="#">Return</a></li>
                <li style="display:inline; margin-left: 3px; text-align: center; width:90px; background-color:#66ac4a; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;"><a style="color: #efda5d; font-size: 28px; text-decoration: none;" href="#">Payment</a></li>
            </ul>
        </div>
        <div style="width:324px; background-color:#58794c; color: #efda5d; border-bottom:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;" title="Shipping information"><p style="text-align: left; margin-left: 10; margin-top:0;">Available shipping type/It's price/Additional cost for this product:<br />[[ShippingService1]]/[[ShippingServiceCost1]]/[[ShippingServiceAdditionalCost1]]<br />[[ShippingService2]]/[[ShippingServiceCost2]]/[[ShippingServiceAdditionalCost2]]<br />[[ShippingService3]]/[[ShippingServiceCost3]]/[[ShippingServiceAdditionalCost3]]<br />More information about products delivery you will find by clicking <a style="color: #ffffff;" href="http://stores.ebay.co.uk/Digi-Spot/Delivery.html">here</a>.</p></div>
        <div style="width:324px; background-color:#558b40; color: #efda5d; border-bottom:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;" title="Return information"><p style="text-align: left; margin-left: 10; margin-top:0;">Product must be returned within [[ReturnWithin]] to this adress <b>[[ReturnAddress]]</b>. For return shipping pays <b>[[ReturnShipPaid]]</b>.<br /> More information about returning products you will find by clicking <a style="color: #ffffff;" href="http://stores.ebay.co.uk/Digi-Spot/Returns.html">here</a>.</p></div>
        <div style="width:324px; background-color:#66ac4a; color: #efda5d; border-bottom:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;" title="Payment information"><p style="text-align: left; margin-left: 10; margin-top:0;">Product price is <b>[[FixedPrice]]</b><br />Additional payment instructions for this product: [[PaymentInstructions]]</p></div> 
```

这是我想要的一个例子：[http ://www.isdntek.com/tagbot/tabtop.htm](http://www.isdntek.com/tagbot/tabtop.htm)

可能我需要添加 div 名称或 ID，并具有显示或隐藏 div 的简单功能（将在单击链接时执行），但我找不到不需要`<head>`编辑的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:22:09.737

正如 Quentin 所说，在评论您的问题时，几乎任何提供选项卡小部件（或任何其他构建选项卡的解决方案）的 JavaScript 库都不需要在`<head>`页面部分执行任何操作。嗯......实际上它确实如此，因为你在那里调用你的外部 JavaScript 文件：

```
<script type="text/javascript" src="libs.js"></script> 
```

但这只是保持代码整洁的一种形式。如果你不太喜欢 head，你可以在你的`<body></body>`部分中几乎任何地方放置相同的行，它应该也可以工作。

`<head>`因此，如果可能每个提供选项卡的[JavaScript](http://jqueryui.com/tabs/)库都可以在不修改.

正如您在给定示例中所看到的（单击“*查看源代码*”），要获取选项卡，您所要做的就是将以下内容放入您的`<body></body>`：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Tab 1 Title</a></li>
        <li><a href="#tabs-2">Tab 2 Title</a></li>
        <li><a href="#tabs-3">Tab 3 Title</a></li>
    </ul>
    <div id="tabs-1">
        <p>Tab 1 Text</p>
    </div>
    <div id="tabs-2">
        <p>Tab 2 Text</p>
    </div>
    <div id="tabs-3">
        <p>Tab 3 Text</p>
    </div>
</div> 
```

然后，jQuery UI 作者再次向您展示，您应该将最新版本的*jQuery*和*jQuery UI*库的调用放入您的`<head></head>`部分：

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

但是，正如我写给你的，你也可以把它放在任何地方，例如，在`<div>`用于声明你的标签之前：

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<div id="tabs">
    <ul>
    ... 
```

伙计们，这就是全部！:]

# entity-framework - 工作单元，实体框架 DBContext 范围

> ID：14276714
> 
> 赞同：6
> 
> 时间：2013-01-11T10:59:27.503
> 
> 标签：entity-framework, repository-pattern, unit-of-work

我在寻找解决此问题的最佳实践的 EF 时遇到了一些问题：

```
public void TestEntityFramework_UOWImplementation()
{
    using (UnitOfWorkInventory uow = new UnitOfWorkInventory())
    {
        IMaterialRepository repos = new MaterialRepository(uow);

        Material mat = GetMaterial("Mikes Material", 1);

        mat.CostPrice = 20;

        repos.InsertOrUpdate(mat);

        uow.Commit();
    }
}

private Material GetMaterial(string sku, int clientId)
{
    IMaterialRepository repos = new MaterialRepository(new UnitOfWorkInventory();

    return repos.Find(sku, clientId);

} 
```

在 TestEntityFramework_UOWImplementation() 方法中，它很好，我调用为我的工作单元创建一个范围......并在其中创建一个存储库。

但是当我想 getMaterials() 如下时..我无法访问工作单元或存储库，除非我实际上将它作为参数传递！这显然不是特别好。

人们如何解决这个问题？

提前致谢！

尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:19:12.480

在您的实现中，您将无法访问这样的工作单元。我所做的是使用 IoC 容器和依赖注入来处理它。我有一个 WCF 服务，它使用工作单元和针对 EF5 的存储库模式。

[您可以在此处](http://geekswithblogs.net/JuansAndZeros/archive/2012/10/03/building-a-repository-pattern-against-ef-5-model-first.aspx)阅读有关存储库模式、工作单元和 EF 的更多信息，但基本上我所做的是在我的服务类的构造函数中注入工作单元，如下所示：

```
 private readonly IUnitOfWork uow;

    public LoanService(IUnitOfWork unitOfWork)
    {
        uow = unitOfWork;
    } 
```

然后我可以在服务的任何地方在我的存储库中使用 uow.WhateverMethod。我使用[Ninject](http://www.ninject.org/)来处理 IUnitOfWork 的注入。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:16:23.260

如果有人正在寻找解决这个问题的方法，我做了一些不同的事情。

我使用依赖注入框架 (StructureMap) 来处理所有 DI，所以每次我实例化一个存储库时，它都会从 StructureMap 的服务定位器中检索 DBContext。我还将 dbcontext 范围设置为来自网络服务器的请求期间。

这里的优点是每次我检索或注入 DBContext 时，它将在请求期间检索相同的上下文，这意味着我可以在多个方法和类中使用它！我将接口类型作为通用参数传递给构造函数，这意味着我可以将 repo 指向不同的上下文。在有大量 dbcontexts 的应用程序中很有帮助。

回购构造函数例如：

```
public class PurchaseOrderRepository<TDbContext> : GenericRepository<PurchaseOrder>, IPurchaseOrderRepository<TDbContext> where TDbContext : DbContext
{

        public PurchaseOrderRepository()
            : base((TDbContext)ObjectFactory.GetInstance<TDbContext>())
        {
        }
} 
```

用法：

```
 //resolves the request scope InventoryContext... 
var pRepos = new PurchaseOrderRepository<IInventoryContext>(); 
```

并且结构映射依赖项如下所示：

```
 For<IInventoryContext>().HttpContextScoped().Use<InventoryContext>(); 
```

# image - 带有图像的 GWT 下拉菜单

> ID：14276715
> 
> 赞同：1
> 
> 时间：2013-01-11T10:59:30.530
> 
> 标签：image, gwt

我想用图像制作一个下拉菜单。这表示：

```
 ImageListName
  image.png
  image1.png
  ......
  imageN.png 
```

应该只有图像没有文字，我想在图像上进行选择，例如何时可以选择头像。我不确定哪种方法最好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:22:26.360

```
MenuBar HomeMenu = new MenuBar();
final String image = "<img src='"+GWT.getModuleBaseURL() + "/images/down-arrow.png' height='25px' width='25px'/>";
        SafeHtml addActivityImagePath = new SafeHtml() {
            @Override
            public String asString() {
                return image;
            }
        };
HomeMenu.addItem(new MenuItem(addActivityImagePath,mainMenu)); 
```

[查看Advanced GWT Components](http://advanced-gwt.sourceforge.net/text-and-button.html)中的 Combobox 或 Suggestion 框。

您将无法使用 ListBox 执行此操作，因为它只是创建了一个 HTML <select> 元素。您可以使用一个菜单[栏](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/MenuItem.html)，其中包含一个带有[MenuItems](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/MenuBar.html)的菜单，以模拟其中包含复杂小部件的下拉菜单。您还可以设置下拉菜单的样式，而不是依赖浏览器样式的表单元素。使用 MenuBar 代替 ListBox，并将所需的任何小部件放置在 MenuItem 内以模拟 ListBox。常规 ListBoxes 只允许您指定纯文本。

# r - 查找 R 表达式中所有函数的名称

> ID：14276728
> 
> 赞同：6
> 
> 时间：2013-01-11T10:59:59.233
> 
> 标签：r, function, metaprogramming, expression

我正在尝试查找任意合法 R 表达式中使用的所有函数的名称，但我找不到将以下示例标记为函数而不是名称的函数。

```
test <- expression(
    this_is_a_function <- function(var1, var2){

    this_is_a_function(var1-1, var2)
})

all.vars(test, functions = FALSE)

[1] "this_is_a_function" "var1"              "var2" 
```

all.vars(expr, functions = FALSE) 似乎在表达式中返回函数声明 (f <- function(){})，同时过滤掉函数调用 ('+'(1,2), ...)。

是否有任何函数 - 在核心库或其他地方 - 会将“this_is_a_function”标记为函数，而不是名称？它需要处理语法上合法但可能无法正确计算的任意表达式（例如，'+'(1, 'duck')）

我发现了[类似的问题](https://stackoverflow.com/questions/12014265/how-to-extract-all-names-of-functions-from-r-code-is-it-possible-for-function)，但它们似乎不包含解决方案。

如果需要澄清，请在下面发表评论。我正在使用解析器包来解析表达式。

### 编辑：@哈德利

我的表达式包含整个脚本，通常由一个包含嵌套函数定义的主函数组成，并在脚本末尾调用主函数。

函数都是在表达式中定义的，我不介意是否必须包含'<-'和'{'，因为我可以很容易地自己过滤掉它们。

这样做的动机是获取我所有的 R 脚本并收集关于我对函数的使用如何随时间变化的基本统计数据。

### 编辑：当前解决方案

基于正则表达式的方法获取函数定义，并结合 James 注释中的方法来获取函数调用。通常有效，因为我从不使用右手分配。

```
function_usage <- function(code_string){
    # takes a script, extracts function definitions

    require(stringr)

    code_string <- str_replace(code_string, 'expression\\(', '')

    equal_assign <- '.+[ \n]+<-[ \n]+function'
    arrow_assign <- '.+[ \n]+=[ \n]+function'

    function_names <- sapply(
        strsplit(
            str_match(code_string, equal_assign), split = '[ \n]+<-'),    
        function(x) x[1])

    function_names <- c(function_names, sapply(
        strsplit(
            str_match(code_string, arrow_assign), split = '[ \n]+='),    
            function(x) x[1]))

        return(table(function_names))    
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:19:30.717

**简短回答：** `is.function`检查变量是否实际包含函数。这不适用于（未评估的）调用，因为它们是调用。您还需要注意掩蔽：

```
mean <- mean (x) 
```

**更长的答案：**

恕我直言，这两种情况之间存在很大差异`this_is_a_function`。

`this_is_a_function` *在第一种情况下，您将在计算表达式后将*函数分配给具有名称的变量。`2+2`差异与和之间的差异相同`4`。
然而，仅仅 find`<- function ()`并不能保证结果是一个函数：

```
f <- function (x) {x + 1} (2) 
```

第二次出现在语法上是函数调用。您可以从表达式中确定`this_is_a_function`需要存在一个包含函数的被调用变量才能使调用正确评估。但是：您不知道它是否仅从该声明中存在。但是，您可以检查这样的变量是否存在，以及它是否是一个函数。

事实上，函数也像其他类型的数据一样存储在变量中，这意味着在第一种情况下，您可以知道`function ()`将是函数的结果，并由此得出结论，在计算此表达式后，具有名称的变量`this_is_a_function`将保持不变一个函数。

然而，R 充满了名称和函数：“->”是赋值函数的名称（一个保存赋值函数的变量）......

评估表达式后，您可以通过 验证这一点`is.function (this_is_a_function)`。然而，这绝不是唯一一个返回函数的表达式：想想

```
f <- function () {g <- function (){}}
> body (f)[[2]][[3]]
function() {
}
> class (body (f)[[2]][[3]])
[1] "call"
> class (eval (body (f)[[2]][[3]]))
[1] "function" 
```

> all.vars(expr, functions = FALSE) 似乎在表达式中返回函数声明 (f <- function(){})，同时过滤掉函数调用 ('+'(1,2), ...)。

我会说它是另一种方式：在那个表达式`f`中是变量（名称），它将被分配给函数（一旦调用被评估）。`+`(1, 2) 计算为数字。除非你阻止它这样做。

```
e <- expression (1 + 2)
> e <- expression (1 + 2)
> e [[1]]
1 + 2
> e [[1]][[1]]
`+`
> class (e [[1]][[1]])
[1] "name"
> eval (e [[1]][[1]])
function (e1, e2)  .Primitive("+")
> class (eval (e [[1]][[1]]))
[1] "function" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T17:05:33.557

与其查找函数定义（如果不实际评估函数就无法正确执行），查找函数调用会更容易。

以下函数递归地爬取表达式/调用树，返回所有像函数一样被调用的对象的名称：

```
find_calls <- function(x) {
  # Base case
  if (!is.recursive(x)) return()

  recurse <- function(x) {
    sort(unique(as.character(unlist(lapply(x, find_calls)))))
  }

  if (is.call(x)) {
    f_name <- as.character(x[[1]])
    c(f_name, recurse(x[-1]))
  } else {
    recurse(x)
  }
} 
```

对于一个简单的测试用例，它按预期工作：

```
x <- expression({
  f(3, g())
  h <- function(x, y) {
    i()
    j()
    k(l())
  }
})
find_calls(x)
# [1] "{"        "<-"       "f"        "function" "g"        "i"        "j"  
# [8] "k"        "l" 
```

# android - Geocode的服务不存在于真实设备上，我该如何解决？

> ID：14276734
> 
> 赞同：2
> 
> 时间：2013-01-11T11:00:15.553
> 
> 标签：android, service, geocoding

我有一些问题`geocoder`。
我发现了很多关于此的帖子，但大多数都解决了在真实设备上测试 apk 的问题。`geocoder`我对在真实设备上缺乏权利服务有疑问。我该如何解决？
我得到**`latitude`**and **`longitude`**，但我需要从任何类型的设备中获取**纬度和经度的地址。**有替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:07:41.327

地理编码器是不属于 AOSP 的 Google API 插件的一部分”

因此，任何不附带 Market、GMail 等的设备也将缺少 Geocoder 后端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:03:37.083

使用应用程序中的网络 Web 服务，例如对[反向地理编码的查询](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

# c++ - 使用 QStandardItemModel 从 QTreeView 中删除包含子项的行

> ID：14276736
> 
> 赞同：0
> 
> 时间：2013-01-11T11:00:27.457
> 
> 标签：c++, qt

我试过

```
 ModelIndexList list = ui->treeView->selectionModel()->selectedRows();
uint size = list.size();
if (size>0) {        
        for (int i = size - 1; i >= 0; --i) {              
            QModelIndex index = proxyModel->mapToSource(list[i]);
            standardItemModel->removeRow(index.row());
         } 
```

如果我选择根行，它会删除带有子项的行。如果我选择一些子树，那么只有 root 被删除，并且在尝试再次删除成为 root 应用程序崩溃的子节点之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:55:17.917

我在 removeRow 函数中缺少父参数。正确的代码在这里：

```
ModelIndexList list = ui->treeView->selectionModel()->selectedRows();
uint size = list.size();
if (size>0) {        
    for (int i = size - 1; i >= 0; --i) {              
        QModelIndex index = proxyModel->mapToSource(list[i]);
        standardItemModel->removeRow(index.row()
                 /*I was missing this -->*/ , index.parent());
     } 
```

# php - 如何检查数组是否已经在php中排序

> ID：14276737
> 
> 赞同：4
> 
> 时间：2013-01-11T11:00:28.440
> 
> 标签：php, arrays

我在 php 中有一个小任务。我有一个简单的数组。

```
Array
(
    [0] => 50
    [1] => 100
    [2] => 150

) 
```

是否有一个我可以使用的 php 内置函数，以便它可以返回 true 或 false，因此如果数组已经排序，或者任何其他 php 脚本，没有循环。我知道循环和条件很容易。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T11:02:12.313

如果它们相等，您可以将输入数组与已排序的数组进行比较。

```
$input  = array(50, 100, 150);
$sorted = array_values($input);
sort($sorted);

if ( $input === $sorted ) {
  // input array was already sorted
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T11:05:43.087

```
function arraySorted($array) {
    $a = $array;
    $b = $array;
    sort($b);
    if ($a == $b){
        return true;
    } else {
        return false;
    }
}

//test for [0],[3],[2]
$input  = array(0 => 250,
                3 => 100,
                2 => 150);
var_dump($input);
echo "<br />";
//array(3) { [0]=> int(250) [3]=> int(100) [2]=> int(150) }

var_dump(arraySorted($input));
echo "<br />";
//bool(false) 

//test for [0],[1],[2]
$input  = array(0 => 250,
                1 => 100,
                2 => 150);
var_dump($input);
echo "<br />";
//array(3) { [0]=> int(250) [1]=> int(100) [2]=> int(150) }

var_dump(arraySorted($input));
echo "<br />";
//bool(false)

//test for [0],[3],[2] and asc values
$input  = array(0 => 50,
                1 => 100,
                2 => 150);
var_dump($input);
echo "<br />";
//array(3) { [0]=> int(50) [1]=> int(100) [2]=> int(150) }

var_dump(arraySorted($input));
echo "<br />";
//bool(true) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T11:03:22.450

由于 PHP 不保存数组是否已排序的状态，因此它无法知道。唯一的其他解决方案是遍历数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T11:10:46.030

您可以使用`array_reduce`将每个元素与下一个元素进行比较，如果数组未排序，则引发异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T11:10:54.473

在这里，您可以尝试使用以下代码：

```
<?php

$sort = array(
    0 => 50,
    1 => 100,
    2 => 150
);

$default = $sort;
sort($sort);

$flag = true;
foreach($sort as $key=>$value)
    if($value!=$default[$key])
        $flag = false;  

if($flag)
    echo "Already sorted";  
else
    echo "Not Already sorted";  
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-12T09:05:32.127

我很惊讶没有人提议实际检查输入数组本身。也许这是我的 C++ 背景，但我不能不关心算法的复杂性，坦率地说，复制和排序数组只是愚蠢的。

```
namespace Util\Functions;

function compare($lhs, $rhs, $descendingOrder = false)
{
    $result = 0;
    if ($lhs < $rhs) {
        $result = -1;
    } else if ($lhs > $rhs) {
        $result = 1;
    }

    if ($descendingOrder) {
        $result *= -1;
    }

    return $result;
}

function isSorted(array $arr, callable $compareFunction = null)
{
    $count = count($arr);
    if ($count < 2){ 
        return true;
    }
    if ($compareFunction === null) {
        $compareFunction = 'Util\Functions\compare';     
    }

    for ($i = 1; $i < $count; $i++) {
        if ($compareFunction($arr[$i - 1], $arr[$i]) > 0) {
            return false;
        }
    }

    return true;
} 
```

PS我知道OP没有要求循环，但由于没有好的解决方案，我决定发布任何人都可以复制粘贴到他的项目的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T11:05:41.427

您可以将它与已经排序的数组进行比较，或者您可以通过 SQL 查询来控制它，`order by`如果数组来自数据库，则在 php 中没有内置函数来检查这一点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T14:32:33.130

无论键如何，这都将起作用：

```
$a = array(5 => 'aple', 3 => 'banana', 1 =>'citron');
$b = array(2 => 'orange', 1 => 'wine', 5 => 'apple');

echo arraySorted($a) ? "sorted" : 'not';
echo "\n";
echo arraySorted($b) ? "sorted" : 'not';

function arraySorted($array) {
   $sorted = $vals = array_values($array);
   sort($sorted);
       return $sorted === $vals;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-26T08:48:13.897

数组无法知道它们被排序的天气，因为有太多的排序。只是对于数字，可以有升序、降序、绝对升序、绝对......你明白了。**但是，检查数组是否已排序的算法与排序顺序无关**。

接下来是`isSorted`函数，如果给定`comparator`将检查数组元素是否按该顺序排序。这种方式`isSorted`不知道正在测试什么订单，而是将其委托给`comparator`.

由于问题以特定顺序显示数字，因此我还提供`comparator`了基于 php 的升序`<`。

```
$xs = [
  50,
  100,
  150
];

// Here is example of comparator, it have to take 2 elements, and return boolean signaling weather relationship you want to test holds true
$comparator = function($current, $next) {
  return $current < $next;
};

function isSorted($xs, $comparator){

  $answer = true;
  foreach ($xs as $key => $current) {
    if(!isset($xs[$key + 1]))
        continue;

    $next = $xs[$key + 1];

    $answer = $answer && $comparator($current, $next);
  }

  return $answer;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-10T11:31:19.583

我看到很多答案都在执行完整的数组排序，然后将整个原始文件与整个排序的副本进行比较。当然，这并不像它可能的那样有效。要检查数组是否已排序，您无需复制它、对其进行变异或排序——只需对其进行迭代并随时进行比较。带有早期`break`/的脚本`return`将完成绝对最少的工作。

（我也看到几个答案打电话`array_values()`，但我不明白为什么重新索引很有价值。）

例如：（[真假结果的演示](https://3v4l.org/Rlgob)）

```
$array = [50, 50, 100, 175];  // no break

$last = reset($array);
$isSorted = true;
foreach ($array as $value) {
    if ($last > $value) {
        $isSorted = false;
        break;
    }
    $last = $value;
}
var_export($isSorted);  //true 
```

只有当数组完全排序或最终元素未排序时，这才会完整运行您的数据。

但实际上，如果您关心数组是否已排序，您可能只需对其进行排序并继续编写脚本即可。

如果您需要一些能够执行超快速评估的东西，因为您正在处理大量数据，那么您可能想要使用 php 之外的语言。

# html - html5在运行脚本之前等待gps信号

> ID：14276738
> 
> 赞同：2
> 
> 时间：2013-01-11T11:00:34.370
> 
> 标签：html, geolocation, gps

我正在处理一个地理定位脚本，但我无法在 html5 中找到方法来等待 gps 传感器收到信号，然后再使用 navigator.geolocation.getCurrentPosition 等执行脚本。

有没有？

# laravel - 自定义错误 500 页面未使用 Event::override 显示 - Laravel

> ID：14276741
> 
> 赞同：0
> 
> 时间：2013-01-11T11:00:45.017
> 
> 标签：laravel, routes, http-status-code-404

我能够成功地使用 Event::Override 函数来处理 404 事件，但不能使用 500 事件。我只是希望事件能够通过一条消息重定向到首页，因为我可以很好地处理 404 事件。

为了让 500 个事件也重定向到我的首页，我还需要做些什么吗？请参阅 routes.php 文件中的以下代码：

```
Event::listen('404', function() {
    return Response::error('404');
});

Event::listen('500', function() {
    return Response::error('500');
});

Event::override('404', function() {
    Session::flash('error', '<strong>Error 404 - Not Found.</strong> The page you are     looking for is either <u>invalid</u> or <u>may no longer exist</u>. You are now back at our     home page.');
    return Redirect::to_route('home');
});

Event::override('500', function() {
    Session::flash('error', '<strong>Error 500 - Internal Server Error.</strong>     Something went wrong on our servers, apologies for that. Please contact us if this     persists.');
    return Redirect::to_route('home');
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:46:20.020

我已经能够通过直接在 \application\views\error 文件夹中更新 500 错误文件来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T10:08:44.540

我的一个移动应用程序需要`json`格式错误。我从 laravel forum 得到了它的解决方案。用于捕获 http 错误

```
App::error( function(Symfony\Component\HttpKernel\Exception\HttpException $exception) {
    $code   =  $exception->getStatusCode();
    // you can define custome message if you need
    return Response::json( array(
        'message' => $exception->getMessage() ,
        'code' => $code ,
    ) , $code);

}); 
```

捕获未处理的数据库错误，..

```
App::error(function(Exception $exception , $code )
{
    return Response::json(  array(
        'message' => $exception->getMessage() ,
        'code' => $code ,
    ), $code );
}); 
```

# asp.net - 在回发时获取 html 选择值

> ID：14276746
> 
> 赞同：1
> 
> 时间：2013-01-11T11:01:03.803
> 
> 标签：asp.net, razor, umbraco

我在这里遇到了一些麻烦，希望有人可以提供帮助：

我在 razor 脚本和 onChange 中动态填充一个 html 选择元素，我希望得到这个发布的值。它在页面刷新时回发，但我似乎没有得到选择的价值；我知道的原因是我正在传递一个类别并对其进行过滤。当我手动更改 URL 中的查询字符串并将其发布时，此过滤将起作用。

剃刀脚本：

```
 @using umbraco.MacroEngines
@inherits DynamicNodeContext
@{
    dynamic rootNode = @Model.NodeById(1066);
    DynamicNodeList list = rootNode.Descendants();
    List<dynamic> categories = new List<dynamic>(list.Cast<dynamic>());
    List<string> alias = new List<string> { "GeneralPage" };
    var filtered = categories.Where(n => alias.Contains(n.NodeTypeAlias));    
}
<form method="post" action="">
<select id="selectCategory" name="selectCategory" onchange="this.form.submit(); alertMe(selectCategory)">
    @foreach (var node in filtered)
    {
        <option value="@node.Name">@node.Name</option>
    }
</select>
</form>
<script type="text/javascript">
    function alertMe(selectCategory) {
        alert(selectCategory)
    }
</script> 
```

您会注意到我有一个提醒所选值的功能，但这会以 [object HTMLSelectElement] 的形式返回

如果需要，我可以发布更多代码以显示服务器上发生的情况，但正如我所说的过滤确实有效，但是我正在尝试通过以下方式捕获值：

```
string category = Request["selectCategory"];
            if (category != null)
            { 
```

非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:05:21.300

尝试：

```
ViewContext.RouteData.Values["selectCategory"] 
```

至于 javascript，您将 dom 引用传递给选择列表，而不是所选项目。如果你想看到它的价值，你需要使用

```
alert(selectCategory.value) 
```

# user-defined-functions - 使用分布式缓存将文件名从 Pig 传递到 Java UDF

> ID：14276749
> 
> 赞同：3
> 
> 时间：2013-01-11T11:01:13.743
> 
> 标签：user-defined-functions, apache-pig

我在我的 Java UDF 函数中使用了一个小映射文件，我想通过构造函数从 Pig 传递这个文件的文件名。

以下是我的 UDF 函数的相关部分

```
public GenerateXML(String mapFilename) throws IOException {
    this(null);
}

public GenerateXML(String mapFilename) throws IOException {
    if (mapFilename != null) {
        // do preocessing
    }
} 
```

在 Pig 脚本中，我有以下行

```
DEFINE GenerateXML com.domain.GenerateXML('typemap.tsv'); 
```

这适用于本地模式，但不适用于分布式模式。我在命令行中将以下参数传递给 Pig

```
pig -Dmapred.cache.files="/path/to/typemap.tsv#typemap.tsv" -Dmapred.create.symlink=yes -f generate-xml.pig 
```

我收到以下异常

```
2013-01-11 10:39:42,002 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1200: Pig script failed to parse: 
<file generate-xml.pig, line 16, column 42> Failed to generate logical plan. Nested exception: java.lang.RuntimeException: could not instantiate 'com.domain.GenerateXML' with arguments '[typemap.tsv]' 
```

知道我需要改变什么才能让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T05:54:19.350

现在问题已经解决了。

似乎当我使用以下参数运行 Pig 脚本时

```
pig -Dmapred.cache.files="/path/to/typemap.tsv#typemap.tsv" -Dmapred.create.symlink=yes -f generate-xml.pig 
```

`/path/to/typemap.tsv`应该是本地路径，而不是 HDFS 中的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-27T12:58:50.773

You can use `getCacheFiles` function in a Pig UDF and it will be enough - you don't have to use any additional properties like `mapred.cache.files`. Your case can be implemented like this:

```
public class UdfCacheExample  extends EvalFunc<Tuple> {

    private Dictionary dictionary;
    private String pathToDictionary;

    public UdfCacheExample(String pathToDictionary) {
        this.pathToDictionary = pathToDictionary;
    }

    @Override
    public Tuple exec(Tuple input) throws IOException {
        Dictionary dictionary = getDictionary();
        return createSomething(input);
    }

    @Override
    public List<String> getCacheFiles() {
        return Arrays.asList(pathToDictionary);
    }

    private Dictionary getDictionary() {
        // lazy initialization here
    }
} 
```

# c++ - 安全删除 C++ 隐藏的虚拟警告

> ID：14276751
> 
> 赞同：3
> 
> 时间：2013-01-11T11:01:17.807
> 
> 标签：c++, virtual, static-assert

我从 Sun C++ 5.10 编译器收到关于我正在更改的某些现有代码中的隐藏虚拟方法的编译警告。无论出于何种原因，作者都没有为给定的数据类型实现函数的覆盖。我在这里重现了这种情况：

```
// First the data types
struct Shape {};
struct Square : public Shape {};
struct Circle : public Shape {};
struct Triangle : public Shape {};

// Now the visitor classes
struct Virtual
{   
    virtual ~Virtual() {}

    virtual void visit( Square& obj ) {}
    virtual void visit( Circle& obj ) {}
    virtual void visit( Triangle& obj ) {}
};

struct Concrete : public Virtual
{   
    void visit( Square& obj ) {}
    void visit( Circle& obj ) {}
};

int main()
{   
    Concrete myConcrete;

    return 0;
} 
```

该类`Concrete`未实现`void visit( Triangle& obj ) {}`，这导致以下错误消息：

```
"pv_block.cpp", line 20: Warning: Concrete::visit hides the virtual function
Virtual::visit(Triangle&). 
```

该代码工作正常，但删除此警告消息会很好。因此，我想实现该功能，以使编译器满意，但不能使用它 - 最好在编译时检测到 - 因为目前显然没有必要。

有没有办法实现编译断言以允许编译但阻止使用？我无权访问 Boost 或 C++11。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:22:22.620

为什么要阻止使用？即使您（以某种方式）确实阻止了它，以致以下（A）无法编译：

```
Triangle t;
Concrete x;
x.visit(t); 
```

以下（B）仍然有效：

```
Triangle t;
Concrete x;
static_cast<Virtual&>(x).visit(t); 
```

所以IMO，试图阻止它被调用是没有意义的。我会通过在类中添加*using 声明*`Concrete`来解决警告，如下所示：

```
struct Concrete : public Virtual
{ 
    using Virtual::visit;
    void visit( Square& obj ) {}
    void visit( Circle& obj ) {}
}; 
```

这将使警告静音，并启用 (A)。但我不认为在这种情况下启用 (A) 是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:18:14.200

唯一真正的解决方案是禁用编译器警告。大概基类提供了一个默认实现，具体类对此很满意。否则，您可以提供一个实现，该实现转发到基类中的默认实现：

```
void Concrete::visit( Triangle& obj ) { Virtual::visit( obj ); } 
```

就个人而言，我认为这是多余的措辞，并且宁愿避免它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:38:30.377

> 因此，我想实现该功能，以使编译器满意，但不能使用它 - 最好在编译时检测到 - 因为目前显然没有必要。

一种方法是声明`Concrete::visit(Triangle&)`为私有：

```
struct Concrete : public Virtual
{   
   void visit( Square& obj ) {}
   void visit( Circle& obj ) {}
private:
   void visit (Triangle& obj);
}; 
```

请注意缺少实现。这消除了编译器警告，但这样做的代价是将当前导致的编译时错误更改`myConcrete.visit(myTriangle)`为链接时错误。

即使有这个声明，仍然可以通过将对象转换为父类来使`Concrete`对象`visit`成为对象： . 这是一个问题，而且是一个非常大的问题。目前的代码违反了 Liskov 替换原则。`Triangle``Concrete``static_cast<Virtual&>(myConcrete).visit (myTriangle)`

`using`使用Angew 提出 的解决方案可能会更好。现在类设计更接近于服从 Liskov 替换。`static_cast<Virtual&>(myConcrete).visit (mySquare)`请注意，关于(and `myCircle`)的 Liskov 替换仍然存在问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T11:08:13.130

虽然我不一定同意你的设计；我认为警告是有效的，应该作为一个例子来重新考虑。但是，如果这是您想要做的，您可以将声明放在那里并更改对受保护的访问或其他内容。

```
struct X {
   virtual void f() {}
   virtual void f(int) {}
};

struct Y : public X {
   virtual void f() {}
   virtual void f(int);
};

int
main() {
   Y y;
   y.f(10);
}

undefined reference to `Y::f(int)' 
```

# php - 在第一个 codeigniter 应用程序上出现错误

> ID：14276754
> 
> 赞同：0
> 
> 时间：2013-01-11T11:01:28.313
> 
> 标签：php, codeigniter, controller

我是 codeigniter 的新手，我正在从[这个链接的参考中尝试我的第一个应用程序](http://net.tutsplus.com/tutorials/php/codeigniter-basics/)

但我收到以下错误：

```
Fatal error: Class 'Controller' not found in /var/www/CodeIgniter/application/controllers/helloworld.php on line 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:17:54.770

应该这样做

```
Class Mycontroller Extends CI_Controller
{
    function __construct(){
        parent::__construct();
    }

    //other functions
}

Class Mymodel Extends CI_Model
{
    function __construct(){
        parent::__construct();
    }

    //other functions
} 
```

# java - 正式或实用的 XML 标记长度限制？

> ID：14276755
> 
> 赞同：2
> 
> 时间：2013-01-11T11:01:30.200
> 
> 标签：java, xml, xslt, xsd, etl

我没有在网上找到任何关于 xml 标签长度限制的提及。我正在寻找构建 XML 模式，作为第三方向我们发送数据的规范。

Schema（和数据）应该符合我们的自定义本体/数据字典，它是分层的和用户可定制的。

自然映射用于层次结构中的节点，用于命名 XSD/XML 中的类型和标签。但是，因为本体中的叶节点名称不必是唯一的，所以我正在考虑将层次结构中节点的完整路径编码为标记名称，并针对 XML 词法规则进行适当的修改。

因此，如果我的本体有多个“lisa”节点，它们在层次结构中的不同位置表示不同的东西，我可以使用节点的完整路径来生成不同的 XML 类型/标签名称，这样你就可以拥有

```
 <abe_homer_lisa> simpsons lisa ... </abe_homer_lisa>
 <applei_appleii_lisa> ... apple lisa </applei_appleii_lisa>
 <mona_lisa> and paintings </mona_lisa> 
```

...同一文件中任何不同“lisa”类型的数据，没有歧义。

我在网上找不到任何指定最大标签长度（或符合标准的引擎的最小支持标签长度）的东西。[（这里](http://ooatool.com/ooa/OOATool/ExtensibleMarkupLanguage/ExtensibleMarkupLanguage.pattern.html)很好地总结了 XML 的词法规则）

[关于属性长度](https://stackoverflow.com/questions/1334776/how-many-characters-allowed-in-xml-attribute)也有同样的问题，如果标准对属性没有规定限制，那么我怀疑标签是否有限制，但可能存在实际限制。

我怀疑即使是实际限制也会比我的需要大得多（我希望大多数时候事情会小于 255 个字符）；基本上，如果 Java XML 处理器、标准 ETL 工具和常见的 XSLT 处理器都可以处理比这大得多的标签，那么这将不是问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T14:06:43.553

我认为您不太可能找到无法处理 1K 字符名称的工具，此时您会遇到严重的性能和可用性问题，而不是硬限制。

但是你的设计是错误的。XML 是分层的，利用事实而不是试图与之抗争。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T11:07:25.670

我所知道的标签名称长度没有限制，但根据尝试解析 XML 的工具，即使 XML 规范可能没有提及任何限制，也可能存在一些实现限制。

另一方面，为什么不使用 XML 的原生和固有的层次结构。为什么将所有内容编码为 <abe_homer_lisa> 而不是将其编码为：

```
<abe>
    <homer>
        <lisa>simpsons lisa</lisa>
    </homer>
</abe>
<applei>
    <appleii>
        <lisa> ... apple lisa </lisa>
    </applei>
</appleii> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T11:16:05.720

我强烈建议使用已建立的 XML 机制来区分元素，即使用名称空间。这样你就会有例如

```
<lisa xmlns="http://example.com/simpsons">..</lisa>

<lisa xmlns="http://example.com/apple">...</lisa> 
```

W3C 模式语言以及 XSLT 和 XPath 都完全支持名称空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T14:10:59.797

根据上面 Michael Kay（XML 专家）和 Mihai Stancu 的评论，我会说我最初问题的答案是：

*   没有官方限制
*   绝对最低限度可能支持 1000 多个字符的工具
*   在此之前可能会遇到性能问题[鉴于处理这些文件的 XML 工具必须对非常长的字符串进行大量的字符串索引和比较] 和可用性方式
*   XML 命名空间和/或使用文档树的结构来提供区分上下文可能是“唯一化”标签名称的更好方法

我正在回答关于合法标签长度的那个非常具体的问题，因为我发现同样的问题是关于属性长度而不是标签，我认为如果其他人用谷歌搜索它，可能值得有“一个”答案。感谢所有受访者。关于我的设计是否合理的有效点；我将在别处解释理由。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T15:00:10.033

感谢那些指出可能有更明智的方法来解决潜在问题的人（确保 XML 模式中的类型/标记名称是唯一的）。

重新使用节点层次结构来提供上下文：我同意这通常是合适的。但是（我并没有真正解释我在 q 中的确切问题域）在这种特殊情况下，我必须处理的树结构数据字典中的用户可配置项分组是非常随意的，几乎与字典描述的数据中的关系。

所以在

```
 <abe>
   <homer>
     <lisa>lisa1</lisa>
   </homer>
 </abe> 
```

例如，另一个 lisa 节点应该在同一个 homer 节点下，还是在不同的节点下？本垒打应该在同一个abe节点下吗？对于有问题的数据，这种区别或多或少是没有意义的：就像根据某本书碰巧引用的索引页对数据进行分组一样。我想我可以任意调用并将其锁定在 XSD 中。

如果使用 XSL 之类的东西来提取数据，那没关系，//abe/homer/lisa 将获取所有 lisa 节点，而不管它们是如何组合在一起的。在实践中，有人可能会从 CSV 文件或其他任何东西生成这些文件，所以我希望结构尽可能平坦。

命名空间同上：尽管它们是为此目的而设计的（为名称提供上下文并确保在将不同类型的数据捆绑在一个文件中时意外冲突不会导致歧义），但实际上它们会添加一个额外的层对于从源系统生成数据的人来说，这很复杂。

在我的确切情况下，我希望这个任意分组中的名称冲突不太可能（并且反映使用不当），因此只需要*合理*处理，而不会对大多数情况施加不当惩罚。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-11T14:07:46.963

与传统观点相反，我强烈建议不要使用所谓的 XML 命名空间机制。久而久之，它会给你带来痛苦。对命名空间说不。你不需要它们。

您认为元素可以通过它们的上下文（在这种情况下，通过它们的“路径”表示）来区分的直觉是[正确](http://lists.xml.org/archives/xml-dev/200305/msg00864.html)的。但是，您将整个路径编码为元素名称的想法可能不是最佳的。考虑改为使用简单名称以及保存上下文或路径的属性。（将此属性命名为“上下文”或“路径”或任何更令人回味的东西！）这足以区分含义。[*]

对于不同的内容模型，您可以使用相同技术的变体。给每个不同的类型一个方便的名称，并在另一个名为“本体”的属性中记录“真实”名称。

至于您的问题，XML 规范对名称的长度没有任何固有的限制，尽管出于纯粹的技术原因，您可能会发现某些地方引用了 65536 个字符的限制。同样的“限制”也可能适用于属性值文字的长度。每个原子名称平均有 20 个字符，20 级层次结构仍然少于 500 个字节的路径，因此您可能无需担心。

[*] 注意：这种技术实际上很古老，但在 XML 思维空间中几乎完全被遗忘了。例如，在 HTML 中，有一个单一的元素类型被命名为涵盖所有类型的 GUI 控件，并且由于 ' '*属性*`INPUT`而没有混淆。`type`

# symfony - Symfony 2.1 设置语言环境

> ID：14276756
> 
> 赞同：6
> 
> 时间：2013-01-11T11:01:32.667
> 
> 标签：symfony, internationalization, symfony-2.1

有人知道如何在 Symfony2.1 中设置语言环境吗？

我正在尝试：

```
$this->get('session')->set('_locale', 'en_US'); 
```

和

```
$this->get('request')->setLocale('en_US'); 
```

但是这些都没有任何效果，devbar告诉我：

> 会话属性：无会话属性

无论如何，它始终是使用的后备语言环境，如 config.yml 中定义的那样

（PS：我正在尝试按照[此处所述设置翻译系统](http://symfony.com/doc/current/book/translation.html#book-translation-locale-url)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T05:49:12.030

尽管 Symfony 2.1 声明您可以通过 Request 或 Session 对象简单地设置语言环境，但我从未设法让它工作，设置语言环境根本没有效果。

所以我最终使用了一个监听器加上树枝路由来处理语言环境/语言：

听者：

```
namespace FK\MyWebsiteBundle\Listener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpKernel\KernelEvents;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class LocaleListener implements EventSubscriberInterface
    {
    private $defaultLocale;

    public function __construct($defaultLocale = 'en')
    {
        $this->defaultLocale = $defaultLocale;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        $request = $event->getRequest();
        if (!$request->hasPreviousSession()) {
            return;
        }

        if ($locale = $request->attributes->get('_locale')) {
            $request->getSession()->set('_locale', $locale);
        } else {
            $request->setLocale($request->getSession()->get('_locale', $this->defaultLocale));
        }
    }

    static public function getSubscribedEvents()
    {
        return array(
            // must be registered before the default Locale listener
            KernelEvents::REQUEST => array(array('onKernelRequest', 17)),
        );
    }
} 
```

在 service.xml 中注册监听器：

```
<service id="fk.my.listener" class="FK\MyWebsiteBundle\Listener\LocaleListener">
    <argument>%locale%</argument>
    <tag name="kernel.event_subscriber"/>
</service> 
```

路由必须如下所示：

```
homepage:
pattern:  /{_locale}
defaults: { _controller: FKMyWebsiteBundle:Default:index, _locale: en }
requirements:
    _locale: en|fr|zh 
```

并通过以下方式处理路由：

```
{% for locale in ['en', 'fr', 'zh'] %}
    <a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'_locale' : locale})) }}">
{% endfor %} 
```

这样，当您单击链接更改语言时，将自动设置区域设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:27:07.417

您在 parameters.yml 中设置语言环境。

```
[parameters]
...
    locale            = en 
```

您的 config.yml 的后备参考 %locale% 是上述 parameters.yml 文件中的设置。

如果您尝试即时设置它，那么这应该可以工作：

```
$this->get('session')->setLocale('en_US'); 
```

通过直接打印出来测试它：

```
print_r($this->get('session')->getLocale()); 
```

## 编辑

在 2.1 中，区域设置现在存储在请求中，但仍可以在会话中设置。[http://symfony.com/doc/2.1/book/translation.html#handling-the-user-s-locale](http://symfony.com/doc/2.1/book/translation.html#handling-the-user-s-locale)

```
$this->get('session')->set('_locale', 'en_US');
// setting via request with get and setLocale
$request = $this->getRequest();
$locale = $request->getLocale();
$request->setLocale('en_US'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-04T14:00:56.210

它不是：

```
$this->get('request')->setLocale('en_US'); 
```

但：

```
$this->get('request')->getSession()->set('_locale', 'en_US'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T16:39:46.777

来自 symfony 食谱：

“区域设置存储在请求中，这意味着在用户请求期间它不是“粘性”。在本文中，您将学习如何使用户的区域设置“粘性”，以便一旦设置，相同的区域设置将用于每个后续请求。”

[http://symfony.com/doc/current/cookbook/session/locale_sticky_session.html](http://symfony.com/doc/current/cookbook/session/locale_sticky_session.html)

当您设置语言环境并使用 symfony 分析器（在开发模式下）查看子请求时，您会注意到这一点。

# backbone.js - Alloy Backbone - 如何处理多级 JSON 集合

> ID：14276757
> 
> 赞同：0
> 
> 时间：2013-01-11T11:01:31.347
> 
> 标签：backbone.js, collections, titanium, appcelerator

我正在使用 Appcelerators Titanium 上的新合金框架，我完全迷失了它的主干处理。

无论如何，我的问题是我得到了一个看起来像这样的深层多级 json 对象：

```
[{
    title: "Bla",
    id: 0,
    content: "lorem ipsum dolor sit amet..",
    articles: [
        {
            title: "bla2",
            content: "bla bla bla",
            nr: "article 1"
        },
        {
            title: "bla3",
            content: "bla baasdadla bla",
            nr: "article 2"
        }
    ]
},
{
    title: "Bla 2",
    id: 1,
    content: "lorem ipsum dolor sit amet..",
    articles: [
        {
            title: "bla3",
            content: "bla bla bla",
            nr: "article 10"
        },
        {
            title: "bla4",
            content: "bla baasdadla bla",
            nr: "article 11"
        }
    ]
}]; 
```

我成功地实现了它，所以我得到了一个带有第一级标题的漂亮 TableView，但现在我需要访问第二级，这就是我失败的地方。

我在一个集合中得到了所有东西

```
 var myCollection = Alloy.createCollection('bla');
    myCollection.add(MyBigBigBigJson); // see above
    myCollection.fetch(); 
```

我的 View.xml：

```
<Alloy>
    <Collection src="bla">
    <TableView dataCollection="bla">
        <TableViewRow>
            <Label text="{title}" />
        </TableViewRow>
    </TableView>
</Alloy> 
```

现在，我如何访问，比如说第二级的内容？

我试过了：

```
 myCollection.at(0)  // first object in my collection ( where title = "Bla" )

    myCollection.at(0).articles[0].content // gives me an error and my app crashes...

    myCollection.at(0).articles // undefined 
```

好吧，我不知道如何获得文章，然后是内容或标题。

任何人都可以帮助我吗？我希望我已经把一切都说清楚了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:03:54.283

您需要使用[model.get](http://backbonejs.org/#Model-get)：

```
myCollection.at(0).get("articles")[0].content 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:42:03.033

您可以采取的另一种方法是在模型上使用 toJSON() 来获取属性。

```
myCollection.at(0).toJSON().content 
```

at(0) 指定模型的索引，您使用 JSON() 来发送回属性。然后你可以从那里指定属性。

# c++ - 仅计算时算法速度快 - 将计算数据写入输出缓冲区时速度慢

> ID：14276760
> 
> 赞同：3
> 
> 时间：2013-01-11T11:01:40.983
> 
> 标签：c++, optimization

我有一个算法可以对数组的元素进行一些计算。我想重新使用输入数据缓冲区将结果写入其中。就数据遍历模式而言，它看起来几乎完全一样（在该 for 循环中发生的唯一其他事情是一些指针和计数变量的增量）：

```
int *inputData = /*input data is here */;
for(int i=0;i<some_value;++i)
{
      int result = do_some_computations(*inputData);
      *inputData = result;
      ++inputData;
} 
```

现在有趣的部分：inputData 包含大约 600 万个元素。如果我注释掉对 inputData 数组的写入，那么算法看起来基本上是这样的：

```
int *inputData = /*input data is here */;
for(int i=0;i<some_value;++i)
{
      int result = do_some_computations(*inputData);
     // *inputData = result;
      ++inputData;
} 
```

该算法经过一系列约 100 次测量，平均耗时约 7 毫秒。但是，如果我留下写入，算法大约需要 55 毫秒。写“*inputData = do_some_computations(*inputData);” 而不是现在的方式对性能没有影响。使用单独的 outputBuffer 也没有什么区别。

这是不好的。该算法的性能对于程序的要求是绝对关键的。我对 7 毫秒很满意，但对 55 毫秒很不满意。

为什么这个单一的回写会导致如此大的开销，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:19:37.703

您的代码在非回写版本中被优化为无。为了证明这一点，假设一个 5GHz 单核 CPU 然后：-

7ms = 35,000,000 次循环

600 万个项目 = 35/6 = 每个项目 5.8 个周期 = 没有完成很多工作

对于慢速版本：-

55ms = 275,000,000 个周期

600 万个项目 = 275/6 = 每个项目 45.8 个周期 = 每个项目的工作量要多得多

如果要验证这一点，请查看编译器的程序集输出。

# url-rewriting - wordpress 插件制作友好的 URL 和访问变量

> ID：14276769
> 
> 赞同：1
> 
> 时间：2013-01-11T11:02:14.763
> 
> 标签：url-rewriting, wordpress, seo

几天来，我一直在寻找对我的问题的特定答案。我已经为 wordpress 编写了一个自定义插件，我们将在我们的网站上使用它。将其作为自定义插件比尝试使用或破解现有插件更容易。

例如，假设我们正在销售汽车。我的插件可以让我们创建一辆新车，上传一张照片并写关于那辆车的评论。这一切都是通过我的插件完成的。

我现在需要使用友好的 url 将其集成到现有站点。

我想`domain.com/cars/ford-focus/2234`作为网址。看起来像`index.php?pagename=cars&model=matched[1]&otherid=matched[2]`

也`domain.com/category/hatchback`将是`index.php?pagename=category&cat=matched[1]`

这两个 url 都会调用一个函数，我将在页面上显示记录。

对于是否创建一个名为“汽车”的页面并拥有`[shortcode]`或是否处理插件中的所有内容并重写 url，我真的很挣扎。我已经尝试了各种方法，但它只是不起作用。我不知道我是否完全理解它的工作方式！？

另外 - 我已经尝试过使用自定义帖子类型等的路线，但出于我们的需要，这是不正确的。

谢谢你的帮助！！

# java - 集成测试每个测试具有不同属性值的弹簧配置

> ID：14276772
> 
> 赞同：2
> 
> 时间：2013-01-11T11:02:23.470
> 
> 标签：java, spring, dependency-injection, integration-testing

我们有一个 spring 应用程序，它以几种方式之一运行，具体取决于特定属性，它必须是一小组值中的一个。当应用程序启动时，这个属性被传递给一个工厂，然后根据它构建稍微不同的 bean 实现。

我想为此控件的功能编写一个集成测试，以确保它在属性设置为各种值时工作；所以它需要运行一个属性设置为 1 的测试，一个属性设置为 2 的测试，等等。每个测试都需要根据需要设置属性，然后重新加载配置，以便正确重新配置所有内容。

在每个测试中获取上下文并手动刷新它似乎很简单，但是如何在运行时在测试中注入这些不同的属性来控制呢？有没有更好的方法来组织这种配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:08:33.930

我将回答你的第二个问题......那么，*有没有更好的方法来组织这种配置？*对于您的情况来说，这可能会让您不知所措，但是您是否看过 Spring Profiles？它可以满足您的需求，它是 Spring 3.1 中引入的新功能，因此 Spring 团队似乎选择了解决此类问题的方法。

这里有一个很棒的教程：http: [//blog.springsource.org/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/](http://blog.springsource.org/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:36:38.757

我最终找到了一种直接执行此操作的方法。它有点混乱，但*实际上*并不算太糟糕。

最初，测试是使用@ContextConfiguration 运行的，然后`new TestContextManager(getClass()).prepareTestInstance(this);`在@Before 中进行初始化（单独初始化，因此我们可以使用Spring 之外的运行器）。

我将其扩展为首先注册一个文本执行侦听器，只要有一个可用的时候，它就会将 TestContext 抓取到测试本身中：

```
contextManager.registerTestExecutionListeners(new AbstractTestExecutionListener() {
    @Override
    public void prepareTestInstance(TestContext freshTestContext) throws Exception {
        testContext = freshTestContext;
    }
}); 
```

然后测试本身将一个属性注入到自定义的 PropertyPlaceholderConfigurer 中（非常简单：覆盖 resolvePlaceholder，调用 super.resolvePlaceholder，除非您之前明确设置了该属性），一旦它知道该属性的实际值是什么（不幸的是，直到实际测试） ，并调用：

```
testContext.markApplicationContextDirty();
contextManager.prepareTestInstance(this); 
```

这使得 TestContext 重建应用程序上下文，现在使用新更改的属性值。

最后，您需要记住在测试之间重置属性，并可能将整个类标记为@DirtiesContext，以阻止它干扰您的其他测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:15:45.067

考虑使用设置环境的 JVM 系统属性（例如“my.env=sit”），告诉配置器使用哪个属性文件。例如：

```
<context:property-placeholder   
    location="classpath:db-${my.env}.properties"/> 
```

如果“my.env”属性设置为“sit”，那么 PropertyPlacementConfigurer 显然会寻找一个名为“db-sit.properties”的文件。

不要忘记设置`ignoreUnresolvablePlaceholders`为true。这将确保配置器在找不到属性时不会失败。

# jquery - 如何使用jQuery从字符串中删除最后一个逗号

> ID：14276773
> 
> 赞同：5
> 
> 时间：2013-01-11T11:02:24.933
> 
> 标签：jquery

我将多个选定的选项值存储到文本框并用逗号连接，但不想添加到字符串的最后。听到是我的代码。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<select id="garden" name="garden" multiple="multiple">
  <option value="1">Flowers</option>
  <option value="2">Shrubs</option>
  <option value="3">Trees</option>
  <option value="4">Bushes</option>
  <option value="5">Grass</option>
  <option value="6">Dirt</option>
</select>
<input type="text" name="store" id="store" />
<script>
$("#garden").change(function () {
  var str = "";
  $("select option:selected").each(function () {
        str += $(this).val() + ",";
      });
    $('#store').val(str).attr('rows',str.length) ;
})
.trigger('change');
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T11:04:44.330

您可以使用 .substring() 执行此操作：

```
 $('#store').val(str.substring(0,str.length-1)).attr('rows',str.length-1) ; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-11T07:20:09.510

只需使用，

取而代之的是

```
 $('#store').val(str).attr('rows',str.length) ; 
```

利用

```
 str=str.slice(0,-1); 
```

这足以省略最后一个逗号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:05:34.570

`.substring`在你完成的字符串上使用

```
var str = "";
$("select option:selected").each(function () {
    str += $(this).val() + ",";
});
str = str.substring(0, str.length - 1); // remove the last char in your case the ,
$('#store').val(str).attr('rows',str.length) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:07:55.040

试试这个代码...

```
$('#store').val(str.substring(0,str.lastIndexOf(','))).attr('rows',str.length-1) ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T11:09:59.140

```
$('#store').val(str.substr(0,str.length-1)).attr('rows',str.length-1) ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T11:10:35.307

使用`.slice(start, end)`这种方式：

```
$('#store').val(str.slice(0,-1)).attr('rows',str.length); 
```

`end`in slice`'-'`将从字符串中的最后一项中减去。

# c# - 从 C# 禁用邮箱 cmdlet

> ID：14276780
> 
> 赞同：0
> 
> 时间：2013-01-11T11:02:50.520
> 
> 标签：c#, powershell, exchange-server

我创建了一个为用户创建/删除交换帐户的 C# 控制台应用程序。我在开发机器上安装了“Microsoft Server Exchange 2010”。伪代码如下所示：

```
public Runspace getRunspace()
{
    RunspaceConfiguration rsConfig = RunspaceConfiguration.Create();
    PSSnapInException snapInException;
    PSSnapInInfo snapinInfo = rsConfig.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.E2010", out snapInException);
    Runspace runspace = RunspaceFactory.CreateRunspace(rsConfig);
    runspace.Open();
    return runspace;
}

public void createMailBox(string login)
{
    PowerShell powershell = PowerShell.Create();
    powershell.Runspace = getRunspace();
    PSCommand command = new PSCommand();
    command.AddCommand("Enable-Mailbox");
    command.AddParameter("Identity", login);
    command.AddParameter("Database", "Database01");
    powershell.Commands = command;
    powershell.Invoke();
    powershell.Dispose();
}

public void deleteMailBox(string login)
{
    PowerShell powershell = PowerShell.Create();
    powershell.Runspace = getRunspace();
    PSCommand command = new PSCommand();
    command.AddCommand("Disable-Mailbox");
    command.AddParameter("Identity", login);
    command.AddParameter("Confirm", false);
    powershell.Commands = command;
    try
    {
        powershell.Invoke();
    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message);
    }
    powershell.Dispose();
} 
```

问题是 createMailBox 方法创建交换帐户没有任何问题，但 deleteMailBox 方法不会禁用 Exchange 帐户，也不会引发任何错误/异常。

我怀疑问题出在“确认”参数上。我试过了

```
powershell.AddScript("Disable-Mailbox -Identity " + login + " -Confirm:$false") 
```

但这也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:32:22.857

检查[错误流](http://msdn.microsoft.com/en-us/library/system.management.automation.psdatastreams.error%28v=vs.85%29.aspx)是否存在错误。

```
powerShell.Streams.Error 
```

# java - NumberAxis labelname（不是刻度标签）大小和字体

> ID：14276781
> 
> 赞同：0
> 
> 时间：2013-01-11T11:02:52.997
> 
> 标签：java, fonts, jfreechart, title, labels

好的！所以，我有一个大图表，其中包含[双轴示例中的几个元素](http://www.java2s.com/Code/Java/Chart/JFreeChartDualAxisDemo.htm)

```
final NumberAxis domainAxis = new NumberAxis("lulu");

// add the axis to the plot, map some sets, and a renderer 
```

现在我的问题是 Y 轴标题的大小和字体已被修改，并且在主要 Y 轴上正确显示。在第二个（有问题的“lulu”）中，我得到了一个自定义字体和大小。显然，两者不匹配，我需要更改辅助 NumberAxis 标题标签的字体和大小以与原始标签相对应。

除了以我自己的字体和大小对 NumberAxis 和插件进行子类化之外，还有什么方法可以更改我为标题标签获得的自定义字体和大小？如果 JFreechart 的开发人员没有想到这一点，我会感到惊讶，尤其是考虑到双轴示例！

任何想法/建议/解决方法都非常受欢迎！

干杯，

提比

PS 我本来希望 Y 轴标题的属性（在 XYplot 中）适用于所有现有的轴，而不仅仅是第一个轴......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:08:04.903

这将第一个轴的字体设置为第二个轴：

```
plot.getRangeAxis(1).setLabelFont( plot.getRangeAxis(0).getLabelFont() ) 
```

# batch-file - 如果最后一个字符是使用批处理文件的分号，则将行与下一行合并

> ID：14276782
> 
> 赞同：5
> 
> 时间：2013-01-11T11:02:59.250
> 
> 标签：batch-file

我有一个包含以下 4 行的文件。

```
A;1;abc;<xml/>;
;2;def;<xml
>hello world</xml>;
;3;ghi;<xml/>; 
```

使用批处理文件，我需要合并行，以便如果该行不以分号 (;) 结尾，则将下一行合并到当前行中。

所以期望的输出应该是

```
A;1;abc;<xml/>;
;2;def;<xml>hello world</xml>;
;3;ghi;<xml/>; 
```

我对批处理脚本不是很熟悉，但尝试使用`for /F`但到目前为止没有运气。

据我了解，逻辑应该是检查每一行的最后一个字符，如果它不是分号，则将下一行读入当前行。

除此之外，我设法获得了该行的最后一个字符，但我的脚本仅在不存在时读取该行；. 有任何想法吗？

```
@echo off
for /f "tokens=*" %%i in (myfile.txt) do (
  set var=%%i
  echo %%i
  if "%var:~-1%"==";" (
    echo test
  )
) 
```

注意：上面的查询只读取第 1 行和第 3 行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T13:58:14.820

你的代码有很多问题:)

1）正如您所说，您的代码忽略以`;`- 这是默认的 FOR /F EOL 选项开头的行。但是由于“TOKENS=*”，您的代码还会从每一行中删除前导空格。您需要将 EOL 和 DELIMS 都设置为空。语法很奇怪，但它有效：

```
for /f delims^=^ eol^= %%i ... 
```

2）您尝试在带括号的代码块中设置和扩展 var 。这是行不通的，因为在解析行时会发生扩展，并且会立即解析整个代码块。所以 的值`%var%`是循环执行之前存在的值。当然不是你想要的。解决方案是使用延迟扩展。从命令提示符键入`FOR /?`有关延迟扩展的更多信息（大约在帮助列表的一半处）

3) 对于包含的变量内容，`!`如果在启用延迟扩展时进行扩展，则会损坏。解决方案是在循环中根据需要打开和关闭延迟扩展。但这会导致复杂性，因为您需要在 ENDLOCAL 屏障上保留生长线的值。我使用 FOR /F 将值传输穿过障碍。

这是一个完整的批处理脚本，应该可以完成这项工作。它的局限性在于它不能处理大于 ~8191 字节的最大长度的行。

***此代码已被重新​​编写以修复一个重大错误***

```
@echo off
setlocal disableDelayedExpansion
set "ln="
set "print=0"
for /f delims^=^ eol^= %%i in (myfile.txt) do (
  set "var=%%i"
  setlocal enableDelayedExpansion
  for /f delims^=^ eol^= %%A in ("!ln!!var!") do (
    if "!var:~-1!"==";" (
      endlocal
      echo %%A
      set "ln="
    ) else (
      endlocal
      set "ln=%%A"
    )
  )
) 
```

**SET /P 解决方案**

有一个更简单的解决方案可以立即打印每一行，这样您就不必担心跨 ENDLOCAL 传输变量。`;`不以 SET /P结束的行不带换行符打印。

此解决方案具有以下限制：

1) 通过 SET /P 打印的行将去掉前导空格。此限制仅适用于 Vista 和更新版本的 Windows。在 XP 上这不是问题。

2）感谢David Ruhmann，我现在知道如果该行以`=`. 非常不幸:(

```
@echo off
setlocal disableDelayedExpansion
set "ln="
for /f delims^=^ eol^= %%i in (myfile.txt) do (
  set "var=%%i"
  setlocal enableDelayedExpansion
  if "!var:~-1!"==";" (echo !var!) else (<nul set /p ="!var!")
  endlocal
) 
```

**混合批处理/JScript 正则表达式解决方案（防弹？）**

我编写了一个混合批处理/JScript REPL.BAT 实用程序，该实用程序允许简单的正则表达式搜索和替换文件内容。它使工作变得非常容易。

以下命令适用于任何输入，没有限制。它已更新为支持 Windows 和 Unix 风格的行。而且它比纯批处理解决方案要快得多。

```
findstr "^." myfile.txt|repl "([^;\r])\r?\n" "$1" m >"outFile.txt" 
```

这是 REPL.BAT 实用程序。完整的文档嵌入在脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T16:23:40.277

## 无延迟扩展

```
@echo off
setlocal EnableExtensions DisableDelayedExpansion
for /f "tokens=* eol=" %%L in (myfile.txt) do (
    <nul set /p ="%%L" 2>nul                         %= Fixed Limitation 3 =%
    set "xLine=%%L"
    call set "xLine=%%xLine:"=%%"                    %= Fix for Limitation 2 =%
    call :NewLine
)
endlocal
pause >nul
goto :eof

:NewLine
if "%xLine:~-1%"==";" echo.
goto :eof 
```

## 延迟扩展

```
@echo off
setlocal EnableExtensions DisableDelayedExpansion
for /f "tokens=* eol=" %%L in (myfile.txt) do (
    <nul set /p ="%%L" 2>nul                         %= Fixed Limitation 3 =%
    setlocal EnableDelayedExpansion
    set "xLine=%%L"
    set "xLine=!xLine:"=!"                           %= Fix for Limitation 2 =%
    if "!xLine:~-1!"==";" echo.
    endlocal
)
endlocal
pause >nul 
```

## 限制：（两个版本相同）

1.  由于该命令，行可能不以等于**=**字符开头。`<nul set /p "=%%L"`
2.  ~~由于该命令，行可能不以双引号**"字符结尾。**`if "<var>"==";" echo.`~~
3.  ~~行首的双引号**"**字符会因为`<nul set /p "=%%L"`命令丢失。~~（dbenham解决）
4.  `"tokens=* eol="`由于该选项，行首的空格将被修剪。`delims^=^ eol^=`由于该`set /p`命令，使用该选项的 Windows Vista 或更高版本也会出现同样的问题。我选择`tokens`在所有版本的 Windows 中实现一致性的方法。
5.  批处理行长度限制。8191 字节。请参阅[xp 批处理文件中的行长度限制？](https://stackoverflow.com/questions/9575644/line-length-limit-in-xp-batch-file)和[http://support.microsoft.com/kb/830473](http://support.microsoft.com/kb/830473)

**注意：**这些限制都不会导致脚本崩溃，而是 1 和 3 会导致这些行被跳过，而 4 只会修剪行中的前导空格。

## 更新

我找到了一个（仅显示！）由命令`=`引起的等号和空间修剪问题的解决方案。`set /p`但是，它要求在批处理脚本中输入非显示字符。这必须通过编辑脚本的十六进制数据来完成。放置任何非空格、非问题字符（由 说明`.`），后跟退格字符（由 说明`0x08`），仅`%Var%`显示 的值。 **注意：**这不能作为文件输出的解决方案，因为未显示的字符也会输出到文件中。

```
set /p =".0x08%Var%" 
```

此 equals 问题的原因是该`set`命令在解析变量名时出现问题，并且不允许将 equals 包含在变量名中。

> SET 命令不允许等号作为变量名称的一部分。

这个问题一直存在，但由于 Vista+ 中添加的主要空间修剪问题而变得更加复杂。好分析：[http ://www.dostips.com/forum/viewtopic.php?f=3&t=4209](http://www.dostips.com/forum/viewtopic.php?f=3&t=4209)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T01:04:19.227

这是一个不使用该`set /P`命令的解决方案，因为这会引入一些限制。在这里，适用的行被连接在一个变量中，并在遇到尾随分号时立即输出，使用`echo`没有这样的限制。代码包含注释：

```
@echo off
setlocal EnableExtensions DisableDelayedExpansion

rem // Define constants here:
set "FILE=%~1" & rem // (input file from command line argument)
set "CHAR=;"   & rem // (character that marks the end of line)

rem // Initialise variables:
set "PREV=" & rem // (variable to collect lines to combine)
rem // Iterate through the lines of the given file:
for /F usebackq^ delims^=^ eol^= %%L in ("%FILE%") do (
    set "LINE=%%L"
    rem // Toggle delayed expansion to not lose `!` in text:
    setlocal EnableDelayedExpansion
    rem // Check last character of current line:
    if "!LINE:~-1!"=="%CHAR%" (
        rem /* Last character marks end of line, so output
        rem    collected previous lines and current one: */
        echo !PREV!!LINE!
        rem // Clear Cached previous lines:
        endlocal
        set "PREV="
    ) else (
        rem /* Last character does not mark end of line, so
        rem    do not output it but cache it in a variable;
        rem    the `for /F` loop lets the data pass `endlocal`: */
        for /F delims^=^ eol^= %%K in ("!PREV!!LINE!") do (
            endlocal
            set "PREV=%%K"
        )
    )
)
rem /* Output all remaining cached data in case the last line
rem    is not terminated by an end-of-line marker: */
if defined PREV (
    setlocal EnableDelayedExpansion
    echo !PREV!
    endlocal
)

endlocal
exit /B 
```

# android - 与应用内购买相关的崩溃

> ID：14276783
> 
> 赞同：2
> 
> 时间：2013-01-11T11:03:01.453
> 
> 标签：android, in-app-purchase

我有一个刚刚在市场上推出的应用程序，它采用应用程序内购买，它是由我几乎不理解的其他人的示例代码拼凑而成的。该代码似乎在大多数情况下都可以正常工作，但我有一台设备每次都会崩溃。它似乎在 gen 目录中的一些“生成的 java 文件”中崩溃，我在崩溃之前跟踪了最后几个步骤，如下所示：

```
protected static boolean isBillingSupported()
{
    if (amIDead())
    {
        return false;
    }
    Bundle request = makeRequestBundle("CHECK_BILLING_SUPPORTED");

    if (mService != null && request != null)
    {
        try
        {
            Bundle response = mService.sendBillingRequest(request); 
```

然后我进入这个方法并执行以下行......（见评论）

```
public android.os.Bundle sendBillingRequest(android.os.Bundle bundle) throws android.os.RemoteException
{
    android.os.Parcel _data = android.os.Parcel.obtain();
    android.os.Parcel _reply = android.os.Parcel.obtain();
    android.os.Bundle _result;
    try 
    {
        _data.writeInterfaceToken(DESCRIPTOR); // DESCRIPTOR was "com.android.vending.billing.IMarketBillingService"
        if ((bundle!=null))
        {
            _data.writeInt(1); // GOT HERE OK
            bundle.writeToParcel(_data, 0);
        }
        else 
        {
            _data.writeInt(0);
        }
        mRemote.transact(Stub.TRANSACTION_sendBillingRequest, _data, _reply, 0); // GOT HERE OK
        _reply.readException(); // GOT HERE OK  ... BUT THEN JUMPS TO XXXX
        if ((0!=_reply.readInt())) // WE NEVER REACH THIS LINE!
        {
            _result = android.os.Bundle.CREATOR.createFromParcel(_reply);
        }
        else
        {
            _result = null;
        }
    }
    finally // XXXX
    {
        _reply.recycle(); // THIS GETS EXECUTED
        _data.recycle(); // THIS GETS EXECUTED
    }
    return _result; // WE REACH HERE, BUT THAT'S THE LAST LINE I SEE BEFORE THE EXCEPTION APPEARS IN THE LOG OUTPUT
} 
```

日志文件显示以下内容：

```
01-10 22:54:00.730: W/dalvikvm(1292): threadid=1: thread exiting with uncaught exception (group=0x401cb760)
01-10 22:54:00.740: E/AndroidRuntime(1292): FATAL EXCEPTION: main
01-10 22:54:00.740: E/AndroidRuntime(1292): java.lang.NullPointerException
01-10 22:54:00.740: E/AndroidRuntime(1292):     at android.os.Parcel.readException(Parcel.java:1327)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at android.os.Parcel.readException(Parcel.java:1275)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at com.android.vending.billing.IMarketBillingService$Stub$Proxy.sendBillingRequest(IMarketBillingService.java:100)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at com.mycompany.mygame.BillingHelper.isBillingSupported(BillingHelper.java:64)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at com.mycompany.mygame.Shop.onClick(Shop.java:174)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at android.view.View.performClick(View.java:3122)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at android.view.View$PerformClick.run(View.java:11942)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at android.os.Handler.handleCallback(Handler.java:587)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at android.os.Looper.loop(Looper.java:132)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at android.app.ActivityThread.main(ActivityThread.java:4028)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at java.lang.reflect.Method.invokeNative(Native Method)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at java.lang.reflect.Method.invoke(Method.java:491)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
01-10 22:54:00.740: E/AndroidRuntime(1292):     at dalvik.system.NativeStart.main(Native Method)
01-10 22:54:02.770: I/dalvikvm(1292): threadid=4: reacting to signal 3
01-10 22:54:02.770: I/dalvikvm(1292): Wrote stack traces to '/data/anr/traces.txt' 
```

我不确定从这里去哪里，因为我对发生的事情完全感到困惑。我对如何或为什么会“生成”此代码感到困惑……大概即使我在这里看到了一个错误，我也无法对其进行编辑！此代码是 Android 操作系统的一部分吗？也许真正的错误在传递的包中？...欢迎所有提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:24:21.130

看起来该`android.os.Parcel.obtain()`命令返回 null，这将导致 NPE on `_reply.readException()`。

如果您尝试：

```
if ((_reply!=null)) {
    _reply.readException();
} else {
    Log.d(TAG, "_reply is null");
} 
```

**编辑**

看到这不起作用，我稍微挖掘了一下，发现了这个线程： [http](http://code.google.com/p/marketbilling/issues/detail?id=25) ://code.google.com/p/marketbilling/issues/detail?id=25 这似乎暗示这是一个答案：

> 当设备未接受许可协议并尝试拨打此行时会发生这种情况当我的客户刚刚购买了新设备并尝试运行我的应用程序时遇到了这个问题，该应用程序使用了 inApp 所以他没有在他的设备中打开市场应用程序并且因此，一旦您接受它，就不会接受该协议，此错误将不存在

# javascript - 使用 AJAX 调用时从数据库中获取数据

> ID：14276789
> 
> 赞同：0
> 
> 时间：2013-01-11T11:03:30.533
> 
> 标签：javascript, ajax, jsp, jakarta-ee, servlets

我是 Java EE 的新手。我正在使用一个显示一些技术领域的复选框。现在，我试图在单击特定技术字段时从一个表中获取选项标签中的特定数据。单击特定技术时，我正在使用 AJAX 调用生成下拉框，但无法从表中获取特定数据。我怎么能在jsp页面中做到这一点。我的代码如下

```
 <table bgcolor="#ffffff" class="style2">

        <tr>
            <td align="center" valign="middle">
                <select name="year">
                    <option value="Select">Select</option>>
                    <%
                                try {
                                    Class.forName("oracle.jdbc.driver.OracleDriver");
                                    Connection con = DriverManager.getConnection("jdbc:oracle:thin:@192.168.3.1:1521:wtlctax1", "****", "****");
                                    Statement stmt = con.createStatement();
                                    ResultSet rs = stmt.executeQuery("select exp_year.year from exp_year INNER JOIN technology ON exp_year.t_cd = technology.t_cd");

                                            while (rs.next()) {
                                                String str = rs.getString("year");
                                                String str1 = rs.getString("t_cd");
                    %>

                    <option value="<%=str%>"><%=str%></option>
                    <% } %>
                </select>
             </td>
        </tr>
        <%
                        }
                    catch (Exception e) {
                        System.out.println(e);
                    }

        %>
    </table> 
```

# sql - 恢复数据时出现 Sql Compact 错误

> ID：14276791
> 
> 赞同：0
> 
> 时间：2013-01-11T11:03:36.180
> 
> 标签：sql, sql-server-2008, sql-server-ce

我有这个代码：

```
public void FillData()
    {
        // 1 step. Open connection
        string conection = @"Data Source=|DataDirectory|db.sdf;Persist Security Info=False;";
        try
        {
            SqlCeConnection c = new SqlCeConnection(conection);
            c.Open();

            // 2 step. Create new DataAdapter
            using (SqlCeDataAdapter a = new SqlCeDataAdapter("SELECT * FROM USER", c))
            {
                // 3 step. Use DataAdapter to fill table
                DataTable t = new DataTable();
                a.Fill(t);
                // 4 step. Render data on the DataGridView
                dataGridViewUsers.DataSource = t;
            }
        }
        catch (SqlException e)
        {
            MessageBox.Show(e.Message);
        }

    } 
```

我可以连接到数据库，但`SqlCeDataAdapter`启动此错误：

`There was an error parsing the query. [Token line number = 1, Token line offset = 15, Token in error = USER]`

我的数据库有一个名为 的表`USER`，那么这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:04:30.733

USER 是保留字。`[USER]`像在查询中一样传递它。您的查询应该是这样的。

```
new SqlCeDataAdapter("SELECT * FROM [USER]", c)) 
```

# c# - 反序列化错误 ASP.NET MongoDB

> ID：14276802
> 
> 赞同：4
> 
> 时间：2013-01-11T11:04:12.280
> 
> 标签：c#, mongodb, rest, mongodb-.net-driver, 10gen-csharp-driver

我正在尝试通过 ASP.NET MVC 4 中内置的 REST api 检索 MongoDB 集合中的所有文档，当我输入 localhost:50491/api/document 时遇到错误：

> 反序列化 Acord_Rest_API.Models.Document 类的 Id 属性时出错：无法从 BsonType ObjectId 反序列化字符串。

我的控制器看起来像：

```
public class DocumentController : ApiController
{
    public readonly MongoConnectionHelper<Document> docs;

    public DocumentController()
    {
        docs = new MongoConnectionHelper<Document>();
    }

    public IList<Document> getAllDocs()
    {
        var alldocs = docs.collection.FindAll();
        return alldocs.ToList();
    }
} 
```

我的 MongoDB 文档看起来像这样？ ![在此处输入图像描述](../Images/812061f10fb52b94167350823304b204.png)

我在这里想念什么？

我连接到数据库的类：

```
public class MongoConnectionHelper<T> where T: class
{
    public MongoCollection<T> collection { get; private set; }

    public MongoConnectionHelper()
    {
        string connectionString = "mongodb://127.0.0.1";
        var server = MongoServer.Create(connectionString);
        if (server.State == MongoServerState.Disconnected)
        {
            server.Connect();
        }
        var conn = server.GetDatabase("Acord");
        collection = conn.GetCollection<T>("Mappings");
    }
} 
```

编辑这里是我的解决方案： ![在此处输入图像描述](../Images/e89d2d14e2b5644f2c782b3b24152564.png)

MongoConnectionHelper 连接到数据库， DocumentController 具有检索所有文档的方法，并且 Document 包含您在答案中建议的内容。

编辑这里是文档类：

```
[DataContract]
public class Document
{
    public ObjectId _id { get; set; }

    [DataMember]
    public string MongoId
    {
        get { return _id.ToString(); }
        set { _id = ObjectId.Parse(value); }
    }
    public IList<string> alldocs { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T11:10:13.940

Mongo Id 不是“字符串”，Mongo.Bson 库不会自动将其序列化为字符串。如果您使用的是 Mongo.Bson 库，则需要将类上的 id 属性设置为该库中可用的 ObjectId 类型。

这里的问题是.net 序列化程序不知道如何序列化自定义类型 ObjectId，它是 mongo 内置的 Id（不知道为什么）。它没有标记为 [Serializable]，因此您必须让 ASP.NET 绕过它或创建另一个没有的类并将其转换为字符串。

如果您需要在您的应用程序中使用一个字符串，您应该禁用 MongoId 到 xml 的序列化（如果这是您想要做的），那么您可以将这样的属性添加到您的类中：

```
[XmlIgnore]
public ObjectId _id { get; set; }

public string MongoId
{
    get { return _id.ToString(); }
    set { _id = ObjectId.Parse(value); }
} 
```

另一种方法是创建一个单独的映射类来管理返回数据。

编辑在这种情况下，您应该使用“选择加入”方法。这涉及将您的班级装饰成如下所示：

```
[DataContract]
public class Document
{
    public ObjectId _id { get; set; }

    [DataMember]
    public string MongoId
    {
        get { return _id.ToString(); }
        set { _id = ObjectId.Parse(value); }
    } 
```

...

DataMember 将仅标记这些属性以进行序列化。您是否为“文档”对象使用 POCO 类？如果是这样，上面应该可以正常工作。

但是，我建议创建“文档”对象的映射视图以公开传递。在这些情况下，您几乎总是想要与您的实际数据库实体略有不同的“合同”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-19T07:46:16.347

更简单的方法是告诉 MongoDB 将字符串字段视为 ObjectId。`BsonType`您可以通过使用属性轻松做到这一点。

```
[BsonRepresentation(BsonType.ObjectId)]
public string _id { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-09T14:16:22.620

我认为您缺少 [BsonId] 约定，因此您的课程应如下所示：

```
[DataContract]
public class Document
{
    [BsonId]
    public ObjectId _id { get; set; }

    [DataMember]
    public string MongoId
    {
        get { return _id.ToString(); }
        set { _id = ObjectId.Parse(value); }
    } 
```

# php - PHP OOP 接口的具体用法是什么？

> ID：14276803
> 
> 赞同：1
> 
> 时间：2013-01-11T11:04:19.927
> 
> 标签：php, oop, abstract-class, abstract

> **可能重复：**
> [接口与抽象类（通用 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)
> [接口或抽象类：使用哪一个？](https://stackoverflow.com/questions/1814821/interface-or-an-abstract-class-which-one-to-use)

[我对PHP 中的接口](http://php.net/manual/en/language.oop5.interfaces.php)有一些疑问：

如果`interface`作为实现它的类的一种蓝图，为什么不使用它`abstract parent classes`呢？

`interface`在什么情况下使用 a而不是a 更合适`abstract class`？

`abstract class`在什么情况下使用 a而不是 a更合适`interface`？

究竟是什么用途`interface`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:11:51.320

一个很大的区别是你不能扩展多个抽象类，但你可以实现多个接口。

所以通过这种方式，对象如果实现了多个接口，就可以有多种用途，并且可以在各种不同的场景中使用。

所以为了让这更具体...

```
interface Wine{
   function isPeppery();
}

interface Dessert{
   function hasBerries(){
}

class PortWine implements Wine, Dessert{
   function isPeppery(){
     returns false;
   }
   function hasBerries(){
     returns true;
   }
}

class BlackForestCake implements Dessert{
   function hasBerries(){
      returns true;
   }
 } 
```

通过这种方式，您可以在整个应用程序中拥有用于多种用途的对象。

# c - 在 C 中的 libcurl 库中设置 Headers 标志选项

> ID：14276807
> 
> 赞同：3
> 
> 时间：2013-01-11T11:04:27.940
> 
> 标签：c, libcurl

我正在做发布请求，为此我必须设置标题内容类型，`application/json`因为我正在编写以下代码：

```
struct curl_slist *headers = NULL;
headers = curl_slist_append(headers, "Accept: application/json");
headers = curl_slist_append(headers, "Content-Type: application/json");
headers = curl_slist_append(headers, "charsets: utf-8");
res = curl_easy_setopt(curl, CURLOPT_HEADER,headers); 
```

但是当我编译程序时，错误是

```
Accept: */*
Proxy-Connection: Keep-Alive
Content-Length: 22
Content-Type: application/x-www-form-urlencoded 
```

`application/json`请尽快帮我设置此内容类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T12:16:30.713

你必须把你的标题...

```
CURLOPT_HTTPHEADER 
```

...尽管...

```
CURLOPT_HEADER 
```

...意味着在输出中包含标题

所以你的解决方案可能只是替换`CURLOPT_HEADER`为`CURLOPT_HTTPHEADER`

# python - Django 中的模型历史

> ID：14276811
> 
> 赞同：8
> 
> 时间：2013-01-11T11:04:31.073
> 
> 标签：python, django, django-models, version, revision-history

**在 Django 中，如何处理与 Post 对象关联的图像的并发更改？**

这是以前提出过的问题，但并不完全涵盖相同的问题。我已经阅读了这些（[问题](https://stackoverflow.com/q/12144863/781909)、[问题](https://stackoverflow.com/q/10540111/781909)、[问题](https://stackoverflow.com/q/4157489/781909)和[问题](https://stackoverflow.com/q/1752585/781909)），但问题略有不同。

我有一个博客文章模型（速度的伪代码），其中包含标题、摘要和正文以及相关的图像。

```
class Post(models.Model):
    title = CharField
    abstract = TextField
    body = TextField

class Image(models.Model):
    post = ForeignKey(Post)
    imagefile = ImageField 
```

现在，我要添加的是存储此`Post`模型更改历史的能力。为此，我想到了两种可能性：

**可能性 1**

```
class PostHistory(models.Model):
    post = ForeignKey(Post)
    title_delta = TextField
    abstract_delta = TextField
    body_delta = TextField 
```

但是，这存在一个问题，即它正在存储没有更改的增量（例如，当`title`没有更改并且该`body`字段只有一个增量时。也就是说，当多个字段更改时，它适合 '1 revision == 1 complete修订'。

**可能性 2**

```
class PostRevision(models.Model):
    post = ForeignKey(Post)
    field = CharField #Field name
    delta = TextField 
```

通过两种不同的方法，这成功地为我提供了该领域的差异历史，我将使用[diff-match-patch](http://code.google.com/p/google-diff-match-patch/)生成它（比内置的[difflib](http://docs.python.org/2/library/difflib.html)性能略高）。我现在遇到的两个问题与主对象的生成有关（即链中的最高修订版）。

提出的问题是：**如何处理与 Post 对象关联的图像的并发更改？**这些将通过模型`body`字段中的引用进行更改`Post`（这是一个 Markdown 格式的文本字段，然后`POST`在表单上进行编辑以添加到图像字段的 URL 引用中）。处理这个问题的最佳方法是在修订版和对象上使用 M2M 字段`Post`，允许图像始终与`PostRevision`对象一起存储吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T16:48:03.697

我同意@rickard-zachrisson 的观点，即你应该坚持使用#1。我会做一些微妙的改变（顺便说一句伪代码）：

```
class AbstractPost(models.Model):
    title = CharField
    abstract = TextField
    body = TextField

    class Meta:
        abstract = True

class Post(AbstractPost):
    def save(self):
        post = super(Post, self).save()

        PostHistory.objects.create(
            post=post,
            title=post.title,
            abstract=post.abstract,
            body=post.body,
        )

class PostHistory(AbstractPost):
    post = ForeignKey(Post)

    class Meta:
        ordering = ['-pk']

class Image(models.Model):
    post = ForeignKey(Post)
    imagefile = ImageField 
```

您的最新版本将始终存在，`Post`并且您的更改历史记录按`pk`顺序排列，`PostHistory`易于区分更改。我会复制数据，因为存储很便宜并且存储增量是一个皮塔饼。如果您有多个编辑或想要将当前版本与原始版本进行比较，那么增量基本上是无用的。AbstractPost 中的任何模型更改都反映在`Post`和`PostHistory`中。

`Image`被锁定到 Post，所以事情保持整洁。您可以选择在 Post.save() 函数中清理图像，但我可能会选择 post_save 信号以保持代码更清洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:11:26.213

**我认为你应该坚持选项1。**

一个想法是拥有一个自动修订系统。这是我会做的事情并注意一些语法错误，我在脑海中打字

```
class A(models.Model):
    field1 = ...
    field2 = ...

    def save():
        if bla_bla_updated:
            A_revisions.objects.create(
                         field1=self.fields1, field2=self.fields2,
                         a=self)
        super(A, self).save()

class A_revision(models.Model):
    field1 = ...
    field2 = ...
    a = models.ForeignKey(A)
    revision = models.IntegerField()

    def save():
        self.revision = (A_revision.objects.get(a=self.a)
                                    .order_by('id').revision) + 1
        super(A_revision, self).save() 
```

# ruby-on-rails - Ruby 选择选项 if 语句

> ID：14276812
> 
> 赞同：0
> 
> 时间：2013-01-11T11:04:40.613
> 
> 标签：ruby-on-rails, ruby

在我的数据库中，我有 3 个字段：

```
name, cost, active 
```

我如何才能在选择（表单）中仅显示那些活动字段为真（1）的值？现在我有这样的代码：

```
= f.select :shipping_id, [["Select", "0"]] + @shippings.map{ |c| [c.name, c.id]}, {:required => true} 
```

如何映射，仅当 active 为 true 时？

笔记！我必须只在眼前这样做！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:09:30.787

尝试：

```
@shippings.select{|s| s.active}.map{|c| [c.name,c.id]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:31:38.540

在你的控制器中

```
@shippings = Shipping.where(:active => 1) 
```

# firebase - authClient.login 返回错误并显示“未经授权的请求来源”

> ID：14276815
> 
> 赞同：3
> 
> 时间：2013-01-11T11:05:09.367
> 
> 标签：firebase

这只是在过去几天内开始发生的，我的代码没有改变。我犯了一个错误，还是这是新的？

似乎这意味着我应该在 firebase forge 的安全规则中添加一条规则，以允许从我正在处理的域（在本例中为 localhost）进行访问，但我不知道在哪里可以找到该文档。

任何人都可以帮忙吗？我如何克服这个错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T16:09:47.807

随着 Firebase 简单登录的发布，其中包含许多基于 OAuth 的身份验证方法（Facebook、Twitter、GitHub 等），我们包含了“授权来源”的想法。如果没有此限制，恶意网站可能会伪装成您的应用程序并尝试代表您访问用户的 Facebook、Twitter 等数据。

通过将这些请求的域限制为您控制并已验证的域，我们可以保护您的用户数据。

要修复此错误，请登录 Firebase Forge（将您的 Firebase URL 放入浏览器），然后导航到左侧的“身份验证”面板。您可以在此处配置多个应用程序域，以逗号分隔。如果您对本地测试感兴趣，`127.0.0.1`请在您的应用程序域配置中进行设置，并确保您通过 访问页面`http://127.0.0.1/...`，而不是`http://localhost/...`. 我希望这会有所帮助！

# html - 在 Html.Textbox 上设置必需的属性

> ID：14276817
> 
> 赞同：54
> 
> 时间：2013-01-11T11:05:17.173
> 
> 标签：html, asp.net-mvc-3, razor

我正在寻找创建一个引导样式的文本框，具体来说，基于下面的确切示例：

```
<input class="span3" type="email" required> 
```

这是我到目前为止所拥有的：

```
@Html.TextBox("CustomerEmail", null, new { @class = "input-xlarge", type = "email", required = "required" }) 
```

但是，`required = "required"`显然不只是返回`required`。

所以，我的问题是，在使用 Html.Textbox 时，有什么方法可以强制它返回所需的，就像上面的第一个示例一样？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-11T11:20:38.057

我认为你应该这样使用

```
 @Html.TextBoxFor(model => model.Name, new { @class = "text", type = "email", required = "required" }) 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-03-12T00:30:59.293

尝试

```
new { required = string.Empty} 
```

顺便说一句，根据 W3C 文档，`required`是一个[布尔属性](http://www.w3.org/TR/html5/infrastructure.html#boolean-attribute)，我引用：

> 元素上存在布尔属性表示真值，不存在该属性表示假值。如果存在该属性，则其值必须是空字符串或与属性的规范名称匹配的不区分大小写的 ASCII 值，并且没有前导或尾随空格。

所以

```
required
required="required"
required="" 
```

所有的意思都是一样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T11:23:19.633

您似乎对文本框应用了不同的类：`input-xlarge`，而在您想要的标记中，它被称为`span3`.

所以：

```
@Html.TextBox(
    "CustomerEmail", 
    null, 
    new { 
        @class = "span3", 
        type = "email", 
        required = "required" 
    }
) 
```

就所需部分而言，这里的正确语法是`required="required"`，否则您只会得到损坏的 HTML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-12T21:12:29.543

我注意到你也可以使用。

```
required="true" 
```

有趣的是，无论如何，您都会在 Visual Studio 2015 中收到警告消息。我想知道这是否是需要更新的问题。

警告信息：

```
Severity    Code    Description Project File    Line    Suppression State
Message     Validation (ASP.Net): Attribute 'required' is not a valid attribute of element 'TextBox'. 
```

# android - 销毁 Android 中的活动问题

> ID：14276825
> 
> 赞同：1
> 
> 时间：2013-01-11T11:05:42.517
> 
> 标签：android, android-intent

嗨，我正在使用 android 等 iphone 中底部标签栏的按钮。我有三个屏幕并在所有屏幕中显示三个按钮。我对每个屏幕中的每个按钮都使用了以下编码。

```
Intent intentNavOne = new Intent(ScreenOne.this,
                    ScreenTwo.class);
            intentNavOne .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intentNavOne .addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);

            intentNavOne .addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            startActivity(intentNavOne ); 
```

现在的问题是有时导航的流程发生了变化。我只想要解决方案。任何其他方式来完成我的任务。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:10:53.057

调用`finish()`您开始新活动的活动，这将停止该活动的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:21:41.400

作为一名开发人员，我遇到了与您现在`buttons`在 iphone 中显示选项卡相同的问题，最后我切换到`tabbars`了 android。

我建议您使用`tabbars`而不是`buttons`作为导航将非常流畅，您不必为以前的烦恼而烦恼`activity`。

检查以下链接以`tabbars`在 android 中创建它们是很好的教程

[链接 1](http://www.technotalkative.com/android-tab-bar-example-1/)

[link2 用于 3.0 及更高版本的操作栏](http://vimaltuts.com/android-tutorial-for-beginners/android-action-bar-tab-menu-example)

如果您有更多问题，请告诉我

# python - 使用 Jinja2 的 HTML 模板 - 丢失

> ID：14276829
> 
> 赞同：10
> 
> 时间：2013-01-11T11:05:44.700
> 
> 标签：python, html, templates, jinja2

我正在尝试使用 Jinja2 在 python 中创建一个 html 模板。我有一个带有“template.html”的模板文件夹，但我不知道如何处理环境或包加载器。

我使用 easy_python 安装了 Jinja2 并运行了以下脚本。

```
from jinja2 import Environment, PackageLoader
env = Environment(loader=PackageLoader('yourapplication', 'templates'))
template = env.get_template('mytemplate.html')
print template.render() 
```

我收到以下错误，因为我不知道如何定义包/模块。请帮助我，我只想创建一个简单的模板。

```
 File "log_manipulationLL.py", line 291, in <module>
env = Environment(loader=PackageLoader('yourapplication', 'templates'))
 File "/usr/local/lib/python2.7/dist-packages/Jinja2-2.6-py2.7.egg/jinja2/loaders.py",    line 216, in __init__
provider = get_provider(package_name)
File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 213, in get_provider
__import__(moduleOrReq)
ImportError: No module named yourapplication 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-05-16T19:06:29.107

如果您不想要或不需要 Python 包，您可能应该使用[FileSystemLoader](http://jinja.pocoo.org/docs/2.9/api/#jinja2.FileSystemLoader)，如下所示：

```
from jinja2 import Environment, FileSystemLoader, select_autoescape
env = Environment(
    loader=FileSystemLoader('file/path/'),
    autoescape=select_autoescape(['html', 'xml']),
) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T11:14:13.170

`PackageLoader`期望使用常规点语法的实际 Python 模块。例如，如果您的结构如下所示：

```
myapp/
  __init__.py
  …
  templates/
    mytemplate.html 
```

您应该`myapp`用作模块名称。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-22T12:15:36.177

我使用以下代码解决了这个问题：

```
 env = Environment(loader=PackageLoader('scriptname', 
                                        templatesPath)) 
```

此代码在文件中的位置`scriptname.py`。

我不确定我的答案是否相关，但我想知道也许有人会觉得这个答案有用。如果我错了，请告诉我。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-07T13:51:46.387

PackageLoader 定义如下：

```
class PackageLoader(BaseLoader):
    """Load templates from python eggs or packages.  It is constructed with
    the name of the python package and the path to the templates in that
    package::

        loader = PackageLoader('mypackage', 'views')

    If the package path is not given, ``'templates'`` is assumed.

    Per default the template encoding is ``'utf-8'`` which can be changed
    by setting the `encoding` parameter to something else.  Due to the nature
    of eggs it's only possible to reload templates if the package was loaded
    from the file system and not a zip file.
    """ 
```

然后`__init__()`方法如下：

```
def __init__(self, package_name, package_path='templates',
             encoding='utf-8'): 
```

这让我们注意到这样的结构：

```
myapp/
  __init__.py
  ...
  templates/
    mytemplate.html 
```

`PackageLoader`这两个声明将具有相同的实例：

```
PackageLoader('myapp')
PackageLoader('myapp', 'templates') 
```

因此，如果您从`myapp/`路径中运行，那么您只需要说：

```
PackageLoader('templates', '') 
```

所以它只会`templates/`作为路径。如果您将第二个参数留空，它将尝试在`templates/templates`.

最后，您可以使用以下方法检查已加载的内容`list_templates()`：

```
PackageLoader('templates', '').list_templates() 
```

# svn - SVN合并问题

> ID：14276835
> 
> 赞同：0
> 
> 时间：2013-01-11T11:06:09.287
> 
> 标签：svn, merge, tortoisesvn, out-of-memory, svn-merge

我正在尝试从某个分支到我的本地工作区进行 svn 合并。

当我尝试合并时，它会花费大量时间并且会突然停止。

第二次，我打开 Windows 任务管理器并再次启动合并程序。我发现，在开始合并后几分钟，PF 使用率急剧上升，导致系统非常慢并且 PF 内存不足。因此程序崩溃。

接下来我尝试同时使用“--dry-run”和“--ignore-ancestry”选项，它成功完成。但是在删除 --dry-run 选项时，再次崩溃应用程序的故事。

我在 Windows 操作系统上使用 svn 1.6.0 客户端。

我怀疑是否与存储库或结构有关。如果我缺少任何东西，请建议我。

# c# - Ajax 多文件上传，多文件不上传

> ID：14276836
> 
> 赞同：0
> 
> 时间：2013-01-11T11:06:10.940
> 
> 标签：c#, asp.net

我正在使用 Ajax 文件上传器，它可以将多个文件上传到数据库。但我面临一些问题。当我使用任何母版页时，只会上传多个选定文件中的 1 个文件，而不会上传所有剩余文件。

但是当我不使用任何母版页时，它工作得很好。

**我不确定在这里提供什么代码，所以请告诉我应该提供什么代码（CS 或 ASPX）以供参考。**

cs代码：

```
protected void UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
        try
        {       

        string path = Server.MapPath("~/Uploads/") + e.FileName;
        string ext = e.FileName.Split('.')[1];
        AjaxFileUpload1.SaveAs(path);
        string content_type="";
        object readOnly = false;

        object missing = System.Reflection.Missing.Value;
        //WdProtectionType typ = WdProtectionType.wdNoProtection;
        Word.Application app = new Word.Application();

            if ((ext == "doc") || (ext == "docx") || (ext == "DOC") || (ext == "DOCX"))
            {
                content_type = "application/vnd.ms-word";

                //Word.Document tempDoc = app.Documents.Open(path);
                //// tempDoc.TrackRevisions = true;
                ////  tempDoc.Protect(typ, ref missing, ref password, ref missing, ref missing);
                //tempDoc.Close(ref Nothing, ref format, ref Nothing);
            }

            if ((ext == "xlsx") || (ext == "xls") || (ext == "XLSX") || (ext == "XLS"))
            {
                content_type = "application/vnd.ms-excel";
                //Excel.Application ex_APP = new Excel.Application();
                //Excel.Workbook book = ex_APP.Workbooks.Open(path);
                //// book.KeepChangeHistory = true;
                //// book.HighlightChangesOnScreen = true;
                //book.Close(Nothing, path, Nothing);
            }

            if ((ext == "pdf") || (ext == "PDF"))
            {
                content_type = "application/pdf";
            }

            if ((ext == "txt") || (ext == "TXT"))
            {
                content_type = "text/plain";
            }

            if ((ext == "jpg") || (ext == "jpeg") || (ext == "JPG") || (ext == "JPEG"))
            {
                content_type = "image/jpeg";
            }

            byte[] imageBytes = File.ReadAllBytes(System.Web.HttpContext.Current.Server.MapPath("~/Uploads/") + e.FileName);
            GENERIC.db.Document_Master_insert(e.FileName.ToString(), 1, imageBytes, "abcd_001", ext, System.DateTime.Now, "0.1", content_type);
            //BindGridviewData();
            File.Delete(Server.MapPath("~/Uploads/") + e.FileName);

        }
        catch (Exception ex)
        {

            throw;
        }

    } 
```

aspx：

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="Server">
    <style>
        .modalBackground {
            background-color: Gray;
            filter: alpha(opacity=50);
            opacity: 0.50;
        }

        .pnl {
            background: #333;
            padding: 10px;
            border: 2px solid #ddd;
            float: left;
            font-size: 1.2em;
            color: White;
            position: fixed;
            top: 50%;
            left: 50%;
            z-index: 99999;
            box-shadow: 0px 0px 20px #999; /* CSS3 */
            -moz-box-shadow: 0px 0px 20px #999; /* Firefox */
            -webkit-box-shadow: 0px 0px 20px #999; /* Safari, Chrome */
            border-radius: 3px 3px 3px 3px;
            -moz-border-radius: 3px; /* Firefox */
            -webkit-border-radius: 3px; /* Safari, Chrome */
        }

        .close {
            DISPLAY: block;
            BACKGROUND: url(Images/close.png) no-repeat 0px 0px;
            LEFT: -12px;
            WIDTH: 26px;
            TEXT-INDENT: -1000em;
            POSITION: absolute;
            TOP: -12px;
            HEIGHT: 26px;
        }
    </style>
    <script type="text/javascript">
        function Success() {
            document.getElementById("lblMessage").innerHTML = "File Uploaded";

        }

        function Error() {
            document.getElementById("lblMessage").innerHTML = "Upload failed.";
        }
    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">

    <div>
        <asp:GridView ID="gvDetails" CssClass="Gridview" runat="server" AutoGenerateColumns="false" DataKeyNames="CONTENT" OnSelectedIndexChanged="gvDetails_SelectedIndexChanged">
            <HeaderStyle BackColor="#df5015" />
            <Columns>

                <asp:TemplateField HeaderText="CODE">
                    <ItemTemplate>
                        <asp:LinkButton ID="lnkDownload" runat="server" Text='<% #Bind("CODE")%>' CommandName="Select"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <%--<asp:BoundField DataField="CODE" HeaderText="CODE" />--%>
                <asp:BoundField DataField="Document_Name" HeaderText="Document_Name" />
                <%--<asp:TemplateField HeaderText="CONTENT">
                                <ItemTemplate>
                                    <asp:LinkButton ID="lnkDownload" runat="server" Text="Download" OnClick="lnkDownload_Click"></asp:LinkButton>
                                </ItemTemplate>
                            </asp:TemplateField>--%>

                <asp:TemplateField HeaderText="PDF">
                    <ItemTemplate>
                        <asp:LinkButton ID="lnkPdf" runat="server" Text="View_Pdf" OnClick="lnkPdf_Click"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

            </Columns>
        </asp:GridView>
    </div>
    <div>

        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:Button ID="btnUpload" runat="server"
                    Text="Upload File" OnClick="btnUpload_Click" />
                &nbsp;&nbsp;&nbsp;

                    <%--<asp:Button ID="Open" runat="server"
                        Text="Open File" OnClick="get" />--%>

                <asp:ModalPopupExtender runat="server"
                    ID="modelPopupExtender1"
                    TargetControlID="btnUpload"
                    PopupControlID="popUpPanel"
                    OkControlID="btOK"
                    BackgroundCssClass="modalBackground">
                </asp:ModalPopupExtender>

                <asp:Panel ID="popUpPanel" runat="server" CssClass="pnl">
                    <div style="font-weight: bold; border: Solid 3px Aqua; background-color: AliceBlue">

                        <asp:AjaxFileUpload ID="AjaxFileUpload1" runat="server"
                            OnUploadComplete="UploadComplete"
                            OnClientUploadComplete="Success"
                            ThrobberID="loader" Width="400px" />
                        <asp:Image ID="loader" runat="server"
                            ImageUrl="~/loading.gif"
                            Style="display: None" />
                    </div>
                    <br />
                    <br />
                    <asp:Label ID="lblMessage" runat="server" /><br />
                    <br />
                    <asp:Button ID="btOK" runat="server" Text="OK" OnClick="btOK_Click" />
                    <asp:LinkButton ID="LinkButton1" runat="server" CssClass="close"
                        OnClientClick="$find('modelPopupExtender1').hide(); return false;" />
                </asp:Panel>
                </div>
            </ContentTemplate>
        </asp:UpdatePanel>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:59:50.967

在我的项目中，我正在这样做，我认为这会对您有所帮助。它在下面

首先添加下面的参考文件

在 aspx 页面中

```
 <script src="js/jquery-1.3.2.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery.uploadify.js"></script>

 <script type="text/javascript">
        $(function () {
            $("[id*=FileUpload1]").fileUpload({
                'uploader': 'js/uploader.swf',
                'cancelImg': 'images/cancel.png',
                'buttonText': 'Attach Files',
                'script': 'UploadFile.ashx',
                'folder': 'uploads',
                'multi': true,
                'auto': true,
                'onSelect': function (event, ID, file) {
                    $("#attachedfiles tr").each(function () {
                        if ($("td", this).eq(0).html() == file.name) {
                            alert(file.name + " already uploaded.");
                            $("[id*=FileUpload1]").fileUploadCancel(ID);
                            return;
                        }
                    });
                },
                'onComplete': function (event, ID, file, response, data) {
                    $("#attachedfiles").append("<tr><td>" + file.name + "</td><td><a href = 'javascript:;'>Cancel</a></td></tr>");
                }
            });
        });
        $("#attachedfiles a").live("click", function () {
            var row = $(this).closest("tr");
            var fileName = $("td", row).eq(0).html();
            $.ajax({
                type: "POST",
                url: "SendEmail.aspx/RemoveFile",
                data: '{fileName: "' + fileName + '" }',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function () { },
                failure: function (response) {
                    alert(response.d);
                }
            });
            row.remove();
        });   
    </script> 
```

然后我创建一个处理程序。此代码将帮助您上传 maltipal 文件

```
public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        context.Response.Expires = -1;

        try
        {
            HttpPostedFile postedFile = context.Request.Files["Filedata"];

            string savepath = "";
            string tempPath = "";
            tempPath = System.Configuration.ConfigurationManager.AppSettings["FolderPath"];
            savepath = context.Server.MapPath(tempPath);
            string filename = postedFile.FileName;
            if (!Directory.Exists(savepath))
                Directory.CreateDirectory(savepath);
            postedFile.SaveAs(savepath + @"\" + filename);
            context.Response.Write(tempPath + "/" + filename);
            context.Response.StatusCode = 200;
        }
        catch (Exception ex)
        {
            context.Response.Write("Error: " + ex.Message);
        }
    } 
```

# moodle - Web 应用程序到 Moodle

> ID：14276837
> 
> 赞同：1
> 
> 时间：2013-01-11T11:06:11.213
> 
> 标签：moodle

我开发了一个 Web 应用程序（用 PHP 编写）供学生使用，以便我们对其进行评估。此应用程序会生成一个最终注释。

我想知道 Moodle 是否有一些活动/模块允许我嵌入我的网络应用程序，以便学生可以使用 Moodle。

我已经看到有一个名为“外部工具”的 Moodle 2.0 活动/模块，它可能就是我正在寻找的......但我对此活动有一些疑问。

*   “External Tool”给我展示了一个Moodle的外部Web应用程序，有没有办法与外部应用程序进行通信，例如，保存用户登录到Moodle的Web应用程序中获得的标记？

*   关于“外部工具”的 Moodle 文档并不广泛（[http://docs.moodle.org/23/en/Using_External_tool](http://docs.moodle.org/23/en/Using_External_tool "http://docs.moodle.org/23/en/Using_External_tool")）。您可以向我展示一些参考资料，我可以在其中了解如何调整我的 Web 应用程序以通过“外部工具”与 Moodle 进行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:20:43.980

外部工具使用[IMS LTI（学习工具互操作性互操作性标准](http://www.imsglobal.org/toolsinteroperability2.cfm)与外部工具进行通信。它确实允许交换成绩信息。我相信 LTI 标准在后台使用了某种形式的 oauth，尽管[规范](http://www.imsglobal.org/lti/blti/bltiv1p0/ltiBLTIimgv1p0.html)不是那么友好.

如果您习惯 php 并且能够在 Moodle 服务器上安装插件，您可能会发现制作一个简单的 Moodle 活动模块会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:52:29.207

Moodle 希望你使用它的成绩簿——它实际上工作得很好。您是否有特殊原因要使用自己的程序而不是内置程序？

# python - 装饰器和闭包

> ID：14276839
> 
> 赞同：0
> 
> 时间：2013-01-11T11:06:37.120
> 
> 标签：python, closures, decorator, python-decorators

我正在阅读[如何制作功能装饰器链？](https://stackoverflow.com/questions/739654/understanding-python-decorators#1594484) 了解装饰器。

在下面的示例中，我们看到由于闭包，包装函数可以访问“method_to_decorate”。但是，我不明白包装函数如何访问参数`self`和`lie`可访问性。

```
def method_friendly_decorator(method_to_decorate):
     def wrapper(self, lie):
         lie = lie - 3 # very friendly, decrease age even more :-)
         return method_to_decorate(self, lie)
     return wrapper

class Lucy(object):

    def __init__(self):
        self.age = 32

    @method_friendly_decorator
    def sayYourAge(self, lie):
        print "I am %s, what did you think?" % (self.age + lie)

l = Lucy()
l.sayYourAge(-3)
#outputs: I am 26, what did you think? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T11:08:21.243

返回`wrapper`的替换修饰函数，因此被视为方法。原来用的，新的也`sayYourAge`用。`(self, lie)``wrapper`

因此，调用时`l.sayYouAge(-3)`您实际上是在调用嵌套函数`wrapper`，那时它是一个绑定方法。绑定方法被`self`传入，并`-3`分配给参数`lie`。`wrapper`调用`method_to_decorate(self, lie)`，将这些参数传递给原始修饰函数。

注意`self`和`lie`被硬编码到`wrapper()`签名中；它与装饰函数紧密绑定。这些不是从装饰函数中获取的，编写包装器的程序员事先知道包装后的版本需要什么参数。请注意，包装器根本不必*将*参数与装饰函数匹配。

您可以添加参数，例如：

```
def method_friendly_decorator(method_to_decorate):
     def wrapper(self, lie, offset=-3):
         lie += offset # very friendly, adjust age even more!
         return method_to_decorate(self, lie)
     return wrapper 
```

现在你可以用不同的方式让露西谎报她的年龄：

```
l.sayYourAge(-1, offset=1)  # will say "I am 32, what did you think?" 
```

# mongodb - 更新到 r16761 时出现未来问题

> ID：14276841
> 
> 赞同：1
> 
> 时间：2013-01-11T11:06:48.437
> 
> 标签：mongodb, dart

我已经使用 Mongo Dart 和 Future 开发了一个功能。当我使用 Dart SDK 0.2.9 执行它时，它毫无例外地工作。

```
import 'model.dart';
import 'dart:json';
import 'package:mongo_dart/mongo_dart.dart';

class LinkDAO {
  DbCollection _links;

  Future<List> getAllLinks(){
    var completer = new Completer<List>();
    Db db = new Db("mongodb://127.0.0.1:27017/dart-link");
    List linkList = new List();
    _links = db.collection("links");
    db.open().chain((c){
      return _links.find({}).each(
          (link){ 
            print("[${link['link']}]:[${link['readed']}]:[${link['title']}]");
            linkList.add(new Link(link['link'],link['title'],link['readed']));
            print('lenght ${linkList.length}'); 
          }).chain((link)=>completer.complete(linkList));
     }).then((dummy){
      db.close();
    });
    return completer.future;
  }
}

void main(){
  Future<List> futureResult=new LinkDAO().getAllLinks();
  futureResult.then((result){
    print("final!!! -> ${result.length}");
  });
} 
```

这是*链接*类

```
library models;

class Link {
  String title;
  String link;
  bool readed;
  Link(this.title,this.link,this.readed);
} 
```

更新到 0.2.10 版后，相同的函数会生成此异常：

```
[assas]:[true]:[sasas]
lenght 1
[assas]:[true]:[sasas]
lenght 2
final!!! -> 2
Unhandled exception:
NoSuchMethodError : method not found: 'handleException'
Receiver: null
Arguments: [Closure: _FutureImpl@0x36924d72<T>(dynamic, dynamic) => dynamic]
#0      Object._noSuchMethod (dart:core-patch:1360:3)
#1      Object.noSuchMethod (dart:core-patch:1361:25)
#2      _FutureImpl._forwardException (bootstrap:935:27)
#3      _FutureImpl._forward (bootstrap:931:22)
#4      _FutureImpl.chain.<anonymous closure> (bootstrap:903:15)
#5      _FutureImpl._complete (bootstrap:840:19)
#6      _FutureImpl._complete (bootstrap:848:5)
#7      _FutureImpl._setValue (bootstrap:862:14)
#8      _CompleterImpl.complete (bootstrap:949:26)
#9      Cursor._nextEach.<anonymous closure>         (package:mongo_dart/src/database/cursor.dart:112:30)
#10     _FutureImpl.then (bootstrap:792:16)
#11     Cursor._nextEach (package:mongo_dart/src/database/cursor.dart:109:22)
#12     Cursor._nextEach.<anonymous closure> (package:mongo_dart/src/database/cursor.dart:115:18)
#13     _FutureImpl.then (bootstrap:792:16)
#14     Cursor._nextEach (package:mongo_dart/src/database/cursor.dart:109:22)
#15     Cursor._nextEach.<anonymous closure> (package:mongo_dart/src/database/cursor.dart:115:18)
#16     _FutureImpl._complete (bootstrap:840:19)
#17     _FutureImpl._complete (bootstrap:848:5)
#18     _FutureImpl._setValue (bootstrap:862:14)
#19     _CompleterImpl.complete (bootstrap:949:26)
#20     Cursor.nextObject.<anonymous closure> (package:mongo_dart/src/database/cursor.dart:74:28)
#21     _FutureImpl._complete (bootstrap:840:19)
#22     _FutureImpl._complete (bootstrap:848:5)
#23     _FutureImpl._setValue (bootstrap:862:14)
#24     _CompleterImpl.complete (bootstrap:949:26)
#25     Connection._receiveData._receiveData (package:mongo_dart/src/database/connection.dart:84:27)
#26     _SocketBase._multiplex (dart:io-patch:410:26)
#27     _SocketBase._sendToEventHandler.<anonymous closure> (dart:io-patch:512:20)
#28     _ReceivePortImpl._handleMessage (dart:isolate-patch:40:92) 
```

我认为问题出在 Mogo Dart 库上，但我不确定。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:06:41.577

看看这一行：

```
chain((link)=>completer.complete(linkList)); 
```

`Future.chain`需要一个返回 a 的转换函数，`Future`但您向它传递了一个返回`void`( `null`) 的函数。`NoSuchMethodError`当尝试将错误转发到 this 时抛出异常`null`。

我认为你需要`then`这里而不是`chain`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:37:25.163

我不确定我是否有所有信息来回答你的问题（我希望你能提供*所有*代码，以便我可以在本地重建应用程序并尝试调试它），但我会尽力而为。

我看到一个明显的问题：`getAllLinks()`返回一个`Future<List>`. 然而，当你调用它时

```
Future<bool> futureResult=new Link().getAllLinks(); 
```

你似乎认为你会从中受益`bool`。显然这段代码：

```
futureResult.then((result){
  print('final!!! ${result.length}');
}); 
```

`result`在不可迭代的上下文中没有什么意义。很明显，我会解决这个问题。

您是否在检查模式下工作？你在使用 Dart 编辑器吗？它会在你的代码中给你警告吗？

# android - 为什么在android的init.rc中需要setprop ro.nfc.port

> ID：14276845
> 
> 赞同：0
> 
> 时间：2013-01-11T11:06:55.073
> 
> 标签：android, nfc, kernel-module, open-nfc

我正在努力在 STE 雪球板上启用 NFC。我启用了 NFC 并且它工作正常。在启用时，我借助了互联网和移植指南，其中大多数链接告诉我们要编写以下语句，在 init.rc 文件中，setprop ro.nfc.port "I2C" chmod 0600 /dev/pn544 和 ueventd.rc 文件中， /dev/pn544 0600 system system 我知道在 ueventd.rc 中定义语句会在 /dev/ 路径中创建一个节点，但我无法理解为什么 setprop 写在 init.rc 文件中。任何人都可以指点理解上述问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:50:59.017

`ro.nfc.port`定义 NFC 子系统用于与 NFC 芯片通信的传输。在您的情况下，NFC 芯片以 /dev/pn544 作为驱动程序连接到 I²C 总线。

libnfc 还支持将 NFC 芯片连接到串口。例如，这是在金枪鱼平台（我认为是 Galaxy Nexus）中完成的。在这种情况下，您将看到：

> setprop ro.nfc.port "COM4"
> chmod 0600 /dev/ttyO3

在你的 init.rc

除非您自己构建平台，否则您不应该乱用这些设置。它们适用于系统构建者，并且他们（希望）知道他们在做什么。用户不会从修改它们中看到任何好处。

# templates - 页面仅在 IE8 中损坏

> ID：14276846
> 
> 赞同：0
> 
> 时间：2013-01-11T11:06:58.403
> 
> 标签：templates, internet-explorer-8

我有一个有问题的页面，但仅在 IE8 上。图像网格未正确显示。

我想知道是否有人能够阐明发生了什么问题？

我做了一些css更改，但已将其恢复为原始状态。因此，唯一的变化是一个额外的 div （但由于我把 css 放回去，它没有样式）。

它是在 3.4.2 上运行的 wp 模板。我曾尝试联系开发人员（多次），但没有得到任何回复。

我有点茫然，如果有人可以提供帮助，我会非常感激

该页面位于[http://www.haywardsdrycleaners.com/services/](http://www.haywardsdrycleaners.com/services/)

# windows-mobile - NETCF 3.9 发布了吗？

> ID：14276847
> 
> 赞同：3
> 
> 时间：2013-01-11T11:06:59.483
> 
> 标签：windows-mobile, .net-cf-3.5, windows-embedded-compact

我试图打开一个使用 VS2008 构建的旧项目，它有一个针对 Windows Mobile 6 设备（.NET Compact Framework 3.5）的类库。由于好旧的VS2008，在VS、AFAK中没有对移动设备的支持。现在我可以在任何地方看到 VS2012 再次支持 CF3.9 和移动设备，并且向后兼容 CF 3.5。我认为他们现在称它为“Windows Embedded Compact”，或者其他什么。但一切都只是博客。

我在哪里可以找到新的 Compact 框架的 SDK？它是否已发布，或者 CTP 发布日期是否已知？目前有没有办法用 VS2012 为 WM6[.5] 编译程序集？

我需要重新编译 CF3.5 项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T15:22:43.017

不确定您正在阅读的“无处不在”的位置，但这是错误的。Compact Framework 3.9 尚未发布。它将在Windows Embedded Compact (Window CE) 2013发布时发布，应该是在今年上半年（2013年）。

即使它已发布，您仍然无法将 Visual Studio 2012 或 Compact Framework 3.9 用于 Windows CE 的早期版本。工具和编译器仅适用于 2013 年（不是说我同意或喜欢这个，只是报告事实）。

如果您的目标是 WinMo 6.x，那么今天您*唯一*的选择是带有 Studio 2008 的 CF 2.0 或 CF 3.5，我不怀疑这会改变，即使发布了新版本的 CF。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-25T17:10:55.077

因此，您可以通过一些 csproj 调整在 VS2012 中构建 CF 3.5。首先安装 NETCFSetupv35.msi 和 NETCFv35PowerToys.msi。您可能需要使用以下 reg hack 来修复 x64 位内容。

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0]
"Language"="1033"
"Version"="3.5.7283"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\InstallRoot]
@="C:\\Program Files (x86)\\Microsoft.NET\\SDK\\CompactFramework\\v3.5\\"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\PocketPC]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\PocketPC\AsmmetaBinder]
"TypeName"="Microsoft.CompactFramework.Build.PocketPC.BindingService, Microsoft.CompactFramework.Build.Tasks, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, Custom=null"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\PocketPC\AsmmetaBinder\4118C335-430C-497f-BE48-11C3316B135E]
"TypeName"="Microsoft.CompactFramework.Build.WM50PocketPC.BindingService, Microsoft.CompactFramework.Build.Tasks, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, Custom=null"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\PocketPC\AssemblyFoldersEx]
@="C:\\Program Files (x86)\\Microsoft.NET\\SDK\\CompactFramework\\v3.5\\WindowsCE\\"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\PowerToys]
"Language"="1033"
"Version"="3.5.7338"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\PowerToys\InstallRoot]
@="C:\\Program Files (x86)\\Microsoft.NET\\SDK\\CompactFramework\\v3.5\\"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\Smartphone]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\Smartphone\AsmmetaBinder]
"TypeName"="Microsoft.CompactFramework.Build.SmartPhone.BindingService, Microsoft.CompactFramework.Build.Tasks, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, Custom=null"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\Smartphone\AsmmetaBinder\BD0CC567-F6FD-4ca3-99D2-063EFDFC0A39]
"TypeName"="Microsoft.CompactFramework.Build.WM50SmartPhone.BindingService, Microsoft.CompactFramework.Build.Tasks, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, Custom=null"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\Smartphone\AssemblyFoldersEx]
@="C:\\Program Files (x86)\\Microsoft.NET\\SDK\\CompactFramework\\v3.5\\WindowsCE\\"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\WindowsCE]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\WindowsCE\AsmmetaBinder]
"TypeName"="Microsoft.CompactFramework.Build.WindowsCE.BindingService, Microsoft.CompactFramework.Build.Tasks, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, Custom=null"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NetCompactFramework\v3.5.0.0\WindowsCE\AssemblyFoldersEx]
@="C:\\Program Files (x86)\\Microsoft.NET\\SDK\\CompactFramework\\v3.5\\WindowsCE\\" 
```

然后，您将需要创建一个与此类似的新 .target 文件。

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(BuildForWinCE)' == 'true'">
    <MSBuildBinPathCF>C:\Windows\Microsoft.NET\Framework\v3.5</MSBuildBinPathCF>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <PlatformFamilyName>WindowsCE</PlatformFamilyName>
    <PlatformID>E2BECB1F-8C8C-41ba-B736-9BE7D946A398</PlatformID>
    <IntermediateOutputPath>obj\WinCE</IntermediateOutputPath>
    <OutputPath>bin\WinCE</OutputPath>
    <FrameworkRegistryBase>Software\Microsoft\.NETCompactFramework</FrameworkRegistryBase>
    <AssemblyFoldersSuffix>$(PlatformFamilyName)\AssemblyFoldersEx</AssemblyFoldersSuffix>
    <AssemblyFoldersExConditions>,OSVersion=$(OSVersion):Platform=$(PlatformID)</AssemblyFoldersExConditions>
    <TargetCompactFramework>true</TargetCompactFramework>
    <DefineConstants>$(DefineConstants);WindowsCE</DefineConstants>
    <NoStdLib>false</NoStdLib>
  </PropertyGroup>
</Project> 
```

然后你可以在你的 csproj 中包含你的新目标文件和条件紧凑框架目标

```
<Import Project="Compact.targets" />
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
<Import Condition="'$(BuildForWinCE)' == 'true'" Project="$(MSBuildBinPathCF)\Microsoft.CompactFramework.Common.targets" /> 
```

当您要为 WinCE 构建时，只需设置以下参数。

```
BuildForWinCE=true 
```

# python - 为什么可以混合python缩进

> ID：14276849
> 
> 赞同：2
> 
> 时间：2013-01-11T11:07:03.487
> 
> 标签：python, indentation

我不敢相信，但可以在 python 代码中混合制表符和空格：

```
if __name__ == '__main__':
    for a in range(3): # indented with 4 spaces
        print(a)       # indented with 4 spaces and one tab 
```

这背后的原因是什么？

测试：

*   Python 3.3.0 (CPython)
*   Python 2.7.3 (CPython)

注意：似乎 stackoverflow 用空格更改了选项卡！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T11:10:34.030

这是关于 Python 缩进的众多神话之一。

Python 实际上所做的是查看行之间的相对缩进，而不是固定数量。

*   当行之间的缩进增加时，它认为它是一个块的开始并将新的缩进级别推送到堆栈上。
*   当缩进减少时，它会弹出缩进级别堆栈，直到找到匹配的级别，每次弹出关闭一个块

它不关心您是使用制表符、空格还是混合使用，只要您在块范围内的每个级别都保持一致即可。

例如，下面是一个有效的文件（使用 [ ] 表示空格，使用 [t] 表示选项卡）

```
if True:
[ ][ ][ ][ ]print ("Four spaces")

if True:
[t]print ("Tab")
[t]if True:
[t][ ][ ][ ]print ("Tab and three spaces")

if True:
[ ][t][ ]print ("Mixture") 
```

说了这么多——大多数理智的人坚持使用 4 个空格作为标准缩进，正如[仁慈的独裁者所希望](http://www.python.org/dev/peps/pep-0008/#indentation)的那样。

有关更多信息，请参阅[Python：关于缩进](http://www.secnetix.de/olli/Python/block_indentation.hawk)的神话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:11:47.063

缩进是在 python 中引入的，以确保每个编写的代码都有缩进，以便其他编码人员可以正确读取它。

这并不意味着，编码员有他的自由。只要每个块保持其缩进，不同的块就可以有不同的缩进。

例如，您可以拥有这样的工作文件，但不推荐。

```
print "hello"
if True:
[TAB]print "a"
[TAB]i = 0
[TAB]if i == 0:
[TAB][SPACE][SPACE]print "b"
[TAB][SPACE][SPACE]j = i + 1
[TAB][SPACE][SPACE]if j == 1:
[TAB][SPACE][SPACE][TAB][TAB]print "c 
```

更多阅读... [http://docs.python.org/release/2.5.1/ref/indentation.html](http://docs.python.org/release/2.5.1/ref/indentation.html)

# java - 如何在 Java GUI 中显示网站？

> ID：14276851
> 
> 赞同：-2
> 
> 时间：2013-01-11T11:07:07.743
> 
> 标签：java, user-interface

如何在 Java GUI 中简单地显示网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:08:26.547

您可以[`WebView`](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)在您的应用程序中使用来呈现指定的网页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:09:26.933

为什么不嵌入 Java 浏览器，例如[Lobobrowser](http://lobobrowser.org/java-browser.jsp)或[JBrowser](http://code.google.com/p/jbrowser/)？

# embedded - stm32f4-发现与 ov7670

> ID：14276852
> 
> 赞同：1
> 
> 时间：2013-01-11T11:07:11.577
> 
> 标签：embedded, stm32

我想通过 stm32f4-discovery 从 ov7670 获取视图。我从互联网上获取源代码并对其进行修改。但是现在我得到的视图有很大的问题。我可以用黑色获得真实的视图，但其他颜色显示深紫红色。就像[http://tinyurl.com/bh49y9x](http://tinyurl.com/bh49y9x)一样。第一张图是ov7670上面贴黑纸，第二张是右上，第三张是左上。我无法解释为什么从 android 获取的图片是这样的。

这是我的代码：[https](https://github.com/ctc8631/ov7670) ://github.com/ctc8631/ov7670 现在我使用 176*144 和 RGB565 进行测试，并从 android 位图转换原始数据。希望可以有人帮帮我。非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-04-11T11:15:23.403

This must be caused by different number of columns associated to each line. I've faced similar problem. The simplest way is to use debugger and check range of data which is saved in image buffer. For example in my case I had 144x174 instead of 144x176 (another workaround is to properly configure start and end registers in OV7670 but this also need some effort to find propoerly values)

# android - 如何根据设备宽度和字体大小测量 TextView 高度？

> ID：14276853
> 
> 赞同：22
> 
> 时间：2013-01-11T11:07:19.037
> 
> 标签：android, android-layout, android-canvas, android-view, textview

我正在寻找在 Android 中接受输入（文本、text_font_size、device_width）的方法，并根据这些计算返回显示特定文本所需的高度？

我正在根据他的内容设置文本视图/网络视图高度运行时，我知道扭曲内容，但由于一些网络视图最小高度问题，我无法在我的情况下使用。

所以我正在尝试计算高度并基于此设置视图高度。

我尝试过以下方法

```
Paint paint = new Paint();
paint.setTextSize(text.length()); 
Rect bounds = new Rect();
paint.getTextBounds(text, 0, 1, bounds);
mTextViewHeight= bounds.height(); 
```

所以输出是

1) "Hello World" 为字体 15 返回高度 13

2）“最新版本的果冻豆在这里，性能优化”为字体 15 返回高度 16

然后我试过了

```
Paint paint = new Paint();
paint.setTextSize(15);
paint.setTypeface(Typeface.SANS_SERIF);
paint.setColor(Color.BLACK);

Rect bounds = new Rect();
paint.getTextBounds(text, 0, text.length(), result);

Paint.FontMetrics metrics = brush.getFontMetrics();
int totalHeight = (int) (metrics.descent - metrics.ascent + metrics.leading); 
```

所以输出是

1) "Hello World" 为字体 15 返回高度 17

2）“最新版本的果冻豆在这里，性能优化”为字体 15 返回高度 17

如果我将这些值设置为我的视图，那么它会剪切一些文本，它不会显示所有内容。

同样，它在某些桌子上看起来还不错，因为它的宽度很大，但在电话上却不行。

有没有办法根据内容计算高度？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-11T13:09:09.410

```
public static int getHeight(Context context, String text, int textSize, int deviceWidth) {
    TextView textView = new TextView(context);
    textView.setText(text);
    textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, textSize);
    int widthMeasureSpec = MeasureSpec.makeMeasureSpec(deviceWidth, MeasureSpec.AT_MOST);
    int heightMeasureSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
    textView.measure(widthMeasureSpec, heightMeasureSpec);
    return textView.getMeasuredHeight();
} 
```

如果`textSize`未以像素为单位，则更改 的第一个参数`setTextSize()`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-19T13:48:21.000

我有一个更简单的方法可以在绘制之前知道一条线的真实高度，我不知道这是否对你们有帮助，但是我获得一条线高度的解决方案与布局的高度无关，只是采用这样的字体指标：

```
myTextView.getPaint().getFontMetrics().bottom - myTextView.getPaint().getFontMetrics().top) 
```

这样我们就得到了字体将从要绘制的文本视图中获取的真实高度。这不会给你一个 int，但你可以做一个 Math.round 来获得一个接近的值。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-13T13:16:42.517

`Paint.getTextBounds()`返回不是您所期望的。详情在[这里](https://stackoverflow.com/a/7579469/1048087)。

相反，您可以尝试这种方式：

```
int mMeasuredHeight = (new StaticLayout(mMeasuredText, mPaint, targetWidth, Alignment.ALIGN_NORMAL, 1.0f, 0.0f, true)).getHeight(); 
```

# c# - 使用 Json.NET 时出现意外的令牌错误

> ID：14276857
> 
> 赞同：1
> 
> 时间：2013-01-11T11:07:25.220
> 
> 标签：c#, json.net

我正在关注使用 .NET 解析 JSON 的[官方示例](http://james.newtonking.com/pages/json-net.aspx)。

我创建了一个`products.json`文件：

```
{
    "Name": "Apple",
    "Expiry": new Date(1230422400000),
    "Price": 3.99,
    "Sizes": [
        "Small",
        "Medium",
        "Large"
    ]
} 
```

将其读入字符串然后反序列化。我正在尝试按如下方式解析它：

```
Product deserializedProduct;

string jsonObj = File.ReadAllText(@"..\..\Content\products.json");
if (jsonObj != null) 
{
    try
    {
        deserializedProduct = JsonConvert.DeserializeObject<Product>(jsonObj);
    }
    catch (Exception e)
    {
        //log exception;
    }
} 
```

我得到以下异常：

```
Error reading date. Unexpected token: StartConstructor. Path 'Expiry', line 3, position 24. 
```

我知道 JSON 不允许日期对象，但为什么示例使用`new Date(1230422400000)`for 表示日期对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:10:53.467

你需要传入一个转换器。尝试这样的事情：

```
deserializedProduct = JsonConvert.DeserializeObject<Product>(jsonObj, new JavaScriptDateTimeConverter()); 
```

至于为什么，这可能是一个老例子，Json.NET 在使用更正式的方式（IIRC）之前曾经使用旧的 Date 对象。但是，如果您告诉它如何处理它，它仍然可以序列化和反序列化。

# parsing - 简单的 JFflex 解析器转换为 java OK。编译java代码时出错

> ID：14276858
> 
> 赞同：2
> 
> 时间：2013-01-11T11:07:30.180
> 
> 标签：parsing, jflex

我有这个简单的 Bison JFLEX 解析器： [http ://pastebin.com/SNB20y7G](http://pastebin.com/SNB20y7G)

我运行 jflex parser.flex （这是我的文件的调用方式）获得了一个名为 TuringLexer.java 的类当我尝试使用 javac TuringLexer.java 编译它时，我得到了这个：

```
$ javac TuringLexer.java
TuringLexer.java:482: cannot find symbol
symbol  : class Yytoken
location: class TuringLexer
  public Yytoken yylex() throws java.io.IOException {
         ^
1 error 
```

任何线索可能是什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:28:10.357

问题是我忘记添加：

```
%public
%class TuringLexer
%type Void 
```

而不仅仅是

```
 %class TuringLexer 
```

现在 .java 文件也可以使用

# android - phonegap 2.3.0 中的 InAppBrowser

> ID：14276862
> 
> 赞同：3
> 
> 时间：2013-01-11T11:07:39.650
> 
> 标签：android, cordova, childbrowser

在我的 android 项目中，我使用带有子浏览器的 Phonegap 2.2.0。

我在Phonegap 文档中浏览了Phonegap 2.3.0，当我看到inAppBrowser 时我被吸引了，我想通过使用phonegap 2.3.0 我可以避免使用子浏览器插件并且我尝试使用。

我的问题是，**我正在使用子浏览器的 onLocationChange 方法，我在 inAppBrowser 中需要类似的东西**，但我在 phonegap 浏览了完整的 inAppBrowser 文档。

inAppBrowser 中只有三个事件（[Phonegap 2.3.0 文档](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)）

1.  loadstart - InAppBrowser 开始加载 URL 时触发的事件

2.  loadstop - InAppBrowser 完成加载 URL 时触发的事件

3.  exit - InAppBrowser 窗口关闭时触发的事件

我刚刚尝试了 1&2 个事件来查看它们是如何工作的，正如我所预料的那样，这两个事件与子浏览器的 onLocationChange 方法不匹配。

有什么解决办法吗？还是我坚持使用儿童浏览器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:35:21.697

对我来说`loadstop`，通过添加以下几行，

```
iabrowser = window.open(url, target, op);
iabrowser.addEventListener('loadstop', locChanged); 
```

确保`iabrowser`正确初始化。

# c++ - 有人帮我解决这个问题吗？为什么不编译？

> ID：14276864
> 
> 赞同：-5
> 
> 时间：2013-01-11T11:07:43.527
> 
> 标签：c++, c, debugging

这是一个线程二叉搜索树。你能帮我找出为什么它不能编译吗？

[http://codeworldtechnology.wordpress.com/2009/08/27/insertion-deletion-and-traversal-in-fully-in-threaded-binary-search-tree/](http://codeworldtechnology.wordpress.com/2009/08/27/insertion-deletion-and-traversal-in-fully-in-threaded-binary-search-tree/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:17:54.857

**错误：**

```
tree.c: In function ‘main’:
tree.c:51: warning: incompatible implicit declaration of built-in function ‘exit’
tree.c:51: error: too few arguments to function ‘exit’
tree.c: In function ‘preorder’:
tree.c:327: warning: comparison between pointer and integer 
```

我可以看到`exit();`是错误的纠正它 `exit(0);`

在第 327 行：`if(ptr->right_ptr==link)`是错误的，因为`link`整数定义为：

```
typedef enum { thread,link} boolean; 
```

`right_ptr;`指针 在哪里：

```
struct node
{
  struct node *left_ptr;
  boolean left;
  int info;
  boolean right;
  struct node *right_ptr;
}*head=NULL 
```

奉劝这段代码*坏了*还有其他很多bug，不要用！

;

# linux - 为每个用户设置自己文件夹的 CHMOD 权限

> ID：14276875
> 
> 赞同：0
> 
> 时间：2013-01-11T11:08:16.567
> 
> 标签：linux, scripting

```
#!/bin/bash
MasterDir="/home/darkeve/Documents/OS/master/"         
USERHOME="/home/darkeve/Documents/OS/UNIX"   
MasterFile="filenames.txt"

while read -r line; do
mkdir "UNIX/$line"
for FILENAME in `cat $MasterFile`
do
    cp "$MasterDir/$FILENAME" $USERHOME/$line
done
done < usernames.lnk

chown $USER:$USER $USERHOME/$USER -R
CHMDO 700 $USERHOME/$USER -R 
```

我正在尝试设置 CHMOD 700 权限，以便每个用户只能在 UNIX 文件夹中访问他们自己的文件夹。用户来自写入在复制的 usernames.lnk 文件夹中的名称列表，然后在 UNIX 文件夹中使用自己的名称创建每个文件夹。因此，我正在尝试设置 CHMOD 权限，以便他们只能访问自己的文件夹，而不能访问其他任何内容。

到目前为止，我得到的唯一错误是

chown：无法访问`/home/darkeve/Documents/OS/UNIX/darkeve`：没有这样的文件或目录 chmod：无法访问`/home/darkeve/Documents/OS/UNIX/darkeve`：没有这样的文件或目录

那么这是否意味着它正确设置了权限但是代码中有错误使脚本在unix文件夹中有一个名为“darkeve”的文件夹？

# javascript - 如何在 js 中生成和同步包含音频的每个节拍信息 (bpm) 的 xml/json 文件

> ID：14276881
> 
> 赞同：1
> 
> 时间：2013-01-11T11:08:26.353
> 
> 标签：javascript, audio, sync, html5-audio, beat-detection

我需要为类似游戏的“吉他英雄”生成**与音乐 bpm 同步的 js 事件。**

## 第一个问题：

如何从节拍检测中生成曲目文件（每个 bpm 都像乐谱一样存储）？该文件将在以前不需要即时生成。

## 第二个问题：

如何将它与 js 声音库同步？

任何的想法 ？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:53:35.643

1的答案在这里：

[https://github.com/miohtama/Krusovice/blob/master/src/tools/echonest.js#L107](https://github.com/miohtama/Krusovice/blob/master/src/tools/echonest.js#L107)

您可以使用 Echo Nest API 服务来提取歌曲文件的所有类型的特征，其中包括离线节拍检测（也检测小节等）。该示例是一个 Javascript 示例，您可以在（自定义）Chrome 中运行：

[https://github.com/miohtama/Krusovice/blob/master/demos/timing-tester.html](https://github.com/miohtama/Krusovice/blob/master/demos/timing-tester.html)

2 的答案是您将游戏逻辑时钟与音频播放时钟相关联，而不是 Javascript 系统时间。像这儿：

[https://github.com/miohtama/Krusovice/blob/master/src/show.js#L1072](https://github.com/miohtama/Krusovice/blob/master/src/show.js#L1072)

*您在时间更新*事件上收听音频，然后在事件之间使用系统时钟插入经过的时间。

免责声明：我是代码的作者

# javascript - 在每个值的中间填充 JavaScript 数组

> ID：14276882
> 
> 赞同：0
> 
> 时间：2013-01-11T11:08:27.250
> 
> 标签：javascript, arrays, splice

我正在尝试填充数组：

```
var array2 = ["a", "b", "c"]; 
```

带有一些随机数/值，以便该值将每个原始值分开。但是，使用这样的 for 循环：

```
for (var am = 1; am < array2.length; am+2) {
   array2.splice(am, 0, undefined);
} 
```

导致我的浏览器冻结，因为在每个拼接上，array2 的长度都会发生变化并导致无限循环，所以我尝试了这种方法：

```
var l = array2.length;

for(var i = 1; i < l; i+2) {
   array2.splice(i, 0, undefined);
} 
```

现在我不知道发生了什么。估计`l`又变异了。

我必须提前`i`两个，因为第一个拼接后的 array2 变为：

```
["a", undefined, "b", "c"]; 
```

但是，由于`i = 3`我已经设置了表达式`i < l`，唯一的解释是它`l`再次发生了变化。

欢迎任何解释。我希望代码继续执行的最终结果是：

```
array2 = ["a", undefined, "b", undefined, "c"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:11:00.997

```
for (var am = 1; am < array2.length; am+2) { 
```

你实际上并没有`am`在那条线上增加。将其更改为：

```
for (var am = 1; am < array2.length; am+=2) { 
```

使用`+=`手段`am = am + 2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:18:50.190

你可以试试这个：

```
var array2 = ["a", "b", "c"];

var l = array2.length;

// Stop 1 item before the end and set steps of 1 item
for(var i = 0; i < (l - 1); ++i) {
   // You inserting starting from index 1 and move 2 items ahead for each element
   array2.splice(1 + (i * 2), 0, undefined);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:11:08.163

你可以这样做：

```
var array2 = ["a", "b", "c"],
    length = array2.length,
    output = [];

for ( var i = 0; i < length; i++ ) {
  output.push(array2[i]);
  if ( i < length - 1 ) {
    output.push(undefined);
  }
}

// output:
// ["a", undefined, "b", undefined, "c"] 
```

# codeigniter - * foreach 在 foreach codeigniter 2 中？

> ID：14276883
> 
> 赞同：3
> 
> 时间：2013-01-11T11:08:28.340
> 
> 标签：codeigniter, foreach, nested

在 codeigniter 2.1 中，我试图按类别显示频道。因此，如果我有一个名为 Film 的类别，我应该会看到 Film 中的频道列表。我尝试了一个嵌套的 foreach 循环来完成此操作，但似乎无法使其正常工作。

我的表结构是这样的，但更复杂：

![数据库结构](../Images/2f7b5d0966389391478113cb3090bc06.png)

*   我的模型：

    ```
    <?php

    class Pages_model extends CI_Model {

    function get_channels_by_categ_tv()
    {

      $this->db->select('categories.category_name, channels.channel_name');
      $this->db->from('type_categ');
      $this->db->join('categories', 'categories.category_id = type_categ.category_id');
      $this->db->join('channels', 'channels.channel_id = type_categ.channel_id');
      $this->db->order_by('categories.category_id');
    //$this->db->group_by(array('categories.category_id')); 
      $query = $this->db->get();

      if($query->num_rows() == 0)
      {
        #no channels
        return false;
      }

      return $query->result_array();
    }

    } 
    ```

*   在视图中：

    ```
     <ul class="slides">
                <li>
                    <?php foreach ($category_chaneels as $category): ?>
                    <div class="programe-tv_link">
                        <p><?=$category['category_name'];?></p>
                           <dd> <a href=""> >> <?=$category['channel_name'];?></a></dd>
                    </div>
                    <?php endforeach; ?>                  
                </li>
              </ul> 
    ```

*   控制器（页面）：

    ```
    public function index()
    {

    $data['category_chaneels'] = $this->pages_model->get_channels_by_categ_tv();

    $this->template->page_view($data);
    } 
    ```

我附上了图像 1 和图像 2，我需要图像 2 而不是 1 的结果。

PS。一个频道可以有多个类别。

![在此处输入图像描述](../Images/8d596ad613eec0c19358418c921a71bf.png) 你能帮助我吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:56:31.313

在你看来，试试

```
<?php $cat_shown = ''; ?>
<div class="programe-tv_link">
    <?php foreach ($category_chaneels as $category): ?>    
        <?php
        if ($cat_shown != $category['category_name']) {
            echo '<p>' . $category['category_name'] . '</p>';
            $cat_shown = $category['category_name'];
        }
        ?>
        <dd><a href=""> >> <?=$category['channel_name'];?></a></dd>
    <?php endforeach; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:05:44.487

我的最终代码是这样的。也许有人需要这个。

```
 <div id="programe-tv-slide" class="flexslider">
        <strong>Programe TV</strong>
        <div class="redLine"></div>

        <?php $cat_cnl = array(); 
              $list = array(); 
              $i=1;
                 foreach ($category_chaneels as $option) { 
                    $catname = $option['category_name'];
                    $chlname = $option['channel_name'];

                    $cat_cnl[$catname][$i] = $chlname;
                    $list[$i] = $catname;
              $i++;
                 }; 
        ?>
        <?php 
            $rows = array_chunk($cat_cnl, 4, TRUE);
            foreach ($rows as $row) {  //var_dump($rows);
        ?>

          <ul class="slides">    
            <?php
                echo ('<li>');
                foreach ($row as $category => $channels) {
                    echo '<div class="programe-tv_link">'; 
                    echo '<p>' . $category . '</p>'; 
                        foreach ($channels as $channel) {
                                echo '<dd><a href="">' . $channel . '</a></dd> '; 
                        };
                    echo '</div>'; 
                    };      
                echo ('</li>'); 
            ?>
          </ul>
          <?php }; ?>
    </div> 
```

# php - 加载数据本地文件（替换）需要组合字段以形成一个键（？）

> ID：14276888
> 
> 赞同：2
> 
> 时间：2013-01-11T11:08:55.597
> 
> 标签：php, mysql, load-data-infile

我得到了一个非常大的 .txt(csv)（100k+ 个条目），它每晚通过 ftp 传输到我的服务器，然后我使用这个查询：

```
LOAD DATA LOCAL INFILE '/x/x/public_html/2013/fluid1/x3export/x3export.txt' REPLACE INTO TABLE x3export FIELDS TERMINATED BY '|' 
```

我希望使用替换来更新“x3export”中的数据。但是，数据中没有唯一的字段，您必须组合两个字段来创建唯一的 id。（CatalogueRef + HierarchyCode）但是我不知道该怎么做，因为我读过的 LOAD DATA 只使用预定义的唯一键或索引列，你不能（？）提供它应该替换的内容.

尝试进一步解释：

**例如， **CatalogueRef可能是：001ABC。**例如，**HierarchyCode可能是：AAA****

 **（不要问我这些是什么意思，我真的不知道它们来自另一个需要它们的系统。）可能有多行具有相同的 CatalogueRef 但是将它们加在一起以使 001ABCAAA 从我创建一个唯一的 id'米告诉。希望这能有所帮助？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:30:57.293

请参阅此处的 MySQL 文档：http: [//dev.mysql.com/doc/refman/5.5/en/load-data.html](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)

在文本的末尾附近解释了 SET 关键字，它允许您对要插入的值进行一些操作，您可以将其变成有用的东西，例如，

```
LOAD DATA LOCAL INFILE 'x3export.txt'
REPLACE INTO TABLE x3export
FIELDS TERMINATED BY '|'
    (Column1, Column2, Column3, @CatalogueRef, @HierarchyCode)
SET ID = concat(@CatalogueRef, @HierarchyCode); 
```**

# java - 为什么我在使用 javascript 自动完成时在 Eclipse 中收到消息：“未处理的事件循环异常 Java 堆空间”？

> ID：14276892
> 
> 赞同：30
> 
> 时间：2013-01-11T11:09:06.980
> 
> 标签：java, javascript, eclipse

当我尝试使用任何 javascript 模板时，Eclipse 总是挂起，并且在弹出窗口中收到以下消息：“未处理的事件循环异常 Java 堆空间”。

我为 Eclipse 进程和 Java 进程启动了一个 top 命令（使用 Ubuntu），然后尝试在 Eclipse 上使用自动完成。我注意到 Java 进程将我的 CPU 占用到 100%，而内存保持不变（大约 22%）。

我在没有事先更改我的 Eclipse IDE 的情况下得到了这个...

关于如何解决这个问题的任何想法？

编辑：我还注意到，在“Javascript / Content Assist / Advanced”下的首选项窗口中，选中了“Other Javascript Proposals”选项。取消选中后，问题就解决了。但是，它缺乏对变量和对象的内容辅助。所以这部分解决了我的问题。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-11T13:17:07.407

对于任何 Eclipse 用户来说，此错误都是“经典”错误。打开您的 Eclipse 所在的文件夹。在那里，编辑“eclipse.ini”文件。

找到“-vm”所在的行。在此行下，您有内存的三个通用设置。简而言之 ：

*   “Xms”是分配给虚拟机的最小内存量。
*   “Xmx”是最大数量。
*   “MaxPermSize”是分配给虚拟机 permgen 的内存量。

您在此处看到的错误消息异常意味着 java 已达到其最大内存设置，但它需要更多。在这种情况下，Java 占用 100% 的 CPU 是“正常的”：垃圾收集器正在全时工作。您要编辑的一个设置是“Xmx”，这将为 Java 提供更多的内存来呼吸，但将其他两个设置得更高一点也没有什么坏处。我通常的设置是：

*   -Xms256m
*   -Xmx1024m
*   -XX:MaxPermSize=256m

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T15:56:05.050

我设法找到了问题。我暂时将一些 js 文件移动到我的项目中（其中一些重复了原始文件）并且自动完成正在搜索太多文件。所以我像这样更改了 src 文件夹：

*   右键单击项目
*   选择属性
*   Javascript
*   包含路径
*   在源选项卡上，我排除了重复的文件/文件夹以及一些我不想在自动完成时使用的文件/文件夹。

这解决了我的问题，我的 Eclipse 现在自动完成速度很快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T05:10:52.367

（1）去开放午餐配置然后去参数添加这个

```
 -Xms512m
    -Xmx1024m
-XX:MaxPermSize=512m 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-27T11:34:49.180

在我的情况下工作了几个小时后，我找到了我希望它对你有用的解决方案；将我的 JDK 更改为备用 JRE

[![在此处输入图像描述](../Images/d05299845c5c4d1bac9f535955b5e69a.png)](https://i.stack.imgur.com/CdPIh.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-04T09:25:56.930

您可以将以下命令更改为 AIDE.ini 文件并重新启动 IDE。

```
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Dlocaldev=true
-Xms256m
-Xmx512m
-XX:PermSize=128m
-XX:MaxPermSize=256m
-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005 
```

# c# - 通过sql将参数数据绑定到oracle

> ID：14276897
> 
> 赞同：1
> 
> 时间：2013-01-11T11:09:22.050
> 
> 标签：c#, asp.net, parameters, sqldatasource, linked-server

我们在 SQL Server 中设置了一个链接服务器到一个 oracle 服务器。

我需要用一些数据填充网格视图。但是我发现当我对数据源使用参数时，查询非常慢。但是，如果我硬编码值来代替参数，则查询会快得多。

该参数是从具有自动回发功能的文本框控件设置的。

我是这样编码的...

```
<asp:SqlDataSource ID="dsRepairs" runat="server" 
            SelectCommand="SELECT REPAIR_NO + '-' + LINE_NO AS SELECT_OPTION, CUSTOMER_NO, DATE_ADDED, YOUR_REFERENCE, PART_NO, DESCRIPTION, SERIAL_NO, REPAIR_STATUS 
                             FROM TEST..INFOVIEW.CRO_LINES 
                            WHERE CUSTOMER_NO = @CUSTOMER_NO;" ConnectionString="<%$ ConnectionStrings:ConnectionString %>">
                <SelectParameters>
                    <asp:ControlParameter Name="CUSTOMER_NO" ControlID="txtAccountNo" PropertyName="Text" DbType="String" Direction="Input" />
                </SelectParameters>
            </asp:SqlDataSource> 
```

我相信额外的时间是由于数据类型转换，但我想知道如何加快速度。使用参数方法时，我们不能接受等待 15 秒以上的页面加载数据。

我似乎只有 的选项`DBType="String"`，但是 oracle 中源表上的字段类型是`varchar(20)`.

有什么办法可以改善这一点吗？我无法控制数据源的设置方式。我必须通过 SQL Server 使用链接服务器，除此之外，及时返回数据是可以接受的。

如果我需要提供更多信息，请告诉我！

# javascript - 通过 jQuery 激活的类冲突

> ID：14276900
> 
> 赞同：0
> 
> 时间：2013-01-11T11:09:37.983
> 
> 标签：javascript, jquery, css

我设计了一个 HTML 网站并在`active`上面上课`a`

```
$('a').click(function(){
     $('a').removeClass("active");
     $(this).addClass("active");
}); 
```

它正在工作。我有一个菜单结构和连接页脚和顶部菜单`active`。

```
 $('.menuHolder li a').click(function (e) {
      $('.menuHolder li a').removeClass('active');
      var link = $(this).attr('href');
      $('a[href="' + link + '"]').addClass('active');

    }); 
```

现在，当我单击菜单项获取`active`类时，确定。但是当我单击菜单上的一个项目时，删除`active`我的菜单项上的类。

所以，我希望菜单项`active`删除只单击另一个菜单项。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:13:21.420

试试这个

```
 $('.menuHolder li a').click(function (e) {
      $('.menuHolder li a.active').removeClass('active');
      var link = $(this).attr('href');
      $('a[href="' + link + '"]').addClass('active');

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:20:02.920

为您的菜单项分配特定的类并使用切换：

```
$('.menu-item').click(function() {
  $(this).toggleClass('active');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:20:27.827

尝试改变

```
$('.menuHolder li a').removeClass('active'); 
```

到一个

```
$('.menuHolder li a.active').removeClass('active'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:26:33.017

尝试这样的事情。工作[小提琴](http://jsfiddle.net/bKZ2a/)

```
 $(function(){
        $('.menuHolder li a').click(function (e) {
              $('.menuHolder li a').removeClass('active');
              $(this).addClass('active');

        }); 
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T11:38:22.500

哦对不起。

当我使用此代码时，一切正常。也许，`a`现在每个添加和删除主动自动。

```
$('a').click(function(){
     $('a').removeClass("active");
     $(this).addClass("active");
}); 
```

# bash - Bash 脚本在读取文件时无法访问错误

> ID：14276904
> 
> 赞同：1
> 
> 时间：2013-01-11T11:09:50.710
> 
> 标签：bash, shell

我编写了一个小程序来获取目录中所有文件的列表并将它们连接到单个字符串变量。这是代码

```
#!/bin/bash
dir ="/home/user/myfolder/abc"
res=" "

for f in $( ls $dir  ); do
    res="$res $f"
done

echo $res 
```

但是我收到以下错误

```
dir: cannot access =/home/user/myfolder/abc: No such file or directory 
```

我已经设置了所有必需的权限，有什么解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T11:11:27.443

删除分配之间的空格：

```
#!/bin/bash
dir ="/home/user/myfolder/abc" 
```

做这个：

```
#!/bin/bash
dir="/home/user/myfolder/abc" 
```

`left_value=right_value`每种语言都有自己的语法，并且 bash 脚本在赋值期间不需要空格；如您所见，这只是语法问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T11:13:22.903

您可能需要：

```
dir=/home/user/myfolder/abc
```

而不是

```
dir =“/home/user/myfolder/abc”
```

**dir**之后的额外空格使其成为命令“dir”，通常别名为**ls**。

# android - 我可以深入研究android的最佳场所

> ID：14276905
> 
> 赞同：-1
> 
> 时间：2013-01-11T11:09:53.487
> 
> 标签：android

请建议我可以学习android的最佳地点。我想获得有关 android 类、方法等的更多信息。我在 google 中寻找 MenuItems 我找到了如何使用它。但我真的需要知道如何声明什么是深入研究的参数。任何人都可以帮助我获得最佳指南，我可以从中了解所有方法并使用示例来使用它。这可能对我很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:12:15.537

[开发者.android](http://developer.android.com)

拥有你需要的一切

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:17:28.187

Google为刚开始使用 Android 框架的开发人员开发了一套[培训课程。](http://developer.android.com/training/index.html)

您也可以查看此[API 指南](http://developer.android.com/guide/components/fundamentals.html)。它可以提供有关组件、生命周期和 Android 最佳实践的完整信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T12:33:49.577

[http://www.mybringback.com/](http://www.mybringback.com/)

为初学者提供一个很好的教程和视频，并免费学习不同级别的课程。

[http://mobile.tutsplus.com/](http://mobile.tutsplus.com/)

也为学习android和移动应用程序提供了很好的指导。但是在一定程度之后，它会被支付。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:13:54.423

[完整的 Android 教程](http://developer.android.com/develop/index.html)

在这里，您可以详细了解如何声明以及在培训部分和关于参数以及其他内容中的 android 方法类的用途等，您可以参考参考部分。希望它会有所帮助。

# windows-8 - InkPresenter 的替代品？

> ID：14276909
> 
> 赞同：1
> 
> 时间：2013-01-11T11:10:06.107
> 
> 标签：windows-8, windows-phone-8

我在 Windows 8 中有一个基于手写的应用程序。我正在尝试将它移植到 Windows Phone 8。但是只有 3 个可用于 WP8 的 Inking 类，并且没有 Inkmanager 类。我们可以使用画布代替 InkPresenter。笔画的所有功能都可用吗？我尝试了以下代码

```
private void MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        InkCanvas.CaptureMouse();
        StylusPointCollection MyStylusPointCollection = new StylusPointCollection();
        MyStylusPointCollection.Add(e.StylusDevice.GetStylusPoints(InkCanvas));
        NewStroke = new Stroke(MyStylusPointCollection);
        //InkCanvas.Strokes.Add(NewStroke);
        NewStroke.DrawingAttributes = SetAttributes(draw);
    } 
```

它说的倒数第二行有一个错误，画布不包含笔划的定义。InkPresenter 不适合我的需要。如果不是画布，是否还有其他元素可以捕获触摸输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:48:35.753

Canvas 是正确的方法，但您应该能够在 Windows Phone 8 中使用[InkPresenter 类](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.controls.inkpresenter%28v=vs.105%29.aspx)并将其放置在 Canvas 中。您似乎正在尝试将 Strokes 添加到 Canvas 而不是代码中的 InkPresenter。看看[这个示例](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662946%28v=vs.105%29.aspx)，了解如何在 WP8 上完成 Ink。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:10:30.153

感谢您的回答，The Inkpresenter 无法满足我的需求。所以我使用了画布和触摸输入。对于那些正在寻找线索的人...

我已经像这样使用`Touch_FrameReported`和基本的线条图

```
 if (pointCollection[i].Action == TouchAction.Move)
            {
                Line line = new Line();

                line.X1 = preXArray[i];
                line.Y1 = preYArray[i];
                line.X2 = pointCollection[i].Position.X;
                line.Y2 = pointCollection[i].Position.Y;

                line.Stroke = new SolidColorBrush(Colors.Black);
                line.Fill = new SolidColorBrush(Colors.Black);
                line.StrokeThickness = 15;
                line.StrokeDashCap = PenLineCap.Round;
                line.StrokeStartLineCap = PenLineCap.Round;
                line.StrokeEndLineCap = PenLineCap.Round;

                drawCanvas.Children.Add(line); 
```

# android - 通过 wifi 连接从设备浏览和下载文件

> ID：14276913
> 
> 赞同：0
> 
> 时间：2013-01-11T11:10:25.277
> 
> 标签：android, android-wifi, android-wireless, flashair

我希望我的 android 应用程序通过**wifi**连接连接到像[FlashAir](http://www.toshiba-components.com/FlashAir/index.html)这样的设备并**浏览**其**目录**并将选定的文件**下载**到 android 设备。

 ******我浏览了[这篇文章](http://marakana.com/forums/android/examples/40.html)并了解了如何通过 wifi**扫描**和**检测设备。**现在我如何访问它的**文件目录**并**下载**文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:17:22.797

任何浏览器都可以与该卡连接。所以你也可以使用 http 客户端。只需在传统浏览器中查看 url 是如何设置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T14:54:35.157

如果您不想使用浏览器或 web 视图，您可以按照本教程创建自己的应用程序，该应用程序将列出 FlashAir 中的所有文件和目录，并允许您下载图像文件：

[https://flashair-developers.com/en/documents/tutorials/android/3/](https://flashair-developers.com/en/documents/tutorials/android/3/)******

# c++ - C++ 将 int 分隔到 char 数组中

> ID：14276920
> 
> 赞同：2
> 
> 时间：2013-01-11T11:10:47.593
> 
> 标签：c++, arrays, char, int

我想制作一个将 int 分隔为 char 数组的 C++ 方法。并返回一部分 int。

**例子：**

输入：

```
int input = 11012013;
cout << "day = " << SeperateInt(input,0,2); << endl;
cout << "month = " << SeperateInt(input,2,2); << endl;
cout << "year = " << SeperateInt(input,4,4); << endl; 
```

输出：

```
day = 11
month = 01
year = 2013 
```

我以为是[这样](https://stackoverflow.com/questions/4498924/char-array-to-int)的。但这对我不起作用，所以我写道：

```
int separateInt(int input, int from, int length)
{
    //Make an array and loop so the int is in the array
    char aray[input.size()+ 1];
    for(int i = 0; i < input.size(); i ++)
        aray[i] = input[i];

    //Loop to get the right output 
    int output;
    for(int j = 0; j < aray.size(); j++)
    {
        if(j >= from && j <= from+length)
            output += aray[j];
    }

  return output;
} 
```

但，

**1** ) 你不能用这种方式调用 int 的大小。
**2**）你不能像一个字符串一样说我想要int的元素i，因为那样这个方法是没用的

如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:22:54.610

```
int input = 11012013;
int year = input % 1000;
input /= 10000;
int month = input % 100;
input /= 100;
int day = input; 
```

实际上，您可以使用整数除法和模运算符轻松创建所需的函数：

```
int Separate(int input, char from, char count)
{
    int d = 1;
    for (int i = 0; i < from; i++, d*=10);
    int m = 1;
    for (int i = 0; i < count; i++, m *= 10);

    return ((input / d) % m);
}

int main(int argc, char * argv[])
{
    printf("%d\n", Separate(26061985, 0, 4));
    printf("%d\n", Separate(26061985, 4, 2));
    printf("%d\n", Separate(26061985, 6, 2));
    getchar();
} 
```

结果：

```
1985
6
26 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:19:45.160

我能想到的最简单的方法是将 int 格式化为字符串，然后只解析你想要的部分。例如，要获取日期：

```
int input = 11012013;

ostringstream oss;
oss << input;

string s = oss.str();
s.erase(2);

istringstream iss(s);
int day;
iss >> day;

cout << "day = " << day << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:23:41.290

首先将您的整数值转换为 char 字符串。使用`itoa()` [http://www.cplusplus.com/reference/cstdlib/itoa/](http://www.cplusplus.com/reference/cstdlib/itoa/)

然后只是遍历你新的字符数组

```
int input = 11012013;
char sInput[10];
itoa(input, sInput, 10);
cout << "day = " << SeperateInt(sInput,0,2)<< endl;
cout << "month = " << SeperateInt(sInput,2,2)<< endl;
cout << "year = " << SeperateInt(sInput,4,4)<< endl; 
```

然后改变你`SeprateInt`来处理字符输入

如果需要，使用`atoi()` [http://www.cplusplus.com/reference/cstdlib/atoi/](http://www.cplusplus.com/reference/cstdlib/atoi/) 转换回整数格式。

# c# - WPF Single selection between two ListBoxes

> ID：14276933
> 
> 赞同：11
> 
> 时间：2013-01-11T11:11:38.890
> 
> 标签：c#, wpf, visual-studio-2010, mvvm, listbox

I'm having the following problem: I have two `ListBox`, with two different `ItemSource`, but both of them have the same `binding` for the `SelectedItem`, because I was trying to perform a single selection between these two lists.

Here's an image that better shows the problem:

![First list in red. Second list in black.](../Images/efd9b880aefe62772863fa014d9cd77b.png)

What would I like to do? Every time I select one item from the first list (in red), it should **deselect** the `SelectedItem` from the second list (in black), and vice versa. That's why I'm using the same `binding` for both of them. I really don't know if it's the better way to do it, but it should work like that.

Could you help me?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T11:53:46.240

Try using `SelectedValue` instead, this will sop the behaviour you are seeing

```
 <ListBox SelectedValue="{Binding MySelectedItem}" /> 
```

It seems that `SelectedItem` does not deselect is the selected item is not found in the list, But `SelectedValue` does seem to deselect it, not sure why

You can see the diffence in this sample app:

xaml:

```
<Window x:Class="WpfApplication11.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="184" Width="208" x:Name="UI">
    <StackPanel DataContext="{Binding ElementName=UI}">
        <TextBlock Text="SelectedValue" />
        <StackPanel Orientation="Horizontal" Height="60" >
            <ListBox ItemsSource="{Binding MyItemSource1}" SelectedValue="{Binding MySelectedValue}" Width="100" />
            <ListBox ItemsSource="{Binding MyItemSource2}" SelectedValue="{Binding MySelectedValue}" Width="100" />
        </StackPanel>
        <TextBlock Text="SelectedItem" />
        <StackPanel Orientation="Horizontal" Height="60"  >
            <ListBox ItemsSource="{Binding MyItemSource1}" SelectedItem="{Binding MySelectedItem}" Width="100" />
            <ListBox ItemsSource="{Binding MyItemSource2}" SelectedItem="{Binding MySelectedItem}" Width="100" />
        </StackPanel>
    </StackPanel>
</Window> 
```

code:

```
public partial class MainWindow : Window , INotifyPropertyChanged
{
    private CustomObject _mySelectedItem;
    private CustomObject _mySelectedValue;
    private ObservableCollection<CustomObject> _items = new ObservableCollection<CustomObject>();
    private ObservableCollection<CustomObject> _items2 = new ObservableCollection<CustomObject>();

    public MainWindow()
    {
        InitializeComponent();
        MyItemSource1.Add(new CustomObject { Name = "Stack" });
        MyItemSource1.Add(new CustomObject { Name = "Overflow" });
        MyItemSource2.Add(new CustomObject { Name = "Stack" });
        MyItemSource2.Add(new CustomObject { Name = "Overflow" });
    }

    public ObservableCollection<CustomObject> MyItemSource1
    {
        get { return _items; }
        set { _items = value; }
    }

    public ObservableCollection<CustomObject> MyItemSource2
    {
        get { return _items2; }
        set { _items2 = value; }
    }

    public CustomObject MySelectedItem
    {
        get { return _mySelectedItem; }
        set { _mySelectedItem = value; NotifyPropertyChanged("MySelectedItem"); }
    }

    public CustomObject MySelectedValue
    {
        get { return _mySelectedValue; }
        set { _mySelectedValue = value; NotifyPropertyChanged("MySelectedValue"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
}

public class CustomObject
{
    public string Name { get; set; }
    public override string ToString()
    {
        return Name;
    }
} 
```

![enter image description here](../Images/9d109bdeb602c0cdd059af7c5eed5c51.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T10:11:31.040

What I had to do was at first pass `null` to the property and notify the changing, and then I passed the real value to the property and notified the changing to the view. Like that:

```
protected Bar selectedItem;
public Bar SelectedItem{
    get
    {
        return selectedItem;
    }
    set
    {
        selectedItem = null;
        NotifyPropertyChanged("SelectedItem");

        selectedItem = value;
        NotifyPropertyChanged("SelectedItem");
    } 
```

I got this answer and example from [this question](https://stackoverflow.com/questions/4293253/wpf-mutually-exclusive-listboxes).

# javascript - 使用css更改tr背景颜色和悬停链接

> ID：14276936
> 
> 赞同：1
> 
> 时间：2013-01-11T11:11:49.213
> 
> 标签：javascript, css

我有一个表格，每行都有一个链接，应该在悬停时突出显示（tr bgcolor 和链接）。我可以使用以下代码使用 javascript 执行此操作：

```
<style type="text/css">
<!--
.style1 a:link, .style2 a:visited {
   color: black;
   text-decoration: none;
}
-->
</style>

<table class="style1" width=50%>
<tr     onMouseOver="document.getElementById('test').style.color='white'; this.style.backgroundColor='blue';"
    onMouseOut="document.getElementById('test').style.color='black'; this.style.backgroundColor='transparent';"
    onClick="location.href='foo.html'">
            <td><a href="foo.html"><span id="test">link lala</span></a></td>
</tr>
</table> 
```

但我想用css来做。

我尝试了以下方法：

```
<style type="text/css">
<!--
.style2 tr:hover {
    background-color: blue;
}
.style2 {
    color: black;
}
.style2 a:link, .style2 a:visited {
    color: black;
    text-decoration: none;
}
.style2 a:hover {
    color: white;
}
-->
</style>

<table class="style2" width=50%>
   <tr>
      <td><a href="foo.html">link lala</a></td>
   </tr>
</table> 
```

但是链接悬停仅在鼠标位于链接顶部（而不是整个 tr 顶部）时才有效。仅通过单击实际链接（而不是整个 tr 行）才能工作的链接也存在问题。

我确信这可以通过仅使用 css 来完成（至少同时悬停）。你能帮我一点吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:15:28.030

如果我理解正确，这将解决您的问题：

```
.style2 tr:hover {
    background-color: blue;
}
.style2 tr:hover a {
    color: white;
    text-decoration: none;
} 
```

结果如下：http: [//jsfiddle.net/56M4U/1/](http://jsfiddle.net/56M4U/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:18:23.913

该`a`元素是一个内联元素。这意味着它只会占用足够的空间来容纳它的内容。因此，悬停只会在您的鼠标悬停时触发。

您可以更改此行为，以便`a`标记`td`通过添加以下 css 将其更改为块级元素来占用所有可用空间。

```
.style2 a{ 
   display:block;
} 
```

这将以最少的麻烦提供您需要的结果。

注意：这只会导致`a`占用`td`元素中的所有空间。如果该`td`列是该行中唯一的列，那么这将按预期工作，但如果您添加更多列；那么只有这个特定的列会触发链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:15:37.683

试试这个：

```
a {
   display:block
} 
```

这将使您`<a>`获得全部`<td>`内容，然后当您将鼠标悬停时，不仅颜色会发生变化`<td>`，而且当您单击整体`<td>`时，它将成为一个锚点（如按钮）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:33:50.507

是的，你可以这样做，但你必须给一个类来`<a>`标记。

然后你可以写 css ：

```
.style2 tr:hover {
    background-color: blue;
}
.style2 tr:hover a.a_link {
    color: white;
} 
```

进而

```
<table class="style2" width=50%>
   <tr>
      <td><a class="a_link" href="foo.html">link lala</a></td>
   </tr>
</table> 
```

# c# - 更新面板工作时需要使用 css 加载图像

> ID：14276942
> 
> 赞同：1
> 
> 时间：2013-01-11T11:11:56.873
> 
> 标签：c#, .net, ajax, updatepanel

当更新面板工作时，我需要显示我的进度图像。我还想显示剩余的背景以停用。

您能否指导我如何使用我的 loading.gif 图像和 .net 中的更新面板来实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:14:34.893

这很简单。

这是更新进度面板的代码

```
<asp:UpdateProgress ID="UpProgress" AssociatedUpdatePanelID="up" DisplayAfter="0"
    runat="server">
    <ProgressTemplate>
        <div align="center" class="contactmain">
            <img id="Img1" src="~/frontimage/loading.gif" runat="server" />
        </div>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

和css

```
.contactmain
{
 position: fixed;
 z-index: 1001;
 top: 0px;
 left: 0px;
 vertical-align: middle;
 text-align: center;
 width: 100%;
 height: 600px;
 opacity: 0.7;
 filter: alpha(opacity=70);
 background-color: Gray;
 background-image: none;
 background-repeat: no-repeat;
 display: block;
 border: solid 1px black;
 padding: 100px 0 0 0;
} 
```

# c# - 我可以随机而不是顺序地遍历 for 循环吗？

> ID：14276943
> 
> 赞同：3
> 
> 时间：2013-01-11T11:12:00.357
> 
> 标签：c#, java, loops, for-loop, control-structure

如果有类似的 for 循环

```
for ( int i = 0; i <= 10; i++ )
{
   //block of code
} 
```

我想要实现的是，在第一次迭代之后，我的值不必为 1，它可以是 1 到 10 之间的任何值，我不应该再次为 0，对于其他迭代也是如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T11:13:42.947

简单算法：

*   创建一个包含从 0 到 10 的数字的数组
*   洗牌
*   遍历该数组并检索初始集合中的相应索引

在 Java 中：

```
public static void main(String[] args) throws Exception {
    List<Integer> random = Arrays.asList(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
    Collections.shuffle(random);

    List<String> someList = Arrays.asList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k");

    for (int i : random) {
        System.out.print(someList.get(i));
    }
} 
```

输出：

> ihfejkcadbg

**编辑**

现在我重读了它，您还可以简单地打乱初始集合和循环：

```
public static void main(String[] args) throws Exception {
    List<String> someList = Arrays.asList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j");

    //make a copy if you want the initial collection intact
    List<String> random = new ArrayList<> (someList);
    Collections.shuffle(random);

    for (String s : random) {
        System.out.print(s);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T11:14:10.760

是的，您可以这样做：首先，创建数字的[*随机排列*](http://en.wikipedia.org/wiki/Random_permutation)`0`.. `N-1`，然后像这样迭代：

```
int[] randomPerm = ... // One simple way is to use Fisher-Yates shuffle
for (int i in randomPerm) {
    ...
} 
```

[链接到 Fisher-Yates 洗牌。](http://en.wikipedia.org/wiki/Knuth_shuffle)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T11:17:37.220

“洗牌”方法可能是最简单的，但以随机顺序将它们拉出来也可以；这样做的主要问题`RemoveAt`是相对昂贵。洗牌会更便宜。包括完整性：

```
var list = new List<int>(Enumerable.Range(0, 10));
var rand = new Random();
while (list.Count > 0) {
    int idx = rand.Next(list.Count);
    Console.WriteLine(list[idx]);
    list.RemoveAt(idx);
} 
```

# c# - 在按键或鼠标事件上更新票证

> ID：14276944
> 
> 赞同：0
> 
> 时间：2013-01-11T11:12:04.480
> 
> 标签：c#, jquery, asp.net-mvc-3, mouseevent, keypress

我在网站上使用 C# 通过 FormsAuthenticationTicket 创建会话。

FormsAuthenticationTicket 的票证代码如下

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, 
                                                                 model.UserName,
                                                                 DateTime.Now,
                                                                 DateTime.Now.AddMinutes(30),
                                                                 false,
                                                                 admin.Role);
string encTicket = FormsAuthentication.Encrypt(ticket);
Response.Cookies.Add(new HttpCookie(FormsAuthentication.FormsCookieName, encTicket) {   Expires = ticket.Expiration }); 
```

网站的每一部分都继承了 Site.Master，所以我想在这些行中添加一些东西到 Site.Master

```
$(document).ready(function() {
    $(window).bind('mousemove mouseclick keydown mousewheel', idle);
});

function idle(e) {
    if (window.idleTimeout) {
        clearTimeout(window.idleTimeout);
    }
    <%= FormsIdentity identity = (FormsIdentity)HttpContext.Current.User.Identity;  %>
    <%= FormsAuthentication.RenewTicketIfOld(identity.Ticket); %>
    window.idleTimeout = setTimeout(userIdle, 900000);
}
function userIdle() {
    //either do stuff here or trigger the "idle" event
    $(window).trigger('idle');
} 
```

这不起作用。它不能使用 FormsIdentity 因为我不能“使用 System.Web.Security;” 这里。

是否有任何类似的逻辑可以用来在按键和鼠标事件等事件上不断刷新票证？

仅供参考：如果我去网站的其他部分，票不会过期，所以这不是问题。只有当人们使用 40 分钟完成表格然后尝试提交并失去所有进度时。当然我可以增加超时时间，但这不是我想要做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:16:44.427

您可以向服务器发送 AJAX 请求以刷新 cookie：

```
function idle(e) {
    if (window.idleTimeout) {
        clearTimeout(window.idleTimeout);
    }
    $.ajax({
        url: '<%= Url.Action("RenewCookie") %>',
        type: 'POST'
    });
    window.idleTimeout = setTimeout(userIdle, 900000);
} 
```

然后在您的服务器上，您将有一个控制器操作来执行必要的步骤。但请注意，在每次击键或鼠标滚轮时使用 AJAX 请求攻击您的服务器可能是毁灭性的。

# android - 推迟回发

> ID：14276945
> 
> 赞同：2
> 
> 时间：2013-01-11T11:12:05.513
> 
> 标签：android, asp.net, client-side

**【界面说明】** 故事是关于清单的。用户界面由为移动屏幕量身定制的页面上的长表组成。每行有三个按钮（数据库中的清单记录）。 ![接口示例](../Images/9844c21d27b8224b8f8209ce5603a8ce.png)

第一个按钮 [FIX] 将此 DB 记录标记为有问题？这需要修复。它还将中间按钮的背景颜色更改为黄色。第二个按钮 [With checklist question] 将数据库中的记录标记为 OK，并将其背景颜色更改为绿色。最后一个按钮 [NOGO] 将记录标记为禁止传输，并将中间按钮的背景颜色更改为红色。

**[现在如何工作]** 每个按钮都进行回发，确定按钮名称和行号，更新数据库记录，并生成并重新加载具有特定背景颜色的启动按钮的新页面。

**[问题 - 移动设备在 3G 上的性能缓慢]** 单击任何按钮直到页面稳定需要 Firefox Windows 7 - 0.6 秒（完美） Firefox Samsung Galaxy Xcover Android 2.3.6 on WiFi ~ 2 秒（可管理） Firefox Samsung Galaxy Xcover Android 2.3 .6 上 3G ~ 12 秒 !!! （使用 iperf ~2Mbps 测量到服务器的 3G 速度）

**[想法]** 由于操作过程中的页面只是写入，而不是从数据库中读取任何值，它只能在客户端操作，当最后按下[保存清单]按钮时推送更改的数据。

**[问题]** 我现在唯一想到的是 - 相同的生成表单，而不是回发按钮正在使用点击 java 脚本来更改背景颜色和每个记录的填充隐藏字段包含要保存在数据库中的新值？The, on post, 分析并保存所有内容。

你能提到其他方法和想法吗？有什么比这种直接方法更聪明的吗？

贾尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:20:30.770

关闭`ViewState`将是我的第一个建议。

之后运行 YSlow/Fiddler/Firebug/Chrome Tools...等，看看客户端需要这么长时间，如果它是客户端的话。`DataBase`在and`Business Layer`级别 对后端进行概要分析。

在确定您的瓶颈之前，您无法有效地优化。

这么说的很多人之一：

> 当您谈论性能时，没有“可能”的余地。您必须始终衡量性能以了解您的更改是帮助还是损害了您的程序。

**Code Complete：软件构建实用手册**

[28.2 代码调优简介](http://www.stevemcconnell.com/cctune.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:21:18.157

将接口从服务器端移动到客户端就可以了。我现在正在使用 javascript 更改颜色并将值存储在隐藏字段中。数据在提交时传输，然后界面响应性不再重要。

```
 <asp:Repeater ID="questionRepeater" runat="server">
        <ItemTemplate>
            <tr>
                <td>
                    <input type="button" value="FIX" style="width: 50px; min-height:50px;" onclick="Q<%# DataBinder.Eval(Container.DataItem, "cRowid")%>.style.backgroundColor = '#FFFF00'; document.getElementById(<%# DataBinder.Eval(Container.DataItem, "cRowid")%>).value='FIX';" />
                </td>
                <td>
                    <input  type="button" 
                            id='Q<%# DataBinder.Eval(Container.DataItem, "cRowid")%>' 
                            value='<%# DataBinder.Eval(Container.DataItem, "cQuestion")%>'
                            style="width: 250px; white-space: normal; min-height:50px; background-color: <%# DataBinder.Eval(Container.DataItem, "cRColor")%>; font-size: large;" 
                            onclick="this.style.backgroundColor = '#00FF00'; document.getElementById(<%# DataBinder.Eval(Container.DataItem, "cRowid")%>).value='OK';" />
                </td>
                <td>
                    <input type="button" value="NOGO" style="width: 50px; min-height:50px;" onclick="Q<%# DataBinder.Eval(Container.DataItem, "cRowid")%>.style.backgroundColor = '#FF0000'; document.getElementById(<%# DataBinder.Eval(Container.DataItem, "cRowid")%>).value='NOGO';" />
                    <asp:HiddenField ID='<%# DataBinder.Eval(Container.DataItem, "cRowid")%>'  />
                </td>
            </tr>
        </ItemTemplate>
    </asp:Repeater> 
```

# c# - 使用 DateTime 字段更新错误

> ID：14276947
> 
> 赞同：0
> 
> 时间：2013-01-11T11:12:09.540
> 
> 标签：c#, datetime, dataset

我有一个*方法*，它接受一些*参数*，其中有三个`DateTime`字段*（从 Web 窗体填充）*。

该*方法*使用一个自动生成的`TableAdapter`并将`DataSet`新记录添加到表中。在*`Table.Add[newRow]`*语句之后，我们调用*`Dataset.Update(Table)`*语句以将添加持久化到数据库中。

虽然这几乎适用于所有情况，但有时会出现错误： *`System.Data.SqlClient.SqlException (0x80131904): The conversion of a date data type to a datetime data type resulted in an out-of-range value The statement has been terminated.`*.

有没有人知道可能发生的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:24:33.493

从[这里](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/2c0975dd-bc9c-454f-8583-af74d1cd7141)

> date 数据类型可以保存从第 1 年的 1 月 1 日到 9999 年 12 月 31 日的日期。datetime 数据类型只能保存从 1753 年 1 月 1 日到 9999 年 12 月 31 日的日期。因此，表中的日期必须小于 Jan 1, 1753.

由于`DateTime`是一个结构，因此总是有一个值（`DateTime.MinValue`），另一个可能的原因是`DateTime`无法成功解析。

因此，您可以在插入之前检查 是否`DateTime`在有效范围内`SqlDateTime`：

```
DateTime darkAge = new DateTime(1111, 1, 1);
if (darkAge >= SqlDateTime.MinValue.Value && darkAge <= SqlDateTime.MaxValue.Value)
{
    // we're not gettting here since the dark age was before 1753 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:17:53.597

是的，因为 SQL DateTime 和 DotNet DateTime 在允许的范围内有所不同。

[SqlDateTime.MinValue != DateTime.MinValue，为什么？](https://stackoverflow.com/questions/805770/sqldatetime-minvalue-datetime-minvalue-why)

# php - 使用 php 验证复选框

> ID：14276949
> 
> 赞同：0
> 
> 时间：2013-01-11T11:12:14.303
> 
> 标签：php

我有一个带有一系列复选框的表单，其名称为“name=category[]”。现在我需要计算用户选择了多少复选框。此外，我需要检查至少 1 个复选框被选中或最多 10 个复选框。

这是我目前正在尝试的方式......

```
if ( isset ( $_POST['category']) {

  if (( sizeof( $_POST['category']) == 10 || sizeof( $_POST['category']) <= 10 )) {

     // form processing....

  } else {

      echo 'Atleast 1, not more than 10 categories.';
  }

} else {

  echo 'Please select atleast one category.';

} 
```

谁能告诉我还有另一种方法可以完成这项任务吗？这意味着，要得到这两个错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:17:44.907

在处理输入数组时，最好检查它是否是一个数组以及 isset：

```
if (isset($_POST['category']) && is_array($_POST['category'])) {

  $totalChecked = count($_POST['category']);

  if ($totalChecked >= 1 && $totalChecked <= 10) {

     // form processing....

  } else {
      echo 'Atleast 1, not more than 10 categories.';
  }

} else {
  echo 'Please select atleast one category.';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:40:34.360

根据您的问题，您只想检查选定的复选框计数。

据我所知，复选框的值是“开”或“关”。如果您对名称“类别”进行计数，它将为您提供页面上显示的所有复选框计数，无论单击或未单击。

所以过滤掉并计算

将此函数放在 if 条件开始之前。格式化代码...

```
 function nonzero($var) {
        return $var !="off" ? "on" :'';
    }
    if ( isset ( $_POST['category']) { 
        $_POST['category'] = array_filter($_POST['category'], 'nonzero');
        if ( sizeof( $_POST['category'] ) >= 1 //check of at-least one is checked
             && sizeof( $_POST['category'] ) <= 10 ) { //check for at-most 10 is checked
            form processing();
        } else { 
            echo 'At-least 1, not more than 10 categories.'; 
        } 
    } else { 
        echo 'Please select at-least one category.'; 
    } 
```

# c# - 如何刷新我所有的 IQueryable 类型属性

> ID：14276952
> 
> 赞同：0
> 
> 时间：2013-01-11T11:12:21.247
> 
> 标签：c#, .net, wpf, entity-framework, mvvm

我需要刷新我所有的`IQueryable<EntityObject>`类型属性。

我知道您可以通过以下方式刷新集合：

```
someObjectContext.Refresh(System.Data.Objects.RefreshMode.StoreWins, someEntityObject); 
```

但我无法获得所有属性：

```
//Here i want to get all the propeties    
var iQueryablePropertiesList = ViewModel.GetType().GetProperties().Where(x => x.GetType().BaseType is IQueryable<EntityObject>);

//Here i want to loop through all the properties and refresh them
foreach (var item in iQueryablePropertiesList)
{
    someObjectContext.Refresh(System.Data.Objects.RefreshMode.StoreWins, item.GetValue(this, null));
}

//Fire PropertyChanged for all properties
OnPropertyChanged(String.Empty); 
```

`iQueryablePropertiesList`没有结果。

这样做的原因是我需要刷新所有绑定 ComboBoxes 的集合。

所以说：

1.  这是刷新 ViewModel 中所有集合的正确方法吗？
2.  如果没有，我应该如何解决我的问题？
3.  如果是，我需要添加什么`LINQ`查询来获得我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:24:34.173

你有一个在线错误：

```
x => x.GetType().BaseType is IQueryable<EntityObject> 
```

`BaseType`是类型`Type`，它永远不会是`IQueryable<EntityObject>`。并且`x.GetType()`还会返回一个类型，在这种情况下`PropertyInfo`总是。

您要输入的是：

```
x => typeof(IQueryable<EntityObject>).IsAssignableForm(x.PropertyType) 
```

这将检查是否`IQueryable<EntityObject>`由您的属性类型实现。

```
public ThisType PropertyName{get;set;} 
```

至于这是否是一个好方法，我不认为这样反思总是一个问题，它迟早会咬你。我会简单地重新创建模型。

# spring-mvc - url未与spring mvc中的处理程序映射

> ID：14276953
> 
> 赞同：0
> 
> 时间：2013-01-11T11:12:26.257
> 
> 标签：spring-mvc

我通过 jquery 得到这个 url

`localhost:8080/user/mak/1001?SelectName=mak&SelectId=1001&SelectReg=12e1`

我的jsp表单是

```
<form id="addForm" name="addForm" method="get"  action=""> 
```

和我的处理程序

```
@RequestMapping(value = "/user/SelectName/SelectId",method = RequestMethod.GET)
 public String getCategory(@RequestParam("SelectName")StringselectedName,
@RequestParam("SelectId")String selectedId, @RequestParam("SelectReg")String selectedReg,Model model, HttpSession session) 
```

我想`localhost:8080/user/mak/1001` 用处理程序显示这个 url 和映射任何人都可以建议我怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:52:16.260

您的问题的解决方案包括两个步骤：

1.  您应该将@RequestMapping 的“值”属性设置为/user/{SelectName}/{SelectId}。括号告诉 Spring MVC 您希望使 URL 的这些部分动态化。
2.  你应该用@PathVariable 注释替换你的@RequestParam 注释。

可以在此处找到有关此主题的更多信息：[Spring MVC 参考](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-ann-requestmapping "Spring MVC 参考")

# javascript - JavaScript：避免硬编码的键码

> ID：14276957
> 
> 赞同：5
> 
> 时间：2013-01-11T11:12:44.080
> 
> 标签：javascript, keycode

> **可能重复：**
> [JavaScript event.keyCode 常量](https://stackoverflow.com/questions/1465374/javascript-event-keycode-constants)

这是我的代码：

```
$button.on('keyup', function (event) {
    // Detect an Enter keypress
    if(event.keyCode === 13) {
        doStuff();
    }
}); 
```

如您所见，键码`13`是硬编码的。是否有一种（跨浏览器）方法可以以更具语义意义的方式提取该数字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T11:30:26.610

如果你使用**jQueryUI**，你可以使用[`$.ui.keyCode`](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.core.js#L27)常量：

```
keyCode: {
    BACKSPACE: 8,
    COMMA: 188,
    DELETE: 46,
    DOWN: 40,
    END: 35,
    ENTER: 13,
    ESCAPE: 27,
    HOME: 36,
    LEFT: 37,
    NUMPAD_ADD: 107,
    NUMPAD_DECIMAL: 110,
    NUMPAD_DIVIDE: 111,
    NUMPAD_ENTER: 108,
    NUMPAD_MULTIPLY: 106,
    NUMPAD_SUBTRACT: 109,
    PAGE_DOWN: 34,
    PAGE_UP: 33,
    PERIOD: 190,
    RIGHT: 39,
    SPACE: 32,
    TAB: 9,
    UP: 38
} 
```

因此，为了检查`Enter`按下使用：

```
if (event.keyCode === $.ui.keyCode.ENTER) { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:55:08.390

重复`Alex K.`的答案（我用过）：

```
"\r".charCodeAt(0) 
```

# java - 在 Shell 脚本中使用带空格的路径

> ID：14276961
> 
> 赞同：0
> 
> 时间：2013-01-11T11:13:08.233
> 
> 标签：java, shell, unix

我正在使用 shell 脚本来调用 java 程序。当调用传递 java 程序时，我传递了 -Dargument，它有一个目录的路径。这个 -D 参数是从文件中读取的。现在，当此路径包含空格时，我面临一个问题。我尝试使用引号和转义引号，但两者都有效。

这是我的 shell 脚本代码 test.sh

```
 D_ARG=`(tr '\r\n' ' ' < argument.dat)
  \#executing java code by passing above argument
   java ${D_ARG} TestProgram 
```

下面是我的参数文件，argument.dat

```
 -Dargument1="/Path /To A/File" 
```

当我使用 set -x 设置回显时，我看到 shell 将其转换为

```
 '-Dargument1="/Path' '/To' 'A/File"' 
```

它在遇到空格时添加单引号并且我得到“/To”类未找到异常。如何解决这个问题。任何建议或帮助都将非常可观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:16:19.560

试试这个：

```
ARGS=

# Do nothing if there are no spaces; if there are spaces, surround with quotes
for arg in $(perl -pe '/ / or next; s/^/"/; s/$/"/' argument.dat); do
    ARGS="$ARGS $arg";
done

java $ARGS TestProgram 
```

这基本上有这样的效果，每行有一个空格，它就会用引号括起来，所以`-Da=b c`会变成`"-Da=b c"`.

请注意，`"-Da=b c"`它严格等同于`-Da="b c"`，甚至看起来更怪异的形式：

*   `'-Da='b\ c`;
*   `-D"a=b "c`;
*   等等等等

唯一重要的是输入字段分隔符的任何字符都被转义。是的，这是合法的：

```
alias l"l=ls"\ -l 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:09:27.457

您可能会转义“/Path /To A/File”中的空格。然而，这不是一个好的解决方案，因为很多时候，我们可能会制定一个类似的命令

```
system(argv[1]);/* Example is  C specific; 
      but you understand the loop-hole imparted by single escaping.
      You may require multilevel escaping, based on your implementation. OR
      We may have to escape the string, every time it is dereferenced.
      */ 
```

* * *

linux 系统上更好的选择是创建符号链接。

```
ln -s "/Path /To A/File" /tmp/file 
```

& 然后在参数文件中`-Dargument1="/tmp/file"`
，如果只有一个文件`"/Path /To A/File"`有问题，请使用使用这种方法。

* * *

另一种方法是使用`mount --bind`

```
mkdir /tmp/myfiles && mount --bind "/Path /To A" /tmp/myfiles 
```

& 然后在参数文件中，使用`-Dargument1="/tmp/myfiles/File"`
这种方法将挂载`"/Path /To A"`到 `/tmp/myfiles`. 将保留其中的所有文件和目录结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:34:09.337

The script worked when used with the command eval, Which preserves quotes and it dint add any additional single quotes.

```
 D_ARG=`(tr '\r\n' ' ' < argument.dat)
 \#executing java code by passing above argument
  eval java ${D_ARG} TestProgram 
```

# android - 为什么从 Play 商店安装应用程序后我没有得到正确的版本？

> ID：14276962
> 
> 赞同：1
> 
> 时间：2013-01-11T11:13:10.177
> 
> 标签：android, apk

我刚刚从 Play 商店下载[了 Datadroid Forms Pro 。](https://play.google.com/store/apps/details?id=com.diomo.forms.datadroidpro)

安装后似乎显示我下载的是“Lite”版本而不是“Pro”版本，我不明白为什么会这样。我已经卸载并再次下载了相同的应用程序，但我又遇到了同样的问题。

问题是我没有这个“精简版”版本的所有访问权限。

我只是想问一下我缺少什么或者应用程序开发人员有问题吗？

# matlab - 两个积分方程的解释和实现

> ID：14276963
> 
> 赞同：0
> 
> 时间：2013-01-11T11:13:13.057
> 
> 标签：matlab, integral

我对图片中显示的这两个方程有疑问。

![等式一](../Images/9762c99535da323344cf72baf5e2e4bb.png)

![等式二](../Images/ebc7a74bdd1511110e1d1e7022360dc0.png)

1.  我有两个向量表示两个方程中的 C(m) 和 S(m)。我正在尝试在 Matlab 中实现这些方程。我认为我应该进行求和，而不是进行连续积分运算。例如，第一个方程

    A1 = sqrt(sum(C.^2));

我对吗？另外，我不确定如何实现包含 ||dM|| 的等式二。请帮忙。

2.  这两个方程的数学意义是什么？我认为第一个可能与“平方和”有关，如果 C(m) 是一个向量，那么这个方程将测量向量 C 中随机变量的总方差或向量 C 的某种平均值？第二个呢？

非常感谢您的帮助！一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:34:45.320

在 MATLAB 中，通常有两种不同的方法来进行积分。

1.  对于可以使用符号工具箱的人来说，代数积分是一种选择。如果您是这种情况，我会调查`help int`并查看您需要哪些输入。

2.  其余的，可以使用数值积分，这基本上意味着您只需在很多点上计算一个函数，然后在这些点上取函数值的平均值。

对于数学含义，更多上下文会有所帮助，您可能想在 math.stackexchange.com 或您所在的任何领域的网站上提出这个问题。（统计，物理？）

# ruby-on-rails - 一个模型应该改变其他模型还是控制器应该改变每个模型？（Rails 或其他模型控制器架构）

> ID：14276965
> 
> 赞同：1
> 
> 时间：2013-01-11T11:13:13.440
> 
> 标签：ruby-on-rails, service, mc

在存在“Articles”、“Jobs”、“Workers”等模型的服务器应用程序中

例如，在有这些模型的服务器端应用程序中：

*   产品
*   工作
*   工作人员

并且有一个像 start job 这样的动作，它执行以下操作：

*   产品：作业的产品请求数量增加
*   作业：作业已插入
*   工人：作业的工人设置为不可用，并保存了对当前作业的引用

现在我的问题是：我应该把上面描述的逻辑放在哪里？

*   我应该有一个名为“jobs/start”的控制器，它调用模型“job.start（args ...）”上的方法。在此模型方法中，它调用“product.increaseRequestedQuantity(args...)”和“worker.setBusy()”

*   我应该有一个名为“jobs/start”的控制器，它调用“job.start(args...)”然后是“product.increaseRequestedQuantity(args...)”和“worker.setBusy()”

我真的不知道哪个是最佳实践，首先模型知道其他模型，但逻辑是核心。*在第二种情况下，模型并不直接*了解彼此，但逻辑更加分散。在工作中还有一个名为“start”的方法，人们会假设它会在应用程序级别启动工作（这意味着它会更改产品和工作模型）但会影响模型级别（意味着只更改工作模型，不改变产品和工人模型）。

您对此事和这种关注点分离有何看法？

这适用于使用 Rails 的人，即使我不是特别谈论 Rails（我自己的框架基于 node.js 中的服务+模型，其中服务就像 Rails 中的控制器），或任何其他 MC 框架， （请注意，我不关心视图，因为服务必须只导出数据。视图仅在请求数据的客户端上）。

我读过关于[Rails 模型是否应该为了瘦控制器而关注其他模型？](https://stackoverflow.com/questions/64214/should-rails-models-be-concerned-with-other-models-for-the-sake-of-skinny-contro)但如果可能的话，我希望得到更深入的解释，以及这个确切主题的书籍/链接参考。

感谢您花时间阅读我的问题（：

# payment-gateway - 谷歌钱包可以通过服务器端代码从信用卡中扣款吗？

> ID：14276972
> 
> 赞同：0
> 
> 时间：2013-01-11T11:13:27.017
> 
> 标签：payment-gateway, payment-processing, android-pay

我可以仅通过服务器端代码向 Google 电子钱包收取信用卡费用（例如通过 HTTPS POST 吗？）

如果是这样 ：-

*   任何指向此 API 的链接？
*   他们可以接受 1 美元 <-> 10 美元的交易（即小额支付）吗？

到目前为止，我所读到的只是谷歌钱包需要客户端和服务器端代码:(

我不想使用任何客户端代码，而是提供我自己的网页.. 这就是所有的收费。

（并且不 -> 地狱没有办法将任何 POST'd 信用卡存储到我的服务器，即使我可以访问，因为我需要将该信息转发到 Google Wallet）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:42:22.470

AFAIK，[Google Commerce Payment APIs](https://developers.google.com/commerce/)利用 Google Wallet - 存储的 Google 用户的付款信息，您（商家）将无法真正访问（*原始*数据） - 否则 Wallet 对（Google）用户没有多大用处。 ..

以下是关于他们[最新 API](https://developers.google.com/commerce/wallet/online/faq)的一些常见问题解答：

> **问：在交易过程中，Google 会从客户和商家那里传递哪些付款信息？** 答：Google 会将与 The Bancorp Bank 发行的一次性使用借记卡预付卡相关的以下详细信息传递给商家：姓名、完整的信用卡号、CVC、到期日期、帐单邮寄地址和电话号码。如果相关，Google 还将发送用户的电子邮件地址和送货地址。谷歌还将客户真实卡的最后 4 位数字传递给商家。
> 
> **问：什么是虚拟一次性卡？** 答：对于通过实施 Google Wallet for online commerce API 的商家进行的在线购物，Google Wallet 不会与卖家分享您的完整信用卡或借记卡信息。相反，会生成一张 Google Wallet Virtual OneTime Card（由 Bancorp 银行发行的预付借记卡）并发送给商家以完成您的购买。Google Wallet 将使用 Google Wallet Virtual OneTime Card 促进付款，然后从您的信用卡或借记卡中收取相同的金额。

AFAIK，移动钱包（手机/nfc）也是如此。

# android - Y轴上的Android“achartengine”点

> ID：14276973
> 
> 赞同：2
> 
> 时间：2013-01-11T11:13:31.717
> 
> 标签：android, gridview, achartengine

我在 android 中使用“achartengine”作为图表，因为我想要点`Y-axis`as`0,0.5,1.0,1.5`而不是`0,1,2,3,4`.

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:17:30.840

您可以调整使用的值，`renderer.setYLabels()`直到它显示您需要的值。

或者您可以添加自定义标签：

```
renderer.addYTextLabel(0.5, "0.5"); 
```

# java - Ajax 不适用于richfaces

> ID：14276978
> 
> 赞同：0
> 
> 时间：2013-01-11T11:13:40.617
> 
> 标签：java, ajax, richfaces, jboss7.x

我正在尝试使用 AJAX 来更改我的页面内容并包含一些其他内容，但它不起作用。我尝试了很多不同的解决方案。我需要我的 menuItem_Cursos 调用托管 bean changePage 并呈现组件 panelGroup_Target。当我尝试调试 java 时，它只是没有到达那里。请帮忙。

这是页面

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>PenSAE</title>
    <f:metadata>
        <f:event listener="#{logon.verificaLogon}" type="preRenderView" />
    </f:metadata>
    <h:outputScript name="common.js" />
</h:head>
<h:body>
    <f:view id="view_Principal">
        <rich:toolbar id="toolbar_Principal" itemSeparator="">
            <rich:menuItem id="menuItem_Cursos" label="Cursos" mode="ajax"
                actionListener="#{principalProfessor.changePage}" render="panelGroup_Target"/>
            <rich:menuItem id="menuItem_Estudos" label="Estudos de Casos"
                value="Estudos de Casos" />
            <rich:dropDownMenu id="dropDownMenu_Acompanhamento"
            label="Acompanhamento" value="Acompanhamento" mode="ajax">
                <rich:menuItem label="Acompanhamento por Estudante" />
                <rich:menuItem label="Acompanhamento por Estudo de Caso" />
            </rich:dropDownMenu>
            <rich:dropDownMenu id="dropDownMenu_Sobre" label="Sobre o Sistema"
                value="Sobre o Sistema">
                <rich:menuItem label="Mapa do Software" />
                <rich:menuItem label="Ajuda" />
            </rich:dropDownMenu>
        </rich:toolbar>
        <h:panelGroup id="panelGroup_Target">
            <rich:panel rendered="#{principalProfessor.page == 'listaCursos'}">
                <ui:include src="#{principalProfessor.page}" />
            </rich:panel>
        </h:panelGroup>
    </f:view>
</h:body>
</html> 
```

这是我的java代码：

```
package magicBeans.professor;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.ActionEvent;

import classesBasicas.Curso;
import classesBasicas.Pessoa;

import fachada.Fachada;
/**
 * @author Jesus
 *
 */
@ManagedBean(name="principalProfessor")
@ViewScoped
public class PrincipalProfessorBean {

    @SuppressWarnings("unused")
    private static Fachada fachada;

    private Pessoa usuarioLogado;
    private Curso curso;
    private String page = "";  

    public PrincipalProfessorBean(){

        fachada = Fachada.getInstance();
    }

    /**
     * @return the usuarioLogado
     */
    public Pessoa getUsuarioLogado() {
        return usuarioLogado;
    }

    /**
 * @param usuarioLogado the usuarioLogado to set
     */
    public void setUsuarioLogado(Pessoa usuarioLogado) {
        this.usuarioLogado = usuarioLogado;
    }

    /**
     * @return the curso
     */
    public Curso getCurso() {
        return curso;
    }

    /**
     * @param curso the curso to set
     */
    public void setCurso(Curso curso) {
        this.curso = curso;
    }

    public String getPage() {  
        return page;  
     }  

     public void setPage(String page) {  
        this.page = page;  
     }  

     public void changePage() {  
        page = "listaCursos.xhtml";
        System.out.println("AJAX PEGOU!");
     } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:33:31.370

多亏了 chrome (ctrl+shift+j) on chrome，控制台告诉它需要一个带有 ajax 的表单才能工作。=]

# c++ - Spirit Boost real_p 解析器行为异常

> ID：14276989
> 
> 赞同：1
> 
> 时间：2013-01-11T11:14:01.917
> 
> 标签：c++, boost-spirit

我有以下问题：我正在重用使用 real_p 解析器解析实数的旧代码。我想捕获每个数字，将其转换为字符串，并将其放入字符串向量中。我正在使用以下代码，其中 l_double 是 double 类型的变量，convertdouble 函数将 double 转换为字符串，result.m_literalValues 是字符串的向量。但是，代码不会将解析后的值分配给 l_double。

```
rule<> alternative3 =   +(real_p        [assign_a(l_double)]
                                        [push_back_a(result.m_LiteralValues, convertdouble(l_double))]
                                        >>  str_p(",")
                            ) 
```

有谁知道我做错了什么？

注意：我不会重新设计旧代码，这比给出的示例要复杂得多。我只想提取所有解析值的字符串，并将它们放入字符串向量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:36:28.447

问题似乎位于`push_back_a(result.m_LiteralValues, convertdouble(l_double))`，特别是在`convertdouble(l_double)`. [`push_back_a`要求](http://www.boost.org/libs/spirit/classic/doc/predefined_actors.html)其第二个参数是要存储在“策略持有者参与者”中的引用，因此在此处使用函数调用会导致错误。如果您不需要存储`l_double`并且只是将其用作临时对象，那么完成您想要的一种方法是创建您自己的 phoenix 函数，该函数的行为类似于[此处](http://www.boost.org/libs/spirit/classic/example/fundamental/stuff_vector.cpp)`push_back_a`所解释的（[此处](http://www.boost.org/libs/spirit/classic/doc/phoenix.html)的完整示例）。您可以这样定义 phoenix 函数：

```
struct push_back_impl
{
    template <typename Container, typename Item>
    struct result
    {
        typedef void type;
    };

    template <typename Container, typename Item>
    void operator()(Container& c, Item const& item) const
    {
        c.push_back(convertdouble(item));
    }
};

function<push_back_impl> const push_back = push_back_impl(); 
```

然后像这样定义你的规则：

```
rule<> alternative3 =   +( real_p[push_back(var(result.m_LiteralValues),arg1)] >>  str_p(",") ); 
```

完整的可编译代码（如果您不能/不想使用 c++11，请更改 for 循环以显示结果）：

```
#include <boost/spirit/include/classic_core.hpp>
#include <boost/spirit/include/classic_operators.hpp>
#include <boost/spirit/include/phoenix1_functions.hpp>
#include <boost/spirit/include/phoenix1_primitives.hpp>
#include <iostream>
#include <string>
#include <sstream>
#include <vector>

using namespace boost::spirit::classic;
using namespace phoenix;

std::string convertdouble(const double& d)
{   
    std::stringstream ss;
    ss<<d;
    return ss.str();
}

struct push_back_impl
{
    template <typename Container, typename Item>
    struct result
    {
        typedef void type;
    };

    template <typename Container, typename Item>
    void operator()(Container& c, Item const& item) const
    {
        c.push_back(convertdouble(item));
    }
};

function<push_back_impl> const push_back = push_back_impl();

struct Results
{
    std::vector<std::string> m_LiteralValues;
};

int main()
{
    Results result;
    char const* test="2.5,3.6,4.8,";
    rule<> alternative3 =   +( real_p[push_back(var(result.m_LiteralValues),arg1)] >>  str_p(",") );

    if(parse(test,alternative3,space_p).full)
    {
        std::cout << "success" << std::endl;
        for(auto& str :result.m_LiteralValues)
            std::cout << str << std::endl;
    }
    else
    {
        std::cout << "failure" << std::endl;
    }

    return 0;                       
} 
```

# azure - 查询 rootDSE tokenGroups 为空，应包含用户的安全组

> ID：14276997
> 
> 赞同：0
> 
> 时间：2013-01-11T11:14:38.277
> 
> 标签：azure, active-directory

一点背景知识：我正在尝试使用 Microsoft DirSync 工具将我们的一个开发 AD 同步到 Azure Active Directory 设置。配置失败，因为该工具声称我尝试使用的 AD 帐户缺少“企业管理员”组的成员身份。

深入研究根本原因，我已经能够确定执行检查的代码正在查询安全组，如下所示：

```
public static void Repro(string userName, string password)
{
    string name = ADValidation.GetUsersForest(userName, password).Name;
    string path = string.Format("LDAP://{0}/", name);
    string rootDse = string.Format("{0}rootDSE", path);
    Console.WriteLine("Path: {0}", path);
    Console.WriteLine("RootDse: {0}", rootDse);
    const AuthenticationTypes authenticationType = AuthenticationTypes.Signing | AuthenticationTypes.Secure;
    using (var entry = new DirectoryEntry(rootDse, userName, password, authenticationType))
    {
        entry.RefreshCache(new[] { "tokenGroups" });
        Console.WriteLine(entry.Properties["tokenGroups"].Count);
    }
} 
```

在我们的公司 AD 上运行此块会按预期生成安全组列表：

```
Path: LDAP://SOMECORPDOMAIN.EXT/
RootDse: LDAP://SOMECORPDOMAIN.EXT/rootDSE
39 
```

在开发 AD 上运行它时不会产生任何组：

```
Path: LDAP://SOMEDEVDOMAIN.EXT/
RootDse: LDAP://SOMEDEVDOMAIN.EXT/rootDSE
0 
```

我对 AD 的了解非常有限 - 谁能给我一些指示，说明为什么开发 AD 不会为查询返回任何安全组？

提前致谢/迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:45:43.843

可能与AD用户权限有关。

# css - 清除：右浮动：左 div

> ID：14276999
> 
> 赞同：1
> 
> 时间：2013-01-11T11:14:46.937
> 
> 标签：css

所以我有两个 div 都在使用`float:left`，所以它们彼此相邻出现。如果我`clear:left`在第二个 div 上使用它会移动到新行，为什么`clear:right`第一个 div 不能达到同样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:15:41.597

`clear: right`意思是“只清除正确的浮动”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T14:44:00.227

更准确地说，[CSS 2.2 规范](https://drafts.csswg.org/css2/visuren.html#flow-control)说：

> **clear:right**要求框的上边框低于源文档中较早元素产生的任何右浮动框的下外边缘。