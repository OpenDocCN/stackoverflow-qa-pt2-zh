# StackOverflow 问答 14526000-14526999

# json - ajax post的json转换数组

> ID：14526005
> 
> 赞同：0
> 
> 时间：2013-01-25T16:25:19.420
> 
> 标签：json

有没有人知道我是怎么来的：

```
var guests = [];
for (var i = 0; i < parseInt(apartments) ; i++) {
     var pos = i + 1;

     var adults, children, infants;

     adults = $("#adults" + pos).val();
     infants = $("#infants" + pos).val();
     children = $("#children" + pos).val();
     guests.push({ Leg: pos, Adults: adults,
        Children: children, Infants: infants 
     });
} 
```

对于这样的事情：

```
Guests: [{ Leg: "1", Adults: "2", Children: "0", Infants: "2" },{ Leg:
"2", Adults: "2", Children: "1", Infants: "0" }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:38:36.400

利用

```
JSON.stringify(guests); 
```

我认为应该这样做。

# html - CSS背景颜色不适用于

> ID：14526009
> 
> 赞同：0
> 
> 时间：2013-01-25T16:25:24.383
> 
> 标签：html, css, background-color

```
body {
    background-color: #FFFDEC;
}

.header {
    position: fixed;
    top: 0;
    left: 0;
    height: 50px;
    width: 100%;
    background-color: #04A7A6;
    margin: 0;
    display: block;
    z-index: 10;
}

.headermenu {
    xposition: fixed;
    top: 50px;
    left: 0;
    height: 50px;
    width: 100%;
    background-color: #333;
    color: #333;
    margin: 0;
    overflow: visible;
    z-index: 20;
} 
```

此代码 => 不显示我的第二个标题...？我知道这与标题与标题菜​​单冲突有关，但它与正文背景不冲突？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:27:18.060

应该

```
xposition:fixed; 
```

是

```
position:fixed; 
```

?

[***工作小提琴***](http://jsfiddle.net/nv8as/)

# javascript - 将数组保存到 roamingSettings

> ID：14526013
> 
> 赞同：0
> 
> 时间：2013-01-25T16:25:44.100
> 
> 标签：javascript, windows-8

有没有办法保存`listArrays`在漫游设置中？在js中我会这样做：

```
var test = [];  
test.push({var1:'somevalue',var2:'someotherstuff'}); 
```

但如何将其保存在：

```
var appData = Windows.Storage.ApplicationData.current;
var roamingSettings = appData.roamingSettings; 
```

当我尝试设置变量时：

```
roamingSettings.values['myArrayList'] = test; 
```

我收到类型冲突错误。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:45:12.033

您[显然](http://social.msdn.microsoft.com/Forums/lv-LV/winappswithhtml5/thread/26a3c53a-c939-49dd-a3d5-acd20bfc7ef1)不能在`localSettings`or `roamingSettings`values 字段中存储对象。但是，您始终可以将数组字符串化并将其解析为 JSON 来存储它。

```
roamingSettings.values['myArrayList'] = JSON.stringify(test); 
```

和

```
test = roamingSettings.values['myArrayList'] = JSON.parse(test); 
```

请记住，[用于漫游设置的阵列大小不能超过 8 KB](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.storage.applicationdata.roamingsettings.aspx)。由于您必须对其进行字符串化，这包括所有 JSON 括号和空格！

# dynamics-nav - Navision 2013 动态更改页面上字段列表的标题

> ID：14526014
> 
> 赞同：1
> 
> 时间：2013-01-25T16:25:45.350
> 
> 标签：dynamics-nav

在页面中，我有一个可以进行过滤的字段列表。通常它反映标题字段。该列表受字段属性'captionclass'（例如Dimension）的约束我修改了codeunit 42以管理（使用我的函数）依赖于表中记录中的值的标题。它在 OpenPage 上运行良好，但是如果我更改页面列表中的记录，它将不会被重新初始化。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:12:23.737

是否在必要时使用以下代码刷新表单，解决问题？

**形式**

```
CurrForm.UPDATE(FALSE); 
```

**页**

```
CurrPage.UPDATE(FALSE); 
```

# c# - Global.asax 父应用和子应用

> ID：14526017
> 
> 赞同：0
> 
> 时间：2013-01-25T16:25:50.493
> 
> 标签：c#, asp.net

我现在正在处理一些遗留代码，我正在尝试将 Global.asax 文件移动到父应用程序，它将管理所有子应用程序。目前我们在所有子应用程序中都有一个 Global.asax 文件（坏）。

当我尝试从子应用程序中删除 Global.asax 文件时，不幸的是它找不到父应用程序的 Global.asax 文件。因此，我无法在子应用程序中保持身份验证。我想知道是否有一个简单的解决方法。

结构：

```
parent app 
  files...
  childapp
    files..
    global.asax
  global.asax 
```

我希望 childapp 找到父母的 Global.asax 文件。

多谢你们！

编辑：

全球.asax

（这在父应用程序和子应用程序中是相同的）

```
protected void Application_Start(object sender, EventArgs e)
        {

        }

        protected void Session_Start(object sender, EventArgs e)
        {

        }

        protected void Application_BeginRequest(object sender, EventArgs e)
        {

        }

        public void Application_AuthenticateRequest(Object sender, EventArgs e)
        {
            String cookieName = FormsAuthentication.FormsCookieName;
            HttpCookie authCookie = Context.Request.Cookies[cookieName];

            if (null == authCookie)
            {//There is no authentication cookie.
                return;
            }

            FormsAuthenticationTicket authTicket = null;

            try
            {
                authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            }
            catch (Exception ex)
            {
                //Write the exception to the Event Log.
                return;
            }

            if (null == authTicket)
            {//Cookie failed to decrypt.
                return;
            }

            //When the ticket was created, the UserData property was assigned a
            //pipe-delimited string of group names.
            String[] groups = authTicket.UserData.Split(new char[] { '|' });

            //Create an Identity.
            GenericIdentity id = new GenericIdentity(authTicket.Name, "LdapAuthentication");

            //This principal flows throughout the request.
            GenericPrincipal principal = new GenericPrincipal(id, groups);

            Context.User = principal;

        }

        protected void Application_Error(object sender, EventArgs e)
        {

        }

        protected void Session_End(object sender, EventArgs e)
        {

        }

        protected void Application_End(object sender, EventArgs e)
        {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:54:04.823

正如其他人所说，可能有更好的方法来实现你的目标，但严格来说，如果我正确理解你的问题，它应该是可能的。

每个 Global.asax 继承自的类必须位于共享程序集中。然后，您可以更改每个 Global.asax 文件的标记以从该共享类继承。

```
<%@ Application Inherits="MySharedGlobal" Language="C#" %> 
```

您可以删除每个应用程序（父应用程序和子应用程序）背后的代码，但 Glabal.asax 文件必须保留。

*您可以将共享代码移动到基类中，就像每个应用程序对象从后面的代码中继承一样容易。这将允许您仍然根据需要添加应用程序特定的逻辑。*

**现在，您还可以创建一个 IHttpModule 并在其中放置共享代码，并且在父应用程序中加载时也将在子应用程序中加载（通过配置继承）。**

*编辑：*
如果我理解正确，您希望在每个应用程序中运行相同的代码，而不是一遍又一遍地复制和粘贴。如果您需要为每个嵌套站点提供实际的“应用程序”，那么该代码必须运行多次。但是，这并不意味着它不能共享。

一种简单的方法是创建实现类`IHttpModule`并将其添加到父应用程序配置文件中。在“Init”方法中，您可以挂钩`AuthenticateRequest`事件并运行您从那里发布的相同代码，并将其从每个子应用程序后面的 Global.asax 代码中删除。

实现它的另一种方法是创建一个`HttpApplication`挂钩到同一事件的实现（就像现在一样）。然后，您可以将共享代码放在基类中，并且 Global.asax 代码隐藏文件中的每个类都将从该类继承。然后您可以从每个 Global.asax 代码隐藏文件中删除代码。

如果您创建`IHttpModule`Global.asax 文件，则可能会被删除。否则，他们将需要留下来。

# php - 加载 Facebook 应用时显示 GIF

> ID：14526021
> 
> 赞同：1
> 
> 时间：2013-01-25T16:25:59.603
> 
> 标签：php, facebook, jquery

我在 Facebook 应用程序的第一页中有很多服务器代码 (PHP)。我不希望用户在等待页面时看到加载动画。

我在这里看到了很多关于如何预加载页面（使用 ajax 或简单地使用 jQuery）的示例，但正如我所说，这是不同的，页面本身是在服务器上生成的，在这种情况下，用户只会看到一个白色的空白页。

我试图用另一个 php 页面包装我的主页：

```
<?php
include_once 'functions.php';
session_start();
$_SESSION['fb'] = new fb();

function phponload(){
    echo
        '<script>
            $(function(){
                $("#mwrapper").load("main.php");
            });
        </script>';
}
?>
<html>
<head>
    <script type="text/javascript">
        function delayer(){
        document.write("<?php phponload();?>");
        }
    </script>
    <link href='styles/default.css' rel='stylesheet' type='text/css' />
        <img class='mainload' src='images/loading.gif'></img>
    <script src='//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
    <link rel='stylesheet' type='text/css' href='plugins/clock/clock.css' />
</head>

<body onload='setTimeout("delayer()",1000);'>
    <div id='mwrapper'>

    </div>
</body>

</html> 
```

现在主 php 页面 (main.php) 具有如下内容：

```
<!DOCTYPE html>
<html xmlns:fb="http://ogp.me/ns/fb#">
<meta name="google-site-verification"         content="Hyqgg60NTPNA7Q9Z5y9TtezUmwhiEomwZLJDt43Ki2g" />
<!--<img class='mainload' src='images/loading.gif'></img>-->
<?php
include_once 'functions.php';
include 'res/views/getTables.php';
define('TXT_QUESTIONS_NUM', 43);
session_start();
{... more PHP code ... }
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js">  </script>
    <script src='scripts/menuItems.js'></script>
    <script src='scripts/main.js'></script>
    <link href='styles/jquery.ui.smooth.theme.css' rel='stylesheet' type='text/css'/>
    <script type="text/javascript" src="plugins/clock/clock.js"></script>
    <link rel="icon" href="images/favicon.ico">
</head>

<div class='container' id='main'>
...
</div>
</body>
</html> 
```

现在，所有代码都是循环播放 GIF - 但不加载 main.php :( 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T01:27:50.480

Chrome/Firebug 控制台上是否有任何错误？

我不明白为什么你在 PHP 函数中生成加载器 JS 代码（你可以直接把它放在 HTML 中），但是这样做你在`document.write`函数的引号之间放置了一个多行块，这会导致错误。

但是，我认为问题在于浏览器将插入的内容解释`</script>`为 HTML 标记的结尾，因此后面的内容（`document.write`调用和`delayer`函数的结尾）被视为 HTML 而不是 Javascript。

编辑：补充答案，这是我用来加载另一个页面的代码：

```
function delayer(){
    $("#mwrapper").load("main.php", function(){
        $('.mainload').remove();
    });
} 
```

不需要任何 PHP 生成。此外，该`load`函数的第二个参数是加载完成时调用的回调，在这种情况下，我曾经删除加载的 GIF。

# oracle - Oracle 过程输入以逗号分隔，不返回任何值

> ID：14526023
> 
> 赞同：0
> 
> 时间：2013-01-25T16:26:02.653
> 
> 标签：oracle, plsql, procedure, csv

我正在工作的过程有一个`input`以逗号分隔的变量。截至目前，当我运行测试脚本时，我没有得到任何值。这是我到目前为止所拥有的。

```
procedure get_patient(
p_statusmnemonic_in    in membermedicalreconcilationhdr.reconciliationstatusmnemonic%type,
p_return_cur_out       out sys_refcursor,
p_err_code_out         out number,
p_err_mesg_out         out varchar2)
  is
  begin
open p_return_cur_out for
  select h.primarymemberplanid,
         h.assigneduserid,
         h.accountorgid,
         h.reconciliationstatusmnemonic,
         h.estimatedenddt,
         h.actualenddt,
         h.inserteddt,
         h.insertedby,
         h.updateddt,
         h.updatedby
  from membermedicalreconcilationhdr h
  where h.reconciliationstatusmnemonic in (p_statusmnemonic_in);
p_err_code_out := 0;
  exception
when others then
  p_err_code_out := -1;
  p_err_mesg_out := 'error in get_patient=> ' || sqlerrm;
  end get_patient; 
```

这是测试脚本：

```
set serveroutput on
declare
  type tempcursor is ref cursor;
  v_cur_result tempcursor;
  errcode number;
  errmesg varchar2(1000);
  p_primarymemberplanid_in    membermedicalreconcilationhdr.primarymemberplanid%type;
  p_assigneduserid_in         membermedicalreconcilationhdr.assigneduserid%type;
  p_accountorgid_in           membermedicalreconcilationhdr.accountorgid%type;
  p_reconstatusmnemonic_in        membermedicalreconcilationhdr.reconciliationstatusmnemonic%type;
  p_estimatedenddt_in         membermedicalreconcilationhdr.estimatedenddt%type;
  p_actualenddt_in            membermedicalreconcilationhdr.actualenddt%type;
  p_inserteddate_in           membermedicalreconcilationhdr.inserteddt%type;
  p_insertedby_in             membermedicalreconcilationhdr.insertedby%type;
  p_updateddate_in           membermedicalreconcilationhdr.updateddt%type;
  p_updatedby_in           membermedicalreconcilationhdr.updatedby%type;

begin
  get_patient      
('COMPLETE,SUSPENDED_PRIOR_TO_COMPARE',v_cur_result, errcode, errmesg);
--('COMPLETE',v_cur_result, errcode, errmesg);

   loop
fetch v_cur_result into p_primarymemberplanid_in,p_assigneduserid_in,p_accountorgid_in,p_reconstatusmnemonic_in,
                        p_estimatedenddt_in,p_actualenddt_in,p_inserteddate_in,p_insertedby_in,
                        p_updateddate_in,p_updatedby_in;

  dbms_output.put_line(' planid '||p_primarymemberplanid_in||' userid '||p_assigneduserid_in);
  exit when v_cur_result%notfound;
  end loop;

  dbms_output.put_line(' error code '||errcode||' message '||errmesg);
end; 
```

截至目前，当我只有一个输入值时，我会返回值，但是当我尝试做两个时，我什么也得不到。我做了研究，看起来我的`select`陈述是正确的，所以我不知道我做错了什么。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:54:48.190

如果您可以更改过程的定义，则最好传入适当的集合。

```
CREATE TYPE status_tbl IS TABLE OF VARCHAR2(100);

procedure get_patient(
  p_statusmnemonic_in    in  status_tbl,
  p_return_cur_out       out sys_refcursor,
  p_err_code_out         out number,
  p_err_mesg_out         out varchar2)
is
begin
  open p_return_cur_out for
    select h.primarymemberplanid,
           h.assigneduserid,
           h.accountorgid,
           h.reconciliationstatusmnemonic,
           h.estimatedenddt,
           h.actualenddt,
           h.inserteddt,
           h.insertedby,
           h.updateddt,
           h.updatedby
      from membermedicalreconcilationhdr h
     where h.reconciliationstatusmnemonic in (SELECT * 
                                                FROM TABLE(p_statusmnemonic_in));
  ... 
```

否则，您将不得不求助于使用动态 SQL（这会影响安全性和性能），或者您需要编写代码来将逗号分隔的字符串解析为一个集合，然后使用`TABLE`运算符在查询中使用该集合.

假设您修改了过程的签名，调用也必须更改，以便您传入一个集合。

```
get_patient      
(status_tbl('COMPLETE','SUSPENDED_PRIOR_TO_COMPARE'),
 v_cur_result, 
 errcode, 
 errmesg); 
```

需要指出的是，编写具有错误代码和错误消息`OUT`参数而不是抛出异常的过程通常是非常不受欢迎的。消除这些参数并在遇到错误时抛出异常更有意义。否则，您将依赖每个过程的每个调用者来正确检查返回的状态代码和消息（您的示例代码没有这样做）。而且您正在丢失大量有价值的信息，例如错误发生在哪一行、错误堆栈是什么等。

由于您没有发布表定义或示例数据，因此我们无法测试此代码。不过，这里有一个快速演示，它是如何工作的

```
SQL> create table patient (
  2    patient_id number primary key,
  3    status     varchar2(10),
  4    name       varchar2(100)
  5  );

Table created.

SQL> insert into patient values( 1, 'COMPLETE', 'Justin' );

1 row created.

SQL> insert into patient values( 2, 'SUSPENDED', 'Bob' );

1 row created.

SQL> insert into patient values( 3, 'NEW', 'Kerry' );

1 row created.

SQL> commit;

Commit complete.

SQL> CREATE TYPE status_tbl IS TABLE OF VARCHAR2(100);
  2  /

Type created.

SQL> ed
Wrote file afiedt.buf

  1  create or replace procedure get_patients( p_statuses in status_tbl,
  2                                            p_cursor out sys_refcursor )
  3  as
  4  begin
  5    open p_cursor
  6     for select *
  7           from patient
  8          where status in (select *
  9                             from table( p_statuses ));
 10* end;
SQL> /

Procedure created.

SQL> variable rc refcursor;
SQL> exec get_patients( status_tbl('COMPLETE', 'SUSPENDED'), :rc );

PL/SQL procedure successfully completed.

SQL> print rc;

PATIENT_ID STATUS
---------- ----------
NAME
--------------------------------------------------------------------------------
         1 COMPLETE
Justin

         2 SUSPENDED
Bob 
```

# python - 在 Python 中打开 .out 文件

> ID：14526024
> 
> 赞同：0
> 
> 时间：2013-01-25T16:26:05.470
> 
> 标签：python, ioerror

我认为 Python 无法打开和读取 .out 文件是否正确？

我的应用程序当前吐出一堆 .out 文件，这些文件将被手动读取以用于日志记录，我正在构建一个 Python 脚本来自动执行此操作。

当脚本到达以下

```
for file in os.listdir(DIR_NAME):
    if (file.endswith('.out')):
        open(file) 
```

该脚本因以下错误而爆炸“IOError：没有这样的文件或目录：'Filename.out'”

我有一个与上述代码类似的功能并且工作正常，只是它读取 .err 文件。在上述代码之前打印出 DIR_NAME 也表明指向了正确的目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:27:08.387

`os.listdir()`只返回文件名，而不是完整路径。用于`os.path.join()`创建完整路径：

```
for file in os.listdir(DIR_NAME):
    if (file.endswith('.out')):
        open(os.path.join(DIR_NAME, file)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:44:10.473

作为替代方案，我发现使用起来更容易和灵活：

```
import glob,os

for outfile in glob.glob( os.path.join(DIR_NAME, '*.out') ):
    open(outfile) 
```

Glob 也将接受诸如`'*/*.out'`or之类的东西`'*something*.out'`。我还阅读了某些类型的文件，发现这非常方便。

# asp.net - 如何设置 RIA 服务以使用现有的 ASP.Net 成员基础

> ID：14526026
> 
> 赞同：0
> 
> 时间：2013-01-25T16:26:12.473
> 
> 标签：asp.net, silverlight, authentication, asp.net-membership, wcf-ria-services

我想基于 Visual Studio 中的 Silverlight 业务应用程序模板制作一个 OOB Silverlight 应用程序。该模板使用默认的 ASP.Net 成员资格提供程序。我了解如何使用它来添加用户和角色等。我找到了很多关于此的教程。我想做的是配置 Silverlight 模板，以便它使用现有的 ASP.Net 成员基础。我们希望这个应用程序有一个配套网站（基于 ASP.Net）。

澄清一下：我们已经能够设置一个 ASP.Net 网站并创建了一个带有所需表（aspnet_Users、aspnet_Membership 等）的 SQL 数据库。我想配置一个 Silverlight 应用程序来访问这些表中的相同用户和角色。

任何人都可以帮助我解决我需要在 Web.config 中添加的内容吗？我只需要一个连接字符串吗？我是 ASP.Net 身份验证的新手，但我宁愿使用 ASP.Net 提供的开箱即用的功能，也不愿编写自己的身份验证服务。我觉得这应该很容易，只需将 Silverlight 应用程序指向正确的方向即可。

如果可以的话，我想使用 Silverlight 5 和 .Net 4.5，但我不介意使用旧版本，如果它使事情变得更容易的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:18:40.750

您可以将连接字符串指向现有数据库。

从[这个答案：](https://stackoverflow.com/questions/1100768/single-signon-from-multiple-applications/1100792#1100792)

> 您可以将用于身份验证的连接字符串指向所有应用程序都可以访问的数据库。
> 
> 因此，如果您拥有 .NET 创建的默认数据库，您也可以将其他应用程序指向该数据库以进行身份​​验证。

# xslt - 在 xsl中是什么意思

> ID：14526028
> 
> 赞同：0
> 
> 时间：2013-01-25T16:26:18.667
> 
> 标签：xslt

我真的面临一个奇怪的问题。除了在 IE8 上（不在 IE10 中）之外，在 mozilla 和 google chrome 中根本不显示罗马字符。

代码是使用 xsl 转换编写的。我找不到 `<var name="ROMAN">`是什么？这是我看到 html 源代码时的确切文本。

甚至相同的代码也是用 xsl 编写的。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:19:31.797

`<var>`是一个 HTML 元素，意思是“这是一个变量”。它通常会导致包含的文本以斜体呈现。它对 XSLT 没有任何特殊意义，它就像任何其他 HTML 元素名称一样。name="ROMAN" 就像任何其他 HTML 元素的 name 属性一样，它可以在 Javascript 中用于寻址页面中的相关元素节点。它不会更改元素的再现，除非某处可能有一些样式表可以识别 name="ROMAN" 并将其与显示样式相关联。

我认为您有一个 HTML 问题，而不是 XSLT 问题。您的 HTML 有问题，我们不知道是什么问题，因为您没有提供足够的信息。

# performance - 球偏好的最大化算法

> ID：14526031
> 
> 赞同：1
> 
> 时间：2013-01-25T16:26:39.793
> 
> 标签：performance, algorithm, types, theory, identify

我正在尝试为一个问题设计最有效的算法，但我遇到了一些困难。如果有人可以提供帮助，或者通过提出算法或对问题进行分类，以便我可以做一些进一步的研究，我将非常感激。

问题如下：

有n个（整数）个不同的红球，每个都有自己的编号，m个不同的绿球，每个都有自己对应的编号。例如，如果 n = 3，则有三个红球，分别名为红球 1、红球 2 和红球 3。还有两个盒子可以放置这些球。

然而，在将球放入盒子之前，有 x 人预测哪些球将放入哪个盒子（盒子 1 或盒子 2）。每个人得到一个预测，对于每个预测，他们可以猜测每个盒子里有一个球。唯一的条件是他们在盒子 1 中猜测的球不能与他们在盒子 2 中猜测的球颜色相同。一个示例预测是：“我认为红球 2 将在盒子 1 中，而绿球在 3 中将在框 2"

每个人都做出预测后，将球放入盒子中，以最大限度地增加正确预测的数量。

我必须编写的代码将提示 n、m 和 x 以及预测，然后被要求返回正确预测的最大数量。

再一次，我正在寻找算法帮助或帮助确定这是什么类型的问题。我目前有一个在 (n^2) 上运行的递归算法，但我需要一些更高效的东西。

谢谢你的帮助！干杯，伙计们！

# javascript - Google Charts Bubble Charts 分类 x 和 y 轴而不是数字

> ID：14526032
> 
> 赞同：2
> 
> 时间：2013-01-25T16:26:40.017
> 
> 标签：javascript, charts, google-visualization

我使用[Google Charts](https://developers.google.com/chart/interactive/docs/gallery/bubblechart?hl=ja)创建了一个漂亮的气泡图。这是图表的截图：

![在此处输入图像描述](../Images/f2cf4593be38074bbcb4d2ab6d10b041.png)

x 轴上的数字代表单个客户。y 轴上的数字代表单个产品。如您所见，大约有 23 个客户和 7 个产品。

问题是 X 和 Y 轴只能是数字（据我从文档中知道）。我希望能够沿轴显示客户和产品的**字符串值，而不仅仅是代表整数。**这将使我们更容易理解我们正在查看的内容。

有谁知道如何做到这一点？

我确实有包含客户和产品字符串的 JS 数组。它们的整数索引对应于图表上显示的数字。例如：

```
customers[6] = "Microsoft"
customers[7] = "Dell"
... 
```

但现在只显示整数。

任何帮助将不胜感激！谢谢！

这是我用来定义图表的代码：

```
 var options = {
        'title':'Customer / Product Grid',
        'width': 1000,
        'height':500
    };

    //for customer product grid
    var customer_product_grid_data_table = new google.visualization.DataTable();
    customer_product_grid_data_table.addColumn('string', 'Customer and Product');
    customer_product_grid_data_table.addColumn('number', 'Customer');
    customer_product_grid_data_table.addColumn('number', 'Product');
    customer_product_grid_data_table.addColumn('number', 'Profit Margin');
    customer_product_grid_data_table.addColumn('number', 'Proportion of Sales');

    for (var i = 1; i < customer_product_grid_data.length; i ++){ 
        customer_product_grid_data_table.addRow([
            '',
            customer_product_grid_data[i][0],
            customer_product_grid_data[i][1],
            (customer_product_grid_data[i][3] - customer_product_grid_data[i][2]) / customer_product_grid_data[i][3] * 100,
            customer_product_grid_data[i][3] / qnty_sell_total
        ]); 
    }

    var chart = new google.visualization.BubbleChart(document.getElementById('customer_product_grid'));
    chart.draw(customer_product_grid_data_table, options); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:03:39.267

从我所做的所有搜索以及 jmac 给出的答案来看，我决定唯一的方法是使用 Javascript hack 用单词替换轴号。我实现的代码在这里：

```
 /*
     *
     * The following 2 functions are a little hacky, they have to be done after calling the "draw" function
     * The bubble chart originally displays only numbers along the x and y axes instead of customer or product names
     * These 2 functions replace those numbers with the words for the customers and products
     *
     */
    for ( var i = -2; i < products.length + 1; i ++ ){
        $('#customer_product_grid svg text[text-anchor="start"]:contains("'+i+'")').text(function(j,t){
            if (t == i){
                if (i >= products.length || i < 0){
                    return " ";
                }
                return products[i];
            }
        });
    }

    for ( var i = -2; i <= customers.length + 3; i ++ ){
        $('#customer_product_grid svg text[text-anchor="end"]:contains("'+i+'")').text(function(j,t){
            if (i >= customers.length + 1 || i <= 0){
                return " ";
            }else if (t == i){                    
                return customers[i-1];
            }
        });
    } 
```

基本上，您只需创建一个 for 循环，遍历您在 x 和 y 轴上显示的所有整数。做一些`if...else`事情，要么用数组中的元素替换整数，要么把它留空。

请记住，要使上述代码正常工作，您需要在图表选项中具有以下属性 ->`vAxis: { textPosition: 'in' }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:54:08.683

不幸的是，没有像气泡图（或任何使用数字系列作为轴值的任何东西）那样简单的方法来做到这一点。[您可以按照此处](https://stackoverflow.com/questions/14194013/google-chart-how-to-draw-the-vertical-axis-for-linechart/14274651#14274651)的说明解决它。

一般概念是消除“主图表”上的轴标签并调整网格线以匹配您想要的标签数量。然后创建一个仅显示类别的附加虚拟图表，并使用它来显示标签。

不幸的是，在谷歌决定为图表轴实施整个 ICU 模式集之前，它必须是这样......

# javascript - 对象没有方法'live' - jQuery

> ID：14526033
> 
> 赞同：44
> 
> 时间：2013-01-25T16:26:43.500
> 
> 标签：javascript, jquery, live

```
<script>
$(document).ready(function(){
    $('.delete').live('click', function(e){
        alert('delete');
        e.preventDefault();
    });
});
</script>
<a href='#' id='_1' class='delete'>Delete</a> 
```

给我一个错误：

> 未捕获的类型错误：对象 [object Object] 没有“live”方法

我只是没有看到问题？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-25T16:27:45.127

`.live()`是一个不推荐使用的函数（从 1.7+ 开始）并从 jQuery 1.9+ 中完全删除。

您可以改为使用`.on()`or`.bind()`方法：

[http://api.jquery.com/on/](http://api.jquery.com/on/)
[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-25T16:52:09.957

1.  如果调用`.live()`在您自己的代码中，只需将其更改为使用[http://api.jquery.com/live](http://api.jquery.com/live)`.on()`中显示的规则。

2.  如果代码在第三方 jQuery 插件中，请使用 jQuery Migrate 插件来恢复`.live()`，直到作者更新他们的插件：[https](https://github.com/jquery/jquery-migrate#readme) ://github.com/jquery/jquery-migrate#readme 。

3.  在生产站点中，不要使用引用“最新”版本 jQuery 的 URL，例如[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)或[http://ajax.googleapis.com/ajax/libs/jquery /1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js)因为它们会在新版本的 jQuery 发布时自动更新，如果不兼容，您的网站会突然崩溃。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-08T11:15:49.893

请参阅[http://api.jquery.com/live/](http://api.jquery.com/live/)

老的

```
$("a.offsite").live("click", function(){ alert("Goodbye!"); });                // jQuery 1.3+
$(document).delegate("a.offsite", "click", function(){ alert("Goodbye!"); });  // jQuery 1.4.3+ 
```

新的

```
$(document).on("click", "a.offsite", function(){ alert("Goodbye!"); });        // jQuery 1.7+ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-25T16:28:25.760

如果您使用的是 jQuery 1.7+ ，请`on(...)`使用`live(...)`.
检查这个：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-25T19:08:06.957

有一种情况是 .on() 和 .bind() 都不起作用：在添加事件处理程序时元素不存在。这就是 live() 所做的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T16:29:12.700

[使用 .on](http://api.jquery.com/on/)

```
<script>
$(document).ready(function(){
    $('.delete').on('click', function(e){
        alert('delete');
        e.preventDefault();
    });
});
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T18:07:21.520

有一个 jQuery 迁移插件（使用它）.......它将解决问题

ASP.NET MVC ajax-unobtrusive + jQuery 1.9 [http://bugs.jquery.com/ticket/13220](http://bugs.jquery.com/ticket/13220)

# ruby-on-rails - 如何自动将 ActiveRecord 的字段值复制到其新创建的关系中？

> ID：14526034
> 
> 赞同：1
> 
> 时间：2013-01-25T16:26:55.257
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我有以下课程：

```
class User < ActiveRecord::Base
  attr_accessible :language_id
  has_many :lists
end

class List < ActiveRecord::Base
  attr_accessible :language_id
  belongs_to :user
end 
```

我想自动将用户的 language_id 分配给新创建的列表：

```
# list.language_id should be equal to user.language_id
list = user.lists.create 
```

我找到的最干净的解决方案是在 List 类中添加一个过滤器：

```
before_validation :assign_language_id, on: :create

def assign_language_id
  self.language_id = self.user.language_id
end 
```

这似乎不是一个糟糕的解决方案，但我想知道 Rails 是否有一些魔法来处理更漂亮的问题。我知道我总是可以要求`list.user.language_id`而不是复制它，但请假设，我真的需要在这里拥有它。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:00:50.957

两件事情：

1.  你能有一个没有用户的列表吗？如果是，则该回调将失败，您需要检查用户是否存在。
2.  list language_id 是否总是与 user.language_id 相同？如果是，我建议将 language_id 和语言委托给用户，`delegate :language, :language_id, :to => :user`您可以查看[http://apidock.com/rails/Module/delegate](http://apidock.com/rails/Module/delegate)以了解委托的工作方式和更多选项。

# java - 带参数的 Google App Engine ApiMethod 不起作用

> ID：14526038
> 
> 赞同：1
> 
> 时间：2013-01-25T16:27:00.180
> 
> 标签：java, android, api, google-app-engine, google-cloud-endpoints

到目前为止，我能够在 Google 中找到所有问题的答案，但这次我放弃并创建了一个帐户......

我开始在 Eclipse 中使用 GAE for Android 应用程序，我正在编写一个 API，当然还有 ApiMethods。
我写的其中一个方法有一个返回值，但在客户端代码中它似乎是无效的。
这是我试图生成的非常有用的方法：

```
@ApiMethod(name = "weather.bla")
public double Bla(double d)
{
    return 2.5;
} 
```

如您所见，此方法获取一个双精度变量作为参数并返回一个双精度值，但在客户端代码上，它似乎不承认这些双精度值。（它自动完成到 weather().bla()并且 .execute() 方法是无效的）
我什至尝试编辑生成的代码并在必要的地方添加双打，但是当我尝试运行应用程序时它有点爆炸，没有“强制关闭”警报，没有警告，该应用程序就消失了。

更奇怪的是，我在 GAE 代码上有一个名为“Weather”的类，而使用 Wea​​ther 类的 ApiMethods 可以完美生成。

我在这里错过了一些基本的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:49:56.973

您应该将 Java Beans 作为参数和返回类型进行传递。这将起作用：

```
class Response {
  private Double d;

  // getter and setter
}

@ApiMethod(name = "weather.bla")
public Response Bla()
{
  Response r = new Response();
  r.setD(2.5)
  return r;
} 
```

例外情况是查询参数（作为 API 方法的参数）。如果使用注解对参数进行`@Named`注解，则不再需要是 Java Bean（您可以使用`Double`、`String`、`Long`等）例如：

```
@ApiMethod(name = "weather.bla")
public Response Bla(@Named("d") Double d)
{
  Response r = new Response();
  r.setD(d)
  return r;
} 
```

# firefox - FireFox-10 在哪里隐藏 URL Favicon 关系？

> ID：14526040
> 
> 赞同：0
> 
> 时间：2013-01-25T16:27:04.567
> 
> 标签：firefox, tabs, favicon, address-bar

我们使用 CentOS-6，一个 RedHat EL6 发行版重建，它附带 FireFox-10.0.12 ESR。我们最近更改了几个内部服务器上的 favicon.ico 图像。实际上，我们只是为那些没有的网站提供了公司网站图标。

现在，困难是这样的。当在提供网站图标之前访问给定 url 的 FF 用户现在在更新后访问该 url 时，新的网站图标不会显示在他们的 URL 地址栏或该页面的选项卡中。相反，他们看到的虚线框轮廓表明不存在网站图标。

但是，如果以前从未访问过相同 url 的 FF 用户这样做，那么该 FF 实例确实会在该 FF 浏览器的地址栏和选项卡中显示新的网站图标。

我对此进行了简短的调查，坦率地说，我对这个问题的普遍性感到震惊，甚至在 Mozilla 自己的支持论坛上也完全没有对这个问题做出任何明智的回应。我曾尝试在places.sqlite 商店进行黑客攻击和挑选，但即使删除整个places.sqlite 文件或清空favicon 表并重新启动firefox 也不能解决显示已更改的favicon 选项卡和url 图标显示的问题。所做的只是锤击用户的书签。

现在我可以并且已经采用了添加那些使用静态页面但有些是由第三方应用程序动态生成的 url 块`<link rel="icon" href="favicon.ico">`的技巧。`<head></head>`这些 url 不提供对其输出进行此修改的便捷方法。

FireFox-10 在哪里缓存新访问的 url 的 favicon 以及如何从用户的配置文件中删除该引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T17:58:45.890

浏览器不一定会*在每次访问*时请求 /favicon.ico（或元标记指定的图标）的新副本。一旦它有一个图标（或认为没有图标），通常需要一段时间才会请求更新（这取决于特定的浏览器）。我在取消标记网站和清除浏览器缓存方面取得了*一些成功。*

# jquery - jQuery图像过渡插件

> ID：14526043
> 
> 赞同：0
> 
> 时间：2013-01-25T16:27:08.467
> 
> 标签：jquery

我正在寻找一些简单的跨浏览器插件/功能，可以将一个图像更改为另一个图像并具有一些平滑效果（淡入、淡出或不透明度不是一个选项），代码：

```
<script type="text/javascript" >
imgtimer = setInterval(function() {

  // this is something what I'm looking for:
 var from = $('.visible');
 var to = $('.visible').next('img');
 changeimg(from,to,effect);
  // some function that could be able to hide one image
  // and show other with some effect.

}, 5000);
</script>

<div id="images">
  <img src="img_01.jpg" class="visible" />
  <img src="img_02.jpg" />
  <img src="img_03.jpg" />
</div> 
```

有任何想法吗？我只能找到任何看起来不错的插件。我不需要任何复杂的滑块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:28:20.730

[http://canvasimg.sjeiti.com/](http://canvasimg.sjeiti.com/)

这组插件的重量约为 22k 缩小（如果您去掉不需要的过渡/缓动，则更少）

它提供了这些过渡：淡入淡出、缩放、擦除、折叠、翻转、百叶窗、圆形、方形、时钟、波浪、粒子、噪声、simplexNoise、滴水。

它提供了这些缓动：线性、二次、三次、四次、五次、正弦、指数、圆形、弹性、返回、反弹。

您可以使用带有背景图像的图像。使用 canvas 元素可以获得最佳结果（canvas 是所有现代浏览器/android 的跨浏览器，甚至与 shim 兼容的 pre-ie9）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:18:30.767

插件太重了，不能只做一个滑块，我做了这样的事情：http: [//jsfiddle.net/k9e5f/8/](http://jsfiddle.net/k9e5f/8/)它可以给你一些想法来开发你自己的滑块。

我只使用一个图像和一个 div 像这样：

```
<div id="background_container">
    <img id="changer" />
</div> 
```

看看那个滑块，它适用于你想要的所有图像。我自己做的 ;）

# git - Git - 如何在分支“合并 --squash”后合并其他分支更改

> ID：14526045
> 
> 赞同：1
> 
> 时间：2013-01-25T16:27:13.730
> 
> 标签：git, merge, squash

情况：我有一个主题分支已被压缩为master。然后，我向主题分支添加了一些额外的提交，并希望将这些额外的提交合并到 master 中。有没有办法做到这一点？

图形：

```
master A - B - F

             \

topic          C - D - E (squashed into F) - G - H 
```

问题——如何将 G 和 H 放到 F 上？

壁球合并后我从[Rebasing 的收获？](https://stackoverflow.com/questions/9920182/rebasing-after-squash-merge)一直在壁球后更新主题分支父级，以避免这种情况一起发生。我现在解开自己的解决方案只是创建一个包含我的新更改的补丁并将此补丁应用到 master，但是这样做我会丢失提交历史，所以它并不理想。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:36:22.383

如果我理解正确，那么这样做的方式就是挑选樱桃：[https ://ariejan.net/2010/06/10/cherry-picking-specific-commits-from-another-branch](https://ariejan.net/2010/06/10/cherry-picking-specific-commits-from-another-branch)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T17:07:32.900

再次合并。

squash 或 no-squash 都可以。没有壁球会创建合并提交。

# android - openCV的新Mat（）函数上的空指针异常

> ID：14526050
> 
> 赞同：0
> 
> 时间：2013-01-25T16:27:22.730
> 
> 标签：android, opencv, nullpointerexception, mat

在我的应用程序中，我`NullPointerException`排队：

```
Mat edges = new Mat(); 
```

我调试它，来到这里：

```
 public Mat() {
        nativeObj = n_Mat();
        return;
    } 
```

就这行`nativeObj = n_Mat();`。并得到`NullPointerException`. 那么任何人都可以帮助解决它吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T19:07:59.907

当您在变量库初始化之前声明变量时，通常会发生 null 错误。在您的公共类中定义它，然后在函数 public void onCameraViewStarted() 中对其进行初始化
希望这会有所帮助。

# javascript - 具有模糊/透明边缘的动力学 js 照片图像

> ID：14526051
> 
> 赞同：-2
> 
> 时间：2013-01-25T16:27:23.343
> 
> 标签：javascript, image, kineticjs, blur, blending

我正在使用 Kinetic JS 构建一个照片框架应用程序（顺便说一句，这很棒）。

我希望这张以 JPEG 格式开始的照片具有模糊的边缘，以便很好地融入其图案背景。

有没有使用 Kinetic 或 JS 将照片的边缘边界（比如 10 像素）与其背景混合的原生方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:42:06.127

kineticjs 没有，但您可以将它与其他框架结合使用，请尝试：

```
 http://creativejs.com/2011/12/day-5-blur-that-canvas/ 
```

# cocos2d-iphone - 尝试构建我的应用程序时出现奇怪的 spaceManager 警告？cocos2d

> ID：14526067
> 
> 赞同：0
> 
> 时间：2013-01-25T16:28:26.543
> 
> 标签：cocos2d-iphone, xcode4.5, chipmunk

我正在使用 cocos2d 和 spaceManager 制作游戏，每次尝试构建时，我都会收到 9 个警告，就像这样：

```
ld: warning: instance method 'initWithBodyName:spaceManager:' in category from /Users/Stephen/Library/Developer/Xcode/DerivedData/Tire_Hoops-ehsypaujneeleibuwmnnfbiukpry/Build/Intermediates/Tire Hoops.build/Debug-iphonesimulator/Tire Hoops.build/Objects-normal/i386/cpCCSprite+PhysicsEditor-86CB95D6892249C.o conflicts with same method from another category 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:15:43.297

我想通了，我的项目中有重复的类。

# asp.net-mvc - 将登录信息从剃刀视图发布/提交到控制器操作的适当方法是什么？

> ID：14526068
> 
> 赞同：0
> 
> 时间：2013-01-25T16:28:27.123
> 
> 标签：asp.net-mvc, security, passwords, http-post

在我看来，我有`@html.passwordfor`，它包含在一个`@html.beginform`. 当用户单击提交并将表单回发到控制器时，密码在 http 请求正文中以纯文本形式提供。

在将用户输入的密码`securestring`发送到控制器操作之前将其转换为类型的正确方法是什么`checklogin`？

我认为这与`securestring`类型有关，因为我将密码（和用户名）传递给构造函数，该构造函数`NetworkCredential`具有允许`securestring`密码而不是纯文本密码的重载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:50:08.330

html表单的设计方式；凭据在您和服务器之间以明文形式发送。没有加密数据的默认方法可以确保安全。您可以尝试使用一些 JavaScript 库在发送密码之前对其进行加密；但如果您担心有人截获密码；他们也将能够拦截您的加密算法。

确保密码和其他敏感信息（信用卡等）安全的常用方法是使用`SSL`. 这会加密客户端和服务器之间的整个连接；而且更安全。

# css - 如何使div具有固定大小？

> ID：14526071
> 
> 赞同：54
> 
> 时间：2013-01-25T16:28:37.757
> 
> 标签：css, html, fixed

我创建了一个站点，因此当您单击 30px 按钮时，它会更改`div`.

我有一个`ul`里面的按钮。当我更改字体大小时，`div`扩展和导航按钮也会随之移动。

我如何使它保持固定，但字体仍然可以更改。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-25T16:34:50.663

试试下面的css：

```
#innerbox
{
   width:250px; /* or whatever width you want. */
   max-width:250px; /* or whatever width you want. */
   display: inline-block;
} 
```

这使得 div 占用尽可能少的空间，其宽度由 css 定义。

// 扩展答案

要使按钮固定宽度，请执行以下操作：

```
#innerbox input
{
   width:150px; /* or whatever width you want. */
   max-width:150px; /* or whatever width you want. */
} 
```

但是，您应该知道，随着文本大小的变化，显示它所需的空间也会发生变化。因此，容器需要扩展是很自然的。您也许应该回顾一下您正在尝试做的事情；并且可能有一些预定义的类，您可以使用 javascript 动态更改以确保内容放置完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:33:22.977

你可以在你的 .css 中给它一个最大高度和最大宽度

```
.fontpixel{max-width:200px; max-height:200px;} 
```

除了你的高度和宽度属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:33:31.833

那是按钮的自然行为。您可以尝试在父容器上放置一个最大宽度/最大高度，但我不确定是否会这样做。

```
max-width:something px;
max-height:something px; 
```

另一种选择是使用 devlopr 工具，看看是否可以删除自然填充。

```
padding: 0; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-23T07:48:30.110

```
<div>
  <img src="whatever it is" class="image-crop">
</div>

 /*mobile code*/
    .image-crop{
      width:100%;
      max-height: auto;
     }
    /*desktop code*/

  @media screen and (min-width: 640px) {
    .image-crop{
       width:100%;
       max-height: 140px;
      } 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-09-26T12:16:52.723

使用这种风格

```
<div class="form-control"
     style="height:100px;
     width:55%;
     overflow:hidden;
     cursor:pointer">
</div> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2019-05-31T22:26:55.003

```
<div class="ai">a b c d e f</div> // something like ~100px
<div class="ai">a b c d e</div> // ~80
<div class="ai">a b c d</div> // ~60 

<script>

function _reWidthAll_div(classname) {

var _maxwidth = 0;

    $(classname).each(function(){

    var _width = $(this).width();

    _maxwidth = (_width >= _maxwidth) ? _width : _maxwidth; // define max width
    });    

$(classname).width(_maxwidth); // return all div same width

}

_reWidthAll_div('.ai');

</script> 
```

# navigation - 为家庭/公司大楼实施室内导航的最简单方法

> ID：14526073
> 
> 赞同：0
> 
> 时间：2013-01-25T16:28:43.783
> 
> 标签：navigation, wifi

我想知道最简单的方法（重用现有软件、库）是基于 Wifi 接入点位置创建室内导航应用程序。我可以使用[谷歌室内地图](http://support.google.com/gmm/bin/answer.py?hl=en&answer=1685872&topic=1685871&ctx=topic)，但上传你的家庭平面图并在网上提供它们可能是不明智的。手头有替代解决方案吗？到目前为止，我只能找到[Redpin.org](http://redpin.org/)。

技术限制：

*   基于AP位置的导航
*   应该适用于每部智能手机
*   甚至可能基于浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T07:52:28.050

如果您尝试在 Android 中创建新应用，最好的方法是使用基于 WiFi 的室内导航，除了使用陀螺仪、加速度计等传感器外，还使用 ​​wifi 三角测量方法。
尝试使用谷歌搜索找到 WiFi 三角测量方法。在 android 中很容易找到 WiFi 详细信息。

# python - 使用 matplotlib 调整图例中的线条颜色

> ID：14526074
> 
> 赞同：1
> 
> 时间：2013-01-25T16:28:46.607
> 
> 标签：python, matplotlib, data-visualization

我正在使用以下代码使用 matplotlib 在 Python 中生成具有大量重叠线的图：

```
def a_run(n, t, s):
    xaxis = np.arange(t, dtype=float)
    #Scale x-axis by the step size
    for i in xaxis:
        xaxis[i]=(xaxis[i]*s)
    for j in range(n):
        result = a_solve(t,s)
        plt.plot(result[:,1], color = 'r', alpha=0.1)

def b_run(n, t, s):
    xaxis = np.arange(t, dtype=float)
    #Scale x-axis by the step size
    for i in xaxis:
        xaxis[i]=(xaxis[i]*s)
    for j in range(n):
        result = b_solve(t,s)
        plt.plot(result[:,1], color = 'b', alpha=0.1)

a_run(100, 300, 0.02)
b_run(100, 300, 0.02)   

plt.xlabel("Time")
plt.ylabel("P")
plt.legend(("A","B"), shadow=True, fancybox=True) Legend providing same color for both
plt.show() 
```

这会产生这样的情节：

![在此处输入图像描述](../Images/eb79170e4c40abcf443ada2472ac95b2.png)

问题在于图例——因为线条的透明度非常高，图例线条也是如此，这很难阅读。此外，当我需要一个红色和一个蓝色时，它正在绘制我怀疑的“前两条”线，并且它们都是红色的。

我看不到任何在 Matplotlib 中调整线条颜色的方法，就像我所说的 R 图形库一样，但是有人有可靠的解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:53:00.067

如果您绘制很多线，您应该使用[LineCollection获得更好的性能](http://matplotlib.org/api/collections_api.html#matplotlib.collections.LineCollection)

```
import matplotlib.collections as mplcol
import matplotlib.colors as mplc

def a_run(n, t, s):
    xaxis = np.arange(t, dtype=float)
    #Scale x-axis by the step size
    for i in xaxis:
        xaxis[i]=(xaxis[i]*s)
    result = [a_solve(t,s)[:,1] for j in range(n)]
    lc = mplcol.LineCollection(result, colors=[mplc.to_rgba('r', alpha=0.1),]*n)
    plt.gca().add_collection(lc)
    return ls

[...]
lsa = a_run(...)
lsb = b_run(...)    
leg = plt.legend((lsa, lsb),("A","B"), shadow=True, fancybox=True)
#set alpha=1 in the legend
for l in leg.get_lines():
    l.set_alpha(1)
plt.draw() 
```

我没有测试代码本身，但我经常做类似的事情来绘制大量的线条，并有一个图例，每组绘制一条线

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-21T13:35:05.333

当我运行您的代码时，我收到一个错误，但这应该可以解决问题：

```
from matplotlib.lines import Line2D

custom_lines = [Line2D([0], [0], color='red', lw=2),
            Line2D([0], [0], color='blue', lw=2)]

plt.legend(custom_lines, ['A', 'B']) 
```

参考：[编写自定义图例](https://matplotlib.org/3.1.1/gallery/text_labels_and_annotations/custom_legends.html)

# android - android adapterView addheaderView

> ID：14526077
> 
> 赞同：0
> 
> 时间：2013-01-25T16:28:47.707
> 
> 标签：android, android-adapterview

我正在尝试（出于学习目的）我自己实现一个简单的`AdapterView`. 现在我有一个问题：如何在`headerView`我的自定义`adapterView`中添加一个？`addHeaderView``listView`

瀑布部分我是用 实现的`adapterView`，但是我对header有特殊要求：可以水平滑动，下面的整个视图可以上下滑动。我从来没有写过下面这样的瀑布，但是在里面写了单行`listView`，我可以使用`addHeaderview`方法在里面添加一个viewpager`listView`来满足需求，但是我不明白怎么做`adapterView`。

因为我是大一的，所以不能上传图片，但是你可以看看pinterest。我只想用查看器替换瀑布部分上方的标题部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:49:01.120

不确定我是否了解您正在寻找。

ListView 是一个控件，有一部分是标题，您可以使用 addHeaderViewMethod 自定义设置自定义视图。

AdapterView 定义了一个控件，用于显示具有自定义样式或信息分布的数据（例如在 ListActivity 中）

我猜你的标题是活动标题。我希望能帮助你。

**更新：**

好的，您必须按照以下步骤操作：

1 - 您正在扩展 AdapterView。定义一个方法类，如 AddHeaderView（如 ListView），用于添加所需的标题视图

2 - 创建一个 ViewPager 包装器。此类必须包装您与 AdapterView 一起使用的 ViewPager 控件（水平滑动需要）

3 - 在 setAdapter 方法实现中，您必须检查是否添加了标题视图，然后传递给此方法的适配器必须由您的 ViewPager 包装器包装。

我强烈建议您查看[ListView](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/ListView.java)和[HeaderViewListAdapter](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/HeaderViewListAdapter.java#HeaderViewListAdapter)的源代码。这是得到你想要的东西的方法。

# c# - MVC WebGrid 动态内容

> ID：14526078
> 
> 赞同：2
> 
> 时间：2013-01-25T16:28:52.910
> 
> 标签：c#, asp.net-mvc, dynamic, asp.net-mvc-4, webgrid

我想要达到的目标很难解释，所以如果我能提供更多信息，请告诉我。我有一种感觉，我正在尝试超出他们的能力范围使用 WebGrid，所以如果有人有任何开源替代品可以做我正在尝试的事情，那也会有帮助。

我需要从头开始构建 WebGrid，因为返回给它的内容（列和值）会根据表单上的其他标准而变化。我在表格中用几行简单的代码完成了这项工作，但我想使用 WebGrid 进行样式设置、排序和分页。

```
@model DocumentSearchViewModel

@if ((this.Model != null) && (this.Model.SearchResults != null) &&     (this.Model.SearchResults.Count() > 0))
{ 
    <table>
        <thead>
            <tr>
                <th>Document</th>
                @foreach (var metadata in this.Model.SearchResults.Metadata)
                {
                    <th>
                        @metadata.InstanceFieldName
                    </th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var document in this.Model.SearchResults)
            {
                <tr>
                <td>
                    @Html.ActionLink(document.Id.ToString(), "Details", new { id = document.Id })
                </td>
                    @foreach (var metadata in document.Metadata)
                    {
                        <td>
                            @metadata.Value
                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>
} 
```

所以为了解释模型结构，SearchResults 有一个`IEnumerable<MetadataModel>`，这个 MetadataModel 有 InstanceFieldName 和 Value 的属性。执行搜索时，每个结果将始终具有相同数量的元数据和相同的 InstanceFieldNames，但值不同，但是快速更改表单上的字段，并且新的搜索可能会返回一组新的结果（再次具有相同的元数据集，但与第一组结果不同）

网格的列对应于 Metadata InstanceFieldName，内容对应于 Value。

所以我用WebGrid做了我最好的尝试，但我能得到的最好的结果是一个带有正确列标题和正确行数的网格，列有正确的数据，但每一行都是相同的（从最后一个复制排）。

```
@{
var grid = new WebGrid(canPage: true, canSort: true, rowsPerPage: Model.PageSize,     sortFieldName: Model.Sort, sortDirectionFieldName: Model.SortDir);
grid.Bind(Model.SearchResults, rowCount: Model.DocumentCount);
List<WebGridColumn> cols = new List<WebGridColumn>();
foreach(var metadata in Model.SearchResults.Select(r => r.Metadata).FirstOrDefault())
{
    var col = new WebGridColumn();
    col.ColumnName = metadata.InstanceFieldName;
    col.Header = metadata.InstanceFieldHeader;
    col.Style = "gridRow";
    col.CanSort = true;
    cols.Add(col);
}

foreach (var result in Model.SearchResults)
{        
    foreach (var col in cols)
    {
        var metadataValue = result.Metadata.Single(m => m.InstanceFieldName == col.ColumnName).Value;
        col.Format = (item) => @Html.Raw("<text>" + metadataValue + "</text>");
    }
}
}

@if ((this.Model != null) && (this.Model.SearchResults != null) && (this.Model.SearchResults.Count() > 0))
{   
    @grid.GetHtml(htmlAttributes: new { id = "documentGrid" }, rowStyle: "gridRow", alternatingRowStyle: "gridRowAlt", columns: cols)
} 
```

我要解决的是如何以及如果可能的话首先生成列，然后将行填充到这些列中。

非常感谢任何帮助，谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:03:38.550

您正在输入具有相同值的行，您应该更改格式：

```
col.Format = (item) => @Html.Raw(item.metadataValue); 
```

# css - 将网页争用拆分为部分/列

> ID：14526082
> 
> 赞同：0
> 
> 时间：2013-01-25T16:29:03.863
> 
> 标签：css

我正在编写一个使用外部 CSS 表的示例页面，我试图将页面上的内容分成 3 个不同的部分（左、中、右），这样基本上一个部分在左侧，一个在中间一个在右边。我尝试这样使用列：

```
.column {

        /* setting the number of columns to 3 */
        -webkit-column-count: 3; 
        -moz-column-count: 3; 
        -o-column-count: 3;
        column-count: 3;
        /* setting the space between columns to 30px */
        -webkit-column-gap: 52px;
        -moz-column-gap: 30px; 
        -o-column-gap: 30px; 
        column-gap: 30px;

} 
```

但这只是将内容分成 3 个不同的列，并且一个部分/列中的文本重叠到另一个不应该存在的部分/列中。

有没有办法可以做到这一点，以便我可以为每个创建格式而不影响其他？

# php - gearman 问题和 php cli

> ID：14526086
> 
> 赞同：3
> 
> 时间：2013-01-25T16:29:15.220
> 
> 标签：php, ubuntu, terminal, gearman

尝试使用 php cli 在终端中运行命令时，我遇到了一些齿轮问题。例如我运行这个命令：

`gearmand --log-file=/var/log/gearman-job-server/gearman.log`

并得到：

`gearmand: Could not open log file "/usr/local/var/log/gearmand.log", from "/home/jeitnier", switching to stderr. (No such file or directory)`

`ERROR 2013-01-25 16:25:53.000000 [ main ] bind(Address already in use) -> libgearman-server/gearmand.cc:612`

`ERROR 2013-01-25 16:25:53.000000 [ main ] bind(Transport endpoint is not connected) -> libgearman-server/gearmand.cc:626`

第一行提出了我的第一个问题，在谷歌搜索几个小时后，什么也没给我……为什么写入日志有问题？我似乎无法解决这个问题。这发生在运行任何命令之后。

有谁知道这些错误是什么？是时候移除并重新安装所有与 Gearman 相关的项目了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:34:05.817

从终端尝试以下操作：

```
sudo mkdir /var/log/gearman-job-server/
sudo touch /var/log/gearman-job-server/gearmand.log
sudo killall gearmand
sudo gearmand --log-file=/var/log/gearman-job-server/gearmand.log 
```

# sql-server - 验证 SQL 查询返回的列（名称和金额）

> ID：14526093
> 
> 赞同：0
> 
> 时间：2013-01-25T16:29:34.207
> 
> 标签：sql-server, sql-server-2008, tsql

我的程序有一个第三方插件，用于执行 SQL 查询（主要是选择）。这些查询必须返回默认的列顺序和数量，例如：

```
PACKAGEID (guid), REFDATE (datetime), MODIFYDATE (datetime), PROG (int) 
```

有时会发生某些查询省略了上面指定的列之一。为了避免程序中出现更多错误，我会执行一种检查，以确保执行的每个查询都返回默认列。我已经使用了 SQL 语法`SET NOEXEC ON`，`SET NOEXEC OFF`并且在这种情况下也可能有用。我目前正在使用 SQL SERVER 2008。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:32:19.290

如果您能够将结果集放入临时表中，则可以使用以下方法轻松计算表的列数：

```
Select * 
From tempdb.Information_Schema.COLUMNS 
where TABLE_NAME like '%#temptable%' 
```

# java - 从自己的网络服务器读取数据（文本）

> ID：14526096
> 
> 赞同：-1
> 
> 时间：2013-01-25T16:29:49.777
> 
> 标签：java, android

我想定期从自己的网络服务器读取数据文本并将其放入 textview。我更喜欢使用 ssl 来加密连接。那么，最好的方法是什么？我不需要代码来做这件事，我只需要理论来做这件事。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:40:08.503

您将不得不使用 Services、AlarmManager、BroadcastReceivers 来有效地完成此任务。至于 ssl 证书，我不确定，但这个[链接](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)可能会有所帮助。

# winapi - 语法高亮的最佳算法（WINAPI）

> ID：14526097
> 
> 赞同：0
> 
> 时间：2013-01-25T16:29:51.420
> 
> 标签：winapi, syntax, highlight, richedit

我在 WINAPI 上编写了一个程序。我必须实现语法高亮。此时我使用以下算法：

```
void PaintWords(const char *SearchWord,COLORREF rgb)
{
    counter = TabCtrl_GetCurSel(TabControl_hWnd);
    ft.chrg.cpMin = 0;
    ft.chrg.cpMax = GetWindowTextLength(hWnd);
    ft.lpstrText = (LPCSTR)SearchWord; //keyword
    do
    {
        int poe_p = SendMessage(hWnd, EM_FINDTEXTEX, FR_DOWN | FR_WHOLEWORD | FR_MATCHCASE, (LPARAM)&ft);
        if(poe_p != -1)
        {
            int selword = SendMessage(hWnd, EM_EXSETSEL,0,(LPARAM)&ft.chrgText);
            ZeroMemory(&chd, sizeof(chd));
            chd.cbSize = sizeof(CHARFORMAT);
            chd.dwMask = CFM_SIZE | CFM_FACE | CFM_COLOR | CFM_CHARSET;
            chd.crTextColor = rgb;
            chd.bPitchAndFamily = FW_THIN;
            lstrcpy(chd.szFaceName , "Courier New");
            SendMessage(hWnd,EM_SETCHARFORMAT,SCF_WORD|SCF_SELECTION,(LPARAM)&chd);
            ft.chrg.cpMin = ft.chrgText.cpMax;
        }
        else
        {
            break;
        }
    }while(ft.chrg.cpMin != ft.chrg.cpMax);
} 
```

这段代码太慢了，因为这不是最好的选择，闪烁是可见的。

我对其他变体感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T19:29:10.573

我遇到了这个项目的 RichTextbox，它被用作 xml 编辑器：http: [//xpathvisualizer.codeplex.com/SourceControl/changeset/view/42057#XPathVisualizer/CustomControls/RichTextBoxEx.cs](http://xpathvisualizer.codeplex.com/SourceControl/changeset/view/42057#XPathVisualizer/CustomControls/RichTextBoxEx.cs)

它在 C# 中，但发送的消息是可见的。

使用此 TextBox 时，应在突出显示文本之前调用 BeginUpdateAndSuspendEvents 函数。

```
 public IntPtr BeginUpdateAndSuspendEvents()
        {
            // Stop redrawing:
            User32.SendMessage(this.Handle, (int) User32.Msgs.WM_SETREDRAW, 0, IntPtr.Zero);
            // Stop sending of events:
            IntPtr eventMask = User32.SendMessage(this.Handle, User32.Msgs.EM_GETEVENTMASK, 0, IntPtr.Zero);

            return eventMask;
        } 
```

此功能可防止在您处理文本时重绘，完成编辑后，您应该调用

```
 public void EndUpdateAndResumeEvents(IntPtr eventMask)
        {
            // turn on events
            User32.SendMessage(this.Handle, User32.Msgs.EM_SETEVENTMASK, 0, eventMask);
            // turn on redrawing
            User32.SendMessage(this.Handle, User32.Msgs.WM_SETREDRAW, 1, IntPtr.Zero);
            NeedRecomputeOfLineNumbers();
            this.Invalidate();
        } 
```

双缓冲不能解决这个问题，因为它不会阻止绘制的发生，在不禁用绘制事件的情况下突出显示编辑器可能会导致程序停止超过 5 分钟，具体取决于文件的大小和要处理的字数突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:25:47.523

我认为您需要使用**双缓冲**来减少闪烁。除此之外，您不应该使用`SendMessage`（甚至`PostMessage`）到任何窗口（在同一线程内）。为什么必须在语法高亮绘制代码中进行选择？

关于双缓冲的文章之一是[this](http://www.codeproject.com/Articles/12870/Don-t-Flicker-Double-Buffer)。

# c# - 如何通过 WinFormApp 中的串口逐字节显示图像？//

> ID：14526099
> 
> 赞同：0
> 
> 时间：2013-01-25T16:30:04.437
> 
> 标签：c#, image, serial-port, jpeg

这是我尝试编写的代码。我首先告诉“LinkSprite JPEG 相机”拍照，然后读取 JPEG 文件内容。

没有错误，代码正在运行，但问题是结果来得很慢，我看到“完成”，*即在 2 多分钟后到达 FFD9*。过了许久，消息框的消息才出现。

我想在发送“拍照”命令后获取存储在相机缓冲区中的图像并以表格形式显示。

我的代码是：

```
// public static byte[] ReceivedMsg = new byte[256];
// public static int factor = 0x0000;
// public static UInt16 M = 0;
// public static byte MH = (byte)((M >> 8) & 0xff);
// public static byte ML = (byte)((M >> 0) & 0xff);

private void TakeSnap_Click(object sender, EventArgs e)
{
    // First set the size of the image //
    byte[] sendCmd = new byte[9] { 0x56, 0x00, 0x31, 0x05, 0x04, 0x01, 0x00, 0x19, 0x11 };

    try
    {
        if (!(CamPort.IsOpen)) CamPort.Open(); // If the port is closed!,Open it again //
        CamPort.Write(sendCmd, 0, 9);
        Thread.Sleep(100);// Wait for the camera //
        for (int i = 0; i < 5; i++)
        {
            ReceivedMsg[i] = (byte)(CamPort.ReadByte()); // Store the returned msg //
        }
        if (ReceivedMsg[0].ToString("x") == "76" && ReceivedMsg[1].ToString("x") ==    "0" && ReceivedMsg[2].ToString("x") == "31" && ReceivedMsg[3].ToString("x") == "0" && ReceivedMsg[4].ToString("x") == "0")
        {
            try
            {
                CamPort.DiscardOutBuffer();
                CamPort.DiscardInBuffer();
                byte[] TakePicCmd = new byte[] { 0x56, 0x00, 0x36, 0x01, 0x00 };
                CamPort.Write(TakePicCmd, 0, 5);
                Thread.Sleep(100);// Wait for the camera //
                for (int i = 0; i < 5; i++)
                {
                    ReceivedMsg[i] = (byte)(CamPort.ReadByte());
                }
                if (ReceivedMsg[0].ToString("x") == "76" && ReceivedMsg[1].ToString("x") == "0" && ReceivedMsg[2].ToString("x") == "36" && ReceivedMsg[3].ToString("x") == "0" && ReceivedMsg[4].ToString("x") == "0")
                { 
                    try
                    {
                        CamPort.DiscardOutBuffer();
                        CamPort.DiscardInBuffer();
                        byte[] ReadSizeCommand = new byte[5] { 0x56, 0x00, 0x34, 0x01, 0x00 };
                        CamPort.Write(ReadSizeCommand, 0, 5);
                        Thread.Sleep(100);// Wait for the camera //
                        for (int i = 0; i < 9; i++)
                        {
                            ReceivedMsg[i] = (byte)(CamPort.ReadByte());
                        }
                        if (ReceivedMsg[0].ToString("x") == "76" && ReceivedMsg[1].ToString("x") == "0" && ReceivedMsg[2].ToString("x") == "34" && ReceivedMsg[3].ToString("x") == "0" && ReceivedMsg[4].ToString("x") == "4" && ReceivedMsg[5].ToString("x") == "0" && ReceivedMsg[6].ToString("x") == "0")
                        {   
                            int ImageSize=(((ReceivedMsg[7] & 0x00ff) << 8) | (ReceivedMsg[8] & 0x00ff));
                            try
                            {
                                CamPort.DiscardOutBuffer();
                                CamPort.DiscardInBuffer();
                                byte[] body = new byte[32];
                                byte[] header = new byte[5];
                                bool EndFlag = false;    
                                while (!EndFlag)
                                {
                                    ReadJpegFileCommand();
                                    Thread.Sleep(25);// Wait for the camera //
                                    for (int i = 0; i < 5; i++) header[i] = (byte)CamPort.ReadByte();
                                    ////// If the first 5 bytes matching [76 00 32 00 00] then read the body and display the image //////
                                    if (((int)header[0] == 0x76) && (header[1] == 0x00) && (header[2] == 0x32) && (header[3] == 0x00) && (header[4] == 0x00))
                                    {
                                        for (int i = 0; i < 32; i++)
                                            body[i] = (byte)CamPort.ReadByte();

                                        for (int i = 1; i < body.Length; i++)// check if reached to the last two bytes(FF D9) of the body //
                                        {
                                            if ((body[i - 1] == 0xFF) && (body[i - 0] == 0xD9))
                                            {
                                                EndFlag = true;
                                                MessageBox.Show("done");
                                            }
                                        }
                                    }
                                    else
                                    {
                                        MessageBox.Show("Unexpted Returned value "); // the first 5 bytes does not match the header 
                                    }
                                }
                            }

                            catch (System.Exception ex) { MessageBox.Show(ex.Message); }

                        }
                        else { MessageBox.Show("Reset the camera and start again0 !!"); }
                    }
                    catch (System.Exception ex) { MessageBox.Show(ex.Message); }
                }
                else { MessageBox.Show("Reset the camera and start again1 !!"); }
              }
            catch (System.Exception ex) { MessageBox.Show(ex.Message); }
        }
        else { MessageBox.Show("Reset the camera and try again2 !!"); }
    }
    catch (System.Exception ex) { MessageBox.Show(ex.Message); }
}

//------------------------------------------------------------------------------------//

public void ReadJpegFileCommand()
{
    try
    {
        MH = (byte)(factor / 0x100);
        ML = (byte)(factor % 0x100);
        byte[] ReadImageCommand = new byte[16] { 0x56, 0x00, 0x32, 0x0C, 0x00, 0x0A, 0x00, 0x00, MH, ML, 0x00, 0x00, 0x00, 0x20, 0x00, 0x0a };
        CamPort.Write(ReadImageCommand, 0, 16);
        factor += 0x20;
    }

    catch (System.Exception ex) { MessageBox.Show(ex.Message); }
} 
```

**摄像头是：LinkSprite JPEG 摄像头**

[相机手册](http://www.sparkfun.com/datasheets/Sensors/Imaging/1274419957.pdf)

[Mbed 示例（测试程序）](http://mbed.org/cookbook/Camera_LS_Y201)

**如何“快速”到达 FFD9**，然后**如何**将存储在数据数组中的字节显示为`picturebox1`已添加到表单中的图像？

`CamPort`是串口控件的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:00:04.757

你的串口运行的波特率是多少？串行端口传输数据的速度不是很快，即使在您的情况下以 115200 波特的最高速度也是如此。即使这样，如果波特率设置为高，或者两端不匹配，这样的串行通信也可能容易丢弃随机字符。

至于让它显示在图片框中，您需要将字节数组转换为某种类型的 Image 类对象。如果您的输入数组正确且没有丢失任何字符，这并不难。有很多关于如何做到这一点的教程。

[http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/a20fcf5f-9d32-4d32-85d0-c8dd4d978e15](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/a20fcf5f-9d32-4d32-85d0-c8dd4d978e15)

[http://forums.codeguru.com/showthread.php?496495-Manually-created-byte-array-to-picture-box](http://forums.codeguru.com/showthread.php?496495-Manually-created-byte-array-to-picture-box).

# jquery - 在部分视图而不是顶部/父级中自动注销加载

> ID：14526100
> 
> 赞同：0
> 
> 时间：2013-01-25T16:30:08.797
> 
> 标签：jquery, ajax, asp.net-mvc-3

一个使用带有 jQ​​uery 和 Ajax 的 MVC3 的数据收集站点。该站点正在使用选项卡（jquery ui 选项卡），作为部分加载并且每个都连接到 ajax-forms。因此，每个选项卡仅在“自身”内加载和提交。

但这会导致自动注销和重定向到 LogOn 出现问题。例如，当我按下一个新标签时，将触发注销。然后，此选项卡将使用完整的登录页面呈现，而不是刷新“父/顶部”窗口。因此，整个站点都反映在其中一个选项卡中（就像使用框架时经常发生的那样）。不过，网站上没有使用框架或 iframe。

可能解决它的一种方法是在 OnBegin 中拦截 ajax 调用，以检查用户是否已登录。如果没有将整个窗口 url 重定向到 /Account/LogOn。我不确定如何实现这一点，或者这是否是最好的方法。有关执行的任何想法或更好地处理此问题的提示？

一些代码示例：

**Edit.cshtml，片段：选项卡**

```
<div id="tabs">
<ul>
    <li><a href="@Url.Action("PatientGeneralTab", new { guid = @Model })"><span>General</span></a></li>
    <li><a href="@Url.Action("PatientVisitTab", new { guid = @Model })"><span>Visit</span></a></li>
    <li><a href="@Url.Action("PatientDiaryTab", new { guid = @Model })"><span>Treatment</span></a></li>
    <li><a href="@Url.Action("PatientReactionTab", new { guid = @Model })"><span>Adverse Drug Reaction</span></a></li>
</ul>
</div> 
```

**General.cshtml，部分，片段：Ajax.BeginForm()**

```
@using (Ajax.BeginForm("StoreGeneral",
new { },
new AjaxOptions { HttpMethod = "POST", OnBegin = "Saving", OnSuccess = "SavedOk(); reloadPatientHeader();" },
new { id = "form-general" }))
{
    form content here.
} 
```

**Web.config，身份验证**

```
<authentication mode="Forms">
  <!-- TODO: Change back to 60 -->
  <forms loginUrl="/Account/LogOn" timeout="2" />
</authentication> 
```

不确定我是否需要发布任何其他代码片段。如果是这样，请告诉我。

**编辑**

我偶然发现了[这个](https://stackoverflow.com/questions/14036496/cannot-redirect-after-http-headers-have-been-sent-in-mcv3)与我有类似问题的问题。但是我无法向控制器添加任何代码，因为整个控制器类都包含在“[Authorize(Roles="xxx,yyy")]”中，因此登录检查发生在实际控制器操作之前。

我试图在“LogOn”下拦截 AccountController 中的调用，但随后它最终陷入无限循环:)

```
 public ActionResult LogOn()
    {
        bool isAjaxRequest = Request.Headers["X-Requested-With"] == "XMLHttpRequest";
        if (isAjaxRequest && !Request.IsAuthenticated)
        {
            //Response.Headers["X-Requested-With"] = "";
            return RedirectToAction("LogOn");
        }
        return View();
    } 
```

**解决方案**

作为参考，这是我最终使用的：

```
 public ActionResult LogOn()
    {
        bool isAjaxRequest = Request.Headers["X-Requested-With"] == "XMLHttpRequest";
        if (isAjaxRequest && !Request.IsAuthenticated)
        {
            return JavaScript("window.location = '/Account/LogOn'");
        }
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:51:26.587

尝试使用

```
Request.IsAjaxRequest() 
```

检测ajax请求。它是 System.Web.Mvc 中的扩展方法。

或者您可以手动检查：

```
bool isAjaxRequest = request.Headers["X-Requested-With"] == "XMLHttpRequest"; 
```

有了这个，您可以进行拦截和测试以进行身份​​验证，并采取相应的行动。您可以选择不显示布局或停止整个请求并发送到登录页面。

# c# - 如何获取 Windows 窗体在屏幕上的位置？

> ID：14526101
> 
> 赞同：16
> 
> 时间：2013-01-25T16:30:12.863
> 
> 标签：c#, winforms, position

我正在 Visual Studio C# 2010 中编写一个 WinForms 应用程序，我想找出 WinForm 窗口左上角的位置（窗口的起始位置）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T16:41:14.137

如果您是从表单本身访问它，那么您可以编写

```
int windowHeight = this.Height;
int windowWidth = this.Width; 
```

获取窗口的宽度和高度。和

```
int windowTop = this.Top; 
int windowLeft = this.Left; 
```

获取屏幕位置。

否则，如果您启动表单并从另一个表单访问它

```
int w, h, t, l;
using (Form form = new Form())
{
    form.Show();
    w = form.Width;
    h = form.Height;
    t = form.Top;
    l = form.Left;
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T16:33:18.213

`Form.Location.X`并`Form.Location.Y`会给你左上角的 X 和 Y 坐标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-03T07:03:39.830

检查这个： [Form.DesktopLocation 属性](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.desktoplocation?view=netframework-4.8)

```
 int left = this.DesktopLocation.X;
        int top = this.DesktopLocation.Y; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T16:42:11.927

用于`Form.Bounds.Top`获取“Y”坐标和`Form.Bounds.Left`获取“X”坐标

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-22T18:30:01.670

我有一个类似的情况，我的 Form2 需要 Form1 的屏幕位置。我通过其构造函数将 form1 的屏幕位置传递给 form2 来解决它：

//Form1

```
 Point Form1Location;
        Form1Location = this.Location;
        Form2 myform2 = new Form2(Form1Location);
        myform2.Show(); 
```

//Form2

```
 Point Form1Loc;
    public Form2(Point Form1LocationRef)
    {
        Form1Loc = Form1LocationRef;
        InitializeComponent();

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T16:34:24.787

也是 Left 和 Top 属性的组合（例如表单中的 this.Top）

# sql-server - 使用 UDF 的 SSIS 中的“无法准备语句”错误

> ID：14526102
> 
> 赞同：6
> 
> 时间：2013-01-25T16:30:13.120
> 
> 标签：sql-server, ssis

我在 SSIS '08 中有一个带有 OLEDB 数据源的数据流任务。查询是这样的：

```
SELECT DISTINCT
    dbo.udf_CreateCCISSentenceDuration(probation_year, probation_month, probation_day)
FROM sentence 
```

我减少了查询只是为了使它更具可读性。无论如何，我都会收到以下错误：

```
Error at 11012 DATA [Data Records [27]]: SSIS Error Code DTS_E_OLEDBERROR. An OLE DB error has occurred.
Error code: 0x80040E14
An OLE DB record is available. Source: "Microsoft SQL Server Native Client 10.0" Hresult: 0x80040E14
Description: "Statement(s) could not be prepared.".
An OLE DB record is available. Source: "Microsoft SQL Server Native Client 10.0" Hresult: 0x80040E14
Description: "Cannot find either column "dbo" or the user-defined function or aggreate
"dbo.udf_CreateCCISSentenceDuration", or the name is ambiguous.". 
```

此查询在 SSMS 中运行良好。如果我删除“dbo”。所有者部分，我得到“'udf_CreateCCISSentenceDuration' 不是可识别的内置函数名称。”。我运行它的数据库是一个 SQL 2005 实例。我已经进行了搜索，但找不到与此错误和 UDF 相关的任何内容。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T16:02:09.780

这可能不是真正的 SSIS 问题。为了帮助确定是否存在，请尝试在 SSIS 之外重现此错误，以通过编写具有相同函数调用的存储过程来调试它。本质上，您需要将存储的过程存储在您的 oledb 连接发起请求的服务器/数据库实例上。

如果您遇到类似的错误，请对服务器、数据库、所有者和最后的函数进行 4 部分引用，以查看是否有效（例如 [myServerWhereFunctionIs].[myDatabaseInstanceWhereFunctionIs].[ownerSchemaOfFunction].udf_Function

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-01-08T06:58:36.650

对我来说，查询是该错误的问题。修改我的查询后，它工作正常。因此，请根据错误消息中的描述完成您的查询。

# jquery - ajax函数不工作

> ID：14526106
> 
> 赞同：1
> 
> 时间：2013-01-25T16:30:32.610
> 
> 标签：jquery, ajax, codeigniter

使用 Codeigniter

点击... ..

一些代码....

```
$.ajax({ url: '<?php echo base _ url(); ?>locations/getmap',

        dataType: 'json',
        type: 'POST',
        data: location_data,
        success: function (data)
        {
            alert('hi');  //morecode} 
```

控制器位置/获取地图

```
public function getmap(){
    $type = 'ok';
    echo json_encode($type); 
```

点击没有任何反应......如果我在ajax函数之前发出警报......它可以工作。我应该在控制器中使用什么来查看脚本是否到达那里？我再次使用 alert() 没有任何反应......对于 url 我使用 base_url 方法，该方法适用于其他脚本..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:33:08.260

```
<?php echo base _ url(); ?> 
```

应该

```
<?php echo base_url(); ?> 
```

并且它应该设置为至少 / 或者它总是一个相对路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:34:59.793

这是因为您的 ajax 功能不起作用，所以只有当 ajax 从服务器获得成功标志时，警报才会起作用。
你在ajax中的网址是错误的。请注意你一生中的空格，
你的网址应该是这样的，你的数据渲染也是错误的，应该是这样的：

```
 $.ajax({ url: '<?php echo base_url(); ?>locations/getmap',
    dataType: 'json',
    type: 'POST',
    data: {location_data: your_real_data},
    }).done(function(){
        // success to-do        
    }) 
```

# sql - 视图中按月求和

> ID：14526108
> 
> 赞同：0
> 
> 时间：2013-01-25T16:30:37.503
> 
> 标签：sql, sql-server-2008, ms-access-2010

这是我在 SQL 2008 视图中的语句。

```
SELECT TOP (100) PERCENT
    dbo.[Billing Detail].Chart
,   dbo.[Billing Detail].[Transaction Code]
,   SUM(dbo.[Billing Detail].Units) AS [Total Billed]
FROM
    dbo.[Billing Detail]
    INNER JOIN dbo.Patient
    ON dbo.[Billing Detail].Chart = dbo.Patient.[Chart Number]
WHERE
    (dbo.[Billing Detail].[Transaction Code] = 'H2016')
    AND (dbo.[Billing Detail].[Service Date 1] BETWEEN '2013-1-01 00:00:00.000'
                                               AND     '2013-1-31 00:00:000')
GROUP BY
    dbo.[Billing Detail].Chart
,   dbo.[Billing Detail].[Transaction Code]
ORDER BY
    dbo.[Billing Detail].Chart 
```

我正在尝试制作一个 IF 语句，其中 1-1-13 和 1-31-13 之间的单位总和是 JAN，所有日期在 2-1-13 和 2-28-13 = FEB 之间......在今年剩下的时间里如此。然后我需要将此信息导出到 Access 2010 或 Excell 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:53:52.437

这是我认为您的视图应该是什么样子的。最后两个`WHERE`子句假设您想对视图进行硬编码以仅处理 2013 年（[这就是您不应该使用的原因`BETWEEN`](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)）。如果您希望能够在任何年份使用该视图，只需删除这两个子句，并在您从视图中选择时应用它们（就像您应该使用 一样`ORDER BY`）。

```
SELECT
  [month] = DATEADD(MONTH, DATEDIFF(MONTH, 0, bd.[Service Date 1]), 0),
  bd.Chart,
  bd.[Transaction Code], 
  SUM(bd.Units) AS [Total Billed]
FROM
  dbo.[Billing Detail] AS bd
INNER JOIN
  dbo.Patient AS p
  ON bd.Chart = p.[Chart Number]
WHERE
  bd.[Transaction Code] = 'H2016'
  AND bd.[Service Date 1] >= '20130101'
  AND bd.[Service Date 1] < '20140101'
GROUP BY 
  DATEADD(MONTH, DATEDIFF(MONTH, 0, bd.[Service Date 1]), 0); 
```

现在您可以自行将这些数据导入 Excel 或 Access。如果这是一项一次性任务，Excel 几乎可以将您的结果导入网格或将结果导入文件输出。如果您需要自动化它，您可以尝试使用链接服务器，但您最好从不同的角度来解决这个问题：链接到 Access 中的视图或使用外部应用程序（例如，C# 命令行、PowerShell 等）读取结果，然后以您需要的文件格式输出（.CSV 通常最简单，具体取决于数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:44:06.227

如果我正确理解您的问题，您想为每个月份添加列，然后对这些日期范围的单位求和？

假设是这样，这样的事情可能会起作用（我已经简化了您的表结构，但这应该会让您朝着正确的方向前进）：

```
SELECT ID, Month, SUM(Units)
FROM (
SELECT  ID, Units, 
    CASE 
       WHEN Month(dt) = 1 THEN 'Jan'
       WHEN Month(dt) = 2 THEN 'Feb'
       WHEN Month(dt) = 3 THEN 'Mar'
    END as Month
FROM         Sample
) t
GROUP BY ID, Month 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!3/0c3f2/9)。

- 编辑

实际上，根据您想要的结果，最好将年份包含在 WHERE 标准中，而不是 CASE 语句中。真的取决于你的数据......

```
SELECT ID, Month, SUM(Units)
FROM (
SELECT  ID, Units, 
    CASE 
       WHEN Month(dt) = 1 THEN 'Jan'
       WHEN Month(dt) = 2 THEN 'Feb'
       WHEN Month(dt) = 3 THEN 'Mar'
    END as Month
FROM         Sample
WHERE Year(dt) = 2013
) t
GROUP BY ID, Month 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:41:23.493

这是我要做的：

1.  编写一个与您所拥有的查询类似的查询，该查询涵盖您要涵盖的整个日期范围，将单位按年和月分组（或者如果您只涵盖一年，则仅将月分组）。

2.  将数据导出到 Access 或 Excel。您可以通过 ODBC 将 Access 连接到您的数据库表；您可以在 Excel 中执行类似的操作，或者使用 SSMS 将查询结果导出到 CSV 文件并将其导入您选择的工具。（SSIS 会更好，但如果你没有，这仍然可以完成。）

3.  使用 Access 或 Excel，将月份字段中的数据转换为所需的布局。

虽然您可以在 SQL 中使用 PIVOT 关键字并获得每个月的列，但您必须进行大量输入，并且不会获得任何向导类型的指导。在 Access 或 Excel 中，有一个易于使用的界面来设置数据透视表并调整汇总行或小计等内容。

# jquery - 浏览器缓存不同数据类型的请求

> ID：14526112
> 
> 赞同：1
> 
> 时间：2013-01-25T16:30:59.387
> 
> 标签：jquery, json, http, caching

我正在尝试获取两个不同的资源，它们位于相同的 URI 中，但具有不同的数据类型。

```
$.ajax({
  dataType: "application/json",
  url: "http://www.myApp.com/resource",
  success: f
});

$.ajax({
  dataType: "text/html",
  url: "http://www.myApp.com/resource",
  success: f
}); 
```

但是第二个调用永远不会离开浏览器。第一次调用的结果被缓存并返回给第二次调用。但它有错误的数据类型！json 与 html。不知道是jquery缓存还是浏览器（chrome）缓存的？

有没有办法使这项工作？我需要资源的两种表示形式。我可以在请求中将缓存设置为 false，但这样我就会失去缓存的好处。

还是我必须为不同的表示定义两个不同的资源 URI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:24:55.757

在 dataType 中，替换`"application/json"`为`"json"`和。 [jQuery](http://api.jquery.com/jQuery.ajax/)仅将以下内容识别为有效输入：`"text/html"``"html"`

*   xml
*   json
*   jsonp
*   html
*   文本
*   脚本

或以上某些内容的空格分隔组合。任何其他值都将导致请求`Accept`标头为`*/*`.

此外，您可能希望将`success`回调替换为`$.ajax({...}).done(callback)`. 回调参数在 1.8 中被弃用。

# wpf - 是否在 ItemsControl 的 ItemContainerStyle 'Blendable' 中设置 Canvas 属性？

> ID：14526117
> 
> 赞同：2
> 
> 时间：2013-01-25T16:31:10.017
> 
> 标签：wpf, xaml, canvas, expression-blend, itemscontrol

我有一个项目，我[`ItemsPanelTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemspaneltemplate.aspx)使用`StackPanel`因此交换了

```
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel IsItemsHost="True" Orientation="Horizontal"/>
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```

使用一个`Canvas`因此

```
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <Canvas IsItemsHost="True" Width="Auto" Height="Auto"/>
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```

我这样做是为了在时间线上按项目的开始时间排列项目，而不是相互堆叠。但是后来我被困在如何`Canvas.Left`为`ItemsControl`. 明显的地方（我认为）在`Grid`我使用的`ItemTemplate`'s`DataTemplate`中，即这里的某个地方：

```
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <Grid HorizontalAlignment="Left" VerticalAlignment="Center" Height="10">
            <eventBlockVisualization:FGEventUC/>
        </Grid>
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

但是 XAML 的这一部分没有提及托管`Canvas`。幸运的是，有一个非常相似的问题，其中 atsjoo 询问“[在 ItemsControl DataTemplate 中设置 Canvas 属性](https://stackoverflow.com/q/1265364/575530)”，[Arcturus 回答](https://stackoverflow.com/a/1265419/575530)解释了它的作用和使用（并且 LiamV[在此处](https://stackoverflow.com/a/2798478/575530)`ItemContainerStyle`提供了类似的答案），在我的情况下导致

```
<ItemsControl.ItemContainerStyle>
    <Style TargetType="ContentPresenter">
        <Setter Property="Canvas.Left" Value="{Binding MinutesFromStartOfLogs}"/>
    </Style>
</ItemsControl.ItemContainerStyle> 
```

这一切都很好手动编辑 XAML，但理想情况下，我想在 Expression Blend 4 或 Blend for Visual Studio 2012 中操作这些样式和绑定。如果我`ItemsControl`在 Blend 的“对象和时间线”面板中选择，然后转到菜单“对象 -> 编辑其他样式 -> 编辑生成的项目容器 (ItemContainerStyle)' 我最终能够编辑 ItemContainerStyle 但我看不到 Blend 在哪里公开了`Canvas.Left`我的 XAML 中设置的属性。它在哪里？这是“可混合”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:26:41.653

据我所知，这是不可能的。[附加属性](http://msdn.microsoft.com/en-us/library/cc265152%28v=VS.95%29.aspx)没有显示在 Blend 中，因为太多了。当一个元素直接放置在画布左侧并显示顶部属性时，但不可能使所有附加属性都可用。例如，如果您设置属性的元素不在画布内，您可以设置 Canvas.Left 属性。

设置附加属性的唯一方法是在 Xaml 中手动完成。

# php - 将 array_search 和 unset() 与多维数组一起使用

> ID：14526118
> 
> 赞同：0
> 
> 时间：2013-01-25T16:31:12.513
> 
> 标签：php, multidimensional-array

我正在尝试在多维数组中搜索一个名为“test4”的值。数组如下所示：

```
Array
(
    [0] => Array
        (
            [VlanId] => Array
                (
                    [0] => 2
                )

            [Name] => Array
                (
                    [0] => test2
                )

        )

    [1] => Array
        (
            [VlanId] => Array
                (
                    [0] => 3
                )

            [Name] => Array
                (
                    [0] => test3
                )

        )

    [2] => Array
        (
            [VlanId] => Array
                (
                    [0] => 4
                )

            [Name] => Array
                (
                    [0] => test4
                )

        ) 
```

我找到了以下帖子： [搜索多维数组 php](https://stackoverflow.com/questions/7817727/search-a-multidimensional-array-php)

和

[使用 array_search() 在 php 中查找值](https://stackoverflow.com/questions/8382354/using-array-search-to-find-values-in-php)

我正在使用 rescursiveiterator 方法来查找值 test4。我的代码如下所示：

```
foreach (new RecursiveIteratorIterator(new RecursiveArrayIterator($vlans)) as $key=>$value) {
    if ($value == 'test4') {
             print 'fount it. the key is: '. $key .' and value is: '. $value;
        break;
    }
} 
```

这给出了以下输出：

> 找到它。关键是：0，值是：test4

我不能使用它来取消设置 test4 记录，因为 [0] 只是取消设置最外层数组中的第一项......在这种情况下，它将删除名为 test2 的 VlanID 2。

一旦我找到它，你能帮我弄清楚如何删除记录 test4 吗？我尝试阅读以下帖子：

[在php中取消设置多维数组](https://stackoverflow.com/questions/5417182/unsetting-multi-dimensional-arrays-in-php)

但无法完全理解如何解决此问题。

谢谢。

**编辑1：**

```
 foreach ($vlans as $a=>$value) {
            if ($value['Name'][0] =='test4' ){
                echo 'found it at: '. $value;
                unset($vlans[$a]);
                break;
            }   
          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:53:16.167

这是一个更健壮的解决方案，适用于任何多维数组并返回键路径数组。`$haystack`如果在数组中找到键路径，则搜索`$needle`并返回一个数组，否则返回`false`。

```
function arraySearchRecursive($needle, $haystack, $strict=false, $path=array()) {
    if(!is_array($haystack)) {
        return false;
    }

    foreach ($haystack as $key => $val) {
        if(is_array($val) && $subPath = array_searchRecursive($needle, $val, $strict, $path)) {
            $path = array_merge($path, array($key), $subPath);
            return $path;
        } elseif ((!$strict && $val == $needle) || ($strict && $val === $needle)) {
            $path[] = $key;
            return $path;
        }
    }

    return false; // value not in array! 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:35:03.680

考虑`$array`是最外面的数组：

```
foreach ($array as $a) {
    if ($a['Name'][0]) == 'test4') { ... }
} 
```

# google-chrome - d3.js 折线图在 Safari 中无法正确显示

> ID：14526122
> 
> 赞同：1
> 
> 时间：2013-01-25T16:31:29.270
> 
> 标签：google-chrome, svg, safari, d3.js

我已经按照关于如何制作折线图的 d3.js 教程进行了操作，它在 Chrome (v24.0.1312.56) 中成功运行/正常显示，但在 Safari (v6.0.2 (7536.26.17)) 中却没有。在 Safari 中，轴显示正确，但线本身的端点绘制在 svg 之外，并且在整个画布上拉伸。在这里你可以看到它：

[http://www.npcompleteheart.com/post/time-series-plotting-d3js/](http://www.npcompleteheart.com/post/time-series-plotting-d3js/)

我还将代码放在 jsfiddle 中，但我不确定现在如何使它工作（第一次使用它）：http: [//jsfiddle.net/hFRZx/15/](http://jsfiddle.net/hFRZx/15/)

jsfiddle 中唯一的变化是有一个数据变量而不是实际的 json 文件位置。

我努力了：

*   不在线条上绘制圆圈并消除醉意
*   SVG 最初是附加到一个 div 的，我切换到在 HTML 中设置一个高度和宽度的 svg。然后将图形创建时的高度和宽度设置为“100%”。

我所知道的是，Chrome 中的路径值与 Safari 中的不同。不幸的是，我不知道为什么，因为只有这一行在代码中绘制了路径（对它来说并不多）：

```
 graph.append("svg:path").attr("d", line1(data)).attr("class", "data1"); 
```

图表创建的相关代码是：

```
var dates = [];
var data = [];
var pointRadius = 1.75;

$.getJSON("/json/file/location.json", function(json) {
  $.each(json, function(key,value) {
    data.push(value)
    var eptime = new Date(parseFloat(key) * 1000)
    dates.push(eptime)
   });

  var margin = 110
  var m = [margin/3.5, margin, margin/3.5, margin]; // margins
  var w = 800 - m[1] - m[3];     // width
  var h = 500 - m[0] - m[2]; // height

  var x = d3.time.scale().domain([dates[0], dates[dates.length -1]]).range([0, w]);
  x.tickFormat(d3.time.format("%Y-%m-%d-%H-%M"));
  var digitLength = 100000
  var y = d3.scale.linear()
    .domain([Math.floor(d3.min(data, function(d) { return d; })/digitLength)*digitLength, 
                        d3.max(data, function(d) { return d; })])
    .range([h,0]);

  var line1 = d3.svg.line()
    .x(function(d,i) { 
            return x(dates[i]);
    })
    .y(function(d) { 
            return y(d);
    })
  var graph = d3.select("#timeseries_main")
                            .attr("width", w + m[1] + m[3])
                            .attr("height", h + m[0] + m[2])
                          .append("svg:g")
                            .attr("transform", "translate(" + m[3] + "," + m[0] + ")");
  var xAxis = d3.svg.axis().scale(x).ticks(9).tickSize(-h).tickSubdivide(1);

  graph.append("svg:g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + h + ")")
      .call(xAxis);

  var yAxisLeft = d3.svg.axis().scale(y).ticks(7).orient("left");
  graph.append("svg:g")
      .attr("class", "y axis")
      .attr("transform", "translate(-10,0)")
      .call(yAxisLeft);

  graph.append("text")
      .attr("class", "y label")
      .attr("text-anchor", "end")
      .attr("y", -110)
      .attr("x", -140)
      .attr("dy", ".75em")
      .attr("transform", "rotate(-90)")
      .text("Quantity X"); 
  graph.append("svg:path").attr("d", line1(data)).attr("class", "data1");

  dataCirclesGroup = graph.append('svg:g');
  var circles = dataCirclesGroup.selectAll('.data-point')
    .data(data);

  circles
    .enter()
      .append('svg:circle')
        .attr('class', 'data-point')
        .style('opacity', 1e-6)
        .attr('cx', function(d,i) { return x(dates[i]) })
        .attr('cy', function() { return y(0) })
        .attr('r', function() { return (data.length) ? pointRadius : 0 })
      .transition()
        .style('opacity', 1)
        .attr('cx', function(d,i) { return x(dates[i]) })
        .attr('cy', function(d) { return y(d) });

  circles
    .transition()
      .attr('cx', function(d,i) { return x(dates[i]) })
      .attr('cy', function(d) { return y(d) })
      .attr('r', function() { return (data.length) ? pointRadius : 0 })
      .attr('index', function(d,i) { return i; })
      .style('opacity', 1);

  circles
    .exit()
      .transition()
        .attr('cy', function() { return y(0) })
        .style("opacity", 1e-6)
        .remove();

    $('svg circle').tipsy({ 
      gravity: 'w', 
      html: true, 
      title: function() {
        var d = this.__data__;
        return numberWithCommas(d) + 
               '<br/> on ' + dates[$(this).attr("index")]; 
      }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T02:54:41.973

我已经在我的 safari 6.0.5 中检查过了，没关系。svg 有很多错误。如果你找到了，你可以将完整的描述发布给浏览器开发者，就像[这里](http://code.google.com/p/chromium/issues/detail?id=196523)一样。

# vb.net - 如何打开 vb.net 复制/传输的代码？

> ID：14526124
> 
> 赞同：0
> 
> 时间：2013-01-25T16:31:39.390
> 
> 标签：vb.net, visual-studio-2005, file-transfer, file-copying

我已将包含我在 Visual basic.net 2005 中的代码（form1.vb、form1.desing.vb 和 form1.resx）的文件夹复制到我的cooldisk。现在，我需要在另一台机器上打开它。我在 vb.net 2008 中单击“打开项目”选项，但它要求提供不在我复制的文件夹中的 *.vbp 文件！当我通过单击它们打开时，没有出现表单（界面），我只能看到代码。我需要编辑界面（可视化形式），如何正确打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:48:57.940

您可以创建一个新项目并将现有表单添加到其中。

# .net - 在 VB.NET 中实现“可选委托”的最佳方式是什么？

> ID：14526137
> 
> 赞同：2
> 
> 时间：2013-01-25T16:32:29.780
> 
> 标签：.net, vb.net

我来自 Objective-C 背景，我正在编写一些包含委托的 VB.NET。我有一个`Worker`执行某些任务的类。此类的属性之一是一个`ILogger`对象，它具有附加到某个日志文件的方法。（我希望我的`Worker`对象与日志记录分离，这将由我的 GUI 处理。）在 Objective-C 中，我可以声明

```
@property (nonatomic, strong) id<LoggingDelegate> logger; 
```

然后在我的代码上撒上类似的行

```
[logger appendToLog:@"Beginning polarity reversal..."]; 
```

在 Objective-C 中，`logger`实际上不需要将其设置为对象即可。如果它是一个空引用（Objective-C 中的“nil”），`appendToLog:`则运行时会默默地忽略该消息。

在 VB.NET 中，我可以做类似的事情：

```
Public Property logger As ILogger 
```

和

```
logger.AppendText("Beginning polarity reversal...") 
```

但当然，`logger`实际上需要设置为一个对象才能使其工作。处理我的工作人员没有附加记录器对象的情况的惯用方法是什么？（更一般地说，我在 VB.NET 中实现的委托模式是惯用的吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:32:35.977

每次使用可选对象时，都可以先检查它是否为空，例如：

```
If logger IsNot Nothing Then
    logger.AppendText("Beginning polarity reversal...")
End If 
```

或者，您可以创建一个为您执行额外检查的私有方法：

```
Private Sub AppendTextToLog(text As String)
    If logger IsNot Nothing Then
        logger.AppendText("Beginning polarity reversal...")
    End If
End Sub 
```

或者，正如 vcsjones 建议的那样，您可以将该属性默认为一个虚拟对象：

```
Public Class MyClass
    Private Class DummyLogger
        Implements ILogger

        Public Sub AppendText(text As String) Implements ILogger.AppendText
            ' Do nothing
        End Sub
    End Class

    Public Property Logger As ILogger
        Get
            Return _logger
        End Get
        Set(ByVal value As ILogger)
            _logger = value
        End Set
    End Property
    Private _logger As ILogger = New DummyLogger()

    Public Sub DoWork()
        _logger.AppendText("Beginning polarity reversal...")
    End Sub
End Class 
```

或者，最接近 VB.NET 中“可选委托”的东西实际上是`Event`：

```
Public Class MyClass
    Public Event AppendText(text As String)

    Public Sub DoWork()
        RaiseEvent AppendText("Beginning polarity reversal...")
    End Sub
End Class 
```

* * *

## 更新

从 VB 14.0 (Visual Studio 2015) 开始，您现在可以使用`?.`运算符（称为“空条件”运算符）：

```
logger?.AppendText("Beginning polarity reversal...") 
```

或者，如果您想使用实际的委托，您也可以使用与委托相同的运算符。因此，如果您有一个名为 的委托变量`appendToLog`，您可以调用：

```
appendToLog?.Invoke("Beginning polarity reversal...") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T17:39:17.000

我暂时搁置我的道德信念，指出可以在空对象上调用扩展方法。所以如果你写：

```
Module M
    <Extension>
    Public Sub LogIfNotNull(logger As ILogger, message As String)
        If logger IsNot Nothing Then
            logger.AppendText(message)
        End If
   End Sub
End Module 
```

您可以使用此扩展方法写入您的 ILogger，它会做您想做的事。现在，我不建议将您的地址放在这段代码附近，因为下一个找到它的开发人员可能会想知道您住在哪里。说够了。

vcsjones 的观点是最好的（谁真的应该把它写成答案，这样你才能接受它！）：制作一个 NullLogger 对象并使用它。然后对调用者隐藏“我不想记录”的抽象。

# ruby-on-rails - Rails Way - 生成新记录

> ID：14526138
> 
> 赞同：0
> 
> 时间：2013-01-25T16:32:32.473
> 
> 标签：ruby-on-rails, rails-activerecord

所以，我在用户和考试之间建立了多对多的关系，使用权限作为中间表。

我想为管理员创建一个表，以授予对不同测试的不同级别的访问权限。

那么，有没有比遍历所有尚未与该用户绑定的考试并创建新权限更好的方法来创建新的权限记录？

请注意，部分或全部考试可能已经与用户绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:55:14.103

假设你有这样的事情：

```
class User < ActiveRecord::Base
  has_many :permissions
  has_many :exams, through: :permissions
end

class Exam < ActiveRecord::Base
  has_many :permissions
  has_many :users, through: :permissions
end

class Permission < ActiveRecord::Base
  belongs_to :user
  belongs_to :exam
end 
```

你可以这样做：

```
user = User.find(1)
if user.exams.where(id:foo).length==0
  Permission.create(user_id:1, exam_id0:foo, access_level:bar)
else
  user.permissions.where(exam_id:foo).first.update_attribute(:access_level,bar)
end 
```

`user_id`假设您正常建立关系（在权限上和权限内使用索引），它将连接表并确定权限是否已经存在`exam_id`。

# c++ - TCP over IPv4 的最小数据包大小是多少

> ID：14526139
> 
> 赞同：2
> 
> 时间：2013-01-25T16:32:37.387
> 
> 标签：c++, tcp, ip, packet

TCP over IPv4 的最小数据包大小是多少？

嗨，伙计们，我非常坚持这个问题。

假设我要传输 12KB 的数据

并通过 IPv4 TCP

我做了以下计算

```
 20 Bytes for TCP Headers
 4 Bytes for Source Address
 4 Bytes for Destination Address
 4 Bytes on Zeros, Protocol and TCP Length
 2 Bytes on Checksum
 12 Bytes on Data 
```

但我试着用我的朋友检查我的结果，我们得到了不同的结果..

我在 TCP 上使用维基百科上的示例，我只是假设

TCP 标头是 20Bytes 和上面的计算（我使用所有粉红色的 TCP 伪标头）。

我在计算中做错了什么。因为我的两个朋友的回答比我多 6 个字节

我的 TCP 标头是 20 字节 IPV4 是 14 字节 数据是 12 字节

我们之间唯一的区别是我的普通 IPv4 是 20 字节。我在 ipv4 计算中做错了哪个字段？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:02:50.420

一个快速的谷歌搜索产生[了这个 TCP 标头图](http://nmap.org/book/images/hdr/MJB-TCP-Header-800x564.png)。

您似乎缺少以下字段。

*   2 字节拥塞窗口
*   4字节序列
*   2 字节紧急指针

不确定您将哪个归类为“协议”等，但主要的缺失看起来像序列号。TCP 标头的最小值应为 20 个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:40:21.373

最小 TCP 标头大小为 20 字节，最小 IPv4 标头大小为 20 字节。因此，假设您实际上可以通过 TCP 发送 0 字节，那么包含 0 字节数据的 TCP/IPv4 数据包将至少为 40 字节，而您不能。因此，最小值为 41 个字节。

# mysql - MySQL计算派生属性

> ID：14526140
> 
> 赞同：2
> 
> 时间：2013-01-25T16:32:45.467
> 
> 标签：mysql, sql

我`Fine`在 MySQL 表中有一个派生属性，其值为

```
(CurrentDate - DueDate) * 0.5 
```

`CurrentDate`并以格式`DueDate`存储在表中。`Date`

如何为`Fine`表中的属性指定此公式

```
CREATE TABLE IF NOT EXISTS Loan (
         loanID    INT UNSIGNED  NOT NULL AUTO_INCREMENT,
         BorrowDate  DATE       DEFAULT NULL,
         ReturnDate         DATE       DEFAULT NULL,
         DueDate         DATE       DEFAULT NULL,
--- Fine... What do I write for Fine here-------
         userID    INT UNSIGNED  NOT NULL,           
         itemID    INT UNSIGNED  NOT NULL,      
         PRIMARY KEY  (loanID) ,
         FOREIGN KEY (userID) REFERENCES LibraryUser (userID),
         FOREIGN KEY (itemID) REFERENCES Items (itemID)
       ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:41:09.857

您不能在 mysql 中“按原样”拥有计算列。

三种解决方案：

**第一**：使用触发器

参见例如[从另一列计算的列](https://stackoverflow.com/questions/5222044/column-calculated-from-another-column)

**第二**：创建一个视图（Fine 将只存在于您的视图中，而不存在于您的主表中）。

视图可以毫无问题地包含计算列。

```
CREATE VIEW v_computedLoan AS
SELECT
loanID, 
BorrowDate, 
ReturnDate, 
CurrentDate,
--etc
(CurrentDate-DueDate)*0.5 as Fine
FROM Loan 
```

**第三**：将计算排除在您的数据库之外。仅在您的查询中使用它。

编辑：如果 CurrentDate 确实与 CURRENT_DATE() 函数相同（然后应该有所不同），则带有触发器的解决方案将不起作用，并且 CurrentDate 不应存储在任何表中（但您仍然可以在视图中使用它）。

# node.js - 使用 mongodb 时出现烦人的消息

> ID：14526141
> 
> 赞同：7
> 
> 时间：2013-01-25T16:32:45.460
> 
> 标签：node.js, mongodb

我正在使用此代码来使用 mongodb：

```
var mongo = require("mongodb");
var BSON = mongo.BSONPure;

var server = new mongo.Server('localhost', 27017, {auto_reconnect: true, safe: true});
var db = new mongo.Db('dbname', server);

db.open(function(err, db) {
    if(!err) {
        console.log("Connected to 'dbname' database");
        db.collection("items", {safe:true}, function(err, collection) {
            console.log("Open database");
            if (err) {
                console.log("The 'items' collection doesn't exist. Creating it with sample data.");
                var items = [];
                for (var i = 0; i < 10; i++) {
                    items.push({
                        title: "title" + i,
                        site_name: "site_name" + i,
                        url: "url" + i,
                        type: "type" + i,
                        image: "image" + i
                    });
                }
                db.collection("items", function(err, collection) {
                    collection.insert(items, {safe:true}, function(err, result) {});
                });
            }
        });
    }
}); 
```

当我运行应用程序时，我收到消息：

```
========================================================================================
=  Please ensure that you set the default write concern for the database by setting    =
=   one of the options                                                                 =
=                                                                                      =
=     w: (value of > -1 or the string 'majority'), where < 1 means                     =
=        no write acknowlegement                                                       =
=     journal: true/false, wait for flush to journal before acknowlegement             =
=     fsync: true/false, wait for flush to file system before acknowlegement           =
=                                                                                      =
=  For backward compatibility safe is still supported and                              =
=   allows values of [true | false | {j:true} | {w:n, wtimeout:n} | {fsync:true}]      =
=   the default value is false which means the driver receives does not                =
=   return the information of the success/error of the insert/update/remove            =
=                                                                                      =
=   ex: new Db(new Server('localhost', 27017), {safe:false})                           =
=                                                                                      =
=   http://www.mongodb.org/display/DOCS/getLastError+Command                           =
=                                                                                      =
=  The default of no acknowlegement will change in the very near future                =
=                                                                                      =
=  This message will disappear when the default safe is set on the driver Db           =
======================================================================================== 
```

这是什么消息，我该如何解决？有没有更好的使用mongodb的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-11T16:41:36.583

MongoDB 有助于指导您在其 DB 设置中设置默认写入关注 (w) 参数。

改变这条线应该可以解决问题

```
 var db = new mongo.Db('dbname', server, {w:1}); 
```

这对于开发/黑客来说很好，但在投入生产之前，您应该了解此选项的后果。

[MongoDB 写关注参考](http://docs.mongodb.org/manual/reference/write-concern/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-07T09:41:08.950

Db 构造函数具有三个参数。“DataBaseName”、ServerObject、{参数}。

显示的消息是有关写入问题的警告，并解释了您获得的选项。

```
 var _mongodb = 'MyDataBase';
 var db = new mongodb.Db(_mongodb, server, {w:'majority'}); 
```

参考： http: [//mongodb.github.io/node-mongodb-native/api-generated/db.html](http://mongodb.github.io/node-mongodb-native/api-generated/db.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T23:22:19.970

```
var MongoClient = require('mongodb').MongoClient, Server = require('mongodb').Server;
var mongoClient = new MongoClient(new Server('localhost', 27017));
db = mongoClient.db("mydb");
db.open(function(err, db) {
    if(!err) {
         console.log("Connected to 'mydb' database");
         db.collection('mycollection', {strict:true}, function(err, collection) {
        if (err) {
                console.log("error...");

        }
    });
}
}); 
```

参考： http: [//mongodb.github.io/node-mongodb-native/api-generated/mongoclient.html](http://mongodb.github.io/node-mongodb-native/api-generated/mongoclient.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T16:55:41.913

文档可在

[http://mongodb.github.com/node-mongodb-native/](http://mongodb.github.com/node-mongodb-native/)

改用 MongoClient 接口

[http://mongodb.github.com/node-mongodb-native/driver-articles/mongoclient.html](http://mongodb.github.com/node-mongodb-native/driver-articles/mongoclient.html)

# .net - WebService 记录每个 WebMethod 请求的唯一 ID

> ID：14526142
> 
> 赞同：0
> 
> 时间：2013-01-25T16:32:45.703
> 
> 标签：.net, web-services, asynchronous, asmx, webmethod

我正在将日志系统添加到作为 Windows 服务运行的 .Net ASMX WebService 中。目的是在不同的请求 ID 下记录对 WebMethod 的每次调用，以便能够在日志中识别为特定请求所做的所有条目。

为了进一步设置场景，每个 WebMethod 创建 HttpWebRequest 以与其他主机通信。

在解决问题的第一次尝试中，我使用以下方法存储每个线程的请求 ID：

*   **[ThreadStatic] 静态 int requestId**

*   **Thread.GetData**和**Thread.SetData**存储每个线程的请求 ID。

但是我很快意识到请求正在交换线程，这是不可靠的。

我最后尝试使用**HttpContext.Current.Items**来存储每个 WebMethod 请求的请求 ID，但这并不完全可靠，因为 HttpContext.Current.Items 有时可能为空。

进一步调查我认为这可能是由于在 WebMethod 中发送了 HttpWebRequest，我认为这是由于 HttpWebRequest 中发生的异步调用可能会丢失原始 HttpContext，因此它是项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:55:08.597

不要尝试保存“状态”，即使您成功了，当您想要使用多个服务器时，此解决方案也不会扩展。

您可以为每个请求生成一个 GUID。

```
Guid.NewGuid() 
```

并将其用作 ID。

# ruby-on-rails - (@event.start_date-Time.now) // NoMethodError (未定义的方法 `-' for nil:NilClass):

> ID：14526146
> 
> 赞同：0
> 
> 时间：2013-01-25T16:33:08.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在此应用程序中，当创建事件时，系统会检查是否接近 3 天。如果是，它会更改一个布尔值。

它工作正常，但我不知道我做了什么，但减法运算给了我一个错误。NoMethodError（nil:NilClass 的未定义方法 `-'）：

我敢肯定是一个简单的错误..但找不到它。非常感谢任何帮助。非常感谢！！

event_controller.rb

```
 def create
    categories = params[:category_ids] or []
    @event = Event.new(params[:event].merge(:user_id => current_user.id, :category_ids => categories))
    check_date

    respond_to do |format|
      if @event.save
        #Mailer to seek appoval
        format.html { redirect_to @event, notice: 'Event was successfully created.' }
        format.json { render json: @event, status: :created, location: @event }
      else
        format.html { render action: "new" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
      end
    end
  end

private 

  # Set the event to 'reminded'
  def check_date
    if close_date
      @event.reminded = true
    end
  end

  # Checks whether an event is happening in less than 72h
  def close_date
    if ((@event.start_date-Time.now)< 259146.01469397545)
      true
    else 
      false
    end
  end 
```

**更新**

显然，当事件尝试保存时，日期字段为空。这是因为我更改了字段以实现 dateTimePicker。

他们曾经是

```
.field
    = f.label t :event_start_date
    %br
    = f.datetime_select :start_date
  .field
    = f.label t :event_finish_date
    %br
    = f.datetime_select :finish_date 
```

现在场

```
 = f.label t :event_start_date
    %br
    = f.text_field :start_date, :class=>"datetime_box", :size=>"17"
  .field
    = f.label t :event_finish_date
    %br
    = f.text_field :finish_date, :class=>"datetime_box", :size=>"17" 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:55:59.690

您`@event`不能设置 start_date。

另外，考虑使用`72.hours`而不是那个巨大的常数（带有奇怪的小数位数......）

# c# - 字典的 IEnumerator 是否保证一致？

> ID：14526147
> 
> 赞同：4
> 
> 时间：2013-01-25T16:33:09.453
> 
> 标签：c#, .net, dictionary, ienumerable

所以，我找到了这样一段代码：

```
class CustomDictionary
{
  Dictionary<string, string> backing;
  ...
  public string Get(int index)
  {
    return backing.ElementAtOrDefault(index); //use linq extensions on IEnumerable
  }
} 
```

然后像这样使用它：

```
for(int i=0;i<mydictionary.Count;i++)
{
  var value=mydictionary.Get(i);
} 
```

除了这样做的性能问题和丑陋之外，这段代码真的正确吗？即，是否保证字典上的 IEnumerable 始终以相同的顺序返回内容，假设在迭代期间没有任何内容被字典修改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:35:37.657

这不能保证。当然，它适用于 SortedDictionary<>，也适用于数组和列表。但不适用于字典。

很有可能，如果字典没有更改，它将是稳定的 - 但不能保证。你必须问自己——你觉得幸运吗？;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:36:33.780

如果您想按插入的顺序获取元素，那么您可能应该根据您首先想要的元素查看[堆栈](http://msdn.microsoft.com/en-us/library/system.collections.stack.aspx)和[队列。](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:49:29.490

是的，你会得到相同的物品。

正如您所指定的，您提出的方法是非常低效的方法。

ElementAtOrDefault 是 IEnumerable 的 LINQ 扩展方法，意味着对于每个项目，它将一直迭代到指定的项目。

# javascript - Javascript 确认对话框未激活

> ID：14526148
> 
> 赞同：1
> 
> 时间：2013-01-25T16:33:12.193
> 
> 标签：javascript, html, dialog

这是代码：

```
<form  method="post" id="cp_ind_form">

    // lots of input fields!
    <input type="submit" name="update_submit" value="Update"  />
    <input type="submit" name="delete_submit" value="Delete"  onclick="deleteConfirm()" />

</form> 
```

**scripts.js**（确认此文件已连接到上面的页面）

```
(function deleteConfirm() {
    var s = document.getElementById('confirm');
    s.onchange = function() {
        var yes = confirm('Do you really want to delete this location?');
        if (yes) { 
            var f = document.getElementById('cp_ind_form');
            f.submit();
        }
    }
})();

} 
```

这让我发疯。这样的基本功能在这里不起作用？我基本上是从我拥有的其他代码中复制它，这没有什么不同。有人可以确认我是否遗漏了一个小细节吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:36:16.767

看代码。

当您单击提交时，您正在向某事添加 onchange 事件。

您没有触发显示确认，也没有取消原始提交。

而且用 (funciton(){})(); 包裹它是没有意义的

它应该是

```
function deleteConfirm() {
    return confirm('Do you really want to delete this location?');   
} 
```

和

```
onclick="return deleteConfirm();" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:38:05.080

要在调用时实际执行确认`deleteConfirm`，请将您的代码更改为：

```
function deleteConfirm() {
    var yes = confirm('Do you really want to delete this location?');
    if (yes) { 
        document.getElementById('cp_ind_form').submit();
    }
    // block default submit
    return(false);
} 
```

这也会返回 false ，这样就不会发生默认的表单提交。

然后，将您的 HTML 更改为：

```
onsubmit="return deleteConfirm()" 
```

如果您处理 onsubmit 而不是 onclick，则可以通过从处理程序返回 false 来阻止默认提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:36:46.107

`deleteConfirm()`在按钮单击时运行。在此函数中，您将代码分配给`onchange`等待`#confirm`更改项目的事件。我不知道那个元素在哪里，但我认为该事件永远不会被触发，所以确认框永远不会显示

# c - 全局变量的多重定义

> ID：14526153
> 
> 赞同：17
> 
> 时间：2013-01-25T16:33:26.450
> 
> 标签：c, makefile, shared-libraries

> **可能重复：**
> [常量变量在标头中不起作用](https://stackoverflow.com/questions/2328671/constant-variables-not-working-in-header)

在我用来创建共享对象的头文件中，我有以下内容：

```
#ifndef LIB_HECA_DEF_H_
#define LIB_HECA_DEF_H_

struct dsm_config {
    int auto_unmap;
    int enable_copy_on_access;
};

enum { NO_AUTO_UNMAP, AUTO_UNMAP } unmap_flag;
enum { NO_ENABLE_COA, ENABLE_COA } coa_flag;

const struct dsm_config DEFAULT_DSM_CONFIG = { AUTO_UNMAP, NO_ENABLE_COA };

<more code ...>

#endif 
```

当我编译时，我收到以下错误：

```
cc -g -Wall -pthread libheca.c dsm_init.c -DDEBUG    master.c   -o master
/tmp/cciBnGer.o:(.rodata+0x0): multiple definition of `DEFAULT_DSM_CONFIG'
/tmp/cckveWVO.o:(.rodata+0x0): first defined here
collect2: ld returned 1 exit status
make: *** [master] Error 1 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-25T16:38:19.083

因为每次包含在实现文件文件中，都会创建一个新的结构实例（并存储在目标文件中）。

为避免这种情况，只需在头文件中将结构声明为“extern”并在实现文件中对其进行初始化：

```
// In your header file: 
extern const struct dsm_config DEFAULT_DSM_CONFIG;

// In your *.c file:
const struct dsm_config DEFAULT_DSM_CONFIG = { AUTO_UNMAP, NO_ENABLE_COA }; 
```

这将解决您的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T16:49:00.857

在 C 语言`const`中，默认情况下对象具有外部链接（与默认情况下具有内部链接的 C++ 相反）。因此，在您的代码中，您创建了`DEFAULT_DSM_CONFIG`具有外部链接的对象的多个定义——这明显违反了 C 语言的定义规则。

要么将你的对象声明为`static const`（如果你不介意有多个具有*内部*链接的对象），要么从头文件中删除定义（只留下一个非定义的`extern const` *声明*）。

无论如何，这个问题已经被问过很多次了。查看[在标题中不起作用的常量变量](https://stackoverflow.com/questions/2328671/constant-variables-not-working-in-header)或进行搜索。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T16:38:18.110

每个包含头文件的 c 文件都有该行

> 常量结构 dsm_config DEFAULT_DSM_CONFIG = { AUTO_UNMAP, NO_ENABLE_COA };

所以这些 c 文件中的每一个都定义了一个变量 dsm_config。如果您只想要一个变量 dsm_config 您需要将头文件中的声明更改为

> extern const 结构 dsm_config DEFAULT_DSM_CONFIG;

并添加定义

> 常量结构 dsm_config DEFAULT_DSM_CONFIG = { AUTO_UNMAP, NO_ENABLE_COA };

只有一个c文件。

另一个不太好的解决方案是将头文件更改为

> 静态常量结构 dsm_config DEFAULT_DSM_CONFIG = { AUTO_UNMAP, NO_ENABLE_COA };

然后每个 c 文件定义它自己的 dsm_config，在链接期间其他翻译单元不可见。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T16:44:53.500

每个源文件（.c，而不是 .h）都是单独编译的。在这些编译中的每一个中，`dsm_config`带有初始化器（`= { values… }`部分）的声明都会创建`dsm_config`. 因此，整个程序有多个定义。

通常，头文件应该只*声明*对象而不*定义*它们。为此，请删除头文件中的初始化程序，只留下没有初始化程序的声明。在一个源文件中，`dsm_config`通过使用初始化程序重复声明来定义。

# ruby-on-rails-3 - 如何使用查找和日期条件进行测试？

> ID：14526155
> 
> 赞同：0
> 
> 时间：2013-01-25T16:33:35.957
> 
> 标签：ruby-on-rails-3, unit-testing, rspec, mocking, tdd

我正在尝试为一种方法开发一些测试，该方法负责检索在某个日期之后创建的一些用户。我不知道如何为它模拟测试。方法如下：

```
def user_list
  render :nothing => true, :status => 422 if params[:time_param].blank?

  time = Time.parse(params[:time_param])
  @users = User.find(:all, :select => 'id, login, email',
                           :conditions => ["created_at > ?", time])
  render :json => { :users => @users }
end 
```

结尾

这是我的规格：

```
describe UsersController do
  context "when receiving time parameter" do
    before (:each) do
      @time_param = "2013-01-25 00:01:00"
      user1 = mock_model(User, :created_at => Time.parse('2013-01-25 00:00:00'))
      user2 = mock_model(User, :created_at => Time.parse('2013-01-25 00:01:00'))
      user3 = mock_model(User, :created_at => Time.parse('2013-01-25 00:02:00'))

      @users = []
      @users << user1 << user2 << user3
    end

    it "should retrieve crimes after 00:01:00 time" do
      User.stub(:find).with(:all, :select => 'id, login, email').and_return(@users)
      get :user_list, { :time_param => @time_param }
      JSON.parse(response.body)["users"].size.should eq 1
    end
  end
end 
```

问题是它总是返回所有用户，尽管只返回一个。（最后一个）。我错在哪里？

帮帮我=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:36:40.130

您没有测试您必须在那里测试的内容，在控制器规范上您只需要测试您想要的方法是否使用您想要的参数调用，在您的情况下，您必须测试 User 模型接收到 :find带有参数 :all, :select => 'id, login, email', :conditions => ["created_at > ?", time] （带有 time 应该存在的值。

此外，该逻辑不属于控制器，您应该在 User 上有一个类方法，例如 select_for_json(date) 来环绕该 find 方法（您可以为其找到更好的名称）

然后你的控制器变成：

```
def user_list
  render :nothing => true, :status => 422 if params[:time_param].blank?

  time = Time.parse(params[:time_param])
  @users = User.select_for_json(time)
  render :json => { :users => @users }
end 
```

你的规格是

```
before(:each) do
  @users = mock(:users)
  @time_param = "2013-01-25 00:01:00"
end

it "retrieve users for json" do
  User.should_receive(:select_for_json).once.with(@time).and_return(@users)
  get :user_list, { :time_param => @time }
  assigns(:users).should == @users
end 
```

这样您就可以确定您的操作完成了它的功能，并且规范会更快，因为您没有创建用户

然后您可以在模型规范上测试该方法，在那里您必须创建一些用户，调用该方法并检查返回的用户（不要在模型规范上存根/模拟任何内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:02:16.387

您的`stub`电话告诉`find`您忽略它认为应该做的事情并返回`@users`。它不会尝试匹配条件。

不幸的是，要进行测试，我认为您将不得不允许 s`find`通过您的数据库执行，这意味着您不能使用`mock_model`s. 您可能会想要做任何一个`User.create(...)`或`FactoryGirl.create(:user)`（或其他一些工厂/固定装置）。

当然，这样做，`MassAssignment`如果你使用`attr_accessible`or ，你可能会遇到问题`attr_protected`，但这些很容易`stub`解决。

我希望这会有所帮助。

# image - WebView 到 TIFF 表示

> ID：14526156
> 
> 赞同：0
> 
> 时间：2013-01-25T16:33:38.610
> 
> 标签：image, macos, cocoa, webview

我正在尝试捕获 a 的内容`WebView`并将其保存为图像。这是我现在的代码（`cv`是网络视图）：

```
[cv lockFocus];
        NSBitmapImageRep *rep = [[NSBitmapImageRep alloc] initWithFocusedViewRect:[cv bounds]];
        [cv unlockFocus];
        NSData *data = [rep TIFFRepresentation];
        [data writeToFile:[[save URL] path] atomically:NO]; 
```

我得到的只是一张大小正确的灰色图像。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:50:37.310

我不认为你使用正确`NSBitmaImageRep`。

看看[这篇文章](https://stackoverflow.com/questions/11948241/cocoa-how-to-render-view-to-image)，了解几种做你想做的事情的方法。可能唯一适用于 Web 视图（这是一个相当复杂的野兽）的方法是屏幕截图+裁剪方法。

# java - Java球体体积计算

> ID：14526157
> 
> 赞同：4
> 
> 时间：2013-01-25T16:33:39.243
> 
> 标签：java, volume, calculator

我有一个 Java 类，我对这个问题感到困惑。我们必须制作一个体积计算器。你输入一个球体的直径，程序会输出体积。它适用于整数，但每当我输入小数时，它就会崩溃。我假设它与变量的精度有关

```
double sphereDiam;
double sphereRadius;
double sphereVolume;

System.out.println("Enter the diamater of a sphere:");
sphereDiam = keyboard.nextInt();
sphereRadius = (sphereDiam / 2.0);
sphereVolume = ( 4.0 / 3.0 ) * Math.PI * Math.pow( sphereRadius, 3 );
System.out.println("The volume is: " + sphereVolume); 
```

所以，就像我说的，如果我输入一个整数，它就可以正常工作。但是我输入了 25.4，它在我身上崩溃了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T16:35:26.010

这是因为`keyboard.nextInt()`期待一个`int`，而不是一个`float`or `double`。您可以将其更改为：

```
float sphereDiam;
double sphereRadius;
double sphereVolume;

System.out.println("Enter the diamater of a sphere:");
sphereDiam = keyboard.nextFloat();
sphereRadius = (sphereDiam / 2.0);
sphereVolume = ( 4.0 / 3.0 ) * Math.PI * Math.pow( sphereRadius, 3 );
System.out.println("The volume is: " + sphereVolume); 
```

`nextFloat()`并将`nextDouble()`拾取`int`类型并自动将它们转换为所需的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-16T19:50:01.620

```
double sphereDiam;
double sphereRadius;
double sphereVolume;
System.out.println("Enter the diameter of a sphere:");
sphereDiam = keyboard.nextDouble();
sphereRadius = (sphereDiam / 2.0);
sphereVolume = ( 4.0 / 3.0 ) * Math.PI * Math.pow( sphereRadius, 3 );
System.out.println("");
System.out.println("The volume is: " + sphereVolume); 
```

# java - 我想知道如何将数组传递给Java中的方法

> ID：14526167
> 
> 赞同：-2
> 
> 时间：2013-01-25T16:34:07.603
> 
> 标签：java, arrays, methods

我已经尝试了几次，这就是我目前所拥有的：

```
 public void turnOn(int index, spotlights[]){
    spotlights[index]=2;
    currentStatus=2;
    } 
```

这是我的数组定义：

```
 private Spotlight[] spotlights = new Spotlight[20]; 
```

有二十盏灯，我将一个（索引）更改为 on 或 currentStatus 更改为 2。

我会很感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:35:51.740

尝试这个：

```
public void turnOn(int index, Spotlight[] spotlights) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:36:04.830

```
public void turnOn(int index, Spotlight[] name){
    spotlights = name;
    spotlights[index]=2;
    currentStatus=2;
} 
```

`spotlights`将数组传递给您的`turnOn`方法，或者您可以直接使用方法变量。

```
public void turnOn(int index, Spotlight[] spotlights){
        spotlights[index]=2;
        currentStatus=2;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:36:31.607

像这样使用：

```
public void turnOn(int index, Spotlight[] spotlights) {
    spotlights[index].setCurrentStatus(2);
} 
```

请注意，您应该在类上有一个`setCurrentStatus(int)`方法。`Spotlight`

# c++ - C++ 和数组索引中的前缀运算符奇异性

> ID：14526168
> 
> 赞同：1
> 
> 时间：2013-01-25T16:34:18.013
> 
> 标签：c++, visual-studio-2010

所以我对前缀运算符感到非常头疼。

在我在 Visual C++ 2010 中的调试版本中。

```
someArray[++index] 
```

将正确增加数组索引，然后使用它来索引数组。

在我的发布版本中，它使用了数组索引，然后增加了它，这引起了一些巨大的麻烦。

奇怪的是我的调试构建代码实际上有一段时间是错误的，我把它写成

```
someArray[index++] 
```

这将使用索引然后递增它，但调试版本仍在递增它，然后使用该值。直到今天早上我才意识到自己的错误。

这是实际代码的示例。

```
for(unsigned int newPointIndex = 0; newPointIndex < newEdgeList.size() - 1;) {
    m_edges.push_back(Edge(newEdgeList[newPointIndex], newEdgeList[++newPointIndex]));
} 
```

在 for 循环中没有发生递增。当我对数组进行索引时，它发生在循环内的实际代码中。我认为这是一个聪明的小优化，但它使它在发布版本中不起作用。

我第二次对数组进行索引时，它在发布版本中使用了未递增的索引，但在调试版本中工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:43:06.757

你的 for 循环体包括：

```
Edge(newEdgeList[newPointIndex], newEdgeList[++newPointIndex]) 
```

这是~~undefined~~ ~~unspecified~~ undefined [1] 行为，因为这两个参数可以按任意顺序（甚至同时）进行评估，因此不清楚`newPointIndex`在第一次使用之前是否会增加。

调试和优化构建很可能以不同的顺序评估参数。

我建议将`newPointIndex`增量放在 for 语句本身中，并在正文中写入：

```
Edge(newEdgeList[newPointIndex], newEdgeList[newPointIndex + 1]) 
```

* * *

[1]：阅读关于 un{specified, defined} 讨论的评论。tl;博士：神圣的跳跃蜥蜴，蝙蝠侠！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T16:43:25.447

**问题**实际上在这里：

```
m_edges.push_back(Edge(newEdgeList[newPointIndex], newEdgeList[++newPointIndex])); 
```

您无法判断这两个表达式中的哪一个`newEdgeList[newPointIndex]`将`newEdgeList[++newPointIndex]`首先执行。

根据 C++ 标准，**不能保证**它们会从左到右执行。见 5.2.2/8：

*“后缀表达式和参数表达式的计算**相对于彼此都是无序**的。参数表达式计算的所有副作用在输入函数之前排序”*

同样相关的是 1.9/15：

*“当调用函数时（无论函数是否内联），与任何参数表达式或与指定被调用函数的后缀表达式相关的每个值计算和副作用，都在执行主体中的每个表达式或语句之前进行排序被调用的函数。[注意：与不同参数表达式相关的值计算和副作用是无序的。-尾注]"*

这意味着一个实现*不仅*可以自由地在调试中以不同的执行顺序执行这两个表达式以发布构建，而且理论上还可以在每次*在同一程序执行中执行该语句时更改顺序，并且没有确定性的方式*.

**解决方案**包括从这些子表达式中取出增量（如另一个答案中所指出的）。

# c# - 从我的字符串中删除 \

> ID：14526171
> 
> 赞同：2
> 
> 时间：2013-01-25T16:34:25.253
> 
> 标签：c#, string, replace

我目前正在尝试从我的 C# 代码中的字符串中删除不需要的字符。

删除 \ 字符，但删除太多。下面是一个字符串的例子

> "[{ \"属性\" : { \"SR_ID\" : \"200003172375\",
> \"Fath_SR\" : \"EH0036\", \"UPRN\" : \"100100024250\",
> \"Eastings\ " : \"260376\", \"Northings\" : \"358150\",
> \"Disgrifiad\" : \"测试\", \"日期\" : \"25/01/2012\",
> \"时间\" : \"11:36\" }, \"几何\" : { \"x\" : 270315, \"y\" : 345828 } }]"

我正在尝试删除 \ 字符，但留下“。我能够删除 \ 的唯一方法是使用

```
 sReturn = sReturn.Replace("\"",String.Empty); 
```

但这会删除 " 字符。

我已经尝试了以下两种尝试，但由于某种原因，它不想按照它所说的去做！

```
 sReturn = sReturn.Replace(@"\",String.Empty);
 sReturn = sReturn.Replace("\\",String.Empty); 
```

有没有办法可以用“替换\”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:37:28.423

也许：

```
sReturn = sReturn.Replace(@"\", ""); 
```

逐字字符串文字允许使用`\`char。

编辑：我刚刚看到你已经尝试过了。这只是 Visual Studio 中的显示问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:39:10.443

这`\"`是一个转义的字符串序列。实际的字符串只是引号 (")，但包含反斜杠以表明它已被转义，并且引号 (") 实际上并不是字符串的结尾（它是字符串的一部分，而不是定义结尾的字符）细绳）。

尝试将字符串打印到控制台或在消息框中显示；这将显示字符串实际上是什么而不显示转义字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:43:43.630

Assuming you really DO have `\"` characters in your string and aren't just looking at an escaped representation, you can simply do:

```
sReturn = sReturn.Replace("\\\"","\""); 
```

If you want to unescape *all* possible types of escape sequences, use:

```
sReturn = Regex.Unescape(sReturn); 
```

But as others have pointed out, you probably don't really have these characters, and are just looking at a representation where it is shown in the escaped form, such as in visual studio debugger.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T16:40:06.140

The slash( \ ) is an escape character letting the compiler know that the next character is supposed to be part of the string. This is an important notation because otherwise the string would end when the compiler gets to the ending quotation mark. Indeed, if you examine the string under different compiler configuration (if you looked at the library in a VB.Net project, for example), you won't see the slash there.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T16:41:29.977

In fact those characters (\) are \" ("). If you print the string you will see there is no '\' character. So you can leave it as is. If you want to compare these spatial information to other, there must be no problem.

# spry - Spry 选项卡式面板，选项卡不接触内容

> ID：14526179
> 
> 赞同：0
> 
> 时间：2013-01-25T16:34:56.207
> 
> 标签：spry, panels, tabbed

我正在使用 Spry Tabbed Pannels 的网站上工作。我的问题是我无法让我的 .TabbedPanelsTab、.TabbedPanelsSelected、TabbedPanelsHover 和 .TabbedPanelsTab a 触摸 .TabbedPanelsContentGroup。

两者之间有一条非常细的白线，我尝试了很多方法，例如负边距或超厚边框。似乎没有任何效果。

我的标签中有用于设计目的的图像，所以这只是一个提示。

以下是网站供参考：

[http://emilymagnuson.com/trustbank/index.html](http://emilymagnuson.com/trustbank/index.html)

有没有人有办法解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:01:58.277

我认为问题出在您的 .TabbedPanelsContentGroup 中：

> 将 padding-top 从 3px 更改为 0px。

如果我误解了您的查询，请告诉我。

# mysql - 不再能够通过套接字连接到 MySQL

> ID：14526183
> 
> 赞同：1
> 
> 时间：2013-01-25T16:35:07.010
> 
> 标签：mysql, ubuntu, lamp

我试图进行复制并将我的服务器设置为从属服务器。我首先使用更改权限

```
sudo chmod 777 /etc/mysql/my.cnf 
```

然后

```
sudo chown user:user -R /etc/mysql 
```

然后我尝试安装记事本，它崩溃了。重新启动服务器并安装 Jedit。最后我编辑了添加的 my.cnf 文件

```
server-id=1359126008 
```

在下面`[mysqld]`

在重新启动 mysql 然后重新启动服务器后，我收到了这个错误

```
Warning: mysql_connect(): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

现在我无法再连接了。该`mysqld.sock`文件也不存在于该文件夹中。

**更新**

```
user@ubuntu:~$ sudo service mysql start
start: Job failed to start
user@ubuntu:~$ sudo service mysql stop
stop: Unknown instance: 
user@ubuntu:~$ sudo service mysql status
mysql stop/waiting 
```

**更新 2**

来自 my.cnf 的位置：`log_error = /var/log/mysql/error.log`

日志中的所有现有行：

```
130125 10:38:09 [Note] /usr/sbin/mysqld: Normal shutdown

130125 10:38:09 [Note] Event Scheduler: Purging the queue. 2 events
130125 10:38:09  InnoDB: Starting shutdown...
130125 10:38:11  InnoDB: Shutdown completed; log sequence number 7759014
130125 10:38:11 [Note] /usr/sbin/mysqld: Shutdown complete 
```

**更新 3** 没有与 mysql 相关的运行。

```
user@ubuntu:~$ ps -A
  PID TTY          TIME CMD
    1 ?        00:00:00 init
    2 ?        00:00:00 kthreadd
    3 ?        00:00:00 ksoftirqd/0
    6 ?        00:00:00 migration/0
    7 ?        00:00:00 watchdog/0
    8 ?        00:00:00 migration/1
   10 ?        00:00:00 ksoftirqd/1
   11 ?        00:00:00 watchdog/1
   12 ?        00:00:00 migration/2
   14 ?        00:00:00 ksoftirqd/2
   15 ?        00:00:00 watchdog/2
   16 ?        00:00:00 migration/3
   18 ?        00:00:00 ksoftirqd/3
   19 ?        00:00:00 watchdog/3
   20 ?        00:00:00 cpuset
   21 ?        00:00:00 khelper
   22 ?        00:00:00 kdevtmpfs
   23 ?        00:00:00 netns
   24 ?        00:00:00 kworker/u:1
   25 ?        00:00:00 sync_supers
   26 ?        00:00:00 bdi-default
   27 ?        00:00:00 kintegrityd
   28 ?        00:00:00 kblockd
   29 ?        00:00:00 ata_sff
   30 ?        00:00:00 khubd
   31 ?        00:00:00 md
   32 ?        00:00:00 kworker/0:1
   35 ?        00:00:00 kworker/3:1
   36 ?        00:00:00 khungtaskd
   37 ?        00:00:00 kswapd0
   38 ?        00:00:00 ksmd
   39 ?        00:00:00 khugepaged
   40 ?        00:00:00 fsnotify_mark
   41 ?        00:00:00 ecryptfs-kthrea
   42 ?        00:00:00 crypto
   51 ?        00:00:00 kthrotld
   52 ?        00:00:00 scsi_eh_0
   53 ?        00:00:00 scsi_eh_1
   54 ?        00:00:00 kworker/u:2
   56 ?        00:00:00 binder
   75 ?        00:00:00 deferwq
   76 ?        00:00:00 charger_manager
   77 ?        00:00:00 devfreq_wq
  123 ?        00:00:01 kworker/3:2
  182 ?        00:00:00 scsi_eh_2
  227 ?        00:00:00 kdmflush
  229 ?        00:00:00 kdmflush
  249 ?        00:00:00 jbd2/dm-0-8
  250 ?        00:00:00 ext4-dio-unwrit
  259 ?        00:00:00 scsi_eh_3
  260 ?        00:00:00 usb-storage
  261 ?        00:00:00 scsi_eh_4
  262 ?        00:00:00 usb-storage
  277 ?        00:00:00 flush-252:0
  353 ?        00:00:00 upstart-udev-br
  355 ?        00:00:00 udevd
  453 ?        00:00:00 edac-poller
  487 ?        00:00:00 ttm_swap
  514 ?        00:00:00 kpsmoused
  535 ?        00:00:00 dbus-daemon
  541 ?        00:00:00 rsyslogd
  550 ?        00:00:00 bluetoothd
  581 ?        00:00:00 krfcommd
  592 ?        00:00:00 avahi-daemon
  600 ?        00:00:00 avahi-daemon
  619 ?        00:00:00 cupsd
  696 ?        00:00:00 kvm-irqfd-clean
  699 ?        00:00:01 kworker/2:3
  701 ?        00:00:00 kworker/0:3
  799 ?        00:00:00 upstart-socket-
  957 ?        00:00:00 dhclient
 1024 ?        00:00:00 winbindd
 1035 ?        00:00:00 modem-manager
 1040 ?        00:00:00 winbindd
 1047 ?        00:00:00 NetworkManager
 1058 ?        00:00:00 polkitd
 1098 ?        00:00:00 udevd
 1099 ?        00:00:00 udevd
 1125 tty4     00:00:00 getty
 1133 tty5     00:00:00 getty
 1139 tty2     00:00:00 getty
 1140 tty3     00:00:00 getty
 1144 tty6     00:00:00 getty
 1158 ?        00:00:00 acpid
 1168 ?        00:00:00 atd
 1169 ?        00:00:00 cron
 1174 ?        00:00:00 lightdm
 1175 ?        00:00:00 whoopsie
 1177 ?        00:00:00 irqbalance
 1237 tty7     00:04:31 Xorg
 1437 tty1     00:00:00 getty
 1445 ?        00:00:00 accounts-daemon
 1463 ?        00:00:00 console-kit-dae
 1584 ?        00:00:00 upowerd
 1676 ?        00:00:00 lightdm
 1757 ?        00:00:00 colord
 1844 ?        00:00:00 rtkit-daemon
 1960 ?        00:00:00 gnome-keyring-d
 1971 ?        00:00:00 gnome-session
 2006 ?        00:00:00 ssh-agent
 2009 ?        00:00:00 dbus-launch
 2010 ?        00:00:01 dbus-daemon
 2012 ?        00:00:00 at-spi-bus-laun
 2016 ?        00:00:00 dbus-daemon
 2019 ?        00:00:00 at-spi2-registr
 2033 ?        00:00:01 gnome-settings-
 2038 ?        00:00:00 gvfsd
 2042 ?        00:00:00 gvfsd-fuse
 2062 ?        00:00:00 pulseaudio
 2063 ?        00:00:00 gconf-helper
 2065 ?        00:00:00 gconfd-2
 2067 ?        00:00:00 dconf-service
 2068 ?        00:00:29 nautilus
 2072 ?        00:00:00 polkit-gnome-au
 2073 ?        00:00:00 bluetooth-apple
 2076 ?        00:00:00 nm-applet
 2078 ?        00:00:00 gnome-fallback-
 2090 ?        00:00:00 gvfs-udisks2-vo
 2094 ?        00:00:00 udisksd
 2109 ?        00:00:08 dropbox
 2115 ?        00:00:00 gvfs-afc-volume
 2122 ?        00:00:00 gvfs-gphoto2-vo
 2133 ?        00:00:00 gvfsd-trash
 2146 ?        00:00:00 gvfsd-burn
 2163 ?        00:00:01 bamfdaemon
 2178 ?        00:00:00 notify-osd
 2206 ?        00:00:00 sh
 2207 ?        00:00:01 gtk-window-deco
 2218 ?        00:06:56 compiz
 2247 ?        00:00:09 unity-panel-ser
 2249 ?        00:00:06 hud-service
 2260 ?        00:00:00 indicator-sound
 2262 ?        00:00:00 indicator-sessi
 2268 ?        00:00:00 indicator-print
 2273 ?        00:00:00 indicator-datet
 2275 ?        00:00:00 indicator-appli
 2277 ?        00:00:00 indicator-messa
 2304 ?        00:00:00 evolution-sourc
 2313 ?        00:00:00 goa-daemon
 2317 ?        00:00:00 geoclue-master
 2330 ?        00:00:00 ubuntu-geoip-pr
 2335 ?        00:00:00 telepathy-indic
 2341 ?        00:00:00 mission-control
 2348 ?        00:00:00 signon-ui
 2351 ?        00:00:00 zeitgeist-datah
 2357 ?        00:00:00 zeitgeist-daemo
 2363 ?        00:00:00 zeitgeist-fts
 2371 ?        00:00:00 cat
 2375 ?        00:00:07 firefox
 2403 ?        00:00:00 unity-webapps-s
 2421 ?        00:00:00 unity-applicati
 2423 ?        00:00:00 unity-files-dae
 2425 ?        00:00:00 unity-gwibber-d
 2427 ?        00:00:00 unity-music-dae
 2429 ?        00:00:00 unity-lens-phot
 2431 ?        00:00:00 unity-shopping-
 2433 ?        00:00:00 unity-lens-vide
 2514 ?        00:00:00 unity-musicstor
 2515 ?        00:00:00 unity-scope-gdo
 2543 ?        00:00:00 unity-scope-vid
 2573 ?        00:00:00 teamviewer
 2578 ?        00:00:00 wrapper
 2604 ?        00:00:38 TeamViewer.exe
 2607 ?        00:00:47 wineserver
 2611 ?        00:00:00 services.exe
 2632 ?        00:00:00 update-notifier
 2643 ?        00:00:00 system-service-
 2654 ?        00:06:38 TeamViewer_Desk
 2679 ?        00:00:00 deja-dup-monito
 2700 ?        00:00:00 gvfsd-metadata
 2825 ?        00:00:03 gnome-terminal
 2834 ?        00:00:00 gnome-pty-helpe
 2835 pts/0    00:00:00 bash
 3629 ?        00:00:00 apache2
 3636 ?        00:00:00 apache2
 3637 ?        00:00:00 apache2
 3638 ?        00:00:00 apache2
 3639 ?        00:00:00 apache2
 3640 ?        00:00:00 apache2
 3641 ?        00:00:00 apache2
 3644 ?        00:00:00 apache2
 3645 ?        00:00:00 apache2
 3646 ?        00:00:00 apache2
 3647 ?        00:00:00 apache2
 4089 ?        00:00:00 kworker/2:0
 4419 ?        00:00:08 java
 4465 ?        00:00:00 kworker/1:0
 4486 ?        00:00:00 kworker/1:2
 4552 ?        00:00:00 kworker/2:1
 4762 pts/0    00:00:00 ps 
```

**更新 4**

我无法让它工作。重新安装了mysql，现在它可以工作了。如果您担心数据库，mysql 给了我删除它们或保留它们的选项。我保留了它们，安装了 mysql，使用了与以前相同的 root 通行证，现在一切正常！！多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:47:06.697

让我担心的是

```
sudo chown user:user -R /etc/mysql 
```

我不信任任何其他用户，但`mysql`处理 MySQL 实例的用户

由于 mysql 已关闭，请执行以下操作：

```
sudo chown mysql:mysql -R /etc/mysql
service mysql start 
```

试试看 ！！！

# javascript - jQuery循环命令

> ID：14526185
> 
> 赞同：-4
> 
> 时间：2013-01-25T16:35:08.887
> 
> 标签：javascript, jquery

我怎样才能让这个动画从头开始连续重复？ [http://jsfiddle.net/philoman/RuX5d/8/](http://jsfiddle.net/philoman/RuX5d/8/)

```
$(document).ready(function() {
var i = 1, dir = 1, curFx = 'fadeIn';
var interval = setInterval(function () {
    if (i == 2 && $('#slide1').is(':visible')) {
        $('#slide1').fadeOut(6000);             
        return;
    }

    $('#slide'+ i)[curFx](1500);

    i = i + 1*dir;

    if (i == 10 || i == -1) {
        dir = (dir == 1)?-1:1;
        curFx = (curFx == 'fadeIn')?'fadeOut':'fadeIn';
    }        
}, 1500);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:40:36.717

使用异步递归。

```
$(document).ready(function me() {
    $("#slide1").fadeIn(100).delay(100).fadeOut(100, function () {
        (function startFade(slide, step) {
            if ((slide === 1) && (step === -1)) {
                setTimeout(me, 100);
            } else if (slide < 10) {
                $("#slide" + slide)[step === 1 ? "fadeIn" : "fadeOut"](100, function () {
                    startFade(slide + step, step);
                });
            } else {
                startFade(slide - step, -step);
            }
        }(2, 1));
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:40:08.653

我有一个较短的版本：

```
function animate(slide){
     slide.fadeIn(500, function() {
        var next = slide.next();
         if(next.length > 0){
              animate(next);
         }
     });
}

$(document).ready(function() {
    animate($('#slide1'));
}); 
```

演示：http: [//jsfiddle.net/RuX5d/6/](http://jsfiddle.net/RuX5d/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:38:06.940

制作一个回滚到开始的函数。

```
function loopback(){
...
   //inside your innermost fn:
   loopback();  
...
} 
```

# sql-server - 数据库项目警告

> ID：14526186
> 
> 赞同：0
> 
> 时间：2013-01-25T16:35:10.830
> 
> 标签：sql-server, visual-studio, visual-studio-2012, warnings, database-project

我已将现有数据库导入 Visual Studio 中的数据库项目。我收到了几种我想消除的警告：

*   数据库对象有很多对其他数据库名称的引用。例如，

    `SELECT * FROM [databaseA]..Test t1 INNER JOIN [databaseB]..Test t2 on t1.id = t2.id`

    有没有一种简单的方法来解决这些警告，或者，如果有必要，只是抑制这些警告？我不想为其他数据库创建单独的项目，因为它们是用于我们不涉及架构的自包含 3rd 方应用程序。

*   我们收到了一些关于在一些程序中使用 OPENROWSET 的警告。我知道 VS 在构建时无法安全地验证这些操作，但我想禁止这些警告。

作为参考，我们使用的是 VS 2012 Pro。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T14:19:13.363

您可以使用 SQLPackage.exe 为其他数据库创建一个 dacpac 文件（假设您使用的是 SQLProj 文件）。如果您使用的是 DBProj 文件，则需要使用 VSDBCMD.exe 创建 DBSchema 文件。将它们放在您的项目可以引用它们的地方并将它们添加为数据库引用。您不需要为它们创建单独的项目，但确实需要某种方式来表明这些数据库是有效的。

要抑制警告，您可以获取警告编号并调整文件的属性以抑制警告，或者您可以转到项目属性以抑制所有文件的警告。该列表可以 CSV 格式输入，因此可以抑制多个警告。

# php - $_REQUEST var 在发送后为空

> ID：14526187
> 
> 赞同：0
> 
> 时间：2013-01-25T16:35:18.153
> 
> 标签：php, javascript, xmlhttprequest

我正在为 wp 做一个 ajax 函数。但我总是得到响应 0。我看到了文件 admin-ajax.php 的代码并看到了这个：

```
if ( empty( $_REQUEST['action'] ) )
    die( '0' ); 
```

这是我的 js 函数 ajax。

```
function fnc(){

            var ajax=new  XMLHttpRequest();
            ajax.open("POST", "<?php echo get_site_url(); ?>/wp-admin/admin-ajax.php");

                ajax.onreadystatechange= function(){
                    if (ajax.readyState === 4) {
                        if (ajax.status === 200) {
                            alert(ajax.responseType);
                            alert(ajax.responseText);
                        } else {
                            alert('There was a problem with the request.');
                        }
                    }
                }
                ajax.send("action=some_function");

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:43:07.600

为了将`send`字符串用作表单数据，您可能需要添加以下标题：

```
ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); 
```

没有这个，PHP 不会将原始 POST 数据转换为`$_POST`/`$_REQUEST`变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T16:40:46.093

```
$.ajax({
          type:'POST',
          url:"<?php echo get_site_url(); ?>/wp-admin/admin-ajax.php",
          data:'', //  what you want to post
          success:function(data){
                    alert(data);
              });
             }
          });
        } 
```

尝试这个

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T16:55:17.430

```
If you want to use javascript and XMLHttpRequest this is the full way to do that :)

function ajax_post(){
// Create our XMLHttpRequest object
var ajax=new  XMLHttpRequest();

// Create data to send to our PHP file

var url = "xyz.php";
var fn = document.getElementById("a").value;
var ln = document.getElementById("b").value;
var variable = fn+" hello "+ln;
hr.open("POST", url, true);

// Set content type header  for sending url encoded variables

ajax.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

// Get the onreadystatechange event for the XMLHttpRequest
ajax.onreadystatechange = function() {
    if(ajax.readyState == 4 && ajax.status == 200) {
        var return_data = ajax.responseText;
            alert(ajax.return_data);
            // Send the data to PHP now... and wait for response to update the status div
           ajax.send(variable); // Actually execute the request    
    }
}

} 
```

# ios - 返回 UITableViewController 时关闭 UIWebView

> ID：14526192
> 
> 赞同：0
> 
> 时间：2013-01-25T16:35:31.190
> 
> 标签：ios, uiviewcontroller, uiwebview, uitableview

我有一个使用 UITableViewController 的应用程序，它调用内部带有 UIWebView 的 UIViewController。我的一切工作正常，除了当我单击表格单元格时，它会将我带到 UIViewController 并在里面打开相应的 weburl，但是当我返回 UITableViewController 时它不会关闭网站。它抵消了网站，所以我知道我回到了 tableview 但网站仍然可见。我错过了什么？

WebViewController.m

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

}

-(void)viewDidAppear:(BOOL)animated {
webView2.delegate = self;
webView2.backgroundColor = [UIColor clearColor];
NSString *urlAddress = self.magURL;
webURL = [NSURL URLWithString:urlAddress];

requestObj = [NSURLRequest requestWithURL:webURL];
[webView2 loadRequest:requestObj];
}

-(void)viewDidDisappear:(BOOL)animated
{
webView2.delegate = nil;
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO]; 
```

}

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
}

- (void)webViewDidStartLoad:(UIWebView *)webView
{
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
} 
```

TableViewController.m - (void)viewDidLoad { [super viewDidLoad];

```
magazineArray = [[NSMutableArray alloc] init];
[magazineArray addObject:@"Joyce Meyer"];
[magazineArray addObject:@"Perry Stone"];
[magazineArray addObject:@"Robb Thompson"];
[magazineArray addObject:@"R.W. Schambach"];
[magazineArray addObject:@"T.D. Jakes"];
[magazineArray addObject:@"Reinhard Bonnke"];
[magazineArray addObject:@"Pilot"];

self.navigationItem.title = @"Magazines";

magazineURL = [[NSMutableArray alloc] init];
[magazineURL addObject:@"http://mysolutionsmagazine.com/solutions/2013/magazine"];
[magazineURL addObject:@"http://google.com"];
[magazineURL addObject:@"http://smithmediagroup.com"];
[magazineURL addObject:@"http://smgvoices.com"];
[magazineURL addObject:@"http://facebook.com/smithmediagroup"];
[magazineURL addObject:@"http://twitter.com/smgvoices"];
[magazineURL addObject:@"http://youtube.com/smgvoices"];

MagazineURLViewController *urlController = [[MagazineURLViewController alloc] init];
urlController.urlHolder = newURLHolder;

}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{
newURLHolder = [magazineURL objectAtIndex:indexPath.row];
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(50, 100, 690, 750)];

NSURL *webURL2 = [NSURL URLWithString:newURLHolder];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:webURL2];

[webView loadRequest:requestObj];
[self.view addSubview:webView];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

if ([[segue identifier] isEqualToString:@"Cell2"]){
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    newURLHolder = magazineURL[indexPath.row];
    [[segue destinationViewController]setMagURL:newURLHolder];

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:29:53.407

您正在将 webviewcontriller 的视图作为子视图添加到 tableviewcontroller 的视图中。它可能看起来没有任何问题，我认为这是苹果的严格禁止（iPad 是一个例外，因为它有你可以使用的 splitviewcontroller）。

当您将其添加为子视图时，您的默认视图控制器方法（viewwill/didappear 等）将不会被调用。

要么将它作为一个新的视图控制器推送，要么以模态方式呈现它，当你弹出/关闭你的 webview 控制器时，一切都会正常工作。

如果您不想以模态方式推送或呈现，只需在 tableviewController 中使用 webview，实现 webView 的委托方法，将其添加为子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:44:18.177

与其将 webview 添加为子视图，不如推送 webview：

```
[self.navigationController pushViewController:webview animated:YES]; 
```

当您想关闭 web 视图时：

```
[self.parentViewController.navigationController popViewControllerAnimated:YES];] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:58:36.837

目前看起来您从未调用您在单元格选择上创建 UIWebView 并将其添加到当前视图的 webViewController。所以我的问题是你有没有说过 removeFormSuperview？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T16:58:38.950

看起来您正在使用情节提要。问题似乎在于不必要的代码

`tableView:didSelectRowAtIndexPath:`

您不必将 Web 视图添加到当前视图中，您需要在`@"Cell2"`视图控制器中包含该代码。

看起来你快到了，你正在将一个 URL 传递给下一个视图控制器`prepareForSegue`

您应该有另一个视图控制器来读取 magURL 属性并显示该网页。

表格视图控制器中更像这样的东西：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{
  newURLHolder = [magazineURL objectAtIndex:indexPath.row];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  if ([[segue identifier] isEqualToString:@"Cell2"]){
      [[segue destinationViewController] setMagURL:newURLHolder];
  }
} 
```

然后在你的新视图控制器中

```
- (void)viewDidLoad
{
// if webview is created in the storyboard you won't need to `init` it here. Just use [self webView]
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(50, 100, 690, 750)];

NSURL *webURL2 = [NSURL URLWithString:[self magURL]];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:webURL2];

[webView loadRequest:requestObj];
[self.view addSubview:webView];
} 
```

# c# - 从 C# 列表中提取唯一项的简单方法 与该类型项目的总数

> ID：14526200
> 
> 赞同：2
> 
> 时间：2013-01-25T16:36:00.587
> 
> 标签：c#, linq, xna

如果这是不正确的地方，请道歉；我是一个非常新的爱好者程序员。

我目前在业余时间从事一个小型自上而下的射击游戏，只不过是一个简单的自我驱动项目来学习和娱乐。我使用 C# 和 XNA 作为框架，我试图通过选择 gameObjects 添加到库存中来为游戏添加一些变化。

目前我有一个`List<GamePlayObjects>`“WorldObjects”，我有一个`ObjectManager`类来管理所有对象的更新、碰撞和绘制功能，我对我目前所拥有的感到满意。在与 GamePlayObject 碰撞时（例如小行星爆炸后的一小块铁矿石），它会从主列表“WorldObjects”中删除该对象并将其添加到另一个名为`List<GamePlayObjects> inventory`

现在我要做的是在屏幕上绘制一个小区域，其中包含项目精灵和我收集的该项目的总数。我对绘图方面并不真正感兴趣，更多的是从库存中提取数据。

我已经阅读了几个线程，可能`HashSet`用于从我的库存中获取唯一项目，然后从 中提取每个项目的总数`HashSet`，但我现在很难理解这一点，因此我访问这里寻求帮助。

**我的代码示例以及我试图实现的目标。**

我有一个我所有 WorldObjects 的列表，每个世界对象都是一个类，其中包含与该 worlObject 相关的所有内容。

```
private List<GamePlayObject> gameObjects = new List<GamePlayObject>(); 
```

当一个对象，让我们说“玩家”与另一个对象“铁矿石”发生碰撞时，我从以下位置移除 IronOre 世界对象：

```
private List<GamePlayObject> gameObjects = new List<GamePlayObject>(); 
```

并将其添加到一个名为 Inventory 的新列表中

```
private List<GamePlayObject> playerInventory = new List<GamePlayObject>(); 
```

现在，随着越来越多的对象被收集并添加到我的库存中，我想提取信息并将有关我的库存的信息显示到屏幕上。

例如，在我的屏幕右侧，我想显示我在我的库存中拥有的项目列表以及每个项目的总量，这些数据应该从我的库存列表中获取。

所以它可能看起来像这样：

```
Iron Ore x 3
Steel x 10
Gold x 18
Uranium x 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:39:42.197

> 现在我要做的是在屏幕上绘制一个小区域，其中包含项目精灵和我收集的该项目的总数。我对绘图方面并不真正感兴趣，更多的是从库存中提取数据。

听起来您想使用 linq 计数。

```
InventoryObjects.Count(inventoryObject => inventoryObject.Type == ObjectTypes.Asteroid);
WorldObjects.Count(worldObject => worldObject.Type == ObjectTypes.Asteroid); 
```

你可以把它想象成 SQL

SELECT COUNT([dbo].[World Objects].[Object]) WHERE [dbo].[World Objects].[Type]='Asteroid'

但是，如果您想提取一个项目并将其添加到另一个列表中，您应该听取 Reed Copsey 的建议。

* * *

**编辑**

所以假设你有一个`Player`类，那么它的结构可能是这样的，

```
Public Class Player {
    public List<GamePlayObject> Inventory {get; set;}
} 
```

你也有一个`World`类，也许它有类似的，

```
Public Class World {
    public List<GamePlayObject> Objects {get; set;}
} 
```

你`GamePlayObject`可能看起来像这样，

```
Public Class GamePlayObject {
    public ObjectType Type {get; set;}
} 
```

所以假设你已经初始化了你的世界并且它有几个对象，并且你知道你想从所说的世界中删除哪个对象。就资源和优化而言，这肯定不是最好的方法，（这将是 Reed Copsey 的答案派上用场的地方）但是，你可以......

```
var targetObject = World.Where(gamePlayObject => (DesiredConditions))
World.Objects.Remove(targetObject);
Player.Inventory.Add(targetObject); 
```

哪里`DesiredConditions`可能是这样的`gamePlayObject.IsCollidedWith`

完成此操作后，您可以查询`Player`' 库存。

```
var IronCount = Player.Inventory.Count(gamePlayObject => gamePlayObject.Type == ObjectType.Iron); 
```

希望这可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:39:59.137

您可以使用`List<T>`, 并使用`List<T>.Remove`. 但是，使用`List<T>`这样的问题是`Remove`必须搜索整个列表，一次一个项目，才能找到要删除的项目。这也将导致出现大副本，因为您删除的元素之后的元素需要在内部数组中向下移动。

但是，像 之类的集合`HashSet<T>`可以非常快速地找到并删除项目，而无需副本。这需要您的类型 implement `GetHashCode`，但如果您总是想要独特的项目，效果会更好。

对于您的两个收藏，一个潜在的选择是使用 a `Dictionary<GamePlayObject, int>`，这将允许您快速查找并更改该类型对象在世界和库存中的数量。同样，这将要求您的`GamePlayObject`类覆盖`object.GetHashCode`and `object.Equals`，并实现[`IEquatable<GamePlayObject>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:23:58.233

It sounds to me that you probably should not be using a list. Meaning why iterate to and from one list to the order when what it seems like is you need to keep counts of the different gameplay objects. I am presuming you have a fixed set of game play objects and they are uniquely named. You can have a fixed dictionaryof elements where you add or subtract counts meaning you would probably be doing something like this gameObjects ["ironore"]++ or playerInventory ["ironore"]--. And then you can use to linq to show all keys whose values are greater than zero.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T18:24:57.917

这听起来像是一个用 linq 解决的好问题！如果您是 linq 新手，那么我会为您提供一个很好的资源 - 101 个 linq 示例：[http ://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

针对您的特定问题！由于`List<T>`implements `IEnumerable<T>`，您可以在其上运行 linq 查询。最有趣的是分组运算符。

如果您的`GamePlayObject`班级有一个`Type`属性，那么您可以执行以下操作：

```
var items = from o in playerInventory
    group o by o.Type into g
    select new { ItemType = g.Key, Items = g };
foreach (var g in items)
{
    string s = string.Format("{0} x {1}", g.ItemType.ToString(), g.Items.Count());
    //now do whatever you want with the string, which will contain, eg, Iron Ore x 3
} 
```

# twitter-bootstrap - 引导表单输入字段对齐

> ID：14526203
> 
> 赞同：3
> 
> 时间：2013-01-25T16:36:05.277
> 
> 标签：twitter-bootstrap

我有以下代码

```
<form id="editProfileForm" class="form-horizontal span8"  method="post">  
    <div class="control-group">
        <label class="control-label" for="inputSubject">Subject</label>
        <div class="controls">
            <input type="text" id="inputSubject" class="span8" >
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="inputTags">Tags</label>
        <div class="controls">                            
            <input type="text" id="inputTags" class="span3">  
        </div>        
    </div> 

    <div class="control-group">
        <label class="control-label" for="inputAccess">access</label>
        <div class="controls">                            
            <input type="text" id="inputAccess" class="span3">  
        </div>        
    </div> 
```

我得到如下表格![在此处输入图像描述](../Images/ecddfc6ea1d15ac5b10533b5da456c73.png)

有人可以建议我如何得到像下面这样吗？谢谢你的帮助

![在此处输入图像描述](../Images/8f0cdb781429f4b9e5d0839ae978e3a7.png)

JS 小提琴链接[http://jsfiddle.net/kLuB3/331/](http://jsfiddle.net/kLuB3/331/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:29:03.840

`form-inline`会比`form-horizontal`.

试试这个：

```
<form id="editProfileForm" class="span8 form-inline" method="post">
    <div class="row">
        <label class="span1" for="inputSubject">Subject</label>
        <input type="text" id="inputSubject" class="span7">
    </div>
    <div class="row">
        <label class="span1" for="inputTags">Tags</label>
        <input type="text" id="inputTags" class="span3">
        <label class="span1" for="inputAccess" id="inputAccessLabel">access</label>
        <input type="text"id="inputAccess" class="span3">
    </div>
</form> 
```

使用这个 CSS：

```
#inputTags, #inputAccess {
    float: left !important;
}
#inputAccessLabel {
    margin-left: 35px;
    margin-right: 5px;
} 
```

[jsFiddle](http://jsfiddle.net/kLuB3/335/)

# database - oAuth 2.0 数据库结构

> ID：14526207
> 
> 赞同：8
> 
> 时间：2013-01-25T16:36:20.723
> 
> 标签：database, oauth

我希望在我当前的应用程序中实现 oAuth。什么是存储所需信息的良好数据库结构，例如令牌等时代。有什么标准吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-09T21:11:50.443

我也在考虑同样的事情。一般来说，我正在做：

```
user_oauth_info
-------------------------------
id (int auto-inc)
user_id (int)
oauth_provider (varchar 20)
acccess_token (varchar 40)
refresh_token  (varchar 40)   
expiry_date (datetime) 
```

一个 refresh_token 由 SalesForce 提供；不会过期，用于获取刷新的 access_tokens。但是，如果您的回调 URL 是移动设备，它们只会给您一个，这很烦人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T07:36:20.427

您可以从 VS2012 对其 MVC 框架的建议开始：

**网页_OAuthMembership**

```
Provider nvarchar(30) (clustered primary key)
ProviderUserId nvarchar(100) (clustered primary key)
UserId int 
```

**网页_会员**

```
UserId int (Primary Key)
CreateDate datetime
ConfirmationToken nvarchar(128)
IsConfirmed bit
LastPasswordFailureDate datetime
PasswordFailuresSinceLastSuccess int
Password nvarchar(128)
PasswordChangedDate datetime
PasswordSalt nvarchar(128)
PasswordVerificationToken nvarchar(128)
PasswordVerificationTokenExpirationDate datetime 
```

然后定义您自己的用户表，例如：

```
UserID int (Primary Key)
UserName nvarchar(80)
Name nvarchar(80)
Surname nvarchar(80) 
```

我真的没有理由这样做，但我猜想出这个架构的微软人比我更了解这个，所以我认为这是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T05:08:38.597

[此默认方案数据库 oauth2](https://github.com/spring-projects/spring-security-oauth/blob/master/spring-security-oauth2/src/test/resources/schema.sql)

我用这个和弹簧靴

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-05-17T08:31:17.710

我认为谷歌 oAuth 教程会给你帮助

[https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

# android - 确定gridview中的空网格占位符，并将触摸到的网格放置在空网格占位符中

> ID：14526208
> 
> 赞同：0
> 
> 时间：2013-01-25T16:36:22.210
> 
> 标签：android, drag, android-gridview

我有一个关于 GridView 实现的问题。在我的项目中创建的 GridView 是一个 3 X 3 的网格视图。每个网格由随机数组成。这个 gridview 不是一个完全成熟的 3 X 3 网格，而是 gridview 中只有 8 个网格。原因是我正在创建一个**滑动游戏拼图**，其中用户触摸空网格占位符旁边的网格并且触摸的网格移动到空网格占位符并且当前网格变为空。这为其他网格在被触摸时放置在这里提供了空间。请参阅[滑动游戏](http://mypuzzle.org/sliding)
以下是此代码：
**活动**

```
 public class SlidingGameActivity extends Activity {
    GridView gridView;
    GridAdapter adapter;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_sliding_game);
        gridView = (GridView)findViewById(R.id.gridView);
        adapter = new GridAdapter(this);
        gridView.setAdapter(adapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_sliding_game, menu);
        return true;
    }    } 
```

**适配器**

```
public class GridAdapter extends BaseAdapter {
    Context context;
    LayoutInflater mInflater;
    int num ;
    Integer[] numbers = {1,2,3,4,5,6,7,8} ;
    public GridAdapter(Context context){
        this.context = context;
        mInflater = LayoutInflater.from(context);
        numbers = storeRandomNumbers(8);

    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return numbers.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        GridDragListener dragListener = new GridDragListener();
        GridTouchListener touchListener = new GridTouchListener();
        if(convertView == null){
            convertView = mInflater.inflate(R.layout.block, null);
            holder = new ViewHolder();
            holder.block =    (RelativeLayout)convertView.findViewById(R.id.block);
            holder.img = (ImageView)convertView.findViewById(R.id.blue_rect);
            holder.textView = (TextView)convertView.findViewById(R.id.number);

            convertView.setTag(holder);
        }else{
            holder = (ViewHolder)convertView.getTag();
        }
        holder.block.setOnTouchListener(touchListener);
        holder.block.setOnDragListener(dragListener);
        holder.img.setImageResource(R.drawable.blue_rectangle);
        holder.textView.setText(String.valueOf(numbers[position]));
        return convertView;
    }

    static class ViewHolder{
        RelativeLayout block;
        ImageView img;
        TextView textView;
    }

    public ArrayList<Integer> randomize(int size){

        Random random = new Random();
        ArrayList<Integer> generated = new ArrayList<Integer>();
        for(int i = 0; i < size; i++){
            while(true){
                Integer next = random.nextInt(size) + 1;
                if(!generated.contains(next)){
                    generated.add(next);
                    break;
                }
            }
        }
        return generated;

    }

    public Integer[] storeRandomNumbers(int size){
        ArrayList<Integer> list = randomize(size);
        Collections.shuffle(list);
        Integer[] nums = new Integer[size];
        list.toArray(nums);
        return nums;

    }

} 
```

**触摸监听器**

```
public class GridTouchListener implements View.OnTouchListener{

    @Override
    public boolean onTouch(View view, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            ClipData data = ClipData.newPlainText("", "");

            DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);

            view.startDrag(data, shadowBuilder, view, 0);
            view.setVisibility(View.VISIBLE);
            return true;
          } else {
              view.setVisibility(View.VISIBLE);

              return false;
          }
    }

} 
```

**我的问题**
1\. 如何确定 gridview 中的空网格占位符？
2.如何将触摸到的网格放置在空网格占位符中？

请参考我提供的代码。如果有人实现了这个想法并有自己的代码或任何想法或建议，请提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:41:34.367

> 1.  如何确定gridview中的空网格占位符？

你真的不需要确定那个位置，你可以简单地监控那个位置。例如，您的适配器可能有一个`int`表示空单元格位置的字段。最初这个字段将是`8`（我假设最后一个单元格`GridView`在开始时是空的）。每当空单元格的位置发生变化（例如由于拖动）时，`int`使用新位置更新该字段。当您需要知道空单元格位置时，只需查看该 int 字段即可。

> 1.  如何将触摸的网格放置在空网格占位符中？

我假设您想在用户将触摸的视图拖到空单元格上时执行此操作。当您开始拖动时，视图将收到`DragEvents`（我看到您设置了 a `OnDragListener`）。知道空单元格的位置（以及相应的它在 中的视图`GridView`），您可以`DragEvent`使用`ACTION_DROP`. 发生这种情况时，将拖动视图的数据与空单元格数据交换并调用`notifyDataSetChanged()`.

另外，请记住，您的适配器当前没有空单元格，因为在支持它的数组中有 8 个数字（可能不是最佳选择，因为您需要以某种方式表示一个空单元格）。您需要有 9 个值，以便我们有空间交换空单元格。

# sql - 从 dd-mmm-yyyy 转换日期类型

> ID：14526210
> 
> 赞同：0
> 
> 时间：2013-01-25T16:36:26.463
> 
> 标签：sql, oracle, date, type-conversion, case

表格是耐心的，日期类型的格式为 dd-mon-yyyy，所以今天是 25-jan-2013。我正在尝试比较出生日期以确定某人的年龄组。目前我有：

```
SELECT patient.last_name, CASE 
WHEN patient.birthdate > '01-jan-1988' THEN '1-25'
WHEN  patient.birthdate > '01-jan-1963' THEN '25-50'
WHEN  patient.birthdate > '01-jan-1938' THEN '50-75'
ELSE '75+'
END
AS "Age Range"
FROM patient; 
```

我得到了正确的年龄范围但我不想硬编码它们。IE 做 currentdate 减去 25 年等。唯一的问题是我不知道如何转换我的日期时间以进行比较。我想使用 mm-dd-yyyy 我觉得这应该相对容易，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:47:43.667

使用数学：

```
SELECT patient.last_name, 
       CASE 
         WHEN patient.birthdate < SYSDATE-365 THEN '0-1'
         WHEN patient.birthdate < SYSDATE-9132 AND patient.birthdate > SYSDATE-365 THEN '1-25'
         WHEN patient.birthdate < SYSDATE-18263 AND patient.birthdate > SYSDATE-9132 THEN '25-50'
         WHEN patient.birthdate < SYSDATE-27394 AND patient.birthdate > SYSDATE-18263 THEN '50-75'
         ELSE '75+' 
       END AS "Age Range"
  FROM patient; 
```

当然，由于闰年，错误将是〜1天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:48:03.337

参考 DATAADD 我假设您使用 SQL Server。如果列是日期或日期时间类型，则字符串格式只是一个表示，您可以毫无问题地使用 DATEADD。

但是请注意使用 GETDATE() 取决于当前日期的公式，在这种情况下可能会出现性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:57:25.673

我们需要知道您使用的是什么 RDBMS。

如果您使用的是 MS SQL Server，则可以使用[`CONVERT()`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)将此格式更改为日期时间。

```
SELECT '12-mar-1980', CONVERT(datetime,'12-mar-1980',106) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T17:05:26.813

在 Sql-Server 中；

```
SELECT patient.last_name,
    case    
    when datediff(year,patient.birthdate, getdate()) < 26 
               then '1-25'
    when datediff(year,patient.birthdate, getdate()) 
               between 26 and 50 then '26-50'
    when datediff(year,patient.birthdate, getdate()) < 76 
               then '51-75'
    else '75+' end [Age Range]
FROM patient 
```

# c# - 如何创建一个在字符串后返回数字的正则表达式模式 - C#

> ID：14526217
> 
> 赞同：0
> 
> 时间：2013-01-25T16:36:47.557
> 
> 标签：c#, regex

我正在尝试创建一个返回结果的模式，如下所示：

```
Help # 7256
Help # 83930
ph  # 7222
this is a test example
Help # 029299
New # 92929 
```

输出 ：

```
Help # 7256 
Help # 83930 
Help # 029299 
```

以 Help 开头的任何内容，后跟 # 符号，然后是 3 、 4 、 5 位数值

我尝试过这样的事情

```
Regex pattern = new Regex(@"(Help #) (^|\D)(\d{3, 4,5})($|\D)"); 
```

有人可以帮我创建这个模式吗？（在 C# 中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:40:50.390

```
/^Help\s*#\s*(\d{3,5})/gm 
```

[**演示**](http://regex101.com/r/tV9tB6)

*我应该补充一点`Help # 029299`，即使它包含 6 个字符，它也与 OP 中指定的一样匹配。*

如果您**只想**匹配 3 到 5 个字符，可以这样做：

```
/^Help\s*#\s*(\d{3,5})\b/gm 
```

[**演示**](http://regex101.com/r/yL4hM6)

**注意**：如果您只想匹配“ `Help[SPACE]#[SPACE]number`”，则只需删除所有`\s*`的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:40:36.173

一个简单的解决方案，假设您想要获取所有以开头的行`Help #`（不管它后面是什么），并且输入文件的格式是一致的：

```
if (currentLine.StartsWith(@"Help #"))
{
    // Do something with the line
} 
```

[String.StartsWith](http://msdn.microsoft.com/en-us/library/baketfxw.aspx)方法参考。

如果您想要正则表达式解决方案，这里是正则表达式（在文字字符串中）：

```
@"^Help #\s+(\d+)" 
```

这可以与[Regex.Match(String)](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)一起使用。您可以从捕获组 1 中选择号码。这个号码只会匹配以 开头的行，`Help #`后跟任意数量的空格，然后是至少 1 个数字。请注意，仅当您逐行扫描文件时才可以使用此正则表达式。

如果您必须将其限制为 3-5 位数：

```
@"^Help #\s+(\d{3,5})" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:56:05.537

对于 C#，试试这个：

```
var list = new string[] { 
    "Help", "Help # 7256", "Help # 83930", 
    "ph # 7222", "this is a test example", 
    "Help # 029299", "New # 92929",
    "Help # 7256 8945", "Help # 83930 8998 787989"
};

// bear in mind that the $ at the end matches only these strings
// if you want it to match something like Help # 1284 12841 0933 SUBJECT HERE"
// then remove the $ from the end of this pattern
const string pattern = @"^(Help)\s#\s(\d{3,6})\s?(\d{3,6})?\s?(\d{3,6})?$";

var regex = new Regex(pattern);
foreach (string s in list)
{
    if (regex.Match(s).Success)
        Console.WriteLine(s);
}
Console.WriteLine("Done.");
Console.ReadKey(); 
```

输出：

```
Help # 7256
Help # 83930
Help # 029299
Help # 7256 8945
Help # 83930 8998 787989 
```

# android - 发生丢弃时一个视图排除另一个视图

> ID：14526218
> 
> 赞同：0
> 
> 时间：2013-01-25T16:36:48.343
> 
> 标签：android, drag-and-drop

在过去的几天里，我一直在努力使用这个程序。我面临的问题是关于排除另一个视图的视图的放置事件。该程序应该做的是，单击一个按钮，创建尽可能多的 ImageButtons，并且它们都可以拖放到屏幕上的任何位置。但是，他创建了第一个视图并创建了第二个，但是当我拖动第二个 ImageButton 时，创建的第一个已从屏幕中删除。

这是XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/relative_main"
    tools:context=".WhyItActivity" >

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="add button"
    android:onClick="addButton"  />
 </RelativeLayout> 
```

下面是负责的java活动

```
public class WhyItActivity extends Activity {

private RelativeLayout relative;
private LayoutParams params;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_why_it);

    params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    relative = (RelativeLayout)findViewById(R.id.relative_main);

    // all the screen be a dropping area
    relative.setOnDragListener(new View.OnDragListener() {

        @Override
        public boolean onDrag(View view, DragEvent event) {

            View dragView = (View) event.getLocalState();
            RelativeLayout layout = (RelativeLayout) view;

            switch (event.getAction()) {
            case DragEvent.ACTION_DRAG_STARTED:
                break;
            case DragEvent.ACTION_DRAG_ENTERED:
                break;
            case DragEvent.ACTION_DRAG_EXITED:
                break;
            case DragEvent.ACTION_DROP:

                int right = (int)event.getX(); 
                int top = (int)event.getY(); 
                params.setMargins(right, top, 0, 0);
                layout.removeView(dragView);
                layout.addView(dragView, params);
                // set back the visibility
                dragView.setVisibility(View.VISIBLE);
                break;

            case DragEvent.ACTION_DRAG_ENDED:
                break;
            default:
                break;
            }

            return true;
        }
    });
}

/** OnClick */
public void addButton(View v){
    // params for centralizing the image button
    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.CENTER_IN_PARENT);
    // new object
    ImageButton imgBtn = new ImageButton(this);
    imgBtn.setImageDrawable(getResources().getDrawable(R.drawable.ic_launcher));
    relative.addView(imgBtn, params);
    // letting the view be dragged around the screen
    imgBtn.setOnLongClickListener(new View.OnLongClickListener() {

        @Override
        public boolean onLongClick(View view) {
            ClipData data = ClipData.newPlainText("", "");
            DragShadowBuilder builder = new View.DragShadowBuilder(view);
            view.startDrag(data, builder, view, 0);
            // let the view be invisible while dragging the object
            view.setVisibility(View.INVISIBLE);
            return true;
        }
    });

} 
```

所以，问题是......我在哪里搞砸？我创建了一个新对象，如果它只是屏幕上的一个视图，它会工作得很好。

感谢您到目前为止的阅读，并且可能能够提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:12:51.733

一个愚蠢但严重的错误。

添加这一行

```
params = params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                            LayoutParams.WRAP_CONTENT); 
```

多于

```
params.setMargins(right, top, 0, 0); 
```

正如您所看到的，只有一个 LayoutParam 实例您一直分配给您的所有视图，因此最终出现在一堆视图中。

如果解决，请标记为***已接受。***谢谢。

# user-input - 用 C# 构建一个问答游戏

> ID：14526224
> 
> 赞同：1
> 
> 时间：2013-01-25T16:37:30.063
> 
> 标签：user-input

请原谅我，因为我是 c sharp 的新手，而且一般是编程。我正在尝试制作一个问答游戏，并希望有人能指出我正确的方向。

所以这里的程序会做......当用户启动程序时，他/她有两个选择：

1.  创建一个类别，例如历史、家庭、足球……等等。
2.  要玩游戏，此时用户将选择一个先前创建的类别，从中会出现问题。

因此，如果我是用户，并且单击“创建新类别”，我将进入一个可以执行此操作的屏幕。我输入“家庭”。现在我可以选择创建家庭子类别。例如，子类别可能是我的家庭成员，所以我可以有 Bobby、Mike、Suzy、妈妈和爸爸。

创建这些子类别后，我可以单击其中任何一个，然后输入有关该特定子类别的问题。如果我点击爸爸，我会列出一系列问题，例如“爸爸是哪一年出生的？”、爸爸最喜欢的食物是什么？“爸爸在哪里工作？”等等。对于每个问题，我都会输入答案。

所以在制作完类别和子类别后我回到主页面点击“玩游戏”，然后选择“家庭”类别。游戏开始时会从子类别中随机选择，并随机提问。

例如，程序选择爸爸，在一个大文本框中显示“爸爸”。在大文本框下方是程序从子类别“爸爸”中选择的问题。如果它询问“爸爸最喜欢的食物是什么”，那么用户必须输入“炖牛肉”。回答完，判断对错后，程序会随机选择另一个子类别，以此类推，以此类推

我正在为这个项目使用 Visual Studio，我知道如何设置用户界面，但我似乎对用户数据感到困惑。我需要将用户输入存储在数据库中吗？如果是这样，我使用什么过程来调用信息以便程序访问它并在游戏中实现它？我是否将其存储为列表、数组、集合？如果是这样，我需要做什么才能将这些列表、数组或集合重新实现到程序代码中？

我真的希望能用文字解释我需要采取哪些步骤来创建这个程序。就像我说的，我是新手。因此，如果您能给我一个步骤列表，我将从我的 c# 书籍中收集这些步骤的相关说明。任何帮助深表感谢。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-20T12:25:41.057

如果您仍然希望在重新启动程序时保留这些问题，则必须将它们存储在某个地方（内存中除外）。
创建一个问题类来存储问题和可能的答案，......
当用户创建一个新问题时，您从该类中创建一个新对象，其中包含用户输入的信息。然后您必须将此问题存储在某处. 最好的解决方案可能是数据库。
创建一个数据库，您可以在其中插入用户创建的所有问题。

当用户想要进行测验时，您可以从所选类别中查询所有问题并将它们存储在内存中（使用类似 DataTable 的东西）。
然后，您可以从表格中随机选择一个问题。
应该就是这样。
谷歌以下主题以获取更多信息：数据库、sql、C# 数据库、DataTable、...

# c++ - 获取 eigen::selfadjointView 的上三角形 ()

> ID：14526225
> 
> 赞同：0
> 
> 时间：2013-01-25T16:37:30.833
> 
> 标签：c++, eigen

我有这个工作正常：

```
MatrixXf Sig(p,p);
Sig.selfadjointView<Lower>().rankUpdate(xSub.adjoint()); 
```

现在，我还需要获取`Sig`. [这个](http://forum.kde.org/viewtopic.php?f=74&t=109729&sid=b7152c9f2bb0531d3b568275e856aa6b)答案似乎建议做

```
Sig.triangularView<StrictUpper>()=Sig.adjoint().triangularView<StrictUpper>(); 
```

但是这样做会导致混乱——或者编译器称之为：

```
DetMCD_1.cpp: In function ‘float CStep(const MatrixXf&, Eigen::VectorXi&, const int&, const int&)’:
DetMCD_1.cpp:263:21: error: ‘StrictUpper’ was not declared in this scope
DetMCD_1.cpp:263:34: error: no matching function for call to ‘Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001>::triangularView()’
DetMCD_1.cpp:263:34: note: candidates are:
/home/kaveh/R/x86_64-pc-linux-gnu-library/2.15/RcppEigen/include/Eigen/src/Core/MatrixBase.h:248:79: note: template<unsigned int Mode> typename Eigen::MatrixBase<Derived>::TriangularViewReturnType<Mode>::Type Eigen::MatrixBase::triangularView() [with unsigned int Mode = Mode, Derived = Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001>, typename Eigen::MatrixBase<Derived>::TriangularViewReturnType<Mode>::Type = <type error>]
/home/kaveh/R/x86_64-pc-linux-gnu-library/2.15/RcppEigen/include/Eigen/src/Core/MatrixBase.h:249:84: note: template<unsigned int Mode> typename Eigen::MatrixBase<Derived>::ConstTriangularViewReturnType<Mode>::Type Eigen::MatrixBase::triangularView() const [with unsigned int Mode = Mode, Derived = Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001>, typename Eigen::MatrixBase<Derived>::ConstTriangularViewReturnType<Mode>::Type = <type error>]
DetMCD_1.cpp:263:78: error: no matching function for call to ‘Eigen::Transpose<const Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001> >::triangularView() const’
DetMCD_1.cpp:263:78: note: candidates are:
/home/kaveh/R/x86_64-pc-linux-gnu-library/2.15/RcppEigen/include/Eigen/src/Core/MatrixBase.h:248:79: note: template<unsigned int Mode> typename Eigen::MatrixBase<Derived>::TriangularViewReturnType<Mode>::Type Eigen::MatrixBase::triangularView() [with unsigned int Mode = Mode, Derived = Eigen::Transpose<const Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001> >, typename Eigen::MatrixBase<Derived>::TriangularViewReturnType<Mode>::Type = <type error>]
/home/kaveh/R/x86_64-pc-linux-gnu-library/2.15/RcppEigen/include/Eigen/src/Core/MatrixBase.h:249:84: note: template<unsigned int Mode> typename Eigen::MatrixBase<Derived>::ConstTriangularViewReturnType<Mode>::Type Eigen::MatrixBase::triangularView() const [with unsigned int Mode = Mode, Derived = Eigen::Transpose<const Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001> >, typename Eigen::MatrixBase<Derived>::ConstTriangularViewReturnType<Mode>::Type = <type error>]
make: *** [DetMCD_1.o] Error 1 
```

我的问题是：鉴于我有 的下三角部分`Sig`，如何说服 eigen 将完整矩阵归还给我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:28:13.083

这是因为有错字，它是 StrictlyUpper，而不是 StrictUpper。请参阅相应的[文档](http://eigen.tuxfamily.org/dox-devel/classEigen_1_1MatrixBase.html#a90150a6deb18826cee5ece716663358a)。以下两行是等价的：

长版：

```
M.triangularView<StrictlyUpper>()=M.adjoint().triangularView<StrictlyUpper>(); 
```

精简版：

```
M.triangularView<StrictlyUpper>()=M.adjoint(); 
```

请，也不是在大多数情况下您不需要显式计算上三角部分。

# mysql - 使用包含 mysql 数据的 php 发送电子邮件

> ID：14526226
> 
> 赞同：0
> 
> 时间：2013-01-25T16:37:30.907
> 
> 标签：mysql, php

我正在尝试使用 cron 作业每周一次通过电子邮件将最近条目列表发送到 mysql 表中。通常要调用我使用的最近条目列表：

```
$result = mysql_query("SELECT * FROM stock WHERE PurchaseDate < '$TODAY' AND PurchaseDate > '$LASTWEEK'")
or die(mysql_error());
while ($list = mysql_fetch_array($result)) 
```

但显然我不能把这段代码放入`$message`php邮件中的变量中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:43:16.083

```
$result = mysql_query("SELECT * FROM stock WHERE PurchaseDate < '$TODAY' AND PurchaseDate > '$LASTWEEK'") or die(mysql_error());
$entries = 'Entries: '; 
while ($list = mysql_fetch_array($result)) {
    $entries .= $list[entry] . ', ';
}

mail('someone@test.com', 'Stock', $entries); 
```

这只是一个例子。不知道你的桌子是什么样子的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:39:52.240

邮件函数接受一个字符串，而您将返回一个数组。

因此，您需要将其内爆`implode(',', $list);`或使用结果集构建一个字符串。

您应该使用更安全的 PHPMailer、Zend Mail 或 Swift_Mailer 库，例如防止标头注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:14:41.017

```
try {

$result = mysql_query("SELECT * FROM your_table WHERE blank = 'blank' AND blank2 ='blank2'");
$num_rows = mysql_num_rows($result);

if($num_rows < 1) {
    throw new Exception('There is no user who qualifies...');
}
if(!$result) {
throw new Exception('An Error Occurred..');
}

//mail off whatever you need to each user that qualifies based on your query criteria..

while($row = mysql_fetch_array($result)) {
$firstname = stripslashes($row['firstname']);
$lastname = stripslashes($row['lastname']);
$email = stripslashes($row['email']);
//and any other variables you need for the email...

$subject = 'Some Subject';
$message = 'Hello '.$firstname.' blah..blah...';

mail($email, $subject, $message);
//do something else...
echo 'All users emailed.';
}

}

catch (Exception $e) {

echo $e->getMessage();

} 
```

# javascript - 如何从多个服务器下载多部分文件

> ID：14526227
> 
> 赞同：3
> 
> 时间：2013-01-25T16:37:36.770
> 
> 标签：javascript, large-files, fileapi

我正在做一个项目，该项目需要下载一个部分存储在多个服务器上的文件。

要求：

*   解决方案必须在客户端使用 java-script。
*   它应该支持处理 50G 以上的大文件。
*   它应该很快并且不会因内存过载而导致浏览器崩溃。

在发明我自己的“自行车”之前，我只想检查是否有任何现有的解决方案。我在 google 和 github 搜索上没有找到一个足够好的。

如果没有这样的解决方案，也许对新文件 API 的限制有一些建议。它甚至能够处理那么大的文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:40:07.953

坦率地说，我严重怀疑你能否成功。

对于您正在使用的文件大小，您最好让您的最终用户安装一个 BitTorrent 客户端并以这种方式分发您的下载。

也就是说，需要考虑一些障碍：

*   有两个与文件相关的 API。该[`File`](https://developer.mozilla.org/en-US/docs/DOM/File)对象，但仅用于读取由 a 选择`<input type="file">`或通过拖放拖放的[文件。](https://developer.mozilla.org/en-US/docs/DragDrop/DataTransfer)

    您想要的是[FileSystem API](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API)，但有一个非常重要的警告：此 API 为您提供了一个*虚拟*文件系统，其内容对用户来说是模糊的。实际上，这意味着您写入磁盘的文件将存储在用户不知道的隐蔽位置（`\Users\Me\AppData\Local\Chrome\User Data\Default\File System\000\`例如这种情况下，意味着将文件从“虚拟”文件系统复制到用户的下载文件夹。

*   由于被沙盒化到虚拟文件系统并且必须将文件复制到其目的地，用户必须有 2 * *n*字节可用。所以我需要 100 GB 来下载你的 50 GB 文件。

*   您的虚拟文件系统必须[请求*配额*](http://updates.html5rocks.com/2011/11/Quota-Management-API-Fast-Facts)，并且用户必须批准该请求才能开始编写。虽然好消息是...

    ```
    webkitStorageInfo.requestQuota(webkitStorageInfo.PERSISTENT, 53687091200); 
    ```

    ...对我来说似乎成功了，不能保证浏览器总是允许请求如此大量的存储空间。

*   您可以使用该对象将[`Blob`](https://developer.mozilla.org/en-US/docs/DOM/Blob)s 写入您的虚拟文件系统。[`FileEntry`](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API/FileEntry)文档不完整，但我希望您可以写入文件中的任意位置。

*   [XHR 显然不允许您*流式传输*响应数据。](http://www.html5rocks.com/en/tutorials/file/xhr2/) 当您请求 XHR 将响应作为`Blob`（一项新功能）提供给您时，它必须在内存中缓冲整个响应。

    有一些技巧可以让您在 XHR 对象进入时轮询响应数据，但浏览器必须缓冲整个响应，即使您已经读取了以前的字节。

    这意味着您的单个文件部分不能超过几兆字节。平均 HTTP 请求/响应标头开销为 800 字节 - 1 kB，您在 50 GB 的过程中仅在 HTTP 标头中查看额外的 50 MB。（我知道 0.1% 的开销很小，只是需要考虑。）

再次，不要这样做。为工作使用正确的工具，在本例中是 BitTorrent。我想在某个地方有一个独立的 BT 客户端，您可以将其配置为自动开始下载预配置的 torrent。因此，用户只需单击下载链接，启动 EXE 即可。

# ajax - 对其他域的获取请求的 jQuery Ajax 请求失败

> ID：14526228
> 
> 赞同：0
> 
> 时间：2013-01-25T16:37:40.167
> 
> 标签：ajax, jquery

我想向其他域发送请求，例如 `http://ccv.viatelecom.com/services/?item=viacall&aid=XXXX&gid=XXXX&sid=XXXX&&num=XXXXXX`

我使用了 Ajax 请求，如下所示：

```
$.ajax({
                type: "GET",
                url:'http://ccv.viatelecom.com/services/?item=viacall&aid=XXXX&gid=XXXX&sid=XXXX&&num=XXXXXX',
                success:function(data){
                alert(data);

                },
                error:function(XMLHttpRequest, textStatus, errorThrown){
alert("XMLHttpRequest="+XMLHttpRequest.responseText+"\ntextStatus="+textStatus+"\nerrorThrown="+errorThrown);
                    }

            }); 
```

但它不会进入成功功能，并且警报错误是：

```
XMLHttpRequest=
textStatus=error
errorThrown= 
```

如果我写相同的 url 地址栏，它会显示不在 Ajax 请求中的消息。

这是发送请求的正确方式还是有其他方式或我缺少的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:41:34.720

您不能执行跨域 ajax 调用。

解决这个问题

## **方法一**

**JavaScript**

创建一个函数

```
function getMyData(data) {
    alert(data);
    //Do the magic with your data
} 
```

**服务器端**

在服务器端将数据包装在函数语法中

```
getMyData("Enter your data here"); 
```

**JavaScript**

然后创建一个脚本标签并添加一个链接到你的跨域页面

```
 <script type="text/javascript"
         src="cross ref url">
 </script> 
```

供参考：[维基百科](http://en.wikipedia.org/wiki/JSONP)

## **方法二**

另一种选择是在您的域上创建代理。即在您的域中创建一个页面，该页面在内部调用跨域页面并将相同的数据返回给您的Ajax 调用。

# ruby-on-rails - 如何创建守护进程以在 Rails 堆栈中运行 SMTP 服务器？

> ID：14526229
> 
> 赞同：2
> 
> 时间：2013-01-25T16:37:42.737
> 
> 标签：ruby-on-rails, ruby, smtp, ruby-daemons

我正在运行一个 Rails 应用程序，除其他外，它需要扮演它自己的 SMTP 服务器的角色。[Mini-SMTP-Server](https://github.com/aarongough/mini-smtp-server)看起来很不错，但我不知道如何让它作为守护进程运行。我希望能够对传入的消息采取行动，并且我需要将完整的 Rails 堆栈用于其他任务。

我查看了[守护进程](https://github.com/ghazel/daemons)gem，它看起来很合适，但不知道如何连接它以开始以合理的方式侦听 SMTP 消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T18:05:25.990

创建一个 Rake smtp_server rake 任务，确保它依赖于环境，然后在该任务中为 smtp 服务器编写代码。查看此线程以将 rake 任务设置为守护进程：[Daemoninsing a rake task](https://stackoverflow.com/questions/9555715/daemoninsing-a-rake-task)

```
desc 'smtp_server'
task :smtp_server => :environment do
  # Create a new server instance listening at 127.0.0.1:2525
  # and accepting a maximum of 4 simultaneous connections
  server = MiniSmtpServer.new(2525, "127.0.0.1", 4)

  # Start the server
  server.start
  # Join the thread to main pool
  server.join
end 
```

# python - Python：异或十六进制字符串

> ID：14526231
> 
> 赞同：23
> 
> 时间：2013-01-25T16:37:46.910
> 
> 标签：python, cryptography, hex, ascii, xor

> **可能重复：**
> [python中十六进制数字的按位异或](https://stackoverflow.com/questions/11119632/bitwise-xor-of-hex-numbers-in-python)

我正在尝试在 Python 中对两个十六进制字符串进行异或运算，但并不知道从哪里开始。

我有两个十六进制字符串：

```
a = "32510ba9a7b2bba9b8005d43a304b5714cc0bb0c8a34884dd91304b8ad40b62b07df44ba6e9d8a2368e51d04e0e7b207b70b9b8261112bacb6c866a232dfe257527dc29398f5f3251a0d47e503c66e935de81230b59b7afb5f41afa8d661cb"
b = "32510ba9babebbbefd001547a810e67149caee11d945cd7fc81a05e9f85aac650e9052ba6a8cd8257bf14d13e6f0a803b54fde9e77472dbff89d71b57bddef121336cb85ccb8f3315f4b52e301d16e9f52f90" 
```

我应该使用这个吗？

1.  `return "".join([chr((x) ^ (y)) for (x,y) in zip(a[:len(b)], b)])`
2.  `return "".join([chr(ord(x) ^ ord(y)) for (x, y) in zip(a[:len(b)], b)])`

我不明白上面两个代码的区别。为什么`chr`和`ord`？我还看到人们使用`int(hex,16)`.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-25T16:50:15.563

你在这里遗漏了几件事。

首先，您不想对*这些*字符串进行异或。您拥有编码形式的字符串，因此，您`.decode()`首先需要它们：

```
binary_a = a.decode("hex")
binary_b = b.decode("hex") 
```

然后，如前所述，`zip()`一旦两个序列之一用完，该函数就会停止迭代。不需要切片。

您需要循环的第二个版本：首先，您要获取字符的 ASCII 值：`ord()`生成一个数字。这是必要的，因为`^`仅适用于数字。

对数字进行异或运算后，然后将数字转换回字符`chr`：

```
def xor_strings(xs, ys):
    return "".join(chr(ord(x) ^ ord(y)) for x, y in zip(xs, ys))

xored = xor_strings(binary_a, binary_b).encode("hex") 
```

最后使用`.encode()`，我们将二进制字符串重新转换为打印良好的形式。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-25T16:44:58.487

`int('', 16)`使用基数 16 将十六进制字符串转换为整数：

```
>>> int('f', 16)
15 
>>> int('10', 16)
16 
```

所以这样做：

```
result = int(a, 16) ^ int(b, 16) # convert to integers and xor them together
return '{:x}'.format(result)     # convert back to hexadecimal 
```

# c - 用函数isAlphabetic在C语言中编写程序以确定字符串是否严格包含字母

> ID：14526232
> 
> 赞同：0
> 
> 时间：2013-01-25T16:37:53.650
> 
> 标签：c

这就是我到目前为止所拥有的。

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
   int  value;
   char c='Z';
   char alph[30]="there is a PROF 1 var orada";
   char freq[27];
   int i;

   // The function isAlphabetic will accept a string and test each character to 
   // verify if it is an alphabetic character ( A through Z , lowercase or uppercase)
   // if all characters are alphabetic characters then  the function returns 0\.  
   // If a nonalphabetic character is found, it will return the index of the nonalpabetic
   // character. 

   value = isAlphabetic(alph);

   if (value == 0) 
       printf("\n The string is alphabetic");
   else 
       printf("Non alphabetic character is detected at position %d\n",value);
   return EXIT_SUCCESS;
}

int isAlphabetic(char *myString) {
} 
```

我感到困惑的是，我将如何让程序扫描字符串以准确检测非字母字符的位置（如果有）？我猜它首先会涉及首先计算字符串中的所有字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:47:48.437

不会通过代码提供答案（就像其他人所做的那样），但请考虑：

1.  C 中的字符串只不过是一个字符数组和一个空终止符。
2.  例如，您可以使用 []（即 input[i]）遍历数组中的每个项目，以根据 ASCII 表检查其值。
3.  一旦找到一个非字母的值，您的函数就可以退出。

当然还有其他方法可以解决这个问题，但我的假设是，在这个级别上，如果你开始使用一堆你没有学过的库/工具，你的教授会有点怀疑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:49:59.583

让我们一次一个地回答你的问题：

> ...我将如何让程序扫描字符串...

“通过字符串扫描”意味着你用循环给猫剥皮：

```
char xx[] = "ABC DEF 123 456";
int ii;

/* for, while, do while; pick your poison */
for (ii = 0; xx[ii] != '\0'; ++ii)
{
    /* Houston, we're scanning. */
} 
```

> ...检测...

“检测”意味着您通过某种比较给猫剥皮：

```
char a, b;
a == b; /* equality of two char's */
a >= b; /* greater-than-or-equal-to relationship of two char's */
a < b;  /* I'll bet you can guess what this does now */ 
```

> ...正是非字母字符所在的位置...

好吧，由于您的索引，通过扫描，您将知道“确切的位置”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:53:53.030

从第一个字母扫描到最后一个字母。从设置为 0 的计数器变量开始。每次移动到下一个字符时，执行 counter++；这将为您提供非字母的索引。如果您发现任何非字母字符，请返回 counter 本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T17:00:25.803

我会给你一个提示：

```
#include <stdio.h>

int main()
{
        char c = '1';
        printf("%d",c-48); //notice this
        return 0;
} 
```

输出：1

现在应该足够自己解决了:)

# java - 如何在 CXF 中拦截 WSDL 请求？

> ID：14526233
> 
> 赞同：2
> 
> 时间：2013-01-25T16:37:56.153
> 
> 标签：java, soap, wsdl, cxf

背景故事：

我有一个由客户（不可协商）创建的 WSDL，它将多个 Web 标准混合到一个服务中。这一soap 服务有四个soap 端口，它们引用引用的(wsdl:import) WSDL 文件中的绑定，这些文件导入XSD，从而导致依赖关系树非常复杂。

由于这是通过导入完成的，因此顶级 WSDL 并没有那么大。WSDL2Java 和 wsimport 窒息它，但我有一个模式库编译成 JAXB 对象来使用。因此，我创建了一个包含所有必需操作的 CXF 服务，并且能够使用 SoapUI 对其进行测试（它很好地导入了顶级 WSDL，因为它不必创建 java 类）。

由于所有的soap 端口都指向同一个地址，并且该服务处理来自各个端口的所有操作，因此客户端不知道服务器认为所有操作都属于同一个端口。

问题：

当涉及到 CXF 生成 WSDL 时，这种情况就会崩溃。它将所有操作放在一个具有相同命名空间的端口上。在客户提供的 WSDL 中，服务、端口和绑定并不都在同一个名称空间中。我尝试使用 @WebService(wsdlLocation="") 注释为服务提供 WSDL，但它尝试解析它并将其与代码匹配（就像在理智的世界中一样）。

问题：

我想拦截/覆盖[http://example.com/service?wsdl](http://example.com/service?wsdl)操作并返回客户提供的 wsdl。有没有办法在 CXF 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:47:08.487

我最终将端口拆分为单独的服务，但我仍然需要一个包含所有端口信息的自定义 WSDL。使用 CXF 执行此操作的方法是创建一个拦截器。

我遵循了定期处理 WSDL 生成的 CXF 拦截器的示例：http: [//grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-rt-frontend-simple/2.4.0/ org/apache/cxf/frontend/WSDLGetInterceptor.java](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-rt-frontend-simple/2.4.0/org/apache/cxf/frontend/WSDLGetInterceptor.java)。我阅读了我的自定义 WSDL，并将占位符主机名替换为来自请求 URL 的主机名。

然后，您需要在制作服务时添加自定义拦截器（我使用 spring 进行配置）。更多信息请访问[http://cxf.apache.org/docs/interceptors.html](http://cxf.apache.org/docs/interceptors.html)。

# ms-access - MS Access 报告中数据的动态排序

> ID：14526236
> 
> 赞同：1
> 
> 时间：2013-01-25T16:37:59.460
> 
> 标签：ms-access, ms-access-2010

所以，我有这份报告：

![路由文件](../Images/41c2f84e9a8d3fa62d69a723de1e6a40.png)

这个查询：

![路由查询](../Images/b278c6e5852d6b3a26fb6ebc24a5677c.png)

该报告从查询中提取所有数据。字段 STA1、STA2、STA3 和 STA4 来自作业订单表，其中每个作业都有一个基于工作站（命名为 CU01、CU02、BR01...）的订单集。

我试图制作本质上说的宏

> If Reports![Production Router LBPW]![Work Station 1]="CU01" Then Reports![Production Router LBPW]![Run Time 1]=Query![Query Laser Hours by P/N]![Total Laser Hours]

如果我理解正确的话，类似这样的一系列语句基本上可以将每个工作站与特定类型的时间数据（切割、弯曲、插入和焊接）相关联，有效地重新排列我的字段以在这些地方自动显示我想要的时间数据我想要它们。唉，我对宏的了解还不够，无法做到这一点，而且我对 VBA 的了解甚至更少。如果我可以填写几行代码或其他内容，这将使我能够完成此任务，我相信我可以从那里弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:58:50.893

一种方法是创建各种查询，例如：

查询CU01

```
SELECT [Cuttime] As Pos1, [Weldtime] As Pos2, [Rivettime] As Pos3, Bend As Pos4 
FROM JobOrder 
```

您的报告将参考 Pos1，而不是 CutTime。标签也可以是文本框，因此它们也会自动更新，例如：

```
SELECT [Cuttime] As Pos1, "Cut" As lbl1, [Weldtime] As Pos2, "Weld" As lbl2
       [Rivettime] As Pos3, "Rivet" As lbl3, Bend As Pos4 "Bend" As lbl4
FROM JobOrder 
```

您可以通过规范化表格来进一步简化。

任务表

```
Job   Action Time Machine SortOrder
 1    Cut    10   AB         3
 1    Bend    4   CD         1
 1    Rivet  30   EF         6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:45:00.623

所以，我所做的是在我的查询中使用一系列 Switch 函数，以便将拉入每个查询的数据通过逻辑语句插入到每个字段中。对于操作名，逻辑如下：

> OP2: 开关([ST2]="PE01","Insert",[ST2]="PE02","Insert",[ST2]="BR01","Bend",[ST2]="BR02","Bend ",[ST2]="WE01","自动焊接",[ST2]="WE02","MIG 焊接",[ST2]="WE03","TIG 焊接",True,"N/A")

这基本上意味着，如果 ST2=PE01，那么 OP2=Insert，否则如果 ST2=BR01，那么 OP2=Bend...

然后我设置了另一个开关，上面写着 If OP2=Bend, Time2=BendTime... 依此类推。这样，每个字段都包含一个基于逻辑语句输入的值，并且作业的顺序由我在作业顺序表中输入站点名称时设置的顺序确定。

# excel - Excel VBA：将颜色从 Cell.Interior.Color 复制到 MSForms.Label.BackColor

> ID：14526237
> 
> 赞同：2
> 
> 时间：2013-01-25T16:38:01.137
> 
> 标签：excel, vba, colors, userform, backcolor

我在 Excel 2003 中有一个用户窗体，其中包含一些 MSForms.Label 控件。我想设置每个控件的 .BackColor 属性，使它们与工作表上某些单个单元格的颜色相匹配。

为此，我正在读取这些单元格的 .Interior.Color 属性，将其转换为十六进制并使用该值来设置 Label 对象的 .BackColor 属性。

我的问题是来自 .Interior.Color 的值在第一次读取时几乎总是不正确。我通过在 VBA 编辑器即时窗口中运行以下命令对此进行了测试：

```
Print Hex([sourceCell].Interior.Color) 
```

该命令在第一次几乎总是给出错误的值，但从第二次开始给出正确的值。如果我更改 [sourceCell] 的填充颜色并再次运行命令，它将执行相同的操作，即第一次错误值，第二次正确值。

有问题的单元格都填充了来自图表线条/填充颜色选择的颜色（即，您可以在 Excel 的“模式”选项卡下的“单元格格式”对话框中看到的底部两行）。我已经修改了这些颜色以提供一组自定义颜色，并且很明显，“错误”值似乎与 Excel 的自定义颜色选择范围的默认值相匹配（即，您在开始时获得的默认图表线/填充颜色）新工作簿）。

有没有其他人经历过这种行为/有解决方法？当我尝试在运行时读取两次值时它不起作用，即它没有切换到正确的值。必须停止代码并重新加载用户表单以强制输出“正确”值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:03:54.070

通过 Application.OnTime 的 Kludge/解决方法。

如果我运行用户表单准备代码以设置标签对象的背景色并隐藏用户表单，然后将主代码设置为从即时 OnTime 事件运行（确保重新运行准备代码作为 OnTime 的一部分）然后我可以强制 Excel 在显示表单时给我正确的“第二轮”值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-06T18:08:15.227

这对我有用：

```
MyForm.MyControl.BackColor = Range(myrange).Interior.Color 
```

`.Interior.Color`返回包含采样范围的 RGB 的 Variant。

`.Interior.ColorIndex`总是返回 -4140 或一些奇怪的东西，可能是因为`.ColorIndex`Excel2003 的颜色限制所特有的。

# python - Celery Worker 数据库连接池

> ID：14526249
> 
> 赞同：47
> 
> 时间：2013-01-25T16:38:26.333
> 
> 标签：python, postgresql, connection-pooling, celery

我正在使用 Celery 独立（不在 Django 中）。我计划在多台物理机器上运行一种工作任务类型。该任务执行以下操作

1.  接受 XML 文档。
2.  改造它。
3.  **进行多个**数据库读取和写入。

我正在使用 PostgreSQL，但这同样适用于使用连接的其他商店类型。过去，我使用数据库连接池来避免在每个请求上创建新的数据库连接或避免连接打开时间过长。但是，由于每个 Celery 工作人员都在单独的进程中运行，我不确定他们实际上如何能够共享池。我错过了什么吗？我知道 Celery 允许您保留从 Celery 工作人员返回的结果，但这不是我在这里想要做的。根据处理的数据，每个任务可以执行几个不同的更新或插入。

从 Celery 工作人员内部访问数据库的正确方法是什么？

是否可以在多个工作人员/任务之间共享一个池，或者是否有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-11-10T22:11:06.407

我喜欢tigeronk2 的每个工人一个连接的想法。正如他所说，Celery 维护自己的工作池，因此实际上不需要单独的数据库连接池。[Celery Signal 文档](http://docs.celeryproject.org/en/latest/userguide/signals.html#worker-signals)解释了如何在创建 worker 时进行自定义初始化，因此我将以下代码添加到我的 tasks.py 中，它似乎完全按照您的预期工作。当工作人员关闭时，我什至能够关闭连接：

```
from celery.signals import worker_process_init, worker_process_shutdown

db_conn = None

@worker_process_init.connect
def init_worker(**kwargs):
    global db_conn
    print('Initializing database connection for worker.')
    db_conn = db.connect(DB_CONNECT_STRING)

@worker_process_shutdown.connect
def shutdown_worker(**kwargs):
    global db_conn
    if db_conn:
        print('Closing database connectionn for worker.')
        db_conn.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T17:05:16.290

每个工作进程有一个数据库连接。由于 celery 本身维护一个工作进程池，因此您的数据库连接将始终等于 celery 工作人员的数量。另一方面，它会将数据库连接池绑定到 celery 工作进程管理。但这应该没问题，因为 GIL 在一个进程中一次只允许一个线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T17:01:27.163

您可以覆盖默认行为以在 celery 配置中拥有线程工作人员而不是每个进程的工作人员：

`CELERYD_POOL = "celery.concurrency.threads.TaskPool"`

然后，您可以将共享池实例存储在您的任务实例上，并从每个线程任务调用中引用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T23:05:13.203

也许，[celery.concurrency.gevent](http://docs.celeryproject.org/en/latest/internals/reference/celery.concurrency.gevent.html#celery-concurrency-gevent)可以提供池共享并且不会加剧 GIL。但是，它的支持仍然是“实验性的”。

还有一个[psycopg2.pool.SimpleConnectionPool](http://initd.org/psycopg/docs/pool.html#psycopg2.pool.SimpleConnectionPool)在greenlets（协程）之间共享，它们都将在单个进程/线程中运行。

关于该主题的少量其他[堆栈](https://stackoverflow.com/questions/13194064/using-celery-on-processes-and-gevent-in-tasks-at-the-same-time)讨论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-02T00:53:18.020

也许你可以使用[pgbouncer](https://wiki.postgresql.org/wiki/PgBouncer)。对于 celery，什么都不应该改变，并且连接池是在进程之外完成的。我有同样的[问题](https://stackoverflow.com/questions/24642999/celery-keep-database-connection-open-with-pgbouncer)。

*（“也许”是因为我不确定是否会有任何副作用）*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-26T05:56:10.727

通过实施和监控来回馈我的发现。

欢迎反馈。

参考：使用池[http://www.prschmid.com/2013/04/using-sqlalchemy-with-celery-tasks.html](http://www.prschmid.com/2013/04/using-sqlalchemy-with-celery-tasks.html)

每个工作进程（由 -ck 指定的 prefork 模式）将建立一个与 DB 的新连接，而无需池化或重用。因此，如果使用池化，则只能在每个工作进程级别看到该池。所以 pool size > 1 没有用，但重用连接仍然可以保存打开和关闭的连接。

如果每个工作进程使用一个连接，则在初始化阶段为每个工作进程（prefork 模式 celery -A app worker -ck）建立 1 个 DB 连接。它可以重复打开和关闭连接。

无论有多少个工作线程（eventlet），每个工作线程（celery -A app worker -P eventlet）只建立一个与DB的连接，无需池化或重用。因此对于 eventlet，一个 celery 进程（celery -A app worker ...）上的所有工作线程（eventlets）在每一时刻都有 1 个 db 连接。

根据芹菜文档

> 但是您需要确保您的任务不执行阻塞调用，因为这将停止工作程序中的所有其他操作，直到阻塞调用返回。

这可能是由于 MYSQL DB 连接的方式是阻塞调用。

# javascript - 使内层div的点击不调用外层的onClick函数

> ID：14526250
> 
> 赞同：0
> 
> 时间：2013-01-25T16:38:27.953
> 
> 标签：javascript, html, onclick

> **可能重复：**
> [防止在单击超链接时触发父容器单击事件](https://stackoverflow.com/questions/1997084/prevent-parent-container-click-event-from-firing-when-hyperlink-clicked)

我有

```
<div onClick="someJScode();">
  ...
  <div></div>
  ...
</div> 
```

我不想`someJScode()`在单击内部 div 时被调用。这该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:42:02.227

`$('yourinnerDiv').click(function(e){e.stopPropagation()});`

这将阻止点击事件冒泡 DOM。
[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)
[https://developer.mozilla.org/en/docs/DOM/event.stopPropagation](https://developer.mozilla.org/en/docs/DOM/event.stopPropagation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T16:43:23.360

你可以试试这个：

**HTML**

```
<div onClick="someJScode();" class="parent">
  <div class="child" onclick="childCallback(event)"></div>
</div> 
```

**JavaScript**

```
function someJScode() {
    alert('Click!');
}

function childCallback(event) {
    event.stopImmediatePropagation();
    return false;
} 
```

**[演示](http://jsfiddle.net/mgechev/Fy6dg/)**

上面的代码使用[了 stopImmediatePropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopImmediatePropagation)也可以使用[stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

这是更通用的解决方案：

```
var preventChildrenPropagation = (function (parentClass) {
    var preventPropagation = function (event) {
        event.stopPropagation();
        return false;
    }
    return function (parent) {
        var foreach = Array.prototype.forEach;
        foreach.call(document.getElementsByClassName(parent), function (e) {
            foreach.call(e.children, function (c) {
                c.onclick = preventPropagation;
            });
        });
    }
}());

preventChildrenPropagation('parent'); 
```

该方法将阻止“父”元素的所有子元素`preventChildrenPropagation`的所有事件的传播。`click`

# c++ - 'auto' 和显式变量声明的行为不同

> ID：14526252
> 
> 赞同：11
> 
> 时间：2013-01-25T16:38:39.313
> 
> 标签：c++, c++11

我有这样的事情：

```
class Bar;

class Foo()
{
 public:
   Foo() : bar(new Bar());
   Bar& GetBar() { return *bar.get(); }
 private:
   std::unique_ptr<Bar> bar;
};

void main()
{
   Foo foo;
   auto bar1 = foo.GetBar();
   auto bar2 = foo.GetBar(); //address of bar2 != address of bar1\. why?

   Bar& bar3 = foo.GetBar();
   Bar& bar4 = foo.GetBar(); //address of bar3 == address of bar4.
} 
```

似乎“自动”变量是副本，因为我没有返回具有相同内存地址的 Bars。如果我将变量明确定义为 Bar 引用 (Bar&)，那么一切都会按我的预期工作。

我应该提到我正在编译vs2012。这里发生了什么？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-25T17:01:57.253

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-25T16:49:36.533

`auto`像模板参数推导一样工作。`bar1`并且`bar2`有类型`Bar`，所以它们是独立的副本；`bar3`并且`bar4`有类型`Bar &`并且是对相同的引用`*foo.bar`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:49:17.810

**Code:**

```
X& getter() {
    static X value;
    return value;
}

print("X:");
X x0 = getter();
auto x0a = getter();
x0.printAddress();
x0a.printAddress();

print("X&:");
X& x1 = getter();
auto& x1a = getter();
x1.printAddress();
x1a.printAddress();

print("const X&:");
const X& x2 = getter();
const auto& x2a = getter();
x2.printAddress();
x2a.printAddress();

print("X&&:");
print("Rvalue can't be bound to lvalue");
X&& x3 = getter();
auto&& x3a = getter();
x3.printAddress();
x3a.printAddress(); 
```

**Result:**

```
X:
0037F807
0037F7FB
X&:
00D595BA
00D595BA
const X&:
00D595BA
00D595BA
X&&:
Rvalue can't be bound to lvalue
00D595BA 
```

**Conclusion:**

`auto` means: "*replace me with type, unless I am `auto&&` then find the most suitable form*".

# haskell - 使用 foldr 和函数应用程序 ($) 解释查找列表的第 K 个元素

> ID：14526254
> 
> 赞同：5
> 
> 时间：2013-01-25T16:38:44.007
> 
> 标签：haskell

我目前在《Learn you a Haskell》的第 6 章……最近才开始研究 99 个问题。

第三个问题是找到列表的第 K 个元素。我已经使用`take`and实现了它`zip`。

我遇到的问题是了解提供的替代解决方案：

```
elementAt''' xs n = head $ foldr ($) xs 
                     $ replicate (n - 1) tail 
```

我“快到了”，但我不太明白。我知道`$`但是..你能解释一下上面代码的执行顺序吗？此外，这是否经常被用作各种问题的解决方案，这是惯用的还是只是......杂技？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T16:50:37.493

如果扩大定义`foldr`

```
foldr f z (x1:x2:x3:...:[]) = x1 `f` x2 `f` x3 `f`... `f` z 
```

你看那`elementAt'''`变成

```
elementAt''' xs n = head (tail $ tail $ ... $ tail $ xs) 
```

（注意：如果索引是从 0 开始的，它应该`replicate n tail`代替）。`replicate (n-1) tail`

因此，您应用`tail`适当`xs`的次数，其结果与`drop (n-1) xs`if`xs`足够长的结果相同，但如果太短则会引发错误，并采用`head`结果列表的 （如果`xs`太短，后者也会引发错误与`drop (n-1)`）。

它所做的就是这样

*   丢弃列表的第一个元素
*   丢弃结果列表的第一个元素（`n-1`总共次）
*   取`head`结果列表的

> 此外，这是否经常被用作各种问题的解决方案，这是惯用的还是只是......杂技

在这种情况下，只是杂技。必须先扩展整个`foldr`应用程序，然后才能返回到前面获取`tail`s，因此它的效率低于直接遍历。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T16:49:22.923

将其分解为两个主要步骤。首先，该函数复制`tail` `(n-1)`时间。所以你最终会得到类似的东西

```
elementAt''' xs n = head $ foldr ($) xs [tail, tail, tail, ..., tail] 
```

现在，`foldr`on a list 的定义扩展为这样的

```
foldr f x [y1, y2, y3, ..., yn] = (y1 `f` (y1 `f` (... (yn `f` x))) ...) 
```

因此，该折叠将扩展为（替换`f`为`$`和所有`y`s 为`tail`）

```
foldr ($) xs [tail, tail, tail, ..., tail] 
= (tail $ (tail $ (tail $ ...  (tail xs))) ... )
{- Since $ is right associative anyway -}
= tail $ tail $ tail $ tail $ ... $ tail xs 
```

哪里有组合在一起的`(n-1)`调用。`tail`取`n-1` 尾后，它只提取剩余列表的第一个元素并将其返回。

另一种使组合更明确的写法（在我看来）是这样的

```
elementAt n = head . (foldr (.) id $ replicate (n-1) tail) 
```

# php - 如何在 MYSQL 中使用 GROUP BY 连接另一个表中的子行并仅显示一次主行？

> ID：14526259
> 
> 赞同：1
> 
> 时间：2013-01-25T16:39:04.337
> 
> 标签：php, mysql, sql, database, join

我有一个简单的文章和评论系统，其中包含下表：

文章表：

```
ID | Writer | Text
 1 | Bob    | good article
 2 | Marley | read this 
```

评论表：

```
ID | Article_ID | Comment
 1 |      1     |  i love this article
 2 |      1     |  good one
 3 |      2     |  waiting for more 
```

我想选择每篇文章及其下方的评论。我使用以下查询：

```
SELECT * FROM articles LEFT JOIN comments ON articles.ID = comments.Article_id 
```

预期结果：

```
Article 1: good article
Comments: 1 - i love this article
          2 - good one

Article 2: read this
Comments: 3 - waiting for more 
```

我得到什么：

```
Article 1: good article
Comments: 2 - good one

Article 2: read this
Comments: 3 - waiting for more 
```

那么如何选择每篇带有评论的文章，​​并按 id 降序排列文章，以及按 id 降序排列评论？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:01:43.413

出色地，

实际上，您的预期结果和结果都是错误的。你如何处理你的数据？

预期的结果是错误的，因为任何 SQL 查询都会返回一个表作为结果。它不能连续包含另一个表。

您的查询返回以下结果：

* * *

第1条：好文章

评论：1 - 我喜欢这篇文章

* * *

第1条：好文章

评论：2 - 好一个

* * *

第二条：阅读本文

评论：3 - 等待更多

* * *

Witch 应该足以让您获得页面的相关数据。

但我建议将其拆分为单独的查询，文章通常包含大量您不想在结果中复制的数据。

像那样（未经测试的代码）：

```
$articles_sql="SELECT * FROM articles";
$comments_sql="SELECT * FROM comments";

$articles=$db->query($sql).getResults();

$comments=$db->query($sql).getResults();

foreach($articles as &$article){
    $article['comments']=array();
    foreach ($comments as $comment){
        if($article['id']==$commnet['article_id']){
            $article['comments'][]=$comment;
        }
    }
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:43:52.910

您在评论表中有一对多的关系，所以使用它，并将文章左连接到相应的评论，或者您可以在原始查询上使用 RIGHT JOIN，我相信。

```
SELECT * FROM comments LEFT JOIN articles ON comments.Article_id = articles.ID 
```

或者

```
SELECT * FROM articles RIGHT JOIN comments ON articles.ID = comments.Article_id 
```

或者我什至认为

```
SELECT * FROM articles JOIN comments ON articles.ID = comments.Article_id 
```

要按文章 id 降序然后评论 id 降序排序，请继续：

```
ORDER BY articles.ID DESC, comments.ID DESC 
```

# java - 如何从包含绝对文件路径的字符串中获取文件名？

> ID：14526260
> 
> 赞同：281
> 
> 时间：2013-01-25T16:39:04.850
> 
> 标签：java, file, filenames, filepath

`String`变量包含一个文件名，`C:\Hello\AnotherFolder\The File Name.PDF`. 如何仅将文件名`The File Name.PDF`作为字符串获取？

我计划拆分字符串，但这不是最佳解决方案。

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2013-01-25T16:40:30.793

只需使用**[File.getName()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getName%28%29)**

```
File f = new File("C:\\Hello\\AnotherFolder\\The File Name.PDF");
System.out.println(f.getName()); 
```

使用**字符串方法**：

```
 File f = new File("C:\\Hello\\AnotherFolder\\The File Name.PDF");  
System.out.println(f.getAbsolutePath().substring(f.getAbsolutePath().lastIndexOf("\\")+1)); 
```

* * *

## 回答 #2

> 赞同：306
> 
> 时间：2013-01-25T16:44:10.070

替代使用[`Path`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)（Java 7+）：

```
Path p = Paths.get("C:\\Hello\\AnotherFolder\\The File Name.PDF");
String file = p.getFileName().toString(); 
```

请注意，拆分字符串取决于`\\`平台，因为文件分隔符可能会有所不同。`Path#getName`为您解决这个问题。

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2016-09-05T18:52:11.347

`FilenameUtils`在[Apache Commons IO](https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FilenameUtils.html#getName(java.lang.String))中使用：

```
String name1 = FilenameUtils.getName("/ab/cd/xyz.txt");
String name2 = FilenameUtils.getName("c:\\ab\\cd\\xyz.txt"); 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-01-25T16:41:40.103

考虑到`String`你要问的是

```
C:\Hello\AnotherFolder\The File Name.PDF 
```

我们需要提取最后一个分隔符之后的所有内容，即。`\`. 这就是我们感兴趣的。

你可以做

```
String fullPath = "C:\\Hello\\AnotherFolder\\The File Name.PDF";
int index = fullPath.lastIndexOf("\\");
String fileName = fullPath.substring(index + 1); 
```

这将检索`\`您的最后一个索引`String`并将其后的所有内容提取到`fileName`.

*如果您有一个`String`带有不同分隔符的 a，请调整`lastIndexOf`以使用该分隔符。*（甚至有一个[重载](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#lastIndexOf-java.lang.String-)接受一个整体`String`作为分隔符。）

我在上面的例子中省略了它，但是如果你不确定它`String`来自哪里或者它可能包含什么，你会想要验证它`lastIndexOf`返回一个非负值，因为[Javadoc 声明](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#lastIndexOf-java.lang.String-)它会返回

> -1 如果没有这样的事件

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2016-10-20T12:10:27.927

从 1.7 开始

```
 Path p = Paths.get("c:\\temp\\1.txt");
    String fileName = p.getFileName().toString();
    String directory = p.getParent().toString(); 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-07-24T10:30:30.227

你可以使用 path = C:\Hello\AnotherFolder\TheFileName.PDF

```
String strPath = path.substring(path.lastIndexOf("\\")+1, path.length()); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-11-05T04:54:23.380

其他答案对我的特定情况不太适用，我正在阅读源自与我当前操作系统不同的操作系统的路径。为了详细说明，我将从 Windows 平台保存的电子邮件附件保存在 Linux 服务器上。从 JavaMail API 返回的文件名类似于 'C:\temp\hello.xls'

我最终得到的解决方案：

```
String filenameWithPath = "C:\\temp\\hello.xls";
String[] tokens = filenameWithPath.split("[\\\\|/]");
String filename = tokens[tokens.length - 1]; 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-05-15T19:04:59.363

考虑 Java 是多平台的情况：

```
int lastPath = fileName.lastIndexOf(File.separator);
if (lastPath!=-1){
    fileName = fileName.substring(lastPath+1);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-29T11:49:06.107

一种没有任何依赖关系的方法，它负责处理**..** , **.** 和重复的分隔符。

```
public static String getFileName(String filePath) {
    if( filePath==null || filePath.length()==0 )
        return "";
    filePath = filePath.replaceAll("[/\\\\]+", "/");
    int len = filePath.length(),
        upCount = 0;
    while( len>0 ) {
        //remove trailing separator
        if( filePath.charAt(len-1)=='/' ) {
            len--;
            if( len==0 )
                return "";
        }
        int lastInd = filePath.lastIndexOf('/', len-1);
        String fileName = filePath.substring(lastInd+1, len);
        if( fileName.equals(".") ) {
            len--;
        }
        else if( fileName.equals("..") ) {
            len -= 2;
            upCount++;
        }
        else {
            if( upCount==0 )
                return fileName;
            upCount--;
            len -= fileName.length();
        }
    }
    return "";
} 
```

测试用例：

```
@Test
public void testGetFileName() {
    assertEquals("", getFileName("/"));
    assertEquals("", getFileName("////"));
    assertEquals("", getFileName("//C//.//../"));
    assertEquals("", getFileName("C//.//../"));
    assertEquals("C", getFileName("C"));
    assertEquals("C", getFileName("/C"));
    assertEquals("C", getFileName("/C/"));
    assertEquals("C", getFileName("//C//"));
    assertEquals("C", getFileName("/A/B/C/"));
    assertEquals("C", getFileName("/A/B/C"));
    assertEquals("C", getFileName("/C/./B/../"));
    assertEquals("C", getFileName("//C//./B//..///"));
    assertEquals("user", getFileName("/user/java/.."));
    assertEquals("C:", getFileName("C:"));
    assertEquals("C:", getFileName("/C:"));
    assertEquals("java", getFileName("C:\\Program Files (x86)\\java\\bin\\.."));
    assertEquals("C.ext", getFileName("/A/B/C.ext"));
    assertEquals("C.ext", getFileName("C.ext"));
} 
```

也许 getFileName 有点令人困惑，因为它也返回目录名称。它返回路径中文件或最后一个目录的名称。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-11T12:27:26.767

java.nio.file.Path 的getFileName() 方法用于返回此路径对象指向的文件或目录的名称。

路径 getFileName()

以供参考：

[https://www.geeksforgeeks.org/path-getfilename-method-in-java-with-examples/](https://www.geeksforgeeks.org/path-getfilename-method-in-java-with-examples/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-21T12:17:18.103

使用 java regex * 提取文件名。

```
public String extractFileName(String fullPathFile){
        try {
            Pattern regex = Pattern.compile("([^\\\\/:*?\"<>|\r\n]+$)");
            Matcher regexMatcher = regex.matcher(fullPathFile);
            if (regexMatcher.find()){
                return regexMatcher.group(1);
            }
        } catch (PatternSyntaxException ex) {
            LOG.info("extractFileName::pattern problem <"+fullPathFile+">",ex);
        }
        return fullPathFile;
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-29T08:55:31.883

您可以使用 FileInfo 对象来获取文件的所有信息。

```
 FileInfo f = new FileInfo(@"C:\Hello\AnotherFolder\The File Name.PDF");
    MessageBox.Show(f.Name);
    MessageBox.Show(f.FullName);
    MessageBox.Show(f.Extension );
    MessageBox.Show(f.DirectoryName); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-23T17:00:33.157

这个答案在 c# 中对我有用：

```
using System.IO;
string fileName = Path.GetFileName("C:\Hello\AnotherFolder\The File Name.PDF"); 
```

# mysql - 我如何获得所有具有多个不同地址的 ID 的唯一 ID

> ID：14526264
> 
> 赞同：-1
> 
> 时间：2013-01-25T16:39:12.327
> 
> 标签：mysql, select

```
id id2  id3 address 
1   1   0   A   
2   1   0   B
3   2   0   A
4   3   0   A
5   3   0   B
6   4   0   A 
```

大家好...请解决我的查询...我有这个格式的表格。现在我想从这个表中得到相应的唯一值 "id2" 。这意味着我想要地址为“B”和“A”的所有值（但“A”不应该与 B 具有相同的“id2”）。因此，我将获得“id2”的所有独特价值......请伙计们......做点什么

目前我正在使用查询来获取“B”

```
 SELECT * FROM t1 WHERE address=(SELECT MAX(address) FROM t1) 
```

现在我也想要所有的“A”，但它不应该有与“B”相同的“id2”

我想要它的ans

```
id id2  id3 address 

2   1   0   B
3   2   0   A

5   3   0   B
6   4   0   A 
```

任何想法？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:43:29.853

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  id2, MAX(ID) max_ID
            FROM    tableName
            GROUP   BY id2
        ) b ON  a.id2 = b.id2 aND
                a.ID = b.max_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/58f72/21)

# javascript - Facebook FQL 按名称选择专辑

> ID：14526265
> 
> 赞同：0
> 
> 时间：2013-01-25T16:39:13.640
> 
> 标签：javascript, facebook, coffeescript, facebook-fql

是否可以通过指定名称从特定相册中获取用户照片？我试图只获取名为“移动上传”的专辑。

```
offset = 0
mobile = "mobile uploads"
mobileUploads = "SELECT src_big FROM photo WHERE album_object_id IN (SELECT aid FROM album WHERE name=" + mobile + ") ORDER BY created DESC LIMIT " + offset + ",16"
$.getJSON "https://graph.facebook.com/fql?q=" + mobileUploads.replace(/\s+/g, "+") + "&access_token=" + FB.getAccessToken(), (data) -> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:47:23.747

是的，但是您的 FQL 中有几个错误。尝试这个：

```
SELECT src_big FROM photo WHERE album_object_id IN 
   (SELECT object_id FROM album WHERE owner = me() AND name="mobile uploads") 
   ORDER BY created DESC 
```

*   `aid`!=`album_object_id`
*   您必须指定一个`owner`以使子查询可索引。
*   如果用户重命名了他们的“移动上传”相册或有多个相册，您也可以使用`type = 'mobile'`。

# ruby - 我可以有条件地跳过在同一个文件中加载“更多”红宝石代码吗？

> ID：14526268
> 
> 赞同：5
> 
> 时间：2013-01-25T16:39:15.690
> 
> 标签：ruby, rubygems, require

如果找不到库（通过 require 加载），我可以有条件地跳过在同一文件中加载“更多”ruby 代码吗？

```
begin
  require 'aws-sdk'
rescue LoadError
  puts "aws-sdk gem not found"
  return #does not work. nor does next
end

# code after here should not be executed as `aws-sdk` gem was not found
puts "=== should not get executed"

namespace :db do
  desc "import local postgres database to heroku. user and database name is hardcoded"
  task :import_to_heroku => [:environment, "db:dump_for_heroku"] do
    # code using aws-sdk gem
  end
end 
```

在上面的代码中，我可以要求 Ruby 在点击 `rescue LoadError`.

**就像提前返回，但用于加载文件而不是函数。**

需要它，因为我有一个需要`aws-sdk`ruby​​gem 的 rake 任务，但我只在我的本地机器上使用它。如果`aws-sdk`没有找到，我以后在同一个文件中加载代码是没有意义的。我想我可以将代码拆分为较小的文件并在 require 调用中对其进行变形

```
if Rails.env.development?
  require 'import_to_heroku'
end 
```

但不想扭曲或修改我现有的代码

此外，我可以将整个代码包装在一个条件中，但这并不优雅。begin-rescue 块也是一种显式控制流。我不想以任何方式包装或触摸原始代码

也许是一个 api，例如

```
require_or_skip_further_loading 'aws-ruby` 
```

所以我希望我的代码在功能上等同于

```
begin
  require 'aws-sdk'

  namespace :db do
    desc "import local postgres database to heroku. user and database name is hardcoded"
    task :import_to_heroku => [:environment, "db:dump_for_heroku"] do
      # code using aws-sdk gem
    end
  end
rescue LoadError
  puts "aws-sdk gem not found"
end 
```

或通过 if 条件

```
library_found = false
begin
  require 'aws-sdk'
  library_found = true
rescue LoadError
  puts "aws-sdk gem not found"
  return #does not work
end

if library_found      
  namespace :db do
    desc "import local postgres database to heroku. user and database name is hardcoded"
    task :import_to_heroku => [:environment, "db:dump_for_heroku"] do
    # code using aws-sdk gem
    end
  end
end 
```

**`LoadError`希望程序在引发后继续执行。IE。优雅地处理`LoadError`并且不加载`LoadError`在同一文件中编写的代码。cannot raise `exit`or `abort`on`LoadError`尤其是之后的代码`LoadError`不应由 ruby​​ 解释器执行（或加载）**

最初问[过如何在ruby中跳过require？](https://stackoverflow.com/questions/14522350/how-to-skip-require-in-ruby) 但我没有正确地问这个问题。希望这个措辞更好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:00:42.630

我没有检查源代码，但我想，当你`ruby my_file.rb`在控制台运行时，或者`require/load`从 Ruby 代码运行时，文件在被评估之前被完全读入内存。恐怕没有跳过文件的一部分这样的事情。

我有一个关于接球/投球的想法。

需要文件（例​​如 Rake 任务？） treq1.rb ：

```
catch :aws_sdk do
    require_relative 'original'
end

puts '... continued' 
```

您不想修改的原始文件 original.rb ：

```
puts 'in original, not to be modified'
begin
  require 'aws-sdk'
rescue LoadError
  puts "aws-sdk gem not found"
  throw :aws_sdk
end

puts ">>> to execute only if 'aws-sdk' is found"

# namespace :db do ... etc
#end 
```

执行 ：

```
$ ruby -w treq1.rb 
in original, not to be modified
aws-sdk gem not found
treq1.rb:2:in `require_relative': method `backtrace' called on unexpected T_NODE object (0x007fd32b88e900 flags=0x381c klass=0x0) (NotImplementedError)
    from treq1.rb:2:in `block in <main>'
    from treq1.rb:1:in `catch'
    from treq1.rb:1:in `<main>' 
```

谷歌搜索错误：[http](http://www.ruby-forum.com/topic/4406870)
://www.ruby-forum.com/topic/4406870 最近的帖子，没有答案。如果要包装代码，它可以在单个文件中工作。
让我们尝试另一种解决方案。假设您可以更改 Rake 任务 treq2.rb ：

```
begin
    require_relative 'original'
rescue LocalJumpError
    puts 'rescued LocalJumpError'
end

puts '... continued' 
```

在 original.rb 中，替换`throw :aws_sdk`为`return`：

```
$ ruby -w treq2.rb 
in original, not to be modified
aws-sdk gem not found
rescued LocalJumpError
... continued 
```

这样就可以了。
高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-31T16:53:10.420

[新增](https://bugs.ruby-lang.org/issues/4840)“顶级回归”功能。

现在可以`return`在顶层使用关键字，如您的“通过 if 条件”示例。[在这里进一步讨论](https://stackoverflow.com/questions/34347134/is-it-possible-to-conditionally-stop-ruby-from-evaluating-a-required-file-withou)。

# salesforce - 在 Salesforce 中返回 Null 的 Rest Api 的 Content-Type

> ID：14526269
> 
> 赞同：0
> 
> 时间：2013-01-25T16:39:24.020
> 
> 标签：salesforce, apex-code, visualforce

我正在尝试调用这个 rest api 方法

```
 @HttpGet
    global static String retrievingNotificationSettings(){

     RestRequest req=RestContext.request;

    RestResponse res=RestContext.response;

      String accountId = req.requestURI.substring(req.requestURI.lastIndexOf('/')+1);
     if(req.headers.get('Content-Type').equals('application/xml'))
     {
      Map<String, SObjectField> fields = Notification_Settings__c.SObjectType.getDescribe().fields.getMap();

      Schema.sObjectField T ;
      Notification_Settings__c ss;
      return 'hello World';

      }  

      if(req.headers.get('Content-Type').equals('application/json'))

    return System.JSON.serialize(note);

    return null; 
```

我的要求是

```
GET /services/apexrest/v.9/notifications/preferences/ritesh HTTP/1.1
X-HostCommonName:
ap1.salesforce.com
Authorization:
OAuth 00D90000000j9AW!AQkAQLba73cDzjXhQ4kkQ2PSru4XpFuJcwr5kg_W_MkZmQnm9vI653FBWeJaABwClQqtJZD_b6j7V0O_elkzvkh7IqRKSUop
X-PrettyPrint:
1
Host:ap1.salesforce.com
X-Target-URI:
https://ap1.salesforce.com
Content-Type: application/json
Connection:Keep-Alive 
```

我得到的回应是

```
HTTP/1.1 500 Internal Server Error
Date:
Fri, 25 Jan 2013 16:30:21 GMT
Content-Length:
203
Connection:
close
Content-Type:
application/json; charset=UTF-8
Server:

[
   {
    "message": "System.NullPointerException: Attempt to de-reference a null object\n\nClass.NotificationRestService.retrievingNotificationSettings: line 34, column 1",
    "errorCode": "APEX_ERROR"
  }
] 
```

我得到错误的那一行是

if(req.headers.get('Content-Type').equals('application/xml'))

我不明白为什么在标题中我将值 Content-Type 作为 application/json 传递时出现此错误？请告诉我我在哪里犯错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:38:13.037

你`System.debug(req.headers)`能看看它是否正确通过吗？

从字面上回答你的空指针问题 - 使用`==`而不是`equals`：

```
if(req.headers.get('Content-Type') == 'application/xml') 
```

但这并不能解决真正的根本问题。

您可能想尝试使用不同的标头（愚蠢，我知道）或决定添加 GET 参数，例如`&mode=json`

# python - 带 * 的 Python 正则表达式？

> ID：14526275
> 
> 赞同：3
> 
> 时间：2013-01-25T16:39:44.343
> 
> 标签：python, regex

这个 Python 正则表达式匹配什么？

```
.*?[^\\]\n 
```

我很困惑为什么 和`.`都跟在`*`后面`?`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:51:38.600

`*`意思是“尽可能多地匹配前一个元素（零次或多次）”。

`*?`意思是“尽可能少地匹配前一个元素（零次或多次）”。

其他答案已经解决了这个问题，但是他们没有提出的是它如何更改正则表达式，如果`re.DOTALL`提供了标志，它会产生巨大的差异，因为`.`将匹配启用该标志的换行符。所以`.*[^\\]\n`会从字符串的开头一直匹配到***最后一个***没有反斜杠的换行符（所以会有几行匹配）。

如果`re.DOTALL`未提供标志，则差异更加微妙，`[^\\]`将匹配反斜杠以外的所有内容，包括换行符。考虑以下示例：

```
>>> import re
>>> s = "foo\n\nbar"
>>> re.findall(r'.*?[^\\]\n', s)
['foo\n']
>>> re.findall(r'.*[^\\]\n', s)
['foo\n\n'] 
```

所以这个正则表达式的目的是找到不以反斜杠结尾的非空行，但是如果你使用`.*`而不是`.*?`你将匹配一个额外的`\n`，如果你在非空行后面有一个空行。

发生这种情况是因为`.*?`将只匹配`fo`，`[^\\]`将匹配第二个`o`，以及`\n`第一行末尾的匹配项。然而，`.*`将匹配`foo`，`[^\\]`将匹配`\n`结束第一行，下一个`\n`将匹配，因为第二行是空白的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T16:41:57.850

`.`表示通配符。它可以匹配除 a 之外的任何内容`\n`，除非使用了适当的标志。

`*`表示你可以在它前面有 0 个或更多的东西。

`?`表示前面的量词是惰性的。它将在找到第一个匹配项后停止搜索。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T16:43:09.430

打开[Python re 模块文档](http://docs.python.org/2/library/re.html)，并搜索`*?`，我们发现：

> **`*?`, `+?`,`??`** :
> 
> , `*`,`+`和`?`限定词都是贪婪的；它们匹配尽可能多的文本。有时这种行为是不希望的；如果 RE`<.*>`与 匹配`<H1>title</H1>`，它将匹配整个字符串，而不仅仅是`<H1>`. 在限定符之后添加`?`使其以非贪婪或最小方式执行匹配；将匹配尽可能少的字符。`.*?`在前面的表达式中使用将仅匹配`<H1>`。

# sql - 将现有整数标识转换为 GUID

> ID：14526282
> 
> 赞同：1
> 
> 时间：2013-01-25T16:40:07.530
> 
> 标签：sql, nhibernate, guid, azure-sql-database

我在我的项目中使用 NHibernate 并准备发布一个新版本。我阅读了有关 GUID.COMB 的信息，HI/LO 比数据库生成的身份更快。然后，我决定继续使用 GUID.COMB，但我不知道如何在不破坏表关系的情况下将现有主键转换为 GUID。

我需要建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T00:30:21.107

这取决于数据库......但你基本上需要：

*   丢弃 FK
*   丢弃 PK
*   （可选）重命名旧列
*   创建新的 Guid 列
*   使用新列创建 PK
*   使用与旧列的连接重新建立新列的数据关系
*   创建新的 FK

# ruby-on-rails - 有没有额外的注入速记

> ID：14526290
> 
> 赞同：4
> 
> 时间：2013-01-25T16:40:32.540
> 
> 标签：ruby-on-rails, ruby

我最近遇到了这个问题：
我一直像这样使用注入（我知道 (0) 部分是可选的，可以省略）

```
array = [13,23,13]
#=> [13, 23, 13]
array.inject(0) { |sum,i| sum+i }
#=> 49 
```

偶然我发现你可以使用：

```
array.inject(:+)
#=> 49
array.inject(:-)
#=> -23
array.inject(:*)
#=> 3887
array.inject(:/)
#=> 0 
```

谷歌搜索这个问题，我发现了[一篇关于 inject 的好文章](http://blog.jayfields.com/2008/03/ruby-inject.html)，但没有提到我尝试过的内容......
谁能向我解释或提供一些关于我刚刚使用的注入命令的信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:49:38.743

从文档上[`Enumerable#inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)：

> ...如果您指定一个符号，那么集合中的每个元素都将传递给 memo 的命名方法。无论哪种情况，结果都会成为 memo 的新值。在迭代结束时，memo 的最终值就是方法的返回值。
> 
> 如果没有明确指定 memo 的初始值，则使用 collection 的第一个元素作为 memo 的初始值。

因此，如果您指定一个符号，它会将其视为方法名称，并在可枚举的每个元素上调用此方法，替换上面所述的 memo。现在，数学运算符 (+-*/) 只是方法，没有别的。这些行产生相同的结果：

```
13 + 23 # => 36
13.+(23) # => 36
13.send(:+, 23) # => 36 
```

当您将符号传递给`inject`或`reduce`它使用第三种形式将该运算符动态应用于元素时：

```
[1,2,3].inject(:+) # => 6 
```

此速记也可以与运算符以外的方法一起使用：

```
[{"a"=>1}, {"b"=>2}].inject(:merge) # => {"a"=>1, "b"=>2} 
```

# python - Python：关闭所有守护线程

> ID：14526294
> 
> 赞同：2
> 
> 时间：2013-01-25T16:40:44.283
> 
> 标签：python, multithreading

我的 Python 应用程序中有几个守护线程。当我的主函数退出时，这些守护线程终止（如预期的那样）并且程序关闭。但我想要一种基本上“重新启动”我的程序而不退出并重新启动它的方法。有没有办法在不调用 sys.exit() 的情况下“强制关闭”我所有的守护线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:29:05.043

主要取决于您的需求。如果您想保存相同的类型并自动重新加载应用程序，这不是很困难，请看以下示例：

```
#!/usr/bin/env python

import sys, os, time

t = int(sys.argv[1])
print 'hello, I am', t
time.sleep(t)
if t > 2:
    sys.exit()
os.execl(sys.argv[0], sys.argv[0], str(t+1)) 
```

脚本在满足某个条件时自行重新启动，然后存在。您可以根据事件或信号重新启动应用程序，例如在`SIGHUP`.

如果你还需要保存当前状态，事情就更复杂了。您可以在重新启动之前将应用程序的状态保存在文件中，并在启动例程期间重新加载状态，或者您必须指示守护线程在特定条件下退出：

```
import threading, signal, time

should_restart = False
cond = threading.Event()
exit = threading.Event()
threads = []

def start(num=3):
    for i in range(num):
        t = threading.Thread(target=foo, args=[cond])
        threads.append(t)
        t.daemon = True
        print 'hello, I am', t.name
        t.start()

def restart(signum, frame):
    global should_restart
    should_restart = False
    cond.set()
    for thread in threads:
        thread.join()
        print 'bye bye', thread.name
    cond.clear()
    start()

def foo(should_exit):
    while not should_exit.is_set():
        time.sleep(0.2)

signal.signal(signal.SIGHUP, restart)
signal.signal(signal.SIGINT, lambda n, f: exit.set())
start()

while not exit.is_set():
    time.sleep(0.2) 
```

我希望这两个示例对您有用，以更好地了解您的需求。

# c# - 如何根据会话变量为特定用户重新注册路由

> ID：14526298
> 
> 赞同：1
> 
> 时间：2013-01-25T16:41:04.043
> 
> 标签：c#, asp.net, routing, url-routing

让我们在我的应用程序启动时注册以下路线：website.com/slug -> page1.aspx

但我怎样才能像这样重新注册该路线：website.com/slug -> page2.aspx

我知道我可以清除我的 RouteTable 并再次注册我的路线，但这会弄乱网站上每个人的路线。

有没有办法为特定用户注册新路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:53:47.320

您希望始终可以编写自己的自定义 Route 类，根据用户的用户名/角色成员身份将用户重定向到特定区域......虽然重定向也可以是您登录操作的一部分

```
 [HttpPost]
    public ActionResult Login(LoginCredentials user)
    {
        // authenticate
        ...
        if (User.IsInRole("admin"))
        {
            return this.RedirectToAction("Index", "User", new { area = "Admin" });
        }
        return this.RedirectToAction("Index", "User");
    }

    This action assumes there's Admin area in your application.
    Custom route constraint 
```

另一种可能性是有自定义路由约束。因此，您实际上会定义两条路线，但一条路线具有特定的约束：

```
 routes.MapRoute(
        "Admin", // Route name
        "{controller}/{action}/{id}", 
        new { area = "Admin", controller = "User", action = "Index", id = UrlParameter.Optional },
        new { isAdmin = new AdminRouteConstraint() }
    );
    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", 
        new { controller = "User", action = "Index", id = UrlParameter.Optional } 
    ); 
```

这样，您就可以将管理员路由到应用程序的管理区域，并为他们提供他们在那里拥有的特定功能。但这并不意味着他们需要一个管理区域。这只是我的路线定义。您可以按照您想要的方式定义路由默认值。

# html - 删除 Chrome 上表格行之间的额外空间

> ID：14526301
> 
> 赞同：0
> 
> 时间：2013-01-25T16:41:13.970
> 
> 标签：html, css, google-chrome, html-table

我有一个 HTML 表格

```
<table style="border-collapse:collapse;"> 
```

它在 IE 和 Firefox 中看起来不错，但在 Chrome 上它在行之间添加了额外的空间。我无法摆脱这些空间。我试过 cellpadding=0 和 cellspacing=0 但这会删除所有我不想要的空格。在 Chrome 中，表格现在正在扩展最大高度，这很糟糕。

![在此处输入图像描述](../Images/aeb93864fb46a1c8af2db4e5e1fd79ca.png)

好的，这是示例，左边是 Chrome，右边是 Firefox。相同的代码，常规的表格，为什么Chrome会增加这么多空间以及如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:01:56.803

看到你的图片后，我发现，它可能不是 TABLE**它是 SELECT**

此外，plain 具有简单的，没有重置到您的 .css .. 当然，它看起来会因每个浏览器而异。

提供html和css，请创建一个jsfiddle。

# ruby-on-rails-3 - 我可以在rails3 中使用delayed_job 来运行ruby 脚本吗？

> ID：14526304
> 
> 赞同：0
> 
> 时间：2013-01-25T16:41:17.357
> 
> 标签：ruby-on-rails-3, delayed-job

我有一个 Rails“应用程序”，它与完成大部分繁重工作的 API 交互。这个 API 基本上是 ruby​​ 脚本，它们被调用以在给定的时间点运行。每个脚本运行 5 到 10 分钟，具体取决于进程。我正在考虑使用某种类型的队列应用程序，例如delayed_jobs 来处理队列。我唯一担心的是，我没有找到任何说明delayed_jobs 可以执行这些ruby 脚本的文档。有没有人有做这样的事情的经验？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:29:55.747

我安装了 spawned gem 并用它来生成另一个进程作为线程并等待脚本完成。

# entity-framework - 将数据库上下文放入静态类库的优缺点

> ID：14526308
> 
> 赞同：8
> 
> 时间：2013-01-25T16:41:32.887
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, entity-framework-5

我们有一个静态类库来处理重复的多上下文任务。将 EF 数据库上下文创建为静态类的成员是不好的做法吗？

数据库上下文是出于某种原因而被丢弃的。经常处理它们可以使连接池保持“流动”，并且可能（在这里我推测）确保表不会保持锁定状态。

那么我是在为静态类中的数据库上下文带来麻烦，还是我想太多了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T16:49:58.553

IMO 这绝对不是你想做的事情。

锁定实际上并不是您将在这里遇到的主要问题。EF 只会在保存更改调用期间锁定（它实际上是使用跟踪图而不是大多数其他 ORM 使用的部分提交事务的一大好处）。

会让你感到厌烦的是跟踪图本身。EF 的工作原理（在大多数情况下）是它保留了它所见过的每个实体的副本，并遍历它们以查找更改的内容并运行一个名为 fixups 的过程，该过程使导航属性与反向链接一起使用。此过程循环遍历上下文所见过的每个实体，并在一系列操作（添加、附加、删除、保存、查询和其他一些操作）上调用。这意味着如果跟踪图很大，则此过程可能需要相当长的时间。如果你让你的上下文永远活着，那么跟踪图的大小就会趋向于你的数据库的大小，这使它变得笨拙和缓慢。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T16:51:20.280

这取决于很多事情，但这里有一些想法，例如：

*   如果您在服务层上使用 EF - 那么并发性可能是一个问题，因为我认为使用 EF 上下文不是线程安全的，即您可以同时从所有线程使用它而不会出现问题
*   如果你的实体被上下文跟踪（我认为即使你不这样做），上下文会及时变得非常大，最终它可能包含你所有的数据库实体，然后你会遇到性能问题

不管怎样，我认为这是个坏主意。

# php - Xpath 和 foreach forvever 函数

> ID：14526310
> 
> 赞同：0
> 
> 时间：2013-01-25T16:41:35.500
> 
> 标签：php, web-scraping

在这里，我有一些脚本，但是 3 个 foreach 函数太长了，并且出现了内部服务器错误。我可以用 curl 或类似的东西解决这个问题吗？

这是代码：

```
<?php

$dom = new DOMDocument();
@$dom->loadHTMLFile('http://www.auto-types.com');
$xpath = new DOMXPath($dom);
$entries = $xpath->query("//li[@class='clearfix_center']/a/@href");
$output = array();
foreach($entries as $e) {  
  $dom2 = new DOMDocument();
  @$dom2->loadHTMLFile('http://www.auto-types.com' . $e->textContent);
  $xpath2 = new DOMXPath($dom2);
  $data = array();
  $items = $xpath2->query("//div[@class='modelImage']/a/@href");
  $links = array();
  foreach($items as $item) {
    $dom3 = new DOMDocument();
    @$dom3->loadHTMLFile('http://www.auto-types.com' . $item->textContent);
    $xpath3 = new DOMXpath($dom3);   
    $konacno = array();
    $krajs = $xpath3->query("//div/@onclick");
        foreach ($krajs as $kraj) {
            $konacno[] = $kraj->textContent;
        }
  }

  $data['newLinks'] = implode(', ', $konacno);

  $output[] = $data;
}

echo '<pre>' . print_r($output, true) . '</pre>';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:02:53.087

您最好使用某种持久队列来完成这项工作。这可能是一个数据库表，甚至是一个文本文件（记住这里的锁定）。

每当您需要请求新页面时，将请求放入队列。如果您发现任何数据，请将其存储。完成后，从队列中获取下一个作业。为确保不超过脚本执行时间限制，您可以在浏览器中进行转发（如果您没有其他机会更长时间地运行您的工作）。

您甚至可以同时运行多个工作人员来抓取该页面！

# java - 如何在休眠中为自动增量提供起始值

> ID：14526312
> 
> 赞同：6
> 
> 时间：2013-01-25T16:41:39.260
> 
> 标签：java, spring, hibernate

我是新来的冬眠。如何在 Hibernate 中指定我的 ID 的起始值（比如 100000）并在我的代码中从这个值开始自动递增 ID。对此的任何帮助表示赞赏。

```
@Id
@Column (name = "ID")
@GeneratedValue(generator="increment")
@GenericGenerator(name="increment", strategy = "increment")
private Integer ID; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:55:48.257

试试这个：[http ://www.java2s.com/Code/Java/JPA/SetInitialValueOfTableGenerator.htm](http://www.java2s.com/Code/Java/JPA/SetInitialValueOfTableGenerator.htm)

JPA 有一个 @TableGenerator 注释，您可以在其中设置初始值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:40:15.553

我找到了解决这个问题的方法。我在数据库中手动输入了 ID 为 1000000 的一行，并使用了我的问题中提到的代码。下次向此表添加记录时，它将 1000000 作为最后一个值，并从该值开始递增。谢谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-03T22:35:39.540

如果第一个需要的 ID 是 1000000，则使用 @TableGenerator，但如果第一个需要的 ID 是 1000001，则使用 @SequenceGenerator。

本文以非常清晰的方式解释了差异：

[http://www.objectdb.com/java/jpa/entity/generated](http://www.objectdb.com/java/jpa/entity/generated)

# java - 有什么方法可以使用 java.net.URI 在查询 arg 中发送 %2b（编码的加号）？

> ID：14526320
> 
> 赞同：9
> 
> 时间：2013-01-25T16:42:18.463
> 
> 标签：java

我似乎找不到明确提到这一点，但如果您使用 java.net.URI，您似乎无法发送转义的加号（“%2b”）作为查询 arg 值，因为查询 arg被逃脱。

```
// bad: http://example.com/foo?a=%252b
new URI("http", null, "example.com", 80, "/foo", "a=%2b", null); 
```

尝试了一个实际的“+”字符，但它按原样发送，因此服务器会将其解释为空格。

```
// bad: http://example.com/foo?a=+
new URI("http", null, "example.com", 80, "/foo", "a=+", null); 
```

所以我猜你只需要自己对查询 arg 键和值进行百分比编码，并使用不会转义的单参数 URI 构造函数？也许让 URI 转义“路径”，因为规则很棘手（例如，“+”字符在路径中表示加号，而不是空格）：

```
// good: http://example.com/foo?a=%2b
new URI(new URI("http", null, "example.com", 80, "/foo", null, null).toASCIIString() + "?a=%2b"); 
```

此外，文档声称您可以创建这样的 URI，它将与源 URI 相同：

```
URI u = ...;
URI identical = new URI(u.getScheme(),
        u.getUserInfo(),
        u.getPath(), u.getQuery(),
        u.getFragment()); 
```

但当它包含 %2b 时，情况并非如此

```
URI u = new URI("http://example.com:80/foo?a=%2b");
URI identical = ...; // not identical! http://example.com:80/foo?a=+ 
```

令人沮丧，我想这就是为什么每个人都使用 apache commons 或 spring 类来代替？

PS：[http](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html) ://docs.oracle.com/javase/6/docs/api/java/net/URI.html引用了“以下身份也持有”部分中不存在的 URI 构造函数。它需要删除“权限”参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T17:11:50.513

我遇到了同样的麻烦。经过一番研究，我认为如果您需要加号的 %2b 编码，最好不要使用 URI 类。我正在使用这样的代码：

```
URI uri = new URI(...);
String asciiUrl = uri.toASCIIString();
String plusReplaced = asciiUrl.replace("+", "%2b"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-24T11:34:06.293

我使用 Spring 5 遇到了这个问题`RestTemplate`，它在下面使用了 apache `HttpClient`。无论我做什么，我都无法发送`%2B`，这对于 Couchbase 的非标准（呃……）REST API 来说是个问题。

此 API 期望文档 ID 中的空格在`+`URL 上被转义，并且文字加号为`%2B`.

不幸的是，`ProtocolExec`在 HttpClient 请求执行链上重写所有 URI 的方式使得无法`%2B`在 URI 的路径上发送文字。

*   文字`+`以`+`.
*   `%2B`也被发送为`+`
*   `%252B`（`%2B`与`%`转义符一起）按字面意思发送 `%252B`

我的解决方案是编写一个自定义的 HttpClientBuilder 并`MainExec`为`ProtocolExec`. 它看起来像这样：

```
/*
 * This is a hack to circumvent Apache's HttpClient otherwise inevitable URI rewriting. This rewriting made it
 * impossible to send a literal %2B in a query path as it includes a forceful reencoding that doesn't reencode the
 * '+' character. This is necessary because Couchbase decided that they were too good for following standards and
 * decided to use + as meaning " " (whitespace) in URI paths instead of the typical %20.
 *
 * As an ugly solution we wrote an HttpClientBuilder that injects a ClientExecChain that will rewrite the full path
 * turning + to spaces. Maybe future versions will make this easier to accomplish.
 */
public class CustomHttpClientBuilder extends HttpClientBuilder {

    @Override
    protected ClientExecChain decorateMainExec(final ClientExecChain requestExecutor) {
        return (
                HttpRoute route,
                HttpRequestWrapper request,
                HttpClientContext clientContext,
                HttpExecutionAware execAware) -> {
            UriComponentsBuilder uriComponentsBuilder = UriComponentsBuilder.fromUri(request.getURI());
            uriComponentsBuilder.replacePath(request.getURI().getRawPath().replace("+", "%2B"));
            request.setURI(uriComponentsBuilder.encode().build(true).toUri());

            return requestExecutor.execute(route, request, clientContext, execAware);
        };
    }
} 
```

这使用 Spring 的`UriComponentsBuilder`，但您可以将其替换为任何其他 URI 构建类，只要您最终得到格式正确的`java.net.URI`.

此外，这对路径值也是如此，但对于查询参数也是如此。你只需要替换那些而不是路径。

我真的希望没有人再为此失去一周的时间。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-29T17:16:33.397

我会使用[UriBuilder](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/UriBuilder.html)来处理所有需要编码的字符。

# android - 在活动中设置内容视图，合并标签为根？

> ID：14526325
> 
> 赞同：2
> 
> 时间：2013-01-25T16:42:32.187
> 
> 标签：android, merge, android-framelayout

我有`Activity`一个简单的布局。

活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.my_layout); 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.my.layout
        android:id="@+id/my_id"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </com.my.layout>

</FrameLayout> 
```

我想`FrameLayout`用合并标签替换，但结果我在期间收到以下错误`setContentView`：

```
01-25 17:08:24.660: E/AndroidRuntime(25837): 
java.lang.RuntimeException: Unable to start activity ComponentInfo{my.app/my.app.MyActivity}:
android.view.InflateException: <merge /> can be used only with a valid ViewGroup root and attachToRoot=true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:46:23.367

伙计，尝试删除 HoloEverywhere。它会导致合并标签出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:20:39.220

奇怪的是，这种行为似乎并不普遍正确。我可以在模拟器或我的一个 Nexus 设备上运行一个简单的示例，并且应用程序可以毫无问题地以`<merge>`标签作为层次结构的根来扩展主布局。你能在多个设备上重现这个吗？

`Window`从技术上讲，仅从 AOSP 看，这种行为在 Android和实施中是不可能的，`Activity`除非特定 OEM 修改了其行为（摩托罗拉因这样做而臭名昭著）。在 AOSP 源代码中：

1.  只有在使用父视图参数`LayoutInflater.inflate()`调用时才会出现异常。`null`
2.  `Activity`只是传递`setContentView()`给它的父母`Window`
3.  `Window`以内容视图作为父级调用`LayoutInflater.inflate()`，如果在这个阶段它为空，`RuntimeException`框架代码就会抛出一个讨厌的东西。

作为旁注，这可能不是您想要做的事情。我理解想要替换层次结构中看似无用的父级的原因，但可以保证的一件事是您的应用程序始终知道其父级是什么，因此可以正确地期望`LayoutParams`对其进行评估。使用 时`<merge>`，层次结构的根内容视图可能是`FrameLayout`、`LinearLayout`或其他，具体取决于设备上的 Android 版本，如果您希望 root`LayoutParams`以特定方式运行，这可能会导致混淆行为。

# twitter-bootstrap - Bootstrap：锚点和主体上边距/填充

> ID：14526334
> 
> 赞同：12
> 
> 时间：2013-01-25T16:42:56.967
> 
> 标签：twitter-bootstrap, anchor, margin, navbar

我正在使用带有固定在页面主体顶部的全局导航栏的 Bootstrap。

```
 <div class="navbar navbar-fixed-top navbar-inverse">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="/">MyBrand</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li><a href="#>Page 1</li>
                        <li><a href="#>Page 2</li>
                        <li><a href="#>Page 3</li>
                    </ul>
                </div>
            </div>
        </div>
    </div> 
```

我在正文顶部添加了一个 40px 的边距，以便底部的页面内容顶部不会被导航栏覆盖。

```
body {
    background-color: #f5f5f5;
    position: relative;
    margin-top: 40px;
} 
```

到那里为止，一切正常。我还使用内部锚点来简化页面内的导航，使用 Twitter 与 Bootstrap 文档中的 affix 组件使用的相同机制，使用户能够跳转到页面内的不同部分（参见[http:// twitter.github.com/bootstrap/getting-started.html](http://twitter.github.com/bootstrap/getting-started.html)）

```
<a href="#section1">Section 1</a>
<a href="#section2">Section 2</a>
<a href="#section3">Section 3</a>

[...]

<section id="section1">
    [...]
    [...]
    [...]
</section
<section id="section2">
    [...]
    [...]
    [...]
</section
<section id="section3">
    [...]
    [...]
    [...]
</section> 
```

我的问题是当用户点击时，浏览器将目标粘贴到屏幕的最顶部，内容消失*在*导航栏下。我注意到 Twitter 使用了一个技巧，目标`<section>`标签包括“padding-top: 30px;”，最接近的标签包括`<h1>`“margin-top: 10px;” CSS 指令，以便将文本显示在屏幕顶部下方 40 像素处。

我不能让我在每个部分之间“丢失”40px，我的显示器必须保持紧凑。我的问题是：有没有办法让内部锚不粘在屏幕视图的最顶部，而是远离屏幕顶部任意长度？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T14:00:58.243

最后，我想出了如何**轻松**解决这个问题：

```
body {
    background-color: #f5f5f5;
    position: relative;
    margin-top: 40px;
}

section {
    padding-top:40px;
    margin-top:-40px;
} 
```

这意味着在正文顶部添加了 40px 的边距，在部分顶部添加了 40px 的内边距，还添加了负的 40px 边距以向上移动它们各自的预期位置，当单击锚点后，浏览器将显示绘制到一个部分。

希望这有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-16T05:24:34.347

为了让它滚动到正确的位置并在滚动页面时使所选菜单项正确，您需要`padding-top: 40px;`在锚点上设置，并在锚点`margin-bottom: -40px;`的上一个兄弟上设置。

您可以使用 JS 片段来实现这一点，该片段将从导航菜单中找到元素并应用样式更改。

```
$("header .nav a[href!=#]").each(function(){
    $($(this).attr("href")).css("padding-top", "40px").prev().css("margin-bottom", "-40px");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-08T09:28:16.523

如果您的应用程序可以应用 javascript，那么以下 javascript 也可以正常工作：

```
function maybeScrollToHash() {
    if (window.location.hash && $(window.location.hash).length) {
        var newTop = $(window.location.hash).offset().top - $('.navbar-fixed-top').height() + parseInt($('body').css('padding-top'),10);
        $(window).scrollTop(newTop);
    }
}

$(window).bind('hashchange', function() {
maybeScrollToHash();
});

maybeScrollToHash(); 
```

这是对此处找到的答案的轻微修改：[https ://github.com/twbs/bootstrap/issues/193](https://github.com/twbs/bootstrap/issues/193)

唯一的区别是上面的代码适用于*navbar-fixed-top*类。

# php - 将变量传递给 helper.php

> ID：14526349
> 
> 赞同：1
> 
> 时间：2013-01-25T16:43:36.747
> 
> 标签：php, variables, joomla

此刻脑子里有些空白。我有一个输入字段，并尝试在提交表单时将输入的值传递给 helper.php 中的函数

**默认的.php**

```
<input name="value" type="text" />
<input name="delete" type="submit" value="submit" /> 
```

**mod_xxxxxx.php**

```
if(isset($post['delete'])) {
    $delete = $post['value'];
    modXxxxxxxHelper::delete($delete);
} 
```

**助手.php**

```
function delete($delete) {
    $value = //get the variable 
} 
```

我怎样才能定义输入字段的值`$value`？

**请注意，我使用的是 Joomla 2.5 编码标准，因此`$post`已经定义并且可以正常工作**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:44:07.987

由于您要传递`$post['value']`给该方法，因此您可以使用`$delete`

```
function delete($delete) {
    // $delete would have the value of $post['value']
} 
```

# ios - UITableViewCell 命中区域

> ID：14526352
> 
> 赞同：0
> 
> 时间：2013-01-25T16:43:51.453
> 
> 标签：ios, uitableview

我不明白为什么我不能点击表格视图单元格的最右侧。似乎命中区域不包括我在下面突出显示的红色区域。我有像细节披露这样的按钮，但我只能点击其中的一小部分。

![命中区域](../Images/6751a2fd2f26f37b34d2cd4e362fdd00.png)

**有没有更好的方法来实现这个功能？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:06:14.040

我不完全确定您要做什么，但是如果您实际上将这些右侧控件设置`accessoryView`为它们各自单元格的，而不是将它们直接添加到`contentView`. 这是专门为此目的设计`accessoryView`的内置部分；`UITableViewCell`它将控件放置在右侧并`contentView`为您处理单元格的大小调整。

[您可以在Apple 的 Table View Programming Guide 的这一部分中](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html)阅读有关`UITableViewCell`解剖学的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:57:42.523

我不是 100% 确定这会奏效，但在

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

可以设置：

```
cell.accessoryType = UITableViewCellAccessoryNone; 
```

这可以防止最右侧区域仅检测单元格选择触摸。

我希望这有帮助。

# javascript - 多个 ko.obersvable 分配给相同的参考 - 不好的做法？

> ID：14526353
> 
> 赞同：0
> 
> 时间：2013-01-25T16:43:51.693
> 
> 标签：javascript, jquery, knockout.js

我正在修改一些淘汰代码，我遇到了这个：

```
this.edit = ko.observable();
this.selected = ko.observable();
this.clicked = ko.observable(); 
```

为同一个 ko.observable 分配多个引用对我来说没有意义。这样做有什么原因吗？

我认为它应该是这样的：

```
this.genericName = ko.observable(); 
```

然后在使用 this.edit、this.selected 或 this.clicked 的任何地方使用 this.genericName。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:45:45.993

A`ko.observable();`返回一个新的可观察属性，这与具有一组可观察属性的对象（如 Backbone 中的模型对象）不同。要拥有一个具有多个可观察属性的对象，您需要使用`ko.observable()`工厂方法创建多个可观察对象。

你可以看到它们是独立的：

```
var a = ko.observable();
var b = ko.observable();
a(1);
b(2);
console.log(a()); // prints 1 
```

# python - 为什么在 try 块中出现 MultipleObjectsReturned 错误？

> ID：14526355
> 
> 赞同：3
> 
> 时间：2013-01-25T16:43:53.547
> 
> 标签：python, django, exception

对此的任何帮助都会很棒。我正在使用 python 2.7 和 django 1.2 这是我的代码：

```
for save in saved: #list to iterate
    try:
        sect = obj.get(name=save) #obj is a RelatedManager
    except: #if two sections have the same name
        sect = obj.filter(name=save)
    else:
        #finish my code 
```

`MultipleObjectsReturned`每次遇到`get()`语句时我都会收到错误消息。我不是 python 专家，所以我想我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T16:55:55.850

两个对象的`name`值等于`save`

使用时`get`返回的行数超过 1 行[`MultipleObjectsReturned`](https://docs.djangoproject.com/en/dev/ref/exceptions/#multipleobjectsreturned)

我认为你应该明确地捕捉到这一点，因为你的 except 也会捕捉`DoesNotExist`到错误（以及所有其他错误）

```
 from django.core.exceptions import MultipleObjectsReturned

    try:
        sect = obj.get(name=save) #obj is a RelatedManager
    except MultipleObjectsReturned: #if two sections have the same name
        sect = obj.filter(name=save)[0]
    else:
        #finish my code 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T16:49:01.520

因为您在数据库中有超过 1 条 name=save 的记录。如果您只想要一个或单独正确处理这种情况，请使用 filter() 并在索引 0 处获取一个。

# c# - UI 仍然使用 backgroundWorker 冻结

> ID：14526356
> 
> 赞同：2
> 
> 时间：2013-01-25T16:43:55.547
> 
> 标签：c#, wpf, multithreading, backgroundworker

我对 WPF 很陌生。我正在开发一个 PRISM 应用程序，并希望在更新可枚举时更新 UI。我在我的模型视图中使用 backgroundWorker 来更新枚举。一切正常，直到它自己的枚举被更新然后用户界面冻结！一位朋友告诉我，我也许可以使用`yield`关键字，但我不太明白。

这是代码：

```
public void ChangeCollection()
    {
        BackgroundWorker worker = new BackgroundWorker();

        // Set workers job
        worker.DoWork += (sender, e) =>
            {
                RunOnUIThread(() => IsBusy = true);
                e.Result = GetPrimes();
            };

        // On Complete
        worker.RunWorkerCompleted += (sender, e) =>
            {
                RunOnUIThread(() =>
                    {
                        IsBusy = false;

                        // HERE IS WHERE IT GETS STUCK
                        Numbers = new ObservableCollection<int>
                            ((IEnumerable<int>)e.Result);
                    });
            };

        // Start background operation
        worker.RunWorkerAsync();
    } 

    public ObservableCollection<int> Numbers 
    { 
        get {return _Numbers;} 
        set
        {
            _Numbers = value;
            RaisePropertyChanged(() => Numbers);
        }
    }

    public IEnumerable<int> GetPrimes()
    {
        List<int> primes = new List<int>();

        for (int i = 0; i < 100000; i++)
        {
            bool IsPrime = true;

            for (int j = 2; j < i; j++)
            {
                if (i % j == 0)
                    IsPrime = false;
            }

            if (IsPrime)
                primes.Add(i);
        }

        return primes;
    } 
```

任何建议将不胜感激！

谢谢，暗里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:05:21.700

`yield`在这里帮不了你。`RunWorkerCompleted`在 UI 线程上执行。显然实例化`ObservableCollection<int>`需要很长时间。最简单的解决方案可能是将实例化也移动到后台线程 ( `DoWork`)。它也可能是一个`PropertyChanged`需要很长时间的事件处理程序，在这种情况下，它也应该在后台线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:12:23.627

这里有几件事。1）当包含它的对象被实例化时，应该创建您的工作人员及其代表。

```
public class ViewModel 
{
    BackgroundWorker _primeWorker;

    public ViewModel()
    {
        _primeWorker = new BackgroundWorker;

        _primeWorker.DoWork += ...
    }

    public void AddSomeNumbers()
    {
         if(_primerWorker.IsBusy == false)
              _primeWorker.RunWorkerAsync();
    }
} 
```

2) 应该在实例化包含它的对象时实例化您的集合，以避免在使用此类的对象调用`get`.

3) 添加这么多项目会导致缓慢，因为每次添加数字时都会触发 UI 线程必须处理的事件。

此链接有更多信息可以帮助您。[http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

# ruby-on-rails-3 - 日期的自定义验证

> ID：14526357
> 
> 赞同：0
> 
> 时间：2013-01-25T16:43:59.470
> 
> 标签：ruby-on-rails-3

我正在尝试创建一个自定义验证来评估创建记录所请求的日期是否可用。

这是我的表计划架构

```
 create_table "schedules", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "doctor_id"
    t.boolean  "sun"
    t.boolean  "mon"
    t.boolean  "tue"
    t.boolean  "wed"
    t.boolean  "thu"
    t.boolean  "fri"
    t.boolean  "sat"
  end 
```

例如，如果请求的日期是星期五并且`schedule.fri`为真，则可以创建记录，否则会引发错误。

有没有办法遍历表计划的数据字段来评估哪些天返回真或假，以便我可以将它与请求的日期进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:08:19.380

我想你可能正在寻找这样的东西。假设您正在尝试验证`Appointment`模型，验证可能类似于：

```
class Appointment
  # this assumes that the appointment has at least two fields:
  # doctor_id : the same value as in the Schedule object
  # adate : a string in the form "mon", "tue", etc.
  validate :doctor_is_free
  def doctor_is_free 
    schedule = Schedule.where(doctor_id: self.doctor_id).first
    #return the day of a date. e.g. "sun"
    requested_day = adate.to_date.strftime("%a").downcase

    # this line will send a request to the Schedule instance using
    # the value of adate as the method name. So if adate == 'tue' and
    # schedule.tue = false then this will add an error to the validation.
    unless schedule.send(requested_day.to_sym)
      self.errors[:adate] << "The doctor is not available on #{ self.adate }"
    end
  end
end 
```

# php - 在 php 中编写 csv 文件，但也应用排序/过滤器

> ID：14526358
> 
> 赞同：0
> 
> 时间：2013-01-25T16:44:03.297
> 
> 标签：php, excel, csv

我正在尝试在 php 中编写一个 csv 文件，这样当用户单击一个图标时，它将使用我的数据库中的数据生成一个 csv 文件。

一切正常，我有三列：姓名、日期、年龄

我想知道是否在 php 中，我可以应用过滤器。例如，在 excel 中，我可以单击第一行的排序和筛选 -> 筛选，这将创建一个具有多个功能的下拉菜单。

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:56:34.057

您可以在从数据库中提取的同时进行排序/过滤，然后将过滤和排序的数据写入 CSV 文件。

如果您通过从网页上的表单中获取输入来执行此操作，请确保在服务器端验证输入。

# wpf - 以编程方式添加的 MenuItem 导致绑定错误

> ID：14526371
> 
> 赞同：8
> 
> 时间：2013-01-25T16:44:25.867
> 
> 标签：wpf, binding, styles

我有一个`mnuMainMenu`由几个子菜单组成的主菜单。其中一个子菜单`mnuMostRecentDirs`本身就是另一个菜单，它使用绑定到 ObservableCollection 的 ItemSource 属性在运行时生成项目。基本上它显示最近使用的文件夹列表。

问题是添加的 MenuItems 动态生成以下数据绑定错误：

[System.Windows.Data 错误：4：找不到与引用'RelativeSource FindAncestor，AncestorType='System.Windows.Controls.ItemsControl'，AncestorLevel='1''的绑定源。BindingExpression:Path=Horizo​​ntalContentAlignment; 数据项=空；目标元素是'MenuItem'（名称=''）；目标属性是“Horizo​​ntalContentAlignment”（类型“Horizo​​ntalAlignment”）](https://stackoverflow.com/questions/14510931/is-there-a-way-to-determine-where-is-a-wpf-binding-declared-created)

主菜单的 XAML 声明如下所示：

```
 <!-- Main Menu -->
 <Menu x:Name="mnuMainMenu" Height="Auto" IsMainMenu="True">

    <!--- ... more menu declarations before ... -->

    <MenuItem x:Name="mnuitemWorkDirs" Header="Directories">
       <MenuItem x:Name="mnuNewDir"
                 Header="New" 
                 Style="{StaticResource MenuItem}" 
                 Command="{x:Static cmds:Commands.NewDirectory}" />
       <MenuItem x:Name="mnuCurrentDir"
                 Header="Current" 
                 Style="{StaticResource MenuItem}"
                 Command="{x:Static cmds:Commands.CurrentDirectory}" />
       <MenuItem x:Name="mnuMostRecentDirs" 
                 Header="Recent Directories.."
                 Style="{StaticResource MenuItem}"
                 ItemsSource="{Binding ElementName=theMain, Path=MostRecentFoldersList}" />
    </MenuItem>

    <!--- ... more menu declarations after ... -->
 </Menu> 
```

以下代码在运行时将文件夹添加到可观察集合中：

```
 private void PopulateMostRecentFoldersList(string[] paths) 
    {
        MostRecentFoldersList.Clear();

        if (paths == null)
           return;

        foreach (var fullPath in paths)
        {                                        
            var mi = new MenuItem();
            mi.Command = Commands.ChooseWorkingDirectory;
            mi.CommandParameter = fullPath;

            string name = System.IO.Path.GetFileName(fullPath);

            mi.Header = name.ToUpper();                

            // removing this style completely
            //     or manually setting the HorizontalContentAlignment property here 
            //     prevents the binding error from happening
            mi.Style = (Style)FindResource("MenuItem");                    

            MostRecentFoldersList.Add(mi);
        }
    } 
```

我能够将问题追溯到以 MenuItem 样式声明的绑定，该绑定未在我的应用程序中声明。我认为这是菜单项的默认样式..

其他菜单项似乎都没有任何绑定问题，并且相同样式应用于所有菜单项。

所以我认为问题一定是我动态添加 MenuItems 的方法。更具体地说，似乎在将项目添加到 ItemsControl 之前将样式应用于 MenuItem。

到目前为止，在将 MenuItem 添加到可观察集合之前，我只能在代码中设置 Horizo​​ntalContentAlignment 属性，但这只是一个创可贴，它只是真正掩盖了真正的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T19:19:01.173

正如@LPL 所指出的——事实证明这是 WPF 框架中的一个已知（已确认）问题。根据在[此处](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/8028a46b-3080-40ad-aed2-e9417eb25381)和[此处](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/42cd1554-de7a-473b-b977-ddbd6298b3d0)的 MSDN 支持论坛上找到的信息，似乎将 MenuItem 的 ItemsSource 设置为 MenuItems 的集合时，它没有按正确的顺序处理事情

每个 MSDN 支持人员：

> 当您将 MenuItem.ItemsSource 设置为包含 MenuItems 的集合时，就会发生这种情况。此错误已在内部处理，因此您可以不理会它。
> 
> 或者您可以显式设置 MenuItem.Horizo​​ntalContentAlignment 属性和 VerticalContentAlignment 属性以避免此错误。您可以简单地将以下代码放在 application.Resource 中来实现这一点。
> 
> ```
>  <Style TargetType="MenuItem">
>    <Setter Property="HorizontalContentAlignment" Value="Left"/>
>    <Setter Property="VerticalContentAlignment" Value="Center"/>
>   </Style> 
> ```

我希望这可以帮助其他有同样问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:53:17.113

我真的认为从代码中添加 UIelemnts 不是一个好主意或“与 WPF 兼容”。

我会建议这样的事情：

```
 <Menu>
        <MenuItem Header="MainMenu" Name="sampleMenu">
            <MenuItem.ItemTemplate>
                <DataTemplate>
                    <MenuItem Header="{Binding Path=PathtoNameOfRecentDocObject}"/>
                </DataTemplate>
            </MenuItem.ItemTemplate>
        </MenuItem>
    </Menu> 
```

并将 MainMenu 的 ItemsSource 设置为`MostRecentFoldersList`

# javascript - 如何使用 jQuery 1.5.2 (Drupal7) 获取表 TD-offset()？

> ID：14526374
> 
> 赞同：1
> 
> 时间：2013-01-25T16:44:29.343
> 
> 标签：javascript, jquery, html, drupal-7, offset

我需要在 Drupal7 生成的 HTML 站点（已安装 jQuery_update）中找到表格 TD 元素的正确 .offset() 位置。我用

```
 $('#contenttable td').each(function(){ 
            console.log($(this).offsetParent());
            console.log($(this).offset().left);
        }); 
```

在我的

```
jQuery(function($) {
    //$(document).ready(function(){ 
```

我的 script.js 获得 offset().left-position 但控制台总是跟踪我所有 TD 的“0”。

当我使用 Safari 开发者控制台时，输出

```
jQuery('#contenttable td:nth-child(2)').offset().left 
```

是'1728'，所以它似乎完全有效。但为什么它在我的 DOCUMENT.READY 中不起作用？

.offsetParent() 是 BODY 顺便说一句......并且将某些父母 DIV 的位置更改为绝对或相对也没有任何改变。太好了！

编辑：似乎根本不适用于任何元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:15:59.760

不幸的是，`jQuery.offset`它不适用于隐藏元素，因为浏览器根本不会费心渲染它们。因此，如果可能，您需要使元素可见以获取其`offset`. 根据[jquery：获取隐藏元素的偏移量](https://stackoverflow.com/questions/5974323/jquery-get-the-offset-of-hidden-element)，您应该能够调用`.show()`表/内容，获取所需的`offset`，然后调用`.hide()`它。这个显示/隐藏对用户来说不应该是显而易见的，因为它不会重新绘制页面，因为它在同一个执行事件中。

# c# - 当我尝试访问任务的 Result 属性时，为什么这个异步操作会挂起？

> ID：14526377
> 
> 赞同：114
> 
> 时间：2013-01-25T16:44:45.030
> 
> 标签：c#, asynchronous, async-await, task-parallel-library

我有一个多层 .Net 4.5 应用程序使用 C# 的 new`async`和`await`关键字调用一个方法，该方法只是挂起，我不明白为什么。

在底部，我有一个扩展我们的数据库实用程序的异步方法`OurDBConn`（基本上是底层`DBConnection`和`DBCommand`对象的包装器）：

```
public static async Task<T> ExecuteAsync<T>(this OurDBConn dataSource, Func<OurDBConn, T> function)
{
    string connectionString = dataSource.ConnectionString;

    // Start the SQL and pass back to the caller until finished
    T result = await Task.Run(
        () =>
        {
            // Copy the SQL connection so that we don't get two commands running at the same time on the same open connection
            using (var ds = new OurDBConn(connectionString))
            {
                return function(ds);
            }
        });

    return result;
} 
```

然后我有一个中级异步方法，它调用它来获得一些运行缓慢的总计：

```
public static async Task<ResultClass> GetTotalAsync( ... )
{
    var result = await this.DBConnection.ExecuteAsync<ResultClass>(
        ds => ds.Execute("select slow running data into result"));

    return result;
} 
```

最后我有一个同步运行的 UI 方法（一个 MVC 操作）：

```
Task<ResultClass> asyncTask = midLevelClass.GetTotalAsync(...);

// do other stuff that takes a few seconds

ResultClass slowTotal = asyncTask.Result; 
```

问题是它永远挂在最后一行。如果我打电话，它会做同样的事情`asyncTask.Wait()`。如果我直接运行慢速 SQL 方法大约需要 4 秒。

我期望的行为是，当它到达时`asyncTask.Result`，如果它没有完成，它应该等到它完成，一旦它应该返回结果。

如果我使用调试器单步执行，SQL 语句完成并且 lambda 函数完成，但永远不会到达该`return result;`行。`GetTotalAsync`

知道我做错了什么吗？

关于我需要在哪里进行调查以解决此问题的任何建议？

这可能是某个地方的僵局，如果是这样，有没有直接的方法可以找到它？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-01-25T17:27:56.163

是的，这是一个僵局。TPL 的一个常见错误，所以不要难过。

当您编写`await foo`时，默认情况下，运行时会在方法启动所在的同一个 SynchronizationContext 上安排函数的延续。在英语中，假设您`ExecuteAsync`从 UI 线程中调用了您的。您的查询在线程池线程上运行（因为您调用了`Task.Run`），但随后您等待结果。这意味着运行时将安排您的“ `return result;`”行在 UI 线程上运行，而不是将其安排回线程池。

那么这个僵局是怎么发生的呢？想象一下，您只有以下代码：

```
var task = dataSource.ExecuteAsync(_ => 42);
var result = task.Result; 
```

所以第一行开始了异步工作。然后第二行*阻塞了 UI 线程*。因此，当运行时想要在 UI 线程上运行“返回结果”行时，它不能在`Result`完成之前执行此操作。但是当然，在返回发生之前不能给出结果。僵局。

这说明了使用 TPL 的一个关键规则：当您`.Result`在 UI 线程（或其他一些花哨的同步上下文）上使用时，您必须小心确保 Task 所依赖的任何内容都不会被调度到 UI 线程。否则邪恶就会发生。

所以你会怎么做？选项 #1 在任何地方都使用 await ，但正如您所说，这已经不是一个选项。可供您使用的第二个选项是简单地停止使用 await。您可以将两个函数重写为：

```
public static Task<T> ExecuteAsync<T>(this OurDBConn dataSource, Func<OurDBConn, T> function)
{
    string connectionString = dataSource.ConnectionString;

    // Start the SQL and pass back to the caller until finished
    return Task.Run(
        () =>
        {
            // Copy the SQL connection so that we don't get two commands running at the same time on the same open connection
            using (var ds = new OurDBConn(connectionString))
            {
                return function(ds);
            }
        });
}

public static Task<ResultClass> GetTotalAsync( ... )
{
    return this.DBConnection.ExecuteAsync<ResultClass>(
        ds => ds.Execute("select slow running data into result"));
} 
```

有什么不同？现在任何地方都没有等待，因此没有任何内容被隐式调度到 UI 线程。对于像这样只有一个返回值的简单方法，使用 " `var result = await...; return result`" 模式是没有意义的；只需删除 async 修饰符并直接传递任务对象即可。如果没有别的，它的开销会更少。

选项 #3 是指定您不希望等待安排回 UI 线程，而只是安排到线程池。您可以使用该`ConfigureAwait`方法执行此操作，如下所示：

```
public static async Task<ResultClass> GetTotalAsync( ... )
{
    var resultTask = this.DBConnection.ExecuteAsync<ResultClass>(
        ds => return ds.Execute("select slow running data into result");

    return await resultTask.ConfigureAwait(false);
} 
```

如果您在等待任务，通常会安排到 UI 线程；等待结果`ContinueAwait`将忽略您所处的任何上下文，并始终安排到线程池。这样做的缺点是您必须在 .Result 所依赖的所有函数中*到处*`.ConfigureAwait`使用它，因为任何遗漏都可能导致另一个死锁。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-01-25T18:30:28.733

[正如我在博客中所描述的](https://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)，这是典型的混合`async`死锁场景。Jason 描述得很好：默认情况下，每个地方都会保存一个“上下文”并用于继续该方法。这个“上下文”是当前的，除非它是它，在这种情况下它是当前的。当该方法尝试继续时，它首先重新进入捕获的“上下文”（在本例中为 ASP.NET ）。ASP.NET一次只允许上下文中的一个线程，并且上下文中已经有一个线程 - 线程阻塞在.`await``async``SynchronizationContext``null``TaskScheduler``async``SynchronizationContext``SynchronizationContext``Task.Result`

有两个指导方针可以避免这种僵局：

1.  一直使用`async`下去。你提到你“不能”这样做，但我不知道为什么不这样做。.NET 4.5 上的 ASP.NET MVC 当然可以支持`async`动作，而且做起来也不难。
2.  `ConfigureAwait(continueOnCapturedContext: false)`尽可能多地使用。这会覆盖在捕获的上下文上恢复的默认行为。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-11-13T00:57:30.077

我处于同样的死锁情况，但在我的情况下，从同步方法调用异步方法，对我有用的是：

```
private static SiteMetadataCacheItem GetCachedItem()
{
      TenantService TS = new TenantService(); // my service datacontext
      var CachedItem = Task.Run(async ()=> 
               await TS.GetTenantDataAsync(TenantIdValue)
      ).Result; // dont deadlock anymore
} 
```

这是一个好方法，有什么想法吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-22T19:36:43.097

只是为了添加到接受的答案（没有足够的代表发表评论），我在阻止使用 , 事件时出现了这个问题`task.Result`，尽管`await`它下面的每个事件都有`ConfigureAwait(false)`，如下例所示：

```
public Foo GetFooSynchronous()
{
    var foo = new Foo();
    foo.Info = GetInfoAsync.Result;  // often deadlocks in ASP.NET
    return foo;
}

private async Task<string> GetInfoAsync()
{ 
    return await ExternalLibraryStringAsync().ConfigureAwait(false);
} 
```

问题实际上在于外部库代码。异步库方法试图在调用同步上下文中继续，无论我如何配置等待，导致死锁。

因此，答案是推出我自己的外部库代码版本`ExternalLibraryStringAsync`，以便它具有所需的延续属性。

* * *

**出于历史目的的错误答案**

在经历了很多痛苦和痛苦之后，我找到了[隐藏在这篇博](http://weblogs.asp.net/pglavich/asp-net-web-api-request-response-usage-logging)文中的解决方案（Ctrl-f 表示“死锁”）。它围绕使用`task.ContinueWith`而不是裸露`task.Result`。

之前的死锁示例：

```
public Foo GetFooSynchronous()
{
    var foo = new Foo();
    foo.Info = GetInfoAsync.Result;  // often deadlocks in ASP.NET
    return foo;
}

private async Task<string> GetInfoAsync()
{ 
    return await ExternalLibraryStringAsync().ConfigureAwait(false);
} 
```

避免这样的死锁：

```
public Foo GetFooSynchronous
{
    var foo = new Foo();
    GetInfoAsync()  // ContinueWith doesn't run until the task is complete
        .ContinueWith(task => foo.Info = task.Result);
    return foo;
}

private async Task<string> GetInfoAsync
{
    return await ExternalLibraryStringAsync().ConfigureAwait(false);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-01T07:06:25.923

快速回答：更改此行

```
ResultClass slowTotal = asyncTask.Result; 
```

到

```
ResultClass slowTotal = await asyncTask; 
```

为什么？您不应该使用 .result 来获取除控制台应用程序之外的大多数应用程序中的任务结果，如果这样做，您的程序将在到达那里时挂起

如果你想使用 .Result，你也可以试试下面的代码

```
ResultClass slowTotal = Task.Run(async ()=>await asyncTask).Result; 
```

# c# - 如何在将 web.response 流保存到文本文件之前对其进行格式化

> ID：14526380
> 
> 赞同：0
> 
> 时间：2013-01-25T16:44:58.367
> 
> 标签：c#, asp.net, regex

我正在使用 web.response 方法作为网络爬虫收集信息。我将它收集到一个字符串中，然后将其保存到一个文本文件中。然后我使用正则表达式搜索该文本文件。现在的问题是，当我使用正则表达式搜索该文本文件时，我无法正确执行此操作，因为文本文件中有许多随机换行符。

我的问题是“有没有办法让我通过 web.response 方法获得的 XML (HTML) 文档在保存到文本文件之前可以正确格式化，这样文本中就没有随机空格和换行符。我什至不能在此处发布未格式化的 HTML，否则我会这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:47:58.407

Internet 可能会讨厌你这样做，但如果你有预定义的标准，你可以转换字符串，例如：

```
var formattedHtml = html.Replace(Environment.NewLine, ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:02:40.883

这可以解决你的问题。但从性能的角度来看，它是一个`bad solution`。

对响应执行以下操作

1.  提取`>`和`<`符号之间的内容并执行修剪空白操作
2.  删除所有剩余的新行（如果存在）

另一个`better solution`将使用更好的正则表达式来搜索字符串

# spring - 如何在我的 spring webapp 中从命令行覆盖一个属性

> ID：14526386
> 
> 赞同：6
> 
> 时间：2013-01-25T16:45:30.393
> 
> 标签：spring, properties

我有这个属性设置

```
<bean id="preferencePlaceHolder"
      class="org.springframework.beans.factory.config.PreferencesPlaceholderConfigurer">
    <property name="locations" ref="propertiesLocations" />
</bean>
<beans profile="dev, testing">
    <util:list id="propertiesLocations">
        <value>classpath:runtime.properties</value>
        <value>classpath:dev.properties</value>
    </util:list>
</beans>
... 
```

runtime.properties 中有一个属性，就像这样

```
doImportOnStartup=false 
```

我想偶尔这样做

```
mvn jetty:run -DdoImportOnStartup=true 
```

并让系统属性优先。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:44:07.830

这可能不是您想要的，但无论如何这是我的属性加载 xml。这些位置是按顺序加载的，因此最后找到的位置将覆盖较早的位置，因此首先是类路径（即 war），然后是文件系统上的 env 特定文件。我更喜欢这种方法，因为它是一个指向外部文件的 1 次配置，但是您只需在需要时更改该外部文件，无需再配置 Spring 或 JVM 参数。最终位置是寻找一个 -Dconfig JVM arg，您可以为覆盖 prop 文件提供完整路径。

希望这可以帮助。

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
</bean>
<bean class="org.springframework.web.context.support.ServletContextPropertyPlaceholderConfigurer">
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
    <property name="searchContextAttributes" value="true" />
    <property name="contextOverride" value="true" />
    <property name="ignoreResourceNotFound" value="true" />
    <property name="locations">
        <list>
            <value>classpath:*.properties</value>
            <value>file:${HOME}/some-env-specific-override.properties</value>
            <value>${config}</value>
        </list>
    </property>
</bean> 
```

# asp.net - 在调用成员资格的方法上创建 MSTest 单元测试 - ASP.NET 应用程序

> ID：14526388
> 
> 赞同：0
> 
> 时间：2013-01-25T16:45:33.717
> 
> 标签：asp.net, entity-framework-4, mocking, mstest

我有一个 ASP.NET 应用程序框架 4，我正在尝试测试一个方法，在该方法中它在某些时候调用：

```
var userKey = (Guid)Membership.GetUser().ProviderUserKey; 
```

当然，因为没有人连接我收到错误“对象引用未设置为对象的实例”。这是正常的...

有没有人有办法解决这个问题？我应该尝试嘲笑会员资格（但被密封这很敏感）还是应该尝试更换服务？

感谢您的帮助！

编辑：这不是 MVC 应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:26:11.383

我想我找到了答案，我最终使用了这样的东西：

```
 Mock<IStaticMembershipService> membershipMock = new Mock<IStaticMembershipService>();
        Mock<MembershipUser> userMock = new Mock<MembershipUser>();

        userMock.Setup(u => u.ProviderUserKey).Returns(guid);
        membershipMock.Setup(s => s.GetUser()).Returns(userMock.Object); 
```

班上：

```
public interface IStaticMembershipService
{
    MembershipUser GetUser();

    void UpdateUser(MembershipUser user);
}

public class StaticMembershipService : IStaticMembershipService
{
    public System.Web.Security.MembershipUser GetUser()
    {
        return Membership.GetUser();
    }

    public void UpdateUser(MembershipUser user)
    {
        Membership.UpdateUser(user);
    }
} 
```

# ruby-on-rails - 有没有一种 DRY 方法可以将绑定变量传递给 AR 关系？

> ID：14526389
> 
> 赞同：14
> 
> 时间：2013-01-25T16:45:37.803
> 
> 标签：ruby-on-rails, rails-activerecord, active-relation

我有这样的代码：

```
t = "%#{term}%"
where('name like ? or email like ? or postcode like ?', t, t, t) 
```

如您所见，它正在跨多个字段执行搜索。

有没有办法避免重复的 t？这让我觉得很脏。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-25T16:49:59.733

您可以使用命名占位符来执行此操作：

```
where('name LIKE :name OR email LIKE :name OR postcode LIKE :name', :name => t) 
```

这通常是在查询中多次重复奇异值的最佳方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:49:40.537

```
t = "%#{term}%"
where('name || email || postcode like ?', t) 
```

# algorithm - 最佳优先搜索如何受到高原和局部最大值的影响？

> ID：14526392
> 
> 赞同：2
> 
> 时间：2013-01-25T16:45:45.710
> 
> 标签：algorithm, prolog, artificial-intelligence, state-space

我知道这个特定的算法存在这些问题，但是当我研究每个算法的实际含义时，我无法掌握这个概念。有人可以解释这些问题是如何产生的，以及“山脊与小巷”是否会影响它。

下面是一个您可能会觉得有用的相关问题： [与人工智能中的最佳优先搜索相关的问题是什么？](https://stackoverflow.com/questions/13950307/what-are-the-problems-associated-to-best-first-search-in-artificial-intelligence)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:22:31.647

考虑一下自己穿越风景，试图到达最高峰。使用 BFS，您唯一的规则就是向上。如果你到达一座小山顶会发生什么？如果你到达平地，你会去哪里？

# vim - Vim：提取文本文档中括号括起来的引用

> ID：14526402
> 
> 赞同：0
> 
> 时间：2013-01-25T16:46:20.753
> 
> 标签：vim

我想使用 Vim 从大型文本文档中提取引用。这些引用被括号括起来，括号内可能包含单个引用，或者可能包含多个引用，例如，在北大西洋发现了一些分类群（Oliver 和 Allen，1980a），在南极水域发现了其他分类群（Burne，1920；Knudsen， 1970）。我不确定是否最好尝试提取模式（即括号内的任何文本），或者是否尝试删除所有与模式不匹配的文本。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:11:08.637

[这个 Vim Tips Wiki 页面](http://vim.wikia.com/wiki/Copy_the_search_results_into_clipboard)包含许多方法和替代实现，可以将模式的所有匹配项提取到寄存器中。

您只需要为您的引用提出一个模式（例如`/(\zs.\{-}\ze)/)`，将其放入函数中，然后您可以将寄存器内容粘贴到相同或新的缓冲区中，并进行任何进一步的处理（例如拆分多个引用）。

# 3d - XNA/Monogame，绘制多个剪切/倾斜精灵的最快方法

> ID：14526403
> 
> 赞同：7
> 
> 时间：2013-01-25T16:46:21.340
> 
> 标签：3d, xna, drawing, monogame, spritebatch

我通常`SpriteBatch`在 XNA/Monogame 中为 2d 游戏工作，并且最近刚刚研究了诸如`DrawUserIndexedPrimatives`之类的 3D 绘图方法。我正在做一个项目，我们的动画师希望能够剪切精灵和纹理。

随着您可以在开始剪切对象`SpriteBatch`时传入一个矩阵。`SpriteBatch`就像是：

```
//translate object to origin
Matrix translate1 = Matrix.CreateTranslation(-rectangle.X, -rectangle.Y, 0);

//skew the sprite 33 degrees on the X and Y axis
Matrix skew = Matrix.Identity;
skew.M12 = (float)Math.Tan(33 * 0.0174532925f);
skew.M21 = (float)Math.Tan(33 * 0.0174532925f);

//translate object back
Matrix translate2 = Matrix.CreateTranslation(rectangle.X, rectangle.Y, 0);
Matrix transform = translate1 * skew * translate2;

_spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.NonPremultiplied,
                    SamplerState.PointWrap, DepthStencilState.Default,
                    RasterizerState.CullCounterClockwise, null, transform);
_spriteBatch.Draw(_texture, rectangle, Color.White);
_spriteBatch.End(); 
```

这样做的明显缺点是它需要您`SpriteBatch`为每个剪切的精灵进行新的开始和结束调用。我们目前只需要 2 次调用即可`SpriteBatch`开始我们的游戏。一个用于 UI，一个用于 World 的东西。我们的美工想要使用剪切来处理摇摆的树木或为生物的腿和四肢设置动画，所以如果我们给他们选择的话，我可以看到这个数字会跃升至 10 多个单独的批次。

平均水平有大约 250 个元素，每个元素包含 10-20 个精灵。

我已经为 Android 编写了一个测试，该测试调用了 1000 个精灵。在没有任何倾斜的情况下，它可以在大约 11 秒或大约 53fps 内绘制全部 1000、600 次。但如果我每十个精灵倾斜一次（添加 100 个新`SpriteBatch`调用），则需要 47 秒，或大约 12fps。

这真的很糟糕。即使只有 200 个精灵（每十分之一倾斜），测试也会下降到 28fps。

因此，我还使用使用`DrawUserIndexedPrimitives`. 每个 Quad 使用`BasicEffect`在 Game 类中创建并通过`Sprite`类构造函数传入的共享。我在每个之前设置了世界矩阵和纹理，`pass.Apply()`如下所示：

```
if (_basicEffect != null)
{
     foreach (EffectPass pass in _basicEffect.CurrentTechnique.Passes)
     {
        _basicEffect.World = Transform;
        _basicEffect.Texture = _texture;
        pass.Apply();

        GraphicsDevice.DrawUserIndexedPrimitives
            <VertexPositionNormalTexture>(
            PrimitiveType.TriangleList,
            _quad.Vertices, 0, 4,
            _quad.Indices, 0, 2);
} 
```

对于 1000 个精灵，没有歪斜，这给了我 12fps（我想这就像拨打 1000 次`spriteBatch`电话）。这真的很糟糕。但是对于每 10 个精灵倾斜的只有 200 个精灵，我得到 46fps，这明显好于`SpriteBatch`（即使我调用了`DrawUserIndexedPrimitives`200 次）。

- -我的问题 - -

我怎么能批量调用`DrawUserIndexedPrimitives`（或类似的东西），同时保持我的精灵每个都包含在他们自己的继承类中`DrawableGameComponent`？由于我们游戏引擎的性质以及它处理动画、碰撞和其他东西的方式，最后一部分非常重要。

我已经阅读了有关 Vertex Buffers 和的内容`DrawIndexedPrimitives`，但并没有完全理解它，也不知道如何为以这种方式绘制的精灵分配新的纹理和世界变换。

`SpriteBatch`我是否应该期望与批处理这些调用相比具有相似/更好的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:30:52.657

在我看来，你有几个选择，在这里。请注意，我主要熟悉 PC 上的 XNA 4.0，因此在您的情况下，并非所有这些都是可能的/高性能的。

**简单，黑客的方式**

绘制精灵时，您似乎没有使用颜色通道；此技术假定您的示例代表您的真实代码。

如果您不需要精灵颜色来为精灵着色，您可以劫持它作为将每个精灵数据传递到自定义顶点/像素着色器的一种方式。例如，您可以这样做：

```
var shearX = MathHelper.ToRadians(33) / MathHelper.TwoPi;
var shearY = MathHelper.ToRadians(33) / MathHelper.TwoPi;
var color = new Color(shearX, shearY, 0f, 0f);
_spriteBatch.Draw(_texture, rectangle, color); 
```

这将 x 和 y 剪切值表示为分别`2 * pi`存储在红色和绿色通道中的因子。

然后，您可以创建一个自定义顶点着色器来检索这些值并动态执行剪切计算。有关如何执行此操作的信息，请参阅[此处](http://blogs.msdn.com/b/shawnhar/archive/2010/04/05/spritebatch-and-custom-shaders-in-xna-game-studio-4-0.aspx)的Shawn Hargreaves 文章。

**混合方法**

另一个相对简单的可能性是将传统的精灵批处理与您的`DrawUserIndexedPrimitives`代码结合起来。

良好性能的关键是最大限度地减少状态变化，因此仔细排列你的 sprite 可以有很长的路要走。组织你的精灵，这样你就可以在一次使用中绘制所有非倾斜的精灵`SpriteBatch`，然后只使用较慢的`DrawUserIndexedPrimitives`技术来绘制真正需要它的精灵。假设给定帧中的大多数精灵没有倾斜，这应该会显着减少发送到 GPU 的批次数量。

**批处理 + 自定义顶点格式**

这可能是最好的技术，但它也涉及编写最多的代码。并不是说其中任何一个都特别复杂。

内部工作的方式`SpriteBatch`是它维护一个动态顶点缓冲区，该缓冲区填充在 CPU 上，然后在一次调用中全部绘制。[肖恩·哈格里夫斯 (Shawn Hargreaves) 提供了有关如何在此处](http://blogs.msdn.com/b/shawnhar/archive/2010/07/07/setdataoptions-nooverwrite-versus-discard.aspx)完成此类事情的高级概述。

扩展您`DrawUserIndexedPrimitives`使用此技术的问题是讨厌的世界矩阵；着色器并没有一个很好的方法将特定的世界矩阵附加到特定的精灵（除非您使用的是硬件实例化，我认为您的平台不支持）。所以，你可以做什么？

如果您创建自定义顶点格式，您可以将剪切值附加到每个顶点，并使用这些值在顶点着色器中执行剪切，就像第一种技术一样。这将允许您在一次调用中绘制所有游戏的精灵，这应该非常快。

[您可以在此处](http://msdn.microsoft.com/en-us/library/bb976065.aspx)找到有关自定义顶点声明的信息。

# c# - 针对客户不同收费类型的设计模式/架构

> ID：14526407
> 
> 赞同：6
> 
> 时间：2013-01-25T16:46:32.283
> 
> 标签：c#, oop, design-patterns, factory-pattern

我们有一个系统，用于向客户收取不同类型的费用。

有多种收费类型，每种收费类型包括不同的收费项目。

以下是我使用工厂方法提出的问题，这个问题是我需要能够根据费用类型将不同的参数传递给每个计算函数，我该如何实现呢？

```
 //product abstract class
    public abstract class ChargeItem
    {
        public abstract List<ChargeResults> Calculate();
    }

    //Concrete product classes
    public class ChargeType1 : ChargeItem
    {
        public override List<ChargeResults> Calculate()
        {
            return new List<ChargeResults> { new ChargeResults { CustomerId = 1, ChargeTotal = 10} };
        }
    }

    public class ChargeType2 : ChargeItem
    {
        public override List<ChargeResults> Calculate()
        {
            return new List<ChargeResults> { new ChargeResults { CustomerId = 2, ChargeTotal = 20} };
        }
    }

    public class ChargeType3 : ChargeItem
    {
        public override List<ChargeResults> Calculate()
        {
            return new List<ChargeResults> { new ChargeResults { CustomerId = 3, ChargeTotal = 30} };
        }
    }

    //Creator abstract class
    public abstract class GeneralCustomerCharge
    {
        //default constructor invokes the factory class
        protected GeneralCustomerCharge()
        {
            this.CreateCharges();
        }

        public List<ChargeItem> ChargeItems { get; protected set; }

        public abstract void CreateCharges();
    }

    public class AssetCharges : GeneralCustomerCharge
    {
        public override void CreateCharges()
        {
            ChargeItems = new List<ChargeItem> { new ChargeType1(), new ChargeType2() };
        }
    }

    public class SubscriptionCharges : GeneralCustomerCharge
    {
        public override void CreateCharges()
        {
            ChargeItems = new List<ChargeItem> { new ChargeType3() };
        }
    }

    public class ChargeResults
    {
        public int CustomerId { get; set; }
        public decimal ChargeTotal { get; set; }
    } 
```

用法是：

```
 var newAssetCharge = new AssetCharges();

        foreach (ChargeItem chargeItem in newAssetCharge.ChargeItems)
        {
            foreach (var item in chargeItem.Calculate())
            {
                Console.WriteLine("Asset Charges For Customer Id: {0}, Charge Total:     {1}", item.CustomerId, item.ChargeTotal);
            }               
        } 
```

我需要能够从 foreach 循环中将不同类型的参数传递给chargeItem.Calculate()，具体取决于我调用的Calculate 方法，我该如何实现？

我计划为每种费用类型创建不同的费用类型参数类，然后确定费用类型并使用一些 if else 语句调用计算函数并传递相关参数类型，但我认为这不是一个好主意。有没有更好的方法来做到这一点，还是有另一种完全不同的方法来实现我在这里尝试做的事情？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:20:04.920

这取决于。有很多方法可以实现这一点，选择一种方法将取决于更多的上下文，而不是您可以在这里轻松分享的内容。这里有一些想法：

*   创建一个`CalculateParams`类型来保存所有各种参数，只在某些地方使用它们。
*   将此信息放入`ChargeItem`at 构造中。
*   创建一个负责这两条信息的 ChargeCalculator
*   ETC...

您遇到此问题的原因是您正在尝试从“中间”构建架构。获得所需抽象的一个好方法是为依赖于这些抽象的类编写代码和测试。根据您正在编写的测试和生产代码的需求，当场发明方法，而不是猜测这些抽象*应该*是什么样子。这是使您能够创建**基于需求的抽象**的最佳方式，顾名思义，这些抽象往往最能满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:46:50.197

我认为您可以在上面扩展@Ryan Bennett 的评论。

1.  使用方法创建`Calculator`接口`PerformCalculation()`。
2.  使用返回适当实现的方法创建一个`CalculatorFactory`类。工厂根据传递给方法的参数（if/else 语句）构造实现对象。`GenerateCalculator()``Calculator``Calculator``GenerateCalculator()`
3.  将生成的实现传递给`Calculator`抽象`Calculate()`方法。

如上面的评论中所述，您将注入`Calculator`该`Calculate()`方法所依赖的。抽象`Calculate()`方法 (of `ChargeItem`) 的实现只关心`Calculator`接口。

的单独实现`Calculator`将确保根据您的规则以不同方式进行计算。

希望这可以帮助。

# mongodb - $set 在 MongoDB 中有什么作用？

> ID：14526409
> 
> 赞同：3
> 
> 时间：2013-01-25T16:46:36.170
> 
> 标签：mongodb

我看不出使用它的区别：

```
update({"name" : "nick"}, {"$set" : {"age" : 50}}) 
```

并且不使用它；

```
update({"name" : "nick"}, {"age" : 50}) 
```

从[文档](http://docs.mongodb.org/manual/applications/update/)中的示例。我不清楚。

感谢您的评论，但如果我使用`{"$set" : {"array_field" : [{'f' : 'v'}] }}`它添加`{'f' : 'v'}`到数组而不是用 替换数组`[{'f' : 'v'}]`，那么为什么 $set 不将数组替换为新数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:56:08.013

`update({"name" : "nick"}, {"age" : 50})`用 only替换**整个对象**`{"age" : 50}`。

运行`find({"name" : "nick" })`上述更新后运行将返回未找到文档错误。

使用 $set 将只允许更新原始对象的“年龄”参数。

Karl Seguin 的[Little Mongodb Book](https://github.com/karlseguin/the-little-mongodb-book/blob/master/en/mongodb.markdown#update-replace-versus-set)对 replace 和 set 的区别有很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:00:18.523

正如预期的那样，这对我有用：

```
> db.test.insert({"a":1, "b": [{"v":1, "b":1}]})
> db.test.find()
{ "_id" : ObjectId("5102c75c8e48734ea1220a9c"), "a" : 1, "b" : [ { "v" : 1, "b" : 1 } ] }
> db.test.update({"_id" : ObjectId("5102c75c8e48734ea1220a9c")}, {$set: {"b": [{"v":1}]}})
> db.test.find()
{ "_id" : ObjectId("5102c75c8e48734ea1220a9c"), "a" : 1, "b" : [ { "v" : 1 } ] } 
```

我认为这可能是 JS 解释数组的方式，但事实并非如此，它对我来说只是花花公子。

你能告诉我们你正在执行的查询吗？也许一个完整的脚本可以复制这种行为？

### 编辑

我注意到您的数据不同，所以我在下面复制了它：

```
> db.test.insert({"a":1, "b": [{'f':'v'}]})
> db.test.find()
{ "_id" : ObjectId("5102c8868e48734ea1220a9d"), "a" : 1, "b" : [ { "f" : "v" } ] }
> db.test.update({ "_id" : ObjectId("5102c8868e48734ea1220a9d")}, {$set: {"b": [{"f":"b"}]}})
> db.test.find()
{ "_id" : ObjectId("5102c8868e48734ea1220a9d"), "a" : 1, "b" : [ { "f" : "b" } ] } 
```

# javascript - 如何填充整个页面 使用 javascript 和/或 jQuery？

> ID：14526415
> 
> 赞同：0
> 
> 时间：2013-01-25T16:46:43.280
> 
> 标签：javascript, jquery, html, css

```
$(document).ready(function(){
     *POPULATE PAGE WITH DIVS*
}); 
```

我发现了一个与我的问题非常相似的问题，有人回答只是在 html 中粘贴了大量的 div，但我不想这样做。

```
<body>
    <div class="container">
        <div class="square"></div>
    </div>
</body> 
```

那是我的 HTML，我想使用 javascript / jQuery 添加类 square 的 div，直到页面被填满。

类似于以下内容：

```
for(i=0; i<100; i++)
{
    $('.container').add('.square');
} 
```

我似乎无法正确使用语法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:53:08.427

尝试这个：

```
for(i=0; i<100; i++)
{
    $('.container').add('div').addClass('square');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:52:13.103

对于一些变化，您可以构造元素字符串并一次添加它们，而不是一个一个地添加它们，如下所示：

```
var result = "";
var format = "<div class='square'></div>";
for(i = 0; i < n; i++) {
  result += format;
}
$('.container').append(result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:55:13.950

或这个

```
for(var i=0; i<100; i++){
    $("<div/>").addClass("square").appendTo($(".container").eq(0));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T16:49:14.437

尝试这个：

```
for(i=0; i<100; i++)
{
    if(i % 5 == 0)           
       $('.container').append('<div class="square" />').css({clear: 'both'});
    else
       $('.container').append('<div class="square" />');
} 
```

将 5 更改为您想要的任何内容:)

# javascript - 使用 JQUERY 使用字符串中的标识符将字符串的内容放入某些 DIV？

> ID：14526416
> 
> 赞同：0
> 
> 时间：2013-01-25T16:46:48.110
> 
> 标签：javascript, jquery, html

我正在使用 JS/JQUERY 创建一个“填空”客户端应用程序，它将读取从 AJAX 调用检索到的 XML 文件。

XML 内部是一个节点，该节点包含一个带有标签的字符串，这些标签标识字段的去向。

为了尝试改善 UI 体验，我正在使用 div 在网页上格式化此表单的显示，如下所示

```
<div id="prologue"></div>
<div id="message"></div>
<div id="epilogue"></div> 
```

我想通读字符串并使用控制语句来检查该部分应该在上面提到的那些 div 中的位置。

这是来自文本节点的示例字符串

> ${Prologue} - 亲爱的 ${Title} ${Surname}。这是来自公司的消息。有人打电话但无法访问，已为 ${ProductName} 进行了新的预约，订单号为 ${VOLNumber}，时间为 ${AppointmentDate}，介于 ${AppointmentSlot} 之间。请确保您可以在您的场所为工程师提供服务。如果不方便，请在预约前一天中午 12:00 之前访问 thecompany.com 或致电 01111 1111 111。请参阅您的订单确认，了解当天会发生什么的详细信息。${尾声}

假设很简单，任何不是 ${Prologue} 或 ${Epilogue} 的东西都会进入**“消息”** div

我这里有伪代码

```
for loop through the string
if ${prologue} put inside prologue div tags
if !=$prologue and !=$epilogue then place in message div tag
if ${epilogue} then put inside epilogue div tags 
```

我将在循环中创建一些其他规则，例如当一个“。” 字符然后插入换行标记

输出应该是这样的

```
<div id="prologue">
${prologue}
</div>
<div id="message">
Dear ${Title} ${Surname}. <br/>
This is a message from The Company. An person called but was unable to gain access, a new appointment has been made for ${ProductName} with order number ${VOLNumber}, on ${AppointmentDate} between ${AppointmentSlot}. <br/>

Please ensure you are available at your premises for the engineer. If this is not convenient, go to thecompany.com or call 01111 1111 111 before 12:00 noon the day before your appointment. Please refer to your order confirmation for details on what will happen on the day. <br/>

</div>
<div id="epilogue">
${epilogue}
</div> 
```

有人可以确定我可以用于此实现的 javascript 或 jquery 中的哪些功能。我正在考虑使用 .map() jquery 函数，但是我不确定这是否适合我的情况。

请没有完整的代码解决方案！只是预告片，所以我可以自己解决！

**编辑**

这是我的未格式化显示的屏幕截图

![在此处输入图像描述](../Images/018d248c71c5034484a854d95a2ea02a.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:06:31.203

使用 fyneworks.com/jquery/xml-to-json/#tab-Download 和 Mustache.js

在大多数情况下，使用具有大型社区的模块比重新发明轮子要好。

```
<script id="template" type="text/template">
    <div id="prologue">{{{prologue}}}</div>
    <div id="message">
        Dear {{Title}} {{Surname}}. <br/>
        This is a message from The Company. An person called but was unable to gain access, a new appointment has been made for {{ProductName}} with order number {{VOLNumber}}, on {{AppointmentDate}} between {{AppointmentSlot}}. <br/>

        Please ensure you are available at your premises for the engineer. If this is not convenient, go to thecompany.com or call 01111 1111 111 before 12:00 noon the day before your appointment. Please refer to your order confirmation for details on what will happen on the day. <br/>

    </div>
    <div id="epilogue">{{{epilogue}}}</div>
</script>

$.get(YOUR_XML, function(data) {
    var json = $.xml2json(data);
    var template = $('#template').html();
    var html = Mustache.to_html(template, json);
    $(YOUR_TARGET_ELEM).html(html);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:12:12.783

为此，您需要使用一些字符串操作（提取您需要的内容），我希望使用标准的 JavaScript 正则表达式。

您还需要使用 jQuery[选择器](http://api.jquery.com/category/selectors/)来定位`<div>`要更新的页面上的 s。

应该就是这样，我认为不需要`map()`打电话——你以后可能需要打电话来进行替换。

`map()`根据图像进行编辑——毕竟你不需要。解析字符串，使用 jQuery 选择器找到放置部件的位置，完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T17:15:54.437

由于序言和尾声位于开头和结尾，因此您实际上不需要在模板中包含它们。因此，在您的模板引擎中，替换`${prologue}`和`${epilogue)}`with `""`，因为您不需要它们（假设您无法控制 xml），并将您的输入元素直接插入到 div 中。

```
$('#prologue').append('<input type="text" id="prologueText"/>');
$('#epilogue').append('<input type="text" id="epilogueText"/>'); 
```

如果您正在动态创建 div，您可以在 prologue div 前添加 prologue 输入，并将 epilogue div 和 epilogue 输入附加到容器 div。你不想具体的信息，所以我会停在那里。

所以你的输出将是：

```
<div id="prologue">
<input type="text" id="prologueText"/>
</div>
<div id="message">
Dear ${Title} ${Surname}. <br/>
This is a message from The Company. An person called but was unable to gain access, a new appointment has been made for ${ProductName} with order number ${VOLNumber}, on ${AppointmentDate} between ${AppointmentSlot}. <br/>

Please ensure you are available at your premises for the engineer. If this is not convenient, go to thecompany.com or call 01111 1111 111 before 12:00 noon the day before your appointment. Please refer to your order confirmation for details on what will happen on the day. <br/>

</div>
<div id="epilogue">
<input type="text" id="epilogueText"/>
</div> 
```

# iphone - 如何更高效地编写一些条件代码？

> ID：14526417
> 
> 赞同：1
> 
> 时间：2013-01-25T16:46:49.293
> 
> 标签：iphone, ios, objective-c, conditional-statements

编写以下代码的更好方法是什么？有一些条件代码检查 reviewStarsNumber 的 int 值，然后根据结果显示适当的 uiimage。目前它似乎很长，我想象它可以被简化。

谢谢你的帮助

```
 if ([reviewsStarsNumber intValue] == 0) {
    UIImage *img = [UIImage imageNamed:@"hstars-0.png"];        
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 10) {
    UIImage *img = [UIImage imageNamed:@"hstars-0_5.png"];
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 20) {
    UIImage *img = [UIImage imageNamed:@"hstars-1_0.png"];
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 30) {
    UIImage *img = [UIImage imageNamed:@"hstars-1_5.png"];
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 40) {
    UIImage *img = [UIImage imageNamed:@"hstars-2_0.png"];
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 50) {
    UIImage *img = [UIImage imageNamed:@"hstars-2_5.png"];
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 60) {
    UIImage *img = [UIImage imageNamed:@"hstars-3_0.png"];
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 70) {
    UIImage *img = [UIImage imageNamed:@"hstars-3_5.png"];
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 80) {
    UIImage *img = [UIImage imageNamed:@"hstars-4_0.png"];
    [self.reviewStars setImage:img];
}

if ([reviewsStarsNumber intValue] == 90) {
    UIImage *img = [UIImage imageNamed:@"hstars-4_5.png"];
    [self.reviewStars setImage:img];
}
if ([reviewsStarsNumber intValue] == 100) {
    UIImage *img = [UIImage imageNamed:@"hstars-5_0.png"];
    [self.reviewStars setImage:img];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:51:19.310

如果您重命名图像，您可以这样做：

```
NSUInteger number = [reviewsStarsNumber intValue]
NSString *imageName = [NSString stringWithFormat:@"hstarts-%d.png", number];
UIImage *img = [UIImage imageNamed:imageName];
[self.reviewStars setImage:img]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T16:50:05.683

```
 UImage imageNamed;
 switch([reviewsStarsNumber intValue])
 {
    case 0; imageNamed = hstars0; break;
    case 10: imageNamed = hstars0-5; break;
    // 20,30...
    case 100: imageNamed = hstars5; break;

    default: break;
 }
 [self.reviewStars setImage:img]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T16:58:03.910

1.创建 plist 文件，例如将其命名为“hstars”。放入 key = 0, 10, 20... 和 values = hstars-0_5.png, hstars-1_5.png hstars-2_5.png 的条目

```
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"hstars" ofType:@"plist"];
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:plistPath]; 
```

2.或者

`NSDictionary *dict = @{@10:@"hstars-0_5.png", @20:@"hstars-1_5.png", ....}`

那么就

```
UIImage *img = [UIImage imageNamed:[dict objectForKey:[NSNumber numberWithInt:reviewsStarsNumber ]]];
[self.reviewStars setImage:img]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T16:50:44.043

有几种方法，但我会说最好的选择是 switch 语句。

```
switch([reviewsStarsNumber intValue])
{
 case 0:
    UIImage *img = [UIImage imageNamed:@"hstars-0.png"];
    [self.reviewStars setImage:img];
    break;
 case 10:
    UIImage *img = [UIImage imageNamed:@"hstars-0_5.png"];
    [self.reviewStars setImage:img];
    break;
.
.
.
.
(etc..)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T16:51:30.457

您可以使用 switch 语句：

```
UIImage *img = NULL;
int number = [reviewsStarsNumber intValue];
switch (number)
{
    case 0:
        img = [UIImage imageNamed:@"hstars-0.png"];
        break;

    case 10:
        img = [UIImage imageNamed:@"hstars-0_5.png"];
        break;

    // ...

    default:
        // ...
        break;
}
[self.reviewStars setImage:img]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T16:51:31.840

您可以使用 switch 语句。

```
switch (expression)
{
   case match1:
        statements
        break;
    case match2:
        statements
        break;
    default:
        statements
        break;
} 
```

或者，您可以将图像文件重命名为`hstars-<0 - 100>.png`并加载它们：

```
UIImage *img = [UIImage imageNamed:[NSString stringWithFormat:@"hstars-%@.png", reviewsStarsNumber]];
[self.reviewStars setImage:img]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-25T16:52:50.380

创建一个表并在该表中查找评级：

```
static struct
{
    int rating;
    NSString *image;
} ratings[] =
{
   { 0, @"hstars-0.png" },
   ...
   { 100, @"hstars-5_0.png" }
};

const unsigned numRatings = sizeof(ratings) / sizeof(ratings[0]);
int rating = [reviewsStarsNumber intValue];
BOOL found = NO;
for (unsigned i = 0; i < numRatings && !found; i++)
{
    if (ratings[i].rating == rating)
    {
        UIImage *img = [UIImage imageNamed:ratings[i].image];
        [self.reviewStars setImage:img];
        found = YES;
    }
}

if (!found)
{
    // Perhaps do something if the rating wasn't found?
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-26T08:42:47.617

如果您可以将第一张图片更改为`hstars-0-0.png`，那么此代码应该可以满足您的需求。

```
int value = [reviewsStarsNumber intValue] / 10

int highIndex = value / 2
int loxIndex = value % 2 == 1 ? 5 : 0

UIImage *img = [UIImage imageNamed:[NSString stringWithFormat:@"hstars-%d_%d.png", highIndex, lowIndex]]; 
```

# objective-c - 对 NSString 使用正确的编码

> ID：14526420
> 
> 赞同：0
> 
> 时间：2013-01-25T16:46:56.577
> 
> 标签：objective-c, html-parsing, nsstringencoding

我从一个网站获得了 unicode 文本并将其保存到 NSString，问题是字符串中的文本没有正确编码，所以我只看到符号。网站上的文字主要是希伯来文字。

```
NSLog(@"%@", [trafficNodes[0] firstChild]);
NSLog(@"%@", [[trafficNodes[0] firstChild] content]);
NSLog(@"%@", [[[trafficNodes[0] firstChild] content] stringByReplacingPercentEscapesUsingEncoding:NSASCIIStringEncoding]); 
```

这是我在日志中看到的：

```
2013-01-25 18:44:26.391 HTMLParsing[2450:c07] {
nodeContent = "\U05f3\U009e\U05f3\U00a2\U05f3\U2022\U05f3\U201c\U05f3\U203a\U05f3\U009f \U05f3\U009c\U05f3\U00a9\U05f3\U00a2\U05f3\U201d: 18:35\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0\U05f3\U201d\U05f3\U00d7\U05f3\U00a0\U05f3\U2022\U05f3\U00a2\U05f3\U201d \U05f3\U2013\U05f3\U2022\U05f3\U00a8\U05f3\U009e\U05f3\U00d7.\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0***\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0\U05f3\U009c\U05f3\U009e\U05f3\U00a1\U05f3\U2122\U05f3\U00a8\U05f3\U00d7 \U05f3\U2022\U05f3\U009c\U05f3\U00a7\U05f3\U2018\U05f3\U009c\U05f3\U00d7 \U05f3\U201c\U05f3\U2122\U05f3\U2022\U05f3\U2022\U05f3\U2014\U05f3\U2122\U05f3\U009d \U05f3\U2022\U05f3\U00d7\U05f3\U2013\U05f3\U009e\U05f3\U2022\U05f3\U00a0\U05f3\U2122\U05f3\U009d \U05f3\U2014\U05f3\U2122\U05f3\U2122\U05f3\U2019\U05f3\U2022: 918 - 800 - 1-800\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0\U05f3\U2018\U05f3\U00a0\U05f3\U00a1\U05f3\U2122\U05f3\U00a2\U05f3\U201d \U05f3\U2018\U05f3\U00a7\U05f3\U00a8\U05f3\U2018\U05f3\U00d7 \U05f3\U2018\U05f3\U00d7\U05f3\U2122 \U05f3\U00a1\U05f3\U20aa\U05f3\U00a8, \U05f3\U2019\U05f3\U2122\U05f3\U00a0\U05f3\U2022\U05f3\U00d7 \U05f3\U009e\U05f3\U00a9\U05f3\U2014\U05f3\U00a7\U05f3\U2122\U05f3\U009d \U05f3\U2022\U05f3\U009e\U05f3\U00d7\U05f3\U00a0\"\U05f3\U00a1\U05f3\U2122\U05f3\U009d \U05d2\U20ac\U201c \U05f3\U2122\U05f3\U00a9 \U05f3\U009c\U05f3\U201d\U05f3\U2022\U05f3\U00a8\U05f3\U2122\U05f3\U201c \U05f3\U009e\U05f3\U201d\U05f3\U2122\U05f3\U00a8\U05f3\U2022\U05f3\U00d7, \U05f3\U2019\U05f3\U009d \U05f3\U203a\U05f3\U00a9\U05f3\U201d\U05f3\U203a\U05f3\U2018\U05f3\U2122\U05f3\U00a9 \U05f3\U20aa\U05f3\U00a0\U05f3\U2022\U05f3\U2122\. \U05f3\U2018\U05f3\U201d\U05f3\U2019\U05f3\U2122\U05f3\U00a2\U05f3\U203a\U05f3\U009d \U05f3\U009c\U05f3\U009e\U05f3\U00a2\U05f3\U2018\U05f3\U00a8 \U05f3\U2014\U05f3\U00a6\U05f3\U2122\U05f3\U2122\U05f3\U201d \U05d2\U20ac\U201c \U05f3\U0090\U05f3\U20aa\U05f3\U00a9\U05f3\U00a8\U05f3\U2022 \U05f3\U00d7\U05f3\U009e\U05f3\U2122\U05f3\U201c \U05f3\U2014\U05f3\U00a6\U05f3\U2122\U05f3\U2122\U05f3\U201d \U05f3\U009c\U05f3\U2122\U05f3\U009c\U05f3\U201c \U05f3\U201d\U05f3\U009e\U05f3\U2018\U05f3\U00a7\U05f3\U00a9 \U05f3\U009c\U05f3\U2014\U05f3\U00a6\U05f3\U2022\U05f3\U00d7\. \U05f3\U201d\U05f3\U2122\U05f3\U2022 \U05f3\U201c\U05f3\U00a8\U05f3\U2022\U05f3\U203a\U05f3\U2122\U05f3\U009d, \U05f3\U00a2\U05f3\U00a8\U05f3\U00a0\U05f3\U2122\U05f3\U2122\U05f3\U009d \U05f3\U2022\U05f3\U009e\U05f3\U00a8\U05f3\U2022\U05f3\U203a\U05f3\U2013\U05f3\U2122\U05f3\U009d, \U05f3\U2022\U05f3\U2014\U05f3\U20aa\U05f3\U00a9\U05f3\U2022 \U05f3\U0090\U05f3\U00d7\U05f3\U009d \U05f3\U0090\U05f3\U00d7 \U05f3\U201d\U05f3\U2122\U05f3\U009c\U05f3\U201c\U05f3\U2122\U05f3\U009d \U05f3\U201d\U05f3\U00a2\U05f3\U00a9\U05f3\U2022\U05f3\U2122\U05f3\U2122\U05f3\U009d \U05f3\U009c\U05f3\U201d\U05f3\U00d7\U05f3\U20aa\U05f3\U00a8\U05f3\U00a5 \U05f3\U009c\U05f3\U203a\U05f3\U2018\U05f3\U2122\U05f3\U00a9.\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0\U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0 \U00a0\U05f3\U00a2\U05f3\U2022\U05f3\U00a8\U05f3\U009a \U05f3\U201c\U05f3\U2122\U05f3\U2022\U05f3\U2022\U05f3\U2014\U05f3\U2122 \U05f3\U201d\U05f3\U00d7\U05f3\U00a0\U05f3\U2022\U05f3\U00a2\U05f3\U201d: \U05f3\U009e\U05f3\U2022\U05f3\U00a8 \U05f3\U00a0\U05f3\U00a2\U05f3\U009e\U05f3\U009f.";
nodeName = text;
}
2013-01-25 18:44:26.392 HTMLParsing[2450:c07] ׳׳¢׳•׳“׳›׳ ׳׳©׳¢׳”: 18:35                                      ׳”׳×׳ ׳•׳¢׳” ׳–׳•׳¨׳׳×.                                      ***                   ׳׳׳¡׳™׳¨׳× ׳•׳׳§׳‘׳׳× ׳“׳™׳•׳•׳—׳™׳ ׳•׳×׳–׳׳•׳ ׳™׳ ׳—׳™׳™׳’׳•: 918 - 800 - 1-800                                      ׳‘׳ ׳¡׳™׳¢׳” ׳‘׳§׳¨׳‘׳× ׳‘׳×׳™ ׳¡׳₪׳¨, ׳’׳™׳ ׳•׳× ׳׳©׳—׳§׳™׳ ׳•׳׳×׳ "׳¡׳™׳ ג€“ ׳™׳© ׳׳”׳•׳¨׳™׳“ ׳׳”׳™׳¨׳•׳×, ׳’׳ ׳›׳©׳”׳›׳‘׳™׳© ׳₪׳ ׳•׳™. ׳‘׳”׳’׳™׳¢׳›׳ ׳׳׳¢׳‘׳¨ ׳—׳¦׳™׳™׳” ג€“ ׳׳₪׳©׳¨׳• ׳×׳׳™׳“ ׳—׳¦׳™׳™׳” ׳׳™׳׳“ ׳”׳׳‘׳§׳© ׳׳—׳¦׳•׳×. ׳”׳™׳• ׳“׳¨׳•׳›׳™׳, ׳¢׳¨׳ ׳™׳™׳ ׳•׳׳¨׳•׳›׳–׳™׳, ׳•׳—׳₪׳©׳• ׳׳×׳ ׳׳× ׳”׳™׳׳“׳™׳ ׳”׳¢׳©׳•׳™׳™׳ ׳׳”׳×׳₪׳¨׳¥ ׳׳›׳‘׳™׳©.                                      ׳¢׳•׳¨׳ ׳“׳™׳•׳•׳—׳™ ׳”׳×׳ ׳•׳¢׳”: ׳׳•׳¨ ׳ ׳¢׳׳.
2013-01-25 18:44:27.358 HTMLParsing[2450:c07] ׳׳¢׳•׳“׳›׳ ׳׳©׳¢׳”: 18:35                                      ׳”׳×׳ ׳•׳¢׳” ׳–׳•׳¨׳׳×.                                      ***                   ׳׳׳¡׳™׳¨׳× ׳•׳׳§׳‘׳׳× ׳“׳™׳•׳•׳—׳™׳ ׳•׳×׳–׳׳•׳ ׳™׳ ׳—׳™׳™׳’׳•: 918 - 800 - 1-800                                      ׳‘׳ ׳¡׳™׳¢׳” ׳‘׳§׳¨׳‘׳× ׳‘׳×׳™ ׳¡׳₪׳¨, ׳’׳™׳ ׳•׳× ׳׳©׳—׳§׳™׳ ׳•׳׳×׳ "׳¡׳™׳ ג€“ ׳™׳© ׳׳”׳•׳¨׳™׳“ ׳׳”׳™׳¨׳•׳×, ׳’׳ ׳›׳©׳”׳›׳‘׳™׳© ׳₪׳ ׳•׳™. ׳‘׳”׳’׳™׳¢׳›׳ ׳׳׳¢׳‘׳¨ ׳—׳¦׳™׳™׳” ג€“ ׳׳₪׳©׳¨׳• ׳×׳׳™׳“ ׳—׳¦׳™׳™׳” ׳׳™׳׳“ ׳”׳׳‘׳§׳© ׳׳—׳¦׳•׳×. ׳”׳™׳• ׳“׳¨׳•׳›׳™׳, ׳¢׳¨׳ ׳™׳™׳ ׳•׳׳¨׳•׳›׳–׳™׳, ׳•׳—׳₪׳©׳• ׳׳×׳ ׳׳× ׳”׳™׳׳“׳™׳ ׳”׳¢׳©׳•׳™׳™׳ ׳׳”׳×׳₪׳¨׳¥ ׳׳›׳‘׳™׳©.                                      ׳¢׳•׳¨׳ ׳“׳™׳•׳•׳—׳™ ׳”׳×׳ ׳•׳¢׳”: ׳׳•׳¨ ׳ ׳¢׳׳. 
```

我尝试使用不同的编码但没有运气。

编辑：

使用后：

```
NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"%@", string); 
```

我在日志中看到了应该写的文本，现在如何在不丢失编码的情况下将其转换为 NSData？

我需要将它传递给 HTMLParser。

编辑（2）：

对我有用的是使用正确的编码将 NSData 转换为 NSString 并返回：

```
NSString *encodedStringData = [[NSString alloc] initWithData:reportsHtmlData encoding:NSUTF8StringEncoding];
NSData *reportsHtmlDataEncoded = [encodedStringData dataUsingEncoding:CFStringConvertEncodingToNSStringEncoding (kCFStringEncodingWindowsHebrew)]; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:40:48.647

如果`initWithData:encoding:`在将数据声明为 UTF-8 时有效，则源文本可能被编码为 UTF-8。如果`Content-Encoding`标题告诉您其他情况，则它们可能是错误的。不幸的是，有时标题是错误的。

要回答这个问题，“如何在不丢失编码的情况下将其转换为 NSData？”

你不能。

NSData 是原始字节。编码只是解释它们的一种策略。NSData 和 NSString 都是字节序列的容器；不同之处在于 NSString 还携带编码信息，因此您可以使用字符（可能是一个、两个或三个字节）而不是直接使用字节。

我不确定您指的是什么 HTMLParser。如果它需要原始字节（NSData），那么您需要告诉它使用 UTF-8 编码。如果它需要一个字符串（NSString），那么您可以将新创建​​的字符串传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:52:13.513

也许这可以帮助你 - [NSSstring encoding not found](https://stackoverflow.com/questions/8144218/nssstring-encoding-not-found)

答案澄清了 NSString 不支持 Windows 希伯来语编码，但 CFString 支持。我不确切知道网页使用的编码，因为您没有提及它，但希望您可以尝试一下。

# zend-framework - 将字段添加到 sales_flat_order

> ID：14526421
> 
> 赞同：0
> 
> 时间：2013-01-25T16:46:56.700
> 
> 标签：zend-framework, magento

我正在尝试通过我正在制作的模块向 sales_flat_order 表添加一个新字段。我试图运行安装脚本，但它似乎根本没有改变表格。

这是更新脚本：

mysql4-upgrade-0.1.1-0.1.2.php

```
<?php

$installer = $this;
$installer->getConnection()->addColumn($installer->getTable('sales_flat_order'), 'expected_delivery_date', 'datetime'); 
```

这是我的 config.xml

```
...

<modules>
    <Optimiseweb_OrderPad>
        <version>0.1.2</version>
    </Optimiseweb_OrderPad>
</modules>

...
<resources>
  <orderpad>
      <setup>
          <module>Optimiseweb_Orderpad</module>
          <class>Optimiseweb_Orderpad_Model_Mysql4_Setup</class>
      </setup>
  </orderpad>
</resources>

<models>
  <orderpad>
    <class>Mage_Sales_Model</class>
    <resourceModel>orderpad_mysql4</resourceModel>
  </orderpad>
  <orderpad_mysql4>
           <class>Optimiseweb_Orderpad_Model_Mysql4</class>
           <entities>
               <order><table>sales_flat_order</table></order>
           </entities>
  </orderpad_mysql4>
</models>
... 
```

config.xml 中提到的两个模型

Optimiseweb/Orderpad/Model/Mysql4.php

```
<?php

class Optimiseweb_Orderpad_Model_Mysql4 extends Mage_Core_Model_Abstract
{

} 
```

Optimiseweb/Orderpad/Model/Mysql4/Setup.php

```
<?php

class Optimiseweb_Orderpad_Model_Mysql4_Setup extends Mage_Sales_Model_Resource_Setup
{

} 
```

将新字段添加到订单表的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:58:55.053

如果您需要向平面销售表添加列，最好通过向销售实体 (sales_order) 添加属性来完成。确保您的安装模型`Optimiseweb_Orderpad_Model_Mysql4_Setup`扩展 `Mage_Sales_Model_Resource_Setup`并执行

```
$installer = $this;
$installer->startSetup();

$installer->addAttribute('order', 'expected_delivery_date', array('type'=>'datetime'));

$installer->endSetup(); 
```

# java - 带有 CAS 的 Spring Security 跳过会话固定保护

> ID：14526425
> 
> 赞同：4
> 
> 时间：2013-01-25T16:47:22.503
> 
> 标签：java, spring-security, cas

我有一个使用spring security和CAS（spring 3.0.5，cas 3.4.5）的应用程序，但是当我登录时会话ID没有改变。

当我登录`CasAuthenticationFilter`执行身份验证时，如果身份验证成功，它不会继续过滤器链，而是在 上设置身份验证`SecurityContextHolder`并调用 successHandler。这将重定向到我请求的需要身份验证的原始 URL。`SessionManagementFilter`永远不会调用会话策略来创建新会话。

似乎 that `AbstractAuthenticationFilter`extends`CasAuthenticationFilter`有自己的会话策略，但默认的`NullAuthenticatedSessionStrategy`是容易受到会话固定的影响。问题是为什么默认策略容易受到攻击，当 spring[声称默认防止会话固定时](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#ns-session-mgmt)？

解决此问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:49:50.833

会话固定策略仅在您使用命名空间时自动设置。如果您使用的是显式过滤器，那么您可以[`SessionFixationProtectionStrategy`](http://docs.spring.io/autorepo/docs/spring-security/4.2.x/apidocs/index.html?org/springframework/security/web/authentication/session/SessionFixationProtectionStrategy.html)自己将 a 注入过滤器。或者，如果您的应用程序中有一个明显的身份验证后起点，您可以在那里重新创建会话。

由于历史原因，默认情况下可能未设置会话固定版本，因为过滤器早于会话身份验证策略的引入，并且通常以保守的方式引入更改。您可以打开一个更改请求，建议默认情况下它可能会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-12T12:24:10.253

我有同样的问题。我通过显式注入 SessionFixationProtectionStrategy 解决了这个问题（基于命名空间的配置似乎不适用于我的 CAS 自定义过滤器）。这是我目前的配置：

```
<bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl"/>

<bean id="sessionControlStrategy" class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <constructor-arg ref="sessionRegistry"/>
    <property name="maximumSessions" value="2"/>
</bean>

<bean id="casFilter" class="org.springframework.security.cas.web.CasAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="sessionAuthenticationStrategy" ref="sessionControlStrategy"/>
</bean> 
```

# c# - 为什么集线器 OnConnected / OnDisconnected 上没有 Session？

> ID：14526426
> 
> 赞同：0
> 
> 时间：2013-01-25T16:47:22.730
> 
> 标签：c#, .net, session, signalr, signalr-hub

当我覆盖`OnConnected`/`OnDisconnected`然后寻找一个`HttpContext.Current.Session`为空的会话时。

我假设此时已经创建了一个会话。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T11:28:54.960

您是否尝试过 GetHttpContext？

```
var ctx = Context.Request.GetHttpContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:10:36.587

只需确保您在应用上启用了会话

通读[HtpContext.Current.Session](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.session%28v=vs.110%29.aspx)看起来你需要验证是否

> “如果未启用会话状态，则无法设置或获取会话状态值。要为应用程序配置会话状态设置，请在 Web.config 文件中设置 sessionState 元素的模式属性。启用会话状态并且您从不存在的会话状态变量中请求一个值，返回 null”。

如果您认为 signalR 应该为您启用会话状态，那么不，它不会 [由 @dfowler 确认] 在[另一个 SO 问题](https://stackoverflow.com/questions/7854663/signalr-doesnt-use-session-on-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T23:22:22.603

您可以直接从 OnConnected / OnDisconnected 中的 cookie 中获取 sessionID：

`public override Task OnConnected() { var sessionId = Context.RequestCookies["ASP.NET_SessionId"].Value; }`

现在有了 sessionID 字符串，您可以从自定义单例字典中查找会话，该字典在创建每个会话时填充 - 例如在 Global.asax 中，如下所示：

`void Session_Start(object sender, EventArgs e) { GlobalSessions[context.Session.SessionID] = context.Session; }`

当然，这只适用于 Web 应用程序位于单个服务器上的情况。

# r - 将数值转换为二进制 (0/1)

> ID：14526429
> 
> 赞同：7
> 
> 时间：2013-01-25T16:47:32.323
> 
> 标签：r, dataframe, matrix, binary

我有一个数据框，其中包含不同人的不同种类水果的计数。像下面

```
 apple  banana  orange
Tim     3       0       2
Tom     0       1       1
Bob     1       2       2 
```

我怎样才能把它变成一个二进制矩阵，即如果一个人至少有一个水果，不管他有多少，那么我记录1，如果没有，记录0。如下

```
 apple  banana  orange
Tim     1       0       1
Tom     0       1       1
Bob     1       1       1 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T16:57:54.137

这是你的`data.frame`：

```
x <- structure(list(apple = c(3L, 0L, 1L), banana = 0:2, orange = c(2L, 
1L, 2L)), .Names = c("apple", "banana", "orange"), class = "data.frame", row.names = c("Tim", 
"Tom", "Bob")) 
```

你的矩阵：

```
as.matrix((x > 0) + 0)
    apple banana orange
Tim     1      0      1
Tom     0      1      1
Bob     1      1      1 
```

## 更新

我不知道睡前发帖会引起[任何](https://stackoverflow.com/questions/14526429/turn-a-count-matrix-into-a-binary-existence-matrix/14526637#comment20256941_14526637) [讨论](https://chat.stackoverflow.com/transcript/message/7380500#7380500)，但讨论本身很有趣，所以我想在这里总结一下：

我的直觉是简单地接受这样一个事实，即在 a`TRUE`和`FALSE`R 的下方，是数字`1`和`0`。如果您尝试（一种不太好的方法）检查​​等价性，例如`1 == TRUE`or `0 == FALSE`，您将得到`TRUE`. 我的快捷方式（结果比*正确*的，或者至少在*概念上更正确的方式花费***更多时间**）只是添加到我的 s 和s，因为我知道 R 会将逻辑向量强制为数字。**`0``TRUE``FALSE`**

 **正确的或至少更合适的方法是使用转换输出`as.numeric`（我认为这就是@JoshO'Brien 打算写的）。但是....不幸的是，这会删除输入的维度属性，因此您需要将结果向量重新转换为矩阵，事实证明，这***仍然***比`0`我在答案中所做的添加要快。

阅读了评论和批评后，我想我会再添加一个选项——`apply`用于遍历列并使用该`as.numeric`方法。这比手动重新创建矩阵要慢，但*比*添加到逻辑比较中要*快一些。*`0`

```
x <- data.frame(replicate(1e4,sample(0:1e3)))
library(rbenchmark)
benchmark(X1 = {
            x1 <- as.matrix((x > 0) + 0)
          },
          X2 = {
            x2 <- apply(x, 2, function(y) as.numeric(y > 0))
          },
          X3 = {
            x3 <- as.numeric(as.matrix(x) > 0)
            x3 <- matrix(x3, nrow = 1001)
          },
          X4 = {
            x4 <- ifelse(x > 0, 1, 0)
          },
          columns = c("test", "replications", "elapsed", 
                      "relative", "user.self"))
#   test replications elapsed relative user.self
# 1   X1          100 116.618    1.985   110.711
# 2   X2          100 105.026    1.788    94.070
# 3   X3          100  58.750    1.000    46.007
# 4   X4          100 382.410    6.509   311.567

all.equal(x1, x2, check.attributes=FALSE)
# [1] TRUE
all.equal(x1, x3, check.attributes=FALSE)
# [1] TRUE
all.equal(x1, x4, check.attributes=FALSE)
# [1] TRUE 
```

谢谢大家的讨论！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-09T21:13:13.917

我通常使用这种方法：

```
df[df > 0] = 1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T16:53:32.820

使用可以使用`ifelse`。它应该适用于矩阵和数据框但是，结果值将是矩阵

```
> df <- cbind(aaple = c(3, 0 , 1), banana = c(0, 1, 2), orange = c(2, 1, 2))
> df
     aaple banana orange
[1,]     3      0      2
[2,]     0      1      1
[3,]     1      2      2

> ifelse(df>0, 1, 0)
     aaple banana orange
[1,]     1      0      1
[2,]     0      1      1
[3,]     1      1      1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T16:48:23.027

只需使用一个比较：

```
d = t(matrix(c(3,0,2,0,1,1,1,2,2), 3))
d > 0
t(matrix(as.numeric(d>0), ncol(d))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T16:58:16.740

```
> pippo
  person apple banana orange
1    Tim     1      0      2
2    Tom     0      1      1
3    Bob     1      2      2
> cols <- c("apple", "banana", "orange")
> lapply(cols, function(x) {pippo[,x] <<- as.numeric(pippo[,x] >= 1)}) 
```**

# javascript - RegEx javascript，字符空格圆括号

> ID：14526430
> 
> 赞同：0
> 
> 时间：2013-01-25T16:47:32.183
> 
> 标签：javascript, regex, character, parentheses

我在 javascript 中有以下字符串：
“你好 OR，我是 OR )”
注意括号前的空格。我想要这个
“你好 OR，我是）”
所以基本上只需删除最后一个 OR。我尝试了每个 RegEx 组合都没有成功，即：

```
string = string .replace(/OR\s\)/, " )"); //NO
string = string .replace(/OR \)/, " )");  //NO 
```

删除圆括号只能工作，但只要我添加 OR，就没有运气

```
string = string .replace(/\)/, " )"); //Removes the bracket
string = string .replace(/\s\)/, " )"); //Removes the bracket and the space 
```

[我在http://regexpal.com/](http://regexpal.com/)尝试了 RegEx /OR\s)/，它运行良好，那么为什么不在 javascript 中呢？
这感觉像是一个非常简单的问题，但 2 小时后我仍然迷路了。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:55:14.260

```
string = string.replace(/(\s*OR)(?![\s\S]*OR)/,""); 
```

请参阅[使用正则表达式替换模式的最后一次出现](https://stackoverflow.com/questions/4744689/using-regex-to-replace-only-the-last-occurrence-of-a-pattern-with-js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:51:53.777

这应该工作：

```
> s = "Hallo OR, I am OR )"
'Hallo OR, I am OR )'
> s.replace(/\bOR[\s)]+/g, ')')
'Hallo OR, I am )' 
```

# sql - Post.all 在下方显示内容、标题和数组。我该如何删除这个？

> ID：14526432
> 
> 赞同：0
> 
> 时间：2013-01-25T16:47:40.493
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, controller

愚蠢的stackoverflow要求更多的上下文......我打开了我做的索引帖子页面（如下），出于某种奇怪的原因，一个额外的数组出现在实际文本下方。为什么？

```
<h1><%= @posts.each do |post| %></h1>
<p><%= post.content %></p>
<% end %> 
```

**帖子控制器：**

```
class PostsController < ApplicationController

  def index
    @posts = Post.find(:all, :order => "content")
  end

  def new 
    @post = Post.new
  end

  def create
      @post = Post.new(params[:post])
    end
  end 
```

**用户模型：**

```
class Post < ActiveRecord::Base
  attr_accessible :content, :title
  belongs_to :user
end 
```

**哎呀想法，我这样显示。**

```
Yippi

[#<Post id: 1, title: "Hello", content: "Yippi", created_at: "2013-01-25 16:36:08", updated_at: "2013-01-25 16:36:08">] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:48:50.060

`<h1><%= @posts.each do |post| %></h1>`应该读`<h1><% @posts.each do |post| %></h1>`

当您使用 <%= %> 时，它的输出将在您的 erb 文件中。如果您要在控制台中键入 posts.each，您会看到 return 语句将 pe 帖子数组。您正在将该数组输出到您的 erb，因为您使用的是 <%= 而不是 <%

这篇文章有更多关于 ERB sytanx 的信息：[Rails 中的 ERB 中的 <%、<%=、<%# 和 -%> 有什么区别？](https://stackoverflow.com/questions/7996695/rails-erb-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:13:45.267

```
<% @posts.each do |post| %>
  <tr>
    <td><%= post.title %></td>
    <td><%= post.content %></td>
    <td><%= post.created_date %></td>
    <td><%= post.updated_date %></td>
   </tr>
<% end %> 
```

# java - 如何让玩家移动到某个点？

> ID：14526433
> 
> 赞同：0
> 
> 时间：2013-01-25T16:47:42.690
> 
> 标签：java, slick2d

我想知道如何将玩家移动到特定点。我希望玩家在左键按下时跟随鼠标。到目前为止，这是我的代码。

**实体类**：

```
public abstract class Entity {

    private float velX;
    private float velY;
    private Shape s;

    public Entity(Shape s){
        this.s = s;
    }

    public abstract void render(GameContainer gc, Graphics g);
    public abstract void onUpdate(GameContainer gc, StateBasedGame sbg, int d);
    public abstract boolean collidedWithEntity(Entity e);

    public void update(GameContainer gc, StateBasedGame sbg, int d){
        float x = s.getX() + (velX * (float)d);
        float y = s.getY() + (velY * (float)d);
        s.setLocation(x, y);
        onUpdate(gc, sbg, d);
    }

    public float getVelocityX(){
        return velX;
    }

    public float getVelocityY(){
        return velY;
    }

    public float getVelocity(){
        return (float) (Math.sqrt(Math.pow(velX, 2) + Math.pow(velY, 2)));
    }

    public void setVelocityX(float velX){
        this.velX = velX;
    }

    public void setVelocityY(float velY){
        this.velY = velY;
    }

            //This class,
    public void setVelocity(float angel, float vel){
        float velX = (float) (vel * Math.cos(angel));
        float velY = (float) (vel * Math.sin(angel));
        this.velX = velX;
        this.velY = velY;
    }

            //And this one I use to set it
    public void setVelocity(float x, float y, float vel){
        setVelocity((float) Math.atan((y - s.getCenterY())/(x - s.getCenterX())), vel);
    }

    public Shape getShape() {
        return s;
    }

    public float getX(){
        return s.getX();
    }

    public float getY(){
        return s.getY();
    }

} 
```

**世界级**：

```
public class World {

    private int shiftX = 0;
    private int shiftY = 0;
    private Entity follow;
    private int width;
    private int height;
    private Player p;

    public World(int width, int height){
        this.width = width;
        this.height = height;
        this.p = new Player(this, 400, 400);
        this.follow = p;
    }

    public float getShiftX(){
        return shiftX;
    }

    public float getShiftY(){
        return shiftY;
    }

    public void render(GameContainer gc, Graphics g){
        g.setColor(Color.white);
        g.fillRect(0, 0, gc.getWidth(), gc.getHeight());
        p.render(gc, g);
    }

    public void update(GameContainer gc, StateBasedGame sbg, int d){
        updateView(gc);
        Input in = gc.getInput();

        //Update player velocity and update player.
        if(in.isMouseButtonDown(Input.MOUSE_LEFT_BUTTON)){
            p.setVelocity(in.getMouseX(), in.getMouseY(), p.getMaxSpeed());
        }
        else{
            p.setVelocity(0, 0, 0);
        }
        p.update(gc, sbg, d);
    }

    private void updateView(GameContainer gc){
        if(follow != null){
            shiftX = (int) (follow.getShape().getCenterX() + (width / 2));
            shiftY = (int) (follow.getShape().getCenterY() + (height / 2));
        }

        if(shiftX > (width - gc.getWidth())){
            shiftX = (width - gc.getWidth());
        }
        else if(shiftX < 0){
            shiftX = 0;
        }

        if(shiftY > (height - gc.getHeight())){
            shiftY = (height - gc.getHeight());
        }
        else if(shiftY< 0){
            shiftY = 0;
        }
    }

    public void setFollowing(Entity follow){
        this.follow = follow;
    }

    public Entity getFollowing(){
        return follow;
    }

    public int getHeight(){
        return height;
    }

    public int getWidth(){
        return width;
    }

    public Player getPlayer(){
        return p;
    }

    public float getMouseX(int x){
        return (x + shiftX);
    }

    public float getMouseY(int y){
        return (y + shiftY);
    }

} 
```

关于如何修复我的 setVelocity(float x, float y float vel) 方法的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:49:25.147

我对 Slick2D 不太熟悉，但是您可以使用 2D 矢量并旋转到该点，然后增加 x/y。我浏览了 API 半秒钟，发现`Vector2f`（也许你可以在你的实体类中包含一个向量字段），不确定这是否是你通常在 slick 中使用的。

# objective-c - 通过选择器调用方法

> ID：14526437
> 
> 赞同：0
> 
> 时间：2013-01-25T16:47:51.970
> 
> 标签：objective-c, parameter-passing, selector

我正在用目标 C 编写一个函数。这就是我得到的：

```
int rndValue = (((int)arc4random()/0x100000000)*width);
timer1 = [NSTimer scheduledTimerWithTimeInterval:.01 
                                          target:self 
                           [self performSelector:@selector(doItAgain1:)  
                                      withObject:rndValue] 
                                        userInfo:nil
                                         repeats:YES]; 
```

选择器调用此方法并传递参数：

```
-(void)doItAgain1:(int)xValuex{
} 
```

在这个阶段，顶部代码会产生语法错误。`Syntax error: 'Expected ] before performSelector'`问题是什么？最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:56:39.673

那行可能应该是

```
timer1 = [NSTimer scheduledTimerWithTimeInterval:.01 
         target:self selector:@selector(doItAgain1:) 
         userInfo:nil repeats:YES]; 
```

您不能通过此调用发送方法参数，为此您必须执行以下操作：

```
NSInvocation *inv = [NSInvocation invocationWithMethodSignature:
    [self methodSignatureForSelector:@selector(doItAgain1:)]];

[inv setSelector:@selector(doItAgain1:)];
[inv setTarget:self];
[inv setArgument:&rndValue atIndex:2];

timer1 = [NSTimer scheduledTimerWithTimeInterval:(NSTimeInterval).01 
         invocation:inv 
         repeats:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:54:32.513

这会更正确：

```
[NSTimer scheduledTimerWithTimeInterval:.01 target:self 
                 selector:@selector(doItAgain1:)
                 userInfo:[NSNumber numberWithInt:rndValue] repeats:YES]; 
```

另请注意，您以这种方式调用的选择器的语法必须是：

```
- (void)doItAgain1:(NSTimer*)timer {

   int rndValue = [timer.userInfo intValue];
   ...
} 
```

无法`int`为此类计时器选择器指定参数，因此无法将其转换为`NSNumber`对象。

# javascript - setTimeout/Loop... 仍然很困惑

> ID：14526440
> 
> 赞同：1
> 
> 时间：2013-01-25T16:48:00.060
> 
> 标签：javascript, for-loop, settimeout

所以我从昨天下午开始就一直在处理这件事。我已经对基本代码进行了各种迭代，试图得到我想要的结果（我想每隔 xx 毫秒按顺序删除标记），但没有任何效果。我得到的结果是他们要么一次全部走，要么根本不走。我相当确定“根本不是”问题是由于我纠正并得到“一次全部”的语法错误造成的。

所以这里的功能...

```
 function marker(location) 
    {

        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(37.5, -98.35);
        var mapOptions = 
        {
            zoom: 5,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        map = new google.maps.Map(document.getElementById('googleMap'), mapOptions);

        var infowindow = new google.maps.InfoWindow(), marker, i;

        for (i = 0; i < location.length; i++) 

        {

            marker = new google.maps.Marker(
            {
                position: new google.maps.LatLng(location[i][1], location[i][2]),
                animation: google.maps.Animation.DROP,
                map: map
            }
            );

            google.maps.event.addListener(marker, 'click', (function (marker, i) 
            {

                return function () 
                {
                    infowindow.setContent(location[i][0]);
                    infowindow.open(map, marker);
                }

            }
            )(marker, i));

        }

    } 
```

我认为我应该做的是在for内，像这样......

```
 for (i = 0; i < location.length; i++) 

        {
           setTimeout(function() { 

            marker = new google.maps.Marker(
            {
                position: new google.maps.LatLng(location[i][1], location[i][2]),
                animation: google.maps.Animation.DROP,
                map: map
            }
            );

            google.maps.event.addListener(marker, 'click', (function (marker, i) 
            {

                return function () 
                {
                    infowindow.setContent(location[i][0]);
                    infowindow.open(map, marker);
                }

            }
            )(marker, i));
            }, 1000)
        } 
```

但这不起作用，我尝试过的其他事情也没有。我看过很多解释，其中大部分似乎都有意义，但我无法弄清楚这一点，我认为这更多的是关于 for 循环而不是其他任何东西。

例如，我还尝试将 addlistener 封装在 setTimeout 中，我想如果我运行 addlistener 代码并等待它会起作用。我想我在哪里是我需要想出一种方法来跳出循环并等待被调用的函数返回一些东西，但我不知道该怎么做。

如果有人能告诉我我是否在正确的轨道上，我会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:49:29.460

如果您不想一次获得所有结果，则需要给出不同的时间，因为循环会立即执行，并且所有超时都是从执行时间开始计算的：

```
setTimeout(function() { 

}, 1000*i); 
```

并且为了避免所有迭代使用相同的值的问题`i`，在闭包中使用

```
for (i = 0; i < location.length; i++) {
   (function(i){
       setTimeout(function() { 

       }, 1000*i);
   })(i);
} 
```

# javascript - PHP 将变量返回到 AJAX（可能是一个数组？）

> ID：14526448
> 
> 赞同：0
> 
> 时间：2013-01-25T16:48:25.760
> 
> 标签：javascript, php, jquery, json, ajax

我的愿望是通过 AJAX 将数据字符串中的一些信息发送到 PHP 页面，然后返回变量让我分开并要求 jQuery 填写不同的元素。这样我就可以说：

```
$('.elemA').html($variableA);
$('.elemB').html($variableB); etc. 
```

但我不确定是否有可能或如何做到这一点。也许它可以返回一个数组让我以某种方式分开？我不知道。

* * *

如果其他人发现这个问题 - 这个脚本帮助了我，实际上向我展示了 JSON 编码的含义：http: [//www.jonsuh.com/demo/jquery-ajax-call-to-php-script-with-json -返回](http://www.jonsuh.com/demo/jquery-ajax-call-to-php-script-with-json-return)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:51:25.467

你应该使用`json_encode($array)`. 它使用[JSON](http://en.wikipedia.org/wiki/JSON)对您的数组进行编码并返回一个可由 Javascript 轻松读取的数据字符串。

要将其转换为 Javascript 数组，您可以使用[parseJSON()](http://api.jquery.com/jQuery.parseJSON/) 或按照@BishopZ use 的建议`JSON.parse(ajaxResponse)`，它内置于大多数现代浏览器中。

# jsf-2 - 处理 ViewExpiredException（JSF 2.1、Seam2、Primefaces 3.4.1、Omnifaces 1.3）

> ID：14526449
> 
> 赞同：2
> 
> 时间：2013-01-25T16:48:26.480
> 
> 标签：jsf-2, primefaces, seam, viewexpiredexception, omnifaces

我在尝试使用框架 JSF 2.1、Seam 2.3、Primefaces 3.4.1、Omnifaces 1.3 正确处理 ViewexpiredException 时遇到了可怕的问题。

在这里你可以看到我在 primefaces 论坛上发布的问题的完整解释：http: [//forum.primefaces.org/viewtopic.php? f=3&t=28215](http://forum.primefaces.org/viewtopic.php?f=3&t=28215)

在这篇文章中，我被告知要尝试全脸（我现在正在尝试这样做）。所以我在我的项目中配置它（不确定是否正确）。

我将此添加到我的 faces-config.xml 中：

```
<application>
<...>
<resource-handler>org.omnifaces.resourcehandler.CombinedResourceHandler</resource-handler> 
<...>
</application>

<factory>
<render-kit-factory>org.omnifaces.renderkit.Html5RenderKitFactory</render-kit-factory>
<exception-handler-factory>org.omnifaces.exceptionhandler.FullAjaxExceptionHandlerFactory</exception-handler-factory>
</factory> 
```

一切似乎都正常，FullAjaxExceptionHandlerFactory 似乎试图处理异常并尝试重定向到登录页面（请参阅我在 primefaces 论坛上的最后一篇文章）但应用程序被冻结并且没有真正发生，我不太确定我是否做了错误什么的。

我已经尝试了我在互联网上找到的几乎所有解决方案，但似乎对我不起作用，当某些东西似乎起作用时，我在登录后得到这个页面（我被重定向导致会话退出）：[http://img831.imageshack。我们/img831/7459/pic4w.png](http://img831.imageshack.us/img831/7459/pic4w.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:07:37.897

非常感谢您的回复。我终于解决了。

我不太清楚为什么，但是 pages.xml 文件的标签“pages”中的这个属性 login-view-id="/login.xhtml" 避免了这段代码的“进程”：

```
<exception class="org.jboss.seam.security.NotLoggedInException">
  <redirect view-id="/login.xhtml">
     <message>Debe loguearse para continuar</message>
  </redirect> 
```

在我删除 login-view-id 属性后，NotLoggedInException 开始被处理，但是我登录后仍然遇到同样的问题，所以我添加并最终解决了问题，所以完整的标签结束如下：

```
<exception class="org.jboss.seam.security.NotLoggedInException">
   <end-conversation/>
  <redirect view-id="/login.xhtml">
     <message>Debe loguearse para continuar</message>
  </redirect> 
```

非常感谢你！

# r - 如何将参数传递给在另一个函数中调用的函数？

> ID：14526450
> 
> 赞同：2
> 
> 时间：2013-01-25T16:48:35.827
> 
> 标签：r

我正在使用孤立的 R 库（[*wmtsa*](http://cran.r-project.org/web/packages/wmtsa/index.html)）。它的一个函数创建了一个连续的小波变换 ( `wavCWT()`)，它返回一个小波对象，并且可以通过调用传统`plot()`函数来绘制它。不幸的是，函数的编写方式不允许我更改一些典型的绘图参数。特别是，我无法设置`axes=F`，我不得不一直绘制轴。这没有帮助，因为我想向我的设备添加额外的层，并且轴不同并且它们是偏移的。

有没有办法将参数传递给调用 plot() 函数的方法？

如果这不可能，恐怕我将不得不修改源代码。如果是这种情况，我应该去哪里修改这种对象的方法？

我找到了方法的[来源](https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/R/wav_xform.R?root=wmtsa)，但我的黑客技能有限，我有点迷茫。

例子：

```
 library(wmtsa)   # assuming you have installed the package wmtsa
 wavCWT(sin(rnorm(1000)))
 plot(W, power.stretch=0.5) 
```

产生这个情节：

![在此处输入图像描述](../Images/46b7296605b0304ecbbcedb3fb894f1d.png)

但是，如果我尝试删除轴，则会`axes=F`收到以下消息：

```
plot(W, power.stretch=0.5, axes=F)
Error in plot.default(NA, NA, xlim = xlim, ylim = ylim, type = "n", xaxs = xaxs,  : 
formal argument "axes" matched by multiple actual arguments 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:03:49.250

您确实需要更改源，但只是非常轻微。在第 269-270 行`wav_xform.R`，在`plot.wavCMT`函数内部更改行：

```
image(data$x, data$y, imageScale(data$z, power.stretch=power.stretch), ...,
  xlab=xlab, ylab=ylab, axes=TRUE) 
```

到

```
image(data$x, data$y, imageScale(data$z, power.stretch=power.stretch), ...,
  xlab=xlab, ylab=ylab) 
```

原因是省略号 ( `...`) - 这意味着“将任何额外的参数`plot`传递给函数并将它们传递给`image`函数”。但是，原始代码也`axes=TRUE`有，这意味着如果你尝试通过`axes=FALSE`，你会得到一个`formal argument "axes" matched by multiple actual arguments`错误。

然后（一旦重新安装），以下工作可以摆脱轴：

```
library(wmtsa)
sunspots.cwt <- wavCWT(sunspots)
plot(sunspots.cwt)  # has axes
plot(sunspots.cwt, axes=FALSE)  # does *not* have axes 
```

另请注意，由于省略号，您*可以更改其他常见的绘图参数！*（即使您从不修改源代码也是如此）。例如：

```
plot(sunspots.cwt, main="My great wavelet plot")  # change title
plot(sunspots.cwt, xlim=c(1750, 1850))  # change x axis range
plot(sunspots.cwt, ylim=c(0, 2))  # change y axis range 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T17:07:32.670

wmtsa包定义了一个专门用于类对象的*方法*。因为它是一个 S3 方法，所以它被调用，但它被声明为不可见，如以下命令所示（加载包后）：`plot``wavCWT``plot.wavCWT`

```
methods(plot) 
```

默认情况下，使用 R，您只需键入不带括号的名称即可获取函数的源代码。但它在这里不起作用，因为该功能是不可见的。所以你必须这样做：

```
getAnywhere(plot.wavCWT) 
```

您可以做的一件事是复制源代码，然后使用以下命令重新定义函数：

```
plot.wavCWT <- function (x, xlab = NULL, ylab = NULL, logxy = "y", power.stretch = 0.5, 
phase = FALSE, series = FALSE, series.ylab = "", zoom = NULL, 
type = "image", grid.size = 100, add = FALSE, theta = 120, 
phi = 30, ...) {
    ...paste your original code here...
} 
```

然后您可以根据需要修改原始代码并执行您的函数定义以使其可用于您的脚本。

我不完全确定您需要修改哪些内容以满足您的需要，但函数定义中有以下块：

```
 plot(series.time, x.series[itime], type = "l", col = "blue", 
            axes = TRUE, xlim = range(series.time), ylab = series.ylab, 
            xlab = "", xaxt = "n", xaxs = "i") 
```

然后，您可以更改`axes=TRUE`为，`axes=FALSE`或者更好的是，将参数添加`plotaxes=TRUE`到您的函数定义中，然后更改`axes=TRUE`为`axes=plotaxes`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T16:46:05.300

不修改功能码的快速解决方案：

```
x=seq(1:10)
y=x
plot(x,y,ylab="unwanted y label",xlab="x")
mtext("unwanted y label", side=2, line=3, col="white", cex=1)
mtext("my new y label", side=2, line=3, col=1, cex=1) 
```

上面的代码用白色覆盖了之前的 y 标签，然后将标签替换为所需的标签。

# c - 矩阵中的递归寻路

> ID：14526451
> 
> 赞同：2
> 
> 时间：2013-01-25T16:48:36.247
> 
> 标签：c, recursion, matrix, tail-recursion

我需要使用递归找到从`1`a`matrix[R][C]`开始`matrix[0][0]`直到它到达的数字的路径。`matrix[R-1][C-1]`我只能向下或向右。在大多数情况下，我没有问题。我的问题只有在无处可去的时候，我需要后退一步。

例如，这是我从文件中获取的矩阵：

```
1 0 0 0 0 0
1 1 0 0 0 0
1 1 0 0 0 0
1 1 1 1 0 1
1 0 1 1 1 1
0 1 0 1 1 1 
```

问题是当它到达时`matrix[4][0]`。我不明白为什么它不会在递归中返回。当它应该返回 true 时，它​​返回 false。

这是代码：

```
int findPath(int matrix[][C],int rowSize,int colSize)
{
    int a=0,b=0;
    if(Find_Path(matrix,rowSize,colSize,a,b)==0)
    {
        printf("The function return - False\n");
        return 0;
    }
    else 
    {
        printf("The function return - True\n");
        return 1;
    }
} 

int Find_Path(int matrix[][C],int rowSize,int colSize,int a,int b)
{
    if(a==(rowSize-1) && (b==colSize-1))
        return 1;
    if(matrix[a+1][b]==1)
        return Find_Path(matrix,rowSize-1,colSize-1,a+1,b);
    if(matrix[a][b+1]==1)
        return Find_Path(matrix,rowSize-1,colSize-1,a,b+1);

    if(matrix[a+1][b]==0 && matrix[a][b+1]==0)
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:55:44.743

*   您的递归函数是错误的，因为它只尝试它看到的第一个“1”相邻单元格。
*   递归错误地只查看矩阵的较小部分。您必须调整矩阵大小（但也要调整其原点）或坐标。不是都。
*   失败条件（最后一个 if）是错误且虚假的。

```
    int Find_Path(int matrix[][C],int rowSize,int colSize,int a,int b)
    {
       if(a==(rowSize-1) && (b==colSize-1))
          返回 1；
       if(matrix[a+1][b]==1 && Find_Path(matrix,rowSize,colSize,a+1,b))
          返回 1；
       if(matrix[a][b+1]==1 && Find_Path(matrix,rowSize,colSize,a,b+1))
          返回 1；
       返回0；
    }

```

（虽然我还没有测试过。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:50:46.347

你需要检查你没有放弃矩阵，我发现在移动之后而不是在移动之前检查矩阵中的 1 和 0 稍微整洁一些。把它们放在一起给出了这个代码。

```
int find_path(int matrix[R][C], int i, int j) {
    if (!matrix[i][j]) return 0;
    if (i == R-1 && j == C-1) return 1;
    return i+1<R && find_path(matrix, i+1, j) ||
           j+1<C && find_path(matrix, i, j+1));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:23:13.933

在`[3][0]`,`if(matrix[a+1][b]==1)`会成功，它会尝试调用`return Find_Path(matrix,rowSize-1,colSize-1,4,0);`现在返回值为 0，那么你就直接返回了。`1`仅当该递归调用返回时才从该位置返回`1`。

```
if(matrix[a+1][b]==1)
    if(Find_Path(matrix,rowSize-1,colSize-1,a+1,b)) return 1;
if(matrix[a][b+1]==1)
    if(Find_Path(matrix,rowSize-1,colSize-1,a,b+1)) return 1; 
```

因为在您的代码中调用了`[4][0]`它的返回`0`，并且您从那个地方返回本身带有`0`. 你不打算进行下一次检查`if(matrix[a][b+1]==1)`

# git - git：两次提交之间的差异，仅适用于第三次提交中列出的文件？

> ID：14526465
> 
> 赞同：2
> 
> 时间：2013-01-25T16:49:16.737
> 
> 标签：git, diff

我正在使用 git svn，并且需要从主干合并一个支持 svn 的项目分支。尝试使用本机 svn merge 时搞砸了，所以要小心我创建了两个普通的 git 分支，一个来自主干，一个来自我的项目分支，并在这些新分支之间使用 git merge。

我现在想检查项目和主干分支之间的更改，但仅针对在我创建的合并中添加/删除/更改的文件 - 在两个分支上都做了很多工作，尽管实际上几乎没有重叠。

我做了以下工作，但感觉不优雅：

```
$ git diff soa-2237-from soa-2237-to $( git show HEAD |
       grep -E '^[-+]{3}' |
       cut -c7- |
       sort -u) 
```

鉴于我已经完成了 hacky 合并，这个 diff 是否有更优雅的表达方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T19:56:58.107

好吧，`git show HEAD | <hacky grep/cut/sort stuff>`您可以使用 来获取文件列表，而不是使用`git diff --name-only HEAD~1`，这有点不那么难看，并列出了在当前`HEAD`和它的第一个父级之间发生变化的文件名。

您还应该将文件名与命令的其余部分分开，如下所示：

```
git diff branch1 branch2 -- $( git diff --name-only HEAD~1 ) 
```

如果您遇到名称以`-`.

请注意，您也可以引用不是您所在的第三个分支来执行此操作：

```
git diff branch1 branch2 -- $( git diff --name-only branch3~1 branch3 ) 
```

在这种情况下，您必须命名两个提交以进行比较以获取您的文件列表，因为默认`HEAD`参数将不适用。

# java - 如何在 JMenuItem 上调用 dispose()？

> ID：14526473
> 
> 赞同：2
> 
> 时间：2013-01-25T16:49:34.363
> 
> 标签：java, swing, dispose, actionlistener, jmenuitem

我正在尝试编写代码，以便当用户单击“文件”选项卡并选择“退出”时，它会退出我构建的整个窗口。

我正在尝试使用该`dispose();`方法，但它给了我错误“方法 dispose() 未定义新 ActionListener() 类型”

这是代码

```
public static void addLayouts(){

        frame = new JFrame();
        frame.setSize(600, 600);
        frame.setTitle("IPFinder");
        GroupLayout groupLayout = new GroupLayout(frame.getContentPane());
        groupLayout.setHorizontalGroup(
            groupLayout.createParallelGroup(Alignment.LEADING)
                .addGap(0, 384, Short.MAX_VALUE)
        );
        groupLayout.setVerticalGroup(
            groupLayout.createParallelGroup(Alignment.LEADING)
                .addGap(0, 362, Short.MAX_VALUE)
        );
        frame.getContentPane().setLayout(groupLayout);

        JMenuBar menuBar = new JMenuBar();
        frame.setJMenuBar(menuBar);

        JMenu mnFile = new JMenu("File");
        menuBar.add(mnFile);

        JMenu mnEdit = new JMenu("Edit");
        menuBar.add(mnEdit);

        JMenuItem mntmCopyResults = new JMenuItem("Copy Results");
        mnEdit.add(mntmCopyResults);

        JMenu mnAbout = new JMenu("About");
        menuBar.add(mnAbout);

        JMenuItem mntmAboutIpfinder = new JMenuItem("About IPFinder");
        mnAbout.add(mntmAboutIpfinder);
        frame.setVisible(true);

        JMenuItem mntmExit = new JMenuItem("Exit");
        mntmExit.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                dispose();
            }
        });
        mnFile.add(mntmExit);

    } 
```

我在谷歌上花了大约 2 个小时试图弄清楚它，但我无法让它工作。

在这一点上，我已经用尽了所有的选择，所以我来到了这里。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:51:08.180

如果`ClassName.this.dispose()`您的类扩展`JFrame`或`JDialog`不是简单地调用`dispose()`，或者`frame.dispose()`如果您有`frame`这种类型的变量，请使用。在您的情况下，这是第二种选择：`frame.dispose();`

这样，您告诉编译器您正在调用`dispose()`子`Window`类型的 ，而不是 an 的匿名实现，反正`ActionListener`它没有 a 。`dispose()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T16:53:25.090

`dispose()`应该在`JFrame`or上调用`JDialog`，而不是在`ActionListener`.

> 但它给了我错误“方法 dispose() 未定义新 ActionListener() 类型”

确切地。`ActionListener`只有一种方法`actionPerformed()`。 [http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T16:54:43.653

正如我所看到的，你已经定义了

```
frame = new JFrame(); 
```

您的课程没有扩展`JFrame`。所以当你调用`dispose`它时会抛出错误，因为`ActionListener`类没有这样的方法。

因此，请使用您要处理的组件。

```
Example: frame.dispose(); 
```

# asp.net - 显示 asp.net 页面时出错

> ID：14526475
> 
> 赞同：0
> 
> 时间：2013-01-25T16:49:35.847
> 
> 标签：asp.net, webforms, temp

在某些 asp.net 网页上重定向时，远程服务器上出现错误。

在日志文件中：

```
 <error date="2013-01-25T18:40:09" module="E24PublicPortal" login="-">
    <message>-</message>
    <exception>
      <Message Type="System.Web.HttpUnhandledException">Exception of type 'System.Web.HttpUnhandledException' was thrown.</Message>
      <InnerMessage Type="System.NullReferenceException">Object reference not set to an instance of an object.</InnerMessage>
      <Source>System.WebBoolean HandleError(System.Exception)</Source>
      <StackTrace>   at System.Web.UI.Page.HandleError(Exception e)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest()
   at System.Web.UI.Page.ProcessRequest(HttpContext context)
   at ASP.vehicleinsurancepayment_aspx.ProcessRequest(HttpContext context) in c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\2babcf5b\7311d315\App_Web_kvw1yfpt.2.cs:line 0
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)</StackTrace>
    </exception>
  </error>
  <error date="2013-01-25T18:40:09" module="E24PublicPortal" login="-">
    <message>-</message>
    <exception>
      <Message Type="System.NullReferenceException">Object reference not set to an instance of an object.</Message>
      <Source>koduLibsInt32 GetDRInt(System.Data.DataRow, System.String)</Source>
      <StackTrace>   at kodu.Libs.Utils.GetDRInt(DataRow row, String name)
   at kodu.Libs.DBFile.FillFromDataRow(DBFile file, DataRow rowFile)
   at kodu.Libs.DBFile.Load(Int32 kind, Int32 type, Int32 channelId, Int32 langId)
   at kodu.Libs.EmailTemplate.Load()
   at kodu.Portal.VehicleInsurancePayment.GetEmailText(PolicyOrder po, EmailTemplates template)
   at kodu.Portal.VehicleInsurancePayment.SendPaymentFailEmail()
   at kodu.Portal.VehicleInsurancePayment.Page_Load(Object sender, EventArgs e)
   at kodu.Portal.Code.E24Page.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)</StackTrace>
    </exception>
  </error> 
```

在本地机器上它工作得很好。如果我从 temp 中删除 App_Web_kvw1yfpt.2.cs，也会不断收到错误消息。有什么建议么 ？

谢谢

Kodu.Libs.Utils.GetDRInt(..) 的代码：

```
public static int GetDRInt(DataRow row, string name)
        {
            return row[name] != DBNull.Value ? (int)row[name] : -1;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:19:50.663

我将函数设为：

```
public static int GetDRInt(DataRow row, string name)
{
    Debug.Assert(name != null, "Name must have a value");

    if(row == null || row[name] == null || row[name] == DBNull.Value)
       return -1
    else
       return (int)row[name];
} 
```

并检查所有可能的空案例。

# c# - 无法跟踪树视图的 div 位置

> ID：14526479
> 
> 赞同：0
> 
> 时间：2013-01-25T16:49:42.197
> 
> 标签：c#, asp.net, html, ajax, modalpopupextender

我已经实现了一种跟踪 Div 位置的方法 - 这在我的网页上运行良好。现在我想跟踪`modalpopupextender`包含a 的 div 位置，`TreeView`但它的位置恢复为 0。我认为这可能是由于弹出窗口尚未呈现，因为`alert(elem.scrollTop);`下面的第二个消息框 () 在弹出窗口。

正在保存的第一个值被警告为 860，但始终恢复为 0。在第二个警告之后，当我单击“确定”时会显示弹出窗口，我认为这是页面未完全完成的问题。

你能告诉我我需要做什么来解决吗？

**Javascript**

```
<script type="text/javascript"> <!-- Script to manage scroll position -->    
$(document).ready(function () {
    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequestHandler);
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

    function BeginRequestHandler(sender, args) {

        try {
            var elem = document.getElementById('AddFiles_Div');
            scrollTop = elem.scrollTop; 
            // I am working correctly   
            alert(elem.scrollTop);    
       }
       catch (err) {}
    }

    function EndRequestHandler(sender, args) {
        try {    
            var elem = document.getElementById('AddFiles_Div');
            elem.scrollTop = scrollTop;
            // I am always zero   .................. 
            alert(elem.scrollTop);     
        }

        catch (err) {}  
    }   

    });    

</script> 
```

**当节点展开时运行的 C# 代码 .ie on Postback**

// 做一些工作然后运行下一个 lin.....

```
AddFilesModal.Show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:23:56.533

这个解决方案怎么样？- 它工作正常。即替换

```
$(document).ready(function () { }); 
```

和

```
function pageLoad() {} 
```

这个可以吗？

**完整的工作Javascript**

```
<script type="text/javascript"> <!-- Script to manage scroll position -->

function pageLoad() {

    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequestHandler);
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

    function BeginRequestHandler(sender, args) {

        try {
            var elem = document.getElementById('AddFiles_Div');
            scrollTop = elem.scrollTop;
       }

        catch (err) {
        }

    }

    function EndRequestHandler(sender, args) {
        try {
            var elem = document.getElementById('AddFiles_Div');
            elem.scrollTop = scrollTop;

        }

        catch (err) {

        }
    }   

   //});
 }

</script> 
```

# ios - 约旦安曼的 NSDate 和 NSFormatter 问题

> ID：14526480
> 
> 赞同：1
> 
> 时间：2013-01-25T16:49:43.707
> 
> 标签：ios, nsdate, nsdateformatter, nscalendar, nsdatecomponents

我的设备时区设置为约旦安曼。这段代码：

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"yyyyMMdd"];
NSDate *date = [dateFormatter dateFromString:@"20130329"];
NSLog(@"date: %@, timezone: %@", date, [NSTimeZone systemTimeZone]); 
```

此日志中的结果：

```
date: (null), timezone: Asia/Amman (GMT+02:00) offset 7200 
```

假设由于约旦安曼的 DST，这个日期和时间不存在。但随后这段代码：

```
NSDateComponents *components = [[[NSDateComponents alloc] init] autorelease];
components.year = 2013;
components.month = 03;
components.day = 29;
NSCalendar *calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
NSDate *date = [calendar dateFromComponents:components];
NSLog(@"date: %@, timezone: %@", date, [calendar timeZone]); 
```

此日志中的结果：

```
date: 2013-04-28 21:00:00 +0000, timezone: Asia/Amman (GMT+02:00) offset 7200 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:14:59.867

您的代码很好，没有任何错误，清除目标并再次检查。

看[这里](http://www.timehall.com/time/Jordan/P9C)

# android - Android Maps-API v2：叠加层在哪里？

> ID：14526482
> 
> 赞同：2
> 
> 时间：2013-01-25T16:49:51.080
> 
> 标签：android, api, google-maps, overlay, google-maps-android-api-2

我已经编写了一个在 Android 中使用 GoogleMaps Api v1 的应用程序。这个应用程序使用了几个*Overlays*（或*ItemizedOverlays*），它们自主处理一堆事情（即延迟加载标记，因为我有很多它们并且一次添加它们会强制应用程序关闭）。我还将它们用作用户的界面：他可以决定他想看到哪些叠加层（或从他的角度来看哪种标记）。我相应地添加或删除这些*叠加层*。现在我想切换到新的 maps-v2-api。文档没有提到*Overlays*，而且似乎不能扩展*Markers*，因为它们是*final*的。

我是否被迫模仿以前的地图行为，以便能够添加和删除自己处理*标记的**叠加层*？有谁知道为什么 Google 删除了这个有用的工具，并迫使任何开发人员完全重写 GoogleMaps 相关代码的原因？我还想知道将*Marker*类设为*final*的原因，从而阻止任何人添加与之相关的内容？（我看到的解决方案存储了一个全局 HashMap，其中标记作为键，它们需要的信息作为值，在我看来，考虑到标记可能具有与它们相关的不同模型，这非常难看）。

 **** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:07:24.400

> 我是否被迫模仿以前的地图行为，以便能够添加和删除自己处理标记的叠加层？

是的。

> 有谁知道谷歌删除这个有用的工具的原因，并迫使任何开发人员完全重写谷歌地图相关代码？

谷歌工程师可能知道原因。

据我所知，对于简单的场景，新方法需要的代码更少。Maps V1 需要叠加层，而叠加层对于许多应用程序来说太过分了。

> 我还想知道将 Marker 类设为 final 的原因，从而阻止任何人添加与之相关的内容？

因为`Marker`它用于 IPC，并没有真正保留在您的流程中。根据[Cyril Mottier 的研究](http://cyrilmottier.com/2012/12/07/the-google-maps-android-api-v2-utopia/)，您使用 Maps V2 执行的几乎所有操作都会导致 IPC 调用。***

# flash - 在 as3 中需要带有条件的正确代码

> ID：14526487
> 
> 赞同：0
> 
> 时间：2013-01-25T16:50:00.527
> 
> 标签：flash, codeigniter, actionscript-3

嗨，我正在用 flash as3 ios 设备制作游戏，但代码有问题：

```
if (e.MOUSE_DOWN right_btn ==) { 
```

我说不正确 MOUSE_DOWN

游戏是用按钮控制的，这是一个平台游戏，但我只是用按钮做运动，我有问题。请帮忙

代码完成：

```
var izquierdaPulsada:Boolean = false;
var derechaPulsada:Boolean = false;
var arribaPulsada:Boolean = false;
var abajoPulsada:Boolean = false;

var xScrollSpeed:int = 10;
var yScrollSpeed:int = 10;

abajo_btn.addEventListener (MouseEvent.MOUSE_DOWN, keyDownHandler);
arriba_btn.addEventListener (MouseEvent.MOUSE_UP, keyUpHandler);
stage.addEventListener(Event.ENTER_FRAME, loop);

function keyDownHandler(e:MouseEvent):void{
if(e.MOUSE_DOWN == izquierda_btn){
izquierdaPulsada = true;

} else if(e.MOUSE_DOWN == derecha_btn){
derechaPulsada = true;

} else if(e.MOUSE_DOWN == arriba_btn){
arribaPulsada = true;

} else if(e.MOUSE_DOWN == abajo_btn){
abajoPulsada = true;

}
}

function keyUpHandler(e:MouseEvent):void{
if(e.MOUSE_DOWN == izquierda_btn){
izquierdaPulsada = false;

} else if(e.MOUSE_DOWN == derecha_btn){
derechaPulsada = false;

    } else if(e.MOUSE_DOWN == arriba_btn){
arribaPulsada = false;

} else if(e.MOUSE_DOWN == abajo_btn){
abajoPulsada = false;
}
}

function loop(e:Event):void{
    if(izquierdaPulsada){
        background.x += xScrollSpeed;

    } else if(derechaPulsada){
        background.x -= xScrollSpeed;

    }

    if(arribaPulsada){
        background.y += yScrollSpeed;

    } else if(abajoPulsada){
        background.y -= yScrollSpeed;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:52:49.470

更改`e.MOUSE_DOWN`为`e.target`

# ruby-on-rails - 在带有 Postgresql 后端的 Heroku 上的 Rails 应用程序中使用 COPY FROM

> ID：14526489
> 
> 赞同：3
> 
> 时间：2013-01-25T16:50:06.930
> 
> 标签：ruby-on-rails, postgresql, heroku

我想为用户提供在我的 Ruby on Rails 3.2 应用程序中上传文件的选项，并将数据放入数据库中。我想使用该`COPY FROM`命令，因为它比插入 ruby​​ 对象更快。

如果我做

```
User.connection.execute("COPY users (name, taxon_id, created_at, updated_at) FROM 'a.txt'") 
```

我明白了

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  must be superuser to COPY to or from a file
HINT:  Anyone can COPY to stdout or from stdin. psql's \copy command also works for anyone. 
```

但是，`\copy`也不适用于数据库连接。如何在 Heroku 上使用 PostgreSQL 从 Rails 中的平面文件轻松上传数据？您可以获得超级用户权限吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:27:44.193

感谢@PhilipHallstrom 的链接，我`COPY FROM STDIN`这样使用：

```
rc = User.connection.raw_connection
rc.exec("COPY users (name, taxon_id, updated_at, created_at) FROM STDIN")
begin
  until rc.put_copy_data( data )
    $stderr.puts "  waiting for connection to be writable..."
    sleep 0.1
  end
rescue Errno => err
  @errmsg = @errmsg + "%s while reading copy data: %s" % [ err.class.name, err.message ]
  error = true
else
  rc.put_copy_end
  while res = rc.get_result
    if (res.result_status != 1)
      error = true
      @errmsg = @errmsg + "Result of COPY is: %s" % [ res.res_status(res.result_status) ]
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T02:17:58.567

您可以使用 gem [https://github.com/diogob/postgres-copy](https://github.com/diogob/postgres-copy) 假设`data`是一个 IO 对象。

```
User.copy_from data, columns: [:name, :taxon_id, :updated_at, :created_at] 
```

或者直接使用上传文件的路径：

```
User.copy_from "/tmp/uploaded_file.csv", columns: [:name, :taxon_id, :updated_at, :created_at] 
```

# jquery - 游戏：同时键盘输入（奔跑和跳跃）

> ID：14526494
> 
> 赞同：2
> 
> 时间：2013-01-25T16:50:15.607
> 
> 标签：jquery, input, keycode, simultaneous

我正在尝试创建一个 jquery 驱动的平台游戏，但我最多是个新手。我遇到的第一个问题是同时键盘输入（可以说是跑和跳）。只是想知道我做错了什么；

```
var tickRate = 100,
    slideB = 0,
    slideC = 0,
    oldV = 0,
    time = 0;

$('body').keydown(function(e){
    e.stopPropagation();
    if (e.keyCode == '38') { jump(); }
    if (e.keyCode == '40') { }
    if (e.keyCode == '37') { slideB += 1; run(); }
    if (e.keyCode == '39') { slideB -= 1; run(); }
    $("#Background").css('left', (slideB * 10) + 'px');
    $("#Tell").html(slideB);
});

var run = function() {
    slideC -= 1;
    if (slideC < -20) {slideC = 0;}
    $("#Sprite").html(slideC * -11);
};

var jump = function(){
    $("#Character").animate({ top: "50px" },{ duration: 1000, easing: "easeOutQuad" });
    $("#Character").animate({ top: "200px" },{ duration: 1000, easing: "easeInQuad" });
} 
```

目前，如果我按下 Run（右箭头），然后我跳（上箭头），我停止跑步，直到我再次按下 Run。

我将在某个时候需要一个向上计数器，所以也许我可以绑定一个“检查是否按下键”脚本。

任何建议都是有帮助的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:30:55.753

我弄清楚我做错了什么。我的绘图函数应该在一起，用一个 setInterval 来重绘它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:09:05.433

对于一般的想法，你可以尝试这样的事情： **{你应该根据每个动画持续时间和/或`.stop()`每个动画的使用方法和/或使用标志来设置间隔持续时间}**

[http://jsfiddle.net/7juFk/](http://jsfiddle.net/7juFk/)

```
(function () {
    $('body').on('keydown keyup', function (e) {
        e.stopPropagation();
        var key = e.which,
            type = e.type;
        switch (key) {
            case 38:
                [type == 'keydown' ? jump() : clearInterval(intervalJump)];
                break;
            case 37:
                [type == 'keydown' ? run() : clearInterval(intervalRun)];
                break;
        }
    });
    var intervalRun,
    intervalJump,
    run = function () {
        console.log('running');
        clearInterval(intervalRun);
        intervalRun = setInterval(run, 0);
    },
    jump = function () {
        console.log('jumping');
        clearInterval(intervalJump);
        intervalJump = setInterval(jump, 0);
    }
})(); 
```

# continuous-integration - 如何使用 TeamCity 部署到环境，然后针对该环境运行测试？

> ID：14526495
> 
> 赞同：0
> 
> 时间：2013-01-25T16:50:16.687
> 
> 标签：continuous-integration, teamcity, acceptance-testing

我正在努力解决这个问题！

我希望 TeamCity 将我们的 Windows 服务部署到特定环境，然后有一个单独的项目针对该环境运行验收测试。

目前我有一个项目，它构建然后运行单元测试，最后打包可部署的元素。

第二个项目获取包（工件依赖项）并部署到环境中。

现在我希望针对该部署运行验收测试。测试不在可部署包中，所以我必须返回“构建”项目......我想我可以使用快照依赖项来使用已经编译的文件（我不想签出/重新编译任何东西）

但是，当我在这个项目上点击“运行”时，我只是在代理上得到一个空文件夹。

我一定误解了它是如何工作的！是否有任何博客文章可以帮助阐明这一点？

测试是 specflow/nunint 测试。

如果我不清楚，请询问更多信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:06:50.127

您可能希望将测试设置为构建项目的工件，然后将测试部署到部署环境。

然后在部署环境中运行一个单独的 TeamCity 代理，以在该环境中实际执行测试。

# debugging - 在编排和地图中调试

> ID：14526496
> 
> 赞同：0
> 
> 时间：2013-01-25T16:50:21.270
> 
> 标签：debugging, biztalk, visual-studio-debugging

我有一张不能正常工作的地图。我已经将一个字段从我的全新模式映射到一个规范模式，但问题是在规范中有一个字段没有被评估（但它导致正确映射）。我想知道这怎么可能。如何调试编排/地图？

PS：编排从 MSSQL SP 中获取值，然后使用映射构造格式良好的 xml。PS2：SQL 中的数据已正确评估（查询返回我的方面值）。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:41:39.683

如何在 BizTalk 地图上使用调试器（如果您使用的是 Visual Studio 2010）：

*   在解决方案资源管理器窗口中左键单击要调试的 btm 文件
*   将“testmap 输入实例”设置为您的输入文件。将输入写入 xml 文件。
*   将“testmap 输出实例”设置为可以存储输出的某个文件名。
*   右键单击解决方案资源管理器中的 btm 文件，然后选择“调试地图”
*   它将打开一个窗口，其中包含转换为 xsl 的地图并在 xsl 中设置断点。
*   您可以在 xsl 中设置断点并查看值，就像在调试常规 C# 代码一样。
*   它将打开第二个窗口，其中包含构建时的输出文件。

![在此处输入图像描述](../Images/1fb79b43bf5461ac1c406a2f25abb5a4.png)

# python - 需要单击 Excel 公式才能进行评估

> ID：14526500
> 
> 赞同：0
> 
> 时间：2013-01-25T16:50:40.080
> 
> 标签：python, excel, excel-formula, xlwt

我编写了一个 python 程序，它基本上以 `=FORMULA 的形式读取 excel 公式并将其写入输出 excel。这是我的代码：

```
source=open_workbook('source.xls',formatting_info=True)

wb = copy(source)
ws = wb.get_sheet(0)

funWriter = open_workbook('template.xls')
VolProfile = funWriter.sheet_by_index(0)

    for row in range(VolProfile.nrows):
-   for col in range(VolProfile.ncols):
-        cellValue = VolProfile.cell(row,col).value
-        try:
-            if cellValue[0] == "`":
-                 cellValue = cellValue[2:]
-                 ws.write(row,col,Formula(cellValue))
-            else:
-                 pass
-         except:
-               pass
wb.save('Final.xls') 
```

代码成功写入公式，但是，除非我单击公式栏并按 Enter，否则 excel 无法评估并生成（#VALUE！）错误。

我试图保存它并按f9，但它们都不起作用。关于如何防止我点击并按 Enter 800 次的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:58:07.477

我不熟悉除 VBA 之外的任何语言语法，但要在单元格中读写 FORMULA，应该使用`Cell.Formula`property，而不是**value**。

也许对于 Python 来说这并不重要，而只是第一个想法。

# htmlunit - 如何使用 htmlunit 填写页面内的所有表单

> ID：14526502
> 
> 赞同：0
> 
> 时间：2013-01-25T16:50:44.263
> 
> 标签：htmlunit

**是否可以使用htmlunit**测试用随机数据填充页面的所有形式（然后单击所有按钮） ？有谁知道一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:06:02.873

可以这样做：

```
HTMLPage page = /* Your Page */
List<HTMLForm> forms = page.getForms();
for(HTMLForm form : forms) {
  List<HTMLElement> elms = form.getHtmlElementsByTagNames(Arrays.asList("input", "textarea"/*etc*/));
  List<HTMLSubmitInput> submits = new List<HTMLSubmitInput>();
  for(HTMLElement elm : elms) {
    if(elm instanceof HTMLSubmitInput) { 
      submits.add((HTMLSubmitInput) elm);
    } else if (elm instanceof  HtmlTextInput || elm instanceof HtmlPasswordInput) {
      ((HTMLInput) elm).setValue("BLA"/* add your random text here */)
    } // Add more input types if you want
  }
  for(HTMLSubmitInput submit: submits) {
    submit.click(); /*Capture the page here*/
  }
} 
```

有关更多这些输入类型，您可以查看[HtmlInput JavaDocs](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/HtmlInput.html)。

# javascript - 在水平滚动上更改 li 类

> ID：14526503
> 
> 赞同：0
> 
> 时间：2013-01-25T16:50:44.930
> 
> 标签：javascript, jquery, css, scroll

我想知道是否可以`li`根据水平滚动的移动来更改我的“选定”类。因此，当您开始向右移动滚动条时，选定的`li`类将更改为 2、3、4 .. 等等。

任何开始的提示或要点表示赞赏。

我的代码：

```
<div id="scroller">
<ul id="ulscroller">
<li value="1" class="selected">1</li>
<li value="2">2</li>
<li value="3">3</li>
<li value="4">4</li>
<li value="5">5</li>
<li value="6">6</li>
<li value="7">7</li>
<li value="8">8</li>
<li value="9">9</li>
<li value="10">10</li>
<li value="11">11</li>
<li value="12">12</li>
<li value="13">13</li>
<li value="14">14</li>
<li value="15">15</li>
<li value="16">16</li>
<li value="17">17</li>
<li value="18">18</li>
<li value="19">19</li>
<li value="20">20</li>

</ul>

</div> 
```

CSS：

```
li {float:left; padding:10px; cursor: pointer;}
    div#scroller {width:300px; height:70px; overflow-x: scroll;}
    ul#ulscroller {list-style: none outside none; margin: 0;
        padding: 0; width:655px;}
    ul#ulscroller li.selected {border:1px solid #000;} 
```

小提琴：http: [//jsfiddle.net/7uCS8/](http://jsfiddle.net/7uCS8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:06:03.853

基本思路：

```
var scroller = document.getElementById("scroller"),
    lis = scroller.getElementsByTagName("li"),
    divisionsWidth = lis[0].offsetWidth - 2,
    current = 0,
scroller.onscroll = function(){
    var selected = Math.floor(scroller.scrollLeft/divisionsWidth);
    if (current!==selected) {
        lis[current].className="";
        lis[selected].className="selected";
        current = selected;
    }
}; 
```

可以对其进行调整以更改选择，但这应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:03:46.190

我猜也许，因为 li 有一个定义的宽度，你可以通过每个滚动事件（很容易用 jQuery 完成）获取当前滚动的像素，如果滚动位置在任何位置以更改类名，请更改它。我宁愿为每个 li 元素使用一个 id 值，以便使用 JavaScript 和一个用于组删除类的类轻松识别它。像这样的东西：

```
$(document).scroll(function() {
    var scrollPosition = $(document).scrollLeft();
    if (scrollPosition >= 0 && scrollPosition < 300) {
        $("li.scroller_children").removeClass("selected");
        $("li#1").addClass("selected");
    } elseif (scrollPosition >= 300 && scrollPosition < 900) {
        $("li.scroller_children").removeClass("selected");
        $("li#2").addClass("selected");
    } elseif ....
}); 
```

一世

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:05:14.490

使用 jQuery 你可以做这样的事情。

```
$(window).scroll(function (scrolledTo) {
    $("li:[value=" + scrolledTo).addClass("selected");
    $("li.selected").removeClass("selected");
}); 
```

不幸的是，我不知道如何`scrolledTo`从事件中获取窗口滚动到 ( ) 的位置，并且它似乎不在 jQuery 文档中。但是，您说您想要一个起点，所以我认为这至少可以为您提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T17:26:26.053

你可以试试这个，需要一些修改...

```
$("#scroller").scroll(function () { 
     $(".selected").removeClass("selected").next().addClass("selected");
}); 
```

# email - 通过提取 base64 编码的行来分解大型邮箱

> ID：14526505
> 
> 赞同：1
> 
> 时间：2013-01-25T16:50:59.617
> 
> 标签：email

[这是我在Workaround Perl regexp limit](https://stackoverflow.com/questions/14514166/workaround-perl-regexp-limit)中试图解决的实际问题 ？ 但我的问题不够广泛。

我使用 Alpine 阅读邮件，但有几个大小为 100 兆字节的邮箱。Alpine 可以很好地处理它们，但是执行“搜索所有文本”很慢，甚至直接在邮箱（文件）上使用“grep”也会很慢。

这个大小的大部分是由于 base64 附件。我的邮箱中并不需要 base64 附件，因为我无法有效地搜索其中的文本。

我想从我的邮箱中删除 base64 编码的附件，将它们存储在单独的文件中，并将附件替换为“[附件现在位于 /usr/attachments/somefile]”。

请注意，我实际上想将 base64 编码存储在“somefile”中。我不想先解码它。为什么？Base64 解码损坏的附件会丢失信息。换句话说，base64 解码损坏的附件然后重新编码可能会产生不同的字符串。

在我“分解”附件之前，我希望能够逐个字符地重建我的邮箱。这对于 sha1 检查和我的整体偏执狂很有用。

换句话说，我想将笨重且有用的 base64 编码附件移出我的邮箱，但不会丢失一个字符。

我严重失败的尝试是在[GITHUB](https://github.com/barrycarter/bcapps/blob/master/bc-extract-attachments.pl)

# node.js - 通过 ejs 将参数从 node.js 传递给 knockout.js

> ID：14526509
> 
> 赞同：1
> 
> 时间：2013-01-25T16:51:18.073
> 
> 标签：node.js, knockout.js, ejs

我有一个使用 mongodb 数据和输出列表的 node.js，它使用 knockout.js

当我调用视图时，我使用传递一个 json 结构

```
res.render('list', { items:json }); 
```

在 list.ejs 模板页面中，我定义了一个隐藏元素：

```
<input type="hidden" id="hidden" value="<%= items %>"> 
```

在 .js 文件中，我读取了它的值：

```
var json=$("#hidden").val();
var tkts=jQuery.parseJSON(json);
var vm=new AppViewModel(tkts); 
```

嗯......它运行但我认为（希望）必须有更好的方法......有没有办法避免隐藏的html var，例如？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:41:43.247

目前我可以想到三种方法来做到这一点。

## 1.) 将数据分配给 JavaScript 代码中的变量：

```
<script type="text/javascript">solution1 = {"name": "solution1"}</script>

solution1 
```

## 2.) 为您喜欢的元素添加数据属性：

```
<div id="solution2" data-value='{"name": "solution2"}'></div>

JSON.parse(document.getElementById('solution2').dataset.value) 
```

## 3.) 使用 script 标签并选择不同于 text/javascript 或 application/javascript 的内容类型

```
<script id="solution3" type="script" type="text/json">{"name": "solution3"}</script>

JSON.parse(document.getElementById('solution3').innerHTML) 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/sbjud/](http://jsfiddle.net/bikeshedder/sbjud/)

## 个人笔记

这可能听起来很无聊，但第一个选项可能是最好的选择。它速度很快，需要尽可能少的代码并且可以正常工作。如果您可以立即将其作为 JavaScript 数据，我看不出您为什么希望首先将数据保存在字符串中的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:41:53.190

如果您提供一整页，您可以添加一个内联脚本......当然这会污染全局命名空间。

```
<script>
    var tkts = <%= items %>;
</script> 
```

如果您使用 AJAX 获取此页面...然后将其分解为两个 AJAX 请求...其中一个获取模板，另一个可以获取项目列表（作为 JSON 请求）。它们可以并行运行，因此它甚至可能更快。

# jquery - 滑动登录表单

> ID：14526516
> 
> 赞同：0
> 
> 时间：2013-01-25T16:51:29.243
> 
> 标签：jquery, jquery-animate, overflow

当我单击某个触发器时...我想滑入一个简单的登录表单。我有这部分工作（大部分）......但在一些 JS 和显示属性方面遇到了问题。

显示：我只想在包含的 div 中看到这个表单。现在它出现在包含的 div 之外，然后滑入。如果我尝试使用溢出属性解决此问题...关闭按钮不会显示。我尝试同时使用 z-index 和溢出。

JS：单击触发器时我正在设置一个活动类...但是单击关闭按钮时无法删除该类。另外...我希望在单击关闭按钮时表单可以滑出。

这是我所拥有的快速而肮脏的JSFiddle。您可能需要将其展开，以便在单击触发器时查看 for 如何出现在包含的 div 之外......然后滑入。

[JSFiddle][1]

[http://jsfiddle.net/Rule13/fjb5R/](http://jsfiddle.net/Rule13/fjb5R/)

## 这是代码：

CSS

```
<style>
body,td,th {font-family: Arial, Helvetica, sans-serif;}
.row {width:978px; margin:50px auto;}

.loginRow {position:relative;}
.loginTrigger {
    background-color:#fff;
    background-image:url(img/bgLoginCheckout.png); 
    background-repeat: no-repeat;
    -webkit-transition: background-position 0.3s linear; 
     -moz-transition: background-position 0.3s linear; 
       -o-transition: background-position 0.3s linear; 
          transition: background-position 0.3s linear; 
    background-position: 2px 5px; 
    padding-left:34px; 
    cursor:pointer; 
    position:relative;
    width:190px;
    float:left;
    z-index:1000;
}
.loginTriggerText {min-height:27px;}
    h3 {margin:0; padding:0;}
    h5 {margin:0; padding:0; margin-top:-3px; font-weight:normal;}

.loginTrigger:hover {
    background-position:2px -85px;
    color:#08e;
}
.loginTriggerActive {
    background-position:2px -85px;
    color:#08e;
    cursor:text;
}
.loginTriggerClose {
    position:absolute;
    top:-8px;
    left: -16px;
    width:20px;
    height:20px;
    cursor:pointer;
    display:none;
    font-weight:bold;
    color:#000;
}
.loginForm {
    width:700px;
    float:left;
    margin-top: 8px;
    display: none; 
    position: absolute; 
    top: 0; 
    left: -300px;
    z-index:100;
}
label {margin-right:14px;}
</style> 
```

HTML

```
<div class="row">
    <div class="col12">
    <div class="loginRow">
      <div class="loginTrigger">
        <div class="loginTriggerText">
          <h3>Have an account?</h3>
          <h5>Login here for faster checkout.</h5>
        </div>
        <div class="loginTriggerClose">
          X
        </div>
      </div>
      <div class="loginForm">
        <label for="email">Email <input id="email" type="email" ></label> <label for="password">Password <input id="password" type="password"></label> <input type="submit" value="Login">
      </div>
    </div>
  </div>
</div> 
```

JS

```
<script src="http://code.jquery.com/jquery.min.js"></script>
<script>
$(function(){
    $('.loginTriggerClose').hide();
    var loginForm = $('.loginForm');

    $('.loginTrigger').click(function() {
        $(this).addClass('loginTriggerActive');
        $('.loginTriggerClose').delay(500).show();
        $(loginForm).show();
        $(loginForm).stop().animate({ "left": "260px" }, 800, function(){ 

        });

    });

    $('.loginTriggerClose').click(function() {
        $(this).fadeOut();
        //$('.loginTrigger').removeClass('loginTriggerActive');     
        $(loginForm).stop().animate({ "left": "-300px" }, 800, function() { 
            $(loginForm).hide(); 
        });
    });

});
</script> 
```

# design-patterns - 装饰器模式的优缺点是什么？

> ID：14526518
> 
> 赞同：5
> 
> 时间：2013-01-25T16:51:30.643
> 
> 标签：design-patterns, decorator

我正在阅读这篇文章：

[http://www.codeproject.com/Articles/479635/UnderstandingplusandplusImplementingplusDecoratorp](http://www.codeproject.com/Articles/479635/UnderstandingplusandplusImplementingplusDecoratorp)

我正在考虑在学校项目中实施这种模式。这不是一个要求，所以我可以半途而废。但是，我只是认为这将是扩展我的知识和专业知识的好机会。

学校的项目是这样的：创建一个披萨订购应用程序，员工可以在其中输入客户的订单。所以一个披萨，它可以有任意数量的配料。

上面的文章（以及*Head First：Design Patterns*书中的描述）似乎与我的应用程序完美匹配。

这是我的问题：这似乎不是一个好的模式，原因如下：

每当“披萨店”在他们的菜单上添加新的配料时......他们将不得不添加一个全新的类，并重新编译他们的订购系统并重新分配它们？

我认为问题可能在于我在谷歌上搜索的所有示例都必须处理食物和某种配料。

1.  我是否只是为这种模式找到了错误类型的示例？
2.  有哪些更好的例子可以实现这种模式？
3.  食品行业是其中之一吗，只是实施起来很糟糕？
4.  这是那些已经存在但在实际生产代码中几乎没有使用过的模式之一吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T16:58:38.037

实际上，装饰器允许您在不重新编译源代码的情况下添加一些行为。您可以在您的披萨域中声明`IPizza`接口，并在您的应用程序中使用此抽象。然后您可以添加另一个程序集，如果`IPizza`装饰器将具有其他实现，并使用依赖注入将这些实现注入您的应用程序。因此，您既不需要重新编译应用程序，也不需要重新编译域。

顺便说一句，添加新类比修改现有类更好。你总是可以打破在你修改之前工作的东西。这就是引入单一职责原则的原因。

另一个你的问题：

1.  不，您正在找到使用装饰器模式的好例子（尤其是 Head First 书中的一个）。还可以看看 IO Stream 类和它的装饰器以获得灵感。
2.  模式应该解决问题。如果你没有问题，那是针对哪个模式，而不是模式的错误使用。
3.  模式不拘泥于行业。他们坚持你的代码问题（通常是关于代码重复）
4.  不，这是很好的模式。再想想 .Net 中的 Streams。是生产代码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:56:37.940

通常在现实世界的应用程序中，您将处理更抽象的对象（即不是比萨饼和咖啡之类的东西 :)）

装饰器模式的一个真实示例是 Java`BufferedReader`类。例如，它为 a 添加了附加功能`FileReader`。

好处是您可以在运行时更改行为，并且您不会被许多不同的对象所束缚。

在您的示例中，如果我有四个对象：

```
Pizza
Tomatoes
Cheese
Mushrooms 
```

然后我可以用四种成分的任意组合制作披萨。否则我将不得不有大量的类来允许这种行为，例如`PizzaWithTomatoesAndCheese`，`PizzaWithTomatoesAndMushrooms`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-23T19:36:23.710

我能想到的关于装饰器模式的一个“缺点”是设计是僵化的。

当您装饰一个对象时，您通常不太了解该对象，因为您正在实现一个精简的通用接口。当您第一次实现该接口时，该接口可能适合您的算法，但更改可能会出现问题。

考虑[这个](https://dzone.com/articles/decorator-design-pattern-in-java)关于绘画程序的例子。我喜欢它，因为它说明了我在该模式中看到的两个问题。

装饰器之一是填充形状。如果您对形状唯一了解的是通用界面，您打算如何填充形状？至少如果它是一个只绘制矩形的程序，那么可以在保持相同的类设计的情况下完成一些不太难看的事情，但是绘制矩形似乎是一个人为的例子......

其次，画一个形状可以做多少事情？基本上只是不同类型的边框和不同类型的填充。也许阴影和文字。关键是，如果只有一种或两种可能的装饰，Decorator 可能是一个过度设计的解决方案。

我认为，一个更重要的问题是每个包装器加上对象都执行其操作（抽象装饰器类中目标方法的实现是`delegate.operation()`）。因此，当需求发生变化时会发生什么，我们不应该一个接一个地执行，而是一个应该取代其他的，或者包装器的行为应该取决于被包装对象的某些值。

正如您所说，我怀疑该模式几乎从未使用过，因为您需要稳定的需求，几种类型的装饰器来证明开销和真正的包装行为，其中被包装者的价值总是无关紧要的。

事实上，我能找到的唯一合理示例是 Java 核心库中的示例，例如 InputStream。

另一个荒谬的例子出现在你提到的 Head First 书中，他们用它来计算咖啡的价格，在那里他们创建了一连串的类来计算咖啡的价格（每个类专门用于添加一个新的总成本！）

对我来说，这表明很难在野外找到这种模式的合法用途。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-28T18:19:07.247

我同意使用装饰器模式仅出于一个原因：

*   代码更改管理方案中的 SRP。*请参阅《有效使用遗留代码》*第 72 页上的出色示例。当您希望在单元测试上下文中划分您的更改时（尤其是对于脆弱的遗留代码），Decorator 非常棒。它非常适合分离关注点，但就像所有这些变化一样，它是有代价的（见下文）。

我不同意使用装饰器模式有几个原因，在更一般的情况下：

*   它可能很慢，尤其是在对性能至关重要的代码部分中使用时。许多装饰器的重复嵌套会导致`JMP`生成的程序集中出现重复的 s，这可能会产生严重的性能影响。
*   当您必须读取/解析多重嵌套的装饰器并确定其执行顺序时，就像剥洋葱层一样两者的）。
*   This idea of "wow, you can assemble any set of permutations you like using decorators!" is solvable in other ways, such as favouring composition over inheritance, where we exhaustively compose `struct`s or classes in such a way that they can accommodate all possibilities of composition required for that class; e.g. a player character in a game may have a gun and / or a vehicle they are driving; so to know what these are, we provide fields for both (these may be either nested `struct`s or pointers / references to other `struct`s classes, allocated separately), whether used or not. This is common in entity-component systems for games.
*   A proliferation of classes is avoided, which may or may not be a good thing in your case.

归根结底，组合是非常专业的并且忽略了 SRP，但归根结底，大多数代码都是为专门目的而编写的，而不是为了无休止的重用。

归根结底，我很乐意在积极开发/原型设计功能期间使用装饰器，但我的目标是在功能集确定后将其切换为更具体的硬编码解决方案。

# c - 如何在C中获取屏幕高度和宽度

> ID：14526522
> 
> 赞同：2
> 
> 时间：2013-01-25T16:51:48.380
> 
> 标签：c, xorg, xserver

我得到以下代码。

```
typedef struct _display {
int fd;         /* Network socket. */
Window root;        /* Root window id. */
int vnumber;        /* X protocol version number. */
int dtype;      /* X server display device type. */
int dplanes;        /* Number of display bit planes. */
int dcells;     /* Number of display color map cells. */
_QEvent *head, *tail;   /* Input event queue. */
int qlen;       /* Length of input event queue */
int request;        /* Id of last request. */
char * lastdraw;    /* Last draw request. */
char *buffer;       /* Output buffer starting address. */
char *bufptr;       /* Output buffer index pointer. */
char *bufmax;       /* Output buffer maximum+1 address. */
int squish;     /* Squish MouseMoved events? */
Pixmap black, white;    /* Constant tile pixmaps */
char *displayname;  /* "host:display" string used on this connect*/
int width, height;  /* width and height of display */
} Display; 
```

但我不明白的是，X 在哪里获得了显示器的宽度和高度。有人会碰巧知道答案，或者能够指出我正确的方向吗？

谢谢，拱

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-21T17:59:50.310

为什么不获取根窗口的属性？

```
XWindowAttributes ra;
XGetWindowAttributes(dpy, DefaultRootWindow(dpy), &ra);
w = ra.width;
h = ra.height; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T17:11:04.737

获取屏幕尺寸

*   [linux](http://www.blitzbasic.com/Community/posts.php?topic=86911)
*   [视窗](http://msdn.microsoft.com/en-us/library/ms724385%28v=vs.85%29.aspx)

# error-handling - Xtext：通过无序组自定义错误消息

> ID：14526524
> 
> 赞同：1
> 
> 时间：2013-01-25T16:51:56.367
> 
> 标签：error-handling, message, xtext, unordered

我已经定义了一个无序组，它的工作方式与我预期的一样。我唯一想更改的是错误消息，它在无序组的元素尚未建模时出现。有没有简单的方法来解决这个问题？我已经尝试过自定义检查，但出现了意想不到的行为。

遵循我对无序组的规则和错误消息：

```
Element:
    (name=ConfigurationName) &
    (description=Description)? &
    (tool=Tool) &
    (model=Model) &
    (interfaces=Interfaces)? &
    (paramaters=Parameters)? &
    (paramfile=ParamFile)?
;

rule ruleElement failed predicate: {getUnorderedGroupHelper().canLeave(grammarAccess.getElementAccess().getUnorderedGroup())}? 
```

我想将此错误消息更改为：“配置中需要以下元素：....”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:23:07.473

Xtext 有一个名为 SyntaxErrorMessageProvider 的服务，用于改写解析器错误消息。您必须在解析器级别定义消息（因此不会使用 EMF 模型），但可以获取原始错误消息和上下文，遍历它并提供您自己的错误消息。

要注册它，请打开`«YourLanguage»RuntimeModule`类，并添加以下方法：

```
public Class<? extends ISyntaxErrorMessageProvider> bindISyntaxErrorMessageProvider() {
    return «YourLanguage»SyntaxErrorMessageProvider.class;
} 
```

where`«YourLanguage«SyntaxErrorMessageProvider`是您介绍的类，扩展类`SyntaxErrorMessageProvider`，您可以在其中实现自定义功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:29:45.700

我工作自动验证自定义，我创建公共类 MyDslLanguageSyntaxErrorMessageProvider 扩展 SyntaxErrorMessageProvider { }

我在 MyDslRuntimeModule 中注册它： public Class bindISyntaxErrorMessageProvider() { return MyDslLanguageSyntaxErrorMessageProvider.class;}

但我的问题是哪个包用于此自定义。我使用 org.xtext.example.mydsl.validation 包创建 java 类。我也使用 xtend 类进行此自定义。我在互联网上找不到足够的源:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T10:18:34.317

您可以使用 Java 编写此 Custom SyntaxErrorMessageProvider 类，但要绑定它，您可以在 Runtime Module 类中绑定。你也可以使用任何包来声明这个类，但是在你有 Runtime 类的同一个包中声明这个类是有意义的

# javascript - AngularJs 重新加载页面，而不是只加载视图

> ID：14526525
> 
> 赞同：1
> 
> 时间：2013-01-25T16:52:00.997
> 
> 标签：javascript, angularjs

我在 AgularJS 中有一个简单的应用程序。我需要在路线中加载视图

```
$routeProvider.when('/articles/:url', {
  templateUrl: 'partials/article.html',
  controller: ArticleCtrl
}); 
```

但是，如果我单击页面重新加载并在重新加载 Angular 后尝试加载 partials/article.html 视图，但因错误“ `NetworkError: 404 Not Found - http://localhost:3000/clanky/partials/article.html`“我知道我可以使用“../partials/article.html” insted“partials/article.html”而失败"，但我的意思是这不是问题的核心。

有我的路线：

```
blog.config([
  '$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
    $locationProvider.html5Mode(true);
    $routeProvider.when('/', {
      templateUrl: 'partials/main.html',
      controller: MainCtrl
    });
    $routeProvider.when('/login', {
      templateUrl: 'partials/login.html',
      controller: LoginCtrl
    });
    $routeProvider.when('/backend', {
      templateUrl: 'partials/backend.html',
      controller: BackendCtrl
    });
    $routeProvider.when('/articles/:url', {
      templateUrl: 'partials/article.html',
      controller: ArticleCtrl
    });
    return $routeProvider.otherwise({
      redirectTo: '/'
    });
  }
]); 
```

PS如果我尝试去任何其他路线，例如，登录，它部分工作，但重新加载仍然在这里。

谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T01:18:58.610

看来我遇到了和你一样的问题。

我不知道如何处理这个问题，但我认为那是因为页面被**重新加载**了。

当您未设置`html5Mode`to`true`时，将`#`在 url 处，如果您重新加载页面，`#`则将跟踪信息以`$scope`使用`htmlHistory`api，以便即使页面刷新，应用程序也可以正常工作。

但是一旦设置`html5Mode`为`true`，就没有`#`存储任何`$scope`信息，当页面重新加载时，angular 找不到相应的范围，所以它返回`404`。

您可以查看[angularjs guide 上的 $location 部分](http://docs.angularjs.org/guide/dev_guide.services.$location)，它有一个部分解释了为什么会发生这种情况。

> ### 页面重新加载导航
> 
> $location 服务只允许您更改 URL；它不允许您重新加载页面。当您需要更改 URL 并重新加载页面或导航到不同的页面时，请使用较低级别的 API，$window.location.href。

希望这对您有所帮助，如果您有更好的答案，请告诉我，我也在等待正确的方法来解决它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-12T08:52:05.923

以斜杠开头你的 templateUrl：

`templateUrl: '/partials/article.html'`

代替

`templateUrl: 'partials/article.html'`

# delphi - DCPCrypt 安装/使用 delphi 10

> ID：14526531
> 
> 赞同：2
> 
> 时间：2013-01-25T16:52:19.990
> 
> 标签：delphi, delphi-2010

我在 Delphi 2010 上安装了 DCPCrypt。我打开了 Delphi2009.dpk，编译它，然后使用 Component->Install Packages，然后按“添加”。我浏览了 DCPDelphi2009.bpl，组件在下次重新启动时显示。但是，当我尝试这个时：

```
function TForm1.EncryptThis(aString : string) : string;
var
   Cipher: TDCP_cast256;
   KeyStr: string;
 begin
   KeyStr:= 'AcceleratedKeyString';
   Cipher:= TDCP_cast256.Create(Self);
   Cipher.InitStr(KeyStr,TDCP_sha1);
   result := Cipher.EncryptString(aString);
   Cipher.Burn;
   Cipher.Free;
end; 
```

它输出以下错误：

> [DCC 致命错误] Unit1.pas(7)：F1026 找不到文件：“DCPCAST​​256.dcu”。

我想我可以通过将 DCU 文件复制到我的项目目录来解决这个问题，但我必须在每个项目中都这样做吗？

当我打开 .dpk 文件时，它不会提示我使用“安装”选项。如果这有帮助，当我转到“安装包”时，如果我按下编辑按钮，我会得到：无法编辑包“blablabla.bpl。找不到源。

而且，在任何软件包上，包括 Delphi 附带的软件包。这是一个内部应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:11:08.920

将包含 dcu 的文件夹添加到 Tools/Options/Delphi Options/Library 中的 Delphi 库路径。

如果您想访问 IDE 中的源代码，例如使用 Ctrl+单击，您可能还想将包含 pas 文件的文件夹添加到同一对话框中的浏览路径。

为避免混淆，您可能还希望在编译并将其安装到 IDE 之前将包重命名为 DCPDelphi2010.dpk。这样，您还将获得 DCPDelphi2010.bpl。

在 2010 IDE 中安装了一个名为 2009 的包，我看起来很奇怪。

# php - 如何在 Glue PHP 框架中使用 POST？

> ID：14526532
> 
> 赞同：0
> 
> 时间：2013-01-25T16:52:23.293
> 
> 标签：php, post, glue-framework

我想用 PHP 和[Glue 框架](http://gluephp.com)创建一个简单的登录系统。我的代码是这样的：

```
glue("route")->post("/login", function($params) {
    // I'm trying to catch the variable first
    echo $params['user'] .'aaand'. $params['pass'];
}); 
```

形式是：

```
<form action="/login" method="POST">
    <input type="text" name="user">
    <input type="password" name="pass">
</form> 
```

问题是，我怎样才能捕获这两个变量 -`user`然后`pass`将其插入 PHP Sessions ？

感谢您的回答和解释！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T18:43:16.287

## 带有（Captcha，CSRF）保护的示例登录/注销代码

我会跟你说实话，我和你一样喜欢小脚印。^_^

如果您想了解事物的工作原理并开始构建安全且简单的东西，那没关系。

测试任何来到这个世界的东西并试图打破它，直到你做出一些不可能被破解的东西。;)

首先：在您的 Web 服务器的根目录中创建一个文件夹并将其命名为“ **glue ”。**

在该文件夹中，使这些文件具有以下内容：

**.htaccess**

```
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>

RewriteEngine On

# Redirect Trailing Slashes...
RewriteRule ^(.*)/$ /$1 [L,R=301]

# Handle Front Controller...
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [L]
</IfModule> 
```

**胶水.php**

```
<?php
/**
* glue
*
* Provides an easy way to map URLs to classes. URLs can be literal
* strings or regular expressions.
*
* When the URLs are processed:
*      * delimiter (/) are automatically escaped: (\/)
*      * The beginning and end are anchored (^ $)
*      * An optional end slash is added (/?)
*       * The i option is added for case-insensitive searches
*
* Example:
*
* $urls = array(
*     '/' => 'index',
*     '/page/(\d+)' => 'page'
* );
*
* class page {
*      function GET($matches) {
*          echo "Your requested page " . $matches[1];
*      }
* }
*
* glue::stick($urls);
*
*/
class glue {
    /**
     * stick
     *
     * the main static function of the glue class.
     *
     * @param   array       $urls       The regex-based url to class mapping
     * @throws  Exception               Thrown if corresponding class is not found
     * @throws  Exception               Thrown if no match is found
     * @throws  BadMethodCallException  Thrown if a corresponding GET,POST is not found
     *
     */
    static function stick ($urls) {
        $method = strtoupper($_SERVER['REQUEST_METHOD']);
        $path = $_SERVER['REQUEST_URI'];
        $found = false;
        krsort($urls);
        foreach ($urls as $regex => $class) {
            $regex = str_replace('/', '\/', $regex);
            $regex = '^' . $regex . '\/?$';
            if (preg_match("/$regex/i", $path, $matches)) {
                $found = true;
                if (class_exists($class)) {
                    $obj = new $class;
                    if (method_exists($obj, $method)) {
                        $obj->$method($matches);
                    } else {
                        throw new BadMethodCallException("Method, $method, not supported.");
                    }
                } else {
                    throw new Exception("Class, $class, not found.");
                }
                break;
            }
        }
        if (!$found) {
            throw new Exception("URL, $path, not found.");
        }
    }
} 
```

**索引.php**

```
<?
/*
* This Login needs following things to make it secure:
* - HTTPS (Run login page on Encrypted Connection)
* - Protection against SQL-Injection
*/

session_start();

require_once("glue.php");

$urls = array(
    '/glue/' => 'index',
    '/glue/logout' => 'logout',
    '/glue/captcha' => 'captcha',
);

class index {

    function GET() {

        if(isset($_SESSION['is_logged'])){

            echo "<h1>Hello Again, {$_SESSION['name']}!</h1>";

            echo "<a href='/glue/logout'>Log Me Out!</a>";

        }else{

            $csrf = sha1(uniqid(time()));

            $_SESSION['csrf'] = $csrf;

            $form = " 
            <h1>Quick Login not Secure (needs HTTPS)</h1>
            <hr/>
            <form METHOD='POST'>
                <input type='hidden' name='csrf' value='$csrf'/>
                <label>User Name:</label><input type='text' name='username'/> <br/>
                <label>Password:</label><input type='password' name='pwd'/> <br/>
                <img src='/glue/captcha'/><br/>
                <label>Captcha:</label><input type='text' name='captcha'/> <br/>
                <input type='submit' name='Login' value='Login me in !'/>
            </form>
            ";

            echo $form;
        }
    }

    function POST(){

        if($_POST['username'] === 'test' && $_POST['pwd'] === 'test' && $_SESSION['captcha'] == $_POST['captcha'] && $_SESSION['csrf'] === $_POST['csrf']){

            echo "<h1>Salam {$_POST['username']}, You have logged Successfully...</h1>";

            echo "<a href='/glue'><h4>Goto Your page now</h4></a>";

            $_SESSION['is_logged'] = True;
            $_SESSION['name'] = $_POST['username'];

        }else{

            echo "<h1>Failed to login, <a href='/glue'>try again</a></h1>";
        }
    }
}

class logout{

    function GET(){

        session_destroy();

        header('location: /glue');
    }
}

/* it does generate captcha and save it to session on the fly */
class captcha{

    function generatePassword($length = 5) {

        $code = rand(1000, 9999);

        $possibleChars = "ABCDEFGHJKLMNPQRSTUVWXYZ" . $code;
        $password = '';

        for($i = 0; $i < $length; $i++) {
            $rand = rand(0, strlen($possibleChars) - 1);
            $password .= substr($possibleChars, $rand, 1);
        }

        return str_shuffle($password);
    }

    function GET(){

        $code = $this->generatePassword();

        $_SESSION["captcha"] = $code;
        $im = imagecreatetruecolor(260, 24);
        $bg = imagecolorallocate($im, 0, 0, 0); //background color blue
        $fg = imagecolorallocate($im, 255, 255, 255);//text color white
        imagefill($im, 0, 0, $bg);
        imagestring($im, 5, 100, 5,  $code, $fg);
        header("Cache-Control: no-cache, must-revalidate");
        header('Content-type: image/png');
        imagepng($im);
        imagedestroy($im);
    }
}

glue::stick($urls); 
```

制作完所有这些文件后，您可以通过以下 URL 访问您的微型框架：

```
http://localhost/glue

User Name: test

Password: test 
```

我希望这能激励你，**萨拉姆**

参考：[https ://github.com/jtopjian/gluephp](https://github.com/jtopjian/gluephp)

# c# - CopyToNative 在哪里定义？

> ID：14526533
> 
> 赞同：3
> 
> 时间：2013-01-25T16:52:31.767
> 
> 标签：c#, interop, native, il

我目前正在浏览反编译的 C# IL（使用 ILSpy），以了解其中一些方法`System.Runtime.InteropServices`是（可能）如何实现的。当我想查看`Marshal.Copy()`是如何实现的时候，发现它只调用了`CopyToNative()`，定义如下：

```
// System.Runtime.InteropServices.Marshal
[MethodImpl(MethodImplOptions.InternalCall)]
private static extern void CopyToNative(object source, int startIndex, IntPtr destination, int length); 
```

它在哪里实施？有没有机会查看它的（反编译的）源代码？如果没有，是否有人知道如何实施？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:55:20.077

`MethodImplAttribute`and`extern`关键字表示此函数是 .NET 运行时本身的内部函数。这个函数几乎肯定是在运行时的源代码中用 C 或 C++ 实现的。

如果不访问运行时的源代码，您唯一真正的选择是反汇编这个特定函数并检查程序集。（请注意，这样做可能会违反运行时的 EULA。）

* * *

您可能会考虑查看[Mono](http://mono-project.com)的源代码以了解一种可能的实现。

*   [`Marshal.Copy()`实现](https://github.com/mono/mono/blob/88dc6c2f5207d3d48d7a20fb6bda73fd51d9af2d/mcs/class/corlib/System.Runtime.InteropServices/Marshal.cs#L106)
*   [`copy_to_unmanaged()`运行时内部实现](https://github.com/mono/mono/blob/88dc6c2f5207d3d48d7a20fb6bda73fd51d9af2d/mono/metadata/marshal.c#L10922)

# gnu-make - 如何访问 Makefile.am 文件顶部定义的用户定义变量？

> ID：14526535
> 
> 赞同：3
> 
> 时间：2013-01-25T16:52:49.003
> 
> 标签：gnu-make, autotools, autoconf, automake

具体来说，我想按照以下思路做一些事情。对于定义应如何构建库文件的 Makefile.am 脚本，我希望能够在整个过程中访问通用库名称。例如，假设我希望将库的名称称为“名称”，我可以从以下变量开始：

```
LIBNAME = name 
```

然后我可能会有这样的事情：

```
lib_LTLIBRARIES = lib$(LIBNAME).la 
```

但是当我想做以下事情时，automake 开始抱怨：

```
lib$(LIBNAME)_la_SOURCES = file1.cpp file2.cpp
lib$(LIBNAME)_la_LIBADD = ... 
```

是否可以使用其他语法进行类似的操作，这样我就不必多次重复库的名称？

干杯，

本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:47:19.230

如果您在`configure`时间而不是在 Makefile 本身中定义变量，则可以这样做。

例如，在`configure.ac`：

```
LIBNAME=name
AC_SUBST(LIBNAME) 
```

然后你可以`Makefile.am`像这样访问它：

```
lib_LTLIBRARIES = lib@LIBNAME@.la 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:57:13.583

> 然后我可能会有这样的事情：

```
LIBNAME = 名称
lib_LTLIBRARIES = lib$(LIBNAME).la
lib$(LIBNAME)_la_SOURCES = file1.cpp file2.cpp
lib$(LIBNAME)_la_LIBADD = ...

```

IFAIK，这不适用于 automake。我也不认为可以使用其他语法来做到这一点。

# html - HTML5 跨域通信不起作用

> ID：14526542
> 
> 赞同：2
> 
> 时间：2013-01-25T16:53:03.577
> 
> 标签：html, cross-domain, postmessage

我打开 1.htm 作为**http://127.0.0.1/1.html**

1.html

```
<!DOCTYPE html>
<html>
<head>

    </head>
    <body>
       <iframe   id="ifr" src="http://localhost/2.html" width="100%" height="300">
       </iframe>       
        <script>  
            iframe=document.getElementById("ifr");
            iframe.contentWindow.postMessage("hello there", "http://localhost");
     </script>  
    </body> 
    </html> 
```

2.html

```
<!DOCTYPE html>
<html>
<head>
 <script>
    window.addEventListener("message", function(event) {

    alert(hi);
        if (event.data === "hello there" ) {
            alert("Hi" + event.origin);
        }
    }, false );
</script>

<head>
<body>
Hello world
</body> 
```

"

```
but I have that error: "Unable to post message to   http://localhost. Recipient has origin  http://127.0.0.1/ 
```

这是一个简单的例子。最后，我需要这样的结构：在域“A”上，我有 iframe，它的 src 是域“B”的页面。在 iframe 中，有按钮。当我单击显示在 iframe 中的那个按钮时，我需要调用域“A”的 window.addEventListener 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:21:48.640

[如此处](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)所述。您只有以下选项。

相同或不同域场景之间的通信：

```
 +-------------------------+-----------+-------------+-------------+
 |                         | home.html | framed.html | helper.html |
 +-------------------------+-----------+-------------+-------------+
 | www.foo.com/home.html   |    N/A    |     YES     |     YES     |
 | www.bar.net/framed.html |    NO     |     N/A     |     YES     |
 | www.foo.com/helper.html |    YES    |     YES     |     N/A     |
 +-------------------------+-----------+-------------+-------------+ 
```

这纯粹是针对 CSRF（跨站请求伪造）攻击的浏览器限制。查看您的方案，即使您在同一个域中工作。一种选择是遵循上面的层次结构示例，您可以在页面之间传递消息，甚至在相同或不同域中使用父站点上的帮助页面。然后孩子可以通过这个帮助页面接收和发送消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:15:27.523

检查您的主机文件 (C:\Windows\System32\drivers\etc) 确保您没有将 localhost 映射为其他任何内容。

请注意，通过 Javascript 从子框架访问父框架不会像这样工作，因为这会带来安全问题（跨站点脚本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:38:54.447

解决了：

```
<iframe id="frameId" src="http://b.net/2.html"  onload="sendCommand();">  No Frame!</iframe>

            <script  type="text/javascript"> 
                    function sendCommand() {
                    var receiver;
                    receiver = document.getElementById('frameId').contentWindow;
                    receiver.postMessage(receiver, 'http://b.net');
                    }
            </script> 
```

# subdomain - WP MU - 如果我更改子站点域，我不能使用默认以外的永久链接

> ID：14526545
> 
> 赞同：0
> 
> 时间：2013-01-25T16:53:10.610
> 
> 标签：subdomain, permalinks, wordpress

我有一个 WP MU 部署。我正在使用许多子站点，它们都具有相同的基域和不同的目录：

www.prueba.com/ar（阿根廷）

www.prueba.com/uy（乌拉圭）

www.prueba.com/cl（智利）

我想为巴西设置一个不同的子域：

www.prova.com（巴西）

由于巴西的语言是葡萄牙语和西班牙语“prueba”=葡萄牙语“prova”

它正在工作，唯一的问题是它不适用于名为帖子名称“http://www.prueba.com/ar/sample-post/”的永久链接配置（更友好）但仅适用于默认配置“http： //www.prova.com//?p=123"

我不知道如何使它与特殊的葡萄牙域和帖子名称永久链接一起使用。

有什么建议吗？

多谢你们，

桑德拉·维加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:19:13.827

你可以试试这个Wordpress 的[域映射插件](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)。我从未使用过它，但看起来可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T14:51:25.327

我不得不使用“ [http://www.prova.com/br](http://www.prova.com/br) ”然后它起作用了。不是最漂亮的解决方案，但可以接受

# sql - 将 6 个表加入单个查询？

> ID：14526549
> 
> 赞同：4
> 
> 时间：2013-01-25T16:53:27.287
> 
> 标签：sql, oracle, join, oracle11g

嘿，谁能帮我将下面的 5 个表加入到一个查询中？我目前有下面的查询，但似乎没有工作，好像在招聘表中有两个具有相同 ID 的产品所有产品都是从产品表返回的，这显然是错误的。

```
SELECT products.prod_id, products.title, products.price, product_types.name,  
listagg(suppliers.name, ',') WITHIN GROUP(ORDER BY suppliers.name) suppliers
FROM products 
INNER JOIN product_suppliers ON products.prod_id = product_suppluer.prod_id 
INNER JOIN product_types ON product_types.type_id = products.type_id 
INNER JOIN suppliers ON product_suppliers.supp_id = suppliers.supp_id 
LEFT OUTER JOIN hires ON hires.prod_id = products.prod_id 
    WHERE (hires.hire_end < to_date('21-JAN-13') OR hires.hire_start > to_date('26-JAN-13')) 
    OR hires.prod_id IS NULL 
GROUP BY products.prod_id, products.title, products.price, product_types.name 
```

表数据：

```
PRODUCTS                 
--------------------------------------------
| Prod_ID  | Title   | Price   | Type_ID   |
|------------------------------------------|
| 1        | A       | 5       | 1         |
| 2        | B       | 7       | 1         |
| 3        | C       | 3       | 2         |
| 4        | D       | 3       | 3         |
|------------------------------------------|

PRODUCT_TYPES                 
----------------------
| Type_ID  | Type    |
|--------------------|
| 1        | TYPE_A  |
| 2        | TYPE_B  |
| 3        | TYPE_C  |
| 4        | TYPE_D  |
|--------------------|

PRODUCT_SUPPLIERS                 
-------------------------
| Prod_ID  | Supp_ID    |
|-----------------------|
| 1        | 1          |
| 1        | 2          |
| 2        | 2          |
| 3        | 3          |
| 4        | 4          |
|-----------------------|

SUPPLIERS                 
----------------------
| Supp_ID  | Name    |
|--------------------|
| 1        | SUPP_A  |
| 2        | SUPP_B  |
| 3        | SUPP_C  |
| 4        | SUPP_D  |
|--------------------|

HIRES                
---------------------------------------------------------------
| Hire_ID  | Prod_ID    | Cust_ID    | Hire_Start | Hire_End  |
|-----------------------|------------|------------------------|
| 1        | 1          | 1          | 22-Jan-13  | 23-Jan-13 |
| 2        | 2          | 2          | 27-Jan-13  | 29-Jan-13 |
| 3        | 1          | 3          | 30-Jan-13  | 31-Jan-13 |
|-----------------------|------------|------------|-----------|

PRODUCTS                 
--------------------------------
| Cust_ID  | Name    | Phone   |
|------------------------------|
| 1        | Cust_A  | 555-666 |
| 2        | Cust_B  | 444-234 |
| 3        | Cust_C  | 319-234 |
| 4        | Cust_D  | 398-092 |
|------------------------------| 
```

目前查询的输出如下所示：

```
-------------------------------------------------------------
| Prod_ID  | Title   | Price   | Type_ID   | Suppliers      |
|------------------------------------------|----------------|
| 1        | A       | 5       | Type_A    | SUPP_A,SUPP_B |
| 2        | B       | 7       | Type_B    | SUPP_B         |
| 3        | C       | 3       | Type_C    | SUPP_C         |
| 4        | D       | 3       | Type_D    | SUPP_D         |
|------------------------------------------|----------------| 
```

什么时候肯定应该是这个样子？因为 Prod_ID '1' 在查询中的日期之间被租用

```
-------------------------------------------------------------
| Prod_ID  | Title   | Price   | Type_ID   | Suppliers      |
|------------------------------------------|----------------|
| 2        | B       | 7       | Type_B    | SUPP_B         |
| 3        | C       | 3       | Type_C    | SUPP_C         |
| 4        | D       | 3       | Type_D    | SUPP_D         |
|------------------------------------------|----------------| 
```

如果有人可以按照建议帮助修改查询以输出，我将不胜感激。因为我的理解是它应该像写的那样工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:11:39.260

您的问题是 Prod_Id 1 在这些日期范围之内和之外。因此，改为使用子查询来过滤掉哪些 Prod_Id 在这些范围内，并排除那些。

这是您的查询的一个非常简化的版本：

```
SELECT P.Prod_ID
FROM Products P 
 LEFT JOIN (
   SELECT Prod_ID 
   FROM Hires
   WHERE hire_end >= To_Date('20130121', 'yyyymmdd') AND hire_start <= To_Date('20130126', 'yyyymmdd')
   ) H ON P.Prod_ID = H.Prod_ID
WHERE h.prod_id IS NULL 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!4/462cd/2)。

假设我正确复制和粘贴，这应该是您的查询：

```
SELECT products.prod_id, products.title, products.price, product_types.name,  
listagg(suppliers.name, ',') WITHIN GROUP(ORDER BY suppliers.name) suppliers
FROM products 
INNER JOIN product_suppliers ON products.prod_id = product_suppluer.prod_id 
INNER JOIN product_types ON product_types.type_id = products.type_id 
INNER JOIN suppliers ON product_suppliers.supp_id = suppliers.supp_id 
LEFT JOIN (
   SELECT Prod_ID 
   FROM Hires
   WHERE hire_end >= To_Date('20130121', 'yyyymmdd') AND hire_start <= To_Date('20130126', 'yyyymmdd')
   ) H ON products.Prod_ID = H.Prod_ID
WHERE H.Prod_ID IS NULL
GROUP BY products.prod_id, products.title, products.price, product_types.name 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:03:38.903

当没有匹配时，您的左外连接将返回空值，这意味着当此连接查询的结果为 Null 时，您仍然有一行（没有 HIRE 表数据）：

```
LEFT OUTER JOIN hires ON hires.prod_id = products.prod_id 
WHERE (hires.hire_end < to_date('21-JAN-13') 
OR hires.hire_start > to_date('26-JAN-13')) 
OR hires.prod_id IS NULL 
```

尝试从招聘表中添加一个选择（例如`hire.Hire_Start`）以查看这种情况，然后将其切换到内部连接，我认为您的问题将得到解决。

或者在完整查询上添加一个 WHERE 子句，例如`hire.Hire_Start is not null`

**编辑**

如果您将原始查询更改为：

```
SELECT hires.Hire_Start, products.prod_id, products.title, products.price, product_types.name,  
listagg(suppliers.name, ',') WITHIN GROUP(ORDER BY suppliers.name) suppliers
FROM products 
INNER JOIN product_suppliers ON products.prod_id = product_suppluer.prod_id 
INNER JOIN product_types ON product_types.type_id = products.type_id 
INNER JOIN suppliers ON product_suppliers.supp_id = suppliers.supp_id 
LEFT OUTER JOIN hires ON hires.prod_id = products.prod_id 
    WHERE (hires.hire_end < to_date('21-JAN-13') OR hires.hire_start > to_date('26- JAN-13')) 
    OR hires.prod_id IS NULL 
GROUP BY products.prod_id, products.title, products.price, product_types.name 
```

Hire_Start 列中返回了什么？

然后，如果将其添加到 where 子句中，您会得到预期的结果：

```
SELECT hires.Hire_Start, products.prod_id, products.title, products.price, product_types.name,  
listagg(suppliers.name, ',') WITHIN GROUP(ORDER BY suppliers.name) suppliers
FROM products 
INNER JOIN product_suppliers ON products.prod_id = product_suppluer.prod_id 
INNER JOIN product_types ON product_types.type_id = products.type_id 
INNER JOIN suppliers ON product_suppliers.supp_id = suppliers.supp_id 
LEFT OUTER JOIN hires ON hires.prod_id = products.prod_id 
    WHERE (hires.hire_end < to_date('21-JAN-13') OR hires.hire_start > to_date('26- JAN-13')) 
    OR hires.prod_id IS NULL 
WHERE hires.Hire_Start is not null
GROUP BY products.prod_id, products.title, products.price, product_types.name 
```

最后，完全放弃外部连接，这是否按预期工作？

```
SELECT hires.Hire_Start, products.prod_id, products.title, products.price, product_types.name,  
listagg(suppliers.name, ',') WITHIN GROUP(ORDER BY suppliers.name) suppliers
FROM products 
INNER JOIN product_suppliers ON products.prod_id = product_suppluer.prod_id 
INNER JOIN product_types ON product_types.type_id = products.type_id 
INNER JOIN suppliers ON product_suppliers.supp_id = suppliers.supp_id 
INNER JOIN hires ON hires.prod_id = products.prod_id 
    WHERE (hires.hire_end < to_date('21-JAN-13') OR hires.hire_start > to_date('26- JAN-13'))
GROUP BY products.prod_id, products.title, products.price, product_types.name 
```

并注意：OR Hires.prod_ID 是否建议表明如果结果没有返回可用的雇用信息，在这种情况下，您需要编写查询更像提供的其他答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:11:41.177

**以下是一些可能对您有所帮助的代码：**

```
SELECT L.V_PRODUCT_ID  "PROD_ID"   , L.TITLE "TITLE" , L.PRICE "PRICE"  , L.TYPE "TYPE" , S.NAME "SUPPLIERS"
FROM 

(SELECT V_PRODUCT_ID   , TITLE , PRICE , TYPE , SUPPLIER_ID FROM 

((select p.prod_id  v_product_id , p.title  TITLE , p.price PRICE  , t.type  TYPE
from products p , products_types t 
where p.type_id = t_type_id)   A 

JOIN
 (SELECT PROD_ID  VV_PRODUCT_ID  ,  SUPP_ID  SUPPLIER_ID  
FROM  PRODUCTS_SUPPLIERS)  H 

ON (A.V_PRODUCT_ID  = H.VV_PRODUCT_ID)))   L
JOIN 
SUPLLIERS  S 
ON (L.SUPPLIER_ID = S.SUPP_ID); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-25T17:08:22.823

SELECT Emp.Empid, Emp.EmpFirstName, Emp.EmpLastName, Dept.DepartmentName FROM Employee Emp INNER JOIN Department dept ON Emp.Departmentid=Dept.Departmenttid

# python - 如何在 Python 3 中使用 mysql 连接器填充表

> ID：14526555
> 
> 赞同：0
> 
> 时间：2013-01-25T16:53:59.643
> 
> 标签：python, sql, python-3.x, datatable, mysql-connector

我在文本文件中有数据，需要将其上传到表格中。我在 python 3 中的脚本并使用 mysql.connector (https://launchpad.net/myconnpy) 连接到数据库并执行命令。我过去已经能够成功使用 mysql.connector 没有任何问题，但是在使用将文件上传到表的命令时我遇到了问题。我的代码如下：

```
def TableUpload(con2):   
cur = con2.cursor()##Connect to destination server with table
res_file = 'extend2'   
cur.execute("TRUNCATE TABLE data.results")## Clear table before writing
cur.execute("LOAD DATA LOCAL INFILE './extend2' INTO TABLE data.results FIELDS TERMINATED BY ','") 
```

该代码清除表格，然后尝试将数据从文本文件上传到表格。它成功清除了表格，但在填充表格时产生了以下错误：

```
Traceback (most recent call last):
File "cl3.py", line 575, in <module>
TableUpload(con2)
File "cl3.py", line 547, in TableUpload
cur.execute("LOAD DATA LOCAL INFILE './extend2' INTO TABLE kakrana_data.mir_page_results FIELDS TERMINATED BY ','")
File "/usr/local/lib/python3.2/site-packages/mysql/connector/cursor.py", line 333, in execute
res = self.db().protocol.cmd_query(stmt)
File "/usr/local/lib/python3.2/site-packages/mysql/connector/protocol.py", line 137, in deco
return func(*args, **kwargs)
File "/usr/local/lib/python3.2/site-packages/mysql/connector/protocol.py", line 495, in cmd_query
return self.handle_cmd_result(self.conn.recv())
File "/usr/local/lib/python3.2/site-packages/mysql/connector/connection.py", line 180, in recv_plain
errors.raise_error(buf)
File "/usr/local/lib/python3.2/site-packages/mysql/connector/errors.py", line 84, in raise_error
raise get_mysql_exception(errno,errmsg)
mysql.connector.errors.NotSupportedError: 1148: The used command is not allowed with this MySQL version 
```

当我使用命令直接从终端上传文件时，效果很好。只是该命令不适用于脚本。该错误表明该命令不允许使用 mysql 版本，尽管它可以从终端运行。请提出我犯了什么错误或替代方法来实现数据从本地文件上传到表。

# ios - 类方法返回不同的值

> ID：14526556
> 
> 赞同：1
> 
> 时间：2013-01-25T16:54:04.590
> 
> 标签：ios, objective-c, sql, core-data

我有这个返回不同值列表的实例方法。

```
-(void)test
{
  return [self valueForKeyPath:@"@distinctUnionOfObjects.values"];
} 
```

它适用于一个特定的对象，但我有很多对象。

我正在考虑一个返回类似的类方法

```
SELECT DISTINCT column_name(s) FROM table_name 
```

做这个的最好方式是什么？我怎么能用类方法做到这一点？

编辑：

现在可以了！谢谢，AKV！

@界面

```
+(NSArray *)fetchAll; // array with all managed objects.
+(NSSet *)myMethod; 
```

@执行

```
+(NSSet *)myMethod
{
    return [NSSet setWithArray:[[MyClass fetchAll] valueForKey:@"myField"]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:56:56.440

创建一个集合，并找到不同的值：

```
NSSet *distinctValues = [NSSet setWithArray:[myArrayOfCustomObjects valueForKey:@"yourKey"]]; 
```

# visual-studio - 为 MATLAB 编写 C DLL

> ID：14526557
> 
> 赞同：0
> 
> 时间：2013-01-25T16:54:04.693
> 
> 标签：visual-studio, matlab, dll

我正在尝试编写和编译一些 C 代码，我将使用 frm MATLAB 和 VS 2012

这是我的头文件：

```
#ifndef _DLLTEST_H_
#define _DLLTEST_H_

#include <iostream>
#include <stdio.h>
#include <windows.h>

extern "C" __declspec(dllexport) int Add(int a, int b);

#endif 
```

这是实现：

```
#include "stdafx.h"
#include "nureader.h"

extern "C" __declspec(dllexport) int Add(int a, int b)
{
  return (a + b);
} 
```

编译正常，但是当我尝试将 DLL 加载到 MATLAB 时，出现一个奇怪的错误：

```
>> [a,b] = loadlibrary('nureader.dll', 'nureader.h')
Error using loadlibrary (line 419)
Failed to preprocess the input file.
Output from preprocessor is:nureader.h
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\INCLUDE\eh.h(27) : fatal error C1189: #error :  "eh.h
is only for C++!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:17:35.973

看看VS的输出

```
fatal error C1189: #error : "eh.h is only for C++!" 
```

你想写一个 C 库，对吧？所以不要在其中包含 C++。或使用 G++ 编译，但由于您使用的是 Windows，我认为您没有该选项...

在任何情况下，找出包含“eh.h”的内容并尝试不使用它。如果它在没有它的情况下构建 - 很好，如果不是 - 你只需要隔离程序的 C 部分。通过查看代码，您似乎不需要任何东西

```
#include <stdio.h>
#include <windows.h> 
```

所以试试吧。

# java - JSF 看不到带注释的 Bean

> ID：14526560
> 
> 赞同：0
> 
> 时间：2013-01-25T16:54:09.303
> 
> 标签：java, jsf-2, annotations

我尝试制作简单的 JSF 示例并有几个文件管理器。我使用 Maven，并存储在 META-INF flolder faces-confid.xml 中。

在尝试执行时的输出中，我看到：

```
Welcome to JSF. 
```

但它必须是：

```
Welcome to JSF. test 
```

他们来了：

豆文件

```
import java.io.Serializable;
import javax.enterprise.context.RequestScoped;
import javax.inject.Named;

@Named("test")
@RequestScoped
public class TestBean implements Serializable{
    private String test = "test";

    public String getTest() {
        return test;
    }

    public void setTest(String test) {
        this.test = test;
    }    
} 
```

XHTML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>Welcome</title>
    </h:head>
    <h:body>
        <h3>Welcome to JSF. #{test.test}</h3>
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:18:48.327

在 Java EE / JSF Web 应用程序中，基本上有 2 个 API 可用于管理您的 bean。

那些，就像你最初的问题一样，

```
import javax.enterprise.context.RequestScoped;
import javax.inject.Named;

@Named("test")
@RequestScoped 
```

来自[CDI](https://stackoverflow.com/tags/cdi/info)（上下文和依赖注入），它是一种 Java EE 标准化管理 bean 的方式（旨在标准化/取代 Spring DI 和 AOP 等）。这仅适用于支持 Java EE Web 配置文件的容器，例如 Glassfish、JBoss AS 等，但不适用于准系统 servlet 容器，例如 Tomcat 和 Jetty（但是您[可以](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/environments.html#d0e4910)单独安装它；注意，Weld 是 CDI 的参考实现，例如因为 Mojarra 是 JSF 的参考实现）。

为了让 CDI 运行，你需要`/WEB-INF/beans.xml`在你的 webapp 中有一个物理文件。文件本身可以保持为空。您最初的问题表明您没有。当此文件不存在时，将不会为 webapp 初始化 CDI，从而加快服务器启动时间。

另一种方式，正如您在自己的答案中所想的那样，

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

@ManagedBean("test")
@RequestScoped 
```

来自[JSF](https://stackoverflow.com/tags/jsf/info)本身。如果您打算让您的 Web 应用程序在各种容器（包括准系统 JSP/Servlet 容器（如 Tomcat 和 Jetty）之间保持可移植性），这将特别有用。它们不需要任何额外的配置文件即可运行。

应该注意的是，这`eager=true`在请求范围的 bean 上是不必要的。更重要的是，无论如何它都会被忽略。它仅在应用程序范围的 bean 上被接受。另请参见[如何初始化 Java FacesServlet](https://stackoverflow.com/questions/13378221/how-can-i-initialize-a-java-facesservlet)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:57:10.207

通过使用其他注释修复

```
@ManagedBean(name = "test", eager = true)
@RequestScoped 
```

# android - Android 获取位置之间的距离 X 和 Y

> ID：14526564
> 
> 赞同：0
> 
> 时间：2013-01-25T16:54:39.877
> 
> 标签：android

我知道`location1.distanceTo(location2)`

我需要计算

```
distanceX 
```

和

```
distanceY 
```

从两个位置。有没有办法做到这一点？

**正确答案基于 njzk2 答案**

```
private Point getDistanceXY(Location location1, Location location2) {

    int angle = (int) location1.bearingTo(location2);

    Location interm  = new Location(location1);
    interm.setLongitude(location2.getLongitude());

    int distanceX = (int) location1.distanceTo(interm);
    int distanceY = (int) location2.distanceTo(interm);

    if (angle<=-90) distanceX=-distanceX;
    else if (angle>-90 && angle<0) {
        distanceX=-distanceX;
        distanceY=-distanceY;
    }

    Log.e("distXY "+name, distanceX+"  "+distanceY+" "+angle);

    return new Point(distanceX, distanceY);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:59:46.590

您可以做的是创建一个中间点：

```
Location interm = new Location(location1);
iterm.setLongitude(location2.getLongitude()); 
```

进而，

```
double distanceX = location1.distance(interm);
double distanceY = interm.distance(location2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:59:15.030

您可以结合使用[BearingTo()](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29)与[distanceTo()](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)和一点三角函数来计算 X 和 Y 分量。

```
double distY = distance * sin(angle);
double distX = distance * cos(angle); 
```

# jsf-2 - 从 primefaces 自动延迟加载数据表

> ID：14526566
> 
> 赞同：1
> 
> 时间：2013-01-25T16:54:44.557
> 
> 标签：jsf-2, primefaces, datatable, lazy-loading

是否有一些简单的方法或者可能是一个现成的组件来使用`dataTable`Primefaces 的延迟加载但没有分页（也不是标准的）？

我需要以下功能：加载页面时`dataTable`仅包含 100 行中的前 10 行（快速响应时间）。其余行会自动加载到 中，`dataTable`但用户已经可以使用第一部分数据。

感谢您的任何建议。在最坏的情况下，我将不得不自己实施类似的行为，但也许有人已经有一些经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:34:07.363

您正在寻找的功能与“实时滚动”非常接近。它确实在后台加载，但仅在滚动到达底部时才加载。请参阅[“DataTable - 滚动”](http://www.primefaces.org/showcase/ui/datatableScrolling.jsf)展示页面。

这是展示示例的相关性摘录，显示了您需要的属性：

```
<p:dataTable var="car" value="#{tableBean.carsLarge}" scrollRows="20"  
    scrollable="true" liveScroll="true" scrollHeight="150" id="dataTable4"> 
```

但是，要准确实现您的功能要求，您可能需要自制或向 PrimeFaces 人员发布新功能请求。

# sql - 在 SQL 中添加多行

> ID：14526567
> 
> 赞同：0
> 
> 时间：2013-01-25T16:54:45.633
> 
> 标签：sql, sqlite, insert

我被要求在一个表中添加 8 行。

```
insert into Rating ( rID, mID, stars, ratingDate ) 
values ('207', '101', '5', null), ('207', '102', '5', null),
       ('207', '103', '5', null), ('207', '104', '5', null),
       ('207', '105', '5', null), ('207', '106', '5', null),
       ('207', '107', '5', null), ('207', '108', '5', null) 
```

此操作适用于添加一个值，但添加多个时会出现错误

> *查询未能执行：靠近“，”：语法错误*

什么不见​​了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-28T04:30:31.220

**迟到的答案** 如果您使用的是 SQLITE [3.7.11](http://www.sqlite.org/releaselog/3_7_11.html)或更高版本，则可以通过这种语法插入多行，

**最简单的方法**

```
INSERT INTO Rating (rID, mID, stars, ratingDate) VALUES ('207', '102', '5', null) , ('207', '102', '5', null) , ('207', '102', '5', null) 
```

如果使用新的 SQLITE 版本，上面发布的有问题的子句确实有效。

**选择条款**

```
insert into Rating 
        SELECT '207' AS rID, '101' AS mID, '5' AS stars, null AS ratingDate   
  UNION SELECT '207', '102', '5', null
  UNION SELECT '207', '103', '5', null
  UNION SELECT '207', '104', '5', null
  UNION SELECT '207', '105', '5', null
  UNION SELECT '207', '106', '5', null            
  UNION SELECT '207', '107', '5', null
  UNION SELECT '207', '108', '5', null 
```

或 SQL 是

```
insert into Rating (rID, mID, stars, ratingDate)
        SELECT '207', '101', '5', null 
  UNION SELECT '207', '102', '5', null
  UNION SELECT '207', '103', '5', null
  UNION SELECT '207', '104', '5', null
  UNION SELECT '207', '105', '5', null
  UNION SELECT '207', '106', '5', null            
  UNION SELECT '207', '107', '5', null
  UNION SELECT '207', '108', '5', null 
```

**请记住**，我不想检查上述插入值集中的重复项，然后使用它来`UNION ALL`代替，`UNION`因为它会快一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:22:19.410

我在 sql lite 中创建了表。建表脚本如下

```
 create table Rating (rID varchar(10),mID varchar(10),stars varchar(10),ratingDate date); 
```

我使用以下查询插入到上表中，它对我来说工作正常。

```
insert into Rating ( rID, mID, stars, ratingDate ) 
values ('207', '101', '5', null), ('207', '102', '5', null),
       ('207', '103', '5', null), ('207', '104', '5', null),
       ('207', '105', '5', null), ('207', '106', '5', null),
       ('207', '107', '5', null), ('207', '108', '5', null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:59:49.127

我假设您的 RDBMS 不支持这种结构。

```
insert into Rating ( rID, mID, stars, ratingDate ) 
values ('207', '101', '5', null);
insert into Rating ( rID, mID, stars, ratingDate ) 
values ('207', '102', '5', null);
..... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T17:00:09.833

我建议：

```
insert into Rating ( rID, mID, stars, ratingDate ) values ('207', '101', '5', null);
insert into Rating ( rID, mID, stars, ratingDate ) values ('207', '102', '5', null);
...
insert into Rating ( rID, mID, stars, ratingDate ) values ('207', '108', '5', null); 
```

# c# - 我应该使用@html.renderpartial 还是@html.renderaction

> ID：14526569
> 
> 赞同：7
> 
> 时间：2013-01-25T16:54:48.083
> 
> 标签：c#, asp.net, asp.net-mvc, partial-views, renderaction

我正试着把我的菜单拿进来。

在我的 _Layout.cshtml 页面中，我有

```
<div class="wrapper">
                <!-- Navigation -->

                  @Html.RenderAction("Navigation", "Nav") 
```

导航控制器看起来像这样

```
public ActionResult Navigation()
{
    var pages = pageRepository.Pages;
    return View(pages);
} 
```

导航视图看起来像这样

```
@model IEnumerable<Site.Domain.Entities.Page>
@{
    Layout = null;
    List<Site.Domain.Entities.Page> pages = new List<Site.Domain.Entities.Page>();

    foreach(var page in Model)
    {
        pages.Add(page);
    }
}

@foreach (var link in Model)
{
    if (link.ParentPage == "Home")
    { 
    <li>@link.PageTitle</li>
    <ul>
        @foreach (var subLink in pages)
        {
            if (subLink.ParentPage == link.PageTitle)
            { 
            <li>@subLink.PageTitle</li>
            }
        }
    </ul> 

    }
} 
```

当我转到 .../nav/navigation 时，视图工作正常

我想要做的是把它带入我的 _Layout 页面，这样我就可以将它用作我的菜单。

我继续收到 @Html.RenderAction("Navigation", "Nav") 错误

错误说***“'System.Web.WebPages.WebPageExecutingBase.Write(System.Web.WebPages.HelperResult)'的最佳重载方法匹配有一些无效参数”***

我应该将其用作部分吗？解决此问题的最佳方法是什么？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T17:03:43.973

对于你想要做的，`@Html.RenderAction(..)`是正确的电话。`RenderAction`是`ChildActionExtension`并且将需要将该属性添加到控制器。

您的控制器应如下所示。**请注意**，您还需要返回**PartialView**。

```
[ChildActionOnly]
public ActionResult Navigation()
{
    var pages = pageRepository.Pages;
    return PartialView(pages);
} 
```

Render 操作不返回 HTML，而是将内容添加到响应中。这样，您的视图应如下所示：

```
@{@Html.RenderAction("Navigation", "Nav");} 
```

参考： http: [//msdn.microsoft.com/en-us/library/ee721274 (v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/ee721274(v=vs.108).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T17:06:07.403

因为 Html.RenderAction 是一个 void 并且不返回值，所以您需要用大括号“转义”调用

```
@{Html.RenderAction("Navigation", "Nav");} 
```

在您的控制器中，您应该返回一个局部视图。

```
public ActionResult Navigation()
{
    var pages = pageRepository.Pages;
    return PartialView(pages);
} 
```

# jsf - 使用登录过滤器时缺少 JSF 页面样式

> ID：14526574
> 
> 赞同：2
> 
> 时间：2013-01-25T16:54:56.913
> 
> 标签：jsf

我正在使用以下过滤器来控制对使用 GlassFish 作为应用程序服务器的 JSF 2.0 中所有页面的访问。问题是，使用此代码虽然过滤器工作正常，并且如果用户尝试直接访问任何其他页面，但 login.xhtml 看起来不太好（没有显示彩色图像并且页面形状发生变化），它应该被重定向到 log.xhtml是。但是，如果我删除 sendRedirect 语句并将其替换为 chain.doFilter 语句，则页面以相同的方式显示，因为它应该看起来不错，但是过滤显然不起作用。我该如何解决这个问题？

**LoggingFilter.java**

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {   
    HttpServletRequest req = (HttpServletRequest) request;
    LoginBean auth = (LoginBean) req.getSession().getAttribute("loginBean");

    if ((auth != null && auth.isLoggedIn()) || req.getRequestURI().endsWith("/login.xhtml")) {
        // User is logged in, so just continue request.
        HttpServletResponse httpResponse = (HttpServletResponse)response;
        httpResponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        httpResponse.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        httpResponse.setDateHeader("Expires", 0); // Proxies.
        chain.doFilter(request, response);
    } else {
        // User is not logged in, so redirect to index.
        HttpServletResponse res = (HttpServletResponse) response;
        res.sendRedirect(req.getContextPath() + "/faces/login.xhtml");
        //FacesContext.getCurrentInstance().getExternalContext().dispatch("/login.xhtml");
        //chain.doFilter(request, response);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T17:46:31.083

此过滤器还将 CSS/JS/图像文件上的所有请求重定向到登录页面。浏览器最终得到一个响应，其中包含一些代表登录页面的 HTML 代码，而不是它请求的具体 CSS/JS/图像内容，因此浏览器无法应用必要的外观。

假设您 100% 使用 JSF 资源管理（`<h:outputStylesheet>`等），因此它们都被`/javax.faces.resource/*`URI 覆盖，请按如下方式重写您的过滤器：

```
@Override
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws ServletException, IOException {    
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;
    HttpSession session = request.getSession(false);

    LoginBean auth = (session != null) ? session.getAttribute("loginBean") : null;
    String loginURL = request.getContextPath() + "/faces/login.xhtml";

    boolean loggedIn = auth != null && auth.isLoggedIn();
    boolean loginRequest = request.getRequestURI().equals(loginURL);
    boolean resourceRequest = request.getRequestURI().startsWith(request.getContextPath() + "/faces" + ResourceHandler.RESOURCE_IDENTIFIER);

    if (loggedIn || loginRequest || resourceRequest)) {
        if (!resourceRequest) {
            response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
            response.setDateHeader("Expires", 0); // Proxies.
        }

        chain.doFilter(request, response);
    } else {
        response.sendRedirect(loginURL);
    }
} 
```

请注意，不应在资源请求上设置无缓存标头，否则您会破坏浏览器缓存对 CSS/JS/图像文件的好处。

# google-app-engine - 当我是“第三人出局”时，如何通过 OAuth 2.0 对用户进行身份验证？

> ID：14526578
> 
> 赞同：0
> 
> 时间：2013-01-25T16:55:06.213
> 
> 标签：google-app-engine, oauth, cloud

我有一个我无法弄清楚的谜题。对我来说，这太令人费解了，以至于我制作了一个“请求帮助”视频，因为我相信在这种情况下，一张图片确实会“说一千个字”。

我已经完成了我的功课，但在任何地方都没有找到任何人描述这种情况。在这种情况下，我很可能是第一个提出“第三人出局”这个词的人。

如果有人对如何处理这个难题有任何建议，我很高兴收到您的来信。

视频长 4 分钟，我已尽力保持简洁。我寻求帮助的链接是[http://www.youtube.com/watch?v=tnepSmH_Qcg](http://www.youtube.com/watch?v=tnepSmH_Qcg)

关键字：Google App Engine、Google Cloud SQL、OAuth 2.0 Google Developers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:58:27.897

我认为当您是“第三人出局”时，以下内容为 OAuth 情况提供了必要的设计流程： [http ://www.gliffy.com/go/publish/4256785/](http://www.gliffy.com/go/publish/4256785/)

# math - ^ (XOR) 运算符有什么作用？

> ID：14526584
> 
> 赞同：84
> 
> 时间：2013-01-25T16:55:36.023
> 
> 标签：math, operators

XOR 执行什么数学运算？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-01-25T16:58:00.743

XOR 是一种二元运算，它代表“异或”，也就是说，如果仅设置了*一个*位，则结果位的计算结果为 1 。

这是它的功能表：

```
a | b | a ^ b
--|---|------
0 | 0 | 0
0 | 1 | 1
1 | 0 | 1
1 | 1 | 0 
```

此操作在数字的每两个对应位之间执行。

示例：`7 ^ 10`
二进制：`0111 ^ 1010`

```
 0111
^ 1010
======
  1101 = 13 
```

**性质：**运算是可交换的、结合的和自逆的。

它也与加法模 2 相同。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-01-25T16:56:52.343

`^` *是*[Python 按位异或运算](https://docs.python.org/3/reference/expressions.html#binary-bitwise-operations)符。这就是你`XOR`在 python 中的拼写方式：

```
>>> 0 ^ 0
0
>>> 0 ^ 1
1
>>> 1 ^ 0
1
>>> 1 ^ 1
0 
```

XOR 代表[异或](https://en.wikipedia.org/wiki/Exclusive_or)。它用于密码学，因为它可以让您在可逆操作中使用掩码“翻转”位：

```
>>> 10 ^ 5
15
>>> 15 ^ 5
10 
```

`5`面具在哪里；*（输入异或掩码）异或掩码*再次为您提供输入。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-02-09T06:51:26.840

关于异或运算的更多信息。

*   XOR 一个数字与自身奇数次的结果是数字本身。
*   与自身异或偶数次，结果为 0。
*   此外，与 0 的 XOR 始终是数字本身。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-06-16T21:31:19.770

其他答案在这里没有提到的一件事是**带有负数的 XOR** -

```
 a  |  b  | a ^ b
----|-----|------
 0  |  0  |  0
 0  |  1  |  1
 1  |  0  |  1
 1  |  1  |  0 
```

虽然您可以使用上面的函数表轻松理解 XOR 将如何工作，但它并没有说明它将如何处理负数。

* * *

# XOR 如何处理负数：

由于这个问题也被标记为 python，所以我会考虑到这一点来回答它。**XOR ( `^`) 是一个逻辑运算符**，当位不同时返回 1，其他位置返回 0 。

负数以二进制形式存储为二进制**[补码](http://en.wikipedia.org/wiki/Two%27s_complement)**。在 2 的补码中，最左边的位位置是为值的符号（正或负）保留的，对数字的值没有贡献。

> 在[Python](https://wiki.python.org/moin/BitwiseOperators)中，负数用前导一而不是前导零写入。因此，如果您仅将 8 位用于*二进制补码* ，那么您将模式 from视为 0`00000000`到`01111111`127 的整数，并保留`1xxxxxxx`用于写入负数。

考虑到这一点，让我们通过一个示例来了解 XOR 如何对负数起作用。让我们考虑表达式 - `( -5 ^ -3 )`。

*   的二进制表示`-5`可以被认为是`1000...101`和
*   的二进制表示`-3`可以被认为是`1000...011`。

这里，`...`表示全 0，其数量取决于用于表示的位数（32 位、64 位等）。**MSB** （最高有效位）处的`1`at表示二进制表示的数字为负数。XOR 操作将照常对所有位进行。

 **## 异或运算：

```
 -5   :  10000101          |
     ^                          | 
      -3   :  10000011          |  
    ===================         |
    Result :  00000110  =  6    |
________________________________|

     ∴ -5 ^ -3 = 6 
```

由于异或运算后MSB变为0，所以我们得到的结果数是一个正数。同样，对于所有负数，我们考虑使用*2 的补码*（最常用的一种）以二进制格式表示它们，并对它们的二进制表示进行简单的 XOR。

### 结果的**MSB 位将表示符号**，**其余位将表示** 最终结果的值。

下表可用于确定结果的符号。

```
 a   |   b   | a ^ b
------|-------|------
  +   |   +   |   +
  +   |   -   |   -
  -   |   +   |   -
  -   |   -   |   + 
```

XOR 的基本规则对于负 XOR 操作也保持不变，但是该操作如何在负数中真正起作用有一天可能对某人有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-06-17T18:57:45.140

另一个应用`XOR`是在电路中。它用于对位求和。

当您查看真值表时：

```
 x | y | x^y
---|---|-----
 0 | 0 |  0     // 0 plus 0 = 0 
 0 | 1 |  1     // 0 plus 1 = 1
 1 | 0 |  1     // 1 plus 0 = 1
 1 | 1 |  0     // 1 plus 1 = 0 ; binary math with 1 bit 
```

您可以注意到，结果`XOR`是 x 与 y 相加，没有跟踪进位位，进位位是从`AND`x 和 y 之间获得的。

```
x^y // is actually ~xy + ~yx
    // Which is the (negated x ANDed with y) OR ( negated y ANDed with x ). 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-15T14:24:54.213

(^) XOR 运算符在应用于两个不同的位（0 和 1）时生成 1。当它应用于两个相同的位（0 和 0 或 1 和 1）时，它会生成 0。**

# jquery - 造型 Highcharts

> ID：14526587
> 
> 赞同：1
> 
> 时间：2013-01-25T16:55:42.480
> 
> 标签：jquery, highcharts

我正在尝试设置 highcharts 样条图的样式，除了无法将样条修改为我想要的方式之外，我几乎拥有一切：

这就是我所拥有的：http: [//jsfiddle.net/6yzgD/](http://jsfiddle.net/6yzgD/)

```
 plotOptions: {
            series: {
                color: '#fff'
            }
        } 
```

...这就是我想要的（样条点是空心的）：

[http://bit.ly/10SV7ek](http://bit.ly/10SV7ek)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:11:45.063

在您的`series`选项下添加以下`marker`选项：

```
 series: [{
            name: 'Tokyo',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
            marker: {
                lineWidth: 2,
                fillColor: '#e49d65'
            }
        } 
```

更新[小提琴](http://jsfiddle.net/6yzgD/1/)。

这是一个屏幕截图：

![在此处输入图像描述](../Images/143e1ba305313bee8fb93ad86f97dfed.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:03:47.637

您可以通过重要的带有您想要的符号的图像来做到这一点

> 符号：字符串
> 
> 标记的预定义形状或符号。如果为 null，则从 options.symbols 中提取符号。其他可能的值是“circle”、“square”、“diamond”、“triangle”和“triangle-down”。此外，图形的 URL 可以用这种形式给出：“url(graphic.png)”。

[http://api.highcharts.com/highcharts#plotOptions.series.marker](http://api.highcharts.com/highcharts#plotOptions.series.marker)

因此，您可以以图像的形式保存圆圈，并将其作为标记类型传递。

# java - 制表符、换行符、DocumentFilters 和 Eclipse 文本

> ID：14526591
> 
> 赞同：0
> 
> 时间：2013-01-25T16:55:44.883
> 
> 标签：java, swing, jtextarea, documentfilter

[所以，我对这个](https://stackoverflow.com/questions/12179274/filtering-out-tab-character-with-documentfilter)问题还有一个额外的问题。

应用修复程序后，转到记事本，用一些随机字符输入一堆制表符和换行符，然后将它们粘贴到我的程序中，一切正常。

但是，作为带有一堆制表符和换行符的最接近的文本，我尝试将代码本身的一部分粘贴到 JTextArea。所有选项卡和换行符都卡在那里并且没有被过滤掉。

尽管我的用户可能不会将 eclipse 代码粘贴到我的程序中，但我不能确定 eclipse 代码是唯一的例外。所以我想知道为什么会这样。

另外，我希望我的代码过滤掉除空格字符之外的空白字符并将它们转换为空格字符。我认为 tab 和 newline 是唯一的，但如果还有更多，请告诉我。

无论如何，我必须改变什么才能让它工作？

这是固定的 SSCCE：

```
package core;

import java.awt.BorderLayout; import java.awt.Dimension; import java.io.FileNotFoundException; import java.io.IOException;

import javax.swing.JFrame; import javax.swing.JTextArea; import javax.swing.text.AbstractDocument; import javax.swing.text.AttributeSet; import javax.swing.text.BadLocationException; import javax.swing.text.DocumentFilter;

class DefaultDocFilter extends DocumentFilter {
    public void insertString(FilterBypass fb, int offs,String str, AttributeSet a) throws BadLocationException 
    {
        if ((fb.getDocument().getLength() + str.length()) <= 2000)
        {
            str = str.replaceAll("\n", " ");
            str = str.replaceAll("\t", " ");
            fb.insertString(offs, str, a);
        }
        else
        {
            int spaceLeft = 2000 - fb.getDocument().getLength();
            if (spaceLeft <= 0)
                return;

            str = str.substring(0, spaceLeft);
            str = str.replaceAll("\n", " ");
            str = str.replaceAll("\t", " ");

            fb.insertString(offs, str, a);
        }
    }

    public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a) throws BadLocationException 
    {
        if (str.equals("\n") || str.equals("\t"))
        { 
            str = "";
        }
        if ((fb.getDocument().getLength() + str.length() - length) <= 2000)
        {
            str = str.replaceAll("\n", " ");
            str = str.replaceAll("\t", " ");
            fb.replace(offs, length, str, a);
        }
        else
        {
            int spaceLeft = 2000 - fb.getDocument().getLength() + length;
            if (spaceLeft <= 0)
                return;

            fb.replace(offs, length, str.substring(0,spaceLeft).replaceAll("\n", " "), a);
        }
    } }

public class Main {
    public static JFrame mWindow;

    public static void main(String[] args) throws FileNotFoundException, IOException
    {   
        //create main window
        mWindow = new JFrame("title");
        mWindow.setSize(1000, 800);
        mWindow.setMinimumSize(new Dimension(1000, 800));
        mWindow.setLocationRelativeTo(null);
        mWindow.setLayout(new BorderLayout());
        mWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTextArea a = new JTextArea();
        AbstractDocument doc = (AbstractDocument) a.getDocument();
        doc.setDocumentFilter(new DefaultDocFilter());
        a.setLineWrap(true);
        a.setWrapStyleWord(true);

        mWindow.add(a);
        mWindow.pack();

        mWindow.setVisible(true);

        mWindow.repaint();
        mWindow.validate();
    } } 
```

它是 Java 1.7。新建项目，包core，文件Main.

文档过滤器是第一个类，它应用于您将看到的 JTextArea。您需要的一切都在该课程中。

编辑：我修复了 SSCCE。此外，仅当您尝试粘贴更多适合 JTextArea 的字符时才会出现问题（我将限制设置为 2000）。然后 tas 和换行符不会被过滤掉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:29:10.423

在`replace`方法中，在方法`else`部分，你只替换“\n”而不是“\t”

# servlets - 在 DB2 中实现类型 4 jdbc 驱动程序

> ID：14526592
> 
> 赞同：0
> 
> 时间：2013-01-25T16:55:45.227
> 
> 标签：servlets, jdbc, db2

在我的项目中，我在我设置的 context.xml 和 servlet.xml 中使用了一些配置

```
<ResourceLink 
     global="jdbc/mydatasource" 
     name="jdbc/mydatasource" 
     type="javax.sql.DataSource" />

<Resource 
     name="jdbc/mydatasource"
     auth="Container"
     type="javax.sql.DataSource"
     username=" DATABASE_USERNAME"
     password=" DATABASE_PASSWORD"
     driverClassName="com.ibm.db2.jcc.DB2Driver"
     url="jdbc:db2://IP:port/DBname" /> 
```

并通过包含它在我的servlet中使用它

```
 datasource = (DataSource) envContext.lookup("jdbc/mydatasource"); 
```

但我想知道什么类型的驱动程序（类型 2、4 等）。我已经在应用程序中导入了 db2jcc.jar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:20:52.533

谷歌搜索**DB2 类型 4 驱动程序**给了我这个 IBM 页面：[了解 DB2 UDB JDBC 通用驱动程序](http://www.ibm.com/developerworks/data/library/techarticle/dm-0512kokkat/)（从 2005 年开始）。阅读此内容可以清楚地表明这`db2jcc.jar`是通用驱动程序，它既是 Type 2 驱动程序，也是 Type 4 驱动程序。您使用的内容取决于您指定的 JDBC url：

对于类型 4：

*   jdbc:db2//服务器：端口/数据库
*   jdbc:db2//服务器/数据库

对于类型 2：

*   jdbc:db2:数据库

请注意——根据这个站点——你还需要`db2jcc_license_cu.jar`在你的类路径上让 Type 4 驱动程序工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:08:55.910

Java 有[`DatabaseMetaData`接口](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html)，它可能有你要找的信息。我不是 Java 人，但[`getDriverMajorVersion()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getDriverMajorVersion%28%29)可能会返回您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T01:15:02.883

URL实际上是不正确的：

对于类型 4：

*   jdbc:db2://server:port/database
*   jdbc:db2://server/database

缺少另一个冒号。

# facebook - Facebook登录身份验证问题

> ID：14526593
> 
> 赞同：0
> 
> 时间：2013-01-25T16:55:47.087
> 
> 标签：facebook, facebook-graph-api, redirect

我遵循了[服务器端应用程序登录](http://developers.facebook.com/docs/howtos/login/server-side-login/)的示例，但由于某种原因`$_REQUEST['code']`总是空白。所以我最终陷入了我已经同意的对话/oauth的无限循环重定向，因此是无限循环。有谁知道可能是什么问题？

如果我回`$_REQUEST`显出数组，我就可以在其中包含“signed_request”和“PHPSESSID”了。提前致谢。

```
$code = $_REQUEST['code'];
if (empty($code))
{
    // Create the CSRF protection
    $_SESSION['state'] = md5(uniqid(rand(), true));

    // Set the permissions to request for
    // additionally from the standard user information
    // refer to documentation on other permissions
    //$request_permissions = "email,user_birthday";

    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" . $options['appId'] . "&redirect_uri=" . $redirect_uri . "&state=" . $_SESSION['state'];
    echo "<script>top.location.href='" . $dialog_url . "'</script>";
} 
```

**编辑**：也只是一个注释：$code 填充在 url 中，只是不断刷新......我看到很多人抱怨这个，但那是一年多以前，因为我已经尝试了他们的所有步骤以及查看SDK 看看里面有什么可以帮助我，到目前为止似乎没有任何类似的事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:59:24.047

我注意到的第一件事：您生成的变量`$dialog_url`格式不正确。

尝试这个：

```
$dialog_url = 'https://www.facebook.com/dialog/oauth?client_id=' . $options['appId'] . '&redirect_uri=' . urlencode($redirect_uri) . '&state=' . $_SESSION['state'] . '&scope=' . $request_permissions; 
```

这也更像是[Facebook Login for Server-side Apps](https://developers.facebook.com/docs/howtos/login/server-side-login/)页面所说的......

# r - 在 R 中重塑数据，跳过某些测量变量

> ID：14526595
> 
> 赞同：0
> 
> 时间：2013-01-25T16:55:52.473
> 
> 标签：r, reshape, reshape2

我想重塑一个`data.frame`看起来像这样的：

```
 permno         dte ttm var1 var2 var3
1    123  2012-01-01  20    1   10  100
2    123  2012-01-01  30   -1   10  100
3    124  2012-01-01  20    2   20  200
4    124  2012-01-01  30   -2   20  200 
```

我想让我`data.frame`的样子如下：

```
 permno         dte var1_20 var1_30 var2 var3
1    123  2012-01-01       1      -1   10  100
2    124  2012-01-01       2      -2   20  200 
```

我一直在尝试使用`reshape2`package 来做到这一点，但我无法与`var1`其他人隔离开来并继续获得结果`var2_20`，`var2_30`例如结果。有谁知道如何使用`reshape2`包做到这一点？

数据帧输入：

```
> dput(DF)
structure(list(permno = c(123L, 123L, 124L, 124L), dte = structure(c(1L, 
1L, 1L, 1L), .Label = " 2012-01-01", class = "factor"), ttm = c(20L, 
30L, 20L, 30L), var1 = c(1L, -1L, 2L, -2L), var2 = c(10L, 10L, 
20L, 20L), var3 = c(100L, 100L, 200L, 200L)), .Names = c("permno", 
"dte", "ttm", "var1", "var2", "var3"), class = "data.frame", row.names = c(NA, 
-4L))
> dput(result)
structure(list(permno = 123:124, dte = structure(c(1L, 1L), .Label = " 2012-01-01", class = "factor"), 
    var1_20 = 1:2, var1_30 = c(-1L, -2L), var2 = c(10L, 20L), 
    var3 = c(100L, 200L)), .Names = c("permno", "dte", "var1_20", 
"var1_30", "var2", "var3"), class = "data.frame", row.names = c(NA, 
-2L)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:08:13.227

使用 、 和 的组合，`merge`如下所示：`reshape``unique`

```
unique(merge(DF[-c(3:4)], 
             reshape(DF[1:4], direction = "wide", 
                     idvar = c("permno", "dte"), 
                     timevar="ttm")))
#   permno         dte var2 var3 var1.20 var1.30
# 1    123  2012-01-01   10  100       1      -1
# 3    124  2012-01-01   20  200       2      -2 
```

基本上，您只重塑需要重塑的列，并在合并之前从原始数据集中删除这些列。您最终会得到重复的行，因此只需将所有这些都包装起来`unique`以获得（几乎）您想要的输出。如果需要，您可以重新排列列顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T17:08:49.780

我对这个答案感到相当聪明，但我强烈怀疑我对您的数据做了太多假设，特别是 var2 和 var3 的恒定性质：

```
ddply(dat,.(permno,dte,var2,var3),
      function(x) { dcast(x,permno + dte + var2 + var3 ~ ttm,value.var = 'var1') })
  permno         dte var2 var3 20 30
1    123  2012-01-01   10  100  1 -1
2    124  2012-01-01   20  200  2 -2 
```

# java - Android 4.0 及更高版本中的 RSS - AsyncTask

> ID：14526598
> 
> 赞同：0
> 
> 时间：2013-01-25T16:55:57.863
> 
> 标签：java, android, exception, rss, rss-reader

我最近一直在创建一个我正在开发的应用程序。该应用程序只是在 ListView 中显示 RSS 提要的内容，其中列表项是可点击的。它适用于 Android 3.0 及更低版本，但是一旦我将我的应用程序和设备升级到 4.0 及更高版本，它就失败了。我可以看到我需要使用自定义线程`NetworkOnMainThreadException`，因为我选择了 AsyncTask。我只是在我的 XML 中有一个列表视图，我`id android:id/list`用来加载提要的代码如下所示：

```
//Load RSS news feed
// Initializing instance variables
        headlines = new ArrayList();
        links = new ArrayList();

        try {
            URL url = new URL("http://www.vg.no/rss/create.php?categories=25,10,49,26,23,20,21,12,32,30,34&keywords=85,98,1724,84,476,821,820,512,8317,343&limit=15");

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

                // We will get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");

                /* We will parse the XML content looking for the "<title>" tag which appears inside the "<item>" tag.
                 * However, we should take in consideration that the rss feed name also is enclosed in a "<title>" tag.
                 * As we know, every feed begins with these lines: "<channel><title>Feed_Name</title>...."
                 * so we should skip the "<title>" tag which is a child of "<channel>" tag,
                 * and take in consideration only "<title>" tag which is a child of "<item>"
                 *
                 * In order to achieve this, we will make use of a boolean variable.
                 */
            boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem)
                            headlines.add(xpp.nextText()); //extract the headline
                    } else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem)
                            links.add(xpp.nextText()); //extract the link of article
                    }
                }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                    insideItem=false;
                }

                eventType = xpp.next(); //move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Binding data
        ArrayAdapter adapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, headlines);

        setListAdapter(adapter);
    } catch (RuntimeException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), "Cannot load news, please check internett connection", Toast.LENGTH_LONG).show();
    } 
```

我一直在努力理解它；但是，我无法让它工作。如果有人可以帮我把所有这些都放在 AsyncTask 中，并在 onCreate() 和 onClick() 上调用 RSS 刷新并解释如何，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:07:16.887

这是一个样板的内联 AsyncTask 方法

```
new AsyncTask<Void, Void, Void>({

//initialize headlines here or outside of here or before this Asynctask
    headlines = new ArrayList();
    links = new ArrayList();

@Override
protected Void doInBackground(Void... params)

 try {
        URL url = new URL("http://www.vg.no/rss/create.php?categories=25,10,49,26,23,20,21,12,32,30,34&keywords=85,98,1724,84,476,821,820,512,8317,343&limit=15");

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(false);
        XmlPullParser xpp = factory.newPullParser();

            // We will get the XML from an input stream
        xpp.setInput(getInputStream(url), "UTF_8");

            /* We will parse the XML content looking for the "<title>" tag which appears inside the "<item>" tag.
             * However, we should take in consideration that the rss feed name also is enclosed in a "<title>" tag.
             * As we know, every feed begins with these lines: "<channel><title>Feed_Name</title>...."
             * so we should skip the "<title>" tag which is a child of "<channel>" tag,
             * and take in consideration only "<title>" tag which is a child of "<item>"
             *
             * In order to achieve this, we will make use of a boolean variable.
             */
        boolean insideItem = false;

            // Returns the type of current event: START_TAG, END_TAG, etc..
        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG) {

                if (xpp.getName().equalsIgnoreCase("item")) {
                    insideItem = true;
                } else if (xpp.getName().equalsIgnoreCase("title")) {
                    if (insideItem)
                        headlines.add(xpp.nextText()); //extract the headline
                } else if (xpp.getName().equalsIgnoreCase("link")) {
                    if (insideItem)
                        links.add(xpp.nextText()); //extract the link of article
                }
            }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                insideItem=false;
            }

            eventType = xpp.next(); //move to next element
        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return null;
}

@Override
protected Void onPostExecute() //UI THREAD STUFF , onPostExecute may need an argument, not sure yet though
    ArrayAdapter adapter = new ArrayAdapter(this,
            android.R.layout.simple_list_item_1, headlines);

    setListAdapter(adapter);
}

}).execute(); 
```

祝你好运，你可以在里面放一个加载进度条`onPreExecute()`

# c++ - 如何从 Mac Crossover 中运行的 Windows 程序运行 AppleScript？

> ID：14526599
> 
> 赞同：0
> 
> 时间：2013-01-25T16:55:59.067
> 
> 标签：c++, windows, macos, applescript, .app

我正在开发一个用 C++ 设计的在 Windows 上运行的程序，但我们的一些运行 Mac 的客户正在使用该程序，通过安装它与交叉。它在大多数情况下都可以正常工作，但我们的电子邮件生成存在问题。我编写了代码来生成一个applescript，它将为mac 创建一封电子邮件，但我在执行它时遇到了问题。

我尝试过的事情：

1) 这个问题的答案：[如何从 C++ 程序执行一个简单的 Applescript？](https://stackoverflow.com/questions/9101450/how-can-i-execute-a-simple-applescript-from-a-c-program)系统命令似乎永远不会执行。

2）我使用applescript创建了一个.app，它在运行时会执行我的邮件生成applescript。我尝试使用 ShellExecute() 运行脚本和 .app，但它只会分别在 AppleScript 编辑器和 WINE 资源管理器中打开脚本或 .app。

我假设 Crossover 在其“瓶”中创建的 Windows 环境阻止我运行脚本或 .app。有没有办法解决这个问题并完成运行脚本或.app？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:09:23.913

我发现唯一可行的解​​决方案是创建运行 AppleScript 以生成邮件的帮助程序 .app，然后在 .app 内部的小程序上调用 ShellExecute() 而不是 .app 本身。

代码如下所示：

```
ShellExecute(NULL,"open","<PATH TO .APP>/Contents/MacOS/applet",NULL,NULL,0); 
```

# xml - 使用 local.xml 将 topSearch 移动到导航容器

> ID：14526604
> 
> 赞同：0
> 
> 时间：2013-01-25T16:56:06.057
> 
> 标签：xml, magento, layout

如何使用 local.xml 将 topSearch 块移动到“nav-container”div 内？

我做了什么：

1) 使用 unsetChild 方法从标题中删除：OK

2) 在 local.xml 的“默认”句柄中添加

```
 <reference name="top.menu"> 
        <block type="core/template" name="top.search" as="topSearch" template="catalogsearch/form.mini.phtml"/> 
    </reference> 
```

topSearch 直接出现在“nav-container”div 下。我试图包含在 topmenu.phtml

```
 <?php echo $this->getChildHtml('topSearch') ?> 
```

但什么也没发生:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T16:38:14.070

旧帖子，但我遇到了同样的问题。我发布了我的解决方案：[这里](http://www.magentocommerce.com/boards/v/viewthread/5171/#t449130)

希望这对你有用..

# intellij-idea - Find Usages 如何选择它搜索的模块？

> ID：14526606
> 
> 赞同：1
> 
> 时间：2013-01-25T16:56:06.727
> 
> 标签：intellij-idea

我的项目是从一个 maven 项目创建的，添加了额外的外部 maven 模块，因为我发现手头有其他源文件很有用。

接口 X 的源代码位于模块库中。如果我导航到源文件，突出显示 X.execute() 签名，然后调用 Find Usages（项目文件），获取模块库中的用法列表。

应用程序 Y 的源代码位于 module-app 中。如果我导航到源文件，找到调用 X.execute 的位置，突出显示该用法，然后调用 Find Usages（项目文件），我会得到一个列表，其中包括 module-app 中的用法以及 module 中的用法-图书馆。

这些不应该是一样的吗？它们不同的事实是否意味着我以某种方式搞砸了我的项目的创建/配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:05:15.960

它看起来像一个错误，我已经[在 YouTrack 中报告了它](http://youtrack.jetbrains.com/issue/IDEA-99841)。请登录跟踪器并提供更多详细信息（例如您的 IDEA 版本/内部版本号）。重现此问题的示例项目将有很大帮助。

您还可以检查`File`| `Invalidate caches`有帮助。

# android - 还有另一个“此版本的应用程序未配置为通过 Google Play 计费” - 但这次不同

> ID：14526608
> 
> 赞同：0
> 
> 时间：2013-01-25T16:56:09.357
> 
> 标签：android, in-app-billing

好的，我在我们的一个应用程序上显示“此版本的应用程序未配置为通过 Google Play 计费”。很抱歉再次问这个问题，但我阅读了超过 20 个关于此的答案，他们总是说我已经检查过的相同内容：

*   安装的 apk 使用正确的密钥签名
*   已安装应用的版本代码与 Google Play 上发布的版本相同
*   没有测试用户
*   许可证密钥设置正确
*   该应用程序已发布数周，因此不是延迟问题

我应该填写错误报告吗？我应该将应用内 API 更新到版本 3 吗？

* * *

更新：我取消发布了该应用程序，并再次发布，现在它正在工作。可能是新版 Play 的一些错误

# c - 在多个数组中执行多个搜索的最佳方法

> ID：14526619
> 
> 赞同：-2
> 
> 时间：2013-01-25T16:56:47.377
> 
> 标签：c, arrays

考虑下表，其中 (Destination, Route) 映射到`Node`.

```
Destination_id(a)   route_id(b)   next_node(c)
  4                   1             6
  7                   1             9
  7                   2             8
  8                   4             4
  7                   3             2 
```

例子：

```
Given input (Destination_id, route_id) : (7,3)
Expected output : 2

Given input (Destination_id, route_id) : (4,1)
Expected output : 2 
```

换句话说，表中的有效映射将是：

```
Input    Ouput
(4, 1) ->  6
(7, 1) ->  9
(7, 2) ->  8
(8, 4) ->  4
(7, 3) ->  2 
```

我编写的代码，我得到了完美的输出。有没有其他有效的方法来实现这个？

```
#include<stdio.h>

int main()
{
 int i,store;
 int a[5]={4,7,7,8,7};
 int b[5]={1,1,2,4,3};/// this will be always unique with respect to the search element of 'a' for eg.<7,1>, <7,2>
 int c[5]={6,9,8,4,2}; 
 int found_indices[5]; // array used to store indices of found entries..
 int count = 0; //n entries found;
 int ele_a, ele_b;
 printf("Enter the element to be search in array a\n");
 scanf("%d",&ele_a);
 printf("Enter the element to be search in array b\n");
 scanf("%d",&ele_b);
 // searching for the element
 for (i=0; i<5; i++)
 {    
     if (a[i]==ele_a)
     {
       found_indices[count ++] = i; // storing the index of found entry   

     }
  }
   if (count!=0) {
       for (i=0; i<count; i++)
       {
         if (b[found_indices[i]]==ele_b) 
         {
          store=found_indices[i];

         }
      }
   }
  printf("Element found %d ", c[store]);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:44:55.683

试试这个：

```
for (i = 0; i < 5; i++) {
    if (a[i] == ele_a && ele_b == b[i]) {
        printf("Element found %d ", c[i]);
        break;
    }
} 
```

如果映射表很大，那么哈希表就是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:48:37.627

您的程序可能会因其他一些输入而崩溃。因为`store`没有初始化为零。在这种情况下，考虑`if (b[found_indices[i]]==ele_b)`这种情况永远不会成功，那么最后在`printf`声明中 `c[store] 将导致崩溃。

在该语句本身内访问该`c`数组。`if`

```
int c_value = 0;
....

if (b[found_indices[i]]==ele_b) 
{
   c_value=c[found_indices[i]];
}
....

if (!c_value)printf("Element found %d ", c_value); 
```

注意：我希望您不要将其保留为数组`0`中的元素之一。`c`

# java - 到泽西岛的 HTTP-POST 上的双 HTTP-Status 标头

> ID：14526627
> 
> 赞同：0
> 
> 时间：2013-01-25T16:57:19.533
> 
> 标签：java, http, jersey, grizzly

我写了一个简单的 Grizzly/Jersey 应用程序，你可以在这里找到：

[https://github.com/boldt/stackoverflow-14526627](https://github.com/boldt/stackoverflow-14526627)

我想发布一些表单数据：

```
curl -X POST -F "name=test" -i http://localhost:9999/files 
```

我收到以下回复：

```
HTTP/1.1 100 Continue

HTTP/1.1 200 OK
Date: Fri, 25 Jan 2013 16:51:18 GMT
Transfer-Encoding: chunked 
```

如您所见，标题是双倍的，首先是 a ，`100 Continue`然后是 a `200 OK`。获取 . 是没有意义的`100 Continue`。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:45:58.353

这很正常。Curl 遵循 HTTP 1.1 规范。您正在执行 POST，这意味着您将向服务器发送数据。Curl 正在向服务器发送一个请求标头，其中包含“Expect：100-continue”。

这告诉服务器客户端想要发送 POST 文档的权限，如果服务器以 HTTP/1.1 100 Continue 响应，则客户端发送文档（在这种情况下是您的表单对），否则服务器可能会以任何原因拒绝它使用 HTTP /1.1 417 预期失败，这允许客户端在可能被拒绝时不会浪费时间发送大量数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:13:00.973

这两个标题没有任何问题。阅读 Expect 标头。 [http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)
检查您的请求标头。您可能正在使用 curl 发送 HTTP Expect。

```
curl -vv -X POST -F "name=test" -i http://localhost:9999/files 
```

# dojo - 带有提交错误值的单选按钮的 Dijit.tree 扩展

> ID：14526636
> 
> 赞同：3
> 
> 时间：2013-01-25T16:57:48.943
> 
> 标签：dojo, dijit.tree

我编写了一个扩展 dijit.Tree 的类，在每个节点旁边包含一个单选按钮。我在表单中使用它来显示一个文件夹树，用户可以从中选择一个文件夹。这是代码：

```
define("my/Tree/RadioButton",
    ['dojo/_base/declare', 'dijit/Tree', 'dijit/form/RadioButton', 'dojo/dom-construct', 'dojo/_base/connect', 'dojo/on', 'dojo/_base/lang'],
    function (declare, Tree, RadioButton, domConstruct, connect, on, lang){

    var TreeNode = declare(Tree._TreeNode, {
        _radiobutton: null,

        postCreate: function(){
            this._createRadioButton();

            this.inherited(arguments);
        },

        _createRadioButton: function(){
            this._radiobutton = new RadioButton({
                name: this.tree.name,
                value: this.tree.model.store.getIdentity(this.item) + '',
                checked: false
            });
            domConstruct.place(this._radiobutton.domNode, this.iconNode, 'before');

            if (this.tree.model.store.hasAttribute(this.item, 'checked')) {
                var attrValue = this.tree.model.store.getValue(this.item, 'checked');
                if (attrValue === true) {
                    this._radiobutton.set('checked', true);
                }
            }

            connect.connect(this._radiobutton, 'onClick', this, function(){
                // set any checked items as unchecked in the store
                this.tree.model.store.fetch({
                    query: {checked: true},
                    onItem: lang.hitch(this.tree.model.store, function(item){
                        console.log('found checked item ' + this.getValue(item, 'name'));
                        this.setValue(item, 'checked', false);
                    })
                });

                // check the one that was clicked on
                var radioValue = this._radiobutton.get('value');
                this.tree.model.store.setValue(this.item, 'checked', true);
            });
        }
    });

    return declare(Tree, {
        _createTreeNode: function(/*Object*/ args){
            return new TreeNode(args);
        }
    });
}); 
```

问题在于，提交表单时，提交的值始终是被选中的第一个单选按钮的值，即使随后单击了其他单选按钮。

我可以通过检查 dom 看到选中的单选按钮的 value 属性具有正确的值。但提交的始终是最初选择的值。

我有一个类似的类，它使用复选框小部件，并且工作正常。

**根据一些反馈进行编辑**，我创建了一个更简单的此类版本，它不使用商店中的属性跟踪检查状态：

```
define("my/Tree/RadioButton",
    ['dojo/_base/declare', 'dijit/Tree', 'dijit/form/RadioButton', 'dojo/dom-construct'],
    function (declare, Tree, RadioButton, domConstruct){

    var TreeNode = declare(Tree._TreeNode, {
        _radiobutton: null,

        postCreate: function(){
            this._createRadioButton();

            this.inherited(arguments);
        },

        _createRadioButton: function(){
            this._radiobutton = new RadioButton({
                name: this.tree.name,
                value: this.tree.model.store.getIdentity(this.item) + '',
                checked: false
            });
            domConstruct.place(this._radiobutton.domNode, this.iconNode, 'before');
        }
    });

    return declare(Tree, {
        _createTreeNode: function(/*Object*/ args){
            return new TreeNode(args);
        }
    });
}); 
```

但即使这样仍然存在同样的问题——用户首先点击的单选按钮就是将提交的值，而不管随后点击了哪些其他按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:41:36.373

我通过连接单选按钮的 onchange 事件设法解决了这个问题。该钩子在未选中的单选按钮上明确将选中的设置为 false，这似乎可以解决问题。我不确定为什么这是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:49:08.787

我有这个完全相同的问题。它曾经在较旧的道场中工作。具体来说，所有单选按钮在函数`"dijit.byId("whatever").checked"`期间都错误地返回 true。`onClicked`在`onClicked`函数完成使用 FireBug 控制台后手动检查时，上述属性返回正确的值。我认为这是一个错误，我只是通过`onClicked`为每个按钮设置不同的功能来解决它​​，如下所示：

```
<form id="locateForm">
<label for="locate">Locate:</label><br />
<input type="radio" dojoType="dijit.form.RadioButton" name="locate" id="locateAddress" value="Address" checked="checked" onClick="enableLocate1();" />
<label for="locateAddress">Address</label>
<input type="radio" dojoType="dijit.form.RadioButton" name="locate" id="locatePlace" value="Place" onClick="enableLocate2();" />
<label for="locatePlace">Place</label>
</form> 
```

# android - android中的布局和图像显示

> ID：14526638
> 
> 赞同：0
> 
> 时间：2013-01-25T16:57:58.420
> 
> 标签：android, image, layout, resources

我正在编写高度基于图像的应用程序，并且在为许多不同的设备设计 GUI 时必须小心。

我已经开始专门阅读不同的资源[http://developer.android.com](http://developer.android.com)。我想讨论一些我不清楚的点。

1.  支持不同的屏幕  

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

Android表示对不同的屏幕尺寸使用不同的布局

例如

我的项目/

     资源/

         布局/main.xml

         布局土地/main.xml

         布局大/main.xml

         layout-large-land/main.xml 我的问题是我的布局是否有 2 个编辑框 1 个复选框和 2 个按钮，

为什么我要在大地、大地和大地（地中或更多）布局中使用 xml 文件的 3 个副本。

1.  创建不同的位图  

我的第二个问题是关于更重要的图像，

我应该使用哪种图像尺寸，

我的项目/

    资源/

        drawable-xhdpi/awesomeimage.png

        drawable-hdpi/awesomeimage.png

        drawable-mdpi/awesomeimage.png

        drawable-ldpi/awesomeimage.png  

在 ldpi 文件夹中，我放了 150*150 像素的图片，当我在 3.7 屏幕尺寸上运行时，这张图片质量真的很差，并且在 150*150 尺寸的图像视图中模糊。但是如果我将 700*700 像素放在同一个文件夹中，那么图像视图会以 150*150 大小显示清晰的结果。

为什么不将 700*700 的图片放在一个文件夹中并以不同的图像视图显示，这就是为什么我可以将一个资源用于多种用途。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:26:08.830

您应该能够定义您想要的任何大小的位图并将它们放在您的`res/drawable`文件夹中。您的布局可以引用该单个图像。如果将其添加到 ImageView，请使用图像视图属性来控制图像如何缩放以适应图像视图。

例如创建这样的文件夹和文件：

```
res/drawable
    image_700x700.png
res/layout
    layout.xml 
```

如果您想使用 drawable-xdpi、drawable-hdpi 等，您可以随意使用。这些文件夹用于为不同的屏幕像素密度提供不同尺寸的图像。例如，查看 android 为新的 android 项目生成的应用程序图标。您会发现每个文件夹都有不同大小的相似图像。如果您只有一张 700x700 的图像，那么您只需将该图像放在名为“drawable”的文件夹中。如果您愿意，您可以生成几个不同大小的不同图像，并将在不同的屏幕密度上显示。如果您这样做，您希望制作所有图像，但 DP 数量相同。

# java - 任何字母、数字和“普通”字符的正则表达式

> ID：14526649
> 
> 赞同：2
> 
> 时间：2013-01-25T16:58:23.263
> 
> 标签：java, android, regex

我将字节接收到一个方法中，我想通过串行发送它们，但我只想发送有效字节，（即 a-zA-Z0-9"！£$%^&*()-_=+），东西像那样，空格，换行符等。我只想过滤掉任何字符，例如带有重音符号或�的字符，以任意顺序和任意次数。

这样的事情会包括所有角色的`|`工作吗？

```
^[a-z|A-Z|0-9|\\s|-<other characters>]* 
```

或者，正确的表达方式是什么？

因此，如果一个字符串包含“exit����”，我只想发送“exit”，绝不发送无效字符，而是发送其他所有字符。

```
public void write(byte[] bytes, int offset, int count) {
  String str;
  try {
    str = new String(bytes, "ASCII");
    Log.d(TAG, "data received in write: " +str );
    //^[a-z|A-Z|0-9|\s|-]*
    //test here, call next line on any character that is valid
    GraphicsTerminalActivity.sendOverSerial(str.getBytes("ASCII"));
  } catch (UnsupportedEncodingException e) {
    Log.d(TAG, "exception" );
    e.printStackTrace();
  }
  // appendToEmulator(bytes, 0, bytes.length);
} 
```

编辑：我试过 [^\x00-\x7F] 这是 ascii 字符的范围....但是符号仍然通过，很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:07:57.243

尝试使用像`[\x20-\x7E]`这些是[可打印字符](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)的 ASCII 代码这样的模式。

顺便说一句，我假设您在询问 ASCII，因为这是您解析问题的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:39:51.327

管道**不是**将字符列表转换为正则表达式的正确方法。将字符放在带有方括号的字符类中。默认情况下，字符类中的所有字符都是 ORed，因此不需要管道。需要转义不是数字和字母的符号。

```
[a-zA-Z0-9\"\!\£\$\%\^\&\*\(\)\-\_\=\+] 
```

然后，如果您想将其放入 Java 字符串中，则需要对转义符进行双重转义

```
Pattern p = Pattern.compile("[a-zA-Z0-9\\"\\!\\£\\$\\%\\^\\&\\*\\(\\)\\-\\_\\=\\+]"); 
```

请记住，英镑符号 (£)**不是**ASCII 字符，因此将其转换为 ASCII 是行不通的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T17:11:22.600

你想做一个搜索替换：

```
String fixed = input.replaceAll("[^\p{Print}\t\n]", ""); 
```

罗尔夫

编辑：添加参考：

[Pattern Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html) -> 向下滚动到 POSIX Character Classes (US-ASCII ONLY)

上面的模式匹配所有*不是*可打印字符的字符......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T17:29:00.033

如果您还没有，您可能想要查看 Java 的[Normalizer类。](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)它将允许您从其重音等效项中提取“正常”字符，作为丢弃整个字符的替代方法。

我不记得这个想法的确切来源（我最近试图进行与口音无关的搜索），但快速搜索发现了[这篇简单的博客文章](http://blog.smartkey.co.uk/2009/10/how-to-strip-accents-from-strings-using-java-6/)，它可能会提供更多关于如何使用它的见解。

# vb.net - VB.NET with Word - 如何在查找后修改段落缩进

> ID：14526651
> 
> 赞同：2
> 
> 时间：2013-01-25T16:58:32.433
> 
> 标签：vb.net, formatting, ms-word, replace, indentation

我将 VB.NET (VS2012) 和 Word (2013) 与 Word 14 互操作一起使用。注意：我没有在 Word 中使用 VBA，也不能将其用作解决方案。

我正在尝试在文档中对键值对的所有实例进行搜索和替换，并且可以使用`Word.Document.Find.Execute()`命令轻松完成此操作。

但是，我还需要调整`LeftIndent`单词所在段落的 ，因为替换文本（例如“XXXXXXXXXX”）大于它正在替换的文本（例如“XXXXX”）并且区域不大足够的。

所以我一直在尝试以下，但段落缩进并没有改变。注意：`dicWords`只是一个带有我的查找/替换单词的字典。

```
Imports Microsoft.Office.Interop.Word

' Open Word document
Dim WordApp As New Application
Dim WordDoc As Document = WordApp.Documents.Open(WordFile.FullName, False, True, False)

' Loop through the dictionary of parts and find/replace
Dim pair As KeyValuePair(Of String, String)
For Each pair In dicWords

    ' Replace text
    Dim bFound As Boolean = False
    Do
        ' Do Search
        bFound = WordDoc.Content.Find.Execute(FindText:=pair.Key, ReplaceWith:=pair.Value, Replace:=WdReplace.wdReplaceOne, Wrap:=WdFindWrap.wdFindContinue)
        If bFound = True Then
            ' The range should be set from above Find, so now set the LeftIndent
            WordDoc.Content.ParagraphFormat.LeftIndent = 5
        End If

    Loop While bFound = True

Next 
```

但是，上述方法不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:38:07.937

尝试：

```
WordDoc.Selection.Range.ParagraphFormat.LeftIndent = 5 
```

# python - 动态添加可调用类作为实例“方法”

> ID：14526652
> 
> 赞同：7
> 
> 时间：2013-01-25T16:58:35.360
> 
> 标签：python, class, methods, callable

我实现了一个元类，它拆除了用它创建的类的类属性，并从这些参数的数据中构建方法，然后将这些动态创建的方法直接附加到类对象（有问题的类允许轻松定义 Web 表单对象在 Web 测试框架中使用）。它一直工作得很好，但现在我需要添加一种更复杂的方法，为了保持干净，我将其实现为可调用类。不幸的是，当我尝试在实例上调用可调用类时，它被视为类属性而不是实例方法，并且在调用时只接收它自己的`self`. 我明白为什么会发生这种情况，但我希望有人可能有比我想出的更好的解决方案。问题的简化说明：

```
class Foo(object):
    def __init__(self, name, val):
        self.name = name
        self.val = val
        self.__name__ = name + '_foo'
        self.name = name
    # This doesn't work as I'd wish
    def __call__(self, instance):
        return self.name + str(self.val + instance.val)

def get_methods(name, foo_val):
    foo = Foo(name, foo_val)
    def bar(self):
        return name + str(self.val + 2)
    bar.__name__ = name + '_bar'
    return foo, bar

class Baz(object):
    def __init__(self, val):
        self.val = val

for method in get_methods('biff', 1):
    setattr(Baz, method.__name__, method)
baz = Baz(10)
# baz.val == 10
# baz.biff_foo() == 'biff11'
# baz.biff_bar() == 'biff12' 
```

我想过：

1.  使用描述符，但这似乎比这里需要的要复杂得多
2.  在工厂内部使用闭包`foo`，但嵌套闭包在大多数情况下是对象的丑陋和凌乱的替代品，imo
3.  将实例包装`Foo`在一个方法中，将其传递`self`给`Foo`实例`instance`，基本上是一个装饰器，这就是我实际添加的`Baz`，但这似乎是多余的，基本上只是一种更复杂的方式来做与 (2) 相同的事情

有没有比这些更好的方法来尝试完成我想要的，还是我应该硬着头皮使用一些闭包工厂类型模式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T17:45:04.503

一种方法是将可调用对象作为未绑定方法附加到类。方法构造函数*将*与任意可调用对象（即具有`__call__()`方法的类的实例）一起工作——而不仅仅是函数。

```
from types import MethodType

class Foo(object):
    def __init__(self, name, val):
        self.name = name
        self.val = val
        self.__name__ = name + '_foo'
        self.name = name
    def __call__(self, instance):
        return self.name + str(self.val + instance.val)

class Baz(object):
    def __init__(self, val):
        self.val = val

Baz.biff = MethodType(Foo("biff", 42), None, Baz)

b = Baz(13)
print b.biff()
>>> biff55 
```

在 Python 3 中，没有未绑定的实例方法（类只是附加了常规函数）这样的东西，因此您可以改为让您的`Foo`类成为一个描述符，通过给它一个方法来返回一个绑定的实例`__get__()`方法。（实际上，这种方法也适用于 Python 2.x，但上面的方法会更好一些。）

```
from types import MethodType

class Foo(object):
    def __init__(self, name, val):
        self.name = name
        self.val = val
        self.__name__ = name + '_foo'
        self.name = name
    def __call__(self, instance):
        return self.name + str(self.val + instance.val)
    def __get__(self, instance, owner):
        return MethodType(self, instance) if instance else self
        # Python 2: MethodType(self, instance, owner)

class Baz(object):
    def __init__(self, val):
        self.val = val

Baz.biff = Foo("biff", 42)

b = Baz(13)
print b.biff()
>>> biff55 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:49:43.947

您遇到的问题是您的对象没有被绑定为您要放入的 Baz 类的方法。这是因为它不是描述符，[常规函数是](http://docs.python.org/3.3/howto/descriptor.html#functions-and-methods)！

您可以通过向您的类添加一个简单的`__get__`方法来解决此问题，`Foo`该方法在作为描述符访问时使其成为方法：

```
import types

class Foo(object):
    # your other stuff here

    def __get__(self, obj, objtype=None):
        if obj is None:
            return self # unbound
        else:
            return types.MethodType(self, obj) # bound to obj 
```

# java - 将持久化实体更改为兄弟子类

> ID：14526654
> 
> 赞同：1
> 
> 时间：2013-01-25T16:58:37.087
> 
> 标签：java, hibernate, jpa

现在我们有一个`JPA entity`定义为：

```
@Entity
@Table(name="Foo")
public class Foo extends ParentClass {
...
} 
```

想象一些`Foo`对象已经被持久化在数据库中。以编程方式将这些持久记录更改为 type 的兄弟子类的最佳方法是`Bar`什么？

```
@Entity
@Table(name="Bar")
public class Bar extends ParentClass {
...
} 
```

我们**不想**改变数据库模式，只想改变已经持久化`Foo`对象的实体类型。我希望有一种比我唯一想到的方法更好的方法，即手动抓取`Foo`对象、重新映射到`Bar`并重新持久化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:02:08.740

特别是我更喜欢使用纯 SQL 迁移来完成它。在我的公司，我们使用[liquibase](http://www.liquibase.org/)来版本化我们的数据库模式。因此，要进行迁移，我们只需为其创建更改日志。

有人认为这不是最好的解决方案，但我发现它简单且功能强大。在我看来，对于大型项目，这是要走的路。

* * *

**编辑：**

现在我看到您无法更改架构。我认为这不可能以一种简单的方式以编程方式实现。您将需要 Foo 和 Bar 之间的某种“TransformerService”，它只是复制公共父字段，删除旧的`Foo`并保留新的`Bar`。

我要做的是打破层次结构和组件化`ParentClass`，因此您只能在`Foo`and之间传输它`Bar`，反之亦然。这样您就不需要复制字段或类似的东西。它可能需要大量重构，但组件化比创建大/复杂的层次结构要好。

或者您可以直接在数据库中运行直接更改对象的 SQL。这很丑陋，但这是我认为你可以做这样的事情的唯一方法。

# php - 正在使用隐藏将其值设置为 php 中的某个值然后传递给 jquery 不好？

> ID：14526659
> 
> 赞同：1
> 
> 时间：2013-01-25T16:58:59.103
> 
> 标签：php, javascript, jquery, wordpress

我正在开发一个 wordpress 主题，我有一个使用 jquery 来检查错误的联系表，如果电子邮件发送成功，则显示确认消息。

在显示确认电子邮件之前，我想显示一个 loading.gif，以便用户知道它正在做某事。我的问题是在 jquery 中分配 img SRC url，因为我不希望它被修复。

我想将其设置为获取站点 url，然后将图像名称添加到其中。

由于您无法在 js 中解析 PHP，我想也许我可以作弊并使用将数据传递给 JS 的隐藏输入在表单页面上执行 PHP。

所以我有一个

```
<li class="hiddenurl">
    <input name="hiddenurl" value="<?php bloginfo('url'); ?>">
</li> 
```

然后在 jquery 中我将值设置为一个变量，然后在 JS 中：

```
$(this).parent().append('<img src="'+variable+'/library/images/loading.gif" etc 
```

这是一种不好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:01:55.583

> 由于您无法在 js 中解析 PHP

错误的。

```
<script type="text/javascript">
    var myvar = <?php echo json_encode($some_php_variable); ?>;
</script> 
```

[`json_encode`](http://php.net/json-encode)使任何 PHP 变量（资源除外）立即可由 JavaScript 解析。它有点像[`var_export`](http://php.net/var-export)，但用于 JavaScript 而不是 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:03:34.933

这不一定是一种“坏”的方式，但 jQuery 提供了 .data() 方法来完成这一点。您可以使用它在 HTML 中添加您自己的“data-”注释，然后在您的 JS 代码中检索/设置它们。

在此处查看 jQuery 文档：http: [//api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

所以我会用它来将 url 添加到图像中，然后在 JS 中将其抓取出来..

如果您只想在 JS 中将 URL 作为变量传递，那么 @Kolink 对此有正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:05:51.520

这不会是坏事，因为它不会伤害任何东西..但如果你只想获取网址，那为什么不呢..

```
window.location 
```

像这样

```
window.location.pathname // outputs "/questions/14526659/is-using-a-hidden-input-with-its-value-set-to-something-in-php-to-then-pass-to"

window.location.origin  // outputs http://stackoverflow.com 
```

# powershell - 如何知道远程工作站上是否安装了powershell？

> ID：14526660
> 
> 赞同：7
> 
> 时间：2013-01-25T16:59:10.623
> 
> 标签：powershell, installation, remote-desktop

如何知道**远程工作站**上是否安装了powershell ；我们需要清点所有启用了 powershell 的工作站，以便我们可以计划更改以进行部署；有没有办法远程知道是否安装了powershell以及什么版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:28:47.880

检查文件是否存在？

```
$path= "\\remote\C$\windows\System32\WindowsPowerShell\v1.0\powershell.exe"
if(test-path $path){(ls $path).VersionInfo} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T18:14:46.750

您可以使用手动运行的批处理脚本或尝试使用 GPO（作为启动脚本）。`my-computer-name.txt`如果找不到powershell ，它将保存一个带有“false”的文件，如果安装了PS，它将保存一个PS版本（1.0或2.0）。然后，您只需阅读文件。

pscheck.bat

```
@echo off
FOR /F "tokens=3" %%A IN ('REG QUERY "HKLM\SOFTWARE\Microsoft\PowerShell\1" /v Install ^| FIND "Install"') DO SET PowerShellInstalled=%%A

IF NOT "%PowerShellInstalled%"=="0x1" (
echo false > \\remote\location\%COMPUTERNAME%.txt

GOTO end
)

FOR /F "tokens=3" %%A IN ('REG QUERY "HKLM\SOFTWARE\Microsoft\PowerShell\1\PowerShellEngine" /v PowerShellVersion ^| FIND "PowerShellVersion"') DO SET PowerShellVersion=%%A

echo %PowerShellVersion% > \\remote\location\%COMPUTERNAME%.txt

:end 
```

注册表中 3.0 的 PSversion 值在另一个键（...\PowerShell\3\PowerShellEngine）中，但我猜测 PS3.0 没有必要知道，因为它是如此新，并且所有 PS 脚本都适用于 PS 2.0。

**更新：** Powershell 版本

```
function Check-PS {
    [CmdletBinding()]
    param (
        [Parameter(ValueFromPipeline=$true)]
        [String[]]$ComputerName = $env:COMPUTERNAME
    )

    Process
    {
        foreach ($computer in $ComputerName) 
        {

            $path = "\\$computer\C$\Windows\System32\WindowsPowerShell\v1.0\powershell.exe"
            $exists = $false

            #Check if exists
            if(Test-Path $path){
                $exists = $true
                #Detect version
                switch -Wildcard ((Get-ChildItem $path).VersionInfo.ProductVersion)
                {
                    "6.0*" { $ver = 1 }
                    "6.1*" { $ver = 2 }
                    "6.2*" { $ver = 3 }
                    default { $ver = 0 }
                }

            } else {
                Write-Error "Failed to connect to $computer"
                $ver = -1
            }

            #Return object
            New-Object pscustomobject -Property @{
                Computer = $computer
                HasPowerShell = $exists
                Version = $ver
            }
        }
    }
} 
```

它支持多个计算机名和通过管道输入。

```
Check-PS -ComputerName "Computer1", "Computer2" 
```

或者

```
"Computer1", "Computer2" | Check-PS 
```

使用本地计算机进行测试（默认计算机名）：

```
PS > Check-PS

HasPowerShell Computer Version
------------- -------- -------
         True FRODE-PC       3 
```

# linux - Echo 像书的索引一样排序

> ID：14526665
> 
> 赞同：2
> 
> 时间：2013-01-25T16:59:19.237
> 
> 标签：linux, bash, echo

我有一个脚本可以修改目录中的所有文件，并在终端中实时输出修改的状态，如下例所示：

```
Modifying json.php...   MODIFIED
Modifying layout.php...     ERROR
Modifying a_very_long_named_file.php...     NOT MODIFIED 
```

我想知道是否有一些命令可以用来在有序书的索引中回显，如下所示：

```
Modifying json.php..........................MODIFIED
Modifying layout.php........................ERROR
Modifying a_very_long_named_file.php........NOT MODIFIED 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:35:22.280

根据您的输入数据，以下行有效：（需要 gawk）

```
 awk -F '\\.\\.\\. +' -vd=50 '{x=sprintf("%-"d"s   %s",$1,$2);gsub(/  /,"..",x);print x}' file 
```

测试

```
kent$  cat s
Modifying json.php...   MODIFIED
Modifying layout.php...     ERROR
Modifying a_very_long_named_file.php...     NOT MODIFIED

kent$  awk -F '\\.\\.\\. +' -vd=50 '{x=sprintf ("%-"d"s   %s",$1,$2);gsub(/  /,"..",x);print x}' s
Modifying json.php..................................MODIFIED
Modifying layout.php................................ERROR
Modifying a_very_long_named_file.php................NOT MODIFIED 
```

笔记

*   您将数字（在我的示例中为 50）更改为您想要的

*   gsub(..) 部分有点冒险。它将两个连接的空间更改为两个点。但我认为最后还有一个空间，这不会是大问题。（在错误/修改之前......）。

**编辑**

添加 vim 解决方案，如果您觉得在 vim 中播放文本很舒服

*   类型`set ve=all`
*   删除三个点后的那些空格 (...) `:%s/\. \+/\./g`
*   光标在第一行，输入`qa$vT.x55|pF.v55|r.jq`
*   然后`20@a`

所有的键输入操作都在代码块中，实际上并没有那么多。这将在 20 行中执行此文本转换，如果您有很多行要做，您可以将 20 更改为 200 或 999。此外，这会将您的“修改”等移动到第 55 列。您也可以更改号码。

如果您在 vim 中执行此操作，它将如下所示：

![在此处输入图像描述](../Images/9d4c071b31f8df36bd036bee86e29dff.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:51:47.260

你也可以这样做：

```
 dots=.................................................
   echo Modifying $file ${dots:${#file}} $msg 
```

这会发送一个点子串作为第三个参数来回显，但不是标准的 sh。（在 bash 中工作。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:05:12.900

你可以用 echo 来做，我觉得 printf 更令人满意：

```
printf "Modifying ...................................\033[11G%s\033[35G%s\n" \
    $filename ERROR 
```

将从第 11 列开始打印文件名，并在第 35 列打印 ERROR，中间有 ....。如果文件名太大而无法容纳，它将被部分覆盖。

或者：

如果您在“修改”之后总是有一个空格，您可以尝试：

```
< input column -t | tr ' ' . | sed 's/\./ /' 
```

这要求所有输出都可用，以便可以在生成任何数据之前确定最大宽度。既然你说“实时”，那可能是不可取的，在这种情况下，你可以使用类似的东西：

```
echo Modifying json.php MODIFIED | perl -lane 'print "$F[0] $F[1]", "...",
    "." x ( 30 - length( $F[1] )), $F[2]' 
```

打印 33 列宽的“....”（根据需要调整）。如果任何文件名太长，则该行将太宽，但是除非您等待所有数据可用，否则实际上无法确定所需的最大宽度。（除非您在开始之前可以访问所有文件名。选择一个合适的宽度。）额外`"..."`的是在宽行上至少打印一些点，而不是将文件名与消息连接起来。

# rvm - RVM：如何为初始化脚本获取已安装 gem 的路径

> ID：14526666
> 
> 赞同：1
> 
> 时间：2013-01-25T16:59:22.527
> 
> 标签：rvm

使用 rvm，我安装了一些带有可执行脚本的 gem，例如[god](http://godrb.com)。

```
$ gem install god
$ which god 
/usr/local/rvm/gems/ruby-1.9.3-p362/bin/god 
```

我想从`/etc/init.d`脚本中调用上帝，但不希望对路径进行硬编码。有没有办法在 rvm 中查询“默认”ruby gems 目录的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:49:34.130

解决方案是[生成一个包装脚本](https://rvm.io/integration/init-d/)。

```
$ rvm wrapper 1.9.3-p362 bootup god
$ ls -l /usr/local/rvm/bin/bootup_god 
lrwxrwxrwx 1 root rvm 43 Jan 25 13:38 /usr/local/rvm/bin/bootup_god -> /usr/local/rvm/wrappers/ruby-1.9.3-p362/god* 
```

# ios - 核心数据如何确保实体中只有一个对象？

> ID：14526670
> 
> 赞同：1
> 
> 时间：2013-01-25T16:59:35.337
> 
> 标签：ios, object, core-data

我有一个 user 表和一个 Girls 表和一个 Girls_result 表。

基本上我只想要`USER`实体中的一个用户，那个 USER 是设备所有者，我想在每次需要时调用同一个 USER。

USER可以有多个女孩，女孩可以有多个结果。
数据模型： `USER <------>>GIRLS<-------->>GIRLS_RESULTS`

因此，我将 user_deviceid 属性添加到 USER Entity 并创建了一个单例类，这样我就可以为 user 设置一个唯一编号，并在需要时调用它。我想确保没有创建具有相同 UUID 的多个用户对象。

```
@implementation SingletonClass

@synthesize singletonManagedObjectContext=_singletonManagedObjectContext;
@synthesize userIS=_userIS;

+ (SingletonClass *)sharedInstance
{
    static SingletonClass *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[SingletonClass alloc] init];
        // Do any other initialisation stuff here
    });
    return sharedInstance;
}

- (id)init {
    if (self = [super init]) {

        // set a singleton managed object context
        _singletonManagedObjectContext=self.singletonManagedObjectContext;

        //set only one user based on unique device id, so all tables will belong to that user
        NSManagedObjectContext *context = _singletonManagedObjectContext;

        //how to make sure that _userIS is the same user all the time???

        if (_userIS.user_deviceid == [self newUUID]) {
            NSLog(@"user dvice id matches");
        }
        else{
            _userIS.user_deviceid=[self newUUID];
        }

    }
    return self;
}

- (NSString *)newUUID
{
    CFUUIDRef theUUID = CFUUIDCreate(NULL);
    CFStringRef string = CFUUIDCreateString(NULL, theUUID);
    CFRelease(theUUID);
    return (NSString *)CFBridgingRelease(string);
} 
```

那么如何确保在 USER 实体中只创建一个 USER 并且每次都可以使用该特定 USER 呢？

============编辑答案============ 基于接受的答案 下面我创建了一个工作正常的类

```
#import "CheckUser.h"
#import "USER.h"
#import "SingletonClass.h"

@implementation CheckUser

- (USER *)checkandreturnUser
{
    SingletonClass *sharedInstance = [SingletonClass sharedInstance];
    NSManagedObjectContext *context = sharedInstance.singletonManagedObjectContext;
    // Fetch Form Object
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:[NSEntityDescription entityForName:@"USER"
                                        inManagedObjectContext:context]];
    USER *user;
    NSError *error = nil;
    NSArray *userArray = [context executeFetchRequest:fetchRequest error:&error];
    NSLog(@"user array count %i",[userArray count]);
    if (userArray == nil) {
        NSAssert(0, @"There was an error fetching user object");
        userArray = [NSArray array];
    }
    // If user doesn't exist create it
    if ([userArray count] > 0) {
        NSAssert([userArray count] == 1, @"Expected one user but there were more");
        user = [userArray objectAtIndex:0];
    } else {
        //Create user object
        user = [NSEntityDescription insertNewObjectForEntityForName:@"USER"
                                             inManagedObjectContext:context];
        user.user_deviceid=[self newUUID];
        // maybe save here?
        if (![context save:&error]) {
            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
        }
    }

    return user;
}
- (NSString *)newUUID
{
    CFUUIDRef theUUID = CFUUIDCreate(NULL);
    CFStringRef string = CFUUIDCreateString(NULL, theUUID);
    CFRelease(theUUID);
    return (NSString *)CFBridgingRelease(string);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T17:16:38.350

Core Data 不支持单例实体的想法。如果您只想在数据存储中拥有一个实体实例，则需要编写应用程序以确保您永远不会创建多个。

原因很简单，这是一个奇怪的命题，不符合数据存储的概念。如果您只有一个实例，则不需要为该实例使用 Core Data。将您的单例数据保存在用户默认值或自定义文件中。把它放在数据存储中没有多大意义。你不需要它和其他对象之间的关系，因为你总是知道这些关系是什么——它们是不可配置的，它们不需要被查找，所以它们不需要存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:19:50.577

最简单的解决方案可能是检查并确保您创建的用户不超过一个。一旦你有了一个用户实体，就停下来。

`[self newUUID]`总是会返回一个不同的值所以`_userIS.user_deviceid == [self newUUID]`总是`NO`

我会使用访问器`_userIS`

```
- (NSManagedObject *)user
{
  if (_userIS) {
    return _userIS;
  }

  NSFetchRequest *fetchRequest = [[[NSFetchRequest alloc] init] autorelease];
  [fetchRequest setEntity:[NSEntityDescription entityForName:@"user" 
                                      inManagedObjectContext:_singletonManagedObjectContext]];
  NSError *error = nil;
  NSArray *userArray = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
  if (userArray == nil) {
    NSAssert(0, @"There was an error fetching user object");
    userArray = [NSArray array];
  }
  // If user doesn't exist create it
  if ([userArray count] > 0) { 
    NSAssert([userArray count] == 1, @"Expected one user but there were more");
    _userIS = [userArray objectAtIndex:0];
  } else {
    //Create user object
    _userIS = [NSEntityDescription insertNewObjectForEntityForName:@"user" 
                                                 inManagedObjectContext:_singletonManagedObjectContext];
    _userIS.user_deviceid=[self newUUID];
    // maybe save here?
  }
  [_userIS retain]; // Non-ARC only
  return _userIS;
} 
```

还值得一提的是，拥有一个根对象并不少见，它是模型-视图-控制器-存储模式的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:25:20.497

你应该覆盖`- (id)initWithEntity:(NSEntityDescription *)entity insertIntoManagedObjectContext:(NSManagedObjectContext *)context`，而不是`init`。假设您的模型对象名称是用户，它看起来像这样

```
- (id)          initWithEntity:(NSEntityDescription *)entity 
insertIntoManagedObjectContext:(NSManagedObjectContext *)context
    static User * _Singleton = nil;
    if (!_Singleton)
    {
        self = [super initWithEntity:entity 
      insertIntoManagedObjectContext:context];
    }
    return self; 
```

# google-apps-script - 如果目标工作表未打开/活动，zend 驱动的网站无法识别谷歌电子表格中定义的自定义函数的结果

> ID：14526674
> 
> 赞同：0
> 
> 时间：2013-01-25T16:59:48.620
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api, zend-gdata

我正在使用 Zend Gdata 库使用 Google 电子表格中的内容构建网站。电子表格包含许多自定义功能。如果目标电子表格是打开/活动的，则生成的网站中的所有内容都会更新/正确。如果目标电子表格未打开/处于活动状态，则只有目标电子表格单元格中的“文本”才能进入网站，但任何涉及自定义功能的单元格都显示为 #N/A。有没有办法触发自定义函数在 Google 电子表格中运行而不打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:42:48.820

我也是。是一个老问题，大约 1 年前我确实为它提交了一个问题。“自定义函数通常返回 #N/A” [http://code.google.com/p/google-apps-script-issues/issues/detail?id=1131](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1131)

建议您加注星标并添加评论，可能会有所帮助。

看起来问题不仅限于 GAS

# asp.net - 如何在服务器端设置文本框值

> ID：14526686
> 
> 赞同：1
> 
> 时间：2013-01-25T17:00:38.753
> 
> 标签：asp.net, textbox, session-variables

我有一个像“default.aspx”这样的asp.net页面，其中包含：

```
<form id="form1" runat="server" >        
    <asp:Textbox id="Textbox1" runat="server" />
    <asp:Button id="Button1" runat="server" onClick="Button1_Click" text="submit" />
</form> 
```

我想要的是在用户从其他子页面返回时将文本值保留在文本框字段中。
所以在 .cs 文件中我试试这个：

```
protected void Button1_Click(object sender, EventArgs e){
    Session["Data"] = Textbox1.Text;
}

public string Data{get{return Session["Data"].ToString();}} 
```

和 in.aspx：

```
<asp:Textbox id="Textbox1" runat="server" text="<%# Data %>" /> 
```

但它不起作用，文本框字段变为空白。
如何在没有 javascript 的情况下实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:06:24.663

`#`仅适用于数据绑定表达式。所以你需要（例如在`Page_Init)`

```
Page.DataBind(); 
```

为了这个工作

```
<asp:Textbox id="Textbox1" runat="server" text="<%# this.Data %>" /> 
```

否则这也可能有效

```
<asp:Textbox id="Textbox1" runat="server" text="<%= this.Data %>" /> 
```

[内联 asp.net 标签...将它们全部排序（<%$、<%=、<%、<%# 等）](http://naspinski.net/post/inline-aspnet-tags-sorting-them-all-out-%283c25242c-3c253d2c-3c252c-3c252c-etc%29.aspx)

正如已经评论过的，一般来说最好使用代码隐藏，因为你有编译时检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:03:31.653

我会在 Page_Load 上这样做

```
if (!Page.IsPostBack) {
   if ( Session["Data"] != null) 
       TextBox1.Text = Session["Data"].ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:04:17.340

你是这个意思？

```
if (Session["Data"] != null){
         Textbox1.Text = Session["Data"].ToString();
    } 
```

# r - 在 R 中，使用 & 与方括号 [][] 组合列有什么区别？

> ID：14526687
> 
> 赞同：2
> 
> 时间：2013-01-25T17:00:42.127
> 
> 标签：r

在 R 中，有什么区别：

```
summary(airquality$Solar.R[(airquality$Ozone>31)&(airquality$Temp>90)]) 
```

对比

```
summary( (airquality[airquality$Ozone>31,][airquality$Temp>90,])$Solar.R) 
```

我得到的结果略有不同，212.0 与 212.8 更准确，性能更好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T17:09:57.913

您的第一个命令是正确的；第二个命令不正确。您的第二个命令首先选择`airquality`that have的行`Ozone > 31`，然后选择与`airquality`that have的行相对应的行`Temp > 90`。问题是您的数据已经被子集化了一次，所以行不会第二次排列。如果您这样做，数字摘要与您的第一个版本一致：

```
summary((airquality[airquality$Ozone>31,][airquality[airquality$Ozone>31,]$Temp>90,])$Solar.R) 
```

虽然它更重要`NA`。

坚持第一个版本。

# linux - 在 Fedora 17 上运行在 Fedora 13 中构建的二进制文件

> ID：14526688
> 
> 赞同：1
> 
> 时间：2013-01-25T17:00:44.373
> 
> 标签：linux, installation, compatibility, fedora

在 Fedora 17 上运行在 Fedora 13 中构建的二进制文件是否安全？它是 C++ 代码，用 g++ 编译，我们使用 stl 容器、posix 套接字库等。

是否可以在 Fedora 13 机器上构建二进制文件，以便它们可以与 Fedora 17 机器一起使用？

任何意见，将不胜感激。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:04:52.923

“和其他人”很重要。Fedora 不倾向于保留旧的库版本，因此如果 Fedora 17 上没有旧版本的库，您可能需要打包或提供旧版本的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T17:14:11.410

最有可能的是，如果您的二进制文件实际运行，结果将是正确的。现在大多数图书馆都有“版本检查”。当然，如果“和其他”是不兼容的次要库，则可能会引起关注。

避免此类问题的“安全”方法是： 1\. 将二进制文件编译为静态 - 这意味着二进制文件不依赖于共享库 -> 兼容性没有问题（Linux 内核本身通常在许多方面都是安全的几代人 - 我经常从 2.6 内核更改为 3.8 内核，在工作中没有任何问题 - 在家里，我在两台机器上运行 Fedora 16 和 17，并且二进制文件可以在它们之间工作）。2\. 在新的目标系统上重新编译。

# android - AssetManager 没有加载文件？

> ID：14526689
> 
> 赞同：2
> 
> 时间：2013-01-25T17:00:47.380
> 
> 标签：android, asset-management

我正在阅读 Mario Zechner 的“Beginning Android Games”一书，我很高兴我拿起了它，但我现在遇到了一个问题，他要求用户在本书的早期编写代码。并不是说我反对对它们进行编码，我宁愿知道自己在做什么，也不愿做一个半吊子的工作，而且当我走得更远时，它不会很好地工作。

所以 AssetManager 似乎不想加载我的文件。

```
 AssetManager am = getAssets();
    InputStream inputStream = null;
    try {
        am.open("assets/texts/hello.txt");
        String text = loadTextFile(inputStream);
        tv.setText(text);
    } catch (IOException e) {
        tv.setText("Could not Load file");
    } finally {
        if (inputStream != null) {
            try {
                inputStream.close();
            } catch (IOException e) {
                tv.setText("Could not close file");
            }
        }
    }
} 
```

按照所有标准，我应该能够只使用链接：“texts/hello.txt”，但每次我这样做时都会向我射击 NPE。所以我被迫使用完整链接。使用完整链接允许程序运行它只是无法按照它告诉我“无法加载文件”的说明加载我的文本文档

我想我现在会把这个问题扼杀在萌芽状态，这样它就不会成为以后的主要问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:08:46.440

将您的代码更改为：

```
 AssetManager am = getAssets();
    InputStream inputStream = null;
    try {

         inputStream= am.open("texts/hello.txt"); //<<<<
        String text = loadTextFile(inputStream);
        tv.setText(text);
    } catch (IOException e) {

    // your code here 
```

因为您将 null 传递`inputStream`给`loadTextFile`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:19:47.807

```
// To load text file
        InputStream input;
        try {
          input = assetManager.open("helloworld.txt");

             int size = input.available();
             byte[] buffer = new byte[size];
             input.read(buffer);
             input.close();

             // byte buffer into a string
             String text = new String(buffer);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# database-design - 具有重复特征的议程应用数据库模型

> ID：14526691
> 
> 赞同：2
> 
> 时间：2013-01-25T17:00:51.760
> 
> 标签：database-design, architecture

我正在为一个简单的议程应用程序寻找一个数据库模型，但我找不到任何东西。StackOverflow 有很多关于这个问题的问题，但没有一个提供具体的答案。所以我进一步研究并提出了我自己的模型，我将其展示给您，以便您帮助我评估和改进它。并且可以作为将来寻找这个的人的参考。

此模型的灵感来自 Outlook 提供的功能，尽管它被大量削减。它旨在得到大量应用程序代码的支持。

```
CREATE TABLE dbo.Users (
    UserId UNIQUEIDENTIFIER NOT NULL,
    CONSTRAINT PK_Users PRIMARY KEY (UserId))

CREATE TABLE dbo.Appointments (
    -- Keys.
    AppointmentId INT IDENTITY NOT NULL,
    ParentAppointmentId INT NULL,
    UserId UNIQUEIDENTIFIER NOT NULL,
    -- General fields.
    EventDescription VARCHAR(500) NULL,
    EventName VARCHAR(50) NOT NULL,
    -- Schedule fields.
    IsCancelled BIT NOT NULL, /* To cancel only one appointment in a series of recurring appointments. */
    AppointmentDate DATE NOT NULL,
    IsAllDayEvent BIT NOT NULL,
    StartTime TIME NULL, /* This field is required in case IsAllDayEvent = false */
    DurationInMinutes INT NULL, /* This field is required in case IsAllDayEvent = false */
    RecurrenceCount SMALLINT NULL,
    RecurrenceEndDate DATE NULL,
    RecurrenceType TINYINT NULL, /* 1 = Daily, 2 = Weekly (other recurrence types are not supported by design) */
    WeeklyRecurrenceDays VARCHAR(13), /* 1,2,3,4,5,6,7 (each number represents a day of the week, where 1 = sunday) */
    -- Constraints.
    CONSTRAINT PK_Appointments PRIMARY KEY (AppointmentId),
    CONSTRAINT PK_Appointments_Appointments FOREIGN KEY (ParentAppointmentId) REFERENCES dbo.Appointments(AppointmentId),
    CONSTRAINT FK_Appointments_Users FOREIGN KEY (UserId) REFERENCES dbo.Users(UserId)) 
```

强调：

*   可以通过添加 to 的值来获得约会结束`DurationInMinutes`时间`StartTime`。
*   约会可以持续一整天，当`IsAllDayEvent = 1`. 在这种情况下，不需要字段 StartTime 和 DurationInMinutes。
*   重复特征将由应用程序代码计算。即使约会是重复的，它也只会在数据库中注册一次，并且应用程序负责计算重复约会的日期，然后在日历中显示这些日期。为了帮助应用程序更好地执行，应用程序可以只计算日历中可见的时间段。通过将这些计算缓存在某处，当用户更改重复设置或删除约会时将它们逐出，可以实现进一步的性能。
*   `RecurrenceCount`通过查看或`RecurrenceEndDate`字段来确定重复约会的次数。一次只有一个应该包含一个值。
*   此模型支持编辑一系列中的一个或多个约会。这就是它的`ParentAppointmentId`用途。假设有一个称为“示例约会”的定期约会，配置为每天重复 5 次。然后假设用户选择仅编辑系列的第三个约会，将其名称更改为“更新约会”。这将导致应用程序复制数据库中的原始约会记录，但使用新名称，并使其引用原始约会（父）。正如我之前提到的，应用程序有责任检测系列中存在具有不同属性的约会，并在计算要在日历中显示的重复时将其考虑在内。
*   仍然是关于该`ParentAppointmentId`功能：用户可以取消一个或多个约会。例如，“我希望这个事件在所有星期四发生，但不是在那个特定的星期四”。这将再次进行上述复制过程，但将子约会`IsCancelled`字段设置为`1`(true)。当在日历中显示系列时，应用程序应该“隐藏”这个特定的约会。
*   还是关于这个`ParentAppointmentId`功能：为了简化应用程序逻辑，并遵循 Outlook 模型，当用户更改原始约会的重复设置时，导致整个系列重新计算，子约会丢失。

* * *

嗯，我想就是这样。请告诉我您是否同意这种方法，或者如果您不同意，如果不采取完全不同的方法，您会改变什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:09:18.863

我不确定你在这里做了什么可怕的事情......

一种想法是完全分解 parentAppointmentId 并构建一个新的关联表，该表仅链接两个任意约会。然后，您可能会添加一些角色或类型列来识别正在定义的关系类型。

通过这种方式，您可以灵活地在系列中允许更复杂的关联（例如跳过 - 重命名等），并允许一个约会可能是许多其他约会的结果或后续 - 而不仅仅是一个约会。

当只考虑标准化时 - 重复信息也严格不是约会本身的一部分。也许考虑将重复信息拉到新表并仅与相关约会相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-18T17:50:31.800

派对迟到了 :) 但我喜欢这种设计和考虑。对于任何未来的人，**WeeklyRecurrenceDays**的一个建议是使用整数，然后将您的天数定义为位字段；*1=星期日, 2=星期一, 4=星期二, 8=星期三, 16=星期四, 32=星期五, 64=星期六*

使用简单的 AND 功能，客户端应用程序可以确定选择了哪些日期，而无需解析字段中包含的文本。

示例：5=星期日和星期二；127=会是所有的日子；62=工作日；65=周末

# android - ant 我如何禁用 pre-dexing r21+

> ID：14526692
> 
> 赞同：2
> 
> 时间：2013-01-25T17:00:52.547
> 
> 标签：android, ant, dex

你好，更新到 r21 后，我的 ant 构建需要永远进行 pre-dexing

`[dex] Pre-Dexing myproject/android/google-play-services_lib/bin/classes.jar -> classes-27fa775977cf84dcd4ef76d9015649a6.jar`

这使我的编译时间增加了一倍多。如果我只预索引一次，预索引会加快速度，但实际上我为不同的 ant 构建多次重新配置我的项目，很多次。所以他们都是 pre-dex ，这很烦人。

我可以在我的 ant 脚本中启用一个标志吗？

我查看了一个 ant-maven github 项目，但看不到关闭它的方法，但我不是 100% 确定该项目是相关的。

帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:12:35.643

从 build.xml 看来，您可以将所有不同构建的属性 out.dex.input.absolute.dir 更改为指向目标目录之外的单个目录。如果存在预索引文件，我猜构建系统不会再次尝试预索引它。

```
out.dex.input.absolute.dir 
```

使用[maven android plugin](http://code.google.com/p/maven-android-plugin/) ]，[这里](https://github.com/jayway/maven-android-plugin/pull/161)的帖子表明 predex 默认是关闭的，虽然帖子是一天前的，所以也许你需要获取最新的 beta 版本的插件。您可以使用禁用 predex

```
 <dexPreDex>false</dexPreDex> 
```

# xcode - Xcode 4 - 禁用汇编调试器

> ID：14526693
> 
> 赞同：1
> 
> 时间：2013-01-25T17:00:58.080
> 
> 标签：xcode, debugging

当我调试 iPhone 应用程序代码时，调试器会显示汇编代码。

我只想查看 Objective-C 代码，而不是程序集。

我已取消选择选项 Product -> Debug Workflow -> Show Disassembly When Debugging 但仍然没有。

请你帮助我好吗...！

提前致谢...！

# android - Android 拖影的“目标点”如何从其“接触点”移开？

> ID：14526701
> 
> 赞同：16
> 
> 时间：2013-01-25T17:01:40.107
> 
> 标签：android, drag-and-drop

我正在开发一个应用程序，该应用程序将受益于更精确地控制拖放对象的位置。但使用电容式触摸屏时，用户的手指将始终遮住放置目标。

[`View.DragShadowBuilder.onProvideShadowMetrics()`](http://developer.android.com/reference/android/view/View.DragShadowBuilder.html#onProvideShadowMetrics(android.graphics.Point,%20android.graphics.Point))Android 允许通过覆盖该方法来指定拖动阴影上的“接触点” 。但似乎没有办法提供一个移位的“目标点”。我想从拖动阴影的接触点投射一个箭头，该箭头可以更精确地操纵到放置目标上。

**问题：**实现这一目标的最简单/最优雅的方法是什么？

我想我可以在拖动操作期间在屏幕上放置一个不可见的层，该层注册触摸点的坐标，翻译它们并将它们发送到实际的放置目标 - 本质上是重新实现拖动事件。但我想知道是否有更简单的解决方案。或者，如果其他人以前做过类似的事情。

* * *

**编辑：**这是我想要的那种拖影的粗略模型：

![在此处输入图像描述](../Images/05a0def7457983cfd5906ed602dbc472.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T09:23:06.070

> 问题：实现这一目标的最简单/最优雅的方法是什么？

正如您已经看到的那样，您不能使用`View.DragShadowBuilder`该类，因为无法将阴影句柄的点和考虑到所有已发送拖动事件的点分开。我也看不到重新实现拖动系统的另一种方法，即使通过扩展`View`类（这会很麻烦）。

> 我想我可以在拖动操作期间在屏幕上放置一个不可见的层，该层注册触摸点的坐标，翻译它们并将它们发送到实际的放置目标 - 本质上是重新实现拖动事件。

这是[一种方法](https://github.com/luksprog/DroidPlayground/blob/master/src/com/luksprog/playground/view/DragEnhancement.java)，如果您没有复杂的拖放要求，它非常简单。

> 但我想知道是否有更简单的解决方案。

您最好扩展基本的 Android 布局（至少是您将使用的布局）并在其中实现拖动逻辑。这样您就无需管理另一层并进行一些额外的计算。我已经扩展了这个`RelativeLayout`类来实现你[可以在这里找到](https://github.com/luksprog/DroidPlayground/blob/master/src/com/luksprog/playground/view/DragAwareRelativeLayout.java)的逻辑。[我已经在这样的Activity](https://github.com/luksprog/DroidPlayground/blob/master/src/com/luksprog/playground/view/DragDisplacement.java)中使用了该类，它具有[这种布局](https://github.com/luksprog/DroidPlayground/blob/master/res/layout/view_dragdisplacement.xml)。该示例是基本的，需要更多的工作（和思考）以使其更加灵活并解决一些潜在的问题。

# java - 动态外部类加载

> ID：14526702
> 
> 赞同：0
> 
> 时间：2013-01-25T17:01:40.297
> 
> 标签：java, dynamic-class-loaders, dynamic-class

我试图在 Java 中获得动态类加载的经验。因此，欢迎任何意见和帮助。我有一个程序允许用户选择一个文件并对其执行一些操作。动作是“命令”，这些是我尝试加载的类。

它的工作方式是：用户将 .class 文件放在所需的文件夹中，我的程序检查文件夹中的文件，如果 .class 文件中有一个类，它会加载它。

我做到了，但不是我想要的。目前，它仅适用于使用我的程序编译的类。但我想要的是我可以将任何包含类的 .class 文件放在文件夹中，然后我的程序会加载它。这是我现在的代码：

```
for (int i = 0; i < fileList.length; i++) {
    if (fileList[i].endsWith(".class")) {
        /////MY FIRT TRY/////ClassLoader myClassLoader = ClassLoader.getSystemClassLoader();
        ClassLoader classLoader = FileMod.class.getClassLoader();

        // Define a class to be loaded.
        String classNameToBeLoaded = fileList[i].replace(".class", "");

        // Load the class
        try {
            /////MY FIRST TRY/////Class myClass = myClassLoader.loadClass(classNameToBeLoaded);
            //if the class exists in the file
            Class aClass = classLoader.loadClass(classNameToBeLoaded);
            classList.add(aClass);
            System.out.println("CLASS FOUND : " + classNameToBeLoaded + aClass.getSuperclass());
        } catch (ClassNotFoundException e) {
            System.out.println("CLASS NOT FOUND : " + classNameToBeLoaded);
            continue;
        }
    }
} 
```

如您所见，我尝试了两种方法，第一种方法目前在评论中。我所做的是检查文件夹中的每个文件并检查它是否是 .class 文件，如果是，我会尝试加载该类（如果有的话）。我猜这两者`classLoaders`只能加载他们“知道”的文件，那我怎么能加载一个外部类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:04:27.520

您通常需要一个新的类加载器。使用`java.net.URLClassLoader.newInstance`. 不过要小心，您现在正在将类从外部加载到您的应用程序中。

（一些类加载器将允许您添加位置，但这是一个真正的 hack。）

# c# - 部分加载时运行 Javascript/Jquery

> ID：14526708
> 
> 赞同：0
> 
> 时间：2013-01-25T17:01:56.377
> 
> 标签：c#, javascript, ajax, asp.net-mvc, asp.net-mvc-4

所有示例/答案似乎都显示在页面加载时运行部分的 javascript。

当页面加载时，此部分不会加载...稍后使用 AJAX 单击按钮时会加载它。

我试过我的 JS

里面：

```
$(document).ready(function () { 
```

和 ：

```
$(function(){ 
```

和 ：

通过它自己

首先根本不触发。第二和第三似乎在第二页加载时触发。我假设因为我的 js 影响的 div 将存在。那么如何让它在**部分加载**时运行..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:14:56.357

```
$(document).ready(function () {
    ...
}); 
```

将在页面加载时触发（更具体地说 $(document).ready 被连接到 document.DOMContentLoaded 或 window.loaded 事件）但是因为您使用 ajax 加载 Partial，所以在加载 Partial 时已经触发了页面加载事件。

如果您使用 jQuery 通过 ajax 加载部分页面，我建议您从

```
$ajax(...
}).done(function ( data ) {
    yourFunction();
}); 
```

或者，如果您使用 AjaxHelper 类（例如使用 razor @Ajax.ActionLink(...)），则使用其 AjaxOption 的 OnSuccess 或 OnComplete 属性来连接您的 javascript 函数。像下面这样的方式：

```
@Ajax.ActionLink("Load partial", "MyPartialAction", new AjaxOptions
{
    UpdateTargetId="partialContainer",
    OnSuccess="partialLoaded"
} 
```

此代码将从 MyPartialAction 操作返回的 Partial 加载到具有“partialContainer” id 的标记中，并且在加载 Partial 后，您的 JavaScript 函数名为 partialLoaded。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T17:13:55.143

如果您想让它在部分加载时运行，请在发出部分请求的任何内容的回调中执行此操作。如果此请求发出者是 Jquery，它将类似于以下内容：

```
$.get(url, function (result) {
    // Do whatever you want here in the success callback.
}); 
```

如果您使用 MVC 辅助方法（例如 Ajax.ActionLink）执行某些操作，则可以指定一个 jquery 函数以在响应时调用

```
@Ajax.ActionLink("NameOfLink", "ControllerAction", new AjaxOptions
{
    HttpMethod = "GET",
    OnSuccess = "javascriptFunction(data)"
})

function javascriptFunction(data) {
    // Do whatever you want
} 
```

# php - youtube API 出现 403 错误

> ID：14526715
> 
> 赞同：0
> 
> 时间：2013-01-25T17:02:16.977
> 
> 标签：php, json, youtube, httpwebrequest

我正在我的频道上显示最新上传的 youtube 视频。它工作正常，但有时会出现此错误，并使我的整个网站出错！

```
[phpBB Debug] PHP Warning: in file /my_youtube/functions.php on line 5:
file_get_contents(http://gdata.youtube.com/feeds/api/users/ElectronicsPubVideos/uploads?v=2&alt=json&max-results=5&orderby=published): 
failed to open stream: 
HTTP request failed! HTTP/1.0 403 Forbidden 
```

我不知道问题是什么，可能是来自 youtube 方面的不时错误？无论如何，这是我解析 JSON 文件的函数（如果它实际上是从 youtube 返回的）：

```
function GetLatestVideos()
{
     $url = file_get_contents('http://gdata.youtube.com/feeds/api/users/ElectronicsPubVideos/uploads?v=2&alt=json&max-results=5&orderby=published');

    $i = 0;
    if($result = json_decode($url, true))
    {
        foreach($result['feed']['entry'] as $entry) 
        {
            $vids[$i]["title"]  = $entry['title']['$t'];
            $vids[$i]["desc"]   = $entry['media$group']['media$description']['$t'];
            $vids[$i]["thumb"]  = $entry['media$group']['media$thumbnail'][2]['url'];
            $vids[$i]["url"]    =  $entry['link'][0]["href"];
            $vids[$i]["id"]     = $entry['media$group']['yt$videoid']['$t'];

            $i++;
        }

        return $vids;
    }

    else return "";
} 
```

所以我的问题是，如果 resonse 是 403，如何处理（检测）？这样我就可以做其他事情了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:13:41.850

您无法使用`file_get_contents`. 我会使用类似 cURL 的东西：

```
function get_youtube_content($url) 
{
    if(!function_exists('curl_init'))
    { 
        die('CURL is not installed!');
    }

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $output = curl_exec($ch);
    $http_status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);

    return ($http_status == '403') ? false : $output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:14:45.187

您可以在函数前面加上“@”以防止 PHP 错误消息： `@file_get_contents`

在 if 条件下使用它：

```
<?php
if($url = @file_get_contents("http://something/")) {
    // success code and json_decode, etc. here
} else {
    // error message here
}
?> 
```

# php - 对象 A 的单个实例的值被对象 B 的许多实例使用

> ID：14526716
> 
> 赞同：0
> 
> 时间：2013-01-25T17:02:22.157
> 
> 标签：php, oop

我一直在研究这个问题，但我还没有找到一个好的解决方案。

在我们开始之前：如果您认为答案是“单例”，那不是，项目中不允许使用单例。不要问我为什么，因为我不想再参加那个讨论了。:)

所以这里（这只是一个例子）：

*   A类的对象X（只允许存在一个实例，但需要创建）
*   对象 X 具有某种属性，例如*$color = 'green';*
*   创建的所有 B 类对象都获得该属性的值。
*   当对象 X 的属性变为*$color = 'red';* 所有创建的 B 类新对象都将获得新值
*   如果在 A 类中的一个对象尚不存在时创建 B 类对象，则需要创建 A 类对象

现在的问题......我如何构建我的类，并确保只创建一个类 A 的实例？

我说得有道理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:10:51.167

您可以将第一个创建的实例保存`X`在类的静态属性中`X`，如下所示：

```
class X {
  static public $instance = null;
  public function __construct() {
    if (is_null(X::$instance)) {
      X::$instance = $this;
    }
    ...
  }
} 
```

然后你可以`X::$instance->color`在你的`B::__construct()`构造函数中引用。

更好的方法可能是拥有一个`B`工厂，您将`X`实例注入其中，并让您的`B`类期望该`X`实例作为构造函数参数：

```
class BFactory {
  protected $x;
  public function __construct($x) {
    $this->x = $x;
  }
  public function make_instance() {
    return new B($this->x);
  }
}
$factory = new BFactory($X);
$instance = $factory->make_instance(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:15:39.307

我不太确定你申请的目的是什么。不过，您可以使用静态变量来跟踪您的对象。

```
class A
{
    private static $instance_exists = false;
    private static $color = 'green';

    public function __construct() {
        if(self::$instance_exists) {
            throw new Exception('tried to create another instance of A');
        }
        self::$instance_exists = true;
    }

    public static function getColor() {
        return self::$color;
    }

    public static function instanceExists() {
        return self::$instance_exists;
    }

}

class B {
    private $color;

    public function __construct() {
        $this->color = A::getColor();
    }
}

A::instanceExists(); // check anywhere 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:12:24.297

在对象 X 上创建一种属性更改侦听器。

*   每个对象 B 向对象 X 注册以在`color`属性已更改时接收通知。这可以在对象 B 构造函数中完成。
*   在属性更改事件中，对象 X 为它保留在某个内部集合中的所有对象 B 调用类似“设置属性”的方法。
*   对象 X 在逻辑上存储在一些最初可能为空的引用中。如果为 null，则对象 B 可以在其构造函数中创建一个新对象 X。
*   如果对象 B 想主动更改全局颜色属性，则需要保留对对象 A 的内部引用。必须做一些事情来防止通知事件的死循环（通过事件源（更改颜色的对象 B ) 到对象 X 以及颜色值等)。

不幸的是，当创建 B 的新实例时，它必须从某个地方获取有关可能存在的 X 的引用。如果这不能是全局静态字段，则可能：

*   让我们假设像细菌这样的对象 B 只能从另一个派生，因此它们可以传递内部非静态引用。第一个实例必须以某种特殊方式创建。
*   假设我们在某个方法/函数中创建所有对象 B，我们可以在其中使用局部变量来保存 X 引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T11:00:14.677

在一些很酷的帅哥和帅哥的帮助下。:)

这是一个优雅的解决方案，与我的想法不太一样，但它确实有效。请注意，这只是一个示例，引擎盖下还有更多内容。

```
class A {
    public $color;
    function __construct($new_color) {$this->color = $new_color;}
}

class B extends A {}

$color = 'green';
$y[0] = new B($color);
$y[1] = new B($color);
$color = 'red';
$y[2] = new B($color);
$color = 'black';
$y[3] = new B($color); 
```

谢谢大家的意见和建议。它帮助了我们很多。谢谢 ...

# python - Python 索引错误列表

> ID：14526717
> 
> 赞同：1
> 
> 时间：2013-01-25T17:02:22.637
> 
> 标签：python, arrays

我想从`.ods`文件中读取数据（使用[`ezodf`](https://pypi.python.org/pypi/ezodf/)），并将其转换为 JSON。

这是我的代码：

```
try:
    while conf[i, 2].value != None:
        export_data['priorities'][conf[i, 2].value] = str(int(conf[i, 3].value))
        i+=1
except IndexError:
    print("This probably has a better solution."); 
```

`conf[x, y]`引用工作`conf`表中的单元格。如您所见`i`，只要其中没有空单元格，我就想读取列的值。

问题是第一个空单元格引发了`IndexError`异常。

我可以通过简单的方式解决这个问题，例如，检查此列的长度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:10:54.177

这应该是您要查找的内容（我假设`conf`是电子表格）：

```
for i in range(conf.nrows()):
   export_data['priorities'][conf[i, 2].value] = str(int(conf[i, 3].value)) 
```

但是您应该知道，`int(conf[i, 3].value)`如果电子表格包含非整数值，该位将引发异常。

您的`try`/`except`执行此操作的方法没有什么大问题。

# c# - 我如何知道一个字符是否为给定语言？在 Unicode 字符串中

> ID：14526718
> 
> 赞同：6
> 
> 时间：2013-01-25T17:02:24.307
> 
> 标签：c#, string, unicode

> **可能重复：**
> [返回给定字符串的语言](https://stackoverflow.com/questions/1192768/return-the-language-of-a-given-string)

任务是对字符串列表进行排序。优先使用特定语言。字符串可以用不同的语言编写。比如中文、英文、俄文。我需要先带走所有的中国人，然后再带走其余的。

为此，我想知道哪个国家（语言）属于字符串中的特定字符。（例如关于第一个字母）

有没有类或方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:16:42.160

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:10:26.420

试试这个链接

[如何检测字符串的语言？](https://stackoverflow.com/questions/1192768/return-the-language-of-a-given-string/1192802#1192802)

代码是（已复制）

```
var text = "¿Dónde está el baño?";
google.language.detect(text, function(result) {
if (!result.error) {
var language = 'unknown';
for (l in google.language.Languages) {
  if (google.language.Languages[l] == result.language) {
    language = l;
    break;
  }
}
var container = document.getElementById("detection");
container.innerHTML = text + " is: " + language + "";
}
}); 
```

# hyperlink - 从 MS-Word 中链接到 MS-Visio 页面（全部 2010）

> ID：14526720
> 
> 赞同：1
> 
> 时间：2013-01-25T17:02:39.390
> 
> 标签：hyperlink, ms-word, ms-office, visio, office-2010

我一定不是在寻找正确的术语，因为我还没有找到答案。我同时拥有 Word 和 Visio 2010，并且希望能够将 Visio 中的页面（或其中的一部分）链接到 Word 文档，因此当在 Visio 中进行更改时，它们会在打开 Word 文档时同步。

如果有办法将其中一个 Visio 页面的一部分链接到 Word 文档中，那就更好了。Visio 文档有多个页面（描述独立流程）。此外，每个流的一部分依赖于同一页面上的另一个流。

```
For example:
Visio Document has 2 pages, each with different flows on them.  (Flows=process).  
In the Word document, I want to describe in detail, and show the correct page or 
portion thereof.  If Visio page1 has 3 flows/processes on it, I would like to 
be able to reference each flow/process independently. As in,

Step 1 - do this
{link to portion of Visio Page1 I am describing}
Step 2 - do that
{link to portion of Visio Page1 I am describing}
Step 3 - do something else
{link to portion of Visio Page1 I am describing}

If that isn't possible, then I would like to be able to reference the specific 
Visio page in my Word document. 
```

实际上，我认为我可以链接到整个 Visio 文档，但我认为它仅在上次保存时才显示活动页面。

# php - 在 Magento sales_order_save_commit_after 挂钩中，为什么我的订单中有重复的商品？

> ID：14526728
> 
> 赞同：3
> 
> 时间：2013-01-25T17:03:16.427
> 
> 标签：php, magento

我正在使用 Magento 的观察者挂钩来挂钩订单保存过程。我想在订单设置完成并保存后向网络服务发送消息。

但是我注意到网络服务经常收到重复的订单项目。

这是我的代码的简化版本，我知道它存在问题：

```
<?php 
class Name_Modulename_Model_Observer {

public function sales_order_save_commit_after($observer) {

    // Gets the order which is being saved.
    $order  = $observer->getOrder();

    $status = $order->getStatus();

    if($status != "complete") {
        continue;
    }

    // PROBLEM - The number of Mage_Sales_Model_Order_Item 
    // in this array sometimes does not correspond with the 
    // The number of items in the basket. 
    $items = $order->getAllItems();

    $itemsInOrder = array();

    foreach($items as $item) {

        $product = $item->getProduct();

        $itemsInOrder[] = $product->name;

    }

    // At the end of the loop $itemsInOrder can contain 
    // multiple name entries for the same line item. Why is this? 

}

}

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T17:07:28.577

如果订单包含可配置产品，则返回的集合`$order->getAllItems();` 将包含父产品**和**子产品，从而导致该产品类型的元素计数加倍。使用起来更安全`$order->getAllVisibleItems()`

# php - 使用数组中的变量比较 num 行

> ID：14526735
> 
> 赞同：0
> 
> 时间：2013-01-25T17:03:36.193
> 
> 标签：php, jquery, ajax

嘿伙计们，我正在尝试比较两个查询的行数，这些值来自数组中的数组，而这就是 php：

```
$get_section = "SELECT *
                        FROM section a
                        LEFT JOIN advisory_sections b ON(a.section_id = b.section_id)
                        LEFT JOIN school_faculty c ON (b.faculty_id = c.faculty_id)

                        WHERE a.school_id = '$school_id'  ORDER BY section_level ASC";

                        $result=mysql_query($get_section)or die(mysql_error());

                                $data=array();
                    while ($row = mysql_fetch_array($result))
                                {
                                    $data[] =    array(
                                       'sec_id'=>$row['section_id'],
                                       'sec_name'=>$row['section_name'],
                                       'sec_dept'=>$row['section_department'],
                                       'sec_lvl'=>$row['section_level'],
                                      'advisory_id'=>$row['advisory_id'],
                                      'first_name'=>$row['f_firstname'],
                                      'last_name'=>$row['f_lastname'],
                                      'middle_name'=>$row['f_middlename'],
                                      'advisor_id'=>$row['faculty_id'],
                                    );

                                }

                    $get_subjects = "SELECT subject_name
                        FROM subjects  
                        WHERE level = '$data.sec_lvl' ";

                        $result_get_subjects =mysql_query($get_subjects)or die(mysql_error());

                        $subjects_count = mysql_num_rows($result_get_subjects);

                    $check_archive_subjects = " SELECT b.subject_name 
                                                FROM registrar_grade_archive a
                                                LEFT JOIN subjects b ON(a.subject_id=b.subject_id)
                                                WHERE a.advisor_faculty_id = '$data.advisor_id'
                                                GROUP BY b.subject_name ASC
                                                 " ;

                     $query_checking  =mysql_query($check_archive_subjects)or die(mysql_error());

                    $subjects_count_sent = mysql_num_rows($query_checking);                                  

                    if($subjects_count_sent != $subjects_count){

                        $status['status'] = "Incomplete";
                    }else{

                        $status['status'] = "Complete";
                    }

                    $full_data = array(

                        'info' => $data,
                        'status'=>$status

                        );

        echo json_encode($full_data);

    } 
```

当我检查控制台时，我只获得了所有这些状态的一个状态，并且我从控制台收到一条错误消息：

```
TypeError: info[i] is undefined
[Break On This Error] 
```

发生了什么？

阿贾克斯：

```
function get_sections_status(){
     $.ajax({                
    url: 'teacher_class_get.php',
    dataType: 'json',
    type: 'POST', //u missed this line.
    data:{'func_num':'6'},
    success: function (data){
      $.each(data, function(i, item) {

        var info = data.info;
        var status = data.status;

        html = "<tr>";

                              html += "<td style='width:10%;'><input type='radio' name='section_id' rel='"+info[i].advisory_id+"' value='"+info[i].sec_id+"'></td>";
                              html += "<td style='width:25%;'><label>"+status[i].status+"</label></td>";
                              html += "<td style='width:15%;'><label id='year_level' rel='"+info[i].sec_lvl+"''>"+info[i].sec_lvl+"</label></td>";
                              html += "<td style='width:20%;'><label>"+info[i].sec_name+"</label></td>";
                              html += "<td style='width:30%;'><label id='faculty_id' rel='"+info[i].advisor_id+"'>"+info[i].last_name+", "+info[i].first_name+" "+info[i].middle_name+"</label></td>";                              
                              html += "</tr>";

       $('#table-sections-content').append(html);
       });

           }
      });

   }
   get_sections_status(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:39:58.303

首先，我认为您想要做的是在循环中添加状态查询。我还添加了带有数据的状态，以使 Javascript 更容易一些。

```
$get_section = "SELECT *
                FROM section a       
                LEFT JOIN advisory_sections b ON(a.section_id = b.section_id)
                LEFT JOIN school_faculty c ON (b.faculty_id = c.faculty_id)
                WHERE a.school_id = '$school_id'  ORDER BY section_level ASC";

$result=mysql_query($get_section)or die(mysql_error());

$data=array();

while ($row = mysql_fetch_array($result)){
    $temp =    array(
        'sec_id'=>$row['section_id'],
        'sec_name'=>$row['section_name'],
        'sec_dept'=>$row['section_department'],
        'sec_lvl'=>$row['section_level'],
        'advisory_id'=>$row['advisory_id'],
        'first_name'=>$row['f_firstname'],
        'last_name'=>$row['f_lastname'],
        'middle_name'=>$row['f_middlename'],
        'advisor_id'=>$row['faculty_id'],
    );

    $get_subjects = "SELECT subject_name
                 FROM subjects  
                 WHERE level = '$row['section_level']' ";

    $result_get_subjects =mysql_query($get_subjects)or die(mysql_error());
    $subjects_count = mysql_num_rows($result_get_subjects);

    $check_archive_subjects = " SELECT b.subject_name 
                                FROM registrar_grade_archive a
                                LEFT JOIN subjects b ON(a.subject_id=b.subject_id)
                                WHERE a.advisor_faculty_id = '$data.advisor_id'
                                GROUP BY b.subject_name ASC" ;

    $query_checking  =mysql_query($check_archive_subjects)or die(mysql_error());

    $subjects_count_sent = mysql_num_rows($query_checking);
    if($subjects_count_sent != $subjects_count){
        $temp['status'] = "Incomplete";
    }else{
        $temp['status'] = "Complete";
    }
    $data[] = $temp;
}

$full_data = array(
   'info' => $data,
);

    echo json_encode($full_data);

} 
```

现在在 JS 中。（没有检查这个，data.info.length 可能只是 data.length）

```
function get_sections_status(){
  $.ajax({                
    url: 'teacher_class_get.php',
    dataType: 'json',
    type: 'POST', //u missed this line.
    data:{'func_num':'6'},
    success: function (data){
        for(var i = 0 ; i>data.info.length ; i++) {
           var info = data.info[i];

           html = "<tr>";
           html += "<td style='width:10%;'><input type='radio' name='section_id' rel='"+info[i].advisory_id+"' value='"+info.sec_id+"'></td>";
           html += "<td style='width:25%;'><label>"+info.status+"</label></td>";
           html += "<td style='width:15%;'><label id='year_level' rel='"+info.sec_lvl+"''>"+info[i].sec_lvl+"</label></td>";
           html += "<td style='width:20%;'><label>"+info.sec_name+"</label></td>";
           html += "<td style='width:30%;'><label id='faculty_id' rel='"+info.advisor_id+"'>"+info.last_name+", "+info.first_name+" "+info[i].middle_name+"</label></td>";                              
           html += "</tr>";

          $('#table-sections-content').append(html);
   });

       }
   });
}
get_sections_status(); 
```

# macos - 如果我将 sysctlbyname 作为 dispatch_once arg 包含在块中，为什么没有定义它？

> ID：14526736
> 
> 赞同：3
> 
> 时间：2013-01-25T17:03:37.613
> 
> 标签：macos

我进口：

```
#import <sys/types.h>
#import <sys/sysctl.h> 
```

`sysctlbyname("hw.machine", NULL, &size, NULL, 0);`当我在外部使用该函数时，`dispatch_once`编译器在 . 当我在第二个参数的块内使用它时`dispatch_once`，我收到此错误：

```
No matching function for call to 'sysctlbyname' 
```

这是完整的代码：

```
#import <sys/types.h>
#import <sys/sysctl.h>

NSString *GetMachineName(void) {
  static NSString *machine = nil;

  if (nil == machine) {
    size_t size;

    sysctlbyname("hw.machine", NULL, &size, NULL, 0); // DEFINED IN SYSCTL.H

    static dispatch_once_t once;
    dispatch_once(&once, ^ {
      // Set 'oldp' parameter to NULL to get the size of the data
      // returned so we can allocate appropriate amount of space
      sysctlbyname("hw.machine", NULL, &size, NULL, 0); // DEFINED IN SYSCTL.H

      // Allocate the space to store name
      char *name = (char *)malloc(size);

      // Get the platform name
      sysctlbyname("hw.machine", name, &size, NULL, 0);

      // Place name into a string
      machine = [NSString stringWithCString:name encoding:NSASCIIStringEncoding];

      // Done with this
      free(name);
    });

    if ([machine isEqualToString:@"iPhone1,1"]) return IPHONE_1G_PLATFORM;
    if ([machine isEqualToString:@"iPhone1,2"]) return IPHONE_3G_PLATFORM;
    if ([machine isEqualToString:@"iPhone2,1"]) return IPHONE_3GS_PLATFORM;
    if ([machine isEqualToString:@"iPhone3,1"]) return IPHONE_4G_PLATFORM;
    if ([machine isEqualToString:@"iPod1,1"]) return IPOD_1G_PLATFORM;
    if ([machine isEqualToString:@"iPod2,1"]) return IPOD_2G_PLATFORM;
    if ([machine isEqualToString:@"iPod3,1"]) return IPOD_3G_PLATFORM;
    if ([machine isEqualToString:@"iPad1,1"]) return IPAD_1G_PLATFORM;
    if ([machine isEqualToString:@"iPad2,1"]) return IPAD_2G_PLATFORM;
    if ([machine isEqualToString:@"i386"] || [machine isEqualToString:@"x86_64"]) return SIMULATOR_PLATFORM;
    return NULL;
  }

  return machine;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:30:35.190

为了解决这个问题，我需要将声明`size`放在块内，因为事实上，参数没有用 装饰`__block`，所以它编译为 a `const`，与 . 的参数列表不匹配`sysctlbyname`。由于函数重载，编译器发现该函数不存在。

TLDR：编译器认为我使用的函数是

```
int sysctlbyname(const char *, void *, const size_t*, void *, size_t); 
```

而不是

```
int sysctlbyname(const char *, void *, *size_t, void *, size_t); 
```

# java - 向 JAXWS 服务 JAXB 上下文动态添加新元素

> ID：14526743
> 
> 赞同：2
> 
> 时间：2013-01-25T17:03:49.390
> 
> 标签：java, web-services, jaxb, jax-ws, cxf

我正在使用 CXF 公开一个包含 3000 多个类的巨大模型。
在大多数情况下，客户只会使用 3000 个类中的 100 个，但我事先不知道会使用哪些类。
在启动时加载所有 3000 需要大量内存并且需要很长时间，这使得开发过程变得困难。
我正在寻找一种方法来将一组最小的类添加到上下文中，然后根据需要添加缺失的类。
困难的部分是如何以一种通用的方式来完成它，而不需要每个服务都明确地处理它。另一个挑战是替换正在运行的 CXF 服务的 JAXB 上下文。
任何关于如何实施这种解决方案的想法都将不胜感激。

# vb.net - 项目设计，多表单，多控件

> ID：14526746
> 
> 赞同：0
> 
> 时间：2013-01-25T17:04:09.547
> 
> 标签：vb.net, winforms, oop

我正在实施一个包含很多表单和控件的项目。如果我选择为用户动态创建弹出表单以指定选项，那么获取控制细节以保存在列表或其他内容中的最佳方法是什么，在用户完成指定特定选项（用于任务）时终止表单和然后加载一个表单，其中包含特定于用户选择的选项（在表单被杀死之前）。当然，VB.NET 和 MS 开发了一种新方法，可以从表单中删除所有内容，以便可以将这些信息保存在 RAM 内存中，然后在通过 Dim myform 将表单实例化为新表单时应用该信息（？）

为了澄清所问的问题，我将列举几个具体问题：

1.  在处理具有数百个控件的众多表单时，可以最好地实现哪个特定的 Visual Studio (VB.NET 2012) 工具以最大限度地减少内存消耗。可能给出代码示例或指针。

2.  Visual Studio (VB.NET 2012) 中存在什么特定机制来通过例如流将控制数据序列化到注册表或磁盘以在选择“应用”按钮后保存数据，以便特定的 GUI 可以进行垃圾收集（“ GC”）。当再次需要控件时，获取上次保存的数据并填充控件。

3.  已被证明是 Visual Studio (VB.NET 2012) 中最有效（内存效率）的方法，可最大限度地减少 GUI 消耗的内存泄漏。

似乎有一些信息指向使用 UserControls 和 XMLSerialize，但是，关于显式执行此操作所需的工作流的信息很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:38:38.797

如果您需要根据上下文动态显示不同的选项集，那么我建议`UserControl`为每个上下文单独制作一个。然后，根据上下文，您可以将适当的用户控件添加到弹出窗口中。就数据而言，我强烈建议您将数据模型与 UI 分开。您应该以某种方式对代码进行分层，以便能够在内存中保留数据的副本，而不必在内存中保留 UI 的副本。换句话说，您应该能够加载和卸载许多表单实例，这些实例都针对内存中的相同数据副本进行操作。当你加载一个表单或用户控件时，你应该简单地给它一个对它应该显示/维护的适用数据对象的引用。

# actionscript-3 - 我尝试让 actionscript3 中的 4 个 GradientFills 使用相同的代码，但其中两个工作，另外两个不工作

> ID：14526749
> 
> 赞同：0
> 
> 时间：2013-01-25T17:04:13.600
> 
> 标签：actionscript-3

我正在尝试绘制四个形状并用渐变填充填充它们，但其中只有两个按我的预期显示，另外两个不起作用。问题是，我对四个渐变填充使用完全相同的代码。

```
import flash.display.Sprite;
import flash.geom.Matrix;
import flash.display.GradientType;  

drawBackground();

function drawBackground():void{
var ground:Sprite = new Sprite();
addChild(ground);
ground.graphics.lineStyle(2,0x999999);
ground.graphics.beginFill(0xE6E6E6, 0.5);
ground.graphics.drawRect(0,0,640,610);
ground.graphics.endFill();
ground.x = 30;
ground.y = 60;

var mat:Matrix;  
var color:Array;
var alphas:Array;
var ratio:Array;

mat=new Matrix(); 
color=[0xD5D5D5,0x999999];
alphas=[0.5, 0.8];
ratio=[0,255];

var topwall:Sprite=new Sprite();
mat.createGradientBox(700,60,Math.PI/2);
topwall.graphics.lineStyle(2,0x999999);
topwall.graphics.beginGradientFill(GradientType.LINEAR, color, alphas, ratio, mat);
topwall.graphics.moveTo(0, 0);
topwall.graphics.lineTo(700, 0);
topwall.graphics.lineTo(670, 60);
topwall.graphics.lineTo(30,60);
this.addChild(topwall);

var leftwall:Sprite=new Sprite();
mat.createGradientBox(30,700,0);
leftwall.graphics.lineStyle(2,0x999999);
leftwall.graphics.beginGradientFill(GradientType.LINEAR, color, alphas, ratio, mat);
leftwall.graphics.moveTo(0, 0);
leftwall.graphics.lineTo(0,700);
leftwall.graphics.lineTo(30, 670);
leftwall.graphics.lineTo(30,60);
this.addChild(leftwall);

var bottomwall:Sprite=new Sprite();
mat.createGradientBox(700,700,-Math.PI/2);
bottomwall.graphics.lineStyle(2,0x999999);
bottomwall.graphics.beginGradientFill(GradientType.LINEAR, color, alphas, ratio, mat);
bottomwall.graphics.moveTo(30, 670);
bottomwall.graphics.lineTo(670,670);
bottomwall.graphics.lineTo(700, 700);
bottomwall.graphics.lineTo(0,700);
this.addChild(bottomwall);

var rightwall:Sprite=new Sprite();
mat.createGradientBox(30,700,0);
rightwall.graphics.lineStyle(2,0x999999);
rightwall.graphics.beginGradientFill(GradientType.LINEAR, color, alphas, ratio, mat);
rightwall.graphics.moveTo(670, 60);
rightwall.graphics.lineTo(670,670);
rightwall.graphics.lineTo(700, 700);
rightwall.graphics.lineTo(700,0);
this.addChild(rightwall);
} 
```

目前 topwall 和 leftwall 表现正常，但其余两个填充单色。任何人都可能知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:40:28.187

您需要对 createGradientBox 进行一些调整：

```
var bottomwall:Sprite=new Sprite();
mat.createGradientBox(700,30,-Math.PI/2, 0, 670);
bottomwall.graphics.lineStyle(2,0x999999);
bottomwall.graphics.beginGradientFill(GradientType.LINEAR, color, alphas, ratio, mat);
bottomwall.graphics.moveTo(30, 670);
bottomwall.graphics.lineTo(670,670);
bottomwall.graphics.lineTo(700, 700);
bottomwall.graphics.lineTo(0,700);
this.addChild(bottomwall);

var rightwall:Sprite=new Sprite();
mat.createGradientBox(30,700,Math.PI, 670, 0);
rightwall.graphics.lineStyle(2,0x999999);
rightwall.graphics.beginGradientFill(GradientType.LINEAR, color, alphas, ratio, mat);
rightwall.graphics.moveTo(670, 60);
rightwall.graphics.lineTo(670,670);
rightwall.graphics.lineTo(700, 700);
rightwall.graphics.lineTo(700,0);
this.addChild(rightwall); 
```

# backbone.js - Backbone：刷新当前路由

> ID：14526752
> 
> 赞同：22
> 
> 时间：2013-01-25T17:04:17.597
> 
> 标签：backbone.js

我注意到骨干路由器的导航方法不会重新加载当前路径。

例如，当前路线是`/view1`并且您调用`router.navigate('view1',{trigger:true});`. 它不会再次激活路由事件。

这是我测试的代码：

```
<html>
<head>
    <title>Testing123</title>
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script src="http://underscorejs.org/underscore-min.js" type="text/javascript"></script>
    <script src="http://backbonejs.org/backbone-min.js" type="text/javascript"></script>
    <style type="text/css" media="screen">
        #box{
            width:400px;
            height:400px;
            background-color:red;
        }       
    </style>
</head>
<body>
    <button id='view1'>view1</button>
    <button id='view2'>view2</button>
    <br/>
    <div id='box'>

    </div>
    <script type="text/javascript" charset="utf-8" async defer>
        var SystemRouter = Backbone.Router.extend({

          routes: {
            "view1":"view1",
            "view2":"view2"
          },

          view1: function() {
            console.log('view1');
          },

          view2: function() {
            console.log('view2');
          }

        });

        var sys = new SystemRouter();
        Backbone.history.start({pushState: true, root: "/test/routing.html#/"});
        sys.navigate('view1');

        $('#view1').click(function(){
            sys.navigate('view1',{trigger:true});
        });

        $('#view2').click(function(){
           sys.navigate('view2',{trigger:true});
        }); 
    </script>
</body>
</html> 
```

上面的代码将加载`/view1`路径，打印出'view1'。但是，如果您尝试单击按钮导航到`/view1`路径，它将被忽略。

我的问题是：如果路由事件与当前路径相同，我如何调用它？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-25T18:21:27.247

有几件事可以做到这一点。如果您预计导航到 url 中已经存在的路由，则首先检查当前路由片段`Backbone.history.fragment`并查看它是否与您要激活的路由相同。如果是这样，那么您可以执行以下任何操作：

1.  你可以直接调用路由方法：`sys.view1();`

2.  您可以将片段设置为另一个死路线，然后返回您想要的路线。

    `sys.navigate('someDeadRoute'); sys.navigate('view1',{trigger: true});`

3.  您可以停止并重新启动路由器：

    `Backbone.history.stop(); Backbone.history.start()`

    这将再次拾取路线并运行它。

我想我会选择#1。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-09-11T01:22:18.220

您可以调用`Backbone.history.loadUrl`.

刷新当前页面：

`Backbone.history.loadUrl(Backbone.history.fragment);`

或作为链接处理程序：

```
// `Backbone.history.navigate` is sufficient for all Routers and will trigger the
// correct events. The Router's internal `navigate` method calls this anyways.
var ret = Backbone.history.navigate(href, true);

// Typically Backbone's history/router will do nothing when trying to load the same URL.
// But since we want it to re-fire the same route, we can detect 
// when Backbone.history.navigate did nothing, and force the route.
if (ret === undefined) {
    Backbone.history.loadUrl(href);
} 
```

# sql-server-2008-r2 - 没有检索到记录时如何向 Management Studio 输出区域显示消息

> ID：14526754
> 
> 赞同：0
> 
> 时间：2013-01-25T17:04:26.877
> 
> 标签：sql-server-2008-r2

我正在寻找在 Microsoft SQL Server Management Studio R2 上提供以下操作的解决方案：

*   从数据库中检索一些记录，表 EX
*   如果查询没有返回记录，则在 MS SQL Server **Management Studio 输出部分区域**中显示一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:04:38.490

使用以下代码

```
declare @n int
set @n = (select ISNULL(count(*),0) from table_name)
if(@n=0)
print 'not result'
else
select * from table_name 
```

或者

```
if(select count(*) from table_name)=0
print 'not result'
else
select * from table_name 
```

# sql - 在 SQL 中获得更好性能的不同方法。预订示例

> ID：14526755
> 
> 赞同：1
> 
> 时间：2013-01-25T17:04:27.143
> 
> 标签：sql, sql-server, sql-server-2008, sqlite, tsql

嗨，我是编程方面的新手，尤其是数据库设计方面的新手。我刚刚开始使用数据库，我想知道其中哪一种设计给了我更好的性能并且更合理。我已经建立了预订酒店表这样的：

为每个 Resevation 设置 DateIn 和 DateOut ![为每个 Resevation 设置 DateIn 和 DateOut](../Images/24c923e2f8a12615f56821ba602a22fc.png)

为每个房间/天设置标志 ![为每个房间设置标志](../Images/83982b2f8a0f695c3641e9b1d6c7295a.png)

假设我们最多有 100 个房间，所以如果我想为第二张图片生成表格（50 年）大约需要 15MB((100(room)*8(bit)+3(Date))*365(Day)*50(年））的容量，但我认为当我想查询时，它会给我更好的性能。第一张图片的查询更复杂，如果你给我理由或更好的方法，我认为性能会降低。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:25:04.513

我的意思是，这确实与您计划如何访问和更改数据有关。我几乎在所有情况下都推荐第一个，但我不会否认可能存在第二个更好的边缘情况。我怀疑你的情况是这样的。

第一个为人们对预订的看法提供了一个更合理的近似值（这很好）——它还巧妙地编码了谁将在哪天住在哪个房间，将其与您的数据库的其余部分相关联，并考虑到预订信息，客人信息。当您尝试从您收集的数据中收集洞察力时，这些为您提供了重新构想数据关系的能力。例如。十年后，如果 CEO 说：“嘿，我们历史上一年中最受欢迎的日期是什么？使用“预订”模型，您可以轻松编写程序查询来找出答案。使用“日期” /Room Matrix 模型，您将不得不手动检查每一列。毛。

虽然第二种模式非常适合从不打算改变的酒店，但如果房间需要轮换放置怎么办？另一个带有布尔值的 100 列表，哪些房间在哪几天可供公众使用？将混乱与混乱混为一谈？如果加一个翅膀呢？您是否要在此表中添加另外 25 列等？它可能会为您提供“哪些房间可用，知道吗？”的一些运营效率。- 但是您将如何构建“哪些房间将在 8 月 3 日至 6 日期间可用？”的查询？

请记住，在关系数据库中，您要根据列中的值选择一组特定的行，您将很难根据行值选择一组列。

# regex - 电话号码验证正则表达式

> ID：14526759
> 
> 赞同：0
> 
> 时间：2013-01-25T17:04:33.377
> 
> 标签：regex, jquery-validation-engine

我正在使用以下正则表达式来验证电话号码

```
/^(?!([^-]*-){5})(\+\d+)?\s*(\(\d+\))?[- \d]+$/gi 
```

如果输入是假设**+51 (0) 989009890**它是有效的。但是当输入为**0051 (0) 989009890 时**。我是 REGEX 的新手，所以找不到可能的解决方案。

电话号码为以下格式时有效。

1.  0xxxxxxxxxxx
2.  +xx xxxxxxxxxxxx
3.  +xxxxxxxxxxxx
4.  +xx (x) xxxxxxxxx
5.  00xxxxxxxxx
6.  00xx (x) xxxxxxxxx

这里 x 表示数字 0-9。() 中的数字限制为 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:10:14.527

如果您也打算接受`0051 (0) 989009890`，问题是 (+\d+)？旨在处理输入中括号之前的位，但它需要存在“+”。您可以通过使用“？”使其成为可选来更改它，例如：

```
/^(?!([^-]*-){5})(\+?\d+)?\s*(\(\d+\))?[- \d]+$/gi 
```

或者，如果 '00xxx' 应该是 '+xxx' 的替代品（即，必须存在 '+' 或 '00' ），那么您可以使用：

```
/^(?!([^-]*-){5})(\+\d+|00\d+)?\s*(\(\d+\))?[- \d]+$/gi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:14:07.493

我想这就是你要找的

```
^(?!([^-]*-){5,})(\+?\d+)?\s*(\(\d{1,3}\))?\s*[- \d]+$ 
```

# git - 是否可以仅从远程存储库克隆一个文件夹？

> ID：14526760
> 
> 赞同：1
> 
> 时间：2013-01-25T17:04:35.010
> 
> 标签：git, download, clone

我只想从远程 git 存储库下载 2 个文件夹。在这种情况下是 ubuntu 内核 git 存储库。
如果我只想要 2 个文件夹，下载所有内核是浪费时间和带宽。
有没有办法用 git 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:14:05.423

不，不是你问的方式。但是您可以执行以下操作之一：

1.  下载 tarball——存储库的 web-ui 应该提供这样的选项，否则您可以使用`git archive`（[手册页](http://git-scm.com/docs/git-archive)、google 和 SO 将帮助您使用它）；或者
2.  使用 --depth 开关进行浅克隆；这将仅下载给定数量的提交，因此您不会获得整个历史记录。[`git clone`手册页](http://git-scm.com/docs/git-clone)有更多关于它的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:18:13.863

不，您不能创建部分克隆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T17:29:05.313

似乎 Git**无法**实现这一点。

我认为“**稀疏结帐**”会起作用，但正如@HolgerJust 所说：

> 这仍将下载完整的远程存储库。它只是不会将所有文件检出到工作副本中，但它们仍然在本地索引中可用。

他是对的。

* * *

~~是的你可以。您可以使用[**稀疏结帐**](http://schacon.github.com/git/git-read-tree.html#_sparse_checkout)。~~

这是一个简单的例子：

```
$ mkdir destinationFolder
$ cd destinationFolder
$ git init
$ git remote add origin git@github.com:Kjuly/iPokeMon.git
$ git config core.sparseCheckout true
$ echo 'Pokemon/Models/*' > .git/info/sparse-checkout
... echo more if you need
$ git pull origin dev 
```

最后，您将获得文件：

> 目的地
> 文件夹 - 口袋妖怪
> - - 模型

# c# - Await 阻塞 UI 线程，网络相关

> ID：14526761
> 
> 赞同：3
> 
> 时间：2013-01-25T17:04:35.393
> 
> 标签：c#, .net, windows-8, windows-runtime, async-await

我在我处理按钮单击的 Windows 应用商店应用程序中有这段代码。但不知何故，当我在极少数情况下单击此按钮时，UI 会冻结。当我连接到比我通常连接的网络更远的 Wi-Fi 网络时，通常会发生这种情况。考虑到我是从 Internet 下载 RSS 提要，这很可能与我使用 async/await 关键字有关。如果我正确理解了 async/await 的机制，那么 UI 线程根本不应该阻塞。我在这里错过了什么吗？

```
 private async void Add_Click(object sender, RoutedEventArgs e)
    {
        AddButton.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        DownloadProgressRing.Visibility = Windows.UI.Xaml.Visibility.Visible;
        DownloadProgressRing.IsActive = true;

        RssData rssData = App.Current.Resources["rssData"] as RssData;
        Uri uri = FixUrl(RssUrl.Text);

        if (uri != null)
        {
            newRssFeed = new RssFeed(uri.ToString());
            Task<bool> success = newRssFeed.RetrieveFeed();
            if (await success)
            {
                SubmitButtonPanel.Visibility = Windows.UI.Xaml.Visibility.Visible;
                FeedTitleTextBox.Text = newRssFeed.Title == null ? String.Empty : newRssFeed.Title;
            }
        }
    } 
```

RssFeed 的构造函数：

```
 public RssFeed(string url)
    {
        Url = url; 
    } 
```

RetrieveFeed 函数：

```
 public async Task<bool> RetrieveFeed()
    {
        if (Url != null)
        {
            try
            {
                SyndicationClient sc = new SyndicationClient();
                SyndicationFeed sf = await sc.RetrieveFeedAsync(new Uri(Url, UriKind.Absolute));
                if (sf != null)
                {
                    ValidateAndInitFeed(sf);
                    return true;
                }
            }
            catch (Exception ex)
            {
            }
        }

        return false;
    }

    private void ValidateAndInitFeed(SyndicationFeed feed)
    {
        if (feed.Title != null)
            Title = feed.Title.Text;
        if (feed.ImageUri != null)
            Image = feed.ImageUri.ToString();
        if (feed.Subtitle != null)
            Subtitle = feed.Subtitle.Text;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:26:17.380

Try calling `RetrieveFeed()` on a background thread. Perhaps processing the request or response is what takes a lot of time and if it is started on UI thread - it will run on UI thread.

```
Task<bool> success = null;
await Task.Run(
    () => success = newRssFeed.RetrieveFeed()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:07:46.397

使用`async`/`await`看看还行。您引用了远程 Wi-Fi 连接，这可能纯粹是由于信号较弱，因此带宽较差。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:51:06.717

我的一些 Windows Phone 应用程序也有同样的问题，我没有任何好的解释，唯一好的解释是 Killercam 提到的。

当您调用异步方法时，它不会立即返回（我假设这些方法不是类似的`return Task.Factory.StartNew(...);`），它会做一些工作，设置回调然后返回，如果它所做的工作与网络连接有关，在慢速连接中，这可能会阻止该功能。

测试此症状的一个好方法是连接到带有 wifi 的路由器，然后断开路由器与互联网的连接，您将拥有与您描述的相同的行为。

# javascript - 动态添加值后在选择框中选择值

> ID：14526763
> 
> 赞同：0
> 
> 时间：2013-01-25T17:04:39.623
> 
> 标签：javascript, html

在输入文本框的值并单击添加按钮后，如何在选择框（下拉菜单）中选择我新添加的值？

```
<html>
  <head>
    <script>
      function addref(value) {
        var x = document.getElementById("thebox");
        var option = document.createElement("option");
        option.text = value
        x.add(option,x.options[null])
      }
    </script>
  </head>
  <body>
    <form>
      <select id="thebox">
      </select>
    </form>
    <br>
    <input type="text" id="theinput"/>
    <input type="button" value="Add" name="B1" onclick="addref(document.getElementById('theinput').value)"/>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:08:12.767

尝试这个：

`x.selectedIndex = x.options.length - 1;`

在此之后，您可以使用检索值

```
var val = x.value; 
```

或者

```
var val = x[x.selectedIndex].value; 
```

[`<select>`在 MDN 上](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement)。

此外，而不是`x.add(option,x.options[null])`简单地使用`x.add(option)`. 这会将新创建`option`的添加到`options`. 第二个参数应该是一个整数，它表示添加新选项的索引位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:15:21.640

要获取所选值，请使用以下命令：

```
var e = document.getElementById("thebox");
var theValue = e.options[e.selectedIndex].value; 
```

要获取选定的文本，请使用以下命令：

```
var e = document.getElementById("thebox");
var theText = e.options[e.selectedIndex].text; 
```

如果它是动态添加的，则无关紧要。

# python - 令牌错误：Python 中多行语句中的 EOF ......这是什么意思？

> ID：14526768
> 
> 赞同：3
> 
> 时间：2013-01-25T17:04:59.187
> 
> 标签：python, token, eof

我刚刚开始学习如何编码，并且正在学习 Python。我正在尝试编写一个程序，每次用户键入 1 时都会打印一个 ASCII 艺术，但是当我尝试运行该模块时，它给了我标题中的错误。

这是我的代码：我哪里出错了？

```
yORn = int(input("Type 1 to run the program, Type 2 to Exit:  ")
while yORn = 1:
   Name = str(input("What is your name?"))
   print("      1111111111111111111111     ")
   print("      1                    1     ")
   print("      1                    1     ")
   print("      1   Hello...         1     ")
   print("      1        ", Name,"   1     ")
   print("      1                    1     ")
   print("      1                    1     ")
   print("      1111111111111111111111___  ")
   print("             11111111          | ")
   print("     ------------------------- O ")
   print("    1.............._... ... 1    ")
   print("   1...................... 1     ")
   print("  -------------------------      ")
   yORn = int(input("Type 1 to run the program, Type 2 to Exit:  ")
print ("GoodBye") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T17:23:07.650

你已经得到了直接的答案（缺少括号），但如果你正在做这样的事情，我会建议另一种方法，并使用多行字符串（使用三引号字符串）和字符串格式：

```
ascii_art = """
    1111111111111111111111     
    1                    1     
    1                    1     
    1   Hello...         1     
    1{name:^20}1     
    1                    1     
    1                    1     
    1111111111111111111111___  
           11111111          | 
   ------------------------- O 
   .............._... ... 1    
 1...................... 1     
-------------------------          
"""

print ascii_art.format(name='Kevin') 
```

`{name:^20}`获取参数`name`并在 20 个字符内集中对齐，因此`^20`它很好地适合块（计算机显示器？）....

示例输出：

```
 1111111111111111111111     
    1                    1     
    1                    1     
    1   Hello...         1     
    1       Kevin        1     
    1                    1     
    1                    1     
    1111111111111111111111___  
           11111111          | 
   ------------------------- O 
   .............._... ... 1    
 1...................... 1     
------------------------- 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T17:06:53.837

您忘记在两个地方关闭括号：

```
yORn = int(input("Type 1 to run the program, Type 2 to Exit:  ")) # < 2 closing parenthesis here 
```

再次在您的代码末尾。

请注意，您的`while`陈述也有错误；`=`是分配，你的意思是`==`：

```
while yORn == 1: 
```

# android - 如何将结果发送回android中的先前活动？

> ID：14526771
> 
> 赞同：-2
> 
> 时间：2013-01-25T17:05:13.593
> 
> 标签：android, android-intent

我使用三个活动 ActiviytA、ActivityB 和 ActivityC。来自 ActivityA 具有 onActivtResult 功能我需要来自 Activityc 的结果在 b/wi 中通过 activityB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:09:10.690

那很容易。您还可以在 ActivityB 中实现 onActivityResult，然后将其传递回活动 A：

```
if(RESULT_OK)
{
//GET data passedback
Intent returnIntent = new Intent();
returnIntent.putExtra(your extra data);
setResult(RESULT_OK, returnIntent);
finish()
} 
```

这就是我一直使用我的主页按钮实现的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:21:09.187

如果我理解得很好，您从 ActivityA 打开 ActivityB，然后从 ActivityB 打开 ActivityC。您希望 ActivityA 从 ActivityC 获取值。

可能最简单的方法是将值存储为静态值，然后直接从类中读取它们。

如果你想使用 StartActivityForResult（这样你可以从 onActivityResult 中获取结果），你应该让 ActivityB 接收来自 C 的结果，然后让 ActivityB 将结果传递给 ActivityA：

ActivityA 实现 ResultsReciever。然后启动活动 B，并检索调用活动 (ActivityA)

```
interface ResultsReciever{
    executeSomething(ArrayList values);
} 
```

声明实现接口的ActivityA：

```
public class ActivityA extends Activity implements ResultsReciever 
```

在 Activity B 上，在 onStart 方法中：

```
ResultsReciever caller = (ResultsReciever)getCallingActivity(); 
```

然后 ActivityB 用 StartActivityForResult() 启动 ActivityC。在 ActivityB 的 onActivityResult 中，您可以调用：

```
caller.executeSomething(whatever); 
```

# java - Log4j2 自动配置

> ID：14526772
> 
> 赞同：5
> 
> 时间：2013-01-25T17:05:14.067
> 
> 标签：java, log4j, log4j2

我在正确应用*log4j2.xml*自动配置时遇到问题，我认为这与我的文件夹排列有关。
我正在使用*maven*添加 log4j2 库并将我的项目安排如下：
- 一个项目包含所有“公共”类，由我的系统的服务器和客户端使用。
- 另一个“核心”项目 - 服务器端应用程序。
两个项目都使用相同的通用包层次结构（如*com.foo.specific.package*）

在 Common 项目中，我定义了一个记录器包装器：

```
public class LogWrapper
{
    static Logger systemParentLogger = LogManager.getLogger("com.foo");

    public static Logger getLogger(Class<?> cls)
    {
        return LogManager.getLogger(cls.getName());
    }
} 
```

此外，Common 项目包含**META-INF下的***log4j2.xml*文件（以及用于 Hibernate 的 persistence.xml 文件）。

 **```
<?xml version="1.0" encoding="UTF-8"?>
<configuration name="PRODUCTION" status="OFF">

    <appenders>
        <appender type="RollingFile" 
            name="MyFileAppender" 
            fileName="logs/app.log" 
            filePattern="logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz">
            <layout type="PatternLayout" pattern="%d %p %C{1.} [%t] %m%n"/>
        </appender>
    </appenders>

    <loggers>
        <root level="error">
            <appender-ref ref="MyFileAppender"/>
        </root>

        <logger name="com.foo" level="info" additivity="false">
            <appender-ref ref="MyFileAppender"/>
        </logger>

        <logger name="org.hibernate" level="error">
            <appender-ref ref=MyFileAppender"/>
        </logger>
    </loggers>

</configuration> 
```

在 Core 项目中运行示例代码（使用我编写的 LogWrapper 和一些 JPA voodoo）时，我仍然可以看到 INFO hibernate 日志，并且没有创建日志文件。我应该声明，在调试代码时，我可以看到获取的记录器被赋予了一些奇怪的值“ **com.foo.core.persistence.PersistenceXMLTest:ERROR in sun.misc.Launcher$AppClassLoader@2f600492** ”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:46:07.023

log4j2.xml*被*放置在一个“文件夹”中，在 Eclipse 术语中是“不在类路径上”。**将META-INF**
更改为*“源文件夹”*解决了这个问题。 此外，未正确定义*log4j2.xml文件。*这些是需要的修改：

 ****```
<?xml version="1.0" encoding="UTF-8"?>
<configuration name="PRODUCTION" status="OFF">

<appenders>
    <RollingFile name="MyFileAppender" 
        fileName="../Logs/app.log" 
        filePattern="../Logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz">
        <PatternLayout>
            <pattern>%d %p %C{1.} [%t] %m%n</pattern>
        </PatternLayout>
        <Policies>
            <OnStartupTriggeringPolicy />
            <TimeBasedTriggeringPolicy interval="6" modulate="true"/>
            <SizeBasedTriggeringPolicy size="250 MB"/>
        </Policies>
    </RollingFile>
</appenders>

<loggers>
    <root level="error">
        <appender-ref ref="MyFileAppender"/>
    </root>

    <logger name="com.foo" level="info" additivity="false">
        <appender-ref ref="MyFileAppender"/>
    </logger>
</loggers>

</configuration> 
```

仍然无法将*org.hibernate*记录器重定向到我的日志，但至少我让记录器工作******

# emacs - 如何更改 emacs virtualenv.el 的 virtualenv

> ID：14526774
> 
> 赞同：0
> 
> 时间：2013-01-25T17:05:20.480
> 
> 标签：emacs, elisp, virtualenv

我尝试使用[此处](https://github.com/aculich/virtualenv.el)发布的 virtualenv virtualenv.el 文件。

但是我设置了错误的目录。（此外，它似乎需要我将 virtualenvs 放在 .virtualenv 目录中，而不是放在我在机器上编写它们的不同目录中。）

我怎样才能把它改回来？现在，当我跑步时，`M-x virtualenv-workon`我没有第一次的相同介绍提示。

**更新**

按照评论和文档中留下的注释，我将以下文件添加到我的项目文件夹中：

```
/home/fred/projectname/.dir-locals.el 
```

这包含以下内容：

```
((nil . ((virtualenv-workon . "venv")
         (virtualenv-default-directory . "/home/fred/projectname/venv")))) 
```

但是，当我在我的项目目录中打开 emacs 并键入`M-x virtualenv-workon`它时，仍然只找到本地（默认）而不是 venv。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T21:00:54.240

我只是有同样的问题。我知道该帖子较旧并且 virtualenv.el 已被贬低，但万一其他人也偶然发现了这一点：

当您第一次运行`M-x virtualenv-workon`时，它会在您的 .emacs 文件中创建一个条目。该文件应该在您的主目录中找到。该条目位于 custom-set-variables 下，称为 virtualenv-root。您可以打开文件并手动将路径调整到您想要的任何位置。

# git - 是否可以让本地 Git 分支与远程 SVN 存储库一起使用？

> ID：14526780
> 
> 赞同：12
> 
> 时间：2013-01-25T17:05:44.133
> 
> 标签：git, svn

我们有一个包含源代码的 SVN 存储库。我们真的很想使用本地 Git 分支来开发新功能并利用合并算法等 Git 功能。

那可能吗？如果是，有人可以提供一些有关如何执行此操作的信息吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T17:11:16.690

是的。您将需要使用[git-svn](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)。

首先，您将需要`git svn clone`您的 SVN 存储库。请注意，这将从 SVN 服务器获取*每个修订*，并将历史重新创建为 Git 存储库。 **这些 Git 存储库不应由多个开发人员共享。**每个开发人员都应该`git svn clone`单独运行！

然后你可以使用标准的 Git 命令创建你想要的所有本地分支，因为你基本上有一个标准的 Git 存储库，其中包含一些额外的 SVN 元数据来跟踪 SVN 提交。您可以使用命令`git svn dcommit`将 Git 中的提交推送到 SVN 服务器（每个 Git 提交都将成为单独的 SVN 提交）。

我会考虑阅读一个好的[git-svn 教程](http://trac.parrot.org/parrot/wiki/git-svn-tutorial)。

（如果可能，您还可以考虑是否真的更愿意使用 git-svn 将您的 SVN 存储库转换为 Git 存储库，然后完全停止使用 SVN。）

# java - 无法启动 libgdx 桌面项目

> ID：14526784
> 
> 赞同：1
> 
> 时间：2013-01-25T17:06:10.550
> 
> 标签：java, libgdx, classnotfoundexception

我正在使用 Libgdx 开发一个 Android 应用程序。到目前为止一切都很好（我一直在模拟器中调试），但我需要设置一个桌面项目，所以我可以更快地测试应用程序（所以不是在模拟器上运行它，我可以在桌面应用程序上测试它）。

我按照 wiki 的说明进行了设置，添加了桌面版本，到目前为止一切顺利，没有编译器错误。但是当我尝试启动桌面应用程序时，我收到以下错误，甚至没有打开窗口：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/badlogic/gdx/Net
    at DesktopGame.main(DesktopGame.java:12)
Caused by: java.lang.ClassNotFoundException: com.badlogic.gdx.Net
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

DesktopGame.java 的第 12 行说：

```
new LwjglApplication(new UserStart(userID, appDefinitions), "Game", 1024, 600, false); 
```

其中 UserStart 是 ApplicationListener（使用自定义构造函数，因为我需要几个参数，此设置在 Android 上运行良好）。我不知道为什么找不到 com.badlogic.gdx.Net（而且我不知道为什么它正在寻找它，因为我没有使用网络功能）。

有谁知道会是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T21:55:18.843

解决了！嗯，有点。我使用来自 libgdx 的设置 UI 创建了一个新项目，然后将创建的桌面项目复制到我自己的项目中。我注意到主要区别在于我为 LwjglApplication 使用的构造函数，现在在这种情况下，我没有传递参数，而是使用 LwjglApplicationConfiguration 调用构造函数：

```
LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
cfg.title = "MyGame";
cfg.useGL20 = false;
cfg.width = 480;
cfg.height = 320;

...
new LwjglApplication(new UserStart(userID, appDefinitions), cfg); 
```

耶！我不确定这是否是主要问题，但至少现在有效。

感谢大家的评论和提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T21:22:18.450

我刚刚为eclipse添加了gradle插件，我的问题就解决了。可以按照此链接[http://estiloasertivo.blogspot.com/2013/03/tutorial-howto-install-and-configure.html上的说明添加 Gradle 插件](http://estiloasertivo.blogspot.com/2013/03/tutorial-howto-install-and-configure.html)

# authentication - 测试 ServiceStack 基本身份验证

> ID：14526794
> 
> 赞同：2
> 
> 时间：2013-01-25T17:06:47.243
> 
> 标签：authentication, servicestack, basic-authentication

ServiceStack 提供了一个在代码中测试不同身份验证方法的示例。我试图构建一个简单的浏览器测试，只是为了看看它是如何工作的。我基本上使用了这个：[ServiceStack Web Service with Basic Authentication and SetCredentials](https://stackoverflow.com/questions/13573793/servicestack-web-service-with-basic-authentication-and-setcredentials)作为基本模板。

当我转到元数据页面时，我看到 Auth 被列为可用操作之一。

我需要输入什么作为 URL 来测试 Auth 是否有效？例如 localhost/ServiceStack.Hello/hello/suraj 是我为测试 hello world 应用程序而输入的。如何测试身份验证？

Ps：这可能是一个菜鸟问题，所以我提前道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:25:03.913

有关如何使用 C# 客户端测试 BasicAuth 的示例，请参阅 ServiceStack 的[AuthTests.cs 。](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/AuthTests.cs)

如果您想手动执行此操作，则必须使用 Fiddler 之类的工具，它可以让您手动指定 BasicAuth `Authorization: Basic ...`HTTP 标头。有关示例，请参阅[有关 HTTP BasicAuth 的维基百科参考。](http://en.wikipedia.org/wiki/Basic_access_authentication)

# assembly - 分段错误：11 装配

> ID：14526809
> 
> 赞同：0
> 
> 时间：2013-01-25T17:07:34.920
> 
> 标签：assembly

为什么我会从以下代码中得到分段错误？

```
.text
        .globl  start
start:
        pushq   %rbp
        movq    %rsp, %rbp
        movq    $0xBEEFF00DBEEFF00D, %rax
        pushq   %rax
        movq    $0xF00DBEEFF00DBEEF, %rax
        pushq   %rax
        movq    %rbp, %rsp
        popq    %rbp
        ret 
```

错误：

```
Segmentation fault: 11 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:12:55.203

如果`start`是你程序的入口点，你就不能`ret`进入操作系统；你应该`_exit`。

在您可能正在使用的 Linux (x86-64) 上，执行此操作而不是`ret`：

```
 movq $60, %rax # %rax = _exit() system call
    xorq %rdi, %rdi # %rdi = 0 normal program return code
    syscall 
```

# drupal - Drupal 7 将过滤器价格范围显示为复选框

> ID：14526811
> 
> 赞同：2
> 
> 时间：2013-01-25T17:07:36.460
> 
> 标签：drupal, drupal-views, drupal-exposed-filter, hook-form-alter

我正在使用 Drupal 7 构建一个产品评论网站。产品评论搜索页面是使用 Views 3 和 Better Exposed Filters 构建的。我需要一个由价格范围作为复选框组成的价格字段的公开过滤器。我已经为具有适当范围的价格设置了一个分组的公开过滤器，使过滤器允许多项选择，然后实施 hook_form_alter 以将过滤器设置为以 BEF 复选框为主题。现在唯一的问题是过滤器的 where 子句使用 AND 子句而不是 OR 搜索范围。所以，我希望用户选择多个价格范围，结果包括任一价格范围内的产品，但搜索正在寻找两个范围内的产品，导致没有产品。

我曾尝试使用 hook_views_query_alter，但无法输出 dsm('test') 那么多。我认为这可能是因为视图使用了自动提交。

有谁知道我怎样才能让这个过滤器正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:12:07.983

正如过滤器部分的高级文档所说：

> 当使用带有“允许用户选择多个项目”选项的分组过滤器时，您可能希望将过滤器放在一个单独的组中，并将该组的运算符定义为“OR”。这可能是必要的，因为为了多次使用相同的过滤器，必须使用 OR 运算符应用所有选项，如果没有，您可能不会列出任何内容，因为通常组中的项目是互斥的。

因此，您可能想要创建一个新组（转到“重新排序选项卡”）并将运算符设置为 OR。然后，只需在该组内移动暴露的过滤器。

# sql - 选择带有名称列的查询

> ID：14526815
> 
> 赞同：1
> 
> 时间：2013-01-25T17:07:48.270
> 
> 标签：sql, oracle10g, rdbms

我想查询表值

```
Column1 Column2 Column3   
-----------------------
a         b      c    
d         e      f 
```

结果应该是

```
Column1 a
Column2 b
Column3 c
Column1 d
Column2 e
Column3 f 
```

基本上是一个键值对。甲骨文有可能吗？

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:10:27.707

你可以这样做`UNION ALL`，像这样：

```
SELECT 'Column1' as Name, Column1 as Value FROM my_table
UNION ALL
SELECT 'Column2' as Name, Column2 as Value FROM my_table
UNION ALL
SELECT 'Column3' as Name, Column3 as Value FROM my_table 
```

[这是关于 sqlfiddle 的演示](http://www.sqlfiddle.com/#!4/bc512/1)。

# c++ - QScriptEngine 队列槽连接

> ID：14526816
> 
> 赞同：1
> 
> 时间：2013-01-25T17:07:55.930
> 
> 标签：c++, qt

我正在考虑在项目中使用 QScriptEngine 作为与控制台应用程序交互的简单方法。用几行代码，我就能把所有东西都连接起来，而且效果很好（我可以在我的对象上调用槽，访问属性等），但似乎每当我通过脚本命令调用槽时，它就会被调用在 QScriptEngine 所在的线程上，而不是 QObject 所在的线程上。我的应用程序中有 3 个线程，并且 QObjects 上的插槽必须在它们各自的线程上调用。有没有一种简单的方法来告诉脚本引擎将插槽触发到 QObjects 线程的事件循环中？

# c# - DateTimePicker - 哪个子字段有焦点？

> ID：14526818
> 
> 赞同：1
> 
> 时间：2013-01-25T17:08:07.967
> 
> 标签：c#, winforms, datetimepicker

我有一个派生自`DateTimePicker`. 选择器控件已将格式设置为`DateTimePickerFormat.Custom`和自定义格式字符串设置为`yyyy.MM.dd HH:mm`，以便以格式显示日期`2013.01.25 21:45`。这里`2013`是当用户使用鼠标光标单击它或使用`TAB`键对其进行标签时突出显示的年份子字段。一旦突出显示，用户可以使用`UP`/`DOWN`键来增加/减少年份，或手动输入新的年份值。月、日、小时和分钟子字段也是如此。

对于我的应用程序，某些日期或时间值是被禁止的。例如，考虑以下规则：

*   约会只能安排在四舍五入到最接近的 10 分钟的时间。例如，您可以在 21:10 或 21:20 安排一个，而不是在 21:13。

为此，我需要知道当前关注哪个子领域。问题是我不知道如何确定这一点。如果我知道哪个子字段有焦点，我可以在代码中设计以下一组规则。

*   如果选择了分钟子字段，并且用户按下了`UP`键，则将时间增加 10 分钟。
*   如果选择了分钟子字段，并且用户按下了`DOWN`键，则将时间减少 10 分钟。
*   如果分钟子字段失去焦点，则将分钟向上或向下舍入到最接近的 10 分钟。

剩下的唯一问题..**我如何找到当前关注的子字段？**

注意：是的，我可以在事件中进行验证检查，`OnLeave`但我的应用程序要求完全跳过无效的日期时间值。另外，我已经检查了[这里](https://stackoverflow.com/questions/1846068/how-to-contol-the-time-interval-in-a-datetimepicker?rq=1)给出的解决方案。但我也倾向于将活跃的子领域作为一种练习。最后，如果它有任何用处，我在 Windows 7 x86 上使用 C# 4.0。

# sql - pg_dump：[archiver (db)] 连接到数据库“mydb”失败：致命：数据库“mydb”不存在

> ID：14526819
> 
> 赞同：5
> 
> 时间：2013-01-25T17:08:10.410
> 
> 标签：sql, postgresql, heroku, command-line, pg-dump

好的，按照我已经运行的[这些说明：](https://devcenter.heroku.com/articles/heroku-postgres-import-export#import)

```
$ PGPASSWORD=mypassword pg_dump -Fc --no-acl --no-owner -h localhost -U myuser mydb > mydb.dump 
```

在数据库所在的同一文件夹中（app_db.sql），但我不断收到：

```
pg_dump: [archiver (db)] connection to database "mydb" failed: FATAL:  database "mydb" does not exist 
```

为什么会发生这种情况，我能做些什么来解决它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T06:41:42.477

您严重误解了 PostgreSQL 的工作原理。

`app_db.sql`不是数据库，它是*数据库转储*。描述数据库中数据的一系列文本命令，可以重放这些数据以创建数据库。

它不像 Microsoft Access`.dbx`文件或 SQLite3 数据库文件，后者是存储在可以直接操作的单个文件中的数据库。使用 PostgreSQL 数据库的唯一方法是通过客户端/服务器连接到 PostgreSQL 服务器，该服务器将实际数据库内容存储在系统相关位置`/var/lib/pgsql`，您永远不需要直接操作。

要使用数据库转储，您必须使用以下命令*将其还原*到*新的空数据库*`psql`中，例如：

```
$ createdb mydb
$ psql -f app_db.sql mydb 
```

如果您尝试完全按照上面所写的方式运行它，这可能会因权限错误而失败。您需要为自己创建一个用户，授予该用户的所有权`mydb`，并可能进行编辑`pg_hba.conf`以允许自己根据您的系统设置进行身份验证。

对于具有 unix 登录名的用户，一个更现实的示例`bob`可能是：

```
$ sudo -u postgres createuser bob
$ sudo -u postgres createdb -O bob mydb
$ psql -f dpp_db.sql -1 -v ON_ERROR_STOP=1 mydb 
```

我强烈建议您阅读[PostgreSQL 教程](http://www.postgresql.org/docs/current/static/tutorial.html)和用户手册。

# ruby - `Enumerable#inject` 中的符号与 Proc

> ID：14526821
> 
> 赞同：3
> 
> 时间：2013-01-25T17:08:12.810
> 
> 标签：ruby, symbols, inject, enumerable, proc

鉴于`Enumerable#inject`可以将符号或块作为迭代中使用的方法，如[对此问题](https://stackoverflow.com/questions/14526290)的回答中所述，是否有任何理由将 the`&`与`Symbol#to_proc`within结合使用`Enumerable#inject`？以下对返回相同的结果：

```
[1, 2, 3, 4, 5].inject(:+)
[1, 2, 3, 4, 5].inject(&:+)

[:a, :b, :c].inject({a: {b: {c: 1}}}, :fetch)
[:a, :b, :c].inject({a: {b: {c: 1}}}, &:fetch) 
```

是否存在使用符号和使用块（由创建`&`）有不同结果的用例？有没有一种可以使用而另一种不能使用的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:33:37.987

如果您必须支持旧版本的 Ruby（1.8.6 或更早版本）并且您正在使用`Symbol#to_proc`为这些版本定义的库（如主动支持），则使用的版本`&`将起作用，而另一个则不起作用。

除此之外，两个版本之间的唯一区别是使用符号的版本更快，并且`&`如果重新定义，使用的版本会受到影响`Symbol#to_proc`——尽管我想不出有什么用处。所以不，如果您不需要支持 Ruby 1.8.6，那么没有理由不使用符号形式。

# node.js - Mongoose：使用来自 npm/node_modules 的模块提供的模型或模式

> ID：14526823
> 
> 赞同：4
> 
> 时间：2013-01-25T17:08:14.337
> 
> 标签：node.js, mongodb, mongoose

假设我有一个应用程序，它定义了一些模型并创建了全局 Mongoose 连接 ( `mongoose.connect(...)`)。该应用程序还依赖于`node_modules`目录中模块定义的一些模型。我遇到的问题是应用程序和单独的模块不共享相同的全局连接对象。

好的。与其让模块导出模型，不如只导出模式，主应用程序可以将其注册到连接中。在应用程序中会有类似的东西：

```
var SomeSchema = require('somemodule').SomeSchema;
mongoose.model('SomeModel', SomeSchema); 
```

不幸的是，这也不起作用。当模型被注册时，Mongoose 会检查给定的模式是否是`mongoose.Schema`([这里](https://github.com/LearnBoost/mongoose/blob/0b2784f86e95473883ea4bb1484ba58dba3c1e59/lib/index.js#L230)) 的一个实例。当`SomeSchema`被定义（在单独的模块中）时，它创建模式，`new mongoose.Schema({ ... })`其中`mongoose`需要从模块的本地依赖树中获取。当应用程序注册模式时，它使用`mongoose`应用程序依赖项中所需的模式。由于 mongoose 的两个副本不是同一个对象，因此给定模式不是其实例，`mongoose.Schema`因此会引发错误。

你有什么建议吗？我在想一个潜在的解决方案是让模块创建一个接受模式并添加所有路径、方法等的“插件”函数。主应用程序将创建一个空模式并添加插件。就像是：

```
var somePlugin = require('somemodule').somePlugin;
var SomeSchema = new mongoose.Schema();
SomeSchema.plugin(somePlugin);
mongoose.model('SomeModel', SomeSchema); 
```

有没有其他选择？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T21:07:52.877

我通过破解模式的原型以使用正确的实例解决了这个问题，`mongoose.Schema`这样它就可以通过内部的 Mongoose`instanceof`检查。因此，对于您的示例，我将添加如下一行：

```
var SomeSchema = require('somemodule').SomeSchema;
SomeSchema.__proto__ = mongoose.Schema.prototype;
mongoose.model('SomeModel', SomeSchema); 
```

这当然不是犹太洁食，但它对我有用！

# php - 以常量命名的变量变量

> ID：14526828
> 
> 赞同：2
> 
> 时间：2013-01-25T17:08:23.273
> 
> 标签：php, constants, variable-variables

我有以下课程：

```
class ClassFoo {

const MY_CONSTANT = "bar";

function __construct() {

    $my_object = new stdClass;

    // This does not work
    $my_object->$ClassFoo::MY_CONSTANT = "foo";

    }

} 
```

我正在尝试创建对象的变量，`$my_object`使其名称等于我定义的常量（`ClassFoo::MY_CONSTANT`）。以下不起作用：

```
$my_object->$ClassFoo::MY_CONSTANT = "foo"; 
```

这也不是：

```
$my_object->$constant("ClassFoo::MY_CONSTANT") = "foo"; 
```

必须有一个简单的解决方案，但我似乎找不到它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:14:58.307

```
<?php 
class ClassFoo {
    const MY_CONSTANT = "bar";

    function __construct() {
        $this->{ClassFoo::MY_CONSTANT} = "foo";
    }
}

$a = new ClassFoo();
var_dump($a); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T17:21:49.493

您可以在变量中使用常量并将该变量用作属性名称：

```
$propertyName = ClassFoo::MY_CONSTANT;
$this->$propertyName = 'foo'; 
```

# c# - 如何调用 DataGrid 的 ItemSource 来刷新它？

> ID：14526834
> 
> 赞同：0
> 
> 时间：2013-01-25T17:08:55.643
> 
> 标签：c#, wpf, datagrid

我想使用 WPF DataGrid`Animal`在我的主窗口的属性中显示一个实例列表，例如我在我的应用程序生命周期中存储的一个类（比如我在我的列表中添加/删除动物）

```
public List<Animal> _animals 
```

```
public class Animal {
    public int ID { get; set; }
    public strng name { get; set; }
} 
```

我将其添加`DataGrid`到我的 XAML 中

```
<DataGrid Name="AnimalGrid"></DataGrid> 
```

`LoadAnimals()`然后在初始化我的窗口时将其链接到一个函数：

```
AnimalGrid.ItemsSource = LoadAnimals(); 
```

```
public List<Animal> LoadAnimals() {
    return _animals;
} 
```

我希望数据网格更新/刷新。更准确地说，我几乎只希望数据网格`LoadAnimal`再次调用函数。我已经尝试过`AnimalGrid.Items.Refresh()`，但它不起作用。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:16:18.153

WPF 绑定不能单独使用魔法，代码需要以某种方式发出正确的事件以供数据网格更新。

要更新以响应集合中的更改（添加/删除），请使用`ObservableCollection<Animal>`as your `ItemsSource`，这将触发适当的事件以在集合更改时更新数据网格。

如果您希望网格响应各个行的和属性的更改，您还必须`INotifyPropertyChanged`在您的类中实现。`Animal``ID``name`

此外，您的`LoadAnimals()`函数似乎没有做任何事情，因为它只是检查 null ，然后在这种情况下返回 null 。+1 关于 MVVM 的评论，从长远来看，最好将您绑定`ItemsSource`到类（视图模型）中的某个属性，而不是在后面的代码中设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:16:59.730

如果您只是添加从集合中删除的元素。然后你可以使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)

如果您想创建一个新集合或想要更新集合内对象的属性。实施 INotifyPropertyChanged。

# javascript-events - javascript，不能覆盖函数

> ID：14526847
> 
> 赞同：1
> 
> 时间：2013-01-25T17:09:47.483
> 
> 标签：javascript-events, javascript

如何覆盖其他文件 js 中的函数长度？

```
 jQuery(function ($) {    

    $.fn.normal_text = function (text) {

           $.fn.normal_text.length = function(){
              ...
           }

        }

} 
```

我试试这个：

```
$(document).ready(function(){
    $.fn.normal_text.length = function(){ alert('123'); }
}); 
```

但它不起作用。我似乎对它很疯狂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:21:03.700

您不能覆盖`length`函数上的属性，因为它是只读的内置函数。

在语言规范中的“函数实例的属性”下：

> # [15.3.5.1 长度](http://es5.github.com/#x15.3.5.1)
> 
> length 属性的值是一个整数，表示函数期望的“典型”参数数量。但是，该语言允许使用其他数量的参数调用该函数。当函数的参数数量不是由其长度属性指定的数量时，该函数的行为取决于该函数。此属性具有属性。`{` **`[[Writable]]:` `false`**`,` `[[Enumerable]]:` `false,` `[[Configurable]]:` `false` `}`

粗体部分说明`length`函数实例上的属性是不可写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:16:43.417

normal_text is a function, not an object so you can't override it's properties.

# c# - 在 Nhibernate 中使用 CreateCriteria 进行分区的 Row_Number()

> ID：14526852
> 
> 赞同：2
> 
> 时间：2013-01-25T17:10:06.817
> 
> 标签：c#, nhibernate, nhibernate-criteria

在 c# 中在 nhibernate 中创建查询时遇到问题。实际上我必须为以下 sql 语句创建一个条件查询

```
select fCompanyID,ROW_NUMBER() over( PARTITION BY fCompanyID order by fPropertyID)
from  tARCustomer 
```

但到目前为止，我用谷歌搜索似乎 nhibernate 不支持 Row_Number() 分区。我在 nhibernate 中需要这个查询功能，但我不知道如何去做。如果有人这样做过，请告诉我/帮助我解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:43:51.227

好吧，NHibernate 可以解决任何问题。这可能是 Criteria 语法：

```
var list = session
  .CreateCriteria<Customer>()
  .SetProjection
  (
       Projections.SqlProjection
       (   
          "fCompanyID, ROW_NUMBER() over( PARTITION BY fCompanyID order by fPropertyID) as RowNumber"
          , new string[] {"fCompanyID", "RowNumber"}
          , new IType[] { NHibernate.NHibernateUtil.Int32, NHibernate.NHibernateUtil.Int32}
       )
  )
  .SetResultTransformer(Transformers.AliasToBean<ResultDTO>())
  .List<ResultDTO>()
; 
```

像这样`ResultDTO`：

```
public class ResultDTO
{
  public virtual int RowNumber { get; set; }
  public virtual int fCompanyID{ get; set; }
} 
```

现在您可以使用 a`list`作为一组`ResultDTO`

# f# - 为什么我不允许在 let 函数中使用引用单元格作为 byref 参数的参数？

> ID：14526854
> 
> 赞同：3
> 
> 时间：2013-01-25T17:10:10.297
> 
> 标签：f#

这不起作用：

```
let increment(i: int byref) = i <- i + 1
let xxx = ref 0
increment(xxx) // this expression was expected to have type
               // byref<int> but here has type int ref 
```

但这有效：

```
let incrementParam(a: int byref) = a <- a + 1
let mutable b = 30
incrementParam(&b) 
```

还有这个：

```
type Incrementor =
    static member Increment(i : int byref) =
       i <- i + 1

let fff = ref 10
Incrementor.Increment(fff) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T17:17:35.093

因为规范是这样说的。请参阅[**成员**](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335818955)[调用](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335818955)[中的类型定向转换](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335818955)**（重点是我的），尤其是以下内容：**

 **> 注意：这些类型导向的转换主要用于与现有的基于成员的 .NET 库的互操作性，不适用于调用模块中定义的函数或表达式中本地绑定的函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T17:25:46.860

为了向 Daniel 指出的引用添加一些细节，问题在于类型`'T ref`与类型不同`'T byref`，因此编译器需要插入一些转换（以获取地址）。

我认为这仅支持成员，因为这是主要场景（调用 COM 互操作方法等）并且因为隐式转换通常会使类型推断复杂化。类型导向的转换是一种更简单的情况，编译器已经知道所需的类型 ( `'T byref`)。我想，如果函数允许这样做，编译器可能会推断出参数的类型实际上应该是`'T ref`.

如果你想让第一个样本工作，你必须`'T byref`通过获取字段的地址来显式构造`contents`：

```
let increment(i: int byref) = i <- i + 1
let xxx = ref 0
increment(&xxx.contents) 
```**

# javascript - 从数组索引搜索 JS 创建的未定义变量

> ID：14526855
> 
> 赞同：0
> 
> 时间：2013-01-25T17:10:14.240
> 
> 标签：javascript, arrays, variables

我从数组中的选定索引创建了一个变量。在选定的索引内，我得到一个字符串值。当我逐步执行此操作时，我可以看到该值，但该变量是“未定义的”。在创建完成后传递该变量时，它保持未定义。

“numResult”是用户定义的数组选择。

```
var faddress = geocodeResults[numResult].address.value;

showResults.infoTemplate.setContent("<b>Name: " + faddress + "</b>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:27:08.090

我不得不删除 .value，调用堆栈未定义，因为 .val ..... 再次过度分析

谢谢大家

# visual-studio - 使用 Mono 工具和 Visual Studio 调试 MonoMac 应用程序

> ID：14526858
> 
> 赞同：2
> 
> 时间：2013-01-25T17:10:19.340
> 
> 标签：visual-studio, debugging, monomac, mono-tools

如果 MonoMac 应用程序已在 MonoDevelop 上编译，是否可以通过在 Windows 机器上运行的 Visual Studio 上的[Mono-tools](http://mono-tools.com/Debug.aspx)（或其他任何东西）远程调试它？

**设想**

几个库程序集在 Windows .NET 上编译并复制到 Mac。然后使用 pdb2mdb 将它们的符号从 .pdb 转换为 mono 的 .mdb 格式。

引用库的最终可执行文件是在 Mac 上的 MonoDevelop 上编译的。这将生成包含 plist、xib 和引用的库程序集的 .app 包。

这个应用程序目前可以使用 MonoDevelop 在 Mac 上运行和调试。

**问题**：有没有办法使用 Visual Studio 远程调试应用程序？

**研究**

1.  [Mono-tools](http://mono-tools.com/Debug.aspx)似乎是一个很好的起点，但它似乎需要在 Visual Studio 中编译整个应用程序。这在 MonoMac 应用程序中是不可能的。
2.  寻找单一工具的来源，但找不到任何东西。也找不到此方案的第三方解决方案。

# c# - RavenDB 随机缓慢故障排除

> ID：14526860
> 
> 赞同：0
> 
> 时间：2013-01-25T17:10:26.420
> 
> 标签：c#, wpf, ravendb

我有一个使用 RavenDB 的 WPF 应用程序。在其中一个窗口上，我可以反复点击刷新按钮来更新网格。每次刷新都会导致 RavenDB 查询。奇怪的是，查询会时不时地花费很长时间。例如，我可以连续七次点击刷新按钮，网格将在不到一秒的时间内刷新。然后，在第 8 次尝试时，需要 12 秒。然后，我可以再点击 Refresh 11 次，它又跑得很快，但第 12 次，又需要 12 秒。这种方式非常一致。每次出现延迟似乎总是需要 12 秒。那是什么？

这是查询：

```
IQueryable<EntityBase> installationSummaries =
    QueryAndSetEtags(session => session.Query<InstallationSummary>()
    .Include(x => x.ApplicationServerId)
    .Include(x => x.ApplicationWithOverrideVariableGroup.ApplicationId)
    .Include(x => x.ApplicationWithOverrideVariableGroup.CustomVariableGroupId)
    .Customize(x => x.WaitForNonStaleResults())
    .OrderByDescending(summary => summary.InstallationStartUtc)
    .Take(numberToRetrieve)
    );

    HydrateInstallationSummaries(installationSummaries);

    return installationSummaries.AsEnumerable().Cast<InstallationSummary>(); 
```

延迟总是在这行代码上（entityBases 是上述查询的返回值）：

```
List<EntityBase> entityBaseList = entityBases.ToList(); 
```

**在 RavenDB 中解决此类问题的正确方法是什么？**我不确定下一步该尝试什么。

**注意：此代码已很久没有更改。我现在使用的是 RavenDB 960。RavenDB 573 从未发生过这种情况。**

**编辑——附加代码以显示围绕此查询发生的其他情况。**

```
 private static void HydrateInstallationSummaries(IQueryable<EntityBase> installationSummaries)
    {
        // Note: We use session.Load() below so that we get the information from the session, and not another trip to the DB.
        foreach (InstallationSummary summary in installationSummaries)
        {
            HydrateInstallationSummary(summary);
        }
    }

    private static void HydrateInstallationSummary(InstallationSummary summary)
    {
        if (summary == null) { return; }

        summary.ApplicationServer =
            QuerySingleResultAndSetEtag(session => session.Load<ApplicationServer>(summary.ApplicationServerId))
            as ApplicationServer;

        summary.ApplicationWithOverrideVariableGroup.Application =
            QuerySingleResultAndSetEtag(session => session.Load<Application>(summary.ApplicationWithOverrideVariableGroup.ApplicationId))
            as Application;

        if (summary.ApplicationWithOverrideVariableGroup.CustomVariableGroupId == null) { return; }

        summary.ApplicationWithOverrideVariableGroup.CustomVariableGroup =
            QuerySingleResultAndSetEtag(session =>
            {
                if (session.Advanced.IsLoaded(summary.ApplicationWithOverrideVariableGroup.CustomVariableGroupId))
                {
                    return session.Load<CustomVariableGroup>(summary.ApplicationWithOverrideVariableGroup.CustomVariableGroupId);
                }
                return null;  // Note: We can be missing a custom variable in the session because someone deleted it.
                ;
            })
            as CustomVariableGroup;
    } 
```

**这里是 QueryAndSetEtags()：**

```
 protected static IQueryable<EntityBase> QueryAndSetEtags(Func<IDocumentSession, IQueryable<EntityBase>> func)
    {
        if (func == null) { throw new ArgumentNullException("func"); }

        IQueryable<EntityBase> entities = func.Invoke(_session);
        SetEtags(entities, _session);
        return entities;
    }

    protected static void SetEtags(IEnumerable<EntityBase> entityBases, IDocumentSession session)
    {
        foreach (EntityBase entityBase in entityBases)
        {
            SetEtag(entityBase, session);
        }
    }

    protected static void SetEtag(EntityBase entityBase, IDocumentSession session)
    {
        entityBase.Etag = (Guid)session.Advanced.GetEtagFor(entityBase);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:21:57.280

在该示例中，您有很多自定义代码，因此很难确切知道发生了什么。但我很确定问题围绕着这条线：

```
.Customize(x => x.WaitForNonStaleResults()) 
```

这不是您在生产查询中想要的。它主要用于单元测试。

尝试完全删除该行，或者如果您确实需要等待，然后指定一个截止点，例如：

```
.Customize(x => x.WaitForNonStaleResultsAsOfNow()) 
```

如果可能，请考虑升级到 RavenDB 2.0。它具有更好的性能和功能。

# jquery - jQuery UI datepicker 渲染后的触发函数

> ID：14526863
> 
> 赞同：3
> 
> 时间：2013-01-25T17:10:32.040
> 
> 标签：jquery, jquery-ui, datepicker

我想为日期选择器的所有 .ui-state-default 元素（单元格）添加悬停。悬停使用 beforeShowDay 函数添加的类信息。每当通过更改月份/年份重新渲染日历时，我需要一种能够重新绑定悬停的方法。

我已经尝试过 beforeShow，但它只在第一次显示日期选择器时被调用。

我已经尝试过 onChangeMonthYear，但它是在 beforeShowDay 之前调用的，所以我添加的任何悬停都在前几个月的 .ui-state-default 元素上。在调用 beforeShowDay 之后，有没有办法绑定到日期选择器？谢谢！

# maven - Mavent AntRun 不执行任务

> ID：14526864
> 
> 赞同：13
> 
> 时间：2013-01-25T17:10:34.690
> 
> 标签：maven, maven-antrun-plugin

按照使用页​​面 (http://maven.apache.org/plugins/maven-antrun-plugin/usage.html) 上的说明和其他 Stackoverflow 问题，我一直在尝试让 Ant 任务从我的 Maven 构建中运行. 我已经将我要做的事情简化为“你好，Maven”的简单回声，但我什么也没得到。

我正在执行 Maven：

```
mvn package 
```

我希望这个特定的任务在打包之前运行（“准备包”），所以我首先尝试了那个阶段，但是当它不起作用时，我尝试让我的阶段只是“打包”。

这是我尝试过的一种插件配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>id.package.ant</id>
            <phase>package</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <target>
                    <echo message="Hello, maven"/>
                </target>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

这是我尝试过的另一个：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>id.package.ant</id>
            <phase>package</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <tasks>
                    <echo message="Hello, maven"/>
                </tasks>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我也试过这些没有<id>。

我没有错误，根本没有输出。即使我执行 Maven -debug，“echo”这个词也不会出现在输出中，“antrun”这个词不会出现在输出中，“hello”这个词不会出现在输出中。

就像插件配置甚至不存在一样。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T18:24:44.233

安德鲁在他的评论中给出了正确的答案。当我将我的 maven-antrun-plugin AS-IS 上面（使用`<target>`而不是`<tasks>`） OUT`<pluginManagement>`和移到 Standalone`<plugins>`时，我的 Ant 任务开始执行。

令人惊讶的是，有多少 Google 和 Stackoverflow 的搜索之前没有返回另一个问题，但现在我更好地理解了 pluginManagement。谢谢，安德鲁！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-27T21:54:51.753

将 ant 从 1.7 更改为 1.8 解决了我的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-10T11:17:23.933

我遇到了类似的问题，并且仅在添加 1.8 版标签时才有效。否则它不会工作。这可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-21T21:48:25.130

我遇到了类似的问题。就我而言，这是因为我没有`<id>...</id>`为执行设置标签。以下是有效的 XML：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.8</version>
    <executions>
        <execution>
            <id>test</id> <!-- has to be set -->
            <phase>validate</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <target name="test">
                    <echo message="testing 1 2 3"/>
                </target>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# android - 带有 AccountManager 和 OAuth2 的 Google URLShortener：401 未经授权

> ID：14526870
> 
> 赞同：2
> 
> 时间：2013-01-25T17:10:50.757
> 
> 标签：android, oauth

我正在尝试通过 Android 上的 API 访问 goo.gl URLShortener。我正在使用 AccountManager 生成访问令牌：

```
String authTokenType = "oauth2:https://www.googleapis.com/auth/urlshortener";
String authToken = this.prefs.getString(Key.PREF_GOOGLE_ACCESS_TOKEN, "null");
if (!"null".equals(authToken)) {
  accountManager.invalidateAuthToken(authTokenType, authToken);
}
//(...)
accountManager.getAuthToken(account, authTokenType, false, new GetAuthTokenCallback(), null); 
```

当我`GetAuthTokenCallback`使用生成的身份验证令牌运行 HTTP 请求以接收 URL 历史记录时，我得到状态`401:unauthorized`：

```
HttpGet http_get = new HttpGet("https://www.googleapis.com/urlshortener/v1/url/history");
http_get.addHeader("Authorization", tokens[0]);

HttpResponse response;
response = GoogleOAuthOnPreferenceChangeListener.this.http_client.execute(http_get);
Log.d("tag", "Status: (" + response.getStatusLine().getStatusCode() + ") " + response.getStatusLine().getReasonPhrase()); 
```

JSON-Response 的内容是

```
{ 
  "error": {
    "errors": [
       {
         "domain": "global",
         "reason": "required",
         "message": "Login Required",
         "locationType": "header",
         "location": "Authorization"
       }
     ],
     "code": 401,
     "message": "Login Required"
   }
} 
```

我有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T02:55:02.840

根据[https://developers.google.com/identity/protocols/OAuth2ForDevices#callinganapi](https://developers.google.com/identity/protocols/OAuth2ForDevices#callinganapi)，您应该将标头设置为

```
Authorization: Bearer <access_token> 
```

代替

```
Authorization: <access_token> 
```

# c++ - Qt - 首选使用什么 - 小部件或视图？（树、表、列表）

> ID：14526881
> 
> 赞同：16
> 
> 时间：2013-01-25T17:11:21.303
> 
> 标签：c++, qt, model-view-controller

我开始使用带有 QStandardItemModel 和一些视图的 Qt 模型视图系统。但后来我注意到还有一些小部件——树、表、列表，它们恰好与视图的使用几乎相同。[我阅读了关于它](http://qt-project.org/doc/qt-4.8/model-view-programming.html)的Qt 文档，诚实不明白我们还需要什么小部件，为什么视图还不够......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T18:54:53.877

Q*Widgets 易于使用，适用于简单的用例。当您必须在之后查找和更新项目时，它们可能会变得乏味处理。然后，一旦您了解了这个概念，编写自定义模型通常会更容易。还有很多项目，自定义模型将具有更好的性能。

与视图结合的自定义模型更加灵活：它们允许使用代理模型，尤其是[QSortFilterProxyModel](http://doc.qt.digia.com/qt/qsortfilterproxymodel.html)，这使得基本的排序和过滤变得非常简单。

如果自定义模型看起来太令人生畏（它们可能变得复杂，尤其是对于树模型）并且您仍然需要视图和代理的灵活性，我建议研究[QStandardItemModel](http://doc.qt.digia.com/qt/qstandarditemmodel.html)：它为您提供了一个基于项目的 API，如 Q*Widget 做的，但可以可以与不同的代理和视图自由组合。如果您在某个时候决定使用自定义模型，只需替换模型，您就根本没有触摸代理和视图。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-25T18:45:11.090

你应该知道两件事。

速度数据加载有多重要。请参阅此问题 - [Qt 模型/视图与标准小部件](https://stackoverflow.com/questions/14461213/qt-model-view-vs-standard-widget/14464364#14464364)。

是否需要实现比 QStandardItemModel 更有用的 QAbstractItemModel？例如，如果您已经拥有需要在视图中显示的 QVector，那么您将更好地使用自己的模型而不是标准模型。

# mysql - MySQL CONCAT 多个字段与 IF 语句

> ID：14526886
> 
> 赞同：7
> 
> 时间：2013-01-25T17:11:41.677
> 
> 标签：mysql, if-statement, concat

我正在尝试做一些我认为很简单的事情，但我被困住了。我基本上想从多个地址部分字段创建一个地址字段，使用 IF 语句来使用地址或交叉点。这是我创建该领域的声明：

```
 CONCAT(loc_name,'\n',
            IF ( add_number != '' && add_street != '' ) THEN 
                CONCAT(add_number,' ',add_street,'\n')
            ELSEIF ( x_street_1 != '' && x_street_2 != '' ) THEN 
                CONCAT(x_street_1,' &amp; ',x_street_2,'\n')
            END IF
        ,city,', ', 
            IF ( state != '') THEN 
                CONCAT(state,' ',country,'\n')
            ELSEIF ( x_street_1 != '' && x_street_2 != '' ) THEN 
                CONCAT(country,'\n')
            END IF
        ) AS loc_info 
```

但它根本不喜欢我正在做的事情，它会在以下位置引发错误：

```
"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') THEN \n\t\t\t\t\t\tadd_number,' ',add_street,'\n'\n\t\t\t\t\tELSEIF ( x_street_1 != '' && x_" 
```

这似乎不喜欢我的空字段（''）表示法。但我不知道为什么。我不能像这样在 CONCAT 中使用 IF 语句吗？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T17:14:20.707

IIRC，您要使用的语法是

```
IF(condition, expression_if_true, expression_if_false) 
```

我可能是错的，但你可能想试试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T17:16:12.593

语法不正确。你想使用`CASE`：

```
SET @loc_name = 'Location';
SET @add_street = 'Add Street';
SET @add_number = '10';
SET @x_street_1 = 'Street 1';
SET @x_street_2 = 'Street 2';
SET @city = 'City';
SET @state = 'State';
SET @country = 'Country';

SELECT Concat(@loc_name, '\n', CASE 
                                 WHEN @add_number != '' 
                                      AND @add_street != '' THEN 
                                 Concat(@add_number, ' ', @add_street, '\n') 
                                 WHEN @x_street_1 != '' 
                                      AND @x_street_2 != '' THEN 
                                 Concat(@x_street_1, ' &amp; ', @x_street_2, 
                                 '\n') 
                               end, @city, ', ', CASE 
                                                   WHEN @state != '' THEN 
       Concat(@state, ' ', @country, '\n') 
              WHEN ( @x_street_1 != '' 
                     AND @x_street_2 != '' ) THEN Concat(@country, '\n') 
                                                 end) AS loc_info 
```

**结果**

```
| LOC_INFO |
-----------------------------------------------------------
| 地点
10 加街
城市，州国家
 |
```

只需找到并替换`@`为`.`

 `* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T18:01:33.190

这也可能有帮助：

```
CONCAT(loc_name,'\n',
            IF ( add_number != '' && add_street != '' , 
                CONCAT(add_number,' ',add_street,'\n'),
                IF ( x_street_1 != '' && x_street_2 != '' , 
                   CONCAT(x_street_1,' &amp; ',x_street_2,'\n'),""
                   )
               ),

        city,
         ',' , 
            IF ( state != '',
                CONCAT(state,' ',country,'\n'),
                IF ( x_street_1 != '' && x_street_2 != '' , 
                   CONCAT(country,'\n'),""
                   )
               ) AS loc_info 
```

还有你在这里比较`state != ''`的是它与空值吗？
如果是这样，**这会给你不正确的答案**，你必须使用它`state IS NOT NULL`来代替。`

# php - 单个服务器上的多个 LightVC 实例

> ID：14526890
> 
> 赞同：1
> 
> 时间：2013-01-25T17:11:57.277
> 
> 标签：php, frameworks

有没有人能够在单个服务器上配置多个 LightVC 实例？目标是让根目录中的任何子文件夹都使用该框架。

例如：

```
domain.com/applicationA/
domain.com/applicationB/
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:40:35.857

我像这样拆分文件：

```
/root/lightvc-2.0.1/classes
/root/lightvc-2.0.1/modules

/root/myvcapp/config
/root/myvcapp/controller
/root/myvcapp/views 
```

在 /root/myvcapp/config/

@ 第 6 行，我添加了这个：

```
$_SERVER['REQUEST_URI'] = substr($_SERVER['REQUEST_URI'], 
```

@ 第 10 行，我添加了这个：

```
define('LIGHTVC_PATH', realpath($_SERVER['DOCUMENT_ROOT']."/lightvc-2.0.1") . '/'); 
```

我改变了这个块：

```
include(APP_PATH . 'classes/AppController.class.php');
include(APP_PATH . 'classes/AppView.class.php'); 
```

对此：

```
include(LIGHTVC_PATH .  'classes/AppController.class.php');
include(LIGHTVC_PATH .  'classes/AppView.class.php'); 
```

仍然需要阻止对*/myvcapp/config*、*/myvcapp/controller*和*/myvcapp/views*的访问。我打算使用 httpd.conf 来做这件事。

# android - KSoap2 SoapObject 对象引用未设置为实例

> ID：14526892
> 
> 赞同：4
> 
> 时间：2013-01-25T17:12:04.610
> 
> 标签：android, ksoap2, android-ksoap2

我认为这是一个简单的问题，其他人可能能够提供缺失的链接。我有一个*工作流*wcf 服务，我的 .NET 客户端可以正常通信。我已经在 appfabric 下打开了跟踪，可以看到服务调用正确执行，所以我觉得服务不是问题。我的 Android 调用从未达到第一个跟踪点。

在使用 ksoap2 (2.6.5) 的 Android 中，当我调用此行时，我得到一个 Object reference not set 错误：

```
SoapObject response = (SoapObject)envelope.getResponse(); 
```

对我来说，这似乎很简单，信封必须为空，当我们尝试访问它以执行 getResponse 时，我们遇到了错误，但在调试器中它显示为有效对象。此外，我找不到要解释的文档，而且我看到的每个教程都有这种方式，所以......？

不同的一点是，在 .NET 中，我将创建一个对象来传递让 .NET 为我序列化它的对象。在这里，我添加了几个参数，它们都是字符串，但我将显示枚举，因为它可能是罪魁祸首。这是我的完整 Java 实现：

```
String NAMESPACE = "http://tempuri.org/";
String METHOD_NAME = "LiftDataExchange";
String SOAP_ACTION = "http://tempuri.org/ILiftDataExchange/ProcessDataRequest";
String URL = "http://www.icyarmtesting.com/LiftDataExchange.xamlx";
String SOAP_REMOTE_NAMESPACE = "http://schemas.datacontract.org/2004/07/IronMikeDataExchangeWorkflowService.Enum";

String X = "";
ExchangeEnumerations ExrcsEnum = ExchangeEnumerations.GetNextWorkout;

//Initialize soap request
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

//add parameters
PropertyInfo piAct = new PropertyInfo();
piAct.setName("Action");
piAct.setValue(ExrcsEnum);
piAct.setType(ExchangeEnumerations.class);
request.addProperty(piAct);

//Declare the version of the SOAP request
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.addMapping(SOAP_REMOTE_NAMESPACE, "ExchangeEnumerations", ExchangeEnumerations.class, ExchangeEnumerationsEnumClass.getInstance());
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

//Needed to make the internet call
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.debug = true;
try 
    {          
  //this is the actual part that will call the webservice
  androidHttpTransport.call(SOAP_ACTION, envelope); 
  SoapObject response = (SoapObject)envelope.getResponse();
  X = response.getProperty(0).toString();
}
catch (Exception e)...... 
```

这是我的请求转储：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
    <v:Header />
    <v:Body>
        <LiftDataExchange xmlns="http://tempuri.org/" id="o0" c:root="1">
            <UserName i:type="d:string">STERILIZED_OUT</UserName>
            <Password i:type="d:string">STERILIZED_OUT</Password>
            <ExerciseProgramID i:type="d:string">STERILIZED_OUT</ExerciseProgramID>
            <IncomingWorkoutData i:type="d:string">STERILIZED_OUT</IncomingWorkoutData>
            <Action i:type="n0:ExchangeEnumerations" xmlns:n0="http://schemas.datacontract.org/2004/07/IronMikeDataExchangeWorkflowService.Enum">GetNextWorkout</Action>
        </LiftDataExchange>
    </v:Body>
</v:Envelope> 
```

这是我的回复转储：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body>
        <s:Fault>
            <faultcode xmlns:a="http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher">a:InternalServiceFault</faultcode>
            <faultstring xml:lang="en-US">Object reference not set to an instance of an object.</faultstring>
            <detail>
                <ExceptionDetail xmlns="http://schemas.datacontract.org/2004/07/System.ServiceModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                <HelpLink i:nil="true"/>
                <InnerException i:nil="true"/>
                <Message>Object reference not set to an instance of an object.</Message>                
                <StackTrace>   at System.ServiceModel.Activities.WorkflowOperationContext.HandleEndResumeBookmark(IAsyncResult result)&#xD; at System.ServiceModel.Activities.WorkflowOperationContext.OnResumeBookmark()&#xD; at System.ServiceModel.Activities.WorkflowOperationContext..ctor(Object[] inputs, OperationContext operationContext, String operationName, Boolean performanceCountersEnabled, Boolean propagateActivity, Transaction currentTransaction, WorkflowServiceInstance workflowInstance, IInvokeReceivedNotification notification, WorkflowOperationBehavior behavior, ServiceEndpoint endpoint, TimeSpan timeout, AsyncCallback callback, Object state)&#xD; at System.ServiceModel.Activities.Description.WorkflowOperationBehavior.WorkflowOperationInvoker.OnBeginServiceOperation(WorkflowServiceInstance workflowInstance, OperationContext operationContext, Object[] inputs, Transaction currentTransaction, IInvokeReceivedNotification notification, TimeSpan timeout, AsyncCallback callback, Object state)&#xD; at System.ServiceModel.Activities.Dispatcher.ControlOperationInvoker.ControlOperationAsyncResult.PerformOperation()&#xD; at System.ServiceModel.Activities.Dispatcher.ControlOperationInvoker.ControlOperationAsyncResult.HandleEndGetInstance(IAsyncResult result)&#xD; at System.ServiceModel.Activities.Dispatcher.ControlOperationInvoker.ControlOperationAsyncResult.Process()&#xD; at System.ServiceModel.Activities.Dispatcher.ControlOperationInvoker.ControlOperationAsyncResult..ctor(ControlOperationInvoker invoker, Object[] inputs, IInvokeReceivedNotification notification, TimeSpan timeout, AsyncCallback callback, Object state)&#xD; at System.ServiceModel.Activities.Dispatcher.ControlOperationInvoker.InvokeBegin(Object instance, Object[] inputs, IInvokeReceivedNotification notification, AsyncCallback callback, Object state)&#xD; at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)&#xD; at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)&#xD; at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)&#xD; at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)</StackTrace><Type>System.NullReferenceException</Type></ExceptionDetail></detail></s:Fault></s:Body></s:Envelope> 
```

* * *

**更新：**

切换到 Edwin 的方法调用具有相同的结果。所以我从 KSoap2 2.6.5 3.0.0-RC4 升级，现在我得到了 NullRefException。使用以前的版本，我会点击服务并抛出对象未设置错误。在这个版本中，我不会点击服务并抛出 NullRef。代码相同，唯一改变的是我使用的 KSoap 版本。我写了一个简单的服务（记住这些是工作流服务），它接收一个字符串，改变它，然后踢出一个字符串。

FWIW 这是我拨打电话的代码：

```
String SOAP_ACTION = "http://tempuri.org/";
    String OPERATION_NAME="ChangeName";
    final String WSDL_TARGET_NAMESPACE = SOAP_ACTION;
    final String SOAP_ADDRESS= "http://www.icyarmtesting.com/ServiceTest/Service1.xamlx";
    Exception exception;
    String ErrorMsg="";
    String TEST_URL="" ;

    SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE, OPERATION_NAME);

    //PropertyInfo piName = new PropertyInfo();
    //piName.setName("UserName");
    //piName.setValue("ramjet");
    //piName.setType(String.class);
    //request.addProperty(piName);
    request.addProperty("UserName", "ramjet");

    SoapSerializationEnvelope  envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
    envelope.dotNet= true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport =null;
    if(!TEST_URL.equals(""))
        httpTransport = new HttpTransportSE(TEST_URL);
    else
        httpTransport = new HttpTransportSE(SOAP_ADDRESS);

    Object Response =null;
     try
     {
        httpTransport.call(SOAP_ACTION + "IService/" + OPERATION_NAME, envelope);
        Response = envelope.getResponse();
      }
     catch (SocketTimeoutException ex) 
     {
         ErrorMsg="Unable to connect";
          Response=null;
         exception=ex;
      }
      catch (IOException ie) 
      {
       ErrorMsg="Unable to connect";
      Response=null;
       exception=ie;
      }
       catch (Exception e) 
       {
        ErrorMsg="Unable to connect";
        Response=null;
        exception=e;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T07:51:30.923

I know its too late to answer this but I faced the same problem and the problem in my code was that I typed the property.setname() incorrect .. make sure you wrote the correct name of the method parameter (copy past it from the wsdl) I'm using ksoap2 3.1.1 btw!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:55:35.307

更改以下内容：

```
SoapObject response = (SoapObject)envelope.getResponse();
  X = response.getProperty(0).toString(); 
```

成为：

```
SoapObject response = (SoapObject)envelope.bodyIn;
                if(response != null)
                {
                      X=response.getProperty(0).toString();
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:40:50.433

这是我用来调用网络服务的类希望这可能对你有所帮助

```
public class CallSOAP {

private String SOAP_ACTION="your action url";
private String OPERATION_NAME="";//The web method OR web service you are going to call
private final String WSDL_TARGET_NAMESPACE=SOAP_ACTION;
private  final String SOAP_ADDRESS=Configuration.WEB_SERVICE_URL;//ip-address of serever where you host your service 
private Exception exception;
private String ErrorMsg="";
private String TERST_URL="" ;
public Object call(String MethodeName,ArrayList<PropertyInfo> Parameters){
  this.OPERATION_NAME=MethodeName;
  SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE, OPERATION_NAME);
 if(Parameters != null && Parameters.size()>0){
   for(PropertyInfo propertyInfo : Parameters){
      request.addProperty(propertyInfo);
 }
}

SoapSerializationEnvelope  envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet= true;
envelope.setOutputSoapObject(request);
HttpTransportSE httpTransport =null;
if(!this.TERST_URL.equals(""))
  httpTransport = new HttpTransportSE(this.TERST_URL);
else
  httpTransport = new HttpTransportSE(SOAP_ADDRESS);
 Object Response =null;
 try{
    httpTransport.call(SOAP_ACTION+OPERATION_NAME, envelope);
    Response=envelope.getResponse();
  }
 catch (SocketTimeoutException ex) {
     this.ErrorMsg="Unable to connect";
      Response=null;
     this.exception=ex;
  }
  catch (IOException ie) {
   this.ErrorMsg="Unable to connect";
  Response=null;
   this.exception=ie;
  }
   catch (Exception e) {
    this.ErrorMsg="Unable to connect";
    Response=null;
    this.exception=e;
 }
      return Response;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T07:06:58.337

我在课堂上使用下面的函数来处理 SOAP Web 服务。

```
public static String DeleteGame(String GameIDValue, String PlayerIdValue) {

        String responce = null; 

        SoapObject request = new SoapObject(SOAP_NAMESPACE, SOAP_METHOD_DeleteGame);

        PropertyInfo GameId = new PropertyInfo();
        PropertyInfo PlayerId = new PropertyInfo();

        GameId.setName("gameid");
        GameId.setValue(GameIDValue);

        PlayerId.setName("PlayerID");
        PlayerId.setValue(PlayerIdValue);

        request.addProperty(GameId);
        request.addProperty(PlayerId);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE aht = new HttpTransportSE(SOAP_URL);
        try {
            aht.call(SOAP_ACTION_DeleteGame, envelope);
            SoapPrimitive LoginResult;
            LoginResult = (SoapPrimitive)envelope.getResponse();
            System.out.println("=================Delete Game Results: "+LoginResult.toString());
            //System.out.println(LoginResult.toString());
            responce = LoginResult.toString();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }

        return responce;
    } 
```

# sorting - 库 Thrust (CUDA) 使用的排序算法是什么？

> ID：14526893
> 
> 赞同：0
> 
> 时间：2013-01-25T17:12:11.207
> 
> 标签：sorting, cuda, thrust

库 Thrust (CUDA) 使用的排序算法是什么？（即快速排序、归并排序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:05:57.743

AFAIK Thrust 使用两种排序算法：

*   合并排序
*   基数排序

使用哪种算法取决于要排序的数据类型（基元排序用于基本类型，合并排序用于其余类型）。

# arrays - 动作脚本 3 如果数组处于条件

> ID：14526899
> 
> 赞同：0
> 
> 时间：2013-01-25T17:12:23.830
> 
> 标签：arrays, actionscript-3, conditional-statements, flash-cs5.5

我想问一下这个代码..

```
 if (objek.dropTarget.parent.name == "book")
            {
    if ((objek == alif) || (objek == ba)){  //yg perlu diganti
    //if (objek == objBenar){  //yg perlu diganti
                objek.x = objek.dropTarget.parent.x;
                objek.y = objek.dropTarget.parent.y + 50;
                objek.removeEventListener(MouseEvent.MOUSE_DOWN, down);
                objek.buttonMode = false;
                var _loc_2:Number;
                objek.scaleY = 0.4;
                objek.scaleX = _loc_2;
                objek.alpha = 0.6;
                score+=5;
                scorebox.text = "Score: " + score;
            }
            else {
            objek.x = objek.dropTarget.parent.x;
                objek.y = objek.dropTarget.parent.y + 50;
                objek.removeEventListener(MouseEvent.MOUSE_DOWN, down);
                objek.buttonMode = false;
                var _loc_2:Number;
                objek.scaleY = 0.4;
                objek.scaleX = _loc_2;
                objek.alpha = 0.6;
                score-=2;
                scorebox.text = "Score: " + score;}
            }

        } 
```

我有movieclip alif、ba 和dal..这三个可以拖到名为“book”的movieclip 并且分数会改变。如果我将 alif 和 ba 电影剪辑拖到书上，分数会增加.. 如果我将 dal 电影剪辑拖到书上，分数会降低.. 如果我想制作一个数组的电影剪辑 alif 和 ba 怎么办？如何编写条件？ ? 帮助 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:35:53.523

我不确定我是否理解，但是您是否想要一个包含 alif 和 ba 的数组，然后检查影片剪辑是否在该数组中？这就是你要这样做的方式：

```
var scoreIncreasers:Array = [alif, ba];
var isScoreIncreaser:Boolean = (scoreIncreasers.indexOf(objeck) !== -1);
if(isScoreIncreaser) {
    // Increase score
} 
```

**编辑：**

根据您的评论，我认为这就是您想要的：

```
var objBener:Array = [alif, ba];
if(objBener.indexOf(objek) !== -1) {
    //yg perlu diganti
} 
```

# c++ - C++ std IO 不能正常输出 NULL 的原因是什么？

> ID：14526901
> 
> 赞同：3
> 
> 时间：2013-01-25T17:12:43.983
> 
> 标签：c++, stdio

> **可能重复：**
> [为什么 std::cout 输出在发送 NULL 后完全消失](https://stackoverflow.com/questions/7019454/why-does-stdcout-output-disappear-completely-after-null-is-sent-to-it)

似乎如果你尝试：

```
 std::cout << NULL << endl;
 std::cout << "hell" << endl; 
```

它什么也不打印，C++ IO 停止对所有后续输出工作。

但它在 C stdio 中工作正常：

```
 printf("%s\n", NULL);
 printf("%s\n", "hell"); 
```

> （空值）
> 
> 地狱

C++ IO不能做同样的事情有什么好的理由吗？

（根据评论进行编辑）好吧，说清楚，NULL 确实有一个类型，比如 const char*

```
const char* getxxx();  // may return NULL, 
cout << getxxx();      // won't work if NULL returned 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T17:15:04.577

嗯？我认为没有理由`cout`仅仅因为您执行了就失败

```
std::cout << 0 << std::endl; 
```

它应该输出`0\n`. [它确实](http://ideone.com/qH0wZD)如此。故事结局。

（如果您感到困惑，请在 C++ 中了解这一点`#define NULL (0)`。）

如果您写道：

```
T* p = 0;
std::cout << p << std::endl; 
```

然后它将显示地址`0`，（通常为十六进制并填充到指针大小，因为这是查看指针的首选方式）。

（顺便说一句，你会得到使用 NULL 的 C 定义的行为，即`#define NULL ((void*)0)`.）

只要你写

```
char* p = 0;
std::cout << p << std::endl; 
```

您遇到了困难。现在你打电话

> ```
> template<class traits>
> basic_ostream<char,traits>& operator<<(basic_ostream<char,traits>& out, const char* s); 
> ```

标准（第 27.7.3.6.4 节）对此表示：

> *要求*：`s`不得为空指针。

当你传递一个空指针时，规则 17.6.4.9 适用，它指出：

> 以下每一项都适用于 C++ 标准库中定义的函数的所有参数，除非另有明确说明。* 如果函数的参数具有无效值（例如函数域之外的值或对其预期用途无效的指针），则行为未定义。

所以你在“未定义的行为”的土地上。无法保证`failbit`会设置好并且程序会继续。

* * *

请注意，`printf`行为实际上并不取决于`NULL`. 它`"%s"`是导致作为字符串处理的格式字符串（指向以 NUL 结尾的字符序列的指针）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T17:24:43.267

`printf("%s", str)`不需要处理`NULL`字符串，因此通过传递`NULL` 您是在自找麻烦。

与 IOStreams 语义等价的语句是：

```
std::cout << static_cast<char const*>(NULL); 
```

这也不是处理`NULL`字符串所必需的。

# delphi - TADODataSet.MasterFields - 性能

> ID：14526905
> 
> 赞同：0
> 
> 时间：2013-01-25T17:12:53.127
> 
> 标签：delphi, ado, delphi-2006

我有一个 Delphi 应用程序，它有 2 个`TADODataSet`引用 CLIENT (Master) 和 ORDER (detail) 数据的对象。我通过 DataSource 和 Masterfields（使用 ClientCode）属性链接了 2 个组件，并且一切都按预期运行。但是，我最近注意到一个性能问题，并发现即使只为主记录集返回一条客户记录，也会返回整个订单表，然后针对特定客户进行过滤。这是它应该如何运作的吗？通过跟踪数据库活动，我可以看到正在执行以下 SQL：

```
-- the one client that I wanted to view
SELECT fields FROM Client WHERE ClientCode = 1;

SELECT fields from Order; -- entire orders table 
```

我正在使用 Delphi 2006 BDS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:24:33.183

您只需要注意使用主数据集的字段名称正确命名 Masterfield。

![这里标识](../Images/d6d682d4f67775bb803b0e3e91072e6e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:03:29.857

确保两种情况下的参数类型相同，即 master 和 child。

# reporting-services - SSRS 报告自动减小条形宽度

> ID：14526907
> 
> 赞同：1
> 
> 时间：2013-01-25T17:13:00.230
> 
> 标签：reporting-services, reporting, scale, bar-chart

整个系列的条形图的宽度自动减小到几乎不可见（对于每个值）以适应大型报告的呈现，即极长的 x 轴

报告中的每个条的宽度为 1-2 像素，在某些情况下，它们看起来像是在彼此内部呈现。![问题示例](../Images/9429b927bd40fb6479a168229a1b21d9.png)

我希望保持每个条的原始宽度并呈现滚动条或允许它可读的东西。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:27:28.800

是的。我会让你的图表的宽度动态化，因为你会根据产生的列数增加它的宽度。

我还没有尝试过，但一切似乎都在报表生成器中具有表达能力。

# php - 提交后清除表格

> ID：14526909
> 
> 赞同：0
> 
> 时间：2013-01-25T17:13:05.093
> 
> 标签：php, javascript, forms, search, onsubmit

当我提交下面的表格时，它第一次搜索有效，但是如果我尝试另一个搜索，它会给我相同的答案，例如：首先我搜索“operat”--->它返回例如“操作后缀”然后如果我搜索“flight”--->它再次返回“operational suffix” 下面你会找到代码，提前谢谢你！

```
<form name="form1" id="form1" class="form-inline" method="GET" action="index.php">
<select name="select">
<option value="" selected="selected"></option>    
<option value="Data Element Name">Data Element Name</option>    
<option value="Term">Term</option>    
<option value="Diagram">Diagram</option>  
</select>
<input type="text" name="search" id="search">
<input type="submit" class="btn">
</form>
<table id="resultTable"></table> 

<?php
function connection(){
/*****************************************************************************/
//Get values from the form
$search = $_GET['search'];
$select = $_GET['select'];
/*****************************************************************************/
//Define needed values to log in
$dbhost='localhost';
$dbusername='username';
$dbuserpass='pass';
$dbname = 'db_name';
/*****************************************************************************/
// connect to the mysql database server
$connection=mysql_connect ($dbhost, $dbusername, $dbuserpass);
/*****************************************************************************/
//select the database
mysql_select_db($dbname) or die('Cannot select database');
/*****************************************************************************/
//Create the Query
$result="SELECT name from tbl_name WHERE stereotype LIKE 'Term' AND name LIKE '%$search%' ";
/*****************************************************************************/
//Sending the request
$req =mysql_query($result,$connection);
if (!$req )
{
die(mysql_error());
}
/*****************************************************************************/
//Loop to stock results on an array 
$array=array();
$i=0;
while($data = mysql_fetch_assoc($req))
{ 
$array[$i]=$data['name'];
$i=$i+1;
}
/*****************************************************************************/
//return the result to javascript
return json_encode($array);
/*****************************************************************************/
}
?>
<script>
$('#form1').submit(function() {  
$('#resultTable').empty();
alert(document.forms["form1"]["search"].value);
if (document.forms["form1"]["select"].value=="Term" ){
var tab=<?php echo connection();?>;
for(i=0;i<tab.length;i++) {$('#resultTable').append('<tr><td>'+tab[i]+'</td></tr>');}
}
return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:19:12.237

这是因为 html 和 php 的顺序错误。正常流量：

1.  设置变量
2.  创建数据库连接
3.  在数据库中插入/更新东西
4.  从数据库中选择东西
5.  显示东西

在您的情况下，这些东西是在您的表单呈现后插入的

如果不是您的情况，请尝试检查您是否使用 javascript 或离线存储的东西。

# java - SSJS 中 getComponent() 的 Java 等价物

> ID：14526915
> 
> 赞同：0
> 
> 时间：2013-01-25T17:13:43.923
> 
> 标签：java, xpages

我知道我们可以在 Java 中像这样访问 XPages 全局对象

```
FacesContext facesContext = FacesContext.getCurrentInstance();
ExternalContext externalContext = facesContext.getExternalContext();
...
... 
```

但我找不到任何等效的使用`getComponent()`是 Java。`getComponent()`Java中是否有与SSJS相似的类或方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:38:21.750

在 Java 中评估 SSJS 可能是最简单的。斯文的代码：

```
String valueExpr = "#{javascript: getComponent('xxx').getValue();}";
FacesContext fc = FacesContext.getCurrentInstance();
ExpressionEvaluatorImpl evaluator = new ExpressionEvaluatorImpl( fc );
ValueBinding vb = evaluator.createValueBinding( fc.getViewRoot(), valueExpr, null, null);
vreslt = (String) vb.getValue(fc); 
```

[如何从 Java Bean 调用临时 SSJS](https://stackoverflow.com/questions/10324445/how-to-call-ad-hoc-ssjs-from-a-java-bean)

这是 Karsten Lehmann 的纯 Java 解决方案：

```
/** 
 * Finds an UIComponent by its component identifier in the current 
 * component tree. 
 * 
 * @param compId the component identifier to search for 
 * @return found UIComponent or null 
 * 
 * @throws NullPointerException if <code>compId</code> is null 
 */ 
public static UIComponent findComponent(String compId) { 
    return findComponent(FacesContext.getCurrentInstance().getViewRoot(), compId); 
} 

/** 
 * Finds an UIComponent by its component identifier in the component tree 
 * below the specified <code>topComponent</code> top component. 
 * 
 * @param topComponent first component to be checked 
 * @param compId the component identifier to search for 
 * @return found UIComponent or null 
 * 
 * @throws NullPointerException if <code>compId</code> is null 
 */ 
public static UIComponent findComponent(UIComponent topComponent, String compId) { 
    if (compId==null) 
        throw new NullPointerException("Component identifier cannot be null"); 

    if (compId.equals(topComponent.getId())) 
        return topComponent; 

    if (topComponent.getChildCount()>0) { 
        List childComponents=topComponent.getChildren(); 

        for (UIComponent currChildComponent : childComponents) { 
            UIComponent foundComponent=findComponent(currChildComponent, compId); 
            if (foundComponent!=null) 
                return foundComponent; 
        } 
    } 
    return null; 
} 
```

[http://www.mindoo.com/web/blog.nsf/dx/18.07.2009191738KLENAL.htm](http://www.mindoo.com/web/blog.nsf/dx/18.07.2009191738KLENAL.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T15:04:12.583

在扩展库的组扩展中有一个查询包，其中包含 XspQuery 类和一些过滤器。此类旨在像 dojo.query 一样为您提供许多不同的方法来查找组件，不仅通过 id，还通过 Component Class、Client ID、Server ID 等。这是使用服务器 ID 的示例定位一个组件：

```
XspQuery query = new XspQuery();
query.byId("someId");
List<UIComponent> componentList = query.locate(); 
```

你可以在这里找到它：[https ://svn-166.openntf.org/svn/xpages/extlib/eclipse/plugins/com.ibm.xsp.extlib.group/src/com/ibm/xsp/extlib/query/](https://svn-166.openntf.org/svn/xpages/extlib/eclipse/plugins/com.ibm.xsp.extlib.group/src/com/ibm/xsp/extlib/query/)

Group 扩展从未与扩展库一起分发，而是在 svn 存储库中，要获得它，您必须通过 OpenNTF svn 服务器。

# alloy - 合金的公式翻译

> ID：14526916
> 
> 赞同：2
> 
> 时间：2013-01-25T17:13:44.970
> 
> 标签：alloy

我有一个小的合金规格如下：

```
sig class {parents : set class}
fact f1{all p:class | not p in p.^parents}
run{} for exactly 4 class 
```

首先，我认为合金会将 f1 转换为布尔矩阵，然后对其执行闭包操作。但它似乎没有进行这种翻译（看起来它在创建布尔矩阵之前运行了一些东西。）。那么这个 f1 究竟是如何翻译的呢？它使用关系谓词吗？我只是对合金的翻译很好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:03:44.637

布尔矩阵用于表示合金中的表达式。因此，您从每个 sig 的一元矩阵、每个二元关系的二元矩阵、每个三元关系的三元矩阵等开始。然后，通过操作（组合）您开始使用的那些矩阵来完成“复杂”表达式的转换（例如，涉及关系代数运算符）。对于每个 Alloy 运算符（例如，传递闭包 (^)、关系连接 (.)、in、not 等），都有一个相应的算法执行一系列矩阵运算，以便正确实现该运算符的语义。

所以在这个例子中，`all`量词首先被展开，这意味着对于每个`p`类型`class`的原子，身体被翻译（类似于：

*   m0 = matrix(p) *//返回p对应的矩阵*
*   m1 = matrix(parents) *//返回父母对应的矩阵*
*   m2 = ^m1
*   m3 = m0.m2
*   m4 = m3 中的 m0
*   m5 = 不是 m4

)，最后，所有这些正文翻译都是 AND'ed。

# c# - List<> 最终为空；似乎无法正确添加

> ID：14526918
> 
> 赞同：1
> 
> 时间：2013-01-25T17:13:46.373
> 
> 标签：c#, asp.net, list, add

我有一个`GridView`，`CheckBoxes`我希望`Cell[1]`在检查的每一行中检索。列表总是以`'null'`. 代码如下。我添加了一个字符串来显示输出，效果很好。所以我可能添加不正确，但我不知道是什么。任何帮助，将不胜感激。干杯~

```
List<int> indices = new List<int>();
CheckBox cb = new CheckBox();

string text = "";
foreach (GridViewRow row in GV0.Rows)
{
    if (((CheckBox)row.FindControl("CheckBox1")).Checked)
    {
        text += row.Cells[1].Text;
        indices.Add(int.Parse(row.Cells[1].Text));
    }
}
Label1.Text = text;
Session["indicesList"] = indices;
Response.Redirect("About.aspx"); 
```

被重定向到的页面的代码：

```
 List<List<string>> all = new List<List<string>>();
        List<string> fields = new List<string>();
        List<Type> fieldtypes = new List<Type>();
        List<int> indices = new List<int>();
        int show = 0;

        if (!Page.IsPostBack)
        {
            all = (List<List<string>>)Session["all"];
            fields = (List<string>)Session["fields"];
            fieldtypes = (List<Type>)Session["fieldtypes"];
            indices = (List<int>)Session["indiceslist"];
            show = (int)Session["show"];
        }

        int j = 0;
        List<List<string>> dupes = new List<List<string>>();
        for (int i = 0; i < show; i++)
        {
            if (j < indices.Count)
            {
                if (int.Parse(all[i][0]) == indices[j])
                {
                    dupes.Add(all[i]);
                    j++;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:41:42.683

您在会话中使用键设置列表，`indicesList`但使用键检索它`indiceslist`（请注意字母“L”上的大小写差异）。

我建议为您的列表创建一个从会话中获取和设置的属性。它使管理变得更加容易。

```
public List<int> Indices
{
    get
    {
        var val = Session["indicesList"] as List<int>;
        if(val == null) 
        {
            val = new List<int>();
            Session["indicesList"] = val;
        }
        return val;
    }
    set
    {
        Session["indicesList"] = value;
    }
} 
```

# meteor - 如何配置 WebStorm 来调试流星服务器文件？

> ID：14526920
> 
> 赞同：7
> 
> 时间：2013-01-25T17:13:55.877
> 
> 标签：meteor, webstorm

如何配置 webstorm 来调试流星服务器文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T02:32:22.093

我让它与 PHPStorm 一起工作。请参阅：[WEB-6264](http://youtrack.jetbrains.com/issue/WEB-6264#comment=27-445048 "Jetbrains 网络风暴")我确实必须对配置进行轻微修改。

1.  从插件库安装 NodeJS 插件
2.  创建一个 Node.js 远程调试运行配置并填写以下字段：
    *   主机：127.0.0.1（运行流星应用程序的主机，如果流星在您的本地计算机上运行，​​请保持不变）
    *   调试端口：5858
    *   本地目录：/path/to/your/meteor/project
    *   远程路径：app
3.  NODE_OPTIONS="--debug" 流星

# asp.net-mvc-3 - mvc 中的 ajax 助手非异步调用

> ID：14526926
> 
> 赞同：0
> 
> 时间：2013-01-25T17:14:17.980
> 
> 标签：asp.net-mvc-3, jquery

我在 asp.net mvc 中进行开发，今天我在使用 ajax 助手时看到了一些奇怪的事情。

如果我使用 Ajax.BeginForm(...) 或 Ajax.ActionLink(...)，它们不会异步调用（发布到）操作，并且它们像普通表单或普通链接一样工作，但是当我检查请求时.IsAjaxRequest() 在行动中，它返回真。

对于 ajax 表单，我使用

```
$('#createqfrm').submit(function () {...} 
```

它工作正常，并异步发送表单。

注意：我知道我必须在 jquery.unobtrusive-ajax.min 中将 .live() 更改为 .on()，因为 jquery 的新版本。

这里也是我引用的 java 库：

```
 <script src="@Url.Content("~/Scripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
     <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

**编辑**：

检查 Request.IsAjaxRequest() 并看到它返回 false。

**添加了操作代码：**

```
public ActionResult GetStriing()
        {
            if (Request.IsAjaxRequest())
            {
                return Json("ajax called",JsonRequestBehavior.AllowGet);
            }
            else
            {
                return Json("ajax not called", JsonRequestBehavior.AllowGet);
            }

        } 
```

**表单的部分html代码：**

```
<form action="/admin/xxxx/create" data-ajax="true" data-ajax-success="handeCreateQuestionnareSuccess" id="form0" method="post">        <div class="editor-label">
            <label for="Title">title</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-required="*" id="Title" name="Title" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="Title" data-valmsg-replace="true"></span>
        </div>
        <div class="editor-label">
            <label for="Status">Status</label>
        </div>
....

 <script type="text/javascript">

        function handeCreateQuestionnareSuccess(context) {
            debugger;
            if (context) {

                $("#CreateQuestionnarieform").empty().html(context[1]);
                $("#CreateQuestionnarieform").append('<input type=hidden name=questionnarieid value=' + context[2] + '/>');

            } else {

                $("#CreateQuestionnarieform").empty().html(context[1]);

                $("form").removeData("validator");
                $("form").removeData("unobtrusiveValidation");
                $.validator.unobtrusive.parse("form");
            }
        }
    </script> 
```

**使用 ajax 调用提交表单的代码：**

```
$('#createqfrm').submit(function () {

                if ($(this).valid()) {
                    $.ajax({
                        url: this.action,
                        type: this.method,
                        data: $(this).serialize(),
                        success: function (context) {

                        }
                    });
                }
                return false;
            }); 
```

**不是解决方案，但可以通知其他用户：**

问题出在 jquery 1.9.0 以及我从 nuget 获得的 jquery.validate.min.js 和 jquery.validate.unobtrusive.min.js 更新我改回 1.8.3 并且工作正常.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:27:51.377

好吧，这听起来像是`UnobtrusiveJavaScriptEnabled`设置为假。查看您的 AppSettings-File。在部分`<appsettings>`应该有：

```
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

**编辑：**

经过一分钟的谷歌搜索后才找到此链接：

[http://forums.asp.net/t/1877166.aspx/1?jquery+unobtrusive+ajax+js+error+with+jQuery+1+9+0+updated](http://forums.asp.net/t/1877166.aspx/1?jquery+unobtrusive+ajax+js+error+with+jQuery+1+9+0+updated)

[将 jQuery 更新到 1.9.0 后，Unobtrusive Ajax 停止工作](https://stackoverflow.com/questions/14391867/unobtrusive-ajax-stopped-working-after-update-jquery-to-1-9-0)

# java - Android 使用 restlet 绕过 Profile Proxy

> ID：14526929
> 
> 赞同：1
> 
> 时间：2013-01-25T17:14:26.587
> 
> 标签：java, android, http, proxy, restlet

我正在开发一个必须在为 VPN 网络配置的设备上运行的应用程序。网络配置文件配置有代理。代理允许设备退出 VPN 并在互联网上导航。

我的应用程序必须访问 Intranet 中的服务器，并且不能使用代理访问它。如果设置了代理，则服务器无法访问，如果未设置代理，则无法访问 Internet。

我需要使用设备的所有应用程序访问互联网，但我的应用程序必须访问服务器。所以我用代理配置了设备网络配置文件，但现在我需要使用我的应用程序绕过代理！

你有什么想法吗？

PS：我使用 Restlet 与服务器通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:10:06.777

我简单地使用 Java System Properties 解决了这个问题：

*   http.proxyHost
*   http.proxyPort

这些值会覆盖 android 系统代理设置。

有用！

# rest - 使用backbone.js时如何防止用户删除所有数据

> ID：14526930
> 
> 赞同：0
> 
> 时间：2013-01-25T17:14:27.547
> 
> 标签：rest, backbone.js

假设我有一些 web 应用程序在客户端使用了主干.js，在服务器端有一些支持 DELETE 方法的 RESTful API。该应用程序的数据库包含一些类别和帖子，在客户端我有一个名为“类别”的集合，它使用 fetch() 使用 GET 方法从服务器检索所有类别。

如何防止任何用户在 chrome 中打开他的控制台或在 Firefox 中打开他的控制台，浏览我的 JavaScript 文件，计算我的主干模型的结构，然后从他的控制台运行 collections.destroy() 并删除我所有的数据库...... .

我在这里错过了什么吗？

我用谷歌搜索了它，但没有找到答案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:29:30.940

当从客户端接收到 DELETE 方法时，您可以通过不执行任何操作轻松地在服务器端防止这种情况发生。

如果您使用的是 rails，您的删除方法将如下所示

```
def destroy
  #not allowing deletions through the REST api
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:27:47.460

您必须在服务器端进行一些验证，因为您无法信任来自客户端的内容。

例如，您可以编写一些在执行数据库调用之前运行的安全检查，如下所示（PHP 伪代码）：

```
$model = Posts;

if($model->checkUserRights('read')) {

    $model = Posts->findById($_GET['id']);

    echo json_encode($model);

} else {

    echo "You have not the require rights to access ".$model->tableName;

} 
```

在 Posts 的模型中：

```
public function checkUserRights($op){

    // Run some code for each possible operations's type   
} 
```

在处理更新请求之前，您还可以添加一些规则来过滤您将返回给客户端的值或它们将发布到您的服务器的值。

这完全取决于您以及您将在服务器上使用什么技术。

# c# - 简单地将文本块添加到 layoutroot 时，Silverlight 应用程序冻结

> ID：14526934
> 
> 赞同：0
> 
> 时间：2013-01-25T17:14:41.117
> 
> 标签：c#, silverlight

我不明白为什么这个简单的 Silverlight 应用程序会死机。这是代码：

```
namespace test
{
public partial class MainPage : UserControl
{
    TextBlock txtword;
    public MainPage()
    {

        InitializeComponent();

        txtword = new TextBlock();
        txtword.Text = "TEST";

        LayoutRoot.Children.Add(txtword);
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        txtword.Text = "SuperDuper";
    }

}
} 
```

将文本块添加到 layoutroot 后，如果您尝试悬停或单击按钮，您可以知道应用程序由于某种原因已冻结。知道这里发生了什么吗？

如果我在 XAML 中添加文本块，我可以在按钮单击中更改其文本属性。LayoutRoot.Children.Add() 导致应用程序冻结..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:00:27.443

从阅读您的评论看来，MainPage.xaml 中的 XAML 类似于以下内容：

```
<Grid x:Name="LayoutRoot" Background="White">
    <Button Content="Do stuff" Click="Button_Click" />
</Grid> 
```

`TextBlock`在代码或 XAML 中添加 后，您实际上会得到以下结果：

```
<Grid x:Name="LayoutRoot" Background="White">
    <Button Content="Do stuff" Click="Button_Click" />
    <TextBlock Text="TEST" />
</Grid> 
```

您`Grid`没有指定任何`ColumnDefinition`s 或`RowDefinition`s，因此您有一个 1 × 1 网格，其中包含`Grid`给定网格的整个宽度和高度的所有子控件。

由于您`Button`和您都没有`TextBlock`指定 z-index 值（使用`Canvas.ZIndex`），因此它们的 z 顺序由它们在网格中的位置定义`Children`。The`TextBlock`出现在 之后`Button`，因此它是“在顶部”的那个。

`TextBlock`可能只包含少量文本，但它本身`TextBlock`仍会填充`Grid`. `TextBlock`s 不会自动调整大小以适应它们包含的文本，仅此而已。您`Button`似乎不起作用，因为`TextBlock`它位于它之上并接收所有鼠标事件。 `TextBlock`s 是静态控件，不会响应任何鼠标事件，这应该可以解释为什么您的应用程序似乎冻结了。

将 的`HorizontalAlignment`和/或设置`VerticalAlignment`为`TextBlock`一个值，而不是`Stretch`停止`TextBlock`给定 的整个宽度和高度，`Grid`并允许`Button`接收鼠标事件。

# mysql - MySQL 中的 FULL OUTER JOIN 语法问题（左联合右）

> ID：14526935
> 
> 赞同：0
> 
> 时间：2013-01-25T17:14:43.453
> 
> 标签：mysql, sql, syntax-error, union, full-outer-join

我正在尝试在 MySQL 中进行 FULL OUTER JOIN，我们都知道这是不可能的。所以，就像我正在使用的任何普通修补匠一样：

(T1 左外连接 T2) UNION (T1 右外连接 T2)

现在这是问题所在！每个单独的连接（左和右）都像一个魅力，但它们一起给出一个错误（1064：语法错误），并且提示我检查我的 MySQL 服务器手册以获取正确的语法。

这是代码：

```
(SELECT 
    *
FROM
    result LEFT OUTER JOIN 
    ((SELECT * FROM SQA AS sqa JOIN SA AS sa USING (sa_oid) WHERE sqa.sq_oid = 1)
    AS tmp1) ON tmp1.sa_oid = result.re_as

WHERE
    result.re_p = 1 AND 
    result.re_s = 1 AND
    result.re_q = 1)

UNION

(SELECT 
    *
FROM
    result RIGHT OUTER JOIN 
    ((SELECT * FROM SQA AS sqa JOIN SA AS sa USING (sa_oid) WHERE sqa.sq_oid = 1)
    AS tmp2) ON tmp2.sa_oid = result.re_as

WHERE
    result.re_p = 1 AND 
    result.re_s = 1 AND
    result.re_q = 1) 
```

同样，两个左连接和右连接单独工作，但如果与 UNION 运算符放在一起，似乎会产生语法错误。有任何想法吗？有名称冲突吗？或者在这种情况下不可能进行 FULL OUTER JOIN ？

非常感谢任何反馈！另外，请原谅这个问题的琐碎（如果它是琐碎的）。

编辑：

```
"Error Code: 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON tmp2.sa_oid = result.re_as

    WHERE
        result.re_p = 1 AND 
        result.re' at line 20" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:15:54.967

```
Try this:

(SELECT 
    *
FROM
    result LEFT OUTER JOIN 
    (SELECT * FROM surveyquestion_answers AS sqa JOIN surveyanswer AS sa USING (sa_oid) WHERE sqa.sq_oid = 1)
    AS tmp1 ON tmp1.sa_oid = result.re_answer

WHERE
    result.re_page = 1 AND 
    result.re_survey = 1 AND
    result.re_question = 1)

UNION

(SELECT 
    *
FROM
    result RIGHT OUTER JOIN 
    (SELECT * FROM surveyquestion_answers AS sqa JOIN surveyanswer AS sa USING (sa_oid) WHERE sqa.sq_oid = 1)
    AS tmp2 ON tmp2.sa_oid = result.re_answer

WHERE
    result.re_page = 1 AND 
    result.re_survey = 1 AND
    result.re_question = 1) 
```

# objective-c - 除非应用程序当前正在运行，否则在应用程序图标上拖放文件不起作用？

> ID：14526936
> 
> 赞同：1
> 
> 时间：2013-01-25T17:14:43.933
> 
> 标签：objective-c, macos

> **可能重复：**
> [当文件、图片等放在其停靠图标上时，如何使 OS X 应用程序做出反应？](https://stackoverflow.com/questions/501079/how-do-i-make-an-os-x-application-react-when-a-file-picture-etc-is-dropped-on)

出于某种原因，如果我将文件拖放到我的应用程序图标上......除非应用程序当前正在运行，否则它不起作用。

这是 CFBundleDocumentTypes 的当前 Info.plist 条目

```
 <array>
                <dict>
                        <key>CFBundleTypeExtensions</key>
                        <array>
                                <string>*</string>
                        </array>
                        <key>CFBundleTypeName</key>
                        <string>NSFilenamesPboardType</string>
                        <key>CFBundleTypeRole</key>
                        <string>None</string>
                </dict>
        </array> 
```

想法，意见，提示，技巧？

在这里回购：[https ://bitbucket.org/crewshin/maketx_dnd](https://bitbucket.org/crewshin/maketx_dnd)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:48:14.693

拖放到图标的启动行为来自于在 Info.plist 文件的 CFBundleDocumentTypes 中定义应用程序可以处理的文件类型。

您的应用程序未启动，因为您声明您不了解任何文件类型。

```
<key>CFBundleTypeRole</key>
<string>None</string> 
```

To declare your app can read a file type, you should use 'Viewer' or 'Editor' for the CFBundleTypeRole.

The documentation is somewhat unclear about using an * to specify CFBundleTypeExtensions. It used to be a valid way to specify your app can only all file types in 10.4 and earlier, but it may not work after OSX 10.6\. Try setting it to an extension you can actually read.

# c++ - “异常无效时中断”是什么意思？

> ID：14526942
> 
> 赞同：19
> 
> 时间：2013-01-25T17:15:00.270
> 
> 标签：c++, visual-studio-2010, visual-c++, exception

我发现 Visual C++ 2010 的自动中断异常功能在过去非常有用，今天我查看了此对话框中的选项，发现其中一种异常类型是“void”。这是什么意思？如果我选择这个，我会在代码中抛出的任何异常上中断吗？如果不是，什么样的 throw 语句会触发这种类型的断点？

![Visual Studio 异常对话框](../Images/6cf67e565d3660241f1d114e5d780e98.png)

我想一个更一般的后续问题是我在哪里可以找到有关此对话框及其所有选项的文档？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T16:51:13.997

关于它是如何工作的（正如 MSalters 提到的），这只是不正确的命名。

实际上它应该被命名**`void*`**，当然。

但是为什么它适用于`int*`等`const char*`（实际上是**任何指针类型**，包括指向用户定义类型的指针）？

好吧，我可以假设这与非常有趣的 C++ 异常处理问题有关——`catch(void*)`异常处理程序**实际上捕获了任何（与 cv 兼容的）指针类型异常**！

例子：

```
try
{
   throw "Catch me if you can!";      
}
catch(void* e)
{
   // ...and I can!
   std::cout << "Gotcha!" << std::endl;
} 
```

在这里，我们抛出`char*`（在 Visual C++ 中，字符文字是`char*`，不是`const char*`）并通过`void*`. 它会起作用的！

答案可以在 C++ Holy Standard 中找到：

> **§15.3 处理异常**
> 
> 15.3.3 处理程序是 E 类型异常对象的匹配项，如果
> 
> ...
> 
> 处理程序的类型为 cv1 T* cv2 并且 E 是指针类型，可以通过以下任一或两者转换为处理程序的类型 — 标准指针转换 (4.10)，不涉及到指向私有或受保护或不明确类的指针的转换
> 
> ...

并且 4.10 说标准指针转换包括转换为`void*`：

> 4.10.2 “指向 cv T 的指针”类型的纯右值，其中 T 是对象类型，可以转换为“指向 cv void 的指针”类型的纯右值。

另请注意，Visual Studio 调试器的工作方式类似，但*并非完全*如此。不同之处在于它忽略了 cv 限定符。所以`void`在 Exceptions 对话框中实际上意味着任何`[any cv] void*`. 捕获处理程序**不会忽略**它们：

```
try
{
   struct Throwee {};
   const Throwee* t = nullptr;
   throw t;      
}
catch(void* e)
{
   // Will be missed
   std::cout << "Gotcha!" << std::endl;
}
catch(const void* e)
{
   // Will be catched
   std::cout << "Gotcha const!" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T08:41:30.610

我发现它会在抛出`void*`,`int*`或时打破`char const*`，但不是`int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:48:49.600

这可能是 catch (...) 的设置。要么传播`throw;`声明。

# types - 为什么 Ada 编译器会让范围违规通过？为什么我的类型声明是运行时实体？

> ID：14526945
> 
> 赞同：3
> 
> 时间：2013-01-25T17:15:06.607
> 
> 标签：types, runtime, range, ada, compile-time

为什么 Ada 编译器会让范围违规通过？它确实给出了警告，但是如果它在任何情况下都是错误的，为什么它让它通过呢？是否存在一种实用的行为，在这种情况下这是一种有用的行为？

最重要的是：为什么类型声明是运行时实体？我的意思是代码示例的第 3 行是我希望提前评估的内容。我认为只有第 5 行会“使它”成为可执行文件。为什么不？那东西有用吗？我在这里遗漏或误解了某些东西吗？

```
with Ada.Text_IO;
procedure question is
    subtype Test is Natural range -1 .. 10;
begin
    Ada.Text_IO.Put_Line ("foobar");
end; 
```

注意：结果与“type Test is new Natural range -1..10;”相同

注意：GNAT 4.6

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T17:53:03.197

[此 comp.lang.ada 消息](http://coding.derkeiler.com/Archive/Ada/comp.lang.ada/2007-11/msg00087.html)表明您至少需要`-gnato -fstack-check`命令行选项才能使 Gnat 成为兼容的 Ada 编译器。

但这不是这里的问题：编译器确实会警告范围错误；与 Gnat 我得到：

```
gnatmake -gnato -fstack-check question
question.adb:3:35: warning: static value out of range of type "Standard.Natural"
question.adb:3:35: warning: "Constraint_Error" will be raised at run time 
```

以及运行时的明显错误。

在这种情况下，因为范围是静态的，编译器可能已经捕获了错误；但正如您所猜测的那样，通常直到运行时才能完全确定类型，如下例所示。

```
with Ada.Text_IO;
with Ada.Command_Line;

procedure question is
   subtype Arguments is Natural range 1 .. Ada.Command_Line.Argument_Count;
begin
   for i in Arguments loop
      Ada.Text_IO.Put_Line ("Argument " & integer'image(i) & 
                            " is " & Ada.Command_Line.Argument(i)); 
      declare
         OneArg : constant String := Ada.Command_Line.Argument(i);
         subtype Characters is Natural range OneArg'range;
      begin
         null;  -- process the string here
      end;   
   end loop;
end; 
```

在您运行程序之前，这两个子类型都不知道。

声明块显示了一个我觉得非常有用的相关模式，它不仅允许可变 [子] 类型，而且在堆栈上分配可变大小的对象，以便在每次循环迭代时自动回收和重新调整大小。（您可以像在其他语言中一样使用“new”进行分配，并使用“unchecked_deallocation”进行免费分配，但很多时候，就像这里一样，根本不需要）

# get - 如何使用 AngularJS 删除 GET 参数？

> ID：14526947
> 
> 赞同：8
> 
> 时间：2013-01-25T17:15:15.123
> 
> 标签：get, angularjs, url-routing

```
#/order/123?status=success 
```

击中路线`'/order/:id'`并前往`OrderCtrl`。

一旦我们访问`$routeParams.query`，我们想要清除 的 url `#/order/123`。如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T17:27:03.583

使用该`$location`服务，您可以通过为其分配一个空值来删除搜索参数：

```
$location.search( 'status', null ); 
```

但是您应该注意，默认情况下，这将重新加载当前路由。如果您不想重新加载当前路由，可以在路由定义中禁用它：

```
$routeProvider.when( '/order/:id', {
  // yada yada...
  reloadOnSearch: false
}); 
```

但是`$routeUpdate`意志仍然会触发并且可以做出反应。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-12T14:59:35.820

删除所有搜索参数的更有效方法可能是

```
$location.search({}); 
```

# javascript - 如何确定 JS 文件是否与 AMD 兼容？

> ID：14526949
> 
> 赞同：2
> 
> 时间：2013-01-25T17:15:24.720
> 
> 标签：javascript, jquery, asynchronous, amd, curl.js

我正在使用`curl`或`require`（同时评估两者）异步加载 js 文件。我在原型应用程序中使用了 5 个 js 文件：

```
jquery.min.js // off of CDN
Bacon.js // reactive programming tool
curl.js  // js loader
index.coffee // page specific
foo.coffee // app specific 
```

好的，所以我构建了`index.coffee`and `foo.coffee`，所以我很确定它们与 AMD 不兼容。虽然可能是错的，因为`foo.coffee`有

```
if module? && module.exports?
  module.exports = Foo 
```

在最后。

如何查看 js 文件并说“是的，AMD”或“不，不是 AMD”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:35:29.103

寻找`define(`AMD 的签名。这是一个*相当*确定的赌注。不幸的是，它几乎可以在文件中的任何位置。它通常位于顶部或底部。AMD 模块和多种 UMD 模块格式也有很多变体：[https](https://github.com/umdjs/umd) ://github.com/umdjs/umd和[https://gist.github.com/unscriptable/4118495](https://gist.github.com/unscriptable/4118495)。

Fwiw，您也可以将原始 CommonJS 模块与 curl.js 一起使用。您必须将 CJS 模块放入一个文件夹并告诉 curl 它是一个使用 CJS 模块的包：

```
curl.config({
    packages: [
        { name: 'foo', location: 'path/to/foo-folder', main: 'foo',
            config: { moduleLoader: 'curl/loader/cjsm11' }
        },
        { name: 'curl', location: 'path/to/curl/src/curl', main: 'curl' }
    ]
}); 
```

您需要 curl 包（或路径）来告诉 curl 在哪里可以找到 curl/loader/cjsm11。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:29:01.413

AMD 意味着，您可以根据需要评估代码，而不是在加载时。因此，如果您的代码在下载后立即执行 - 它不是 AMD。如果它有一个包装器，允许按需执行代码 - 它可以像 AMD 模块一样工作。

如果您正在寻找[确切的 AMD API](https://github.com/amdjs/amdjs-api/wiki/AMD)`define` ，您应该在文件开头搜索word。

# grails - grails log4j 活动记录器

> ID：14526953
> 
> 赞同：0
> 
> 时间：2013-01-25T17:15:39.380
> 
> 标签：grails, groovy, log4j, grails-2.0

是否可以激活 | 通过停用记录器`Config.groovy?`

例如：

```
log4j = {

    appenders {

        file name:'connections', file: '/tmp/connection.log'
        file name:'view', file:'/tmp/view.log'
    }

    root {
        off 'connections', 'view'
    }

    info connections: "grails.app.controllers.ViewController",
            consultations: "grails.app.controllers.ConnectController"

} 
```

如何停用所有“连接”记录器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:00:38.927

如果您想停用对特定附加程序的所有日志记录，您可以通过设置附加程序的*阈值来实现*

```
log4j = {
    appenders {
        file name:'connections', file: '/tmp/connection.log',
             threshold:org.apache.log4j.Level.OFF 
```

但这仍然会创建该`connection.log`文件，即使没有任何内容要记录到该文件中。另一种方法是利用 log4j DSL 是 Groovy 代码这一事实：

```
log4j = {
    appenders {
        if(config.log.connections) {
            // use a file appender for 'connections'
            file name:'connections', file: '/tmp/connection.log'
        } else {
            // use a NullAppender, which simply ignores anything it is
            // asked to log
            'null' name:'connections'
        } 
```

这将使您可以使用打开或关闭“连接”登录

```
log.connections=true 
```

`Config.groovy`在（log4j 闭包之外）的主要部分或您使用`grails.config.locations`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:25:29.500

要停用，请尝试以下操作：

```
root {
    info 'connections', 'view'
}

off connections: 'grails.app.controllers.ViewController' 
```

要激活，然后更改`off`回`info`：

```
info connections: 'grails.app.controllers.ViewController' 
```

# java - 在 .jar 文件路径中使用空格从 Java 运行 Java 应用程序

> ID：14526955
> 
> 赞同：2
> 
> 时间：2013-01-25T17:15:41.537
> 
> 标签：java

我正在尝试从 Java 应用程序中运行 Java CUP（LEX/YACC 解析器的 Java 版本）。

这是我拥有的代码（我从互联网上复制了大部分代码）：

```
String command  = "java " +
                  "-jar " +
                  "\"g:My Documents\\Dropbox\\Final Project\\Code\\Mano CPU\\Inputs\\Parser\\java-cup-11a.jar\" " +
                  "-destdir " +
                  "\"g:\\My Documents\\Dropbox\\Final Project\\Code\\Mano CPU\\src\\Assembler\" " +
                  "\"G:\\My Documents\\Dropbox\\Final Project\\Code\\Mano CPU\\Inputs\\Assembler\\Assembler.cup\"";

Process p = Runtime.getRuntime().exec(command);
BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream()));
String line=reader.readLine();
while(line!=null)
{
    System.out.println(line);
    line=reader.readLine();
} 
```

当我在 Win 7 的命令提示符下运行此命令时（不转义反斜杠和双引号），它会被执行。如果我在“-jar”之后注释掉所有内容，我会得到 java 选项（这是预期的，因为该命令是非法的），所以我知道它可以运行。

我的猜测是传递带有空格的路径是问题所在。我尝试使用 String[]，但得到了相同的结果。转义空格也会导致错误。

有人知道我该如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:21:51.647

看起来您缺少 jar 路径中的第一个反斜杠：

```
String command  = "java " +
                  "-jar " +
                  "\"g:My Documents\\Dropbox\\Final Project\\Code\\Mano CPU\\Inputs\\Parser\\java-cup-11a.jar\" " + 
```

应该

```
String command  = "java " +
                  "-jar " +
                  "\"g:\\My Documents\\Dropbox\\Final Project\\Code\\Mano CPU\\Inputs\\Parser\\java-cup-11a.jar\" " +
                       ^^ 
```

* * *

**编辑：** millimoose 指出[`Runtime#exec(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)不使用 shell 来调用，所以我检查了文档，它显然只是使用 a[`StringTokenizer`](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)来*分割空格*。Java 会拆分您的命令参数，即使它们用双引号括起来。因此，除了解决上述反斜杠问题之外，您还需要使用[`exec`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)接受`String[]`. 而且您不需要双引号包含空格的参数。

```
String[] command = new String[] {
                       "java",
                       "-jar",
                       "g:\\My Documents\\Dropbox\\Final Project\\Code\\Mano CPU\\Inputs\\Parser\\java-cup-11a.jar",
                       "-destdir",
                       "g:\\My Documents\\Dropbox\\Final Project\\Code\\Mano CPU\\src\\Assembler",
                       "G:\\My Documents\\Dropbox\\Final Project\\Code\\Mano CPU\\Inputs\\Assembler\\Assembler.cup",
                   };

Process p = Runtime.getRuntime().exec(command); 
```

# ios - 带有垂直滚动的视图内的 UICollectionView 和 ScrollView

> ID：14526963
> 
> 赞同：5
> 
> 时间：2013-01-25T17:15:58.727
> 
> 标签：ios, xcode, scroll, uicollectionview

如何滚动整个窗口，顶部带有 UIScrollView 以显示图像库，以及 UICollectionView 以显示其他项目？（见下面的样机）

我尝试了这种结构，但只有集合视图滚动并且滚动视图保持在顶部。

*   看法
    *   UIScrollView
    *   UICollectionView

我应该使用什么控件来对滚动视图和集合视图进行分组以在整个窗口上进行垂直滚动（以及集合视图随其内容增长）？

[样机] [http://img835.imageshack.us/img835/3138/prototyperl.png](http://img835.imageshack.us/img835/3138/prototyperl.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T06:49:16.817

我只会使用 UICollectionView 并将 UIView 添加为第一部分的标题 - 它也将是最简单的解决方案。

如果您将 UICollectionView 包装在 ScrollView 中并调整 UICollectionView 的大小以适应内容大小，您很可能会获得较差的性能，因为在显示视图时将呈现所有单元格（而不是在单元格可见时） - 缺少可重用单元格的点。

覆盖 UICollectionViewDataSource 委托方法：

```
-(UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:32:11.310

UIScrollView 作为父级，其他两个作为子级

*   UIScrollView
    *   界面视图
    *   UICollectionView

# wcf - 应用程序架构和 BizTalk

> ID：14526965
> 
> 赞同：0
> 
> 时间：2013-01-25T17:16:02.943
> 
> 标签：wcf, architecture, console-application, biztalk, biztalk-2010

**应用程序设置** 我创建了一个内部 WCF 服务，它调用网络上的 RESTful 服务并从中获取 JSON 数据。我使用使用计划作业运行的控制台应用程序每天调用一次内部 WCF。

我的问题是，由于我们将来会迁移到 BizTalk 2010 来做这些事情，是把 GET 请求代码保留在 WCF 服务中还是完全消除 WCF 服务并将代码直接放在控制台应用程序中更好？我在想将来我可以让 BizTalk 调用 WCF 服务，而不是让 BizTalk 运行控制台应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T08:58:32.470

最佳解决方案是在 BizTalk 流中使用 RESTful 服务。这样，端口将发送和获取消息，您将能够在出现错误时对其进行调查。您不需要另一个“隧道”来使用该 RESTful 服务。

您可以在这里查看它是如何完成的： [http ://social.technet.microsoft.com/wiki/contents/articles/2474.invoke-restful-web-services-with-biztalk-server-2010.aspx#ReST_what](http://social.technet.microsoft.com/wiki/contents/articles/2474.invoke-restful-web-services-with-biztalk-server-2010.aspx#ReST_what)

# domain-driven-design - 更新聚合根内的多态子实体

> ID：14526969
> 
> 赞同：2
> 
> 时间：2013-01-25T17:16:08.263
> 
> 标签：domain-driven-design, aggregateroot

我试图弄清楚在聚合根中更新多态子实体的最佳方法是什么。作为参考，假设我有一个存储对象的`ShippingContainer`根实体；`Cargo`有许多类型的`Cargo`对象，例如 、`BigCargo`等`HazardousCargo`，每一种都有自己独特的属性。

我正在阅读这个问题：[更新聚合中的实体](https://stackoverflow.com/questions/7196820/update-an-entity-inside-an-aggregate)

这个问题的答案似乎表明我应该将该`ChangeCargo`方法放在`ShippingContainer`采用某种 DTO 参数对象的对象上。我的问题是，当您尝试更新的对象是多态的时，这是否仍然是最佳实践（我现在是否需要镜像 Cargo 对象类型的 DTO 对象层次结构？），还是我应该做其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:35:42.833

如果 ChangeCargo 用例知道它希望更改的特定货物类型，那么每个货物类型可能会有此方法的特定版本。

但是，如果更改本身与货物类型无关，那么最好利用多态性并将更新委托给每个货物子类型。可以使用 DTO、值对象或一些参数来表示更改。

例如（C#）：

```
class ShippingContainer
{
    List<Cargo> cargos;

    public void ChangeCargo(string cargoId, DateTime expectedArrival, ...)
    {
        var cargo = this.cargos.FirstOrDefault(cargo => cargo.Id == cargoId);
        cargo.Change(expectedArrival, ...);
    }
}

class BigCargo : Cargo
{
    public void Change(DateTime expectedArrival, ...) { }
}

class HazardousCargo : Cargo
{
    public void Change(DateTime expectedArrival, ...) { }
} 
```

以 开头的参数`expectedArrival`可以是 DTO 或任何最能代表更改的参数。

# python - 尝试使用 pip 将 Python 2.7.0 升级到 Python 2.7.3：SyntaxError; python2和python3之间的混淆？

> ID：14526971
> 
> 赞同：3
> 
> 时间：2013-01-25T17:16:13.873
> 
> 标签：python, pip

我在`/local/gerrit/python2.7`. 我想将此升级到 Python 2.7.3。我正在尝试为此使用 pip，但不知何故它似乎在 python2 和 python3 之间混淆了：

```
$ pip install --upgrade 'python>=2.7,<2.7.99'
Downloading/unpacking python>=2.7,<2.7.99 from http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2
  Running setup.py egg_info for package python
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/local/gerrit/python2.7/build/python/setup.py", line 1804
        exec(f.read(), globals(), fficonfig)
    SyntaxError: unqualified exec is not allowed in function 'configure_ctypes' it contains a nested function with free variables
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/local/gerrit/python2.7/build/python/setup.py", line 1804

    exec(f.read(), globals(), fficonfig)

SyntaxError: unqualified exec is not allowed in function 'configure_ctypes' it contains a nested function with free variables

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /local/gerrit/python2.7/build/python
Storing complete log in /storage4/home/gerrit/.pip/pip.log 
```

看起来`/local/gerrit/python2.7/build/python/setup.py`实际上有一个 python3 语法，有些东西搞砸了。我的诊断正确吗？如何以不需要重新安装 Python 及其所有库的方式清理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:57:42.167

您可能需要使用类似[pythonz](https://github.com/saghul/pythonz)的东西来管理同一台机器上的多个 python 安装。

然后，当您使用诸如 virtualenv 之类的东西时，您将希望将它们指向您安装的二进制文件，您将拥有一个带有特定 python 副本的可用 virtualenv

`virtualenv -p /path/to/python`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T00:30:39.593

另一种选择是[pyenv](https://github.com/yyuu/pyenv)，它是 pythonz 的替代品。它的优点是不依赖于 Python 本身。

# sql-server - 在 SQL 中将不完整的字符串转换为日期

> ID：14526975
> 
> 赞同：0
> 
> 时间：2013-01-25T17:16:29.883
> 
> 标签：sql-server

我有一个包含缺少年份的时间戳的数据列表，这些数据的目的是用于预测，所以我们将继续关注未来的年份，但是如何将这些字符串存储为日期？

它们遵循以下格式：

`01 Jan`

`02 Jan`

...

`31 Jan`

我认为 SQL 会以最少的年份和时间自动转换它们，但它会抛出转换失败的错误。有任何想法吗？我不是一个 sql 人，所以我很难过。

*更多信息*

我需要将这些存储在现有表中，该表具有用于时间戳的 datetime 列，否则我只需将它们存储为字符串并在 UI 中进行转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:23:05.523

你可以这样做

```
select CAST('01 Jan ' + CAST(YEAR(GETDATE()) AS VARCHAR) As datetime) 
```

或者

```
select CAST(columnname + ' ' + CAST(YEAR(GETDATE()) AS VARCHAR) As datetime)
FROm TableName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:23:07.397

```
SELECT CAST(Field + ' ' + CAST(Year(GetDate()) AS Varchar) AS DateTime)
FROM YourTable 
```

还有[小提琴](http://sqlfiddle.com/#!3/d1095/1)。

祝你好运。

# c++ - error in compiling c++ code using MSBuild from command prompt

> ID：14526979
> 
> 赞同：2
> 
> 时间：2013-01-25T17:16:41.583
> 
> 标签：c++, windows-7, msbuild

I have multiple c++ projects with inter dependency. To compile them together I made a batch script. I used below command to compile

```
 MSBuild.exe "xyz.sln" /p:Configuration=Debug /p:Platform=x64 /t:REBUILD /fileLogger /p:DebugSymbols=true /nr:true 
```

All projects were getting compiled few months back, but now when I am trying to build them from command prompt build is failing and I am getting dialog box with message

```
Application was unable to start correctly (0xc000007b). Click OK to close the application. 
```

and build is failing with below error.

```
(ClCompile target) ->C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\Microsoft.Cpp
.x64.Targets(146,5): error MSB6006: "CL.exe" exited with code -1073741701. 
```

But if I try to compile projects from visual studio 2010 then project is getting compiled successfully.

Is this problem anywhere related to windows updates?

My operating system is Windows7 and application is 64bit. Build is failing in both Debug and Release mode with x64 configuration.

Can anyone suggest a solution for it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T08:06:56.743

PATH 是否在运行 bat 文件的进程中设置正确？有时安装软件会更改路径，我发现从错误的应用程序中找到了通常命名的 DLL。

# android - onDraw of custom view not being called

> ID：14526981
> 
> 赞同：0
> 
> 时间：2013-01-25T17:16:47.713
> 
> 标签：android

I have a custom view extending ImageView. onDraw() is never called.

Nothing complicated:

```
public class NVGlobeView extends ImageView{ 
```

I have all 3 constructors:

```
 public NVGlobeView(Context context) {
        this(context, null);
    }

    public NVGlobeView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public NVGlobeView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        mContext = context; 
```

I've overidden onMeasure and forced a fixed size to ensure that the view does not have a zero dimension. I know that my view is added to the layout since onMeasure() is called and I can step through it to verify the size is set correctly. I've also validated it with the heirarchy viewer on an AVD.

```
 @Override
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        //setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight());

        DisplayMetrics dm = mContext.getResources().getDisplayMetrics();
        setMeasuredDimension(dm.widthPixels-50,dm.heightPixels-100);
} 
```

Finally, the onDraw()

```
@Override
protected void onDraw(Canvas canvas) {

    super.onDraw(canvas);

} 
```

I put a breakpoint on the super call and it's never reached.

Here's the associated activity code.

```
 setContentView(R.layout.nvglobeview);

    NVGlobeView globeView = (NVGlobeView)findViewById(R.id.globeView);
    globeView.invalidate(); 
```

Any ideas what I've missed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:59:13.660

猜测，也许您返回的测量结果是视图不占用可见空间。

# http-headers - 使用 G-WAN 时的 20 秒响应 /?noheaders.c

> ID：14526982
> 
> 赞同：0
> 
> 时间：2013-01-25T17:16:51.713
> 
> 标签：http-headers, browser, latency, g-wan

当我在 Web 浏览器中输入 URL`http://localhost:8080/?noheaders.c`时，无论使用哪种浏览器（IE、Chrome 或 Firefox），G-WAN 似乎都会在响应前 20 秒内阻塞。

*   这是什么原因造成的？

*   我们怎样才能避免呢？

感谢您的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:28:45.247

> 这是什么原因造成的？

这与 G-WAN 无关：这是一个 HTTP 协议问题。

该`noheaders.c`脚本演示了如何生成*没有 HTTP 标头*`JSON`的回复。此回复应该由浏览器中运行的代码获取，请参阅示例以获取说明。*`Javascript``comet.c`*

 *当存在*“Content-Length”* `HTTP header`时，浏览器不必等待超过加载*指定数据量*所需的时间。

*缺少*“内容*长度”* `HTTP header`迫使 Internet 浏览器猜测何时停止等待更多数据（它们会等待一段时间，不显示任何内容，然后在超时后显示收到的所有内容）。

> 我们怎样才能避免呢？

该机制在[另一个示例](http://gwan.com/source/stream3.c)中进行了解释，使用流和分块编码来防止浏览器阻塞。

没有提供*“Content-Length”*，因为这里的长度是事先不知道的。分块编码告诉浏览器，在它们收到和 End-Of-Reply 标记之前，它们应该读取更多数据。*

# c# - IIS 回收时运行任务会发生什么

> ID：14526983
> 
> 赞同：3
> 
> 时间：2013-01-25T17:16:54.313
> 
> 标签：c#, asp.net, c#-4.0, iis, iis-7.5

为了帮助提高客户端的性能，我将请求的处理卸载到任务上。这样做是因为处理通常需要一些时间，而且我不希望客户端等待一段时间才能获得 200 响应。将工作卸载到任务上的 Web 服务始终在处理帖子。

```
public void ProcessRequest(HttpContext context)
{
    // check for bad requests -- return 400

    // get copy of the context input stream

    Task.Factory.StartNew(() =>
    {
        ProcessRequest(contextInputStreamCopy);
    });
}

private void ProcessRequest(Stream inputStream)
{
    try
    {
        // process input stream
    }
    catch(Exception ex)
    {
        // any server error that would normally result in 500 response are not
        // exposed to the clients, the clients are to see 200 when the server 
        // encounters an error
    }
} 
```

所以我的问题是当 IIS 回收或网站停止时这些任务会发生什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T17:27:02.127

当 IIS 回收时，它会等待所有线程完成并退出 - 直到池中的超时值。在那之后，他们会杀死所有正在运行的线程并重新开始。

因此，您可以设置一个信号给您的线程以在应用程序请求关闭时停止`globa.asax`使用这些`Application_End`功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T17:26:47.597

> IIS 回收时运行任务会发生什么

当 IIS 回收时，它只会相应地降低您正在运行的任务。如果您的任务需要一些时间，您应该考虑在单独的进程上运行您的任务。一种纠正方法是使用队列（MSMQ、RabbitMQ ...）来存储您的任务并使用另一个进程从队列中选择您的任务以运行。为此，您可以使用带有调度程序的 Windows 服务或控制台主机。

[菲尔·哈克的更多信息](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)：

> 当 ASP.NET 拆除 AppDomain 时，它将尝试刷新现有请求并在拆除 App Domain 之前给它们时间来完成。ASP.NET 和 IIS 会考虑它们知道正在运行的代码，例如作为请求的一部分运行的代码。
> 
> 问题是，ASP.NET 不知道在使用计时器或类似机制产生的后台线程上完成的工作。它只知道与请求相关的工作。

# python - printing lists of unknown sizes side by side

> ID：14526984
> 
> 赞同：0
> 
> 时间：2013-01-25T17:16:57.320
> 
> 标签：python, arrays, list, loops, dictionary

I have multiple sets of pairing lists stored in the dictionaries "dates" and "prices". The lists are of unkown sizes, but I would like to print them side by side as in:

```
date_value1 price_value1 date_value2 price_value 2 
```

At this moment, however I can only get it to print one after the other, as in:

```
for i in range(len(cities)):
    for j,k in zip(dates[i],prices[i]):
        print str(i) + " ; " +  j.text +" ; "+ k.text 
```

I have tried to get it to do what I want by doing:

```
a = {}
for i in range(len(cities)):
    for j,k in zip(dates[i],prices[i]):
        print str(i) + " ; " +  j.text +" ; "+ k.text
        try:     a[i] = a[i-1] + " ; " + j.text +" ; "+ k.text
        except:  a[i] = " ; " + j.text +" ; "+ k.text

for i in a[len(cities)-1]:
    print a 
```

But it does something else entirely different which I really couldnt figure out.

Can you help? Thanks.

* * *

This is how I fixed my code. Thank you F.J

```
a = 100000
for i in xrange(len(citynames)):
    if len(precos[i]) < a: a = len(precos[i])
    print citynames[i], " ; "," ; ",
print    

for j in xrange(a):
    for i in xrange(len(citynames)):      
        print datas[i][j].text, " ; " ,precos[i][j].text, " ; ", 
    print 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:21:19.663

所以我认为你在这里缺少的关键部分是如何在不自动添加换行符的情况下打印，只需`,`在末尾添加一个，例如：

```
for i in range(len(cities)):
    for j,k in zip(dates[i],prices[i]):
        print str(i) + " ; " +  j.text +" ; "+ k.text,
    print 
```

`print`内部循环内的每个语句`for`都将附加一个空格而不是换行符。内部 for 循环之后的`print`语句只是打印换行符，因此在下一次迭代中您从新行开始（不确定是否需要）。

但是，更好的选择是研究使用[`str.join()`](http://docs.python.org/2/library/stdtypes.html#str.join)来构造您要打印的整个字符串。例如：

```
for i in range(len(cities)):
    print ' '.join(str(i)+" ; "+j.text+" ; "+k.text for j, k in zip(dates[i], prices[i])) 
```

请注意，我不知道这是否是您想要的确切格式，但您应该能够根据需要调整它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:57:56.383

另一个答案有效，但如果我在代码审查中看到这一点，我会将这个答案作为评论留下：

格式化数据，然后呈现。

创建一个行列表，以您想要的方式格式化。然后打印行。这种方法也更容易测试、更具可读性和解耦。

```
def append_to_rows(city, dates, prices, row):
  for date, price in zip(dates, prices):
    row.append(' ; '.join([city, date.text, price.text]))

def print_rows(rows):
  for row in rows:
    print row

def print_data(cities, prices, dates):
  rows = []
  for city in cities:
    append_to_rows(city, dates[city], prices[city], rows)
  print_rows(rows) 
```

测试：

```
class Text(object):
  def __init__(self, text):
    self.text = text

cities = ['new york', 'san francisco', 'los angeles']
dates = {
  'new york': [
    Text('2008'),
    Text('2009'),
   ],
  'san francisco': [
    Text('2008'),
   ],
  'los angeles': [
    Text('2008'),
    Text('2009'),
    Text('2010'),
   ],
}
prices = {
  'new york': [
    Text('$500'),
    Text('$600'),
   ],
  'san francisco': [
    Text('$400'),
   ],
  'los angeles': [
    Text('$300'),
    Text('$400'),
    Text('$500'),
   ],
}

>>> print_data(cities, dates, prices)
new york ; 2008 ; $500
new york ; 2009 ; $600
san francisco ; 2008 ; $400
los angeles ; 2008 ; $300
los angeles ; 2009 ; $400
los angeles ; 2010 ; $500 
```

# ubuntu - A tool for just compiling local code over remote machine without tear?

> ID：14526989
> 
> 赞同：0
> 
> 时间：2013-01-25T17:17:19.100
> 
> 标签：ubuntu, development-environment, remote-server

is there any tool to compile locally written code on remote workstation based linux? It is generally so slow and time consuming to coding over ssh or X11\. Therefore I am looking fo an alternative tool to just compile the local code over remote machine. I write the code locally and send it to remote and see the result. I am looking for that kind of workaround>?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:04:02.917

在这种情况下，我遇到了两种常见的方法。他们都使用SSH。

1.  在 SSHFS 上编辑文件
2.  rsync 文件和构建

## 在 SSHFS 上编辑文件

在此选项中，您的远程计算机应运行 SSH 服务器。您的本地机器将使用 Fuse/SSHFS 从远程机器挂载一个目录。您在本地机器上编辑代码并通过 SSH 发出构建命令。

## rsync 文件和构建

在此选项中，您的源驻留在本地计算机上。您在本地机器上签出源，编辑它们。然后，您将拥有一个 shell 脚本，通过 SSH 将您的源代码同步到远程计算机并通过 SSH 构建。

在这两种情况下，您都必须使用 sed 或类似工具将远程机器输出的路径转换为本地机器上的路径，以识别错误消息并直接跳转到编辑器中的正确行。

# android - Android 2.3 Progressive Download Not Working

> ID：14526991
> 
> 赞同：1
> 
> 时间：2013-01-25T17:17:27.143
> 
> 标签：android, video, mp4, codec, android-2.3-gingerbread

Does work:

```
http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4 
```

Doesn't work:

```
http://media.lakewood.org.edgesuite.net/JOM/messages/564_750.mp4 
```

Code used:

```
Uri uri = Uri.parse(url);
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
intent.setDataAndType(uri, "video/mp4");
MainActivity.instance.startActivity(intent); 
```

I checked the codec types in VLC and they are identical. However, in the dev tools in chrome (network tab) I noticed that the bunny video works like a progressive download while the joel video comes down in chunks (even though it's supposed to be progressive).

Is there something I'm missing?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:36:08.780

不同之处在于，第一个是使用渐进式流媒体，而第二个是使用仅支持 3.0 及更高版本的实时流媒体。有关支持的协议，请参见此处：-

[http://developer.android.com/guide/appendix/media-formats.html#network](http://developer.android.com/guide/appendix/media-formats.html#network)

您已经发现第二个链接以小块的形式下载，这是实时流式传输的标志（即使内容不是必须实时的）。可以在此处找到有关此协议的更多信息：-

[http://en.wikipedia.org/wiki/HTTP_Live_Streaming](http://en.wikipedia.org/wiki/HTTP_Live_Streaming)

第一个似乎是使用渐进式流式传输，这并不是真正的流式传输，它将完整的 mp4 下载为一个文件，但确实允许在您有足够的缓冲后立即开始播放。

希望有帮助。

瑞安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:58:07.297

发现了问题。

# 564_750.mp4

*   1个视频流：AVC
*   1 个音频流：AAC
*   1 个文本流：EIA-608`<-- // problem`

视频在没有文本轨道的情况下重新编码，效果很好。

# scala - 匹配 Scala 列表中某处的对象

> ID：14526994
> 
> 赞同：1
> 
> 时间：2013-01-25T17:17:40.597
> 
> 标签：scala, pattern-matching

我正在尝试在 Scala 列表上进行模式匹配，如果所需类型的对象包含在列表中的任何位置，则该模式将匹配。

我试过：

```
case _ :: (something: DesiredSubclass) :: _ => ??? 
```

但这仅在我要查找的元素之前至少有一个元素时才匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:29:57.757

使用`if`警卫和`exists`高阶方法。

```
case xs if xs.exists(_.isInstanceOf[DesiredSubclass]) => ??? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T17:34:11.343

公开使用`isInstanceOf[SomeType]`是不雅观的。最好使用`match`-like`PartialFunction`文字表示法：

```
list.exists { case _: DesiredSubclass => true; case _ => false } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T17:40:35.633

模式匹配不能用于进行这样的任意搜索。你可以

```
list.collect{ case something: DesiredSubclass => something }.headOption 
```

获得包含该项目的选项。您不能在 match 语句中分配它，但如果获取该特定类真的很重要，您可以编写一个自定义提取器：

```
class DesiredSubclass(val s: String) {}
object FirstOfDesired {
  def unapply[A](xs: Seq[A]) = xs.collect{ case x: DesiredSubclass => x }.headOption
} 
```

现在，例如：

```
val list = 7 :: (new DesiredSubclass("fish")) :: Nil
scala> list match { case FirstOfDesired(ds) => println(ds.s); case _ => }
fish 
```

# python - Python: Replacing Asterisk with a character inputted by end user (Hangman Game)

> ID：14526995
> 
> 赞同：0
> 
> 时间：2013-01-25T17:17:40.923
> 
> 标签：python

I've been trying to program a Hangman Game for my Computing assessment, and I've hit a bit of a roadblock.

Basically, the program asks for a word from the user, and then runs a loop to create a string of asterisks, the same length of the inputted word.

Once one of the correct characters is inputted by the user, it will replace an asterisk with the correct character, but in order with the word. For example, if the word is "lie", and the user enters "i", it will change "***" to "*i*".

Code as below.

```
def guess_part(word):
    lives = 6
    LetterCount = 0
    LetterMask = ""
    for x in range(len(word)):
        LetterMask = LetterMask + "*"
    print LetterMask
    while lives != 0 and LetterMask.find("*")!=-1:
        LetterGuess = raw_input("Enter a letter to guess?")
        LetterCount = 0
        for char in word:
            LetterCount = LetterCount + 1
            if LetterGuess == char:
                print "Good Guess."
                LetterMask = LetterMask.replace(LetterMask[LetterCount], LetterGuess)
                print LetterMask

def rand_word():
    from random import randrange #import the randrange function, from "random"
    random_words = ['extraordinary','happy','computer','python','screen','cheese','cabaret','caravan','bee','wasp','insect','mitosis','electronegativity','jumper','trousers'] #list of different words which can be used by the program for the end user to guess.
    word = random_words[randrange(0, 15)] #pick a random number, and use this number as an index for the list, "random_words".
    guess_part(word) #call the function, "guess_part" with the parameter "word"

def user_word():
    print "All words will be changed to lowercase."
    print "Enter the word you would like to guess."
    print ""
    validation_input = False #Setting the validation unput to "False"
    while validation_input == False: #while the validation input is not False, do below.
        word = raw_input("") #Ask for input, and set the value to the variable, "word".
        if word.isalpha(): #If word contains only strings, no numbers or symbols, do below.
            word = word.lower() #set the string of variable, "word", to all lowercase letters.
            guess_part(word) #call the function, "guess_part" with the parameter, "word".
            validation_input = True #Break the while loop - set validation_input to "False".
        else: #if the above isn't met, do the below.
            print "Word either contained numbers or symbols."

def menu():
    print "Hangman Game"
    print ""
    print "Ashley Collinge"
    print ""
    print "You will have 6 lives. Everytime you incorrectly guess a word, you will lose a life."
    print "The score at the end of the game, is used to determine the winner."
    print ""
    print "Would you like to use a randomly generated word, or input your own?"
    print "Enter 'R' for randomly generated word, or 'I' for your own input."
    decision_bool = False #Set the decision_bool to "False".
    decision_length = False #Set the decision_length to "False".
    while decision_bool == False: #While decision_bool equals "False", do below.
        decision = raw_input("") #Ask for input, value set to the variable "decision".
        while decision_length == False: #While decision_length equals "False", do below.
            if len(decision) == 1: #If the length of decision eqausl 1, do below.
                decision_length = True #Set decision_length to "True."
                decision = decision.capitalize() #Capitalize the string value of decision.
                if decision == "R": #if the value of decision, eqauls "R".
                    print "You chose randomly generated word."
                    print ""
                    print "Forwarding..."
                    decision_bool = True #Set decision_bool to "True".
                    print ""
                    rand_word() #Call the function, rand_word()
                elif decision =="I": #If decision equals "I", do below.
                    print "You chose to input your own word."
                    print ""
                    print "Forwarding..."
                    decision_bool = True #Set decision_bool to "False".
                    print ""
                    user_word() #Call the function, user_word()
                else:
                    print "You entered an incorrect value for the question. Try again."
            else:
                print "You entered an incorrect value for the question. Try again."

menu() 
```

I've commented the majority of the code, but if there's anything that's a bit vague, I'll answer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:41:05.113

我不会为你写出你的整个程序，但简而言之：

假设`word`是单词（例如`word = 'liar'`）。然后我们需要一个函数，将一个单词和一组猜测的字母翻译成一串星号+已猜测的字母。

```
def asterisker(word, guesses=[]):
    result = ""
    for letter in word:
        result += letter if letter in guesses else "*"
        # which does what the below does:
        # if letter in guesses:
        #     result += letter
        # else:
        #     result += "*"
    return result 
```

给我们：

```
In [4]: asterisker("liar")
Out[4]: '****'

In [7]: asterisker("liar", ["l", "r" ])
Out[7]: 'l**r' 
```

我可能会这样写，尽管上面的原文可能更好/更清晰。

```
def asterisker(word, guesses=[]):
    return "".join(l if l in guesses else "*" for l in word) 
```

`lives`编辑：另外，正如迈克（首先）指出的那样，如果有人猜错了，你确实需要减少“ ”。

* * *

此外，这里有一些在编写 Python 时可以使用的技巧。

1) 不要使用大写的变量（如`LetterMask`）；而是使用`lettermask`or`letter_mask`如果您希望将其读取为两个单词。

2）诸如“ `validation_input = False #Setting the validation unput to "False"`”之类的注释没有帮助，并且会使您的代码混乱。很明显，您将变量设置为 False，因为这正是代码所说的。如果您正在做的事情更不清楚，评论可能会更有用。这（评论）实际上是编程中最难的部分之一，也是我仍在努力解决的问题。

3）您使用`print ""`；如果您只是想打印一个换行符，您可以简单地使用`print`（它将打印一个换行符），或者`\n`在您正在打印的字符串中的任何位置添加一个“”（一个换行符；这很酷）来打印一个换行符. 试试看我的意思。

4）而不是像`if something == False`你可以简单地说测试布尔值`if not something`，这更清楚。同样，如果您正在测试`if something == True`，您可以简单地说`if something`.

5）在我上面的解决方案中，我问自己“我想得到什么”，而不是“我如何从我所在的地方到达我想去的地方”。区别是微妙的，你可能会说“艾萨克是个白痴”，我的措辞可能不好，但这是一个重要的区别（我认为！）

祝你学习 Python/编程好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:55:41.923

你很近，但不完全在那里。这里有一些提示：

1）你需要`lives`减少`guess_part()`

2）这个：

```
LetterMask = LetterMask.replace(LetterMask[LetterCount], LetterGuess) 
```

没有按照你想要的方式工作。我会建议一些简单的东西，比如将其替换为：

```
LetterMask = list(LetterMask)
LetterMask[LetterCount-1] = LetterGuess
LetterMask = "".join(LetterMask) 
```

3）还要注意（上面）字母计数中的“-1”，因为字符串是从 0 开始的，所以你会差一个。

通过这几个调整，你基本上就在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:18:10.503

猜测您的问题出在`guess_part()`函数上，这是一个有效的版本：

```
def guess_part(word):
    lives = 6
    # Make a mutable array of characters same length as word
    LetterMask = bytearray("*" * len(word))
    while lives > 0 and LetterMask != word:
        print LetterMask
        while True:
            LetterGuess = raw_input("Enter a letter to guess: ")
            if LetterGuess: break
        LetterGuess = LetterGuess[0] # only take first char if more than one
        if LetterGuess in LetterMask:
            print "Sorry, you already guessed that letter. Try again."
            countinue
        GoodGuess = False
        for i, char in enumerate(word):
            if char == LetterGuess:
                GoodGuess = True
                LetterMask[i] = char
        if GoodGuess:
            print "Good guess."
        else:
            print "Sorry, bad guess"
            lives -= 1
    GuessedWholeWord = LetterMask == word
    if GuessedWholeWord:
        print "Congratulations, you guessed the whole word!"
    else:
        print "Sorry, no more guesses. You're hanged!"
    return GuessedWholeWord 
```

# javascript - 在最后一行之后停止 jQuery JSON 数组循环

> ID：14526997
> 
> 赞同：0
> 
> 时间：2013-01-25T17:17:48.153
> 
> 标签：javascript, jquery, ajax, json

我正在检索一个 JSON 数组并将结果显示为一个有**十个**项目长的列表。但是，如果找到的结果少于十个，则它会再次循环第一行。

我的代码：

```
$.ajax({
    url: 'http://www.entertainmentcocktail.com/cp/index.php?area=bn2',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 5000,
    success: function(data, status){

        var n = 0;

        while(n<10){            
        $.each(data, function(i,item){
            var places = item.name +
            ' where you can get' +
            ' a pint of <em>'+item.pint+'</em> for only ' +
            '<span>£'+item.cost+'!</span>';
            $('#placeList').append('<li id="listitem">'+ places +'</li>');
            n++;
        });
        }
    }
}); 
```

如何让代码显示前十行**或**收到的所有行，具体取决于哪一行较少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:19:27.563

这就是你所需要的：

```
success: function(data, status){    
    $.each(data, function(i,item){
        var places = item.name +
        ' where you can get' +
        ' a pint of <em>'+item.pint+'</em> for only ' +
        '<span>£'+item.cost+'!</span>';
        if (i < 10) {
            $('#placeList').append('<li id="listitem">'+ places +'</li>');
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:20:46.747

你不需要那个`while`。

```
$.each(data, function(i,item){
  if(i >= 10) return;

  var places = item.name +
    ' where you can get' +
    ' a pint of <em>'+item.pint+'</em> for only ' +
    '<span>£'+item.cost+'!</span>';
    $('#placeList').append('<li id="listitem">'+ places);
}); 
```

（可能有更聪明的方法来做你想做的事情，但这是你代码的快速修复）