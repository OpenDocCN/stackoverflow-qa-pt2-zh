# StackOverflow 问答 12735000-12735999

# php - Doctrine2 - HasLifecycleCallbacks - 语义错误

> ID：12735010
> 
> 赞同：1
> 
> 时间：2012-10-04T20:04:55.190
> 
> 标签：php, symfony, doctrine-orm

当我尝试在服务器上部署我的项目并在 CLI 中使用时

```
php app/console doctrine:schema:update 
```

我收到了这个错误：

```
[Doctrine\Common\Annotations\AnnotationException]
[Semantical Error] The annotation "@Doctrine\ORM\Mapping\prePersist" in method ... does not exist, or could not be auto-loaded. 
```

这是我的代码：

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity(repositoryClass="...")
 * @ORM\Table(name="...")
 * @ORM\HasLifecycleCallbacks()
 */
class User { 
```

localy 在我的 php5.4.4 WAMP 上一切正常。

任何的想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-04T21:23:20.047

你在某处使用：

```
/*
 * @ORM\prePersist
 */ 
```

代替

```
/*
 * @ORM\PrePersist
 */ 
```

这适用于您的 Windows，因为它具有不区分大小写的文件系统，而 linux 系统具有区分大小写的文件系统。

# java - 如何创建将安装可执行 Jar 的安装文件

> ID：12735013
> 
> 赞同：5
> 
> 时间：2012-10-04T20:05:00.400
> 
> 标签：java, windows, eclipse, jar, installation

我在 Windows 上的 Eclipse JavaEE 中创建了一个 Java 应用程序（对我来说是耶！！），并将它编译成一个可执行的 jar。我创建了一个运行该 jar 的 .bat 文件。我将所有内容放入一个文件夹系统中，其中包含成功运行我的程序所需的图像和库。

现在我想将它安装到其他计算机上。

我只需单击 bat 文件就可以了，但我希望我的用户能够看到开始菜单中显示的程序，并从那里启动它。我正在考虑创建一个 setup.exe 来处理安装，但不确定如何（iexpress.exe 适用于 .exe 程序）我真的不需要 setup.exe，只需将程序添加到开始菜单和指向它的bat文件，但是如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:07:55.290

看看[NSIS](http://nsis.sourceforge.net/Main_Page)工具。一个相当强大的、可编写脚本的安装程序创建系统，具有非常易于管理的学习曲线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:13:26.270

有几个安装程序生成器要么支持 Java 应用程序，要么专门设计用于为 Java 程序创建安装程序。在后一类中， [IzPack](http://izpack.org/)是更为人所知的一种。我从未使用 IzPack 开发过安装程序，因此我无法为您提供开发人员的视角，但我遇到了几个使用 IzPack 的软件包（请参阅它们的[参考资料](http://izpack.org/we-love-izpack/)），并且生成的安装程序非常好。

# visual-studio-lightswitch - Lightswitch 中的自定义 LINQ 查询

> ID：12735014
> 
> 赞同：0
> 
> 时间：2012-10-04T20:05:06.667
> 
> 标签：visual-studio-lightswitch

我对 LINQ 在 PreprocessQuery 中的工作方式感到困惑。我一直在对自定义搜索屏幕的更大查询问题进行故障排除。除了我最终隔离的一小部分之外，其余的查询似乎都有效：

```
query = query.Where(i => i.IntValue == 100); 
```

即使数据库显然具有匹配的值，这也不会返回任何结果。

但是，以下方法确实有效：

```
query = query.Where(i => i.StringValue == "value"); 
```

没有涉及任何计算字段，我以前见过这些问题。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:08:27.813

正如我[在 LightSwitch 论坛中回复您的问题时所说，我在](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/f2dcc15d-ef43-4224-8f7a-7784d9f2db14)*PreProcessQuery*方法中一直使用这种类型的比较，因此如果检查了以下场景，则不应发生此错误。

该物业是：

1.  ***int***类型（不是*byte*、*short*、*long*、*string*等）

2.  不可*为空*

在您发给论坛的帖子中没有建议的一件事（实际上，我只是检查了帖子，实际上建议使用此语法**，**但是我将把它留给其他人，以防他们没有意识到有两个语法），是尝试“替代语法”。

```
query = from q in query 
        where q.IntValue == 100
        select q; 
```

语法不应该有任何区别，但话又说回来，错误也不应该发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:54:10.510

在这种特殊情况下，我发现我有一个使用 Lightswitch 查询设计器构建的查询的残余。两个查询可以共存并相互补充，但（如在本例中）它们也可能相互干扰。从设计器清除查询后，我的基于代码的查询运行良好。

为了将来参考，如果您从设计器中的查询开始，并决定切换，您应该记住清除设计器中的内容。在[Lightswitch 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/f2dcc15d-ef43-4224-8f7a-7784d9f2db14)中，Yann 提到他总是默认使用代码构建查询，如果您有比简单查询更多的东西，这可能是一个不错的主意。

# javascript - 如何通过属性使用javascript获取表格单元格值

> ID：12735018
> 
> 赞同：0
> 
> 时间：2012-10-04T20:05:44.390
> 
> 标签：javascript, jquery, html, flexigrid

```
function getSelectedCopyDates() {
            var arr = new Array();
                //for every row that has a checked checkbox
                $("tr").has(".noteCheckBox:checked").each(function (i) {
                    if ($(this).id !== "checkAllNotes"){//since this doesn't have a "abbr=..." it breaks the code below "# syntax error"
                        //push the value of column(FName, LName) into the array 
                        arr.push($("#" + this.id + "> td[abbr='EventDate'] > div").text());
                    }
                });
            return arr;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:08:49.533

尝试这个

这是为了获取 td 中的文本

```
 $('td[abbr="FName, LName"]').text(); 
```

或者

```
$('td[abbr*="FName"][abbr*="LName"]').text(); 
```

获得价值试试这个

```
$('td[abbr*="FName"][abbr*="LName"]').attr('value') 
```

[检查小提琴](http://jsfiddle.net/sushanth009/xp5sE/1/)

[更新的小提琴](http://jsfiddle.net/sushanth009/xp5sE/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T20:09:25.717

如果通过“单元格值”您只是想在其中获取文本，`<td>`那么您可以执行以下操作**[`this`](http://jsfiddle.net/cZMXe/)**：

**HTML**：

```
<table>
    <tr>
        <td align="center" abbr="FName, LName">RAWR</td>
    </tr>        
</table>​ 
```

**jQuery** :

```
$("td[abbr='FName, LName']").text(); 
```

您可以使用 jQuery 的[`.text()`](http://api.jquery.com/text/)方法来获取给定元素中的值。

**编辑**：

看到您只需要获取`<td>`它们包含已选中复选框的 s ，因此这可能对您有用：

```
$("td[abbr='FName, LName'] > input:checked").parent().text(); 
```

查找所有`td[abbr='FName, LName'`包含已检查输入的内容，然后获取该元素父级的文本。

**[例子](http://jsfiddle.net/cZMXe/1/)**

```
//You won't need the on change event for you code. I only added it here to show you what happens when there are values and when there are no values.

$("input").on("change", function(){
    var arr = new Array();

    //for every row that has a checked checkbox
    $("tr").has(".noteCheckBox:checked").each(function(i){
       //push the value of column 5 (FName, LName) into the array 
       arr.push($("#"+this.id + "> td > div.c5").text());       
    });
    //Print the array to the console.
    console.log(arr);
});​ 
```

**[更新示例](http://jsfiddle.net/Qjxd9/2/)**

**编辑**：

你的功能应该是：

```
function getSelectedInvestigatorNames() {
   var arr = new Array();

   //for every row that has a checked checkbox
   $("tr").has(".noteCheckBox:checked").each(function(i){
      //push the value of column 5 (FName, LName) into the array 
      arr.push($("#"+this.id + "> td[abbr='FName, LName'] > div").text());       
   });

   return arr;
} 
```

# javascript - 嵌入式 Facebook 视频 - 检测用户何时播放视频

> ID：12735024
> 
> 赞同：3
> 
> 时间：2012-10-04T20:06:15.687
> 
> 标签：javascript, facebook, video, dom-events

我正在使用 Facebook 提供的嵌入代码在我的 Facebook 画布应用程序中嵌入视频（并且运行良好）：

```
<object width="1280" height="720">
     <param name="allowfullscreen" value="true"></param>
     <param name="movie" value="http://www.facebook.com/v/VIDEO_ID"></param>
     <embed src="http://www.facebook.com/v/VIDEO_ID" type="application/x-shockwave-flash" allowfullscreen="1" width="1280" height="720"></embed>
</object> 
```

我想要做的是在用户单击视频播放 10 秒后发布一个开放图形操作 (video.watches)。但是，我找不到任何关于如何与视频播放器交互的文档，或者是否有任何可以使用的 JavaScript 事件（就像我过去使用过的每个视频播放器一样）。

关于我如何做到这一点的任何想法？

# mysql - 按上次状态更改的 sql 组

> ID：12735026
> 
> 赞同：1
> 
> 时间：2012-10-04T20:06:18.083
> 
> 标签：mysql, reporting

我有一个存储日志信息的表（主要是状态变化）

表是这样的：

```
+----+--------+----------+---------------------+
| id | number |  status  |      timestamp      |
+----+--------+----------+---------------------+
|  1 |     25 | buffered | 2012-05-05 23:10:10 |
|  2 |     25 | sent     | 2012-05-05 23:10:11 |
|  3 |     26 | not sent | 2012-05-05 23:10:12 |
|  4 |     27 | buffered | 2012-05-05 23:10:13 |
+----+--------+----------+---------------------+ 
```

我需要按状态生成报告。但是号码的状态可以改变。

号码的状态可以从 开始，`buffered`然后更改为`sent`或`not sent`

`sent`or 可以以or开头，`not sent`在这种情况下，状态不会再改变

我认为在这些条件下，我可以按问题`sent`或`not sent`没有问题进行分组（这是正确的吗？）

但是我怎样才能只为`buffered`行生成报告呢？

在这个特定的示例中，如果有人问我：缓冲了哪些数字，正确答案是：`number 27`

PD

我认为标题并不能准确反映问题，如果有人有更好的标题，请随时更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:15:15.567

假设您的表名是“log_table”，这应该为您提供给定数字的最新状态：

```
 SELECT number, status FROM log_table  AS l WHERE timestamp = (SELECT MAX(timestamp) 
              FROM log_table WHERE number = l.number); 
```

**我对 MYSQL 的最大愿望之一**是它允许（但目前不支持）：

```
SELECT number, status FROM log_table GROUP BY number HAVING MAX(timestamp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:36:55.720

```
SELECT number, status FROM YOUR_TABLE t1 WHERE status  = :someStatus and NOT EXISTS (SELECT id FROM YOUR_TABLE t2 WHERE t1.id<>t2.id and t1.number = t2.number and t2.timestamp>t1.timestamp) 
```

请确保数字和时间戳字段包含为保证查询性能而创建的适当索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:01:36.903

这里是查询（没有子查询以获得更好的性能）：

```
select distinct
    l1.id,  l1.number, l1.status, l1.timestamp 
from 
    my_logs l1 
 left outer joing
    my_logs l2
        on l1.number = l2.number and l2.status <> 'buffered'
where 
    l1.status = 'buffered' and
    l2.number is null 
```

**解释：**

通过数字键加入您的表。第二次，表只取值不同于“缓冲”的行。如果在“第二个”表中找到一行，则表示它们的值与此数字的“缓冲”不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:19:22.250

按出现的顺序对所有状态进行分组，并仅选择以状态缓冲开始和结束的状态（只有状态：缓冲）

```
Select number, group_concat(status) allstatus 
from tablename
 group by number
 having allstatus regexp '^buffered$'
 order by timestamp 
```

# c# - 游戏 AI 的随机游走 + 探索算法。场景图块

> ID：12735028
> 
> 赞同：-1
> 
> 时间：2012-10-04T20:06:21.810
> 
> 标签：c#, algorithm, path-finding, navmesh

我正在尝试提出一种在基于场景图块的游戏中随机行走的算法。walker 需要能够随机导航，直到探索完所有图块或找到下一个级别。

到目前为止，如果演员踩到它，我已经探索了瓷砖。

然后它找到到下一个图块中心的路径。

但是它失败的地方是它经常认为它已经完成了探索，或者没有剩下的瓷砖了。

有没有地方可以寻找一些例子，好像我要粘贴源代码会很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:20:20.163

几年前我在Mac上做了一个这样的，并用“FLAGS”解决它以确定是否已经发生了什么/条件是否满足......

```
If FlagFinal=1 then (exit) else ... 
```

我游戏中的大部分事情都是用旗帜完成的。

因此，当在图块中遇到随机陌生人时，它会检查其他标志是否为 1。所以......在 MeetMilkMaid 上，如果 FlagCow=0，则（询问）否则（奖励）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:15:20.083

嗯...如果您的意思是真正的随机行走，则获取所有图块的列表，对其进行随机化，然后将随机项添加到堆栈（或队列）中。当你走向它时，从堆栈中弹出每个瓷砖。

```
Tile[] _tiles;
//... some code here to load the tiles

Tile[] _randomizedTiles;
//... some code here to randomize the tiles

Stack<Tile> _tilesToExplore = new Stack<Tile>( _randomizedTiles );

while ( _tilesToExplore.Count > 0 ){
    var l_nextTile = _tilesToExplore.Pop();
    //... some code to walk to the tile
} 
```

如果您的意思是伪随机“四处游荡”，那么您可以使用`List<Tile>`. 使用您自己的自定义解决方案来选择下一个图块（而不是从堆栈中弹出它）并同时`Tile`从`List`. 只要`List`不为空，就一直循环。

如果您有更高级的场景（您可能事先不知道切片，或者切片可能无法访问），那么您可能会发现这篇 CodeProject 文章（和演示代码）很有帮助：
[A* algorithm implementation in C#](http://www.codeproject.com/Articles/15307/A-algorithm-implementation-in-C)

**更多信息在 C#** [Stack 类 (MSDN)](http://msdn.microsoft.com/en-us/library/system.collections.stack.aspx)
[中随机化一个列表](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)

# javascript - 如何解析返回的 JSON 对象

> ID：12735030
> 
> 赞同：0
> 
> 时间：2012-10-04T20:06:25.687
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [如何将 json 字符串解析为 javascript 对象](https://stackoverflow.com/questions/3653844/how-to-parse-json-string-to-javascript-object)

我正在尝试使用 javascript 获取返回的 JSON 对象的值。

返回数据

```
data: "[{"userID":"35047","testID":"5","subject":"1"..and more}] 
```

在 javascript 中，我如何遍历 userID/testID 和 value...等。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T20:08:57.240

首先解析，`JSON.parse()`然后像对象一样访问它们。例子：

```
var obj = JSON.parse(your_data); 
```

然后

```
obj[0].userID 
```

解释：

*   外部`[]`创建一个数组，您可以通过下标访问数组元素，例如`obj[0]`.
*   内部`{}`创建一个对象，您可以通过名称访问字段。因此`obj[0].userID`,`obj[0].testID`等。

**笔记！**

`JSON.parse()`在 IE6/IE7 中需要一个 shim（参见[json.js/json2.js ）。](https://github.com/douglascrockford/JSON-js)它也可能在其他旧版浏览器中丢失。但是，您可以将它包含在所有浏览器中，因为它会检测到本机`JSON.parse()`存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:12:18.283

首先你需要解析 JSON，如果你只针对[这个](http://caniuse.com/json)绿色浏览器，那么你可以简单地做：

```
var myJson = JSON.parse(data); 
```

如果不是，您可以加载一个像[这样](https://github.com/douglascrockford/JSON-js)的外部解析库，然后以同样的方式进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:09:03.540

jQuery 可以解析 JSON - [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

这篇文章将向您展示如何迭代对象中的键/值对。

[如何循环或枚举 JavaScript 对象？](https://stackoverflow.com/questions/684672/loop-through-javascript-object)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:09:28.330

利用`JSON.parse()`

```
var object = JSON.parse(jsonString); 
```

# c - 我如何知道在 Linux 上使用哪个串行端口？

> ID：12735037
> 
> 赞同：7
> 
> 时间：2012-10-04T20:06:53.847
> 
> 标签：c, linux, serial-port

我将用 C 语言编写一个程序，该程序将通过串行端口打开一个连接，并“监听”传入的命令，然后它将采取一些行动并报告状态。

连接将通过 RS232（串行端口）进行，我试图了解如何知道要打开哪个端口。

使用 Windows 时，如果我连接我的 USB 串行设备，我会在设备管理器中看到“Prolific USB-to-Serial Comm Port (COM4)”……但在 Linux 端，我看不到任何变化`/sys/class/tty`or`/dev`区域，我一直看穿`ttyS0`现在`ttyS7`（我假设`S`根据[我读过](http://www.easysw.com/~mike/serial/serial.html)的内容代表串行）。

那么我怎么知道要连接哪一个呢？

**编辑**
当我在OpenSUSE 12.1 机器（3.1 内核）上**开发**它时，最终程序将在运行 2.4Linux 内核的板上的 uCLinux 上运行，所以我正在寻找适用于旧内核的纯 C 解决方案

仅供参考：本文答案中提到的[文件](https://stackoverflow.com/questions/2530096/how-to-find-all-serial-devices-ttys-ttyusb-on-linux-without-opening-them)`/sys`系统直到 2.6 内核才存在，我的限制迫使我坚持使用 2.4 内核中可用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:26:33.113

该命令`dmesg`将在插入模块时向您显示内核消息，该消息将给出它的设备名称。

文件系统就像windows上的`/proc`设备管理器——在某个地方会有一个tty设备列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:23:22.897

我用过的两件事：（a）查找控制线（DTR、DSR 等）和（b）打开“所有”端口并找出哪些端口似乎处于活动状态。在后一种情况下，如果您可以向串行设备发送消息并让它响应，这会有所帮助；这显然只有在设备会响应消息时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:02:59.553

签出`/proc/tty/driver/serial`- 你应该看到一个 uart，`16550A`而不是现有端口，`unknown`并且`rx`应该 > 0。如果您必须猜测将使用哪个端口，请打开所有可用端口。之后，您需要根据需要设置端口（波特率、奇偶校验、位等）或尝试猜测传入的波特率等。

# java - 弹出文本字段 Java

> ID：12735040
> 
> 赞同：2
> 
> 时间：2012-10-04T20:06:58.113
> 
> 标签：java, swing, popup, jframe, textfield

我有一个按钮，单击时我希望它加载一个文本字段（如弹出窗口）。这可能吗？

我调查过

```
this.setVisible(false);
new className().setVisible(true); 
```

但这意味着我需要一个新的 JFrame。我并不反对这个想法——我只是想问是否有更好的方法来做到这一点。如果可能的话，我希望它只加载一个文本字段而不是它周围的框架。

我刚刚按照下面的建议创建了 JOptionPane - 但我仍然遇到问题。弹出窗口出现，但框中不包含任何内容。

当鼠标点击类 1 时：

```
JOptionPane.showMessageDialog(this, MetaData.getTags()); 
```

2 类（我知道这不是抛出异常的最佳方法。这只是一个粗略的程序）。为感兴趣的人使用[元数据提取器。](http://www.drewnoakes.com/code/exif/)

```
public String getTags() {
        try {
            Metadata metadata = ImageMetadataReader.readMetadata(jpegFile);

            for (Directory directory : metadata.getDirectories()) {
                for (Tag allTags : directory.getTags()) {
                    System.out.println("MetaData Class: " + allTags);
                }
            }
        } catch (ImageProcessingException ex) {
            Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
        }
        return allTags;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:48:01.230

如果您想通过弹出窗口获取用户输入，您可以使用`JOptionPane.showInputDialog`. 它本质上将`JDialog`使用输入文本字段和确定/取消按钮来实例化 a。

如果您不喜欢这种“预制”库方法，则必须自己动手`JDialog`：使其模块化和通用化，这样如果将来您需要相同的工具，您就不必从头开始制作它或复制粘贴。
请注意，您可以在*没有外部框架*的情况下使用对话框（如果您正在寻找比窗口更少干扰的东西，例如工具提示）。请参阅[http://www.stupidjavatricks.com/?p=4](http://www.stupidjavatricks.com/?p=4)。

我没有看到其他选择。

# html - AS3：如何在 TextArea 对象的 htmlText 中缩小多个外部 html 图像？

> ID：12735041
> 
> 赞同：1
> 
> 时间：2012-10-04T20:06:58.720
> 
> 标签：html, css, image, actionscript-3, flash

我是 AS3 的新手，最后一次接触 Flash 是在 Macromedia 第 4 版中。

我正在构建一个 flashapp 来通过 html 数据显示图像。数据通过属性填充到`TextArea`对象中。`htmlText`容器有固定的`TextArea`宽高；

在 html 数据中，我有多个`<img>`引用外部图像的标签。但是，当参考的图像大于`TextArea`尺寸时，就会出现问题。

```
import fl.controls.TextArea;

var box:*;

box = TextArea();
box.htmlText = "External HTML Data with multiple <img src='elsewhere.jpg'> tags" 
```

外部数据中的图像没有任何`id`属性。

我已经尝试使用 styleSheet 属性设置 css 样式，但 flash 仅支持 CSS1 规范的子集。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StyleSheet.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StyleSheet.html)

所以css`max-width`无处可寻。

我读过的最接近的解决方案是使用 来自 TextField 对象的`getImageReference`方法 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#getImageReference() 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#getImageReference%28%29)

该方法需要先加载图片中的图片，然后`getImageReference`通过`id`属性调用获取到`DisplayObject`可以操作的图片。

从这里开始，我似乎需要`string.match`在外部数据上获取一个方法来匹配并`id`为每个`<img>`标签插入不同的属性。然后，加载后，必须循环手动计算每个图像的大小，然后设置它们的缩放属性以保持纵横比。

这个解决方案看起来很复杂，实际上可能不起作用。

我想问一下是否有人有更好更简单的解决方案，而我在阅读文档时可能会错过。

感谢所有帮助。提前致谢。

# c++ - 带有对象键、查找和比较功能的映射

> ID：12735042
> 
> 赞同：0
> 
> 时间：2012-10-04T20:07:05.617
> 
> 标签：c++, maps

所以我有一张地图：

```
std::map<time_t, obj*, CompFunc> 
```

我正在使用基于 time_t 年份的 CompFunc 插入。我可以遍历地图，并按照我的意愿按年顺序插入所有内容。但是当我：

```
typedef std::map<time_t, obj*, CompFunc>::iterator Iter;
Iter it = y.find(e1);
std::cout << ctime(&e1);  <-- prints out Mon Apr 10 17:45:00 1944, exact match to time_t object in map
std::cout << ctime(&it->first);  <-- prints out Wed Dec 31 18:00:07 1969???? 
```

因此，当我：

```
y.erase (e1);
    //or
y.erase(it->first); 
```

什么都没有抹去。我紫了...

编辑：这是比较功能。

```
bool CompFunc::operator()(const time_t & t1, const time_t & t2) 
{                                                                               
    CmpVal = CompareYear(t1, t2);                                              
if(CmpVal != 0)                                                            
{                                                                           
    if(CmpVal == -1) {return true;}                                                       

    return false;                                                           
}                                                                           

return true;                                                                
}

 short CmpFunc::CompareYear(const time_t & t1, const time_t & t2)          
{                                                                               
    if(r1.getYear(&t1) < r2.getYear(&t2)) {return -1;}                            
    if(r1.getYear(&t1) == r2.getYear(&t2)) {return 0;}                            

return -2;                                                                  
} 
```

从.h：

```
public:                                                                     
    Cmp_event_year() {};                                                     
    ~Cmp_event_year() {};                                                    
    bool operator()(const time_t &, const time_t &);                        
private:                                                                    
    Time_t_read r1;                                                         
    Time_t_read r2;                                                         
    short CmpVal;                                                          
    short CompareYear(const time_t &, const time_t &); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:10:54.083

`true`如果年份`t1`小于*或等于*年份，则比较器返回`t2`。`true`当且仅当`t1`它的年份小于 的年份时，它才需要返回`t2`。如果两年相等，则比较器必须返回`false`。

比较器必须提供[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)。

# c# - 嵌套循环优化

> ID：12735045
> 
> 赞同：0
> 
> 时间：2012-10-04T20:07:18.890
> 
> 标签：c#, sql, optimization, nested

大家好，我有一个奇怪的优化问题，为了简单起见，这是我更改了一些名称的代码

```
CollectionObject mycollobj = new CollectionObject();
List<string> MyProducts = new List<string>();
//get collection of selected customers that were passed in
var chckedValues = form.GetValues("assignChkBx");
foreach(string customer in chckedValues )
{
    MyProducts.Clear();
    //MyProducts is then set to a data access method in my data access class
    MyProducts = DataLayerClass.GetProductsFromCustomer(customer);
    foreach(string product in MyProducts)
    {
       string item1 = DataLayerClass.GetItem1(product);
       string item2 = DataLayerClass.GetItem2(product);
       mycollobj.loaditems(item1, item2);
    }
} 
```

本质上 mycollobj 是一个黑盒子，用于一些相当复杂的分析（我无法控制）。有没有更好的方法来运行这个嵌套算法？任何建议都很有价值，请询问您是否需要澄清任何事情。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:13:02.910

是的，这条线：`MyProducts = DataLayerClass.GetProductsFromCustomer(customer);`会减慢速度（每个客户的数据库调用），嵌套`DataLayerClass.GetItem1()/GetItem2`也使事情变得更糟。而是将所有内容发送`checkedValues`到数据库并返回带有客户的查找和`Tuple`包含的`item1`和`item2`：

```
ILookup<Customer, Tuple<string, string>> customerProducts = 
 DataLayerClass.GetCustomersWithProducts(chckedValues); 
```

简而言之，将逻辑移至单个数据库查询。

# sql - ManagementObjectSearcher 查询值来自哪里？(WMI)

> ID：12735046
> 
> 赞同：3
> 
> 时间：2012-10-04T20:07:22.030
> 
> 标签：sql, c#-4.0, wmi, wmi-query

在尝试在网络上查找一组计算机时，我发现了 ManagementObjectSearcher 类和 ManagementObject 类。ManagementObjectSearcher 的构造函数将 sql/sql-esque 查询作为参数。目前，我正在使用在旧代码中找到的查询：

```
ManagementObjectSearcher adapters = new ManagementObjectSearcher("SELECT * FROM Win32_NetworkAdapter"); 
```

但我试图弄清楚如何知道查询中可能包含的内容。所有的表/对象是什么？所有可能的限制是什么？这门课和相关问题属于什么一般主题，以便我可以查找并了解更多信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T20:07:22.030

经过进一步研究，这似乎是 WMI（Windows 管理基础结构）的一部分

**WMI 查询： http:** [//msdn.microsoft.com/en-us/library/ms186146 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms186146(v=vs.80).aspx)

**WMI 搜索条件列表：http:** [//msdn.microsoft.com/en-us/library/windows/desktop/aa394554 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394554(v=vs.85).aspx)

**使用 WMI： http:** [//msdn.microsoft.com/en-us/library/windows/desktop/aa393964 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393964(v=vs.85).aspx)

**书籍：** [http ://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&field-keywords=WMI](http://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&field-keywords=WMI)

**示例代码：**

```
 ManagementObjectSearcher adapters = new ManagementObjectSearcher("SELECT * FROM Win32_NetworkAdapter WHERE NetConnectionStatus = 2");

        foreach (ManagementObject item in adapters.Get())
        {
            foreach (ManagementObject setting in item.GetRelated("Win32_NetworkAdapterConfiguration"))
            {
                if ((!setting["IPAddress"].IsNull()) &&
                    (!setting["IPSubnet"].IsNull()))
                {
                    foreach (string value in (String[])setting["IPAddress"])
                    {
                        mySocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);                 
                        mySocket.Bind(new IPEndPoint(IPAddress.Parse(value), 49984)); 
                        //etc...
                    }
                }

            }
        } 
```

总的来说，这似乎是一个相当具有纪念意义的话题，但至少这给了我一个开始尝试理解它的地方。但是，我仍然完全不确定这是否是解决我要解决的问题的好方法。

# jquery - Slidesjs 插件

> ID：12735048
> 
> 赞同：2
> 
> 时间：2012-10-04T20:07:26.083
> 
> 标签：jquery

我是 jquery 的新手。我试图将幻灯片插件放到我的网站上。我遇到了这个“slidesjs”插件，我尝试将它放入我的页面，但它似乎不起作用。这是我的代码：

```
<style type="text/css" media="screen">
        .slides_container {
            width:570px;
            height:270px;
        }
        .slides_container div {
            width:570px;
            height:270px;
            display:block;
        }
    </style>

    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="Slides/examples/images-with-captions/js/slides.min.jquery.js"></script>

    <script>
        $(function(){
            $("#slides").slides();
        });
    </script>

<div id="text-contents">
        <div class="slides_container">
            <div>
                <img src="http://placehold.it/570x270">
            </div>
            <div>
                <img src="http://placehold.it/570x270">
            </div>
            <div>
                <img src="http://placehold.it/570x270">
            </div>
            <div>
                <img src="http://placehold.it/570x270">
            </div>
        </div>
</div> 
```

我刚刚下载了他们的插件。这是在“幻灯片”文件夹中。我也将这个文件夹转移到了我的 html 文件所在的文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:10:39.560

您没有带有`id`“幻灯片”的元素，因此选择器找不到要转换的任何内容。尝试：

```
$("#text-contents").slides(); 
```

反而。

**编辑：**如果您只是实现其中一个示例的副本，请确保包含相关资源。例如，如果您使用**标准**示例的示例代码，则需要`js`、`css`和`img`文件夹（及其内容）来获得相同的外观。一旦您了解了示例的设置方式，您就可以（并且应该）将这些替换为您自己的样式和图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:22:36.927

嗨，看看[https://github.com/brenelz/Content-Slider](https://github.com/brenelz/Content-Slider)，如果基本的 JQuery 滑块没有，它可能无法满足您的需求。

# android - Android：方向更改后视图的宽度和高度

> ID：12735050
> 
> 赞同：5
> 
> 时间：2012-10-04T20:07:31.110
> 
> 标签：android, width, orientation, screen-orientation, onconfigurationchanged

我需要获取 WebView 的宽度和高度，并将它们传递到我在 WebView 中加载的 URL 的查询字符串中。我在 onResume() 中找到了一种方法。由于此时未计算宽度和高度，因此我将 Runnable 发布到 WebView 以在 UI 加载后排队等待。

这是我的问题：当方向改变时，我在 onConfigurationChanged 中处理它。当我尝试将 onConfigurationChanged 中的 Runnable 发布到 WebView 时，WebView 的宽度和高度最终成为旧方向的宽度和高度。方向改变后什么时候可以截取新的宽度和高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:19:26.620

使用 a `ViewTreeObserver`，例如查看此答案：[https ://stackoverflow.com/a/8245468/757073](https://stackoverflow.com/a/8245468/757073)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:36:01.833

试试 onPostResume。这在 onResume 之后调用，它应该在准备好将其放在屏幕上时调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T20:59:01.080

这仅适用于父视图或 getRootView() 它为子视图返回相同的 ht 和 wd。

# java - Java 获取应用程序资源目录

> ID：12735052
> 
> 赞同：0
> 
> 时间：2012-10-04T20:07:32.777
> 
> 标签：java

我正在构建一个将图像保存到磁盘的应用程序，然后通过从磁盘读取来在 GUI 中显示图像。

出于测试目的，我将所有图像保存到用户的桌面。

Java 如何找到要保存的目录（取决于操作系统）？

例如，在 Mac 上，我希望应用程序写入 ~/Library/Application Support/Application/，在 Windows 上，我希望类似于 C://Program Files/Application/。

Java 是否提供此功能，或者这是硬编码的东西，还是我在这里完全错过了一些东西？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:26:13.720

没有应用程序应该存放文件的“标准”位置。这完全取决于操作系统，并且没有标准 API 可以以独立于平台的方式确定这一点。它甚至会根据操作系统版本（Win95 vs XP，vs 7）而变化。Java 应用程序甚至不需要“安装”，就将其复制到`/usr/local/bin`或`C:\Program Files\...`.

您将不得不编写特定于操作系统的代码或询问用户将东西放在哪里。看看`System.getProperties()`和`java.util.prefs`类。

# java - 主函数内的标志

> ID：12735054
> 
> 赞同：-2
> 
> 时间：2012-10-04T20:07:37.943
> 
> 标签：java

我可以在我的主函数中定义一个标志但不是静态的吗？这是我的 Main Function 代码，我想在不同的类（Panel2 类）中使用标志

```
public class MyFrame extends JFrame 
{
    private Panel1 P1 = new Panel1();
    private Panel2 P2 = new Panel2();

    public static boolean flag = true;

    public MyFrame()
    {
        super("MyFrame");
        setLayout(new BorderLayout());
        add(P1,BorderLayout.CENTER);
        add(P2,BorderLayout.EAST);
        setSize(500,400);
        setVisible(true);
    }

    public static void main(String[] args) 
    {
        MyFrame mF=new MyFrame();
        mF.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T01:51:06.583

这完全取决于您将如何使用标志变量，在您的代码示例中，我根本没有看到使用的标志，我不明白您为什么希望避免在您的情况下使用静态变量，但如果是这样的话一些至关重要的事情，解决方案之一是将标志变量用作 MyFrame 类的公共变量（非静态变量），然后从您的主函数访问它：

```
public class MyFrame extends JFrame 
{
private Panel1 ;
private Panel2 ;       
public  boolean flag;

    public MyFrame()
    {
        super("MyFrame");
        this.flag = true;
        P1 = new Panel1();
        P2 = new Panel2();
        setLayout(new BorderLayout());
        add(P1,BorderLayout.CENTER);
        add(P2,BorderLayout.EAST);
        setSize(500,400);
        setVisible(true);

    }

    public static void main(String[] args) {
     MyFrame mF=new MyFrame();

     // you can access your flag this way 
     mF.flag = false; // or use it the way you want !
     mF.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    } 
```

但是，如果您想在 Panel2 类中使用该标志，那么您可能需要向 Panel2 类添加一个新的构造函数，该构造函数接受 JFrame 类型作为参数，您将作为实例传递给它...

```
 public class MyFrame extends JFrame 
    {
    private Panel1 ;
    private Panel2 ;       
    public  boolean flag;

        public MyFrame()
        {
            super("MyFrame");
            P1 = new Panel1();
            this.flag = true;
            P2 = new Panel2(this); /* then you will be able to have a visibility 
    on the flag variable of your MyFrame instance.*/

            setLayout(new BorderLayout());
            add(P1,BorderLayout.CENTER);
            add(P2,BorderLayout.EAST);
            setSize(500,400);
            setVisible(true);

        }

        public static void main(String[] args) {
         MyFrame mF=new MyFrame();

         // you can access your flag this way 
         mF.flag = false; // or use it the way you want !
         mF.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        }

        } 
```

您还可以将函数添加到 Panel2 接受布尔变量，您可以在主函数中传递标志变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:11:10.623

如果你的意思是一个局部变量，那么不 - 你不能在一个方法中声明一个局部变量，然后在另一个方法中使用它，即使在同一个类中也是如此。就其声明的方法而言，它仅“存在”。您可以将局部变量的值传递给在声明方法中调用的方法或构造函数，当然：

```
public static void main(String[] args) {
    int someValue = 10;
    myMethod(someValue);
}

private static void myMethod(int parameter) {
    System.out.println("I was passed " + parameter);
} 
```

……但这不是一回事。

请注意，实例和静态变量通常应该是私有的 - 访问它们基本上应该通过类中的方法。

如果您刚刚开始掌握面向对象，我建议您编写*控制台*应用程序来掌握事情的窍门；GUI 提出了自己的挑战，从简单的东西开始会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T02:09:28.340

如果你不想做

```
static boolean flag=true 
```

你可以做

```
boolean flag=true 
```

但是然后在您的主要内容中，您需要使用它来访问它

```
mF.flag 
```

这是你想要做的吗？这个问题有点不清楚。你能改写一下吗？

# .net - XML 中数字的有效格式是什么

> ID：12735056
> 
> 赞同：0
> 
> 时间：2012-10-04T20:07:49.000
> 
> 标签：.net, xml, wcf

我正在开发一个由 SAP 安装调用的 WCF Web 服务，并且遇到了与负数序列化相关的问题。他们传递的值是“123.45-”而不是“-123.45”，这会导致反序列化阻塞。我想我可以通过将所有内容定义为 XML 中的字符串然后手动查找尾随符号来解决它。

我的问题是这甚至是一个有效的 XML 数字表示吗？我找到[了这个页面](http://www.w3.org/TR/xmlschema-2/#double)，这似乎表明标志（如果存在）必须在数字之前。在一天结束时，我将不得不添加处理他们发送的任何内容。我想这只是自我想知道从规范的角度来看这实际上是错误的；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:15:36.697

这不是严格意义上的**XML 模式**的有效数字表示。如果您谈论的是 SOAP 端点，您可以浏览到服务 WSDL 文件，然后按照请求和响应中预期的架构的链接进行操作 - WCF 通常会使用 xs:int、xs:decimal、xs:double 等. 表示数字类型。

接下来要做什么取决于您可以在多大程度上影响客户为您发送“有效”号码。如果你不能，并且你必须支持现有的请求，那么它对你的场景变得“有效”，你需要以某种方式处理这些请求。也许不是一个理想的世界，但有时互操作会导致这些问题。

# ruby-on-rails - Rails 背景图片上传

> ID：12735058
> 
> 赞同：0
> 
> 时间：2012-10-04T20:07:51.217
> 
> 标签：ruby-on-rails, file-upload, delayed-job, carrierwave, background-process

我正在使用“carrierwave”gem 上传图像文件，还使用“carrierwave backgrounder”来处理上传+在后台使用 RMagick 处理图像（为此我使用延迟作业）。

一切都像魅力一样。除了一件事 - 我想上传图片并在上传表单下显示它们（所以，一切都发生在同一页面上）。所以，基本上，会发生什么 - 由于上传和图像处理相对较慢，到页面在发布后呈现时 - 图像本身还没有准备好：所以 image_tag 显示损坏的“资产”链接（href = “资产”）。等待 2-3 秒（几次刷新）后，图像出现在屏幕上。

所以，我的问题是 - 我可以以某种方式显示“*加载*”动画（或文本，或另一张图片 - 无关紧要）**而不是**损坏的（尚不可用）图像，一旦它准备好 - 将图像显示到用户。这可以在没有 AJAX 的情况下完成吗？或者我应该考虑用 AJAX 重新做吗？

对不起，故事很长。希望得到您的帮助！

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:56:33.017

我的解决方案非常简单：我观察数据库中是否有任何包含“tmp”字段的图像（st tmp！= null）。如果是这样 - 它们正在后台处理，所以我使用 setInterval 函数，它不断询问 tmp 是否为空：一旦为空 - 处理肯定完成。如果不是 - 正在运行加载动画而不是上传的图像。非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T18:24:16.863

你有不同的方法来实现这一点：

一种是使用[https://github.com/lardawge/carrierwave_backgrounder](https://github.com/lardawge/carrierwave_backgrounder)，这样您就会知道图像是否正在使用它使用的新列进行处理。

您还可以使用此处描述的 JS 文件 API：http: [//kellishaver.tumblr.com/post/21428272282/using-the-file-api-to-preview-images-before-uploading](http://kellishaver.tumblr.com/post/21428272282/using-the-file-api-to-preview-images-before-uploading)

我想还有其他选择。

# java - 拖动鼠标时 Java Swing 重绘

> ID：12735060
> 
> 赞同：3
> 
> 时间：2012-10-04T20:08:01.280
> 
> 标签：java, swing, drawing, mouseevent

当我将鼠标拖到自定义面板上时，我很难让自定义面板重新绘制自己。

基本上，我在带有以下处理程序的自定义面板上绘制自由格式线：

```
MouseInputAdapter mia = new MouseInputAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                if(_app_split_right_buttons_radioInkBtn.isSelected()) {
                    _app_split_right_journal.StartLine();
                    _app_split_right_journal.AddLineSegment(e.getX(), e.getY());
                }
                _app_split_right_journal.repaint();
            }
            @Override
            public void mouseReleased(MouseEvent e) {
                if(_app_split_right_buttons_radioInkBtn.isSelected()) {
                    _app_split_right_journal.AddLineSegment(e.getX(), e.getY());
                    _app_split_right_journal.EndLine();
                }
                _app_split_right_journal.repaint();
            }
            @Override
            public void mouseDragged(MouseEvent e) {
                if(_app_split_right_buttons_radioInkBtn.isSelected()) {
                    _app_split_right_journal.AddLineSegment(e.getX(), e.getY());
                }
                _app_split_right_journal.repaint();
            }
        };
        _app_split_right_journal.addMouseListener(mia);
        _app_split_right_journal.addMouseMotionListener(mia); 
```

但是，我似乎无法在拖动鼠标时重新绘制它，只有在我释放它之后（线条正确绘制）。奇怪的是，如果在我拖动的中间，我右键单击，当我拖动时，线条会突然开始绘制。

任何帮助，将不胜感激。

编辑：为清楚起见， StartLine()/AddLineSegment()/EndLine() 东西只是将点添加到 Point 对象的 ArrayList 中，并且 repaint() 函数已被覆盖以循环遍历这些点并在每个点之间绘制线段。下面的代码：

```
public void DrawShapes(Graphics g) {
        g.setColor(Color.black);
        for(Geometry.Shape shape : _shapeList) {
            if(shape instanceof Geometry.Line) {
                ArrayList<Point> points = ((Line) shape).GetPointList();
                Point p1 = points.get(0);
                for(int i=1; i<points.size(); i++) {
                    Point p = points.get(i);
                    g.drawLine(p1.x, p1.y, p.x, p.y);
                    p1 = p;
                }
            }
} 
```

编辑：想通了。这是因为我正在循环浏览线条列表，但我忘记了在释放鼠标并调用 EndLine() 之前，我不会将当前正在绘制的线条添加到该列表中。我不得不在 repaint() 方法中添加单独的代码来绘制我当前正在绘制的形状。添加到 repaint() 的代码：

```
if(_currentShape instanceof Geometry.Line) {
            ArrayList<Point> points = ((Line)_currentShape).GetPointList();
            Point p1 = points.get(0);
            for(int i=1; i<points.size(); i++) {
                Point p = points.get(i);
                g.drawLine(p1.x, p1.y, p.x, p.y);
                p1 = p;
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T23:03:35.843

这是我为另一个问题所做的示例，但它使用鼠标拖动在组件上画线...

```
public class PaintingExample {

    private BufferedImage bImage;
    private ImageIcon image;
    private JLabel imageLabel;
    private int xClicked = 0;
    private int yClicked = 0;
    private int xDragged = 0;
    private int yDragged = 0;
    private MouseAdapter mouseListener =
        new MouseAdapter() {
            private boolean paint = false;
            @Override
            public void mousePressed(MouseEvent me) {

                xClicked = me.getX();
                yClicked = me.getY();
                xDragged = xClicked;
                yDragged = yClicked;

                paint = true;

            }

            @Override
            public void mouseReleased(MouseEvent e) {

                xClicked = -1;
                xClicked = -1;
                xDragged = -1;
                yDragged = -1;

                paint = false;

            }

            @Override
            public void mouseMoved(MouseEvent me) {
            }

            @Override
            public void mouseDragged(MouseEvent me) {

                if (paint) {

                    xClicked = xDragged;
                    yClicked = yDragged;

                    xDragged = me.getX();
                    yDragged = me.getY();

                    xDragged = me.getX();
                    yDragged = me.getY();

                    Graphics2D g2 = bImage.createGraphics();
                    g2.setColor(Color.WHITE);
                    g2.drawLine(xClicked, yClicked, xDragged, yDragged);
                    g2.dispose();
                    imageLabel.setIcon(new ImageIcon(bImage));

                    me.getComponent().repaint();

                }

            }
        };

    public PaintingExample() {
        try {
            bImage = ImageIO.read(new URL(
                            "http://gagandeepbali.uk.to/"
                            + "gaganisonline/images/planetbackground.jpg"));
            image = new ImageIcon(bImage);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void displayGUI() {
        JFrame frame = new JFrame("Painting on Image");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        imageLabel = new JLabel(image);
        imageLabel.addMouseListener(mouseListener);
        imageLabel.addMouseMotionListener(mouseListener);

        contentPane.add(imageLabel);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new PaintingExample().displayGUI();
            }
        });
    }
} 
```

# java - 可配置的数据导出器

> ID：12735066
> 
> 赞同：0
> 
> 时间：2012-10-04T20:08:38.453
> 
> 标签：java, csv, configuration, exporter

我需要使用 java 将数据导出器实现为 CSV。它必须满足以下要求：

1) 它必须是可配置的（例如，列的顺序或数量不得硬编码）

2）这些数据可以是不同的语言（也可以是中文），并且生成的 csv 文件必须是 utf-8 编码的。

我从未处理过此类任务，所以我只想问是否有人可以为我提供一些有用的建议：配置数据导出器和编码数据的最佳实践是什么。

我已经找到了以下关于[Java 的不同 csv 导出器/导入器 CSV API 的](https://stackoverflow.com/questions/101100/csv-api-for-java)讨论，但是如果您有要添加的内容，请不要犹豫；）

而且我也听说过一些关于流口水的事情，~~但不知道~~这可能是我的解决方案吗？

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:31:46.847

CSV 是一种非常简单的格式。这里基本上是编码/解码的要点。

编码：

*   如果该值不包含逗号或换行符，则按原样发出它。
*   如果该值包含逗号或换行符，则将全部替换`/`为`//`和全部`"`替换为`/"`，将其括在引号中，然后发出。
*   用逗号分隔字段，用换行符分隔记录。

解码：

*   如果该值不以引号开头，请扫描直到您打到逗号。
*   如果该值以引号开头，请扫描，用和替换`//`，`/`直到`/"`到达`"`前面没有单个反斜杠的引号。

您不必担心编码；Java 应该处理得很好。但实际上，除非这是专门针对学校作业或类似情况，否则您应该使用预先存在的 CSV 库。

# c# - 对象超出范围

> ID：12735070
> 
> 赞同：3
> 
> 时间：2012-10-04T20:08:59.377
> 
> 标签：c#, reference, garbage-collection

我们有如下代码来修复 CA2000：在失去范围之前处理对象 ( [http://msdn.microsoft.com/en-us/library/ms182289.aspx](http://msdn.microsoft.com/en-us/library/ms182289.aspx) )。当 tbl 被赋值为 null 时，它引用的对象是否会被垃圾回收？

```
 private DataTable BuildRequestDataTable(Factory tableFactory)
    {
        DataTable tbl = null;
        DataTable requestTable = null;
        try
        {
            tbl = tableFactory.CreateTable();
            requestTable = tbl;
            tbl = null;
        }
        finally
        {
            if (tbl != null)
            {
                tbl.Dispose();
            }
        }

        return requestTable;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T20:13:49.953

> 当 tbl 被赋值为 null 时，它引用的对象是否会被垃圾回收？

不，或者至少，不是立即。对象不是那样的引用计数。

目前还不清楚你为什么要处理所有这些变量——我看不出你最终会如何处理任何东西*。*要么`CreateTable`调用成功，在这种情况下，以下两个语句将成功并且不会处理任何内容，或者`CreateTable`调用 throws，在这种情况下`tbl`仍然为 null 并且不会处理任何内容。

您的代码基本上相当于：

```
private DataTable BuildRequestDataTable(Factory tableFactory)
{
    return tableFactory.CreateTable();
} 
```

那时，您很可能会收到警告，表明您没有处理`DataTable`，但这是故意的 - 调用者可能会负责处理它。

当然，目前还不清楚代码本身是否真的提供了很多好处——它并不容易使用：

```
using (var table = BuildRequestDataTable(tableFactory)) 
```

比

```
using (var table = tableFactory.CreateTable()) 
```

...除非您打算在方法中添加更多逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:13:32.110

您的目标是在此方法中返回 DataTable，为什么要处理它呢？调用者现在负责处理此 DataTable。

您的方法应该是：

```
private DataTable BuildRequestDataTable(Factory tableFactory) 
{ 
   return tableFactory.CreateTable();        
} 
```

# c++ - 如何重新组合地图并将元素插入新地图？

> ID：12735078
> 
> 赞同：0
> 
> 时间：2012-10-04T20:09:17.333
> 
> 标签：c++, stl, map, vector, stdmap

我有一张包含以下数据的地图：

```
id    prev abundance  thing
1573  -1      0       book
1574  1573    39      beds
1575  1574    41      tray
1576  1575    46      cups 
```

我正在编写的代码是这样的：

```
struct Abund
{
int prev;
int abundance;
string thing;
}

map<int id, Abund*> oldMap; 
```

我现在需要创建一个应该如下所示的新地图：

```
id2    prev2 prevAbun next2  nextAbun  thing2
1573                   1574   39        book
1574  1573    0        1575   41        beds
1575  1574    39       1576   46        tray
1576  1575    41                        cups 
```

因此，为此我创建了一个新地图和新结构：

```
struct NewAbund
{
vector<int> prev2;
vector<int> prevAbun;
vector<int> next2;
vector<int> nextAbun;
string thing2;

NewAbund() : 
prev2(0), 
prevAbun(0), 
next2(0), 
nextAbun(0), 
thing2() {}
NewAbund(
vector<int> nodeprev2, 
vector<int> prev_cnt2, 
vector<int> nodenext2, 
vector<int> next_cnt2, 
string node_thing2) :
prev2(nodeprev2), prevAbun(prev_cnt2), next2(nodenext2), nextAbun(next_cnt2), thing2(node_thing2) {}
}

NewAbund(const Abund& old)
{
    thing2 = old.thing;
    prev2.push_back(old.prev);
    prevAbun.push_back(old.abundance);
}

map<int id, NewAbund*> newMap; 
```

现在，我完全不知道如何将元素从一张地图填充到另一张地图。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:20:10.657

`Abund`您希望将旧 map( ) 中的元素填充到新 map( `NewAbund`) 的元素中。您需要做的第一件事是将`Abund`对象转换为`NewAbund`对象。这是通过添加一个新的构造函数来完成的`NewAbund(const Abund& old)`

```
struct NewAbund
{
vector<int> prev2;
vector<int> prevAbun;
vector<int> next2;
vector<int> nextAbun;
string thing2;

NewAbund(const Abund& old) {
    //create a NewAbund using the old data
}

}; 
```

一旦我们有了将旧数据转换为新数据的方法，我们只需将所有内容从旧地图移动到新地图，如下所示。

```
typedef map<int id, Abund*>::iterator iter;
iter it = oldMap.begin();
iter end = oldMap.end();
for(; it != end; ++it) {
    newMap[it->first] = new NewAbund(*(it->second));
} 
```

# javascript - 页面关闭时如何打开调查窗口？

> ID：12735079
> 
> 赞同：0
> 
> 时间：2012-10-04T20:09:17.323
> 
> 标签：javascript, php, html, popup

我正在为一家公司构建一个聊天页面，他们的要求之一是在用户关闭聊天页面时弹出一个调查。我尝试使用 onunload ，但在用户连接到我们的一位客户服务代表之前会启动弹出窗口。我相信这是因为**聊天表单在连接到客户服务时会多次刷新**。

我的第一个想法是查看 URL 是否仍然存在，如果存在，则弹出窗口不会启动。但是，这不起作用，因为 URL 将保持不变，直到页面关闭。一旦页面关闭，代码将无法执行。

我目前的想法是在包含脚本的文档底部实现一个 1px x 1px iframe，以便在关闭时启动弹出窗口。我正在使用警告框进行测试，当 html 文件直接在浏览器中打开时它可以工作，但当它在 iframe 中关闭时则不行。

我可以尝试哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:31:40.780

您 iirc 唯一能做的就是使用 onbefore 回调并要求用户进行调查。

在显示 onbeforeunload 确认框后，您可能希望看到我的相关问题，关于如何对停留在页面上的用户做出反应。

[是否有取消 window.onbeforeunload 的回调](https://stackoverflow.com/questions/11835217/is-there-a-callback-for-cancelling-window-onbeforeunload)

# javascript - EasyXDM + jQuery => Opera ajaxHandleResponses 中未捕获的异常

> ID：12735082
> 
> 赞同：1
> 
> 时间：2012-10-04T20:09:42.723
> 
> 标签：javascript, jquery, ajax, cross-domain, opera

我在 Opera 中遇到了跨域 ajax 的大麻烦。我正在尝试使用[EasyXDM](https://github.com/GyldendalDigital/jQuery-EasyXDM)，但 jQuery 在 Opera 中崩溃并出现错误：

```
Uncaught exception: TypeError: 'contents[ type ].test' is not a function

Error thrown at line 7847, column 3 in ajaxHandleResponses(s, jqXHR, responses) in     https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js:
if ( contents[ type ] && contents[ type ].test( ct ) )
called from line 7479, column 3 in done(status, nativeStatusText, responses, headers) in https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js:
var isSuccess,
called from line 8324, column 7 in <anonymous function: callback>(_, isAbort) in https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js:
complete( status, statusText, responses, responseHeaders );
Uncaught exception: TypeError: 'contents[ type ].test' is not a function 
```

这说明了 jQuery 核心中的以下部分：

```
// Remove auto dataType and get content-type in the process
while( dataTypes[ 0 ] === "*" ) {
    dataTypes.shift();
    if ( ct === undefined ) {
        ct = s.mimeType || jqXHR.getResponseHeader( "content-type" );
    }
}

// Check if we're dealing with a known content-type
if ( ct ) {
    for ( type in contents ) {
        if ( contents[ type ] && contents[ type ].test( ct ) ) {
            dataTypes.unshift( type );
            break;
        }
    }
} 
```

标题是：

```
POST /api/api.do HTTP/1.1
User-Agent: Opera/9.80 (Windows NT 5.1; U; ru) Presto/2.10.229 Version/11.62
Host: DOMAIN-A.com
Accept-Language: ru-RU,ru;q=0.9,en;q=0.8
Accept-Encoding: gzip, deflate
Referer: http://DOMAIN-A.com/api/api.do?cors=1&xdm_e=http%3A%2F%2Flocalhost&    xdm_c=default1063&xdm_p=1
Cookie: BSN=e63bcbd283267d6499e1df2313ad4fd7
Connection: Keep-Alive
Content-Length: 244
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Accept: */*
X-Requested-With: XMLHttpRequest
Content-Transfer-Encoding: binary

HTTP/1.1 200 OK
Server: nginx/0.7.65
Date: Thu, 04 Oct 2012 19:47:57 GMT
Content-Type: text/plain; charset=utf-8
Connection: keep-alive
Vary: Accept-Encoding
X-Powered-By: PHP/5.2.17
P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"
Access-Control-Allow-Origin: http://DOMAIN-A.com
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Max-Age: 1728000
Access-Control-Allow-Headers: Content-Type
Access-Control-Allow-Credentials: true
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Encoding: gzip 
```

我按预期从 API.DO 得到响应，但我无法使用它，因为 javascript 崩溃了！

我正在使用 Opera 11。

PS：我尝试更改响应的内容类型，但没有效果...

# javascript - 使用 jquery.ajax() 搜索 db 并得到“未捕获的错误：NOT_FOUND_ERR：DOM Exception 8”

> ID：12735087
> 
> 赞同：0
> 
> 时间：2012-10-04T20:09:57.503
> 
> 标签：javascript, jquery, ajax, json, dom

我正在使用 jquery.ajax() 搜索数据库表并将数据返回到我页面上的 div。

单击搜索链接时，脚本无法将 usrObj 返回到 div，并抛出 msg **Uncaught Error: NOT_FOUND_ERR: DOM Exception 8**。

有人告诉我这可能是由语法错误引起的？但我没有看到问题...

这是我的代码：

```
$(function() {
//hide default articles
$("ul a").click(function(event){
     $(".short_article").addClass("hidden");
}); 

  $('#search-box').submit(function() {
    $.ajax({
        type: 'POST',
        url:  'faq/search.php?',
        data: 'Term=body',
        success: function(jqXHR){
            var usrObj = $.parseJSON(jqXHR);
            $('#load_window').html (usrObj);
            alert ("Search failed"); //no alert displays

        }
    });
    return false;
});

});

<div id="load_window"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:13:39.577

去掉“html”后面的空格：

```
$('#load_window').html (usrObj); 
```

...应该

```
$('#load_window').html(usrObj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:23:16.830

我看到代码有 3 个问题。第三可能是相关的。但是前两个使您的代码难以理解。

*   第一的。成功回调的标头如下：function(data, textStatus, jqXHR)。所以按照这个命名。否则你的代码很混乱。
*   第二。如果您希望 json 作为来自服务器脚本的响应，请在 ajax() 调用中添加“dataType: 'json'”选项。这将确保您的回调将收到已经是 Json 对象的“数据”。所以在 parseJSON() 中就不需要了。如果您期望 HTML - dataType 必须是 'html' 并且所有 json 处理都应该被删除。
*   第三。您正在尝试 html() Json 对象。但是，此方法需要字符串。因此，很可能 html() 有点疯狂并抛出异常。

# c++ - 在 C++ 中序列化一个类

> ID：12735089
> 
> 赞同：2
> 
> 时间：2012-10-04T20:10:01.817
> 
> 标签：c++, templates, serialization, deserialization

有没有办法在 C++ 中序列化一个类？我指的不是类的实例，而是类本身。反序列化时，我不知道要实例化哪个类来调用反序列化。我希望能够以某种方式确定所代表的类，实例化它的一个空实例，然后调用反序列化它。

**编辑澄清：**

我正在创建一个键值结构，其中每个键都有一个强类型值。（一些键必须存储字符串，其他键必须存储整数，还有一些键可能存储任意值）。我设计了一个系统，由编译器通过模板强制执行。

Key 类有两个模板参数：

*   UniqueClass - 每个概念应该有一个唯一的类（通常在定义概念的预处理器函数中定义）
*   ValueType - 这是该概念的值必须是的类

Value 类是一个模板类，只有 ValueType 有一个抽象超类，因此我可以在其中包装任何类（类似于 boost::any）。

然后在我的键值结构中，我存储和检索使用 ConceptType 和 ValueType 模板化的函数：

```
template<UniqueClass, ValueType>
void store( Concept<UniqueClass, ValueType> concept, ValueType value ); 
```

因为我使用相同的模板来描述概念的值类型和传入的值，所以如果它们不匹配，编译器会报错。

我现在希望能够序列化键值存储。因此，我需要以某种方式序列化模板化的 Concept 类，然后在反序列化期间实例化正确的任意类。

我有它，以便我可以调用序列化并要求所有适当的对象序列化自己，我只是不知道在反序列化期间要实例化哪个类以要求反序列化自身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:25:27.410

由于问题编辑而更新了答案：

我的理解是，在您手动或通过反序列化添加之前，您在容器中有 0 个密钥。有两种方法可以做到这一点：侵入式和非侵入式。

**侵入式**

让`Concept<U,T>`继承自`Deserializable`：

```
class Deserializable
{
    public:
        virtual void deserialize(InputStream& s) = 0;
        virtual int getClassId() const = 0;
}; 
```

现在，您可以通过它的 id 来识别一个类，使用`getClassId()`. 所以，接下来就是创建一个工厂。在这里，我将使用一个非常简单的方法，用`std::map`, 来说明这一点；随意使用更复杂的。

```
typedef Deserializable* (*createDeserializableType)();
std::map<int,createDeserializableType> factory;

// ...

factory[id1] = &createMyClass;
// etc...

// ...

// On deserialization
createDeserializable create = factory[idReadFromStream];
if(create)
    create()->deserialize(input_stream); 
```

这意味着要么你必须添加一个`store`方法，`Deserializable`要么你添加一个`store`方法`Deserializable`（我个人更喜欢最后一种方法）。

**非侵入式**

这个想法是在创建和添加键值的同时反序列化它：

```
typedef void (*deserializeFctType)(InputStream&);
typedef int id_type;
std::map<id_type,deserializeFctType> factory; 
```

该`deserialize`方法将在创建后立即存储反序列化类型。

您的问题中不清楚的是接受列表的列表是有限的还是无限的。只有有限的类型集是“容易”序列化的。

# android - 如何在android中获取远程xml数据响应

> ID：12735092
> 
> 赞同：2
> 
> 时间：2012-10-04T20:10:23.927
> 
> 标签：android, xml, web-services, http

在我的 [远程服务器](http://www.diskonbanget.com/bni/search)中，我有 xml 格式的数据

```
<reply>
<username>username</username>
<status>1<status>
<photo>http://diskonbanget.com/bni/images/user</photo>
<city><city_name>Bandung</city_name><city_code>1</city_code></city>
<jaminan>< jaminan_name>Rumah Tinggal</jaminan_name><jaminan_code>1</jaminan_code></ jaminan>
<dokumen><dokumen_name>SHM</dokumen_name><dokumen_code>1</dokumen_code></dokumen>
<property_list><property id=“1”&gt;
    <description>bla bla</description>      <image>http://www.diskonbanget.com/bni/images/jaminan</image><property_code>1</property_code></property>
</property_list>
</reply> 
```

因此，我需要将用户名、City_code、Jaminan_code 和 Dokumen_code 作为参数传递，然后我需要从我的 android 应用程序中读取城市详细信息、jaminan 详细信息、dokumen 详细信息。请给我一个示例代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:29:26.097

这将从 URL 获取 XML：

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
} 
```

这将从 XML 中获取元素：

```
 public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }
            // return DOM
        return doc;
}
public String getValue(Element item, String str) {
 NodeList n = item.getElementsByTagName(str);
 return this.getElementValue(n.item(0));
}

public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
} 
```

用法：

```
// All static variables
static final String URL = "http://api.androidhive.info/pizza/?format=xml";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_NAME = "name";
static final String KEY_COST = "cost";
static final String KEY_DESC = "description";

XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(URL); // getting XML
Document doc = parser.getDomElement(xml); // getting DOM element

NodeList nl = doc.getElementsByTagName(KEY_ITEM);

// looping through all item nodes <item>
for (int i = 0; i < nl.getLength(); i++) {
    String name = parser.getValue(e, KEY_NAME); // name child value
    String cost = parser.getValue(e, KEY_COST); // cost child value
    String description = parser.getValue(e, KEY_DESC); // description child value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T08:03:35.660

另外，如果你对 charset 有问题，使用 in`getXmlFromUrl`方法

```
xml = EntityUtils.toString(httpEntity, "your charset"); 
```

当我使用西里尔文 xml 数据时，它帮助了我。

# c# - .Net 页面响应时缺少响应正文的一部分

> ID：12735093
> 
> 赞同：4
> 
> 时间：2012-10-04T20:10:26.020
> 
> 标签：c#, .net, iis, iis-7

我遇到间歇性错误。

我们有一个页面，当在客户端浏览器中查看源代码时，它会返回约 5800 行 javascript 和 html 标记。

但是，会间歇性地丢失响应正文的随机部分。例如，我们可能会得到 5600-5700 行，而不是我们期望的 5800。

这会导致各种错误，具体取决于哪些行被切断。缺失的行数和行的位置是随机的。

到目前为止，我仍处于研究阶段，只是试图首先弄清楚发生了什么。我们还没有尝试任何方法来解决这个问题。

我在 OnPreRender、Render 和 OnUnload 处放置了断点。调试器在没有抛出任何异常的情况下命中了所有三个断点。调试器设置为在任何处理或未处理的异常时暂停执行。

关于什么可能导致这种行为的任何想法？

**截断响应之一的示例：**

```
this.message = "Please enter yo
="checked" /><label for="rememberMe">Keep me signed in</label> 
```

所以你可以看到，在我们做一些 javascript 的地方和我们有一些标记的地方之间，有一段随机的响应缺失。

**更新/修复** 由于某些奇怪的原因，在 IIS 中打开压缩可以解决问题。但这仍然没有多大意义，我仍然很好奇导致问题的原因以及为什么压缩应该解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:18:00.353

由于某些奇怪的原因，在 IIS 中打开压缩可以解决问题。但这仍然没有多大意义，我仍然很好奇导致问题的原因以及为什么压缩应该解决它。

# c# - 使用复杂数据集填充 asp.net 树视图

> ID：12735096
> 
> 赞同：1
> 
> 时间：2012-10-04T20:10:29.810
> 
> 标签：c#, asp.net, treeview, dataset

我有应用程序返回以下格式的数据集：

> ```
> Path              Parent Path     EntityID    EntityName                      sysID
> /5344/5558/5554/  /5344/5558/     3           New York (City of)              5554
> /5344/5558/5556/  /5344/5558/     3           Albany (City of)                5556
> /5344/5558/5553/  /5344/5558/     3           White Plains (City of)          5553
> /5344/5558/5557/  /5344/5558/     3           Buffalo (City of)               5557
> /5344/5558/       /5344/          2           State Of New York               5558
> /5344/5558/5555/  /5344/5558/     3           Syracuse (City Of)              5555
> /5344/5920/5921/  /5344/5920/     3           West Palm Beach (City Of)       5921
> /5344/5920/6853/  /5344/5920/     3           Ft. Lauderdale (City Of)        6853
> /5344/5920/6043/  /5344/5920/     3           Orlando (City Of)               6043
> /5344/5920/       /5344/          2           State Of Florida                5920
> /5344/5529/5527/  /5344/5529/     3           Sacramento (City Of)            5527
> /5344/5529/       /5344/          2           State Of California             5529
> /5344/            /               1           USA                             5344 
> ```

我需要使用 EntityName（必须按字母顺序排序）和 sysID 值填充 TreeView 控件。

EntityID 是记录的节点级别（1 是根，2 是父，3 是子）。
Path 和 ParentPath 是对另一个数据类型为 hierarchyid 的字段（此处未显示）进行操作的结果。

这比我在搜索中找到的通用“填充树视图”帖子稍微复杂一些。

我一直在尝试填充树视图控件，但无法弄清楚如何去做。关于如何在给定数据集的情况下填充树视图的任何建议？

# javascript - 在 Javascript 中定义 [ID] 的问题

> ID：12735097
> 
> 赞同：0
> 
> 时间：2012-10-04T20:10:30.030
> 
> 标签：javascript, jquery, html, plugins, expressionengine

我在我的网站上使用 .change() 函数单击此处，它使用户能够选择其产品的数量。我遇到的问题是我的图表只是将我的我链接到 12 包而不是 6 包。我检查了萤火虫，我注意到矩阵创建了两个链接到 6 包的按钮按钮开始与 12 包的按钮重叠。在我的 HTML 中只有一个按钮

[点击这里](http://bodyworksforme.com/testing/ExpressionEngine/index.php?/shop/view/sleep)

最终，我希望按钮链接相对于价格发生变化。我注意到我的 Matrix 没有响应 Jquery 调用，所以我假设有一些表达式标签可以做到这一点。![矩阵字段设置](../Images/13763849dbccc870f87cfd92796dddf3.png)

这意味着当您选择 6 包时，您单击添加到图表，它会将您定向到购物车，价格为 6 包。目前它只是拿起12pack。如果您查看检查器中的页面，您会注意到一个矩阵创建了两个按钮，一个用于 6 包，一个用于 12 包。12 与六个 b 重叠，因为该按钮正在使用一个类。

```
<div class="pricing-assets">
<h4>select a quantity</h4>
 <select id="item_select">
  <option value="1">6 pack</option>
  <option value="2">12 pack</option>
</select>

  <script type="text/javascript">
   var message = new Array();
     message[1] = "$15.00";
      message[2] = "$25.00";

      $(document).ready(function(){            
      $("#item_select").change(function(){
       var message_index
       message_index = $("#item_select").val();
        $(".price-item h3").empty();
         if (message_index > 0)
          $(".price-item h3").append(message[message_index]);
           });

           });

           </script>

    <div class="price-item right"><h3>$15.00</h3>
    {p_cartlink}
    <a href="http://store.bodyworksforme.com/ShoppingCart.asp?ProductCode={id}" class="button_atc atc_{url_title}"></a>
    {/p_cartlink} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:29:35.560

在您的矩阵循环中，您希望将一个类/ID 添加到链接元素以匹配产品 ID，然后将其用作您的选择选项的值，以便您可以在选择更改时切换链接。详细地：

首先，在您的选择中，根据您的矩阵字段的内容动态生成选择项（我猜您的选项名称称为 {option_name}，如果需要，请替换：

```
<div class="pricing-assets">
<h4>select a quantity</h4>
 <select id="item_select">
  {p_cartlink}
    <option value="{id}">{option_name}</option>
  {/p_cartlink}
</select> 
```

在您添加到购物车的链接中，根据与其相关的选项的 ID 设置一个类，我已将该类命名为下面的名称`.add_cart_`以避免现有样式中的冲突：

```
 <div class="price-item right"><h3>$15.00</h3>
    {p_cartlink}
        <a href="http://store.bodyworksforme.com/ShoppingCart.asp?ProductCode={id}" class="button_atc atc_{url_title} add_cart_{id}"></a>
    {/p_cartlink} 
```

现在在你的 JS 中（需要在同一个模板中，创建一个全局变量，我们可以从我们的 onReady JS 访问它，它指向一个包含我们选项的对象，通过再次循环遍历你的矩阵来填充它。

通过使用对象而不是数组，我们可以使用选项 ID 作为我们的对象键和价格字符串作为我们的值，这就像我们在构建选择时所做的镜像。

*（除此之外：这里有人可能会指出 JS 全局变量是一件坏事，应该避免，这通常是正确的，但在我看来这是一个有效的用途——如果你有合适的父 JS 对象用于购物车交互的东西。表示将其设置为 that 而不是 on `window`)*的属性：

```
<script type="text/javascript">
   window.priceMessage = {};
      {p_cartlink}
        message["{id}"] ='$' + parseFloat({option_price}).toFixed(2);
      {/p_cartlink}
</script> 
```

现在在您的主应用程序 JS 文件中或在文档准备好的任何地方执行此操作：

```
 $(document).ready(function(){
      //cache some selectors to minimise DOM queries and for clarity below
      var $select = $("#item_select"),
          $priceOutput = $(".price-item h3"),
          $addToCartBtns = $(".button_atc"),
          initialVal = $("#item_select").val();

      //hide add to cart buttons except for the current valid one
      function showCartButton(value){
        $addToCartBtns.hide().filter('.add_cart_' + value).show();  
      }
      //bind to the change event
      $select.change(function(e){
        var messageVal = $(e.target).val();//get the current value of the select as of the change
        //empty the current price container
        $priceOutput.empty();
        if ( messageVal !== '')
          //append the message
          $priceOutput.append(priceMessage[messageVal]);
          //show hide add to cart
          showCartButton(messageVal);
        });
      });
      //show correct button for state of select at page load
      showCartButton(initialVal);
</script> 
```

这样做的主要优点是灵活性：此代码应处理具有每个选项价格的任何选项值范围，因为 select html、添加到购物车按钮和 priceMessage 对象都是从相同的数据动态生成的EE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:33:41.130

是的，你有 12 在 6 之上。

为什么不并排显示它们，或者只显示用户选择的那个？

# java - 在运行时重新配置 Tomcat 数据库连接

> ID：12735098
> 
> 赞同：1
> 
> 时间：2012-10-04T20:10:30.827
> 
> 标签：java, tomcat, database-connection, jdbc-odbc

我正在开发一个部署在 Tomcat 容器中并访问来自不同供应商（Oracle、MS SQL、DB2）的多个数据库的遗留 Java Web 应用程序。目前，连接是通过 Oracle JDBC-ODBC 桥驱动程序建立的，并且数据源是在操作系统级别（Windows Server 2008）配置的。

我的团队最近建议迁移到特定于供应商的 JDBC4 驱动程序（顺便说一句，它可用于所有使用的数据库），但尽管在性能和功能方面众所周知的缺点以及 Oracle 在其网站上明确声明 JDBC-ODBC 桥的事实不适合生产，如果没有其他驱动程序可用，这是最后的手段，我们面临来自当前开发人员和负责操作系统的团队的一些严重阻力。

有人告诉我，其中一项要求是能够在运行时重新配置数据库连接。目前，这是通过在应用程序运行时编辑 Windows ODBC 工具中配置的数据源来完成的。据我所知，这是容器管理 (JNDI) 数据源无法实现的。而且这听起来对我来说相当危险，因为应用程序在重新配置过程中处于不一致的状态。

我现在的问题是，在运行时重新配置数据源是否是一种建议的做法，如果是这样，我们有什么方法可以使用本世纪的技术来做到这一点，即 JDBC4 over JNDI？

# sql - 在 Haskell 中表示电路

> ID：12735103
> 
> 赞同：2
> 
> 时间：2012-10-04T20:10:53.750
> 
> 标签：sql, haskell

考虑 MySQL 中的以下（简化）电路模型：

```
create table circuit (
  id int not null auto_increment primary key,
  name varchar(30) not null
);
create table device (
  id int not null auto_increment primary key,
  circuit_id int not null references circuit (id),
  chip varchar(30) not null,
  primary key (id)
);
create table pin (
  id int not null auto_increment primary key,
  device_id int not null references device (id),
  name varchar(10) not null unique,
  unique (device_id, name)
);
create table wire (
  circuit_id int not null references circuit (id),
  pin1_id int not null unique references pin (id),
  pin2_id int not null unique references pin (id),
  primary key (pin1_id, pin2_id)
); 
```

例如，考虑两个电阻连接在一个回路中的（有点无意义的）电路：

```
 RES
    +---/\/\/--+
    |   A   B  |
    |          |
    |   RES    |
    ----/\/\/--+
        B   A 
```

使用我之前描述的数据库结构，这可以表示为：

```
insert into circuit (name) values ('example');
set @c = last_insert_id();

insert into device (circuit_id, chip) values (@c, 'RES');
set @r1 = last_insert_id();
insert into pin (device_id, name) values (@r1, 'A');
set @a1 = last_insert_id();
insert into pin (device_id, name) values (@r1, 'B');
set @b1 = last_insert_id();

insert into device (circuit_id, chip) values (@c, 'RES');
set @r2 = last_insert_id();
insert into pin (device_id, name) values (@r2, 'A');
set @a2 = last_insert_id();
insert into pin (device_id, name) values (@r2, 'B');
set @b2 = last_insert_id();

insert into wire (circuit_id, pin1_id, pin2_id) values
  (@c, @b1, @a2), (@c, @b2, @a1); 
```

我将如何在 Haskell 中表示这种结构？它*不会*与数据库绑定——SQL 只是为了让我可以精确地定义我试图表示的结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:50:03.453

您的`pin`表类似于图形的邻接列表，因此我将使用图形库 -`Data.Graph`或`Data.Graph.Inductive`.

# php - PHP XML 获取“名称”值

> ID：12735104
> 
> 赞同：0
> 
> 时间：2012-10-04T20:10:59.500
> 
> 标签：php, xml

我如何读出 PROP 的“名称”值我可以使用下面的脚本读取 PVAL 的值..

```
<?xml version='1.0'?>
<RECORDS>
<RECORD>
<PROP NAME="Product">
    <PVAL><![CDATA[Produkt1]]></PVAL>
</PROP>
<PROP NAME="Value">
    <PVAL><![CDATA[10]]></PVAL>
</PROP>
<PROP NAME="Status">
    <PVAL><![CDATA[Active]]></PVAL>
</PROP>
</RECORD>
<RECORD>
<PROP NAME="Product">
    <PVAL><![CDATA[Produkt2]]></PVAL>
</PROP>
<PROP NAME="Value">
    <PVAL><![CDATA[20]]></PVAL>
</PROP>
<PROP NAME="Status">
    <PVAL><![CDATA[Active]]></PVAL>
</PROP>
</RECORD>
<RECORD>
<PROP NAME="Product">
    <PVAL><![CDATA[Produkt3]]></PVAL>
</PROP>
<PROP NAME="Value">
    <PVAL><![CDATA[30]]></PVAL>
</PROP>
<PROP NAME="Status">
    <PVAL><![CDATA[Active]]></PVAL>
</PROP>
</RECORD> 
```

使用下面的脚本我可以获得 PVAL。但我也想获得名称值，我试过 $strvalue = $node->PROP[6]->NAME; 没有运气...

```
<?php
$z = new XMLReader;
$z->open('products.xml');

$doc = new DOMDocument;

// move to the first <product /> node
while ($z->read() && $z->name !== 'RECORD');

// now that we're at the right depth, hop to the next <product/> until the end of the tree
while ($z->name === 'RECORD')
{

$node = simplexml_import_dom($doc->importNode($z->expand(), true));

$strvalue = $node->PROP[6]->PVAL;
echo $strvalue."<p>" ;

// go to next <product />
$z->next('RECORD');
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:17:01.687

这是一个建议：使用`SimpleXMLElement($xml_string)`它将一个 xml 字符串作为输入并返回一个 PHP 对象，您可以更轻松地使用它。然后你可以做一些方便的事情，比如：

```
$php_object = SimpleXMLElement($xml_string);
var_dump($php_object);
exit; 
```

这将允许您查看对象的结构并决定如何最好地访问它。祝你好运。

# python - python ast vs json 用于 str 到 dict 的翻译

> ID：12735106
> 
> 赞同：4
> 
> 时间：2012-10-04T20:11:06.300
> 
> 标签：python, json, abstract-syntax-tree

我有一段代码接收格式化为 python 字典的字符串

```
"{'a':'1','b':'2',...}" 
```

我需要将其转换为正确的字典。

我尝试了两种方法， using`json.loads(s)`和`ast.literal_eval(s)` ast 似乎更加健壮，接受字符串中的任何形式的引号并且“正常工作”，而 json 似乎对引用细节非常挑剔，并且不会仅在一种形式上失败的报价格式。我真的希望输入尽可能灵活，因此更喜欢使用`ast`，但是，我的一些同事声称它可能不是一个“安全”的模块和函数来使用。

谁能就 ast 和 ast.literal_eval() 的安全性提出建议，尤其是与 json.loads() 相比？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T20:13:22.183

使用`ast.literal_eval()`- 它旨在做你想做的事。JSON 恰好在语法匹配时起作用，但这不是您应该依赖的。

至于安全性，`literal_eval()`专门设计用于安全地使用来自不受信任来源的数据。事实上，[文档](http://docs.python.org/library/ast.html#ast.literal_eval)的第一个词是“安全地”：

> 安全地评估表达式节点或包含 Python 表达式的字符串。提供的字符串或节点只能由以下 Python 文字结构组成：字符串、数字、元组、列表、字典、布尔值和无。
> 
> 这可用于安全地评估来自不受信任来源的包含 Python 表达式的字符串，而无需自己解析值。

那些建议您不要使用它的人可能正在考虑`eval()`，这确实是不安全的。

# c++ - 我的程序在几个小时后写入网络驱动器失败，如何使用 ofstream 恢复？

> ID：12735107
> 
> 赞同：0
> 
> 时间：2012-10-04T20:11:08.237
> 
> 标签：c++, ofstream

几个小时后，我的程序无法继续写入文件，我想看看我是否可以检测到该文件和可能的 repoen 文件，或者只是启动一个新文件。我应该只检查 fail() 是否为真，如果是，则 repoen 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:19:13.460

您无法从 std::ofstream 获取特定错误代码，只能获取操作是否成功，因此如果您需要查找特定错误代码（可能），您可能需要回退到特定于平台的接口。

但是，您可以或应该做的是检查 operator<<()、std::ofstream::write() 和 std::ofstream::flush() 的返回值，例如：

```
std::ofstream of("...");
if (! (of << data))
{
   retryOpenfile();
   return;
} 
```

如果写入操作失败，您可以重试打开文件并在可能的情况下继续。

# javascript - 使函数内部的变量可供其他函数和字符串使用

> ID：12735109
> 
> 赞同：0
> 
> 时间：2012-10-04T20:11:15.460
> 
> 标签：javascript, jquery, xml, ajax, jsonp

我在控制台中声明了一个变量“mediaId”，它一直告诉我它是未定义的。我究竟做错了什么？

```
var mediaId;

//load the XML!
$.ajax({
    type: "GET",
    url: '10461632.xml', // path to XML file
    dataType: "xml", 
    success: function(data) {
        $(data).find('Root').each(function(){

            $(this).find('Item').each(function(){
            mediaId = $(this).attr('videoMediaId'); // get the mediaId
            console.log(mediaId);

            });

        });
    }
}); 
```

在我的“jsonApiCall”变量中它告诉我它是未定义的。

```
var jsonpApiCall = "http://www.domain.com/search_media/?format=jason&school=" + vid_partner + "&media_id=" + mediaId + ''; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:33:57.337

好吧，如果您发布了完整的代码，我会更加确定，但据我了解，您要求一个 XML，该 XML 将在变量到达时分配变量，但在它到达之前您正在尝试使用它：

1.  您要求 XML
2.  您使用变量“mediaId”
3.  XML 到达，然后分配“mediaId”。

为了防止这种情况，您不能在回调之外使用“mediaId”，使用它的所有内容都必须在回调内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:38:02.893

您必须在可用于 jsonpApiCall 分配的范围内定义 mediaId。+ mediaId 必须在使用前获取其值。

换行试试

```
var mediaId; 
```

进入

```
var mediaId = ""; 
```

你现在有同样的错误吗？如果是，则将 mediaId 定义移动到上层范围。

# eclipse - 为什么在 Eclipse 中执行移动重构后我的 git 文件历史记录丢失了？

> ID：12735110
> 
> 赞同：6
> 
> 时间：2012-10-04T20:11:24.757
> 
> 标签：eclipse, git, egit

我在 Eclipse 中执行了几次重构，将大量文件移动到另一个 java 包中。这些通常会导致很多文件被自动更新以解析引用。因此，这些情况下的提交往往非常大。

我假设 git 跟踪了重命名，我可以`git log --follow`通过重命名来跟踪历史，但是 git 没有跟踪重命名。

我在 Eclipse 中执行了较小的重构操作，在提交时检测到**重命名。**唯一的区别似乎是提交的大小。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T20:20:29.347

Git 根本不跟踪历史中的重命名，但`git log`可以根据提交内容启发式地检测重命名。

*   您可能需要指定较低的`-M`百分比才能`git log`检测到重命名。如果超过一定百分比的文件已更改，`git log`(and `git diff`) 将不会将添加/删除对视为重命名。如果移动的文件非常小并且需要更改内容（例如包名称），那么它们可能会超过此阈值。
*   您可能还需要指定一个值`-l`，它指定要评估的潜在重命名的最大数量。在大型提交中，您很可能会超出此范围，因此 Git 不会评估重命名以防止日志操作花费太长时间。（检测重命名是一个 O(n^2) 操作，其中 n 是需要考虑的添加/删除对的数量，因此在日志操作中处理每个提交以寻找重命名所花费的时间随着添加/删除排列。）

有关这些选项的更详细说明，请参阅 git-log 手册页。

# php - 如何从 Google 查询中获取结果数量

> ID：12735114
> 
> 赞同：4
> 
> 时间：2012-10-04T20:11:44.930
> 
> 标签：php, google-api

在尝试开发自己的关键字难度工具时，在从 Google 查询中获取结果总数时遇到了问题。为了尽可能清楚，这是我要获取的号码的屏幕：![在此处输入图像描述](../Images/165492867e12aa039e4a2933fc87e61c.png)

我在 Google 自定义搜索 API 上找不到任何有关如何执行此操作的参考，因此我构建了一个小型刮板，但我觉得这不是最好的方法。这是我的代码：

```
<?php
$url = "http://www.google.com/search?q=".$keyword;
$text = file_get_contents($url);
//get string between 2 strings function
function get_string_between($string, $start, $end){
    $string = " ".$string;
    $ini = strpos($string,$start);
    if ($ini == 0) return "";
    $ini += strlen($start);
    $len = strpos($string,$end,$ini) - $ini;
    return substr($string,$ini,$len);
}
//fetch the string between "About" and "results"
$res = get_string_between($text, "About", "results");
//keep only numeric characters
$res = preg_replace('/[^0-9]+/', '', $res);
?> 
```

你能建议一个更好的方法吗？（最好使用 Google API）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:00:32.033

使用正则表达式：

```
$params = array('q' => 'shark with lasers that shoot monkeys with balloons on skyscrapers please give me less results asdafasddfg');
$content = file_get_contents('http://www.google.com/search?' . http_build_query($params));
preg_match('/About (.*) results/i', $content, $matches);
echo !empty($matches[1]) ? $matches[1] : 0;
// output: 14,300 
```

我在他们的 API 中找不到任何东西。请注意，这违反了 Google TOS。Bing 的 API 将为您提供结果计数。

# excel - 通过 VBA 宏打开 MS Excel 时禁用“更新链接消息”

> ID：12735115
> 
> 赞同：1
> 
> 时间：2012-10-04T20:11:46.097
> 
> 标签：vba, excel, vba

我正在做一个自动运行的宏，但它受密码保护。在我删除所有密码后，它可以以不同的格式保存文件。

问题是 MS Excel 显示有关“自动更新链接”的弹出消息。我试图从 MS Excel 选项中禁用所有设置，但对话框仍然出现。

因此，我正在考虑添加一些代码来避免该弹出窗口。

这是我的代码：

```
Sub Auto_Open()
    Workbooks.Open "C:\Test\WorkbookTest.xlsx"
    ActiveWorkbook.UnprotectSharing ("galleta")
    ActiveSheet.Unprotect ("galleta")
    ChDir "C:\Users\user\Desktop\Reportes"
    Sheets("BES").Select
    ActiveSheet.Unprotect ("galleta")
    Sheets("BE800").Select
    ActiveSheet.Unprotect ("galleta")
    Sheets("BECM").Select
    ActiveSheet.Unprotect ("galleta")   
    ActiveWorkbook.SaveAs Filename:= _
        "C:\Users\user\Desktop\Reportes\test.mht", FileFormat:= _
        xlWebArchive, CreateBackup:=False
End Sub 
```

我将自动运行与密码事物代码一起放置，因为它可能对某人有所帮助。

其他数据：

*   办公室 2007,
*   Windows 服务器 2008 R2。

该消息似乎是为了保护用户的平台，但可能我们可以通过[vba](/questions/tagged/vba "显示标记为“vba”的问题")正手配置用户首选项。

感谢你们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T20:17:38.297

Workbooks.Open 的第二个参数是 UpdateLinks。将其设置为 False：

```
Workbooks.Open "C:\Test\WorkbookTest.xlsx",False 
```

# jquery - JQUERY 将鼠标悬停在 attr 匹配的位置

> ID：12735116
> 
> 赞同：0
> 
> 时间：2012-10-04T20:11:48.340
> 
> 标签：jquery

如何使用 jquery 定位 GB？

在这里查看 html [http://jsbin.com/opedih/1/edit](http://jsbin.com/opedih/1/edit)

我需要类似下面的东西

```
 $("g[data-code='GB']").mouseover(function(){
     alert('test');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:20:51.300

```
 $('g > path[data-code="GB"]').mouseover(function(){
        alert('test');
    }); 
```

# hibernate - 将休眠从 3.1.3 升级到 4.0

> ID：12735117
> 
> 赞同：1
> 
> 时间：2012-10-04T20:11:55.117
> 
> 标签：hibernate, jdbc, orm

我们将把休眠从 3.1.3 升级到 4.0。我发现它们中的大多数已被弃用。已经更改了大多数类/接口。但我无法替换下面的。在 hibernate 4 API 中搜索，找不到。

```
import org.hibernate.jdbc.AbstractBatcher;
import org.hibernate.jdbc.ConnectionManager;
import org.hibernate.util.JDBCExceptionReporter;

Connection conn = session.connection(); 
```

有人可以帮我在上面 stmt 的地方替换哪些类/接口吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:51:16.173

其中大多数没有直接替代品，因此将取决于您要完成的工作。还要注意那些移到`spi`和`internal`包的；`spi`指示您的应用程序代码不应该使用的东西；它们用于集成代码或 Hibernate 使用。 `internal`是完全不支持应用程序使用的东西；它仅供 Hibernate 内部使用。

“批处理器”的概念已更改为对“批处理”进行建模。见`org.hibernate.engine.jdbc.batch.spi.Batch`。注意`spi`。

ConnectionManager 没有真正的直接替代品。

JDBCExceptionReporter，同样没有真正的直接替代品。很可能您正在寻找`org.hibernate.exception.spi.SQLExceptionConverter`，但又取决于您要完成的工作。

`session.connection()``session.doWork()`使用您通过的连接替换。

其中一些包含在迁移指南中。有些不是因为它们并不是真正供您使用的。

# ios - 菊花链 NSMutableData 容器

> ID：12735118
> 
> 赞同：0
> 
> 时间：2012-10-04T20:11:57.030
> 
> 标签：ios, xcode, nsmutabledata

我正在从网页中检索相当大量的文本，我想用它构建多个 NSMutableData 实例，每个实例都有一定的大小。我不确定的是，一旦第一个 NSMutableData 对象填满，如何转移到第二个 NSMutableData 对象。我想要做的与此类似：

```
NSInteger dataSize = 1000;
data1 = [[NSMutableData alloc] initWithCapacity:dataSize];
data2 = [[NSMutableData alloc] initWithCapacity:dataSize];
data2 = [[NSMutableData alloc] initWithCapacity:dataSize];

if (//data3 is full) {
    [data2 appendData:data];
} else if (// Data2 is full) {
    [data1 appendData:data];
} else {
    [data3 appendData:data];
} 
```

或者其他类似的东西。关于我如何做到这一点的任何建议？如何确定 NSMutableData 对象是否已满负荷？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:33:53.933

当`NSMutableData`它变得“满”时，它将自动分配更多空间，因此您不必担心它会被填满。它更像一个列表而不是一个数组。

除非我遗漏了您要完成的工作，否则您不需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:46:19.520

该`initWithCapacity`方法会立即分配请求的内存，并在需要时分配额外的内存。这`datasize`是初始所需的内存，如果分配的内存不足，它将自动分配更大的空间。

请查看[NSMutableDataDocumentation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html)。;)

# c++ - Card 和 Deck 类 C++

> ID：12735129
> 
> 赞同：1
> 
> 时间：2012-10-04T20:12:25.147
> 
> 标签：c++

我是一个非常新手的程序员，我创建 Card and Deck 类的任务有点过头了……我只需要朝着正确的方向努力，因为我真的不知道自己在做什么。

我的卡头文件：

```
#ifndef CARD_H
#define CARD_H
#include <string>
#include <iostream>
using namespace std;
class Card
{
public:
    static const char SPADES = 'S';
    static const char CLUBS = 'C';
    static const char HEARTS = 'H';
    static const char DIAMONDS = 'D';

    Card();
    Card(int v, char s);

    const string toString();
    const int compareCard(const Card c);

private:
    int value;
    char suit;
};
#endif 
```

我的卡实现文件：

```
#include "Card.h"
#include <iostream>
#include <string>

using namespace std;

Card::Card(int v, char s)
{
    if (v < 1 || v > 13)
    { 
            cerr << "Invalid Card value";
    }
    else
    {
        value = v;
    }

    if ((s != SPADES) && (s != HEARTS) && (s != DIAMONDS) && (s != CLUBS))
    {
        cerr << "Invalid Suit name";
    }
    else
    {
        suit = s;
    }
}

const string Card::toString()
{
    string str; 

    switch (value)
    {   
        case 1: str = "Ace of ";    
            break;
        case 2: str = "Two of ";    
            break;
        case 3: str = "Three of ";  
            break;
        case 4: str = "Four of ";   
            break;
        case 5: str = "Five of ";   
            break;
        case 6: str = "Six of ";    
            break;
        case 7: str = "Seven of ";  
            break;
        case 8: str = "Eight of ";  
            break;
        case 9: str = "Nine of ";   
            break;
        case 10: str = "Ten of ";   
                 break;
        case 11: str = "Jack of ";  
            break;
        case 12: str = "Queen of ";
            break;
        case 13: str = "King of ";  
            break;
        default: cerr << "Invalid Card value";
    }//switch

    switch (suit) 
    {   
        case SPADES: str += "Spades";   
            break;
        case HEARTS: str += "Hearts";
            break;
        case DIAMONDS: str += "Diamonds"; 
            break;
        case CLUBS: str += "Clubs"; 
            break;
        default: cerr << "Invalid Card suit";
    }//switch

    return str; 
}

const int Card::compareCard(const Card c) 
{
     int result;

     if (value == c.value)
     {
         result = 0;
     }
     else if (value == 1)
     {
         result = 1;
     }
     else if (c.value == 1)
     {
         result = -1;
     }
     else if (value < c.value)
     {
         result = 1;
     }
     else
     {
         result = -1;
     }

     return result;
}//compareCard 
```

我的甲板头文件：

```
#ifndef DECK_H
#define DECK_H
#include "Card.h"
#include <string>
using namespace std;
class Deck
{
public:
    Deck();
    Deck(int num);

    void addCard(Card c);
    Card getTopCard();
    Card peekTopCard();

    int getNumCards();
    bool isEmpty();

    void shuffleDeck(int list[], int size);
    void cutDeck();

private:
    static const int MAX = 52;
    static const int NUM_SUITS = 4;
    static const int NUM_VALUES = 13;
    int numCards;
    Card myCard[MAX];

};
#endif 
```

我的 Deck 实现文件：

```
#include "Deck.h"
#include "Card.h"
#include <iostream>
#include <string>
#include <ctime>

using namespace std;

Deck::Deck()
{
    char suits[4] = {Card::SPADES, Card::HEARTS, Card::DIAMONDS,   Card::CLUBS};
    int count = 0;  

    for (int s = 0; s < 4; s++) 
    {
        for (int v = 1; v <= 13; v++)
        {
            myCard[count] = Card(v, suits[s]); 
            count++;
        }           
    }//for
    int numCards = 0;
}//Deck

Deck::Deck(int num)
{
    char suits[4] = {Card::SPADES, Card::HEARTS, Card::DIAMONDS, Card::CLUBS};
    int count = 0;

    for (int s = 0; s < NUM_SUITS; s++) 
    {
        for (int v = 1; v <= NUM_VALUES; v++)
        {
            myCard[count] = Card(v, suits[s]);
            count++;
        }           
    }//for

    if ((num < 0) || (num > MAX))
    {
        cerr << "Invalid number of cards in the deck";
    }
    numCards = num;
}//Deck

void Deck::addCard(Card c)
{   
    if(numCards == MAX)
    {
        cerr << "Attempt to add to full deck";
    }//if
    else
    {
        myCard[numCards] = c;
        numCards++;
    }//else
}//addCard

Card Deck::getTopCard()
{
    Card c;

    if (numCards > 0) 
    {   
        c = myCard[0];  
        for (int i = 1; i < numCards; i++) 
        {
            myCard[i - 1] = myCard[i];
        }
    numCards--; 
    } 
    else 
    {
        cerr<<"Cannot add card from an empty deck.";
    }
    return c;   
}//getTopCard

Card Deck::peekTopCard()
{
    Card c;     

    if (numCards > 0)
    {   
        c = myCard[0];
    } 
    else 
    {
        cerr<<"Cannot add card from an empty deck.";
    }
    return c;
}//peekTopCard

int Deck::getNumCards()
{
    return numCards;
}//getNumCards

bool Deck::isEmpty()
{
    bool empty = true;
    if (numCards == 0)
    {
        empty = true;
    }
    else
    {
        empty = false;
    }

    return empty;
}//isEmpty

void Deck:: shuffleDeck(int list[], int size)
{
    srand(time(0));
    for(int i = 0; i < size; i++)
    {
        int index = rand() % MAX;
        int temp = list[i];
        list[i] = list[index];
        list[index] = temp;
    }//for
}//shuffleDeck 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:50:14.130

当你开始一个新的代码库时，从小而简单的开始，一次增加一点复杂性，在每一步测试，在你引入下一个之前让每一个添加都完美地工作，**永远不要添加不起作用的代码**。

让我们从`Card`：

```
// Card.h
#ifndef CARD_H
#define CARD_H
class Card
{
 public:
  Card();

 private:
  int value;
 };
#endif

//Card.cc

#include "Card.h" 
```

这编译。现在我们为值添加一个非默认构造函数，一个“getter”，**并编写一个测试：**

```
// in Card.h:

Card(int v);
int getValue();

// in Card.cc:

Card::Card(int v)
{
  value=v;
}

int Card::getValue()
{
  return(v);
}

// in testCard.cc:

#include <iostream>
#include "Card.h"
using namespace std;

int main()
{
  Card X(5);

  cout << "card is " << X.getValue() << endl;

  return(0);
} 
```

这不编译；它有一个错误。**在添加更多内容之前找到错误并修复它。**

如果遇到无法破解的问题，请随时寻求帮助。等到你遇到 和 之类的东西时`cut`，`shuffle`你就会轻松解决很多小问题。

**编辑：**

您在 中声明了默认构造函数 ( `Card()`) `Card.h`，但未在 中定义它`Car.cc`。有些地方会`Deck`尝试构建不带参数的卡片（例如`Card c;`），而链接器没有可插入的内容。将默认构造函数添加到`Card.cc`.

**编辑：**

你`shuffleDeck`看起来像一个正在进行的工作。如果您遇到问题，我建议您`swapCards(int, int)`先尝试实施。

**编辑：**

您发布的代码分为两类。是否有使用它们的主要例程？`main()`如果没有 a在某个地方，您将无法构建可执行文件（库是，可执行文件否）。

**编辑：**

您应该能够使用您所拥有的构建目标文件 (`Card.o`和`Deck.o`)。我建议您编写（并构建和运行）一个测试例程，例如：

```
#include "Deck.h"
#include <iostream>
using namespace std;

int main()
{
  Deck D;
  D.addCard(Card(10,'D'));
  D.addCard(Card(4,'C'));
  cout << D.getNumCards() << endl;

  D.cutDeck();

  while(!D.isEmpty())
    {
      Card C = D.getTopCard();
      cout << C.toString() << endl;
    }

  return(0);
} 
```

*您应该一直这样做，以便在添加功能时测试您的功能。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:56:01.197

我建议通过重载比较运算符来增加你的类：

```
class Card
{
  public:
    bool operator==(const Card& other) const
    {
         return ((value == other.value) && (suite == other.suite));
    }

    bool operator< (const Card& other) const
    {
         bool is_less_than = false;
         if (suite == other.suite)
         {
             is_less_than = value < other.value;
         }
         return is_less_than;
    }
    bool operator!= (const Card& other) const
    { return !(*this == other); }
    bool operator<= (const Card& other) const
    { return (*this == other) || (*this < other); }
    bool operator>  (const Card& other) const
    { return !(*this <= other); }
    bool operator>= (const Card& other) const
    { return !(*this < other); }
}; 
```

通过上述重载运算符，您可以更轻松地使用其他算法，例如 std::sort 或 std::find。

# apache - 带有 R、L、E 标志的 htaccess RewriteRule 重定向（环境变量）

> ID：12735132
> 
> 赞同：1
> 
> 时间：2012-10-04T20:12:36.920
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, environment-variables

我想在从 htaccess 重定向后设置一个 apache env 变量

`RewriteRule ^somelink/$ /somelink.php [L,R,E=HOWTO:ok]`

`[L,R]`标志，因为我想更改浏览器地址栏中的地址
`[E]`标志标志，因为我想设置变量

`[E=HOWTO:ok]`应该设置变量但什么也没发生

我在重定向后在 somelink.php 上尝试了 var_dump($_SERVER) 但出现了任何 HOWTO
但如果我使用`SetEnv HOWTO ok`一切都可以

## 如何使用 [R,L] 重定向设置 apache 环境变量并在 php 文件中获取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:02:15.997

> 如何使用 [R,L] 重定向设置 apache 环境变量并在 php 文件中获取它？

您无法设置环境变量、重定向请求并在发出第二个请求时让它仍然存在。当您使用`R`时，它会重定向浏览器，这意味着*对新位置*（在本例中为`/somelink.php`.

您需要以不同的方式处理这个问题，也许使用 GET 参数？

```
RewriteRule ^somelink/$ /somelink.php?HOWTO [L,R,QSA] 
```

# arrays - 如何将 1 个单词与多个单词进行比较并输出 levenstien 分数列表

> ID：12735134
> 
> 赞同：0
> 
> 时间：2012-10-04T20:12:53.370
> 
> 标签：arrays, list, levenshtein-distance

我有一个表格，我可以输入两个单词，然后比较 levenshtein 分数，效果很好。

我希望能够将 1 个单词与由“，”分隔的字符串进行比较。然后整个地段需要呼应出来。这是我到目前为止所拥有的：

```
Levenstien for <b><?php echo $_POST["source"]; ?></b> and <b><?php echo $_POST["target"]; ?></b>:

<?php
$string5 = $_POST["source"];
$string6 = $_POST["target"];
$array6 = explode(', ',$string6); 

echo levenshtein("$string5","$array6");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:18:27.203

[你会使用一个`foreach`循环](http://php.net/manual/en/control-structures.foreach.php)（一个`for`循环也可以）。尝试：

```
Levenstien for <b><?php echo $_POST["source"]; ?></b> and <b><?php echo $_POST["target"]; ?></b>:

<?php
$string5 = $_POST["source"];
$string6 = $_POST["target"];
$array6 = explode(', ',$string6); 

foreach ($array6 as $derp)
{
    echo $string5, "/", $derp, ": ", levenshtein($string5, $derp), "<br>";
}

?> 
```

要按分数顺序输出，请使用以下命令：

```
Levenstien for <b><?php echo $_POST["source"]; ?></b> and <b><?php echo $_POST["target"]; ?></b>:

<?php
$string5 = $_POST["source"];
$string6 = $_POST["target"];
$array6 = array_map('trim', explode(',',$string6));
$doop = array();

foreach ($array6 as $derp)
{
    doop[$derp] = levenshtein($string5, $derp);
}

arsort($doop); // sorts highest element first

foreach ($words as $key => $value)
{
    echo sprintf('%s / %s: %s<br />', $string5, $key, $value);
}

?> 
```

# python - 创建用户 ID 输入页面 (Django/Python)

> ID：12735139
> 
> 赞同：0
> 
> 时间：2012-10-04T20:13:28.947
> 
> 标签：python, django

我想创建一个页面，用户在其中输入他们的 ID 或姓名。所以类型是文本。如果他们没有输入任何内容，点击提交会将他们带到一个新页面或同一个页面。这不是登录或身份验证，而只是来自用户的输入，一种身份证明。我需要知道他们的 ID 才能进行投票。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:28:43.977

1 制作表格

```
<form method="POST"><input name="user_id"/></form > 
```

2 在您看来，您获取数据并进行比较

```
 def my_view(request):
     user_id = request.POST['user_id']
     return HttpResponse(User.get(user_id=user_id)) 
```

# sql - 用于验证两个数据库的 SQL 脚本

> ID：12735145
> 
> 赞同：2
> 
> 时间：2012-10-04T20:13:46.237
> 
> 标签：sql, database, oracle

我的任务是编写一个脚本来验证在第 3 方夜间下载期间从一个数据库 (db1) 下载到另一个数据库 (db2) 的数据。

db1 已标准化，而 db2 未标准化。数据应该是一对一的，我的公司希望我证明这一点，因为信息很关键并且必须是正确的。

我从来没有做过这种事情，也从来没有使用过 Oracle（MSSQL 是我通常使用的）所以我想知道：

*   最好的方法/最佳实践代码明智/文档明智是什么？
*   使用 Oracle 时我应该注意什么？

我认为自己比 Junior 高级一点，但我从事 SQL 开发才几年。所以你能想到的任何其他东西都会有很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:11:03.997

在将一个数据库模式迁移到另一个数据库模式时，我遇到了类似的情况，我在 DBA Stack Exchange 上发布了这个问题：

[是否有工具可以在两个不同的模式之间进行数据比较？](https://dba.stackexchange.com/questions/3289/are-there-tools-to-perform-data-comparison-between-two-different-schemas)

我使用的是 SQL Server，但解决方案的机制应该适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:55:03.733

如果我正确理解您的问题，那么它可能就像在 Database-1 中创建一个数据库链接一样简单，其中包含数据库 2 的用户 ID、密码、TNS 服务名称等详细信息，并`@link_name`在 Database-1 中的查询中使用 DB 链接访问 Database-2 中的对象。

阅读[此](http://docs.oracle.com/cd/B12037_01/server.101/b10759/statements_5005.htm)内容以获取更多信息。

一旦你有了一个数据库链接，你就可以使用像这样的查询

```
select a.col1, b.col1
  from table1 a, 
       table1@dblink b   --this is a table in Database-2
 where a.col2 = b.col2
    ....
    ....; 
```

# ruby - 在测试之间擦除 Cassandra DB (Rspec)

> ID：12735150
> 
> 赞同：5
> 
> 时间：2012-10-04T20:14:14.223
> 
> 标签：ruby, testing, rspec, cassandra

我正在运行涉及 Cassandra 数据库中数据的 rspec 测试。在测试之间擦除/清理数据库的最佳实践是什么？对于我的 mongo 数据，我正在使用 DatabaseCleaner，并且正在寻找 Cassandra 的等价物。我目前正在我的 spec_helper.rb 中执行以下操作，但速度非常慢，因此正在寻找更好的解决方案。谢谢！

```
config.before :each do
    ['column1', 'column2'].each do |name|
      begin
        $cassandra.drop_column_family(name)
      rescue
        next
      ensure
        cf = Cassandra::ColumnFamily.new(keyspace: 'db_name', name: name, comparator_type: 'TimeUUIDType')
        $cassandra.add_column_family(cf)
      end
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-18T13:35:05.293

老问题，但我找到了有用的要点，也许它也会帮助其他人（我正在使用[cequel](https://github.com/cequel/cequel) gem 来访问 Cassandra）：

[https://gist.github.com/elado/c95a4ffa952809865ee8](https://gist.github.com/elado/c95a4ffa952809865ee8)

```
# in spec_helper.rb

RSpec.configure do |config|
  records = []

  config.before :suite do
    Cequel::Record.descendants.each do |klass|
      klass.after_create {|r| records << r }
    end
  end

  config.after :each do
    records.each(&:destroy)
    records.clear
  end

  def clean_cequel!
    Cequel::Record.descendants.each { |klass| Cequel::Record.connection.schema.truncate_table(klass.table_name) }
  end

  config.before :suite do
    clean_cequel!
  end

  config.after :suite do
    clean_cequel!
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:34:56.077

尝试在您的密钥空间中截断、禁用`autoSnapshot`并`cassandra.yaml`禁用持久写入。

截断曾经很慢，但自 1.1.1 起已修复：[https ://issues.apache.org/jira/browse/CASSANDRA-4153](https://issues.apache.org/jira/browse/CASSANDRA-4153)

# jquery - jquery 和 form.submit - 速度慢且不适用于所有浏览器

> ID：12735152
> 
> 赞同：2
> 
> 时间：2012-10-04T20:14:42.150
> 
> 标签：jquery, forms

这可能是一个非常简单的问题，但我只是在学习 jquery，我可能犯了一个非常初学者的错误。我在一个基本的订单表单上设置了验证，但是当我尝试使用 submitHandler: 提交表单时，一些浏览器挂起并且什么也不做，而另一些浏览器会搅动一两分钟然后实际提交。这是 jquery 脚本位：

```
<script type="text/javascript">
$.validator.setDefaults({
    submitHandler: function () { $("#order").submit(); }
});
$().ready(function () {

   // validate signup form on keyup and submit
    $("#order").validate({
        rules: {
            lastname: "required",
            firstname: "required",
            confirm_email: {
                required: true,
                equalTo: "#email"
            },
            email: {
                required: true,
                email: true
            },
            password: {
                required: true,
                minlength: 5
            },
            confirm_password: {
                required: true,
                minlength: 5,
                equalTo: "#password"
            },
            domain: "required",
            selpackage: "required"
  //       agree: "required"
        },
        messages: {
            firstname: "Please enter your first name",
            lastname: "Please enter your last name",
            password: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long"
            },
            confirm_password: {
                required: "Please provide a password",
                minlength: "Your password must be at least 5 characters long",
                equalTo:   "Passwords do not match"
            },
            email: "Please enter a valid email address",
            confirm_email: "Email addresses do not match"
//         agree: "Please accept our policy"
        }
    });

});
</script> 
```

表单名称是 order，它只是一个常规标签。有人能指出我正确的方向吗？

# mysql - 如何存储嵌套的编号段落（1、1.1、1.1.1）？

> ID：12735154
> 
> 赞同：0
> 
> 时间：2012-10-04T20:14:53.947
> 
> 标签：mysql, ios, django, database-design, data-representation

例如：

> **面板控制指南**
> 
> 1：确保面板已关闭。
> 
> 2：关闭后，打开另一个面板。
> 
> 2.1：做这个和这个......

您还可以在我的要求中包含某些文本样式等。

我目前正在使用带有 MySQL 数据库的 Django 和 Jquery/Bootstrap。将来，iOS 原生应用程序将需要显示相同的信息。因此，如果某些东西被设置为“1.2.3”。在 Web 应用程序中，它需要在 iOS 应用程序中显示相同。

所以我的问题（而且很笼统）是：我怎样才能存储这些东西？

例如，如果我要将食谱存储在数据库中。然后我怎样才能在一个风格独特的段落中呈现这些成分，然后是食谱中的步骤等等。

如果你看一下[Inkling](http://www.inkling.com/)，他们会做这样的事情。我不觉得他们将每一章存储在一个 XML 文件中然后渲染它。这不会造成太多开销吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:24:22.110

这是一个笼统的问题，所以答案必然是笼统的。您所描述的是分层数据结构：有序的步骤序列，每个步骤都可能是子步骤序列的父级。在 MySQL 中处理此问题的两种标准方法是使用邻接列表或嵌套集合结构。这两种结构在网络上的许多地方都有描述。一篇不错的文章是[Mike Hillyer](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)的这篇文章。

这并没有解决格式问题，而是更多关于您将存储在层次结构中每个节点的数据类型，并且与如何表示层次结构本身无关。

# php - MySQL - 在需要时添加增值税

> ID：12735157
> 
> 赞同：1
> 
> 时间：2012-10-04T20:14:58.587
> 
> 标签：php, mysql

我有一系列包含或不包含增值税的产品。我总是想向客户显示包含增值税的价格，所以我有一个标志，说明价格是否包含增值税。目前我在 PHP 中添加了增值税，这意味着排序是一些问题，因为 MySQL 会根据基本价格进行排序，有时增值税会使结果无序。

我想要的是在 MySQL 查询中自动将增值税添加到价格中。我怎样才能做到这一点？

我的产品表如下所示：

```
product_id, product_dayprice, product_weekprice, product_includevat 
```

product_includevat 只是一个布尔值，即 1 或 0...增值税存储为 PHP 变量

我的排序代码看起来像这样，旨在将价格为 0 的产品放在最后

```
CASE product_daypriceWHEN 0 then 40000 ELSE product_dayprice END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:17:21.383

如果那`product_include_vat`是一个布尔字段，那么它就像

```
SELECT product_weekprice + (product_weekprice * vat_rate * product_includevat) 
```

如果 includevat 字段为假，它将计算为整数 0，并且您的增值税在乘法中被清零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:32:17.557

您不应该在每一步都动态计算增值税。计算一次，并保存所有数据，例如 netto 和 VAT 作为单独的值，或 brutto 和 netto，或 brutto 和 VAT。

为什么要冗余？一：添加价格时的四舍五入错误。二：即使增值税税率发生变化，某些数据在商品售出后也必须是永久的。这对于您的当前价格数据库无效，但对于您的客户历史记录，您必须知道销售时包含多少增值税。如果您每次都重新计算，并且增值税率增加，您将向税务局支付太多费用。

# php - 如何通过jQuery显示数组值？

> ID：12735162
> 
> 赞同：0
> 
> 时间：2012-10-04T20:15:09.990
> 
> 标签：php, jquery, ajax, invoice

我想使用 jQuery 或 ajax 在 script.php 文件上发送多个选择的选定值（一一）。在 script.php 文件上发送值后。我想在 index.php 页面特定的输入框中显示 script.php 文件查询结果。举个例子：如果有人选择项目，那么项目描述和费率会显示在描述和费率输入框中。这是我的代码和图像

![在此处输入图像描述](../Images/8fe2a38e9f8f4d373394418a17203016.png)

index.php 文件代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Item Description</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {

    $(".item").change(function() {

    var item = [];
    item:$(".item").each(function() {
            var num = parseFloat(this.value) || 1;
            item.push(num);
    });

        $.ajax({
            type: "POST",
            url: "script.php",
            data: item,
            success: function()
            {
                            // I failed to show script.php value

            }
        });

        return false;
    });

});
</script>
<style type="text/css">
table
{
    border: 1px solid black;
    border-bottom: none;
    width: 600px;
}

td
{
    border-left: 1px solid black;
    border-bottom: 1px solid black;
    padding:5px 5px 5px 5px;
}
#first
{
    border-left: none;
    border-bottom: 1px solid black;
}
</style>
    </head>
    <body>
        <form method='post' name='form1' action='welcome.php'>
        <table cellpadding="0" cellspacing="0">
            <tr>
                <td id="first">Item</td>
                <td>Description</td>
                <td>Rate</td>
            </tr>
            <?php
            $num=4;
            for ($i=0; $i<$num; $i++)
            {
                echo "
             <tr>
                 <td id='first'>
                 <Select class='item' name='item[]'/>
                 <option>Select one</option>
                 <option>Deluxe Plan</option>
                 <option>Premium Plan</option>
                 <option>Standard Plan</option>
                 <option>Economy Plan</option>
                 </select>
                </td>
                <td><textarea class='description' type='text' name='description[]'></textarea></td>
                <td><input class='rate' type='text' name='rate[]'/></td>
               </tr>";
            }
            ?>
     </table>
</form>
</body>
</html> 
```

script.php 文件代码

```
<?php
include "dbconnect.php";

$item=$_REQUEST['item'];

$query="select * from item where item_name='$item'";
$result=mysql_query or die (mysql_error());

while ($row = mysql_fetch_array($result))
    {
    $description=$row['description'];
    $rate=$row['rate'];
    }
?> 
```

请任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:20:15.437

尝试这个

```
data: { 'item' : item.serializeArray() } 
```

在将阵列发送到服务器之前对其进行序列化..

```
success: function(result) {

} 
```

您使用页面中的数据参数并将其发送到您的服务器......您使用数据来查询一些结果并以轻量级的 JSON 形式发回结果。

从服务器返回的这个结果可以在你的 AJAX 请求的成功回调函数中处理，它可以用来操作 DOM...

检查此链接：[http ://www.webdeveloper.com/forum/showthread.php?240091-how-to-return-data-from-php-to-jquery-AJAX](http://www.webdeveloper.com/forum/showthread.php?240091-how-to-return-data-from-php-to-jquery-AJAX)

# android - 使用两个编辑文本

> ID：12735166
> 
> 赞同：0
> 
> 时间：2012-10-04T20:15:23.113
> 
> 标签：android, android-edittext

这是我的问题，我正在设计一个应用程序，我正在使用两个编辑文本和按钮，所以当我使用最大长度为 4 的输入过滤器并将焦点设置为其他编辑文本时，当我编写时，焦点传递到第二个编辑文本，但它没有写 en 我输入了一些东西，而是在第一个中继续写。

有没有办法在第一个编辑文本中只放 4 个字符停止在其中写入，然后在第二个中写入而不更改第一个谢谢。

这是我的问题代码的一部分：

```
String inDigit = ((Button) view).getText().toString();
//Costo de venta
if (inStr.equals("0")) {
    inStr = inDigit; 
} else {
inStr += inDigit; 
}
int maxLength = 4;
InputFilter[] FilterArray = new InputFilter[1];
FilterArray[0] = new InputFilter.LengthFilter(maxLength);
editX.setFilters(FilterArray);
editX.setText(inStr);

if(editX.getText().toString().length() == 4)
{
    if(editX.hasFocus()){
        editY.requestFocus();
        return;
    }

    }else {
        editY.getText().toString();
        editY.setText("");
    }

    if (lastOperator == '=') {
        result = 0;
        lastOperator = ' ';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:38:55.437

> 有没有办法只在第一个编辑文本中放置 4 个字符停止写入，然后在第二个中写入而不更改第一个

是的。假设您有第一个 EditText 被调用`edit`到第二个是一个类变量`edit2`。一旦超过第四个字符，我们将使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)将焦点从 切换`edit`到：`edit2`

```
edit.addTextChangedListener(new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {}

    @Override
    public void afterTextChanged(Editable s) {
        if(s.length() == 4) {
            edit2.requestFocus();
        }
    }
}); 
```

# windows - Minifilter 驱动程序、内存映射和记事本

> ID：12735169
> 
> 赞同：4
> 
> 时间：2012-10-04T20:15:31.607
> 
> 标签：windows, driver, memory-mapped-files, memory-mapping, minifilter

我将从我的最终目标开始。我希望我系统上的每个文档（doc、docx、pdf、txt 等）都有一个固定的（并且对用户来说是透明的）标题。例如，字符串“abcde”将被添加到每个文档中。

为此，我编写了一个微过滤驱动程序，它执行以下操作：

`IRP_MJ_WRITE`- 如果标题存在，则将偏移量更改为文件的开头。

`IRP_MJ_READ`- 如果标题存在，则将偏移量更改为文件的开头。

`IRP_MJ_QUERY_INFORMATION`- 如果标题存在，则更改返回的文件大小。

`IRP_MJ_DIRECTORY_CONTROL`- 如果标题存在，则更改返回的文件大小。

`IRP_MJ_CREATE`- 如果标题不存在，则将标题添加到文件中。

这很好用，除了 MS Word 2003 文档（doc、xls、ppt）和记事本。我似乎没有捕捉到一些读写操作，记事本显示了标题和文件。

我在[http://www.osronline.com/](http://www.osronline.com/)上阅读了很多内容，并且每个提出要求的人都被告知要阅读一些 Nagar 书籍或查看他们的档案（搜索起来是灾难）。我想我已经阅读了与我的问题相关的所有内容。

似乎记事本使用了内存映射文件、快速 IO、分页 IO，天知道还有什么。我尝试过使用 mHook和hook `NtMapViewOfSection`，但是当我在记事本中打开一些文件并试图找到映射的数据时，我没有运气（但我找到了映射到内存的所有其他字节）。`MapViewOfFile``MapViewOfFileEx`

然后我读到我想要完成的事情是不可能用钩子完成的，只有使用微过滤器驱动程序，并且从我认为我缺少一些要设置的标志。

如果有人能告诉我该怎么做才能捕捉记事本的操作，我真的会很感激。

这是一些阅读代码示例：

```
CONST FLT_OPERATION_REGISTRATION Callbacks[] = {
    { IRP_MJ_WRITE,
    0,
    PreWrite,
    PostWrite },

    { IRP_MJ_READ,
    0,
    PreRead,
    PostRead },

    { IRP_MJ_QUERY_INFORMATION,
    0,
    NULL,
    PostQueryInfo },

    { IRP_MJ_DIRECTORY_CONTROL,
    0,
    NULL,
    PostQueryDir },

    { IRP_MJ_CREATE,
    0,
    NULL,
    PostCreate },

    { IRP_MJ_OPERATION_END }
};

FLT_PREOP_CALLBACK_STATUS
    PreRead (
    _Inout_ PFLT_CALLBACK_DATA Data,
    _In_ PCFLT_RELATED_OBJECTS FltObjects,
    _Flt_CompletionContext_Outptr_ PVOID *CompletionContext
    )
{
    NTSTATUS status = 0;
    ULONG bytesRead;
    PVOID readBuffer;
    LARGE_INTEGER zero;
    zero.QuadPart = 0;

    UNREFERENCED_PARAMETER(FltObjects);
    UNREFERENCED_PARAMETER(Data);
    UNREFERENCED_PARAMETER(CompletionContext);

    if(Data->Iopb->Parameters.Read.MdlAddress != NULL){
        return FLT_PREOP_SUCCESS_NO_CALLBACK;
    }

    if(!IsFileNeedProccessing(&FltObjects->FileObject->FileName, Data)){
        return FLT_PREOP_SUCCESS_NO_CALLBACK;
    }

    readBuffer = ExAllocatePool(
        NonPagedPool,
        prefixSize);
    if(readBuffer == NULL)
    {
        return FLT_PREOP_SUCCESS_NO_CALLBACK;
    }

    status = FltReadFile(
        FltObjects->Instance,
        FltObjects->FileObject,
        &zero,
        (ULONG)prefixSize,
        readBuffer,
        FLTFL_IO_OPERATION_DO_NOT_UPDATE_BYTE_OFFSET,
        &bytesRead,
        NULL,
        NULL);

    if(NT_SUCCESS(status))
    {
        if(IsBuffAPrefixOfBuffB(prefix, readBuffer, prefixSize, (SIZE_T)bytesRead))
        {
            Data->Iopb->Parameters.Read.ByteOffset.QuadPart += prefixSize;
            FltSetCallbackDataDirty(Data);
        }
    }
    ExFreePool(readBuffer);

    return FLT_PREOP_SUCCESS_WITH_CALLBACK;
}

 FLT_POSTOP_CALLBACK_STATUS
    PostRead (
    _Inout_ PFLT_CALLBACK_DATA Data,
    _In_ PCFLT_RELATED_OBJECTS FltObjects,
    _In_opt_ PVOID CompletionContext,
    _In_ FLT_POST_OPERATION_FLAGS Flags
    )
 {
    NTSTATUS status;
    ULONG bytesRead;
    PVOID readBuffer;
    FILE_STANDARD_INFORMATION info;
    LONGLONG* currOffset = &Data->Iopb->TargetFileObject->CurrentByteOffset.QuadPart;
    LARGE_INTEGER zero;
    zero.QuadPart = 0;

    UNREFERENCED_PARAMETER(CompletionContext);
    UNREFERENCED_PARAMETER(Flags);
    UNREFERENCED_PARAMETER(Data);
    UNREFERENCED_PARAMETER(FltObjects);

    if(Data->Iopb->Parameters.Read.MdlAddress != NULL)
    {
        return FLT_POSTOP_FINISHED_PROCESSING;
    }

    if(!IsFileNeedProccessing(&FltObjects->FileObject->FileName, Data))
    {
        return FLT_POSTOP_FINISHED_PROCESSING;
    }

    status = FltQueryInformationFile(
        FltObjects->Instance,
        FltObjects->FileObject,
        &info,
        sizeof(info),
        FileStandardInformation,
        NULL);

    if(NT_SUCCESS(status)
        && info.EndOfFile.QuadPart != *currOffset
        && *currOffset >= (LONGLONG)prefixSize)
    {
        readBuffer = ExAllocatePool(NonPagedPool,
            prefixSize);
        if(readBuffer == NULL)
        {
            return FLT_POSTOP_FINISHED_PROCESSING;
        }

        status = FltReadFile(
            FltObjects->Instance,
            FltObjects->FileObject,
            &zero,
            (ULONG)prefixSize,
            readBuffer,
            FLTFL_IO_OPERATION_DO_NOT_UPDATE_BYTE_OFFSET,
            &bytesRead,
            NULL,
            NULL);

        if(NT_SUCCESS(status))
        {
            if(IsBuffAPrefixOfBuffB(prefix, readBuffer, prefixSize, (SIZE_T)bytesRead))
            {
                *currOffset -= prefixSize;
                FltSetCallbackDataDirty(Data);
            }
        }
        ExFreePool(readBuffer);
    }

    return FLT_POSTOP_FINISHED_PROCESSING;
 } 
```

`IsFileNeedProccessing`检查文件名和请求进程。（某些应用程序可以看到标题）

如果有人能告诉我该怎么做才能捕捉记事本的操作，我真的会很感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:40:31.653

正如@Harry jonhston 指出的那样，您对仅拦截 IRP 的检查`MdlAddress == NULL`是不正确的。

```
if(Data->Iopb->Parameters.Read.MdlAddress != NULL)
{
    return FLT_POSTOP_FINISHED_PROCESSING;
} 
```

很可能记事本和 MS Office 应用程序因此而失败。

还有几点：

*   您必须适当地处理 Paging IO。
*   `FltReadFile`应该只称为 IRQL `PASSIVE_LEVEL`。
*   更重要的是更改文件大小并使其对 Windows 文件系统和用户透明是相当复杂的。建议不要这样做。
*   为文件添加特殊数据可能是您最好使用[备用数据流](http://support.microsoft.com/kb/105763)。

# jquery - 由于名称属性，复选框未显示

> ID：12735171
> 
> 赞同：1
> 
> 时间：2012-10-04T20:15:46.823
> 
> 标签：jquery, html

如果我有一个具有以下名称属性的复选框：

`name="answerName[True]"`

当我在下面执行这条 jquery 行时它没有显示复选框，怎么会？

`$(this).closest('.option').siblings('.answer').find('input[name=answerName[Yes]]').show();`

如果名称属性是这样的：

`name="answerNameTrue"`

jquery是这样的：

`$(this).closest('.option').siblings('.answer').find('input[name=answerNameYes]').show();`

然后它确实显示但是当我在它周围加上 [] 括号时它突然不起作用并且不显示复选框是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:18:40.777

您可以使用引号：

```
$(this).closest('.option').siblings('.answer').find('input[name="answerName[Yes]"]').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:17:45.343

`True` 是一个 javascript 关键字。

这可能是它搞砸的原因之一。

尝试将属性放在引号中，然后尝试..

```
.find('input[name="answerName[Yes]"]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:20:34.400

您的 [yes] 只是与选择器的括号冲突

Jquery 将解析：

```
find('input[name=answerName[Yes]]') 
```

并将保留：

```
find('input[name=answerName[Yes]'); 
```

所以最后你有一个 [ that jquery don't know what to do with it + an extra ] 在你的选择器的末尾。

尝试逃避它：

```
find('input[name=answerName\[Yes\]]') 
```

或者

```
find('input[name="answerName[Yes]"]') 
```

# text-size - 如何检测 Windows 中的文本长度？

> ID：12735175
> 
> 赞同：0
> 
> 时间：2012-10-04T20:16:00.777
> 
> 标签：text-size

在我使用 Builder C++ 6 为 Windows 编写的软件中，我需要创建一个 .pdf 文章，其中包含用户编辑的一些信息并存储在数据库中。此信息的一部分必须在设计的矩形内绘制，因此我需要检查 55max 字符串是否适合矩形内的一行。如果没有，那么我需要计算应该在哪里换行（\n）。

通常文本确实适合只有 55 个字符的矩形，但有时一些不常见的文本（例如“WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW...”）虽然具有相同数量的字符，但最终会弄乱整个事情。换句话说，我不能使用字符串中的字符数来确定何时换行，而是以像素（或其他度量单位）为单位的文本长度，所以我可以检查字符串在.pdf 是否为矩形容器。

我尝试了诸如 GetCharABCWidths()、GetTextExtentPoint32() 之类的函数，但没有成功（每次我将函数用于相同的字符串/字符时，所谓的“逻辑单元”都不同，我不知道如何使用它们，或者即使它们明显不同（'1' 与 'W' 相比），char 的长度也是相等的，或者其他）。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:45:20.797

[最后，我可以使用Length of a string in pixels 中的](https://stackoverflow.com/questions/4628368/length-of-a-string-in-pixels)这个类型来做我想做的事情：

> 要获得更准确的测量结果，您可以使用字符串填充 TextField，然后测量该 TextField 文本的宽度。

这让我回到了 Borland C++ Builder，在那里我找到了一个函数 (Canvas->TextExtent)，它告诉我字符串在画布中占据了多少。

所以，问题解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:01:40.690

您还可以使用 DrawText 函数。只需将 DT_CALCRECT 标志传递给函数。甚至 GetTextMetrics - 我都在这里使用过。它们是普通的、普通的 win32 函数。适用于您希望尝试的任何支持 win32 progs 的编译器。VS、GCC、Borland等

**代码片段：**

```
HDC hDC;
TEXTMETRIC textMetric;
HFONT   hFont, hOldFont;
int sizeInPpoints, lineHeight;
RECT textRect;
char *buffer = "Comprimento em pixels desta string!";

hDC = GetDC(hwnd);
sizeInPpoints = MulDiv(10, GetDeviceCaps(hDC, LOGPIXELSY), 72);
hFont = CreateFont(-sizeInPpoints, 0, 0, 0, FW_NORMAL, 0, 0, 0, 0, 0, 0, 0, 0, "Courier New");
hOldFont = (HFONT)SelectObject(hDC, hFont);

GetTextMetrics(hDC, &textMetric);

lineHeight = textMetric.tmHeight; // character height in current font

textRect.left = textRect.right = textRect.top = textRect.bottom = 0;
DrawText(hDC, buffer, strlen(buffer), &textRect, DT_CALCRECT);

printf("Size of text calculated by DrawText: [%d x %d]\n", textRect.right, textRect.bottom);
printf("Height of text calculated by GetTextMetrics: %d\n", lineHeight); 
```

**输出：**

```
Size of text calculated by DrawText: [280 x 16]
Height of text calculated by GetTextMetrics: 16 
```

# c# - 从列表视图的选定项目c#将项目添加到列表框

> ID：12735176
> 
> 赞同：0
> 
> 时间：2012-10-04T20:16:02.687
> 
> 标签：c#, winforms, listview

我正在尝试从 WinForms2 的列表视图的选定项目中添加 WinForm1 的列表框中的项目，但这些项目没有添加到列表框中。

下面是我正在使用的代码

WinForm1：

```
 public void setsrc( ListViewItem src )
    {
        Listbox1.Items.Add(src.Text);
    } 
```

Winform2：

```
 WinForm1 fMain = new WinForm1();
    private void AddItemsButton_Click(object sender, EventArgs e)
    {

        foreach (ListViewItem src in listView1.CheckedItems)
        {
            fMain.setsrc(src);
        }
    } 
```

我也在form2中尝试了下面的代码

```
 WinForm1 fMain = new WinForm1();
    private void AddItemsButton_Click(object sender, EventArgs e)
    {

        foreach (ListViewItem src in listView1.CheckedItems)
        {
            fMain.Listbox1.Items.Add(src.Text); //The modifier is set to internal of Listbox1
        }
    } 
```

我试图通过应用断点来检查。奇怪的是，两个条件中的值都出现了，但它没有在 listbox1 中列出。Form1 的控件没有更新。

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:41:30.937

问题是您`WinForm`在 Form2 中声明了一个新实例。当然你什么也看不到。您需要在创建`WinForm1`Form2 对象时创建一个引用。

一种方法是通过构造函数

```
class Form2
{
    private WinForm1 form;
    public Form2(WinForm1 form)
    {
       this.form = form;
    }
} 
```

然后，在`WinForm1`您创建`Form2`.

```
Form2 form = new Form2(this);
form.Show(); 
```

请为您的对象使用有意义的名称。

# c++ - 具有 const 不可复制元素的元组

> ID：12735180
> 
> 赞同：4
> 
> 时间：2012-10-04T20:16:26.937
> 
> 标签：c++, visual-c++, c++11, tuples, visual-c++-2010

我需要创建一个`std::tuple<const XYZ,...>`where XYZ is **not copyable**。这样的事情可能吗？我当前的代码

```
auto test() -> std::tuple<const XYZ> { return std::make_tuple(XYZ()); } 
```

导致 Visual Studio 2010 中的 C2248 ......当我用 R 值构造元组时，我觉得这很可疑，所以我假设移动构造会开始......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:18:52.600

您的问题是该元素既不可复制，又不可复制`const`。`const XYZ`元素表现为成员`const XYZ`；到 5.2.5p4 访问`const XYZ`xvalue 上的元素将产生一个具有 union cv 资格的 xvalue，即具有有效类型`const XYZ &&`。该类型不适合作为移动构造函数的参数，`XYZ`因此将尝试调用已删除/私有复制构造函数。

另一种看待它的方式是，移动构造函数（例如 的移动构造函数`std::tuple<...>`）必须确保其参数处于未指定但*有效*的状态。通过制作元素`const`，您已经说过该元素的唯一有效状态是构造它的状态，因此移动构造函数不允许从它移动，*即使*它包含在 xvalue 中。

一种解决方法是定义一个*const move*构造函数`const_cast`及其参数以委托给 move 构造函数：

```
XYZ(const XYZ &&xyz): XYZ(const_cast<XYZ &&>(xyz)) {} 
```

有趣的是，使用 gcc-4.7.2 只需*声明*const move 构造函数就足够了；通过 RVO，可以省略对 const move 构造函数的实际调用。不要依赖这个。

# linux - Linux - 在特定文件之后和之前查找文件

> ID：12735182
> 
> 赞同：2
> 
> 时间：2012-10-04T20:16:45.200
> 
> 标签：linux

我试图在我的计算机上查找特定文件创建前 1 小时和创建后 1 小时创建的文件。

这是我尝试过的方法-

```
find /root -newermt "2012-10-04 1800" -and -newermt "2012-10-04 2000" -exec ls -ldb {} \; 
```

我的 linux 上的目录是 root，创建​​的特定文件是在 19:00 创建的

这是我尝试过的另一种方法，但它只显示了之后或之前的一个结果，而不是两者！>

```
find /root/Downloads -type f \( -newer /root/Downloads/alex.txt ! -newer /root/Downloads/hesham.txt \) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:16:43.710

你要：

```
# missing a -not here ---------------------v
find /root -newermt "2012-10-04 1800" -and -not -newermt "2012-10-04 2000" -exec ls -ldb {} \; 
```

这样做：

1.  中的所有文件`/root`
2.  比**“2012-10-04 1800”更新的**
3.  并且*不*晚于**"2012-10-04 2000"**（或早于**"2012-10-04 2000"**）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:13:39.327

这可能不是最有效的解决方案，但是..

touch /tmp/temp -t time-of-file-creation-1hr

touch /tmp/ntemp -t 文件创建时间+1hr

寻找 。-较新的 /tmp/temp -a ！-较新的 /tmp/ntemp -exec ls -l {} \; 2>/开发/空

# c# - 将我的 asp 按钮添加到面板时出现问题.. ASP & C#

> ID：12735192
> 
> 赞同：0
> 
> 时间：2012-10-04T20:17:25.003
> 
> 标签：c#, asp.net

我正在创建一个按钮并将其添加到面板

```
 Panel p = new Panel();
        p.ID = "b_con";
        p.Attributes.Add("runat", "server");
        this.Controls.Add(p);
        Button b = new Button();
        b.Attributes.Add("value", "reply");
        b.Attributes.Add("id", Convert.ToInt32(r["Message_ID"]).ToString());
        b.Attributes.Add("class", "button");
        b.Click += new System.EventHandler(button_Click);
        p.Controls.Add(b); 
```

我收到此错误“按钮”类型的控件“ctl01”必须放在带有 runat=server 的表单标记内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:18:34.893

您要添加它的页面需要有这个。而且您的面板必须位于表单标签内。

```
<body>
<form runat="server">

<!-- Panel must be added within here -->
<div id="messages_con">
    <asp:Panel id="b_con" runat="server" />
</div>

</form>
</body> 
```

因此，您将其添加到的面板需要在您的 Html 代码中。您正在向页面上不存在的面板添加一个按钮。相反，请参考 Html 中的面板（如上所示），如下所示：

```
Panel p = b_con;
//p.ID = "b_con";
//p.Attributes.Add("runat", "server"); -- Not necessary
this.Controls.Add(p);
Button b = new Button();
b.Attributes.Add("value", "reply");
b.Attributes.Add("id", Convert.ToInt32(r["Message_ID"]).ToString());
b.Attributes.Add("class", "button");
b.Click += new System.EventHandler(button_Click);
p.Controls.Add(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:48:40.850

使用 Form.Controls.Add(p);

通过使用它，我们可以在表单标签上添加面板。

# mysql - 用户控制器单位转换

> ID：12735202
> 
> 赞同：0
> 
> 时间：2012-10-04T20:18:30.070
> 
> 标签：mysql

我正在建立一个在线商店，并希望能够为产品指定各种测量值。诸如宽度/高度和重量之类的东西。

以宽度为例，他们会输入一个值，然后选择`mm, cm, m`等。

然后，应用程序会将其转换为相同的基本单位，比如 mm，以便在整个应用程序中轻松使用。

做这种事情的好模式是什么？我在想一些事情：

```
id     name     factor
1      mm       1
2      cm       0.1
3      m        0.001
... 
```

然后我可以做 $userValue / $factor = $normalised。这可能需要一个连接表，其中包含以下内容：

```
id name
1  length
2  weight
... 
```

这是实现这一目标的最佳方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:25:12.797

*强烈*建议您采取任何措施来避免浮点数。如果您将 0.001 作为浮点数存储在数据库中，您最终可能会得到 0.00099999999982713 的实际值，这可能会导致与您的意图发生微小但令人讨厌的偏差。

将这些表示为您愿意使用的某个“最小”单位的整数值会更好。例如，千分尺，并将所有值转换为此等效度量。这是在大多数系统中为货币所做的，以避免残酷的舍入错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:39:48.893

查看 UNIX`units`功能的工作原理。它由数据文件驱动，并有望解决一些令人讨厌的问题。

[http://www.linuxmanpages.com/man1/units.1.php](http://www.linuxmanpages.com/man1/units.1.php)

# arrays - 如何调整对象数组中的数据以便对其求和？

> ID：12735204
> 
> 赞同：0
> 
> 时间：2012-10-04T20:18:38.257
> 
> 标签：arrays, matlab, object

我有一个`channel`包含对象数组的`filterL`对象。每个`filterL`对象都有一些数据`H`。在控制台中输入以下内容。. .

```
channel.filterL(:).H 
```

给出输出。. .

```
ans =

   0.0140 - 0.0414i
   0.0133 - 0.0181i
   0.0131 - 0.0095i
   0.0131 - 0.0042i
   0.0131 - 0.0000i

ans =

   0.0140 - 0.0416i
   0.0133 - 0.0181i
   0.0131 - 0.0095i
   0.0131 - 0.0042i
   0.0131 - 0.0000i

ans =

   0.0140 - 0.0420i
   0.0133 - 0.0181i
   0.0131 - 0.0095i
   0.0131 - 0.0042i
   0.0131 - 0.0000i 
```

我不能像这样简单地总结这个输出。. .

```
>> sum(channel.filterL(:).H)
??? Error using ==> sum
Too many input arguments. 
```

所以我的问题是如何有效地重组我的数据以便对其进行求和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:21:37.080

首先连接您的数据以将其更改为一个数组

```
[channel.filterL(:).H] 
```

# java - 跨多个套接字的原子套接字消息

> ID：12735206
> 
> 赞同：0
> 
> 时间：2012-10-04T20:18:40.090
> 
> 标签：java, multithreading, sockets, concurrency

我有几个关于 Java 中的套接字编程的问题。

1.  我有一个进程需要跨多个套接字连接发送一条消息。现在我有这个如下

    ```
    Socket[] connections; //Already initialized with all connections

    for i=0 to connections.length - 1
        Send Message across connection[i]; // a new PrintWriter linked to the output stream 
    ```

    这和这个广播一样原子吗？或者在并发环境中是否有可能它们可能不会在几乎同一时刻全部发送？

2.  在并发环境中，套接字连接（设置为 PrintWriter）的输出流是否已经相互排斥？比如说，两个线程想要同时写入 PrintWriter。如果在 PrintWriter 上没有明确的互斥，流的任何输出都会被弄乱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:21:47.507

> 这和这个广播一样原子吗？或者在并发环境中是否有可能它们可能不会在几乎同一时刻全部发送？

不知道你在这里问什么。多个线程不能同时使用一个`Socket`对象。如果同时访问它，您将需要围绕套接字对象进行同步。

如果您询问是否所有消息都将由单个线程“同时”发送，那么答案是“视情况而定”。单个线程可以快速完成此操作，但如果任何发送操作因任何原因*阻塞*，则可能不会。这在很大程度上取决于消息的大小以及写入套接字的频率。

> 在并发环境中，套接字连接（设置为 PrintWriter）的输出流是否已经相互排斥？

如果你看`PrintWriter`代码，你可以看到所有的操作都是`synchronized`. 这意味着从 a 并发写入套接字`PrintWriter`应该没问题。例如：

```
public void println(int x) {
    synchronized (lock) {
        print(x);
        println();
    }
} 
```

# iphone - performBlock 在哪个线程上运行？

> ID：12735213
> 
> 赞同：4
> 
> 时间：2012-10-04T20:19:16.023
> 
> 标签：iphone, objective-c, cocoa-touch, core-data

真的很简单的问题，我的核心数据 UIManagedDocument 是在主线程上创建的，我想知道的是，当我调用 performBlock 时，该阻塞队列/在主线程（创建托管文档的同一线程）上运行吗？

```
dispatch_queue_t backgroundQueue = dispatch_queue_create("DownloadQueue", NULL);
dispatch_async(backgroundQueue, ^{
    // Get data from web
    [document.managedObjectContext performBlock:^{
        // Add data to Core Data
    }];
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:57:39.163

你可以阅读苹果发行说明：[CoreData Release Notes for iOS5](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-CoreData/_index.html)

> 您可以使用限制模式来使用上下文，就像在 OS X v10.7 和 iOS 5 之前一样。您可以直接发送上下文消息；您可以确保从正确的队列发送消息。
> 
> 您可以结合使用基于队列的并发类型和两个新方法来使用上下文：performBlock: 和 performBlockAndWait:。您将“标准”消息分组以发送到块中的上下文（包括初始化，例如设置持久存储协调器等），以传递给这些方法之一。一个例外是：如果您的代码在主线程上执行，您可以直接在主队列样式上下文中调用方法，而不是使用基于块的 API。
> 
> **performBlock: 和 performBlockAndWait: 确保块操作在为上下文指定的队列上执行。**performBlock: 方法立即返回，上下文在其自己的线程上执行块方法。使用 performBlockAndWait: 方法，上下文仍然在自己的线程上执行块方法，但该方法在块执行之前不会返回。
> 
> 重要的是要认识到块是作为一个独特的工作体执行的。一旦您的块结束，其他任何人都可以将另一个块加入队列、撤消更改、重置上下文等等。因此块可能非常大，并且通常以调用 save: 结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:24:36.550

当使用`UIManagedDocument`managedObjectContext 创建时（就像在 OS X v10.7 和 iOS 5 之前一样），使用等同于默认的 Confinement type `NSConfinementConcurrencyType`。简单地说，这种并发类型指定上下文将不会用于除最初创建上下文的线程之外的任何其他线程。

在这种情况下，`UIManagedDocument`（及其上下文）是在主线程上创建的，消息传递`performBlock:`将在主线程上执行关联的块。通过使用`performBlock:`，您实际上不必知道 managedObjectContext 是在哪个线程上创建的，消息传递`performBlock:`将始终在上下文所在的同一线程上执行其关联的块。

# javascript - 在 javascript 的 mouseover/mouseout 与 css 的悬停时，在 div 标签上悬停时，其他一些元素会发生变化

> ID：12735216
> 
> 赞同：1
> 
> 时间：2012-10-04T20:19:28.970
> 
> 标签：javascript, jquery, html, css, coding-style

我有一个`div`元素，当用户将鼠标悬停在`div`. 通过 Javascript 可以使用`mouseover`和`mouseout`事件执行此操作，但我想使用`CSS`.

那么如何使用 CSS 来实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:39:31.567

您可以使用 CSS :after 选择器来实现此效果。

```
#myDIV:hover:after
{
    content: '';
    display: block;
    position: absolute;
} 
```

从那里您可以将其设置为以图像为背景的常规元素，或根据自己的喜好编辑内容字段。当您将鼠标悬停在#myDIV 上时，这将插入一个伪元素。如果您需要对旧版浏览器的支持，您可以考虑使用您的 javascript 代码作为后备，并使用[modernizr](http://modernizr.com/)来检测浏览器功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:25:17.547

您可以使用[兄弟选择器](http://reference.sitepoint.com/css/combinators)来执行此操作，例如`+`或`~`：http: [//jsbin.com/uvepiq/1/edit](http://jsbin.com/uvepiq/1/edit)

它们将允许您`:hover`检查一个元素并将样式应用于以下同级元素。所以图像的正常样式将被隐藏`display: none`，然后当它的前一个兄弟悬停时，您可以将其设置为`display: block`或其他样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:46:29.203

你可以用 CSS 做到这一点：

```
<div class="outer">
    Texty Texterson...
    <div><img src="http://codinghorror.typepad.com/.a/6a0120a85dcdae970b0128776ff992970c-pi" /></div>
</div> 
```

CSS：

```
.outer div{
    display: none;
}

.outer:hover div{
    display: block;
} 
```

但我会说用 jQuery/javascript 做这个可以让你做一些很好的效果，比如淡入淡出等：

```
$(document).ready(function () {
$('.outer').hover(
    function () { 
        $(this).find('div').fadeIn();
    }, 
    function () { 
        $(this).find('div').fadeOut();
    });
}); 
```

# zend-framework - 将所有模块流量路由到 Zend 框架中的默认模块

> ID：12735217
> 
> 赞同：0
> 
> 时间：2012-10-04T20:19:31.453
> 
> 标签：zend-framework, module, routing

我期待转发我的所有请求：

.com/m/

至

.com/

我想我可以尝试在模块的引导程序中执行此操作，但尚未设置前端控制器。我不断看到提到前端控制器插件，但我将如何为这个模块设置它？

抱歉这些愚蠢的问题，我仍在努力掌握 Zend 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:56:47.247

Here is a controller plugin that routes all traffic to a specific module to the default module. I give 2 ways to route the traffic, either by forwarding the request (url stays the same but executes default module), or by then redirecting the browser to the default module.

Note, this is untested but should work. Let me know if you have questions or problems with it.

```
<?php

class Application_Plugin_ModuleRedirector extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        $module     = $request->getModuleName();
        $controller = $request->getControllerName();
        $action     = $request->getActionName();

        // don't execute plugin if not in the module "m"
        if ($module != 'm') {
            return ;
        }

        // foward to default module with same controller and action
        $request->setModuleName('default')
                ->setControllerName($controller)
                ->setActionName($action);

        // OR remove the above and use this for a hard redirect
        $urlHelper  = new Zend_View_Helper_Url();
        $url        = $urlHelper->url(array(
                                       'module' => 'default',
                                       'controller' => $controller,
                                       'action'     => $action));

        $redirector = Zend_Controller_Action_HelperBroker::
                      getStaticHelper('redirector');

        $redirector->gotoUrl($url);
    }
} 
```

To activate it, register the plugin with the Front Controller:

```
Zend_Controller_Front::getInstance()->registerPlugin(new Application_Plugin_ModuleRedirector()); 
```

# javascript - 带有raphael js的弯曲矩形

> ID：12735219
> 
> 赞同：1
> 
> 时间：2012-10-04T20:19:39.743
> 
> 标签：javascript, jquery, html, svg, raphael

想知道如何用 raphael 绘制一个弯曲的 150width x 4 hight 矩形形状并使用 raphael 与一组组合，我有这个轮廓，基本上需要在它上面画一个漂亮的曲线微笑，但不知道如何不使用raphael.path("")，我创建了一个[http://jsfiddle.net/creativestudio/K3B3r/2/](http://jsfiddle.net/creativestudio/K3B3r/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:46:20.980

我曾与 Raphael 合作过，必须按照您的要求制作独特的形状。不幸的是，如果它不是内置的形状原语，您将不得不使用 raphael.path()。

创建这些路径可能有点像噩梦，但为了帮助您，我建议您使用 svg 编辑器为您创建路径字符串。我会使用 Adob​​e Illustrator，绘制我的形状，将其保存为 svg 文件，然后在文本编辑器中打开该 svg 文件并拉出路径字符串（它是路径标签的“d”属性）。您可能必须使用以“m”或“M”开头的第一个坐标（小写 m 是相对起点，我相信大写是绝对的）并调整形状在 svg 上下文中的开始位置图片。这是一个小径和错误。

如果您没有 Adob​​e Illustrator，您可以使用像 Inkscape 这样的免费程序，甚至可以使用像这样的在线 svg 编辑器： http: [//svg-edit.googlecode.com/svn/trunk/editor/svg-editor.html](http://svg-edit.googlecode.com/svn/trunk/editor/svg-editor.html)（选择左上角的“编辑源”按钮抓取路径）

另外，我会在这里查看 svg 路径元素的规范：http: [//www.w3.org/TR/SVG/paths.html#PathElement](http://www.w3.org/TR/SVG/paths.html#PathElement)

抱歉，这不是最简单的方法，但确实是实现“微笑”形状的唯一方法（除非您有创意并且将第 2 层圆圈叠放在一起，但 1 个圆圈必须淡入背景 - 在您的情况下是一个渐变，很难做到）

# actionscript-3 - 如何使动画模拟时钟在相同的初始时间启动时的运行速度是另一个时钟的两倍

> ID：12735220
> 
> 赞同：-1
> 
> 时间：2012-10-04T20:19:38.583
> 
> 标签：actionscript-3, flash, flash-cs6

一个人如何启动两个显示相同初始时间的动画模拟时钟，然后让一个比另一个快两倍，使一秒变成半秒，等等，以便它超越“实时”时钟？诀窍是他们都需要开始显示当前时间。

我知道这可能很简单，但是每次我向时钟 2 的变量添加一个乘数时，它都会在不正确的时间开始并跳过滴答声。

这是我用作起点的 ActionScript（两个时钟相同）：

```
var now:Date;
var ct:Timer = new Timer(1);
ct.addEventListener(TimerEvent.TIMER, onTick);
ct.start();

function onTick(event:TimerEvent):void {
now = new Date();
var s:uint = now.getSeconds();
var m:uint = now.getMinutes();
var h:uint = now.getHours();
/*CLOCK ONE*/
one_second_hand_mc.rotation = 180 + (s * 6);
one_minute_hand_mc.rotation = 180 + (m * 6);
one_hour_hand_mc.rotation = 180 + (h * 30) + (m / 2);
/*CLOCK TWO*/
two_second_hand_mc.rotation = 180 + (s * 6);
two_minute_hand_mc.rotation = 180 + (m * 6);
two_hour_hand_mc.rotation = 180 + (h * 30) + (m / 2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:32:09.413

1.  将计时器延迟设置为小于 20 毫秒是一种不好的做法：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html#delay](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html#delay)

2.  尝试这样的事情（为简单起见，我只显示几秒钟）：

> 现在变：日期；
> var ct:Timer = new Timer(500);
> ct.addEventListener(TimerEvent.TIMER, onTick);
> 
> 现在 = 新日期（）；
> var s:uint = 180 + 6 * now.getSeconds();
> / *CLOCK ONE* /
> one_second_hand_mc.rotation = s;
> /*时钟二*/
> two_second_hand_mc.rotation = s;
> 
> ct.start();
> 
> var secondStep:Number = 6; // 360 / 60 (钟面上的分度)
> var minutStep:Number = 0.1; // 6 / 60（以分钟为单位的秒数）
> var hourStep:Number = 1/ 600; // 6 / 3600（以小时为单位的秒数）
> 
> 函数onTick（事件：TimerEvent）：无效{
> 
> / *CLOCK ONE* /
> if (!(ct.currentCount % 2)){
> one_second_hand_mc.rotation += secondStep;
> one_minute_hand_mc.rotation += minuteStep;
> one_hour_hand_mc.rotation += hourStep;
> }
> 
> /*时钟二*/
> two_second_hand_mc.rotation += secondStep;
> two_minute_hand_mc.rotation += minuteStep;
> two_hour_hand_mc.rotation += hourStep;
> }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:12:55.253

这是另一种方法。这个想法是将当前开始时间存储一次。然后，每次您想更新时钟 (onTick) 时，您检查自开始时间以来已经过去了多少时间，并创建一个新的日期对象，该对象表示开始时间 + 所经过的时间*，用一个因子缩放*。如果因子大于 1，则时钟比实时移动得更快，如果它更低，则移动得更慢。

如果你经常运行 onTick，你会得到一个流畅的动画，但你可以每秒运行一次或任何你想要的间隔。

```
// store current start time in milliseconds
var startTime : Number = new Date().getTime();

// the delay in the Timer doesn't affect the time
// displayed by the clocks, but only determines
// how often the clocks should be updated (redrawn)
var ct:Timer = new Timer(50);
ct.addEventListener(TimerEvent.TIMER, onTick);
ct.start();

function onTick(event:TimerEvent):void {
    // first clock should run at normal speed so we send in 1 as scale factor
    var timeDataOne : Object = calculateTime(1);
    // second clock at double speed (send in 0.5 to run at half speed)
    var timeDataTwo : Object = calculateTime(2);

    one_second_hand_mc.rotation = 180 + (timeDataOne.s * 6);
    one_minute_hand_mc.rotation = 180 + (timeDataOne.m * 6);
    one_hour_hand_mc.rotation = 180 + (timeDataOne.h/12) * 360;

    two_second_hand_mc.rotation = 180 + (timeDataTwo.s * 6);
    two_minute_hand_mc.rotation = 180 + (timeDataTwo.m * 6);
    two_hour_hand_mc.rotation = 180 + (timeDataTwo.h/12) * 360;
}

function calculateTime(clockSpeed : Number = 1):Object {
    // current time in milliseconds
    var nowTime : Number = new Date().getTime();

    // how many milliseconds have passed from the start time
    var timePassed : Number = nowTime - startTime;

    // create a new date object which should hold the time to display
    var displayTime : Date = new Date();

    // here we set the date object, which is based on the start time
    // plus the time passed multiplied with a scale factor clockSpeed.
    // When clockSpeed is one, displayTime will match the current time.
    displayTime.setTime(startTime + timePassed * clockSpeed);

    // calculate seconds, minutes and hours (and since the clock is analog
    // we use Number so we don't get discreet steps for the clock hands)
    var s : Number = displayTime.getSeconds() + (displayTime.getMilliseconds()/1000);
    var m : Number = displayTime.getMinutes() + s / 60;
    var h : Number = (displayTime.getHours() % 12) + m / 60;

    return { s: s, m: m, h: h };
} 
```

# opengl - 统一缓冲区，glGetActiveUniformBlockiv 报告大小

> ID：12735221
> 
> 赞同：3
> 
> 时间：2012-10-04T20:19:41.913
> 
> 标签：opengl, glsl

我看到一个问题，我得到错误大小的 GLSL 统一块。

这是着色器中的块：

```
uniform MaterialInfo {
    vec3 Ka;
    vec3 Ks;    
    vec3 Kd;
}; 
```

然后使用以下代码准备我的统一缓冲区对象：

```
blockIndex = glGetUniformBlockIndex(program, "MaterialInfo");
 if (blockIndex == -1) {
   fprintf(stderr, "Could not bind uniform block\n");
}

printf("Found blockindex materialinfo: %d\n", blockIndex);

 glGetActiveUniformBlockiv(program, blockIndex, GL_UNIFORM_BLOCK_DATA_SIZE, &blockSize);
 blockBuffer = (GLubyte *) malloc(blockSize);
 cout << "GLSL blocksize: " << blockSize << endl;
 cout << "sizeof glm::vec3 type: " << sizeof(mesh->Ka) << endl;
 cout << "sizeof 3 x glm::vec3 type: " << 3 * sizeof(mesh->Ka) << endl; 
```

报告如下：

```
GLSL blocksize: 48
sizeof glm::vec3 type: 12
sizeof 3 x glm::vec3 type: 36 
```

总之，我期望 GLSL 块大小为 36，而不是 48。GLSL 中的 vec3 应该像我的 glm::vec3 类型一样是浮点数。

另请注意，我使用的是 HD4000 测试版驱动程序：OpenGL 4.0.0 Build 9.17.10.2792。我没有机会在另一台计算机上进行测试。这是我误会了什么吗？

回复后跟进：

所以在这种情况下，提交我的 glm::vec3 浮点数的正确方法如下？

```
glGetUniformIndices(program, 3, namesMaterial, indices);
glGetActiveUniformsiv(program, 3, indices, GL_UNIFORM_OFFSET, offset);

memcpy(blockBuffer + offset[0], glm::value_ptr(mesh->Ka), 4 * sizeof(GLfloat));
memcpy(blockBuffer + offset[1], glm::value_ptr(mesh->Ks), 4 * sizeof(GLfloat));
memcpy(blockBuffer + offset[2], glm::value_ptr(mesh->Kd), 4 * sizeof(GLfloat)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:48:36.563

许多 GPU 将每个制服填充为 vec4 的大小：

请参阅 OpenGL wiki 中的此[实现说明](http://www.opengl.org/wiki_132/index.php?title=GLSL_Uniform&oldid=3601#Implementation_limits)（重点是我的）：

> 实现说明：OpenGL 实现允许出于实现相关的原因拒绝着色器。因此，根据您的估算，您可以拥有更少的活动统一组件，并且由于统一限制仍然无法链接。这通常发生在完全是矢量硬件的硬件上。Pre GeForce 8xxx 硬件，**所有 ATi 硬件都这样做**。在这种情况下，您应该假设每个单独的制服占用 4 个组件，就像在 D3D 中一样。这意味着**“统一浮点”是 4 个组件**，mat2x4 是 16 个组件（每行是 4 个组件），但 mat4x2 是 8 个组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T20:52:59.490

> 总之，我期望 GLSL 块大小为 36，而不是 48。GLSL 中的 vec3 应该像我的 glm::vec3 类型一样是浮点数。

为什么？OpenGL 规范中没有任何内容可以保证块大小。

或者至少，没有统一块*的*定义。

在不提供[适当的内存布局限定符](http://www.opengl.org/wiki/GLSL_Interface_Block#Memory_layout)的`shared`情况下，默认使用。这允许实现在元素之间放置它感觉舒适的任何填充。所以你不能只假设 3 `vec3`s 会占用 12 个连续`float`的 s 大小。每个`vec3`将是 3 个连续`float`的 s，但不能保证不会有填充。

如果您想要统一块的固定、已知和*一致*的布局，那么您需要使用`std140`布局。否则，您将得到实现所提供的东西。OpenGL 规范详细说明了`std140`元素布局的规则。

当然，使用`std140`布局，这个块的大小*也会*是 48，因为它会将所有`vec3`元素填充到`vec4`s。

* * *

> 所以在这种情况下，提交我的 glm::vec3 浮点数的正确方法如下？

这是正确的，假设：

1.  `memoryBlock`是映射的缓冲区对象指针或您上传的东西`glBufferSubData`
2.  您正在将其上传到缓冲区的前面或适当的偏移量之一（glBindBufferRange 的统一块偏移量必须与 对齐`GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT`）。
3.  `mesh->Ka`它的同类实际上做了4次花车。否则，您将从未分配的内存中复制。

再次，我*敦促*您停止查询这些内容并使用`std140`布局。当你这样做时，你不必查询偏移量或任何东西；您可以设计与所有硬件上的 GLSL 定义完美布局兼容的结构。

# ruby-on-rails - rails slim缩进语法错误

> ID：12735222
> 
> 赞同：1
> 
> 时间：2012-10-04T20:19:48.700
> 
> 标签：ruby-on-rails, slim-lang

我正在尝试设计我的网站 EULA 页面内容，但我不断收到此错误：

> 您是否尝试将子标签嵌套在包含文本的标签中？使用 | 对于文本块！

似乎我所有的缩进都很好，但这不起作用：

```
v#page_content
  .container
    = render 'leftbar'
    .content
      = render 'actions'
      .maincol
        h2 Corp End User License Agreement
        h7 Last Revised: September 20, 2012
        ol
          li
            h2
              u Introduction
            | Welcome to the Corp platform at
            a href="http://www.Corp.com"  www.Corp.com
            |  owned and operated by Social Paragraph Ltd. and/or its affiliates ("
            b Company", "Us" or "We"
            | ). Corp. and its affiliates  invite you to use its online crowd funding academic translation platform, whereCorp students who use such platform (
            b "Users" or "You"
            | ) can share the costs of translation of scientific journals, manuscripts, and research books (
            b "Work(s)"
            | ), and professional academic translators (
            b "Professional Translators"
            | ) and, in the future, also advanced students in the field of the Work (
            b "Students Translators"
            | ) (Student Translators and Professional Translators shall be collectively referred to hereunder as
            b  "Translators"
            | ) can offer their services to Users (
            b "Platform"
            | ). Users can make two types of financial transactions on the Platform: Crowdshare and Individual Transactions (as such terms are defined below).
          li
            h2
              u Acceptance of Terms
            u IMPORTANT:
            |  BY CLICKING THE "I ACCEPT" BUTTON AND/OR USING THE PLATFORM YOU AGREE THAT YOU HAVE READ AND UNDERSTOOD THE TERMS SET FORTH IN THIS END USER LICENSE AGREEMENT,  AS MAY BE AMENDED FROM TIME TO TIME (THE "EULA"). IF YOU DO NOT AGREE TO ANY OF THE TERMS AND CONDITIONS OF THIS EULA – DO NOT CLICK ON THE "I ACCEPT" BUTTON AND DO NOT USE THE PLATFORM YOUR CONTINUED USE OF THE PLATFORM SHALL BE DEEMED AS ACCEPTANCE TO THE AMENDED OR UPDATED TERMS.  HENCE, WE URGE YOU TO CHECK FREQUENTLY TO SEE IF WE HAVE UPDATED THESE TERMS. THE MOST CURRENT VERSION OF THE TERMS IS AVAILABLE AT
            a href="http://www.Corp.com/eula"  www.univeersiteam.com/eula01
            b
              u Use of the Platform
            ol
              li
                | Upon entering the Platform, Users may search for a certain Work translated to the language of their preference (
                b "Translated Work"
                | ) by using the search bar [
                a href="http://www.uCorp.com"  Corp.com
                | ]. Such search may derive the following results, depending on whether with respect to such Translated Work, a project for sharing the costs of the translation between Users (
                b "Crowdfunded Project"
                | ) has already been initiated:

      .rightcol
        aside.aside
          == image_tag 'man.jpg'
          p High quality translation guarantee while protecting intellectual property and authors rights. 
```

使用以下宝石：

```
sass (3.1.20)

sass-rails (3.2.5)

sax-machine (0.0.20)

selenium-webdriver (2.25.0)

shoulda (3.1.1)

shoulda-context (1.0.0)

shoulda-matchers (1.2.0)

sinatra (1.3.2)

skinny (0.2.1)

slim (1.2.2)

slim-rails (1.0.3) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:37:43.993

你的模板看起来不错，对我有用。部分呢，你也检查过它们的语法吗？

# python - python列表理解集max len

> ID：12735224
> 
> 赞同：3
> 
> 时间：2012-10-04T20:19:52.397
> 
> 标签：python, list-comprehension

是否可以在将 n 个项目添加到新列表时停止列表理解？

例如，

```
[x for x in xrange(20) if len(<this>) < 10 ] 
```

确认：我想将结果列表的长度限制为 10。“”是当前列表的伪代码。我使用python 2.7

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T20:22:04.987

不，但是[`itertools.islice()`](http://docs.python.org/library/itertools.html#itertools.islice)可以给你一个只产生给定数量的项目的生成器。

```
>>> list(itertools.islice('foobar', 3))
['f', 'o', 'o'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:33:48.497

这可以做到，但这取决于您使用的 Python 的实现，因为它取决于列表推导的实现。CPython 中“这个列表理解”的名称是“ `_[1]`”，因此例如您可以执行以下操作（自己尝试一下，它确实会起作用）：

```
[i for i in xrange(20) if len(locals().get("_[1]")) < 10] 
```

**您不太可能使用真实的生产代码来执行此操作。**这是荒谬的，如果有人使用任何其他实现，它可能会崩溃。相反，只需使用一个循环：

```
l = []
for i in xrange(20):
    l.append(i)
    if len(l) >= 10:
         break 
```

`locals().get("_[1]")`之所以有效，是因为 Python 需要在列表理解构造期间将当前列表存储在某个位置。" `_[1]`" 的选择有些武断，因为任何人都不太可能将其用作变量名。如果您碰巧构建了一个嵌套列表推导式，它们会将列表存储在更高递增的变量名称中，例如“ `_[2]`”和“ `_[3]`”等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T20:27:29.517

如果`xrange`是您使用的生成器，请执行

```
list(xrange(20))[:10] 
```

# algorithm - 一些关于通用散列的文本的符号

> ID：12735225
> 
> 赞同：0
> 
> 时间：2012-10-04T20:19:53.690
> 
> 标签：algorithm, hash

这是一些关于该主题的讲座的引述。我不明白这部分`h : {1,...,M} -> {0,...,m-1}`（符号）。有人可以解释一下这是什么意思吗？例如“从 M 哈希函数中选择的哈希函数 h，它返回 1 和 m-1 之间的值”？？

谢谢。

> 散列
> 
> 我们假设关于哈希表的所有基础知识都已在 61B 中涵盖。
> 
> 我们将做一个简化的假设，即我们想要散列的键已被编码为整数，并且这些整数在范围内`{1,...,M}`。我们还假设使用链表处理冲突。
> 
> 假设我们正在使用一个大小为 m 的表，我们选择了一个哈希函数 `h : {1,...,M} -> {0,...,m-1}`，并且在某个时刻，键`Y1,...,Yn`已插入数据结构中，并且我们想要查找、插入或删除该键X。这种操作的运行时间将是元素 Yi 的一个大哦，这样 `h(yi) = h(x)`。
> 
> ............
> 
> ............

资料来源：www.cs.berkeley.edu/~luca/cs170/notes/lecture9.pdf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:33:36.707

它说： h 是从输入集 {1,...,M} 到目标集 {0,...,m-1}
的函数，更具体地说，它没有说明函数是如何形成的。
它只是说它处理一定范围的输入和一些其他范围的输出，并且它存在。

编辑：这是一个函数，而不是一个关系。

# html - 对齐 到页面中心

> ID：12735226
> 
> 赞同：0
> 
> 时间：2012-10-04T20:19:59.410
> 
> 标签：html

任何将 对齐到页面中心的方法。尝试对齐中心，但我猜错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:25:34.767

设置一个宽度，然后设置`margin: 0 auto;`

**[jsFiddle 示例](http://jsfiddle.net/j08691/ktdvx/)**

# c# - 如何快速找到我的 EDMX 模型中的特定表？

> ID：12735230
> 
> 赞同：104
> 
> 时间：2012-10-04T20:20:13.793
> 
> 标签：c#, vb.net, entity-framework-4, edmx, edmx-designer

我想知道是否有人知道在 EDMX 模型中查找表的更快方法，而不仅仅是滚动图表并查找内容。我们的数据库中有大约 50 个表，当我在寻找一个特定的表时，查看 VS 把东西放在哪里只是一件苦差事。

我正在使用 VS 2010 来解决这个问题。

先感谢您。

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-10-04T20:24:30.367

**单击设计器的空白区域：**

![在此处输入图像描述](../Images/2370f94c849be98d79edfa68c30090cc.png)

**转到属性选项卡：**

![在此处输入图像描述](../Images/fd8ab48571d431c1c397935dfd958a9f.png)

**在顶部的下拉框中，选择您的表格。然后，您应该会在设计器中看到它突出显示。**

![在此处输入图像描述](../Images/7fa08b921ce2cfb99da489266a532802.png)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-10-04T20:25:23.793

在主菜单中选择视图 > 其他窗口 > 实体数据模型浏览器（它通常在与解决方案资源管理器相同的面板中打开）。

您可以导航树列表或在文本框中键入表格。

![实体数据模型浏览器](../Images/e31d7a048b6b77324ca0294421838f50.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-04T20:23:30.487

如果您转到`Properties`Visual Studio 2010 中的窗口，您将在 EDMX 中看到按字母顺序排序的**实体类型**列表（例如您的表） - 选择您感兴趣的那个，并且视觉设计师应该重新调整自己以实际显示该表在视图中：

![在此处输入图像描述](../Images/6bb95c2245074b338f4c165daac99c4e.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-06-26T13:52:45.350

在“模型浏览器”中，您可以右键单击表格并在上下文菜单中选择“在图表中显示”

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-07-03T07:51:50.990

1.  右键单击 Designer 视图的空白处
2.  选择“模型浏览器” [![在此处输入图像描述](../Images/0eb974908615159a8da5a10b2e91b393.png)](https://i.stack.imgur.com/we4GE.png)

3）选择表格菜单->它将在设计器中被选中：

[![在此处输入图像描述](../Images/ecf1f719a9a0306b8a7c3a77d8751c49.png)](https://i.stack.imgur.com/Hyj4r.png)

# c# - log4net 没有在 EPiServer 中记录自定义日志

> ID：12735232
> 
> 赞同：1
> 
> 时间：2012-10-04T20:20:25.273
> 
> 标签：c#, log4net, episerver

我在 EPiServer 中遇到 log4net 问题。它正在记录 EPiServer 的东西，NHibernate 的东西，但不是我的自定义日志。试图显式配置记录器以记录我的命名空间中的所有内容：

```
<logger name="My.Website.Business">
    <level value="All" />
</logger> 
```

我在我的自定义类中定义记录器，如下所示：

```
ILog log = LogManager.GetLogger(typeof(MyClass)); 
```

并这样称呼它：

```
log.Error("Some error"); 
```

我还启用了 log4net 日志记录，以查看启动时发生的情况，但没有错误或奇怪的行为。它甚至创建在配置中定义的记录器。我还尝试为我的记录器定义其他附加程序，但它只是创建空文件并且不记录任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:09:09.773

Episerver 日志中有一个古老的错误：如果您在 global.asax 中声明了一个静态（类级别）log4net 日志对象，那么您的自定义日志将不起作用，只有 episerver 内部日志。

如果您需要在 global.asax 中记录内容，请在方法中声明记录器。在其他类中，您可以像往常一样静态声明它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:44:31.067

log4net 不起作用的原因是 log4net 的不同版本。我的应用程序引用了 log4net 1.2.11 (2.0.0)，但 EPiServer 使用 1.2.10。我们正在使用 NuGet 来安装/更新软件包，并且有人将 log4net 更新到了较新的版本。因此请注意对 EPiServer 和应用程序使用相同的 log4net 版本。

# css - 媒体查询未按预期工作

> ID：12735236
> 
> 赞同：1
> 
> 时间：2012-10-04T20:20:33.620
> 
> 标签：css, media-queries

为什么这段代码会使两个 div 都出现在横向 iPad 上？

```
/* CSS */

div{
    display:none;   
}
@media screen and (min-width: 48em) {
  /* IPAD PORTRAIT */
  body {
      /* DARK BLUE */
   background-color:#006;
  }
    div{
    display:none;  
  }
    #ipad-portrait{
    display:block;  
  }
}

@media screen and (min-width: 64em) {
  /* IPAD LANDSCAPE */
  body{
      /*bright green*/
    background-color:#3f0;  
  }

  /* an attempt to hide all divs before displaying 
     the one that says iPad landscape */
  div{
    display:none;  
  }

  #ipad-landscape{
    display:block; 
  }
}

<!-- HTML -->
 <div id="ipad-landscape">
 ipad landscape
 </div>

  <div id="ipad-portrait">
 ipad portrait
 </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:26:42.387

您的最小宽度重叠。最小宽度为 64em 的设备也最小宽度为 48em。你可能想要的是这样的：

```
@media screen and (min-width: 48em) and (max-width: 63.999em) {
/* stuff */
} 
```

# regex - 查找字符串之间的指导

> ID：12735240
> 
> 赞同：2
> 
> 时间：2012-10-04T20:20:47.567
> 
> 标签：regex, regex-lookarounds

## 问题：

尝试获取所有 guid = guid 的匹配项。我希望收到一组匹配项，其中一个匹配项如下所示：

```
{9659BAE5-632F-4195-BD5D-414C1F2C1066} = {6E298F2A-129A-4491-B053-F12D67561572} 
```

我正在尝试匹配`GlobalSection(NestedProjects) = preSolution`和之间的所有 guid = guid `EndGlobalSection`。文件中还有其他地方 guid = guid 存在。

这是一个数据片段：

```
 Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Client", "Applications\", "{297BE1A3-A6A3-4835-BB87-63B4B4E2AE0D}"
        ProjectSection(ProjectDependencies) = postProject
            {A459406A-94FF-4CA9-8183-C7472419CC7D} = {A459406A-94FF-4CA9-8183-C7472419CC7D}
        EndProjectSection
    EndProject

    GlobalSection(NestedProjects) = preSolution
        {3D84A2B1-536D-4953-B331-D86E421905E7} = {AF46FD2E-710D-49CD-A203-CB0F8B7EF415}
        {02CB05EC-6902-417E-AD50-B3910B245B22} = {2F54A6F1-5D32-4673-8AEE-B845CC622D64}
        {DE303EF0-E3B1-4BA9-8CB3-544D37D29576} = {2F54A6F1-5D32-4673-8AEE-B845CC622D64}
        {5A095236-0EE1-4480-B7A6-833ECCFE4257} = {AF070137-227F-42F7-9487-00CB26C46E04}
        {6CCA189C-0D45-4E80-8486-38AB3E625E69} = {AF070137-227F-42F7-9487-00CB26C46E04}
        {EAE3152A-C003-4E39-BFB7-B4F7CACE1606} = {AF070137-227F-42F7-9487-00CB26C46E04}
        {9659BAE5-632F-4195-BD5D-414C1F2C1066} = {6E298F2A-129A-4491-B053-F12D67561572}
    EndGlobalSection
EndGlobal 
```

## 我试过的：

这是我用来匹配 guid = guid 的内容

```
{[A-Za-z0-9]{8}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{12}} = {[A-Za-z0-9]{8}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{12}} 
```

这很好用，只是它显然不区分比赛的位置。所以我从文件的其他部分收到了其他匹配项。我一直在尝试像这样使用正面的外观（有很多变化）：

```
(?<=GlobalSection\(NestedProjects\) = preSolution(\r\n|.)+?) 
```

我是在滥用向后看还是其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:26:29.730

我尝试了以下正则表达式并使用您的示例得到了正确的结果。

```
(?<= GlobalSection\(NestedProjects\) = preSolution(\r\n|.)+?){[A-Za-z0-9]{8}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{12}} = {[A-Za-z0-9]{8}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{12}} 
```

您可能需要使用 RegexOptions.Multiline 作为正则表达式中的一个选项，因为它是 C#（如果您还没有）。

**编辑**

我用你的数据片段写了一个小测试程序。我将它加倍以确保它在仅返回两个部分之间和两个部分`GlobalSection(NestedProjects) = preSolution`
`matches`的 GUID后不仅与第一组匹配。`GlobalSection(NestedProjects) = preSolution``EndGlobalSection`

如我所料，这条线`{A459406A-94FF-4CA9-8183-C7472419CC7D} = {A459406A-94FF-4CA9-8183-C7472419CC7D}`不在匹配的结果中。我希望这段代码中的某些内容可以帮助您。

```
 static void Main(string[] args)
    {
        string input = System.IO.File.ReadAllText(@"c:\test\directory\test.txt");

        string pattern =
            @"(?<=GlobalSection\(NestedProjects\) = preSolution(\r\n|.)+?){[A-Za-z0-9]{8}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{12}} = {[A-Za-z0-9]{8}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{12}}";
        Regex re = new Regex(pattern, RegexOptions.Multiline);

        MatchCollection matches = re.Matches(input);

        foreach (var match in matches)
        {
            Console.Write(match);
        }

    } 
```

# java - 由于某种原因，我的客户对象为空。

> ID：12735243
> 
> 赞同：0
> 
> 时间：2012-10-04T20:21:03.923
> 
> 标签：java, foreach, abstract-class

我有一个 foreach 循环遍历每个首选客户并总结他们的余额以创建他们的总资产。但是，每次查看客户对象时，都会将其评估为 null。PreferredCustomer 是抽象类 Customer 的子类。我假设我没有正确执行 foreach 循环，但我不确定我做错了什么。

```
 public static void getBalance() {
    for(Customer customer: preferredCustomers){
        ArrayList<Account> al = customer.getAccountList();
        for(Account account: al){
            totalAssets+=account.getBalance();
            //balance = account.getbalance();
        }
        customer.setBalance(totalAssets);
    }
} 
```

此外，Arraylist AccountList 是每个客户的帐户对象列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:14:30.193

将来，如果您的代码抛出 NPE，您应该在帖子中包含异常，并带有指向与您的示例代码对应的行的指针：

*   如果您在`for(Customer`循环中抛出 NPE，那么您的`preferredCustomers`字段是`null`.
*   如果它`customer.getAccountList()`在线上抛出 NPE，则集合中的元素之一`preferredCustomers`是`null`.
*   `for(Account account`如果它在循环中引发 NPE，那么您的其中一个`preferredCustomers`有一个帐户列表，即`null`.
*   如果它`totalAssets+=account.getBalance();`在线上抛出 NPE，则列表中的一个帐户是`null`。也可能是 balance 字段是一个`null` `Long`对象。

正如@ColinD 提到的，建议学习[如何在 Eclipse](http://www.vogella.com/articles/EclipseDebugging/article.html)中使用调试器。

# c# - FindControl 在 GridView 中找不到正确的控件

> ID：12735248
> 
> 赞同：0
> 
> 时间：2012-10-04T20:21:26.737
> 
> 标签：c#, asp.net, .net, gridview

我对 GridView 中的 GridView 和 HiddenField 有疑问。我试图根据 HiddenField 的值提取一些数据，该值基本上是每条记录的 row_id，但出于某种原因，无论我在 GridView 中选择哪一个，我都会不断获得相同的数据。下面的代码是我正在使用的在 GridView 中查找 HiddenField 的代码。

任何帮助将不胜感激。

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    foreach (GridViewRow item in GridView1.Rows)
    {
        if (item.RowType == DataControlRowType.DataRow)
        {
            rowid = (HiddenField)(item.Cells[0].FindControl("po_id_hf"));
        }
    }

    GridView2.DataSource = View_SP.v_asn_detail_by_asn_number(Int32.Parse(rowid.Value));
    GridView2.DataBind();

    step2.Visible = false;
    step3.Visible = true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:43:14.503

如何使用：

```
GridView1.Rows[e.RowIndex] 
```

获取当前更新行？

编辑：您的代码将始终返回最后一个 GridViewRows，因为它正在遍历整个 GridViewRows 集合，因此最后 rowid 将在 gridview 中具有最后一个行 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:49:09.230

我想多了，下面是解决方案：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
     string row_id = (((HiddenField)(GridView1.Rows[e.RowIndex].FindControl("po_id_hf"))).Value);

    GridView2.DataSource = View_SP.v_asn_detail_by_asn_number(Int32.Parse(row_id));
    GridView2.DataBind();

    step2.Visible = false;
    step3.Visible = true;
} 
```

感谢你们。

# ios - 我可以使用安装了 mac os 的 vmware 开发 iphone 应用程序吗？

> ID：12735251
> 
> 赞同：1
> 
> 时间：2012-10-04T20:21:51.120
> 
> 标签：ios, macos, windows-7, virtual-machine

我的操作系统是 windows 7，我想在不购买 MAC 的情况下开发 IOS 应用程序。我可以在虚拟机上安装 MAC OS 进行开发吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:25:42.753

是的，有可能。在购买我的第一台 Mac 之前，我这样做了 6 个月。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:28:05.700

Mac OS X 可以安装在 VM 中，尽管由于 OS X 的许可证，它只被任何大玩家以 Mac-on-Mac 方式正式支持。有一些方法可以在非 OS X 虚拟机上安装 OS X机器，但它们比正常情况要复杂得多。

Lifehacker 有[VirtualBox](http://lifehacker.com/5583650/run-mac-os-x-in-virtualbox-on-windows)的教程，以及[VMware的 iHackintosh](http://www.ihackintosh.com/2009/12/install-snow-leopard-in-vmware-7-windows-edition/). 我自己没有尝试过这些，所以我不确定从个人经验来看它们的效果如何（我看到很多账户都说效果很好）。我只在 Parallels 中运行 OS X（在 OS X 之上），它在我的 MacBook Air 上运行缓慢，但这很可能主要是由于没有足够的内存来同时运行两个操作系统（4GB 拆分均匀）。此外，我不相信任何管理程序都支持加速图形，因此这也会影响性能。但是，如果您有一个相当不错的系统，它应该能够很好地处理 Xcode。Xcode 不需要任何特殊的硬件支持来开发 iOS 应用程序，因此只要您可以让 OS X 正常运行，它就会运行。要部署到 iOS 设备，您需要设置 USB 转发（取决于 VM 软件），以便 Xcode 可以看到它。

您仍然需要 OS X 的副本，AFAIK（不过是 IANA！），您不应该安装在非 Mac 计算机上（作为主机或来宾操作系统！）。

# windows - windows server 2008 上 windows 消息队列的最大容量

> ID：12735252
> 
> 赞同：0
> 
> 时间：2012-10-04T20:21:57.503
> 
> 标签：windows, message-queue

我有一个生产环境，可以处理多个数据源的数据流。目前，我实时解析数据，数据在 Windows 消息队列中排队。我在某处读到任何给定队列中的最大数量为 10000。我担心的是，随着数据量的增加 x 100，我将增加流的数量 x 10。当然，我的处理需要能够扩展，我我不确定当前的设置是否可行。

我目前的机器和开发环境：

Visual Studio 2010 Sql server 2008 R2 Windows 2008 RS 标准 Dell PowerEdge R-610 双四核 Xeon 处理器 4x300GB HDD 2.5" Intel() Xeon(R) CPU E5649 @ 2.53 GHZ（双处理器） 32 GB RAM 64 位操作系统

如果每个队列的最大帖子数为 10000，我实际上可以拥有的最大队列数是多少？使用更多机器会更可行，还是可以修改这些机器以适应新涌入的数据？我目前将每条消息/帖子异步写入 txt 文件以存储一段时间，因此也需要考虑到这一点。

```
Imports System.Messaging

 ...
   Dim q As MessageQueue
    If MessageQueue.Exists(".\private$\TwitterQueue") Then
        q = New MessageQueue(".\private$\TwitterQueue")
    End If

     message = q.Peek(TimeSpan.FromSeconds(20.0)) 
```

这是 Windows 消息队列服务。将不得不阅读其他类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:44:06.410

10,000 条消息限制适用于窗口管理器消息队列。但你没有使用那些。您正在使用网络消息队列。因此，您“在某处阅读”的信息不适用于您的案例。

# objective-c - NSInvalidArgumentException 错误。不在 UIUserInterfaceIdiomPad 下运行

> ID：12735253
> 
> 赞同：0
> 
> 时间：2012-10-04T20:22:01.917
> 
> 标签：objective-c, ios, xcode, universal

虽然我明白为什么我收到错误

'', 原因：'-[UIPopoverController initWithContentViewController:] 未在 UIUserInterfaceIdiomPad 下运行时调用。'

纠正它变得有点棘手。我的弹出窗口只需要在 ipad 上而不是在 iphone 版本上。我省略了 iphone 的任何代码，但`if statement`仍然崩溃。. 假设我必须调用 iphone 上的视图以及它的通用应用程序，我只是调用了 nib 中的 nib `if iphone statement`，但这也不起作用。

```
 - (IBAction)popZs:(id)sender {  

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

    if ([popoverController isPopoverVisible]) {
        [popoverController dismissPopoverAnimated:YES];
    } else {

        [self->popoverController setPopoverContentSize: CGSizeMake(601, 571)];

        [popoverController presentPopoverFromRect:((UIButton *)sender).bounds
                                           inView:sender
                         permittedArrowDirections:UIPopoverArrowDirectionUp
                                         animated:YES];

    }

}
else {

    /////using iPhone/////not sure how to handle this spart
     zsTablePop *pop = [[zsTablePop alloc] init];
    pop.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [pop presentModalViewController:pop animated:YES];

} 
```

即使我正在使用，仍然会出现相同的错误`if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {`

流行音乐的创造

```
.m

#import "ICCircuitDetails.h"
#import "zsTablePop.h"  ///////////////pop over xib/////

 @interface ICCircuitDetails ()

{
zsTablePop *controller;
UIPopoverController *popoverController;
}

 ///////more code/////////////

 - (id)initWithCircuit:(Circuit *)circuit
{

 self = [super initWithCertificate:circuit.distributionBoard.certificate];
if (self) {
    self.circuit = circuit;
    [[NSBundle mainBundle] loadNibNamed:@"ICCircuitDetails" owner:self options:nil];
    self.view.contentSize = CGSizeMake(self.contentView.frame.size.width,    self.contentView.frame.size.height);

 ///////////other code here/////////////////

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) 

    controller = [[zsTablePop alloc] initWithNibName:@"zsTablePop" bundle:nil];
    popoverController = [[UIPopoverController alloc] initWithContentViewController:controller]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:33:23.263

您的错误消息说您尝试实例化弹出框。代码只是关于呈现它。您还需要处理实例化。

# c# - 使用 web.config 转换保护连接字符串的建议方法

> ID：12735259
> 
> 赞同：2
> 
> 时间：2012-10-04T20:22:28.680
> 
> 标签：c#, .net, web-config

我们有一种情况，我们的内部安全要求我们的开发人员不知道我们生产数据库的用户名和密码。

我们正在尝试使用 web.config 转换来减少部署过程中因手动编辑 web.config 文件而发生的人为错误的数量。理想情况下，我们希望 web.configs 完全自动化，无需人工干预。

据我了解，这需要开发人员（我们组织中唯一知道如何创建和修改 web.config 转换的人员）了解生产环境的连接字符串信息。

有没有一种方法可以让开发人员不知道生产连接字符串，但让他们单独负责维护 web.config 转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:46:49.617

这是我想出的解决方案，我正在向我的团队提出建议。

**问题：** 我们希望实施一个新标准，要求使用 web.config 转换来消除环境之间部署期间发生的人为配置错误。这要求负责创建 web.config 转换文件的人员了解每个环境的所有配置值，包括与其他环境的连接字符串的用户名和密码。基础架构团队制定了一项政策，即除了他们之外，没有人可以知道具有写入权限的数据库用户的用户名和密码。因此，我们有冲突。

**建议的解决方案：** web.config 中的任何配置部分都可以指向包含该部分配置的外部文件，而不是在 web.config 文件本身中明确定义它。
例如，而不是将连接字符串部分定义为：

```
<connectionStrings>
    <add name="conn_ExceptionManagement" connectionString="Data source=mydb;database=App_Error_Logging;uid=user;pwd=password" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我们可以这样定义它：

```
<connectionStrings configSource="myApp.ConnectionStrings.config"/> 
```

然后创建一个名为“myApp.ConnectionStrings.config”的文件，其内容如下：

```
<?xml version="1.0"?>
<connectionStrings>
    <add name="conn_ExceptionManagement" connectionString="Data source=mydb;database=App_Error_Logging;uid=user;pwd=password" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

所以……我们可以在 Web 服务器的根目录中创建一个名为“CONFIG”的文件夹，并在其中为每个应用程序放置一个名为“myAppName.ConnectionStrings.config”的文件。在该文件中，我们将用于应用程序的所有连接字符串放在该环境中。然后，在我们的 web.config 转换中，我们没有显式更新连接字符串，而是将连接字符串配置部分更改为指向 Web 服务器上的该文件。这样，基础架构团队是唯一真正看到这些环境的连接字符串的人，我们消除了他们在部署期间修改 web.config 中的连接字符串的需要。此外，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:32:24.027

考虑一下：

*   具有加密密码（例如使用 SHA-2）的数据库，其中包括一些“[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)”。密码通过明文“密钥”识别。

*   返回给定密钥的加密密码的 Web 服务。

*   解密密码（给定盐）并返回明文密码的标准库。

您的 Web 应用程序可以完整地存储连接字符串，但使用占位符作为密码。当准备好建立连接时，应用程序调用 web 服务，获取加密密码，解密密码（*编辑：解密密码，必须使用存储在 web 应用程序中的盐*），修改连接字符串，建立连接，然后忘记密码。

虽然不是一个完美的解决方案（如果您不能信任您的 IT 人员，那么为什么要为您工作？），但它确实使程序员不知道密码。作为一个额外的好处，您可以单独管理密码（例如，使它们过期），而无需更新 Web 配置中的连接字符串。

如果您真的想“全力以赴”，您可能也对[SecureString感兴趣。](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)
（这里有一篇很好的文章讨论了 SecureStrings 的使用，虽然考虑到您必须将 SecureString 转换为纯文本才能构建连接字符串，但这确实有点毫无意义：http: [//blogs.msdn.com/b/fpintos/存档/2009/06/12/how-to-properly-convert-securestring-to-string.aspx](http://blogs.msdn.com/b/fpintos/archive/2009/06/12/how-to-properly-convert-securestring-to-string.aspx)）

**编辑**
最终，最安全的选择是将数据库连接包装在 Web 服务中，然后使用您自己的自定义凭据系统（或 Active Directory 之类的系统）访问 Web 服务。Web 服务将单独负责查询数据库并且可以集中维护。使用它的网站（以及这些网站的程序员）将不知道数据库的详细信息。

这种方法有很多很多好处，包括完全重新构建数据库的能力（表/存储过程的更改只涉及 Web 服务），在服务器之间切换（从 SQL Server 转到 MySQL 而不会从消费网站），负载平衡，额外的安全层等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:27:38.860

是的，看看加密连接字符串： http: [//msdn.microsoft.com/en-us/library/ms254494 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms254494(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:32:00.097

使用一个类来加密和解密 webconfig 连接字符串。每次对您解密和使用的连接字符串执行获取...

您可以使用多种两种方式的加密提供程序来执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T20:59:35.363

自动更新 web.config 绝对是一种好方法，但我并没有真正看到为此目的使用 web.config 转换的价值。有可从脚本语言（例如 VBScript、PowerShell）调用的 XML API，这将同样简单且更灵活。

如果您在 web.config 中使用数据库凭据，我会考虑以下部分或全部。

*   如果您的数据库支持（例如 SQL Server），最好使用 Windows 身份验证连接到数据库。这使您免于管理数据库凭据的任务。

*   编写一个小实用程序，可以更新 web.config 中连接字符串中的密码。使用标准 XML API 很容易做到这一点。管理员可以在部署到生产服务器时使用它来更新密码。

*   [使用Protected Configuration](http://msdn.microsoft.com/en-us/library/53tyfkaw(v=vs.100).aspx)在生产服务器上加密 web.config 。通过直接在服务器上进行加密，您可以避免将加密密钥复制到其他任何地方。例如，如果是单个服务器，则使用 DPAPI；或 RSA，如果您需要在多个服务器（例如网络场）上使用 web.config。

    您的密码更新实用程序可以自动执行此操作。

# applescript - 根据文件名将文件移动到文件夹/子文件夹中

> ID：12735260
> 
> 赞同：0
> 
> 时间：2012-10-04T20:22:31.427
> 
> 标签：applescript

希望可以有人帮帮我，

首先，我的 AppleScript 技能几乎不存在。

我得到了一些用于归档目的的文件，格式如下，需要排序。格式首先是设备名称，然后是运行编号和样品编号，然后是一些文本。

示例文件：“UZLA 55879 [05x13] september cal run.cdf”（文件格式不同）需要移动到文件夹中：~/UZLA 55879 (LCMS)/Run 5/

*   设备名称是相当随机的，有时只是一个数字，有时是整个官方命名。
*   主文件夹在设备名称后的方括号中有一个辅助项，该辅助项不在要移动的文件名中。"[" 和 "(" 之前的字符串匹配，在主名称之后它是不同的。
*   子文件夹并不总是存在，当开始新的运行时，文件夹 /Run 6/ 例如可能不存在。他们对数字没有 0 填充
*   这些文件都到达同一个文件夹中，它们不应该是位于该文件夹中的其他文件。

为了解决这个问题，我们喜欢在主驱动器上的单个文件夹中创建一个别名（文件被移动到外部系统）以便直接访问，这很容易快速查找，但对于整个系统来说完全不方便（旧的别名是被其他脚本从中删除）。

谢谢。

* * *

好的，所以这是令人讨厌的关闭，外观，因为它只帮助我，而不是来自未来的随机人。对我来说获得帮助有点意思。这就是我们所处的位置，感谢 adayzdone：

```
set myFolder to (choose folder)
tell application "System Events" to set folderName to myFolder's name
set {TID, text item delimiters} to {text item delimiters, {"(", ")"}}
set myText to text item 2 of folderName
set text item delimiters to TID

set myFiles to every paragraph of (do shell script "find " & quoted form of (POSIX path of myFolder) & " \\! -name \".*\" -type f")
repeat with aFile in myFiles
    set aFile to aFile as text
    tell application "Finder" to set fileName to name of (POSIX file aFile as alias)
    set newPath to "~/" & quoted form of (do shell script "echo " & quoted form of fileName & " | sed -e 's/\\[0/\\[/' -e 's/\\([^\\[]*\\)\\[\\([0-9]*\\)x[0-9]*\\].*/\\1(" & myText & ")\\/Run \\2\\//'") as text
    do shell script "mkdir -p " & newPath & " ; mv " & quoted form of aFile & space & newPath
end repeat 
```

这会产生以下错误：错误“无法获取 \"testFolder\" 的文本项 2。” “testFolder”的文本项 2 中的数字 -1728

* * *

让我澄清一下：我在一个名为 /testFolder/ 的文件夹中有一堆文件（总是这样命名，所有文件都在这里输入）我想要的是根据文件名将文件移动到给定格式的文件夹和子文件夹中。

示例：文件：/UZLA 55879 [01x05] XXX.cdf

*   基本名称“UZLA 55879”，文件夹 /UZLA 55879 (LCMS)/ 存在于目的地。（LCMS）与移动无关，它只是文件夹名称上的额外垃圾，脚本应该检测到该文件夹​​存在（尽管 ()" 之间有什么垃圾并将其用作目标。如果没有具有该基础的文件夹名称存在它可能只是弹出一个错误或使整个脚本崩溃，这并不是真正的问题，因为很少创建新的基本名称并且无论如何都是手动命名的（而且是随机命名的）。
*   名称的第二部分是 [01x05] 的第一部分，“01”被检测到（从其填充零中删除）并移动到子文件夹 /Run 1/ （如果它是“[05x07] 进入 /Run 7/等文件名/扩展名的其余部分与移动无关。

* * *

当前问题：脚本现在尝试从起始文件夹中提取信息以选择目标文件夹，起始文件夹（未）命名为 /UZLA 55879 (LCMS)/ 它使用该“LCMS”来创建目标文件夹。（它不能因为起始文件夹是 1）没有命名和 2））每个目标文件夹在这些括号之间都有一个不同的项目（尽管有些是相同的），所以像这样命名起始文件夹是没有用的。该脚本为此使用“ & myText & ”，该字符串必须是由目标文件夹而不是起始文件夹定义的随机字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:13:30.513

除非用户付出了一些努力，否则我通常不会回答这样的问题，但我是正则表达式的傻瓜。

```
set sourceFolder to "/Users/You/Desktop/testFolder"
set destFolder to "/Users/You/Desktop/testFolder2"

set myFiles to every paragraph of (do shell script "find " & quoted form of sourceFolder & " \\! -name \".*\" -type f")

repeat with aFile in myFiles
    set aFile to aFile as text
    tell application "Finder" to set fileName to name of (POSIX file aFile as alias)

    -- Find name of parent folder
    set parentName to do shell script "echo " & quoted form of fileName & " | sed 's/ \\[.*//'"
    tell application "System Events" to set parentFolder to POSIX path of (first folder of folder destFolder whose name starts with parentName)

    -- Extract the text between ( and ) 
    set myText to do shell script "echo " & quoted form of parentFolder & " | sed 's/.*(\\(.*\\)).*/\\1/'"

    set newPath to quoted form of (destFolder & "/" & (do shell script "echo " & quoted form of fileName & " | sed -e 's/\\[0/\\[/' -e 's/\\([^\\[]*\\)\\[\\([0-9]*\\)x[0-9]*\\].*/\\1(" & myText & ")\\/Run \\2\\//'") as text)

    do shell script "mkdir -p " & newPath & " ; mv " & quoted form of aFile & space & newPath
end repeat 
```

# php - 如何在单个查询中从两个表中获取行？

> ID：12735265
> 
> 赞同：-1
> 
> 时间：2012-10-04T20:22:40.403
> 
> 标签：php, mysql

我有三张桌子

```
1>EVENT table columns event_id, time
2>EVENT_TYPE1 table columns ref_event_id
3>EVENT_TYPE2 table columns ref_event_id 
```

现在我要做的是执行一个查询，以便可以在单个查询中将两个表 EVENT_TYPE1 和 EVENT_TYPE2 中的 ref_event_id 与 EVENT 表进行比较，并且结果按时间升序排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:34:59.043

这将创建一个表以根据需要加入有序的表

```
SELECT combined.* FROM (
  SELECT * from EVENT_TYPE1
   UNION
  SELECT * from EVENT_TYPE2) AS combined 
```

我对“与事件表相比”的含义有些模糊。`event_id = ref_event_id`假设 ref_event_id 是事件表的外键，您可以将此内部选择的结果连接到事件表。

```
SELECT * FROM (
     SELECT * from EVENT_TYPE1
      UNION
     SELECT * from EVENT_TYPE2) AS combined 
 JOIN EVENT ON event_id = combined.ref_event_id 
    ORDER BY combined.time ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:38:43.753

你可以这样做：

```
SELECT a.col1, a.col2 
FROM EVENT a
LEFT JOIN
    (SELECT col1, col2 FROM EVENT_TYPE1
    UNION ALL
    SELECT col1, col2 FROM EVENT_TYPE2) b ON b.col1 = a.col1  <== Comparison 
```

# automation - JasperReports 自动化

> ID：12735267
> 
> 赞同：2
> 
> 时间：2012-10-04T20:22:52.810
> 
> 标签：automation, jasper-reports, ui-automation

我需要了解业内人士如何以自动化方式测试 JasperReports。每次迭代都进行回归很费力且容易出错，我想自动化同样的。

场景：我在代码分支（jrprint、pdf、docx - 支持各种格式）上生成了一堆（JasperReports）报告。我想将此集与来自主干的预先存在的报告集进行比较，以确认以下内容：

1.  报告中生成的总计和数据的有效性。（内容）
2.  布局结构保持不变。（布局）

有哪些可用的工具/框架（如果有）？请指教。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:20:48.983

好问题。

1.  使用 JasperReports API 自动生成报告。
2.  将报告导出到文件。
3.  使用 diff （或[WinMerge](http://winmerge.org/)）等工具将生成的输出与预先存在的报告进行比较。
4.  使用可配置的页眉和页脚来隔离和删除更改每次报告运行的信息（例如，日期、用户名等）——这将允许 PDF 的二进制比较，前提是数据集在运行之间没有差异（即，始终使用相同的测试数据）。

这适用于二进制文件（PDF、docx、Excel）——差异工具将指示文件不同。对于结构化 XML 文档，您可以使用[Schematron](http://en.wikipedia.org/wiki/Schematron)来验证两个文档中是否存在相同的 XPath。

由于`.jrxml`文件是 XML 文件，您还可以使用 Schematron 来验证源文件的布局没有改变（或没有明显改变；即所有必要的列都已到位）。

# asp.net - asp.net mvc Linq 从其他表中排除值

> ID：12735272
> 
> 赞同：2
> 
> 时间：2012-10-04T20:23:05.813
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, linq

我有一个展览场景。

如何从我将在参展商视图中显示的下拉列表中排除下面的可用展位列表。

在 Sql 中，我会：

```
Select StandID, Description from Stand 
Where StandID not in (Select StandID from Exhibitor) 
```

参展商注册 - 并根据以下型号从下拉列表（StandID/Stand）中选择他们想要的展位：

```
 public class Exhibitor
{
    public int ExhibitorID { get; set; }
    public string CompanyName { get; set; }
    public string ContactName { get; set; }
    public int StandID { get; set; }
    public virtual Stand Stand { get; set; }
 } 
```

展台型号如下：

```
 public class Stand
{
    public int StandID { get; set; }
    public string Description { get; set; }
    public bool Booked { get; set; }
} 
```

我可以得到一个 Stands 列表，如下所示：

```
var stands = db.Stands.ToList().Where(s => s.Booked==false)
          .Select(s => new SelectListItem
          {
              Value = s.StandID.ToString(),
              Text = s.StandNumber + ": " + s.Description + ": " + s.Size + ": £" + s.Rate.ToString()
          }); 
```

但是如何从展位列表中排除（从参展商中选择展位 ID）？

我试过：

```
var booked = db.Exhibitors.Select(s => new { s.StandID }).ToList(); 
```

然后使用：

```
var stands = db.Stands.ToList().Where(s => s.Booked==false)
          .Except(booked)
          .Select(s => new SelectListItem
          {
              Value = s.StandID.ToString(),
              Text = s.StandNumber + ": " + s.Description + ": " + s.Size + ": £" + s.Rate.ToString()
          }); 
```

但这没有用。

> **更新**

这似乎可行 - 但我不是专家，所以如果它是最佳实践方式，我会很感激任何建议？

```
var stands = db.Stands.ToList().Where(s => !db.Exhibitors
.Any(bk => bk.StandID == s.StandID) && s.Booked == false)
          .Select(s => new SelectListItem
          {
              Value = s.StandID.ToString(),
              Text = s.StandNumber + ": " + s.Description + ": " + s.Size + ": £" + s.Rate.ToString()
          }); 
```

谢谢你的帮助？

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:28:11.457

使用 Linq Contains() 方法

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.contains.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.contains.aspx)

```
var booked = db.Exhibitors.Select(s => s.StandID).ToList();
var stand = db.Stands.Where(s=>s.Booked == false 
                                       && !booked.Contains(s.StandId)
              .Select(s => new SelectListItem
              {
                  Value = s.StandID.ToString(),
                  Text = s.StandNumber + ": " + s.Description + ": " + s.Size + ": £" + s.Rate.ToString()
              }); 
```

我看到您也更新了有关最佳实践的问题。可以对您的技术进行很多优化。`IEnumerable`首先，阅读和之间的区别`IQueryable`。

具体来说，您应该删除`ToList()`from `Stands.ToList().Where()`。通过在从数据库中取回所有行`ToList()`之前执行，然后在内存中处理它们。`Where()`这**可能**非常昂贵。如果您执行`Stands.Where(...)`，那么您的过滤将在 sql 中完成，并且只会返回您想要的行。

通常，将您的 ToList() 保存为最后一步，并主动决定是否需要构建列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T18:06:34.720

理想的方法始终是创建一个您想要作为输出的模型，将输出映射到该模型并返回它。这也将帮助客户端获得一个明确的模型来坚持和实施。

LINQ 中的复杂选择查询也是动态生成的，这比预编译的结构良好的存储过程需要更多时间。如果您期望更快的响应，请考虑这一点。

# security - 在没有 GeneralizedNewtypeDeriving 的情况下破坏 Data.Set 完整性

> ID：12735274
> 
> 赞同：18
> 
> 时间：2012-10-04T20:23:11.587
> 
> 标签：security, haskell, type-safety, language-extension

下面的代码使用不安全的`GeneralizedNewtypeDeriving`扩展`Data.Set`通过插入具有不同`Ord`实例的不同元素来中断：

```
{-# LANGUAGE GeneralizedNewtypeDeriving #-}
import Data.Set
import System.Random

class AlaInt i where
  fromIntSet :: Set Integer -> Set i
  toIntSet :: Set i -> Set Integer
instance AlaInt Integer where
  fromIntSet = id
  toIntSet = id
newtype I = I Integer deriving (Eq, Show, AlaInt)
instance Ord I where compare (I n1) (I n2) = compare n2 n1 -- sic!  

insert' :: Integer -> Set Integer -> Set Integer
insert' n s = toIntSet $ insert (I n) $ fromIntSet s

randomInput = take 5000 $ zip (randomRs (0,9) gen) (randoms gen) where
    gen = mkStdGen 911

createSet = Prelude.foldr f empty where
    f (e,True) = insert e
    f (e,False) = insert' e

main = print $ toAscList $ createSet randomInput 
```

代码打印`[1,3,5,7,8,6,9,6,4,2,0,9]`。请注意，该列表是无序的并且有`9`两次。

是否可以使用其他扩展来执行此字典交换攻击，例如`ConstraintKinds`？如果是，是否可以`Data.Set`重新设计以抵御此类攻击？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-05T10:44:31.870

我认为这是一个重要的问题，所以我将在别处重复我的回答：您可以在 Haskell98 中为同一类型拥有同一类的多个实例，而无需任何扩展：

```
$ cat A.hs
module A where
data U = X | Y deriving (Eq, Show)

$ cat B.hs
module B where
import Data.Set
import A
instance Ord U where
    compare X X = EQ
    compare X Y = LT
    compare Y X = GT
    compare Y Y = EQ
ins :: U -> Set U -> Set U
ins = insert

$ cat C.hs
module C where
import Data.Set
import A
instance Ord U where
    compare X X = EQ
    compare X Y = GT
    compare Y X = LT
    compare Y Y = EQ
ins' :: U -> Set U -> Set U
ins' = insert

$ cat D.hs
module D where
import Data.Set
import A
import B
import C
test = ins' X $ ins X $ ins Y $ empty

$ ghci D.hs
Prelude D> test
fromList [X,Y,X] 
```

是的，您可以通过在内部存储字典来防止这种攻击：

```
data MSet a where MSet :: Ord a => Set a -> MSet a 
```

# java - 如何在非父活动中更改小部件

> ID：12735279
> 
> 赞同：1
> 
> 时间：2012-10-04T20:23:25.003
> 
> 标签：java, android, android-activity

当我单击按钮时，我需要更改属于此活动的 TextView 中的活动和文本，我尝试这样做：

在我的活动中：

```
 public void onClick(View v) {
    switch (v.getId()) {
    case R.id.MondayButton:
        NameDiscipline = (TextView) findViewById(R.id.Discipline8);
        NameDiscipline.setText("Some Text");
        Intent intent = new Intent(this, SheduleForTheDayActivity.class);
        startActivity(intent);
        break;

    default:
        break;
    } 
```

在 OtherActivity.xml 中：

```
 <TextView
                android:id="@+id/Discipline8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center" /> 
```

当我单击 MondayButton 时，我的应用程序崩溃了。没有线条

```
NameDiscipline = (TextView) findViewById(R.id.Discipline8);
            NameDiscipline.setText("Some Text"); 
```

代码正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:36:49.223

您想要的是带有 Discipline8 的 Activity 类中的[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。让 onReceive 方法更改文本。然后，在 MyActivity 中，调用

```
LocalBroadcastManager.getInstance(this)
                     .sendBroadcast(new IntentFilter("some string to use as action")); 
```

# python - 从 python 中已打开的文件中读取两种换行符类型

> ID：12735281
> 
> 赞同：2
> 
> 时间：2012-10-04T20:23:30.497
> 
> 标签：python, io, stream, newline, readline

我正在使用 subprocess.popen 运行命令并获取标准输出。

碰巧程序（mplayer）同时使用了 eol 类型`\n`和`\r`. s来自`\r`终端控制字符。所以我最终得到的输出是常规行，其中穿插着非常长的行，其中`\r`s 被忽略了。

我知道如果我自己打开了一个文件，我可以设置换行符类型。但是，我从 popen 获取标准输出，所以我无法控制它。

我查看了 python 2.7 源代码，我想我可以以某种方式使用 TextIOWrapper 来尊重这两种 eol 类型。但是我不太确定我需要传递给它什么。我知道我需要向构造函数传递某种缓冲区，但我不知道如何从已打开的文件中获取缓冲区。

总而言之，我如何`readline()`在 python 中同时中断`\n`并`\r`给出一个已经打开的文件/流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:21:49.533

[Popen.subprocess](http://docs.python.org/library/subprocess.html#subprocess.Popen)（和[Popen.check_output](http://docs.python.org/library/subprocess.html#subprocess.check_output)如果方便功能对您来说足够了），有一个`universal_newlines`默认情况下为 的参数`False`，但当设置为时，`True`将为您提供将所有换行变体转换为`\n`.

# ruby-on-rails - 如何在 Rails 中为半金融交易建模

> ID：12735282
> 
> 赞同：2
> 
> 时间：2012-10-04T20:23:30.467
> 
> 标签：ruby-on-rails, activerecord

我正在尝试建模一个事务（与 SQL 事务无关），它对这些用例“负责”：

*   用户可以将钱存入他的预付账户
*   用户也可以从同一个帐户中提款
*   一个用户可以向另一个用户汇款（为了一个忙）

一个建议是在 Transaction 模型上使用以下属性：sender_id、receiver_id 和 favour_id。在这种情况下，前两个用例将有一个与用户相关的字段（sender_id 和 receiver_id）和喜爱的id 设置为 nil，这有点违背了 belongs_to 的目的（交易属于接收者、发送者和喜爱）。这是此版本的代码段：

```
class Transaction < ActiveRecord::Base

  attr_accessible :sender, :receiver, :favor, :amount

  belongs_to :sender, :class_name => "User"
  belongs_to :receiver, :class_name => "User"
  belongs_to :favor, :foreign_key => "favor_id"

  scope :of_user, lambda { |user_id|
    where("sender_id = ? or receiver_id = ?", user_id,  user_id)
  }

  scope :external_of_user, lambda { |user_id|
    where("(sender_id = ? AND receiver_id IS NULL) or (receiver_id = ? AND sender_id IS NULL)", user_id,  user_id)
  }

end 
```

第二个建议是在每个事务上使用 user_id，但在这种情况下，两个用户之间的每个事务都会创建两个记录，第一个属于发送者并具有负数，而第二个属于接收者并具有正数。在这种情况下，喜爱 ID 的存在将表明它是存款/取款还是支付人情。

这两个哪个听起来更合理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:31:20.917

也许是这样的：

```
class User < ActiveRecord::Base
  has_many :transactions
end

class Transaction < ActiveRecord::Base
  belongs_to :user
  has_one :favor
  has_one :recipient, :through => :favor
end

class Favor < ActiveRecord::Base
  belongs_to :transaction
  belongs_to :recipient, :class_name => 'User'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:32:25.620

我在金融应用方面有一些经验。在那个系统中，我们使用“两条腿”进行交易的两侧。一条腿有负数，另一条有正数，具体取决于方向，金融交易也将两者结合在一起。通过这种方式，您可以轻松总结帐户的腿，而不必打扰其他方面。似乎有点多余（确实如此），但它更像是旧的簿记习惯，您可以更轻松地总结，因为您不需要根据用户是发送方还是接收方来决定方向的交易。当资金神秘地出现在系统中时，您可以通过单腿交易轻松模拟存款和取款。

顺便说一句，您不应该在此使用用户。使用帐户，因为用户可以共享帐户（例如公司），并且任何用户都可以拥有多个帐户。当然，用户并不是很有趣，重要的是钱。

# c# - Excel 文件 - 它已被其他用户以独占方式打开，

> ID：12735284
> 
> 赞同：3
> 
> 时间：2012-10-04T20:23:37.007
> 
> 标签：c#, excel, excel-2007, oledbconnection, oledbdataadapter

我正在使用 C# 读取 excel 文件，下面是按预期工作的代码，除了每次运行应用程序时，我必须关闭 excel 文件，否则我会收到以下错误消息：

`The Microsoft Access database engine cannot open or write to the file ''. It is already opened exclusively by another user, or you need permission to view and write its data..`

我的问题是：有没有办法在我完成阅读后关闭 excel 文件？

```
public static  DataTable LoadExcelWorkbook(string workbookName)
        {
            OleDbConnection connection;

            string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", EXCELFILENAME);
            string query = String.Format("select * from [{0}$]", workbookName);

            using(OleDbConnection conn = new OleDbConnection(connectionString))
            {
                connection = new OleDbConnection(connectionString);
                connection.Open();

                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);
                DataSet dataSet = new DataSet();
                dataAdapter.Fill(dataSet);

                DataTable myTable = dataSet.Tables[0];

                dataAdapter.Dispose();
                connection.Close();
                dataSet.Dispose();            

                //CLOSE THE EXCEL FILE?????????

                if (myTable != null)
                    return myTable;

                return null; 
            } 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T13:49:59.700

use sheet1 name instead of workbook name

# sockets - Node.js 未捕获的套接字异常 - 套接字已关闭

> ID：12735285
> 
> 赞同：1
> 
> 时间：2012-10-04T20:23:44.887
> 
> 标签：sockets, node.js, promise

这就是问题所在。写入关闭的套接字时出现异常，并且异常没有被 try catch 捕获，大概是因为它在承诺中。

```
promise.then(function (val) {
  try {
    sock.write(val + tcpDelimiter);
  } catch (err) {
    logger.info('yeah right this will not work at all');
  }
})
.fail(function (error) {}); 
```

此外，将 process.uncaughtexception 添加到主应用程序也无济于事。

这是控制台输出：

```
 2012-10-04T19:22:21.109Z - error: uncaughtException date=Thu Oct 04
 2012 19:22:21 GMT+0000 (UTC), pid=21508, uid=0, gid=0,
 cwd=/home/ec2-user/js-proxy, execPath=/usr/bin/nodejs,
 version=v0.6.18, argv=[/usr/local/bin/node,
 /home/ec2-user/js-proxy/app.js, --jsproxy], rss=13914112,
 heapTotal=5634752, heapUsed=4082564, loadavg=[0.0380859375,
 0.08056640625, 0.060546875], uptime=1721344.103162099, trace=[column=19, file=net.js, function=Socket._write, line=474,
 method=_write, native=false, column=15, file=net.js,
 function=Socket.write, line=466, method=write, native=false,
 column=24, file=/home/ec2-user/js-proxy/app.js, function=null,
 line=408, method=null, native=false, column=32,
 file=/home/ec2-user/js-proxy/node_modules/q/q.js, function=_fulfilled,
 line=860, method=null, native=false, column=34,
 file=/home/ec2-user/js-proxy/node_modules/q/q.js, function=null,
 line=881, method=null, native=false, column=9,
 file=/home/ec2-user/js-proxy/node_modules/q/q.js,
 function=makePromise.promiseSend, line=553, method=promiseSend,
 native=false, column=28,
 file=/home/ec2-user/js-proxy/node_modules/q/q.js, function=null,
 line=880, method=null, native=false, column=9,
 file=/home/ec2-user/js-proxy/node_modules/q/q.js,
 function=makePromise.promiseSend, line=553, method=promiseSend,
 native=false, column=35,
 file=/home/ec2-user/js-proxy/node_modules/q/q.js, function=, line=465,
 method=null, native=false, column=38, file=node.js,
 function=EventEmitter._tickCallback, line=190, method=_tickCallback,
 native=false], stack=[Error: This socket is closed.,     at
 Socket._write (net.js:474:19),     at Socket.write (net.js:466:15),   
 at /home/ec2-user/js-proxy/app.js:408:24,     at _fulfilled
 (/home/ec2-user/js-proxy/node_modules/q/q.js:860:32),     at
 /home/ec2-user/js-proxy/node_modules/q/q.js:881:34,     at
 makePromise.promiseSend
 (/home/ec2-user/js-proxy/node_modules/q/q.js:553:9),     at
 /home/ec2-user/js-proxy/node_modules/q/q.js:880:28,     at
 makePromise.promiseSend
 (/home/ec2-user/js-proxy/node_modules/q/q.js:553:9),     at
 Array.<anonymous>
 (/home/ec2-user/js-proxy/node_modules/q/q.js:465:35),     at
 EventEmitter._tickCallback (node.js:190:38)] 
```

更新：我参加了一个 Node.js 演讲，学到了一些关于异常处理的知识；显然它很糟糕并且被忽视了。它正在处理中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:24:47.773

最简单的修复似乎是在写入之前检查套接字是否可写。您还可以检查被破坏的财产。这些东西都是在套接字关闭事件中设置的。

```
promise.then(function (val) {
  if( sock.writable ){
    sock.write(val + conf.proxy.tcpDelimiter);
  } else {
    logger.info('this works');
  }
})
.fail(function (error) {}); 
```

# javascript - 带有内联 JavaScript 的 Dust.js

> ID：12735287
> 
> 赞同：5
> 
> 时间：2012-10-04T20:23:54.927
> 
> 标签：javascript, dust.js

我想创建一个dust.js 模板，但带有内联javascript 函数。这可能吗？问题在于单个“{”作为模板字符。

例如：

```
<html>
...
<body>
<script>
  function test(var) { alert('Hi {name} with ' + var); };
</script>
  Hello {name} 
</html> 
```

我可以将灰尘的特殊字符切换为“{{”吗？

PS。我知道有 {~rb} 但将它与内联 JS 一起使用会很可怕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T00:28:24.213

这个对我有用。因为您的花括号内有圆括号、花括号和空格，所以花括号内的内容不会被解析为 Dust 引用。这些字符不是 Dust 引用的合法字符。

[在这里](http://www.dustjs.com/)试用LinkedIn Dust 或[在这里](http://akdubya.github.com/dustjs/)试用 akdubya Dust。

# jquery - SharePoint 2010 和 JQuery 选项卡

> ID：12735288
> 
> 赞同：0
> 
> 时间：2012-10-04T20:23:56.307
> 
> 标签：jquery, sharepoint-2010

我在主页上添加了 JQuery Tab 控件，但不知道为什么灰色区域会变得很大并且无法找到原因。选项卡正在工作，但有一个丑陋的差距。

![在此处输入图像描述](../Images/ecbef803ee54682a12df046ff6e3ffa0.png)

这是我的代码，

```
<asp:Content id="Content1" runat="server" contentplaceholderid="PlaceHolderMain">
<WebPartPages:SPProxyWebPartManager runat="server" id="spproxywebpartmanager"></WebPartPages:SPProxyWebPartManager>
<div id="ChartTabs">
    <ul>
        <li><a href="#tabs-Gantt">Gantt Chart</a></li> <li><a href="#tabs-Map">Map Chart</a></li>

    </ul>

    <div id="tabs-Gantt">

        <Web Part Zone 1>

     </div>

    <div id="tabs-Map">

         <Web Part Zone 2>      
    </div>

</div>

<asp:Content id="Content2" runat="server" contentplaceholderid="PlaceHolderAdditionalPageHead">
<style type="text/css">
ul li{
  display: inline;
}

</style>
    <link rel="stylesheet"  href="/sites/xxx/SiteAssets/jquery-ui.css" />
    <script type="text/javascript" src="/sites/xxx/SiteAssets/jquery.min.js"></script>
    <script type="text/javascript" src="/sites/xxx/SiteAssets/jquery-ui.min.js"></script>

    <script type="text/javascript">
    $(function() {
        $( "#ChartTabs" ).tabs();
    });
    </script>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-23T03:58:09.910

在列表上设置一个高度来解决这个问题：

```
<ul style="height: 35px; list-style-type: none;"> ... </ul> 
```

# javascript - 如何在 Leaflet.js 中更改地图中心

> ID：12735303
> 
> 赞同：134
> 
> 时间：2012-10-04T20:24:38.860
> 
> 标签：javascript, leaflet

以下代码初始化传单地图。初始化函数根据用户位置使地图居中。调用初始化函数后如何将地图的中心更改为新位置？

```
function initialize() {
map = L.map('map');
L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>'
}).addTo(map);

map.locate({setView: true, maxZoom: 8});    
} 
```

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-10-04T20:44:12.373

例如：

```
map.panTo(new L.LatLng(40.737, -73.923)); 
```

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2012-10-07T21:51:38.487

您还可以使用：

```
map.setView(new L.LatLng(40.737, -73.923), 8); 
```

这仅取决于您想要什么行为。`map.panTo()`将平移到具有缩放/平移动画的位置，同时`map.setView()`立即将新视图设置为所需的位置/缩放级别。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-07-17T09:14:28.553

如果该点在当前视图中，则使用`map.panTo();`不会执行任何操作。改为使用`map.setView()`。

我有一条折线，我必须每秒将地图居中到折线中的一个新点。检查代码：好：[https ://jsfiddle.net/nstudor/xcmdwfjk/](https://jsfiddle.net/nstudor/xcmdwfjk/)

```
mymap.setView(point, 11, { animation: true }); 
```

不好：[https ://jsfiddle.net/nstudor/Lgahv905/](https://jsfiddle.net/nstudor/Lgahv905/)

```
mymap.panTo(point);
mymap.setZoom(11); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-05-08T14:07:57.630

您还可以使用：

```
var latLon = L.latLng(40.737, -73.923);
var bounds = latLon.toBounds(500); // 500 = metres
map.panTo(latLon).fitBounds(bounds); 
```

这将设置视图级别以适应地图传单中的边界。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-19T17:13:19.947

我正在寻找一种改变边界但没有动画的方法。这对我有用：

```
var bounds = L.latLng(40.737, -73.923).toBounds();
map.fitBounds(bounds, {animation: false}); 
```

# javascript - 是否有一种编程解决方案来抑制“这是一种不安全的形式”消息，也许是 JavaScript？

> ID：12735312
> 
> 赞同：0
> 
> 时间：2012-10-04T20:25:17.810
> 
> 标签：javascript, forms, ssl

我有一个通过 SSL 调用的页面。此页面上是通过非 SSL 提交的表单。问题是当我提交表单时，我收到以下弹出消息：

> 这是一种不安全的形式。
> 
> 此表格将以不安全的方式发送。您确定要发送吗？

我正在用 JavaScript 提交此表单；有没有办法以编程方式抑制此消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T20:28:43.923

不，而且永远不会有。这是一个安全问题。

如果有，人们可以使用它来欺骗人们提交恶意表单。

以编程方式抑制消息的唯一方法是重写足够多的应用程序以使表单不再不安全。

# linux - 如何使用可变参数/参数创建 bash 函数以 grep 多个关键字/标签

> ID：12735315
> 
> 赞同：0
> 
> 时间：2012-10-04T20:25:32.863
> 
> 标签：linux, bash, parameters, tags, grep

我`:!grep "tag1" filename | grep "tag2" filename | grep -n "tag3 or more" filename`在 vim 中使用命令在一个大文件中根据它们的标签（片段顶部的简单注释）搜索我的代码片段，类似于 firefox 的标签功能。我使用片段来记住棘手的事情。

每次写出来都很痛苦。我想创建一个别名，或者函数来做这样的事情：

```
:!greptag tag1 tag2 ... tag39 
```

它应该搜索当前文档并返回带有所有标签的行。

Vim 设置为交互式 shell 模式，以便它可以解析我的 bashrc 中的别名/函数。

```
set shellcmdflag=-ic "lets vim use bashrc 
```

如何在 bash 中构造一个允许像这样的变量参数的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:34:22.197

像这样的东西怎么样：

```
greptags() {
 if [[ -z "$1" ]] ; then
  cat
 else
  local t="$1" ; shift
  greptags "$@" | grep "$t"
 fi
}
greptag() {
 local f="$1" ; shift
 local t="$2" ; shift
 grep "$t" "$f" | greptags "$@"
} 
```

（未经测试，可能不*完全*是您想要的，但说明了这个想法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:10:02.373

你也可以使用 sed：

```
sed e '/tag1/!d;/tag2/!d;.../tagN/!d' filename 
```

该`/tag1/!`命令是一个地址前缀，告诉 sed 仅在该行包含 tag1 时才执行该命令。我们执行的命令是“d”，删除该行。

一个函数（在 .bashrc 中）将是：

```
greptags () {
    local filename="$1"
    shift
    sed "$filename" -e "$(echo "$@" | sed -e 's,\([^ ]*\) *,/\1/\!d;,g')"
} 
```

请注意，我们使用另一个 sed 命令将参数解析为最终的 sed 命令列表。基本上，对于每个单词（没有空格），我们删除它后面的空格并将其放入`/tagN/!d;`命令形式中。

并称之为：

```
greptags filename tag1 tag2 tag3 tag4 
```

希望这会有所帮助=)

# sql - 将数据类型 nvarchar 转换为 bigint 时出错

> ID：12735326
> 
> 赞同：0
> 
> 时间：2012-10-04T20:25:58.033
> 
> 标签：sql, vb.net, excel, sql-server-2008-r2, vba

嗨，我有一个从数据库中提取信息的 excel VB 程序。我的相关函数代码如下。这段代码工作了多年，现在我收到一个错误：“将数据类型 nvarchar 转换为 bigint 时出错”为什么会突然发生这种情况，解决方法是什么？

```
Public Function GetGiftCardsRedeem(iColumn As Integer, sFrom As String, sTo As String)

    Dim rsResults As New ADODB.Recordset
    Dim sSQL As String
    Dim iRecordCount As Integer

    ' Assign the Connection object.
    rsResults.ActiveConnection = gcnnDB

    ' Extract the required records.
    sSQL = "Select Sum(dTotalAmount) as TotalAmount from GiftCardTransactions where dtCreated between '" & sFrom & " 00:00:00' and '" & sTo & " 23:59:59'"
    sSQL = sSQL & " and CONVERT(BigINT, sCCNumber) Between 800110110000 and 800110159999" '800110110000
    sSQL = sSQL & " and not sCCNumber is null and sCCNumber <> ''"

    rsResults.Open sSQL, gcnnDB, adOpenStatic, adLockReadOnly, adCmdText
    If Not rsResults.EOF Then
        'Let's Cycle through the records..
        'We need to move last and then move back first to get a correct recordCount.

        DoEvents: DoEvents

        Sheet1.Cells(MTD_FREEGIFTCARDS_QTY_ROW, iColumn) = rsResults.Fields("TotalAmount").Value
    End If
    rsResults.Close
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:29:04.613

如果以某种方式将非数字值插入到您的`sCCNumber`字段中，就会发生这种情况。解决方法是找到该值并修复它。

或者你可以更换

```
and sCCNumber <> '' 
```

和

```
and ISNUMERIC(sCCNumber) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:16:28.710

正如詹姆斯指出的那样，您可能在那里有无效数据。可能是一个额外的前导空格，或者 web 不间断空格，或者一个逗号。

我会更改最后一行，因为您需要它是 12 位数字。

```
sSQL = sSQL & " and sCCNumber not like '%[^0-9]%' and len(sCCNumber) = 12" 
```

# java - 如何将一个哈希图的值设置为另一个哈希图？

> ID：12735327
> 
> 赞同：1
> 
> 时间：2012-10-04T20:25:58.540
> 
> 标签：java, object, hashmap

```
ClassData customClass= customclass.get("John" + 1 );
ClassData currentClass= currentclass.get("John");
currentClass = customClass;

public Map<String, ClassData> currentclass = new HashMap<String, ClassData>();
public Map<String, ClassData> customclass = new HashMap<String, ClassData>(); 
```

这样可以将customclass的ClassData设置为currentclass吗？或者我应该为 ClassData 的每个属性设置/获取它？或者还有什么其他方法真正有效，而无需删除其他哈希映射键的任何值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:30:08.023

您的代码根本不会更改地图。如果您想将一个映射中的单个条目设置为另一个映射中的值，最简单的方法是显式执行此操作：

```
currentclass.put("John", customclass.get("John" + 1)); 
```

但是，如果要将一个映射的所有键/值对复制到另一个映射中，可以使用以下`putAll`方法`Map`：

```
currentclass.putAll(customclass); 
```

# android - Android 上的翻页

> ID：12735328
> 
> 赞同：0
> 
> 时间：2012-10-04T20:26:05.083
> 
> 标签：android

调用视图翻转器时，我必须创建一个动画。我一直在寻找一种方法来创建与 TextView 一起使用的动画，但其中大多数都以可绘制文件夹中的图像形式呈现或转换为图像。

> 有人可以给我提示在类似于动画类的文本视图上创建翻页动画吗？

```
 public static Animation inFromRightAnimation() {

        Animation inFromRight = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT,  +1.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
        Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
        );
        inFromRight.setDuration(350);
        inFromRight.setInterpolator(new AccelerateInterpolator());
        return inFromRight;
        } 
```

将 ViewFlipper 称为 vf

```
 vf.setInAnimation(AnimationHelper.inFromRightAnimation());
            vf.setOutAnimation(AnimationHelper.outToLeftAnimation()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:16:57.867

我使用一个单独的 java 文件来处理这样的动画

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.RectF;
import android.graphics.Paint.Style;
import android.util.AttributeSet;
import android.widget.LinearLayout;

 public class TransparentPanel extends LinearLayout 
{ 
private Paint   innerPaint, borderPaint ;

public TransparentPanel(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public TransparentPanel(Context context) {
    super(context);
    init();
}

private void init() {
    innerPaint = new Paint();
    innerPaint.setARGB(225, 75, 75, 75); //gray
    innerPaint.setAntiAlias(true);

    borderPaint = new Paint();
    borderPaint.setARGB(255, 255, 255, 255);
    borderPaint.setAntiAlias(true);
    borderPaint.setStyle(Style.STROKE);
    borderPaint.setStrokeWidth(2);
}

public void setInnerPaint(Paint innerPaint) {
    this.innerPaint = innerPaint;
}

public void setBorderPaint(Paint borderPaint) {
    this.borderPaint = borderPaint;
}

@Override
protected void dispatchDraw(Canvas canvas) {

    RectF drawRect = new RectF();
    drawRect.set(0,0, getMeasuredWidth(), getMeasuredHeight());

    canvas.drawRoundRect(drawRect, 5, 5, innerPaint);
    canvas.drawRoundRect(drawRect, 5, 5, borderPaint);

    super.dispatchDraw(canvas);
}
} 
```

然后在您的 res 文件夹中添加另一个名为 anim 并包含此文件

popup_hide.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromYDelta="0" android:toYDelta="100%p" android:duration="750"/>
</set> 
```

popup_show.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromYDelta="100%p" android:toYDelta="0" android:duration="750"/>
</set> 
```

完成此操作后，您将其添加到 main.xml 或您要使用动画的那个，如下所示：

```
<com.your.app.name.TransparentPanel
        android:id="@+id/popup_view" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="left"
        android:background="@android:color/transparent">
        <LinearLayout   xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/popup_textview""/>
        <TextView android:id="@+id/textView" 
        android:layout_width="wrap_content" 
        android:text="Periodicos:" 
        android:layout_height="wrap_content" 
        android:textAppearance="?android:attr/textAppearanceMedium"> </TextView>
        <Button android:id="@+id/hide_text_button"
                style="?android:attr/buttonStyleSmall"
                android:textStyle="bold"
                android:text="Close" 
                android:background="@drawable/button"/>
                </LinearLayout>
</com.your.app.name.TransparentPanel> 
```

并在您的主要 activity.java 中使用以下命令调用动画：

在 onCreate 之前

```
private Animation animShow, animHide; 
```

在 onCreate 之后

```
final TransparentPanel g = (TransparentPanel) findViewById(R.id.popup_view);    
animShow = AnimationUtils.loadAnimation( this, R.anim.popup_show);
animHide = AnimationUtils.loadAnimation( this, R.anim.popup_hide);

g.startAnimation( animHide ); //to hide
g.setVisibility(View.GONE);

g.startAnimation( animShow );// to show
g.setVisibility(View.VISIBLE); 
```

很长，但它有效，享受。

# asp.net - LINQ - listview - 一张表中的 2 级数据

> ID：12735330
> 
> 赞同：0
> 
> 时间：2012-10-04T20:26:05.053
> 
> 标签：asp.net, linq, listview

我一直在尝试解决这个问题，但我似乎无法弄清楚。我不确定这是否是因为我的数据库设计和 LINQ，但我希望这里有一些方向。

我的数据库表：

```
Id         Name         ParentId 
1          Data1        null 
2          Data2        null 
3          Data3        null 
4          Data4        1 
5          Data5        1 
6          Data6        2 
7          Data7        2 
```

基本上 Data1 和 Data2 是我想用于标题的顶层，它们的子级将根据它们的 ParentID 相关联。

我正在尝试使用列表视图来呈现如下数据：

```
Data1
-----
   Data4
   Data5

Data2
-----
   Data6
   Data7 
```

我正在尝试使用 LINQ 和 listview 的组合来完成此操作。

以下是 linq 查询的代码：

```
var query = from data in mydb.datatable
where data.ParentId == null
select data; 
```

但这只会给出标题级别......不幸的是，listview 只接受 1 个数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:49:55.820

我刚刚写了一篇博客文章，描述了一种解决方案，该解决方案通过单个 LINQ 查询从自引用表构建图形到可能有用的数据库。请参阅[http://www.thinqlinq.com/Post.aspx/Title/Hierarchical-Trees-from-Flat-Tables-using-LINQ](http://www.thinqlinq.com/Post.aspx/Title/Hierarchical-Trees-from-Flat-Tables-using-LINQ)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:47:00.567

虽然某些数据库（如 2005 年后的 SQL Server）可以编写递归查询，但我不相信这些是由 LINQ 生成的。另一方面，如果记录数足够少，您可以将数据具体化（到列表中）并编写使用递归函数生成列表的 LINQ 查询。

这是来自记忆，但它看起来像这样：

```
Func<int?,IEnumerable<data>> f = null;
f = parentId => {
    IEnumerable<data> result = from data in mydb.datatable
                               where data.ParentId = parentId
                               select data;
    return result.ToList().SelectMany(d=>f(d.Id));
}; 
```

这应该让你得到层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T00:46:19.663

如果您的层次结构只有两个级别，您可以使用组加入和匿名对象：

```
var query = from data in mydb.datatable.Where(x => x.ParentId == null)
            join child in mydb.datatable.Where(x => x.ParentId != null)
            on data.Id equals child.ParentId into children
            select new { data, children }; 
```

**编辑：**您必须将数据转换为可以绑定到 ListView 的集合。一种技巧是让列表只有一层深，子项前面有间距：

```
var listViewItems = (from item in query.AsEnumerable()
                     let dataName = item.data.Name
                     let childNames = item.children.Select(c => "    " + c.Name)
                     from name in dataName.Concat(childNames)
                     select new ListViewItem(name)).ToArray(); 
```

您还可以尝试找到更适合的控件，例如 TreeView。您可能想就这个问题提出一个单独的问题。

# java - Webbrowser android 应用程序无法正常工作

> ID：12735331
> 
> 赞同：0
> 
> 时间：2012-10-04T20:26:08.923
> 
> 标签：java, android, android-intent, browser

我在我的 android 应用程序中添加了一个 webbrowser (webview)，但是当我例如去一个有呼叫或导航按钮的网站时，比如谷歌或电话簿页面，它只是说无法打开电话：一些号码。如果它是导航按钮，应该打开拨号器或谷歌地图。我该如何处理？请帮忙

代码：

```
package com.mysoftware.mysoftwareos.launcher;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class PeopleSearchActivity extends Activity implements OnClickListener {
WebView peoplesearchWebView;
EditText peoplesearchEditText;
Button peopleSearchButton;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.peoplesearch);

    //Import views
    peoplesearchWebView = (WebView)findViewById(R.id.peoplesearchWebView);
    peoplesearchEditText = (EditText)findViewById(R.id.peoplesearchEditText);
    peopleSearchButton = (Button)findViewById(R.id.peopleSearchButton);

    //Setup onClickListener for the buttons
    peopleSearchButton.setOnClickListener(this);

    //Setup WebView
    peoplesearchWebView.getSettings().setJavaScriptEnabled(false);
    peoplesearchWebView.getSettings().setBuiltInZoomControls(false);
    peoplesearchWebView.setWebViewClient(new myWebViewClient());
}
public void onClick(View src) {
    switch(src.getId()) {
    case R.id.peopleSearchButton:
        String searchUrl;
        searchUrl = ("http://m.gulesider.no/query?search_word=" + peoplesearchEditText.getText().toString() + "&geo_area=&what=mobwp&hpp=10");
        peoplesearchWebView.loadUrl(searchUrl);
    }
}
public class myWebViewClient extends WebViewClient {
    public boolean shouldOverrideUrlLoading(String url, WebView view) {
        view.loadUrl(url);
        return true;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:37:58.277

让您的 webView 设置包括所有这些

```
 peoplesearchWebView.getSettings().setJavaScriptEnabled(true);
    peoplesearchWebView.getSettings().setBuiltInZoomControls(true);
    peoplesearchWebView.setWebViewClient(new myWebViewClient());
    peoplesearchWebView.setInitialScale(1);
    peoplesearchWebView.getSettings().setBuiltInZoomControls(true);
    peoplesearchWebView.getSettings().setUseWideViewPort(true); 
```

网站中的某些字段是 java，因此如果您在 cade 中禁用它们，它将无法正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:29:48.847

尝试覆盖[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)类的 shouldOverrideUrlLoading 方法。调用 webview.setWebViewClient(customWebViewClient) 或 webview.setWebViewClient(new WebViewClient{...})。在 shouldOverrideUrlLoading 方法中，检查不同类型的链接（tel:、mailto:、geo: 等）并手动创建意图并触发它们。

# c# - 从仅在方法中设置类型的接口获取具有泛型类型的对象

> ID：12735334
> 
> 赞同：2
> 
> 时间：2012-10-04T20:26:27.933
> 
> 标签：c#, inheritance

这不起作用：

```
public interface IServerFuncs
{
    Table<T> getTable<T>() where T : MasterClass;
    //*cut* other stuff here
}

public class DefaultFuncs<T> : IServerFuncs where T : MasterClass
{
    Table<T> table;

    public DefaultFuncs(Table<T> table)
    {
        this.table = table;
    }

    public Table<T> getTable()
    {
        return table;
    }
} 
```

它说`DefaultFuncs<T>' does not implement interface member 'IServerFuncs.getTable<T>()'`

但我也不能这样做：

```
public Table<T> getTable<T>() where T:MasterClass
{
    return table;
} 
```

它说`Error: Cannot implicitly convert type 'MySQLCache.Table<T>`。我猜方法中的 T 会与之发生冲突，`DefaultFuncs<T>`所以我尝试了：

```
public Table<T2> getTable<T2>() where T2:MasterClass
{
    return table;
} 
```

但它给出了另一个错误：`Error Cannot implicitly convert type 'Table<T>' to 'Table<T2>'`

我需要在不向`IServerFuncs`( `IServerFuncs<T>`) 添加泛型类型的情况下使其正常工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:33:48.063

我认为如果不向界面添加模板修饰符就不能这样做，否则你可以这样做：

```
public class MC1 : MasterClass
{
}

public class MC2 : MasterClass
{
}

IServerFuncs df = new DefaultFuncs<MC1>(new Table<MC1>());
Table<MC2> table = df.getTable<MC2>();   // obviously not correct. 
```

基本上，为了保证接口和实现使用相同的类型，您需要在接口定义中添加限定符：

```
public interface IServerFuncs<T> where T : MasterClass
{
    Table<T> getTable();
    //*cut* other stuff here
}

public class DefaultFuncs<T> : IServerFuncs<T> where T : MasterClass
{
    Table<T> table;

    public DefaultFuncs(Table<T> table)
    {
        this.table = table;
    }

    public Table<T> getTable()
    {
        return table;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:05:20.243

你可以做

```
public Table<T2> getTable<T2>() where T2:MasterClass
{
    return (Table<T2>)(object)table;
} 
```

如果您知道 T 和 T2 将始终是同一类型。如果不是，您将获得运行时异常。

# python - pyserial，如果和文件读取

> ID：12735338
> 
> 赞同：0
> 
> 时间：2012-10-04T20:26:47.543
> 
> 标签：python, pyserial

我有一个愚蠢的python问题。

每次我从串行连接收到“READY”消息时，我都试图从文件中读取一行，所以我写了这个：

```
import serial
from time import sleep

port = "/dev/tty.usbserial-A400fYTT"
speed = 57600
polarfile = 'polarfile.pg'

f = open(polarfile, 'r')

ser = serial.Serial(port, speed, timeout=0)

while True:
    data = ser.read(9999)
    if len(data) > 0:
        if(data == 'READY'):
            f.readline()
        else:
            sleep(0.5)

    sleep(1)

ser.close() 
```

但它不起作用，但是如果我用打印数据替换 if(data == 'READY' 块。我收到 READY 消息。

我也可以用 f.readline() 读取我的文件...

感谢给一个py新手提建议

-- 编辑：重要信息，串行不仅收到“READY”消息，还收到一堆其他消息，但我只想在收到“READY”消息时做出反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:05:11.380

我只是更换

数据 = ser.read(9999)

经过

`data = ser.readline(9999)`这给了我逐行而不是逐秒输入数据的消息，然后替换

`if( data == 'READY' ):`经过

`if (data.startswith('READY')):`

现在它可以工作了:)

# wpf - WPF ContextMenu 位置调整事件

> ID：12735342
> 
> 赞同：3
> 
> 时间：2012-10-04T20:27:18.580
> 
> 标签：wpf, contextmenu, placement

有谁知道我如何确定 contextMenu 由于太靠近屏幕边缘而自动调整其位置？

我的场景是我有一个 contextMenu，它有 2 个圆角和 2 个方角。当菜单向下打开时，我将底部 2...它的方向自动改变。

这是一些简化的示例代码供您试用。如果您在窗口位于屏幕顶部时单击，则菜单会下降。如果您将窗口移动到屏幕底部，则菜单将向上。

```
<Window x:Class="menuRedirection.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="100" Width="200">
  <DockPanel Name="panel" ContextMenuOpening="DockPanel_ContextMenuOpening">
    <DockPanel.ContextMenu>
      <ContextMenu>
        <MenuItem Header="item"/>
        <MenuItem Header="item"/>
        <MenuItem Header="item"/>
        <MenuItem Header="item"/>
      </ContextMenu>
    </DockPanel.ContextMenu>
    <Rectangle DockPanel.Dock="Bottom" Name="menuTarget" Fill="Red" Height="10"/>
    <TextBlock DockPanel.Dock="Top" Text="right click for context menu"/>
  </DockPanel>
</Window>

private void DockPanel_ContextMenuOpening(object sender, ContextMenuEventArgs e)
{
  ContextMenuService.SetPlacement(panel, PlacementMode.Bottom);
  ContextMenuService.SetPlacementTarget(panel, menuTarget);
} 
```

* * *

这是实际应用程序的样子，因此您可以看到我需要知道调整圆角的问题。

![在此处输入图像描述](../Images/4a5bb420a080cfd16d123ae321f36867.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:28:16.290

据我所知，这是不可能的。

使用 JustDecompile，我将此功能追溯到类中的`UpdatePosition`方法`Popup`。最终位置似乎设置在这里：

```
 this._positionInfo.X = num4;
    this._positionInfo.Y = num5;
    this._secHelper.SetPopupPos(true, num4, num5, false, 0, 0); 
```

`_secHelper`是 type 的助手类`PopupSecurityHelper`，似乎只是一个内部助手......而且，这些都不会导致事件甚至公共属性被更改。

[这是一篇 MSDN 文章，解释了通常如何确定弹出窗口的位置](http://msdn.microsoft.com/en-us/library/bb613596.aspx)（“当弹出窗口遇到屏幕边缘时”描述了您的场景）。

但是，[本文](http://msdn.microsoft.com/en-us/library/ms743607.aspx)解释了如何使用`CustomPopupPlacementCallback`来覆盖这些行为。但是，这仍然使用 a `PopupPrimaryAxis`，它应该根据需要翻转菜单，并且会导致同样的问题。

我唯一能想到的另一件事是，您可以查看`PlacementRectangle`并可能轮询大小和位置，类似于`UpdatePosition`事情的方式......或者就像 UpdatePosition 一样检查弹出窗口本身。

不过，这是一种私有方法。因此，您尝试模仿的任何逻辑都可能在框架的未来版本中发生变化。

**更新**

此外，您可以尝试对`PointToScreen`or进行混蛋`PointFromScreen`，但如果它有效，那将是非常复杂的代码......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:55:27.423

我无法找到真正的 WPF 解决方案，但 Justin 的评论引导我尝试将菜单的位置与 PlacementTarget 的位置进行比较。

第一步是订阅 contextMenu.Loaded 事件（在布局处理后但在屏幕上完全可见之前触发）。

```
<ContextMenu ContextMenu.Loaded="ContextMenu_Loaded"> 
```

然后当它触发时，我可以确定菜单是否在内部切换到我请求的位置模式的备用位置。如果它被反转，那么我继续并相应地调整我的圆角。

注意：我最初使用 getWindowRect 并将菜单 Rect 与目标的 Rect 进行比较，但发现菜单 Rect 总是返回前一个实例的位置。为了避免这个问题，我现在获取相关屏幕的工作区域并手动查看菜单是否适合。

注意 2：确保您的菜单模板在反转和常规显示中产生相同的窗口高度。否则，您的计算可能会关闭，因为 getWindowRect 返回最后一个菜单的大小。

```
void ContextMenu_Loaded(object sender, RoutedEventArgs e)
{
  bool reversed = isMenuDirectionReversed(this.ContextMenu);

  //existing styles are read-only so we have to make a clone to change a property
  if (reversed)
  {//round the top corners if the menu is travelling upward
    Style newStyle = new Style(typeof(ContextMenu), this.ContextMenu.Style);
    newStyle.Setters.Add(new Setter { Property = Border.CornerRadiusProperty, Value = new CornerRadius(10, 10, 0, 0) });
    this.ContextMenu.Style = newStyle;
  }
  else
  { //since we may have overwritten the style in a previous evaluation, 
    //we also need to set the downward corners again    
    Style newStyle = new Style(typeof(ContextMenu), this.ContextMenu.Style);
    newStyle.Setters.Add(new Setter { Property = Border.CornerRadiusProperty, Value = new CornerRadius(0, 0, 10, 10) });
    this.ContextMenu.Style = newStyle;
  }
} 
```

评价方法：

```
private bool isMenuDirectionReversed(ContextMenu menu)
{
  //get the window handles for the popup' placement target
  IntPtr targetHwnd = (HwndSource.FromVisual(menu.PlacementTarget) as HwndSource).Handle;

  //get the relevant screen
  winFormsScreen screen = winFormsScreen.FromHandle(targetHwnd);

  //get the actual point on screen (workingarea not taken into account)
  FrameworkElement targetCtrl = menu.PlacementTarget as FrameworkElement;
  Point targetLoc = targetCtrl.PointToScreen(new Point(0, 0));

  //compute the location for the bottom of the target control
  double targetBottom = targetLoc.Y + targetCtrl.ActualHeight;

  if (menu.Placement != PlacementMode.Bottom)
    throw new NotImplementedException("you need to implement your own logic for other modes");

  return screen.WorkingArea.Bottom < targetBottom + menu.ActualHeight;
} 
```

最后结果：

![在此处输入图像描述](../Images/aa50a485a3f695067ea6bb516465295e.png)

# javascript - 在 Google Chrome 和嵌入 C++ 应用程序的 v8 之间使用通用代码库

> ID：12735344
> 
> 赞同：2
> 
> 时间：2012-10-04T20:27:31.017
> 
> 标签：javascript, embed, webgl, requirejs, v8

我正在开发一个 WebGL 场景图形库作为一个爱好项目。我现在想在嵌入在 C++ 应用程序中的 v8 中运行我的代码，将 OpenGL 4.3 暴露给 JavaScript 代码。

我现在在我的 WebGL 代码中使用 require.js，当我从嵌入式 v8 运行时，它会继续工作吗？在 Chrome 和 C++ 应用程序中运行时，是否还有其他替代方案可以使用？

除了同时处理 WebGL 和 OpenGL 4.3 之外，还有其他我应该注意的问题吗？

# grails - grails ui 插件不适用于 grails 2.1.0

> ID：12735347
> 
> 赞同：1
> 
> 时间：2012-10-04T20:27:47.407
> 
> 标签：grails, yui, grails-plugin

我想在放入另一个项目之前测试一些功能，如可扩展面板等，所以我创建了一个带有 CRUD 的新项目，这样我就可以使用 grails ui

我正在使用 Intellij 11，所以我安装了插件并得到以下错误响应：

```
Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):

- org.grails.plugins:yui:[2.6.0,)

IDEA hook: Grails not found!
| Error java.lang.NullPointerException
| Error     at org.jetbrains.groovy.grails.rt.Agent$2.run(Agent.java:99)
| Error     at java.lang.Thread.run(Thread.java:680) 
```

其他人使用这个插件有问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-02T11:38:58.037

更容易：

编辑 BuildConfig.groovy 并通过以下方式更改插件依赖项的行：

```
compile ":yui:2.8.2.1"
    compile (":grails-ui:1.2.3") {
         excludes 'yui'
    } 
```

以防万一它对你有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T05:25:45.540

我在将我的应用程序从 grails 1.3.7 升级到 2.1.0 时遇到了同样的问题。yui 是 grails-ui 插件的依赖项（因为 grails-ui 需要冒泡，冒泡需要 yui :-/）这就是我所做的：

1.  转到 .grails/ivy-cache/org.grails.plugin/grails-ui 文件夹
2.  打开文件 ivy-(version).xml (ivy-1.2.3.xml)
3.  寻找这一行：`<dependency org="org.grails.plugins" name="yui" rev="**[2.6.0,)**" force="true" conf="compile->compile(*),master(*);runtime->runtime(*)">`
4.  将 [2.6.0,) 替换为 2.8.2，因此最后一行将如下所示：`<dependency org="org.grails.plugins" name="yui" rev="2.8.2" force="true" conf="compile->compile(*),master(*);runtime->runtime(*)">`
5.  grails clean 和 grails compile

在此之后，这个错误就永远消失了。希望这可以帮助。

## 更新 ：

感谢 predicador37 ；这样做的方式更加简洁和常规 - 将其放在 BuildConfig.groovy 的插件下：

```
compile ":yui:2.8.2.1"
compile (":grails-ui:1.2.3") {
     excludes 'yui'
} 
```

# java - 每次出现字母时拆分数组以在Java中形成更长的数组

> ID：12735348
> 
> 赞同：0
> 
> 时间：2012-10-04T20:27:47.190
> 
> 标签：java, arrays, split

每次出现一个字母时，我都会将一个字符串拆分为一个数组，但是我现在想将数组中的每个字符串拆分为更多数组，然后出现另一个字母，在每个拆分下方添加一个数组，并删除该字母。

这是我的代码：

```
private String input = "118u121u23n24"
private int y = 0;
private String[] split_main = new String[100];
private void split_u(){
        String[] split = input.split("u");
        for(int x=0; split.length>x; x++){
            split_main[y] = split[x];
            if(split.length>x+1)
                split_main[y+1] = "+";
            y +=2;
        } 
```

这会将我的字符串拆分为这样的数组 - 每次“u”出现时创建一个新数组并添加一个加号

```
118
+
121
+
23n24 
```

我现在想遍历这些数组中的每一个并查找字母 n 并将其放在单独的行上，因此这将是新数组。然而，每次我尝试这个时，我都会遇到错误，因为我似乎无法在数组上再次使用 Split 方法。如果无法使用拆分，那么还有其他方法吗？

```
118
+
121
+
23
n
24 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:36:06.147

尝试这个

```
String[] split = input.split("u|n"); 
```

`u|n`表示用 by `u`or`n`分割字符串，简单地用两个分隔符分割字符串

当您想在两个级别中添加不同的分隔符时，您应该编写这样的代码。

```
 String input = "118u121u23n24";
    String[] s2;
    ArrayList<String> main = new ArrayList<String>();

    String[] split = input.split("u");
    for(int x=0; split.length>x; x++){
        s2 = split[x].split("n");

        for(int k=0; k<s2.length; k++){
            main.add(s2[k]);
            if(s2.length>k+1)
                main.add("n");
        }

        if(split.length>x+1)
            main.add("+");
    }
    // print main array to test
    for(int i=0;i<main.size();i++)
        System.out.println(main.get(i)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:35:21.530

我建议您使用正则表达式一次简单地拆分所有字母：

```
String[] split = input.split("(+|n)"); 
```

如果您需要中间步骤，那么唯一的方法是遍历第一个拆分，在第二个字母上构建拆分结果数组。如果您想对多个拆分模式（不仅仅是“+”和“n”）执行此操作，您将需要一个通用过程。这是示例代码：

```
/**
 * Replaces one element of a list of strings with the results of
 * splitting that element with a given pattern. A copy of the pattern
 * is inserted between the elements of the split.
 * @param list The list of elements to be modified
 * @param pattern The pattern on which to split
 * @param pos The position of the element to split
 * @return The number of additional elements inserted. This is the amount by
 *         which the list grew. If the element was not split, zero is returned.
 */
int splitElements(List<String> list, String pattern, int pos) {
    String[] split = list.get(pos).split(pattern);
    if (split.length > 1) {
        list.set(pos++, split[0]);
        for (int i = 1; i < split.length; ++i) {
            list.add(pos++, pattern);
            list.add(pos++, split[i]);
        }
    } // else nothing to do
    return (split.length << 1) - 1;
} 
```

然后你会用你想要分割的每个字符来调用它：

```
private String input = "118u121u23n24";
private ArrayList<String> split_main = new ArrayList<String>();
split_main.add(input);
splitElements(split_main, "+", 0);
for (int i = 0; i < len; ++i) {
    i += splitElements(split_main, "n", i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:36:40.110

这是可能的。使用`List`而不是数组可以轻松插入新项目。

如果您只想要数组，请分两遍进行：首先，迭代`input`并计算由于 而需要多少个单元格`n`，然后创建适当大小的新数组并将`input`内容复制到其中，沿途拆分。

# mathjax - 无法使用 MathJax 和 MathML 垂直渲染两个数字的加法

> ID：12735353
> 
> 赞同：0
> 
> 时间：2012-10-04T20:28:08.597
> 
> 标签：mathjax, mathml

我想在这样的网页上呈现两个数字：

```
 123
  + 456
 ______ 
```

我找到了这个例子：

```
<mstack>
  <mn>496</mn>
  <msrow> <mo>+</mo> <none/> <mn>28</mn> </msrow>
  <msline/>
</mstack> 
```

但[MathJax 不支持 mstack、msrow 和 msline 元素。](http://docs.mathjax.org/en/latest/mathml.html)我尝试使用 mtable

```
<body>
    <math xmlns="http://www.w3.org/1998/Math/MathML">
        <mtable id="test" columnalign="right">
            <mtr><mtd></mtd><mtd><mn>12321</mn></mtd></mtr>
            <mtr><mtd><mo>+</mo></mtd><mtd><mn>45665445</mn></mtd></mtr>
       </mtable>
    </math>
</body> 
```

使用这个 CSS：

```
 <style type="text/css">
       #test
       {
           border-bottom:1px solid black;
       }
    </style> 
```

但底部边框与较低的数字重叠。有没有办法用 MathJax/MathML 实现这种布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:48:07.640

您可以在 MathML 规范中查看此类布局的示例，网址为

[http://www.w3.org/Math/draft-spec/mathml.html#chapter3_presm.elemmath.examples](http://www.w3.org/Math/draft-spec/mathml.html#chapter3_presm.elemmath.examples)

如果在加载文档后，您选择“使用 MathJax 转换和显示”按钮，则 MathML3 mstack 标记将转换为 MathJax 可以理解的一些 MathML2。相关的 javascript 都可以从该页面链接。

同样相关的是我和 MathJax 开发人员之间的讨论

[https://groups.google.com/forum/#!msg/mathjax-users/wa85p5TAIe4/hgUoLEXrweoJ](https://groups.google.com/forum/#!msg/mathjax-users/wa85p5TAIe4/hgUoLEXrweoJ)

# php - mysqli 存储 php 变量而不是值

> ID：12735357
> 
> 赞同：3
> 
> 时间：2012-10-04T20:28:17.877
> 
> 标签：php, jquery, mysqli

这让我发疯了。我正在使用来自 [http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/的 jQuery 图像上传和裁剪](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/)

我正在使用此处建议的修改版本将文件位置存储在 MySQL 数据库中。mod是我在一个表上使用INSERT，它工作得很好，除了一件事，'所有者'变量$id被存储为$id而不是$id的值。如果每个 $_POST 上的 $id 都可以回显该值，那么我知道它就在那里。

我很确定我的语法是正确的，但我不明白它为什么这样做。

```
 $cropped = resizeThumbnailImage($thumb_image_location, $large_image_location,$w,$h,$x1,$y1,$scale);
    //connect to the database
    include 'config.php';
    // check connection
    if (mysqli_connect_errno()) {
        exit('Connect failed: '. mysqli_connect_error());
    } 
    $sql = "INSERT INTO `photos` (`id`,`owner`,`url`) VALUES ('id','".$id."','".$thumb_image_location."')";
    // Performs the $sql query on the server to insert the values
    if ($conn->query($sql) === TRUE) {
        $conn->close();}
//Reload the page again to view the thumbnail
header("location:".$_SERVER["PHP_SELF"]);
exit(); 
```

第一行是 246，最后 3 行是原始的 247-250。

感谢您的任何帮助，您可以提供。

好的，我不知道这是我的脑子放屁还是 PHP 的问题或两者兼而有之。我从每个页面的标题中的 _SESSION 变量中分配了 $id 并且（忘记了）我将 $id 作为 _POST 数据（相同的值）传递。一旦我切断 _POST 数据传递并拉出 _SESSION 变量，它就可以正常工作。但是多次分配一个变量应该不是问题，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:37:49.877

查询行需要是这样的：

```
$sql = "INSERT INTO `photos` (`id`,`owner`,`url`) VALUES ('id','$id','$thumb_image_location')"; 
```

您的语法也可以正常工作，如此处[所示](http://codepad.org/Yac5JOxy)

这就是我的语法的工作方式，[在这里](http://codepad.org/06qupQQZ)

**注意：**两者的工作方式相同，因此仍试图找出 OP 代码中的问题。

# storyboard - iOS6 + Storyboard + 似乎是双打

> ID：12735358
> 
> 赞同：1
> 
> 时间：2012-10-04T20:28:26.863
> 
> 标签：storyboard, ios6, viewcontroller

自从升级到 6 以来，我的 ios 应用程序一直存在问题。我确定我的某些配置有误，直到现在都被隐藏了。

我正在使用故事板，并且我的第一个视图只是一个普通的旧香草视图控制器。这是我的登录页面。当您单击“登录”按钮时，它会转到“标签栏控制器”，其中包含一堆标签，其中包括一个带有“注销”按钮的标签。

编辑：重要的是不要让登录视图控制器将“模式”segue 推送到选项卡栏控制器。

“注销”按钮将运行

```
[self dismissModalViewControllerAnimated:YES]; 
```

将其发送回登录视图。然后用户可以继续并重新登录等等......

问题是，似乎每次我从登录到选项卡视图时，我都会得到一些重复项。我知道这是因为在其中一个选项卡视图中我有一个

```
 [[NSNotificationCenter defaultCenter] removeObserver:self];

// Register observer to be called when download of data is complete
[[NSNotificationCenter defaultCenter] removeObserver:self name:OBJECTS_LOADED_NOTIFICATION object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                        selector:@selector(coreDataViewController_downloadDataComplete:)
                                            name:OBJECTS_LOADED_NOTIFICATION
                                          object:nil]; 
```

这应该删除页面上已经存在的任何观察者并添加新的观察者。然而，它只是一遍又一遍地添加观察者。这让我相信内存中某处有多个版本的页面。

有人可以帮忙吗！？我已经连续 4 天尝试解决这个问题，但没有任何结果。我敢肯定这是非常愚蠢的事情，但我一生都无法弄清楚是什么。

谢谢马特

编辑：根据请求，我添加了更多代码...... :-) 我认为发布整个项目而不是发布它的点点滴滴更容易。

[https://github.com/MCKRUZ/Iphone](https://github.com/MCKRUZ/Iphone)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:33:33.413

好的，我解决/规避了这个问题。基本上，每次我注销并重新登录时它仍然在重新创建 VC，但是我重新编写了代码，以便它是否这样做并不重要，因为我使用的对象上下文在服务中而不是在页面上.

尽管如此，苹果不会删除那些未使用的 VC 实例还是很奇怪的行为……我想念 pageDidUnload……

# c# - c# 使用 try-parse 强制数字 updown 只接受正整数

> ID：12735359
> 
> 赞同：2
> 
> 时间：2012-10-04T20:28:29.403
> 
> 标签：c#, integer, numeric, updown

我只做了几天，我很困惑。

其他一切正常，该框仅显示整数，但仍使用十进制值进行计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:29:55.713

你应该能够做一个`int myInt = Convert.ToInt32(numBox.Value);`

numBox.Value 是一个小数，但该代码会导致它被转换为一个整数。

只要知道如果你确实得到一个十进制值，它将向上或向下舍入。

编辑：如果您只想要正值，Aghilas Yakoub 的解决方案可能会更好。我的解决方案会将小数转换为 int，但它仍然可以允许负数。真正你应该做的是将你的设置`numBox.Minimum`为 0，这样它就不能低于 0。

编辑 2：如果您想在值为负数时发出警告，请尝试以下操作：

```
int myInt = Convert.ToInt32(numBox.Value);
if (myInt < 0)
{
    MessageBox.Show("Warning, your number must be 0 or greater");
} 
```

如果值不是整数（有十进制值），是否要发出警告？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:32:35.197

你可以试试

```
UInt32 result = 0;

UInt32.TryParse("...",
                new CultureInfo(""),
                out result);

if(result == 0)
{
  Console.WriteLine("No parsing");
}
else
{
 Console.WriteLine("result={0}", result);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-08T14:10:55.583

一个更优雅的解决方案是：

如果您有权访问**DevExpress**控件，则应使用[SpinEdit](https://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsSpinEdittopic)控件。要将其范围限制为 0 到 999（仅整数），请设置：

*   `Properties.Mask.EditMask`到*“##0;”*
*   `Properties.MaxValue`到*999*

那么下面的行应该可以正常工作，没有例外：

```
int myInt = Convert.ToInt32(numBox.Value); 
```

# sql-server - SQL：根据另一列的最小值提取行 ID

> ID：12735365
> 
> 赞同：1
> 
> 时间：2012-10-04T20:28:49.087
> 
> 标签：sql-server, tsql

这个好像拿不到 所以我有一张这样的桌子：

```
RowID    UserID  Type    Data
1        A       A       1
2        A       A       2
3        A       B       1
4        A       B       2
5        B       A       1
6        B       A       2
7        B       B       1
8        B       B       2 
```

我需要按 UserID 和 Type 对这个表进行分组，然后返回每个组中包含 Data 列中的 MIN 值的记录的 RowID。

所以我的结果集是：1 3 5 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:31:03.757

对于 SQL Server >= 2005，您可以执行以下操作：

```
select RowID
from (
    select RowID,
        Rank() over (Partition BY UserID, Type 
            order by Data) as Rank
    from MyTable
) tmp
where Rank = 1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/ae1aa/4)

对于 SQL Server < 2005，您可以执行以下操作：

```
select t.RowID
from MyTable t
inner join (
    select UserID, Type, min(Data) as MinData
    from MyTable
    group by UserID, Type 
) tm on t.UserID = tm.UserID and t.Type = tm.Type
    and t.Data = tm.MinData 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/ae1aa/7/0)

# javascript - 独立函数中的 jQuery 选择器 $() 功能

> ID：12735368
> 
> 赞同：-1
> 
> 时间：2012-10-04T20:29:09.997
> 
> 标签：javascript, jquery

我正在寻找一种高级功能来选择 dom 中的元素，而无需使用 jQuery 或任何其他库。

可以完成与 $(selector) 函数在 jQuery 中所做的相同的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:34:53.103

您可以使用的最好的东西是[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)，它允许您使用 CSS 选择器进行选择，就像使用 jQuery 一样：

```
var links = document.querySelectorAll('#someEl a.someClass'); 
```

然后，您需要循环`links`执行您想要对元素执行的任何操作。请注意，许多 jQuery 提供的实用程序函数（例如`addClass`）将不可用。一些实用功能在现代浏览器中可用（当采用 DOM4 时会出现更多功能），但它会比 jQuery 做的笨重得多。这就是你要付出的代价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:32:49.233

jQuery 使用名为 Sizzle (http://sizzlejs.com/) 的库来处理选择器。所以也许你可以看看它是如何做到的。

# c++ - boost socket的函数读取在哪里

> ID：12735371
> 
> 赞同：0
> 
> 时间：2012-10-04T20:29:18.803
> 
> 标签：c++, sockets, boost, boost-asio

我想使用 boost socket 在我的应用程序中读取一定数量的字节。我听说曾经有读取功能可以做到这一点，但现在它不见了。有人知道我该如何处理吗？有没有特别的异步方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:37:21.110

你想要[`boost::asio::async_read()`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/async_read/overload1.html)。它可以读取特定数量的字节，但是要注意大量的重载。

# javascript - hasFocus() 返回错误

> ID：12735372
> 
> 赞同：0
> 
> 时间：2012-10-04T20:29:21.247
> 
> 标签：javascript, html

我不太确定自己做错了什么，我查找了一种方法来查看元素是否具有焦点。我找到了 document.hasFocus() 方法。所以我尝试并在 Chrome 上调试并得到“未捕获的类型错误：对象 # 没有方法 'hasFocus'。”。这是我的 JavaScript：

```
var e = document.getElementById("editor").contentWindow;
e.document.designMode="on";
e.document.open();
e.document.write("<head><style>body{font-family:arial,helvetica,sans-serif;font-size:12px;}</style></head>");
e.document.close();
function def() {
   document.getElementById("fonts").selectedIndex = 0;
   document.getElementById("size").selectedIndex = 1;
   document.getElementById("color").selectedIndex = 0;
}
function edit(x, y) {
   e.document.execCommand(x, false, y);
   e.focus();
}
setInterval(function() {
    if (document.getElementById("editor").contentWindow.hasFocus()) {
        document.getElementById("html").value = document.getElementById("editor").contentWindow.document.body.innerHTML;
    }
    else if (document.getElementById("html").hasFocus()) {
        document.getElementById("editor").contentWindow.document.body.innerHTML = document.getElementById("html").value;
    }
}, 100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:38:57.480

“hasFocus”方法仅存在于文档对象上，而不存在于单个节点上。请参阅 - [https://developer.mozilla.org/en-US/docs/DOM/document.hasFocus](https://developer.mozilla.org/en-US/docs/DOM/document.hasFocus)

如果要检查输入是否聚焦，可以通过在输入的“onfocus”事件上更新变量来实现，然后检查聚焦元素的变量。请参阅 -[在 Javascript 中查找复选框是否已聚焦](https://stackoverflow.com/questions/534971/in-javascript-find-if-a-checkbox-is-focused)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:35:27.147

请改用 document.activeElement。它是 HTML5 规范的一部分，并受到最新的 Chrome、Opera、Firefox 和 IE 的支持。

您也可以将此脚本用于不支持它的浏览器。 [http://ajaxandxml.blogspot.com/2007/11/emulating-activeelement-property-with.html](http://ajaxandxml.blogspot.com/2007/11/emulating-activeelement-property-with.html)

# visual-studio-2010 - 为什么我的 Visual Studio 2010 应用程序需要安装？

> ID：12735374
> 
> 赞同：1
> 
> 时间：2012-10-04T20:29:27.183
> 
> 标签：visual-studio-2010

当我使用 Visual Studio 2010 创建应用程序然后尝试运行 exe 时，它​​需要我安装它。我正在尝试创建一个不需要安装的非常简单的程序。这方面的一个例子就是像 procmon.exe 这样的东西。您无需任何安装即可运行 procmon。

另外，是否可以在不需要证书的情况下创建 exe？

# java - Google Guice Web 应用程序中的 HttpSessionListener

> ID：12735376
> 
> 赞同：4
> 
> 时间：2012-10-04T20:29:39.110
> 
> 标签：java, servlets, dependency-injection, guice, servlet-listeners

当 Guice Servlet 会话到期时，我需要执行一个操作，该操作将访问[ServletContext中的项目。](http://docs.oracle.com/javaee/1.4/api/javax/servlet/ServletContext.html)（*为什么？*要通过打开的 websocket 连接来销毁会话并关闭它们；这些连接保存在`ServletContext`.）

要在基本的 Servlet Web 应用程序中实现这一点，需要实现一个[HttpSessionListener](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpSessionListener.html)并挂钩到该`sessionDestroyed`方法中。

[对于使用Google Guice](http://code.google.com/p/google-guice/wiki/Servlets)进行依赖注入的 Web 应用程序，如何实现这一点？

回想能够访问的要求`ServletContext`；我已经遇到过[这个论坛对话](https://groups.google.com/forum/?fromgroups=#!topic/google-guice/9gsVec6HeKM)，但没有发现它有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T07:56:26.787

没有添加会话侦听器的“Guice 方式”。可悲的是。但是从会话侦听器访问 servlet 上下文没有问题。

注册会话监听器：

```
public class MyServletConfig extends GuiceServletContextListener {
    private Injector    injector;

    @Override
    public void contextInitialized(final ServletContextEvent servletContextEvent) {
        injector = Guice.createInjector(new MyAppModule());

        registerSessionListeners(servletContextEvent.getServletContext(), injector);

        super.contextInitialized(servletContextEvent);
    }

    private void registerSessionListeners(final ServletContext servletContext, final Injector injector) {
        servletContext.addListener(injector.getInstance(WebsocketCloser.class));
    }

    @Override
    protected Injector getInjector() {
        return injector;
    }

} 
```

访问 servlet 上下文是会话侦听器：

```
public class WebsocketCloser implements HttpSessionListener {
    @Override
    public void sessionCreated(final HttpSessionEvent httpSessionEvent) {
        // no-op
    }

    @Override
    public void sessionDestroyed(final HttpSessionEvent httpSessionEvent) {
        // do cleanup: httpSessionEvent.getSession().getServletContext();
    }
} 
```

# c# - 在 C# 中相当于 VB.NET 中的“句柄”

> ID：12735379
> 
> 赞同：1
> 
> 时间：2012-10-04T20:29:53.680
> 
> 标签：c#, asp.net

我在 Visual Basic 中有这段代码，当我测试它时它可以工作。所有行都有交替的颜色。

```
Private Sub GridView1_RowCreated(ByVal sender As Object, _
                                 ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) _
                                 Handles GridView1.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim RowNum as Integer
        RowNum = e.Row.RowIndex

        If RowNum mod 2 = 1 Then
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='#DDDDDD'")
        Else
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='#FFFFFF'")
        End If

        e.Row.Attributes.Add("onmouseover", "this.style.backgroundColor='DeepSkyBlue'")
        e.Row.Attributes("onclick") = Me.Page.ClientScript.GetPostBackClientHyperlink(Me.GridView1, "Select$" & e.Row.RowIndex)
    End If
End Sub 
```

由于我在 C# 环境下工作，因此我将其转换为 C#：

```
private void GridView1_RowCreated(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        int RowNum = e.Row.RowIndex;
        if (RowNum % 2 == 1)
        {
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='#DDDDDD'");
        }
        else
        {
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='#FFFFFF'");
        }

        e.Row.Attributes.Add("onmouseover", "this.style.backgroundColor='DeepSkyBlue'");
        e.Row.Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
    }
} 
```

这是我可以做的与 Visual Basic 中的“句柄”选项相同的方法吗？如果可能的话，请给我代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:37:01.273

您需要从标记添加事件处理程序

```
<asp:GridView OnRowCreated="GridView1_RowCreated" runat="server" ID="MyGrid">

</asp:GridView> 
```

或从代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
{
   MyGrid.RowCreated += GridView1_RowCreated;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:34:39.720

您必须像这样在 Page_Load() 中添加处理程序：

```
Protected Void Page_Load(Object Sender, EventArgs e){
    GridView1.RowCreated += GridView1_RowCreated;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T20:35:07.580

你可以试试

```
GridView1.RowCreated += GridView1_RowCreated; 
```

注意：我建议您在`Page_Init`（最佳实践）中初始化您的委托

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T20:38:16.607

C# 作为一种语言没有像“handles”关键字这样的概念。相反，您必须明确连接事件定义。

尝试

```
protected void Page_Load(object sender, EventArgs e)
{
    GridView1.RowCreated += GridView1_RowCreated;
} 
```

C# 通过 '+=' 运算符添加处理程序，并通过 '-=' 运算符删除它们。

即使在 VB.NET 中，如果使用 AutoEventWireUp="true"，您也可以跳过“句柄”。

# c# - c# webclient从带有扩展名的url下载数据

> ID：12735380
> 
> 赞同：0
> 
> 时间：2012-10-04T20:29:53.730
> 
> 标签：c#

我试图从 yahoo Finance [http://uk.finance.yahoo.com/q?s=EURUSD=X](http://uk.finance.yahoo.com/q?s=EURUSD=X)下载数据， 但它是从[http://uk.finance.yahoo.com/](http://uk.finance.yahoo.com/)下载的。我一直在搜索，还记得看到下载数据有扩展问题吗？有什么解决办法吗？

当前代码

```
WebClient eurusdclient = new WebClient();

eurusdclient.Headers.Add("user-agent", 
    "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");

string eurusdcode = eurusdclient
    .DownloadString(string.Format("http://uk.finance.yahoo.com/q?s=EURUSD=X")); 
```

谢谢大家:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:38:27.073

使用 WebClient 的 QueryString 属性

> QueryString 属性包含一个 NameValueCollection 实例，其中包含作为查询字符串附加到 URI 的名称/值对。QueryString 属性的内容以问号 (?) 开头，名称/值对由 & 号 (&) 相互分隔。

[http://msdn.microsoft.com/en-us/library/system.net.webclient.querystring.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.querystring.aspx)

这允许您指定将在请求的查询字符串中使用的多个名称/值对。

# asp.net - 使用详细视图以编程方式展开或折叠 Telerik 网格

> ID：12735383
> 
> 赞同：0
> 
> 时间：2012-10-04T20:30:03.157
> 
> 标签：asp.net, asp.net-mvc, telerik-grid, telerik-mvc

我正在使用带有 DetailView 的 Telerik 网格。我的网格渲染正确，但我想知道是否有办法使用 Java Script 以编程方式折叠/展开所有行？

如果我一一手动执行它，它会起作用，但我想为所有行提供一个主展开/折叠按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:35:05.993

在这里找到了解决方案：

[http://www.telerik.com/community/forums/aspnet-mvc/grid/expand-collapse-all-detailviews-in-a-grid.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/expand-collapse-all-detailviews-in-a-grid.aspx)

# python - 插入 csv 数据的父 ID

> ID：12735387
> 
> 赞同：0
> 
> 时间：2012-10-04T20:30:41.723
> 
> 标签：python

我有一个这种格式的 csv 文件

```
Country State   City    County
X       A       
X       A       R   
X       A       R       X
X       A       R       Y
X       B       
X       B       S   
X       B       S       X 
```

它表示树（包含）关系。现在我需要插入 id 和 parent id，它们反映了这种关系。例如：Y (id=5) 的父级是 R，其 id 为 3。因此 Y 的父级字段为 3。

```
id  parent  Country State   City    County
1   0       X    
2   1       X       A       
3   2       X       A       R   
4   3       X       A       R       X
5   3       X       A       R       Y
6   1       X       B       
7   6       X       B       S   
8   7       X       B       S       X 
```

由于条目数以千计，因此手动执行非常繁琐。我怎样才能在 Python 中做到这一点。即读取文件（第一个块）并输出插入的 id 和父级（上面的第二个代码块）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:59:06.027

这没有吸引力（也不是 Python，所以如果不能以这种方式执行此操作，我们深表歉意），但如果您想避免编写脚本，您可以使用它（假设屏幕截图中的设置）：

```
=INDEX(
       $A$1:$A$9,
      MATCH(
            INDIRECT(ADDRESS(ROW(),COUNTA(C2:F2)+1)),
            INDIRECT(
                  SUBSTITUTE(ADDRESS(1,COUNTA(C2:F2)+1,4) & ":" & ADDRESS(1,COUNTA(C2:F2)+1,4),"1","")),
             0),
        1) 
```

这假设数据的顺序是这样的，即在引用父 ID 之前定义它。要填充`ID`，您可以使用`Fill Series`创建递增列表。同样，这并不漂亮（并且可能不适合您的需要），但这是您可以避免编写脚本的一种方法（如果您需要 Python，JoranBeasley 建议使用 CSV 模块是可行的方法）。

![在此处输入图像描述](../Images/82a6e470b26279182eaa31db052a026e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:31:36.290

**编辑**：这个解决方案应该更清楚。这是对先前解决方案（[1](http://codepad.org/YVXoXFpn)、[2](http://codepad.org/kGANnQ2q)）的返工，而不是一种新方法。一个循环并且没有复制使这个更容易理解。

导入复制导入csv导入StringIO

```
csv_str = """X,,,
X,A,,
X,A,R,
X,A,R,X
X,A,R,Y
X,B,,
X,B,S,
X,B,S,X
"""

reader = csv.reader(StringIO.StringIO(csv_str))

idx = 0
data = []

for row in reader:
    # insert the row id
    row.insert(0, idx + 1)

    # insert a dummy parent id, it will be replaced with the real
    # value later
    row.insert(1, -1)

    # how deep is the current row
    depth = len([r for r in row if r is not ''])
    # insert the depth as the last value in the row
    row.append(depth)

    if idx > 0:
        # if it's not the first row, calculate it's parent

        # calculate the depth of the previous row
        prev_depth = data[idx - 1][-1]
        if depth > prev_depth:
            # if it's deeper than the previous row, then the previous
            # row is the parent row
            row[1] = data[idx - 1][0]
        elif depth == prev_depth:
            # if it's the same depth as the previous row then it has
            # the same parent as the previous row
            row[1] = data[idx - 1][3]
        else:
            # if it's shallower than the previos row, find the
            # nearest previous row with the same depth and use it's
            # parent as this row's parent.
            ridx = idx - 1
            while (prev_depth != depth and ridx >= 0):
                prev_depth = data[ridx - 1][-1]
                ridx -= 1
            row[1] = data[ridx - 1][0]
    else:
        # if it's the first row it's parent is 0
        row[1] = 0

    # store the new row
    data.append(row)
    idx += 1

# write the CSV
output = StringIO.StringIO()
writer = csv.writer(output)
for row in data:
    # skip the depth value in each row
    writer.writerow(row[:-1])

print output.getvalue() 
```

您可以在此处查看代码：http: [//codepad.org/DvGtOw8G](http://codepad.org/DvGtOw8G)

# facebook - 使用 Facebook Graph API 按帖子作者过滤

> ID：12735388
> 
> 赞同：6
> 
> 时间：2012-10-04T20:30:45.480
> 
> 标签：facebook, facebook-graph-api

这是我遇到的问题——我想使用 Graph API 从公司的 Facebook 页面中提取最新的 20 篇墙帖，但仅限于那些由该公司创作的帖子。例如，如果我从 Gray Poupon 的 Facebook 页面拉出，我不想要他们的粉丝贴的任何墙贴，只想要 Gray Poupon 贴的贴。

从我的角度来看，没有办法做到这一点，除了拉太多，然后循环遍历每个结果并检查“来自”数据以确保它与页面名称匹配，直到限制达到 20。但这非常低效并且仍然不能保证结果集为 20。我是否遗漏了什么，或者这是我唯一的选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T08:46:55.357

您究竟从 API 中请求什么 -`/pageid/feed`或`/pageid/posts`……？

后者应该只包含页面自己的帖子。

此外，您可以使用[FQL 流表](https://developers.facebook.com/docs/reference/fql/stream/)来过滤`actor_id`.

# javascript - 编辑：如何动态创建 div？

> ID：12735391
> 
> 赞同：2
> 
> 时间：2012-10-04T20:30:57.833
> 
> 标签：javascript, jquery, html, css

我正在尝试创建条形图。我在处理一堆代码时遇到了问题，但最大的问题是我似乎无法创建一个循环来获取我的 sampleData 数组中的数据并每次创建一个新的 div 并将其附加到下一个 div等等。现在我已经简单地创建了 5 个 div，但我不需要太多。

另外，我想将鼠标悬停在栏上并查看项目数量。

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="testMyJson.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script >
    $(document).ready(function() {
    $.support.cors = true;
    $.ajax({
    url:'https://www.sciencebase.gov/catalog/items?q=Fish&max=20&format=json',
    type: "GET",
    dataType: "json",
    success: function( response ) {
    var sampleData = [25,7,19,22,150];

    //for (var i = 0; i < 5; i++) {
        $('#super-skill-1').animate( { height:sampleData[0] + 'px' } );
        $('#super-skill-2').animate( { height:sampleData[1] + 'px' } );
        $('#super-skill-3').animate( { height:sampleData[2] + 'px' } );
        $('#super-skill-4').animate( { height:sampleData[3] + 'px' } );
        $('#super-skill-5').animate( { height:sampleData[4] + 'px' } );
    //}

    },
    error: function(jqXHR, textStatus, errorThrown) {
            alert("Ajax Call Failed - textStatus =" +  textStatus + ", errorThrown = " + errorThrown);
}
});
});
</script>
<style>
.the-container { width:400px; height:250px; border-style: solid; border-width:3px; border-color:black }
.the-container ul { margin:0; padding:0; list-style:none; }
.the-container li { width:30px; height:250px; margin:0 5px; position:relative; float:left; }
.the-container li a { position:absolute; bottom:0; width:100%; height:0; background-color:#ccc; }
.the-container li a:hover { background-color:green; }
</style>
</head>
<body>
<div class="the-container">
<ul>
<li><a id="super-skill-1" href="#" class="tooltip" title=sampleData[0]></a></li>
<li><a id="super-skill-2" href="#" class="tooltip" title="TESTING!!!!"></a></li>
<li><a id="super-skill-3" href="#" class="tooltip" title="TESTING!!!!"></a></li>
<li><a id="super-skill-4" href="#" class="tooltip" title="TESTING!!!!"></a></li>
<li><a id="super-skill-5" href="#" class="tooltip" title="TESTING!!!!"></a></li>
</ul>
</div>
<form>
<input type="button" id="showdata"value="Show Data" >

</form>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:43:43.700

遍历数组可以由[$.each](http://api.jquery.com/jQuery.each/)函数执行。要从数组创建`div`集合，可以使用以下方法：

`myArray`- 为其创建 div 的数组， `#divContainer`- 放置新 div 的元素的 id

1）使用[追加](http://api.jquery.com/append/)。如果您需要设置应用于新元素的属性或样式，那就太好了

```
$.each(myArray, function(elem) {
      $("#divContainer").append($("<div></div>").css("background", "red").html(elem));
}); 
```

2）使用字符串连接。比追加更快。

```
var result = "";
$.each(myArray, function(elem) {
        result += "<div>" + elem + "</div>";
    });
$("#divContainer").append($(result)); 
```

3) 使用[jquery.tmpl](http://api.jquery.com/jquery.tmpl/) - jQuery 模板插件。快速简单的方法，但需要额外的插件

```
$.tmpl("{{each}}<div>{{html $value}}",
       myArray)
 .appendTo("#divContainer" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:50:50.913

没有真正回答你的问题，但有点奖金。

您不需要将 px 添加到动画或 css、宽度、高度等。如果您将单位排除在外，jQuery 会假定为 px。

你的

```
$('#super-skill-' + i).animate( { height:sampleData[i] + 'px' } ); 
```

例子

```
$('#foo').animate({top: 100, left: 80 }, 1200); 
```

[http://jsfiddle.net/UqPmB/](http://jsfiddle.net/UqPmB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:44:29.917

我删除了 AJAX 调用来测试它。这似乎适用于循环：

```
for (var i = 0; i < 5; i++) {      
    $('#super-skill-' + i).animate( { height:sampleData[i] + 'px' } );
} 
```

我建议让 sampleData 中的索引与 id 中的索引匹配。

```
<li><a id="super-skill-0" href="#" class="tooltip" title=sampleData[0]></a></li>
<li><a id="super-skill-1" href="#" class="tooltip" title="TESTING!!!!"></a></li>
<li><a id="super-skill-2" href="#" class="tooltip" title="TESTING!!!!"></a></li>
<li><a id="super-skill-3" href="#" class="tooltip" title="TESTING!!!!"></a></li>
<li><a id="super-skill-4" href="#" class="tooltip" title="TESTING!!!!"></a></li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:45:04.183

如果您的示例数据来自响应（作为数组），那么您可以这样做

```
for (var i in response) {
    var newDiv = $('<div id="super-skill-'+i+'"/>)
    $('#parentDiv').append(newDiv);
    newDiv.animate( { height:sampleData[i] + 'px' } );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T21:50:03.220

# 不同的方法

您是否考虑过使用**专门设计**用于绘制图表的库，例如[gRaphaël](http://g.raphaeljs.com/)？

使用 gRaphaël 您只需编写：

```
r.barchart(10, 10, 400, 250, [sampleData]); 
```

而且您不在乎sampleData中有多少元素，如何迭代它们，如何缩放它们，考虑到它们的可变数量，条形的良好宽度应该是多少，最大值是多少，所以您知道如何缩放它垂直等。

这就是您的程序的外观，包括悬停时出现的值：

![条形图示例](../Images/d5a9dec1b0464bd39deb5b9b4fa8f3c1.png)

```
var sampleData = [25,7,19,22,150,200,25,77,30,105,5];

var r = Raphael("chart");

// hover handlers:                      
function fin() {
    this.flag = r.popup(this.bar.x, this.bar.y,
                  this.bar.value || "0").insertBefore(this);
}
function fout() {
    this.flag.animate({
        opacity: 0
    }, 600, function() {
        this.remove();
    });
}

r.barchart(10, 10, 400, 250, [sampleData]).hover(fin, fout); 
```

就是这样。

[**看演示**](http://jsbin.com/upimuz/1)

（悬停事件处理程序是 gRaphaël 网站上示例中处理程序的修改版本。）

它适用于 Firefox 3.0+、Safari 3.0+、Opera 9.5+ 和 Internet Explorer 6.0+。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T20:56:10.240

[您可以使用$.each](http://api.jquery.com/jQuery.each/)函数循环并动态添加 li/anchor 标签

```
var sampleData = [25, 7, 19, 22, 150,60,99,56];

$('input[type=button]').click(function() {
    $.each(sampleData, function(i, v) { // loop through each item in array 
                        //i=indexInArray,v=valueOfElement
        var $lis = $('<li><a></a></li>'); // create new li's with children anchors
        $lis.find('a') // find anchor
            .attr('id', 'super-skill-' + (i + 1)) // add id
            .attr('href', '#') // add href
            .attr('title', v) // add title
            .addClass('tooltip'); // add class tooltip
        $('div.the-container ul').append($lis); // add to ul
        $('#super-skill-'+ (i + 1)).animate( { height:v  } ,1000);  // animate
    });
});​ 
```

[JSFIDDLE](http://jsfiddle.net/sav4Y/)

# python - Python 类静态方法

> ID：12735392
> 
> 赞同：58
> 
> 时间：2012-10-04T20:30:59.653
> 
> 标签：python, static

我想创建一种实用程序类，它只包含可由名称类前缀调用的静态方法。看起来我做错了什么:)

这是我的小班：

```
class FileUtility():

    @staticmethod
    def GetFileSize(self, fullName):
        fileSize = os.path.getsize(fullName)
        return fileSize

    @staticmethod
    def GetFilePath(self, fullName):
        filePath = os.path.abspath(fullName)
        return filePath 
```

现在我的“主要”方法：

```
from FileUtility import *
def main():
        path = 'C:\config_file_list.txt'
        dir = FileUtility.GetFilePath(path)
        print dir 
```

我得到一个错误：`unbound method GetFilePath() must be called with FileUtility instance as first argument (got str instance instead)`。

A在这里有几个问题：

1.  我究竟做错了什么？静态方法不应该由类名调用吗？
2.  我真的需要一个实用程序类，还是有其他方法可以在 Python 中实现相同的功能？
3.  如果我尝试更改 main 中的代码，我会得到：`TypeError: GetFilePath() takes exactly 1 argument (2 given)`

新的`main`：

```
from FileUtility import *
def main():
    objFile = FileUtility()
    path = 'H:\config_file_list.txt'
    dir = objFile.GetFilePath(path)
    print dir 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-04T20:35:13.583

您收到错误是因为您`self`在每个函数中都有一个参数。它们是静态的，你不需要它。

然而，这样做的“pythonic”方式不是让一个类充满静态方法，而是让它们在模块中成为自由函数。

```
#fileutility.py:

def get_file_size(fullName):
    fileSize = os.path.getsize(fullName)
    return fileSize

def get_file_path(fullName):
    filePath = os.path.abspath(fullName)
    return filePath 
```

现在，在您的其他 python 文件中（假设 fileutility.py 在同一目录中或在`PYTHONPATH`.

```
import fileutility

fileutility.get_file_size("myfile.txt")
fileutility.get_file_path("that.txt") 
```

它没有特别提到静态方法，但如果你来自不同的语言[PEP 8](http://www.python.org/dev/peps/pep-0008/)，python 风格指南是一本很好的阅读和介绍 python 程序员如何思考的指南。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T20:34:39.873

你真的不应该在 Python 中创建静态方法。您应该做的是将它们放在全局函数级别，然后在调用它们时访问它们所在的模块。

foo.py：

```
def bar():
  return 42 
```

巴兹.py：

```
import foo
print foo.bar() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-04T20:35:57.333

静态方法不获取作为第一个参数传入的对象（无对象）

删除`self`参数，调用应该可以工作。进口问题也很重要。静态评论也相关。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-04T20:34:50.980

在 python 中，类似 java（或其他）`static`的方法没有被广泛使用，因为它们并没有真正的用途。

相反，您应该简单地将“方法”定义为模块中的函数：

```
#module1.py
def fun1():
    return do_stuff()
def fun2(arg):
    return do_stuff_with_arg(arg)

#main.py
import module1
if __name__ == '__main__':
    a = module1.fun()
    print module1.fun2(a) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-07T11:37:24.973

只需`self`在方法定义中删除。您的意图是用作静态。自我是使用该类的实例。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-06T18:56:07.267

只需删除函数定义中的 self 即可。由于您使用静态函数，因此您无需将 self 作为函数的参数传递。所以你的类和函数应该是这样的：

```
class FileUtility():

    @staticmethod
    def GetFileSize(fullName):
        fileSize = os.path.getsize(fullName)
        return fileSize

    @staticmethod
    def GetFilePath(fullName):
        filePath = os.path.abspath(fullName)
        return filePath 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-16T08:55:31.507

如果要使用类中定义的函数，只需创建类的实例并应用该函数。

所以结果是：

```
dir = FileUtility().GetFilePath(path) 
```

只需在您的班级名称后添加 () 即可。

@staticmethod 不需要，因为您使用的是标准函数，而不是静态函数。但在你的情况下，结果是一样的。

# android - 在当前活动中显示对话框

> ID：12735393
> 
> 赞同：0
> 
> 时间：2012-10-04T20:31:00.807
> 
> 标签：android, multithreading, user-interface, android-activity, android-asynctask

我正在写游戏。当用户结束关卡时，会发生以下情况：

1.  发送 POST，检查关卡记录是否被打破。（1-5 秒）
2.  如果是这样，请显示`Dialog`“输入您的姓名”。（快速地）
3.  当用户单击确定时，发送一个带有他的记录的 POST。（1-5 秒）

当用户结束关卡时，他处于`GameActivity`. `checkWorldRecord()`被调用，并在其中`AsyncTask`启动 an：

```
private void checkWorldRecord(final RecordType recordType, final double time, final int level)
{
    new Handler(Looper.getMainLooper()).post(new Runnable()
    {
        @Override
        public void run()
        {
            new DownloadTask(recordType, time, level).execute();
        }
    });
} 
```

`DownloadTask`正在做这三件事，我在一开始就列出了：

```
class DownloadTask extends AsyncTask<Void, Void, Void>
{
    RecordType recordType;
    double time;
    int level;

    public DownloadTask(RecordType recordType, double time, int level)
    {
        super();
        this.recordType = recordType;
        this.time = time;
        this.level = level;
    }

    @Override
    protected Void doInBackground(Void... params)
    {
        try
        {
            if (!Network.isWorldRecord(recordType, time, level)) // 1.
            {
                return null;
            }
        }
        catch (Exception e)
        {
            return null;
        }
        Dialogs.showEnterNameAndSend(GameActivity.this, recordType, time, level, highScores.getGamesPlayed(),
                highScores.getStars()); // 2.
        return null;
    }
} 
```

一切都很好，当用户在游戏结束后等待时，如果他留在`GameActivity`.

**问题是，当：**

1.  用户结束游戏。`checkWorldRecord()`叫做。
2.  在单独的线程中，第一个 POST 开始。
3.  用户按下后退按钮并将活动更改为另一个，到`MainActivity`。
4.  `AsyncTask`完成检查，我们有新的记录。`showEnterNameAndSend()`想先建后展示`AlertDialog`。繁荣。因为我们正在通过`GameActivity`，现在`MainActivity`在顶部：

* * *

```
public static void showEnterNameAndSend(final Activity activity, final RecordType recordType, final double time,
        final int level, final long gamesPlayed, final int stars)
{
    AlertDialog.Builder builder = new AlertDialog.Builder(activity); // BOOM!!!
    final EditText editText = new EditText(activity);
    editText.setFilters(new InputFilter[]
    { new InputFilter.LengthFilter(Const.MAX_NAME_LENGTH) });
    editText.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
    builder.setView(editText);
    builder.setTitle(recordType + " world record!");
    builder.setMessage("Enter your name:");
    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int whichButton)
        {
            String username = editText.getText().toString();
            if (username.equals(""))
            {
                return;
            }

            try
            {
                Network.sendRecord(recordType, username, time, level, gamesPlayed, stars); // 3.
            }
            catch (Exception e)
            {
                showInternetError(activity);
            }
        }
    });
    showDialogOnUiThread(activity, builder);
}

private static void showDialogOnUiThread(Activity activity, final AlertDialog.Builder builder)
{
    activity.runOnUiThread(new Runnable()
    {
        @Override
        public void run()
        {
            builder.show();
        }
    });
} 
```

是的，我也更喜欢通过`Context`，而不是整体`Activity`到`showEnterNameAndSend()`。但是，`showDialogOnUiThread()`（由 调用`showEnterNameAndSend()`）需要`Activity`，以显示`Dialog`UI 线程，使用`activity.runOnUiThread()`。

**如何修复这个？**也许例如有一些方法`getCurrentActivity()`，所以我不必传递一个`Activity`可以已经隐藏的？如果我能以某种方式取消显示对话框，在用户关闭后`GameActivity`，它也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:45:24.300

如果您想通过尝试显示该对话框来防止应用程序崩溃，您可以通过设置标志来解决该问题：

```
public static boolean userIsOut = false; 
```

然后在用户退出该活动时将其设置为 true：

```
@Override
protected void onDestroy() {
    userIsOut = true;
    super.onDestroy();
} 
```

在您的 ShowEnterNameAndSend() 方法中，您可以这样做：

```
if(!userIsOut)
    showDialogOnUiThread(activity, builder); 
```

因此，如果用户退出该活动，则永远不会构建对话框。

但是，如果您坚持显示对话框，那么我想您应该编写自己的 getCurrentActivity() 方法。为此，您可以拥有一个类来保存该变量

```
public static class ActivityHolder {
     public static Activity current;

     public static void setCurrentActivity(Activity act) {
           current = act;
     }

     public static Activity getCurrentActivity() {
           return current;
     }
} 
```

而且你应该在每个活动的 onResume 和 onCreate 方法上设置这个当前活动......所以你总是知道你在哪个活动，你可以使用那个活动来显示对话框。

```
@Override
protected void onResume() {
    ActivityHolder.setCurrentActivity(this);
    super.onResume();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:48:17.110

我想到的两个解决方案：

第一个是创建一个活动（我们称之为 SpecialActivity）。

这个活动将持有一个广播接收器，它将在 onResume 中注册，并将在 onPause 中取消注册。

您的每一个活动都将继承 SpecialActivity 并从 doInBackground 方法获得广播，然后调用该方法显示对话框。

第二个是创建一个 INVISIBLE 活动（我们称之为 DialogActivity），它的唯一职责是在 onCreate 中调用对话框，并在对话框被解除后杀死自己。该活动也将从 doInBackground (startActivity...) 触发。

也许有更简单和智能的解决方案，但这就是我的想法：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:54:57.343

尝试将对话框上的上下文更改为应用程序上下文而不是活动上下文。您可以通过使用包含对应用程序上下文的静态引用的自定义应用程序类（我的偏好）或使用 GameActivity.this.getAppContext() 来获取它

# hover - 在鼠标悬停或悬停在

> ID：12735396
> 
> 赞同：0
> 
> 时间：2012-10-04T20:31:16.573
> 
> 标签：hover, onmouseover, commandlink

其中一个表列在其行中显示 commandLink，其值为长文本。我只显示该文本的一部分，当用户将鼠标悬停在链接上时，我想要一个弹出窗口或显示全文并在鼠标离开时隐藏它的东西。我将如何解决这个问题，尝试了 ajax 事件但没有奏效。感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:06:41.273

如果有人想知道，这就是我最终使用工具提示所做的......

```
 <div id="sub" style="width:175px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;">

            <p:commandLink id ="myLink" value="#{message.subject}" ajax="true" 
                           update=":messageForm:grid">
                <f:setPropertyActionListener value="#{message}"
                                             target="#{myBean.selectedMessage}"/>

            </p:commandLink>

            <p:tooltip for="myLink" value="#{message.subject}" showEffect="slide" hideEffect="slide" style="background-color:#FFFFCC;border:1px dotted #000000;" />
        </div> 
```

# android - 如何在 apk 安装中添加 .sh 并执行它们？

> ID：12735398
> 
> 赞同：1
> 
> 时间：2012-10-04T20:31:24.667
> 
> 标签：android, file, vi, sh

好吧，标题说得很好，但问题是这样的：

我有一个带有命令的 .sh 文件，`su touch /sdcard/test.txt`以查看它是否有效。但是我不知道在用户安装应用程序时如何包含它。我怎么能添加它？我考虑过使用类似的东西：

```
su
touch /sdcard/folder/path/test.sh
vi /sdcard/folder/path/test.sh 
```

并在那里创建 .sh 文件，但我不知道如何发送`esc`密钥才能`:wq`知道如何执行该文件，是的，我的手机已植根。我只需要知道如何在安装 apk 时包含它和/或如何发送`esc`密钥来完成`vi`命令。

谢谢

编辑：我创建了一个`.sh`名为的文件`test.sh`，并创建了一个适用于 root 用户的应用程序。该`test.sh`文件只需要`touch /sdcard/test.txt`查看我的 java 代码是否有效。我用一个按钮创建了一个简单的应用程序，在该按钮内单击我有这个：

```
test.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v)
            {
                try
                {
                    Process proc = Runtime.getRuntime().exec(new String[] {"su","-c","sh ./path where .sh will be/test.sh"});
                    proc.waitFor();
                }
                catch (Exception ex)
                {
                    String TAG = null;
                    Log.i(TAG, "Doesn't work", ex);
                }
            }
        }); 
```

但我不知道如何或在哪里添加我的`test.sh`文件，所以当用户安装我的应用程序时，文件就在那里。我试过包括

```
Process proc = Runtime.getRuntime().exec(new String[] {"su","-c","touch /sdcard/prueba.sh ; vi /sdcard/prubea.sh ; ****Don't know how to edit, use ESC key and :wq****});
                    proc.waitFor(); 
```

现在，当我单击我的按钮时，应用程序一直在运行，等待我结束`vi`命令，但我不知道该怎么做，因为我必须按下`esc`才能`:wq`......希望这能说清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:49:19.963

如果您确定手机上安装了 vi，只需在 ascii 中查找 ESC 的十六进制代码并将其写入输入缓冲区。

这是一个很好的 ASCII 图表[cppreference.com](http://en.cppreference.com/w/cpp/language/ascii)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:01:28.060

听起来您正在尝试在安装时执行操作。This [How to start android service on installation](https://stackoverflow.com/questions/2127044/how-to-start-android-service-on-installation)表明这是不可能的。

# ibm-doors - (DOORS/DXL) 获取突出显示/选定的对象？

> ID：12735400
> 
> 赞同：0
> 
> 时间：2012-10-04T20:31:36.493
> 
> 标签：ibm-doors

是否可以使用 dxl 来获取当前选中的对象？

感谢 Jaambageek 的所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:53:15.953

[http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14591338](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14591338)

# javascript - jQuery - 淡入由类选择的对象

> ID：12735402
> 
> 赞同：0
> 
> 时间：2012-10-04T20:31:42.183
> 
> 标签：javascript, jquery

我试图一次选择几个元素并在窗口加载时淡入它们。显而易见的

```
$('.home').delay(200).fadeIn(400); 
```

没有用，也没有

```
$('.home').each(function(){
    $(this).delay(200).fadeIn(400); 
});​ 
```

最好的方法是什么？

[http://jsfiddle.net/FaqBX/4/](http://jsfiddle.net/FaqBX/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:35:23.147

您需要在它们淡入之前隐藏它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T20:36:02.093

你需要`$(window).ready`代替而`$(window).load`不是document.load。他们需要先隐藏：http: [//jsfiddle.net/f3XhW/](http://jsfiddle.net/f3XhW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:34:54.073

尝试这个：

```
setTimeout(function () {
    $('.home').fadeIn(400);
}, 200); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:36:46.670

一个肮脏的解决方案是先隐藏元素，然后使用fadeIn：

```
$(window).load(function() {
    $('.home').attr('style', 'display: none;');//to hide them
    // First attempt
    $('.home').delay(200).fadeIn(400);
    // Second attempt
    $('.home').each(function(){
        $(this).delay(200).fadeIn(400); 
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T20:36:46.850

试试这个，记得在你的 .home 上有 display:none

```
 $(window).ready(function() {
     $('.home').delay(200).fadeIn(400);
 });​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T20:37:16.637

在 jsFiddle 上，您不需要`window.load`，因为它是默认设置。

```
$('.home').fadeTo(0, 0).delay(1000).fadeTo(400, 1); 
```

**演示：http:** [//jsfiddle.net/elclanrs/FaqBX/9/](http://jsfiddle.net/elclanrs/FaqBX/9/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T20:37:34.000

试试这个小提琴：

[http://jsfiddle.net/FaqBX/7/](http://jsfiddle.net/FaqBX/7/)

您需要先隐藏元素（作为 user1689607），然后我将您的 fiddle 更改为 no wrap（head），因为它已经是 window.load。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-04T20:37:36.140

在淡入之前隐藏它们并使用准备好的文档而不是 window.load。

```
$(function() {
    // First attempt
    $('.home').delay(200).fadeIn(400);
});​ 
```

[http://jsfiddle.net/c7LzQ/](http://jsfiddle.net/c7LzQ/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-04T20:39:44.157

[http://jsfiddle.net/FaqBX/13/](http://jsfiddle.net/FaqBX/13/)

在 CSS 中首先隐藏：

```
.home { display: none; } 
```

如果您必须使用延迟：

```
window.setTimeout(function() {
    $('.home').fadeIn(400);
}, 200); 
```

否则：

```
 $('.home').fadeIn(400); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-04T20:42:48.660

在显示之前用 CSS 隐藏它。如果它已经可见，则不能淡入它。

HTML：

```
<div class="home">
    <h1>Home</h1>
</div>
<div class="home">
    <p>This is the home.</p>
</div> 
```

Javascript：

```
$(function() {
    $('.home').fadeIn(400);
});​ 
```

CSS：`.home {display:none;}`​</p>

# php - php从远程目录获取所有文件

> ID：12735404
> 
> 赞同：0
> 
> 时间：2012-10-04T20:31:47.053
> 
> 标签：php, image

今天早上我已经搜索了 3 个多小时，并尝试了 10 多种不同的设置来获取和显示来自 url 的图像列表，但它们都不能正常工作。我要么最终没有显示信息，要么出现 500 错误。有人可以指点我一个例子或在这里帮助我如何正确地做到这一点。file_get_contents 不是一个可行的选择。

示例目录：[http ://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/](http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/)

我知道该目录中的文件：001.jpg、002.jpg、003.jpg

我希望输出是文件的确切 url。

如果需要更多信息，请告诉我，我不能 100% 确定如何正确解释它，哈哈。

编辑：

好的，所以我想我实际上想要做的是检查所有图像标签的 url 并显示一个包含该图像的完整 url 的列表。

刚开始使用这个 url+images+php 的东西，所以请不要用没有评论的投票锤对我造成太大的打击，哈哈。

我试过的代码：

```
<?php
/*
Credits: Bit Repository
URL: http://www.bitrepository.com/
*/

$url = $location;

// Fetch page
$string = FetchPage($url);

// Regex that extracts the images (full tag)
$image_regex_src_url = '/<img[^>]*'.

'src=[\"|\'](.*)[\"|\']/Ui';

preg_match_all($image_regex, $string, $out, PREG_PATTERN_ORDER);

$img_tag_array = $out[0];

echo "<pre>"; print_r($img_tag_array); echo "</pre>";

// Regex for SRC Value
$image_regex_src_url = '/<img[^>]*'.

'src=[\"|\'](.*)[\"|\']/Ui';

preg_match_all($image_regex_src_url, $string, $out, PREG_PATTERN_ORDER);

$images_url_array = $out[1];

echo "<pre>"; print_r($images_url_array); echo "</pre>";

// Fetch Page Function

function FetchPage($path)
{
$file = fopen($path, "r"); 

if (!$file)
{
exit("The was a connection error!");
} 

$data = '';

while (!feof($file))
{
// Extract the data from the file / url

$data .= fgets($file, 1024);
}
return $data;
}
?> 
```

它返回了一个空白页

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:21:48.110

松散地基于您已经尝试过的代码（但充满了问题）。这会抓取 URL 的全部内容`$url`，解析出`<img>` `src`属性，然后输出它们。

因为这个特定的网络主机使用`<base href=""/>`标记来重置页面上所有 URL 的基本部分，所以我添加了一个`$base`变量，您应该将其设置为基本标记的内容。

此外，看起来这个特定的网络主机有一些非常智能的反盗链，所以并不是所有的图像都可见。

但！试一试，让我知道它是否满足您的需要，以及任何问题。

```
<?php

$url = 'http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/';
$base = 'http://www.webtoonlive.com/';

// Pull in the external HTML contents
$contents = file_get_contents( $url );

// Use Regular Expressions to match all <img src="???" />
preg_match_all( '/<img[^>]*src=[\"|\'](.*)[\"|\']/Ui', $contents, $out, PREG_PATTERN_ORDER);

foreach ( $out[1] as $k=>$v ){ // Step through all SRC's

    // Prepend the URL with the $base URL (if needed)
    if ( strpos( $v, 'http://' ) !== true ) $v = $base . $v;

    // Output a link to the URL
    echo '<a href="' . $v . '">' . $v . '</a><br/>';
} 
```

样本输出：

```
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/000.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/001.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/002.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/003.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/004.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/005.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/006.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/007.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/008.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/009.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/010.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/011.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/012.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/013.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/014.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/015.jpg
http://www.webtoonlive.com/webtoon/fantasy_world_survival/ch02/016.jpg 
```

# plone - 在 Plone 4.1.4 中呈现 404 页面时出现“未找到”站点错误

> ID：12735405
> 
> 赞同：1
> 
> 时间：2012-10-04T20:31:49.377
> 
> 标签：plone, zope, buildout, diazo

***问题：***每当用户导航到错误页面时，而不是在 plone 中显示“找不到页面”消息，而是显示此 zope 错误消息：

```
NotFound('  <h2>Site Error</h2>\n  <p>An error was encountered while publishing this resource.\n  </p>\n  <p><strong>Resource not found</strong></p>\n\n  Sorry, the requested resource does not exist.<p>Check the URL and try again.</p><p><b>Resource:</b> http://www.caseware.com/ddddd</p>\n  <hr noshade="noshade"/>\n\n  <p>Troubleshooting Suggestions</p>\n\n  <ul>\n  <li>The URL may be incorrect.</li>\n  <li>The parameters passed to this resource may be incorrect.</li>\n  <li>A resource that this resource relies on may be\n      encountering an error.</li>\n  </ul>\n\n  <p>For more detailed information about the error, please\n  refer to the error log.\n  </p>\n\n  <p>If the error persists please contact the site maintainer.\n  Thank you for your patience.\n  </p>',) (Also, the following error occurred while attempting to render the standard error message, please see the event log for full details: ) 
```

同时，发生错误的实例的日志文件显示以下堆栈跟踪：

```
2012-10-03T13:12:06 ERROR root Exception while rendering an error message
Traceback (most recent call last):
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/OFS/SimpleItem.py", line 242, in raise_standardErrorMessage
    v = s(**kwargs)
File "/home/alex/projects/production/plone4_dev/eggs/Products.CMFCore-2.2.5-py2.6.egg/Products/CMFCore/FSPythonScript.py", line 130, in __call__
    return Script.__call__(self, *args, **kw)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Shared/DC/Scripts/Bindings.py", line 322, in __call__
    return self._bindAndExec(args, kw, None)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Shared/DC/Scripts/Bindings.py", line 359, in _bindAndExec
    return self._exec(bound_data, args, kw)
File "/home/alex/projects/production/plone4_dev/eggs/Products.PythonScripts-2.13.0-py2.6.egg/Products/PythonScripts/PythonScript.py", line 344, in _exec
    result = f(*args, **kw)
File "Script (Python)", line 34, in standard_error_message
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Shared/DC/Scripts/Bindings.py", line 322, in __call__
    return self._bindAndExec(args, kw, None)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Shared/DC/Scripts/Bindings.py", line 359, in _bindAndExec
    return self._exec(bound_data, args, kw)
File "/home/alex/projects/production/plone4_dev/eggs/Products.CMFCore-2.2.5-py2.6.egg/Products/CMFCore/FSPageTemplate.py", line 240, in _exec
    result = self.pt_render(extra_context=bound_names)
File "/home/alex/projects/production/plone4_dev/eggs/Products.CMFCore-2.2.5-py2.6.egg/Products/CMFCore/FSPageTemplate.py", line 180, in pt_render
    self, source, extra_context
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/PageTemplates/PageTemplate.py", line 79, in pt_render
    showtal=showtal)
File "/home/alex/projects/production/plone4_dev/eggs/zope.pagetemplate-3.5.2-py2.6.egg/zope/pagetemplate/pagetemplate.py", line 113, in pt_render
    strictinsert=0, sourceAnnotations=sourceAnnotations)()
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 271, in __call__
    self.interpret(self.program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 888, in do_useMacro
    self.interpret(macro)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 533, in do_optTag_tal
    self.do_optTag(stuff)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 518, in do_optTag
    return self.no_tag(start, program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 531, in do_optTag_tal
    self.no_tag(stuff[-2], stuff[-1])
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 742, in do_insertStructure_tal
    structure = self.engine.evaluateStructure(expr)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/PageTemplates/Expressions.py", line 218, in evaluateStructure
    text = super(ZopeContext, self).evaluateStructure(expr)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tales-3.5.1-py2.6.egg/zope/tales/tales.py", line 696, in evaluate
    return expression(self)
File "/home/alex/projects/production/plone4_dev/eggs/zope.contentprovider-3.7.2-py2.6.egg/zope/contentprovider/tales.py", line 80, in __call__
    return provider.render()
File "/home/alex/projects/production/plone4_dev/eggs/plone.app.viewletmanager-2.0.2-py2.6.egg/plone/app/viewletmanager/manager.py", line 85, in render
    return u'\n'.join([viewlet.render() for viewlet in self.viewlets])
File "/home/alex/projects/production/plone4_dev/eggs/zope.browserpage-3.12.2-py2.6.egg/zope/browserpage/simpleviewclass.py", line 44, in __call__
    return self.index(*args, **kw)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/Five/browser/pagetemplatefile.py", line 125, in __call__
    return self.im_func(im_self, *args, **kw)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/Five/browser/pagetemplatefile.py", line 59, in __call__
    sourceAnnotations=getattr(debug_flags, 'sourceAnnotations', 0),
File "/home/alex/projects/production/plone4_dev/eggs/zope.pagetemplate-3.5.2-py2.6.egg/zope/pagetemplate/pagetemplate.py", line 113, in pt_render
    strictinsert=0, sourceAnnotations=sourceAnnotations)()
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 271, in __call__
    self.interpret(self.program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 533, in do_optTag_tal
    self.do_optTag(stuff)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 518, in do_optTag
    return self.no_tag(start, program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 531, in do_optTag_tal
    self.no_tag(stuff[-2], stuff[-1])
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 742, in do_insertStructure_tal
    structure = self.engine.evaluateStructure(expr)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/PageTemplates/Expressions.py", line 218, in evaluateStructure
    text = super(ZopeContext, self).evaluateStructure(expr)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tales-3.5.1-py2.6.egg/zope/tales/tales.py", line 696, in evaluate
    return expression(self)
File "/home/alex/projects/production/plone4_dev/eggs/zope.contentprovider-3.7.2-py2.6.egg/zope/contentprovider/tales.py", line 80, in __call__
    return provider.render()
File "/home/alex/projects/production/plone4_dev/eggs/zope.viewlet-3.7.2-py2.6.egg/zope/viewlet/manager.py", line 124, in render
    return self.template(viewlets=self.viewlets)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/Five/browser/pagetemplatefile.py", line 125, in __call__
    return self.im_func(im_self, *args, **kw)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/Five/browser/pagetemplatefile.py", line 59, in __call__
    sourceAnnotations=getattr(debug_flags, 'sourceAnnotations', 0),
File "/home/alex/projects/production/plone4_dev/eggs/zope.pagetemplate-3.5.2-py2.6.egg/zope/pagetemplate/pagetemplate.py", line 113, in pt_render
    strictinsert=0, sourceAnnotations=sourceAnnotations)()
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 271, in __call__
    self.interpret(self.program)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 819, in do_loop_tal
    iterator = self.engine.setRepeat(name, expr)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tales-3.5.1-py2.6.egg/zope/tales/tales.py", line 682, in setRepeat
    expr = self.evaluate(expr)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tales-3.5.1-py2.6.egg/zope/tales/tales.py", line 696, in evaluate
    return expression(self)
File "/home/alex/projects/production/plone4_dev/eggs/zope.tales-3.5.1-py2.6.egg/zope/tales/expressions.py", line 217, in __call__
    return self._eval(econtext)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/PageTemplates/Expressions.py", line 155, in _eval
    return render(ob, econtext.vars)
File "/home/alex/projects/production/plone4_dev/eggs/Zope2-2.13.12-py2.6.egg/Products/PageTemplates/Expressions.py", line 117, in render
    ob = ob()
File "/home/alex/projects/production/plone4_dev/eggs/Products.ResourceRegistries-2.0.6-py2.6.egg/Products/ResourceRegistries/browser/scripts.py", line 27, in scripts
    content = registry.getInlineResource(script.getId(), context)
File "/home/alex/projects/production/plone4_dev/eggs/Products.ResourceRegistries-2.0.6-py2.6.egg/Products/ResourceRegistries/tools/BaseRegistry.py", line 856, in getInlineResource
    output = self.getResourceContent(item, context)
File "/home/alex/projects/production/plone4_dev/eggs/Products.ResourceRegistries-2.0.6-py2.6.egg/Products/ResourceRegistries/tools/JSRegistry.py", line 246, in getResourceContent
    output = BaseRegistryTool.getResourceContent(self, item, context, original)
File "/home/alex/projects/production/plone4_dev/eggs/Products.ResourceRegistries-2.0.6-py2.6.egg/Products/ResourceRegistries/tools/BaseRegistry.py", line 593, in getResourceContent
    self._restoreCachingHeaders(original_headers, if_modified)
File "/home/alex/projects/production/plone4_dev/eggs/Products.ResourceRegistries-2.0.6-py2.6.egg/Products/ResourceRegistries/tools/BaseRegistry.py", line 661, in _restoreCachingHeaders
    assert int(self.REQUEST.RESPONSE.getStatus()) / 100 == 2
AssertionError 
```

最近几天我一直在尝试解决这个问题，但主要问题是——这个错误只发生在生产配置中，我无法在开发环境中重现它。

当网站升级为使用重氮的新设计时，问题就开始了，它也已从 Centos 5.6 移至 Centos 6，但我认为这并不重要。否则 bulidout.cfg 保持不变。

当我试图在本地开发机器上重现错误时，我只能在实例以 debug-mode = off 运行时触发它，并且进程必须在后台运行，只要它在前台运行，错误就不会'不会被触发并显示正确的 404 错误消息；基本上一切都在开发环境中运行良好，但是一旦代码在生产中移动，404页面就会被破坏。

环境信息：

```
Plone 4.1.4
Zope 2.13.12
Python 2.6.7 (r267:88850, Dec 13 2011, 17:15:07) [GCC 4.6.2] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:08:04.553

断言行是 Plone 中一个长期存在的问题，我没有遵循所有错综复杂的问题。目前还有一个涉及断言的开放错误：

*   [Products.ResourceRegistries：“内联”资源因“重定向”而失败](https://dev.plone.org/ticket/12772)

我*怀疑*您有一个内联呈现的 JavaScript 资源，包括在错误页面中。似乎资源注册表断言没有考虑非 200 页面上的内联响应（例如 404 Not Found 响应）。

上述问题附有补丁。如果补丁对你有用，我建议你对票发表评论并声明它对你有用。请确认您的资源注册表中有内联 JavaScript 资源。

# objective-c - 获取 NSBezierPath 长度的最佳方法是什么？

> ID：12735407
> 
> 赞同：1
> 
> 时间：2012-10-04T20:31:52.133
> 
> 标签：objective-c, geometry, nsbezierpath

我使用的路径没有曲线；只是一系列连接点。

我目前使用的方法涉及遍历路径的 NZBezierPathElement 组件并获取每个点，但这很笨拙 - 特别是因为我必须保存最后一个点才能获得每个新距离。如果你们中的任何人知道更好的方法，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:22:20.507

您的算法听起来完全正确-路径的长度是每对点之间的长度之和。很难理解为什么你认为这是“笨拙”的，所以这里是伪代码中的算法，以防万一：

```
startPoint <- point[1]
length <- 0
repeat with n <- 2 to number of points
   nextPoint <- point[n]
   length <- length + distanceBetween(startPoint, nextPoint)
   startPoint <- nextPoint // hardly clumsy
end repeat 
```

也许你做的不一样？

当前点的概念是`NSBezierPath`（以及 SVG、海龟图形等）及其相对命令（例如相对移动、相对线）的基础 - 没有逃避它！

# ios - 未找到符号：_objc_retainAutoreleasedReturnValue

> ID：12735408
> 
> 赞同：1
> 
> 时间：2012-10-04T20:31:57.687
> 
> 标签：ios, xcode

我以前能够在 iOS 4.3 设备上运行我的代码，但现在我在运行时收到此错误：

```
 Symbol not found: _objc_retainAutoreleasedReturnValue 
```

该项目使用 6.0 的基本 sdk 和 4.0 的部署目标。

也许不是巧合，但这是我升级到 XCode 4.5 后第一次尝试在此设备上运行。

我在stackoverflow中查看了包含_objc_retainAutoreleasedReturnValue的先前问题，但他们似乎提到了@autoreleasepool，我没有在任何地方明确使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:18:14.570

您的 App 目标的部署目标应该与您的项目文件的部署目标相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:17:38.657

检查您包含的库是否与您的主项目具有相同的部署目标要求。

# java - 一个长时间运行的java进程的配置系统

> ID：12735410
> 
> 赞同：1
> 
> 时间：2012-10-04T20:32:01.420
> 
> 标签：java, configuration-management, apache-zookeeper

我正在编写一个长时间运行的 java 进程，该进程将在内存队列上进行轮询，并将消耗队列中的项目。我想使用 zookeeper 在此服务中进行动态配置。我已经编写了一个运行线程并监视 zookeeper 节点的 java 类。每次对 zookeeper 节点进行更改时，都会触发一个事件，并且我会获得 zookeeper 节点数据的最新内容。现在的问题是：

1.  znode 数据的编码应该是什么，一种选择是使用类似系统的 .properties 文件，因此只需键值对，然后在我的侦听器中将这些键设置在配置类中更改。

2.  将此数据写入文件然后将该配置文件包含在我的java程序中是否有意义？如果我这样做，当配置更改时，我将不得不以某种方式刷新磁盘中的内容。我没有看到将这些配置写入本地文件有什么特别的好处。Zookeeper 服务器有足够的冗余，当服务被反弹时，配置刷新线程可以获取该 znode 的所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:34:28.320

1) 属性文件可以正常工作。java.util.Properties 具有从流中加载和保存的便捷方法。您可能还想考虑将配置存储在 yaml 文件中，它允许的不仅仅是简单的键/值对。

2) 没有理由将配置信息存储在两个地方，如果这样做，就会混淆哪个是真正的配置文件。

# algorithm - 为 Rabin-Karp 字符串搜索算法找到一个好的散列函数

> ID：12735414
> 
> 赞同：1
> 
> 时间：2012-10-04T20:32:08.237
> 
> 标签：algorithm, hash, rabin-karp

有哪些好的散列函数可用于实现[Rabin-Karp 字符串搜索算法](http://en.wikipedia.org/wiki/Rabin-Karp_string_search_algorithm)？我只知道多项式散列，但它有一些缺陷——最值得注意的是，如果散列是以 ​​2 ^(64)为模完成的，则有一个测试可以保证经常产生冲突（并且使用另一个模数是不切实际的，因为`mod`操作非常昂贵） . 那么，有没有一个**快速、易于编写的**好哈希函数呢？

PS 我知道 buzhash，但我想知道是否还有其他选择......</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:37:46.387

由于它不是安全哈希，您只需要一个“好的”指纹，我建议使用[Tabulation hashing](http://en.wikipedia.org/wiki/Tabulation_hashing)之类的东西。孔操作将比 mod 操作快几倍。

# egit - Egit、Eclipse文件夹结构

> ID：12735418
> 
> 赞同：0
> 
> 时间：2012-10-04T20:32:17.640
> 
> 标签：egit

假设我在 c:\dev\ 中有几个项目并希望将它们保留在那里（这是我的 Eclipse 工作区）

设置 egit 最不方便的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:23:19.363

原来 egit 中有一个[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=349404)，您无法在现有文件夹上创建 git repo

您需要使用 msysgit 在命令行上创建 git repo，使用 git init

然后您可以按照用户指南使用 egit

# ffmpeg - 如何通过 HTTP 流式传输非常长的 H.264 视频而不需要很长的启动时间？（或：MOOV 原子太大）

> ID：12735427
> 
> 赞同：3
> 
> 时间：2012-10-04T20:32:46.783
> 
> 标签：ffmpeg, streaming, h.264, mp4, video-encoding

我想流式传输通常长达 10 小时的公开会议视频。用户通常会从视频中间的某个时间点开始并经常跳来跳去。

MP4 容器中的 H.264 似乎是当前编码流视频的最佳选择（对吗？）。但这些都是大文件——一个文件大约 1.3GB——文件开头的元数据（MOOV atom）本身大约是 40MB。如果我理解正确，客户需要先下载完整的元数据，然后才能在文件的其余部分中查找。显然，在开始流式传输之前必须下载 40MB 是不可接受的。

（我的流媒体测试使用 VLC 和 Chrome 中的 HTML5 标签。）

我正在使用 avconv 对文件进行编码，除了告诉它要使用哪些编码器（x264 和 libfaac）之外，我目前没有提供其他设置。然后我使用 qt-faststart 将元数据移动到文件的开头。

有没有办法让 MOOV 原子变小？

如果没有，是否有其他策略可以使用（例如，将长视频分成几个文件，这是经常做的事情？对于寻找一整天视频的用户而言，这似乎是一种真正的痛苦）？

还是我应该使用不同的编解码器或容器？

谢谢！

这是来自 AtomicParsley 的文件头结构的细分：

```
Atom ftyp @ 0 of size: 32, ends @ 32
Atom moov @ 32 of size: 40157673, ends @ 40157705
     Atom mvhd @ 40 of size: 108, ends @ 148
     Atom iods @ 148 of size: 24, ends @ 172
     Atom trak @ 172 of size: 20156304, ends @ 20156476
         Atom tkhd @ 180 of size: 92, ends @ 272
         Atom edts @ 272 of size: 36, ends @ 308
             Atom elst @ 280 of size: 28, ends @ 308
         Atom mdia @ 308 of size: 20156168, ends @ 20156476
             Atom mdhd @ 316 of size: 32, ends @ 348
             Atom hdlr @ 348 of size: 45, ends @ 393
             Atom minf @ 393 of size: 20156083, ends @ 20156476
                 Atom vmhd @ 401 of size: 20, ends @ 421
                 Atom dinf @ 421 of size: 36, ends @ 457
                     Atom dref @ 429 of size: 28, ends @ 457
                 Atom stbl @ 457 of size: 20156019, ends @ 20156476
                     Atom stsd @ 465 of size: 147, ends @ 612
                         Atom avc1 @ 481 of size: 131, ends @ 612
                             Atom avcC @ 567 of size: 45, ends @ 612
                     Atom stts @ 612 of size: 6115608, ends @ 6116220
                     Atom stss @ 6116220 of size: 16960, ends @ 6133180
                     Atom ctts @ 6133180 of size: 5683824, ends @ 11817004
                     Atom stsc @ 11817004 of size: 28, ends @ 11817032
                     Atom stsz @ 11817032 of size: 4169724, ends @ 15986756
                     Atom stco @ 15986756 of size: 4169720, ends @ 20156476
     Atom trak @ 20156476 of size: 20001133, ends @ 40157609
         Atom tkhd @ 20156484 of size: 92, ends @ 20156576
         Atom mdia @ 20156576 of size: 20001033, ends @ 40157609
             Atom mdhd @ 20156584 of size: 32, ends @ 20156616
             Atom hdlr @ 20156616 of size: 45, ends @ 20156661
             Atom minf @ 20156661 of size: 20000948, ends @ 40157609
                 Atom smhd @ 20156669 of size: 16, ends @ 20156685
                 Atom dinf @ 20156685 of size: 36, ends @ 20156721
                     Atom dref @ 20156693 of size: 28, ends @ 20156721
                 Atom stbl @ 20156721 of size: 20000888, ends @ 40157609
                     Atom stsd @ 20156729 of size: 96, ends @ 20156825
                         Atom mp4a @ 20156745 of size: 80, ends @ 20156825
                             Atom esds @ 20156781 of size: 44, ends @ 20156825
                     Atom stts @ 20156825 of size: 9348168, ends @ 29504993
                     Atom stsc @ 29504993 of size: 28, ends @ 29505021
                     Atom stsz @ 29505021 of size: 5326296, ends @ 34831317
                     Atom stco @ 34831317 of size: 5326292, ends @ 40157609
     Atom udta @ 40157609 of size: 96, ends @ 40157705
         Atom meta @ 40157617 of size: 88, ends @ 40157705
             Atom hdlr @ 40157629 of size: 33, ends @ 40157662
             Atom ilst @ 40157662 of size: 43, ends @ 40157705
                 Atom ©too @ 40157670 of size: 35, ends @ 40157705
                     Atom data @ 40157678 of size: 27, ends @ 40157705
Atom free @ 40157705 of size: 8, ends @ 40157713
Atom mdat @ 40157713 of size: 1320096566, ends @ 1360254279 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:44:16.710

如果您有能力使用像 jwplayer 这样的 Flash 播放器，请尝试使用 flv 格式。您仍然可以在其中使用 H.264/AAC 组合。但是，您的文件将立即开始流式传输。您不必重新编码。只是重新混音

```
ffmpeg -i input.mp4 -acodec copy -vcodec copy -bsf h264_mp4toannexb out.flv 
```

如果您必须使用 mp4 文件，那么您应该使用分段的 mp4 文件来实现它。类似于流畅的流媒体[尽​​管这也是出于不同的目的]。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T20:44:27.897

您呈现录音的方式与预缓存的方式有很大关系。您是否使用播放列表格式最终链接到内容？VideoLan 客户端的反应比事实上的电影播放器​​好还是差。

HTML5 是否是一个选项，以便您可以立即通过简单的 javascript 提供搜索选项？对于大多数支持 HTML5 的浏览器来说，它在保持可观的缓冲区长度方面做得非常好。

[http://en.wikipedia.org/wiki/HTML5_video](http://en.wikipedia.org/wiki/HTML5_video)

从长远来看，我建议获得一个合适的 YouTube 或 Vimeo 帐户并在那里发布内容，以利用他们的基础设施并大幅降低您自己的带宽需求。

# django - textarea标签内的Django模板换行符

> ID：12735431
> 
> 赞同：4
> 
> 时间：2012-10-04T20:32:57.697
> 
> 标签：django, django-templates

我有一个带有换行符的变量，并试图将它插入到 textarea 标记中。

```
<textarea>{{ var_name }}</textarea> 
```

我希望保留换行符，使其看起来与显示变量时相同

```
<div>{{ var_name|linebreaks }}</div> 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:32:16.687

能够通过将 \n 替换为 html 代码来解决此问题：

```
stringname.replace("\n", "&#10"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:58:20.607

在文本区域内，`\n`显示为换行符。只要变量中的换行符编码为`\n`，它就应该正确显示。如果它们的编码不同，您可以制作自己的自定义模板过滤器。

**PS**：不要[`linebreaks`](https://docs.djangoproject.com/en/3.0/ref/templates/builtins/#linebreaks)在文本区域内使用过滤器，因为它会替换`\n`为 html 换行符 - `<br>`。

# autoconf - 如何打包多个语句

> ID：12735432
> 
> 赞同：2
> 
> 时间：2012-10-04T20:32:59.433
> 
> 标签：autoconf, m4

我想在 a 中重新组合多个语句`[]`：

```
AC_ARG_WITH(
    [float],
    [AS_HELP_STRING(
        [--with-float],
        [use float instead of doubles to store polynoms coefficients])],
    [real=float], <--- here I'd like to add an AC_DEFINE
    [real=double]) 
```

我的问题是，我不确定最好的方法。我想我可以使用`;`，但这对于`m4sh`脚本来说似乎并不真正地道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:49:59.267

使用换行符：

```
AC_ARG_WITH(
    [float],
    [AS_HELP_STRING(
        [--with-float],
        [use float instead of doubles to store polynoms coefficients])],
    [real=float]
    [AC_DEFINE....],
    [real=double]) 
```

也很常见的写成：

```
 AC_ARG_WITH([
        float
        ],[
        AS_HELP_STRING(
            [--with-float],
            [use float instead of doubles to store polynoms coefficients])
        ],[
        real=float
        AC_DEFINE....
        ],[
        real=double
]) 
```

# mysql - 列名“范围”的MySQL问题

> ID：12735437
> 
> 赞同：2
> 
> 时间：2012-10-04T20:33:33.523
> 
> 标签：mysql, create-table

当我尝试运行此脚本时，如果我删除或更改名称，我会在“范围”处收到错误，我可以运行脚本，但是应用程序需要此列来存储数据。知道如何将其插入 MySQL 吗？

错误代码：1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 22 行的 '"range" CHAR(5) NOT NULL, range_max_value NUMERIC(18,3)' 附近使用正确的语法

```
CREATE TABLE My_table (
  chart_id                INTEGER NOT NULL,
  u_range                 CHAR(5),
  l_range                 CHAR(5),
  "range"               CHAR(5) NOT NULL,
  range_max_val         NUMERIC(18,3),
  range_min_val         NUMERIC(18,3),
  PRIMARY KEY (chart_id)
); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T20:35:47.187

Range 是一个保留关键字，需要使用反引号进行转义。

```
CREATE TABLE My_table (
  chart_id                INTEGER NOT NULL,
  u_range                 CHAR(5),
  l_range                 CHAR(5),
  `range`               CHAR(5) NOT NULL,
  range_max_val         NUMERIC(18,3),
  range_min_val         NUMERIC(18,3),
  PRIMARY KEY (chart_id)
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T20:36:30.993

您应该查看[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)列表。*范围*就是其中之一。您需要使用刻度线对其进行转义：

```
CREATE TABLE My_table (
  chart_id                INTEGER NOT NULL,
  u_range                 CHAR(5),
  l_range                 CHAR(5),
  `range`               CHAR(5) NOT NULL,
  range_max_val         NUMERIC(18,3),
  range_min_val         NUMERIC(18,3),
  PRIMARY KEY (chart_id)
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T20:36:31.280

`RANGE`是保留字。 [http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# css - 在 LESS Mixins 中实现 css 行为属性

> ID：12735449
> 
> 赞同：1
> 
> 时间：2012-10-04T20:34:01.783
> 
> 标签：css, less

我一直在玩 LESS，看看如何转换我在工作中管理的网站。

当我学习`behavior: url(...blah)`css 的能力时，我认为我已经读过出于性能原因最好尽可能少地使用它（我现在在任何地方都找不到它，所以不确定它是否仍然有效）。

所以考虑到这个假设，我有点担心将 CSS 转换为 LESS Mixin。这真的是对性能的影响，还是我可以安全地做到这一点而不必担心网站 UI 的速度变慢？

我将要转换的示例...

```
.FullRoundedBorder
{
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
    -khtml-border-radius: 8px;
    border-radius: 8px;
    behavior: url(/Content/CSS/PIE/PIE.htc);
} 
```

对于那些还没有看过它的人来说， [PIE](http://css3pie.com/about/)是一个很棒的圆形边框跨浏览器功能插件（主要是它修复了 IE 6-8）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:03:17.267

使用“行为”属性本身并不是主要的性能问题——您可能一直在考虑“表达”，这确实对性能非常不利。

但是，您确实需要检查您引入的特定 .htc 的性能。本质上，.htc 文件是在 CSS 选择器匹配元素时执行的 JavaScript 片段。这意味着选择器匹配的元素越多，脚本运行的次数就越多。

对于像 PIE.htc 这样的复杂脚本，很容易在太多元素上使用它，从而导致运行时出现明显的延迟。与任何其他脚本一样，您需要仔细考虑应用它的范围，当然，在应用它之后还要测试您网站的性能。

我对 PIE.htc 的经验是，在大约 15 个或更少的元素上使用它并不明显，但除此之外，您会开始注意到延迟。您通常可以采取一些措施来减轻影响，例如使用[-pie-lazy-init](http://css3pie.com/documentation/supported-css3-features/#pie-lazy-init)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:03:02.167

是的，PIE 会减慢 IE6-8 中的 UI。叠加的效果越多，影响就越大。它不应该影响其他浏览器。

去年我在一个（大！）项目中使用了 PIE，以在 IE6-8 中获得一些效果，但在今年重新访问该项目时，我决定放弃所有 PIE 的使用。我发现它不稳定且不一致——例如，它会随机无法呈现“立即付款”按钮。因此，IE 用户将随机无法支付账单。我切换回 Modernizr 并使用 < IE 9 的图像后备。这个故事的寓意是：PIE 看起来很棒，但要谨慎使用它，并且只用于非关键元素。出错时很难调试。

如果您发现您的 UI 太慢，您也可以轻松尝试并禁用它。如果你的 mixin 很好，它应该只是几行代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T20:57:28.683

我与 Less 进行了广泛的合作。我喜欢它如何将大型 CSS 分解成更具逻辑性和可读性的块。有几点需要考虑：

1）您将处理较少的服务器端还是客户端？我更倾向于减少 UI/浏览器的负载，因为您根本无法控制用户正在运行的机器、浏览器的类型，并且它会在您的 UI 实现中增加更多的故障点。越简单总是越好。如果您的 UI 是针对少量受众的，那么您应该不会看到性能受到影响。在大多数情况下，当纯 CSS 太大而无法轻松维护和阅读并因此接受轻微的性能损失时，我将使用 Less，尤其是在用户群微不足道的情况下。对于高流量网站，我可能会重写或转换回 CSS 并发布直接的 CSS。

2）Less真的有必要吗？你是在加载一堆翻译代码还是在你的服务器上运行一个额外的进程，这样你就不必写几行额外的 CSS 了？？？在我看来，这还不够合理。当我看到开发人员加载整个库只是因为他们不想编写“getElementByID()”纯原生 JavaScript 时，我经常质疑使用其他“让你的生活更轻松”的库/工具，如 JQuery。

一切都有它的位置，它在项目/实施中使用。我建议列出优点，然后消除那些可以通过本机浏览器功能（纯 CSS 和 JS）轻松实现的优点。更小更轻总是更好更快，特别是如果您也在移动和旧平台上运行。

我希望这会有所帮助。

# url - 使用带有编码 URL 的 CURL 删除

> ID：12735450
> 
> 赞同：56
> 
> 时间：2012-10-04T20:34:06.610
> 
> 标签：url, curl, encoding, request, http-delete

我正在尝试使用 CURL 发出请求，如下所示：

```
curl -X DELETE "https://myhost/context/path/users/OXYugGKg207g5uN/07V" 
```

哈希在哪里`OXYugGKg207g5uN/07V`，所以我想我需要在执行此请求之前进行编码。

我试过了`curl -X DELETE --data-urlenconded "https://myhost/context/path/users/OXYugGKg207g5uN/07V"`

一些想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-08-08T09:35:40.820

由于您处于 bash 环境中，因此您可以在将散列`OXYugGKg207g5uN/07V`传递给 curl 之前对其进行编码。

一种直接的方法是使用它的字节表示`%4f%58%59%75%67%47%4b%67%32%30%37%67%35%75%4e%2f%30%37%56`

为此，请致电：

```
echo -ne "OXYugGKg207g5uN/07V" | xxd -plain | tr -d '\n' | sed 's/\(..\)/%\1/g' 
```

它会给你：`%4f%58%59%75%67%47%4b%67%32%30%37%67%35%75%4e%2f%30%37%56`

包含 bash/zsh/sh/... 中的 curl 的完整单行代码如下所示：

```
curl -X DELETE "https://myhost/context/path/users/$(echo -ne "OXYugGKg207g5uN/07V" | xxd -plain | tr -d '\n' | sed 's/\(..\)/%\1/g')" 
```

并且等价于

```
curl -X DELETE "https://myhost/context/path/users/%4f%58%59%75%67%47%4b%67%32%30%37%67%35%75%4e%2f%30%37%56" 
```

这个解决方案不是很漂亮，但它有效。
我希望你觉得这有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-04T20:37:18.970

如果确实`OXYugGKg207g5uN/07V`是哈希，那么您需要对其进行编码，而不是整个 url。您可以在使用 cURL 的环境中使用可用的编码函数。

# java - @Inject 属性在 JSF 页面上显示为“未知属性”

> ID：12735454
> 
> 赞同：0
> 
> 时间：2012-10-04T20:34:25.707
> 
> 标签：java, jsf, javabeans

我正在开发一个 Java EE 项目。我有一个在另一个 bean 上使用 @Inject 的 bean。例如：

```
@Inject
VendorBean vendor; 
```

内部包含此代码的 bean 称为 poGeneratorBean。在我的 JSF 中，我试图调用 poGeneratorBean.vendor.x，但是它说 vendor 是一个未知属性。我试过把 public 放在“VendorBean vendor”前面；但这也没有任何作用。

抱歉这个问题可能有点模糊，我正在尽力解释情况。基本上，我试图通过@Inject 使用poGeneratorBean 将来自VendorBean 的属性显示到我的JSF 页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:17:44.237

你需要有一个公共的 getter，符合[Javabeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)。

```
public VendorBean getVendor() {
    return vendor;
} 
```

[EL](https://stackoverflow.com/tags/el/info)即按照 Javabeans 规范工作。

# c - 在给定字段偏移量的情况下确定结构的字段

> ID：12735455
> 
> 赞同：5
> 
> 时间：2012-10-04T20:34:29.800
> 
> 标签：c, visual-studio, debugging, struct

假设我正在调试优化代码中的崩溃。我查看反汇编，我看到如下内容：

```
lea eax,[edi+8Ch] 
```

现在假设我知道 edi 中存储了什么结构，在这种情况下，它是一个有点大的结构。足够大，以至于我一眼就无法分辨出 8Ch 偏移量对应的字段。

我一直在做的只是在 Visual Studio 中打开我的监视窗口并手动对强制转换的 NULL 指针进行指针运算（offsetof 宏会做什么），直到我得到匹配的那个，但这很乏味。有没有办法可以更快地确定正在访问哪个字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T05:21:33.880

在 VisualStrudio 中，您应该能够“观看”这样的表达式：

```
(unsigned)&(((StructTypeName*)0)->StructFieldName) 
```

您输入不同的字段名称，直到 VS 显示正确的偏移值。

您还可以将您的应用程序加载到`WinDbg`（确保已加载符号）并使用该`dt`命令。WinDbg 将转储提供的类型/变量名称的布局/内容以及所有字段的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:53:17.817

如果您需要花时间在这个调试方案上，我建议编写一个程序来打印结构字段的所有偏移量，并将它们`offset; field`成对列出。

我会更进一步，编写一个脚本（例如在 Python 中），它采用结构的文本并生成一个 C 代码文件，其中包含所有`offsetof`结构字段的所有语句。

# javascript - CodeIgniter 破坏了我的会话

> ID：12735456
> 
> 赞同：0
> 
> 时间：2012-10-04T20:34:29.770
> 
> 标签：javascript, codeigniter, session, reset

因此，我目前的任务涉及一个网站，人们可以在该网站上登录并查看有关特定主题的一系列培训视频。我在 CodeIgniter 中开发了这个。唯一的麻烦是，一旦我让他们登录并创建了一个会话，该会话似乎在几分钟后神秘地消失了，并且他们神秘地弹回了登录页面（如果有人在在没有登录的情况下训练视频页面。这是我的 config.php 页面中的代码块：

```
$config['sess_cookie_name'] = 'cc_session';
$config['sess_expiration']  = 0;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']  = 'cc_sessions';
$config['sess_match_ip']    = TRUE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 3000000; 
```

为什么 sess_time_to_update 设置这么高？起初，我认为这是罪魁祸首，在 5 分钟后更新会话。我已将会话设置为记录到数据库，以及所有这些好东西。请向我提问，并帮助我深入了解这一点！

我应该指出，我在课程页面上有一个 iFrame，它以这种方式将“ping”发送回服务器......

```
 <iframe id="timerAddEnd" style="display:none;" src="http://www.example.com/course/finish/<?=$course->intKey?>/ping" >
 </iframe>
 <script type="text/javascript">
      var auto_refresh = setInterval( function () 
      { 
           var iframe = document.getElementById('timerAddEnd'); 
           iframe.src = iframe.src; 
      }, 60000); 
      // refresh every minute 
 </script> 
```

这可能是罪魁祸首吗？我希望这将是对最初问题的快速而肮脏的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T07:03:11.913

Are you using Firefox and Firebug with extensions (like FirePHP) installed? Because if you are having such a setup, when you open/close the Firebug console, the user-agent string changes, and your session is no longer recognized by CI.

My workaround was to disable FirePHP. Try checking your user-agent string and see if you have something extra besides the default browser user-agent. You should be able to identify it easily. if there is one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T03:48:29.747

我在 CodeIgniter 中“随机”销毁会话数据时遇到了同样的问题，我花了很多时间找出问题所在。现在我想我发现了我的问题，这似乎`$this->session->set_flashdata`是罪魁祸首。

我注意到我在使用它的页面上注销了。我还注意到，如果你这样做：

```
$this->session->set_flashdata('thisItem', 'value'); 
```

稍后在同一页面上再次具有相同的变量：

```
$this->session->set_flashdata('thisItem', 'new value'); 
```

那么它每次都会销毁会话数据。现在我从我的网站上删除了所有的 set_flashdata，从那以后我就没有注销过。希望这是我的问题。当我有时间时，我会尝试将我的闪烁系统重写为类似`if (!isset('thisItem)) { set it; }`的东西，以防止它再次发生，因为我真的想要闪存消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:48:20.113

*好吧，这本身*可能不是一个完整的“答案” ，但我**确实**想出了一种解决方法。

我知道问题涉及 CodeIgniter 处理会话......我该如何放置......*在后台运行的东西。* 最初我在 iFrame 中使用 CI 页面。那些返回系统的“ping”是导致锁定的原因。所以，我现在在 iFrame 中使用一个常规的、扁平的 PHP 页面。它连接到数据库，但不通过 CI 来完成。我得到了我的“ping”到有问题的桌子，但我没有中断会话。

# c# - 如何在 C# 中为表单的背景设置透明图像？

> ID：12735458
> 
> 赞同：0
> 
> 时间：2012-10-04T20:34:33.707
> 
> 标签：c#

我在 Photoshop 中制作了一个透明的背景图像，但是当我将它用作表单的背景图像时，它不使用表单的背景颜色（蓝色），因此我无法使用此代码制作透明的表单。

```
this.BackColor = Color.blue;
this.TransparencyKey = Color.blue; 
```

如果我改用白色，我的其他工具会出现颜色问题。我正在尝试制作 Windows 表单应用程序。我不知道是否有更简单和更好的替代方法来制作透明表单。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:49:43.263

参考这里的一篇文章以及我自己的经验，我希望这是因为它是 JPG 而不是 PNG 或其他一些透明友好的图像格式。我遇到了同样的问题，当我更改为 PNG 格式时，它对我有用。

从几个随机谷歌搜索中读取结果，似乎 JPEG 不支持文件格式限制的透明度。

[即使位图设置为 Graphics.Clear(Color.Transparent)，为什么在调整大小时我的图像周围会出现黑色背景](https://stackoverflow.com/questions/5227113/why-am-i-getting-a-black-background-around-my-images-when-resizing-even-when-bit)

# python - 如何在 Django 管理命令中停止子进程？

> ID：12735472
> 
> 赞同：0
> 
> 时间：2012-10-04T20:35:09.463
> 
> 标签：python, django, subprocess

我有一个 Python 程序，我想将它作为子进程运行，它应该由 Django 自定义管理命令调用。这是一个长时间运行的程序，我必须手动停止。启动子进程很容易，但如何停止呢？

这是我正在考虑的一个理论示例：

```
import subprocess
from optparse import make_option
from django.core.management.base import BaseCommand    

class Command(BaseCommand):

    option_list = BaseCommand.option_list + (
        make_option('--start',
            action='store_true',
            dest='status'
        ),
        make_option('--stop',
            action='store_false',
            dest='status',
            default=False
        )
    )

    def handle(self, *args, **options):
        status = options.get('status')

        # If the command is executed with status=True it should start the subprocess
        if status:
            p = subprocess.Popen(...)
        else:
            # if the command is executed again with status=False, 
            # the process should be terminated.
            # PROBLEM: The variable p is not known anymore. 
            # How to stop the process?
            p.terminate() # This probably does not work 
```

这可能是我在想的吗？如果没有，你能想出其他一些如何处理这种行为的可能性吗？我绝对想使用 optparse 选项使用相同的管理命令来启动和停止相同的子进程。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:41:28.477

好吧，该`p`变量确实不存在于您的`status == False`.
您可以使用在运行命令时[`pidfile`](https://stackoverflow.com/questions/8296170/what-is-a-pid-file-and-what-does-it-contain)写下`p`'s的位置，并在运行命令时杀死（会很好）运行该命令的进程。`pid``status == True``os.kill``pid``pidfile``status == False`

您可能只需写下`pid`运行 subprocess 命令的 Python 脚本并杀死那个脚本，就可以使整个事情变得更简单一些。

然而，这不是很优雅。

# c# - 从动态加载的用户控件中提取数据

> ID：12735491
> 
> 赞同：1
> 
> 时间：2012-10-04T20:36:16.100
> 
> 标签：c#, xml, dynamic, visual-studio-2012

所以我有一个将自定义用户控件加载到流面板中的按钮。我的问题是我试图让“保存”按钮通过并从所有用户控件中获取信息并将它们保存到 XML 文件中。我什至不知道从哪里开始。我已经从表单的已加载部分保存到 XML，但从未从动态加载的对象中保存。因此，每个用户控件中都有一组文本框，因此假设其中有 2 个已加载，XML 文件将如下所示：

```
<Operation>
  <OperationInfo>
    <OperationName>Name</OperationName>
    <OperationDate>mm/dd/yyy</OperationDate>
    <FC>Someone</FC>
  </OperationInfo>
  <Pilots>
     <Pilot>
      <PilotName>Name2</PilotName>
      <Ship>Ship</Ship>
      <StartTime>00:00</StartTime>
      <EndTime>00:00</EndTime>
      <Hours>0</Hours>
      <Pay>0</Pay>
    </Pilot>
    <Pilot>
      <PilotName>Name3</PilotName>
      <Ship>Ship</Ship>
      <StartTime>00:00</StartTime>
      <EndTime>00:00</EndTime>
      <Hours>0</Hours>
      <Pay>0</Pay>
    </Pilot>
  </Pilots>
</Operation> 
```

如果我有第三个，就会有另一个“飞行员”实例

更新：在得到 Tariqulazam 的回答后，我得到了以下代码：

```
 public interface IData
    {
        string Pilotname { get; }
        string Ship { get; }
        DateTime StartTime { get; }
        DateTime EndTime { get; }
        decimal payperhour { get; }
    }
        protected void Page_Load(object sender, EventArgs e)
         {
              for (int i = 0; i < 5; i++)
                 {
                     Control ctrl = Form1.LoadControl("~/Dynamic.ascx");
                     order.Controls.Add(ctrl);
                 }
 }

        private static Control LoadControl(string p)
        {
            throw new NotImplementedException();
        }
 protected void OpSave_Click(object sender, EventArgs e)
 {
         foreach (var ctrl in order.Controls)
             {
                if (ctrl is IData)
                    {
                     //Grab data from the UserControl
                     string name = ((ctrl as IData).Pilotname);
                     string ship = ((ctrl as IData).Ship);
                     DateTime starttime = ((ctrl as IData).StartTime);
                     DateTime endtime = ((ctrl as IData).EndTime);
                     decimal pph = ((ctrl as IData).payperhour);
                     //Construct the XML file from the data.
                     using (StreamWriter sw = File.AppendText(string.Format(@"{0}\ops\op-" + OpName.Text.Replace(" ", "_") + ".xml", Directory.GetCurrentDirectory())))
                     {

                         DateTime dtStart = starttime;
                         DateTime dtEnd = endtime;

                         if (dtEnd < dtStart)
                         {
                             dtEnd = dtEnd.AddDays(1);
                         }

                         double hours = (dtEnd - dtStart).TotalHours;
                         double pay = hours * Convert.ToDouble(pph);
                         XElement root = new XElement("Operation",
                             new XElement("OperationName", OpName.Text),
                             new XElement("OperationDate", OpDate.Value.ToShortDateString()),
                             new XElement("Pilot",
                             new XElement("PilotName", name),
                             new XElement("ShipType", ship),
                             new XElement("StartTime", starttime),
                             new XElement("EndTime", endtime),
                             new XElement("HoursMined", hours),
                             new XElement("Pay", pay)));

                         sw.Write("{0}{1}", root, Environment.NewLine);
                     }
                     }
            }

 } 
```

但是这不会保存，而且我认为它不能访问组框中的控件，有没有办法解决这个问题？因为所有需要访问的东西都在一个分组框中。（好吧，动态加载的每个都在自己的 groupbox 中，并且 OpName、FC 和 OpDate 都在同一个 groupbox 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:05:04.163

**更新：**我已经使用 Windows 窗体应用程序对此进行了测试。它正在正确创建 XML 文件。请在保存到 XML 文件之前验证输入。

那就是我会做的。创建这样的接口

```
public interface IData
{
    string PilotName { get; }
    string Ship { get; }
    DateTime StartTime { get; }
    DateTime EndTime { get; }
    Decimal Rate { get; }
} 
```

在用户控件中实现接口，如下所示

```
public partial class Dynamic : UserControl, IData
{
    public Dynamic()
    {
        InitializeComponent();
    }

    public string PilotName
    {
        get { return txtName.Text; }
    }

    public string Ship
    {
        get { return txtShip.Text; }
    }

    public DateTime StartTime
    {
        get { return Convert.ToDateTime(txtStart.Text); }
    }

    public DateTime EndTime
    {
        get { return Convert.ToDateTime(txtEnd.Text); }
    }

    public decimal Rate
    {
        get { return Convert.ToDecimal(txtPayRate.Text); }
    }
} 
```

用于从用户控件加载和检索值

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        LoadControls();
    }

    private void LoadControls()
    {
        for (int i = 0; i < 3; i++)
        {
            flPanel.Controls.Add(new Dynamic());
        }
    }

    private void btnSave_Click(object sender, EventArgs e)
    {
        XmlTextWriter writer = new XmlTextWriter(@"C:\Temp\Operation.xml", System.Text.Encoding.UTF8);
        writer.WriteStartDocument(true);
        writer.Formatting = Formatting.Indented;
        writer.Indentation = 2;
        writer.WriteStartElement("Operation");
        writer.WriteStartElement("OperationInfo");
        writer.WriteStartElement("OperationName");
        writer.WriteString("Sample operation name");
        writer.WriteEndElement();
        writer.WriteStartElement("OperationDate");
        writer.WriteString(DateTime.Now.ToString("dd-MM-yyyy"));
        writer.WriteEndElement();
        writer.WriteStartElement("FC");
        writer.WriteString("Someone");
        writer.WriteEndElement();
        writer.WriteEndElement();
        writer.WriteStartElement("Pilots");
        foreach (var ctrl in flPanel.Controls)
        {
            if (ctrl is IData)
            {
                writer.WriteStartElement("Pilot");
                var data = ctrl as IData;

                writer.WriteStartElement("PilotName");
                writer.WriteString(data.PilotName);
                writer.WriteEndElement();

                writer.WriteStartElement("Ship");
                writer.WriteString(data.Ship);
                writer.WriteEndElement();

                writer.WriteStartElement("StartTime");
                writer.WriteString(data.StartTime.ToString("hh:mm"));
                writer.WriteEndElement();

                writer.WriteStartElement("EndTime");
                writer.WriteString(data.EndTime.ToString("hh:mm"));
                writer.WriteEndElement();

                writer.WriteStartElement("Pay");
                writer.WriteString(data.Rate.ToString());
                writer.WriteEndElement();

                writer.WriteEndElement();
            }
        }
        writer.WriteEndElement();
        writer.WriteEndElement();
        writer.WriteEndDocument();
        writer.Close();
        MessageBox.Show("XML File created!");
    }

} 
```

# sql - 有没有办法为 SQL Server 2008 中的生成脚本设置默认值？

> ID：12735496
> 
> 赞同：20
> 
> 时间：2012-10-04T20:36:34.160
> 
> 标签：sql, sql-server-2008-r2, ssms, sql-server-2008

[大多数时候，当我在 SSMS 中生成脚本时，我必须在Generate and Publish Scripts 向导](http://msdn.microsoft.com/en-us/library/bb895179.aspx)中更改完全相同数量的设置。有没有办法在此向导中设置默认值（特别是在“[高级脚本选项](http://msdn.microsoft.com/en-us/library/bb895179.aspx#AdvScriptOpt)”对话框中？

如果没有，是否有人有任何有趣的方法来满足这种需求？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-23T22:06:56.043

你也可以自己回答。但是，如果没有：

```
Tools -> Options -> SQL Server Object Explorer -> Scripting? 
```

# mysql - twitter 是如何工作的，它是否使用“in”来为关注者选择推文？

> ID：12735498
> 
> 赞同：0
> 
> 时间：2012-10-04T20:36:38.787
> 
> 标签：mysql, sql-server, twitter

假设我正在关注这些 user_ids，例如。1,2,3,4,5

twitter 是否通过此查询获得最新的推文？

select*from tweets where user_id in (select id from user_id)

我现在正在尝试这样做以发展自己，但是当我认为“in”关键字太多了，那么您怎么看？，还有什么比这个更好的可能性？

谢谢你 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:46:22.330

Twitter 使用 Vector 来解决它，更具体地说，可能是 Graph DB `FlockDB`。您可以在[http://engineering.twitter.com/2010/05/introducing-flockdb.html了解更多信息](http://engineering.twitter.com/2010/05/introducing-flockdb.html)

# regex - 提取字符串中括号之间的数字

> ID：12735503
> 
> 赞同：5
> 
> 时间：2012-10-04T20:21:07.723
> 
> 标签：regex, r

> **可能重复：**
> [在 R 中的所有括号内提取信息（正则表达式）](https://stackoverflow.com/questions/8613237/extract-info-inside-all-parenthesis-in-r-regex)

我从 excel 导入数据，一个单元格由这些包含数字和字母的长字符串组成，有没有办法只从该字符串中提取数字并将其存储在一个新变量中？不幸的是，有些条目有两组括号，我只想要第二组？我可以使用 grep 吗？

字符串看起来或多或少像这样，但是字符串的长度会有所不同：

```
"East Kootenay C (5901035) RDA 01011" 
```

或像这样：

```
"Thompson-Nicola J (Copper Desert Country) (5933039) RDA 02020" 
```

我想要的只是`5901035`和`5933039`

任何提示和帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T20:42:40.170

有许多可能的正则表达式可以做到这一点。这是一个：

```
x=c("East Kootenay C (5901035) RDA 01011","Thompson-Nicola J (Copper Desert Country) (5933039) RDA 02020")

> gsub('.+\\(([0-9]+)\\).+?$', '\\1', x)
[1] "5901035" "5933039" 
```

让我们分解第一个表达式的语法`'.+\\(([0-9]+)\\).+'`

*   `.+`任何一种或多种
*   `\\(`括号是正则表达式中的特殊字符，所以如果我想表示实际的东西`(`，我需要用`\`. 我必须为 R 再次逃脱它（因此是两个`\`s）。

*   `([0-9]+)`我提到了特殊字符，这里我使用了两个。第一个是括号，表示我要保留的组。第二个`[`和`]`周围的事物组。有关更多信息，请参阅`?regex`。

*   `?$`如评论中所述，最后一块确保我抓住了括号中的最后一组数字。

如果您的括号字符串出现在字符串的开头或结尾，我也可以使用`*`而不是表示 0 或更多而不是一个或多个 i。`.`

第二部分`gsub`是我要替换的第一部分。我用过：`\\1`。这表示使用第 1 组（上面的东西`( )`。我需要再次转义它两次，一次用于正则表达式，一次用于 R。

一定要清如泥！享受您的数据处理项目！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T23:00:41.027

这是一个 gsubfn 解决方案：

```
library(gsubfn)

strapplyc(x, "[(](\\d+)[)]", simplify = TRUE) 
```

`[(]`匹配一个开放的括号，`(\\d+)`匹配一串数字，由于它周围的括号创建一个反向引用，最后`[)]`匹配一个关闭的括号。返回反向引用。

# knockout.js - 使用淘汰赛从上部 foreach 访问可观察数据

> ID：12735512
> 
> 赞同：1
> 
> 时间：2012-10-04T20:37:16.083
> 
> 标签：knockout.js

我试图通过两个 foreach 循环从我的 viewModel 中的两个不同数组访问信息，但这些项目没有相互嵌套

```
<tbody data-bind="foreach: runnr">
    <tr>
        ......
        <!--ko foreach: $root.options -->
        <td data-bind="visible: value"><span data-bind="text: runnr[prop] "></span></td>
        <!-- /ko --> 
```

我希望将“可见”设置为选项值属性，但我想根据选项中的道具将跨度文本设置为 runnr 中的属性。

```
options = ko.observableArray([
  { name: "PP", value: pp, prop: 'Post' },
  { name: "Weight", value: weight, prop: 'Weight' },
  { name: "Price", value: price, prop: "Price" }]);

runnr = ko.observableArray([
    {Post:1, Weight:125, Price:12000},
    {Post:2, Weight:124, Price:15000}
]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:59:46.683

您应该能够使用`$parent[prop]`来访问`runnr`您正在循环的内容。

简化小提琴：http: [//jsfiddle.net/rniemeyer/y3R43/](http://jsfiddle.net/rniemeyer/y3R43/)

# c - 我的 C 程序的浮点异常

> ID：12735513
> 
> 赞同：-2
> 
> 时间：2012-10-04T20:37:17.013
> 
> 标签：c, exception, point, floating

这是导致问题的部分。我真的找不到任何不好的东西。这部分是用于前端构造的 mel binning 功能。

原始文件位于[http://www.ee.columbia.edu/~stanchen/fall12/e6870/labs/lab1.html](http://www.ee.columbia.edu/~stanchen/fall12/e6870/labs/lab1.html)

提前感谢您的帮助！

```
double fmax = 0;
double w = 0;       // half of the length of the bottom line of each bin of triangular

fmax = 1127*log(1+1/(1400*samplePeriod));
w = fmax/27;

double f    = 0;
double fmel = 0;
double xf   = 0;
double H    = 0;
double sum  = 0;

for (int frmIdx = 0; frmIdx < inFrameCnt; ++frmIdx)
    for (int dimIdx = 0; dimIdx < outDimCnt; ++dimIdx){
        sum = 0;
        for (int j = 0; j < 256; ++j){
            f = j/(256/20000);
            fmel = 1127*log(1+f/700);
            xf = sqrt(inFeats(frmIdx,2*j)*inFeats(frmIdx,2*j)+inFeats(frmIdx,2*j+1)*inFeats(frmIdx,2*j+1));
            if (fmel > dimIdx*w && fmel < (dimIdx+1)*w){
                H = (fmel- dimIdx*w)/w;
            }
            else if(fmel > ((dimIdx+1)*w) && fmel < ((dimIdx+2)*w)){
                H = ( (dimIdx+2)*w-fmel)/w;
            }
            else {
                H = 0;
            }
            sum = sum + xf*H;
        }
        outFeats(frmIdx,dimIdx)=sum;

        if (doLog == true){
            outFeats(frmIdx,dimIdx) = log(outFeats(frmIdx,dimIdx));
        }
        else{
            outFeats(frmIdx,dimIdx) = outFeats(frmIdx,dimIdx);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:45:03.387

检查是否没有除以零。
这是第一个定义为 0 的值：
f = j/(256/20000); // (256 和 20000 被视为整数)
256\. / 20000\. (或 256.0 / 20000.0 ) 将是一个浮点数。

# c++ - 一种在没有光线投射和多个目标的情况下在 3D 中使用寻路的方法

> ID：12735514
> 
> 赞同：3
> 
> 时间：2012-10-04T20:37:18.393
> 
> 标签：c++, algorithm, graphics, directx, path-finding

我目前正在用 c++ 在 DirectX 引擎中制作游戏。我正在使用寻路将一支士兵军队引导到特定位置。问题是我使用光线投射来查看我的路径是否没有任何东西，这会减慢游戏的速度。有没有更好的寻路方法？

我的军队调动也有问题。现在我使用士兵位置的平均值作为起点，这意味着所有士兵都需要先到达那里，然后才能到达终点。有没有办法让他们在不去起点的情况下到达终点？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:50:11.613

你试过像A-Star这样的东西吗？通过节点导航，或者地图的某种二维数组表示？写得很好，它可能更快也更容易处理作业（多线程）。

如果你有一个士兵，他在位置 A，并且需要到达 B。只需计算从 C（平均位置）到 B 的路径。获取从 a 到 b 的方向并进行某种插值。（还没有这样做，或尝试过，但它可能会很好地工作！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:58:51.257

Are you hit-testing every object when you are raycasting?

That can be very expensive when you have many objects and soldiers. A common solution is to divide your world into square grid cells, and put each object in a list of objects for that grid.

Then you draw an imaginary line from the soldier to the destination and check each cell what objects you need to hit test against. This way you will evaluate only objects close to the straight path and ignore all others.

# .net - WinRT 中的 ComposableAttribute 是什么？

> ID：12735517
> 
> 赞同：2
> 
> 时间：2012-10-04T20:37:35.297
> 
> 标签：.net, xaml, windows-runtime, windows-store-apps

我试图了解 WinRT 的一些较低级别的部分是如何工作的。我遇到了`ComposableAttribute`这可能是我需要的关键。但是，它的[文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.metadata.composableattribute.aspx)非常薄。

> 指示编程元素的组成方式。

如您所知，这实际上并不能告诉我任何事情。有谁知道这个属性的用途和它应该做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:51:37.080

将`ComposableAttribute`类型标记为可实例化以用作跨 Windows 运行时 ABI 边界的基类。它类似于`ActivatableAttribute`，它将一个类型标记为可实例化以跨 ABI 边界“激活”（即直接使用，不用作基类）。Windows 运行时基于 COM，并不真正支持真正的继承。相反，继承是通过元数据欺骗和[聚合](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686558.aspx)伪造的。

您可以定义自己的可组合类型，但如果这样做，它们必须派生自平台中的可组合类型（这是[Windows 8 应用认证要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)中的元数据规则之一）。对于 Windows 8，这意味着您的可组合类型必须直接或间接从[`Windows.UI.Xaml.DependencyObject`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.dependencyobject). 最后，可组合类型只能使用 IDL 和 WRL 编写；C++/CX 和 .NET 都不能用于定义可组合类型。

# html - 包含下拉菜单的菜单是否应该指向一个页面？

> ID：12735519
> 
> 赞同：1
> 
> 时间：2012-10-04T20:37:36.227
> 
> 标签：html, menu

我正在开发一个带有下拉菜单的网站。我在想父菜单是否也应该指向一个位置或只指向同一页面？

这里是视觉， ![在此处输入图像描述](../Images/40fb1ccf20b9eeb40da1c097d9b14846.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:55:16.077

（假设我正确理解您的问题）您永远不想拥有不去任何地方（或去任何不同地方）的菜单项。如果它是多余的，并且您想将该链接发送到与其中一个子项相同的位置，那么您应该取出一个菜单项，如果它是菜单项的父项，则为您所在的类别创建一个摘要/登录页面列出子菜单项以及说明。

# python - 如何为 python 安装 scipy？

> ID：12735524
> 
> 赞同：2
> 
> 时间：2012-10-04T20:37:58.597
> 
> 标签：python, numpy, scipy

我有 Python 2.7，并且安装了[distutils](http://docs.python.org/library/distutils.html)。

我为 win 32 下载了最新版本的[Scipy](http://sourceforge.net/projects/scipy/files/scipy/)。

对于我的生活，我不明白如何安装它。

根据[网站上的说明](http://www.scipy.org/Installing_SciPy/Windows)，它指出：

> 如果您已经安装了 Python，安装 Numpy 和 Scipy 的最简单方法是从 [Download](http://www.scipy.org/Download)下载并安装二进制分发版。

我已经按照上面的说明[下载了这个](http://sourceforge.net/projects/scipy/files/scipy/)。

![在此处输入图像描述](../Images/b40e838fdc4e9bf26908c2ce3e73e18f.png)

**我不知道现在该怎么办！**

如何完成 scipy 的安装？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T20:43:04.587

看起来您已经下载了源代码分发，您通常会通过以下方式安装：

```
python setup.py install 
```

但是，如果没有合适的 C 编译器环境和其他库，它可能会失败。我猜你真的想下载[Windows 二进制文件](http://sourceforge.net/projects/scipy/files/scipy/0.11.0/scipy-0.11.0-win32-superpack-python2.7.exe/download)。

您必须在 sourceforge 站点中深入挖掘才能找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T20:46:08.720

你会很好地安装[setuptools](http://pypi.python.org/pypi/setuptools)。让安装几乎任何与 python 相关的东西变得轻而易举！

例如

```
easy_install scipy 
```

还有一种叫pip。

```
easy_install pip

pip install scipy 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T20:42:51.193

尝试下载 Windows 二进制文件...

[http://sourceforge.net/projects/scipy/files/scipy/0.11.0/scipy-0.11.0-win32-superpack-python2.7.exe/download](http://sourceforge.net/projects/scipy/files/scipy/0.11.0/scipy-0.11.0-win32-superpack-python2.7.exe/download)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-09T13:18:10.320

只需打开 Windows 命令提示符并转到您安装 Python 的目录。例如 `c:\python34>`

到达那里后，只需键入`python -m pip install scipy`并按 Enter

# android - 在 Android webview 中放大 Google Docs Viewer PDF

> ID：12735527
> 
> 赞同：4
> 
> 时间：2012-10-04T20:38:07.153
> 
> 标签：android, pdf, webview

我注意到谷歌文档查看器捏缩放在某些设备上不起作用，这是正确的吗？我可以重新打开它吗？在 Android 2.3.3 上它似乎可以工作，而不是在 HC 或 ICS 上。谷歌查看器提供的菜单栏按钮不允许放大到足够的放大倍数来阅读 PDF 中的小字。否则，这似乎是将 PDF 放入本机 android 应用程序的一个很好的解决方案。有什么想法可以放大工作吗？谢谢！

# css - 正确的 CSS 来用左上角和右下角的图像框住图像

> ID：12735528
> 
> 赞同：1
> 
> 时间：2012-10-04T20:38:13.270
> 
> 标签：css

我正在研究使用不是完美正方形的图像并在图像的左上角和右下角使用它的概念，但我想定位它，使其距离图像滑块 25px。

将其定位为看起来像模型的正确方法是什么？

定位使用`position:relative; and top/left: -XXpx;`我认为这是最好的方法，但我可能是错的

使用`margin-left: -XXpx;`etc定位 一点都不觉得

使用`vertical-align`我的位置无法使其正常工作

[这是它的一个小提琴 - 剥离](http://jsfiddle.net/stillb4llin/zFa99/2/)

![网站外观的图片](../Images/23125a5dfc15b2c1e0110ff84ae65a2b.png) -- ![Photoshop 中的模型](../Images/b3b0fb3a455029f22452f208b4992515.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:51:55.417

是的，你的第一种方法是最好的：http: [//jsfiddle.net/zFa99/8/](http://jsfiddle.net/zFa99/8/)

您要放在`position: relative`包含主图像和两个角图像的容器上，然后绝对定位角图像。

```
#slider { position: relative; }
.tl-corner, .br-corner { position: absolute; }
.tl-corner { bottom: 0; right: 0; } /* this line is not ncessary as top:0 and left:0 are default */
.br-corner { bottom: 0; right: 0; } 
```

无需浮动角落图像。

# mysql - 如何编写没有别名的sql查询

> ID：12735530
> 
> 赞同：0
> 
> 时间：2012-10-04T20:38:16.637
> 
> 标签：mysql, sql

是否可以在没有别名的情况下编写此 sql 查询？我正在使用一个不包含别名的 PHP 脚本，所以我对此有疑问。

如果这是可能的，请为我提供一些帮助

这是代码：

```
SELECT 
 time1.Time, time2.Time, time1.Signal, v.name, v.lastname, k.vehicle, time1.Reg
FROM
 data time1
 INNER JOIN data time2
    ON  time1.id != time2.id 
    AND time1.serial= time2.serial
 INNER JOIN drivers v
    ON time1.FK_ID_driver=v.ID_driver
 INNER JOIN vehicles k
    ON time1.Reg=k.Reg

WHERE
   TIMEDIFF(time2.Time, time1.Time) BETWEEN '00:15:00' AND '00:30:00'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:39:51.460

您无法轻松实现您想要的，因为您要加入同一个表两次，并且 SQL 需要一个别名来消除它们的歧义。

但是，您可以为 table 创建一个视图，并在其中一个联接`data`中使用该视图而不是表名。`data`

**例子：**

```
select data.time,
    vData.time,
    data.Signal,
    drivers.name,
    drivers.lastname,
    vehicles.vehicle,
    data.Reg
from data 
inner join vData on data.id != vData.id and data.serial = vData.serial
inner join drivers on data.FK_ID_driver = drivers.ID_driver
inner join vehicles on data.Reg = vehicles.Reg
where TIMEDIFF(vData.time, data.time) between '00:15:00' and '00:30:00'; 
```

# sql-server - 获取所有触发器、函数和存储过程的列表

> ID：12735531
> 
> 赞同：1
> 
> 时间：2012-10-04T20:38:20.320
> 
> 标签：sql-server

如何获取数据库中所有触发器、函数和过程的列表？是否有可能只获得用户的触发器、功能、程序？

```
select Name from sys.all_objects where type = 'udp' 
```

此查询将返回所有用户程序的列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T21:12:51.743

```
select type, name
from sys.objects
where type in (
  'tr', -- triggers
  'p', -- procedures
  'if','fn','tf' -- functions
  --,'fs','ft' -- CLR functions
  )
  and is_ms_shipped = 0 -- user-defined 
```

参考：[sys.objects](http://msdn.microsoft.com/en-us/library/ms190324.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T20:52:54.847

对于程序

```
select * from sys.procedures 
```

对于函数

```
SELECT * FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_TYPE = 'FUNCTION' 
```

用于触发器

```
 SELECT S2.[name] TableName, S1.[name] TriggerName, CASE WHEN S2.deltrig = s1.id THEN 'Delete' WHEN S2.instrig = s1.id THEN 'Insert' WHEN S2.updtrig = s1.id THEN 'Update' END 
'TriggerType' , 'S1',s1.*,'S2',s2.* FROM sysobjects S1 JOIN sysobjects S2 ON S1.parent_obj = S2.[id] WHERE S1.xtype='TR' 
```

这个我不太清楚，google了一下

# php - PHP zip 下载错误

> ID：12735532
> 
> 赞同：4
> 
> 时间：2012-10-04T20:38:20.400
> 
> 标签：php, android, mobile

我有一个脚本，可让用户根据要求下载 zip 文件。它在计算机浏览器上 100% 有效，但不适用于 Android/移动浏览器，仅 Opera（移动）除外。

这是我的脚本。

```
 $leads = new Packer($zip_name);
$index = 1;
$count = 0;
foreach($cLeads->lastUnitInfo['leads'] as $lead)
{
    // build a request string
    $export = 'export_lead_'.$index;
    $req    = $_POST[$export];

    // add it to the zip file
    if(isset($req) && $req == '1')
    {
        // debug only
        //echo 'adding lead: '.$lead['file_name'].'<br />';
        $leads->addLead('leads/'.$lead['file_name'],$lead['item_name']);
        $count++;
        //echo 'count: '.$count.'<br/>';
    }
    $index++;
}

// debug
//exit('count: '.$count);  // displays same results on all browsers.

// we got anything packed ?
if($count <= 0)    //// <-------- BLOCK OF BUG ON MOBILE PHONE
{
    if(file_exists($zip_name))
        unlink($zip_name);  // delete the zip file created.
    exit('<h1>Nothing to export</h1>'); 
}   ///// <---------------------- END BLOCK

// download the leads here.
$leads->purge();
exit; 
```

这是我的`purge()`功能

```
public function purge($zip_name = 'leads.zip')
  {
    header('Content-type: application/zip');
    header('Content-Disposition: attachment; filename="'.$zip_name.'"');
    ob_clean();
    flush();
    readfile($this->zip_name);

    // errors will be disabled here
    unlink($this->zip_name);
  } 
```

在我的 Android 手机上，zip 文件已下载，但包含`<h1>Nothing to export</h1>`将其呈现为无效 zip 文件的内容。

所以我的问题是，该块如何仅在移动浏览器（Opera 除外）上执行，然后在它应该有的情况下继续下载 zip，如果它`exited`完全`$count`为零？

我使用 Fiddler 对其进行了调试，请求都相同，但输出不同，为什么？

这是PHP中的错误吗？因为如果您查看我的代码，该函数`purge()`应该输出错误，说明标头已发送，但它只是继续下载 zip 文件。

浏览器：

*   海豚（+Beta）
*   火狐
*   默认安卓浏览器
*   船浏览器

测试的 PHP 版本：

*   5.3.13（生产、共享服务器）
*   5.1.4

这让我现在发疯了。

* * *

@Alix 这是我见过的最奇怪的错误。我在这里没有认真看到任何逻辑错误。对于启动下载的脚本，实际上必须将文件添加到 zip 中。现在在我的手机上，它说没有添加任何文件，但文件`temp`夹中有一个 zip 文件。此外，如果没有添加文件（`$count`= 0），那么脚本应该终止（因此`exit()`函数）只带有一条消息`<h1>Nothing to export</h1>`。但它会继续下载 zip 文件（此时它不存在，但在 temp 文件夹中存在）。zip 文件最终损坏，因为它包含`<h1>Nothing to export</h1>`

**Alix 写道:** * **> 如果您在提供文件之前注释掉退出调用会发生什么？**

它说`readfile`错误，然后以乱码的 UNICODE 字符清除 zip 文件。我可以说它是 zip 文件，因为它开头`PK`并包含要导出的图像的名称。

**阿利克斯写道：**

> 如果这不起作用，您可能想更改`exit('<h1>Nothing to export</h1>');`为 exit(var_dump($_REQUEST));，这样您就可以通过检查 Zip 文件来检查表单提交中可能存在的错误。

有趣的。它只打印 cookie 和 $_GET 参数。如果我将代码放在脚本开头的建议中以及将文件添加到 zip 的块中，它会打印所有`$_POST`变量。

这里显然有一个 PHP 部分的错误。它应该在被调用时终止，`exit`但它不会。请注意，这只发生在除 Opera 之外的移动浏览器上。我现在要哭血了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:51:49.693

您确定其他浏览器设置`$_POST[$export]`为正确的值吗？

此外，您应该先`ob_[end_]clean()`输出标题，而不是相反：

```
public function purge($zip_name = 'leads.zip')
  {
    ob_end_clean();
    flush();
    header('Content-Type: application/zip');
    header('Content-Disposition: attachment; filename="'.$zip_name.'"');
    readfile($this->zip_name);

    // errors will be disabled here
    unlink($this->zip_name);
  } 
```

此外，您可能想要设置这些标题：

```
header('Content-Length: ' . intval(filesize($zip_name)));
header('Content-Transfer-Encoding: binary'); 
```

如果这不起作用，您可能想更改`exit('<h1>Nothing to export</h1>');`为`exit(var_dump($_REQUEST));`，这样您就可以通过检查 Zip 文件来检查表单提交中可能存在的错误。

# wpf - DataBinding DataGrid 到自定义数据结构

> ID：12735535
> 
> 赞同：0
> 
> 时间：2012-10-04T20:38:37.763
> 
> 标签：wpf, data-binding, datagrid

所以我在涉足 Winforms 几年后才加入 WPF 俱乐部。我绝对喜欢 WPF 中的数据绑定，但我在使用`DataGrid`.

我有一个高度自定义的数据结构，它存储来自 SQL 查询的结果，我想继续在 WPF 中使用它。我已经看到了绑定到对象列表的示例，但没有看到像 SQL 查询这样的动态。

是否有一些接口可以让我的数据结构实现，以便`DataGrid`获取必要的信息，例如行数和列数、标题和数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:39:27.067

这些项目应该实现 INotifyPropertyChanged 并且您应该将它们放在 ObservableCollection<> 中，以便网格将收到有关更改的通知。

如果将 AutoGenerateColumns 设置为 true，则 Grid 将自动为模型的每个属性创建一个列。

如果您只有“原始”数据而没有模型类，那么我认为您必须手动创建列。WPF 绑定非常灵活，也可以绑定到索引属性/数组等。也许这可以帮助您处理“动态”数据。

```
<TextBlock Text="{Binding myArray[0]}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:34:38.123

我的目标是绑定到类似于 a 的自定义结构`DataTable`，允许`DataGrid`“发现”关于我的结构的信息。

简短的回答是实现以下接口：

`IList` `IEnumerable` `ITypedList`

以及继承自`CustomTypeDescriptor`（或实现`ICustomTypeDescriptor`）

[这个问题](https://stackoverflow.com/questions/1834454/wpf-data-binding-example-of-custom-type-descriptor "这个问题")对处理`CustomTypeDescriptor`最具挑战性的事情有很大帮助。

我的枚举对象是一个简单的对象，它存储了对主表的引用，因此它可以询问特定行和列的值是什么。

```
public AgilityTableRow(AgilityTableBase table, int rowIndex)
    {
        _table = table;
        _rowIndex = rowIndex;
    }

    public object this[int columnIndex]
    {
        get 
        {
            return _table[columnIndex, _rowIndex]; 
        }
    }

    public object this[string columnName]
    {

        get 
        {
            return _table[_table.GetFieldIndex(columnName), _rowIndex]; 
        }
    } 
```

注意：这个类需要实现`ICustomTypeDescriptor`并且可以简单地将调用转发到表来获取属性：

```
public PropertyDescriptorCollection GetProperties()
    {
        return _table.GetProperties();
    } 
```

# javascript - Javascript 无法识别 SWT BrowserFunction

> ID：12735536
> 
> 赞同：1
> 
> 时间：2012-10-04T20:38:41.333
> 
> 标签：javascript, eclipse-plugin, swt

我正在尝试使用 SWT 浏览器将 html&javascript 文件嵌入到 Eclipse 插件中。

我想在使用 BrowserFunction 加载的 Javascript 中调用用 Java 声明的函数，但似乎 Javascript 无法识别我声明的这个函数。

这是我的代码片段：

```
@Override
public void createPartControl(Composite parent) {

    Browser browser = new Browser(parent, SWT.NONE);
    new ReadFileFunction(browser, "test");

    browser.setUrl("file:///C:/Users/asder/Desktop/timeline/index.html");

}

class ReadFileFunction extends BrowserFunction {

    public ReadFileFunction(Browser browser, String name) {
        super(browser, name);
    }

    @Override
    public Object function(Object[] arguments) {
        System.out.println("asdasdsdad");
        return "Hello";
    }

} 
```

对于 Javascript，我有：

```
<script>    
    try {
        var result = test();
        alert(result);
    } catch(e) {
        alert('a java error occurred: ' + e.message);
    }
</script> 
```

它只是提醒说它没有名为“测试”的功能。

谁能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:57:27.027

我会通过确保它没有被垃圾收集来确保该功能仍然存在。类似的东西： `final BrowserFunction rff = new ReadFileFunction(browser, "test");`
这就是我为浏览器功能所做的......

# loops - SilverStripe：循环 If 语句

> ID：12735543
> 
> 赞同：1
> 
> 时间：2012-10-04T20:39:08.153
> 
> 标签：loops, if-statement, silverstripe, singlepage

我正在使用 SilverStripe 构建单页作品集。

到目前为止，我能够遍历我的站点，并且所有 $Title[s] 和 $Content[s] 都在一个中可见`<div>`。现在，如果当前页面（循环）被命名为“联系人”，我想附加某个 CSS 类。

就像是：

```
//Pseudocode:
<loop start>
if ($Title == 'Contact') <div class="a"></div> else <div class="b"></div>
<loop end> 
```

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:56:25.817

```
<% if $Title == "Contact" %>
     // Do something ...
<% end_if %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T07:19:58.843

您可以尝试自定义 getter 方法，例如：

```
function DivClassName() {
  return $this->Title == 'Contact'?'a':'b';
} 
```

并在您的模板中使用以下内容。

```
<div class="$DivClassName"></div> 
```

将逻辑排除在模板之外:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T01:45:02.683

```
<% if Title = "Contact" %>
    <div class="a"></div>
<% else %>
    <div class="b"></div>
<% end_if %> 
```

# java - 将 JSON 响应转换为 Java 中的字符串？

> ID：12735545
> 
> 赞同：2
> 
> 时间：2012-10-04T20:39:16.903
> 
> 标签：java, json, http

当我向 api 发出 API 请求时，我收到 JSON 格式的响应。

当我做`System.Out.Println`响应时，我得到了这个。

```
HTTP/1.1 200 OK [Date: Thu, 04 Oct 2012 20:33:18 GMT, Server: Apache/1.3.33 (Unix) PHP/4.4.0, Cache-control: no-cache, must-revalidate, no-cache="Set-Cookie", private, Expires: Fri, 01 Jan 1990 00:00:00 GMT, Pragma: no-cache, X-CreationTime: 0.051, Set-Cookie: DT=1349382798:29998:365-l4; path=/; expires=Fri, 01-Jan-2020 00:00:00 GMT; domain=.wunderground.com, Connection: close, Transfer-Encoding: chunked, Content-Type: application/json; charset=UTF-8] 
```

但这不是预期的反应，反应应该是这样的，

```
response: {
name:
class:
} 
```

我正在使用 Apache HTTP 客户端。

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet(url); 
HttpResponse response = httpclient.execute(httpget);
System.out.println(response); 
```

为了获得预期的结果，我接下来应该做什么？我只需要一个正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:37:24.833

我在这里回答我自己的问题：

在对 Apache 网站进行了一些研究之后，我发现了这一点：

```
HttpEntity entity = response.getEntity();
System.out.println(EntityUtils.toString(entity)); 
```

相信我，它更容易，并且像魅力一样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:44:02.280

您需要执行以下操作：

```
HttpResponse response = httpclient.execute(httpget);
StringBuilder sb = new StringBuilder();
DataInputStream in = new DataInputStream(response.getEntity().getContent()); 
String line;     
while ((line = in.readLine()) != null) { 
    sb.append(line);
} 
in.close(); 
String json = sb.toString(); 
```

# java - jasperreport 导出 CSV 性能

> ID：12735549
> 
> 赞同：2
> 
> 时间：2012-10-04T20:39:41.317
> 
> 标签：java, csv, jasper-reports

我正在使用 japserreport 将数据从查询导出到 CSV（`;`分隔）。该报告是动态创建的，因为我事先不知道我将要执行的查询。

我从一个“空”jrxml 文件开始`reportFileName`（没有任何部分的空文件，只有数据源）。

```
 final JasperDesign jasperDesign = JRXmlLoader.load(reportFileName); 
```

`JRDesignField`我根据我拥有的字段动态添加：

```
 final JRDesignField field = new JRDesignField();
    field.setName(value);
    field.setValueClass(java.lang.String.class);
    jasperDesign.addField(field); 
```

我有一个标题和详细信息乐队：

```
 final JRDesignBand titleBand = new JRDesignBand();
    titleBand.setHeight(20);
    final JRDesignBand detailBand = new JRDesignBand();
    detailBand.setHeight(20); 
```

我添加静态文本：

```
 final JRDesignStaticText staticText = new JRDesignStaticText();
    staticText.setText(label);
    staticText.setX(x);
    staticText.setWidth(100);
    staticText.setHeight(20);
    titleBand.addElement(staticText); 
```

和领域：

```
 final JRDesignTextField textField = new JRDesignTextField();
    textField.setX(x);
    textField.setWidth(100);
    textField.setHeight(20);
    final JRDesignExpression expression = new JRDesignExpression();
    expression.setValueClass(java.lang.String.class);
    expression.setText("$F{" + value + "}");
    textField.setExpression(expression);
    detailBand.addElement(textField); 
```

然后我将报告导出为 CSV 格式：

```
 final JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
    JRAbstractExporter exporter = new JRCsvExporter();
    exporter.setParameter(JRCsvExporterParameter.FIELD_DELIMITER, ";");
    exporter.setParameter(JRExporterParameter.PROGRESS_MONITOR, progressMonitor);
    exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
    exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, output);
    exporter.exportReport(); 
```

现在导出工作正常，我可以看到我生成的`CSV`文件具有正确的列和值。

我的问题是：

*   当我在模式下运行 jasperreport 时`TRACE`，我可以看到它会计算一大堆文本的宽度和高度，这对于所有类型的导出都可以，但对于 CVS 文件（平面文件）则没有必要。我怎样才能告诉 jasper 不要进行所有这些计算？（我使用 a`JRSwapFileVirtualizer`并且交换文件现在超过 1GB 并且计数为 300k 记录）

我正在使用 jasperreport 4.5.1

# asterisk - 从 2 个星号服务器加入 CDR 记录

> ID：12735554
> 
> 赞同：2
> 
> 时间：2012-10-04T20:39:57.833
> 
> 标签：asterisk, asteriskami

我有 2 个星号服务器（server_A 和 server_B），在这两个服务器上我都将 CDR 记录存储在 MySql 中。我的问题：当来自 server_A 的用户调用来自 server_B 的用户时，有什么方法可以从两台服务器加入 CDR 记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:45:54.583

在这种情况下，您可以通过在 asterisk.conf 文件中设置 systemname 来自动将系统标识符附加到唯一 ID 的前面（对于您的每个框）：

```
[options]
systemname=server_A 
```

更多信息：

*   [http://ofps.oreilly.com/titles/9780596517342/asterisk-DB.html#setting_systemname](http://ofps.oreilly.com/titles/9780596517342/asterisk-DB.html#setting_systemname)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:52:50.813

对于每个 SIP 设备，请确保您定义：

```
accountcode=the_user_id+the_server_id 
```

... 或者 ...

```
setvar=user_server=the_user_id+the_server_id 
```

...您自然会用有意义的数据替换“the_user_id+the_server_id”。

然后，您可以调整 MySQL CDR，以便将“accountcode”或“user_server”存储为字段。如果您想变得非常聪明——无论如何数据容错可能是一个好主意——在两台服务器之间设置 MySQL 复制，这样您实际上是在为 CDR 数据写入相同的数据库/表。

进一步阅读：

*   [http://www.voip-info.org/wiki/view/Asterisk+variables](http://www.voip-info.org/wiki/view/Asterisk+variables)
*   [http://onlamp.com/pub/a/onlamp/2006/04/20/advanced-mysql-replication.html](http://onlamp.com/pub/a/onlamp/2006/04/20/advanced-mysql-replication.html)

# asp.net - NetShareEnum 访问被拒绝

> ID：12735559
> 
> 赞同：1
> 
> 时间：2012-10-04T20:40:25.733
> 
> 标签：asp.net

我有 IIS 7.5 托管的 asp.net 应用程序。我使用 NetShareEnum 函数从网络计算机获取共享文件夹。Web 应用程序从 LocalSystem 运行，因此函数始终返回 Access Denied 错误，因为 LocalSystem 没有共享权限。我该如何解决这个问题？任何想法？

# list - 将整数列表转换为列表元组

> ID：12735560
> 
> 赞同：1
> 
> 时间：2012-10-04T20:40:41.223
> 
> 标签：list, f#, tuples

我正在尝试将整数列表转换为递归函数中的列表元组。

假设我有一个整数列表，`[1;2;3;4;5;6;7;8]`我想把它变成`([1;3;5;7],[2;4;6;8])`不同边的奇数和偶数

我面临着很多问题，例如预期的结果，`'a list * 'a list`而且我有一个`'b * 'c`偶数`'b & 'c`是整数列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T20:49:32.570

由于您专门要求递归函数..：

```
let partitionNumbers nums =
    let rec impl odds evens = function
      | []                   -> odds, evens
      | n::ns when n % 2 = 1 -> impl (n::odds) evens ns
      | n::ns                -> impl odds (n::evens) ns
    List.rev nums |> impl [] [] 
```

然而，更惯用的方法是（*几乎*总是）使用高阶函数：

```
let partitionNumbers = List.partition (fun n -> n % 2 = 1) 
```

# c++ - 如何在 C++ 中同时子类化多个类？

> ID：12735564
> 
> 赞同：2
> 
> 时间：2012-10-04T20:41:04.207
> 
> 标签：c++, oop, derived-class

我有三个彼此紧密耦合的课程，我想同时专攻这三个课程。三个派生类应该使用与超类相同的接口相互通信，另外还有一些我将在派生版本中添加的额外接口。是否有一种合理的模式可以用来在 C++ 中实现这种“同时推导”关系？

更具体地说：我正在扩展一个显示和编辑图形的 UI 组件。涉及三个类：

*   CGraph，UI 小部件本身；
*   CSeries，保存数据并由 CGraph 操作；
*   CValue，代表系列中的一个值，其列表归CSeries所有。

我计划添加派生类 CNewGraph、CNewSeries 和 CNewValue（占位符名称）。

```
CGraph     ---views/edits--->  CSeries     ---owns list of--->  CValue
  ^                              ^                                ^
  | is-a                         | is-a                           | is-a
  |                              |                                |
CNewGraph  ---views/edits--->  CNewSeries  ---owns list of--->  CNewValue 
```

例如，我遇到的问题是 CSeries 在其定义中引用了 CValue：

```
class CSeries
{
public:
    CValue & FindValue(/* stuff */);
private:
    vector<CValue> m_values;
}; 
```

在 CNewSeries 中，它应该是 CNewValue 的向量，而 FindValue 应该返回一个 CNewValue 引用，等等。类似地，CGraph 在其定义中引用了 CSeries，但 CNewGraph 应该使用 CNewSeries。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:41:04.207

一种可能性是根据值类型对 CSeries 进行模板化。然后，您可以创建一个派生类来指定要使用的特定值类型，如果不需要其他成员，甚至可以创建 typedef。

```
template <typename T>
class CSeriesBase
{
public:
    T & FindValue(/* stuff */);
private:
    std::vector<T> m_values;
};

typedef CSeriesBase<CValue> CSeries;

class CNewSeries : public CSeriesBase<CNewValue>
{
    /* additional members */
}; 
```

但是，这破坏了继承关系，因此 CNewSeries 现在不是从 CSeries 派生的。这意味着任何其他使用 CSeries 的东西都不能无缝地使用 CNewSeries。特别是，CGraph 也需要模板化，这次是在系列类型上。

```
template <typename T>
class CGraphBase
{
public:
    void SetSeries(T * pSeries);
private:
    T * m_pSeries;
};

typedef CGraphBase<CSeries> CGraph;

class CNewGraph : public CGraphBase<CNewSeries>
{
    /* additional members */
}; 
```

对于只有三个课程，这还不算太糟糕，尽管我可以想象如果您有更多课程需要与 CSeries 对话，它会变得很麻烦。

# css - 多列列表

> ID：12735566
> 
> 赞同：1
> 
> 时间：2012-10-04T20:41:13.063
> 
> 标签：css

我正在使用 ul/li 创建一个 wordpress 类别的多列图库视图。但是除了第一行之外的所有行都有左边距..

我看不出我做错了什么！

[http://spirit.no/category/musikkanmeldelser/](http://spirit.no/category/musikkanmeldelser/)

我有没有用 for 循环解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:42:58.990

这是由这个 CSS 引起的：

```
.last-posts li:first-child {
  margin-left: 0px;
} 
```

[http://spirit.no/wp-content/themes/spirit/style.css](http://spirit.no/wp-content/themes/spirit/style.css)第 235 行

用这个 CSS覆盖`margin-left`给定的`.last-posts li`元素：

```
.last-posts li.the-post {
  width: 290px;
  min-height: 270px;
  float: left;
  margin-left: 15px;
  position: relative;
} 
```

您可以摆脱`:first-child`CSS 或在每个帖子中添加一个类，首先在接收`margin-left: 0px;`. 这取决于你，有很多方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:43:39.330

这是因为您的图像上有左边距或填充。将其更改为右填充或边距，并确保将填充/边距宽度计入`li`元素的宽度：

```
.last-posts li.the-post {
    width: 290px;           <== subtract margin/padding width here
    min-height: 270px;
    float: left;
    margin-left: 15px;
    position: relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:45:11.390

`:first-child`由于适用于该容器的样式，第一个列表项没有边距。您可以在每第三个列表项之后删除边距

```
.last-posts li:nth-child(3n+1) {
    margin-left: 0;
} 
```

这将在三列中显示您的列表项，正如我假设您想要的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:57:48.953

在您的 CSS 中，您设置了左边距：

```
.last-posts li.the-post {
width: 290px;
min-height: 270px;
float: left;
margin-left: 15px;
position: relative;
} 
```

间距在第一行之后偏移每一行。

# iphone - UIImages的airplay按钮

> ID：12735567
> 
> 赞同：0
> 
> 时间：2012-10-04T20:41:13.357
> 
> 标签：iphone, ios6, airplay

Airplay 按钮显示在 UIToolbar 上，但单击它时没有任何反应。它应该打开播放选择器。但事实并非如此。

```
 UIButton *volumeView = [UIButton buttonWithType:UIButtonTypeCustom];
    [volumeView addTarget:self action:@selector(MPVolumeView:) forControlEvents:UIControlEventTouchUpInside];

    volumeView.frame = CGRectMake(0, 0, 40, 40);

    UIImage *icon = [UIImage imageNamed:@"airplay-1.png"];

    [volumeView setImage:icon forState:UIControlStateNormal];

    UIBarButtonItem *volumeview = [[UIBarButtonItem alloc] initWithCustomView:volumeView];

-(void)MPVolumeView:(id)sender
  {
  MPVolumeView *volumeView = [[MPVolumeView alloc] init];
  [volumeView setShowsVolumeSlider:NO];
  [volumeView setShowsRouteButton:YES];
 // [volumeView sizeToFit];
  [volumeView release];
  } 
```

我没有看到代码有任何问题，但仍然想知道为什么它没有为应用程序中的滚动视图图像打开 airplay 选择器。实际上在这种情况下，airplay 是针对 uiimages 的。我们可以播放 UIImages。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:04:35.530

创建 MPVolumeView 的实例实际上并不会打开 Airplay 选择器，它会创建一个按钮，按下该按钮会打开选择器。

尝试这样的事情：

```
MPVolumeView *myVolumeView = [[MPVolumeView alloc] initWithFrame:CGRectMake(0, 0, 45, 33)];
myVolumeView.showsVolumeSlider = NO;
myVolumeView.showsRouteButton = YES;

UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithCustomView:myVolumeView]; 
```

# c# - 如何在 c# 中模拟鼠标点击，这将在游戏中起作用？

> ID：12735569
> 
> 赞同：2
> 
> 时间：2012-10-04T20:41:25.580
> 
> 标签：c#, winapi, click, mouse

当我玩帝国时代或其他策略游戏时，我经常需要将一些资源卖 100 次，然后再卖一次。这很烦人 ：（

我编写了一个程序，通过单击鼠标来帮助我：

```
//This is the decleration
[DllImport("user32.dll",CharSet=CharSet.Auto, CallingConvention=CallingConvention.StdCall)]
public static extern void mouse_event(long dwFlags, long dx, long dy, long cButtons, long dwExtraInfo);

private void ClickTheMouse()
{
      int X = Cursor.Position.X;
      int Y = Cursor.Position.Y;
      mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP, X, Y, 0, 0);
} 
```

然后通过使用计时器和上面的代码，我可以点击 30 次。

它在 windows 中（word、Firefox 等）甚至在帝国时代都可以很好地工作，但不幸的是，它在“要塞十字军”和其他一些我不记得他们的名字的游戏中不起作用。

我认为发生这种情况是因为点击模拟在高级别，如果模拟更接近驱动程序级别，它将起作用。

我有 2 个问题：

1.  我的假设正确吗？
2.  如何在较低级别模拟鼠标点击，这将在这个游戏中起作用？

我使用 c# ，但任何 c++ 代码也会有所帮助（我将只使用 PInvoke）。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:10:41.670

我曾一度面临同样的问题。您是否尝试通过 VS2010 中的发布/调试编译器使用该应用程序？如果是这样，请尝试单独运行单独的编译文件，如果适用，请记住以管理员身份运行它。

无论出于何种原因，当由 VSHost 托管时，我的机器人都拒绝在某些游戏中正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:52:42.840

您可以尝试使用 SendInput 函数 n User32.dll：

[http://alala666888.wordpress.com/2010/09/17/simulate-mouse-event-using-sendinput-and-setcursorpos/](http://alala666888.wordpress.com/2010/09/17/simulate-mouse-event-using-sendinput-and-setcursorpos/)

但是，您将无法在具有更高完整性级别的应用程序中注入输入事件。我认为这正在发生在你身上。

# .net - 如何将 Oracle ODAC/ODP.NET 集成到我的持续集成流程中？

> ID：12735570
> 
> 赞同：1
> 
> 时间：2012-10-04T20:41:25.310
> 
> 标签：.net, oracle, continuous-integration, windows-server-2008, odac

我想确保在开始更改服务器之前我正在计划这个。请确认此路径是否可行。

## 目标

*   利用 Oracle 的 ODP.NET 对我目前在 Oracle 11g 上存在的企业数据库进行编码。

## 拼图

*   **开发机器**：Win7 Enterprise 64-bit
*   **服务器**：
    *   构建服务器（Windows 2008 R2 标准）
    *   生产服务器（相同）
*   **开发环境**：VS 2012
*   **开发堆栈**：ASP.NET MVC4、WebAPI、C#
*   **数据库**：Oracle 11g R(?)
*   **CI服务器**：CC.NET

## 我想我想做的事：

1.  通过 ODAC（通用安装程序）将 ODP.NET 安装到我的机器上
2.  将 ODP.NET 安装到我的构建服务器上（通过 xcopy）
3.  在我的机器上创建 ODBC 连接并构建服务器
4.  测试 ODBC 连接
5.  使用 Oracle 的 Provider 在本地测试我的代码以连接到 ODBC 连接
6.  像往常一样运行 CI 进程

## 问题

通过这种方式接近它，我是否会让自己承受任何痛苦？

该文档不一定提到如何设置它或它适合的位置，但似乎这应该是完成我想要做的事情的方式。

# ios6 - 如何在 iOS 6 上将带有网络图像的网页共享到 Facebook？

> ID：12735576
> 
> 赞同：1
> 
> 时间：2012-10-04T20:41:58.490
> 
> 标签：ios6, facebook-ios-sdk

我希望我的 iPhone 应用使用 SDK 3.1 将带有在线图像的网络文章分享到 Facebook。我让它分享页面的 url，它会在你的 facebook 上显示图像，但不会在共享预览中显示图像。见照片。如果我添加 UIImage，它可以让我与图像共享，但我没有 UIImage，我不想每次有人共享时都上传图像，它已经在线。我可以在 SDK 3.0 中轻松完成所有这些工作。我不在乎它是否共享文章的文本，我只是希望图像显示在预览和帖子中，当您在 Facebook 上单击它时，转到在线文章页面。

![facebook分享预览图片空白](../Images/43970c6c8f0e1f3daa3c46cdb2fec517.png)

# javascript - Yii 框架表单构建器 - 有没有办法在验证 javascript 中更改 inputID？

> ID：12735577
> 
> 赞同：0
> 
> 时间：2012-10-04T20:42:00.770
> 
> 标签：javascript, validation, frameworks, yii, formbuilder

在 Yii 中使用表单构建器时，有什么方法可以更改验证 javascript 中的 inputID？

我的问题是我在一页上有两个相似的表单（使用一个表单构建器代码）。这是登录表单，使用了两次。首先，在模板中（显示在网站的每个页面上）和第二个 - 相同的表单，用于 /site/login 页面（此页面用于在访问限制等情况下重定向用户）。

这两个表单工作正常，但是 yii 为两个表单的元素生成具有相同 inputID 的验证 javascript，我不知道如何更改它。看一看：

```
<script type="text/javascript">
/*<![CDATA[*/
jQuery(function($) {
jQuery('a[rel="tooltip"]').tooltip();
jQuery('a[rel="popover"]').popover();
$('#loginForm').yiiactiveform({'attributes':[{'id':'LoginForm_email','inputID':'LoginForm_email','errorID':'LoginForm_email_em_','model':'LoginForm','name':'LoginForm[email]','enableAjaxValidation':true,'inputContainer':'div.control-group'},{'id':'LoginForm_password','inputID':'LoginForm_password','errorID':'LoginForm_password_em_','model':'LoginForm','name':'LoginForm[password]','enableAjaxValidation':true,'inputContainer':'div.control-group'},{'id':'LoginForm_rememberMe','inputID':'LoginForm_rememberMe','errorID':'LoginForm_rememberMe_em_','model':'LoginForm','name':'LoginForm[rememberMe]','enableAjaxValidation':true,'inputContainer':'div.control-group'}]});
$('#quickLoginForm').yiiactiveform({'attributes':[{'id':'LoginForm_email','inputID':'LoginForm_email','errorID':'LoginForm_email_em_','model':'LoginForm','name':'LoginForm[email]','enableAjaxValidation':true,'inputContainer':'div.control-group'},{'id':'LoginForm_password','inputID':'LoginForm_password','errorID':'LoginForm_password_em_','model':'LoginForm','name':'LoginForm[password]','enableAjaxValidation':true,'inputContainer':'div.control-group'},{'id':'LoginForm_rememberMe','inputID':'LoginForm_rememberMe','errorID':'LoginForm_rememberMe_em_','model':'LoginForm','name':'LoginForm[rememberMe]','enableAjaxValidation':true,'inputContainer':'div.control-group'}]});
jQuery('#collapse_0').collapse({'parent':false,'toggle':false});
});
/*]]>*/
</script> 
```

这就是问题所在。我不明白，如何将其更改 `'id':'LoginForm_email','inputID':'LoginForm_email',` 为： `'id':'quickLoginForm_email','inputID':'quickLoginForm_email',` 使验证适用于两种形式。我试图更改表单 ID、表单标题、元素 ID、元素名称 (ofc) 但没有结果。是否可以在不更改表单文件名等的情况下动态更改它？我试图阅读 CActiveForm 源代码，但没有找到输入 ID 的位置。

Ofc 可以不在 /site/login 页面上显示布局表单，但这不是我认为的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T18:41:21.117

我们遇到了同样的问题，但是进行了广泛的研究，我们发现 Yii 已经支持更改 InputID 以便您的验证工作。

但是文档还没有完成。

要修复它，我们唯一要做的就是在错误字段中设置 InputID 以对应于您在属性字段中设置的 id。像这样：

```
<?php echo $form->error($model,'attribute',array('inputID'=>'custom-id')); ?> 
```

Yii 1.1.14 发布后，此更改的文档将可用。与此同时，如果你做我们所做的事情，它应该会起作用。

希望这适用于任何有同样问题的人。

参考：

1 强雪描述如何重现问题。[https://github.com/yiisoft/yii/issues/158](https://github.com/yiisoft/yii/issues/158)

2 mdomba 文档提交到 github 存储库。这解释了如何修复您的代码：[https ://github.com/yiisoft/yii/commit/65b9bd06e885b96cc08922282b79a9c78484a9bd](https://github.com/yiisoft/yii/commit/65b9bd06e885b96cc08922282b79a9c78484a9bd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:58:06.150

因此，在阅读 Yii 资源 3-4 小时后，让我发布我自己问题的答案。我们要在生成的 javascript 中更改的第一件事是错误 inputID。就像 mashingan 写的，如果你没有使用表单生成器，你可以在 $form->error 中设置。如果您使用的是表单生成器，则可以从 CFormInputElement 类的 errorOptions 属性访问错误选项：

```
 'elements'=>array(
        'email'=>array(
            'id'=>$this->id.'_email',
            'name'=>$this->id.'[email]',
            'type'=>'text',
            'maxlength'=>32,
            'label'=>false,
            'placeholder'=>'Your email address',            
            'errorOptions'=>array('inputID'=>$this->id.'_email','id'=>$this->id.'_email'),
        ), 
```

请注意，默认情况下，您无法访问此数组中的表单 ID 或其他内容。在构建表单对象时，您必须发送您的 $this->id （或任何您想要的名称）。我用构造函数创建了 MyForm 类，扩展了 CForm：

```
class MyForm extends CForm
{
public $id;
public function __construct($config, $model = null, $parent = null, $id = null) {
    if($id != null) $this->id = $id;
    parent::__construct($config, $model, $parent);
} 
```

然后我在布局中创建我的表单：

```
$quickLoginForm = new MyForm('application.views.site.loginForm', $model, null, 'QuickLoginForm'); 
```

或者

```
$loginForm = new MyForm('application.views.site.loginForm', $model, null, 'LoginForm'); 
```

上面的示例将允许您在 Yii 生成的验证 javascript 中动态更改 inputID 和 errorID。

现在让我们看看 yii 生成的 JS：

```
'id':'LoginForm_email','inputID':'QuickLoginForm_email','errorID':'QuickLoginForm_email' 
```

我们已经更改了 inputID 和 errorID，接下来我们必须更改以使我们对两个相同表单的验证工作是“id”。

但是怎么做？文档中没有关于此的信息。让我们看看 CActiveForm->error() 来源：

```
...
$id=CHtml::activeId($model,$attribute);
... 
```

好的，那么 CHtml::activeId 是做什么的？

```
public static function activeId($model,$attribute)
{
    return self::getIdByName(self::activeName($model,$attribute));
} 
```

...

```
public static function activeName($model,$attribute)
{
    $a=$attribute; // because the attribute name may be changed by resolveName
    return self::resolveName($model,$a);
} 
```

...

```
public static function resolveName($model,&$attribute)
{
...
    return get_class($model).'['.$attribute.']';
} 
```

真是他妈的天才！他们采用模型名称在生成的 javascript 中使用。不是表单 ID，不是元素名称，它们使用模型类名称！

我不知道，强雪抽了什么，但如果你想让验证javascript在一个页面上为两个相同的表单工作，你必须制作两个相同的模型。

因此，如果我们想在 javascript 中更改 'id'，我们必须这样做：

```
<?php
class QuickLoginForm extends LoginForm
{
} 
```

（LoginForm 是我们的模型）并在生成第二个表单时使用。

```
$quickLoginModel=new QuickLoginForm;
$quickLoginForm = new MyForm('application.views.site.loginForm', $quickLoginModel, null, 'QuickLoginForm'); 
```

恭喜！在进行了两次 hack 之后，我们的验证 javascript 可以在两个相同的表单上工作。我不知道如何谈论代码重用或将 Yii 命名为“可扩展框架”，如果您不能只在一个页面上制作两个登录表单而不像猴子一样在 yii javascript 生成器的源代码周围跳跃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:29:25.390

这应该有效：

```
<?php echo $form->textField($model, 'attr', array('id' => 'someId')); ?>
<?php echo $form->error($model, 'attr', array('inputID' => 'someId')); ?> 
```

不要忘记保持`input.id`和`error.inputID`相同。

# c# - 编写异步控制器并更新进度

> ID：12735586
> 
> 赞同：4
> 
> 时间：2012-10-04T20:42:39.120
> 
> 标签：c#, jquery, asp.net, .net, asp.net-mvc

我目前正在考虑使用 async/await 功能来：

1.  提交文件。
2.  例如，此文件可能包含一个或多个条目。（例如，可以是一个只有一个元素的 XML 文件，或者每个文件可以列出多个节点）
3.  我需要单独处理每个呼叫，将其添加到已完成项目列表中，并将进度作为单个任务完成后返回。（已完成：0/2 ----> 已完成 1/2...）
4.  这需要发送回视图，以便使用此功能的任何人都可以看到单个呼叫已被导入。

为此，我将使用 Json 异步更新页面/进度条。

我预见的问题是这样的：

当我调用提交以转到控制器时，我需要对每个单独的调用做出响应。在我提交文件并已经完成一些处理（以确定每个呼叫节点）之前，我不知道文件中有多少呼叫。是否有一种干净的方法可以为我添加到列表中的每个已完成项目获得响应？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T22:23:08.700

不幸的是，`async`无法`await`做到这一点。正如我在博客上解释的那样，[`async`不会更改 HTTP 协议](http://nitoprograms.blogspot.com/2012/08/async-doesnt-change-http-protocol.html)；每个请求你都会得到一个响应，就是这样。

因此，当文件被提交时，为该文件创建某种标识符并将其提交到持久后台队列进行处理。您可以使用轮询/长轮询/websockets/SignalR 来通知客户端进度。

请注意，ASP.NET 假定如果没有未完成的请求，您的进程可以被回收，因此处理应该由MVC 控制器以外的*其他东西完成。*类似于 Win32 服务或 Azure 辅助角色。

此外，如果这是针对 Web 场中的站点，则需要可从所有 Web 服务器访问您的持久队列。如果你在 Azure Web 角色上托管，它不能在磁盘（或 MSMQ）上，因为 Azure 将回收你的整个计算机 - 在这种情况下，它应该在 Azure 存储或服务总线中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:46:39.823

不确定您的确切要求是什么，但您可以使用现成的上传控件，例如 Telerik MVC 上传扩展及其免费！

[http://demos.telerik.com/aspnet-mvc/upload](http://demos.telerik.com/aspnet-mvc/upload)

或者您可以自定义滚动自己的；我在想的是，当用户上传 xml 文件/文件时，控制器方法可以将它们放入后台队列中进行处理，或者将其交给负责处理并返回票号的 Windows 服务客户端。公开另一个 webservice/restful 服务，该服务提供通过票号查询的文件上传的进度/状态，并让您的客户端/网站每隔一段时间查询 web 服务以获取进度并向用户显示进度。

认为您可能会发现使用现有的 MVC 上传扩展更容易，所以不需要重新发明轮子，我的想法是 :-)

# php - 当我更改标题时 cURL 冻结

> ID：12735588
> 
> 赞同：0
> 
> 时间：2012-10-04T20:42:40.563
> 
> 标签：php, ajax, post, curl, libcurl

我制作了一个 PHP 脚本来在网站上发送 HTTP 请求。当我不设置标题时，一切都“正常”。结果是错误的。但是当我更改标题时程序会冻结。这是我的代码：

```
$cookie_file_path='cookie';

$curl_connection =  curl_init('http://www.website.com/path/to/script');

curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);

curl_setopt($curl_connection, CURLOPT_USERAGENT,"Mozilla/5.0 (X11; Linux x86_64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1");

curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);

curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);

curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);

curl_setopt($curl_connection, CURLOPT_COOKIEJAR, $cookie_file_path);

curl_setopt($curl_connection, CURLOPT_COOKIEFILE, $cookie_file_path);

curl_setopt($curl_connection,CURLOPT_HTTPHEADER, array('Accept: application/json, text/javascript, */*; q=0.01','Accept-Language: fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3','Accept-Encoding: gzip, deflate','Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7','Content-Type: application/json; charset=utf-8','X-Requested-With: XMLHttpRequest','Content-Length: 179','Pragma: no-cache','Cache-Control: no-cache'));

//I use the same header as the website

$post_data=array();

$post_data['address'] = 'my_address';

$post_data['lastname'] = 'my_lastname';

 (...)

foreach ( $post_data as $key => $value)
    $post_items[] = $key . '=' . $value;

$post_string = implode ('&', $post_items);

curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);

$result = curl_exec($curl_connection);

file_put_contents('result.html',$result); 
```

主网页将 AJAX 中的 POST 请求发送到脚本，我正在尝试对 PHP 做同样的事情。当我注释掉这一行时，脚本不会冻结：

```
curl_setopt($curl_connection,CURLOPT_HTTPHEADER, array('Accept: application/json, text/javascript, */*; q=0.01','Accept-Language: fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3','Accept-Encoding: gzip, deflate','Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7','Content-Type: application/json; charset=utf-8','X-Requested-With: XMLHttpRequest','Content-Length: 179','Pragma: no-cache','Cache-Control: no-cache')); 
```

这可能是什么原因。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:46:44.967

一个可能的原因是您正在发送静态字符串；

```
Content-Length: 179 
```

...作为标题。如果您的内容实际上没有那么长，则 Web 服务器可能会在回复您的请求之前等待您永远不会发送的数据。

# gnuplot - 如何在行尾输出点/箭头

> ID：12735589
> 
> 赞同：1
> 
> 时间：2012-10-04T20:42:40.987
> 
> 标签：gnuplot

我是 gnuplot 的新手，我需要绘制我的数据并在折线图的每一端显示一个小圆圈或一个箭头。我怎样才能做到这一点？我使用这个命令来显示折线图：

```
plot 'data.txt' with lines 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:35:56.853

我不知道是否有办法让线条自动在末尾有一些东西，但我找到了一种解决方法。使用此数据文件：

```
1 1
2 3
3 2 
```

和以下脚本：

```
set term png
set out 'plot.png'

stats 'data.dat' name 'a'
# plot line, then circle only if it is the last data point
plot 'data.dat' t 'data', \
     '' u ($0==(a_records-1)?$1:1/0):2 with points pt 7 ps 2 t 'end' 
```

我可以制作这样的情节：

![在此处输入图像描述](../Images/73cea8b62d006fd4970e594ce7bec68c.png)

该`stats`命令是找到数据点的数量，然后对偶绘图命令绘制连接数据点的线，然后仅在最后一个数据点上画一个圆圈（由`a_records`变量确定。绘制箭头会更棘手......

要查找有关不同点/线样式选项的更多信息，`test`gnuplot 命令行中的命令是您的朋友。

# objective-c - 以编程方式更改值时调用 NSControl 的“valueChanged”

> ID：12735593
> 
> 赞同：3
> 
> 时间：2012-10-04T20:43:01.313
> 
> 标签：objective-c, cocoa, action, nsslider

我即将实现一个简单的音频推子。我将 NSSlider 和 NSSliderCell 子类化，以便能够相应地绘制图形。

每当按下 Cmd 键单击手柄时，我希望滑块跳到定义的位置。这在大多数音频应用程序中很常见。

将值设置为滑块可以正常工作，但它不会调用 action 方法来通知我的目标值已更改。这必须发生在“super”的 mouseDown 事件处理中的某个地方，可能在 NSControl 中。这是我到目前为止得到的：

```
- (void) mouseDown:(NSEvent *)theEvent
{
    if ( ([theEvent modifierFlags] & NSCommandKeyMask) > 0)
        [self setFloatValue:100.0f];
    else
        [super mouseDown:theEvent];
} 
```

我在 NSControl 文档中找到了一个看起来很有希望的方法：

> ```
> -(BOOL)sendAction:(SEL)theAction to:(id)theTarget Parameters : 
> ```
> 
> theAction ：在目标上调用的选择器。如果选择器为 NULL，则不发送任何消息。
> 
> theTarget ：接收消息的目标对象。如果对象为 nil，则应用程序在响应者链中搜索能够处理消息的对象。有关调度操作的更多信息，请参阅 NSActionCell 的类描述。

但我不知道选择器的名称是什么。目标可能是超级？

任何帮助深表感谢！！

最好的，

弗洛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:20:31.247

I found an answer myself. Although the answer of @rdelmar might also work, it won't anymore if you change the name of the action method.

I found a universal way of triggering the action method manually:

```
- (void) mouseDown:(NSEvent *)theEvent
{
    if ( ([theEvent modifierFlags] & NSCommandKeyMask) != 0)
    {
        [self setFloatValue:100.0f];
        [self.target performSelector:self.action withObject:self];
    }
    else
        [super mouseDown:theEvent];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:02:41.520

动作可以是您已经用于滑块的动作方法的名称，目标应该是实现该方法的类实例。因此，例如，如果您的应用程序委托中有一个 IBAction 连接到名为 sliderReport: 的滑块，那么请执行以下操作：

```
[self sendAction:@selector(sliderReport:) to:[NSApp delegate]]; 
```

附加说明：我从您的问题中假设您想调用已连接到滑块的相同 IBAction，但如果需要，您可以发送不同的选择器 - 如果您需要区分滑块值的更改方式，则一种不同的方法将是要走的路。您可以将其命名为任何您想要的名称（末尾有一个冒号，因此如果您需要，它可以将自己作为 sender 参数发送）。

# java - 移动跨平台工具：什么时候有用？

> ID：12735595
> 
> 赞同：0
> 
> 时间：2012-10-04T20:43:08.020
> 
> 标签：java, android, ios, cordova

**问题：**我什么时候可以说跨平台工具可以处理这种类型的开发..？

以下**不是**要回答的问题。这些只是我提出问题以避免过长描述的指南。

1.  对于**游戏**开发：

    *   工具（即phoneGap、widgetPad 等...）是否足以进行游戏开发？
2.  对于**应用程序**开发：

    *   就像在原生 android 中一样，跨平台工具还能像原生 java 那样做吗？即访问通知、联系人等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:47:48.687

我想说的是，目前它还没有为**1**做好准备，而且真的不会很快到来（对于开发人员来说，这最终是一个挫折）。

至于**2**，它可以并且立即为您的问题做好准备。当然，您仍然必须调用原生 Java 或 Obj-C 才能获得一些真正的原生功能，但这一切都可以在与 Java 域交互的 Javascript/HTML 中完成。他们称之为插件，尽管有时升级是一场噩梦（1.9.0 之前，但 2.0.0 之后开发的任何东西（大部分）都不会处理这些问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:26:30.067

查看周一（2012 年 10 月 22 日）刚刚发布的 ADF Mobile 商业软件。它提供 Android 和 iOS 解决方案，它是基于 Java 的。信息可以在这里找到：

[http://www.oracle.com/technetwork/developer-tools/adf/overview/adf-mobile-096323.html](http://www.oracle.com/technetwork/developer-tools/adf/overview/adf-mobile-096323.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-24T09:34:10.703

随着平台和设备的多样性控制了移动领域，跨平台应用程序开发已成为一种商业上可行的选择。以下是十大跨平台移动应用开发工具 [https://www.rootinfosol.com/top-10-cross-platform-mobile-app-development-tools](https://www.rootinfosol.com/top-10-cross-platform-mobile-app-development-tools)

# asp.net - 在同一个工作进程中运行 ASP.NET WebForms 项目和 WebAPI 项目

> ID：12735598
> 
> 赞同：1
> 
> 时间：2012-10-04T20:43:29.567
> 
> 标签：asp.net, asp.net-web-api, webforms

有没有一种优雅的方法可以在同一个工作进程中并排运行来自两个单独的 ASP.NET Web 项目的代码？

### 背景

我的团队维护一个大型 ASP.NET WebForms 应用程序。我们还在开发使用 API 的 Android/iOS 应用程序，该 API 是我们使用 Microsoft 的新 WebAPI 框架构建的。

WebForms 应用程序和 API 目前在 IIS 中设置为单独的站点，但这不是一个可行的长期解决方案。我们的应用程序处理多个租户，每个租户都有不同的数据库。我们大量使用 NHibernate，每个客户端都需要自己的重`SessionFactory`对象。因此，WebForms 应用程序占用了大量内存，并且将 API 作为单独的 IIS 站点运行实际上使每个客户端所需的内存增加了一倍。

在 WebForms 应用程序中托管 API 应该能够共享 NHibernate 资源并减轻内存压力。

目前，Web 应用程序和 API 存在于不同的解决方案文件中，但它们都有一个指向通用业务逻辑/数据访问项目的链接，`Core`.

我们的 Web 应用程序解决方案如下所示（简化）：

```
MyWebFormsApplication
- Core
- WebFormsProject
- AnotherProject
- AnotherProject1
- AnotherProject2
- AnotherProject3 
```

我们的 API 解决方案如下所示：

```
MyAPI
- Core
- WebAPIProject 
```

理想情况下，我希望 Webforms 应用程序和 API 共同存在于同一个解决方案中：

```
MyHappyCombinedApplication
- Core
- WebFormsProject
- WebAPIProject
- AnotherProject
- AnotherProject1
- AnotherProject2
- AnotherProject3 
```

### 选项

我们可以将每个 API 文件作为链接添加到 WebForms 项目中，但这将是一个主要的维护麻烦。

我能想到的唯一其他选择就是完全放弃单独的 API 项目并合并 API 和 WebForms 项目。

我更愿意将 API 保留在自己的项目中的原因是，我们可以继续从一个较小的解决方案文件开发 API，该文件没有我们主要解决方案的所有额外包袱，这意味着更快的构建。

这甚至远程可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T02:51:36.960

这是相当老的帖子，不确定它是否仍然相关 - 但我现在才遇到这个 - 这是我的建议：

我建议您将您的 WebForms 转换为 webApp - 这是一个相当简单的过程并且非常强大（我已经这样做了几次）。

一旦 webforms 是 webApp，您就可以在同一站点下的同一工作 IIS 进程中使用它运行其他应用程序 - 这不会使您的内存加倍。

如果您需要更多详细信息，请告诉我。

# iphone - 将托管对象批量添加到核心数据？

> ID：12735604
> 
> 赞同：1
> 
> 时间：2012-10-04T20:43:43.030
> 
> 标签：iphone, objective-c, cocoa-touch, core-data

下面显示了我添加到 NSManagedObject 的子类中的方法，用于填充单个实体并将其添加到 Core Data。我有大约 1000 个对象要添加到数据库中（我是在循环中进行的，而不是如下所示的列表）我的问题是关于性能，是否将 1000 个对象中的每一个逐个添加会增加大量开销到核心数据（我认为它确实如此）。有没有办法存储每个托管对象并以单一（更快）的方式添加它们。

```
NSManagedObjectContext *context = [[self managedDocument] managedObjectContext];
[Atomal createAtomalInContext:context withName:@"H11" age:@57 andType:@"Nantar"];
[Atomal createAtomalInContext:context withName:@"H23" age:@22 andType:@"Nantar"];
[Atomal createAtomalInContext:context withName:@"H54" age:@11 andType:@"Nantar"];
[Atomal createAtomalInContext:context withName:@"H34" age:@98 andType:@"Nantar"];
[Atomal createAtomalInContext:context withName:@"H17" age:@35 andType:@"Nantar"]; 
```

.

```
+ (Atomal *)createAtomalInContext:(NSManagedObjectContext *)context withName:(NSString *)name age:(NSNumber *)age andType:(NSString *)type {
    Atomal *atomal = nil;
    atomal = [NSEntityDescription insertNewObjectForEntityForName:@"Atomal" inManagedObjectContext:context];

    // POPULATE PROPERTIES
    [atomal setName:name];
    [atomal setAge:age];
    [atomal setType:type];
    NSLog(@"CORE: Adding >>> %@ %@ %@", [atomal name], [atomal age], [atomal type]);
    return atomal;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:08:14.923

这应该没问题。如果您真的担心性能并且您的实施确实存在问题，那么您应该分析并获得真正的结果以进行工作，而不是仅仅征求意见。

说这应该是相当便宜的，因为所有托管对象都是在内存中创建的——当你调用`save:`Core Data 时，它就会开始命中磁盘。撞击磁盘的 IO 是缓慢的部分，所以如果你确保将其保持在最低限度，你应该没问题。

同样，您在这里做的更昂贵的事情之一是日志记录，即 IO 输出到日志，如果您在紧密循环中执行大量日志记录，您会真正注意到这种效果。

# javascript - 使用 history.js 对不同的 url 更改做出不同的响应

> ID：12735606
> 
> 赞同：1
> 
> 时间：2012-10-04T20:43:48.180
> 
> 标签：javascript, jquery, pushstate, history.js, html5-history

我正在使用 history.js，并且想在 url 更改时通过 ajax 调用内容。我有这个工作，但问题是我需要页面根据状态更改时加载的 URL 做出不同的响应。例如，在本地范围内，我需要将与右侧导航中的 URL 相关的页面加载到它们旁边的内容区域中。如果 URL 更改为我所在部分之外的范围，我希望 ajax 调用将页面加载到包含整个部分的容器中，包括右侧导航。如何使用 history.js 可靠地对 URL 做出不同的响应？

**例子：**

我有一些代码可以在单击右侧导航项时更改 URL：

```
var History = window.History;

$('#right-hand-nav a').on('click', function(event) {
  var place = $(this).attr('href');

  History.pushState("", "page title", place);  
  event.preventDefault();
}); 
```

...以及一些在 URL 更改时加载不同内容的代码：

```
History.Adapter.bind(window,'statechange',function() {
  var State      = History.getState()
      subContent = $('#sub-content');

  $.ajax({
    url: State.url,
    beforeSend : function() {
     // Would start pre-loader code
    },
    success    : function(result) {
     // Would end pre-loader code
     subContent.html(result);
    } 

  });
}); 
```

但是，如果我希望`onstatechange`事件处理程序在新 url 不在此子部分之外时做出不同的反应怎么办？如果我希望它替换`$('#primary-content').html()`而不是`$('#sub-content').html()`新 URL 导致 AJAX 请求提取不属于的内容`$('#sub-content')`怎么办？：

**基本 HTML：**

```
<section id="primary-content">
  <section id="sub-content">
  </section>
  <nav id="sub-navigation">
  <ul>
    <li>
      <a href="#">Nav item</a>
    </li>
    <li>
      <a href="#">Nav item</a>
    </li>
    <li>
      <a href="#">Nav item</a>
    </li>
  </ul>
  </nav>
</section> 
```

**当 URL 更改为：** www.example.com/sub-section/page.html

```
<section id="primary-content">
  <section id="sub-content">
    <!-- ajax should load content here -->
  </section>
  <nav id="sub-navigation">
  <ul>
    <li>
      <a href="#">Nav item</a>
    </li>
    <li>
      <a href="#">Nav item</a>
    </li>
    <li>
      <a href="#">Nav item</a>
    </li>
  </ul>
  </nav>
</section> 
```

**当 URL 更改为：** www.example.com/page.html

```
<section id="primary-content">
    <!-- ajax should load content here -->
</section> 
```

您如何使用 安全地确定 URL 何时转到不同的部分`history.js`？你对这种变化有何反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:57:40.913

您可以在 History.js 之上使用路由器抽象，这是一个相当低级的 API，将 URL 路由到您的不同功能。例如，我编写了一个名为[StateRouter.js](https://github.com/aknuds1/staterouter.js)的 History.js 路由库。它处于开发的早期阶段，但如果您发现它缺少解决问题的功能，我很乐意听取您的意见。要查看 API 必须提供什么，请查看“spec/StateRouterSpec.js”中的 Jasmine 测试。您可以像这样应用 StateRouter.js：

```
var router = new staterouter.Router();
router
  .route('/', loadHomePage)
  .route('/page.html', loadSection)
  .route('/sub-section/page.html', loadSubsection);
// Perform routing of the current state
router.perform(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:47:54.580

您可以使用正则表达式来区分不同的 url 并确定“容器”元素。

```
History.Adapter.bind(window, 'statechange', function()
{
    var State = History.getState(),
        containerElement;

    // Use regex to distinguish urls
    if (/\/sub-url$/i.test(State.url))
    {
        containerElement = $("#sub-content");
    }
    else
    {
        containerElement = $("#primary-content");
    }

    $.ajax({
        url: State.url,
        beforeSend: function()
        {
            // Would start pre-loader code
        },
        success: function(result)
        {
            // Would end pre-loader code
            containerElement.html(result);
        }
    });
}); 
```

# scala - for-yield-getOrElse 是典型的 Scala 还是有更好的方法？

> ID：12735611
> 
> 赞同：7
> 
> 时间：2012-10-04T20:44:07.537
> 
> 标签：scala

基本上我想提取一堆选项 a、b 等。这是在 Scala 中执行此操作的最佳方法吗？括号中的 for-yield 让我有点困惑。

```
(for {
  a <- a
  b <- b
  c <- c
  ...
} yield {
  ...
}) getOrElse {
  ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T20:45:58.920

尝试使用`map`and`flatMap`代替。假设您具有以下类层次结构：

```
case class C(x: Int)
case class B(c: Option[C])
case class A(b: Option[B])

val a = Some(A(Some(B(Some(C(42)))))) 
```

为了提取`42`你可以说：

```
a.flatMap(_.b).flatMap(_.c).map(_.x).getOrElse(-1) 
```

这大致相当于：

```
for(
  a <- a
  b <- a.b
  c <- b.c)
      yield c.x 
```

除了它返回`Some(42)`. 事实上`for`，理解实际上被翻译成一系列`map`/`flatMap`调用。

# c# - 使用 AddHandler 在功能上是否与 Event += Method 不同？

> ID：12735613
> 
> 赞同：1
> 
> 时间：2012-10-04T20:44:12.563
> 
> 标签：c#, silverlight, events

我有两行代码：

```
textBox_ssn.KeyDown += ButtonSS;

textBox_ssn.AddHandler(Control.KeyDownEvent, new KeyEventHandler(ButtonSS), true); 
```

据我所知，它们都以相同的方式工作，但幕后是否发生了一些不同的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:47:05.257

使用 AddHandler，您可以为同一事件多次添加相同的处理程序，而不会引发异常。但是，在处理事件时，实际上会多次调用管理器。

因此，请考虑此行为如何产生应在处理程序实现中解释的副作用。

# ajax - 将空字符串数组传递给 WebMethod 时出现 IndexOutOfRangeException

> ID：12735614
> 
> 赞同：0
> 
> 时间：2012-10-04T20:44:14.803
> 
> 标签：ajax, arrays, webmethod, indexoutofboundsexception, string

尝试了我能想到的所有组合：String.Empty、IsDBNull。

selectPONumber 从“selectPONumber: [' + JSON.stringify('') + ']” 传递给“ByVal selectPONumber() As String”

StackTrace 指向这个 VB 的第二行

**VB**

```
 If Not IsDBNull(selectPONumber) Then
        If selectPONumber.Length > 1 Then
            qry = qry + "and ("
            For u As Integer = 0 To selectPONumber.Length - 1
                If u <> selectPONumber.Length Then
                    qry = qry + "and B.PONumber = '" & selectPONumber(u) & "' or "
                Else
                    qry = qry + "and B.PONumber = '" & selectPONumber(u) & "'"
                End If
            Next
            qry = qry + ") "
        Else
            qry = qry + "and B.PONumber = '" & selectPONumber(0) & "' "
        End If
    End If 
```

提前谢谢了！

**更新**

用计数替换了所有长度，并接受了tranceporter的建议。现在，它在“for”行上给出了相同的错误。它是如何通过 If selectPONumber.Length > 1 的？

**更新代码**

```
 If selectPONumber IsNot Nothing AndAlso selectPONumber.Count > 1 Then
            qry = qry + "and ("
            For u As Integer = 0 To (selectPONumber.Count - 1)
                If u <> selectPONumber.Count Then
                    qry = qry + "B.PONumber = '" & selectPONumber(u) & "' or "
                Else
                    qry = qry + "B.PONumber = '" & selectPONumber(u) & "'"
                End If
            Next
            qry = qry + ") "
    ElseIf selectPONumber(0) <> "" Then
        qry = qry + "and B.PONumber = '" & selectPONumber(0) & "' "
    End If 
```

**解决方案**

tranceporter 的解决方案是正确的。我愚蠢地将常规字符串视为代码中其他地方的数组。它开始将整个函数的其余部分都指向 indexoutofbounds。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:50:37.983

尝试使用这个（除非你已经有）

```
If selectPONumber IsNot Nothing Then
    If selectPONumber.Count > 0 Then
       qry = qry + "and ("
        For u As Integer = 0 To selectPONumber.Count - 1
            If u <> selectPONumber.Count Then
                qry = qry + "B.PONumber = '" & selectPONumber(u) & "' or "
            Else
                qry = qry + "B.PONumber = '" & selectPONumber(u) & "'"
            End If
        Next
        qry = qry + ") "
    Else
        qry = qry + "and B.PONumber = '" & selectPONumber(0) & "' "
    End If
End If 
```

# sql-server-2008 - 带有 FOR XML 的 SQL Server EXPLICIT 模式

> ID：12735615
> 
> 赞同：4
> 
> 时间：2012-10-04T20:44:15.583
> 
> 标签：sql-server-2008, tsql, for-xml, for-xml-explicit

我正在使用 SQL Server 2008，并且正在尝试使用`EXPLICIT`带有`FOR XML`.

我有以下查询的一对多关系

```
select  
    p.personid, p.firstname, a.P_City 
from 
    tblPeople p with (nolock) 
left outer join 
    tblAddresses a with (nolock) on p.personid = a.personid 
where 
    p.personid = 120773 
```

![在此处输入图像描述](../Images/dcf3f88135786b82690d75e5e73ff662.png)

我希望作为父母的人和作为孩子的地址可能是多重的，因为人们要解决的问题是一对多的关系。

我写了以下查询

```
 select 1 as TAG,
        null as parent, 
        p.personid as [person!1!personid],
        p.FirstName as [person!1!firstname],

        null as [addr!2!] 
        from tblPeople p with (nolock) where p.PersonID in (120773,117396)

        union all 

select 2,1, 
        p.PersonID, p.FirstName, a.P_City from tblAddresses a with(nolock), tblPeople p 
        where p.PersonID=a.PersonID and p.PersonID in (120773,117396)

        for xml explicit 
```

输出如下，这是嵌套的人破坏的xml，我的代码肯定有问题。

```
<person personid="117396" firstname="David"/>
    <person personid="120773" firstname="Doyle">
        <addr>Mount Rainier</addr>
        <addr>Annapolis</addr>
</person> 
```

有没有人可以帮帮我！！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T20:53:34.003

我建议放弃`FOR XML EXPLICIT`并`FOR XML PATH/ROOT`改用。

在此处使用此查询：

```
select  
    p.personid AS "@ID", 
    p.firstname, p.LastName,
    (
        SELECT AddressID AS "@ID", City
        FROM dbo.Address a 
        WHERE a.PersonID = p.PersonID
        FOR XML PATH('addr'), TYPE
    ) AS Addresses
from 
    Person p with (nolock) 
where 
    p.personid = 120773
FOR XML PATH('Person'), ROOT('People') 
```

你会得到这个输出 XML：

```
<People>
  <Person ID="120773">
    <firstname>John</firstname>
    <LastName>Doyle</LastName>
    <Addresses>
      <addr ID="1">
        <City>Annapolis</City>
      </addr>
      <addr ID="2">
        <City>Mount Rainier</City>
      </addr>
    </Addresses>
  </Person>
</People> 
```

根据需要对其进行调整。阅读有关[`FOR XML PATH`MSDN](http://msdn.microsoft.com/en-us/library/ms189885.aspx)的更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:46:14.267

为了正确使用 FOR XML EXPLICIT，ORDER BY 是基础。检查这个

```
select 1 as TAG,
        null as parent, 
        p.personid as [person!1!personid],
        p.FirstName as [person!1!firstname],

        null as [addr!2!] 
        from tblPeople p with (nolock) where p.PersonID in (120773,117396)

        union all 

select 2,1, 
        p.PersonID, p.FirstName, a.P_City from tblAddresses a with(nolock), tblPeople p 
        where p.PersonID=a.PersonID and p.PersonID in (120773,117396)
ORDER BY [person!1!personid], [addr!2!] 
        for xml explicit 
```

# jquery - jquery 选择器作为自定义属性

> ID：12735621
> 
> 赞同：1
> 
> 时间：2012-10-04T20:44:27.413
> 
> 标签：jquery

我正在使用 jquery，当鼠标悬停在具有 data-code=GB 属性的元素上时，如何触发警报？

我试过这个没有运气...

```
 $(".jvectormap-container path[data-code='GB']").mouseover(function(){
     alert('test');
  }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:05:00.400

稍作修改，它对我有用。我补充说——

```
<head>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
 <script>
   $(document).ready(function(){
     $('.jvectormap-container path[data-code="GB"]').bind('mouseover', function(){
       alert('test');
     });
   });
  </script>
</head> 
```

工作副本在这里：http: [//jsbin.com/uwatiz/5/edit](http://jsbin.com/uwatiz/5/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:54:45.937

为什么不使用 jVectorMap 的标准参数`onRegionOver`？您的代码在 IE 中不起作用，因为 IE 中没有`path`元素，而是使用它`shape`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:56:28.087

你有一个div内的路径。这是错误的。通过正确使用路径，您的 js 代码可以正常工作。

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="jvectormap-container">
 <path d="M150 0 L75 200 L225 200 Z" data-code='GB' />
</svg> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:24:12.917

试试这个

```
$(function() {
    $(".jvectormap-container").filter("path[data-code='GB']").on('mouseover',function(){
        alert('test');
    });
}); 
```

# ios - 分隔符是 UITableViewCell 的一部分吗？

> ID：12735622
> 
> 赞同：2
> 
> 时间：2012-10-04T20:44:29.183
> 
> 标签：ios, uitableview

我编写了一个自定义 GridView（UIScrollView 子类）并决定使用标准`UITableViewCells`作为单元格，因为它们具有我需要的所有功能。

一切正常，但我注意到有时我在单元格顶部有一条细灰线。
我实际上认为`UITableView`处理单元格的分隔符，它们实际上不属于 a`UITableViewCell`但似乎我错了。

事实上，我想摆脱它们，但我不知道如何。

有没有人有这方面的经验，或者是制作具有 a 功能的自定义单元类的唯一方法`UITableViewCell`？

这是一个屏幕截图：
![在此处输入图像描述](../Images/442fd63989db47019729f4c816656fce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:47:01.390

经过一些实验，尝试错误和子视图迭代/检查我可以看出分隔符绝对是`UITableViewCell`. 感谢@Valeriy Van。

> 我的第一个问题的答案很简单：**是**的，分隔符是 a 的一部分`UITableViewCell`。

但是它是由 TableView 严格处理的`UITableView`，如果没有被 TableView 填充，则为空。

* * *

现在到上图中的行：

这些**不是**分隔符。他们看起来就是这样，真是太巧合了。

当图形试图在亚像素精确坐标处绘制某些东西时，它们就会发生。
当可见对象（视图层）的坐标和/或大小（框架）在两个整数值之间并且 GL 尝试正确渲染它时，就会发生这种情况。

由于“过度精确”的帧，Gl 尝试插入整数帧或只是不正确地舍入。

因此，如上图所示，可能会发生第一行被拉伸或 y 坐标错误一个像素的情况。

`UITableView`如果您返回单元格高度的“过度精确”值，这也可能发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:05:54.453

`tableView.separatorStyle = UITableViewCellSeparatorStyleNone;`

**编辑：**

下面是 UITableView.h 中的一行
`@property(nonatomic) UITableViewCellSeparatorStyle separatorStyle; // default is UITableViewCellSeparatorStyleSingleLine`

UITableViewCell、UITableView、UITableViewController 旨在协同工作。而您的问题是您尝试单独使用 UITableViewCell 。从逻辑上讲，单元格分隔符不是单元格的特征，而是表格的特征。这就是为什么 separatorStyle 是 UITableView 的属性，而不是 UITableViewCell 的原因。嗯，不同的方法是可能的，苹果选择了这个。查看 UITableView.h 中“分隔符”子字符串出现的次数。查看 UITableViewCell.h：UITableViewCell 引用了 UITableView。如果 _tableView 为 nil，UITableViewCell 的编码足够准确，不会崩溃。我认为，如果 _tableView 为 nil，则单元格应用相同的默认值并使用默认分隔符绘制自身。

在你的情况下，你能做些什么来摆脱分隔符？如果您不能按照设计的方式使用 UITableView，请以某种方式作弊。尝试为单元格提供一些具有您需要的属性的愚蠢表格视图。

# arrays - 如何定义其值包含字符串类型的固定长度数组的映射？

> ID：12735623
> 
> 赞同：0
> 
> 时间：2012-10-04T20:44:27.427
> 
> 标签：arrays, scala, map

我试图将二十一点游戏的基本策略表示为具有整数键的地图，其值是固定长度的字符串数组。键代表玩家手牌的值，数组索引代表庄家上牌的值（因此大小为 10 的固定长度数组对应于牌值 2-11）。数组中对应庄家上牌位置的字符串值包含了理想的玩法（留、打、分、加倍）。

IE) 玩家手牌值是硬 8，庄家上牌是 2。基本策略说玩家应该击中。为了使用我的地图来确定这一点，我将获取键为 8 的数组（玩家手牌值 = 8），然后查看数组索引 0 中的字符串（庄家牌 = 2）。

我试图这样定义它：

```
val hardHandBasicStrategy = collection.mutable.Map[Int,Array[String](10)] 
```

但 Scala 似乎不喜欢这样......

请帮助我了解我做错了什么，和/或提出一种使它起作用的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:06:54.387

Scala 没有表示固定大小数组的类型。你可以简单地使用大小为 10 的数组——这是通常所做的——或者，如果你想要更强有力地保证它确实是大小为 10，你可以自己构造一个十长数组类：

```
class ArrayTen[T: ClassManifest](zero: T) {
  protected val data = Array.fill(10)(zero)
  def apply(i: Int) = data(i)
  def update(i: Int, t: T) { data(i) = t }
  protected def set(ts: Array[T]) { for (i <- data.indices) data(i) = ts(i) }
  def map[U: ClassManifest](f: T => U) = { 
    val at = new ArrayTen(null.asInstanceOf[U])
    at.set(data.map(f))
    at
  }
  def foreach(f: T => Unit) { data.map(f) }
  override def toString = data.mkString("#10[",",","]")
  override def hashCode = scala.util.MurmurHash.arrayHash(data)
  override def equals(a: Any) = a match {
    case a: ArrayTen[_] => (data,a.data).zipped.forall(_ == _)
    case _ => false
  }
  // Add other methods here if you really need them
} 
```

例子：

```
scala> new ArrayTen("(nothing)")
res1: ArrayTen[java.lang.String] = 
  #10[(nothing),(nothing),(nothing),(nothing),(nothing),
  (nothing),(nothing),(nothing),(nothing),(nothing)]

scala> res1(3) = "something!!!"

scala> res1
res3: ArrayTen[java.lang.String] = 
  #10[(nothing),(nothing),(nothing),something!!!,(nothing),
  (nothing),(nothing),(nothing),(nothing),(nothing)] 
```

如果您需要固定长度的数组来获取确定长度的参数，那么您应该

```
trait Size { size: Int }
class ArraySize[S <: Size, T: ClassManifest](zero: T, s: Size) {
  protected val data = Array.fill(s.size)(zero)
  ...
} 
```

除非您重新实现它们，否则您不会拥有所有集合的好东西，但是您又不*想要*大多数好东西，因为它们中的大多数都可以更改数组的长度。

# asp.net - IIS 未运行 ASP.NET MVC 应用程序

> ID：12735628
> 
> 赞同：14
> 
> 时间：2012-10-04T20:44:49.747
> 
> 标签：asp.net, asp.net-mvc, iis-7

我已将一个 asp.net MVC 应用程序部署到我的 IIS7 服务器。当我尝试浏览默认路由时，我收到消息

HTTP 错误 403.14 - 禁止

Web 服务器配置为不列出此目录的内容。

我很清楚它没有加载/处理 global.asax，但我不知道为什么。我已经将另一个 MVC 应用程序部署到同一个位置/应用程序池，它工作正常。

有谁知道如何调试这样的问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-04T20:58:23.313

也许：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/> 
</system.webServer> 
```

或者

*   [IIS 7.5 上的 ASP.NET MVC](https://stackoverflow.com/questions/2374957/asp-net-mvc-on-iis-7-5)
*   [IIS 7 中的 ASP MVC 导致：HTTP 错误 403.14 - 禁止](https://stackoverflow.com/questions/1741439/asp-mvc-in-iis-7-results-in-http-error-403-14-forbidden)
*   [无法在 IIS 7.5 上运行 ASP.NET MVC 2 Web 应用程序](https://stackoverflow.com/questions/2659544/cant-run-asp-net-mvc-2-web-app-on-iis-7-5)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-02-02T07:15:24.457

我尝试了很多，最后一个复选框成功了

[![在此处输入图像描述](../Images/d6d10bd11fb6f11db228cfd85f012a63.png)](https://i.stack.imgur.com/YShHw.png)

# java - 开始 Xlet (javax.microedition.xlet) 开发的步骤是什么？

> ID：12735630
> 
> 赞同：3
> 
> 时间：2012-10-04T20:44:53.603
> 
> 标签：java, emulation, development-environment, xlet

我一直在尝试寻找一种方法来玩[Xlet](http://en.wikipedia.org/wiki/Xlet)开发（作为包中[Personal Basis Profile](http://en.wikipedia.org/wiki/Personal_Basis_Profile#Connected_Device_Configuration)的`javax.microedition.xlet`一部分）。

目前作为起点，我有 Eclipse Indigo（我在其中进行 Android 开发）。

我的问题是：

*   我应该执行哪些步骤来设置 Xlet 的开发环境？
*   是否有任何模拟器可以运行 Xlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:32:51.440

我不确定我的经验是否有帮助，但至少它提供了参考。我的环境是 linux x86 PC (linux 2.6) + eclipse 3.2 + j2se 1.4.2_09 我从 sun 下载了 javatv 1.0 / 1.1 的参考实现源代码。

您可以在 eclipse 中创建一个项目，在其中导入所有源代码。请修复所有可能的错误（如果有）。通常，如果有一些，只需评论它们。

最后，请将项目导出为 jar 文件。

然后您可以创建另一个项目并配置构建路径，单击“导入外部 jars”以导入生成的 javatv jar。现在您可以通过在同一个项目中创建实现 javax.tv.Xlet.xlet 接口的 java 文件来创建自己的 xlet。

要执行 xlet，您需要实现 main 方法并创建一个 SIEmulator 实例（假设为 myemulator）。然后你可以调用myemulator.putResidentXlet()并填写xlet的名称/路径。最后请到输出文件夹（其中包含源代码的编译类文件，通常是文件夹“bin”），输入“java - Djava.class.path="javatv jar 的路径" class_ contains_main_method

请注意，执行的 xlet 不在服务上下文中。如果您希望在服务上下文中运行，则需要修改 com.sun.tv.XletManager.java 中的代码以填充 xlet 的服务上下文对象，或者将 xlet 的信息放入 javatv 的 SI 源文件中，即 xml 文件。默认为“JavaTVSampleFile01.xml”。使用方法请参考 javatv 的文档。

那是来自论坛帖子。链接：[https ://forums.oracle.com/forums/thread.jspa?messageID=7310245](https://forums.oracle.com/forums/thread.jspa?messageID=7310245)

文件下载的最佳机会：http: [//docs.oracle.com/javame/config/cdc/cdc-opt-impl/ojmeec/1.0/reference/html/z4000c841293984.html](http://docs.oracle.com/javame/config/cdc/cdc-opt-impl/ojmeec/1.0/reference/html/z4000c841293984.html)

# c++ - 如何使用 Boost Filesystem 忽略隐藏文件（和隐藏目录中的文件）？

> ID：12735634
> 
> 赞同：8
> 
> 时间：2012-10-04T20:45:06.307
> 
> 标签：c++, boost, boost-filesystem, hidden-files

我正在使用以下内容递归地遍历目录中的所有文件：

```
try
{
    for ( bf::recursive_directory_iterator end, dir("./");
          dir != end; ++dir )
    {
       const bf::path &p = dir->path();
       if(bf::is_regular_file(p))
       {
           std::cout << "File found: " << p.string() << std::endl;
       }
    }
} catch (const bf::filesystem_error& ex) {
    std::cerr << ex.what() << '\n';
} 
```

但这包括隐藏文件和隐藏目录中的文件。

如何过滤掉这些文件？如果需要，我可以将自己限制在隐藏文件和目录以“。”开头的平台上。特点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T00:31:16.263

不幸的是，似乎没有一种跨平台的方式来处理“隐藏”。以下适用于类 Unix 平台：

首先定义：

```
bool isHidden(const bf::path &p)
{
    bf::path::string_type name = p.filename();
    if(name != ".." &&
       name != "."  &&
       name[0] == '.')
    {
       return true;
    }

    return false;
} 
```

那么遍历文件就变成了：

```
try
{
    for ( bf::recursive_directory_iterator end, dir("./");
           dir != end; ++dir)
    {
       const bf::path &p = dir->path();

       //Hidden directory, don't recurse into it
       if(bf::is_directory(p) && isHidden(p))
       {
           dir.no_push();
           continue;
       }

       if(bf::is_regular_file(p) && !isHidden(p))
       {
           std::cout << "File found: " << p.string() << std::endl;
       }
    }
} catch (const bf::filesystem_error& ex) {
    std::cerr << ex.what() << '\n';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:39:15.450

现在让我们假设您要忽略以`'.'`. 这是 Unix 中隐藏文件的标准指示。我建议编写一个递归函数来访问每个文件。在伪代码中，它看起来像这样：

```
visitDirectory dir
    for each file in dir
        if the filename of file does not begin with a '.'
            if file is a directory
                visitDirectory file
            else
                do something with file (perhas as a separate function call?) 
```

这避免了搜索文件的整个路径以确定我们是否要处理它的需要。相反，我们只是跳过任何“隐藏”的目录。

如果您愿意，我也可以想到几个迭代解决方案。一种是有一个堆栈或队列来跟踪接下来要访问的目录。基本上，这使用您自己的数据结构模拟递归版本。或者，如果您无法解析文件的完整路径，只需确保获得绝对路径即可。这将保证您不会遇到名称为“./”或“../”的目录，这会导致检查隐藏文件时出现问题。

# c# - 使用 IronPython 通过 C# .NET 导入 Python 模块

> ID：12735642
> 
> 赞同：5
> 
> 时间：2012-10-04T20:45:45.523
> 
> 标签：c#, python, ironpython, nltk

我正在尝试使用 IronPython 通过 C# .NET 运行 Python 类，Python 类导入的几个模块是：

```
import collections
import nltk.classify.util 
```

为了在运行 IronPython 时导入这些，我使用**ScriptEngine的****GetSearchPath**集合将路径添加到 Python 库的位置，如下所示：

 **```
ICollection<string> paths = pyEngine.GetSearchPaths();
string dir = @"C:\Python27\Lib\";
paths.Add(dir);
string dir2 = @"C:\Python27\Lib\site-packages\nltk\classify\";
paths.Add(dir2);
pyEngine.SetSearchPaths(paths); 
```

**对于集合**模块，这似乎运行良好，但不是**nltk.classify.util**，并且在调用 ScriptEngine 的 Execute 方法时出现以下错误：

**没有名为 nltk.classify.util 的模块**

即使 util 模块位于上面指定的路径中。我认为这个问题与 Python 类中指定导入的方式有关（'.' 分隔），只是不确定如何解决它。任何想法哪里出错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T22:53:25.340

Python 使用包名的结构来搜索模块，因此如果您要求，`nltk.classify.util`它将`nltk\classify\util.py`从搜索路径中的每个目录开始查找。

因此，在您的示例中，您希望进行`dir2`如下更改：

```
string dir2 = @"C:\Python27\Lib\site-packages"; 
```**

# oracle11g - Oracle 约束 ON DELETE SET NULL 无法验证

> ID：12735644
> 
> 赞同：0
> 
> 时间：2012-10-04T20:45:59.053
> 
> 标签：oracle11g

Oracle 11.2.0.2 - 导入数据从 10.2.0.3 实例中抽取了一个模式，其中几个约束设置为 ON DELETE SET NULL，因此存在一些孤立行（按设计）。在数据导入期间，我收到有关未找到父键的错误，因此我使用 novalidate 在新环境中重新创建了约束（因为我希望现有的孤儿保持孤儿，但最初需要创建引用有效父行的新行）。

但是，现在我无法弄清楚如何使这些索引“有效”，因为当我尝试启用时，oracle 抱怨找不到父键。

如何在维护现有孤儿的同时将这些约束设置为有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:12:58.767

如果父键不存在，则不能将引用约束设置为“有效”。如果您使用的是 ON DELETE SET NULL，我希望子表的父键仍然为 NULL。在你的情况下，我会寻找*没有*NULL 的行 - 这些是那些会触发约束的行。

# url - s3 对象的临时 url 对云端也有效吗？

> ID：12735645
> 
> 赞同：1
> 
> 时间：2012-10-04T20:46:08.023
> 
> 标签：url, amazon-s3, amazon-cloudfront

如果我为 s3 对象创建一个临时 url，我可以将域更改为我的云端分发，并且内容仍然可以从云端获得吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:09:20.157

**如果您只是在 S3 临时 url 中将域更改为 CloudFront 分配，**它将不起作用。****

 **CloudFront 的方法不同。请参阅CloudFront 开发人员指南的[提供私有内容](http://docs.amazonwebservices.com/AmazonCloudFront/2009-12-01/DeveloperGuide/index.html?PrivateContent.html)一章。

最相关的部分：

> 1.  使用 CloudFront 控制 API**创建 CloudFront 源访问身份**。有关更多信息，请参阅创建 CloudFront 源访问身份。
>     
>     
> 2.  使用 Amazon S3 API（或您最喜欢的 Amazon S3 工具）**更新您的私有对象上的 ACL，**以向您刚刚创建的 CloudFront 源访问身份授予读取权限。有关您可以使用的 Amazon S3 工具的列表，请访问 Amazon CloudFront 开发人员工具。有关设置 ACL 的更多信息，请参阅修改私有内容对象的 ACL。
>     
>     
> 3.  **设置私有内容分发**或流分发（创建新分发或更新现有分发）。有关更多信息，请参阅设置私有内容分发和流式分发。
>     
>     
> 4.  使用 Amazon S3 API（或您最喜欢的 Amazon S3 工具）**更新您的私有对象上的 ACL，以删除对公众的任何读取权限授予，保留 CloudFront 源访问身份的读取权限**。有关更多信息，请参阅修改您的私有内容对象的 ACL。如果您只是想通过基本 URL 提供私人内容，您可以在此停止。如果您想使用签名 URL，请继续。
>     
>     
> 5.  使用 AWS 网站**创建密钥对**并下载私有密钥，您将使用该密钥对 URL 进行签名。有关创建密钥对的更多信息，请参阅创建密钥对。
>     
>     
> 6.  **更新您的私有内容分发**或流分发以指定分发的 URL**必须签名**，以及谁可以签名。有关更多信息，请参阅要求签名 URL。
>     
>     
> 7.  **创建一个签名 URL**以提供给最终用户。有关更多信息，请参阅创建签名 URL。**

# windows-8 - windows 8 xaml 内联超链接

> ID：12735651
> 
> 赞同：8
> 
> 时间：2012-10-04T20:46:22.843
> 
> 标签：windows-8, microsoft-metro

如何在 XAML 中的 Windows 应用商店应用中创建格式正确的超链接？我尝试创建一个内联超链接并希望使用静态资源对其进行样式设置：

```
 <RichTextBlock Style="{StaticResource PageHeaderTextStyle}" Grid.ColumnSpan="2">
            <Paragraph>
                <Run>"A sentence with inline text "</Run>
                <InlineUIContainer>
                    <HyperlinkButton Background="Yellow">
                        my link
                    </HyperlinkButton>
                </InlineUIContainer>
                <Run>... some more text</Run>
            </Paragraph>
        </RichTextBlock> 
```

我得到以下超链接与句子的其余部分不一致的地方：

![在此处输入图像描述](../Images/b28720a0ba5fbbc375b5ef944ce6d703.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T23:20:10.513

好吧，我试过这个无济于事：

```
<RichTextBlock FontSize="20">
    <Paragraph Foreground="White" FontFamily="Segoe UI Light">
        <Run>Now is the time for</Run>
        <InlineUIContainer>
            <HyperlinkButton Content="all good men">
                <HyperlinkButton.Template>
                    <ControlTemplate>
                        <TextBlock Margin="5,0,5,0"  FontSize="20" FontFamily="Segoe UI Light"
                                    Text="{Binding Content, Mode=OneWay, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                    </ControlTemplate>
                </HyperlinkButton.Template>
            </HyperlinkButton>
        </InlineUIContainer>
        <Run>to come to the aid of their country</Run>
    </Paragraph>
</RichTextBlock> 
```

然后我尝试了这个：

```
<RichTextBlock FontSize="20">
    <Paragraph Foreground="White" FontFamily="Segoe UI Light">
        <Run>Now is the time for</Run>
        <InlineUIContainer>
            <TextBlock Margin="5,0,5,0" Tapped="TextBlock_Tapped_1">
                <Underline><Run Text="all good men" /></Underline>
            </TextBlock>
        </InlineUIContainer>
        <Run>to come to the aid of their country</Run>
    </Paragraph>
</RichTextBlock> 
```

这就像一个魅力！

![在此处输入图像描述](../Images/6008625e81c5dd12c5050dd04733afc6.png)

我并不是假装实现您自己的超链接按钮并不需要更多的工作，而是这样想——您将 100% 控制它的布局！而且它很容易继承它周围的字体样式！

说得通？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-13T16:08:46.763

对于未来的读者来说，Windows 8.1 简化了这个任务，Windows 8.1 将[Hyperlink](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.documents.hyperlink.aspx)元素添加到 Windows.UI.Xaml.Documents 命名空间中的 XAML 文本对象模型中，所以现在我们可以像这样简单地使用它：

```
<RichTextBlock>
  <Paragraph FontSize="22">Please click on this <Hyperlink NavigateUri="http://www.link.com">link</Hyperlink>, thanks !</Paragraph>
</RichTextBlock> 
```

它看起来像这样：

![在此处输入图像描述](../Images/3132e698b3028b4d8c7aa1181449521d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T11:34:22.287

我也尝试解决此问题并提出以下建议：

```
<RichTextBlock HorizontalAlignment="Left" VerticalAlignment="Top">
<Paragraph xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" FontSize="12" FontFamily="Calibri" >
    <Run FontFamily="Calibri" FontSize="24">A sentence with inline text</Run>
    <InlineUIContainer>
        <HyperlinkButton FontSize="24" Background="Gray" Foreground="Blue" Template="{StaticResource HyperlinkButtonControlTemplate1}" BorderThickness="0" RenderTransformOrigin="0.5,0.5" Padding="0" FontFamily="Calibri">
            the link with g
        </HyperlinkButton>
    </InlineUIContainer>
    <Run FontFamily="Calibri" FontSize="24">and some more text</Run>
</Paragraph> 
```

和模板如下：

```
<ControlTemplate x:Key="HyperlinkButtonControlTemplate1" TargetType="HyperlinkButton">
        <Grid>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="PointerOver">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                Storyboard.TargetProperty="Foreground">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource HyperlinkPointerOverForegroundThemeBrush}" />
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                Storyboard.TargetProperty="Foreground">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource HyperlinkPressedForegroundThemeBrush}" />
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Disabled">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                Storyboard.TargetProperty="Foreground">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource HyperlinkDisabledThemeBrush}" />
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
                <VisualStateGroup x:Name="FocusStates">
                    <VisualState x:Name="Focused">
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="FocusVisualWhite"
                                Storyboard.TargetProperty="Opacity"
                                To="1"
                                Duration="0" />
                            <DoubleAnimation Storyboard.TargetName="FocusVisualBlack"
                                Storyboard.TargetProperty="Opacity"
                                To="1"
                                Duration="0" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Unfocused" />
                    <VisualState x:Name="PointerFocused" />
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>

            <ContentPresenter x:Name="ContentPresenter"
                    Content="{TemplateBinding Content}"
                    ContentTransitions="{TemplateBinding ContentTransitions}"
                    ContentTemplate="{TemplateBinding ContentTemplate}" 
                    RenderTransformOrigin="0.5,0.5" 
                    Margin="1,0" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Bottom" >
                <ContentPresenter.RenderTransform>
                    <CompositeTransform TranslateY="8"/>
                </ContentPresenter.RenderTransform>
            </ContentPresenter>

            <Rectangle x:Name="FocusVisualWhite"
                IsHitTestVisible="False"
                Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}"
                StrokeEndLineCap="Square"
                StrokeDashArray="1,1"
                Opacity="0"
                StrokeDashOffset="1.5" />
            <Rectangle x:Name="FocusVisualBlack"
                IsHitTestVisible="False"
                Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}"
                StrokeEndLineCap="Square"
                StrokeDashArray="1,1"
                Opacity="0"
                StrokeDashOffset="0.5" />
        </Grid>
    </ControlTemplate> 
```

唯一需要注意的是，`<CompositeTransform TranslateY="8"/>`必须将其设置为字体大小的 1/3，在本例中为 8，因为字体大小为 24。并不理想，但它确实会产生所需的输出。

更新：或使用以下内容，这是从查看社交媒体 Windows 8 仪表板示例得出的， 网址为[http://code.msdn.microsoft.com/wpapps/Social-Media-Dashboard-135436da](http://code.msdn.microsoft.com/wpapps/Social-Media-Dashboard-135436da)

```
<Paragraph xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" FontSize="12" FontFamily="Calibri" >
<Run FontFamily="Calibri" FontSize="16">A sentence with inline text</Run>
<Span>
<InlineUIContainer>
        <HyperlinkButton FontSize="16" BorderThickness="0" Margin ="-10,-13" Foreground="Blue" FontFamily="Calibri">
        the link with g
    </HyperlinkButton>
</InlineUIContainer>
</Span>
<Run FontFamily="Calibri" FontSize="16">and some more text</Run> 
```

# c# - 新鲜的 Windows + VS2012 = MVC3 问题

> ID：12735652
> 
> 赞同：0
> 
> 时间：2012-10-04T20:46:25.520
> 
> 标签：c#, asp.net-mvc-3, http-post, visual-studio-2012, iis-express

我最近刚刚在运行 VS2012/VS2010 的 PC 上全新安装了 Windows 7。我有一个 MVC3 项目，在我将它拉到这台 PC 上运行之前，它运行得很好。该项目仍在这台 PC 上编译，我可以在工作室（2010 或 2012）中运行应用程序时浏览我的网站，但是当我尝试从任何视图中的任何表单发布并通过 URL 传递 ID 时，如下所示：

```
 <form id="ScriptForm" action="/MyApp/ControllerName/ActionName/@ViewBag.IDNumber" method="post">
    ...
    </form> 
```

...我收到了[这个错误](https://stackoverflow.com/q/4610433/590783)。我做了一些挖掘和尝试来解决这个问题，最终采取了这些步骤来尝试解决：

1.  实际通过控制面板中的 Windows 组件表单安装了 ASP.NET
2.  将应用程序更改为使用 IIS Express

好吧，当我将其更改为在 IIS Express 下运行时，我开始收到不同的错误。

```
HTTP Error 404.0 - Not Found
The resource you are looking for has been removed, had its name changed, or is 
temporarily unavailable.

Most likely causes:
The directory or file specified does not exist on the Web server.
The URL contains a typographical error.
A custom filter or module, such as URLScan, restricts access to the file.

Things you can try:
Create the content on the Web server.
Review the browser URL.
Check the failed request tracing log and see which module is calling SetStatus. For more information, click here.

Detailed Error Information:
Module     IIS Web Core
Notification       MapRequestHandler
Handler    StaticFile
Error Code     0x80070002
Requested URL      http://localhost:51596/MyApp/ControllerName/ActionName/1
Physical Path      C:\CODE\MyApp\ControllerName\ActionName\1
Logon Method       Anonymous
Logon User     Anonymous
Request Tracing Directory      C:\Users\cbarlow\Documents\IISExpress\TraceLogFiles\MYAPP

More Information:
This error means that the file or directory does not exist on the server. Create the file or directory and try the request again.
View more information » 
```

就好像它没有认识到这是一条路由，并试图将 URL 解析为一个显然不存在的物理文件（如 1.html）。但是为什么它不“做 MVC 的事情”并使用路由呢？我的 global.asax 中有这个：

```
 public static void RegisterRoutes(RouteCollection routes)
  {
     routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

     routes.MapRoute(
         "Default", // Route name
         "{controller}/{action}/{id}", // URL with parameters
         new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
     );

  } 
```

我知道它正在运行，因为我可以断点它。

* * *

规格：Windows 7 | 视觉工作室 2010/2012 | 微软 MVC3 | IIS 快递

* * *

我已经阅读了所有这些 SO 帖子，似乎没有一个适用于这种情况或没有帮助（主要是因为它们适用于实际的 aspx 页面，我试图通过控制器加载页面）：

[不允许使用用于访问路径“/”的 HTTP 动词 POST](https://stackoverflow.com/q/1851155/590783)

[不允许使用 HTTP 动词 POST 访问路径](https://stackoverflow.com/q/5238080/590783)

[不允许使用 HTTP 动词 POST 访问路径“/Membership/user/”](https://stackoverflow.com/q/758780/590783)

[不允许使用 HTTP 动词 POST 访问路径“/Main/[object Object]”](https://stackoverflow.com/q/8350398/590783)

[不允许使用用于访问路径“[我的路径]”的 HTTP 动词 POST](https://stackoverflow.com/q/4610433/590783)

[Facebook 应用程序中不允许用于访问路径“/”的 HTTP 动词 POST](https://stackoverflow.com/q/4699375/590783)

* * *

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:38:19.833

问题就在这里（由于我对 MVC/CSHTML 缺乏经验）：

```
<form id="ScriptForm" action="/MyApp/ControllerName/ActionName/@ViewBag.IDNumber" method="post">
...
</form> 
```

MyApp 曾经可以在我的 PC 上运行（老实说，我不确定为什么它现在不起作用......也许我之前已经为该名称设置了一些东西来解析？）但它不再映射到任何东西。它确实可以在服务器上运行，但那是因为 IIS 中确实存在“MyApp”的映射。只需将此表单更改为：

```
<form id="ScriptForm" action="@Url.Content("~/ControllerName/ActionName/" + ViewBag.IDNumber)" method="post">
...
</form> 
```

...更优雅且没有错误地完成工作。

# jquery - jquery按钮影响循环中的所有实例

> ID：12735653
> 
> 赞同：0
> 
> 时间：2012-10-04T20:46:25.643
> 
> 标签：jquery, loops, button

我有一个使用 jquery/Ajax 来更新我的数据库而无需刷新的表单。jquery 在提交时淡出单选选项，然后显示另一个按钮，以防用户想要更改他们的选择。

我的问题是，一旦用户提交他们的决定，如果他们点击“改变主意”按钮，jquery 会为下面的所有实例带回收音机。

那个“改变主意”按钮怎么能只为那个实例带回收音机呢？很抱歉复杂的场景和代码块。如果您需要更多信息或解释，请询问！

谢谢。

```
<? $result = $mysqli->query("SELECT * FROM items WHERE Job='$job'") or die(mysqli_error($mysqli));
while( $row = $result->fetch_assoc() ){ ?>
        <div class='tile'>

            <script type="text/javascript">
                $('document').ready(function(){
                    $('#form<?= $row['Id'] ?>').ajaxForm({
                        target: '#preview<?= $row['Id'] ?>',
                        success: function() {
                            $('#formbox<?= $row['Id'] ?>').fadeOut('slow'),
                            $('#preview<?= $row['Id'] ?>').fadeIn('slow');
                            $("button").click(function () {
                                $("#preview<?= $row['Id'] ?>").fadeOut("slow"),
                                $("#formbox<?= $row['Id'] ?>").fadeIn("slow");});
                        }
                    });
                });
            </script> 

            <div class='details'>
                <div id='radios' style='position:relative; height:25px;'>
                    <div id="preview<?= $row['Id'] ?>" style="width:258px; margin-left:-129px; left:50%; display:none; position:absolute;">
                        <button>Way to go! Click here to change your mind.</button>
                    </div>
                    <div id="formbox<?= $row['Id'] ?>" style='position:absolute;'> 
                    <form name='' id='form<?= $row['Id'] ?>' action='js/submit.php' method='post'>
                        <label>Keep:</label><input type='radio' name='dec[]' value='keep' <? if($row['Dec1']=='keep'){echo "checked='checked'";} ?> >
                        <label>Donate:</label><input type='radio' name='dec[]' value='donate' <? if($row['Dec1']=='donate'){echo "checked='checked'";} ?> >
                        <label>Sell:</label><input type='radio' name='dec[]' value='sell' <? if($row['Dec1']=='sell'){echo "checked='checked'";} ?> >
                        <label>Trash:</label><input type='radio' name='dec[]' value='trash' <? if($row['Dec1']=='trash'){echo "checked='checked'";} ?> >
                        <label>Give To:</label><input type='text' name='dec[]' size='15' <? if($row['Dec1']!='keep' && $row['Dec1']!='donate' && $row['Dec1']!='sell' && $row['Dec1']!='trash'){echo "value='".$row['Dec1']."'";} ?> >
                        <input type='hidden' name='id' value='<?= $row['Id'] ?>' />
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </div>
        </div>
    </div>
<? 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:31:58.440

问题是每次提交表单时，都会将单击处理程序添加到该组收音机中淡入淡出的所有按钮。当您提交不同的表单时，您永远不会删除以前的处理程序，因此它会再次将它们全部淡入。

`$row['Id']`您应该将 a 绑定`.ajaxForm()`到一个类，而不是拥有许多不同的处理程序，并替换到每个处理程序中。它应该利用`$(this)`和 DOM 遍历函数来操作您单击的表单。

另外，我认为这与问题无关，但是您`id='radios'`没有附加行 ID，因此您正在为这些元素创建重复的 ID。

我认为应该这样做：（[小提琴](http://jsfiddle.net/barmar/SLhsh/3/)）

```
<script type="text/javascript">
$('document').ready(function() {
    $('.form').ajaxForm({
        success: function(responseText, statusText, xhr, elem) {
            var formbox = elem.closest('.formbox');
            formbox.fadeOut('slow');
            formbox.siblings(".preview").fadeIn('slow');
        }
    });
    $("button").click(function() {
        var preview = $(this).closest(".preview");
        preview.fadeOut("slow");
        preview.siblings(".formbox").fadeIn("slow");
    });
});​
</script> 

<? $result = $mysqli->query("SELECT * FROM items WHERE Job='$job'") or die(mysqli_error($mysqli));
while( $row = $result->fetch_assoc() ){ ?>
        <div class='tile'>
            <div class='details'>
                <div class='radios' style='position:relative; height:25px;'>
                    <div class="preview" style="width:258px; margin-left:-129px; left:50%; display:none; position:absolute;">
                        <button>Way to go! Click here to change your mind.</button>
                    </div>
                    <div class="formbox" style='position:absolute;'> 
                    <form name='' class='form' action='js/submit.php' method='post'>
                        <label>Keep:</label><input type='radio' name='dec[]' value='keep' <? if($row['Dec1']=='keep'){echo "checked='checked'";} ?> >
                        <label>Donate:</label><input type='radio' name='dec[]' value='donate' <? if($row['Dec1']=='donate'){echo "checked='checked'";} ?> >
                        <label>Sell:</label><input type='radio' name='dec[]' value='sell' <? if($row['Dec1']=='sell'){echo "checked='checked'";} ?> >
                        <label>Trash:</label><input type='radio' name='dec[]' value='trash' <? if($row['Dec1']=='trash'){echo "checked='checked'";} ?> >
                        <label>Give To:</label><input type='text' name='dec[]' size='15' <? if($row['Dec1']!='keep' && $row['Dec1']!='donate' && $row['Dec1']!='sell' && $row['Dec1']!='trash'){echo "value='".$row['Dec1']."'";} ?> >
                        <input type='hidden' name='id' value='<?= $row['Id'] ?>' />
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </div>
        </div>
    </div>
<? 
} 
```

# php - $_GET 不工作

> ID：12735656
> 
> 赞同：4
> 
> 时间：2012-10-04T20:46:35.130
> 
> 标签：php, get

创建评级系统并且信息没有通过我的 $_GET 变量传输。代码如下

```
 if (isset($_GET['item'], $_GET['rating'])){
echo 'Works!';
} 
```

在下面的代码中输入了变量

```
 <?php echo number_format( 
        $article['rating'],1); ?>
        <div class = "rate">
            Rate:
            <?php
            for ($x =1; $x<= $maximum_rating; $x++){
            ?>
                <a href="prestige.php?item=<?php echo $article['id']; ?>&rating=<?php echo $x;?>">
                <?php echo $x; ?></a>
            <?php
            }
            ?> 
```

我对编程相当陌生，因此任何想法或提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:00:18.047

您应该做几件事。

**1.** 代替

```
prestige.php?item=<?php echo $article['id']; ?>&rating=<?php echo $x;?> 
```

利用

```
prestige.php?<?= http_build_query(array('item' => $article['id'], 'rating' => $x), '&amp;') ?> 
```

这将转义参数。Vars`$article['id']`并且`$x`可能包含破坏 HTML 或 URL 的字符。

**2.** 查看 Firebug/Chrome 开发工具栏中的 Net 选项卡。有没有重定向？发送了哪些标头？

还要查看地址栏，看看 prestige.php 是否真的加载了 GET 参数。

**3.** 使用像[XDebug](http://xdebug.org/)这样的调试工具来单步调试你的代码。您可能有一些重置`$_GET`变量的代码。我个人使用 IDE PHPed，但它有点贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:05:23.003

您发布的代码有效。因此，障碍必须在您*未*发布的代码中：

1.  也许`prestige.php`页面有一个 PHP 错误，导致它无法显示任何内容；从一个只包含`<?php echo 'OK so far'; ?>`.
2.  也许该页面包含杀死 $_GET 的代码（安全检查、框架...）。（将页面减少到最小的工作案例，不包括/要求）
3.  也许页面*确实*可以工作，但是输出被一个不合时宜的东西所吸引，`ob_end_clean()`这意味着在真正的输出开始之前“清理页面”；（将页面减少到最小的工作案例）
4.  也许页面可以工作，字符串 'Works' 在那里，但由于 HTML 标记、CSS 或其他呈现问题，您看不到它（检查页面源代码）
5.  URL 可能已损坏，因为项目代码包含无效的 URL 字符（检查浏览器地址栏中显示的内容）
6.  可能存在干扰的 URL 重写方案（检查 .htaccess 和服务器日志）
7.  我只记得在 URL 中使用国际字符时发生了类似的事情。尝试使用 ASCII 干净的项目代码，看看会发生什么。
8.  只是为了确定：验证没有`auto_prepend`可能干扰的 'ed 文件。

那么，也可能*不止一种*以上的方式一起行动。通常在调试时无意中破坏了某些代码，即使在修复了第一个错误之后，代码也不会再次开始工作——这并不意味着修复无效。

对不起——我已经没有选择的余地了。我真的很期待知道原因是什么。（*通常我收集的解释越多，真正的答案就越倾向于“以上都不是”。当它发生在我身上时，有时我想知道是否开始相信小精灵*:-()。

# javascript - 修改此脚本

> ID：12735658
> 
> 赞同：0
> 
> 时间：2012-10-04T20:46:41.587
> 
> 标签：javascript, internet-explorer, png, transparent, fade

我在这个站点上找到了这个脚本，它有助于在 IE 中淡入/淡出透明 .png，而在淡入淡出效果期间透明部分被黑色填充：

```
var i;
  for (i in document.images) {
    if (document.images[i].src) {
        var imgSrc = document.images[i].src;
        if (imgSrc.substr(imgSrc.length-4) === '.png' || imgSrc.substr(imgSrc.length-4) === '.PNG') {
            document.images[i].style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='" + imgSrc + "')";
        }
    }
} 
```

这个脚本是由[这个 stackoverflow 用户](https://stackoverflow.com/users/425741/garciawebdev)创建的，它在我的网站上运行良好。但是，我想稍微修改一下。此脚本在我的页面上查找所有 .png 文件并应用过滤器。但是，这可能会导致性能问题，因为我的网站上有许多透明的 .png 文件，但我只需将此过滤器应用于其中一个。它是一个固定位置的菜单 DIV 背景图像，在页面滚动时使用 jQuery 淡入淡出。

有人可以帮我修改这个脚本，以便我可以只为它提供一个图像或使用 getElementById("menu") 并让它应用这个过滤器。我尝试过的任何方法似乎都不起作用，并且将过滤器放入我的 CSS 中也不起作用，因此 javascript 方式似乎是要走的路。我只需要在一个.png 上使用它，而不是全部。

请记住，这是 div #menu 的背景图像，因此图像本身没有 ID，当然 div 有。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:51:45.247

根据规范，[document.images](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-90379117)返回`img`元素的集合，所以如果它是`background-image`，那将不起作用。但是，如果它是`img`在后台使用的，它将起作用。如果您只是要将其应用于您知道 ID 的图像，那么它将是

```
function applyFilterToImageById(id) {
    var i,
        parentElement = document.getElementById(id);
    for (i in parentElement.images) {
    if (document.images[i].src) {
        var imgSrc = document.images[i].src;
        if (imgSrc.substr(imgSrc.length-4) === '.png' || imgSrc.substr(imgSrc.length-4) === '.PNG') {
            document.images[i].style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='" + imgSrc + "')";
        }
    }
} 
```

# jquery - 在下面的代码中添加隐藏输入的最佳方法是什么

> ID：12735660
> 
> 赞同：0
> 
> 时间：2012-10-04T20:46:44.490
> 
> 标签：jquery

我在下面有一段代码，其中包含按钮，每个按钮都包含自己的隐藏输入：

```
<?php
$a = range("A","Z");
?>

<table id="answerSection">
<tr>

<?php
$i = 1;
foreach($a as $key => $val){
    if($i%7 == 1) echo"<tr><td>";
    echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";
    echo"<input type=\"hidden\" value=\"1\" id=\"hiddenAnswer".$val."\" name=\"hidden".$val."\" class=\"onButtons\">";
    if($i%7 == 0) echo"</td></tr>";
    $i++;
}
?>
</tr> 
```

但是我想要做的是在将控件附加到表行时使用 jquery 复制此控件。我已经完成了 90%，但我的问题是能够在下面的代码中为每个按钮添加隐藏输入的最佳方法是什么：

```
function insertQuestion(form) {   

            var context = $('#answerSection');
    var currenttotal = context.find('.answerBtnsOn').length;        

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $td = $("<td class='extratd'>");
    var $answer = $("<div class='answer'>3\. Answer:<br/></div>");

var $this, i=0, $row, $cell;
$('#optionAndAnswer .answers').each(function() {
    $this = $(this);
    if(i%7 == 0) {
        $row = $("<tr/>").appendTo($answer);
        $cell = $("<td/>").appendTo($row);
    }
    var $newBtn = $("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this);' />".replace('%s',$this.is(':visible')?'inline-block':'none')).attr('name', $this.attr('name')).attr('value', $this.val()).attr('class', $this.attr('class')).attr('id', $this.attr('id')+'Row');

    $newBtn.appendTo($cell);

    i++;
});

    $tr.append($td);
    $td.append($answer);
    $tbody.append($tr); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:00:33.733

尝试这个

```
var elem = $(this)
var $newBtn =
        $(document.createElement('input'), {
            type : 'button',
            onclick : 'btnclick(this);',
            name : elem.attr('name'),
            value : elem.val(),
            class : elem.attr('class'),
            id : elem.attr('id') + 'Row'
          },
          css : {
               display : elem.is('visible') ? 'inline-block' : 'none'
          }
        );
$newBtn.appendTo($cell); 
```

# vb.net - VB 2010 Datagrid 在顶行显示最新

> ID：12735661
> 
> 赞同：0
> 
> 时间：2012-10-04T20:47:02.727
> 
> 标签：vb.net, datagrid, datagridview

先介绍一点背景知识：我有一个连接到集群的 telnet 会话，它保持连接并定期接收信息。传入的信息被处理并显示在 DataGrid 中。这是实时发生的。目前最新信息显示在最后一行（底行）。我希望将最新的信息显示在第一行。

```
DataGridView1.Rows.Add(New String() {InfoA, InfoB, InfoC, InfoD, InfoE}) 
DataGridView1.ClearSelection()
DataGridView1.FirstDisplayedScrollingRowIndex = DataGridView1.RowCount - 1 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:44:14.820

而不是使用 DataGridView1.Rows.Add() 您可以使用 DataGridView1.Rows.Insert() 因为这为您提供了一个额外的参数以及在特定行索引处添加行的能力，在您的情况下，我认为将添加一个零索引将数据网格的行作为最顶行：

DataGridView1.Rows.Insert(0, New String() {InfoA, InfoB, InfoC, InfoD, InfoE})

# php - 如何使用php获取html文档中有id属性的节点

> ID：12735664
> 
> 赞同：0
> 
> 时间：2012-10-04T20:47:18.347
> 
> 标签：php, html, dom

如何使用php（domdocument）从整个HTML文档中获取设置了id属性的节点的引用？

```
<div id='foo'>
lorem ipsum
</div>
<div id='bar'>
lorem ipsum
</div>
<div id="baf">
  <div id="alpha">
  lorem ipsum
  </div>
</div> 
```

我想获取 foo、bar、baf、alpha 节点的列表。节点可以任意存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:49:35.473

你可以只使用[str_get_html](http://simplehtmldom.sourceforge.net/manual.htm)

```
$html = '<div id="foo">
lorem ipsum
</div>
<div id="bar">
lorem ipsum
</div>
<div id="baf">
  <div id="alpha">
  lorem ipsum
  </div>
</div>';

$html = str_get_html($html);
foreach ( $html->find("div") as $value ) {
    var_dump($value->id);
} 
```

输出

```
string 'foo' (length=3)
string 'bar' (length=3)
string 'baf' (length=3)
string 'alpha' (length=5) 
```

# javascript - 遍历 JSON 对象以获取数组的内容

> ID：12735668
> 
> 赞同：0
> 
> 时间：2012-10-04T20:47:50.607
> 
> 标签：javascript, arrays, json

我对这段代码感到头疼：

```
{
  "Carrefour": [
    { "geography": [ "Europe", "Germany" ], "productLine": "Produce", "revenue": { "2022": 130143, "2021": 172122, "2020": 103716 } },
    { "geography": [ "Europe", "France" ], "productLine": "Clothing", "revenue": { "2022": 85693, "2021": 91790, "2020": 77650 } },
    ],
  "Tesco": [
    { "geography": [ "Europe", "United Kingdom" ], "productLine": "Electronics", "revenue": { "2022": 239537, "2021": 131959, "2020": 97047 } },
    { "geography": [ "Europe", "Ireland" ], "productLine": "Produce", "revenue": { "2022": 74963, "2021": 43406, "2020": 54623 } },
    ]
} 
```

我正在尝试遍历此代码以获取所有内容。

但首先我不知道如何到达该地区（欧洲）。我试过了

```
function (json) {
    for (var company in json) {
        region = json[company].geography[0];
    }
} 
```

但它返回 undefined，因为 company 是一个数组。Infact`json.Carrefour[0].geography[0];`正确返回“欧洲”。

如何以数组形式访问公司并保留名称？我不能直接使用这个名字！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:53:18.707

您的公司被分配了数组，因此您需要一个内部循环。

```
for (var company in json) {
    for (var i = 0; i < json[company].length; i++) {
        region = json[company][i].geography[0];
    }
} 
```

这是一个演示：http: [//jsfiddle.net/dkPWt/](http://jsfiddle.net/dkPWt/)

演示输出：

```
Carrefour: 
    Europe
    Europe
Tesco: 
    Europe
    Europe 
```

# html - javascript中的交互式节点？

> ID：12735669
> 
> 赞同：1
> 
> 时间：2012-10-04T20:48:01.040
> 
> 标签：html, graph, d3.js

我想创建一个基于力的节点图形布局。我希望节点是带有标题、链接和图像的正方形。这可能使用D3吗？如何处理这个问题的任何方向？（显然我对此有点陌生）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:51:39.540

是的，很有可能。您可以查看[http://bl.ocks.org/950642](http://bl.ocks.org/950642)的示例，该示例与您要查找的内容非常接近。您只需要附加一个`rect`类似于示例中附加文本和图像的方式。

# android - NotifyDataSetChanged 在 Android 2.1 上不起作用

> ID：12735671
> 
> 赞同：2
> 
> 时间：2012-10-04T20:48:01.853
> 
> 标签：android, listview

我正在开发一个支持冰淇淋三明治 API 的 Android 应用程序，但可以在运行 android 2.1 等旧设备上工作。

我通过检查当前的 API 版本来做到这一点，如果它的冰淇淋三明治后调用一个活动，然后如果它在下面的任何内容，调用另一个活动。

我允许用户执行搜索，当它获得结果时，它会清除 ArrayList，然后将搜索中的项目添加回来，然后调用 arrayadapter.notifydatasetchanged。这段代码我从 ICS 版本复制并粘贴到 ICS 之前的版本中，ICS 工作正常，但在 ics 之前的版本中，列表视图没有得到更新。以下是我拥有的代码。

```
public void performSearch(ArrayList<Spanned> searchPasswords)
    {
        if (searchPasswords.size() > 0)
        {
            btnClearSearch.setVisibility(View.VISIBLE);
            passwords.clear();
            for (int i = 0; i < searchPasswords.size(); i++)
            {
                passwords.add(searchPasswords.get(i));
            }

            passwordArrayAdapter.notifyDataSetChanged();
            btnClearSearch.setOnClickListener(mBtnClearSearch);
            common.showToastMessage(searchPasswords.size() + " result(s) found", Toast.LENGTH_LONG);
        }
        else
        {
            common.showToastMessage("No search results found", Toast.LENGTH_LONG);
        }
    } 
```

我已经调试了这个函数，所以它明确地调用它，它显示了 toast 消息，说明找到了多少结果，但列表视图没有改变。

## 更新

我刚刚发现了一个有点令人困惑的发现。作为对执行列表视图初始加载的函数的测试，我手动创建了一个新搜索`ArrayList<Spanned>`并将其传递给`PerformSearch(ArrayList<Spanned>`我遇到问题的相同），并且这可以正常工作。

performSearch 不更新 ListView 的问题似乎只发生在从 onActivityResult 调用它时。我知道 onActivityResult 工作正常，因为当调用 performSearch 函数时，它会打印出找到 1 个结果，所以它肯定得到了数据，只是列表视图没有从调用 performSearch 函数的 onActivityResult 中刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:38:35.233

我认为你的错误是忘记清除适配器，如果你这样尝试它应该可以工作：

```
public void performSearch(ArrayList<Spanned> searchPasswords)
    {
        if (searchPasswords.size() > 0)
        {
            btnClearSearch.setVisibility(View.VISIBLE);
            passwordArrayAdapter.clear();
            for (int i = 0; i < searchPasswords.size(); i++)
            {
                passwordArrayAdapter.add(searchPasswords.get(i));
            }
            passwordArrayAdapter.notifyDataSetChanged();
            btnClearSearch.setOnClickListener(mBtnClearSearch);
            common.showToastMessage(searchPasswords.size() + " result(s) found", Toast.LENGTH_LONG);
        }
        else
        {
            common.showToastMessage("No search results found", Toast.LENGTH_LONG);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:56:33.410

我仅从您粘贴的代码片段中了解不多，但据我所知，密码和 passwordsArrayAdapter 之间没有持久的链接....passwordsArrayAdapter 使用密码元素初始化自身，而passwordsArrayAdapter 将不知道密码何时更改。要添加新项目，您应该调用 passwordsArrayAdapter.add(searchPasswords)。不要打扰显式调用 notifyDataSetChanged()。

```
public void performSearch(ArrayList<Spanned> searchPasswords)
    {
       if (searchPasswords.size() > 0)
       {
            btnClearSearch.setVisibility(View.VISIBLE);
           passwordArrayAdapter.clear();
           passwordArrayAdapter.setNotifyOnChange(true);
         for (int i = 0; i < searchPasswords.size(); i++)
         {
               passwordArrayAdapter.add(searchPasswords.get(i));
         }
            btnClearSearch.setOnClickListener(mBtnClearSearch);
            common.showToastMessage(searchPasswords.size() + " result(s) found", Toast.LENGTH_LONG);
       }
        else
        {
            common.showToastMessage("No search results found", Toast.LENGTH_LONG);
        }
    } 
```

我不认为与 onActivityResult 位有关系——上面的代码应该修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:34:29.253

Thanks everyone for your help and suggestions, I've managed to find out what the problem was.

In my OnResume method for the activity I call a function called populateListArray which retrieves all of the information from the database and lists in the ListView.

When the activity was returned it was calling the OnResume method so after it got the results it then reset the list view back with all the original content.

To get round it I added a variable called `performingSearch` which I initialise to false. When I perform the search I set this to true and in the onResume, if the variable is true I don't do anything and after the perform search function has finished I set the variable back to false again.

Thanks everyone again for your help

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T22:11:58.023

我有一个类似的问题。notidfyDataSetChanged() 和 setAdapter() 都不起作用。

最后我想出了一个解决方案，它可能不如使用 notifyDataSetChanged() 有效，但它可以工作。

```
/**
 * Updates courses' list adapter.
 */
private void updateListAdapter()
{
    final ArrayAdapter a = (ArrayAdapter) coursesList.getAdapter();

    runOnUiThread(new Runnable()
    {
        public void run()
        {
            populteCoursesList();
            a.clear();

            for (MainScreenListModel model : listModels)
            {
                a.add(model);
            }
            a.notifyDataSetChanged();
        }
    });
} 
```

courseList 是我的自定义列表。populateCoursesList() 从 db 获取数据，listModels 是列表视图的模型向量。如您所见，我必须清除适配器并再次填充它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T13:02:34.820

```
passwords.clear();
for (int i = 0; i < searchPasswords.size(); i++)
{
  passwords.add(searchPasswords.get(i));
}
passwordArrayAdapter.notifyDataSetChanged(); 
```

根据代码，您修改列表（密码），但它是适配器正在使用的同一实例（密码阵列适配器）。如果没有，则 notifyDataSetChanged() 将不起作用。

据我了解，您可以使用 passwordArrayAdapter 的新实例再次设置列表。

```
ur_list_view.setAdapter(new PasswordArrayAdapter(newly_formed_password_list, and other parameters)); 
```

或使用 getter 和 setter 更新列表（密码），然后调用 notifyDataSetChanged()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T14:55:50.623

`notifyOnChange(false)`在清除和添加新条目之前调用。否则，`clear()`and each`add()`内部会触发对 的调用`notifyDataSetChanged()`，正如我所经历的那样，这会使 ListView 感到困惑。保持你的显式`notifyDataSetChanged()`，这也将内部`notifyOnChange`标志`true`重新设置为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T20:51:10.590

你可以试试：

```
passwordArrayAdapter = new WHAT_EVER_ADAPTER_THIS_IS(searchPasswords, extra_constructor_params);
YOUR_LIST_VIEW.setAdapter(passwordArrayAdapter) 
```

代替：

```
 passwordArrayAdapter.notifyDataSetChanged(); 
```

# javascript - 奇怪的正则表达式问题

> ID：12735673
> 
> 赞同：1
> 
> 时间：2012-10-04T20:48:13.037
> 
> 标签：javascript, regex

我正在使用的正则表达式返回太多文本。该表达式应该从文本中删除名称和日期。

```
var sCurrentText = "(26 JAN 2011) - ILewis Provided excellent translation.";
var sRegxDate    = "\([0-9]{2}[\\\.\/\-, ](Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[\\\.\/\-, ][0-9]{4}\)[, \-]{0,3}[A-z]+ ?\-?\:? ?";
var DatePattern  = new RegExp(sRegxDate, "i");
var sDate        = DatePattern.exec(sCurrentText);
alert(sDate); 
```

我预计：

```
(26 JAN 2011) - ILewis 
```

但是弹出窗口说：

```
(26 JAN 2011) - ILewis,JAN 
```

其他烦人的问题：

1.  我无法在正则表达式中模拟这个问题。[http://regexpal.com/](http://regexpal.com/)

2.

```
alert(sDate[0]); 
```

返回：

```
(26 JAN 2011) - ILewis 
```

但

```
oTextbox.value = sDate[0]; 
```

导致一个空的文本框。令人沮丧。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:11:07.247

您正在警告`sDate`认为它是一个字符串，而实际上它是一个数组。逗号不在匹配项中，它是一个分隔符。

第一个元素是：

```
(26 JAN 2011) - ILewis 
```

第二个是：

```
JAN 
```

这是因为您将月份位包裹在括号中。它是一个捕获组，`exec`并将捕获组作为结果的一部分返回。

你要

```
sDate[0] 
```

如果您从中得到一个空文本框，则在正则表达式之外还有其他一些问题。

*您的正则表达式中也有一些不正确的转义`\`。因为它在那里，它在 IE 中根本不起作用。`\\`无论您有什么地方，您都需要`\`*

**编辑**：这个小提琴显示了实际的代码。有用。

[http://jsfiddle.net/5azr9/](http://jsfiddle.net/5azr9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:08:41.257

也许您可以使用更简单（更宽容）的正则表达式，这完全取决于您的需求，但试试这个：

```
/\(\d{2}.\w{3}.\d{4}\)[\s\-.,]{0,3}\b\w+\b/ 
```

# javascript - XmlHttpRequest 上传进度事件仅触发一次且为时过早

> ID：12735677
> 
> 赞同：3
> 
> 时间：2012-10-04T20:48:19.067
> 
> 标签：javascript, file-upload, upload, xmlhttprequest

我正在尝试上传一段文件（使用 HTML5 文件 API、切片和 XmlHttpRequest2），并向用户报告进度。

我遇到的问题是进度事件通常几乎立即触发（即使块大小为 5MB），“加载”值等于块的大小。当然，上传块可能需要 30 秒，在此期间用户没有反馈。

下面的代码如果有人可以帮忙吗？我几乎一直在为这个问题撕扯头发，但找不到遇到同样问题的人！...

```
var startPosition = (partNumber - 1) * PART_SIZE;
var blob;

if (typeof fileUpload.File.slice != "undefined")
{
    blob = fileUpload.File.slice(startPosition, startPosition + contentLength);
}
else
{
    if (typeof fileUpload.File.webkitSlice != "undefined")
        blob = fileUpload.File.webkitSlice(startPosition, startPosition + contentLength);

    if (typeof fileUpload.File.mozSlice != "undefined")
        blob = fileUpload.File.mozSlice(startPosition, startPosition + contentLength);
}

fileUpload.PartNumber = partNumber;

        var xhr = new XMLHttpRequest();            

        // Add event listener for progress
        xhr.upload.onprogress = function (event) 
        {
            log.debug("progress " + event.loaded);

            if (event.lengthComputable)
                UpdateProgress(fileUpload, event.loaded);
        };            

        xhr.open("PUT", url, true);

        xhr.setRequestHeader('authorization', result);

        // Make the request an HTTP PUT
        log.debug('Sending PUT request to ' + url);
        xhr.send(blob); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:01:23.203

答案 - 代码没有问题。我的电脑出了点问题，它在不同计算机上的同一浏览器中运行良好。

# javascript - Youtube 识别其安装的应用程序：如何？

> ID：12735680
> 
> 赞同：1
> 
> 时间：2012-10-04T20:48:24.810
> 
> 标签：javascript, iphone, objective-c, ios, ipad

您是否尝试安装 youtube 应用，然后在 safari mobile 中打开一个网址，例如[http://www.youtube.com/cocacola](http://www.youtube.com/cocacola)

在页面顶部 Youtube 告诉我我已经安装了 youtube 应用程序......

它是如何制作的？

它可能是通过检测已安装应用程序从 url 打开应用程序的解决方案。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:07:12.030

对于 iOS 6 之前的版本，看起来他们的网站在您访问时会硬编码横幅。如果您将用户代理设置为 iPxx 代理（在“开发人员”菜单中），您可以在 Mac 上的 Safari 中看到它。

对于 iOS 6，他们使用 Apple 引入的元标记：`<meta name="apple-itunes-app" content="app-id=YOUR_APP_ID_HERE">`. 如果您查看页面源，则可以看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:23:07.317

这是一个[智能应用横幅（链接到 Apple 的 Safari 文档）](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)。

您可以这样实现它们`<meta name="apple-itunes-app" content="app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL">`。附属数据和应用程序参数是可选的。

# wget - Wget 缺少 URL 和

> ID：12735682
> 
> 赞同：0
> 
> 时间：2012-10-04T20:48:42.057
> 
> 标签：wget

我是 Wget 的新手。按照在线示例，我正在尝试使用以下命令登录到一个简单的页面：

```
wget --post-data='entry=85482564&submit3=LOGIN' \ --save-cookies=my-cookies.txt --keep-session-cookies \ https://www.abczyx.com 
```

我收到以下错误：

```
SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc
syswgetrc = C:\Program Files (x86)\GnuWin32/etc/wgetrc
wget: missing URL
Usage: wget [OPTION]... [URL]...

Try `wget --help' for more options.
'submit3' is not recognized as an internal or external command, operable program or batch file. 
```

我猜它不能完全识别`&`，但我不确定如何修复它。我正在运行 Windows 7 cmd 行。一个附带的问题，为什么使用“\”？我看到了一些带有它的例子，有些没有它。我有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T02:17:29.320

经过一番阅读，我发现因为它是 MS DOS，他们没有正确解释特殊字符。在它周围添加引号（“&”）就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T00:11:30.297

在 Windows 中，转义符号是插入符号，`^`而不是反斜杠，`\`。所以在批处理文件中它应该看起来像`'entry=85482564^&submit3=LOGIN'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-12T09:23:23.770

对我来说，有效的是将 & 更改为 %26，如 --post-data 'login=foo%26pass=bar'

此外，如果您要发布电子邮件地址，请务必将 @ 更改为 %40

其他代码： [https ://en.wikipedia.org/wiki/Percent-encoding](https://en.wikipedia.org/wiki/Percent-encoding)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-06T19:34:22.620

是的，wget 的手册中有一个错误（我会说一个非常严重的错误）。在手册中它说：

> # 登录到服务器。
> 
> 这只能进行一次。wget --save-cookies cookies.txt --post
> -data 'user=foo&password=bar'
> [http://example.com/auth.php](http://example.com/auth.php)

所以你做类似的事情

```
wget --save-cookies cookies.txt \
--post-data 'user=yourUser12%23125&password=yourPassword12%241' \
http://www.websitelink.com/ 
```

由于多种原因，这显然不起作用。首先，您必须删除`\`符号，因为它们会妨碍您；其次，您必须自己删除换行符，因为当您将其粘贴到命令行工具中时，它将执行它们，就像您在每一行之后按 Enter 一样，这将导致尝试将该命令作为 3 个单独的命令执行：

第一的：

```
wget --save-cookies cookies.txt \ 
```

第二：

```
--post-data 'user=yourUser12%23125&password=yourPassword12%241' \ 
```

第三：

```
http://www.websitelink.com/ 
```

好的，所以您删除了斜线，然后意识到您还必须自己删除换行符，但它仍然不起作用。在这一点上，它是空中的pepehands。那你现在怎么办？不知何故，您必须自动意识到`&`符号也应该是百分比编码的。所以你转

> # 登录到服务器。
> 
> 这只能进行一次。wget --save-cookies cookies.txt --post
> -data 'user=foo&password=bar'
> [http://example.com/auth.php](http://example.com/auth.php)

对此：

```
wget --save-cookies cookies.txt --post-data 'user=yourUser12%23125%26password=yourPassword12%241' http://www.websitelink.com/ 
```

它开始工作了！

# c# - C# - 类实例化其他类？

> ID：12735692
> 
> 赞同：5
> 
> 时间：2012-10-04T20:49:50.557
> 
> 标签：c#, class, c#-4.0, instantiation

我是一名 C# 初学者，并且在类之间的关系方面有点挣扎。

我正在尝试编写一个非常简单的电梯模拟。我有一堂电梯课：

```
class Elevator
{
    public int currentFloor;

    public Elevator()
    {
        currentFloor = 0;
    }

    public void ascend()
    {
        currentFloor++;
    }

    public void descend()
    {
        currentFloor--;
    }
} 
```

非常简单。这行得通，我可以实例化一个新的电梯对象并让它上下等......

现在，我想创建一个建筑对象，所以我为 Buildings 创建了一个新类。但是，我现在卡住了——如何向我的建筑物中添加可变数量的电梯对象？例如，我可能想用 3 部电梯实例化一座建筑物，或者用 5 部电梯实例化另一座建筑物......

我开始创建一个解决方案，其中建筑类有一个我可以动态添加的电梯列表，但这似乎很迟钝。所以我正在寻找的是这样的：

```
Building office = new Building();
office.elevator1 = new Elevator();
office.elevator2 = new Elevator(); 
```

这显然不起作用，因为我没有在 Building 类中声明电梯 1 和电梯 2。完成我想做的事情的最好/最干净的方法是什么？还有，这个叫什么？我用谷歌搜索了很多术语——类属于另一个类，从另一个类实例化一个类，用对象代替类的类似术语……我还查看了一些电梯模拟器代码，但找不到任何像我正在寻找的动态...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T20:52:36.267

在这里有一个`List<Elevator>`很合适；它很好地描述了现实世界的模型。

如果它是一个可能会更好`Elevator[]`（从某种意义上说，在建筑物建成后可能无法更改安装的电梯数量），但这不是绝对的。

在任何情况下，电梯的集合都应该作为适当类型的只读属性公开，因为将它与另一个交换是没有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T20:52:35.687

您可以在构造函数中添加类型等于`List<Elevator>`nd injection的成员

样本

```
public class Building
{
    private List<Elevator> yourList;
    public Building(List<Elevator> value)
    {
      yourList = value;
    }
} 
```

用例：

```
var list = new List<Elevator>();
list.Add
.....
var building = new Building(list); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T20:59:42.797

这是一个替代方案：

```
class Building
{
   public List<Elevator> Elevators { get; set; }

   public Building(params Elevator[] elevators)
   {
       Elevators = elevators.ToList();
   }
} 
```

你可以这样做：

```
var building = new Building(new Elevator(), new Elevator(), new Elevator()); 
```

稍后再添加：

```
building.Elevators.Add(new Elevator()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:58:53.557

依靠。假设您的建筑物将只有一部电梯。你想做这样的事情：

```
public class Building
{
    public Elevator Elevator { get; set; }
} 
```

然后，当您像在上面的代码中那样创建建筑物时，您可以执行以下操作：

`office.Elevator = new Elevator();`

您是 C# 新手，因此您可能还没有真正接触过`Properties`（[更多阅读](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.100%29.aspx)）。Cliffs on Properties：他们正在为您创建一种获取和设置对象数据*的*方法。在此示例中，我们正在获取/设置`Elevator`.

现在，如果您的建筑物将有未知数量的电梯，您不能只将 Elevator1 的属性写入 ElevatorInfinity。那时你会想要使用某种集合。正如其他人在此处发布的那样，您可以这样做：

```
public class Building
{
    public IList<Elevator> Elevators { get; set; }
} 
```

并将电梯添加到您的建筑物：

```
// Make sure you instantiate the list! For practice, you should run this code without instantiating the list, so you can see what happens.
office.Elevators = new List<Elevator>();
office.Elevators.Add(new Elevator()); 
```

[更多阅读 IList](http://msdn.microsoft.com/en-us/library/system.collections.ilist%28v=vs.100%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T21:21:44.227

我认为您可以覆盖索引器。当然，您应该使用 List 来支持它。列表没问题。

```
namespace Tests_CSharp_Indexer
{
class Elevator
{
}

class Building
{

    public class ElevatorList
    {
        private List<Elevator> elevators = new List<Elevator>();

        public Elevator this[int i]
        {
            get
            {
                return elevators[i];
            }

            set
            {
                if (i == elevators.Count)
                {
                    elevators.Add(value);
                }
                else
                {
                    elevators[i] = value;
                }
            }
        }

        public int Count {
            get
            {
                return elevators.Count;
            }
        }
    }

    public readonly ElevatorList Elevators = new ElevatorList();

}

class Program
{
    static void Main(string[] args)
    {

        Building building = new Building();

        building.Elevators[0] = new Elevator();
        building.Elevators[1] = new Elevator();
        building.Elevators[2] = new Elevator();

        Console.Out.WriteLine(building.Elevators.Count);
    }
}
} 
```

# ruby-on-rails-3 - 如何将 Facebook JavaScript SDK 与魔法 gem 一起使用

> ID：12735696
> 
> 赞同：0
> 
> 时间：2012-10-04T20:50:04.653
> 
> 标签：ruby-on-rails-3, facebook-javascript-sdk, sorcery

我遵循了[Sorcery 提供的](https://github.com/NoamB/sorcery/wiki/External)关于使用 Facebook 处理用户登录的指南。

```
# callback method called by Facebook after getting the authorization by the user
if user = login_from(provider) # provider == "facebook"
  redirect_to root_path #, :notice => "Logged in from #{provider.titleize}!"
else
  begin
    user = create_from(provider)
    ... 
```

然而，它只要求我的用户离开我的网站去 Facebook 页面，然后被重定向到这里。

我想要实现的是我在使用 Facebook JavaScript SDK 时看到的，它是我页面中一个干净的弹出窗口。为了实现这一点，我遵循了[Railscasts 教程](http://railscasts.com/episodes/360-facebook-authentication?view=asciicast)：

```
$('#sign_in').click (e) ->
  e.preventDefault()
  FB.login (response) ->
    window.location = '/auth/facebook/callback' if response.authResponse 
```

然而，`authResponse`唯一的包含一个`accessToken`和一个`signedRequest`，而一段时间的`userid`巫术需要一个`code`。

反正有没有正确地做到这一点（或得到`code`使用`accessToken`？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:13:20.613

> 但是，authResponse 只包含一个 accessToken 和一个 signedRequest 以及一个用户 ID，而 Sorcery 需要一个代码。
> 
> 无论如何可以正确执行此操作（或使用 accessToken 获取代码？）。

在服务器端流程中，这`code`只是*获取访问令牌的**中间*步骤——应用程序获取代码，并为访问令牌*交换*代码。

 **因为在客户端流程中，当它完成时你已经*获得*了一个访问令牌——它没有比这更“合适”的了。

所以你有两个选择：

*   要么重构你的 Sorcery-thingie，让它跳过获取代码并将其交换为访问令牌的步骤，并在获得访问令牌后直接“设置”访问令牌（无论 Sorcery 可能希望在哪里设置它）；或者

*   坚持服务器端流程，但自己在弹出窗口中打开它。然后你仍然会得到代码，但你会在弹出窗口中得到它。因此，您必须关闭弹出窗口，然后自己重​​新加载原始窗口。**

# drupal - 如何通过 API 在 drupal 中更改用户邮件属性？

> ID：12735699
> 
> 赞同：0
> 
> 时间：2012-10-04T20:50:16.220
> 
> 标签：drupal

如何通过 API 更改用户电子邮件地址？在数据库中，该列是 users.mail。

我想通过 REST 从另一个应用程序调用 Drupal 来更改用户的电子邮件地址。

我正在使用 Drupal 7。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:53:02.673

您应该查看[Services 模块](http://drupal.org/project/services)以及与之相关的大量[文档。](http://drupal.org/node/109782)

# visual-studio - 在 Visual Studio 中构建时，LoadLibrary 无法加载错误代码 126 的 dll

> ID：12735700
> 
> 赞同：5
> 
> 时间：2012-10-04T20:50:19.247
> 
> 标签：visual-studio, visual-c++

该项目由一个 .cpp 文件组成，该文件调用 LoadLibrary() 来加载 dll 文件。

如果我通过*Microsoft Visual Studio 2012 命令提示符*运行以下命令，会发生什么情况：

```
cl /nologo Test.cpp 
```

一切正常。

另一方面，如果我启动一个简单的 Visual C++ 项目，添加文件并在那里编译，LoadLibrary() 调用失败，*代码为 126：找不到指定的模块。*

我从命令行构建的 .exe 是 Visual Studio 中构建的 .exe 的两倍多。所以我想有一些静态链接正在进行。

.dll 文件很好，它与 .exe 文件位于同一目录中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T15:10:23.227

我想到了。

默认情况下，*cl*命令使用多字节字符集。在 Visual Studio 中设置的新项目配置为 unicode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T06:13:19.167

如果 Loadlibrary 函数失败并出现错误 126，这清楚地表明它无法找到库。因此您可以通过在 Loadlibrary 的参数中应用完整路径来检查此功能。如果它有效，则在系统环境变量的 PATH 变量中设置该路径。因为 Loadlibrary api 首先找到该完整路径，如果它无法在该路径中找到该库，则它会在系统标准 PATH 中搜索它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T16:50:18.683

请问你的操作系统是64位的吗？

我在我的win7（64位）上遇到过这种情况，但在VS，photoshop（64位），matlab-2011a（64位）中没有。提示相同：Loadlibrary failed with error 126 ...

据我所知，“他们缺少一个对其功能至关重要的注册表项。具体来说，每当应用程序请求 OpenGL 访问时，AMD 的 atig6pxx.dll 就会启动。然后它会窥视 HKLM\SYSTEM\CurrentControlSet\Control\Class{4d36e968-e325-11ce-bfc1-08002be10318}\0000 并加载 OpenGL 组件，如OpenGLVendorName（64 位）或 OpenGLVendorNameWow（32 位）。”

可以参考这篇博客（<a href="http://www.withinwindows.com/2012/03/18/quick-fix-for-amds-opengl-on-windows-8/" rel="nofollow" >在此处输入链接描述），它给出了解决方案。我试过了，它工作。或者你可以参考这个论坛（[在这里输入链接描述](http://www.minecraftforum.net/topic/1200107-loadlibrary-failed-with-error-126-the-specified-module-could-not-be-found/)）。</p>

我希望它能解决你的问题，祝你好运:)

# .net - 在 IIS 上运行的开源或免费 ESB

> ID：12735707
> 
> 赞同：-1
> 
> 时间：2012-10-04T20:50:55.410
> 
> 标签：.net, iis, esb

我正在为我正在工作的项目寻找 ESB 开源解决方案。不幸的是，我发现的所有 ESB 都适用于 Linux，或者它们在 IIS 中运行，但我必须为许可证付费。

如果您知道在 IIS 上运行什么开源 ESB，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:58:30.547

企业服务总线中的 ESB？在这种情况下，[NServiceBus](http://nservicebus.com/)，到目前为止。他们有免费的开源版本和商业企业版。

# java - 从 DateTime 对象中提取数据

> ID：12735708
> 
> 赞同：0
> 
> 时间：2012-10-04T20:51:01.657
> 
> 标签：java, jodatime

我正在研究一种可以告诉我某个日期是否在某个日期期间内的方法。我的方法将有两个 DateTime 对象的参数；开始日期和结束日期，也将由 DateTime 对象调用。

为了解决这个问题，我一直试图弄清楚如何从要比较的 DateTime 对象中提取年、月、日、时间。但是我不知道如何让它继续下去。我检查了 DateTime 的 API，它必须执行我想要的功能的方法是 monthOfYear()。

但是当我实现它时，它会输出“Property[monthOfYear]”。

API 将方法放在 DateTime.Property 下，但我也玩过它，但我没有得到任何结果。

> ```
> import org.joda.time.DateTime;
> 
>    public class Tester implements TesterInterface {
> 
>        public static void main(String[] args) {
> 
>            DateTime dateTime1 = new DateTime(2012, 5, 12, 13, 30);
> 
>            System.out.println(dateTime1.monthOfYear());
>        } 
> ```
> 
> }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:01:57.963

打电话[`getMonthOfYear()`](http://joda-time.sourceforge.net/apidocs/org/joda/time/base/AbstractDateTime.html#getMonthOfYear%28%29)。

据[记载](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)：

> 可以通过两种方式查询每个单独的字段：
> 
> *   getHourOfDay()
> *   hourOfDay().get()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:02:24.143

改变

```
dateTime1.monthOfYear() 
```

至

```
dateTime1.getMonthOfYear() 
```

# oracle - 如何在 PLSQL 中获取发生异常的过程/函数名称？

> ID：12735712
> 
> 赞同：3
> 
> 时间：2012-10-04T20:51:28.130
> 
> 标签：oracle, exception, plsql

如何获取 PLSQL 中发生异常的过程/函数名称？我需要这个来创建一个包中有问题的过程的日志。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T07:04:09.327

不幸的是，在运行时无法获得包装在包中的存储过程名称。任何方法，无论是`$$PLSQL_UNIT`查询指令还是[dbms_utility包的](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_util.htm#CHDGHICD)[FORMAT_ERROR_BACKTRACE](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_util.htm#i1003874)函数，在独立存储过程的情况下都允许您这样做包裹。因此，您唯一的选择是使用例如捕获包名称和发生错误的行号。`anonymous block``dbms_utility.format_error_backtrace`

```
SQL> create or replace package some_pkg
  2  as
  3    procedure some_proc;
  4  end;
  5  /

Package created

SQL> 
SQL> create or replace package body some_pkg
  2  as
  3     procedure Some_Proc
  4     is
  5       l_var number;
  6     begin
  7       l_var := 1/0;
  8     exception
  9       when others
 10       then dbms_output.put_line(dbms_utility.format_error_backtrace);
 11     end;
 12  end;
 13  /

Package body created

SQL> exec some_pkg.some_proc;

ORA-06512: at "HR.SOME_PKG", line 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:01:54.207

您的意思是获取所有在其来源中具有“异常”的程序吗？如果是这样，那么：

```
select distinct t.name from user_source t
where upper(t.text) like '%EXCEPTION%' or
  upper(t.text) like '%RAISE_APPLICATION_ERROR%'; 
```

我希望它可以帮助你:)

# c++ - 在知道具体的子类类型时使用 C 风格的强制转换

> ID：12735713
> 
> 赞同：1
> 
> 时间：2012-10-04T20:51:34.080
> 
> 标签：c++, qt, casting, downcast

在我的项目中，我有一棵不同类型的 QObjects 树。让我给你一个简单的例子，它应该让你明白我在说什么。这可能是一个示例性的 QObject 树（不是继承图，但有点类似于类图），我们从顶部的根对象开始，并在下面列出其子对象：

```
 City
                                     |
                                  Street
                                 /      \
                            House       ...
                           /     \
                       Floor     ...
                       /   \
                   Room    ... 
```

虽然 QObject 树不一定遵循此规则，但在我的情况下，树中的每个类都有*一个**特定**类型*的父级。所以，以一个关系为例，一个房子可以有一些楼层和其他类型的孩子，但一个楼层是房子的孩子，*只有房子*。

现在，如果我将它们建模为 QObject 派生类，则应该通过内部查看它的接口来`class Floor`给我它的接口。我真的知道这个父级将是 type ，因为我将它设计成这样，并且程序员坚持这个设计。`House *house()``QObject::parent()``House*`

如果我用 C 风格强制`QObject *parent()`转换`House*`来实现可以`House *house() const`吗？

Qt 建议使用`qobject_cast<House*>(parent())`，`0`如果`QObject* parent()`不继承自则返回`House`，使强制转换类型安全。但在发布模式下，我想避免这种缓慢的演员阵容。我分析了一种特定的算法，它在执行 C 样式转换而不是 qobject_casts 时执行速度快三倍。这是因为 qobject_cast 在运行时向元对象询问类型信息，因此在经常调用时会导致*相当大的速度下降。*

所以我最终得到的是：

```
House *Floor::house() const {
    Q_ASSERT(qobject_cast<House*>(parent()));
    return (House*)parent();
} 
```

这将在调试模式下断言父级确实是 House，而在发布模式下仅有效地进行 C 样式转换。

言归正传：**我知道当 C++ 程序员进行 C 风格转换时人们会大喊大叫，但在这种情况下可以吗？**

另一种解决方案是将特定类型的父指针另外存储为成员变量，但我认为这是多余的，我也喜欢树反映在返回树父的那些方法中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:55:42.330

如果您确定所有权图不会更改，即使在维护期间也是如此，那么未经类型检查的强制转换是安全的。您可以使用`static_cast<House*>(parent())`, 速度很快，或者，如果您真的愿意，可以使用 C 风格的演员表。但是 C 风格的演员并不比 C++ 快`static_cast`。

# jakarta-ee - 用于添加和编辑操作的 Struts2 页面导航

> ID：12735715
> 
> 赞同：1
> 
> 时间：2012-10-04T20:51:37.030
> 
> 标签：jakarta-ee, struts2

我需要了解简单的流程，因为我是 Struts2 的新手并且正在努力解决它。

我有添加学生信息的简单表格。此表单用于分别使用添加​​和编辑操作添加和编辑，并且都调用一个名为 saveOrUpdate 的方法，该方法必须检查 id 并插入或更新用户。一些常见的东西。我使用的网址如下

```
http://localhost:8080/Student/add  -> action = add  -> method = saveOrUpdate -> register.jsp
http://localhost:8080/Student/edit -> action = edit -> method = saveOrUpdate -> register.jsp 
```

**我的问题：**

当我键入时`http://localhost:8080/Student/add`，会显示 register.jsp 但同时会触发 saveOrUpdate 从而在其中执行代码（插入条件）。

如何在`http://localhost:8080/Student/add`不执行 saveOrUpdate 的情况下显示用户空白的新 register.jsp 页面？

***我的解决方案如下，但你如何做到这一点。我的方法对吗？之前有所不同，但阅读在线教程得出的结论如下***。这有点冗长，因为添加和编辑使用相同的结果。任何帮助。

```
<action name="add">
            <result>/WEB-INF/pages/student/register.jsp</result>
        </action>

        <action name="edit">
            <result>/WEB-INF/pages/student/register.jsp</result>
        </action> 
```

**register.jsp 按钮将在下面具有添加和编辑数据的操作。**

```
<action name="insertOrUpdateStudent" class="com.myapp.actions.StudentAction" method="insertOrUpdateStudent">
    <result name="success" type="redirectAction">list</result>
    <result name="input">/WEB-INF/pages/student/register.jsp</result>
</action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:11:05.830

您可以像这样使用全局结果：

```
<package>
   <global-results>
      <result name="success">/WEB-INF/pages/student/register.jsp</result>
   </global-results>

   <action name="add"/>
   <action name="edit"/>
</package> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:22:17.797

您可以为添加/编辑操作添加不同的方法。

```
<action name="add" method="add" class="com.myapp.actions.StudentAction">
  <result>/WEB-INF/pages/student/register.jsp</result>
</action>

<action name="edit" method="edit" class="com.myapp.actions.StudentAction">
  <result>/WEB-INF/pages/student/register.jsp</result>
</action> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T22:16:41.523

另一种方式，

添加约定插件：struts2-conventions-plugin-xxxjar，其中xxx为版本。

创建：/WEB-INF/content/register-input.jsp 和 /WEB-INF/content/register-success.jsp

如果Register类返回输入，则调用register-input，如果返回成功则调用register-success。如果您直接调用 register-input 并且没有 RegisterInput 类，则直接呈现视图。

一开始可能很难看到价值，但尝试一下，你就会上瘾。

为了更符合您的命名，您可以使用适当的视图返回 -add、-edit 等，尽管我个人不会这样做并坚持使用内置字符串（成功、输入、错误......）并映射在命名空间中添加、编辑等。

# c# - ASP.NET 路由，简单问题

> ID：12735719
> 
> 赞同：2
> 
> 时间：2012-10-04T20:51:46.323
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我有以下内容：

```
 routes.MapPageRoute("RouteToPages", "{PageName}", "~/Page.aspx");

    routes.MapPageRoute("RouteToProducts", "products", "~/Products.aspx");
    routes.MapPageRoute("RouteToProduct", "product/{ProductName}", "~/Products.aspx"); 
```

当然，正如您可能已经猜到的那样，我永远无法访问我网站上的 /products，因为它会自动将我重定向到 ~/Page.aspx。有没有办法解决这个问题并允许路由到其他“目录”，同时在我的域的根目录上维护一个动态页面名称？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:55:20.430

我通常会编写一个 HttpModule 来处理这个问题，但我想规则应该首先匹配。试试这个：

```
routes.MapPageRoute("RouteToProducts", "products", "~/Products.aspx");
routes.MapPageRoute("RouteToPages", "{PageName}", "~/Page.aspx");
routes.MapPageRoute("RouteToProduct", "product/{ProductName}", "~/Products.aspx"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:56:00.220

以相反的顺序放置路线 - 最具体到特定租赁。重定向到路由时，它将搜索直到找到匹配项，然后停止。

```
routes.MapPageRoute("RouteToProduct", "product/{ProductName}", "~/Products.aspx");
routes.MapPageRoute("RouteToProducts", "products", "~/Products.aspx");
routes.MapPageRoute("RouteToPages", "{PageName}", "~/Page.aspx"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:57:26.020

您应该能够翻转路线

```
routes.MapPageRoute("RouteToProducts", "products", "~/Products.aspx");
routes.MapPageRoute("RouteToProduct", "product/{ProductName}", "~/Products.aspx");
routes.MapPageRoute("RouteToPages", "{PageName}", "~/Page.aspx"); 
```

*   `/products`应该去`/products.aspx`
*   `/product/foo`应该去`/products.aspx`
*   `/foo`应该去`/pages.aspx`

路线先到先得。如果它是路线 1，那就是它需要的路线。`{PageName}`匹配一切，自然而然地它会优先

# apache - 如何在不导致无限循环的情况下将所有请求修改为单个文件

> ID：12735720
> 
> 赞同：3
> 
> 时间：2012-10-04T20:51:48.623
> 
> 标签：apache, mod-rewrite, cpanel, whm

如何将所有请求发送到 www.myurl.com/{ANYTHING} 并将它们全部发送到 www.myurl.com/index.php

我发现我可以通过以下方式发送所有内容：

```
RewriteRule .* index.php [R=Permanent,L] 
```

这很好用，除了我被重定向到 www.myurl.com/home/username/public_html 因为我的 cpanel/apache 安装。所以我改为将代码更改为

```
RewriteBase /
RewriteRule .* index.php [R=Permanent,L] 
```

但这会再次导致无限循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:12:09.027

尝试：

```
RewriteCond %{REQUEST_URI} !^/index.php
RewriteRule .* /index.php [R=Permanent,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-17T20:26:56.513

对于 Apache，使用 mod_rewrite：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?q=$1 [L,QSA] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T07:16:23.467

这有效地将我发送到 index.php 而不会导致循环。

```
RewriteCond %{REQUEST_URI} ^/index\.php$
RewriteRule ^(.*)$ - [L]

RewriteRule ^(.*)$ /index.php?url=%{REQUEST_URI} [R=302,L,QSA] 
```

# sql - 如何使用 T-SQL（通过运行查询）删除本地发布？

> ID：12735721
> 
> 赞同：0
> 
> 时间：2012-10-04T20:51:51.307
> 
> 标签：sql, tsql, replication

我想删除下面带下划线的：

![](../Images/a1d38e41ea784871181b69a8f63f8d7c.png)

如何运行查询来完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:20:19.337

[您可以使用sp_droppublication](http://msdn.microsoft.com/en-us/library/ms188363.aspx)删除发布。

# c# - C#在应用程序中保存文件位置

> ID：12735723
> 
> 赞同：1
> 
> 时间：2012-10-04T20:52:06.977
> 
> 标签：c#, .net, winforms, settings

我希望用户能够选择程序文件在其 PC 中的位置，并在每次启动我的应用程序时保存该位置，直到他们更改它。我从来没有用 C# 做过这样的事情，我仍然认为自己是 C# 的新手。我考虑过制作一个 Settings.txt 文件或 XML 文件并读取用户保存的行，但我仍然不确定如何存储它。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:07:59.613

为此，最简单的方法可能是使用[.NET 用户设置](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx#settingscs_topic2)。

还有很多其他选项，包括[独立存储](http://msdn.microsoft.com/en-us/library/3ak841sy.aspx#scenarios_for_isolated_storage)，甚至使用[Application 类](http://msdn.microsoft.com/en-us/library/6y6135ed.aspx)公开的目录或注册表项之一（UserAppDataPath、LocalUserAppDataPath、UserAppDataRegistry、...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:57:26.840

从我开始，制作自己的文件类型来保存特定数据听起来不错。

当你开发你的程序时，你可能会发现这有点限制，但为了学习，我会从想到的任何解决方案开始，然后你可能会确定自己需要重新设计哪些部分以提高效率或实用性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:56:21.317

```
void Main()
{
    // Settings in a Text File
    string path1 = @"C:\\Dev\\settings.txt";
    string setting1;
    string setting2;
    setting1 = "foo";
    setting2 = "bar";
    SaveSettingsToTextFile(path1, setting1, setting2);
    setting1 = "";
    setting2 = "";
    LoadSettingsFromTextFile(path1, out setting1, out setting2);
    Console.WriteLine(setting1);
    Console.WriteLine(setting2);

    // Settings in an Xml File
    string path2 = @"C:\\Dev\\settings.xml";
    MySettings mySettings = MySettings.Create(path2);
    mySettings.setting1 = "bat";
    mySettings.setting2 = "baz";
    mySettings.Save();  
    mySettings = null;
    mySettings = MySettings.Create(path2);
    Console.WriteLine(mySettings.setting1);
    Console.WriteLine(mySettings.setting2);
}

void SaveSettingsToTextFile(string path, string setting1, string setting2)
{
    var sb = new StringBuilder();
    sb.AppendLine(setting1);
    sb.AppendLine(setting2);
    File.WriteAllText(path, sb.ToString());
}

void LoadSettingsFromTextFile(string path, out string setting1, out string setting2)
{
    var lines = File.ReadLines(path).ToArray();
    setting1 = lines[0];
    setting2 = lines[1];
}

public class MySettings
{
    public string setting1 { get; set; }
    public string setting2 { get; set; }

    static XmlSerializer serializer = new XmlSerializer(typeof(MySettings));

    public static MySettings Create(string savePath)
    {
        MySettings instance;
        if(File.Exists(savePath))
        {
            var xDoc = XDocument.Load(savePath);
            var reader = xDoc.CreateReader();
            instance = (MySettings)serializer.Deserialize(reader);
            reader.Close();
        }
        else
        {
            instance = new MySettings();
        }
        instance.SavePath = savePath;
        return instance;
    }

    public void Save()
    {
        var xDoc = new XDocument();
        var writer = xDoc.CreateWriter();
        serializer.Serialize(writer, this);
        writer.Close();
        File.WriteAllText(this.SavePath, xDoc.ToString());
    }

    [XmlIgnore]
    public string SavePath { get; private set; }
} 
```

Output:

```
foo
bar
bat
baz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T22:02:24.247

最简单的做法是将设置文本文件或 xml 文件添加到项目中，并使用后面的 C# 代码对其进行更新。它非常简单，所以我不会在这里详细描述如何做到这一点。只是谷歌搜索在 c# 中写入文本文件。

# rebol - 为什么 foreach append 只取最后一项？

> ID：12735726
> 
> 赞同：0
> 
> 时间：2012-10-04T20:52:29.170
> 
> 标签：rebol

我有这个 REBOL 脚本：

```
REBOL [Title: "Employee list"]

emp-list: [
    "Amy" 1
    "Bob" 2
    "Carrie" 3
]

gui-layout: [ text "click to reveal number" ]

foreach [name id] emp-list [
    append gui-layout [
        box name [print id]
    ]
]

view layout gui-layout 
```

奇怪的是，对我来说，它会创建一个包含三个 Carries 的窗口，单击时会打印 3 个。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:22:36.400

```
>> probe gui-layout

[text "click to reveal number"
box name [print id]
box name [print id]
box name [print id]
] 
```

Rebol 只是在 FOREACH 循环之后将行附加`box name [print id]`到`'gui-layout`，而不对其进行评估，`'name`指向`"Carrie"`并`'id`指向 3。

因此，为避免这种情况，您可以像这样替换 FOREACH 循环：

```
foreach [name id] emp-list [
    append gui-layout compose/deep [
        box (name) [print (id)]
    ]
] 
```

在这个循环之后：

```
>> probe gui-layout

[text "click to reveal number"
box
"Amy" [print 1]
box
"Bob" [print 2]
box
"Carrie" [print 3]
] 
```

# tsql - 递归置换组合

> ID：12735730
> 
> 赞同：0
> 
> 时间：2012-10-04T20:52:47.297
> 
> 标签：tsql

我需要帮助来实现以下输出。我有一张桌子

```
declare @tblLevels  table(
levelsID                INT IDENTITY(1,1),
levelNumber             INT,
levelDesc               VARCHAR(100))
insert into @tblLevels(levelNumber,levelDescription)
 values 
(1,'L1D1'),
(1,'L1D2'),
(1,'L1D3'),
(1,'L1D4'),
(2,'L2D1'),
(2,'L2D2'),
(2,'L2D3'),
(2,'L2D4'),
(3,'L3D1'),
(3,'L3D2'),
(3,'L3D3')

select * from @tblLevels

levelsID    levelNumber levelDesc
========================================
1               1           L1D1
2               1           L1D2
3               1           L1D3
4               1           L1D4
5               2           L2D1
6               2           L2D2
7               2           L2D3
8               2           L2D4
9               3           L3D1
10              3           L3D2
11              3           L3D3 
```

我有另一个表（@tblLevelSpreadOut），其结构如下

```
declare @tblLevelSpreadOut  table(
levelSpreadOutID                INT IDENTITY(1,1),
levelNumber1                    INT,
levelDesc1                      VARCHAR(100),
levelNumber2                    INT,
levelDesc2                      VARCHAR(100),
levelNumber3                    INT,
levelDesc3                      VARCHAR(100)) 
```

它需要从前一个表（@tblLevels）中填充，这样输出是

```
 select  levelNumber1, levelDesc1,  levelNumber2 ,levelDesc2 , levelNumber3 ,levelDesc3 
from @tblLevelSpreadOut

 levelNumber1 levelDesc1  levelNumber2 levelDesc2  levelNumber3 levelDesc3
============================================================================
1   L1D1    2   L2D1    3   L3D1
1   L1D1    2   L2D1    3   L3D2
1   L1D1    2   L2D1    3   L3D3
1   L1D1    2   L2D2    3   L3D1
1   L1D1    2   L2D2    3   L3D2
1   L1D1    2   L2D2    3   L3D3
1   L1D1    2   L2D3    3   L3D1
1   L1D1    2   L2D3    3   L3D2
1   L1D1    2   L2D3    3   L3D3
1   L1D1    2   L2D4    3   L3D1
1   L1D1    2   L2D4    3   L3D2
1   L1D1    2   L2D4    3   L3D3
1   L1D2    2   L2D1    3   L3D1
1   L1D2    2   L2D1    3   L3D2
1   L1D2    2   L2D1    3   L3D3
1   L1D2    2   L2D2    3   L3D1
1   L1D2    2   L2D2    3   L3D2
1   L1D2    2   L2D2    3   L3D3
1   L1D2    2   L2D3    3   L3D1
1   L1D2    2   L2D3    3   L3D2
1   L1D2    2   L2D3    3   L3D3
1   L1D2    2   L2D4    3   L3D1
1   L1D2    2   L2D4    3   L3D2
1   L1D2    2   L2D4    3   L3D3
1   L1D3    2   L2D1    3   L3D1
1   L1D3    2   L2D1    3   L3D2
1   L1D3    2   L2D1    3   L3D3
1   L1D3    2   L2D2    3   L3D1
1   L1D3    2   L2D2    3   L3D2
1   L1D3    2   L2D2    3   L3D3
1   L1D3    2   L2D3    3   L3D1
1   L1D3    2   L2D3    3   L3D2
1   L1D3    2   L2D3    3   L3D3
1   L1D3    2   L2D4    3   L3D1
1   L1D3    2   L2D4    3   L3D2
1   L1D3    2   L2D4    3   L3D3 
```

感谢所有回复的人以及所有查看此问题的人。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T21:05:00.617

你想要一个完整的外部连接吗？

尝试

```
select  
 t.levelNumber1, 
 t.levelDesc1,  
 t.levelNumber2 ,
 t.levelDesc2 , 
 t.levelNumber3 ,
 t.levelDesc3 
from 
 @tblLevelSpreadOut t outer join
 @tblLevelSpreadOut t2
order by
 t.levelDesc1,  
 t.levelDesc2 , 
 t.levelDesc3 
```

此外，考虑接受您的问题的答案。你会从社区中得到更好的回应。

# character-encoding - 如何区分 Mac OS Roman 和 UTF8

> ID：12735732
> 
> 赞同：0
> 
> 时间：2012-10-04T20:52:55.293
> 
> 标签：character-encoding

我有文本文件，我怎么知道文件中的文本是 UTF8 标准还是 Mac OS Roman

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:01:24.943

UTF-8 文件可以以[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)开头，这将使它们易于识别。

如果他们不这样做，您无法确定，但基本上需要编写代码来做出有根据的猜测。

有几种方法可以进行猜测；

*   扫描文件中是否存在非法 UTF8 序列，如果存在，则文件应该是 MacRoman。
*   扫描您正在阅读的文件中的“常用”字符，如果它们是 ascii 128 或更高，它们将在 UTF-8 和 MacRoman 中以不同方式编码。

两种编码之间的所有字符 <= ascii 127 都应该相同，因此如果文件中只有这些，则编码无关紧要，它将产生相同的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:17:24.637

对于单个文件，实际操作是在网络浏览器中打开它，并通过浏览器的查看菜单测试它在两种编码中的外观。如果编码很重要（即，Ascii 范围 0-127 之外的字符），您通常应该立即看到差异（至少如果您可以阅读文档的语言）。

在编程中，如果您需要设置一个通用工具来自动解决此类问题，最好尝试读取两种编码的文件（使用您喜欢的编程语言和工具）并检查是否成功。如果两种方法都成功，请检查它是否也可以读取为 Ascii - 如果可以，答案很简单（文件是 UTF-8 和 MacRoman 编码的），如果不能，则需要一些额外的逻辑。原则上，此时需要检查内容，因为数据可以在编码级别进行双向解释，并且只有内容才能确定哪种解释是正确的。

# c++ - 使用 Qt、QWT 和 C++ 进行实时数据绘图

> ID：12735734
> 
> 赞同：1
> 
> 时间：2012-10-04T20:52:58.633
> 
> 标签：c++, qt, qwt

我是 Qt、QWT 的新手，并且对 C++ 有基本的了解。

根据我得到的项目，我必须获取一些大篷车上的传感器给出的数据，比如太阳能电池板的电压和电流、温度、湿度等。所有这些数据都由一些传感器采集并由 NI 6229 DAQ 设备收集。

直到现在，我只是给了侧灯。现在我要解决真正的问题了。

我想获取来自 DAQ 设备的数据，并在程序中显示、绘图、记录和登录。

我决定使用 C++、Qt 和 QWT。当然还有用于从 DAQ 设备获取数据的 NIDAQMX API。

我已经部分地设计了一个 GUI，但我卡住的地方是我的代码的真正工作部分。

我不知道如何在考虑性能标准的情况下实现所有这些东西，我真的需要一个指南。

我应该如何处理数据采集？

我应该如何绘制我获取的数据？

这些是否需要由不同的线程或其他结构分开？

收集几乎 10 或 12 个通道的数据并实时绘制是否会导致合理的性能问题？如果是这样，我该如何处理？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:58:07.863

如果您编写一个简单的程序来使用 NI 6229，您需要设置操作的优先级：绘图或记录数据。
在大多数情况下，数据存储是最重要的操作。
在我的实践中，我使用了以下算法：

*   1个GUI线程（通用UI+绘图），每个设备1个数据采集线程，1个数据记录线程。
*   数据采集​​线程每 dT 时间运行一次（我们询问设备：-准备了多少数据？-10000 个样本-好的，给我）。因为 NI 6659 的采样频率小于 1 MSamples/s，所以我认为 dT 的值大约为 50-200 ms（取决于接口）。
*   从设备读取数据后，我使用队列将数据发送到线程进行记录。
*   绘图也是如此。我将 qwt 与数据抽取一起使用（但您应该保存峰值）。Qwt 有一个不错的例子。您还可以找到提高绘图性能的解决方案。我的建议是将图表分成组，例如，一组可能包含 4 个图表。

它仅适用于简单程序，不适用于实时操作系统。

# c# - 如何让面板的孩子动态重置他们的 Location.Y 属性？

> ID：12735735
> 
> 赞同：1
> 
> 时间：2012-10-04T20:52:58.293
> 
> 标签：c#, winforms, resize, panel, groupbox

我在表单上有一个面板，面板的 AutoScroll 属性设置为 True。

在那个面板上，我放置了几个 GroupBox 控件，它们比面板占用更多的空间 - 因此，面板会出现一个垂直滚动条。

如果需要，其中一个面板可以在运行时更改高度（我根据它包含的文本量以编程方式设置它的高度）：

```
groupBox1.Height = label1.Height + label1.Top + 10; 
```

如果面板高度增加，这可以正常工作 - 它下方的 GroupBoxes“向下移动”。但是，如果面板的高度降低，下面的 GroupBox 不会“向上移动”。

我知道我可以以编程方式向上移动下面的组框控件，但我认为必须有比这更好/不那么挑剔的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:57:14.407

`Panel`用 a代替`FlowLayoutPanel`，这将成为自动的。

（您可能想要关闭 FL-Panel 的包装）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:09:07.140

将它们的停靠属性设置为 Top。然后更改子项的 Z 顺序以指定其显示顺序。

```
GroupBox1.Dock = DockStyle.Top;
GroupBox2.Dock = DockStyle.Top;
GroupBox3.Dock = DockStyle.Top; 
```

如果 groupbox1 增长或缩小，其他 2 个面板将移动以适应。

# php - 简单的 Javascript 函数 - 2 个选项，每个选项都指向不同的 URL

> ID：12735738
> 
> 赞同：0
> 
> 时间：2012-10-04T20:53:04.090
> 
> 标签：php, javascript

我试图弄清楚当有人单击链接时如何弹出确认/拒绝框。当他们单击“确定”时，会将他们带到一个地方，当他们单击“取消”时，会将他们带到另一个地方。我的大部分经验是使用 PHP，但通常我可以采用其他 JavaScript 函数并使它们工作......不过似乎无法弄清楚这一点。

这是我的脚本：

```
function confirmChoice(name, newid){
    answer = confirm("Transfer Ownership of this task to " + name + 
                     "? Press Cancel to decline.")
    if (answer == 1) {
        location = "transfer.php?task=<? echo $taskid; ?>&from=<? echo ownerid; ?>&to=" + newid;
    } elseif (answer==0) {
        location = "decline.php?task=<? echo $taskid; ?>";
    }   
} 
```

任何帮助将不胜感激！

编辑：好的，按照建议更改了代码。现在它是：

```
function confirmChoice(name, newid){
var answer = confirm("Transfer Ownership of this task to " + name + "? Press Cancel to decline.")
if (answer){
location = "transfer.php?task=<? echo $thistaskid; ?>&from=<? echo $ownerid; ?>&to=" + newid;
}else{
location="decline.php?task=<? echo $thistaskid; ?>";
}   
} 
```

使用的链接是：

```
<a href="#" onclick="confirmChoice(<? echo $requestorname; ?>, <? echo $newid; ?>); return false;"><? echo $requestorname; ?> Requested Ownership</a> 
```

我还是没有收到确认框...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:57:24.173

让它`top.location`而不是仅仅`location`

另外，我建议不要进行`answer == 1`比较。

`confirm`无论如何返回一个布尔值。做就是了`if (answer) {`

避免这样做的原因`answer == 1`是，doing`== 1`是一种非严格的比较，如果你不知道 JavaScript 的行为方式，它最终会咬你一口。`answer === true`也是一种可接受的方式。

另一个重要的细节是，当你这样做时：

```
answer = confirm("something here"); 
```

您将 answer 声明为全局变量。这是一种可怕的做法，你应该避免它。只需`var`在它之前添加即可修复它。

```
var answer = confirm("whatever"); 
```

有关 javascript 比较的更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:26:43.217

如果您使用的是 window.open()，您可以轻松更改目的地的位置，但检查确认返回的内容。

```
var res = confirm("Do you agree?"); 
```

并相应地做你的交通方向

```
var options = ['http://google.com', 'http://boston.com'];
window.location = options[ res ? 1 : 0 ];
// or
window.open = options[ res ? 1 : 0 ]; 
```

小提琴不想玩得很好，但它在我的本地机器上对我有用。
[http://jsfiddle.net/kyleouellette/G9KGm/1/](http://jsfiddle.net/kyleouellette/G9KGm/1/)

# java - AtomicLong 操作

> ID：12735739
> 
> 赞同：6
> 
> 时间：2012-10-04T20:53:05.940
> 
> 标签：java, concurrency, atomic, atomic-long

我需要执行以下操作：

```
// average, total, elapsed are Long's

average = ( ( total * average ) + elapsed ) / (++total); 
```

但我想用`AtomicLong`

这是我正在尝试的，但我不太明白它是否正确：

```
 average.set( (( total.get() * average.get() ) + elapsed) / total.getAndIncrement() ); 
```

我如何判断这是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T21:06:52.763

大概您正在使用 AtomicLong 因为这些数字是同时访问的。由于您涉及两个数字，并且在同一语句中同时使用 get 和 incrementAndGet，我认为 AtomicLong 不是正确的选择。

我发现 AtomicXXX 在很多情况下都非常有用。但是在这里，我认为您需要以艰难的方式做到这一点。使您的数字成为简单的“长”私有变量，创建一个保护对象，然后确保在您访问数字时在保护对象上同步。

我认为这是您可以确定这些操作是真正原子的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:19:38.797

首先请注意，在某些平台上`AtomicLong`是使用锁实现的，因此您可能会看到性能上的显着变化。

您似乎试图一次更新两个变量。尽管许多现代处理器都支持这一点，但 Java 库不支持。带锁的版本是微不足道的，所以我会省略它。您可能还想计算 get 的平均值，并保持运行总和和总计，但我暂时忽略它。

最直接的实现是使用`AtomicReference`不可变值。请注意，这将导致分配，因此可能具有出色的性能，尤其是在低争用情况下。

```
final class Average { // Find a better name...
    private final long average;
    private final long total;
    public Average(long average, long total) {
        this.average = average
        this.total = total;
    }
    public long average() {
        return average;
    }
    public long total() {
        return total;
    }
}
...
private final AtomicReference<Average> averageRef = new AtomicReference<>();
private void elapsed(final long elapsed) {
    Average prev;
    Average next;
    do {
        prev = average.get();
        next = new Average(
            ((prev.total() * prev.average()) + elapsed ) / (prev.total() + 1),
            prev.total() + 1
        );
    } while (!average.compareAndSet(prev, next));
} 
```

可能更好的解决方案是将线程保持在本地（最好不是`ThreadLocal`，而是您提供给特定线程以进行变异的实例）。这可以很快被锁定和解锁，因为它将来自同一个线程。然后，不经常需要平均值的线程可以锁定并从所有线程读取/读取当前值。

```
class Average { // Choose better name
    private long sum;
    private long total;
    public synchronized void elapsed(final long elapsed) {
         sum += elapsed;
         ++total;
    }
    public static long average(Iterable<Average> averages) {
        long sum = 0;
        long total = 0;
        for (Average average : averages) {
            synchronized (average) {
                sum += averages.sum;
                total += average.total;
            }
        }
        return total==0 ? 0 : (sum/total);
    }
} 
```

（免责声明：未经检查、测试或编译。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T20:57:44.150

假设这些计算将由多个线程同时调用。我最初并没有将其付诸实施。

如果您想使用`AtomicLong`来进行预增量计算，那么您应该执行以下操作：

```
long value = total.getAndIncrement();
average.set((value * average.get()) + elapsed) / (value + 1)); 
```

但是，这*仍然*存在竞争条件，因为平均值可以由其他人在`average.get()`和`average.set()`调用之间更新，这不会在更新中生效。

为了完全确定，您需要（正如@user1657364 在他们的回答中提到的那样）锁定一个保护对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-05T01:34:45.673

在您的作业中，第一个总计和总计++中的总计可能不同。您需要同步整个操作。

# c - char const array POSSIBLE COMBINATION 结果和效果

> ID：12735740
> 
> 赞同：1
> 
> 时间：2012-10-04T20:53:13.067
> 
> 标签：c, arrays, pointers, char, constants

我正在尝试比较`char array (string)`in 的不同声明`C`。

我主要比较了这些组合有两点（而不是一次又一次地写我命名它们）：

1.  **点更改或点分配：**我们只是更改指针指向的内容。
    `char *a, *b;
    a=b //we are doing this`
2.  **值更改：**我们正在更改指针指向的数据。
    `char *a;
    *a='x' //we are doing this`

下面是不同组合的代码。我有大约10个疑问。我必须一起问他们，因为他们都以某种方式联系在一起。

每个疑问都在代码中进行了解释。还添加了错误消息。

因为您可能不知道每个问题的答案。所以，我在代码中标记了不同的部分。并且还给每个问题编号。
如果您知道任何问题的答案，请用适当的索引回答。

在代码中，我也做出了自己的观察和结论，这可能是错误的。所以我用**结论标记了它们：**标签。如果您发现任何结论错误，请分享/回答。

**代码：**

```
#include <stdio.h>

int main() {

    char *p = "Something";//I cant change the data
char q[] = "Wierd"; // I can change to what q points to

// I. ______________________  char*p   ___________________________
printf("\nI. ______________________  char*p   ___________________________ \n\n");

printf("%s %s\n",p, q);
//*p = 'a';// got segmentation fault as I cant change the Value

p = q;//This is possible because I change the Point

//Now the type p is a char pointer which can't change Value (because I declared it like this) but can change the Point
//and it is now pointing to a memory which is of type a char array.I can change its Value but cant change its Point
//This means there are two different things on both sides of the assignment but gcc doesnot give any error (i.e. it is acceptable)
//That is for Pointer assignment restriction rules of the type of left side var was used and for Value change
//rules of the type of right side var was used
// (1)Why?

*p  = 'x';
printf("%s %s\n",p, q);

//Again try to make Something Wierd
p = "Something";
q[0] = 'W';

// II. ______________________  char q[]   ___________________________
printf("\nII. ______________________  char q[]   ___________________________ \n\n");

printf("%s %s\n",p, q);
//q = p;// This is not possible because for q I cant change Point.
// This is the error comes
//error: incompatible types when assigning to type ‘char[6]’ from type ‘char *’

*q = 'x';//This works fine as this is possible to change Value for q
printf("%s %s\n",p, q);

//Again try to make Something Wierd
p = "Something";
q[0] = 'W';

//____________________________________________________________________/

const char * r = "What";//I cant change the data to what a points to (basic def and const act on same)
char const * s = "Point";//I cant change the data to what a points to (basic def and const act on same)
char * const t = "Pointers";//I cant change the data to what a points to because of basic def and const make c a const that now c can only point to single entity.

const char u[] = "Are";//I cant change the data to what a points to because of const and I can't change to what d points because of basic def of [].
char const v[] = "Trying";//I cant change the data to what a points to because of const and I can't change to what d points because of basic def of [].
//char w const [] = "To make";//This is not possible

//___________________________________________________________________/

// III. ______________________  const char * r   ___________________________
printf("\nIII. ______________________  const char * r   ___________________________ \n\n");

printf("%s\n",r);

//*r = 'x'; // This is not possible
//Error comes is:
//error: assignment of read-only location ‘*r’
//now the behaviour of r is same as p but instead of getting segmentation fault I got an error at compile time.
//Also the restriction const put here is same as of restriction present with p except(error checking).
//Conclusion : This means writing const here makes no difference in terms of Value and Point. What it was before is the same now.

r = s;
printf("%s %s\n",r ,s);
//*r = 'x';

r = t;
printf("%s %s\n",r ,t);
//*r = 'x';

r = u;
printf("%s %s\n",r ,u);
//*r = 'x';

r=v;
printf("%s %s\n",r ,v);
//*r = 'x';

r=p;
printf("%s %s\n",r ,p);
//*r = 'x';

r=q;
printf("%s %s\n",r ,q);
//*r = 'x';

//For above four cases
//Everything works for Point assignment 
//Nothing Works for Value change (Everytime assignment to read-only location error, no segmentation fault)

//Everything Works for Point assignment - This means everything works for the 
//rules of the type of varible on the left side for Pointer assignment. (Even for r=u,r=v, r=q).
//(2) WHY this is happening.(Actualy answer related to WHY(1))

//Nothing Works for Value change
//Now this is absurd. On the first look it seems that as the things happen at the time of p=q, here
//for r=u, r=v, r=q same things should had happened. But on the closer inspection you can get that u,v 
//have restrictions on Value change because of const.
//But (3)Why no Value change is happening for r=q ? 
// (4) Why fot r=p, r=q getting error due to const. not due to segmentation fault.

//Resetting Wierdness
r = "What";

// IV. ______________________  char const * s   ___________________________
printf("\nIV. ______________________  char const * s   ___________________________ \n\n");

printf("%s\n",s);

//*s = 'x'; // This is not possible
//Error comes is 
//error: assignment of read-only location ‘*s’
//Behavious of s is exactly same as r
//Conclusion: Writing const after or before char makes no difference.

s = r;
printf("%s %s\n",s ,s);
//*s = 'x';

s = t;
printf("%s %s\n",s ,t);
//*s = 'x';

s = u;
printf("%s %s\n",s ,u);
//*s = 'x';

s=v;
printf("%s %s\n",s ,v);
//*s = 'x';

s=p;
printf("%s %s\n",s ,p);
//*s = 'x';

s=q;
printf("%s %s\n",s ,q);
//*s = 'x';

//For above four cases
//Everything happens same as with r.

//Resetting Wierdness
s = "Point";

// V. ______________________  char * const t   ___________________________
printf("\nV. ______________________  char * const t   ___________________________ \n\n");

printf("%s\n",t);

//*t = 'x';//This is not possible
//Error is
//Segmentation-fault
//This means that on Value change the error comes not due to const. It comes for the same reason of p.

//t = r;
printf("%s %s\n",t ,r);
//*t = 'x';

//t = s;
printf("%s %s\n",t ,s);
//*t = 'x';

//t = u;
printf("%s %s\n",t ,u);
//*t = 'x';

//t=v;
printf("%s %s\n",t ,v);
//*t = 'x';

//t=p;
printf("%s %s\n",t ,p);
//*t = 'x';

//t=q;
printf("%s %s\n",t ,q);
//*t = 'x';

//For above four cases
//Nothing Works for Point Assignment
//Nothing works for value change (Everytime segmentation fault, assignment to read-only location error)

//Nothing Works for Point Assignment
//This is understandable

//Nothing works for value change
// (5) Why this is happening. Why left hand side is always given precedence. Why this isn't happening p=q, 
//because for value change t=q and p=q are exctly same both pn left side and right side of the assignment.

//Resetting Wierdness
//t = "Pointers"; //No need

// VI. ______________________  const char u[]   ___________________________ 
printf("\nVI. ______________________  const char u[]   ___________________________   \n\n");

printf("%s\n",u);

//*u = 'x';//This is not possible
//Error Comes is
//error: assignment of read-only location ‘*(const char *)&u’
//This error comes because of const.
//Conclusion: [] gives the Point restriction and const gives the Value Restriction  

//u = r;
printf("%s %s\n",u ,r);
//*u = 'x';

//u = s;
printf("%s %s\n",u ,s);
//*u = 'x';

//u = t;
printf("%s %s\n",u ,t);
//*u = 'x';

//u=v;
printf("%s %s\n",u ,v);
//*u = 'x';

//u=p;
printf("%s %s\n",u ,p);
//*u = 'x';

//u=q;
printf("%s %s\n",u ,q);
//*u = 'x';

//For above four cases
//Nothing Works for Point Assignment
//Nothing works for value change (Everytime assignment to read-only location error, no segmentation fault)

//Nothing Works for Point Assignment
//Error Comes for each is:  
//warning: assignment of read-only location ‘u’ [enabled by default]
//error: incompatible types when assigning to type ‘const char[4]’ from type ‘const char *’

//Left side rules are given precedence. (6)Why? (If already not solved in above answers)

//Nothing works for value change    
//Left side rules are given precedence. (7)Why? (If already not solved in above answers)

//Resetting Wierdness
//u = "Are";

// VII. ______________________  char const v[]   ___________________________    

printf("\nVII. ______________________  char const v[]   ___________________________  \n\n");

printf("%s\n",v);

//*v = 'x';//This is not possible
//Error Comes is
//error: assignment of read-only location ‘*(const char *)&v’
//This error comes because of const.
//Conclusion: Writing const after or before char makes no difference.

//v = r;
printf("%s %s\n",v ,r);
//*v = 'x';

//v = s;
printf("%s %s\n",v ,s);
//*v = 'x';

//v = t;
printf("%s %s\n",v ,t);
//*v = 'x';

//v=u;
printf("%s %s\n",v ,u);
//*v = 'x';

//v=p;
printf("%s %s\n",v ,p);
//*v = 'x';

//v=q;
printf("%s %s\n",v ,q);
//*v = 'x';

//For above four cases
//Everything works as same with u.

//Resetting Wierdness
//v = "Trying";

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
// (8) WHY `const char * a;`  and  `char const * a`  works same?????

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//---------------Now doing more Possible combinations with p and q------------------
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

// VIII. ~~~~~~~~~~~~~~~~~~~~~~~~~~~ char *p ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
printf("\nVIII. ~~~~~~~~~~~~~~~~~~~~~~~~~~~ char *p ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \n\n");

//p = r;
printf("%s %s\n",p ,r);
//*p = 'x';

//p = s;
printf("%s %s\n",p ,s);
//*p = 'x';

//p = t;
printf("%s %s\n",p ,t);
//*p = 'x';

//p=u;
printf("%s %s\n",p ,u);
//*p = 'x';

//p=v;
printf("%s %s\n",p ,v);
//*p = 'x';

//For above four cases

//Point Assignment
//Warning for p=r, p=s is
//warning: assignment discards ‘const’ qualifier from pointer target type [enabled by default]
//Conclusion:Kind of understandable.

// NO Warning for p=t 
//For left side type I can do Point assignment and for Right Side I can,t do.
// Left side rules are given precedence. (9)Why? (If already not solved in above answers)

//Warning for p=u, p=v is
//warning: assignment discards ‘const’ qualifier from pointer target type [enabled by default]
//For left side type I can do Point assignment and for Right Side I can,t do.
// Left side rules are given precedence. (10)Why? (If already not solved in above answers)

//Value Change
//Segmentation fault for everything .
//Conclusion: Understndable if assume left hand side are given precedence except for p = q (showed in I.)

//Resetting Wierdness
p = "Something";

// IX. ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ char q[] ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
printf("\nIX. ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ char q[] ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \n\n");

//q = r;
printf("%s %s\n",q ,r);
*q = 'x';

//q = s;
printf("%s %s\n",q ,s);
*q = 'x';

//q = t;
printf("%s %s\n",q ,t);
*q = 'x';

//q=u;
printf("%s %s\n",q ,u);
*q = 'x';

//q=v;
printf("%s %s\n",q ,v);
*q = 'x';

//For above four cases

//Point Assignment
//Error for each is:
//error: incompatible types when assigning to type ‘char[6]’ from type ‘const char *’
//Conclusion: Understandable, if assume L.H.S. is given precedence except for p = q (showed in I.)

//Value Change
//Possible for each
//Conclusion: Understndable if assume left hand side are given precedence except for p = q (showed in I.)

//Resetting Wierdness
*q = 'W'; //No need

    return 0;
} 
```

**丹尼尔的答案是完整的。但是还有两个更简单的疑问：**
1）对于`p`case 对象是一个字符串文字（无法修改），即它是右侧对象的属性，而对于 RHS 上的 q 我有相同的东西，但现在它的行为不同. 为什么会有这种不一致的设计。
2) 对于 p 如果我修改字符串文字，行为是未定义的，即有时它被修改，有时不被修改。再说为什么这样的设计。实际上，对于越界数组访问，这是可以理解的，因为您访问了以前未分配的内存，有时您无权访问那块内存，因此，分段错误。但是为什么有时我可以修改字符串文字。为什么这样。这背后的原因是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T22:29:49.653

```
char *p = "Something";//I cant change the data
char q[] = "Wierd"; // I can change to what q points to 
```

`p`是`char*`指向不允许修改的十个数组的第一个元素`char`（不要忘记 0 终止符）（尝试修改字符串文字是未定义的行为；大多数实现以只读方式存储字符串文字内存，那么这种尝试会导致段错误，但尝试修改字符串文字可能会修改数组而不是崩溃）。您可以`p`自由更改，当更改为指向可修改对象时，您可以通过`*p`.

`q`是一个由六个 s 组成的数组`char`（同样是 0 终止符）。您不能为 分配任何值`q`，但可以修改数组的内容。

```
p = q; 
```

你让`p`指向数组的第一个元素`q`。在这种情况下，`q`隐式转换为指向其第一个元素的指针，实际发生的情况也是`&q[0]`如此。`p = &q[0];`现在`p`指向一个可修改的对象，因此

```
*p  = 'x'; 
```

被允许并更改`char`.`q`

```
p = "Something";
q[0] = 'W'; 
```

您让`p`再次指向`char`不允许修改的数组的第一个元素，并将第一个元素更改`q`回通过 修改之前的`p`状态，这次使用`q`.

```
//q = p;// This is not possible because for q I cant change Point.
// This is the error comes
//error: incompatible types when assigning to type ‘char[6]’ from type ‘char *’ 
```

错误消息有点误导，*你不能分配数组*。即使使用`char hello[] = "Hello"; char world[] = "World";`，尽管两个数组具有相同的类型，但您不能分配，`hello = world; produces the same error (since in that context,`world` 被转换为指向其第一个元素的指针，但错误消息并没有错）。

```
*q = 'x';//This works fine as this is possible to change Value for q 
```

对，`*q`与 相同`q[0]`，因此您可以在许多情况下使用指针之类的数组（反之亦然）。但并非总而言之，数组和指针是不同类型的东西。

```
const char * r = "What";//I cant change the data to what a points to (basic def and const act on same)
char const * s = "Point";//I cant change the data to what a points to (basic def and const act on same) 
```

`const char *`并且`char const *`含义完全相同，指向不可修改的指针`char`（通常是此类数组的第一个）。

```
char * const t = "Pointers";//I cant change the data to what a points to because of basic def and const make c a const that now c can only point to single entity. 
```

`t`是一个常量指针，你不能改变它指向的*位置*，但是根据类型，你可以修改它指向的对象。但是，在这种情况下，`t`指向`char`字符串文字的第一个，因此您不能更改对象`t`指向（但这不是`t`'s 类型的结果）。

```
const char u[] = "Are";//I cant change the data to what a points to because of const and I can't change to what d points because of basic def of [].
char const v[] = "Trying";//I cant change the data to what a points to because of const and I can't change to what d points because of basic def of []. 
```

同样，两者的含义相同，`u`并且`v`是 的数组`const char`，由于它们的类型，您不允许更改这些数组的内容。

```
//char w const [] = "To make";//This is not possible 
```

是的，这是无效的语法，你不能在数组名和括号之间有类型限定符。

```
//*r = 'x'; // This is not possible
//Error comes is:
//error: assignment of read-only location ‘*r’ 
```

该类型`r`禁止通过更改指向的对象`r`（尽管通过其他指针更改它是合法的）。

```
//now the behaviour of r is same as p but instead of getting segmentation fault I got an error at compile time.
//Also the restriction const put here is same as of restriction present with p except(error checking).
//Conclusion : This means writing const here makes no difference in terms of Value and Point. What it was before is the same now. 
```

结论是错误的，如果你`r`改为指向一个可修改的对象，`q`例如，你仍然不能通过 改变它`r`，类型禁止它。但是你可以通过`p`. 对于指向字符串文字的指针，通常区别在于`*r = 'x';`编译失败和`*p = 'x';`分段错误，但对于一般情况，修改 through是有效的（如果指向 a 的元素，`p`通常甚至“有效” ，但这又是未定义的行为，它通常不会导致崩溃，与字符串文字相反）。`p``const char arr[10]`

```
r = s; 
```

好的没问题。您更改了`r`指向的对象，即更改`r`了 ，但没有更改`r`指向的对象。

```
r = t; 
```

也没有问题。如果`t`指向一个可修改的对象，那么您可以通过`t`但不能通过`r`. 但是作为`t`指向字符串文字的点，您不能修改`t`指向的对象，但同样，一个是编译错误，另一个可能是段错误。

```
//Everything Works for Point assignment - This means everything works for the 
//rules of the type of varible on the left side for Pointer assignment. (Even for r=u,r=v, r=q).
//(2) WHY this is happening.(Actualy answer related to WHY(1)) 
```

读`const`作“只读”。有一个`const char *r;`方法意味着你有一个指针`char`，编译器不允许你用来修改指向的对象，你只能用它来读取对象。它指向的对象是否被声明为`const`无关紧要，`const`in`r`的声明只限制了`r`可以使用的内容，而不是可以通过其他指针对指向的对象执行的操作。

```
//Nothing Works for Value change
//Now this is absurd. On the first look it seems that as the things happen at the time of p=q, here
//for r=u, r=v, r=q same things should had happened. But on the closer inspection you can get that u,v 
//have restrictions on Value change because of const.
//But (3)Why no Value change is happening for r=q ? 
// (4) Why fot r=p, r=q getting error due to const. not due to segmentation fault. 
```

我不确定我是否理解您的“Why(3)”，但如果我理解正确，您希望`*r = 'x';`在 之后工作`r = q;`，因为`r`它指向一个可修改的对象。那么答案就是我上面写的， 's 声明`const`中的限定符`r`限制了你可以通过 做什么`r`，它`const`与指向对象的状态无关。这也回答了（4），`r`禁止分配的类型`*r = whatever;`。

```
//Conclusion: Writing const after or before char makes no difference. 
```

`const`是的，尽管 出现在 之前还是之后都会有所不同`*`。`const char *r;`声明一个不能用来修改指针的指针，并`char * const x = q;`声明一个始终指向同一位置的指针；您可以使用它来修改指向的对象（如果允许的话）。并`const char * const y = q;`声明一个您无法更改的只读指针。

```
//*t = 'x';//This is not possible
//Error is
//Segmentation-fault
//This means that on Value change the error comes not due to const. It comes for the same reason of p. 
```

你不能这样做`*t = 'x';`，因为`t`碰巧指向一个字符串文字。如果您初始化`t`指向`q`，那将是允许的。

```
//t = r; 
```

这是不允许的，因为您声明`t`不可修改，您无法更改它指向的位置。

// (5) 为什么会这样。为什么总是优先考虑左侧。为什么这不会发生 p=q, //因为对于值更改 t=q 和 p=q 在赋值的 pn 左侧和右侧都完全相同。

我不确定问题是什么。您声明`t`为`const`，这意味着您不能分配给`t`。也一样`const int i = 100;`，你不会被允许`i = 120;`在你的程序中写。

```
//*u = 'x';//This is not possible
//Error Comes is
//error: assignment of read-only location ‘*(const char *)&u’
//This error comes because of const.
//Conclusion: [] gives the Point restriction and const gives the Value Restriction 
```

对。

```
//For above four cases

//Point Assignment
//Warning for p=r, p=s is
//warning: assignment discards ‘const’ qualifier from pointer target type [enabled by default]
//Conclusion:Kind of understandable. 
```

不仅“有点”。您正在将 a 分配`const char*`给 a `char*`。被指向的对象可能是不可修改的，但是试图通过 修改它`char *p`是形式上有效的，如果被指向的对象是可修改的，那么使用`p`它来修改它甚至是合法的。但是，如果指向的对象是不可修改的、字符串文字或用`const`限定符声明的，那么试图通过它来修改它`p`是未定义的行为。所以丢弃`const`限定符是一件危险的事情，编译器会警告它。然而，它可能是完全合法的，所以它只是一个警告，而不是一个错误。您可以通过使用显式强制转换告诉编译器您知道自己在做什么（无论您是否这样做）。

```
// NO Warning for p=t 
//For left side type I can do Point assignment and for Right Side I can,t do.
// Left side rules are given precedence. (9)Why? (If already not solved in above answers) 
```

您将 a 分配`char * const`给 a `char*`，这里没有丢失任何内容。分配的值`t`不会改变它，并且`const`之后`*`只说你不能改变`t`指向的地址。

```
//Warning for p=u, p=v is
//warning: assignment discards ‘const’ qualifier from pointer target type [enabled by default]
//For left side type I can do Point assignment and for Right Side I can,t do.
// Left side rules are given precedence. (10)Why? (If already not solved in above answers) 
```

与 相同`p = r;`。

```
//Value Change
//Segmentation fault for everything .
//Conclusion: Understndable if assume left hand side are given precedence except for p = q (showed in I.) 
```

分段错误只是因为您让指针指向字符串文字。如果您让它们指向`char[]`，则分配`*ptr = 'x';`将工作或不编译，具体取决于指针被声明为指向`const char`还是仅指向`char`。如果你放入几个数组`const char`，赋值当然也不会为 编译`const char*`，但它会编译为`char*`（带有关于丢弃`const`限定符的警告），并且运行程序会调用未定义的行为（它可能不会崩溃并修改数组内容，但任何事情都可能发生）。

* * *

关于附加问题：

> 1）对于 p case object 是一个字符串文字（不能修改），即它是右侧 object 的属性，而对于 RHS 上的 q 我有同样的东西，但现在它的行为不同。为什么会有这种不一致的设计。

我不确定你认为有什么不同。在`char *p = "Something";`和`char *p = q;`中，指向对象的属性决定了哪些使用`p`是有效的。两者都不是不可修改的类型（两者都是`char[N]`for some `N`），但作为标准定义的特殊情况，字符串文字是不可修改的。

声明`char *p;`（此处没有初始化，但存在与否无关紧要）声明`p`为一个指针，您可以使用它来修改它所指向的内容。但是这种修改指向对象的尝试是否有效，取决于指向对象的属性。

```
char q[] = "Wierd"; 
```

将字符串文字的内容复制到数组`q`（包括 0 终止符），因此使用字符串文字的*可修改副本*`q`进行初始化。让指向数组中的某个点指向一个可修改的对象，这样的修改是有效的。*`p``char``q``p`*

 *比如说，`p`指向一个`const`合格的对象`const char c = 'C'; p = &c;`是很危险的，因为 of 的类型`p`不会阻止`*p = 'x';`编译——毕竟，编译器通常不知道此时是`p`指向一个`const`合格的对象，还是一个可修改的对象 (分配可能来自`const char*`指向可修改对象的 a），或者根本没有有效位置。

因此，赋值`p = &c;`会导致编译器发出警告（至少编译器的警告级别足够高，但在 gcc 和 clang 中，它默认启用），甚至会因错误而中止编译（gcc 和 clang如果您通过`-pedantic-errors`标志，请执行此操作）。语言标准禁止在没有明确地将`const char *`that `&c`is 强制转换为 a的情况下进行分配`char*`，但只需要诊断，因此编译器可以自由地将其设为警告或错误。

如果您只使用指针从指向对象中读取，而它指向一个不可修改的对象，那是合法的使用，所以分配不是无条件禁止的（使用强制转换，它是允许的标准和甚至不会引起警告，因为演员表告诉编译器“我知道我在做什么”）。

所以是否`*p = 'x';`有效，只能由指向对象的属性来判断。如果指向的对象是不可修改的（或者`p`根本没有指向有效的对象），则行为是未定义的。未定义的行为如何表现自己是未定义的，但是在这种情况下，通常要么是分段错误（如果对象位于写保护的内存区域中），要么指向的对象将被修改，就好像它被允许一样（如果只有类型使对象不可修改，并且实现不采取额外措施来识别此类无效写入）。在字符串文字的情况下，由于历史原因 - type `char[N]`，它们通常存储在`.rodata`程序的（只读数据）部分，并且尝试写入该部分会被操作系统检测到并导致段错误。

> 2) 对于 p 如果我修改字符串文字，行为是未定义的，即有时它被修改，有时不被修改。再说为什么这样的设计。实际上，对于越界数组访问，这是可以理解的，因为您访问了以前未分配的内存，有时您无权访问那块内存，因此，分段错误。但是为什么有时我可以修改字符串文字。为什么这样。这背后的原因是什么。

实用主义。

定义语言的委员会不喜欢束缚实现者的手脚。程序员有义务避免未定义的行为，如果他不这样做，无论发生什么。

据我所知，从历史上看，有些实现将字符串文字存储在只读内存中，有些则没有。当语言被标准化时（在它创建将近 20 年后，行为有很多多样性），它主要是对现有常见做法的记录。由于编译器、库或硬件的差异，行为差异很大，因此未定义或实现定义，以允许在尽可能多的平台上实现一致的实现。因此，一些实现允许修改字符串文字，而另一些则不允许，委员会决定通过使行为未定义来将负担放在程序员身上。*

# c# - Quartz.Net 如何创建每天不增加 1 分钟的日程安排

> ID：12735750
> 
> 赞同：39
> 
> 时间：2012-10-04T20:53:42.617
> 
> 标签：c#, scheduling, intervals, quartz.net, quartz.net-2.0

我正在尝试在 Quartz.Net 中建立一个重复的每日计划，但有一些问题：

首先，我制定了一个每日计划，在 12:45 重复使用 Quartz.Net 代码，如下所示：

```
var trigger = TriggerBuilder.Create()
  .WithDailyTimeIntervalSchedule(s => 
      s.OnEveryDay().StartingDailyAt(new TimeOfDay(13, 00)))
.Build();

var times = TriggerUtils.ComputeFireTimes(trigger as IOperableTrigger, null, 10);

foreach (var time in times) Console.WriteLine(time); 
```

这是在新西兰 DST 执行的（所以 UTC+13:00）

我得到的输出很奇怪：

```
5/10/2012 1:00:00 p.m. +13:00
5/10/2012 12:01:00 a.m. +00:00
5/10/2012 12:02:00 a.m. +00:00
5/10/2012 12:03:00 a.m. +00:00
5/10/2012 12:04:00 a.m. +00:00
5/10/2012 12:05:00 a.m. +00:00
5/10/2012 12:06:00 a.m. +00:00
5/10/2012 12:07:00 a.m. +00:00
5/10/2012 12:08:00 a.m. +00:00
5/10/2012 12:09:00 a.m. +00:00 
```

第一个日期/时间使用本地时区显示，然后其余的使用 UTC 显示，并且每个时间值增加 1 分钟，并且日期永远不会改变。

我觉得我可能在每日时间间隔时间表中遗漏了一些基本的东西，但我只是不知道它是什么？

**编辑**

作为执行此操作的更新，我现在切换到使用基于 CRON 表达式的触发器：

```
TriggerBuilder.Create()
  .WithCronSchedule(string.Format("0 {0} {1} ? * *", 0, 13))
  .Build(); 
```

它给了我预期的结果：

```
5/10/2012 12:00:00 a.m. +00:00
6/10/2012 12:00:00 a.m. +00:00
7/10/2012 12:00:00 a.m. +00:00
8/10/2012 12:00:00 a.m. +00:00
9/10/2012 12:00:00 a.m. +00:00
10/10/2012 12:00:00 a.m. +00:00
11/10/2012 12:00:00 a.m. +00:00
12/10/2012 12:00:00 a.m. +00:00
13/10/2012 12:00:00 a.m. +00:00
14/10/2012 12:00:00 a.m. +00:00 
```

但我仍然想知道为什么 DailyTimeIntervale 时间表不起作用......

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-08T17:46:16.400

您没有指定默认为 1 分钟的间隔，因此它假定您希望每分钟运行一次作业。

尝试

```
 ITrigger trigger = TriggerBuilder.Create()
    .WithDailyTimeIntervalSchedule
      (s => 
         s.WithIntervalInHours(24)
        .OnEveryDay()
        .StartingDailyAt(TimeOfDay.HourAndMinuteOfDay(13, 0))
      )
    .Build(); 
```

默认应该是每天运行，所以 OnEveryDay() 并不是真正需要的。

不知道为什么您会看到本地和 UTC，因为我所有的时间都以 UTC 显示。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-14T09:28:10.380

虽然`WithIntervalInHours`可能会解决这个问题，并且类似 cron 的计划更加灵活，但我想分享另一个解决方案：`EndingDailyAfterCount(...)`

```
var trigger = TriggerBuilder.Create()
  .WithDailyTimeIntervalSchedule(s => s
      .OnEveryDay()
      .StartingDailyAt(TimeOfDay.HourAndMinuteOfDay(13, 00)))
      .EndingDailyAfterCount(1))
.Build(); 
```

# java - 避免将“null”作为数组元素返回 - 作业

> ID：12735754
> 
> 赞同：2
> 
> 时间：2012-10-04T20:53:56.313
> 
> 标签：java, arrays, methods

我正在编写一个程序，该程序将使用他们的姓名和 gpa 输入一组学生，并只返回失败的学生。我不确定如何返回一个避免`null`作为该数组元素返回的数组。即，如果初始数组中有 4 个学生，但只有 2 个学生失败，则我的数组返回：*student1, student2, null, null*。

```
Student Jim = new Student("Jim",1.4);
    Student Tom = new Student("Tom",3.0);
    Student John = new Student("John",4.0);
    Student Bill = new Student("Bill",1.2);
    Student[] group1 = {Jim,Tom,John,Bill};

public Student[] getFailing(Student[] students) {
    int i, j;
    Student[] failing = new Student[students.length];
    Student temp;
    for(i=0, j=0; i< students.length; i++){
            if(students[i].getGpa() < 2.0){
                temp = students[i];
                failing[j] = temp;
                j++;
            }

    }
    return failing;
} 
```

我在 main 中进行测试运行时的当前结果是：

```
name = Jim gpa = 1.4
name = Bill gpa = 1.2
null
null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:58:09.757

如果唯一的问题是*打印*空值，也就是说，如果您的数组有`null`值但您不想在输出中看到它们，那么您可以保留您的方法并更改您的打印代码，以便它检查`null`,并避免打印它们。

但是，如果您必须将`null`值保留在数组之外，则可以使用动态调整大小的数据结构，例如，并使用该方法`ArrayList`从中获取数组。[`toArray`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28%29)

不使用`ArrayList`，因为您正在使用变量跟踪有多少`Student`对象代表失败的学生，所以`j`在收集失败的学生对象后，您可以创建一个所需长度的新数组，然后使用循环仅用非空学生填充它, 或使用[`Arrays.copyOf`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28%29), 或[`System.arraycopy`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T20:57:25.163

我会建议你`ArrayList`为你的程序使用一个。这允许您拥有一个可变大小的数组。这样，您不必担心空输出。您只需将您想要的学生添加到其中，并且大小会发生变化以反映这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:56:12.657

您正在创建一个与传入的原始数组一样长的数组（它用 null 填充所有元素），但不一定填充所有插槽。在给定的示例中，Tom 和 John 没有失败，因此您的数组中有两个空 (null) 插槽。

我不确定您的编程水平，但您可能会考虑使用动态数组，如 java.util.ArrayList，并将每个失败的学生添加到列表中，然后返回 toArray() 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T20:57:06.843

使`failing`数组的大小与失败学生的数量相同。因此，我会使用两个几乎相同的循环。

所以...

```
studentsFailed = 0;
while(hasNextStudent()) {
    studentsFailed++;
}
arr = new array[studentsFailed]; 
```

只是一些伪代码。

# java - Java SWT 浏览器：等待动态页面完全加载

> ID：12735755
> 
> 赞同：2
> 
> 时间：2012-10-04T20:54:02.687
> 
> 标签：java, javascript, asp-classic, web, swt

我正在使用 SWT 浏览器类，但我遇到了问题。我正在尝试从使用 ASP 动态加载大部分数据的页面复制页面源。问题是浏览器事件侦听器的完成事件当然是在显示整个页面内容之前触发的。这是我的代码的一部分：

```
class GermaniaProgressListener implements ProgressListener {

  final Browser browser;
  Calendar calen;
  SimpleDateFormat dateFormat;
  static Integer counter;
  static Integer changeCounter;
  static Integer completeCounter;

  public GermaniaProgressListener(Browser browser, Calendar calen, SimpleDateFormat dateForm) {
    super();
    this.browser = browser;
    this.calen = calen;
    this.dateFormat = dateForm;
    counter = 1;
  }

  public void changed(ProgressEvent event) {

  }

  @Override
  public void completed(ProgressEvent arg0) {
    String pageContent = "";
    if(counter > 1) {
      try {
        pageContent = (String)browser.evaluate("return document.body.innerHTML");
        FileUtilities.writeFile(
            FilePaths.GERMANIA_HTML.getFilePath().replace(".", ((Integer)(counter-1)).toString() + "."),
            pageContent);
      } catch (IOException e) {
        e.printStackTrace();
        LoggingUtilities.logException(e);
        BrowserUtilities.closeBrowser(browser);
      }
    }
    if(counter < 8) {
      String strDate = dateFormat.format(calen.getTime());
      Boolean ret = browser.execute("this.controler.loadPage(0, '', 'd=" + strDate + "')");
      if(!ret) {
        LoggingUtilities.logString("Error getting germania pages");
        BrowserUtilities.closeBrowser(browser);
        return;
      }
      calen.add(Calendar.DATE, 1);
      counter++;
    } else {
      BrowserUtilities.closeBrowser(browser);
    }
  }
};

public class PageDowGermania {
  static public void getPageContent() {
    final Browser browser = BrowserUtilities.createBrowser();
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
    Calendar calen = Calendar.getInstance();
    calen.setTime(new Date());
    GermaniaProgressListener fpl = new GermaniaProgressListener(browser, calen, dateFormat);
    browser.addProgressListener(fpl);
    BrowserUtilities.startBrowser(browser, "http://www.germaniasport.hr");    
  }
} 
```

我不是动态网页方面的专家，所以如果有任何可能性，例如 JavaScript 中的脚本可以检查页面是否已完全加载，也许有人可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:56:46.033

```
window.onload = function () {
    alert("Everything loaded")
} 
```

`onload`等到所有资源都加载完毕并执行包含的代码，即启动警报。

但是请注意，这`onload`在某些情况下可能不起作用。如果我没记错的话，有时你使用浏览器的后退和前进按钮不起作用。

# c# - 与对象列表的接口 - 这可能吗？

> ID：12735756
> 
> 赞同：1
> 
> 时间：2012-10-04T20:54:06.907
> 
> 标签：c#, interface

是否可以定义一个接口，其中一个对象是另一个接口的列表？

我有两个 EF 对象：

=====

```
class ImageType1
{
    string Id
    string Name
    List<ImageType1Size> Sizes
}

class ImageType1Size
{
    string Id
    int Width
    int Height
}

class ImageType2
{
    string UserId
    string ImageId
    string Name
    List<ImageType2Size> Sizes
}

class ImageType2Size
{
    string UserId
    string ImageId
    int Width
    int Height
} 
```

=====

对于每个图像大小类，所有属性都是键（只是一个旁注）。

现在，我要做的是创建以下两个接口：

=====

```
interface IImage
{
    string Name
    List<ImageSize> Sizes
}

interface IImageSize
{
    int Width
    int Height
} 
```

=====

在我的项目中，我为 ImageType1、ImageType1Size、ImageType2 和 ImageType2Size 创建了部分，每个都使用各自的接口。

我在尝试将 ImageType1 和 ImageType2 中的 Sizes 属性转换为使用接口 IImageSize 时遇到错误。

=====

这可能吗？如果我不清楚，请告诉我，我会改写问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:17:06.343

您可能想在这里考虑泛型：

```
interface IImage<TSize> where TSize : IImageSize
{
    List<TSize> Sizes { get; }
}

class ImageType1 : IImage<ImageType1Size>
{
    List<ImageType1Size> Sizes { get; private set; }
} 
```

或者，这会起作用：

```
interface IImage
{
    IEnumerable<IImageSize> Sizes { get; }
}

class ImageType1
{
    public List<ImageType1Size> SizeList { get; private set; }

    public IEnumerable<IImageSize> Sizes { get { return SizeList; } }
} 
```

这取决于最适合您操作数据的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:30:25.703

不幸的是，这是无法做到的。在推理原因时，在界面之外考虑您的问题会很有帮助。

```
public void Example()
{
  List<ImageType1Size> Sizes1 = new List<ImageType1Size>();
  List<ImageType2Size> Sizes2 = new List<ImageType2Size>();
  List<IImageSize> Sizes;

  Sizes1 = Sizes; // These won't compile because the compiler can't guarantee that an
  Sizes2 = Sizes; // IImageSize is an ImageType1Size. It could be an ImageType2Size

  Sizes = Sizes1; // These will compile because the compiler knows that both 
  Sizes = Sizes2; // ImageType1Size and ImageType2Size are IImageSize's
} 
```

现在您可以将其与您的课程进行比较。

```
class ImageType1 : IImageType
{
  string Id {get; set;}
  string Name {get; set;}
  List<ImageType1Size> Sizes {get; set;} // This is just like Sizes1 = Sizes in the
                                         // example above.
}

public void Test(IImageSize imageSize)
{
  IImageType imageType = new ImageType1();

  imageType.Add(imageSize) // This would compile, as IImageType.Sizes will 
                           // take any IImageSize

  // But what really happens behind the interface is this:
  ((ImageType1)imageType)Sizes.Add(imageSize);    

  // Trying to insert an IImageSize into the collection
  // doesn't work, because the compiler can't guarantee that 
  // it's an ImageType1Size
} 
```

注意：我假设您的示例显示

```
interface IImage
{
  string Name
  List<ImageSize> Sizes
} 
```

实际上应该是

```
interface IImage
{
  string Name
  List<IImageSize> Sizes
} 
```

正如您在其他地方没有提到“ImageSize”类型一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:26:59.900

为了构建 default.kramer 所说的，如果您`IImage`在其他地方明确需要作为类型，您可以像这样拆分接口：

```
interface IImage
{
  string Name
}
interface IImage<TSize> : IImage where TSize : IImageSize
{
    List<TSize> Sizes { get; }
}

class ImageType1 : IImage<ImageType1Size>
{
    List<ImageType1Size> Sizes { get; private set; }
} 
```

如果不这样做，你永远不会有一个裸露`IImage`而不指定它的`TSize`. 当然，如果您需要能够访问`Sizes`non-generic 的属性`IImage`，您将需要添加这样的扩展方法：

```
static class IImageHelper
{
  static List<IImageSize> GetSizes<TSize>(this IImage<TSize> image) where TSize: IImageSize
  {
    return image.Sizes.OfType<IImageSize>();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:09:58.467

由于 ImageType1 类的签名强制 ImageType1.Sizes 仅包含 ImageType1Size 对象，因此不允许在 ImageType1.Sizes 内存储 IImageSize，因为这将允许将非 ImageType1Size 对象（例如 ImageType2Size）添加到列表中。

这意味着您不能将任何旧的 IImageSize 存储在 ImageType1.Sizes 中，这可能是您想要的。

但是，您仍然可以在执行其他操作时使用 ImageSize1 和 ImageSize2 对象，就好像它们是 IImageSizes 一样，例如

```
void Test()
{
    ImageType2 image = new ImageType2();
...
    foreach(var size in image.Sizes)
    {
        if(IsTooBig(size))
        {
            MessageBox.Show("I'm too big!")l
        }
    }
}

bool IsTooBig(IImageSize imagesize)
{
    return imagesize.Width > 500;
} 
```

现在您可以在 ImageType1Size 和 ImageType2Size 对象上使用 IsTooBig。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T21:13:09.510

之前有一个关于将 List 转换为 List 的完整讨论。

你可以在这里阅读它，但它的要点是你不能在 C# 中做到这一点。

[C# - 无法将类型 List<Product> 隐式转换为 List<IProduct>](https://stackoverflow.com/questions/2640738/c-sharp-cannot-implicitly-convert-type-listproduct-to-listiproduct)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T21:16:56.013

`foreach (IImageSize iSize in list) { int iWid = iSize.Width; }`

# asp.net - MVC 4 数据注释“显示”属性

> ID：12735757
> 
> 赞同：49
> 
> 时间：2012-10-04T20:54:15.557
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我从 MVC 4（Razor 视图引擎）开始。（我相信这可能也适用于 MVC 3 及更早版本。）我想知道在视图中使用 DisplayAttribute 数据注释是否有任何好处，而不是直接在 HTML 中编写字符串。例如，如果我有以下模型：

```
public class Thing
{
    public string WildAndCrazyProperty { get; set; }
} 
```

...将属性注释为：

```
 [Display(Name = "Wild and Crazy")]
    public string WildAndCrazyProperty { get; set; } 
```

...并让我的标记为：

```
<html>
    <body>
        <div>@Html.DisplayNameFor(modelItem => modelItem.WildAndCrazyProperty)</div>
        <div>@Html.DisplayFor(modelItem => modelItem.WildAndCrazyProperty)</div>
    </body>
</html> 
```

...而不是没有注释，并且做：

```
<html>
    <body>
        <div>Wild and Crazy</div>
        <div>@Html.DisplayFor(modelItem => modelItem.WildAndCrazyProperty)</div>
    </body>
</html> 
```

在这种情况下我没有提到的原因`Html.LabelFor`是因为属性的数据在页面上显示为静态（即不可编辑）文本。此页面上的数据将永远不可编辑，因此我无需`Html.TextBoxFor`在第二个 <div> 中使用并随后使用 将`Html.LabelFor`标签与该文本框正确关联。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-04T21:00:24.810

如果两个不同的视图共享同一个模型（例如，一个用于移动输出，一个是常规视图），最好将字符串放在一个位置：作为 ViewModel 上的元数据。

此外，如果您有一个需要不同显示的模型的继承版本，它可能会很有用。例如：

```
public class BaseViewModel
{
    [Display(Name = "Basic Name")]
    public virtual string Name { get; set; }
}

public class OtherViewModel : BaseViewModel
{
    [Display(Name = "Customized Inherited Name")]
    public override string Name { get; set; }
} 
```

我承认这个例子很做作......

这些是支持使用我能想到的属性的最佳论据。我个人的看法是，在大多数情况下，这类事情最好留给标记。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-04T21:05:56.610

除了其他答案之外，`DisplayAttribute`在您想要本地化字段时使用还有一个很大的好处。您可以使用 DisplayAttribute 在本地化数据库中查找名称，它将使用您希望的任何翻译。

此外，您可以让 MVC 为您生成模板，`Html.EditorForModel()`它会为您生成正确的标签。

最终，这取决于你。但是 MVC 非常“以模型为中心”，这就是为什么将数据属性应用于模型的原因，以便元数据存在于一个地方。这不像是你必须做的大量额外打字。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-04T21:01:07.907

好处之一是您可以在多个视图中使用它并拥有一致的标签文本。asp.net MVC 脚手架也使用它来生成标签文本，并使其更容易生成有意义的文本

```
[Display(Name = "Wild and Crazy")]
public string WildAndCrazyProperty { get; set; } 
```

无论您在应用程序中使用该属性的任何位置，“狂野与疯狂”都会始终如一地出现。

有时这并不灵活，因为您可能希望更改某些视图中的文本。在这种情况下，您将不得不像在第二个示例中那样使用自定义标记

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-19T20:48:49.923

还有国际化。

前段时间我用这个愚弄了。在我的模型中这样做：

```
[Display(Name = "XXX", ResourceType = typeof(Labels))] 
```

我对所有资源都有一个单独的类库，所以我有 Labels.resx、Labels.culture.resx 等。

在那里我有 key = XXX, value = “在那种文化中有意义的字符串”。

# javascript - JavaScript obj.onevent=callback vs obj.addEventListener(event,callback)

> ID：12735758
> 
> 赞同：3
> 
> 时间：2012-10-04T20:54:16.430
> 
> 标签：javascript, jquery, events, dom-events, v8

有没有人认为这两种方法之间有任何区别，或者是否有一种更好。

说我们有，

```
var x = new Worker('math.js'); 
```

1.  绑定事件处理程序的一种方法

    x.onmessage = function(ev){ //.... };

2.  另一种方法：

    x.addEventListener('消息',function(){});

我知道一个区别是，如果我们有多个事件监听器，addEventListener 会很有用。但除此之外还有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:25:07.417

这样做的另一个原因是您也可以删除事件处理程序。如果 eventHandler 函数不是匿名的（就像您的两个示例一样），那么您可以稍后按名称将其删除。

见这里：http: [//jsfiddle.net/Cs3vL/](http://jsfiddle.net/Cs3vL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T19:42:57.060

另一件事：使用“true”和“false”参数，您可以在捕获或冒泡阶段附加到事件。使用 .onmessage，您没有这个选择。

# c# - 如何在多国/语言应用程序中处理时区和日期

> ID：12735759
> 
> 赞同：1
> 
> 时间：2012-10-04T20:54:17.083
> 
> 标签：c#, sql, datetime, utc, cultureinfo

我目前正在开发带有后端 sql 服务器数据库的 ac# web 应用程序。我有一些关于日期的问题需要解决。

该应用程序在 GMT 时间托管在 Web 和数据库服务器上。用户分布在 3 个不同的时区 CEST、MSK、ALMT，随着时间的推移，该网站可能会推广到其他国家/地区。

在目前的代码中，我在 SQL 中使用 DateTime.Now 和 GETDATE()，并且使用服务器的位置，这是 GMT。

我的问题是当考虑到不同的文化等时，日期戳应该以什么形式存储在数据库中。它应该是UTC日期吗？以下情况应如何处理？有标准做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:58:55.653

一切都应该在 UTC（不是服务器的时区；UTC）中创建并在显示之前转移到用户的时区。

要获取 UTC 时间，`DateTime.UtcNow`请在 Web 服务器和`GETUTCDATE()`数据库上使用。

要将`DateTime`指定 UTC 时间的值转换为任何其他时区：

```
var dt = DateTime.UtcNow;
var tz = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
var localTimeInNewYork = TimeZoneInfo.ConvertTimeFromUtc(dt, tz); 
```

另请参阅MSDN 上的[在时区之间转换时间。](http://msdn.microsoft.com/en-us/library/bb397769.aspx)

# php - Codeigniter/PHP：我应该创建图像加载器还是直接访问图像？

> ID：12735762
> 
> 赞同：0
> 
> 时间：2012-10-04T20:54:28.143
> 
> 标签：php, image, codeigniter

我正在做一个项目，我通过 API 从另一个站点获取图像，并将图像本地保存在我的服务器上。我一直在想，我无法决定是应该创建一个显示图像的加载器，还是直接访问特定的图像？如果我直接访问它们，是否有任何安全问题？在将图像保存在服务器上之前，我会验证内容并检查它是否为有效图像，因此我将始终显示有效图像。

图像加载器会像这样工作。我创建了一个控制器（例如，将其称为“加载”）。然后我可以用图像作为参数调用加载，有点像这样：

```
http://example.com/load/file_name.jpg 
```

然后我通过负载控制器获取图像并显示它。这样做有什么好处还是可以直接访问图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:16:53.907

所描述的图像加载器有一个明显的缺点，即对于显示的每个图像，必须实例化框架。一个更好的选择是图像助手，它可用于对图像执行任何所需的修改（水印、调整大小、缓存）并输出图像 url，这样图像就可以由网络服务器交付，而无需额外调用框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:18:34.313

如果它们是通过 PHP 发送的，它不会使您的图像更好。数据是一样的，如果不需要限制对指定用户组的访问（又名公共访问），那么我会选择直接访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T23:04:59.417

我会给你一个用例，说明为什么有人（在这种情况下是我）会通过 PHP 提供图像：

在我的一个应用程序中，用户可以上传头像图像。这些图像在上传时进行处理，名称更改为哈希值，并存储在文件系统中。散列名称存储在数据库中的一个表中，该表关联照片的散列、用户 ID，并指示这是否是他们选择的个人资料照片。

如果我只在网站上使用单个图像大小，我会只存储图像路径以及它是否是他们的个人资料图像并且已经完成。但是，该站点有多个可以显示图像的位置，并且它们的大小各不相同。根据请求的图像大小，我检查是否生成了接近它的大小。如果有，那么我发送一个 jpeg 标头，用于`readfile`图像位置并提供图像。如果还没有，那么我获取最初上传的图像，将其调整为我需要的大小，将其存储在文件系统中，然后提供它。

这样，我不会在每次有人上传图片时创建 5 张以上的图片。图像是按需生成的，既分配了 CPU 时间，又减少了文件系统的使用，因为某些图像大小可能永远不会被请求。

因此，基本上，如果这些适用于您，您就不需要通过 PHP/CI 提供服务：

*   不限制访问
*   不需要动态调整大小
*   不将图像存储在 webroot 之外

如果您好奇，对我的一张图片的请求如下所示：

`http://domain.com/photos/view/3d643a9cecaf8ae849be7ab094579698/s-128/photo.jpg`

分解：

`http://domain.com/[controller/view]/[image hash]/[square, rectangular, or original]-[size in px]/photo.jpg`

这将提供具有以下路径的图像：

`http://domain.com/images/uploads/3d/64/3a9cecaf8ae849be7ab094579698/3d643a9cecaf8ae849be7ab094579698_s_128.jpg`

我将图像存储在子目录中，以便*发生*冲突，从而避免由于每个目录的最大文件数等导致的文件系统限制。我还可以将图像移到 webroot 之外，这样它们就无法在物理上被 Web 访问。通过 PHP 提供服务还有一个额外的好处，那就是不暴露上传目录的位置。

我知道答案是冗长的，但我希望它可以帮助你做出决定。

# php - 在 MySQL date_format 中更改月份名称？

> ID：12735764
> 
> 赞同：0
> 
> 时间：2012-10-04T20:54:56.617
> 
> 标签：php, mysql

进行 SQL 查询后， 如何将月份名称从 like `October`(English) 更改为(Danish)。`Oktober`

询问：
`SELECT id, name, date_format(timestamp, '%M %e, %Y %l:%i %p') real_timestamp FROM comments WHERE active='yes'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:57:46.933

简单地使用`str_replace`函数

```
$result = str_replace("October", "Oktober", $result); 
```

见[str_replace](http://php.net/manual/en/function.str-replace.php)

# php - Silex + Ajax + 搜索引擎优化

> ID：12735768
> 
> 赞同：1
> 
> 时间：2012-10-04T20:55:16.413
> 
> 标签：php, ajax, seo, silex

如果您想使用 Silex 实现对 SEO 友好的单页 ajax 网站，最好的方法是什么？

我想使用路由（没有硬编码的 url）并支持带有 hashbangs 或 HTML5 pushState 的后退按钮（浏览器历史记录）。

我想它可以通过结合[JavascriptRoutingServiceProvider](https://github.com/RafalFilipek/JavascriptRoutingServiceProvider)和[pathjs](https://github.com/mtrpcic/pathjs)或类似的东西来完成。但我想有人已经解决了这个问题，所以我很想听听你的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:42:08.910

我将专注于 SEO 友好的部分。

如果您和您的网站访问者对此没有任何问题，您可以在您的网站中使用尽可能多的“花哨的东西”。

**但请记住，您添加的“花哨的东西”越多，谷歌和其他搜索引擎就会越多地将您推离他们自己。**

请记住，没有确定的拍摄方式。我会告诉你你应该怎么做。

1.  注册[“Google Webmasters Tools”](http://www.google.com/webmasters/)并使用它，特别是“Fetch as googlebot”，它会告诉您在阅读（抓取）您的网站时出现的问题和错误。

2.  在开发网站时，使用 Firefox 插件[“用户代理切换器”](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/?src=search)它会告诉你当谷歌看到你的页面时你的页面是什么样子。

3.  在关闭 js 和 css 的情况下测试您的页面，这就是 google 和其他搜索引擎如何查看您的页面。

如果使用这些方法，您会发现问题和错误，并且发现谷歌在阅读您的网页和网站时遇到了困难，而不是警告您从您的网站中删除一些“花哨的东西”。

还有很多与 SEO 相关的其他事情，但上面的内容将帮助您入门并让您走上正确的轨道，使您的网站对搜索引擎来说可读、可抓取、可索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:56:01.143

这是我修复它的方法。

如果启用了 javascript，我将阻止主菜单链接默认行为并[改为发送 ajax 请求](https://github.com/umpirsky/Silex-Kitchen-Edition/blob/1df5acccd6e3305c2354e1d81d8c90e98f3f18a1/resources/assets/js/script.js)。请求完成后，我将浏览器历史记录保存在`window.history.pushState()`.

我使[布局](https://github.com/umpirsky/Silex-Kitchen-Edition/blob/1df5acccd6e3305c2354e1d81d8c90e98f3f18a1/views/layout.html.twig)有条件。如果是整页刷新（禁用机器人或 javascript）或主要内容（如果是 ajax 请求），我将加载带有页眉和页脚的内容。

这样，无论是否启用 javascript，我都有一致的行为，但使用 ajax 代替整页刷新。最重要的是我保留了 Silex 路由。

欢迎反馈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:52:26.320

我完全同意上面的 Metadice。放置在网站上的物品应该非常实用，因为有很多噱头可以帮助这个和那个以及 SEO 产品。有时我们会认为自己太聪明了，好像为 Google 这样的公司工作的人不如我们聪明！对对！

我遵循基本裁决。我必须有一个优先事项，那就是在我的网站上拥有最新的相关内容以及大量内容。满足搜索者的需求。其他一切都是次要的。换句话说，1 页的内容和 10 个插件根本不会削减它……</p>

我有一整篇文章基于这样一个事实，即谷歌几乎不关心帮助你炫耀你的穿着和眼泪......他们想做的就是将最固定的点和相关内容与搜索词结合起来......句号。

要查看更详细的文章，请随时访问我的文章帖子：

[http://howtobecomeamillionaires.org/index.php/seo-website/](http://howtobecomeamillionaires.org/index.php/seo-website/)

# linux - (Linux) 文件如何传递到应用程序中？

> ID：12735769
> 
> 赞同：0
> 
> 时间：2012-10-04T20:55:15.970
> 
> 标签：linux, file

我只是想知道当用户双击文件时如何在应用程序中打开文件。

我知道它作为参数过去了，但是当它通过时我将如何告诉我的应用程序“加载此文件”？

我只是想看看它是如何工作的。

谢谢你的时间。

内森。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:26:41.767

有时它作为一个简单的 $1 变量传递。举个例子，打开您的终端并使用以下命令启动 Firefox：

```
firefox http://stackoverflow.com 
```

因此，如果您将超链接保存到桌面并单击链接，它可能只是将其附加为变量。但是，并非所有应用程序都如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:47:24.450

就像在 Windows 中一样，这完全取决于应用程序。要按照您的描述单击文件工作，必须告知桌面环境文件和应用程序之间的关联。还必须告诉它使用什么命令行来调用应用程序。

在 Linux 上，大多数 GUI 桌面环境从咨询 MIME 类型配置信息开始：[​​http://en.wikipedia.org/wiki/MIME](http://en.wikipedia.org/wiki/MIME)

# apache - 将本地请求重定向到另一个文件

> ID：12735770
> 
> 赞同：0
> 
> 时间：2012-10-04T20:55:17.217
> 
> 标签：apache, .htaccess, redirect

我正在尝试将一个文件重定向到另一个文件，但我对 htaccess 的理解不足以使其正常工作。

基本上，例如，如果有人访问`mysite.com/i/somefile.png`我需要它重定向到`mysite.com/view.php?i=somefile`（没有 .png 扩展名）

我也在尝试设置它，以便此过程仅发生本地请求，因此如果图像嵌入在另一个站点上，它将不会被重定向。

如果有人可以为此提供代码，并对其进行一些解释，以便我对将来的使用有更好的理解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:07:05.517

尝试将这些规则添加到**文档根目录**中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} mysite.com [NC]
RewriteCond %{HTTP_REFERER} !/view\.php
RewriteRule ^/?i/(.+)\.png$ /view.php?i=$1 [L] 
```

请注意，这将使通过`<img src=`标签嵌入的图像也将在内部被重写。

* * *

> 问题是（就像你说的那样），该页面的图像嵌入现在不起作用。有没有办法让嵌入工作？

您可以通过修改前缀并重写它们来尝试使`<a>`链接与链接不同：`<img>`

例如：

```
<a href="/a/something.png">
   <img src="/i/something.png">
</a> 
```

然后：

```
RewriteEngine On
RewriteRule ^/?a/(.+)\.png$ /view.php?i=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:25:30.160

用以下方法解决了它：

```
RewriteCond %{HTTP_HOST} mysite\.com [NC]
RewriteCond %{HTTP_REFERER} !/view\.php
RewriteRule ^/?i/(.+)\.png$ http://mysite\.com/view.php?i=$1 [L] 
```

并且从直接链接访问图像会重定向到 view.php，并且嵌入仍然有效。

感谢林乔恩的帮助

# php - 在 5.3 之前工作的替代 PHP 代码

> ID：12735772
> 
> 赞同：1
> 
> 时间：2012-10-04T20:55:25.080
> 
> 标签：php, arrays

我在另一个问题中得到了以下代码的回答：

```
$user_id_ary = array_filter($user_id_ary, function($var) use ($is_anonymous_ary) {
  return !(isset($is_anonymous_ary[$var]) && $is_anonymous_ary[$var] === true);
}); 
```

它在我运行在 PHP 5.3 上的本地主机上运行得非常好，这意味着它支持闭包（又名匿名函数），但它不适用于运行在 PHP 5.2 上的在线主机。

在 PHP 5.3 之前是否有该代码的替代版本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:00:28.463

您需要创建一个真正的函数来检查，并将其名称传递给`array_filter`.

```
function filter_user_id_ary($var) {
    global $is_anonymous_ary;
    return !(isset($is_anonymous_ary[$var]) && $is_anonymous_ary[$var] === 1);
}

$user_id_ary = array_filter($user_id_ary, 'filter_user_id_ary'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:00:40.253

```
$new_array = array();
foreach($user_id_ary as $var){
    if(!(isset($is_anonymous_ary[$var]) && $is_anonymous_ary[$var] === 1))    
        $new_array[$var] = $user_id_ary[$var];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:46:48.607

您的原始任务有一个更简单的解决方案（更简单的意思是不涉及回调函数）：

```
$user_id_ary = array_diff($user_id_ary, array_keys(array_filter($is_anonymous_ary))); 
```

# events - 在 Register-ObjectEvent 操作中修改 $eventargs

> ID：12735777
> 
> 赞同：3
> 
> 时间：2012-10-04T20:55:49.150
> 
> 标签：events, powershell, event-handling, odata

在我的 PowerShell 脚本中，我试图在我的 ODataServices 客户端请求中插入一个请求标头。我正在使用 Register-ObjectEvent 来做到这一点。这是一种在 .NET 中运行良好但由于某种原因在 PowerShell 中无法运行的技术我怀疑 PS 提供了对 $EventArgs 的不同访问权限

```
$proxy = New-ODataServiceProxy "http://localhost.:50055/Service/"

$addAuthenticationHeader =
{   
    $EventArgs.RequestHeaders.Add("X-Authorization", "Y2xhcmsua2VudEBzdXBlci5jb206c3VwZXJtYW46bWFpbg==")
}
Register-ObjectEvent -InputObject $proxy -EventName "SendingRequest" -Action $addAuthenticationHeader

$topic = New-Object -TypeName "MyServer.Entities.Topic"
$topic.Name = "hola from PS"
$topic.About = "about"

$proxy.AddObject("Topics", $topic)
$proxy.SaveChanges() 
```

当请求在 SaveData 上发出时，其中没有添加的标头。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T21:17:05.263

`$EventArgs`我修改的属性似乎没有效果，我遇到了同样的问题。我对细节不是很清楚，但是当你使用它的`-Action`参数时，`Register-ObjectEvent`它会创建一个[`PSEventJob`](http://msdn.microsoft.com/library/system.management.automation.pseventjob.aspx)来运行你的事件处理程序/ `ScriptBlock`。由于`$addAuthenticationHeader`在 a 中运行`Job`，我怀疑`EventArgs`传递给它的对象与引发事件的对象不同，因此源对象永远不会看到您所做的更改。

作为一种解决方法，我使用[`Add-Type`cmdlet](http://technet.microsoft.com/library/hh849914.aspx)来定义一个 C# 类来执行事件处理。我不熟悉您使用的 API，但它看起来像这样：

```
Add-Type -TypeDefinition @"
using System;
using ProxyNamespace;

namespace StackOverflow
{
    public static class ProxyHelper
    {
        public static void RegisterSendingRequest(ProxyType proxy)
        {
            proxy.SendingRequest += Proxy_SendingRequest;
        }

        private static void Proxy_SendingRequest(object sender, ProxyEventArgs e)
        {
            e.RequestHeaders.Add(
                "X-Authorization",
                "Y2xhcmsua2VudEBzdXBlci5jb206c3VwZXJtYW46bWFpbg=="
            );
        }
    }
}
"@ -ReferencedAssemblies $ProxyAssemblyPath; 
```

您需要用适当的值替换`ProxyNamespace`、`ProxyType`、`ProxyEventArgs`和`$ProxyAssemblyPath`，然后只需替换它...

```
$addAuthenticationHeader =
{   
    $EventArgs.RequestHeaders.Add("X-Authorization", "Y2xhcmsua2VudEBzdXBlci5jb206c3VwZXJtYW46bWFpbg==")
}
Register-ObjectEvent -InputObject $proxy -EventName "SendingRequest" -Action $addAuthenticationHeader 
```

...有了这个...

```
[StackOverflow.ProxyHelper]::RegisterSendingRequest($proxy); 
```

# javascript - for..in 和 hasOwnProperty

> ID：12735778
> 
> 赞同：76
> 
> 时间：2012-10-04T20:55:56.257
> 
> 标签：javascript

> **可能重复：**
> [如何检查对象是否在 JavaScript 中具有特定属性？](https://stackoverflow.com/questions/135448/how-do-i-check-if-an-object-has-a-specific-property-in-javascript)

我在 Twitter 的 JavaScript 文件中找到了以下代码段。为什么他们需要调用`hasOwnProperty`函数才能看到`dict`属性`key`？*for*循环针对 'dict' 中的每个 'key' 运行，这意味着 'dict' 具有 'key'。我错过了一点吗？

```
function forEach(dict, f) {
    for (key in dict) {
        if (dict.hasOwnProperty(key))
            f(key, dict[key]);
    }
} 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-04T20:57:34.273

因为如果您不这样做，它将遍历原型链上的每个属性，包括您不知道的属性（可能是由弄乱本机对象原型的人添加的）。

这样，您只能保证该对象实例本身上的键。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-10-04T21:09:08.360

**[hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)**方法让您知道属性是直接在对象的实例上还是从其原型链继承。

考虑以下

```
function ObjWithProto() {
    this.foo = 'foo_val';
}

ObjWithProto.prototype = {bar: 'bar_val'};

var dict = new ObjWithProto();
dict.foobar = 'foobar_val'; 
```

即，您有一个具有属性的*对象* ，并且它还从其原型链继承了一个属性。`dict``foo``foobar``bar`

现在通过您的代码（的修改版本）运行它：

```
function forEach(dict) {
    var key;
    for (key in dict) {
        if (dict.hasOwnProperty(key)) 
            console.log('has', key, dict[key]);
        else 
            console.log('not', key, dict[key]);
    }
}
forEach(dict); 
```

你会看见

```
has foo foo_val
has foobar foobar_val
not bar bar_val 
```

这使您可以将对象本身的属性和它继承的属性（通常是与循环无关的方法）分开。

此外，如果您现在这样做`dict.bar = 'new_bar_val';`，最后的结果将变为`has bar new_bar_val`，让您甚至可以区分与继承的同名的属性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-04T20:59:19.413

JavaScript 中的每个对象都是一个字典。这意味着“toString”和其他所有方法都是每个对象的键：

```
var myObj = {};
console.log(myObj["toString"]); 
```

但是这个函数是继承自 Object 类的，所以 hasOwnProperty 会告诉你这个键是由字典拥有还是被继承。

```
"toString" in myObj; // true
myObj.hasOwnProperty("toString") // false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T21:02:19.413

[笨蛋就](https://stackoverflow.com/questions/12735778/for-in-and-hasownproperty/12735807#12735807)在这里。例如，Prototype.js 框架用于使用额外的辅助方法扩展原生数组（我不知道当前框架版本的情况）。

因此，直接使用“for (key in dict)”将返回 div 的所有元素以及对辅助方法的引用。这有点出乎意料:)

# ruby - 瘦错误信息

> ID：12735780
> 
> 赞同：1
> 
> 时间：2012-10-04T20:56:01.007
> 
> 标签：ruby, sinatra, thin

当我运行 `ruby filename.rb`时，瘦网络服务器启动，但是当我尝试在 localhost:4567 上查看（Sinatra）应用程序时，我收到此错误消息。谷歌搜索它什么也没发现。有谁知道我可以做些什么来克服这个问题？

```
gems/eventmachine-0.12.10/lib/em/connection.rb:39:in `block in new': undefined method `associate_callback_target' for #<Thin::Connection:0x00000100fc7500> (NoMethodError)
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/em/connection.rb:36:in `instance_eval'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/em/connection.rb:36:in `new'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/eventmachine.rb:1430:in `event_callback'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:815:in `block in eventable_read'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:812:in `times'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:812:in `eventable_read'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:369:in `block in crank_selectables'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:369:in `each'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:369:in `crank_selectables'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:324:in `block in run'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:318:in `loop'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:318:in `run'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/pr_eventmachine.rb:64:in `run_machine'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'
    from /Users/mm/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run'
    from /Users/mm/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/sinatra-1.3.3/lib/sinatra/base.rb:1350:in `run!'
    from /Users/mm/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/gems/sinatra-1.3.3/lib/sinatra/main.rb:25:in `block in <module:Sinatra>' 
```

该代码来自一本书 Cloning Internet Applications in Ruby。它的每个演示应用程序都在发生这种情况......

**路线代码**

```
get '/' do haml :index end

post '/' do
  uri = URI::parse(params[:original])
  custom = params[:custom].empty? ? nil : params[:custom]
  raise "Invalid URL" unless uri.kind_of? URI::HTTP or uri.kind_of? URI::HTTPS
  @link = Link.shorten(params[:original], custom) 
  haml :index
end

['/info/:short_url', '/info/:short_url/:num_of_days', '/info/:short_url/:num_of_days/:map'].each do |path|
  get path do
    @link = Link.first(:identifier => params[:short_url])
    raise 'This link is not defined yet' unless @link
    @num_of_days = (params[:num_of_days] || 15).to_i
    @count_days_bar = Visit.count_days_bar(params[:short_url], @num_of_days)
    chart = Visit.count_country_chart(params[:short_url], params[:map] || 'world')
    @count_country_map = chart[:map]
    @count_country_bar = chart[:bar]
    haml :info
  end
end

get '/:short_url' do 
  link = Link.first(:identifier => params[:short_url])
  link.visits << Visit.create(:ip => get_remote_ip(env))
  link.save
  redirect link.url.original, 301
end

error do haml :index end

def get_remote_ip(env)
  if addr = env['HTTP_X_FORWARDED_FOR']
    addr.split(',').first.strip
  else
    env['REMOTE_ADDR']
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:15:31.357

我是*Cloning Internet Applications with Ruby*一书的作者。我尝试在 GitHub 存储库中运行代码，并且除非进行一些更改（由于 Sinatra 中的更改），否则我可以成功运行它。也许您可以尝试 Prakash Murthy 给出的答案，以升级到 EventMachine 1.0.0，但我正在运行与您相同的版本（0.12.10），这不会给我带来任何问题。

如果您直接给我发电子邮件，我们可以解决这个问题（稍后更新 Stack Overflow）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T16:04:39.667

我在使用 Ruby 1.9.2 时遇到了这个问题。Eventmachine 的两个版本（0.12.10 和 1.0.x）都提出了这个问题。根据链接的 Github 问题中的提示，我切换到 Ruby 2.1.1 并重新捆绑；安装了 Eventmachine 1.0.3 并且问题消失了。

（这整件事对我来说涉及很多剃须，包括将我的 Mac 更新到 Mavericks，吹走许多过时的库，以及重新安装 Xcode 和 Homebrew - 希望对其他人来说更简单。）

# javascript - 将 xml 加载到 div 时的 AJAX 竞争条件

> ID：12735783
> 
> 赞同：1
> 
> 时间：2012-10-04T20:56:13.780
> 
> 标签：javascript, jquery, xml-parsing

我正在创建的网站包含在多个页面上使用的信息。我设置它的方式是将信息存储在 xml 文件中。然后我使用 AJAX 加载 xml 文件，成功后我调用一个解析方法来附加 th。

似乎发生了竞争情况。页面在 xml 文件完成解析之前完成加载。如果我在解析方法中添加一个警报，那么它工作正常（这就是为什么我认为它是一个竞争条件）。

```
function loadXML(link) {

$('#div1').load(link);
loadImage(link);

if (link == "news.html") {
    $.ajax({
        type: "GET",
        url: "news.xml",
        dataType: "xml",
        success: newsParser
     });
  }
} 
```

当我在网上搜索时，我看到了可能使用信号量或超时的事情。这些似乎都不适合我。

如果 html 页面未在 xml 之前加载，则没有 div 可添加信息。当您转到该页面并存储数据时，我还尝试加载不同的 xml 文件，以便在您每次转到特定页面时都不会对其进行解析，但我没有成功弄清楚这一点。

我感谢提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:01:39.120

您可以使用 jQuery（您已经在使用）等待 DOM 加载： `$().ready()`- [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

```
$(document).ready(function(){ 
  $('#div1').load(link); 
  loadImage(link); 
  //etc..
} 
```

# plone - archetypes.referencebrowser 小部件：新添加的元素不能与现有元素排序

> ID：12735785
> 
> 赞同：3
> 
> 时间：2012-10-04T20:56:21.497
> 
> 标签：plone, archetypes

我们有一个奇怪的行为，我想知道这是设计使然还是错误？

在小部件上激活“allow_sorting=1”时，如果您编辑内容，在小部件中添加一些元素（相关项目），这些元素可以正确排序。然后保存并再次编辑，添加一个或多个新元素，然后这些新元素不能与已经添加的元素排序。但是如果你添加几个新元素，这些元素之间是可排序的，但不是已经添加的元素，有“2”个元素列表。在保存然后编辑时，每个元素都可以正确排序。这是一个错误还是设计使然？我认为这是一个错误，我想纠正它，但我想确定并最终有人来测试这种行为是否也发生在他身上。

在此处配置像“multiRef”字段这样的小部件：[https](https://github.com/gbastien/archetypes.referencebrowserwidget/blob/master/src/archetypes/referencebrowserwidget/demo.py) ://github.com/gbastien/archetypes.referencebrowserwidget/blob/master/src/archetypes/referencebrowserwidget/demo.py将显示错误（我对论文提出了拉取请求对 demo.py 的更改）。

# bash - 用 sed 简单查找和替换

> ID：12735788
> 
> 赞同：10
> 
> 时间：2012-10-04T20:56:27.880
> 
> 标签：bash

我正在尝试替换文本文件中几个不同字符串中的数字。基本上它会采取以下形式

```
tableNameNUMBER
carNUMBER 
```

我对 bash 和脚本很陌生，我不知道如何`NUMBER`用我传入的内容替换。所以我试过这个：

```
#! /usr/bin/env bash
sed "s/NUMBER/$1/" myScript.txt > test.txt 
```

然后在命令行：

```
sh test.sh 123456 
```

这只适用`NUMBER`于它本身，没有它`tableName`或在它`car`之前。`NUMBER`在这些情况下我该如何更换。是不是更好`${NUMBER}`？对不起，如果这些完全是菜鸟问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T21:48:34.813

这应该可以正常工作：

```
sed "s/NUMBER/$1/g" myScript.txt > test.txt 
```

如果`g`它在一行上出现多次，则最后允许设置替换 NUMBER。

事实上，一个快速的测试：

### foo.txt

```
carNUMBER
tableNameNUMBER
NUMBER
NUMBERfoo

$ NUMBER=3.14
$ sed "s/NUMBER/$NUMBER/g" foo.txt
car3.14
tableNumber3.14
3.14
3.14foo 
```

这不是你的`sed`命令在做什么吗？

如果您想确保**不会**更改 NUMBER，除非它是单独的，请使用`\b`around `NUMBER`：

```
$ sed "s/\bNUMBER\b/$NUMBER/g" foo.txt
carNumber
tabelNumberNUMBER
3.14
NUMBERfoo 
```

如果您不关心 string 的大小写`NUMBER`，`i`请在 sed 命令的末尾添加一个：

```
$ sed "s/NUMBER/$NUMBER/gi" foo.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T01:13:43.317

Since you've stated you're new to this, I'm going to first answer some problems that you haven't asked.

**Your *shebang* is wrong**

The first bytes of your script should be `#!` (a hash and an exclamation mark; referred to as a *shebang*). You have `#1` (hash-one), which is gibberish. This shebang line tells the system to use `bash` to interpret your file (i.e. your script) when executed. (More or less. Technically speaking, it's actually given to `env`, which finds `bash` before handing it over.)

Once you've fixed up the shebang, set the permissions on the script to let the system know it's executable:

```
$ chmod a+x test.sh 
```

Then run it like so:

```
$ ./test.sh 123456 
```

As @gokcehan also commented, running your script with `sh ...` when you have a shebang is redundant, and isn't preferable for other reasons.

* * *

As for what you were asking, you can easily test your regex replacement:

```
$ echo tableNameNUMBER | sed "s/NUMBER/123456/"
tableName123456 
```

And it seems to work just fine.

Note: The preceding `$` merely denotes that I typed it into my console and isn't part of the actual command.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:12:08.503

要将 1111 替换为 2222，您可能应该尝试

```
cat textfile.txt | sed -e 's/1111/2222/g' 
```

或者

```
cat textfile.txt | sed -e 's/1111/2222/g' > output.txt 
```

或者

```
NUMBER=1111 ; NEWNUMBER=2222; cat textfile.txt | sed -e "s/$NUMBER/$NEWNUMBER/g" 
```

无需为此类琐碎的任务创建单独的脚本。注意 sed 的“-e”开关，在引用命令末尾附加的“g”，以及单引号和双引号之间的区别。

# c# - 为什么要使用 AddWithValue + Parameters["@somevar"].Value 而不是只使用 AddWithValue？(MySql + C#)

> ID：12735791
> 
> 赞同：0
> 
> 时间：2012-10-04T20:56:35.233
> 
> 标签：c#, mysql

在[http://dev.mysql.com/doc/refman/5.5/en/connector-net-programming-prepared.html](http://dev.mysql.com/doc/refman/5.5/en/connector-net-programming-prepared.html)的示例代码中，有代码（每次都做：`cmd.ExecuteNonQuery()`在迭代中）：

```
try
{
    conn.Open();
    cmd.Connection = conn;

    cmd.CommandText = "INSERT INTO myTable VALUES(NULL, @number, @text)";
    cmd.Prepare();

    cmd.Parameters.AddWithValue("@number", 1);
    cmd.Parameters.AddWithValue("@text", "One");

    for (int i=1; i <= 1000; i++)
    {
        cmd.Parameters["@number"].Value = i;
        cmd.Parameters["@text"].Value = "A string value";
        cmd.ExecuteNonQuery();
    }

} 
```

为什么不是（做1次：`cmd.ExecuteNonQuery()`迭代后）：

```
 try
    {
        conn.Open();
        cmd.Connection = conn;
        cmd.CommandText = "INSERT INTO myTable VALUES(NULL, @number, @text)";
        cmd.Prepare();
        for (int i=1; i <= 1000; i++)
        {
          cmd.Parameters.AddWithValue("@number", i);
          cmd.Parameters.AddWithValue("@text", "One");
        }
        cmd.ExecuteNonQuery();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:58:15.000

您的代码示例不正确；the`cmd.ExecuteNonQuery();`实际上是在循环内。

这将使用不同的参数执行 1,000 次查询，而无需重新创建命令。

# r - 将 ... 参数传递给另一个函数

> ID：12735795
> 
> 赞同：2
> 
> 时间：2012-10-04T20:57:09.107
> 
> 标签：r

我正在编写一个函数 foo(..., lev) 基于包 limma （生物导体）的 makeContrasts 函数：

```
makeContrasts(..., contrasts=NULL, levels) 
```

我想将 foo 'as-is' 的 ... 参数传递给 makeContrasts。这是我的代码：

```
foo = function(..., lev) {
    e = substitute(list(...))
    makeContrasts(e[[2]], levels=lev)
}

foo(a + b, design) 
```

我使用 e[[2]] 的原因是 e 将是**list(a+b)**而 e[[1]] 是**list**但 e[[2]] 是我需要的：**a + b**

但问题是传递给 makeContrast 的实际参数是 **e[[2]]**而不是**a + b**。那么该怎么办？

完整的参数分配如下：

```
ct = factor(c("a","b"))
design = model.matrix(~0+ct)
colnames(design)=levels(ct)
makeContrasts(a+b,levels=design) # It works
foo(a+b, design) # Does not work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:15:48.120

似乎您只需要删除`list`呼叫：

```
> foo <- function(...) f(substitute(...))
> f <- function(...) eval(...)
> a <- 1; b <- 3
> foo(a+b)
[1] 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:57:22.650

A 可能过度简化了问题，但以下内容不仅有效

```
foo = function(..., lev) {
 makeContrasts(...,levels =lev)
}

foo(a + b,b+c, lev =letters[1:3])

## Contrasts
## Levels a + b b + c
## a     1     0
## b     1     1
## c     0     1 
```

# 用你的例子

我似乎没有过于简单化。

如果`...`包含要传递给另一个函数的参数，那么您只需要传递`...`给该函数。`...`

```
ct = factor(c("a","b"))
design = model.matrix(~0+ct)
colnames(design)=levels(ct)
makeContrasts(a+b,levels=design) 
## Contrasts
## Levels a + b
##  a     1
##  b     1
foo(a+b, lev = design)
## Contrasts
## Levels a + b
##  a     1
##  b     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:01:19.547

如果您尝试将 a + b 作为字符串传递，请添加引号。您还可以将对象设置为“a + b”并传递该对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T21:59:51.303

```
a=3, 
b="test"
 foo = function(...) {
    e = substitute(...)
     eval(e[[3]]) 
}

foo(a + b)

foo(a + b)
[1] "test" 
```

正如其他人所指出的，您的期望仍不清楚。可能您不想要评估，只想要符号：

```
foo = function(...) {
    e = substitute(...); str( e[[3]])
    return(e[[3]]) 
}

foo(a + b)
# symbol b
#b 
```

# python - pyPdf：加快写入/组合操作？

> ID：12735798
> 
> 赞同：0
> 
> 时间：2012-10-04T20:57:14.957
> 
> 标签：python, pypdf

我有一个 pyPdf 应用程序，将一堆 PDF 组合成一个 PDF，并使用外部元数据正确构建目录。它对某些 PDF 非常有效，但对于其他 PDF，它似乎挂起并且从未真正编写过 PDF。我将写操作复制到测试库中，以查看它挂在哪里，它似乎挂在方法“_sweepIndirectReferences”（[此处为第 311 行](https://github.com/mfenniak/pyPdf/blob/trunk/pyPdf/pdf.py)）中。我可以设置它运行，15-20 分钟后返回并设置断点以发现它仍在解析第一页上的间接引用，堆栈深度为 25-30。如果我使用 Acrobat 合并文件，它会在一分钟内完成所有 200 多页。

我不需要我的写操作那么快，但是我可以做些什么来加快这个过程吗？似乎 Adob​​e 可以在一分钟内完成的事情，我应该能够在不到 4 小时内完成！我应该注意，它只发生在某些文件上，而不发生在其他文件上。我的猜测是，取决于 PDF 对间接引用的依赖程度会有所不同。

作为参考，我正在生成这样的pdf：

```
opened_pdfs = []
o_pdf = PdfFileWriter()

for fname in list_of_pdfs:
    i_pdf = PdfFileReader(file(fname, 'rb'))
    opened_pdfs.append(i_pdf)

    for page in i_pdf.pages:
        o_pdf.addPage(page)

of = open(file_name, 'wb')
o_pdf.write(of)
of.close()

for pdf in opened_pdfs:
    pdfs.stream.close() 
```

这忽略了关于书签的部分，但我认为这可能很好。有问题的没有更多的书签或任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:23:53.547

我没有答案，但我可能有一个解决方法：将工作分解为多个部分，然后将这些部分组合起来。这适用于我遇到的问题，可能与您的问题相同，我没有足够的调试来找出答案。此外，您可能会查看声称是 pypdf 超集的 PyPDF2，并查看它们是否更改了您看到的卡住的代码。

我使用 pypdf 编写了一个一次性脚本，将大约 160 个单页 pdf 拼接在一起，这些单页 pdf 由一位亲爱的八十多岁的老人创建，他将回忆录的每一页放在一个单独的文件中。

回忆录大约有 50% 是图片，pdf 的文件大小从 73kB 到 2.5MB 不等。pypdf 代码的症结几乎直接来自文档：

```
for pdf_in in pdf_list:
    try:
        pdf = PdfFileReader(file(pdf_in, "rb"))
    except IOError:
        print "skipping ", pdf_in
        continue
    num_pages = pdf.getNumPages()
    if list_only:
        print pdf_in, ':', num_pages
    else:
        for i in range(num_pages):
            output.addPage(pdf.getPage(i))
        output.write(outputStream)
    total_pages += num_pages 
```

当文件稍微少一点时，我成功地运行了脚本，它可能需要几个小时。它产生了一个 5GB 的 pdf！

这个周末我更新了一些文件（作者更正）并尝试再次运行它。巧合的是（？）我的 macbookpro 冻结了，在我重新启动后，我有一个不完整的 2.9GB pdf。

所以我添加了这段代码并一次运行 seglen=35 个文件。

```
if seglen:
    segments = len(pdf_list) / seglen + 1
    seglist = []
    for i in range(segments):
        outfile = kwargs['output_file'] + str(i)
        seglist.append(outfile + '.pdf')
        merge_files_in_order(pdf_list[i*seglen:(i+1)*seglen], kwargs['list_only'], outfile)
    # now stich the segments together
    merge_files_in_order(seglist, kwargs['list_only'], kwargs['output_file'])
else:
    merge_files_in_order(pdf_list, kwargs['list_only'], kwargs['output_file']) 
```

这运行的时间要少得多，而且奇怪的是，生成了一个完整的 288MB 文件，而不是不完整的 2.9GB 文件（或者像我一个月前创建的那样的 5GB 文件）。

也很有趣：我不清理“段”文件，所以我也可以看到它们。它们的大小从 195MB 到 416MB 不等，但当最后将所有五个文件合并时，生成的文件是完整的，只有 288MB！我很开心。

# php - 解码 html 特殊字符和其他元素

> ID：12735806
> 
> 赞同：1
> 
> 时间：2012-10-04T20:57:33.150
> 
> 标签：php, html, decode, html-entities

如何将 PHP 元素转换`&agrave;`为`&#8217;`默认的 utf8 字符？

我尝试 html_entity_decode 没有成功（我显示一些`?`代替`&agrave;`和`&#8217;`代替`&#8217;`）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T21:07:01.470

您遇到编码问题。`html_entity_decode`默认输出 iso-8859-1。我`?`假设您使用的是 utf-8。

尝试这个：`html_entity_decode('&agrave;', ENT_COMPAT, 'utf-8')`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T21:07:50.027

```
html_entity_decode(utf8_decode('&#8217;')); 
```

# android - 如何以编程方式打开android大容量存储模式

> ID：12735811
> 
> 赞同：2
> 
> 时间：2012-10-04T20:57:39.990
> 
> 标签：android, android-sdcard

安卓连接电脑后进入大容量存储模式。即使电脑关闭，我也想保留大容量存储模式。

我该怎么做，从谷歌的大量搜索中我找不到任何东西。

**更新：**当我重新启动我的电脑时，android 与电脑断开连接，并且大容量存储模式被关闭。我想在操作系统启动时用 android sd 卡做点什么。

# java - 为什么我不能在控制器内的新线程中使用@In（使用jboss seam）注入依赖项？

> ID：12735815
> 
> 赞同：1
> 
> 时间：2012-10-04T20:57:58.903
> 
> 标签：java, dependency-injection, seam

我在依赖注入方面遇到了一些麻烦，因为我对 Seam 真的很陌生，我可能会以错误的方式做某事！

我需要在从控制器内触发的新线程上注入依赖项 - 我没有例外，但它们只是来了`null`。`d1`首先，我尝试在线程中简单地重用（见下文），但它是`null`，然后我有了这个想法，再次注释这个对象`@In`......不幸的是，同样的事情发生了（得到空）！！！

```
@Scope(ScopeType.CONVERSATION)
@Name("myController")
public class MyController{
    @In(create = true)
    private Dependency1 d1; //ok, gets injected with no problems!

    public void importantMethod(){
        //this part of the method is important and is fast
        //but below comes an expensive part that takes some minutes

        new Thread(new Runnable(){
            @In(create = true)
            private Dependency1 anotherD1;  //I still need d1 here!!!       

            @Override
            public void run(){
                //I want to run expensive code here.
                //A new thread is required in order to leave
                //the visitor free to go else where on the web site

                //First trial was to make d1 final and simply use it here!
                //d1.doExpensiveStuff();
            };
        }).start();
    }
} 
```

有谁知道为什么会这样？使用 DI/Seam/Threading 时有什么好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T10:31:00.257

注入仅发生：

1.  在 Seam 组件中（在您的示例中，`MyController`是组件，`Runnable`您在内部创建的匿名不是组件）。
2.  在 Seam 生命周期内。生命周期可以由 JSF 请求、异步执行或您自己手动启动。

所以，你不能`@In`在你的线程中使用，因为它不是一个组件，Seam 不会拦截对它的调用。要在异步线程中获取组件，您需要使用 Seam API 来启动生命周期并获取您需要的组件：

```
@Scope(ScopeType.CONVERSATION)
@Name("myController")
public class MyController {

    @In(create = true)
    private transient Dependency1 d1;

    public void importantMethod() {
        new Thread(new Runnable() {
            @Override
            public void run() {
                LifeCycle.beginCall(); // Start the Seam lifecycle
                Dependency1 d1 = (Dependency1) Component.getInstance("dependency1");
                d1.doExpensiveStuff();
                LifeCycle.endCall();   // Dispose the lifecycle
            }
        }).start();
    }
} 
```

Seam 提供的`@Asynchronous`注解正是您想要的。如果在 Seam 组件的方法中使用此注解，则该方法将在后台线程中执行（取自 Seam 拥有的线程池）。请注意，异步方法将能够像使用普通的 Seam 调用一样使用注入的依赖项：

```
@Name("myBackgroundWork")
public class MyBackgroundWork {
    @In private transient Dependency1 d1;

    @Asynchronous
    public void runInBackground() {
         d1.doExpensiveStuff();
    }
} 
```

然后`MyController`您可以调用异步方法，该方法将启动后台工作并立即返回：

```
@Scope(ScopeType.CONVERSATION)
@Name("myController")
public class MyController {
    @In(create = true)
    private MyBackgroundWork myBackgroundWork;

    public void importantMethod() {
        // Execution will return immediately and thread will start
        myBackgroundWork.runInBackground();
    }
} 
```

更多信息在这里：

[http://docs.jboss.org/seam/2.2.2.Final/reference/en-US/html/jms.html#d0e21609](http://docs.jboss.org/seam/2.2.2.Final/reference/en-US/html/jms.html#d0e21609)

# c# - 如何使用 WIF 和 STS Provider 从站点 A 获取站点 B 上的 SSO

> ID：12735816
> 
> 赞同：0
> 
> 时间：2012-10-04T20:58:01.373
> 
> 标签：c#, asp.net, wif, sts-securitytokenservice

所以这里是设置。我有一个 STS 提供程序和 2 个 ASP.NET MVC 站点*都*信任同一个 STS 提供程序。用户来到站点 A 并被重定向到 STS 提供者被动登录，正确地进行身份验证，并按预期重定向回站点“A”。这一切都很好。我可以使用以下命令在站点“A”的代码中查看令牌和身份：

```
IClaimsPrincipal claimsPrincipal = Thread.CurrentPrincipal as IClaimsPrincipal;
IClaimsIdentity claimsIdentity = (IClaimsIdentity)claimsPrincipal.Identity; 
```

现在站点“A”上有一个链接到站点“B”，该链接支持*相同*的STS 提供者。问题是当我导航到站点“B”时，声明信息不存在，并且用户未自动进行身份验证。根据 STS 和 WIF 文档，应发生以下情况：

> “流程照常开始，用户从站点 A 上的 B 请求页面并被重定向到 STS 以获取令牌。但是，*这次*用户已经通过 STS 站点进行了身份验证，因为存在由STS cookie。这意味着对 STS 页面的请求直接导致 SecurityTokenService 发布序列的执行，而不向用户显示任何用于收集凭据的 UI。***令牌被静默发布并转发给 B***按照通常的顺序。从用户点击到 B 的链接并且浏览器显示来自 B 的请求页面的那一刻起，只有浏览器中地址栏的一些闪烁会泄露一些身份验证发生在幕后的事实。这几乎就是单点登录 (SSO) 的含义：用户经历了仅登录一次的体验，从那一刻起，系统就能够访问更多可靠方，而无需再次提示用户输入凭据。”

有谁知道在 STS 提供者、站点 A 或站点 B 中明确需要发生什么才能使其正常工作？请记住 STS 和站点“A”运行良好；只是站点“B”没有获得 SSO 能力。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:20:42.647

是的 - 您应该获得 SSO。

使用 ADFS 术语，我假设您 FedUtil'd 与 STS 的 A 和 B 并在 STS 上将 A 和 B 配置为具有基本相同配置的依赖方？我假设您已经比较了 A 和 B web.config？

清除**所有**cookie - 我发现 FireFox 做得最好。

**直接**导航到 B。会发生什么？

*   STS 登录界面？
*   FBA登录界面？
*   什么都没有——直接去B？

如果是 STS 登录屏幕，当您进行身份验证然后导航到 A 时会发生什么？

如果没有，B 上的着陆页是否受到保护？

# jquery - 带有动画文本内容的 onBefore 回调的 jQuery Cycle Next 和 Prev

> ID：12735817
> 
> 赞同：1
> 
> 时间：2012-10-04T20:58:06.870
> 
> 标签：jquery, jquery-cycle

我有一个 jQuery Cycle 幻灯片，其中包含用作标题样式文本的附加文本的图像。图像淡入，文本（放置在 div 中）动画进出，与使用 before 回调方法的图像大致同时。我现在正在尝试添加上一个和下一个控件。他们工作，但他们立即前进到下一张/上一张幻灯片，因为之前的回调是延迟的，他们似乎没有触发之前的回调。我想知道如何使整个系统正常工作，并且如果单击上一个和下一个控件，则动画文本与图像同时淡入。

解决此设置的最佳方法是什么？我是在正确的道路上还是有更有效和正确的方法来解决这个问题？代码如下，提前致谢！

```
<div id="sliderCont">
    <a href="#" id="prev1" name="prev1">PREV</a> <a href="#" id="next1" name=
    "next1">NEXT</a>

    <ul id="slider">
      <li>
        <a href="#"><img src="library/images/car_tarp.jpg" /></a>

        <div class="captionHidden">
          <div class="captionInner">
            <h2 id="slide1_headline1">Unveiling a Revolution</h2>

            <h3 id="slide1_headline2">in Automotive Hospitality</h3>

            <h4 id="slide1_headline3">What Makes Us Different</h4>
          </div>
        </div>
      </li>

      <li>
        <a href="#"><img src="library/images/passion.jpg" /></a>

        <div class="captionHidden">
          <div class="captionInner">
            <h2 id="slide2_headline1">Providing the Blueprint For</h2>

            <h3 id="slide2_headline2">Performance with<br />
            Passion</h3>
          </div>
        </div>
      </li>
    </ul>
</div> 
```

接下来，CSS

```
*, html, body { margin:0;padding: 0; }
#sliderCont {
height: 512px;
width:1200px;
overflow: hidden;
position: relative;
margin-top: 30px;
-webkit-box-shadow: 0 0 7px rgba(0, 0, 0, 0.35), inset 0 -1px 0 rgba(0, 0, 0, 0.2);
-moz-box-shadow: 0 0 7px rgba(0, 0, 0, 0.35), inset 0 -1px 0 rgba(0, 0, 0, 0.2);
box-shadow: 0 0 7px rgba(0, 0, 0, 0.35), inset 0 -1px 0 rgba(0, 0, 0, 0.2);
}
#slider {
width: 1200px;
height: 512px;
z-index: 1;
margin: 0;
padding: 0;
background: #ccc;
overflow: hidden;
}
#slider li {
margin: 0;
}
div.caption {
display: none;
position: absolute;
top: 60px;
left: 60px;
z-index: 2;
font-weight: lighter;

}
div.captionHidden {
display: block;
position: absolute;
top: 60px;
left: 60px;
z-index: 2;
width:1080px;
}
div.captionInner {position: relative; width:1080px;}
div.caption span.item {
display: inline-block;
padding: 10px;
font-size: 20px;
background-color: #2C2C2C;
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25), inset 0 -1px 0 rgba(0, 0, 0,    0.2);
-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25), inset 0 -1px 0 rgba(0, 0, 0, 0.2);
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25), inset 0 -1px 0 rgba(0, 0, 0, 0.2);
color: #E7E7E7;
}
div.caption span.item.second {
margin-left: 15px;
margin-top: -5px;
}
span.slider-highlight {
color: #59b5e2;
}

h2#slide1_headline1 { font-size: 79px;text-align: right;font-weight: normal; color:  #353534;}
h3#slide1_headline2 { font-family: "Arial Black", Arial; font-size: 32px;text-align: right;font-weight: bold; color:#353534;}
h4#slide1_headline3 { font-size: 18px;text-align: right;font-weight: normal; color: #353534;}

h2#slide2_headline1 { font-family: "Arial Black", Arial;font-weight: bold; font-size:  32px;text-align:left; color: #ffffff;}
h3#slide2_headline2 { font-size: 79px;text-align: left;font-weight:  normal;color:#ffffff;} 
```

然后我们的 jQuery 循环：

```
$(function() {
    $('#slider').cycle({
        fx: 'fade',
        speed: 800,
        prev: '#prev1',
        next: '#next1',
        easing: 'easeOutCubic',
        timeout: 5000,
        before: onBefore
    });

    function onBefore(curr, next, opts) {
        $(this).children('.captionHidden').css({
            'opacity': '0',
            'top': '0px'
        });
        $(this).children('.captionHidden').animate({
            opacity: 1,
            top: '60px'
        }, 600, 'easeOutCubic').delay(5000).animate({
            'opacity': 0,
            'top': '-5px'
        }, 500, 'easeOutCubic');
    }
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:25:44.383

我实际上是用另一种方式去做的；我将 fx 更改为 scrollLeft，然后将动画放在 after 回调上（并使用 before 回调将标题文本 div 容器“重置”为 opacity:0; 和 top:0;

```
$(function() {
 $('#slider').cycle({
    fx : 'scrollLeft',
    speed : 700,
    prev:   '#prev1', 
    next:   '#next1',
    easing: 'easeOutCubic',
    timeout: 5000,
    before : onBefore,
    after: onAfter
});

function onBefore(curr,next,opts) {
   $(this).children('.captionHidden').css({'opacity' : '0','top' :'0px'});
 }
function onAfter(curr,next,opts) {
   $(this).children('.captionHidden').animate({
    opacity: 1,
    top: '60px'
   }, 600, 'easeOutCubic')
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:33:18.373

如果我说对了，那么您真正需要做的就是在之前或之后不使用任何东西。我在这里写了一个简单的例子：http: [//jsfiddle.net/v3VP2/22/](http://jsfiddle.net/v3VP2/22/)。

# c# - 序列化一个脚本

> ID：12735818
> 
> 赞同：-3
> 
> 时间：2012-10-04T20:58:09.540
> 
> 标签：c#, .net, windows-phone-7, xaml

我有这个

```
<script type="text/javascript" charset="utf-8">
var playlist = [
  { 
    artist : "Lady Gaga",
    title : "Lady Gaga  Just Dance remix",
    type : "sound",
    file : "http://news.yzwb.net/dianzibao/2010-12-26/58CABECF-0579-42A1-9733-B80F2EDFE1E3.mp3",
    id : "de0d4d6842d9354cdc2cbdefd34ab2c7" 
  }
  ,
  { 
    artist : "Dj schmolli",
    title : "Scream aim dance bullet for lady gaga lady gaga just dance vs bullet for my valentine scream aim fire",
    type : "sound",
    file : "http://www.culturebully.com/wp-content/uploads/2009/12/DJ Schmolli - Scream Aim Dance (Bullet For Lady Gaga).mp3",
    id : "004f99f5ff88aa5d376da40880cd4688" 
  },
....> 
```

我想得到那些以'.mp3'结尾的链接有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:51:55.150

你可以用正则表达式来做到这一点。

另一种方法是在 .NET 中使用字符串操作函数：

用 " 字符拆分字符串`String.Split`，这将为您提供一个字符串数组。检查结果数组中的所有其他项目（这些将是引号内的字符串）。
如果字符串以 .mp3 结尾（使用`String.EndsWith`）然后它是一个 mp3 文件的链接。

# asp.net-mvc-3 - 视图如何知道 ajax MVC WebGrid 在哪个页面上？

> ID：12735821
> 
> 赞同：3
> 
> 时间：2012-10-04T20:58:14.743
> 
> 标签：asp.net-mvc-3, webgrid

我有一个包含部分视图的视图，其中包含一个通过 ajax 进行页面的 WebGrid。但是，我无法让父视图了解 WebGrid 所在的页面。我想要完成的是：我在包含视图上有一个“创建”按钮，可以导航到新页面，但我希望它将当前页面 # 作为查询字符串参数传递给新页面，这样如果他们取消创建，原始视图将加载上一页，而不是默认加载第一页。

我看到的问题是，当部分视图的网格更新时，父视图的模型不会改变。而且，虽然我可以为 ajaxUpdateCallback 创建一个方法，但我还没有弄清楚如何告诉这个方法当前页面是什么。

我的代码的相关部分如下所示： 在父视图中：

```
<div id="divList">
    @Html.Partial("_MatterList", Model) //This is where the grid is defined
</div>
<br/>
<div id="newSection">

<input type="button" value="New Matter" onclick="newMatter();"></input>
</div>
<script type="text/javascript">

    var _Page; //I tried creating a javascript variable to hold the page, but can't get it to populate with anything but the default 1.

    function newMatter() 
    {
        var urlAction = "@Url.Action("Create", "Matter", new { area = "Admin" })";
        var subclientid = $("#SubClientID > option:selected").attr("value"); //defined in a form not displayed here
        var clientid = $("#ClientID > option:selected").attr("value");//defined in a form not displayed here
        redirect(urlAction, clientid, subclientid);

    }
    function redirect(urlAction, clientid, subclientid) {
        if(clientid > 0 || subclientid > 0 ) {
            urlAction += "?";
        }
        if(clientid > 0) {
            urlAction += "clientid=" + clientid;
            if(subclientid > 0) {
                urlAction += "&subclientid=" +subclientid;
            }
        }
        //I want to be able to add page in here as well. a la &page=_Page
        window.location = urlAction;
    } 
```

在 _MatterList 部分视图中：

```
 <div id="matterListing">

    @{

        var grid = new WebGrid<Matter>(null, rowsPerPage: 10, canSort: false, defaultSort: "Name", ajaxUpdateContainerId: "matterListing",ajaxUpdateCallback:"afterUpdate");
        grid.Bind(Model.Matters, rowCount: Model.TotalRows, autoSortAndPage: false);
        @grid.GetHtml(
            tableStyle: "table90",
            alternatingRowStyle: "tableAltRows",
            headerStyle: "tableHeaders",
            columns: grid.Columns(

                grid.Column(...  //there are a lot of columns, removed them because not important to the problem.

                )
                   )
    }
    <script type="text/javascript">
        function afterUpdate() {
            _Page = @Model.PageNumber; //I tried this but it only ever shows 1 because it evaluates when the page first loads.  What I need is for it to dynamically get the correct page at execution time.
        }
    </script>
</div> 
```

我在想，afterUpdate 方法需要使用当前页面的参数（即调用 afterUpdate(2) 而不是使用@Model.PageNumber），但我不知道如何强制 WebGrid 通过沿着回调。有没有人有这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:20:45.623

解决方案最终变得非常简单，我有点尴尬我花了多长时间才想出它。

在 _MatterList 部分视图中，我创建了表单并放置了一个带有页码的 HiddenField：

```
<form id="frmPage">
    @HiddenFor(model => model.PageNumber)
</form> 
```

然后在主页中，我修改了 newMatter() 以提取该页面，并使用 redirect() 将其添加为查询字符串参数：

```
function newMatter() 
{
    var urlAction = "@Url.Action("Create", "Matter", new { area = "Admin" })";
    var subclientid = $("#SubClientID > option:selected").attr("value"); //defined in a form not displayed here
    var clientid = $("#ClientID > option:selected").attr("value");//defined in a form not displayed here
    var page = $("#frmPage").find("#PageNumber").val();
    redirect(urlAction, clientid, subclientid, page);
}

function redirect(urlAction, clientid, subclientid, page)
{
        if(clientid > 0 || subclientid > 0  || page > 1) {
            urlAction += "?";
        }
        if(clientid > 0) {
            urlAction += "clientid=" + clientid;
            if(subclientid > 0) {
                urlAction += "&subclientid=" +subclientid;
            }
            if(page > 1) {
                urlAction += "&page=" + page;
            }
        }
        else if(page > 0){
            urlAction += "page=" + page;
        }
        window.location = urlAction;
} 
```

# mysql - MySQL：使用 GROUP BY 时是否可以通过 WHERE 子句限制行

> ID：12735830
> 
> 赞同：0
> 
> 时间：2012-10-04T20:59:11.503
> 
> 标签：mysql

我需要计算包含日期值条目的行。该行已`0000-00-00`根据事件在我的应用程序进程中被初始化并填充一个日期

我想计算在日期字段中输入日期的行数 - 每个组日期的 DATE2。

```
ID  DATE1      DATE2
001 2012-10-01 0000-00-00
002 2012-10-04 2012-09-15
003 2012-10-03 0000-00-00
004 2012-10-04 2012-09-26
005 2012-10-01 2012-09-27
006 2012-10-02 0000-00-00
007 2012-10-02 2012-09-19 
```

所以我需要结果（基于这个简单的例子）是：

```
2012-10-01 = 1 row
2012-10-02 = 1 row
2012-10-04 = 2 rows 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:01:02.930

```
select DATE1, count(*) 
from MyTable 
where DATE2 <> '0000-00-00' 
group by DATE1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/8ff99/1)

# php - 我的加入有什么问题？

> ID：12735831
> 
> 赞同：1
> 
> 时间：2012-10-04T20:59:14.780
> 
> 标签：php, join, mysqli

简化的数据库设置

表：客户字段：clientId(autoinc/primary)、customerId、clientName

表：项目字段：projectId(autoinc/primary)、customerId、projectName

表：项目字段：itemId（autoinc/primary）、customerId、itemName

询问：

```
include('includes/conn.inc.php'); 
$query = "SELECT customerId 
         FROM items, projects, clients 
         WHERE customerId= 135";
$stmt = $mysql->prepare ($query);
$stmt->execute();
$stmt->bind_result($customerId);

while($row = $stmt->fetch()) : 
      echo $customerId;
endwhile; $stmt->close(); 
```

问题：查询有什么问题？温柔点，我第一次尝试找出连接。我尝试了很多不同的方法，但无法让它们中的任何一个起作用，这似乎是我想做的最简单和最能解释的方法。每个表上都有一个对应的条目（customerId=135），所以如果查询有效，我希望它返回其中的 3 个。错误：在非对象上调用执行

提前感谢大家

- - - - 更新

感谢大家的帮助！我实际上是通过使用这个查询让它工作的：

```
 SELECT clients.customerId, projects.customerId, items.customerId 
        FROM clients, projects, items 
        WHERE  clients.customerId = projects.customerId AND   
        projects.customerId = items.customerId; 
```

虽然这看起来有点笨拙，尤其是最后。如果有人知道“WHERE table.column = table.column = table column”的简写，考虑到它们都是 3 个相同的值，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:04:28.230

好吧，没有加入。您*至少*需要定义这些表之间的隐式关系，如下所示：

```
SELECT customerId 
FROM items, projects, clients 
WHERE clients.customerId = projects.customerId
AND items.customerId = projects.customerId
AND clients.customerId= 135 
```

但是，您应该像这样使用显式连接：

```
SELECT client.customerId
FROM clients
LEFT JOIN projects ON projects.customerId = clients.customerId
LEFT JOIN items ON items.customerId = clients.customerId
WHERE clients.customerId = 135 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:05:26.373

我可能遗漏了一些东西，但您没有明确加入查询中的任何位置。相反，每列的每一行将与其他表的每一行连接。

如果你有三个包含 abc、123 和 !@# 的表，你会得到

```
a   1   !
a   1   @
a   1   #
a   2   !
... 
```

要正确加入，您需要做更多类似的事情

```
select customerId
from clients c
join project p on p.customerId = c.id
join items   i on i.customerId = c.id
where customerId = 135; 
```

但是，假设您为客户 ID 提供 where 子句并选择客户 ID，您将返回 count(p) * count(i) 行，每行仅包含客户 ID 135。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:06:40.540

你应该在你的表上指定连接条件，像这样

```
SELECT customerId 
     FROM items i, projects p, clients c
     WHERE i.customerId = p.customerId AND p.customerId = c.customerId 
        AND customerId= 135 
```

以上从具有相等的表中合并行`customerId`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T14:45:26.910

```
 SELECT clients.customerId, projects.customerId, items.customerId 
    FROM clients, projects, items 
    WHERE  clients.customerId = projects.customerId AND   
    projects.customerId = items.customerId; 
```

# c# - 如何在我的 ASP .NET 页面上显示警报消息？

> ID：12735834
> 
> 赞同：0
> 
> 时间：2012-10-04T20:59:21.693
> 
> 标签：c#, asp.net, alert

这不起作用：

```
try
{
     EnvironmentVerifier.VerifyAppFoldersAndFiles();
}
catch (Exception ex)
{
     ClientScript.RegisterStartupScript(GetType(), "Error!", "alert('" + ex.Message + "');", true);
     Logger.LogError(ex.Source, ex.TargetSite.ToString(), ex.Message);
     return;
} 
```

发生错误时，它会进入 catch 块，但不会显示警报消息。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:02:11.407

试试这个：

```
ClientScript.RegisterStartupScript(GetType(), "Error!", "alert('" + ex.Message.Replace("'", @"\'") + "');", true); 
```

.Replace("'", @"\'") 转义你的 alert('message'); 因为如果你有这样的错误信息：

```
alert('My error message's problem is that single quote.'); 
```

除非您这样做，否则它将中断：

```
alert('My error message\'s problem is that single quote.'); 
```

# css - 将背景图像添加到现有图像

> ID：12735836
> 
> 赞同：0
> 
> 时间：2012-10-04T20:59:27.293
> 
> 标签：css, background, image

我的复选框包含一个背景图像，当它被点击时，我希望它上面出现一个正号。

我考虑在原始图像之上添加第二个具有透明背景的 GIF 图像。单击时应出现正号背景图像，再次单击时应消失。

一般来说，可以通过逗号分隔 2 个背景图像：

```
background: url(image1.png) , url(image2.png); 
```

是否可以使用 CSS 仅将一个添加到现有的？

我希望我能清楚地解释自己。谢谢

附上简单示例：http: [//picturepush.com/public/10656582](http://picturepush.com/public/10656582)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:03:01.250

您可以使用 CSS 精灵，在选中时使用两个图标更改图像的背景位置。一般来说，复选框中的图像在浏览器中并不能得到很好的支持。您可能不得不在包装元素上执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:23:35.737

嗯不完全确定你是如何做到这一点的。如果您想要一种在 CSS 中定位复选框输入的方法，那么您可以使用

```
input[type=checkbox] {

}
input[type=checkbox]:checked {

} 
```

如果您真的可以在复选框上使用背景图像，那么您可以使用第一个仅包含一个图像，然后 :checked 将同时包含两个图像。这样，当您选中一个复选框时，它将应用 :checked 中的内容，并在另一张图像的顶部加上加号。

# magento - Magento - 找到对应于一段 HTML 的块

> ID：12735843
> 
> 赞同：4
> 
> 时间：2012-10-04T21:00:10.353
> 
> 标签：magento

我是 Magento 的新手，在探索系统时我发现的一件尴尬的事情是将生成的 (X)HTML 页面中的给定元素与创建它的块的名称联系起来。我知道系统->配置->模板路径提示。但是，它非常难看，有时会改变页面上元素的布局，并且不会显示所有块（我认为它仅涵盖模板块）。

我尝试过的一种方法是修改`toHtml()`Mage_Core_Block_Abstract 中的方法以在内容之前和之后添加空元素，例如。

```
<blockStart xmlns="http://some/url" name="the_block_name"/>
<!-- the block's contents -->
<blockEnd/> 
```

（可能有一种方法可以在不修改核心文件的情况下做到这一点，但我现在并不介意这种方法，因为它仅供我自己使用。欢迎任何想法。）

这些元素在文档中为我提供了足够的信息，让我可以在`.nextUntil()`浏览器端使用 jQuery 的功能`data-magento-blockname`为 blockStart 和 blockEnd 元素之间的元素添加属性。然后，我可以使用这些属性在任何给定时间显示一个工具提示，其中包含指向指针下内容的完整块名称“路径”。

这种方法的问题在于，尽管 Magento 生成具有严格 DOCTYPE 的 XHTML，但将 Content-Type 设置为“text/html”是硬编码的（参见`app/code/core/Mage/Core/Model/App.php`第 1246 行）。这意味着浏览器将 XML 解释为 HTML“标签汤”，导致发生奇怪的事情 - 我的许多标签完全消失，出现在错误的位置或没有立即关闭，因此它们包含其他内容。此外，并非文档中的所有 HTML 元素都显示在 DOM 中。

我尝试修改 App.php 以将 Content-Type 更改为 application/xhtml+xml，这确实使我的机制能够成功运行。但是，它有一些严重的缺点：

1.  我不得不禁用不能生成有效 XHTML 的加载项，尤其是 Commerce Bug。Commerce Bug 的丢失非常糟糕，因为我真的希望在我的加载项运行时访问它的页面并打包 XML 查看功能。
2.  Magento 中包含的大部分 javascript 都使用了 document.write()，它不适用于 XHTML，因此我得到了 javascript 异常，并且可能某些功能不起作用。

是否有人知道我的方法对这些问题的任何解决方案，或者知道将输出中的 HTML 元素链接到生成它们的 Magento 块的任何更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:28:54.490

使用模板路径提示时，有时您需要检查元素，然后通过在 ChromeDevTools 或 Firebug 中查看列出的关联模板文件（它将是具有一堆内联样式的父元素）。

我也经常使用 grep 来查找内容。只需导航到您*认为*应该查找的最高文件夹（以免遍历数千个不相关的文件夹/文件）。

因此，如果您知道块名称，并且想查找哪些模板文件使用该块，您可以转到 /app/design/frontend/base/default/layout 并执行以下操作：

```
grep "catalog/category" -r -l . 
```

并且您应该能够获得一些正在加载该块的文件名，然后找到它们的声明节点并查看正在加载的模板文件。

```
echo get_class($this) 
```

也可以有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:13:19.687

**更新**它最终花了一段时间，但最后我给你 BlockSpy：[http ://omnicognate.wordpress.com/2012/11/13/blockspy-my-first-magento-extension/](http://omnicognate.wordpress.com/2012/11/13/blockspy-my-first-magento-extension/)

* * *

**更新**没有太多时间来处理它，但我现在已经完成了这项工作的服务器端部分。通过在事件处理程序中添加我的 blockStart/blockEnd 标记，`core_block_abstract_to_html_after`我设法在不修改任何核心文件的情况下做到了这一点，并且通过将它们放在注释中，我让它们不受干扰地通过 HTMLTidy。SAX 解析器位正在工作。只需要做一些 javascript 客户端，这应该很简单——想法是以 CSS XRAY 书签 (http://westciv.com/xray/) 的样式做一些事情。

我将链接到一篇关于它如何工作的文章，并在完成后更新并接受这个答案 - 当然，如果其他人之前没有提出更好的解决方案。

* * *

我想我正在接近解决这个问题。看来问题真的归结为三件事：

1.  Magento 并不能真正生成可靠有效的 XHTML。例如，对于 Javascript 使用 CDATA 部分存在一些不一致。我遇到了一些无效页面，毫无疑问还有更多。
2.  页面的生成以纯文本方式完成。由于服务器操作的是字符串，而不是 DOM，因此在服务器端可靠地插入标记并不容易。此外，AFAIK 不能保证块的`toHtml()`方法总是会产生整个元素的集合。例如，没有什么可以阻止您（我认为）拥有一个生成文本并将其嵌入到父块中的属性值中的块，或者在父块中打开 XHTML 元素并在子块中关闭它（尽管那样会冷酷无情）。
3.  将 Content-Type 切换为 XHTML，即使服务器被说服生成正确有效的标记，也会完全破坏站点上的 javascript，而且我不准备通过并更新它以使用 XHTML。

我认为以下方法可以解决这些问题：

1.  在服务器端使用`PHP::Tidy`以强制服务器生成有效的 XHTML。我已经通过`tidy_parse_string()`在`controller_front_send_response_before`处理程序中运行来尝试这个，它似乎工作。
2.  与其在客户端处理 Block 类插入的 blockStart/blockEnd 标记，不如在服务器端使用 SAX XML 解析器在发送响应之前对其进行处理。我可以遍历标记之间的子字符串，将每个子字符串传递给 SAX 解析器（并忽略标记）。这应该允许我维护状态并构建输出 XML 字符串以响应 SAX 解析器生成的事件。然后我可以在服务器端安全地（如果缓慢）插入 data- ***属性。
3.  将 Content-Type 保留为 text/html。这将允许 javascript 工作，并且 data- ***属性将根据需要在客户端被忽略。

这有点痛苦，但它似乎应该适用于我的所有扩展，避免破坏 javascript 并避免对块产生什么样的输出做出任何假设。我只尝试了第一步-一旦我对棘手的部分有所了解就会更新:-)

# ruby-on-rails - 如果我已经在端口 80 上运行乘客独立（用于 rails），我怎么可能在端口 8080 上运行 apache 服务器（用于 drupal）？这可能吗？

> ID：12735848
> 
> 赞同：0
> 
> 时间：2012-10-04T21:00:28.637
> 
> 标签：ruby-on-rails, apache, port, passenger

目前，当我访问我想要指向端口 8080 的 DNS 时，Passenger Standalone “拾取”端口 8080 流量并将浏览器发送到我的 rails 站点，而不是将我发送到我想要获取的 apache 根目录至。

但是，当我访问 examplesite.com:8080 时，我被路由到了正确的位置。

所以我想我的问题是，你如何处理这样的情况，你想运行乘客独立***和***apache？

我必须投入大量时间来让我的 Rails 站点启动并通过 apache 运行，但我并没有完全拒绝做这样的事情。

# python - 从 egg 内部访问 python egg 中的文件

> ID：12735852
> 
> 赞同：10
> 
> 时间：2012-10-04T21:00:33.337
> 
> 标签：python, pkg-resources

问题是试图获得有关如何执行此操作的确切说明。之前的尝试很少，似乎不是完整的解决方案：

[将文件移动到包内的解决方案](https://stackoverflow.com/questions/3071327/problem-accessing-config-files-within-a-python-egg)

[以 zip 格式读取的解决方案](https://stackoverflow.com/questions/3655352/how-to-access-files-inside-a-python-egg-file)

[通过 get_distribution 访问元信息](https://stackoverflow.com/questions/177910/accessing-python-eggs-own-metadata)

手头的任务是读取有关运行程序的鸡蛋的信息。据我了解，有几种方法：

1.  硬编码鸡蛋的位置并将其视为 zip 存档 - 可以，但不够灵活，因为如果文件移动到另一个位置，则需要对其进行编辑和重新编译

2.  使用`ResourceManager().resource_filename(__name__, filename)`- 这似乎受到限制，因为我无法访问鸡蛋内的文件，但不能访问包内的文件。文件名中的“../../EGG-INFO/PKG-INFO”之类的符号在给出 KeyError 时不起作用。所以也不好。

3.  使用`dist = pkg_resources.get_distribution("dist_name")`然后使用 dist 对象来获取信息，但我无法从文档中理解我应该如何指定我的分发名称？它找不到它。

所以，我正在寻找关于使用`pkg_resources.get_distribution`plus 的正确解决方案，如果最终有一个完整的解决方案可以从鸡蛋内部读取任何文件，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T17:08:31.233

Setuptools/distribute/pkg_resources 被设计成一种对标准 Python distutils 的透明覆盖，它非常有限，不允许以一种好的方式分发代码。

egg 只是将一堆 python 文件、数据文件和元数据放在一起的一种方式，有点类似于 Java JAR——但是即使没有 en egg 也可以从源代码安装 python 包（这是标准中不存在的概念分配）。

所以这里有两种情况：要么你是一个程序员，试图在库中使用某个文件，在这种情况下，为了从你的发行版中读取任何文件，你不需要它的完整路径——你只需要一个带有内容的打开文件对象，对吧？所以你应该做这样的事情：

```
from pkg_resources import resource_stream, Requirement
resource_stream(Requirement.parse("restez==0.3.2"), "restez/httpconn.py") 
```

这将返回您从包分发中请求的文件的一个打开的、可读的文件。如果是带拉链的鸡蛋，它将被自动提取。

请注意，您应该在 (restez) 中指定包名称，因为分发名称可能与包不同（例如，分发 Twisted 然后使用扭曲的包名称）。需求解析使用以下语法：[http ://setuptools.readthedocs.io/en/latest/pkg_resources.html#requirements-parsing](http://setuptools.readthedocs.io/en/latest/pkg_resources.html#requirements-parsing)

这应该足够了——一旦你知道如何从 egg 内部获取文件，你就不需要知道 egg 的路径。

如果你真的想要完整路径并且你确定你的 egg 是未压缩的，使用 resource_filename 而不是 resource_stream。

否则，如果您正在构建“打包工具”并且需要访问包的内容，无论是鸡蛋还是其他任何东西，您都必须自己手动完成，就像 pkg_resources 所做的[(pkg_resources source)](https://bitbucket.org/tarek/distribute/src/tip/pkg_resources.py?at=default)一样。没有用于“查询鸡蛋内容”的精确 API，因为没有用例。如果您是只使用库的程序员，请按照我的建议使用 pkg_resources。如果你正在构建一个打包工具，你应该知道把手放在哪里，仅此而已。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T19:06:04.850

用于加载模块的[`zipimporter`](http://docs.python.org/library/zipimport.html#zipimporter-objects)可以使用模块[`__loader__`](http://www.python.org/dev/peps/pep-0302/#specification-part-1-the-importer-protocol)上的属性访问，因此访问 egg 中的文件应该很简单：

```
__loader__.get_data('path/within/the/egg') 
```

# c# - SQL：比较两个日期时“关键字'WHERE'附近的语法不正确”

> ID：12735855
> 
> 赞同：1
> 
> 时间：2012-10-04T21:00:57.213
> 
> 标签：c#, sql-server

以下是我的 MS sql-server 语句，在我的 C# Windows 应用程序中使用。正如标题所示，它选择文本框日期之间的所有产品编号。我对 SQL 相当缺乏经验，所以我的尝试可能是一个暴行。SQL 似乎是这么认为的。

```
string strSQL = "SELECT * FROM HISTORY ORDER BY productNumber WHERE (@strt_date >= '" + Convert.ToDateTime(KHDate1Box.Text) + "' and @end_date <= '" + Convert.ToDateTime(KHDate2Box.Text) + "')"; 
```

SQL 错误消息：“关键字 'WHERE' 附近的语法不正确。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:02:27.593

```
string strSQL = "SELECT * FROM HISTORY ORDER BY productNumber WHERE (@strt_date >= '" + Convert.ToDateTime(KHDate1Box.Text) + "' and @end_date <= '" + Convert.ToDateTime(KHDate2Box.Text) + "')"; 
```

那是因为 WHERE 子句应该在*前面* `ORDER BY`

```
string strSQL = "SELECT * FROM HISTORY WHERE (@strt_date >= '" + Convert.ToDateTime(KHDate1Box.Text) + "' and @end_date <= '" + Convert.ToDateTime(KHDate2Box.Text) + "' ORDER BY productNumber)"  ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T21:02:27.233

```
"    SELECT * FROM HISTORY 
    WHERE (@strt_date >= '" + Convert.ToDateTime(KHDate1Box.Text) + "' and @end_date <= '" + Convert.ToDateTime(KHDate2Box.Text) + "')
    ORDER BY productNumber " 
```

order by 在 where 子句之后

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:04:45.313

我注意到您使用`@strt_date`and `@end_date`（它们是 T-SQL 变量）作为列名。此外，子句`ORDER BY`应该*在*`WHERE`子句之后。

* * *

*顺便说一句，您不*应该以这种方式编写查询代码的原因有很多。谷歌“SQL 注入”是一个非常令人大开眼界的安全问题。

而是使用参数化查询。它们更安全，更不容易出现由值字段中的无效字符引起的语法错误。

[http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T21:22:53.720

如果只是日期，则 SQL 注入的可能性不大，尤其是在您验证它的情况下。

如果必须将日期作为字符串传递给 SQL Server，则它应该采用明确的 YYYYMMDD 格式。但我也会将输入的验证添加为日期。

在那个声明之前有这个

```
CultureInfo provider = CultureInfo.InvariantCulture; 
```

然后，将其更改为

```
string strSQL = "SELECT * FROM HISTORY ORDER BY productNumber WHERE (@strt_date >= '" +
  DateTime.ParseExact(KHDate1Box.Text, "d", provider).ToString("yyyyMMdd")
  + "' and @end_date <= '" +
  DateTime.ParseExact(KHDate2Box.Text, "d", provider).ToString("yyyyMMdd") + "')"; 
```

捕获未能解析日期的错误。

参考：我使用了“d”，但这里是[标准日期时间格式的列表](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

# html - 覆盖css在IE中不起作用

> ID：12735860
> 
> 赞同：0
> 
> 时间：2012-10-04T21:01:15.217
> 
> 标签：html, css

我有一个带有 div 元素的 html 页面。打开modalpopup时隐藏页面实际上是css。它在 Firefox 中运行良好，但在 IE 6 中运行良好。任何人都可以建议。

```
<!DOCTYPE html>
<html>
<head>   
    <style type="text/css">
        .overlay1
        {
            position: fixed !important;     
            background-color: #000;       
            width: 100%;
            height: 100%;
            top: 0px;            
            left: 0px;
            bottom: 0px;
            right: 0px;
            padding: 0;
            margin: 0;            
            filter: alpha(opacity=20);
            opacity: 0.2;
            -moz-opacity: 0.2;
            -khtml-opacity: 0.2;
            -webkit-opacity: 0.2;
            z-index: 10004;            
        }
    </style>
</head>
<body>
    <div class="overlay1">
    </div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:08:58.620

一：IE6不支持`position:fixed;` 可能的解决方法：

```
* html .fixedBlock{
    position: absolute;
    top: expression(eval(document.body.scrollTop) + "px");
} 
```

另一个问题 - 据我所知，IE 6 的不透明度应该这样设置：

```
filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50); 
```

# ruby - 通过 Watir 测试地理位置？

> ID：12735867
> 
> 赞同：0
> 
> 时间：2012-10-04T21:01:33.083
> 
> 标签：ruby, testing, geolocation, watir

我想为我的应用程序创建 Watir 测试，它使用从地理位置获取的数据。但是，我希望测试能够更改地理位置数据，以便应用程序相信它正在恢复新信息。

是否可以使用 Watir 伪造地理位置？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:58:53.510

`geo.wifi.url`对于 Firefox，您可以通过设置选项来伪造您的位置。有关详细信息，请参阅[允许手动输入](https://stackoverflow.com/questions/1800990/geolocation-provider-for-firefox-that-allows-manual-input)的 Firefox 地理定位提供程序。

[因此，使用 Watir 的 Firefox 驱动程序设置该选项](http://watirwebdriver.com/firefox/)并伪造一个位置应该是可以的。

# c# - 使用 MEF 生成/打印自定义报告？

> ID：12735871
> 
> 赞同：0
> 
> 时间：2012-10-04T21:01:55.043
> 
> 标签：c#, .net-4.0, mef

我有一个为最终用户生成报告的应用程序。这些是`DevExpress XtraReports`。一个用户可能想要具有某种格式的某些字段的报告，而另一用户可能想要相同或更多不同格式的字段。而不是做类似的事情：

```
if(user == "")
   //print report for this user
   PrintReport(user);
else
  //print report for other user
  PrintReport(user) 
```

我认为在`MEF`这里使用并创建一些`IPrintReport`界面并`MEF`根据我的`PrintReport`方法的目录中的哪个程序集来管理应该打印哪个报告会很好。这是一个很好的使用场景，`MEF`还是有更好或更简单的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:17:55.330

我认为这是一种`MEF`可以用来解决您的问题的情况，但是我首先要问自己一个问题：

*   我是否需要在不重新编译您的主应用程序的情况下添加其他报告格式？

如果不是，我认为这`MEF`对于这种情况来说是多余的。我从使用`MEF`中看到的主要好处是我的应用程序的模块可以独立于主应用程序开发。我不需要重新发布我的整个应用程序来修复其中一个组件中的小错误。我可以简单地将我的新 .dll 放到一个文件夹中，我的应用程序将开始使用它。

如果您对上述问题的回答为“否”，我将不会使用`MEF`它。相反，我会创建`IPringReport`你提到的那个界面。所有实现此接口的类都可以在您的应用程序设置中列出，用户可以在其中选择所需的格式。如果您的用户不想处理选择格式的问题，您可以简单地使用一个设置文件为他们设置它。

# sockets - Matlab服务器程序错误

> ID：12735873
> 
> 赞同：1
> 
> 时间：2012-10-04T21:02:01.957
> 
> 标签：sockets, matlab

我是 Matlab 环境的新手

我尝试使用现有的 java 服务器套接字代码来实现 Matlab 套接字服务器这里是 Matlab 服务器的代码

```
import java.io.*;
import java.net.*;

    try 
        providerSocket = ServerSocket(4443, 10);

        System.out.println('Waiting for connection');
        connection = providerSocket.accept();
        System.out.println('Connection received from ');

        out =  ObjectOutputStream(connection.getOutputStream());
        out.flush();
        in =  ObjectInputStream(connection.getInputStream());
        sendMessage('Connection successful');

    catch ME 
```

这是我在matlab中执行时遇到的错误...

```
 error(ME.identifier, 'Connection Error: %s', ME.message)
    end

Connection Error: Java exception occurred:
java.net.SocketException: Unrecognized Windows Sockets
error: 0: JVM_Bind

at java.net.PlainSocketImpl.socketBind(Native Method)

at java.net.PlainSocketImpl.bind(Unknown Source)

at java.net.ServerSocket.bind(Unknown Source)

at java.net.ServerSocket.<init>(Unknown Source)

at java.net.ServerSocket.<init>(Unknown Source) 
```

谢谢大家帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:35:22.420

很可能其他一些套接字阻塞了端口 4443。如果使用不同的端口有效，那就是问题所在。获取[sysinternals](http://technet.microsoft.com/en-US/sysinternals)工具以查看打开了哪些端口 - 特别是[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437)。

# java - 在java中进行单元测试时如何跳过一段代码

> ID：12735874
> 
> 赞同：4
> 
> 时间：2012-10-04T21:02:02.083
> 
> 标签：java, unit-testing, integration-testing

我正在开发一个带有单元/集成测试的 Java Web 应用程序。应用程序被部署到 Jetty 并在运行 maven 的集成测试阶段时使用 H2 db。我有一个从无法迁移到 H2 db 的 dao 层调用的 oracle 函数，因此我想在运行测试用例时在代码中模拟/跳过这部分。

我想有一个标志可以判断我是否在测试模式下运行应用程序并将条件放入代码中，但对我来说看起来不像更清洁的方法。请建议实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:05:17.357

将 Oracle 本机调用提取到一个单独的类（可能是某些 DAO）中。将该 DAO 注入到使用它的类中。创建该 DAO 的第二个实现，不做任何事情来代替调用 Oracle。在集成测试期间注入后一种实现。

避免在代码中使用标志。如果您使用的是 Spring，请使用将选择性地创建一个实现或另一个实现的构建配置文件。

这就是依赖注入如何帮助您测试代码：如果您想模拟系统的某些部分，只需注入模拟版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:07:04.923

请使用一些好的 Mocking 框架，例如[mockito](http://code.google.com/p/mockito/)或[jMock](http://www.jmock.org/)或其他一些类似的模拟框架。

请注意：您可能需要重构代码以使其更具可测试性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T21:27:59.057

如果问题真的是：

> 在java中进行单元测试时如何跳过一段代码

那么我同意给出的答案。依赖注入、模拟框架绝对是进行真正单元测试的正确方法。

但是，如果问题是：

> 使用 JUnit（或其他单元测试框架）时如何跳过一段代码

然后我认为答案是“视情况而定”。有时我使用 JUnit 进行集成测试——我在测试服务器上运行的客户端代码片段，以省去通过 GUI 手动执行这些客户端测试的麻烦。在这种情况下，我使用系统属性，例如在我的基类中我有：

```
protected boolean skipTest()
{
    String port = System.getProperty("jersey.test.port");
    // don't run this test unless developer has explicitly set the testing properties
    // this is an integration test, not a unit test
    return port == null;
} 
```

然后在实际的测试类中它看起来像这样：

```
// verify a successful login
@Test
public void testLogin()
{
    if (skipTest())
       return;

    // do real test 
```

所以，我的想法是，如果你真的不能从你的 DAO 中重构 Oracle 的东西，那么你真的在做一个集成测试，在你的单元测试中有一个 skipTest 是可以的。

# c# - 删除/更新数据记录时在用户界面中处理并发

> ID：12735882
> 
> 赞同：0
> 
> 时间：2012-10-04T21:02:26.690
> 
> 标签：c#, entity-framework-5

我想知道在以下情况下我应该如何处理用户界面中的场景：

1.) 用户删除已被另一个用户删除的数据记录

当数据记录已被删除时，它将不再被删除，并且使用“从 Id = @IdToDelete 的表中删除”之类的内容不会发生任何不好的事情。

但是我不应该告诉我的用户：“抱歉，我们无法删除数据记录，因为它已经被用户 xyz 删除了”？？

2.) 用户更新已被另一个用户修改的数据记录？我是否应该为我的所有 update() 场景显示一个带有新值和旧值的窗口，让他选择或最终决定什么会赢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:25:26.150

1）信息从哪里来？如果您不记录谁删除了哪些记录，那么数据库不会告诉您此信息。

2）这取决于您的应用程序 - 在某些情况下“最后获胜”策略是可以的，而在某些情况下它是不可以的。如果有冲突，您可以决定您需要/想要做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:22:43.920

1) 一般来说，我不希望在这里向用户显示任何消息，因为他们要求完成的功能已经完成。

2) 这是您经常收到有关尝试更新显示给用户的已修改记录的警告的地方。如何显示该警告很大程度上取决于您的用户要求以及您希望显示的警告的复杂程度。最简单的解决方案是警告他们并要求他们刷新记录的本地副本，但这通常意味着他们需要重新进行更改，这对用户来说是一个挫折点。向他们展示冲突将是一个更好的用户体验，但可能会有点复杂，尤其是对于大型记录。

# count - 如何计算方案中给定数字的位数？递归和迭代

> ID：12735885
> 
> 赞同：1
> 
> 时间：2012-10-04T21:02:43.983
> 
> 标签：count, numbers, scheme, digits, recursive-datastructures

我知道如何计算数字的位数之和：

```
(define (sum-of-digits x)  
  (if (= x 0) 0
      (+ (modulo x 10) 
         (sum-of-digits (/ (- x (modulo x 10))
                           10)))))` 
```

但我只是不知道计算数字。而且也不知道如何通过线性迭代进展来做到这一点。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:13:46.140

你*非常接近*答案。

为了弄清楚如何将数字和变为数字计数，请尝试编写一些测试用例。测试用例必须包括调用函数的示例，以及预期的结果。

附带说明一下，这是*生成递归*的一个例子，你不应该解决它，直到你完成了一堆问题，比如“在列表中添加数字”、“计算列表中的元素”等.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:40:01.743

关于您的每个问题的一些提示：

1.  对于数字计数，您不需要添加*当前数字*（就像您的代码中的情况一样）。只需添加`1`
2.  有几种策略可以将递归解决方案（如您的解决方案）转换为尾递归（一种生成线性迭代进度的策略）。这是一个简短的列表：

    *   向函数添加一个额外的参数以保存到目前为止累积的结果
    *   第一次调用过程时传递累加器的初始值，通常这与您在“正常”（非尾递归）递归中在基本情况下返回的值相同。
    *   在递归的基本情况下返回累加器
    *   在递归步骤，用新值更新累积结果并将其传递给递归调用
    *   最重要的是：当调用递归时，请确保将其作为最后一个表达式调用，无需执行“额外工作”。

# javascript - javascript - 根据另一个数组中的位置仅对数组的某些元素进行排序

> ID：12735886
> 
> 赞同：2
> 
> 时间：2012-10-04T21:02:53.860
> 
> 标签：javascript, sorting

`orderArray`我有一个包含这些元素的数组（我们称之为）：
16 | 18 | 24 | 31 | 33

`workingArray`我有另一个包含这些元素的数组（我们称之为）：
16 | 53 | 24 | 58 | 31 | 18

`resultArray`可能如下：例如 [16, 53, 18, 24, 58, 31] 或 [16, 18, 53, 24, 58, 31 ]

resultArray 应该包含 workingArray 中的所有元素，但排序顺序与 orderArray 不冲突。
请注意

*   orderArray 和 workingArray 之间可以有不同的元素
*   元素在数组中是唯一的

如果已经有一个函数/库可以做到这一点，我会非常高兴 - 我已经尝试过`_.union`，但这并不能完成这项工作。

缺少一些已经制作的代码，实现这一目标的最简单算法是什么？

谢谢。

**编辑：** resultArray 中元素的排序顺序应尽可能少地更改 - 更改应严格执行，以免与 orderArray 中的顺序冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:16:06.027

大意：

```
orderArray.filter(inWorkingArray).concat(workingArray.filter(notInOrderArray)) 
```

（复制`orderArray`忽略不在工作数组中的项目，然后添加`workingArray`不在订单数组中的项目）

您可以使用它`indexOf`来测试成员资格，或者更有效的实现（使所有元素成为对象中的键，这会将它们隐式转换为字符串，从而使该优化不适用于非原始对象）。下面是 just 的最简单示例`indexOf`，它甚至可以推广到子数组等非原始对象：

```
var inWorkingArray = function(x) {return workingArray.indexOf(x)!=-1};
var notInOrderArray = function(x) {return orderArray.indexOf(x)==-1}; 
```

结果：

```
[16, 18, 24, 31, 53, 58] 
```

* * *

> *这是一个很好的解决方案，但是结果数组中元素的顺序不应该改变太多——我们应该尽量保持 workingArray 的顺序与原来的一样多——抱歉，我不是很清楚。请在问题中查看我的编辑。*--OP

问题仍然没有很好地定义，但这将根据 orderArray 对 workingArray 的子集进行排序，将 orderArray 中的元素留在原处：

```
var intersection = orderArray.filter(inWorkingArray);
var c=0;
workingArray.map(function(x){
    return notInOrderArray(x) ? x : intersection[c++];
}); 
```

结果：

```
[16, 53, 18, 58, 24, 31] 
```

# ruby-on-rails - JRuby Rails 应用程序的测试覆盖率计算

> ID：12735887
> 
> 赞同：2
> 
> 时间：2012-10-04T21:02:57.763
> 
> 标签：ruby-on-rails, jruby, code-coverage

我正在寻找一种工具来为我的 JRuby 支持的 Rails 应用程序生成代码覆盖率统计信息。我研究过[simplecov](https://github.com/colszowka/simplecov)之类的东西，但它们似乎不支持 JRuby。据我所知，没有一个“通用”库支持 JRuby。我还没有找到任何好的工具来为我做这件事。

我正在使用带有 Ruby 1.9.2 的 Rails 3.1.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:36:06.137

当前的 JRuby 覆盖库存在一个已知问题：http: [//jira.codehaus.org/browse/JRUBY-6106](http://jira.codehaus.org/browse/JRUBY-6106)。

正如问题状态所述，它已在 JRuby 1.7 中得到修复，该版本目前处于 RC 阶段，很快就会发布。

# javascript - 对基于 ColdFusion 的 Web 应用程序进行代码签名

> ID：12735891
> 
> 赞同：2
> 
> 时间：2012-10-04T21:03:08.343
> 
> 标签：javascript, html, coldfusion, code-signing

是否有工具和行业标准可以确保和验证补丁或系统更新的完整性。作为发布过程的一部分，有时我会向基于 ColdFusion/HTML/JS 的应用程序交付更新集。我的问题是我是否可以实际签署开箱即用的包或单个更新，然后在安装它们之前由 ColdFusion/应用程序服务器自动验证它们。

请注意，有时我需要对单个 JS 文件进行更新，有时需要对一组 ColdFusion、cfc/cfm 文件进行更新。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:16:22.077

对于完整性验证（不如代码签名强），我们使用[jacksum](http://www.jonelo.de/java/jacksum/index.html)。

以下是我们如何使用它：

*   我们使用 Ant 来创建发布，尽管因为 CF 不需要编译，所以这主要是复制和压缩文件的情况。
*   在构建期间，我们调用 jacksum 来运行我们即将发布的代码，并将应用程序中每个文件的校验和写入单个文件。我们将该文件命名为 xyzchk，其中 xyz 是我们的版本号。
*   生成的文件与其余代码一起提供。
*   我们的应用程序中有一个屏幕，它获取 .chk 文件（根据它认为正在运行的版本）并读取它。然后它读取/校验应用程序并报告任何不一致。本质上，我们在 CF 中重新实现了一个简单版本的 jacksum。我们也可以调用 jacksum 来进行检查。

这不如拥有一个签名的代码包那么强大，但我们试图防止的是部分部署和损坏。我们不这样做是出于强烈的安全原因：校验和文件与代码位于同一驱动器上，因此，如果您可以更改其中一个，则可以更改另一个，尽管当有人能够编辑您的应用程序的源代码时，您有更大的问题。

如果您想采用这种方法，我可以挖掘出我们使用的 jacksum 设置和 CF 代码以在文件上运行相同的校验和。

# java - 正确使用 VLCj

> ID：12735893
> 
> 赞同：2
> 
> 时间：2012-10-04T21:03:35.097
> 
> 标签：java, libvlc, vlcj

我尝试使用 VLCj 来访问网络摄像头。我正在使用这段代码：

```
public static void main(String[] args) {
    // Create player.
    MediaPlayerFactory mediaPlayerFactory = new MediaPlayerFactory();
    DirectMediaPlayer mediaPlayer = mediaPlayerFactory.newDirectMediaPlayer(
            320, 240, 
            new RenderCallback() {
                @Override
                public void display(Memory arg0) {
                    // Do nothing.
                }
         });

    // Options setup.
    String[] options = new String[]{};
    String mrl = "v4l2:///dev/video0"; // Linux

    // Start preocessing.
    mediaPlayer.startMedia(mrl, options);

    BufferedImage bufImg;
    for (int i = 0; i < 1000; ++i) {
        bufImg = mediaPlayer.getSnapshot();

        // Do something with BufferedImage...
        // ...
    }

    // Stop precessing.
    mediaPlayer.stop();
    mediaPlayer = null;

    System.out.println("Finish!");
} 
```

这段代码**部分有效**——我可以获得并使用`BufferedImage`，但是：

*   我**在输出时出错**：`[0x7f0a4c001268] main vout display error: Failed to set on top`
*   当主循环完成并且相机被禁用时，**程序没有完成**！我看到`Finish!`消息，但程序没有将控制权返回到 IDE 或控制台。

**UPD：** 我正在使用 openSUSE 12.2 x64，已安装 VLC 2.0.3，并且所有视频文件、库 VLCj 2.1.0 都可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T23:35:19.807

此代码正常工作：

```
public static void main(String[] args) {
    // Configure player factory.
    String[] VLC_ARGS = {
            "--intf", "dummy",          // no interface
            "--vout", "dummy",          // we don't want video (output)
            "--no-audio",               // we don't want audio (decoding)
            "--no-video-title-show",    // nor the filename displayed
            "--no-stats",               // no stats
            "--no-sub-autodetect-file", // we don't want subtitles
            "--no-inhibit",             // we don't want interfaces
            "--no-disable-screensaver", // we don't want interfaces
            "--no-snapshot-preview",    // no blending in dummy vout
    };
    MediaPlayerFactory mediaPlayerFactory = new MediaPlayerFactory(VLC_ARGS);

    // Create player.
    HeadlessMediaPlayer mediaPlayer = mediaPlayerFactory.newHeadlessMediaPlayer();

    // Select input device.
    String mrl = "v4l2:///dev/video0";  // Linux

    // Start processing.
    mediaPlayer.startMedia(mrl);

    BufferedImage bufImg;
    for (int i = 0; i < 1000; ++i) {
        bufImg = mediaPlayer.getSnapshot();

        // Do something with BufferedImage...
        // ...
    }

    // Stop processing.
    mediaPlayer.stop();

    // Finish program.
    mediaPlayer.release();
    mediaPlayerFactory.release();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:41:47.390

重新打开您的本机窗口：VLCj 打开 VLC 库的共享实例。

**无头媒体播放器不打算具有视频或音频输出！**

事实上，如果您需要播放任何东西（而不是流式传输到其他任何地方），您需要创建一个*输出窗口*或使用*直接媒体播放器*（可能要复杂得多）所以，如果一个无头播放器需要播放一些东西打开一个本地窗口来执行播放！

资料来源：[http ://www.capricasoftware.co.uk/wiki/index.php?title=Vlcj_Media_Players](http://www.capricasoftware.co.uk/wiki/index.php?title=Vlcj_Media_Players)

再次出现错误：**视频显示组件必须是**面板、窗口或添加到任何位置的顶部组件。否则会抛出错误

> 主 vout 显示错误：无法设置在顶部

此外，如果您在组件上放置任何东西，它会**破坏**无法再工作的视频输出！

无论如何，我不知道 DirectMediaPlayer 的详细工作原理，但 VLCj 有一些奇怪的行为......也许`getSnapshot()`需要一个视频显示组件，但我不确定。

重新您未完成的程序：您加入以完成自己的线程。这**是行不通**的，因为您的线程“休眠”，直到正在等待的另一个线程被终止，但由于这是您自己的线程，它“休眠”并且不会终止。您可以在 main 方法中使用此短代码测试此行为：

```
System.out.println("Test start");
Thread.currentThread().join();
System.out.println("Test stop"); 
```

您将**永远不会**达到“测试停止”声明。

# ruby - 无法理解 ruby 如何打印此哈希

> ID：12735894
> 
> 赞同：1
> 
> 时间：2012-10-04T21:04:03.550
> 
> 标签：ruby, hash

我是红宝石的新手，正在尝试一些小东西。所以这就是我所做的。

1.  我使用了 irb 并在其中创建了一个简单的哈希`sampleHash = {"One" => 1, "Two" => 2, "Three" => 3}`，但是当它存储它时（它会在您按下回车键后显示您的），这就是我得到`=> {"One"=>1, "Three"=>3, "Two"=>2}`的。同样，当我像这样打印出来时：`sampleHash.each do|count, num| print "#{count}: #{num} \n" end`我得到这个作为输出：

    ```
    One: 1 
    Three: 3 
    Two: 2 
    ```

2.  现在，我用编辑器试了一下，这是我写的：

    ```
    hashExample = {"One" => 1,
                   "Two" => 2,
                   "Three" => 3 }
    hashExample.each do|count, num|
      print "#{count}: #{num} \n"
    end 
    ```

    我得到这个作为输出：

    ```
    Three: 3 
    Two: 2 
    One: 1 
    ```

它如何存储`keys`and `values`？为什么它以不同的方式打印？我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:05:56.907

在 Ruby 1.9 之前，哈希是无序的。也就是说，将键插入散列的顺序与迭代散列时它们出现的顺序无关。

除了升级到 Ruby 1.9 之外，没有办法使用内置哈希来解决这个问题。如果您需要一个保持其键顺序的哈希，您可以使用[`ActiveSupport::OrderedHash`](http://apidock.com/rails/ActiveSupport/OrderedHash).

# c# - Streamwriter 有时会在一行中间切断我的最后几行？

> ID：12735897
> 
> 赞同：16
> 
> 时间：2012-10-04T21:04:19.063
> 
> 标签：c#, streamwriter

这是我的代码。：

```
FileStream fileStreamRead = new FileStream(pathAndFileName, FileMode.OpenOrCreate, FileAccess.Read, FileShare.None);
FileStream fileStreamWrite = new FileStream(reProcessedFile, FileMode.OpenOrCreate, FileAccess.Write, FileShare.None);

                StreamWriter sw = new StreamWriter(fileStreamWrite);

                int readIndex = 0;
                using (StreamReader sr = new StreamReader(fileStreamRead))
                {
                    while (!sr.EndOfStream) {
                        Console.WriteLine("eof" + sr.EndOfStream);
                        readIndex++;
                        Console.WriteLine(readIndex);
                        string currentRecord = "";
                        currentRecord = sr.ReadLine();
                        if (currentRecord.Trim() != "")
                        {
                            Console.WriteLine("Writing " + readIndex);
                            sw.WriteLine(currentRecord);
                        }
                        else {
                            Console.WriteLine("*******************************************spaces ***********************");
                        }
                    } 
```

它用一个测试文件和半行截断 2 行，然后用我正在运行的另一个测试文件截断 1 行和半行。

我不是您可能会看到的流媒体阅读器/作家专家。

任何想法或建议将不胜感激，因为这让我很生气。我确定是我错误地使用了这些。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-04T21:06:42.063

您缺少 Flush/Close 或只是`using`为了您的作家。

```
using(FileStream fileStreamWrite = 
  new FileStream(reProcessedFile, FileMode.OpenOrCreate, FileAccess.Write, FileShare.None);
{
  using(StreamWriter sw = new StreamWriter(fileStreamWrite))
  {
   // .... write everything here
  }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T21:08:36.517

`using`在语句的右大括号之后，执行以下操作：

```
sw.Flush();
sw.Close(); 
```

在那里，应该这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T21:06:12.037

你需要`Flush`你的`StreamWriter`. StreamWriter 有一个缓冲区，只有在缓冲区已满时才会写入磁盘。通过在最后刷新，您可以确保缓冲区中的所有文本都写入磁盘。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T21:22:45.557

除了其他答案（使用`using`，和/或`flush/close`）之外，他们会说他们实际上并没有回答这个问题：“为什么它可能会削减几行。”

我有一个关于主题的*想法*`StreamReader`，它与您使用和调用`EndOfStream` *两次*的事实有关 ：在一个`while`循环头中，另一个在它里面。

唯一可能了解是否`stream`结束的方法是**尝试**从中读取一些数据。所以我怀疑`EnfOfStream`这样做，并且阅读两次，可能会在流处理中产生问题。

要解决问题：

*   或者使用简单的[TextReader](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)，考虑到您正在阅读文本文件（在我看来）

*   或者将您的逻辑更改为仅调用一次，因此不再调用`Console.WriteLine("eof" + sr.EndOfStream);`

*   或者改变你的逻辑，所以根本不要使用`EndOFStream`，而是逐行阅读，直到该行是`null`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T21:34:37.830

您没有正确使用 StreamWriter。此外，由于您总是在阅读行，我会使用一种已经为您完成所有这些的方法（并正确管理它）。

```
using (var writer = new StreamWriter("path"))
{
   foreach(var line in File.ReadLines("path"))
   {
       if (string.IsNullOrWhiteSpace(line)) 
       { /**/ }
       else
       { /**/ }
   }
} 
```

... 或者 ...

```
/* do not call .ToArray or something that will evaluate this _here_, let WriteAllLines do that */
var lines = File.ReadLines("path")
                .Select(line => string.IsNullOrWhiteSpace(line) ? Stars : line);

var encoding = Encoding.ASCII; // whatever is appropriate for you.
File.WriteAllLines("path", lines, encoding); 
```

# salesforce - 如何创建具有特定 OwnerId 的自定义对象

> ID：12735901
> 
> 赞同：0
> 
> 时间：2012-10-04T21:04:29.137
> 
> 标签：salesforce, apex-code

我正在通过 apex 创建一些 salesforce 自定义对象，但这必须使用特定的 OwnerId（而不是运行代码的人）创建。问题是我无法编辑 OwnerId 属性

```
Answer__c.OwnerId = id 
```

此代码无法编译，我该如何实现？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:34:34.730

您能否更改共享规则中对象的父级控制。我认为这可能会解决这个问题。

# asp.net - Windows 身份验证使用机器名称自动进行，但不使用“.com”域

> ID：12735902
> 
> 赞同：0
> 
> 时间：2012-10-04T21:04:39.993
> 
> 标签：asp.net, windows-authentication

我试图更好地了解我们的 ASP.NET MVC 4 应用程序中的 Windows Auth 发生了什么。

它只是使用标准的 Windows 身份验证，当我通过机器名称从域上的工作站访问应用程序时：

```
http://product/ 
```

然后自动进行身份验证，并允许我通过。但是，如果我使用在我们的 DNS 中映射的主机名（到完全相同的内部 IP）访问同一台机器：

```
http://product.company.com 
```

然后我会看到我的 Windows 凭据的基本身份验证框。我可以输入它们并继续，但我想知道 - 为什么提示我在前者中输入我的凭据，而不是后者，我将如何纠正这个问题？

[编辑] 以下是 NSLOOKUP 的一些结果

```
C:\Users\me>nslookup
Default Server:  dnsserver.company.com
Address:  192.168.4.250

> product.company.com
Server:  dnsserver.company.com
Address:  192.168.4.250

Name:    producttest.company.com
Address:  192.168.5.106
Aliases:  product.company.com

> product
Server:  dnsserver.company.com
Address:  192.168.4.250

Name:    producttest.company.com
Address:  192.168.5.106
Aliases:  product.company.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:17:23.317

只需在浏览器选项中将您的站点添加到本地 Intranet 区域即可。

# sitecore - 根目录下的祖先的 Sitecore XPath 语法？

> ID：12735904
> 
> 赞同：1
> 
> 时间：2012-10-04T21:04:57.357
> 
> 标签：sitecore, sitecore6

> **可能重复：**
> [如何找到作为具有特定属性的元素的子元素的祖先或自我？](https://stackoverflow.com/questions/4341216/how-to-find-ancestor-or-self-that-is-a-child-of-an-element-with-particular-attri)

您如何选择仅比 Home 低一级的祖先？假设当前节点是 Home/ **News** /moreType/2010/09/NewsItem1，我想获取**News**。（在主页下可以有登陆部分页面，如新闻或其他类型的节点，如公共文件夹）到目前为止，我已经尝试过 -**在 XPath Builder 中运行查询，上下文节点设置为 NewsItem1** ：

*   `ancestor::*[position() = last() - 1]`语法错误，虽然 `ancestor::*[last()]`似乎返回 Home

*   `ancestor::*[@@parentid='{home guid}']`@@parentid 有问题，请参阅我的[其他问题和评论](https://stackoverflow.com/questions/12719704/does-parentid-attribute-work-in-sitecore-query)

*   `(ancestor::*[position() < last()])[last()]`语法错误

我要解决的问题是：在主页下找到任何“页面”的登陆部分父级，以突出导航菜单的目的。我参考了[Sitecore 查询语法](http://sdn.sitecore.net/Reference/Using%20Sitecore%20Query/Sitecore%20Query%20Syntax.aspx)（并学习了一些有趣的查询细节，就像`/ancestor-or-self::*[@#More Criteria Field#!='']/.[1]`实际工作一样），但我被困在这里。

感谢您的时间和投入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:02:21.103

看这里

[如何找到作为具有特定属性的元素的子元素的祖先或自我？](https://stackoverflow.com/questions/4341216/how-to-find-ancestor-or-self-that-is-a-child-of-an-element-with-particular-attri)

祖先或自我::*[父项::项[@key='根项的键']]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:02:26.143

```
ancestor::*[parent::Home] 
```

（抱歉，如果您使用的是不支持的 XPath 的一些非标准变体，那么我无法帮助您。- 如果不是 XPath 问题，请更改标题）。

# ruby-on-rails - 控制器规格中与 Factory Girl 的关联

> ID：12735914
> 
> 赞同：0
> 
> 时间：2012-10-04T21:05:20.380
> 
> 标签：ruby-on-rails, rspec, factory-bot

我是 RSpec 的新手，并试图在控制器规范中使用带有关联的 Factory Girl。困难在于：

*   在功能测试中必须使用“attributes_for”
*   attributes_for "[省略任何关联](https://github.com/thoughtbot/factory_girl/issues/359)"

所以如果我有这样的模型：

```
class Brand < ActiveRecord::Base
  belongs_to :org    
  validates :org, :presence => true
end

class Org < ActiveRecord::Base
  has_many :brands
end 
```

还有这样的工厂：

```
FactoryGirl.define do
  factory :brand do
    association :org
  end
end 
```

此控制器规范失败：

```
describe BrandsController do
  describe "POST create with valid params" do
    it "creates a new brand" do
      expect {
        post :create, brand: attributes_for(:brand)
      }.to change(Brand, :count).by(1)
    end
  end
end 
```

（如果我注释掉“validates :org, :presence => true”，它就会通过）

提出了许多解决方案，我认为我一直在犯一些简单的错误，这意味着我无法让它们中的任何一个起作用。

[1）根据此页面上的建议](https://github.com/thoughtbot/factory_girl/issues/359)将工厂更改为 org_id失败了许多测试，并出现“验证失败：组织不能为空白”

```
FactoryGirl.define do
  factory :brand do
    org_id 1002
  end
end 
```

2）使用“symbolize_keys”看起来很有希望。 [这里](https://stackoverflow.com/questions/5103572/factorygirl-attributes-for-not-giving-me-associated-attributes)和[这里](https://github.com/thoughtbot/factory_girl/issues/408)建议使用这样的代码：

```
(FactoryGirl.build :position).attributes.symbolize_keys 
```

我不确定如何在我的情况下应用它。下面是一个不起作用的猜测（给出错误 No route matches {:controller=>"brands", :action=>"{:id=>nil, :name=>\"MyString\", :org_id= >1052, :include_in_menu=>false, :created_at=>nil, :updated_at=>nil}"}):

```
describe BrandsController do
  describe "POST create with valid params" do
    it "creates a new brand" do
      expect {
        post build(:brand).attributes.symbolize_keys 
      }.to change(Brand, :count).by(1)
    end
  end
end 
```

**更新**

我几乎用 Shioyama 的回答在下面得到了这个，但得到了错误消息：

```
Failure/Error: post :create, brand: build(:brand).attributes.symbolize_keys
ActiveModel::MassAssignmentSecurity::Error:
  Can't mass-assign protected attributes: id, created_at, updated_at 
```

因此，在[这个问题](https://stackoverflow.com/questions/5103572/factorygirl-attributes-for-not-giving-me-associated-attributes/11438545#11438545)之后，我将其更改为：

```
post :create, brand: build(:brand).attributes.symbolize_keys.reject { |key, value| !Brand.attr_accessible[:default].collect { |attribute| attribute.to_sym }.include?(key) } 
```

哪个有效！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:30:30.007

在您的解决方案 2）中，您没有传递一个动作，`post`这就是它抛出错误的原因。

尝试将该块中的代码替换`expect`为：

```
post :create, brand: build(:brand).attributes.symbolize_keys 
```

# java - Java 石头剪刀布循环

> ID：12735915
> 
> 赞同：2
> 
> 时间：2012-10-04T21:05:21.083
> 
> 标签：java

我必须制作一个剪刀石头布程序，让用户输入一个选项，然后根据计算机的选择对其进行测试。每场比赛结束后，它应该询问玩家是否要继续，他们应该输入'Y'或'N'以继续或退出。我能想到的最好的就是一个while循环，除了最后一点，一切都很好。

```
import java.util.Scanner;

public class rockpaperscissors {
    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);
        char cont = 'y';

        while (cont == 'y'){        
            int com = (int)(Math.random() * 3);

            System.out.println("Paper (0), Rock (1), or Scizzors (2)?");
            int hum = input.nextInt();

            if (com==(hum))  
                System.out.println("It's a tie!");

            else if (hum == 0)
            {
                if (com == 1)
                    System.out.println ("You chose paper, computer chose rock You Win!");
                else if (com == 2)
                    System.out.println ("You chose paper, Computer chose scissors You Lose!");
            }

            else if (hum == 1)
            {
                if (com == 2)
                    System.out.println ("You chose Rock, computer chose scissors You Win!");
                else if (com == 0)
                    System.out.println ("You chose Rock, Computer chose paper You Lose!");
            }

            else if (hum == 2)
            {
                if (com == 0)
                    System.out.println ("You chose Scissors, computer chose paper You Win!");
                else if (com == 1)
                    System.out.println ("You chose Scissors, Computer chose rock You Lose!");
            }

            System.out.println("Would you like to continue? (Y/N)");
            cont = input.nextLine().charAt(0);
        }       
    }
} 
```

当我运行它时，循环运行良好，游戏已开始，但随后出现“字符串超出索引范围”错误。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:08:48.870

您`nextInt()`只需从输入缓冲区中读取数字，并将新行留在其中。因此，当您打电话时，`input.nextLine()`您会得到一个空行 - 号码后第一行的其余部分。您应该阅读下一行并确保它不为空。如果是，请再读一遍。

顺便说一句，您计算谁获胜的代码有点麻烦。如果我是你，我会尽量让它更一般和更干净。考虑一个可以处理更复杂游戏的解决方案，例如[石头剪刀布蜥蜴Spock](http://en.wikipedia.org/wiki/Rock-paper-scissors-lizard-Spock)，而无需添加太多代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:10:34.207

当您从用户那里得到答案时，您不会阅读下一行，因此扫描仪仍然有一个换行符。然后，当您阅读时，`nextline`您会阅读该新行，因此没有`charat(0)`.

改变：

```
cont = input.nextLine().charAt(0); 
```

至：

```
cont = input.next().charAt(0); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T17:19:48.270

```
package rockpaper;

import java.util.Scanner;

/**
 *
 * @author Allen E.
 */

public class RockPaper {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
       int rock = 0;
       int paper = 1;
       int Scissors = 2;

       int user = 0;
       int computer = 0;
       int gamesplayed = 0;

       Scanner scan = new Scanner(System.in);

         while (gamesplayed < 3)
                 {

       System.out.println("Rock = 0 , Paper = 1, Scissors = 2");
        String userinput = scan.nextLine();

        int convertinput = Integer.valueOf(userinput);
        int Computerinput = (int)(Math.random()*3);

       if (Computerinput == 1 && convertinput == 0)
       {
           System.out.println("Paper beats Rock " + 
                   "\nThe computer won");
           gamesplayed++;
           computer++;
       }
       else if (convertinput == 1 && Computerinput == 0)
       {
           System.out.println("Paper beats Rock " + 
                   "\nYou Win!");
           gamesplayed++;
           user++;
       }
     if (Computerinput == 0 && convertinput == 2)
     {
         System.out.println("Rock beats Scissors " +
                 "\nThe computer won");
         gamesplayed++;
         computer++;
     }
     else if (convertinput == 0 && Computerinput == 2)
     {
         System.out.println("Rock beats Scissors " +
                 "\nYou Win!");
         gamesplayed++;
         user++;
     }

     if (Computerinput == 2 && convertinput == 1)
     {
         System.out.println("Scissors beats Paper " +
                 "\nThe computer won");
         gamesplayed++;
         computer++;
     }
     else if (convertinput == 2 && Computerinput == 1 )
     {
         System.out.println("Scissors beats Paper " +
                 "\nYou Win");
         gamesplayed++;
         user++;
     }

     /*************************************************
      *                                               *
      *                                               *
      *                 Handling a tie                *
      *                                               *
      *                                               *  
      *************************************************/

     if (Computerinput == 0 && convertinput == 0)
     {
         System.out.println("Rock ties Rock " +
                 "\nTie");

     }
     if (Computerinput == 1 && convertinput == 1)
     {
         System.out.println("Paper ties Paper " +
                 "\nTie");

     }
     if (Computerinput == 2 && convertinput == 2)
     {
         System.out.println("Scissors ties Scissors " +
                 "\nTie");

    }/*End of While Loop*/

     }
    }
} 
```

# jquery - jaquery UI选项卡中的rails数据表在部分加载后初始化数据表

> ID：12735927
> 
> 赞同：0
> 
> 时间：2012-10-04T21:06:31.523
> 
> 标签：jquery, ruby-on-rails, datatables

我试图在 jquery UI 选项卡内的表上设置数据表，但它不起作用，我没有看到表中有任何变化，没有搜索框，没有分页。

javascript错误控制台中也没有错误。

所有的javascript文件都是有序的（先是jquery，然后是jquery ui，然后是咖啡脚本）

我还尝试通过javascript控制台调用数据表，即我 `$('#list').dataTable();` 在javascript控制台中执行，它返回了节点但什么也没发生！

任何人都可以帮我解决这个问题吗？

如果有帮助，我还应该在这里发布任何内容吗？ **更新：** 如果我删除数据表初始化程序并手动调用它，它正在工作。我认为问题是 dataTable 在部分加载之前被初始化。

获取部分后如何初始化数据表？

`$ -> $("#tabs").tabs ajaxOptions: error: (xhr, status, index, anchor) -> $(anchor.hash).html "Couldn't load this tab."` 以上是我的 Jquery UI 选项卡的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:31:26.703

我通过使用加载回调来修复它，在该回调中我初始化了新 ajax 获取的表上的数据表。

```
$ ->
  $("#tabs").tabs
    event: "mouseover"
    load: (event, ui) ->
      if $(ui.panel.children[0]).attr("id") is "list"
        $(ui.panel.children[0]).dataTable
          sPaginationType: "full_numbers"
          bJQueryUI: true

    ajaxOptions:
      error: (xhr, status, index, anchor) ->
        $(anchor.hash).html "Couldn't load this tab." 
```

# ruby-on-rails - how to overwrite embeds_many in inherited model in Mongoid?

> ID：12735928
> 
> 赞同：1
> 
> 时间：2012-10-04T21:06:32.523
> 
> 标签：ruby-on-rails, mongoid

I am using mongoid in Rails 3 and I came across this problem:

Let's say I have a Shape model:

```
class Shape
  include Mongoid::Document
  field :x, type: Integer
  field :y, type: Integer
  embedded_in :canvas
end 
```

And a Canvas model (has many Shapes):

```
class Canvas
  include Mongoid::Document
  field :name, type: String
  embeds_many :shapes
end 
```

Then a Canvas model "has many Shapes".

I have Browser model inherited from Canvas:

```
class Browser < Canvas
  field :version, type: Integer
end 
```

Then Browswer model should "has many Shapes" now.

But, now I have a "Circle" model inherited from Shape:

```
class Circle < Shape
  field :radius, type: Float
end 
```

And I want to let Browser model to "has many Circles" instead of "has many Shapes". That is to say, I want to overwrite the "has many" relationship in Browser model from "has many Shapes" to "has many Circles".

How should I do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:23:18.627

I'm not 100% sure, but I think you would just add the line for `embeds_many :circles` to the Browser model. You wouldn't need to remove the inherited relation.

Since Circle inherits from Shape, circles will get stored in an array stored in the "shapes" key in the Browser document anyway, they'll just have their _type attribute set to "Circle". In other words, having the `embeds_many :shapes` relation doesn't create anything in the DB that embedding many circles wouldn't create anyway.

It will, however, mean that you have methods such as `Browser.frist.shapes` available, but you can simply ignore these. Adding the `embeds_many :circles` will give you the methods for that relation, such as `Browser.first.circles`.

# css - 窗口变小时 CSS 会发生变化

> ID：12735936
> 
> 赞同：0
> 
> 时间：2012-10-04T18:02:11.870
> 
> 标签：css, mobile

我的 wordpress 网站遇到了问题。当窗口尺寸变小时，特别是在移动浏览场景中，字体大小增加到 16px，#wrap 宽度从 960px 更改为 460px。

我们希望将整个网站保持在 960 像素的最小值，作为移动浏览问题的快速解决方案，同时我们花时间实施更长期的事情。

问题是，这种变化反映在使用 FireBug 验证的 CSS 中

这是有问题的网站：http: [//turbulentlabs.com](http://turbulentlabs.com)

我已经尝试在 CSS 中覆盖它，但它并不需要。这里有点死胡同，甚至不知道要问什么而不是太笼统。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:02:06.797

我建议使用 Firebug 或 Chrome 开发人员工具来查看“缩小”窗口中的 css。该主题可能在其 css 中内置了媒体查询。

有点讽刺的是，响应式 css 是一个“问题”，看到它是未来的浪潮......写主题的人可能会说“这不是一个错误，它是一个功能”！

为了保持静态，您可以删除或注释掉媒体查询 - 但请仔细查看 css，因为酷孩子说要使用移动优先布局构建页面，然后随着屏幕尺寸变宽而对其进行详细说明。

快速/肮脏的解决方案是自己删除媒体查询（假设它们从窄开始并扩展到 960 ......）。保留媒体查询的 css*内容*，只需删除媒体查询语句及其 {}。您可能会对同一个选择器进行多次更改，但是嘿，这就是快速/肮脏所涉及的......哦，请确保您备份未修改的 css，以防万一一切都变糟了！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:44:41.163

您的问题在`style.css`第 2100 行附近。以下是相关行：

```
@media screen and (max-width: 524px)
#wrap {
width: 460px;
padding: 0px 16px;
} 
```

看到了`max-width`吗？这意味着它会在屏幕（窗口）小于 524px 时触发。删除它，您将删除您的响应式主题操作。

编辑添加：如果您查看 firebug，它会告诉您每种样式调用了哪些行和哪些 css 文件。当被调用的样式发生变化时，这些行将发生变化。您可能需要将萤火虫拉到它自己的窗口中才能更容易地看到它。

# advanceddatagrid - 关于缩放的 AdvancedDataGrid 宽度问题

> ID：12735948
> 
> 赞同：1
> 
> 时间：2012-10-04T21:07:15.410
> 
> 标签：advanceddatagrid

关于 Flex 4 缩放行为，我需要立即获得帮助。

问题：在我们的项目中，我们有自定义 ADG (AdvancedDataGrid) 和底部的缩放器控件来控制它的缩放，缩放值直接绑定到 ADG 的 scaleX 和 scaleY 属性，我们最近将 flex 3 项目迁移到 flex 4 sdk （仅编译，其余代码仍在使用 flex 3 MX 组件），在 flex 3 中一切正常，用于增加和减少 ADG 放大率的缩放器控件，但在 flex 4 迁移之后，放大率正在发生，但ADG 的可见宽度也发生了变化，这导致在缩小的情况下出现空白空间（在右侧），在放大的情况下出现额外的水平滚动条。这不会发生在高度上。身高总是占100%。

我比较了 flex 3 和 flex 4 中的 UIComponent 类，发现 set scaleX/scaleY 方法存在显着差异，也许这种变化导致了这种行为变化。

请建议/帮助！

谢谢阿布舍克

# c# - DropDownList 不接受我试图分配的 SelectedIndex

> ID：12735949
> 
> 赞同：2
> 
> 时间：2012-10-04T21:07:19.770
> 
> 标签：c#, asp.net, .net

我很难弄清楚这一点，我希望你们能帮助我。

我有一个名为 a 的页面`Index.aspx`，`DropDownList`它是一个单独的`UserControl`类（因为它将在其他页面中使用）。这是代码：

UcSelecionarLocal.ascx：

```
<%@ Control Language="C#" AutoEventWireup="true" 
    CodeBehind="UcSelecionarLocal.ascx.cs" 
    Inherits="QuickMassage.uc.UcSelecionarLocal" %>
<asp:DropDownList ID="ddlLocais" runat="server" 
                  CssClass="span4 dropdown-toggle" AutoPostBack="true">
</asp:DropDownList> 
```

UcSelecionarLocal.ascx.cs：

```
public partial class UcSelecionarLocal : UserControl {

  protected void Page_Load(object sender, EventArgs e) {
      if (!this.IsPostBack) {
          PreencherLocais();
      }
  }

  private void PreencherLocais() {
     ddlLocais.Items.Clear();
     ddlLocais.Items.Add(new ListItem("Selecione", "0"));
     ControleLocal controle = new ControleLocal();
     DataTable tab = controle.ListarLocais();
     foreach (DataRow row in tab.Rows) {
        ddlLocais.Items.Add(new ListItem(row["Descricao"].ToString(), 
                                         row["ID"].ToString()));
     }
  } 
```

}

此控件已正确放置`Index.aspx`并加载其值。包含它的表单将操作设置为`agendamentos.aspx`。当我更改 时`ddlist`，该页面将按原样提交到表单操作页面。

在另一页上，问题开始了：我将参数发布到此页面，其中一个是`ddlist`值。在即时窗口中，我检查了该值，它就在那里，假设它是 1。

长话短说，我有这个代码：

议程.aspx.cs：

```
protected void Page_Load(object sender, EventArgs e) {
        DropDownList locais = ObterComponenteListaLocais();
        try {
            locais.SelectedIndex = 
              int.Parse(HttpContext.Current.Request["ucSelLocal$ddlLocais"]);
        } 
```

在调试时，我看到它`locais.SelectedIndex`是-1。分配后它保持-1。页面加载，然后我`ddlist`再次将值更改为 2。在调试上面的相同代码时，我看到`locais.SelectedIndex`现在是 1。同样，将它设置为 2，就像通常那样，不会产生任何效果。如果我将`ddlist`再次更改为 3，则`SelectedIndex`变为 2 并且不采用值 3。

换句话说：新加载的页面中索引的值是之前加载的页面的值。

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:02:21.970

这是因为 Page_Load 事件在加载用户控件之前在您的页面中触发。做这个：

```
public partial class UcSelecionarLocal : UserControl
{

    protected void Page_Load(object sender, EventArgs e)
    {
    }

    public void PreencherLocais()
    {
        ddlLocais.Items.Clear();
        ddlLocais.Items.Add(new ListItem("Selecione", "0"));
        ControleLocal controle = new ControleLocal();
        DataTable tab = controle.ListarLocais();
        foreach (DataRow row in tab.Rows)
        {
            ddlLocais.Items.Add(new ListItem(row["Descricao"].ToString(), row["ID"].ToString()));
        }
    }
} 
```

然后在您的 aspx 页面中：

```
protected void Page_Load(object sender, EventArgs e) 
{
        if (!IsPostBack)
            this.idOfYourUserControl.PreencherLocais();

        DropDownList locais = ObterComponenteListaLocais();
        try {
            locais.SelectedIndex = 
              int.Parse(HttpContext.Current.Request["ucSelLocal$ddlLocais"]);
        }
} 
```

另外，因为您的问题有点令人困惑，重要的一点是 Page_Load 在从回发数据的控件捕获数据之前触发。所以这是一个获取他们信息的不好的地方，因为它将是以前的样子。这就是为什么您需要创建一个函数，该函数会在加载控件数据后执行按钮单击之类的操作。

# sql - 具有多个 ID 的 SQL 选择

> ID：12735951
> 
> 赞同：2
> 
> 时间：2012-10-04T21:07:23.857
> 
> 标签：sql

我有一个包含三个字段的地址历史记录表：`EmpID`、`Address`、`AddrID`。

每次添加新地址时，我也会`AddrID`将该特定员工的地址 ID ( ) 加 1。

```
EmpID | AddrID | Address
-------------------------------
 1    |     1  | 1234 First Ave
 1    |     2  | 2145 First Ave
 1    |     3  | 1111 First Ave

 2    |     1  | 1001 Second St
 2    |     2  | 1002 Second St
 2    |     3  | 1003 Second St
 2    |     4  | 2222 Second St

 3    |     1  | 3332 Third Lane
 3    |     2  | 3333 Third Lane

 4    |     1  | 4444 Fourth Way 
```

如何获取每位员工的最新地址（最高地址 ID）？理想情况下，我应该能够返回：

```
EmpID | AddrID | Address
-------------------------------
 1    |     3  | 1111 First Ave
 2    |     4  | 2222 Second St
 3    |     2  | 3333 Third Lane
 4    |     1  | 4444 Fourth Way 
```

到目前为止，我返回的结果要么太多（即，每个员工、每个 AddrID 1 以及与这两者关联的每个地址），要么返回的结果太少（即，每个具有 AddrID 4 的员工 - 只有员工 2）。

我尝试使用`Distinct`, `Group By`, `Order By`,`Having`和 Self-Joins 无济于事。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T21:11:29.690

您可以使用子查询来获取`MAX()`每个 empid 的地址：

```
select t1.empid,
  t1.addrid,
  t1.address
from table1 t1
inner join
(
  select max(addrid) addrid, empid
  from table1
  group by empid
) t2
  on t1.empid = t2.empid
  and t1.addrid = t2.addrid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/be2e1/1)

内部查询将返回最大值`addrid`，`empid`然后您将表加入到这两个值的结果中，这将限制返回的记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T21:14:40.983

以下应该有效：

```
SELECT * 
FROM   (SELECT empid, 
               Max(addrid) AS AddrID 
        FROM   t1 
        GROUP  BY empid) a 
       JOIN t1 b 
         ON b.empid = a.empid 
            AND b.addrid = a.addrid 
```

看到它在[行动](http://sqlfiddle.com/#!2/0b864/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:11:50.710

我可能会以不同的方式组织表格，但您可以使用子连接做一些事情

```
 select * from address_history 
    join 
    (select EmpID, max(AddrID) max_address from Address_History group by empId) as latest_addresses 
       on address_history.empid = latest_addresses 
       and address_history.addrId = latest_addresses.max_address 
```

# entity-framework - EF Code First 中的继承映射？

> ID：12735953
> 
> 赞同：0
> 
> 时间：2012-10-04T21:07:49.150
> 
> 标签：entity-framework, inheritance, ef-code-first, mapping

我有一个类继承自另一个基于 2 个鉴别器的类。

我想做类似的事情：

```
Map<FineStatusTypePaidFull>(
  m => m.Requires("LookupKey")
        .HasValue("FineStatusType") && ("LookupCode")
        .HasValue("PIF"); 
```

但我还没有找到任何东西......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:04:17.800

我在以下链接中找到了答案。显然，EF 5.0 中的错误尚未修复

[Entity Framework 4.3 - TPH 映射和迁移错误](https://stackoverflow.com/questions/9499702/entity-framework-4-3-tph-mapping-and-migration-error/12737082#12737082)

# javascript - 使用 Ajax 更改网页内容

> ID：12735957
> 
> 赞同：0
> 
> 时间：2012-10-04T21:08:07.607
> 
> 标签：javascript, html, ajax

我正在寻找使用 Javascript AJAX 动态更新网页内容的最佳方式。

我的第一个想法是将各种`div`布局存储在各种文件中，每个布局描述不同的页面，例如：

BasicDiv.div：

```
<div>
    <p>Some Text</p>
    <button> A Button </button>
</div> 
```

- 然后在主网页内创建一个空`div`的内容将被更新，然后我制作一个`XMLHttpRequest`并`div.innerHtml`使用从所需文件加载的数据进行更新。

这是使用 AJAX 的好方法还是您有更好的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T21:09:52.850

jQuery ajax

```
$.ajax({
  url: "test.php",
  type: "POST",
  data : { var:'val1',var2:'val2' }
}).done(function() { 
  $("<div>").innerHTML("done");
}); 
```

# javascript - 要查找的 Javascript 正则表达式 我正在使用这个正则表达式来尝试查找看起来像这样的链接，并将它们替换为仅链接的开始和结束标记之间的内容。 正则表达式： /]*>([^<]*)<\/a>/mg 我在示例代码上测试了正则表达式并且它可以工作，但是当我尝试 问问题 问问题 2012-10-04T21:08:10.823 1860 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用这个正则表达式来尝试查找看起来像这样的链接，并将它们替换为仅链接的开始和结束标记之间的内容。 正则表达式： /]*>([^<]*)<\/a>/mg 我在示例代码上测试了正则表达式并且它可以工作，但是当我尝试在 object.innerHTML 上应用它时它不会替换任何东西。怎么了？ 编码： document.getElementById(preview_div_ID).innerHTML.replace(/]*>([^<]*)<\/a>/mg, '$1'); document.write(document.getElementById(preview_div_ID).innerHTML); 上面“document.getElementById(preview_div_ID).innerHTML”中的一些示例 html：

##### Ost- (caseous) [nekros](javascript:;)

任何帮助深表感谢 已解决：它的工作方式是：函数的ajax调用必须返回一些东西，您可以使用回调函数对其进行解析。所以一旦我的 ajax 调用开始吐出数据。我很好。 全部发送。 javascriptregexhyperlinkreplace 4 3 回答 3 This answer is useful 5 试试这个： var links = document.getElementsByTagName("a"); for( var link in links ){ if( links[link].getAttribute("class").indexOf("tag_link") != -1 ){ var oldLink = links[link]; var newLink = document.createElement("a"); var newLink.innerHTML = oldLink.innerHTML; oldLink.parentNode.insertBefore(newLink , oldLink); oldLink.parentNode.removeChild(oldLink); } } 它将遍历所有具有类名“tag_link”的链接，然后删除它们的所有属性，同时保留链接文本。如果您通过 id 将其更改为单个元素，只需使 foreach 循环以单个 dom 元素为目标。像这样： function stripAnchor(anchorId){ var oldLink = document.getElementById(anchorId); var newLink = document.createElement("a"); var newLink.innerHTML = oldLink.innerHTML; oldLink.parentNode.insertBefore(newLink , oldLink); oldLink.parentNode.removeChild(oldLink); } 于 2012-10-04T21:14:48.510 回答 This answer is useful 2 代替 document.getElementById(preview_div_ID).innerHTML.replace(/]*>([^<]*)<\/a>/mg, '$1') document.write(document.getElementById(preview_div_ID).innerHTML); 它应该是 document.getElementById(preview_div_ID).innerHTML = document.getElementById(preview_div_ID).innerHTML.replace(/]*>([^<]*)<\/a>/mg, '$1') 于 2012-10-04T21:12:11.197 回答 This answer is useful 0 这可以通过让 JS 从您的 HTML 创建 DOM 元素来解决。为了简单起见，我将在我的回答中使用 jQuery。 var $code = $('

##### Ost- (caseous) [nekros](javascript:;)

'); $code.find('a').replaceWith(function () { return $(this).text(); }); 请注意，此代码未经测试 于 2012-10-04T21:13:58.933 回答 Related 1 spring - TestNG + Spring + Maven = 无法加载上下文 1 c# - 在两种状态之间切换 - 优雅的方式 1 javascript - 脱机工作时清单文件在 ipad 设备上不起作用 2 javascript - 如何将 xsl 变量作为参数传递给脚本标签中的 javascript 函数？ 6 java - 在构造函数中初始化 1 asp.net-mvc-3 - ASP.NET MVC 3 中 ModelState.IsValid 的限制 1 drupal - Drupal 7 ubercart 产品套件的产品套件 1 android - 继续使用启动时启动的应用实例 12 ios - UIDatePicker 中的最小和最大日期 8 php - 在 PHP 中将段落分解为句子 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12735958
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, regex, hyperlink, replace

我正在使用这个正则表达式来尝试查找看起来像这样的链接，并将它们替换为仅链接的开始和结束标记之间的内容。

正则表达式：

```
/<a class="tag_link"[^>]*>([^<]*)<\/a>/mg 
```

我在示例代码上测试了正则表达式并且它可以工作，但是当我尝试在 object.innerHTML 上应用它时它不会替换任何东西。怎么了？

编码：

```
document.getElementById(preview_div_ID).innerHTML.replace(/<a class="tag_link"[^>]*>([^<]*)<\/a>/mg, '$1');
document.write(document.getElementById(preview_div_ID).innerHTML); 
```

上面“document.getElementById(preview_div_ID).innerHTML”中的一些示例 html：

```
<h5 style="line-height: 9px; margin: 2px; ">
            <span style="font-size: 7px; line-height: 8px; ">
                Ost- (caseous) <a class="tag_link" href="javascript:;" onclick="open_tag('nekros', this);">nekros</a>
            </span>
        </h5> 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T21:14:48.510

试试这个：

```
var links = document.getElementsByTagName("a");
for( var link in links ){
 if( links[link].getAttribute("class").indexOf("tag_link") != -1 ){
  var oldLink = links[link];
  var newLink = document.createElement("a");
  var newLink.innerHTML = oldLink.innerHTML;
  oldLink.parentNode.insertBefore(newLink , oldLink);
  oldLink.parentNode.removeChild(oldLink);
 }
} 
```

它将遍历所有具有类名“tag_link”的链接，然后删除它们的所有属性，同时保留链接文本。如果您通过 id 将其更改为单个元素，只需使 foreach 循环以单个 dom 元素为目标。像这样：

```
function stripAnchor(anchorId){
  var oldLink = document.getElementById(anchorId);
  var newLink = document.createElement("a");
  var newLink.innerHTML = oldLink.innerHTML;
  oldLink.parentNode.insertBefore(newLink , oldLink);
  oldLink.parentNode.removeChild(oldLink);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:12:11.197

代替

```
document.getElementById(preview_div_ID).innerHTML.replace(/<a class="tag_link"[^>]*>([^<]*)<\/a>/mg, '$1')
document.write(document.getElementById(preview_div_ID).innerHTML); 
```

它应该是

```
document.getElementById(preview_div_ID).innerHTML = document.getElementById(preview_div_ID).innerHTML.replace(/<a class="tag_link"[^>]*>([^<]*)<\/a>/mg, '$1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:13:58.933

这可以通过让 JS 从您的 HTML 创建 DOM 元素来解决。为了简单起见，我将在我的回答中使用 jQuery。

```
var $code = $('<h5 style="line-height: 9px; margin: 2px; ">
            <span style="font-size: 7px; line-height: 8px; ">
                Ost- (caseous) <a class="tag_link" href="javascript:;" onclick="open_tag(\'nekros\', this);">nekros</a>
            </span>
        </h5>');

$code.find('a').replaceWith(function () {
    return $(this).text();
}); 
```

请注意，此代码未经测试

# ruby-on-rails - 生成带有动态前缀的 RESTful 路由

> ID：12735961
> 
> 赞同：0
> 
> 时间：2012-10-04T21:08:15.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, routing

我有一个用 Rails 3.2.8 编写的电子商务网站，它出售音乐活动的门票。到目前为止，我一直在应用程序中使用简单的 RESTful 路由：

```
/ => default route: /events
/events
/events/1
/events/1/new
/events/2
... 
```

过去所有事件都发生在同一个地方，但从现在起将有两个地方，比如说“Morumbi”和“Maracanã”。*地点*是应用程序中的一个模型，它是事件之间非常重要的区别。所以我想让地名成为路径的一部分，并有这样的路线：

```
/ => default route: page to choose place
/morumbi => same as /morumbi/events
/morumbi/events/1
/morumbi/events/1/new
/maracana => same as /maracana/events
/maracana/events/2
... 
```

虽然我知道如何使用该`#match`方法来做到这一点，但我已经使用更易于维护的`#resources`方法创建了大量路线，我想保留它们。

您知道避免使用的解决方案`#match`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:11:47.997

您需要使用以下`#scope`方法：

```
scope path: ':place_name', as: 'place' do
  resources :events
  ...
end 
```

所以`GET /morumbi/events/1`会`EventsController#show`用参数`id: '1'`和调用`place_name: 'morumbi'`。

# ios - 使用 Facebook SDK 3.1 同时支持 iOS 5 和 iOS 6

> ID：12735962
> 
> 赞同：3
> 
> 时间：2012-10-04T21:08:19.970
> 
> 标签：ios, facebook, ios5, ios6

我有一个应用程序，目前支持使用旧的 Facebook SDK for iOS 通过提要对话框发布到 Facebook。

更新到适用于 iOS 的 Facebook SDK 3.1 后，我似乎可以：

1.  使用旧式 API ( `Facebook.h`, 实例化 a `Facebook`, 调用`dialog:...`)
2.  *或*使用新风格的 API ( `FacebookSDK.h`, 使用 shared `FBSession`, native 对话框)

不同的头文件发生冲突，看起来完全不兼容。

我可以两者都做吗？如果是这样，那怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T23:50:02.707

只需包含 Facebook.h。首先，将 DeprecatedHeaders 文件夹复制到您的 Frameworks 项目中。DeprecatedHeaders 位于 ~/Documents/FacebookSDK/FacebookSDK.frameworks/Versions/A/ 下。当您复制它时，不要将这些项目复制到您的项目中，因此它们会保持复制作为参考。

接下来，在您拥有的代码中：

```
#import <FacebookSDK/FacebookSDK.h> 
```

替换为：

```
#import "Facebook.h" 
```

您可能会收到错误，在这种情况下关闭并重新打开项目。

接下来，您要声明一个 Facebook 对象并设置会话或在会话打开或关闭时清除它。

以示例为例：[https](https://github.com/fbsamples/ios-3.1-howtos/tree/master/ShareNativeDialogsHowTo) ://github.com/fbsamples/ios-3.1-howtos/tree/master/ShareNativeDialogsHowTo记录在这里，[https://developers.facebook.com/docs/howtos/share-本机对话框-ios-sdk/](https://developers.facebook.com/docs/howtos/share-native-dialogs-ios-sdk/)

您可以对该示例进行以下更改以回退到提要对话框，而不是回退到具有共享 UI 的视图控制器。在 ViewController.m 中，您将在包含 Facebook 标头后进行这些更改：

```
....
@property (unsafe_unretained, nonatomic) IBOutlet UIButton *publishButton;
@property (nonatomic, retain) Facebook *facebook;

....
@synthesize authButton;
@synthesize facebook = _facebook;

....
- (void)sessionStateChanged:(NSNotification*)notification {
    if (FBSession.activeSession.isOpen) {
        self.publishButton.hidden = NO;
        [self.authButton setTitle:@"Logout" forState:UIControlStateNormal];
        if (nil == self.facebook) {
            self.facebook = [[Facebook alloc]
                             initWithAppId:FBSession.activeSession.appID
                             andDelegate:nil];
            // Store the Facebook session information
            self.facebook.accessToken = FBSession.activeSession.accessToken;
            self.facebook.expirationDate = FBSession.activeSession.expirationDate;
        }
    } else {
        self.publishButton.hidden = YES;
        [self.authButton setTitle:@"Login" forState:UIControlStateNormal];
        self.facebook = nil;
    }
}

- (void) publishUsingFeedDialog {
    // Put together the dialog parameters
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Facebook SDK for iOS", @"name",
                                   @"Build great social apps and get more installs.", @"caption",
                                   @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
                                   @"https://developers.facebook.com/ios", @"link",
                                   @"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png", @"picture",
                                   nil];

    // Invoke the dialog
    [self.facebook dialog:@"feed" andParams:params andDelegate:nil];
}

- (IBAction)publishButtonAction:(id)sender {
    BOOL displayedNativeDialog =
    [FBNativeDialogs
     presentShareDialogModallyFrom:self
     initialText:@""
    ....

    if (!displayedNativeDialog) {
        /*ShareViewController *viewController =
        [[ShareViewController alloc] initWithNibName:@"ShareViewController"
                                              bundle:nil];
        [self presentViewController:viewController
                           animated:YES
                         completion:nil];*/
        [self publishUsingFeedDialog];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:12:16.817

如果您同时使用两者，我认为您会收到“重复错误”。我知道这很糟糕。

几天来，我一直在处理重复的错误。如果你到了，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:36:31.140

这是不可能的，您应该使用 Graph API [https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)而不是 Feed Dialog :(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:25:30.490

尝试导入

```
"FBSession.h" 
```

代替

```
#import<FacebookSDK/FacebookSDK.h> 
```

它将解决重复的错误..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T21:14:53.930

您可能必须抽象出一个通用接口并在单独的源文件中实现两次（因此编译器永远不会在同一个文件中看到 Facebook.h 和 FacebookSDK.h）。

# java - Android初学者导入错误

> ID：12735965
> 
> 赞同：0
> 
> 时间：2012-10-04T21:08:30.213
> 
> 标签：java, android

我正在使用教程制作 Android 应用程序，但出现错误

```
 import org.apache.commons.fileupload.MultipartStream; 
```

错误：

```
 import org.apache.commons.fileupload can't be resolved 
```

我不明白如何导入这个。我的 Eclipse 是否需要任何 jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:10:50.960

是的，您需要 Apache Commons FileUpload jar。[在这里](http://www.fightrice.com/mirrors/apache//commons/fileupload/binaries/commons-fileupload-1.2.2-bin.zip)获取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:14:24.343

是的，您需要 Apache Commons FileUpload jar： [http ://commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)

`libs`你应该创建一个同级文件夹`src`，然后右击该文件`Build Path--> Add to Build Path`。

# objective-c - 带有 imageFromCurrentlyProcessedOutput 的 GPUImagePicture 没有得到 UIImage

> ID：12735980
> 
> 赞同：0
> 
> 时间：2012-10-04T21:09:29.810
> 
> 标签：objective-c, ios, gpuimage

我正在使用 GPUImage 处理本地照片，我正在使用它来初始化：

```
localImageSource = [[GPUImagePicture alloc] initWithImage:selectedImage]; 
```

然后我添加过滤器，我可以在屏幕上看到它。

问题是我需要 UIImage 来保存它，但是当我打电话时：

```
[localImageSource imageFromCurrentlyProcessedOutput] 
```

我什么都得不到。

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T21:27:40.137

**用过滤器**本身调用它显然可以解决这个问题：

```
[filter imageFromCurrentlyProcessedOutput]; 
```

归功于 brspurri

# c# - 如何使用 XmlSerializer 优化挂起时间？

> ID：12735981
> 
> 赞同：0
> 
> 时间：2012-10-04T21:09:29.293
> 
> 标签：c#, serialization, windows-8, microsoft-metro, xmlserializer

我想向 Windows 应用商店提交一个新闻应用程序，但它总是无法通过应用程序认证过程（提交前的本地检查），因为当应用程序暂停时（OnSuspended-Event），我使用 XmlSerializer 将数据序列化为 XML 文件。当我不序列化时，应用程序成功通过了这个认证过程......

该[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh994640.aspx)建议以下内容：

> 当你序列化你的数据时，如果它没有改变，你应该避免重新序列化。序列化和保存数据需要额外的时间，再次激活应用程序时读取和反序列化数据需要额外的时间。相反，我们建议**应用程序确定其状态是否实际发生了变化，如果是，则仅对发生变化的数据进行序列化和反序列化**。

我真的很喜欢这个想法，但不幸的是不知道如何实现它。我有一个包含新闻项目的集合（在应用程序启动时下载），用户下载这些新闻项目的详细信息。所以，基本上在暂停时，我只应该序列化这些细节，并且可以在初始加载后序列化新闻项目。我怎样才能做到这一点？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:27:38.613

简单的只读数据：

1.  如果缓存文件存在，则在 App Load 上将其反序列化为内存对象。
2.  根据用户请求，从服务中获取更新、合并结果并立即序列化所有内容。
3.  挂起时，无事可做。发生更新后，您的数据已保留。

如果用户进行一些更改怎么办：

1.  如果缓存文件存在，则在 App Load 上将其反序列化为内存对象。
2.  在用户编辑时，更新到/从服务，合并结果并立即序列化所有内容。
3.  挂起时，无事可做。发生更新后，您的数据已保留。

这里真正的收获是，在暂停时您应该无事可做或几乎无事可做。暂停事件旨在让您的应用有时间保存其状态。它不打算保存其数据。这是因为最轻微的打嗝可能会导致您的保存过程失败，并且因为您只有几秒钟（毫不留情）您的数据会丢失并且您的应用程序看起来很糟糕。

由于应用程序切换速度快，内存中已有的缓存不会改变。因为您明确监视服务的更新或用户的更改，所以您没有理由“确定”内存中的内容与缓存文件中的内容之间是否存在差异。

另一个建议，如果它很大，不要将整个对象序列化为单个文件。出于性能原因，您没有理由不能分解您的类并单独列出和序列化它们。老实说，这很常见。

# c# - 在 C# ASP.NET 中创建自己的静态错误代码列表的典型方法是什么？

> ID：12735983
> 
> 赞同：0
> 
> 时间：2012-10-04T21:09:48.497
> 
> 标签：c#, asp.net

我正在尝试找到为我的 Web 服务创建错误代码列表的最有效方法，以便在发生某些问题时，我的客户端应用程序将知道它是什么。我不想返回一个冗长的字符串，所以我宁愿使用简单的数字。我只是好奇你们中的一些人将如何为 asp.net 应用程序创建自己的错误代码表。您会在 Web 服务中创建一堆常量还是枚举类型？或者你会创建某种只包含常量的类吗？我不确定处理这个问题的最佳方法是什么。我不想在每次有人访问 Web 服务时只为错误代码实例化一个类。

编辑：我应该更具体一点。Web 服务确实使用数据协定，但不使用 WCF。我正在使用 JSON-RPC 的自制实现，它要求将错误代码存储在响应 json 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:27:06.210

假设您指的是 WCF 类型的 Web 服务，您可以使用[FaultContract](http://msdn.microsoft.com/en-us/library/ms752208.aspx)指定不同的错误以及如何在客户端处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:16:31.133

只是给你一个想法，但是......不要担心创建类，当你不再需要它时，垃圾收集器会处理它，如果你经常使用它，那么它会留在应用程序内存中jit 形式，所以它会是高性能的！

就个人而言，我尽量不要太担心“性能”到极端，因为它通常甚至不明显......

但是，如果您担心，那么您应该考虑创建一个可以在应用程序范围内使用并在启动时实例化并将常量保存在那里的单个静态类，因为然后将使用单个内存类来节省内存和任何感知的性能打。

最好的祝愿

马修

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T21:14:20.717

你不是用 C 编程，为什么会出现错误代码？Web 服务在这里很广泛，但我假设您的意思是 WCF？

无论如何，WCF 会抛出一个冒泡到客户端的 FaultException，这比使用错误代码要好得多。错误代码不会告诉我任何事情，并且可以证明是 PITA 以便以后维护。但是，如果发生 FaultException，我可以从对象中收集到很多信息。

FaultException（或 SomeException）> 错误代码。

# c++ - memset 指针数组的正确方法是什么？

> ID：12735988
> 
> 赞同：8
> 
> 时间：2012-10-04T21:09:53.497
> 
> 标签：c++, c

如果我有类型的指针`T (T*)`并且我有一个它们的数组，`T* array[N]`这两种方法是否允许我稍后检查哪些条目是空指针以延迟初始化每个存储桶中的东西？

`memset(array, 0, sizeof(T*)*N);`

或者

```
for (int i = 0; i < N; ++i)
    array[i] = NULL; 
```

即`memset`电话也让我以后做`if (array[i] == NULL) ...`吗？

如果不是，我不想引入未定义的行为..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T21:14:05.560

虽然技术上不要求空指针值全为零位，但我不知道有任何系统不是全零位。所以任何一种方法都应该有效。

然而，有一种更简单的方法来初始化一个数组，即使在一些邪恶的实现中，它也会设置正确的空指针值：

```
T *array[N] = {}; 
```

或者，如果您动态分配它：

```
T **array = new T*[N](); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T21:13:18.997

形式上，该`memset`方法不起作用，因为不要求空指针由`0`内存中的值表示。在实践中它工作得很好。

比两者都好：`std::uninitialized_fill`; 标准库实现者可以做一些你无法优化性能的事情。

# objective-c - 向服务器发送密码

> ID：12735989
> 
> 赞同：4
> 
> 时间：2012-10-04T21:09:57.450
> 
> 标签：objective-c, ios, security

我在问自己。将个人信息从 iOS 设备发送到服务器的最佳方式是什么。

此时我加密了应用程序中的密码（sha1 salt password pepper），然后我使用从 iOS 向服务器发送发布数据。

保护用户和防止任何 MITM 攻击的最佳方法是什么？我的方式足够安全吗？

**更新：**

我添加了 SSL 证书。为了确保用户只需在我存储用户注册时生成的密钥后登录。我在用户第一次登录时获取它们。与用户名和用户 ID 结合使用。这是一个好方法吗？只有越狱用户才能阅读并有风险。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T21:19:49.620

在客户端对密码进行散列有助于防止密码本身在窃听中被检测到，但它本身并没有提供任何安全性，因为凭据然后成为密码的散列版本，而不是原始密码本身。窃听者可以只获取散列版本，然后自己发送散列。

到目前为止，最简单的解决方案是简单地使用 SSL/TLS。由于您提到了“post”，这意味着您可能正在使用 HTTP。相反，您可以通过 HTTPS 连接并发布数据，就像您已经在做的一样。只要检查证书的有效性（我相信 iOS 框架已经默认这样做了），那么连接应该在很大程度上是安全的。

对于大多数情况，这应该*足够好了。*您可以使用一些更复杂和复杂的技术来进一步强化，但 SSL/TLS 本身就可以完成大量工作。

# javascript - 如何知道 document.forms['aspnetForm'].submit() 在服务器端提交？

> ID：12735994
> 
> 赞同：1
> 
> 时间：2012-10-04T21:10:07.407
> 
> 标签：javascript, asp.net

我用

```
document.forms['aspnetForm'].submit() 
```

提交表格。在服务器端还有其他按钮在做一些其他的事情。

是否可以在服务器端，例如在 Page_Load(object sender, EventArgs e) 中，使用某种方法来检查客户端称为 this

```
document.forms['aspnetForm'].submit() 
```

?

谢谢

================更多解释===================

例如，单击下面的任一按钮都会将表单提交到服务器端，我如何知道在 Page_Load 中单击了哪个？

```
<input type="button" value="Submit" onclick="document.forms['aspnetForm'].submit()" />
<input type="submit" value="Edit" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:19:34.683

您可以在调用JavaScript`hidden`的同时在字段中设置值。`.submit()`喜欢：

```
<input type="hidden" id="client-submit" value="true" /> 
```

（然后在服务器端检查该表单字段值。）

# php - Yii CUrlManager 规则 - 如何将自定义文本从模型添加到 url

> ID：12735996
> 
> 赞同：2
> 
> 时间：2012-10-04T21:10:09.633
> 
> 标签：php, url-rewriting, seo, yii

我有这样的网址

> example.com/model/id
> 
> example.com/image/123（默认规则）

我会将其重写为：

> example.com/category/123-this_is_encoded_title.html

我的图像模型具有以下属性：

*   ID
*   标题
*   类别 ...

我需要将模型中的类别添加到 url。如何将类别名称动态添加到 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:55:58.793

似乎您已经使用了一些默认的 CUrlManager 规则。

在您的规则列表顶部添加以下规则。（我假设您的控制器 ID 是**image**）

```
'<category:\w+>/<id:\d+>-<title:\w+>.html'=>'image/view', 
```

除此之外，您必须在所有地方更改 url 创建。您必须将**标题**和**类别**值作为 url 参数传递。

前任：

```
//Cleanup the title and category
$model->title = preg_replace("/[^\w+]/", '_', $model->title);
$model->category = preg_replace("/[^\w+]/", '_', $model->category);

//ex 1:
$this->redirect(array('view',
         'id'=>$model->id, 
         'title'=>$model->title, 
         'category' => $model->category
));

//ex 2:
echo CHtml::link('Title', array('view',
         'id'=>$data->id,
         'title' => $data->title, 
         'category' => $data->category
 ));

//ex 3:
$this->createUrl('image/view', array(
         'id'=>$image->id, 
         'title'=>$image->title, 
         'category' => $image->category
)); 
```

这个答案解释了你需要做什么。

请按照@dInGd0nG 建议进行代码重构。

# iphone - iPhone 上的 CSS 像素与设备像素

> ID：12735997
> 
> 赞同：4
> 
> 时间：2012-10-04T21:10:11.693
> 
> 标签：iphone, css

如果我使用 CSS 将标签的宽度指定`<div>`为 96px，那么在第一代 iPhone 的屏幕上应该占据多少设备像素？

我添加`<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>`到页面，在模拟器上截取了屏幕截图，并测量了`div`96 个设备像素宽。现在，我阅读了[CSS 像素的 W3 规范](http://www.w3.org/TR/css3-values/#absolute-lengths)，它指出 1px 是 1/96 英寸。所以 96 CSS 像素应该转换为 1 英寸。由于原始 iPhone 的[DPI 为 163](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#Apple)，因此屏幕上的一英寸应占用 163 个设备像素。为什么我没有得到那个测量值？换句话说，96 个 CSS 像素应该等于 1 英寸吗？

我看到规范还提到了锚定到参考像素。在我看来，在这种情况下，参考像素只是一个设备像素。如果我向后工作以从屏幕截图中获取 CSS 像素值，假设一个设备像素等于 iPhone 上的一个 CSS 像素（非视网膜显示器）通常是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:13:28.643

Iphone 像素与任何其他像素一样。在任何设备中， 96px 宽`<div>`始终是 96px 宽。DPI（每英寸点数）只是告诉您屏幕（或纸张）上的物理像素（点）与英寸之间的比率，并不代表任何大小。DPI 只是像素与现实世界测量单位之间的**比率。**

96px`div`在 50 DPI 的屏幕上看起来比 300 DPI 的屏幕大 6 倍。

DPI 因设备或打印/扫描质量而异，因此 1 英寸并不总是等于 96 像素。W3C 只是说绝对长度单位*相对于彼此是固定的*（这只是使 CSS 单位一致的任意近似值）。这并不意味着现实世界的测量单位（英寸、厘米）可以与像素有固定的比率。

我能给你的最好的帮助来理解这一点是 1px 只是并且总是等于 1px。像素和真实世界单位之间的任何比较都取决于特定设备的 DPI，而不是像 W3C 这样的标准。

> 绝对长度单位相对于彼此是固定的，并且锚定到一些物理测量。它们主要在输出环境已知时有用。