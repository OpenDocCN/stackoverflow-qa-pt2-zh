# StackOverflow 问答 12832000-12832999

# eclipse - GWT RPC 的 Google 示例在 Eclipse 中返回 HTTP 错误 405

> ID：12832004
> 
> 赞同：2
> 
> 时间：2012-10-11T04:00:26.360
> 
> 标签：eclipse, gwt, ubuntu-12.04, gwt-rpc

我一直在研究 Google 开发人员网站上的 GWT 教程，并在[此处](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)了解了 GWT RPC 部分。问题的主旨是我仔细按照教程上的说明进行操作，在 Eclipse Juno 上以开发模式运行代码时遇到了问题。错误是：“此 URL 不支持错误 405 HTTP 方法 GET”。

我所处的环境是：

*   日食朱诺 4.2
*   Ubuntu 12.04 LTS（最近没有重大更新。）
*   使用默认的 GWT SDK (GWT - 2.4.0)。
*   使用默认的 GAE SDK (App Engine - 1.7.2)。
*   Chrome 版本 21.0.1180.89

参考示例中的代码，作为问题的一部分，我开始关注 web.xml 文件和其中的 servlet-mappings。我在 web.xml 代码中的内容如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE web-app
PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
"http://java.sun.com/dtd/web-app_2_3.dtd">

    <web-app>

       <!-- Default page to serve -->
      <welcome-file-list>
        <welcome-file>StockWatcher.html</welcome-file>
      </welcome-file-list>

      <!-- Servlets -->
      <servlet>
        <servlet-name>stockPriceServiceImpl</servlet-name>
        <servlet-class>com.google.gwt.sample.stockwatcher.server.StockPriceServiceImpl</servlet-class>
      </servlet>

      <servlet-mapping>
        <servlet-name>stockPriceServiceImpl</servlet-name>
        <url-pattern>/stockwatcher/stockPrices</url-pattern>
      </servlet-mapping>

  </web-app> 
```

好消息是服务器正在查找代码，但是在查找代码和呈现代码之间的某个地方，它失败了。

我已经非常彻底地研究了这个问题，但我没有发现任何似乎指向问题原因的东西。我所知道的如下：

1.  需要更好地理解 HttpServlet 类。
2.  GWT 应该负责 doPost 和 doGet 实现。

如果有人对问题可能是什么有任何建议，我会全力以赴。或者对错误含义的另一种解释对我和其他任何遇到此问题的人都有帮助。

## 编辑：

我能够解决我的问题，部分归功于 Colin Alworth。问题是我是如何考虑访问 servlet 的。浏览 HTML 页面确实是访问应用程序的正确方法，并且因为我没有调用启动 AsyncCallback 方法的方法（不知何故我错过了），所以 HTML 页面和 servlet 似乎断开了连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:09:45.513

`StockPriceServlet`应该是扩展的`RemoteServiceServlet`，仅用于 RPC 调用，因此不支持`GET`. 不要将浏览器定向到该 url，而是使用应用程序中提供的 html 文件。实际的 url 应该显示在开发模式控制台上。在[https://developers.google.com/web-toolkit/doc/latest/tutorial/gettingstarted教程中，这在](https://developers.google.com/web-toolkit/doc/latest/tutorial/gettingstarted)[https://developers.google.com/web-toolkit/doc/latest/](https://developers.google.com/web-toolkit/doc/latest/tutorial/create)的第 2 步中进行了描述[tutorial/create](https://developers.google.com/web-toolkit/doc/latest/tutorial/create) - url 将是`http://localhost:8888/StockWatcher.html`，或者，如果使用开发模式，则更可能是`http://localhost:8888/StockWatcher.html?gwt.codesvr=localhost:9997`. 从 web.xml 中，您甚至不需要列出 html 文件本身：

```
 <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>StockWatcher.html</welcome-file>
  </welcome-file-list> 
```

`http://localhost:8888/?gwt.codesvr=localhost:9997`应该足够了。

Servlet 并不总是用于提供 html，这就是其中一种情况 - 这种类型的 servlet 的明确目的是成为 GWT 客户端与服务器上的 Java 方法交互的一种方式，通过将对象传回和向前。查看[https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)以了解有关如何使用此 servlet 的更多详细信息 - 仅在客户端代码中。

# java - nextInt() 的扫描仪错误

> ID：12832006
> 
> 赞同：11
> 
> 时间：2012-10-11T04:00:31.547
> 
> 标签：java, java.util.scanner

我正在尝试使用 Scanner 从键盘获取 int，但出现以下错误：

```
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Scanner.java:907)
    at java.util.Scanner.next(Scanner.java:1530)
    at java.util.Scanner.nextInt(Scanner.java:2160)
    at java.util.Scanner.nextInt(Scanner.java:2119)
    at TableReader.mainMenu(TableReader.java:122)
    at TableReader.main(TableReader.java:76) 
```

这就是我所拥有的。它独立于我的程序的其余部分，我不明白为什么这不起作用。如果有帮助，它会在一个在 while 循环中调用的方法中声明。

```
 // scan for selection
    Scanner s = new Scanner(System.in);
    int choice = s.nextInt();           // error occurs at this line
    s.close(); 
```

我逐步使用调试器并将错误缩小到：

Java 运行时环境检测到致命错误：SIGSEGV (0xb) at pc=0xb6bdc8a8, pid=5587, tid=1828186944

JRE 版本：7.0_07-b30 Java VM：OpenJDK Server VM（23.2-b09 混合模式 linux-x86）有问题的框架：V [libjvm.so+0x4258a8] java_lang_String::utf8_length(oopDesc*)+0x58

无法写入核心转储。核心转储已被禁用。要启用核心转储，请在再次启动 Java 之前尝试“ulimit -c unlimited”

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-11T04:05:31.503

您应该使用类中的`hasNextXXXX()`方法`Scanner`来确保有一个整数可供读取。

问题是你被称为`nextInt()`从对象指向的流中读取下一个整数`Scanner`，如果没有整数可以读取（即如果输入用尽，那么你会看到`NoSuchElementException`）

从 JavaDocs 中，该`nextInt()`方法将在以下条件下抛出这些异常：

*   InputMismatchException - 如果下一个标记与 Integer 正则表达式不匹配，或者超出范围
*   NoSuchElementException - 如果输入已用尽
*   IllegalStateException - 如果此扫描仪已关闭

您可以使用以下`hasNextInt()`方法轻松解决此问题：

```
Scanner s = new Scanner(System.in);
int choice = 0;

if(s.hasNextInt()) 
{
   choice = s.nextInt();
}

s.close(); 
```

# ruby-on-rails - 在 Rails 中创建指向公共文件的链接

> ID：12832007
> 
> 赞同：2
> 
> 时间：2012-10-11T04:00:41.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Rails 项目中有一个文件 /public/animals/mammals/pets/d/dog.jpg。因此可以通过 URL 访问它`/animals/mammals/pets/d/dog.jpg`。有没有办法让它从较短的 URL 访问，例如`/dog-picture`链接到`/animals/mammals/pets/d/dog.jpg`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:10:23.293

您不需要在路由中显式使用 :controller 和 :action 符号。您可以将它们作为默认值提供：

```
match 'photos/:id' => 'photos#show' 
```

通过这条路由，Rails 会将 /photos/12 的传入路径`show`与`PhotosController`.

您还可以通过为 :defaults 选项提供哈希来定义路由中的其他默认值。这甚至适用于您未指定为动态段的参数。例如：

```
match 'photos/:id' => 'photos#show', :defaults => { :format => 'jpg' } 
```

Rails 会将 photos/12 与 的 show 动作匹配`PhotosController`，并设置`params[:format]`为`jpg`.

另请参阅： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:12:15.320

简单的解决方案是制作一个控制器来处理图像请求。然后，您可以将图像移出公用文件夹。

虽然老实说，除了苦行者之外，我不确定有一个长网址真的是一个问题。

# html - JSoup 解析 HTML div 标签

> ID：12832010
> 
> 赞同：0
> 
> 时间：2012-10-11T04:00:49.730
> 
> 标签：html, tags, jsoup

通过搜索这个网站，我几乎可以得到我所有的答案。谢谢！

不幸的是，我在解析包含足球统计数据的文件时遇到了麻烦，这让我很烦恼。下面的 div 标签似乎有多个嵌套元素，我只是不知道如何解析。谁能指出我正确的方向？

div id 是 player_data，我知道了，我基本上想要玩家的数据，例如：

**8780,Matt,Ryan,Atl,2,Boston College,76.0....等**

div 标签包含 2 名球员 Matt Ryan 和 Aaron Rogers 的数据。原始文件包含使用以下相同格式的 200 多个播放器。

```
<div id="player_data" style="display: none;">
[{"player_id":8780,"position":"QB","first_name":
"Matt","last_name":"Ryan","team_alias":"Atl","number":"2","college":"Boston 
College","height":76.0,"weight":217.0,"age":27,"team_city":
"Atlanta","team_name":"Falcons","experience":6,"next_matchup":      [{"opponent":"Oak","game_datetime":"10/14, 1:00 

PM"}],"salary":18408,"injured":false,"pstats":
[{"year":10015,"yds":714,"paint":2,"td":5,"g":2},
{"year":2012,"yds":1507,"paint":3,"td":13,"g":5},
{"year":2011,"yds":4177,"paint":12,"td":29,"g":16}],"rstats":
[{"year":10015,"yds":4,"td":0},{"year":2012,"yds":52,"td":1},
{"year":2011,"yds":84,"td":2}],"recstats":[{"year":10015,"rec":0,"yds":0,"td":0},
{"year":2012,"rec":0,"yds":0,"td":0},{"year":2011,"rec":0,"yds":0,"td":0}],"fumstats":
[{"year":10015,"fl":1},{"year":2012,"fl":1},{"year":2011,"fl":3}],"exstats":
[{"year":10015,"twopts":0},{"year":2012,"twopts":0},{"year":2011,"twopts":0}],"dstats":[]},
{"player_id":7200,"position":"QB","first_name":"Aaron","last_name":"Rodgers","team_alias":"
GB","number":"12","college":"California","height":74.0,"weight":225.0,"age":28,"team_city":
"Green Bay","team_name":"Packers","experience":9,"next_matchup":
[{"opponent":"@Hou","game_datetime":"10/14, 8:20 
PM"}],"salary":17721,"injured":false,"pstats":
[{"year":10015,"yds":562,"paint":2,"td":7,"g":2},
{"year":2012,"yds":1307,"paint":4,"td":10,"g":5},
{"year":2011,"yds":4643,"paint":6,"td":45,"g":15}],"rstats":
[{"year":10015,"yds":70,"td":0},{"year":2012,"yds":108,"td":0},
{"year":2011,"yds":257,"td":3}],"recstats":[{"year":10015,"rec":0,"yds":0,"td":0},
{"year":2012,"rec":0,"yds":0,"td":0},{"year":2011,"rec":0,"yds":0,"td":0}],"fumstats"
:[{"year":2012,"fl":0},{"year":2011,"fl":0}],"exstats":[{"year":10015,"twopts":0},
{"year":2012,"twopts":0},{"year":2011,"twopts":0}],"dstats":[]}]}]</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:14:24.860

玩家数据为 JSON 格式。您可以使用 Java JSON 库对其进行解析，请参阅[此处](https://stackoverflow.com/questions/338586/a-better-java-json-library)的 Java JSON 库。您的示例中的 JSON 似乎无效（使用[此验证器](http://jsonformatter.curiousconcept.com/)检查），因此在解析该 JSON 时可能会导致一些问题。

# powershell - 使用 powerShell 访问 WMI 的基础知识

> ID：12832013
> 
> 赞同：3
> 
> 时间：2012-10-11T04:01:06.230
> 
> 标签：powershell, wmi

我正在尝试通过 PowerShell 访问 Windows WMI 中可用的一些数据。我认为这将是在可能转向 C 之前学习基础知识的一个简单起点。

最终，我想从 Open Hardware Monitor 查询一个（未记录的）WMI API。这是 Jens 在这里提出的解决方案的一部分：[如何获得 CPU 温度？](https://stackoverflow.com/questions/1195112/how-to-get-cpu-temperature)

但是，我完全迷路了。 **我将如何首先加载 DLL 然后查询它？**

作为初学者，我从 get-wmiobject -list 找到了这个列表

```
CIM_传感器
CIM_BinarySensor
CIM_MultiStateSensor
CIM_DiscreteSensor
CIM_NumericSensor
CIM_TemperatureSensor
Win32_TemperatureProbe
CIM_转速表
CIM_VoltageSensor
Win32_VoltageProbe
CIM_CurrentSensor
Win32_CurrentProbe
```

不幸的是， `get-wmiobject -class XX`在其中任何一个上运行都不会返回任何结果。我希望能够询问传感器。 **任何人都可以向我展示基础知识或将我链接到教程吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:34:51.360

如果您正在研究 Server 2012 或 Windows 8 机器，PowerShell v3 可能会为您提供更多功能。

否则，问题已经在您的文本中，它们通常没有记录或记录不充分。

我运行了 Get-WMIObject -Class CIM_Sensor 和 Win32_TemperatureProbe 并取回了数据，但我也没有得到其他一些数据。

要找到其他可能更有用的方法，您可以尝试以下一些方法：

```
 Get-WmiObject -NameSpace 'root\wmi'
    Get-WmiObject -Class CLASSNAME | Get-Member
    (Get-WmiObject -List CLASSNAME -Amended).Qualifiers 
```

可能进一步研究 WMI 很重要，因为 Win32_ 类是 Microsoft 提供的，通常更容易处理。我使用了很多 WMI，但更多用于文档，检查操作系统，或者让它做一些事情，而不是直接指向硬件、传感器等。

一些可能也有用的网站：

[http://www.dmtf.org/standards/wbem](http://www.dmtf.org/standards/wbem)

[http://collaboration.opengroup.org/pegasus/](http://collaboration.opengroup.org/pegasus/)

[https://en.wikipedia.org/wiki/Windows_Management_Instrumentation](https://en.wikipedia.org/wiki/Windows_Management_Instrumentation)

希望这至少可以为您提供更多信息来工作，或者让您根据您正在寻找的内容来思考更多的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T17:33:15.227

有一个名为 wmiexplorer 的 exe，它将列出所有 WMI 类和每个类的属性。它有一个简单的 GUI，在查找您需要的属性时非常有用。

它还显示了相应的查询，您也可以进行试验。当我不知道要使用哪个 WMI 类时，我发现它非常有用。

[你可以在这里](http://www.ks-soft.net/hostmon.eng/wmi/)找到更多信息

# python - 带有“-I”的 pip 安装错误

> ID：12832015
> 
> 赞同：2
> 
> 时间：2012-10-11T04:01:15.063
> 
> 标签：python, macos, pip

当我使用`pip`从`virtualenv`环境中安装一些包时。我得到了错误，

```
building 'urwid.str_util' extension

/usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7 -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I -I/Users/dreampuf/opt/homebrew/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c source/str_util.c -o build/temp.macosx-10.7-intel-2.7/source/str_util.o

source/str_util.c:25:10: fatal error: 'Python.h' file not found

#include <Python.h>

         ^

1 error generated.

error: command '/usr/bin/clang' failed with exit status 1 
```

然后，我尝试手动安装软件包。

```
/usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7 -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/Users/dreampuf/opt/homebrew/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c source/str_util.c -o build/temp.macosx-10.7-intel-2.7/source/str_util.o 
```

来自 pip 的原始命令与上述命令的不同之处在于，我删除了单个`-I`参数，然后我可以编译它。

我怎样才能解决这个问题？我无法删除`-I`每个编译命令的参数。

# delphi - 关键部分会帮助解决这个问题吗？

> ID：12832016
> 
> 赞同：2
> 
> 时间：2012-10-11T04:01:16.600
> 
> 标签：delphi, thread-safety, critical-section, indy10

使用 Indy 10 TCP 命令处理程序，每次收到命令时，我都会在数据库中插入一行，然后从数据库中读取整个故事以更新字符串网格。

我正在使用 AnyDac 数据库组件，他们的文档说“连接对象和所有与之关联的对象（如 TADQuery、TADTransaction 等）在每个时刻都必须由单个线程使用”。

如果我“缓慢”发送 TCP 命令，则没有问题。如果我“快速”发送它们（当 AnyDac 仍在显示 SQL 游标时，我会收到异常 EDatabaseError“未找到字段” - 但它当然存在。

当我收到 TCP 命令时，我的代码使用 PostMEssage 将 UM_ 发送到我的主窗体。

我*认为*正在发生的事情是，由于第一个 TCP 命令，主要形式是从表中读取所有行，而 TCP 命令处理程序在中途插入一个新行作为第二个命令的结果 - 因此“当我调用`ADQuery1.FieldByName()`.

这听起来像问题吗？

如果是这样，我该如何预防？可以使用关键部分（在哪里，主线程？）？还是有其他方法？

* * *

[更新] 我刚刚意识到 - 这不可能是线程问题（我认为）。当我收到一个 TCP 命令时，我使用 PostMessage() 将一个 UM_ 发送到我的主窗体。因此，无论 TCP 命令来得有多快，我的主窗体一次只能通过其消息队列处理一个 UM_。TCP 命令处理程序只是发送该消息的一行 - 没有 d/b 访问。

但是 - 我不明白的是，如果在 TCP 命令之间留出“一段时间”一切都很好，但如果我“快速”发送它们，那么我会收到异常说在表的那一行中没有这样的字段。

* * *

[更新] 事实上我终于解决了，问题是使用了更新速度相当慢的 TStringGrid。有一些方法可以让它更快，但我决定将它转换为 TDbGrid，它更新速度非常快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T04:52:58.910

听起来您正在从后台线程中运行的 TCP 命令处理程序更新 AnyDac 数据库，并从主线程中读取 AnyDac 数据库。由于 AnyDac 表示他们不支持多线程访问，这将产生问题。

一种选择是尝试让所有参与的线程排队等待访问 AnyDac 数据库。这违背了使用多个线程开始的目标 - 如果您要做的只是让它们排列并按顺序执行，为什么还要使用多个线程？添加互斥锁（如临界区）会增加您创建死锁情况的机会，*特别是*如果您计划在应用程序的重绘逻辑中获取该锁。您绝对不希望在重绘逻辑中锁定。

另一种方法是将数据库更新移动到主线程中。执行此操作仍然涉及一些线程同步，但责任在于后台线程，而不是您的主线程。

将数据库更新移动到主线程中的一种相对简单的方法是让 TCP 命令处理程序将自定义 UM_ 消息发布到主窗口（正如您已经在做的那样）*并将*数据附加到消息中。消息处理程序从消息中提取数据，用数据更新数据库，并处理附加到消息的数据。

使用这种方法，对 AnyDac 数据库对象的所有访问都发生在主线程中，因此不存在多线程问题。除非有人在做一些愚蠢的事情，比如在重绘周期中间调用 Application.ProcessMessages，否则这应该可以解决重绘期间发生的数据库更新的任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:41:19.657

如果通过调用 PostMessage() 传递数据，则必须确保在主线程中处理消息期间数据仍然有效。最简单的方法是在 Handler 中执行以下操作：

*   创建一个新对象
*   将必要的数据复制到新创建的对象中
*   调用 PostMessage 以将新对象作为参数的消息发送到消息

```

    procedure ...
    var MsgData: TMsgData;
    begin
      MsgData := TMsgData.Create(ACommand);
      PostMessage(MainFormHWND, WM_MYMSG, Integer(MsgData), 0);  
    end

```

在消息的处理程序中

*   处理消息
*   释放对象

```

    procedure MainForm.HandleMsg(var M: TMessage);
    var MsgData: TMsgData;
    begin
      MsgData := TMsgData(M.WParam);
      // Process command
      MsgData.Free();  
    end;

```

# ios - 看不到 MKPolyline

> ID：12832021
> 
> 赞同：1
> 
> 时间：2012-10-11T04:01:31.337
> 
> 标签：ios, mkmapview, mkannotation, mkoverlay

我正在尝试添加一个连接两个 MKPinAnnotationViews 的简单 MKPolyline。我阅读了本教程并观看了苹果的 WWDC 2010 视频。（http://spitzkoff.com/craig/?p=136）。我只是想画一些简单的东西，所以在 viewDidLoad 中，我这样做：

```
MKMapPoint *pointArray = malloc(sizeof(CLLocationCoordinate2D) * 2);
pointArray[0] = MKMapPointForCoordinate(CLLocationCoordinate2DMake(32, -115));
pointArray[1] = MKMapPointForCoordinate(CLLocationCoordinate2DMake(32, -130));

MKPolyline *line = [MKPolyline polylineWithPoints:pointArray count:2];
[self.mapView addOverlay:line];
    free(pointArray); 
```

然后我的委托回调是：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    if ([overlay isKindOfClass:[MKCircle class]]) {
        MKCircleView *view = [[MKCircleView alloc] initWithOverlay:overlay];
        view.fillColor = [UIColor redColor];
        view.strokeColor = [[UIColor redColor] colorWithAlphaComponent:0.5];
        return view;
    }
    else {
        MKPolylineView *view = [[MKPolylineView alloc] initWithOverlay:overlay];
        view.fillColor = [UIColor redColor];
        view.lineWidth = 20;

    return view;
    }
} 
```

如果我用 MKCircle 做一个简单的例子，我确实看到了这个圆圈。使用我在 viewDidLoad 中添加的 MKPolyline，我确实获得了 mapView:viewForOverlay: 回调，但屏幕上没有绘制任何内容。我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:15:20.743

An`MKPolylineView`使用`strokeColor`来绘制，而不是`fillColor`这样的变化：

```
MKPolylineView *view = [[MKPolylineView alloc] initWithOverlay:overlay];
view.fillColor = [UIColor redColor];
view.lineWidth = 20; 
```

到：

```
MKPolylineView *view = [[MKPolylineView alloc] initWithOverlay:overlay];
view.strokeColor = [UIColor redColor];  // <-- stroke instead of fill
view.lineWidth = 20; 
```

# c - 线程程序与 Goto

> ID：12832023
> 
> 赞同：0
> 
> 时间：2012-10-11T04:01:57.223
> 
> 标签：c, process, goto, preemption

我有一个由多个线程组成的系统，比如说进程 A、B 和 C，这些进程完全用 SDL 编写，最终在编译后转换为 C 语言。

我也有一个具有相同进程的等效模拟环境，它只在一个线程上运行，但模拟这些进程中的每一个。基本上，进程 A、B 和 C 中的每一个都使用一组不同的选项重新编译，并且以某种方式一切都作为一个进程运行（典型的 IBM-SDL 模拟）。这在理论上代表了真实过程的轻量级系统，并且一切都作为一个过程运行。现在在这个模拟环境中，可以生成三个文件，让我们说：-Ac Bc 和 Cc 显然在这个模拟中，没有进程抢占的空间。如果消息 X 到达进程 A，A 将完全处理此信号，然后进入下一个状态转换，只有当下一个信号进入系统时，下一个进程才会运行。

我正在尝试在这个没有线程的模拟系统中实现抢占。事实证明，在模拟中，这些文件中的每一个都可以被编辑（通过一些脚本），并且我知道在一个接一个地执行一组特定信号的过程中可能的确切抢占点。

我的问题是：- 如果我插入条件 goto / break 语句（假设每个 Ac、Bc 和 Cc 中的每一行）并在代码执行期间从一个文件跳转到另一个文件，我是否实现了模拟线程环境？

或者我在这里错过了什么？

我知道这是一个非常广泛的问题，而且我的操作系统知识不是很好。另外，我知道这种情况可能有很多条件起作用。但是让我们假设我找到了解决这些问题的方法。我的问题归结为：-如果“智能” goto 可以等效地用作单线程环境中多线程的替代品？时间对我来说不是问题，因为我正在使用模拟时间。系统负载等，没关系。我正在考虑在每个文件 Ac、Bc 和 Cc 的每个步骤之后添加一个控制函数调用，并且在这个控制函数中我可以检查我是否要返回，或者跳转到其他地方并继续从另一个文件执行。在这种方法中我会面临什么样的实施困难？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:44:15.277

听起来您在谈论[*协作多任务*](http://en.wikipedia.org/wiki/Computer_multitasking#Cooperative_multitasking.2Ftime-sharing)，这就是 Windows 的第一个版本的工作方式。进程不仅可以随心所欲地运行，而且会被操作系统抢占；它们会运行一段时间，然后将控制权“交还”给操作系统，操作系统会安排另一个应用程序运行。

这种事情仍然可以在单个线程的上下文中工作。它被称为[**光纤**](http://en.wikipedia.org/wiki/Fiber_%28computer_science%29)。纤维就像轻量级的线；它们通过合作让另一个纤程执行，而不是依赖操作系统来执行任务切换来工作。好处是减少了任务切换通常产生的开销。

# sip - 星号拨号计划优先级

> ID：12832025
> 
> 赞同：0
> 
> 时间：2012-10-11T04:02:26.273
> 
> 标签：sip, asterisk, sip-server

我在下面有一个星号拨号计划示例。它只是主要的（没有分机或开始），它有 3 个优先级。在我们分机的第一优先级中，我们将接听电话。在第二个中，我们将播放一个名为 hello-world.gsm 的声音文件，在第三个中，我们将挂断电话

网络上的一个示例似乎建议采用以下格式

```
[incoming]
exten => s,1,Answer()
exten => s,n,Playback(hello-world)
exten => s,n,Hangup() 
```

代替

```
[incoming]
exten => s,1,Answer()
exten => s,2,Playback(hello-world)
exten => s,3,Hangup() 
```

这是为什么？究竟什么是优先事项？'n' 是什么意思

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T15:01:20.717

执行此操作的最佳方法如下

```
exten => s,1,Answer() ;answer the call
same => n,playback(youfilename) ;understand that Asterisk will pick the best format to play
same => n,Hangup() 
```

当使用相同的关键字时，您不需要在拨号计划中使用“s”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T07:40:04.653

您还可以使用 Asterisk 1.6+ 上的“相同”构造来节省一些输入：

```
[incoming]
exten => s,1,Answer()
 same => n(Start),Background(hello-world)
 same => n,Goto(Start)
 same => n,Hangup() 
```

...如果您正在执行大型拨号计划，并且在不同部分（例如 IVR）之间进行一些剪切粘贴调整，则使用“相同”可以避免您在分机号码上出错。

进一步阅读：[https ://wiki.asterisk.org/wiki/display/AST/Contexts,+Extensions,+and+Priorities](https://wiki.asterisk.org/wiki/display/AST/Contexts,+Extensions,+and+Priorities)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T07:02:46.860

Asterisk 按数字顺序执行每个[优先级](http://www.voip-info.org/wiki/view/Asterisk+priorities)[，](http://www.voip-info.org/wiki/view/Asterisk+priorities)就像在 BASIC 中一样，您可以使用`Goto`.

从 Asterisk 1.2 开始，您可以使用`n` [优先级](http://www.voip-info.org/wiki/view/Asterisk+priorities)。

`n`优先级将前一个优先级加 1 。

这使您更加灵活，您可以添加一条线，而无需关心优先级。

`n` [优先级](http://www.voip-info.org/wiki/view/Asterisk+priorities)的另一个好处是您可以将`n`优先级与可选标签一起使用并跳转到该标签，而不是与优先级计数器混淆。

```
[incoming]
exten => s,1,Answer()
exten => s,n(Start),Background(hello-world)
exten => s,n,Goto(Start)
exten => s,n,Hangup() 
```

有关更多示例，请参见[GotoIf](http://www.voip-info.org/wiki/view/Asterisk+cmd+GotoIf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T17:57:16.767

`n`代表*下一个优先级*。

我们可以用“”代替优先级中的数字`n`来表示*下一个节点*。

我们也可以使用带有“ `n`”的标签，例如`exten => s,n(dosomething)`，如果我们使用`goto`或`gotoif`条件，`dialplan`那么这个标签可以帮助我们导航到不同的“ `n`”优先级。

# ruby-on-rails - 模型中的类方法来获取给定日期的数据

> ID：12832032
> 
> 赞同：0
> 
> 时间：2012-10-11T04:03:41.723
> 
> 标签：ruby-on-rails, railscasts

我正在构建一个呼叫跟踪应用程序，作为学习 Rails 和 Twilio 的一种方式。现在，我正在尝试按照 Ryan Bates 的教程创建一个图表，向用户显示他们每天的电话数量。

该模型的工作原理是这样的——>电话 has_many 电话

我想做的是创建一个类方法，让我可以做类似的事情

phone.calls.total_on（日期）

这将显示特定电话在特定日期的通话总数。

这是我的手机型号中当前的代码

```
 def self.total_on(date)
    where("date(calls_at) = ?", date).sum( self.calls.count )
  end 
```

代码可能有问题的是 sum(self.calls.count)。如果我的方向正确，这将计算所有电话，无论日期如何。

我将如何制作一个可以计算特定日期的调用的类方法？

谢谢你一直陪着我！非常感谢您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:47:46.867

简单地说：

```
def total_on(date)
  self.calls.where("placed_at >= ? AND placed_at <= ?", date.beginning_of_day, date.end_of_day).count
end 
```

假设您有一个`Phone`对象，并且您想知道在给定的一天发生了多少对该对象的关联调用。这个方法应该是*实例*方法，而不是*类*方法。如果您想查看*特定日期**特定*电话的通话次数，我不明白为什么它会是一个类方法。

 *如果您使用[by_star](https://github.com/radar/by_star)，上面的代码将是这样的：

```
def total_on(date)
  self.calls.by_day(date).count
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T06:26:51.017

尝试以下

```
 def self.total_on(date)
    query = select("calls.id").where("date(calls_at) = ?", date).joins(:calls)
    query.count
  end 
```*

# linux - 从正在运行的 nginx 进程中转储 conf

> ID：12832033
> 
> 赞同：83
> 
> 时间：2012-10-11T04:03:45.120
> 
> 标签：linux, configuration, process, nginx, dump

是否可以仅从正在运行的 nginx 进程中获取 nginx 正在使用的 conf？

获取conf文件路径。有时`ps aux`显露，有时不显露。它可能就像`nginx: master process /usr/sbin/nginx`(same as `/proc/PID/cmdline`)

1.  那么是`nginx -V`唯一的解决方案吗？
2.  从[这个问题](https://serverfault.com/a/436239/59379)来看，是否可以直接从 nginx 进程中转储 conf 数据结构？或者至少转储conf文件路径？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2015-12-03T08:56:54.577

`-T`从 Nginx 1.9.2 开始，您可以使用以下标志转储 Nginx 配置：

> `-T`— 与 相同`-t`，但另外将配置文件转储到标准输出 (1.9.2)。

来源： http: [//nginx.org/en/docs/switches.html](http://nginx.org/en/docs/switches.html)

这与特定进程的转储不同。如果您的 Nginx 使用不同的配置文件，请检查输出`ps aux`并使用它提供的任何二进制文件，例如，如果它提供类似

```
nginx: master process /usr/sbin/nginx -c /some/other/config 
```

你需要跑

```
/usr/sbin/nginx -c /some/other/config -T 
```

如果您还没有使用 1.9.2，您可以使用 gdb 转储配置：

*   [https://serverfault.com/questions/361421/dump-nginx-config-from-running-process](https://serverfault.com/questions/361421/dump-nginx-config-from-running-process)

# android - android按钮必须点击两次才能工作

> ID：12832038
> 
> 赞同：4
> 
> 时间：2012-10-11T04:04:01.397
> 
> 标签：android, button, click

操作系统：安卓2.2

我有问题。当我在 EditText 中输入 Quantity 时，如果我单击右上角的保存按钮，则必须单击它两次才能触发 OnClick 事件。但是，当我单击左上角的返回按钮时，单击一下就足够了。

我调试并发现按钮必须第一次获得焦点。但是，为什么后退按钮不需要呢？

以及如何使保存按钮只需单击一次？

下面是点击监听事件。

第一个是按钮点击监听器。第二个是按钮点击监听器。

```
Button.OnClickListener ui_titlebar_back_btn_Lsn = new Button.OnClickListener(){

     public void onClick(View v)
        {            
         if (itemLayout.isShown()){
            showHeaderLayout();     
         }
         else if(HeaderLayout.isShown()){
            finish(); 
             }                       
        }
    };

Button.OnClickListener ui_titlebar_help_btn_Lsn = new Button.OnClickListener(){ 

     public void onClick(View v)
        {
         if (itemLayout.isShown()){
            tempSaveItem();
         }else if(HeaderLayout.isShown()){
            submitOrder();
         }              
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:14:42.263

我想你可以使用自定义的 onclick 方法，像这样：

```
private OnClickListener event = new OnClickListener() {
        public void onClick(View v) {
        //do something
        }
} 
```

这可以帮助你吗。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:15:48.343

您也可以在 xml 中为 onClick 添加方法到按钮，并在活动中使用相同的方法。如，

```
private void blabla(view v){
if(v= ui_titlebar_back_btn){
//do something
}
else if(v==blabla){
//do something
}
} 
```

# objective-c - 无法将项目转换为 xcode4 中的静态库

> ID：12832042
> 
> 赞同：1
> 
> 时间：2012-10-11T04:04:47.730
> 
> 标签：objective-c, ios6, xcode4.3, static-libraries

我正在尝试将第 3 方项目包装到静态库中，以便可以将其用作子项目。但是我经常遇到“解析问题”错误，将我指向第 3 方创建的框架之一。我无法找出![在此处输入图像描述](../Images/26ed1d284e291ed02a237f3c6c10bd97.png)解决方案。

![在此处输入图像描述](../Images/76ae78ecd9c12108d2b64a6406e5d3ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:15:12.850

问题是`UIImage*`编译器无法识别。你可以看到它下面有一个小标记，它与`SFThumbnailFetcher*`同一行中的颜色不同。

该类`UIImage`是在**UIKit Framework**中定义的，因此您必须先导入它。

```
#import <UIKit/UIKit.h> 
```

# knockout.js - 如何在使用多个 observable 时触发不同的 ko.computed 函数

> ID：12832046
> 
> 赞同：0
> 
> 时间：2012-10-11T04:05:03.440
> 
> 标签：knockout.js

我正在尝试为一大块数字制作热图绑定。到目前为止，应该作为关联地图一部分的数字应该由上下文指定

它可以工作到一定程度。我仍然需要稍微研究一下 rgb 算法，但有问题的部分是 setHeat 计算函数中的 for 循环。

我想要的是，每当更改“最大”或“最小”时，我希望当前在“元素”数组中的所有元素都更新它们的颜色。

但是当一个元素被添加到“元素”数组中时，我只想设置该元素的颜色，但这需要最大和最小，所以我不知道如何正确分离调用，以便最小和最大更新将调用一个和一个元素更新将调用另一个。

我也愿意接受关于如何改进我的绑定的批评。

```
<!-- ko foreach:items -->
            <tr>
                <td class="postCell">
                    <div class="ui-post-icon" data-bind="class: $parents[2].setPostIcon(post)"></div>
                    <span data-bind="text:post"></span>
                </td>
                <!-- ko foreach:combinations -->
                <td data-bind="heat:{value:amount,context:'exotics'}"></td>
                <!-- /ko -->
            </tr>
            <!-- /ko -->

ko.bindingHandlers.heat = {
        init: function (element, value, allBindings, viewModel, bindingConext) {
            var item = value();
            var model = bindingConext.$root;

            if (!model["koHeat"])
                model["koHeat"] = {};

            if (!model["koHeat"][item.context])
                model["koHeat"][item.context] = ko.observable(new HeatContext());

            var ctx = model["koHeat"][item.context];

            if (!isNaN(item.value)) {
                if (+item.value > ctx().max()) ctx().max(+item.value);
                if (+item.value < ctx().min()) ctx().min(+item.value);
                ctx().elements.push(element);
            }

            $(element).html(item.value).data('koHeat', item.value);

            //set value

            function HeatContext() {
                var self = this;
                this.max = ko.observable(0);
                this.min = ko.observable(Number.MAX_VALUE);
                this.elements = ko.observableArray([]);

                this.setHeat = ko.computed(function () {

                    var max = self.max(),
                        min = self.min(),
                        elems = self.elements(),
                        mid = (max + min) / 2,
                        range = max - min,
                        r, g, b, x;

                    for (var i = 0; i < elems.length; i++) {
                        var val = $(elems[i]).data('koHeat');
                        x = (val - mid) / range;
                        if (x > 0) {
                            g = Math.abs(Math.round(x* 100));
                            b = 0.0;
                            r = Math.abs(Math.round((1.0 - x) * 100));
                        } else {
                            g = Math.abs(Math.round(x * 100));
                            b = Math.abs(Math.round((1.0 - x) * 100));
                            r = 0.0;
                        }
                        log(r,g,b);

                        $(elems[i]).css('color', "rgb(" + r + "," + g + "," + b + ")");
                    }
                });
            }
        }
    }; 
```

**编辑** 我为这种情况做了一个快速的小提琴

[http://jsfiddle.net/rwJfK/3/](http://jsfiddle.net/rwJfK/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:43:45.577

而不是制作`setHeat`a ，只需通过删除前缀并订阅和更改如下将其`computed`声明为私有函数：`HeatContext``this.``min``max`

```
this.min.subscribe(setHeat);
this.max.subscribe(setHeat); 
```

现在，`setHeat`只会在更新`min`或`max`更新时运行 - 而不是在将元素推送到数组时运行。

有很多方法可以改进这种绑定。我会在几天内尝试制作一个改进的版本。我将对这个答案进行编辑。

# gnuplot - 在 y 中绘制三阶多项式

> ID：12832050
> 
> 赞同：-1
> 
> 时间：2012-10-11T04:05:35.650
> 
> 标签：gnuplot

我想`a*y**3 + b(x)*y**2 + c(x)*y + d(x)`在 gnuplot 中绘制格式函数。

**编辑：**要清除我要绘制的内容，这些是以下表达式`b(x), c(x), d(x)`：

```
b(x) = b1 + b2*x
c(x) = c1 + c1*x + c2*x**2
d(x) = d1 + d1*x + d2*x**2 + d3*x**3 
```

`a, b1, ... , d2, d3`是常数，我知道。

我想知道是否有任何方法可以给 gnuplot 一个`f(x,y)`函数，它会（以数字方式）计算出情节。

**编辑 2：**在半夜做事并不总是一个好主意......显然我要求的是表面水平，但实际上我对绘图很感兴趣`f(x,y) = 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:09:44.153

这很容易：

```
gnuplot> b1=1.
gnuplot> b2=2.
gnuplot> c1=1.
gnuplot> c2=2.
gnuplot> d1=2.
gnuplot> d2=3.
gnuplot> d3=4.
gnuplot> b(x) = b1 + b2*x
gnuplot> c(x) = c1 + c1*x + c2*x**2
gnuplot> d(x) = d1 + d1*x + d2*x**2 + d3*x**3
gnuplot> a = 3.0
gnuplot> splot a*y**3 + b(x)*y**2 + c(x)*y + d(x) 
```

我只是编了一堆常量，但你明白了。您可能缺少的是，由于您要绘制 2 个变量（x 和 y）的函数，因此您需要使用`splot`. 我所做的是将其绘制为表面，但如果您使用，您也可以将其绘制为表面上的“热图”`pm3d`

```
gnuplot> splot a*y**3 + b(x)*y**2 + c(x)*y + d(x) w pm3d 
```

或作为地图：

```
gnuplot> set view map
gnuplot> splot a*y**3 + b(x)*y**2 + c(x)*y + d(x) w pm3d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:09:34.737

我知道了：

```
set contour
unset surface
set view map
set cntrparam levels discrete 0
splot a*y**3 + b(x)*y**2 + c(x)*y + d(x) 
```

# lex - 不确定某些语法

> ID：12832054
> 
> 赞同：0
> 
> 时间：2012-10-11T04:06:04.000
> 
> 标签：lex

来自莱克斯，

假设lex结构的定义是：

```
... definitions ...
%%
... rules ...
%%
... subroutines ... 
```

在一个示例文件中，我首先从定义部分中看到以下行：

```
 %x PP PRAGMA 
```

然后在规则部分，我看到：

```
<PP>[ \t\r]*                { }
<PRAGMA>.                   { }
^[ \t]*#[ \t]*version       { BEGIN PP; return VERSION_TOK; } 
```

所以，我的问题来了（我理解 lex 的一般概念）：

1.  什么是 PP PRAGMA？我应该如何理解 %x？
2.  对于规则部分：是什么意思？他们不应该是象征，对吧？
3.  BEGIN PP 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:32:34.043

`<PP>`并且`<PRAGMA>`是“开始条件”。事实上，它们是“排他的”开始条件，因为它们是用`%x`. （`%s`将声明“包容性”开始条件。）

我不知道为什么它们被称为开始条件；“开始”这个词有点令人困惑。您可以将它们视为词汇状态，但这也会有点令人困惑，因为“状态”通常意味着不同的东西。

在词法分析过程中的任何时刻，`lex`都有一个活跃的“开始条件”。大多数时候，（预定义的默认）启动条件 INITIAL 处于活动状态；在您没有声明任何开始条件的情况下总是如此。您可以使用宏“输入”开始条件`BEGIN(CONDITION)`。

规则开始`<CONDITION>`仅在 CONDITION 是活动开始条件时使用。一条规则在尖括号内可以有多个条件名称，或者它可以有`<*>`（表示所有条件）或根本没有条件。只要活动条件是“包含”，就会使用未指定条件的规则。如果活动条件是“排他的”，则仅使用专门命名条件的规则（包括`<*>`通配符规则）。

条件实际上是整数常量，当前条件是 YY_START 的值。例如，您可以将它们保存起来并在以后恢复它们，尽管`lex`提供了一个方便的条件堆栈以使其更容易。

我相信BEGIN的正常定义是：

```
#define BEGIN YY_START = 
```

这就是为什么您不必在条件名称周围加上括号（如在 BEGIN PP 中），但我个人认为这是不好的风格，因为至少一些 lex-alikes 实际上将 BEGIN 定义为带有参数的宏。

顺便说一句，开始条件真的很方便。

# java - 使用继承的重载方法

> ID：12832055
> 
> 赞同：22
> 
> 时间：2012-10-11T04:06:36.663
> 
> 标签：java, inheritance, methods, numbers, integer

我有两节课：

```
public class ClassA {
    public void method(Number n) {
        System.out.println("ClassA: " + n + " " + n.getClass());
    }
} 
```

和：

```
public class ClassB extends ClassA {            
    public void method(Integer d) {
        System.out.println("ClassB: " + d + " " + d.getClass());
    }
} 
```

但是当我运行时：

```
ClassA a = new ClassB(); 
a.method(3); 
```

我得到：

```
ClassA: 3 class java.lang.Integer 
```

我的问题是，为什么不`ClassB`使用 's 方法？ `a`是 的一个实例`ClassB`，而`ClassB`'s`method()`有一个`Integer`参数...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-11T04:25:51.143

> 我的问题是，为什么不使用 ClassB 的方法？

不对。使用的方法是`ClassB`的方法，它继承自`ClassA`。

* * *

我认为这里造成混乱的主要原因是该方法实际上没有**被覆盖**，而是被**重载**了。虽然`Integer`是 的子类型`Number`，但由于*方法参数*在 Java 中是不变的，因此方法`public void method(Integer d)`不会覆盖方法`public void method(Number n)`。因此，`ClassB`最终有两个（重载）方法。

静态绑定用于重载方法，编译器选择参数类型最具体的方法。但是在这种情况下，为什么编译器选择`public void method(Number n)`而不是`public void method(Integer d)`. 这是因为您用来调用该方法的引用是 type 的`ClassA`。

```
ClassA a = new ClassB(); //instance is of ClassB (runtime info)
a.method(3);             //but the reference of type ClassA (compiletime info) 
```

唯一的方法`ClassA`是`public void method(Number n)`，所以这就是编译器选择的方法。请记住，这里预期的参数类型是`Number`，但传递的实际参数（整数 3）被自动装箱为类型`Integer`。它起作用的原因是*方法参数*在 Java 中是协变的。

现在，我想很清楚为什么它会打印

> ClassA：3类java.lang.Integer

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-11T04:10:24.947

您的问题源于以下事实（引用自有关继承的官方 Java 教程）：

> 在子类中，您可以重载从超类继承的方法。这种重载的方法既不会隐藏也不会覆盖超类方法——它们是新方法，是子类独有的。

有关详细信息，请参阅官方 Java 教程：http: [//docs.oracle.com/javase/tutorial/java/IandI/override.html](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-11T04:33:20.457

a 是 ClassA 类型，因此 ClassB 中的方法对实例 a**不可见**，除非它被声明为 ClassB

```
ClassB a = new ClassB(); 
```

将产生您预期的输出。Number 是 Integer 的超类型。因此，您传入的任何内容都将自动装箱为适当的子类型，并且将调用 ClassA 中的方法。尝试通过

```
a.method(3.0f) // Float
a.method(3.0) // Double 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-11T04:09:54.140

因为参数中的 Number 和 Integer 创建了两个不同的方法签名。因此，B 类只有两种不同的方法可供使用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-11T04:13:21.617

因为数字 3 自动装箱为整数。

请看下面的链接： [http ://www.javabeat.net/articles/print.php?article_id=31](http://www.javabeat.net/articles/print.php?article_id=31)

一般规则：参数被隐式扩展以匹配方法参数。从一个包装类扩展到另一个是不合法的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-11T04:22:33.303

由于这两个操作具有不同的参数（参数）类型（即使它们是子类），它们被认为是不同的（与 C 不同），您没有用第二个方法覆盖第一个方法。相反，你最终得到了 B 类，它现在有两种方法

```
 public void method(Number n)  and
 public void method(Integer n) 
```

默认情况下，当您执行 a.method(3) 3 时，它被强制转换为 Integer 对象。您可以通过调用来验证这一点

```
a.method((Number)3);      //this would call the second method/operation. 
```

您还可以通过使用反射迭代 B 类的方法来验证这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-11T04:33:04.513

```
 class ClassA
  {
     public void method( Number n )
     {
        System.out.println( "ClassA: " + n + " " + n.getClass() );
     }// void method( Number n )

  }// class ClassA

  public class ClassB
     extends
        ClassA
  {
     public void method( Integer d )
     {
        System.out.println( "ClassB: " + d + " " + d.getClass() );
     }// void method( Integer d )

     public static void main( String[] args )
     {
        ClassB b = new ClassB(); 
        ClassA a = b; 
        a.method( new Integer( 3 )); // 1\. ClassA: 3 class java.lang.Integer
        b.method( new Integer( 4 )); // 2\. ClassB: 4 class java.lang.Integer
        b.method( new Float( 5.6 )); // 3\. ClassA: 5.6 class java.lang.Float
     }// void main( String[] args )

  }// class ClassB 
```

1.  由于这两个方法没有重载，并且实例属于 a 类，因此不会发生从 A 到 B 的调度
2.  B有一个最佳匹配方法，然后选择它
3.  B 不能处理 Float 类型的参数，所以选择了 A 方法

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-11T05:10:48.097

为了清除我添加的`show()`方法`classA`和`classB`.

```
public void show() {
        System.out.println(getClass());
    } 
```

我这样叫，

```
 // Case 1       
    ClassA a = new ClassB();
    a.method(3);// ClassA: 3 class java.lang.Integer
    a.show(); // class ClassB

    // Case 2       
    ClassB b = new ClassB();
    b.method(3);// ClassB: 3 class java.lang.Integer
    b.show(); // class ClassB 
```

> 这里 method(Number n) 和 method(Integer d) 有不同的签名。它不是压倒一切的。它正在超载。
> 
> 但是 show() 方法是方法覆盖。

在情况 1 中， **对象 a 只能访问类 A 的方法。a 是 classA 类型，classB 中的方法不可见。** 这就是调用您的 classA 方法的原因。但是对于 show() 方法，因为它是被覆盖的方法，所以会调用 B 类的 show() 方法。

在情况 2 中，类 A 和 B 的两个方法都可以通过对象 b 访问，因为 ClassB 扩展了 ClassA。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-20T21:55:25.483

您有以下代码

```
Class A a = new ClassB(); 
a.method(3); 
```

但是假设您有一个方法，其中“a”和“3”作为参数传递给您，您仍然执行相同的代码

```
public void foo(A a, Number n)
{
    a.method(n);
} 
```

编译器不知道您是要传递 A 类还是 B 类（或数字或整数）。它仍然必须解析该方法，以便它可以对 a.method 的返回值进行类型检查

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-08T09:51:23.387

我对这个问题进行了一些研发，并提出了解决方案来消除你的困惑。希望它能帮助你理解。

查找以下代码：

```
class A {
    public void func(Number obj){
        System.out.println("In a func");
    }
    public void func(Integer obj){
        System.out.println("In b func");        
    }
}

class B extends A {
}

public class X {

    public static void main(String s[]){
        B b = new B();
        b.func(3);

        A a = new B();
        a.func(3);
    }
} 
```

如果您将运行此代码，您将得到输出：
**"In b func"**
**"In b func"**。

在这种情况下，这里有 4 种方法：

1.  A 类同时具有重载方法：func(Number)[say method 1] 和 func(Integer)[say method 2]
2.  由于继承，B 类也有 2 个方法。所以它有 func(Number)[say method 3] 和 func(Integer)[say method 4]

现在，当您在 B 的引用上调用 b.func(3) 时，它将看到“方法 3”和“方法 4”，它们具有最适合派生类的参数。这里 Number 和 Integer 类都适合参数**3**，但是 Integer 是从 Number 派生的，所以 func(Integer)[method 3] 将被调用。因此输出是“In b func”

由于相同的逻辑，第二个输出也是“In b 方法”。首先请记住，您不能在 A 类引用上调用 A 类没有的任何方法。所以你只能在它拥有的类 A 的引用上调用这些方法。无论实例是 A 类还是它的子类的实例。

您需要从两个方面来理解它，编译和链接和执行。

现在 A 类同时具有这两种方法，因此当编译器在 A 类的引用上查看 a.func(3) 时。编译器将查看 A 类的“方法 1”和“方法 2”并绑定具有参数的方法签名最适合派生类。“func（整数）”也是如此。

现在在运行时，func(Integer) 将被执行，它被 B 类调用，因为实例属于 B 类。（在运行时，方法从类执行，其实例正在调用方法）。所以方法4被调用。因此输出。

我敢肯定，你会有困惑，为什么不调用方法 2 而调用方法 4。

如果您将运行以下代码：

```
class A {
    public void func(Number obj){
        System.out.println("In a func");
    }
    public void func(Integer obj){
        System.out.println("In b func");        
    }
}

class B extends A {
    public void func(Number obj){
        System.out.println("In a func of class B");
    }
    public void func(Integer obj){
        System.out.println("In b func of class B");     
    }
}

public class X {

    public static void main(String s[]){
        B b = new B();
        b.func(3);

        A a = new B();
        a.func(3);
    }
} 
```

输出将是：
**在 B 类的
b 函数中 在 B 类的 b 函数中**

现在你可以通过上面的解释来理解这段代码了。我们在类 A 或类 B 的引用上调用了 fun(3)。每次调用类 B 的方法（方法 4）。因为实例是B类的。但是如果A类就没有（方法2）。不会在“a.func(3)”上调用方法 4

让我们看看下面的代码：

```
class A {
    public void func(Number obj){
        System.out.println("In a func");
    }
}

class B extends A {
    public void func(Integer obj){
        System.out.println("In b func");        
    }
}
public class X {

    public static void main(String s[]){
        B b = new B();
        b.func(3);

        A a = new B();
        a.func(3);
    }
} 
```

该程序的输出是：
**In b func
In a func**

现在您可能会感到困惑，为什么它的输出不同？

请记住，这里不是 4 种方法。这里只有3种方法：

1.  A 类中的 func(Number)
2.  B 类中的 func(Number)，继承自 A 类
3.  B 类中的 func(Integer)

现在如果你调用 a.fun(3)，A 类没有 func(Integer)，你不能调用 A 类没有引用的方法。所以编译器不会绑定 func(Integer) 因为类 A 中没有这样的方法。但是还有另一个方法 func(Number) 可以用相同的代码调用 a.func(3) java 的自动装箱概念。

所以当a.func(3)被调用时，它基本上是调用func(Number)。现在因为实例属于 B 类，所以调用 B 类的方法 func(Number)。因此输出是“In a func”

这是一个很大的答案，但我解释得很深入，所以你可以很容易地理解不同用例中输出的不同可能性。

享受编码！

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-09-05T12:32:58.180

在重载中，方法解析总是由编译器根据引用类型来处理。因此，在重载运行时对象[new ClassB()] 中没有任何作用。因此，在您的情况下，执行了 ClassA 的方法。

```
ClassA a = new ClassB(); 
a.method(3); 
```

# php - PHP Doctrine 保存和读取 BLOB 后

> ID：12832060
> 
> 赞同：1
> 
> 时间：2012-10-11T04:07:39.350
> 
> 标签：php, image, doctrine, blob

我正在使用 Doctrine 将图像保存到数据库中，并映射为：

```
/** @Column(type="blob") **/
protected $data; 
```

一切似乎都很好。我可以通过这种方式将图像数据保存在数据库中：

```
 $largeImage = new ImageData();
    $handle = fopen($imagePath, "r");
    $bytes = fread($handle, filesize($imagePath));
    $largeImage->setData(base64_encode($bytes));
    fclose($handle);

    $entityManager->persist($largeImage);
    $entityManager->flush(); 
```

好的。数据已保存，但当我需要读取它时，我不能。

```
var_dump($image->getData());
// outputs resource(1) of type (stream) 
```

所以，我尝试了这个：

```
$fp = fopen('image.jpg', 'w');
fwrite($fp, base64_decode(stream_get_contents($image->getData())));
fclose($fp); 
```

并且文件的内容不是来自图像，因此图像不是由 Windows 照片查看器呈现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:12:49.620

我通过这样做解决了它：

```
$image = stream_get_contents($image->getData());
$hex = substr($image, 1);
$image =  pack("H*", $hex);

echo $image; 
```

我的 $image 内容是以 x 开头的十六进制字符串，如果您的内容以 0x 开头，请执行以下操作： substr($image, 2);

# java - 将返回值添加到 arrayList Java

> ID：12832062
> 
> 赞同：0
> 
> 时间：2012-10-11T04:07:45.433
> 
> 标签：java, arraylist, return

我迷失在代码中。我正在尝试将返回值添加到 ArrayList 中。返回的值被打印出来，我尝试将其转换为可以将其添加到 ArrayList。但似乎没有任何效果。

我`public void getHeap()`喜欢从中检索`return`值`public double remove()`以添加到 ArrayList 中。它一直在告诉我`source not found`。有什么帮助吗？

谢谢！

```
public class MinHeap<E extends Comparable<E>> {

    List<E> h = new ArrayList<E>();
    ArrayList<Double> arrayPostingsList = new ArrayList<Double>();

    public void getHeap() {
        MinHeap<Double> heap = new MinHeap<Double>(new Double[]{0.5015530788463572, 0.5962770626486013, 0.4182157748994399});

        ArrayList<Double> newArray = new ArrayList<Double>();
        System.out.println();

        while (!heap.isEmpty()) {
            System.out.println(heap.remove());
            newArray.add(heap.remove());
        }

    }

    public double remove() {
        E removedNode = h.get(0);
        E lastNode = h.remove(h.size() - 1);
        percolateDown(0, lastNode);

        return (Double) removedNode;
    }

    public MinHeap() {
    }

    public MinHeap(E[] keys) {
        for (E key : keys) {
            h.add(key);
        }

        for (int k = h.size() / 2 - 1; k >= 0; k--) {
            percolateDown(k, h.get(k));
        }
    }

    public void add(E node) {
        h.add(null);
        int k = h.size() - 1;
        while (k > 0) {
            int parent = (k - 1) / 2;
            E p = h.get(parent);
            if (node.compareTo(p) >= 0) {
                break;
            }
            h.set(k, p);
            k = parent;
        }
        h.set(k, node);
    }

    public E min() {
        return h.get(0);
    }

    public boolean isEmpty() {
        return h.isEmpty();
    }

    void percolateDown(int k, E node) {
        //....
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:20:51.670

尝试改用这个：

```
public E remove() {
    E removedNode = h.get(0);
    E lastNode = h.remove(h.size() - 1);
    percolateDown(0, lastNode);
    return removedNode;
} 
```

另外，我认为`arrayPostingList`应该是 type `E`，而不是明确的`Double`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:35:45.793

你打`remove()`了两次电话：

```
while (!heap.isEmpty()) {
    System.out.println(heap.remove());
    newArray.add(heap.remove());
} 
```

在最后一次迭代中，当只剩下一个项目时，第二次调用将失败。

我认为你的意图是：

```
while (!heap.isEmpty()) {
    final Double removed = heap.remove();
    System.out.println(removed);
    newArray.add(removed);
} 
```

# java - Date format in android 11 Oct 2012 15:40

> ID：12832067
> 
> 赞同：-1
> 
> 时间：2012-10-11T04:08:29.050
> 
> 标签：java, android, sqlite

I want to insert date in below format in sqlite through android:

11 Oct 2012 15:40

Please help me how to achieve this??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:19:03.793

use this code

```
SimpleDateFormat formatter = new SimpleDateFormat("dd MMM yyyy HH:mm");
// date is Object of Date class of java.util
String s = formatter.format(date);
// now you can save 's' to the sqlite. 
```

# ruby-on-rails-3 - rspec 的 Rails 错误：“预期有效？返回 true，得到 false”

> ID：12832071
> 
> 赞同：0
> 
> 时间：2012-10-11T04:09:02.700
> 
> 标签：ruby-on-rails-3, rspec-rails, railstutorial.org

我是 Rails 新手，在完成 Michael Hartl 的 Ruby on Rails 教程后，我正在尝试扩展一些功能。我首先更改了微博，以便它们收集更多数据。

运行 rspec 测试时，我无法弄清楚为什么会出现此错误：

```
$ bundle exec rspec spec/models/micropost_spec.rb
...............F.....

Failures:

  1) Micropost 
     Failure/Error: it { should be_valid }
       expected valid? to return true, got false
     # ./spec/models/micropost_spec.rb:46:in `block (2 levels) in <top (required)>'

Finished in 1.57 seconds
21 examples, 1 failure

Failed examples:

rspec ./spec/models/micropost_spec.rb:46 # Micropost 
```

**micropost_spec.rb**

```
require 'spec_helper'

describe Micropost do

  let(:user) { FactoryGirl.create(:user) }
  before { @micropost = user.microposts.build(content: "Lorem ipsum", 
    title: "This is a test title", 
    privacy: "1", 
    groups: "This is a test Group", 
    loc1T: "21 Bond St. Toronto, Ontario",
    loc1Lat: "43.654653",
    loc1Lon: "-79.377627",
    loc2T: "21 Bond St. Toronto, Ontario",
    loc2Lat: "43.654653",
    loc2Lon: "-79.377627",
    startTime: "Jan 1, 2000 12:01:01",
    endTime: "Jan 2, 2000 12:01:01",
    imageURL: "http://i.cdn.turner.com/cnn/.e/img/3.0/global/header/hdr-main.gif") 

    puts @micropost.errors.messages
   }

  #before { @micropost = user.microposts.build(title: "This is a test title") }
  #before { @micropost = user.microposts.build(privacy: "1") }
  #before { @micropost = user.microposts.build(groups: "This is a test Group") }
  #before { @micropost = user.microposts.build(loc1T: "21 Bond St. Toronto, Ontario") }
  #before { @micropost = user.microposts.build(loc1Lat: "43.654653") }
  #before { @micropost = user.microposts.build(loc1Lon: "-79.377627") }
  #before { @micropost = user.microposts.build(loc2T: "21 Bond St. Toronto, Ontario") }
  #before { @micropost = user.microposts.build(loc2Lat: "43.654653") }
  #before { @micropost = user.microposts.build(loc2Lon: "-79.377627") }
  #before { @micropost = user.microposts.build(startTime: "Jan 1, 2000 12:01:01") }
  #before { @micropost = user.microposts.build(endTime: "Jan 2, 2000 12:01:01") }
  #before { @micropost = user.microposts.build(imageURL: "http://i.cdn.turner.com/cnn/.e/img/3.0/global/header/hdr-main.gif") }

  subject { @micropost }

  it { should respond_to(:content) }
  it { should respond_to(:user_id) }
  it { should respond_to(:user) }

  it { should respond_to(:title) }
  it { should respond_to(:privacy) }
  it { should respond_to(:groups) }
  it { should respond_to(:loc1T) }
  it { should respond_to(:loc1Lat) }
  it { should respond_to(:loc1Lon) }
  it { should respond_to(:loc2T) }
  it { should respond_to(:loc2Lat) }
  it { should respond_to(:loc2Lon) }
  it { should respond_to(:startTime) }
  it { should respond_to(:endTime) }
  it { should respond_to(:imageURL) }

  its(:user) { should == user }

  it { should be_valid }

  describe "accessible attributes" do
    it "should not allow access to user_id" do
      expect do
        Micropost.new(user_id: user.id)
      end.to raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end    
  end

  describe "when user_id is not present" do
    before { @micropost.user_id = nil }
    it { should_not be_valid }
  end

  describe "with blank content" do
    before { @micropost.content = " " }
    it { should_not be_valid }
  end

  describe "with content that is too long" do
    before { @micropost.content = "a" * 141 }
    it { should_not be_valid }
  end
end 
```

**微博.rb**

```
class Micropost < ActiveRecord::Base
  attr_accessible :content, :title,:privacy,:groups,:loc1T,:loc1Lat,:loc1Lon,:loc2T,:loc2Lat,:loc2Lon,:startTime,:endTime,:imageURL

  belongs_to :user

  validates :user_id, presence: true
  validates :title, presence: true
  validates :privacy, presence: true
  validates :groups, presence: true
  validates :loc1T, presence: true
  validates :loc1Lat, presence: true
  validates :loc1Lon, presence: true
  validates :loc2T, presence: true
  validates :loc2Lat, presence: true
  validates :loc2Lon, presence: true
  validates :startTime, presence: true
  validates :endTime, presence: true
  validates :imageURL, presence: true

  validates :content, presence: true, length: { maximum: 140 }

  default_scope order: 'microposts.created_at DESC'

  def self.from_users_followed_by(user)
    followed_user_ids = "SELECT followed_id FROM relationships
                         WHERE follower_id = :user_id"
    where("user_id IN (#{followed_user_ids}) OR user_id = :user_id", 
          user_id: user.id)
  end
end 
```

**工厂.rb**

```
 FactoryGirl.define do
  factory :user do
    #name     "Michael Hartl"
    #email    "michael@example.com"
    sequence(:name)  { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}@example.com"} 
    password "foobar"
    password_confirmation "foobar"

    factory :admin do
      admin true
    end
  end

   factory :micropost do
    content "Lorem ipsum"
    title "This is a test title"
    privacy "1"
    groups "This is a test Group"
    loc1T "21 Bond St. Toronto, Ontario"
    loc1Lat "43.654653"
    loc1Lon "-79.377627"
    loc2T "21 Bond St. Toronto, Ontario"
    loc2Lat "43.654653"
    loc2Lon "-79.377627"
    startTime "Jan 1, 2000 12:01:01"
    endTime "Jan 2, 2000 12:01:01"
    imageURL "http://i.cdn.turner.com/cnn/.e/img/3.0/global/header/hdr-main.gif"

    user
  end
end 
```

我不确定您是否还有其他需要我发布的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:58:12.400

这摆脱了错误。

**micropost_spec.rb**

```
describe Micropost do

  let(:user) { FactoryGirl.create(:user) }
  before { @micropost = user.microposts.build(content: "Lorem ipsum", 
    title: "This is a test title", 
    privacy: "1", 
    groups: "This is a test Group", 
    loc1T: "21 Bond St. Toronto, Ontario",
    loc1Lat: "43.654653",
    loc1Lon: "-79.377627",
    loc2T: "21 Bond St. Toronto, Ontario",
    loc2Lat: "43.654653",
    loc2Lon: "-79.377627",
    startTime: "Jan 1, 2000 12:01:01",
    endTime: "Jan 2, 2000 12:01:01",
    imageURL: "http://i.cdn.turner.com/cnn/.e/img/3.0/global/header/hdr-main.gif") 

puts @micropost.errors.messages
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:10:18.560

它无效，因为您的模型对象没有通过您的验证。在您的`before`块中，在您创建之后`@micropost`，添加此行以查看哪些验证失败

```
puts @micropost.errors.messages 
```

将有一个失败的验证（字段和错误消息）哈希。修复这些，然后您的对象将有效。一些较早的评论者对从哪里开始帮助解决问题提出了建议。

# opencv - 在 OpenCV 人脸检测应用程序中抛出 SEHException

> ID：12832073
> 
> 赞同：0
> 
> 时间：2012-10-11T04:09:31.937
> 
> 标签：opencv

我创建了一个简单的 OpenCV 窗体应用程序，它从网络摄像头捕获图像流并检测面部，然后将图像显示到图片框。我创建了一个单独的线程来执行人脸检测器功能。表单有一个按钮和图片框，当按下按钮时，人脸检测器线程启动。它可以正常工作大约 2 分半钟，然后抛出此异常：

```
An unhandled exception of type 'System.Runtime.InteropServices.SEHException' occurred in Sampleapp.exe

Additional information: External component has thrown an exception. 
```

以下是人脸检测功能的完整代码：

```
#include "stdafx.h"
#include "Form1.h"
#include <cv.h>
#include <highgui.h>

namespace Sampleapp {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    const char *frontalface_cascade_name = "haarcascade_frontalface_alt.xml";
    CvHaarClassifierCascade *frontalface_cascade;
    //----------------------
    // Face detector
    void Form1::face_detector()
    {
        IplImage* img;
        IplImage *img_gray;
        CvMemStorage *storage;
        CvSeq* faces;
        /*CvSeq* righteye;
        CvSeq* lefteye;
        CvSeq* nose;*/
        frontalface_cascade = ( CvHaarClassifierCascade* )cvLoad( frontalface_cascade_name, 0, 0, 0 );
        while(this->button1->Text == "no")
        {
            try             
            {
                storage = cvCreateMemStorage( 0 );
                CvCapture *capture = cvCreateCameraCapture(0);
                img = cvQueryFrame(capture);
                img_gray = cvCreateImage( cvSize( img->width, img->height ), IPL_DEPTH_8U, 1 );
                cvCvtColor( img, img_gray, CV_BGR2GRAY );
                cvEqualizeHist( img_gray, img_gray );
                faces = cvHaarDetectObjects( img_gray, frontalface_cascade, storage, 1.1, 2, CV_HAAR_FIND_BIGGEST_OBJECT, cvSize(40, 40));
                this->pictureBox1->Image = (gcnew System::Drawing::Bitmap(img->width,img->height,img->widthStep, System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)img->imageData));                            
                cvReleaseMemStorage(&storage);
            }
            catch (System::NullReferenceException^ m)
            {
            }
        }
    }
} 
```

异常被抛出：

```
faces = cvHaarDetectObjects( .....) 
```

部分。

这是调试输出：

```
First-chance exception at 0x74b9c41f in Sampleapp.exe: Microsoft C++ exception: cv::Exception at memory location 0x069ce950.. 
A first chance exception of type 'System.Runtime.InteropServices.SEHException' occurred in Sampleapp.exe 
An unhandled exception of type 'System.Runtime.InteropServices.SEHException' occurred in Sampleapp.exe 
Additional information: External component has thrown an exception. 
```

如果有人知道我应该怎么做来解决这个问题，请告诉我。

真诚的，约西亚

# struts2 - struts 2 url 调度程序转发

> ID：12832075
> 
> 赞同：0
> 
> 时间：2012-10-11T04:09:46.833
> 
> 标签：struts2

嗨，在 web.xml 中使用以下代码时，我遇到了 struts2 的问题

```
 <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>        
     <dispatcher>REQUEST</dispatcher>
     <dispatcher>FORWARD</dispatcher>
  </filter-mapping> 
```

当我像上面一样配置时，所有jsp中的所有jstl标签都不起作用但是当我删除时

```
<dispatcher>FORWARD</dispatcher> 
```

从上面的配置他们正在工作

但我 `<dispatcher>FORWARD</dispatcher>` 要求重写网址

任何人都可以建议我做什么来解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:13:22.047

尝试使用：

```
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter 
```

而不是`FilterDispatcher`, 那已被弃用。更多信息[在这里](https://issues.apache.org/jira/browse/WW-3742)。

# php - 使用 jQuery mCustomScrollbars 调整 Div 高度在第一次加载时不正确

> ID：12832079
> 
> 赞同：1
> 
> 时间：2012-10-11T04:10:03.250
> 
> 标签：php, jquery, css, html

调整 a 的高度时出现问题`div`。

我用 JavaScript 设置了高度`div`，但它只在我刷新页面 (F5) 时才有效。

我怎样才能让它在不刷新的情况下工作？

代码如下：

```
<script>
$(document).ready(function (){  

    $("#wr1").hide();
    $("#header").hide();

    var aa = $("#wr1").height();
    var bb = aa-80;
    var cc = $("#detail-about1").width();

    $("#detail-about1").css('height',bb);
    $("#wr-close").css('width',cc);

    $(".nav li a").click(function (){
            $("#wr1").slideDown();
            $("#header").slideDown(); 
            $("#footer").slideUp();                                           
            mCustomScrollbars();
        });
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:26:02.537

您的调整大小代码仅在页面加载时触发。查看 JQuery 的 resize() 方法，以便在调整窗口大小时调用代码。

编辑：查看您更新的代码块，也许您的意思是从您的点击功能调用调整大小？无论哪种方式，将调整大小的代码移动到一个可以根据需要调用的函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:20:40.380

每当您想调用该单击工作时。触发它..在任何你想让它工作的地方调用这条线

```
$(".nav li a").trigger('click'); 
```

# javascript - KnockoutJS：绑定到具有非法名称的对象

> ID：12832080
> 
> 赞同：3
> 
> 时间：2012-10-11T04:10:04.790
> 
> 标签：javascript, jquery, xml, json, knockout.js

我正在处理的项目需要对有些复杂的 XML 文件进行大量工作，因此我将它们转换为 SimpleXML 数组，对其进行 JSON 编码并通过 Ajax 将其传递给 Knockout。

问题是几乎每个属性都有属性，SimpleXML 将其塞入一个名为`@attributes`. 当我尝试绑定到它时`myObject().@attributes.Name`，我得到一个错误

```
Message: SyntaxError: Unexpected token ILLEGAL;
Bindings value: text: alertObj().@attributes.Name 
```

我已经尝试过`'@attributes', ['@attributes'], [@attributes]`，但没有任何效果。我还尝试了各种转义字符和 unicode 转义。

这是json的样子：

```
 var alertObject =
            {
                "@attributes":
                    {
                        "DescriptionContentType":"text\/plain",
                        "Description":"",
                        "IsActive":"true",
                        "Name":"Apache Requests Per Interval"
                    },
                "Frequency":
                    {
                        "PeriodInSeconds":"60"
                    },
                "MetricLevelNotification":"false",
                "AlertTriggerMode":"2",
                "CautionActionDelay":"0",
                "DangerActionDelay":"0",
                "CautionActionList":
                    {
                        "ActionID":
                            {
                                "ManagementModuleName":"Base Module",
                                "ConstructName":"Base SMTP Mail Action"
                            }
                    },
                "DangerActionList":
                    {
                        "ActionID":
                            {
                                "ManagementModuleName":"Base Module",
                                "ConstructName":"Base SMTP Mail Action"
                            }
                    },
                "MetricGroupingID":
                    {
                        "ManagementModuleName":"Base Module",
                        "ConstructName":"Apache Requests Per Interval"
                    },
                "AlertCombineOperator":"1",
                "AlertCompareOperator":"2",
                "CautionTargetValue":"2000",
                "DangerTargetValue":"15000",
                "CautionMinNumPerPeriod":"3",
                "CautionAlertPeriod":"6",
                "DangerMinNumPerPeriod":"1",
                "DangerAlertPeriod":"1"
            }; 
```

我想避免以任何方式改变结构和名称。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T04:17:47.197

那是因为它不是一个有效的 javascript 变量名：

> 标识符必须以 $、_ 或 Unicode 类别“大写字母 (Lu)”、“小写字母 (Ll)”、“标题字母 (Lt)”、“修饰符字母 (Lm)”、“其他”中的任何字符开头字母 (Lo)”或“字母编号 (Nl)”。

来自[http://mathiasbynens.be/notes/javascript-identifiers](http://mathiasbynens.be/notes/javascript-identifiers)

变量名不能以 @ 开头，因此您会看到错误。附加单引号、括号或其他任何东西没有意义。变量名根本无效，您需要更改从服务器返回数据的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:00:59.080

我遇到了类似的问题，我完全同意您绝对应该更改从服务器返回数据的方式。但是，如果您确实无法控制数据或暂时无法影响数据，您可能可以使用以下方式渲染您想要的内容：

```
$data['@attributes'].Name 
```

# ios - NSFetchedResultsController 还是带回来了 NSManagedObject，已经被删除了

> ID：12832094
> 
> 赞同：1
> 
> 时间：2012-10-11T04:11:50.350
> 
> 标签：ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我已经检查了几个相关问题，例如[如何判断 `NSManagedObject` 是否已被删除？](https://stackoverflow.com/questions/4340445/how-can-i-tell-whether-an-nsmanagedobject-has-been-deleted),[避免获取已删除的 NSManagedObjects](https://stackoverflow.com/questions/9415071/avoid-fetching-deleted-nsmanagedobjects)。

但是我确实使用了`deleteCacheWithName`and `deleteObject:`，`save`并且检查了该对象也已被删除。每次我从后台删除应用程序时。重新开始，删除的数据`NSManagedObject`又回来了。

这就是我删除的方式`NSManagedObject`。

```
[NSFetchedResultsController deleteCacheWithName:@"MyLists"];
[_fetchedResultsController.managedObjectContext deleteObject:list];
NSError *error;
if ([_fetchedResultsController.managedObjectContext save:&error]) {
  NIDPRINT(@"managedObjectContext Save Error: %@", error.localizedDescription);
}
NIDPRINT(@"Check hasManagedObjectBeenDeleted: %@", [self hasManagedObjectBeenDeleted:list] ? @"YES" : @"NO"); 
```

这就是我最初的方式`NSFetchedResultsController`

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"MyList"];
fetchRequest.sortDescriptors = @[ [[NSSortDescriptor alloc] initWithKey:@"listID" ascending:YES] ];
NSString *userName = [[ICAccountManager sharedManager] getUsername];
NSString *format = [NSString stringWithFormat:@"username==\"%@\"", userName];
fetchRequest.predicate = [NSPredicate predicateWithFormat:format];

fetchRequest.propertiesToFetch = [NSArray arrayWithObject:@"count"];
fetchRequest.shouldRefreshRefetchedObjects = YES;
_fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[(id)[[UIApplication sharedApplication] delegate] managedObjectContext] sectionNameKeyPath:nil cacheName:@"lists"];
_fetchedResultsController.delegate = self;
[_fetchedResultsController performSelectorOnMainThread:@selector(performFetch:) withObject:nil waitUntilDone:YES modes:@[ NSRunLoopCommonModes ]]; 
```

有什么办法可以检查我是否错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:15:07.763

删除某些内容后，应添加：

```
NSError *error;
[self.managedObjectContext save:&error]; 
```

这将提交该操作。

# svn - 使用 Subversion 设置 Symfony 2.1 时出现错误 E155010

> ID：12832099
> 
> 赞同：0
> 
> 时间：2012-10-11T04:12:17.853
> 
> 标签：svn, symfony, symfony-2.1

我正在使用 Symfony 2.1.2 和 Subversion 版本 1.7.6 (r1370777)。

我正在尝试使用 Subversion 使用以下食谱设置 Symfony 项目：http: [//symfony.com/doc/current/cookbook/workflow/new_project_svn.html](http://symfony.com/doc/current/cookbook/workflow/new_project_svn.html)

但是在运行命令时出现错误，`svn propset svn:ignore "*" app/cache/`并且`svn propset svn:ignore "*" app/logs/`. 这是错误消息：

```
D:\xampp\htdocs\symfo-app-21>svn propset svn:ignore "*" app/cache/
'.travis.yml' is not under version controlsvn: E155010: The node 'D:\xampp\htdocs\symfo-app-21\.trav
is.yml' was not found.

D:\xampp\htdocs\symfo-app-21>svn propset svn:ignore "*" app/logs/
'.travis.yml' is not under version controlsvn: E155010: The node 'D:\xampp\htdocs\symfo-app-21\.trav
is.yml' was not found. 
```

可能是什么问题呢。另外，我将使用 NetBeans 7.2 IDE，也许有一种方法可以通过 NetBeans 7.2 忽略与说明书上的命令行版本匹配的文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:38:53.570

这个错误是由svn客户端愚蠢造成的。我在 Windows 上遇到了同样的“问题”（哈哈，明白了吗？）。

svn 客户端将星号解释为通配符，因此将与通配符匹配的每个文件替换为命令行的参数。因此：

```
svn propset svn:ignore "*" app/cache/ 
```

被解释为：

```
svn propset svn:ignore "D:\xampp\htdocs\is.yml" app/cache/ 
```

并且因为“D:\xampp\htdocs\is.yml”不受版本控制，命令行客户端会抛出错误。我知道，这种默认行为没有意义。

有三种方法可以处理这个问题。

1.  将通配符放入文件中，并使用该文件执行propset：

    ```
    echo * > temp-svnignore
    svn propset svn:ignore -F temp-svnignore app/cache/ app/logs/
    del temp-svnignore 
    ```

2.  使用道具：

    ```
    set EDITOR=notepad
    svn propedit svn:ignore app/cache/ app/logs/ 
    ```

使用此方法，将为您设置属性的每个路径打开一个编辑器窗口。在上面的示例中，将打开两个编辑器窗口，按照指定的顺序一个接一个。

1.  指定一个与当前目录中的任何内容都不匹配的通配符：

    ```
    svn propset svn:ignore *.php app/cache/
    svn propset svn:ignore *.log app/logs/ 
    ```

# opengl - OpenGL中2D鼠标点击的3D坐标不正确？

> ID：12832102
> 
> 赞同：2
> 
> 时间：2012-10-11T04:12:24.500
> 
> 标签：opengl, glut, freeglut, coordinate-transformation, glu

我想在 3D 中获得鼠标点击位置。下面是我的代码，很简单，有什么问题。我在哪里做错了..？为什么我没有得到 x 和 y 的确切值？任何的想法 ？

```
void glPerspective()
{
    glViewport(0, 0, WINDOW_SIZE_W, WINDOW_SIZE_H);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0, (GLdouble)WINDOW_SIZE_W / (GLdouble)WINDOW_SIZE_H, 0.1, 100000.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0.0, 0.0, m_zoom,   0.0, 0.0, 0.0,   0.0, 1.0, 0.0);
}

void display()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();    
      glPerspective();     // perspective view
      Some_rotation_and_translation();
      glGetDoublev( GL_PROJECTION_MATRIX, OGLMprojection );
      glGetDoublev( GL_MODELVIEW_MATRIX, OGLMmodelview );
      glGetIntegerv( GL_VIEWPORT, OGLMviewport );
      Render_Triangular_model();
    glPopMatrix();
    swapbuffer();
}
    GLpoint GetOGLMousePos(GLint x, GLint y)
    {
        GLdouble winX = 0.0, winY = 0.0, winZ = 0.0;
        GLdouble posX = 0.0, posY = 0.0, posZ = 0.0;
        winX = (float)x;
        winY = (float)OGLMviewport[3] - (float)y;           // invert winY so that down lowers value
        glReadPixels( x, GLint(winY), 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &winZ );
        gluUnProject( winX, winY, winZ, OGLMmodelview, OGLMprojection, OGLMviewport, &posX, &posY, &posZ);
        return GLpoint(posX, posY, posZ);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:45:58.373

我认为当您*调用*`glGetDoublev( GL_MODELVIEW_MATRIX, OGLMmodelview )`. 该矩阵表示从局部对象坐标到世界坐标的变换。

我很确定`gluUnProject`假设它使用*视图*变换矩阵进行操作，该矩阵从世界坐标映射到相机空间坐标。

所以，我认为这是不匹配的问题，并且可以通过将 glGet* 调用移出 glPushMatrix - glPopMatrix 块来解决。

实际上，我认为获取`GL_PROJECTION_MATRIX`and`GL_VIEWPORT`是可以而且应该在鼠标功能中完成的事情，如本示例所示（由[Tomas Hamala 提供](http://hamala.se/forums/viewtopic.php?t=20)）：

```
/*
    gcc -Wall -lglut -lGLU -lGL unproject.c -o unproject
 */
#include <GL/glut.h>

void Display();
void Reshape(int w,int h);
void Mouse(int button,int state,int x,int y);

int main(int argc,char **argv) {
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB|GLUT_DEPTH);
    glutInitWindowSize(500,500);
    glutInitWindowPosition(100,100);
    glutCreateWindow(argv[0]);
    glutDisplayFunc(Display);
    glutReshapeFunc(Reshape);
    glutMouseFunc(Mouse);

    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glEnable(GL_DEPTH_TEST);

    glutMainLoop();
    return 0;
}

GLdouble ox=0.0,oy=0.0,oz=0.0;
void Display() {
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    gluLookAt(10.0,0.0,20.0,0.0,0.0,0.0,0.0,1.0,0.0);

    glPushMatrix();
    glRotatef(45,1.0,0.0,0.0);
    glutSolidTorus(4.0,5.0,20,20);
    glPopMatrix();

    glPushMatrix();
    glDepthMask(GL_FALSE);
    glTranslated(ox,oy,oz);
    glutSolidSphere(0.5,15,15);
    glDepthMask(GL_TRUE);
    glPopMatrix();

    glFlush();
}

void Reshape(int w,int h) {
    glViewport(0,0,w,h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0,(float)w/(float)h,5.0,30.0);
    glMatrixMode(GL_MODELVIEW);
}

void Mouse(int button,int state,int x,int y) {
    GLint viewport[4];
    GLdouble modelview[16],projection[16];
    GLfloat wx=x,wy,wz;

    if(state!=GLUT_DOWN)
        return;
    if(button==GLUT_RIGHT_BUTTON)
        exit(0);
    glGetIntegerv(GL_VIEWPORT,viewport);
    y=viewport[3]-y;
    wy=y;
    glGetDoublev(GL_MODELVIEW_MATRIX,modelview);
    glGetDoublev(GL_PROJECTION_MATRIX,projection);
    glReadPixels(x,y,1,1,GL_DEPTH_COMPONENT,GL_FLOAT,&wz);
    gluUnProject(wx,wy,wz,modelview,projection,viewport,&ox,&oy,&oz);
    glutPostRedisplay();
} 
```

这是一个完整的工作示例，因此即使您无法修复现有代码，您也可以使用它。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T09:08:24.993

感谢您宝贵的时间。现在它解决了。我在下面提到了这个问题。通常我们在编程过程中会忽略（浮点或双精度）变量，我认为我们不应该这样做。

```
GLpoint GetOGLMousePos(GLint x, GLint y)
{
GLfloat winX = 0.0, winY = 0.0, winZ = 0.0;       **// never ever make a mistake between float and double.
I wasted my 4 days to solve this and the problem was, I was using GLdouble here instead of GLfloat.
Try GLdouble here you will see a hell difference in output values.**

GLdouble posX = 0.0, posY = 0.0, posZ = 0.0;
winX = (float)x;
winY = (float)OGLMviewport[3] - (float)y;   // invert winY so that down lowers value
glReadPixels( x, int(winY), 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &winZ );
gluUnProject( winX, winY, winZ, OGLMmodelview, OGLMprojection, OGLMviewport, &posX, &posY, &posZ);
return GLpoint(posX, posY, -posZ); // invert z value
} 
```

# android - android中的multilevelexpandablelistview

> ID：12832105
> 
> 赞同：2
> 
> 时间：2012-10-11T04:13:12.707
> 
> 标签：android, expandablelistview, expandablelistadapter

我开发了一个`ExpandableListView`.

我的代码是：

```
public class SingleMenuItemActivity extends ExpandableListActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.particular);

    // Construct Expandable List
final String LABEL = "label";
final String VALUE = "value";
final String GROUP1 = "Group1";
final String GROUP2 = "Group1";
    final LayoutInflater layoutInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final ArrayList<HashMap<String, String>> headerData = new ArrayList<HashMap<String, String>>();

    final HashMap<String, String> group1 = new HashMap<String, String>();
    group1.put(GROUP1, "OrderInformation");
    headerData.add( group1 );

    final HashMap<String, String> group2 = new HashMap<String, String>();
    group2.put(GROUP2, "CustomerInformation");
    headerData.add( group2);
    final ArrayList<ArrayList<HashMap<String, Object>>> childData = new ArrayList<ArrayList<HashMap<String, Object>>>();

    final ArrayList<HashMap<String, Object>> group1data = new ArrayList<HashMap<String, Object>>();
    childData.add(group1data);

    final ArrayList<HashMap<String, Object>> group2data = new ArrayList<HashMap<String, Object>>();
    childData.add(group2data);

    // Set up some sample data in both groups
    for( int i=0; i<1; ++i) {
        final HashMap<String, Object> map = new HashMap<String,Object>();
        String s= getIntent().getStringExtra("payment_method");
        String s1= getIntent().getStringExtra("subtotal");
      map.put(LABEL, "Payment Method:");
        map.put(VALUE, s);
       group1data.add(map);
      final HashMap<String, Object> map1 = new HashMap<String, Object>();
    map1.put(LABEL, "Subtotal:");
    map1.put(VALUE, s1);
    group1data.add(map1);
      }
    final HashMap<String, Object> map = new HashMap<String, Object>();
    String s3= getIntent().getStringExtra("firstname");
    String s4= getIntent().getStringExtra("lastname");
    String s1= getIntent().getStringExtra("phone");
    String s2= getIntent().getStringExtra("url");
    map.put(LABEL, "Firstname::");
    map.put(VALUE, s3);
    group2data.add(map);

    // Create new map for second row
    // You should use loop to do this
    // insert new values and add to group row
    final HashMap<String, Object> map1 = new HashMap<String, Object>();
    map1.put(LABEL, "Lastname:");
    map1.put(VALUE, s4);
          group2data.add(map1);
        final HashMap<String, Object> map2 = new HashMap<String, Object>();
    map2.put(LABEL, "URL:");
    map2.put(VALUE, s1);
    group2data.add(map2);
    final HashMap<String, Object> map3 = new HashMap<String, Object>();
    map3.put(LABEL, "Phone:");
    map3.put(VALUE, s2);
    group2data.add(map3);
     setListAdapter(new SimpleExpandableListAdapter(this, headerData,
            R.layout.group_row, new String[] { GROUP1, GROUP2 }, // the names
                                                                // of the
                                                                // data
            new int[] { R.id.order }, // the text field to populate with the
                                        // field data
            childData, 0, null, new int[] {}) {
        @Override
        public View getChildView(int groupPosition, int childPosition,
                boolean isLastChild, View convertView, ViewGroup parent) {
            final View v = super.getChildView(groupPosition, childPosition,
                    isLastChild, convertView, parent);

            // Populate your custom view here
            ((TextView) v.findViewById(R.id.label))
            .setText((String) ((Map<String, Object>) getChild(
                    groupPosition, childPosition)).get(LABEL));

            ((TextView) v.findViewById(R.id.value))
                    .setText((String) ((Map<String, Object>) getChild(
                            groupPosition, childPosition)).get(VALUE));

            return v;
        }

        @Override
        public View newChildView(boolean isLastChild, ViewGroup parent) {

            return layoutInflater.inflate(
                    R.layout.expandable_list_item_with_image, null, false);

        }
    });
    ExpandableListView list = (ExpandableListView) findViewById(android.R.id.list);
    list.setOnChildClickListener(new OnChildClickListener() {
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            System.out.println("Group:" + groupPosition + ", Child: "
                    + childPosition);
            return true;
        }
    });

}

     } 
```

这里这种格式是我当前的 o/p：

```
 -->Orderinformation
          * payment_method
          * subtotal
--->Customerinformation

           *firstname
           *lastname
           *phone
           *url 
```

但我希望需要的格式是：

```
-->Orderinformation
          * payment_method
          * subtotal
--->Customerinformation
        -->personalinformation
                *firstname
                *lastname
        -->Contactinformation
                *phone
                *url 
```

如何在`HashMap`此处使用并`ExpandableListView`在另一个中创建`ExpandableListView`. 请给我一些解决方案。

# arrays - Codeigniter：在数组中显示数据，错误：试图获取非对象的属性

> ID：12832111
> 
> 赞同：2
> 
> 时间：2012-10-11T04:14:25.360
> 
> 标签：arrays, codeigniter

好的，所以我正在尝试在数组中显示数据。

**我的观点：**

```
echo form_open(base_url() . 'membersController/searchMember/');
echo form_label('Member ID: ', 'memID', array('for' => 'memID'));
echo form_input(array('type' => 'text', 
                      'name' => 'memID', 
                      'id' => 'memID', 
                      'value' => set_value('memID')));
echo form_submit(array('type' => 'submit', 'value' => 'Search'), 'Search') . "<br />";
echo form_close();
if (empty($data)) {

} else {
//displaying the array
} 
```

**我的控制器：**

```
public function searchMember() {
    $memID = $this->input->post('memID');
    //Load membersModel
    $this->load->model('membersModel');
    //Access the getMemberData function to search for a member
    $data['memDetails'] = $this->membersModel->getMemberData($memID); 
```

//下面这行只是为了测试数组是否被填充

```
 echo $data[0]->memFname;

    if (empty($data)) {
        echo "Hi";
        $message = "Member not found!";
        echo $message;
    } else {
        //Load view
        $this->load->view('memberView', $data);
    }
} 
```

**我的模型：**

```
function getMemberData($memID) {
    //SQL Statement to get a Member from the database based on member ID
    $data = array();
    $this->db->select('*');
    $this->db->from('members');
    $this->db->where('memID', $memID);
    $query = $this->db->get();
    if ($query->num_rows() > 0) {
        foreach ($query->result() as $row) {
            $data['memberdata'] = $row;
        }
    }
    $query->free_result();
    //return the array to the controller
    return $data;
} 
```

**我不断收到这些错误：**

*遇到 PHP 错误*

严重性：通知

消息：未定义的偏移量：0

文件名：控制器/membersController.php

行号：24

*遇到 PHP 错误*

严重性：通知

消息：试图获取非对象的属性

文件名：控制器/membersController.php

行号：24

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:18:06.730

做这些改变

**型号**：

```
if ($query->num_rows() > 0) {
    foreach ($query->result() as $row) {
        $data[] = $row;
    }
}
$query->free_result();
//return the array to the controller
return $data; 
```

**控制器**：

```
$data['data'] = $this->membersModel->getMemberData($memID); 
```

# java - 当我尝试包含乌尔都语字符串时，为什么会出现编译错误？

> ID：12832114
> 
> 赞同：0
> 
> 时间：2012-10-11T04:14:42.550
> 
> 标签：java, unicode, utf-8, illegal-characters

我正在尝试添加一个乌尔都语字符串`غزل`，如下所示：

```
class UnicodeCheck {
  public static void main(String args[]) {
   try {
    File f = new File("C:/Users/user/Desktop/unicodecheck.txt");
    FileWriter writer = new FileWriter(f);
    writer.write("غزل");
    writer.close();
   } catch(Exception exc) {
       exc.printStackTrace();
     }
 }
} 
```

当我尝试编译上述程序时，出现此错误。

```
UnicodeCheck.java:1: illegal character: \187
∩╗┐class UnicodeCheck {
 ^
UnicodeCheck.java:1: illegal character: \191
∩╗┐class UnicodeCheck {
  ^
2 errors 
```

我不明白这个错误。为什么我会得到这个，我怎样才能克服这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:33:28.927

[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)

```
The byte order mark (BOM) is a Unicode character used to signal the endianness
(byte order) of a text file or stream. Its code point is U+FEFF. BOM use is
optional, and, if used, should appear at the start of the text stream. 
Beyond its specific use as a byte-order indicator, the BOM character may also 
indicate which of the several Unicode representations the text is encoded in. 
```

因此，您需要剥离 BOM 或将源文件转换为另一种编码。Notepad++ 可以转换单个文件编码，我不知道 Windows 平台上有一个批处理实用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:28:53.753

文件开头的字符来自一些文本编辑器喜欢插入文件开头的字节顺序标记。然而，Java 编译器不接受带有 BOM 的文件。你有两个选择：

1.  *使用允许在没有*BOM 的情况下以 Unicode 格式保存文件的文本编辑器，例如 Notepad++。
2.  在源代码中仅使用 ASCII 字符。在需要 Unicode 字符的地方使用`\uXXXX`-escape 代码。JDK 附带了一个实用程序，用于将“本机”文本转换为这种编码，称为`native2ascii`. 例如，

    ```
    writer.write("غزل"); 
    ```

    将被转换为

    ```
    writer.write("\u063a\u0632\u0644"); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:21:24.403

这取决于您的文本编辑器（您在其中编辑 java 源文件）使用的字符集。尝试将其设置为`UTF-8`格式。

# c# - PayPal Express 对 ItemTotal/SubTotal 应用折扣

> ID：12832123
> 
> 赞同：3
> 
> 时间：2012-10-11T04:15:33.593
> 
> 标签：c#, asp.net, paypal

[PayPalExpress 95.0 版](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#expresscheckoutnew)ASP.Net & C#

```
CurrencyCodeType currency = (CurrencyCodeType)
   Enum.Parse(typeof(CurrencyCodeType), currencyCode.SelectedValue);
PaymentDetailsType paymentDetails = new PaymentDetailsType();
paymentDetails.ShippingTotal = new BasicAmountType(currency, shippingTotal.Value);
paymentDetails.ItemTotal = new BasicAmountType(currency, itemTotal.ToString());
paymentDetails.OrderTotal = new BasicAmountType(currency, orderTotal.ToString()); 
```

我只看到`ShippingDiscount`。我想知道***如何***在`ItemTotal`/SubTotal 上应用折扣（而不是在单个项目上）。

![在此处输入图像描述](../Images/81ae3a94ea8ef54e84e679a3c6608dd9.png)

我发现[Paypal Express Checkout: Apply order discount](https://stackoverflow.com/questions/7002971/paypal-express-checkout-apply-order-discount) in SO 但答案是关于单个商品的折扣。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-03T12:51:55.010

我的天啊！刚刚想通了！正确的是，您必须在您的商品中添加另一个商品作为折扣。困难的部分是让小/总计正确！

这是我的`SUCCESS`提交：

```
array(14) {
    //  ERROR AREA 1    //  Total Amount of Items (including -Discount) and shipping and tax
    ["PAYMENTREQUEST_0_AMT"]
            =>  string(4) "9.71"
    //  ERROR AREA 2    //  Total Amount of items ONLY, including the -Discount!
    ["PAYMENTREQUEST_0_ITEMAMT"]
            =>  string(4) "6.76"
    ["PAYMENTREQUEST_0_SHIPPINGAMT"]
            =>  string(4) "2.95"
    ["PAYMENTREQUEST_0_TAXAMT"]
            =>  string(1) "0"

    /*  ITEMS   */

        /*  ITEM 01 */
    ["L_PAYMENTREQUEST_0_NAME0"]
            =>  string(18) "Order # 987654"
    ["L_PAYMENTREQUEST_0_AMT0"]
            =>  float(12.51)
    ["L_PAYMENTREQUEST_0_NUMBER0"]
            =>  string(6) "987654"
    ["L_PAYMENTREQUEST_0_QTY0"]
            =>  float(1)
    ["L_PAYMENTREQUEST_0_ITEMCATEGORY0"]
            =>  string(8) "Physical"

        /*  ITEM 02 */
        /*  ¡THE DISCOUNT!  */
    ["L_PAYMENTREQUEST_0_NAME1"]
            =>  string(9) "PromoCode"
    ["L_PAYMENTREQUEST_0_AMT1"]
            =>  float(-5.75)
    ["L_PAYMENTREQUEST_0_NUMBER1"]
            =>  string(18) "Promo 123456"
    ["L_PAYMENTREQUEST_0_QTY1"]
            =>  float(1)
    ["L_PAYMENTREQUEST_0_ITEMCATEGORY1"]
            =>  string(8) "Physical"
} 
```

## ***成功！***

```
array(6) {
    ["TOKEN"]
        =>  string(20) "NOTIMPORTANT"
    ["TIMESTAMP"]
        =>  string(20) "2014-10-03T12:39:06Z"
    ["CORRELATIONID"]
        =>  string(12) "NOTIMPORTANT"
    ["ACK"]
        =>  string(7) "SUCCESS"
    ["VERSION"]
        =>  string(2) "93"
    ["BUILD"]
        =>  string(8) "13154493"
} 
```

* * *

> 是的，我知道这个问题很老，但我在其他任何地方都找不到答案。所以这是我的工作解决方案！

# ruby-on-rails - 使用 Sprocket 的动态 CSS

> ID：12832125
> 
> 赞同：0
> 
> 时间：2012-10-11T04:15:46.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sass, sprockets

我正在使用 Rails 中的站点构建器，我想使用 Sprockets SCSS 处理器渲染站点 css。由于用户可以更改颜色和徽标，因此我不能使用 Sprockets 预编译，因此我开始使用 Rails SCSS 模板处理程序来处理动态视图。

目标是在请求 /sites/43543.css 时随时编译“app/views/sites/show.css.scss”。这是我到目前为止所拥有的。您会注意到我首先通过 ERB 处理器运行模板，然后尝试通过 Sprockets 运行它。

[https://gist.github.com/3870095](https://gist.github.com/3870095)

Manuel Meurer 提出了另一种解决方案，将 ERB 输出写入路径，然后触发 Asset Pipeline 对其进行编译。我能够让他的解决方案在本地工作，但它不会在 heroku 上工作，因为资产路径不可写。文件只能写入 tmp 目录，并且这些文件只能保证用于单个请求。

[http://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-during-runtime/](http://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-during-runtime/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T06:10:58.260

[经过漫长的一天，感谢 John Feminella 和他在 google 上的帖子，](https://groups.google.com/forum/?fromgroups=#!topic/sass-lang/CwMGkYG46Ug)我能够解决我的问题。对我来说具有挑战性的部分是弄清楚如何创建一个新的 Sprockets::Context。幸运的是，John 的解决方案不需要上下文。

[此处](https://gist.github.com/3870095)更新要点

**尝试#1**

此代码不允许从资产管道导入 css 文件。

`@import "foundation";`有效，因为基础作为指南针模块加载

`@import "custom_css";`导致错误消息提示找不到文件

```
def call(template)
  erb = ActionView::Template.registered_template_handler(:erb).call(template)

  %{ 
    options = Compass.configuration.to_sass_engine_options.merge(
      :syntax => :scss,
      :custom => {:resolver => ::Sass::Rails::Resolver.new(CompassRails.context)},
    )
    Sass::Engine.new((begin;#{erb};end), options).render
  }
end 
```

**尝试#2**

此代码无法使用asset-data-url 嵌入base64 url

```
 def call(template)
    erb = ActionView::Template.registered_template_handler(:erb).call(template)

    %{
      compiler = Compass::Compiler.new *Compass.configuration.to_compiler_arguments
      options  = compiler.options.merge({
        :syntax => :scss,
        :custom => {:resolver => ::Sass::Rails::Resolver.new(CompassRails.context)},
      })
      Sass::Engine.new((begin;#{erb};end), options).render
    } 
  end 
```

**尝试 3**

事实证明，您可以在创建上下文时使用空值。下面的代码在开发中工作，但在生产中引发错误。

`ActionView::Template::Error (can't modify immutable index)`

似乎错误发生在 Sprockets::Index 中，它在生产中用于代替 Sprockets::Environment。切换到 Sprockets::Environment 也不能​​解决问题。

```
 def call(template)
    erb = ActionView::Template.registered_template_handler(:erb).call(template)

    %{
      context = CompassRails.context.new(::Rails.application.assets, '', Pathname.new(''))
      resolver = ::Sass::Rails::Resolver.new(context)

      compiler = Compass::Compiler.new *Compass.configuration.to_compiler_arguments
      options  = compiler.options.merge({
        :syntax => :scss,
        :custom => {:resolver => resolver}
      })

      Sass::Engine.new((begin;#{erb};end), options).render
    }
  end 
```

# iphone - 如何检测 UIStatusBar 隐藏和显示？

> ID：12832126
> 
> 赞同：6
> 
> 时间：2012-10-11T04:15:50.577
> 
> 标签：iphone, ios, uiapplication

我试图检测隐藏和显示 iPhone 的 UIStatusBar 但失败了。有什么解决方案可以帮助我，比如 KVO 或其他什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:23:52.740

您可以观察`statusBarHidden`共享`UIApplication`实例的属性。

简单的例子：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    // Do something here...
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [[UIApplication sharedApplication] addObserver:self forKeyPath:@"statusBarHidden" options:NSKeyValueObservingOptionNew context:NULL];
    [[UIApplication sharedApplication] setStatusBarHidden:YES]; // Will notify the observer about the change
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-14T17:26:48.900

从 iOS 11 起，您可以继承视图控制器的 UIView 并覆盖`safeAreaInsetsDidChange`：

```
override func safeAreaInsetsDidChange() {
  super.safeAreaInsetsDidChange()
  // adapt your view
} 
```

您的视图必须与状态栏共享顶部矩形才能正常工作。（但如果没有，您可能无论如何都不需要检测更改）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:23:42.337

在 UIApplication 类中有一个属性 statusBarHidden ......这告诉状态栏是否隐藏......如果它返回 YES 意味着状态栏被隐藏......试试这个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-14T13:15:23.150

**iOS 13**

由于`isStatusBarHidden`and`setStatusBarHidden`已从 iOS 13 中弃用，您可以使用 and 来检查状态栏的可见性，`UIStatusBarManager.isStatusBarHidden`因为`Timer`KVO 不支持它：

```
timer = Timer.scheduledTimer(withTimeInterval: 0.3, repeats: true) { timer in
    if let statusBarManager = UIApplication.shared.delegate?.window??.windowScene?.statusBarManager {
        print(statusBarManager.isStatusBarHidden)
    }
} 
```

# svn - SVN 术语 - 结帐、工作副本、属性、存储库

> ID：12832130
> 
> 赞同：9
> 
> 时间：2012-10-11T04:16:51.980
> 
> 标签：svn, terminology

虽然我正在尝试学习如何使用`svn:externals`，但我很难理解这些术语的区别。它们有何不同？

*   **工作副本**和**结帐**

    > 有时，构建一个由多个不同*结帐组成**的工作副本*很有用。（[来源](http://svnbook.red-bean.com/en/1.5/svn.advanced.externals.html)）

**   **财产**

    > 在 Subversion 中，您使用 svn:externals*属性*在组中声明外部定义。（[来源](http://svnbook.red-bean.com/en/1.5/svn.advanced.externals.html)）

    *   **存储库**

    > 因此，分支和标签的创建速度非常快，并且几乎不占用*存储库*中的额外空间。（[来源](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html)）
    > 
    > 例如，您可能希望不同的文件或子目录来自存储库中的不同位置，或者可能完全来自不同的存储库。（[来源](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-externals.html)）

    *   **项目**

    > *为项目*中的文件夹设置 svn:externals 属性。（[来源](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-howto-common-projects.html#tsvn-howto-common-externals)）* 

 *我猜工作副本是一组项目文件，而结帐是项目文件或主干文件的工作副本。属性听起来像一个文件，但它可能是一个定义指令，但我不确定。我也很难理解存储库和主干之间的区别。如果我说“用户下载存储库。”，它类似于说“用户下载主干文件”。

抱歉，这一定是一道非常基础的英语问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T05:16:07.717

*   **工作副本**（名词）- 目录树，其中包含一些存储库切片
*   **结帐**（动词）- 将初始内容从存储库获取到文件夹的操作，之后成为工作副本
*   **属性**（名词） - 存储库对象的属性
*   **存储库**（名词）- 版本化数据和相关元数据的存储，与客户端交互
*   **项目**（名词）-（在引用的上下文中）WC和相关repo（ORed）的组合，*可能具有*WCs-set的含义，形成完整的产品

存储库是逻辑树，树干是这棵树的一部分

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-05T16:50:01.163

这些是从一开始就应该明确的关键 Subversion 概念。[使用 Subversion](http://svnbook.red-bean.com/index.en.html)的官方版本控制一书中有一个[版本控制基础](http://svnbook.red-bean.com/nightly/en/svn.basic.version-control-basics.html)章节，其中包含一个简要概述，但我将在这里用我自己的话来解释它们：

# 主要概念

## 存储库

它是存储所有重要数据（包括文件和版本历史）的中央数据库。

您不直接与存储库文件交互，就像您不编辑 MySQL 数据文件一样。更具体地说，您不会在那里*复制*源代码。相反，您使用 Subversion 客户端来执行特定的 Subversion 工作。出于这个原因，您永远不会通过其文件系统路径来引用存储库。相反，您使用 URI：

*   `file:///C:/Data/Subversion/foo`
*   `svn://svn.example.com/foo`
*   `http://svn.example.com/foo`
*   `https://svn.example.com/foo`

URI 前缀取决于您配置的工具。

您只有一个给定项目的存储库，因为 Subversion 是一个集中的版本控制系统。

## 工作副本

它是本地目录树，您可以在其中查看文件并使用它们。

您可以像使用版本控制之前一样使用工作副本文件：启动编辑器/IDE、进行更改、编译/运行。唯一的区别是您的文件链接到存储库中的特定修订。因此，您需要采取一些额外的步骤：

1.  您必须*创建*一次工作副本，以便将其链接到适当的存储库。这叫做**签出**。

2.  您必须将更改发送到存储库，以便将它们保存在公共历史记录中并可供其他人使用：这称为**commit**。

3.  您可能想要获取其他同事所做的任何更改：这称为**update**。

您通过文件系统路径引用工作副本：

*   `C:\MyProjects\Foo\code`

您可以根据需要拥有任意数量的工作副本，即使它们指向同一个地方。

* * *

# 其他概念

## 树干

它是一个包含您的代码副本的子目录，您已经决定它代表您的主要开发线。例如：

*   `/trunk`

这只是一个约定（该目录不是 Subversion 的特殊目录），但被推荐并广泛使用。

## 分支

它是一个包含代码副本的子目录，并且您已决定它代表代码中的一个分支（未完成的任务、自定义、您仍然维护的旧版本......）。例如：

*   `/branches/unicode`

这只是一个约定（该目录不是 Subversion 的特殊目录），但被推荐并广泛使用。

## 标签

它是一个包含代码副本的子目录，并且您已经确定它代表给定版本。你永远不会给它写信。例如：

*   `/tags/2.0.0-alpha`

这只是一个约定（该目录不是 Subversion 的特殊目录），但被推荐并广泛使用。

## 财产

Subversion 允许存储有关修订、文件和文件夹的附加信息。每条数据都是一个属性。该信息特定于 Subversion，不存在于外部，因此您需要特定的工具来读取和写入它们。

## 项目

这*不是 Subversion 术语*。这只是一种常见的方式来引用与您正在做的特定工作相关的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T03:06:58.867

我发布了一些我自己在网上找到的描述。

**存储库**

> 版本控制系统的核心是存储库，它是该系统数据的中央存储。存储库通常以文件系统树的形式存储信息——文件和目录的层次结构。任意数量的客户端连接到存储库，然后读取或写入这些文件。

[http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html](http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html)

**工作副本**

> 从字面上看，工作副本是用户可以自由工作的用户 VCS 管理数据的特定版本的本地副本。工作副本对其他软件来说就像任何其他充满文件的本地目录一样，因此这些程序不必“具有版本控制意识”即可读取和写入该数据。

[http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html](http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html)

**查看**

> ...checkout 创建一个工作副本，而 update 会降低对现有工作副本的更改。通过[karoberts](https://stackoverflow.com/a/2254602)
> 
> ...结帐包括 .svn 目录，因此它是一个工作副本，并且将具有适当的信息来进行提交（如果您有权限）。作者：[notbenh](https://stackoverflow.com/a/419474/1608619)
> 
> [svn checkout 允许您在Gerald Kaszuba](https://stackoverflow.com/a/419475/1608619)制作的目录中使用版本控制*

# php - 值为空时隐藏 div

> ID：12832139
> 
> 赞同：0
> 
> 时间：2012-10-11T04:18:40.927
> 
> 标签：php, parsing, html, hide

我有这个：

```
if ($image1 !=='') { //Div here } 
```

但是当我将 div 放在大括号之间时，我遇到了解析错误。一定有某种方式，这需要是我做得不好......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:21:00.927

你可以这样做：

```
if ($image1 !== '') {
    echo '<div>foo</div>';
} 
```

或者，您可以在访问 HTML 代码时告诉服务器停止解析 PHP，然后在完成后告诉它重新开始解析：

```
if ($image1 !== '') {
    ?> <div>foo</div> <?php
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:22:31.607

```
if ($image1 !== '') {
    echo '<div>foo</div>';
} 
```

# eclipse - eclipse java开发 - 自动为每个新类添加私有静态最终String TAG

> ID：12832141
> 
> 赞同：0
> 
> 时间：2012-10-11T04:18:53.090
> 
> 标签：eclipse, development-environment

是否可以在eclipse中添加标签字段

```
private static final String TAG = "MyClass"; 
```

自动到每个新创建的类。输入它没什么大不了的，但自动添加它肯定会增加我*添加日志信息的纪律* ......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T04:35:59.927

是的，可以转到**窗口 - 首选项** ![样本](../Images/3e799077a3fd1928cb44e607d205cad0.png)

所以新创建的文件会有这一行。

但如果你做它会更有用 ![小样2](../Images/a810b64a565e07e93c77f45edd3aa110.png)

然后在代码中打印**mytag**并按 Ctrl + Space

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T04:59:15.453

一些改进。您可以在标签中使用“enclosure_type”变量：

```
private static final String TAG = "${enclosing_type}"; 
```

# asp.net-mvc - ASP.NET MVC ySlow 为动态提供的脚本添加过期标头

> ID：12832145
> 
> 赞同：1
> 
> 时间：2012-10-11T04:19:25.410
> 
> 标签：asp.net-mvc, yslow, controller-action, expires-header

我正在为 Javascript 提供一个如下所示的控制器方法：

```
 [OutputCache(Duration = 120)]
  [Compress]
  public ActionResult JavascriptFile(String scriptName) {
     string content;
     if (HttpContext.IsDebuggingEnabled) {
        content = ReadApplicationScript(string.Format("~/scripts/{0}", scriptName));
        return Content(content, "application/javascript");
     }
     else {
        content = ReadApplicationScript(string.Format("~/scripts/Built/{0}", scriptName));
        return Content(content, "application/javascript");
     }
  } 
```

`Compress`属性来自这里[。](https://stackoverflow.com/questions/942861/compress-filter-mvc-yahoo-yslow)

当我运行 ySlow 时，我在“添加过期标题”上获得了 F 级。我能做些什么来添加这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:23:52.497

在 system.webServer 部分添加以下内容

```
<staticContent>
      <clientCache cacheControlMode="UseExpires"
         httpExpires="Tue, 19 Jan 2038 03:14:07 GMT" />
    </staticContent> 
```

这里的 httpExpires 值将是到期日期。

**编辑**

您还可以尝试将内容添加到缓存，如下所示：

```
var cacheName = "someName";
var value = HttpRuntime.Cache.Get(cacheName) as ContentResult;

            if (value == null)
            {                
                var contentResult = ReadApplicationScript(string.Format("~/scripts/{0}",scriptName));
                System.Web.HttpContext.Current.Cache.Insert(cacheName, contentResult );
                return contentResult;
            }

            return value; 
```

# ruby - 如何从同一目录中的文件中读取？

> ID：12832148
> 
> 赞同：8
> 
> 时间：2012-10-11T04:19:38.957
> 
> 标签：ruby

我是个初学者。我想学习读写文件。这就是我正在尝试的。

```
rdfile = File.open('bhaarat.txt', 'r+') 
```

不幸的是，这将返回“C:/directoriesblahblah/ubuntu3.rb:1:in 'initialize': No such file or directory - bhaarat.txt (Errno::ENOENT)

我找到了解决方案，但我不仅对 Ruby 不熟悉，而且对一般编程也不熟悉，所以我无法从中得到对我有意义的答案。

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-11T04:23:44.250

要获取当前文件的路径，可以使用：

```
__FILE__ 
```

要获取当前文件所在的目录，可以使用：

```
File.dirname(__FILE__) 
```

要从字符串创建路径，您可以使用：

```
File.join('part1', 'part2', ...) 
```

因此，要在该目录中创建文件的路径，您可以使用：

```
File.join(File.dirname(__FILE__), 'filename') 
```

如果您的文件名为`bhaarat.txt`，则上述内容变为：

```
File.join(File.dirname(__FILE__), 'bhaarat.txt') 
```

如果您在代码中替换它，您将获得：

```
rdfile = File.open(File.join(File.dirname(__FILE__), 'bhaarat.txt'), 'r+') 
```

如果需要，您还可以将其设为单独的变量，以使代码更具可读性：

```
path = File.join(File.dirname(__FILE__), 'bhaarat.txt')
rdfile = File.open(path, 'r+') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T04:31:28.710

该文件是在当前目录中搜索的，而不是脚本所在的目录。

```
C:\> ruby scripts\ubuntu3.rb
No such file or directory - bhaarat.txt 
```

首先移动到文件位置，然后运行脚本。例如，如果文件与脚本位于同一目录中：

```
C:\> cd scripts
C:\scripts> ruby ubuntu3.rb 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-13T15:23:21.620

```
File.read(File.join(__dir__, 'filename')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T04:32:39.953

找到了一些可以解决问题的方法。稍微搜索了一下，发现[了这个](https://stackoverflow.com/questions/6566884/rubys-file-open-gives-no-such-file-or-directory-text-txt-errnoenoent-er)：

我改变了我的原始代码

```
rdfile = File.open('bhaarat.txt', 'r+') 
```

至

```
rdfile = File.open(File.join(File.dirname(__FILE__),'bhaarat.txt'), 'r+') 
```

这使它在您的 .rb 文件的目录中查找，而不是您的命令提示符当前所在的目录。

# vb.net - 如何使用 Listview 填充我的表单

> ID：12832165
> 
> 赞同：0
> 
> 时间：2012-10-11T04:21:11.940
> 
> 标签：vb.net

我已经成功地自学了如何从 MySQL 数据库中提取一些数据并将其绑定到 ListView 控件 (ListViewCard)。

现在我不知道如何使用 SelectedIndexChanged 事件遍历记录并填充表单上的其他一些控件（即 7 个​​文本框、2 个组合框和 2 个日期时间选择器）。

您的帮助将不胜感激。这是我的代码：

```
Private Sub loadCard()

    Try
        'FOR MySQL DATABASE USE
        'Dim dbQuery As String = ""
        'Dim dbCmd As New MySqlCommand
        'Dim dbAdapter As New MySqlDataAdapter
        Dim dbTable As New DataTable
        Dim i As Integer

        If dbConn.State = ConnectionState.Closed Then
            dbConn.ConnectionString = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
            dbConn.Open()
        End If

        dbQuery = "SELECT *" & _
                   "FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumber " & _
                   "WHERE customer.accountNumber = '" & TextBoxAccount.Text & "'"
        With dbCmd
            .CommandText = dbQuery
            .Connection = dbConn
        End With
        With dbAdapter
            .SelectCommand = dbCmd
            .Fill(dbTable)
        End With
        ListViewCard.Items.Clear()
        For i = 0 To dbTable.Rows.Count - 1
            With ListViewCard
                .Items.Add(dbTable.Rows(i)("ccID"))
                With .Items(.Items.Count - 1).SubItems
                    .Add(dbTable.Rows(i)("ccNumber"))
                    .Add(dbTable.Rows(i)("ccExpireMonth"))
                    .Add(dbTable.Rows(i)("ccExpireYear"))
                End With
            End With
        Next
    Catch ex As MySqlException
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                    vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    End Try
    dbConn.Close()

End Sub 
```

# java - 如何在android上以编程方式设置通话音量？

> ID：12832166
> 
> 赞同：6
> 
> 时间：2012-10-11T04:21:16.163
> 
> 标签：java, android, eclipse, android-4.0-ice-cream-sandwich

我一直在搜索问题，但找不到类似的问题。

我正在尝试在我的程序通话时设置手机的音量。我正在使用 Java 和 Eclipse。我希望它在 ICS 上运行。

最终目标是制作一个应用程序，让用户选择一个联系人（或一组联系人）并在此人呼叫时为电话分配特定的音量。不是铃声，而是通话音量。

例如，我的岳母在电话里咆哮（也是当面！），每次她打电话时，我都必须按几次音量。然后，另一个人打电话，我几乎听不见。

我在 Play 商店中搜索了一个类似的应用程序，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:37:52.687

尝试这个

```
AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
audioManager.setStreamVolume(AudioManager.STREAM_VOICE_CALL, 20, 0); 
```

如果由于某种原因这不起作用（没有尝试过），您可能需要阅读这些

[http://developer.android.com/reference/android/app/Activity.html#setVolumeControlStream(int](http://developer.android.com/reference/android/app/Activity.html#setVolumeControlStream(int) ) [http://developer.android.com/reference/android/media/AudioManager.html#STREAM_VOICE_CALL](http://developer.android.com/reference/android/media/AudioManager.html#STREAM_VOICE_CALL)

# javascript - jqgrid中getcol函数返回的值

> ID：12832171
> 
> 赞同：0
> 
> 时间：2012-10-11T04:21:38.333
> 
> 标签：javascript, json, jqgrid, subgrid

我有一个使用`jqgrid`. 我需要将 , 返回的一些数据存储`url:`在一个局部变量中，以便我可以在`subgrid`. 为此，我将该列添加为主网格中的隐藏列，其格式为`json`：

```
"Details":[{"Name":"ttt", "Quantity":"12"}] . 
```

然后在 loadcomplete: 函数中，我使用将值保存到变量中

```
var griddata = $("#grid').getCol('Details', false); 
```

现在当我访问时`griddata[0]`，我得到一个`object`对象。我试图解析它以正确获取值，但无济于事。我试过：

```
griddata[0].Details.Name 
```

或者

```
griddata[0].Details.0.Name 
```

或者

```
griddata[0].Name, 
```

但都失败了。如果函数返回的数据，我想我错过了格式。我`getcol()`查看了该方法的文档，它说当我们指定 false 时它只返回值，但无法获得任何示例。
如果有任何示例或有任何指向解决方案的指针，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:05:06.433

如果您检查类型`griddata[0]`（例如使用`typeof`运算符），您将看到它的类型为`string`- 这是因为您获得的值是`toString()`您传递的对象的结果。原因是 jqGrid 处理值的方式。

如果要将 JSON 存储为值，则需要将其完全字符串化：

```
"Details": "[{\"Name\":\"ttt\", \"Quantity\":\"12\"}]" 
```

现在您可以将这些字符串值反序列化为如下对象：

```
var griddata = $.map($("#grid").jqGrid('getCol', 'Details', false), function(value) { 
    return JSON.parse(value); 
}); 
```

之后，您可以以您想要的方式访问对象：

```
var name = griddata[0].Name;
var quantity = griddata[0].Quantity; 
```

作为替代方案，您可以将对象拆分为两列，因此可以使用 直接访问这些值`getCol`。

# c# - 如何从通过 GetResponse 方法收到的 httprequest 创建网页

> ID：12832176
> 
> 赞同：0
> 
> 时间：2012-10-11T04:22:24.607
> 
> 标签：c#, httprequest

我怎样才能获得收到的`web`代表`http-request`？
我最近问了一个关于如何通过第三方绕过网站审查的问题。`anonymizer website`结果表明我嗅探了流量并`url`自己创建了帖子。
这个阶段几乎完成了。现在我需要获取页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:26:49.567

如果您使用的是 Winforms，则可以参加该[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)课程。

> **WebBrowser**控件允许您在Windows 窗体应用程序中托管网页和其他支持浏览器的文档。例如，您可以使用**WebBrowser**控件在应用程序中提供集成的基于 HTML 的用户帮助或 Web 浏览功能。此外，您可以使用**WebBrowser**控件将现有的基于 Web 的控件添加到您的 Windows 窗体客户端应用程序中。

（来自 MSDN）

* * *

您希望将响应保存到磁盘。好的，通常这是您要采取的顺序：

1.  您使用[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)该类发出 HTTP 请求。
2.  使用方法获取响应[`GetResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)。这将返回一个[`HttpWebResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)对象。
3.  调用[`GetResponseStream`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx)该响应对象，然后
4.  [将该流写入文件](https://stackoverflow.com/questions/411592/how-do-i-save-a-stream-to-a-file)。

`<sidenote>`你应该试着在你的问题中更清楚一点。我将 HTTP 请求的“网络表示”解释为浏览器中显示的“网页”。您从未提到要将回复保存到磁盘。

# php - Jquery - 从数据库中获取评论

> ID：12832188
> 
> 赞同：0
> 
> 时间：2012-10-11T04:23:53.327
> 
> 标签：php, jquery, html, ajax

o我在使用 jQuery 从 MySQL 数据库中获取评论时遇到问题。

我正在尝试这种方式，但它不起作用。

**PHP (comments.php)**

```
<?php 

    if (isset($_POST['value1'])) {
        $id = ($_POST['value1']);
    }else{
        $id = '';
    } 
    if (isset($_POST['value2'])) {
        $database = ($_POST['value2']);
    }else{
        $database = '';
    } 
    if (isset($_POST['value3'])) {
        $tablename = ($_POST['value3']);
    }else{
        $tablename='';
    } 

    require_once('rt-connect.php');

    $find_data = "SELECT * FROM $tablename";
    $query = mysqli_query($connection, $find_data);
?> 

  <?php while($row = mysqli_fetch_assoc($query)):?>
  <div class="comment-container">
    <div class="user-info"><?php echo $row['user_name']; ?></div>
    <div class="comment"><p><?php echo $row['comment']; ?></p></div>
  </div>
  <?php endwhile;?> 
```

**jQuery(comments.html)**

```
 var id=2;
 var database='comments_db';
 var tablename='comments';

 $.post('comments.php', {value1:id, value2:database, value3:tablename}, function(data)
    {
    $('#comments').load('comments.php .comment-container');
 }); 
```

**Html（在comments.html上加载评论的div）**

```
 <div id="comments"></div><!--end of comments--> 
```

请查看并建议任何可能的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:43:14.023

试试这个，它会帮助你。如果您想显示您的数据已加载或不只是删除 commet，这是 jquery Ajax post 方法请求。

```
$.ajax({
type: "POST",
url: url,
data: { value1:id, value2:database, value3:tablename}
}).done(function( data ) {
//alert(data); return false;

$("#comments").html(html);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:29:42.237

你有`$.load()`里面的成功功能`$.post()`，试试这个..

```
$.post('comments.php', {value1:id, value2:database, value3:tablename}, function(data)
   {
   $('#comments').html(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:41:19.190

在您的 javascript 中，您将数据发布到 url，接受响应，如果响应成功，您将向 PHP 脚本发送另一个请求，这次没有参数。您的评论框正在显示您的第二个请求的结果。

您不需要：

```
 $('#comments').load('comments.php .comment-container'); 
```

在您的 javascript 中，因为您已经收到了回复。相反，使用：

```
 $('#comments').html(data); 
```

这将在评论 div 中显示响应数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T04:49:38.297

这个可以试试

```
 var id = 2;
 var database  = 'comments_db';
 var tablename = 'comments';

$.ajax({
    type   :"POST",
    data   :"id="+id+"&database="+database+"&tablename="+tablename,
    url    : comments.php, 
    success: function(msg){
        $("#comments").html(msg);
     }
}); 
```

# jquery - jquery.tooltip 到 jqueryUI 1.9.0 缺少 showBody

> ID：12832190
> 
> 赞同：0
> 
> 时间：2012-10-11T04:24:39.413
> 
> 标签：jquery, jquery-ui, tooltip

我正在升级到 jQueryUI 1.9.0 并且我有 jquery.tooltip 我想转换到现在在 jQueryUI 中的工具提示。一个问题是 jQueryUI 工具提示没有 showBody 选项。有没有一种快速的方法可以在其中添加该功能？

[http://jquery.bassistance.de/tooltip/demo/](http://jquery.bassistance.de/tooltip/demo/)
[http://jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)
[http://api.jqueryui.com/tooltip/](http://api.jqueryui.com/tooltip/)

我想我可以编写一个附加到内容选项的回调来解析我想要的分隔数据（例如，默认分隔符可以是“-”，这是“旧”工具提示插件中的内容）并分解为 h3 （分隔符之前的内容）和 div（分隔符之后的内容）。

在我在这条路上走得太远之前，我想把它从社区中反弹出来，以确保我没有重新发明轮子，而且 jQueryUI 工具提示中还没有类似的东西，我只是错过了它。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:08:34.243

Ed.S.的解决方案：

> 我尝试了以下方法，它有效！将帖子留给可能需要相同功能的其他人。
> 
> ```
> $("#demoSelect").tooltip({
>     track: true,
>     content: function () {
>         var arrContent = $(this).attr('title').split(' - ');
>         var data = '<h3>' + arrContent[0] + '</h3><div>' + arrContent[1] + '</div>';
>         return data;
>     }
> }); 
> ```

# ios - iPhone中两个位置之间的多条路线

> ID：12832201
> 
> 赞同：0
> 
> 时间：2012-10-11T04:26:12.517
> 
> 标签：ios, objective-c, google-maps

我需要在使用 Maps API 的 iOS 应用程序中显示多条路线。我可以绘制单条路线，但如何绘制多条路线？

我正在使用谷歌方向 api 来获取单条路线

[http://maps.googleapis.com/maps/api/directions/json?origin=28.6353080000,77.2249600000&destination=28.5355161000,77.3910265000&mode=walking&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=28.6353080000,77.2249600000&destination=28.5355161000,77.3910265000&mode=walking&sensor=false)

同样在 iPhone 的 ios 5 Native Map 应用程序中显示两个弹出窗口，说 Route1 和 Route 2，当用户触摸选定的路线时会突出显示。所以我们也可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:32:50.567

> Alternatives（可选），如果设置为 true，则指定 Directions 服务可以在响应中提供多个路线备选方案。请注意，提供备选路线可能会增加服务器的响应时间。

来自[Google 路线 API](http://code.google.com/apis/maps/documentation/directions/#RequestParameters)

您需要在查询链接中添加 Alternatives=true

参见：[查找两地之间的路线数](https://stackoverflow.com/questions/6095435/find-the-number-of-routes-between-two-places)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T12:21:18.763

**这是代码**

**写这段代码**

```
#pragma mark - MapView Delegate

//-----------------------------------------------------------------------

    - (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation {

        //   [self.mapView removeAnnotation:self.annotation];

            NSString *baseUrl = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%f,%f&destination=%f,%f&sensor=true", self.mapView.userLocation.location.coordinate.latitude, self.mapView.userLocation.location.coordinate.longitude, [[self.dictData valueForKey:@"latitude"]doubleValue],[[self.dictData valueForKey:@"longitude"]doubleValue]];

            NSURL *url = [NSURL URLWithString:[baseUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

            NSURLRequest *request = [NSURLRequest requestWithURL:url];

            [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {

                NSError *error = nil;
                NSDictionary *result = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];

                NSArray *routes = [result objectForKey:@"routes"];

                NSDictionary *firstRoute = [routes objectAtIndex:0];

                NSDictionary *leg = [[firstRoute objectForKey:@"legs"] objectAtIndex:0];

                NSDictionary *end_location = [leg objectForKey:@"end_location"];

                double latitude = [[end_location objectForKey:@"lat"] doubleValue];
                double longitude = [[end_location objectForKey:@"lng"] doubleValue];

                CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude, longitude);

                MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
                point.coordinate = coordinate;
                point.title = [leg objectForKey:@"end_address"];
                point.subtitle = @"Event Destinations !!!";

                [self.mapView addAnnotation:point];

                NSArray *steps = [leg objectForKey:@"steps"];

                int stepIndex = 0;

                CLLocationCoordinate2D stepCoordinates[1 + [steps count] + 1];

                stepCoordinates[stepIndex] = userLocation.coordinate;

                for (NSDictionary *step in steps) {

                    NSDictionary *start_location = [step objectForKey:@"start_location"];
                    stepCoordinates[++stepIndex] = [self coordinateWithLocation:start_location];

                    if ([steps count] == stepIndex){
                        NSDictionary *end_location = [step objectForKey:@"end_location"];
                        stepCoordinates[++stepIndex] = [self coordinateWithLocation:end_location];
                    }
                }

                MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:stepCoordinates count:1 + stepIndex];
                [self.mapView addOverlay:polyLine];

            }];
    }

#pragma mark - Custom Methods

//-----------------------------------------------------------------------

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.strokeColor = [UIColor colorWithRed:204/255\. green:45/255\. blue:70/255\. alpha:1.0];
    polylineView.lineWidth = 10.0;

    return polylineView;
} 
```

# c# - 在 ViewState 中存储数据表

> ID：12832202
> 
> 赞同：5
> 
> 时间：2012-10-11T04:26:19.553
> 
> 标签：c#, asp.net, memory-management, datatable, viewstate

我正在阅读微软关于状态管理的这篇文章。

[http://msdn.microsoft.com/en-us/library/75x4ha6s(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/75x4ha6s(v=vs.100).aspx)

我在这里发现了一件有趣的事情。ViewState 被归类为客户端选项（尽管我已经知道了）。它让我想起了我们在应用程序中的代码。

```
DataTable dt = getDatatableFromDB();
ViewState["dataTable"] = dt; 
```

这段代码目前运行良好。

我的困惑是：

1.  客户端对象（ViewState）如何保存服务器端对象（数据表）？
2.  使用 ViewState 存储像 Datatables 这样的大对象是一种好习惯吗？
3.  如果我们继续使用这种方法，可能会产生什么副作用（如果有的话）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T04:28:19.647

视图状态存储在`<input />`表单上的隐藏标记中。当用户启动回发（例如，通过单击按钮）时，数据将作为表单数据的一部分返回到服务器。

如果您在 ViewState 中存储大量数据，那么当用户尝试下载页面（因为所有这些数据都将成为 HTML 的一部分）和用户尝试提交表单时（因为所有这些数据必须上传回服务器）。

此外，ViewState 很容易丢失。只要用户提交表单，它就会被保留。如果用户单击指向另一个页面的超链接，则永远不会提交表单，并且 ViewState 中包含的所有数据都将丢失。即使锚标记指向用户当前所在的页面也是如此。

我从您[之前的问题](https://stackoverflow.com/questions/12811932/using-session-to-store-datatable)中看到，您正试图找到一个放置数据表的好地方。ViewState 不是最差的地方，只要数据比较少。Base64 在内存使用方面优于 XML，但距离高效还有很长的路要走。如果数据是相当静态的，您可能需要考虑将其存储在[ApplicationState](http://msdn.microsoft.com/en-us/library/ms178594%28v=vs.100%29.aspx)中。如果您正在使用 GridView 编辑 DataTable，那么 GridView 实际上已经为您存储了 DataTable，您可以通过[DataSource](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedataboundcontrol.datasource.aspx)属性访问它（只需将其转换回 DataTable）。

* * *

还值得注意的是，虽然 ViewState 数据是用 base64 编码的（这意味着普通用户将无法理解它），但确定的用户可以轻松地对其进行编辑。看似无害的数据可能会被编辑为对您的网站非常有害。这是入侵网站的经典途径，因此您必须非常小心您存储的数据究竟是什么。例如，如果您将用户的 ID 存储在 ViewState 中，则用户可以编辑 ID 并侵入另一个用户的帐户。（*注意：仅当 EnableViewStateMac 设置为时才会出现问题`False`。*）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T04:30:05.157

1）客户端对象（ViewState）如何保存服务器端对象（Datatable）？

它是序列化的。

2) 使用 ViewState 存储像 Datatables 这样的大对象是一种好习惯吗？

这取决于您的环境和要求。

3）如果我们继续使用这种方法，可能会产生什么副作用（如果有的话）？

大量数据将通过网络传输。它可能会减慢速度。

# android - 滚动时如何将listView中的项目标记为可读？

> ID：12832203
> 
> 赞同：0
> 
> 时间：2012-10-11T04:26:28.607
> 
> 标签：android, listview

我正在构建我的第一个应用程序。它只是通过短信 (SMS) 接收到的服务器警报列表。只有一个列表视图操作（点击没有详细信息）。我希望能够通过阅读来标记已阅读的项目。当我打开我的应用程序时，我看到消息从旧到新排序，并且我的 listView 位置设置在 listView 的底部。当我向上滚动时，显示的项目我想标记为已读。

我这样做了：

```
public class AlertsListFragment extends ListFragment {
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        // ...
        Cursor c = context.getContentResolver().query(uri, AlertsContract.PROJECTION, selection, selectionArgs, null);
        adapter = new AlertAdapter(context, R.layout.row, c, from, to, 0);
        setListAdapter(adapter);
        ListView listView = getListView();
        listView.setSelected(listView.getCount());

        lv.setOnScrollListener(new AbsListView.OnScrollListener() {
            public void onScrollStateChanged(AbsListView view, int scrollState) { }

            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
                for (int i = firstVisibleItem; i &lt; firstVisibleItem + visibleItemCount; i++) {
                    Cursor cursor = (Cursor)view.getItemAtPosition(i);
                    long id = cursor.getLong(cursor.getColumnIndex(AlertsContract._ID));
                    String type = cursor.getString(cursor.getColumnIndex(AlertsContract.TYPE));
                    Log.d("VIEWED", "This is viewed "+ type + " id: " + id);

                    // here I can get the id and mark the item read
                }
            }
        });
    }
} 
```

但我认为，这不是最好的解决方案。一个问题是，如果用户不打算滚动列表，则即使用户可以从列表中看到至少 3 到 4 个项目，也不会将任何项目标记为已查看。

listView 项目是否有任何事件，如“显示”或类似的东西？每次listView项目到达listView的可见区域时都会发生的一些事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T06:49:59.350

也许您应该尝试使用适配器的`getView`方法。（[参考](https://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)）

每次`ListView`尝试显示项目时都会调用它。

但要小心，当项目没有完全显示时也会调用它，所以你应该再次检查这个，也许你的 onScroll 方法中的解决方案。

# php - Laravel 应用程序连接数据库时速度很慢

> ID：12832207
> 
> 赞同：20
> 
> 时间：2012-10-11T04:27:04.033
> 
> 标签：php, laravel

*注意：现在我知道问题出在哪里，我修改了问题。它现在只包含所需的信息。*

我是 Laravel PHP 框架的新手。

我的电脑上有一个非常小的应用程序。它连接到 MySQL 数据库并具有 User 模型。我使用 Auth 类登录和注销。

一切正常，但是当我登录时，加载页面大约需要一秒钟，这非常慢。当我没有登录时，它只是几毫秒的问题。

通过使用内置的分析器，我发现了两个问题。首先，就像我说的，加载一个页面需要超过 1000 毫秒。其次，当我登录时，每当我加载一个页面时，该框架都会生成一个 SQL。该查询搜索具有某个 id（我的 id）的用户。我想它可以获取有关登录用户的信息。但是不应该有某种缓存。如果我的网站每秒必须管理许多请求，这会是一个问题吗？

我意识到`Auth::check()`在视图中使用是导致问题的原因。我有大约 4 个`Auth::check()`是我的 Blade 视图。当我没有时，它会很快。如果我有，它会很慢。然后，无论我有多少，它都不会变慢。就像 Auth 类的初始化需要太多时间或类似的东西。我想它解释了为什么它只在我登录时发生。

我深入研究了 Laravel 的代码，发现当`Auth::check()`第一次被调用时，Auth 类需要通过从数据库中检索用户信息来“激活”我的 Session。这解释了每个页面请求都执行的查询。但是由于分析器说查询甚至不需要一毫秒来执行，我仍然不知道为什么它会减慢应用程序的速度。

**新信息：**即使我没有向数据库发送查询，连接到它的简单动作也几乎需要一秒钟。这就是它慢的原因。我想我已经非常接近解决这个问题了。

到目前为止有什么想法吗？

提前致谢。

## 笔记

*   视图中的事实`Auth::check()`并没有改变任何东西。
*   使用另一种方法`Auth::guest()`不能解决问题。
*   **新：**连接到数据库很慢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-12T05:16:32.807

我终于找到了解决这个问题的方法。

在许多论坛上阅读有关 XAMPP、MySQL 和 PHP 的一些帖子时，我在某处读到最好使用*127.0.0.1*，因为*locahost*需要额外的 DNS 查找。

在数据库配置文件中，我只是将*locahost*更改为*127.0.0.1*。

现在一切都很快。

我觉得这真的很奇怪。在用于使数据库连接的配置文件中使用*locahost需要一秒钟以上！*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T04:33:09.843

我不同意哈莫的例子。在会话中包含除 ID 之外的任何用户信息都会带来安全风险，这就是大多数框架采用这种方式的原因。当用户登录时，除了查询他们的记录之外，是否还有其他运行？绝对不是那会减慢您的应用程序的速度。

# c# - 如何使 WCF 客户端符合特定的 WS-Security - 签署 UsernameToken 和 SecurityTokenReference

> ID：12832213
> 
> 赞同：26
> 
> 时间：2012-10-11T04:27:45.570
> 
> 标签：c#, wcf, x509certificate, ws-security

我需要创建一个 wcf 客户端来调用我无法控制的服务。

我得到了一个 wsdl 和一个工作的 soapui 项目。

该服务同时使用用户名/密码和 x509 证书。

* * *

更新

我现在了解问题所在，但仍不确定我需要采取哪些步骤才能创建所需的消息，因此非常感谢任何帮助。

我需要同时签署 UsernameToken 和 SecurityTokenReference。

我必须创建自定义绑定的代码已从这篇文章中删除，因为它不再使用。我不再将 SecurityBindingElement 添加到绑定中，而是添加了一个将安全元素写入标头的新行为。

因此，安全节点是通过继承 SignedXml 类、添加签名引用然后调用 ComputeSignature 以在 Security 标头中创建 Signature 节点来从头开始创建的。

您需要将 xml 传递给 SignedXml 构造函数才能使其正常工作。传递 UsernameToken 没有问题，这似乎已正确签名。

问题是 SecurityTokenReference 仅在调用 ComputeSignature() 时创建，因此我无法向此元素添加签名引用，因为它在需要时不存在（在 SignedXml 的重写 GetIdElement 方法中在 ComputeSignature() 之前调用

* * *

我用来创建签名块以插入到安全标头中的代码如下

```
 string certificatePath = System.Windows.Forms.Application.StartupPath + "\\" + "Certs\\sign-and-    enc.p12";

    XmlDocument xd = new XmlDocument();
    xd.LoadXml(xml);

    // Set Certificate 
    System.Security.Cryptography.X509Certificates.X509Certificate2 cert = new X509Certificate2(certificatePath, "password");
    MySignedXml signedXml = new MySignedXml(xd);
    signedXml.SigningKey = cert.PrivateKey;

    // Create a new KeyInfo object. 
    KeyInfo keyInfo = new KeyInfo();
    keyInfo.Id = "";

    MemoryStream keyInfoStream = new MemoryStream();
    XmlWriter keyInfoWriter = XmlWriter.Create(keyInfoStream);

    WSSecurityTokenSerializer.DefaultInstance.WriteKeyIdentifierClause(keyInfoWriter, new LocalIdKeyIdentifierClause("token_reference", typeof(X509SecurityToken)));   

    keyInfoWriter.Flush();
    keyInfoStream.Position = 0;
    XmlDocument keyInfoDocument = new XmlDocument();
    keyInfoDocument.Load(keyInfoStream);

    XmlAttribute attrib = keyInfoDocument.CreateAttribute("ValueType");
    attrib.InnerText = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3";
    keyInfoDocument.ChildNodes[1].ChildNodes[0].Attributes.Append(attrib);

    KeyInfoNode keyInfoNode = new KeyInfoNode();
    keyInfoNode.LoadXml(keyInfoDocument.DocumentElement);
    keyInfo.AddClause(keyInfoNode);

    // Add the KeyInfo object to the SignedXml object. 
    signedXml.KeyInfo = keyInfo;

    // Need to use External Canonicalization method. 
    signedXml.SignedInfo.CanonicalizationMethod = "http://www.w3.org/2001/10/xml-exc-c14n#";

    // Create a reference to be signed. 
    Reference reference = new Reference();
    reference.Uri = "#UsernameToken-1";

    XmlDsigEnvelopedSignatureTransform env = new XmlDsigEnvelopedSignatureTransform();
    env.Algorithm = "http://www.w3.org/2001/10/xml-exc-c14n#";
    reference.AddTransform(env);
    reference.DigestMethod = "http://www.w3.org/2000/09/xmldsig#sha1";
    signedXml.AddReference(reference);

    Reference reference2 = new Reference();
    reference2.Uri = "#token_reference";
    XmlDsigEnvelopedSignatureTransform env2 = new XmlDsigEnvelopedSignatureTransform();
    env2.Algorithm = "http://www.w3.org/2001/10/xml-exc-c14n#";
    reference2.AddTransform(env2);
    reference2.DigestMethod = "http://www.w3.org/2000/09/xmldsig#sha1";
    signedXml.AddReference(reference2);

    // Add the Signature Id 
    signedXml.Signature.Id = "MYSIG_ID";

    // Compute the signature. 
    signedXml.ComputeSignature();

    XmlElement xmlDigitalSignature = signedXml.GetXml(); 
```

其中 xml 变量是 UsernameToken xml 字符串，而 MySignedXml 类是一个子类 SignedXml，其中 GetIdElement 方法被覆盖（试图找到并正确地重新释放不存在的 SecurityTokenReference）

我现在花了几天时间研究和测试这个，不幸的是，提供服务的公司没有任何帮助——但我需要使用他们的服务。

**完整的工作肥皂消息（soapUI 项目）**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:XXXXX">
   <soapenv:Header xmlns:ebxml="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/">
   <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <wsse:BinarySecurityToken EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="CertId-D05E596B5ABC341FEB13505090224061" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">MIIEnDCCBAWgAwIBAgIBAjANBgkqhkiG9w0BAQUFADCBxDELMAkGA1UEBhMCTloxDTALBgNVBAgTBFdHVE4xEzARBgNVBAcTCldlbGxpbmd0b24xGDAWBgNVBAoTD0lSRFN0dWR5bGlua0IyQjEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxHjAcBgNVBAMTFWRldmNhLmIyYi5pcmQuZ292dC5uejEXMBUGA1UEKRMORGV2ZWxvcG1lbnQgQ0ExKDAmBgkqhkiG9w0BCQEWGWNocmlzLnNjaHVsdHpAaXJkLmdvdnQubnowHhcNMTEwOTE1MDIwNjIwWhcNMjEwOTEyMDIwNjIwWjCByTELMAkGA1UEBhMCTloxDTALBgNVBAgTBFdHVE4xEzARBgNVBAcTCldlbGxpbmd0b24xGDAWBgNVBAoTD0lSRFN0dWR5bGlua0IyQjEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxJTAjBgNVBAMTHHNpZ24tYW5kLWVuYy5kZXYuaXJkLmdvdnQubnoxFTATBgNVBCkTDHNpZ24tYW5kLWVuYzEoMCYGCSqGSIb3DQEJARYZY2hyaXMuc2NodWx0ekBpcmQuZ292dC5uejCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAykyZHVnXjsG220zB3kNOsGBeGP2rdNbLlIqW1D8yZO1fcj3/RhRiqsopbUrb8AU1ClpfhbH2K68kg7V91VAY0qrwNxP+pPPo1vYKMU6pT38qJGQzffr+iV2BCJshZvSk9E7QSWO5mFNstdg19xc+5ST1Lgb3fefuRG2KZVxPx0sCAwEAAaOCAZUwggGRMAkGA1UdEwQCMAAwEQYJYIZIAYb4QgEBBAQDAgZAMDQGCWCGSAGG+EIBDQQnFiVFYXN5LVJTQSBHZW5lcmF0ZWQgU2VydmVyIENlcnRpZmljYXRlMB0GA1UdDgQWBBSczRKXKPe3Sin7eFrVXfI7MXckzzCB+QYDVR0jBIHxMIHugBSLWxPSZd9otEj16vhLyovMCI9OMaGByqSBxzCBxDELMAkGA1UEBhMCTloxDTALBgNVBAgTBFdHVE4xEzARBgNVBAcTCldlbGxpbmd0b24xGDAWBgNVBAoTD0lSRFN0dWR5bGlua0IyQjEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxHjAcBgNVBAMTFWRldmNhLmIyYi5pcmQuZ292dC5uejEXMBUGA1UEKRMORGV2ZWxvcG1lbnQgQ0ExKDAmBgkqhkiG9w0BCQEWGWNocmlzLnNjaHVsdHpAaXJkLmdvdnQubnqCCQDL/qDdlx2j6DATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQEFBQADgYEAS4ZPIVVpgTOGN4XcIC3SiYlxF8wYg7qnUhH5wJsAD3VCKfj68j9FSJtdBWLlWvvRxEoDP2lZ0IbFl6Rjnl+2ibzFnyac2G1AVm5mwPrNKHBQJ9J5eDJi0iUVY7Wphz86tKnqj34GvlHPNXmrF7oGEcDhPwK0T8zRdE/pvKIUiJc=</wsse:BinarySecurityToken>
    <ds:Signature Id="Signature-2" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
            <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
            <ds:Reference URI="#CertId-D05E596B5ABC341FEB13505090224061">
                <ds:Transforms>
                    <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                <ds:DigestValue>3iVAUEAt8vAb7Ku+jf2gwSkSm0Q=</ds:DigestValue>
            </ds:Reference>
            <ds:Reference URI="#UsernameToken-1">
                <ds:Transforms>
                    <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                <ds:DigestValue>r4HLEAWJldJwmEmcAqV6Y8rnTPE=</ds:DigestValue>
            </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>
        YGh2I3VcukqjT0O7hKItiykWN5tlID18ZXRCwQjXriHmnVsO4wGcHjWfmhuNDecq+xRN+SjG8E7M
        2Rx/5/BbFKbVlNOkQOSbSxIs1YT9GaThK16pMrX5KRkkJme1W3R0pGIIQh6gGRSUf79RZUIYxyVl
        LqdIe561TXXDdtbt/6Q=
        </ds:SignatureValue>
        <ds:KeyInfo Id="KeyId-D05E596B5ABC341FEB13505090224372">
            <wsse:SecurityTokenReference wsu:Id="STRId-D05E596B5ABC341FEB13505090224373" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
                <wsse:Reference URI="#CertId-D05E596B5ABC341FEB13505090224061" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/></wsse:SecurityTokenReference>
        </ds:KeyInfo>
    </ds:Signature>
    <wsse:UsernameToken wsu:Id="UsernameToken-1" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
        <wsse:Username>XXXXXX</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">XXXXXXX</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security>
  <ebxml:Messaging xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
     <ebxml:UserMessage>
        <ebxml:MessageInfo>
           <ebxml:Timestamp>2002-02-02T14:18:02.0Z</ebxml:Timestamp>
           <ebxml:MessageId>bf9433d9-c6e9-4c12-9c98-724008a09c21</ebxml:MessageId>
        </ebxml:MessageInfo>
        <ebxml:PartyInfo>
           <ebxml:From>
              <ebxml:PartyId type="identifier">Trading Partner X</ebxml:PartyId>
              <ebxml:Role>Provider</ebxml:Role>
           </ebxml:From>
           <ebxml:To>
              <ebxml:PartyId type="identifier">XXXXXXX</ebxml:PartyId>
              <ebxml:Role>Requestor</ebxml:Role>
           </ebxml:To>
        </ebxml:PartyInfo>
        <ebxml:CollaborationInfo>
           <ebxml:AgreementRef>urn:XXXXXXXXX</ebxml:AgreementRef>
           <ebxml:Service type="Web Service">urn:XXXXXXXX</ebxml:Service>
           <ebxml:Action>customerInformation</ebxml:Action>
           <ebxml:ConversationId>e302426a-b2d9-4ff1-a14b-fbbc2f40a017</ebxml:ConversationId>
        </ebxml:CollaborationInfo>
     </ebxml:UserMessage>
  </ebxml:Messaging>
   </soapenv:Header>
   <soapenv:Body>
  <urn:ConnectionTest>
     <Message>Bonjour</Message>
  </urn:ConnectionTest>
   </soapenv:Body>
</soapenv:Envelope> 
```

我们得到了一些文件。安全部分复制如下

必须按以下顺序将以下安全性应用于每个请求： wsse:UsernameToken 必须包含并包含：

1.  wsse:Username 元素值的代理的门户用户名
2.  密码元素中 wsse:PasswordText（明文）值的代理门户密码 签名块：使用 x509 证书创建数字签名。每个软件提供者都需要持有和保护[待定]颁发的有效证书和私钥。对于每个服务请求，软件必须：

3.  包括与用于签名的私钥匹配的证书作为 wsse:BinarySecurityToken 并将其用作签名的 wsse:SecurityTokenReference

4.  签署 wsse:BinarySecurityToken
5.  签署 wsse:UsernameToken
6.  使用规范化方法算法：[http ://www.w3.org/2001/10/xml-exc-c14n#](http://www.w3.org/2001/10/xml-exc-c14n#)
7.  使用签名方法算法：[http ://www.w3.org/2000/09/xmldsig#rsa-sha1](http://www.w3.org/2000/09/xmldsig#rsa-sha1)
8.  使用摘要法算法：[http ://www.w3.org/2000/09/xmldsig#sha1](http://www.w3.org/2000/09/xmldsig#sha1)

## **更新**

我最初得到的 SoapUI 配置的图像 [![SoapUIConfig](../Images/f4e49d8b3a3f65b302280e4719d3d1d7.png)](https://i.stack.imgur.com/35OHA.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T00:15:06.110

今天终于把问题解决了。在术语方面，我需要签名的不是 SecurityTokenReference，而是 Binary Security Token。

为此，我需要隐藏 Initiator 和 Recipient 的证书并添加签名的支持令牌。

我回到使用配置来创建和签名消息，而不是尝试手动添加签名。

其他会阻止它工作的问题是我的自定义“消息传递”标头上有一个不正确的命名空间，所以要注意命名空间，我认为它们不会像它们一样重要。

创建绑定的代码如下

```
 private System.ServiceModel.Channels.Binding GetCustomBinding()
    {
        System.ServiceModel.Channels.AsymmetricSecurityBindingElement asbe = new AsymmetricSecurityBindingElement();
        asbe.MessageSecurityVersion = MessageSecurityVersion.WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12;

        asbe.InitiatorTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters { InclusionMode = SecurityTokenInclusionMode.Never };
        asbe.RecipientTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters { InclusionMode = SecurityTokenInclusionMode.Never };
        asbe.MessageProtectionOrder = System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt;

        asbe.SecurityHeaderLayout = SecurityHeaderLayout.Strict;
        asbe.EnableUnsecuredResponse = true;
        asbe.IncludeTimestamp = false;
        asbe.SetKeyDerivation(false);
        asbe.DefaultAlgorithmSuite = System.ServiceModel.Security.SecurityAlgorithmSuite.Basic128Rsa15;
        asbe.EndpointSupportingTokenParameters.Signed.Add(new UserNameSecurityTokenParameters());
        asbe.EndpointSupportingTokenParameters.Signed.Add(new X509SecurityTokenParameters());

        CustomBinding myBinding = new CustomBinding();
        myBinding.Elements.Add(asbe);
        myBinding.Elements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8));

        HttpsTransportBindingElement httpsBindingElement = new HttpsTransportBindingElement();
        httpsBindingElement.RequireClientCertificate = true;
        myBinding.Elements.Add(httpsBindingElement);

        return myBinding;
    } 
```

使用绑定时，我设置了 ClientCredentials 用户名、ServiceCertificate 和 ClientCertificate，一切都按预期工作。

* * *

使用代码如下

```
using (CredentialingService.SOAPPortTypeClient client = GetCredentialingClient())
{
    client.Open();
    etc....
}

private static CredentialingService.SOAPPortTypeClient GetCredentialingClient()
{
    CredentialingService.SOAPPortTypeClient client = new CredentialingService.SOAPPortTypeClient(GetCustomBinding(), new EndpointAddress(new Uri(Settings.AppSettings.B2BUrl), new DnsEndpointIdentity(Settings.AppSettings.B2BDNSEndpoint), new AddressHeaderCollection()));
    client.Endpoint.Contract.ProtectionLevel = System.Net.Security.ProtectionLevel.None;
    SetClientCredentialsSecurity(client.ClientCredentials);

    return client;
} 
```

我的帖子中指定了 GetCustomBinding

SetClientCredentialsSecurity是设置证书的地方，如下

```
private static void SetClientCredentialsSecurity(ClientCredentials clientCredentials)
{
    clientCredentials.UserName.UserName = Settings.AppSettings.B2BUserName;
    clientCredentials.UserName.Password = Settings.AppSettings.B2BPassword;

    string directoryName = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);
    clientCredentials.ServiceCertificate.DefaultCertificate = new X509Certificate2(Path.Combine(directoryName, Settings.AppSettings.B2BServerCertificateName));
    clientCredentials.ClientCertificate.Certificate = new X509Certificate2(Path.Combine(directoryName, Settings.AppSettings.B2BClientCertificateName), Settings.AppSettings.B2BClientCertificatePassword);
} 
```

希望这使它更清楚一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:12:16.247

也许是因为您的证书不是公开有效的。试试这个：

```
System.Net.ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(delegate { return true; });
//...
using (var client = new SrvClient())
{
    client.ClientCredentials.UserName.UserName = "usr";
    client.ClientCredentials.UserName.Password = "psw";
    //...
} 
```

# android - 无法更改警报对话框背景

> ID：12832222
> 
> 赞同：0
> 
> 时间：2012-10-11T04:28:57.317
> 
> 标签：android, background, android-alertdialog

好的，我为此发疯了。我正在尝试将警报对话框背景颜色从默认的灰色更改为白色。我无法这样做。我正在使用带有列表的警报对话框

我已经扩展了父 theme.dialog 样式，并且我尝试了很多属性组合，但我不断获得白色背景，不仅是列表，而且超出了 dialf 边界（好像宽度是填充父项）

当我将颜色设置为透明时，对话框会很好地显示为灰色列表。似乎对话框窗口是透明的，它是填充父级，但列表是灰色的，这可能是我们看不到完整对话框的原因

我怎样才能解决这个问题？？

# algorithm - 如何优化连接 n 个字符串的成本

> ID：12832223
> 
> 赞同：1
> 
> 时间：2012-10-11T04:29:17.493
> 
> 标签：algorithm, optimization, complexity-theory, string-concatenation

如果给定 n 个字符串及其长度和一个 add(string s1,string s2) 函数，该函数会将字符串 s2 与 s1 连接起来并返回 s3。我们将如何优化将所有这些字符串连接成一个大字符串的成本。

如果没有给出这样的函数，我们可以简单地创建大小为 (n1 + n2 + ...nn) 的输出字符串，并继续向其附加每个字符串的字符。但是，有了这个函数，我们必须遍历输入字符串 s1 以找到它的结尾，然后开始将字符串 s2 连接到它。

所以如果字符串的长度是 2, 6, 1, 3, 4 ..

```
add (s1, s2) traversal for length 2, op string of length 8
add (s1, s3) traversal for length (2+6) op string of length 9
add (s1, s4) traversal for length (2+6+1) op string of length 12
add (s1, s5) traversal for length (2+6+1+3) op string of length 16...and so on.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:59:00.493

```
"with this function given we'd have to traverse input string s1 
to find it's end and then start concatenating string s2 to it. " 
```

您可以在遍历字符串时逐个字符地连接它。将一个小字符串附加到结果字符串后，您可以获取指向结果字符串末尾的指针。因此，在添加下一个小字符串时，请使用它，这样您就不必再次遍历该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T07:26:59.053

Thera 有两种方法可以做到这一点。

1.  对数组进行排序，然后继续连接，这将最大限度地降低成本。

    时间复杂度 O(nlogn) 其中 n 是数组的大小。（假设您使用了快速排序）空间复杂度 O(logn)

2.  创建数组的最小堆。现在从堆中删除第一个两分钟，添加它们
    并再次添加到堆中，需要多少？

    创建最小堆需要 O(n)。删除第 1 和第 2 分钟将花费 O(n)+O(n)，等待如何？，将 root 替换为最后一个元素并调用 heapify ，它需要 O(logn) ，删除 . 现在我们必须对
    剩余的 n-2 个元素做同样的事情，所以总共需要 O(n-2(logn)) 最糟糕的是，添加两个元素需要 O(1) 并且重新插入并再次调整堆需要 O( logn) 总体而言，它将是 O(nlogn) 的顺序，我们还可以看到在这种情况下需要更多的调用和指令。

总体问题只需要对数组进行排序，我们可以最小化连接的成本，但是如果我们在考虑时间和空间的情况下需要更多地考虑选择正确的排序算法

# java - 如何使用 Java 代码将 facebook 保存到 html 文件中？

> ID：12832224
> 
> 赞同：0
> 
> 时间：2012-10-11T04:29:19.500
> 
> 标签：java, html, facebook, login

我的作品是使用 javacode 将一个 facebook 地址保存到 *.html 文件中。

例如：www.facebook.com/hiriji.sakumo。

您可以使用网络浏览器轻松保存该页面。

但在 Java 代码中，问题是 facebook 需要登录帐户才能看到该站点。所以我想问一下如何使用java代码登录facebook并将页面保存到htm文件。

谢谢你。

# vhdl - VHDL - 需要一些关于除法和乘法的建议

> ID：12832226
> 
> 赞同：2
> 
> 时间：2012-10-11T04:29:29.803
> 
> 标签：vhdl, unsigned, division

SO用户，

我正在尝试校准从 ADC 读取值的电阻式湿度传感器。ADC 输出一个 8 位值。我正在使用 5V 的 Vref 值。

我校准的第一步是将数字除以 255 并乘以 Vref 值。因此，校准值 = (输出 / 255) * Vref。

现在，在 VHDL 中，我遇到了一些 VHDL 代码来划分两个数字。我有一个除以两个无符号数，所以这不应该是一个问题。在这里； [VHDL 将两个无符号数相除](http://vhdlguru.blogspot.com.au/2010/03/vhdl-function-for-division-two-signed.html)

现在，在我的 VHDL 文件中，我有 8 位 ADC 值（湿度），并且我定义了两个常数，max_val (11111111 = 255) 和 Vref (00000101 = 5) 都是无符号的。我首先使用无符号（湿度）将湿度转换为无符号，然后将此值和 max_num 值传递给除法函数。结果，我将它乘以 Vref。

现在，我的问题是；

1.  这是一个好方法吗？IE; 我除法和乘法的方式。
2.  如何将无符号值转换回 std_logic_vector？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:02:39.667

1.  我认为它应该除以256？或者使用 255，我认为您的结果几乎相似（请注意，最大距离在 255/256 和 255/255 之间：= 0.00390625）。结果将是固定点数。乘以 5：右移 2 = 乘以 4，然后加上这个数字 (A*5 = A*4 + A)，您的代码应如下所示：

    A_Multiply_4 <= A&"00";
    A_Multiply_5 <= A_Multiply_4 + A；

2.  从无符号转换为 std_logic_vector（我记得它存在于 std_logic_1164 中）：

    slv_array <= std_logic_vector(unsigned_number);

如果您想除以 255，我认为您应该将您的 num 除以 256 并在移位后添加一个小数：

1/255 = 1/256 + 1/x

x = 2 幂的东西。移位器是最好的方法。

我尝试了 1/3 并且必须对这种方法感到满意。

P / sx = 2 ^ 16，你得到2个案例之间的差异是5.9838388480392156862745098039216e-8。但我不认为你想要的数字在点后超过 8 位。

# ruby-on-rails - 在控制器中使用布局

> ID：12832229
> 
> 赞同：0
> 
> 时间：2012-10-11T04:29:35.123
> 
> 标签：ruby-on-rails, ruby, layout

我正在研究 cms，并且需要在页面控制器中选择动态模板。我有一个前置过滤器，可以在用户设置中获取所选模板名称。现在我需要弄清楚如何使用该实例变量呈现正确的布局。

这是我到目前为止所拥有的：

```
#This sets @template to the template object. @template.name is "Default"
before_filter :get_template

layout "templates/#{@template.name.downcase.gsub(" ", "_")}"
#layout "templates/default" #This line renders fine 
```

我收到以下错误：

```
undefined method `name' for nil:NilClass 
```

我的猜测是 before_filter 不一定在调用模板之前运行。

有没有更好的方法可以让我尝试实现这一目标？我真的没有使用许多模板并选择要渲染的模板的经验。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:57:59.830

试试这个：

```
class PagesController < ApplicationController

  def template_path
    #... returns the template path, e.g. "layouts/theme_a"
  end

  def set_template
    self.class.layout(template_path)
  end

  before_filter :set_template

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:36:02.587

```
 get_template inside of application controller , so we can access from any controlller :

    --------------------
class ApplicationController < ActionController::Base
    @template=get_template
    layout "templates/#{@template.name.downcase.gsub(" ", "_")}"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:38:15.483

这应该工作

```
class ApplicationController < ActionController::Base
    layout :set_custom_layout

  def set_custom_layout
    get_template
  end
end 
```

# data-structures - 交换链表的头部

> ID：12832231
> 
> 赞同：0
> 
> 时间：2012-10-11T04:29:59.163
> 
> 标签：data-structures, linked-list

我从最近参加面试的朋友那里听到了这个问题：

给定链表的头，编写一个函数将头与链表中的下一个元素交换，并返回指向新头的指针。

前任：

```
i/p: 1->2,3,4,5 (the given head is 1)
o/p: 2->1,3,4,5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T04:32:40.690

假设

```
struct node {
    struct node *next;
};
struct node *head; 
```

那么解决方案可能看起来像

```
struct node *next = head->next;
if(next == NULL) return head; // nothing to swap
head->next = next->next;
next->next = head;
head = next;
return next; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T05:06:35.747

```
struct node* head;

struct node *tmp1,*tmp2;
tmp1=head; // save first node pointer
tmp2=head->next->next; // save third node pointer
head=head->next; // Move Head to the second node
head->next=tmp1; // swap
head->next->next=tmp2; // Restore the link to third node 
```

# ios - iOS 6 Xcode 4.5 不支持架构 armv7s

> ID：12832232
> 
> 赞同：8
> 
> 时间：2012-10-11T04:30:00.147
> 
> 标签：ios, xcode, ios6, armv7

尝试为 Ad Hoc 版本归档应用程序时，我收到以下警告：

`iPhone/iPod Touch: application executable contains unsupported architecture(s): armv7s (-19031)`

我真的不确定为什么会发生这种情况，原因有两个：

*   我使用的唯一非基础框架是 Facebook SDK，它是最新版本
*   上周我成功地归档了这个应用程序，从那以后唯一发生的变化就是纯粹的编码变化。

此外，我尝试在插入和不插入 iPhone 5 的情况下进行归档，但我都收到了错误消息。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T04:32:33.310

快速修复是

从

> 项目 -> 构建设置 -> 架构

更新 ：：

现在将 Build Settings 中的 Build Active Architecture 更改为 No 为 Yes。但即使这也不是这个问题的纯粹解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T10:27:01.320

我可以通过将“构建设置->仅构建活动架构”的状态从“否”更改为“是”来存档和验证我的项目。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-31T00:50:00.260

今天将我的应用程序（更新）提交到应用程序商店时出现同样的问题。

我清楚地记得它的最后一个版本是同时设置了 armv7 和 armv7s 并成功提交的，但现在主办方告诉我：

“iPhone/iPod Touch：应用程序可执行文件包含不受支持的架构：armv7s”

删除 armv7s 很简单，但我的应用程序是通用的，删除 armv7s 的应用程序会在所有 iOS 设备（例如 iPhone 5）上运行吗？我什么时候应该用 aremv7s 构建？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T20:35:39.687

同样的问题，应用程序之前通过了验证，但是在快速更改代码之后，不行。这可能与ipods有关吗？似乎是最近的问题，截至昨天。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T04:03:03.820

得到与 21k 相同的结果。上周我向 App Store 提交了一个二进制文件，它通过了验证`armv7`和审查。`armv7s`现在我尝试使用完全相同的项目设置（除了通常的版本号凸点）向同一个应用程序提交更新，但验证失败。

事实上，我尝试验证上周存档的应用程序，现在得到了同样的错误。因此，App Store 方面一定发生了一些变化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T07:53:06.057

转到 Project ---> Build Settings 并向下滚动到 Architecture 设置。

您可能会看到体系结构下列出的值 $(ARCHS_STANDARD_32_BIT)。

如果是这样，请双击 $(ARCHS_STANDARD_32_BIT)，选择它，然后单击减号按钮将其删除。然后单击加号按钮并编写 armv7 并按 Enter。

您现在已经删除了不受支持的 armv7s。再试一次，事情应该会很好。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-01T09:05:46.813

从菜单 Build settings > Architectures 中删除 armv7s 架构。此时必须出现有效的架构 amrv7s 和 amrv7。仅在 s 中完成删除。如果菜单没有出现，请注意它在搜索栏中设置为“全部”和“组合”。

# asp.net-mvc-4 - MS 身份和访问工具 MVC 4

> ID：12832239
> 
> 赞同：5
> 
> 时间：2012-10-11T04:31:01.690
> 
> 标签：asp.net-mvc-4, visual-studio-2012, wif, claims-based-identity

这个 VS 2012 扩展旨在允许我将本地开发 STS 添加到我的 MVC 应用程序[http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e](http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e)

我按照非常简单的说明进行操作，例如右键单击项目名称并在菜单中选择身份和访问权限。选择您的身份提供者，然后单击确定将设置应用到您的 web.config。

我运行我的 MVC 4 应用程序，它立即重定向到 login.aspx

我猜有MVC 4 的***特殊***说明。

这些是什么？

我在哪里可以找到它们？

*编辑*

需要明确的是，我在 Visual Studio 2012 中创建了一个 ASP.MVC 4 Internet 应用程序。然后我使用 Identity & Access Tool 添加本地开发 STS 来测试我的应用程序。

我在本地 IIS Express 上运行该站点

当我调试应用程序时，我被重定向到

> 本地主机:11378/login.aspx?ReturnUrl=%2f

即使我按照已经给出的建议中的建议删除表单身份验证，也会发生这种情况。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T23:46:07.627

就我而言，我添加了这个

```
<system.web>
...
<httpModules>
...
    <remove name="FormsAuthentication" />
</httpModules>
</system.web> 
```

和这个

```
<system.webServer>
...
   <modules>
   ...
      <remove name="FormsAuthentication" />
   </modules>
</system.webServer> 
```

*编辑*

您可能会遇到的下一个问题是

> “ [http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier) ”或“ [http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider](http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider) ”类型的声明是不存在于提供的 ClaimsIdentity 上。要启用基于声明的身份验证的防伪令牌支持，请验证配置的声明提供程序是否在其生成的 ClaimsIdentity 实例上提供这两个声明。如果配置的声明提供程序使用不同的声明类型作为唯一标识符，则可以通过设置静态属性 AntiForgeryConfig.UniqueClaimTypeIdentifier 进行配置。

将这 2 个声明添加到身份和访问工具中的开发 STS

[http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier)
[http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider](http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider)

并将这一行添加到您的 Global.asax

```
AntiForgeryConfig.UniqueClaimTypeIdentifier = ClaimTypes.NameIdentifier; 
```

[这篇文章帮助了我](http://brockallen.com/2012/07/08/mvc-4-antiforgerytoken-and-claims/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T16:00:13.827

删除 FormsAuthentication 模块对我有用。

```
 <httpModules>
    ...
    <remove name="FormsAuthentication" />
 </httpModules> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T09:52:04.260

我在本地 IIS Express 上的 MVC4 应用程序也遇到了类似的问题。

事实证明，该项目启用了**Windows 身份验证。**禁用 Windows 身份验证（在项目属性窗格中 -**按 F4**）解决了该问题。

# macos - 无法在 OS X 10.6.8 上安装 DMD 2.060

> ID：12832241
> 
> 赞同：2
> 
> 时间：2012-10-11T04:31:18.867
> 
> 标签：macos, osx-snow-leopard, d, dmd

我计划在我的生命中第一次尝试 D。我有一台运行 OS X 10.6.8 (Snow Leopard) 的 MacBook Pro。

我进入 D 下载页面并单击 OS X 的 dmd 2.060 安装程序的链接。我打开它并双击其中的“DMD2.pkg”文件。安装程序提出了一些文本，其中包括一行“此软件包仅适用于 Mac OS X Leopard (10.5)。”。我试图找到 OS X 10.6 的版本，但找不到，所以我忽略了警告并单击“继续”。

我点击了协议和问题，然后当它完成时，安装程​​序给出了以下消息：

> 安装失败。安装程序遇到导致安装失败的错误。请联系软件制造商寻求帮助。

论坛上有人建议在尝试安装 D 时运行控制台应用程序。我尝试过并收到以下消息：

```
9/17/12 7:33:35 PM  Installer[19715]    PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-api.pkg
9/17/12 7:33:35 PM  Installer[19715]    PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-bin.pkg
9/17/12 7:33:35 PM  Installer[19715]    PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-gui.pkg
9/17/12 7:33:35 PM  Installer[19715]    PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-kext.pkg
9/17/12 7:33:35 PM  Installer[19715]    PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-profiles.pkg
9/17/12 7:33:35 PM  Installer[19715]    PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-startup.pkg
9/17/12 7:33:54 PM  installd[19720] Starting
9/17/12 7:33:54 PM  installd[19720] uid=501, euid=501
9/17/12 7:33:54 PM  installd[19720] PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-api.pkg
9/17/12 7:33:55 PM  installd[19720] PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-bin.pkg
9/17/12 7:33:55 PM  installd[19720] PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-gui.pkg
9/17/12 7:33:55 PM  installd[19720] PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-kext.pkg
9/17/12 7:33:55 PM  installd[19720] PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-profiles.pkg
9/17/12 7:33:55 PM  installd[19720] PackageKit: *** Missing bundle identifier: /Library/Receipts/vpnclient-startup.pkg
9/17/12 7:33:57 PM  com.apple.installd.user[19720]  Permission denied
9/17/12 7:33:57 PM  Installer[19715]    The Installer encountered an error that caused the installation to fail. Contact the software manufacturer for assistance. 
```

我在 digitalmars.D.learn 论坛上[问过这个问题。](http://forum.dlang.org/thread/yrcyfaalimocuovsvgqo@forum.dlang.org#post-ifqtxadrqpkjeyrpwfjn:40forum.dlang.org)我不确定这是否是最合适的论坛，但我把它放在那里是因为我刚刚开始学习。我还在他们的跟踪器上提交了错误报告。您可以在 digitalmars.D.bugs 上查看[错误报告](http://d.puremagic.com/issues/show_bug.cgi?id=8682)或[自动生成的帖子，](http://forum.dlang.org/thread/bug-8682-3@http.d.puremagic.com/issues/)但尚未收到任何回复。

有人建议使用名为 DVM 的第 3 方程序，但我对此感到有点不情愿。我不明白为什么我必须安装第 3 方程序，在文档或下载页面 AFAIK 的任何地方都没有提到，只是为了安装编译器。

有谁知道为什么会发生这种情况或我应该怎么做？

**编辑：**有人在评论中提到了“vpnclient”。我曾经为我以前的工作安装过 Cisco VPNClient。~~但是，我已经一年多没有使用它了，至少几个月前我删除了它。~~我不记得哪个版本的详细信息，但是如果有人需要知道，我可以尝试在下次我可以访问我的家用计算机时推断出这一点。

**编辑2：**上述评论部分错误。我的计算机上仍然有 Cisco VPNClient 4.9.01.0180，尽管我已经一年多没有使用它了。

**编辑 3：**我尝试删除 VPNClient，但我仍然遇到同样的问题。我仍然不确定 VPNClient 是否与该问题有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:32:08.677

我没有使用过 Mac 版本，但您可能可以在其他平台上使用我喜欢的最简单的方式 D：只需抓住 zip 并在适当的位置使用它。

[https://github.com/downloads/D-Programming-Language/dmd/dmd.2.060.zip](https://github.com/downloads/D-Programming-Language/dmd/dmd.2.060.zip)

在任何地方解压缩，然后直接从解压缩的文件夹中使用它。

从您的控制台

```
$ wget https://github.com/downloads/D-Programming-Language/dmd/dmd.2.060.zip
$ unzip dmd.2.060.zip
(then create your hello.d)
$ dmd2/osx/bin/dmd hello.d 
```

应该可以生成您的可执行文件。我不会为任何更高级的安装而烦恼，它似乎造成的麻烦比它的价值还多。

# java - 如何在java中将数组转换为二维数组

> ID：12832247
> 
> 赞同：1
> 
> 时间：2012-10-11T04:31:48.100
> 
> 标签：java, list

我想将一个 n 元素数组传输到 java 中的二维数组。

例如：

[1,2,3,4]

这个数组应该被转移到一个二维数组

[[1, 2], [1, 3], [1, 4], [2, 3], [2, 4] [3,4]]

*   二维数组的第一行是 1, 2。
*   双数组的第二行是 1, 3。
*   双数组的第三行是 1, 4。
*   两个数组的第四行是 2, 3。
*   两个数组的第五行是 2, 4。
*   最后一行是 3, 4

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T04:42:12.790

无需为您编写任何代码...

想想你的二维数组需要多大。认识到您需要遍历源数组的内容才能将每个值放入目标数组。

**所以它看起来像......**

创建一个适当大小的二维数组。使用 for 循环遍历您的一维数组。在该 for 循环中，您需要确定 1d 数组中的每个值应该在 2d 数组中的位置。尝试对您的计数器变量使用 mod 函数来“环绕”二维数组的索引。我故意含糊其辞，因为这是家庭作业。尝试发布一些代码，以便我们可以看到您卡在哪里。

或者您可以使用该代码：-

```
int array2d[][] = new int[10][3];

for(int i=0; i<10;i++)
   for(int j=0;j<3;j++)
       array2d[i][j] = array1d[(j*10) + i]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T06:38:04.797

从排列和组合中，您可以获得二维数组的行长（即n！/r！*（nr）！）。

*   `getLengthOfArray`方法做到这一点。
*   `calculatePermutation`是计算排列的辅助方法。
*   `transferToTwoDArray`会给你正确的答案。

```
public int[][] transferToTwoDArray(final int[] oneDArray)
{
    assert null != oneDArray;
    final int length = oneDArray.length;
    assert length > 2;

    final int newArrayLength = getLengthOfArray(length, 2);
    final int[][] newArray = new int[newArrayLength][2];

    int nextRowIndex = 0;
    for (int i = 0; i < length; i++)
    {
        int nextValue = i + 1;

        while (nextValue < length)
        {
            newArray[nextRowIndex][0] = oneDArray[i];
            newArray[nextRowIndex][1] = oneDArray[nextValue++];
            nextRowIndex++;
        }
    }
    return newArray;
}

/**
 * Calculate permutation.
 * 
 * @param length
 *            the length
 * @return the int
 */
private int calculatePermutation(final int length)
{
    if (length == 0)
    {
        return 1;
    }
    return length * calculatePermutation(length - 1);
}

/**
 * Gets the length of array.
 * 
 * @param length
 *            the length
 * @param arrayDimention
 *            the array dimention
 * @return the length of array
 */
private int getLengthOfArray(final int length, final int arrayDimention)
{
    return calculatePermutation(length)
            / ((calculatePermutation(arrayDimention)) * (calculatePermutation(length - arrayDimention)));
} 
```

干杯，钱德。

# android - 如何在 Android 中为整个应用程序应用字体类型？

> ID：12832249
> 
> 赞同：0
> 
> 时间：2012-10-11T04:32:12.033
> 
> 标签：android, fonts, truetype, android-fonts

我想在不使用 XML 的情况下应用字体类型。通过代码，我想更改字体类型，当我单击 Arial else Times New Roman 等时，它应该能够申请整个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:42:33.120

试试这个代码来改变应用程序的字体

```
TypeFace  typeFace = Typeface.createFromAsset(getAssets(), "font.ttf");
TextView view= (TextView) findViewById(R.id.view);
view.setTypeface(typeFace) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:49:10.013

我建议在首选项屏幕中设置列表首选项。然后，您可以从中设置字体。IE：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this); 
String font = sp.getString("font","-1")
if(font.equals("timesroman")) {
TypeFace  typeFace = Typeface.createFromAsset(getAssets(), "timesnewroman.ttf");
}
else if(font.equals("arial")) {
TypeFace  typeFace = Typeface.createFromAsset(getAssets(), "arial.ttf");
}
TextView view= (TextView) findViewById(R.id.view);
view.setTypeface(typeFace) 
```

# ruby-on-rails-3.2 - rails 服务器无法安装 twitterbootstrap gem

> ID：12832252
> 
> 赞同：0
> 
> 时间：2012-10-11T04:32:33.093
> 
> 标签：ruby-on-rails-3.2

当我尝试启动 rails 服务器时，我在尝试强制安装 twitter bootstrap gem 后遇到以下错误

**找不到 gem 'therubyracer (~> 0.10.2) x86-mingw32，这是 gem 'twitter-bootstrap-rails (>= 0) x86-mingw32 在任何来源中所必需的。**

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:31:19.460

你的操作系统是什么？是窗户吗？尝试运行此命令

```
 $gem install -f --ignore-dependencies  twitter-bootstrap-rails --platform ruby 
```

# postgresql - 使用 PostgreSQL、Javascript 库或可重用函数存储和索引 YAML？

> ID：12832262
> 
> 赞同：3
> 
> 时间：2012-10-11T04:33:10.130
> 
> 标签：postgresql, plv8

[PostgreSQL](http://www.postgresql.org/) 9.2 具有原生 JSON 支持。但是，我想将人类可读的配置文件存储在 YAML 中。而且我想我想索引一些（但不是全部）配置文件值。因此我想知道：

1.  是否有可能在 Postgres 中包含 [解析 Yaml 的第三方 Javascript 库]，例如[js-yaml](https://github.com/nodeca/js-yaml)。然后我可以拥有自己的 YAML Javascript 助手，就像 PostgreSQL 9.2 中内置的 JSON 助手一样。

或者：

1.  是否可以声明单独的可重用 Javascript 函数？如果是这样，那么我可以添加我自己的 YAML 解析函数（基于简单的正则表达式），它能够解析 YAML 的子集，例如这里的顶级键值对：

    ```
    # some "top level key-value paris":
    the_key: 'the value'
    another_key: 'another value'
    # But this however:
    would_be_too_complicated_to_parse_manually_with_regexps: |
      block string
      with newlines 
    ```

最坏的情况是我需要在每个 PostgreSQL 存储过程中复制 YAML 解析代码（如果我不能添加 3rd 方库或声明可重用函数）。

（在我的情况下，性能并不是非常重要。）

（我用谷歌搜索了“ *postgresql plv8 reusable function* ”和“ *postgresql plv8 library* ”，但没有发现任何相关性）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:43:13.150

pl/v8 过程语言可能是要走的路。它是一种“受信任的”语言，这意味着（除其他外）它不**提供**任何方法来执行“从该文件加载外部模块”的事情。但它确实有一个“find_function()”方法，可以让您定义自己的 javascript 函数并从另一个函数（无论是否为 js）调用它。请参阅此博客文章中的描述：http:
[//umitanuki.hatenablog.com/entry/2012/04/10/171935](http://umitanuki.hatenablog.com/entry/2012/04/10/171935)

# google-app-engine - AppEngine 中的 getCurrentUser Magic - 它是如何工作的？

> ID：12832271
> 
> 赞同：0
> 
> 时间：2012-10-11T04:34:09.037
> 
> 标签：google-app-engine

Google 如何允许在不传递 HttpServletRequest 请求参数的情况下调用 userService.getCurrentUser()？我希望扩展 UserService，但它不允许我轻松做到这一点。

我创建了自己的身份验证机制，它与 UserService 重叠，以便我可以允许 Google 支持的用户和自动登录的用户。但我有兴趣知道如何在从任何函数调用时发送 getCurrentUser。

这是当前的工作流程

请求保护资源->过滤->在某处设置当前用户，但我不确定在哪里，这样我就可以从应用程序的其余部分调用它而不传递httprequests ..

在我的代码中

GetCurrentUser() 应该返回过滤器中设置的用户。请注意，我不会传递原始的 HttpServletRequest

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:55:35.997

After few days of research, we can safely save the session info in the ThreadLocal. This is set in the servlet filter. [Static ThreadLocal variable in a WebApp - Are there any Security/Performance issues?](https://stackoverflow.com/questions/6217173/static-threadlocal-variable-in-a-webapp-are-there-any-security-performance-iss)

Since each servlet is executed in a single thread, we can safely call getCurrentUser from the code which then reads from the threadlocal.

Caveat though. Threads are recycled. So you can get a thread which has threadlocal set for a different user. You have to make sure that it is reset everytime.

# c++ - DLL 函数必须在不同的线程上调用

> ID：12832275
> 
> 赞同：0
> 
> 时间：2012-10-11T04:34:45.473
> 
> 标签：c++, multithreading, dll

我有一个`Copy(const char** srcFiles, const char* dst)`复制`srcFiles`到文件夹的 dll 函数`dst`。例如，它必须每 0.01 秒一次。将复制进度信息（百分比）发送到我自己的函数`CopyProgress`。问题是我不能更改`Copy`函数代码，所以我认为在不同的线程上执行这个函数是个好主意。但我是多线程的初学者，无法想象如何做到这一点。

任何想法，提示？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:46:25.277

首先，您应该真正考虑更改`Copy`以通过回调为您提供进度信息。但是，如果您绝对必须不进行更改`Copy`，则必须在另一个线程中使用 运行它[`CreateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx)，然后定期扫描目标目录以查看已复制了多少（对于此方法，每 0.01 秒可能太快不实用 - 如果你需要这么多的粒度，你必须添加一些钩子到`Copy`）。

# sql - sqlplus中的条件和计算

> ID：12832277
> 
> 赞同：0
> 
> 时间：2012-10-11T04:35:05.333
> 
> 标签：sql, oracle, sqlplus

所以我想知道欠款 3500 美元或更多的学生所欠的总余额。这是我一开始尝试的

> 从学生中选择总和（余额）；

它工作正常，但不符合条件。

所以我尝试了这个

> 从余额 >= 3500 的学生中选择总和（余额） ；

给了我同样的答案，所以我想它不应该是正确的？？

然后我尝试了这个

> 从学生中选择总和（余额> = 3500）；

这给了我一个语法错误。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:36:32.313

```
select sum(CASE WHEN balance >= 250 THEN balance ELSE 0 END) from student ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:41:31.227

试试这个：

```
SELECT SUM(BALANCE),studentNo FROM STUDENT 
group by studentNo  having SUM(BALANCE)>3500 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:45:22.857

这是一种方法：

```
select sum(balance) from (select balance from student where balance >= 3500); 
```

# css - CSS边框是如何创建三角形的？

> ID：12832279
> 
> 赞同：-2
> 
> 时间：2012-10-11T04:35:07.787
> 
> 标签：css

我很想知道流行的 CSS 三角形是如何仅使用边框制作的。下面是代码示例：

```
#CLASS or ID name  #CLASS or ID name:after {
  border-color: transparent transparent #F3F3F3;
  border-style: solid; 
  border-width: 6px;  
  bottom: 0;  
  content: ""; 
  height: 0;
  left: 50%; 
  margin-bottom: -1px;
  margin-left: -6px; 
  margin-top: 0;
  position: absolute;
  width: 0;
} 
```

同样，这究竟是如何产生向上箭头的？此外，我对做什么感到困惑`content: ""`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T05:08:49.830

user1637741，你问了一个很好的问题。

首先，让我先解释`content:"";`. 你看，我们在这里使用的是一个叫做[伪元素](https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements)。这些旨在添加`content`到您的页面，例如文字或图像。三角形（或箭头）的情况是一种黑客行为，因为我们实际上不想向页面添加任何新内容；相反，我们只是想为元素绘制一个边框（是的，最终会给我们一个三角形）。然而，伪元素`content`不仅仅指定它包含的内容。它还[充当布尔值来确定是否显示元素](http://www.w3.org/TR/CSS2/generate.html#content)。换句话说，如果没有内容，这个东西就不会渲染。对我们来说幸运的是，简单地传递一个空字符串就足以让它显示出来。

好的，现在关于那个讨厌的边界。它到底是如何形成三角形的？简而言之，我们所做的是在元素的单个边缘上绘制边框，然后定位元素，使我们只能看到看起来是三角形的东西。

在这里，让我告诉你。看看[这个 JSFiddle](http://jsfiddle.net/wgYrL/)。这并没有什么太不寻常的事情。它只是一个仅显示底部边框的 div。但是，如果你盯着它想一想，想象一下隐藏大部分边界，剩下的就是一个三角形。如果你把它除了一个边缘之外的所有东西都去掉了，我们就会剩下一个很小的三角形。你能看见它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:17:19.890

首先，让我们重新安排一下您的示例，并删除任何与您的问题无关的 css：

```
.my-div:after {
    content: ""; 
    border-style: solid; 
    border-width: 6px;  
    border-color: transparent transparent #F3F3F3;
} 
```

这是在做什么：

*   `content: ""`在 .之后立即插入一些内容`.my-div`。由于在这种情况下它是一个空字符串，因此您现在基本上有一个没有内容的文本节点，因此宽度为 0px

*   接下来，`border-style: solid;`将`border-width: 6px`用 6px 宽的边框包围空内容。由于内容没有宽度，因此您基本上得到了一个实心框，它是您的默认文本颜色的任何颜色

*   最后，`border-color: transparent transparent #F3F3F3;`将重置四个边中的每一个的边框颜色。第一个`transparent`设置顶部边框清晰，第二个设置左右边框也清晰，#F3F3F3 设置底部边框为灰白色。所以现在你有一个全是边框的盒子，顶部和侧边是不可见的，只剩下底部边框。但是，由于每条边连接形成 45 度角（想想相框上的斜接），而不只是底部的 6px 粗线，你最终得到的是一个箭头，在这种情况下向上指。

原始示例中的其余规则只是定位规则。

# java - 在 Java 上处理 MySQL 查询时处理断电？

> ID：12832284
> 
> 赞同：1
> 
> 时间：2012-10-11T04:36:00.083
> 
> 标签：java, mysql, resume

我正在构建一个使用数据库的 Java 应用程序。我使用 MySQL 作为数据库，使用 JDBC 作为连接。

我的应用程序将处理大量数据，因此需要很长时间，而且我担心计算机会因意外或其他原因断电。有没有办法恢复这个过程，所以它不会从一开始就处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:18:32.987

一般步骤：

1.  购买并使用可让您的系统运行至少 15 分钟的 UPS（不间断电源）。
2.  编写代码，以便可以通过信号中断长时间运行的事务
3.  对 UPS 软件进行编程以在断电时向您的程序发出信号，以便它可以暂停当前工作单元并正常关机
4.  仔细选择事务大小以确保可以在可用的 UPS 时间内完成提交/回滚（感谢 @Fildor 提供的）

# vba - 使用 VBA，如何在 Excel 中的 Word 中编写不同标题级别的文本？

> ID：12832289
> 
> 赞同：2
> 
> 时间：2012-10-11T04:36:28.607
> 
> 标签：vba, excel

使用 VBA 2007，如何从 Excel 创建 Word 文档并编写不同标题（标题 1、标题 2、普通）的文本，以便标题出现在文档映射中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:02:44.680

此示例将从 Excel 运行。它使用早期绑定，因此您需要确保在 VBA 参考（工具->参考）中设置了对 Word 的参考。

将文本放入文档中，Word 可能是一个善变的最佳选择。 *一般*它需要去一个当前选择的点。您可以使用书签和/或域代码将文本放置在文档中的不同位置。

```
Sub MakeWordDocumentWithHeadings()

    Dim wdApp As Word.Application, wdDoc As Word.Document

    'Use on error resume next so VBA doesn't produce an error if it can't find Word Open
    On Error Resume Next
    Set wdApp = GetObject(, "Word.Application")

    'If it is nothing the open a new instance of word
    If wdApp Is Nothing Then Set wdApp = New Word.Application
    'Reset the errors
    On Error GoTo 0

    'Add a new document    
    Set wdDoc = wdApp.Documents.Add

    'Word works by the location of the 'selection'
    wdApp.Selection.Style = ActiveDocument.Styles("Heading 1")
    wdApp.Selection.TypeText Text:="Heading One"
    wdApp.Selection.TypeParagraph
    wdApp.Selection.Style = ActiveDocument.Styles("Heading 2")
    wdApp.Selection.TypeText Text:="Heading Two"
    wdApp.Selection.TypeParagraph
    wdApp.Selection.Style = ActiveDocument.Styles("Heading 3")
    wdApp.Selection.TypeText Text:="Heading Three"
    wdApp.Selection.TypeParagraph

    'Save close or whatever here

    'Always set objects to nothing.  
    Set wdDoc = Nothing
    Set wdApp = Nothing

End Sub 
```

# c++ - 为什么 GetObject 返回带有空 bmBits 的 BITMAP？

> ID：12832292
> 
> 赞同：11
> 
> 时间：2012-10-11T04:36:48.240
> 
> 标签：c++, windows, gdi

上下文：我正在尝试截取另一个窗口的屏幕截图以将其输入 OpenCV。我在网上找到了一些代码，它们应该能够将 BITMAP 转换为 OpenCV 可以使用的东西。不幸的是，我遇到了一些麻烦。

问题：为什么 bmBits 属性/成员总是为空？（我也尝试使用 PrintWindow 而不是 BitBlt 结果是一样的）

```
#include <iostream>
#include <string>
#include <Windows.h>

int main(int argc, char* argv[])
{
    std::wstring windowName = L"Calculator";

    RECT rect;
    HWND hwnd = FindWindow(NULL, windowName.c_str());
    if (hwnd == NULL)
    {
        return 0;
    }
    GetClientRect(hwnd, &rect);

    HDC hdcScreen = GetDC(NULL);
    HDC hdc = CreateCompatibleDC(hdcScreen);
    HBITMAP hbmp = CreateCompatibleBitmap(hdcScreen, 
        rect.right - rect.left, rect.bottom - rect.top);
    SelectObject(hdc, hbmp);

    PrintWindow(hwnd, hdc, PW_CLIENTONLY);

    BITMAP bmp;
    GetObject(hbmp, sizeof(BITMAP), &bmp);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T04:49:58.600

该`bmBits`成员对于 DIB 部分是非空的。对于与设备相关的位图（例如您正在创建的位图），`bmBits`未设置 ，因为像素在视频卡上，而不是在主内存中。

在您的示例中，您需要更改`CreateCompatibleBitmap`为`CreateDIBSection`是否要直接访问这些位。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-10T16:28:19.083

仅供参考。从文件加载位图并希望使用 BITMAP **.bmBits**（对于**glTexImage2D**，**glDrawPixels**）：

```
LoadImage(NULL, "path_to.bmp", IMAGE_BITMAP, 0, 0,
                                       LR_LOADFROMFILE); 
```

你必须指定标志`LR_CREATEDIBSECTION`

```
HBITMAP hBmp = NULL;
BITMAP BMp;
hBmp = (HBITMAP) LoadImage(NULL, "bitmap.bmp", IMAGE_BITMAP, 0, 0,
                                       LR_LOADFROMFILE | LR_CREATEDIBSECTION);
GetObject(hBmp, sizeof(BMp), &BMp);
//BMp.bmBits now points to data 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-19T01:21:22.080

来自MSDN 上的**[GetObject](https://msdn.microsoft.com/en-us/library/dd144904(v=vs.85).aspx)**文档。请注意第二段。

> 如果*hgdiobj*是通过调用**CreateDIBSection**创建的位图的句柄，并且指定的缓冲区足够大，则**GetObject**函数返回一个`DIBSECTION`结构。此外，包含在结构中的*bmBits*成员将包含一个指向位图位值的指针。`BITMAP``DIBSECTION`
> 
> 如果*hgdiobj*是通过任何其他方式创建的位图的句柄，则**GetObject**仅返回位图的宽度、高度和颜色格式信息。**您可以通过调用GetDIBits**或**GetBitmapBits**函数来获取位图的位值。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-12-15T09:03:30.460

您可以做的一件事是查看 GetObject 的返回值。如果为 0，您就知道出了问题。调用的参数有问题。

# c# - SQL Server 和 C# 的输出不同

> ID：12832294
> 
> 赞同：2
> 
> 时间：2012-10-11T04:36:48.927
> 
> 标签：c#, visual-studio-2010, sql-server-2008

我相信我的编码有问题。我猜它不是按日期过滤的。请帮忙

SQL 代码：

```
SELECT
   CONVERT(char(80), i.InvDate,3) AS InvDate,
   i.InvoiceNo,
   i.EmployerCode,
   i.TaxAmount + i.SubTotal AS Amount,
   '' AS Payment,
   pd.GivenName
FROM
   dbo.Invoice i
INNER JOIN 
   dbo.PatientDetails pd ON (pd.MedicalRecordID = i.MedicalRecordID) 
```

C#代码：

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), i.InvDate,3) AS InvDate, 
    i.InvoiceNo,
    i.EmployerCode,
    i.TaxAmount + i.SubTotal AS Amount,
    '' AS Payment,
    pd.GivenName 
FROM
    dbo.Invoice i 
INNER JOIN dbo.PatientDetails pd ON (pd.MedicalRecordID = i.MedicalRecordID) 
WHERE (InvDate >= CONVERT(datetime, '" + dtpFrom.Text + "', 105 )) 
    AND (InvDate <= CONVERT(datetime, '" + dtpTo.Text + "', 105))," , objConn); 
```

这就是我想要实现的目标：

[![在此处输入图像描述](../Images/13a1ed0eded116499cce722a701ae2a4.png)](https://i.stack.imgur.com/S09qI.png)

这就是我得到的：

[![在此处输入图像描述](../Images/6941653f4be8d5378794b5bc1fc81097.png)](https://i.stack.imgur.com/gatv7.png)

在我被踢出这里之前。我会做一些编辑。

编辑：

日期时间为 105 格式 (dd-mm-yyyy)

```
WHERE (InvDate >= CONVERT(datetime, '" + dtpFrom.Text + "', 105 )) 
AND (InvDate <= CONVERT(datetime, '" + dtpTo.Text + "', 105)) 
```

这应该从特定日期中选择。例如：2012 年 10 月 11 日至 2012 年 10 月 15 日。

即使没有 DateTimepicker，输出也不会显示“GivenName”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:58:12.357

最好的方法是将您的输入格式化为 dd/ **MMM** /yyyy 格式。它更好地帮助 SqlServer 识别月份和日期。我强烈建议您在与 SqlServer 通信时使用 MMM 格式。

```
DateTime fromDate, toDate;
fromDate = DateTime.Parse(dtpFrom.Text);
toDate = DateTime.Parse(dtpTo.Text);

SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), i.InvDate,3) AS InvDate, 
i.InvoiceNo,
i.EmployerCode,
i.TaxAmount + i.SubTotal AS Amount,
'' AS Payment,
pd.GivenName 
FROM    dbo.Invoice i 
INNER JOIN dbo.PatientDetails pd ON (pd.MedicalRecordID = i.MedicalRecordID) 
WHERE datediff(d, '" + fromDate.ToString("dd/MMM/yyyy") + "', i.InvDate) >=0  
AND datediff(d, '" + toDate.ToString("dd/MMM/yyyy") + "', i.InvDate) <=0", objConn); 
```

或者如果您有任何如上所述的限制，请使用 CONVERT() 转换输入

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), i.InvDate,3) AS InvDate, 
i.InvoiceNo,
i.EmployerCode,
i.TaxAmount + i.SubTotal AS Amount,
'' AS Payment,
pd.GivenName 
FROM    dbo.Invoice i 
INNER JOIN dbo.PatientDetails pd ON (pd.MedicalRecordID = i.MedicalRecordID) 
WHERE datediff(d, CONVERT(datetime, '" + dtpFrom.Text + "', 105 ), i.InvDate) >=0  
AND datediff(d, CONVERT(datetime, '" + dtpTo.Text + "', 105 ), i.InvDate) <=0", objConn); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T05:39:16.353

问题是由于类型 date 到 char 的转换，过滤可能无法按预期工作。尝试使用 datediff，它可以解决问题。

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), i.InvDate,3) AS InvDate, 
i.InvoiceNo,
i.EmployerCode,
i.TaxAmount + i.SubTotal AS Amount,
'' AS Payment,
pd.GivenName 
FROM    dbo.Invoice i 
INNER JOIN dbo.PatientDetails pd ON (pd.MedicalRecordID = i.MedicalRecordID) 
WHERE datediff(d, '" + dtpFrom.Text + "', i.InvDate) >=0  
AND datediff(d, '" + dtpTo.Text + "', i.InvDate) <=0", objConn); 
```

# facebook - Facebook API：如何标记所有喜欢你页面的人？

> ID：12832297
> 
> 赞同：1
> 
> 时间：2012-10-11T04:37:36.333
> 
> 标签：facebook, facebook-like, photo-tagging

假设我有一个 Facebook `page`，并且该页面有`n`很多人`liked`。现在我想在此页面上上传一张照片并标记该页面的所有人员`liked`。这可能吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:59:03.870

不，有几个原因：

1.  您无法通过 API 检索页面的所有粉丝列表
2.  您只能标记您在照片中使用其访问令牌的当前用户的朋友
3.  在实际未出现的照片中标记人物是违反政策的

# javascript - 通过淘汰赛 js 在我的部分观点中没有任何价值

> ID：12832298
> 
> 赞同：0
> 
> 时间：2012-10-11T04:37:50.030
> 
> 标签：javascript, json, knockout.js, asp.net-mvc-4

```
var baseUri = '@ViewBag.ApiUrl';
var viewmodel = function () {
    var self = this;
    self.VoucherDetails = ko.observableArray([]);
    $.getJSON(baseUri, this.VoucherDetails);
    alert(self.VoucherDetails);
};

<table>
    <tbody data-bind='foreach: VoucherDetails'>
        <tr>
            <td data-bind="text : $data.empcode">
                <span data-bind=" text : $data.empcode"></span> test
            </td>
            <td data-bind=" text : empcode">
                <span data-bind=" text : empcode"></span>
            </td>

        </tr>
    </tbody>
</table> 
```

这是我的部分观点，empcode 没有任何价值，或者`$data.empcode`，我是新手`knockoutjs`。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:44:33.200

您的代码看起来不完整：

*   $.getJson 从不设置 VoucherDetails 的值（不传递回调）。
*   你永远不会调用 ko.applyBindings

它应该是：

```
var baseUri = '@ViewBag.ApiUrl';
var viewmodel = function () {
    var self = this;
    self.VoucherDetails = ko.observableArray([]);
    $.getJSON(baseUri, function(data){
        //create your VoucherDetails here based on the data (push each item to VoucherDetails using $.each
   });  
};

ko.applyBindings(viewModel); 
```

[http://knockoutjs.com/documentation/observableArrays.html](http://knockoutjs.com/documentation/observableArrays.html)

# javascript - clearTimeout 由于某种原因无法正常工作

> ID：12832302
> 
> 赞同：0
> 
> 时间：2012-10-11T04:38:08.163
> 
> 标签：javascript, jquery

我不确定我的代码有什么问题，我已经设置了全局变量，但是清除超时在这里仍然不起作用。

谢谢你，开尔文

```
var myslide = null;
$(document).ready(function () {
    var current = null;

    $('ul#panel li a').click(function () {
        stopAuto();
        $('ul#panel li a').removeClass('active');
        $(this).addClass('active');
        current = $(this).attr('href');
        $('#wrapperSlide').clearQueue();
        $('#wrapperSlide').scrollTo($(current), 800);
        return false;
    });

    if (current==null)
    { 
        $("ul#panel li").each(function(i){
        var counter1 = i+1;
        var timer1 = counter1 * 5000;
        myslide = setTimeout(function(){
        setLoop1(counter1);
        },timer1);
    });
    } else {
        $('#wrapperSlide').clearQueue();
        return false;
    }
}); 
```

这些是循环幻灯片图像和停止自动的功能

```
 function setLoop1(counter)
{     
      var counter4 = counter;
      var myID = $('a#'+counter4).attr('href');
      $('ul#panel li a').removeClass('active');
      $('a#'+counter4).addClass('active');
      $('#wrapperSlide').scrollTo($(myID), 800);
}

//function to stop the auto slide

function stopAuto() {

    clearTimeout(myslide);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:56:55.863

您正在为**每个单独的`<li>`元素**启动这两个计时器：

```
 $("ul#panel li").each(function (i) {
        var counter1 = i + 1;
        var myID = $('a#' + counter1).attr('href');
        setLoop1(counter1, myID);
    }); 
```

但是，该`setLoop1()`函数使用相同的两个变量。每个计时器都与其他计时器**不同**`setTimeout()`，并且每次调用它时from 的返回值都是不同的值。您不能将一堆不同的数字存储在一个简单的变量中。

您应该做的是将计时器存储在每个`<li>`元素的 jQuery“数据”属性中。然后你的“点击”处理程序可以取消超时。或者，也许您不需要为每个列表项设置一对单独的计时器函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:53:43.193

如我所见，这里可能有两种情况，要么**stopAuto()**函数没有被调用，要么如果它被调用，则**stopAuto()**函数在被调用时是未定义的。所以我建议在调用它之前定义**stopAuto()函数并使用一些调试器工具来查看控制台。**

# .net - .NET 将 JSON 反序列化为多种类型

> ID：12832306
> 
> 赞同：28
> 
> 时间：2012-10-11T04:38:27.543
> 
> 标签：.net, json, deserialization

> **可能重复：**
> [将 JSON 反序列化为几个 C# 子类之一](https://stackoverflow.com/questions/11429546/deserializing-json-into-one-of-several-c-sharp-subclasses)

我具有以下 JSON 模式的只读访问权限：

```
{ items: [{ type: "cat", catName: "tom" }, { type: "dog", dogName: "fluffy" }] } 
```

我想将这些反序列化为各自的类型：

```
class Cat : Animal {
    string Name { get; set; }
}
class Dog : Animal {
    string Name { get; set; }
} 
```

在这一点上，我唯一的想法是将它们反序列化为一个`dynamic`对象，或者`Dictionary<string, object>`然后从那里构造这些对象。

我可能会从其中一个 JSON 框架中遗漏一些东西......

你的方法是什么？=]

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-11T07:02:04.463

我认为您可能需要反序列化 Json，然后从那里构造对象。直接反序列化`Cat`或`Dog`不可能，因为反序列化器不知道如何专门构造这些对象。

**编辑**：[使用 JSON.NET 从反序列化异构 JSON 数组到协变 List<> 中大量借用](https://stackoverflow.com/questions/8241392/deserializing-heterogenous-json-array-into-covariant-list-using-json-net)

像这样的东西会起作用：

```
interface IAnimal
{
    string Type { get; set; }
}

class Cat : IAnimal
{
    public string CatName { get; set; }
    public string Type { get; set; }
}

class Dog : IAnimal
{
    public string DogName { get; set; }
    public string Type { get; set; }
}

class AnimalJson
{
    public IEnumerable<IAnimal> Items { get; set; }
}

class Animal
{
    public string Type { get; set; }
    public string Name { get; set; }
}

class AnimalItemConverter : Newtonsoft.Json.Converters.CustomCreationConverter<IAnimal>
{
    public override IAnimal Create(Type objectType)
    {
        throw new NotImplementedException();
    }

    public IAnimal Create(Type objectType, JObject jObject)
    {
        var type = (string)jObject.Property("type");

        switch (type)
        {
            case "cat":
                return new Cat();
            case "dog":
                return new Dog();
        }

        throw new ApplicationException(String.Format("The animal type {0} is not supported!", type));
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        // Load JObject from stream 
        JObject jObject = JObject.Load(reader);

        // Create target object based on JObject 
        var target = Create(objectType, jObject);

        // Populate the object properties 
        serializer.Populate(jObject.CreateReader(), target);

        return target;
    }
}

string json = "{ items: [{ type: \"cat\", catName: \"tom\" }, { type: \"dog\", dogName: \"fluffy\" }] }";
object obj = JsonConvert.DeserializeObject<AnimalJson>(json, new AnimalItemConverter()); 
```

# ruby - 如何建造 25 在 Nokogiri XML Builder 中

> ID：12832314
> 
> 赞同：1
> 
> 时间：2012-10-11T04:39:37.413
> 
> 标签：ruby, xml, nokogiri

我需要一些帮助才能在 xml 中构建这一行。对于谷歌内容 API

我想要得到的结果是`<scp:price unit='USD'>25</scp:price>`

目前我的代码输出这一行`<scp:price unit='USD'>25</scp:price unit='USD'>`是不正确的。

这是我的代码

```
b = Nokogiri::XML::Builder.new do |xml|
      xml.send("scp:price unit='USD'",'25') 
end 
```

非常感谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:02:22.233

您的问题是 Nokogiri 将整个解释`scp:price unit='USD'`为标签名称。如果将标签名称与属​​性分开，您应该会得到更好的结果：

```
xml.send('scp:price', { :unit => 'USD' }, 25) 
```

那应该给你`<scp:price unit="USD">25</scp:price>`你正在寻找的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T05:18:53.027

Mu 是正确的，但实际上应该是这样的：

```
b = Nokogiri::XML::Builder.new do |xml|
  xml.root('xmlns:scp' => 'http://scp.com/') do
    xml['scp'].price '25', :unit => 'USD'
  end
end 
```

# android - 如何像Facebook，路径应用程序一样从右到左滑动菜单

> ID：12832316
> 
> 赞同：0
> 
> 时间：2012-10-11T04:39:50.003
> 
> 标签：android

我在stackoverflow中引用了一些滑动演示，但仍然没有人指导我从右到左滑动演示。请帮助我如何在android中获得这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:41:47.617

一个 Android 库，允许开发人员轻松创建滑入式菜单，如在 Spotify 和 Facebook 应用程序中。只要您引用此项目并将许可证包含在您的应用程序中，就可以在您的 Android 应用程序中随意使用它。

检查这个：[https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

# javascript - history.replaceState() 例子？

> ID：12832317
> 
> 赞同：138
> 
> 时间：2012-10-11T04:39:55.590
> 
> 标签：javascript, ajax, html

任何人都可以举一个history.replaceState的工作示例吗？这就是[w3.org](http://www.w3.org/TR/html5/browsers.html#the-history-interface)所说的：

> `history.replaceState(data, title [, url ] )`
> 
> *更新会话历史记录中的当前条目以具有给定的数据、标题和 URL（如果提供且不为空）。*

* * *

### 更新

这完美地工作：

```
history.replaceState( {} , 'foo', '/foo' ); 
```

URL 正在更改，但标题未更改。这是一个错误还是我错过了什么？在最新的 Chrome 上测试。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-15T09:29:07.763

确实这是一个错误，尽管现在是故意的 2 年。问题在于一些不清楚的规格以及`document.title`涉及到后退/前进时的复杂性。

[请参阅Webkit](https://bugs.webkit.org/show_bug.cgi?id=43730)和[Mozilla](https://bugzilla.mozilla.org/show_bug.cgi?id=585653)上的错误参考。此外，Opera 在介绍 History API[时表示它没有使用 title 参数](http://dev.opera.com/articles/view/introducing-the-html5-history-api/)，并且可能仍然没有。

> 目前，pushState 和 replaceState 的第二个参数——历史条目的标题——没有在 Opera 的实现中使用，但可能有一天。

*潜在的解决方案*

我看到的唯一方法是更改​​标题元素并改用 pushState：

```
document.getElementsByTagName('title')[0].innerHTML = 'bar';
window.history.pushState( {} , 'bar', '/bar' ); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-10-11T04:49:35.417

这是一个最小的，人为的例子。

```
console.log( window.location.href );  // whatever your current location href is
window.history.replaceState( {} , 'foo', '/foo' );
console.log( window.location.href );  // oh, hey, it replaced the path with /foo 
```

还有更多，`replaceState()`但我不知道你想用它做什么。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-16T15:07:48.550

`history.pushState`将*当前*页面状态推送到历史堆栈，并更改地址栏中的 URL。因此，当您返回时，该状态（您传递的对象）将返回给您。

目前，这就是它所做的一切。任何其他页面操作，例如显示新页面或更改页面标题，都必须由您完成。

您链接的 W3C 规范只是一个草稿，浏览器可能会以不同的方式实现它。 例如，[Firefox](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)`title`完全忽略该参数。

`pushState`这是我在我的网站上使用的一个简单示例。

```
(function($){
    // Use AJAX to load the page, and change the title
    function loadPage(sel, p){
        $(sel).load(p + ' #content', function(){
            document.title = $('#pageData').data('title');
        });
    }

    // When a link is clicked, use AJAX to load that page
    // but use pushState to change the URL bar
    $(document).on('click', 'a', function(e){
        e.preventDefault();
        history.pushState({page: this.href}, '', this.href);
        loadPage('#frontPage', this.href);
    });

    // This event is triggered when you visit a page in the history
    // like when yu push the "back" button
    $(window).on('popstate', function(e){
        loadPage('#frontPage', location.pathname);
        console.log(e.originalEvent.state);
    });
}(jQuery)); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-16T09:45:29.140

看例子

```
window.history.replaceState({
    foo: 'bar'
}, 'Nice URL Title', '/nice_url');

window.onpopstate = function (e) {
    if (typeof e.state == "object" && e.state.foo == "bar") {
        alert("Blah blah blah");
    }
};

window.history.go(-1); 
```

和搜索`location.hash`；

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-20T07:10:18.073

第二个参数*标题*并不意味着页面的标题 - 它更多的是该页面状态的定义/信息

但是我们仍然可以使用*onpopstate*事件更改标题，并且不是从第二个参数传递标题名称，而是作为第一个参数的属性作为对象传递

参考： [http ://spoiledmilk.com/blog/html5-chang-the-browser-url-without-refreshing-page/](http://spoiledmilk.com/blog/html5-changing-the-browser-url-without-refreshing-page/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-12T06:22:58.693

根据[MDN History doc](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history)
有明确的说法，第二个参数是用于未来而不是现在。没错，第二个参数是处理网页标题，但目前所有主要浏览器都忽略了它。

Firefox 当前忽略此参数，尽管它可能在未来使用它。在此处传递空字符串应该可以安全地防止将来对该方法进行更改。或者，您可以为您要迁移到的州传递一个简短的标题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-15T18:23:54.740

I really wanted to respond to @Sev's answer.

Sev is right, there is a bug inside the `window.history.replaceState`

> To fix this simply rewrite the constructor to set the title manually.

```
var replaceState_tmp = window.history.replaceState.constructor;
window.history.replaceState.constructor = function(obj, title, url){
    var title_ = document.getElementsByTagName('title')[0];
    if(title_ != undefined){
        title_.innerHTML = title;
    }else{
        var title__ = document.createElement('title');
        title__.innerHTML = title;
        var head_ = document.getElementsByTagName('head')[0];
        if(head_ != undefined){
            head_.appendChild(title__);
        }else{
            var head__ = document.createElement('head');
            document.documentElement.appendChild(head__);
            head__.appendChild(title__);
        }
    }
    replaceState_tmp(obj,title, url);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-17T09:23:19.760

将此视为 URL：`http://localhost:4200/inspections/report-details/60c88e4e76b14c00193f5bef`

```
let reportId = '60c88e4e76b14c00193f5bef', scope = "dynamic"

window.history.replaceState(null, null, `inspections/report-details/${reportId}?damagePart=` + scope ); 
```

这将产生输出 `http://localhost:4200/inspections/report-details/60c88e4e76b14c00193f5bef?damagePart=dynamic/`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-22T12:53:53.897

假设[https://www.mozilla.org/foo.html](https://www.mozilla.org/foo.html)执行以下 JavaScript：

```
const stateObj = { foo: 'bar' };

history.pushState(stateObj, '', 'bar.html'); 
```

这将导致 URL 栏显示[https://www.mozilla.org/bar2.html](https://www.mozilla.org/bar2.html)，但不会导致浏览器加载 bar2.html 甚至检查 bar2.html 是否存在。

# perl - 为什么我的 unpack 打印错误的值？

> ID：12832318
> 
> 赞同：4
> 
> 时间：2012-10-11T04:40:01.500
> 
> 标签：perl

为什么我会得到错误的答案/值？

它应该打印的正确值是，`1, 2175, 4`但我总是得到`1, 3, 0`？！

```
my $data = pack ('C*', map hex, split /\s+/, "01 00 00 00 7F 08 03 00 21 04 80 04 FF D7 FB 0C EC 01 44 00 61 1D 00 00 10 3B 00 00 FF D7 FB 0C 00 00 8C 64 00 00 EC 45");

($obj->{Version}, $obj->{res1}, $obj->{EARFCN}, $tmp1, $obj->{res2}, $tmp2)=unpack("C C3 v C C V", $data);

$obj->{band} = ($tmp1 & 0xfc) >> 2;
print "\n".$obj->{Version};    # Should print 1
print "\n".$obj->{EARFCN};   # Should print 2175
print "\n".$obj->{band};      # Should print 4\. Note: this is the first 6 bits from MSB of $tmp1.
print "\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:07:13.750

调试输出：

```
 DB<1> $data = pack ('C*', map hex, split /\s+/, "01 00 00 00 7F 08 03 00 21 04 80 04 FF D7 FB 0C EC 01 44 00 61 1D 00 00 10 3B 00 00 FF D7 FB 0C 00 00 8C 64 00 00 EC 45")

  DB<2> x unpack("C C3 v C C V", $data)
0  1
1  0
2  0
3  0
4  2175
5  3
6  0
7  75498529 
```

Pattern`C3`输出三个无符号字节，而不是长度为 3 的字符串。

我想你想要`a3`。请参阅[Perldoc 包（）](http://perldoc.perl.org/functions/pack.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:22:44.993

我犯了两个错误。

我应该使用说明`a3`符而不是使用`C3`. 所以，它应该说：

`unpack("C a3 v C C V", $data);`

并且

`$obj->{band} = ($tmp1 & 0xfc) >> 2;`确实是 0。而不是 4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T06:29:45.400

24 位字没有模式。（机器没有这种类型。）您可以使用以下任一片段。

您希望`band`成为 16 位字（`y`in `yyyy yyxx xxxx xxxx`）的最高有效 6 位。为此，使用`$_ >> 10`.

```
(
   $obj->{Version},
   my $tmp0,
   $obj->{EARFCN},
   my $tmp1,
   $obj->{res2},
   my $tmp2
) = unpack("C a3 v C C V", $data);

$obj->{res1} = unpack("V", $tmp0."\x00");
$obj->{band} = $tmp1 >> 10; 
```

或者

```
(
   my $tmp0,
   $obj->{EARFCN},
   my $tmp1,
   $obj->{res2},
   my $tmp2
) = unpack("V v C C V", $data);

$obj->{Version} = $tmp0 & 0xFF;
$obj->{res1}    = $tmp0 >> 8;
$obj->{band}    = $tmp1 >> 10; 
```

# node.js - 找不到模块“passport-local”错误

> ID：12832319
> 
> 赞同：11
> 
> 时间：2012-10-11T04:40:27.967
> 
> 标签：node.js, module, passport.js

我在 node.js 中使用护照

在我的 app.js

```
var passport = require('passport')

require('./config/passport').boot(passport, config) 
```

在护照.js

```
var LocalStrategy = require('passport-local').Strategy 
```

运行应用程序，我收到此错误消息

```
module.js:340
    throw err;

error:Cannot find module 'passport-local'
      at Object.<anonymous> <F:\work\config\passport.js:2:21> 
```

我将护照安装在 F:\work\node_modules 中。

即使我把

```
 var LocalStrategy = require('passport-local').Strategy 
```

就在下面

```
 var passport = require('passport') 
```

我仍然得到同样的错误

知道为什么吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-11T04:51:34.893

您是否安装了护照本地模块？

`npm install passport-local`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-22T08:28:20.003

我有同样的问题，我解决了它：

检查你的`package.json`文件。如果它不存在，您需要在您编写主 JS 文件的同一文件夹中初始化您的项目（`server.js`或`index.js`任何您想要的）。

```
$ sudo npm init 
```

并且在安装 npm 模块时，请记住将它们保存在包文件中：

```
$ sudo npm install passport-local --save 
```

我是这样解决的。

# c# - 将 xml 根节点读入数据网格并将编辑内容写回 xml 文件

> ID：12832321
> 
> 赞同：0
> 
> 时间：2012-10-11T04:40:29.280
> 
> 标签：c#, xml

```
 this.dataGrid1 = new System.Windows.Forms.DataGrid();
        this.dataGrid1.DataMember = textBox1.Text.ToString();
        this.dataGrid1.Location = new System.Drawing.Point(36, 46);
        this.dataGrid1.Name = "dataGrid1";
        this.dataGrid1.Size = new System.Drawing.Size(364, 532);
        this.dataGrid1.TabIndex = 0;
        // 
        this.AutoScaleBaseSize = new System.Drawing.Size(50, 13);
        this.ClientSize = new System.Drawing.Size(592, 573);
        this.Controls.AddRange(new System.Windows.Forms.Control[] { this.dataGrid1 });
        ((System.ComponentModel.ISupportInitialize)(this.dataGrid1)).EndInit();
        this.ResumeLayout(false);

        XmlDataDocument xmlDatadoc = new XmlDataDocument();
        xmlDatadoc.DataSet.ReadXml("abcd.xml");

        DataSet ds = new DataSet("abc");
        ds = xmlDatadoc.DataSet;

        dataGrid1.DataSource = ds.DefaultViewManager; 
```

它显示了层次结构，但没有正确区分子节点和父节点。我只想查看应该是其子节点链接的根节点。此外，我希望数据网格能够编辑 xml文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-09T10:15:47.310

要将任何编辑写回 xml 文件，请使用以下命令：

```
DataSet ds= ((DataTable)datagrid1.dataSource).DataSet; 
//this statement populates the dataset.
//which is reflected in xml file as-- 
ds.WriteXml(s, XmlWriteMode.IgnoreSchema); 
ds.AcceptChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:44:09.037

阅读 DataSet 中的 Xml 后，为什么不将 DataTable 而不是整个 DataSet 设置为 Grid 的 DataSource ？

```
 XmlDataDocument xmlDatadoc = new XmlDataDocument();
    xmlDatadoc.DataSet.ReadXml("abcd.xml");

    DataSet ds = new DataSet("abc");
    ds = xmlDatadoc.DataSet;

    dataGrid1.DataSource = ds.Tables[0]; 
```

使用适当的根表调整表索引。

# drupal-7 - 在内容创建期间将值从 CCK 节点引用字段传递到视图

> ID：12832332
> 
> 赞同：4
> 
> 时间：2012-10-11T04:41:39.283
> 
> 标签：drupal-7, drupal-views, nodereference

我有一个内容类型 EVENT，它有 2 个节点引用字段 - 品牌和商店。一个品牌可以有多个商店，并通过节点引用字段链接，即。STORES 内容类型有一个字段 BRANDS，它是一个节点引用字段。

创建事件时理想情况下，我希望 BRAND 字段是自动完成的，而 STORES 字段是选择列表。这样，当我选择品牌时，商店列表将只显示该品牌的商店。然后，用户可以更轻松地检查将要举办活动的商店

*   目前的情景

当我创建一个事件时，品牌字段会加载所有品牌。即使选择了品牌，STORES 字段也会加载所有商店。

*   我需要做什么

当我创建一个事件并选择品牌时，我只想在商店选择中加载该品牌的商店。

执行此操作的理想方法是使用视图来根据所选品牌限制商店的值。但是我们如何将选定的 BRAND 传递给视图？

它不能从节点传递，因为节点尚未创建，我们无法从 URL 中获取节点 ID。

使用 Drupal 7 中的视图来实现这一点的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:12:23.427

似乎您需要尝试[条件字段](http://drupal.org/project/conditional_fields)模块。因此，您可以定义显示哪些字段、隐藏哪些字段，而不是视图。

# java - 在哈希图中随机生成选择性键

> ID：12832333
> 
> 赞同：0
> 
> 时间：2012-10-11T04:41:41.110
> 
> 标签：java, collections

> **可能重复：**
> [有没有办法在 Java 中随机获取 HashMap 的值？](https://stackoverflow.com/questions/929554/is-there-a-way-to-get-the-value-of-a-hashmap-randomly-in-java)

我想生成随机键并在 Hashmap 中显示它们的关联值，但不是所有键。例如，如果有 40 个键值对，我只想随机显示 10 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:51:57.897

```
List keys = new ArrayList(theHashMap.keySet());
Collections.shuffle(keys);
for (int i = 0; i < Math.min(keys.size(), 10); ++i) {
  map.get(keys[i]);
} 
```

# mysql - Perl DBI MySQL 更新

> ID：12832335
> 
> 赞同：0
> 
> 时间：2012-10-11T04:42:00.877
> 
> 标签：mysql, perl, dbi

我想知道如何打印以下 Perl 代码片段的结果：

```
 $sth = $dbh->prepare("SELECT * FROM table_name");
    $sth->execute(); 
```

我想看看如果您在 mySQL 中输入“SELECT * FROM table_name;”并显示整个关系，您会看到什么。是否有来自 $sth 的返回值可以循环并打印出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:46:14.590

```
# BIND TABLE COLUMNS TO VARIABLES
$sth->bind_columns(undef, \$id, \$product, \$quantity);

# LOOP THROUGH RESULTS
while($sth->fetch()) {
   print "$id, $product, $quantity <br />";
} 
```

# c# - 下拉列表未选择值 asp.net

> ID：12832344
> 
> 赞同：1
> 
> 时间：2012-10-11T04:43:12.183
> 
> 标签：c#, asp.net, c#-4.0, drop-down-menu

```
 ddlBanAcc.Items.Insert(0, new ListItem("", ""));
  string s = ddlBanAcc.SelectedValue;
  string[] words = s.Split('|');
  if (ddlBanAcc.SelectedIndex > 1)
  {
    query += "'and DtaLineAccountToDebit='" + words[0] + "'";
  } 
```

在 ddlBankAcc （下拉列表选择）上，我正在填充更新面板中的 Datagrid

但是代码未执行，并且此语句未选择任何值`ddlBanAcc.SelectedValue;`

编辑：HTML代码

```
<td align="left" valign="top">
                            &nbsp;</td>
                 <td>
                            Bank Account:
                        </td>
                        <td>
 <asp:DropDownList runat="server" ID="ddlBanAcc" Width="160px" TaEvalex="3">
    </asp:DropDownList>

                        </td> 
```

编辑：我如何在 ddlBanAcc 中添加数据

```
DataTable dtbankaccount = oDBAccess.getDataTable("SELECT BkiAccountNb + ' | ' + BkiCurrency+ ' | ' +BkiAccountNb AS CONCATE  From VwCieBankAcc");
    ddlBanAcc.DataTextField = "CONCATE";
    ddlBanAcc.DataSource = dtbankaccount;

    ddlBanAcc.DataBind(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T05:44:00.883

你需要检查IsPostBack，如果是不做DataBind，因为这会让DropDownList重新获取他所有的值，而丢失了选择。

```
if(!IsPostBack)
    ddlBanAcc.DataBind(); 
```

特别是在 DropDownList 上，将他的值保留在 ViewState 上，您需要使用 IsPostBack 来填写完整的过程。最终代码将是：

```
if(!IsPostBack)
{
    DataTable dtbankaccount = oDBAccess.getDataTable("SELECT BkiAccountNb + ' | ' + BkiCurrency+ ' | ' +BkiAccountNb AS CONCATE  From VwCieBankAcc");
    ddlBanAcc.DataTextField = "CONCATE";
    ddlBanAcc.DataSource = dtbankaccount;

    ddlBanAcc.DataBind();
} 
```

如果出于任何其他原因您需要进行 DataBind 并更改 DropDownList 的内容，即使在他选择之后您也可以始终使用以下`Request.Form`方式获取回发值：

```
Request.Form[DromDownListID.UniqueID] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T04:50:30.610

```
 <asp:DropDownList ID="ddlBanAcc" runat="server" DataTextField="" DataValueField="">
    </asp:DropDownList> 
```

尝试在后端定义 DataTextField 和 DataValueField。这应该会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T04:52:55.000

您需要添加`AutoPostBack="true"`到您`DropDownList`的才能将其发回。我想这就是代码没有执行的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T03:54:09.560

还有一个更令人惊讶的问题可能导致此问题！我的列表值来自数据库，这些值有换行符和回车符：“\r\n”。这些值看起来像一个无辜的空间，但实际上它们不是！我的解决方案是删除这些隐藏的 Char 值。希望能帮助到你。

# objective-c - 除非与 NSRunLoop 一起使用，否则 dispatch_group_wait 不能按预期运行？

> ID：12832348
> 
> 赞同：3
> 
> 时间：2012-10-11T04:43:31.627
> 
> 标签：objective-c, grand-central-dispatch

我试图弄清楚 NSRunLoop 有什么特殊属性会导致以下行为。

首先，我要做的是等待 CLGeocoder 完成执行，然后再继续。如果我使用完成块，代码将如下所示：

```
if (/* loc has valid coordinates */)
    [gc reverseGeocodeLocation:loc completionHandler:^(NSArray *placemarks, NSError error){
        //do things
        [gc reverseGeocodeLocation:newloc completionHandler:^(NSArray *placemarks, NSError error){
            //do more things with newloc
            // MOVE TO NEXT VIEW
        }
     }
else if (/*still have to check for newloc*/)
    [gc reverseGeocodeLocation:loc completionHandler:^(NSArray *placemarks, NSError error){
        //do things
        //MOVE TO NEXT VIEW 
```

不幸的`//do things`是，这些块的部分是冗长的，如果我将 CLGeocoder 嵌套在它自己的函数中，并且在我调用它两次后移动到下一个视图，它会更清晰。

由于这里的答案，我找到了一种强制等待的方法：[Waiting for CLGeocoder to finish on concurrent enumeration](https://stackoverflow.com/questions/9473577/waiting-for-clgeocoder-to-finish-on-concurrent-enumeration)

所以新方法有效，但我不知道为什么有效。这是代码：

```
dispatch_group_t group = dispatch_group_create();
dispatch_group_enter(group);

[gc reverseGeocodeLocation:loc completionHandler:^(NSArray *placemarks, NSError *error){
    //do things
    dispatch_group_leave(group);
}

//this is the confusing part!
while(dispatch_group_wait(group,DISPATCH_TIME_NOW)){
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                             beforeDate:[NSDate dateWithTimeIntervalSinceNow:1.0f]];
}
dispatch_release(group); 
```

奇怪的是，如果我在没有 while 循环的情况下执行以下操作，应用程序会挂起：

```
dispatch_group_wait(group,DISPATCH_TIME_FOREVER); 
```

鉴于我到目前为止所阅读的所有内容，这应该有效，对吧？

* * *

更令人困惑的是，NSRunLoop 是 while 循环中的必需品。如果我完全删除它，留下一个空的 while 循环，循环将无休止地重复。像这样：

```
//this is the confusing part!
while(dispatch_group_wait(group,DISPATCH_TIME_NOW)){
    //without NSRunLoop, this just goes on forever
} 
```

**NSRunLoop 在做什么以使 while 循环成功结束？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:50:34.113

`CLGeocoder`文档说它在主线程上运行完成处理程序块。`while(dispatch_group_wait(...))`我推断您正在主线程上运行您的等待或循环。如果您正在阻塞主线程，则主线程无法运行完成块。

通过调用`runMode:beforeDate:`你的 while 循环，你给了运行循环一个运行完成块的机会。

你在做什么是坏的。你不应该阻塞主线程，你应该尽量避免递归地运行一个运行循环（因为，正如你所发现的，它是令人困惑的）。让你提供一个完成块的原因`CLGeocoder`是你可以设置它然后返回到主运行循环。稍后，当`CLGeocoder`运行您的完成块时，您可以以任何您需要的方式使用结果。

# ruby - 在 Windows 中自动编译 sass

> ID：12832350
> 
> 赞同：1
> 
> 时间：2012-10-11T04:43:41.433
> 
> 标签：ruby, windows, automation, sass

因此，尽可能简单地说，我想将 SASS 合并到我正在开发的网站中（互联网似乎表明 SASS 是最好的预处理器候选者）但我是那种总是稍微调整 CSS 的开发人员因为我同时开发后端和前端。我现在买不起 Mac 或构建 linux 机器，处理 VMWare 有点糟糕。那么有没有人建议如何在 Windows 环境中创建一个自动化进程，当我保存 SASS .scss 文件时，它会由 ruby​​ sass 自动处理，并且生成 css 文件并将其放入正确的项目文件夹中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T07:34:35.337

您可以使用[Windows 版 Prepros 应用程序](http://alphapixels.com/prepros)。它可以编译less、sass、scss、stylus、jade、haml，还可以实时刷新浏览器。

顺便说一句，它是免费和开源的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:56:47.437

你试过像[Scout](http://www.impressivewebs.com/sass-on-windows-with-scout-app/)这样的工具吗？

# java - 邮件发送代码中的 SSLHandshakeException

> ID：12832354
> 
> 赞同：0
> 
> 时间：2012-10-11T04:44:14.887
> 
> 标签：java, security, email, sslhandshakeexception

我正在开发用于将电子邮件从我的域发送到 gmail.com 的代码

我得到一个`SSLHandshakeException`（见下文）。
这个怎么解决？？

```
Exception in thread "main" javax.mail.MessagingException: Could not convert socket to TLS;
  nested exception is:
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: 
    PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: 
    unable to find valid certification path to requested target 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-11T04:49:44.527

您没有使用 SSL，而是尝试以普通身份验证发送邮件，而您需要经过 SSL 身份验证的访问。

# php - Drupal 6 - 在没有重定向的情况下加载其他内容

> ID：12832357
> 
> 赞同：0
> 
> 时间：2012-10-11T04:44:37.407
> 
> 标签：php, drupal, drupal-6

我创建了一个包含`hook_submit`函数的自定义模块。此时是否可以加载另一个页面/表单而无需进行重定向？

原因在提交函数的逻辑范围内，有一些变量我想传递到另一个页面，但它由不适合发布/获取数据的复杂数据结构（对象、数组等）组成。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T05:54:28.693

hook_submit() 是表单处理链的末端。完成任务后，您有两个选择：重定向（通过 drupal_goto() 或返回 $form["#redirect']）到另一个页面或什么都不做，在这种情况下，您单击提交按钮的页面将是重新加载。

您有几个选项可以将数据传递到重定向目标 $_SESSION 和最常用的数据库。您还可以选择在 javascript 中的 Drupal.settings 对象中设置复杂的数据值，但在这种情况下，如果您的最终目标是通过 PHP 解析该信息，那么这对您来说并不重要。

如果没有关于您的最终目标的具体信息，很难提供具体建议，但是假设使用 $_SESSION 或数据库作为缓存不是您的选择，您可以考虑查看核心 FAPI 和 ctools 各自的 multi 实现- 部分表格以获得额外指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:51:17.680

在 Drupal 中，您可以确定提交表单的路径。为此，您可以使用

```
$form['#action'] = url("<another page>") ; 
```

在您的表单中，提交后它将带您到另一个页面，您仍然会从该表单中获取所有帖子值。用于`$_POST['<element_name>']`进一步的后值检索。

希望这会有所帮助。

# ruby-on-rails - Rails 设计登录和注册重定向

> ID：12832359
> 
> 赞同：0
> 
> 时间：2012-10-11T04:44:56.197
> 
> 标签：ruby-on-rails, devise, controller, routes

我试图让承包商在我当地工作时做出一些改变，但我似乎无法克服这个错误，主要是因为我对这是如何工作的理解并不严密，因此雇用了承包商。

无论如何，我要求他在注册和登录时将用户重定向到他们的个人资料页面（我正在使用设计），我得到了这两个错误

登录并注册-

```
undefined method `profile_path' for #<Devise::SessionsController:0x007fa992493f48> 
```

应用程序控制器-

```
class ApplicationController < ActionController::Base

  protect_from_forgery

  protected

  def after_sign_in_path_for(resource)
    profile_path(id: resource.profile_name)
  end
end 
```

我的路线-

```
Goldengoal::Application.routes.draw do
  # get "profiles/show", :as => 'profile'
  devise_for :users

  devise_scope :user do #this is how you seperate between player and parent what they can see
    get 'register', to: "devise/registrations#new", as: :register
    get 'login',    to: "devise/sessions#new", as: :login
    get 'logout',   to: "devise/sessions#destroy", as: :logout
  end

  root :to => 'front#index'

  resources :users, path: '', controller: 'profiles', only: [:show] do
    resources :players
    resources :logistics
    resources :notes
  end 
```

我在这里想念什么？从 Github 获取最新更改可能是个问题吗？他说他的机器上一切正常。我在这里迷路了。

提前感谢您查看此内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:20:51.513

我运行了 rake 路由，并在方法控制器中将其更改为

```
def after_sign_in_path_for(resource)
    profile_path(id: resource.profile_name)
end 
```

至：

```
def after_sign_in_path_for(resource)
    user_path(id: resource.profile_name)
end 
```

一切似乎在浏览器中运行良好。任何人都可以评论这确实是正确的解决方案，而承包商只是未能改变这一点吗？

# ruby-on-rails-2 - 如何在特定时间（如 2 秒）后杀死 ruby on rails 中的进程？

> ID：12832363
> 
> 赞同：2
> 
> 时间：2012-10-11T04:45:33.167
> 
> 标签：ruby-on-rails-2

我想要做的是......我已经使用 PAPERCLIP 将文件上传到服务器。为此，我使用了一些 shell 脚本。现在我希望当用户浏览文件并单击上传按钮时，我想从那一刻开始记录时间。如果进程仍在进行并且指定的时间（假设 5 秒）到期，我想终止该进程。现在请告诉我如何实现它？

我正在使用 Process.pid。但如果我使用 2 个客户端窗口访问该网站。两个窗口 r 都显示相同的进程 ID。

任何人都可以告诉我如何在特定时间（如 2 秒）后杀死 ruby​​ on rails 中的进程吗？在 Rails 中，不同的用户可以从他们的浏览器访问网站。所以我想为每个用户创建单独的进程 ID，一旦指定的时间到期就想杀死它。我认为可以用秒表来指定时间。对于独立的进程 ID，我可以使用线程概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:51:13.430

```
 Each Passenger instance is a separate process and it has it's own PID. Killing processes from Ruby is really easy. We do this by executing following command:

    1
    Process.kill(signal, pid)
    We will use this method and try to kill Passenger processes gracefully (gracefully means that Passenger process will complete any request that it is performing right now and will shutdown). If this fails, we will send a TERM signal and kill it instantaneously.

    SIGUSR1 signal - shutdown gracefully
    TERM signal - kill it instantaneously
----------------
For more details :
http://dev.mensfeld.pl/2012/08/simple-rubyrails-passenger-memory-consumption-limit-monitoring/ 
```

# iphone - uiview 作为包含 uitableview 的子视图

> ID：12832366
> 
> 赞同：-1
> 
> 时间：2012-10-11T04:45:34.950
> 
> 标签：iphone, uitableview, uiview

我在视图中有一个按钮，当单击该按钮时会出现一个子视图。子视图包含一个表格视图。当单击表格视图单元格时，内容视图内的文本视图被启用。所以我无法选择表格行..无子视图上发生的操作..如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:59:42.213

继承 UITextView 并覆盖 canBecomeFirstResponder：

```
- (BOOL)canBecomeFirstResponder {
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:05:30.167

将委托和数据源提供给您`UITableview`并设置为像下面这样的超级视图..

```
 [self.view bringSubviewToFront:yourTableview]; 
```

可能这个答案对你有帮助......

:)

# mysql - MySQL 无法使用 HAVING 进行排序

> ID：12832372
> 
> 赞同：6
> 
> 时间：2012-10-11T04:46:47.570
> 
> 标签：mysql, sql, database

任何人都可以告诉我我在 mysql 中排序结果时遇到的问题吗

**问题**

不能按距离以外的任何列排序

```
SELECT * , (
            (
            (
            ACOS( SIN( (
            '56.3168322' * PI( ) /180 ) ) * SIN( (
            `lat` * PI( ) /180 )
            ) + COS( (
            '56.3168322' * PI( ) /180 )
            ) * COS( (
            `lat` * PI( ) /180 )
            ) * COS( (
            (
            '-5.414989099999957' -  `lng`
            ) * PI( ) /180 )
            )
            )
            ) *180 / PI( )
            ) *60 * 1.1515 * 1.609344
            ) AS  `distance` 
            FROM  `incidents` 
            HAVING  `distance` <=3
            ORDER BY  `distance` ASC 
            LIMIT 0 , 30 
```

例如，当我尝试根据 date_incident 行中的日期对列进行排序时

```
 SELECT * , (
                (
                (
                ACOS( SIN( (
                '56.3168322' * PI( ) /180 ) ) * SIN( (
                `lat` * PI( ) /180 )
                ) + COS( (
                '56.3168322' * PI( ) /180 )
                ) * COS( (
                `lat` * PI( ) /180 )
                ) * COS( (
                (
                '-5.414989099999957' -  `lng`
                ) * PI( ) /180 )
                )
                )
                ) *180 / PI( )
                ) *60 * 1.1515 * 1.609344
                ) AS  `distance` 
                FROM  `incidents` 
                HAVING  `distance` <=3
                ORDER BY  `date_incidents` ASC 
                LIMIT 0 , 30 
```

在上面它不排序但仍然返回结果。

任何帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:24:00.243

标准 SQL 不允许`HAVING`子句命名子句中未找到的任何列，`GROUP BY`除非它包含在 .`aggregate function`但 MySQL 允许在`HAVING`子句中引用任何别名。前任：

```
SELECT name, AVG(age) AS a FROM tables
   GROUP BY name
   HAVING a > 50; 
```

# c++ - 来自向量大小错误的无符号整数数组

> ID：12832374
> 
> 赞同：-1
> 
> 时间：2012-10-11T04:47:03.447
> 
> 标签：c++, vector, int, unsigned

我正在使用 C++ Builder，并且在将 const int 变量设置为向量的大小方面得到了一些帮助。

这是我的有效代码，只是为了向您展示什么有效：

```
vector<appointment> appointmentVector = calCalendar.getAllAppointments();

const int sizeOfArray = 5;
unsigned int arr[sizeOfArray]; 
```

如果我将代码修改为以下内容：

```
vector<appointment> appointmentVector = calCalendar.getAllAppointments();

const int sizeOfArray = appointmentVector.size();
unsigned int arr[sizeOfArray]; 
```

我收到以下错误：

> [BCC32 错误] Assessment2.cpp(357): E2313 需要常量表达式

我可以帮忙吗？

**更新**

我在问这个问题时遇到以下代码问题：

```
unsigned int arr[2] = {1,8};
unsigned int days;
TMonthCalendar->BoldDays(arr, 1, days);
MonthBoldInfo = days; 
```

BoldDays 方法需要一个无符号整数数组，但我只知道运行时的值。你能告诉我如何找到解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:52:56.923

静态数组需要编译时常量，因此第二个代码永远不会编译，因为数组的大小在编译时是未知的。如果将 arr 声明为向量或动态数组会更好。

这是基本的 C++ 问题，建议您阅读 C++ 初学者书籍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:55:06.933

您的代码的问题是您将非常量表达式结果值（在**运行时**评估的值）分配给 const 变量，其值需要是从常量表达式（在**编译时**评估的值）或文字生成的值.

要解决此问题，您不应使用`const`in `sizeOfArray`：

```
int sizeOfArray = appointmentVector.size(); 
```

此外，一旦您解决了上述问题，您应该创建一个**动态分配的数组**：

```
unsigned int* arr = new unsigned int[sizeOfArray]; 
```

动态分配的数组允许您创建元素数量可以来自运行时值的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:56:16.663

常量表达式是编译器可以计算出值的表达式。在 C++ 中，数组的大小是其类型的一部分，并且必须作为常量表达式给出。如果编译器不能确定一个表达式有什么值，你就不能用它作为数组类型的大小。您可以做的是在堆上分配一个“数组”并使用指向其第一个元素的指针，就像您通常使用数组名称一样。

# ios5 - 带有半透明背景的 iOS 菜单弹出窗口

> ID：12832375
> 
> 赞同：0
> 
> 时间：2012-10-11T04:47:03.993
> 
> 标签：ios5

我有一个条形按钮项目，用户单击它，并且 UIViewController 从底部滑动，上面有一些按钮。但是，我注意到在 Safari 等许多其他应用程序中，它们的底部（在 iPhone 上）有一个带有箭头的图标，当您单击它时，它具有用于共享页面的图标。背景具有抛光的半透明效果，以及 3D 外观和感觉。我注意到甚至 Instagram 和其他一些应用程序都有这个。框架中有没有通用的方法来实现这一点？或者这仅仅是一个背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:37:51.513

我一直在寻找这个：

[iOS 中的上滑菜单](https://stackoverflow.com/questions/5835512/slide-up-menu-in-ios)

它被称为`UIActionSheet`. 不幸的是，我花了很多时间才弄清楚它是什么。

# android - 无法在客户端打开文件，在 Android 中尝试服务器端错误

> ID：12832379
> 
> 赞同：11
> 
> 时间：2012-10-11T04:47:41.203
> 
> 标签：android, android-videoview

我试图通过我的 android 程序通过其 URL 播放 youtube 视频。我用过 setVideoURI(uri); 功能还可以设置 URI，正如 stackoverflow 中的其他 POST 所建议的那样。但我得到**无法在客户端打开文件，尝试服务器端**错误。你能弄清楚我的代码有什么问题吗？

但我可以通过注释代码播放任何本地视频。

这是我的android代码-

```
public class VideoActivity extends Activity {

    //MediaPlayer song= new MediaPlayer();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video);

        VideoView videoView = (VideoView)this.findViewById(R.id.VVSimpleVideo);
        MediaController mc = new MediaController(this);
        mc.setAnchorView(videoView);
        mc.setMediaPlayer(videoView);
        videoView.setMediaController(mc);
        //String _path = "mnt/sdcard/Movies/MyCameraApp/video6.mp4";
        String _path = "http://www.youtube.com/watch?v=E43mgXNl0xc";
        Uri uri=Uri.parse(_path);
        videoView.setVideoURI(uri);
       //videoView.setVideoPath(_path);

        videoView.requestFocus();
        videoView.start();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_video, menu);
        return true;
    }
} 
```

这是日志错误-

```
 10-11 04:51:23.480: D/MediaPlayer(4714): Couldn't open file on client side, trying server side
10-11 04:51:26.130: E/MediaPlayer(4714): error (1, -2147483648)
10-11 04:51:26.130: E/MediaPlayer(4714): Error (1,-2147483648)
10-11 04:51:26.130: D/VideoView(4714): Error: 1,-2147483648
10-11 04:51:26.190: D/dalvikvm(4714): GC_CONCURRENT freed 174K, 4% free 6785K/7047K, paused 4ms+3ms 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:03:24.233

一旦你得到 You tube url...，从 Url 中对 Video_ID 进行子串化。请参阅下面我给出的示例。

获得 rtsp 链接后，您可以在 VideoView 中播放视频[这是示例](http://android-coding.blogspot.in/2011/03/simple-example-using-videoview-to-play.html)。

例如：如果此链接是视频[http://www.youtube.com/watch?v=E43mgXNl0xc](http://www.youtube.com/watch?v=E43mgXNl0xc)

然后`E43mgXNl0xc` 是 Video_ID。

使用此视频 ID 在 vi​​deoview 中播放视频。

参考这两个链接：

[链接 1](https://stackoverflow.com/questions/8716146/rtsp-youtube-link)

[链接 2](https://stackoverflow.com/questions/6520313/how-to-get-rtsp-links-android)

获得 rtsp 链接后，您可以在 VideoView 中播放它。

[还要在这里](https://stackoverflow.com/questions/6937615/how-to-play-youtube-video-on-videoview/11185129#11185129)查看我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:02:04.540

在 Android 设备上，您可以使用`Intent`Youtube 视频：

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=E43mgXNl0xc"));
startActivity(browserIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T11:12:07.197

我有同样的问题没有一个答案对我有用，**问题是视频格式不正确**这个视频对我有用

```
String vidAddress = "http://www.html5videoplayer.net/videos/toystory.mp4"; 
```

# restlet - ResourceClient 在连接到 Restlet 服务器时挂在 SunOS 上的 LockSupport.park() 上

> ID：12832381
> 
> 赞同：1
> 
> 时间：2012-10-11T04:47:50.433
> 
> 标签：restlet, restlet-2.0

我有一个非常简单的 Restlet 服务器，我正在使用一个非常简单的 Restlet 客户端进行测试，所有这些都使用带有以下扩展的 Restlet-2.1.0：xstream-1.4、jettison-1.3。

在我的 Mac 上一切正常，但是当尝试在 SunOS 5.10 上运行它时，客户端在连接到服务器时挂起。从浏览器或 telnet 访问服务器时，我可以得到响应，并且在连接到Restlet 服务器以外的任何*其他*资源时，同样的客户端也可以正常工作。

查看线程转储，我看到了这一点：

```
"main" prio=3 tid=0x08070800 nid=0x2 waiting on condition [0xfe0eb000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0xbbe827e8> (a java.util.concurrent.CountDownLatch$Sync)
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:969)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1281)
        at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:207)
        at org.restlet.engine.connector.ClientConnectionHelper.handle(ClientConnectionHelper.java:517)
        at org.restlet.Client.handle(Client.java:180)
        at org.restlet.Restlet.handle(Restlet.java:284)
        at com.redprairie.task.common.TempClient.main(TempClient.java:17) 
```

我尝试同时使用 ClientResource.get() 和 Client.handle(Request) 并且都挂起。

服务器代码：

```
server = new Server(Protocol.HTTP, SERVER_PORT, TestServerResource.class);
Context ctx = new Context();
server.setContext(ctx);
server.start(); 
```

客户端代码：

```
Request request = new Request(Method.GET, "http://localhost:8188/retrieve");
Client client = new Client(Protocol.HTTP);
Response response = client.handle(request);
response.getEntity().write(System.out); 
```

资源：

```
public class TestServerResource extends ServerResource {

  private static volatile Customer bernard = Customer.createSample();

  @Get("json")
  public Customer retrieve() {
    System.out.println("GET request received");
    return bernard;
  }
} 
```

xstream 和 jettison 扩展可以完美地将 java 对象转换为 JSON，反之亦然，同样，这在我的 Mac OS X 上运行良好，但在 Sun ...

我是 Restlet 的新手，所以也许我做错了什么，但这些是从可用文档中获取的简单示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:43:34.410

我认为这可能与这个问题有关：[https ://github.com/restlet/restlet-framework-java/issues/669#issuecomment-9174819](https://github.com/restlet/restlet-framework-java/issues/669#issuecomment-9174819)

但是，这并不能解释为什么服务器不回复 restlet 而是回复其他人。您在服务器上有任何异常吗？我有一个类似的案例，实际上我在服务器上遇到了这个异常：

```
The connection was broken. It was probably closed by the client.

org.eclipse.jetty.io.EofException
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.blockWritable(SelectChannelEndPoint.java:435)
    at org.eclipse.jetty.http.AbstractGenerator.blockForOutput(AbstractGenerator.java:512)
    at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:159)
    at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:101)
    at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
    at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:282)
    at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:125)
    at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:135)
    at java.io.OutputStreamWriter.write(OutputStreamWriter.java:220)
    at java.io.Writer.write(Writer.java:157)
    at org.restlet.representation.StringRepresentation.write(StringRepresentation.java:237)
    at org.restlet.representation.CharacterRepresentation.write(CharacterRepresentation.java:76)
    at org.restlet.engine.adapter.ServerCall.writeResponseBody(ServerCall.java:509)
    at org.restlet.engine.adapter.ServerCall.sendResponse(ServerCall.java:453)
    at org.restlet.ext.jetty.internal.JettyCall.sendResponse(JettyCall.java:312)
    at org.restlet.engine.adapter.ServerAdapter.commit(ServerAdapter.java:196)
    at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:153)
    at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:170)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:452)
    at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:894)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:948)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:943)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:622)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
    at java.lang.Thread.run(Thread.java:722) 
```

# android - 无法解析目标“android-14”

> ID：12832383
> 
> 赞同：3
> 
> 时间：2012-10-11T04:48:09.513
> 
> 标签：android, admob

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T04:52:44.070

右键单击项目 --> 转到属性 --> 从那里选择 Android --> 并从目标名称列表中选择 Android 4.0 或更低版本

# vsto - [VSTO] 上有时会发生 ThreadAbortException，没有规则

> ID：12832384
> 
> 赞同：2
> 
> 时间：2012-10-11T04:48:12.653
> 
> 标签：vsto

我有时只是收到此异常消息，但我不知道如何让它每次都出现。

```
details:
************* Exception Text *******************
System.Threading.ThreadAbortException: Thrad was being aborted.
at System.Windows.Forms.NativeWindow.DefWindProc(Message& m)
at System.Windows.Forms.Form.DefWindProc(Message& m)
at System.Windows.Forms.Control.WindProc(Message& m)
at System.Windows.Forms.ScrollableControl.WindProc(Message& m)
at System.Windows.Forms.ContianerControl.WindProc(Message& m)
...and so on 
```

请给我一些建议好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:08:08.667

当用户关闭**Outlook**（*`outlook.exe`进程结束*）并且您的代码仍在执行时，就会发生这种情况。在退出期间，您可以处理`ThreadAbortException`并对其做出反应以在应用程序结束之前保留任何状态。

# objective-c - iOS 核心数据 - Segmentation Fault 11

> ID：12832386
> 
> 赞同：2
> 
> 时间：2012-10-11T04:48:26.070
> 
> 标签：objective-c, ios, core-data, segmentation-fault, nsmanagedobjectcontext

我正在尝试分配布尔类型的属性的值。当我尝试这样做时，我最终出现了这个错误

> 作业似乎已崩溃：分段错误：11

下面是代码：

```
NSMutableArray *emails = [[NSMutableArray alloc] init];

NSError *error = nil;

//This is your NSManagedObject subclass
SalesPerson * client = nil;

NSFetchRequest * request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"SalesPerson" inManagedObjectContext:self.managedObjectContext]];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@", query];

[request setPredicate:predicate];
NSArray *results = [self.managedObjectContext executeFetchRequest:request error:&error];

client = [results objectAtIndex:0];

client.mailed = TRUE;

NSLog(@"client email %@",client.email);

[emails addObject:client.email]; 
```

我有三个属性 name ， email 和 mailed 。当我尝试更改实体的邮寄属性时，它会抛出上述错误。Mailed 是布尔类型。其他属性是更新时确实更改的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:32:32.100

不确定这是否是您正在寻找的解决方案。检查您的 coredata 模型类并确保`mailed`声明为`NSNumber`而不是`BOOL`. 因此，每当您存储或阅读时，您都需要从一种转换为另一种。

```
NSNumber *aNumber = [NSNumber numberWithBool:mailed];

BOOL mailed = [aNumber boolValue]; 
```

# css - position:fixed 会触发 display:block?

> ID：12832391
> 
> 赞同：2
> 
> 时间：2012-10-11T04:49:18.640
> 
> 标签：css

我测试过，在 chrome 或 firefox 上运行时，除了在 ie 上，
位置：固定将触发显示：块？
这个测试html：[http](http://sking7.github.com/fix.html)
://sking7.github.com/fix.html 代码会提示两次，第一次是显示，第二次是document.compatMode
这为什么呢？
w3c有这么说吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:35:12.383

好吧，我[为此找到了 w3 规范](http://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#dis-pos-flo)：

> ## 9.7 ‘display’、‘position’和‘float’之间的关系
> 
> 影响盒子生成和布局的三个属性——“display”、“position”和“float”——交互如下：
> 
> 1.  如果 'display' 的值为 'none'，则 'position' 和 'float' 不适用。在这种情况下，元素不会生成框。
> 2.  **否则，如果'position'的值为'absolute'或'fixed'，则框是绝对定位的，'float'的计算值为'none'，并根据下表设置显示。盒子的位置将由 'top'、'right'、'bottom' 和 'left' 属性以及盒子的包含块确定。**
> 3.  否则，如果 'float' 的值不是 'none'，则框是浮动的，并且根据下表设置 'display'。
> 4.  否则，如果元素是根元素，则根据下表设置'display'，除了在CSS 2.1中未定义'list-item'的指定值是否成为'block'或'list的计算值-物品'。
> 5.  否则，剩余的“显示”属性值将按指定应用。

```
规定值 计算值

内联表

*内联*，表行组，表列，
表列组，表头组，
表页脚组、表行、表单元格、
表格标题，内联块 *块*

其他与指定相同

```

# c++ - 如何拦截 I/O 端口访问以实现硬件虚拟化

> ID：12832392
> 
> 赞同：2
> 
> 时间：2012-10-11T04:49:33.223
> 
> 标签：c++, assembly, hardware, simulation

我正在尝试做一些模拟。在实际情况下，`x86-based`工业 PC 使用 PC/104 与网络板连接。网卡被视为 I/O 设备。运行的代码`IPC`使用 IN、OUT 等汇编指令来访问 I/O 端口。我想在我的笔记本电脑上模拟整个事情。

运行的`c++`程序`IPC`可以移植到我的笔记本电脑上，因为它们都是基于 x86 架构的。但是对于 IN/OUT 指令，我遇到了麻烦，因为我的笔记本电脑上没有连接真正的网络板。我使用 . 模拟了网络板的逻辑`SystemC`。**我想知道是否有办法拦截对真实硬件的 I/O 端口访问（IN/OUT）并让虚拟化硬件的逻辑接管。**

我感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:42:39.950

如果您的带有 IN/OUT 指令的代码位于用户程序中，您需要了解如何在同一个程序（可能通过信号？）或内核中拦截和处理这些指令。IN 和 OUT 是特权指令，默认情况下它们会在用户模式代码中引发异常 (#GP)，然后内核会处理此异常。对于这种情况，您需要有自己的处理程序。在 Windows 中，这可以使用所谓的结构化异常处理 (AKA SEH) 来完成。

如果代码已经在内核中，那就很棘手了，因为那里的 IN/OUT 不会导致#GP。

难道你不能用对设备仿真代码的调用来替换执行 IN 和 OUT 的例程吗？无论如何，您都在模仿它，没有人关心它是输入/输出还是其他东西。

看看[如何使用 SEH 来完成](https://stackoverflow.com/a/7814167/968261)。

# eclipse - Eclipse 持久属性

> ID：12832399
> 
> 赞同：1
> 
> 时间：2012-10-11T04:49:56.987
> 
> 标签：eclipse, properties, include, persistent

在我的插件中，我有一个属性页，用于存储用户的包含目录路径。我需要在关机时将这个包括字符串列表存储在磁盘中，并在 Eclipse 重新启动时重新加载它。

SetPersistentProperty/GetPersistentProperty 功能有 2 KB 的限制，所以我不能使用它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T15:15:28.273

项目范围的偏好可能是您需要的。[在此处](http://wiki.eclipse.org/FAQ_How_do_I_store_extra_properties_on_a_resource%3F)查看与持久属性的比较。这个[答案](https://stackoverflow.com/a/10408630/794836)演示了如何实现这一点。

# iis-6 - 通过命令行在 IIS6 中重新启动特定网站

> ID：12832401
> 
> 赞同：1
> 
> 时间：2012-10-11T04:50:01.370
> 
> 标签：iis-6, restart

有谁知道我是否可以使用命令行在 IIS 6 中重新启动特定网站。

如果可以避免的话，我不想使用一揽子 IISReset /restart 命令。

我有一个网站出现问题并且正在使服务器最大化，我需要找到一个修复它但同时我也想睡觉，所以我想每 10 分钟重新启动它一夜以护理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:36:38.813

听起来您实际上想要回收应用程序池而不是停止/启动网站。

为此，您可以使用 IISAPP.vbs 实用程序：

> cscript c:\windows\system32\iisapp.vbs /a "我的 AppPool" /r

您可以使用 /? 运行该实用程序？标志以获得完整的使用细节和一些示例命令行。

如果您真的想启动/停止网站，您可以使用 ADSUTIL.vbs 实用程序：

> cscript c:\inetpub\adminscripts\adsutil.vbs STOP_SERVER W3SVC/1
> 
> cscript c:\inetpub\adminscripts\adsutil.vbs START_SERVER W3SVC/1

有关 ADSUTIL.vbs 的更多信息，请参阅此页面：

[使用 Adsutil.vbs 管理脚本 (IIS 6.0)](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d3df4bc9-0954-459a-b5e6-7a8bc462960c.mspx?mfr=true)

# node.js - 为 NodeJS 服务器开发客户端应用程序时必须使用 Socket.IO 吗？

> ID：12832402
> 
> 赞同：2
> 
> 时间：2012-10-11T04:50:06.813
> 
> 标签：node.js, websocket, socket.io

我是 NodeJS 的新手，发现它非常有趣。我在使用 NodeJS 构建服务器方面没有太多问题。但是当我去开发一个 Web 浏览器客户端时，我开始了解 Socket.IO。但我对此感到非常困惑。我们可以在不使用 Socket.IOS 的 NodeJS 服务器的情况下开发 Web 客户端应用程序吗？

没有 Socket.IO 的 NodeJS 中是否支持 websocket？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T01:48:56.047

这个问题很老，但供将来参考。

Socket.IO 很有名，对于节点流[https://github.com/substack/stream-handbook](https://github.com/substack/stream-handbook)你应该很感兴趣。

我个人在我自己的项目中这样做：

[http://kenokabe.github.io/MarkdownLive/](http://kenokabe.github.io/MarkdownLive/)

我用 Markdown 写东西，需要一个流媒体预览，所以我自己创建了。预览屏幕是一个浏览器 HTML 页面，HTML 内容以流的方式呈现和更新。

这种技术通常被称为`RPC(remote procedure call)`. Socket.IO 对很多人来说都很熟悉，你可以在网上找到丰富的资源，所以开始吧。

但是，我个人不再使用它，因为它是一个巨大的库，仅用于在节点和浏览器之间进行 RPC，尤其是当您知道除了 websocket 之外不需要任何回退时。

在这里做 RPC 的更简洁和复杂（我认为）和无缝的方法是使用

[dnode](http://github.com/substack/dnode)或[rpc-stream](http://github.com/substack/dnode) 与[Browserify](http://browserify.org)。

证明：下面是我自己项目的客户端（浏览器）的代码：http: [//kenokabe.github.io/MarkdownLive/](http://kenokabe.github.io/MarkdownLive/)

[https://github.com/kenokabe/MarkdownLive/blob/master/www/js/index.js](https://github.com/kenokabe/MarkdownLive/blob/master/www/js/index.js)

```
(function() //-----
  {
    "use strict";

    $(document)
      .ready(function()
      { //--------------------------
        $('#streamDIV')
          .html('<h1>MarkdownLive</h1><h3>Markdown Streaming Live View for SublimeText3</h3><br><h4><strong>Open</strong> <br><br>.md<br>.markdown<br>.mdown<br>.mkdn<br>.mkd<br>.mdwn<br>.mdtxt<br>.mdtext<br>.text<br>.txt</h4>');
        var through = require('through');

        var stream = require('shoe')('/stream')
          .pipe(through(function(data)
          {
            $('#streamDIV')
              .html(data);
          }));
        //-------------------------
      });

  }()); 
```

正确使用 node.js 流，可以用简洁的声明式编程或 FRP 方式编写服务器-客户端 RPC 代码。

在 node.js [Web Sockets 服务器端实现](https://stackoverflow.com/questions/13927138/web-sockets-server-side-implementation-for-nodejs?rq=1)中没有 webSocket 的本机实现 NodeJS 和 Socket.IO 基于[ws](http://einaros.github.io/ws/)。

**WebSocket 层**

`ws`或[sock-js](https://github.com/sockjs)或其他。

**流层**

[https://github.com/maxogden/websocket-stream](https://github.com/maxogden/websocket-stream) for ws

[https://github.com/NodeGuy/WebSocketStream](https://github.com/NodeGuy/WebSocketStream) for ws

[https://github.com/kenokabe/WebSocketStreamPlus](https://github.com/kenokabe/WebSocketStreamPlus)（我的工作基于 NodeGuy 的）

[https://github.com/substack/shoe](https://github.com/substack/shoe)用于 sock-js

**RPC 层**

[https://github.com/substack/dnode](https://github.com/substack/dnode)

[https://github.com/dominictarr/rpc-stream](https://github.com/dominictarr/rpc-stream)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T05:01:03.740

是的，socket-io 是一个可以与 node-js（和其他依赖项）一起使用的包，但在 node 中构建 web 应用程序时使用 socket-io 并不是强制性的。正常的 http 请求就可以了。您也可以在节点中使用 Web 套接字，而无需使用 socket-io。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T05:01:45.847

当然，您可以在 socket.io 之外使用它。它只是[npm 节点上](https://npmjs.org/package/socket.io)可用的一个模块。

例如，使用 node 作为 web/http 服务器是很常见的——看看[express](http://expressjs.com/)。它是一个 Web 服务器，非常常见，不一定是 socket.io 应用程序。

[Socket.io](http://socket.io/)适用于您希望浏览器/客户端通过 html5 Web 套接字与服务器保持套接字的情况。在这种情况下，服务器可以回调客户端并将数据传回（与轮询相反）-基于服务器上的某些事件的回调，例如另一个客户端调用和更改数据。聊天应用程序就是典型的例子。

您看到 socket.io 与 node 一起被提及的原因是因为 node 是一个网络服务器，重量非常轻且速度快，因此适合并针对接近实时的网络场景进行了优化。

# iphone - Charles Proxy 中不存在 cocos2d-x app 的 Http 流量

> ID：12832405
> 
> 赞同：0
> 
> 时间：2012-10-11T04:50:15.883
> 
> 标签：iphone, ios, ios-simulator, cocos2d-x, charles-proxy

我的游戏应用基于 cocos2d-x/iphone，它会从 Django 服务器请求 Json 或 Html。如果我在模拟器或设备内的 iPhone Safari 浏览器以及 PC 浏览器中打开服务器请求的 url，一切正常，流量显示在 Charles 中。但是对于在 ios 模拟器或 iphone 设备上运行应用程序，在 Charles 中找不到流量。软件均为最新版本。

任何人有同样的问题，并给我一些线索吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-16T04:53:21.987

问题应该是你的 cocos2d-x 应用程序使用 libcurl，并且不要在你的代码中设置 CURLOPT_PROXY 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:58:26.787

您需要正确配置它

1.  从帮助菜单中，选择安装 Charles CA SSL 证书...（HTTPS 流量）
2.  从代理菜单中，选择客户端 SSL 证书... 启用 SSL 代理
3.  从 SpotLight 搜索“网络实用程序”并找到您的 IP 地址
4.  打开 Safari 并在浏览器中输入[http://charlesproxy.com/charles.crt](http://charlesproxy.com/charles.crt)
5.  安装证书
6.  打开您的 iPhone 设置应用程序并点击 Wi-Fi 设置。点击本地 Wi-Fi 网络的蓝色披露指示器
7.  向下滚动到 Wi-Fi 设置的底部，然后点击 HTTP 代理设置中的手动分段控件。
8.  输入您从运行 Charles 的 Mac 上记下的 IP 地址。以及 Charles 运行的默认端口 8888
9.  要验证您的设置，请在 iPhone 上打开 Safari。一旦您提出 Internet 请求，Charles 就会在您的 Mac 上使用如下所示的消息框提示您。您想单击“允许”按钮。

我从[这里复制的所有上述信息](http://www.terryblanchard.com/2010/09/21/debugging-monitoring-iphone-web-requests/)

# java - 如何比较Java中两个不同列表中的对象值？

> ID：12832414
> 
> 赞同：1
> 
> 时间：2012-10-11T04:51:07.157
> 
> 标签：java, json, arraylist

我有两个列表，比如说`listA`and `listA1`，`listA`包含类`A`类型的对象，`listA1`也包含类类型的对象`A`。但是通过 java 代码`listA`添加了类`A`对象，而 listA1 通过将`JSON`String 转换为 Class添加了类 A 对象`A`。

现在我需要比较`listA`和`listA1`。如果`listA`包含也在其中的任何对象，`listA1`我需要删除该对象并返回`listA`所有不在`listA1`.

我怎样才能在 Java 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:58:58.333

请在您的班级上实施（覆盖）`equals`方法如下`A`。一旦完成，`contains`方法应该会有所帮助。

```
 public boolean equals(A a){
       boolean bEqual = false;
       if(this.value1!= null && a.value1!= null && 
          this.value1.eqauls(a.value1)
          ........
          ........
        ) {
          bEqual = true;              
        }
        return bEqual;
   } 
```

**编辑：**

迭代 的元素`listA1`。如果它们存在于 中`listA`，请将它们删除。

```
 for(A a: listA1){
     if(listA.contains(a)){
        listA.remove(a);
     }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:01:36.080

Apache 的 commons.collections 库有一个 CollectionUtils 类，该类为 Collection 操作/检查提供易于使用的方法，例如交集、差异和联合。

[org.apache.commons.collections.CollectionUtils API](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html)文档在这里。

我认为，您可以为此使用交互方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:03:36.617

您需要覆盖类中的`.equals(Oject)`和`.hashCode()`方法。
列表不需要 hashCode，但是当您覆盖 equals 时，合同说您必须覆盖 hashCode

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:25:42.963

如果您打算比较两个对象，请查看[比较对象](http://en.wikibooks.org/wiki/Java_Programming/Comparing_Objects)

另外，它的工作原理[等于](http://journals.ecs.soton.ac.uk/java/tutorial/java/javaOO/objectclass.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T06:05:01.740

我做了什么来解决这个问题......

```
 public static class A  {

        String  headerName;

        public String getHeaderName() {
            return headerName;
        }
        public void setListBoxHeaderName(String headerName) {
            this.headerName= headerName;
        }
        public A(String headerName) {
            super();

            this.headerName = headerName;
        }

        public boolean equals(A rData) {
            boolean bEqual = false;
            if (this.getHeaderName() != null && rData.getHeaderName() != null
                    && this.getHeaderName().equals(rData.getHeaderName())) {
                bEqual = true;
            }
            return bEqual;
        }

    } 
```

为了比较两个列表，代码如下......

```
for (A value1 : listA1) {
            for (A value2: listA) {
                if (value2.equals(value1 )) {
                 listA.remove(value2);
                    break;
                }
            }
        } 
```

这就是我使用的确切解决方案谢谢

# excel - 使用 HP Loadrunner 记录 excel

> ID：12832419
> 
> 赞同：0
> 
> 时间：2012-10-11T04:51:34.223
> 
> 标签：excel, recording

我必须使用 HP Loadrunner 11.0 在 excel 版本 2007 中记录流程。我无法记录，因为事件数为“0”。而且，在其他机器上我无法打开excel。使用的设置 - Win32 应用程序 -> 从程序文件中提供 MSexcel 路径并使用协议 Web (HTTP/HTML) 记录模式。

有人可以建议这是否可能，我应该采取哪些步骤。并且，如果 excel 2010 与 HP Loadrunner 11.0 兼容。

感谢您对上述查询的及时回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:28:41.010

*   您的 Excel 工作流应用程序与哪种服务器类型通信？您已经表明您选择了 web/http，但这是服务器类型吗？Excel 可能会从文件中提取数据，直接连接到数据库连接等...您是否确认请求是由 Web 服务器或通过 Web 服务处理的？
*   设置录制选项的方法有很多种，其中一些方法与浏览器以外的任何应用程序类型都是对立的。您如何设置 VUGEN 来录制不是与 Web 服务器通信的浏览器的外部应用程序？

推特：@PerfBytes

# android - 新应用程序版本的资产文件夹中的只读 SQLite DB 更新

> ID：12832421
> 
> 赞同：4
> 
> 时间：2012-10-11T04:51:34.553
> 
> 标签：android, database, sqlite, assets

目前，我正在摆弄自己在 android 中使用 sql 数据库并创建了我的第一个应用程序。现在我想更新这个应用程序和资产文件夹中的包含数据库。我用新数据库覆盖了旧数据库，但在我的手机上它没有显示新条目。

它以某种方式保存旧条目/查询或完全保存旧 Db。我在网上查了一下，但真的找不到解决办法。在我的 dbhelper 代码下方。我必须做些什么`onUpgrade`吗？或者程序是什么？

非常感谢您的帮助！

```
public class DataBaseHelper extends SQLiteOpenHelper {
private static String DB_PATH;

private static String DB_NAME;

private SQLiteDatabase db_object;

private final Context context;

public DataBaseHelper(Context context, String db) {
    super(context, db, null, 80);
    this.context = context;
    DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
 //   DB_PATH = "/data/data/com.comp.appname/databases/";
    DB_NAME = "mydatabase.sqlite";
    try {
        createDataBase();
    } catch (IOException ioe) {
        throw new Error("Unable to create database");
    }
    try {
        openDataBase();
    } catch (SQLException sqle) {
        throw sqle;
    }
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
}

public void createDataBase() throws IOException {
    boolean dbExist = checkDataBase();
    if (dbExist) {
    } else {
        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
    }
    if (checkDB != null) {
        checkDB.close();
    }
    return checkDB != null ? true : false;
}

private void copyDataBase() throws IOException {
    InputStream myInput = context.getAssets().open(DB_NAME);
    String outFileName = DB_PATH + DB_NAME;
    OutputStream myOutput = new FileOutputStream(outFileName);
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public void openDataBase() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    db_object = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READONLY);
}

@Override
public synchronized void close() {
    if (db_object != null)
        db_object.close();
    super.close();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T06:35:17.090

这是升级数据库的代码：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {      
if (newVersion > oldVersion) {
    switch (oldVersion) {
        case 1:
            executeSQLScript(database, "update_v2.sql");
        case 2:
            executeSQLScript(database, "update_v3.sql");
    }
}
} 
```

并看看这个链接：[http ://www.drdobbs.com/database/using-sqlite-on-android/232900584?pgno=2](http://www.drdobbs.com/database/using-sqlite-on-android/232900584?pgno=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:28:28.473

我解决了自己的问题：

在`onUpgrade`您需要输入的方法中：

```
mycontext.deleteDatabase(DB_NAME); 
```

在 databasehelper 类中，我需要像这样增加版本号，例如：

```
super(context, db, null, 84); 
```

我的是 84 但基本上你只需要将它增加 1，说它是一个更高的版本。最好的情况是，您的数据库版本会随着您的数据库的每次外部编辑而增加。

希望这会帮助别人。

# wcf - 连接到 RESTful 服务的 WCF 客户端不起作用

> ID：12832429
> 
> 赞同：1
> 
> 时间：2012-10-11T04:52:16.400
> 
> 标签：wcf

我正在尝试使用 svcutil 生成的客户端与 RESTful WCF 服务进行通信。

服务合同定义为：

```
public interface IService1
{
    [OperationContract]
    [WebGet(UriTemplate = "/GetTest?a={a}&b={b}&c={c}")]
    int GetTest(int a, int b, int c);
} 
```

我使用 Visual Studio 引用此服务并使用生成的客户端代码来调用 GetTest 操作。不幸的是，我收到了这条消息：

```
Operation 'GetTest' of contract 'IService1' specifies multiple request body parameters to be serialized without any wrapper elements. At most one body parameter can be serialized without wrapperelements. Either remove the extra body parameters or set the BodyStyle property on the WebGetAttribute/WebInvokeAttribute to Wrapped 
```

但是当我从 Web 浏览器请求相应的 URL 时，它工作并显示了正确的返回值。

这很奇怪。生成的客户端代码有什么问题吗？还是我配置错误？

以下是我的客户端配置：

```
<system.serviceModel>
    <behaviors>
        <endpointBehaviors>
            <behavior name="Service1EndPointBehavior">
                <webHttp />
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <client>
        <endpoint address="http://localhost:8010/Service1/" behaviorConfiguration="Service1EndPointBehavior"
            binding="webHttpBinding" contract="ServiceReference1.IService1"
            name="Service1EndPoint" />
    </client>
</system.serviceModel> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:33:38.977

将此属性添加到您的方法中

```
[WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)] 
```

解释：

[http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webmessagebodystyle.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webmessagebodystyle.aspx)

# string - 返回包含列表中前两个字符串作为元组的列表

> ID：12832433
> 
> 赞同：1
> 
> 时间：2012-10-11T04:52:52.297
> 
> 标签：string, list, haskell, greedy

我正在编写一个 Haskell 函数，它接受一个字符串列表并返回一个包含前两个字符串的列表作为结果作为元组。所以一个示例输出将是：

```
listtuple ["bride", "zilla", "crazy", "women"] = [("bride", "villa")]
listtuple ["basketball", "football"] = [("basketball", "football")] 
```

我想这样接近它的方式：

```
listtuple :: Eq a => [Str a] -> [(Str a, Str a)]
listtuple xs = [(x,y) | x <- xs !! 0, y <- xs !! 1] 
```

本质上，我认为我可以只选择列表的第一个和第二个索引中的元素，但我遇到了错误。这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T04:57:02.577

简单的答案是

```
listtuple :: [a] -> [(a,a)]
listtuple (x:y:_) = [(x,y)]
listtuple _ = [] 
```

由于您的列表将始终包含一个项目或不包含一个项目，因此最好使用`Maybe`哪个服务器用于此目的。

```
listtuple2 :: [a] -> Maybe (a,a)
listtuple2 (x:y:_) = Just (x,y)
listtuple2 _ = Nothing 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T05:20:07.167

您可能想要做的是：

```
listtuple xs =
    let x = xs !! 0
        y = xs !! 1
     in (x, y) 
```

请注意，这与您编写的内容不同。原因是您编写的列表理解转换为以下内容：

```
do x <- xs !! 0  -- Treat the first  element of xs as a list
   y <- xs !! 1  -- Treat the second element of xs as a list
   return (x, y) 
```

这说明了问题：当它们不是列表时， 您将`xs !! 0`和视为列表。只是一个元素，所以如果你想声明等于，你使用：`xs !! 1``xs !! 0``x``xs !! 0`

```
let x = xs !! 0
 in <some expression that uses x> 
```

in 列表推导语法不会做同样的`<-`事情，我建议您在了解列表单子如何工作之前避免使用列表推导，因为编译器会将列表推导转换为列表单子。

现在，第二个问题是您使用`(!!)`. 您应该避开偏函数，`(!!)`并专注于使用模式匹配来解决这些问题。执行您要求的惯用方法是对前两个元素进行模式匹配：

```
listtuple (x:y:_) = (x, y) 
```

...除了在包含少于两个元素的列表上会失败。您可以通过将结果存储为 a 来防止这种情况`Maybe`，其中 a`Just`包装成功的结果并`Nothing`指示失败：

```
listtuple :: [a] -> Maybe (a, a)
listtuple (x:y:_) = Just (x, y)
listtuple _       = Nothing 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T04:55:46.823

我可以看到您的代码中有一些错误，但是如果您对代码为什么不起作用有具体问题，请告诉我。

首先，您提供的类型签名无效。`String`是一个无参数的数据结构，`Str a`什么都不是，当然除非你定义了一个`Str`自己命名的数据结构。s列表`String`也不需要您提供的等式约束，因为编译器已经知道它`String`是`Eq`.

其次，您在 where 子句的位置（看起来像）使用列表理解语法。`xs !! 0`考虑 Haskell 将在绑定元素之前尝试评估`x`。因为这是一个列表推导，所以它可能不会立即失败，因为`xs`它是一个`String`s 的列表（实际上是 的列表`Char`），但您最终会`Char`从 xs 的第一个和第二个字符串中提取 s 的元组。

这是一个使用模式匹配的简单解决方案，可以产生您想要的。

```
listtuple :: [a] -> [(a, a)]
listtuple (x:y:zs) = [(x, y)] 
```

请注意，这不是一个完整的函数（即，如果您将一个少于两个元素的列表传递给它，它将导致错误）。这可以通过在将空列表或一个元素列表传递给它时返回空列表来完成，这是否符合您的预期目的？

这是一个替代版本，您可能会发现它适合您用来编写自己的版本的心智模型。

```
listtuple xs = [(x, y)]
            where
                x = xs !! 0
                y = xs !! 1 
```

# php - PHP - error_get_last 警告方法？

> ID：12832443
> 
> 赞同：8
> 
> 时间：2012-10-11T04:53:42.717
> 
> 标签：php

我[`unlink`](http://php.net/manual/en/function.unlink.php)在我的 PHP 页面上使用。在某些情况下，删除目录的权限可能会被拒绝。而不是拥有

`Warning: unlink(stuff/New folder) [function.unlink]: Permission denied in ... on line 30`

出现在呈现的页面上，有没有办法让我做一个“warning_get_last”来捕获最后一个给定的警告，所以我可以很好地输出它？还是`error_get_last`包括这些？

我知道我可以抑制警告，`@unlink`并且我还可以检查是否`unlink`返回 false，但我想知道*如果*它确实失败了随之而来的错误消息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T04:56:36.693

用于`error_reporting(0)`在呈现的页面中不显示警告或任何错误。它仍然会显示在您的服务器错误日志中，您仍然可以使用它`error_get_last()`来获取最后一个错误。

你可以用这个来测试它：

```
error_reporting(0);
unlink('some file that does not exist'); // generates a warning
print_r(error_get_last()); 
```

已编辑：请注意，这`error_reporting(0)`会影响后续代码，因此您需要在完成要抑制错误显示的代码后将其设置回您想要的级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:01:13.620

您编写设置自己的错误处理程序，在调用之前启用它，然后恢复正常。

使用[set-error-handler](http://www.php.net/manual/en/function.set-error-handler.php)打开错误处理程序，保存到全局变量（这是最简单的——也许不是最“正确”的）并显示是否有错误。或用户 error_get_last() （由 Trott 建议）。

```
function myErrorHandler($errno, $errstr, $errfile, $errline) {
    global $lastErrorString;
    $lastErrorString = $errstr;
    return false;
}

// Calling function:
global $lastErrorString;
$lastErrorString=false;
$old_error_handler = set_error_handler("myErrorHandler");
unlink($file);
restore_error_handler();
if ($lastErrorString !== false) {
    echo 'Went wrong: ' . $lastErrorString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T13:16:59.743

我不明白为什么以下提案比其他两个提案更糟糕；事实上，我会说它更好，因为它比罗比的答案更短，并且不像 Trott 的答案那样具有全局影响：

```
$ok = @unlink(...);
if ($ok === FALSE)
    throw new Exception(error_get_last()['message']); 
```

运行时输出：

```
PHP Fatal error:  Uncaught exception 'Exception' with message 'unlink(foobar.txt): No such file or directory' in /Users/erik/code/test.php:5
Stack trace:
#0 {main}
  thrown in /Users/erik/code/test.php on line 5 
```

# spring - 我可以从属性文件加载 Hibernate 映射文件的属性值吗？

> ID：12832444
> 
> 赞同：2
> 
> 时间：2012-10-11T04:53:50.033
> 
> 标签：spring, hibernate, configuration, hibernate-mapping

Hibernate 或 Spring Framework 和 Hibernate 的组合（我正在开发一个使用 Spring 2.5 和 Hibernate 3.2 的 Java Web 应用程序）是否提供任何机制来从例如`properties`文件中加载 Hibernate 的 hbm.xml 映射文件中的属性值？

更具体地说，我们的一些域对象映射到与大多数 Hibernate 映射类不同的数据库目录。因此，我们使用该`catalog="secondaryCatalogName"`属性来指定这些类的目录名称。

我们使用一个`database.properties`文件和 Spring`PropertyPlaceholderConfigurer`来指定我们所有 Spring 配置中的默认和辅助目录名称。但是，如果我需要更改二级目录名称，我还必须更改那几个 hbm.xml 文件中的目录属性。如果我也可以在映射文件中使用诸如`${secondary.catalog}`目录属性之类的占位符，那就太好了。

这可能吗？

这是一个使用配置片段的简化示例：

**数据库结构**

```
MySQL instance
- catalog: CatalogA
    - table: TableFoo
    - table: TableBar
    - ...
- catalog: CatalogB
    - table: TableBaz
    - ... 
```

**数据库属性**

```
primary.catalog=CatalogA
secondary.catalog=CatalogB # <-- wish I could use this property in hbm.xml 
```

**SessionFactory -配置（春天）：**

```
<bean id="sessionFactory" class="...hibernate3.LocalSessionFactoryBean">
    <property name="mappingResources">
        <list>
            <value>Foo.hbm.xml</value>
            <value>Bar.hbm.xml</value>
            <value>Baz.hbm.xml</value>
            ...
        </list>
    </property> 

   ...

    <property name="hibernateProperties">
       <props>
           ...
           <prop key="hibernate.default_catalog">${primary.catalog}</prop>
       </props>
    </property>
</bean> 
```

**Foo.hbm.xml：**

**CatalogA**中域对象的休眠映射（由于属性，CatalogA 实体映射始终可以正常工作`hibernate.default_catalog`）

```
<hibernate-mapping>
    <class name="Foo" table="TableFoo">
    ...
    </class>
</hibernate-mapping> 
```

**Baz.hbm.xml：**

**CatalogB**中域对象的休眠映射（这是由于**目录**属性的问题：如果我想使用不同的辅助目录名称，它必须在 CatalogB 实体的*所有hbm.xmls 中更改）*

```
<hibernate-mapping>
    <class name="Baz" table="TableBaz" catalog="CatalogB">
    ...
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:27:28.373

你用`hibernate.properties`文件吗？

您可以在其中定义其他属性，例如 hibernate.default_schema、hibernate.default_catalog 等。[可选配置属性](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/session-configuration.html)

# c# - 如何发送类型为“text/xml”的 HTTP POST 请求

> ID：12832445
> 
> 赞同：1
> 
> 时间：2012-10-11T04:53:59.573
> 
> 标签：c#, asp.net

我想发送类型为“text/xml”的 HTTP POST 请求以及请求，我将 Querystring 值发送为：

```
"?wicket:interface=:9:XXOIForm:transactionForm:componentListPanel:componentListView:0:component:expressEntryContainer:expressEntry::IBehaviorListener:0:&wicket:pcxt=XXOIForm&random=0.48316250719134435" 
```

这是我手动添加的几个请求标头

```
request.Headers.Add("Accept-Language", "en-us,en;q=0.5");
request.Headers.Add("Wicket-Ajax", "true");
request.Headers.Add("Wicket-FocusedElementId", "id1a"); 
```

我通过 HTTP Anlayzer 工具记录的所有日志。

但我无法绕过这个请求。请建议我有什么方法可以发送类型为 HTTP POST 的请求`"text/xml"`吗？

或者我需要在请求标头中发送什么？

是的，我仅以字节流格式发送帖子数据请参阅我有以下代码来发送帖子数据

```
protected void WritePostDataToRequest(string postData)
    {

        postData = postData.Replace("/", "%2F").Replace(",", "%2C").Replace(" ", "+").Replace("!", "%21").Replace("#", "%23");
        data = encoding.GetBytes(postData);
        request.ContentLength = data.Length;
        newStream = request.GetRequestStream();
        newStream.Write(data, 0, data.Length);
        newStream.Close();
    } 
```

此外，我已经添加了请求标头内容类型。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T04:56:30.720

```
request.ContentType = 'text/xml'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:03:02.727

使用字节流发送你的数据：

```
string data="wicket:interface=:9:eligibitiyBenefitsInquiryForm:transactionForm:componentListPanel:componentListView:0:component:expressEntryContainer:expressEntry::IBehaviorListener:0:&wicket:pcxt=EligibilityBenefitInquiryPage&random=0.48316250719134435"

byte[] dataStream = Encoding.UTF8.GetBytes(data);    
string uriStr = "www.abc.com";
HttpWebRequest rqst = (HttpWebRequest)HttpWebRequest.Create(Uri.EscapeUriString(uriStr));
rqst.KeepAlive = false;
rqst.Method = "POST";

rqst.ContentType = "application/x-www-form-urlencoded";
rqst.ContentLength = dataStream.Length;
Stream newStream = rqst.GetRequestStream();

newStream.Write(dataStream, 0, dataStream.Length);
newStream.Close();
WebResponse resp = rqst.GetResponse(); 
```

# c++ - cout为什么不显示字符串变量rnd？

> ID：12832446
> 
> 赞同：2
> 
> 时间：2012-10-11T04:54:05.393
> 
> 标签：c++, string, infinite-loop, cout

当我尝试用 cout 显示随机生成的字符串 rnd 时，我只得到 endlines 作为输出。为什么会这样，我该如何解决？附带说明一下，while 语句会创建一个无限循环。我没有正确比较字符串吗？我正在使用 g++ 编译器。

```
#include <iostream>
#include <cstdlib>
#include <string>
using namespace std;

int main()
{
    string str;
    string rnd;
    int x;

    cout << "What do you want the string to be?" << endl;
    cin >> str;

    srand(1);

    //assign the initial random string
    for(int i = 0; i < str.size(); i++)
    {
        x = rand() % 26 + 97;
        rnd[i] = static_cast<char>(x);
    }

    cout << rnd << endl;

    //change individual characters of the string rnd until rnd == str
    while(str != rnd)
    {
        for(int i = 0; i < str.size(); i++)
        {
            if (rnd[i] == str[i])
            {
                continue;
            }
            else
            {
                x = rand() % 26 + 97;
                rnd[i] = static_cast<char>(x);
            }
        }

        cout << rnd << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:56:56.173

`rnd.resize(str.size());`之后添加`cin >> str;`。`rnd`不包含任何字符，因此您需要将字符串大小调整为与`str`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T05:00:27.470

您永远不会更改 的大小`rnd`，因此它将始终为 0。当 i > rnd.size() 时设置（或获取） rnd[i] 是未定义的行为，但即使它“有效”（例如，因为您的实现使用短字符串优化和你所有的单词都很短），`str == rnd`因为它们的大小不同，所以永远不会出现这种情况。

我建议：

```
rnd.push_back('a' + rand() % 26); 
```

在初期建设中。在`while`循环内部，您可以使用`rnd[i]`，因为那时`rnd`具有正确的大小。

# powershell - 复制时PowerShell脚本中的错误

> ID：12832447
> 
> 赞同：-1
> 
> 时间：2012-10-11T04:54:08.667
> 
> 标签：powershell

我已经在这个问题上花费了几个小时，但我没有成功找到一个可行的解决方案。

这是我的问题描述：

我是powershell的新手，不知何故我读了书并编写了所需的代码，但它显示了我无法解决的错误。代码的作用是从文件夹中获取图像，并根据与文件夹中的图像纵横比（0.67、1.33、1.2）相比最接近的可用比率（0.67、1.33、1.2）将每个图像的副本放置到其他位置。

我的代码看起来或多或少是这样的：

```
[System.Reflection.Assembly]::LoadFile( "C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Drawing.dll")  

#index of minimum value
$p = [array]::IndexOf($ratioarray, $minimum)

if($p -eq 0){
$dst_dir =  $des_dir+"powershell\0.4"
if (!(Test-Path $dst_dir)) {
 # create it
 [void](new-item $dst_dir -itemType directory)
 }
Copy-Item $src_dir$image $dst_dir
}

if($p -eq 1){
$dst_dir =  $des_dir+"powershell\0.5"
if (!(Test-Path $dst_dir)) {
 # create it
 [void](new-item $dst_dir -itemType directory)
 }
Copy-Item $src_dir$image $dst_dir
}

if($p -eq 2){
$dst_dir =  $des_dir+"powershell\0.67"
if (!(Test-Path $dst_dir)) {
 # create it
 [void](new-item $dst_dir -itemType directory)
 }
Copy-Item $src_dir$image $dst_dir
}

"$name|$width|$height|$ratioroundoff|$dst_dir" >> $datafile  

     $imageFile.Dispose() 
 } 
```

它给出了错误：

```
Copy-Item : The given path's format is not supported.
At C:\Users\busy\desktop\copyflow.ps1:71 char:10
+ Copy-Item <<<<  $src_dir$image $dst_dir
+ CategoryInfo : InvalidOperation: (C:\Users\busy\D...ics2\jack.jpg:String) [Copy-Item], NotSupportedException
+ FullyQualifiedErrorId : ItemExistsNotSupportedError,Microsoft.PowerShell.Commands.CopyItemCommand 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:07:40.370

The problem seems to be with file names. `$images = Get-ChildItem -Recurse $src_dir -Include *.jpg` will populate a collection with `FileInfo` objects that already have absolute file names present. No path mangling is needed.

Instead of

```
Copy-Item $src_dir$image $dst_dir 
```

Try something like

```
Copy-Item $image.FullName $dst_dir 
```

If it still doesn't work, print output to console and check what is wrong. Like so,

```
write-host $("Copy-Item {0} {1}" -f $image.FullName, $dst_dir)
Copy-Item -whatif $image.FullName $dst_dir 
```

# android - 如何在android中的pop显示时模糊或变暗背景

> ID：12832449
> 
> 赞同：1
> 
> 时间：2012-10-11T04:54:37.627
> 
> 标签：android

我想在向用户弹出显示时模糊或变暗活动的背景，并请它弹出非对话框，所以请告诉我弹出非对话框的解决方案。我使用下面的代码来显示弹出窗口

```
popupWindow = new PopupWindow(layoutInflate, width, LayoutParams.WRAP_CONTENT);
        // popupWindow.setFocusable(true);
        // popupWindow.showAsDropDown(layoutInflate);
        //getWindow().addFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND);
        popupWindow.setOutsideTouchable(true);
        popupWindow.showAtLocation(layoutInflate, Gravity.CENTER, 0, 0); 
```

# iphone - NSArray 的范围是多少

> ID：12832452
> 
> 赞同：0
> 
> 时间：2012-10-11T04:54:48.583
> 
> 标签：iphone, xcode

我正在开发一个阅读单词应用程序，单词来自段落，我希望 NSArray 范围存储最大单词，以帮助查找 NSArray 的大小

```
 NSString *string=@"Some people say that Apple will fit an A5 chip in iphone5 with a clocking speed in range of 1.2 0r 1.5 GHz with 1 GB Ram. It is also anticipated that it will b fire proof phone.  ";
    NSArray *piecesOfOriginalString = [string componentsSeparatedByString:@" "];
    NSLog(@"%i",piecesOfOriginalString.count); 
```

这是我的简单例子。

在这里，问题是如何找到数组的最大允许大小？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T05:08:30.760

理论上，一个 NSArray 的最大尺寸由它的`-count`方法的类型来表示，即`NSUInteger`. 对于 iOS，这相当于一个`unsigned long`，因此最大计数为 4,294,967,295。

实际上，您会受到设备内存和数组中对象大小的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T06:01:08.163

如果你想细化尺寸然后
[http://lapcatsoftware.com/blog/2006/10/10/filling-an-nsmutablearray/](http://lapcatsoftware.com/blog/2006/10/10/filling-an-nsmutablearray/)

然后读一次

[NSArray 中的最大对象数量](https://stackoverflow.com/questions/2155462/maximum-amount-of-objects-in-nsarray)

您将获得 4 个或 8 个，具体取决于您使用的是 32 位还是 64 位系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:16:36.630

我认为没有最大数组大小之类的东西，它受到执行点的可用内存和数组内容的限制。您可能需要一个可变数组 (NSMutableArray) 来代替。

最大索引值取决于主机硬件和操作系统，但通常至少为 2^32-1，即 4_294_967_295。有时，当一些奇怪的人使用有符号索引时，它会下降到 2^31-1，即 2_147_483_647。通常，考虑到数组项依次分配在动态内存中，它远远超出了您的 RAM 可以容纳的容量，所以不要打扰；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:09:02.933

如果你问：“我在这个数组中有多少元素”，你写的应该可以正常工作（尽管“count”属性返回一个 NSUInteger，所以你应该使用 %li 字符串格式说明符，而不是 %i） ：

```
NSLog(@"%li",piecesOfOriginalString.count); 
```

如果您要问：“可以添加到 NSArray 的最大元素数量是多少”，这里已经讨论过这个问题：[NSArray 中的最大对象数量](https://stackoverflow.com/questions/2155462/maximum-amount-of-objects-in-nsarray)

# css - 在 joomla 页面中制作一个没有左菜单的页面（如果使用左浮动，内容会环绕左菜单）

> ID：12832453
> 
> 赞同：0
> 
> 时间：2012-10-11T04:54:53.600
> 
> 标签：css, css-float, joomla2.5

我有一个 Joomla 2.5 页面，首页应该没有左菜单，而网站的其余部分应该有一个。（我会在 joomla 论坛上问这个，但它似乎已经关闭了）

如果我这样设置我的页面（非常简单的草图）：

```
<div id="container">
<div id="left"></div>
<div id="content"></div>
</div> 
```

你一般设置左边的宽度和内容，左右浮动。

如果您只是将左侧 div 设置为向左浮动，并且没有内容 div 的宽度，我可以设置 ul 标签的样式以设置左侧 div 的宽度，因为它将扩展到 ul 宽度。但是，如果内容高于左侧菜单，这会使内容环绕左侧菜单。

做这个的最好方式是什么？是否有一个 joomla php 常量我可以读取以查看左侧菜单是否设置为显示，或者它可以以某种方式纯粹由 CSS 制作。（如果两者都存在，哪个更好？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:20:05.357

有一个简单的解决方案 - 可折叠模块位置。在 index.php 你想做这样的事情：

```
<?php if ($this->countModules('left')) : ?>
<div id="left"><jdoc:include type="modules" name="left" style="xhtml" /></div>
<?php endif; ?> 
```

这样做是检查左侧模块位置是否有任何模块。如果有，那么它会添加代码并显示模块。如果没有，它会完全跳过代码并且根本不会在页面上显示，因此您最终不会在页面上看到无用的空 div。

现在您可以使用模块管理器将模块分配给您想要的页面。任何未使用的位置都将被忽略。

# android - 单选按钮通过代码设置选中状态

> ID：12832456
> 
> 赞同：7
> 
> 时间：2012-10-11T04:55:21.910
> 
> 标签：android, radio-button

我有三个单选按钮来指定性别、男性女性和其他。我根据用户选择将这些数据保存到我的数据库中，1 个男性，2 个女性，3 个其他人。这反映在个人资料页面中，现在当我想编辑个人资料时，我想以可编辑的方式自动填充我的个人资料页面的所有字段，用户只更改他想要的字段。虽然我能够从我的数据库中获取性别的值 1、2、3，但我无法填充指定的单选按钮作为选中状态。我尝试了以下方法：

```
String M = (c.getString(c.getColumnIndexOrThrow("Gender")));
RadioGroup rb1 = (RadioGroup)findViewById(R.id.radiogroup1);

if(M.equals(1)){
    rb1.check(R.id.radiobutton3);
    RadioButton rbu1 =(RadioButton)findViewById(R.id.radiobutton3);
    rbu1.setChecked(true);
}
else if(M.equals(2)){
    rb1.check(R.id.radiobutton4);
    RadioButton rbu2 =(RadioButton)findViewById(R.id.radiobutton4);
    rbu2.setChecked(true);
}
else if(M.equals(3)){
    rb1.check(R.id.radiobutton5);
    RadioButton rbu3 =(RadioButton)findViewById(R.id.radiobutton5);
    rbu3.setChecked(true);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T04:59:59.903

你可以使用任何一个`radioButton.setChecked(true)`；或`radiobutton.setSelected(true)`；

不要给 rb1，这里的代码 rb1 指的是 RadioGroup，为单选按钮设置名称。

```
String M = "3";
RadioGroup rb1 = (RadioGroup)findViewById(R.id.radioGroup1);
RadioButton rbu1 =(RadioButton)findViewById(R.id.radio0);
RadioButton rbu2 =(RadioButton)findViewById(R.id.radio1);
RadioButton rbu3 =(RadioButton)findViewById(R.id.radio2);

if(M.equalsIgnoreCase("1"))
{
    rbu1.setChecked(true);
}
else if(M.equalsIgnoreCase("2")){

    rbu2.setChecked(true);
}
else if(M.equalsIgnoreCase("3"))
{    
    rbu3.setChecked(true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T05:10:11.060

这是设置检查。

```
radioButton.setChecked(true); 
```

这是为了获取选中的单选按钮的值

```
RadioGroup rg=(RadioGroup) findViewById(R.id.radioGroup1);

rg.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
@Override
public void onCheckedChanged(RadioGroup arg0, int id)
{
RadioButton checkedRadioButton = (RadioButton)rg.findViewById(id);

boolean isChecked = checkedRadioButton.isChecked();

if (isChecked)
{
Toast.makeText(getApplicationContext(), 
           checkedRadioButton.getText(),Toast.LENGTH_LONG).show();
}
}}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T05:01:46.357

试试这个代码：

```
radioButton.setChecked(true);

radioSexGroup = (RadioGroup) findViewById(R.id.radioSex);
int selectedId = radioSexGroup.getCheckedRadioButtonId();
rb = (RadioButton) findViewById(selectedId);
sex = rb.getText().toString().trim(); 
```

# jstree - 在 Jstree 中处理特殊字符

> ID：12832458
> 
> 赞同：1
> 
> 时间：2012-10-11T04:55:48.100
> 
> 标签：jstree

  我正在我的 Web 应用程序中构建 Jstree。我将 XML 作为数据传递给 JStree。此 XML 数据内置于服务器端（servlet）并通过 AJAX 调用填充到 Jstree 中。当 XML 响应有一些特殊/保留字符，如**&**、**'**（单引号）时，树不会被构建。任何人都可以建议解决这个问题以及如何在 Jstree 中逃脱？...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:12:06.180

使用 xml 时必须转义一些字符。`&`是其中之一。

`An ampersand (&) may be escaped numerically (&#38;) or with a general entity (&amp;)`

# xcode - PhoneGap 应用程序测试应用程序未运行给出错误

> ID：12832459
> 
> 赞同：1
> 
> 时间：2012-10-11T04:55:54.520
> 
> 标签：xcode, cordova

我已经在mac中安装了电话间隙，但是当我选择xcode项目作为电话间隙应用程序时，它里面没有www文件夹，当我运行它时，它会出现这样的错误退出箱。我正在使用 xcode 3..2.6，我也有 4 个相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:12:42.330

将 www 文件夹拖放到 Xcode 中的项目中，然后从弹出窗口中选择“为任何添加的文件夹创建文件夹引用”，然后单击“完成”。您会在 .xcodeproj 所在的位置找到 www 文件夹。

# c# - 如何使用 c# 在不同的处理器中运行线程？

> ID：12832460
> 
> 赞同：1
> 
> 时间：2012-10-11T04:55:54.870
> 
> 标签：c#, multithreading

> **可能重复：**
> [如何在不同的 CPU 内核上生成线程？](https://stackoverflow.com/questions/32343/how-do-i-spawn-threads-on-different-cpu-cores)

我正在使用 C#。我想使用线程概念编写程序。我只想知道如何在不同的处理器中运行线程。在这里我附上我的部分代码：

```
Thread t1 = new Thread(threadJobA);
Thread t2 = new Thread(threadJobB);
t1.Start();
t2.Start(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T05:27:15.087

就像我在评论中所说的那样，简短的回答是：“别担心。” 如果你不得不问这个问题，那**绝对**不值得你付出任何努力。

也就是说，*真正*做到这一点的方法是设置“线程关联掩码”，它控制允许线程在哪个逻辑处理器上运行。我不确定你甚至可以用 CLR 线程来做到这一点（它可能会爆炸，世界将会结束。）但如果你有一个普通的 ol' 线程，使用 创建[`CreateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453.aspx)，那么你可以使用设置关联掩码[`SetThreadAffinityMask`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686247.aspx)。

但真的。不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:56:09.687

为什么要接听处理器的电话？这背后的理性是什么？

它纯粹由操作系统负责将作业/任务委托给处理器。这是为了管理所有正在运行的进程/任务的执行时间。如果你有一个四核处理器，仍然没有必要总是给所有处理器相同的负载。操作系统正在管理 PCB 以在正在运行的进程之间共享可用资源。

TPL 可以很好地并行执行您的代码，明智地应用 TPL 将提高性能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T05:07:47.547

您可以简单地使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)，这将在将线程委派给 CPU 核心方面做得很好。

当您想在不同的处理器中运行线程时，您会遇到跨越“AppDomain”边界的问题。

# c++ - 使用 Qt 编辑 VBulletin 帖子

> ID：12832461
> 
> 赞同：0
> 
> 时间：2012-10-11T04:55:57.807
> 
> 标签：c++, qt, vbulletin

好吧，我想做一个自动化程序，在一定时间内用程序编辑线程。我真的不知道该怎么做，我什至不知道是否可以不使用 API。没有API可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:51:41.847

如果您问是否可以使用 qt 在论坛帖子中添加主题。如果论坛没有验证码或其他防止发帖的保护机制，这是可能的。

您需要使用 fiddler 检查登录顺序和论坛帖子，然后开发复制相同内容的 qt 代码。

但是对于初学者来说很复杂。我建议您学习如何使用 Qt 发出 POST 和 GET 请求，然后开始开发自动论坛海报。

希望能帮助到你

# memory - 使用'top'查看进程的内存使用情况

> ID：12832466
> 
> 赞同：0
> 
> 时间：2012-10-11T04:56:16.893
> 
> 标签：memory, command-line, system, pid

我的程序名为“berkut”。我想获取这个程序的 CPU 和内存使用情况，所以我使用 'top' 命令和 'pidof' ，如下所示：

```
[root#]pidof berkut
xxx

[root#]top -p xxx
(top screen is shown here) 
```

有没有一种快捷方式来组合这两个命令，以便我可以直接用系统调用调用它：**system("...");** C++ 的？

字符串传递到“系统”调用的时间并不重要，但不应过长。我手动运行程序，所以我很确定它只有 1 个 PID。这意味着在调用“pidof”时，“xxx”是唯一找到的 1 个 PID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:05:42.257

您可以执行以下操作：

```
top -p $(pidof berkut) 
```

该表达式`$(<command>)`告诉`bash`首先评估`<command>`。它与[@tozka](https://stackoverflow.com/users/1303277/tozka)``<command>``所指出的使用相同。

# asp.net - 知道是什么导致了这个 SQL/ASP.NET 登录错误吗？

> ID：12832471
> 
> 赞同：0
> 
> 时间：2012-10-11T04:56:42.850
> 
> 标签：asp.net, sql, login

症状：

如果我等待 15-20 分钟，然后尝试登录我的网站，我会收到以下堆栈跟踪/错误。如果我在大约 20 秒后点击刷新，一切正常。我真的很想让网站停止这样做。

*编辑* 我是唯一一个认为他或她在提出问题后立即解决问题的人吗？我有一个位于母版页上的 ASP SQLDataSource。我刚刚将其添加到 Selecting 事件中：

```
If Not System.Web.HttpContext.Current.User.Identity.IsAuthenticated Then
    e.Cancel = True
End If 
```

我会在大约半小时左右后发回结果 - 没有解决问题

*/编辑*

*edit_2* 这是 SQL 数据源

```
<asp:SqlDataSource ID="SQLds_ClientSearch" runat="server" ConnectionString="<%$ ConnectionStrings:meta_db_ConStr %>" SelectCommand="Select * from View_Clients WHERE (ClientName LIKE @Search + '%' OR SISAR LIKE @Search + '%') ">
       <SelectParameters>
           <asp:ControlParameter ControlID="Search_tb" Name="Search"
           PropertyName="Text" Type="String" ConvertEmptyStringToNull="False" />
       </SelectParameters>
   </asp:SqlDataSource> 
```

这是我的 web.config 下的连接

```
<connectionStrings>    
<add name="meta_db_ConStr" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\meta_db.mdf;Integrated Security=SSPI;User Instance=True" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

*/edit_2*

堆栈跟踪：

```
[SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the login process. (provider: Named Pipes Provider, error: 0 - No process is on the other end of the pipe.)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5064458
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParserStateObject.WriteSni() +5073467
   System.Data.SqlClient.TdsParserStateObject.WritePacket(Byte flushMode) +254
   System.Data.SqlClient.TdsParser.TdsLogin(SqlLogin rec) +1832
   System.Data.SqlClient.SqlInternalConnectionTds.Login(ServerInfo server, TimeoutTimer timeout, String newPassword) +320
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +161
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +239
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +123
   System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +319
   System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, String srcTable) +92
   System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +1618
   System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +21
   System.Web.UI.WebControls.DataBoundControl.PerformSelect() +143
   System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74
   System.Web.UI.WebControls.GridView.DataBind() +4
   System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +66
   System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +75
   System.Web.UI.Control.EnsureChildControls() +102
   System.Web.UI.Control.PreRenderRecursiveInternal() +42
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2496 
```

# css - css，将鼠标悬停在特定元素上时更改其他元素的背景？

> ID：12832476
> 
> 赞同：0
> 
> 时间：2012-10-11T04:56:56.600
> 
> 标签：css, hover, css-selectors

好的，首先是代码..

```
<td class="btnSaveBooking">
    <div class="btnSaveBookingContainder">
        <div id="save">
            <span class="btnImage"></span><span class="btnsavebookingspan">
                <input type="submit" style="color:White;background-color:#6086AC;border-color:White;border-width:2px;border-style:Solid;font-family:Verdana;font-size:10pt;font-weight:bold;" id="btnSaveBooking" value="" name="btnSaveBooking">
                (F8)</span></div>
    </div>![enter image description here][1]
</td> 
```

图片

*按钮**上的*普通 ![在此处输入图像描述](../Images/271b19c5ef9c9ddc4bf866b6d53f59c0.png)
OnMouseOver图像上的 OnMouseOver *![在此处输入图像描述](../Images/64c1645a388b282b897bcfc2a471a20c.png)
*![在此处输入图像描述](../Images/5e84caca7bba0914a6f121123819af11.png)**

 **如您所见，当用户将鼠标悬停*在图像上时，只有*图像的背景会发生变化，我想要的是，当用户甚至将鼠标悬停在此按钮上时，图像也会发生变化。

这是CSS

```
.btnSaveBooking {
   border-top: 1px solid #7abbde;
    background: #1776a6;
   background: -webkit-gradient(linear, left top, left bottom, from(#7ec5e8), to(#1776a6));
   background: -webkit-linear-gradient(top, #7ec5e8, #1776a6);
   background: -moz-linear-gradient(top, #7ec5e8, #1776a6);
   background: -ms-linear-gradient(top, #7ec5e8, #1776a6);
   background: -o-linear-gradient(top, #7ec5e8, #1776a6);
   padding: 2px 20px 3px 4px;
   -webkit-border-radius: 11px;
   -moz-border-radius: 11px;
   border-radius: 11px;
   -webkit-box-shadow: rgba(0,0,0,1) 0 1px 0;
   -moz-box-shadow: rgba(0,0,0,1) 0 1px 0;
   box-shadow: rgba(0,0,0,1) 0 1px 0;
   text-shadow: rgba(0,0,0,.4) 0 1px 0;
   color: #f7f7f7;
   font-size: 17px;
   font-family: Georgia, Serif;
   text-decoration: none;
   vertical-align: middle;
   }
.btnSaveBooking:hover {
   border-top-color: #000000;
   background: #7288c9;
   color: #ffffff;
   }
.btnSaveBooking:active {
   border-top-color: #3c637d;
   background: #3c637d;
   }

#save .btnImage
{
    background: url("../images/save.png") no-repeat scroll 2px 5px transparent !important;
    border-color: transparent !important;
    height: 24px;
    position: relative;
    width: 28px;
    margin: 1px 1px 1px 10px;
    padding: 4px 2px 0 20px;
}

#save .btnImage:hover
{
    background: url("../images/saveN.png") no-repeat scroll 2px 5px transparent !important;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:11:00.100

您只需要更改文本 ':hover' 在规则中出现的位置。就目前而言，img 本身需要悬停。更改规则，以便当它的父级悬停时它会更改。

IE

```
#save .btnImage:hover 
```

变成

```
.btnSaveBooking:hover .btnSaveBookingContainder .btnImage 
```

这样，图像会随着按钮背景的变化而变化。已经给出的答案为您提供了一种“两阶段”的变革方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:06:19.583

请试试这个：

```
.btnSaveBookingContainder:hover .btnImage
{
    background: url("../images/saveN.png") no-repeat scroll 2px 5px transparent !important;
    cursor:pointer;
    width:28px;
    height:31px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T06:56:18.413

从您现有的 css 中删除`#save .btnImage:hover`css，并尝试使用以下样式格式，

```
.btnSaveBooking:hover{
  /* over border, background & text color */
}
.btnSaveBooking:active
{
  /* active border, background & text color */
}

.btnSaveBooking:hover #save .btnImage{
  /* provide your hover image style */
}
.btnSaveBooking:active #save .btnImage{
  /* provide your active image style */
} 
```**

# c# - 除了for循环之外，还有另一种方法可以一次取N吗？

> ID：12832483
> 
> 赞同：6
> 
> 时间：2012-10-11T04:57:24.557
> 
> 标签：c#, linq, for-loop, iteration

有没有比这样的 for 循环更优雅的方法来一次实现 5 个项目？

```
var q = Campaign_stats.OrderByDescending(c=>c.Leads).Select(c=>c.PID).Take(23);
var count = q.Count();
for (int i = 0; i < (count/5)+1; i++)
{
   q.Skip(i*5).Take(5).Dump();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T04:58:52.623

```
for(int i = 0; i <= count; i+=5)
{
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T05:09:46.210

因此，您希望有效地`Dump()`调用`q`.

`IEnumerable<T>`您现在拥有的解决方案将在每次循环中重新迭代`for`。做这样的事情可能更有效：（我不知道你的类型是什么，所以我正在使用`T`）

```
const int N = 5;
T[] ar = new T[N];               // Temporary array of N items.
int i=0;
foreach(var item in q) {         // Just one iterator.
    ar[i++] = item;              // Store a reference to this item.
    if (i == N) {                // When we have N items,
        ar.Dump();               // dump them,
        i = 0;                   // and reset the array index.
    }
}

// Dump the remaining items
if (i > 0) {
    ar.Take(i).Dump();
} 
```

这仅使用一个迭代器。考虑到您的变量名为`q`，我假设它是“查询”的缩写，这意味着这是针对数据库的。所以只使用一个迭代器可能是非常有益的。

* * *

我可能会保留此代码，并将其包装在扩展方法中。“丛”怎么说？

```
public static IEnumerable<IEnumerable<T>> Clump<T>(this IEnumerable<T> items, int clumpSize) { 
    T[] ar = new T[clumpSize];
    int i=0;
    foreach(var item in items) {
        ar[i++] = item;
        if (i == clumpSize) {
            yield return ar;
            i = 0;
        }
    }
    if (i > 0)
        yield return ar.Take(i);
} 
```

在代码的上下文中调用它：

```
foreach (var clump in q.Clump(5)) {
    clump.Dump();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T04:59:36.477

尝试迭代 5 ！

```
for(int i = 0; i < count; i += 5) 
{
   //etc
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T05:19:54.650

使用 GroupBy 和 Zip 添加更多 LINQ：

```
 q
// add indexes
.Zip(Enumerable.Range(0, Int32.MaxValue),(a,index)=> new {Index=index, Value=a})
.GroupBy(m=>m.Index /5) // divide in groups by 5 items each
.Select(k => { 
    k.Select(v => v.Value).Dump(); // Perform operation on 5 elements
    return k.Key; // return something to satisfy Select.
}); 
```

# css - 当div内容中有一些表格时如何使div溢出

> ID：12832485
> 
> 赞同：0
> 
> 时间：2012-10-11T04:57:29.637
> 
> 标签：css, html, web

我的带有内联 css 的 html 代码：

```
<div id="ggicci_syntax_highlighter" style="border: solid 3px black; cursor: text; overflow-x: auto; width: 100%;">
    <table id="ggicci_outer_table" cellspacing="0" style="font-family:Consolas;">
        <colgroup>
            <col style="background-color: #44F;"><!-- You can set font here -->
            <col style="background-color: #f4f4f4; width: 100%;">
        </colgroup>
        <tr>
            <td></td><!-- corner -->
            <td id="ggicci_language_text" style="font-size:25px; color: #777; font-family: Arial Black;"> <!-- header -->
                C++
            </td>
        </tr>
        <tr>
            <td>
                <table id="ggicci_line_number" style="font-size: 14px; color: #DDD;"><!-- You can set style here -->
                    <tr>
                        <td>1:</td>
                    </tr>
                    <tr>
                        <td>2:</td>
                    </tr>
                    <tr>
                        <td>3:</td>
                    </tr>
                    <tr>
                        <td>4:</td>
                    </tr>
                    <tr>
                        <td>5:</td>
                    </tr>
                    <tr>
                        <td>6:</td>
                    </tr>
                    <tr>
                        <td>7:</td>
                    </tr>
                    <tr>
                        <td>8:</td>
                    </tr>
                </table>
            </td>
            <td>
                <table id="ggicci_code_body" style="font-size: 14px; width: 100%;"><!-- You can set style here -->
                    <tr>
                        <td style="background: #FFF">
                            <span style="color:#FF7700; font-weight:bold;">#include</span> &lt;iostream&gt;
                        </td>                   
                    </tr>
                    <tr>
                        <td>
                            <span style="color:blue; font-weight:bold;">using</span> namespace std;
                        </td>
                    </tr>
                    <tr>
                        <td style="background: #FFF">
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span style="color:blue; font-weight:bold;">int</span> main()
                        </td>
                    </tr>
                    <tr>
                        <td style="background:#FFF;">
                            {
                        </td>
                    </tr>
                    <tr>
                        <td>
                            &nbsp;&nbsp;&nbsp;&nbsp;std::cout &lt;&lt; <span style="color:#EB2244;">"Hello World!"</span> &lt;&lt; std::endl;<span style="color:green;">//write "Hello World!" to console............................................................</span>
                        </td>
                    </tr>
                    <tr>
                        <td style="background: #FFF">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue; font-weight:bold;">return</span> 0;</td>
                    </tr>
                    <tr>
                        <td>
                            }
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div> 
```

当 id 为“ggicci_code_body”的表格中的一行中的文本溢出时，我无法使 div 中的内容滚动。我是 css 新手，现在我正在为编程实践设计一个语法荧光笔。那么有什么解决办法吗？为什么这行不通？ ![在此处输入图像描述](../Images/80153fa5ee617248c6448317ed2dac04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T14:59:03.960

在 html 文件的开头添加 '<!doctype html>'。

# php - 简单的 Codeigniter 表单验证

> ID：12832491
> 
> 赞同：4
> 
> 时间：2012-10-11T04:57:59.440
> 
> 标签：php, codeigniter

我的登录表单中有这样的问题

![在此处输入图像描述](../Images/62cf720261110ec27b6e8e2aa6d49cf1.png)

我想在每个字段旁边显示一个单独的错误

这是控制器

```
function index()
{      
        $this->form_validation->set_rules('username','Username','trim|required|exact_length[4]|xss_clean');
        $this->form_validation->set_rules('password','Password','trim|required|min_length[4]|max_length[40]|xss_clean|callback_login');
        $this->form_validation->set_rules('jabatan','Jabatan','trim|required|xss_clean');

        if($this->form_validation->run() == false)
        {
            $this->load->view('login');
        }
        else
        {
            $this->load->view('welcome_message');
        }

}

function login()
{
    $username = $this->input->post('username');
    $password = $this->input->post('password');
    $jabatan = $this->input->post('jabatan');

    $value = $this->m_login->login($username,$password,$jabatan);

    if($value)
    {
        return true;
    }
    else
    {
        $this->form_validation->set_message('login', 'password salah');
        //delete redirect() and showing blank white screen
        return false;

    } 
```

我做了`<?php echo form_error(); ?>`每个领域的旁边

```
<?php echo form_open('c_login/login'); ?>
            <table>
                <tr>
                    <td>Username</td>
                    <td><?php $inusername=array('name' => 'username', 'class' => 'GUI'); echo form_input($inusername); ?></td>
                    <td class="error"><?php echo form_error('username'); ?></td>
                </tr>

                <tr>
                    <td>Password</td>
                    <td><?php $inpassword=array('name' => 'password', 'class' => 'GUI', 'type' =>'password'); echo form_input($inpassword); ?></td>
                    <td class="error"><?php echo form_error('password'); echo $this->session->flashdata('login'); ?></td>
                </tr>

                <tr>
                    <td>Jabatan</td>
                    <td><?php $injabatan=array('keuangan' => 'keuangan', 'admin' => 'admin', 'hd' => 'head divisi', 'direktur' => 'direktur'); echo form_dropdown('jabatan',$injabatan,'keuangan','class = "gui"'); ?></td>
                    <td class="error"><?php echo form_error('jabatan'); ?></td>
                </tr>

                 <tr>
                    <td></td>
                    <td><?php $insubmit=array('name' =>'login','class' =>'button','value' => 'Login'); echo form_submit($insubmit); echo nbs(); $inreset=array('name' =>'reset','class' =>'button','value' => 'Hapus'); echo form_reset($inreset); ?></td>
                    <td class="error"><?php echo form_error(); ?></td>
                </tr>
            </table>
            <?php echo form_close(); ?> 
```

当我在and字段留空的情况下单击登录时，为什么该`form_error()`功能没有任何功能？`echo``username``password`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:46:05.263

您知道验证中的问题您正在检查类的 index 方法中的验证，而不是类的登录方法中的验证，并且在您的表单中，您已经对 ci_login/login 方法执行了操作，如果登录失败，该方法将重定向并且其清除表单验证验证您在登录方法上的字段也将所有错误消息放入会话和显示中，我对脚本进行了一些更改，在此链接上查看[代码已修改](http://scrp.at/bPy)

对于此更改，您必须使用 url helper

```
function index()
{
    $this->form_validation->set_rules('username','Username','trim|required|exact_length[4]|xss_clean');
    $this->form_validation->set_rules('password','Password','trim|required|min_length[4]|max_length[40]|xss_clean|callback_login');
    $this->form_validation->set_rules('jabatan','Jabatan','trim|required|xss_clean');

    if($this->form_validation->run() == false)
    {
        $this->load->view('login');
    }
    else
    {
        //to check if the validation run correctly
        //$this->load->view('welcome_message');

        $username = $this->input->post('username');
        $password = $this->input->post('password');
        $jabatan = $this->input->post('jabatan');

        $value = $this->m_login->login($username,$password,$jabatan);

        if($value)
        {
            redirect('welcome_message');
            //return true;
        }
        else
        {
            $this->form_validation->set_message('login', 'password salah');
            redirect('c_login',$login); //i want to pass $login into login form, then print
            return false;               //them as a form_error

        }
    }

}

<?php echo form_open(uri_string()); ?>
<table>
    <tr>
        <td>Username</td>
        <td><?php $inusername=array('name' => 'username', 'class' => 'GUI'); echo form_input($inusername); ?></td>
        <td class="error"><?php echo form_error('username'); ?></td>
    </tr>

    <tr>
        <td>Password</td>
        <td><?php $inpassword=array('name' => 'password', 'class' => 'GUI', 'type' =>'password'); echo form_input($inpassword); ?></td>
        <td class="error"><?php echo form_error('password'); echo $this->session->flashdata('login'); ?></td>
    </tr>

    <tr>
        <td>Jabatan</td>
        <td><?php $injabatan=array('keuangan' => 'keuangan', 'admin' => 'admin', 'hd' => 'head divisi', 'direktur' => 'direktur'); echo form_dropdown('jabatan',$injabatan,'keuangan','class = "gui"'); ?></td>
        <td class="error"><?php echo form_error('jabatan'); ?></td>
    </tr>

     <tr>
        <td></td>
        <td><?php $insubmit=array('name' =>'login','class' =>'button','value' => 'Login'); echo form_submit($insubmit); echo nbs(); $inreset=array('name' =>'reset','class' =>'button','value' => 'Hapus'); echo form_reset($inreset); ?></td>
        <td class="error"><?php echo form_error(); ?></td>
    </tr>
</table>
<?php echo form_close(); ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T03:44:24.483

## `index`不会执行`login`。

如果出现，您可能认为这些`set_rules()`功能会在您提交表单时执行。他们不会。表单将提交到`'c_login/login'`，这是您的控制器`login()`内部的功能。`c_login`

您需要将表单验证逻辑移动到`login()`中，并且`index()`第一次回显视图。

## 你的控制器

```
function index(){      
    $this->load->view('login');
}

function login(){
    $this->form_validation->set_rules('username','Username','trim|required|exact_length[4]|xss_clean');
    $this->form_validation->set_rules('password','Password','required|xss_clean|correct');
    $this->form_validation->set_rules('jabatan','Jabatan','trim|required|xss_clean');

    if($this->form_validation->run() == false){
        //your validation messages will be taken care of.
        $this->load->view('login');
    }
    else{
        $p = $this->input->post();
        if($this->m_login->login($p['username'],$p['password'],$p['jabatan'])){
            //redirect() user to logged in area.
        }
        else{
            $this->form_validation->set_message('login', 'password salah');
            $this->load->view('login');
        }
    }
} 
```

此外，您不应该修剪密码。空格字符是密码中完全有效的后缀或前缀。我已经`trim`为你删除了。我还删除了`min_length`and `max_length`。这是您想在注册页面上强制执行的内容，您确定它真的在登录页面上增加了任何价值吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T05:02:37.343

您需要为 form_error() 提供以下字段：

```
<?php echo form_error('username'); ?> 
```

[在此处查看更多详细信息](http://codeigniter.com/user_guide/libraries/form_validation.html#individualerrors)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T05:22:23.103

在我看来，您对这些事情的运作方式有很大的误解。首先，您不需要`redirect()`调用 in `login()`。这些`redirect()`函数会将用户重定向到另一个页面，并且由于 CodeIgniter 和 PHP 在页面请求之间都没有保留对象，因此您将丢失所有内容（例如表单验证对象及其错误消息）。

此外，您可能希望`login()`使用下划线 ( `_`) 作为该方法的前缀，这样任何人都无法通过 HTTP 请求访问它。

您可能应该将表单提交给`index()`方法而不是`login()`. 然后，确保只对`POST`请求运行验证。

```
function index()
{
    if ($_POST)
    {
        // run validation here
    }

    // ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-15T05:40:30.840

```
**Simple form validation, image upload and captcha using codeigniter libraries**
<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Login extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('Loginmodel');

    }
    public function index()
    {
        $config = array(
            'img_path'      => 'uploadss/',
            'img_url'       => base_url().'uploadss/',
            'font_path'     => base_url().'system/fonts/texb.ttf',
            'img_width'     => '200',
            'img_height'    => 90,
            'word_length'   => 3,
            'font_size'     => 25
        );
        $captcha = create_captcha($config);

        // Unset previous captcha and set new captcha word
        $this->session->unset_userdata('captchaCode');
        $this->session->set_userdata('captchaCode', $captcha['word']);

        // Pass captcha image to view
        $fetch['captchaImg'] = $captcha['image'];

        $fetch['data'] = $this->Loginmodel->alldata();
        $this->load->view('login',$fetch);
    }

    public function loginerror()
    {
        $this->form_validation->set_rules('fname','first name','required|alpha');
        $this->form_validation->set_rules('lname','last name', 'required');
        $this->form_validation->set_rules('mobile', 'Mobile', 'required|numeric');
        $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email');
        $this->form_validation->set_rules('password', 'Password', 'required');
        $this->form_validation->set_rules('companyname', 'Companyname', 'required');
        $this->form_validation->set_rules('designation', 'Designation', 'required');
        $this->form_validation->set_rules('companysize', 'Companysize', 'required|numeric');

        if($this->form_validation->run())
        {
            $inputCaptcha = $this->input->post('captcha');
            $sessCaptcha = $this->session->userdata('captchaCode');
            if($inputCaptcha === $sessCaptcha)
            {
                echo 'Captcha code matched.';

                    $fname = $this->input->post('fname');
                    $lname = $this->input->post('lname');
                    $mobile = $this->input->post('mobile');
                    $email = $this->input->post('email');
                    $password = $this->input->post('password');
                    $companyname = $this->input->post('companyname');
                    $designation = $this->input->post('designation');
                    $companysize = $this->input->post('companysize');

                    $checkmobile = $this->Loginmodel->checkmobile($mobile,$email);

                    if($checkmobile)
                    {
                        $this->session->set_flashdata("danger","Mobile Number or Email exist.....");
                        return redirect('Login/index'); 
                    }
                    else
                    {
                        $insertdata = $this->Loginmodel->insert($fname,$lname,$mobile,$email,$password,$companyname,$designation,$companysize);
                        $this->session->set_flashdata("success","Record Inserted");
                        return redirect('Home/indexhome');
                    }   
                // }
                // else
                // {
                //  $this->session->set_flashdata("danger","Please fill all the values properly");
                //  $this->index();
                // }
            }
            else
            {
                echo 'Captcha code does not match, please try again.';
                $this->index();
            }
        }
        else
        {
            $this->session->set_flashdata("danger","Please fill all the values properly");
            $this->index();
        }
    }

    public function refresh(){
        // Captcha configuration
        $config = array(
            'img_path'      => 'uploadss/',
            'img_url'       => base_url().'uploadss/',
            'font_path'     => base_url().'system/fonts/texb.ttf',
            'img_width'     => '200',
            'img_height'    => 90,
            'word_length'   => 3,
            'font_size'     => 25
        );
        $captcha = create_captcha($config);

        $this->session->unset_userdata('captchaCode');
        $this->session->set_userdata('captchaCode',$captcha['word']);

        echo $captcha['image'];
    }

    public function upload($id)
    {
        if(!empty($_FILES['imagename']['name']))
        {
                $config['upload_path'] = 'uploadss/';
                $config['allowed_types'] = 'jpg|jpeg|png|gif';
                $config['file_name'] = $_FILES['imagename']['name'];

                $this->load->library('upload',$config);
                $this->upload->initialize($config);

                if($this->upload->do_upload('imagename'))
                {
                    $uploadData = $this->upload->data();
                    $imagename = $uploadData['file_name'];
                }
                else
                {
                    echo "not upload";
                }
        }
        else
        {
            echo "error";
        }
        $this->load->view('uploadimage');
    }

    public function uploadimageerror()
    {
        if(!empty($_FILES['imagename']['name']))
        {
                $config['upload_path'] = 'uploadss/';
                $config['allowed_types'] = 'jpg|jpeg|png|gif';
                $config['file_name'] = $_FILES['imagename']['name'];

                $this->load->library('upload',$config);
                $this->upload->initialize($config);

                if($this->upload->do_upload('imagename'))
                {
                    $uploadData = $this->upload->data();
                    $imagename = $uploadData['file_name'];
                }
                else
                {
                    echo "not upload";
                }
        }
        else
        {
            echo "error";
        }
    }

    public function deletedata($id)
    {
        $dele = $this->Loginmodel->delete($id);
        return redirect('Login/index');
    }
}
?> 
```

# ruby-on-rails - 强制更新 ActiveRecord 关联

> ID：12832493
> 
> 赞同：0
> 
> 时间：2012-10-11T04:58:30.077
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3, activerecord

我有一个自引用循环，它引用最近的关联记录以查看它是否被赶上。但是，它一直引用第一个关联记录，因此它一直处于无限循环中。我认为这是因为 ActiveRecord 事务在整个循环中一直运行，所以它永远不会停止并更新自己。

有什么方法可以强制模型在继续之前自行重置？

这是我的模型（并不是说异常引发只是为了验证我们是否真的进入了下一个记录）。

```
class RecurringRule < ActiveRecord::Base
  belongs_to :organization
  has_one :last_run, :class_name => "Transaction", :order => 'id DESC'
  has_many :transactions

  attr_accessible :period, :last_run_id

  after_create :destroy_if_period_empty

  def destroy_if_period_empty
    if !period?
      self.destroy
    end
  end

  def recur
    @count = @count || 0
    if @count > 0 then raise last_run.id.to_s end
    if last_run.created_at.to_date.advance(period.pluralize.to_sym => 1) >= Date.today 
      new = Transaction.new({
        amount: last_run.amount,
        person_id: last_run.person_id,
        organization_id: last_run.organization_id,
        recurring_rule_id: last_run.recurring_rule_id
      })
      new.save!
      @count += 1
      self.recur
    end
    return @count
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:44:29.953

你可以试试

```
Model.association(force_reload=true) 
```

请参阅[此处](http://guides.rubyonrails.org/association_basics.html#belongs_to-association)以供参考（它也适用于有很多关系）

# jquery - 如何在 jquery ui 对话框中的两组按钮之间切换

> ID：12832507
> 
> 赞同：1
> 
> 时间：2012-10-11T04:59:48.753
> 
> 标签：jquery, jquery-ui, jqgrid

我有一个 jquery ui 对话框，它在初始加载时显示一组按钮（比如“添加”和“关闭”按钮）。稍后当我做某事时，我会显示另一组按钮（例如，当单击“添加”按钮时，我会删除现有按钮并显示“保存”和“清除”按钮）。同样，当我单击其他内容时，我会显示初始按钮集。

我正在寻找一种在我的 jquery ui 对话框中处理此按钮集切换的简单方法。

*目前我在任何我想要的地方调用按钮定义，但我认为这不是这样做的方式。期待您的建议...

`jQuery("#myDia").dialog({buttons: [{text:"Add", click: function() { add();}}, {text:"Close", click: function() {close();}}] });`

和

`jQuery("#myDia").dialog({buttons: [{text:"Save", click: function() { save();}},{text:"Clear", click: function() {clear();}}] });`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:31:53.557

您可以在按钮数组中定义按钮列表。前任：

```
var buttonOpts = {}; buttonOpts["Add"] = function () {
    add(); }; buttonOpts["Save"] = function () {
    save(); }; buttonOpts["Clear"] = function () {
    clear(); }; 
```

然后，当您需要时，您可以使用该`option`方法更改或切换按钮列表，如下所示：

```
$("#myDia").dialog('option', 'buttons', buttonOpts); 
```

jQuery UI 对话框参考：[http ://api.jqueryui.com/dialog/#method-option](http://api.jqueryui.com/dialog/#method-option)

这是一个工作小提琴：http: [//jsfiddle.net/nGUrw/6/](http://jsfiddle.net/nGUrw/6/)

# jms - 使用 JMS 和 QPID 设计队列

> ID：12832512
> 
> 赞同：1
> 
> 时间：2012-10-11T05:00:16.240
> 
> 标签：jms

我目前的任务是编写一个应用程序，该应用程序将使用 JMS API 使用 Apache qpid 作为 JMS 提供程序进行通信。

所以基本上我的应用程序将运行一个服务器的多个实例。每个服务器将服务于一组独特的办公桌。所以每个实例将只有它所服务的办公桌的数据。

还将有多个客户端实例，每个实例都由桌面再次配置。

现在，当客户端启动时，它将请求它正在为服务器提供服务的桌面的数据。请求应该只发送到加载了该桌面数据的服务器，并且响应应该只返回给请求数据的客户端为那张桌子。

我正在考虑为此使用队列。我不确定是否应该只创建一个将由所有服务器使用的请求队列，或者我应该为每台服务器创建单独的队列。

为了响应，我计划使用临时队列。

并不是说从客户端到服务器的请求不是很频繁。假设每个客户端每天可能发送大约 50 个请求。

有人可以告诉我这是否是一个好的设计吗？

# selenium-ide - 当我们从一页移动到另一页时，为什么 selenium ide 不记录？

> ID：12832515
> 
> 赞同：0
> 
> 时间：2012-10-11T05:00:48.853
> 
> 标签：selenium-ide

我有一个功能要测试。在第 1 页上，我必须输入我的用户名和密码。然后点击登录按钮。然后用户登录并进入新页面。一旦我们移动到新页面，Selenium 就不会记录任何内容。如果我愿意，我必须再次在这个新页面中打开 selenium，然后进行 strt 录制。

这阻止了我记录完整的流程。selenium 是否有任何特定命令来读取新页面并继续录制

请帮助我。怎么录音

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:43:58.003

而是尝试使用 Selenium Web-Driver，您可以在其中做这些事情，有关更多信息，请参阅 Stack Overflow 上的这个问题 - “使用 selenium Webdriver 切换选项卡”。

还是您仍想通过 IDE 实现这一目标？

# zeromq - CORBA 和 MOM 集成

> ID：12832520
> 
> 赞同：0
> 
> 时间：2012-10-11T05:01:23.480
> 
> 标签：zeromq, corba, mom

1.  我可以将诸如 ZeroMQ 之类的面向消息的中间件与 CORBA 集成在一起吗？TAO可以吗？

2.  CORBA 消息服务是否与 MOM 提供的消息队列服务一样 - ZMQ /RabbitMQ..？

我在哪里可以获得与此相关的信息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T08:36:19.767

1.  不
2.  不

您应该阅读 CORBA 和 ZeroMQ 的初学者指南。使用您选择的搜索引擎。

# ios - 如何动态输入数据到自定义调用

> ID：12832521
> 
> 赞同：1
> 
> 时间：2012-10-11T05:01:27.937
> 
> 标签：ios, dynamic, mapkit, custom-view

我有一个带有自定义标注视图的自定义图钉。我希望动态地将数据（即来自服务器的数据）放到标注视图中。任何关于如何开始的帮助将不胜感激，因为我不知道从哪里开始

# android - 如何读取存储在android数据/数据目录中的sqlite文件

> ID：12832523
> 
> 赞同：0
> 
> 时间：2012-10-11T05:01:37.033
> 
> 标签：android, sqlite, ormlite

在我的 android 应用程序中，我`"data/data/com.mypackage/databases"`在运行时将 sqlite 数据库文件复制到。

我正在使用 ormlite 进行数据库操作，但我无法执行任何数据库操作（例如插入、检索、删除），因为它没有从 sqlite 文件中获取任何表。

但是，当我将该文件复制到我的 SDCard 中时，一切正常。我已经验证该文件确实被复制到了`"data/data/com.mypackage/databases"`，就是这种情况。

有人知道如何在 android 应用程序中使用 ormlite 读取存储在 data/data 目录中的 sqlite 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:06:43.717

从数据/数据文件夹中选择您的文件并将数据库文件拉到您电脑的任何位置，然后使用 Firefox SQLite Manager 打开它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:25:17.677

首先，如果您想从设备中读取数据/数据文件夹，除非您的手机已植根，否则这是不可能的。

第二件事，如果你想在你的模拟器的数据/数据中查看数据库，请按照以下步骤操作：

1.  转到 DDMS 透视图。
2.  选择数据/数据/你的包名/数据库/你的数据库名
3.  在顶部选择它，您可以找到两个选项，其中一个是拉您的文件。
4.  将文件保存在计算机中的某个位置。
5.  通过谷歌搜索下载sqlite浏览器。
6.  使用 sqlite 浏览器，您可以访问您的数据库。

希望能帮助到你。

# javascript - 使用 html 页面加载 Div 包含框架

> ID：12832534
> 
> 赞同：0
> 
> 时间：2012-10-11T05:02:17.313
> 
> 标签：javascript, jquery, html, css

我想通过javascript加载一个在div中包含2个框架的html页面。我在 div 中加载 html 资源的代码是

```
 Util.importResource("my_div_id", 'docs/admin/index.html'); 
```

在 div 中加载资源的函数。

```
Util={
importResource: function(divId, resourcePath, appender) {

    $("div#" + divId).load(resourcePath, function(resp, stat, req) {
        if(req.status <= 0 || req.status >= 400) {
            window.location.reload();
            return; 
        }
        if (typeof(appender) != "undefined" && appender != null)
        {
            resp += appender;
            $("div#" + divId).append(appender);
        }
    });
}, 
```

}

但该特定页面未显示在 div rest 普通 html 页面加载正常。我的 HTML 页面看起来像

```
<html>
<head>
    <title>asd</title>
</head>
<frameset cols="20%,*" style="border:0px solid #000000; background-color:#ffffff;"     frameborder="1">

    <frame name="toclist" title="content" src="toc.html" scrolling="auto"></frame>

    <frame name="bsscright" title="page" src="hr/title_page.html" scrolling="auto"></frame>

</frameset>
</html> 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:06:20.567

我想你想追加`resp + appender`.

```
....
if (typeof(appender) != "undefined" && appender != null)
    {
        resp += appender;
        $("div#" + divId).append(resp );
    }
  else{
       $("div#" + divId).append(resp );
   }
..... 
```

# html - 如何在此现有代码中将顶部边框图像添加到我的 mainContent div？

> ID：12832537
> 
> 赞同：1
> 
> 时间：2012-10-11T05:02:36.220
> 
> 标签：html, css

我尝试创建 3 个 div 以将顶部和底部边框图像添加到我的 mainContent div，但我无法使其对齐。是否有一种简单的方法来修改此代码以在主要白色部分的顶部和底部添加此蓝色边框？

[http://www.charissasantos.la/mezcaleria.html](http://www.charissasantos.la/mezcaleria.html)

此处所需边框效果的图像：http: [//www.charissasantos.la/img/shot.png](http://www.charissasantos.la/img/shot.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:16:30.150

.............***[现场演示](http://tinkerbin.com/K1sx8yCA)***

嗨，现在已经习惯了这个 css 作为你的边框`mainContent`

```
 #mainContent.grid_14 {
border-top:solid 10px;
border-bottom:solid 10px;
border-width:10px;
border-image:url("http://www.norabrowndesign.com/css-experiments/images/border3.png") 25% repeat ;
-webkit-border-image:url("http://www.norabrowndesign.com/css-experiments/images/border3.png") 25% repeat ;
-moz-border-image:url("http://www.norabrowndesign.com/css-experiments/images/border3.png") 25% repeat ;
    } 
```

***[现场演示](http://tinkerbin.com/K1sx8yCA)***

*****[有关图像边框链接](http://css-tricks.com/understanding-border-image/)*****的更多信息****

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:16:51.447

实际上，对于您想要的结果，您必须使用`pseudo class` `:before & :after`下面提到的演示：- [http://tinkerbin.com/7MrKH9Zz](http://tinkerbin.com/7MrKH9Zz)

**HTML**

```
<div id="mainContent">
asfdasdfafafafaf
</div> 
```

**CSS**

```
#mainContent {
    background:white;
    margin-top: 15px;
    width:500px;
    height:500px;
    position:relative;
    border:1px solid red;
}

#mainContent:before {
    background:url(http://i.imgur.com/lPj6H.png) no-repeat 0 0;
    position:absolute;
    content:"";
    width:500px;
    height:7px;
    top:-8px;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:18:28.080

除了这些答案之外，您还可以将相同的答案应用于`background`您的`#footer`和`#mainContent`选择器。

例如;

```
#footer {
  background-image: url(img/img-blue-border.png);
  background-color: #C39C5B;
  background-repeat: repeat-x;
  background-position: top;
  text-align: left;
  font-size: 11px;
  padding: 15px 0;
}
#mainContent {
  margin-top: 15px;
  padding-bottom: 20px;
  background-image: url(img/img-blue-border.png);
  background-color: #fff;
  background-position: top;
  background-repeat: repeat-x;
} 
```

[这里的工作示例](http://jmeas.com/projects/so/guel/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:19:53.433

使用这个结构：

```
<div class="wrapper">
<div class="border"></div>
<div class="content"></div>
<div class="border"></div>
</div>

// CSS

.wrapper div {
clear:both;
}

.border {
 width:100%;
 margin:0;
 padding:0;
 height: //height of image;
 background-image:url(image.png);
 background-repeat:repeat-x;
} 
```**

# wordpress - 如何将图像添加到 Wordpress 自定义菜单小部件

> ID：12832543
> 
> 赞同：1
> 
> 时间：2012-10-11T05:03:25.623
> 
> 标签：wordpress, widget

我在 /wp-includes/default-widgets.php 下找到了自定义菜单小部件的代码。我想要做的是在菜单 UL 顶部添加一个静态图像。我已经垂直制作了列表，我想在小部件标题之后和列表之前放置一张图片，但我对 PHP 知之甚少。

这是自定义菜单小部件的代码：

```
`/**
* Navigation Menu widget class
*
* @since 3.0.0
*/
class WP_Nav_Menu_Widget extends WP_Widget {

function __construct() {
$widget_ops = array( 'description' => __('Use this widget to add one of your custom menus as a widget.') );
parent::__construct( 'nav_menu', __('Custom Menu'), $widget_ops );
}

function widget($args, $instance) {
// Get menu
$nav_menu = ! empty( $instance['nav_menu'] ) ? wp_get_nav_menu_object( $instance['nav_menu'] ) : false;

if ( !$nav_menu )
return;

$instance['title'] = apply_filters( 'widget_title', empty( $instance['title'] ) ? '' : $instance['title'], $instance, $this->id_base );

echo $args['before_widget'];

if ( !empty($instance['title']) )
echo $args['before_title'] . $instance['title'] . $args['after_title'];

wp_nav_menu( array( 'fallback_cb' => '', 'menu' => $nav_menu ) );

echo $args['after_widget'];
}

function update( $new_instance, $old_instance ) {
$instance['title'] = strip_tags( stripslashes($new_instance['title']) );
$instance['nav_menu'] = (int) $new_instance['nav_menu'];
return $instance;
}

function form( $instance ) {
$title = isset( $instance['title'] ) ? $instance['title'] : '';
$nav_menu = isset( $instance['nav_menu'] ) ? $instance['nav_menu'] : '';

// Get menus
$menus = get_terms( 'nav_menu', array( 'hide_empty' => false ) );

// If no menus exists, direct the user to go and create some.
if ( !$menus ) {
echo '<p>'. sprintf( __('No menus have been created yet. Create some.'), admin_url('nav-menus.php') ) .'</p>';
return;
}
?>
<p>
<label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title:') ?></label>
<input type="text" class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" value="<?php echo $title; ?>" />
</p>
<p>
<label for="<?php echo $this->get_field_id('nav_menu'); ?>"><?php _e('Select Menu:'); ?></label>
<select id="<?php echo $this->get_field_id('nav_menu'); ?>" name="<?php echo $this->get_field_name('nav_menu'); ?>">
<?php
foreach ( $menus as $menu ) {
$selected = $nav_menu == $menu->term_id ? ' selected="selected"' : '';
echo '<option'. $selected .' value="'. $menu->term_id .'">'. $menu->name .'</option>';
}
?>
</select>
</p>
<?php
}
} 
```

[示例图片](http://picpaste.com/imagehere-74PDqcOC.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:25:11.577

永远不要编辑核心文件......永远！/拍手腕。

`<li>`如果你想这样做，你可以在第一个标题的顶部或底部添加一些填充（~100px） 。然后为 div 设置背景，例如

```
.custom-menu { background: url(your-image.png) center 5px no-repeat; } /*note no-repeat*/ 
```

或者，如果您希望图像可点击，请忽略我刚刚告诉您的所有内容，然后：

在自定义菜单菜单中创建一个新的第一个菜单项。获取该特定类的类并为其添加类似的样式

```
.the-li-you-want { width: 200px; height: 100px; text-indent: -999px; /*hide the text on it*/ background: url(your-image.png) no-repeat; } 
```

# xslt - 如何使用 xslt1.0 合并两个 xml 文件？

> ID：12832545
> 
> 赞同：0
> 
> 时间：2012-10-11T05:03:47.177
> 
> 标签：xslt, xslt-1.0

文件1.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>  
<catalog>
  <data>
    <title>Title1</title>
    <description>Description1</description>
    <myid>1</myid>
  </data>    
  <data>
    <title>Title2</title>
    <description>Description2</description>
    <myid>2</myid>
  </data>
</catalog> 
```

文件2.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
  <data>
    <author>Author1</author>
    <date>12/34/5678</date>
    <myid>1</myid>
  </data>
  <data>
    <author>Author2</author>
    <date>87/65/4321</date>
    <myid>2</myid>
  </data>
</catalog> 
```

需要使用 xslt1.0 进行如下输出

```
<catalog>
  <data>
    <title>Title1</title>
    <description>Description1</description>
    <myid>1</myid>
    <author>Author1</author>
    <date>12/34/5678</date>
  </data>    
  <data>
    <title>Title2</title>
    <description>Description2</description>
    <myid>2</myid>
    <author>Author2</author>
    <date>87/65/4321</date>
  </data>
</catalog> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:24:52.527

您需要使用[document()](http://www.w3.org/TR/xslt#function-document)函数，如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="no"/>

  <xsl:template match="/">
    <catalog>
      <!-- Apply to all data elements in file 1 -->
      <xsl:apply-templates select="document('file1.xml')/catalog/data" />
    </catalog>
  </xsl:template>

  <xsl:template match="data">
    <data>
      <!--Use myid as a lookup-->
      <xsl:variable name="myId" select="myid/text()" />
      <!--copy all data child nodes from file1-->
      <xsl:copy-of select="@* | node()"/>
      <!--copy all data child nodes from file2, excluding myid as we already have it-->
      <xsl:copy-of select="document('file2.xml')/catalog/data[myid=$myId]/*[not(local-name()='myid')]"/>
    </data>
  </xsl:template>
</xsl:stylesheet> 
```

# ruby-on-rails - Simple_Form 与 has_many 的关联：通过额外的字段

> ID：12832546
> 
> 赞同：13
> 
> 时间：2012-10-11T05:03:49.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, has-many-through, simple-form

我有两个模型，开发人员和任务，

```
class Developer < ActiveRecord::Base
  attr_accessible :address, :comment, :email, :name, :nit, :phone, :web
  has_many :assignments
  has_many :tasks, :through => :assignments
end

class Task < ActiveRecord::Base
  attr_accessible :description, :name, :sprint_id, :developer_ids
  has_many :assignments
  has_many :developers, :through => :assignments
end

class Assignment < ActiveRecord::Base
  attr_accessible :accomplished_time, :developer_id, :estimated_time, :status, :task_id
  belongs_to :task
  belongs_to :developer
end 
```

我通过添加分配表来处理关系，因此我可以将许多开发人员特别添加到一项任务中，现在我还希望能够操作我添加到连接表中的其他字段，例如“estimated_time”，“完成时间'......等等......我在Simple_form上得到的是`

```
<%= simple_form_for [@sprint,@task], :html => { :class => 'form-horizontal' } do |f| %>
  <%= f.input :name %>
  <%= f.input :description %>
  <%= f.association :developers, :as => :check_boxes %>

  <div class="form-actions">
    <%= f.button :submit, :class => 'btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                project_sprint_path(@sprint.project_id,@sprint), :class => 'btn' %>
  </div>
<% end %>` 
```

这仅允许我选择开发人员，我希望能够在那里修改estimated_time 字段。

有什么建议么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-15T21:58:18.067

我喜欢 simple-form 有关联助手的方式，在某些情况下让它变得非常容易。不幸的是，你想要的只是简单的形式无法解决。

您必须为此创建`assignments`工作。

有两种可能的方法。

对于两者，您都必须将以下内容添加到您的模型中：

```
class Task
  accepts_nested_attributes_for :assignments
end 
```

请注意，如果您正在使用`attr_accesible`，您还应该添加`assignments_attributes`到它。

## 简单的方法

假设您知道 a 最多有多少个任务`task`。为简单起见，假设为 1。

在你的控制器中，写

```
def new
  @task = Task.build
  @task.assignments.build
end 
```

这将确保有一项新任务。

在你看来写：

```
= simple_form_for [@sprint,@task], :html => { :class => 'form-horizontal' } do |f| 
  = f.input :name 
  = f.input :description 

  = f.simple_fields_for :assignments do |assignment|
    = assignment.association :developer, :as => :select
    = assignment.estimated_time

  .form-actions
    = f.button :submit, :class => 'btn-primary'
    = link_to t('.cancel', :default => t("helpers.links.cancel")),
                project_sprint_path(@sprint.project_id,@sprint), :class => 'btn' 
```

这种方法的问题是：如果您想要超过 1、2 或 3 个怎么办？

## 使用茧

[Cocoon](https://github.com/nathanvda/cocoon)是一个允许您创建动态嵌套表单的 gem。

你的观点会变成：

```
= simple_form_for [@sprint,@task], :html => { :class => 'form-horizontal' } do |f| 
  = f.input :name 
  = f.input :description 

  = f.simple_fields_for :assignments do |assignment|
    = render `assignment_fields`, :f => assignment
  .links
    = link_to_add_association 'add assignment', f, :assignments

  .form-actions
    = f.button :submit, :class => 'btn-primary'
    = link_to t('.cancel', :default => t("helpers.links.cancel")),
                project_sprint_path(@sprint.project_id,@sprint), :class => 'btn' 
```

并定义一个 partial `_assignment_fields.html.haml`：

```
.nested_fields
  = f.association :developer, :as => :select
  = f.estimated_time
  = link_to_remove_association 'remove assignment', f 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T01:44:56.543

问题是通过使用这个：

```
<%= f.association :developers, :as => :check_boxes %> 
```

您实际上只是设置了 developer_ids 属性，它会自动为您构建分配，因为它有很多 :through。为此，我相信您可能应该为每个作业使用嵌套属性，并且每条记录都会有一个选择框或类似的东西来为该任务中的特定作业选择相关开发人员。这与 Cojones 的回答非常相似，但您不应该为此关联使用复选框，因为您将处理包含单个开发人员的单个任务。使用嵌套属性，您应该能够创建任意数量的分配。

我相信这是最简单的开始方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T09:44:29.177

我认为它应该看起来像这样：

```
= f.simple_fields_for :assignments do |fa|
  = fa.association :developer, as: :check_boxes
  = fa.input :estimated_time
  ... 
```

# c# - 比较数组并返回相似度图 C#

> ID：12832550
> 
> 赞同：0
> 
> 时间：2012-10-11T05:04:17.577
> 
> 标签：c#, arrays, compare

我试图返回一个代表两个数组之间相似性的数字。
IE ：

```
Array1: {Katy, Jenny, Sarah, Ben, Jill, Tina} 
Array2: {Katy, John, Sam, Ben, Jill, Linda} 
```

我想返回数字 3，因为三个比较是正确的。这可能吗？我想不出任何可以为我做这件事的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T05:08:04.173

这就是您可以计算匹配索引中相等的项目数量的方法。

```
var c = arr1.Where((x, i) => x.Equals(arr2[i])).Count(); 
```

请注意，您可能希望确保不要尝试访问超出范围的索引中的 arr2：

```
var c = arr1.Take(arr2.Length).Count(...); 
```

如果您不关心索引位置，则应使用 nemesv 的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T06:06:21.027

有很多方法可以做到这一点。由于其他人已经指定了几种方法，我将尝试发布一种不同的方法来做同样的事情。

如果您考虑基于索引进行匹配，您可以使用[Zip执行类似的操作](http://msdn.microsoft.com/en-us/library/dd267698.aspx)

```
var cnt = 0;
Array1.Zip(Array2,(a,b)=>{
    if(a.Equals(b)) ++cnt; 
    return string.Empty; //we dont need this
}).Count(); // use tolist or count to force evaluation 
```

如果您不关心排序而只关心匹配，则可以使用[Intersect](http://msdn.microsoft.com/en-us/library/bb460136.aspx)

```
Array1.Intersect(Array2).Count() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:08:14.277

我解决这个问题的方法也是取第一个数组中的值并将其与第二个数组中的所有其他值进行比较。如果它们匹配，则增加一个比较计数器，这将告诉您它们是匹配的三个比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:15:18.767

这对我有用：

```
var array1 = new string[] {"Katy", "Jenny", "Sarah", "Ben", "Jill", "Tina"};
var array2 = new string[] {"Katy", "John", "Sam", "Ben", "Jill", "Linda"};

var similarity = (array1.Length + array2.Length) - array1.Union(array2).Count(); 
```

编辑：哦，刚刚看到你希望他们处于相同的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T06:13:39.487

您说的是“根据索引”，假设您的意思是如果“John”在第一个列表中的位置 1，并且在第二个列表中的位置 2 => 不匹配。

在这种情况下：

```
int maxItems = Math.Min(arr1.Length, arr2.Length);
int matchCount = 0;

for(int i = 0; i < maxItems; i++)
{
  if(object.Equals(arr1[i], arr2[i]))
    matchCount++;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T07:03:10.567

我会这样做：

```
int count = array1.Zip(array2, (a, b) => a.Equals(b)).Count(b => b); 
```

zip 部分返回 an`IEnumerable<bool>`和 count 部分计算`true`该列表中出现的次数。

# macos - Mmap 在汇编器中的 MacOS X 10.8.2 上返回 0

> ID：12832553
> 
> 赞同：2
> 
> 时间：2012-10-11T05:05:00.360
> 
> 标签：macos, assembly, x86-64

我只是在 MacOS X 上做一些有趣的组装，目前我只是试图使用 mmap 系统调用将文件映射到内存中，但我现在有点困惑。这是代码片段：

```
movq $0x20000c5, %rax               //mmap syscall
xorq %rsi,%rsi                      //
movq %rcx,%rdi                      //size of the file is in rcx
movq $0x1,%rdx                      //read only
movq $0x1,%r10                      //shared
movq finput(%rip),%r8               //file descriptor
xorq %r9,%r9                        //no offset
syscall 
```

从设置进位标志的意义上讲，这不会产生错误，但是它在 rax 中返回 0，我认为它实际上应该返回指向它已将文件映射到的内存的指针。我当然试过检查明显的东西，文件大小或文件描述符没有任何问题。我敢打赌，我在这里遗漏了一些明显的东西，但我现在看不到。将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:10:36.087

（答案在评论中，所以我在这里报告）

RSI 和 RDI 参数的顺序不正确。正确的代码是：

```
movq $0x20000c5, %rax               //mmap syscall
xorq %rdi,%rdi                      //
movq %rcx,%rsi                      //size of the file is in rcx
movq $0x1,%rdx                      //read only
movq $0x1,%rcx                      //shared
movq finput(%rip),%r8               //file descriptor
xorq %r9,%r9                        //no offset
syscall 
```

# java - 如何为java对象动态添加属性？

> ID：12832554
> 
> 赞同：8
> 
> 时间：2012-10-11T05:05:07.157
> 
> 标签：java

有学生课。

```
Class Student{
    String _name;
    ....
    ....

    public Student(){
    }
} 
```

是否有可能向学生对象添加动态属性？ **在不扩展学生班级的情况下。**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T05:24:48.267

简而言之，是的，可以在运行时修改字节码，但它可能非常混乱，而且它（很可能）不是你想要的方法。但是，如果您决定采用这种方法，我推荐使用字节码操作库，例如 ASM。

更好的方法是将 a`Map<String, String>`用于“动态”getter 和 setter，并将 a`Map<String, Callable<Object>>`用于任何不是 getter 或 setter 的东西。然而，最好的方法可能是重新考虑为什么完全需要动态类。

```
public class Student {

    private Map<String, String> properties = new HashMap<String, String>();
    private Map<String, Callable<Object>> callables = new HashMap<String, Callable<Object>>();
    ....
    ....
    public String getProperty(String key) {
        return properties.get(key);
    }

    public void setProperty(String key, String value) {
        properties.put(key, value);
    }

    public Object call(String key) {
        Callable<Object> callable = callables.get(key);
        if (callable != null) {
            return callable.call();
        }
        return null;
    }

    public void define(String key, Callable<Object> callable) {
        callables.put(key, callable);
    }
} 
```

请注意，您*可以*通过使用 Callable 并在其中返回 null 来使用此概念定义 void 方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-11T05:11:11.420

您可以进行字节码操作，但这种方式很疯狂（尤其是对于必须维护代码的程序员）。

将属性存储在 a 中`Map<String,String>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T05:14:00.547

[在运行时将新方法和属性注入到类中](https://stackoverflow.com/questions/1419758/inject-new-methods-and-properties-into-classes-during-runtime)

> 仅使用Java就可以吗？

[创建代理对象](http://www.exampledepot.com/egs/java.lang.reflect/ProxyClass.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:11:17.337

尽管您可以使用其他人建议的一些棘手且复杂的方式来做到这一点..

但是你可以肯定有你的属性`data structure`（一个合适的将是 a `Map`）。因为你可以修改你现有的属性，所以可以用你的数据结构来完成。您可以为它们添加更多属性..这将是一个更好的方法..

# php - 整数相除得到整数值

> ID：12832557
> 
> 赞同：94
> 
> 时间：2012-10-11T05:05:29.400
> 
> 标签：php

在像 C 或 Python 这样的语言中，如果我将一个整数除以一个整数，我会得到一个整数：

```
>>> 8/3
2 
```

但是在 PHP 中，如果我用 将一个整数除以另一个整数`/`，有时我会得到一个浮点数：

```
php > var_dump(6/3);
int(2)
php > var_dump(8/3);
float(2.6666666666667) 
```

我想像在 Python 或 C 中那样做除法，所以 8/3 是 2。我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-10-11T05:07:58.000

使用[`round()`](http://php.net/manual/en/function.round.php)函数获取整数舍入值。

```
round(8 / 3); // 3 
```

或者

使用[`floor()`](http://php.net/manual/en/function.floor.php)函数获取整数值

```
floor(8 / 3); // 2 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2016-02-03T15:43:41.407

在 PHP 7 中，有一个[intdiv](http://php.net/manual/en/function.intdiv.php)函数可以做你想做的事。

用法：

```
intdiv(8, 3); 
```

退货`2`。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-10-11T05:08:49.407

PHP 中没有整数除法运算符。1/2 产生浮点数 0.5。该值可以转换为整数以向下舍入，或者 round() 函数可以更好地控制舍入。

```
 var_dump(25/7);           // float(3.5714285714286)    
var_dump((int) (25/7));   // int(3)   
var_dump(round(25/7));    // float(4) 
```

[PhP手册](http://php.net/manual/en/language.types.integer.php)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-11T05:09:05.837

用这个....

```
intval(1700000 / 300000 )... 
```

这将返回整数值。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-12-13T09:26:10.847

***对于 PHP 7 尝试`intdiv()`功能：***

> ***句法：*** `int intdiv($dividend, $divisor)`

```
 <?php           
           $dividend = 19; 
           $divisor = 3;  
           echo intdiv($dividend, $divisor); 
           ?> 
```

***对于旧版本的 PHP：***

```
 <?php
     // Convert $total_minutes to hours and minutes.

         $total_minutes = 640;
         $minutes = $total_minutes % 60;
         $hours = ($total_minutes - $minutes) / 60;

         echo "Time taken was $hours hours $minutes minutes";
         ?> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-11-17T17:46:05.663

有几种方法可以在 PHP 中执行整数除法。该语言没有整数除法运算符，但有几个选项可将浮点商舍入为整数：

```
<?php
$pos = 1;
$neg = -1;
$divisor = 2;

// No rounding (float division)
var_dump($pos / $divisor);          //  0.5 (float)
var_dump($neg / $divisor);          // -0.5 (float)

// Round toward zero (like C integer division)
var_dump((int)($pos / $divisor));   //  0 (int)
var_dump((int)($neg / $divisor));   //  0 (int)

// Round half away from zero
var_dump(round($pos / $divisor));   //  1 (float)
var_dump(round($neg / $divisor));   // -1 (float)

// Round down
var_dump(floor($pos / $divisor));   //  0 (float)
var_dump(floor($neg / $divisor));   // -1 (float)

# And on PHP 7 you can round toward zero with intdiv():
var_dump(intdiv($pos, $divisor));   //  0 (int)
var_dump(intdiv($neg, $divisor));   //  0 (int)  Rounded toward zero 
```

在 PHP 7 上，您可以使用[`intdiv($p, $q)`](http://php.net/manual/en/function.intdiv.php)它直接执行整数除法。这相当于`(int)($p / $q)`PHP 5。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-10-11T05:14:23.163

```
(int)(1700000 / 300000); 
```

使用类型转换。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-02-29T22:44:47.027

您可以通过在末尾添加 |0 来使用简写形式

8/3|0

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-28T07:27:56.633

对于 PHP 版本 7 =>`intdiv(a,b)`

对于小于 7 的版本（如 5.6）=>`(int)floor(abs(a/b))`

# php - 如何防止在线酒店预订中的竞争条件

> ID：12832570
> 
> 赞同：7
> 
> 时间：2012-10-11T05:06:44.393
> 
> 标签：php, mysql, race-condition

我正在使用 PHP 和 MySQL 编写酒店预订软件。我几乎完成了它，但我遇到了竞争条件问题。例如，仅剩一间标准房，当 2 位客人都选择时，显示可供两人入住。当客人在付款前单击确认时，我尝试通过再次检查房间来修复它，但这仍然存在问题。当谁先点击确认时，我也尝试将房间状态设置为待处理，但如果客人决定不付款或只是关闭浏览器，我不知道如何将其更改回可用状态。我搜索了答案，但我并没有真正找到明确的答案。提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T05:12:05.570

一种解决方案是将两列添加到数据库中的表中。一列是会话 ID 或用户 ID 或提供房间的用户的任何内容。第二列是指示该优惠何时到期的时间戳。

然后，在您的应用中，仅在保留列中显示具有过期时间戳的房间。（将初始时间戳设置为 0 以使其开始过期。）选择房间后，再次检查该列。如果那里有一个未过期的时间戳，用户会收到“对不起，你太慢了”的消息。否则，将时间戳放在那里 15 分钟到未来或其他任何时间，然后继续。

你在旅游网站和购票网站上经常看到这种情况，上面写着“我们会再为你保留这些座位 14 分钟。请在那时完成交易，否则它将被释放等等。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:12:17.770

我也会选择待定状态。您可以将状态与该用户的会话 id 一起保存，并有一个 cronjob 删除所有与它们相关联的过期会话 id 的挂起状态。

# firebug - 打开firebug后注销

> ID：12832575
> 
> 赞同：1
> 
> 时间：2012-10-11T05:07:19.007
> 
> 标签：firebug, cakephp-2.0

我在 Cakephp 中有一个 Web 应用程序。

启用 firebug 后，应用程序会话被破坏并且用户被注销。

在使用 zend 等其他框架时，我从未遇到过这个问题。我第一次使用 Cakephp 并面临这个问题。

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:30:37.513

我发现对于每个请求 HTTP_USER_AGENT 都会在会话中进行检查，并且当我们启用/禁用 firebug 时，userAgent 值会发生变化。

因此，如果我们启用/禁用 firebug，我们就会被注销。

为了解决这个问题，我们可以设置**Configure::write('Session.checkAgent', true);** 在 /app/config/core.php 中。

# regex - 如何捕获在 elisp 中拆分字符串的结果？

> ID：12832585
> 
> 赞同：3
> 
> 时间：2012-10-11T05:08:44.153
> 
> 标签：regex, emacs, elisp

我在 elisp 中工作，我有一个代表项目列表的字符串。字符串看起来像

```
"apple orange 'tasty things' 'my lunch' zucchini 'my dinner'" 
```

我试图把它分成

```
("apple" "orange" "tasty things" "my lunch" "zucchini" "my dinner") 
```

[这是一个熟悉的问题](https://stackoverflow.com/questions/366202/regex-for-splitting-a-string-using-space-when-not-surrounded-by-single-or-double)。我解决它的障碍不是关于正则表达式，而是更多关于 elisp 的细节。

我想要做的是运行一个循环，如：

*   `(while (< (length my-string) 0) do-work)`

那`do-work`是：

*   将正则表达式`\('[^']*?'\|[[:alnum:]]+)\([[:space:]]*\(.+\)`应用于`my-string`
*   附加`\1`到我的结果列表
*   重新绑定`my-string`到`\2`

但是，我不知道如何获得`split-string`或`replace-regexp-in-string`做到这一点。

如何将此字符串拆分为我可以使用的值？

（或者：“我还没有找到哪个内置的 emacs 函数呢？”）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T10:00:13.437

类似的东西，但没有正则表达式：

```
(defun parse-quotes (string)
  (let ((i 0) result current quotep escapedp word)
    (while (< i (length string))
      (setq current (aref string i))
      (cond
       ((and (char-equal current ?\ )
             (not quotep))
        (when word (push word result))
        (setq word nil escapedp nil))
       ((and (char-equal current ?\')
             (not escapedp) 
             (not quotep))
        (setq quotep t escapedp nil))
       ((and (char-equal current ?\')
             (not escapedp))
        (push word result)
        (setq quotep nil word nil escapedp nil))
       ((char-equal current ?\\)
        (when escapedp (push current word))
        (setq escapedp (not escapedp)))
       (t (setq escapedp nil)
        (push current word)))
      (incf i))
    (when quotep
      (error (format "Unbalanced quotes at %d"
                     (- (length string) (length word)))))
    (when word (push result word))
    (mapcar (lambda (x) (coerce (reverse x) 'string))
            (reverse result))))

(parse-quotes "apple orange 'tasty things' 'my lunch' zucchini 'my dinner'")
("apple" "orange" "tasty things" "my lunch" "zucchini" "my dinner")

(parse-quotes "apple orange 'tasty thing\\'s' 'my lunch' zucchini 'my dinner'")
("apple" "orange" "tasty thing's" "my lunch" "zucchini" "my dinner")

(parse-quotes "apple orange 'tasty things' 'my lunch zucchini 'my dinner'")
;; Debugger entered--Lisp error: (error "Unbalanced quotes at 52") 
```

奖励：它还允许使用“\”转义引号，如果引号不平衡（到达字符串末尾，但未找到打开的引号的匹配项），将报告它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T08:28:59.507

这是使用临时缓冲区实现算法的简单方法。我不知道是否有办法使用`replace-regexp-in-string`or来做到这一点`split-string`。

```
(defun my-split (string)
  (with-temp-buffer
    (insert string " ")     ;; insert the string in a temporary buffer
    (goto-char (point-min)) ;; go back to the beginning of the buffer
    (let ((result nil))
      ;; search for the regexp (and just return nil if nothing is found)
      (while (re-search-forward "\\('[^']*?'\\|[[:alnum:]]+\\)\\([[:space:]]*\\(.+\\)\\)" nil t)
        ;; (match-string 1) is "\1"
        ;; append it after the current list
        (setq result (append result (list (match-string 1))))
        ;; go back to the beginning of the second part
        (goto-char (match-beginning 2)))
      result))) 
```

例子：

```
(my-split "apple orange 'tasty things' 'my lunch' zucchini 'my dinner'")
  ==> ("apple" "orange" "'tasty things'" "'my lunch'" "zucchini" "'my dinner'") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T13:37:38.403

你可能想看看`split-string-and-unquote`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T08:10:42.807

如果你经常操作字符串，你应该[`s.el`](https://github.com/magnars/s.el)通过包管理器安装库，它在一致的 API 下引入了大量的字符串实用程序函数。对于此任务，您需要 function [`s-match`](https://github.com/magnars/s.el#s-match-regexp-s-optional-start)，其可选的第三个参数接受起始位置。然后，您需要一个正确的正则表达式，尝试：

```
(concat "\\b[a-z]+\\b" "\\|" "'[a-z ]+'") 
```

`\|`表示匹配构成单词的字母序列（`\b`表示单词边界），或匹配引号内的字母序列和空格。然后使用[循环](http://www.gigamonkeys.com/book/loop-for-black-belts.html)：

```
;; let s = given string, r = regex
(loop for start = 0 then (+ start (length match))
      for match = (car (s-match r s start))
      while match 
      collect match) 
```

出于教育目的，我还使用递归函数实现了相同的功能：

```
;; labels is Common Lisp's local function definition macro
(labels
    ((i
      (start result)
      ;; s-match searches from start
      (let ((match (car (s-match r s start))))
        (if match
            ;; recursive call
            (i (+ start (length match))
               (cons match result))
          ;; push/nreverse idiom
          (nreverse result)))))
  ;; recursive helper function
  (i 0 '())) 
```

由于 Emacs 缺乏[尾调用优化](http://en.wikipedia.org/wiki/Tail_call)，在一个大列表上执行它会导致[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow)。因此你可以用[do](http://gigamonkeys.com/book/macros-standard-control-constructs.html#do)宏重写它：

```
(do* ((start 0)
      (match (car (s-match r s start)) (car (s-match r s start)))
      (result '()))
    ((not match) (reverse result))
  (push match result)
  (incf start (length match))) 
```

# c# - 通过 DataGrid 编辑 XML 文件

> ID：12832594
> 
> 赞同：0
> 
> 时间：2012-10-11T05:09:19.230
> 
> 标签：c#, xml

> **可能重复：**
> [仅显示数据网格中的根节点](https://stackoverflow.com/questions/12832321/show-only-root-node-in-data-grid)

```
 this.dataGrid1 = new System.Windows.Forms.DataGrid();
        this.dataGrid1.DataMember = "";
        this.dataGrid1.Location = new System.Drawing.Point(36, 50);
        this.dataGrid1.Name = "dataGrid1";
        this.dataGrid1.Size = new System.Drawing.Size(464, 432);
        this.dataGrid1.TabIndex = 0;
        // 
        this.AutoScaleBaseSize = new System.Drawing.Size(35, 13);
        this.ClientSize = new System.Drawing.Size(592, 573);
        this.Controls.AddRange(new System.Windows.Forms.Control[] { this.dataGrid1 });
        ((System.ComponentModel.ISupportInitialize)(this.dataGrid1)).EndInit();
        this.ResumeLayout(false);

        XmlDataDocument xmlDatadoc = new XmlDataDocument();
        xmlDatadoc.DataSet.ReadXml("abcd.xml");

        DataSet ds = new DataSet("abc");
        ds = xmlDatadoc.DataSet;

        dataGrid1.DataSource = ds.Tables[0]; 
```

上面的代码读取 XML 文件并显示在 DataGrid 中。有人可以告诉我如何编辑 DataGrid 以便可以编辑 XML 中的相应值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:03:35.910

要将更改从`DataSet`后面保存到 XML 文件，您只需要做

```
 ds.Tables[0] = (DataTable)(dataGrid1.DataSource);
     ds.WriteXml("your path here"); 
```

作为旁注，您的代码有点多余。当您创建 的实例时`XmlDataDocument`，您可以只访问它的`DataSet`属性而无需创建新`DataSet`实例，如代码所示。如果您只想将 XML 文件读入 a`DataSet`您可以执行以下操作

```
 DataSet ds = new DataSet("abc");
    ds.ReadXml("abcd.xml");

    dataGrid1.DataSource = ds.Tables[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:15:22.950

XML 和 Datagrid Dataset 没有相互关联，因此您需要通过从 Dataset 编写 XML 来手动完成。

# java - HTML 单元的 NULL 指针异常

> ID：12832598
> 
> 赞同：0
> 
> 时间：2012-10-11T05:09:42.183
> 
> 标签：java, nullpointerexception, htmlunit

我正在使用 htmlunit-2/.9 版本，当我尝试获取当前的 HTML 页面内容并将其保存到临时文件以供将来参考时，当我调用`currentPage.asXml()`.

任何指针或帮助将不胜感激。

这是堆栈跟踪：

```
java.lang.NullPointerException
    at **com.gargoylesoftware.htmlunit.SgmlPage.asXml(SgmlPage.java:206)**
    at com.yahoo.vis.ddbuilder.validator.DDBuilderValidator.validateTemplate_1(DDBuilderValidator.java:308)
    at com.yahoo.vis.ddbuilder.validator.DDBuilderValidator.validate(DDBuilderValidator.java:72)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.yahoo.robot.components.interfaces.Executable.run(Executable.java:73)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

下面是导致 NULL 指针的代码片段。我正在为大约 100 个测试用例运行此测试，在 100 个测试用例中，20-30 个用例会随机失败

```
private IValidationResponse validateTemplate_2(String url, Properties verifyProps, HtmlPage currentPage) throws FailingHttpStatusCodeException, MalformedURLException, IOException
    {
        IValidationResponse validationResponse = new DefaultValidationResponse();
        String query = verifyProps.getProperty(IConstants.QUERY);
        System.err.println("Verifying Query ::- "+query);
        validationResponse.setQuery(query);
        validationResponse.setActualResponseAsBuffer(new StringBuffer(currentPage.asXml()));
...

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:42:36.263

[`HtmlPage`](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/HtmlPage.html)扩展[`SgmlPage`](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/SgmlPage.html)类和我已经浏览了`SgmlPage`for 的源代码[`asXml()`](http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.htmlunit/htmlunit/2.9/com/gargoylesoftware/htmlunit/SgmlPage.java#SgmlPage.asXml%28%29)。

它在内部调用另一个`getDocumentElement()`返回的方法`DomElement`

[从源代码](http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.htmlunit/htmlunit/2.9/com/gargoylesoftware/htmlunit/SgmlPage.java#SgmlPage.getDocumentElement%28%29)，这些是方法：

```
 @Override
   public String asXml() {
       return getDocumentElement().asXml(); // This is Line 206, From your error trace
   }

public DomElement  getDocumentElement() {
        DomNode childNode = getFirstChild();

        while (childNode != null && !(childNode instanceof DomElement)) {

           childNode = childNode.getNextSibling();

       }
       return (DomElement) childNode;
} 
```

这里有可能`childNode` 是NULL。如果 `childNode`返回 NULL，调用`getDocumentElement().asXml();`将抛出`NullPointerException`。

**PS.：**您没有提供任何详细信息，您如何调用方法以及您传递的内容。所以，我不禁要找到根本原因但是，我希望这至少可以帮助您理解为什么会出现错误。

# jquery - jquery each() 只返回第一个值

> ID：12832601
> 
> 赞同：-1
> 
> 时间：2012-10-11T05:10:04.050
> 
> 标签：jquery, selector, each

我知道这里还有另一个问题，[但这](https://stackoverflow.com/questions/10163280/jquery-each-returns-only-first-found-value)对我不起作用。

所以我有一个非常大的表单，大约有 40 个字段，单独遍历每个字段很痛苦，所以我将 50 个字段分成类别并为每个输入类别分配一个 id，例如，有 10 个价格字段4 类 10 种数量：标准运输、快递运输、加急运输、超级加急运输。所以我用相同的ID命名了一个类别下的所有价格，例如标准运输是

```
<id input type="text" name="s_qty_25" id="s_cf" />
<id input type="text" name="s_qty_50" id="s_cf" />
<id input type="text" name="s_qty_100" id="s_cf" />
.... and so on 
```

我的表格是这样定义的：

```
<form method="post" id="creation_form" action="actions/add_prices.php">
  ....
</form> 
```

我用来验证的jQuery是这样的：

```
$(function() {
$('#creation_form').submit(function(e){

    $("#cs_f").each(function(index, obj){
        var cs_f_val = $(obj).val();
        if(cs_f_val == ''){
            $(obj).attr('style', 'background:red;');
            valid = false;
        }
    });

    //...repeat the snipet for each 3 remaining price groups

    return valid;
});
}); 
```

如果为空，则基本上将字段变为红色并取消提交。然而只有第一个字段会得到它的红色背景！

谢谢大家的帮助：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:13:15.507

应该只有一个具有特定 id 的字段。这就是为什么它被称为id！

尝试改用一个类：

```
<id input type="text" name="s_qty_25" class="s_cf" />
<id input type="text" name="s_qty_50" class="s_cf" />
<id input type="text" name="s_qty_100" class="s_cf" /> 
```

然后

```
$(".cs_f").each 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T05:15:14.893

首先.. id 应该始终是唯一的...所以请改用 class

```
<id input type="text" name="s_qty_100" class="s_cf" /> 
```

在你的 javascript 中，试试这个

```
$(function() {
$('#creation_form').submit(function(e){

    $(".cs_f").each(function(index, obj){
    var cs_f_val = $(obj).val();
    if(cs_f_val == ''){
        $(obj).attr('style', 'background:red;');
        valid = false;
    }
  });

  //...repeat the snipet for each 3 remaining price groups

  return valid;
 });
}); 
```

# ios - 从全屏模式视图显示拆分视图

> ID：12832604
> 
> 赞同：0
> 
> 时间：2012-10-11T05:10:17.990
> 
> 标签：ios, ipad, uisplitviewcontroller, modalviewcontroller

我的应用程序中有一个带有拆分视图的屏幕。并且从那我可以显示到下一个屏幕，这是一个具有模式视图演示风格全屏的模式视图。现在我想从全屏模式视图返回并再次显示拆分视图。

如果我写：

```
 [self.navigationController dismissModalViewControllerAnimated:YES]; 
```

然后只有一部分拆分视图控制器以全屏显示，而不是拆分视图。如何从全屏模式视图控制器中获取拆分视图控制器？

# scala - Scala 在 if 条件内分配

> ID：12832606
> 
> 赞同：2
> 
> 时间：2012-10-11T05:10:30.713
> 
> 标签：scala

```
val flag = false

if (val data = flag) {
  println(data)
} 
```

是否可以分配`flag`内部 if 语句并在 Scala 中自动评估？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T06:08:48.833

是的，但它不会超出范围，因此您不能在 if 的正文中使用它

```
if ({val data = true; data}) 
  println("data was true") 
```

赋值不会返回值，但您可以返回它。最好做类似的事情

```
def test(data: Boolean) {
  if (data) {/* data in scope */} 
  else      {/* data in scope */}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T11:00:48.353

有一个很好的扩展功能可以帮助您处理您的案例和许多其他问题。您可以使用以下隐式转换来实现它：

```
implicit class AnyExtensions[A](val x: A) extends AnyVal {
  def asSatisfying(p: A => Boolean): Option[A] =
    if (p(x)) Some(x) else None
} 
```

将其导入范围后，您可以对示例执行以下操作：

```
flag.asSatisfying(_).foreach(println) 
```

[在这个答案](https://stackoverflow.com/a/12055571/485115)中有一些更好的用例详细解释了它。

此函数的主要优点是它允许您有效地消除引入中间变量的需要，从而使您能够将任何“if-else”逻辑解决为单行表达式。

# drupal - Drupal 中的成员统计信息

> ID：12832614
> 
> 赞同：0
> 
> 时间：2012-10-11T05:11:30.343
> 
> 标签：drupal, count, statistics, views, counter

我希望我的`Drupal`网站在页面中显示有关我的会员的一些统计信息。

`Example:`

男学生人数：50

女学生人数：40

通过考试的学生人数：30等

这可能吗？我尝试使用 Views 模块，但它显示的结果不是我所追求的“计数”。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:33:38.943

用户统计专业模块..它可能会有所帮助

# android - 是否可以在一个活动中容纳滚动视图和 ListView？

> ID：12832625
> 
> 赞同：0
> 
> 时间：2012-10-11T05:12:27.940
> 
> 标签：android, android-layout

我正在创建一个支持 Android 2.2 及更高版本的应用程序。

我有 10 个编辑文本和 10 个文本视图，可容纳在滚动视图中。

我想在同一个活动中也容纳一个列表视图。

是否有可能在一个活动中容纳整体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:25:08.497

您可以在 ScrollView 中有一个 ListView，但这是一个糟糕的设计。甚至 Eclipse 也会抛出警告。此外，行为会有所不同，因为 ListView 已经拥有自己的 ScrollView。

因此，唯一的解决方案可能是在其他一些布局（线性/相对）中拥有一个固定长度的 ScrollView 和一个 ListView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:24:11.510

是的，这是可能的，但是不建议在滚动视图中包含列表视图，因为列表视图已经实现了滚动，并且 android 文档说它不起作用。您可以做的是创建一个片段，并在一个片段中放置一个您想要在滚动视图和其他片段中拥有的视图 - 您的列表视图。然后将两个片段放入一个活动中。

# asp.net-mvc - ASP.NET MVC helper js 函数在 Razor 4 中不起作用

> ID：12832629
> 
> 赞同：0
> 
> 时间：2012-10-11T05:13:12.497
> 
> 标签：asp.net-mvc, razor, razor-declarative-helpers

我在 cshtml 文件中有以下 razor 辅助函数，它在 asp.net mvc 3 上工作，在我将它迁移到 mvc 4 之后，它不再工作（编译）了。

主要功能 PopulateForm 的目的是根据服务器模型设置 html 控件的值。

我发现这是因为行的语法：

```
@(SetField(formId, fieldNamePrefix + p.Name, value)); 
```

所以我将其更改为：

```
@Js.SetField(formId, fieldNamePrefix + p.Name, value); 
```

它可以编译，但如果我调试它，它不会执行 SetField 函数的主体。

```
@using System.Linq;

@helper Encode(object value) {
    @(value != null ? HttpUtility.JavaScriptStringEncode(value.ToString()) : "")
}

@helper SetField(string formId, string fieldName, object value) {
    var type = (value != null) ? value.GetType() : typeof(object);
    var formattedValue = value;
    if (type == typeof(DateTime)) { formattedValue = ((DateTime)value).ToString("dd-MMM-yyyy"); }
    if (type == typeof(TimeSpan)) { formattedValue = ((TimeSpan)value).ToString("hh\\:mm"); }
    @: $("#@formId *[name='@fieldName']").changeVal("@JS.Encode(formattedValue)");
}

@helper PopulateForm(dynamic model, string formId, string[] excludedFields = null, string fieldNamePrefix = "") {
    var valueProperties = model.GetType().GetProperties();
    foreach (var p in valueProperties)
    {
        if (excludedFields != null && Array.Exists<string>(excludedFields, f => f == p.Name)) { continue; };
        var value = @p.GetValue(model, null);
        @(SetField(formId, fieldNamePrefix + p.Name, value));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:19:20.667

试试这样写：

```
@using System.Linq;

@helper Encode(object value) {
    @(value != null ? HttpUtility.JavaScriptStringEncode(value.ToString()) : "")
}

@helper SetField(string formId, string fieldName, object value) {
    var type = (value != null) ? value.GetType() : typeof(object);
    var formattedValue = value;
    if (type == typeof(DateTime)) { formattedValue = ((DateTime)value).ToString("dd-MMM-yyyy"); }
    if (type == typeof(TimeSpan)) { formattedValue = ((TimeSpan)value).ToString("hh\\:mm"); }
    @: $("#@formId *[name='@fieldName']").changeVal("@Encode(formattedValue)");
}

@helper PopulateForm(dynamic model, string formId, string[] excludedFields = null, string fieldNamePrefix = "") {
    var valueProperties = model.GetType().GetProperties();
    foreach (var p in valueProperties)
    {
        if (excludedFields != null && Array.Exists<string>(excludedFields, f => f == p.Name)) { continue; };
        var value = p.GetValue(model, null);
        SetField(formId, fieldNamePrefix + p.Name, value);
    }
} 
```

# magento - 在 Magento 的主页上添加类别页面效果

> ID：12832633
> 
> 赞同：2
> 
> 时间：2012-10-11T05:13:52.163
> 
> 标签：magento, infinite-scroll, magento-1.7

在我使用此效果[http://demo.rapidcommerce.eu/default/catalogsearch/result/?q=the#/page/3](http://demo.rapidcommerce.eu/default/catalogsearch/result/?q=the#/page/3)`Magento 1.7`在我的类别页面上添加了无限滚动效果 。

现在我想在我的主页上添加效果。我正在使用以下代码在我的主页上显示所有产品 cms-> pages-> Home-> 管理面板中的自定义布局。

```
<reference name="content">
    <block type="catalog/product_list" name="featured" template="catalog/product/list.phtml">
    </block>
</reference> 
```

这会显示我主页上的所有类别。我想在主页上添加[http://demo.rapidcommerce.eu/default/catalogsearch/result/?q=the#/page/3 。](http://demo.rapidcommerce.eu/default/catalogsearch/result/?q=the#/page/3)因为我是 Magento 的新手。任何帮助表示赞赏

# android - android mediaplayer - 一次播放铃声

> ID：12832634
> 
> 赞同：2
> 
> 时间：2012-10-11T05:13:52.437
> 
> 标签：android, android-mediaplayer, ringtone

我尝试使用 MediaPlayer 类播放设备铃声一次（我必须使用 MediaPlayer，因为我在我的应用程序中将铃声与其他音频源一起使用）所以我尝试以下播放随机铃声但我无法阻止它循环播放，它一直在播放。是否可以使用 MediaPlayer 只播放一次铃声。

谢谢

```
try {
    RingtoneManager mRing = new RingtoneManager(RingtoneActivity.this);
    int mNumberOfRingtones = mRing.getCursor().getCount();
    Uri mRingToneUri = mRing.getRingtoneUri((int) (Math.random() * mNumberOfRingtones));
    mMediaPlayer = new MediaPlayer();
    mMediaPlayer.setDataSource(RingtoneActivity.this, mRingToneUri);
    mMediaPlayer.prepare();
    mMediaPlayer.setLooping(false);
    mMediaPlayer.start();

} catch (Exception ignore) {
} 
```

**更新：**

我刚刚发布了一个与此问题相关的新[问题](https://stackoverflow.com/questions/12834727/android-loop-true-how-to-avoid-mediaplayer-looping-audios-with-this-metadat)，因为我能够找到问题的具体原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T20:58:18.173

我找到了使用事件的简单解决方案 - 确认答案，因为它解决了您的问题:)

```
mediaPlayer.setOnSeekCompleteListener(new MediaPlayer.OnSeekCompleteListener() {
                    @Override
                    public void onSeekComplete(MediaPlayer mediaPlayer) {
                        mediaPlayer.stop();
                    }
                }); 
```

[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

记住release()。

```
 mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                @Override
                public void onCompletion(MediaPlayer mediaPlayer) {
                    mediaPlayer.release();
                }
            }); 
```

您想要使用的完整代码需要将铃声设置为您想要的东西。

```
 AudioManager audioManager = (AudioManager)getSystemService(AUDIO_SERVICE);
        int volume = audioManager.getStreamVolume(AudioManager.STREAM_NOTIFICATION);
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(view.getContext());
        Uri notificationSoundUri = Uri.parse(prefs.getString("notification_sound", "DEFAULT_SOUND"));

        MediaPlayer mediaPlayer = new MediaPlayer();
        try {
            mediaPlayer.setDataSource(view.getContext(), notificationSoundUri);
        } catch (Exception e1) {
            e1.printStackTrace();
            mediaPlayer.release();
            return;
        }
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_NOTIFICATION);
        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mediaPlayer) {
                mediaPlayer.release();
            }
        });
        try {
            mediaPlayer.prepare();
        } catch (Exception e1) {
            e1.printStackTrace();
            mediaPlayer.release();
            return;
        }
        mediaPlayer.setOnSeekCompleteListener(new MediaPlayer.OnSeekCompleteListener() {

            @Override
            public void onSeekComplete(MediaPlayer mediaPlayer) {
                // TODO Auto-generated method stub
                mediaPlayer.stop();
                mediaPlayer.start();
            }
        });
        mediaPlayer.setVolume(volume, volume);
        mediaPlayer.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T01:17:41.627

使用通知

```
 NotificationManager nManager = 
           (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);    
   NotificationCompat.Builder notifBuilder = 
           new NotificationCompat.Builder(context);
   notifBuilder.setSound(sound);
   notification = notifBuilder.build();

   nManager.notify(SOME_INT_CONSTANT, notification); 
```

# jquery - 如何强制我的 AJAX 调用元素按照我在数组中指定的顺序附加？

> ID：12832641
> 
> 赞同：1
> 
> 时间：2012-10-11T05:14:09.937
> 
> 标签：jquery, ajax

我有一个问题，我很惊讶我从未见过任何脚本实现了这种技术，但我自己无法解决它，所以我需要一个线索。要查看我想要的内容，请查看此基本页面：

```
<!DOCTYPE html>

<html lang="en">

<head>

<style>

#loading{

display:none;

position: fixed;

width:500px;

height:200px;

top: 50%;

left: 50%;

margin-top: -100px;

margin-left: -250px;

z-index: 1;

border:black thin solid;

background-color: gold;}

</style>

<script src="path/to/jquery.min.js"></script>

<script>

        $(document).ready(function () {

        $('.click').click(function () {

        $("#content").empty();

        var src = $(this).attr('data-source').split(';');
        var l = src.length;
        $("#loading").ajaxStart(function(){
        $(this).html("Loading, please wait...").show();
        }).ajaxStop(function(){
        $(this).hide();
        });
        if (src.length >= 1 && src.length <= 5) {
            $.get(src[0].substring(src[0].lastIndexOf('@') + 1), {}, function (data) {
                var $response = $('<div />').html(data);
                $('#content').append($response.find(src[0].substring(0, src[0].lastIndexOf('@'))));
            }, 'html').complete(function () {
                $('#loading').html('Loaded: 1\. Total: ' + l);
                if (src.length >= 2) {
                    $.get(src[1].substring(src[1].lastIndexOf('@') + 1), {}, function (data) {
                        var $response = $('<div />').html(data);
                        $('#content').append($response.find(src[1].substring(0, src[1].lastIndexOf('@'))));
                    }, 'html').complete(function () {
                        $('#loading').html('Loaded: 2\. Total: ' + l);
                        if (src.length >= 3) {
                            $.get(src[2].substring(src[2].lastIndexOf('@') + 1), {}, function (data) {
                                var $response = $('<div />').html(data);
                                $('#content').append($response.find(src[2].substring(0, src[2].lastIndexOf('@'))));
                            }, 'html').complete(function () {
                                $('#loading').html('Loaded: 3\. Total: ' + l);
                                if (src.length >= 4) {
                                    $.get(src[3].substring(src[3].lastIndexOf('@') + 1), {}, function (data) {
                                        var $response = $('<div />').html(data);
                                        $('#content').append($response.find(src[3].substring(0, src[3].lastIndexOf('@'))));
                                    }, 'html').complete(function () {
                                        $('#loading').html('Loaded: 4\. Total: ' + l);
                                        if (src.length >= 5) {
                                                         $.get(src[4].substring(src[4].lastIndexOf('@') + 1), {}, function (data) {
                                                var $response = $('<div />').html(data);
                                           $('#content').append($response.find(src[4].substring(0, src[4].lastIndexOf('@'))));
        }, 'html').complete(function () {
        $('#loading').html('Loaded: 5\. Total: ' + l);
        });
        }
        });
        }
        });
        }
        });
        }
        });
        } 
        });
        });
        </script>
</head>
<body>
<span data-source="#part1, #part3, #part4@page1.html;#part2@page2.html;#part5@page1.html" class="click">Click me</span>
<div id="content">
</div>
<div id="loading">Loading, please wait...</div>
</body>
</html> 
```

也就是说，元素严格按照我在“数据源”属性中指定的顺序加载。该脚本似乎按我的预期工作，但问题是我不想“手动”为每个可能的长度编写一个单独的函数！！！我想要一个能自动完成这项工作的脚本！我试过这个：

```
 jQuery.each(src, function (i) {
            $.get(src[i].substring(src[i].lastIndexOf('@') + 1), {}, function (data) {
                var $response = $('<div />').html(data);
                var $ids = $response.find(src[i].substring(0, src[i].lastIndexOf('@')));
                $('#content').append($ids);
            }, 'html').complete(function () {
                $('#loading').html('Loaded: ' + (i + 1) + '. Total:' + l);
            });
        }); 
```

但在这种情况下，由于 AJAX 的本质以及 jQuery.each 不等同于无限的事实 .complete(function () {... .complete(function () {... .complete(function ( ) {... ，元素将不会按照我指定的顺序附加，特别是如果它们来自同一页面。如果我将我的数据源属性写为“page 1.html #part1, #part2”并且使用这样的东西：

```
 jQuery.each(src, function (i) {
            $('<div />').attr('class', 'container').appendTo($('#content')).load(src[i], function() {
    $('#loading').html('Loaded: ' + (i + 1) + '. Total:' + l);
    });
        }); 
```

元素似乎以正确的顺序附加，并且它们以我无法理解的方式进行：一个只是向下移动另一个，在两个已经存在的元素之间占据位置！但我无法想象加载消息中的 HTML 来自哪里，它可能只是表明页面是从最后一个加载到第一个。在我的第一次 Ajax 调用之后，我还尝试使用 ajaxComplete 事件并使用“数据”属性进行操作，但没有得到任何结果。

那么， ajaxComplete 是否等于 .complete(function () {... .complete(function () {... .complete(function () {... ？如果是，我该如何告诉脚本："从这个数组的第一个元素开始，忘记其他元素。完成后，切换到下一个元素……以此类推，直到结束”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:25:11.730

我建议使用递归以下解决方案：

```
var i = 0; 
var load = function (index) {
    $.get(src[index].substring(src[index].lastIndexOf('@') + 1), {}, function (data) {    
            var $response = $('<div />').html(data);    
            var $ids = $response.find(src[index].substring(0, src[index].lastIndexOf('@')));    
            $('#content').append($ids);    
        }, 'html').complete(function () {    
            $('#loading').html('Loaded: ' + (index + 1) + '. Total:' + l);
                          if(index +=1){
                load(index += 1); //recursion
                          }
        });
}
load(i); 
```

# php - 将数组从 json 解码为 PHP，无法使用键访问数组元素

> ID：12832642
> 
> 赞同：3
> 
> 时间：2012-10-11T05:14:11.047
> 
> 标签：php, json

我有一些类似于以下的 JSON：

```
{"internalArray": {"201": "A", "202": "B", "5": "C", "46": "D"}, 
 "data": "ABCDEFG", 
 "data2": "TSXPIIF"} 
```

我使用以下 PHP 代码对其进行解码：

```
$jsonOutput = json_decode($output); 
```

我想从 JSON 数据中访问“internalArray”，所以我使用以下方法引用它：

```
$internalArray = $jsonOutput->{'internalArray'}; 
```

当我在 $internalArray 上执行 var_dump

```
object(stdClass)#4 (4) 
{ ["201"]=> string(1) "A" 
     ["202"]=> string(1) "B" 
     ["5"]=> string(1) "C" 
     ["46"]=> string(1) "D" 
} 
```

我发现我可以把它转换成一个数组，所以我做了以下事情：

```
$internalArray = (array) $jsonOutput->{'internalArray'}; 
```

但是，现在我有了这个数组，我似乎无法使用像这样的值来访问它

```
$internalArray["202"], $internalArray["201"], etc. 
```

当我尝试通过键访问它时，它返回 NULL。但是，当我有这样的代码时：

```
foreach ($internalArray as $key => $value)
{
  echo $key . "," . $value;
} 
```

它按预期打印出值，例如“202，A”等。

但是，在相同的代码中，如果我将其更改为

```
foreach ($internalArray as $key => $value)
{
  echo $key . "," . $internalArray[$key];
} 
```

它不起作用！

谁能解释为什么我不能使用键访问 $internalArray 中的值？我在这里做一些根本错误的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T05:18:27.753

如果您想要一个关联数组，您可以向 PHP 索要一个关联数组（参见 文档[`json_decode`](http://php.net/manual/en/function.json-decode.php)）：

```
$jsonOutput = json_decode($output, true);

var_dump($jsonOutput['internalArray']); 
```

产生：

```
array(4) {
  [201]=>
  string(1) "A"
  [202]=>
  string(1) "B"
  [5]=>
  string(1) "C"
  [46]=>
  string(1) "D"
} 
```

* * *

回到您的问题，*如果*内部数组中的键不是数字，您的代码仍然可以工作。这里发生的事情有点奇怪：PHP 不允许您使用数字字符串（例如：`'201'`、、`'46'`）作为数组的键。

数字字符串键将被转换为数字键。所以当你做`$arr['201']`PHP 时会寻找`$arr[201]`代替。但是，当您将对象转换为数组时，看起来数组键仍然是字符串（例如：）`$arr['201']`。现在实际的数组有一个数字字符串键，但是每当您尝试访问它时，PHP 都会查找一个 int 键并且永远不会找到它，从而为您提供`NULL`.

事实上，[文档](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting)指出：

> 如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名称，有**一些值得注意的例外：整数属性是不可访问的**；(...)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:18:23.910

因为数据不是数组，所以它是一个对象。因此，您不能通过此代码段使用它

```
foreach ($internalArray as $key => $value)
{
   echo $key . "," . $internalArray[$key];
} 
```

并用于关联数组`json_decode($output, true);`

# javascript - 静音和取消静音背景声音

> ID：12832643
> 
> 赞同：0
> 
> 时间：2012-10-11T05:14:21.887
> 
> 标签：javascript, jquery, html, jquery-plugins

我正在根据某些情况在我的站点的监控页面中播放警报声音。为了播放警报，我正在使用 ::

```
$('body').append('<embed src="'+alerts+'" id="beapImg" autostart="true" hidden="true" loop="true">'); 
```

现在我想包括一个应该静音警报声音的按钮。我对以下内容进行了一些探索：

[用于音频嵌入的自定义静音按钮？](https://stackoverflow.com/questions/6848973/custom-mute-button-for-audio-embedding)

[如何使 html5 视频播放器静音](https://stackoverflow.com/questions/6376450/how-to-mute-an-html5-video-player)

我还尝试删除属性：“**自动启动**”的**标签 ：**

 **```
if($("#mute").is(':checked')){

    $('#beapImg').attr("autostart",false);
}else{
    $('#beapImg').attr("autostart",true);
} 
```

但这对我没有帮助，谁能告诉我我应该怎么做才能静音和取消静音。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:18:12.183

尝试删除循环。

```
if($("#mute").is(':checked')){
$('#beapImg').removeAttr("loop");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:28:50.060

如果静音，我会从页面中删除嵌入 - 在正文以外的容器中

```
$('#soundDiv').html('<embed src="'+alerts+'" id="beapImg" autostart="true" hidden="true" loop="true">');

$("#mute").on("click",function() {
  $('#soundDiv').empty();
}); 
```

或者

```
var sound = $('<embed src="'+alerts+'" id="beapImg" autostart="true" hidden="true" loop="true">');
$('#soundDiv').append(sound);
$("#mute").on("click",function() {
  if($("#mute").is(':checked') $('#soundDiv').empty();
  else $('#soundDiv').append(sound);
}); 
```**

# c - 在 Ubuntu 上进行 C 编程

> ID：12832649
> 
> 赞同：0
> 
> 时间：2012-10-11T05:14:38.420
> 
> 标签：c, ubuntu-12.04

我在 Ubuntu 12.04 上遇到了与 c 编程相关的问题。在编译包含“pow”的 c 程序时，我遇到了困难。然后我在互联网上搜索并使用'-lm'得到了解决方案。但这就是编译部分。如何执行和运行其中包含“pow”的程序？我未能执行和运行。消息说“没有这样的文件或目录”。我能做些什么？再说一次，有没有什么简单的方法可以在 Ubuntu 上学习 C 编程，让我可以完全专注于编码。我不必考虑编译、执行和运行代码。我应该为此使用IDE吗？你说什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:17:26.567

第 1 步：将代码另存为 .c（例如 Example.c）

第二步：编译为`gcc Example.c`

第3步：运行`./a.out`

如您所述，用于添加库。

```
gcc Example.c -lm 
```

假设你想使用 pthread 编程然后

```
gcc Example.c -lpthread 
```

对于使用 gdb 进行调试，您需要调试符号。所以在编译时你需要使用 -g

```
gcc -g Example.c 
```

如果你想改变你的可执行文件名，即 a.out 到其他名字，那么使用 -o

```
gcc Example.c -o myfirstpgm 
```

终于结合了所有

```
gcc -g Example.c -o myfirstpgm -lm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:32:59.420

就个人而言，我认为在学习使用命令行编译的同时学习编码应该一起完成。这样做可以让您更好地了解代码正在做什么以及需要运行什么。IDE 很棒 - 有些人喜欢它们。我不是那些人中的一个。但他们有他们的优势。

要回答您的`pow`问题，rjayavrp 的回答很棒，除了之前建议的编译时，还要记住`#include<math.h>`在代码的顶部。`-lm`

为了您的学习乐趣，我发现[这](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/)在学习 C 编程时非常有帮助。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:37:09.983

如果您想使用 IDE，您可以为此使用[代码块。](http://www.codeblocks.org/)它使用[mingw](http://www.mingw.org/)编译器，还为您提供其他编译器的选项。

# c# - 转换 MEF 应用程序以利用 Rx (System.Reactive)

> ID：12832651
> 
> 赞同：0
> 
> 时间：2012-10-11T05:15:02.383
> 
> 标签：c#, mef, system.reactive

所以目前的情况是我有一个完全利用 MEF 的程序。现在我想让它利用 Rx 来允许它扩展到更大的查询，并允许用户在各种插件返回结果时查看结果。当前设置如下：

**工作流程：**查询 => 确定类型 => 查询插件 => 结果

目前，如果有人需要引用比我在下面发布的更多内容，代码都存储在 GitHub 上。 [GitHub 上的警报](https://github.com/thelordzero/ALeRT)

VS 解决方案有一个 UI 项目（默认启动项目）、一个 PluginFramework 项目、各种 TypePlugin 项目（考虑确定类型是什么，例如 URL、电子邮件、文件、电话号码等）以及 QueryPlugin 项目（如果queryplugin 支持已确定的类型）。所有结果都通过 DataTable 的 DefaultView 映射到的 DataGrid 显示回 UI。

我想尝试使 Rx 部分对插件尽可能不可见。这是因为我不想让少数愿意编写插件的人变得复杂。所以我正在考虑采用下面的当前框架：

```
public interface IQueryPlugin
{
    string PluginCategory { get; }
    string Name { get; }
    string Version { get; }
    string Author { get; }
    System.Collections.Generic.List<string> TypesAccepted { get; }
    string Result(string input, string type, bool sensitive);
} 
```

并使 Result 方法如下：

```
System.IObservable<string> Result(string input, string type, bool sensitive); 
```

这自然需要修改调用插件的方法，就目前而言：

```
 using (GenericParserAdapter parser = new GenericParserAdapter())
                {
                    using (TextReader sr = new StringReader(qPlugins.Result(query, qType, sensitive)))
                    {
                        Random rNum = new Random();

                        parser.SetDataSource(sr);
                        parser.ColumnDelimiter = Convert.ToChar(",");
                        parser.FirstRowHasHeader = true;
                        parser.MaxBufferSize = 4096;
                        parser.MaxRows = 500;
                        parser.TextQualifier = '\"';

                        DataTable tempTable = parser.GetDataTable();
                        tempTable.TableName = qPlugins.Name.ToString();
                        if (!tempTable.Columns.Contains("Query"))
                        {
                            DataColumn tColumn = new DataColumn("Query");
                            tempTable.Columns.Add(tColumn);
                            tColumn.SetOrdinal(0);
                        }

                        foreach (DataRow dr in tempTable.Rows)
                        {
                            dr["Query"] = query;
                        }

                        if (!resultDS.Tables.Contains(qPlugins.Name.ToString()))
                        {
                            resultDS.Tables.Add(tempTable);
                        }
                        else
                        {
                            resultDS.Tables[qPlugins.Name.ToString()].Merge(tempTable);
                        }
                        pluginsLB.DataContext = resultDS.Tables.Cast<DataTable>().Select(t => t.TableName).ToList();
                    }
                } 
```

所以在这一点上，我被困在如何使这项工作上。似乎没有关于如何将 MEF 与 Rx 集成的好的文档。我的假设是进行以下更改

```
using (TextReader sr = new StringReader(qPlugins.Result(query, qType, sensitive).Subscribe())) 
```

但这行不通。因此，我们将不胜感激有关进行这些更改的任何帮助。如果您对我的代码有其他建议，请告诉我。我这样做是出于一种爱好，所以我知道我的代码肯定不适合大多数人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:00:27.337

这对你有用吗：

```
IObservable<DataTable> q =
    from text in qPlugins.Result(query, qType, sensitive)
    from tempTable in Observable.Using(
        () => new GenericParserAdapter(),
        parser => Observable.Using(
            () => new StringReader(text),
            sr => Observable .Start<DataTable>(
                () =>
                {
                    var rNum = new Random();

                    parser.SetDataSource(sr);
                    parser.ColumnDelimiter = Convert.ToChar(",");
                    parser.FirstRowHasHeader = true;
                    parser.MaxBufferSize = 4096;
                    parser.MaxRows = 500;
                    parser.TextQualifier = '\"';

                    var tempTable = parser.GetDataTable();
                    tempTable.TableName = qPlugins.Name.ToString();
                    if (!tempTable.Columns.Contains("Query"))
                    {
                        DataColumn tColumn = new DataColumn("Query");
                        tempTable.Columns.Add(tColumn);
                        tColumn.SetOrdinal(0);
                    }

                    foreach (DataRow dr in tempTable.Rows)
                        dr["Query"] = query;

                    return tempTable;
                })))
    select tempTable; 
```

# iphone - 如何在 iPhone 中访问收件箱消息

> ID：12832657
> 
> 赞同：0
> 
> 时间：2012-10-11T04:00:03.417
> 
> 标签：iphone, xcode, ios, messaging, objective-c

我正在开发一个应用程序，其中要求我在我的应用程序中打开来自 iPhone 收件箱的消息。

我似乎找不到任何可以执行此操作的 API - 有没有办法可以访问收件箱消息>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T04:43:03.903

你不能做这个。

能够处理过多电子邮件的唯一方法是在内部构建电子邮件访问权限。您只能从您自己的应用程序中发送消息。

然后，您的应用程序会代表它将该消息发送到电子邮件应用程序，并且邮件应用程序实际上会发送它，但在此之后不会与它进行交互。如果您的应用程序能够打开收件箱中的邮件，则会破坏电子邮件帐户的安全性。

# iphone - 写入钥匙串失败

> ID：12832659
> 
> 赞同：4
> 
> 时间：2012-10-11T05:15:39.033
> 
> 标签：iphone, objective-c, ios, cookies, keychain

我正在构建一个 iPhone 和一个随附的 iPad 应用程序，它使用 Apple 的钥匙串包装类来存储多个会话 cookie（来自 Rails）。

我目前正在模拟器上运行应用程序。如果我登录一个应用程序，退出并重新启动模拟器，它会正确加载钥匙串中的 cookie，一切都很好。当我像这样记录钥匙串数据的内容时：

```
NSLog(@"Value for keychain data: %@, l: %d", [self.keychain objectForKey:(__bridge id)(kSecValueData)], [[self.keychain objectForKey:(__bridge id)(kSecValueData)] length]); 
```

它正确打印出 cookie 的内容。

但是，如果我随后启动另一个应用程序（在第一个应用程序经过身份验证之后），它会在第 305 行崩溃：

```
NSAssert( result == noErr, @"Couldn't add the Keychain Item." ); 
```

在输出中出现此错误：

```
Assertion failure in -[KeychainItemWrapper writeToKeychain], /mydirectory/Classes/Models/Keychain/KeychainItemWrapper.m:305 
```

钥匙串数据的 NSLog 说它完全是空的。

每个应用程序的钥匙串标识符都是唯一的。我还查看了[这个线程](https://stackoverflow.com/questions/7989258/ios-keychain-secitemadd-returns-25243)- 但是我已将访问组设置为 nil，更重要的是 KeychainItemWrapper 中的此注释解释了在模拟器中无论如何都会跳过它：

> // 为模拟器构建的应用程序未签名，因此没有可供模拟器检查的钥匙串访问组。这意味着所有应用程序在模拟器上运行时都可以看到所有钥匙串项。

所以从表面上看，如果我登录到一个应用程序，我可以多次退出并重新启动，并且它可以完美加载。但是，一旦我登录另一个应用程序，第一个应用程序的钥匙串就会被擦除，因此它会进入登录屏幕，您尝试登录并获取新的 cookie，但随后由于无法添加钥匙串项而崩溃。修复它的唯一方法是重置模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:11:37.403

似乎您正试图在两个完全不同的设备（iphone和ipad）之间拥有一个通用的钥匙串，即使模拟器单独运行它们并且无法共享信息。

您需要将 cookie 的钥匙串或通用数据存储存储在 iCloud 之类的东西中，然后在两台设备之间同步该信息

本文提供了一些关于共享钥匙串的非常好的见解

[http://shaune.com.au/ios-keychain-sharing-data-between-apps/](http://shaune.com.au/ios-keychain-sharing-data-between-apps/)

# actionscript-3 - 如何在flex 3中围绕质心旋转矩形

> ID：12832660
> 
> 赞同：0
> 
> 时间：2012-10-11T05:15:53.917
> 
> 标签：actionscript-3, apache-flex, matrix, actionscript, flex3

我正在使用 matrix.rotate 方法来旋转矩形（在我的例子中是盒子）。我的旋转事件如下所示

公共函数transformObject（transformEvent：TransformEvent）：无效{

```
 var numChildrn:int = _markedObjectLayer.numChildren;
        var tempMatrix: Matrix = null;
        var tempx:Number;
        var tempy:Number;
        var tempHeight:Number;
        var tempWidth:Number;
        for(var i:int = 0; i < numChildrn; i++){
            var chld:MarkedObject = ObjectLayer.getChildAt(i)
            if (chld.selected){
                var  height:int = (BoxObject) chld.height;
                var  width:int = (BoxObject) chld.width;

                tempMatrix = chld.transform.matrix;

                tempHeight=height;  
                tempWidth=width;

                tempMatrix = MatrixTransformer.transform(tempMatrix,transformEvent.angle);

                tempMatrix.tx=tempx;
                tempMatrix.ty=tempy

                chld.transform.matrix = tempMatrix;
            }
        }

        invalidateDisplayList();
    }
} 
```

Matrix.transform 方法调用 matrix.rotate 方法

公共静态函数变换（源矩阵：矩阵，旋转：数字= 0）：矩阵{

```
 sourceMatrix = MatrixTransformer.rotate(sourceMatrix, rotation, "degrees");

        return sourceMatrix;
    }

    /**
     * Rotates a matrix and returns the result. The unit parameter lets the user specify "degrees", 
     * "gradients", or "radians". 
     */
    public static function rotate(sourceMatrix:Matrix, angle:Number, unit:String = "radians"):Matrix {
        if (unit == "degrees") 
        {
            angle = Math.PI * 2 *( angle / 360);
        }

        sourceMatrix. rotate(angle)
        return sourceMatrix;
    } 
```

问题是 x 和 y 是盒子的左去核器，因此它围绕左角旋转。但是，如果我尝试将 temp.x 和 temp.y 作为质心值，它不会围绕质心旋转？

谁能建议我在这里做错了什么？

谢谢阿克谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:49:26.607

如果你真的想要或必须直接使用矩阵，你可以使用内置的 flash 类更方便地做到这一点`fl.motion.MatrixTransformer`：

```
MatrixTransformer.rotateAroundInternalPoint(matrix, centroidX, centroidY, angleInDegrees); 
```

有关更多信息，请参阅 Adob [​​e 文档。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/motion/MatrixTransformer.html#rotateAroundInternalPoint%28%29)`MatrixTransformer`

但是，如果您*不需要*使用转换矩阵，更简单的解决方案是：

*   让您的对象以 (0, 0) 是它们的质心的方式绘制
*   使用简单的`rotation`属性，`DisplayObject`以更简单的方式实现相同的目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:41:09.853

弄清楚了。看来我没有在旋转前后将它们翻译成适当的坐标位置

//Step 1 固定矩形的坐标。我将它们添加到一个事件中，以便它们保持静态

```
 if (TransformEvent.X == 0 && TransformEvent.Y == 0)
        {
         TransformEvent.X = chld.x;
           TransformEvent.Y = chld.y;
         } 
```

//接下来获取矩形的质心

```
 tempx = TransformEvent.X + width/2;
       tempy= TransformEvent.Y +height/2; 
```

// 第三步：旋转前平移

```
 tempMatrix.translate(-1*tempx,-1*tempy); 
```

//旋转矩形

```
 tempMatrix = MatrixTransformer.transform(tempMatrix,transformEvent.angle); 
```

//旋转后平移到质心

```
 tempMatrix.translate(tempx,tempy); 
```

//将矩阵分配回矩形

```
 chld.transform.matrix = tempMatrix; 
```

感谢你的帮助。这个网站也帮我翻译了一下 [http://www.foxarc.com/blog/article/66.htm](http://www.foxarc.com/blog/article/66.htm)

# javascript - 点击更改图像边框颜色

> ID：12832661
> 
> 赞同：0
> 
> 时间：2012-10-11T05:16:03.790
> 
> 标签：javascript, jquery, css, image, border

我有一个页面，用户需要为 T 恤选择颜色。

当用户选择一种颜色时，我希望图像的边框颜色变为绿色。

如果用户点击了不同的颜色，它需要放回默认的边框颜色，并改变被点击的新图像的边框颜色。

[这](http://nidieunimaitre.spreadshirt.com/t-shirt-ska-A10916985/customize/color/2)正是我想要做的。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:20:56.223

假设您的图像使用`img`如下标签显示：

```
 <img name="img01" id="img01" src="image.gif" border="2" bordercolor="#000000"> 
```

实现 onClick 功能`fnChangeBorder`如下

```
 function fnChangeBorder(){
      document.getElementById("img01").style.borderColor="#00FF00";
   } 
```

或者

```
 function fnChangeBorder(){
      var imgElement = document.getElementById("img01");
      imgElement.setAttribute("style:borderColor", "#00FF00");
   } 
```

或者您可以定义一个样式类并执行以下操作：

```
 function fnChangeBorder(){
      document.getElementById("img01").style.className="greenClass";
   } 
```

编辑：

对于多个图像，具有索引 id，我们可以在 onclick 函数中将索引传递为：

```
 <img name="img1" id="img1" src="image.gif" border="2" bordercolor="#000000"
        onclick="javascript:fnChangeBorder(1);">

  <img name="img2" id="img2" src="image.gif" border="2" bordercolor="#000000"
        onclick="javascript:fnChangeBorder(2);"> 
```

并更新`fnChangeBorder`为：

```
 function fnChangeBorder(index){
      document.getElementById("img"+index).style.className="greenClass";
   } 
```

对于多个图像，具有非索引 id，我们可以将`id`onclick 函数中的 传递为：

```
 <img name="imgabc" id="imgabc" src="image.gif" border="2" bordercolor="#000000"
        onclick="javascript:fnChangeBorder('imgabc`);">

  <img name="imgxyz" id="imgxyz" src="image.gif" border="2" bordercolor="#000000"
        onclick="javascript:fnChangeBorder('imgxyz');"> 
```

并更新`fnChangeBorder`为：

```
 function fnChangeBorder(imageId){
      document.getElementById(imageId).style.className="greenClass";
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:35:15.247

用您的风格创建一个班级。例如

```
.selected{
   border : 1px solid green;
} 
```

然后在单击该项目时应用 className。避免使用 setAttribute 设置项目的类名。它有一些问题。然后单击图像删除所有项目上选定的类名，然后将选定的类名应用于目标图像。

# android - 单击自定义列表视图的项目不起作用

> ID：12832662
> 
> 赞同：0
> 
> 时间：2012-10-11T05:16:04.737
> 
> 标签：android, android-listview, custom-component

这是我点击自定义列表视图的代码。当我单击标题时，它可以工作，但在标题之后它不起作用。`CustomAdapter`是我的应用程序中的另一个类，我在其中定义了列表视图的标题和所有变量。请帮我解决这个问题。

```
 import android.app.Activity;
      import android.content.Intent;
      import android.os.Bundle;
      import android.text.Html;
      import android.view.View;
      import android.widget.AdapterView;
      import android.widget.Toast;
      import android.widget.AdapterView.OnItemClickListener;
      import android.widget.ListView;

         public class ProbabilityConditional extends Activity {
String htmlcodefor_root = "&#x221A", htmlcodefor_multiply = "&#xD7",
htmlcodefor_divide = "&#xF7", htmlcodefor_underroot = "&#00B3";
ListView listView1;
String htmlcodefor_space = "&#8194", htmlcodefor_pi = "&#928",
htmlcodefor_largespace = "&#8195";
String htmlcodefor_implies = "&#x21D2";
String htmlcodefor_i = "&#7522";
String htmlcodefor_angle = "&#952";
String htmlcodefor_overline = "&#x203E", htmlcodefor_plusminus = "&#177";

// TextView txtv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // txtv = (TextView)findViewById(R.id.txtTitle);
    // txtv.setText(Html.fromHtml("1.(constant)<sup><small>0</></> = 1"));
    listView1 = (ListView) findViewById(R.id.listView1);

    CustomAdapter.formula_one_custom_adapter_class_var =  Html.fromHtml("1  ");
    CustomAdapter.formula_two_custom_adapter_class_var = Html.fromHtml("2  ");

    CustomItemCall formula_data[] = new CustomItemCall[] {
                new                                                           CustomItemCall(CustomAdapter.formula_one_custom_adapter_class_var),
            new CustomItemCall(CustomAdapter.formula_two_custom_adapter_class_var),

    };
    CustomAdapter adapter = new CustomAdapter(this,R.layout.listview_item_row, formula_data);

    View header = (View) getLayoutInflater().inflate(R.layout.listview_header_row, null);
    listView1.addHeaderView(header);

    listView1.setAdapter(adapter);
    listView1.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
            System.out.println(position);
            Toast.makeText(ProbabilityConditional.this,position + "  " , Toast.LENGTH_LONG).show();
            // When clicked, show a toast with the TextView text
            if (position == 1) {
                startActivity(new Intent(ProbabilityConditional.this,ProbabilityConditionalDiscrete.class));
            } if (position == 2) {
                startActivity(new Intent(ProbabilityConditional.this,ProbabilityConditionalContinuous.class));
            }

        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:25:15.287

使您的 listview 可聚焦 true 在您的 xml 中添加这些行`android:focusable="true"` 并使列表的其他项目变为 false`android:focusable="false "`

```
listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
                    System.out.println(position);
                    Toast.makeText(ProbabilityConditional.this,position + "  " , Toast.LENGTH_LONG).show();
                    // When clicked, show a toast with the TextView text
                    if (position == 1) {
                        startActivity(new Intent(ProbabilityConditional.this,ProbabilityConditionalDiscrete.class));
                    } if (position == 2) {
                        startActivity(new Intent(ProbabilityConditional.this,ProbabilityConditionalContinuous.class));
                    }

                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:54:16.300

像这样写代码，简单的方法：- ListView 列表；list.setOnItemClickListener(new OnItemClickListener() {

```
 public void onItemClick(AdapterView parent, View view,
               int position, long id) 
       {
               //if in future you need to start a new activity
               //then add below line also in your activity

         Intent in = new Intent(MainActivity.this, SecondActivity.class);
                         startActivity(in);
                          }                                  
           }); 
```

# c# - 使用正则表达式提取匹配文本

> ID：12832664
> 
> 赞同：2
> 
> 时间：2012-10-11T05:16:18.870
> 
> 标签：c#, regex

我必须从报纸文章中提取摘要。摘要是根据给定的关键字和下面提到的规则提取的。

1.  摘要应为 200 个字符。

2.  一旦关键字出现在该句子中，就从文章中的该句子开始打印，最多打印 200 个字符

3.  如果匹配的句子出现在文章的结尾，以至于摘要少于 200 个字符，则从匹配的句子向后移动到前面的句子，直到最终打印出包含匹配句子的 200 个字符。

到目前为止我所做的是......

```
var regex = new Regex(keyword+@"(.{0,200})");

foreach (Match match in regex.Matches(input))
{
    var result = match.Groups[1].Value;
    Console.WriteLine(result);

    // work with the result
} 
```

上面的代码成功到达第一个匹配的句子，但在关键字最多 200 个字符**之后**开始打印，而不是匹配句子的开头。

如果在打印 200 个字符之前到达文章结尾，也没有回溯。

请指导我应该如何进行。即使有人不知道完整的解决方案，请在问题的子部分帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:25:01.950

```
var nextIndex = input.IndexOf(keyword);

while (nextIndex != -1)
{
    var index = nextIndex;
    // To start the 200chars result from right after the keyword, do instead:
    // var index = nextIndex + keyword.Length;

    // If you want to stop after you reached the end of the text once:
    // var end = false;

    if (index + 200 >= input.Length)
    {
        index = input.Length - 200;

        // If you want to stop after you reached the end of the text once:
        // var end = true;
    }

    var result = index < 0 ? input : input.Substring(index, 200);

    Console.WriteLine(result);

    // If you want to stop after you reached the end of the text once:
    // if (end) { break; }

    nextIndex = input.IndexOf(keyword, nextIndex + 1);
} 
```

如果您想搜索不区分大小写，只需在两个s中添加`StringComparison.OrdinalIgnoreCase`另一个参数即可。`IndexOf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:24:11.683

改用这个，

```
var regex = new Regex( @"(" + keyword+ @".{0,200})"); 
```

这将确保关键字也包括在内。否则你也可以使用这个

```
var result = match.Value; 
```

此外，您已指定 {0,200}，因此它将匹配大小在 0 到 200 之间的任何实例，因此它将匹配任意数量的字符，直到到达文章末尾。让我确切地知道你想在这方面实现什么。

如果您希望表达式从句子的开头返回结果，请尝试执行此操作

```
var regex = new Regex( @"\.(.+?" + keyword+ @".*)"); 
```

但在这种情况下，您将不得不手动删除多余的字符，因为此正则表达式往往会获取比您预期更多的字符。它将从包含关键字的句子的开头获取字符，直到段落的结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:27:40.840

使用正则表达式是必需的吗？如果不是，这是一个粗略的选择：

```
var index = input.IndexOf(keyword) + keyword.Length;
var remaining = input.Length - index;
index = remaining >= 200 ? index : index -= 200 - remaining;

Console.WriteLine(input.Substring(index, 200)); 
```

# curl - 使用 curl 发送参数时是否过滤了密码？

> ID：12832685
> 
> 赞同：1
> 
> 时间：2012-10-11T05:18:38.763
> 
> 标签：curl

当您使用 cURL --form 或 --data 选项发送用户名和密码时，它有多安全？与浏览器表单提交相比，它们有什么区别？

例如，以下内容与浏览器表单有何不同？

curl --from 用户名=fred --form 密码=secret [http://example.com](http://example.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:20:50.827

Curl 就像您的浏览器一样使用 HTTP。它与使用浏览器发送用户名和密码一样安全/不安全。（通过 HTTP，不安全，通过 HTTPS，对于大多数用途来说足够安全。）

现在，有一些微妙之处。例如，如果您在多用户系统上，其他人可能能够在您运行命令时查看进程表以查看纯文本密码。

并且 curl 可能不会那么积极地警告您有关 SSL 的特性（证书不稳定、比您可能想要的更弱的密钥等）。老实说，我不知道在这种情况下卷曲会引起多大的麻烦。

但从广义上讲，它与浏览器相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:26:06.763

Curl 模拟浏览器，因此在网络上它们都是相同的，HTTP 不安全，而 HTTPS 大多是安全的。浏览器添加了一些默认情况下可能不会发送的额外标头`curl`，但可以这样做。

使用该命令发送它的问题`curl`更本地化，如果你不走运并且有人`ps`在错误的时刻运行（或任务管理器），可能会看到你的命令行，包括密码。

# c++ - MonthOf TDateTime 歧义

> ID：12832686
> 
> 赞同：2
> 
> 时间：2012-10-11T05:18:41.433
> 
> 标签：c++, c++builder, tdatetime

我正在使用并正在使用数据类型`C++ Builder`创建一个 GUI 应用程序。`TDateTime`

当我`MonthOf()`在对象上使用该方法时`TDateTime`，我得到的值比对象的实际月份晚 1 个月`TDateTime`。

为什么是这样？这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:03:41.867

如果您想获取当前月份，请尝试以下代码：

```
TDateTime dt = Now();
CurMonth=StrToInt(FormatDateTime("mm", dt)); 
```

# asp.net - 具有多个实现 IPostBackEventHandler 的自定义控件的 ASP.NET 页面

> ID：12832688
> 
> 赞同：2
> 
> 时间：2012-10-11T05:19:05.393
> 
> 标签：asp.net, event-handling, postback

我有一个 ASP.Net 页面，其中包含多个实现 IPostBackEventHandler 接口的控件。代码的简化版本如下：

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //Custom Control
        MyTextBox mytxt = new MyTextBox();
        mytxt.ID = "mytxt";
        mytxt.TextChange += mytxt_TextChange;
        this.Form.Controls.Add(mytxt);

        //Custom Control
        MyButton mybtn = new MyButton();
        mybtn.ID = "mybtn";
        mybtn.Click += mybtn_Click;
        this.Form.Controls.Add(mybtn);
    }

    void mybtn_Click(object sender, EventArgs e)
    {
        Response.Write("mybtn_Click");
    }

    void mytxt_TextChange(object sender, EventArgs e)
    {
        Response.Write("mytxt_TextChange");
    }
}

[System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
public class MyTextBox : Control, IPostBackEventHandler
{
    public event EventHandler TextChange;

    protected virtual void OnTextChange(EventArgs e)
    {
        if (TextChange != null)
        {
            TextChange(this, e);
        }
    }

    public void RaisePostBackEvent(string eventArgument)
    {
        OnTextChange(new EventArgs());
    }

    protected override void Render(HtmlTextWriter output)
    {
        output.Write("<input type='text' id='" + ID + "' name='" + ID + "' onchange='__doPostBack(&#39;" + ID + "&#39;,&#39;&#39;)' />");
    }
}

[System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
public class MyButton : Control, IPostBackEventHandler
{
    public event EventHandler Click;

    protected virtual void OnClick(EventArgs e)
    {
        if (Click != null)
        {
            Click(this, e);
        }
    }

    public void RaisePostBackEvent(string eventArgument)
    {
        OnClick(new EventArgs());
    }

    protected override void Render(HtmlTextWriter output)
    {
        output.Write("<input type='button' id='" + ID + "' name='" + ID + "' value='Click Me' onclick='__doPostBack(&#39;" + ID + "&#39;,&#39;&#39;)' />");
    }
} 
```

有 2 个自定义控件 - MyTextBox 和 MyButton 实现 IPostBackEventHandler 接口。MyTextBox 具有 TextChange 事件，而 MyButton 具有 Click 事件。

如果我在页面上只保留一个控件（MyTextBox 或 MyButton） - 事件触发属性。但是对于页面上的两个控件，即使在单击 MyButton 之后，MyTextBox TextChange 事件也会被触发。当 MyTextBox 在页面上时，不会触发 MyButton Click 事件。

在将其发布到此处之前，我已经尝试了多种方法。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:35:59.537

问题的原因是您需要使用控件的 UniqueID 调用 __doPostBack 方法。这是至关重要的。此外，基本上服务器控件将 ClientID 呈现为元素的 ID，并将 UniqueID 呈现为元素名称。因此，如果您将渲染方法更新为以下内容，一切都会正常工作：

文本框：

```
output.Write("<input type='text' id='" + this.ClientID + "' name='" + this.UniqueID + "' onchange='__doPostBack(&#39;" + this.UniqueID + "&#39;,&#39;&#39;)' />"); 
```

按钮：

```
output.Write("<input type='button' id='" + this.ClientID + "' name='" + this.UniqueID + "' value='Click Me' onclick='__doPostBack(&#39;" + this.UniqueID + "&#39;,&#39;&#39;)' />"); 
```

**编辑**：

使用 UniqueID 似乎真的无助于解决您的问题。我不知道问题的原因，但我尝试使用基本 WebControl 类覆盖您的自定义文本框，这有助于解决问题。因此，您可以尝试使用此实现。

```
[System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
public class MyTextBox : WebControl, IPostBackEventHandler
{
    public event EventHandler TextChange;

    protected virtual void OnTextChange(EventArgs e)
    {
        if (TextChange != null)
        {
            TextChange(this, e);
        }

    }

    public void RaisePostBackEvent(string eventArgument)
    {
        OnTextChange(new EventArgs());
    }

    protected override HtmlTextWriterTag TagKey
    {
        get
        {
            return HtmlTextWriterTag.Input;
        }
    }

    protected override void AddAttributesToRender(HtmlTextWriter writer)
    {
        base.AddAttributesToRender(writer);
        writer.AddAttribute(HtmlTextWriterAttribute.Onchange, Page.ClientScript.GetPostBackEventReference(this, string.Empty));
        writer.AddAttribute("onkeypress", "if (WebForm_TextBoxKeyHandler(event) == false) return false;");
        writer.AddAttribute(HtmlTextWriterAttribute.Type, "text");
    }
} 
```

# django - 使用 for 循环时将数据输入数据库的问题

> ID：12832693
> 
> 赞同：2
> 
> 时间：2012-10-11T05:19:34.447
> 
> 标签：django, django-templates, django-views, django-database

在我的模板中，我对某些字段使用了 for 循环

```
<div class="register_div">

    <p>Title:</p>
    <p>{{ form.title }}</p>
</div>
<div class="register_div">

    <p>Upload Images :</p>
    <p>{{ form.image }}</p>
</div>

{% for item in product %}

<div class="register_div">

    <p>{{ item.Name }} <input type="text" name="custom[{{item.id}}]"/></p>

</div>

{% endfor %}

<div class="register_div">

    <p>Price:</p>
    <p>{{ form.price }}</p>
</div> 
```

如代码所示，如​​果该字段有三个记录，则有一个字段使用 for 循环，然后在表单中显示三个文本框，以便用户可以将数据提供给所有三个字段，但我在数据库中的表只有一个列作为他的 id 和一个为他的价值。

那么我如何将数据提供给我的数据库，以便如果用户感觉到所有三个文本框，那么它可以很容易地存储到我的数据库中。如果标题、图片和价格三个重复条目是可能的，那么没关系，但它应该有三个不同的项目名称和对应的值。

例如

如果有三个项目名称来自 for 循环，那么用户看到的是。

```
title
image
item 1 ---> its vaue
item 2 ---> its vaue
item 3 ---> its vaue
price 
```

现在我们应该像这样存储在数据库中

```
id  title  image   item_name    item_value   price
1    asd    a.jpg   item1           value 1      1111
2    asd    a.jpg   item2           value 2     555
3    asd    a.jpg   item3           value 3      789 
```

或者有任何其他有效的方法可以做到这一点，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:30:29.177

执行此操作的“有效方法”是确保您的模型与此数据匹配，然后使用[Model FormSets](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)。

如果出于某种神秘的原因，您不想定义模型以匹配您的数据，则可以使用普通[表单集](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)。

如果您不熟悉[Django 表单](https://docs.djangoproject.com/en/dev/topics/forms/)，我强烈建议您先尝试了解这些。[您的这个答案确实](https://stackoverflow.com/a/8905499/775982)对 django 表单进行了相当全面的演练。

# java - 寻找带有 Spring 的 OSGi（特别是 Spring MVC）教程

> ID：12832697
> 
> 赞同：6
> 
> 时间：2012-10-11T05:19:49.687
> 
> 标签：java, spring, maven, osgi

我是 OSGi 的新手，但对 Spring 非常熟悉。我在一家使用 OSGi 的新公司工作，但对 Spring 一无所知。我想了解如何将 Spring 与 OSGi 集成，特别是用于提供网页。我已经在网上搜索了几天，很难找到完整的教程来帮助我入门。我只找到有关使用 OSGi 和 Spring-DM 的文章。由于 Spring-DM 现在已作为蓝图集成到 OSGi 中，因此这些文章毫无用处。

任何人都可以向我指出使用 Spring（IoC、MVC 等）创建 OSGi 项目的教程，最好使用 Maven 进行依赖管理。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T05:47:28.223

您可以从[Spring Source](http://blog.springsource.org/)博客中找到巨大的帮助。

特别是您可以尝试以下链接：-

*   [http://blog.springsource.org/2007/04/05/so-whats-the-deal-with-spring-osgi/](http://blog.springsource.org/2007/04/05/so-whats-the-deal-with-spring-osgi/)
*   [http://blog.springsource.org/2008/05/01/completing-the-picture-spring-osgi-and-the-springsource-application-platform/](http://blog.springsource.org/2008/05/01/completing-the-picture-spring-osgi-and-the-springsource-application-platform/)
*   [http://lsd.luminis.eu/getting-started-with-spring-osgi/](http://lsd.luminis.eu/getting-started-with-spring-osgi/)
*   [http://www.javaworld.com/javaworld/jw-04-2008/jw-04-osgi2.html](http://www.javaworld.com/javaworld/jw-04-2008/jw-04-osgi2.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T05:32:00.880

您可以使用 spring-dm 在 OSGi 中使用 spring，但老实说我不推荐它。Spring dm 试图尽可能地与纯 Spring 兼容，因此在 OSGi 中引入了很多问题。此外，springsource 似乎已经放弃了 spring dm 的工作，所以对我来说这似乎是一条死路。我遇到过很多人，他们的印象是 OSGi 很复杂并且有很多类加载问题。许多这些问题起源于spring dm。

相反，我建议使用与 spring 足够相似的蓝图，这样您应该可以轻松开始使用它。我有一系列关于蓝图的文章，展示了如何将它与 maven 和 Apache Karaf 一起使用。在 OSGi 中更复杂的一件事是测试，因为您不能轻易地在容器外进行测试。不过，有一个很棒的 OSGi 测试框架，名为 pax Exam。我计划很快写一篇关于在 Apache Karaf 中进行测试的文章。

见：[http ://www.liquid-reality.de/display/liquid/Karaf+Tutorials](http://www.liquid-reality.de/display/liquid/Karaf+Tutorials)

到目前为止，我只使用 aries 蓝图。泉源也有双子座，但我没有真正的经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T22:05:28.453

《[Spring Dynamic Modules in Action](http://www.manning.com/cogoluegnes/) 》一书确实可以帮助您总体上了解 OSGi 和具体的 Spring DM。我真的可以推荐它！

# java - 是否可以将函数调用绑定到 Java 中的运行时？

> ID：12832702
> 
> 赞同：0
> 
> 时间：2012-10-11T05:20:03.473
> 
> 标签：java, runtime, function-calls

考虑一个简单的例子，我要求用户从 10 种不同的水果中选择一种水果。假设水果是，苹果，橙子，芒果，......等等，如果用户选择苹果，我调用apples（），如果他选择芒果，我调用mangoes（）等等......

要选择要调用的函数，我不想使用 switch 或 if-else 语句。如何选择在运行时调用哪个函数？

注意：我使用的编程语言是 Java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:24:00.557

使用`Reflection`. eg：将所有函数写在一个类中；说`com.sample.FruitStall` 然后使用下面的代码。

```
String className = "com.sample.FruitStall";
String methodName = "apple"; //here you will choose desired method
Object result;
Class<?> _class;
        try {
            _class = Class.forName(className);
        } catch (Exception e) {
            e.printStackTrace();
        }
            Object[] args = new Object[1];  // To Supply arguments to function
            result = _class.invokeMethod(methodName, args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:24:32.790

使用 java [Refection api](http://docs.oracle.com/javase/tutorial/reflect/index.html)在运行时调用函数。

```
 Class noparams[] = {};
        Class cls = Class.forName("com.test.Fruit");
        Object obj = cls.newInstance();

        //call the printIt method
        Method method = cls.getDeclaredMethod("apples", noparams);
        method.invoke(obj, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:27:56.983

使用设计模式“命令”。 [http://www.codeproject.com/Articles/186192/Command-Design-Pattern](http://www.codeproject.com/Articles/186192/Command-Design-Pattern)

隐藏它需要执行的操作的细节。

# wcf - WCF：使用 System.ServiceModel.Channels.Message 类的问题？

> ID：12832705
> 
> 赞同：3
> 
> 时间：2012-10-11T05:20:06.507
> 
> 标签：wcf, message

我正在尝试将 WCF 服务与原始消息一起使用。

1）WCF服务代码：

```
[DataContract]
public class Person
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string FirstName { get; set; }

    [DataMember]
    public string LastName { get; set; }
}

public static List<Person> CreateEmployees()
{
    List<Person> lstPersons = new List<Person>()
    {
        new Person { Id = 1, FirstName = "Andrey", LastName = "Andreyev" },
        new Person { Id = 2, FirstName = "Sergey", LastName = "Sergeyev" }
    };

    return lstPersons;
}

[ServiceContract]
public interface ITestService
{
    [OperationContract(Action = TestService.RequestAction, ReplyAction = TestService.ReplyAction)]
    Message GetPersonById(Message id);
}

public class TestService : ITestService
{
    public const String ReplyAction = "http://localhost:4249/Message_ReplyAction";
    public const String RequestAction = "http://localhost:4249/Message_RequestAction";

    public Message GetPersonById(Message id)
    {
        string firstName = Employees.CreateEmployees().First(e => e.Id == id.GetBody<int>()).FirstName;
        Message response = Message.CreateMessage(id.Version, ReplyAction, firstName);
        return response;
    }
} 
```

2）客户端代码：

```
static void Main(string[] args)
{
    TestServiceClient client = new TestServiceClient();
    String RequestAction = "http://localhost:4249/Message_RequestAction";
    int value = 1;
    Message request = Message.CreateMessage(MessageVersion.Default, RequestAction, value);
    Message reply = client.GetPersonById(request);
    string firstName = reply.GetBody<string>();

    Console.WriteLine(firstName);
    client.Close();
} 
```

当我运行客户端时： int value = 1 一切正常。但是，当我使用：int value = 2 时，出现以下错误：

System.Runtime.Serialization.SerializationException 未处理 Message="第 1 行位置 276 中的错误。期望来自命名空间的元素“字符串”' [http://schemas.microsoft.com/2003/10/Serialization/](http://schemas.microsoft.com/2003/10/Serialization/) '.. 遇到'元素'名称为“故障”，命名空间“ [http://www.w3.org/2003/05/soap-envelope](http://www.w3.org/2003/05/soap-envelope)'。" Source="System.Runtime.Serialization" StackTrace: 在 System.Runtime.Serialization.DataContractSerializer.InternalReadObject(XmlReaderDelegator xmlReader, Boolean verifyObjectName) 在 System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName) 在 System.Runtime .Serialization.XmlObjectSerializer.ReadObject(XmlDictionaryReader reader) at System.ServiceModel.Channels.Message.GetBody[T](XmlObjectSerializer serializer) at System.ServiceModel.Channels.Message.GetBodyT at ClientTestService.Program.Main(String[] args) in E:\Projekti\WCF\Parus\ClientTestService\ClientTestService\Program.cs:System.AppDomain 的第 22 行。_nExecuteAssembly(Assembly 程序集，String[] args) 在 System.AppDomain。

在线：

```
string firstName = reply.GetBody<string>(); 
```

服务已启动，我在 VS2008 中通过“添加服务引用...”添加了服务引用。我使用 .NET Framework 3.5。

我不确定为什么会收到此错误。

当我不使用 Message 类时，一切正常。我的意思是：

```
[ServiceContract]
public interface ITestService
{
    [OperationContract]
    Person GetPersonById(int id);
}

public class TestService : ITestService
{
    public Person GetPersonById(int id)
    {
        Person person = Employees.CreateEmployees().First(e => e.Id == id);
        return person;
    }
} 
```

2）客户端代码：

```
static void Main(string[] args)
{
    TestServiceClient client = new TestServiceClient();
    int value = 1;
    Person person = client.GetPersonById(value);

    Console.WriteLine(person.FirstName);
    client.Close();
} 
```

如果有人可以提供帮助，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:22:15.713

```
Message reply = client.GetPersonById(request); 
if(reply.IsFault)
  throw new GoransException(reply.toString());
string firstName = reply.GetBody<string>();
//... 
```

# javascript - 重置类内的所有元素

> ID：12832708
> 
> 赞同：0
> 
> 时间：2012-10-11T05:20:18.460
> 
> 标签：javascript, reset

有没有办法将所有元素重置为其默认值？

我试过这个但什么也没发生

```
<script>
c = document.getElementsByClassName('myall')

for( b=0; b<c.length; b++ )
{
    c[b].reset();
}
<script> 
```

.

```
<div class='myall'>
    <span>something default</span>
    <div>something default</div>
    <p>something default</p>
</div> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:43:03.297

检查您的代码是否有结束标记。然后使用，

```
<script>
  var c = document.getElementsByClassName('myall')
 for( var b=0; b<c.length; b++ )
 {
     c[b].html(default_value);
 }
</script> 
```

**html**

```
<div class='myall'>
   <span id="a">something default</span>
   <div id="b">something default</div>
   <p id="c">something default</p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:43:19.967

要“重置”和元素，您需要记住它的原始内容，然后在调用“重置”它时替换它，例如

```
var markupCache = {};

function modifyElement(id, newMarkup) {

    var el = document.getElementById(id);

    // Only store innerHTML the first time
    if (!(el in markupCache)) {
      markupCache[id] = document.getElementById(id).innerHTML;
    }
    el.innerHTML = markup;
}

function restoreElement(id) {

  // Only restore markup if have cached some for this element
  if (id in markupCache) {
    document.getElementById(id).innerHTML = markupCache[id];
  }
} 
```

请注意，这不会重置元素自己的属性和属性，只会重置内部 HTML。这可以通过使用[*outerHTML*](http://www.w3.org/TR/html5/apis-in-html-documents.html#outerhtml)属性来部分解决，但这并没有得到很好的支持。

*innerHTML*或*outerHTML*都不会恢复动态添加的侦听器，并且可能会或可能不会在某些浏览器中恢复原始默认值（但在其他浏览器中会）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:28:39.280

javascript 方法`.reset()`仅适用于`<form>`标记。如果您想要一种简单的方法来清除特定类的输入值或元素文本，您可以使用[jQuery](http://api.jquery.com/empty/)。

否则，对像这样的元素使用类似的东西`div`，`span`：

```
c[b].innerHTML = ""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T06:14:29.200

你可以用 HTML5 data-* 属性做这样的事情：

```
<div id='myall'>
    <span data-default="something default">something default</span>
    <div data-default="something default">something default</div>
    <p data-default="something default">something default</p>
</div>     ​
...
<script>
    c = document.getElementById('myall').children;

    for( b=0; b < c.length; b++ )
    { 
        defaultValue = c[b].getAttribute('data-default');
        if (defaultValue) {
            c[b].innerText = defaultValue;
        }
    }
</script> 
```

​</p>

# mips - MIPS QTSPIM 64 位

> ID：12832709
> 
> 赞同：0
> 
> 时间：2012-10-11T05:20:29.360
> 
> 标签：mips

所以我使用的是 QTSPIM，而且我知道 MIPS 只能处理 32 位。这也是一个任务，只是把它放在那里。

所以目的是让我能够显示阶乘（14）。目前，我相信该程序只能达到阶乘（12）。能够支持64位有多难。我知道我需要存储高 32 位和低 32 位？

有人可以提供提示或示例代码吗？

```
 # Iterative program to compute n!

            # The value n is entered by the user

            .globl  main
main:
            li      $v0, 5
            syscall                 # Get user input for n
            move    $s0, $v0        # s0: n

            move    $a0, $s0        # put n into first parameter
            jal     factorial
            move    $s1, $v0        # s1: n!

            move    $a0, $s1    
            li      $v0, 1
            syscall                 # display n!            

            li  $v0, 10
            syscall

#-----------------------------------
            # Factorial Function
            #
            # Parameters:  a0 - n
            # Return Values: V0 - n!
factorial:
            #---------------------- Stuff at beginning of function
            addi    $sp, $sp, -12   # space for 3 values
            sw      $ra, 0($sp)
            sw      $s0, 4($sp)
            sw      $s1, 8($sp)

            #---------------------- body of function
            move    $s0, $a0        # s0: n
            li      $s1, 1          # s1: n! (init to 1)
            li      $t1, 1          # t1: loop exit test value
floop:      ble     $s0, $t1, done  # when n decrements down to 1, exit
            mul     $s1, $s1, $s0   # s1 = s1 * n
            addi    $s0, $s0, -1    # n--
            j       floop

            #---------------------- Stuff at end of function
done:       move    $v0, $s1        # put n! into return register
            lw      $ra, 0($sp)
            lw      $s0, 4($sp)
            lw      $s1, 8($sp)
            addi    $sp, $sp, 12
            jr      $ra             # TTFN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T23:35:41.067

如果使用乘法指令的二操作数形式`MULT $s1,$s0`，它将 和 的 64 位乘积`$s1`放入`$s2`和`HI`特殊`LO`寄存器。

您可以使用此功能通过一些额外的工作来计算 64 位阶乘。具体来说，一旦乘积超过 32 位，您将需要编写代码来执行相当于小学长乘法的操作。

# java - JDK 7 fork/join 简单示例

> ID：12832710
> 
> 赞同：4
> 
> 时间：2012-10-11T05:20:49.590
> 
> 标签：java, java-7, fork-join

有人可以提供一个简单的 JDK 7 中的 fork/join 功能示例吗？

我查看了 Oracle 提供的示例，有点混乱

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:24:30.040

使用以下链接：-

[http://rashidnoorani.blogspot.in/2012/08/how-to-use-fork-join-framework-features.html](http://rashidnoorani.blogspot.in/2012/08/how-to-use-fork-join-framework-features.html)

[http://www.drdobbs.com/jvm/using-jdk-7s-forkjoin-framework/231000556](http://www.drdobbs.com/jvm/using-jdk-7s-forkjoin-framework/231000556)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:15:31.970

这是 oracle 文档：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)

性能： http: [//www.developer.com/java/java-7-forkjoin-framework.html](http://www.developer.com/java/java-7-forkjoin-framework.html)

此外，您可以`fork and join java 7`在 Google 中搜索。

# javascript - 如何在不使用 setTimeout 的情况下添加延迟？

> ID：12832713
> 
> 赞同：-1
> 
> 时间：2012-10-11T05:20:55.007
> 
> 标签：javascript, jquery

我正在创建一个问答应用程序，其中将向用户显示问题列表，并且我正在使用 setTimeout() 函数来隐藏问题以及其他一些操作/验证。但问题是用户可以使用 clearTimeout() 函数轻松绕过验证。

有没有其他方法可以在没有 setTimeout() 的情况下创建 javascript 轮询。

**编辑：**

谢谢大家。我已经更新了我的代码以在服务器端包含验证。但是好奇的基础*是没有任何方法可以在不使用 setInterval() 或 setTiemout() 的情况下实现轮询功能*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:24:24.917

jQuery 有一个：[http](http://api.jquery.com/delay/) ://api.jquery.com/delay/ 但是如果您担心用户更改您的 JS，请在服务器端添加验证，在 JS 中运行的任何代码都无法避免这种 hack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:26:29.277

好吧，一开始你不能把所有的问题都放在客户端！回答一个问题后，您必须加载它们，请按照基本步骤操作

1.  只带一个问题给客户端，用ajax把你的答案提交给服务器。
2.  当问题发送到客户端时，维护服务器的日期和时间，您可以使用它来验证何时将答案提交到服务器以及花费的时间。
3.  不要中继客户端数据，开发人员工具大多可用，人们可以使用您的系统

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:29:36.567

仅当您保存了 setTimeout 返回的“超时 id”时，clearTimeout 才有效，即：

```
var timer = setTimeout(foo, delay);
...
clearTimeout(timer); // works;

setTimeout(bar, delay);
...
// to cancel previous timer, we must use a "hack" (as no reference is saved, look at EDIT below) 
```

但无论如何，您永远不应该只依赖客户端（javascript）检查，服务器端检查是必须的（除此之外，客户端也很不错）。

在服务器端：

当您提供问题时，您只需将时间戳保存在某处（例如，在会话变量中），然后当您收到答案时，您将当前时间戳与提供该问题时保存的时间戳进行比较，并确保用户花费的时间不超过允许回答问题。这样，即使他/她找到了作弊的方法（或者只是他/她关闭了 javascript），您也可以确保他/她不会在每个问题上花费超过允许的时间。

**编辑：**

如对此答案的评论中所述，如果我们不知道确切的计时器ID，则可以通过循环取消所有计时器来取消超时/间隔/动画帧。这是可能的，因为所有主流浏览器都将计时器 ID 实现为连续整数。

我将此解决方法称为 hack，因为在我能找到的任何规范中都没有定义 timerID 值（由 setTimeout/setInterval 返回）。目前，所有浏览器（似乎并没有全部检查）对计时器 ID 使用连续编号方案。而且，这不是我们可以依赖的东西，因为它不是标准化的功能。

无论如何，我的回答中重要的是，这**不应该**只在 JavaScript 中完成。曾经。

# c# - 未调用 Windows 窗体文本框函数

> ID：12832716
> 
> 赞同：1
> 
> 时间：2012-10-11T05:21:59.540
> 
> 标签：c#, winforms

我对 Windows 窗体有点陌生，所以如果有一个简单的解决方案，我深表歉意，但我在谷歌上找不到任何东西。如果我将一个项目（例如文本框）拖到表单上，然后双击它，将为我创建 textbox_TextChanged 函数。这按预期工作。但是，如果我尝试添加一个新函数，例如 textbox_Click，它将永远不会被调用。在另一个项目中，我尝试添加一个 textbox_Validating 函数并且它也没有被调用（我确保在属性中启用了验证）。

有谁知道为什么只调用 TextChanged 函数？

这是有效的：

```
 private void textBox2_TextChanged(object sender, EventArgs e)
    {
        textBox2.BackColor = activeColor;
    } 
```

这是不起作用的：

```
private void textBox2_Click(object sender, EventArgs e)
    {
        textBox2.BackColor = activeColor;
    } 
```

我在 textBox2_Click 方法中设置了一个断点，它永远不会被调用。我浏览了网络并尝试了其他方法，例如 _LeftMouseClick 和 _LeftMouseButtonDown，但它们无法正常工作。

这也不起作用：

```
 protected void tbNewPassword_Validating(object sender, CancelEventArgs e)
    {
        if (tbNewPassword.Text.Length < 6)
            epErrorProvider.SetError(tbNewPassword, "Your password must be 6 characters or longer.");
    } 
```

与 _Click 方法一样，我设置了一个断点并且它永远不会被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T05:32:39.390

选择文本框，打开属性窗口，在顶部，有一个看起来像闪电的小图标（顶部还有一些其他图标，1看起来像'A to Z'），点击它，它会显示所有事件。向下滚动，验证在最后。输入验证函数名称，按回车键，代码中会显示验证函数。在那里添加你的代码。

这有助于您添加事件。

或者，您需要直接添加事件处理程序，例如

```
 this.btnIsConnected.Click += new System.EventHandler(this.btnIsConnected_Click); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:40:48.063

您已使用有效的内部代码创建了一个事件，但它没有被调用。为什么？因为它没有附加到您的控件（在这种情况下为文本框），所以要将事件处理程序附加到控件，您可以[查看这篇文章](https://stackoverflow.com/questions/3486377/how-to-add-an-event-to-a-usercontrol-in-c)。对于熟悉所有@urlreader 帖子中的事件很有用。

# php - 如何在 PHP 中更改 SalesForce 端点

> ID：12832717
> 
> 赞同：0
> 
> 时间：2012-10-11T05:22:05.710
> 
> 标签：php, salesforce

我正在使用 PHP 库：[http ://wiki.developerforce.com/page/Force.com_Toolkit_for_PHP](http://wiki.developerforce.com/page/Force.com_Toolkit_for_PHP)

据我了解，这是最“官方”的库。如何更改端点以使用`test.salesforce.com`沙盒而不是生产销售人员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:54:26.903

解决方案是登录沙盒帐户并从该环境下载新的 WSDL。

设置 > 开发 > API

# android - android 的函数图跟踪器

> ID：12832719
> 
> 赞同：0
> 
> 时间：2012-10-11T05:22:18.737
> 
> 标签：android, debugging, linux-kernel, arm, trace

我正在尝试使用图形跟踪器来测量时间延迟。我能够配置函数跟踪器，但无法配置函数图跟踪器。当我尝试在启动时使用启用了函数图跟踪器的内核映像时，它说`not syncing vfs unable to mount root fs on unknown-block 0 0`

内核版本 - 3.0.21

arm 架构是否支持函数图跟踪器？

谢谢

# google-chrome - 将书签转换为 Chrome 扩展程序不起作用

> ID：12832720
> 
> 赞同：1
> 
> 时间：2012-10-11T05:22:19.627
> 
> 标签：google-chrome, google-chrome-extension

我有一个书签可以使所有隐藏的输入表单字段可见。为了方便其他用户访问，我想将其转换为 Chrome 扩展程序。

我使用[http://sandbox.self.li/bookmarklet-to-extension/](http://sandbox.self.li/bookmarklet-to-extension/)进行转换，但安装后，它不起作用。

如果有人可以请告诉我以下代码有什么问题：

## 清单.json

```
{
    "background": {"scripts": ["background.js"]},
    "browser_action": {
        "default_icon": "icon-128.png",
        "default_title": "WP3"
        },
    "name": "WP3",
    "description": "WP3",
    "icons": {
        "16": "icon-16.png",
        "48": "icon-48.png",
        "128": "icon-128.png" },
"permissions": [
    "tabs",
    "http://*/*",
    "https://*/*"
],
"version": "0.1",
"manifest_version": 2
} 
```

## 背景.js

```
 <script>
      chrome.browserAction.onClicked.addListener(function(tab) {
      chrome.tabs.executeScript(tab.id, {file: "bookmarklet.js"})
      });
 </script> 
```

## 书市.js

```
(function(){var is=document.getElementsByTagName("input");for(i=0;i<is.length;i++){if(typeof(is[i].attributes["type"])!="undefined"&&is[i].attributes["type"].value.toLowerCase()=="hidden"){is[i].setAttribute("type","text");is[i].setAttribute("style","background-color:#000000;color:#FFFFFF");}}})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T16:56:48.827

> JavaScript 文件中有 HTML 标签？那是无效的。尝试同时删除 <script> 和 </script>。如果它没有帮助，请在单击 chrome 操作按钮后在 Chrome Web 工具控制台中发布错误。

# sql-server - 修改存储过程以显示员工的最新角色

> ID：12832738
> 
> 赞同：1
> 
> 时间：2012-10-11T05:23:55.573
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个存储过程，它返回员工 3 个月的数据。我必须以这样的方式修改程序，以便在显示员工的角色时是他最近一个月的角色。

如果最近一个月的数据不存在，则显示上个月的角色。该表有一个标识列 (PK) `EMP_ID`、`Role`和各种其他列。但要回答这个问题，我希望这么多数据就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:57:26.917

如果您发布示例代码会更好。不管怎样，看看这个。它可能会给你你想要的。过程中的代码应该是这样的。

```
select
id_column
, emp_Id
,(select top 1 role from table_name where emp_id=@emp_Id and role is not null order by your_date_Column desc )
,col1
,....
,coln
from Table_Name where emp_id=@emp_id 
```

# javascript - 在函数调用中包含输入内容

> ID：12832744
> 
> 赞同：0
> 
> 时间：2012-10-11T05:24:20.747
> 
> 标签：javascript, jquery, html

我需要包含文本框的内容（通过函数调用发送到函数）。目前我有

```
<form name="blah">
<input type="text" name="compdate" id="compdate" readonly onClick="GetDate(this);" />
<input type="button" onClick="ajaxwin.load('ajax', 'apptoshop.php?sid='.$_GET['sid'].'&doc=XXXX', ' '); return false">
</form> 
```

我需要在您看到 XXXX 的地方包含 compdate 的内容，但是我不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:33:30.403

要获取文本框的值，请使用简单的 javascript

```
document.getElementById("compdate").value 
```

或者你可以使用 jQuery

```
$('#compdate').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:27:00.277

```
'&doc='+$("#compdate").val() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:29:52.600

修改后的代码：

```
<form name="blah">
<input type="text" name="compdate" id="compdate" readonly onClick="GetDate(this);" />
<input type="button" onClick="ajaxwin.load('ajax', 'apptoshop.php?sid='.$_GET['sid'].'&doc=document.blah.compdate.value', ' '); return false">
</form> 
```

# entity-framework - 具有多个数据库的 asp.net mvc 实体框架

> ID：12832745
> 
> 赞同：0
> 
> 时间：2012-10-11T05:24:23.823
> 
> 标签：entity-framework, entity-framework-4, asp.net-mvc-4, edmx, edmx-designer

我有一个使用 EF 的 ASP.Net MVC 项目。我在工作计算机和家用计算机上开发此应用程序。以下是在我的 Web.config 中。如何使用每个办公室的正确连接字符串更改 EDMX？到目前为止，我必须删除 EDMX 并重新添加它们并注释掉其他连接字符串。谢谢。

```
 <connectionStrings>
    <clear/>
    <!-- At Home connections -->
    <add name="App1Entities" connectionString="metadata=res://*/Models.App1Model.csdl|res://*/Models.App1Model.ssdl|res://*/Models.App1Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=my-pc\SqlExpress;initial catalog=App1Database;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="Service1Entities" connectionString="metadata=res://*/Models.Service1Model.csdl|res://*/Models.Service1Model.ssdl|res://*/Models.Service1Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=my-pc\SqlExpress;initial catalog=ServiceDatabase;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />

    <!-- At Work connections 
    <add name="App1Entities" connectionString="metadata=res://*/Models.App1Model.csdl|res://*/Models.App1Model.ssdl|res://*/Models.App1Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=sqlServer1;initial catalog=App1Database;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="Service1Entities" connectionString="metadata=res://*/Models.Service1Model.csdl|res://*/Models.Service1Model.ssdl|res://*/Models.Service1Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=sqlServer2;initial catalog=ServiceDatabase;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    -->
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:28:16.740

假设两个数据库中的模式相同，只需替换 web.config 中的连接字符串即可。所以我真的不明白你的困惑是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:42:22.483

使用 Visual Studio，您可以使用[Config Transforms](http://msdn.microsoft.com/en-us/library/dd465318%28v=vs.100%29.aspx)根据在 Configuration Manager 中选择的模式（默认设置“Release”和“Debug”，您可以添加其他）生成不同的配置设置。

为连接字符串设置一个转换，然后当您将站点发布到发布模式时，正确的连接字符串将在那里。

为“家庭”或其他内容添加模式，并根据您在家的环境使用适当的连接字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:45:05.647

您需要多个连接字符串，但您不必在代码中放置开关；采用

```
<connectionStrings configSource="MyLocalConnectionStrings.config" /> 
```

[见 MSDN](http://msdn.microsoft.com/en-us/library/ms254494%28v=vs.80%29.aspx)

您需要将 MyLocalConnectionStrings.config 维护在与 web.config 相同的目录中，并且每个开发环境都有不同的版本。

# objective-c - 调用 popViewContrller 方法时 iphone 应用程序崩溃

> ID：12832754
> 
> 赞同：3
> 
> 时间：2012-10-11T05:25:02.060
> 
> 标签：objective-c, ios, core-data, memory

我的应用程序（arc，ios5）有时会在我拍照并保存到`CoreData`. 使用*Instruments*发现崩溃前有内存警告，于是尝试了解内存是如何使用的。

我的应用程序将行程存储在 CoreData（共 200MB）中，每次行程有数百个`CLLocation`对象和数十个`UIImage`对象。

每次我通过**pushViewController**查看一次行程详情时，内存使用量都会增加；但是在我**popViewController**之后，内存使用量仍然存在。

我认为有几个嫌疑人：

1.  CoreData 缓存，但我不知道如何清除它；
2.  详细视图控制器，因为我没有看到在每个**popViewController之后调用任何****viewDidUnload**；

 **经过一些测试，我很困惑，即使我手动调用**viewDidUnload**，内存使用量仍然存在。

我还在我的应用程序的 ios5.0 模拟器中测试了内存泄漏工具，它很干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:36:18.467

由于内存问题，不建议将图像存储在 coredata 中。检查您是否可以将其存储在文件夹中，并将图像名称/路径存储在您的核心数据中。大多数情况下应该可以解决内存问题。

这里有一些关于这个[CoreData (for iphone) storage images](https://stackoverflow.com/questions/2131722/coredata-for-iphone-storing-images)和[Core Data - Storing Images (iPhone)的帖子](https://stackoverflow.com/questions/2090028/core-data-storing-images-iphone)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:53:09.300

首先，不要使用核心数据来存储图像数据。在 iOS 5 及更高版本上，您可以在属性的文件检查器上将属性检查为“允许外部存储”。您还可以将图像保存在文档目录中，并使用核心数据保存图像的路径。将这些图像呈现给界面时，将它们缓存在 NSCache 上，以便在内存警告开始弹出时清除这些图像。更改管理这些图像的方法将对内存不足警告期间的内存响应产生重大影响。**

# c++ - fscanf 没有按预期工作

> ID：12832758
> 
> 赞同：1
> 
> 时间：2012-10-11T05:25:12.633
> 
> 标签：c++, scanf

我`fscanf`在 C++ 中使用如下：

这是我的文本文件：

> abcd
> efgh

“efgh”后没有空格或换行。现在这是我的循环：

```
FILE* fp;
char eof = 0;
do
{
    char str[20];
    fscanf(fp, "%s", str);
    std::cout<<str<<std::endl;
}
while((eof = fgetc(fp)) != eof) 
```

我期望的输出是：

> abcd
> efgh

但我得到的实际输出是：

> abcd
> efgh
> efgh

我调试了一个发现，在读取“efgh”之后，读入 eof 的值是 '\n' 而不是 EOF。环境是linux mint。我想知道为什么最后一个字符串总是被读取2次。请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:36:22.823

最后一个字符串没有被读取两次。问题是循环的继续测试：

```
(eof = fgetc(fp)) != eof 
```

这将`fgetc()`' 的返回值分配给`eof`并检查它是否不等于`eof`。逻辑上很难做到的事情。但是，当`fgetc()`文件位于 时调用时`EOF`，它会返回`-1`。这被强制转换为 a `char`，但括号中的子表达式保留该值`-1`（由于类型提升规则）。与`-1`255 或 -127 相比（取决于 char 是有符号还是无符号）最终终止循环。

第三次通过循环，`fscanf()`失败并且不更新`str`：这就是为什么相同的值似乎被读取了两次。

要修复它，最直接的技术是：

```
do {
 ...
} while (!feof (fp)); 
```

但是，在许多操作系统上，`feof()`它不能很好地工作，`fscanf()`因为文件结束指示直到`fscanf()`失败才可靠设置。一种更可靠、抗 O/S 的技术是使用

```
do {
    int result = fscanf (fp, ...whatever...);
    if (result < 0)   // end of file or i/o error?
         break;
} while (!feof (fp)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T07:36:10.147

[在另一个线程中跟进 Christian Rau 的评论，我已经将我的第一点更改为与我现在意识到的相对应]

您的代码有几个问题。一些最明显的是：

*   您末尾的条件`do...while`具有未定义的行为。在表达式`eof = fgetc(fp)) != eof`中，您修改一个对象 ( `eof`)，并在表达式中的其他地方访问它，而不是确定要存储的值。就标准而言，任何事情都可能发生，实际上不同的编译器会做不同的事情。

*   您将结果分配`fgetc`给 a `char`，而不是 a `int`。的返回值`fgetc`要么在范围内 `[0...UCHAR_MAX]`，要么是`EOF`（保证为负）。换句话说，它可以比 a 中的值多一个`char`。然后比较`char`with的结果`EOF`取决于 plain`char`是否签名。如果它没有签名，它永远不会有负值，因此永远不会等于`EOF`。如果已签名，则特定字符代码（0xFF 或`'ÿ'`latin-1）将被检测为文件结尾。的返回值`fgetc`应始终分配给 a `int`，并且`char`仅应 在测试*后转换为*`EOF`.

*   您使用的结果`fscanf`没有检查函数是否成功。在 C++ 中，IO，无论是 iostream 还是`FILE*`不可*预测* 的。由于接口的定义方式，无法提前判断是否会遇到文件结尾。您必须尝试读取，然后测试读取是否成功。

*   您正在使用`fscanf`into a`char[]`而不限制输入长度。这是等待发生的缓冲区溢出。

在 C++ 中，写你正在做的事情的最自然的方式是：

```
std::string word;
while ( anIStream >> word ) {
    //  ...
} 
```

使用较旧的 C 兼容流，您将编写：

```
char word[20];
while ( fscanf( fp, "%19s", word ) == 1 ) {
    //  ...
} 
```

在这两种情况下，成功检查都会控制循环；在 C 接口的情况下，您使用格式宽度说明符来确保您不会超出缓冲区。（在这两种情况下，您都必须定义在循环外读取的变量，即使您只会在循环中使用它们。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:36:19.763

你正在用 eof 检查 eof。尝试像这样检查

```
while( (eof = fgetc(fp)) != EOF) 
```

# regex - 多个相同字符之间的 SED RegEx

> ID：12832762
> 
> 赞同：2
> 
> 时间：2012-10-11T05:25:36.903
> 
> 标签：regex, bash, sed

我将如何在所有这些标签和符号之间获取以下标题文本？

我需要抓住的东西：

```
Some Title Here v1.2.3 Some Other Description About the Title in Here 
```

示例源代码：

```
<body><pre>=============================================================
Some Title Here v1.2.3 Some Other Description About the Title in Here
=============================================================

some other data here but I don't care about it ...

</pre></body></html> 
```

我试过这样做，但它甚至在 pre 标签之前也抓住了整个顶部，但下面的部分似乎工作正常，除了它也抓住 = 符号。

```
sed -n '/<pre>=/,/=/p 
```

上述 sed 代码的结果是：

```
<body><pre>=============================================================
Some Title Here v1.2.3 Some Other Description About the Title in Here
============================================================= 
```

任何有关此的反馈都将受到欢迎。非常感谢，一如既往，StackOverflow 是 Q 和 A 的最佳社区 =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:28:42.370

一种使用方式`GNU sed`：

```
sed -n '/<pre>=/,/=/ { //!p }' file.txt 
```

结果：

```
Some Title Here v1.2.3 Some Other Description About the Title in Here 
```

解释：

`//!p`只是告诉`sed`忽略最后一场比赛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:37:40.247

更新OP的解决方案：

```
$ sed -n '/<pre>=/,/=/{/=$/d;p;}' file 
Some Title Here v1.2.3 Some Other Description About the Title in Here 
```

从选定的行范围中，删除以 = 结尾的行，这样您就剩下中间的行了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:45:11.483

这可能对您有用（GNU sed）：

```
sed '/^<body><pre>=\+$/,/^=\+$/!d;//d' file 
```

# php - ZFDataGrid 支持翻译器

> ID：12832772
> 
> 赞同：0
> 
> 时间：2012-10-11T05:26:26.770
> 
> 标签：php, zend-framework

是否可以在 ZFDataGrid 中将网格翻译成多种语言（中文）？如果是，请告诉我如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T08:36:00.637

你可以将你的翻译对象（Zend_Translator）注入到网格中：

```
$grid->setTranslator($translator); 
```

在此之后，它将尝试翻译您的 messageIds。

# ruby-on-rails - 为不同的环境设置多个数据库

> ID：12832774
> 
> 赞同：0
> 
> 时间：2012-10-11T05:26:40.290
> 
> 标签：ruby-on-rails, database, installation, production

我对 Ruby on Rails / Git 相当陌生，并且对不同环境的数据库设置有一些疑问。现在我已经有了我认为非常可靠的设置。我的 Dropbox 文件夹中有我所有的应用程序代码，我可以将其推送到 git，然后我可以将 git 推送到我的 dotcloud 应用程序。

现在来回答这个问题。我有一个本地环境和一个生产环境。我应该为我的信息设置两个数据库还是有办法同步数据库并存储本地副本？还是我想错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:15:40.683

在不同环境的rails中，我们可以设置不同的数据库。

在 config/database.yml 文件中。为不同的环境设置不同的数据库，或者您可以为两个环境设置相同的数据库。

例如。对于设置不同的数据库：

对于开发模式：

```
development:
  adapter: mysql
  encoding: utf8
  database: database_name
  username: root
  password: 
  host: localhost 
```

对于生产模式：

```
production:
  adapter: mysql
  encoding: utf8
  database: diff_database_name
  username: root
  password: 
  host: localhost 
```

# ruby-on-rails - 如何在处理过程中清空缓冲区并将其打印到浏览器

> ID：12832775
> 
> 赞同：0
> 
> 时间：2012-10-11T05:26:49.063
> 
> 标签：ruby-on-rails, ruby, buffer

我有一个 csv 文件 (@fn)，其中包含近 100,000 条记录（约 50 兆），我将其插入到 mysql 表中。例如：

```
FCSV.foreach(@fn, {:headers => true}) do |row|
    model = Model.new(Hash[row])
    model.save
end 
```

回到我的 ASP 时代，我可以在此循环期间将缓冲区作为 html 输出并打印到用户屏幕，以便提供有关该过程的进度的视觉反馈。在 ruby​​ on rails 中，是否有与这种方法等效的方法？

如果有帮助，我正在使用 Rails 2.3.9 和 Ruby 1.8.7。

我意识到有十几种方法可以完成反馈，例如后台作业等。但我真正想知道的是如何在每次循环迭代时将缓冲区转储并打印到屏幕（而不是控制台）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:32:54.403

这个问题可能对你有一些帮助。它解释了如何使用旧版 Rails 客户端进行流式传输。

[Ruby on Rails 3：通过 Rails 将数据流式传输到客户端](https://stackoverflow.com/questions/3507594/ruby-on-rails-3-streaming-data-through-rails-to-client)

这是直接来自帖子的示例：

```
render :text => proc { |response, output|
  10_000_000.times do |i|
    output.write("This is line #{i}\n")
  end
} 
```

# google-app-engine - 谷歌应用引擎数据存储中祖先的目的是什么？

> ID：12832782
> 
> 赞同：12
> 
> 时间：2012-10-11T05:27:45.207
> 
> 标签：google-app-engine, google-cloud-datastore

我最近一直在玩谷歌应用引擎及其数据存储，并使用引用属性创建了一个数据模型和关系。

但是，我不清楚数据存储的祖先的概念。它们的目的是什么，我为什么要使用它们？它们与数据存储实体的引用属性有何关系？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-11T15:50:59.530

实体组/祖先的另一个好处是创建高度一致性的孤岛（与最终一致性相反）。

例如，您可以有一个项目及其任务。如果没有祖先，您可以“关闭”任务，返回项目的任务列表屏幕，然后查询打开的任务。由于最终的一致性，您刚刚关闭的任务仍然会显示。查询可能已针对尚未复制更新的服务器解决。

但是，对于祖先，您可以获得很强的一致性。因此，您将项目设置为项目任务的祖先，而不是从任务到项目的简单外键。现在，在查询任务时，您还可以通过提供项目键使其成为祖先查询。结果将是高度一致的，您刚刚关闭的任务将永远不会成为结果的一部分。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-11T09:01:45.770

通常使用的例子是作者和他们的书。

每本书都作为单独的实体存储在数据存储中，其名称和作者存储为模型中的字段。

如果你想知道一个作者的所有书，你可以运行一个查询，这样

```
book.author == desired_author 
```

但是对于祖先，您还可以保存每本书并将模型（新作者模型）设置为它的父级（它的祖先）。

所以现在你可以简单地说“给我看所有以这个作者为父母的书”。

或者更确切地说，“让我看看这个祖先的所有孩子”，并且归还该作者的所有书籍。

在这个例子中它可能看起来没有什么用，但是如果你想象你有“用户”而不是“书”而不是“作者”，你有“留言板消息”和数以万计的消息，突然之间它变得非常方便能够按用户查找所有消息（例如，显示我自己的消息）。

[https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_ancestor](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_ancestor)

```
ancestor (ancestor)
Adds an ancestor filter to the query. The query will return only entities with the specified ancestor. 
```

查找我期望的每条记录的成本也有好处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-22T18:31:30.993

提供祖先会使您的（新）实体成为与提供的祖先相同的实体组的一部分。因此，具有共同根实体作为祖先的所有实体都存储在同一数据存储节点中，此“位置”允许在事务中对所有这些实体（在同一实体组中）执行大量操作。然后对于包含祖先查询的任何查询（例如仅返回作为公共根实体的子实体的实体），这些操作将似乎同时（原子地）发生或根本不发生。

参考： [http ://www2.mta.ac.il/~kirsh/download/MTA%20NoSQL%20Seminar/Lectures/GAE.pdf](http://www2.mta.ac.il/~kirsh/download/MTA%20NoSQL%20Seminar/Lectures/GAE.pdf)

# jquery - 使用 twitter API 在 twitter 上关注用户

> ID：12832786
> 
> 赞同：1
> 
> 时间：2012-10-11T05:28:12.443
> 
> 标签：jquery, twitter

我正在使用以下代码在 twitter 上关注

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Page Title</title>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script >

    function followFrd(){

        $.ajax({
            url: 'https://api.twitter.com/1.1/friendships/create.json',
            data: {screen_name: 'userName',follow: true},
            dataType: 'jsonp',
            timeout: '5000',
            success: function(data) {
                alert(data);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                    $('#fllw').append(""+xhr.status);
                    $('#fllw').append(""+thrownError);
                    $('#fllw').append(""+ajaxOptions);
                }
        });
    }
    </script>
</head>

<body>
<div id="myDiv">
</div>
<div id="fllw">

</div>
<input type="button" value="start" onclick="followFrd()"/>
</body>
</html> 
```

在这种情况下我会超时。

我需要使用任何身份验证机制吗？如果是，请指导我如何使用它，因为我是 twitter api 的新手。

**PS：我想使用 javaScript 或 jQuery。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T19:48:07.667

是的，您需要身份验证，尤其是使用 API v1.1。您可以使用现有库为您执行此操作，例如：[https ://github.com/BoyCook/TwitterJSClient](https://github.com/BoyCook/TwitterJSClient)

# sql-server - SQL 大容量复制中的异常和内存问题

> ID：12832787
> 
> 赞同：5
> 
> 时间：2012-10-11T05:28:14.830
> 
> 标签：sql-server, sqlbulkcopy

我们正在使用 SQL 大容量复制将近 1000 万行插入到 SQL Server 表中。

我们在 7400000 次插入后收到此异常：

> 链接服务器 '(null)' 的 OLE DB 提供程序 'STREAM' 返回了列 '[!BulkInsert].Amount' 的无效数据。

请让我们知道这是否可以解决。

还有内存泄漏问题。

下面是我们的代码：

```
try
{
            using (SqlConnection SQlConn = new SqlConnection(Common.SQLConnectionString))
            {                   
                DataTable dt1 = FillEmptyDateFields(dtDestination);

                //SqlTableCreator ObjTbl = new SqlTableCreator(SQlConn);

                //ObjTbl.DestinationTableName = DestinationTable;

                using (System.Data.SqlClient.SqlBulkCopy bulkCopy = new System.Data.SqlClient.SqlBulkCopy(SQlConn,SqlBulkCopyOptions.TableLock,null))
                {

                    //bulkCopy = new System.Data.SqlClient.SqlBulkCopy(SQlConn);
                    bulkCopy.DestinationTableName = DestinationTable;
                    bulkCopy.BulkCopyTimeout = 0;
                    bulkCopy.BatchSize = dt1.Rows.Count; // Batch Size Added.
                    Logger.Log("DATATABLE FINAL :" + dt1.Rows.Count.ToString(), Logger.LogType.Info);
                    if (SQlConn.State == ConnectionState.Closed || SQlConn.State == ConnectionState.Broken)
                        SQlConn.Open();
                    bulkCopy.WriteToServer(dt1);
                    SQlConn.Close();
                    SQlConn.Dispose();
                    bulkCopy.Close();
                    if (bulkCopy != null)
                    {
                        ((IDisposable)bulkCopy).Dispose();
                    }                        
                }
                dt1.Dispose(); 
                dt1 = null;                           
            }

            dtDestination.Dispose();
            System.GC.Collect();
            dtDestination = null;                

}
catch (Exception ex)
{
    Logger.Log(ex, Logger.LogType.Error);
    throw ex;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:07:57.677

根据您的代码，您似乎将 BatchSize 设置为数据表的大小，大概是 1000 万行。您可能想尝试使用类似 5000 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T09:09:22.600

也许是因为您试图将 NaN 值插入到浮点字段中？

我最近遇到了这个问题，为了找出问题所在，我只是将所有内容插入到数据类型为 NVARCHAR(MAX) 的表中，然后我注意到一个值是 NaN。

# ruby-on-rails - Rails 检查“If-Modified-Since”的请求标头

> ID：12832791
> 
> 赞同：1
> 
> 时间：2012-10-11T05:28:23.440
> 
> 标签：ruby-on-rails, api, caching

我正在尝试使用 Rails 构建一个 API，它将检查`request`标头`"If-Modified-Since"`并仅呈现在该日期之后修改的对象。问题是我试图从控制器中的请求标头中获取值。

```
# API
def index
   @products = Product.where{updated_at > request.headers["If-Modified-Since"]}
   render "v1/products/index"
end 
```

从请求标头中提取值的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T05:53:19.700

第一：`If-Modified-Since`用于 HTTP 缓存验证。请**不要以这种方式使用它**。请改用参数。

回答您的问题：`request.headers[]`是访问请求标头的正确方法。作为参考，`request`是一个[ActionDispatch::Request](http://api.rubyonrails.org/classes/ActionDispatch/Request.html)对象。

这里的问题是您如何尝试表达约束。您将一个块传递给`ActiveRecord`'s`#where`方法，而该块没有任何意义（`Symbol#>(String)`？）。您可以将其表示为 SQL 片段，例如：

```
Product.where("updated_at > ?", params[:last_update]) 
```

或者，您可以放入[Squeel](https://github.com/ernie/squeel)，然后编写：

```
Product.where{ updated_at > params[:last_update] } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-14T05:31:56.320

根据 W3 规范，您使用 If-Modified-Since 的方法是完全有效的。[[1]](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)这里的其他响应者说它不标准或会损坏您的缓存是不正确的。它不是很 RESTful，不建议在数据中包含状态信息（例如 GET 参数）。

要回答您的问题，您可以使用`stale?`生成 304（如果尚未修改）或生成实际内容。这是一个例子：

```
def index
  if_modified_since = request.headers['If-Modified-Since'] || DateTime.new
  @items = Item.where("updated_at > ?", if_modified_since).order(updated_at: :desc)
  if stale?(@items.first)
    render json: @items
  end
end 
```

请注意，这假定 @items 始终包含一个项目。如果它并不总是返回某些东西，您可以根据您的需要对其进行定制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T05:51:17.567

`request.if_modified_since`或者`request.headers["HTTP_IF_MODIFIED_SINCE"]`

请注意，这是标头的非标准用法。一般是指在If-Modified-Since中指定的时间之后，页面的内容是否发生了变化，并不是说页面应该只包含发生变化的内容*。*

您可能也对该[`stale?`](https://github.com/rails/rails/blob/83d29a283ceb13ff431da535e8cc35db6828016c/actionpack/lib/action_controller/metal/conditional_get.rb#L103 "陈旧？")方法感兴趣。

# php - 动态添加和处理库存条目（表单）

> ID：12832792
> 
> 赞同：0
> 
> 时间：2012-10-11T05:28:29.233
> 
> 标签：php, arrays, forms, html, post

我有这个库存设置，其中我有一个数量，一个用于选择产品的下拉菜单及其相应的价格，以及相应产品的总现金金额。这是用户输入的代码。

```
<input type = 'number' name='prod_quantity' value='1'/>
<?=form_dropdown('prod_selected',$prod_opts)?>
<input type = 'text' name='prod_amount' disabled='disabled' onblur="updateAmount()"/>
<button>Add Entries</button> 
```

但是，这仅限于输入数据后的 1 个条目。当然，用户希望添加更多条目。提交处理后，如何在不影响整个库存的情况下重复添加一个条目？

笔记：

（具有 N x 3 的二维数组将是一个想法 - 例如 $_POST['inventory'] 作为二维数组）

# android - Eclipse 错误：“必须指定活动名称”

> ID：12832798
> 
> 赞同：2
> 
> 时间：2012-10-11T05:28:49.933
> 
> 标签：android, eclipse, eclipse-plugin, eclipse-indigo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:53:36.440

Try uninstalling and reinstalling your ADT plugin. It might be configured incorrectly, hence the problem.

Also check if your eclipse version is compatible with the ADT plugin.

To check compatibility, go here: [https://developer.android.com/tools/sdk/eclipse-adt.html](https://developer.android.com/tools/sdk/eclipse-adt.html)

For each version of ADT, supported eclipse versions are given. Use the recommended eclipse versions to avoid irritating incompatibility problems like these.

# javascript - Angular JS：ng-hide 和 ng-show API

> ID：12832801
> 
> 赞同：22
> 
> 时间：2012-10-11T05:29:04.023
> 
> 标签：javascript, angularjs

我有一个包含多个`<div>`容器的 HTML 页面。我需要`<div>`根据用户 ID 显示这些容器。例如：我`<div>`在一个页面中创建了 4 个容器，例如 div1、div2、div3 和 div4。我有两个用户：user1 和 user2。

我想在用户 1 访问页面时显示 div1 和 div3。并在 user2 访问时显示 div2 和 div4。我想使用AngularJS`ng-hide`的`ng-show`指令。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-11T14:56:59.727

我会在某种用户访问对象的 $scope 上设置属性，以便在加载用户时切换它们。

假设当控制器加载用户时，它可能是这样的：

```
app.controller('SecuredForm', function($scope) {
     //get your user from where ever.
     var user = getSomeUser(); 

     // set your user permissions
     // here's some contrived example.
     $scope.permissions = {
         showAdmin: user.isRegistered && user.isAdmin,
         showBasic: user.isRegistered,
         showHelp: !user.isBanned
     }
}); 
```

在您的 html 中，您将使用这些范围项来设置显示或隐藏您的区域：

```
<div ng-show="permissions.showAdmin">
  <h3>Admin Area</h3>
  <!-- admin stuff here -->
</div>
<div ng-show="permissions.showBasic">
  <h3>Basic Info</h3>
  <!-- admin stuff here -->
</div>
<div ng-show="permissions.showHelp">
  <h3>Help</h3>
  <!-- help stuff here -->
</div> 
```

需要注意的一件事是 ng-show 和 ng-hide 根本不显示 HTML ...... html 仍然在客户端上。因此，请确保当您向需要更改某些内容的服务器进行回调时，您正在服务器上检查*它们*。您不能仅仅因为表单可见就假定用户有权执行某项操作。（你可能已经知道了，我只是想彻底）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-11T05:57:34.093

为什么不试试这个[jsfiddle](http://jsfiddle.net/b9F7S/1/)。更改`$scope.userId`变量，当您在 jsFiddle 中点击“运行”时，您将看到更新的更改。编码：

HTML：

```
<div ng-app>
    <div ng-controller="DivGroup">
        <div ng-show="getUserId() == 1">Div 1</div>
        <div ng-show="getUserId() == 2">Div 2</div>
        <div ng-show="getUserId() == 1">Div 3</div>
        <div ng-show="getUserId() == 2">Div 4</div>       
    </div>
</div> 
```

JavaScript：

```
function DivGroup($scope) {

    $scope.userId = 2;

    $scope.getUserId = function() {
        console.log('test');
        return $scope.userId;             
    }
} 
```

为`userId`1 时显示 1 和 3 的内容，为 2 时显示 2 和 4 的内容。​</p>

​</p>

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-15T15:51:55.750

这个 true : false, show : hide 逻辑对我来说效果很好，但它主要用作切换。 [http://geniuscarrier.com/ng-toggle-in-angularjs/](http://geniuscarrier.com/ng-toggle-in-angularjs/)

# c++ - 字符集中字符的顺序

> ID：12832802
> 
> 赞同：5
> 
> 时间：2012-10-11T05:29:08.220
> 
> 标签：c++, c

是否按标准保证字符的顺序？例如，我可以计算字符集表中的“1”符号后面跟着“2”符号吗？还是特定于平台？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T05:35:44.873

1999 年的 C 标准对字符集进行了如下说明：

> 基本源字符集和基本执行字符集都应具有以下成员：
> 26 个拉丁字母大写字母
> ...
> 26 个拉丁字母小写字母
> ...
> 10 个十进制数字
> 0 1 2 3 4 5 6 7 8 9
> 后面的 29 个图形字符
> ...
> 在源和执行基本字符集中，上述十进制数字列表中 0 之后的每个字符的值应比前一个字符的值大 1。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T05:40:24.887

标准要求数字字符是连续的，事实上，对于我所知道的“0”到“9”的所有平台，实际上都是有序的和连续的。对于一般的字母表，不能这样说。我向您指出任何[EBCDIC](http://natural-innovations.com/computing/asciiebcdic.html)平台（AS/400、OS390 等）的示例，但绝对不是这种情况。

即你可以可靠地做到这一点：

```
for (char ch = '0'; ch <= '9'; ch++) 
```

但你不能可靠地这样做：

```
for (char ch = 'a'; ch <= 'z'; ch++) 
```

并期望后者通过 26 次迭代。它将取决于平台。

注意：标准中没有规定保证数字之外的顺序（既是有序的又是连续的）。尽管如此，我工作过的所有平台（这是一个*很大*的数字）甚至对字母表都表现出一致的顺序属性，但只有类似的情况。即“a”总是“小于”“z”。但就像一分钱一样，然后又回到 EBCDIC 平台。对于标准平台，“A”始终小于“z”，但在 EBCDIC 中则不然。

底线：除了数字字符，你不能可靠地假设几乎*任何*关于顺序或顺序的东西，并且仍然保持纯粹的平台独立性。

# python - 用于模块初始化的 Python 钩子

> ID：12832803
> 
> 赞同：2
> 
> 时间：2012-10-11T05:29:16.267
> 
> 标签：python, module, initialization

我有一个 python`module_A`正在做这样的事情：

```
myvar = "Hello"

def message():
    print myvar 
```

从另一个模块，我想导入函数`message`：

```
from module_A import message 
```

但这是`myvar`我不想要的定义（原因与此处无关）。我想我需要区分从模块*导入*东西和*使用*任何导入的符号。我实际上*只想*`myvar`在使用.*`message`*

 *每当访问函数或类时，我可以使用任何类型的 python 钩子来初始化东西吗？我想要类似于以下内容：

```
module_setup_done = False
def setup():
    global module_setup_done, myvar
    if not module_setup_done:
        myvar = "Hello"
        module_setup_done = True

def message():
    setup()
    print myvar 
```

但是，为了减少混乱，我希望自动调用它，如下所示：

```
def _init_module():
    global myvar
    myvar = "Hello"

def message():
    print myvar 
```

Where`_init_module()`只会被调用*一次*，并且仅在第一次*访问*模块中的某些内容时调用，而不是在*导入*某些内容时。

python中是否支持这种模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T05:36:03.107

不，对此没有内置支持。如果您想与导入模块分开初始化事物，请编写一个执行该初始化的函数，然后在您想要初始化这些事物时调用该函数。如果您想在调用其他事物时“自动”初始化事物，您必须使用您已经发布的代码自己处理。

但是，如果您发现自己这样做了，那么您可能正在做一些不合常规的事情。你没有详细说明你为什么在这里这样做，但一般来说，这种隐式初始化在 Python 中不是一个好的做法。当你明确地告诉它们被初始化时，例如通过导入模块或调用某种初始化函数来初始化事物。为什么你觉得需要这个单独的、隐式的初始化步骤？*

# android - android中的屏幕变暗事件

> ID：12832804
> 
> 赞同：0
> 
> 时间：2012-10-11T05:29:20.747
> 
> 标签：android, android-intent

有什么方法可以在android中捕捉屏幕变暗吗？

这段代码会起作用吗？

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
                            boolean isScreenOn = pm.isScreenOn(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:23:54.470

据我所知，屏幕亮度变化时没有发送广播事件。此外，现在大多数手机都采用自动亮度，在任何时候，屏幕亮度都会根据屏幕上显示的算法和内容而改变。您只能检查屏幕何时关闭或重新打开。

# algorithm - 如何对计数算法进行优化？

> ID：12832811
> 
> 赞同：0
> 
> 时间：2012-10-11T05:30:09.430
> 
> 标签：algorithm, optimization

给定一个有序的值列表，我想对具有相同值的任何成员进行分组并输出每个值的计数：

例如，

```
input: [1,1,1,3,3,2,1,1] 
output:
[(1,3),(3,2),(2,1),(1,2)]

input:['a','a','b','b','c','a']
output:
[('a',2),(b,2),(c,1),(a,1)] 
```

此外，我想特别对待第一个和最后一个值。执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:23:58.467

我正在为这个问题写一个粗略的解决方案：

```
main()
{
     char arr[100];
     int count[100],j=0,i,n;
     for(i=0;i<100;i++)
     {
         count[i] = 0;
     }
     scanf("%d\n",&n);
     scanf("\n%c",&arr[0]);
     count[j]=1;
     for(i=1;i<n;i++)
     {
         scanf("%c",&arr[i]);
         if(arr[i-1]==arr[i])
         {
             count[j]++;
         }
         else
         {
             j++;
             count[j]=1;
         }
     }
     for(i=0;i<=j;i++)
     {
         printf("%d\n",count[i]);
     }
} 
```

在这里，我正在从用户那里读取 n 个字符，然后在读取当前字符后用前一个字符检查它的当前字符。我保留一个单独的数组进行计数。

希望有帮助...

# blackberry - 如何在 Blackberry Java SDK 的 MapField 上显示当前位置（绿点）

> ID：12832812
> 
> 赞同：2
> 
> 时间：2012-10-11T05:30:11.833
> 
> 标签：blackberry, java-me, maps, blackberry-maps

这是令人沮丧的问题。

如您所知，我们可以使用`net.rim.device.api.lbs.maps.ui.RichMapField`blackberry api 将地图功能集成到我们的移动应用程序中。

所以我在我的应用程序中使用它。RichMapField 工作正常，因为我可以看到街道和道路，我只是看不到我在地图上的位置 - 应该有一个绿色/蓝色的点代表我在哪里。并且左上角的 GPS 图标上不应该有红十字。

带有红叉的 GPS 图标表示没有 GPS 信号。

但我很确定我收到了 GPS 信号，因为我的当前位置显示在官方黑莓地图应用程序上（有一个绿点代表我在哪里，屏幕左上角的 GPS 图标没有红十字）。

顺便说一句，在官方的黑莓地图应用程序中，一切正常（有一个绿点表示我在地图上的位置，屏幕左上角的 GPS 图标上没有红叉）。

问题是：如何使用 RichMapField 使 GPS 处于活动状态，并将我的当前位置显示为地图上的绿点，就像我`RichMapField`在应用程序中使用官方黑莓地图应用程序时所做的那样？

以下是更多信息：我尝试使用`BlackBerryLocationProvider`来获取 GPS 数据。它有效。但这不会从 GPS 图标上删除红十字，`RichMapField`并且不会显示绿点（当前位置）。我可以用返回的纬度/经度改变地图的中心

```
action.setCentre(new MapPoint(location.getQualifiedCoordinates().getLatitude(),
                              location.getQualifiedCoordinates().getLongitude())); 
```

我需要添加一个特殊的位置监听器`BlackBerryLocationProvider`吗？

# class - 向量表达式必须具有类类型

> ID：12832815
> 
> 赞同：0
> 
> 时间：2012-10-11T05:30:20.553
> 
> 标签：class, function, vector, stack, members

我有一个类似于基本堆栈的类。在我的成员函数定义中，每个 vec 实例都会出错。该错误告诉我表达式必须具有类类型。我必须怎么做才能解决这个问题？

```
class Stack{
    public:
        Stack();
        Stack & push(double & t);
        double pop() const;
        unsigned long long getElements();
    private:
        vector <double> vec[10];
        static double answer;
};

Stack::Stack(){
    answer=0;
}

Stack & Stack::push(double & t){
    vec.push_back(t);
    return *this;
}

double Stack::pop()const{
    return vec.pop_back();
}

unsigned long long Stack::getElements(){
    return vec.size();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:49:40.700

这里有很多问题，在修复它们后，我得到了：

```
#include <vector>
using namespace std;
class Stack{
    public:
        Stack();
        Stack & push(double & t);
        double pop();
        unsigned long long getElements();
    private:
        vector <double> vec;
        static double answer;
};

Stack::Stack(){
    answer=0;
}

Stack & Stack::push(double & t){
    vec.push_back(t);
    return *this;
}

double Stack::pop(){
    double ret = vec.back();
    vec.pop_back();
    return ret;
}

unsigned long long Stack::getElements(){
    return vec.size();

} 
```

我所做的更改是：

1.  缺少包含标准的向量和命名空间默认值。
2.  pop_back 返回 void - 需要先让元素返回。
3.  不应将 pop 声明为 const，因为它确实会更改向量（您可以将返回值设为 const）。
4.  在 vec 声明中删除了 [10]。它不是 C 数组。

# mongodb - 选择/配置数据库以获得高吞吐量、可靠、一致的写入吞吐量，牺牲延迟

> ID：12832816
> 
> 赞同：6
> 
> 时间：2012-10-11T05:30:47.950
> 
> 标签：mongodb, postgresql, couchdb, throughput, database

我正在开发具有以下特征的实时应用程序：

*   数百个客户端将同时*插入行/文档*，每个客户端每隔几秒钟插入一行。
*   很大程度上*只追加*；几乎所有的行/文档，一旦插入，就永远不会改变。
*   *只有当数据被刷新*到磁盘时，客户端才能看到成功，此后读写一致性应该保持。
*   客户愿意等待*几秒钟*的时间来确认 - 足够长的时间来进行多次磁盘查找和写入。
*   有太多数据无法放入 RAM（排除 Redis 等选项）。但是很久以前写入的行很少被访问，因此不将它们放在内存中是可以接受的。
*   理想情况下，这些*写入不应阻塞读取*。
*   键值存储很好，但至少需要一个可靠的自增索引。

换句话说（和 tl;dr），客户端可以容忍延迟，但他们需要大量可信赖的写入吞吐量 - 比“一次写入是一次磁盘操作”更高的吞吐量。

我正在设想一个可以像这样实现的数据库：接受（理论上受文件描述符数量限制）数量的 TCP 连接，在内存中缓冲这些写入，尽可能频繁地将它们的批次记录到磁盘（连同自动递增索引的更新），并且仅在相关的磁盘写入操作完成时才响应这些 TCP 连接。或者它可以像延迟写入数据库一样简单，它发布一条已完成磁盘写入的消息（客户端等待延迟响应，然后等待写入消息报告成功）。

我认为具有如此高的延迟容忍度，这并没有要求太多。而且我想其他人也遇到过这个问题，例如金融公司，它们不能承受丢失数据，但可以承受延迟对任何一个客户的响应。

是否有任何久经考验的数据库解决方案，如 Postgres、CouchDB/Couchbase 或 MongoDB 支持这样的操作模式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T06:12:01.953

PostgreSQL 应该非常适合这种工作负载；您指定的几乎所有内容都在其正常功能集中。Pg 符合 ACID，支持组提交以减少同步开销，写入器不会阻塞读取器，并且它使用操作系统进行缓存，因此它自然倾向于仅将热数据集保留在内存中。

> “客户愿意等待几秒钟的时间来确认 - 足够长的时间来进行多次磁盘查找和写入”

如果考虑 PostgreSQL，您的应用程序非常适合非常大的[`commit_delay`](http://www.postgresql.org/docs/current/static/runtime-config-wal.html#GUC-COMMIT-DELAY).，这将极大地帮助提高写入吞吐量。您不能使用`synchronous_commit = off`，因为您需要在回复之前确认提交，但您可以将提交排队等待几秒钟以节省同步成本。

如果您将 Pg 用于这样的工作，您*将*需要调整检查点以确保检查点不会停止 I/O。确保 bgwriter 积极地写出脏缓冲区。确保 autovaccum 经常运行 - 您没有从表中删除，但索引仍然需要维护，表统计信息也是如此。

如果您期望*大量*数据并且您的查询通常具有时间元素，请考虑在第一年将表[分区](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)为（例如）1 个月的块，将超过 12 个月的所有内容合并到按年份分区的表中。Pg 只有有限的内置分区（它使用继承和约束排除一起破解）所以你必须使用触发器手动/脚本来完成，但它可以完成这项工作。

看：

*   [`commit_delay`配置选项](http://www.postgresql.org/docs/current/static/runtime-config-wal.html#GUC-COMMIT-DELAY)
*   [PostgreSQL 9.0 高性能](http://www.2ndquadrant.com/en/postgresql-90-high-performance/)
*   [调整 PostgreSQL 服务器 - PostgreSQL wiki](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server)
*   [检查点调整配置选项](http://www.postgresql.org/docs/current/static/runtime-config-wal.html#RUNTIME-CONFIG-WAL-CHECKPOINTS)
*   [WAL 配置](http://www.postgresql.org/docs/current/static/wal-configuration.html)
*   [资源消耗配置选项](http://www.postgresql.org/docs/current/static/runtime-config-resource.html)
*   [表分区](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)

# c - 用 C 求解方程

> ID：12832825
> 
> 赞同：2
> 
> 时间：2012-10-11T05:32:05.700
> 
> 标签：c, equation-solving

我需要在 C 中求解以下方程：

```
a + ln(a) = x 
```

我知道 x 的值，我需要找到满足这个方程的 'a' 的值。任何人都可以提出一种有效的方法来解决这个方程。可能是 Newton Raphson，还是更有效的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:55:05.520

`Newton Raphson Method`会很好，但我建议你试试看[`Lambert W function`](http://en.wikipedia.org/wiki/Lambert_W_function)。
W(x) = 函数 f(x)= xex 的逆。
因此，在您的情况下，ln(a)+ a= x，然后，取每一边的指数，eln(a)+ a= aea= ex。这给你`a=W(ex)`。
现在，您可以应用近似值来解决这个问题。但首先，我建议您仔细阅读 Lambert 方法。

# html - 水平间隔均匀排列一行图像

> ID：12832827
> 
> 赞同：0
> 
> 时间：2012-10-11T05:32:12.573
> 
> 标签：html, css

我有几行这样的图像

```
<div class="row">
  <img src="image.jpg" alt="">
  <img src="image.jpg" alt="">
  <img src="image.jpg" alt="">
  <img src="image.jpg" alt="">
  <img src="image.jpg" alt="">
</div> 
```

每张图片都有不同的宽度，每行也有不同数量的图片（4-6）。我想将图像均匀地排列在行中，行的固定宽度为 960px。

我可以通过计算每行的总空白空间然后将其在图像中划分为边距来做到这一点，但我希望有一些更简单的东西可以应用于每一行，而不必计算和编码一个单独的每一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:34:59.207

如果您想实现仅使用 CSS 的好东西（这并不理想，因为这里需要逻辑），您可以人为地将图像宽度调整为相同（但不推荐）并简单地添加适当的边距。知道每个的宽度显然有帮助。

**CSS：**

```
.row img { 
display: inline; 
width: 100px; 
height: auto; 
margin: 0 20px 20px 0; 
padding: 0; 
} 
```

希望这可以帮助？如果您真的想要多样化和紧凑的图像布局，请尝试使用 jQuery 和 Masonary 插件：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

它是如此易于使用，以至于不利用如此漂亮的插件实际上是一种犯罪！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T15:31:09.353

考虑到我不想手动计算每一行的边距，这似乎不适用于 css，所以我只是用 jQuery 完成了

# ruby-on-rails-3 - 如何在rails 3中使用IO.popen和wkhtmltopdf创建带有页眉/页脚的PDF

> ID：12832828
> 
> 赞同：2
> 
> 时间：2012-10-11T05:32:20.190
> 
> 标签：ruby-on-rails-3, pdf-generation, wkhtmltopdf

我想使用`IO.popen`带有`wkhtmltopdf`. `wkhtmltopdf`我使用以下代码使用命令成功创建了 pdf 文件：

```
IO.popen('wkhtmltopdf '+ source_url.to_s + ' ' + Rails.root.to_s + '/app/assets/pdfs/' + file_to_download) do
end 
```

但我想使用相同的代码创建带有页眉和页脚的 PDF。我没有找到这个解决方案，如果有人有，请发给我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:09:37.090

有选项**--header-html 和 --footer-html**可以通过您的命令在外部提供 html 标头

1).html文件

```
wkhtmltopdf http://domain.com/pagetopdf.html --footer-html "footer.html" /path/to/folder/test.pdf 
```

2）您还可以将文本传递到页脚和页眉，如下所示

```
wkhtmltopdf http://domain.com/pagetopdf.html --footer-center "Hello Footer" /path/to/folder/test.pdf 
```

还有很多其他选项可供使用，请参阅此[链接](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf-0.9.9-doc.html)

# android - 灯箱在移动设备上玩得不好

> ID：12832831
> 
> 赞同：6
> 
> 时间：2012-10-11T05:32:38.533
> 
> 标签：android, css, lightbox2, mobile-browser, pinchzoom

灯箱在电脑上很棒。

**然而，情况是：**我收到了来自 Android 和 iPhone 用户的各种抱怨，他们抱怨他们的移动设备上的 Lightbox，因为 Lightbox 会在屏幕上跳来跳去而不是居中，所以他们无法放大 Lightbox 中的较大图像。

还有其他几个问题。如果您有移动设备，请继续查看我的网站，了解我在说什么：[http](http://soullow.com/store/index.php?m...products_id=86) ://soullow.com/store/index.php?m...products_id=86点击大图并尝试放大并在屏幕上移动。

问题是我没有时间找到嵌入代码以使 Lightbox Mobile Browser 友好的解决方案。

有没有人遇到这个问题，有解决方案，建议或任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:47:15.997

有几种响应式灯箱替代品，但我个人最喜欢的是[Fancybox2 (http://fancyapps.com/fancybox/)](http://fancyapps.com/fancybox/)。

但是这种方法会发送更大的图像，然后按比例缩小以适应用户的屏幕尺寸。这是对带宽的浪费，也不允许用户在手机上使用本机捏合手势放大图像。

我建议为手机用户完全绕过灯箱并将直接图像文件发送给他们。例如，Zappos 移动网站就是这样做的。

这是我用 Fancybox2 构建的一个示例：http: [//jsfiddle.net/alexroper/5s6dv/](http://jsfiddle.net/alexroper/5s6dv/)

jQuery 看起来像这样。您必须根据您希望手机甚至平板电脑用户的行为类型来更新视口大小。

```
$(document).ready(function() {
    // initialize the lightbox 
    $('.fancybox').fancybox({
        beforeLoad: function() {
            var windowsize = $(window).width();
            // test the viewport size to see if it's smaller than 480px
            if (windowsize < 480) {
                // cancel the lightbox and load the link url
                $.fancybox.cancel();
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T03:08:58.810

似乎 JavaScript 中的大多数 lightbox/shadowbox/modal 对话框库都依赖 body.clientWidth 和 clientHeight 来计算图像或对话框的大小和位置。

在移动浏览器中，clientWidth 比 screen.Width 宽，这保留了格式，并允许用户缩放和平移页面。一个可靠的解决方法是使用 body.clientWidth 来计算模态元素的大小和位置，但是当它小于 body.clientWidth 时回退到使用 screen.Width

现在解释一下：模态元素跳动的原因是它的位置是由两倍于屏幕大小的文档宽度计算的，并且它添加了滚动位置使其“居中”。因此，当您平移模式时，滚动值会将其推向该方向更远。

# linux - 如何合并不同服务器上的目录？

> ID：12832833
> 
> 赞同：0
> 
> 时间：2012-10-11T05:32:41.683
> 
> 标签：linux, directory, centos, replication, rsync

我有 3 个带有分片图像目录 (a0-z9) 的独立服务器。不幸的是，我的 rsync 和 php 上传脚本一路中断，现在我在 3 台服务器上有 3 个不匹配的目录，这些目录应该是相同的。我不关心覆盖......如果它已经存在，则无需覆盖它 - 它是一样的。

服务器A

```
/path/img/a0/001/
/path/img/a0/.../
/path/img/a0/999/
/path/img/../
/path/img/z9/001/
/path/img/z9/.../
/path/img/z9/999/ 
```

ServerB 和 ServerC 具有相同的布局。都具有完全相同的 2 位目录结构（260 个目录，a0-z9）。但是它们有不同的子目录。ServerA 可能有`a0/001/`，但服务器 B 和 C 上可能缺少此目录（或相反）。

我需要合并所有 3 个目录。

最终，如果`c7/003/`存在于一台服务器上，则它需要存在于所有 3 台服务器上。

我怎样才能做到这一点？我已经修复了它，但我仍然需要清理当前的混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:45:05.910

下面提供了用于同步两个文件夹的 rsync 命令（给定一个良好的源和一个过时/损坏的目标），您的脚本可能因为运行时间过长而死亡。尝试为较小的子目录运行它。

```
rsync -a --delete-after /source/images/ -e 'ssh -l username' \
    hostname:/path/to/destination/images/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:58:09.303

您可以尝试使用 Unison，因为您想要双向同步。首先将服务器 1 与服务器 2 同步，然后将服务器 1 与服务器 3 同步，最后再将服务器 1 与服务器 2 同步。最后，所有三台服务器应该具有相同的文件集。

# sql - 我应该使用 SQL 还是 NoSQL 来存储大量的唯一字符串或整数？

> ID：12832843
> 
> 赞同：1
> 
> 时间：2012-10-11T05:33:42.427
> 
> 标签：sql, nosql, redis

我想存储大量（1,000,000）的**唯一**字符串或整数以供快速参考（此字符串是否存在于 db/store 中）。

没有复杂的数据关系，只是一个不断增加的简单字符串列表（或整数或可能是哈希）。我想非常频繁地查询这个列表，看看这个列表中是否存在实体。我不希望它消耗太多磁盘 I/O 周期来占用太多内存。

我尝试比较 NoSQL (mongo) 和 SQL (Postgres & MySQL) 来满足我的要求。但我仍然不确定确切的答案。

更新：我想保持这些数据持久。因此，在断电或系统重启的情况下，我可以恢复应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:34:34.993

在我看来，这听起来像是您想要一个非常快速且简单的键/值存储，它甚至没有值。对于这样的用例，有比 MongoDB 更好的选择。例如，有[MemcacheDB](http://memcachedb.org/)，它是 memcached 的支持持久性的 dropin 替代品。

# objective-c - 手动计算 UITableView 部分

> ID：12832845
> 
> 赞同：1
> 
> 时间：2012-10-11T05:33:47.513
> 
> 标签：objective-c, uitableview, nsfetchedresultscontroller

苹果开发论坛上有一个有趣的讨论，关于为大行集手动计算表视图部分。要查看它，需要开发者帐户：

[NSFetchedResultsController 正在获取数据库中的所有对象...](https://devforums.apple.com/thread/155806?tstart=0)

为了让那些没有开发帐户的人重新考虑，Apple 技术人员建议使用包含索引标题的实体，与要在行中显示的实体具有一对多关系。

典型的例子是歌曲或艺术家的集合，其中索引部分标题是第一个字母 A,B,C...

因此，标题为 A 的实体将与以字母 A 开头的歌曲存在一对多关系，依此类推。

该机制是使用获取结果控制器来检索所有歌曲，同时发起获取请求以检索 NSArray 索引。

```
NSFetchRequest *req = //fetch request for section entity
NSArray *sections = [MOC executeFetchRequest:req error:&error]; 
```

获取节数和节中的行非常容易：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    NSInteger abc = [self.sections count];
    return abc;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    CardSection *s = (CardSection*)[self.sections objectAtIndex:section];
    NSInteger rows = [s.cards count];
    return rows;
}

-(NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    CardSection *s = [self.sections objectAtIndex:section];
    NSString *title = s.title;
    return title;
} 
```

但是，问题从索引路径处的行单元格开始：

```
- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSManagedObject obj = [_fetchedResultsController objectAtIndexPath:indexPath];
    // build cell....    
    return cell;
} 
```

因为显然索引路径是指计算的部分和行，因此获取的控制器超出了范围。

当然，这可以通过调用部分实体并在 NSSet 关系中请求特定的索引对象来解决，但是这样就失去了获取控制器的好处。

我想知道是否有人尝试过这种方法，他是如何解决这个问题的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:07:27.900

到目前为止，我发现的唯一解决方案是对 section 数组进行后解析，以查找特定索引处的前一个对象的数量。

```
 int latestCount=0;
        // BOX_INT is just a personal macro for converting something to NSNumber
        self.totalAtIndex=[NSMutableDictionary dictionaryWithCapacity:0];
        [self.totalAtIndex setObject:BOX_INT(0) forKey:BOX_INT(0)];
        for (int i=1;i<[self.sections count];i++) {
            CardSection *cardSection = [self.sections objectAtIndex:i-1];
            latestCount = latestCount + [cardSection.cards count];
            [self.totalAtIndex setObject:BOX_INT(latestCount) forKey:BOX_INT(i)];
        } 
```

例如，假设这是我的部分，其中 [a,b] 只是 NSIndexPath：

```
[0,0][0,1] (2 objects)
[1,0]      (1 object)
[2,0][2,1] (2 object) 
```

如果我在索引 2，**[self.totalAtIndex objectAtIndex:2]**将包含之前在索引 0 + 索引 1 处存储的对象数量，因此返回 3。索引 [2,1] 将转换为 [0,5 ]。

这是对应的 cellForRow:atIndexPath:

```
- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // hack index path
    NSInteger section = indexPath.section;
    NSInteger row = indexPath.row;

    int howManyBefore = [[self.totalAtIndex objectForKey:BOX_INT(section)] intValue];
    NSIndexPath *newIndexPath = [NSIndexPath indexPathForRow:row+howManyBefore inSection:0];

    NSManagedObject *obj = [_fetchedResultsController objectAtIndexPath:newIndexPath];

    // build and return cell

} 
```

如果有人有更好的解决方案...

# java - JTree setSelectionPaths 扩展时间过长

> ID：12832847
> 
> 赞同：4
> 
> 时间：2012-10-11T05:34:04.907
> 
> 标签：java, swing, jtree

我正在使用`JTree`并且正在选择树中的所有节点（Ctrl-A）。我的树包含 14000 个父母，每个父母都有一个孩子，所以树总共包含 28000 个节点。以下是代码片段：

```
@Override public final void setSelectionPaths(TreePath[] aPaths)
  {
    if (aPaths != null)
   {

   for (TreePath path : aPaths)
   {
       TreePath parentPath = path.getParentPath();
       if (parentPath != null)
        {
          expandPath(path.getParentPath());
        }
      }
    }
    super.setSelectionPaths(aPaths);
  } 
```

扩展树需要 20 分钟。有没有办法优化它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T15:16:59.610

为了让我自己和@kleopatra 满意，我想出了一个更好的实现（在我的机器上比之前的答案节省了大约 8 秒）。基本上，它添加了另一种`JTree`扩展选定路径的方法。

此方法减少了扩展选定节点时不必要的一些开销，并在设置所有内部状态后触发 UI 更新。该方法基于`JTable.setExpandedState`. 我还保留了代码，以便您可以查看机器上的性能差异。

最重要的是 - 它不再与 EDT 混淆（因为 14k 节点需要 3.5 秒......你为什么要这样做）。

```
import java.awt.event.*;
import java.util.*;

import javax.swing.*;
import javax.swing.tree.*;

public class JTreeExpanding extends Box{

    public JTreeExpanding(){
        super(BoxLayout.Y_AXIS);

        //Populating a sample tree
        DefaultMutableTreeNode root = new DefaultMutableTreeNode("Root");
        for(int i = 0; i < 14000; i++){
            DefaultMutableTreeNode node = new DefaultMutableTreeNode("Root" + i);
            node.add(new DefaultMutableTreeNode("Child" + i));
            root.add(node);
        }   

        //Create a custom tree
        final CustomTree tree = new CustomTree(root);
        //final JTree tree = new JTree(root);
        tree.setRootVisible(false);
        final JScrollPane pane = new JScrollPane(tree);
        add(pane);

        //Create a button to expand the selected nodes
        JButton button = new JButton("Expand");
        button.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e) {
                long start = System.currentTimeMillis();
                //New way using Custom JTree
                tree.expandSelectedPaths();

                //Old way using classic JTree
                /*TreePath[] paths = tree.getSelectionPaths();
                tree.setSelectionPath(paths[0]);
                for(TreePath path : paths)
                    tree.expandPath(path);*/
                System.out.println(System.currentTimeMillis() - start);
            }});
        add(button);

    }

    public static class CustomTree extends JTree{

        HashMap<TreePath, Boolean> expandedState = new HashMap<TreePath, Boolean>();
        Stack<TreePath> customExpandedStack = new Stack<TreePath>();

        public CustomTree(DefaultMutableTreeNode root) {
            super(root);
        }

        public void expandSelectedPaths(){

            final TreePath[] paths = getSelectionPaths();
            setSelectionPath(paths[0]);

            for(TreePath path: paths){
                TreePath parentPath = path.getParentPath();

                while(parentPath != null) {
                    if(isExpanded(parentPath)) {
                        parentPath = null;
                    }
                    else {
                        customExpandedStack.push(parentPath);
                        parentPath = parentPath.getParentPath();
                    }
                }

                for(int counter = customExpandedStack.size() - 1; counter >= 0; counter--) {
                    parentPath = customExpandedStack.pop();
                    if(!isExpanded(parentPath)) {
                        expandedState.put(parentPath, Boolean.TRUE);
                    }
                }
            }

            if (accessibleContext != null) {
                ((AccessibleJTree)accessibleContext).
                fireVisibleDataPropertyChange();
            }

            for(TreePath path : paths){
                fireTreeExpanded(path);
                try {
                    fireTreeWillExpand(path);
                } catch (ExpandVetoException eve) {
                    // Expand vetoed!
                    return;
                }
            }
        }
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new JTreeExpanding());
        frame.validate();
        frame.pack();
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T22:40:19.853

我发现在记录选定的路径后，如果在展开之前重置选择，速度会非常快。

```
final TreePath[] paths = tree.getSelectionPaths();
//Modifying the selection makes it run a whole lot faster
tree.setSelectionPath(paths[0]);
for(int i = 0; i < paths.length; i++){
    tree.expandPath(paths[i]);
} 
```

我认为这是因为它不再需要对选择做太多的魔法了。

由于害怕被打死，我会提供这个建议。如果您想在此过程中保持 GUI 解锁状态，您可以将其扔到一个新线程上（而不是在 EDT 上）。当然，您必须非常小心，不要尝试与 Tree 进行交互 - Swing 不是线程安全的，因此除了查看它之外的任何其他操作都会导致各种时髦的问题。

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.tree.*;

public class JTreeExpanding extends Box{

    //Just to make sure no user interactions happen during expansion
    JPanel glassPane = new JPanel(){
        public void paintComponent(Graphics g){
            g.setColor(new Color(0,0,0,80));
            g.fillRect(0, 0, getWidth(), getHeight());
            g.setColor(Color.white);
            g.setFont(g.getFont().deriveFont(18f).deriveFont(Font.BOLD));
            g.drawString("Processing...", getWidth()-100, getHeight()-10);
        }
    };

    public JTreeExpanding(){
        super(BoxLayout.Y_AXIS);

        glassPane.setOpaque(false);

        DefaultMutableTreeNode root = new DefaultMutableTreeNode("Root");
        for(int i = 0; i < 14000; i++){
            DefaultMutableTreeNode node = new DefaultMutableTreeNode("Root" + i);
            node.add(new DefaultMutableTreeNode("Child" + i));
            root.add(node);
        }   

        final JTree tree = new JTree(root);
        tree.setRootVisible(false);
        final JScrollPane pane = new JScrollPane(tree);
        add(pane);

        JButton button = new JButton("Expand");
        button.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e) {
                //Taking the expand off the EDT frees up GUI 
                Thread t = new Thread(new Runnable(){
                    @Override
                    public void run() {
                        final TreePath[] paths = tree.getSelectionPaths();
                        //Modifying the selection makes it run a whole lot faster
                        tree.setSelectionPath(paths[0]);
                        for(int i = 0; i < paths.length; i++){
                            tree.expandPath(paths[i]);
                        }
                        glassPane.setVisible(false);
                    }});

                getRootPane().setGlassPane(glassPane);
                glassPane.setVisible(true);
                t.start();
            }});
        add(button);

        //Allow Scrolling in scroll pane while Tree is expanding
        glassPane.addMouseWheelListener(new MouseWheelListener() {
            @Override
            public void mouseWheelMoved(MouseWheelEvent e) {
                for(MouseWheelListener mwl : pane.getMouseWheelListeners()){
                    mwl.mouseWheelMoved(e);
                }
            }
        });

    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new JTreeExpanding());
        frame.validate();
        frame.pack();
        frame.setVisible(true);
    }

} 
```

# xaml - 以编程方式更改样式中的按钮内容

> ID：12832848
> 
> 赞同：0
> 
> 时间：2012-10-11T05:34:14.797
> 
> 标签：xaml, windows-phone

在我的应用程序中，我正在使用列表框的样式。在那种风格中，有一个按钮。我想更改按钮的内容。xaml 显示如下

```
<Style x:Key="ListBoxStyle" TargetType="ListBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBox">
                <ScrollViewer x:Name="ScrollViewer">
                    <StackPanel>
                        <ItemsPresenter/>
                            <Button Content="Load More..." Name="btnLoadMore" Click="btnLoadMore_Click"></Button>
                    </StackPanel>
                </ScrollViewer>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如何以编程方式更改按钮内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:13:47.507

您可以绑定到该依赖属性以在 UI 和数据对象之间流动。可以在[此处的文档](http://msdn.microsoft.com/en-us/library/cc278072%28v=vs.95%29.aspx)中找到关于数据绑定和多个可用教程的很好的解释。希望这可以帮助。

# html - 在 HTML 中将图像向右对齐而不用文本环绕它

> ID：12832853
> 
> 赞同：1
> 
> 时间：2012-10-11T05:34:33.890
> 
> 标签：html

`<body>`考虑一下在标签之后和某些文本之前将其滑入某个 HTML 文件：

```
<div style="width:100%; height=320pix; background-color:black">
<img src="logo.jpg">
</div> 
```

对我来说，这会在浏览器页面顶部创建一个黑色“横幅”，徽标图像（320pix 高）与左侧对齐。我怎样才能将它移到右边并让文本保持原样？我想知道这个代码的最简单的补充来实现这一点。当我`style="float:right"`在`<img ...>`标语行中指定时，后面的文本会环绕它，破坏横幅效果。

但是...如果我将相同的元素传输到`<style>...</style>`HTML 中的一个块中，并包含一个`img{float:right;}`一切正常。我只是不明白为什么两种方法之间的浮动行为应该不同。我的头快要爆炸了……

一个可能的线索 -[这个问题](https://stackoverflow.com/questions/3738964/css-image-on-right-side-of-page-with-text-not-wrapping-around-it)表明它应该很简单，但是当我精确地尝试给出的代码时，它仍然不起作用。可能是 !DOCTYPE 或类似问题吗？我使用 Firefox 15.0.1 作为我的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:39:41.403

给包含图像的 DIV 一个相对位置。这将允许您将图像绝对定位在其中。

```
<div style="position:relative; width:100%; height:320px; background-color:black">

    <img src="logo.jpg" style="position:absolute; right:0px;">

</div> 
```

调整“右”以根据您的喜好定位图像。

# php - 如何管理用于动态排序、mysql 和 php 的 order_by 列

> ID：12832855
> 
> 赞同：0
> 
> 时间：2012-10-11T05:34:55.217
> 
> 标签：php, mysql, sorting, row

我在 mysql 表中有可变数量的行。我想更改它们出现的顺序，无论任何重要列的内容如何，​​最好的方法是什么？

例如，如果我有：

```
id , content, order-by
1  , d      , 1
2  , a      , 2
3  , v      , 3
4  , i      , 4
5  , d      , 5 
```

并希望将字段重新排序为：

```
id , content, order-by
3  , v      , 1
4  , i      , 2
5  , d      , 3
2  , a      , 4
1  , d      , 5 
```

按 id 排序的看起来像：

```
id , content, order-by
1  , d      , 3
2  , a      , 4
3  , v      , 1
4  , i      , 2
5  , d      , 5 
```

复杂之处在于我必须手动或以编程方式更新受顺序、删除或添加更改影响的其他行。是不是有人已经做了一些内置功能或脚本来节省一些时间？

提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:58:40.480

每当您的程序更改订单时，您都必须使用正确的 order_by 值更新 order_by 列。我曾在一个程序集上工作过，其中可以通过拖放更改页面顺序。这些位置将保存在 JS 变量中，直到保存为止。提交后，修改后的订单将在表格中更新。

当您访问表格时，您必须执行以下操作：

```
 SELECT * from table order by order_by; 
```

这一切都取决于您的桌子的大小，以及您试图通过订单实现的目标。

正如@Matt Gibson 在评论中提到的那样，如果您尝试实现列表的拖放排序，您可以使用[jQuery UI Sortable](http://jqueryui.com/sortable/)。你可以实现类似 -

```
 var result = $('#sortable').sortable('toArray');
 $.post(
        url,
        "order="+result
 ); 
```

接收 PHP url 中的位置值，并对其进行处理。

# http - 为什么 HTTP 使用 TCP？

> ID：12832856
> 
> 赞同：9
> 
> 时间：2012-10-11T05:35:01.997
> 
> 标签：http, tcp, udp

我想解释这个问题的一种方法是为什么 HTTP 不能只使用 UDP？TCP 提供的哪些特定功能是 HTTP 明确要求的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T05:42:47.923

排序、非重复、完整性、大型有效载荷的步调……与其他任何人真正需要的一样。几年前有一个举措，为适合单个数据报的微小有效负载提供基于 UDP 的 HTTP，并且响应同样如此，但是大多数 HTTP 有效负载对于一个数据报来说太大了，因此失去了意义。

# mysql - 从 ActiveRecord 到 MySQL 的日期恢复到 2000-01-01

> ID：12832857
> 
> 赞同：1
> 
> 时间：2012-10-11T05:35:04.517
> 
> 标签：mysql, ruby, activerecord, time, ruby-on-rails-3.1

我试图在 MySQL 表中节省时间。但是，日期恢复为 2000-01-01。

```
1.9.2p320 :036 > vv = Visitor.new
 => #<Visitor id: nil, ip_address: nil, num_day_visits: nil, last_visit: nil> 
1.9.2p320 :037 > vv.last_visit = Time.now; vv.ip_address = "3.3.3.3"
 => "3.3.3.3" 
1.9.2p320 :038 > vv.num_day_visits = 1
 => 1 
1.9.2p320 :039 > vv
 => #<Visitor id: nil, ip_address: "3.3.3.3", num_day_visits: 1, last_visit: "2012-10-11 01:31:04"> 
1.9.2p320 :040 > vv.save
  SQL (0.2ms)  BEGIN
  SQL (0.7ms)  INSERT INTO `visitors` (`ip_address`, `last_visit`, `num_day_visits`) VALUES (?, ?, ?)  [["ip_address", "3.3.3.3"], ["last_visit", 2012-10-11 01:31:04 -0400], ["num_day_visits", 1]]
   (0.5ms)  COMMIT
 => true 
1.9.2p320 :042 > vv
 => #<Visitor id: 1199, ip_address: "3.3.3.3", num_day_visits: 1, last_visit: "2012-10-11 01:31:04"> 
1.9.2p320 :043 > Visitor.find(:all,:conditions=>{:ip_address => "3.3.3.3"})
  Visitor Load (1.4ms)  SELECT `visitors`.* FROM `visitors` WHERE `visitors`.`ip_address` = '3.3.3.3'
 => [#<Visitor id: 1199, ip_address: "3.3.3.3", num_day_visits: 1, last_visit: "2000-01-01 05:31:04">] 
```

所以当我检索记录时，日期是 2000-01-01。

MySQL中的表：

```
mysql> describe visitors ;
+----------------+--------------+------+-----+---------+----------------+
| Field          | Type         | Null | Key | Default | Extra          |
+----------------+--------------+------+-----+---------+----------------+
| id             | int(11)      | NO   | PRI | NULL    | auto_increment |
| ip_address     | varchar(255) | NO   |     | NULL    |                |
| num_day_visits | int(11)      | NO   |     | NULL    |                |
| last_visit     | time         | NO   |     | NULL    |                |
+----------------+--------------+------+-----+---------+----------------+
4 rows in set (0.00 sec) 
```

**更新：**我创建了一个玩具表来玩从时间到日期时间的转换。这就是发生的事情：

```
mysql> select * from example ;
+----+----------+
| id | mytime   |
+----+----------+
|  1 | 11:13:00 |
+----+----------+
1 row in set (0.00 sec)
mysql> alter table example change mytime mytime datetime;
Query OK, 1 row affected, 1 warning (0.02 sec)
Records: 1  Duplicates: 0  Warnings: 1

mysql> select * from example ;
+----+---------------------+
| id | mytime              |
+----+---------------------+
|  1 | 0000-00-00 00:00:00 |
+----+---------------------+
1 row in set (0.00 sec) 
```

所以这破坏了价值。我试图通过将表格更改为时间并使用新行来返回。重新开始：

```
mysql> select * from example ;
+----+----------+
| id | mytime   |
+----+----------+
|  2 | 11:13:00 |
+----+----------+
1 row in set (0.00 sec)
mysql> ALTER TABLE example CHANGE mytime mytime DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP();
ERROR 1067 (42000): Invalid default value for 'mytime'
mysql> ALTER TABLE example CHANGE mytime mytime DATETIME NOT NULL DEFAULT CURRENT_DATE();
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CURRENT_DATE()' at line 1 
```

显然，[这很难](https://stackoverflow.com/q/168736/429850)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T06:00:28.700

这是因为您的`last_visit`列属于`time`而不是`datetime`类型。最初我假设 mysql 只是`01-01-2000`用作某种默认日期来在内部表示时间字段，但似乎 01-01-2000 是 rails 而不是 mysql。看看[在红宝石中表示没有日期的时间](https://stackoverflow.com/questions/6359978/represent-a-time-with-no-date-in-ruby)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T06:01:43.367

在你的 mysql 提示符下运行它，

ALTER TABLE 访问者更改 last_visit last_visit 日期时间；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T16:14:56.897

[使用Ashish](https://stackoverflow.com/a/12833126/429850)和[Beck](https://stackoverflow.com/a/12833135/429850)的答案了解我的问题时，我只是将时间存储在 MySQL 中，而 rails 正在为其添加默认的 2000-01-01。我试图找到一种方法来更新现有数据以包含日期，使用今天的日期来更新记录。以下是我能得到的。

假设我们有

```
mysql> select * from example ;
+----+----------+
| id | mytime   |
+----+----------+
|  2 | 11:13:00 |
+----+----------+
1 row in set (0.00 sec) 
```

这就是我如何将 mytime 更改为更新的日期时间

```
mysql> alter TABLE example ADD  new_time datetime;
Query OK, 1 row affected (0.04 sec)
mysql> UPDATE example SET new_time = CONCAT( CURDATE(), " ", mytime );
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
mysql> ALTER TABLE example DROP mytime ;
Query OK, 1 row affected (0.03 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE example CHANGE new_time mytime DATETIME;
Query OK, 1 row affected (0.04 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> select * from example ;
+----+---------------------+
| id | mytime              |
+----+---------------------+
|  2 | 2012-10-11 11:13:00 |
+----+---------------------+
1 row in set (0.00 sec) 
```

在一个示例中，我找不到一种方法来结合数据更新和更改字段类型。有人有更好的想法吗？

# python - 如何使用生产中提供的 celeryd.conf 文件

> ID：12832858
> 
> 赞同：1
> 
> 时间：2012-10-11T05:35:09.267
> 
> 标签：python, django, celery, django-celery

这是[https://github.com/ask/django-celery/blob/master/contrib/supervisord/celeryd.conf](https://github.com/ask/django-celery/blob/master/contrib/supervisord/celeryd.conf)提供的文件。如何运行这个 conf 文件？

我正在使用 gunicorn 运行我的 django 应用程序

```
; =======================================
;  celeryd supervisor example for Django
; =======================================

[program:celery]
command=/path/to/project/manage.py celeryd --loglevel=INFO
directory=/path/to/project
user=nobody
numprocs=1
stdout_logfile=/var/log/celeryd.log
stderr_logfile=/var/log/celeryd.log
autostart=true
autorestart=true
startsecs=10

; Need to wait for currently executing tasks to finish at shutdown.
; Increase this if you have very long running tasks.
stopwaitsecs = 600

; if rabbitmq is supervised, set its priority higher
; so it starts first
priority=998 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:22:49.130

该配置文件不能单独运行；它与[supervisord](http://supervisord.org/)一起使用。

您需要安装 supervisord（如果您有 pip，请使用）`pip install supervisor`，[为其创建一个配置文件，](http://supervisord.org/installing.html#creating-a-configuration-file)`sudo echo_supervisord_conf > /etc/supervisord.conf`然后将上述文件的内容复制粘贴到您的 supervisord 配置文件中，如[添加程序](http://supervisord.org/running.html#adding-a-program)下的 supervisord 文档中所述。

所以基本上在你的 shell 上运行以下命令：

```
pip install supervisor
sudo echo_supervisord_conf > /etc/supervisord.conf
sudo wget -O - -o /dev/null https://raw.github.com/ask/django-celery/master/contrib/supervisord/celeryd.conf >> /etc/supervisor.conf
sudo $EDITOR /etc/supervisor.conf 
```

并将配置文件编辑为您喜欢的内容。

# apache - 如何强制 URL 区分大小写

> ID：12832860
> 
> 赞同：3
> 
> 时间：2012-10-11T05:35:15.530
> 
> 标签：apache, .htaccess, url

假设我有域 mydomain.com，我想做的是强制浏览器在 URL 栏中显示 MyDomain.com。我有以下htaccess：

```
# force all to MyDomain.com
RewriteCond %{HTTP_HOST} !^www.MyDomain
RewriteRule (.*) http://www.MyDomain.com/$1 [R=301,L] 
```

但它不起作用。是否有任何技巧/黑客可以使浏览器显示不是全部小写的 URL？或者这是不可能的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T05:40:37.227

不，域和子域总是小写的。DNS 系统始终不区分大小写。

[https://www.rfc-editor.org/rfc/rfc4343](https://www.rfc-editor.org/rfc/rfc4343)

# c++ - C中的浮点运算错误

> ID：12832863
> 
> 赞同：3
> 
> 时间：2012-10-11T05:35:41.737
> 
> 标签：c++, c, floating-point, floating-accuracy

请让我知道以下 C 函数之间的区别。

```
static int mandel(float c_re, float c_im, int count) {
    float z_re = c_re, z_im = c_im;
    int i;
    for (i = 0; i < count; ++i) {
        if (z_re * z_re + z_im * z_im > 4.f)
            break;

        float new_re = z_re*z_re - z_im*z_im;
        float new_im = 2.f * z_re * z_im;
        z_re = c_re + new_re;
        z_im = c_im + new_im;
    }

    return i;
} 
```

以及以下

```
static int mandel(float c_re, float c_im, int count) {
    float z_re = c_re, z_im = c_im;
    int i;
    for (i = 0; i < count; ++i) {
        if (z_re * z_re + z_im * z_im > 4.f)
            break;

        float new_im = 2.f * z_re * z_im;
        z_re = c_re + z_re*z_re - z_im*z_im;//I have combined the statements here and removed float new_re
        z_im = c_im + new_im;
    }

    return i;
} 
```

请参阅我对代码更改的评论。该函数为某些输入提供不同的值。由于结合了这两个语句，浮点数是否会出错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T05:42:48.973

在数学中，这两个陈述是等价的。但是在计算机硬件中它们可能不是。

您可能会遇到四舍五入错误，因为初始结果 (new_re) 已四舍五入，然后添加到 c_re 。

正如尼克拉斯所说：

> 以更高的精度存储中间值

因此 new_re 的结果在存储到 new_re 时可能会丢失一些浮点数，但如果将中间值添加到 c_re 中，则 c_re 的小值与 new_re 计算的较低有效值相结合可能有助于最终结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:57:09.967

在计算数学表达式时，允许 C 或 C++ 编译器生成的代码以更高的精度保留中间结果。

例如，在 x86 计算机上，C 和 C++`double`值通常是[64 位 IEEE754](http://en.wikipedia.org/wiki/IEEE_floating_point)浮点数，但数学处理器堆栈在进行计算时每个值使用 80 位。

这意味着计算的确切结果将取决于临时存储在内存中的位置以及它保存在 fp 堆栈中的位置。通常这不是问题，因为临时变量的精度**高于**存储值的精度……但这并不总是正确的，因为计算可能是完全围绕浮点预期舍入规则设计的。

另请注意，编译器提供了特殊标志来要求严格执行数学评估或允许它们非常自由地帮助优化（包括忽略将操作存储到局部变量或将操作重写为理论数学等效版本）。今天的默认设置通常有点宽松，而且不是很严格，因为这会损害性能。

# javascript - 如何解析这个 html 响应？

> ID：12832875
> 
> 赞同：-2
> 
> 时间：2012-10-11T05:36:30.287
> 
> 标签：javascript

我已经发布了我的 html 回复。有人可以帮我解析以下回复吗？

```
<?xml version="1.0" encoding="utf-8"?>

<string xmlns="http://localhost:53179/hdfcmobile">
    {"Status":"True","Data":[{"Loginstatus":"Success","agentid":1004}]}
</string> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:39:53.617

这不是 HTML 响应。这是一个 JSON 响应。

您可以使用众多 JSON 解析器库之一对其进行解析。[在http://www.json.org](http://www.json.org)上有一个综合列表。

* * *

**更新**

对于您的问题的新版本，您似乎拥有的是一个 XML 文档，该文档在 XML 元素中嵌入了 JSON。

您需要使用 XML 解析器来提取`string`元素的文本内容，然后使用 JSON 解析器来解析该文本。

^(为什么会有人认为像这样混合 XML 和 JSON 是个好主意？)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:40:53.260

您的响应是 JSON 字符串。为了使用它，您应该将它转换为 JavaScript 对象。`eval`函数可用于此目的：

```
var response = '{"Status":"True","Data":[{"Loginstatus":"Success","agentid":1004}]}';
eval('var a='+response);
alert("Status = " + a.Status);
alert("Data.Loginstatus = " + a.Data[0].Loginstatus);
alert("Data.agentid = " + a.Data[0].agentid); 
```

**更新**

自从我留下答案以来，问题已经更新，所以这是我的答案的补充:)。为了从获得的 XML 响应中提取 JSON 字符串，您可以使用`"<string[^>]*>(.*?)<\/string>"`如下正则表达式：

```
var responseText = '<?xml version="1.0" encoding="utf-8"?>

<string xmlns="http://localhost:53179/hdfcmobile">
    {"Status":"True","Data":[{"Loginstatus":"Success","agentid":1004}]}
</string>';

var oRegExp = new RegExp("<string[^>]*>(.*?)<\/string>", "ig");
var matches = oRegExp.exec(responseText);
var response = matches[1]; 
```

之后，您可以使用上面编写的代码转换`response`为 JavaScript 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:40:57.743

这只是`json`数据。您应该能够将其读入对象：

```
var JSONtext = '{"Status":"True","Data":[{"Loginstatus":"Success","agentid":1004}]}'
var myObject = JSON.parse( JSONtext ); 
```

至于为什么要在 xml 中获取 json 对象作为响应，那是另一回事。通常您的响应应该是 json 或 xml

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:42:53.157

这看起来像是在其中一个节点内使用 JSON 的 XML 响应——而不仅仅是 JSON 响应。您可能会从该节点中提取 JSON 字符串，然后使用`JSON.parse(extracted_json)`

# iphone - 更改设备方向后如何防止 UIScrollView 的大小？

> ID：12832879
> 
> 赞同：0
> 
> 时间：2012-10-11T05:37:09.843
> 
> 标签：iphone, ios, uiscrollview, orientation

![在此处输入图像描述](../Images/4b5917de7598eeab6061bf08d6900c7c.png)

我有`UIScrollView`纵向模式的xib文件。当我运行应用程序并将设备旋转到横向模式时，我看到了`UIScrollView`. `UIScrollView`底部内部的一半控件无法访问。没有任何可见的滚动条。

如何防止更改`UIScrollView`设备方向后的垂直尺寸变化？

![在此处输入图像描述](../Images/10cffbb29710e3bbe869f812541fc9f8.png) ![在此处输入图像描述](../Images/3a37eea1d70cd6bc655a7e88d430922e.png)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:42:53.733

更改 UIScrollView 的框架

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation; 
```

根据设备旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:49:22.183

```
 shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
      if(interfaceOrientation == UIInterfaceOrientationPortrait)
    {
         //set frame for scroll in portrait mode
    }
    else  if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft)
    {
      //set frame for landscape
    }

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:52:32.477

**编辑：**选择您的 UIScrollView 并像这样更改滚动视图的 autoresize 属性。

![在此处输入图像描述](../Images/1e5ff9d1fd25f2e19e0b03b17d43b1e8.png)

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation;
 {
     //change sub view of scrollview accordingly to orientation
     if(UIInterfaceOrientationIsPortrait(interfaceOrientation))
         yourScrollView.frame = CGRectMake(0,0,320,460);
         yourScrollView.contentSize = CGSizeMake(320,460);//change accordingly
     else
         yourScrollView.frame = CGRectMake(0,0,480,300);
         yourScrollView.contentSize = CGSizeMake(480,460); //change accordingly

     return YES;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:58:30.583

选择您的 UIScrollView，然后从属性中单击大小检查器并更改视图的 autoresize 属性。

![看图片](../Images/5f24d5ff0b1cc611c79df4a9135dc1d0.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T15:39:19.303

1.  设置**参考插座**。
2.  使用代码：

    scrollView.contentSize = CGSizeMake(宽度, 高度);

# java - GUI程序图片随下拉菜单动作java而变化

> ID：12832885
> 
> 赞同：1
> 
> 时间：2012-10-11T05:37:39.467
> 
> 标签：java, swing, action, jframe, jlabel

我写了一个程序来计算每加仑输入的英里数。它也可以通过下拉菜单切换到公里。我正在努力做到这一点，以便当我选择下拉菜单时，每次切换时图片都可以切换。所以英里和公里的图片不同。它很愚蠢，但它是作业的要求之一。我该怎么做呢？这是我目前拥有的，我只想让图片在我拥有的两个之间切换。

```
import java.awt.Component;
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import static javax.swing.GroupLayout.Alignment.*;
import net.miginfocom.swing.MigLayout;
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class mpg_mig extends JFrame {
   public mpg_mig() {

     JLabel titleLabel = new JLabel("Fuel Calculator");
     titleLabel.setFont(new Font("Serif", Font.BOLD, 18));
     titleLabel.setForeground(Color.blue);

     final JLabel distLabel = new JLabel("Miles:");
    final JTextField distText = new JTextField(10);
     JLabel traveledLabel = new JLabel("traveled");

     final JLabel fuelLabel = new JLabel("Gas:");
     final JTextField fuelText = new JTextField(10);

     final JLabel mpgLabel = new JLabel("Miles per gallon:");
     final JTextField mpgText = new JTextField(10);      

     JButton clearButton = new JButton("Clear");
     JButton calcButton = new JButton("Calculate");

    String[] actStrings = { "Miles", "kiloMeters" };
     JComboBox jComboBox1 = new JComboBox(actStrings);
    jComboBox1.setEditable(true);      

     String sFileName = "circuit1.png";

       BufferedImage image = null;
       try {                 
       image = ImageIO.read(new File(sFileName)); 
     } catch (IOException ex) { 

       System.out.println (ex.toString());
       System.out.println(sFileName);

       JOptionPane.showMessageDialog(null,ex.toString() + " " + sFileName);

       System.exit(0); 

     } 

     JLabel labelPic1 = new JLabel(new ImageIcon(image));

    setResizable( false );

    JPanel p = new JPanel(new MigLayout("", "[] [] []",     
                                        "[] [] [] [] []")); 

    p.setBackground(Color.WHITE);
    setContentPane(p);

     p.add(labelPic1,   "cell 0 0 1 3"); //(column 0, row 0, width 1, height 3) 
     p.add(clearButton, "cell 0 3");     //(column 0, row 3)
     p.add(calcButton,  "cell 0 4");     //(column 0, row 4)

     p.add(titleLabel, "cell 1 0");  //(column 1, row 0)
     p.add(distLabel,  "cell 1 1");  //(column 1, row 1)
     p.add(fuelLabel,  "cell 1 2");  //(column 1, row 2)
     p.add(mpgLabel,   "cell 1 3");  //(column 1, row 3)        
     p.add(jComboBox1, "cell 1 4");  //(column 1, row 4)

     p.add(distText, "cell 2 1");    //(column 2, row 1)
     p.add(fuelText, "cell 2 2");    //(column 2, row 2)
     p.add(mpgText,  "cell 2 3");    //(column 2, row 3)

       clearButton.addActionListener(new ActionListener()
       {  public void actionPerformed(ActionEvent event)
          {  
            distText.setText("");
            fuelText.setText("");
            mpgText.setText("");
          }
       });

       calcButton.addActionListener(new ActionListener()
       {  public void actionPerformed(ActionEvent event)
          {  

             if(isNumeric(distText.getText()) && 
                isNumeric(fuelText.getText()))
             {
                 double fuel;
                 double dist;
                 double result;

                 fuel = Double.parseDouble(fuelText.getText());
                 dist = Double.parseDouble(distText.getText());
                 result = dist/fuel;
                 result = Round(result,2);

                 mpgText.setText(String.format("%f", result));
             }
             else
             {
              JOptionPane.showMessageDialog(null, "Enter distance traveled and fuel used");
             }  
           }                   

       });

      jComboBox1.addActionListener(new ActionListener()
       {  public void actionPerformed(ActionEvent event)
          {  
             //JComboBox jComboBox1 = (JComboBox)event.getSource();
              JComboBox jComboBox1 = (JComboBox)event.getSource();

             if(jComboBox1.getSelectedItem() == "Miles")
             {
                 distLabel.setText("Miles");
                 mpgLabel.setText("Miles per gallon:");
             }
              else
             {
               distLabel.setText("KiloMeters");
                 mpgLabel.setText("KM per liter:");
             }

          }
       });      

       setTitle("MPG and KML");
       pack(); //pack disables setting frames size...
          setLocationRelativeTo(null);//center frame and showMessageDialog
       setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);      
   }

   private static boolean isNumeric(String text)
   {  try
      {  Double.parseDouble(text);  }
      catch (Exception e)
      {  return false;  }
      return true;
   }

  public  double Round(double val, int plc)
  {
      double pwr = Math.pow(10,plc);  
      val = val * pwr;   //shift to the left
      double tmp = (int) val;     

      if( ((int)(val + .5)) == (int) val)
        return (tmp/pwr); //don't round up
      else
        return((tmp + 1.0)/pwr); //round up
  }

   public static void main(String args[]) {
       java.awt.EventQueue.invokeLater(new Runnable() {
           public void run() {
               try {
                   UIManager.setLookAndFeel(

                        UIManager.getCrossPlatformLookAndFeelClassName());
               } catch (Exception ex) {
                   ex.printStackTrace();
               }
               new mpg_mig().setVisible(true);
           }
       });
   }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:59:11.917

您需要将一个附加`ItemListener`到您的组合框。更改时，您需要确定所选项目（`JComboBox.getSelectedItem`或`JComboBox.getSelectedIndex`）并根据需要更新图像...

您也可以使用您现有的`ActionListener`来代替

![在此处输入图像描述](../Images/9d3914120a7d531932218fc869f27f73.png) ![在此处输入图像描述](../Images/e6cb346aa2eb900a1c6a3dff2cfbaafb.png)

```
public class SwitchPicture {

    public static final String[] IMAGES = new String[]{
        "path/to/your/first/image",
        "path/to/your/second/image"
    };

    public static void main(String[] args) {
        new SwitchPicture();
    }

    public SwitchPicture() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SwitcherPane());
                frame.pack();
                frame.setVisible(true);
            }
        });

    }

    protected class SwitcherPane extends JPanel {

        private BufferedImage[] images;
        private JLabel lblBackground;
        private JComboBox comboBox;

        public SwitcherPane() {

            try {
                images = new BufferedImage[2];
                for (int index = 0; index < 2; index++) {
                    images[index] = ImageIO.read(new File(IMAGES[index]));
                }
            } catch (IOException ex) {
                ex.printStackTrace();;
            }

            setLayout(new BorderLayout());
            lblBackground = new JLabel();
            lblBackground.setIcon(new ImageIcon(images[0]));

            add(lblBackground);

            comboBox = new JComboBox();
            comboBox.getSelectedItem()
            // I did this because the images where so large
            // you couldn't see the combo box :P
            comboBox.setFont(comboBox.getFont().deriveFont(48f));
            DefaultComboBoxModel<String> model = new DefaultComboBoxModel<>();
            model.addElement("Happy");
            model.addElement("Happier");
            comboBox.setModel(model);
            comboBox.setSelectedIndex(0);

            lblBackground.setLayout(new GridBagLayout());
            lblBackground.add(comboBox);

            comboBox.addItemListener(new ItemListener() {

                @Override
                public void itemStateChanged(ItemEvent e) {
                    lblBackground.setIcon(new ImageIcon(images[comboBox.getSelectedIndex()]));
                }
            });

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T05:43:49.540

```
// in the action detection
labelPic1.setIcon(new ImageIcon(newImage)); 
```

# html - 在 jsp 中显示一个从同一页面获取值的弹出窗口

> ID：12832887
> 
> 赞同：1
> 
> 时间：2012-10-11T05:37:50.907
> 
> 标签：html, jsp, spring-mvc

我需要从我的 jsp 中显示一个弹出窗口。代码如下。

```
<form:form method="post" commandName="transactionDetails"
    align="center">
    <form:radiobutton path="plan" value="0" label="prepaid" />
    <form:radiobutton path="plan" value="1" label="postpaid" />
    <br>
    <br>Mobile Number : <br>
    <form:input path="mobile" />
    <br>

    <br>
     Operator <br>
    <form:select path="operator">
        <form:option value="Select operator">Select Operator</form:option>
        <form:option value='Aircel'>Aircel</form:option>
        <form:option value='Airtel'>Airtel</form:option>
        <form:option value='BSNL'>BSNL</form:option>
        <form:option value='Idea'>Idea</form:option>
        <form:option value='MTNL'>MTNL</form:option>
        <form:option value='MTS'>MTS</form:option>
        <form:option value='Loop Mobile'>Loop Mobile</form:option>
        <form:option value='Reliance CDMA'>Reliance CDMA</form:option>
        <form:option value='Reliance GSM'>Reliance GSM</form:option>
        <form:option value='S Tel'>S Tel</form:option>
        <form:option value='Tata DOCOMO'>Tata Docomo GSM</form:option>
        <form:option value='Tata Indicom'>Tata Docomo CDMA</form:option>
        <form:option value='Uninor'>Uninor</form:option>
        <form:option value='Videocon'>Videocon</form:option>
        <form:option value='Virgin GSM'>Virgin GSM</form:option>
        <form:option value='Virgin CDMA'>Virgin CDMA</form:option>
        <form:option value='Vodafone'>Vodafone</form:option>
        <form:option value='Cheers'>Cheers</form:option>
        <form:option value='Ping'>Ping</form:option>

    </form:select>
    <br>
    <br> Amount <br>: 
         <form:input path="amount" />

    <br>
    <br>
    <input type="submit" class="btn" value="Proceed to recharge"> 
```

现在，当用户单击选择运算符时，它应该显示特定运算符的计划。我正在使用弹簧 mvc。

类似于paytm..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:10:14.177

操作员调用 javascript 函数的 OnChange 为

```
<form:select path="operator" id="operator" onChange="SelectOperator();">         
       <form:option value="Select operator">Select Operator</form:option>         
       <form:option value='Aircel'>Aircel</form:option>         
        ......
</form:select> 
```

通过调用 Spring Controller 并将此运算符传递为，编写打开弹出窗口的 javascript 函数

```
<Script language="javascript">
function SelectOperator() {
    var opr = document.getElementById("operator").value;
    window.open("NEWPOPUP","/controllerURL?operator="+opr);
}
</script> 
```

无论从该控制器返回哪个页面，都将作为弹出窗口打开。

# python - django-postman 扩展了一个不存在的 base.html

> ID：12832891
> 
> 赞同：2
> 
> 时间：2012-10-11T05:38:08.190
> 
> 标签：python, django

我已经`django-postman`根据[文档](https://django-postman.readthedocs.org/en/latest/)安装和配置：

在`urls.py`我的项目的根目录中：

```
(r'^messages/', include('postman.urls')), 
```

在 settings.py 中：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'grappelli',
    'filebrowser',
    'django.contrib.admin',
    'south',
    'postman',
    'MeetingManagerHub',
    'PersonHub',
    'TaskManagerHub',
    'AgencyHub',
    'DrHub',
    'CompanyHub',
    'AdvHub',
    'CarHub',
    'django.contrib.comments',
    'easy_maps',
    'MagazineHub',
    'captcha',
    'pagination'
) 
```

所以我输入了地址：`http://127.0.0.1:8081/messages/inbox/` 但是当我点击链接时，它们都不起作用！我只看到这个页面！ ![在此处输入图像描述](../Images/7925e56c5e44b2acb8c3f0bb3b90799b.png) **更新**：

我创建了一个包含以下内容的 man_base.html 文件：

```
<html>
<head>
<title>{% block title %}{% endblock %}</title>
{% block extrahead %}{% endblock %}
</head>
<body>
{% block postman_menu %}{% endblock %}
{% block content %}{% endblock %}
</body>
</html> 
```

并将这一行添加到`base.html`文件的开头：

```
{% extends "postman/main_base.html" %} 
```

它奏效了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:45:06.383

您是否将预期添加`base.html`到您的`TEMPLATE_DIRS`根目录？

> postman/base.html 模板扩展了一个 base.html 站点模板，其中需要一些块： title: in ，至少对于整个标题字符串的一部分 extrahead: in ，放置一些和元素 content: in ，到把页面内容 postman_menu: in , 放一个导航菜单

[也不是在同一页面](https://django-postman.readthedocs.org/en/latest/quickstart.html#installation)上对媒体文件的咆哮

# boost - 增强 Windows/代码块的构建说明，寻求帮助

> ID：12832895
> 
> 赞同：0
> 
> 时间：2012-10-11T05:38:18.433
> 
> 标签：boost

我得到了 windows 7 x64，当我在未能完成这些说明后弄清楚如何构建 bjam.exe 文件时，正在 dl'ing windows 7 .net 4 sdk

[http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef#Set_up_a_Code::Blocks_global_variable_for_Boost](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef#Set_up_a_Code::Blocks_global_variable_for_Boost)

但是当我运行 bjam 时，我仍然失败。

这些是我做的步骤

必须将 f:\codeblocks\mingw\bin 添加到路径然后以管理员身份打开命令提示符（而不是在路径之前），然后从 boost_1_51_0\tools\build\v2\engine\build.bat 运行

那我可以做

```
bjam --toolset=gcc "--prefix=<installpath>" install 
```

但是当我这样做时会收到此消息

```
F:\libraries\boost_1_51_0>bjam --toolset=gcc "--prefix=f:\codeblocks" install --
build-type=complete
warning: mismatched versions of Boost.Build engine and core
warning: Boost.Build engine (bjam) is 03.1.18
warning: Boost.Build core (at F:/libraries/boost_1_51_0/tools/build/v2) is 2011.
12-svn
F:/libraries/boost_1_51_0/tools/build/v2/util\path.jam:476: in path.makedirs
rule MAKEDIR unknown in module path.
F:/libraries/boost_1_51_0/tools/build/v2/build\configure.jam:190: in configure.s
et-log-file
F:/libraries/boost_1_51_0/tools/build/v2\build-system.jam:725: in load
F:\libraries\boost_1_51_0\tools\build\v2/kernel\modules.jam:283: in import
F:\libraries\boost_1_51_0\tools\build\v2\kernel\bootstrap.jam:142: in boost-buil
d
F:\libraries\boost_1_51_0\boost-build.jam:17: in module scope 
```

几乎看起来 linux 路径正在混入其中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:39:17.327

我想到了。

我重新下载了说明中的 bjam，将其转储到我最初设置的 f:\libraries\bjam 文件夹中。

set path=f:\libraries\bjam yadad;%PATH$ 不管什么命令

cd 到 boost_1_51_0 目录

重新运行构建命令

要真正构建一些东西，我必须将其添加到其他链接器选项中，或者，您必须将“$(#boost.lib)\libboost_system-mgw44.lib”添加到“其他链接器选项”中。

来源 [http://forums.codeblocks.org/index.php?topic=11908.5;wap2](http://forums.codeblocks.org/index.php?topic=11908.5;wap2)

# asp.net-mvc - 域模型的验证：如何和在哪里

> ID：12832897
> 
> 赞同：5
> 
> 时间：2012-10-11T05:39:02.210
> 
> 标签：asp.net-mvc, entity-framework, validation, asp.net-mvc-4, entity-framework-5

典型的 EF+MVC 系统将具有两个或三个级别的验证：

1.  对于 ViewModel：输入/物理验证（DataAnnotations、FluentValidation），也就是长度、空值、范围、正则表达式等。
2.  对于模型：输入/物理验证（如果不使用 MVC 并且数据来自另一个系统、WCF、表单等，则重复 1）
3.  对于模型：逻辑/“业务规则”验证

对于实际模型/实体/域/“业务规则”，我找不到验证 2+3 的最佳实践。我们要么：

*   将简单的验证规则放在实体的属性设置器中（但这真的很混乱）
*   挂钩到 EF `SaveChanges()`，如果实体处于`Added`or`Modified`状态，则触发验证（一次验证整个实体）

这很难维护。ViewModel 验证有很多想法，但对于模型验证，它是特定于域的，因此需要您确定一个创造性的解决方案，而我的并不是那么好。

*   是否有更好的方法或有用的工具（例如 DataAnnotations 或 FluentValidation，但对于域实体）？
*   进行模型验证或触发模型验证的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T06:13:37.950

一个典型的 MVC+EF 系统将有 3 层，但它们不是您所说的。

1.  表示层（输入/输出）
2.  业务层（逻辑层）
3.  数据层（模型代表底层数据）

MVC 为第 1 层提供验证。EF 为第 3 层提供验证。MVC 或 EF 都没有为第 2 层提供验证功能。如果你想在那里进行验证，你必须自己做，或者使用第三方业务对象框架.

第 1 层和第 3 层中的验证是分开的，尽管在许多情况下它们可能具有相似的验证。原因是验证以不同的方式和不同的要求完成。

例如，由于数据建模或业务逻辑原因，您的数据库中可能有一个可以为空的字段（假设某些数据是预加载的，并且用户需要在业务流程中更新该字段）。数据层说它可以为空，但您希望您的 UI 使其成为必需的。

编辑：

简而言之，数据模型不应该强制执行业务规则。因此，除了针对物理数据模型进行验证外，您不需要在数据模型中进行任何验证（即，如果字段可以为空，则模型中的数据类型应该可以为空，否则不可以）。在大多数情况下，您实际上不能插入无效（从数据模型的角度来看）数据，因为代码模型不允许这样做。唯一的例外是字符串变量，它显然会溢出物理模型的大小限制，但如果发生这种情况，那么无论如何都会抛出异常。

您的中间层，即业务层，应该是您需要验证业务规则的地方（例如，客户采购订单必须以字母开头）。MVC 或实体框架，或 WCF 或其他任何东西都没有提供任何方法来进行此验证。

这里有一点脱节，因为业务规则应该（理论上）驱动表示层验证。但是，MVC 没有内置功能可以做到这一点。因此，您最终会在 UI 中复制您的业务规则。

至少有一个第三方业务对象框架试图处理这个问题。CSLA。他们提供了一个自定义的 MVC 模型绑定器，将业务对象与 UI 联系起来以进行验证，但这只是使用 MVC 的内置可扩展性来执行此操作。

因此，如果您不想使用专用的业务对象框架，您要么在 UI 和业务层之间重复验证，要么试图找出自己的方法来让您自己的业务层控制 UI 验证。

# azure - 关于 CloudBlockblob.putBlock 和 CloudBlockBlob.PutBlockList

> ID：12832900
> 
> 赞同：0
> 
> 时间：2012-10-11T05:39:17.253
> 
> 标签：azure, blob

我知道我们可以使用`CloudBlockblob.putBlock`和`CloudBlockBlob.PutBlockList`上传块，但这些方法没有租约 id 参数。

为此，我可以使用标头形成 httpwebrequest`"x-ms-lease-id"`并附加到`CloudBlockblob.putBlock`和`CloudBlockBlob.PutBlockList`

* * *

嗨 Gaurav，我无法对您的回复发表任何评论，因此添加了它。

我尝试使用以下代码使用 BlobRequest.PutBlock 和 Blobrequest.PutBlock：

`for (int idxThread = 0; idxThread < numThreads; idxThread++) { tasks.Add(Task.Factory.StartNew(() => { KeyValuePair blockIdAndLength;

```
 while (true)
                    {

                        lock (queue)
                        {
                            if (queue.Count == 0)
                                break;

                            blockIdAndLength = queue.Dequeue();
                        }

                        byte[] buff = new byte[blockIdAndLength.Value];

                        //copying chunks into buff from inputbyte array
                        Array.Copy(buffer, blockIdAndLength.Key * (long)blockIdAndLength.Value, buff, 0, blockIdAndLength.Value);

                        // Upload block.
                        string blockName = Convert.ToBase64String(BitConverter.GetBytes(
                            blockIdAndLength.Key));

                             //string blockIdString = Convert.ToBase64String(ASCIIEncoding.ASCII.GetBytes(string.Format("BlockId{0}", blockIdAndLength.Key.ToString("0000000"))));

                        /// For small files like 100 KB it works files,for large files like 10 MB,it will end up uploading only 2-3 MB
                        /// //Is there any better way to implement Uploading in chunks and leasing.
                        /// 
                             string url = blob.Uri.ToString();
                             if (blob.ServiceClient.Credentials.NeedsTransformUri)
                             {
                                 url = blob.ServiceClient.Credentials.TransformUri(url);
                             }
                             var req = BlobRequest.Put(new Uri(url), 90, new BlobProperties(), BlobType.BlockBlob, leaseId, 0);
                             using (Stream writer = req.GetRequestStream())
                             {
                                 writer.Write(buff,0,buff.Length);
                             }
                             blob.ServiceClient.Credentials.SignRequest(req);
                             req.GetResponse().Close();                                                           

                    }

                }));

            }
            // Wait for all threads to complete uploading data.
            Task.WaitAll(tasks.ToArray());` 
```

这不适用于多个块..您能否提供您的输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:49:59.923

我不认为你可以。但是，请查看[Microsoft.WindowsAzure.StorageClient.Protocol命名空间中的](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.protocol.aspx)[BlobRequest](http://msdn.microsoft.com/en-us/library/windowsazure/ee758651.aspx)类。它具有[PutBlock](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.protocol.blobrequest.putblock.aspx)和[PutBlockList](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.protocol.blobrequest.putblocklist.aspx)函数，允许您指定 LeaseId。

希望这可以帮助。

# mysql - mySQL AVG 同一张表上具有一系列日期的字段

> ID：12832901
> 
> 赞同：1
> 
> 时间：2012-10-11T05:39:18.190
> 
> 标签：mysql, date, range, average

我有一张桌子

```
date      d_id    r_id  p_id  q_sold    onhand
2012-10-10  5       1   3025    3           10
2012-10-10  5       1   3022    12          20
2012-10-10  5       1   3023    15          33
2012-10-11  5       1   3025    3           10
2012-10-11  5       1   3022    12          20
2012-10-11  5       1   3023    15          33
2012-10-12  5       1   3025    3           10
2012-10-12  5       1   3022    12          20
2012-10-12  5       1   3023    15          33
2012-10-13  5       1   3025    3           10
2012-10-13  5       1   3022    12          20
2012-10-13  5       1   3023    15          33
2012-10-14  5       1   3025    3           10
2012-10-14  5       1   3022    12          10
2012-10-14  5       1   3023    15          33
2012-10-15  5       1   3025    3           5
2012-10-15  5       1   3022    12          5
2012-10-15  5       1   3023    15          33 
```

我想得到 q_sold 除以 5 天内的平均手数的结果，同时显示特定日期（如 2012-10-15）的其他数据。

我创建一个查询

```
set @stdate = '2012-10-10';
set @endate = '2012-10-15';
SELECT date, d_id,r_id,p_id,q_sold,onhand,qty_sold/AVG(qty_onhand) 
FROM stp_vwsales_info_tots 
WHERE date BETWEEN @stdate and @endate and d_id=5 
GROUP BY d_id,r_id,p_id 
```

但是显示的结果不正确，它显示的是 2012-10-10 而不是 2010-10-15 的数据

```
date          d_id r_id p_id  q_sold    onhand  avg
2012-10-10      5   1   3022    12      20      0.7579
2012-10-10      5   1   3023    15      33      0.4545
2012-10-10      5   1   3025    3       10      0.3273 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:49:39.577

使用您的**@stdate 和@endate**，`DATE(@stdate/@endate)`否则您必须通过**MySQL**`DATE_FORMAT(@stdate/@endate,'%Y-%m-%d')`将**@stdate/@endate**从字符串转换为日期

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:20:37.203

我认为您要寻找的是一种称为*简单移动平均*线的东西。

要计算这一点，您需要使用内联子查询 - 所以性能不会是最好的。

假设您要计算*前*5 天的平均值，请尝试以下操作：

```
SELECT 
  date, d_id, r_id, p_id, q_sold, onhand, 
  ( SELECT q_sold/AVG(t2.onhand)
    FROM stp_vwsales_info_tots AS t2
    WHERE p_id=t1.p_id AND DATEDIFF(t1.date, t2.date) BETWEEN 0 AND 4
  ) AS 'moving_avg'
FROM stp_vwsales_info_tots AS t1
GROUP BY t1.p_id,t1.date
order by t1.date; 
```**

# mysql - SQL Query 4 way join 查找不存在的人

> ID：12832904
> 
> 赞同：1
> 
> 时间：2012-10-11T05:39:30.397
> 
> 标签：mysql, sql

我有 4 个表...用户、朋友、文章和 article_shares（如书面形式）

用户可以通过简单地邀请他们阅读来分享他们创建的文章。我试图找到的是尚未被邀请分享文章的文章创建者（id 63）的朋友列表（id 34）。

所以，表用户：

```
user_id - name 
10         Dan
11         Doug
12         Chad
13         Ben
63         John 
```

桌友

```
user_id - friends_id
63        10
63        11
63        12
63        13 
```

表文章

```
article_id - user_id_creator
34           63 
```

表 article_shares

```
article_id - user_id_sharedWith
34           10
34           11 
```

根据上面的数据，我想返回 id 为 12 和 13 的用户 .. chad & ben

这是我正在尝试的：

```
select u.name, u.user_id, u.live_prof_pic from users u
join friends f on f.user_id = u.user_id 
join articles a on a.user_id_creator = f.friends_id
join article_shares as on as.articl_id <> a.article_id
where ((f.friends = '63') && (a.article_id = '34')) 
```

它只是返回 0

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:46:19.847

试试这个，

```
SELECT  c.friends_ID
FROM    articles a
        INNER JOIN users b
            ON a.user_Id_creator = b.user_ID
        INNER JOIN friends c
            ON b.user_ID = c.user_ID
        LEFT JOIN article_shares d
            a.article_ID = d.article_ID
WHERE   b.user_ID = 63 AND
        a.article_ID = 34 AND
        d.article_ID IS NULL 
```

# algorithm - 两套物品。集合 A 的每个元素在集合 B 中唯一匹配。在 O(nlogn) 时间内将集合 A 的每个项目与集合 B 中的项目匹配

> ID：12832905
> 
> 赞同：5
> 
> 时间：2012-10-11T05:39:33.757
> 
> 标签：algorithm

所以，为了澄清这个问题：

集合 A 和集合 B 集合 A 中的每个元素在集合 B 中都有一个伙伴，您无法根据将其与同一集合的成员进行比较来对任一集合进行排序，即 B 的每个 b 元素与集合 B 的任何其他 b 都无法区分（ A) 也是如此。当 Ai 与 Bi 匹配时，您可以判断`Bi > Ai`是`Bi < Ai`还是`Bi = Ai`。设计一个运行时间为 O(nlogn) 的算法。

二次时间的明显答案是微不足道的而且没有帮助——尽管它是我想出的最好的。log(n) 让我认为我应该使用递归或某种二叉树，但我不确定如何在不比较同一集合中的元素的情况下创建二叉树。此外，我不确定如何使用递归调用来获得比仅运行嵌套 for 循环更大的效果。任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T05:49:18.093

你没有说得很清楚，但你的问题看起来很像“[螺母和螺栓匹配](http://www.wisdom.weizmann.ac.il/~naor/PUZZLES/nuts_solution.html)”问题。

这个想法是随机选择一个螺母a，找到匹配的螺栓b。使用螺母 a 对螺栓进行分区，使用螺栓 b 对螺母进行分区，然后递归，就像快速排序一样。

（当然，我们所说的平均情况是 nlogn，而不是最坏的情况）。

# ruby-on-rails-3 - Minitest w/ Rails 中的匿名控制器

> ID：12832909
> 
> 赞同：3
> 
> 时间：2012-10-11T05:39:56.113
> 
> 标签：ruby-on-rails-3, rspec, minitest

在从 RSpec 转换到 Minitest 时，我遇到了一个小问题，谷歌一点也没有帮助，那就是弄清楚如何做这样的事情：

```
describe ApplicationController do
  controller do
    def index
      render nothing: true
    end
  end

  it "should catch bad slugs" do
    get :index, slug: "bad%20slug"
    response.code.should eq("403")
  end
end 
```

与 Minitest。有没有办法在 Minitest 中创建像这样的匿名控制器，或者是否有文档可以帮助我学习如何使用 minitest 测试控制器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-28T09:30:06.287

你可以这样做：

```
# Add at runtime an action to ApplicationController
ApplicationController.class_eval do
  def any_action
    render :nothing
  end
end

# If disable_clear_and_finalize is set to true, Rails will not clear other routes when calling again the draw method. Look at the source code at: http://apidock.com/rails/v4.0.2/ActionDispatch/Routing/RouteSet/draw
Rails.application.routes.disable_clear_and_finalize = true

# Create a new route for our new action
Rails.application.routes.draw do
  get 'any_action' => 'application#any_action'
end

# Test
class ApplicationControllerTest < ActionController::TestCase
  should 'do something' do
    get :any_action

    assert 'something'
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T06:17:39.510

我认为不支持匿名控制器。尝试在测试中定义一个控制器，而不是使用 DSL 创建控制器。

```
class SlugTestController < ApplicationController
  def index
    render nothing: true
  end
end

describe SlugTestController do
  it "should catch bad slugs" do
    get :index, slug: "bad%20slug"
    response.code.must_equal "403"
  end
end 
```

# ruby - 在 ruby 中使用哈希排序的正确方法

> ID：12832911
> 
> 赞同：3
> 
> 时间：2012-10-11T05:40:11.413
> 
> 标签：ruby, hash

我是 ruby​​ 新手，我正在尝试编写一个 dijkstra 函数，但我的哈希排序似乎根本不起作用

```
def distance(start_code, end_code, map)
#initialize hash for distance 
#distance are initialized to -1
dist_hash=Hash.new()
start_hash=Hash.new()
parent_hash=Hash.new()
close_list=Array.new()
find=-1
map.citylist.each do |e|
  dist_hash[e]=[+1.0/0.0]
end

start_hash[start_code]=0
parent_hash[start_code]=start_code

while (start_hash.empty?)==false

   #sort the hash
  start_hash.sort_by {|k,v| v}
  puts 'value'      
  puts start_hash.values()  
   #pop the first item in the hash
  h=start_hash.shift()
  curr_key=h[0]
  curr_val=h[1]
  curr_city=map.findcity(curr_key)
  close_list<<curr_city.code

   #for every one in adjacent list
  curr_city.get_adj_city().each do |e|

     #if it in the close list then igonore
    if close_list.include?(e)==false  
       #if it is not in the start_hash then add to start hash
      if start_hash.has_key?(e)==false
        dist=map.adj_dist(curr_city.code, e)
        dist=dist+curr_val
        start_hash[e]=dist
        parent_hash[e]=curr_city.code
       #if it is in the start_hash check if we have better distance
      else
        dist=map.adj_dist(curr_city.code, e)
        if (dist+curr_val)<start_hash[e]
          parent_hash[e]=curr_city.code
          start_hash[e]=dist
        end
      end
       #end pf checking single adj city
    end
     #end of check if include in close

  end
   #end of check whole list

  if curr_city.code==end_code
    find=0
    break
  end

end
#end of check node
#result
if find==0
  ptr=end_code
  puts ptr
  puts "final list"

  while ptr!=start_code
    ptr=parent_hash[ptr]
    puts ptr
  end
  return 0
else
  return -1
end 
```

结尾

当我尝试调用 d.distance("BUE", "LOS", map)

输出看起来像

```
value
0
value
1680
4651
value
10053
8047
4651
value
11094
15839
15839
8047
4651
10779
.... 
```

这些值在 hash.sort_by 之后立即打印出来，但未排序。我是否正确使用该方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T06:53:17.740

Ruby 1.9 实际上已经对哈希进行了排序，因此如果您确实想继续将排序结果作为哈希处理，您可以简单地将数组再次转换为哈希：

```
h = {:a=>1, :c=>3, :b=>5, :d=>2}      # => {:a=>1, :c=>3, :b=>5, :d=>2}
h_sorted = Hash[h.sort_by{|k,v| v}]   # => {:a=>1, :d=>2, :c=>3, :b=>5} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T05:46:48.577

> 这些值在 hash.sort_by 之后立即打印出来，但未排序。我是否正确使用该方法？

不。当我不确定某事是如何工作的时，我打开 IRB 并尝试一些事情：

```
hash = {a:1, b:2, c:4, d: 3}
=> {:a=>1, :b=>2, :c=>4, :d=>3}
hash.sort
=> [[:a, 1], [:b, 2], [:c, 4], [:d, 3]]
hash
=> {:a=>1, :b=>2, :c=>4, :d=>3}
hash.sort_by{|k,v| v }
=> [[:a, 1], [:b, 2], [:d, 3], [:c, 4]]
hash
=> {:a=>1, :b=>2, :c=>4, :d=>3} 
```

[sort_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-sort_by)不会改变哈希值，它会返回一个结果。尝试：

~~哈希 = hash.sort_by{|k,v| v }~~ # <- 不要使用它，它是一个数组，你会误导任何阅读此代码的人。

```
sorted_tuples = hash.sort_by{|k,v| v } 
```

或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T07:34:37.767

试试这个

```
hash = {
  "fred" => 23,
  "joan" => 18,
  "pete" => 54
}

hash.values.sort    # => [18, 23, 54]
hash.sort_by { |name, age| age } # => [["joan", 18], ["fred", 23], ["pete", 54]]
hash.sort_by { |name, age| name } # => [["fred", 23], ["joan", 18], ["pete", 54]] 
```

# javascript - 当文件内容更改时，使用 node.js 将更新的内容发送给用户

> ID：12832914
> 
> 赞同：1
> 
> 时间：2012-10-11T05:40:27.180
> 
> 标签：javascript, node.js

如果文件内容发生更改，我正在尝试获取 node.js 脚本来显示文本文件的内容。

这是我到目前为止所得到的：

```
var http = require('http');
var fs = require("fs");

http.createServer(function (req, res) {

fs.watch("/Users/{username}/Desktop/data.txt",function(event,file) {

    fs.readFile('/Users/{username}/Desktop/data.txt', 'utf8', function (err,data) {
        if (err) {
            return console.log(err);
        }

        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end(data);
        //^ this doesn't work, just returns a blank page

    });
});

}).listen(1337, '0.0.0.0'); 
```

不幸的是，它只显示一个空白页。我究竟做错了什么...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:43:09.463

很可能任何更改文件的过程都是通过以写入模式打开文件然后重写它来实现的。发生这种情况时，您将在其他进程打开文件后立即收到通知，此时它将为空，因为尚未写入。

最好设置每次收到更改通知时触发的超时（即每次在超时未决时收到通知，清除超时并开始新的超时），并且仅在超时完成时读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:44:46.173

这个怎么样：

```
var http = require('http');
var fs = require("fs");

function dataHandler(data) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end(data);
}

http.createServer(function (req, res) {

fs.watch("/Users/{username}/Desktop/data.txt",function(event,file) {

    fs.readFile('/Users/{username}/Desktop/data.txt', 'utf8', function (err,data) {
        if (err) {
            return console.log(err);
        }

        dataHandler(data);

    });
});

}).listen(1337, '0.0.0.0'); 
```

# ios - 是否还有其他人在 iOS6 iPad3 上打开应用程序链接时遇到问题？

> ID：12832920
> 
> 赞同：3
> 
> 时间：2012-10-11T05:41:11.387
> 
> 标签：ios, ipad, ios6

在我的 iPad 3/iOS 6 上，ios 应用程序（应用程序商店）的链接对我不起作用。我最初认为是我的代码导致了问题，但后来我在 iPhone 和旧的 iPad 2 上尝试了它两者都有效。我进一步研究了它，似乎没有链接有效（我可以找到）。我已经用谷歌搜索了，但我还没有找到任何东西。还有其他人有这个问题吗？

示例：[链接](http://www.google.com/url?sa=t&rct=j&q=gmail%20app%20for%20app%20store&source=web&cd=2&cad=rja&ved=0CCoQFjAB&url=http%3A%2F%2Fitunes.apple.com%2Fus%2Fapp%2Fgmail%2Fid422689480%3Fmt%3D8&ei=8ll2UMShKMzPmAWOyoGQDA&usg=AFQjCNE_0fwN6m6iLhQYdqjVGxhmv8bS1w)- 此链接适用于我的电脑和手机，但不适用于运行 iOS6 的 iPad3 - 它只会打开显示主屏幕的应用商店应用。

有谁知道如何以特定应用为目标导航到应用商店？当我尝试时，应用商店只显示特色页面。

* * *

**更新**：感谢建议使用`https`代替的人`http`，它似乎适用于 iOS6 和 iOS5。

# windows-phone-7 - 从 Windows phone 7+ 到其他 WP7 可以发送/接收多少 MB 数据

> ID：12832923
> 
> 赞同：0
> 
> 时间：2012-10-11T05:41:29.030
> 
> 标签：windows-phone-7, windows-phone-7.1

我想知道我可以使用 TCP 或 UDP 在套接字级别从/通过 Windows phone 7/7.5 发送/接收到任何其他设备（手机或 pc）的数据大小（以 MB 为单位）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:17:29.750

据我所知，您可以使用套接字发送/接收的数据没有限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:24:48.430

我得到了答案，如果有兴趣的人可以在这里查看
[http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/dcf6e937-4e6a-4311-bfad-9f3b6abdd18d](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/dcf6e937-4e6a-4311-bfad-9f3b6abdd18d)

# php - 以特定格式显示日期 php

> ID：12832924
> 
> 赞同：1
> 
> 时间：2012-10-11T05:41:50.320
> 
> 标签：php, codeigniter

我有一个按 asc 顺序排序的日期数组。我想将日期显示为

```
Oct 10,12,24 2012
Dec 12,20,24 2012
Jan 02,10,25 2013 
```

我有日期作为月份，即 10 月、12 月、1 月 .. 以及日期和年份，但我希望它以上述格式显示。我已经尝试了下面的代码，但它没有给出预期的结果。有人可以帮我吗？$CruiseDetailsS​​ailing 是包含升序日期的数组。

```
 if (count($CruiseDetailsSailing) > 0) {
                            $date = array();
                            $month = array();
                            $Year = array();
                            for ($n = 0; $n < count($CruiseDetailsSailing); $n++) {
                                if ($CruiseDetailsSailing[$n] != "") {
                                    $date[] = date('Y-m-d', strtotime($CruiseDetailsSailing[$n]));
                                }
                            }
                        }
                        sort($date);
                        if (count($date) > 0) {
                            $temp = "";
                            $yeartemp = "";
                            for ($p = 0; $p < count($date); $p++) {
                                $month = date("M", strtotime($date[$p]));
                                $day = date("d", strtotime($date[$p]));
                                $year = date("Y", strtotime($date[$p]));
                                if ($month != $temp) {
                                    $temp = $month;
                                    ?>
                                    <li> <?php
                        echo $temp . " " . $day . ", ";
                    } else {
                        echo $day . ", ";
                    }
                    if (($p != 0) && ((date("M", strtotime($date[$p]))) == (date("M", strtotime($date[$p - 1])))) && ((date("Y", strtotime($date[$p]))) == (date("Y", strtotime($date[$p - 1]))))) {
                        echo $year;
                    }
                    if (($p != 0) && ((date("M", strtotime($date[$p]))) != (date("M", strtotime($date[$p - 1])))) && ((date("Y", strtotime($date[$p]))) != (date("Y", strtotime($date[$p - 1]))))) {
                        echo $year;
                    }
                } 
```

Oct 是月份，10,12,24 是月份，2012 是年份。我得到的日期为 2012 年 10 月 10 日、2012 年 10 月 12 日、2012 年 10 月 24 日。我只想将结果显示为 10 月一次，然后将日期和年份显示一次。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:10:53.117

这应该这样做：

```
sort($date); // sorted input array containing dates

$result_dates = Array();

// bring dates in correct format
foreach($date as $current_date) {
  $month = date("M", strtotime($current_date));
  $day = date("d", strtotime($current_date));
  $year = date("Y", strtotime($current_date));
  $result_dates[$year][$month][] = $day;
}

// output dates
foreach($result_dates as $year => $months) {
  foreach($months as $month => $days) {
    echo $month . " " . implode(",", $days) . " " . $year . "\n";
  }
} 
```

以下输入：

```
$date = Array('10/03/2012', '10/10/2012', '10/17/2012', '11/04/2012', '11/05/2012', '11/23/2012'); 
```

结果是：

```
Oct 03,10,17 2012
Nov 04,05,23 2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:20:55.937

你可以像这样简单地做到这一点

```
/* Array to pass the function   
$date_array =   array(
                '2012-10-10',
                '2012-12-10',
                '2012-24-10'
                );
*/

function getMyDateFormat($date_array){

    $days   =   array();
    $year   =   '';
    $month  =   '';

    sort($date_array);  

    if(count($date_array)>0){

        foreach($date_array as $row)
        {
            $days[] =   date('d',strtotime($row));
            $year   =   date('Y',strtotime($row));
            $month  =   date('M',strtotime($row));
        }

        $new_date   =   $month  .' '.   implode(',',$days)  .' '.   $year;
        return  $new_date;
    }
} 
```

# c# - 如何将字符串添加到 IEnumerable - C#

> ID：12832926
> 
> 赞同：-3
> 
> 时间：2012-10-11T05:42:04.823
> 
> 标签：c#, asp.net-mvc-3

我有以下课程：

```
class A
{
  public IEnumerable Song { get; set; }
} 
```

然后在索引中我有这样的代码：

```
public ActionResult 
{
    a.Song = (Path.Combine(Server.MapPath("~/Content/themes/base/songs"),
                           file)).ToList();
    return View();
} 
```

此代码不起作用如何将字符串路径添加到 IEnumerable Song？还是有更好的方法或其他方法来做到这一点，而不是使用 IEnumerable？

-- 我不明白 -ve 评级？这是一个合法的问题吗？如上所述，我试图在 a.Song 下收集 4 或 5 个 url 作为字符串。上面的代码返回字符，如 134 字符字符串数组。这不是我想要得到的。我希望这个解释有所帮助，但我仍然不明白 -ve 评级。评估 -ve 评级的人可以解释他们为什么这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:47:19.050

IEnumerable 是来自 StateMachine 的序列生成器。您不能通过这种方式为 IEnumerable 添加项目。但是由于大多数集合都是从它派生的，因此您可以为它分配一个集合。

```
var list = new List<string>();
list.Add(Path.Combine(Server.MapPath("~/Content/themes/base/songs"),
                           file));
a.Song = list; 
```

这将起作用。

这里创建了一个 List 并将路径添加到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:48:10.207

我想你想拥有：

```
class A
{
     List<string> songs=new List<string>();
     public IEnumerable<string> Songs { get{ return songs;}}
     public void Add(string song)
     {
         songs.Add(song);
     }
} 
```

然后你使用：

```
var a = new A();

a.Add(...); 
```

这允许您公开只读集合，并以明确的方式添加歌曲。

# ios - AppStore 应用程序如何停止支持 ios4？

> ID：12832929
> 
> 赞同：0
> 
> 时间：2012-10-11T05:42:25.053
> 
> 标签：ios, ios5, app-store, appstore-approval

我在 App Store 上有一个支持 IOS4+ 设备的应用程序。但是，我真的很想在 ios5 中使用一些新的 API 功能，并决定将我的基础 SDK 升级到 IOS5。

我的问题是，iTunesConnect 需要什么设置？Apple 允许我这样做吗？那些在 IOS4 上运行我的应用程序的客户端会发生什么？他们会停止从应用商店接收更新通知吗？

如果 Apple 禁止更改，对我来说最好的选择是什么？我不想制作另一个具有相同界面/功能但仅支持 iOS5+ 设备的应用程序..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:51:11.263

您需要做的就是通过将部署目标设置为新的最低版本来更新您的项目。在这种情况下，请将部署目标设置为 iOS 5.0 或 5.1。构建和测试。当您的应用程序获得批准后，它只能在您选择的 iOS 版本或更高版本的设备上使用。

仍在使用 iOS 4 的现有用户仍然可以使用他们现有的应用程序。但他们无法安装任何进一步的更新。

# java - Java 应用程序在 Eclipse 中运行，但 Jar 无法找到串行端口

> ID：12832931
> 
> 赞同：1
> 
> 时间：2012-10-11T05:42:43.840
> 
> 标签：java, eclipse, rxtx

我有一个在 Eclipse 中运行的应用程序。它使用 RxTx 代码访问串行端口。应用程序使用 CommPortIdentifier 设置它添加到 JComboBox 的端口列表。这一切在 Eclipse 中运行良好。

```
 public void initArguments() {
    String[] args = new String[3];
    args[0] = "prot2prom.csv";
    args[1] = "COM4";
    args[2] = "Bank0";
    Scanner scan = null;
    Enumeration         portList;
    CommPortIdentifier  portId;
    String              portName;
    String              target;

        // Select The Serial Port
    target = args[1];
    portList = CommPortIdentifier.getPortIdentifiers();
    while (portList.hasMoreElements()) {
        portId = (CommPortIdentifier) portList.nextElement();
        portName = portId.getName();
        portStrings.addItem(portName);
        if( portName.equals(target) ){
            portStrings.setSelectedIndex( portStrings.getItemCount() - 1 );
        }
    }
} 
```

当我从 Jar 文件运行该应用程序时，它运行没有错误，但是当它使用串行端口并且 JComboBox 为空时停止（除了我的 None Selected ）。你如何调试一个 Jar？RxTx 库是否不包括在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:25:13.573

如果您使用`java -jar <myjarfile.jar>`命令行控制台中的命令执行 JAR 文件，您将看到控制台输出，如 Eclipse 中所示。

如果在加载 RXTX 时出现任何问题，您应该会看到错误消息，指出丢失或缺陷的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:30:31.947

问题已解决 - 我认为当 Eclipse 在将 rxtxSerial.dll 放入 JDK 的 bin 目录后工作时我已经完成了。直到我将相同的文件放在 JRE 的 bin 目录中，Jar 才起作用。

# lucene - LUCENE 标准分析器连字符注意事项

> ID：12832934
> 
> 赞同：0
> 
> 时间：2012-10-11T05:42:51.963
> 
> 标签：lucene

在使用 lucene 标准分析器索引我的文档时，我遇到了一个问题。

例如：我的文档有一个词“plag-iarism”......这里这个分析器将它索引为“plag”和“iarism”。但我想像“抄袭”。我必须做什么才能得到一个完整的词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:10:00.087

StandardAnalyzer 将tokanization 委托给 StandardTokenizer。您可以创建自己的 tokanizer 来满足您的确切需求（您可以基于 StandardTokenizer）。

或者，如果您愿意，您可以使用相关的正则表达式对 String.replace() 进行肮脏的修改，只运行分析器。是的。丑陋的。

# vb.net - 嗨，我在 vb 2008 中有一个阻塞错误。在我的项目中，我使用了 excel 2010

> ID：12832937
> 
> 赞同：0
> 
> 时间：2012-10-11T05:42:53.773
> 
> 标签：vb.net, winforms

我在 vb 2008（Windows 窗体应用程序）中有一个阻塞错误。

在我的项目中，我使用了 excel 2010。我`'Microsoft.Office.Interop.Excel'`在程序中添加了语句。我收到一个错误，它不是命名空间成员。

我了解到我需要添加库组件的引用，因此我下载并安装了 excel 2010 的主要互操作程序集服务。即使现在添加我的引用，组件也没有任何变化。

还是同样的错误。

请帮忙。很紧急

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:43:36.277

你安装Office了吗？否则，您将无法使用 Interop。

如果您已安装 Office，则应添加参考：转到我的项目 -> 参考 -> 添加 -> com -> microsoft.excel.12(14).library。然后它应该工作。14 表示，根据您的版本，确切的数字会有所不同。

如果你没有安装 excel，你可以试试 EPPLUS：[http](http://epplus.codeplex.com/) ://epplus.codeplex.com/ 这是一个很好的读/写 xlsx 文件的库，比 interop 更快更容易理解。

# c - 简单变量测试

> ID：12832945
> 
> 赞同：0
> 
> 时间：2012-10-11T05:43:38.313
> 
> 标签：c, bash

使用 Bash，您可以像这样进行简单的变量测试

```
$ [ $foo ]; echo $?
1

$ foo=bar

$ [ $foo ]; echo $?
0 
```

> 当且仅当参数不为空时，表达式才为真。

用 C 进行类似的测试是什么？

# 编辑

让我们说一个`int`类型来论证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:47:11.900

通常，C 中存在隐式布尔转换。因此以下所有内容都会打印“bad”：

```
int a = 0;
if (a) {                  // if a is nonzero.
    printf("good");
}
else {
    printf("bad");
}

char* str = NULL;
if (str) {                  // if str is nonzero. (NULL is zero).
    printf("good");
}
else {
    printf("bad");
} 
```

# java - Java：如何替换字符串中的最后一个字符

> ID：12832947
> 
> 赞同：2
> 
> 时间：2012-10-11T05:43:54.740
> 
> 标签：java

我正在尝试替换 String 中的最后一个字符。

```
String bowlNumber = 1.1;

bowlNumber.replace(bowlNumber.charAt(bowlNumber.length-1), 2); 
```

这样我就可以替换我的最后一个字符，即 1 到 2.. 但问题是因为我的第一个字符也是 1 ，它也将其更改为 2。

我想要的是将 1.1 更改为 1.2 ，但它会使 1.1 更改为 2.2

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T05:45:53.730

```
bowlNumber = bowlnNumber.substring(0,bowlNumber.length()-1) + "2"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T05:48:40.673

```
String bowlNumber="1.1";
String replaceEnd = bowlNumber.replaceAll(".$", "2");
System.out.println(replaceEnd); 
```

输出为：1.2

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T05:56:51.027

试试下面的代码：

```
 String bowlNumber = "1.1";
    bowlNumber=bowlNumber.substring(0, bowlNumber.length()-1)+"2";
    System.out.println(bowlNumber); 
```

**输出**

1.2

# java - 如何从表中删除树节点及其子记录（没有级联删除）？

> ID：12832950
> 
> 赞同：3
> 
> 时间：2012-10-11T05:44:15.167
> 
> 标签：java, sql, postgresql, tree, sql-delete

我在 postgreSQL v9.1 中有这张表：

```
CREATE TABLE ad_treenodemm
(
  ad_tree_id numeric(10,0) NOT NULL,
  node_id numeric(10,0) NOT NULL,
  ad_client_id numeric(10,0) NOT NULL,
  ad_org_id numeric(10,0) NOT NULL,
  name character varying(60) NOT NULL,
  isactive character(1) NOT NULL DEFAULT 'Y'::bpchar,
  created timestamp without time zone NOT NULL DEFAULT now(),
  createdby numeric(10,0) NOT NULL,
  updated timestamp without time zone NOT NULL DEFAULT now(),
  updatedby numeric(10,0) NOT NULL,
  parent_id numeric(10,0),
  seqno numeric(10,0),
  CONSTRAINT ad_treenodemm_pkey PRIMARY KEY (ad_tree_id , node_id ),
  CONSTRAINT adtree_adtreenodemm FOREIGN KEY (ad_tree_id)
      REFERENCES adempiere.ad_tree (ad_tree_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED,
  CONSTRAINT ad_treenodemm_isactive_check CHECK (isactive = ANY (ARRAY['Y'::bpchar, 'N'::bpchar]))
) 
```

重要列说明：
* ad_tree_id = 树组 id（连接到 ad_tree 表）
* node_id = 节点 id
* parent_id = 父节点 id（如果 0 => 表示节点在顶部）

其余列可以忽略。

例如，我有这样的 ad_treenodemm 表数据表示：

```
# Group1 (all node belows are assigned with ad_tree_id=1001)
    -Accounting (node_id=101, parent_id=0)
        -Costing (node_id=202, parent_id=101)
            -Cost Type (node_id=103, parent_id=202)
            -Cost Element (node_id=24, parent_id=202)
        -Client Accounting Processor (node_id=105, parent_id=101)
        -Reset Accounting (node_id=6, parent_id=101)
            ...

    -Finance (node_id=4110, parent_id=0)
        ...

# Group2 (all node belows are assigned with ad_tree_id=1002)
    ... 
```

假设我想删除Group1 中的**Accounting**节点及其子节点。这意味着，它还会删除节点：成本核算、成本类型、成本要素、重置会计等。怎么做？

该解决方案可以使用带有 JDBC 的 SQL 或 Java 语言（但如果可能，最好使用 SQL）。

**更新：** 我找到了一个使用 WITH RECURSIVE (CTE) sql 的解决方案，但是它不太优雅：

```
WITH RECURSIVE temp(ad_tree_id, node_id, parent_id) AS (
    SELECT a.ad_tree_id, a.node_id, a.parent_id
    FROM ad_treenodemm a 
    WHERE ad_tree_id=1001 AND node_id=101      -- look at this

    UNION ALL

    SELECT b.ad_tree_id, b.node_id, b.parent_id
    FROM ad_treenodemm b
    INNER JOIN temp c on c.node_id = b.parent_id
    WHERE b.ad_tree_id=c.ad_tree_id
)
DELETE FROM ad_treenodemm a
WHERE (a.ad_tree_id, a.node_id) IN (
    SELECT ad_tree_id, node_id FROM temp
); 
```

您会看到我将参数（WHERE ad_tree_id=1001 AND node_id=101）放在 WITH 子句中。有人知道如何通过将参数语句放在 WITH 子句之外来改进 SQL 吗？

对于想要在不删除记录的情况下试验查询的任何人，请使用以下命令：

```
WITH RECURSIVE temp(ad_tree_id, node_id, parent_id) AS (
    SELECT a.ad_tree_id, a.node_id, a.parent_id
    FROM ad_treenodemm a 
    WHERE ad_tree_id=1001 AND node_id=101

    UNION ALL

    SELECT b.ad_tree_id, b.node_id, b.parent_id
    FROM ad_treenodemm b
    INNER JOIN temp c on c.node_id = b.parent_id
    WHERE b.ad_tree_id=c.ad_tree_id
)
SELECT * FROM ad_treenodemm a
WHERE (a.ad_tree_id, a.node_id) IN (
    SELECT ad_tree_id, node_id FROM temp
)
ORDER BY a.parent_id, a.node_id 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:19:51.087

由于您不想“更改表结构”，因此无论如何您都需要[**递归查询（或递归执行工作的函数）。**](http://www.postgresql.org/docs/current/interactive/queries-with.html)因为添加 FK 约束将符合“更改表结构”的条件。

如果没有这些限制，最优雅的解决方案是修复`NULL`您提到的值并向列添加[NOT NULL 约束](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#AEN2444)。*然后*添加[FK 约束](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#DDL-CONSTRAINTS-FK)，`ON DELETE CASCADE`如评论中所述，首先由@lc。

### 递归查询

`DELETE`可写 CTE 可能如下所示：

```
WITH RECURSIVE x AS (
   SELECT ad_tree_id, node_id
   FROM   ad_treenodemm
   WHERE (ad_tree_id, node_id) = (1,5)   -- enter dead node walking here

   UNION  ALL
   SELECT a.ad_tree_id, a.node_id
   FROM   x
   JOIN   ad_treenodemm a ON a.parent_id = x.node_id
   )
DELETE FROM ad_treenodemm a
USING  x
WHERE (a.ad_tree_id, a.node_id) = (x.ad_tree_id, x.node_id) 
```

要一步完成，您需要 PostgreSQL 9.1 或更高版本来进行[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)。否则，您必须单独运行`SELECT`以收集行，然后`DELETE`.

[-> 现场演示@sqlfiddle](http://www.sqlfiddle.com/#!12/ce900/1)

# android - 加强 Android 检查

> ID：12832957
> 
> 赞同：4
> 
> 时间：2012-10-11T05:45:00.133
> 
> 标签：android, fortify

我很好奇 Fortify 规则集在 Android 应用程序中寻找哪些漏洞。不幸的是，我找不到任何相关文档。我知道他们会四处寻找 Java 特定的漏洞以及组件的权限检查——还有什么？SQL注入检查？意图检查？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T18:16:05.133

除了所有常规 Java 规则外，还有针对以下类别的 Android 特定规则：

**代码质量：**
Android 不良做法 - 使用已发布的相机
Android 不良做法 - 使用已发布的 SQLite 资源
Android 不良做法 - 使用已发布的媒体资源
未发布的资源 - Android 媒体

**封装：**
不安全的存储——Android外部存储
系统信息泄露

**输入验证和表示：**
命令注入
交叉：站点脚本 - 持久
交叉：站点脚本 - 不良验证
交叉：站点脚本 - 反射
标头操作 - Cookie
日志伪造
路径操作
查询字符串注入 - Android 提供程序
资源注入
SQL 注入

**安全功能：**
访问控制 - Android 提供商
访问控制 - 数据库
Android 不良做法 - 缺少广播者权限
Android 不良做法 - 缺少接收者权限
Android 不良做法 - 粘性广播
密码管理
密码管理 - 空密码
密码管理 - 硬编码密码
密码管理 - 空密码
密码管理 - 弱加密
隐私违规
权限管理 - Android 位置
权限管理 - Android 消息传递
权限管理 - Android 电话
权限管理 - 缺少 API 权限
权限管理 - 缺少内容提供者权限
权限管理 - 缺少意图权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T19:50:34.660

这是 Fortify 必须提供的官方列表：

*   [http://www.hpenterprisesecurity.com/vulncat/en/vulncat/index.html](http://www.hpenterprisesecurity.com/vulncat/en/vulncat/index.html)

有很多要列出。

# java - 使用 JavaBean 数据源时在报告中获取空值

> ID：12832965
> 
> 赞同：1
> 
> 时间：2012-10-11T05:45:17.660
> 
> 标签：java, jasper-reports

当我尝试使用*JavaBean 数据源*生成报告并在表中显示 bean 的字段值时，*PDF*报告显示空值。

我有一个简单的 bean（*PersonBean*），如下所示：

```
public class PersonBean {

    private String Field1;
    private String Field2;

    public String getField1() {
        return Field1;
    }

    public void setField1(String field1) {
        Field1 = field1;
    }

    public String getField2() {
        return Field2;
    }

    public void setField2(String field2) {
        Field2 = field2;
    }
} 
```

填充并返回 bean 集合的*Person*类如下：

```
import java.util.ArrayList;
import java.util.List;

public class Person {

    public static java.util.List<PersonBean> getReportData() throws Exception {
        List<PersonBean> personBeanList = null;
        try {
            personBeanList = new ArrayList<PersonBean>();

            PersonBean personBean1 = new PersonBean();
            personBean1.setField1("Hina");
            personBean1.setField2("Sachdev");
            personBeanList.add(personBean1);

            PersonBean personBean2 = new PersonBean();
            personBean2.setField1("Swathi");
            personBean2.setField2("Singh");
            personBeanList.add(personBean2);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return personBeanList;
    }
} 
```

创建报表的*PersonReport*类如下：

```
import java.io.FileNotFoundException;
import java.util.*;

import net.sf.jasperreports.engine.*;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.xml.JRXmlLoader;
import net.sf.jasperreports.view.JasperViewer;

public class PersonReport implements JRDataSource {

    public static void main(String[] args) throws JRException, FileNotFoundException {
        try {
            Map<String, Object> params = new HashMap<String, Object>();
            JasperDesign jasperDesign = JRXmlLoader.load("C:/Users/sachdevh/Desktop/reports/personReport.jrxml");
            JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
            JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, 
                    new JRBeanCollectionDataSource(Person.getReportData()));
            JasperExportManager.exportReportToPdfFile(jasperPrint, "./Util/bean.pdf");
            JasperViewer.viewReport(jasperPrint);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public Object getFieldValue(JRField arg0) throws JRException {
        return null;
    }

    @Override
    public boolean next() throws JRException {
        return false;
    }
} 
```

通过使用*iReport 4.6.0*，我通过插入表格组件设计了一个报表。

*jrxml*文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ..>
    <subDataset name="New Dataset 1" uuid="50bff6d9-9b98-444b-9851-bdd37ea570e4">
        <queryString><![CDATA[]]></queryString>
        <field name="field1" class="java.lang.String">
            <fieldDescription><![CDATA[field1]]></fieldDescription>
        </field>
        <field name="field2" class="java.lang.String">
            <fieldDescription><![CDATA[field2]]></fieldDescription>
        </field>
    </subDataset>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["C:\\Users\\sachdevh\\Desktop\\reports\\"]]></defaultValueExpression>
    </parameter>
    <parameter name="parameter1" class="java.lang.String">
        <defaultValueExpression><![CDATA[$F{field1}]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[]]>
    </queryString>
    <field name="field1" class="java.lang.String">
        <fieldDescription><![CDATA[field1]]></fieldDescription>
    </field>
    <field name="field2" class="java.lang.String">
        <fieldDescription><![CDATA[field2]]></fieldDescription>
    </field>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch">
            <componentElement>
                <reportElement uuid="b3e3e08d-91d9-4e01-ae74-abdfc270551a" key="table" x="0" y="0" width="555"
                               height="61"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components"
                          xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="New Dataset 1" uuid="f5f39e4f-4349-4e5d-9736-03f84a7a7617">
                        <dataSourceExpression>
                            <![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource(Person.getReportData())]]></dataSourceExpression>
                    </datasetRun>
                    <jr:column uuid="9e2a6076-7f96-40c8-86ae-318b521a4f81" width="90">
                        <jr:tableHeader height="30"/>
                        <jr:tableFooter height="30"/>
                        <jr:columnHeader height="30">
                            <staticText>
                                <reportElement uuid="99411482-c1d5-44fa-aef7-9d9f4bf392ec" x="0" y="0" width="90"
                                               height="30"/>
                                <textElement/>
                                <text><![CDATA[field1]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter height="30"/>
                        <jr:detailCell height="20">
                            <textField>
                                <reportElement uuid="74861d9e-48a8-47ce-a477-81d4f497d483" x="0" y="0" width="90"
                                               height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{field1}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="84c3b078-0114-452e-b3a3-f1c7dcd1b8cb" width="90">
                        <jr:tableHeader height="30"/>
                        <jr:tableFooter height="30"/>
                        <jr:columnHeader height="30">
                            <staticText>
                                <reportElement uuid="cb87f1a0-bbbf-40b2-bb19-292ecf8d9a18" x="0" y="0" width="90"
                                               height="30"/>
                                <textElement/>
                                <text><![CDATA[field2]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter height="30"/>
                        <jr:detailCell height="20">
                            <textField>
                                <reportElement uuid="84fd788f-24e8-4dfa-8c83-ce388c663f45" x="0" y="0" width="90"
                                               height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{field2}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </columnHeader>
    <detail>
        <band height="125" splitType="Stretch"/>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

我认为下面的数据源表达式

```
<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource(Person.getReportData())]]></dataSourceExpression> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:24:28.220

您可以分两步解决此问题：

1.  将*表格*组件移动到*标题*带（现在它位于*列标题*带） - 以防止`net.sf.jasperreports.engine.JRRuntimeException: Infinite loop creating new page due to column header overflow`在数据源有很多元素的情况下发生异常；
2.  *将表的 subDataset* ***dataSourceExpression***更改为下面的值，这与您的*Java*代码相关：

```
<datasetRun subDataset="New Dataset 1" uuid="f5f39e4f-4349-4e5d-9736-03f84a7a7617">
    <dataSourceExpression><![CDATA[$P{REPORT_DATA_SOURCE}]]></dataSourceExpression>
</datasetRun> 
```

# .net - Creation Restful Web Service Using GET and POST method and returning with the XML

> ID：12832980
> 
> 赞同：0
> 
> 时间：2012-10-11T05:46:36.270
> 
> 标签：.net, rest

how to create a **restful webservice** using Get and Post method and returning with XML please could help me as I am beginner of .NET

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:53:21.800

As you creating REST service - new and from scratch, then definitly one suggestion and most recent REST technology in Microsoft stack - ASP.NET Web API.

On [ASP.NET Web API official website](http://asp.net/web-api/) you can find many tutorials.

Start from the first one - [Your First ASP.NET Web API (C#)](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

# java - 使用Ksoap2从android中的webservice获取Respose Header

> ID：12832984
> 
> 赞同：3
> 
> 时间：2012-10-11T05:47:04.083
> 
> 标签：java, android, android-ksoap2

我的网络服务在 .net 中，我已经成功地在 android 中使用 KSOAP2 从 Soap Response 获取数据。我想从标头中获取响应标头和一些详细信息，任何人都可以帮助如何使用 KSOAP2 获取响应标头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:55:32.890

```
>   The HttpTransportSE class exposes the method call that, beyond the
> required SOAP    parameters, also accepts a List of HeaderProperty
> instances. It also returns a like List. This provides the ability to
> append additional headers to the request and review the returned
> headers. Since a cookie is just one of those header, one can use this
> facility to send and receive cookies.

The response headers are returned by the "call" method. So you just need to keep track of your JSESSIONID and pass it back again for each call. I overlooked this small detail at first as well. ;)

Keep in mind that the server returns the JSESSIONID with a "set-cookie" header, but it needs to be sent with a "cookie" header.

List respHeaders = android_http.call(SOAP_ACTION, envelope2, reqHeaders); 
for(int ix=0; ix<respHeaders.size(); ix++) { 
        HeaderProperty hp = (HeaderProperty)respHeaders.get(ix); 
        System.out.println("Header"+ix+"="+hp.getKey()+" / "+hp.getValue()); 
} 
```

# sql - SQL Server 查询响应时间变化很大，只需要很少的代码更改

> ID：12832988
> 
> 赞同：1
> 
> 时间：2012-10-11T05:47:14.673
> 
> 标签：sql, sql-server, performance

我有一个查询，只要稍微修改一下，它的运行时间就会从大约 37 秒减少到 4 秒。连接或返回的列没有变化。

**慢查询（37 秒）：**

```
declare @PeriodFrom DateTime
declare @PeriodTo DateTime
Set @PeriodFrom = '2012-06-01'
Set @PeriodTo = '2012-06-30'

Select
  0 as PrimaryAccount,
  0 as PrintOrder,
  Cast(Null as integer) as ID,
  Sum(IsNull(MT.Amount, 0)) as Amount,
  Cast(0 as Money) as NetAmount,
  Cast(0 As Money) as TaxAmount,
  Cast(0 as Money) as AmountOutstanding,
  Cast(0 as Money) as AmountPaid,
  'Balance brought forward' as Description
From
  db_site4.dbo.AccountReceivable P
Join
  db_site4.dbo.ARType ART on ART.ARTypeID = P.ARTypeID and ART.ARTypeID = 24
left Join
  db_site4.dbo.vw_MemberTransactions MT
on
  P.AccountReceivableID = MT.AccountReceivableID
where 
  (MT.AccountingDate <= @PeriodFrom or MT.AccountingDate is null)
and
  (Authorised = 1 or Authorised is Null)
and
  IsHidden = 0
and
  P.MemberID = 123 
```

**以上的 SQL I/O 统计信息：**

```
Table 'Payment'. Scan count 16, logical reads 23558, physical reads 19, read-ahead reads 5448.
Table 'InvoiceItemPayment'. Scan count 4, logical reads 22237, physical reads 51, read-ahead reads 13432.
Table 'UnallocatedPayment'. Scan count 12, logical reads 431, physical reads 1, read-ahead reads 80.
Table 'AccountReceivable'. Scan count 1, logical reads 2, physical reads 0, read-ahead reads 0.
Table 'ARType'. Scan count 1, logical reads 2, physical reads 0, read-ahead reads 0.
Table 'Invoice'. Scan count 11116, logical reads 116984, physical reads 190, read-ahead reads 30910.
Table 'InvoiceItem'. Scan count 5122, logical reads 99786, physical reads 316, read-ahead reads 46236. 
```

**现在对于在 4 秒内返回的查询：**

```
declare @PeriodFrom DateTime
declare @PeriodTo DateTime
Set @PeriodFrom = '2012-06-01'
Set @PeriodTo = '2012-06-30'

Select
  0 as PrimaryAccount,
  0 as PrintOrder,
  Cast(Null as integer) as ID,
  Sum(IsNull(MT.Amount, 0)) as Amount,
  Cast(0 as Money) as NetAmount,
  Cast(0 As Money) as TaxAmount,
  Cast(0 as Money) as AmountOutstanding,
  Cast(0 as Money) as AmountPaid,
  'Balance brought forward' as Description
From
  db_site4.dbo.AccountReceivable P
Join
  db_site4.dbo.ARType ART on ART.ARTypeID = P.ARTypeID and ART.ARTypeID = 24
left Join
  db_site4.dbo.vw_MemberTransactions MT
on
  P.AccountReceivableID = MT.AccountReceivableID
where 
  (MT.AccountingDate <= @PeriodFrom or MT.AccountingDate is null)
and
  (Authorised = 1 or Authorised is Null)
and
  (IsHidden = 0 or IsHidden is null)
and
  P.MemberID = 123 
```

**上面的 SQL I/O 统计信息：**

```
Table 'Payment'. Scan count 6271, logical reads 19857, physical reads 0, read-ahead reads 0.
Table 'UnallocatedPayment'. Scan count 2, logical reads 4, physical reads 0, read-ahead reads 0.
Table 'InvoiceItemPayment'. Scan count 4399, logical reads 33400, physical reads 0, read-ahead reads 0.
Table 'InvoiceItem'. Scan count 10581, logical reads 60682, physical reads 4, read-ahead reads 0.
Table 'Invoice'. Scan count 3, logical reads 22102, physical reads 3, read-ahead reads 0.
Table 'AccountReceivable'. Scan count 1, logical reads 2, physical reads 0, read-ahead reads 0.
Table 'ARType'. Scan count 1, logical reads 2, physical reads 0, read-ahead reads 0. 
```

**我的问题是：**当唯一的更改是替换为时，两者之间的执行时间怎么会有这样的`IsHidden = 0`差异`(IsHidden = 0 or IsHidden IS NULL)`？（从底部开始 3 行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:27:00.050

取决于您在 IsHidden 和索引中拥有的数据。

如果您有很多空值和良好的索引，则可能是执行计划首先将它们放在“IsHidden = 0”之前，因此它比仅扫描“IsHidden = 0”更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:01:58.507

当您添加附加子句以包含 ISNULL 时，您可能会从 AccountRecievable 返回更多的行。然后，您将加入视图中的更多行。这意味着必须从视图的基表中读取更多行，从而增加查询时间。

这里的逻辑来自查看您提供的 IO 统计信息。对于您提供的查询“不可见”的表，还有其他读取。考虑查看视图基表上的索引策略。

# ios - 如何根据 HTML 内容动态更改 UIWebView 的高度？

> ID：12832995
> 
> 赞同：3
> 
> 时间：2012-10-11T05:47:47.973
> 
> 标签：ios, uiwebview, uiwebviewdelegate

我有一个带有几个按钮的简单笔尖`UIWebView`，我想在上面显示一些 HTML。我想`UIWebView` 根据 HTML 内容更改高度。但我不能。

我的笔尖看起来像这样： [我的笔尖](http://dl.dropbox.com/u/25549054/my_nib.png)

我的`mainViewController.h`：

```
#import <UIKit/UIKit.h>

@interface ibecViewController : UIViewController <UIWebViewDelegate>
@property (weak, nonatomic) IBOutlet UIWebView *webV;

@end 
```

我用过`sizeToFit`，但它不起作用。我的`mainViewController.m`：

```
#import "ibecViewController.h"

@interface ibecViewController ()

@end

@implementation ibecViewController
@synthesize webV;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *myHTML = @"<html><body><h1>Hello, world!</h1><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p><p>Hello, world</p></body></html>";
    [webV loadHTMLString:myHTML baseURL:nil];

    [webV sizeToFit];
}

- (void)viewDidUnload
{
    [self setWebV:nil];
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)webViewDidStartLoad:(UIWebView *)webView
{
    NSLog(@"123");
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSLog(@"456");
}

@end 
```

我的第二个问题：为什么方法`webViewDidStartLoad`和`webViewDidFinishLoad`工作不起作用？尽管我已经写过我的控制器符合`UIWebViewDelegate`. 我是iOS新手。WebView 的高度不会改变。我的应用程序看起来像这样： [我的应用程序](http://dl.dropbox.com/u/25549054/iphone.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:24:50.193

我找到了解决方案。在我`ibecViewController.m`写的方法中

```
- (void)viewWillAppear:(BOOL)animated
{
    [[self webV] setDelegate:self];
} 
```

它作为代表工作。我的方法`webViewDidStartLoad`也`webViewDidFinishLoad`开始起作用了。然后我实施

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [webV sizeToFit];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:55:47.807

回答第一个问题：

尝试使用`[webV setScalesPageToFit:YES];`function 而不是`sizeToFit`. Html 内容将自动调整为 webview 大小。我猜这个功能只存在于更高版本的ios中。

对第二个问题的回答：您必须将 webview 对象委托给 self 对象，该对象表示`ibecviewcontroller`在其中定义了 webview 的视图控制器 ( )。委托完成后，您可能可以使用委托功能。如果您通过 Xib 执行此操作，那么您应该将 webview 对象（在这种情况下）`webV`与 IB 中的 Files Owner 对象或图标连接起来。

希望有帮助..

# mysql - MySQL中下一个最接近的日期和时间

> ID：12832999
> 
> 赞同：0
> 
> 时间：2012-10-11T05:48:13.133
> 
> 标签：mysql

在我的`Auctions`桌子里面，我有一列叫做`Auction_StartDate`. 一行的值是这样的：`2012-10-27 13:45:30`.

我需要一个查询，该查询将在此之后**返回下一个最接近的日期和时间**。因此，如果下一个 Auction_StartDate 是`2012-10-27 18:30:00`，它应该在日期变为 之前返回`2012-10-28`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:51:17.157

您可以在不使用子句`MIN`的情况下使用查找最接近的值。`LIMIT and ORDER BY`

```
SELECT  MIN(DATE(Auction_StartDate)) closestDate
FROM    Auctions
WHERE   DATE(Auction_StartDate) > '2012-10-27' 
```

# [SQLfiddle 演示](http://sqlfiddle.com/#!2/b8435/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T05:52:23.740

如果您打算对每一行都执行此操作，请尝试以下操作：

```
SELECT a1.id,
    (SELECT MIN(a2.Auction_StartDate) 
     FROM Auctions a2 
     WHERE a2.Auction_StartDate > a1.Auction_StartDate) AS nextStartDate
FROM Auctions a1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:55:30.940

可能这个有帮助

```
 SELECT DATE(Auction_StartDate) closestDate
    FROM    Auctions
    WHERE   DATE(Auction_StartDate) > '2012-10-27'
    order by Auction_StartDate ASC
    limit 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T05:59:38.290

```
 SELECT (case when Hour(StartDate)>=12 then DATE_ADD(StartDate,
                  INTERVAL 1 DAY) else StartDate end) as 'date' FROM table  
    ------------------------------
    pleaes add your column name where is static date : 
    est on : http://sqlfiddle.com/#!2/b8435/19

    SELECT (case when Hour(StartDate )>=12 then 
       DATE_FORMAT( DATE_ADD(StartDate ,INTERVAL 1 DAY), '%Y-%m-%d')                
       else DATE_FORMAT(StartDate , '%Y-%m-%d') end) as 'date'  from tabel 
```