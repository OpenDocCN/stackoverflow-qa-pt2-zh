# StackOverflow 问答 15362000-15362999

# mysql - 使用mysql命令行客户端选择时如何查看数据中的空格

> ID：15362001
> 
> 赞同：8
> 
> 时间：2013-03-12T13:01:41.103
> 
> 标签：mysql, sql

将 select 与 sql-command-line-client 一起使用时，如何查看字符串中的空格？

我的意思是以下。你有三行。1、2 和 3 个空格。你没有机会看到空格的数量。

```
create table foo(bar varchar(8));
insert into foo values(" "),("  "), ("   ");

select * from foo\g
+------+
| bar  |
+------+
|      |
|      |
|      |
+------+

mysql> select * from foo\G
*************************** 1\. row ***************************
bar:  
*************************** 2\. row ***************************
bar:   
*************************** 3\. row ***************************
bar:    
3 rows in set (0.01 sec) 
```

我想出的唯一选择是：

```
mysql> select bar, hex(bar) from foo;
+------+----------+
| bar  | hex(bar) |
+------+----------+
|      | 20       |
|      | 2020     |
|      | 202020   |
+------+----------+
3 rows in set (0.01 sec) 
```

php中的var_export之类的东西会很好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T19:32:52.543

似乎有一个字符串函数`QUOTE`（转义参数以在 SQL 语句中使用）非常好用。

```
-- to add another tricky example
mysql> insert into foo values(" \" ' "), ("''");
Query OK, 1 row affected (0.06 sec)

mysql> select bar, quote(bar) from foo;
+-------+------------+
| bar   | quote(bar) |
+-------+------------+
|       | ' '        |
|       | '  '       |
|       | '   '      |
|  " '  | ' " \' '   |
| ''    | '\'\''     |
+-------+------------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:56:13.827

您可以在输出中用其他字符替换空格，例如：

```
mysql> SELECT REPLACE('   ', ' ', '|');

+--------------------------+
| REPLACE('   ', ' ', '|') |
+--------------------------+
| |||                      |
+--------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:11:01.937

如果这只是为了显示空间，那么您需要在存储之前对字符串进行编码。如果是关于比较，那么您会发现前导字符串（在非空格之前）被保留，而尾随则没有。在这里查看更多：[这里](https://stackoverflow.com/questions/7455147/comparing-strings-with-one-having-empty-spaces-before-while-the-other-does-not)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:48:54.847

如何使用 String`LENGTH()`获得类似的结果`php` `var_export()`

```
SELECT bar, LENGTH(bar) FROM foo; 
```

# ios - iOS：为什么我不能让 mapkit 显示自定义注释图钉图像？

> ID：15362002
> 
> 赞同：2
> 
> 时间：2013-03-12T13:01:41.727
> 
> 标签：ios, annotations, mkmapview, mapkit

认为使用我自己的自定义 pin 图像进行注释会非常容易。

但我一直无法让它工作，我不知道为什么！

我只是在使用：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    NSString *annotationIdentifier = @"CustomViewAnnotation";
    CustomAnnotationView * customAnnotationView = (CustomAnnotationView *) [self.mapview dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];
    if(!customAnnotationView)
    {
        customAnnotationView=[[CustomAnnotationView alloc] initWithAnnotationWithImage:annotation
                                                                       reuseIdentifier:annotationIdentifier 
                                                                   annotationViewImage:[UIImage imageNamed:@"map_location_pin.png"]];
    }

    customAnnotationView.image=[UIImage imageNamed:@"map_location_pin.png"];

    customAnnotationView.canShowCallout= YES;

    return customAnnotationView;
} 
```

我认为这应该可以工作，因为 UIImage 是它想要的，而且我的项目中确实有 .png 文件。

它从不使用我的图像，而只是使用标准的红色别针。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T15:30:46.467

几个想法：

1.  你`delegate`为你定义了你的`MKMapView`？您是否设置了断点或`NSLog`在此处以确保您`viewForAnnotation`被调用？

2.  你还没有分享你的`CustomAnnotationView`接口/实现细节，但你不需要子类化`MKAnnotationView`，除非你在那里做一些特别的事情。如果你只是替换图像，你可以这样做：

    ```
    - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
    {
        if([annotation isKindOfClass:[MKUserLocation class]]) {
            return nil;
        }

        NSString *annotationIdentifier = @"CustomViewAnnotation";
        MKAnnotationView* annotationView = [mapview dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];

        if (annotationView) {
            annotationView.annotation = annotation;
        } else {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:annotationIdentifier];
        }

        annotationView.image = [UIImage imageNamed:@"map_location_pin.png"];
        annotationView.canShowCallout= YES;

        return annotationView;
    } 
    ```

    但是，很明显，如果您正在做一些有趣的事情（例如拖放或拖放引脚时的自定义注释），那么请继续使用您的`CustomAnnotationView`subclass `MKAnnotationView`。这仅取决于您要做什么。

3.  与您的原始问题无关，我建议：

    *   您的`viewForAnnotation`方法只使用局部`mapView`变量而不是引用类属性`self.mapView`（尽管它们无疑是相同的），

    *   您考虑重命名自定义 init 方法。所以而不是：

        ```
        customAnnotationView = [[CustomAnnotationView alloc] initWithAnnotationWithImage:annotation
                                                                         reuseIdentifier:annotationIdentifier 
                                                                     annotationViewImage:[UIImage imageNamed:@"map_location_pin.png"]]; 
        ```

        你会做这样的事情：

        ```
        customAnnotationView = [[CustomAnnotationView alloc] initWithAnnotation:annotation
                                                                reuseIdentifier:annotationIdentifier 
                                                                          image:[UIImage imageNamed:@"map_location_pin.png"]]; 
        ```

如果您仍然遇到问题，请`CustomAnnotationView`与我们分享您的一些代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:13:31.450

我认为它对你的支持。你可以试试这个代码。你可以添加我的注释 .h 和 .m 文件并做一些更改我的注释

我的注释.h

```
 #import <Foundation/Foundation.h>
    #import <MapKit/MapKit.h>

    @interface MyAnnotation : NSObject<MKAnnotation> {

        CLLocationCoordinate2D  coordinate;
        NSString*               title;
        NSString*               subtitle;
        UIImage*                image;
    }

    @property (nonatomic, assign)   CLLocationCoordinate2D  coordinate;
    @property (nonatomic, copy)     NSString*               title;
    @property (nonatomic, copy)     NSString*               subtitle;
    @property (nonatomic, retain)       UIImage*                image;

    @end

my annotation.m

        #import "MyAnnotation.h"

    @implementation MyAnnotation

    @synthesize title;
    @synthesize subtitle;
    @synthesize coordinate;
    @synthesize image;
    - (void)dealloc 
    {
        [super dealloc];
        self.title = nil;
        self.subtitle = nil;
        self.image=nil;
    }
    @end

       - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation

    {

        //NSLog(@"welcome into the map view annotation");

        // if it's the user location, just return nil.

        if ([annotation isKindOfClass:[MKUserLocation class]])

            return nil;

        // try to dequeue an existing pin view first
        static NSString* AnnotationIdentifier = @"AnnotationIdentifier";

        MKPinAnnotationView* pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier]autorelease];

        //annotation.image = [UIImage imageNamed:@"shop-1.png"];

        //[pinView setImage:[UIImage imageNamed:@"shop-1.png"]];

        UIImageView *thumbnailImageView = [[UIImageView alloc] initWithImage:((MyAnnotation *)annotation).image];
        CGRect newBounds = CGRectMake(0.0, 0.0, 32.0, 32.0);
        [thumbnailImageView setBounds:newBounds];
        pinView.leftCalloutAccessoryView = thumbnailImageView;
        [thumbnailImageView release];

        //UIImageView *profileIconView = [[UIImageView alloc] initWithImage:featuredDealcouponImage1];
        // [pinView setImage:featuredDealcouponImage1];
        pinView.animatesDrop=NO;

        pinView.canShowCallout=YES;

        pinView.pinColor=MKPinAnnotationColorGreen;

        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

        [rightButton setTitle:annotation.title forState:UIControlStateNormal];

        [rightButton addTarget:self action:@selector(_annotation_btn_click:) forControlEvents:UIControlEventTouchUpInside];

        pinView.rightCalloutAccessoryView = rightButton;

        return pinView;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:11:09.363

确保你是子类化

```
NSObject <MKAnnotation> 
```

并不是

```
MKPinAnnotationView 
```

# android - 从电子邮件客户端返回后键盘未关闭

> ID：15362003
> 
> 赞同：5
> 
> 时间：2013-03-12T13:01:46.627
> 
> 标签：android, android-intent, android-softkeyboard

我有一个通过电子邮件共享杂货清单的 Android 应用程序。我有一个问题，当我通过电子邮件客户端（可能是 Exchange 客户端或 Gmail 客户端）发送列表后，键盘无法关闭。

我试过了：

```
InputMethodManager mgr = (InputMethodManager) getSystemService(
        Context.INPUT_METHOD_SERVICE);
mgr.hideSoftInputFromWindow(editTxt.getWindowToken(), 0); 
```

和许多其他方式。如果我检查键盘是否打开，它将返回，`false`因为调用键盘的不是应用程序，而是电子邮件客户端。

我找到了一种解决方法，包括：

```
android:windowSoftInputMode="stateAlwaysHidden" 
```

然后应用程序将强制关闭键盘，但每次我再次打开键盘时都会继续滞后。

三星手机只有在我使用 Gmail 客户端时才会出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:09:10.313

找到了解决方案。几毫秒后，焦点从应用程序（电子邮件客户端）外部变为 editText 视图。然后我可以关闭键盘。所以我的解决方案如下所示：

```
Timer timer = new Timer();
timer.schedule(new TimerTask() {

            @Override
            public void run() {
                closeKeyboard();
            }
        }, 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:04:00.840

`android:windowSoftInputMode="stateHidden"`在清单的活动标签中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:04:20.987

您是否将此代码放在**onResume()**方法中？

# php - 读取流的 HTTP 响应代码时出现问题（使用普通 url）

> ID：15362009
> 
> 赞同：2
> 
> 时间：2013-03-12T13:02:10.740
> 
> 标签：php, http-headers, httpresponse, audio-streaming, shoutcast

我尝试检测是否存在流（ogg 或 mp3 文件）。

我想使用 get_headers 但我注意到我的主机已禁用此功能。

我可以在 htaccess 中激活它，但由于某些原因它不能正常工作。

无论如何，我决定使用 cURL，如果我尝试检测 url 是否存在，它就会起作用：

```
$curl = curl_init();
        curl_setopt_array( $curl, array(
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_URL => 'http://stackoverflow.com' ) );
        curl_exec( $curl );
        $response_code = curl_getinfo( $curl, CURLINFO_HTTP_CODE );
        curl_close( $curl );
        echo 'http://stackoverflow.com : response code '.$response_code.'<br />';
        if ($response_code == 200)
        { 
            echo 'url exists';
        } else {
            echo "url doesn't exist";
        } 
```

它工作正常。我尝试使用错误的 url，响应代码为 0。

我不知道为什么它不适用于我的流，比如这个：

```
http://locus.creacast.com:9001/StBaume_grotte.ogg 
```

我考虑过服务器问题，但我尝试过使用网上找到的其他流（例如：[http](http://radio.rim952.fr:8000/stream.mp3) ://radio.rim952.fr:8000/stream.mp3 ），但我仍然无法获得响应代码。

```
$curl_2 = curl_init();
        curl_setopt_array( $curl_2, array(
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_URL => 'http://locus.creacast.com:9001/StBaume_grotte.ogg' ) );
        curl_exec( $curl_2 );
        $response_code_2 = curl_getinfo( $curl_2, CURLINFO_HTTP_CODE );
        curl_close( $curl_2 );
        echo '<br /><br />http://locus.creacast.com:9001/StBaume_grotte.ogg : '.$response_code_2.'<br />';
        if ($response_code_2 == 200)
        { 
            echo 'url existe';
        } else {
            echo "url n'existe pas";
        } 
```

所以我想这不是服务器问题，而是与 url / 文件的类型有关。

你知道我可以检查什么吗？即使文件存在，我的响应代码也始终为 0，并且获取响应代码的速度非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:12:10.183

您可以尝试使用以下代码来获取响应标头。您可以增加较慢 URL 的超时时间，但请记住，它也会影响您自己的页面加载。

```
$options['http'] = array(
  'method' => "HEAD", 
  'follow_location' => 0,
  'ignore_errors' => 1,
  'timeout' => 0.2
);

$context = stream_context_create($options);

$body = file_get_contents($url, NULL, $context);
if (!empty($http_response_header))
{
  //var_dump($http_response_header); 
  //to see what tou get back for usefull help

  if (substr_count($http_response_header[0], ' 404')>0)
    echo 'not found'
} 
```

更新：

我注意到问题出在身体上。看起来即使有 HEAD 请求，它也会尝试下载所有内容。因此，我将请求更改为简单的`fopen`并且可以正常工作。

```
<?php
$url = 'http://radio.rim952.fr:8000/stream.mp3';

// Try and open the remote stream
if (!$stream = @fopen($url, 'r')) {
  // If opening failed, inform the client we have no content

  if (!empty($http_response_header))
  {
    var_dump($http_response_header); 
  }

  exit('Unable to open remote stream');
}

echo 'file exists';
?> 
```

我使用 rim952 url 进行了测试，因为另一个甚至不再在 Firefox 中加载。我通过将请求更改为 stream.mp3xx 以生成几乎立即出现的 404 来进行测试。

# python - 如何在 Tkinter 中用一个“绑定”绑定多个小部件？

> ID：15362011
> 
> 赞同：7
> 
> 时间：2013-03-12T13:02:15.043
> 
> 标签：python, widget, tkinter, bind

我想知道如何用一个“绑定”绑定多个小部件。

例如：

我有三个按钮，我想在悬停后更改它们的颜色。

```
from Tkinter import *

def SetColor(event):
    event.widget.config(bg="red")
    return

def ReturnColor(event):
    event.widget.config(bg="white")
    return

root = Tk()

B1 = Button(root,text="Button 1", bg="white")
B1.pack()

B2 = Button(root, text="Button2", bg="white")
B2.pack()

B3 = Button(root, text= "Button 3", bg="white")
B3.pack()

B1.bind("<Enter>",SetColor)
B2.bind("<Enter>",SetColor)
B3.bind("<Enter>",SetColor)

B1.bind("<Leave>",ReturnColor)
B2.bind("<Leave>",ReturnColor)
B3.bind("<Leave>",ReturnColor)

root.mainloop() 
```

我的目标是只有两个绑定（用于“Enter”和“Leave”事件）而不是上面的六个。

谢谢你的任何想法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T13:55:18.877

要回答您是否可以将单个绑定应用于多个小部件的具体问题，答案是肯定的。它可能会导致更多而不是更少的代码行，但它很容易做到。

All tkinter widgets have something called "bindtags". Bindtags are a list of "tags" to which bindings are attached. You use this all the time without knowing it. When you bind to a widget, the binding isn't actually on the widget per se, but on a tag that has the same name as the widget's low level name. The default bindings are on a tag that is the same name as the widget class (the underlying class, not necessarily the python class). And when you call `bind_all`, you're binding to the tag `"all"`.

The great thing about bindtags is that you can add and remove tags all you want. So, you can add your own tag, and then assign the binding to it with `bind_class` (I don't know why the Tkinter authors chose that name...).

An important thing to remember is that bindtags have an order, and events are handled in this order. If an event handler returns the string `"break"`, event handling stops before any remaining bindtags have been checked for bindings.

The practical upshot of this is, if you want other bindings to be able to override these new bindings, add your bindtag to the end. If you want your bindings to be impossible to be overridden by other bindings, put it at the start.

# Example

```
import Tkinter as tk

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)

        # add bindings to a new tag that we're going to be using
        self.bind_class("mytag", "<Enter>", self.on_enter)
        self.bind_class("mytag", "<Leave>", self.on_leave)

        # create some widgets and give them this tag
        for i in range(5):
            l = tk.Label(self, text="Button #%s" % i, background="white")
            l.pack(side="top")
            new_tags = l.bindtags() + ("mytag",)
            l.bindtags(new_tags)

    def on_enter(self, event):
        event.widget.configure(background="bisque")

    def on_leave(self, event):
        event.widget.configure(background="white")

if __name__ == "__main__":
    root = tk.Tk()
    view = Example()
    view.pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

A little bit more information about bindtags can be found in this answer: [https://stackoverflow.com/a/11542200/7432](https://stackoverflow.com/a/11542200/7432)

Also, the `bindtags` method itself is documented on the effbot [Basic Widget Methods](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.bindtags-method) page among other places.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T13:05:26.103

```
for b in [B1, B2, B3]:
    b.bind("<Enter>", SetColor)
    b.bind("<Leave>", ReturnColor) 
```

您可以进一步抽象所有代码段：

```
for s in ["button 1", "button 2", "button 3"]:
    b=Button(root, text=s, bg="white")
    b.pack()
    b.bind("<Enter>", SetColor)
    b.bind("<Leave>", ReturnColor) 
```

现在很容易添加额外的按钮（只需在输入列表中添加另一个条目）。`for`通过更改循环体也很容易更改对所有按钮的操作。

# d3.js - 访问键值？

> ID：15362013
> 
> 赞同：0
> 
> 时间：2013-03-12T13:02:22.037
> 
> 标签：d3.js

这可能是一件非常简单的事情，但一直无法弄清楚。我有一个带有图例的多线图。我已按照以下格式将 parameter_id 指定为键。

```
Array[3]
0: Object
key: "1"
values: Array[11]
0: Object
client_id: "1"
dateTimeReceived: "2013-03-12 05:54:10"
dateTimeTaken: Tue Mar 12 2013 05:53:41 GMT+0000 (GMT Standard Time)
id: "1"
inspectionPoint_id: "1"
parameterType: "Temperature"
parameter_id: "1"
reading: 2.1
testSourceLocationDescription: "test source"
testSourceLocationLatitude: "53.000000000000000"
testSourceLocationLongitude: "-7.000000000000000"
testSourceLowerLimit: "4"
testSourceUpperLimit: "25"
testSource_id: "1"
unitMeasurement: "°C"
__proto__: Object 
```

我遇到的问题是，显然图例文本正在显示 id - 但我希望它显示 parameterType。我是否需要将 parameterType 指定为第二个键（如果可能，希望避免这种情况）或者有什么方法可以访问这个值？

PS - 我最初使用 parameterType 作为键，但元素在更新时没有正确绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:48:59.973

只需将要点中的第 72 行从

```
.text(function(d){ return d.key; }) 
```

到

```
.text(function(d){ return d.values[0].parameterType; }) 
```

# xpath - HtmlAgilityPack xPath 抓取

> ID：15362017
> 
> 赞同：1
> 
> 时间：2013-03-12T13:02:30.673
> 
> 标签：xpath, web-scraping, html-agility-pack

我正在尝试抓取此网站 [http://www.gotickets.com/calendar.php?Display=Daily&Date=2013-03-12&EventTypeID=2&EventID=0&GenreID=159&VenueID=0&MarketAreaID=0](http://www.gotickets.com/calendar.php?Display=Daily&Date=2013-03-12&EventTypeID=2&EventID=0&GenreID=159&VenueID=0&MarketAreaID=0)

这是我感兴趣的

数据按层次组织如下

```
<div class="clr dayItem">
 <div class="clr genreHeader">Alternative Rock</div>
 <div class="clr genreEvents">
  <div class="clr dayEvent">
   <a href="/concert/muse/houston_1339329.php" title="7:00 PM Muse - Toyota Center - TX">Muse - Toyota Center - TX - 7:00 PM
   </a>
 </div>
 <div class="clr dayEvent">
  <a href="/concert/matchbox_20/pooler_1347335.php" title="7:30 PM Matchbox 20 - Johnny Mercer Theatre">Matchbox 20 - Johnny Mercer Theatre - 7:30 PM
  </a>
</div>

etc...
  </div>
 </div> 
```

所以基本上页面分为两列，每列都有DayItems，其中包括genere和带有hrefs的dayEvents

我一直在尝试获取数据，但我对 xpath 完全陌生，直到今天一直在使用 Regex

正则表达式变得繁琐且过于复杂，所以我选择了 xPath

获取我使用的 DayItems：

```
 var cl = document.DocumentNode.SelectNodes("//*[contains(concat(' ', normalize-space(@class), ' '), ' dayItem ')]");

 foreach (var item in cl.Where(x=> x.Attributes.Any(p=>p.Value == "clr dayItem" && p.OriginalName=="class")))
      {

            /// THIS LINE FAILS
          var genre = item.SelectSingleNode("//.[contains(concat(' ', normalize-space(@class), ' '), ' genre ')]");

          Console.WriteLine(item.Name);

          foreach (var attr in item.Attributes.Select(x => x.OriginalName + ".." + x.Value))
          {

              Console.WriteLine(attr);
          }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:05:20.823

以下是使用 XPATH 轻松完成此任务的方法。这很容易，因为文档结构良好并且具有有意义的 CLASS 属性。

```
 HtmlWeb web = new HtmlWeb();
        HtmlDocument doc = web.Load("http://www.gotickets.com/calendar.php?Display=Daily&Date=2013-03-12&EventTypeID=2&EventID=0&GenreID=159&VenueID=0&MarketAreaID=0");

        foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//div[@class='clr dayEvent']"))
        {
            Console.WriteLine("Event: " + node.InnerText);

            HtmlNode genre = node.SelectSingleNode("../../div[@class='clr genreHeader']");
            Console.WriteLine(" Genre:" + HtmlAgilityPack.HtmlEntity.DeEntitize(genre.InnerText));
        } 
```

您可以将此调整到您的 Event 类。在事件文本中，它不是 HTML，因此您必须像在事件代码中那样解析它。

你可以在这里学习 XPATH：[XPath 教程](http://www.w3schools.com/xpath/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:50:48.097

这是我的工作代码，它不像我想要的那样干净，但这只是一次数据查找探险。我永远不会再使用这个软件我会很感激有人修复我的代码以使其更高效和更好，具体取决于 xpath

```
string html = client.DownloadString("http://www.gotickets.com/calendar.php?Display=Daily&EventTypeID=1&EventID=0&GenreID=159&VenueID=0&MarketAreaID=0" + "&Date=" + MakeDate);

      List<Event> events = new List<Event>();

        HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
      document.LoadHtml(html);

      var cl = document.DocumentNode.SelectNodes("//*[contains(concat(' ', normalize-space(@class), ' '), ' dayItem ')]");

      foreach (var item in cl)
      {

          var genre_text = item.InnerText.Replace("\t\t", "").Replace("\t\t\t\t", "").Replace("\t\t\t", "").Replace("\t\t", "").Replace("\t", "");

          var lines = genre_text.Split(new string[] {"\n"}, StringSplitOptions.RemoveEmptyEntries).Select(x=>  WebUtility.HtmlDecode(x)).ToArray();

          var genre = lines.Take(1).First();

          events.AddRange(lines.Skip(1).Select(f =>

              new Event(f, f.Split(new string[] { "-" }, StringSplitOptions.RemoveEmptyEntries), genre, this.Date)

              ));

      } 
```

Event 类只是一个容器

```
public class Event
{
    private string OriginalString;
    private string[] p;

    public Event(string originalString, string[] parts, string genre, DateTime date)
    {
        this.OriginalString = originalString;
        this.p = parts;
        this.Genre = genre;
        this.Date = date;
        analyze(parts);
    }
 public override string ToString()
    {
        string pattern = "{0},{1},{2},{3}";
        var s = string.Format(pattern, this.Date.ToString("MMM"), this.Genre, this.Location, this.Performer);
        return s;

    }

    private void analyze(string[] parts)
    {
        if (parts.Length < 3)
        {
            throw new IndexOutOfRangeException("Length < 3 ==> " + parts.Length);
        }

        if (parts.Length > 3)
        {
            this.Performer = parts[0].Trim();
            this.Location = parts[1].Trim() + "-" + parts[2].Trim();

        }
        else
        {
            this.Performer = parts[0].Trim();
            this.Location = parts[1].Trim();

        }

    }

    public string Genre { get; set; }
    public string Performer { get; set; }
    public string Location { get; set; }
    public DateTime Date { get; set; }
} 
```

它有效，但它是UGLYYY

# html - 将一组 div 居中在一个 div 中

> ID：15362024
> 
> 赞同：4
> 
> 时间：2013-03-12T13:02:48.213
> 
> 标签：html, centering

是否可以将一组 div 集中在一个 div 中，使其看起来像这样？

[http://oi49.tinypic.com/1yo2dh.jpg](http://oi49.tinypic.com/1yo2dh.jpg)

我想知道你是否可以在不使用桌子的情况下做到这一点。

现在我得到了这个 HTML：

```
<nav class="imagemenu">
    <div id="categories">
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>    
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>         
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>
        <div class="cata" onClick="#" style="cursor:pointer;"> <img src="image/placeholder.jpg" /> </div>
    </div>
</nav> 
```

这个CSS：

```
.home-menu {
    width:780px;
    height: 340px;
    margin-top:10px;
    padding: 20px;
    background-color:#CCC;
}

#categories {
    width:740px;
    height:340px;
    margin:0 auto;
    background-color:#333;
}

.cata {
    width:150px;
    height:100px;
    margin-bottom: 20px;
    float:left;
    background-color:#FFF;
    opacity:0.5;
}
.cata {
    opacity:1.0;
} 
```

大小仍然取决于，但是否有可能的选项可以轻松地将所有 cata 集中在类别 div 中？

我尝试了一些选项`overflow`，例如`text-align:center`其他相关问题，也许我用错了，但它们不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T13:07:24.813

您可以添加`text-align`：

```
#categories {
    […]
    text-align:center;
} 
```

并且您必须从此 CSS 规则`display: inline-block`中删除：`float`

```
.cata{
    […]
    display:inline-block;
} 
```

**演示**

[http://jsfiddle.net/EdHS9/](http://jsfiddle.net/EdHS9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:07:54.603

**对的，这是可能的。**

您需要做的就是制作`div`元素`inline-block`，以便它们能够响应`text-align:center`类似的内联元素。

这是一个要演示的小提琴。

[http://jsfiddle.net/](http://jsfiddle.net/)

# java - Java DB（又名 Derby）不会从备份中恢复数据库

> ID：15362027
> 
> 赞同：0
> 
> 时间：2013-03-12T13:03:03.287
> 
> 标签：java, sql, derby, database-restore, javadb

正如我从[apache 手册](http://db.apache.org/derby/docs/10.0/manuals/admin/hubprnt44.html)中读到的，我尝试使用以下代码恢复我的嵌入式 Java DB (AKA Derby) 数据库：

```
private void restoreBackup() {
    FileDialog fileDialog = new FileDialog(new Frame(), "Choose A Backup Folder)", FileDialog.LOAD);
    //fileDialog.setDirectory("::myVolume:");
    fileDialog.setVisible(true);
    String fileName = fileDialog.getDirectory();

    if (fileDialog.getDirectory() != null) {
        fileName = fileName.substring(0, fileName.lastIndexOf(System.getProperty("file.separator")));
        try {
            Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
            Properties connectionProps = new Properties();
            connectionProps.put("restoreFrom", fileName);
            connectionProps.put("user", "pass");
            connectionProps.put("password", "databaseName");
            conn = DriverManager.getConnection(dbURL, connectionProps);
            conn.commit();
            System.out.println("Database Restored");
        } catch (InstantiationException ex) {
            Logger.getLogger(ReseachAssistantUI.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            Logger.getLogger(ReseachAssistantUI.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(ReseachAssistantUI.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(ReseachAssistantUI.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

但是，即使没有抛出异常，也没有任何反应。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T09:27:59.717

我有同样的问题，我解决了它，先关闭数据库，然后恢复它。例如：

```
 String nsURL1 = "jdbc:derby:*PATH*;shutdown=true";
        String nsURL2 = "jdbc:derby:*PATH*;restoreFrom="+ fileName;
        connectionProps.setProperty("user", "pass");
        connectionProps.setProperty("password", "databaseName");

        DriverManager.getConnection(nsURL1, props);
        dbConnection = DriverManager.getConnection(nsURL2, props); 
```

并使用 try-catch

# matlab - MATLAB，ASCII 文件。文本扫描？进口数据？加载？它们都不起作用

> ID：15362028
> 
> 赞同：4
> 
> 时间：2013-03-12T13:03:06.503
> 
> 标签：matlab, ascii

我必须在 MATLAB 中导入 ASCII 文件，然后读取它们。这些是我尝试过的功能：

1）`load(filename)`不起作用：它说“ASCII文件第2行的列数必须与前几行相同”

2）`textscan(file, '-ascii')`返回类似“空单元格数组：1×0

3)`importdata(file)`返回" data: [2x1 double], textdata: [4x1 cell], colheaders {'*LOS='}。它确实有效，正如georgesl 所建议的那样，但它将全文视为唯一列：我怎么能跳过标题，然后将数据分成 2 列？

我注意到如果我将 ascii 文件转换为 dat 文件，一切都很好，但是我有很多文件（超过 100 个）需要处理。

我应该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:24:42.823

您可以使用将整个文件读入字符串[`fileread`](http://www.mathworks.com/help/matlab/ref/fileread.html)

```
text = fileread( filename ); 
```

然后你可以使用自己解析它[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:27:22.363

我喜欢Shai提到的方法，但一般使用命令[textscan](http://www.mathworks.com/help/matlab/ref/textscan.html)

```
data = textscan(fid, '%s', 'Delimiter', '\n') 
```

这样我就得到了一个字符串单元格数组。如果您担心行号，可以使事情更容易处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T17:40:24.230

```
[filename pathname] = uigetfile({'*.txt'}, 'Select File');
fullpathname = strcat (pathname, filename);
    A = importdata(fullpathname,'');
value =getfield(A, 'data'); 
```

好好享受！

# jquery - 在 jquery mobile 中创建选项卡

> ID：15362033
> 
> 赞同：1
> 
> 时间：2013-03-12T13:03:19.250
> 
> 标签：jquery, html, css, jquery-mobile

我想在我的 jquery 移动应用程序中创建标签，如下所示：

![网址](../Images/0c3ec96866a4024afbf029eff53e0792.png)

![外观和感觉](../Images/e6efc648a3f87743abbcc97cdd8ba0fd.png)

功能是这样的，我认为：http: [//jsfiddle.net/m8wQM/](http://jsfiddle.net/m8wQM/)

```
 <div data-role="content">   
            <div data-role="navbar" id="navbar">
                <ul>
                    <li><a href="#" class="ui-btn-active" data-tab-class="tab1">Tab1</a></li>
                    <li><a href="#" data-tab-class="tab2">Tab2</a></li>
                    <li><a href="#" data-tab-class="tab3">Tab3</a></li>
                    <li><a href="#" data-tab-class="tab4">Tab4</a></li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab1">
                    Tab1
                </div>
                <div class="tab2 ui-screen-hidden">
                    Tab2
                </div>
                <div class="tab3 ui-screen-hidden">
                    Tab3
                </div>
                <div class="tab4 ui-screen-hidden">
                    Tab4
                </div>
            </div>
        </div><!-- /content --> 
```

我如何获得此页面上的外观和感觉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:41:30.063

您必须使用自己的 css，只需在[此处](http://jquerymobile.com/themeroller/index.php)获取，您就可以对其进行编辑。不要使用我在您的 jsfiddle 上看到的外部链接。它将提供默认的“jquery-mobile”样式。

# highcharts - Highcharts，从饼图的图例中排除数据点

> ID：15362036
> 
> 赞同：0
> 
> 时间：2013-03-12T13:03:29.670
> 
> 标签：highcharts, legend, pie-chart

如何从饼图类型的图例中排除一​​个特定数据点，但显示所有其他数据点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:46:55.707

我可以找到的 HighCharts 目前不存在该选项，但是，您可以对源代码进行一些修改以使其正常工作。

我使用`v2.3.3`了这个 hack 的版本，但是，其他版本可能会类似地工作。

有问题的代码在第 9336 行附近：

```
allItems = [];
    each(chart.series, function (serie) {
        var seriesOptions = serie.options;

        if (!seriesOptions.showInLegend) {
            return;
        }

        // use points or series for the legend item depending on legendType
        allItems = allItems.concat(
                serie.legendItems ||
                (seriesOptions.legendType === 'point' ?
                        serie.data :
                        serie)
        );
    }); 
```

在该代码之后，立即放置以下代码：

```
for (var i=0;i<allItems.length;i++){
        if (typeof allItems[i].showInLegend !== "undefined"){
            if (!allItems[i].showInLegend){
                allItems.splice(i,1)
                i--;
            }
        }
    } 
```

然后对于点集 showInLegend=false 像这样：

```
{
    name: 'Chrome',
    y: 12.8,
    sliced: true,
    selected: true,
    showInLegend: false
}, 
```

这是一个显示工作概念的 JSFiddle：http: [//jsfiddle.net/mkremer90/zXSJW/](http://jsfiddle.net/mkremer90/zXSJW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:57:30.317

你正在寻找

```
 chart.series[0].setData() 
```

工作**演示** [http://jsfiddle.net/XdfSd/](http://jsfiddle.net/XdfSd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T12:44:32.903

您可以使用“假”系列，如下例所示：

[http://jsfiddle.net/Qaaqw/](http://jsfiddle.net/Qaaqw/)

其中介绍了如何在图例中显示定义的项目。

```
legendItemClick: function (event) {
                        console.log(this);
                        var thisSeriesId = this.id;
                        var thisSeriesVisibility = this.visible ? true : false;

                        $(chart.series).each(function (i, e) {

                            $(e.data).each(function(j, k){

                                if (thisSeriesId === k.id) {
                                    thisSeriesVisibility ? k.setVisible(false) : k.setVisible(true);
                                }
                            });
                        });
                        event.preventDefault();

                    } 
```

# rest - Nginx 更改请求从 PUT 到 POST

> ID：15362038
> 
> 赞同：4
> 
> 时间：2013-03-12T13:03:32.253
> 
> 标签：rest, nginx

我正在将 nginx 用于我正在处理的 PHP REST API。为了完全符合 REST，我在适当的地方使用`PUT`/`DELETE`请求。但是，PHP 不会解析`PUT`请求的帖子正文——我在这个特定场景中需要它。

我曾考虑过自己解析它，但是 a) 我宁愿让 PHP 在 C 中完成它，因为它比我在 PHP 中提出的任何实现都要快得多，并且 b) 人们已经花费了很多边缘情况很多时间工作 - 我宁愿不重复这些努力。

在 API 方面，我已经添加了对读取`X-HTTP-Method-Override`标题的支持，并在可用时在实际动词上使用它。

我现在正在寻找的只是一种在 nginx 中接受`PUT`请求并将其更改为`POST`带有该标头集的请求的方法。

我觉得我已经找遍了整个地方，但找不到解决方案。任何事情都会有帮助（即使您推荐了不同的解析技术，所以我不必处理这个问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:12:33.337

`REQUEST_METHOD`Nginx 仅通过param通知 FastCGI 请求方法。因此，您可以简单地覆盖该值并将您想要的任何内容报告给 PHP。您必须在 Nginx 配置中声明另一个变量，让我们`$fcgi_method`根据原始请求方法命名它：

```
map $request_method $fcgi_method {
  default $request_method;
  PUT POST;
} 
```

（注意，`map`section 应该在level，即与blocks`http`相同的配置级别）`server`

然后你可以像这样在你的位置使用它：

```
fastcgi_param REQUEST_METHOD  $fcgi_method; 
```

重要的是这个片段是在典型`include fastcgi_params`或类似之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T22:29:58.330

我认为值得指出的是，如果其他人认为这种方法用于处理 PHP 中的 PUT 请求（或任何其他未填充到某个全局 $_WHATEVER 数组中以使生活变得轻松的请求方法），那么获取正文的正确方法put 请求的内容是读取`php://input`.

像这样的东西应该工作：

```
$data = file_get_contents("php://input"); 
```

# php - 当您只需要 2 位数字（01,02 ... 10,11）时如何使用 range()？

> ID：15362041
> 
> 赞同：3
> 
> 时间：2013-03-12T13:03:44.693
> 
> 标签：php, arrays, range

我有一个这样的数字数组

```
$arr = range(01,10); 
```

但我希望输出是

```
Array ( [0] => 01 [1] => 02 [2] => 03 ... [9] => 10) 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T13:05:34.957

您可能需要`array_map()`：

```
array_map(function($item) {
    return str_pad($item, 2, '0', STR_PAD_LEFT); 
}, $arr); 
```

[**演示**](http://codepad.viper-7.com/x6nq4B)

或者，您也可以使用`sprintf()`：

```
return sprintf('%02d', $item); 
```

如果数组很大，您可能希望就地执行替换；感谢[Waygood](https://stackoverflow.com/users/1487944/waygood)的建议：

```
array_walk($arr, function(&$item) {
    $item = str_pad($item, 2, '0', STR_PAD_LEFT); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:06:13.400

```
$arr = range(1,10);
$arr = array_map('pad', $arr);

function pad($input)
{
    return str_pad($input, 2, "0", STR_PAD_LEFT);
}

print_r($arr); 
```

[看到它在行动](http://codepad.viper-7.com/jGNCpJ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:06:35.663

查看[str_pad](http://php.net/manual/en/function.str-pad.php)选项。您可以使用它在输出中添加前导零。

```
foreach($arr as $key=>$val) {
  $arr[$key] = str_pad($val, 2, '0', STR_PAD_LEFT);
}

var_dump($arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:08:32.767

使用带有引用的 foreach 循环：

```
$arr = range(1,10);
foreach($arr as &$val) {
    $val = str_pad($val, 2, '0', STR_PAD_LEFT);
}

var_dump($arr); 
```

# javascript - 在 jQuery UI 选项卡中通过 Ajax 加载 Google 核心图表

> ID：15362046
> 
> 赞同：1
> 
> 时间：2013-03-12T13:04:01.680
> 
> 标签：javascript, jquery, jquery-ui, google-visualization

[在 jQueryUI 选项卡中通过 AJAX 加载 Google 可视化](https://stackoverflow.com/questions/3363875/loading-google-visualizations-via-ajax-in-jqueryui-tabs)

上面的链接是一个类似的疑问，我有一个类似的疑问，我需要首先使用带有 ajax 的 jqueryui 选项卡的谷歌可视化核心图表它不是所有的工作我有同样的问题，但是链接中提供的解决方案它部分工作它完美地工作对于该示例中提供的可视化图表，但不是柱形图或饼图的核心图表，我对这些图表有什么不同吗

索引页包含此脚本

```
<script src="js/jquery-1.9.1.js" type="text/javascript"></script>
<script src="js/jquery-ui.js"></script>
<script type='text/javascript' src='http://www.google.com/jsapi'></script> 
$(function() {
$("#switch").tabs({
    beforeLoad: function( event, ui ) {
        ui.jqXHR.error(function() {
            ui.panel.html(
                "Couldn't load this tab. We'll try to fix this as soon as possible. " +     "If this wouldn't be a demo."
            );
        });
    }
});
}); //for swicthes  
google.load("visualization", "1", {packages:["corechart"]}); 
```

并且ajax页面包含

```
<script type='text/javascript'>
google.setOnLoadCallback(drawChart);
function drawChart() {
var data = google.visualization.arrayToDataTable([
  ['Year', 'Sales', 'Expenses'],
  ['2004',  1000,      400],
  ['2005',  1170,      460],
  ['2006',  660,       1120],
  ['2007',  1030,      540]
]);

var options = {
  title: 'Company Performance',
  hAxis: {title: 'Year', titleTextStyle: {color: 'red'}}
};

var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
chart.draw(data, options);
}
</script> 
```

和要显示的 div -

```
<div id='chart_div' style='width: 700px; height: 240px;'></div> 
```

# css - 垂直对齐的偏移不正确：图像中间

> ID：15362047
> 
> 赞同：4
> 
> 时间：2013-03-12T13:04:01.610
> 
> 标签：css, image, vertical-alignment

我有一个问题正确垂直对齐我的图像。我有`div`一个高度和行高为 40px 的容器。里面还有另一个`div`包含 2`img`和 one `span`。图像的高度设置为 30px，因此图像按比例缩小。

的垂直对齐属性`img`设置为中间。然而，在 Firefox 和 Chrome 中，生成的偏移量在顶部是 8px，在底部是 2px。如果我将垂直对齐属性设置为`top`或`baseline`图像位于顶部边缘，则将其设置为`bottom`将它们移动到底部（根本没有间距）。

我试图找到一种无需额外标记即可正确对齐它们的方法，但我似乎找不到任何东西。我还尝试了[如何在 div 中垂直对齐图像](https://stackoverflow.com/questions/7273338/how-to-properly-vertically-align-an-image)的解决方案，但我没有运气。

我创建了一个 jsfiddle 来说明问题：http: [//jsfiddle.net/pbQDS/](http://jsfiddle.net/pbQDS/)

希望你能帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:33:42.667

CSS：

```
#test  {
    position:relative;
    width: 980px;
    margin: 20px auto 10px auto;
    padding:0;
    position: relative;
    background: #7B0000;
    border:solid 1px blue;
}

#test .section { 
    display:block;
    position:relative;
    padding:10px 0;
    margin:0;
}
#test .section:last-child { float: none; }
#test .section:first-of-type { padding-left: 180px; }
#test img { padding:0; margin:0; display:inline-block; height:30px; vertical-align: middle; position:relative; top:50%; }
#test .section span {position:relative; left:3px; top:50%; display: inline-block;} } 
```

我的[JsFiddle 演示](http://jsfiddle.net/blackhawx/pbQDS/41/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:17:38.637

我会使用“vs”`span`将高度扩展到 100% 并使图像与中间对齐。此外，我不会尝试将两个父容器对齐到所需的高度，而只将其中一个对齐以避免额外`padding`或`margin`冲突。看看这个演示：http: [//jsfiddle.net/NcrGF/1/](http://jsfiddle.net/NcrGF/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:27:51.403

好的，谢谢各位帮忙。我想到了。问题是`line-height`财产。给父容器`#test`或内部`.section`a`line-height`导致计算错误。如果我将 分配`line-height`给`span`相反，一切似乎都很好。

# gwt - 使用 GWT 获取用户的互联网速度

> ID：15362048
> 
> 赞同：0
> 
> 时间：2013-03-12T13:04:02.530
> 
> 标签：gwt

**我想以编程方式在我的GWT** Web 应用程序中获取用户的 Internet 下载和上传速度。

在做了很多研究之后，我找不到办法做到这一点`GWT`。

有没有办法让`internet speed`用户进入`GWT`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:02:54.930

在 GWT 中似乎没有直接的方法。你可以在 Js 或[Jquery中找到很多方法](http://jsfiddle.net/yahavbr/tEFpC/2/)

同理，取一个并通过.Note`image`上传到服务器，并在（onSuccess的第一行）中记下时间。通过计算with ，你可以得到上传时间。同样的。`RPC``RPC` `start time``RPC end``elapsed time``size of image``download`

PS：我没试过。只是一个想法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T13:16:01.420

运行您的 GWT Web 应用程序并检查网页（右键单击鼠标并选择检查元素）然后从中选择网络或网络，然后单击上传或下载并检查上传和下载文件所花费的时间。

# postgresql - 使用可修改视图限制触发范围

> ID：15362061
> 
> 赞同：0
> 
> 时间：2013-03-12T13:04:30.860
> 
> 标签：postgresql, triggers, views

我们有一个架构，其中对数据表的修改触发了作业的创建和处理程序的后续处理（用 perl 编写并通过通道通知）。在作业处理期间，处理程序需要更新数据表。为了避免递归，我们：

1.  需要在更新前禁用触发器
2.  进行更新和
3.  再次启用触发器。

由于可能会在项目生命周期的后期添加新的处理程序，因此可能会忘记禁用和启用触发器，因此这可能会成为维护问题。

作为一种替代方法，我们设计了将触发器的范围限制为特定于前端的视图的想法。这些视图可通过`instead of`触发器写入（另请参阅[此问题](https://stackoverflow.com/questions/15343075/update-multiple-columns-in-a-trigger-function-in-plpgsql)）。处理程序在作业执行期间直接更新数据表，因此不会触发任何递归作业。我们有这种方法的有效实施。

在我看来，我们在这里交换复杂性：结构（附加视图）的算法（启用禁用触发器）。我们目前倾向于选择后者，但我想请你们就此事提供一些意见……这是一种合理的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:10:19.563

我会考虑使用不同的用户。触发器仅在用户 <> 'handler' 时运行。您可以将自定义函数设置为作为“安全定义者”运行，这意味着创建它们的用户。您可以将条件添加到可以检查当前用户的触发器定义 (WHEN)。

然后查看[pgtap](http://pgtap.org/)，它可以让你检查你没有错过任何东西。

# doctrine-orm - ZF2 + Doctrine2：服务器已消失 - 如何启动旧连接？

> ID：15362070
> 
> 赞同：2
> 
> 时间：2013-03-12T13:04:46.633
> 
> 标签：doctrine-orm, zend-framework2

在此先感谢您的帮助。

我想知道是否有人很快知道要在实体存储库上调用哪些函数来在它死了的情况下进行重新连接。我正在通过 ZF2 CLI 路由运行一些可能花费超过 wait_timeout 的时间的作业，不幸的是，ER 的连接在需要使用时（当作业完成时）断开。

需要：

```
// do the long job

$sl = $this->getServiceLocator();
$mapper = $sl->get( 'doctrine_object_mapper' );
if( !$mapper->getRepository()->isAlive() ) // something like so
    $mapper->getRepository()->wakeTheHellUp(); 
```

那些不是正确的方法名称！;)

再次感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:11:24.653

这是长时间运行的进程和连接的一个[相当普遍的问题。](http://www.doctrine-project.org/jira/browse/DBAL-275)

解决方案是检索 ORM 的[DBAL 连接](https://github.com/doctrine/dbal/blob/2.3.2/lib/Doctrine/DBAL/Connection.php)并在连接丢失时重新创建它（确保它在事务期间没有死）。这显然很烦人，但这是目前唯一的方法：

```
// note - you need a ServiceManager here, not just a generic service locator
$entityMAnager = $serviceManager->get('entity_manager');
$connection    = $entityManager->getConnection();

try {
    // dummy query
    $connection->query('SELECT 1');
} catch (\Doctrine\DBAL\DBALException $e) {
    if ($connection->getTransactionIsolation()) {
        // failed in the middle of a transaction - this is serious!
        throw $e;
    }

    // force instantiation of a new entity manager
    $entityManager = $serviceManager->create('entity_manager');
}

$this->doFoo($entityManager); 
```

# c# - 如何将此 LINQ 查询从方法形式转换为流畅的语法？

> ID：15362071
> 
> 赞同：1
> 
> 时间：2013-03-12T13:04:48.553
> 
> 标签：c#, linq

我有以下方法语法格式的 LINQ 查询：

```
items.Select (item => fieldsNames.Select(fieldName => item
                                 .FieldValues[fieldName])
                                 .ToList ())
     .ToList(); 
```

流畅的查询语法中的等价物是什么？

我试过了

```
(from item in items
from fieldName in fieldsNames
select item.FieldValues[fieldName]).ToList() 
```

但这给了我一个`List<T>`而不是一个`List<List<T>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:11:35.330

```
( 
 from item in items
 select (from fieldName in fieldsNames
         select item.FieldValues[fieldName]).ToList()
).ToList(); 
```

# php - 在线时 CodeIgniter 验证码图像不起作用

> ID：15362072
> 
> 赞同：1
> 
> 时间：2013-03-12T13:04:49.680
> 
> 标签：php, javascript, html, css, codeigniter

我会尽量具体。我使用 codeigniter 验证码助手在我的网站上生成验证码以进行用户验证，它仅在 localhost 上运行良好，但是当我在线上传网站时，验证码没有显示任何内容，显然，当我使用开发人员工具查看它时 img 标签包含验证码图像根本不存在。

代码是：

```
$this->load->helper('captcha');
$vals = array(
        'img_path' => './captcha/',
        'img_url' => base_url().'captcha/',
        'font_path' => './fonts/VeraSe.ttf',
        );

$img = create_captcha($vals);
$x = $this->session->set_userdata('captcha', $img['word']); 

$data['image'] = $img['image'];
$data['captcha1'] = $img['word'];
$this->load->view('signup', $data); 
```

在视图中：

```
<?php echo $image; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:39:43.330

脚本似乎有一些问题，它需要额外的参数，正在运行的代码是：

```
$vals = array(

    'img_path' => './captcha/',
    'img_url' => 'http://example.com/captcha/',
    'font_path' => './fonts/texb.ttf',
    'img_width' => '150',
    'img_height' => 30,
    'expiration' => 7200
    );

$cap = create_captcha($vals);
$data = $cap['image'];
$this->load->view(signup, $data); 
```

并在视图文件中

```
echo $image; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:11:57.483

从[验证码帮助页面](http://ellislab.com/codeigniter/user-guide/helpers/captcha_helper.html)

> “验证码”文件夹必须是可写的（666 或 777）
> 
> 验证码功能需要 GD 图像库。

确保这些在您的在线网站上是真实的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T17:42:28.083

对我来说，将目录名称“captcha”添加到 .htaccess 文件中就足够了。就像写为 poly 一样：

```
RewriteCond $1 !^(index\.php|asset|captcha|inc|images|robots\.txt) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T18:46:23.483

重写 htaccess 文件以包含验证码文件夹，如

```
 RewriteCond $1 !^(index\.php|asset|captcha|inc|images|robots\.txt) 
```

有同样的问题，但它对我有用。请记住首先创建 .htaccess 文件的备份

# java - ArrayIndexOutOfBounds 与 readfile 在 Java 中创建对象数组

> ID：15362074
> 
> 赞同：0
> 
> 时间：2013-03-12T13:04:55.517
> 
> 标签：java, arrays, object, readfile

我一直在练习 open uni 的练习，它要求我从从文本文件中检索到的信息创建几个对象..它几乎可以工作，但我在第 58 行不断收到 ArrayIndexOutOfBoundsException : 1 。可能是一个简单的问题，但因为我是新手对此，我感到很困惑

```
package ReadWriteObjectThang;

import java.util.Scanner;

public class NinjaListMain {

public static void main(String[] args) {
    FileReadWrite jin = new FileReadWrite();
    Scanner scanny = new Scanner(System.in);

    Ninja ninja[] = new Ninja[3];

    System.out.println("Enter 1 to create 3 new Ninja Objects \n Enter 2 to create 3 Ninja Objects from file");
    int choice = scanny.nextInt();
    scanny.nextLine();
    int hp = 0;
    int x = 1;
    int z = 0;
    String info = " ";

    if(choice==1){
        System.out.println("Enter a name for your ninja crew");
        String newCrew = scanny.nextLine();

        for(z = 0;z<3;z++){
            System.out.println("Enter a name: ");
            String name = scanny.nextLine();
            System.out.println("Enter a weapon: ");
            String weapon = scanny.nextLine();
            System.out.println("Enter hitpoints in whole numbers: ");
            hp = scanny.nextInt();
            scanny.nextLine();

            ninja[z] = new Ninja(name,weapon,hp);
            info = info + name + " " + weapon + " " + hp + ",";
        }

        jin.write(newCrew, info);

    }
    else if(choice==2){
        System.out.println("Enter file name for ninjas to create");
        String oldCrew = scanny.nextLine();

        String oldInfo = jin.read(oldCrew);
        String tokens[] = oldInfo.split("\\s");
        int w = 0;
        for(z = 0;z < 3;z++){
            if(z==0)
                w = 0;
            else if(z==1)
                w = 3;
            else
                w = 6;

            String name = tokens[0 + w];
            String weapon = tokens[1 + w];     //AIOOBE happens here or line below
            hp = Integer.parseInt(tokens[2 + w]);

            ninja[z] = new Ninja(name,weapon,hp);

        }
    }

    for(int g = 0;g<3;g++){
        System.out.println(ninja[g].getName() + " " + ninja[g].getWeapon() + " " + ninja[g].getHP());
    }

}

}

public class Ninja {

private String name;
private String weapon;
private int hitpoints;

public Ninja(String a, String b, int c){
    name = a;
    weapon = b;
    hitpoints = c;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:10:07.500

该命令`oldInfo.split("\\s");`没有像您期望的那样返回长度为 5 或更长的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:11:38.013

对于您`String tokens[] = oldInfo.split("\\s");`正在使用的索引，您的索引不够大...或者索引对于它来说太大了。我建议您进行一些调试或简单地显示一些信息，而不是仅仅考虑查找错误。该代码显然没有按照您的预期执行。

您也不应该重用该 z 变量，在 for 循环中声明它： `for (int z = 0; ...`

# database - 寻找基于磁盘的类 redis 数据库

> ID：15362076
> 
> 赞同：23
> 
> 时间：2013-03-12T13:05:03.690
> 
> 标签：database, nosql, redis, persistence

我目前正在为我的应用程序使用 Redis，它的功能对我的应用程序（列表、集合、排序集合等）非常有用。

我的应用程序严重依赖排序集、列表、集。以及它们的相关功能（推送到列表、获取列表、集合并集等。我现在面临的唯一问题是我的数据很大，而且我的大部分数据不需要在内存中，我想将它们存储在磁盘上。

**我需要一个带有 redis 数据结构*的磁盘数据库 ***

我读过关于 Cassandra 的文章，但我不确定它是否支持排序集、集合、列表。或者至少如果确实如此，我找不到像 Redis 那样操作它们的方法。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-17T01:01:15.943

有许多磁盘上的数据库具有类似 Redis 的数据结构，甚至试图成为 Redis 的协议兼容替代品。

[在“是否有类似 Redis DB 的东西，但不受 RAM 大小限制？](https://stackoverflow.com/questions/18447380/is-there-something-like-redis-db-but-not-limited-with-ram-size) ”中有很好的建议- 可惜社区认为这些问题是题外话。

特别是，[SSDB](http://ssdb.io/)是一种主动维护的类似 Redis 的磁盘数据库（但不直接兼容），而[Ardb](https://github.com/yinqiwen/ardb)是一种主动维护的替代 Redis 的插件，用于将数据存储在磁盘上。免责声明：我（还）没有使用过它们中的任何一个。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-13T11:19:24.543

[https://github.com/yinqiwen/ardb](https://github.com/yinqiwen/ardb) 另一个 REDIS 协议替换为 LMDB、RocksDB 和 LevelDB 基于磁盘的后端

不错的基准

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-22T04:30:16.963

尝试 Edis - 基于 leveldb 的 Redis 的 Erlang 实现[http://inaka.github.io/edis/](http://inaka.github.io/edis/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T08:44:25.333

我鼓励你学习 Cassandra，虽然它有一些类似于键/值和集合的东西，但它与 Redis 非常不同。

我们目前通过 Memcached 协议将一个项目从 Redis（我们使用 sadd / spop）转移到 TokyoCabinet / KyotoCabinet。目前情况看起来不错，很快我将在 github 上发布 lib - 将在此处提供：

[https://github.com/nmmmnu](https://github.com/nmmmnu)

并且项目将被称为简单消息队列。它将仅支持 sadd / spop / sismember。同样在 Python 中，您将能够使用新对象而不是 Redis 对象，但仅限于这三个命令。

希望这可以帮助。

* * *

2014.07 更新：

这是我正在谈论的项目。

[https://github.com/nmmmnu/MessageQueue](https://github.com/nmmmnu/MessageQueue)

它实现了 Redis 和 Memcached 协议。对于后端，它使用内存 ndb/mdb 或 berkeley db。

# android - 在某些设备上启动活动时崩溃

> ID：15362078
> 
> 赞同：0
> 
> 时间：2013-03-12T13:05:08.343
> 
> 标签：android, android-intent, android-activity

我刚刚发布了一个警报应用程序，这简直是地狱。当某些设备尝试打开警报列表屏幕时，它会中断。我不知道为什么它会在某些设备上中断，而不是在其他设备上。我见过的每部手机都可以正常运行，但是在其他一些设备上打开警报列表就会炸毁它。对于这种特定的设备兼容性问题，我真的不了解。

AlarmClock 第 227 行的代码是这样的：

```
 View changeSettings = findViewById(R.id.alarm_settings);
        changeSettings.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    startActivity(new Intent(getApplicationContext(), SettingsActivity.class));
                }
            }); 
```

它引用了这行 xml：

```
<Button
    android:id="@+id/alarm_settings"
    style="?android:attr/buttonBarButtonStyle"
    android:layout_width="0.0dip" android:layout_height="fill_parent"
    android:text="@string/menu_settings"
    android:layout_weight="1.0" /> 
```

这链接到我从改编版的 android 股票警报中借用的设置活动的来源，但它使用了据称已弃用的 addPreferencesFromResource。这就是造成这个问题的原因吗？

这是来自用户设备的堆栈跟踪：

Nexus 7 触摸设置警报按钮，然后它崩溃

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nathantempelman.GoodMorningAlarmFree/com.nathantempelman.alarmclockfree.AlarmClock}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
at android.app.ActivityThread.access$600(ActivityThread.java:142)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4931)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.nathantempelman.alarmclockfree.AlarmClock.updateLayout(AlarmClock.java:227)
at com.nathantempelman.alarmclockfree.AlarmClock.onCreate(AlarmClock.java:210)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2139)
... 11 more 
```

任何帮助都会非常棒。我知道它也发生在其他人的平板电脑上，不确定是否是平板电脑的问题。如果有人想对其进行测试，该应用程序就在这里：https: [//play.google.com/store/apps/details?id=com.nathantempelman.GoodMorningAlarmFree](https://play.google.com/store/apps/details?id=com.nathantempelman.GoodMorningAlarmFree)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:09:55.317

您在第 227 行的 updateLayout 方法中的 AlarmClock 类中有一个 NullPointerException :)

```
Caused by: java.lang.NullPointerException
 at com.nathantempelman.alarmclockfree.AlarmClock.updateLayout(AlarmClock.java:227)
 at com.nathantempelman.alarmclockfree.AlarmClock.onCreate(AlarmClock.java:210) 
```

我会先检查该代码。

由于您没有发布任何代码，因此我目前无能为力:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:49:15.657

万一其他人偶然发现了这个问题，最终的问题是有一个单独的平板电脑布局文件，我在我为我的应用程序的一部分借用的源代码库中没有看到它。我显然添加了一堆功能，但没有更新平板电脑的布局。访问我添加的内容的按钮不在平板电脑布局文件中。因此，只有当平板设备加载平板布局文件并在显示中搜索不存在的对象时才会出现空指针异常。当我删除该文件时，一切正常。

我知道，hurp 和或 durp。但也许有人有同样的问题，可能想检查一下。

# facebook - Flash 应用程序在 IE 中的 facebook 对话框后没有重新出现

> ID：15362082
> 
> 赞同：0
> 
> 时间：2013-03-12T13:05:19.527
> 
> 标签：facebook, flash, internet-explorer

Internet Explorer 用 Flash 内容覆盖 facebook 对话框，这是在用户单击打开对话框时隐藏任何 Flash 内容的常用解决方案。

闪光灯隐藏但不会重新出现，这是我的代码：

```
function postToWall(postName,postCaption,postDescription,postPicture,postLink) {
    hideFlash();
    FB.ui({
        method: 'feed',
        name: postName,
        caption: postCaption,           
        access_token: '<?php echo $accessToken ?>',
        description: postDescription,
        picture: postPicture,
        link: postLink,
        display: 'iframe'
    },

    function (response) {
        showFlash();
        var swf = swfobject.getObjectById("flashContent");
        swf.postToWallCallback(response);

    });
    return false;
}

function hideFlash(){
    var flashContent = document.getElementById("flashContent");
    flashContent.style.visibility = "hidden";
}

function showFlash(){
    var flashContent = document.getElementById("flashContent");
    flashContent.style.visibility = "visible";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:09:18.903

我通过浏览器检查解决了这个问题，然后对任何版本的 IE 使用 display: 'popup'。

# php - file_get_contents 为俄罗斯内容提供垃圾

> ID：15362087
> 
> 赞同：1
> 
> 时间：2013-03-12T13:05:27.797
> 
> 标签：php, character-encoding, file-get-contents

我正在尽力描述我的问题。对于客户端 PC，我正在读取文件（通过 ::ReadFile）并将其上传到 PHP 服务器（HTTP 上传）。我通过以下文件代码在该 PHP 中接收此字符串并保存在硬盘中：

```
<?php
// body contains sent data here
    $body = file_get_contents('php://input',FILE_TEXT);
    echo "<script language= 'JavaScript'>alert(' . $body . ');</script>";
        $today = date("dmY-Gis");
        $name = $today . ".log";
        //$body = utf8_encode($body);
        //$body = "\xEF\xBB\xBF".$body;
        $f = fopen($name, "wb");
        fwrite($f, $body);
        fclose($f);
php?> 
```

现在，我有一个字符串发送如下：выфпвыфп Notepad

但是这个 PHP 脚本将它保存为 ?????????? 记事本

似乎正确捕获了英文字符串，但未收集非英文字符串

任何人都可以有想法。

*   [file_get_contents 不适用于 utf8](https://stackoverflow.com/questions/4917714/file-get-contents-not-working-with-utf8?rq=1)
*   [php: file_get_contents 编码问题](https://stackoverflow.com/questions/713293/php-file-get-contents-encoding-problem)

以上两个是同样的问题，但没有一个给出任何对我有用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:48:22.970

**添加这个**

```
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251"> 
```

**到你的页面**

# javascript - Javascript Require.js 依赖项

> ID：15362101
> 
> 赞同：2
> 
> 时间：2013-03-12T13:06:15.233
> 
> 标签：javascript, dependencies, requirejs

如果我有 2 个 .js 文件（A.js、B.js）并且每个文件都有自己的依赖项。

A 依赖于：C.js、D.js、E.js B 依赖于：C.js、F.js、G.js

A 和 B 将 C 作为公共依赖项。如果 A 和 B 都加载了 Require.js，C.js 会加载两次吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:09:00.557

C.js 只会被加载一次，只要它在 A.js 和 B.js 中使用相同的名称加载。

您可以做的另一件有用的事情如下：

```
 require.config({
     "paths": {
         "C": "/somewhere/js/C-v1.0.0.js"
         }
     }); 
```

如果您随后需要 A 和 B，则在 A 和 B 中，您可以：

```
 require(["C"], function(C) {
 } 
```

这样，如果 C 的位置或版本发生变化，您只需在一个地方进行更改。

# c++ - 找到尽可能多的 2 的平方根的位数

> ID：15362117
> 
> 赞同：3
> 
> 时间：2013-03-12T13:06:46.233
> 
> 标签：c++, sqrt

```
#include <iostream>
#include <cmath>

using namespace std;

int main()
{
 double a = sqrt(2);
 cout << a << endl;
} 
```

嗨，这是查找 2 的 sqrt 的程序，它在输出中仅打印 1.41421 如何实现它以使其在小数点后打印 200000 位

> 1.41421.............最多 200 000 位

有没有这样的打印方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:57:34.237

[可以](http://numbers.computation.free.fr/Constants/Sqrt2/sqrt2.html)证明

```
sqrt(2) = (239/169)*1/sqrt(1-1/57122) 
```

并且 1/sqrt(1-1/57122) 可以使用泰勒级数展开有效地计算：

```
1/sqrt(1-x) = 1 + (1/2)x + (1.3)/(2.4)x^2 + (1.3.5)/(2.4.6)x^3 + ... 
```

[还有一个可用的 C 程序使用这种方法](http://numbers.computation.free.fr/Constants/Programs/programs.html)（我稍微重新格式化并更正了它）：

```
/*
** Pascal Sebah : July 1999
**
** Subject:
**
**    A very easy program to compute sqrt(2) with many digits.
**    No optimisations, no tricks, just a basic program to learn how
**    to compute in multiprecision.
**
** Formula:
**
**    sqrt(2) = (239/169)*1/sqrt(1-1/57122)
**
** Data:
**
**    A big real (or multiprecision real) is defined in base B as:
**      X = x(0) + x(1)/B^1 + ... + x(n-1)/B^(n-1)
**      where 0<=x(i)<B
**
** Results: (PentiumII, 450Mhz)
**
**    1000   decimals :   0.02seconds
**    10000  decimals :   1.7s
**    100000 decimals : 176.0s
**
** With a little work it's possible to reduce those computation
** times by a factor of 3 and more.
*/

#include <stdio.h>
#include <stdlib.h>

long B = 10000; /* Working base */
long LB = 4;    /* Log10(base)  */

/*
** Set the big real x to the small integer Integer
*/
void SetToInteger(long n, long* x, long Integer)
{
  long i;
  for (i = 1; i < n; i++)
    x[i] = 0;
  x[0] = Integer;
}

/*
** Is the big real x equal to zero ?
*/
long IsZero(long n, long* x)
{
  long i;
  for (i = 0; i < n; i++)
    if (x[i])
      return 0;
  return 1;
}

/*
** Addition of big reals : x += y
**  Like school addition with carry management
*/
void Add(long n, long* x, long* y)
{
  long carry = 0, i;
  for (i = n - 1; i >= 0; i--)
  {
    x[i] += y[i] + carry;
    if (x[i] < B)
      carry = 0;
    else
    {
      carry = 1;
      x[i] -= B;
    }
  }
}

/*
** Multiplication of the big real x by the integer q
*/
void Mul(long n, long* x, long q)
{
  long carry = 0, xi, i;
  for (i = n - 1; i >= 0; i--)
  {
    xi = x[i] * q;
    xi += carry;
    if (xi >= B)
    {
      carry = xi / B;
      xi -= carry * B;
    }
    else
      carry = 0;
    x[i] = xi;
  }
}

/*
** Division of the big real x by the integer d
**  Like school division with carry management
*/
void Div(long n, long* x, long d)
{
  long carry = 0, xi, q, i;
  for (i = 0; i < n; i++)
  {
    xi    = x[i] + carry * B;
    q     = xi / d;
    carry = xi - q * d;
    x[i]  = q;
  }  
}

/*
** Print the big real x
*/
void Print(long n, long* x)
{
  long i;
  printf("%ld.", x[0]);
  for (i = 1; i < n; i++)
    printf("%04ld", x[i]);
  printf("\n");
}

/*
** Computation of the constant sqrt(2)
*/
int main(void)
{
  long NbDigits = 200000, size = 1 + NbDigits / LB;
  long* r2 = malloc(size * sizeof(long));
  long* uk = malloc(size * sizeof(long));
  long k = 1;
  /*
  ** Formula used:
  **    sqrt(2) = (239/169)*1/sqrt(1-1/57122)
  ** and
  **   1/sqrt(1-x) = 1+(1/2)x+(1.3)/(2.4)x^2+(1.3.5)/(2.4.6)x^3+...
  */
  SetToInteger(size, r2, 1); /* r2 = 1 */
  SetToInteger(size, uk, 1); /* uk = 1 */
  while (!IsZero(size, uk))
  {
    Div(size, uk, 57122); /* uk = u(k-1)/57122 * (2k-1)/(2k) */
    Div(size, uk, 2 * k);
    Mul(size, uk, 2 * k - 1);
    Add(size, r2, uk);    /* r2 = r2+uk */
    k++;
  }
  Mul(size, r2, 239);
  Div(size, r2, 169);  /* r2 = (239/169)*r2 */

  Print(size, r2);     /* Print out of sqrt(2) */

  free(r2);
  free(uk);

  return 0;
} 
```

计算 200,000 位的 sqrt(2) 大约需要一分钟。

但是请注意，由于累积的舍入误差，在 200,000 位生成的最后 11 位是不正确的，如果您想要 200,000 个正确的数字，则需要运行 200,012 位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T13:52:51.053

这是您使用 GNU GMP 库的问题的代码。该代码将打印 1000 位 sqrt(2)，增加注释行中的数字以满足您的要求。

```
#include <stdio.h>
#include <gmp.h>

int main(int argc, char *argv[])
{
  mpf_t res,two;
  mpf_set_default_prec(1000000); // Increase this number.
  mpf_init(res);
  mpf_init(two);
  mpf_set_str(two, "2", 10);
  mpf_sqrt (res, two); 
  gmp_printf("%.1000Ff\n\n", res); // increase this number.
  return 0;
} 
```

请使用以下命令编译它：

```
$gcc gmp.c  -lgmp -lm -O0 -g3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-05T19:44:12.930

这是一个使用古老的 Prolog 编程语言在不到一分钟的时间内计算出 100 万位 sqrt(2) 的解决方案。它基于求解 pell 方程，另请参见[此处](https://math.stackexchange.com/q/2045083/4414)：

```
p*p+1 = 2*q*q 
```

递归关系 p′=3p+4q 和 q′=2p+3q 可以转换为矩阵乘法。即我们看到，如果我们将向量 [p,q] 乘以系数矩阵，我们得到向量 [p',q']：

```
| p' |    | 3  4 |   | p |
|    | =  |      | * |   |
| q' |    | 2  3 |   | q | 
```

对于矩阵 A，我们可以使用二进制递归，以便我们可以在 O(log n) 操作中计算 A^n。我们需要大量的数字。我在[这里](https://gist.github.com/jburse/b79e21447eda6843daadf52942026eff#file-matrice-p)使用这个实验代码，因此主程序很简单：

```
/**
  * pell(N, R):
  * Compute the N-the solution to p*p+1=2*q*q via matrices and return
  * p/q in decimal format in R.
  */
pell(N, R) :-
   X is [[3,4],[2,3]],
   Y is X^N,
   Z is Y*[[1],[1]],
   R is Z[1,1]*10^N//Z[2,1]. 
```

以下屏幕截图显示了时间和一些结果。我使用了 10 次百万次迭代。[可以在此处](http://apod.nasa.gov/htmltest/gifcity/sqrt2.10mil)将结果与此页面进行比较。

[![在此处输入图像描述](../Images/226acfa0b044f0e63454b1a121c0d87c.png)](https://i.stack.imgur.com/iRR5H.gif)

缺少的仍然是一个明确的标准和计算，说明有多少位数是稳定的。我们将需要更多时间来做到这一点。

**编辑 20.12.2016：**
我们通过相对误差的上限稍微改进了代码，并通过轻推结果进一步计算稳定数字。100 万位的计算时间现在低于 2 秒：

```
?- time(pell(653124, _, S)).
% Uptime 1,646 ms, GC Time 30 ms, Thread Cpu Time 1,640 ms
S = -1000000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:12:18.830

就双重算术的精度而言，您给出的示例是准确的，这是大多数 C++ 编译器使用的最高精度。一般来说，计算机没有工具来进行更高精度的计算。如果这是某种家庭作业，那么我怀疑您需要找出一种计算算法-您需要以某种方式保留自己的*数字数组以保持所需的所有精度。*如果您有一些实际应用程序，您绝对应该使用专门用于执行此类算术的高精度库（GMP 是一个很好的开源可能性） - 这是一个不需要重新发明的复杂轮子。

# c++ - 如何在 ubuntu 12.04 上安装 qwtpolar 库？

> ID：15362121
> 
> 赞同：0
> 
> 时间：2013-03-12T13:06:57.487
> 
> 标签：c++, qt, makefile, qwt

我正在尝试在我的 ubuntu 12.04 上安装最新版本的 qwtpolar。之前，我已经从 ubuntu 存储库安装了 Qt4 开发库、Qtcreator 和 Qwt-dev。一切都很好。

但现在我需要使用极坐标图。不幸的是，这个库没有 deb 包。所以我必须编译这个。下载源后按照说明进行操作： `qmake-qt4`，`make`我得到了这个：

`qwt_polar_fitter.h:13:30: fatal error: qwt_curve_fitter.h: No such file or directory`

`qwt_curve_fitter.h`位于`/usr/include/qwt`目录中

如何配置`make`或`qmake-qt4`在该目录中查找文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:45:51.890

好的。

我设法安装了 qwtpolar 并向 qtcreator 添加了一个插件。适用于我的 Ubuntu 12.04 的完整步骤：

1) 首先我们需要安装 qt4 或更高版本的开发库、qtcreator、qwt 开发库。

2) 从 svn 下载源代码（不是存档文件，而是 svn！）并按照 README 中的步骤操作（qmake & make & make install）

3) 要将 qwtplugin 添加到 qtdesigner，您需要执行以下操作（将 xxx 替换为 qwtpolar 版本）：

`sudo ln -s /usr/local/qwtpolar-x.x.x/features/qwtpolar.prf /usr/share/qt4/mkspecs/features/`

`sudo ln -s /usr/local/qwtpolar-x.x.x/features/qwtpolarconfig.pri /usr/share/qt4/mkspecs/features/`

`sudo ln -s /usr/local/qwtpolar-x.x.x/lib/libqwtpolar.so /usr/lib/`

`sudo ln -s /usr/local/qwtpolar-x.x.x/lib/libqwtpolar.so.1 /usr/lib/`

`sudo ln -s /usr/local/qwtpolar-x.x.x/lib/libqwtpolar.so.1.0 /usr/lib/`

`sudo ln -s /usr/local/qwtpolar-x.x.x/lib/libqwtpolar.so.1.0.0 /usr/lib/`

`sudo cp /usr/local/qwtpolar-x.x.x/plugins/designer/libqwt_polar_designer_plugin.so /usr/lib/x86_64-linux-gnu/qt4/plugins/designer/`

4）运行qtdesigner，瞧！有一个新的 QwtPolarPlot 选项卡。

5) 要使用 qtpolarplot 运行 qt 应用程序，您只需在 *.pro 文件中添加 2 行：

`INCLUDEPATH += /usr/local/qwtpolar-1.0.0-svn/include`

`unix|win32: LIBS += -lqwtpolar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:56:31.593

您是否考虑将 /usr/include/qwt 作为包含目录添加到相应的项目（qmake）文件中？或者，您也可以尝试将目录添加到路径环境（只是暂时）：

```
export OLD_PATH=$PATH
export PATH=/usr/include/qwt:$PATH
# build your project
# ...
# reset PATH
export PATH=$OLD_PATH 
```

请注意，这两种解决方案都是快速而肮脏的，但可能会让您重新运行

# android - 更改 AlertDialog 消息的字体大小

> ID：15362122
> 
> 赞同：10
> 
> 时间：2013-03-12T13:07:04.330
> 
> 标签：android, fonts, android-ui, android-alertdialog

我正在尝试更改`AlertDialog`消息的字体大小。

```
Button submit = (Button) findViewById(R.id.submitButton);
submit.setOnClickListener(new View.OnClickListener() {

    public void onClick(View view) {
        AlertDialog.Builder builder = new AlertDialog.Builder(
                Application1GoodExample.this);
        builder.setMessage("Your form has been successfully submitted");
        TextView textView = (TextView) findViewById(android.R.id.message);
        textView.setTextSize(40);
        builder.setNegativeButton("Exit", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();             
            }
        });

        builder.show();
    }
}); 
```

我收到一条错误消息，指出 " `findViewById()`" 类型未定义`AlertDialog.Builder`。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-12T13:16:56.403

用这个 ：

```
AlertDialog alert = builder.create();
alert.show();

TextView msgTxt = (TextView) alert.findViewById(android.R.id.message);   
msgTxt.setTextSize(16.0); 
```

在你的情况下：

```
Button submit = (Button) findViewById(R.id.submitButton);

submit.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        AlertDialog.Builder builder = new AlertDialog.Builder(Application1GoodExample.this);

        builder.setMessage("Your form has been successfully submitted");
        builder.setNegativeButton("Exit", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();             
            }
        });

        // this will solve your error
        AlertDialog alert = builder.create();
        alert.show();
        alert.getWindow().getAttributes();

        TextView textView = (TextView) alert.findViewById(android.R.id.message);
        textView.setTextSize(40);
        Button btn1 = alert.getButton(DialogInterface.BUTTON_NEGATIVE);
        btn1.setTextSize(16);
    }
}); 
```

如果这对您没有帮助，请在您的问题中发布您的 LogCat 错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T13:54:06.313

试试这个

```
 AlertDialog dialog = new AlertDialog.Builder(this).setMessage("Hello world").show();
 TextView textView = (TextView) dialog.findViewById(android.R.id.message);
 textView.setTextSize(40); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:11:22.337

findViewById 方法属于 View 类型。

```
AlertDialog.Builder builder = new AlertDialog.Builder(Application1GoodExample.this);
builder.setNegativeButton("Exit", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
    dialog.cancel();           
    } 
});
builder.setMessage("Your form has been successfully submitted");
AlertDialog theDialog=builder.create();
TextView textView = (TextView) theDialog.findViewById(android.R.id.message);
textView.setTextSize(40);

theDialog.show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:09:16.173

由于您没有使用 CustomDialog，我建议您添加 TextView 如下，

```
TextView textView = (TextView) findViewById(android.R.id.message); // remove builder object 
```

# iphone - 推特 API 1.1 更新

> ID：15362126
> 
> 赞同：0
> 
> 时间：2013-03-12T13:07:11.973
> 
> 标签：iphone, ios, objective-c, twitter

我当前的代码：

```
SLRequest *req = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                        requestMethod:SLRequestMethodGET
                                                  URL:[NSURL URLWithString:@"http://api.twitter.com/1.1/statuses/user_timeline.json"]
                                           parameters:[NSDictionary
                                                       dictionaryWithObjects:@[user]
                                                       forKeys:@[@"screen_name"]]];
    [req performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if (urlResponse.statusCode == 200){
            id object = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
            completionBlock(object);
        }else {
            if (error == nil)
                error = [API errorWithStatusCode:urlResponse.statusCode];
            errorBlock(error);
        }
    }]; 
```

我确实在 dev.twitter.com 上创建了一个应用程序，但我不知道如何实现从 Twitter 获得的令牌。如何在用户不询问其 Twitter 帐户的情况下更新到 1.1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T11:42:53.240

您需要根据`authenticate`您的请求来获取用户时间线，请参阅此[答案](https://stackoverflow.com/questions/17207317/ios-how-to-fetch-tweet-from-twitter-api-1-1/17207745#17207745)， 该答案`FHSTwitterEngine`用于`authenticate`请求，然后创建搜索查询，您可以获得`user_timeline`而不是搜索查询。

希望对你有帮助^_^

# javascript - PassportJs，找不到本地策略

> ID：15362135
> 
> 赞同：2
> 
> 时间：2013-03-12T13:07:25.367
> 
> 标签：javascript, node.js

我是 javascript 和节点的新手。我遵循了 passportJS 的指南，我收到错误“找不到本地策略”。我不知道为什么。我的代码，此时基本上取自网站。

```
var express = require('express')
, routes = require('./routes')
, user = require('./routes/user')
, http = require('http')
, path = require('path')
, mongoose = require('mongoose')
, passport = require('passport')
, LocalStrategy = require('passport-local').Strategy;

app.use(passport.initialize());

//to configure the passport
app.use(new LocalStrategy({
usernameField: 'username',
passwordField: 'password'
},
function(username, password, done){
    console.log(username);
    console.log(password);
    People.findOne({username:username},
    function(err, user){
        if(err){return done(err); }
        if(!user){
            return done(null, false, {message:
            'Incorrect username'});
        }
        if(!user.validPassword(password)){
            return done(null, false, {message:
            'Incorrect Password'});
        }
        return done(null, user);
    });
}
));

//route to authenticate the user
app.post('/login',
passport.authenticate('local', { successRedirect:'/accessed',
                                failureRedirect: '/access'})
); 
```

我的错误是“找不到本地策略”，我查看了本地策略模块并找到了定义它的函数。所以我认为错误存在于我试图访问该变量的方式中。

我的服务器设置为

```
var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(passport.initialize());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

  app.configure('development', function(){
 app.use(express.errorHandler());
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T13:40:48.817

这是使用本地护照的样板。配置中间件的顺序很重要。它还实现了您的代码中似乎缺少的 serializeUser/deserializeUser。

```
var express = require('express')
, http = require('http')
, path = require('path')
, passport = require('passport')
, LocalStrategy = require('passport-local').Strategy;

var app = express();

passport.use(new LocalStrategy(function(username, password, done) { 
  // insert your MongoDB check here. For now, just a simple hardcoded check.
  if (username === 'foo' && password === 'bar')
  {
    done(null, { user: username });
  }
  else
  {
    done(null, false);
  }
}));

passport.serializeUser(function(user, done) { 
  // please read the Passport documentation on how to implement this. We're now
  // just serializing the entire 'user' object. It would be more sane to serialize
  // just the unique user-id, so you can retrieve the user object from the database
  // in .deserializeUser().
  done(null, user);
});

passport.deserializeUser(function(user, done) { 
  // Again, read the documentation.
  done(null, user);
});

app.use(express.bodyParser());
app.use(express.cookieParser());
app.use(express.session({ secret: 'secret' }));
app.use(passport.initialize());
app.use(passport.session());

// route to authenticate the user
app.post('/login', passport.authenticate('local', { 
  successRedirect: '/accessed',
  failureRedirect: '/access'
}));

// app.listen(3012); 
```

当您使用时`curl -v -d "username=foo&password=bar" http://127.0.0.1:3012/login`，您会看到您将被重定向到`/accessed`，这意味着身份验证有效。

# android - 替换片段时遇到 setCustomAnimations() 问题

> ID：15362137
> 
> 赞同：0
> 
> 时间：2013-03-12T13:07:34.717
> 
> 标签：android, android-fragments, android-animation, android-fragmentactivity, android-framework

我有 2 个片段 A 和 B。我将片段 B 替换为 A，并设置`setCustomAnimations(right_to_left, fadein, fadeout, left_to_right)`. 片段 B 的行为正确，就像它从右到左一样，按下`Back`按钮并弹出堆栈，它从左到右离开。但是片段 A 没有动画发生，它不会淡入和淡出。

*注意*：我已经尝试过创建示例应用程序，它工作得很好，但是当我在我的项目中实现相同的东西时，它的行为与上面一样。在我的项目中实施时我犯了什么错误`setCustomAnimation()`？

我已经尝试过：

1.  拥有最新的支持库
2.  `hardwareAccelarated="true"`在清单文件中
3.  在方法`setCustomAnimation()`之前添加`replace()`
4.  用3.0以上编译

我怀疑我的应用程序所基于的框架可能存在问题，但不确定。任何人都可以让我知道我还能检查什么以使其正常工作吗？

# jquery - 页面加载时的垂直 jquery megamenu 插件子菜单

> ID：15362139
> 
> 赞同：0
> 
> 时间：2013-03-12T13:07:35.343
> 
> 标签：jquery, css, menu, megamenu

我正在使用来自[http://www.designchemical.com](http://www.designchemical.com)的 jquery Vertical Mega 菜单， 当我的页面加载它时，它首先显示所有菜单（包括子菜单）一瞬间呈现，然后子菜单消失，看起来像一个普通的垂直菜单。

我尝试使用为水平巨型菜单提供的以下解决方案，但这不起作用......

```
#mega-1 li ul {
    display: none;
}

#mega-1 .sub ul {
    display: block;
} 
```

请建议如何使它工作

html代码

```
<ul id="mega-1" class="mega-menu">
    <li><a href="#">Menu Item A</a>
        <ul>
            <li><a href="#">Sub-Header 1</a>
                <ul>
                    <li><a href="#">Menu Link</a></li>
                    <li><a href="#">Menu Link</a></li>
                    <li><a href="#">Menu Link</a></li>
                </ul>
            </li>
            <li><a href="#">Sub-Header 2</a>
                <ul>
                    <li><a href="#">Menu Link</a></li>
                    <li><a href="#">Menu Link</a></li>
                    <li><a href="#">Menu Link</a></li>
                </ul>
            </li>
            <li><a href="#">Sub-Header 3</a>
                <ul>
                    <li><a href="#">Menu Link</a></li>
                    <li><a href="#">Menu Link</a></li>
                    <li><a href="#">Menu Link</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:50:10.197

*如果没有看到要调试的页面，很难确定 100%，但我会想象以下......*

为避免任何内容跳转，请确保使用 CSS 隐藏嵌套的 UL，并且不依赖 JavaScript 来隐藏子菜单。如果您使用的是 Firebug 或 Chrome，请在禁用 JavaScript 时检查代码，以确保没有样式覆盖您的 display:none; 在菜单项 A 正下方的第一个 UL 上。

此外，如果 的目的`#menu .sub ul { display: block; }`是让您的第二级嵌套 UL 保留为块元素，则您缺少其 LI 父级的 .sub 类，因此将 .sub 类添加到您的子标题 LI。

# php - 读取字符串中文件的字节

> ID：15362142
> 
> 赞同：0
> 
> 时间：2013-03-12T13:07:42.260
> 
> 标签：php, android

简单的理论问题：

要使用 Php 将文件上传到服务器，我选择了这种机制（如果可能）：

读取文件的字节，将其作为简单文本放入字符串中，然后将其作为简单文本消息（$_REQUEST）发布到服务器，然后将此“文本”写入服务器上的新文件，

所以我的问题是：

我如何读取文件的字节并将其作为简单文本“原样”存储在 String/StringBuilder 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:23:17.083

你可以使用`file_get_contents`它的二进制安全。

```
$binaryContent = file_get_contents('path/to/file'); 
```

如果您在发送内容时遇到问题而不是对其进行编码：

```
$binaryContent = base64_encode($binaryContent); 
```

但我会使用 curl 上传文件：

来自 php.net [http://www.php.net/manual/de/function.curl-setopt.php](http://www.php.net/manual/de/function.curl-setopt.php)

```
/* http://localhost/upload.php:
print_r($_POST);
print_r($_FILES);
*/

$ch = curl_init();

$data = array('name' => 'Foo', 'file' => '@/home/user/test.png');

curl_setopt($ch, CURLOPT_URL, 'http://localhost/upload.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

curl_exec($ch); 
```

# android - Android LayerDrawable.setDrawableByLayerId 不适用于 HTC Sensation（和其他？）

> ID：15362144
> 
> 赞同：3
> 
> 时间：2013-03-12T13:07:49.990
> 
> 标签：android, drawable

我正在使用 LayerDrawable 在底层图像（索引 0）上建立一系列热点（索引 1+）。热点是基于用户界面交互添加的，它们的位置是动态的，所以我以编程方式完成所有这些工作，而不是使用 XML。作为进一步的（可能不相关的）细节，我使用 Fragment 来保存 LayerDrawable，因为这是在 FragmentStatePagerAdapter 和 ViewPager 的上下文中。

问题是当我尝试通过调用setDrawableByLayerId更改LayerDrawable中的Drawable来更新图像时，图像不会改变（尽管方法返回true，表明它找到了图层）。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:01:43.950

在这里回答我自己的问题，希望它对那里的人有用。我可以让它在我的 HTC Sensation 上工作的唯一方法是从头开始重新创建 LayerDrawable，加上更改：

```
LayerDrawable oldLayerDrawable = (LayerDrawable) imageView.getDrawable();
Drawable[] layers = new Drawable[2];
layers[0] = oldLayerDrawable.getDrawable(0);
layers[1] = getResources().getDrawable(R.drawable.hotspot_dot);
LayerDrawable layerDrawable = new LayerDrawable(layers);
imageView.setImageDrawable(layerDrawable); 
```

它并不漂亮，但似乎这可能是一个已知问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T08:48:09.410

```
newdrawable.setBounds(mLayerDrawable.findDrawableByLayerId(R.id.image_source).getBounds());
        mLayerDrawable.setDrawableByLayerId(R.id.image_source, drawable);        
        mLayerDrawable.invalidateSelf(); 
```

参考： [https ://github.com/ytRino/LayerDrawableSample/blob/master/src/net/nessness/android/sample/layerdrawable/LayerDrawableSampleActivity.java](https://github.com/ytRino/LayerDrawableSample/blob/master/src/net/nessness/android/sample/layerdrawable/LayerDrawableSampleActivity.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-14T12:55:06.597

问题是“index”和“id”是不同的属性。默认情况下，任何层的 layerId 总是等于-1。但是您可以通过调用显式设置它`setId(index, id)`，然后调用`setDrawableByLayerId(id, Drawable)`

# c# - 如何在 Nemerle 中创建 .NET 4 C# 类实例？

> ID：15362146
> 
> 赞同：1
> 
> 时间：2013-03-12T13:07:53.590
> 
> 标签：c#, .net-4.0, nemerle

如何在 Nemerle 中创建 .NET 4 C# 类实例，例如简单的 System.Object（或来自 .DLL 的 mofe 复杂类）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:19:44.920

与 C# 中的相同，但没有`new`关键字。只要确保您使用的是 .NET 4.0 版本的 Nemerle。有关更多信息，请参阅 wiki：[https](https://github.com/rsdn/nemerle/wiki) ://github.com/rsdn/nemerle/wiki 。

# python - 如何在 sqlachemy 中使用别名

> ID：15362149
> 
> 赞同：3
> 
> 时间：2013-03-12T13:07:58.407
> 
> 标签：python, sqlalchemy

我有一个sql查询如下

```
select cloumn1,column2,count(column1) as c 
from Table1 where user_id='xxxxx' and timestamp > xxxxxx
group by cloumn1,column2
order by  c desc limit 1; 
```

我成功编写了 sqlalchemy 等价物

```
result = session.query(Table1.field1,Table1.field2,func.count(Table1.field1)).filter(
    Table1.user_id == self.user_id).filter(Table1.timestamp > self.from_ts).group_by(
    Table1.field1,Travelog.field2).order_by(desc(func.count(Table1.field1))).first() 
```

但我想避免`func.count(Table1.field1)`在`order_by`子句中使用。

如何在 sqlalchemy 中使用别名？任何人都可以举出任何例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:48:56.017

别名用于表格；查询中的列被赋予一个标签。这也时不时让我绊倒。

你可以通过这两种方式。`func.count()`首先将结果存储为局部变量并重用它就足够了：

```
field1_count = func.count(Table1.field1)

result = session.query(Table1.field1, Table1.field2, field1_count).filter(
    Table1.user_id == self.user_id).filter(Table1.timestamp > self.from_ts).group_by(
    Table1.field1, Travelog.field2).order_by(desc(field1_count)).first() 
```

生成的 SQL 仍然与您自己的代码生成的 SQL 相同，但至少您不必输入`func.count()`两次调用。

要给这个列一个明确的标签，调用它的[`.label()`方法](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.ColumnElement.label)：

```
field1_count = func.count(Table1.field1).label('c') 
```

然后您可以在子句中使用相同的标签*字符串：*`order_by`

```
result = session.query(Table1.field1, Table1.field2, field1_count).filter(
    Table1.user_id == self.user_id).filter(Table1.timestamp > self.from_ts).group_by(
    Table1.field1, Travelog.field2).order_by(desc('c')).first() 
```

或者您可以使用以下`field1_count.name`属性：

```
result = session.query(Table1.field1, Table1.field2, field1_count).filter(
    Table1.user_id == self.user_id).filter(Table1.timestamp > self.from_ts).group_by(
    Table1.field1, Travelog.field2).order_by(desc(field1_count.name)).first() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T16:56:08.073

也可以使用[c](http://docs.sqlalchemy.org/en/latest/core/selectable.html#sqlalchemy.sql.expression.Join.c)，它是列属性的别名，但在这种情况下，标签将按说明正常工作。

还会指出过滤器不需要多次使用可以通过逗号分隔的标准。

```
result = (session.query(Table1.field1, Table1.field2,
          func.count(Table1.field1).label('total'))
         .filter(Table1.c.user_id == self.user_id, Table1.timestamp > self.from_ts)
         .group_by(Table1.field1,Table1.field2)
         .order_by(desc('total')).first()) 
```

# javascript - 使用 JavaScript 的 keydown

> ID：15362150
> 
> 赞同：0
> 
> 时间：2013-03-12T13:07:59.790
> 
> 标签：javascript, jquery, keydown

我不确定如何使用纯 JavaScript 执行“keydown”。

这是我用 jQuery 做的，但是有没有办法用纯 JS 做同样的事情呢？我只是想检查是否有办法并学习如何去做，以及查看代码的差异和长度。谢谢你。

```
$('body').on('keydown', function(e) {
    if (e.keyCode === 27) return false;
}); 
```

编辑：它用于禁用“Esc”按钮！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:13:55.397

我不喜欢将侦听器设置为属性，所以我什至添加了这样的侦听器：

```
var ele = document.getElementById('test');
ele.addEventListener('keydown', function() {
    //code
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:11:12.233

干得好

```
document.body.onkeydown = function(e) {
    if (e.keyCode === 27) return false;
} 
```

如您所见，jQuery 更短，但这将执行更少的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:18:12.040

在纯 javascript 中，它是通过这种方式完成的

```
document.body.onkeydown=function(e){
  key=e.keyCode || e.charCode|| e.which; //cross browser complications
  if(key===27){
    return false;
  }
} 
```

希望它有所帮助，它与您提供的 JQuery 脚本相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:15:22.267

尝试这个，

**HTML**

```
<body onkeydown="YourFunction(event)">...</body> 
```

**JS**

```
function YourFunction(e)
{
     var unicode=e.keyCode || e.charCode|| e.which;
     if(unicode == 27)
        return false;
     else
     {
        //Your code...
     } 
} 
```

# java - 优化 MySQL 阅读模式

> ID：15362153
> 
> 赞同：3
> 
> 时间：2013-03-12T13:08:16.067
> 
> 标签：java, mysql, algorithm, jdbc

我有一个带有过滤行 ID 的整数集合，我试图在其中搜索序列/范围以优化 MySQL 选择查询。给你举个例子：

Integer-Collection 可以非常分散：

```
[1,2,88,101,200] = Sequence(1-2,88,101,200) 
```

或者非常完全：

```
[1,2,3,4,..,198,199,200] = Sequence(1-200) 
```

是否有任何 Java 算法可以在集合中查找序列或总体上改进我的阅读模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:21:07.577

你的收藏品有多长？除非您有数百万个项目，否则将集合完全加载到内存中、对其进行排序然后扫描范围可能是最快的。

在排序列表中，查找范围是微不足道的。只需依次扫描即可；如果下一个元素不是前一个元素 + 1，则一个范围刚刚结束，另一个范围开始。

# objective-c - 为什么 Cocoa 的 IBOutlet 属性默认是原子的，而 Cocoa Touch 的却不是？

> ID：15362157
> 
> 赞同：24
> 
> 时间：2013-03-12T13:08:37.600
> 
> 标签：objective-c, xcode, cocoa-touch, cocoa

如果你从 Interface Builder 拖一个新的 outlet 到一个接口（头）文件，Xcode 4.6 会自动为你创建一个属性...

在 iOS (Cocoa Touch) 上，它看起来像这样：

```
@property (weak, nonatomic) SomeClass *someProperty; //nonatomic accessors 
```

而在 OS X (Cocoa) 上它看起来像这样：

```
@property (weak) SomeClass *someProperty; //atomic accessors (implicitly) 
```

为什么？

**编辑**：我不是在问 atomic 做什么或不做什么，我很清楚同步指令和保证 setter 和 getter 原子性的底层互斥锁（或锁或其他）。我知道在 iOS 上，访问器是非原子的，因为 UIKit 不是线程安全的，因此使它们成为原子没有任何好处，这只是浪费处理器时间和电池寿命。我在这里谈论的是默认情况，知道自己在做什么的程序员会知道何时需要使访问器原子化。

所以我问为什么它们在 OS X 上默认是原子的。我的印象是 Appkit 也不是线程安全的。并且拥有原子访问器并不能保证线程安全，我什至可以说它是相反的，因为它可以给新手程序员带来线程安全的错觉，并通过延迟崩溃使并发应用程序中的错误跟踪更加困难到以后的时间，这样做使它们更难追踪。并且仅仅因为台式机相对强大并不意味着资源应该被浪费（注意我这里不是在谈论过早的优化），而且既然苹果工程师是合理的程序员，那么他们必须有一个很好的理由。决定让属性默认合成原子访问器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T13:40:15.867

在这种情况下，`atomic`说明符告诉编译器应该综合设置器和访问器，以便安全地从多个线程调用。这通过要求方法在可以写入或读取属性值之前取出锁而增加了少量开销。

由于 UIKit 和 Cocoa 的用户界面元素只打算从主线程访问，因此不需要额外的锁。使属性原子化的开销非常小，但在 iOS 更受限制的环境中，每一盎司的速度都是有价值的。因此，为什么 iOS 默认使用`nonatomic`IB Outlets 属性。

**针对您的扩展问题进行了编辑：**我的感觉是使用原子属性的成本值得在 Mac 上花费。有一种说法是使用原子属性掩盖了一系列错误，因此是一件坏事。我认为，从用户的角度来看，Apple 应该设置默认值，这样即使是编码错误的应用程序也会更少崩溃。它让高级程序员有责任知道何时可以安全地使用非原子属性来换取性能优势。

当时没有听到团队中某人的消息，我们只能推测他们的思维过程，但我相信这是一个经过深思熟虑的决定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T13:48:06.073

简单得要命：原子通过其隐式互斥机制导致开销（在 OSX 上可以忽略不计）。

iOS（作为 ARM 芯片上的嵌入式系统）无法承受这种开销，因此 IBOutlets 默认为非原子。

一言以蔽之：**性能**。

**至于为什么它们在 OSX 上默认为原子，属性上的线程安全是在像 OSX 这样的大规模**多线程、多应用程序环境中拥有的一件好事（特别是与 iOS 相比，应用程序更有可能在OSX 比 iOS 上）。

如前所述，OSX 上的开销真的可以忽略不计，因此他们默认它是这样的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T13:37:15.153

在这个问题中，关于原子属性与非原子属性的争论相当冗长：原子属性[和非原子属性之间有什么区别？](https://stackoverflow.com/questions/588866/atomic-vs-nonatomic-properties)我敢打赌，这与通常在 OSX 应用程序与 iOS 应用程序中发现的界面的相对复杂性有关。让 OSX 应用程序一直在多个线程上运行是相当普遍的。因此，这些接口有助于在多线程环境中更普遍地运行。在 iOS 中，虽然随着系统的成熟，应用程序肯定会变得越来越复杂，但它们仍然运行在一个更基本的操作系统上，该操作系统目前更适合非线程环境。

还有一些关于非原子属性的讨论通常比原子属性具有更少的开销，并且通常在 iOS 设备中具有更小的 CPU 和更少的内存，除非需要额外的开销，否则将属性默认为非原子是有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:19:37.753

OSX 可以控制多线程，而且大部分应用程序都使用多线程。因此默认设置为原子。

而在 iOS 的情况下，你很少会使用多个线程，所以非原子为你服务。

# c# - 找不到类型或命名空间名称“WorkbookEngine”（您是否缺少 using 指令或程序集引用？）

> ID：15362174
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:09:05.897
> 
> 标签：c#, xml, xslt

我使用此代码片段从数据集创建一个 excel 表（我解析 .rtf 文件并获取数据集列表）。但是我的代码片段的第 3 行出现错误

> 错误：找不到类型或命名空间名称“WorkbookEngine”（您是否缺少 using 指令或程序集引用？）

```
XmlDataDocument xmlDataDoc = new XmlDataDocument(DS);
XslCompiledTransform xt = new XslCompiledTransform();
StreamReader reader = new StreamReader(typeof(WorkbookEngine).Assembly.GetManifestResourceStream(typeof(WorkbookEngine), "ValidationReport1.xls"));
XmlTextReader xRdr = new XmlTextReader(reader);
xt.Load(xRdr, null, null);

StringWriter sw = new StringWriter();
xt.Transform(xmlDataDoc, null, sw, null);

StreamWriter myWriter = new StreamWriter(System.Windows.Forms.Application.StartupPath + "\\Reports\\ValidationReport1.xls");
myWriter.Write(sw.ToString());
myWriter.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:19:35.597

您的项目尚未引用包含“WorkbookEngine”对象的命名空间。

在项目的顶部，您应该有一个 USING 行列表。为您的对象添加适当的行。

# javascript - 从 JSON 文件中读取点数组

> ID：15362177
> 
> 赞同：2
> 
> 时间：2013-03-12T13:09:11.167
> 
> 标签：javascript, jquery, json, three.js

我在从 JSON 文件中读取数据时遇到问题。我已经阅读了有关 Stack Overflow 和 JSON 文档的其他阅读 JSON 问题，但无济于事。

我正在尝试读取要在 Three.js 中显示的数据。以下代码段有效：

```
var obj = { "points" : [
{ "vertex":[0.0,0.0,0.0] },
{ "vertex":[200.0,0.0,0.0] },
{ "vertex":[-200.0,0.0,0.0] },
{ "vertex":[0.0,100.0,0.0] },
{ "vertex":[0.0,-100.0,0.0] },
{ "vertex":[0.0,0.0,300.0] },
{ "vertex":[0.0,0.0,-300.0] },
{ "vertex":[75.0,75.0,75.0] },
{ "vertex":[50.0,50.0,50.0] },
{ "vertex":[25.0,25.0,25.0] } ]};

var geometry = new THREE.Geometry();

for (var i=0;i<10;i++)
{
    var vertex = new THREE.Vector3();
    vertex.x = obj.points[i].vertex[0];
    vertex.y = obj.points[i].vertex[1];
    vertex.z = obj.points[i].vertex[2];
    geometry.vertices.push( vertex );
} 
```

它读取点，然后将点渲染到更远的位置。我在 index.html 旁边有一个名为

> 测试.json

它包含以下内容：

```
{ "points" : [
{ "vertex":[0.0,0.0,0.0] },
{ "vertex":[200.0,0.0,0.0] },
{ "vertex":[-200.0,0.0,0.0] },
{ "vertex":[0.0,100.0,0.0] },
{ "vertex":[0.0,-100.0,0.0] },
{ "vertex":[0.0,0.0,300.0] },
{ "vertex":[0.0,0.0,-300.0] },
{ "vertex":[75.0,75.0,75.0] },
{ "vertex":[50.0,50.0,50.0] },
{ "vertex":[25.0,25.0,25.0] } 
]} 
```

我的问题是以下不起作用（即不显示点）：

```
var geometry = new THREE.Geometry();

var obj2 = jQuery.getJSON('test.json');

for (var i=0;i<10;i++)
{
    var vertex = new THREE.Vector3();
    vertex.x = obj2.points[i].vertex[0];
    vertex.y = obj2.points[i].vertex[1];
    vertex.z = obj2.points[i].vertex[2];
    geometry.vertices.push( vertex );
} 
```

这些文件位于我的保管箱的公共文件夹中，并且可以从公共链接查看，即使如此，以防我使用 --allow-files-access-from-files 标志运行 chrome。

更新

我的主要错误是没有处理 getJSON 函数回调中的顶点。我的第二个错误是假设在回调中将顶点添加到几何堆栈就足够了。事实上，我必须从几何体创建对象并将其添加到场景中才能工作。非常感谢大家的帮助。

```
$.getJSON('test.json', function(obj2) {

    var geometry = new THREE.Geometry();

    for (var i=0;i<10;i++)
    {
        var vertex = new THREE.Vector3();
        vertex.x = obj2.points[i].vertex[0];
        vertex.y = obj2.points[i].vertex[1];
        vertex.z = obj2.points[i].vertex[2];
        geometry.vertices.push( vertex );
    }

    vc1 = geometry.vertices.length;

    object = new THREE.ParticleSystem( geometry, shaderMaterial );
    object.dynamic = true;

    var vertices = object.geometry.vertices;
    var values_size = attributes.size.value;
    var values_color = attributes.ca.value;

    for( var v = 0; v < vertices.length; v ++ ) {
    values_size[ v ] = 50;
    values_color[ v ] = new THREE.Color( 0xffffff );
    }

    scene.add( object );
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:12:19.627

阅读[getJSON](http://api.jquery.com/jQuery.getJSON/)的文档，这是一个异步调用！

您需要将 for 循环放入回调中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:16:25.343

我认为你应该这样做

```
$.getJSON('test.json', function(obj2) {
for (var i=0;i<10;i++)
{
var vertex = new THREE.Vector3();
vertex.x = obj2.points[i].vertex[0];
vertex.y = obj2.points[i].vertex[1];
vertex.z = obj2.points[i].vertex[2];
geometry.vertices.push( vertex );
}
}); 
```

Edit1 错字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:34:35.110

似乎是小错误。您可以执行以下操作：

1）检查你的html页面中是否引用了test.json？

2) 使用 firebug (console tab) 准确检查 getJson 方法返回的内容

# xml - 如何计算xquery中变量的幂？

> ID：15362178
> 
> 赞同：1
> 
> 时间：2013-03-12T13:09:13.167
> 
> 标签：xml, xslt, xquery

如果我需要计算一个值为 2^($blocksize) 的变量“totalIPaddress”，那么 xquery 语句将是什么？

```
<IPaddress>
<startIPaddress>192.168.1.1</startIPaddress>
<blocksize>4</blocksize>
</IPaddress> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:53:20.280

**这是计算幂的一种特别有效的方法——具有对数时间复杂度 (O(log(N))：**

```
declare function local:pow($x as xs:double , $n as xs:integer ) as xs:double
{
  if($n eq 0)
   then 1
   else
    (let $h := $n idiv 2,
         $halfResult := local:pow($x, $h)
      return
            if($n mod 2 eq 0)
              then $halfResult * $halfResult
              else $x * $halfResult * $halfResult
        )

};

local:pow(2,10) 
```

**产生预期的正确结果**：

```
1024 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:49:22.640

递归是你的朋友：

```
declare function f:two-to-the($n as xs:integer) as xs:integer {
  if ($n = 0) then 1 else 2 * f:two-to-the($n - 1)
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:13:01.053

除了 math:pow，最简单的方法就是硬编码：

```
(1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824, 2147483648, 4294967296)[$blocksize + 1] 
```

也适用于 XPath 2。

# python - 用于类的 Python repr

> ID：15362183
> 
> 赞同：5
> 
> 时间：2013-03-12T13:09:22.513
> 
> 标签：python

作为[关于状态的 Python 2 文档`__repr__`](http://docs.python.org/2/reference/datamodel.html#object.__repr__)：

> 如果可能的话， this (ie `__repr__`) 应该看起来像一个有效的 Python 表达式，*可用于重新创建具有相同值的对象*（给定适当的环境）。

那么为什么**内置`__repr__`的类**不符合该准则呢？

### 例子

```
>>> class A(object):
...   pass
>>> repr(A)
"<class 'A'>" 
```

为了符合准则，默认`__repr__`应该返回`"A"`，即一般`A.__name__`。为什么表现不一样？我相信这将非常容易实施。

* * *

### 编辑：“复制”的范围

我可以在答案中看到，在讨论中不清楚`repr`应该返回什么。在我看来，该`repr`函数应该返回一个允许您重现对象的字符串：

1.  *在任意上下文*和
2.  *自动*（即不是手动）。

**广告1。**看看一个内置的类案例（取自[这个 SO question](https://stackoverflow.com/questions/452300/python-object-repr-self-should-be-an-expression)）：

```
>>> from datetime import date
>>>
>>> repr(date.today())        # calls date.today().__repr__()
'datetime.date(2009, 1, 16)' 
```

显然，假设的上下文就好像您使用导入的基本形式，即`import datetime`，因为如果您尝试`eval(repr(date.today()))`，`datetime`将不会被识别。*所以重点是`__repr__`不需要**从头开始**表示对象。*如果它在社区同意的上下文中是明确的就足够了，例如使用直接模块的类型和功能。听起来很合理，对吧？

**广告 2。**`repr`我相信，仅仅给出一个物体如何被重建的印象是不够的。有助于调试是`str`.

### 结论

所以我期望的`repr`是允许我对`eval`结果做些什么。对于一个类，我不想获得从头开始重建类的整个代码。相反，我希望明确引用在我的范围内可见的类。`"Module.Class"`就足够了。没有冒犯，Python，但`"<class 'Module.Class'>"`不只是削减它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:31:51.693

考虑一个稍微复杂的类：

```
class B(object):
    def __init__(self):
        self.foo=3 
```

`repr`需要返回类似的东西

```
type("B", (object,), { "__init__": lambda self: setattr(self, "foo", 3) }) 
```

已经注意到一个困难：并非所有由`def`语句定义的函数都可以转换为单个`lambda`表达式。`B`稍作改动：

```
class B(object):
    def __init__(self, x=2, y, **kwargs):
        print "in B.__init__" 
```

你如何写一个定义的*表达式*`B.__init__`？你不能使用

```
lambda self: print "in B.__init__" 
```

因为`lambda`表达式不能包含语句。对于这个简单的类，编写一个完整定义该类的*表达式已经是不可能的了。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:12:57.187

因为默认`__repr__` *无法*知道创建类时使用了哪些语句。

您引用的文档以*If at all possible*开头。由于无法以允许您重新创建自定义类的方式表示自定义类，因此使用了不同的格式，该格式遵循所有不易重新创建的事物的默认值。

如果`repr(A)`只是返回`'A'`，那将毫无意义。你不是在重新创建`A`，你只是在引用它。`"type('A', (object,), {})"`会更接近于反映类构造函数，但这会 a) 让不熟悉 python 类是实例的人感到困惑，`type`并且 b) 永远无法准确地反映方法和属性。

将输出与的输出进行比较，`repr(type)`或者`repr(int)`相反，它们遵循相同的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-21T20:22:40.147

我知道这是一个较老的问题，但我找到了一种方法。

我知道这样做的唯一方法是使用这样的元类：

```
class A(object):
    secret = 'a'

    class _metaA(type):
        @classmethod
        def __repr__(cls):
            return "<Repr for A: secret:{}>".format(A.secret)
    __metaclass__ =_metaA 
```

输出：

```
>>> A
<Repr for A: secret:a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:12:14.630

由于在定义不可用时既`"<class 'A'>"`不能也`"A"`不能用于重新创建类，我认为这个问题没有实际意义。

# css - 如何调整 CSS 动画时间？

> ID：15362187
> 
> 赞同：3
> 
> 时间：2013-03-12T13:09:35.887
> 
> 标签：css, css-animations

我有下面的 CSS 进行旋转和淡入，它工作得很好。旋转/淡入淡出的时间就像我想要的那样，但我希望旋转/淡入淡出之间的持续时间更长——比如 30 秒左右。如果我增加持续时间，这会减慢旋转/淡入淡出的速度。如何设置关键帧以保留旋转/旋转时间，但在旋转/淡入淡出之间允许 30 秒？我搜索但找不到适用的答案。非常感谢。

```
@-webkit-keyframes SomeName {
0%   { opacity:0; -webkit-transform: rotateY(180deg); }
50%  { opacity:0; -webkit-transform: rotateY(180deg); }
75%  { opacity:1; -webkit-transform: rotateY(0deg); }
100% { opacity:1; -webkit-transform: rotateY(0deg); }
}

#flipBox img.flippy {
-webkit-animation-name: SomeName;
-webkit-animation-timing-function: ease-in-out;
-webkit-animation-iteration-count: infinite;
-webkit-animation-duration: 10s;
-webkit-animation-direction: alternate;
} 
```

ps 仅供参考：这只是 webkit，因此是唯一的前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:27:14.777

[现场演示](http://jsfiddle.net/rrFLa/)

使用此代码

```
animation:SomeName 5s;
-moz-animation:SomeName 5s; /* Firefox */
-webkit-animation:SomeName 5s; /* Safari and Chrome */
-o-animation:SomeName 5s; /* Opera */ 
```

希望这会帮助你。

# c# - 以编程方式从命令提示符启动节点 js 脚本

> ID：15362188
> 
> 赞同：1
> 
> 时间：2013-03-12T13:09:36.727
> 
> 标签：c#, .net, node.js, azure, processstartinfo

我的网络角色中有一个运行 Socket.io 实现的节点 js 脚本。我能找到的关于如何启动节点 js 脚本的唯一方法是在命令提示符下运行它，所以我在 web 角色中创建了一个后台任务，它在命令提示符下运行脚本。

我将节点 js 文件、cmd.exe 和节点模块文件的“复制到输出目录”的属性设置为“如果较新则复制”，它们是在 bin 文件夹中生成的。如果我手动启动 bin 文件夹中的 cmd.exe 并运行命令“node App.js”，它可以工作，socket.io 正在侦听的端口正在运行。但是当我像下面这样以编程方式运行命令时它不起作用。

它不会抛出任何错误，所以我不知道它是否在我的代码中存在问题，或者我们无法像这样启动节点 js 脚本。有什么方法可以查明命令是否正确执行？因为进程启动时没有打开 cmd 提示窗口。非常感谢任何指导、建议或想法。谢谢

```
public class BackgroundThread
{
    public static void Start()
    {
        var appRoot = Path.Combine(Environment.GetEnvironmentVariable("RoleRoot") + @"\", @"approot");

        ProcessStartInfo psi = new ProcessStartInfo();
        psi.CreateNoWindow = false;
        psi.FileName = Path.Combine(appRoot, "bin", "cmd.exe");
        psi.Arguments = "node app.js";
        psi.UseShellExecute = false;
        psi.WorkingDirectory = Path.Combine(appRoot, "bin");

        try
        {
            Process p = Process.Start(psi);

        }
        catch (Win32Exception ex)
        {
            Console.WriteLine(ex.ToString());
            Console.WriteLine(ex.StackTrace);
            Console.WriteLine(ex.Source);
            Console.WriteLine(ex.ErrorCode);
        }       
    }

} 
```

编辑：

原来iisnode可以处理所有事情，我只需要在web.config中放置一个重写代码。从这里的示例 azure node js 应用程序[http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)我得到了这个重写代码

```
<rewrite>
  <rules>
    <clear />
    <rule name="app" enabled="true" patternSyntax="ECMAScript" stopProcessing="true">
      <match url="iisnode.+" negate="true" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
      <action type="Rewrite" url="App.js" />
    </rule>
  </rules>
</rewrite> 
```

它会自动启动 App.js，但会将我的所有视图重新定向到 App.js 脚本。我想这与我上面写的重写代码有关。我应该进行哪些更改才能让 App.js 在启动时运行并且仍然能够访问我的其他 html 视图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:33:05.900

一种方法是将所有静态内容放在特定文件夹中并添加重写规则以绕过对 app.js 的重定向

`

```
 <!-- All other URLs are mapped to the Node.js application entry point -->
                <rule name="DynamicContent">
                     <conditions>
                          <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="True"/>
                     </conditions>
                     <action type="Rewrite" url="app.js"/>
                </rule>
` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:03:15.590

在 web 角色中运行 node.js 的最佳方式是使用 iisnode - 这是一个 iis http 模块，它将 iis 请求重定向到 node.exe 进程，允许您将 iis 进程管理与 node.js 应用程序一起使用。

您可以使用 windows azure powershell 或 azure 网站轻松完成此操作。有关详细信息，请参阅[http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)

# c# - 在 MSDN 水晶报告教程中缺少使用分层分组的指令

> ID：15362190
> 
> 赞同：6
> 
> 时间：2013-03-12T13:09:40.707
> 
> 标签：c#, crystal-reports, namespaces, visual-studio-2005, using

我正在阅读 Crystal Reports 的 MSDN 教程，然后我开始将嵌入式报表绑定到 CrystalReportViewer 控件步骤：

当我尝试构建时，它告诉我缺少`using`Hierarchical_Grouping 类的声明。这给我带来了两个问题......

1.  这个类定义的命名空间是什么？
2.  有没有一种简单的方法来确定给定类的命名空间？

在另一个答案中，我看到了智能感知的“ALT、SHIFT、F10”和“CTRL、[句点]”建议，但它们在我的 Visual Studio 中不起作用。

我确定我做了一些可笑的愚蠢的事情......提前抱歉......

这是表单的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;

namespace CrystalTest3
{
    public partial class Form1 : Form
    {
        private Hierarchical_Grouping hierarchicalGroupingReport;

        public Form1()
       {
            InitializeComponent();
        }
        private void ConfigureCrystalReports()
        {
            hierarchicalGroupingReport = new Hierarchical_Grouping();
            crystalReportViewer.ReportSource = hierarchicalGroupingReport;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            ConfigureCrystalReports(); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:07:03.767

我假设您指的是[本教程。](http://msdn.microsoft.com/en-us/library/ms227452%28v=vs.80%29.aspx)

`Hierarchical_Grouping`似乎是指报告文件 - 其中将包含名为`Hierarchical_Grouping`. 您是否已将报告添加到您的项目中？

该报告应位于这些[示例报告目录](http://msdn.microsoft.com/en-us/library/ms225622%28v=vs.80%29.aspx)中的某个位置。

# django - 在 Amazon EC2 免费层上部署第一个 Django 项目

> ID：15362202
> 
> 赞同：1
> 
> 时间：2013-03-12T13:09:57.630
> 
> 标签：django, amazon-ec2

终于是时候了，我已经准备好部署我的第一个 django 项目了。我是 Web 开发方面的新手，现在真正的乐趣开始了。

这是一个用于计算机工作的小规模站点。我想从免费层开始，并在需要时从那里发展。

我已经阅读了一些有关 django 项目部署的指南，但找不到所有答案。所以希望这里的一些人可以帮助我：

*   我一直在考虑获得 Amazon EC2 免费层 VPS，这是一个不错的选择吗？
*   我的本地开发机器运行 Ubuntu，我听说我可以安装 10GB 的 Ubuntu 映像，你推荐这样的映像吗？
*   我应该使用 apache 还是更轻的 Web 服务器？
*   我的项目托管在 bitbucket 上，我只需要在我的 VPS 上签出我的项目，对吗？
*   数据备份呢？我想备份我的 mySQL 数据库
*   你建议我如何提供静态文件？
*   我正在寻找一个关于如何使用 django 和 mysql 设置 AWS 的好教程

10倍的家伙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:28:36.243

> 我一直在考虑获得 Amazon EC2 免费层 VPS，这是一个不错的选择吗？

如果它满足您的技术要求，ram、cpu、内存；这是一个不错的选择。

> 我的本地开发机器运行 Ubuntu，我听说我可以安装 10GB 的 Ubuntu 映像，你推荐这样的映像吗？

如果可以的话，不妨保持环境不变。如果您可以匹配版本，那是另一个加分项

> 我应该使用 apache 还是更轻的 Web 服务器？

要么，此时 Apache 可能更容易部署，因为您不必担心将其作为服务程序运行（使用类似`supervisor`管理它的程序）。无论您选择哪一个，网上都有大量教程描述如何设置 django。

> 我的项目托管在 bitbucket 上，我只需要在我的 VPS 上签出我的项目，对吗？

这是一种方式。有很多部署方法。我喜欢使用织物同步实际文件。这样，您的生产服务器就不需要知道您的 bitbucket 帐户。再一次，网上有很多教程描述了部署 django。Fabric 是一个很好的起点。

> 数据备份呢？我想备份我的 mySQL 数据库

有很多工具可以做到这一点。大量预制工具和 shell 脚本。我用过`automysqlbackup`，效果很好[http://sourceforge.net/projects/automysqlbackup/](http://sourceforge.net/projects/automysqlbackup/)

> 你建议我如何提供静态文件？

确保网络服务器为他们服务。如果你通过 apache 部署，你可以很容易地设置一个别名来提供静态文件。您可以提出一个 collectstatic 部署方案将您的静态放在 s3 上，但对于一个简单的站点 apache 就可以了

> 我正在寻找一个关于如何使用 django 和 mysql 设置 AWS 的好教程

也许您可以找到涵盖此内容的教程，很可能您可能只会找到一个教程：

1.  如何使用 ubuntu 设置 aws
2.  在 ubuntu 上安装 django/mysql

# opengl-es-2.0 - 在 1.12.14 中测试 cairo-gles 后端的示例 cairo 应用程序

> ID：15362203
> 
> 赞同：2
> 
> 时间：2013-03-12T13:10:03.973
> 
> 标签：opengl-es-2.0, cairo

我能够在我的嵌入式系统目标上的 gles 后端成功移植、交叉编译和运行 cairo gears 应用程序。 [http://people.linaro.org/~afrantzis/cairogears-0~git20100719.2b01100+gles2.tar.gz](http://people.linaro.org/~afrantzis/cairogears-0~git20100719.2b01100+gles2.tar.gz) 移植的样本陷阱、压缩、文本和阴影在 cairo1.12.3 和 1.12.4 中运行良好。但我在 1.12.14 中运行相同的问题。我无法运行与纹理相关的示例，如合成、文本、阴影。陷阱播放良好，但渐变样本中无法显示渐变。我使用 gles 后端并将我从 png 文件加载的所有图像表面转换为 gl 表面。让我知道纹理+渐变样本是否应该在 1.12.14 中工作。

谢谢 Sundara raghavan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:30:07.603

问题是因为需要将 cairo 的内部图像格式 GL_BGRA 转换为 GL_RGBA 以加载到 GL 纹理（默认为 GL_RGBA）。我通过应用一个使用 BGRA GL 纹理的现有补丁解决了这个问题，因此避免了转换。这是可能的，因为我的硬件既可以读取也可以创建 bgra 纹理。

补丁在这里找到：http: [//lists.freedesktop.org/archives/cairo/2013-February/024038.html](http://lists.freedesktop.org/archives/cairo/2013-February/024038.html)

# yii - 在 YII 输入表单中选择日期时间范围

> ID：15362207
> 
> 赞同：0
> 
> 时间：2013-03-12T13:10:08.003
> 
> 标签：yii, datetimepicker

这是问题所在。

我必须在基于 Yii 的网站上创建一个提交表单。表单需要输入日期时间范围。为此，我使用“jui datetimepicker”第三方 Yii 扩展。

[http://www.yiiframework.com/extension/datetimepicker/](http://www.yiiframework.com/extension/datetimepicker/)

我使用两个带有此扩展名的日期字段，分别与开始时间和结束时间有关。所以，我想要实现的是能够将开始日期时间限制为未来的时间（既不应该选择过去的日期，也不应该选择过去的时间），并且结束时间本身应该限制在开始时间之后最多三个小时。

示例：用户想要安排活动。他们选择一个日期和时间，当然是在未来。假设他们在开始时间字段中选择 3 月 15 日 13 点作为开始时间。一旦完成并移至下一个字段（“结束时间”），相应的日期时间选择器将限制从 3 月 15 日 13:00 到 3 月 15 日 16:00 的时间范围。

因此，第二个 datetimepicker 应该根据第一个的输入动态更新。

可以在 datetimepicker 中指定从当前日期开始的日期范围，但是对于时间选择没有类似的东西，所以用户仍然可以选择已经过去的时间。

我并不是想用这个扩展来解决这个问题，如果有人对 YII 解决方案有任何建议，允许以最干净和有效的方式指定日期时间范围 - 将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:55:45.187

您应该改用[edaterangepicker](http://www.yiiframework.com/extension/edaterangepicker)扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:16:12.577

给定[jquery timepicker 插件](http://trentrichardson.com/examples/timepicker/)的 API 。您应该将以下内容添加到您的小部件调用中（以及“模型”、“属性”等）

```
'options'=>array(
'minDateTime'=>'<start dateTime here>',
'onSelect'=>'<JS function to run>'
) 
```

您在“onSelect”事件上运行的函数应该为第二个 dateTime 输入字段动态设置 minDateTime，例如：

```
function (selectedDateTime){
<EndDatePickerElement>.datetimepicker('option', 'minDateTime', <start dateTime here using selectedDateTime> );
} 
```

如果您需要使其更加精确，则前面提供的链接上有更多示例（例如，如果您希望将开始日期推迟到用户在页面上的时间量，而不是在页面时设置已加载。等等...）

# c# - winforms c#中的静态属性

> ID：15362208
> 
> 赞同：2
> 
> 时间：2013-03-12T13:10:07.890
> 
> 标签：c#, .net, winforms, properties

我有一个 WinForms 应用程序。在这个应用程序中，我有一些 Forms 和 Static 类，它们具有**公共静态属性** 和一些需要设置属性的公共静态方法，因为表单在这些方法上使用。

现在，如果我在第一个表单中设置此属性，那么当我在第二个表单上使用某些方法时会出现错误或该属性仍然设置（将第一个设置保存在第一个表单上）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:12:26.760

静态变量保持保存其值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:11:50.207

该属性仍然设置。这就是静态属性的实际工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:12:12.323

静态字段在应用程序域中共享。因此，第二个表单将可以访问第一个表单设置的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:16:39.947

你真正想要的是一个单例而不是一个静态类。有一些重叠，但如果我正确理解你的愿望，单例是正确的方法。请参阅此 SO 帖子：有关更多信息和代码清单：[单例模式示例](https://stackoverflow.com/questions/2585022/example-of-singleton-pattern/2585062#2585062)

# umbraco - 如何修复已经安装的umbraco？

> ID：15362211
> 
> 赞同：0
> 
> 时间：2013-03-12T13:10:17.920
> 
> 标签：umbraco

我在实现某些功能后安装了 Umbraco 4.0，但出现了一些错误，

我们有任何维修 Umbraco 安装的规定吗？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:20:29.350

这非常模糊，您能否就您收到的错误提供更多详细信息？另外，您是否安装了 umbraco，然后添加了一个新功能并且它坏了？

作为使用 cms 内容时的一般经验法则，最好在对 cms 安装执行维护时备份数据库和文件系统，以避免可能的数据或内容丢失。

Umbraco 本身没有内置的“修复”功能，但是您可以使用 umbraco 4 的新副本覆盖磁盘上的文件，前提是它是相同的版本。完成后，您将不得不重建您的站点索引。

注意：我说覆盖是因为您只想替换磁盘上的所有 umbraco 文件并保留您的旧内容文件，例如媒体等，但是如果您对 umbraco 核心进行了任何更改，这些更改将因覆盖而丢失。

# xcode - 分段表格视图中行的线性计数

> ID：15362214
> 
> 赞同：0
> 
> 时间：2013-03-12T13:10:24.977
> 
> 标签：xcode, count, row, tableview

我有一个分段的表格视图，其中部分的数量和行数是动态的。数据从不同的数组和字典提供给每一行。我想**在**调用`didSelectRowAtIndexPath`. 我遵循[了这个答案](https://stackoverflow.com/a/6817895/975799)，但给出了错误的结果。我想应该有一种方法来获得线性计数......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:44:54.250

我找到了解决方案：在`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section` 我添加：

```
NSString *numberOfRowsInSectionString = [[NSString alloc]initWithFormat:@"Section%i",section];
            [numberOsRowsArray addObject:numberOfRowsInSectionString]; 
```

当我需要知道我所在的行数时：

```
NSString *currentSectionString = [[NSString alloc]initWithFormat:@"Section%i",indexPath.section];
    [numberOsRowsArray sortUsingSelector:@selector(compare:)];
    NSUInteger indexOfTheObject = [numberOsRowsArray indexOfObject:currentSectionString]+indexPath.row; 
```

# php - ORDER BY 字段中的 MySQL 子查询。（无内连接）

> ID：15362215
> 
> 赞同：2
> 
> 时间：2013-03-12T13:10:27.490
> 
> 标签：php, mysql

*有很多与此相关的问题，但都有相同的使用内连接的答案，这（我认为）在这里是不可能的。（如果我错了就说我）*

我现在正在做的是调用两个不同的 mysql 查询来获得结果。它完美地工作。

```
$db->query("SELECT * FROM `meta` WHERE `metakey` = 'category_order'");
$order = $db->fetch_assoc()['metavalue'];  
/*$order = 2,1,12,11,10*/

$db->query("SELECT * FROM `categories` WHERE `parent` = '0' ORDER BY field(ID, $order)");           
$cats = $db->fetch(); 
```

现在为了减少查询的数量，我尝试了类似的方法，

```
$db->query("SELECT * FROM `categories` WHERE `parent` = '0' ORDER BY field(ID, (SELECT 'metavalue' FROM `meta` WHERE `metakey` = 'category_order'))"); 
```

它没有显示任何错误，但它给了我错误的输出。有没有办法做到这一点？

**编辑**

类别表的结构，

```
_________________
| ID  | name    |
-----------------
| 1   | A       |
| 2   | B       |
| 11  | C       |
| 12  | D       |
| 10  | E       |
----------------- 
```

元表的结构，

```
______________________________________
| ID | metakey        | metavalue    |
--------------------------------------
| 1  | category_order | 2,1,12,11,10 |
-------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:12:34.753

尝试使用`GROUP_CONCAT`并且不要`metavalue`用单引号包裹列，因为它将其转换为字符串文字。

```
$db->query("SELECT * FROM `categories` WHERE `parent` = '0' ORDER BY field(ID, (SELECT GROUP_CONCAT(`metavalue`) FROM `meta WHERE `metakey` = 'category_order'))"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:07:40.357

我真的看不到直接使用 ORDER BY FIELD 的方法。

但是我想知道您是否可以对元表执行 JOIN，然后按 FIND_IN_SET 排序。

没有对此进行测试，但希望能给你这个想法：-

```
SELECT * 
FROM `categories` 
INNER JOIN meta ON metakey = 'category_order' AND FIND_IN_SET(categories.ID,metavalue)
WHERE `parent` = '0' 
ORDER BY FIND_IN_SET(categories.ID,metavalue) 
```

可能不需要 JOIN 上的 FIND_IN_SET

# blackberry - 来自服务器的 SMS 发送到 Blackberry 中的特定端口号

> ID：15362216
> 
> 赞同：0
> 
> 时间：2013-03-12T13:10:28.653
> 
> 标签：blackberry, sms, sms-gateway

在 Blackberry SMSDemo 示例应用程序中使用特定端口号，通过该端口号消息将不会显示在收件箱中。

如果消息从一个设备发送到另一个设备，那么该应用程序可以正常工作。

我想知道，是否有办法将消息从服​​务器发送到该特定端口号，以便从服务器发送的消息不会显示在收件箱中。

我们尝试了很多方法，但到目前为止都没有成功。

希望能尽早收到您的回复

提前感谢克里希南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:45:53.907

可以通过 UDH 从服务器发送到手机上的特定端口。

根据[3GPP TS 23.040](http://www.3gpp.org/ftp/Specs/html-info/23040.htm)第 9.2.3.24 节（我使用的是 6.8.1 版本），您可以将*Information Element Identifier* octet 设置为以下任一值并实现端口寻址：

*   0x04（应用端口寻址方案，8位地址）
*   0x05（应用端口寻址方案，16位地址）

通常使用 16 位端口寻址。

### 依赖

UDH 有两个依赖项才能工作：

*   载体
*   手机

正式地，UDH 仅在 GSM 运营商中受支持。GSM 运营商可能决定阻止带有 UDH 的消息或删除消息的 UDH 部分。非 GSM 运营商不需要支持 UDH，但可以。

手机还应该具有解析UDH消息的能力。

# javascript - 加载弹出页面时在chrome扩展弹出页面中调用角度方法？

> ID：15362225
> 
> 赞同：3
> 
> 时间：2013-03-12T13:11:02.553
> 
> 标签：javascript, html, google-chrome-extension, angularjs

我正在编写一个 chrome 扩展，它使用 angularjs 从 API 获取 JSON 响应。下面的页面是扩展的弹出窗口。目前有一个表单调用角度控制器中的一个方法来从 API 获取 JSON，但是我希望在打开弹出窗口时调用它。我已经尝试了很多事情来让它发挥作用，但都失败了。如果有人知道实现我想要的东西需要什么，我想要一些指导。

谢谢。

这是我的代码。

我这样声明我的应用程序

```
var extension = angular.module('StackAPI',['ngResource']); 
```

在我的控制器文件中，我有以下内容。

```
extension.controller('StackAPICtrl', function ($scope, $resource) {

    $scope.stackAPI = $resource('http://*/question/params?questionId=:questionId',
        {port:'80', questionId:'', callback:'JSON_CALLBACK'},
        {get:{method:'JSONP'}});
    $scope.doSearch = function () {
        $scope.soResult = $scope.stackAPI.get({questionId:$scope.search});
    }
}); 
```

我的 html 弹出页面看起来像这样

带有 的表单`ng-submit="doSearch()"`是当前调用角度控制器中的方法。我希望`doSearch()`在打开扩展弹出页面时调用此方法。

```
<!DOCTYPE html>
<html ng-app="StackAPI" ng-csp>
<head>
    <title>Test</title>
    <script type="text/javascript" src="/js/angular.min.js"></script>
    <script type="text/javascript" src="/js/angular-resource.min.js"></script>
    <script type="text/javascript" src="/js/extension.js"></script>
    <script type="text/javascript" src="/js/query.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/all.css" media="screen"/>
</head>
<body>
<div ng-controller="StackAPICtrl">

    <form align="left" ng-submit="doSearch()">
        <input id="input" type="text" placeholder="Enter a question id..." ng-model="search" size="115">
    </form>

    <div class="container">
        <div ng-repeat="answer in soResult.answers">
            <div id="answer-{{answer.answer_id}}" class="answer" data-answerid={{answer.answer_id}}>
                <table>
                <tr>
                    <td class="votecell">
                        <div class="vote">
                            <span class="vote-count-post " title="up-ranked">
                                <img src="/images/arrow.png" alt="arrow" height="64" width="64">
                            </span>
                        </div>
                    </td>
                    <td class="answercell" align="left">
                        <div class="post-text" ng-bind-html-unsafe="answer.body">

                        </div>
                        <table class="fw">
                            <tr>
                                <td class="vt">
                                    <div class="post-menu">
                                        <a class="short-link">share</a>
                                        <span class="lsep">|</span>
                                        <a class="suggest-edit-post" title="revise and improve this post">edit</a>
                                    </div>
                                </td>
                                <td align="right" class="post-signature">
                                    <div class="user-info ">
                                        <div class="user-action-time">answered {{answer.creation_date}}
                                            <span title="2013-02-22 23:12:55Z" class="relativetime"></span>
                                        </div>
                                        <div class="user-gravatar32">
                                            <!-- ${profile_picture} -->
                                            <img src="{{answer.owner.profile_image}}"
                                                 alt="" width="32" height="32">
                                        </div>
                                        <!-- users details stuff here -->
                                        <div class="user-details">
                                            <!-- ${name} -->
                                            <a>{{answer.owner.display_name}}</a><br>
                                <span class="reputation-score" title="reputation score" dir="ltr">
                                <!-- ${reputation} -->
                                    {{answer.owner.reputation}}
                                </span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:47:25.773

事实证明，由于 chrome 的内容安全策略 (CSP)，我当前的设置无法执行此操作。我创建的 API 目前只使用 http，这就是问题所在。该`doSearch()`方法调用已使用我的 http API 初始化的 ngResource，并且由于 CSP，它只能在清单文件中定义的沙箱中运行。沙箱意味着扩展的其他部分无法与沙箱中运行的任何内容通信，因此我无法`doSearch()`以我想要的方式调用该方法。

解决方案 - 我必须配置 tomcat 以通过 https 提供 API，一旦清单文件中说明了源 uri，CSP 就允许这样做。

# ios - (iOS) 离线同步数据库 - 服务器

> ID：15362233
> 
> 赞同：8
> 
> 时间：2013-03-12T13:11:23.300
> 
> 标签：ios, objective-c, sqlite, synchronization

*尝试实现一个应用程序，该应用程序在连接到 Internet 时将存储在本地数据库中的离线数据发送到 Web 服务器。我使用下面显示的代码。到目前为止，我已经测试它工作正常，不确定它是否适用于大量记录。我想知道对这段代码的任何调整是否可以提高性能？？？*

**笔记**

*   我知道这对于离线同步来说是最糟糕的代码，所以试着更好地调整它。
*   它是从应用程序到服务器的单向同步。

    ```
    -(void)FormatAnswersInJSON {

      DMInternetReachability *checkInternet = [[DMInternetReachability alloc] init];
      if ([checkInternet isInternetReachable]) {
         if ([checkInternet isHostReachable:@"www.apple.com"]) {//Change to domain
            responseArray = [[NSMutableArray alloc] init];

            dispatch_async(backgroundQueue, ^(void) {

                NSArray *auditIDArray = [[NSArray alloc] initWithArray: [self getUnuploadedIDs]];
                for (int temp = 0; temp < [auditIDArray count]; temp ++) {

                    // Code to post JSON to server

                    NSURLResponse *response;
                    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
                    if (!error) {
                        NSString *responseID = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
                        if ([responseID isEqualToString:@"ERROR"]) {
                            //Error uploading records
                        } else {
                           [responseArray addObject:responseID];
                        }
                    } else {
                       //Error
                       return;
                    }
                }
                dispatch_async( backgroundQueue, ^{

                    /* Based on return code update local DB */
                    for (int temp = 0; temp < [responseArray count]; temp ++) {
                       [self updateRecordsForID:[auditIDArray objectAtIndex:temp] withID:[responseArray objectAtIndex:temp]];
                    }
                });
            });
         }
      }
    }

    - (void)upload { //Called when internet connection available

        if(backgroundQueue){
            dispatch_suspend(backgroundQueue);
            dispatch_release(backgroundQueue);
            backgroundQueue = nil;
        }
        backgroundQueue = dispatch_queue_create("com.XXXX.TestApp.bgqueue", NULL);
        dispatch_async(backgroundQueue, ^(void) {
            [self FormatAnswersInJSON];
        });    
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:55:42.460

如果这段代码摆在我面前，我的方法是：

*   查看用例并定义“大量记录”：一次会定期更新 50 条记录吗？还是会在 1s 和 2s 中？我的用户有 wifi 连接还是通过付费网络连接？等。
*   如果可能，请在野外进行测试。如果我的用户群足够小，请收集真实数据并让其指导我的决策，或者仅将功能发布给用户/beta 测试和测量的子集。
*   如果数据告诉您，则优化此代码以提高效率。

我的优化途径是进行组处理。粗略的算法类似于：

```
for records in groups of X
  collect
  post to server {
    on return:
      gather records that updated successfully
      update locally
  } 
```

这假设您可以修改服务器代码。您可以进行 10、20、50 组等。这一切都取决于发送的数据类型和大小。

组算法意味着更多的预处理客户端，但具有减少 HTTP 请求的优点。如果您只打算获得少量更新，这就是[YAGNI](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)和未成熟的优化。

**不要让这个决定阻止您发货！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T13:07:48.390

您的代码有几个问题。一种约定是在测试错误参数之前始终检查返回值。可能会设置错误参数 - 即使方法成功。

当`NSURLConnection`用于除快速示例或测试之外的任何其他内容时，您还应该始终使用异步样式来处理委托方法。由于`NSURLConnection` *正确*使用可能会很快变得麻烦且容易出错，因此我建议使用第三方框架，该框架将`NSURLConnection`对象和所有与连接相关的状态信息封装为`NSOperation`. 您可以在 Apple 示例中找到一个示例实现：`QHTTPOperation`. 另一个合适的第三方框架是 AFNetworking（在 GitHub 上）。

当您将异步样式与委托或第三方子类一起使用时，您可以取消连接、检索详细的错误或进度信息、执行身份验证等等 - 这是同步 API 无法做到的。

我认为，一旦你完成了这个并且你的方法正常工作，你可以测试性能是否可以接受。但是除非你有大数据——比如>2 MByte——我不会太担心。

如果您的数据变得非常大，例如 > 10 MByte，您需要考虑改进您的方法。例如，您可以将 POST 数据作为文件流而不是`NSData`对象提供（参见`NSURLRequest`'s property `HTTPBodyStream`）。使用流避免将所有 POST 数据加载到 RAM 中，这有助于缓解 RAM 受限问题。

如果您有较小的 POST 数据，但可能有很多，您可能会考虑使用`NSOperationQueue`放置`NSOperation`连接子类的位置。将最大并发操作数设置为 2。这*可能会*利用 HTTP 管道 - 如果服务器支持这一点，这实际上会减少延迟。

当然，您的应用程序中可能还有其他部分，例如您创建或检索您必须发送的数据，这可能会影响整体性能。但是，如果您的代码是健全的并且利用调度队列或 NSOperations 让事情以并行方式执行，那么就没有更多的选项来提高连接的性能了。

# c# - WPF按钮的XY坐标在运行时移动？

> ID：15362242
> 
> 赞同：0
> 
> 时间：2013-03-12T13:11:49.263
> 
> 标签：c#, wpf, wpf-positioning

我的 WPF 应用程序有一个非常奇怪的行为：我的按钮在运行时的 XY 位置似乎与我在 Visual Studio 的 xaml 编辑器中设置它时的位置不同（顺便说一句，它有名称吗？）

它周围没有对齐设置或面板，我只设置了边距。我的按钮有以下代码：

`<Button Content="OK" Height="23" Margin="213,319,4,7" Name="button3" Width="75" IsCancel="True" Click="button3_Click" IsEnabled="False" />`

**编辑：**

边距是固定的，因为它是一个不可调整大小的对话框。如您所见，按钮略微向左和向上移动：

xaml 编辑器：

![在此处输入图像描述](../Images/ad5621238e11ceb07ecdb3eb513dc399.png)

运行：

![在此处输入图像描述](../Images/ad112dc49083cbb525ac6688afe7fbbb.png)

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:23:28.117

我想下面关于对齐、边距和填充概述的链接将帮助您了解它是如何工作的？

否则放置面板包装器，例如 Stackpanel、Wrappand 或 Grid。它适用于控件的布局

编辑：问题出在 ResizeMode="NoResize" 上。如果您在 Window 标记中删除此属性，则对齐会很好

[参考链接](http://msdn.microsoft.com/en-us/library/ms751709.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T11:59:29.043

伙计，这是在 WPF 中设置 UI 元素位置的最糟糕的方法！

将您的 XAML 重构为如下所示：

```
 <Grid Margin="5">
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <ListView Grid.Row="0" Name="TableList" Margin="5"/>

    <Button Grid.Row="1" Name="button3" Content="OK"
            Margin="5"
            Width="75"
            HorizontalAlignment="Right"/>
  </Grid> 
```

你看？有一个`Grid`处理其所有孩子的位置（在本例中为 a`ListView`和 a `Button`）。

`Button`放在第二个，`Row`与右侧（`HorizontalAlignment`属性）对齐。

`Grid`和它的孩子都有`Margin=5`。这保证了每个孩子的边距对于 aiacent 孩子和`Grid`.

此外， the`ListView`和 the`Button`完美对齐。

您的方法的问题是您设置了`Button` `Width` *and* its`Left Margin` *和*its `Right Margin`。也许总数不正确，因为边框`Window`吃掉了一些像素，或者只是 WPF 无法同时处理所有信息而错过了计算，谁知道呢，但结果是**您必须至少保留一个参数 free**。在我的示例中，我离开`Margins`了窗口。这些`Margin=5`仅设置相`Margin`对于其他控件的相对尊重，但`Button`距离左边框的距离`Window`是我留给 WPF 图形引擎计算的。

# php - laravel 中 get() 和 all() 的区别

> ID：15362252
> 
> 赞同：12
> 
> 时间：2013-03-12T13:12:14.807
> 
> 标签：php, laravel, laravel-4

这两个在laravel中有什么区别

```
$input = Input::get(); 
```

和

```
$input = Input::all(); 
```

我应该更喜欢哪一个。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T13:19:30.953

取自 laravel 源码：

```
public static function all()
{
   $input = array_merge(static::get(), static::query(), static::file());
   // ....
   return $input;
} 
```

所以`all()`调用`get()`并返回它的内容以及`query()`, 和`file()`$_FILES 超全局。

偏好显然取决于具体情况。我个人选择使用`Input::get($key, $default)`，因为我通常知道我在追求什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T13:16:47.343

来自 Laravel 手册：[http ://laravel.com/docs/input](http://laravel.com/docs/input)

从输入数组中检索一个值：

```
$email = Input::get('email'); 
```

注意：“get”方法用于所有请求类型（GET、POST、PUT 和 DELETE），而不仅仅是 GET 请求。

从输入数组中检索所有输入：

```
$input = Input::get(); 
```

检索所有输入，包括 $_FILES 数组：

```
$input = Input::all(); 
```

默认情况下，如果输入项不存在，则返回 null。但是，您可以将不同的默认值作为第二个参数传递给该方法：

# java - 带有程序的嵌套循环，布尔数组？

> ID：15362267
> 
> 赞同：0
> 
> 时间：2013-03-12T13:12:42.320
> 
> 标签：java, loops

在模型类的构造函数中，我需要分配这个布尔数组的内存（boolean[ ][ ] is_hidden;）。我还需要将它们设置为 true，但不知道这是如何发生的，必须使用嵌套循环，就像底部的绘制方法中的那样，才能设置每个元素。

```
class MineFinderModel {
public static int MINE_SQUARE = 10;
public static int EMPTY_SQUARE = 0;

int num_of_cols;
int num_of_rows;
int[][] the_minefield;
boolean[][] is_hidden;

public MineFinderModel(int n_cols, int n_rows) {
    num_of_rows = n_rows;
    num_of_cols = n_cols;
    the_minefield = new int[num_of_cols][num_of_rows];
    is_hidden = new boolean[][];
} 
```

绘制方法示例：

```
 for (int i = 0;i<numCols;i++)
         {
        for(int j = 0;j<numRows;j++)
        {
            Rectangle r = getRect(i,j);
            g.setColor(Color.black);
            g2.draw(r);

            if(i==0&&j==0)                                  {
                g2.drawOval(x,y,w,h);
            g2.fillOval(x,y,w,h);
            }
            if(i==0&&j==(numRows-1))
            g2.fillOval(x,y,w,h);

            if(i==(numCols-1)&&j==0)
            g2.fillOval(x,y,w,h);

            if(i==(numCols-1)&&j==(numRows-1))
            g2.fillOval(x,y,w,h); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:16:34.487

您需要使用大小定义数组，例如

```
is_hidden = new boolean[cols][rows](); 
```

并遍历，将每个单元格设置为`true`（布尔值和布尔数组，默认为`false`）。

请注意[Arrays.fill()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#fill%28boolean%5B%5D,%20boolean%29)存在，但只会让你半途而废，因为它不会填充多维数组。您可以使用它，但您必须遍历行，并`Arrays.fill`在每一行上使用。在此示例中可能不值得，但无论如何都值得注意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:22:23.457

尝试这个：

```
 int num_of_cols = 2;
    int num_of_rows = 3;
    boolean[][] is_hidden;
    is_hidden = new boolean [num_of_cols][num_of_rows];

    for (int i = 0; i < num_of_cols; i++) {
        for (int j = 0; j < num_of_rows; j++) {
            is_hidden[i][j] = true;
        }
    } 
```

您可以看到它现在已正确初始化：

```
 for (boolean[] col : is_hidden) {
        for (boolean elem  : col) {
            System.out.println(elem);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:38:42.240

当您定义一个布尔数组时，所有元素的值默认为 false。我建议不要循环遍历所有元素，而是以可以使用默认 false 值的方式实现条件。

例如。

```
boolean[][] isEnabled =  new boolean[10][10];
// code to set all elements to true
if(isEnabled[i][j]){
    //some code
} 
```

这可以很容易地替换为

```
boolean[][] isDisabled =  new boolean[10][10];
if(! isDisabled[i][j]){
    //some code
} 
```

您可以通过这种方式节省处理时间，并且代码看起来很整洁:)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:34:08.153

我有一个简单的解决方案：不要使用数组 is_hidden 并用 true 填充它的每个元素，而是使用名称 isVisible 并且根本不填充它，因为它的每个元素都已初始化为 false ;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T13:15:44.350

只需编写一个嵌套循环。

```
for (int i = 0;i<n_rows;i++){
    for(int j = 0;j<n_cols;j++){
        is_hidden[n_rows][n_cols] = true;
    }
} 
```

# android - 清除数据库后如何进行下一个活动？

> ID：15362268
> 
> 赞同：0
> 
> 时间：2013-03-12T13:12:44.293
> 
> 标签：android, android-activity

清除数据库后，我正准备参加一项新活动。您可以直观地看到数据库已被清除，但之后什么也没有发生。但是应该开始另一个活动。这是我的代码：

```
 public void resetGameTable(){   
    objDbHelper = new DatabaseConnector(this);
    objDbHelper.open();
    objDbHelper.resetTable(DatabaseOpenHelper.SCORE_TABLE,DatabaseOpenHelper.createScoreTable,null);
    objDbHelper.close();

    Intent intent = new Intent(ResetDatabase.this, main.class);
    startActivity(intent);
} 
```

提前致谢。

# java - 如何将 hexColor 代码分配给 java 类文件上的任何数据类型

> ID：15362269
> 
> 赞同：1
> 
> 时间：2013-03-12T13:12:45.127
> 
> 标签：java, android, user-interface, colors, hex

我需要在 UI 滚动时更改 textColor。我所做的是我已经将颜色声明到 Colors.xml 文件中。

```
<color name="color1">#e0195c</color>
<color name="color2">#7f26db</color>
<color name="color3">#1d38df</color>
<color name="color4">#1b1b1d</color>
<color name="color5">#232428</color> 
```

我正在尝试通过使用以下代码来使用它们：

textView.setTextColor(getResource().getColor(R.color.color1));

但是在执行过程中，其中一些不起作用。像 color1 不工作。

它抛出异常：- String #e0195c 转换错误

如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:22:12.353

您可以像这样动态设置颜色

```
textview.setTextColor(Color.parseColor("#e0195c")); 
```

它为我工作。而且我没有得到任何例外。

现在我为颜色代码创建了一个数组

```
private String[] colorHexCode = {"#e0195c", "#7f26db", "#1d38df"}; 

textview.setTextColor(Color.parseColor(colorHexCode[0])); 
```

所以你也可以使用数组来改变颜色。

# c++ - 通过传递函数将变量输出为字符串

> ID：15362277
> 
> 赞同：0
> 
> 时间：2013-03-12T13:13:10.647
> 
> 标签：c++, string, pointers

```
1 void out3x3(mat3x3 &A)
2 { int i, j;
3   for (i=0; i<3; i++)
4   {   if (i==1)
5           cout << "A = | ";
6       else
7           cout << "    | ";
8       for (j=0; j<3; j++)
9           cout << A.n[j][i] << " ";
10      cout << "|" << endl;
11   }
12 } 
```

这是我正在编写的用于进行矩阵操作的程序中的一个函数。mat3x3 是一个 3x3 矩阵的结构（存储为 An[3][3]。而不是第 5 行输出中的“A”，我希望它输出我在调用函数。

我只使用 A、B 和 C。我可以写三个不同的函数，但我觉得应该有更好的方法来做到这一点。

如果我说 out3x3(B); 它只会显示 A = | |。

我希望发生这种情况：

出3x3（乙）；

```
B = | | 
```

出3x3（C）；

```
C = | | 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:16:13.880

变量的名称在运行时不存在。它们只是编译时构造。您还需要执行一些操作，例如更改函数以获取`std::string`参数：

```
void out3x3(mat3x3 &A, std::string name)
{
  // ...
  cout << name << " = | ";
  // ...
} 
```

然后像这样调用它：

```
out3x3(A, "A");
out3x3(B, "B"); 
```

然后，您可以使用宏来使这*感觉*就像您没有重复变量名称。但是，我根本不推荐这个。相反，我建议只让您的函数打印出矩阵的内容（在`|`s 之间），然后执行以下操作：

```
cout << "A = ";
out3x3(A); 
```

变量名的打印应该完全独立于矩阵内容的打印。考虑以下类比：

```
int x = 5;
cout << x; 
```

这只是打印出 的值`x`，仅此而已。如果我想标记它，我必须手动执行：

```
int x = 5;
cout << "x = " << x; 
```

谁知道呢？`operator<<`也许你会为你的类型重载`mat3x3`，很快你就会这样做：

```
cout << "A = " << A; 
```

漂亮多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:19:04.247

您可以使用宏作为包装器来调用它

```
#define OUT3X3(mat)        \
    out3x3(&mat, ##mat); 
```

并将函数原型更改为

```
void out3x3(mat3x3 &A, string name) 
```

电话是

```
OUT3X3(A); 
```

# iphone - 故事板或没有故事板

> ID：15362278
> 
> 赞同：1
> 
> 时间：2013-03-12T13:13:12.537
> 
> 标签：iphone, xcode

我一直在制作原生 iPhone 应用程序，但我从未使用过 xib，我主要用于制作基于运行时的应用程序，但了解 Main Story Board 的介绍。我只想知道哪一个更容易使用基于我主要习惯或开始使用故事板的运行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:52:00.900

两者都有自己的优势，Storyboard 在以正确的方式使用时有更多的选择和易用性（这就是引入它的原因！）。

**通过使用故事板**

*   您可以避免页面导航和所有代码行这么**多**
*   项目全图可见

**由 xib**

*   使用了很多，因此更容易
*   独立，所以可以更好地工作
*   作为一个团队工作，xib 是可取的，因为如果每个团队成员在单独的文件中工作，冲突可以减少

**我的解决方案**
因为可以在同一个项目中使用两者。我在我的项目中都使用**了这两种方法。**根据我的要求采取这两个优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:08:33.300

从长远来看，您*可能*希望使用 Storyboard。但是，有利也有弊：

## 优点

1.  你可以看到你的**整个项目**
2.  你避免了*一大堆讨厌的代码*
3.  您可以在视觉上将东西“挂钩”在一起

## 缺点

1.  仅可用**>iOS 5.0** <<<<***巨大！***

以我个人的经验，**我通常使用 Storyboards** - 运行 < iOS 5 的设备的百分比实际上非常低。

# svn - SVN 外部和标签/版本

> ID：15362279
> 
> 赞同：0
> 
> 时间：2013-03-12T13:13:13.667
> 
> 标签：svn

我正在一个使用 svn.externals 的项目中工作。我读到这会在创建标签和分支时产生问题，但我读的文章已经有几年了。这仍然是一个问题还是在更高版本的 Subversion 中已解决？

所描述的问题是标签总是指向最新的签入等等。

/jne

# android - 如何使用 MapFragment（不是 MapView）获取地图的坐标？

> ID：15362281
> 
> 赞同：11
> 
> 时间：2013-03-12T13:13:24.673
> 
> 标签：android, location, touch-event, google-maps-android-api-2, mapfragment

我已经搜索了如何在点击地图时获取位置的坐标。但是，大多数（如果不是全部）示例都需要 a`MapView`作为参数。例如：

```
public boolean onTap(GeoPoint p, MapView map){
    if ( isPinch ){
        return false;
    }else{
        Log.i(TAG,"TAP!");
        if ( p!=null ){
            handleGeoPoint(p);
            return true;            // We handled the tap
        }else{
            return false;           // Null GeoPoint
        }
    }
}

@Override
public boolean onTouchEvent(MotionEvent e, MapView mapView)
{
    int fingers = e.getPointerCount();
    if( e.getAction()==MotionEvent.ACTION_DOWN ){
        isPinch=false;  // Touch DOWN, don't know if it's a pinch yet
    }
    if( e.getAction()==MotionEvent.ACTION_MOVE && fingers==2 ){
        isPinch=true;   // Two fingers, def a pinch
    }
    return super.onTouchEvent(e,mapView);
} 
```

`MapFragment`因此，我如何使用和不获取地图上点击位置的位置`MapView`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-12T15:01:09.983

Google Play 服务 SDK 提供的[示例代码](https://developers.google.com/maps/documentation/android/intro#sample_code)中有一个示例。这使用`SupportMapFragment`所以我不确定如果您使用新的`MapFragment`.

此地图示例代码中的 EventsDemoActivity 使用的方法是指向`implement OnMapClickListener`类。以下是您可能可以使用的一些代码。

**活动演示活动：**

```
public class EventsDemoActivity extends FragmentActivity
    implements OnMapClickListener, OnMapLongClickListener {

    private GoogleMap mMap;
    private TextView mTapTextView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.events_demo);

        mTapTextView = (TextView) findViewById(R.id.tap_text);

        setUpMapIfNeeded();
    }

    private void setUpMap() //If the setUpMapIfNeeded(); is needed then...
    {
        mMap.setOnMapClickListener(this);
        mMap.setOnMapLongClickListener(this);
    }

    @Override
    public void onMapClick(LatLng point) {
        mTapTextView.setText("tapped, point=" + point);
    }

    @Override
    public void onMapLongClick(LatLng point) {
        mTapTextView.setText("long pressed, point=" + point);
    }
} 
```

**events_demo.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical">
  <TextView
    android:id="@+id/tap_text"
    android:text="@string/tap_instructions"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/>
  <fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/>
</LinearLayout> 
```

# php - 在 Jquery 中设置 Codeigniter 会话

> ID：15362290
> 
> 赞同：3
> 
> 时间：2013-03-12T13:13:39.300
> 
> 标签：php, javascript, jquery, codeigniter

我需要在 Jquery 中设置会话，但是当我尝试它不起作用时，这是我在 jquery 中做的

```
 var a = 22;
      <?php  $this->session->set_userdata('friend_id' ,a )?> 
```

它给了我语法错误，任何人都知道如何解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:20:08.700

在 jquery 中你可以这样做：

```
$.ajax({
  type: "POST",
  url: 'test.php',
  data: '{"var":"yourvar"}',
  success: function (data) {
    console.log("Success!!");
  },
  error: function (xhr, desc, err) {
    console.log('error');
  }
}); 
```

然后进入你的文件 test.php

```
<?php  $this->session->set_userdata('friend_id' ,$_POST['var'] )?> 
```

[手动的](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-12T16:12:12.517

您可以使用隐藏字段来执行此操作

```
 <input type="hidden" value="" name="id" id="id" /> 
```

这将在你的 js 中

```
 var a = 22;
      document.getElementById('id').value = a; 
```

希望这可以帮助您解决问题，但是您不能在 Jquery 中设置会话

# actionscript-3 - 如何从 AS 类调用 .FLA 中的函数

> ID：15362295
> 
> 赞同：0
> 
> 时间：2013-03-12T13:13:52.297
> 
> 标签：actionscript-3, flash, oop, air, main

我的 Main 类已添加到我的 .fla 阶段，我想在它完成动画时删除并重新添加/“重新启动”该类。我所有的动画都发生在 Main 中，并被添加到 Main 中的显示树中。如何`finishNow()`从 Main.as 中运行该函数？

.fla 文件：

```
var run:Main = new Main(this);
stage.addChild(run);

function finishNow() {
    stage.removeChild(run);
    var run:Main = new Main(this);
    stage.addChild(run);
} 
```

Main.as 文件：

```
var stageHolder:Object;

public function Main(stageHolderTemp) {
        stageHolder = stageHolderTemp; 
        trace(stageHolder);
}

function callFinishFunction():void {
    // how to call finishNow() function from .fla file here
} 
```

编辑：程序的设计已经改变。仍在尝试做同样的事情（调用 finishNow() 函数——但它现在在 Program.as 中）。一切正常，除了引发错误`program.finishNow();`：

TypeError：错误＃1009：无法访问空对象引用的属性或方法。

.fla 文件：

它现在不包含任何代码。它链接到 Program.as。

Program.as 文件：

```
package  {

    import flash.display.MovieClip;

    public class Program extends MovieClip {

        public function Program() {

            startNow();
        }

        function startNow() {
            var run:Main = new Main(this);
            addChild(run);
        }

        function finishNow() {
            removeChild(run);
            var run:Main = new Main(this);
            addChild(run);
        }

    }

} 
```

Main.as 文件：

```
package {

    import flash.display.Sprite;

    public class Main extends Sprite
    {

        var stageHolder:Object;
        public var program:Program;

        public function Main(stageHolderTemp) {
            stageHolder = stageHolderTemp; 
            trace(stageHolder);

            someFunctionsThatDrawGraphics();
        }

        function callFinishFunction():void {
            // how to call finishNow() function from Program.as file here?
            program.finishNow();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:18:36.263

如果你的 .fla 链接到 Main.as 文件，你可以直接调用。尝试这个：

```
public function Main() {
        finishNow();
} 
```

![在此处输入图像描述](../Images/10710947afff7506daca2db6f6bd2578.png)

.fla 代码

```
function testFunction()
{
    trace("111");
} 
```

.as 文件

```
package  {

    import flash.display.MovieClip;

    public class Main extends MovieClip {

        public function Main() {

            testFunction();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:22:17.673

你可以调用`addframeScript`调用FLA函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:10:21.507

实际上，不需要每次都创建类对象。每次调用该类中的函数就足够了。

但是对于你的问题..试试这个....

![你的文档类](../Images/aa4013cd92b4158af8a4a4dc5c9cf1c2.png)

在程序.as

```
 var run:Main = new Main(this);
    run.addEventListener("FINISH",finishNow);
    addChild(run);
    function finishNow(e:Event)
    {
     } 
```

在 main.as 中，

```
function callFinishFunction():void
 {
  dispatchEvent(new Event("FINISH"));
 } 
```

# linux-kernel - 为什么我在运行 readelf -s 时得到这个输出

> ID：15362297
> 
> 赞同：3
> 
> 时间：2013-03-12T13:13:54.553
> 
> 标签：linux-kernel, elf, objcopy

我有 Linux 内核并尝试使用 objcopy 工具在其上生成 ELF Header，下面是第一步

```
 objcopy -I binary -B i386 -O elf32-i386 --rename-section .data=.text linux_kernel.bin  main.o 
```

在此之后我想使用 readelf -s main.o 读取符号表，但是得到奇怪的符号，下面是输出

```
 Symbol table '.symtab' contains 5 entries:
   Num:    Value  Size Type    Bind   Vis      Ndx Name
 0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND 
 1: 00000000     0 SECTION LOCAL  DEFAULT    1 
 2: 00000000     0 NOTYPE  GLOBAL DEFAULT    1 _binary_linux_kernel_bin_
 3: 004df650     0 NOTYPE  GLOBAL DEFAULT    1 _binary_linux_kernel_bin_
 4: 004df650     0 NOTYPE  GLOBAL DEFAULT  ABS _binary_linux_kernel_bin_ 
```

现在应该能够看到像

```
_binary_linux_kernel_bin_start
_binary_linux_kernel_bin__end
_binary_linux_kernel_bin_size 
```

任何机构都可以让我知道我在哪里做错了吗？还是预期的一个？

为什么我想看到正确的符号，因为必须做类似下面的事情

```
 --entry_point=_binary_linux_kernel_bin_start 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T17:02:20.830

您可以使用`readelf -W -s main.o`命令，其中`-W`告诉`readelf`不要将输出截断为 80 个字符的宽度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T16:54:48.267

只是字符串太长并且`readelf`正在截断。试试`objdump -x main.o`。

# ios - 仅具有登录功能但不提供应用内购买的杂志应用程序 - 会被拒绝吗？

> ID：15362299
> 
> 赞同：0
> 
> 时间：2013-03-12T13:13:59.807
> 
> 标签：ios, ipad, in-app-purchase

我目前正在构思一个应为多个移动系统设置的应用程序，如 iOS、Android、Windows。

该应用程序应分发需要登录的出版物。此登录信息只能从出版商网站购买。

这个想法是，不必为所有操作系统系统创建应用程序内设置，而只需在发布者的网站上执行此操作。我知道，尽管苹果不允许应用程序指向该网站。

有谁知道，如果苹果会允许这样的概念？我正在考虑让用户无需登录即可阅读一些出版物，以安抚苹果；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:20:24.497

“应用程序可以阅读或播放在应用程序之外订阅或购买的经批准的内容（特别是杂志、报纸、书籍、音频、音乐、视频和云存储），只要应用程序中没有按钮或外部链接即可购买批准的内容。”

# web - 用于在 Web 中绘制和显示的 SVG 工具

> ID：15362301
> 
> 赞同：0
> 
> 时间：2013-03-12T13:14:04.707
> 
> 标签：web, svg

我正在寻找一种工具来绘制 SVG 图，我想在网页中显示它。

有很多工具可以创建 SVG 图，但我正在寻找一种为每个形状添加一些额外字段的工具。

好的，首先我会清楚地解释我的要求。当我们使用任何 SVG 工具创建一个矩形时，它将创建一个带有 rect 元素的 SVG 元素，在我的情况下，我想区分两个设备“设备类型 1”和“设备类型 2”（在我的 Web 应用程序中使用 CSS ) 但它们的形状是矩形的。

因此，我必须在绘图工具中为每个矩形添加一些附加信息，以便使用 Javascript 我可以了解设备类型，根据设备类型我可以为每个矩形应用不同的 CSS。

这个怎么做？任何绘图工具都支持这种功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:39:27.320

您可以使用[http://svg-edit.googlecode.com/svn/branches/2.6/editor/svg-editor.html](http://svg-edit.googlecode.com/svn/branches/2.6/editor/svg-editor.html)并定义稍后在 JavaScript 中引用的 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:27:44.207

一种方法是让我们 Adob​​e Illustrator 为您设计元素，并由 Raphael JS 来显示和动画所述元素。illustrator 绘制矢量图形的方式和 SVG 的方式存在一些差异，因此普遍的共识是让您的图形相对简单。那里有几个指南，但这个看起来特别好：

[http://snugug.com/musings/illustrator-raphael-js-guide](http://snugug.com/musings/illustrator-raphael-js-guide)

# c++ - 使用 WebSphere MQ 的客户端服务器

> ID：15362302
> 
> 赞同：3
> 
> 时间：2013-03-12T13:14:06.943
> 
> 标签：c++, multithreading, client-server, message-queue, ibm-mq

我在客户端服务器应用程序的两个选项之间进行选择 -

首先 - 使用多线程服务器采用 TCP/IP（基于纯套接字）方法，并自行管理发送和接收的同步。

第二种 - 使用和 WebSphere MQ 方法 (MQI)。基本上是服务器的一个输入队列和一个输出队列。客户端写入服务器输入队列，服务器将回复与一些相关标识符等放入输出队列。因此只需要 2 个队列。服务器程序是多线程的（线程池），多个线程将读取输入队列并写入输出队列。

问题-我倾向于第二种方法，但几乎没有疑问-

1.  MQI 调用线程安全吗？`MQGET`我是否必须对`MQPUT`队列使用一些互斥。

2.  基于 MQ 的方法的性能会低于基于套接字的方法吗？我所说的性能是指两件事。

    一种。IBM MQ 队列操作通常比直接套接字连接慢吗？

    湾。互斥会锁定`MQGET`并`MQPUT`减慢消息处理速度吗？

    C。我计划每秒加载大约 10000 条消息（每个大约 100 字节）。回复大小约为 5 KB（XML 消息）。这是基于 IBM MQ 的方法的实际负载吗？

注 - 语言为 C++，服务器的操作系统为 Solaris。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:34:12.350

您描述的用例非常狭窄。这不仅仅是“套接字或队列”的情况，但其他考虑因素必须考虑到业务案例中：

1.  事物将如何被监控和管理？是否有必要编写所有向 NOC 报告系统健康状况并提供消息统计信息的部分，或者我可以使用 MQ 提供的内容吗？
2.  我需要排队还是这真的是一个同步应用程序？
3.  这真的是点对点的还是所涉及的应用程序参与了服务生态系统和上游/下游连接？它还需要与什么集成？
4.  是否需要消息丰富、路由、扇入、扇出、发布/订阅或其他功能？写代码还是使用 WMQ/WMQ Broker 原生特性？
5.  连接是否需要身份验证？加密？写代码还是使用 WMQ 原生特性？
6.  是否涉及监管合规因素，如果有，审计自定义代码与 COTS 传输的成本是多少？
7.  商店是否具有深厚的 C++ 技能并准备在代码的整个生命周期内保持这种深度？
8.  连接配置如何管理，是否无缝支持 HA 和 DR？写代码还是使用 WMQ 原生特性？
9.  如何管理异常逻辑和自动重新连接？写代码还是使用 WMQ 原生特性？

商业案例必须考虑的不仅仅是原始速度。当两种备选方案都能够满足吞吐量要求时尤其如此。一旦功能需求得到满足，商业案例中必须考虑所有这些其他方面（以及更多我没有想到的）。

至于具体问题...

以您希望的方式管理对队列的访问。多个线程竞争相同的消息，但传递给一个线程的消息不会传递给另一个线程。例外情况是消息回滚并再次可用，或者应用程序正在使用 pub/sub 并有意接收多个消息副本。

在应用程序端，调用在会话中是线程安全的。所以所有线程一起使用同一个会话`COMMIT`。通常一对使用请求/回复的线程协同操作。否则，每个线程一个会话可以为您提供所需的内容。

至于性能，这是一个苹果与橘子的比较。问题是提供异步消息传输的所有服务、诊断、弹性和其他功能的 C++ 套接字程序是否与该传输一样执行。答案通常是否定的。WMQ 已经优化了 20 年，只做一件事，而且做得非常好。一个新的自定义 C++ 套接字程序将更快地移动数据，但不提供相同的功能。因此，归结为应用程序是否需要如此少的 WMQ 功能，从长远来看，自定义代码所需的少数功能会更便宜，然后在应用程序的生命周期内维护这些功能。同样，答案通常是否定的。

有关消息吞吐率的详细信息，请转到[SupportPacs](http://ibm.co/SupptPacs)页面并查找名称以 MP__ 开头的那些，以获取所需的平台和版本。即使在普通的硬件上也可以实现 10k MPS 的小消息。

# android - 在主活动中组合代码

> ID：15362303
> 
> 赞同：-2
> 
> 时间：2013-03-12T13:14:11.827
> 
> 标签：android, listview, android-activity

我已经使用模板在 android 中创建选项卡和滑动程序，但现在无法在主要活动中创建列表。如何组合以下两段代码？

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" />

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="#b5b5b5"
    android:dividerHeight="1dp"
    android:listSelector="@drawable/list_selector" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:46:51.523

线

```
<?xml version="1.0" encoding="utf-8"?> 
```

必须超越一切。`ViewPager`不应该是布局的根元素。我建议设置`LinearLayout`为主布局的根元素，并将`ViewPager`内部设置为子元素。

我想[本教程](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)可能会有所帮助。它使用 Android 的[Fragments](http://developer.android.com/guide/components/fragments.html)。

# android - 禁用 GoogleMaps v2 视图，使其忽略所有触摸事件

> ID：15362305
> 
> 赞同：7
> 
> 时间：2013-03-12T13:14:27.170
> 
> 标签：android, google-maps-android-api-2

虽然我调用`setEnabled(false)`了地图的视图，但触摸事件仍然发生。就我而言，我设置了一个标记和一个信息窗口，我不希望用户关闭信息窗口。不幸的是，通过触摸地图，信息窗口仍然消失。

```
mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
mapFragment.getView().setEnabled(false); 
```

我已经这样做了

```
mapFragment.getMap().getUiSettings().setAllGesturesEnabled(false) 
```

但这并不能阻止触摸关闭信息窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T20:16:19.117

使用设置监听`GoogleMap`器并使用事件（`setOnMapClickListener`即什么都不做）怎么样？`setOnInfoWindowClickListener``setOnMarkerClickListener`

# mysql - 从 EC2 上的不同实例访问 mysql 数据库

> ID：15362307
> 
> 赞同：1
> 
> 时间：2013-03-12T13:14:30.040
> 
> 标签：mysql, amazon-ec2

我在 EC2 服务器中有 2 个实例，一个实例具有 mysql 数据库和存储在其中的内容，另一个实例用于访问存储在第一个实例中的数据。

我需要创建一个存储在数据库中的具有只读访问权限的用户。

所以

1.  `CREATE USER 'username'@'localhost' IDENTIFIED BY 'password';`

    `grant select on DBname.* to 'chowzter'@'localhost';`

**错误**

```
ERROR 1130 (HY000): Host 'ip-xx-xx-xxx-xxx.ec2.internal' is not allowed to connect to this MySQL server 
```

2.`CREATE USER 'username'@'ec2-xx-xx-xx-xxx.compute-1.amazonaws.com' IDENTIFIED BY 'password'`

`grant select on DBname.* to 'username'@'ec2-xx-xx-xxx-xxx.compute-1.amazonaws.com';`

这次使用的 ip 地址是`second instance`命令获取的内部 IP。

`ip a`

```
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 16436 qdisc noqueue state UNKNOWN 
link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
inet 127.0.0.1/8 scope host lo
inet6 ::1/128 scope host 
valid_lft forever preferred_lft forever

2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
link/ether 12:31:41:02:58:47 brd ff:ff:ff:ff:ff:ff
inet **XX.XX.XX.XXX/23** brd YY.YYY.YY.YYY scope global eth0
inet6 fe80::1031:41ff:fe02:5847/64 scope link 
valid_lft forever preferred_lft forever 
```

ip地址：“XX.XXX.XX.XXX/23”

命令：`mysql -hxx.xx.xxx.xxx -uusername -ppassword`

**错误**

```
ERROR 1045 (28000): Access denied for user 'username'@'ip-xx-xx-xxx-xxx.ec2.internal' (using password: YES) 
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:35:08.283

您应该为任何主机设置您的授权。但是通过向安全组授予权限来控制访问。如果实例停止/重新启动，内部 IP 可能会发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:25:45.663

终于解决了。

首先，我使用`%`.

```
 CREATE USER 'name'@'%' IDENTIFIED BY 'password'; 
```

然后，您可以授予该用户权限。

```
grant select on DBname.* to 'name'@'%';

mysql -h xx.xx.xxx.xxx -u user -p 
```

这使我有权从第二个实例以只读模式访问数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T06:55:28.417

要从不同的实例连接到 mysql 实例，您应该执行以下操作：

```
GRANT SELECT ON DBname.* TO 'chowzter'@'xx.xx.xxx.xx' IDENTIFIED BY 'mypassword';
FLUSH PRIVILEGES; 
```

例子：

```
GRANT SELECT ON facebook.* TO 'zuckerberg'@'10.0.0.420' IDENTIFIED BY 'mysecuredpassword';
FLUSH PRIVILEGES; 
```

您可以通过 MySql Documentation 更好地了解以下内容：http: [//dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

假设防火墙允许在 VPC 内访问并且您没有启用绑定地址，这应该可以正常工作。

# objective-c - self.navigationItem.leftBarButtonItem = nil; 不工作

> ID：15362308
> 
> 赞同：0
> 
> 时间：2013-03-12T13:14:30.480
> 
> 标签：objective-c, uinavigationitem

我正忙于一个 iPad 应用程序。在选择了菜单选项并运行了 push segue 之后，我需要根据方向隐藏和显示 leftBarButton。

我可以很好地找到方向，并且我的代码 `self.navigationItem.leftBarButtonItem = nil;`正在根据我的日志运行，但按钮并没有隐藏 - 这仅在 segue 推送后不起作用。

有谁知道为什么这没有发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:17:07.340

尝试这个：

```
[self.navigationItem setHidesBackButton:YES]; 
```

# php - 从数组中删除空值

> ID：15362313
> 
> 赞同：0
> 
> 时间：2013-03-12T13:14:50.743
> 
> 标签：php, arrays

我有一个使用 DOM 从 html 中提取的数组。现在如下面的数组所示，有很多我不想要的空数据。所以无论我尝试从数组中删除空值，它都没有被删除。

```
Array ( [0] => [1] => Outpost Congratulations13 [2] => [3] => [4] => [5] => [6] =>
 [7] => Yard will reflect the type of work that they do and the strength and variety of their membership, from recent graduates to emerging and mid-career artists. 
[8] => [9] => [10] => [11] => Gallery  Closed Good Friday, open Bank Holiday Monday. Admission Free 
[12] => [13] => K  Yard, Castle Street 
[14] => [15] => Friday 1 Mar 3 [16] => [17] => [18] => [19] => www.somesite.co.uk 
[20] => [21] => [22] => [23] => Map [24] => [25] => Contact the Organiser Tell a Friend about this Event [26] => [27] => Plan Your Journey [28] => [29] => [30] => ) 
```

我所尝试的一切：-

1.  array_filter ：它没有工作。
2.  许多检查值是否为空的功能仍然不起作用。
3.  我尝试使用 strlen 查找空字符串的长度，但它显示 22, 2 30 作为长度。
4.  我使用 str_replace 将空格替换为 ntg 仍然 nt 工作，并且 stlen 显示 22、28 等用于空值。
5.  我用过trim bt没用...

任何人都可以帮助我了解为什么数据的 strlen 为 22 或更多。以及如何从数组中删除这些类型的元素？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:22:26.863

这应该做你需要的：

```
$array = array(
  'Hello',
  '',
  0,
  NULL,
  FALSE,
  '0',
  '    ',
);

$new_array = array_filter($array, function ($value)
{
    return strlen(trim($value));
}
); 
```

这将给出：

```
Array ( [0] => Hello [2] => 0 [5] => 0 ) 
```

使用`array_filter($array)`or的问题`array_filter($array, 'trim')`是字符串/整数`0`也将被删除，这可能不是您想要的？

编辑：

如果您使用的是 PHP < 5.3，请使用以下内容：

```
function trim_array ($value)
{
    return strlen(trim($value));
}

$new_array = array_filter($array, 'trim_array'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T13:24:05.617

因为数据有空字符串（22个空格等），我们需要修剪它们

```
$emptyRemoved = array_filter($myArray, 'trim'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:25:19.743

```
function array_remove_empty($arr){
    $narr = array();
    while(list($key, $val) = each($arr)){
        if (is_array($val)){
            $val = array_remove_empty($val);
            // does the result array contain anything?
            if (count($val)!=0){
                // yes :)
                $narr[$key] = $val;
            }
        }
        else {
            if (trim($val) != ""){
                $narr[$key] = $val;
            }
        }
    }
    unset($arr);
    return $narr;
}

array_remove_empty(array(1,2,3, '', array(), 4)) => returns array(1,2,3,4) 
```

# c# - 如何在列表视图中使用模板（asp.net，c#）

> ID：15362315
> 
> 赞同：3
> 
> 时间：2013-03-12T13:14:56.210
> 
> 标签：c#, asp.net, listview

我有许多页面在相同的布局中显示相同的结果（如搜索结果、顶部查看、最近添加等）如果我想更改任何字段，我必须在所有页面中执行此操作。是否可以在列表视图中有一个模板或用户控件，我可以在一个地方更改它以及如何传递 id 参数？

附加信息：现在我有这样的事情：

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource" DataKeyNames="id">
    <ItemTemplate>
                 Id:
         <asp:Label ID="IDLabel" runat="server" 
         Text='<%# Eval("id") %>' />
         Description:
         <asp:Label ID="DescriptionLabel" runat="server" 
              Text='<%# Eval("Description") %>' />
   </ItemTemplate>
</asp:ListView> 
```

我想拥有的是：

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource" DataKeyNames="id">
    <ItemTemplate>
         <usrCtrl:info ID="info1" runat="server" /> 
   </ItemTemplate>
</asp:ListView> 
```

和一个带有模板的文件：

```
Id:
<asp:Label ID="IDLabel" runat="server" 
Text='<%# Eval("id") %>' />
Description:
<asp:Label ID="DescriptionLabel" runat="server" 
    Text='<%# Eval("Description") %>' /> 
```

谢谢，吉姆·奥克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:46:18.773

尝试这个：

**列表显示：**

```
<asp:ListView ID="ListView2" runat="server" 
    onitemdatabound="ListView2_ItemDataBound">
  <ItemTemplate>
     <usrCtrl:info Description_Lbl='<%# Bind("id") %>' 
                 ID_Lbl='<%# Bind("Description") %>' ID="info1"  runat="server" />
 </ItemTemplate>
</asp:ListView> 
```

**用户控制代码：**

**信息.ascx：**

```
<%@ Control Language="C#" AutoEventWireup="true" 
                    CodeBehind="info.ascx.cs" Inherits="info" %>
<asp:Label ID="IDLabel" runat="server"  />
Description:
<asp:Label ID="DescriptionLabel" runat="server"  /> 
```

**信息.ascx.cs：**

```
public partial class info: System.Web.UI.UserControl
{
    public string ID_Lbl {get;set;}
    public string Description_Lbl { get; set; }
    protected void Page_Load(object sender, EventArgs e)
    {
        IDLabel.Text = ID_Lbl;
        DescriptionLabel.Text = Description_Lbl;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:29:33.723

您可以使用整个 ListView 创建一个用户控件（*.ascx 文件），然后公开 DataSource 以绑定页面中的数据。

我发现这篇文章很有帮助：

[如何在用户控件的.aspx 文件中设置DataSource 属性？](https://stackoverflow.com/questions/6659611/how-to-set-datasource-property-in-aspx-file-of-a-user-control)

# microdata - “书签”项目的架构类型

> ID：15362325
> 
> 赞同：0
> 
> 时间：2013-03-12T13:15:25.520
> 
> 标签：microdata, schema.org, microformats

书签项目是否有适当的模式类型，例如 Reddit、Digg 等？

可以使用“文章”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:01:42.663

文章适合博客文章，所以这对我来说很有意义。schema.org 中没有书签规范。我会`rel="tag"`用来实现微格式。微格式与 schema.org/microdata 不同。schema.org 文章： http: [//schema.org/Article](http://schema.org/Article)微格式标签： http: [//microformats.org/wiki/rel-tag](http://microformats.org/wiki/rel-tag)

# vba - 将值填充到下一行

> ID：15362335
> 
> 赞同：0
> 
> 时间：2013-03-12T13:16:00.993
> 
> 标签：vba

我有一个按钮，可以随时在表格中输入颜色、数量和截止日期。此代码工作正常，但我希望它填充下面的下一行，而不是每次单击按钮时覆盖相同的行

```
Sub add()

Dim Colour As Integer
Dim Quantity As Integer
Dim Duedate As Date

Colour = Range("F7").Value
Quantity = Range("H7").Value
Duedate = Range("J7").Value

Range("B14").Value = Colour
Range("C14").Value = Quantity
Range("D14").Value = Duedate

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:38:49.923

这应该可以解决问题：

```
Sub add()
    With ActiveSheet.Cells(ActiveSheet.Cells(Rows.Count, 2).End(xlUp).Row + 1, 2)
        .Value = ActiveSheet.Range("F7").Value
        .Offset(0, 1).Value = ActiveSheet.Range("H7").Value
        .Offset(0, 2).Value = ActiveSheet.Range("J7").Value
    End With
End Sub 
```

# algorithm - 不同的数字计数

> ID：15362338
> 
> 赞同：7
> 
> 时间：2013-03-12T13:16:02.777
> 
> 标签：algorithm, count, distinct, digit

是否可以在恒定时间内计算一个数字中的不同数字`O(1)`？

假设`n=1519`输出应该是`3`因为有`3`不同的数字`(1,5,9)`。

我已经`O(N)`及时完成了，但有人知道如何及时找到它`O(1)`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:40:30.593

我假设`N`是 的位数`n`。如果 的大小`n`是无限的，则*一般*不能在 O(1) 时间内完成。

考虑一下这个数字`n=11111...111`，有 2 万亿位数字。如果我将其中一个数字从 a 切换`1`到 a `2`，如果不以某种方式查看每个数字，就无法发现这一点。因此处理一个有 2 万亿位数字的数字必须至少进行（大约）2 万亿次操作，一般来说，一个有数字的`N`数字必须`N`至少进行（大约）操作。

然而，对于几乎所有的数字，简单的`O(N)`算法很快就完成了，因为你可以在达到 10 个不同的数字时立即停止。几乎所有足够长的数字都包含 10 位数字：例如，在查看前 100 位数字后，不以答案“10”结尾的概率约为 0.00027，而在前 1000 位数字之后，它约为 1.7e-45。但不幸的是，有一些奇怪的情况会造成最坏的情况`O(N)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:09:31.653

在看到有人真的对这个问题发表了认真的答案之后，我宁愿在这里重复我自己的作弊，这是@SimonNickerson描述的答案的一个特例：

O(1) 是不可能的，除非你在基数 2 上，因为这样，除了 0 之外的每个数字都有 1 和 0，因此我的“解决方案”不仅适用于整数......

**编辑**

> 2^k - 1 怎么样？不都是1吗？

讨厌！是的...我应该知道，当某些事情看起来如此简单时，它以某种方式存在缺陷...如果我涵盖了所有 0 的情况，我也应该涵盖了所有 1 的情况。

幸运的是，可以很快地测试这种情况（如果加法和按位与被认为是 O(1) 操作）：如果 x 是要测试的数字，则以这种方式计算 y：`y=(x+1) AND x`。如果`y=0`，那么`x=2^k - 1`。因为这是唯一需要通过加法翻转所有位的情况。当然，这是相当有缺陷的，因为位长度超过了总线宽度，按位运算符不再是 O(1)，而是 O(N)。

同时，我认为它可以降低到 O(logN)，方法是将数字分解为总线宽度大小的块，然后将相邻的块与运算并在一起，重复直到只剩下一个：如果里面没有 0测试的数字，最后一个也将满1s...

**EDIT2**：我错了......这*仍然*是O（N）。

# php - curl_setopt cacert.pem for paypal

> ID：15362350
> 
> 赞同：7
> 
> 时间：2013-03-12T13:16:38.557
> 
> 标签：php, paypal, certificate, verification, paypal-ipn

我正在尝试为 IPN (paypal) 验证设置回调处理程序。我知道 curl 做什么，但我不知道 'cacert.pem' 是什么（证书...？）。

这是 callback.php 文件失败（存在）的地方：

```
curl_setopt($ch, CURLOPT_CAINFO, 'cacert.pem');
if( !($res = curl_exec($ch)) ) {
    echo ("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch); 
```

带有以下错误消息：

> 设置证书验证位置时出错：CAfile: cacert.pem CApath: none 处理 IPN 数据时

于是我下载了cacert.pem，复制到callback.php文件所在的目录下。

这是上面代码之前的注释：

```
// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below. 
```

我正在使用XAMPP，这会是问题吗？

最后，这是直接来自开发者页面的整个 php 文件： [https ://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

```
<?php

// STEP 1: Read POST data

// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead. 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
   if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
curl_setopt($ch, CURLOPT_CAINFO, 'cacert.pem');
if( !($res = curl_exec($ch)) ) {
    echo ("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];

    $string = "------------------------\r\n";
    $string .= "item_name: ".$item_name."\r\n";
    $string .= "item_number: ".$item_number."\r\n";
    $string .= "payment_status: ".$payment_status."\r\n";
    $string .= "payment_amount: ".$payment_amount."\r\n";
    $string .= "payment_currency: ".$payment_currency."\r\n";
    $string .= "txn_id: ".$txn_id."\r\n";
    $string .= "receiver_email: ".$receiver_email."\r\n";
    $string .= "payer_email: ".$payer_email."\r\n";

    $fp = fopen('test.log', 'w');
    fwrite($fp, $string."\r\n");
    fclose($fp);

} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
}
?> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T13:23:55.403

根据您需要设置（完整）目录路径的评论，如果 pem 文件与脚本位于同一目录中，那么这应该可以工作：

```
curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem'); 
```

有关 cacert.pem 文件是什么的说明，[请查看这个接受的答案](https://serverfault.com/a/241175)。

# drupal-7 - common.inc 中的“警告：json_encode()”

> ID：15362354
> 
> 赞同：1
> 
> 时间：2013-03-12T13:16:41.267
> 
> 标签：drupal-7, drupal-views, json

当我访问视图并尝试编辑/添加字段时，覆盖显示但没有任何内容。之后我总是收到以下警告：

> 警告：json_encode()：json_encode() 中的参数中的 UTF-8 序列无效（.../includes/common.inc 的第 4972 行）。

此外，如果我尝试重新加载视图选项页面，并再次访问一个字段，则会弹出一个包含以下内容的警报窗口：

> Ein AJAX-Fehler ist aufgetreten。HTTP-Rückgabe-Code 500
> Im folgenden finden Sie Debugging-Informationen...

![截屏](../Images/d9d15e7c7b3e55f774d9e60f4560d52a.png)

我用谷歌搜索没有得到任何有用的结果。
如果有人可以帮助我解决这个问题，我会非常高兴。

# transactions - Spring Neo4j with aspectj，事务配置

> ID：15362355
> 
> 赞同：1
> 
> 时间：2013-03-12T13:16:42.217
> 
> 标签：transactions, aspectj, autowired, spring-data-neo4j

我正在使用Neo4j**嵌入式****模式**、**spring 数据**和**aspectj**映射。

***相关POM切片：***

```
 <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j</artifactId>
        <version>2.2.0.RELEASE</version>
    </dependency>
  <dependency>
        <groupId>org.neo4j.app</groupId>
        <artifactId>neo4j-server</artifactId>
        <version>1.8</version>
    </dependency>
    <dependency>
        <groupId>org.neo4j.app</groupId>
        <artifactId>neo4j-server</artifactId>
        <version>1.8</version>
        <classifier>static-web</classifier>
    </dependency>  
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j-aspects</artifactId>
        <version>2.2.0.RELEASE</version>
    </dependency> 
```

***context.xml 内容：***

```
<util:properties id="props" location="classpath:app.properties" />
<context:spring-configured />

<context:component-scan base-package="com.writelife.server.services" />
<tx:annotation-driven />

<!--<import resource="mongo-config.xml" /> -->
<import resource="neo4j-config.xml" /> 
```

***Neo4j-config.xml 内容：***

```
<context:annotation-config />
<context:spring-configured />

<bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase">
    <constructor-arg value="c:/neo4j-community-1.8-writelife/data/graph.db" />
    <constructor-arg>
        <map>
            <entry key="enable_remote_shell" value="true" />
        </map>
    </constructor-arg>
</bean>

<neo4j:config graphDatabaseService="graphDatabaseService" />
<bean id="serverWrapper" class="org.neo4j.server.WrappingNeoServerBootstrapper"
    init-method="start" destroy-method="stop">
    <constructor-arg ref="graphDatabaseService" />
</bean>

<bean id="neo4jTransactionManager"
    class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager">
        <bean class="org.neo4j.kernel.impl.transaction.SpringTransactionManager">
            <constructor-arg ref="graphDatabaseService" />
        </bean>
    </property>
    <property name="userTransaction">
        <bean class="org.neo4j.kernel.impl.transaction.UserTransactionImpl">
            <constructor-arg ref="graphDatabaseService" />
        </bean>
    </property>
</bean>

<tx:annotation-driven mode="aspectj"
    transaction-manager="neo4jTransactionManager" />

<neo4j:repositories base-package="com.writelife.server.graph.repository"
    repository-impl-postfix="CustomImpl" /> 
```

我正在通过扩展 GrapRepository 的存储库和通过 aspectj 支持的节点/关系（域驱动开发）与 Neo4j 进行交互....

当我尝试使用 @Transactional("transactionManager") 或 @Transactional("neo4jTransactionManager") 注释我的服务时，我希望事务从**服务级别开始**

例如：

```
 @Service
 @Transactional("transactionManager")
 public class StoryService extends AbstarctCrudService<Story> 
```

我在与自动接线相关的弹簧上下文加载中遇到异常...

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'utilsService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.writelife.server.services.StoryService com.writelife.server.services.UtilsService.storyService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.writelife.server.services.StoryService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925) ~[spring-context-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472) ~[spring-context-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:388) ~[spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:293) ~[spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) [catalina.jar:7.0.33]
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) [catalina.jar:7.0.33]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.33]
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559) [catalina.jar:7.0.33]
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) [catalina.jar:7.0.33]
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.7.0_02]
at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.7.0_02]
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.7.0_02]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.7.0_02]
at java.lang.Thread.run(Unknown Source) [na:1.7.0_02]
    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.writelife.server.services.StoryService com.writelife.server.services.UtilsService.storyService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.writelife.server.services.StoryService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:513) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
... 23 common frames omitted
  Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.writelife.server.services.StoryService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:947) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:816) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:730) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485) ~[spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
... 25 common frames omitted 
```

任何人都可以帮助我做错了什么？如何在不损坏自动接线的情况下设置事务？

谢谢

# java - 如何将子标签添加到已经使用 Java 定义的 Xml 文件？

> ID：15362361
> 
> 赞同：0
> 
> 时间：2013-03-12T13:16:56.297
> 
> 标签：java, xml, spring

我有一个包含 Spring 项目配置的 XML 文件，我想动态添加一个新 bean。我必须修改初始 XML 文件并添加我的新 bean 定义：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

<bean id="config"
        class="myclass">
        <property name="configXml">
            <value>config.xml</value>
        </property>
    </bean>

<-- here a want to add a new bean definition <bean>....</bean> -->

</beans> 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:44:42.723

我仍然不是 100% 你的意思，但这里有两个案例可以尝试。

如果您想根据某些派生值指定 bean 的属性，您可以使用 Spring 表达式语言

[http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html)

```
<bean id="someBean" class="example.SomeBean">
    <property name="foo" value="#{config.whatever}"/>
</bean> 
```

如果你想要更复杂的东西，你可以使用工厂 bean 以编程方式构造一个 bean

```
<bean id="someBean" class="example.SomeBeanFactory">
    <property name="config" ref="config"/>
</bean> 
```

有类似的东西

```
class SomeBeanFactory implements FactoryBean<SomeBean> {
    public void setConfig(MyClass config) { ... }

    public SomeBean getObject() {
        ...
    }
} 
```

# c++ - 包含来自 DLL 的标头的理想方法？

> ID：15362364
> 
> 赞同：1
> 
> 时间：2013-03-12T13:17:04.303
> 
> 标签：c++, dll

我一直在用多个项目设置测试东西，其中控制台应用程序访问来自多个 DLL 的函数。

我考虑过如何在控制台应用程序中包含 DLL 的标头。我目前的实现如下，但管理起来很头疼，甚至有时会遇到错误：

*   每个 DLL 项目都有一个名为“Include”的文件夹
*   控制台应用程序项目引用每个 DLL 项目的 Include 文件夹（如 msdn guide to working with DLLs 所建议的）
*   每个 DLL 项目都包含一个标头，其中包含该项目中的所有标头
*   然后控制台应用程序#includes这些“主标头”
*   每个项目都使用预编译的头文件“stdafx”并且每个文件都包含它。

在我开始重载运算符之前效果很好。我相信悲痛是由预编译的标头以某种方式引起的，这是我当前使用 stdafx 的示例：

```
#define DLL // Found in every DLL, not in the console project

#ifdef DLL
#define DLLEI   __declspec(dllexport)
#else
#define DLLEI   __declspec(dllimport)
#endif

#include <iostream>
#include <vector>

#include "Include\Engine.h"

using namespace std; 
```

有了这个，我有时会得到一些不相关的随机编译器错误，我可以通过从“主标头”中排除标头并在控制台应用程序中单独包含麻烦制造者来修复这些错误。

建议有什么可以做得更好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:33:20.133

`__declspec(dllexport)`并且`__declspec(dllimport)`定义应该放在每个公共 Dll 包含文件中，或者至少放在包含所有其他文件的主 Dll 公共包含文件中。这些定义不应该在`stdafx.h`.

```
#define DLL // Found in every DLL, not in the console project 
```

这是不正确的，每个 Dll 都必须有唯一的预处理器定义。在您的情况下，一个 Dll 依赖于另一个，它总是将另一个 Dll 函数编译为`__declspec(dllexport)`

确保每个标题都`#pragma once`在开头。

考虑为所有项目使用公共`Include`目录。

正如评论中已经提到的，`using namespace`只能在源文件中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:12:11.023

这篇文章回答了我的很多问题。

[http://www.codeproject.com/Articles/6351/Regular-DLL-Tutor-For-Beginners](http://www.codeproject.com/Articles/6351/Regular-DLL-Tutor-For-Beginners)

# c++ - 如何从文件中读取整行（带空格）？

> ID：15362367
> 
> 赞同：4
> 
> 时间：2013-03-12T13:17:19.490
> 
> 标签：c++, file, stl, io, fstream

我正在使用 STL。我需要从文本文件中读取行。如何读到第一行`\n`但不读到第一行`' '`（空格）？

例如，我的文本文件包含：

```
Hello world
Hey there 
```

如果我这样写：

```
ifstream file("FileWithGreetings.txt");
string str("");
file >> str; 
```

然后`str`将只包含“Hello”，但我需要“Hello world”（直到第一个`\n`）。

我以为我可以使用该方法`getline()`，但它需要指定要读取的符号数量。就我而言，我不知道应该阅读多少个符号。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T13:18:55.930

你可以使用getline：

```
#include <string>
#include <iostream>

int main() {
   std::string line;
   if (getline(std::cin,line)) {
      // line is the whole line
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:31:30.040

使用`getline`功能是一种选择。

或者

`getc`用 do-while 循环读取每个字符

如果文件由数字组成，这将是一种更好的阅读方式。

```
do {
    int item=0, pos=0;
    c = getc(in);
    while((c >= '0') && (c <= '9')) {
      item *=10;
      item += int(c)-int('0');
      c = getc(in);
      pos++;
    } 
    if(pos) list.push_back(item);
  }while(c != '\n' && !feof(in)); 
```

如果您的文件由字符串组成，请尝试修改此方法..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:41:52.033

感谢所有回答我的人。我为我的程序编写了新代码，该代码有效：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main(int argc, char** argv)
{
    ifstream ifile(argv[1]);

    // ...

    while (!ifile.eof())
    {
        string line("");
        if (getline(ifile, line))
        {
            // the line is a whole line
        }

        // ...
    }

    ifile.close();

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:33:24.300

我建议：

```
#include<fstream>

ifstream reader([filename], [ifstream::in or std::ios_base::in);

if(ifstream){ // confirm stream is in a good state
   while(!reader.eof()){
     reader.read(std::string, size_t how_long?);
     // Then process the std::string as described below
   }
} 
```

对于std::string，任何变量名都可以，持续多长时间，无论你觉得合适还是使用上面的std::getline。

要处理该行，只需在 std::string 上使用迭代器：

```
std::string::iterator begin() & std::string::iterator end() 
```

并逐个字符地处理迭代器指针，直到您找到所需的 \n 和 ' '。

# android - 请帮忙，试图从另一个班级获取数据

> ID：15362368
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:17:19.557
> 
> 标签：android, xml

[http://pastebin.com/2vhnNJpA](http://pastebin.com/2vhnNJpA)

有人可以帮我看看这段代码并帮助我尝试显示来自另一个人的数据吗`class`

```
TextView tv = (TextView)findViewById(R.id.bill_periodFrom);
tv.setText(itemisedbill.getperiodFrom());
tv = (TextView)findViewById(R.id.bill_periodTo);
tv.setText(itemisedbill.getperiodTo());
tv = (TextView)findViewById(R.id.bill_cost);
tv.setText(itemisedbill.getcost());
tv = (TextView)findViewById(R.id.bill_amountUsed);
tv.setText(itemisedbill.getamountUsed()); 
```

这是我遇到问题的代码的一小部分，eclipse 说 itemisedbill 为 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:23:13.973

**第一活动**

```
Intent i = new Intent(A.this, B.class);
i.putExtra("numbers", "number");
startActivity(i); 
```

**第二活动**

```
//in oncreate method
String number= getIntent().getStringExtra("numbers"); 
```

或进一步阅读你必须阅读本教程： -

[http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:25:19.293

我邀请您再次阅读[Android AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ...您在参数方面犯了错误。

# dojo - Youtube 上的 Dojo 工具包 JSONP

> ID：15362369
> 
> 赞同：0
> 
> 时间：2013-03-12T13:17:27.030
> 
> 标签：dojo, youtube, jsonp

如何在 Youtube 视频上发送 JSONP 请求？我尝试使用以下代码获取视频 JSON 信息文件：

```
define ["dojo/request/script", "dojo/domReady!"], (script) ->
      script.get("//gdata.youtube.com/feeds/api/videos/NKE-RXR_XIs", {
        jsonp:"callback",
        query: {
          v: "2",
          alt: "json"
        }
      }).then (response) ->
        console.info response 
```

但我收到错误 400（错误请求）。在 Chrome 控制台中，我可以看到完整的错误：

```
GET http://gdata.youtube.com/feeds/api/videos/NKE-RXR_XIs?v=2&alt=json/[?&]callback=/dojo_request_script_callbacks.dojo_request_script0 400 (Bad Request) 
```

请问哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:03:16.093

好消息，我不认为你做错了什么。我在使用 Dojo 工具包 v.1.8.3 进行 JSON-P 调用时遇到了类似的问题。

坏消息，我只是将其归结为以下错误：`dojo/request/script.js`

Dojo 发出错误请求，因为`RegExp`对象被附加到 URL 查询字符串而不是回调参数。您可以在错误消息中看到它：`/[?&]callback=/`. 那一点应该是：`&callback=`

看起来他们可能会在 v.1.8.4 中修复它

[http://bugs.dojotoolkit.org/ticket/16408](http://bugs.dojotoolkit.org/ticket/16408)

# c# - 无法在 MVC 中定义自定义渲染器 lambda

> ID：15362371
> 
> 赞同：1
> 
> 时间：2013-03-12T13:17:30.863
> 
> 标签：c#, asp.net-mvc, razor

我想在我的 MVC 视图中将自定义渲染器定义为 lambda，我可以在部分中使用它来多次渲染相同的东西。我计划将其存储在视图数据中。到目前为止，我已经创建了这个扩展方法来存储渲染器：

```
public static class HtmlHelperExtensions
{
   public static void DefineRenderer<TModel>(this HtmlHelper<TModel> html, string rendererName, Action renderer)
   {
      html.ViewData["_Renderer" + rendererName] = renderer;
   }
} 
```

我试图在我的视图中定义渲染器，但它不起作用；我假设我的语法是关闭的。有人可以告诉我我在这里做错了什么吗？我只希望它在调用时呈现测试段落：

```
@Html.DefineRenderer("AnalysisTableHeader", () => {
    <p>test paragraph</p>
@}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:49:28.013

-`DefineRenderer`方法需要返回除 void 之外的任何内容，例如`IHtmlString`使用 razor `@`-syntax 调用它，否则您需要像这样调用它：

```
@{
    Html.DefineRenderer("AnalysisTableHeader", () => {
        <p>test paragraph</p>
    });
} 
```

编辑：对不起，我看到`renderer`参数是 type `System.Action`。我认为它必须是类型`System.Func<dynamic, HelperResult>`，您需要调用它

```
@{ Html.DefineRenderer("AnalysisTableHeader", @<text><p>test paragraph</p></text>); } 
```

例如。然后你可以像这样渲染它`render(null).ToHtmlString()`：无论如何请注意，如果您在视图中执行此类操作，您可能会遇到部分视图缓存问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:10:16.813

我仍然不能 100% 确定这是否是您需要的，但也许它会有所帮助。在局部视图中定义 @helper 并根据 Model 的值决定要渲染的版本：

在代码中使用标头类型声明枚举

```
public enum HeaderTypes
{
    AnalysisTable,
    SomethingElse
} 
```

那么在你看来

```
@helper RenderHeader(HeaderTypes headerType) {
    switch (headerType)
    {
        case HeaderTypes.AnalysisTable:
            @: <p>your html</p>
            break;
        default: 
            @: <p>default</p>
            break;
    }
}

@RenderHeader(HeaderTypes.None)
@RenderHeader(HeaderTypes.AnalysisTable) 
```

或者您可以根据字符串值或其他内容进行切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:23:06.633

从@mariozski 的评论中得到一些启发，我设法获得了我想要工作的行为。我使用 a`@helper`作为渲染器。我传递给部分的模型包含辅助渲染的结果，即。一个`HelperResult`。所以它看起来像这样：

```
public class AnalysisResponseTableViewModel {
    public HelperResult HeaderTypeRowRenderer { get; set; }
    public List<AnalysisUserResponseViewModel> Responses { get; set; }
} 
```

然后，调用视图像这样调用部分：

```
@helper RenderHeaderTypeRow() {
    <tr class="headerTypeRow">
        <td>Header type row</td>
        <td>Goes here</td>
    </tr>
}

@Html.Partial("AnalysisResponseTableContentsPartial",
    new AnalysisResponseTableViewModel {
        Responses = Model.OverallCaseStudyUserResponses,
        HeaderTypeRowRenderer = RenderHeaderTypeRow()
    }
) 
```

最后，部分本身可以像这样多次呈现“标题类型行”：

```
@Html.Raw(Model.HeaderTypeRowRenderer.ToHtmlString())
@{bool reachedSummaryRows = false;}
@foreach (var response in Model.Responses) {
    if (!reachedSummaryRows && !response.IsPass.HasValue) {
        reachedSummaryRows = true;
        @:@Html.Raw(Model.HeaderTypeRowRenderer.ToHtmlString())
    }

    // other table rows here
} 
```

# python - 在 tkinter 小部件中显示子进程的实时输出

> ID：15362372
> 
> 赞同：5
> 
> 时间：2013-03-12T13:17:45.227
> 
> 标签：python, python-2.7, tkinter, subprocess

我的问题和这个问题几乎一样： [Widget to Display subprocess stdout?](https://stackoverflow.com/questions/8133487/widget-to-display-subprocess-stdout) 但更进一步。

我有以下代码（python2.7）：

```
def btnGoClick(p1):
    params = w.line.get()
    if len(params) == 0:
        return

    # create child window
    win = tk.Toplevel()
    win.title('Bash')
    win.resizable(0, 0)
    # create a frame to be able to attach the scrollbar
    frame = ttk.Frame(win)
    # the Text widget - the size of the widget define the size of the window
    t = tk.Text(frame, width=80, bg="black", fg="green")
    t.pack(side="left", fill="both")
    s = ttk.Scrollbar(frame)
    s.pack(side="right", fill="y")
    # link the text and scrollbar widgets
    s.config(command=t.yview)
    t.config(yscrollcommand=s.set)
    frame.pack()

    process = subprocess.Popen(["<bashscript>", params], shell=False,
        stdout=subprocess.PIPE, stderr=subprocess.STDOUT)

    while True:
        out = process.stdout.readline()
        if out == '' and process.poll() is not None:
            break
        print out
        t.insert(tk.END, out) 
```

“长时间运行” bash 脚本的输出是实时捕获的（出现在控制台中），但 Tkinter 窗口仅在子进程结束后出现！

如何在子流程启动之前显示窗口并实时更新其内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:03:42.647

最后我找到了解决方案。窗口构建后，您必须添加：

```
frame.pack()
# force drawing of the window
win.update_idletasks() 
```

然后在小部件中插入每一行之后，您还必须仅在小部件上使用相同的方法强制刷新。

```
# insert the line in the Text widget
t.insert(tk.END, out)
# force widget to display the end of the text (follow the input)
t.see(tk.END)
# force refresh of the widget to be sure that thing are displayed
t.update_idletasks() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T12:44:11.350

这是一个有趣的解决方案。那有可能拥有整个工作代码吗？

我问是因为我想知道如何`while True`不阻止整个 GUI 的可用性......不是吗？

正如怀疑的那样，我试过了，这个例子并没有真正起作用。如果您使用类似“ `ls -Rf /`”的命令作为命令，您将看到 while 循环将使 txt 输出流畅地进行。然而，两个窗口（主要和次要）都会阻塞大量时间。

我怀疑您需要在单独的线程或进程中发送 print txt 部分。或者，如果你使用 pygtk，你可以使用类似的东西

```
gobject.io_add_watch(self.ep1.stdout,       # file descriptor
                     gobject.IO_IN,         # condition
                     self.write_to_buffer ) # callback 
```

这实际上是为此而发明的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-14T19:27:03.183

以防万一其他人正在寻找它...

```
log_box_1 = tk.Text(root, borderwidth=3, relief="sunken")

with subprocess.Popen("ls -la", shell=True, stdout=subprocess.PIPE, bufsize=1, universal_newlines=True) as p:
            for line in p.stdout:
                log_box_1.insert(tk.END, line) 
```

从[这里](https://books.google.com.br/books?id=5gxTDwAAQBAJ&pg=PA369&lpg=PA369&dq=how%20to%20set%20popen%20stdout%20to%20a%20tkinter%20text&source=bl&ots=lO0NPnalhq&sig=ACfU3U319-Q8DV6M4GwPaFb0-HyzPjQdHg&hl=pt-BR&sa=X&ved=2ahUKEwjv06nvzuniAhVpIrkGHZNXC_gQ6AEwAnoECAgQAQ#v=onepage&q=how%20to%20set%20popen%20stdout%20to%20a%20tkinter%20text&f=false)

# dump - 为所有维基百科图像下载哪些文件

> ID：15362373
> 
> 赞同：3
> 
> 时间：2013-03-12T13:17:46.220
> 
> 标签：dump, wikipedia

我想下载所有中文维基百科数据（文本+图像），我下载了文章但我对这些媒体文件感到困惑，而且远程媒体文件非常大，它们是什么？我必须下载它们吗？

来自： http: [//ftpmirror.your.org/pub/wikimedia/imagedumps/tarballs/fulls/20121104/](http://ftpmirror.your.org/pub/wikimedia/imagedumps/tarballs/fulls/20121104/)

```
zhwiki-20121104-local-media-1.tar   4.1G
zhwiki-20121104-remote-media-1.tar  69.9G
zhwiki-20121104-remote-media-2.tar  71.1G
zhwiki-20121104-remote-media-3.tar  69.3G
zhwiki-20121104-remote-media-4.tar  48.9G 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:25:59.817

我假设它们是维基共享资源中包含的媒体文件，这是文章中的大部分图像。来自[https://wikitech.wikimedia.org/wiki/Dumps/media](https://wikitech.wikimedia.org/wiki/Dumps/media)：

> 对于每个 wiki，我们通过 /backups/imageinfo/wmfgetremoteimages.py 转储图像、图像链接和重定向表。文件被写入 dataset2 上的 /data/xmldatadumps/public/other/imageinfo/。
> 
> 从上面我们然后生成每个wiki的所有远程存储（即公共）媒体的列表，对同一脚本使用不同的参数。

对于中文维基百科的所有文件来说，它并没有那么大:-)

# .net - 在构建 Zip 文件时减少内存使用

> ID：15362375
> 
> 赞同：0
> 
> 时间：2013-03-12T13:17:50.180
> 
> 标签：.net, zipfile

我的应用程序具有从数据库导出数据的功能。它使用 Ionic ZIP 库构建一个包含数据的 zip 文件。

该过程通过检索每页 1,000 行的数据来工作。检索到的数据每行数据包含 2 个图像 (JPEGS)。“导出”包含一个 HTML 文件，其中包含一个 HTML 表格。该表包含来自每一行的重要信息和图像的链接。每个图像都作为 JPEG 文件存储在 ZIP 文件中。编写的 HTML 包含一个链接到相应图像文件的锚标记。

一切正常，但我最近发现`OutOfMemoryException`在导出大量行时会抛出 an （在我发现问题的情况下超过 24,000 行）。在查看我的代码时，我没有看到任何明显的泄漏（或者我不会发布这个，对吗？;)）

这是输出正在导出的数据的方法：

```
private void OutputReads( StreamWriter writer, ZipFile zipFile, BackgroundWorker worker, ExportArgs args ) {
    int ReadCount = Math.Min( args.ReadMatches, args.ResultsLimit );

    writer.WriteLine( "<h2>Matching Reads:</h2>" );
    writer.WriteLine( "<p>Number in Database: {0}</p>", args.ReadMatches.ToString( "#,##0" ) );
    writer.WriteLine( "<p>Number in Report:   {0}</p>",      ReadCount  .ToString( "#,##0" ) );
    writer.WriteLine();

    if ( args.ReadMatches == 0 ) {
        return;
    }

    writer.WriteLine( "<table border=\"1\" cellspacing=\"0\" bordercolordark=\"black\" bordercolorlight=\"black\">" );
    writer.WriteLine( "<tr>" );
    writer.WriteLine( "<th width=\"110\"><b>Plate</b></th>" );
    writer.WriteLine( "<th width=\"60\"><b>State</b></th>" );
    writer.WriteLine( "<th width=\"200\"><b>Date / Time</b></th>" );
    writer.WriteLine( "<th width=\"142\"><b>Latitude</b?</th> " );
    writer.WriteLine( "<th width=\"142\"><b>Longitude</b?</th> " );
    writer.WriteLine( "<th width=\"125\"><b>Alarm Class</b></th>" );
    writer.WriteLine( "<th width=\"150\"><b>Notes</b></th>" );
    writer.WriteLine( "<th width=\"150\"><b>Officer Notes</b></th>" );
    writer.WriteLine( "<th width=\"150\"><b>Images</b></th>" );
    writer.WriteLine( "</tr>" );

    int noPages = ReadCount / args.PageSize + ( ReadCount % args.PageSize == 0 ? 0 : 1 );

    for ( int pageNo = 0, count = 0; pageNo < noPages; pageNo++ ) {
        if ( worker.CancellationPending ) {
            return;
        }

        ReadViewModel[] reads = null;

        try {
            reads = DataInterface.GetReads( args.LocaleCode, args.Plate, 
                                            args.StartDate, args.EndDate, 
                                            args.AlarmClasses, args.HotListId, 
                                            args.PageSize, pageNo
                                          );

        } catch ( DataAccessException ex ) {
            . . .
        } catch ( ThreadAbortException ) {
            // The thread is stopping.  Stop processing now.

        } catch ( Exception ex ) {
            . . .
        }

        foreach ( ReadViewModel read in reads ) {
            if ( worker.CancellationPending ) {
                return;
            }

            writer.WriteLine( "<tr>" );
            writer.WriteLine( "<td width=\"110\"><p align=\"left\" style=\"text-align:left\">{0}</p></td>"    , read.Plate );
            writer.WriteLine( "<td width=\"60\" ><p align=\"center\" style=\"text-align:center\">{0}</p></td>", read.State );
            writer.WriteLine( "<td width=\"150\"><p align=\"center\" style=\"text-align:center\">{0}</p></td>", read.TimeStamp );
            writer.WriteLine( "<td width=\"125\"><p align=\"center\" style=\"text-align:center\">{0}</p></td>", read.GPSInformation == null ? "&nbsp;" : read.GPSInformation.Position.Latitude.ToString(  "##0.000000" ) );
            writer.WriteLine( "<td width=\"125\"><p align=\"center\" style=\"text-align:center\">{0}</p></td>", read.GPSInformation == null ? "&nbsp;" : read.GPSInformation.Position.Longitude.ToString( "##0.000000" ) );
            writer.WriteLine( "<td width=\"125\"><p align=\"center\" style=\"text-align:center\">{0}</p></td>", read.AlarmClass     == null ? "&nbsp;" : read.AlarmClass );
            writer.WriteLine( "<td width=\"150\"><p align=\"left\" style=\"text-align:left\">{0}</p></td>"    , read.       Notes   == null ? "&nbsp;" : read.       Notes );
            writer.WriteLine( "<td width=\"150\"><p align=\"left\" style=\"text-align:left\">{0}</p></td>"    , read.OfficerNotes   == null ? "&nbsp;" : read.OfficerNotes );

            if ( read.ImageData == null ) {
                try {
                    DataInterface.GetPlateImage( read );
                } catch ( DataAccessException ex ) {
                    . . .
                } catch ( Exception ex ) {
                    . . .
                }
            }

            if ( read.OverviewImages == null ) {
                try {
                    DataInterface.GetOverviewImages( read );
                } catch ( DataAccessException ex ) {
                    . . .
                } catch ( Exception ex ) {
                    . . .
                }
            }

            if ( read.ImageData != null ) {
                string ext = LPRCore.CarSystem.ImageDataAccessor.GetImageFileExtension( read.ImageData );
                writer.Write( "<td width=\"150\"><p align=\"left\" style=\"text-align:left\"><a href=\".\\Images\\{0}.{1}\" target=\"_blank\">BW</a>", read.ID.ToString( "N" ), ext );

                string fileName = string.Format( ".\\Images\\{0}{1}", read.ID.ToString( "N" ), ext );

                if ( !zipFile.ContainsEntry( fileName ) ) {
                    zipFile.AddEntry( fileName, read.ImageData );
                }
            } else {
                writer.Write( "No Plate Image" );
            }

            if ( read.OverviewImages != null && read.OverviewImages.Length > 0 ) {
                for ( int i = 0; i < read.OverviewImages.Length; i++ ) {
                    string ext = LPRCore.CarSystem.ImageDataAccessor.GetImageFileExtension( read.OverviewImages[ i ].ImageData );
                    writer.Write( " - <a href=\".\\Images\\{0}_C{1}{2}\" target=\"_blank\">Color {1}</a>", read.ID.ToString( "N" ), i == 0 ? string.Empty : i.ToString(), ext );

                    string fileName = string.Format( ".\\Images\\{0}_c{1}{2}", read.ID.ToString( "N" ), i == 0 ? string.Empty : i.ToString(), ext );
                    if ( !zipFile.ContainsEntry( fileName ) ) {
                        zipFile.AddEntry( fileName, read.OverviewImages[ i ].ImageData );
                    }
                }
            } else {
                writer.Write( "No Overview Images" );
            }

            writer.WriteLine( "</p></td>" );
            writer.WriteLine( "</tr>" );
            count++;
            worker.ReportProgress( count, args );
        }
    }
    writer.WriteLine( "</table>" );
    writer.WriteLine();
} 
```

我在想也许 Zip 文件是问题所在，因为它没有被刷新到磁盘或类似的东西，并且随着行的处理而变得越来越大。

有没有一种方法可以将 zip 文件刷新到磁盘并释放所有图像，以便垃圾收集器释放它们，或者是否有另一种方法使用这个库来使用更少的内存构建 zip 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:19:24.480

在此处的另一位开发人员的帮助下，我能够解决此问题。

DotNetZip 库定义了将类型委托作为参数的`ZipFile.AddEntry`方法的重载。`WriteDelegate`向委托传递文件的名称和`Stream`必须将文件内容作为参数写入的 a。

我在我的代码中定义了一个名为`GetImageBytes`：

```
private void GetImageBytes( string entryName, Stream stream ) {
    Guid imageId;
    Guid.TryParse( Path.GetFileName( entryName ).Substring( 0, 32 ), out imageId );
    using ( BinaryWriter writer = new BinaryWriter( stream ) ) {
        try {
            writer.Write( DataInterface.GetImageData( imageId ) );

        } catch ( DataAccessException ex ) {
            DbMonitor.HandleDatabaseError( ex );

        } catch ( Exception ex ) {
            . . .
        }
    }
} 
```

为了完成这项工作，我必须在文件名中对数据库中图像的 ID 进行编码。该代码从文件名中解析 ID，然后通过调用我的服务层中的方法从数据库中检索图像字节。最后，它创建一个`BinaryWriter`并将图像数据发送到`Stream`.

我的程序现在可以导出超过 24,000 行数据，并且不会抛出`OutOfMemoryException`.

# google-apps-script - 使用应用程序脚本将数据从 Cloud SQL 导出到 excel

> ID：15362379
> 
> 赞同：0
> 
> 时间：2013-03-12T13:18:04.240
> 
> 标签：google-apps-script, google-cloud-sql

有没有一种方法可以**将云 SQL 数据导出到 Excel 工作表，而无需使用****Google Apps Script**将其复制到 Google 电子表格。

由于谷歌电子表格有 4,00,000 个单元格的限制，我希望将数据直接导出到 Excel 工作表，而不是将其复制到电子表格。

我特别想使用 Google Apps 脚本来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:24:41.007

Could avoid limits of g apps and spreadsheets by using odbc/jdbc directly from excel [https://developers.google.com/cloud-sql/docs/external](https://developers.google.com/cloud-sql/docs/external)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:47:40.923

是的，您可以提供 CSV 文件，您可以将其设置为下载。我附上了一个示例脚本，向您展示它是如何工作的。

**警告**：因为这是一个逗号分隔值文件，您必须确保您的数据不**包含**逗号。

```
function doGet(e) {
  if (parseInt(e.parameter.download) == 1) {
    var someData = [{name:"Jerry",
                     age:27,
                     married:true},
                    {name:"Harry",
                     age:16,
                     married:false},
                    {name:"Gary",
                     age:65,
                     married:true},
                    {name:"Larry",
                     age:41,
                     married:false}];
    var output = "Name,Age,Married?\n";
    for (var i in someData) {
      output += someData[i].name + ","+someData[i].age + ","+someData[i].married + "\n";
    }
    return ContentService.createTextOutput(output).downloadAsFile("data.csv");
  } else {
    var app = UiApp.createApplication();
    var anchor = app.createAnchor("Download the CSV File",ScriptApp.getService().getUrl()+"?download=1");
    app.add(anchor);
    return app;
  }
} 
```

**注意**：因为您正在寻找如此大的文件，这实际上可能不起作用。您的脚本可能会超时。假设您拥有的每个条目是 100 字节，那么您将拥有一个 400 MB 的 excel 文件？一般来说，这只是很大。

# javascript - 如何使用 ajax 上传文本字段和文件？

> ID：15362383
> 
> 赞同：2
> 
> 时间：2013-03-12T13:18:14.653
> 
> 标签：javascript, html, ajax, jquery

我是 AJAX 的新手，正在研究一种表单的实现，该表单将上传名称和文件到处理数据并将其发送到数据库以使用 mysqli 插入的 php 文件。我已经测试了 php 文件，它确实有效。我的问题出在 AJAX 代码中。我尝试过使用 XMLHTTP 和 jQuery 的实现。两者都离开页面并在浏览器中打开 PHP 文件。作为一个免责声明者，我将这个问题发布到另一个编码网站，两个海报之间发生了争执，所以我在这里试图通过富有成效的建议得到一个理性和冷静的回应。

我意识到当前“get”被发送到 PHP 文件而不是“post”，但 PHPStorm 告诉我“post”在那种形式中不可用。我的选择是什么？我是在正确的轨道上还是我应该去另一个方向？如何仅刷新表单并阻止加载 PHP 页面？

这是我的代码的相关片段，

```
<!DOCTYPE html>
<html>
<head>
    <script src="jquery.min.js"></script>
    <script src="jquery.validate.js"></script>
    <script>
        $(document).ready(function() {
            $('#addForm').validate({

                submitHandler: function (form) {
                    $('input[name="usingAJAX"]', this).val('true');
                    var url = $(form).prop('action');
                    var dataToSend = $(form).serialize();
                    var callback = function(dataReceived) {
                        $(form).hide();
                        //result message
                        $('body').append(dataReceived)
                    };
                    var typeOfDataToReceive = 'html';

                    $.get(url, dataToSend, callback, typeOfDataToReceive),
                    return false;
                }
            });
        });

    </script>
</head>
<body>
<form id="addForm" action="addInfo.php" enctype="multipart/form-data">
    <input type="hidden" name="usingAJAX" value="false"/>
    <label for="aname">Name: </label>
    <input type="text" name="aname" id="aname" class=required/>
    <label for="aimage">Photo: </label>
    <input id="aimage" type="file" name="aimage" class="required">
    <input type="submit" value="ADD"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:29:53.440

直到最近，您还无法使用 ajax 上传文件。

您仍然无法使用 ajax 直接上传文件，但您可以使用 HTML5 File API 以编程方式进行上传。

不过，如果您正在寻找简单的解决方案，请尝试传统的 IFrame 方法。

如果您想要尖端技术，请使用 File API。这是一些如何使用 javascript 读取文件的[教程。](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

使用ajax上传的步骤：

1.  使用 javascript FileReader API 读取文件。
2.  将编码为base64或其他内容的文件内容发布到服务器。
3.  服务器端，以编程方式解码文件的内容。

使用这种方法时，文件不会被服务器作为文件上传处理。这将只是另一个带有文本的请求字段。您可以在服务器端对其进行解码。

filereader API允许您逐段读取文件并上传文件片段，因此可以分块上传大文件，但需要您自己处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:05:39.013

尝试使用插件 jQuery form.js [http://www.malsup.com/jquery/form/#file-upload](http://www.malsup.com/jquery/form/#file-upload)您可以使用 ajax 和 jQuery 上传文件。它很容易使用，只需要`#form-id`在 ajaxSubmit 函数中给出。

```
 <script>
    $(document).ready(function() {
        $('#addForm').validate({

            submitHandler: function (form) {
                $('input[name="usingAJAX"]', this).val('true');
                var options = {
                   url : $(form).prop('action'),
                   dataToSend : $(form).serialize(),
                   callback : function(dataReceived) {
                    $(form).hide();
                    //result message
                    $('body').append(dataReceived) },
                   typeOfDataToReceive = 'html';
                     //your options here 
               };

               $('#yourFormid').ajaxSubmit(options);

                return false;
            }
        });
    });

</script> 
```

# imagemagick - 为什么我的 ImageMagick 执行调色时的结果与预期不同？

> ID：15362390
> 
> 赞同：3
> 
> 时间：2013-03-12T13:18:28.247
> 
> 标签：imagemagick, imagemagick-convert

我找到了用于照片过滤器的Instagraph PHP 库（[GitHub](https://github.com/webarto/instagraph/blob/master/lib/Instagraph/Instagraph.php)、[NetTuts ）。](http://net.tutsplus.com/tutorials/php/create-instagram-filters-with-php/)但是，我在我的盒子上发现它输出的图像与 NetTuts 上显示的图像不同。因为我对照片滤镜或 ImageMagick 的魔法一无所知，所以我需要你的帮助，ImageMagick 魔术师 :-)

我本地化了这个问题，它必须在`colortone`功能范围内，否则过滤器工作得很好。让我们以*Toaster*为例，因为它只执行一次*色调*转换。

[colortone PHP 函数](https://github.com/webarto/instagraph/blob/master/lib/Instagraph/Instagraph.php#L88)生成的代码（bash 转义）：

```
convert test.jpg \( -clone 0 -fill '#330000' -colorize 100% \) \( -clone 0 -colorspace gray -negate \) -compose blend -define compose:args=100,0 -composite test.jpg 
```

完成过滤的命令序列的其余部分（应该没问题）：

```
convert test.jpg -modulate 150,80,100 -gamma 1.2 -contrast -contrast test.jpg
convert test.jpg \( -size 960.0x960.0 radial-gradient:none-LavenderBlush3 -gravity center -crop 640x640+0+0 +repage \) -compose multiply -flatten test.jpg
convert test.jpg \( -size 960.0x960.0 radial-gradient:#ff9966-none -gravity center -crop 640x640+0+0 +repage \) -compose multiply -flatten test.jpg 
```

现在，让我们看看*Toaster*过滤器的**预期结果：**

 *![在此处输入图像描述](../Images/7362ee2913dbd465f34faf4066e73d17.png)

但是，**我的脚本产生**以下内容：

![在此处输入图像描述](../Images/dde0b3cc8cae00f879f8fd478cc5b6da.png)

它更暗，但我不知道为什么。可能只有两种选择可以解释这种行为：

1.  图书馆的作者在他的图书馆中有一个错误。（我不这么认为，但仍有可能......）
2.  **我的 ImageMagick 与作者的不同，因此会产生不同的结果。**（这怎么可能发生？）

有谁知道为什么我的 ImageMagick 会产生不同的结果？会不会是一些初始设置？我的 ImageMagick 完全是从标准的 Ubuntu 软件包安装的。

```
$ convert --version
Version: ImageMagick 6.7.7-10 2012-08-17 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP 
```

* * *

我编译了自己最新的 ImageMagick 上游版本，它产生了相同的错误输出。

```
$ convert --version
Version: ImageMagick 6.8.3-9 2013-03-15 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2013 ImageMagick Studio LLC
Features: DPC OpenMP
Delegates: bzlib djvu mpeg fontconfig freetype jbig jng jp2 jpeg lcms lqr lzma openexr png ps tiff x xml zlib 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:04:39.267

[解决方案](https://github.com/webarto/instagraph/pull/7)：

```
convert -set colorspace RGB test.jpg \( -clone 0 -fill '#330000' -colorize 100% \) \( -clone 0 -colorspace gray -negate \) -compose blend -define compose:args=100,0 -composite test.jpg 
```

英文：添加`-set colorspace RGB`以强制图像处于线性 RGB 颜色空间中。

* * *

感谢[ImageMagick 论坛](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=22966&p=96160#p96133)和Instagraph 的作者[Dejan Marjanovic在我的调查中提供的帮助。](https://github.com/webarto/instagraph/issues/6#issuecomment-14906955)出现此问题是因为 ImageMagick在 6.7.7-8 版本中[更改了行为](http://www.imagemagick.org/discourse-server/viewtopic.php?f=4&t=21269)，并开始默认将图像视为 sRGB。

Dejan 使用 6.7.5 版本开发和测试了 Instagraph，当时该版本处于上游。编写过滤器时假定 RGB 作为默认色彩空间（之前的 ImageMagick 的默认行为）。我用 ImageMagick 6.7.7-10 和 6.8.3-9 尝试了相同的代码，所以得到了不同的输出。

如果`-set colorspace RGB`添加，图像将转换为线性 RGB，并且过滤器按设计正常工作。另一种解决方案（可能更好）是调整 colortone 子程序，使其也适用于 sRGB 颜色空间，但这远远超出了我目前的知识范围，所以我对此很满意，比如说*hotfix*。*

# https - 建立安全的 HTTPS 连接

> ID：15362395
> 
> 赞同：0
> 
> 时间：2013-03-12T13:18:45.550
> 
> 标签：https, openssl, certificate, ca

我的安全课上有一项任务。我必须生成两个 RSA 密钥（A 和 B），将 B 视为 CA，然后：

对于键 A：

1.  生成证书请求。
2.  从 CA 接收证书。
3.  在我的本地 HTTPS 服务器 (XAMPP) 中使用此密钥和相应的证书

对于键 B：

1.  成为 CA。
2.  为 A 生成证书。
3.  在浏览器中导入此 CA 证书。

结果应该是 Chrome 地址栏中的一个漂亮的绿色挂锁。然而，在所有这些步骤之后，我只设法摆脱了*“进入不受信任的站点”*警告，但红色挂锁仍然存在。信息说：

```
localhost
Identity not veryfied.

The identity of the server to which you are connected cannot be fully validated. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:42:15.653

有了我收到的评论，我能够成功地解决这个问题。

*但是，与Firefox相比，* *Google Chrome*似乎有额外的安全规则。使用*Mozilla 的*浏览器，我没有注意到任何关于我的证书的警告。

# arrays - 来自单元格vba的Bilding 3x3数组

> ID：15362396
> 
> 赞同：1
> 
> 时间：2013-03-12T13:18:45.607
> 
> 标签：arrays, vba, excel

我有一排有 9 个单元格，例如

> 1,2,3,4,5,6,7,8,9

我想构建一个 3x3 矩阵，例如，以后用它做一些操作

> 1,2,3
> 
> 4,5,6
> 
> 7,8,9

我试过下面的代码

```
dim varr as variant
for i = 0 to 1
    for j = 1 to 3
        varr(i, j-1) = activesheet.cells(1, 3+i+j))
    next j
next i 
```

这不起作用（类型不匹配），很明显我没有正确定义数组，但我无法弄清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:33:43.037

首先，您应该始终显式声明变量以避免混淆和大量错误。`Option Explicit`在您的模块顶部将迫使您这样做。

然后你的数组没有正确声明，正如你所提到的。然后，您从 中选择值的逻辑也有问题`ActiveSheet.Cells`。我认为您需要以下内容：

```
Option Explicit

Sub Test()
    Dim varr(2, 2) As Variant
    Dim i As Integer
    Dim j As Integer

    For i = 0 To 2
        For j = 0 To 2
            varr(i, j) = ActiveSheet.Cells(1, 1 + j + (i * 3))
        Next j
    Next i

    For i = 0 To 2
        For j = 0 To 2
            Debug.Print "varr(" & i & ", " & j & ") = " & varr(i, j)
        Next j
    Next i
End Sub 
```

# google-app-engine - GWT 应用程序引擎 openID 错误 500

> ID：15362397
> 
> 赞同：0
> 
> 时间：2013-03-12T13:18:51.577
> 
> 标签：google-app-engine, gwt, openid4java

我们正在用 gwt 开发一个网站。我们正在实现 openID (openid4java)，但是当我们使用应用引擎在线运行它时，我们被卡住了。在本地它可以完美运行，但是当我们在应用引擎上部署时，我们会收到错误消息 500 和此错误消息：

```
javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract com.google.gwt.sample.stockwatcher.client.UserData com.google.gwt.sample.stockwatcher.client.StockPriceService.authenticateOpenId(java.lang.String)' threw an unexpected exception: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:355)
    at java.security.AccessController.checkPermission(AccessController.java:567)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:315)
    at java.lang.Thread.init(Thread.java:353)
    at java.lang.Thread.<init>(Thread.java:437)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$ReferenceQueueThread.<init>(MultiThreadedHttpConnectionManager.java:1039)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager.storeReferenceToConnection(MultiThreadedHttpConnectionManager.java:164)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager.access$900(MultiThreadedHttpConnectionManager.java:64)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$ConnectionPool.createConnection(MultiThreadedHttpConnectionManager.java:750)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager.doGetConnection(MultiThreadedHttpConnectionManager.java:469)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager.getConnectionWithTimeout(MultiThreadedHttpConnectionManager.java:394)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:152)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)
    at org.openid4java.util.HttpCache.head(HttpCache.java:296)
    at org.openid4java.discovery.yadis.YadisResolver.retrieveXrdsLocation(YadisResolver.java:360)
    at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:229)
    at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:221)
    at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:179)
    at org.openid4java.discovery.Discovery.discover(Discovery.java:134)
    at org.openid4java.discovery.Discovery.discover(Discovery.java:114)
    at org.openid4java.consumer.ConsumerManager.discover(ConsumerManager.java:527)
    at com.google.gwt.sample.stockwatcher.server.StockPriceServiceImpl.authenticateOpenId(StockPriceServiceImpl.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:43)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
<continued in next message> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:44:45.567

看来您正在使用线程。`Google app engine`不支持`Threads.`

是的，它会起作用`locally`，但是当你`deployed`抛出异常时`run time`

[https://developers.google.com/appengine/docs/java/runtime?hl=te#The_Sandbox](https://developers.google.com/appengine/docs/java/runtime?hl=te#The_Sandbox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:05:04.100

Openid4java 不适用于 GAE，因为 GAE 排除了某些重定向。参考[链接](http://aralbalkan.com/1357/)。

您可以通过Google App Engine 中的[OpenID 使用联合身份验证来执行此操作](https://developers.google.com/appengine/articles/openid?hl=nl-NL)

*   [App Engine 使用 OpenID 身份验证 java 示例](http://appengine-java.blogspot.in/2010/06/app-engine-using-openid-authentication.html)

# colorbox - 彩盒停止工作

> ID：15362400
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:18:57.907
> 
> 标签：colorbox

我最近遇到了颜色框的问题。在将站点移动到不同的服务器（云）中后，使用彩盒打开链接的功能停止工作。文件是一样的，我没有改变任何东西。你有什么建议吗？是否有任何我必须环顾四周的服务器兼容性？在此先感谢，佩妮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:02:22.963

Colorbox, and all jQuery and Javascript scripts for that matter, are client-based. This means it is the client (the visitor's computer) who does all the work. The server has absolutely nothing to do with them. This being said, the answer of to your questions is: no. There are no know (or even unknown) compatibility issues with colorbox and any time of server.

So, more than likely something went wrong with your files when you migrated to your new server.

# jquery - 同一个动作中的两个表单，每个表单都有不同的提交按钮

> ID：15362401
> 
> 赞同：0
> 
> 时间：2013-03-12T13:18:57.853
> 
> 标签：jquery, jquery-ui, zend-framework2

我在同一页面上有两个表单，在控制器中都有相同的操作。在第一种形式中，我介绍了一些数据，在将其保存在数据库中的表中后，使用 jquery 中的模式并保留在同一个 phtml 页面上，我使用它的 id 将其输入到第二个表中的字段中表单，因为我需要在第一个表单的相同 id 上引入更多行。就像发票号一样。2 来自 table1，我想在第二个表中有 2,3 或任何行。我的问题是，当我按下提交按钮保存第二个表单数据时，它甚至想要保存第一个表单数据，它已经保存并且不进行保存。

您知道如何在不使用 ajax 重写所有代码的情况下做到这一点吗？有没有办法为第二个提交按钮设置条件？我使用 zend 框架 2 和 jQuery。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:30:27.813

您必须为每个提交按钮（必需 => true）声明验证（输入过滤器）才能使用 isValid() 方法 forech 表单

当所有输入正确并单击表单 1 提交按钮时，Form1 isValid 当所有输入正确且单击表单 2 提交按钮时，Form2 isValid

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:20:47.653

为第二个提交按钮指定一个在第一个表单中找不到的名称，并在发送给控制器的帖子中检查该输入名称。如果你找到它，处理表格 2，如果你不处理表格 1。

# c# - Javascript：解析 JSON 对象

> ID：15362402
> 
> 赞同：-2
> 
> 时间：2013-03-12T13:19:02.670
> 
> 标签：c#, javascript, jquery, json

我想解析以下数据，这是来自服务器的对象列表。这是我`JSON.stringify(data.d);`在数据上使用后所拥有的：

```
"[{"__type":"EditGridDemo.CellData","empProperty":"SSN","empValue":"a","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"Birth_Date","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"Department_Name","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"email","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"First_Name","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"Sex","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"Strata_ID","empValue":null,"isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"SSN","empValue":"b","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"Birth_Date","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"Department_Name","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"email","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"First_Name","empValue":"","isValid":false,"comments":"Reason of what went wrong"},{"__type":"EditGridDemo.CellData","empProperty":"Sex","empValue":"","isValid":false,"comments":"Reason of what went wrong"},    
{"__type":"EditGridDemo.CellData","empProperty":"Strata_ID","empValue":null,"isValid":false,"comments":"Reason of what went wrong"}]" 
```

它是一个 CellData 列表，由 empProperty、empValue、isValid、comments 作为其属性组成。我无法在 JS 中访问这些属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:48:34.623

刚开始使用 data.d[i].empProperty 和 data.d[i].empValue 正如一些评论中提到的 i 是数组的索引。不要对其进行字符串化，它已经为您解析成一个对象。

[在此处](http://en.wikipedia.org/wiki/JSON)阅读有关 JSON 的信息

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T13:25:26.107

该结构是一个对象数组。因此，您可以简单地通过索引访问每个元素：

```
var arr = JSON.stringify(data.d);
var item = arr[0]; 
```

然后您可以通过不同的方式访问每个属性：

```
empValue = item.empValue;  //returns "a"
empProperty = item["empProperty"];  //returns "SSN" 
```

[这里](http://jsfiddle.net/9WfN3/)的例子。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T13:29:24.133

我引用以下链接中的一段：**[JSON](http://www.json.org/js.html)**

为了防止这种情况，应该使用 JSON 解析器。JSON 解析器将仅识别 JSON 文本，拒绝所有脚本。

```
var jsonData = JSON.stringify(data.d);
var myObject = JSON.parse(jsonData); 
```

# eclipse-plugin - 在使用 jersey 的 eclipse 扩展插件中抑制 Applet Alert

> ID：15362404
> 
> 赞同：0
> 
> 时间：2013-03-12T13:19:07.273
> 
> 标签：eclipse-plugin, applet, jersey, knime, javapolicy

我为 KNIME（基于 eclipse 的软件）编写了一个 REST 客户端插件。我用球衣作为图书馆。

一切正常。但是，如果我发送客户端请求，则会弹出一个小程序警报对话框，询问我是否要允许、禁止或停止小程序。这个对话框很烦人，特别是如果你想提交多个请求。我该如何摆脱它？

到目前为止，我发现的所有内容都是指防病毒软件在下载期间向 .jar 文件添加内容，调整 maven 服务器和 ant 构建的参数。但是，我已经在我的机器上创建了这个插件，并且我在本地运行目标 REST 服务器（它基于 python）。

理想情况下，我想知道如何在我的代码或插件设置中或通过首选项抑制此插件。如果那不可能，我需要一个解决方法，也可以向我们公司以外的用户解释，因为该插件将被发布。

该对话框由代码行创建

> client.handle（请求）

客户端是泽西客户端，请求是泽西客户端请求。

控制台输出是

```
 -- PolicyProps uninitialized on access of 'jscan.session.policyname
   -- PolicyProps uninitialized on access of 'jscan.session.origin_uri'
   -- PolicyProps uninitialized on access of 'misc.no_user_interaction'
   -- PolicyProps uninitialized on access of 'misc.prompt_user'
   -- PolicyProps uninitialized on access of 'misc.notify_user'
   -- PolicyProps uninitialized on access of 'misc.max_offense_cnt'
   -- PolicyProps uninitialized on access of 'misc.strict_enforcement'
   -- PolicyProps uninitialized on access of 'jscan.session.origin_uri'
   -- PolicyProps uninitialized on access of 'net.bind_enable'
   -- PolicyProps uninitialized on access of 'net.connect_src'
   -- PolicyProps uninitialized on access of 'net.connect_other'
   -- PolicyProps uninitialized on access of 'net.connect_in_dom_list'
   Msgs: Failed to find localized message for key "instr.action.connect" - using default English form
   Msgs: Failed to find localized message for key "instr.msg.dialog.action_warning_start" - using default English form
   -->> returning Frame NULL
   Msgs: Failed to find localized message for key "instr.dialog.title.applet_alert" - using default English form
   Msgs: Failed to find localized message for key "instr.button.allow" - using default English form
   Msgs: Failed to find localized message for key "instr.button.disallow" - using default English form
   Msgs: Failed to find localized message for key "instr.button.stop_applet" - using default English form
   BaseDialog: owner frame is a java.awt.Frame 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:48:14.027

好的，问题已经解决了。这是一个由 Trend Micro（杀毒软件）注入代码的球衣插件。没有的新下载解决了这个问题。

问题在这里之前已经描述过： [java policy error applet alert](https://stackoverflow.com/questions/4667357/java-policy-error-applet-alert)

# javascript - ember.js 和 bootstrap 手风琴——创建视图的“ember 方式”

> ID：15362405
> 
> 赞同：4
> 
> 时间：2013-03-12T13:19:07.867
> 
> 标签：javascript, twitter-bootstrap, ember.js

我的问题不是如何使引导手风琴工作，而是要确保我理解“余烬”的做事方式。

我在这里创建了一个引导手风琴的工作示例（截至 2013 年 3 月 12 日）：http: [//jsfiddle.net/nrionfx/s59fA/](http://jsfiddle.net/nrionfx/s59fA/)

```
DEBUG: ——————————- 
DEBUG: Ember.VERSION : 1.0.0-rc.1
DEBUG: Handlebars.VERSION : 1.0.0-rc.3
DEBUG: jQuery.VERSION : 1.9.1 
DEBUG: ——————————- 
```

为了使手风琴正确折叠，我必须创建一个观察者来观察 controller.content 数组。如果我不这样做，则在插入元素时手风琴不会折叠，即使我将 $().collapse 放入 didInsertElement 钩子中也是如此。

```
App.IndexView = Em.View.extend
    templateName: 'index'
    contentObserver: ( ->
        Ember.run.next this, ->
            @.$('.collapse').collapse()
      ).observes('controller.content') 
```

现在，这可行，但我的问题是：这是在 ember 框架下执行此操作的适当方式，还是应该在其他地方，例如 didInsertElement 调用？

----更新----最终的jsFiddle：http: [//jsfiddle.net/nrionfx/s59fA/16/](http://jsfiddle.net/nrionfx/s59fA/16/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:43:49.970

我建议将您的物品包装在自己的视图中。在这种情况下，您可以使用 didInsertElement 挂钩来运行您的逻辑。

所以你的车把看起来像：

```
{{#each item in controller}}
   {{view App.ItemView contextBinding="item"}}        
{{/each}} 
```

只需将循环的当前内容移动到这个新模板即可。视图看起来像这样：

```
App.ItemView = Em.View.extend
    templateName: 'item'
    didInsertElement: ( ->
        Ember.run.next this, ->
            @.$().collapse()
      ) 
```

**我认为这将是最华而不实的方法。**这似乎更好，因为逻辑不会在控制器内容的每次交换时重新运行。正如您已经说过的，didInsertElement 挂钩是与 3rd 方库集成的最合适的位置。

**提示：**当您将逻辑放在 IndexView 的 didInsertElement 挂钩中时，它不起作用，因为那时包含的集合尚未呈现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:57:09.993

> 这是在 ember 框架下执行此操作的适当方式，还是应该在其他地方，例如 didInsertElement 调用？

当然，这样做的正确位置是通过 didInsertElement。正如@mavilein 提到的，您可以通过为每个子元素创建一个视图来做到这一点。

您可能考虑的另一种方法是使用`afterRender`队列。例如：

```
App.IndexView = Em.View.extend
    templateName: 'index'
    contentObserver: ( ->
        Ember.run.next this, ->
            @.$('.collapse').collapse()
      ).observes('controller.content') 
```

查看 @machty 关于[ember 运行循环](http://machty.github.com/blog/ember_run_loop_talk/#/practical)的出色帖子或 [在 Ember.CollectionView 渲染结束时运行 jquery](https://stackoverflow.com/questions/13538021/run-jquery-at-the-end-of-ember-collectionview-rendering)

# ruby-on-rails - 构建数组时的Rails占位符

> ID：15362415
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:19:39.720
> 
> 标签：ruby-on-rails

我正在尝试这样做：

```
query << ["AND f.name LIKE '%:last_name%' ", :last_name => params[:last_name] ] 
```

但是得到一个错误。肯定语法不正确。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:22:41.090

这是一个数组还是一个哈希？第一项看起来像一个数组，第二个像一个哈希。没有上下文就很难说。你可以先试试这个：

```
["AND f.name LIKE '%:last_name%' ", {:last_name => params[:last_name]} ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:16:43.300

如果查询是一个数组，您可能想要传递一个字符串，这样您就不会得到一个数组数组，您可以这样做：

导轨 3

```
query << "AND f.name LIKE '%#{params[:last_name]}%' " 
```

导轨 2

```
last_name = ActionController::Base.helpers.sanitize(params[:last_name])
query << "AND f.name LIKE '%#{last_name}%' " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:27:09.407

由于您没有使用 rails 3，因此您应该使用`scoped`链接查询

```
records = Record.scoped(:conditions => { :active => true })
records = records.scoped(:conditions => ["records.name LIKE '%:last_name%' ", { :last_name => params[:last_name] }]) 
```

所以你不必构建这样的查询。

# vb.net - 将一个 Form1 中的文本框值传输到另一个

> ID：15362417
> 
> 赞同：0
> 
> 时间：2013-03-12T13:19:44.800
> 
> 标签：vb.net

如何将文本框的值从 Form1 转移到另一个？
我编写了如何使用 Menustrip 启动表单的代码，现在传输值，但我无法编写代码，因为我不知道。
我在 form1 上有一个按钮：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    //What should I put here?
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:49:20.883

最简单的方法是将文本框属性“修饰符”设置为“公共”。这将允许它从其他形式中可见，然后您只需隐含以下代码；

```
 Dim form1 As New Form1()

 Dim a As String = form1.Textbox1.Text 
```

# phpstorm - PHPStorm - 突出显示 xml 文件中的括号

> ID：15362418
> 
> 赞同：0
> 
> 时间：2013-03-12T13:19:52.293
> 
> 标签：phpstorm

我试图找出是否调整选项以突出显示 PHPStorm 中的括号。

当我编辑 bash 文件时，此选项可以正常工作，可能是因为我正在使用 BashSupport 插件并且它包含此功能。

当我编辑 xml 文件时，匹配的标签会突出显示（以我的屏幕截图为例，两个“动作”词都被突出显示）。不幸的是，匹配的括号被忽略了。

![在此处输入图像描述](../Images/79acefc811ddb432534f468d372da98c.png)

是否有机会在 xml 文件中启用此功能？

干杯!

# java - 无法将古吉拉特语 PDF（unicode）转换为文本

> ID：15362419
> 
> 赞同：2
> 
> 时间：2013-03-12T13:19:52.313
> 
> 标签：java, pdf, unicode, utf-8, pdfbox

我正在尝试阅读古吉拉特邦选民名册的 PDF 文件（[示例文件](http://erms.gujarat.gov.in/ceo-gujarat/download/ERoLL/N001/N0010001.pdf)）。我需要以结构化格式提取所有信息。我正在使用 Apache 的 pdfbox 从 PDF 文件中提取文本。

我面临的问题是某些字符在转换中丢失了，并且转换后的文本中有很多噪音。[请在此处](https://docs.google.com/file/d/0B5xypg0s9MhZNnVoREFlVG41dUE/edit?usp=sharing)找到转换后的文件。

编码

```
import java.io.*;
import org.apache.pdfbox.pdmodel.*;
import org.apache.pdfbox.util.*;
public class Main {
public static void main(String[] args){
PDDocument pd;
BufferedWriter wr;
try {
    File input = new File("myPDF_manual.pdf");
    File output = new File("newPaperTestFile.txt"); // The text file where you are going to store the extracted data
    pd = PDDocument.load(input);
    PDFTextStripper stripper = new PDFTextStripper();
    wr = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(output)));
    stripper.writeText(pd, wr);
    if (pd != null) {
        pd.close();
        wr.close();
        System.out.println(" file processed.");
    }
 } catch (Exception e){
         e.printStackTrace();
        } 
     }
} 
```

我还尝试了使用 PDFTextStripper 类的 getText() 方法的代码，但结果是一样的。

我还尝试使用适用于 linux 的 pdftohtml 命令行实用程序将 pdf 转换为 xml。但也有一些信息仍然丢失。xml文件可以在[这里找到](https://docs.google.com/file/d/0B5xypg0s9MhZYzk1c1FURFNwbW8/edit?usp=sharing)

请建议我解决此问题的**任何解决方案。**解决方案不需要特定于 Java。

# c# - C#中具有相同名称和签名但返回类型不同的方法

> ID：15362424
> 
> 赞同：26
> 
> 时间：2013-03-12T13:20:19.590
> 
> 标签：c#, .net, c#-4.0, inheritance, polymorphism

我有一次面试，被问到以下问题：

问题：具有相同名称和签名但返回类型不同的方法。有没有可能，这种类型叫什么？他问我。

有人可以告诉我以下内容：

1.  在任何情况下都可能出现上述情况（例如基类中的一个和派生类中的一个？）如果是这样，它是什么类型？像编译或运行时多态？

2.  在编译时多态中，如果方法的返回类型与签名也不同怎么办？但只有函数的名称是相同的。它仍然是编译时多态性吗？

3.  在覆盖中，如果我有不同的返回类型但方法名称和签名相同怎么办？是否可以 ？（他问我这个问题，我回答错了：（）请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-12T13:28:49.510

*   我认为问题是关于[返回类型协方差](http://en.wikipedia.org/wiki/Covariant_return_type)

    它允许方法返回比基类型中声明的类型更派生的类型，例如

    ```
    public interface ISomeInterface
    {
        object GetValue();
    }

    public class SomeClass : ISomeInterface
    {
        public string GetValue() { return "Hello world"; }
    } 
    ```

    这在 Java 中受支持，但在 C# 中不受支持。以上将无法编译，因为`SomeClass.GetValue`is `string`not的返回类型`object`。

    请注意，您不能仅基于返回类型重载方法，即以下内容无效：

    ```
    public class SomeClass
    {
        public int GetValue() { return 1; }
        public string GetValue() { return "abc"; }
    } 
    ```

    您可以使用接口做类似的事情，尽管您需要明确地实现它们以消除歧义：

    ```
    public interface IValue<T> { T GetValue(); }
    public class SomeClass : IValue<int>, IValue<string>
    {
        string IValue<string>.GetValue() { return "abc"; }
        int IValue<int>.GetValue() { return 1; }
    } 
    ```

    *   如果名称相同但参数不同，则这是方法重载。这是一种形式的多态性（ad-hoc polymorphism）。重载在编译类型中静态解决（除非您`dynamic`在这种情况下使用它们被推迟到运行时）。

    您可以重载参数的数量及其类型，因此以下都是有效的：

    ```
    public void DoSomething(int value) { }
    public void DoSomething(string value) { }
    public void DoSomething(int value, string value) { } 
    ```

    请注意，您可以更改这些方法的返回类型 - 方法不仅可以仅根据其返回类型进行重载，而且如果它们的参数列表不同，它们可能会有所不同。

    *   这又是返回类型协方差，在 C# 中不受支持。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-12T13:33:11.757

在 C# 中，你不能有类似的方法

`int Foo() { return 1; }`

`void Foo() { return; }`

它们的变化必须不止返回类型。

如果论点不同，那么你很高兴。

`int Foo(string x) { return 1; }`

`void Foo(double x) { return; }`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-12T13:43:22.637

尽管 C# 不支持返回类型协方差，但可以通过使用显式实现和方法隐藏来模拟它。这是在 ADO.NET API 中彻底使用的模式。

例如：

```
public interface ISomeValue { }
public abstract class SomeValueBase : ISomeValue { }
public class SomeValueImpl : SomeValueBase { }

public interface ISomeObject { ISomeValue GetValue(); }

public abstract class SomeObjectBase : ISomeObject
{
    ISomeValue ISomeObject.GetValue() { return GetValue(); }
    public SomeValueBase GetValue() { return GetValueImpl(); }

    protected abstract SomeValueBase GetValueImpl();
}

public class SomeObjectImpl : SomeObjectBase
{
    protected override SomeValueBase GetValueImpl() { return GetValue(); }
    public new SomeValueImpl GetValue() { return null; }
} 
```

通过这样做，调用的最终结果`GetValue()`是它将始终匹配最具体的可用类型。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-12T13:42:19.013

是的，可以有多个方法具有相同的签名但不同的返回类型，使用显式接口实现，如下所示：

```
public interface I {
  int foo();
}

public class C : I {
  double foo() { return 2.0; }
  int I.foo() { return 4; }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T13:59:46.833

由于这是一个面试问题，您可以稍微回答一下。

严格来说，不同返回类型和相同签名的方法是不可能的。但是，从广义上讲，有许多方法可以实现具体运行时返回类型不同的方法。

一种是使用泛型参数。另一个是返回具有多个实现的接口或超类。或者，您可以返回一个对象，该对象可以转换为任何东西。

正如许多人提到的，您还可以使用“new”关键字在子类中返回相同方法的派生类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-07T18:54:03.587

是的，您可以使用相同的方法、相同的参数（需要自定义）和不同的返回值。

只需遵循以下代码，它可能会对您有所帮助。

```
public class myClass
{
    public int myReturn() { return 123; }
    public string myReturn(string temp = null) { return "test"; }
} 
```

问题是，它需要参数来执行函数，但你仍然可以忽略参数，因为你有`string temp = null`可选参数，也就是说你仍然调用带有或不带参数的函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-29T07:53:52.933

我最近遇到了这个确切的问题，因为我正在解析具有各种类型的配置文件，这些类型都使用标准的 config.Parse(string settingName) 类型接口。

第一种解决方案通用方法：

```
T Parse<T> (string settingName)
{
    T Result;
    doParsing...
    return T;
} 
```

我真的不喜欢这个，因为它涉及明确指定正在使用的类型，例如`someSetting = Parse<float>("param");`

所以我使用的解决方案是多余的，但在我看来更干净：

```
T Parse<T> (string settingName, out T result)
{
    doParsing...
    return T;
} 
```

out 变量和 return 是相同的，所以它有点多余，但它使我认为是一个更干净的接口：

```
setting = Parse("intparam", out setting); 
```

并且您获得的方法仅因返回类型而异，因此会产生轻微的冗余成本。最重要的是，如果您的数据类型发生变化，例如从双精度数变为浮点数，那么您一切都将继续正常工作，而使用第一个解决方案，您最终会得到无法隐式转换错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-09T09:02:28.740

您可以使用`dynamic`返回类型：

*   [动态（C# 参考）](https://msdn.microsoft.com/en-us/library/dd264741.aspx)
*   [使用动态类型（C# 编程指南）](https://msdn.microsoft.com/en-us/library/dd264741.aspx)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-11-12T23:48:04.003

你可以做到这一点界面

```
 public interface IMyInterface
{
    int Metoda1()enter code here`;
}
public class MyClass : test.IMyInterface
{
    public IMyInterface Metoda1()
    {
        return new MyClas();
    }
    int test.IMyInterface.Metoda1()
    {
        return 1;
    }
}
   static void Main(string[] args)
    {
        MyClass instance = new MyClass();
        IMyInterface inst = instance.Metoda1();
     /*   IMyInterface ints2 = inst.Metoda1(); //will not compile*/
        Console.WriteLine(inst.GetType().ToString()); ;
        object inst3 = inst.Metoda1();
        Console.WriteLine(inst3.GetType().ToString());
    } 
```

# c# - 在 C# 中处理“OutofMemoryException”？

> ID：15362427
> 
> 赞同：0
> 
> 时间：2013-03-12T13:20:24.527
> 
> 标签：c#

在此代码字符串`x`中给出了一个`OutOfMemoryException`. 有没有其他方法可以解析所有文件而无需获取`OutofMemoryException`？我尝试过的代码似乎没有任何问题。

有人建议让程序逐个文件读取，而不是读取整个文件并将其放在一个字符串`x`中。

```
IEnumerable<string> textLines = Directory.GetFiles(@"C:\Users\karansha\Desktop\Unique_Express\", "*.*")
    .Select(filePath => File.ReadLines(filePath))
    .SelectMany(line => line);

string x = string.Join(",", textLines);
List<string> users = new List<string>();
Regex regex = new Regex(@"User:\s*(?<username>.*?)\s");
MatchCollection matches = regex.Matches(x);
foreach (Match match in matches)
{
    var user = match.Groups["username"].Value;
    if (!users.Contains(user)) users.Add(user);
}
int numberOfUsers = users.Count(name => name.Length < 15); 
Console.WriteLine("Unique_Users_Express=" + numberOfUsers); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:35:10.553

您希望将每个文件的所有行连接在一起似乎很奇怪。假设用户名不跨行，您可以在单个 LINQ 查询中以更简洁的方式执行此操作：

```
var regex = new Regex(@"User:\s(?<username>[^\s]+)");
var path = @"C:\Users\karansha\Desktop\Unique_Express\";
var users = Directory.GetFiles(path, "*.*")
                     .Select(file => File.ReadLines(file))
                     .SelectMany(lines => lines)
                     .SelectMany(line => regex.Matches(line).Cast<Match>())
                     .Select(match => match.Groups["username"].Value)
                     .Distinct()
                     .ToList();

int numberOfUsers = users.Count(name => name.Length < 15); 
Console.WriteLine("Unique_Users_Express=" + numberOfUsers); 
```

希望查询的每一行都应该清楚。这将一次处理一行 - 只要您没有太多用户以至于不同用户名的简单列表不适合内存，您应该没问题。如果你*只*需要计数，你甚至不需要调用`ToList`.

请注意，经过一些试验，我已经调整了正则表达式 - 我希望这对你来说没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:39:31.240

试试这个：假设用户名没有转到另一行，您可以解析每一行并建立唯一的用户名。我没有尝试像这样更改您的代码。只是它的逻辑。

```
 IEnumerable<string> textLines = Directory.GetFiles(@"C:\Users\karansha\Desktop\Unique_Express\", "*.*")
                                                 .Select(filePath => File.ReadLines(filePath))
                                                 .SelectMany(line => line);

        List<string> users = new List<string>();

        textLines.ToList().ForEach(textLine =>
        {
            Regex regex = new Regex(@"User:\s*(?<username>.*?)\s");
            MatchCollection matches = regex.Matches(textLine);
            foreach (Match match in matches)
            {
                var user = match.Groups["username"].Value;
                if (!users.Contains(user)) users.Add(user);
            }
        });

        int numberOfUsers = users.Count(name => name.Length < 15);
        Console.WriteLine("Unique_Users_Express=" + numberOfUsers); 
```

# vba - 无法写入 VBA 中的文本文件

> ID：15362428
> 
> 赞同：1
> 
> 时间：2013-03-12T13:20:27.210
> 
> 标签：vba, ms-access

我正在尝试使用 VBA 写入文本文件。这是我的代码：

```
DoCmd.SetWarnings False

'Delete all data from the source table
DoCmd.RunSQL "DELETE * FROM tblSource;"

'Run query to fill it
DoCmd.OpenQuery "qryFilltblSource"

' Declare a FileSystemObject.
Dim fso As FileSystemObject

' Create a FileSystemObject.
Set fso = New FileSystemObject

' Declare a TextStream.
Dim stream As TextStream

' Create a TextStream. The true part overwrites a text file it it already exists
Set stream = fso.CreateTextFile("C:\Target Folder", True)

Set rst = CurrentDb.OpenRecordset("tblSource")

Dim i As Integer
i = 1

Do Until rst.EOF = True
    stream.WriteLine (rst!i)
    i = i + 1
    rst.MoveNext
Loop

stream.Close

DoCmd.SetWarnings True 
```

第一个错误，我假设我可能会得到另一个错误，是“Permission Denied”。我无法理解这个，因为我是这台机器上的管理员。我查看了目标文件夹，我有填充权限来做我想做的事 - 但是当我查看它的属性时，“只读”框被突出显示 - 为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:25:09.927

您将不被允许写入 C 根目录，因此`C:\Target Folder\Atextfile.txt`

考虑使用[TransferText](http://msdn.microsoft.com/en-us/library/office/aa141567%28v=office.10%29.aspx)：

```
 DoCmd.TransferText acExportDelim, , tblSource, "c:\docs\output.txt", True 
```

请注意，您不能说：

```
Dim i As Integer
i = 1

Do Until rst.EOF = True
    stream.WriteLine (rst!i) <-- i is a record, not a field
    i = i + 1
    rst.MoveNext
Loop 
```

你需要

```
Do Until rst.EOF 
    For i=0 to rst.Fields.Count-1
       stream.WriteLine rst(i) ''or rst(i) & "" to avoid problems with Null
    Next
    rst.MoveNext
Loop 
```

# android - 即使后台数据关闭也想接收 GCM

> ID：15362432
> 
> 赞同：3
> 
> 时间：2013-03-12T13:20:34.690
> 
> 标签：android, notifications, google-cloud-messaging

当应用程序在后台或关闭时，我的 GCM 实现正常工作，应该是这样。

但是当“后台数据”（在设备的“帐户和同步”设置中）被禁用时，我不再收到 GCM 通知。

我不能 100% 确定这是否是“背景数据”设置的唯一原因，但根据我们的实验，“背景数据”似乎是应用程序是否接收 GCM 的变量。

**我的第一个问题：**

这是预期的行为，还是我们在做一些根本错误的事情？

**我的第二个问题：**

我从一位程序员同事那里听说，有些人创建了一个新服务来生活在后台并收听传入的 GCM。

我仍在试图弄清楚这背后的逻辑，但这听起来像是一个可行的选择吗？

对不起，我的问题含糊不清。

我仍在努力设计解决此问题的解决方案，所以...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:04:51.443

就像 Google Play 需要启用后台数据的***[Google Play](http://support.google.com/googleplay/bin/answer.py?hl=en&answer=1663315)***一样，我猜 GCM 也是这样做的。

当您尝试访问 GCM 并且手机上没有注册帐户时，GCM 服务会返回错误 ACCOUNT_MISSING，当您检测到它时，您应该重定向到 ACCOUNT_SETTINGS，以便用户可以添加谷歌邮件。***[之后，您必须使用 ConnectivityManager 函数getBackgroundDataSetting()](http://developer.android.com/reference/android/net/ConnectivityManager.html#getBackgroundDataSetting%28%29)***检测是否启用了该背景数据。

照顾好它，它在 >= 14 API 上已被弃用，您将不得不使用 getActiveNetworkInfo() 来查看 apperas 是否因为用户禁用了后台数据而断开连接。

如果您看到最后一个链接，则其他方式是使用过滤器 ACTION_BACKGROUND_DATA_SETTING_CHANGED 注册侦听器（但在 API 16 上已弃用）。

```
IntentFilter intentFilter = new IntentFilter(); 
intentFilter.addAction(ConnectivityManager.ACTION_BACKGROUND_DATA_SETTING_CHANGED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:12:26.407

根据安卓手册：

> 后台数据控制应用程序和服务是否可以在您不直接使用它们时传输数据

它没有明确说背景数据是 GCM，但是有很多证据和一堆线程都说：

> 禁用后台数据时不传递 GCM 消息

您可以轻松地自己测试，禁用后台数据，转到网络版的 Play 商店安装应用程序。只有当您重新启用后台数据时，您才会收到它。如果连谷歌都做不到，那么你也可能做不到。

如果您仍然认为在禁用后台数据时看到应用程序接收 GCM 消息，可能是因为：

*   在较新的 android 手机中，您可以为每个应用程序启用后台数据，可能它是为另一个应用程序启用的
*   您看到的可能不是 GCM 通知，但是当 GCM 不可用时，应用程序会退回到轮询服务器

如果您仍然不相信，那么将您的手机设置为在您的机器上使用代理服务器（如 burp 套件），您将能够看到其他应用程序在网络上正在做什么。

# plot - 带背景颜色的盒装标签

> ID：15362440
> 
> 赞同：3
> 
> 时间：2013-03-12T13:21:11.007
> 
> 标签：plot, gnuplot

`boxed` `label`如何用特定`background`颜色绘制一个？（如传说框）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:16:23.533

你的意思是这样的：

```
LABEL="label in a box"
set obj 10 rect at 0,0 size char strlen(LABEL), char 1 fc rgb "cyan"
set label 10 LABEL at 0,0 front center
plot sin(x) 
```

这是我得到这个想法的 gnuplot 演示的[链接。](http://gnuplot.sourceforge.net/demo/rectangle.html)

当然，你可以让盒子的尺寸稍微大一点——我发现它会让东西看起来更漂亮一点：

```
set obj 10 rect at 0,0 size char strlen(LABEL)+1, char 1.5 fc rgb "cyan" 
```

但这取决于你。

# ruby-on-rails - (MacOSx) 早期版本的 Rails2.3.8，我安装了 Rails3.2.0 但我仍然无法访问新版本的 Rails。请帮我修复它

> ID：15362443
> 
> 赞同：0
> 
> 时间：2013-03-12T13:21:16.330
> 
> 标签：ruby-on-rails, grails-2.2

```
Parsing documentation for bundler-1.3.2
Installing ri documentation for bundler-1.3.2
Parsing documentation for rails-3.2.12
Installing ri documentation for rails-3.2.12
Done installing documentation for i18n, multi_json, activesupport, builder, activemodel, rack, rack-cache, rack-test, journey, hike, tilt, sprockets, erubis, actionpack, arel, tzinfo, activerecord, activeresource, mime-types, polyglot, treetop, mail, actionmailer, rack-ssl, thor, rdoc, railties, bundler, rails (58 sec).
29 gems installed
204-252:~ narendra$ rails -v
Rails 2.3.8
204-252:~ narendra$ gem update rails
Updating installed gems**strong text**
Nothing to update 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:46:29.873

如果您使用的是 rbenv，您可以`rbenv rehash`在更新 rails 后尝试运行。

如果您在使用 Rails 2.3.8 构建的 rails 项目文件夹中，那么当您`rails -v`在该文件夹中运行时，它将返回该版本的 rails 而不是最新版本。因此，您可以尝试移动到另一个文件夹，看看运行是否`rails -v`为您提供了您期望的版本。

此外，如果您安装的 rails`sudo gem install rails`有时 /usr/bin/rails 仍然指向旧版本，那么您可以将其更新为指向新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:49:11.337

由于 rails 3.2.12 不包含在 的输出中`gem list`，我怀疑您使用 sudo 安装了 gem。使用 sudo 安装，然后尝试在没有它（或其他操作）的情况下列出 gems 可以为您提供不同的列表。尝试做`sudo gem list`，如果 rails 3.2.12 在那里，那就是你的问题。尝试在没有 sudo 的情况下安装它。

# android - 需要跟踪我的应用程序的前台和后台状态

> ID：15362445
> 
> 赞同：1
> 
> 时间：2013-03-12T13:21:25.290
> 
> 标签：android, android-intent

我知道这个问题对stackoverflow来说并不新鲜，但是我仍然很困惑。所以请不要将此问题标记为重复，请帮助我！

我的 android 应用程序有很多活动。当我的应用程序进入前台并需要调用另一个 Web 服务时，当我的应用程序切换到后台时，我需要调用 Web 服务。

我的初步发现是：

*   我阅读了活动生命周期[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)并意识到我可以在
*   onPause() = 当应用程序切换到后台时
*   onResume() = 当应用程序切换到前台时。

**我的活动：**

```
 protected void onPause() 
    {
        AppUtil.trackAppBackgroundStatus(this);
        super.onPause();
    }

    protected void onResume() 
    {
        super.onResume();
        AppUtil.trackAppForegroundStatus(this);
    } 
```

**我的实用程序类：**

```
public class AppUtil 
{
    public static void trackAppForegroundStatus(Context theContext)
    {
        SharedPreferences aSharedSettings = theContext.getSharedPreferences("MyAppPreferences", Context.MODE_PRIVATE);
        String aAppStatus = aSharedSettings.getString("appStatus", "");

        if(!aAppStatus.equals("foreground"))
        {       
            SharedPreferences.Editor aPrefEditor = aSharedSettings.edit();
            aPrefEditor.putString("appStatus", "foreground");
            aPrefEditor.commit();

            trackSession(theContext, "foreground");
        }
    }

    public static void trackAppBackgroundStatus(Context theContext)
    {
        SharedPreferences aSharedSettings = theContext.getSharedPreferences("MyAppPreferences", Context.MODE_PRIVATE);
        String aAppStatus = aSharedSettings.getString("appStatus", "");

        if(!aAppStatus.equals("background"))
        {   
            SharedPreferences.Editor aPrefEditor = aSharedSettings.edit();
            aPrefEditor.putString("appStatus", "background");
            aPrefEditor.commit();

            trackSession(theContext, "background");
        }
    }
} 
```

trackSession 方法将跟踪我的应用程序的前台和后台状态。

**缺点：** 如上所述，我的应用程序有各种活动。所以考虑我有 Page_A 和 Page_B。

在 Page_A 中，在 onCreate() 方法调用之后，控制转到 onResume() 并跟踪我的应用程序在前台。当我移动到下一页 (Page_B) 时，调用 Page_A 的 onPause() 方法并跟踪我的应用程序切换到后台。

我不想通过每个活动来跟踪它。我只需要在我的应用程序进入后台时跟踪我的应用程序的后台状态（也就是说，只有当用户按下主页按钮并且我的应用程序切换到后台时）。

*   我还尝试了[检查 Android 应用程序是否在后台运行，](https://stackoverflow.com/questions/3667022/android-is-application-running-in-background/5862048#5862048)并且发生了同样的情况
*   **getRunningTasks()**将解决我的问题。但是，请阅读，Google 可能会拒绝使用 ActivityManager.getRunningTasks() 的应用程序。

任何人都可以请指导我。基本上，我需要调用 2 个网络服务。一是当应用程序进入前台时，二是当应用程序切换到后台时。

如果无法针对应用程序进行这些调用，我该如何更新上面的代码来处理它们。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:28:07.107

```
@Override
protected void onUserLeaveHint() {
    // TODO Auto-generated method stub
    super.onUserLeaveHint();
    // application is on background
} 
```

在 Acitivity.onUserLeaveHint() 的文档中，您可以找到以下内容

> 当活动由于用户选择而即将进入后台时，作为活动生命周期的一部分调用。例如，当用户按下 Home 键时，会调用 onUserLeaveHint()，但是当有来电导致通话中的 Activity 自动被带到前台时，被中断的 Activity 不会调用 onUserLeaveHint() . 如果调用它，则在活动的 onPause() 回调之前调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:49:26.710

如你所说，

*   getRunningTasks() 将解决我的问题。但是，请阅读，Google 可能会拒绝使用 ActivityManager.getRunningTasks() 的应用程序。

但看看[文档](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html)

```
 ActivityManager activityManager = (ActivityManager) this.getSystemService( ACTIVITY_SERVICE );
        List<RunningAppProcessInfo> procInfos = activityManager.getRunningAppProcesses();
        for(int i = 0; i < procInfos.size(); i++){
            if(procInfos.get(i).processName.equals("com.your.package.name")) {
//              procInfos.get(i).IMPORTANCE_FOREGROUND 
                Toast.makeText(getApplicationContext(), "your app is running", Toast.LENGTH_LONG).show();
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T08:46:30.010

如果最低 API 级别为 14，那么[Application.registerActivityLifecycleCallbacks](http://developer.android.com/reference/android/app/Application.html#registerActivityLifecycleCallbacks%28android.app.Application.ActivityLifecycleCallbacks%29)方法将轻松解决此任务。只需通过增加/减少一些值来计算“onActivityPaused”和“onActivityResumed”方法中的活动活动。所以非零值将表明应用程序处于前台。

# excel - 使用 SendObject 时，Access 2007 是否在字符字段上返回 NULL？

> ID：15362448
> 
> 赞同：0
> 
> 时间：2013-03-12T13:21:33.803
> 
> 标签：excel, ms-access-2007, reporting

我使用 Access 2007 中的 SendObject（到 Excel 2007 工作簿）通过电子邮件发送报告。我昨天在尝试向某人展示如何在电子邮件报告中制作数据透视表时注意到，Excel 中应为空白的字段（Access 中为 NULL）被数据透视表计为具有值。在 Excel 中对该列执行 COUNTA 表明 Excel 认为单元格中存在应该为空白 (NULL) 的值。（当我在 SSMS 中运行相同的查询时，我得到 NULL 并且使用此数据的数据透视表按预期工作）。SendObject 工作簿/工作表中包含混合日期值或数字的列按预期工作 - 包含值的字段被计算在内，而没有值的字段则不被计算在内。那么如果字段是字符字段并且我直到现在才注意到，Access 是否总是返回非空白（非 NULL）值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:52:59.723

我对此进行了测试，确实似乎将 NULL 字段作为非 NULL 空集传输到 Excel （当放入数据透视表并计数时，它被视为具有值）。我最终将系统更改为使用 TransferSpreadsheet 方法，该方法解决了此问题并允许我们提供更多功能和自定义。谢谢！

# wordpress - 将所有页面重定向到新域

> ID：15362458
> 
> 赞同：4
> 
> 时间：2013-03-12T13:22:10.040
> 
> 标签：wordpress, .htaccess, url-rewriting

我想通过重定向将我网站的所有页面重定向到一个新域。我已经设法让它在域级别上工作，但不是在子页面上。

所以 olddomain.com 重定向到 newdomain.com 但 olddomain.com/contact 不会重定向到 newdomain.com。它仍然显示旧域。

我使用了多个重写规则，但它们似乎都不起作用。任何帮助深表感谢。

这是我现在在 .htaccess 文件中使用的代码

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

RewriteCond %{HTTP_HOST} ^racentegenkanker\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.racentegenkanker\.com$
RewriteRule ^(.*)$ "http\:\/\/againstcancer\.nl\/$1" [R=301,L] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T13:29:46.567

对于完整的网站重定向，您可以使用这个（整个） .htaccess ：

```
RewriteEngine On
RewriteBase /
RewriteRule ^(.*)$ http://againstcancer.nl/$1 [R=301,L] 
```

**编辑**

对于并排运行的两个域，一个重定向另一个：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} racentegenkanker\.com$ 
RewriteRule ^(.*)$ http://againstcancer.nl/$1 [R=301,L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

# asp.net-mvc - 为什么我需要 NuGet 包来部署带有 SQL Server Compact Edition 的 ASP.NET MVC

> ID：15362462
> 
> 赞同：1
> 
> 时间：2013-03-12T13:22:23.367
> 
> 标签：asp.net-mvc, sql-server-ce, web-deployment

我正在尝试从 ASP 经典（是的，我知道...）过渡到 ASP.NET MVC。因此，您可能会将我视为 ASP.NET MVC 的新手。为了使过渡变得容易，我认为使用带有 ASP.NET MVC 的 SQL Server Compact Edition 对我有用。

问题是，我不了解部署过程。我已经阅读了一些教程，但我仍然不明白。如果我在 Visual Studio Express 2012 中启动一个全新项目，在 EntityFramework Code First 的帮助下生成 SQL CE 数据库所需要做的就是更改 webconfig 中的连接字符串。它就像一个魅力。我在 de AppData 文件夹中有一个数据库。

但是，当我想部署 Web 应用程序（使用 FTP）时，我需要安装以下 nuget 包：SqlServerCompact、System.Web.Providers、EntityFramework 和 EntityFramework.SqlServerCompact，根据 Tom Dykstra 在他的 asp 部署教程中的说法。网络/网络表单/。我在开发计算机上安装的唯一 nuget 包是 EntityFramework。我真的需要其他人来成功部署吗？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:14:01.497

要部署使用 SQL Compact Edition 和 Entity Framework 的项目，您需要确保包含 SQL Compact Edition、EF 和 SQL CE EF 提供程序的位。您需要在部署中包含所有这些位，因为它们不太可能位于目标计算机上。在您的开发计算机上，Visual Studio 安装程序将它们放置到位，因此无需专门设置它们。

# annotations - Servlet：在使用注释而不是 web.xml 时按名称将请求转发给 Servlet？

> ID：15362470
> 
> 赞同：2
> 
> 时间：2013-03-12T13:22:40.300
> 
> 标签：annotations, servlet-3.0, servlet-dispatching

我有一个入口 servlet（称为 DispatcherServlet），它根据配置参数将 /* 处的所有传入 GET 和 POST 请求重定向到其他 servlet。为了将请求分派给其他 servlet，我使用它们的名称而不是路径，因为我的 DispatcherServlet 在侦听 /*.

“旧”方法是在 web.xml 描述符中为 servlet 命名：

```
<servlet>
  <servlet-name>MyServlet</servlet-name>
  <servlet-class>mypackage.MyServlet</servlet-class>
</servlet> 
```

之后，可以通过名称来寻址 servlet，例如，当使用`RequestDispatcher`. 我的 DispatcherServlet 中的代码如下所示：

> RequestDispatcher dispatcher = getServletContext().getNamedDispatcher("MyServlet"); dispatcher.forward（请求，响应）；

这完美地工作。但是，我想使用没有 web.xml 的“新”Servlet 3 注释，因此我这样做：

```
@WebServlet(name="MyServlet")
public class MyServlet extends HttpServlet {
    ... 
```

但是现在，`getServletContext().getNamedDispatcher("MyServlet")`在我的 DispatcherServlet 中返回**null**而不是适当的调度程序 for `MyServlet`，尽管我希望它`@WebServlet(name="MyServlet")`的行为相同`<servlet-name>MyServlet</servlet-name>`

我已经在 Tomcat 7 上对此进行了测试。这是因为在调用 DispatcherServlet 时尚未加载 MyServlet，因此不知道 MyServlet 的名称吗？`@WebServlet(name="...")`如果是这样，注释有什么意义;）

请不要回答“你为什么不使用过滤器？”之类的问题。等等。这更多是关于注释与web.xml的背景

提前致谢！

（ps.如果你找到更合适的，请更改标题；））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:40:38.133

如果您没有指定带有名称的 urlMapping，则需要添加完整的类名。喜欢

```
RequestDispatcher dispatcher = getServletContext().
                                         getNamedDispatcher("mypackage.MyServlet"); 
```

如果 servlet 被注释为：

```
@WebServlet(urlPatterns="/Servlet", name="Servlet") 
```

或更好：

```
@WebServlet(urlPatterns="/Servlet", displayName="Servlet", name="Servlet") 
```

此外，您可以尝试通过以下方式获取您的 servlet 名称：

```
getServletName() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T22:00:41.137

仅仅通过注释`@WebServlet`不足以将 Servlet 加载到 Web 容器中；您必须包含至少一个 URL 模式，如果您不想公开 Servlet 以使其仅用于内部转发，请将 URL 设置为以“/WEB-INF/”开头。

请记住，**'name' 属性是错误的**，所以不要使用它。

```
@WebServlet(urlPatterns = "/WEB-INF/thisServlet")
public class FooServlet extends HttpServlet {
...
} 
```

并转发请求，调用这样的东西：

```
servletContext.getNamedDispatcher(FooServlet.class.getName()).forward(request, response); 
```

# jsf - 显示来自托管 bean 的内部类的消息

> ID：15362475
> 
> 赞同：0
> 
> 时间：2013-03-12T13:22:51.310
> 
> 标签：jsf, inner-classes, scheduledexecutorservice

我已使用[此](https://stackoverflow.com/questions/7499534/applicationscope-bean-that-uses-a-timertask-sheduler-good-or-bad)讨论中描述的解决方案将 BackgroundJobManager 实现为我的 JSF bean 类中的内部类。我还创建了一个 ABCTask（也是一个内部类）作为一个线程，它将在 BackgroundJobManager 的预定时间运行。我需要将消息推送到 JSF 页面，但是从任务类 ABCTask 执行此操作会导致 NPE。同样的事情适用于外部 bean，所以我相信这与这个内部类和 bean 的上下文有关。如果有人知道解决方案，将不胜感激。

我的内部类代码如下：

```
 public class ABCTask implements Runnable {

    public ABCTask() {

    }

    @Override
    public void run() {           
        setTimeoutOccuredFlag(true);

        try {
                if (getActiveControlledAgent().isEventLogRunning()) {
                    getActiveControlledAgent().setEventLogRunning(false);
                }
                printTimeoutMessage();
        logger_o.fine("Now leaving the ABCTask ...");
        } catch (Exception e) {
            logger_o.error("An error while idling "+e.getMessage());
        }
    }

} 
```

$printTimeoutMessage() 如下：

```
void printTimeoutMessage() {
    FacesUtils.addErrorMessage(MESSAGES.getString("common.timeoutOccured"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:22:40.760

你基本上是手动产生一个线程。`FacesContext`仅在提供与 的 URL 模式匹配的 HTTP 请求的线程中可用，在`FacesServlet`其他线程中不可用。将在所有其他线程中`FacesContext#getCurrentInstance()`返回。`null`

再想一想，如果没有客户端发送 HTTP 请求，您将如何向 HTTP 响应发送消息？默认情况下，如果没有客户端的请求，您将无法向客户端发送任何内容。

寻找轮询/推送技术。这个具体问题与类层次结构/范围完全无关。将来，如果您确定了`null`. 你似乎根本没有这样做。

# java - 通过按钮操作从文件中删除一行

> ID：15362478
> 
> 赞同：1
> 
> 时间：2013-03-12T13:22:52.007
> 
> 标签：java, swing, jtable, jbutton

是的，我已经搜索了通过比较和匹配删除特定行的方法，但是我的情况与我搜索的情况不同，并且发生了错误的操作。

这里的代码是`actionPerformed`按钮`btnRemove`。它的作用是从表格中删除选定的单元格，并且还意味着从文件中删除相应的单元格（字符串）值`Activities.dat`

但是，发生的情况是代码使**整个**文件被删除并变为空白，留下 1 个空行，而不仅仅是我想要删除的行。

```
btnRemove.addActionListener(new ActionListener() {

               public void actionPerformed(ActionEvent e)
               {

                    //Execute when button is pressed
                    int row = table.getSelectedRow(); 
                    int column = table.getSelectedColumn();

                    if (row >= 0) {
                        if (column >=0) {

                        for(int i=0; i<5; i++)
                         {
                            table.setValueAt("", row, column);     
                         }
                        }
                    }

                File file1 = new File("Activities.dat");
                try
                {
                    BufferedWriter writer = new BufferedWriter(new FileWriter(file1));
                    BufferedReader reader = new BufferedReader(new FileReader(file1));

                    Object lineToRemove = table.getValueAt(row, column);
                    lineToRemove.toString(); 
                    System.out.print(lineToRemove);

                    String currentLine;

                    while((currentLine = reader.readLine()) != null)
                    {
                    // trim newline when comparing with lineToRemove
                    String trimmedLine = currentLine.trim();

                    Object lineToRemove = table.getValueAt(row, column);
                    lineToRemove.toString();                                        

                    if(trimmedLine.equals(lineToRemove)) continue;
                        writer.write(currentLine);
                    }                                                               
                     writer.close();

                }
                catch (IOException ex)
                {
                    Logger.getLogger(ActivityScreen.class.getName()).log(Level.SEVERE, null, ex);
                }
               }
           }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:29:32.353

看看[RandomAccessFile](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html)。将文件保持原样，直到要删除的行，然后将文件的其余部分从已删除部分的末尾复制到文件末尾，从您开始删除的点开始。

伪代码：

```
String line = "line I want to remove";
RandomAccessFile raf = openRandomAccessFile();

while(!line.equals(raf.readLine())) {
    //just going to the point we want
}

long beginOfTheRemovingPointer = raf.getFilePointer()-size of removed line;
raf.seek(beginOfTheRemovingPointer);
raf.write(from beginOfTheRemovingPointer+size of removed line until the end);
raf.setLength(new length); 
```

`RandomAccessFile`方法是存在的。只需查看 API 即可了解它们的具体功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:58:42.557

您正在循环`lineToRemove`中制作副本。如果您更改了to的类型并将其值分配给它（并且之后不要更改它），`while`那也会更好。此外，您正在设置 [ , ]的值，*然后*再获得它。您将搜索（如果不是一个非常好的主意，则什么也不搜索）。尝试做这样的事情：`line``String``table.getValueAt(row, column).toString()``row``column`*`""`*

 *```
 btnRemove.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            // Execute when button is pressed
            int row = table.getSelectedRow();
            int column = table.getSelectedColumn();
            if (row >= 0) {
                if (column >= 0) {
                    File file1 = new File("Activities.dat");
                    File temp = new File(file1.getAbsolutePath() + ".tmp"); // temp file
                    PrintWriter writer = null;
                    BufferedReader reader = null;
                    try {
                        writer = new PrintWriter(new BufferedWriter(new FileWriter(temp)), false);
                        reader = new BufferedReader(new FileReader(file1));
                        String lineToRemove = table.getValueAt(row, column).toString();
                        System.out.print(lineToRemove);
                        String currentLine;
                        while ((currentLine = reader.readLine()) != null) {
                            // trim newline when comparing with lineToRemove
                            String trimmedLine = currentLine.trim();
                            if (trimmedLine.equals(lineToRemove))
                                continue;
                            writer.println(currentLine);
                        }
                    } catch (IOException ex) {
                        Logger.getLogger(ActivityScreen.class.getName()).log(Level.SEVERE, null, ex);
                    } finally {
                        try {
                            if (reader != null)
                                reader.close();
                            if (writer != null) {
                                writer.flush();
                                writer.close();
                                file1.delete(); // delete the old one
                                temp.renameTo(file1); // make temp same as original
                            }
                        } catch (IOException e1) {
                            e1.printStackTrace();
                        }
                    }
                    table.setValueAt("", row, column);
                }
            }
        }
    }); 
```*

# java - java套接字超时行为

> ID：15362484
> 
> 赞同：2
> 
> 时间：2013-03-12T13:22:57.830
> 
> 标签：java, sockets, timeout

如果我在 java 套接字上设置 soTimeout，那么在主动对等点与被动对等点的情况下会发生什么行为。例如，如果我有一个 readtimeout 值 1 分钟并且有一个文件传输并且需要 5 分钟，它会不会得到 readtimeout 异常？对我来说，连接挂起时有必要获得超时异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:53:32.757

该`soTimeout`设置显式影响从套接字输入流读取的操作。您可以将其视为允许调用者在读取操作上定义一个定时块。来自 Javadoc 的`setSoTimeout`：

> 使用指定的超时启用/禁用 SO_TIMEOUT，以毫秒为单位。 **将此选项设置为非零超时，与此 Socket 关联的 InputStream 上的 read() 调用将仅阻塞此时间量**。如果超时到期，则会引发 java.net.SocketTimeoutException，尽管 Socket 仍然有效。

在被动对等体的情况下，不会仅仅因为对等体没有调用而引发超时`read`。但是，如果确实进行了读取调用，则该调用必须在`soTimeout`过期之前返回数据，否则将引发 SocketTimeoutException。

# distributed-computing - 从分布式数据库读取的一致性

> ID：15362485
> 
> 赞同：1
> 
> 时间：2013-03-12T13:23:00.133
> 
> 标签：distributed-computing, eventual-consistency, distributed-database, data-consistency

我有一组数据库，分布在网络中的多个位置，例如。一个需要在该数据库中存储一些数据的客户端。

我需要确保我的数据将始终被存储。

我无法使用同步/异步复制组织副本集，因为它会使我连接到一个故障点的主服务器，因此我将数据从客户端发送到我知道的所有数据库。显然，一个数据库可能无法存储，所以我依赖于其他数据库的写入。最后，尽管这些数据集是重叠的，但我得到了存储在 DB 中的不同数据集。（例如 DB1 -> [1, 2, 3]，DB2 -> [1, 3]，DB3 -> [2,3,4]）

从这些数据库读取时如何获得一致的数据？我应该在写入数据的客户端和读取的客户端上应用哪些技术才能成功合并数据集（获取阅读器 [1,2,3,4]）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:37:54.647

您要问的基本上是计算机科学的整个分支。这是一个非常重要的问题，您会发现数量惊人的事情是不可能的。

另请注意，仅说“一致”数据是不够的定义。有各种级别的一致性（read-your-own-writes、reads-follow-writes、单调读取、线性化、因果等）我认为您可能的意思是（在非常松散的意义上）：一致性类似于什么当您只使用一个数据库时，您会得到。

要直接回答您的问题，您需要决定读取仲裁大小和写入仲裁大小。必须选择这些大小，以便读取和写入将由至少一个数据库实例重叠。如果您想针对写入延迟进行优化，请使用较小的写入仲裁，如果您想针对读取延迟进行优化，请执行相反的操作。

可以在[复制数据的加权投票中](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.12.6256)找到有关重叠读/写仲裁的更详细说明。这被认为是复制领域的开创性工作。

在添加或删除数据库实例时，还要注意重叠仲裁的行为。听起来您有一个相对静态的拓扑，但如果不是这种情况，则需要做出一组完全不同的选择。

最后——这是真正的咬牙切齿——我所描述的在某些情况下实际上并没有给你一致性（根据任何定义）（我喜欢[丹尼尔阿巴迪对何时安迪为什么的解释](http://dbmsmusings.blogspot.com/2012/10/ieee-computer-issue-on-cap-theorem.html?showComment=1353363529247#c8721474304375616864)），但对于许多系统来说它给了你*很好的足够的*一致性。由您决定您需要的一致性级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:20:28.397

There are two-way/three-way replication software that do not require a "master". You can also use transaction log based replications.

What and how you can use will depend on the database product you use.

HTH

# c++ - c++ - Tricky Method - 需要解决方案

> ID：15362486
> 
> 赞同：0
> 
> 时间：2013-03-12T13:23:05.407
> 
> 标签：c++, arrays, string

对象数组 tArray 包含买家姓名和购买的数量，每个买家可以多次出现在对象数组中。我必须以数组的形式返回五个最大买家的姓名。

我试图与买方名称并行运行两个阵列，并且在另一个阵列中有总体积。

我的方法通常有缺陷，因为我得到了错误的结果，我该如何解决这个问题。

谢谢

ntransactions = 数组中的事务数

```
string* Analyser::topFiveBuyers()
{
//set size and add buyer names for comparison.
const int sSize = 5;
string *calcString = new string[sSize];
calcString[0] = tArray[0].buyerName;
calcString[1] = tArray[1].buyerName;
calcString[2] = tArray[2].buyerName;
calcString[3] = tArray[3].buyerName;
calcString[4] = tArray[4].buyerName;
int calcTotal[sSize] = {INT_MIN, INT_MIN, INT_MIN, INT_MIN, INT_MIN};

//checks transactions
for (int i = 0; i<nTransactions; i++)
{
    //compares with arrays
    for(int j =0; j<sSize; j++)
    {
        //checks if the same buyer and then increase his total
        if(tArray[i].buyerName == calcString[j])
        {
        calcTotal[j] += tArray[i].numShares;
        break;
        }
            //checks if shares is great then current total then replaces
            if(tArray[i].numShares > calcTotal[j])
            {           
            calcTotal[j] = tArray[i].numShares;
            calcString[j] = tArray[i].buyerName;
            break;
            }   
    }
}
return calcString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:12:46.017

假设您被允许，我首先将值累积到 std::map 中：

```
std::map<std::string, int> totals;

for (int i=0; i<ntransactions; i++)
    totals[tarray[i].buyername] += tarray[i].numshares; 
```

这将加起来每个买家的股份总数。然后，您想将该数据复制到 std::vector，并按份额数获得前 5 个。目前，我将假设您的结构（使用`buyername`和`numshares`作为成员）命名为`transaction`.

```
std::vector<transaction> top5;

std::copy(totals.begin(), totals.end(), std::back_inserter(top5));

std::nth_element(top5.begin(), top5.begin()+5, top5.end(), by_shares()); 
```

为此，您需要一个名为的比较函子`by_shares`，如下所示：

```
struct by_shares { 
    bool operator()(transaction const &a, transaction const &b) { 
        return b.numshares < a.numshares;
    }
}; 
```

或者，如果您使用的编译器足够新来支持它，则可以使用 lambda 而不是显式仿函数进行比较：

```
std::nth_element(totals.begin(), totals.end()-5, totals.end(), 
    [](transaction const &a, transaction const &b) { 
        return b.numshares < a.numshares; 
    }); 
```

无论哪种方式，在 nth_element 完成后，您的前 5 个元素将位于向量的前 5 个元素中。我已经颠倒了正常的比较来做到这一点，所以它基本上是按降序工作的。或者，您可以使用升序，但从集合末尾指定点 5，而不是从开头指定 5。

我应该补充一点，还有其他方法可以做到这一点——例如，Boost bimap 也可以很好地完成这项工作。鉴于这听起来像是家庭作业，我的猜测是像 bimap 这样为您处理几乎整个工作的预打包解决方案可能不会/不会被允许（甚至`std::map` *可能*出于几乎相同的原因被禁止）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:51:03.973

由于您可以拥有多次相同的买家，因此您必须为所有买家存储一个柜台，而不仅仅是其中的 5 个，因为无法知道您从前 5 名中删除的买家不应该是前 5 名的一部分（因为稍后可以将更多项目链接到该买家`tArray`）。

我建议使用 stl 地图，其关键是买家姓名并重视项目数量。`tArray`您通过迭代并汇总同一买家购买的所有商品来填充它。然后，您可以在地图上进行迭代并轻松检索 5 个顶级买家，因为每个买家只有一个条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:35:15.220

当外循环开始时，索引`i`为零，内循环也是如此。这意味着第一个条件检查`tArray[0].buyerName == calcString[0]`哪个等于您在循环之前设置它的方式。这导致`calcTotal[0]`从内循环增加`-2147483648`和离开内循环。

我不确定，但这似乎不是人们想要的。

# c# - 将 VBScript 片段转换为 C#

> ID：15362489
> 
> 赞同：0
> 
> 时间：2013-03-12T13:23:15.913
> 
> 标签：c#, vbscript, converter

我已经查看了代码，但我根本不知道哪些函数在做什么以及如何与我的主要编码语言 C# 相关。

```
Set mSkype = WScript.CreateObject("Skype4COM.Skype", "Skype_")

ContactName=InputBox ("Enter the contact's Skype User Name" & CHR(13) & "Note that this must be the User Name and not the Display Name", "User Name:")

If ContactName = "" Then
    WScript.Quit
Else
    If mSkype.User(ContactName).FullName="" then
        WScript.Echo ("The name " & ContactName & " is not in your Contact List")
        WScript.Quit
    End If  
End If

PictureFileName=InputBox ("Enter the path and name of the Picture" & CHR(13) & "The file extension must be .jpg", "Save Picture as:")

If PictureFileName="" Then
    WScript.Quit
End If

cmdStr = "GET USER" & " " & ContactName & " " & "AVATAR 1" & " " & PictureFileName
mSkype.SendCommand mSkype.Command(0, cmdStr) 
```

哦，我确实已经导入了 skype4com，并且我正在使用该 api，这不是转换的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:30:47.590

InputBox 是一个显示输入提示的窗口。它在 VB.NET 中可用，您实际上可以通过添加对 Microsoft.VisualBasic 的引用在 C# 中使用它。见[这里](https://stackoverflow.com/questions/97097/what-is-the-c-sharp-version-of-vb-nets-inputdialog)。

WScript 在 VB 中也不可用，在 Skype 开发人员论坛中研究如何使用 Skype 插件可能会很好。 [这](http://devforum.skype.com/t5/Desktop-API/Make-a-call-using-Skype4Com-and-C/td-p/19840)是一个关于如何在 C# 中使用 Skype DLL 的链接。

# c# - Foreach 对所有表单的每个控件

> ID：15362497
> 
> 赞同：1
> 
> 时间：2013-03-12T13:23:36.273
> 
> 标签：c#, visual-studio, foreach, controls

我想`manipulate`全部`Controls`在我`form`的使用中`foreach loop`，我目前正在使用以下方法：

```
 foreach (Control c in this.Controls)
 {
                ComponentResourceManager resourceManager = new ComponentResourceManager(typeof(Main));
                resourceManager.ApplyResources(c, c.Name, new CultureInfo(lang));
  } 
```

这个问题是不包括其中`foreach`的控件。`Containers`

我如何才能将所有内容都包含`Controls`在内`Containers`？

我想在 1 个或 2 个`foreach`循环中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:38:08.777

## 控件

将以下类添加到您的项目中：

```
public static class ControlExtensionMethods
{
    public static IEnumerable<Control> GetOffsprings(this Control @this)
    {
        foreach (Control child in @this.Controls)
        {
            yield return child;
            foreach (var offspring in GetOffsprings(child))
                yield return offspring;
        }
    }
} 
```

它将返回调用者的所有子控件：

```
var offsprings = this.GetOffsprings(); 
```

您可以在循环中使用它：

```
foreach (Control c in this.GetOffsprings())
{
    // Do action
} 
```

## 菜单项

将以下类添加到您的项目中：

```
public static class MenuStripExtensionMethods
{
    public static IEnumerable<ToolStripItem> GetSubItems(this ToolStrip @this)
    {
        foreach (ToolStripItem child in @this.Items)
        {
            yield return child;
            foreach (var offspring in child.GetSubItems())
                yield return offspring;
        }
    }

    public static IEnumerable<ToolStripItem> GetSubItems(this ToolStripItem @this)
    {
        if (!(@this is ToolStripDropDownItem))
            yield break;

        foreach (ToolStripItem child in ((ToolStripDropDownItem) @this).DropDownItems)
        {
            yield return child;
            foreach (var offspring in child.GetSubItems())
                yield return offspring;
        }
    }
} 
```

它将返回调用者的所有子菜单项：

```
var allMenuItems = this.menuStrip1.GetSubItems() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:27:47.537

使其递归：

```
private static void ApplyResources(ComponentResourceManager resourceManager,
                                   CultureInfo cultureInfo,
                                   Control container)
{
    foreach (var control in container.Controls)
    {
        resourceManager.ApplyResources(control, control.Name, cultureInfo);
        ApplyResources(resourceManager, cultureInfo, control);
    }
} 
```

并像这样使用它：

```
var resourceManager = new ComponentResourceManager(typeof(Main));
var cultureInfo = new CultureInfo(lang);
ApplyResources(resourceManager, cultureInfo, this); 
```

# sql - Postgres - 更改列数据

> ID：15362505
> 
> 赞同：1
> 
> 时间：2013-03-12T13:23:45.260
> 
> 标签：sql, postgresql, sql-update

更新表“佣金”中的某些行时遇到问题。现在我有像 bar/123/456 这样的commission_number。我想将它重命名为 John/123/456 等，从“用户”表中取一个名字

```
commission                       user
-------------------------        -----------------
commission_number|user_id         username|user_id
-------------------------        -----------------
bar/123/456      | 1               John   | 1
bar/123/123      | 2               Bob    | 2
bar/456/123      | 3               Thomas | 3 
```

下面是我的查询，使用“baz”。但不知道如何从“用户”表中放置“用户名”。我只需要替换'baz'，并使用'user'的用户名，但不知道如何。

```
UPDATE commission
SET commission_number = overlay(commission_number placing 'baz' FROM POSITION('bar' IN commission_number) for 3)
WHERE commission_number in (1,2,3,4,5,6,7,8) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:47:21.707

```
update commission 
   set commission_number = u.username || '/' || left(commission_number, -strpos(commission_number, '/'))
from users u
  where u.user_id = commission.user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:39:04.110

我会从尝试类似的东西开始...

```
UPDATE commission
SET commission_number = 
  (SELECT UserName FROM User WHERE user.user_id=commission.user_id)
   ||SubString(commission_number,4,8000) 
```

除了前 3 个字符之外，还`right(commission_number,-3)`可以从中获取所有字符。

我不确定你想做
`WHERE commission_number in (1,2,3,4,5,6,7,8)`什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:48:41.337

这说明了更新后数据的外观。当我使用字符串函数时，我经常使用这种选择语句。

```
select c.commission_number, c.user_id, 
       (select username 
        from "user" 
        where "user".user_id = c.user_id) username,
       overlay(c.commission_number 
               placing (select username 
                        from "user" 
                        where "user".user_id = c.user_id) 
               from 1 for 3)
from commission c; 
```

现在您可以用您知道可行的方式编写更新语句。

```
update commission 
set commission_number = overlay(commission_number 
                                placing (select username 
                                         from "user" 
                                         where "user".user_id = commission.user_id) 
                                from 1 for 3); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:53:30.227

试试这个查询：

```
 update commission
 set commission_number=user_table.user_name+
  SUBSTRING(SUBSTRING(commission.commission_number,CHARINDEX('/',commission.commission_number,1)+0,LEN(commission.commission_number))
                ,1
                ,CHARINDEX('/',SUBSTRING(commission.commission_number,CHARINDEX('/',commission.commission_number,1)+1,LEN(commission.commission_number)),1)+LEN(commission.commission_number))
 from commission
 inner join user_table on user_table.user_id=commission.user_id 
```

**[在Sql Fiddle](http://www.sqlfiddle.com/#!3/4d152/2)**上验证

花了一些时间在**SQL Fiddle上展示**

# android - AchartEngine（隐藏 X 和 Y 轴的负值）

> ID：15362507
> 
> 赞同：2
> 
> 时间：2013-03-12T13:23:52.353
> 
> 标签：android, achartengine

我正在为我的 android 应用程序使用 achartengine。如何限制 x 轴和 y 轴？我不希望 x 轴和 y 轴的负部分出现。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T06:50:27.290

您可以使用以下方法禁用轴从位置移动：

```
renderer.setPanEnabled(enable(boolean));
renderer.setPanEnabled(enabledX(boolean), enabledY(boolean)); 
```

如果您希望轴不应为负值，则可以使用以下方法：

此处此方法采用大小 = 4 的双精度值数组；

```
renderer.setPanLimits(new double[]{{xMin, xMax, yMin,yMax}); 
```

请记住，您必须提供所有 4 个强制值，否则该平移将被禁用。为了摆脱两个轴的最大限制问题，我将 Double.MAX_VALUE 值设置如下：

```
 renderer.setPanLimits(new double[]{0.0,Double.MAX_VALUE,0.0,Double.MAX_VALUE}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T18:08:23.077

如果你想隐藏负面（或正面）数据，你应该使用限制。使用这样的限制：

```
Xmin=1;
Xmax=100;

Ymin=1;
Ymax=100;

double[] panLimits = {Xmin,Xmax, Ymin , Ymax};

multiRenderer.setPanLimits(panLimits); 
```

使用此代码，我隐藏负值并将图表平移锁定为正值。

我希望这会有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:32:03.783

我在我的代码中使用了以下内容。希望这对您有所帮助。

```
 renderer.setXAxisMin(xMin);
 renderer.setXAxisMax(xMax);
 renderer.setYAxisMin(yMin);
 renderer.setYAxisMax(yMax); 
```

您还可以通过以下代码片段进行缩放和触发：

```
 renderer.setPanEnabled(false, false);
 renderer.setZoomEnabled(false, false); 
```

# php - Word 到 xml 的转换

> ID：15362508
> 
> 赞同：1
> 
> 时间：2013-03-12T13:23:53.667
> 
> 标签：php, xml, xslt, ms-word

这是我的问题：我的组织想要将用户的 word 文档上传到服务器。在服务器端，需要将 word 文档（使用样式强制执行）转换为 XML 格式文件。接下来，我需要使用 php 解析打开的 xml 格式文件并将内容放入数据库。有谁知道如何在服务器端自动将 word 转换为 XML？是否有任何 API 或示例代码供 php 解析 Open XML 格式？感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T15:44:32.353

你看过使用[VBA](http://msdn.microsoft.com/en-us/office/ff688774.aspx)吗？

我不得不做类似的工作，并且在 WSF 或 VBS 文件中使用了 VBA。如果您的服务器是 Windows 环境，它将直接从操作系统运行。您可以从 PHP 执行此操作（不推荐）或将 Docx 文件放入 Web 服务器环境之外的热文件夹中。我推荐后者，因为 web 服务器环境。可能会引入安全问题。

另请注意，如果要将内容与样式分开，则需要对输出标记执行一些后处理。Word 是一个“文字”处理器，因此它的设计目的就是为造型。如果这是一个要求，我建议改为使用结构化的、基于 XML 的创作工具。

希望这可以帮助！

# c# - 检查文件是否正在使用而不尝试捕获？

> ID：15362518
> 
> 赞同：12
> 
> 时间：2013-03-12T13:24:27.083
> 
> 标签：c#, .net, file, exception, file-access

有没有一种方法可以检查文件是否正在使用或未被其他进程打开，而不仅仅是尝试打开它并捕获异常？没有服务方法来测试这样的事情吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T13:26:51.913

即使有，它也不会对您有多大好处，因为您仍然必须捕获异常以处理在您的初始检查和您实际尝试打开/访问它之间文件变得不可用的竞争条件。

我想不出初步防御检查有什么令人信服的优势。它只会导致不必要的代码重复。

如果有*这样*的`IsFileAccessible`函数，它可能会被实现为一个巨大的 try/catch 块，它试图打开文件、捕获失败并返回结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:14:42.237

> 我可以测试是否可以在不尝试打开的情况下打开文件吗？

.net 框架，就像下面的 Windows API 一样，不提供这样的功能。如果您想知道一个文件是否可以打开，您应该尝试打开它并检查是否失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T07:13:48.510

避免尝试捕获（但意味着尝试打开）的有趣方法是[LockFile()](http://msdn.microsoft.com/en-us/library/aa365202%28VS.85%29.aspx)或[CreateFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)函数：

> **处理 WINAPI CreateFile(...)**
> 
> 如果函数成功，则返回值是指定文件、设备、命名管道或邮槽的打开句柄。
> 
> 如果函数失败，则返回值为 INVALID_HANDLE_VALUE。要获取扩展的错误信息，请调用[GetLastError](http://msdn.microsoft.com/en-us/library/ms679360%28v=vs.85%29.aspx)。

* * *

> **BOOL WINAPI LockFile(...)**
> 
> 如果函数成功，则返回值非零 (TRUE)。
> 
> 如果函数失败，则返回值为零 (FALSE)。要获取扩展的错误信息，请调用[GetLastError](http://msdn.microsoft.com/en-us/library/ms679360%28v=vs.85%29.aspx)。

这将锁定指定文件以供调用进程独占访问，并在失败时将错误信息写入线程的 last-error，可以使用[GetLastError](http://msdn.microsoft.com/en-us/library/ms679360%28v=vs.85%29.aspx)函数检索该错误信息。

仍然可以想象在 unlockFile 和 OpenFile 之间另一个进程可以锁定文件，但是可以通过将文件锁定到需要打开的那一刻来最小化这段时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T18:02:48.663

你可以在 .net 4.5 中实现这个人，但它包含很多开销 [http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

# machine-learning - 在 rapidminer 中使用 stacking 模块

> ID：15362520
> 
> 赞同：1
> 
> 时间：2013-03-12T13:24:30.797
> 
> 标签：machine-learning, classification, rapidminer

我是 rapidminer 的新手，我知道如何添加神经网络和应用模型以及如何使用交叉验证。但是现在我想使用堆叠模块，但是我得到了我的神经网络无法使用二项式字段的错误，但是在我开始使用堆叠模块之前它就已经发生了。

在左侧的堆栈模块中，我有 2 个 adaboosts，第一个是神经网络，第二个是天真的 byas。在右侧，我有一个单一的神经网络，它给出了错误我该如何解决这个问题？我已经查看了这些问题，但我找不到任何关于使用多个学习者的信息。谷歌并没有它应该的那么有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:33:04.103

神经网络算子失败是因为基础学习器输出向训练数据添加了新的多项式属性，然后堆叠模型学习器使用这些属性。神经网络只能处理数字属性。

您需要以某种方式将多项式转换为数字。

# android - 何时调用 onRestoreInstanceState？

> ID：15362525
> 
> 赞同：44
> 
> 时间：2013-03-12T13:25:02.077
> 
> 标签：android, android-lifecycle, onsaveinstancestate, onrestoreinstancestate

对不起，我的不理解，但我是 android 开发的新手。

我有一个包含活动 A 和活动 B 的应用程序，我从活动 A 转到活动 B。当我离开活动 A 时，该`onSaveInstanceState`方法被调用，但是当我返回活动 A 时（从同一个应用程序中的活动 B )，`onCreate`方法中的捆绑包为空。

我该怎么做才能保存活动 A 的先前状态？我只想存储应用程序生命周期的数据。

有人可以帮我弄这个吗？

这是我的活动 A 代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if (savedInstanceState != null)
    {
        Log.v("Main", savedInstanceState.getString("test"));
    }
    else
    {
        Log.v("Main", "old instance");
    }
}  

@Override
public void onSaveInstanceState(Bundle savedInstanceState) 
{
    Log.v("Main", "save instance");

    savedInstanceState.putString("test", "my test string");

    super.onSaveInstanceState(savedInstanceState);
}

public void buttonClick(View view)
{
    Intent intent = new Intent(this, Activity2.class);
    startActivity(intent);
} 
```

这是我的活动 B 的代码，当我按下按钮返回活动 A 时：

```
public void onBack(View view)
{
    NavUtils.navigateUpFromSameTask(this);
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-10-04T08:05:19.627

要回答您的问题，请查看 android 文档：[https://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState(android.os.Bundle)](https://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState(android.os.Bundle))

它表示 onRestoreInstanceState 在活动生命周期中的 onStart() 方法之后调用。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-12T13:41:19.633

保存和恢复状态旨在保存用户退出应用程序时已过时的当前临时数据。当您通过打开下一个活动来最小化或离开活动时，它可能会由于缺乏资源而被系统杀死，并`savedInstanceState`在您返回时重新启动。因此`onSaveInstanceState()`，仅用于保存最小化恢复会话数据或应在轮换时保留的数据。

因此，如果您在前面启动一个新 Activity 并返回到前一个 Activity（您正在尝试做的事情），则 Activity A 可能不会被杀死（只是停止）并重新启动而不会被破坏。`Don't keep activities`您可以通过签入开发人员选项菜单来强制杀死它并恢复。

如果您从最近的任务列表中调用`finish()`或删除该任务，则该任务被清除后将不会被传递。`Activity``savedInstanceState``onCreate()`

如果该值必须是持久的，请考虑使用`SharedPreferences.`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-02T15:26:46.740

发生这种情况是因为您正在艰难地航行。如果您使用手机的默认后退按钮导航，您`onCreate`将获得传入的捆绑包。

为了避免这个问题，我建议您将您的状态保存到共享首选项以及备份中。当捆绑包为空时，从共享首选项中恢复它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-06T05:32:57.080

[参考](https://stackoverflow.com/a/41503327/5705721)

**onSaveInstanceState**

```
... onPause()-> onSaveInstanceState() -> onStop() -> onDestory() 
```

**onRestoreInstanceState**

```
onCreate()-> onStart()-> onRestoreInstanceState()-> onPostCreate(Bundle) ... 
```

或者您可以使用`LiveData`. 保存其中的状态并观察。如果设备旋转，它将相应地更新视图。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-18T15:35:27.327

在 onStart() 之后，在 onCreate() 之后

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-19T18:13:12.513

在这种情况下，我使用了一个标志和 SharedPreferences。这应该有效，并且当您更改屏幕方向时。

# ios - 如何在每个单元格的自定义 tableCell 中创建自定义按钮我需要三个图像

> ID：15362526
> 
> 赞同：0
> 
> 时间：2013-03-12T13:25:03.953
> 
> 标签：ios

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

HomeVCTableViewCell *cell = (HomeVCTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    cell = [[HomeVCTableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

int imageNumber = 0;

for (int i = (indexPath.row * imagesCount); i < ((indexPath.row *imagesCount) + imagesCount); i++) {

        if (i < [cellImageVOArray count]) { // If resultsArray Count is odd then we no need to create cell image

            PhotoVO *photoVo = (PhotoVO *)[cellImageVOArray objectAtIndex:i];

            cell.photobutton.frame=CGRectMake(((imageNumber * 5)+5)+(imageNumber * width), 2, width, height -4);

            cell.photobutton.tag = i + 100;
            [[cell.photobutton layer] setBorderWidth:3.0f];
            [[cell.photobutton layer] setBorderColor:[UIColor whiteColor].CGColor];

            [cell.photobutton addTarget:self action:@selector(imageTapped:) forControlEvents:UIControlEventTouchUpInside];

            [cell.photobutton setBackgroundImageWithURL:[NSURL URLWithString:photoVo.thumb_URL1] placeholderImage:[UIImage imageNamed:@"loader.png"]];
            imageNumber ++;

        }

    }

return cell; 
```

}

CustomCell.m

```
 - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self)
    {
        // Initialization code

        NSLog(@"Content View = %f",self.contentView.frame.size.height);
        photobutton=[UIButton buttonWithType:UIButtonTypeCustom];
        [self.contentView addSubview:photobutton];

    }
    return self;
} 
```

在上面的代码中，我在每个重复的单元格中只有最后一个按钮，请告诉如何在每个单元格中显示三个按钮提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:32:14.067

```
 - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self)
    {
        btn1 = [UIButton buttonWithType:UIButtonTypeCustom];
        btn1.frame = CGRectMake(0, 0, 50, 35); // set as u required.
        [self.contentView addSubview:btn1];

        btn2 = [UIButton buttonWithType:UIButtonTypeCustom];
        btn2.frame = CGRectMake(65, 0, 50, 35); // set as u required.
        [self.contentView addSubview:btn2];

        btn3 = [UIButton buttonWithType:UIButtonTypeCustom];
        btn3.frame = CGRectMake(120, 0, 50, 25); // set as u required.
        [self.contentView addSubview:btn3];

    }
    return self;
} 
```

# php - 如何为按钮赋值？

> ID：15362534
> 
> 赞同：-5
> 
> 时间：2013-03-12T13:25:29.693
> 
> 标签：php, mysql

我有这个代码

```
<form action='view.php' method='post'>

<table>

<?php
while($row=mysql_fetch_array($check2))
{       
    echo "<tr><td id='td'>",$row['wTitle']," </td><td></td></tr>
    <tr><td style='text-align:right;'>",$row['wContent'],"</td><tr><td height='20'> </td><td>    </td></tr>
<tr><td colspan='2'><input type='submit' name='submit' value='edit'/></td></tr>";
}
?>
</table>
</form> 
```

是的，它有编辑按钮。但我该怎么做才能做到这一点？：

如果检索到 3 行，还会出现 3 个编辑按钮，对吗？

因此，如果我单击一个编辑按钮，它将带我到另一个页面，其中包含一个可以获取该行值的查询。比如说，我想让 workId 作为每一行的值。我应该把它放在哪里？@_@

就像是

编辑按钮显示“编辑”，但它带有 workId 值。嗬嗬？T_T请帮助有需要的人。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:27:17.757

你必须添加一个带有'action = ...'的'表单' - 围绕你的提交按钮。

或者只是使用常规链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:28:54.027

使其成为超链接并将 id 传递给该页面..

while($row=mysql_fetch_array($check2)) {
echo "",$row['wTitle'],"点击编辑",$row['wContent'],"编辑"; }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:23:24.670

所以这是非常粗略的，但这是你可以做你想做的事情的一种方式：

```
<table>
<?php
while($row=mysql_fetch_array($check2)) {
?>
<tr>
  <td><?php echo $row['wTitle']; ?></td>
  <td>Click to edit</td>
</tr>
<tr>
  <td style="text-align:right;"><?php echo $row['wContent']; ?></td>
</tr>
<tr>
  <td colspan="2" height="202">&nbsp;</td>
</tr>
<tr>
  <td colspan="2">
    <form action="view.php" method="post">
      <input type="submit" name="submit" value="edit" />
      <input name="workId" type="hidden" value="<?php echo $row[workId]; ?>" />
    </form>
  </td>
</tr>
<?php } ?>
</table> 
```

这假设您的`view.php`脚本查找`workId`查询字符串参数，如果存在，则使用它来编辑记录。您的表格看起来很奇怪（例如没有标题），因此您可能需要再次查看布局。

这些创建/更新/删除要求的更好解决方案之一是编写一个 REST API 并使用 AJAX（可能通过 jQuery）来执行它们；但我有一种感觉，这超出了你的能力范围。

# sql-server - Hibernate 标识符生成器序列和 MS SQL

> ID：15362536
> 
> 赞同：0
> 
> 时间：2013-03-12T13:25:35.090
> 
> 标签：sql-server, hibernate

有人可以在这里指出我正确的方向吗？

Hibernate 是否支持 MS SQL 2012，序列作为

```
 @GeneratedValue(strategy=GenerationType.SEQUENCE) 
```

希望从 Oracle 移植到 MS SQL 试图找出什么不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:36:19.837

这尚不支持，但有一个关于此的拉取请求：[https ://github.com/hibernate/hibernate-orm/pull/395](https://github.com/hibernate/hibernate-orm/pull/395)

# macos - nodejs密码ubuntu没有按预期工作

> ID：15362541
> 
> 赞同：4
> 
> 时间：2013-03-12T13:25:48.003
> 
> 标签：macos, node.js, ubuntu, cryptography, encryption

我写了一个数据加密工具，它适用于mac os，但不适用于ubuntu。以下代码显示了差异。

```
var crypto = require('crypto');

var k = '1234567890123456';
var v = '1234567890123456';
var alg = 'AES-128-CBC';

var buf = new Buffer('Hello world!');
console.log(buf);

var cipher = crypto.createCipheriv(alg, k, v);
var result = cipher.update(buf);
result += cipher.final();
buf = new Buffer(result, 'binary');
console.log(buf);

var decipher = crypto.createDecipheriv(alg, k, v);
decipher.setAutoPadding(auto_padding=false);
result = decipher.update(buf);
result += decipher.final();
buf = new Buffer(result, 'binary');

console.log(buf);
console.log(buf.toString()); 
```

输出，在 Mac 上：

```
<Buffer 48 65 6c 6c 6f 20 77 6f 72 6c 64 21>
<Buffer 17 0e 2d 73 94 bf d4 24 95 b3 a7 49 73 58 5e 3f>
<Buffer 48 65 6c 6c 6f 20 77 6f 72 6c 64 21 04 04 04 04>
Hello world! 
```

Ubuntu：

```
<Buffer 48 65 6c 6c 6f 20 77 6f 72 6c 64 21>
<Buffer 17 0e 2d 73 fd fd fd 24 fd fd fd 49 73 58 5e 3f>
<Buffer 05 6d 69 fd fd 1b 49 62 60 39 fd 68 fd fd fd>
mi��Ib`9�h��� 
```

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:29:32.723

节点 0.10.0 对加密模块引入了一些可能会破坏现有代码的内部更改。

通过以下修复（如[http://nodejs.org/api/crypto.html#crypto_recent_api_changes](http://nodejs.org/api/crypto.html#crypto_recent_api_changes)所建议），它可以在我的 Debian 机器上运行：

```
var crypto = require('crypto');
crypto.DEFAULT_ENCODING = 'binary';
... 
```

（感谢@user568109 让我阅读该页面！）

上述页面还提出了永久修复代码的建议，因为设置`crypto.DEFAULT_ENCODING`被认为是一种临时措施。

# asp.net - 设置 gridview 列以包含链接，其中绑定数据是 URL 列表

> ID：15362545
> 
> 赞同：0
> 
> 时间：2013-03-12T13:25:57.440
> 
> 标签：asp.net

我有一个从数据库中检索的对象，其中一个字段是 URL。我在网格视图中显示这些数据，我希望 URL 列是一系列链接，上面写着“下载”，它指向相应的 URL。

我目前有以下内容：

```
<asp:GridView ID="my_gv" runat="server" AutoGenerateColumns = "false" 
            GridLines="None" Width="100%" AllowSorting="True" 
            CssClass="table table-bordered table-condensed">
            <AlternatingRowStyle BackColor="#F5F5F5" />
            <Columns>
                <asp:HyperLinkField  DataNavigateUrlFields = "location" Text = "Download link" HeaderText = "Download"  />
            </Columns>    
        </asp:GridView> 
```

这似乎不起作用。条目像链接一样是蓝色的，但是用鼠标悬停实际上不会调用 URL（光标不会变为“链接”光标）。查看生成的 HTML，它们是`<a>`标签，但不包含`href`属性。为什么？我错过了什么才能让它发挥作用？我填充以下内容：

```
 private void populateElementView()
        {
            List<MyElement> elements = database.getGeneratedElements();
            // elements has a .location property
            my_gv.DataSource = elements;
            my_gv.DataBind();

        } 
```

有关详细信息，URL 指向计算机上的文件。手动插入带有 url “testing” 的项目实际上是有效的，而实际的文件路径却没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:44:51.450

试试这个可能对你有帮助。在这里，我使用[DataNavigateUrlFormatString 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.datanavigateurlformatstring.aspx)，用于

`Gets or sets the string that specifies the format in which the URLs for the hyperlinks in a HyperLinkField object are rendered.`

```
<asp:HyperLinkField  DataNavigateUrlFields = "location" Text = "Download link" HeaderText = "Download" DataNavigateUrlFormatString="{0}" /> 
```

编辑 ：

您可以将文件放在服务器位置，并且您的位置字段将具有这样的虚拟路径`MusicFiles/File1.avi`

现在您可以将您的网址格式化`HyperLinkField`为 `http://localhost//Download/{0}`{0} 表示 MusicFiles/File1.avi 或您`location`的字段值

```
<asp:HyperLinkField  DataNavigateUrlFields = "location" Text = "Download link" HeaderText = "Download" DataNavigateUrlFormatString="http://localhost//Download/{0}" /> 
```

我认为这将在您部署它时对您有所帮助，并且用户可以从您的服务器下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:44:17.830

试试这个方法：

```
<asp:HyperLink ID="HyperLink1" Text="Download link" NavigateUrl='<%# Eval("location")%>' runat="server"></asp:HyperLink> 
```

或者，如果您使用另一个控件，只需通过这种方式将值绑定到 NavigateUrl：

```
<%# Eval("location")%> 
```

# wordpress - Wordpress 表格插件在其下方浮动元素

> ID：15362548
> 
> 赞同：0
> 
> 时间：2013-03-12T13:26:13.837
> 
> 标签：wordpress

再会

我正在使用简单的表格插件（[http://wordpress.org/support/view/plugin-reviews/easy-table](http://wordpress.org/support/view/plugin-reviews/easy-table)），但浮动有问题：我在表格下方添加的任何内容都会浮动到右侧桌子...

现在我可以通过使用

```
<div style="clear: both"></div> 
```

但是没有更“用户友好”的方式吗？这样我的客户（没有 html/css 经验）可以毫无问题地使用这些表格......

表简码代码：

```
[table caption="Just test table" width="500" colwidth="20|100|50" colalign="left|left|center|left|right"]
no,head1,head2,head3,head4
1,row1col1,row1col2,row1col3,100
2,row2col1,row2col2,row2col3,20000
3,row3col1,,row3col3,1405
4,row4col1,row4col2,row4col3,23023
[/table] 
```

有什么建议么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:08:23.570

您应该查看表格使用的 CSS。现在它可能使用`float:left`值。

使用 Firebug 或类似工具检查是否是这种情况，并尝试编辑 CSS。

# javascript - 完全加载应用程序时的Phonegap

> ID：15362550
> 
> 赞同：1
> 
> 时间：2013-03-12T13:26:14.813
> 
> 标签：javascript, jquery, cordova

我正在尝试制作一个电池应用程序，将电池电量从 0% 动画到当前水平作为带有 Jquery 的动画。

它正在工作，但是..当我的应用程序加载时，在初始屏幕完成并且cordova也加载后，动画几乎完成了。我知道这一点的唯一原因是因为我将动画设置为 5 秒。

我想让它在加载应用程序时开始动画。

我不确定我所指的这个“状态”是否有一个直接的事件名称左右。因此，如果我无法用真实的话来描述它，我很抱歉。:-)

考虑以下代码：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    window.addEventListener("batterystatus", onBatteryStatus, false);
}

function onBatteryStatus(info) {
  $("div#status").animate({ width: bat + "%" }, 5000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:40:21.537

从我所看到的来看，您似乎正朝着正确的方向前进。以下是我的基本 Cordova 项目是如何设置的。

**Javascript**

```
var app = {
// Application Constructor
initialize: function() {
    this.bindEvents();
},
// Bind Event Listeners
//
// Bind any events that are required on startup. Common events are:
// `load`, `deviceready`, `offline`, and `online`.
bindEvents: function() {
    document.addEventListener('deviceready', this.onDeviceReady, false);
},
// deviceready Event Handler
//
// The scope of `this` is the event. In order to call the `receivedEvent`
// function, we must explicity call `app.receivedEvent(...);`
onDeviceReady: function() {
    // Get battery status HERE
}
}; 
```

然后在我的“index.html”中初始化我的应用程序类，如下所示：

```
<script type="text/javascript">
    app.initialize();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:02:27.957

您可以尝试[cordova-jquerymobile-boilerplate](https://github.com/sebbie1o1/cordova-jquerymobile-boilerplate)。你应该从一个样板开始你的工作，它会让你走得又快又安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:49:11.770

您可能需要考虑使用 PhoneGap Splashscreen 功能：

[PhoneGap 闪屏 API 文档](http://docs.phonegap.com/en/edge/cordova_splashscreen_splashscreen.md.html#Splashscreen)

您应该在 Java 方面调用您的启动画面 (DroidGap)，并让 PhoneGap 在显示启动画面时在后台完成它自己的工作。包含相关代码的这篇博文应该可以帮助您解决问题：

[PhoneGap 中的启动画面](http://simonmacdonald.blogspot.ie/2012/04/phonegap-android-splashscreen-just-got.html)

现在应该发生的是 PhoneGap 将加载，然后您的启动屏幕将完整显示。希望这能解决您的问题！

# c# - 无法隐式转换类型错误

> ID：15362553
> 
> 赞同：0
> 
> 时间：2013-03-12T13:26:28.760
> 
> 标签：c#, linq, lambda

我的任务是创建一个类`Student`并创建一个方法，仅当学生的名字按字母顺序使用 LINQ 查询运算符在他们的姓氏之前，才从数组中挑选学生。我写了这个`Student`类：

```
public class Student
{
     private string firstName;
     private string familyName;
     private int age;

    public Student(string firstName, string familyName, int age)
        : this()
    {
        this.firstName = firstName;
        this.familyName = familyName;
        this.age = age;
    }

    public Student()
    {
        firstName = "Dancho";
        familyName = "Mastikata";
        age = 24;
        this.firstName = firstName;
        this.familyName = familyName;
        this.age = age;
    }

    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }
    }

    public string FamilyName
    {
        get { return familyName; }
        set { familyName = value; }
    }

    public int Age
    {
        get { return age; }
        set { age = value; }
    }
} 
```

然后我编码了这个：

```
public class StudentsManipulations
{
    static void Main()
    {
        Student[] students = new Student[6]{new Student("Georgi", "Milanov", 21      ),
                                            new Student("Ilko", "Pirgov", 30         ),
                                            new Student("Neboisha", "Yelenkovich", 34),
                                            new Student("Dimitar", "Berbatov", 32    ),
                                            new Student(                             ),
                                            new Student("Nikolai", "Bodurov", 24     )};

    }

    public static List<Student> StudentSortByFirstName(Student[] students)
    {
        List<Student> sortedStudents = from student in students 
             where student.FirstName.CompareTo(student.FamilyName) < 0 
             select student;

        return sortedStudents;
    } 
} 
```

不幸的是 where 关键字有一个错误，我无法完全理解：

> 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“System.Collections.Generic.List”。存在显式转换（您是否缺少演员表？）。

你能帮我理解到底是什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T13:28:56.800

使用[`ToList()`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)方法枚举结果并将它们放入列表中：

```
var query = from student in students
            where student.FirstName.CompareTo(student.FamilyName) < 0
            select student;

List<Student> sortedStudents = query.ToList(); 
```

或者在一个声明中：

```
List<Student> sortedStudents = (from student in students
                                where student.FirstName.CompareTo(student.FamilyName) < 0
                                select student).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T13:29:44.897

您的错误意味着您的流利的 Linq 正在返回一个`IEnumerable<Student>`，而不是`List<Student>`您期望的。您将需要一个额外的`.ToList()`电话，或者您可以使用`IEnumerable<Student>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:30:51.153

这个查询，

```
from student in students 
where student.FirstName.CompareTo(student.FamilyName) < 0 
select student 
```

返回一个`IEnumerable<Student>`.

如果你想要一个`List<Student>`，那么你应该调用`ToList()`结果`IEnumerable<Student>`：

```
List<Student> sortedStudents = 
    (from student in students 
     where student.FirstName.CompareTo(student.FamilyName) < 0 
     select student)
    .ToList(); 
```

* * *

请注意，作为一般规则，LINQ 查询是在枚举结果时评估的，而不是之前（这称为“延迟执行”或“延迟加载”）。然而，调用`ToList()`将立即执行查询、枚举结果并填充列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T13:29:13.490

您只需要将 linq 表达式转换为列表：

```
List<Student> sortedStudents = (from student in students 
where student.FirstName.CompareTo(student.FamilyName) < 0 select student).ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T13:30:12.417

将[.ToList()](http://msdn.microsoft.com/en-us/library/bb342261.aspx)添加到您的查询中：

```
List<Student> sortedStudents = (from student in students where student.FirstName.CompareTo(student.FamilyName) < 0 select student).Tolist(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T13:29:04.763

您应该`.ToList()`在声明的末尾添加。

这会将您的 Enumerable 转换为 List

# javascript - 用子元素填充数组的递归函数

> ID：15362554
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:26:30.813
> 
> 标签：javascript, arrays, recursion

我在一个 javascript 项目中，我必须使用画布绘制一棵树。像这样：[http ://en.wikipedia.org/wiki/Binary_search_tree#Types](http://en.wikipedia.org/wiki/Binary_search_tree#Types)

每个节点代表我项目中的一个窗口，每个子节点都是前一个节点的子节点。

我确定我必须使用一个数组，例如：

```
var node = {
    windowId,
    childs{}
} 
```

也就是说，节点将是根，其 id (windowId) 和**childs{}**是另一个具有相同结构的数组。

例如：

```
var node = {
        windowId,
        childs{
            windowId //windowId of the child
            childs{}
        }
    }
   .
   .
   . 
```

我正在创建一个递归函数，但我几乎什么都没有……你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:51:21.807

如果每个节点都可以成为顶级节点，那么您所要做的就是找出一个始终允许子节点的结构。扩展您的示例，将每个子项列表设为数组将非常容易。

```
{ 
    id: 0,
    childs: [
      { 
       id: 0.1,
       childs: [ ... ]
      },
      {
      id: 0.2,
      childs: [ ... ]
      },
       ...
    ]
} 
```

其余的，将当前对象存储在一个变量中，然后遍历每个叶子并添加相应的缩进。如果你做对了，你可以有一个单独的绘图函数，并根据需要多次调用它；您只需要跟踪级别。

# regex - 正则表达式和 TMatch.Groups.Count

> ID：15362556
> 
> 赞同：4
> 
> 时间：2013-03-12T13:26:40.890
> 
> 标签：regex, delphi, delphi-xe

我正在从 Apache Commons 库中移植一些类，我发现以下行为很奇怪。我有一个正则表达式定义为

```
const
    IPV4_REGEX = '^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$'; 
```

我使用它如下：

```
ipv4Validator: TRegEx; 

ipv4Validator := TRegEx.Create(IPV4_REGEX); 
```

当我使用它来匹配 IP 地址时，以下代码返回 false - 调试器显示`Match.Groups.Count`为 5，这是我没想到的。

```
var
  Match: TMatch;
begin
  Match := ipv4Validator.Match(inet4Address);

  if Match.Groups.Count <> 4 then
      Exit(false); 
```

这是 TMatch.Groups.Count 的正确行为吗？

* * *

以防万一，这是我班级的完整代码。请注意，我已经评论了有问题的行，因为它使我的测试失败。

```
unit InetAddressValidator;

interface

uses RegularExpressions;

const
  IPV4_REGEX = '^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$';

type

  TInetAddressValidator = class
  private
    ipv4Validator: TRegEx;
  public
    constructor Create; overload;
    function isValid(const inetAddress: String): Boolean;
    function isValidInet4Address(const inet4Address: String): Boolean;
  end;

implementation

uses SysUtils;

constructor TInetAddressValidator.Create;
begin
  inherited;
  ipv4Validator := TRegEx.Create(IPV4_REGEX);
end;

function TInetAddressValidator.isValid(const inetAddress: String): Boolean;
begin
  Result := isValidInet4Address(inetAddress);
end;

function TInetAddressValidator.isValidInet4Address(const inet4Address
  : String): Boolean;
var
  Match: TMatch;
  IpSegment: Integer;
  i: Integer;
begin
  Match := ipv4Validator.Match(inet4Address);

  // if Match.Groups.Count <> 4 then
  // Exit(false);

  IpSegment := 0;
  for i := 1 to Match.Groups.Count - 1 do
  begin
    try
      IpSegment := StrToInt(Match.Groups[i].Value);
    except
      Exit(false);
    end;

    if IpSegment > 255 then
      Exit(false);
  end;
  Result := true;
end;

end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:08:25.717

Match.Groups[0] 包含整个表达式，所以这是正确的。

TGroupcollection 构造函数：

```
constructor TGroupCollection.Create(ARegEx: TPerlRegEx;
  const AValue: UTF8String; AIndex, ALength: Integer; ASuccess: Boolean);
var
  I: Integer;
begin
  FRegEx := ARegEx;
  /// populate collection;
  if ASuccess then
  begin
    SetLength(FList, FRegEx.GroupCount + 1);
    for I := 0 to Length(FList) - 1 do
      FList[I] := TGroup.Create(AValue, FRegEx.GroupOffsets[I], FRegEx.GroupLengths[I], ASuccess);
  end;
end; 
```

如您所见，内部 Flist ( `TArray<TGroup>`) 以组数 + 1 启动。FList[0] 接收偏移量为 1 和整个表达式长度的组。此行为未记录在案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T13:13:36.450

Delphi`TRegEx`旨在模仿 .NET 的`Regex`类，它还将整体正则表达式匹配添加到`Match.Groups.Count`. .NET 这样做是为了让`GroupCollection`类可以实现`ICollection`接口。

在 Java`Matcher.group(0)`中还返回整体正则表达式匹配。 `Matcher.groupCount()`返回不包括整体匹配的组数。大多数正则表达式库都是这样做的。

# python - Python SGP4 1.1 计算不正确的轨道

> ID：15362557
> 
> 赞同：2
> 
> 时间：2013-03-12T13:26:43.153
> 
> 标签：python, orbit, propagation, orbital-mechanics, sgp4

我正在使用 python SGP4 1.1 模块来计算 MEO 卫星的位置和速度。当与 STK 和 JSatTrak 进行比较时，我注意到返回的位置和速度值不正确。卫星应该有大约 6 小时的地面重复轨道，但这个程序显示的是 4:47:51 的地面重复。有什么我做错了吗？

```
from sgp4.earth_gravity import wgs72
from sgp4.io import twoline2rv
from math import atan2, cos, pi, sin, sqrt, tan
from datetime import datetime

def calculate(options):
    x = options[0]
    y = options[1]
    z = options[2]

    # Constants (WGS ellipsoid)
    a = 6378.137
    e = 8.1819190842622e-2
    # Calculation
    b = sqrt(pow(a,2) * (1-pow(e,2)))
    ep = sqrt((pow(a,2)-pow(b,2))/pow(b,2))
    p = sqrt(pow(x,2)+pow(y,2))
    th = atan2(a*z, b*p)
    lon = atan2(y, x)
    lat = atan2((z+ep*ep*b*pow(sin(th),3)), (p-e*e*a*pow(cos(th),3)))
    n = a/sqrt(1-e*e*pow(sin(lat),2))
    alt = str(p/cos(lat)-n)
    lat = str((lat*180)/pi)
    lon = str((lon*180)/pi)
    #print "%s %s %s" % (lat, lon, alt)
    return (lat, lon, alt)

line1 = '1     1U 001001   14001.00000000  .00000000  00000+0  00000+0 0 00022'           
line2 = '2     1   0.0891 294.8098 0002843  64.8653   0.5014  5.00115502    09'

satellite = twoline2rv(line1, line2, wgs72)
position1, velocity1 = satellite.propagate(2013, 3, 1, 0, 0, 1)
position2, velocity2 = satellite.propagate(2013, 3, 1, 4, 47, 52)
lat1,lon1,alt1 = calculate(position1)
lat2,lon2,alt2 = calculate(position2)

print lat1 + " " + lon1  + " " + alt1
print lat2 + " " + lon2  + " " + alt2
print "\n\n"
print position1
print position2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T17:49:51.110

您需要在计算中考虑到地球的自转。您计算的不是经度，而是地心赤经。首先阅读Wikipedia中有关[Hour Angle的文章。](http://en.wikipedia.org/wiki/Hour_angle)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T18:21:32.787

你问这个问题已经三周了，所以我想这对你没有帮助，但无论如何，对于档案......

我没有 Python SGP4 例程，我无法对其进行测试，但通常 SGP4 例程会在称为 TEME（真赤道，平均春分：[https://en.wikipedia ）的惯性（非旋转）参考系中返回位置和速度.org/wiki/Earth-centered_inertial#TEME](https://en.wikipedia.org/wiki/Earth-centered_inertial#TEME)）。你在这个参考系统中计算地球的纬度/经度，它会给你错误的结果。您应该首先将 TEME 系统转换为随地球旋转的旋转系统（如 ECEF：[https](https://en.wikipedia.org/wiki/ECEF) ://en.wikipedia.org/wiki/ECEF ），然后您可以计算纬度/经度。

我希望有用于这种转换的库，因为它不是一个简单的库。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-05T09:28:33.603

简化扰动模型是一组五个数学模型（SGP、SGP4、SDP4、SGP8 和 SDP8），用于计算卫星和空间碎片相对于地心惯性坐标系的轨道状态向量。这组模型通常被统称为 SGP4，因为该模型的使用频率很高，尤其是 NORAD 和 NASA 生产的两线元素组。这些模型预测了由地球形状、阻力、辐射和来自太阳和月球等其他天体的引力效应引起的扰动效应。简化的一般扰动 (SGP) 模型适用于轨道周期小于 225 分钟的近地物体。简化的深空扰动 (SDP) 模型适用于轨道周期大于 225 分钟的物体，对应于 5,877.5 公里的高度，假设一个圆形轨道。SGP4 模型是由 Ken Cranford 于 1970 年开发的。该模型是通过简化 Lane 和 Cranford 的更广泛的分析理论获得的，该理论将 Brouwer 的解用于其引力模型，并将功率密度函数用于其大气模型。在以下链接中，您可以使用 SGP4 Python 版本，该版本返回卫星在三个坐标系中的状态向量，即 TEME、ITRS 和 GCRS。请使用我的 SGP4，然后将输出与 STK 进行比较。我猜您正在将 SGP4 的 TEME 输出与 STK 进行比较。该模型是通过简化更广泛的 Lane 和 Cranford 分析理论获得的，该理论将 Brouwer 的解用于其引力模型，将功率密度函数用于其大气模型。在以下链接中，您可以使用 SGP4 Python 版本，该版本返回卫星在三个坐标系中的状态向量，即 TEME、ITRS 和 GCRS。请使用我的 SGP4，然后将输出与 STK 进行比较。我猜您正在将 SGP4 的 TEME 输出与 STK 进行比较。该模型是通过简化更广泛的 Lane 和 Cranford 分析理论获得的，该理论将 Brouwer 的解用于其引力模型，将功率密度函数用于其大气模型。在以下链接中，您可以使用 SGP4 Python 版本，该版本返回卫星在三个坐标系中的状态向量，即 TEME、ITRS 和 GCRS。请使用我的 SGP4，然后将输出与 STK 进行比较。我猜您正在将 SGP4 的 TEME 输出与 STK 进行比较。[https://www.researchgate.net/publication/358351066_SGP4_Python_code](https://www.researchgate.net/publication/358351066_SGP4_Python_code)

# yii - Yii 框架 - 从 url 到路由

> ID：15362561
> 
> 赞同：1
> 
> 时间：2013-03-12T13:27:00.293
> 
> 标签：yii

我搜索了，但找不到东西。所以，我有路线规则：

```
...

'/reg' => '/user/user/registration',
... 
```

在

```
Yii::app()->request 
```

我找不到任何路线信息。

那么，我怎样才能进入模块初始化函数并且只有url，路由lile

```
/reg -> user/user/registration 
```

**UPD**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:51:24.770

该路线仅可从正在运行的控制器获得。到模块初始化时，控制器尚不可用，因此您无法找到那里的路线。（您可以关注[CWebApplication::processRequest](http://www.yiiframework.com/doc/api/1.1/CWebApplication#processRequest-detail)以查看当请求被解析到控制器运行时会发生什么。）

这取决于您尝试实现的目标，但您可以覆盖[WebModule::beforeControllerAction](http://www.yiiframework.com/doc/api/1.1/CWebModule#beforeControllerAction-detail)以在模块控制器运行之前执行某些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T13:46:27.187

今天（在我提问后的第二天），我可以解决这个问题。

我将尝试解释：

正如迈克尔所写，我们无法在模块中知道我们在哪个控制器中。

但我得到的只是反向路线，所以，它很简单。

```
Yii::app()->getUrlManager()->parseUrl('/reg'); 
```

这将返回我的反向路线

```
user/user/registration 
```

[解析网址](http://www.yiiframework.com/doc/api/1.1/CBaseUrlRule#parseUrl-detail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T14:44:31.797

*Yii 1.1.15 的解决方案对*我有用。

```
class HttpRequest extends CHttpRequest {

    protected $_requestUri;
    protected $_pathInfo;

    public function setUri($uri){
        $this->_requestUri = $uri;
    }

    public function setPathInfo($route){
        $this->_pathInfo = $route;
    }

    public function getPathInfo(){
        /* copy from parent */ 
    }

    public function getRequestUri(){
        /* copy from parent */ 
    }
} 
```

用法：

```
 $uri_path = 'my/project-alias/wall';

    /** @var HttpRequest $request */
    $request = clone Yii::app()->getRequest();
    $request->setUri($uri_path);
    $request->setPathInfo(null);

    $route = Yii::app()->getUrlManager()->parseUrl($request);

    //$route equals 'project/profile/wall' etc here (like in route rules); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-13T14:16:45.187

我正在使用一个稍微不同的 CHttpRequest 子类：

```
class CustomHttpRequest extends \CHttpRequest
{
    /**
     * @var string
     */
    var $pathInfo;
    /**
     * @var string
     */
    private $method;

    public function __construct($pathInfo, $method)
    {
        $this->pathInfo = $pathInfo;
        $this->method = $method;
    }

    public function getPathInfo()
    {
        return $this->pathInfo; // Return our path info rather than the default
    }

    public function getRequestType()
    {
        return $this->method;
    }
} 
```

然后调用它（创建一个控制器，这是我想要的）：

```
$request = new CustomHttpRequest($uri, $method); // e.g. 'my/project-alias/wall' and 'GET'
$route = \Yii::app()->getUrlManager()->parseUrl($request);
list($jcontroller, $actionName) = \Yii::app()->createController($route); 
```

# bison - 词法分析器中的条件正则表达式

> ID：15362562
> 
> 赞同：0
> 
> 时间：2013-03-12T13:27:01.137
> 
> 标签：bison, yacc, lexer, flex-lexer

我想将条件检查放入 lexer.l 下面的行中。但是当我尝试在代码中使用管道分隔符时，我得到了未知的错误处理部分。

```
LIMITLINEEND ((\n{2})|([a-z]))(Error : unknown error processing section) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:04:53.363

对于从 [+-] 到 [-+] 的开始变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:41:02.103

我应该使用括号而不使用空格。像 ((a)|(b)) 。

# javascript - 单击 div 外部等

> ID：15362564
> 
> 赞同：-6
> 
> 时间：2013-03-12T13:27:06.317
> 
> 标签：javascript, jquery, html, dom

我希望登录区域（在下面的代码中）打开登录按钮单击。此外，当单击登录区域外的任何位置时，我需要隐藏登录区域，而不是登录按钮。

```
<button id="loginBtn">Login</button>

<div id="loginArea">
   <!-- here is login form -->
</div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:31:22.473

使用：

```
$('body').on('click', '#loginBtn', function(){
    $('#loginArea').show();
}); 
```

将显示登录名，而当您在其外部单击时，以下内容将删除它：

```
$(document).on('click', 'body:not(#loginArea)', function(){
    $('#loginArea').hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:30:25.287

```
$(function() {
    $('#loginBtn, #loginArea').on('click', function(e) {
        $('#loginArea').show();
        e.stopPropagation();
    });
    $('body').on('click', function() {
        $('#loginArea').hide();
    });
}); 
```

如果单击是在登录区域内或按钮上，则事件不会到达第二个处理程序以隐藏登录区域。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T13:31:45.827

怎么样？

```
$('#loginBtn').click(function (e) {
   $('#loginArea').toggle();
   e.stopPropagation();
});

$(document).on('click',function () {
    $('#loginArea').hide();
}); 
```

# ruby-on-rails-3 - 如何从所属关联中为医院创建区域

> ID：15362580
> 
> 赞同：0
> 
> 时间：2013-03-12T13:28:05.900
> 
> 标签：ruby-on-rails-3, belongs-to

## 模型：

**医院**

```
belongs_to :locality 
```

**地方性**

```
has_many :hospitals 
```

如何为医院创建一个新的Locality，请帮助

```
h = Hospital.new
l = h.locality.new
l.name = "america"
l.save 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:13:03.163

代替：

```
l = h.locality.new 
```

你应该做：

```
l = h.build_locality 
```

在 Rails Guides 上，您可以[阅读`build_locality`](http://guides.rubyonrails.org/association_basics.html#belongs_to-build_association).

# iphone - Facebook API - 屏幕出现安全警告：请将上面的 URL 视为您自己

> ID：15362582
> 
> 赞同：4
> 
> 时间：2013-03-12T13:28:29.220
> 
> 标签：iphone, facebook

使用 Graph API 通过 Facebook 登录时显示错误，然后显示带有安全警告的成功消息：

**请将上面的 URL 视为您的密码，不要与任何人共享。**

该应用程序在此屏幕上被击中，并且在调试时也未获取访问令牌。

有人可以帮我吗？为什么我收到此警告？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T09:27:13.660

只需将此 UIWebViewDelegate 方法粘贴到您的 FbGraph.m 文件中......

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    if([request.URL.relativeString hasPrefix:@"https://www.facebook.com/connect/login_success.html" ])
        self.webView.hidden=TRUE;
    return YES;
} 
```

# xml - xml 强制标头：版本和编码

> ID：15362585
> 
> 赞同：1
> 
> 时间：2013-03-12T13:28:37.703
> 
> 标签：xml, header, version

是否必须在 XML 文件中添加下一个 xml 标头才能形成良好的格式？

```
<?xml version="1.0" encoding="UTF-8"?> 
```

我已经明白解析选项等更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:30:43.007

根据[W3 规范](http://www.w3.org/TR/xml/#sec-prolog-dtd)，XML 声明是可选的，但建议使用。

# soundcloud - 音乐丰富片段 - soundcloud 或其他

> ID：15362592
> 
> 赞同：1
> 
> 时间：2013-03-12T13:28:58.750
> 
> 标签：soundcloud, code-snippets

有没有办法使用丰富的片段对 soundcloud 嵌入式播放器（闪存）进行编码，以便播放器显示在搜索结果中？如果做不到这一点，是否有一个像样的教程用于这个目的，只有 mp3 文件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:56:42.433

如果您有谷歌网站管理员工具，您可以访问此页面： [https ://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170)

这里有一个关于音乐丰富片段的教程： [https ://support.google.com/webmasters/bin/answer.py?hl=en&answer=1623047](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=1623047)

（该链接可以在我上面链接的第一页上找到，以及其他数据的丰富片段类型）

我希望这会有所帮助！:)

# jquery - jQuery悬停在项目上并保持活动状态

> ID：15362593
> 
> 赞同：1
> 
> 时间：2013-03-12T13:29:03.207
> 
> 标签：jquery

我不太确定如何最好地表达这个词，但基本上我想将鼠标悬停在一个列表项上，该列表项会淡入它上方的另一个元素。当您将鼠标悬停在列表项上时，元素应该会淡出，但是如果您将鼠标悬停在新可见的元素上，我希望它保持可见。

我整理了一个简单的演示，[http://jsfiddle.net/CLDyc/](http://jsfiddle.net/CLDyc/) - 基本上，当您将鼠标悬停在第 1 项上，然后将鼠标移动到“第 1 项额外信息”时，我希望它也保持可见。

```
var location;

$("#dots li").hover(

    function () {
        location = $(this).attr("class");
        $("#extra-info ."+location).fadeIn("fast");
      },
    function () {
        $("#extra-info ."+location).stop(true, false).fadeOut("fast");
      }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:39:19.613

由于元素之间存在间隙，`mouseleave`因此触发事件并且您的元素将被隐藏，一种选择是使用`setTimeout`函数。

```
var location, timeout = 0;

$("#dots li").hover(function () {
    location = $(this).attr("class");
    $("#extra-info ." + location).fadeIn("fast");
}, function () {
    timeout = setTimeout(function () {
        $("#extra-info ." + location).stop(true, false).fadeOut("fast");
    }, 500);
});

$('#extra-info li').mouseenter(function(){
   clearTimeout(timeout);   
}).mouseleave(function(){
   $(this).fadeOut('fast');
}); 
```

[http://jsfiddle.net/SB4pH/](http://jsfiddle.net/SB4pH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:54:47.963

这是实现它的一种方法，类似于 Syon 的建议。

[http://jsfiddle.net/CLDyc/2/](http://jsfiddle.net/CLDyc/2/)

**HTML**

```
<ul id="dots">
    <li class="item1">Item 1<div style="display:none;">Item 1 Extra Info</div></li>
</ul> 
```

**CSS**

```
.item1 div {
    margin: 0;
    padding: 0;
    position:absolute;
    top:8px;
    left:70px;
    width: 100px;
    height: 50px;
    border: 1px solid red;    
}

ul#dots {
    margin: 0;
    padding: 0;
    list-style: none;
}

ul#dots li {
    width: 60px;
    height: 30px;
    border: 1px solid green;
} 
```

**JS**

```
$("#dots li").mouseover(function() {
    $(this).find('div').stop(true, false).fadeIn("fast");
}).mouseout(function(){
    $(this).find('div').stop(true, false).fadeOut("fast");
});

$(".item1 div").mouseover(function() {
    $(this).stop(true, false).show();
}).mouseout(function(){
    $(this).stop(true, false).fadeOut("fast");
}); 
```

# xml - XSLT 在复制的部分之间插入元素

> ID：15362594
> 
> 赞同：0
> 
> 时间：2013-03-12T13:29:03.787
> 
> 标签：xml, xslt-1.0

我对 xslt 很陌生。我正在使用 xslt 1.0。我有一个 xml 文档，它的结构不确定，并且每个部分都不同：

```
<section label="">
 <subsection label="">
  <para label="">
   <subpara label=""></subpara>
   <subpara label=""></subpara>
  </para>
 </subsection>
</section>
<section label="">
 <subsection label="">

 </subsection>
</section>
<section label="">
 <subsection label="">
   <para label="">

   </para>
 </subsection>
</section> 
```

然后我在循环中遍历每个部分，用每个节点标签的值构建一个字符串，然后使用递归方法复制每个部分节点、带有属性的子节点和文本。

```
 <xsl:template match="/">
 <xsl:for-each select="//section">
   <xsl:variable name="section">
     <xsl:value-of select="@label"/>
   </xsl:variable>
      <xsl:if test=".//subSection">
        <xsl:for-each select=".//subSection">
          <xsl:variable name="subsection">
            <xsl:if test="string-length(./@label) > '0'">
              (<xsl:value-of select="@label"/>)
            </xsl:if>
          </xsl:variable>

          <xsl:if test=".//para">
            <xsl:for-each select=".//para">
              <xsl:variable name="para">
                <xsl:if test="string-length(./@label) > '0'">
                  (<xsl:value-of select="@label"/>)
                </xsl:if>
              </xsl:variable>

              <xsl:if test=".//subPara">
                <xsl:for-each select=".//subPara">
                  <xsl:variable name="subpara">
                    <xsl:if test="string-length(./@label) > '0'">
                      (<xsl:value-of select="@label"/>)
                    </xsl:if>
                  </xsl:variable>
                  <xsl:if test=".//item">
                    <xsl:for-each select=".//item">
                      <xsl:variable name="item">
                        <xsl:if test="string-length(./@label) > '0'">
                          (<xsl:value-of select="@label"/>)
                        </xsl:if>
                      </xsl:variable>
                      <xmlstringtobuild name="{concat('XML_',$act,' s ',$section,$subsection,$para,$subpara,$item)}"/>
                    </xsl:for-each>
                  </xsl:if>
                  <xmlstringtobuild name="{concat('XML_',$act,' s ',$section,$subsection,$para,$subpara)}"/>
                </xsl:for-each>
              </xsl:if>
              <xmlstringtobuild name="{concat('XML_',$act,' s       ',$section,$subsection,$para)}"/>
            </xsl:for-each>
          </xsl:if>
          <xsl:if test="string-length(@label) > '0'">
            <xmlstringtobuild name="{concat('XML_',$act,' s ',$section,$subsection)}"/>
          </xsl:if>
        </xsl:for-each>
      </xsl:if>
      <xmlstringtobuild name="{concat('XML_',$act,' s ',$section)}"/>
      <xsl:call-template name="LNRecurseToRoot">
        <xsl:with-param name="parent" select="parent::*"/>
        <xsl:with-param name="current">
          <xsl:apply-templates select="." mode="lmt"/>
        </xsl:with-param>
      </xsl:call-template>
 </xsl:for-each>
</xsl:template>

<xsl:template name="LNRecurseToRoot">
<xsl:param name="parent"/>
<xsl:param name="current"/>
<xsl:choose>
  <xsl:when test="not($parent)">
    <xsl:copy-of select="$current"/>
   </xsl:when>
  <xsl:otherwise>
    <xsl:call-template name="LNRecurseToRoot">
      <xsl:with-param name="parent" select="$parent/parent::*"/>
      <xsl:with-param name="current">
        <xsl:for-each select="$parent">
            <xsl:copy>
            <!-- make sure all attributes go across too -->
            <xsl:for-each select="./@*">
              <xsl:copy/>
            </xsl:for-each>
            <!-- add in children along the axis -->
            <xsl:copy-of select="$current"/>
          </xsl:copy>
        </xsl:for-each>
      </xsl:with-param>
    </xsl:call-template>
  </xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

我的问题是我想在递归复制输出中的正确位置插入 xmlstringtobuild 元素。（构建该字符串的结束节点，以便可以将特定字符串用作指向特定节、子节、段落等的指针）。您可以将其视为内部链接或锚点。

我可以通过电子邮件向某人发送我当前获得的输出的虚拟数据。您的帮助将不胜感激。谢谢。

# git - 使用 Fabric 和 Git 部署应用程序

> ID：15362595
> 
> 赞同：1
> 
> 时间：2013-03-12T13:29:04.433
> 
> 标签：git, ssh, fabric

您好，我创建了一个 git 存储库。
在我按照 SSH 密钥生成指南进行操作后，我`git add`的`git commit`工作正常。

通过以下*结构*脚本反对

```
run("git clone git@github.com:myusername/projet.git %s" % repertoire) 
```

这给出了：

```
returns the error:   
Cloning into /repertoire....

[@ip_server] out: Permission denied (publickey) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:51:44.960

环境变量可能`HOME`未在结构会话中设置（或不正确）。

确保它的价值，如果你有你的密钥存储在`$HOME/.ssh`.

# deployment - 如何将厨师与 capistrano 联系起来进行部署

> ID：15362599
> 
> 赞同：7
> 
> 时间：2013-03-12T13:29:16.050
> 
> 标签：deployment, capistrano, chef-infra, recipe

我已经配置了 chef 环境，并且能够使用 capistrano 部署我的应用程序。现在我想让我的**厨师**处理**capistrano**来部署我的应用程序。怎么做到呢 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T05:39:13.583

我做相反的事情，即。通过 Capistrano 部署我的厨师食谱。我推荐它。

```
#config/deploy.rb
...
before 'bundle:install', "provision:default", "deploy:config_db_yml_symlink"
... 
```

这将在安装包之前执行服务器的主厨配置，这很重要，因为许多 gem 依赖于安装到操作系统的包。

```
#config/deploy/provision.rb
Capistrano::Configuration.instance(:must_exist).load do
  namespace :provision do
    task :default do
      provision.setup
      provision.web
      provision.db
      provision.db_slave
    end

    task :setup, once: true do
      provision.get_environment_variables
      provision.update_cookbooks
    end

    task :db, :roles => :db do
      next if find_servers_for_task(current_task).empty?
      if rails_env == 'staging'
        run %{cd #{release_path}/provision; sudo chef-solo -c solo.rb -j db.json -l debug}
      else
        run %{cd #{release_path}/provision; sudo chef-solo -c solo.rb -j db_master.json -l debug}
      end
    end

    task :db_slave, :roles => :db_slave do
      next if find_servers_for_task(current_task).empty?
      run %{cd #{release_path}/provision; sudo chef-solo -c solo.rb -j db_slave.json -l debug}
    end

    task :web, :roles => :web do
      next if find_servers_for_task(current_task).empty?
      run %{cd #{release_path}/provision; sudo chef-solo -c solo.rb -j web.json -l debug}
    end

    task :get_environment_variables do
      run "if [ -d ~/.config ]; then " +
        "cd ~/.config && git fetch && git reset origin/master --hard; " +
        "else git clone git@github.com:mycompany/config.git .config; fi"
      run "sudo cp ~/.config/secureshare/#{rails_env}/environment /etc/environment"
    end

    task :update_cookbooks do
      run "if [ -d /u/chef ]; then " +
        "cd /u/chef && git fetch && git reset origin/master --hard; " +
        "else git clone git@github.com:mycompany/chef.git /u/chef; fi"
    end
  end

  namespace :deploy do
    task :setup, :except => { :no_release => true } do
      dirs = [deploy_to, releases_path, shared_path]
      dirs += shared_children.map { |d| File.join(shared_path, d.split('/').last) }
      dirs += [File.join(shared_path, 'sockets')]
      run "#{try_sudo} mkdir -p #{dirs.join(' ')}"
      run "#{try_sudo} chmod g+w #{dirs.join(' ')}" if fetch(:group_writable, true)
      run "#{try_sudo} chown -R ubuntu:ubuntu #{dirs.join(' ')}" if fetch(:group_writable, true)
    end

    task :config_db_yml_symlink do
      run "ln -s #{shared_path}/database.yml #{release_path}/config/database.yml"
    end
  end
end 
```

我的项目中有一个名为 provision 的文件夹，用于处理厨师角色的定义，尽管食谱位于不同的存储库中。

```
#provision/solo.rb
root = File.absolute_path(File.dirname(__FILE__))
cookbook_path '/u/chef'
role_path root + "/roles"
log_level :debug
log_location STDOUT 
```

节点在项目中定义

```
#provision/db_slave.json
{
  "run_list": ["role[db_slave]"]
} 
```

和角色

```
#provision/roles/db_slave.rb
name "db_slave"
description 'A postgresql slave.'
run_list(["recipe[base]", "recipe[postgresql::slave]", "recipe[rails]","recipe[papertrail]", "recipe[fail2ban]"])
override_attributes(
  'kernel' => {
  'shmmax' => ENV['KERNEL_SHMMAX'],
  'shmall' => ENV['KERNEL_SHMALL'],
  'msgmax' => ENV['KERNEL_MSGMAX'],
  'msgmnb' => ENV['KERNEL_MSGMNB']  
},
'postgresql' => {
  'user'     => ENV['PG_USER'],
  'password' => ENV['PG_PASSWORD'],
  'database' => ENV['PG_DATABASE'],
  'master_host' => ENV['PG_HOST']
},
'app_dir' => ENV['APP_DIR'],
'papertrail' => {
  'port' => ENV['PAPERTRAIL_PORT'],
  'log_files' => [
    "#{ENV['APP_DIR']}/shared/log/*.log",
    "/var/log/*.log",
    "/var/log/syslog",
    "/var/log/upstart/*.log",
    "/var/log/postgresql/*.log"
  ]
},
'new_relic' => {
  'key' => ENV['NEW_RELIC_LICENSE_KEY']
}) 
```

所有这些都无需在应用程序中保留任何敏感信息。我还使用 capistrano-ec2group 将服务器映射到使用 EC2 安全组的角色。

```
group :myapp_web, :web
group :myapp_web, :app
group :myapp_db, :db, :primary=>true
group :myapp_db_slave, :db_slave 
```

所以基本上你将你的厨师食谱保存在一个仓库中，你的环境变量在另一个仓库中，你的应用程序在另一个仓库中——并使用 Capistrano 来配置服务器和部署你的应用程序。

您也可以将您的厨师食谱保存在您的应用程序存储库中，但这会抑制项目之间的重用。关键是将所有变化的内容放入环境变量中，并将它们分开存储到应用程序和配方中。

正确配置后，要添加新服务器，您只需在 EC2 中启动一个，应用所需的安全组，然后

```
cap deploy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:17:36.547

你不能。或者至少它不会很简单。

Chef 是一个拉取系统——客户端从 Chef 服务器拉取信息，并对其采取行动。

Capistrano 是一个推送系统——你告诉它登录到服务器并在那里执行任务。

我认为您集成它们的唯一方法是在每台机器上本地运行 Capistrano，但我看不到这样做的原因。

Chef 的部署资源可能可以完成您需要的一切，而无需集成 Capistrano。如果您仍想独立于 Chef-client 运行将部署推送到服务器，则最好不要通过 Chef 部署并保留当前系统。

如果您想要持续交付，请将 Capistrano 脚本连接到 CI 服务器并在管道结束时运行它们。

@StephenKing 提到的播客是有关此事的重要信息来源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T14:23:46.180

您可以观看关于[应用程序部署](http://foodfightshow.org/2013/01/application-deployment.html)的 Foodfightshow 剧集。

例如，您可以使用 Chef 将配置文件（例如数据库凭据）放入服务器，同时使用 Capistrano 推送源代码。

# c++ - 我的递归函数没有返回正确的值

> ID：15362611
> 
> 赞同：0
> 
> 时间：2013-03-12T13:29:45.973
> 
> 标签：c++, function, recursion, sum, double

我写了一个递归函数来计算一个双精度数组的总和。由于某些原因，我的递归函数返回的值不正确。实际上，我的递归总和与我的迭代总和不匹配。我知道我在某个地方犯了一个小错误，但我看不出在哪里。您的帮助将不胜感激。我只粘贴了递归函数。我在 Visual Studio 上使用 C++。谢谢！

```
double recursive_sum(double array_nbr[], int size_ar)
{ double rec_sum=0.0;
if( size_ar== 0) 
    return -1;
else if( size_ar> 0)
       rec_sum=array_nbr[size_ar-1]+recursive_sum(array_nbr,size_ar-1);

return  rec_sum;
}

 //####  Output######

 The random(s) number generated in the array =
 0.697653  |  0.733848  |  0.221564  |

 Recursive sum: 0.653066

 Iterative sum: 1.65307

 Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:31:54.660

好吧，因为没有元素的总和为零，而不是负一。

```
if (size_ar == 0.0)
    return 0.0; 
```

可以这样想：`sum(1,2,3)`相同和`sum(1,2) + sum(3)`相同`sum(1,2,3)+sum()`——在所有三种情况下，你将 1、2 和 3 加在一起，只是方式略有不同。这也是为什么没有元素的乘积是一的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:31:50.120

尝试更改“if(size_ar== 0) return -1;” 返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:35:29.757

虽然这并不能解释输出中的巨大差异，但要记住的另一件事是，一旦您解决了返回`-1`vs.的问题，操作的顺序`0`...... IEEE 浮点运算不一定是可交换的，所以请确保当您执行递归与迭代方法时，您以完全相同的顺序将数字相加，否则您的输出可能仍会相差一些 epsilon 值。

例如，当前在您的递归方法中，您正在将数组最后一个成员的值与数组的第一个成员反向相加。由于浮点数学的非交换性质，这可能会给您一个稍微不同的值（小 epsilon），而不是您将数组中的值从第一个到最后一个相加。这可能不会`cout`在浮点值被截断到特定固定小数位的简单情况下显示，但是如果您尝试在`==`不包含一些 epsilon 值的情况下对两个不同的求和使用该操作，结果可能仍会测试为假。

# c++ - C++：编译器看不到重载的运算符

> ID：15362615
> 
> 赞同：1
> 
> 时间：2013-03-12T13:29:56.700
> 
> 标签：c++, compiler-errors, operator-overloading, overloading

我一直在尝试实现链表迭代器类。当我在这里使用重载的“！=”运算符时，编译器会抱怨：

```
for (itr = (test0.begin()); itr != (test0.end()); ++itr)
{
    cout << *itr;
} 
```

这是错误：

```
error: no match for ‘operator!=’ in ‘itr != SinglyLinkedList<Object>::end() [with Object = int]()’ 
```

我不明白为什么它找不到匹配项，因为 test0.end() 和 itr 都是迭代器。

这是重载运算符的代码：

```
bool operator!= (iterator &rhs)
{
    return (this->current != rhs.current);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:33:05.297

我怀疑这是因为 const 正确性：

```
bool operator!= (iterator const &rhs) const
{
    return (this->current != rhs.current);
} 
```

# spring - Jasypt 与 Hibernate 4 和 spring 3.1 的集成

> ID：15362619
> 
> 赞同：3
> 
> 时间：2013-03-12T13:30:11.610
> 
> 标签：spring, hibernate, jasypt

我在我的应用程序中使用**Spring 3.1** + **Hibernate 4.1**。我希望使用**Jasypt以*****加密***形式存储一些字段（如密码） 。但是在集成中我面临以下异常：

 **```
java.lang.AbstractMethodError: org.jasypt.hibernate.type.EncryptedStringType.nullSafeSet(Ljava/sql/PreparedStatement;Ljava/lang/Object;ILorg/hibernate/engine/spi/SessionImplementor;)V 
```

为了将 spring+hibernate 与 Jasypt 集成，我遵循以下步骤：

1.  在 lib 文件夹中添加**了 jasypt-1.8.jar 。**

2.  **在dispatcher-servlet**（配置文件）中添加了以下内容

    <bean id="hibernateStringEncryptor" class="org.jasypt.hibernate.encryptor.HibernatePBEStringEncryptor" lazy-init="false"> hibernateStringEncryptor jasypt</bean>

3.  **在Entity**上放置以下代码：

    @TypeDef( name="encryptedString", typeClass=EncryptedStringType.class, parameters= { @Parameter(name="encryptorRegisteredName", value="hibernateStringEncryptor") } )

但它没有得到预期的结果。请帮我解决这个异常。

问候，

阿伦·库马尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:41:00.727

根据[EncryptedStringType](http://www.jasypt.org/api/jasypt/1.8/org/jasypt/hibernate/type/EncryptedStringType.html)的javadocs ：

> Hibernate 3 UserType 实现，它允许在实体持久化期间对字符串值进行透明加密。

并且根据[Hibernate 4 Migration Guide](https://community.jboss.org/wiki/HibernateCoreMigrationGuide40)：

> 对 org.hibernate.usertype.UserType 方法的引用应按指示更改：
> 
> nullSafeGet(ResultSet rs, String[] names, Object owner) 应改为
> nullSafeGet(ResultSet rs, String[] names, SessionImplementor session, Object owner) nullSafeSet(PreparedStatement st, Object value, int index) 应改为 nullSafeSet( PreparedStatement st, Object value, int index, SessionImplementor session)

所以 jasypt 1.8 与 Hibernate 4.x 不兼容。

您必须升级到 jasypt 1.9，据此[提供](http://www.jasypt.org/whatsnew19.html#Hibernate_4_support)Hibernate 4 支持。

编辑：

Jasypt[文档](http://www.jasypt.org/hibernate.html)提供了很好的概述。

这第一句话：

> Jasypt 为 Hibernate 集成提供了 jasypt-hibernate3 和 jasypt-hibernate4 工件。从 jasypt 1.9.0 开始，这些工件必须单独添加到您的类路径中。

因此，您需要将 jasypt-hibernate4.jar 添加到您的类路径以解决编译错误。**

# c++ - 安装节俭 idl

> ID：15362623
> 
> 赞同：0
> 
> 时间：2013-03-12T13:30:21.657
> 
> 标签：c++, visual-studio-2008, windows-7, thrift

基本上我不知道如何创建 lib 文件。thrift(0.9.0) 附带的 VS 解决方案说它们是用较新的版本创建的，因此不能用 VS 2008 打开。我也尝试安装或运行 ./bootstrap.sh 但我一直收到错误说该文件不是可执行文件。我已经搞砸了几个小时，无法弄清楚，所以如果有人知道如何安装节俭，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:25:31.760

我没有在 Windows 上使用 Thrift，但我希望它没关系。首先，您必须在本地安装 thrift（0.8.0、0.9.0 等）。在 linux 上你运行`./configure`, `make`, `make install`. 一旦你在本地安装了 thrift，你就有了 thrift 二进制文件，你应该确保它在 shell 路径上（在 linux 上它是`/usr/local/bin/thrift`）。然后使用服务创建一个 thrift 定义文件，针对该文件运行 thrift 二进制文件，thrift 将为您生成代码（我假设您将生成 C++ 代码）。

现在 - 当然，对于每种编程语言，thrift 都会生成不同的文件。在脚本语言中，您必须手动包含它们。在 Java 中，您将拥有一个包，您可以在其余代码中使用它。在 C++ 中，您将获得 .h 和 .cpp 文件，您应该将它们编译到库中。**我强烈建议您使用 cmake**，它是自动执行此类操作的绝佳工具。

无论如何，我不希望 MS Visual Studio 会愉快地与 Apache Software Foundation 项目等开源软件合作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T12:31:53.773

您需要使用最低限度的 VS2012 和 boost_155 来创建节俭库文件。

# python - 你如何在 python 中执行 pyqt .ui 代码？

> ID：15362624
> 
> 赞同：4
> 
> 时间：2013-03-12T13:30:23.093
> 
> 标签：python, qt, pyqt

我正在为我正在制作的脚本制作一个 GUI，经过研究我发现*pyqt*会很有帮助。*我现在已经在pyqt*中制作了一个没有工作按钮的 GUI，但想查看代码。

我打开 cmd.exe 并输入：

```
pyuic4 project.ui -o python.py 
```

它为我创建了一个*python.py*脚本，它向我展示了我需要的所有脚本，但是当我通过 IDLE 或命令提示符运行它时，它显示它正在运行，但没有打开任何 GUI。难道我做错了什么？

另外，*pyqt*是否适合用于为 windows 创建简单的 GUI，还是用于移动开发？

这是我要编译和运行的代码片段

```
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    def _fromUtf8(s):
        return s

try:
    _encoding = QtGui.QApplication.UnicodeUTF8
    def _translate(context, text, disambig):
        return QtGui.QApplication.translate(context, text, disambig, _encoding)
except AttributeError:
    def _translate(context, text, disambig):
        return QtGui.QApplication.translate(context, text, disambig)

class Ui_FileHash(object):
    def setupUi(self, FileHash): 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:47:48.450

查看[本教程](http://pyqt.sourceforge.net/Docs/PyQt4/designer.html)，了解如何使用 pyuic4 命令生成的代码；

基本上，您需要这样做：

```
import sys
from PyQt4.QtGui import QApplication, QDialog
from ui_project import Ui_Name  # here you need to correct the names

app = QApplication(sys.argv)
window = QDialog()
ui = Ui_Name()
ui.setupUi(window)

window.show()
sys.exit(app.exec_()) 
```

Pyqt 完全适合在 Windows 上创建 GUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T23:48:05.960

作为一个值得注意的补充，pyuic4 接受“-p”或“--preview”参数，它将通过开箱即用地运行 UI 文件来预览 UI 文件：

```
pyuic4 -p project.ui 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T08:17:17.517

如果您检查 pyuic4 选项，则 -x 选项是您缺少的选项。它将执行 UI 所需的代码添加到您的 python 代码中。你只需要加上-x：

pyuic4 project.ui -x -o python.py

# jquery - 如何将 jquery 数组值发送到 codeigniter 上的控制器

> ID：15362632
> 
> 赞同：4
> 
> 时间：2013-03-12T13:30:38.957
> 
> 标签：jquery, codeigniter, session

我是codeigniter的新手，我从数据库中创建了一些记录列表，我的问题是如果我想使用复选框删除更多记录，我从jquery获取数组值作为字符串格式，但我不知道如何发送这个对控制器的价值，请告诉任何人

我的 jquery 代码多选记录

```
$('.del_mybuyer').click(function(){
        var selected = new Array();
        var inc = 0;
        $('input.selbuyer:checked').each(function(){
                selected[inc] = $(this).attr('id'); 
            inc = inc + 1;
        })      
        tdelbuy=selected.toString();                

    }) 
```

在这里 tdelbuy 工作正常，但我不知道如何在会话中设置它或如何将它发送到我的控制器，请告诉任何人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:32:51.477

使用`$.ajax`, `$.post`, 或`$.get`

试试这个

```
 $.post('path/to /your/controller',{data:tdelbuy},function(html){
        alert(html);
  }); 
```

并且您的控制器通过以下方式获取发布的值

```
 var postedValue=$this->input->post('data'); 
 //do your stuff.
 echo "done"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:38:05.980

您可以使用 bipen 建议的任何 AJAX 方法。或者，如果您不想使用 AJAX，您可以将隐藏输入的值设置为您的 javascript 变量的值，然后将其与表单的其余部分一起发回。

```
<form id="your_form" method="POST" action="form.php">
   <!-- your existing form inputs and layouts -->
   <input id="your_hidden_input" name="data" value="" />
</form> 
```

然后在你的javascript中

```
$('.del_mybuyer').click(function(){
    var selected = new Array();
    var inc = 0;
    $('input.selbuyer:checked').each(function(){
            selected[inc] = $(this).attr('id'); 
        inc = inc + 1;
    })      
    tdelbuy=selected.toString();                
    $("#your_hidden_input").val(tdelbuy);
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:46:32.627

试试这个：

```
 item = new Array();
    $("input.selbuyer:checked").each(function(index,data ) {
            item[index] = $(this).attr('id'); 
    });

    $.ajax({
        type: "POST",
        url : "your url",
        data: item,
        success:function(data){
          alert(completed);
        }       
    }); 
```

# api - 如何使用单页应用程序和 API 后端进行身份验证？

> ID：15362639
> 
> 赞同：2
> 
> 时间：2013-03-12T13:30:53.840
> 
> 标签：api, rest, authentication, oauth, oauth-2.0

我拥有两者，一个位于 api.example.com 的 API 后端和一个位于 example.com 的前端单页应用程序。API 基本上是数据库后端的包装器。

现在，我想让单页应用程序（= 客户端应用程序）的用户使用 API 进行身份验证。为此，据我了解，客户端（=单页应用程序）将 client_id 和 user_id 一起发送到 API，然后 API 会发出 AccessToken。

但是，在我的单页应用程序中，我不确定在哪里/如何存储访问令牌。我正在寻找一个简单的参考，或者一个让登录用户访问 API 应用程序的好概念。

一位朋友向我推荐了这个流程：

1.  客户端显示登录（电子邮件或用户名）和密码的输入，
2.  客户端应用程序向您的 API 发出请求以获取未经授权的令牌（例如 POST /api/v1/auth/new），
3.  服务器为应用程序创建一个令牌并将其发送回，
4.  客户端应用程序将令牌连同登录名、密码和请求签名一起发送到 API（例如 POST /api/v1/mobile_authenticate），
5.  API 验证和验证凭据，
6.  如果一切正常，应用程序将使用令牌代表用户进行进一步操作。

有什么想法吗？如何简化或改进？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:05:37.223

我在服务器 API 中使用 api 密钥进行权限检查。api 密钥的工作流程如下。

1.  客户端应用程序显示登录（电子邮件或用户名）和密码的输入。
2.  客户端应用程序向 API 发出请求以获取 api 密钥（例如 POST /api/v1/users/validate）。
3.  客户端应用程序使用 api 密钥访问 API。（如果是http请求，可以在http头或者查询字符串中包含api key。）

希望能帮助到你。

# css - 多少媒体查询？

> ID：15362641
> 
> 赞同：5
> 
> 时间：2013-03-12T13:31:05.137
> 
> 标签：css, media

您建议使用多少媒体查询？

我做了4个设计：

960 用于横向模式（ipad 和更多类似桌面） 768 用于纵向模式 (ipad) 340 用于纵向模式 (iphone) 及以上 960

现在我的问题：

1）首先我什至不知道为什么我使用960而不是1024。我前段时间读过一些东西，因为滚动条你必须将宽度减小到960。关于平板电脑和智能手机呢？

2) 我选择这些宽度是因为我认为，如果有人使用横向模式，它会切换到“ipad-media-query”并返回到“iphone-media-query”。但这只是我的理论。我是媒体查询的新手。这就是我问的原因。感谢任何帮助，甚至是您建议的 CSS 代码示例，以便为网站提供最多的媒体查询！？

3）我只想覆盖大多数平板电脑、智能手机、台式机等，以受最佳媒体查询大小的影响。我非常感谢您的“最佳解决方案”！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:38:46.620

一段绳子有多长？

有多少媒体查询适合使用以及如何实现它们，这完全取决于您和您的设计。

作为指南，我建议查看 Twitter Bootstrap 如何实现他们的媒体查询。他们已经对其进行了大量研究以得出他们的数字，因此这将是一个很好的起点。

[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T13:55:47.463

尝试识别断点是个坏主意。在响应式网站中设置断点的主要原因是为了保持最佳体验。您不想为每个新设备或分辨率引入新的媒体查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-27T01:12:17.100

**根据需要使用尽可能多的媒体查询。**你可能会避免使用太多，因为你不想要一个巨大的 CSS 文件。但这不会显着减慢网站的速度。如果您组织好您的媒体查询并为每个查询使用最小和最大宽度，那么跟踪您的代码将非常容易。

**如果需要，您可以对每个设备的每个方向使用一个媒体查询。**当然，理想情况下，您希望使用零媒体查询，并制作一个完美变形的完美网站。但这不会发生，除非您的网站非常简单。

我使用 9 个媒体查询。

如果您可以扩大分辨率参数并摆脱一些媒体查询，那就更好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-19T16:26:14.923

使用媒体查询：240 x 320（移动）、320 x 480（移动）、480 x 640（小型平板电脑）、768 x 1024（平板电脑 - 纵向）、1024 x 768（平板电脑 - 横向）

考虑低于 320 像素的宽度是一个非常好的做法，但对于那些非常关注每个访问者的人来说。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T13:34:26.313

我会使用不需要媒体查询的动态布局。

只需使用媒体查询来隐藏/移动元素。

你可以使用任意数量的它们。只需在您的页面中放置一些 javascript 以显示您当前的浏览器宽度，然后调整浏览器大小以测试何时隐藏元素。为我工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T13:50:56.750

最新的设计世界需要响应式设计。

请参阅此示例并使用您想要的所有媒体查询：http: [//nmsdvid.com/snippets/](http://nmsdvid.com/snippets/)

# python - python generate_signed_query_string blob 返回错误的查询字符串

> ID：15362643
> 
> 赞同：0
> 
> 时间：2013-03-12T13:31:11.980
> 
> 标签：python, azure, azure-blob-storage

我正在尝试使用 Python SDK 在私有 Azure blob 存储容器中共享一个 blob，下面是代码：

```
try:
        accss_plcy = AccessPolicy()
        accss_plcy.start = '2013-03-12'
        accss_plcy.expiry = '2013-03-13'
        accss_plcy.permission = 'r'
        signed_identifier = 'YWJjZGVmZw=='
        sap = SharedAccessPolicy(accss_plcy, signed_identifier)
        qry_str = sas.generate_signed_query_string('picture/xxx.jpg','blob', sap)
    except Exception as ex:
        abort(400, 'Download blob fail %s'%ex)
    return sas._convert_query_string(qry_str) 
```

以下是查询字符串返回：

```
st=2013-03-12&se=2013-03-13&sp=r&resource=blob&sig=FI88prUINf58Seg5Nwo6Uj5RP9FxXGZBBSKi7pybmeQ=& 
```

您可能会注意到这一点`resource=blob`，但它应该会返回`sr=b`。

我应该如何解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:00:51.997

它看起来像 SDK 中的一个错误。由于 Azure SDK 的代码是开源的，您可以下载代码并更改此文件：[https ://github.com/WindowsAzure/azure-sdk-for-python/blob/master/src/azure/storage /sharedaccesssignature.py](https://github.com/WindowsAzure/azure-sdk-for-python/blob/master/src/azure/storage/sharedaccesssignature.py)。查看该文件中的源代码，您需要更改以下代码行（第 129 行）：

```
convert_str += SIGNED_RESOURCE_TYPE + '=' + query_string[SIGNED_RESOURCE] + '&' 
```

至

```
convert_str += SIGNED_RESOURCE + '=' + query_string[SIGNED_RESOURCE] + '&' 
```

我还注意到您在`blob`上面的代码中作为资源类型传递：

```
qry_str = sas.generate_signed_query_string('picture/xxx.jpg','blob', sap) 
```

您需要传递 'b' 而不是 'blob'

```
qry_str = sas.generate_signed_query_string('picture/xxx.jpg','b', sap) 
```

我认为这应该可以解决问题。另外请确保您在 Github 上提交错误，以便负责维护代码的团队可以修复它。

# java - Spring url映射不起作用

> ID：15362645
> 
> 赞同：0
> 
> 时间：2013-03-12T13:31:15.653
> 
> 标签：java, spring, url, servlets

我在 Spring MVC 中的 url 映射有问题。我的目标是用这种形式映射一个 url：“applicationName/app/”。

这是我的 web.xml：

```
<?xml version="1.0" ?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/app/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

我的控制器：

```
@Controller
public class Controller {

    @RequestMapping(value = "app/1")
    @ResponseBody
    public String test1 (){
        return "test1";
    }
} 
```

我尝试了“/app/1”和“/app/1/”，但我的 url 映射不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:41:01.263

With your dispatcher configured the way it is your mapping would be

```
{contextPath}/app/app/1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:53:54.617

在您正在使用的 web.xml 中`/app/*`，再次在您的 Controller 中，您已经给出了`app/1`..so 2`app`将出现在您的 url 映射中。所以尝试点击`appName/app/app/1`它应该可以工作。否则`app`从 web.xml中删除

# sql - 基于另一列计算时间差和求和

> ID：15362651
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:31:29.560
> 
> 标签：sql, reporting-services

我有这样一个表，其中包含如下数据

```
ReferenceNo                 CommentDate             StepName            Originator  StartTime
1   CHQRCL/0083/2013/FEB    2013-02-25 15:20:07.000 Initiate Process    P8Admin 2013-02-25 15:20:07.000
1   CHQRCL/0083/2013/FEB    2013-02-25 15:20:44.000 Finance Controller  P8Admin 2013-02-25 15:20:07.000
1   CHQRCL/0083/2013/FEB    2013-02-25 15:21:52.000 Originator  P8Admin 2013-02-25 15:20:07.000
1   CHQRCL/0083/2013/FEB    2013-02-25 15:23:26.000 Finance Controller  P8Admin 2013-02-25 15:20:07.000
1   CHQRCL/0083/2013/FEB    2013-02-25 15:23:55.000 Finance Officer P8Admin 2013-02-25 15:20:07.000
2   CHQRCL/0089/2013/FEB    2013-02-25 15:43:48.000 Initiate Process    P8Admin 2013-02-25 15:43:48.000
2   CHQRCL/0089/2013/FEB    2013-02-25 15:43:59.000 Finance Controller  P8Admin 2013-02-25 15:43:48.000
2   CHQRCL/0089/2013/FEB    2013-02-25 15:44:11.000 Asset GM    P8Admin 2013-02-25 15:43:48.000
3   CHQRCL/0093/2013/MAR    2013-03-06 16:19:05.000 Initiate Process    P8Admin 2013-03-06 16:19:05.000
3   CHQRCL/0093/2013/MAR    2013-03-06 16:21:57.000 Finance Controller  P8Admin 2013-03-06 16:19:05.000
3   CHQRCL/0093/2013/MAR    2013-03-06 16:23:55.000 Asset GM    P8Admin 2013-03-06 16:19:05.000
3   CHQRCL/0093/2013/MAR    2013-03-06 16:24:09.000 CFO P8Admin 2013-03-06 16:19:05.000
3   CHQRCL/0093/2013/MAR    2013-03-06 16:24:19.000 CEO P8Admin 2013-03-06 16:19:05.000
3   CHQRCL/0093/2013/MAR    2013-03-06 16:24:40.000 Finance Officer P8Admin 2013-03-06 16:19:05.000
4   CHQRCL/0094/2013/MAR    2013-03-06 16:58:47.000 Initiate Process    P8Admin 2013-03-06 16:58:47.000
4   CHQRCL/0094/2013/MAR    2013-03-06 17:00:45.000 Finance Controller  P8Admin 2013-03-06 16:58:47.000
4   CHQRCL/0094/2013/MAR    2013-03-06 17:00:54.000 Asset GM    P8Admin 2013-03-06 16:58:47.000
4   CHQRCL/0094/2013/MAR    2013-03-06 17:04:48.000 CFO P8Admin 2013-03-06 16:58:47.000
4   CHQRCL/0094/2013/MAR    2013-03-06 17:05:06.000 CEO P8Admin 2013-03-06 16:58:47.000
4   CHQRCL/0094/2013/MAR    2013-03-06 17:05:35.000 Finance Officer P8Admin 2013-03-06 16:58:47.000
5   CHQRCL/0108/MAR/2013    2013-03-10 08:58:22.000 Initiate Process    Mohamed Ubaid   2013-03-10 08:58:22.000
5   CHQRCL/0108/MAR/2013    2013-03-10 09:06:23.000 Finance Controller  Mohamed Ubaid   2013-03-10 08:58:22.000
5   CHQRCL/0108/MAR/2013    2013-03-10 09:07:06.000 Finance Officer Mohamed Ubaid   2013-03-10 08:58:22.000
6   CHQRCL/0110/MAR/2013    2013-03-10 09:26:10.000 Initiate Process    Allan C Fampulme    2013-03-10 09:26:10.000
6   CHQRCL/0110/MAR/2013    2013-03-10 09:32:34.000 Finance Controller  Allan C Fampulme    2013-03-10 09:26:10.000
6   CHQRCL/0110/MAR/2013    2013-03-10 09:33:22.000 Asset GM    Allan C Fampulme    2013-03-10 09:26:10.000
6   CHQRCL/0110/MAR/2013    2013-03-10 09:35:39.000 Originator  Allan C Fampulme    2013-03-10 09:26:10.000
6   CHQRCL/0110/MAR/2013    2013-03-10 09:36:06.000 Asset GM    Allan C Fampulme    2013-03-10 09:26:10.000
6   CHQRCL/0110/MAR/2013    2013-03-10 09:36:20.000 CFO Allan C Fampulme    2013-03-10 09:26:10.000
6   CHQRCL/0110/MAR/2013    2013-03-10 09:36:41.000 CEO Allan C Fampulme    2013-03-10 09:26:10.000
6   CHQRCL/0110/MAR/2013    2013-03-10 09:37:34.000 Finance Officer Allan C Fampulme    2013-03-10 09:26:10.000 
```

首先，我想要每个参考号的每个步骤所花费的时间（例如，对于参考号 1 的财务控制器，它需要 37 秒）。我想计算平均值（以相同的财务控制器步骤为例；1 refNo + 94 秒再次在 1refNo + 11 秒在 2refNo + 中花费 7 秒，依此类推除以 6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:26:46.053

我使用以下查询解决了我的问题，

WITH CTE AS(
SELECT ROW_NUMBER()OVER(PARTITION BY ReferenceNo ORDER BY CommentDate)As RowNum, *
FROM FNCUSTOM.dbo.WorkflowHistory T
)

SELECT ReferenceNo, StepName, CommentDate, DiffDays = DATEDIFF( s，（从 CTE c2 中选择 CommentDate，其中 c2.ReferenceNo = CTE.ReferenceNo AND c2.RowNum=CTE.RowNum-1），CommentDate）/60.0 / 60.0 / 24.0
从 CTE

# cassandra - 如何在不停机的情况下将单令牌集群迁移到新的 vnodes 集群？

> ID：15362657
> 
> 赞同：6
> 
> 时间：2013-03-12T13:31:44.610
> 
> 标签：cassandra, data-migration

我们有每个节点单个令牌的 Cassandra 集群，总共 22 个节点，每个节点的平均负载为 500Gb。它具有用于主键空间的 SimpleStrategy 和 SimpleSnitch。

我们需要将所有数据迁移到新数据中心，并在不停机的情况下关闭旧数据中心。新集群有 28 个节点。我想在上面安装 vnode。

我正在考虑以下过程：

1.  将旧集群迁移到 vnode
2.  使用 vnode 设置新集群
3.  将新集群中的节点添加到旧集群中，然后等待它平衡所有内容
4.  将客户端切换到新集群
5.  从旧集群中逐一退役节点

但是有很多技术细节。首先，我应该在 vnodes 迁移后对旧集群进行洗牌吗？那么，切换到 NetworkTopologyStrategy 和 GossipingPropertyFileSnitch 的最佳方式是什么？我想切换到 NetworkTopologyStrategy，因为新集群有 2 个不同的机架，带有单独的电源/网络开关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T15:40:59.820

> vnodes迁移后我应该对旧集群进行洗牌吗？

你不需要。如果您从每个节点一个令牌增加到 256 个（默认值），每个节点会将其范围分成 256 个相邻、大小相等的范围。这不会影响数据所在的位置。但这意味着当您在新 DC 中引导新节点时，它将在整个过程中保持平衡。

> 切换到 NetworkTopologyStrategy 和 GossipingPropertyFileSnitch 的最佳方式是什么？

困难在于切换复制策略通常是不安全的，因为数据需要在集群中移动。如果您告诉它节点位于不同的机架中，NetworkToplogyStrategy (NTS) 会将数据放置在不同的节点上。因此，您应该在添加新节点之前迁移到 NTS。

在您将旧集群升级到 vnodes（上面的第 1 步）之后，这是一种执行此操作的方法：

1a。在属性文件中将所有现有节点列为位于 DC0 中。列出位于 DC1 中的新节点及其正确的机架。

1b。使用选项 DC0:3（或任何您当前的复制因子）和 DC1:0 将复制策略更改为 NTS。

然后添加新节点，请按照此处的流程进行操作：[http](http://www.datastax.com/docs/1.2/operations/add_replace_nodes#adding-a-data-center-to-a-cluster) ://www.datastax.com/docs/1.2/operations/add_replace_nodes#adding-a-data-center-to-a-cluster 。请记住将令牌数设置为 256，因为默认情况下它将为 1。

在第 5 步中，您应该将 DC0 的复制因子设置为 0，即将复制选项更改为 DC0:0、DC1:3。现在这些节点没有被使用，因此退役不会流式传输任何数据，但您仍然应该这样做，而不是关闭它们，以便将它们从环中移除。

请注意，一个风险是以低一致性级别对旧节点进行的写入可能会丢失。为了防止这种情况，您可以在切换到新 DC 后写入 CL.LOCAL_QUORUM。仍然有一个小窗口可能会丢失写入（在步骤 3 和 4 之间）。如果它很重要，您可以在停用旧节点之前运行修复以保证不丢失或以高一致性级别写入。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-22T00:30:44.750

如果您尝试使用 vnode 迁移到新集群，您是否需要更改 Partitioner。文档说，在不同的 Partitioner 之间迁移数据并不是一个好主意。

# opengl - OpenGL / GLSL 线迹

> ID：15362658
> 
> 赞同：2
> 
> 时间：2013-03-12T13:31:44.690
> 
> 标签：opengl, glsl, shader

我试图画一条线，然后在它移动时有一条在它后面消失的痕迹。想想 Windows 98 中的“曲线和颜色”屏幕保护程序。我猜它是一种看起来非常简单的运动模糊着色器？

我一直在寻找各种东西几个小时没有运气。也许有一些我不知道的术语或我需要使用的功能？

我可以用 GLSL 做到这一点并保存线路所在的先前点，然后随着时间的推移淡出这些点吗？还是我必须将这些行保存到 10 个不同的帧缓冲区，然后将它们淡出？

我不确定从哪里开始，抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:52:03.297

您只需要 1 个额外的帧缓冲区即可绘制 - 所需的步骤是首先将前一个帧缓冲区渲染为乘以因子（例如 0.9）的纹理，然后以最大强度绘制一条新线；然后交换缓冲区。

一种更简单的方法是重新绘制一组具有不同强度的线——其中一条线将以 0（黑色）的强度重新绘制，一条新线将被重新绘制为 1（白色、绿色等），而其他所有线的强度都介于两者之间。

# python - 如何编写与系统无关的 Python 守护程序/服务？

> ID：15362663
> 
> 赞同：1
> 
> 时间：2013-03-12T13:31:51.023
> 
> 标签：python, service, daemon, os-agnostic

由于[python-daemon](https://pypi.python.org/pypi/python-daemon/)仅限于 *nix 系统，编写一个可以以 Pythonic 方式同时充当 *nix 和 Windows 服务的 python 程序的最简单方法是什么？

# php - 使用 DateInterval 计算两个日期之间的月份而不在一年内换行

> ID：15362664
> 
> 赞同：3
> 
> 时间：2013-03-12T13:31:51.720
> 
> 标签：php, datetime, dateinterval

我知道这个话题已经很累了，但显然还不够！

```
$temp_d1 = new DateTime(date('Y-m-d', $fromTime)); // 2012-01-01
$temp_d2 = new DateTime(date('Y-m-d', $endTime)); // 2013-02-01
$interval = $temp_d2->diff($temp_d1); 
$monthsAhead = $interval->format('%m'); // returns 1, but I am expecting 13 
```

你如何计算两个日期之间的月数，而不是在 12 个月的范围内换行？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T13:41:54.937

I was confusing exactly what:

```
$monthsAhead = $interval->format('%m'); 
```

does.

Obviously, format('%m') is just formatting the month **component** of the DateInterval object, not necessarily '*give me the interval as a number of months*'.

In my case, I was looking for/to do this:

```
$monthsAhead = $interval->m + ($interval->y * 12); 
```

[http://www.php.net/manual/en/class.dateinterval.php](http://www.php.net/manual/en/class.dateinterval.php)

Hope this helps other fools in the future!

# xslt - 按日期和时间对 XSLT 进行排序

> ID：15362667
> 
> 赞同：2
> 
> 时间：2013-03-12T13:31:56.593
> 
> 标签：xslt

我正在尝试在 XSLT 文件中按日期/时间降序排序，并且我已经能够在大多数情况下完成此操作，但是，时间部分有点棘手。我按“数字”而不是实际的“时间”排序。例如，我的输出是：

> 2013 年 3 月 2 日上午 10:05
> 
> 2013 年 3 月 2 日下午 4:28
> 
> 2013 年 2 月 28 日下午 5:03

通常情况下，降序意味着 10 会在该日期出现在 4 之前，但当涉及到时间时，情况并非如此。关于我如何实现的任何建议：

> 2013 年 3 月 2 日下午 4:28
> 
> 2013 年 3 月 2 日上午 10:05
> 
> 2013 年 2 月 28 日下午 5:03

这是我使用的那种：

```
<xsl:sort select="substring-before(substring-after(substring-after(NoteEnteredOn, '/'), '/'), ' ')" /> <!-- year  -->
<xsl:sort select="substring(normalize-space(NoteEnteredOn),1,2)"/> <!-- month -->
<xsl:sort select ="substring-after(substring-after(normalize-space(NoteEnteredOn), ' '),' ')"/> <!-- AM / PM-->
<xsl:sort select="substring-before(substring-after(substring-after(NoteEnteredOn, ' '),' '),':')" /> <!--Hour-->
<xsl:sort select="substring-before(substring-after(normalize-space(NoteEnteredOn), ':'), ' ')"/> <!--Minute-->
<xsl:sort select="substring-before(substring-after(NoteEnteredOn, '/'), '/')" /> <!-- Day   --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:45:47.123

您需要使用`data-type="number"`数字部分，`sorts`按正确的顺序排列，然后使用`order="descending"`：

```
<!-- year  -->
<xsl:sort select="substring-before(substring-after(substring-after(NoteEnteredOn,
        '/'), '/'), ' ')" order="descending" data-type="number" /> 
<!-- month -->
<xsl:sort select="substring(normalize-space(NoteEnteredOn),1,2)"
        order="descending" data-type="number" /> 
<!-- Day   -->
<xsl:sort select="substring-before(substring-after(NoteEnteredOn, '/'), '/')" 
        order="descending" data-type="number" /> 
<!-- AM / PM-->
<xsl:sort select ="substring-after(substring-after(normalize-space(NoteEnteredOn), 
        ' '),' ')" order="descending" /> 
<!--Hour-->
<xsl:sort select="substring-before(substring-after(normalize-space(NoteEnteredOn), 
                   ,' '),':') mod 12" 
          order="descending" data-type="number" /> 
<!--Minute-->
<xsl:sort select="substring-before(substring-after(normalize-space(NoteEnteredOn),
                   ':'), ' ')" 
          order="descending" data-type="number" /> 
```

当然，如果您的数据是可排序的`yyyy-MM-ddTHH:mm:ss`格式，这会容易得多:)

# ruby-on-rails - 在 Rails 中选中复选框时动态更新时间字段并在不使用提交按钮的情况下动态更新数据库

> ID：15362672
> 
> 赞同：0
> 
> 时间：2013-03-12T13:32:07.420
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, forms

我正在尝试执行以下操作：

1）当一个复选框被选中时，我希望该`Time of Arrival`框随着复选框被动态选中的时间而更新。我不想按下提交按钮或任何类似的东西，我猜它应该是动态的，通过 AJAX。 ![在此处输入图像描述](../Images/712dbd6044112c87a75720ddcd92bca9.png)

我当前的代码如下所示：

```
<table border="1">
    <tr>
     <td><b>Present</b></td>
     <td><b>Student ID</b></td>
     <td><b>First Name</b></td>
     <td><b>Last Name</b></td>
     <td><b>Time of Arrival</b></td>
    </tr>
<% @register.student_registers.each do |student_register| %>
  <tr>
      <td><%= check_box_tag "student_registers_ids[#{student_register.id}]",  student_register.id, student_register.present?%></td>
      <td><%= student_register.student.university_id%></td>
      <td><%= student_register.student.first_name.titlecase%></td>
      <td><%= student_register.student.last_name.titlecase%></td>
      <td><%= student_register.time_of_arrival %></td>
  </tr>
  <% end %>
</table> 
```

2）我想做的另一件事是更新数据库中的记录，只要`Present`复选框被选中，而无需按下`Submit`按钮。这将在`model#show`页面中完成，而不是在`model#edit`页面中。

有什么建议么？

编辑：

我修改了代码，但它仍然无法正常工作......

```
<table border="1">
    <tr>
     <td><b>Present</b></td>
     <td><b>Student ID</b></td>
     <td><b>First Name</b></td>
     <td><b>Last Name</b></td>
     <td><b>Time of Arrival</b></td>
    </tr>
  <% form_tag :remote => true %>
<% @register.student_registers.each do |student_register| %>
  <tr>
      <td><%= check_box_tag "student_registers_ids[#{student_register.id}]",
                            student_register.id, student_register.present?,
                            :disabled => false,
                            :onclick => 'popup  ' %></td>
      <td><%= label_tag 'UniversityId', student_register.student.university_id%></td>
      <td><%= label_tag 'FirstName', student_register.student.first_name.titlecase%></td>
      <td><%= label_tag 'LastName', student_register.student.last_name.titlecase%></td>
      <td><%= label_tag student_register.time_of_arrival, nil, :class => 'TimeOfArrival'%>    </td>
  </tr>
  <% end %>

</table>
<%= submit_tag "Save", :confirm => "You sure", :onclick => 'alert("Test")'%> 
```

求各位大神帮忙。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:45:51.723

这是我要做的：

1.  为所有复选框输入指定一个公共 CSS 类（稍后用作 jQuery 选择器）。
2.  在“到达时间”单元格中创建一个空`<span>...</span>`元素，其 id 对学生 ID（例如 ）进行编码。`'toa_1234'`
3.  使用 jQuery[`.change()`](http://api.jquery.com/change/)并将[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)消息发送到服务器。
4.  创建相应的控制器或动作来处理 AJAX POST 并返回记录的（服务器端）时间。
5.  在 AJAX 成功时，显示记录的服务器时间*并*禁用复选框（因此不能再次单击）。

HTML/ERB：

```
<td><%= check_box_tag "student_registers_ids[#{student_register.id}]",
  student_register.id, false,
  :class => 'student_present' %></td>
<td><%= student_register.student.university_id%></td>
<td><%= student_register.student.first_name.titlecase%></td>
<td><%= student_register.student.last_name.titlecase%></td>
<td><%= content_tag :span, student_register.time_of_arrival,
  :id => "toa_#{student_register.student.id}" %></td> 
```

JS/咖啡脚本：

```
$ ->
  $('input[type="checkbox"].student_present').change (e) ->
    checkbox = $(this)
    student_id = checkbox.val()
    $.ajax
      url: '/register/present'
      method: 'POST'
      dataType: 'json'
      data:
        student_id: student_id
      success: (data) ->
        $("span#toa_#{student_id}").html(data['toa'])
        checkbox.attr 'disabled', true 
```

控制器/动作：

```
def present
  student_id = params['student_id']
  # TODO: mark student present and save in database
  recorded_toa = Time.now # TODO replace with actual time
  render json: { student_id: student_id, toa: recorded_toa.strftime('%I:%M %P') }
end 
```

# ruby-on-rails - travis-ci 上带有 ruby 的包含过滤器

> ID：15362673
> 
> 赞同：0
> 
> 时间：2013-03-12T13:32:08.240
> 
> 标签：ruby-on-rails, rspec, travis-ci

我正在尝试对 travis-ci 进行集成测试。我希望能够在 travis 上运行包含过滤器。总而言之，我希望能够在本地运行快速测试，而 travis-ci 测试快速测试和慢速测试，包括依赖互联网的测试。我曾尝试在 .travis.yml 下使用 --tag ~slow_tests ，但它给了我一个错误。这是我的 .yml 文件。

```
language: ruby             
rvm:                       
  - 1.9.3                  

env:                       
  - DB=sqlite              

script:                    
  - RAILS_ENV=test bundle exec rake --trace db:migrate spec --tag ~slow_tests                                                                                                                             

services:                  
  - redis-server 
```

无效选项：--tag 129 130命令“RAILS_ENV=test bundle exec rake --trace db:migrate spec --tag ~slow_tests”以 1 退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:17:48.757

您遇到的问题是该`--tag`选项被解释为`rake`没有这样的选项。因此，您需要一种将命令行选项传递给 RSpec 的方法。您可以使用 SPEC_OPTS 环境变量来做到这一点：

```
script:
  - RAILS_ENV=test bundle exec rake --trace db:migrate spec SPEC_OPTS="--tag ~slow_tests" 
```

# php - 在选择框中显示标题或跨度（Cakephp 1.3）？

> ID：15362675
> 
> 赞同：4
> 
> 时间：2013-03-12T13:32:32.340
> 
> 标签：php, html, cakephp

**问题**

在具有固定宽度的选择框中显示鼠标悬停的冗长选项。

名称隐藏在这里：
![隐藏在这里的名字](../Images/1333a2099f99635e8f699e07a781b2fa.png)

*在浏览器中呈现 HTML*

```
<select id="prim" size="5" multiple="multiple" scroabble="1" name="prim[]">
<option value="Applied Research Associates Inc.">Applied Research Associates Inc.</option>
</select> 
```

**所需输出**

显示`span`或`title`如下

![在此处输入图像描述](../Images/6c92e3489f49ff98de7c106d2907a411.png)

*预期的 HTML*

```
<select id="prim" size="5" multiple="multiple" scroabble="1" name="prim[]">
<option value="Applied Research Associates Inc." title="Applied Research Associates Inc.">Applied Research Associates Inc.</option>
</select> 
```

**我的 CakePHP 代码**

```
 echo $form->input('prim',
                      array('options'=>$refined_list,
                            'type'=>'select',
                             'scrollable'=>true,
                             'multiple'=>true,
                             'name'=>'prim',
                             'label'=>false,
                             'size'=>'5')); 
```

我应该添加什么属性来进行所需的更改？

**编辑/更新：**一种方法可能是按照*@ammu*的建议使用字段更新我的`$refined_list`数组。我必须等待更好的解决方案。`title`

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:30:34.713

在 cakephp 文档中没有这种方法可以将属性添加到 select 选项。看看这个，它可能会帮助您添加属性到 select 选项。

[http://www.dereuromark.de/2012/03/01/some-new-crazy-cakephp-tricks/](http://www.dereuromark.de/2012/03/01/some-new-crazy-cakephp-tricks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:34:31.183

像这样使用它，你会得到你想要的：

```
$options = array(
    ...
    array('name' => 'United states', 'value' => 'USA', 'title' => 'the title that you want'),
    array('name' => 'USA', 'value' => 'USA', 'title' => 'the other title that you want'),
 );

 echo $this->Form->input('test', array('type'=>'select', 'options'=>$options)); 
```

您还可以为每个选项（类、占位符等）以数组的形式添加所需的任何属性。*

# mysql - 保存数据时出现Mysql DB异常

> ID：15362677
> 
> 赞同：0
> 
> 时间：2013-03-12T13:32:39.620
> 
> 标签：mysql

我正在使用 mysql 查询浏览器，因为我为一列设置了非空和默认值，但是在保存它时没有考虑默认值，它显示错误，因为列不应该为空。如何解决这个问题请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:36:14.080

如果在`INSERT`语句中显式指定值为 的列`NULL`，则不考虑默认值。

例如，在以下查询中，即使 column 存在默认值`foo`，引擎也会忽略它并尝试插入 a `NULL`：

```
INSERT INTO myTable(foo, bar) VALUES(NULL, 2); 
```

* * *

从您的声明中完全省略该列`INSERT`（推荐）：

```
INSERT INTO myTable(bar) VALUES(2); 
```

或者您可以使用`BEFORE INSERT`触发器来捕获该`NULL`值并将其替换为您想要的值。

# c++ - CUDA C 代码上的 C++ 关键字

> ID：15362678
> 
> 赞同：4
> 
> 时间：2013-03-12T13:32:40.133
> 
> 标签：c++, c, cuda, nvcc

我正在使用 CUDA 来加速 C 程序的某些部分。该程序使用一些 C++ 关键字作为标识符，因此它不会编译为 C++。既然我用 CUDA 改了，那我怎么用 NVCC 编译呢？

例如，我收到错误：

```
table.h(65): error: expected an identifier 
```

编译代码时：

```
struct sw_table_position {
    unsigned long private[4];
}; 
```

这是完全有效的 C，但无效的 C++。我正在使用 CUDA 5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:38:31.003

**NVCC 编译 C++ 代码，而不是 C 代码**。即使它假装在现实中使用 C 代码，您也只会得到更像 C 的行为，而不是 C 编译器（[参见这篇文章](https://devtalk.nvidia.com/default/topic/413712/-host-compilation-not-obeyed-nvcc-compiling-source-as-c-when-i-want-it-to-compile-c/)）。出于这个原因`private`，它是一个关键字，不能用作标识符（像任何其他 C++ 关键字一样）。

实际上`--host-compilation C`已被*弃用*（它不应该与 nvcc 一起使用），因为实际上它并没有达到您的预期。

# python - 在 Python 中使用对象的最佳方法是什么？

> ID：15362681
> 
> 赞同：1
> 
> 时间：2013-03-12T13:33:00.243
> 
> 标签：python

哪个最好？

**方法一**

```
object = Object()
object.method() 
```

**方法二**

```
Object().method() 
```

这是在另一个类中使用的，所以我可以将所有需要的对象设置为该类的属性（第一种方法），或者只使用第二种方法访问它们？

使用每种方法的原因是什么（如果有的话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:37:10.490

第一种方法是通常的方法。由于实例化的对象绑定了一个变量，所以以后可以使用它。顺便说一句，您可能是指 object.method()，而不是 object.method（括号用于实际调用该方法）。

方法 2 不绑定实例，因此它不再是可寻址的，以后可能会被垃圾回收。仅当调用方法后不必使用实例时才使用方法 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:35:30.680

第一种形式维护与创建对象的绑定。后者在每次调用时创建一个新对象。我想大多数人会更喜欢前者。

# iphone - 在 Ant 脚本中为 xcodeuild 添加构建设置

> ID：15362686
> 
> 赞同：0
> 
> 时间：2013-03-12T13:33:10.583
> 
> 标签：iphone, ios, xcode, ant

我想在 ant-script 中运行这行代码：

```
/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild ARCHS="armv7 armv7s" ONLY_ACTIVE_ARCH=NO -workspace \APPNAME.xcworkspace -scheme APPNAMETarget build 
```

到目前为止，我有这个：

```
<?xml version="1.0" encoding="utf-8"?>
    <project name="APPNAME" default="debugbuild" basedir=".">
        <target name="debugbuild">
            <echo message="Building debug build of APPNAME" />
            <exec executable="/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild" os="Mac OS X">
                <arg value="-workspace"/>
                <arg value="APPNAME.xcworkspace"/>
                <arg value="-scheme"/>
                <arg value="APPNAMETarget"/>
                <arg value="build"/>
            </exec>
        </target>
    </project> 
```

但我还需要添加构建设置 (ARCHS="armv7 armv7s" ONLY_ACTIVE_ARCH=NO) 但不知道如何在脚本中添加它们。我试过了

```
<env key="ONLY_ACTIVE_ARCH" value="NO"/> 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:59:32.540

我找到了解决方案。我只需要像另一个一样将它们添加为参数，但我必须去掉在命令行中很好的括号。我希望它对其他人有帮助，因为我花了一些时间在这上面：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="APPNAME" default="debugbuild" basedir=".">
    <target name="debugbuild">
        <echo message="Building debug build of APPNAME" />
        <exec executable="/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild" os="Mac OS X">
            <arg value="-workspace"/>
            <arg value="APPNAME.xcworkspace"/>
            <arg value="-scheme"/>
            <arg value="APPNAMETarget"/>
            <arg value="build"/>
            <arg value="ARCHS=armv7 armv7s"/>
            <arg value="ONLY_ACTIVE_ARCH=NO"/>
        </exec>
    </target>
</project> 
```

# iphone - 如何知道用户何时切换响铃/静音（静音）按钮？

> ID：15362690
> 
> 赞同：0
> 
> 时间：2013-03-12T13:33:18.997
> 
> 标签：iphone, ios, objective-c

当用户切换响铃/静音按钮时，我可以订阅一些系统通知吗？我也想知道苹果是否提供了一些“系统通知列表”。我花了一个小时搜索这个但失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:40:16.243

没有办法找出来。苹果响应一些请求已经这样回答了

> 我们从未提供过检测硬件静音开关的方法，也不打算这样做。

如果您想尝试一些解决方法，我认为 Apple 会拒绝您的应用程序，但是您可以请求该功能或向 Apple 报告错误。

# java - 全局 Java 数组设置值为 0

> ID：15362693
> 
> 赞同：0
> 
> 时间：2013-03-12T13:33:23.723
> 
> 标签：java, global-variables, nested-loops, sparse-matrix

我有一个小问题。我将稀疏矩阵中的每个元素放入一个名为“b []”的一维数组中。例如：

```
00070
00400
02000
00050
10000 
```

变成：`0007000400020000005010000`

下面的代码在最内层循环中的给定点处起作用 b[] 具有正确的值，如下所示。我的问题是在最内层循环之外 b[] 的值为：

```
b[] = 0000000000000000000000000 
```

我无法理解我错过了什么。还应注意 b[] 是全局定义的，并在此类的构造函数中实例化。问题是我试图在另一个函数中使用这个一维数组，并且数组中的每个元素都设置为 0。

```
public void return1dSequence() {

    // Create paired objects (Pair class).

    for (int i = 0; i < a.length; i++) {

        for(int j = 0; j < a[i].length; j++) {
            this.b[i] = a[i][j];

            // System.out.print(b[i]);
            if (this.b[i] == 0) {
                pos += 1;
            } else {
                value = this.b[i];
                ml.add(new Pair(pos, value));
                pos += 1;
            }
        }
    }
} 
```

提前感谢您的任何回复，

安德烈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:50:40.483

我要提到的第一件事是你不应该将你的变量（a，b....）声明为静态的。在创建两个 Sparse 实例后，您可能会受到平均副作用的影响。尝试将它们定义为非静态并报告它是否仍然无法工作。

最好的问候托马斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:04:09.357

如果您想将 b[] 作为静态访问，请尝试从对 b[] 的每次调用中删除它。

另外，您确定没有在代码中的其他任何地方覆盖 b[] 吗？由于公共静态声明，这很可能是问题所在。尝试将其设为私有并删除静态，看看是否仍有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:59:07.147

您正在填写`b[i]`外部循环的索引 i ...

每次在内循环中，您都`b[i]`用 value覆盖`a[i][j]`。

数组的最后一个值`a[i]`始终为零。

这就是为什么您的 b 数组为零的原因。

你想要的可能是：

```
int counter = 0;
for (int i = 0; i < a.length; i++) {
    for(int j = 0; j < a[i].length; j++) {
        b[counter] = a[i][j];
        counter++;
    }
} 
```

# php - 正则表达式转换 Javascript 到 PHP

> ID：15362696
> 
> 赞同：0
> 
> 时间：2013-03-12T13:33:28.360
> 
> 标签：php, javascript, regex

目前我在我的 Javascript 代码中使用以下 RegEx：

```
'(?:' + tags + '):([\\s\\S]*?)(?=\\s+(?:' + tags + '|END):)' 
```

..因为它是一个动态正则表达式，变量“标签”用于我要过滤的几个参数。

RegEx 在 PHP 代码中的外观如何？我得到以下部分工作：

```
(?:' + tags + '):([\\s\\S]*?) 
```

但无论我尝试什么，第二部分都不适用于 PHP：

```
(?=\\s+(?:' + tags + '|END):) 
```

谢谢您的帮助！

编辑1：

我当前的 PHP 代码如下所示：

```
$regexp = '(?:'.$tags.'):([\\s\\S]*?)(?=\\s+(?:'.$tags.'|END):)'; 
```

编辑2：

我正在尝试查找以下标签/参数：

```
$tags = 'X-WR-CALNAME|X-WR-TIMEZONE|X-WR-CALDESC|BEGIN|CLASS|DTSTAMP|UID|CREATED|LAST-MODIFIED|SEQUENCE|STATUS|TRANSP|X-MICROSOFT-CDO-BUSYSTATUS|ORGANIZER|SUMMARY|DESCRIPTION|LOCATION|DTSTART|DTEND|END'; 
```

...从一个看起来像这样的文本中：

> 开始：事件 DTSTART：20121117T143000Z DTEND：20121117T163000Z DTSTAMP：20121130T185808Z UID：n3f3qjgtads37phsq3oovmvouc@google.com 创建：20121102T191518Z 描述：1。德甲\, 12\. Spieltag \n\nhttp://www.fussball-spielplan. 信息上次修改：20121117T170303Z 位置：Imtech-Arena\，汉堡 序列：0 状态：确认摘要：汉堡 SV - 1\. FSV 美因茨 05 (1:0) 运输：透明 结束：事件

..为了在适当的标签/参数旁边获得值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:03:15.340

正则表达式似乎在添加[分隔符](http://www.php.net/manual/en/regexp.reference.delimiters.php)（`/`模式的开头和结尾）时起作用。

```
$regexp = '/(?:'.$tags.'):([\s\S]*?)(?=\s+(?:'.$tags.'|END):)/'; 
```

`\`除非您尝试匹配文字`"\"`（在这种情况下`'\\\\'`必须使用）， 否则无需转义in php 正则表达式字符串 - 尽管这样做很好。

# visual-studio-2012 - ExcludeFromCodeCoverage 在 VS2012 中不起作用

> ID：15362699
> 
> 赞同：14
> 
> 时间：2013-03-12T13:33:38.517
> 
> 标签：visual-studio-2012, mstest, code-coverage

我的代码中有一个类，我不想出现在代码覆盖率数字中。我将`[ExcludeFromCodeCoverage]`属性添加到类定义中，如下所示：

```
[ExcludeFromCodeCoverage]
public class MyClass { ... } 
```

根据文档（[http://msdn.microsoft.com/en-us/library/system.diagnostics.codeanalysis.excludefromcodecoverageattribute.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.codeanalysis.excludefromcodecoverageattribute.aspx)），这应该是我所需要的，但该类仍然出现在代码覆盖率分析中。

如果这很重要，我正在使用 VS2012/.NET 4.5。

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-12T17:16:57.850

这就是发生的事情，这就是我修复它的方法。

我使用 .runsettings 文件将某些程序集排除在代码覆盖范围之外。似乎每当您包含 .runsettings 文件时，都**必须**包含以下配置：

```
<Attributes>
    <Exclude>
        <Attribute>^System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute$</Attribute>
    </Exclude>
</Attributes> 
```

你在 .runsettings 文件中拥有什么似乎并不重要——它必须在那里`[ExcludeFromCodeCoverage]`才能工作。

仅供参考，请参阅本文以获取有关 .runsettings 文件的更多信息：http: [//msdn.microsoft.com/en-us/library/jj159530.aspx](http://msdn.microsoft.com/en-us/library/jj159530.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-01T18:53:26.510

我知道批准的答案很好，但我想补充一点，如果您从[此处](https://msdn.microsoft.com/en-us/library/jj159530.aspx)建议的文件( [https://msdn.microsoft.com/en-us/library/jj159530.aspx](https://msdn.microsoft.com/en-us/library/jj159530.aspx) ) 开始您的 .runsettings 文件，您将拥有一个很好的基础（包括这里提出的解决方案）。

# javascript - 使用“variable = NEWVAR || variable;”保持原始值

> ID：15362703
> 
> 赞同：1
> 
> 时间：2013-03-12T13:33:43.493
> 
> 标签：javascript, variables

如果新值未定义，这是更新变量并保留原始值的合法方法吗？

```
variable = NEWVAR || variable; 
```

我创建了一个[Fiddle](http://jsfiddle.net/cusVE/)，到目前为止它看起来不错，但我不想得到任何令人讨厌的惊喜。

这是一个测试用例：

```
var test = "hello";

test = undefined || test;

alert('"' + test + '"'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:41:53.203

是和不是。它在技术上是有效的，但你必须小心[虚假值](http://11heavens.com/falsy-and-truthy-in-javascript)，因为如果`NEWVAR`is `0`、`false`、`""`或任何其他虚假值，它将不会被分配。更明智的方法是检查是否`NEWVAR`已定义，可能使用三级运算符：

```
variable = (typeof NEWVAR === "undefined") ? variable : NEWVAR; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:07:29.327

我会说，是的，我经常使用它。但你必须记住

Douglas Crockford：Javascript 的优点（第 40 页）

> || 如果第一个操作数为真，则运算符产生其第一个操作数的值。否则，它产生第二个操作数的值。

因此，如果`NEWVAR`包含任何虚假 ( `false`, `null`, `undefined`, `NaN`, `0`, `""`) 值，则计算第二个操作数。

只要您知道这一点，您就可以随时使用`||`运算符来获取默认值

Douglas Crockford：Javascript 的优点（第 51 页）

> || 运算符可用于填写默认值：

```
var middle = stooge["middle-name"] || "(none)";
var status = flight.status || "unknown"; 
```

# eclipse - Eclipse 修改共享 ant-launch 配置，在其中存储最后启动的标签

> ID：15362709
> 
> 赞同：1
> 
> 时间：2013-03-12T13:33:59.790
> 
> 标签：eclipse, ant

在 Eclipse 3.8 中，我需要在工作区 JRE 中运行我的 build.xml ant 脚本。所以我改变了我的蚂蚁启动配置选择

*   “在与工作区相同的 JRE 中运行”

在 JRE 标记中，将启动配置存储在共享文件中（在公共选项卡上），然后将 .launch 文件提交到存储库。现在共享此配置和 build.xml 脚本的所有开发人员都可以正常工作。

我的问题是，每次有人从我的 build.xml 运行不同的目标时，eclipse 都会更改 .launch 配置，添加/修改最后运行的目标。然后在提交窗口中弹出修改，如果提交的话，这会激怒开发人员并产生合并冲突。

对 .launch 文件的更改是：

```
...
<stringAttribute key="org.eclipse.ui.externaltools.ATTR_ANT_TARGETS" value="build,"/>
... 
```

我的问题是，如何防止 Eclipse 修改我的 .launch 配置文件？

谢谢！

PS 源代码管理是 IBM Synergy

# ruby-on-rails - 在包含 SQL 选择结果集的输出的 Ruby 哈希中查找值

> ID：15362712
> 
> 赞同：0
> 
> 时间：2013-03-12T13:34:08.217
> 
> 标签：ruby-on-rails, ruby, vertica

我正在学习红宝石。我想使用活动记录来使用这样的简单查找命令：`MyModel.find_by_emp_id(i.emp_id)`在模型上，但我不能使用我正在使用的 Vertica 数据库 gem。像这样在模型上运行直接 SQL 查询的结果集： `vemployees = conn.query("select * from employees")` 返回类似哈希的数据结构。数据结构 vemployees 是 Vertica::result 类型，结构如下所示：

```
[
  {:emp_id=>"3321", :emp_last_name=>"Man", :emp_first_name=>"super", :emp_mid_name=>nil}, 
  {:emp_id=>"3325", :emp_last_name=>"Man", :emp_first_name=>"Bat", :emp_mid_name=>nil},
] 
```

如何在不查看结果列表的情况下执行类似 vemployees.find_by_emp_id(i.emp_id) 的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:54:50.967

**注意未经测试的代码**

就像是：

在 MyModel 中：

```
def self.find_by_emp_id(id)
  conn.query("select * from employees where emp_id = #{id}")[0]
end 
```

由于 gem 不是 ActiveRecord，您必须编写自己的访问器，因此您不能依赖自动创建的 ActiveRecord find_by_ 方法。我认为您可以将该 gem 破解到 ActiveRecord 中并拥有 ActiveRecord 的所有优点，但这可能比您作为 Ruby 初学者想要承担的要多。

小心清理任何用户输入...

# jquery - jQuery .load 发送变量

> ID：15362713
> 
> 赞同：2
> 
> 时间：2013-03-12T13:34:08.633
> 
> 标签：jquery, html, jquery-load

我开始很容易，但无法弄清楚为什么这不起作用。

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
><script>
$(document).ready(function(){
$("button").click(function(){

// $("#div1").load("details.php?date_1=31%2F1%2F1975&date_2=31%2F1%2F1985&submit=Submit" );

// $("#div1").load("details.php", {date_1:"31/1/1975", date_2:"31/1/1985"} );
});
});
</script>
</head>
<body>
<div id="div1"><h2>Let jQuery AJAX Change This Text</h2></div>
<button>Get External Content</button>
</body>
</html> 
```

两行注释掉了，第一行有效，第二行不行……我不知道为什么？！或者如何使第二个工作......任何人？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:38:34.737

看看手册`.load`：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

> 如果数据作为对象提供，则使用 POST 方法；否则，假定为 GET。

您的第 2 行使用 POST 而第 1 行使用 GET，这可能就是为什么一个有效而另一个无效的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T13:44:48.247

如果您必须使用 load - 请选择其他答案之一，否则 - 这会保留您的格式：

```
$.post('details.php', {date_1:"31/1/1975", date_2:"31/1/1985"}, function(data) {       
    $("#div1").html(data);
}); 
```

# windows-phone-8 - 无法在 wp8 中为服务引用“RouteService”生成代码

> ID：15362716
> 
> 赞同：0
> 
> 时间：2013-03-12T13:34:18.667
> 
> 标签：windows-phone-8, windows-phone-7.1, windows-phone

我开发了一个 wp7 应用程序，并将其升级到 wp8。

当我构建应用程序时，它显示以下错误

1）自定义工具错误：无法为服务引用“RouteService”生成代码。有关详细信息，请查看其他错误和警告消息。

2）自定义工具错误：无法为服务引用“GeoCodecService”生成代码。有关详细信息，请查看其他错误和警告消息。

我试过，删除该服务引用并再次添加，但没有用。我该如何解决这个错误。有谁能够帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:51:44.910

为什么不直接使用 Wp8 的新 API，它们非常简单：

路由： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj244363 (v=vs.105).aspx#BKMK_showroute](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj244363(v=vs.105).aspx#BKMK_showroute)

并检查所有其他功能：[http ://www.developer.nokia.com/Resources/Library/Lumia/#!guide-to-the-maps.html](http://www.developer.nokia.com/Resources/Library/Lumia/#!guide-to-the-maps.html)

# ios - IOS居中UIImages连续

> ID：15362717
> 
> 赞同：0
> 
> 时间：2013-03-12T13:34:19.777
> 
> 标签：ios, uiimage, center, tableviewcell

我有一个小问题。我想在 UITableViewCell （在中心）中显示多个（数量是动态的）UIImages。

我该怎么做（UIImages 以编程方式生成）？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:39:34.747

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if(cell == nil)
        {
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
            cell.selectionStyle = UITableViewCellSelectionStyleNone;

            self.imgThings = [[UIImageView alloc] init];
           // imgThings.backgroundColor= [UIColor magentaColor];
            [self.imgThings setImage: [UIImage imageNamed:@"image.png"]];
            self.imgThings.center = CGPointMake(cell.contentView.bounds.size.width/2,cell.contentView.bounds.size.height/2);
            [cell.contentView addSubview:self.imgThings];
        }
  return cell;

} 
```

以上是仅针对一张图片的简单示例，您也可以通过更改图片名称将其设置为多张图片。

# windows - 寻找可以扫描 windows api 兼容性问题的工具

> ID：15362720
> 
> 赞同：0
> 
> 时间：2013-03-12T13:34:25.860
> 
> 标签：windows, winapi, visual-c++, testing

我正在寻找一种可以扫描windows api兼容性的工具，它是基于代码扫描还是二进制扫描。比如INetFwPolicy2的Minimum supported client需要Windows Vista，所以如果用在XP上就会失败。我想知道是否有一种工具或一种简单的方法可以挖掘出此类操作系统不兼容的问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:44:56.060

您不需要为此使用“工具”；SDK 标头已经通过对版本兼容性敏感的包含防护进行了仔细保护。

您需要做的就是*在*包含`windows.h`. *目标版本不*支持的任何符号甚至都不会在标头中定义，从而导致编译时错误。

例如，在您的预编译头文件中，您可能有：

```
// Including SDKDDKVer.h defines the highest available Windows platform.
// 
// If you wish to build your application for a previous Windows platform,
// include WinSDKVer.h and set the _WIN32_WINNT macro to the platform
// you wish to support before including SDKDDKVer.h.
#include <WinSDKVer.h>
#define _WIN32_WINNT  _WIN32_WINNT_WINXP   // target Windows XP
#include <SDKDDKVer.h>

#include <Windows.h> 
```

当您使用其中一个内置模板创建新项目时，Visual Studio 甚至会自动为您执行此操作。

[SDK 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745.aspx)提供了针对各种 Windows 版本所需的值的完整列表。但最常见的是`_WIN32_WINNT_WINXP`Windows XP、`_WIN32_WINNT_VISTA`Windows Vista/Server 2008、`_WIN32_WINNT_WIN7`Windows 7/Server 2008 R2 和`_WIN32_WINNT_WIN8`Windows 8。

# jpa - 在游戏框架 2 中定义唯一约束

> ID：15362723
> 
> 赞同：2
> 
> 时间：2013-03-12T13:34:31.567
> 
> 标签：jpa, playframework-2.0

我有一个用户模型，它有一个由框架管理的 ID，还有一个电子邮件属性，我希望电子邮件是唯一的，目前我正在使用

```
@Email
@Required
@Column(unique=true)
public String email; 
```

这工作正常，但它抛出一个 PersistenceException。播放框架是否对此进行了验证，以便在表单级别进行处理。我想避免在我的 user.save() 周围尝试捕获块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:53:56.143

唯一约束仅指数据库：如果它们是在表单级别定义的，则表单验证（“表面检查”）将需要查询数据库以验证您的对象。

我相信例外是您能找到的最好（或不太糟糕）的解决方案。

为了避免许多 try/catch 块，您可能有一个“保存”入口点来完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T15:12:09.903

我有同样的相同问题。最后我使用了一种方法来检查该电子邮件是否已经存在，如果存在，则在表单中添加一个错误。像这样的东西：

```
Form<EntityClass> yourForm = Form.form(EntityClass.class).bindFromRequest();
if (EntityClass.mailAlreadylExist(yourForm.data.get("email"))){
List<ValidationError> validationErrorList = new ArrayList<>();
validationErrorList.add(new ValidationError("" , "email already used"  ,new ArrayList<>()));
yourForm.errors().put("", validationErrorList);
}
if (yourForm.hasErrors(){
return badRequest(yourView.render(yourForm));
} else {
//Do your stuff here, no PersistenceException will be thrown due to duplicate email
} 
```

为我工作，希望它有帮助

# ember.js - Ember.JS 视图不渲染？

> ID：15362725
> 
> 赞同：3
> 
> 时间：2013-03-12T13:34:33.800
> 
> 标签：ember.js

也许我错过了一些东西，但我真的很困惑为什么这不起作用：

```
// The Javascript
App.UsersView = Ember.View.extend({
    templateName: 'user-list'
});

// The HTML
<script type="text/x-handlebars" data-template-name="user-list">
    Hello World
</script> 
```

什么都没有显示？

（应用程序视图显示，因此`ember.js`加载方式没有问题。仅在尝试使用自定义视图时。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:32:43.800

唯一自动附加到 dom 的视图/模板是应用程序。要在页面上包含 UsersView，请尝试：

```
<script type="text/x-handlebars" data-template-name="application">
  <pre>application view</pre>
  {{view App.UsersView}}
</script> 
```

这里的工作示例：http: [//jsbin.com/iluvik/1/edit](http://jsbin.com/iluvik/1/edit)

通常不需要视图助手，因为您的应用程序将由 ember 路由器创建大多数视图/模板。查看[Ember 路由指南](http://emberjs.com/guides/routing/)，以更好地了解如何连接。

# iphone - 如何在我的 iphone 应用程序中打开设备地图以在源和目标之间绘制路径？

> ID：15362729
> 
> 赞同：4
> 
> 时间：2013-03-12T13:34:42.923
> 
> 标签：iphone, dictionary

我想在我的 Iphone 应用程序中打开设备映射以在源和目标之间绘制路径，如下图所示。

![在此处输入图像描述](../Images/d08ea99289e2fdfdde217051cb893e79.png)

如何在我的 Iphone 应用程序中打开设备映射，如上图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:45:20.293

使用以下代码打开地图应用程序，

```
 NSString *url;

        if([[[UIDevice currentDevice] systemVersion] compare:@"6.0" options:NSNumericSearch] == NSOrderedAscending)
        {
            url = [NSString stringWithFormat:@"http://maps.google.com/maps?daddr=%@,%@&saddr=%@,%@",[dict objectForKey:@"latitude"],[dict objectForKey:@"longitude"],currentLat,currentLong];

        }
        else
        {
            url = [NSString stringWithFormat:@"http://maps.apple.com/maps?daddr=%@,%@&saddr=%@,%@",[dict objectForKey:@"latitude"],[dict objectForKey:@"longitude"],currentLat,currentLong];
        }
        if([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:url]])
        {
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];
        } 
```

iOS 6.0 及以上版本有苹果地图应用程序，iOS 较低版本你必须打开谷歌地图应用程序。在网址中，

```
daddr=%@,%@&saddr=%@,%@ 
```

`daddr`是目的地址，`saddr`是源地址。

# android - 拉动刷新和加载更多列表视图，如 facebook

> ID：15362732
> 
> 赞同：5
> 
> 时间：2013-03-12T13:34:46.280
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity, viewpagerindicator

我在这里使用滑动抽屉。在点击**主页图标**时，它显示 3 个标签
1) 我应该为标签申请哪个概念？
2）我想申请`pulltoreferesh`并`loadmore`在像facebook这样的列表视图中？因为您还看到，当向上滚动时，进度条会隐藏并请求取消。

![在此处输入图像描述](../Images/ea400a870f676a0ab3352d83a9e520bb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T09:26:43.217

```
public class ListDemo extends Fragment{
    ArrayAdapter<String> files;
    private LinkedList<String> mListItems;
    PullAndLoadListView lyt ;
    //  ListView lv1;

    // The data to be displayed in the ListView
    private String[] mNames = { "Fabian", "Carlos", "Alex", "Andrea", "Karla",
            "Freddy", "Lazaro", "Hector", "Carolina", "Edwin", "Jhon",
            "Edelmira", "Andres" };

    // The data to be displayed in the ListView
    private String[] mAnimals = { "Perro", "Gato", "Oveja", "Elefante", "Pez",
            "Nicuro", "Bocachico", "Chucha", "Curie", "Raton", "Aguila",
            "Leon", "Jirafa" };

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        final View v = inflater.inflate(R.layout.tab_frag3_layout, container, false);
        mListItems = new LinkedList<String>();
        mListItems.addAll(Arrays.asList(mNames));
        lyt = (PullAndLoadListView)v.findViewById(R.id.tab_frag3_listview1);

        if (container == null) {
            return null;
        }

        files = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_1,mListItems);
        lyt.setAdapter(files);
        lyt.setOnRefreshListener(new OnRefreshListener() {

            @Override
            public void onRefresh() {
                // TODO Auto-generated method stub
                new PullToRefreshDataTask().execute();
            }
        });
        lyt.setOnLoadMoreListener(new OnLoadMoreListener() {

            @Override
            public void onLoadMore() {
                // TODO Auto-generated method stub
                new LoadMoreDataTask().execute();
            }
        });
        return v;

    }
    private class LoadMoreDataTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {

            if (isCancelled()) {
                return null;
            }

            // Simulates a background task
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }

            for (int i = 0; i < mAnimals.length; i++)
                mListItems.add(mAnimals[i]);

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            mListItems.add("Added after load more");

            // We need notify the adapter that the data have been changed
            files.notifyDataSetChanged();

            // Call onLoadMoreComplete when the LoadMore task, has finished
            lyt.onLoadMoreComplete();

            super.onPostExecute(result);
        }

        @Override
        protected void onCancelled() {
            // Notify the loading more operation has finished
            lyt.onLoadMoreComplete();
        }
    }

    private class PullToRefreshDataTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {

            if (isCancelled()) {
                return null;
            }

            // Simulates a background task
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }

            for (int i = 0; i < mAnimals.length; i++)
                mListItems.addFirst(mAnimals[i]);

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            mListItems.addFirst("Added after pull to refresh");

            // We need notify the adapter that the data have been changed
            files.notifyDataSetChanged();

            // Call onLoadMoreComplete when the LoadMore task, has finished
            lyt.onRefreshComplete();

            super.onPostExecute(result);
        }

        @Override
        protected void onCancelled() {
            // Notify the loading more operation has finished
            lyt.onLoadMoreComplete();
        }
    }

} 
```

here is source code of [pull-to-refresh and load-more](https://github.com/shontauro/android-pulltorefresh-and-loadmore) library.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-30T18:38:53.903

使用这个库，我几天前使用过并且工作完美：

[可刷新列表视图](https://github.com/woozzu/RefreshableListView)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:25:40.750

我自己没有使用过这个库，它已经停产（2 个月前），但它看起来很棒，有例子和所有：

[https://github.com/chrisbanes/Android-PullToRefresh/wiki/Quick-Start-Guide](https://github.com/chrisbanes/Android-PullToRefresh/wiki/Quick-Start-Guide)

从我读到的，基本上你需要用库的列表视图替换你自己的列表视图并导入 jar 文件，你很高兴;-)

# java - Java SE 1.7 ClassDefNotFound

> ID：15362734
> 
> 赞同：2
> 
> 时间：2013-03-12T13:34:49.727
> 
> 标签：java, noclassdeffounderror

我目前从 java 1.6 切换到 1.7，发现我的代码由于 ClassDefNotFound 异常而无法运行。在具有 UTF8 类名（具体为中文字符）的类上都会引发异常。有谁知道为什么 java 1.7 失去了对非英语字符类和包名的支持？

这是堆栈跟踪：

```
java.lang.NoClassDefFoundError: badstudent/mappings/北京/北京Mappings
    at badstudent.mappings.AllProvinceMappings.initMappings(AllProvinceMappings.java:42)
    at badstudent.mappings.MappingBase.<init>(MappingBase.java:22)
    at badstudent.mappings.AllProvinceMappings.<init>(AllProvinceMappings.java:38)
    at badstudent.common.Constants.<clinit>(Constants.java:24)
    at badstudent.mappings.MappingManager.getProvinceMappings(MappingManager.java:18)
    at badstudent.mappings.MappingManager.getAllCity(MappingManager.java:46)
    at badstudent.dao.test.SpeedTest.javaAllCity(SpeedTest.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: badstudent.mappings.北京.北京Mappings
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 30 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T18:42:03.133

嗯，Java 1.7 中已经有了一些增强，但没有与删除对 UTF-8 的支持有关 - 请参阅 [Java SE 7 中的国际化增强以](http://docs.oracle.com/javase/7/docs/technotes/guides/intl/enhancements.7.html)获取更多信息。

您使用的是哪个环境？我正在使用 Eclipse，在尝试保存带有中文字符的类时，出现以下错误：

![Eclipse 中的错误](../Images/1d80e25ed6da6905f81ecc3e7ef6fbd0.png)

--

无论如何，根据 Oracle[关于 Charsets 的文档](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html)：

> *Java 虚拟机的每个实例都有一个默认字符集，它可能是也可能不是标准字符集之一。默认字符集在虚拟机启动期间确定，通常取决于底层操作系统使用的语言环境和字符集。*

据我所知，Java 1.7 的默认值为 CP-252（适用于 Windows）或 MacRoman（适用于 Mac），这可以解释您遇到问题的原因。

您可以使用以下内容来找出系统中使用的编码：

```
System.getProperty("sun.jnu.encoding"); 
```

我建议您还尝试以下操作以确保您的系统设置为相应地使用 UTF-8：

```
JAVA_TOOL_OPTIONS = -Dfile.encoding=UTF8 
```

希望以上内容会有所帮助，但如果没有，那么其他一些需要注意的事情是：

1.  如果您将环境更改回 1.6，是否可以解决问题？
2.  尝试编译任何带有汉字的类时，您是否遇到完全相同的错误？
3.  汉字是唯一存在这个问题的类之间的模式吗？

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T15:16:43.610

有脚本确保找到自己的JAVA_HOME和LAUNCHER_JAR路径

```
#!/bin/sh
export JAVA_HOME=/Library/Java/JavaVirtualMachines/1.7.0_15.jdk/Contents/Home
LAUNCHER_JAR=/Applications/eclipse/plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-   1813.jar

java \
-showversion \
-XX:MaxPermSize=256m \
-Xms1024m \
-Xmx1024m \
-Xdock:icon=/Applications/eclipse/Eclipse.app/Contents/Resources/Eclipse.icns \
-XstartOnFirstThread \
-Dorg.eclipse.swt.internal.carbon.smallFonts \
-Dosgi.requiredJavaVersion=1.5 \
-jar $LAUNCHER_JAR 
```

# android - 关闭时 Flash 游戏应用程序声音继续播放

> ID：15362736
> 
> 赞同：0
> 
> 时间：2013-03-12T13:34:54.030
> 
> 标签：android, flash, webview

我制作了一个 android 应用程序，它有一个从 assets 文件夹加载 flash 游戏的 webview。一切正常，但当我离开游戏时，声音一直在响。我试图在按下后退按钮时完成活动，但它是一样的。

```
package com.example.flashgame;
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.webkit.WebView;

public class MainActivity extends Activity {
WebView mWebView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY); 
    mWebView.setBackgroundColor(Color.parseColor("#000000"));
    mWebView.loadUrl("file:///android_asset/game.swf");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:52:13.760

问题是，虽然您可能调用`finish()`了 Activity，但垃圾收集器不一定会立即收集您的 Activity，这会导致您创建的对象（例如任何`MediaPlayer`对象或类似对象）徘徊一段时间 - 其中包括您的`WebView`.

问题通常是人们需要`stop()`在您调用“finish()”之前对您的 Flash 游戏/音频对象进行调用或类似操作，这将导致它们实际上停止而不是在系统中闲逛等待它们被垃圾收集。在您的情况下，您可能需要将`null`url 加载到您的 webview 或类似内容中以阻止 Flash 游戏运行

# java - 时区显示值与给定时区的 GMT 偏移量？

> ID：15362738
> 
> 赞同：2
> 
> 时间：2013-03-12T13:35:09.183
> 
> 标签：java, timezone

我想构建一个时区列表以显示给用户选择。显示名称必须类似于：

> `( GMT 5:30 ) India Standard Time(Asia/Calcutta)`

我正在使用所有时区`TimeZone.getAvailableIDs()`并构建列表。我写的代码是：

```
String[] timeZones = TimeZone.getAvailableIDs();
List<String> tzList = new ArrayList<String>();
for (String timeZone : timeZones)
{
  TimeZone tz = TimeZone.getTimeZone(timeZone);
  StringBuilder timeZoneStr = new StringBuilder();
  timeZoneStr.append("( GMT ").append(tz.getRawOffset() / (60 * 60 * 1000)).append(" ) ").append(tz.getDisplayName()).append("(").append(timeZone).append(")");
  tzList.add(timeZoneStr.toString());
  System.out.println(timeZoneStr.toString());
} 
```

输出的片段如下：

```
( GMT 5 ) Maldives Time(Indian/Maldives)
( GMT 5 ) Pakistan Time(PLT)
( GMT 5 ) India Standard Time(Asia/Calcutta)
( GMT 5 ) India Standard Time(Asia/Kolkata)
( GMT 5 ) India Standard Time(IST) 
```

但我需要得到的输出是：

```
( GMT 5:0 ) Maldives Time(Indian/Maldives)
( GMT 5:0 ) Pakistan Time(PLT)
( GMT 5:30 ) India Standard Time(Asia/Calcutta)
( GMT 5:30 ) India Standard Time(Asia/Kolkata)
( GMT 5:30 ) India Standard Time(IST) 
```

我应该怎么做才能得到 5:30？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:01:05.977

一个更具可读性的答案如下：

```
for (String timeZone : timeZones) {
  TimeZone tz = TimeZone.getTimeZone(timeZone);

  long hours = TimeUnit.MILLISECONDS.toHours(tz.getRawOffset());
  long minutes = TimeUnit.MILLISECONDS.toMinutes(tz.getRawOffset())
      - TimeUnit.HOURS.toMinutes(hours);

  String timeZoneString = String.format("( GMT %d:%02d ) %s(%s)", hours,
      minutes, tz.getDisplayName(), timeZone);
  tzList.add(timeZoneString);
  System.out.println(timeZoneString);
} 
```

这也正确显示例如`5:00`和`5:30`。的使用`String.format()`使得在阅读代码时更容易确定最终的字符串。类的使用[`TimeUnit`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html)简化了数学。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:01:22.230

具有正确格式的另一种解决方案：

```
DateFormat fmt = new SimpleDateFormat("HH:mm");
fmt.setTimeZone(TimeZone.getTimeZone("UTC"));

List<String> tzList = new ArrayList<String>();
for (String timeZone : TimeZone.getAvailableIDs()) {   
    TimeZone tz = TimeZone.getTimeZone(timeZone);

    StringBuilder timeZoneStr = new StringBuilder();
    timeZoneStr.append("( GMT ");
    if (tz.getRawOffset() < 0) {
        timeZoneStr.append("-");
    }
    timeZoneStr.append(fmt.format(new Date(Math.abs(tz.getRawOffset()))));
    timeZoneStr.append(" ) ").append(tz.getDisplayName()).append(timeZone).append(")");

    tzList.add(timeZoneStr.toString());
    System.out.println(timeZoneStr.toString());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:52:49.910

您应该将时区形成线切换为：

```
timeZoneStr.append("( GMT ").append(tz.getRawOffset() / (60 * 60 * 1000)).append(":").append((tz.getRawOffset() / (60 * 1000))%60).append(" ) ").append(tz.getDisplayName()).append("(").append(timeZone).append(")"); 
```

我认为这就是您正在寻找的答案。但是，您仍然可以格式化分钟，因为它们仅在时间偏移为 12 小时时显示一位数字。显示为 12:0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-05T06:15:52.723

使用以下方法偏移时区：

```
private static String displayTimeZone(TimeZone tz) {

    long hours = TimeUnit.MILLISECONDS.toHours(tz.getRawOffset());
    long minutes = TimeUnit.MILLISECONDS.toMinutes(tz.getRawOffset()) 
                              - TimeUnit.HOURS.toMinutes(hours);
    // avoid -4:-30 issue
    minutes = Math.abs(minutes);

    String result = "";
    if (hours > 0) {
        result = String.format("(GMT+%d:%02d) %s", hours, minutes, tz.getID());
    } else {
        result = String.format("(GMT%d:%02d) %s", hours, minutes, tz.getID());
    }

    return result;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-24T09:36:44.540

只需将 a`SimpleDateFormat`与`XXX`时区模式一起使用（生成 ISO 8601 时区）

```
 DateFormat gmt = new SimpleDateFormat("'GMT' XXX");
    for (TimeZone tz : timeZones) {
        gmt.setTimeZone(tz);
        String gmtTimezone = gmt.format(new Date());
        System.err.println(tz.getID() + " " + gmtTimezone);
    } 
```

来源：[http ://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#iso8601timezone](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#iso8601timezone)

# python - 在 python 中运行模块的基础知识

> ID：15362745
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:35:23.610
> 
> 标签：python, encoding, module, importerror

我是 Python 的新手，在 IDLE 中运行一个简单的模块时遇到了麻烦。

1.  如果您在文本编辑器中创建模块，有什么需要注意的吗？
2.  如果它保存在我的桌面上，我需要将它添加到 PYTHONPATH。我这样做了，但是当我尝试导入模块（命名为示例）时仍然出现错误：

    ```
    Traceback (most recent call last):
      File "<pyshell#2>", line 1, in <module>
        import sample
      File "/Users/Me/Desktop/sample.py", line 1
    SyntaxError: Non-ASCII character '\xb6' in file /Users/Me/Desktop/sample.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details (sample.py, line 1) 
    ```

似乎错误与非ASCII字符有关。如何声明编码？有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:02:26.487

在 sample.py 你必须声明编码。

在 sample.py 的第 1 行使用它，你会没事的：

```
# -*- coding: utf-8 -*- 
```

# android - 蓝牙忘记 PIN

> ID：15362752
> 
> 赞同：4
> 
> 时间：2013-03-12T13:35:38.573
> 
> 标签：android, bluetooth

所以我正在开发一个连接到嵌入式蓝牙设备的应用程序。该设备以不同的版本推出，在我的测试设备上，一切正常。通过安全的 rfcomm 套接字进行通信。然而，另一组设备让我毛骨悚然。他们有点失去边界状态。虽然它们被标记为已配对，但每次我建立连接时，都会要求我重新输入 PIN 码。这真的是不希望的。此外，这种行为不会发生在所有设备上，而是大多数设备上。实际上，唯一不会忘记 PIN 的设备是 Galaxy Nexus S。三星 Galaxy Nexus、ACE、GIO 和 X10 mini Pro 往往会“忘记”之前配对的设备。使用 API lvl 10，我已经尝试过不安全的 RFCOMM 连接，但没有成功。我在这里迷路了。有人有想法吗？

最好的祝福！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T01:26:47.623

您设备的 getBTMajorDeviceClass 是什么？如果是BluetoothClass.Device.Major.UNCATEGORIZED，尝试生成自己的UUID：

```
private UUID generateUuid() {
String android_id = Secure.getString(getApplicationContext()
    .getContentResolver(), Secure.ANDROID_ID);
Log.i("System out", "android_id : " + android_id);

final TelephonyManager tm = (TelephonyManager) getBaseContext()
    .getSystemService(Context.TELEPHONY_SERVICE);

final String tmDevice, tmSerial, androidId;
tmDevice = "" + tm.getDeviceId();
Log.i("System out", "tmDevice : " + tmDevice);
tmSerial = "" + tm.getSimSerialNumber();
Log.i("System out", "tmSerial : " + tmSerial);
androidId = ""
    + android.provider.Settings.Secure.getString(
        getContentResolver(),
        android.provider.Settings.Secure.ANDROID_ID);

UUID deviceUuid = new UUID(androidId.hashCode(),
    ((long) tmDevice.hashCode() << 32) | tmSerial.hashCode());

return deviceUuid;
} 
```

并在创建套接字时使用它`createRfcommSocketToServiceRecord(generateUuid());`

*需要 READ_PHONE_STATE

# c# - 将 ASP.Net (c#) Web 应用程序转换为 Windows 服务

> ID：15362757
> 
> 赞同：-2
> 
> 时间：2013-03-12T13:35:54.610
> 
> 标签：c#, asp.net

我在 Visual Studio 2010 中创建了 ASP.Net Web 应用程序 (C#)。现在我想将此 Web 应用程序转换为 Windows 服务。我以前从未使用过 Windows 服务。那么有人可以帮助我吗？

非常感谢您的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:39:20.270

使用[此](http://msdn.microsoft.com/en-gb/library/zt39148a.aspx)链接作为演练

据我所知，您将无法“转换它”，您将必须创建一个新的 Windows 服务应用程序并手动引入您需要放入服务的代码。此服务仅需要执行某些操作，例如您希望自动化的功能。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:41:00.133

Nilam，您提供的有关您的 Web 应用程序的细节非常少，假设您没有很多 UI（用户界面）逻辑，您可以将您的 wb 应用程序的后端/服务器端逻辑移动到 Windows 服务类，或者您假设您已在当前的 Web 应用程序解决方案中的单独的类库 C# 项目中隔离了业务逻辑或应用程序逻辑，则可以简单地对您的 Windows 服务进行编码，使其使用/调用您的 Web 应用程序所做的相同类库。

您希望用户如何与 Windows 服务进行交互，因为 Windows 服务没有用户界面，并且您为什么要进行此转换尚不清楚，除非您提供更多详细信息，否则无法回答。

如果您的 Web 应用程序没有 UI 并且仅托管 XML Web 服务或 WCF 服务，则转换将很容易，因为您可以在不运行/不需要 IIS 的 Windows 服务中托管 WCF 服务。

# css - 如何防止 SASS 合并通过 @import 包含的文件？

> ID：15362760
> 
> 赞同：2
> 
> 时间：2013-03-12T13:36:02.313
> 
> 标签：css, import, sass

是否可以防止 SASS 合并通过 包含的文件`@import`？

对于开发，我想维护原始 CSS 的引用（在我已经从 SASS 编译的设置中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:44:44.800

该[规则的](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#import)[文档`@import`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#import)说：

> 所有导入的 SCSS 和 Sass 文件将合并到一个 CSS 输出文件中。

并解释在某些情况下它会编译为 CSS @import 规则：

*   如果文件的扩展名是`.css`.
*   如果文件名以`http://`.
*   如果文件名是`url()`.
*   如果`@import`有任何媒体查询。

**以下规则将告诉 SASS 合并*导入*的文件：**

```
@import "foo.scss";
@import "foo"; 
```

**以下规则将告诉 SASS 不要合并*导入*的文件：**

```
@import "foo.css";
@import "foo" screen;
@import "http://foo.com/bar";
@import url(foo); 
```

# android - Android DefaultHttpClient 会话检查

> ID：15362763
> 
> 赞同：1
> 
> 时间：2013-03-12T13:36:07.047
> 
> 标签：android, session

我对 Android 编程很陌生，我有以下疑问。

我`DefaultHttpClient`用于对我的服务器进行 Http 调用。它工作正常。

有什么方法可以检查会话是否仍然存在于我的`DefaultHttpClient`对象上？

有可能这样做吗？

提前致谢。

# c# - 如何将我的应用程序连接到 eXist-DB

> ID：15362766
> 
> 赞同：2
> 
> 时间：2013-03-12T13:36:19.460
> 
> 标签：c#, database, exist-db

我创建了一个 ac# 应用程序，它实际上是一个工作流系统，它可以根据文件夹结构的状态等移动 XML 文档。

我现在想做的是使用数据库来存储 XML 文件而不是本地文件夹，但我仍然需要能够使用 Linq / XQuery 查询它们。我选择了 eXist-DB 作为我的数据库，它得到了相当不错的评价。

我的问题是，如何从我的 C# 应用程序连接到我新创建的数据库。如果我在 Visual Studio 中选择“连接到数据库”选项，我会看到一堆 SQL 服务器选项，但似乎没有任何东西可以连接到我漂亮的新 eXist 数据库。

# c++ - 如何获得指定时间之前的剩余秒数

> ID：15362769
> 
> 赞同：0
> 
> 时间：2013-03-12T13:36:31.487
> 
> 标签：c++, datetime, epoch

我希望以下方法可以返回在当天的某个特定时间之前剩余的秒数。例如，如果当前时间是“19:00”，`GetRemainedSeconds("19:01")`则应返回 60，表示在给定时间之前还剩 60 秒。调用`GetRemainedSeconds("18:59")`应该返回 -60。问题是以下函数显示随机行为。有时它返回正确的值，有时它不返回（即使在同一台机器上运行）。这段代码有什么问题？

```
int GetRemainedSeconds ( const std::string &timeString, bool &isValid )
{
    struct tm when;
    char* p;

    p = strptime ( timeString.c_str(), "%H:%M", &when );

    if ( p == NULL || *p != '\0' )
    {
        std::cout << "Invalid 24h time format" << std::endl;
        isValid = false;
        return 0;
    }

    struct tm  now;

    isValid = true;
    time_t nowEpoch = time ( 0 ); // current epoch time

    struct tm tmpTime;
    now = *localtime_r ( &nowEpoch, &tmpTime );

    when.tm_year = now.tm_year;
    when.tm_mon = now.tm_mon;
    when.tm_mday = now.tm_mday;
    when.tm_zone = now.tm_zone;
    when.tm_isdst = now.tm_isdst; 
    time_t whenEpoch = mktime ( &when );

    return ( whenEpoch - nowEpoch );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:56:58.367

你需要设置`when.tm_sec`一些东西（可能为零）。它包含上一次调用的堆栈中碰巧出现的任何垃圾，这不是您想要的。

是的，您还应该将 设置`when.tm_isdst`为有意义的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:51:20.000

这是一个问题：

```
when.tm_isdst = when.tm_isdst; 
```

您正在设置`when.tm_isdst`自己，这只是一些未初始化的垃圾。

我想你的意思是：

```
when.tm_isdst = now.tm_isdst; 
```

# symfony - Twig - 动态替换 GET 参数的值

> ID：15362770
> 
> 赞同：6
> 
> 时间：2013-03-12T13:36:32.657
> 
> 标签：symfony, parameters, request, twig

有没有办法从树枝中替换 GET 参数值？

例如，我在这个地址有一个页面：

```
http://localhost/app_dev.php/test/?param1=40&sort=name 
```

在我的树枝中，我想建立 3 个这样的链接：

```
http://localhost/app_dev.php/test/?param1=40&sort=name 
http://localhost/app_dev.php/test/?param1=40&sort=address 
http://localhost/app_dev.php/test/?param1=40&sort=code 
```

现在我再次在 URL 的末尾添加了“&sort”参数，但这个解决方案实际上是一个“补丁”，它很烂！

```
<a href="{{app.request.requesturi}}&sort=address">address</a> 
```

在这个例子中我只有 2 个参数，但实际上我有大约 6 个参数，因为生成它的链接是通过提交一个 .

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-12T14:14:24.670

这应该可以解决您的问题：

```
{{ path(app.request.attributes.get('_route'),
   app.request.query.all|merge({'sort': 'address'})) }} 
```

它获取当前路由和所有查询参数，这些参数在附加之前与您要更新的参数合并。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:03:55.250

Symfony/Twig`path`函数接受可选参数。如果这些参数是路由的一部分，它们由路由器处理，但如果不是，它们作为 GET 参数传递。

因此，例如，如果您的相应路线是`my_route`：

```
<a href="{{ path('my_route', {'param1':40, 'sort':'address'}) }}">address</a> 
```

# visual-studio-2012 - 尝试在 Chrome 中运行 Visual Studio 2012 Ultimate Coded UI 测试时出错

> ID：15362773
> 
> 赞同：0
> 
> 时间：2013-03-12T13:36:52.647
> 
> 标签：visual-studio-2012, selenium-webdriver, coded-ui-tests

我似乎已经正确安装了所有东西，但仍然出现错误。

Microsoft.VisualStudio.TestTools.UITest.Extension.UITestException：播放引擎在您的系统上找不到 Selenium 二进制文件。您需要同时安装 Selenium .NET 绑定和 Selenium Chrome 驱动程序才能运行跨浏览器编码的 UI 测试。

1) 使用VS2013 Ultimate 11.0.51106.01 更新1

2) d/l 并运行 CodedUITestCrossBrowserSetup.msi

3) chromedriver 使用版本 26.0.1383.0 手动启动

4) 将 SeleniumDotNET 文件复制到“C:\Program Files (x86)\Common Files\microsoft shared\VSTT\Cross Browser Selenium Components”

查看了我能找到的所有文档。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T13:44:09.417

**tl;博士**

如果此文件不存在，请创建一个虚拟文件：C:\Program Files (x86)\Common Files\microsoft shared\VSTT\Cross Browser Selenium Components\castle.core.dll

**长版**

我无法从这里获得 VS2012 Premium Update 2（不是 CTP）与“用于编码 UI 跨浏览器测试的 Selenium 组件”一起使用：

[http://visualstudiogallery.msdn.microsoft.com/11cfc881-f8c9-4f96-b303-a2780156628d](http://visualstudiogallery.msdn.microsoft.com/11cfc881-f8c9-4f96-b303-a2780156628d)

此 dll 中的 Visual Studio 测试代码：C:\Program Files (x86)\Common Files\microsoft shared\VSTT\11.0\UITestExtensionPackages\Microsoft.VisualStudio.TestTools.UITest.Extension.CrossBrowser.dll

... 查找此文件： ....\Cross Browser Selenium Components\castle.core.dll

...但它不存在。

要解决此问题，请在“跨浏览器 Selenium 组件”文件夹中创建任何名为 castle.core.dll 的旧文件。对于我的机器，我刚刚创建了一个名为 castle.core.dll 的零长度文件，它开始工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T21:20:17.717

我遇到了同样的问题，并且像 Andrew 建议的那样添加了 castle.core.dll（只是 C:\Program Files (x86)\Common Files\microsoft shared\VSTT\Cross Browser Selenium Components 中的新零长度文件）它开始起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:56:21.540

我重新安装了包括 VS2012 Update 2 CTP 在内的所有附加组件，它现在对我有用。

# c++ - 指向指针的二维数组

> ID：15362775
> 
> 赞同：2
> 
> 时间：2013-03-12T13:37:04.687
> 
> 标签：c++, pointers, multidimensional-array

我有数组： int `i[20][30]`。使`int**`指针使用它的最快方法是什么？

我的朋友刚刚编写了使用相同大小数组的函数，而我的函数在指针上，我需要传递他的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:39:59.040

```
int a[20][30];       // data as 2D array
int *ap[20];         // array of pointers
for (j = 0; j < 20; ++j)
    ap[j] = a[j];    // convert array to pointers
// can now pass `ap` to function expecting `int **`... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:57:12.117

您不能更改`int i[20][30]`为`int **`手动检查数据并构建它。
但是，可能会对您有所帮助，c++ 中的每个 xD 数组只是一个 1D 数组，具有某种复杂的访问成员的方式。

例子：

```
#define MaxX 20
#define MaxY 30
int i[MaxX][MaxY];
...
//When you write:
i[x][y] = something;
//It's actually been translate to:
i[x * MaxY + y] = something; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:47:04.273

您不能`int **`直接拥有指向该数组的指针，这没有任何意义。如果要将数组作为内存块访问，则可以使用：

```
int *p = (int *)i; // you can go to up (p + 20*30) 
```

否则你需要一个指向数组的指针`int[30]`，即

```
int (*p)[30] = &i[0]; // points to first row 
```

对于第一个，由于演员表，您可以定义：

```
int **p2 = &p; 
```

您可以使用`*(*p2 + n)`. 你已经抛弃了数组维度，但是只要你在指针计算中使用它们，它都是有效的，即`*(*p2 + 35)`引用第 2 行第 6 列（一行 30，加上下一个元素 5）。这非常快，但如果函数需要使用原始维度对数组进行操作，这将不起作用（因为它不是指针数组）。

# android - 带有 setcontentview 的警报对话框

> ID：15362776
> 
> 赞同：1
> 
> 时间：2013-03-12T13:37:09.430
> 
> 标签：android, button, android-alertdialog, customdialog

我想创建一个自定义警报对话框。所以我使用了以下代码。

```
public class MyAlertDialog extends AlertDialog {

    protected MyAlertDialog(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void show() {
        // TODO Auto-generated method stub
        super.show();
        setContentView(R.layout.logindialog);
    }
} 
```

**登录对话框.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/layoutgrey" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textSize="@dimen/mediuem"
        android:text="username" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:textSize="@dimen/mediuem"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="12dp"
        android:textSize="@dimen/mediuem"
        android:text= Password" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView2"
        android:textSize="@dimen/mediuem"
        android:inputType="textPersonName" />

    <Button
        android:id="@+id/button2"
        android:background="@drawable/buttons"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentRight="true"
        android:layout_marginRight="20dp"
        android:text="Cancel" />

    <Button
        android:id="@+id/button1"
        android:background="@drawable/buttons"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_below="@+id/editText2"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="28dp"
        android:layout_alignParentLeft="true"
        android:text="Ok" />

</RelativeLayout> 
```

所以当我尝试像这样使用自定义创建的按钮时

```
final MyAlertDialog alert = new MyAlertDialog(Home.this);
alert.show();
Button ok=(Button)alert.findViewById(R.id.button1);
Button cancel=(Button)alert.findViewById(R.id.button2);

ok.setOnClickListener(new OnClickListener()
{

    @Override
    public void onClick(View v) 
    {
        // TODO Auto-generated method stub
    }
}); 
```

它说空指针异常。请帮助找出这里出了什么问题。

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:09:33.747

这是一个自定义 Yes-No 对话框。这与您要实现的目标相似。您可以轻松地使其适应您的布局。

在构造函数中膨胀您的自定义布局

`Button`通过 ID查找您的

设置`Button`'s `OnClickListener`: 内部`onClick()`调用您稍后需要实现的抽象方法。

```
public abstract class YesNoDialog extends Dialog 
{
    private String mMessage = "";
    private TextView mText;
    private Button mYes;
    private Button mNo;

    public YesNoDialog(Context context, String message)
    {
        super(context);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        View v = getLayoutInflater().inflate(R.layout.yes_no_dialog, null);
        mText = (TextView) v.findViewById(R.id.message);
        mMessage = message;
        mText.setText(mMessage);
        mYes = (Button) v.findViewById(R.id.yes);
        mYes.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                dismiss();
                onYes();
            }
        });
        mNo = (Button) v.findViewById(R.id.no);
        mNo.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                dismiss();
                onNo();
            }
        });
        setCancelable(false);
        setCanceledOnTouchOutside(false);
        setContentView(v);
    }

    public abstract void onYes();

    public abstract void onNo();

} 
```

这是如何使用它：

```
YesNoDialog dialog = new YesNoDialog(this, "message")
{

    @Override
    public void onYes()
    {
      // do something           
    }

    @Override
    public void onNo()
    {
      // do something
    }
};
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:34:01.210

```
 your getting null pointer exception because your directly trying to access the layout.
 tryout some like this

// in case your in activity class
setContentView(getLayoutInflater().inflate(R.layout.logindialog,null));

// in case of other than activity pass the context and use it like this 

  setContentView(((LayoutInflator)context.getSystemService(     Context.LAYOUT_INFLATER_SERVICE))getLayoutInflater().inflate(R.layout.logindialog,null)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:39:27.833

您肯定在做一些过度设计，`setView()`只需`View`在`AlertDialog's` `Builder`. 希望这可以帮助。

# java - JavaFX 是 Swing 的完全替代品吗？

> ID：15362783
> 
> 赞同：22
> 
> 时间：2013-03-12T13:37:31.507
> 
> 标签：java, swing, javafx-2

我有一个 Java 桌面应用程序，其中图形用户界面是在摇摆中设计的。在我们知道`JavaFX replacing Swing`我们已经用 JavaFX 替换了图形用户界面之后。

> “6\. JavaFX 是否正在取代 Swing 作为 Java SE 的新客户端 UI 库？是的。但是，在可预见的未来，Swing 仍将是 Java SE 规范的一部分，并包含在 JRE 中。一方面，Swing 被广泛使用在现有的 Java 桌面应用程序中，但依赖于旧的架构，这需要一定程度的专业知识和专业化。另一方面，JavaFX 具有一组现代 UI 控件，可以使用标准 CSS 技术进行皮肤。虽然我们建议开发人员使用在构建新应用程序时尽可能利用 JavaFX API，可以在同一个应用程序中使用 Swing 和 JavaFX，从而允许开发人员扩展现有的 Swing 应用程序。”

现在我们听说甲骨文将 JavaFX 工具包捐赠给了开源社区，OpenJDK 社区已经同意接受它。

> JavaFX 工具包是从 Sun 的 F3 项目演变而来的。最初的版本基于 JavaFX 脚本语言，然而，在 2011 年，该工具包完全用 Java 重写并由 Oracle 发布为 JavaFX 2.0。2011 年 10 月，Oracle 宣布将向开源社区捐赠 JavaFX 工具包，到 2011 年 11 月，OpenJDK 社区已同意接受它。

我不认为 JavaFX 是稳定的。它没有快速支持。文档解释性不够。当阶段关闭时，它不会释放内部存储器。我的应用程序是多线程应用程序，我的应用程序大部分时间都在更新每个单独线程的状态。本机捆绑包中 JRE 的自包含副本不可靠，我们必须将其替换为驻留在 JDK 中的 JRE 文件夹。

这真的很令人沮丧，我想知道 JavaFX 是否适合开发 Java 桌面应用程序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-11T12:37:29.760

根据 Oracle 的说法，JavaFX**是**Swing 的替代品：

[http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6](http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html#6)，问题 6，说：

**JavaFX 是否正在取代 Swing 作为 Java SE 的新客户端 UI 库？**

**是**的。然而，在可预见的未来，Swing 仍将是 Java SE 规范的一部分，因此包含在 JRE 中。虽然我们建议开发人员在构建新应用程序时尽可能多地利用 JavaFX API，但可以使用 JavaFX 扩展 Swing 应用程序，从而实现更平滑的过渡。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-12T13:49:34.670

```
Is JavaFX complete replacement of Swing? 
```

我认为不是，

*   与 Swing 相比，大多数组件的大小只有一半（开发价格？？？），

*   JavaFX8 中的实现（可通过 Java8 访问）有一个重要点 Swing JComponents 可以从 JavaFX 容器访问，JavaFX 组件将在 Swing JContainers 中访问（在较新的 JavaFX2.2 中实现），

*   那么 JavaFX 将可用于开发桌面应用程序

*   还有一个问题是是否可以在一个 JPanel 中添加 JavaFX TextArea 和 Swing JTextArea，反之亦然（来自 xxx.scene.xxx 的面板）

*   更多（最好的信息，路线图，发展......）关于[外汇体验](http://fxexperience.com/)（通知偶尔会下降:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-19T04:15:13.927

# 2020年更新

在最初发布此问题后的几年中，JavaFX 技术似乎进展顺利。Java 已按其 6 个月的火车时间表发布，并且 JavaFX 版本已在每个版本之后不久发布。

Oracle 已完成使 JavaFX 开源的过程，即[*OpenJFX*](https://openjfx.io/)。代码库现在作为[OpenJDK](https://openjdk.java.net/projects/openjfx/)项目的子项目存放。领导层已分配给[Gluon](https://gluonhq.com/)公司。

人气和社区似乎正在增长。竞争对手已经倒下，比如*微软 Silverlight*和*Adob​​e Flash*都死了。

Oracle 继续支持 Swing，但仅限于[维护模式](https://en.wikipedia.org/wiki/Maintenance_mode)。相比之下，JavaFX 继续发展和改进。

Oracle 销售对 JavaFX 的支持，其他供应商（如 Azul Systems）也是如此。

一些提供 Java 实现的供应商将 JavaFX/OpenJFX 库与他们的 JVM 捆绑在一起。其中包括带有*ZuluFX*产品的 Azul Systems 和带有*LibericaFX*产品的 BellSoft。

尽管目前是最先进的，但正在使用 OpenJFX 为 iOS 和其他平台构建原生应用程序，并使用[GraalVM进行](https://en.wikipedia.org/wiki/GraalVM)[提前编译](https://en.wikipedia.org/wiki/Ahead-of-time_compilation)。

看：

*   Oracle 2020 年 5 月[Java 客户端路线图更新](https://www.oracle.com/technetwork/java/javase/javaclientroadmapupdatev2020may-6548840.pdf)
*   Oracle 的[JavaFX 常见问题解答](https://www.oracle.com/java/technologies/javafx/faq-javafx.html#6)
*   [OpenJFX](https://openjfx.io/)
*   [维基百科上的JavaFX](https://en.wikipedia.org/wiki/JavaFX)页面
*   JavaFX 的OpenJDK [wiki 页面](https://wiki.openjdk.java.net/display/OpenJFX/Main)

* * *

[![在此处输入图像描述](../Images/98fa52aed701d6e9ac74e60fdab5e3db.png)](https://i.stack.imgur.com/iIxDY.png)

# php - 从英国邮政编码地理编码经度和纬度？

> ID：15362784
> 
> 赞同：0
> 
> 时间：2013-03-12T13:37:41.797
> 
> 标签：php, geocode, postal-code

这可以使用 PHP 即时完成吗？

我有一个带有英国邮政编码的地址列表，但我需要经度和纬度才能与谷歌地图一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:40:22.330

您通常需要为经纬度查找的邮政编码数据库支付许可证，您可以在线找到更基本的免费列表（不确定这是如何获得许可的），但这只能找到邮政编码的第一部分（例如 SW9 ）。

# hyperlink - JasperReports 5.0 中的条件超链接

> ID：15362785
> 
> 赞同：1
> 
> 时间：2013-03-12T13:37:42.037
> 
> 标签：hyperlink, jasper-reports, report

我在我的报告单元中创建了几个深入报告，其中一个是基于交易数量的（深入了解更多细节）。

我希望仅当事务数大于或等于 1 时才能使用向下钻取。

目前可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:39:43.653

您可以将两个字段堆叠在一起，一个带有超链接，一个没有。将您的表达式设置为在事务 < 1 时显示不带超链接的字段，并在事务 >= 1 时显示带超链接的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:25:12.053

使 HyperlinkExpression 返回 null。这对我有用。

[http://community.jaspersoft.com/questions/520247/conditionally-display-link](http://community.jaspersoft.com/questions/520247/conditionally-display-link)

# c# - 将自定义属性绑定到上下文

> ID：15362787
> 
> 赞同：0
> 
> 时间：2013-03-12T13:37:51.067
> 
> 标签：c#, wpf

我喜欢将自定义属性（所有者窗口）绑定到我的数据上下文。如何在 xaml 中执行这些操作。我无法访问这些属性，因为我的类是 window 而不是 MyView，它的 Window
`<Window x:Class="MyNamespace.MyView"`
通过将我的 xaml 更改为 MyView 类，我得到一些错误，我的类需要从 window 继承。

代码隐藏：

```
DependencyProperty MyValueProperty, Property MyValue 
```

Xaml： ***将 MyValue 绑定到我的数据上下文。***

我想要这些 ![在此处输入图像描述](../Images/72b7d41a0f9b96c9abeaac52b36dd049.png)

如果我尝试更改 xaml 中的类名：
![在此处输入图像描述](../Images/cbeba17d9faeff2bae98cff061c6f736.png)

我收到这些错误
![在此处输入图像描述](../Images/e7dac90ffc7f7c4f73db7f11b9b9e17e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:44:14.510

您可以实例化一个控件， `<local:MyView xmlns:local="YourNameSpaceToMyView"`这样您就可以使用您的 DP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:46:38.700

您可以将 DataContext 设置为窗口类的当前实例，如下所示：

```
<Window x:Class="MyNamespace.MyView" 
        DataContext="{Binding RelativeSource={RelativeSource self}}"> 
```

然后，您可以轻松访问底层属性。

要绑定到您的自定义属性，您可以执行以下操作：

```
DataContext="{Binding RelativeSource={RelativeSource self}, Path=MyProperty}" 
```

# java - Netty 帧解码器错误

> ID：15362788
> 
> 赞同：1
> 
> 时间：2013-03-12T13:37:52.957
> 
> 标签：java, netty

我已经为我正在构建的应用程序实现了一个帧解码器。到目前为止，当我运行代码时，数据包被很好地解码，我可以看到收到的数据包是正确的。但是我遇到了一个例外：

```
decode() method must read at least one byte if it returned a frame (caused by: class com.smsgh.unitysmpp.Plugins.Smp.SmpPduFrameDecoder)
    at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:434)
    at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 
```

这是我写的代码： /** * @author Arsene * */

```
public class SmpPduFrameDecoder extends FrameDecoder {

    private static Logger logger = LoggerFactory.getLogger(SmpPduFrameDecoder.class);

    @Override
    protected Object decode(ChannelHandlerContext ctx, Channel channel,
            ChannelBuffer buffer) throws Exception {

        ChannelBuffer leFrame = null;
        // Check the Endianness of the packet sent
        if(buffer.order() == ByteOrder.BIG_ENDIAN){
            if(buffer.hasArray()){
                leFrame = ChannelBuffers.wrappedBuffer(ByteOrder.LITTLE_ENDIAN, buffer.array(), buffer.arrayOffset(), buffer.capacity());
            }
            else{
                leFrame = ChannelBuffers.wrappedBuffer(buffer.toByteBuffer().order(ByteOrder.LITTLE_ENDIAN));
            }
        }

        // Read the byte length
        // wait until the length prefix is available
        if (leFrame.readableBytes() < 4) {
            logger.debug("Unable to Read the Length");
            return null;
        }   

        // parse the frame length (first 4 bytes)
        int frameLength = leFrame.getInt(leFrame.readerIndex());  
        logger.info("Packet Received Length " + frameLength);

        // wait until the whole data is available 
        if (leFrame.readableBytes() < frameLength) {
            logger.debug("Unable to read the full PDU received");
            return null;
        }   

        leFrame.skipBytes(4);

        int readerIndex = leFrame.readerIndex();  
        ChannelBuffer frame = leFrame.readBytes(frameLength);     
        leFrame.readerIndex(readerIndex+frameLength);

        byte[] byteArray = frame.array();
        StringBuilder sb = new StringBuilder();
        for(byte b : byteArray){
            sb.append(HexUtil.toHexString(b));
        }
        logger.info("Decode Frame Received without the length " +sb.toString());        
        logger.debug("Full PDU has been read");
        return frame;
    }   
} 
```

有人可以告诉我我的代码有什么问题并帮助我解决该异常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:55:12.823

我已经解决了这个问题。而不是将缓冲区复制到新缓冲区中，我只需要使用 swapInt 来获取实际的帧长度，如下代码所示：

```
public class SmpPduFrameDecoder extends FrameDecoder {

    private static Logger logger = LoggerFactory.getLogger(SmpPduFrameDecoder.class);

    @Override
    protected Object decode(ChannelHandlerContext ctx, Channel channel,
            ChannelBuffer buffer) throws Exception {

        // Read the byte length
        // wait until the length prefix is available
        if (buffer.readableBytes() < 4) {
            logger.debug("Unable to Read the Length");
            return null;
        }   

        // parse the frame length (first 4 bytes)
        //int frameLength = leFrame.getInt(leFrame.readerIndex());  
        int frameLength = ChannelBuffers.swapInt(buffer.getInt(buffer.readerIndex()));
        logger.info("Packet Received Length " + frameLength);

        // wait until the whole data is available 
        if (buffer.readableBytes() < frameLength) {
            logger.debug("Unable to read the full PDU received");
            return null;
        }   

        buffer.skipBytes(4);
        ChannelBuffer frame = buffer.readBytes(frameLength);  
        buffer.readerIndex(frameLength + 4);

        byte[] byteArray = frame.array();
        StringBuilder sb = new StringBuilder();
        for(byte b : byteArray){
            sb.append(HexUtil.toHexString(b));
        }
        logger.info("Decode Frame Received without the length " +sb.toString());        
        logger.debug("Full PDU has been read");
        return frame;
    }   
} 
```

# java - 最简单的 OAuth2 客户端 java

> ID：15362790
> 
> 赞同：0
> 
> 时间：2013-03-12T13:37:54.673
> 
> 标签：java, google-app-engine, web-applications, oauth-2.0

我想从 Google App Engine 中的 Java Web 应用程序实现最简单的 OAuth2 客户端。

从一个对象（不是 servlet）我想提出一个请求：

```
https://oauth2server.com/auth?response_type=code&client_id=CLIENT_ID 
```

有了这个请求，我希望浏览器显示 example.com 的登录页面，然后重定向到我的 url（例如我的应用程序中的一个 servlet）。重定向 url 是预先设置好的。

最简单的方法是什么？（即使不是最专业的）

我正在尝试做这样的事情（谷歌的教程[**在这里**](https://developers.google.com/appengine/docs/java/urlfetch/usingjavanet)）：

```
URL url = new URL("https://oauth2server.com/auth?response_type=code&client_id=CLIENT_ID");  
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("GET");
conn.connect(); 
```

但它似乎不起作用，我对网络的东西不太了解......

# java - 如何在 swt 树编辑器中更改标签的颜色

> ID：15362797
> 
> 赞同：1
> 
> 时间：2013-03-12T13:38:19.777
> 
> 标签：java, tree, editor, swt

我在它的第一列中有一个 TreeEditor 和一些文本。我需要使用标签或字符串向其附加一些文本。另外，我想将附加字符串的颜色更改为绿色。我试图用这段代码来做，但它不起作用：

```
Label label = new Label(this.tree ,SWT.RIGHT);
label.setFont(new Font(getSite().getShell().getDisplay(), ("Hello"), 18,
        SWT.BOLD));
label.setText("hello:));
label.pack();
treeItem.setText(1, hi + "        " + label.getText()); 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:47:36.077

你可能想看看 `org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider`

# variables - 如果同名变量，如何访问 SSIS 中的任务（DFT）级别变量？我似乎正在条件拆分中访问包级别变量

> ID：15362809
> 
> 赞同：0
> 
> 时间：2013-03-12T13:38:54.813
> 
> 标签：variables, ssis, scope, rowcount, dataflowtask

我在包级别有 2 个变量名称 Row_Count 第一个，在任务级别有第二个，并且两者的默认值都为零。

![在此处输入图像描述](../Images/bac2ba4bc2a206787d866a902babd46c.png)

我通过行计数转换分配了变量值

![在此处输入图像描述](../Images/cfe360802401ce11126536b0bd181941.png)

并在条件拆分中检查它的条件。

![在此处输入图像描述](../Images/be553f42a3274b8e585563705171bb50.png)

似乎在行计数转换任务级别变量中分配了值，而在条件拆分中它是从 Pacakge 级别变量中读取的。我如何确保它从 DFT 级别变量中读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:00:16.347

尝试这个 ：-

将变量命名空间更改为具有相同名称但范围不同的变量之一

![在此处输入图像描述](../Images/7c54b5e9fdae93ae065b3ba5cc5e3576.png)

现在，在访问派生组件中的变量时，您可以使用它们的命名空间来区分变量名称，如下所示

![在此处输入图像描述](../Images/0029b1867f4a57a2ac5a9985b894a3b7.png)

# java - 当由 Log4j 创建时，如何使用 Powermockito 模拟 java.io.FileOutputStream？

> ID：15362814
> 
> 赞同：1
> 
> 时间：2013-03-12T13:39:17.803
> 
> 标签：java, junit, log4j, mockito, powermock

目标是对扩展 RollingFileAppender 的硬编码 log4j Appender 进行功能测试，我可以在其中重现使用 MyAppender 写入同一文件的 log4j 记录器的多个实例。我的方法是拦截由 log4j 的 FileAppender 类创建的 FileOutputStream 的创建。

但是匿名 Answers 中的 System.out 调用永远不会被调用。当我在 FileOutputStream 构造函数上放置一个断点时，我看到它的创建完全符合我的预期，我在下面指定了参数。当我在 write 方法上设置断点时，调用的是三个 arg 版本。

我正在使用 Meterware 的 ServletUnit 来模拟在容器中。MyLogAppender.logFile 是一个常量。

我错过了什么？

```
@Test
@PrepareForTest({MyLogAppender.class})
public void MyLogMessageGetsWritten() throws SAXException, IOException, Exception {
    //...
    // INTERCEPT LOG HERE SOMEHOW
    PowerMockito.mockStatic(FileOutputStream.class);
    FileOutputStream mockFos = PowerMockito.mock(FileOutputStream.class);
    PowerMockito.whenNew(FileOutputStream.class).withParameterTypes(String.class, boolean.class).withArguments(MyLogAppender.logFile, true).thenReturn(mockFos);        
    //...
    PowerMockito.doAnswer(new Answer() {
        public Object answer(InvocationOnMock invocation) {
            Object[] args = invocation.getArguments();
            Object mock = invocation.getMock();
            System.out.println("write(byte[], int, int) Called with " + args);
            return args;
        }
    }).when(mockFos).write(any(byte[].class), anyInt(), anyInt());
    //...
    // ASSERT LOG SUCCESS HERE

} 
```

PS 即使我没有粘贴那部分，我也正在使用 PowerMockRunner 运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:24:45.357

如果没有看到您的应用程序代码，就很难确切地确定要建议什么。但是你可以模拟 log4j`Logger`吗？只需注入一个模拟`Logger`并验证是否在其上调用了正确的日志方法。

如果您`FileOutputStream`改为模拟，那么您实际上是在测试 log4j 以及测试您自己的应用程序代码。除非您在 log4j 的开发团队中，否则您可能不想这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:14:10.870

答案：消除 ServletUnit/HttpUnit 的使用，因为它们妨碍了它们。我不知道它是静态初始化还是某些东西的私有范围或两者兼而有之，但是当我摆脱假容器并实例化我需要的裸类时，它就起作用了。

# c# - LineBreak 的 TextBlock 内联附加行为问题

> ID：15362815
> 
> 赞同：0
> 
> 时间：2013-03-12T13:39:19.050
> 
> 标签：c#, wpf, xaml, mvvm, attachedbehaviors

嗨，有没有办法检查 Run 是否只是一个`LineBreak`？

# 先解释一下

建议您在 a 中创建一些带有一些 LineBreaks 的文本，`RichTextBox`现在让我们进一步建议，在您想将文本保存在数据库中之后，您可能会`FlowDocument`像`XML`我现在所做的`TextBlock`那样转换回到 FlowDocument 编写 GetAllLine 扩展并使用附加行为绑定到`TextBlock.Inlines`此处结束我的 LineBreak 问题发生`<Run xml:lang='de-de' xml:space='preserve' />`不会导致`LineBreak`.

# 现在这是我到目前为止所得到的

## XAML

```
<Window x:Class="TextBlockAttachedIssue.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TextBlockAttachedIssue"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBlock local:Bindable.Inlines="{Binding myInlines}" TextWrapping="WrapWithOverflow"/>
    </Grid>
</Window> 
```

## 代码隐藏

```
namespace TextBlockAttachedIssue
{
    /// <summary>
    /// Interaktionslogik für MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            DataContext = new VM();
        }
    }

    public class VM
    {
        private IEnumerable<Inline> _myInlines;

        public VM()
        {
            var myParagraph =
                "<Paragraph xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'> " +
                "<Run xml:lang='de-de' xml:space='preserve' />" +
                "<Run xml:lang='de-de' xml:space='preserve' />" +
                    " das ist text davor" +
                    "<Run FontFamily='Palatino Linotype'> " +
                        "line2  dsf adsgf sd fds gs fd gsfd g sdfg df h g hdgf h fg hhgfdh gfh " +
                    "</Run> " +
                "<Run xml:lang='de-de' xml:space='preserve' />" +
                    "und das ist text danach" +
                "</Paragraph> ";
            var para = XamlReader.Load(XmlReader.Create(new StringReader(myParagraph))) as Paragraph;
            myInlines = para.Inlines.ToList();
        }

        public IEnumerable<Inline> myInlines
        {
            get { return _myInlines; }
            private set { _myInlines = value; }
        }
    }
} 
```

## 依附行为

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;

namespace TextBlockAttachedIssue
{
    public static class Bindable
    {
        public static readonly DependencyProperty InlinesProperty = DependencyProperty.RegisterAttached("Inlines", typeof(IEnumerable<Inline>), typeof(Bindable), new PropertyMetadata(OnInlinesChanged));

        private static void OnInlinesChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
        {
            var textBlock = source as TextBlock;

            if (textBlock != null)
            {
                textBlock.Inlines.Clear();
                var inlines = e.NewValue as IEnumerable<Inline>;
                if (inlines != null)
                    textBlock.Inlines.AddRange(inlines);
            }
        }

        [AttachedPropertyBrowsableForType(typeof(TextBlock))]
        public static IEnumerable<Inline> GetInlines(this TextBlock textBlock)
        {
            return (IEnumerable<Inline>)textBlock.GetValue(InlinesProperty);
        }

        public static void SetInlines(this TextBlock textBlock, IEnumerable<Inline> inlines)
        {
            textBlock.SetValue(InlinesProperty, inlines);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:50:00.337

我不相信[Run](http://msdn.microsoft.com/en-us/library/system.windows.documents.run.aspx)代表换行符。为了表示换行符，使用了不同类型的[Inline](http://msdn.microsoft.com/en-us/library/system.windows.documents.inline.aspx) - [LineBreak](http://msdn.microsoft.com/en-us/library/system.windows.documents.linebreak.aspx)。

[在FlowDocumentReader](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentreader.aspx)中查看时，您的文本没有任何换行符：

```
<FlowDocumentReader>
    <FlowDocument>
        <Paragraph xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'>
            <Run xml:lang='de-de' xml:space='preserve' />
            <Run xml:lang='de-de' xml:space='preserve' /> das ist text davor
            <Run FontFamily='Palatino Linotype'> 
                line2  dsf adsgf sd fds gs fd gsfd g sdfg df h g hdgf h fg hhgfdh gfh 
            </Run> 
            <Run xml:lang='de-de' xml:space='preserve' />
            und das ist text danach
        </Paragraph>
    </FlowDocument>
</FlowDocumentReader> 
```

另一方面，[Paragraph是一个换行的](http://msdn.microsoft.com/en-us/library/system.windows.documents.paragraph.aspx)[Block](http://msdn.microsoft.com/en-us/library/system.windows.documents.block.aspx)元素。也许 Paragraph 引起了您的问题。

为什么不使用[FlowDocumentReader](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentreader.aspx)来显示 FlowDocument 文本，而不是 TextBlock？使用[FlowDocumentReader](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentreader.aspx)，您将完全支持 FlowDocument，包括 Paragraphs 和所有其他[TextElement](http://msdn.microsoft.com/en-us/library/system.windows.documents.textelement.aspx)派生的项目。

# excel - Excel宏从向量中取值来填充矩阵

> ID：15362818
> 
> 赞同：0
> 
> 时间：2013-03-12T13:39:23.503
> 
> 标签：excel, vba, vector, matrix

我不确定这个标题是否足够描述性。

所以基本上我有许多向量（大约 50 个），每个向量包含数百个值。每个向量都标有一个数字，它们看起来像这样：

```
Vector 1
Stim1     12
Stim5     36
Stim7     24
Stim10    4
...       ... 
```

也就是说，它们有一个与特定刺激标签 (StimX) 相关联的数字。然而，每个向量都由一组独特的刺激标签组成。一些刺激标签在多个向量之间共享 - 但是，每个向量不包含每个刺激标签，并且没有一个刺激标签被每个向量共享。因此，例如，Vector 2 看起来像这样：

```
Vector 2
Stim2     28
Stim3     33
Stim5     9
Stim8     40
...       ... 
```

和

```
Vector 3
Stim4    50
Stim3    10
Stim7    4
Stim11   22
...      ... 
```

此外，每个向量都有可变数量的值......有些有 200，有些有 300，等等。

我想要做的是创建一个宏，它将根据这些向量值填充矩阵。所以矩阵看起来像：

```
 Vector 1      Vector 2      Vector 3    ...
Stim1      12
Stim2                    28
Stim3                    33            10
Stim4                                  50
Stim5      36            9
Stim6
Stim7      24                          4
Stim8                    40
Stim9
Stim10     4
Stim11                                 22
... 
```

我不太了解 VBA，所以我相信这可以很简单地完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:54:04.327

我假设您在 sheet1 中的 Vector 和 Stim 列表，而 sheet2 将显示您的矩阵。

A 列 - 向量和刺激
B 列 - 对应的#s

这段代码将完成这项工作：

```
Option Explicit

Sub cMatrix()

    Dim i As Long
    Dim j As Long
    Dim cnt As Long
    cnt = 2
    Dim tmp As Long
    Dim ws1 As Worksheet
    Dim ws2 As Worksheet
    Dim arr() As String

    Set ws1 = ThisWorkbook.Sheets(1)
    Set ws2 = ThisWorkbook.Sheets(2)

    ' populate Y axis: list of stims
    For i = 1 To ws1.Range("A" & Rows.Count).End(xlUp).Row
        If StrComp(CStr(Left(ws1.Range("A" & i), 1)), "s", vbTextCompare) = 0 Then
            ws2.Range("A" & cnt).Value = ws1.Range("A" & i).Value
            cnt = cnt + 1
        End If
    Next i

    ' populate X axis: vectors
    cnt = 2
    For i = 1 To ws1.Range("A" & Rows.Count).End(xlUp).Row
        If StrComp(CStr(Left(ws1.Range("A" & i), 1)), "v", vbTextCompare) = 0 Then
            ws2.Cells(1, cnt).Value = ws1.Range("A" & i).Value
            cnt = cnt + 1
        End If
    Next i

    ' fill array
    ReDim arr(ws2.Range("A" & Rows.Count).End(xlUp).Row - 1)
    For i = 2 To ws2.Range("A" & Rows.Count).End(xlUp).Row
        arr(i - 2) = ws2.Range("A" & i).Value
        ws2.Range("A" & i).ClearContents
    Next i

    ' remove duplicate
    Call RemoveDuplicate(arr)

    ' reprint stims
    For i = LBound(arr) To UBound(arr)
        ws2.Range("A" & i + 2).Value = arr(i)
    Next i

    ' fill matrix
    For cnt = 2 To ws2.Cells(1, Columns.Count).End(xlToLeft).Column
        For i = 1 To ws1.Range("A" & Rows.Count).End(xlUp).Row
            If StrComp(ws2.Cells(1, cnt).Value, ws1.Range("A" & i).Value, vbTextCompare) = 0 Then
                j = i + 1
                While StrComp(Left(ws1.Range("A" & j).Value, 1), "S", vbTextCompare) = 0
                    For tmp = 2 To ws2.Range("A" & Rows.Count).End(xlUp).Row
                        If (StrComp(ws2.Range("A" & tmp).Value, ws1.Range("A" & j).Value, vbTextCompare) = 0) Then
                            ws2.Cells(tmp, cnt).Value = ws1.Range("B" & j).Value
                            j = j + 1
                        End If
                    Next tmp
                Wend
            End If
        Next i
    Next cnt

End Sub

Public Sub RemoveDuplicate(ByRef StringArray() As String)
    Dim LowBound As Long, UpBound As Long
    Dim TempArray() As String, Cur As Long
    Dim A As Long, B As Long
    If (Not StringArray) = True Then Exit Sub
    LowBound = LBound(StringArray)
    UpBound = UBound(StringArray)
    ReDim TempArray(LowBound To UpBound)
    Cur = LowBound
    TempArray(Cur) = StringArray(LowBound)
    For A = LowBound + 1 To UpBound
        For B = LowBound To Cur
            If LenB(TempArray(B)) = LenB(StringArray(A)) Then
                If InStrB(1, StringArray(A), TempArray(B), vbBinaryCompare) = 1 Then Exit For
            End If
        Next B
        If B > Cur Then Cur = B: TempArray(Cur) = StringArray(A)
    Next A
    ReDim Preserve TempArray(LowBound To Cur)
    StringArray = TempArray
End Sub 
```

如果您有任何疑问，请询问！

# google-maps - 谷歌地图添加图层

> ID：15362820
> 
> 赞同：0
> 
> 时间：2013-03-12T13:39:27.303
> 
> 标签：google-maps, google-maps-api-3

我开始开发一个具有谷歌地图的应用程序。

我研究了 Google Maps Api 的帮助，我怀疑是否要添加叠加层。以下是正确的方法：

创建地图

```
function initialize() {    
  var mapOptions = {
      center: new google.maps.LatLng(-34.397, 150.644),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
} 
```

添加重载：

```
function add() {
  var myLatlng = new google.maps.LatLng(-34.397, 150.646);
  var mapOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
  }

  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); /* It is correct?

  var marker = new google.maps.Marker({
      position: myLatlng,
      title:"Hello World!"
  });

  marker.setMap(map);
}; 
```

有没有办法获得地图选项，或者不完全重新关注地图，或者这就是它的工作原理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:27:58.263

`var`在创建地图时删除-keyword `initialize()`。
当你这样做时，`map`-variable 是全局可访问的，你可以`marker.setMap(map);`在内部调用`add()`而不创建新的 Maps 实例。

# facebook - 结果在 /feed 中时，FB API 为 /statuses 返回空白

> ID：15362822
> 
> 赞同：0
> 
> 时间：2013-03-12T13:39:27.990
> 
> 标签：facebook, api, facebook-graph-api

我正在尝试获取登录用户/他的一位朋友在 FB 上发布的所有数据。我目前正在拨打三个不同的电话：

1.  `/<username I want data for>/links`
2.  `/<username I want data for>/photos/uploaded`
3.  `/<username I want data for>/statuses`

这对许多用户来说都很好。但是，一些用户返回一个空结果 ( `{ "data": [ ] }`)。尝试调试时，我注意到调用`/username/feed`返回结果，其中一些是链接/照片/状态。

怎么会这样？我是否调用了错误的端点？

这是相关的 API 页面[FB User Object](http://developers.facebook.com/docs/reference/api/user/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:08:40.127

您正在为您的帐户获取数据。请尝试在不同的浏览器上重现相同的内容。

（在 IE 上检查同样的事情）

# java - 使用 flexjson 序列化对象

> ID：15362826
> 
> 赞同：0
> 
> 时间：2013-03-12T13:39:35.950
> 
> 标签：java, android, google-app-engine, google-cloud-endpoints, flexjson

我正在尝试使用`flexjson`库。但是在我的对象中我必须使用： `com.google.api.client.util.DateTime`它没有没有参数的构造函数。我总是收到`NoSuchMethodException`消息：`Flexjson will instantiate any protected, private, or public no-arg constructor.`我有资源并试图用它做点什么，这里是代码：

```
constructor = clazz.getDeclaredConstructor();
constructor.setAccessible(true);
return constructor.newInstance(); 
```

`clazz.getDeclaredConstructor()`由于缺少空构造函数而引发异常。假设这些签名，找到构造函数的最佳方法是什么：

`DateTime(long timestamp)`?

有人在这个库中遇到过这种问题吗？也许你可以建议使用其他的。我正在使用它来序列化由`Google Cloud Endpoints`. 也许我可以用不同的方法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:39:01.733

您无需更改 Flexjson 的源代码即可执行此操作。处理此问题的方法是创建您自己的 ObjectFactory 实现并将其注册为您要绑定的类型。从那里您可以实例化它，但是，您希望。继承 BeanObjectFactory 并覆盖方法 instantiate() 是最简单的。在那里你可以做任何你想做的事情来创建你想要的对象的实例。通过子类化 BeanObjectFactory ，它将使用该对象的 setter/getter 将 JSON 中的各个属性绑定到您的对象中。如果您的对象不支持属性方法，您可能会发现实现 ObjectFactory 并从 JSON 手动设置该对象的值更容易。Flexjson 网站上有很多关于构建 ObjectFactories 的文档。

然后您可以使用以下方法将您的 ObjectFactory 注册到该数据类型：

```
 new JSONDeserializer<SomeObject>()
     .use( DateTime.class, new DateTimeObjectFactory() )
     .deserialize(json); 
```

# coffeescript - CoffeeScript：搜索具有特定属性值的对象

> ID：15362830
> 
> 赞同：0
> 
> 时间：2013-03-12T13:39:43.267
> 
> 标签：coffeescript

这是如何在数组中搜索值的存在：

```
words = ["rattled", "roudy", "rebbles", "ranks"]
alert "Stop wagging me" if "ranks" in words 
```

我在寻找具有指定属性值的对象存在时寻找类似的优雅：

```
words = [
  { id: 1, value: "rattled" },
  { id: 2, value: "roudy" },
  { id: 3, value: "rebbles" },
  { id: 4, value: "ranks" }
]
alert "Stop wagging me" if "ranks" in words.value 
```

但是底部的线不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:51:12.363

我刚刚尝试了以下操作，它对我有用：

```
alert "Stop wagging me" if "ranks" in (word.value for word in words) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:56:21.770

如果您想要 1-liner，您可以执行以下操作：

```
alert "Stop wagging me" if do -> return yes for w in words when w.value is 'ranks' 
```

优点是它将在数组中迭代而不是派生一个新数组（内存效率高），并且一旦找到匹配项就会停止迭代（cpu 效率高）。要付出的代价是它的可读性可能有点差。为了解决这个问题，最好的方法可能是制作自己的效用函数：

```
inObjectMember = (obj, key, value) ->
  for o in obj when o[key] is value
    return yes

alert "Stop wagging me" if inObjectMember words, 'value', 'ranks' 
```

# html - 立场：Chrome和Firefox绝对不兼容

> ID：15362832
> 
> 赞同：2
> 
> 时间：2013-03-12T13:39:44.313
> 
> 标签：html, css, google-chrome, firefox, incompatibility

我的问题是：我有一个表格，当然，我输入了`<input>`. 但在所有输入中，Chrome 和 Firefox 之间的兼容性都有一点问题。我相信与 Firefox 相比，Chrome 的顶部增加了 2px。我要传递密码。我应该怎么办？在CSS中为webkit和moz使用不同的值？这是我的 HTML：

```
<div id='FirstName_container'>
   <input type='text' name='FirstName' id='FirstName' value='' size='20' class='name1' placeholder="First name"/>
</div> 
```

这是CSS：

```
#contact_form1 #FirstName_container {
    position:absolute;
    left:152px;
    top:12px;
    z-index:5;
} 
```

我可以做什么？提前谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:05:44.900

把它放在 CSS 的顶部。

```
*
{
    margin:0;
    padding:0;
} 
```

这将使所有边距和填充默认为零。我将它添加到每个项目的开头，然后在需要时更改单个边距或填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T07:42:34.140

使用 span 而不是绝对位置的 div 时最常见的错误。如果您使用 div 元素，根据我的经验，您通常会看到对所有浏览器的更好兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:38:10.343

通过在下面使用，您将给 #FirstName_container 一个绝对位置：

```
#contact_form1 #FirstName_container {
    position:absolute;
    left:152px;
    top:12px;
    z-index:5;
} 
```

您应该为 #FirstName_container 的父级提供一个相对位置以及 left 和 top 值。这应该有助于解决这个问题。

```
#contact_form1{position:relative;top:XXpx; left:XXpx;} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-12T15:58:52.147

我设法解决了这个问题！刚刚添加`margin: 0;`到所有元素。感谢所有帮助过的人。

# javascript - Google Maps - 根据地图的当前视点从位置数组中获取值

> ID：15362835
> 
> 赞同：0
> 
> 时间：2013-03-12T13:39:55.390
> 
> 标签：javascript, google-maps

编辑： **问题**=“有没有办法循环遍历数组并检查每个位置（长/纬度）是否直接落在当前视口内”（未能在视口内获取所有标记）

**背景**：

我有一系列位置（纬度、经度、id）。

我想要：

*   在 Google 地图上，使用位置数组来显示标记。
*   用户可以滚动/缩放地图。
*   在地图下方有一个按钮，因此当用户决定一个区域时，他可以单击该按钮，代码将**返回包含在视口/地图边界内的 id（来自位置数组）**。

谷歌有一个 .contains ，所以我想你可能会使用类似的东西

`map.getBounds().contains`并以某种方式引用每个 marker.getPosition()

但我想知道是否有办法循环遍历数组并检查每个位置（长/纬度）是否直接落在当前视口内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:59:53.247

你的意思是这样的（未经测试），地图是 google.maps.Map 对象，需要在范围内。标记数组是标记数组。

```
for (var i=0; i< markersArray.length; i++) {
   if (map.getBounds().contains(markersArray[i].getPosition())) {
      // the marker is in view
   } else {
      // the marker is not in view
   } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:04:51.733

[http://jsfiddle.net/UA2g2/1/](http://jsfiddle.net/UA2g2/1/)

感谢 geocodezip，你给了我关于如何通过遍历数组来解决它的想法。我不知道这是否是最有效的方法，但是我整理了一些似乎可以满足我要求的代码-如果您检查上面的 jsfiddle 并查看控制台，您可以看到它记录了视口中的时间和点.

```
$(document).ready(function(){

  var myOptions = {
  center: new google.maps.LatLng(51, -2),
  zoom: 9,
  mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  var storeArray = new Array(["51.38254", "-2.362804", "ID1"], ["51.235249", "-2.297804","ID2"], ["51.086126", "-2.910767","ID3"]);

  google.maps.event.addListener(map, 'idle', function() {

      for (i = 0; i < storeArray.length; i++) {  
            marker = new google.maps.Marker({
            position: new google.maps.LatLng(storeArray[i][0], storeArray[i][1]),
            map: map
         });
      }

      for (var i=0; i<storeArray.length; i++) {
          if (map.getBounds().contains(new google.maps.LatLng(storeArray[i][0], storeArray[i][1]))) {
              console.log("marker: " + storeArray[i][2]);
            }
        } 

  });

}); 
```

# php - 在 PHP 网页中，从外部 PHP 读取文本以轻松跨页面更新内容

> ID：15362840
> 
> 赞同：0
> 
> 时间：2013-03-12T13:40:08.490
> 
> 标签：php, html

我正在写一个有多个页面的小型网站。我希望每页都有相同的页脚，但我不想每天手动更新 10 页 HTML。我想在每个 HTML 页面（现在是 .php 页面，感谢@br14np）中对外部文件进行 PHP 调用，这样当我更新 PHP 文件时，所有页面 - 加载时 - 将显示相同的页脚文本.

```
<p><?php footertext.php ?></p> 
```

是我在将内容加载到上述名称的文件中时的疯狂猜测，但无济于事。（在footertext.php 中的代码是：）`<?php print("Test numba one") ?>`。

我该怎么做呢？我更喜欢涉及 PHP 的答案。

**更新：**

这是我正在使用的确切代码。一切都在同一个目录中。

主文件：

```
<html>
    <head> 
    </head>

    <body>
        <p> Content: <?php include "footertext.php ?></p>
    </body>

</html> 
```

页脚内容：

`echo 'Test numba TWO!';`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:43:52.463

使用该`include`功能。只需给它你的文件的路径。例子：

```
<?php include "footertext.php"; ?> 
```

还有一些其他功能可以做类似的事情，例如`require_once()`. 您可以[在此处](http://www.w3schools.com/php/php_includes.asp)阅读更多相关信息。

**对更新的回应**

您在 . 之后缺少右引号`"footertext.php`。另一个可能有助于这种情况的技巧是打开 php 错误报告。这将在您的页面上显示任何语法或其他错误。只需在页面顶部插入以下代码：

```
<?php
  error_reporting(E_ALL);
  ini_set("display_errors", 1);
?> 
```

还要确保`<?php ... ?>`在 footertext.php 文件中有打开和关闭 php 标签 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:14:47.307

最适合您的查询的解决方案是*包含*或*需要*php 的函数。现在您需要根据它们的功能行为确定其中哪一个是您的选择。

# PHP include 和 require 语句

在 PHP 中，您可以在服务器执行之前将一个 PHP 文件的内容插入到另一个 PHP 文件中。

include 和 require 语句用于在执行流程中插入写在其他文件中的有用代码。

**Include 和 require 是相同的，除非失败：**

*   require 将产生一个致命错误（E_COMPILE_ERROR）并停止
*   include 只会产生警告（E_WARNING）并且脚本将继续

因此，如果您希望继续执行并向用户显示输出，即使包含文件丢失，也请使用 include。否则，在 FrameWork、CMS 或复杂的 PHP 应用程序编码的情况下，始终使用 require 将关键文件包含到执行流程中。这将有助于避免损害应用程序的安全性和完整性，以防万一一个密钥文件意外丢失。

包含文件可以节省大量工作。这意味着您可以为所有网页创建标准页眉、页脚或菜单文件。然后，当需要更新header时，只能更新header包含文件。

# 句法

> ***包括“文件名.ext”；***
> 或
> ***要求“文件名”；***

您可能想了解
[Include](http://php.net/manual/en/function.include.php)、 [Require](http://www.php.net/manual/en/function.require.php)、 [Require_once](http://www.php.net/manual/en/function.require-once.php)和 [Include_once](http://www.php.net/manual/en/function.require-once.php)的详细信息。

享受！
阿南德·查万

# android - 尝试连接到 2 个服务时，Android bindService 返回 false

> ID：15362843
> 
> 赞同：0
> 
> 时间：2013-03-12T13:40:14.580
> 
> 标签：android, android-service, locationlistener

我知道还有其他人问过类似的问题，但我无法得到关于如何在调用 bindService 时克服错误的答案。

基本上我已经编写了一个连接到 2 个服务的应用程序。它们都在我的清单中：

```
<service android:name="com.test.LService"></service>
<service android:name="com.test.CService"></service> 
```

CService 按预期工作并且始终如此。我昨天添加了 LService，它根本不会启动。请注意，最初我在 MainActivity 中有我的 LocationListener 实现，但我想收集 GPS 坐标，而与焦点所在的 Activity 无关。为了节省空间，我将粘贴 LService 相关代码，因为这是我遇到问题的服务。在我的 MainActivity 中：

```
@Override
protected void onStart() {
    super.onStart();
    // bindService for LService always returns FALSE?!?!
    Log.d(TAG, "LService: " + this.context.bindService(new Intent(this, LService.class), mLConnection, Context.BIND_AUTO_CREATE));
    Log.d(TAG, "CService: " + this.context.bindService(new Intent(this, CService.class), mCConnection, Context.BIND_AUTO_CREATE));
}

private ServiceConnection mLocConnection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName className, IBinder service) {
        LocBinder binder = (LocBinder) service;
        mLocService = binder.getService();
        mLocBound = true;
    }

    @Override
    public void onServiceDisconnected(ComponentName className) {
        mLocBound = false;
    }
}; 
```

在 LService 类中，您期望的所有绑定内容：

```
private final IBinder mBinder = new LBinder();

@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}

public class LBinder extends Binder {
    public LService getService() {
        return LService.this;
    }
} 
```

唯一可能成为问题的是我的 LService 实现了 LocationListener：

```
public class LocService extends Service implements LocationListener {
... 
```

CService 没有实现任何东西，它只是像它应该的那样扩展了 Service。您是否认为将 LocationListener 删除为实现，并在子类中重新实现它会起到作用？会不会是一些 Android 反射看到了实现并确定它不适合作为服务？为什么没有例外？有任何想法吗？谢谢！

**更新：**这不是因为 LocationListener 实现。我从 LService 中删除了工具，但它仍然返回 FALSE。叹...

**UPDATE2：**尝试调试情况很糟糕，但是 CService 会掉入 ClassLoader 而 LService 根本不会。某处是否可能存在不正确的某些类标识符？！？在我看来一切都很好。

**UPDATE3：**我放弃了，只是将 LocationListener 合并到我的 CService 服务中......我会尽可能关闭这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:33:24.643

我无法结束这个问题，所以我只会回答我最终做了什么。

我放弃了，只是将 LocationListener 合并到我的 CService 服务中，并放弃了试图弄清楚为什么我的第二个服务不起作用。不过还是对意见感兴趣！

# c# - 如何使用 JavaScript 在 MVC3 中的视图之间保留数据？

> ID：15362849
> 
> 赞同：3
> 
> 时间：2013-03-12T13:40:30.797
> 
> 标签：c#, jquery, asp.net-mvc, cookies

我想在以下两种情况下将数据直接从一个视图传递到另一个视图：

1.  我们的用户可以停靠和取消停靠在我们的应用程序中始终存在的工具栏。我希望在用户导航到另一个页面时保存此状态。工具栏使用 jQuery 停靠和取消停靠。

2.  在某些情况下，在 AJAX 调用成功响应后，我们会进行整页刷新或重定向。我们希望在刷新/重定向后向用户显示通知（例如，您的操作成功）。

我最初的想法是使用 cookie，特别是使用[jquery-cookie](https://github.com/carhartl/jquery-cookie)，但后来我想知道如何使用该`Session[]`变量。鉴于我们的 JavaScript 将位于外部文件中，我不知道这是否可行，如果可行，是否会使问题复杂化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:45:27.703

你看过草坪椅吗？

[http://brian.io/lawnchair/](http://brian.io/lawnchair/)

听起来很像你需要的。它用于跨页面保存客户端数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:13:05.127

您可以通过简单地通过隐藏字段来回发送工具栏状态信息来做到这一点（意味着从 MVC 视图到控制器，而不是从控制器到 MVC 视图）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:52:15.790

我的应用程序要求我跨视图和会话存储许多数据元素。我没有预先选择存储机制（主要是因为管理层无法决定），而是使用[persistence.js](http://persistencejs.org)编写了我的应用程序。

后来我能够选择精确的存储机制，而对我的代码的影响最小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:25:20.040

我遇到了同样类型的问题。解决方法后，我使用 jQuery cookie 并存储隐藏的面板 ID。并检查`$(document).ready(function(){});`jQuery 中的 cookie 哪些面板是隐藏的，并且在制作它们`display:none`之后。所以在回发之后，cookie 是持久的并且面板被隐藏了。它解决了我的问题。

# c++ - 模拟数组/向量中的棋子跳跃

> ID：15362852
> 
> 赞同：-6
> 
> 时间：2013-03-12T13:40:36.010
> 
> 标签：c++, algorithm

假设我们有一个大小为 N 的向量
A。Pawn 从 A[0] 开始并跳转到 A[0] 指向的索引：A[0] 的值告诉它必须如何移动，即：如果索引为 6。

```
A[6]=1 -> move 1 to the right, to A[7]

A[6]=-2 -> move 2 to the left, to A[4] 
```

如果 pawn 到达**最后一个索引并且是 positive**，则 pawn 超出范围示例：

> > ```
> > A  0 | 1 | 1 | 3 | 4 | 5
> >    2  -1   4   1   4   2 
> > ```

每个元素包含的最大值为 1 000 000 且 N < 1 000 000。函数应返回 4。

任务：编写一个函数`int arrayJmp ( const vector<int> &A )`，如果 pawn 永远不会离开表，则返回 -1；如果它会跳出数组，则返回移动次数。最坏情况的复杂度应该是 O(n)。你可以在下面找到我的答案。这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:43:31.153

```
#include <algorithm>

void myfunction (int &i) {  // function:
  i=1000001;
}

int arrayJmp ( const vector<int> &A ) {
    int N=A.size();

  vector<int> indexes;
  for_each (indexes.begin(), indexes.end(), myfunction);
  int index=0;

  while(std::find(indexes.begin(), indexes.end(), index) == indexes.end()){
    indexes.push_back(index);

    index+=A[index];
    if (index==(N-1)&&A[index]>0) return indexes.size()+1;
  }

  return -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:44:59.963

您是否可以互换使用“表”、“数组”和“向量”？

请求很简单：

```
if ((i = array[  index ]) < 0 || i >= sizeof(array)) ;//out of bounds

otherwise i is within bounds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:57:25.387

```
#include <iostream>
#include <vector>

int jump_array(const std::vector<int>& vector)
{
    int index = 0;
    int old_index = 0;
    int size = vector.size();
    int count = 0;
    do
    {
        old_index = index;
        index += vector[index];
        if(count >= size)
        {
            return -1;
        }
        else
        {
            count++;
        }
    }
    while(index < size);

    return vector[old_index];
}

int main()
{
    std::vector<int> vector;
    vector.push_back(2);
    vector.push_back(-1);
    vector.push_back(4);
    vector.push_back(1);
    vector.push_back(4);
    vector.push_back(2);

    std::cout << jump_array(vector);
} 
```

# c++ - 获取剪贴板数据（CF_UNICODETEXT）；

> ID：15362859
> 
> 赞同：6
> 
> 时间：2013-03-12T13:40:55.680
> 
> 标签：c++, unicode, clipboard

请告诉我，为什么我会遇到这个问题：

*   如果剪贴板包含 unicode 字符（eq 俄语），我只会得到第一个选定的单词。“空格”字符之前的第一个单词。

*   如果剪贴板不包含 unicode 字符（仅限英文），我会得到所选文本的第一个字符。

获取选定的文本：

```
CStringA getClipboard()
{
     CStringA strData;

     if (OpenClipboard(NULL)){

         HANDLE hClipboardData = GetClipboardData(CF_UNICODETEXT);
         char *pchData = (char*)GlobalLock(hClipboardData);
         strData = pchData;
         GlobalUnlock(hClipboardData);
         CloseClipboard();

    }
    return strData;
} 
```

设置文字：

```
bool setClipboard(CStringA textToclipboard)
{
    bool success = true;

    if (OpenClipboard(NULL)){

        EmptyClipboard();
        HGLOBAL hClipboardData;
        size_t size = (textToclipboard.GetLength()+1) * sizeof(TCHAR);
        hClipboardData = GlobalAlloc(NULL, size);
        TCHAR* pchData = (TCHAR*)GlobalLock(hClipboardData);
        memcpy(pchData, LPCTSTR(textToclipboard.GetString()), size);
        SetClipboardData(CF_UNICODETEXT, hClipboardData);
        GlobalUnlock(hClipboardData);
        CloseClipboard();
    }

    return success;

} 
```

只需获取和设置剪贴板内容。

```
CStringA str = getClipboard();
setClipboard(str); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T05:59:30.123

`CF_UNICODETEXT`使用 UTF-16。在 Windows 上，`wchar_t`数据元素用于 UTF-16，但您的代码正在使用`char`。 `CStringA`与 UTF-16 不兼容。您在两个函数中的数据不匹配，这就是为什么您没有得到您期望的结果。

一种解决方案是使用`CStringW`而不是`CStringA`：

```
CStringW getClipboard()
{
    CStringW strData;

    if (OpenClipboard(NULL))
    {
        HANDLE hClipboardData = GetClipboardData(CF_UNICODETEXT);
        if (hClipboardData)
        {
            WCHAR *pchData = (WCHAR*) GlobalLock(hClipboardData);
            if (pchData)
            {
                strData = pchData;
                GlobalUnlock(hClipboardData);
            }
        }
        CloseClipboard();
    }
    return strData;
}

bool setClipboard(CStringW textToclipboard)
{
    bool success = true;

    if (OpenClipboard(NULL))
    {
        EmptyClipboard();
        size_t size = (textToclipboard.GetLength()+1) * sizeof(WCHAR);
        HGLOBAL hClipboardData = GlobalAlloc(NULL, size);
        if (hClipboardData)
        {
            WCHAR* pchData = (WCHAR*) GlobalLock(hClipboardData);
            if (pchData)
            {
                memcpy(pchData, (WCHAR*) textToclipboard.GetString(), size);
                GlobalUnlock(hClipboardData);
                SetClipboardData(CF_UNICODETEXT, hClipboardData);
            }
        }
        CloseClipboard();
    }
    return success;
} 
```

如果您需要坚持使用`CStringA`，那么：

1.  使用`CF_TEXT`而不是`CF_UNICODETEXT`让剪贴板为您处理 Ansi 和 Unicode 之间的转换：

    ```
    CStringA getClipboard()
    {
        CStringA strData;

        if (OpenClipboard(NULL))
        {
            HANDLE hClipboardData = GetClipboardData(CF_TEXT);
            if (hClipboardData)
            {
                CHAR *pchData = (CHAR*) GlobalLock(hClipboardData);
                if (pchData)
                {
                    strData = pchData;
                    GlobalUnlock(hClipboardData);
                }
            }
            CloseClipboard();
        }
        return strData;
    }

    bool setClipboard(CStringA textToclipboard)
    {
        bool success = true;

        if (OpenClipboard(NULL))
        {
            EmptyClipboard();
            size_t size = (textToclipboard.GetLength()+1) * sizeof(CHAR);
            HGLOBAL hClipboardData = GlobalAlloc(NULL, size);
            if (hClipboardData)
            {
                CHAR* pchData = (CHAR*) GlobalLock(hClipboardData);
                if (pchData)
                {
                    memcpy(pchData, (CHAR*) textToclipboard.GetString(), size);
                    GlobalUnlock(hClipboardData);
                    SetClipboardData(CF_TEXT, hClipboardData);
                }
            }
            CloseClipboard();
        }
        return success;
    } 
    ```

2.  使用时手动转换为/从 UTF-16 转换`CF_UNICODETEXT`：

    ```
    CStringA getClipboard()
    {
        CStringW strData;

        if (OpenClipboard(NULL))
        {
            HANDLE hClipboardData = GetClipboardData(CF_UNICODETEXT);
            if (hClipboardData)
            {
                WCHAR *pchData = (WCHAR*) GlobalLock(hClipboardData);
                if (pchData)
                {
                    strData = pchData;
                    GlobalUnlock(hClipboardData);
                }
            }
            CloseClipboard();
        }

        return CStringA((WCHAR*)strData.GetString());
    }

    bool setClipboard(CStringA strData)
    {
        CStringW textToclipboard((CHAR*)strData.GetString());
        bool success = true;

        if (OpenClipboard(NULL))
        {
            EmptyClipboard();
            size_t size = (textToclipboard.GetLength()+1) * sizeof(WCHAR);
            HGLOBAL hClipboardData = GlobalAlloc(NULL, size);
            if (hClipboardData)
            {
                WCHAR* pchData = (WCHAR*) GlobalLock(hClipboardData);
                if (pchData)
                {
                    memcpy(pchData, (WCHAR*) textToclipboard.GetString(), size);
                    GlobalUnlock(hClipboardData);
                    SetClipboardData(CF_UNICODETEXT, hClipboardData);
                }
            }
            CloseClipboard();
        }
        return success;
    } 
    ```

另一种解决方案是使用or`CString`代替`CStringA`or `CStringW`，然后根据是 Ansi 还是 Unicode使用`CF_TEXT`or ：`CF_UNICODETEXT``TCHAR`

```
#ifdef UNICODE
#define CF_TEXT_T CF_UNICODETEXT
#else
#define CF_TEXT_T CF_TEXT
#endif

CString getClipboard()
{
    CString strData;

    if (OpenClipboard(NULL))
    {
        HANDLE hClipboardData = GetClipboardData(CF_TEXT_T);
        if (hClipboardData)
        {
            TCHAR *pchData = (TCHAR*) GlobalLock(hClipboardData);
            if (pchData)
            {
                strData = pchData;
                GlobalUnlock(hClipboardData);
            }
        }
        CloseClipboard();
    }
    return strData;
}

bool setClipboard(CString textToclipboard)
{
    bool success = true;

    if (OpenClipboard(NULL))
    {
        EmptyClipboard();
        size_t size = (textToclipboard.GetLength()+1) * sizeof(TCHAR);
        HGLOBAL hClipboardData = GlobalAlloc(NULL, size);
        if (hClipboardData)
        {
            TCHAR* pchData = (TCHAR*) GlobalLock(hClipboardData);
            if (pchData)
            {
                memcpy(pchData, (TCHAR*) textToclipboard.GetString(), size);
                GlobalUnlock(hClipboardData);
                SetClipboardData(CF_TEXT_T, hClipboardData);
            }
        }
        CloseClipboard();
    }
    return success;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T13:52:10.913

它们都是Unicode...

但在 Unicode 中，不止一个字节代表一个字符。例如，一个字符可能使用 2 个字节。所以：

当它是俄语时，字符串就像

```
 '\0'
                                                            ----
0x04 0x3F 0x04 0x40 0x04 0x38 0x04 0x32 0x04 0x35 0x04 0x42 0x00 0x20
~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~
    п         р         и        в          е         т       space 
```

它一直读到空格。

当它是英文时，字符串就像

```
'\0'
----
0x00 0x48 0x00 0x65 0x00 0x6C 0x00 0x6C 0x00 0x6F 0x00 0x20
~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~ ~~~~~~~~~
   H          e         l        l          o       space 
```

它什么也没读。（如果您先阅读，那是因为存储字节的顺序，LE 或 BE）

*注意：也许我在选择单词时不精确（Unicode，UTF，...）*

# php - mysql加载数据infile插入双引号

> ID：15362860
> 
> 赞同：3
> 
> 时间：2013-03-12T13:40:56.630
> 
> 标签：php, mysqli

嗨，我知道这个问题不仅是为了我，也是为了每个使用 mysql LOAD DATA INFILE 的人。

我只想知道为什么每次使用加载数据文件导入数据时都会收到这个（“”）双引号？来自 csv 的数据已成功添加到数据库中，但例如值中有一个双引号。例如。

"值1" | "值2" | “价值3”

有什么帮助吗？这是我的mysql脚本。

```
echo $mysql = "LOAD DATA LOCAL INFILE '".$path ."' 
        REPLACE INTO TABLE table
        FIELDS 
            TERMINATED BY ',' 
        LINES 
            TERMINATED BY '\\n'
        IGNORE 1 LINES 
        (`column1`, `column2`, `column3`, `column4`..)";

        $query = mysqli_query($link, $mysql) or die(mysqli_error($link)); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:50:49.870

我从您的问题中猜测您的 infile 值与此类似，

```
"column1","column2","column3","column4"
"column1a","column2a","column3a","column4a" 
```

由于在您的 mysql 语句中您只声明字段由 a 终止，`,`因此它将读取一个值，直到 mysql 引擎找到 a `,`，因此是 qoutes。

用于声明字段是否被某些东西包围的 mysql 语法如下所示；

```
FIELDS ENCLOSED BY '"' 
```

您的新查询看起来像，

```
"LOAD DATA LOCAL INFILE '".$path ."' 
    REPLACE INTO TABLE table
    FIELDS 
        TERMINATED BY ',',
        ENCLOSED BY '"'
    LINES 
        TERMINATED BY '\\n'
    IGNORE 1 LINES 
    (`column1`, `column2`, `column3`, `column4`..)" 
```

这告诉 mysql 引擎查找 之间的字符`"`并将该值作为字段值。

您可以在 mysql 网站上阅读有关它的更多信息。

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

希望这有帮助！

# javascript - 使用 ng-repeat 和嵌套循环添加行

> ID：15362868
> 
> 赞同：43
> 
> 时间：2013-03-12T13:41:17.880
> 
> 标签：javascript, angularjs

我正在寻找一种向表中添加行的方法。我的数据结构如下所示：

```
 rows = [
    { name : 'row1', subrows : [{ name : 'row1.1' }, { name : 'row1.2' }] },
    { name : 'row2' }
  ]; 
```

我想创建一个看起来像这样的表：

```
 table
     row1
     row1.1
     row1.2
     row2 
```

Angular js ng-repeat有可能吗？如果不是，那么这样做的“角度”方式是什么？

编辑：展平数组将是一个糟糕的解决方案，因为如果我可以迭代子元素，我可以在单元格、其他 css 类等中使用不同的 html 标签。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-07-08T18:33:19.310

一年多后，但找到了一种解决方法，至少针对两个级别（父亲-> 儿子）。
重复`tbody`一下：

```
<table>
  <tbody ng-repeat="row in rows">
    <tr>
      <th>{{row.name}}</th>
    </tr>
    <tr ng-repeat="sub in row.subrows">
      <td>{{sub.name}}</td>
    </tr>
  </tbody>
</table> 
```

据我所知，所有浏览器都支持`tbody`表格内的多个元素。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-04-29T15:16:38.467

3 年多后，我一直面临同样的问题，在写下指令之前，我尝试了这个，它对我来说效果很好：

```
<table>
    <tbody>
        <tr ng-repeat-start="row in rows">
            <td>
                {{ row.name }}
            </td>
        </tr>
        <tr ng-repeat-end ng-repeat="subrow in row.subrows">
            <td>
                {{ subrow.name }}
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-12T15:10:46.020

您将无法使用 ng-repeat 执行此操作。但是，您可以使用指令来执行此操作。

```
<my-table rows='rows'></my-table> 
```

[小提琴](http://jsfiddle.net/mrajcok/vGUsu/)。

```
myApp.directive('myTable', function () {
    return {
        restrict: 'E',
        link: function (scope, element, attrs) {
            var html = '<table>';
            angular.forEach(scope[attrs.rows], function (row, index) {
                html += '<tr><td>' + row.name + '</td></tr>';
                if ('subrows' in row) {
                    angular.forEach(row.subrows, function (subrow, index) {
                        html += '<tr><td>' + subrow.name + '</td></tr>';
                    });
                }
            });
            html += '</table>';
            element.replaceWith(html)
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-07-17T16:13:56.440

我有点惊讶，这么多人提倡自定义指令并创建由 $watch 更新的代理变量。

像这样的问题是 AngularJS 过滤器被制造出来的原因！

从文档：

```
A filter formats the value of an expression for display to the user. 
```

我们不打算操纵数据，只是将其格式化以便以不同的方式显示。因此，让我们创建一个过滤器，接收我们的 rows 数组，将其展平，然后返回展平后的行。

```
.filter('flattenRows', function(){
return function(rows) {
    var flatten = [];
    angular.forEach(rows, function(row){
      subrows = row.subrows;
      flatten.push(row);
      if(subrows){
        angular.forEach(subrows, function(subrow){
          flatten.push( angular.extend(subrow, {subrow: true}) );
        });
      }
    });
    return flatten;
}
}) 
```

现在我们只需要将过滤器添加到 ngRepeat：

```
<table class="table table-striped table-hover table-bordered">
  <thead>
    <tr>
      <th>Rows with filter</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="row in rows | flattenRows">
          <td>{{row.name}}</td>
      </tr>
  </tbody>
</table> 
```

如果需要，您现在可以自由地将您的表格与其他过滤器组合起来，例如搜索。

虽然多 tbody 方法很方便且有效，但它会弄乱任何依赖子行的顺序或索引的 css，例如“条纹”表，并且还会假设您没有在 tbody 中设置样式不想重复的方式。

这是一个小插曲：http: [//embed.plnkr.co/otjeQv7z0rifPusneJ0F/preview](http://embed.plnkr.co/otjeQv7z0rifPusneJ0F/preview)

编辑：我添加了一个子行值并在表中使用它来显示哪些行是子行，因为您表示担心能够做到这一点。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-12T13:49:12.193

是的，有可能：

控制器：

```
app.controller('AppController',
    [
      '$scope',
      function($scope) {
        $scope.rows = [
          { name : 'row1', subrows : [{ name : 'row1.1' }, { name : 'row1.2' }] },
          { name : 'row2' }
        ];

      }
    ]
  ); 
```

HTML：

```
<table>
  <tr ng-repeat="row in rows">
    <td>
      {{row.name}}
      <table ng-show="row.subrows">
        <tr ng-repeat="subrow in row.subrows">
          <td>{{subrow.name}}</td>
        </tr>
      </table>
    </td>
  </tr>
</table> 
```

[普朗克](http://plnkr.co/edit/ansc3q5qw34tTm6qceb4)

如果您不想要子表，请展平行（同时注释子行，以便能够区分）：

控制器：

```
function($scope) {
  $scope.rows = [
    { name : 'row1', subrows : [{ name : 'row1.1' }, { name : 'row1.2' }] },
    { name : 'row2' }
  ];

  $scope.flatten = [];
  var subrows;
  $scope.$watch('rows', function(rows){
    var flatten = [];
    angular.forEach(rows, function(row){
      subrows = row.subrows;
      delete row.subrows;
      flatten.push(row);
      if(subrows){
        angular.forEach(subrows, function(subrow){
          flatten.push( angular.extend(subrow, {subrow: true}) );
        });
      }
    });
    $scope.flatten = flatten;
  });

} 
```

HTML：

```
<table>
  <tr ng-repeat="row in flatten">
    <td>
      {{row.name}}
    </td>
  </tr>
</table> 
```

[普朗克](http://plnkr.co/edit/cYRAw39YgWV1tdJ9eesf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-14T18:43:59.330

这是一个例子。`peopeByCity`此代码打印数组中所有人的所有姓名。

TS：

```
export class AppComponent {
  peopleByCity = [
    {
      city: 'Miami',
      people: [
        {
          name: 'John', age: 12
        }, {
          name: 'Angel', age: 22
        }
      ]
    }, {
      city: 'Sao Paulo',
      people: [
        {
          name: 'Anderson', age: 35
        }, {
          name: 'Felipe', age: 36
        }
      ]
    }
  ]
} 
```

HTML：

```
<div *ngFor="let personsByCity of peopleByCity">
  <div *ngFor="let person of personsByCity.people">
    {{ person.name }}
  </div>
</div> 
```

# c# - How to notify to client side of asynchronous method completion in asp.net

> ID：15362875
> 
> 赞同：2
> 
> 时间：2013-03-12T13:41:36.230
> 
> 标签：c#, asp.net, asynchronous, delegates

I am new to delegates for asynchronous calling. I am using the following code to call a UploadVideo method asynchronously.

```
UploadVideoDelegate delUploadVideo;        
AsyncCallback objAsyncCallBack = new AsyncCallback(this.TocuhLogResult);        
IAsyncResult objIAsyncRes;        
delUploadVideo = new UploadVideoDelegate(UploadVideo);        
objIAsyncRes = delInsertTouchLogToDB.BeginInvoke(videos[videocount++],           objAsyncCallBack,     null) 
```

But, how can I notify that your upload is completed on client-side. Like showing a message that upload is Completed.

# php - php/mysql 中的更大值

> ID：15362876
> 
> 赞同：1
> 
> 时间：2013-03-12T13:41:42.863
> 
> 标签：php, mysql, select

我有一个搜索框，用户可以在其中搜索属性。在搜索框中有两个选择框。一种是最低价，一种是最高价。

如果用户选择最低价格 10 000 和最高价格 1 000 000，查询会是什么样子。

这是我的代码，但它似乎不起作用：

```
 SELECT * FROM property WHERE price > '%{$_POST['pricemin']}%' AND price < '%{$_POST['pricemax']}%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:44:09.353

首先，永远不要将用户输入的值直接放入查询中。您要求进行 SQL 注入攻击。其次，您为什么要`%`对数字进行通配符匹配 ( )？

```
SELECT col1, col2, col3 FROM property WHERE price BETWEEN $min AND $max; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:51:44.927

首先，`%value%`除非你使用`LIKE`. 其次，您应该真正使用准备好的语句：

```
if (isset($_POST['pricemin'], $_POST['pricemax'])) {
    $stmt = $db->prepare('SELECT * FROM property WHERE price > ? AND price < ?');
    $stmt->execute(array($_POST['pricemin'], $_POST['pricemax']));
    $results = $stmt->fetchAll(PDO::FETCH_ASSOC);
} 
```

以 PDO 为例；如果您没有 PDO 或 mysqli，请开始使用它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:48:34.393

好的，你需要先转义你的变量，所以试试这个

```
$pricemin = mysql_real_escape_string($_POST['pricemin']);
$pricemax = mysql_real_escape_string($_POST['pricemax']); 
```

然后我认为你错过了一个小于

```
SELECT * FROM property WHERE price > '$pricemin' AND price < '$pricemax' 
```

但是，如果您使用带有 php [http://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)的数据库，您应该查看 mysqli，因为`mysql_real_escape_string()`其他 mysql 功能已被贬值。

# java - 对 Lotus Domino xpages java 应用程序的更改不会传播到服务器

> ID：15362882
> 
> 赞同：0
> 
> 时间：2013-03-12T13:42:01.810
> 
> 标签：java, xpages, lotus-notes, lotus-domino

使用 Lotus Domino 8.5.2 Fixpack 3

标题总结了它。我有一个使用 java 的 xpages 应用程序。似乎我所做的任何 java 更改都不会在服务器上可见。对于某种缓存问题，这听起来很糟糕。应用程序在服务器上运行，我在服务器日志中看到 System.out.println 语句，但不要对这些语句或我添加的任何新语句进行任何更改。

代码设置为自动重建。尽管如此，看起来服务器永远不会看到更改。我是否需要一些特殊的方式来构建数据库（除了典型的 Rebuild All 之外）？我是否需要重置或重新启动 domino 服务器上的某些进程才能看到更改？

任何想法或想法将不胜感激。

**编辑 1**

我要回到这个项目，因此，这个问题。我收到的具体错误消息是：

```
 [6815810:00012-05659] 03/19/2013 09:27:01   HTTP JVM: Managedbean Calendar could not be created Can't instantiate class: 'calendar.CalendarServices'.. java.lang.ClassNotFoundException: class java.lang.ClassNotFoundException: calendar.CalendarServices. For more detailed inform
    ation, please consult error-log-0
    [6815810:00012-05659] 03/19/2013 09:27:01   HTTP JVM: xml located in /local/notesdata/domino/workspace/logs
    [6815810:00012-05659] 03/19/2013 09:27:01   HTTP JVM: com.ibm.xsp.exception.EvaluationExceptionEx: Error while executing JavaScript action expression 
```

我尝试取消选中自动构建并进行清理->全部重建。我已经尝试再次签署 nsf。我已经确保我在 acl 上。而且，按照建议，我已经尝试过

```
 restart task http 
```

通过实时控制台命令。无论我做什么，我都会收到此错误。奇怪的是，这个项目只是另一个工作正常的项目的副本 --> 粘贴（重命名）。所以，该项目有效......直到我改变并重新编译......

上述异常指向的日志不是很有帮助。上面写着：

```
<CommonBaseEvent creationTime="2013-03-05T09:01:03.254-06:00" globalInstanceId="EL0a04a8b800013d3af27da200000008" msg="Managedbean Calendar could not be created Can&apos;t instantiate class: &apos;calendar.CalendarServices&apos;.. java.lang.ClassNotFoundException: class java.lang.ClassNotFoundException: calendar.CalendarServices" severity="50" version="1.0.1">
    <extendedDataElements name="CommonBaseEventLogRecord:level" type="noValue">
        <children name="CommonBaseEventLogRecord:name" type="string"> 
            <values>SEVERE</values>
        </children>
    </extendedDataElements>
    <extendedDataElements name="CommonBaseEventLogRecord:sourceClassName" type="string">
        <values>com.sun.faces.application.ApplicationAssociate</values>
    </extendedDataElements>
    <extendedDataElements name="CommonBaseEventLogRecord:sourceMethodName" type="string">
        <values>createAndMaybeStoreManagedBeans</values>
    </extendedDataElements>
    <extendedDataElements name="CommonBaseEventLogRecord:Exception" type="string">
        <values>javax.faces.FacesException: Can&apos;t instantiate class: &apos;calendar.CalendarServices&apos;.. java.lang.ClassNotFoundException: class java.lang.ClassNotFoundException: calendar.CalendarServices&#xA;&#x9;at com.sun.faces.config.ManagedBeanFactory.newInstance(ManagedBeanFactory.java:234)&#xA;&#x9;at com.sun.faces.application.ApplicationAssociate.createAndMaybeStoreManagedBeans(ApplicationAssociate.java:291)&#xA;&#x9;at com.sun.faces.el.VariableResolverImpl.resolveVariable(VariableResolverImpl.java:135)&#xA;&#x9;at com.ibm.xsp.el.VariableResolverImpl.resolveVariable(VariableResolverImpl.java:71)&#xA;&#x9;at com.ibm.xsp.javascript.ServerSideLocalObject.resolveVariable(ServerSideLocalObject.java:97)&#xA;&#x9;at com.ibm.xsp.javascript.ServerSideLocalObject.resolveAttribute(ServerSideLocalObject.java:73)&#xA;&#x9;at com.ibm.xsp.javascript.AbstractLocalObject._get(AbstractLocalObject.java:119)&#xA;&#x9;at com.ibm.xsp.javascript.AbstractLocalObject.getPropertyReference(AbstractLocalObject.java:101)&#xA;&#x9;at com</values>
        <values>.ibm.jscript.engine.ProgramContext.findGlobalScopeIdentifier(ProgramContext.java:143)&#xA;&#x9;at com.ibm.jscript.engine.ProgramContext.findIdentifier(ProgramContext.java:134)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTIdentifier.interpret(ASTIdentifier.java:105)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTMember.interpret(ASTMember.java:106)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTCall.interpret(ASTCall.java:88)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTArgumentList.interpretArguments(ASTArgumentList.java:63)&#xA;&#x9;at com.ibm.jscript.types.FBSObject.call(FBSObject.java:153)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTCall.interpret(ASTCall.java:175)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTIf.interpret(ASTIf.java:85)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTTry.interpret(ASTTry.java:109)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTProgram.interpret(ASTProgram.java:119)&#xA;&#x9;at com.ibm.jscript.ASTTree.ASTProgram.interpretEx(ASTProgram.java:139)&#xA;&#x9;at com.ibm.jscript.JSExpression._interpretExpression(JSExpression.java:435)</values>
        <values>&#xA;&#x9;at com.ibm.jscript.JSExpression.access$1(JSExpression.java:424)&#xA;&#x9;at com.ibm.jscript.JSExpression$2.run(JSExpression.java:414)&#xA;&#x9;at java.security.AccessController.doPrivileged(AccessController.java:284)&#xA;&#x9;at com.ibm.jscript.JSExpression.interpretExpression(JSExpression.java:410)&#xA;&#x9;at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:251)&#xA;&#x9;at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:234)&#xA;&#x9;at com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:220)&#xA;&#x9;at com.ibm.xsp.binding.javascript.JavaScriptMethodBinding.invoke(JavaScriptMethodBinding.java:111)&#xA;&#x9;at com.ibm.xsp.component.UIViewRootEx.invokePhaseMethodBinding(UIViewRootEx.java:1705)&#xA;&#x9;at com.ibm.xsp.controller.FacesControllerImpl.invokePhaseMethodBinding(FacesControllerImpl.java:444)&#xA;&#x9;at com.ibm.xsp.controller.FacesControllerImpl.access$0(FacesControllerImpl.java:438)&#xA;&#x9;at com.ibm.xsp.controller.FacesControllerImpl$</values>
        <values>ViewPhaseListener.afterPhase(FacesControllerImpl.java:506)&#xA;&#x9;at com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:218)&#xA;&#x9;at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:120)&#xA;&#x9;at com.ibm.xsp.controller.FacesControllerImpl.render(FacesControllerImpl.java:264)&#xA;&#x9;at com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:219)&#xA;&#x9;at com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:193)&#xA;&#x9;at com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:154)&#xA;&#x9;at com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137)&#xA;&#x9;at com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:86)&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:538)&#xA;&#x9;at com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1151)&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServl</values>
        <values>et(ComponentModule.java:803)&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:758)&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:527)&#xA;&#x9;at com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1135)&#xA;&#x9;at com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:523)&#xA;&#x9;at com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:352)&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:304)&#xA;&#x9;at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:261)&#xA;&#x9;at com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:291)&#xA;Caused by: java.security.PrivilegedActionException: java.lang.ClassNotFoundException: class java.lang.ClassNotFoundException: calendar.CalendarServices&#xA;&#x9;at java.security.AccessController</values>
        <values>.doPrivileged(AccessController.java:255)&#xA;&#x9;at com.sun.faces.config.ManagedBeanFactory.newInstance(ManagedBeanFactory.java:216)&#xA;&#x9;... 51 more&#xA;Caused by: java.lang.ClassNotFoundException: class java.lang.ClassNotFoundException: calendar.CalendarServices&#xA;&#x9;at java.beans.Beans.instantiate(Beans.java:194)&#xA;&#x9;at java.beans.Beans.instantiate(Beans.java:75)&#xA;&#x9;at com.sun.faces.config.ManagedBeanFactory$1.run(ManagedBeanFactory.java:222)&#xA;&#x9;at java.security.AccessController.doPrivileged(AccessController.java:251)&#xA;&#x9;... 52 more&#xA;</values>
    </extendedDataElements>
    <sourceComponentId component="Expeditor 6.2" componentIdType="ProductName" instanceId="" location="<server here>" locationType="Hostname" subComponent="com.sun.faces.application.ApplicationImpl" threadId="0" componentType="http://www.w3.org/2001/XMLSchema-instance"/>
    <situation categoryName="ReportSituation">
        <situationType xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ReportSituation" reasoningScope="INTERNAL" reportCategory="LOG"/>
    </situation>
</CommonBaseEvent> 
```

一如既往，一分钱你的想法。

另外，感谢大家的反馈。对不起，我离开了一段时间，忽略了这个问题。我真的很想弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:31:53.857

你没有提到*Project -> Clean*所以先试试。

我曾经遇到过由类或包名中的下划线引起的类似问题。

如果 XPages 也存在问题，那么这是一个一般的构建问题。至少在具有不同 Designer 和/或 ExtLib 版本的开发人员修改应用程序时会发生这种情况。当我遇到这个问题时，解决它的唯一方法是创建一个新应用程序并在那里复制粘贴所有内容。在我们的案例中，其他开发人员从未遇到过问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:22:22.417

这很愚蠢。我的 src 文件夹不在构建路径上。这导致了所有问题。

# c++ - Using OSG's osgViewerQt example with Qt signals/slots

> ID：15362883
> 
> 赞同：3
> 
> 时间：2013-03-12T13:42:09.623
> 
> 标签：c++, qt4, signals-slots, openscenegraph

I have already posted this in the OSG mailing list, but the mailing list seems to be a bit slow.

Anyway, I'm trying to modify the [osgViewerQt example](http://www.openscenegraph.org/projects/osg/browser/OpenSceneGraph/trunk/examples/osgviewerQt/osgviewerQt.cpp) by adding a new class of my own that will contain the viewer. The design is:

*   **wrapper.h**: Defines class *Wrapper*. It inherits from *QMainWindow* and has a *QDockWidget* where the *ViewerWidget* will be attached.
*   **viewer.h**: Defines *ViewerWidget* class. It's the class from the example, with a few mods by me.
*   **prueba_qt.cpp**: Main function and where a QApplication is created. A Wrapper object is created here.

The project compiles, but when I execute it, I get an error:

```
QWidget: Must construct a QApplication before a QPaintDevice* 
```

If I remove the *Q_OBJECT* line, the *signal* and the *slot* from *wrapper.h* and compile the files from the terminal using

```
g++ -IE:/osg-3.0.1/install/include -LE:/osg-3.0.1/install/bin -IC:/Qt64/4.8/include -LC:/Qt64/4.8/bin -losgViewer -lOpenThreads -losgDB -losg -losgGA -losgQt -lQtCore4 -lQtGui4 prueba_qt.cpp 
```

I can execute the app.

Can you please tell me what can I do to make this work? I've struggling all morning but couldn't find the solution.

Thanks for your time!

PS: SO is Windows 7 64 bits # MingW compiler # Qt 4.8 # OSG 3.0.1

PS2: Here're the files I used in this project, including the *pro* file from qmake:

**wrapper.h**

```
 #ifndef Wrapper_hpp
    #define Wrapper_hpp

    #include "viewer.h"
    #include <QtGui/QMainWindow>
    #include <QtGui/QDockWidget>

    class Wrapper: public QMainWindow {
     Q_OBJECT
    private:
      ViewerWidget* view;
      QDockWidget* dock;
    public:
      Wrapper(void) {
        view = new ViewerWidget();
        dock = new QDockWidget;
        dock->setWidget( view );
        dock->setGeometry( 100, 100, 800, 600 );
        dock->setAllowedAreas(Qt::RightDockWidgetArea);
        addDockWidget(Qt::RightDockWidgetArea, dock);
        dock->show();
      }
      void Do(void) { view->Do(); }
      void Add(void) { view->Add(); }
      virtual ~Wrapper(void) {}
      public slots:
        void MySlot(void) {}
      signals:
        void MySignal(void);
    };
    #endif 
```

**wrapper.cpp**

(This exists only because I read in the Qt forum that *moc* can only parse *cpp* files and thus one is needed for the signal/slot mechanism.)

```
 #include "wrapper.h"

    Wrapper::Wrapper(void) {
        view = new ViewerWidget();
    //    view->setGeometry( 100, 100, 800, 600 );
        dock = new QDockWidget;
        dock->setWidget( view );
        dock->setGeometry( 100, 100, 800, 600 );
        dock->setAllowedAreas(Qt::RightDockWidgetArea);
        addDockWidget(Qt::RightDockWidgetArea, dock);
        dock->show();
    } 
```

**prueba_qt.cpp**

```
#include <QtGui/QApplication>
#include <iostream>
#include "wrapper.h"

int main( int argc, char** argv ) {
    osg::ArgumentParser arguments(&argc, argv);
    QApplication app(argc, argv);
    Wrapper wrap;
    wrap.resize(800,600);
    wrap.setWindowTitle("Cow");
    wrap.showNormal();
    wrap.Do();    
    return app.exec();
} 
```

**prueba_qt.pro**

```
 ######################################################################
    # Automatically generated by qmake (2.01a) mar 12\. mar 13:45:28 2013
    ######################################################################
    QT += core gui
    TEMPLATE = app
    TARGET = 
    DEPENDPATH += .
    INCLUDEPATH += . E:/osg-3.0.1/install/include
    LIBS += -LE:/osg-3.0.1/install/bin -losg -lOpenThreads -losgDB -losgGA -losgQt -losgViewer

    # Input
    HEADERS += viewer.h wrapper.h
    SOURCES += prueba_qt.cpp wrapper.cpp 
```

**viewer.h:** This is quite big, so I uploaded it to [pastebin](http://pastebin.com/4FPTfGkL)

**EDIT #1**

I have set *OSG_NOTIFY_LEVEL* to *DEBUG_INFO* and got [this](http://pastebin.com/xvqKV3eG) humongous output. The line with the error is:

```
FindFileInPath() : trying C:\cygwin\bin\osgPlugQWidget: Must construct a QApplication before a QPaintDevice 
```

**EDIT #2**

The signal and slot were missing in the code. I have just added them to *wrapper.h* along with the call to *Q_OBJECT*.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:12:51.600

小憩片刻后，我再次修改了项目中使用的库。问题是其中一些库处于调试模式，而一些处于发布模式。使用信号和插槽时，`moc`发疯了。

在构建`OSG`调试库之后，我再次尝试了我的小例子并工作了。

所以它完成了！

# sas - When to use IF or %IF in SAS

> ID：15362884
> 
> 赞同：3
> 
> 时间：2013-03-12T13:42:16.030
> 
> 标签：sas, sas-macro

I am new to SAS and having a hard time figuring out when should the simple If-Then-else and when should %IF-%THEN-%ELSE should be used. As an example code below:

```
%let inFile = %scan(&sysparm, 1, " ");
%macro read_data(infile);
data want;
infile "&infile" LRECL=1000;
retain fdate;
if _n_ = 1 then do;
  input Agency $ Status $ Num $ fdate sdate;
end;
else do;
   %if fdate < 20130428  %then
   input
   @1   poolno                  $6.
   @7   factor                  9.8 @;
   %else
   input
   @1   rectype                 $1
   @3   poolno                  $6.
   @9   factor                  9.8 @;

   @18 pfactor                 9.8;
output;
end;
drop Agency Status Num sdate;
run;
proc print data=want;
run;
%mend read_data;
%read_data(&inFile); 
```

I am trying to get the first line(header) and taking the parameter fdate. Based on the value of this parameter, I am parsing the subsequent input lines differently. But this does not seem to work, as only the second input part runs (always getting parameter 'rectype' in output).

Any suggestions as what i might be doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:17:37.003

我看到您将 C++ 作为您的标签之一，并且您刚刚开始使用 SAS。因此，我将尝试提供针对您的背景的答案。

理解 SAS 宏命令与 DATA 步中的命令或多个具有相同名称的 proc 中的命令（如**%if**与**if**）之间的区别的最简单方法是将 SAS 宏命令视为等同于 C/C++ 预处理器(CPP) 指令。CPP 和 SAS MAcro 都是宏语言，虽然它们不是完全一样的语言，但它们有两个重要且最初令人困惑的特征：它们是文本处理器；并且它们在处理主代码之前作为单独的步骤执行。

这种近似在某些地方会失效，但作为具有 C/C++ 背景的 SAS 初学者，这是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:14:50.317

宏语句 %if 在任何数据步语句之前编译。这意味着您通常无法在逻辑表达式中使用数据步长变量。宏处理器在编译宏语句时，数据步长变量还不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:43:57.670

如果你这样做`%if fdate < 20130428`SAS 比较文字`fdate`而`20130428`不是值 od`fdate`和`20130428`.

如果你有一个名为的宏变量`fdate`，你会这样做`%if &fdate < 20130428`。

在您的情况下`fdate`，是数据集中的变量，因此请使用`if`not `%if`，但您似乎正在尝试使用宏创建数据步骤，因此`if`在这种情况下仅使用可能无法正常工作（取决于您要获得什么）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:07:10.237

在上面的示例中，%IF 条件基于数据步变量/值。这应该表明它可以使用数据步“if”而不是 %IF 来实现。

您已经在上一个问题中收到了对此的答案，[https://stackoverflow.com/a/15341502/108797](https://stackoverflow.com/a/15341502/108797)

# java - Java applet : How to access a file without getting an error?

> ID：15362887
> 
> 赞同：0
> 
> 时间：2013-03-12T13:42:29.023
> 
> 标签：java, file, applet, ini4j

I'm using ini4j in my program and it works perfectly when i launch it. The problem is when I launch it as an applet (from a website). Before I use ini4j, the applet worked but now i get this :

```
Tue Mar 12 14:19:26 CET 2013 ERROR:access denied ("java.util.PropertyPermission" "user.dir" "read")
java.security.AccessControlException: access denied ("java.util.PropertyPermission" "user.dir" "read")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
    at java.lang.System.getProperty(Unknown Source)
    at java.io.Win32FileSystem.getUserPath(Unknown Source)
    at java.io.Win32FileSystem.resolve(Unknown Source)
    at java.io.File.getAbsolutePath(Unknown Source)
    at java.io.File.getAbsoluteFile(Unknown Source)
    at java.io.File.toURI(Unknown Source)
    at org.ini4j.Ini.load(Ini.java:114)
    at org.ini4j.Ini.load(Ini.java:99)
    at org.ini4j.Ini.<init>(Ini.java:69)
    at GameState.init(GameState.java:53)
    at Main.initStatesList(Main.java:29)
    at org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164)
    at org.newdawn.slick.AppletGameContainer$Container.initApplet(AppletGameContainer.java:272)
    at org.newdawn.slick.AppletGameContainer$ContainerPanel.initGL(AppletGameContainer.java:229)
    at org.newdawn.slick.AppletGameContainer$ContainerPanel.start(AppletGameContainer.java:216)
    at org.newdawn.slick.AppletGameContainer$1.run(AppletGameContainer.java:92) 
```

The code when it happen :

```
try {
            ini = new Ini(new File("res/config.ini"));
        } catch (InvalidFileFormatException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# android - Get run duration of running task

> ID：15362888
> 
> 赞同：3
> 
> 时间：2013-03-12T13:42:35.130
> 
> 标签：android, process

After I get a list of running tasks, I can get almost any information I would need. However, I couldn't find how to get how long the task has been running. I even tried the `metaData` `Bundle` that gets returned with the ActivityInfo, but that is null even though I explicitly request it. Is this possible at all?

I get the list of tasks as follows:

```
ActivityManager am = (ActivityManager) getSystemService(Activity.ACTIVITY_SERVICE);
List<RunningTaskInfo> list = am.getRunningTasks(100);
PackageManager pm = getPackageManager();

for (RunningTaskInfo thisInfo : list) {
    try {
        ComponentName componentName = thisInfo.baseActivity;
        ActivityInfo activityInfo = pm.getActivityInfo(componentName, PackageManager.GET_META_DATA);

        // this is null for some reason
        Bundle metaData = activityInfo.applicationInfo.metaData;
    } catch (NameNotFoundException e) {
        Log.e("AppChecker", "Oops");
        e.printStackTrace();
    }
} 
```

# .net - Bloomberg API Option Valuation

> ID：15362889
> 
> 赞同：2
> 
> 时间：2013-03-12T13:42:43.067
> 
> 标签：.net, bloomberg, blpapi

In Bloomberg, to value an option I can enter something like `IBM US Equity OVME S C180 > OVME` - Which loads a page which has valued an option for me. I just want to get this data back via the API. The API seems really unintuitive to me so any help will be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:31:01.487

我没有做过期权估值，但我做过债券定价。完成这项工作的最快方法是要求彭博帮助台通过 Excel 表格制作期权定价屏幕的模型`F1``F1`（他们可能已经有一个......）

然后，您可以查看它们覆盖哪些字段值以对应于终端定价器上的每个控件，并根据需要调用 API。当您直接访问时，`OVME`您可能会使用可用的最新 BVAL 价格对该选项进行定价，通常您希望使用自己的价格/体积来定价。

# php - PHP：如果数字（带逗号），将其转换为正确的数字格式（带点）

> ID：15362898
> 
> 赞同：8
> 
> 时间：2013-03-12T13:43:23.030
> 
> 标签：php, regex, number-formatting

我有一个混合值数组：

```
$row = array('Unspecified risk','Yes','8','3','2','13','none','-1,49','-2,51','-1,46','-1,54'); -1,94   -1,55 
```

如您所见，它包含文本以及正负逗号数字。

我需要将数值转换为正确的数字格式并保持文本值不变。

现在我正在遍历这些值：

```
foreach ($row as $value) {
    // If $value is numeric, convert it to the 
    // right number format for use with MySQL (decimal(10,2))
    // If not, leave it be.
} 
```

我调查过两个相关问题，但找不到合适的解决方案。

*   [将逗号作为小数点的数字转换为浮点数](https://stackoverflow.com/questions/4325363/converting-a-number-with-comma-as-decimal-point-to-float)
*   [我需要数值的php正则表达式，包括“-”和“，”](https://stackoverflow.com/questions/6994704/i-need-php-regular-expression-for-numeric-value-including-and?lq=1)

谁能提供一个实际的例子？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T13:54:21.703

您不需要使用正则表达式。

使用`str_replace()`as 您需要替换`','`for a `'.'`，然后使用`intval()`or`floatval()`函数来获取数值。您还可以使用`strstr()`来查找`'.'`并决定是否使用`intval()`或`floatval()`

例子：

```
$row = array('Unspecified risk', 'Yes', '8', '3', '2', '13', 'none', '-1,49', '-2,51', '-1,46', '-1,54');

    function toNumber($target){
        $switched = str_replace(',', '.', $target);
        if(is_numeric($target)){
            return intval($target);
        }elseif(is_numeric($switched)){
            return floatval($switched);
        } else {
            return $target;
        }
    }

    $row = array_map('toNumber', $row);

    var_dump($row); 
```

我们使用 str_replace() 来替换逗号的点，这样它是一个国际符号浮点数，即使它在字符串上，这样以后我们可以用`is_numeric()`< 来检查它是否是数字——这个函数很棒，因为它从字符串是否是数字，无论是整数还是浮点数等。

我们使用 is_numeric 来检查值是整数浮点数还是文本，并使用`intval()`or返回对应`floatval()`的值（没有应用替换的值不会作为有效数字返回，只有在切换 , 和 . 后才会返回 true 作为数字） .

我们用于`$row = array_map('toNumber', $row);`将更改应用到数组。

利润xD

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:17:32.310

```
$row = array('Unspecified risk','Yes','8','3','2','13','none','-1,49','-2,51','-1,46','-1,54');
    foreach($row as $key => $var) {
        if(strstr($var, ",") && !is_numeric($var)) {
            $var1 = str_replace(",","", $var);
            if(is_numeric($var1)) {
                $decimal = strstr($var, ',', TRUE);
                $digits = str_replace($decimal, "", $var1);
                $finalValue =  $digits * pow(10,$decimal);
                $row[$key] = $finalValue;
            }
        }
    }
    echo "<pre>"; print_r($row); 
```

注意：这适用于 php 5.3 或 php 5.3+

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-08T19:33:59.003

这么多年后我才做出回应，因为我发现所提供的任何解决方案都不够可靠。

如果字符串包含带有逗号作为小数分隔符的浮点数，则这是一个更严格的测试，如果是，则将其转换。如果需要，它还会删除数字周围的空格。它并没有真正测试格式错误的数字。

```
if( preg_match('/^\s*[0-9\.]*,\d*\s*$/', $str)) 
    return (float)str_replace(",",".",str_replace(".","",trim($str)));  
else
    return $str ; 
```

如果你知道一个数值总是有一个欧洲符号（所以没有逗号的 1.234 也应该转换为 1234），它应该是：

```
if( preg_match('/^\s*[0-9\.]*,?\d*\s*$/', $str)) 
    return (float)str_replace(",",".",str_replace(".","",trim($str)));  
else
    return $str ; 
```

如果您想要一个真正严格的测试，没有格式错误的数字（例如以千位分隔符开头），并且千位分隔符之间仅使用三位数字（但并非所有国家/地区都使用三位，例如印度！）：

```
if( preg_match('/^\s*\d{0,3}((?<=\d)\.\d{3})*,?\d*\s*$/', $str)) 
    return (float)str_replace(",",".",str_replace(".","",trim($str)));  
else
    return $str ; 
```

最后，如果您想更加严格并且不希望数字能够以逗号开头或结尾（“1.234”或“,17”，在某些情况下被认为是正确的），它变成

```
if( preg_match('/^\s*\d{1,3}((?<=\d)\.\d{3})*(,\d+)*\s*$/', $str)) 
    return (float)str_replace(",",".",str_replace(".","",trim($str)));  
else
    return $str ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:39:17.143

用于`is_numeric`测试和`number_format`格式化：

```
foreach ($row as &$value) {
    $number = str_replace(',', '.', $value);
    if (is_numeric($number)) {
        $value = number_format($number, 2, '.', '');
    }
}
unset($value); 
```

# php - 在数据库中获取 id 以在下一页上提取相同的数据

> ID：15362900
> 
> 赞同：0
> 
> 时间：2013-03-12T13:43:28.787
> 
> 标签：php, mysql, database, get

我有一个提交多个值的表单。当插入到我的数据库中的表中时，它会在我的数据库中创建一个唯一的 ID（主键）。如何在将表单操作发送到的下一页上检查相同的唯一 ID？

这是我的表单代码。我不想让你们与我所有的表单输入混淆，所以我只是把这些元素放在这里。

```
<form action='selectItems.php' method='post' enctype="multipart/form-data" id='tradeForm'>
<input type='submit' name='submit' value='Go to next step'></input>
</form> 
```

我会通过 GET 在表单操作上附加 id 吗？如果是这样，怎么做？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:08:26.700

采用

mysql_insert_id()

此函数返回您最后插入的 id。

检索上一个查询（通常是 INSERT）为 AUTO_INCREMENT 列生成的 ID。

# mysql - MYSQL 语法，用于将数据从另一个不同的表插入到表中

> ID：15362902
> 
> 赞同：0
> 
> 时间：2013-03-12T13:43:29.587
> 
> 标签：mysql

这可能很明显，但由于我没有任何经验，我不知道该怎么做。这是问题；假设我有带有字段 id、名称、时间、价格和说明的 table2。此外，还有另一个 table1 有名称、时间和价格。如果价格高于某个阈值，我想从 table1 插入数据，同时作为解释我想要“价格高于阈值”。任何人都可以建议我这样做吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:56:43.167

试试这个...

```
INSERT INTO `table2` (`name`, `time`, `price`, `explanation`)
SELECT `name`, `time`, `price`, 'The price is above threshold'
FROM `table1`
WHERE `price` > 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:45:45.460

```
NSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
[INTO] tbl_name [(col_name,...)]
SELECT ...
[ ON DUPLICATE KEY UPDATE col_name=expr, ... ] 
```

使用`INSERT ... SELECT`，您可以从一个或多个表中快速将许多行插入到一个表中。例如：

插入 tbl_temp2 (fld_id) 从 tbl_temp1 中选择 tbl_temp1.fld_order_id，其中 tbl_temp1.fld_order_id > 100；

以下条件适用于`INSERT ... SELECT`语句： [http ://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:47:40.730

```
INSERT table1 (name, time, price)
SELECT name, time, price
FROM table2
WHERE price > 120 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:50:18.107

您使用 INSERT 语句并列出要插入的字段，然后使用 SELECT 语句来填充字段。这是一个链接：[http](http://dev.mysql.com/doc/refman/5.5/en/insert.html) ://dev.mysql.com/doc/refman/5.5/en/insert.html 。

例子：

```
INSERT INTO insert_tablename (field1, field2, field3)

SELECT  field1, field2, field3

< The rest of your select statement > 
```

# java - Failed validation during AJAX form submission breaks AJAX

> ID：15362906
> 
> 赞同：0
> 
> 时间：2013-03-12T13:43:37.350
> 
> 标签：java, ajax, jsf-2, primefaces, dialog

Okay, so I have read through stackoverflow and various other portions of the net for a few days, and have not found a solution yet that fixes my issue.

Basically, I have an `h:form` in a `p:dialog` with two required fields. When the fields are both filled in, the form successfully submits and the dialog closes. When either or both fields are left blank, required field validation fails and updates the `h:messages` component in the `p:dialog` with the appropriate required messages. However, also when validation fails, the AJAX call seems to never "finish" and prevents subsequent calls from being executed. This is seen evident by my `p:ajaxStatus` component never disappearing from the screen, indicating that *something* is hanging *somewhere*. This is remedied by refreshing the page, at which point all other AJAX components begin to function again.

Additionally, I will note that this `p:dialog` is in a `ui:define` in a `ui:composition`, that dumps it into a master template. It is **not** nested within another `h:form`.

```
<p:dialog id="dlgDecision"
                  header="Decision"
                  widgetVar="dialogDecision"
                  modal="false"
                  resizable="false"
                  appendToBody="true">
            <h:form id="fDlgDecision">
                <h:messages id="msgDlgDecision" binding="#{msgform.messages}" errorClass="errormsg" infoClass="infomsg1" layout="table"/>
                <h:outputFormat rendered="#{studentdetailsform.decisionAction == 'A'}">
                    <h:outputText value="Select an accept and admit code."/>
                </h:outputFormat>
                <h:outputFormat rendered="#{studentdetailsform.decisionAction == 'C'}">
                    <h:outputText value="Select a cancel and reason code."/>
                </h:outputFormat>
                <h:panelGrid columns="1">
                    <h:selectOneMenu id="apdcCode"
                                     value="#{studentDetails.apdcCode}"
                                     required="true"
                                     requiredMessage="Please choose a decision code.">
                        <f:selectItem itemLabel="Select Decision Code"/>
                        <f:selectItems value="#{apdcCodes.apdcCodeList}"
                                       var="apdc"
                                       itemValue="#{apdc.apdcCode}"
                                       itemLabel="#{apdc.apdcCode} - #{apdc.apdcDesc}"/>
                    </h:selectOneMenu>
                    <h:selectOneMenu id="admtCode"
                                     value="#{studentDetails.admtCode}"
                                     required="#{studentdetailsform.decisionAction == 'A'}"
                                     requiredMessage="Please choose an admit code."
                                     rendered="#{studentdetailsform.decisionAction == 'A'}">
                        <f:selectItem itemLabel="Select Admit Code"/>
                        <f:selectItems value="#{admtCodes.admtCodeList}"
                                       var="admt"
                                       itemValue="#{admt.admtCode}}"
                                       itemLabel="#{admt.admtCode} - #{admt.admtDesc}"/>
                    </h:selectOneMenu>
                    <h:selectOneMenu id="wrsnCode"
                                     value="#{studentDetails.wrsnCode}"
                                     required="#{studentdetailsform.decisionAction == 'C'}"
                                     requiredMessage="Please choose a reason code."
                                     rendered="#{studentdetailsform.decisionAction == 'C'}">
                        <f:selectItem itemLabel="Select Reason Code"/>
                        <f:selectItems value="#{wrsnCodes.wrsnCodeList}"
                                       var="wrsn"
                                       itemValue="#{wrsn.wrsnCode}"
                                       itemLabel="#{wrsn.wrsnCode} - #{wrsn.wrsnDesc}"/>
                    </h:selectOneMenu>
                    <p:commandButton id="decisionSubmit"
                                     value="Submit Decision"
                                     type="submit"
                                     action="#{mainform.saveDecision}"
                                     ajax="true"
                                     partialSubmit="true"
                                     process="@form"
                                     update="@form msgDlgDecision"
                                     oncomplete="if (!args.validationFailed) dialogDecision.hide()"/>
                </h:panelGrid>
            </h:form>
        </p:dialog> 
```

Some things I have already done in my debugging and troubleshooting:
- Moved the `h:form` into the `p:dialog`
- Made the backing bean with the values for the `rendered` attribute on the required fields `ViewScoped` (was having an issue with only some of the required messages showing, this resolved this problem)
- Added `appendToBody="true"` to `p:dialog`
- Added `if (!args.validationFailed)` to the `oncomplete` event of `p:dialog`
- Tried making the required fields NOT conditional (removed `rendered` attributes) to be sure this wasn't being caused by failed validation on non-rendered components (grasping at straws...)

**EDIT:** Here is a console dump from Chrome. Javascript error gets thrown when submitting the form with null required fields.

```
Uncaught SyntaxError: Unexpected token { jquery.js:14
bG.extend.parseJSON jquery.js:14
PrimeFaces.ajax.AjaxUtils.handleResponse primefaces.js:1
PrimeFaces.ajax.AjaxResponse primefaces.js:1
j.success primefaces.js:1
bZ jquery.js:14
b7.fireWith jquery.js:14
ca jquery.js:21
bZ 
```

**EDIT 2:** Below are the only two JavaScript imports, both of which are in my template that is applied to the page via the `ui:define` and `ui:composition` mentioned above.

```
<h:outputScript library="primefaces" name="jquery/jquery.js" />
        <script type="text/javascript" src="#{request.contextPath}/resources/scripts/jscript.js" /> 
```

The first import will force Primefaces to import jQuery into the page, even if there are no components on the page that utilize JavaScript. This is to allow my custom scripts in `jscript.js` to use jQuery reliably.

**Other information:**
JSF 2.1
Primefaces 3.4.2
Tomcat 6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:12:28.617

不要手动导入 jQuery.js，因为这已经由 PrimeFaces 隐式完成（它在后台使用 jQuery）。您可以删除该行。

您还应该看到一些导入自定义 js 文件`h:outputScript`的示例，例如：

```
<h:outputScript library="scripts" name="jscript.js" /> 
```

但这可能不是您的问题的原因，这只是提示更好的 JSF 设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T11:07:25.517

我在我的应用程序中遇到了完全相同的问题。真正的问题是重复的 jar 问题。

我的应用程序中有两个 primefaces jar，一个在 WEB-INF/lib 目录下，另一个在 ear/lib 目录下。一旦我删除了 WEB-INF 下的那个，一切都开始按预期工作。

您可以通过搜索 js 异常在网上找到解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T22:51:23.787

今天，在我下载 PrimeFaces 4.0 快照 (2013-05-09) 并测试我的应用程序后，Google Chrome 中出现了类似的错误。

基本上，我必须从通过 JSON 从 bean 发送到 p:schedule 的数据中删除单引号。由于错误提到了“解析 JSON”和“意外的 '”（意外的单引号），我转到数据的数据表视图（而不是 p:schedule）并发现某些数据嵌入了单引号。所以，我从数据中删除了单引号，这为我解决了这个问题。

请点击下面的论坛主题网址。

[PF 4.0 SNAPSHOT 2013-05-09：计划不工作](http://forum.primefaces.org/viewtopic.php?f=3&t=30283)

# c - C script running as cron giving permission denied error

> ID：15362908
> 
> 赞同：0
> 
> 时间：2013-03-12T13:43:38.793
> 
> 标签：c, cron

I have a .c file compiled and would like to run via a cron job but I end up getting this error:

```
/bin/sh: /usr/local/bin/get1Receive.c: Permission denied. 
```

What is causing this error and how do I fix it?

Should I be running the `.c` file in cron or a different compiled file?

Results from /tmp/myvars

```
GROUPS=()
HOME=/root
HOSTNAME=capture
HOSTTYPE=x86_64
IFS='
'
LOGNAME=root
MACHTYPE=x86_64-redhat-linux-gnu
OPTERR=1
OPTIND=1
OSTYPE=linux-gnu
PATH=/usr/bin:/bin
POSIXLY_CORRECT=y
PPID=11086
PS4='+ '
PWD=/root
SHELL=/bin/sh
SHELLOPTS=braceexpand:hashall:interactive-comments:posix
SHLVL=1
TERM=dumb
UID=0
USER=root
_=/bin/sh 
```

Results from file get1Receive.c

```
file get1Receive.c
get1Receive.c: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.18, not stripped 
```

Snippet of codes.

```
sprintf(queryBuf1,"SELECT ipDest, macDest,portDest, sum(totalBits) FROM dataReceive WHERE timeStampID between '%s' And '%s'  GROUP BY ipDest, macDest, portDest ",buff1,buff2);
                printf("\nQuery receive %s",queryBuf1);

                if(mysql_query(localConn, queryBuf1))
                {
                    //fprintf(stderr, "%s\n", mysql_error(localConn));
                    printf("Error in first query of select %s\n",mysql_error(localConn));
                    exit(1);
                }

                localRes1 = mysql_store_result(localConn);
                int num_fields = mysql_num_fields(localRes1);

                printf("\nNumf of fields : %d",num_fields);
                printf("\nNof of row : %lu",mysql_num_rows(localRes1)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:14:38.650

如果此命令的输出：

```
file  get1Receive1.c 
```

表明该文件名是一个有效的可执行文件，该部分非常不寻常，但还可以。

假设您使用的是 biz14（或您的真实用户名）crontab，请尝试以下操作：

使用命令`crontab -e` 在您的 crontab 中创建此行：

```
* * * * *  set > /tmp/myvars 
```

等待几分钟，返回`crontab -e`并删除该条目。

使用命令行中的 set 命令查看存在哪些变量和别名。将其与您在`/tmp/myvars` 您必须通过更改 cron 作业运行的变量和别名来更改 C 代码的执行方式中看到的进行比较。

如果您在其他人的 crontab 中运行 cron 作业，那么您将遇到更大的问题。检查 get1Receive1.c 上的文件权限。以及它所在的目录。其他用户（赢得 crontab 的用户）必须在您的目录和 get1Receive1.c 上设置权限，以便作业可以运行。

crontab 条目示例：

```
0 10 * * 1-5 /path/to/get1Receive1.c > /tmp/outputfile 
```

阅读`/tmp/outputfile`，看看你得到了什么。您`printf`在代码中使用。 `printf`只写入控制终端。没有控制终端，因此将`printf`内容重定向到文件。

这个问题的最后努力：检查一切的返回码。所有 C 函数，如 fread()、任何 db 函数等。如果返回码给出失败响应（对于不同的函数调用，这些响应是不同的）然后报告错误号、行号和函数 - gcc 提供**LINE**和**func**。例子：

```
printf("error on line %d in my code %s, error message =%s\n", __LINE__, __func__, [string of error message]); 
```

如果您不检查返回代码，您将编写非常糟糕的 C 代码。

请检查返回码，现在！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:14:13.393

许可明智你可能有两个问题。1\. 'c' 文件的权限不允许你运行它的人来运行它。2\. 您正在使用没有权限的脚本运行 cron。

这是一个有用的帖子：[如何授予 cron 作业文件的权限？](https://stackoverflow.com/questions/892104/how-to-give-permission-for-the-cron-job-file)

您正在运行“c”文件并将其称为脚本的事实使我认为您正在使用 C shell 而不是将其编写为需要编译并由生成的可执行文件运行的 C 语言程序克朗。如果您没有使用 gcc 或从未在您的“C”脚本上调用 gcc，那么它不是 C，而是将其称为 C shell 以避免混淆。

# python - Scrapy: best way to select urls based on mysql

> ID：15362909
> 
> 赞同：0
> 
> 时间：2013-03-12T13:43:41.867
> 
> 标签：python, mysql, web-crawler, scrapy

I made a Scrapy crawler that collects some data from forum threads. On the list page, i can see the last modified date. Based on that date, i want to decide whether to crawl the thread again or not. I store the data in mysql, using pipeline. While processing the list page with my CrawlSpider, i want to check a record in the mysql, and based on that record i either want to yield a Request or not. (I DO NOT want to load the url unless there is a new post.)

Whats the best way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:15:16.457

使用`CrawSpider` `Rule`：

```
Rule(SgmlLinkExtractor(), follow=True, process_request='check_moddate'), 
```

然后在你的蜘蛛中：

```
def check_moddate(self, request):
    def dateisnew():
        # check the date
    if dateisnew():
        return request 
```

# asp.net - 为什么我的 HttpHandler 没有被调用？

> ID：15362910
> 
> 赞同：0
> 
> 时间：2013-03-12T13:43:44.033
> 
> 标签：asp.net, httphandler

好的，我现在感觉像个 nincompoop 一样问这个。

我写了一个简单的空白`HttpHandler`，只是在方法中放了一个断点`ProcessRequest`，然后在我的 web.config 中写了这个样板注册标记。

```
<system.web>
    <httpHandlers>
      <add path = "*.jpg" verb = "*" type="MyProject.BaseServices.StaticAssetHttpHandler, MyProject.BaseServices" validate = "false" />
      <add path = "*.jpeg" verb = "*" type="MyProject.BaseServices.StaticAssetHttpHandler, MyProject.BaseServices" validate = "false" />
      <add path = "*.png" verb = "*" type="MyProject.BaseServices.StaticAssetHttpHandler, MyProject.BaseServices" validate = "false" />
      <add path = "*.bmp" verb = "*" type="MyProject.BaseServices.StaticAssetHttpHandler, MyProject.BaseServices" validate = "false" />
      <add path = "*.gif" verb = "*" type="MyProject.BaseServices.StaticAssetHttpHandler, MyProject.BaseServices" validate = "false" />
      <add path = "*.ico" verb = "*" type="MyProject.BaseServices.StaticAssetHttpHandler, MyProject.BaseServices" validate = "false" />
      <add path = "*.css" verb = "*" type="MyProject.BaseServices.StaticAssetHttpHandler, MyProject.BaseServices" validate = "false"  />
      <add path = "*.js" verb = "*" type="MyProject.BaseServices.StaticAssetHttpHandler, MyProject.BaseServices" validate = "false" />
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:39:31.757

我发现了问题。我在 MVC 项目的 Views 文件夹中的 Web.config 中创建了条目。显然，我试图使用 my 服务的资产`HttpHandler`不在 Views 文件夹中。

我将条目移动到项目的根 Web.config 并开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:37:31.240

这将取决于您正在运行的 Web 服务器以及您安装的内容。如果您右键单击您的项目和属性并选择“Web”选项卡，您将看到“使用 Visual Studio 开发服务器”或“使用本地 IIS 服务器”的单选按钮以及 IIS Express 的复选框（这是项目的默认设置）在我和我同事的机器上）。

如果您使用 Visual Studio 开发服务器，您的配置应该可以工作。如果正在使用 IIS Express，则需要在不同的位置注册处理程序，并稍微更改属性（删除`validate`和添加`name`）

```
<system.webServer>
  <handlers>
    <add name="StaticJS" path = "*.js" verb = "*" type="AspNetWebFormsApplication.StaticAssetHttpHandler, AspNetWebFormsApplication"  />
  </handlers>
  ....
</system.webServer> 
```

# c# - c# System.Threading.SynchronizationLockException 当调用 System.Messaging.MessageQueueTransaction.Commit()

> ID：15362915
> 
> 赞同：0
> 
> 时间：2013-03-12T13:43:55.353
> 
> 标签：c#, exception, synchronization, message-queue

我的代码从消息队列中读取事务性消息。该代码已经运行了成千上万条消息，突然间，当我提交之前读取的一条消息时，会引发异常。提交是在与读取消息的线程不同的线程上执行的，在我看来这应该不是问题。关于事务的文档没有告诉我将提交或中止方法与某个对象同步。此异常与使用监视器有关，但我没有使用监视器，底层框架代码可能会这样做，但这不在我的控制范围内。

当我对消息队列进行定时读取时，我曾经偶尔会遇到此异常，我已经重写了代码，以便它首先使用异步 peek 来检查是否有要读取的数据。这样我就绕过了发生的异常。但现在又回来了。

请帮助我如何避免此异常，或者这是 c# 框架底层代码中的错误？

问候马丁

```
// Part of thread code that reads transaction
transaction = new MessageQueueTransaction();
transaction.Begin();
message = _ItfSureStoreInstance.MQSet.MQ_Retry.mqueue.Receive(transaction);

// We have data received
DataImplementation<TMessage> dataRxd = new DataImplementation<TMessage>(this,message,transaction,true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:01:50.630

[http://msdn.microsoft.com/en-us/library/system.messaging.messagequeuetransaction.aspx](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeuetransaction.aspx)记录得很好。它详细说明了这不能在单线程单元 (STA) 线程上使用。Winforms 应用程序必须是主 (UI) 线程上的 STA。这意味着`MessageQueueTransaction`不支持从 WinForm（或默认的控制台应用程序主线程）使用（即偶尔会失败）。

推荐的使用方法`MessageQueueTransaction`是从一个新的 MTA 线程开始。您可以这样做，`new Thread`也可以使用`Task.Factory.StartNew`

# gwt - 在 FieldUpdater 事件上显式调用 TextInputCell 的 onrender 事件

> ID：15362916
> 
> 赞同：1
> 
> 时间：2013-03-12T13:44:02.353
> 
> 标签：gwt, datagrid, render

我正在`DataGrid`使用`GWT`. 其中一列是`TextIntputCell`。我想在同一个单元格上放置一个工具提示以显示每个`FieldUpdter`事件的更新值。

以下是代码。

```
TextInputCell commentCell= new TextInputCell();{
@Override
public void render(com.google.gwt.cell.client.Cell.Context context,                                 String value, SafeHtmlBuilder sb) {
String imagePath = GWT.getModuleBaseURL()                           + "/images/about.png";
sb.appendHtmlConstant("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");
sb.appendHtmlConstant("<img src = '" + imagePath + "'height = '20px' width = '20px'  title='"+value+"'/>");
}
};
commentColumn = new Column<RegisteredClasses, String>(commentCell) {
@Override
public String getValue(RegisteredClasses object) {
return "";
}
};
FieldUpdater<RegisteredClasses, String> commentUpdater = new FieldUpdater<RegisteredClasses, String>() {
@Override
public void update(int index, RegisteredClasses object, String value) {
if(value != null ){
object.setCommentsByContractor(value);
}
}
};
commentColumn.setFieldUpdater(commentUpdater);
table.addColumn(commentColumn, localizableResource.onAcceptanceComment());
table.setColumnWidth(commentColumn, "280px"); 
```

这不起作用，因为渲染事件仅被调用一次。有没有办法明确地调用它。

# jquery - 使 x-editable 字段出现并触发 onfocus

> ID：15362917
> 
> 赞同：2
> 
> 时间：2013-03-12T13:44:09.273
> 
> 标签：jquery, twitter-bootstrap

我使用 x-editable 进行引导以使用客户端数据制作可编辑的表字段。我遇到的问题是我有一个有时有几百个字符长的注释字段，这使得表格看起来很可怕，因为我必须使用空格：nowrap。

为了解决这个问题，我使用 jQuery 在页面加载时只显示评论的一部分并隐藏可编辑字段，但当我将鼠标悬停在它上面时会展开。我遇到的问题是所有其他字段都可以通过 x-editable 选择 onfocus ，我想让这个字段也可以选择。如果我将鼠标悬停在该字段上，我可以毫无问题地进入它，但我很感兴趣如何进入并触发可编辑字段。

另一种解决方案是我限制 php 输出的字符数或使用 jQuery 隐藏它们，并在我进入其中时扩展字段，但我不知道该怎么做。我尝试研究 :focus 和 document.activeElement() 但没有找到让它们工作的方法。

我将示例代码添加到[jsfiddle](http://jsfiddle.net/HRqeJ/1/)。我在之前添加了一个输入字段，因为当您通过表格 x-editable 使用 Tab 时，会将字段变成输入元素。如果可编辑字段处于活动状态，我可以使用 Tab 进入，但如果不是，则跳过该字段并且不会触发。

这是一个包含可编辑字段的示例

```
<td id="comment" style="border:1px solid #000000;">
    <p id="short_comment">Short comment</p>
    <p id="collapse"><a href="#" id="editable">A much longer comment that will appear</a></p>
</td> 
```

这是一个 jQuery 示例

```
$('#collapse').hide();
$('#comment').on('mouseenter', function(f) {

    $('#short_comment').hide();
    $('#collapse').show();

    $("#collapse").on("show",function(event){
        $('#comment').width('200px');
    });

    $("#collapse").on("hide",function(event){
        $('#comment').width('50px');
    });
});

$('#comment').on('mouseleave', function(f) {
    $('#short_comment').show();
    $('#collapse').hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:19:34.907

1.  为您的 HTML添加[tabindexes](http://www.w3.org/TR/WCAG20-TECHS/H4.html)以控制 tabflow：

    ```
    <table>
      <tr>
        <td><input type="text" tabindex='1' /></td>
        <td id="comment" tabindex='2'>
            <p id="short_comment">Short comment</p>
            <p id="collapse"><a href="#" id="editable">A much longer comment that will appear</a></p>
         </td>
        </tr>
    </table> 
    ```

2.  添加一些CSS：

    ```
    #comment:hover #collapse, 
    #comment:focus #collapse {
        display:block;
    }
    #comment #collapse, 
    #comment:hover #short_comment, 
    #comment:focus #short_comment {
        display:none;
    } 
    ```

3.  删除 Javascript

演示：[JSFIDDLE](http://jsfiddle.net/handtrix/HRqeJ/3/)

# javascript - 实时连接上每个客户端的自定义插入符号

> ID：15362920
> 
> 赞同：1
> 
> 时间：2013-03-12T13:44:10.820
> 
> 标签：javascript, tinymce, signalr

我有一个带有 SignalR Connection 的 tinyMCE 编辑器。现在，我正在一个客户端上编写和格式化文本，并使用 SignalR 在另一个客户端上实时接收文本。现在我需要做的是给每个客户一个单独的插入符号，以便共享同一文档的所有客户可以同时编辑（Google Docs 的相同概念 - 单独的光标与用户名或与用户）。我被困在寻找能够做到这一点的东西上。有人有一些我可以查看的有用链接吗？

**编辑：**我现在查看了 tinyMCE 和 SignalR 中的所有方法，并注意到没有简单的方法可以解决这个问题。经过一番思考，我想出了自己实现自定义插入符号的想法。即使用 UNICODE 字符，如 | 并在客户端打开文档时将其放置在位置 0。我需要给这个字符一个正常书写插入符号的行为，即保持在文本的末尾并在单击文档中的某个区域时移动到一个位置。大家觉得这是个好主意吗？

# hibernate - Grails - 使用列表时不保留关系的拥有方

> ID：15362922
> 
> 赞同：1
> 
> 时间：2013-03-12T13:44:12.090
> 
> 标签：hibernate, grails, grails-orm, one-to-many

尝试保持两个实体之间的关联时，我遇到了一个奇怪的问题。当我使用 a `Set`（即 Grails 默认值）时，它可以工作，但是如果我尝试使用 a `List`，则在我的域类中设置它和生成 SQL 插入语句之间的某个地方会丢失子表中的关联。

我已经从我的应用程序中提取了有问题的代码，并设置了显示问题的最简单的测试用例——它涉及下面显示的 3 个域对象。

```
class Client {
    String name
    List<ModelFieldInstance> clientModelFieldInstances
    static hasMany = [clientModelFieldInstances: ModelFieldInstance]
}

class ModelFieldDefinition {
    String name
    static hasMany = [ modelFieldInstances: ModelFieldInstance ]

    def afterInsert() {
        Client.findAll().each { client ->
            ModelFieldInstance.withNewSession {
                ModelFieldInstance modelFieldInstance = new ModelFieldInstance(['modelFieldDefinition.id': this.id, 'client.id': client.id])
                modelFieldInstance.save()
            }
        }
    }   
}

class ModelFieldInstance {
    String value
    static belongsTo = [ modelFieldDefinition: ModelFieldDefinition, client: Client ]
} 
```

在 Bootstrap.groovy 中，我正在创建一个 Client 和一个 ModelFieldDefinition -

```
Client client = new Client(name: 'Some Client')
client.save(flush: true)

ModelFieldDefinition contactName = new ModelFieldDefinition([name: 'Contact Name'])
contactName.save(flush: true) 
```

ModelFieldDefinition 中的 afterInsert 方法用于为每个 Client 创建空的 ModelFieldInstances。如果我使用 STS 调试器逐步执行 afterInsert 代码，我可以看到 modelFieldInstance.client 具有正确的值，但是一旦`modelFieldInstance.save()`被调用，我就会收到一个异常，指出 modelFieldInstance.client 为 null -

```
Caused by MySQLIntegrityConstraintViolationException: Column 'client_id' cannot be null 
```

如果我改变我的`Client`班级，像这样删除`List`声明 -

```
class Client {
    String name
    static hasMany = [clientModelFieldInstances: ModelFieldInstance]
} 
```

然后正确地保持关联。为什么这不适用于`List`s？

编辑 - 我正在使用 Grails 2.2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:06:46.987

看看[GORM 文档](http://grails.org/doc/latest/guide/GORM.html#sets,ListsAndMaps)。如果您使用 a`List`而不是`Set`Hibernate ，则会`clientModelFieldInstances_idx`在数据库中创建一列。必须填写此列以确保您的`List`.

来自文档：*使用列表时，必须在保存之前将元素添加到集合中，否则 Hibernate 将抛出异常......*

尝试使用[addTo*](http://grails.org/doc/2.2.x/ref/Domain%20Classes/addTo.html)方法，而不是手动设置相应的 id。

# php - ColdFusion 查询到 PHP 的转换

> ID：15362923
> 
> 赞同：-4
> 
> 时间：2013-03-12T13:44:13.833
> 
> 标签：php, mysql, coldfusion

你能帮我把这个coldfusion语句转换成PHP来更新mysql吗？

```
<cfquery name="getrecords">
select email,name,id,status from table1
where status = 0
</cfquery>

<cfloop query="getrecords">
    <p>#getrecords.name#</p>
    <p>#getrecords.name#</p>

    <cfquery name="update">
    update table1 set status =1 where status = #getrecords.status#
    </cfquery>
</cfloop> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:45:56.190

查询不会在处理它们的语言的上下文中改变——它们都是 SQL。[在此处](http://php.net/manual/en/book.pdo.php)阅读有关在 PHP 中执行 mysql 查询的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:45:26.797

在任何编程语言中，您发布的代码都是不好的做法，因为您在循环内运行单个更新查询。既然你正在转换，你应该考虑改进一些事情。这是相同的逻辑，但只有一个更新查询。

```
<cfquery name="getrecords">
    SELECT name
    FROM   table1
    WHERE  status = 0
</cfquery>

<cfoutput query="getrecords">
    <p>#name#</p>
</cfoutput>

<cfquery name="updaterecords">
   UPDATE table1
   SET    status = 1
   WHERE  status = 0
</cfquery> 
```

Matt 已经为您提供了使用 php 运行 mysql 查询的参考。

# c# - LINQ To Entities 包含不区分大小写的搜索

> ID：15362926
> 
> 赞同：13
> 
> 时间：2013-03-12T13:44:20.983
> 
> 标签：c#, asp.net, linq, linq-to-entities

我正在尝试在 linq to entity 中像这样查询我的结果集；

```
var categoriesList = _catRepo.GetAllCategories();

 filteredCategories = categoriesList.Where(c=> c.CategoryName.Contains("for")); 
```

但是，我没有得到任何结果，因为`CategoryName`它`For(Upper Case)`在数据库中。我还检查了 sql server 排序规则并将其设置为**_CI_AS**。我不知道**如何使用 contains 过滤不区分大小写的字符串？** 如果有人键入，我基本上想要；

```
 filteredCategories = categoriesList.Where(c=> c.CategoryName.Contains("for")); 
```

或者

```
filteredCategories = categoriesList.Where(c=> c.CategoryName.Contains("For")); 
```

结果应该是一样的

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T13:49:58.480

试试这个

```
filteredCategories = categoriesList.Where(c=>
 c.CategoryName.IndexOf("for", StringComparison.OrdinalIgnoreCase) >= 0) 
```

Contains 方法的工作原理如下所示

```
public bool Contains(string value)
{
   return this.IndexOf(value, StringComparison.Ordinal) >= 0;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T13:57:14.693

以前的`IndexOf`答案应该有效。因为您正在从数据库中加载所有实体，然后对其进行内存中（linq to objects）过滤，所以您根本没有在数据库上做任何事情。

这也应该有效（来自我引用的帖子）

```
filteredCategories = categoriesList.Where(c=> c.CategoryName.ToLower().Contains("for")); 
```

顺便说一句，如果您有很多类别，那么您可能希望在数据库中过滤它们，而不是从数据库中获取所有类别然后在内存中过滤它们。

# java - 方括号的键码是什么

> ID：15362927
> 
> 赞同：1
> 
> 时间：2013-03-12T13:44:21.447
> 
> 标签：java, keyevent, keycode

我正在尝试在 Java 中使用 Robot 类并输入一些文本。不幸的是，我在查找方括号、此符号`|`和此符号 ` 的关键代码时遇到问题。我在 KeyEvent 常量中找不到它们。我想使用它们，因为我输入的文本是西里尔文，这些符号代表字母表中的字符。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:46:32.910

它在[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html)中`KeyEvent`

`KeyEvent.VK_OPEN_BRACKET`

和

`KeyEvent.VK_CLOSE_BRACKET`

**编辑**

来自`KeyEvent`JavaDoc

> 此低级事件由组件对象（例如文本字段）在按下、释放或键入键时生成。

因此，在美式 101 键键盘上，```和`~`将产生相同的键码，但`~`会有一个`SHIFT`修饰符。另请注意，它也会`KeyEvent.VK_BACK_SLASH`捕获`|`（管道）击键。

尝试将以下示例添加`KeyAdapter`到您的项目中以查看实际情况。

```
new KeyAdapter()
{
    public void keyPressed(final KeyEvent e)
    {
        if (e.getKeyCode() == KeyEvent.VK_BACK_QUOTE)
        {
            e.toString();
        }
        if (e.getKeyCode() == KeyEvent.VK_BACK_SLASH)
        {
            e.toString();
        }
        if (e.getKeyCode() == KeyEvent.VK_OPEN_BRACKET)
        {
            e.toString();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:52:22.160

一般的解决方案是调用[`KeyEvent.getExtendedKeyCodeForChar(int c)`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getExtendedKeyCodeForChar%28int%29). 如果 unicode 代码点`c`有一个`VK_`将被返回的常量。否则返回一个“唯一整数”。

我认为'`'是 KeyEvent.VK_BACK_QUOTE ...

# php - 如何使用 CodeIgniter 中的活动记录调整此查询以获取列中的最大值？

> ID：15362931
> 
> 赞同：1
> 
> 时间：2013-03-12T13:44:30.850
> 
> 标签：php, mysql, codeigniter, activerecord, codeigniter-2

我想进行一个活动记录查询，以获取 parent_id 等于 $parent_id的列**顺序的最大值。**

到目前为止，我有这个：

```
function get_biggest_order($parent_id)
    {
        $result = 0;
        if(!empty($parent_id)) 
        {
            $this->db->where('parent_id', $parent_id);
            $result = $this->db->get('pages');
        }
        return $result;
    } 
```

但是正如你所看到的，我得到了所有行，而不仅仅是订单列具有最大值的行，例如 14。

怎么做？

我在想类似的事情：

```
$this->db->where('parent_id', $parent_id);
$this->db->where('order', something is the biggest);
$result = $this->db->get('pages'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:49:29.230

你必须使用`order_by`：

```
$this->db->where('parent_id', $parent_id);
$this->db->order_by('order', 'desc');
$this->db->limit(1);
$result = $this->db->get('pages')->row(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T06:48:42.257

该`select_max()`方法是您应该使用的方法。更快，更不言自明。

# c# - 行为绑架鼠标和键

> ID：15362938
> 
> 赞同：0
> 
> 时间：2013-03-12T13:44:48.560
> 
> 标签：c#, .net, datetimepicker

我在`DateTimePicker`显示`UpDown`箭头时遇到问题。它实际上也发生在`numericUpDown`控件上。日历不会发生这种情况。

如果我在 的任何字段中单击鼠标，`DateTimePicker`然后单击箭头更改值，我将无法离开控件。

抱歉，我真的不知道如何正确解释这一点（可能是我在搜索时没有找到任何相关信息的原因）。该软件不会挂起，但除了`DateTimePicker;`例如，我可以用鼠标单击按钮并运行视觉效果但不会运行单击事件之外，其他任何操作都不会...

所以，我唯一能做的就是强制程序关闭。这就像它只是窃取焦点或鼠标单击事件和按键事件，而不是让它去其他任何地方。tab 键也不起作用。

`dateTimepicker`绑定到 a 中的列，并且`datatable`根本没有代码。

我确信这是我想念的愚蠢的东西，但我已经对此感到沮丧。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:06:52.293

我发现只有在绑定了带有 UPDown（DateTimePicker 和 NumericUpDown）的控件的属性 Text 时才会发生这种情况。当属性 Value 被绑定时，它不会这样做。

尽管这解决了我的应用程序中的问题，但行为存在并且无法找到解释。

# jquery - 使用未知数组键的 jQuery 验证

> ID：15362943
> 
> 赞同：3
> 
> 时间：2013-03-12T13:44:57.000
> 
> 标签：jquery, jquery-validate

查看此处的文档：[http](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29) ://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29 将规则附加到输入数组的语法如下：

```
rules: {
"user[email]": "email", 
```

但是在我的情况下，数组键是数字值并且可以具有任何值，但我仍然想将规则附加到字段。我用 jQuery 动态添加输入字段（`key`是一个全局变量）：

```
 $('a#addfield').click(function(e)
 {
    e.preventDefault();
    var data = '<p><input type="file" name="field['+key+']"></p>';
    $('div#inputcontainer').append(data);
 }); 
```

示例 HTML 输出：

```
<p><input name="field[19]" type="file"></p>
<p><input name="field[22]" type="file"></p>
<p><input name="field[25]" type="file"></p> 
```

我试过定义这样的规则：

```
rules: 
{
   'field[]': {
         required: true,
         extension: "pdf|doc|docx"
    }
} 
```

（取自这个答案：[jquery validate add rules for an array input](https://stackoverflow.com/questions/9996589/jquery-validate-add-rules-for-an-array-input?rq=1) **编辑：**这种设置规则的建议方法`'field[]'`不适用于验证插件。请参阅下面的答案和评论。）

但是当我尝试添加其他文件类型时没有验证错误......有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:08:20.787

您可以应用于[`.rules("add", rules)`](http://docs.jquery.com/Plugins/Validation/rules#rules.28.C2.A0.22add.22.2C.C2.A0rules_.29)每个生成的元素：

```
$(element).rules("add", { required:true, extension: "pdf|docx?" }); 
```

* * *

`jQuery.validate`确实提供了一种通过表单上设置的规则（至少到 v1.11）来验证具有相同名称（`foo[]`nor ）的元素的方法。`foo[N]`

还有其他一些添加动态规则的方法，例如，在不调用的情况下添加所需的检查，`.rules('add')`您可以简单地`class="required"`在元素中使用，并且验证插件应该动态地选择它。

但是，没有与该选项等效的内置`extension`选项，因此您必须为所有输入添加一个类并使用[`addClassRules`](http://docs.jquery.com/Plugins/Validation/Validator/addClassRules). 这最终将一些行为与 HTML 和可能的 CSS 混合在一起。

* * *

**给未来读者的**注意事项**`.rules('add')`：两者`addClassRules`都不适用于重复的名称（例如`foo[]`），但如果名称不完全相同（例如`foo[index]`）（例如 OP 的情况），它们确实有效。**

 **我相信具有完全相同名称的输入对于这个问题来说是题外话，但是对于这些你要么必须添加自己的验证方法[`addMethod`](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)，要么在表单的提交处理程序中添加自己的验证，或者尝试这个[相关的答案](https://stackoverflow.com/a/4136430/1331430)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:37:00.747

我认为给出的答案是正确的，但也值得考虑创建一个结合你的两个规则的类规则，然后给你输入这个类。这样您就不必在每次向 DOM 动态添加新元素时调用 addMethod。

```
$.validator.addClassRules("myinput", { required:true, extension: "pdf|docx?" }); 
```

html

```
<input name="field[19]" type="file" class="myinput"> 
<input name="field[22]" type="file" class="myinput"> 
<input name="field[25]" type="file" class="myinput"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T15:22:09.037

**编辑**：我的答案发布在问题的原始版本上，在没有阅读评论的情况下，不知道这些字段是*动态*创建的。否则，最好在创建每个字段时简单地添加规则：

```
var myRule = { // save some code... put the common rule into a variable
    required:true,
    extension: "pdf|docx?"
};

$('a#addfield').click(function(e) {
    e.preventDefault();
    var data = '<p><input type="file" name="field['+key+']"></p>';
    $('div#inputcontainer').append(data);
    $('[name="field['+key+']"]').rules("add", myRule); // add the rule to the new field
}); 
```

（嵌套括号[按此答案](https://stackoverflow.com/a/2365005/594235)处理。）

原答案如下：

* * *

接受的答案让你成功了一半。

此外，我的回答不需要`class`对现有 HTML 结构进行额外或任何其他更改。这都是 jQuery...

前半部分是使用[内置`rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#rules.28.C2.A0.22add.22.2C.C2.A0rules_.29)。

```
$(element).rules("add", {
    required:true,
    extension: "pdf|docx?"
}); 
```

后半部分是将该方法应用于所有具有命名`"field[19]"`、、`"field[20]"`等的元素`"field[21]"`。

您只需将[jQuery`.each()`](http://api.jquery.com/jQuery.each/)与[jQuery "starts with" 选择器一起使用](http://api.jquery.com/attribute-starts-with-selector/)。

```
$('[name^="field"]').each(function() {
    $(this).rules("add", {
        required:true,
        extension: "pdf|docx?"
    });
}); 
```

**演示：http: [//jsfiddle.net/cWABL/](http://jsfiddle.net/cWABL/)****

# permissions - AngularJS - 权限指令

> ID：15362946
> 
> 赞同：10
> 
> 时间：2013-03-12T13:45:00.127
> 
> 标签：permissions, angularjs, user-permissions, directive

我正在尝试编写将**评估用户权限的****指令**。

 **如果不允许用户查看给定的内容

1.  内容不会显示（完成，工作正常）

2.  来自权限指令内的控制器的请求不会被触发。

例子：

控制器：

```
function MyController ($scope){
     // performing imediately server request, witch is allowed only for admin
     // therefore i will get error when non admin user access this page
} 
```

许可指令：

```
return {
        priority: 1000,
        restrict: 'E',
        link: (scope, element, attrs) => {
            var permission = attrs.permission;

            if (/*evaluating permission*/) { 
                // user has permission, no work for me
                return;
            }

            element.remove();
        }
    }; 
```

全部一起：

```
<permission permission="isAdmin">
    <div ng-controller="MyController">
    </div>
</permission> 
```

此版本正在从 DOM 中删除元素，但 MyController 中的请求仍会执行。当然，我可以在 MyController 中检查权限，但我不想这样做。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:42:26.880

您的问题是控制器将始终在链接函数执行之前被调用。看到[这个小提琴](http://jsfiddle.net/mrajcok/MFHet/)。

```
function MyCtrl($scope) {
    console.log('in controller');
}

myApp.directive('permission', function() {
    return {
        restrict: 'E',
        link: function(scope, element, attrs) {
            console.log('in link'); 
```

日志显示：

```
in controller
in link 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:47:09.383

我尝试了另一种方法并将元素的删除放入编译函数中。根据日志，它是在控制器之前执行的，所以它是正确的地方。无论如何，请求仍然被解雇。因此，我尝试像盲拍一样删除元素子项（我知道，这没有意义，删除元素应该就足够了，也应该删除子项）。

但它奏效了！

`compile: function(element) { var children = element.children(); children.remove(); element.remove(); }`

它正在工作，但我不确定它有多好（例如未来版本的 Ang。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T14:39:27.327

如果我是你，我会打电话给服务器并检查他们是否被授权访问。

使用指令执行此操作实际上没有任何意义。

指令通常用于操作 dom，这是授权确认通常应在控制器中处理，然后具有触发事件的结果。

然后让您的指令监听该事件并在他们从服务器获得访问权限时操纵 dom。

否则任何人都可以轻松地注入他们想要的任何内容并查看您的管理面板。

如果您不确定我的意思，请告诉我，如果您需要我可以扩展答案。**

# javascript - 混淆 URL 参数以防止用户更改它们？

> ID：15362947
> 
> 赞同：3
> 
> 时间：2013-03-12T13:45:02.130
> 
> 标签：javascript, md5, url-parameters

我正在开发一个基于 Javascript 的胖客户端页面，它允许用户使用另一个 Web 客户端应用程序（Oracle Siebel）执行任务。

从浏览器调用网页的方式是通过简单的 window.open() 调用。

发生这种情况时，将传递一个 URL，该 URL 最后包含一些参数，这将根据它们的值更改胖客户端页面的功能。

例如

> userlevel=1 //普通用户
> 
> userlevel=2 //高级用户

在一个例子中，完整的 URL 就像这样

> www.mypage.com/index.htm?id=25215125%userlevel=2%context=full

但是，想要更改其访问权限的用户只需要弄清楚，如果他们更改了用户级别，那么他们就可以在这个胖客户端页面上更改他们的访问权限。

是的，我知道这是有风险的，在您问我为什么不使用服务器支持的瘦客户端以及用户无法更改的控件之前。我只需要这样做！

该系统将处于“受信任”的环境中，并且该用户最多将具有平均 IT 技能。

所以我需要做的就是找出一种方法来混淆/打乱 URL 参数（如果可能的话），然后在胖客户端上解密它们。

例如

> www.mypage.com/index.htm?1sdf908ga90-821098650f8asdg098g0a98

我在浏览器上对其进行了测试，到目前为止没有任何投诉，所以我想我只需要开发一段逻辑来破译它。

例如，我可以使用 MD5 吗？

有什么例子或想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:03:15.173

尝试 Base64 编码。[https://stackoverflow.com/a/4699739/1088652](https://stackoverflow.com/a/4699739/1088652)

这将缩短它并混淆它，这样用户就不能只在 URL 中抛出值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T16:09:18.010

使用 HMAC 可以确保参数的完整性。您使用密钥和所有参数生成散列，将这个散列包含在 URL 中，然后在服务器端使用相同的参数生成散列并比较值。

```
function generateSignature(array $params, $hmacKey)
{
    // sort the array by key using SORT_STRING order
    ksort($params, SORT_STRING);

    $escapeFunc = function ($val) {
        return str_replace(':', '\\:', str_replace('\\', '\\\\', $val));
    };

    // generate the signing data string
    $signData = implode(':', array_map($escapeFunc, array_merge(array_keys($params), array_values($params))));

    // base64-encode the binary result of the HMAC computation
    $merchantSig = base64_encode(hash_hmac('sha256', $signData, pack("H*", $hmacKey), true));

    return $merchantSig;
} 
```

# java - Java - 我应该为日志消息使用常量吗？

> ID：15362953
> 
> 赞同：7
> 
> 时间：2013-03-12T13:45:43.393
> 
> 标签：java, string, logging, compiler-construction

只是一个关于形式的快速问题。

我正在记录各种错误消息，想知道是否应该在日志调用中为消息创建一个新字符串，或者在我用来存储其他字符串常量的接口中创建一个常量字符串，然后引用它。我使用的是代码分析器代码，它暗示后者说创建字符串常量并引用它是更好的做法，即使字符串只使用一次。我只是想知道是否确实如此？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:52:55.047

我不确定您使用什么分析工具或如何配置它，但这些建议对我来说似乎无效。Java 编译器已经为您创建了字符串常量（当代码调用 log 方法时，它通常不会分配新的 String 实例），那么手动完成这项工作有什么意义呢？

如果将字符串常量放入接口中，则可以在类之间共享它们，但不能以您认为的方式：Java 编译器会将常量的值复制到正在使用它的代码中（因此生成的字节码不会有不再是对接口的引用！）

我的建议：关闭这个误导性警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:55:18.817

日志应该易于添加和删除；只需提供一个非常薄的层。然后可能使用了 MessageFormats，当替换为常量名称时，它们容易出错/无法检查。

字符串常量也被导入，然后当常量改变时不再需要检测改变。

日志字符串也不是很严格，它们自己的信息量很大。

最好将这些字符串标记为不可国际化。

# css - 如何为移动设备制作相同的网站布局

> ID：15362958
> 
> 赞同：0
> 
> 时间：2013-03-12T13:45:47.333
> 
> 标签：css, mobile-website, website-deployment

我正在处理的网站有问题。这是[这里](http://abidhasan.zxq.net/help/)的网站。顶部导航栏在手机/平板电脑视图中不合适。只在台式机上没问题。查看移动视图的图像：

[![](../Images/f5ba9b18936abd214d3037841bc6a858.png)](https://imgur.com/Jf9yKbu)

我不想让它响应，但从手机或平板电脑它应该是相同的布局与滚动。导航代码没有问题。问题在于持有导航的 div。因为如果我删除导航并只使用文本，它会有同样的问题：

[![](../Images/514ab4a9ce1d001271f376a8a43b7812.png)](https://imgur.com/es2rq2J)

div的HTML代码：

```
<div class="outer top">
    <div class="inner">
        <div class="nav">
            <ul>
                <li>....</li>
                <li>....</li>
                <li>....</li>
            </ul>
        </div>
    </div>
</div> 
```

CSS 代码：

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
    border: 0 none;
    font-size: 100%;
    margin: 0;
    padding: 0;
    vertical-align: baseline;
}

body {
    background: url(../images/bg.png) repeat-x #fff;
    color: #fff;
    font-family: Helvetica, Myriad Pro, Verdana;
    font-size: 14px;
    line-height: 1em;
}

.outer {
    width: 100%;
    float: right;
    display: block;
}

.top {
    background: #004481;    
}

.inner {
    width: 940px;
margin: 0 auto;
} 
```

我已经使用了 100% 的宽度。但是，在手机/平板电脑上仍然不行。能不能给个解决办法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:21:46.320

You could also consider to create a new stylesheet specific for your mobile/tablet devices. This makes sure that it will look right on all devices. You're already using Divs so that shouldn't be a problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:00:10.950

我将您的代码放在 jsbin 中，但无法看到您所看到的内容。你能添加更多代码吗？

[http://jsbin.com/ologix/1/edit](http://jsbin.com/ologix/1/edit)

# sql - JOIN 在另一台数据库服务器上的表上与 JOIN 在另一台服务器上的表上的 SELECT 上

> ID：15362959
> 
> 赞同：3
> 
> 时间：2013-03-12T13:45:47.707
> 
> 标签：sql, sql-server

我很好奇在驻留在另一个 SQL 服务器实例上的表上加入和在同一个表的子集上加入另一个服务器实例之间是否存在性能差异。换句话说，以下两个查询的性能是否相同：

```
SELECT t1.CustomerName, t2.Address, t2.Phone 
FROM Table1 t1
LEFT JOIN [Server X].dbo.Table2 t2 on t2.CustomerID = t1.CustomerID 
```

和

```
SELECT t1.CustomerName, t2.Address, t2.Phone
FROM Table1 t1
LEFT JOIN (SELECT CustomerID, Address. Phone FROM [Server X].dbo.Table2) 
t2 
on t2.CustomerID = t1.CustomerID 
```

我们可以假设 Table2 不仅仅包含这两列。我想知道仅选择我需要的列与在整个表上加入是否会产生任何差异，特别是考虑到这是一个跨服务器查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:00:50.107

IMO，在这种情况下，两个查询都将具有相同的性能。

如果你看到这个的执行计划。两个计划将是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:52:37.620

在我的脑海中，我不确定，但如果不对其进行测试，在我看来 SQL 会执行这些相同的操作。如果你有 SQL Server Management Studio 并运行执行计划，你可以检查一下。

如果内部选择更复杂，我相信顶部会更有效（因为它会在同一台服务器上）。这真的取决于优化器。

# android - 从 jni 返回无符号字符 []

> ID：15362960
> 
> 赞同：1
> 
> 时间：2013-03-12T13:45:50.077
> 
> 标签：android, android-ndk, java-native-interface

我想从我的 jni 方法返回无符号字符 []。我在 Jni 函数中有以下代码：

```
unsigned char abc[16]
 abc[i] = 'b'; 
```

我使用 jstring 和 jcharArray 将 abc 返回到 java 代码。但是在使用 jstring 时，我无法正确编译程序。anb 在使用 chararray 时我得到了一些奇怪的字符。请提出一些解决方案如何处理这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:20:59.337

`unsigned char`实际上，对应于 C 的 Java 数据类型是`byte`. 您需要将您的方法声明为`byte[]`在 Java 端返回，并在 C 端采取相应的行动。

这是否是正确的做法是另一个问题。在 C 中，“文本字符串”和“字节数组”几乎是同义词（模空终止）；在Java中，不是这样。这是一串可读 (ASCII) 文本吗？如果是，**则更**自然地将其返回为`jstring`; 要将 C 转换`[unsigned] char *`为 a `jstring`，请使用`JNIEnv::NewStringUTF()`. 但是还有另一个警告：如果您的字符串位于 UTF-8 以外的代码页中并且包含非 ASCII 字符（代码 >= 0x80），则此方法不起作用；那么你最好将字符串作为字节数组传递出去，并通过 Java 端的正确代码页进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T10:07:25.770

在我用 C++ 完成所有工作之后，我将数据从常规的本机字节数组（实际上是`unsigned char *dataB`）复制到一个新的 JNI 对象`jbyteArray`（同样的东西，但对于 JNI），它可以返回给 Java 代码：

```
...
//Prepare jbyteArray to return to Java
jbyteArray resultReturn = env->NewByteArray(dataLength);
//copy data:
env->SetByteArrayRegion(resultReturn, 0, dataLength, reinterpret_cast<const jbyte *>(dataB));

    return resultReturn;
} 
```

其中 dataB 是一个字节数组，`unsigned char *dataB`其中包含我使用的所有数据。

# iphone - 像给定的图片一样的coverflow

> ID：15362964
> 
> 赞同：2
> 
> 时间：2013-03-12T13:46:15.933
> 
> 标签：iphone, ios, objective-c, uiscrollview

我想制作`UIScrollView`或覆盖这样的流，我尝试了一些像 icaraousal 等的覆盖流，但那些不会产生这样的感觉，所以如果有人知道这种类型的覆盖，请建议我。

和 iCarousal 创建这种类型的视图 查看侧面图像的位置和角度的差异

![在此处输入图像描述](../Images/2c2128917011892bd5be22f1675fc18b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:53:50.463

您可能正在寻找这个[非常棒的库](https://github.com/nicklockwood/iCarousel)，它可以完全满足您的要求

但是你必须在里面做一些编辑才能达到你想要的方式

它有大量的委托，可以用来实现你正在寻找的东西

```
@protocol iCarouselDataSource <NSObject>

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel;
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view;

@optional

- (NSUInteger)numberOfPlaceholdersInCarousel:(iCarousel *)carousel;
- (UIView *)carousel:(iCarousel *)carousel placeholderViewAtIndex:(NSUInteger)index reusingView:(UIView *)view;
- (NSUInteger)numberOfVisibleItemsInCarousel:(iCarousel *)carousel;

//deprecated, use carousel:viewForItemAtIndex:reusingView: and carousel:placeholderViewAtIndex:reusingView: instead
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index __deprecated;
- (UIView *)carousel:(iCarousel *)carousel placeholderViewAtIndex:(NSUInteger)index __deprecated;

@end

@protocol iCarouselDelegate <NSObject>
@optional

- (void)carouselWillBeginScrollingAnimation:(iCarousel *)carousel;
- (void)carouselDidEndScrollingAnimation:(iCarousel *)carousel;
- (void)carouselDidScroll:(iCarousel *)carousel;
- (void)carouselCurrentItemIndexUpdated:(iCarousel *)carousel;
- (void)carouselWillBeginDragging:(iCarousel *)carousel;
- (void)carouselDidEndDragging:(iCarousel *)carousel willDecelerate:(BOOL)decelerate;
- (void)carouselWillBeginDecelerating:(iCarousel *)carousel;
- (void)carouselDidEndDecelerating:(iCarousel *)carousel;
- (CGFloat)carouselItemWidth:(iCarousel *)carousel;
- (CGFloat)carouselOffsetMultiplier:(iCarousel *)carousel;
- (BOOL)carouselShouldWrap:(iCarousel *)carousel;
- (CGFloat)carousel:(iCarousel *)carousel itemAlphaForOffset:(CGFloat)offset;
- (CATransform3D)carousel:(iCarousel *)carousel itemTransformForOffset:(CGFloat)offset baseTransform:(CATransform3D)transform;
- (CGFloat)carousel:(iCarousel *)carousel valueForTransformOption:(iCarouselTranformOption)option withDefault:(CGFloat)value;

//deprecated, use transformForItemAtIndex:withOffset:baseTransform: instead
- (CATransform3D)carousel:(iCarousel *)carousel transformForItemView:(UIView *)view withOffset:(CGFloat)offset __deprecated;

- (BOOL)carousel:(iCarousel *)carousel shouldSelectItemAtIndex:(NSInteger)index;
- (void)carousel:(iCarousel *)carousel didSelectItemAtIndex:(NSInteger)index; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:59:01.920

**首先这里最好的** [源代码](https://github.com/nicklockwood/iCarousel)

`contentOffset`可能是无论在那里设置这些数字，你都不会因为你把它放在它的手上而留下深刻的印象。所以它只是继续设置它认为应该是下一瞬间的 contentOffset - 而不验证 contentOffset 在此期间是否发生了变化。

我将子类`UIScrollView`化并将魔法放入`setContentOffset`方法中。根据我的经验，所有内容偏移更改都通过该方法，即使是内部滚动引起的内容偏移更改。只需在某个时候执行 [super `setContentOffset`:..] 即可将消息传递给真正的`UIScrollView`.

也许如果你把你的换档动作放在那里，它会更好地工作。您至少可以检测 3000-off 设置`contentOffset`，并在传递消息之前对其进行修复。如果您还要覆盖 contentOffset 方法，您可以尝试查看是否可以制作虚拟无限内容大小，并将其减少到“引擎盖下”的真实比例。

[这对你也有帮助..!!!](https://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

# fortran - Fortran + Openmp 比顺序更慢

> ID：15362966
> 
> 赞同：0
> 
> 时间：2013-03-12T13:46:19.447
> 
> 标签：fortran, openmp

我在 Fortran 中有这个顺序代码。我的问题是，当我放置 Openmp 指令时，并行代码比顺序代码慢，而且我看不到错误。

```
REAL, DIMENSION(:), ALLOCATABLE :: current, next
ALLOCATE ( current(TOTAL_Z), next(TOTAL_Z))

CALL CPU_TIME(t1)

!$OMP PARALLEL SHARED (current, next) PRIVATE (z)
DO t = 1, TOTAL_TIME
    !$OMP  DO SCHEDULE(STATIC, 2)
    DO z = 2, (TOTAL_Z - 1)
        next(z) = current (z) + KAPPA*DELTA_T*((current(z - 1) - 2.0*current(z) +      current(z + 1)) / DELTA_Z**2)
    END DO
    !$OMP END DO
    current = next
END DO

CALL CPU_TIME(t2)

!$OMP END PARALLEL 
```

TOTAL_Z、TOTAL_TIME、KAPPA、DELTA_T、DELTA_Z 是常数。
当我运行并行代码时，我在 htop 中看到并且我的 2 个内核以 100% 的速度工作
在顺序代码中，CPU_TIME 是 79 seg，并行是 132 seg
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-30T14:24:29.713

我刚刚遇到同样的问题。

使用 cpu_time() 似乎不适合衡量多线程代码的性能。cpu_time() 将添加所有线程的总时间，这可能会随着线程数量的增加而增加。

我在另一个论坛上找到了这个， [http://software.intel.com/en-us/forums/topic/281897](http://software.intel.com/en-us/forums/topic/281897)

您应该使用 system_clock() 或 omp_get_wtime() 函数来获得更准确的例程时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:11:30.577

它可能很慢，因为线程正在争用访问`shared`变量。如果您可以更改它以使用`reduction`它可能会更快。但这可能并不容易，因为“当前”的计算会访问多个数组元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-30T20:00:07.517

根据迭代次数，您可能还面临嵌套数组上的错误共享问题。由于 DO 循环分布的块大小相当小，因此 nest(z)、nest(z+1)、nest(z+2)、nest(z+3) 等的缓存行可能会在CPU 的 L1/L2 高速缓存。

干杯，-迈克尔

# xml - copying content of one xml file into another xml file using xslt

> ID：15362967
> 
> 赞同：2
> 
> 时间：2013-03-12T13:46:25.407
> 
> 标签：xml, xslt

I have a xml file where attributes of a tag is a src for other xml file.

```
 <a>
    <b>
       <c src="other1.xml" name="other1"></c>
       <c src="other2.xml" name="other2"></c>
       <c src="other3.xml" name="other3"></c> 
   </b>
 </a> 
```

I want to change content of this xml file into following following format

```
<a>
    <b>
       <other1> content of other1.xml </other1>
       <other2> content of other2.xml </other2>
       <other3> content of other3.xml </other3>
   </b>
</a> 
```

I tried using xsl:variable and storing value of src inside it but i am getting error.

Somebody please suggest solution....even hints will be appreciated

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:51:08.010

This should do it:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="c">
    <xsl:element name="{@name}">
      <xsl:apply-templates select="document(@src)" />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

With the following files as other1.xml, other2.xml and other3.xml:

```
<I xmlns="hello">
  <am some="" xml="" />
</I> 
```

```
<I xmlns="hello">
  <amAlso xml="" />
</I> 
```

```
<I>
  <am xml="as well" />
</I> 
```

And run with your sample XML as input, the result is:

```
<a>
  <b>
    <other1>
      <I xmlns="hello">
        <am some="" xml="" />
      </I>
    </other1>
    <other2>
      <I xmlns="hello">
        <amAlso xml="" />
      </I>
    </other2>
    <other3>
      <I>
        <am xml="as well" />
      </I>
    </other3>
  </b>
</a> 
```

# ruby-on-rails - 为什么 Nokogiri 不将数据作为数组抓取

> ID：15362968
> 
> 赞同：0
> 
> 时间：2013-03-12T13:46:25.513
> 
> 标签：ruby-on-rails, ruby, arrays, parsing, nokogiri

我正在使用 Nokogiri 从网页中抓取数据，我的印象是以下内容会抓取数据并返回为数组？相反，我得到了一个导致一些问题的大字符串。

```
 home_team = doc.css(".team-home.teams") 
```

如果我要使用

```
home_team = doc.css(".team-home.teams").text 
```

我可以理解作为字符串返回的数据。我看错了吗？

我什至尝试过

```
home_team = doc.css(".team-home.teams").map(&:text) 
```

但这似乎也返回了一个字符串？如果我在控制台中返回一个数组，它会是数组格式吗？

如果有人可以在他们的控制台中尝试这个

```
require 'open-uri'
require 'nokogiri'

FIXTURE_URL = "http://www.bbc.co.uk/sport/football/premier-league/fixtures"

doc = Nokogiri::HTML(open(FIXTURE_URL))
home_team = doc.css(".team-home.teams").map(&:text)
#home_team = doc.css(".team-home.teams")
puts home_team 
```

只需确认两种情况下的输出都是字符串以及两者之间的区别是什么。莫名的失落

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:58:46.350

你得到一个数组。这只是`puts`在做一个`to_s`。看一下这个：

```
require 'open-uri'
require 'nokogiri'

FIXTURE_URL = "http://www.bbc.co.uk/sport/football/premier-league/fixtures"

doc = Nokogiri::HTML(open(FIXTURE_URL))
home_team = doc.css(".team-home.teams").map(&:text)
# home_team = doc.css(".team-home.teams")
puts home_team.class
puts home_team.map(&:strip).inspect

#=> Array
#=> ["Everton", "Aston Villa", "Southampton", "Stoke", "Swansea", "Man Utd", "Sunderland", "Tottenham", "Chelsea", "Wigan", "Sunderland", "Arsenal", "Man City", "Swansea", "West Ham", "Wigan", "Everton", "Aston Villa", "Southampton", "Fulham", "Reading", "Chelsea", "Newcastle", "Norwich", "Stoke", "West Brom", "Liverpool", "Tottenham", "QPR", "Man Utd", "Newcastle", "Arsenal", "Aston Villa", "Everton", "Reading", "Southampton", "Stoke", "Chelsea", "Arsenal", "Fulham", "Norwich", "QPR", "Sunderland", "Swansea", "West Brom", "West Ham", "Tottenham", "Liverpool", "Man Utd", "Man City", "Aston Villa", "Chelsea", "Everton", "Southampton", "Stoke", "Wigan", "Newcastle", "Reading", "Arsenal", "Fulham", "Liverpool", "Man Utd", "Norwich", "QPR", "Sunderland", "Swansea", "Tottenham", "West Brom", "West Ham", "Arsenal", "Aston Villa", "Everton", "Fulham", "Man Utd", "Norwich", "QPR", "Reading", "Stoke", "Sunderland", "Chelsea", "Liverpool", "Man City", "Newcastle", "Southampton", "Swansea", "Tottenham", "West Brom", "West Ham", "Wigan"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:54:26.360

数据中有很多空白。当我这样做时，我得到一个数组：

```
home_team = doc.css(".team-home.teams").map {|team| team.text.strip} 
```

# asp.net - 页面文档模式

> ID：15362974
> 
> 赞同：0
> 
> 时间：2013-03-12T13:46:40.403
> 
> 标签：asp.net, html, css, master-pages

我有一个扩展母版页的 aspx 页面。我想更改 aspx 页面的文档模式。我想把这条线放到 aspx 页面上。但它不允许。我不想把这段代码放到母版页的头上，只想改变页面的文档模式。有人可以帮助我吗？

```
 <meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:49:20.680

您的母版页中需要一个占位符：

```
<head>
    <asp:ContentPlaceHolder id="plhHead" runat="server"/>
</head> 
```

如果您的`<html/>`标签没有，您需要像 KPL 一样`runat="server"`将其应用于标签。`<head/>`然后像使用主要内容占位符一样将其填充到客户端页面中：

```
<asp:Content ContentPlaceHolderId="plhHead" runat="server">
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:49:28.880

在母版页的头部放置一个 ContentPlaceHolder：

```
<head runat="server">
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

现在从您的`.aspx`页面中，您可以在 head 部分添加自定义内容：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
</asp:Content> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:51:17.920

作为`ContentPlaceHolder`在母版页中放置 a 的替代方法，您可以执行以下操作：

```
// Programmatically add a <meta> element to the Header
HtmlMeta keywords = new HtmlMeta();
keywords.Name = "X-UA-Compatible";
keywords.Content = "IE=9";

Page.Header.Controls.Add(keywords); 
```

# delphi - 在编译时播放声音

> ID：15362975
> 
> 赞同：7
> 
> 时间：2013-03-12T13:46:42.367
> 
> 标签：delphi, audio, c++builder

编译（制作或构建）通常需要几秒钟或几分钟。

我想设置我的 IDE，RAD Studio XE2，在它完成编译时播放声音。如果我可以在编译成功或失败的情况下设置不同的声音，那就更好了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T01:52:59.023

# 嘟

要在完成构建时发出哔声，请执行以下操作：

1.  转到项目选项( `ctrl`++ `shift`)`F11`
2.  转到构建事件
3.  转到构建后事件/命令
4.  粘贴：`RunDll32.exe user32.dll,MessageBeep`

它使用rundll32.exe 直接调用user32.dll 中的MessageBeep。它重量轻，而且很确定它可以在您的系统上运行。

![选项](../Images/34146b04df38ce25a44e4a3043a97464.png)

# 样本

如果你想要一个花哨的 mp3，你可以调用 winamp，或者你可以自己破解一些东西。

# 文字转语音

如果您感觉更冒险，您可以让您的电脑在完成构建后与您对话。您不必为它安装任何东西；你的电脑已经有 SAPI。

屏幕截图中的示例会告诉您`Done compiling`何时完成。您可以让它告诉您构建时间、输出文件名等。

玩得开心！:-)

![演讲](../Images/47169d243a86dd9fdc6e98282746f338.png)

# ios - @selector 的多个参数

> ID：15362976
> 
> 赞同：0
> 
> 时间：2013-03-12T13:46:43.657
> 
> 标签：ios, objective-c, selector, nsinvocation

我正在目标 C 中创建一个游戏，但我被一个问题阻止了：我有一个警告要在 @selector 上传递多个变量。我想要做的是在我的 UIViewController 中调用一个方法，但要延迟一段时间。所以我尝试制作第一个方法，在延迟后调用另一个方法，如下所示：

```
-(void)AnimationCoinInitWith_x:(int)x y:(int)y w:(int)w h:(int)h afterDelay:(NSTimeInterval)t
{
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:
                                [self methodSignatureForSelector:@selector(AnimationCoinCopyInitWith_x:y:w:h:)]];
    [invocation setTarget:self];
    [invocation setSelector:@selector(AnimationCoinCopyInitWith_x:y:w:h:)];
    [invocation setArgument:x atIndex:1];
    [invocation setArgument:y atIndex:2];
    [invocation setArgument:w atIndex:3];
    [invocation setArgument:h atIndex:4];
    [NSTimer scheduledTimerWithTimeInterval:t invocation:invocation repeats:NO];
}

-(void)AnimationCoinCopyInitWith_x:(int)x y:(int)y w:(int)w h:(int)h
{
    UIImageView* imageViewCoin = [[UIImageView alloc] initWithFrame:CGRectMake(x, y, w, h)];
    [imageViewCoin setAnimationImages:images];
    [imageViewCoin setAnimationRepeatCount:1000];
    [imageViewCoin setAnimationDuration:(1/24)];
    [imageViewCoin startAnimating];
    [self addSubview:imageViewCoin];
    [imageViewCoin release];
} 
```

但它不起作用，我不知道为什么。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:53:24.177

在这里，您的问题是它`NSInvocation`不会自动设置您需要的参数的偏移量，并且由于所有 Objective-c 方法都有两个不可见的参数（`self`和`_cmd`），因此您必须将参数索引偏移 2，而不是 1。

这里的另一个问题是您无法通过引用传递参数，因此您必须使用地址运算符 ( `&`)：

```
[invocation setArgument:&x atIndex:2];
[invocation setArgument:&y atIndex:3];
[invocation setArgument:&w atIndex:4];
[invocation setArgument:&h atIndex:5]; 
```

一旦你这样做了，你上面的代码应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:48:57.057

作为一般规则，我们采用了避免 NSInvocation 的策略，除非绝对必要，因为代码往往难以阅读、脆弱并且在重构时令人头疼（以及错误的来源）。

此外，通过避免 NSInvocation 并使用简单的调用站点，编译器完全能够验证代码。

您可以使用“dispatch_after”模式：

```
 double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
     [self animationCoinInitWith_x: ...];
    }); 
```

或者，如果你想坚持使用 -performSelector:withObject:afterDelay: （我觉得它更具可读性）：

```
@interface Foo : NSObject
@end

@implementation Foo
- (void)invokeBlock:(dispatch_block_t)aBlock
{
    aBlock();
}

- (void)doIt:(int)x toIt:(int)y
{
    NSLog(@"%s %d %d", __PRETTY_FUNCTION__, x, y);
}
@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        Foo* foo = [Foo new];
        dispatch_block_t block = ^{
            [foo doIt:10 toIt:10];
        };
        [foo performSelector:@selector(invokeBlock:) withObject:[block copy] afterDelay:5];
        [[NSRunLoop currentRunLoop] run];
    }
    return 0;
} 
```

以上假设为 ARC（因此，缺少发布）。

# ios - 如果我使用 setter，来自 UIStoryboard 的对象将变为 nil

> ID：15362980
> 
> 赞同：0
> 
> 时间：2013-03-12T13:46:47.980
> 
> 标签：ios, uitableview, uistoryboard

我在 UITableviewcell 上有一些标签我想更改 setter 中的标签字体但出于一些奇怪的原因

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

当我调试时，我看不到单元格内没有任何东西被分配。当我放下设置器时，一切正常，但使用我不想使用的系统字体。

有人可以帮我弄清楚为什么会这样吗？

单元格.h 文件

```
#import <UIKit/UIKit.h>

@interface CheckoutCell : UITableViewCell
@property (weak, nonatomic) IBOutlet UILabel *labelQuantity;
@property (weak, nonatomic) IBOutlet UILabel *labelMainDescription;
@property (weak, nonatomic) IBOutlet UILabel *labelCountName;
@property (weak, nonatomic) IBOutlet UILabel *labelInchSize;
@property (weak, nonatomic) IBOutlet UILabel *labelMMsize;
@property (weak, nonatomic) IBOutlet UILabel *labelStaticTotal;
@property (weak, nonatomic) IBOutlet UILabel *labelTotalPrice;
@property (weak, nonatomic) IBOutlet UILabel *label_ItemPrice;
@property (weak, nonatomic) IBOutlet UIButton *btnBuyAnotherProduct;
@property (weak, nonatomic) IBOutlet UIButton *btnAddAnotherSet;

@end 
```

单元格.m 文件

```
#import "CheckoutCell.h"

@implementation CheckoutCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}
-(void) setLabelCountName:(UILabel *)labelCountName
{
    [self setLabel:labelCountName];

}
-(void) setLabelMMsize:(UILabel *)labelMMsize
{
    [self setLabel:labelMMsize];

}
-(void) setLabel_ItemPrice:(UILabel *)label_ItemPrice
{
    [self setLabel:label_ItemPrice];
}
-(void) setLabelInchSize:(UILabel *)labelInchSize
{
    [self setLabel:labelInchSize];

}
-(void) setLabelMainDescription:(UILabel *)labelMainDescription
{
    [labelMainDescription setFont:[UIFont fontWithName:@"MuseoSans-500" size:14]];
}
-(void) setLabelQuantity:(UILabel *)labelQuantity
{
    [labelQuantity setFont:[UIFont fontWithName:@"MuseoSans-500" size:18]];
}
-(void) setLabelTotalPrice:(UILabel *)labelTotalPrice
{
    [labelTotalPrice setFont:[UIFont fontWithName:@"MuseoSans-500" size:14]];
}
-(void) setLabelStaticTotal:(UILabel *)labelStaticTotal
{
    [labelStaticTotal setFont:[UIFont fontWithName:@"MuseoSans-500" size:14]];
}
//BTN setters
-(void) setBtnAddAnotherSet:(UIButton *)btnAddAnotherSet
{
    [btnAddAnotherSet.titleLabel setFont:[UIFont fontWithName:@"MuseoSans-500" size:12]];
    btnAddAnotherSet.titleLabel.textAlignment = UIBaselineAdjustmentAlignCenters;

}
-(void) setBtnBuyAnotherProduct:(UIButton *)btnBuyAnotherProduct
{
    [btnBuyAnotherProduct.titleLabel setFont:[UIFont fontWithName:@"MuseoSans-500" size:12]];
    btnBuyAnotherProduct.titleLabel.textAlignment = UIBaselineAdjustmentAlignCenters;

}

//generic setter
-(void) setLabel:(UILabel *)label
{
    [label setFont:[UIFont fontWithName:@"MuseoSans-300" size:10]];

}
@end 
```

提前 10 倍为谁提供帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:56:46.337

我相信你应该只设置标签的文本而不是创建并再次设置标签。例如

```
-(void) setLabelCountName:(UILabel *)labelCountName{
[self setLabel:labelCountName]; 
```

}

应该

```
-(void) setLabelCountName:(NSString *)labelCountName{
[self.labelCountName setText:labelCountName]; 
```

}

您也应该在 StoryBoard 设计器或 initWith... 方法中更改字体。

# java - 非无头模式：Apple AWT Java VM 在第一个线程上加载

> ID：15362983
> 
> 赞同：0
> 
> 时间：2013-03-12T13:46:54.310
> 
> 标签：java, macos, awt, javafx-2, headless

我正在 Eclipse 中开发一个 Maven 构建的 JavaFX 2 应用程序。

一切在 Windows 上运行良好，但 Mac OSX 导致问题。我必须包含以下行以防止应用程序以无头模式启动：

```
System.setProperty("java.awt.headless", "false"); 
```

但是，禁用这样的无头模式会在 Mac 上给我这个错误：

> java[15689:707] Cocoa AWT：Apple AWT Java VM 已在第一个线程上加载——无法启动 AWT。(
> 
> 0 liblwawt.dylib
> 0x000000016674fba2 JNI_OnLoad + 468 1 libjava.dylib
> 0x00000001037286d1 Java_java_lang_ClassLoader_00024NativeLibrary_load + 207 2 ??? 0x00000001037fef90 0x0 + 4353683344 ) 应用程序启动方法异常

在无头模式下运行没有问题，但我需要 Robot 类来处理 keyPress 事件。我什至不知道为什么它在我不需要它的时候试图无头运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:16:55.770

由于 AWT 要求在`main`AWT 应用程序的线程上运行，它与 JavaFX 不兼容。您可以在这里找到解决方法：[JavaFX screencapture headless exception on OSX](https://stackoverflow.com/questions/15320915/javafx-screencapture-headless-exception-on-osx)

# forms - 表单发布到贝宝，但回调不包含自定义字段

> ID：15362985
> 
> 赞同：0
> 
> 时间：2013-03-12T13:46:58.117
> 
> 标签：forms, callback, paypal, sandbox

我设置了一个沙盒帐户，我正在使用沙盒模拟付款并记录贝宝沙盒发布的 $_POST 数组（模拟）。

这是我发送给贝宝的表格（不是模拟的）

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
   // charset, name, email, etc.
   // ...
   <input type='hidden' name='on0' value='Custom field 1 NAME'>
   <input type='hidden' name='os0' value='Custom field 1 VALUE'>
</form> 
```

如您所见，我有 1 个名为 on0 的自定义字段。我应该如何检索该值？我无法在贝宝的沙箱页面上创建自定义字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:53:17.047

这些应该是返回给您的变量。您能否提供您正在使用的完整 PayPal 按钮代码。另外，您使用什么方法将数据返回到您的站点？

# visual-studio-2010 - 收藏已修改；枚举操作可能无法执行

> ID：15362989
> 
> 赞同：0
> 
> 时间：2013-03-12T13:47:12.723
> 
> 标签：visual-studio-2010, devexpress, vb.net-2010

VB.NET 2010 项目，VS 2010，VSS（认为是 2008 年）。

查看此错误的其他帖子，似乎是因为循环、枚举等发生了变化......在我的情况下，我所做的就是打开项目，进行任何更改，比如重新调整表单大小、保存和关闭，当我重新打开该表单时，出现此错误。然后我可以撤消代码的签出，它可以正常打开。甚至不更改任何代码，只需重新调整表单大小。我所做的任何更改都会出现此错误。该代码已经在生产中并且工作正常，我认为它只发生在我的电脑上。

帮助！先感谢您...

添加 - 实际上它看起来只发生在表单的更改中，并且错误仅在表单上，​​而不是代码上。但它发生在任何形式上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:53:21.633

一位同事帮我解决了这个问题。这是 DevExpress Windows 控件和 Visual Studio 的问题。

解决方案在这里： [如何为 Developer Express 控件启用视觉继承。](http://www.devexpress.com/Support/Center/p/A2912.aspx)

# haskell - 试图理解 Haskell 中的函数应用运算符

> ID：15362990
> 
> 赞同：10
> 
> 时间：2013-03-12T13:47:14.810
> 
> 标签：haskell, operators

我正试图围绕`$`Haskell 中的函数应用程序运算符 ()。

我正在研究 Learn You a Haskell 中的示例，并且我认为我理解了以下示例：

```
Prelude> map ($ 3) [(+4), (*10), (^2), sqrt]
[7.0,30.0,9.0,1.7320508075688772] 
```

然后我尝试了以下变体，它也运行良好：

```
Prelude> map ($ 3) [(+4), (*10), (\x -> x^2), sqrt]
[7.0,30.0,9.0,1.7320508075688772] 
```

最后，我尝试如下修改列表中的第三个函数，结果报错：

```
Prelude> map ($ 3) [(+4), (*10), (\x -> 2^x), sqrt] 
<interactive>:53:38:
    Ambiguous type variable `b0' in the constraints:
      (Floating b0)
        arising from a use of `sqrt' at <interactive>:53:38-41
      (Integral b0) arising from a use of `^' at <interactive>:53:33
      (Num b0) arising from the literal `3' at <interactive>:53:8
    Probable fix: add a type signature that fixes these type variable(s)
    In the expression: sqrt
    In the second argument of `map', namely
      `[(+ 4), (* 10), (\ x -> 2 ^ x), sqrt]'
    In the expression: map ($ 3) [(+ 4), (* 10), (\ x -> 2 ^ x), sqrt]
Prelude> 
```

似乎最终`sqrt`函数是否以某种方式开始与前一个列表元素相关联，因为以下变体可以正常工作：

```
Prelude> map ($ 3) [(+4), (*10), (\x -> 2^x)]
[7,30,8] 
```

有人可以告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T13:54:47.263

使用的幂运算符的类型是

```
(^) :: (Num a, Integral b) => a -> b -> a 
```

所以当你使用时`\x -> 2^x`，你会得到一个`Integral`约束`3`。但`sqrt`施加了`Floating`约束。所以 3 的类型必须满足

```
3 :: (Integral t, Floating t) => t 
```

但是默认类型列表中没有两个实例，即`Integer`and `Double`，因此默认失败，并且您留下了一个模棱两可的类型变量。

当你有 时`\x -> x^2`，只有`Num`第一个函数和`Floating`来自的约束`sqrt`，所以类型默认为`Double`。

如果你使用，你可以让它工作

```
(**) :: Floating a => a -> a -> a 
```

作为您的幂运算符，则类型可以再次默认为`Double`.

# unit-testing - 改变参数状态的 void 返回方法是反模式吗？

> ID：15362995
> 
> 赞同：3
> 
> 时间：2013-03-12T13:47:29.790
> 
> 标签：unit-testing, mocking, anti-patterns

返回 void 但更改其参数状态（即提供隐藏或隐式返回值）的方法通常是一种不好的做法吗？

我发现它们很难模仿，这表明它们可能是糟糕设计的标志。

有哪些模式可以避免它们？

一个非常人为的例子：

```
public interface IMapper
{
    void Map(SourceObject source, TargetObject target);
}

public class ClassUnderTest
{
    private IMapper _mapper;

    public ClassUnderTest(IMapper mapper)
    {
        _mapper = mapper;
    }

    public int SomeOperation()
    {
        var source = new SourceObject();
        var target = new TargetObject();

        _mapper.Map(source, target);

        return target.SomeMappedValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:56:56.913

如果你这样做，你的代码会更容易测试：

```
public interface IMapper
{
    TargetObject Map(SourceObject source);
}

public class ClassUnderTest
{
    private IMapper _mapper;

    public ClassUnderTest(IMapper mapper)
    {
        _mapper = mapper;
    }

    public int SomeOperation(SourceObject source )
    {
        var target =  _mapper.Map(source, target);
        return target.SomeMappedValue;
    }
} 
```

您现在可以分别测试 Map 操作和 SomeOperation。问题是你改变了一个对象的状态，这使得很难为测试提供一个存根。返回新对象时，您可以返回目标的测试存根并测试您的调用方方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:48:58.923

在某种程度上是的。

你描述的是典型的副作用。副作用使程序难以理解，因为您需要理解的信息不包含在调用堆栈中。您需要其他信息，即在之前（以及以什么）顺序调用了哪些方法。

解决方案是在没有副作用的情况下进行编程。这意味着您不会更改变量、字段或任何东西。相反，您将返回您通常会更改的新版本。

这是函数式编程的基本原则。

当然，这种编程方式有它自己的挑战。只考虑 I/O。