# StackOverflow 问答 15989000-15989999

# java - 通用存储库接口

> ID：15989001
> 
> 赞同：1
> 
> 时间：2013-04-13T14:45:01.620
> 
> 标签：java, jakarta-ee

我有这个界面：

```
public interface CrudRepository<T, I> {

} 
```

但是我不能添加这些方法，因为它们会发生冲突：

```
boolean remove(final T object);

boolean remove(final I id); 
```

有可能解决这个问题吗？T 是类型，I 是 id 类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:53:10.727

你知道 T 和 I 会受到某些类型层次结构的限制吗？在这种情况下，您可以使用它。

```
class Myclass<K extends ClassA ,V extends ClassB>
{
    private void remove(K k){}
    private void remove(V V){}
} 
```

我也同意@Luciano。尽可能消除歧义。它将提高代码的可读性。

# jquery - jquery 允许用户下载 kinecticjs 'canvas'

> ID：15989002
> 
> 赞同：0
> 
> 时间：2013-04-13T14:45:03.067
> 
> 标签：jquery, canvas, kineticjs

我试图允许用户使用客户端脚本保存他们的 kinecticjs 创建。我尝试使用 bytescout 生成 pdf，但我认为它不允许使用 kineticjs 阶段。所以我想我需要一个替代方案。也许允许他们将其作为图像下载？但是可以使用 JS/jQuery 吗？还是我需要使用php？

HTML：

```
 <div class="Layout3_1" >                
        <div id="tag_canvas"></div>
    </div>
    <div id="save_tag"><input type="button" id="saveBtn" value="Save Tag"/></div> 
```

动力学阶段：

```
/* Set up the DEFAULT Plant tag */
    stage = new Kinetic.Stage({
        container: 'tag_canvas',
        width: stageWidth,
        height: stageHeight
    });

  layer = new Kinetic.Layer({
        width: stageWidth,
        height: stageHeight,
        scale: {x:scaleX, y:scaleY},
  });

    kinetic_common_name = new Kinetic.Text({
        //x: commonLeftIndent ,
        y: commonTopIndent ,
        //text: commonname,
        fontSize: commonFontSize,
        fontFamily: commonFont,
        fill: 'green',
        lineHeight:commonLineSpace,
        align: commonTextAlign,
        draggable: true,
    });

    kinetic_botanical_name = new Kinetic.Text({
        //x: latinLeftIndent ,
        y: latinTopIndent ,
        //text: latinname,
        fontSize: latinFontSize,
        fontFamily: latinFont,
        fill: 'green',
        lineHeight:latinLineSpace,
        align: latinTextAlign,
        draggable: true
    });

    var hibiscus_imageObj = new Image();
    hibiscus_imageObj.src = 'images/tag_templates/hibiscus_template.png';
  hibiscus_imageObj.onload = function() {
        hibiscus = new Kinetic.Image({
            x: 0,
            y: 0,
            image: hibiscus_imageObj,
    });
        layer.add(hibiscus);
        hibiscus.hide();
    };

    var sm_oval_imageObj = new Image();
    sm_oval_imageObj.src = 'images/tag_templates/small_oval_template.png';
  sm_oval_imageObj.onload = function() {
        sm_oval = new Kinetic.Image({
            x: 0,
            y: 0,
            image: sm_oval_imageObj,
    });
        layer.add(sm_oval);
        sm_oval.hide();
    };

    var xlg_oval_imageObj = new Image();
    xlg_oval_imageObj.src = 'images/tag_templates/xlarge_oval_template.png';
  xlg_oval_imageObj.onload = function() {
        xlg_oval = new Kinetic.Image({
            x: 0,
            y: 0,
            image: xlg_oval_imageObj,
    });
        layer.add(xlg_oval);
        xlg_oval.hide();
    };

    var lg_oval_imageObj = new Image();
  lg_oval_imageObj.onload = function() {
        lg_oval = new Kinetic.Image({
            x: 0,
            y: 0,
            image: lg_oval_imageObj,
    });

        layer.add(lg_oval);
        layer.add(kinetic_common_name);
        layer.add(kinetic_botanical_name);

        kinetic_common_name.setText(commonname);
        kinetic_botanical_name.setText(latinname);

        //13 represents dimension marks on right of template image
        commonStartX = (0 + ((lg_oval.getWidth()-13)/2)) - (kinetic_common_name.getTextWidth()/2); //center common text horizontal
        botanicalStartX = (0 + ((lg_oval.getWidth()-13)/2)) - (kinetic_botanical_name.getTextWidth()/2); //center common text horizontal

        kinetic_common_name.setX(commonStartX);
        kinetic_botanical_name.setX(botanicalStartX);

        stage.add(layer);

    };
    lg_oval_imageObj.src = 'images/tag_templates/large_oval_template.png';
        //kinetic_common_name.setText($("#Cname").val());
    //kinetic_common_name.setText(commonname);
  //layer.draw();

/* END Set up the DEFAULT Plant tag */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:38:33.947

那这个呢：

```
stage.toDataURL({
      callback: function(dataUrl) {
        window.open(dataUrl);
      }
    }); 
```

来自[http://www.html5canvastutorials.com/kineticjs/html5-canvas-stage-data-url-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-stage-data-url-with-kineticjs/)

# c# - CSS 显示模板类名中的额外空格

> ID：15989005
> 
> 赞同：6
> 
> 时间：2013-04-13T14:45:06.760
> 
> 标签：c#, css, asp.net-mvc-4, jquery-datatables, display-templates

我在我的 C# MVC4 应用程序中使用显示模板来构造我希望我的自定义模型如何显示在我的视图中的数据表中。对于数据表，我使用 datatables.net。在下面的代码中，我给每个`<td>`类名“对齐”，但是当我运行应用程序并检查元素时，分配的类名在末尾有一个空格，例如“对齐”

```
@using System;
@model MyProject.Models.CellValueViewModel

<td class="aligned">
    @{if(Model.Value.StartsWith("<input type='checkbox'"))
      {
          @Html.Raw(Model.Value);
      }     
      else if(Model.Value == String.Empty)
      {
          @Html.Encode(0.00);
      }     
      else
      {
          @Html.DisplayFor(x => x.Value);
      }
    }
</td> 
```

谁能提供为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T22:19:11.107

根据您保存文档的方式，有时 Windows 会添加额外的字符。有时我会在使用带有签名的 UTF-8 编码保存的文档中看到这样的奇怪行为。

1）要查看这是否是您遇到的原因，请转到文件->另存为；

2）在“保存”按钮上单击向下箭头并选择“使用编码保存”

3）确保选择不带编码的utf8。它靠近底部。4）确保您没有选择带有编码的utf8，它位于选项顶部附近。

# linux - 将用户添加为某个目录的所有者

> ID：15989007
> 
> 赞同：2
> 
> 时间：2013-04-13T14:45:13.967
> 
> 标签：linux, macos, ownership

对不起，如果我的问题太简单了。我知道如何更改目录“我的目录”的所有者。但是假设我有一个 git 用户在目录中拥有一个文件“myfile”

```
-rw-r--r--   1 git   staff 9201 somedate myfile 
```

但我想添加一个现有用户，该用户对所有文件目录具有相同级别的所有权。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:46:00.180

Do you mean that you want two users to have the same permissions for all of the contents of a directory?

If so, there are potentially two ways:

*   Add the two users to a group, and give that *group* suitable access to the directory. You can create a fresh group just for this, if you want.

*   Use ACLs. This depends on your unix: the BSDs tend now to have good support for ACLs, Linuxes somewhat less so (broadly speaking). Do `man acl` to see what's available. This route can get confusing quite quickly.

The other possibility is to set the directory's sticky bit (see `man sticky`). This is how the `/tmp` directory is configured, and it lets multiple users create and own files within a directory, without letting them see others' files. I don't know if that matches what you're looking for, but if it does, it's more straightforward than either of the two suggestions above.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:23:03.750

文件或目录具有：1）和所有者（`git`在您的情况下）；2）一组（`staff`在你的情况下）和3）其他。在您的情况下，所有者为“rw”权限，该组具有“r”权限，其他人具有“r”权限。

如果您希望每个人都拥有相同的权限，请说“rw”，然后使用：

```
chmod g+w,o+w myfile 
```

如果您只希望另一个用户拥有与所有者相同的权限，那么您必须将该其他用户放入`staff`组中。或者，创建另一个组，并将所有其他用户放在该组中。创建组并向该组添加成员取决于您的操作系统。一旦你有了组，你会做：

```
 chgrp mygrp myfile
   chmod g+w myfile 
```

# java - Dropwizard：如何以编程方式停止服务

> ID：15989008
> 
> 赞同：13
> 
> 时间：2013-04-13T14:45:17.247
> 
> 标签：java, dropwizard

要启动服务，我知道有人使用`new MyService().run(args)`. 如何阻止它？

我需要在我的测试中以编程方式启动`setUp()`和停止。`tearDown()`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T19:43:36.420

您可以在新线程中启动服务，一旦测试结束，服务将自动关闭。

然而，从 dropwizard 0.6.2 开始，dropwizard-testing 模块包含一个完全适用于这个用例的[junit 规则（](https://github.com/junit-team/junit/wiki/Rules)[见这里](http://dropwizard.codahale.com/maven/dropwizard-testing/apidocs/com/yammer/dropwizard/testing/junit/DropwizardServiceRule.html)）。

此规则的用法如下所示：

```
Class MyTest {

    @ClassRule
    public static TestRule testRule = new DropwizardServiceRule<MyConfiguration>(MyService.class,
                    Resources.getResource("service.yml").getPath()));

    @Test
    public void someTest(){
    .... 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-22T14:45:57.927

保留`environment`变量并将以下方法添加到您的应用程序中：

```
public void stop() throws Exception {
  environment.getApplicationContext().getServer().stop();
} 
```

现在您可以调用`myService.stop()`以停止服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-04T14:48:56.523

感谢@LiorH 的这个好建议。

这是使用**dropwizard-0.6.2**中的 DropwizardServiceRule 的完整测试类。

首先创建一个用于测试的服务配置：`testing-server.yml`并将其放在测试的类路径中（例如`src\test\resources`）。这样，您可以设置不同的端口供测试服务使用：

```
http:
  port: 7000
  adminPort: 7001 
```

检查“/request”位置是否有资源的简单测试类如下所示：

```
class TheServiceTest {

    @ClassRule
    public static DropwizardServiceRule RULE = new DropwizardServiceRule<MyConfiguration>(TheService.class,
            Resources.getResource("testing-server.yml").getPath());

    @Test
    public void
    dropwizard_gets_configured_correctly() throws Exception {
        Client client = new Client();

        ClientResponse response = client.resource(
                String.format("http://localhost:%d/request", RULE.getLocalPort()))
                        .get(ClientResponse.class);

        assertThat(response.getStatus(), is(200));
    }
} 
```

如果您不知道选择什么实现，我还添加了导入。

```
import com.google.common.io.Resources;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.yammer.dropwizard.testing.junit.DropwizardServiceRule;
import org.junit.ClassRule;
import org.junit.Test;
import org.junit.rules.TestRule;

import static org.hamcrest.core.Is.is;
import static org.junit.Assert.assertThat; 
```

在测试结束时，服务器将正常关闭，因此您无需担心。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T17:43:01.817

您可以尝试使用 Dropwizard 内部使用的 org.eclipse.jetty.server.Server 的 stop() 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-02T12:40:19.233

或者你在你的主/构造函数中使用这个java特性......：

```
 // In case jvm shutdown
    Runtime.getRuntime().addShutdownHook(new Thread() {
        @Override
        public void run()
        {
            // what should be closed if forced shudown
            // ....

            LOG.info(String.format("--- End of ShutDownHook (%s) ---", APPLICATION_NAME));
        }
    }); 
```

# html - li 标签 - 使图像更小

> ID：15989009
> 
> 赞同：0
> 
> 时间：2013-04-13T14:45:19.323
> 
> 标签：html, css

我无法将我的 li 标签上的图像变小，比如 35x35px。

```
<ul>
  <li id="grund_brand"></li>
</ul> 
```

我的 CSS

```
#grund_brand {
    list-style-image: url('/indhold/uddannelse/grund_brand.jpg');
} 
```

问题是：图片很棒，但希望将其缩小到 35x35 像素。

我真的不记得这样做需要什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:54:03.357

最好的解决方案是使用已经是您需要的大小的图像。但如果你不能这样做，请尝试将图像放入 li 中，如下所示：

```
<ul>
  <li id="grund_brand"><img src="/indhold/uddannelse/grund_brand.jpg" /></li>
</ul> 
```

然后使用 CSS 设置该图像的高度和宽度：

```
li img { height: 35px; width: 35px; } 
```

# java - 同时执行两条命令行

> ID：15989013
> 
> 赞同：0
> 
> 时间：2013-04-13T14:45:37.753
> 
> 标签：java

这是我正在尝试执行的一段代码：

```
String intro = "Test String";
System.out.println("===============");  //Line 1
System.out.println(intro);              //Line 2
System.out.println("===============");  //Line 3 
```

我正在为介绍“制作动画”，即我使用循环将字符串向右移动一个空格以进行每次迭代。例如，第一次是“测试字符串”，第二次是“测试字符串”。我还使用 Thread.sleep() 函数来延迟动画。但是，在 for 循环完成之前，我无法打印第 3 行。有没有办法做到这一点？谢谢。

编辑：

此函数用于移动字符串：

```
public String moveChar(String a){
    char temp=' ';
    char[] charOfA = new char[50];
    charOfA = a.toCharArray();
    temp = a.charAt(a.length()-1);

    for (int i = a.length()-1; i > 0; i--) {

        charOfA[i] = charOfA[i-1];

    }
    charOfA[0] = temp;
    a = new String(charOfA);
    return a;
} 
```

那么 Main 上的一个是：

```
System.out.println("==================================");
for (int i = 0; i < 5; i++) {
    intro = moveChar(intro);
    System.out.print(intro);
    System.out.print("\r");
    sleep(1000);
}
System.out.println("=================================="); 
```

睡眠功能只是 Thread.sleep(int milliseconds); 周围有try-catch。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:19:32.143

您*可以*打印退格`\b`并擦除您打印的任何内容以模拟动画。

```
 String x = "Test String";
        for (int i = 0; i < 10; i++)
        {
            System.out.print(x);
            int len = x.length();
            for (int j = 0; j < len; j++)
            {
                System.out.print('\b');
            }
            x = " " + x;
        } 
```

我不知道这是否适用于所有平台。似乎在 Win7 命令行上工作。

# python - 设置对特定 Gtk3 MenuActions 的敏感度（python）

> ID：15989015
> 
> 赞同：1
> 
> 时间：2013-04-13T14:45:52.770
> 
> 标签：python, gtk3

我有一个应用程序，其中一些菜单操作在其他一些事情发生之前不应该是敏感的（如下面的最小代码中，在单击“新建”之前，“保存”没有意义）。

设置整个菜单很简单，例如示例中的 File-menu insensitive。设置工具栏按钮不敏感也很容易。这两个分别显示为 the`MenuBar`和 the 的子`ToolBar`级。

但是，当我尝试设置菜单的单个操作时，我完全迷失了。我根本找不到通往他们的道路。既不会像示例中的方法那样从它们（按下它们之后）上`_do_save`移，也不会从菜单下移。

**问题：**

*如何从一开始就设置“保存”不敏感并在单击“新建”时使其变得敏感？*

**要求：**

我仍然想使用`UIManager`如下设置菜单。

该解决方案不应要求用户单击“保存”来切换其灵敏度，它应该从一开始就不敏感。

**最小代码：**

节目中的评论是`__init__`我希望访问菜单操作的地方......

```
#!/usr/bin/env python
from gi.repository import Gtk

class W(Gtk.Window):

    UI = """
    <menubar name="MainMenu">
        <menu action="MenuFile">
            <menuitem action="MenuNew" />
            <menuitem action="MenuSave" />
            <separator />
            <menuitem action="MenuQuit" />
        </menu>
    </menubar>
    """

    def __init__(self):

        super(W, self).__init__()
        self.set_default_size(300, 300)
        self.connect("destroy", Gtk.main_quit)

        box = Gtk.Box(orientation=Gtk.Orientation.VERTICAL)
        self.add(box)

        action_group = Gtk.ActionGroup("ui_actions")
        action_group.add_actions(
            [
                ('MenuFile', None, '_File'),
                ('MenuNew', Gtk.STOCK_NEW, '_New', None, 'Should enable save',
                 self._do_new),
                ('MenuSave', Gtk.STOCK_SAVE, '_Save', None,
                 'Only sensitive after new', self._do_save),
                ('MenuQuit', Gtk.STOCK_QUIT, '_Quit', None, 'Exits',
                 Gtk.main_quit)
            ]
        )

        uim = Gtk.UIManager()
        uim.add_ui_from_string(self.UI)
        self.add_accel_group(uim.get_accel_group())
        uim.insert_action_group(action_group)

        self._menu = uim.get_widget("/MainMenu")
        box.pack_start(self._menu, False, False, 0)

        #HERE'S WHERE I DON'T KNOW WHAT TO DO
        #How to append the widget corresponing ot 'MenuSave' into
        #self._sensitie_widgets
        self._sensitive_widgets = []
        self._set_sensitive_state(False)

        self.show_all()

    def _set_sensitive_state(self, val):
        """Does nothing now, because the GtkAction for 'MenuSave' has
        not been appended to self._set_sensitive_state"""

        for w in self._sensitive_widgets:
            w.set_sensitive(val)

    def _do_new(self, *args):
        """Callback should just invoke self._set_sensitive_state as below"""

        self._set_sensitive_state(True)

    def _do_save(self, widget):
        """This should only be possible after New has been pressed.
        Currently a failed attempt at tracing the way to access it."""
        def _do_trace(w):

            if hasattr(w, 'get_parent'):
                _do_trace(w.get_parent())

            else:
                print dir(w)
            print w

        _do_trace(widget)

if __name__ == "__main__":

    w = W()
    Gtk.main() 
```

任何帮助将不胜感激，因为我对此感到困惑（感觉应该很直接）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:53:02.807

```
w = [uim.get_widget('/MainMenu/MenuFile/MenuSave')] 
```

# c# - 强制复选框单击事件

> ID：15989023
> 
> 赞同：1
> 
> 时间：2013-04-13T14:47:03.113
> 
> 标签：c#, javascript, asp.net

我有一个与 asp:checkboxlist 中每个复选框项目的单击事件相关联的 javascript 函数。但是，有一个选项，用户可以动态地将新项目添加到列表中。我已经成功完成了这段代码，添加了item，并且绑定了onclick事件的javascript函数。但是，当我将项目添加到列表时，我需要从后面的代码中运行一次 onclick 函数。如何从 C# 代码隐藏中简单地运行预先存在的 javascript 函数？

```
protected void btnAddLang_Click(object sender, EventArgs e)
{
        Healthline.ServiceRecords.DataHelper helper = new Healthline.ServiceRecords.DataHelper();
        Hashtable prms = new Hashtable();
        DataSet dsLangs = new DataSet();

        prms = new Hashtable();
        prms.Add("@LangName", txtOtherLanguages.Text);

        dsLangs = helper.RunSP("mySP", prms);

        if (dsLangs.Tables[0].Rows.Count > 0)
        {
            ListItem item = new ListItem();
            item.Value = dsLangs.Tables[0].Rows[0]["LanguageID"].ToString();
            item.Text = dsLangs.Tables[0].Rows[0]["Language"].ToString();
            chkTopLanguages.Items.Add(item);
        }

        foreach (ListItem listitem in chkTopLanguages.Items)
        {
            listitem.Attributes.Add("onclick", "GetLanguages()");
        }

        //here I need to force an immediate call to the javascript function GetLanguages()
    } 
```

如果有帮助。如果我可以强制触发我刚刚添加的复选框的 onclick 事件，而不是直接调用 javascript 函数，那应该也可以，因为 javascript 函数被称为复选框项的 onclick

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:22:06.200

我建议向函数添加一个参数，并传入控件。这样您就可以处理`onclick`, 并且可以在回发页面时调用该函数，即在第一次呈现动态复选框时调用该函数。

# c - 关于在 C 中使用指针的函数

> ID：15989027
> 
> 赞同：0
> 
> 时间：2013-04-13T14:47:35.820
> 
> 标签：c, function, pointers

我在 C 中做了一个简单的函数，它接受 1 个指向 int 的指针、1 个指向 int 的双指针和一个整数作为参数（第三个参数可能没用，因为它表示存储在第一个参数指向的空间中的整数数）。它的作用是：首先，在内存中腾出足够的空间来容纳 2 个整数，并将第二个参数设置为指向该空间。其次，将整数从第一个参数指向的空间复制到第二个参数指向的空间。第三，它将第一个参数指向的空间中的所有整数递增 1。我知道这个函数没用，但我想知道我的解决方案出了什么问题。这是代码：

```
#include <stdlib.h>
#include <stdio.h>
int *x, *y;

void duplicateAndIncreaseByOne(int *arg1, int **arg2, int arg1Elements){
    int ctr;
    *arg2 = (int *) malloc(arg1Elements * sizeof(int));
    for(ctr = 0; ctr < arg1Elements; ctr++){        
        **(arg2 + ctr) = *(arg1 + ctr);
        *(arg1 + ctr) = *(arg1 + ctr) + 1;
    }
}

int main() {
  int j;
  y=(int *)malloc(2*sizeof(int));   
  *y=10; *(y+1)=50;
  duplicateAndIncreaseByOne(y, &x, 2);
  printf("The pointer y contains the elements y[0] = %d and y[1] = %d\n", y[0], y[1]);
  printf("The pointer x contains the elements x[0] = %d and x[1] = %d\n", x[0], x[1]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:50:34.327

在行

```
**(arg2 + ctr) = *(arg1 + ctr); 
```

您正在将偏移量添加到`arg2`而不是`*arg2`. 那应该是

```
*(*arg2 + ctr) = *(arg1 + ctr); 
```

目前，您正在取消引用一个不存在的`int**`过去`arg2`。

# mysql - MySQL 错误 1045，“用户 'user'@'localhost' 的访问被拒绝（使用密码：YES）”

> ID：15989030
> 
> 赞同：6
> 
> 时间：2013-04-13T14:47:58.700
> 
> 标签：mysql, mysql-error-1045

这个问题似乎被问了很多，但我找不到明确的答案。

我正在使用 MySQL 进行一些 webapp 测试，一开始我使用了*“root”*用户（密码非空）。我的 root 用户在应用程序（通过 PHP 和 Python 的 Django 测试）、命令行和 PHPMyAdmin 都可以正常工作。

但是我不想使用 root 用户，所以我创建了另一个用户，并将所有权限授予用户应该需要的数据库。（我为此任务使用了以*“root”*身份登录的 PHPMyAdmin ）。

新用户无法登录 MySQL。既不是来自 Django 应用程序，也不是来自 PHPMyAdmin，也不是来自命令行。

我有两个可能的怀疑：

1.  用户缺少全局权限。（正如我所说，我授予了所有数据库权限，但是我没有授予任何全局权限）；

2.  用户配置的主机。( *'root'在**mysql.user*表中有四行，用于主机*'localhost'*、*'my-pc-name'*、*'127.0.0.1'*和*'::1'*；而新用户有一行用于主机*' %'* )

（我已经仔细检查了密码，所以我确信这不是密码问题。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T14:52:08.520

% 表示新用户可以从任何主机访问数据库。

但是，如果您提供 CREATE USER 语句会更有用。

此外，请查看下面的 MySQL 手册，其中解释了为什么用户应该同时拥有`@'localhost'`和`@'%'`：

[MySQL 参考手册 - 添加用户](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T23:38:41.780

重启mysql服务器+“刷新权限；” 命令为我解决了

# variables - TASM：未命名的变量声明

> ID：15989031
> 
> 赞同：1
> 
> 时间：2013-04-13T14:48:02.977
> 
> 标签：variables, assembly, declaration, tasm

在阅读一些 TASM 代码时，我遇到了一个未知的语法，但我找不到它的含义：

```
.data
    XX  DW  1
        DB  4 
```

这是什么意思 ？我猜你声明了一个名为 XX 的单词初始化为 1，但是下一行呢？它是 XX 声明的一部分还是保留某个位置的未命名变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:05:15.337

这意味着在 XX 标记的地址处，我可以访问一个字，然后是一个字节（因此保留了 3 个字节）。

# asp.net-mvc - asp.net mvc：禁用的 RoleManager 仍在执行

> ID：15989034
> 
> 赞同：1
> 
> 时间：2013-04-13T14:48:31.473
> 
> 标签：asp.net-mvc

我有一个网站，其中配置有：

```
<roleManager enabled='false'></roleManager> 
```

但是我仍然可以看到 roleManager 在管道中执行（通过查看跟踪，当 roleManager 尝试从 machine.config 中配置的 SQL 提供程序加载角色时，我也遇到了异常）

如何禁用角色管理器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:48:47.037

**使固定**

将值为 false app 设置的 enableSimpleMembership 添加到您的 web.config。

**原因**

```
<roleManager enabled="false" /> 
```

将导致`Roles.Enabled`标志设置为假，如预期的那样，

但有`WebMatrix.WebData.WebSecurity`一句话说：

```
internal static void PreAppStartInit()
{
  if (!ConfigUtil.SimpleMembershipEnabled)
    return;
  ...
  Roles.Enabled = true;
  ...
} 
```

这将覆盖 roleManager 设置（此代码在 RoleManager 模块之前执行）。

要禁用，您可以使用(web.config)`SimpleMembership`添加应用设置：`enableSimpleMembership``value="false"`

```
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0">
    <appSettings>
        <add key="enableSimpleMembership" value="false" />
    </appSettings>
</configuration> 
```

这将阻止 webmatrix 启用 RoleManager。

另一种解决方案（hack）是从模块列表中删除 RoleManager 模块：

```
....
<system.webServer>
    <modules>
        <remove name="RoleManager"/>
    </modules>
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T00:29:00.120

不...我认为它不正确，即使 enableSimpleMembership=false，您仍然需要实现一个 Dummy RoleProvider，否则，异常**“角色管理器功能尚未启用”。**

下面是如何实现一个虚拟 RoleProvider：

[仅关闭 SimpleMembership 中的角色提供程序](https://stackoverflow.com/questions/20760610/turning-off-only-the-role-provider-in-simplemembership/22393820#22393820)

# android - 我们如何通过单击自定义列表视图中的链接来调用 webview？

> ID：15989038
> 
> 赞同：1
> 
> 时间：2013-04-13T14:49:11.053
> 
> 标签：android, listview, android-webview, custom-adapter

我有一个 listView 和一个自定义适配器，并且我为文本视图创建了一个 onclicklistener，现在我想在 webview 中打开该文本视图的链接，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T12:06:58.510

经过大量研究，我找到了答案，这真的很容易。您必须在自定义适配器类中设置 onclickListener，仅此而已，并使用 intent.putextra(); 让一个类显示 webview 向该类发送字符串。我显示 webview 的课程是这个

```
public class Main extends Activity {

WebView myWebView;

@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.webview);

Intent in = getIntent();
String url = in.getStringExtra(("url"));
myWebView = (WebView) findViewById(R.id.webview);

myWebView.getSettings().setBlockNetworkImage(true);

myWebView.getSettings().setBlockNetworkLoads(true);

myWebView.setWebViewClient(new WebViewClient());
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setBuiltInZoomControls(true);
myWebView.getSettings().setDomStorageEnabled(true);
myWebView.getSettings().setPluginState(PluginState.ON);
myWebView.getSettings().setUserAgentString("Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1A543a Safari/419.3");
myWebView.loadUrl(url);
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
    myWebView.goBack();
    return true;
    }
    return super.onKeyDown(keyCode, event);
    }
class MyWebViewClient extends WebViewClient {
      @Override
      // show the web page in webview but not in web browser
       public boolean shouldOverrideUrlLoading(WebView view, String url) {
        //1 option 
         getApplicationContext().startActivity(
         new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
        // 2 option
        view.loadUrl(url);
            return true;
      }
    }
    } 
```

# javascript - 使用 JavaScript 更改浏览器的滚动模式？

> ID：15989039
> 
> 赞同：1
> 
> 时间：2013-04-13T14:49:18.637
> 
> 标签：javascript

从 JavaScript 中，如何更改浏览器的滚动模式以使其进入用户控制的自动滚动模式？（注意：我**不是**在问如何使用 JavaScript 来自动滚动浏览器内容。）

**示例场景：**在 Greasemonkey 脚本中，我使用“click”事件侦听器来拦截我想要阻止在另一个选项卡中打开的链接的中间点击。这工作正常。但我*也*希望这些中键单击导致浏览器进入用户控制的自动滚动模式，就像在中键单击非链接时所做的那样。

这甚至可能吗？

# sql - SQL：尝试为每个类别选择 1 个随机行

> ID：15989040
> 
> 赞同：0
> 
> 时间：2013-04-13T14:49:25.880
> 
> 标签：sql, sql-server

我有一个看起来像这样的表：

```
ID       Section        AlbumName        ImageName

1        Section1       Album1           Image1
2        Section1       Album1           Image2
3        Section1       Album2           Image3
4        Section2       Album3           Image4
5        Section3       Album4           Image5 
```

我要做的是从每个部分中获取 1 张随机图像，我知道目前我在 Album1 中只有多张图像，这只是为了测试。

我正在使用的 SQL 是

```
Select Distinct g.albumName,
(select top 1 gl.imageName 
from Gallery gl
where gl.Section = g.Section
and gl.AlbumName = g.AlbumName
order by newid()
) as imageName
from Gallery g 
```

但这并不总是给我预期的结果。有时它会为 Album1 返回 1 个 imageName，有时它会返回两个 imageName。

如果我自己运行子查询并将 g.section 替换为 section1 并将 g.AlbumName 替换为 Album1 则只返回 1 个结果，所以我知道这与我使用 where 条件的方式有关，但我只是不知道出了什么问题。

任何人都可以建议为什么会发生这种情况以及我如何修改查询以获得我需要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:51:33.750

此方法使用`Common Table Expression`和`Windowing Function`。

```
WITH records 
AS
(
    SELECT  ID, [Section], AlbumName, ImageName,
            ROW_NUMBER() OVER (PARTITION BY [Section] ORDER BY NEWID()) rn
    FROM    TableName
)
SELECT  ID, [Section], AlbumName, ImageName
FROM    records
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/bdc75/1)

# javascript - CSS Toggable 选项卡随 Javascript 动态变化

> ID：15989045
> 
> 赞同：1
> 
> 时间：2013-04-13T14:49:52.597
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在尝试使用 JavaScript 更改比率标签按钮的背景颜色，以便在用户单击特定按钮后动态更改它。

如果您查看下面的链接，一旦您单击蓝色或红色框，黄色条和文本就会发生变化，但我也希望 [type=radio]:checked ~ label 按钮发生变化。

[http://jsfiddle.net/thepaddyman/XWjJm/](http://jsfiddle.net/thepaddyman/XWjJm/)

```
$("document").ready(function(){

        $(".red").click(function(){
        $(".content").css("border-top-color","red");   
        $(".content").css("color","red"); }); }); 

        $("document").ready(function(){
        $(".blue").click(function(){
        $(".content").css("border-top-color","blue");     
        $(".content").css("color","blue"); 

}); }); 
```

太感谢了

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:53:28.323

这是工作[演示](http://jsfiddle.net/mohammadAdil/XWjJm/2/)

您不需要`$(document).ready()`像 hjpotter92 建议的那样嵌套

```
$(document).ready(function(){
    $(".red,#tab-1").click(function () {
        $(".content").css("border-top-color", "red");
        $(".content").css("color", "red");
    });
    $(".blue,#tab-2").click(function () {
        $(".content").css("border-top-color", "blue");
        $(".content").css("color", "blue");
    });
}); 
```

# http - RESTful URI，创建新名词/uri 或添加查询参数

> ID：15989047
> 
> 赞同：1
> 
> 时间：2013-04-13T14:49:59.577
> 
> 标签：http, rest, uri, data-modeling, restful-url

我有一个与就业有一对多关系的 Person 类。CRM 中的一个人可以有多个职位（历史数据）。

我当前用于此类的 REST URI 如下所示：

```
http://domain/persons GET [collection]
http://domain/persons/{id} GET [resource]
http://domain/persons/{id}/employments GET [collection] 
```

为了获得 CURRENT 活跃的就业（所以 endDate 为 NULL 的就业），我应该创建一个 URI 还是应该使用 QueryParam 来完成？

基本上我应该这样做：

```
http://domain/persons/{id}/employments/current GET [resource] 
```

或者

```
http://domain/persons/{id}/employments?current GET [collection with query param filter] 
```

我正在考虑第二个（使用查询参数），因为据我了解 REST 应该使用不可更改的 URI 来标识资源。由于当前的就业职位可以更改，因此应该使用 QueryParam 来完成。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:46:22.780

我会通过像这样唯一地识别每个工作来做到这一点：

`http://domain/persons/{id}/employments/{id} GET [resource]`

* * *

*根据评论信息更新：*

当用户调用`GET http://domain/persons/{id}/employments/`时，她可以使用类似的过滤器，该过滤器`?state=current`将返回引用当前就业并由类似的东西唯一标识的资源`http://domain/employments/{id}`。

# vb.net - 如何在 VB.NET Newtonsoft 中解析 Json 子项（后续）

> ID：15989048
> 
> 赞同：0
> 
> 时间：2013-04-13T14:50:01.167
> 
> 标签：vb.net, json, parsing

对 JSon 不熟悉，我已经学会了如何进行基本的 JSon 配对（从这个问题和答案中学习：[How to Parse Json children in VB.NET Newtonsoft](https://stackoverflow.com/questions/15982358/how-to-parse-json-children-in-vb-net-newtonsoft)。

感谢这个问题和答案，我设法使用 VB.Net 读取了类似的数据

但是我的数据与子项的数据略有不同——它有额外的括号，我还没有找到读取子项的方法。

ps：我已经修改了原始问题中的Json来证明这一点-

```
"CcFull": [

     [      
        {
          "Email": "sample.cc@emailDomain.com",
          "Name": "John Sample"
        }
     ] ,
     [
            {
          "Email": "another.cc@emailDomain.com",
          "Name": "Mike Sample"
                }
     ] 
], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:28:21.053

由于您的 JSON 与我在引用的问题中回答的略有不同，因此您必须对事物进行一些不同的解析。

您的“CcFull”对象实际上是一个数组数组，由`[`和`]`括号表示。由于冒号后面的第一个符号是一个左括号，它表示一个数组。下一个符号也是一个左括号，所以它是一个数组数组。

要使用 Json.Net 对象取消引用它，我们必须将项目值作为`JArray`对象获取。然后我们可以迭代该对象中的数组值，就像在另一个问题中一样。像这样的东西：

```
Dim results As List(Of JToken) = o.Children().ToList
For Each item As JProperty In results
    item.CreateReader()
    Select Case item.Name
        Case "CC"
            Dim strCC = item.Value.ToString

        Case "CcFull"
            Dim ccArray As JArray = item.Value    'Get the top-level array
            Dim strEmail As String
            Dim strName As String
            For Each subitem As JObject In ccArray.Values
                strEmail = subitem("Email")
                strName = subitem("Name")
            Next
    End Select
Next 
```

# android - 设置活动背景而不拉伸

> ID：15989049
> 
> 赞同：3
> 
> 时间：2013-04-13T14:50:04.033
> 
> 标签：android, image, background, aspect-ratio, stretch

我正在尝试在我的 Android 应用程序中设置背景图像。我有一个 JPEG 图像，我想用图像的高度填充屏幕，保持相同的纵横比。

我尝试通过在drawable中创建一个XML位图文件并将其设置为：

```
android:background="@drawable/background_image" 
```

这是 XML

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/wallpaper1_1920x1200"
    android:tileMode="disabled"
    android:gravity="center" >
</bitmap> 
```

使用“中心”标签，它不会拉伸图像，也不会调整它的大小。

有没有办法显示图像的全高（和裁剪边）保持原始纵横比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:15:26.360

您可以使用 Scale Drawable ( [http://developer.android.com/guide/topics/resources/drawable-resource.html#Scale](http://developer.android.com/guide/topics/resources/drawable-resource.html#Scale) )包装您的位图，
然后使用该 drawable 作为布局的背景。

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/wallpaper1_1920x1200"
    android:scaleGravity="clip_horizontal"
    android:scaleHeight="100%"
    android:scaleWidth="100%" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:23:11.177

一种解决方案可能是将其转换为 9 补丁 png 文件，允许您定义它可以拉伸和不能拉伸的位置。请参阅[http://developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)，接近末尾的部分有 9 个补丁图像。

# php - 我如何显示文件夹中的所有 .jpg 图片，但我只想要今天的图片

> ID：15989050
> 
> 赞同：1
> 
> 时间：2013-04-13T14:50:04.427
> 
> 标签：php, html

我希望我能把自己说清楚。我有一个网络摄像头，每秒向我的网站发送一张图片。他们都在这样的文件夹中总结：

```
(IPCAM)_0_20130413145714_62.jpg [Year: 2013] [mo: 04] [Day: 13] [Hour: 14] [min: 57] [Sec: 14]
(IPCAM)_0_20130413145719_63.jpg [Year: 2013] [mo: 04] [Day: 13] [Hour: 14] [min: 57] [Sec: 19]
(IPCAM)_0_20130413145723_64.jpg [Year: 2013] [mo: 04] [Day: 13] [Hour: 14] [min: 57] [Sec: 23]
(IPCAM)_0_20130413145727_65.jpg [Year: 2013] [mo: 04] [Day: 13] [Hour: 14] [min: 57] [Sec: 27] 
```

你能看到图像名称中的模式吗？我目前正在使用这个脚本来显示它们：

```
<?php 
$dirname = "./";
$images = glob($dirname."*.jpg");
foreach($images as $image) {
echo '<img src="'.$image.'" /><br />';
}
?> 
```

我想要一个日历，这样我就可以选择`[Day: **]`并获取当天拍摄的所有照片。

我希望有人可以帮助我处理这段代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:57:05.050

你试过了吗

```
$dayInQuestion = '20130413';
glob($dirname."(IPCAM)_0_".$dayInQuestion."*.jpg"); 
```

和你约会？

参考：更多选项的 PHP 手册，例如[http://www.php.net/manual/en/function.glob.php#110340](http://www.php.net/manual/en/function.glob.php#110340)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:01:05.580

为今天制作一个字符串，然后将其与您的图像匹配。因此，我们将图像名称与今天的字符串匹配，而不是提取所有图像 (*)：

```
date_default_timezone_set('America/New_York');
$today = date("Ymd");
$files = glob($dirname.'*'.$today.'*.jpg'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:57:53.453

这是我使用 jQuery 日期选择器的答案：

工作示例可以在[这里找到](http://danielabbey.co.uk/so/15989050)

在示例中选择 13th April 2013

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>StackOverflow Answer</title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
        <script>
          $(function() {
          $( "#datepicker" ).datepicker({
                  onSelect: function(date, instance){
                      window.location = "?date="+date;
                  }
              });
          });
        </script>
    </head>
    <body>
        <p>Date: <input type="text" id="datepicker" /></p>
        <?php
            if($_GET)
            {
                $dirname = "IPCam/";
                $images = glob($dirname."*.jpg");
                $date = str_replace('/', '', $_GET['date']);
                $day = substr($date, 2, 2);
                $month = substr($date, 0, 2);
                $year = substr($date, 4, 4);
                $formattedDate = $year.$month.$day;
                foreach($images as $image)
                {
                    if(strpos($image, $formattedDate))
                    {
                        echo '<img src="'.$image.'" /><br />';
                    }
                }
            }
        ?>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T14:56:10.990

我没有对此进行测试，但是：

```
<?php 
$dirname = "./";
$images = glob($dirname."*.jpg");
$date = "[Year: ".$_GET['y']."] [mo:".$_GET['m']."] [Day: ".$_GET['d']."]";
foreach($images as $image) {
    if (strpos($image,$date) !== false) {
        echo '<img src="'.$image.'" /><br />';
    }
}
?> 
```

请求： ?y=2013&m=12&day=13

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T14:56:52.977

只要照片使用一致的命名方案，您就应该能够使用 strstr 按文件名过滤它们。像这样的东西，也许：

```
<?php 
$dirname = "./";
$daynum = "13";
$images = glob($dirname."*.jpg");
foreach($images as $image) {
    if (strstr($image, 'Day' + $daynum))
    {
        echo '<img src="'.$image.'" /><br />';
    }
}
?> 
```

# knockout.js - knockoutjs 数据源示例在 jsfiddle 中不起作用

> ID：15989063
> 
> 赞同：0
> 
> 时间：2013-04-13T14:51:50.260
> 
> 标签：knockout.js, datasource

我想问一个关于在淘汰赛中使用数据源的问题。为此，我尝试将我的示例基于 jsfiddle，但我什至无法让这个简单的示例工作。

这是html代码：

```
<table>
    <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Sales</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: items">
        <tr>
            <td data-bind="text: id"></td>
            <td data-bind="text: name"></td>
            <td data-bind="text: sales"></td>
            <td data-bind="text: price"></td>
        </tr>
    </tbody>            
</table>

<span id="pager">
    <button data-bind="click: items.pager.first">First</button>
    <button data-bind="click: items.pager.previous">Prev</button>
    <span class="summary">Page 
        <span data-bind="text: items.pager.page"></span> of 
        <span data-bind="text: items.pager.totalPages"></span></span>
    <button data-bind="click: items.pager.next">Next</button>
    <button data-bind="click: items.pager.last">Last</button>
</span> 
```

这是javascript代码：

```
var initialData = [
  { id:1, name: "Well-Travelled Kitten", sales: 352, price: 75.95 },
  { id:2, name: "Speedy Coyote", sales: 89, price: 190.00 },
  { id:3, name: "Furious Lizard", sales: 152, price: 25.00 },
  { id:4, name: "Indifferent Monkey", sales: 1, price: 99.95 },
  { id:5, name: "Brooding Dragon", sales: 0, price: 6350 },
  { id:6, name: "Ingenious Tadpole", sales: 39450, price: 0.35 },
  { id:7, name: "Optimistic Snail", sales: 420, price: 1.50 }
];
function getAnimals() {
    var params = {
        limit: this.pager.limit(),
        startIndex: this.pager.limit() * (this.pager.page() - 1)
    };

    $.ajax({
        type: 'POST',
        url: '/echo/json/',
        data: {
            json: ko.toJSON(initialData.slice(params.startIndex, params.startIndex + params.limit))
        },
        context: this,
        success: function(data) {
            this(data);
            this.pager.totalCount(7);
        },
        dataType: 'json'
    });
};

var viewModel = {
    items: ko.observableArray([]).extend({
        datasource: getAnimals,
        pager: {
            limit: 3
        }
    })
};

ko.applyBindings(viewModel); 
```

我总是收到以下 javascript 错误：

错误：无法解析绑定。消息：TypeError：items.pager 未定义；绑定值：点击：items.pager.first

**我刚刚再次测试，在 Chrome 中它工作正常，但在 Ubuntu 12.10 下的 Firefox 20.0 中它不起作用！**

知道这里可能出了什么问题：http: [//jsfiddle.net/sturm/pr9Sf/1/](http://jsfiddle.net/sturm/pr9Sf/1/)

# c# - 天蓝色服务总线超时

> ID：15989064
> 
> 赞同：1
> 
> 时间：2013-04-13T14:51:51.410
> 
> 标签：c#, azureservicebus

我的天蓝色服务总线中有 2 个主题。topic1 = livetopic topic2 = testtopic

当我尝试添加任何消息时，实时主题超时。如果我将代码更改为使用 testtopic 就可以了。

我已将我的所有发布者与 livetopic 断开连接，但仍然超时。我已删除 livetopic 并重新添加仍然超时。

关于如何解决这个问题的任何想法。

我试过使用服务总线资源管理器示例应用程序，它可以看到两个主题，但它也会在 livetopic 上超时，但不是 testtopic。

以下是异常消息：

> 服务器堆栈跟踪：在 [0] 处重新抛出异常：
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult]（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.DuplexCorrelationAsyncResult.End（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.EndRequest（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.RequestAsyncResult.b__4（RequestAsyncResult thisPtr，IAsyncResult r）
> 
> 在 Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback（IAsyncResult 结果）
> 
> 在 [1] 处重新抛出异常：
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult]（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
> 
> 在 Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.EndRequest(IAsyncResult 结果)
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.RedirectBindingElement.RedirectContainerChannelFactory`1.RedirectContainerSessionChannel.RequestAsyncResult.<>c_ *DisplayClass17.b* _a(RequestAsyncResult thisPtr, IAsyncResult r)
> 
> 在 Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback（IAsyncResult 结果）
> 
> [2] 处重新抛出异常：
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult]（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.RedirectBindingElement.RedirectContainerChannelFactory`1.RedirectContainerSessionChannel.EndRequest（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.RequestAsyncResult.b__4（RequestAsyncResult thisPtr，IAsyncResult r）
> 
> 在 Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback（IAsyncResult 结果）
> 
> [3] 处重新抛出异常：
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult]（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
> 
> 在 Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.EndRequest(IAsyncResult 结果)
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.SbmpTransactionalAsyncResult`1.b__37（TIteratorAsyncResult thisPtr，IAsyncResult a）
> 
> 在 Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback（IAsyncResult 结果）
> 
> [4] 处重新抛出异常：
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult]（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.EndSendCommand（IAsyncResult 结果）
> 
> --- 内部异常堆栈跟踪结束 ---
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.EndSendCommand（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.OnEndSend（IAsyncResult 结果）
> 
> 在 Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageSender.OnSend（TrackingContext trackingContext，IEnumerable`1 消息，TimeSpan 超时）
> 
> 在 Microsoft.ServiceBus.Messaging.MessageSender.Send（TrackingContext trackingContext，IEnumerable`1 消息，TimeSpan 超时）
> 
> 在 Microsoft.ServiceBus.Messaging.MessageSender.Send（BrokeredMessage 消息）
> 
> 在 Microsoft.ServiceBus.Messaging.TopicClient.Send（BrokeredMessage 消息）
> 
> 在 c:\codetfs\MyProduct\MyCompany.Azure\MessagePublisher.cs:line 182 中的 myCompany.Azure.MessagePublisher.PublishMessage（字符串主题、字符串 destinationGroup、字符串 messageCategory、字符串 destinationApp、字符串 blobStorageDescription）

# jquery - 元素的jQuery标签名称

> ID：15989066
> 
> 赞同：15
> 
> 时间：2013-04-13T14:52:01.727
> 
> 标签：jquery, html, tags

我正在尝试在 jQuery 中获取元素标签名称。

我有以下html：

```
<div class="section" id="New_Revision">

    <h1>New Revision&nbsp<img alt="Lock_closed" class="edit" data-id="1" src="/assets/lock_closed.svg" /></h1>

    <p>This is a test paragraph.</p>

    <ol class="references">
      <li>test</li>
    </ol>
</div> 
```

和 javascript：

```
$(".edit").click(function(){
    $(this).closest("div.section").children().each(function(){
        alert($(this).tagName + " - " + $(this).html());
    });     
}) 
```

我试过了`$(this).tagName`，正如这个问题中所指出的：`$(this).nodeName`Can [jQuery provide the tag name?](https://stackoverflow.com/questions/1532331/can-jquery-provide-the-tag-name)`$(this).attr("tag")`

但我总是得到`undefined`回报。`html()`输出正确。为什么我无法获取每个元素的标签名称？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-13T14:55:58.510

尝试

`this.nodeName`代替`$(this).nodeName`

`this`引用 DOM 元素本身并将`$(this)`元素包装在一个 jQuery 对象中。

**编辑**

如果您需要 Jquery 方法，您可以使用

```
$(this).prop("tagName") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T14:53:14.963

你有没有尝试过：

```
$(this).attr("id", "rnd" + this.nodeName.toLowerCase() + "_" + i.toString()); 
```

如链接问题所述。*$(this)*和*this*之间也有很大的不同

 *在浏览器控制台中尝试过，它可以工作：

```
document.getElementsByTagName("a")[0].tagName // this uses javascript 
```

这使用jquery：

```
$('a').get(0).nodeName; // this works for jquery 
```

试试这个：

```
$(".edit").click(function(){
    $(this).closest("div.section").children().each(function(){
        alert(this.tagName + " - " + $(this).html());
    });     
}) 
```*

# authentication - 如何设置 sinatra-authentication 以使用 erb 而不是 haml？

> ID：15989071
> 
> 赞同：0
> 
> 时间：2013-04-13T14:52:43.873
> 
> 标签：authentication, sinatra, erb

我正在尝试在一个简单的 sinatra 应用程序中设置[sinatra-authentication](https://github.com/maxjustus/sinatra-authentication) gem，并遇到了 sinatra 找不到正确视图的问题。我知道 sinatra-authentication 默认使用 haml，但我在这个应用程序中使用 erb。

考虑到这一点，我[在 sinatra-authenticaiton 文档中发现有一个设置允许您更改模板引擎](https://github.com/maxjustus/sinatra-authentication#overriding-default-views)，方法是将以下内容添加到您的应用程序文件中：

```
 configure do
       set :template_engine, :erb # for example
   end 
```

我已将此添加到我的 app.rb 文件中，当我尝试在我的应用程序中点击 /signup 路由时，sinatra 仍在寻找 signup.haml。

几点注意事项：

1.  我已将 gem 包含在我的 Gemfile 中，并成功在我的应用程序上运行捆绑安装。

    ```
     source 'https://rubygems.org'

     gem 'sinatra'
     gem 'data_mapper'

     gem 'pg'
     gem 'dm-postgres-adapter'
     gem 'sinatra-authentication' 
    ```

2.  我在文档中看到一些内容表明我可能需要指定视图文件的位置，因此我将以下内容添加到我的配置块中。

    ```
    set :sinatra_authentication_view_path, Pathname(__FILE__).dirname.expand_path + "views/" 
    ```

3.  **我想我已经通过添加在我的应用文件中准确地需要 gem

    ```
    require "sinatra-authentication"

    use Rack::Session::Cookie, :secret => 'mys3cr3tk3y' 
    ```

这个要点是我的 app.rb 文件在我的 sinatra 应用程序根目录中的当前表示。 [https://gist.github.com/rriggin/5378641#file-gistfile1-txt](https://gist.github.com/rriggin/5378641#file-gistfile1-txt)

这是 sinatra 抛出的错误截图：http: [//cl.ly/image/0y041t0K3u3O](http://cl.ly/image/0y041t0K3u3O)

当我在本地运行应用程序时，会按预期在我的本地数据库中创建一个“dm-users”表。

为了让 sinatra-authentication 正确查找 erb 模板而不是 haml 文件，我是否缺少另一个配置设置。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:08:41.473

[规范没有测试 template_engine 设置是否有效](https://github.com/maxjustus/sinatra-authentication/blob/master/spec/unit/user_specs.rb)，并且查看[设置的调用方式](https://github.com/maxjustus/sinatra-authentication/blob/master/lib/sinatra-authentication.rb#L24)，我认为它不正确，即

```
send settings.template_engine, get_view_as_string("index.#{settings.template_engine}"), :layout => use_layout? 
```

可能会更好地工作：

```
send app.settings.template_engine, get_view_as_string("index.#{app.settings.template_engine}"), :layout => use_layout? 
```

我是这么认为的。如果您 fork 项目，更改该行并将[其添加到您的 Gemfile](http://gembundler.com/v1.3/git.html)并且它可以工作，然后考虑为其编写一个快速规范，您将改进该项目的主线并解决您的问题。

# c++ - 读取和组织文件行 C++

> ID：15989074
> 
> 赞同：0
> 
> 时间：2013-04-13T14:52:47.110
> 
> 标签：c++, arrays, file, sorting, lines

我最近开始使用文件，但在我的主要大学项目中实施它们时遇到了一些麻烦。

以下代码计算您输入数字并按 Enter 所需的时间，并将用户的姓名、性别和时间写入文件中：

```
#include <iostream>
#include <ctime>
#include <fstream>
#include <string>

using namespace std;

int LinesCounter(string filename)
{
    ifstream b_file(filename);

    // new lines will be skipped unless we stop it from happening:    
    b_file.unsetf(ios_base::skipws);

    // count the newlines with an algorithm specialized for counting:
    unsigned line_count = count(
        istream_iterator<char>(b_file),
        istream_iterator<char>(),

        '\n');

    return line_count;

}

int main()
{
        //Starts timing
    clock_t begin = clock();

    int letter;
    cin>>letter;
    cin.ignore();

    //Obtains the total amount of seconds taken
    clock_t end = clock();
    double elapsed_secs = double(end - begin) / CLOCKS_PER_SEC;

    cout << "\nCongratulations, you took " <<elapsed_secs <<" seconds." <<endl <<endl;

    cout<<"Insert your name: ";
    string name;
    getline(cin, name);
    cout<<endl;

    cout<<"M/F: ";
    char sex;
    cin >> sex;
    cout<<endl;
    cin.ignore();

    int NumberOfLines = LinesCounter("Times.txt");

    if (NumberOfLines < 10)
    {
        ofstream a_file ( "Times.txt", ios::app );

        a_file<<name <<"  " <<sex <<"  " <<elapsed_secs <<"s" <<endl;

        a_file.close();
    }

    cin.get();
} 
```

该代码应该只存储 10 次（10 行包含姓名、性别和时间），并且必须根据时间整理列表。这样，文件的第一行应该有最快的时间（以及相应的用户的姓名和性别），最后一行的时间最慢。例子：

1）“时代.txt”

1.  约翰 M 1.449s
2.  丽兹 F 1.552s
3.  埃利亚斯 M 1.788s

新时间：Albert M 1.522s

“Times.txt” - 更新

1.  约翰 M 1.449s
2.  阿尔伯特 M 1.522s
3.  丽兹 F 1.552s
4.  埃利亚斯 M 1.788s

2）“时代.txt”

1.  约翰 M 1.449s
2.  阿尔伯特 M 1.522s
3.  丽兹 F 1.552s
4.  埃利亚斯 M 1.788s
5.  抢 M 1.819s
6.  乔 M 1.842s
7.  灰 M 1.893s
8.  珊莎 F 2.108s
9.  雪 M 2.134s
10.  安迪 M 2.333s

新时间：Ana F 1.799s

“Times.txt” - 更新

1.  约翰 M 1.449s
2.  阿尔伯特 M 1.522s
3.  丽兹 F 1.552s
4.  埃利亚斯 M 1.788s
5.  安娜 F 1.799s
6.  抢 M 1.819s
7.  乔 M 1.842s
8.  灰 M 1.893s
9.  珊莎 F 2.108s
10.  雪 M 2.134s

可能的解决方案：我考虑过每次移动到一个数组位置并在数组中将它们排序，然后重写文件。问题是，我不知道如何以这种方式操作代码。任何帮助将不胜感激。

*注意：文件不应在名称前显示职位编号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:41:48.040

我建议你使用一个结构：

```
struct Entry
{
  std::string name;
  unsigned int seconds;
}; 
```

现在重载`operator <`以启用排序：

```
struct Entry
{
    bool  operator<(const Entry& e)
    {
       if (name == e.name)
       {
         return seconds < e.seconds;
       }
       else
       {
         return name < e.name;
       }
    }
    std::string name;
    unsigned int seconds;
}; 
```

现在您可以创建向量来保存所有名称：

```
std::vector<Entry> students; 
```

你可以`std::sort`在向量上使用。（查找 的语法`std::sort`）。

如果您很聪明，您将研究如何将矢量写入文件，而不是在这里发布。（提示：在 StackOverflow 上已多次回答）。

# java - Java、泛型和迭代器

> ID：15989075
> 
> 赞同：0
> 
> 时间：2013-04-13T14:52:59.093
> 
> 标签：java, generics

我试图了解为什么会出现此错误：

-- 这是错误 --

`File: ...\HashTable.java [line: 103] Error: The return type is incompatible with HashTableInterface<Key,Value>.iterators()`

该接口包含一个内部类：

`public class Entry<Key, Value>{...}`

LinkedList 与 java API 类似，但它包含一个迭代器内部类，但在测试一些更简单的东西时，例如：

-- 这是工作代码，至少在 drjava 的交互窗格中 --

```
LinkedList<String> list = new LinkedList<String>();
Iterator<String> test = list.iterator(); 
```

但是我无法在我的 HashTable 类中编译此方法：

-- 这是我无法工作的代码 --

```
public Iterator<Entry<Key, Value>> iterator(){
LinkedList<Entry<Key, Value>> iter = new LinkedList<Entry<Key, Value>>();
return iter.iterator();
} 
```

我认为它很简单，看起来并不太复杂，但任何输入将不胜感激。

** 你很抱歉它应该是 list.iterator();

**编辑**

-- 好了，界面来了 --

```
import nhUtilities.containers2.*;

interface HashTableInterface<Key, Value> {

    public boolean isEmpty();

    public Value get(Key key);

    public void add(Key key, Value value);

    public void remove(Key key);

    public void clear();

    public Iterator<Entry<Key, Value>> iterator();

    public interface Entry<Key, Value> {

        public Key getKey();

        public Value getValue();

        public void setValue(Value value);

    }
} 
```

-- 这是实现的条目，它是被破坏的方法所在的 HashTable 的内部类--

```
public class Entry<Key, Value> {
    private Key k;
    private Value v;

    public Entry(Key key, Value value) {
        k = key;
        v = value;
    }

    /**
     * Returns a key of pair;
     */

    public Key getKey() {
        return this.k;
    }

    /**
     * Returns value of pair;
     */

    public Value getValue() {
        return this.v;
    }
} 
```

**编辑+**

所以我才意识到

`public class LinkedList<Element> extends AbstractList<Element>`

和

`public abstract class AbstractList<Element> implements List<Element>`

和

`public interface List<Element> extends java.lang.Iterable<Element>`

然而在 LinkedList 里面有

`private class Iterator extends AbstractIterator<Element> implements nhUtilities.containers2.Iterator<Element>`

也许这可能导致冲突（因为我使用的 LinkedList 不是 java API LinkedList）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T15:01:53.457

`List`不是**一个** `Iterator`。`List` **有一个** `Iterator`。`List implements Iterable`.

```
List<String> list = new LinkedList<String>();
Iterator<String> test = list.iterator();
                             //^^ here - you call iterator() 
```

您需要调用`iterator()`a`List`来获取`Iterator`实例。

所以你的方法应该读

```
public Iterator<Entry> iterator(){
    List<Entry> iter = new LinkedList<Entry>();
    return iter.iterator();
} 
```

确保您调用`iterator()`.`List`

确保您的类作为接口`implements Iterable<Entry>`上的泛型类型参数在方法中得到回显。`Iterable``interface`

**编辑**

`Entry`从 OP 发布的课程来看，您的方法`interface`和方法之间似乎存在混淆。`Entry``iterator()`

你的`Entry`类是通用的`<K,V>`，你的方法根本不是通用的。

所以你的接口要求你的`iterator`方法返回一个原始的`Entry`或者`Entry<?,?>`从方法中返回`iterator`。

大概你的实现类实现了一个`Entry<K,V>`并在它的方法实现中返回一个`Iterator<Entry<K,V>>`。

这与您的`interface`.

你的`interface`方法应该是：

```
Iterator<Entry<Key,Value>> iterator(); 
```

更普遍：

1.  您`interface`应该扩展`Iterable<Entry<K,V>>`而不是添加自己的自定义方法，这允许您使用增强的 for-each-loop。
2.  根据样式约定，我们使用单个字母作为泛型类型参数，所以`HashTableInterface<K,V>`
3.  不要`public`在你的`interface`-默认情况下使用`interface`方法`public`，所以这只会增加噪音。

因此，您`interface`需要一分为二，最终得到：

```
public interface Entry<K, V> {

    K getKey();

    V getValue();

    void setValue(V value);
}

public interface HashTableInterface<K, V> extends Iterable<Entry<K, V>> {

    boolean isEmpty();

    V get(K key);

    void add(K key, V value);

    void remove(K key);

    void clear();
} 
```

**编辑 MK2**

A`List<Entry<K, V>>`与a**不同**`List<TableEntry<K, V>>`。

正如我一开始所怀疑的那样，您（令人困惑地）有两个`Entry`类，一个嵌套在 the 中`interface`，一个嵌套在实现中。

所以在你的情况下`List<Entry<K, V>>`是不一样的`List<Entry<K, V>>`。看看混乱来自哪里？

你`List`是实现`Entry`，你`interface`需要一个`Entry`类型`interface`。

同样，您`Iterator<Entry..`的方法返回的`Entry`类型错误。因此编译器抱怨你的实现没有实现你的`Interface`.

这是一个有效的例子；

```
class HashTable<K, V> implements HashTableInterface<K, V> {

    private class TableEntry<K, V> implements Entry<K, V> {
    }
    private final List<Entry<K, V>> entries = new LinkedList<>();

    @Override
    public Iterator<Entry<K, V>> iterator() {
        return entries.iterator();
    }
} 
```

请注意，如果我更改`List`为`List<TableEntry<K, V>>`代码将无法编译。

这里的要点是**永远不要将类称为同一件事**，即使这看起来是一个非常好的主意。

# php - 我的 xml 站点地图的 xsl 转换无法使用 php

> ID：15989080
> 
> 赞同：1
> 
> 时间：2013-04-13T14:53:15.340
> 
> 标签：php, html, xml, xslt, sitemap

我有一个简单的 sitemap.xml 文件：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc>"home page link"/</loc>
        <title>East Randolph Cabinet Shop</title>
        <level>level-1</level>
    </url>
    .
    .
    .
    </urlset> 
```

然后我有我的 sitemap.xsl 文件：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
     <h2>Sitemap</h2>
     <ul>
     <xsl:for-each select="urlset/url">
      <li class="&lt;xsl:value-of select=&quot;level&quot;/&gt;"><a href="&lt;xsl:value-of select=&quot;loc&quot;/&gt;"><xsl:value-of select="title"/></a></li>
     </xsl:for-each>
    </ul>
    </xsl:template>

    </xsl:stylesheet> 
```

然后我的 sitemap.php 文件中有代码应该用 xsl 文件转换 xml 文件，然后回显结果：

```
<div id="content">
<?php
$xml = new DOMDocument;
$xml->load('sitemap.xml');
$xsl = new DOMDocument;
$xsl->load('sitemap.xsl');
$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl);
echo $proc->transformToXML($xml);
?>

</div> 
```

当我将浏览器定向到 sitemap.php 文件时，所有回显的内容一直到 Sitemap 标题`<h2>Sitemap</h2>`。我对 xsl 很陌生，所以请原谅我的无知，但在我看来，我的 xsl for-each 语句有问题。我对么？我只是坚持这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:23:47.197

我可以看到您的 XSL 文件存在两个问题。

1.  您没有为站点地图文件使用正确的 XML 命名空间。
2.  您不了解属性值模板。

像下面这样的东西应该可以工作：

```
<xsl:stylesheet
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:sm="http://www.sitemaps.org/schemas/sitemap/0.9">

<xsl:template match="/">
    <h2>Sitemap</h2>
    <ul>
        <xsl:for-each select="sm:urlset/sm:url">
            <li class="{sm:level}">
                <a href="{sm:loc}"><xsl:value-of select="sm:title"/></a>
            </li>
        </xsl:for-each>
    </ul>
</xsl:template>

</xsl:stylesheet> 
```

请注意`sm`站点地图 XML 命名空间和属性值模板的前缀。

# ubuntu - 无法在 Ubuntu 上编译委托

> ID：15989081
> 
> 赞同：0
> 
> 时间：2013-04-13T14:53:17.813
> 
> 标签：ubuntu, compilation

我从官方网站获得了 DeleGate 9：http: [//www.delegate.org/](http://www.delegate.org/)

但我未能在 Ubuntu 11.10 32 位上编译它。错误是什么？如果文件 libsubst.a 丢失，请告诉我如何安装它。我试着找到文件。但它不在那里..

错误如下：

```
<pre>
delegate9.9.7$ make
......
cc -O2 -x c++ -DQS  -I../gen -I../include  -c vsap.c`enter code here`
cc -O2 -x c++ -DQS  -I../gen -I../include  -c tcprelay.c
cc -O2 -x c++ -DQS  -I../gen -I../include  -c udprelay.center code here
cc -O2 -x c++ -DQS  -I../gen -I../include  -c ftpgw.c
cc -O2 -x c++ -DQS  -I../gen -I../include  -c filetype.c
rm -f ../lib/libdelegate.a
ar cr ../lib/libdelegate.a version.o ../srcsign.o editconf.o admin.o notify.o shutter.o abort.o form2conf.o process.o vaddr.o conf.o svport.o ddi.o textconv.o script.o param.o env.o thmain.o syslog.o log.o svstat.o iotimeout.o misc.o msg.o yshell.o shio.o db.o hostlist.o cond.o service.o svconf.o filter.o master.o qstest.o delegate.o caps.o spinach.o stls.o tsp.o sudo.o gacl.o access.o ident.o dgauth.o dgsign.o ccache.o cache.o distrib.o bcounter.o ipno.o inets.o uns.o rident.o inetd.o thruwayd.o dget.o urlfind.o mount.o url.o gopher.o icp.o icap.o http.o httpx.o httplog.o httphead.o httpd.o cgi.o ssi.o htaccept.o htccx.o htswitch.o htmlgen.o nntp.o nntplist.o nntpgw.o enews.o pop.o smtp.o telnet.o ftp.o xferlog.o X.o wais.o whois.o imap.o ldap.o smtpgate.o alias.o domain.o lpr.o sftp.o socks.o socks4.o sox.o cuseeme.o coupler.o vsap.o tcprelay.o udprelay.o ftpgw.o filetype.o
/usr/bin/ranlib ../lib/libdelegate.a
"/home/qi/delegate9.9.7/mkmake.exe" -touch "../lib/libdelegate.a"
cc -O2 -x c++ -DQS  -I../gen -I../include  -c embed.c -DADMINPASS=\"\" -DADMIN=\"redice@163.com\" \
                        -DIMPSIZE=10000
cc  -L../lib -o embed embed.o version.o ../srcsign.o \
                        ../lib/library.a ../lib/libcfi.a ../lib/libmimekit.a ../lib/libmd5.a \
                        -lnsl -ldl -lutil -lpthread -lstdc++ -lc ../lib/libsubst.a
../lib/libsubst.a(_-forkpty.o): In function `_Forkpty(int*, char*)':
_-forkpty.c:(.text+0x33): undefined reference to `forkpty'
../lib/libsubst.a(_-forkpty.o): In function `_ForkptyX(int*, char*, void*, void*)':
_-forkpty.c:(.text+0x1): undefined reference to `forkpty'
collect2: ld returned 1 exit status
make[2]: *** [embed] Error 1
make[2]: Leaving directory `/home/qi/delegate9.9.7/src'
make[1]: *** [start0] Error 2
make[1]: Leaving directory `/home/qi/delegate9.9.7/src'
mkmake: ERROR LOG is left at /home/qi/delegate9.9.7/src/mkmake.err
mkmake: ERROR LOG is left at /home/qi/delegate9.9.7/src/mkmake.err
make: *** [all] Error 2
</pre> 
```

如下`/home/qi/delegate9.9.7/src/mkmake.err`：

```
<pre>
        *** exit(2): -makeat at /home/qi/our_services/proxies/charge/delegate9.9.7/src
        [0] make
        [1] MKMAKE_SRC=
        [2] SHELL=/bin/sh
        [3] HDRDIRS=-I../gen -I../include 
        [4] LIBDIRS=-L../lib
        [5] MKMAKE=/home/qi/our_services/proxies/charge/delegate9.9.7/mkmake.exe
        [6] MKBASE=/home/qi/our_services/proxies/charge/delegate9.9.7
        [7] MKMKMK=/home/qi/our_services/proxies/charge/delegate9.9.7/mkmkmk.exe

        *** exit(2): -makeat at /home/qi/our_services/proxies/charge/delegate9.9.7/src
        [0] ./mkmake.exe
        [1] 
        [2] src
        [3] dg.exe
        [4] make
        [5] MKMAKE_SRC=
        [6] SHELL=/bin/sh
        [7] HDRDIRS=-I../gen -I../include 
        [8] LIBDIRS=-L../lib
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T10:35:05.103

我得到了这个问题的答案如果你收到错误

```
undefined reference to `forkpty' 
```

所以在 maker 文件夹中编辑 _-forkpty.c 文件

`vim maker/_-forkpty.c`

并添加

`#include <util.h>`

```
make clean
make 
```

# ios - 当我为 UIView 的边界设置动画时，如何重绘 UIView 的子层？

> ID：15989086
> 
> 赞同：7
> 
> 时间：2013-04-13T14:53:52.360
> 
> 标签：ios, objective-c, uiview, core-animation, uiviewanimation

我有一个带有几个自定义绘制子层的 UIView（一些带有 CAShapeLayer 蒙版的 CAGradientLayers 等）。我正在使用 UIView 动画方法为其边界设置动画（同时增加其宽度和高度）。

```
[UIView animateWithDuration:2 delay:0 options:UIViewAnimationOptionCurveEaseOut|UIViewAnimationOptionAutoreverse|UIViewAnimationOptionRepeat animations:^{
    CGRect bounds = myView.bounds;
    bounds.size.width += 20;
    bounds.size.height += 20;
    myView.bounds = bounds;
} completion:nil]; 
```

这工作得很好，除了子层没有被重绘为它的动画。最好的方法是什么？我是否需要设置一些键值观察检测边界变化并在所有子层上调用 setNeedsDisplay？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T14:59:08.320

在您正在制作动画的视图上设置`contentMode`为`UIViewContentModeRedraw`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T18:56:06.357

图层不像视图那样工作。如果您在父层上调用 setNeedsDisplay（如果您将 needsDisplayOnBoundsChange 设置为 YES，则会发生这种情况），它不会影响子层。您还需要调用 setNeedsDisplay 它们。

如果在调整父层大小时您的子层也需要调整大小，则在父层中实现 layoutSublayers（或 layoutSublayersOfLayer: 在其委托中）。

# haskell - 自由单子的推导

> ID：15989087
> 
> 赞同：11
> 
> 时间：2013-04-13T14:53:53.360
> 
> 标签：haskell, monads

`Control.Monad.Free`实现一个免费的单子为：

```
data Free f a = Pure a | Free (f (Free f a))

instance Functor f => Functor (Free f) where
  fmap f = go where
    go (Pure a)  = Pure (f a)
    go (Free fa) = Free (go <$> fa) 
```

我在理解第二`go`行时遇到了很多麻烦，尤其是在描述[什么是 free monad](https://stackoverflow.com/questions/13352205/what-are-free-monads)的上下文中。有人可以描述一下它是如何工作的以及为什么它会成为`Free f a`一个免费的单子吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-13T17:36:44.770

在这一点上，你只是在制作`Free`一个函子而不是一个单子。当然，要成为 monad，它也必须是 functor！

我认为如果我们重命名`Free`构造函数以避免混淆，会更容易考虑：

```
data Free f a = Pure a | Wrap (f (Free f a)) 
```

现在让我们看看我们正在构建的结构。对于这种`Pure`情况，我们只有一个 type 的值`a`。对于这种`Wrap`情况，我们在函子中包装了*另一个值。* `Free f a``f`

让我们暂时忽略构造函数。也就是说，如果我们将`Wrap (f (Pure a))`其视为`f a`. 这意味着我们正在构建的结构只是`f`——一个函子——重复应用了几次。这种类型的值看起来像：`f (f (f (f (f a))))`. 为了使其更具体，让`f`be`[]`得到：`[[[[[a]]]]]`. `Wrap`通过重复使用构造函数，我们可以拥有任意多的 this 级别；当我们使用`Pure`.

将构造函数放回原处，`[[a]]`看起来像：`Wrap [Wrap [Pure a]]`.

因此，我们所做的就是获取该`Pure`值并反复对其应用函子。

给定这种重复应用函子的结构，我们如何在它上面映射一个函数？对于这种`Pure`情况——在我们把它包装`f`进去之前——这很简单：我们只是应用这个函数。但是，如果我们已经将我们的值`f`至少包装了一次，我们必须映射到外层，然后递归地映射到所有内层。换句话说，我们必须`Free`在函子上映射 monad 上的映射`f`。

这正是第二种情况`go`正在做的事情。`go`本身只是`fmap`为了`Free f a`。`<$>`是`fmap`为`f`。所以我们所做的是`fmap` `go`over `f`，这使得整个事情都是递归的。

由于这个映射函数是递归的，它可以处理任意数量的级别。所以我们可以将一个函数映射到`[[a]]`or`[[[[a]]]]`或其他上。这就是为什么我们需要`fmap go`当 go`fmap`本身时 - 重要的区别在于第一个`fmap`适用于单层*并且*`f`递归`go`适用于*整个* `Free f a`构造。

我希望这能澄清一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T21:45:54.290

说实话，我通常只是发现*不*阅读这些简单函数中的代码，而是阅读*类型*然后自己编写函数更容易。把它想象成一个谜题。您正在尝试构建这个：

```
mapFree :: Functor f => (a -> b) -> Free f a -> Free f b 
```

那么我们该怎么做呢？好吧，让我们`Pure`先来看看构造函数：

```
mapFree f (Pure a) = ...
-- I like to write comments like these while using Haskell, then usually delete 
-- them by the end:
--
-- f :: a -> b
-- a :: a 
```

有了其中的两种类型的注释，并且知道 的类型`Pure`，您应该立即看到解决方案：

```
mapFree f (Pure a) = Pure (f a) 
```

现在是第二种情况：

```
mapFree f (Free fa) = ...
-- f  :: a -> b
-- fa :: Functor f => f (Free f a) 
```

好吧，既然`f`是 a `Functor`，我们实际上可以`mapFree`用来应用于`mapFree f`的内部组件`f (Free f a)`。所以我们得到：

```
mapFree f (Free fa) = Free (fmap (mapFree f) fa) 
```

现在，使用这个定义作为`Functor f => Functor (Free f)`实例，我们得到：

```
instance Functor f => Functor (Free f) where
  fmap f (Pure a) = Pure (f a)
  fmap f (Free fa) = Free (fmap (fmap f) fa) 
```

通过一些工作，您可以验证我们刚刚得出的定义与您正在困惑的定义相同。（正如其他人所提到的，`(<$>)`（在 中定义`Control.Applicative`）只是 . 的同义词`fmap`。）您可能仍然不理解它，但您设法编写了它，对于这些抽象类型来说，这通常已经足够好了。

不过，就理解它而言，对我有帮助的是：将`Free`monad 视为一种类似列表的结构，带有`Pure`as`[]`和`Free`as `(:)`。从类型的定义你应该看到：`Pure`是基本情况，`Free`是递归情况。实例正在做的`fmap`是将映射的函数“推”到这个结构的底部，到它所在的位置`Pure`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T19:56:52.430

由于我自己很困惑，所以我回答了一个问题......这是否是一个正确的替代（依赖于 Tikhon 的 Wrap 澄清）？

```
...
fmap g = go where
  go (Pure a)  = Pure (g a)
  go (Wrap fa) = Wrap (go <$> fa)

Substituting "fmap g" for "go", and "fmap" for "<$>" (since "<$>" is infix, 
 we flip "go" and "<$>"):

fmap g (Pure a)  = Pure (g a)
fmap g (Wrap fa) = Wrap (fmap (fmap g) fa)

Substituting "f (Free f a)" for "fa" in the last line (from the first data 
 declaration):

fmap g (Wrap fa) = Wrap ( fmap (fmap g) (f (Free f a)) )

                 = Wrap ( f ( fmap g (Free f a) ) )

                 = wrap ( f (Pure (g a) ) ) --if Free f a is Pure
                 or
                 = Wrap ( f ( fmap g (Wrap fa') ) ) --if Free f a is Wrap

The last line includes the recursion "fmap g (Wrap fa')", which would continue 
 unless Pure is encountered. 
```

# javascript - 检测多个图像加载事件

> ID：15989088
> 
> 赞同：6
> 
> 时间：2013-04-13T14:53:59.300
> 
> 标签：javascript, jquery, image, load

我想知道是否有一种方法可以检测多个图像的加载事件（特别是，一个函数应该在给定集合中的最后一个图像完成加载时执行）。

例如，用户点击一个链接，就会出现带有 10 张图片的 lightbox。加载所有图像后，加载栏应消失。

```
jQuery(".lightbox-image").each(function(){
    var image = jQuery(this);
    jQuery('<img />').attr('src', image.attr('src')).load(function(){
        hideLoadingBar();
    });
}); 
```

不幸的是，这触发`hideLoadingBar();`得太早了（在一张图像完成加载之后）。

PS
我还需要我的功能在图像被缓存后才能工作，所以：`jQuery('#img1, #img2').load();`不会工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:36:37.717

查看这个[jQuery imagesLoaded](https://github.com/desandro/imagesloaded)插件，我认为它应该适合您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T15:57:44.850

好吧，似乎没有人有更好的主意，所以下面是我的解决方案/解决方法。这个问题的另一个答案可能是您想要使用的，因为它是专门为此创建的库，但这是我要使用的解决方案，因为它更短更简单：

```
var allImages = jQuery(".lightbox-image").length;
var counter = 0;
jQuery(".lightbox-image").each(function(){
    var image = jQuery(this).find('.myimage');
    jQuery('<img />').attr('src', image.attr('src')).load(function(){
        counter++;
        if(counter >= allImages){
            hideLoadingBar();
        }
    });
}); 
```

适用于缓存图像而不是缓存图像。

# javascript - 使用 PhoneGap FileWriter 时如何从 BOM 开始

> ID：15989092
> 
> 赞同：0
> 
> 时间：2013-04-13T14:54:18.050
> 
> 标签：javascript, android, html, cordova

我尝试使用 PhoneGap FileWriter 编写 *.csv 文件。它工作正常，输出以 UTF-8 格式正确。问题是一些像 Excel 这样的阅读器期望 BOM（字节顺序标记）来检测 UTF-8。

如何在文件开头添加此 BOM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:17:37.327

我从

```
writer.write("\uFEFF"); 
```

它记录在这里： http: [//www.ecma-international.org/ecma-262/5.1/](http://www.ecma-international.org/ecma-262/5.1/)

有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:58:49.340

刚开始你的输出

writer.write("\xEF\xBB\xBF");

在附加 csv 内容之前。

# ios - 无法在设备上运行 - 不支持的架构错误

> ID：15989094
> 
> 赞同：0
> 
> 时间：2013-04-13T14:54:46.427
> 
> 标签：ios, xcode, cpu-architecture, iphone-developer-program

全部。我想知道是否有人可以帮助我解决我的问题。我有一个正在做的项目。我有所有的证书和必要的配置文件，或者至少我很确定。该项目成功构建，没有任何错误，并且在模拟器上运行良好。但是，一旦我尝试在设备上运行它，它就会出现臭名昭著的错误“XCode 无法在所选设备上运行 - 选择具有受支持架构的目标以便在此设备上运行”。我尝试过使用所有与架构相关的设置，包括在所有组合中手动添加 armv6、armv7 和 armv7s。

我正在运行 XCODE v4.6.1 我连接了 iPhone 3GS 和 iPhone 5 并设置为运行该应用程序。3GS 有 6.1.3 而 5 运行的是 6.1.2 我想我已经尝试了几乎所有可以在 Google 上找到的建议，但我仍然得到那个可怕的框，告诉我我设备上的架构不合适。我现在唯一能想到的就是我的应用程序本身有问题。这是可能的，还是 XCode 会接受这种事情？

有人可以帮忙吗？请。这件事快把我逼疯了！我差点把我*的*Mac Book Pro 扔下楼梯，我真的，真的不想那样做……

非常感谢 - 提前。

卢克

# php - 如何在php中将文件分成几部分？

> ID：15989095
> 
> 赞同：0
> 
> 时间：2013-04-13T14:54:49.580
> 
> 标签：php, file, split, sections

我的脚本将序列化的数组存储在文本文件中，但我希望能够将文件分成多个部分并将数据存储在这些部分中。我虽然有关于使用文本作为分隔符，然后使用子字符串来获取文件中两个子字符串之间的数据，但是有没有更好的方法（更快、更容易、更可靠等）？

像这样：

```
Data set 1
-------------
Data set 2
------------
Data set 3 
```

唯一的问题是其中一个数据集（序列化数组）可能包含用作分割点的文本......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:58:39.487

以 JSON 格式存储它们怎么样？您可以有一个表示数据集数组的顶级对象，或者只是一个名称/值对列表，如下例所示。这种方法的优点是你有一堆可用于读/写 JSON 的解析器。

例子：

```
{
    "data_set_1" : "serialized array data for data set 1",
    "data_set_2" : "serialized array data for data set 2",
    "data_set_3" : "serialized array data for data set 3"
} 
```

# html - 锚标签内的 CakePHP Span 标签

> ID：15989096
> 
> 赞同：5
> 
> 时间：2013-04-13T14:54:56.610
> 
> 标签：html, css, cakephp

我试图让 CakePHP 输出一个如下所示的链接：

```
 <a href="/foo/bar" class="some other classes">
     <span class="icon new"></span>FooBar</a> 
```

所以我在我看来使用以下代码

```
 <?php 
echo $this->Html->link(
$this->Html->tag('span', null, array('class' => 'icon new')) . "FooBar",
        array('controller' => 'foo', 'action' => 'bar'),
        array('class' => 'some other  classes', 'escape' => false)
     );
?> 
```

然而 CakePHP 输出以下内容：

```
<a href="/foo/bar" class="some other classes">
     <span class="icon new">FooBar</span></a> 
```

这打破了我的设计。如何让 CakePHP在标签*后*`<span>`附加“FooBar” ？

编辑：还值得一提的是，我知道`<span>`标签通常不应该在锚标签内，但在这种情况下它是必须的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T16:34:01.413

您需要使用空字符串而不是`null`跨度的文本，然后您的代码将按预期工作。

查看 HtmlHelper 的源代码，将其`null`视为“特殊”值，仅导致创建 span 的开始标记。您可以在这一行中看到这一点：

[https://github.com/cakephp/cakephp/blob/2.3.2/lib/Cake/View/Helper/HtmlHelper.php#L906](https://github.com/cakephp/cakephp/blob/2.3.2/lib/Cake/View/Helper/HtmlHelper.php#L906)

将您的代码更改为此，它应该可以工作；

```
echo $this->Html->link(
    $this->Html->tag('span', '', array('class' => 'icon new')) . "FooBar",
    array('controller' => 'foo', 'action' => 'bar'),
    array('class' => 'some other  classes', 'escape' => false)
); 
```

## 结束的补充说明`</span>`

一些解释，对于那些想知道的人：

您的示例中的*结束* `</span>`实际上**不存在**于 CakePHP 生成的输出中，而是由您的浏览器自动“添加”。如果您在浏览器中查看 HTML 的**源代码**，您会发现这实际上是您的 HTML 中的内容：

```
<a href="/foo/bar" class="some other classes">
 <span class="icon new">FooBar</a> 
```

如您所见，*没有关闭“跨度”*

因为`<span>`没有关闭，浏览器会尝试纠正这个错误并自动假设你“忘记”关闭它。因此，它将`</span>`在它找到的下一个标签之前添加一个关闭（在本例中为关闭`</a>`）。

浏览器中的“检查器”将始终显示浏览器用于呈现输出的*HTML*。这包括浏览器进行的自动更正*和*动态生成的元素（例如通过 JavaScript 添加的元素）。

**要检查 PHP 脚本的输出，请始终查看*源代码*，而不是检查器**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:51:04.973

在这种情况下，我完全避免使用 CakePHP 帮助程序，因为标记变得非常混乱，无法利用 IDE 中的自动完成或验证。

我通常会这样做：

```
<a href="<?php echo Router::url(array('controller'=>'myController', 'action'=>'index'))?>"><span class="icon-new"></span>Foobar</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:43:30.657

这对我来说看起来有点矫枉过正。只需这样做：

```
echo $this->Html->link(
   "<span class="icon new"></span> FooBar",
    array('controller' => 'foo', 'action' => 'bar'),
    array('class' => 'some other  classes', 'escape' => false)
); 
```

我已经使用 CakePHP 4 年了，我看不到在这种情况下使用标签的好处。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-13T15:11:17.953

在这种情况下你能使用普通的 PHP 吗？

我想你可以这样做：

```
<?PHP
   echo('<a href="' . '/foo/bar' . '" class="' . 'some other classes' . '"><span class="' . 'icon new' . '"></span>' . 'FooBar' . '</a>')
?> 
```

# php - libreoffice基本中的PHP str_ireplace

> ID：15989098
> 
> 赞同：0
> 
> 时间：2013-04-13T14:54:58.673
> 
> 标签：php, libreoffice-basic

有人知道如何像`str_ireplace`PHP 一样在 Libreoffice 中创建基本功能吗？
我想在我的细胞功能中使用。

```
str_ireplace(search - range of cells, replace - range of cells, text) 
```

或者至少`str_replace`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:32:50.657

我做了非常简单的功能

```
Function Str_ireplace(Search As Variant, Replace As Variant, Source As String)

  Dim Result As String
  Dim StartPos As Long
  Dim CurrentPos As Long
  Dim CurrentSearch As String
  Dim CurrentReplace As String

  Result = ""

  For Row = Lbound( Search, 1 ) To Ubound( Search, 1 )
    For Col = LBound(Search, 2) To UBound(Search, 2)
        StartPos = 1
        CurrentPos = 1
        CurrentSearch = Search(Row, Col)
        CurrentReplace = Replace(Row, Col)
        Result = ""

        Do While CurrentPos <> 0
            CurrentPos = InStr(StartPos, Source, CurrentSearch)
            If CurrentPos <> 0 Then
                Result = Result + Mid(Source, StartPos, _
                CurrentPos - StartPos)
                Result = Result + CurrentReplace
                StartPos = CurrentPos + Len(CurrentSearch)
            Else
                Result = Result + Mid(Source, StartPos, Len(Source))
            End If                ' Position <> 0
        Loop
        Source = Result 
    Next 
  Next

  Str_ireplace = Result    
End Function 
```

我以此为例： [http://wiki.openoffice.org/wiki/Documentation/BASIC_Guide/Strings_(Runtime_Library)](http://wiki.openoffice.org/wiki/Documentation/BASIC_Guide/Strings_(Runtime_Library))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:27:41.083

尝试这个

句法

**替换（“文本”；位置；长度；“新文本”）**

文本是指将替换一部分的文本。

位置是指替换将开始的文本中的位置。

长度是要替换的文本中的字符数。

NewText 是指替换 Text 的文本。

**例子**

```
=REPLACE("1234567";1;1;"444") returns "444234567". One character at position 1 is replaced by the complete NewText. 
```

[https://help.libreoffice.org/Calc/Text_Functions#Example_13](https://help.libreoffice.org/Calc/Text_Functions#Example_13)

或者

**SUBSTITUTE（“文本”；“搜索文本”；“新文本”；出现次数）**

**例子**

=SUBSTITUTE("123123123";"3";"abc") 返回 12abc12abc12abc。

=SUBSTITUTE("123123123";"3";"abc";2) 返回 12312abc123。

[https://help.libreoffice.org/Calc/Text_Functions#SUBSTITUTE](https://help.libreoffice.org/Calc/Text_Functions#SUBSTITUTE)

# java - 播放 mp3 文件后没有声音

> ID：15989101
> 
> 赞同：1
> 
> 时间：2013-04-13T14:55:16.660
> 
> 标签：java, audio, mp3

嘿那里。我只想在我的 Java J2SE 桌面应用程序中播放一个 mp3 文件。一切都很好，没有例外，但问题是听不到音频我已经检查了我的扬声器，并使用了所有类型的 Java mp3 插件，如 JavaZoom 的 JMF 和 JLayer。我的代码在下面列出，我也将 Jlayer.jar 添加到我的项目中。请帮我解决问题，因为我从过去 3 天开始就在尝试，但没有成功！请帮助我提前谢谢...

```
 private void playMe(){

    try{

        String file="E://Net Beans Work Space//mp3//a.mp3";

        FileInputStream fis     = new FileInputStream(file);

        BufferedInputStream bis = new BufferedInputStream(fis);

        player = new Player(bis);

     }catch(Exception e){

        System.out.print("ERROR "+e);

    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:59:01.810

您是否尝试启动播放器？

```
player.start(); 
```

# php - FILTER_SANITIZE_STRING 正在剥离 < 字符及其后面的任何文本

> ID：15989103
> 
> 赞同：5
> 
> 时间：2013-04-13T14:55:38.107
> 
> 标签：php

`FILTER_SANITIZE_STRING`在变量（由人工输入填充）上使用时我遇到了一个奇怪的问题。它似乎剥离了`<`字符和之后的任何文本。`>`角色保持不变。

我认为它认为这`<`是一个需要剥离的 HTML 标签，但是它后面没有结束标签，所以我不知道它为什么会这样。有没有办法让它离开`<`原位，并且仍然按照应有的方式进行消毒？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T15:19:09.843

根本问题是，当您使用`FILTER_SANITIZE_STRING`剥离 HTML 标记时，您将输入作为 HTML 处理。根据您的描述，您的输入是纯文本。因此，过滤器只能破坏输入数据，正如用户已经报告的那样。

虽然这似乎是一种非常流行的技术，但我从来没有理解将纯文本上的 HTML 标签条带化作为清理方法的概念。如果它不是 HTML，则不需要关心 HTML 标记，原因与您不需要关心 SQL 关键字或命令行命令相同。只是数据而已。

但是，当然，当您之后将字符串注入 HTML 时，您需要对其进行转义以确保：

1.  您的数据按原样显示
2.  结果仍然是有效的 HTML

这就是[htmlspecialchars()](http://php.net/htmlspecialchars)存在的原因。同样，当您动态生成任何其他类型的代码时，您需要使用相应的转义机制：SQL、JavaScript、JSON...

# spring - 春季安全会议。保持登录状态

> ID：15989104
> 
> 赞同：0
> 
> 时间：2013-04-13T14:55:45.243
> 
> 标签：spring, spring-mvc, spring-security

我目前正在尝试为我的 Spring Web 应用程序实现登录机制，我对 Spring 中使用的安全概念有点困惑。

如果我访问需要登录的页面，它会正确重定向到登录页面。登录后，实际页面可见（到目前为止很好）。

为此的代码

```
 <security:http use-expressions="true" auto-config="true">
    <security:intercept-url pattern="/login" access="permitAll" />
    <security:intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
        <security:form-login login-page="/login" default-target-url="/welcome"
            authentication-failure-url="/loginfailed" />
        <security:logout logout-success-url="/logout" />
        <security:remember-me/>
     </security:http> 
```

但是，如果我再次访问同一页面，我需要再次登录。所以我需要某种安全会话。我已经尝试并阅读了很多关于记住我和会话管理的内容，但不知道如何去做。

有人可以给我一些指示，春季文档中的相应章节或关键字吗？

登录表单

```
<form name='f' action="<c:url value='j_spring_security_check' />"
        method='POST'>

        <table>
            <tr>
                <td>User:</td>
                <td><input type='text' name='j_username' value=''>
                </td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type='password' name='j_password' />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="submit" type="submit"
                    value="submit" />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="reset" type="reset" />
                </td>
            </tr>
        </table>

    </form> 
```

登录控制器.java

```
@RequestMapping(value="/login", method = RequestMethod.GET)
    public String login(ModelMap model) {

        return "login";

    }

    @RequestMapping(value="/loginfailed", method = RequestMethod.GET)
    public String loginerror(ModelMap model) {

        model.addAttribute("error", "true");
        return "login";

    }

    @RequestMapping(value="/logout", method = RequestMethod.GET)
    public String logout(ModelMap model) {

        return "login";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:02:41.347

为什么登录后的第二个请求没有维护安全会话，这很神秘，因为您的配置看起来不错。一些日志将有助于解决此问题。`org.springframework.security`在重现问题后启用跟踪级别日志记录并共享日志。

到目前为止，评论就足以说明这一点，但我还想澄清一下记住我功能的配置和使用，因为你在那里也遇到了一些问题。

记住我的服务应该与您在原始问题中的简单配置一起使用。由于您没有指定`data-source-ref`on `<remember-me>`，因此将应用一个更简单且安全性较低的实现，它不会保留颁发给客户端的令牌。

这不是强制性的，但通过配置，`data-source-ref`您可以获得一些额外的安全性：如果他的记住我令牌（cookie）被盗并被攻击者用来以用户身份登录您的站点，您将能够警告用户. 这值得考虑投入额外的努力。

现在重要的是：remember-me 服务的一个文档不足的特性是客户端必须通过发送一个带有 name 的请求参数**来明确要求服务器记住他的登录**`_spring_security_remember_me`。因此，您必须在登录表单中插入类似以下代码段的内容。

```
<p>
    <label for="_spring_security_remember_me">Remember-me</label>
    <input id="_spring_security_remember_me" 
           name="_spring_security_remember_me" type="checkbox"/>
</p> 
```

没有这个，remember-me 服务将无能为力。（为了完整起见：有一个替代选项可以`alwaysRemember`在 remember-me 服务上设置标志，但这有点不方便，因为这个配置点没有被安全命名空间公开）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:58:07.247

您需要对 conf 文件中的安全定义进行此操作：

```
<security:remember-me services-alias="rememberMeService" data-source-ref="dataSource" user-service-ref="userService"/>
</security:http> 
```

并创建一个持久网登录表

```
create table persistent_logins (username varchar(64) not null, series varchar(64) primary key, token varchar(64) not null, last_used timestamp not null) 
```

但我现在重复[官方文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html)

# java - 找出哪个程序使用声卡

> ID：15989120
> 
> 赞同：1
> 
> 时间：2013-04-13T14:57:34.500
> 
> 标签：java, c++, soundcard

我想找出当前使用声卡的程序。我想做的是事后访问该程序并获取有关当前正在播放的歌曲的信息。我知道并非每个媒体播放器都支持从外部进行这种访问，所以我考虑过代码注入或类似的东西，但我不知道这是否可能（在 Java 中）。我想用 Java 编写这个应用程序，但我也熟悉 C++。

所以我的两个问题是：1.是否可以访问声卡以接收有关当前使用它的程序的信息？2\. 之后可以收到标题和艺术家的信息吗？

# php - 字符串的正则表达式

> ID：15989121
> 
> 赞同：-1
> 
> 时间：2013-04-13T14:57:36.153
> 
> 标签：php, regex

使用我已经拥有的以下代码：

```
$var =  "City 0.428371 2 BEIJING Beijing 39.91388888888889 116.39166666666667  Organization 0.392154 1 PBOC PBOC Motorsports Club  Company 0.38134 1"; 
```

需要提取这个：

> 城市 0.428371 2 北京

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:59:42.230

你尝试了什么？

这似乎可以解决问题：

```
$parts = explode(' ', $var, 5);
array_pop($parts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:23:09.250

```
$extracted = implode(' ', array_slice(explode(' ', $var), 0, 4)); 
```

北京必须是一个词，例如，不能与“纽约”一起使用。

# google-places-api - REQUEST_DENIED 使用文档中的有效键和示例查询

> ID：15989122
> 
> 赞同：0
> 
> 时间：2013-04-13T14:57:37.670
> 
> 标签：google-places-api

我所有的请求都被拒绝了。我的故障排除已经到了运行 Places API 文档中的示例查询的地步，如下所示：

[https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Sydney&sensor=true&key=mykey](https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Sydney&sensor=true&key=mykey)

...将“mykey”替换为我最近从 API 控制台生成的浏览器密钥。我的简单 API 访问密钥的引用设置为 * 以允许所有。API 控制台显示我的 Places API 使用没有已知问题，它已打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:58:59.363

我应该将“推荐人”留空，而不是 *

# codeigniter - Codeigniter：在控制器中使用库？

> ID：15989134
> 
> 赞同：1
> 
> 时间：2013-04-13T14:58:42.240
> 
> 标签：codeigniter, controller

我想在控制器文件中使用我的库函数。是否可以 ？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:25:27.590

不明白你的意思。如果您的意思是“我可以编写自己的库并从 CodeIgniter 中的控制器调用它们吗”，答案是肯定的。

我建议查看CodeIgniter 文档中的[此页面以获取更多详细信息。](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

# android - android：在解锁设备时启动我的应用程序

> ID：15989135
> 
> 赞同：0
> 
> 时间：2013-04-13T14:58:43.537
> 
> 标签：android, android-intent

**我在解锁后启动我的应用程序**时遇到问题。

我是android编程的新手。我正在***为 Android 构建人脸识别解锁系统***。任何人，请告诉我有关在解锁设备时启动我的应用程序的任何教程或任何帮助。我无法从谷歌获得任何帮助。所以，**请**任何人尽快帮助我。

因为我的项目是人脸识别解锁。这意味着如果一个人解锁设备，它必须启动我的应用程序以进行面部检测。我做了很多人脸检测工作，但无法在解锁时启动我的应用程序。JnR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:06:40.833

有一个意图 ACTION_USER_PRESENT 在用户解锁后广播。这是一个[链接](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)

也访问这个[主题](https://stackoverflow.com/questions/2803069/android-unlock-screen-intent)，看起来类似于你的问题

# iphone - 如何访问在 UITableViewCell 中输入的值？

> ID：15989136
> 
> 赞同：0
> 
> 时间：2013-04-13T14:58:45.783
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我的应用程序中有一个原型表，我用一个内部带有 UITextField 的 customTableViewCell 类填充。

在我的导航栏中，我有一个保存按钮。

问题是，如何访问这个动态创建的单元格来获取 UITextField 内容？

这是我的代码，你可以看到我尝试使用 NSMutableArray

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"customTableCell";

    customTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    [self.pfCells addObject:cell];

    if(cell == nil)
    {
        cell = [[customTableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                reuseIdentifier:CellIdentifier];

    }

    // Configuration
    cell.lblName.text = [self.pfFields objectAtIndex: [indexPath row]];

    cell.txtType = [self.pfTypes objectAtIndex: [indexPath row]];

    if ([[self.pfTypes objectAtIndex:[indexPath row]] isEqualToString: @"n"]) {
        [cell.txtField setKeyboardType:UIKeyboardTypeNumberPad];
    } else if ([[self.pfTypes objectAtIndex:[indexPath row]] isEqualToString: @"m"]) {
        [cell.txtField setKeyboardType:UIKeyboardTypeEmailAddress];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:41:45.480

**快速回答：**

```
#pragma mark - UITextFieldDelegate
- (void)textFieldDidEndEditing:(UITextField *)textField
{
   // grab the row we are working on
   NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

   // remove the old key/value pair if it exists and add the new one
   [self.modelDictionary removeObjectForKey:indexPath];
   [self.modelDictionary setObject:textField.text forKey:indexPath];
} 
```

请务必`cell.txtField.delegate = self`在配置单元格时添加。然后在您的保存按钮中，您将遍历字典并保存值——或者只是保存字典本身。

此外，如果您的目标是 iOS6 或更高版本，则使用`dequeueReusableCellWithIdentifier:forIndexPath:`此方法可确保返回单元格并正确调整其大小，因此您不必检查 nil 并手动初始化单元格。

**更长的答案：**

您通常永远不想将模型存储在您的视图中。除了破坏 MVC 设计模式之外，它还会导致`UITableViews`. 具体来说， a`UITableViewCell`将在它滚出屏幕时被回收。因此，您在这些字段中拥有的任何值都将丢失。如果您只有从不滚动屏幕的可见行，则可以避免这样做，但我鼓励您完全避免这种方法。

相反，您应该将输入到模型对象中的文本框中的值存储起来。最简单的方法是`UITextFieldDelegate's` `textFieldDidEndEditing:`在用户输入值后使用它们来获取值，然后将这些值添加到您的模型中。您的模型可以像`NSDictionary`使用 indexPath 作为键一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:30:56.533

这是另一种保存 UITableViewCell 中包含的 UITextField 内容的方法：

1.  tableView:cellForRowAtIndexPath 内部：设置委托和 txtField 的标签
2.  实现 textFieldDidEndEditing：检查 UITextField 标记值并将数据保存在私有变量中
3.  重新加载 UITableView

如果每次更改文本字段值时都不需要遍历整个 tableview，则此实现的最大优势。

# java - 同步连接上的异步消息。JAVA

> ID：15989137
> 
> 赞同：0
> 
> 时间：2013-04-13T14:58:46.733
> 
> 标签：java, multithreading, sockets, networking, serversocket

我想知道是否有人可以帮助我了解如何进行我的项目。基本上我所拥有的是一个网络程序，它使用 Serversocket 来允许来自客户端的连接，对于每个新连接，我都会启动一个新线程。它们工作得很好，但它们一次只能向服务器发送一条消息，并且只有当服务器发送回响应时，才允许客户端键入新消息。我想做的是创建一个异步的“通知消息”。基本上，客户端请求某些东西，服务器会在遇到客户端查询时将其发回，但必须在服务器和客户端仍在通信时完成。

“来自客户的请求是：在服务器端发生变化（例如预订可用性）时得到通知。

到目前为止，我尝试的是使用 JGroups JMS 的 NotificationBus，我无法做到。我正在尝试创建一个新线程来做到这一点，但我也不走运，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:26:14.620

你考虑过使用 Netty4 吗？它支持完全异步的双向通信。

# python - 如何通过python检索网页的完整内容

> ID：15989145
> 
> 赞同：-4
> 
> 时间：2013-04-13T14:59:15.830
> 
> 标签：python, html, web

有些网页在加载时不会显示全部内容，而只显示部分内容，以节省加载时间。

如果用户向下拖动滚动条，将显示越来越多的内容。

我的问题是 - 如何通过 python 获取网页的完整内容？

一开始我尝试

```
content = urlopen('http://www.kickstarter.com/projects/597507018/pebble-e-paper-watch-for-iphone-and-android/backers') 
```

但它只获取页面的第一部分。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:07:26.807

正如 Martijn Pieters 所指出的，有很多方法可以通过各种网站来实现。因此，您可能希望使用无头浏览器。这是讨论此问题的问题的链接：

[适用于 Python 的无头浏览器（需要 Javascript 支持！）](https://stackoverflow.com/questions/6025082/headless-browser-for-python-javascript-support-required)

在这个问题中，Richard 给出了您可能会发现有用的以下答案：

> 我通过 pyqt / pyside 在 Python 中使用 webkit 作为无头浏览器： [http ://www.riverbankcomputing.co.uk/software/pyqt/download](http://www.riverbankcomputing.co.uk/software/pyqt/download) [http://developer.qt.nokia.com/wiki/Category:LanguageBindings:: PySide::下载](http://developer.qt.nokia.com/wiki/Category:LanguageBindings::PySide::Downloads)
> 
> 我特别喜欢 webkit，因为它设置简单。对于 Ubuntu，您只需使用：
> 
> sudo apt-get install python-qt4
> 
> 这是一个示例脚本： [http ://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/](http://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/)

我希望这有帮助。

PS：对于以后的问题，尽量不要对你的问题更具体一点，这样你就不会被别人否决。

* * *

**编辑：2013-04-13 19:00 猫**

在查看了您更新的问题以及您正在调查的特定 URL 后，我在 Chrome 中打开它并使用开发人员工具检查了网络请求，我看到当您到达页面底部时会发生什么，它调用了一个 URL格式如下：

```
http://www.kickstarter.com/projects/597507018/pebble-e-paper-watch-for-iphone-and-android/backers?cursor=675683697 
```

您只需要使用之前的 HTML 来确定要使用的正确光标值。

# c# - 视频的纵横比在一台计算机上保持，但在另一台计算机上不使用 DirectShow

> ID：15989146
> 
> 赞同：0
> 
> 时间：2013-04-13T14:59:22.580
> 
> 标签：c#, video, directshow, directshow.net

我有一个`C#`使用`DirectShowNet` [库](http://directshownet.sourceforge.net/)播放视频的应用程序。当我在笔记本电脑上使用 Visual C# 调试我的应用程序时，视频会被拉伸以适合容器的尺寸，即视频的纵横比不会保持不变。当我在另一台计算机（相同的操作系统）上加载并运行我的应用程序时，`aspect ratio`会在屏幕上维护并创建黑条。

我**不**希望保持纵横比。我希望另一台计算机以与我的计算机显示视频相同的方式显示视频。

为什么您认为两台计算机的行为不同和/或我该如何解决？

当我第一次在另一台计算机上看到这种行为时，我更新了那台计算机`DirectX`无济于事。完全相同的视频正在两个系统上运行。

**编辑#1：**可能`filter`在另一台计算机上丢失了一些东西吗？我假设默认行为`DirectShow`不是维护`Aspect Ratio`.

**编辑#2：**当我尝试使用`IVMRWindowlessControl`( `VMR-7`& `VMR-9`) 时，从 VMR 到`IVMRWindowlessControl`持续的转换会产生一个`NULL`变量。结果，我尝试`IVMRAspectRatioControl`使用`VMR-7`它并在其中一台计算机上运行。尽管要求删除纵横比保留，另一台计算机仍处于信箱模式。

**编辑#3：**这是使用`IVMRAspectRatioControl`with的代码`VMR-7`：

```
int hr = 0;

this.graphBuilder = (IGraphBuilder)new FilterGraph();

this.vmr = new VideoMixingRenderer();

this.graphBuilder.AddFilter((IBaseFilter)vmr, "VMR");

this.aspectRatioControl = (IVMRAspectRatioControl)this.vmr;

hr = this.aspectRatioControl.SetAspectRatioMode(VMRAspectRatioMode.None);
DsError.ThrowExceptionForHR(hr);

hr = this.graphBuilder.RenderFile(filename, null);
DsError.ThrowExceptionForHR(hr); 
```

然后我`IVideoWindow`用来显示视频。

尝试使用 时`IVMRWindowlessControl9`，在第 4^行之后`this.windowlessControl`评估为。当我尝试使用. 以下用途：`NULL``cast`^(`NULL``VMR-7``VMR-9`)

```
this.graphBuilder = (IGraphBuilder)new FilterGraph();

this.vmr = new VideoMixingRenderer9();

this.graphBuilder.AddFilter((IBaseFilter)vmr, "VMR");

this.filterConfig = (IVMRFilterConfig9)vmr;

hr = this.filterConfig.SetNumberOfStreams(1);
DsError.ThrowExceptionForHR(hr); 
hr = this.filterConfig.SetRenderingMode(VMR9Mode.Windowless);
DsError.ThrowExceptionForHR(hr);  

this.windowlessControl = (IVMRWindowlessControl9)this.vmr;

hr = this.windowlessControl.SetAspectRatioMode(VMR9AspectRatioMode.None);
DsError.ThrowExceptionForHR(hr);

hr = this.graphBuilder.RenderFile(filename, null);
DsError.ThrowExceptionForHR(hr); 
```

我不完全确定它是如何工作的，但是第二台计算机是否有可能不`VMR-7`支持`IVMRAspectRatioControl`? 两台计算机上的操作系统是相同的，但是第一台计算机（可以工作）是我编写软件的地方（它有 IDE）。第二台计算机全新安装了`Windows`. 在第二台计算机上，我也`DirectX`如前所述进行了更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:15:47.887

视频渲染器可以配置为保留或不保留纵横比。配置方法（也可能是默认设置，也可能取决于渲染器的内部模式，例如覆盖/离屏表面）取决于您使用的视频渲染器版本，例如对于 VMR-7，您将使用[`IVMRWindowlessControl::SetAspectRatioMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390562%28v=vs.85%29.aspx)'s（或者，`IVMRAspectRatioControl::SetAspectRatioMode`如果您的 VMR 处于窗口模式） DirectShow.NET 等效/包装器。VMR-9、EVR 也有类似的方法。

使用 VMR-9，您将使用`IVMRAspectRatioControl9::SetAspectRatioMode`. 使用 EVR 是`IMFVideoDisplayControl::SetAspectRatioMode`。

如果您不想保留任何信箱和纵横比，只需在设置视频渲染器时明确禁用它。

# qt - 无法打开资源文件

> ID：15989149
> 
> 赞同：8
> 
> 时间：2013-04-13T14:59:51.690
> 
> 标签：qt, qt5

这是我的代码：

```
QFile test("://needle.png"); // also tried :/needle.png :\needle.png :\\needle.png

if(test.open(QFile::ReadOnly)) {
    qDebug() << "yay";
} else {
    qDebug() << "fail";
} 
```

我的项目文件中有这个：

```
RESOURCES += Resources.qrc 
```

这是我的 QRC 文件：

```
<RCC>
    <qresource prefix="/">
        <file>needle.png</file>
    </qresource>
</RCC> 
```

我一直失败作为输出。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-19T18:46:28.653

我有完全相同的问题。再次运行 qmake 终于奏效了（构建 -> 运行 qmake）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T16:03:40.450

是否有 URL 表示法

```
QFile test("qrc:///needle.png"); 
```

为你工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T17:27:02.497

我删除了 project.user.pro 文件，重新打开了 QT。它选择了套件并进行了重建。现在工作。

# javascript - 如何在 div 中提交表单元素

> ID：15989152
> 
> 赞同：1
> 
> 时间：2013-04-13T15:00:04.113
> 
> 标签：javascript, jquery, html

我想通过单击 div 和表单外部的外部按钮在 div 内提交表单。

我知道 div 标签类名称。我没有表格名称、类别或 ID。它是随机生成的，我想保持这种状态。

页面上只有表格，但可以有更多。

但是，提到的 div 标签内只有一种形式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:03:49.300

使用[**.submit();**](http://api.jquery.com/submit/)

```
 $("#YourExternalButtonId").on('click',function(){
      $(".YourDivClass").find("form").submit();
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:04:37.013

这是使用 jQuery 的选项

单击表单中的提交按钮

```
$('button').click(function(){
    $('div.classname form input[type="submit"]').click();
}); 
```

或提交表格

```
$('button').click(function(){
    $('div.classname form').submit();
}); 
```

# jquery - 从中删除元素 上 点击

> ID：15989154
> 
> 赞同：0
> 
> 时间：2013-04-13T15:00:53.543
> 
> 标签：jquery, ajax, asp.net-mvc

```
 <ul id="images">
        @foreach (var image in Model.Images)
        {
            <li id="@image.Id" style="list-style-type: none;">
                <img src="@image.Path?width=200"/><br/>
                <span id="remove"><i class="icon-minus"></i> <a href="#">Remove</a></span>
            </li>
        }
    </ul> 
```

我有这段代码，它显示图片，我想要的是允许用户删除一些，如果用户想要的话。

我不知道如何攻击它。

首先，我如何找出点击了哪个 li 项目以及如何将其从列表中删除。

然后我需要向处理程序/控制器调用 Ajax 帖子以实际删除它。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:08:49.783

```
$(function(){
    $('#images li').click(function(){
        var liId = this.id;
        $(this).remove();
        //call ajax here
    });
 }); 
```

如果 li 是动态添加的，则必须使用委托：

```
$(function(){
        $('#images').on('click','li',function(){
            $(this).remove();
            //call ajax here
        });
     }); 
```

# javascript - 如何计算 div 中许多图像的总宽度？

> ID：15989158
> 
> 赞同：0
> 
> 时间：2013-04-13T15:01:08.653
> 
> 标签：javascript, jquery, html

我有一个这样的 div 元素：

```
<div id="test">
    <img src="..."/>
    <img src="..."/>
    <img src="..."/>
    <img src="..."/>
</div> 
```

我想做的是首先使所有图像具有相同的高度，然后计算它们的新宽度的总和。我试过这个：

```
window.onload = function() {
    var width = $(window).width(), totalwidth=0;
    $('#test img').height('200px');
    $("#test").each(function() {
        totalwidth += $("#test img").attr("width");
  });
  alert(totalwidth);
} 
```

但警报又回来了`NaN`。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T15:03:19.240

尝试

```
 $("#test img").each(function() {
        totalwidth += $(this).width();
  }); 
```

# javascript - 将局部变量传递给我只能对其进行有限更改的函数

> ID：15989159
> 
> 赞同：1
> 
> 时间：2013-04-13T15:01:09.600
> 
> 标签：javascript, callback, global-variables, jsonp, closures

我刚开始接触 JavaScript，在 SO 上还找不到像这样的确切场景，所以我要试试运气。我在一个外部 JS 文件中有两个函数可以在我们的网站上创建视频源：

```
function getVideos() {
    //gets a list of videos
}

//callback function automatically called by getVideos()
function response(jsonData) { //can't change this line
    var resp = document.getElementById("resp"); //can change this line and any subsequent lines
    //parses data and populates resp
} 
```

然后，从 HTML 端，我们只需调用 getVideos() 即可创建并填充视频源。

但是，我希望能够将我想要的任何元素 ID 传递给 response()，以便我们可以在同一页面的不同位置创建多个视频源。问题是我无法更改 response() 的函数声明以包含另一个参数。或者至少我没有被托管我们视频的公司所引导相信我可以。

我试过用 getVideos() 包装 response() 并从那里传递一个元素 ID，但是没有调用 response()，我能想到的唯一解决方案是将元素 ID 存储在全局变量中，我知道这在 JavaScript 中通常是一个禁忌。

**我的问题是：**我只是硬着头皮使用全局变量，还是有其他方法？

有关更多信息，这里是我们现在的 JS 代码（带有闭包）：[http](http://www.thebearrocks.com/Other/js/videoFeed/createVideoFeed.js) ://www.thebearrocks.com/Other/js/videoFeed/createVideoFeed.js 这里是关于 response() 的教程以下来自我们视频的主持人：http: [//support.brightcove.com/en/video-cloud/docs/making-media-api-calls-dynamic-script-tags](http://support.brightcove.com/en/video-cloud/docs/making-media-api-calls-dynamic-script-tags)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:13:51.550

> 我试过用 getVideos() 包装 response() 并从那里传递一个元素 ID，但是没有调用 response()，我能想到的唯一解决方案是将元素 ID 存储在全局变量中，我知道这在 JavaScript 中通常是一个禁忌。
> 
> 我的问题是：我只是硬着头皮使用全局变量，还是有其他方法？

不，不是 id 变量需要成为全局变量，而是您的本地`response`函数需要从[JSONP 脚本](http://en.wikipedia.org/wiki/JSONP)中回调——您将创建一个[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)。

您可以通过调用“导出”它

```
window.response = mylocalResponseFunction; // you did name that local var "response" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:11:29.067

也许你可以使用参数？像这样：

```
function response(jsonData) { //callback function automatically called by getVideos()
    var elemId = arguments.length<2 ? "resp" : arguments[1]+"";
    var resp = document.getElementById(elemId);
    //parses data and populates resp
} 
```

或者，声明第二个参数具有这样的默认值：

```
function response(jsonData, elemId) { 
    elemId = elemId || "resp";
    var resp = document.getElementById(elemId);
    //parses data and populates resp
} 
```

在这种情况下，函数可以用一个或两个参数调用

# ruby-on-rails-3 - 使用haml在rails中无限滚动

> ID：15989160
> 
> 赞同：0
> 
> 时间：2013-04-13T15:01:26.257
> 
> 标签：ruby-on-rails-3, haml, infinite-scroll, kaminari

我正在尝试在我的项目中实现无限滚动。我已经按照这个方法做了所有事情：[https](https://github.com/amatsuda/kaminari/wiki/How-To:-Create-Infinite-Scrolling-with-jQuery) ://github.com/amatsuda/kaminari/wiki/How-To:-Create-Infinite-Scrolling-with-jQuery 但这对我不起作用:(

控制器：

```
 def show
        category = Category.find(params[:id])
        products = category.products.page(params[:page])
        @category = CategoryDecorator.decorate(category)
        @products = ProductDecorator.decorate_collection(products)

        respond_to do |format|
          format.js
          format.html
          format.xml  { render :xml => @products }
        end    
      end 
```

显示.html.haml：

```
 #products_list
      %page
        = render 'products_list'

    :javascript  
      $(function() {
        var page = 1,
            loading = false;

        function nearBottomOfPage() {
          return $(window).scrollTop() > $(document).height() - $(window).height() - 200;
        }

        $(window).scroll(function(){
          if (loading) {
            return;
          }

          if(nearBottomOfPage()) {
            loading=true;
            page++;
            $.ajax({
              url: '/universes/nautique/sports/surfwear/categories/boarshorts?per_page=' + page,
              type: 'get',
              dataType: 'script',
              success: function() {
                $(window).sausage('draw');
                loading=false;
              }
            });
          }
        });

        $(window).sausage();
      }());

    - content_for :javascript do
      = javascript_include_tag "jquery.sausage" 
```

部分_products_list.html.haml：

```
 - @products.each_with_index do |product,index|
      .block-prodlist{ data: { index: product.id } }
        .inner.onfocus
          .selection
            %label AJOUTER À MA SÉLECTION
            %input.chk{:name => "", :type => "checkbox", :value => ""}/
          .thumbproduit
            = index
            %img{:alt => "Produit", :height => "194", :src => "/assets/editorial/produit1.jpg", :width => "194"}/
            .prixcaption -20%
          .context
            %h3 
              = product.brand_name 
```

和 show.js.haml：

```
 $("#products_list").append("#{escape_javascript(render(@products))}"); 
```

我的萤火虫中没有看到 show.js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:03:21.613

商店脚本出错 - show.js.haml

我已将@products 更改为我的部分名称：

```
 $("#products_list").append("#{escape_javascript(render('products_list'))}"); 
```

# delphi - 隐藏窗口阴影

> ID：15989163
> 
> 赞同：2
> 
> 时间：2013-04-13T15:01:40.407
> 
> 标签：delphi, window, tooltip, shadow

我在 Delphi 中编写了一个程序，它监视一个窗口并在创建时使其不可见。窗口正确地变得不可见，但它的阴影永远保留在桌面上（直到下次重新启动）。我要隐藏的窗口是在 Windows 7 和 8 系统托盘中按住鼠标时间时可以看到的今天工具提示。如何隐藏阴影？

这是代码：

```
h := FindWindow('ClockTooltipWindow', nil);
if (IsWindow(h)) then ShowWindow(h, SW_HIDE); 
```

这是剩余阴影的图片：
![在此处输入图像描述](https://i.stack.imgur.com/Gdd50.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T13:59:10.657

这是一个有趣/非常粘人的伪影，可能阴影会从视频驱动程序中得到一些特殊处理。我不知道它为什么/如何发生，也许工具提示只是不在乎在隐藏后即将被销毁时移除它的阴影。

作为一种解决方法，您可以在隐藏到不会绘制阴影的大小之前调整工具提示的大小，例如：

```
h := FindWindow('ClockTooltipWindow', nil);
if (IsWindow(h)) then begin
  SetWindowPos(h, 0, 0, 0, 1, 1, SWP_NOMOVE or SWP_NOACTIVATE);
  ShowWindow(h, SW_HIDE);
end; 
```

但是，我认为更好的方法是很好地要求它消失：

```
h := FindWindow('ClockTooltipWindow', nil);
if (IsWindow(h)) then 
  PostMessage(h, WM_SYSCOMMAND, SC_CLOSE, 0); 
```

# lua - 如何在 Lua 库中构建内部依赖关系？

> ID：15989166
> 
> 赞同：1
> 
> 时间：2013-04-13T15:02:01.613
> 
> 标签：lua

我正在努力弄清楚如何在我正在编写的 Lua 库中构建并使用内部依赖项。

我已经像这样定义了我的库：

```
./alib.lua
./alib/adependency.lua 
```

和代码：

```
-- File: ./alib.lua
local ad = require "alib.adependency"
module( "alib")
return {}

-- File: ./alib/adependency.lua
module( "adependency" )
return {} 
```

这是一种享受：

```
$ lua alib.lua
<no output> 
```

现在让我们将这个库“添加”到另一个应用程序中：

```
./anapp.lua
./lib/alib.lua
./lib/alib/adependency.lua 
```

和新代码：

```
-- File: ./anapp.lua
local alib = require "lib.alib"
local print = print
module( "anapp")
print "Hello" 
```

尝试运行它：

```
$ lua anapp.lua
lua: ./lib/alib.lua:2: module 'alib.adependency' not found:
    no field package.preload['alib.adependency']
    no file './alib/adependency.lua'
    no file '/usr/local/share/lua/5.1/alib/adependency.lua'
    no file '/usr/local/share/lua/5.1/alib/adependency/init.lua'
    no file '/usr/local/lib/lua/5.1/alib/adependency.lua'
    no file '/usr/local/lib/lua/5.1/alib/adependency/init.lua'
    no file '/usr/share/lua/5.1/alib/adependency.lua'
    no file '/usr/share/lua/5.1/alib/adependency/init.lua'
    no file './alib/adependency.so'
    no file '/usr/local/lib/lua/5.1/alib/adependency.so'
    no file '/usr/lib/x86_64-linux-gnu/lua/5.1/alib/adependency.so'
    no file '/usr/lib/lua/5.1/alib/adependency.so'
    no file '/usr/local/lib/lua/5.1/loadall.so'
    no file './alib.so'
    no file '/usr/local/lib/lua/5.1/alib.so'
    no file '/usr/lib/x86_64-linux-gnu/lua/5.1/alib.so'
    no file '/usr/lib/lua/5.1/alib.so'
    no file '/usr/local/lib/lua/5.1/loadall.so'
stack traceback:
    [C]: in function 'require'
    ./lib/alib.lua:2: in main chunk
    [C]: in function 'require'
    anapp.lua:2: in main chunk
    [C]: ? 
```

哦亲爱的。现在我在库中进行手动编辑：

```
-- File: ./lib/alib.lua
-- local ad = require "alib.adependency" -- Doesn't work
local ad = require "lib.alib.adependency" -- Works
module( "alib")
return {} 
```

它有效：

```
$ lua anapp.lua
Hello 
```

似乎 Lua 的`require()`路径与 Lua 运行的最终脚本相关，而不是`require()`调用 的脚本。

当然，每次向项目中添加一个 Lua 库时，您都不必手动修复 Lua 库中的内部路径`require()`d ......而且从单元测试的角度来看，我也不知道这是如何工作的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:31:36.923

我认为最干净的解决方案是让您的库保持原样，然后让使用您的库的任何人负责`package.path`正确配置。在您的设置中，这意味着应用程序应将 lib 文件夹添加到路径中：

```
package.path = './lib/?.lua;' .. package.path 
```

另请参阅相关问题，例如[Is there a better way to require file from relative path in lua](https://stackoverflow.com/questions/5761229/is-there-a-better-way-to-require-file-from-relative-path-in-lua?lq=1)以及有关该路径的更多信息[的手册](http://www.lua.org/manual/5.2/manual.html#pdf-package.path)。

# php - ZF2 分页器不显示最后一页

> ID：15989170
> 
> 赞同：7
> 
> 时间：2013-04-13T15:02:18.683
> 
> 标签：php, zend-framework2, zend-paginator

我有 6 条查询记录，此代码在 3 页上正确显示：

```
(action)
    public function listAction()
        {
            $page  = (int) $this->params()->fromRoute('id', 0);
            $posts = $this->getPagesTable()->selectPages();
            $paginator = new Paginator(new PaginatorIterator($posts));
            $paginator->setCurrentPageNumber($page)
                      ->setItemCountPerPage(2)
                      ->setPageRange(7);
            return new ViewModel(array(
                    'paginator' => $paginator,
                    ));
        }
(view)
    <?php foreach ($paginator as $post) : ?>
         <h2><?php echo $this->escapeHtml($post->id); ?></h2>
         <div><?php echo $this->escapeHtml($post->name);?>
     <?php endforeach; ?> 
```

但是当我在操作中添加 foreach 循环时：

```
public function listAction()
{
    $page  = (int) $this->params()->fromRoute('id', 0);
    $posts = $this->getPagesTable()->selectPages();
    $paginator = new Paginator(new PaginatorIterator($posts));
    $paginator->setCurrentPageNumber($page)
              ->setItemCountPerPage(2)
              ->setPageRange(7);
    foreach ($paginator as $post) {
        // some code or  empty foreach
    };
    return new ViewModel(array(
            'paginator' => $paginator,
            ));
} 
```

分页器不显示最后 (3) 页（1 和 2 页正确显示）。 **为什么？** 谢谢！

* * *

如果在 foreach {} 之后添加 $paginator->getIterator()->rewind()，分页器只显示第一页，不显示第二页和第三页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:12:28.583

迭代器模式就像一个指针，在你迭代之后你必须重置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-17T15:06:07.503

我也面临同样的问题

但现在我解决了

```
i am using iterator_to_array($userList); 
```

删除此行后在视图页面中它工作正常可能对您有帮助

# playframework - 使用 h2-browser 访问 play 项目数据库

> ID：15989171
> 
> 赞同：26
> 
> 时间：2013-04-13T15:02:41.660
> 
> 标签：playframework, playframework-2.0, h2

我在通过`h2-browser`on a `Play`framework 项目访问 mem 数据库时遇到了一些问题。

使用下面的配置，我认为是正确的配置（显然不是！）我得到了一个 h2 浏览器，但没有表（除了模式之外），即使我已经应用了一些迁移。

我在这里想念什么？提前致谢。

conf/application.conf：

```
db.default.driver=org.h2.Driver
db.default.url="jdbc:h2:mem:play"
db.default.user=sa
db.default.password="" 
```

![会议](https://i.stack.imgur.com/trDyn.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-13T20:35:57.437

当您使用内存数据库时，实际上您正在访问两个不同的数据库（尽管使用相同的路径）。你有两个解决方案：

1.  首先从您的控制台开始裸“播放”控制台，运行 h2-browser，最后运行您的应用程序（在同一个`play`控制台内）
2.  [在服务器模式下](http://www.h2database.com/html/tutorial.html#using_server)运行 H2，这种方法的额外好处是，您不会在每次应用程序重新启动时丢失数据，因为 DB 存储在文件中。然后，您可以从多个点（也从“独立”H@ 浏览器或其他 GUI）访问此数据库，路径类似于：

Unix（`~`表示您的主目录）

`db.default.url="jdbc:h2:tcp://localhost/~/some/path/to/MyPlayDB"`

或窗户

`db.default.url="jdbc:h2:tcp://localhost/c:/some/path/to/MyPlayDB"`

请注意，为了在生产模式下获得最佳性能，值得切换回嵌入式模式，但是对于开发阶段，该解决方案应该足够好（仍然比示例 MySQL 更快）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-08-24T09:20:48.130

[要通过H2 Web 控制台](http://www.h2database.com/html/tutorial.html#tutorial_starting_h2_console)浏览数据库的内容，请通过*同一个*Play 控制台同时启动 Web 控制台和 Play 应用程序：

1.  首先，通过运行 Typesafe Activator 进入 Play 控制台：
    `~/Projects/play-app $ activator`
2.  启动 Web 控制台：
    `[play-app] $ h2-browser`
    这应该会在您的浏览器中打开 H2 控制台界面。
3.  运行 Play 应用程序：
    `[play-app] $ run`
4.  在浏览器中访问 Play 应用程序。这将导致 Play 应用程序连接到内存中的 H2 数据库并使用一些默认数据（如果有）对其进行初始化。
5.  在浏览器中登录 H2 Web 控制台以检查数据库内容。使用您可以保存的以下设置（例如， as `Play-App In-Memory Database`）以便以后轻松访问它们：
    *   司机等级：`org.h2.Driver`
    *   JDBC 网址：`jdbc:h2:mem:play`
    *   用户名：`sa`
    *   密码：`<blank>`

请注意，上述设置必须与您的实际配置相匹配（`db.default.url`等等）。

# php - PHP 语法是如何工作的？

> ID：15989172
> 
> 赞同：0
> 
> 时间：2013-04-13T15:02:46.367
> 
> 标签：php, syntax

我最近发现了一些在 php 中输出变量的代码，如下所示：

```
<?=$var;?> 
```

我以前从未见过这种情况。是不是一样

```
<?php echo $var;?> 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:05:55.267

```
<?=$var;?> 
```

是相同的

```
<?php echo $var;?> 
```

但它只有在你有以下情况下才会起作用：

```
short_open_tag=On 
```

在你的 php.ini

从 php 5.4 开始，不需要 short_open_tag。速记版本始终可用。[http://php.net/manual/en/ini.core.php#ini.short-open-tag](http://php.net/manual/en/ini.core.php#ini.short-open-tag)

@jszobody：感谢您的评论！

# c# - 无法在 XAML 中定义对象

> ID：15989173
> 
> 赞同：0
> 
> 时间：2013-04-13T15:03:06.103
> 
> 标签：c#, wpf, xaml

所有，我有一个用户控件。在此控件的 XAML 标记中，我想定义一个资源（实例化一个对象`cellColorConverter`，该对象`CellColorConverter`被定义在与控件相同的命名空间中。我有

```
<UserControl x:Class="ResourceStudio.Resource.Resource"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" Height="331.2" Width="340">
<UserControl.Resources>
    <ResourceStudio.Resource:CellColorConverter x:Key ="cellColorConverter"/> // <- Error.
</UserControl.Resources> 
```

这给出了一个编译时错误说

> 名称空间前缀`ResourceStudio.Res`未定义。

**我在这里做错了什么？**

谢谢你的时间。

* * *

*更新：我现在有*

```
xmlns:local="clr-namespace:ResourceStudio.Resource;assembly=ResourceStudio"
             mc:Ignorable="d" Height="331.2" Width="340">
   <UserControl.Resources>
      <local:CellColorConverter x:Key ="cellColorConverter"/>
   </UserControl.Resources> 
```

*该类`CellColorConverter`位于名称空间`ResourceStudio.Resource`中，定义为*

```
namespace ResourceStudio.Resource
{
   public class CellColorConverter : IMultiValueConverter
   {
       // ...     
   }
} 
```

*我仍然收到以下错误*

> 命名空间“clr-namespace:ResourceStudio.Resource;assembly=ResourceStudio”中不存在名称“CellColorConverter”。F:\Camus\ResourceStudio\ResourceStudio\ResourceStudio\Resource\Resource.xaml

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:05:58.193

在 XAML 中：

```
<ResourceStudio.Resource:CellColorConverter /> 
```

`ResourceStudio.Resource`是`CellColorConverter`. _

您需要将此 XML 命名空间映射到 .NET 命名空间：

```
<UserControl xmlns:ResourceStudio.Resource="clr-namespace:ResourceStudio.Resource;assembly=ResourceStudio" ... /> 
```

实际的命名空间和程序集名称取决于您在代码中调用它们的名称。

[本文](http://msdn.microsoft.com/en-gb/library/ms747086.aspx)提供了更多信息。

此外，您可以使命名空间更短：

```
xmlns:local="clr-namespace:..."

<local:CellColorConverter ... > 
```

# html - 我的导航菜单在 IE < 9 上不起作用

> ID：15989174
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:03:08.083
> 
> 标签：html, css, internet-explorer-8, internet-explorer-7, internet-explorer-6

我的导航菜单在 IE 6、7 或 8 中不起作用。我很好，它在 IE 6 中不起作用，但不幸的是它需要在 IE 7 和 8 中工作。我使用的是 Ubuntu，所以我一直在测试使用[http://netrenderer.com](http://netrenderer.com)。nav div 没有向右浮动，并且 li 元素没有内联显示。为什么是这样？[这是网站](http://www.noisyleaf.co.uk)。

```
nav ul {
    margin: 0;
    padding: 0;
}

nav a {
    height: 20px;
    width: 27%;
    margin: 0 1.7%;
    margin-bottom: 0;
    padding: 25px 2%;

    text-align: center;
    text-decoration: none;
    font-weight: thin;

    color: #555;

    float: left;
    display: inline-block;
}

nav li:first-child a {
    margin-left: 0;
}

nav li:last-child a {
    margin-right: 0;
}

/* ========================
    INTERMEDIATE: IE Fixes
   ======================== */
nav ul li {
    display: inline;
}

nav {
    display: block;
    float: right;
    width: 38%;
    clear: both;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:56:25.287

IE 8 及更低版本不支持该`nav`标签，为了规避这一点，只需包含一个 HTML5 shim，它将添加对那些正在破坏的标签的支持。`<head>`尝试在您的页面部分添加此内容：

```
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:27:05.330

**nav**标记是 IE7/IE8 中不支持的 html5 标记 在 head 部分之前添加此标记：标记：

```
<!--[if lt IE 9]>
<script src="https://raw.github.com/h5bp/html5-boilerplate/master/js/vendor/modernizr-2.6.2.min.js"></script>
<![endif]--> 
```

或者

```
<!--[if lt IE 9]>
  <script src="https://raw.github.com/aFarkas/html5shiv/master/src/html5shiv.js"></script>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T16:35:10.340

1.  `<nav>`IE8 或更早版本不支持标签。
2.  `:first-child`IE7 或更早版本不支持。
3.  `:last-child`IE8 或更早版本不支持。
4.  `display: inline-block`在 IE6/7 中受支持，但存在一些重大错误。

所有这些问题都会破坏你的菜单。

要修复 (1) 使用[html5shiv](https://code.google.com/p/html5shiv/)或[Modernizr](http://modernizr.com)，或者只是不要在旧版 IE 中使用 HTML5 标签。

要修复 (2) 和 (3)，请使用[Selectivizr](http://selectivizr.com)或[ie9.js](https://code.google.com/p/ie7-js/)。

修复 (4) 使用特定于 IE 的 CSS hack 来强制使用 IE6/7 `display:inline`。

# cuda - CUDA Thrust：reduce_by_key 仅基于数组中的某些值，基于“键”数组中的值

> ID：15989178
> 
> 赞同：3
> 
> 时间：2013-04-13T15:03:57.827
> 
> 标签：cuda, gpu, thrust, reduction

假设我有两个 device_vector<byte> 数组，`d_keys`并且`d_data`.

例如，如果`d_data`是扁平的 2D 3x5 数组（例如 { 1, 2, 3, 4, 5, 6, 7, 8, 9, 8, 7, 6, 5, 4, 3 } ）并且`d_keys`是一维数组大小为 5 （例如 { 1, 0, 0, 1, 1 } ），我怎么能做一个减少，如果相应的值是一个，我最终只会在每行基础上添加值`d_keys`（例如结束结果为 { 10, 23, 14 } )？

sum_rows.cu[示例](https://code.google.com/p/thrust/source/browse/examples/sum_rows.cu)允许我在 中添加每个值`d_data`，但这并不完全正确。

或者，我可以在每行的基础上，使用 a并一次与一行`zip_iterator`组合，然后执行 a ，仅当键值为 1 时才添加，但随后我必须遍历数组。`d_keys``d_data``transform_reduce``d_data`

我真正需要的是某种`transform_reduce_by_key`不是内置的功能，但肯定有办法实现它！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T02:42:01.280

基于额外的注释，而不是 3 行，有数千行，我们可以编写一个转换函子，对整行求和。基于有数千行的事实，这应该让机器非常忙碌：

```
#include <iostream>
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>
#include <thrust/transform.h>
#include <thrust/sequence.h>
#include <thrust/fill.h>

#define ROW   20
#define COL   10

__device__ int *vals;
__device__ int *keys;

struct test_functor
{
  const int a;

  test_functor(int _a) : a(_a) {}

  __device__
  int operator()(int& x, int& y ) {
    int temp = 0;
    for (int i = 0; i<a; i++)
      temp += vals[i + (y*a)] * keys[i];
    return temp;
    }
};

int main(){
  int *s_vals, *s_keys;
  thrust::host_vector<int> h_vals(ROW*COL);
  thrust::host_vector<int> h_keys(COL);
  thrust::sequence(h_vals.begin(), h_vals.end());
  thrust::fill(h_keys.begin(), h_keys.end(), 1);
  h_keys[0] = 0;
  thrust::device_vector<int> d_vals = h_vals;
  thrust::device_vector<int> d_keys = h_keys;
  thrust::device_vector<int> d_sums(ROW);
  thrust::fill(d_sums.begin(), d_sums.end(), 0);
  s_vals = thrust::raw_pointer_cast(&d_vals[0]);
  s_keys = thrust::raw_pointer_cast(&d_keys[0]);
  cudaMemcpyToSymbol(vals, &s_vals, sizeof(int *));
  cudaMemcpyToSymbol(keys, &s_keys, sizeof(int *));
  thrust::device_vector<int> d_idx(ROW);
  thrust::sequence(d_idx.begin(), d_idx.end());
  thrust::transform(d_sums.begin(), d_sums.end(), d_idx.begin(),  d_sums.begin(), test_functor(COL));
  thrust::host_vector<int> h_sums = d_sums;
  std::cout << "Results :" << std::endl;
  for (unsigned i = 0; i<ROW; i++)
    std::cout<<"h_sums["<<i<<"] = " << h_sums[i] << std::endl;
  return 0;
} 
```

这种方法的缺点是通常`vals`不会合并对数组的访问。然而，对于几千行，缓存可能会提供显着的缓解。我们可以通过重新排序以列优先格式存储在展平数组中的数据来解决这个问题，并将函子中循环中的索引方法更改为如下所示：

```
for (int i=0; i<a; i++)
  temp += vals[(i*ROW)+y]*keys[i]; 
```

如果愿意，您可以将 ROW 作为附加参数传递给函子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T21:57:13.580

这是一些示例代码，使用我在您的问题下方的评论中概述的方法来完成您所追求的事情。事实上，我们想使用 4 元组来获取您的键值。在此处复制经过适当修改的评论：

您可以制作一个 zip 迭代器，将您的 3 行压缩在一起加上键“行”并将 4 元组传递给一个特殊的函子。然后，您的特殊仿函数将对 3 元组数组进行归约（也使用键）并返回一个 4 元组的结果。推力[点积示例](http://code.google.com/p/thrust/source/browse/examples/dot_products_with_zip.cu)可能会给您一些想法。

这是一种可能的方法：

```
#include <thrust/host_vector.h>
#include <thrust/iterator/zip_iterator.h>
#include <thrust/sequence.h>
#include <thrust/fill.h>
#include <thrust/tuple.h>

#define N 30  // make this evenly divisible by 3 for this example

typedef thrust::tuple<int, int, int, int>  tpl4int;
typedef thrust::host_vector<int>::iterator intiter;
typedef thrust::tuple<intiter, intiter, intiter, intiter>  tpl4intiter;
typedef thrust::zip_iterator<tpl4intiter>  int4zip;

struct r3key_unary_op : public thrust::unary_function<tpl4int, tpl4int>
{
  __host__ __device__
  tpl4int operator()(const tpl4int& x) const
  {
    tpl4int result;
    thrust::get<0>(result) = x.get<0>()*x.get<3>();
    thrust::get<1>(result) = x.get<1>()*x.get<3>();
    thrust::get<2>(result) = x.get<2>()*x.get<3>();
    thrust::get<3>(result) = 1;
    return result;
   }
};

struct r3key_binary_op : public thrust::binary_function<tpl4int, tpl4int, tpl4int>
{
  __host__ __device__
  tpl4int operator()(const tpl4int& x, const tpl4int& y) const
  {
    tpl4int result;
    thrust::get<0>(result) = x.get<0>()*x.get<3>() + y.get<0>()*y.get<3>();
    thrust::get<1>(result) = x.get<1>()*x.get<3>() + y.get<1>()*y.get<3>();
    thrust::get<2>(result) = x.get<2>()*x.get<3>() + y.get<2>()*y.get<3>();
    thrust::get<3>(result) = 1;
    return result;
  }
};

int main() {

  thrust::host_vector<int> A(N);  // values, in 3 "rows" flattened
  thrust::sequence(A.begin(), A.end());
  thrust::host_vector<int> K(N/3);   // keys in one row
  thrust::fill(K.begin(), K.end(), 1);  // set some keys to 1
  K[9] = 0;  // set some keys to zero

  int4zip first = thrust::make_zip_iterator(thrust::make_tuple(A.begin(), A.begin() + N/3, A.begin() + 2*N/3, K.begin()));
  int4zip  last = thrust::make_zip_iterator(thrust::make_tuple(A.begin() + N/3, A.begin() + 2*N/3, A.end(), K.end()));
  r3key_unary_op my_unary_op;
  r3key_binary_op my_binary_op;
  tpl4int init = my_unary_op(*first);
  // init = thrust::make_tuple((int) 0, (int) 0, (int) 0, (int) 0);
  tpl4int result = thrust::transform_reduce(first, last, my_unary_op, init, my_binary_op);
  std::cout << "row 0 = " << result.get<0>() << std::endl;
  std::cout << "row 1 = " << result.get<1>() << std::endl;
  std::cout << "row 2 = " << result.get<2>() << std::endl;
  return 0;

} 
```

笔记：

1.  这只是使用`host_vector`. 将其扩展为与 . 一起使用`device_vector`，或将其模板化以与其他东西一起使用`int`应该很简单。
2.  为了完整起见，我使用一元仿函数为每一行的总和减少提供一个非零的初始值。您可能希望将初始值更改为零（零的 4 元组）。

# android - 在 Webview.. 是否有可能当您没有 Internet 连接时它会重定向到另一个布局？

> ID：15989180
> 
> 赞同：0
> 
> 时间：2013-04-13T15:03:58.607
> 
> 标签：android, android-intent, android-webview

美好的一天，我在这里过得很艰难。任何帮助都可以。我有一个布局调用具有 WebView 的 xml。可能吗？如果我没有互联网连接。它会重定向到其他布局*Sorry.java*有文字说。“对不起，你这次没有网络连接”..

这是我的代码

```
@SuppressLint("SetJavaScriptEnabled")
public class Translate extends Activity {

private WebView mWebView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.translate);

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("http://www.google.com");
    mWebView.setWebViewClient(new HelloWebViewClient());

}

private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView webview, String url)
    {
        webview.loadUrl(url);
        return true;
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack())
    {
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/webview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
/> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:07:52.840

添加另一个`TextView`带有错误消息和`GONE`可见性的内容。然后，您可以（在 onCreate 中）检查互联网是否在线，如果没有将`WebView`' 的可见性`GONE`设置为并将 textview 的可见性设置为`VISIBLE`，当然，不要尝试在 webview 中加载 URL。

**编辑** 要检查互联网是否已连接，您将需要 ACCESS_NETWORK_STATE 权限并使用此方法：

```
public static boolean isConnected(Context context) {
    ConnectivityManager cm = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
    if (cm.getActiveNetworkInfo() != null
            && cm.getActiveNetworkInfo().isAvailable()
            && cm.getActiveNetworkInfo().isConnected()) {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:18:43.553

此方法将检查您的连接性：

```
public boolean isDeviceConnectedToInternet() {
    NetworkInfo networkInfo = (NetworkInfo) ((ConnectivityManager).getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();
    if (networkInfo != null && networkInfo.isConnected()) {
        return true;
    }
    return false;
} 
```

因此，在您的活动中检查连接，如果没有可用连接，则转到另一个活动：

```
if(!isDeviceConnectedToInternet()) {
    startActivity(new Intent(this, OfflineActivity.class));
} else {
    // Show webView
} 
```

希望这有帮助。

# c# - Ghosty HtmlAgilityPack

> ID：15989191
> 
> 赞同：1
> 
> 时间：2013-04-13T15:04:56.717
> 
> 标签：c#, html-agility-pack

我在这里得到了非常幽灵般的效果。我尝试替换一个 img 节点。如果我打印出文档 html 一次，什么都不会发生。如果我不打印出文档html，就可以成功替换img标签。真的很奇怪，谁能解释一下？![在此处输入图像描述](https://i.stack.imgur.com/efK5V.jpg)

我的html代码

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <div id="swap"></div>
</body>
</html> 
```

和我的 C# 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using HtmlAgilityPack;
using System.IO;
namespace htmlagile
{
    class Program
    {
        static void Main(string[] args)
        {
            HtmlDocument htmldoc = new HtmlDocument();
            string htmlstring;
            using (StreamReader sr = new StreamReader("HTMLPage1.html"))
            {
                htmlstring = sr.ReadToEnd();
            }
            htmldoc.LoadHtml(htmlstring);
            var div = htmldoc.DocumentNode.SelectNodes("//div");

            Console.WriteLine(htmldoc.DocumentNode.OuterHtml);

            foreach (var item in div)
            {
                HtmlNode newTag = htmldoc.CreateElement("p");
                newTag.SetAttributeValue("id", "change");
                item.ParentNode.ReplaceChild(newTag, item);
            }
            Console.WriteLine(htmldoc.DocumentNode.OuterHtml);
        }
    }
} 
```

如果我注释掉我的第一个console.WriteLine，则可以成功更改元素。

![在此处输入图像描述](https://i.stack.imgur.com/QUc0d.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:44:08.370

这是敏捷包中的一个错误。它们缓存 OuterHtml 和 InnerHtml 值。当发生更改时，它们只会使直接父级无效。因为您正在打印根目录，所以它仍然具有旧的缓存值。

[http://htmlagilitypack.codeplex.com/workitem/30053](http://htmlagilitypack.codeplex.com/workitem/30053)

如果您更改为打印出父 div，您应该会看到实际执行了更改：

```
Console.WriteLine(div.OuterHtml); 
```

# corba - 从 corba 转换为 slice

> ID：15989192
> 
> 赞同：1
> 
> 时间：2013-04-13T15:04:57.913
> 
> 标签：corba, ice

我正在尝试将 corba`.idl`文件翻译成 ZeroC ICE`.ice`文件。它们非常相似，尽管我对线条有疑问：

```
interface Item {
      readonly attribute string name;
      void action(inout long a);
      ...
} 
```

可以`attibute`在切片中定义吗？可以做些什么来翻译`inout`参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T19:07:08.010

来自：[http](http://www.zeroc.com/iceVsCorba.html) ://www.zeroc.com/iceVsCorba.html ：

> Slice 消除了 CORBA IDL 的许多不必要的复杂性，例如属性、inout 参数、上下文以及 Objects-by-Value (OBV) 的复杂性。

您必须直接定义访问器函数并将 inout 参数拆分为两个。

# grammar - 为什么需要终端？我的解决方案是否足够？

> ID：15989197
> 
> 赞同：2
> 
> 时间：2013-04-13T15:05:24.603
> 
> 标签：grammar, context-free-grammar

我正试图了解上下文无关语法，我想我已经接近了。令我困惑的是这个问题（我正在做练习题，因为我有一个月的考试时间）：

![在此处输入图像描述](https://i.stack.imgur.com/sIl7A.png)

我想出了这种语言，但我认为它是错误的。

```
S --> aSb | A | B
A --> aA | Σ
B --> bB | Σ 
```

显然这是正确的解决方案：

```
S --> aSb | aA | bB
A --> aA | Σ
B --> bB | Σ 
```

我不太明白的是为什么我们有`S --> aSb | aA | bB`而不只是`S --> aSb | A | B`. 终端需要什么？我不能只打电话给 A 并以这种方式抓住我的终端吗？

**测试是否可以生成字符串：aaabbbb**

```
S --> aSb --> aaSbb --> aaaSbbb --> aaaBbbb --> aaabbbb 
```

我相信我正确地生成了字符串，但我不太确定。我告诉自己，原因`S --> aSb | aA | bB`是如果我们从 开始`aA`然后替换`A`为`a`，我们有两个`a`' ，因为它们不相等，所以我们得到了正确的字符串，这也可以用 b 来完成。任何意见是极大的赞赏。

**进入元组（G-4-tuple）**

**V** (None terminal) = {A, B}
**Σ** (Terminals) = {a, b}
**P** = { } // 不太清楚如何用 R 表达我的解决方案？我必须使用测试字符串吗？
**S** = A

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:21:29.943

# javascript - document.write js issue

> ID：15989210
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:06:49.947
> 
> 标签：javascript, jquery, html

i am trying to open a feedback window and put some js code inside. this is what i did:

```
$('#feedback').click(function(){
 mw = window.open('','','width=560,height=460');
 mw.document.write('<html><head>');
 mw.document.write('<sc'+'ript type="text/javascript" src="{{STATIC_URL}}js/jquery-1.9.0.js"></scri'+'pt>');
 mw.document.write('<sc'+'ript type="text/javascript"> function feedbacken(){'+
             'var catg = $("#catg").text(); var feedback = $("#feedback").text(); alert(catg feedback);'
              +'}</scri'+'pt>');
 mw.document.write('</head><body>');
 mw.document.write('<div style="padding-left: 30px;">');
 mw.document.write('<br/> Bitte wählen Sie die Kategorie aus: <br/> ');
 mw.document.write('<select id="catg"><option>--</option><option>Technisch</option>   <option>Inhalt</option><option>Design</option></select>');
 mw.document.write('<br/><br/>Hier bitte Ihr Feedback:');
 mw.document.write('<p><textarea id="feedback" style="width:400px;height:100px"> </textarea></p>');
 mw.document.write('<button onclick="feedbacken()"> Jetzt absenden </button>');             
 mw.document.write('</div>');
 mw.document.write('</body></html>');
}); 
```

now, window is opening fine, but once i click the button, it is saying. `feedbacken()` function isnot defined.

can someone please hack this for me :)

this my feedback element:

```
<a id="feedback">Feedback</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:21:55.453

```
alert(catg feedback); 
```

That's not valid. Try something like:

```
alert(catg);
alert(feedback); 
```

or:

```
alert('catg: ' + catg + ', feedback: ' + feedback); 
```

instead.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:25:05.753

I don't know if this is the main error, but this would cause an error:

```
alert(catg feedback); 
```

You could change it to:

```
alert(catg + feedback); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T15:26:55.487

There are several problems.

```
alert(catg feedback) 
```

should read...

```
 alert(catg, feedback) 
```

Also, jQuery is not initialised in the new window.

# json - 如何通过 erlang 读取节俭的 json 结构？

> ID：15989211
> 
> 赞同：1
> 
> 时间：2013-04-13T15:06:56.113
> 
> 标签：json, erlang, thrift

我必须在 Thrift 中使用客户端/服务器框架吗？这是我的代码。

```
handle(Req, State) ->
    {Method, Req2} = cowboy_req:method(Req),
    {ok, Echo, Req3} = cowboy_req:body (Req2), %% Echo is a serialized 'hello' in smallTest by json format.
    {ok, Trans} = thrift_memory_buffer:new(Echo),
    {ok, Protocol} = thrift_json_protocol:new(Trans),
    {_Protocol1, {ok, Struct}} = thrift_protocol:read(Protocol,   smallTest_types:struct_info('hello')), %% Error here
    {ok, Req4} = echo(Method, Echo, Req3),
    {ok, Req4, State}. 
```

堆栈跟踪：

```
** Stacktrace: [{thrift_json_protocol,expect,
                [{json_protocol,
                     {transport,thrift_memory_buffer,
                         {memory_buffer,
                             [<<"{\"4\":{\"str\":\"Hello World!\"}}">>]}},
                     [],undefined},
                 start_object],
                [{file,
                     "c:/Dev/server/thrift/src/thrift_json_protocol.erl"},
                 {line,349}]},
            {thrift_json_protocol,expect_many_1,4,
                [{file,
                     "c:/Dev/server/thrift/src/thrift_json_protocol.erl"},
                 {line,371}]},
            {thrift_json_protocol,expect_nodata,2,
                [{file,
                     "c:/Dev/server/thrift/src/thrift_json_protocol.erl"},
                 {line,381}]},
            {thrift_protocol,read_specific,2,
                [{file,"c:/Dev/server/thrift/src/thrift_protocol.erl"},
                 {line,186}]},
            {thrift_protocol,read,3,
                [{file,"c:/Dev/server/thrift/src/thrift_protocol.erl"},
                 {line,110}]},
            {toppage_handler,handle,2,
                [{file,"c:/Dev/server/src/toppage_handler.erl"},
                 {line,19}]},
            {cowboy_handler,handler_handle,4,
                [{file,"c:/Dev/server/cowboy/src/cowboy_handler.erl"},
                 {line,119}]},
            {cowboy_protocol,execute,4,
                [{file,"c:/Dev/server/cowboy/src/cowboy_protocol.erl"},
                 {line,514}]}] 
```

看了thrift_json_protocol.erl，发现thrift_protocol:read是通过thrift_json_protocol:expect_nodata调用的，传入了undefined tag，应该是jsx={event, ...}。看来只有thrift_json_protocol:read(This0, message_begin)才是真正读取数据.

# java - 覆盖泽西岛中包含的提供程序

> ID：15989212
> 
> 赞同：6
> 
> 时间：2013-04-13T15:06:57.307
> 
> 标签：java, jersey, jackson

我需要在 Jersey 中制作一个自定义的 ExceptionMapper 来处理 Jackson 返回的 JsonProcessingException。

Jackson 库已经以 JsonMappingExceptionMapper.java 和 JsonParseExceptionMapper.java ([链接](https://github.com/FasterXML/jackson-jaxrs-json-provider/tree/master/src/main/java/com/fasterxml/jackson/jaxrs/json)) 的形式包含了此异常的 ExceptionMapper 提供程序。

如果我在“my.package”中为这个异常映射器添加一个新的提供者，我会得到关于所选提供者的不可预测的结果。有时它会选择“my.package”中的提供者，有时它会选择杰克逊库中的提供者。我用来扫描包的代码如下。

```
PackgesResourceConfig packagesResourceConfig = new PackgesResourceConfig("com.fasterxml.jackson.jaxrs", "my.package"); 
```

**建议的解决方案**

目前我正在通过手动过滤掉杰克逊库中的提供者来解决这个问题。但我真正想知道的是是否有更可接受和支持的方式来做到这一点。

首先我扩展 PackagesResourceConfig。

```
public class FilteredPackgesResourceConfig extends PackagesResourceConfig {

    private Set<Class<?>> classesToFilter = new HashSet<Class<?>>();

    public FilteredPackgesResourceConfig(String... packages) {
        super(packages);
    }

    public FilteredPackgesResourceConfig(Map<String, Object> props) {
        super(props);
    }

    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> classes = super.getClasses();

        if (classes != null && classesToFilter != null) {
            classes.removeAll(classesToFilter);
        }

        return classes;
    }

    public Set<Class<?>> getClassesToFilter() {
        return classesToFilter;
    }

    public void setClassesToFilter(Set<Class<?>> classesToFilter) {
        this.classesToFilter = classesToFilter;
    }
} 
```

我使用这个类来过滤掉我不想要的特定提供者。

```
FilteredPackgesResourceConfig packagesResourceConfig = new FilteredPackgesResourceConfig("com.fasterxml.jackson.jaxrs", "my.package");
classesToFilter.add(com.fasterxml.jackson.jaxrs.json.JsonMappingExceptionMapper.class);       
classesToFilter.add(com.fasterxml.jackson.jaxrs.json.JsonParseExceptionMapper.class);
packagesResourceConfig.setClassesToFilter(classesToFilter); 
```

该解决方案为我提供了仅使用我指定的提供程序的预期结果。有没有更正确的方法可以达到相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T17:12:00.510

我也遇到了这个问题，在我的情况下，我解决了这个问题，而不是注册`com.fasterxml.jackson.jaxrs.json`包，我只注册了我想要的类，在我的情况下是`com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider`.

有几种方法可以做到这一点，我使用 web.xml 这样做：

```
<servlet>
  <servlet-name>jersey-serlvet</servlet-name>
  <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
  <init-param>
    <param-name>jersey.config.server.provider.packages</param-name>
      <param-value>
         my.own.package
         my.other.package
      </param-value>
  </init-param>
  <init-param>
    <param-name>jersey.config.server.provider.classnames</param-name>
    <param-value>
      com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider
    </param-value>
  </init-param>
    <init-param>
      <param-name>jersey.config.disableMoxyJson</param-name>
      <param-value>true</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet> 
```

注意：我使用的是 Jersey 2.0，在 1.x 中，属性名称和 servlet 类是不同的，但可以使用相同的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-20T11:43:54.897

我有同样的要求，我必须使用`ExceptionMapper<Exception>`为所有`Exception`类型实现的自定义 ExceptionMapper。不幸的是，`org.glassfish.jersey.jackson.JacksonFeature`如果依赖`jersey-media-json-jackson`项存在于类路径中，Jersey 默认注册，该依赖项会自动注册`JsonParseExceptionMapper`，`JsonMappingExceptionMapper`并且由于这种默认机制，这些默认 JSON 异常映射器接收所有与 JSON 相关的异常，这`custom exception mapper`就是没有特别针对 JSON 异常调用的原因。

幸运的是，Jersey 2.29.1 添加了对在没有异常处理程序的情况下注册 JacksonFeature 的支持。链接[功能请求链接](https://github.com/eclipse-ee4j/jersey/pull/4225)，[代码更改](https://github.com/eclipse-ee4j/jersey/pull/4225/files#diff-e11cfd0d666b1a907fed13491e3af4a4cce03f75eb2bc71db5f7d6163e9877dcR72)。

因此，我们必须`JacksonFeature`通过排除异常映射器来覆盖默认值，如下所示

```
@Provider
public class ApplicationInitializer extends ResourceConfig {
    public ApplicationInitializer() {
        register(JacksonFeature.withoutExceptionMappers());
    }
} 
```

# java - 使用 jdbc 显示空值的数据库中的值

> ID：15989215
> 
> 赞同：0
> 
> 时间：2013-04-13T15:07:15.340
> 
> 标签：java, mysql, jdbc

我是 JDBC 的初学者。我已经编写了以下代码我已经检查了表格中的值没有正确插入？我不知道我错在哪里？

```
import java.io.*;
import java.sql.*;

class Emp
{
    int eno,sal;
    String name,dept;
    Connection cn=null;
    Statement st=null;
    ResultSet rs=null;

    Emp()
    {
        try
        {
            BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
            System.out.println("Enter Employee number:");
            eno=Integer.parseInt(br.readLine());
                    System.out.println("Enter salary:");
            sal=Integer.parseInt(br.readLine());

            System.out.println("Enter name:");
            name=(br.readLine());

            System.out.println("Enter Department:");
            dept=(br.readLine());

            Class.forName("com.mysql.jdbc.Driver");
            cn=DriverManager.getConnection("jdbc:mysql://localhost:3306/employee","root","");
            if(cn==null)
                System.out.println(" error in connection");
            st=cn.createStatement();
            st.executeUpdate("insert into emp values(eno,sal,name,dept);");
            System.out.println("Record Inserted");

            rs=st.executeQuery("select * from emp");
            rs.first();

            System.out.println("Employee table");

            while(!rs.isLast())
            {
            System.out.println("Eno:"+rs.getInt(1)+"sal:"+rs.getInt(2)+"name:"+rs.getString(3)+"dept:"+rs.getString(4));
            rs.next();
            }   
        }
        catch(Exception e){}
    }

    public static void main(String args[]) throws Exception
    {
        Emp e=new Emp();
    }
} 
```

问题是输出显示如下

```
Eno:0sal:0name:dept:
Eno:0sal:0name:dept:
Eno:0sal:0name:dept:
Eno:0sal:0name:dept:
Eno:0sal:0name:dept: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:10:56.787

您实际上并没有将变量传递到您的 SQL INSERT 中`String`，因此很有可能抛出异常但未在空异常块中报告。在这种情况下，表将是空的，产生任何空值`executeQuery`

```
st.executeUpdate("insert into emp values(" + eno "," + sal + ",'" + name + "','" + dept + "');"); 
```

也不要让可能的`SQLException`事情默默发生，添加

```
catch (SQLException sqle) {
   sqle.printStackTrace();
} 
```

最好使用 a`PreparedStatement`来防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

# ios - 多设备支持非续订订阅

> ID：15989216
> 
> 赞同：1
> 
> 时间：2013-04-13T15:07:16.660
> 
> 标签：ios, in-app-purchase, subscription, itunes-store

我正在开发一个新闻应用程序。所有新闻项目均来自我的网站。为了从中赚取一点利润并保持网站运行，我实施了一些广告。现在，我希望用户能够以几美元的价格关闭应用程序中的所有广告。我想每年提供此选项。所以，今年我的应用程序中会有一个按钮，上面写着“2013 年没有广告”之类的内容。付款后，该应用程序将在今年剩余时间内无广告。2014 年，广告再次出现，用户可以以相同的价格购买“2014 年无广告”产品。

我认为非续订订阅将是这里的方式。一些我还没有弄清楚的事情：

1.  是否可以随着时间的推移自动更改应用内购买的名称，使其在今年显示“2013 年无广告”，明年显示“2014 年无广告”，之后显示“2015 年无广告”，等等?

2.  Apple 表示开发者有责任实现多设备支持。好的，很公平，但我还没有找到识别用户的方法。用户无需登录即可使用我的应用程序，据我所知，没有办法获取用户的 iTunes 登录名。例如，如何将产品转移到用户的新 iPhone？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:35:58.177

经过深思熟虑，我的结论是，如果不打扰用户以某种方式登录，就无法实现这一目标。

我想出的替代方案是：

我只是在应用程序购买中创建了一个常规的非消耗品，并在其标识符中嵌入了年份。这样，在代码中，我可以对照当前年份检查标识符，并确定用户是否应该购买标识符为“year + 1”的产品。

由于非消耗品购买与用户的 iTunes 帐户相关联，它们会自动转移到其他设备，例如新手机。

我不能忘记的唯一一件事就是为未来的每一年创造一个新产品。

# python - 如何在 Python 中从继承的类中设置和获取父类属性？

> ID：15989217
> 
> 赞同：27
> 
> 时间：2013-04-13T15:07:21.877
> 
> 标签：python, class, inheritance

我有`Family`及其继承的`Person`类。如何`familyName`从类中获取属性`Person`？

```
class Family(object):
    def __init__(self, familyName):
        self.familyName = familyName

class Person(Family):
    def __init__(self, personName):
        self.personName = personName 
```

例如，让这些`Family`和`Person`对象：

```
strauss = Family('Strauss')
johaness = Person('Johaness')
richard = Person('Richard') 
```

我想做一些事情，例如：

```
print richard.familyName 
```

并得到`'Strauss'`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-13T15:10:27.117

你不能。

实例只继承父类的方法和属性，不继承*实例*属性。你不应该混淆这两者。

`strauss.familyName`是实例的*实例*属性`Family`。`Person`实例将拥有自己*的*`familyName`属性副本。

您通常会将`Person`构造函数编码为采用两个参数：

```
class Person(Family):
    def __init__(self, personName, familyName):
        super(Person, self).__init__(familyName)
        self.personName = personName

johaness = Person('Johaness', 'Strauss')
richard = Person('Richard', 'Strauss') 
```

另一种方法是`Person`保存对`Family`实例的引用：

```
class Person(object):
    def __init__(self, personName, family):
        self.personName = personName
        self.family = family 
```

where`Person`不再继承自`Family`. 像这样使用它：

```
strauss = Family('Strauss')
johaness = Person('Johaness', strauss)
richard = Person('Richard', strauss)

print johaness.family.familyName 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T15:24:23.333

除了 Martijns 的建议之外，您还可以从 Family 实例创建 Person，这样可以让家人跟踪其成员：

```
class Person(object):
    def __init__(self, person_name, family):
        self.person_name = person_name
        self.family = family

    def __str__(self):
        return ' '.join((self.person_name, self.family.family_name))

class Family(object):
    def __init__(self, family_name):
        self.family_name = family_name
        self.members = []

    def add_person(self, person_name):
        person = Person(person_name, self)
        self.members.append(person)
        return person

    def __str__(self):
        return 'The %s family: ' % self.family_name + ', '.join(str(x) for x in self.members) 
```

像这样的用法：

```
>>> strauss = Family('Strauss')
>>> johannes = strauss.add_person('Johannes')
>>> richard = strauss.add_person('Richard')
>>> 
>>> print johannes
Johannes Strauss
>>> print richard
Richard Strauss
>>> print strauss
The Strauss family: Johannes Strauss, Richard Strauss 
```

# github - 如何在 GitHub 上托管的 reStructuredText 文件中添加删除线？

> ID：15989218
> 
> 赞同：17
> 
> 时间：2013-04-13T15:07:25.767
> 
> 标签：github, restructuredtext, strikethrough

我正在将*README.md*文件转换为*README.rst*。原因是，我要为 PyPi 提供一个包。我被迫使用**.rst**。

我的转换几乎完成了，但我的降价文件中有一条删除线，例如：

```
~~This text is crossed out~~ 
```

它在 GitHub 上呈现为划掉。但我无法在 reStructuredText 中做到这一点。StackOverflow 上的一篇[类似文章](https://stackoverflow.com/a/6652379/939986)建议定义这样的**罢工**：

```
.. role:: strike
    :class: strike 
```

并在 CSS 文件中使用类似的东西：

```
.strike {
  text-decoration: line-through;
} 
```

并像这样做删除线：

```
:strike:`This text is crossed out` 
```

但问题是我无法控制 GitHub 的 CSS 文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-08-30T23:17:20.433

您还可以使用替换来简化多次使用。将此标记放在文件中的某个位置：

```
.. |ss| raw:: html

   <strike>

.. |se| raw:: html

   </strike> 
```

然后只需将要删除的文本括起来`|ss|`& `|se|`：

```
One, |ss| two |se|, three |ss| strikes |se| you're out! 
```

将呈现为：

一，~~二~~，三~~击~~，你出局了！

只需确保在替换元素周围留有空间，以便正确解析它们。这里看起来有点尴尬，但这是一个人为的例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-15T19:50:24.970

不是那么干净的解决方案，但对我有用。

```
.. raw:: html

   <s>

This text is crossed out

.. raw:: html

   </s> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-25T22:46:36.303

现在这是不可能的，因为 Markdown 等价物是顶级[GitHub Flavored Markdown 语法](https://help.github.com/articles/github-flavored-markdown)，而 RST 是[文档特定的样式](https://stackoverflow.com/a/6629060/56039)。在 GitHub 的存储库渲染中，目前不允许添加 CSS。

# xml - XML 和“：”问题

> ID：15989220
> 
> 赞同：1
> 
> 时间：2013-04-13T15:07:31.847
> 
> 标签：xml, vb.net, linq-to-xml, windows-phone

今天第二个帖子在第一个被回答之后我遇到了另一个问题！

基本上我有下面的代码。我知道除了一件事之外它是正确的，“：”字符是不允许的并引发异常，有人知道解决这个问题的最佳方法吗？

```
 location = resultElements.Element("channel").Element("yweather:location").Attribute("city").Value 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:59:08.400

[我假设您的 XML 输入与上一个问题](https://stackoverflow.com/questions/15988649/windows-phone-8-reading-xml-from-web)中描述的完全相同。

在第一个元素中声明了两个命名空间：

```
<rss xmlns:yweather="http://xml.weather.yahoo.com/ns/rss/1.0" 
     xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
     version="2.0"> 
```

您必须先为它们声明`XNamespace`实例：

```
Dim yweather = XNamespace.Get("http://xml.weather.yahoo.com/ns/rss/1.0") 
```

当您查询以`<yweather:`or开头的元素时，您必须使用该命名空间`<geo:`。所以使用`yweather + "location"`而不是`yweather:location`：

```
Dim location = resultElements.Element("channel") _
                             .Element(yweather + "location") _
                             .Attribute("city") _
                             .Value 
```

# windows-7 - 如何获取 Shadow SSDT 的地址？

> ID：15989221
> 
> 赞同：0
> 
> 时间：2013-04-13T15:07:38.087
> 
> 标签：windows-7, kernel, windbg, sql-server-data-tools

我想使用windbg获取SSDT和Shadow SSDT的地址。Windbg成功连接到vmware。我必须使用哪个命令来获取这些表的地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:13:24.297

The [x](http://msdn.microsoft.com/en-us/library/windows/hardware/ff561506%28v=vs.85%29.aspx) command displays the symbols in all contexts that match the specified pattern `x [Options] Module!Symbol`.

```
lkd> x nt!*keservicedescriptortable*
82da2980 nt!KeServiceDescriptorTableShadow = <no type information>
82da2940 nt!KeServiceDescriptorTable = <no type information>

lkd> dps 82da2980 
82da2980  82c9f634 nt!KiServiceTable
82da2984  00000000
82da2988  00000191
82da298c  82c9fc7c nt!KiArgumentTable
82da2990  95b66000 win32k!W32pServiceTable
82da2994  00000000
82da2998  00000339
82da299c  95b6702c win32k!W32pArgumentTable 
```

# c - 分段错误 11

> ID：15989222
> 
> 赞同：0
> 
> 时间：2013-04-13T15:07:44.037
> 
> 标签：c, command-line, segmentation-fault

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#define MAXLINE 512
main(int argc,char* argv[]){
    FILE *fi;
    fi=open(argv[1],"r");
    char linie[MAXLINE],*p;
    for ( ; ; ) {
        p = fgets(linie, MAXLINE, fi);
        linie[MAXLINE-1] = '\0';
        printf("%s", linie);
    }
    fclose(fi);

}; 
```

您好，我有这段代码，基本上我要做的是创建一个用于打印命令行参数中给出的文件的 c 源代码，有人可以告诉我为什么会出现分段 11 错误吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T15:12:04.267

1.  你的`for`循环没有结束。
2.  您不检查来自 的结果`fgets`，它会`NULL`在您到达文件末尾时给出。您也不会检查 的结果`fopen`，它会`NULL`在文件无法打开时给出。
3.  使用前不检查是否`argc`至少为 2`argv[1]`
4.  您正在使用`open`而不是`fopen`

提示：`-Wall -pedantic`如果您使用的是 GCC，请使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T15:10:29.847

您正在呼叫`open()`您可能打算呼叫的地方`fopen()`。你不应该忽略编译器警告。

此外，您应该检查 的返回值`fopen()`以确保它不是`NULL`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T15:13:36.187

固定版本：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#define MAXLINE 512
main(int argc,char* argv[]){
    FILE *fi;
    if (argc < 2)
        return;
    fi=fopen(argv[1], "r");
    if (!fi)
        return;
    char linie[MAXLINE],*p;
    for ( ; ; ) {
        p = fgets(linie, MAXLINE, fi);
        if (p == NULL)
            break;
        linie[MAXLINE-1] = '\0';
        printf("%s", linie);
    }
    fclose(fi);
}; 
```

# javascript - 是否可以在添加新标签之前对其进行修改以删除所有标签

> ID：15989223
> 
> 赞同：0
> 
> 时间：2013-04-13T15:07:45.890
> 
> 标签：javascript, html, ckeditor

我在下面包含了我的 javascript 的一部分，我想知道的是成功后它会向编辑器添加图像。但是，如何在添加新图像之前先从编辑器中删除所有图像？

```
onComplete: function (file, json) {
  $('#upload-image').attr('disabled', false);
  $('.error-upload').remove();
  if (json['success']) {
    alert(json['success']);
    var oEditor = CKEDITOR.instances.forum_signature;
    var value = document.getElementById('forum_signature').value;
    if (oEditor.mode == 'wysiwyg') {
      oEditor.insertHtml('<img src="' + json['image'] + '" alt="Image" /><p>&nbsp;</p>');
    } else {
      alert('You must be in WYSIWYG mode!');
    }
  }
  if (json['error']) {
    $('#upload').after('<span class="error-upload" style="color:red;">' + json['error'] + '</span>');
  }
  if (json['error_size']) {
    $('#upload').after('<span class="error-upload" style="color:red;">' + json['error_size'] + '</span>');
  }
  $('.loading').remove();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T18:03:08.447

`oEditor`是`CKEDITOR.editor`类的一个实例。因此，这是正确的解决方案：

```
if ( oEditor.mode == 'wysiwyg' && oEditor.editable() ) {
    var images = oEditor.editable().getElementsByTag( 'img' );

    while ( images.count() ) {
        var image = images.getItem( 0 ); // This is a live collection.
        // Whether this is a real image, not e.g. anchor icon.
        if ( image.data( 'cke-saved-src' ) )
            image.remove();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:16:32.827

我能够成功地解决问题。基本上，我使用了 CKEditor 中的两种方法。

获取数据（）；设置数据（）；

首先，我从实例中获取数据。我将它附加到一个临时创建的 dom 元素上。之后，我能够操纵内容。完成操作后，我获取临时 dom 元素的 html 内容并使用 setData() 将其放置在 CKEditor 中。这可能很老套，我不确定这是否真的是正确的方法，但它确实有效。

编辑器的实例：

```
var forum_signature = CKEDITOR.replace('textAreaName');
var oEditor = CKEDITOR.instances.forum_signature

var jsonImage = 'images/img2.jpg';
var temp = $("<div/>", {
    id: "temp"
});

var data = oEditor.getData();
$(data).appendTo(temp);
// you now can traverse the "temp" element in the dom
$(temp).find("img").eq(0).remove();

// You can add html
$(temp).append('<img src=' + jsonImage + ' alt="Image" /><p>Hello World</p>');
var newData = $(temp).html();
$(temp).remove();
oEditor.setData(newData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:28:11.540

以下应该工作。它会找到`img`您的 oEditor 元素内的所有元素并将它们从其父元素中删除......

```
if ( oEditor.mode == 'wysiwyg' )
{
    // Create an array of img elements.
    imgs = oEditor.getElementsByTagName("img");
    // Remove each img from its parent node.
    for (var i=0; i<imgs.length; i++) {
        imgs[i].parentNode.removeChild(imgs[i]);
    }
    oEditor.insertHtml( '<img src="'+ json['image'] +'" alt="Image" /><p>&nbsp;</p>' );
}
else{
    alert( 'You must be in WYSIWYG mode!' );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T15:18:07.853

你可以这样做：

```
$(oEditor).children("img").remove(); 
```

# regex - 正则表达式查找文本文件的特定部分

> ID：15989224
> 
> 赞同：-5
> 
> 时间：2013-04-13T15:07:48.293
> 
> 标签：regex

我想使用正则表达式从文本文件中找到一个部分。我有如下文件：

```
This is general text section that I don't want.
HEADER:ABC1
This is section text under header
More text to follow 
Additional text to follow
HEADER:XYZ2
This is section text under header
More text to follow 
Additional text to follow
HEADER:KHJ3
This is section text under header 
A match text will look like this A:86::ABC 
```

`HEADER`现在，如果部分文本包含匹配项，我想检索所有部分文本`A:86::ABC`。结果文本将是

```
(HEADER:KHJ3
This is section text under header 
A match text will look like this A:86::ABC). 
```

我很感激任何帮助。我正在使用 python，匹配部分在一个文件中可以有多个。这也是一个多行文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:14:37.177

```
regex = re.compile(".*(HEADER.*$.*A:86::ABC)", re.MULTILINE|re.DOTALL)
>>> regex.findall(string)
[u'HEADER:KHJ3\nThis is section text under header \nA match text will look like this A:86::ABC'] 
```

希望这会有所帮助。对于 2 次捕获使用`".*(HEADER.*$)(.*A:86::ABC)"`

# android - Traceview 配置文件：Handler.dispatchMessage 使用大量 CPU 时间

> ID：15989226
> 
> 赞同：3
> 
> 时间：2013-04-13T15:08:00.233
> 
> 标签：android, toast, android-traceview

我刚刚开始使用 Traceview 在原型阶段分析我的应用程序。

我发现cpu时间（90%）的主要用户是Handler.dispatchMessage。实时资源的主要用户（合计 50%）是 MessageQueue.next 和 MessageQueue.nativePollOnce。我自己的方法进行的调用平均每个占实时资源的 2%。

目前，虽然我仍在开发应用程序，但在与我的服务交互时会出现敬酒。我假设（今晚要测试这个理论）这些电话是由于我经常使用 Toast。这个对吗？

由于 Toast 在您仍在使用时出现在 Activity 的顶部，因此在 Traceview 中显示它的用法有点欺骗性。有没有办法在 Traceview 中过滤掉某些方法调用，或者我只需要在我的代码中注释 Toast 调用、重新构建和重新测试？我想使用 SharedPreference 来设置是否使用 Toasts 可能很有用。

谢谢您的帮助。

# c++ - Visual Studio 2012 C++ nanosleep() 哪里去了？

> ID：15989229
> 
> 赞同：2
> 
> 时间：2013-04-13T15:08:18.787
> 
> 标签：c++, visual-studio-2012

Visual Studio 2012 nanosleep() 哪里去了？我需要添加什么来获得 nanosleep()，或者在 C++ Visual Studio 2012 中以毫秒为单位延迟的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:13:38.087

你可以试试这个，它是可移植的标准 C++11 代码：

```
#include <thread>
#include <chrono>

// ...

std::this_thread::sleep_for(std::chrono::milliseconds(1000)); 
```

或者，您可以使用 Windows API [`Sleep()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)（在`WinBase.h`Windows 标头中声明）：

```
::Sleep(1000); 
```

# javascript - 调试 Cookie 错误

> ID：15989230
> 
> 赞同：0
> 
> 时间：2013-04-13T15:08:34.550
> 
> 标签：javascript, cookies

[Javascript 错误]

您好，我有一个设置 cookie 的网页：

```
function start() {
var expirydate=new Date(); 
expirydate.setTime(expirydate.getTime()+(100*60*60*24*100));
setCookie('product',null,expirydate); 
window.location="mainpage.html";}
function setCookie(name,value,expires){
document.cookie = name + "=" + value + ((expires==null) ? "" : ";expires=" + expires.toGMTString())} 
```

然后另一个网页访问它：

```
function cart(productName) {
var expirydate=new Date();
expirydate.setTime(expirydate.getTime()+(100*60*60*24*100))
var productnames=getCookie('product')
alert(productnames);
var products=productnames+" "+productName;
setCookie('product',products,expirydate);
alert(products);
window.location = "cart.html";} 
```

并将 cookie 的旧值与查看器的新输入相加（连接），然后保存。

这是为了购物车的目的。每次查看者在产品页面上单击“添加到购物车”时，产品名称 (productName) 都会添加到包含查看者已添加的所有产品的 cookie 中。

但是，这似乎不起作用。每次向 cookie 添加内容时，访问 cookie 的网页都会将其重置为 null。因此，我只获得查看者最后选择的产品名称，而不是产品名称列表。

请帮忙！非常非常紧急！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:10:28.157

我没有对 cookie 做太多的工作，但也许 cookie 一次只存储一个值，这就是为什么你只能得到最后选择的产品的原因。如果有任何方法可以在 cookie 中存储数组，我会使用数组，因为它可以存储多个项目。如果没有，您可以尝试存储多个 cookie。我不知道它的代码——正如我所说，我还没有用 cookie 做太多工作。

希望这可以帮助！

# ruby-on-rails-3 - 页面控制器中未定义的方法 to_slug

> ID：15989233
> 
> 赞同：0
> 
> 时间：2013-04-13T15:08:50.080
> 
> 标签：ruby-on-rails-3, controller

我无法理解我的这不起作用。当用户创建新页面（使用 Ruby on Rails）时，我正在尝试添加一种方法来从页面标题创建 slug。

这是我的创建方法：

```
 def create
@page = Page.new(params[:page])
@page.user_id = current_user.id
@page.slug = @page.title.to_slug

respond_to do |format|
  if @page.save
    format.html { redirect_to @page, notice: 'Page was successfully created.' }
    format.json { render json: @page, status: :created, location: @page }
  else
    format.html { render action: "new" }
    format.json { render json: @page.errors, status: :unprocessable_entity }
  end
end 
```

结尾

这是我在同一个控制器底部的方法。(pages_controller.rb)：

```
 def to_slug(param=self.slug)

    # strip the string
    ret = param.strip

    #blow away apostrophes
    ret.gsub! /['`]/, ""

    # @ --> at, and & --> and
    ret.gsub! /\s*@\s*/, " at "
    ret.gsub! /\s*&\s*/, " and "

    # replace all non alphanumeric, periods with dash
    ret.gsub! /\s*[^A-Za-z0-9\.]\s*/, '-'

    # replace underscore with dash
    ret.gsub! /[-_]{2,}/, '-'

    # convert double dashes to single
    ret.gsub! /-+/, "-"

    # strip off leading/trailing dash
    ret.gsub! /\A[-\.]+|[-\.]+\z/, ""

    ret
  end 
```

slug 方法来自这个问题： [Best way to generate slugs (human-readable IDs) in Rails](https://stackoverflow.com/questions/1302022/best-way-to-generate-slugs-human-readable-ids-in-rails)

我不明白为什么这会产生方法未定义的错误或如何修复它。任何帮助，提示或答案表示赞赏。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:47:56.683

该`to_slug`方法是 PagesController 类的实例方法。该对象`@page.title`没有此方法，这就是代码不起作用的原因。

有几种方法可以使该方法`to_slug`起作用，例如助手、装饰。但我认为最好的方法是将这样的逻辑放入模型中，因为`slug`它实际上是模型的一部分。我们将`slug`在保存（创建和更新）之前立即使属性可用。

所以，在`Page`模型中。假设您已经有`slug`属性。

第 1 步：设置回调

```
before_saving :update_slug  # for create record, before actual saving 
```

第 2 步：update_slug 方法

```
def update_slug  
  ret = self.title # Use title variable directly
  # .... You to_slug code. Almost same.
  self.slug = ret # return slug
end 
```

以上是提供思路的基本思路，尚未验证。请自行检查和验证。希望有帮助。

# python - 如何在 Python 中打印 PCAPNG 元数据？

> ID：15989236
> 
> 赞同：0
> 
> 时间：2013-04-13T15:09:13.823
> 
> 标签：python, wireshark, pcap, libpcap, pcap-ng

我正在尝试我的第一个 Python 程序，并且可以使用一些帮助。 [我在 github 上的脚本](https://github.com/jonschipp/metacapng-test/blob/master/metacapng.py)

我需要一种在 PCAPNG 文件中打印元数据的方法。我想为初学者打印应用程序和版本、操作系统和界面。Section Header Block 和 Interface Description Block 包含我需要的数据。

我的问题是块/字段不是固定大小，因为每个块中的选项字段：
[PCAPNG 格式](https://www.winpcap.org/ntar/draft/PCAP-DumpFileFormat.html)，请参阅第 3.1 和 3.2 节

**问题：**

1.) 是否有任何 Python 库可以打印该信息？
2.）如果没有，有什么方法可以通过 Python 轻松获取信息

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:52:59.937

没有这样的库，您必须为 PCAPNG 节头块编写自己的解析器。

另一种选择是实现代码以将 PCAPNG 文件的 HTTP POST 发送到[pcapng.com](http://pcapng.com)并解析从 HTML 结果中提取的元数据。

# java - Gson 序列化：我可以从 JSON 字符串中完成还是需要使用 JsonWriter？

> ID：15989237
> 
> 赞同：1
> 
> 时间：2013-04-13T15:09:14.780
> 
> 标签：java, json, serialization, gson

我正在使用 Google [Gson](https://sites.google.com/site/gson)库来处理 JSON 字符串。我需要将此字符串保存在文件中（保存/加载操作）。

特别是，当我有`MyClass`一个包含一组参数（整数、字符串、原始类型数组等）的类时，例如

```
public class MyClass{
 int val;
 int[]vals;
 String text;

 public MyClass(){}
} 
```

我可以`MyClass`按如下方式转换 JSON 字符串中的对象：

```
MyClass obj = new MyClass();
//obj->set...
Gson gson = new Gson();
String json = gson.toJson(obj); 
```

现在！我应该`String json`像往常一样创建并将其保存在文件中还是应该使用[`JsonWriter`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonWriter.html)该类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:22:10.797

你可以两者都做。

然而使用`JsonWriter`将提供更好的性能：输出可以流式传输到文件中，而不是在将整个输出写入文件之前将其映射到内存中。

使用`BufferedWriter`：

```
BufferedWriter bw = new BufferedWriter(new FileWriter(outputFile));
Gson gson = new Gson();
gson.toJson(obj, new JsonWriter(bw)); // Write to file using BufferedWriter 
```

# delphi - 为什么此 Web 服务器为 Indy 返回代码 404，但为每个浏览器返回代码 200？

> ID：15989238
> 
> 赞同：0
> 
> 时间：2013-04-13T15:09:25.537
> 
> 标签：delphi, indy

我有一个在所有浏览器中都可以正常工作的 URL（在 2 台计算机上测试了 5 个），但是如果我尝试使用 Indy Http 客户端的 Get() 获取页面内容，它会返回错误代码 404，找不到页面。这是最新的 Indy SVN 版本 (4985)。

**为什么此 Web 服务器为 Indy 返回代码 404，但为每个浏览器返回代码 200？**

*我怀疑这可能是 Indy 中的错误，因为 URL 中的“#”字符（Indy 在 # 之后切断了所有内容）。如果是这样，有什么办法可以解决这个问题。也许用转义码替换# char？*

这是我的示例代码。为此需要的只是带有 Indy 组件的 Delphi 以及带有按钮和备忘录的表单。

```
procedure TForm1.Button1Click(Sender: TObject);
var HTTPCLIENT1: TIdHTTP;
begin
  try
   try
     HTTPCLIENT1 := TIdHTTP.Create(nil);
     Memo1.Clear;
     with HTTPCLIENT1 do
     begin
          HandleRedirects := True;
          Request.UserAgent   := 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31';
          Memo1.Text := Get('http://www.visionofhumanity.org/gpi-data/#/2011/scor/');
          Caption := ResponseText;
     end;
   except
     On e: Exception do
     begin
          Memo1.Lines.Add('Exception: '+e.Message);
     end;
   end;
  finally
     HTTPCLIENT1.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:27:17.733

~~`#`是 URL 中的保留字符。如果要在 URL 中使用保留字符，则需要对它们进行 url 编码。 `TIdHTTP`不会为您这样做。它要求您传递一个**编码**的URL，但您传递的是一个**未编码**的URL。由于`#`未编码，因此它被视为锚点并被剥离，因此您实际上是在请求`http://www.visionofhumanity.org/gpi-data/`404 回复。~~

`#`被 url 编码为`%23`，所以使用这个：

```
Memo1.Text := Get('http://www.visionofhumanity.org/gpi-data/%23/2011/scor/'); 
```

或这个：

```
Memo1.Text := Get(TIdURI.URLEncode('http://www.visionofhumanity.org/gpi-data/#/2011/scor/')); 
```

 ~~**更新：**我找到了问题。这是另一个`TIdURI`解析错误，这一次与`/`字符后面有一个字符有关`#`。 `TIdURI`在检查`/`字符之前检查`#`字符，因此 URL 的锚部分最终在`TIdURI.Path`属性中（以前它在属性中结束`TIdURI.Params`）并因此提交给服务器。我已经签入了一个新的修复程序（SVN rev 4987）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T15:18:32.677

你的怀疑是正确的。您已`#`在请求中包含地址部分。浏览器不会这样做，因为该部分是为*页面内*导航保留的。服务器不知道这一点，因此它会尝试获取与您提供给它的*完整*URL 对应的资源，包括`#`之后的所有内容。没有匹配项，因此它以状态 404 失败。

要么像浏览器那样做，并在将请求发送到服务器之前从 URL 中删除该部分，要么将 Indy 更新到修订版 4987，以便它会自动发生。仅仅逃离角色将继续产生状态 404。~~

# windows - 通过 app-id 指向 WP7 应用程序的静态 html 链接

> ID：15989239
> 
> 赞同：2
> 
> 时间：2013-04-13T15:09:26.037
> 
> 标签：windows, windows-phone-7

我想从我的应用创建指向另一个应用的链接。我曾经在 msdn 上读到，您可以只打开一个具有特定模式（例如`windowsphone.com/apps/<app-id>`）的 url，但我再也找不到这个文档了。这仍然可能吗，还是有其他方法可以链接到其他应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:49:09.120

我认为这种格式应该可以工作：www.windowsphone.com/s?appid=fd40c569-2681-48df-9ff3-53ffd80aa9b5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T18:30:38.287

它被称为深层链接。我希望你指的是这个[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx#BKMK_URIassociations)链接

# xml - XML XSLT 样式表未加载

> ID：15989241
> 
> 赞同：1
> 
> 时间：2013-04-13T15:09:46.240
> 
> 标签：xml, xslt

不断收到以下错误：

“此 XML 文件似乎没有与之关联的任何样式信息。文档树如下所示。”

这是我的代码：

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl href="computers.xsl"?>
<!DOCTYPE computers SYSTEM "computers.dtd">
<computers>
    <computer>
    <cpu ghz="3.5" unlocked="Yes">Intel i7 3770k</cpu>
    <motherboard>MSI M-Power</motherboard>
    <ram>8</ram>
    <storage>
        <hdd>1000</hdd>
        <ssd>128</ssd>
    </storage>
    <gpu group="ATI">7950</gpu>
    <psu>750</psu>
</computer>
<computer>
    <cpu ghz="3.5" unlocked="Yes">Intel i5 3570k</cpu>
    <motherboard>ASRock Extreme 4</motherboard>
    <ram>8</ram>
    <storage>
        <hdd>1000</hdd>
    </storage>
    <gpu group="ATI">7870</gpu>
    <psu>600</psu>
</computer>
<computer>
    <cpu ghz="3.5" unlocked="No">Intel i5 3550</cpu>
    <motherboard>ASRock Extreme 3</motherboard>
    <ram>8</ram>
    <storage>
        <hdd>500</hdd>
    </storage>
    <gpu group="GeForce">9600GT</gpu>
    <psu>500</psu>
</computer> 
```

DTD：

```
<!ELEMENT computer (cpu,motherboard,ram,storage,gpu,psu) >
<!ELEMENT cpu (#PCDATA)>
<!ELEMENT motherboard (#PCDATA)>
<!ELEMENT ram (#PCDATA)>
<!ELEMENT storage(hdd,ssd*)>
<!ELEMENT hdd (#PCDATA)>
<!ELEMENT ssd (#PCDATA)>
<!ELEMENT gpu (#PCDATA)>
<!ELEMENT psu (#PCDATA)>

<!ATLIST cpu
ghz CDATA #REQUIRED>
unlocked (Yes|No) "No">
<!ATLIST gpu
group (ATI|GeForce) "ATI"> 
```

XSL：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
<head>
    <title>HELLO WORLD</title>
</head>
<body>
    <xsl:for-each select="computers/computer">
        <table border="1">
            <tr>
                <td>
                    <xsl:value-of select="cpu"/>
                </td>
                <td>
                    <xsl:value-of select="cpu/@ghz"/>
                </td>
                <td>
                    <xsl:value-of select="cpu/@unlocked"/>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:value-of select="motherboard"/>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:value-of select="ram"/>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:for-each select="storage"/>
                        <xsl:value-of select="hdd"/>
                        <xsl:value-of select="ssd"/>
                    </xsl:for-each>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:value-of select="gpu"/>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:value-of select="psu"/>
                </td>
            </tr>
        </table>
    </xsl:for-each>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

请有人帮我弄清楚它有什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:26:34.483

线

```
<?xml-stylesheet type="text/xsl href="computers.xsl"?> 
```

应该

```
<?xml-stylesheet type="text/xsl" href="computers.xsl"?> 
```

# linux - 使文件对库函数显示为只读

> ID：15989247
> 
> 赞同：2
> 
> 时间：2013-04-13T15:10:11.283
> 
> 标签：linux, unix, file-permissions

我正在使用一个可以从文件中读取或写入一些我需要的元数据的库。

我只需要阅读，我知道我的文件存储速度很慢。

我注意到虽然读取我需要的值非常快，但关闭文件却很慢。基本上，如果我`open(); read(); close()`每个文件我的程序都很慢，但如果我只`open(); read()`在操作期间和`close()`退出之前（即我让我的运行时在泄漏对象的最终确定期间关闭文件）程序运行得很快，但会停止几秒钟就在退出之前 - 当文件被关闭时。

另一方面，如果我从文件中删除写权限，这不会发生：似乎以只读方式打开的文件比以读写方式打开的文件关闭得快得多。如果文件是可写的，或者其他原因，库可能会在关闭时写入元数据“只是为了确定”，但无论如何 - 无法为库指定我不想打开文件仅用于阅读：它试图变得智能并根据文件权限做出决定。

目前为了加快速度，我正在打开文件之前更改文件权限，并在读取元数据后恢复权限。它有效，但感觉不对。

linux / unix 有没有办法让文件暂时对当前进程显示为只读？我不能使用 setuid(2) 因为程序是由非特权用户运行的（或者我错了吗？）。

**细节**

该库是[taglib-ruby](https://github.com/robinst/taglib-ruby)，它又是[taglib](http://taglib.github.io/)的 C++ API 的包装器。

该程序可能会列出设备上的曲目，并且需要以秒为单位知道它们的长度（我使用 taglib 的原因），但是将写入相同的媒体（上传新曲目，删除一些曲目）因此我不能只强迫用户以只读方式安装设备。

我意识到更好的解决方案是修补 taglib 以允许指定我只想读取元数据，然后修补 taglib-ruby 以包装新的 API。但我无法做到这一点，而且我已经有一个解决方法，因此沿着这条路线走下去并没有太大的积极性。我只是想知道是否有更好的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:10:24.860

在 C++ 中，您可以执行以下操作：（我希望您也可以在 ruby​​ 中执行此操作）

```
TagLib::IOStream * stream = new TagLib::FileStream("blow.mp4", true);

TagLib::MP4::File * file = new TagLib::MP4::File( stream );

TagLib::FileRef * fileref =  new TagLib::FileRef( file );

TagLib::String artist = fileref->tag()->artist(); 
```

在这里，FileStream 构造函数的第二个参数表示只读。我已经确认使用“strace”打开系统调用是用 O_RDONLY 调用的

# c - 在opengl中映射一个圆锥的纹理

> ID：15989249
> 
> 赞同：1
> 
> 时间：2013-04-13T15:10:26.870
> 
> 标签：c, opengl, graphics

我正在尝试在opengl中对一个圆锥体进行纹理贴图。这是我的代码。

```
glPushMatrix();
float radius=1;
float r=1;
float h=1;
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, texSet[2]);
float t,s;
float i=0.05;

for(s=0.0;s<1.0;s+=i)
{
    for(t=0.0;t<=1.0;t+=i)
    {       
        float r=((h-t)/h)*radius;
        glBegin(GL_POLYGON);
        glTexCoord2f(s,t);
        glVertex3f(r*cos(2*M_PI*s),t,r*sin(2*M_PI*s));
        glTexCoord2f(s+i,t);
        glVertex3f(r*cos(2*M_PI*(s+i)),t,r*sin(2*M_PI*(s+i)));
        glTexCoord2f(s+i,t+i);
        glVertex3f(r*cos(2*M_PI*(s+i)),(t+i),r*sin(2*M_PI*(s+i)));
        glTexCoord2f(s,t+i);
        glVertex3f(r*cos(2*M_PI*s),(t+i),r*sin(2*M_PI*s));
    }
    glEnd();
}

glDisable(GL_TEXTURE_2D);
glPopMatrix(); 
```

我没有得到正确的结果。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:00:18.167

第一件事：`glBegin`并且`glEnd`应该被调用相同的次数。您当前的循环`glBegin`在 t-loop 中调用了几次，但`glEnd`在 s-loop 中只调用了一次。

```
for(s=0.0;s<1.0;s+=i)
{
    for(t=0.0;t<=1.0;t+=i)
    {       
        glBegin(GL_POLYGON);
        ...
    }
    glEnd();
} 
```

如果您使用 GL_POLYGON，则 begin/end 中列出的任何顶点都会形成一个多边形。因此，如果您想/需要坚持下去 - 在 t-loop 中调用 begin/end。

另一方面，您可以仅使用 GL_TRIANGLES 创建圆锥体，其中每 3 个顶点形成一个三角形。在这种情况下，您只能在 s-loop 之外执行一次开始/结束。

# image - 如何获取 Cakephp 中图像的完整 URL？

> ID：15989257
> 
> 赞同：13
> 
> 时间：2013-04-13T15:11:04.597
> 
> 标签：image, url, cakephp, hyperlink, path

假设我在资产文件夹中存储了一个“image.jpg”，路径是“www.example.com/public”，我只想要图像的字符串路径。我怎么得到这个？我不希望 html 标签只包含路径字符串。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-16T07:02:25.660

在尝试了各种 CakePHP 全局常量（ROOT、WEBROOT_DIR、WWW_ROOT、CSS 等）都没有结果后，似乎在返回应用程序 webroot 路径的 $this->webroot 属性中找到了通用解决方案。因此，对于上述各种情况，我们的布局、视图或元素中可能有：

一个简单的图像标签：

```
<img src="<?php echo $this->webroot; ?>img/foo.gif" .../ > 
```

表格单元格中的背景图像以旧方式：

```
<td background="<?php echo $this->webroot; ?>img/foo.gif"> 
```

type="image" 的输入：

```
<input type="image" src="<?php echo $this->webroot; ?>img/go_btn.gif" ... /> 
```

> ```
> I think webroot always work 
> ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T21:16:52.613

查看源代码[`HtmlHelper::image()`](https://github.com/cakephp/cakephp/blob/2.3.2/lib/Cake/View/Helper/HtmlHelper.php#L787)以查看此帮助程序如何创建正确的 URL；稍作修改，实现方式如下：

```
$imageUrl = $this->assetUrl('image.jpg', array(
    // note: only required if you need the
    // URL -including- http://example.com
    'fullBase'   => true,
    'pathPrefix' => IMAGES_URL
)); 
```

Helper::assetUrl() 的源代码可以在这里找到：[https ://github.com/cakephp/cakephp/blob/2.3.2/lib/Cake/View/Helper.php#L305](https://github.com/cakephp/cakephp/blob/2.3.2/lib/Cake/View/Helper.php#L305)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-01T09:34:03.240

在 CakePHP 3（从 3.2.4 版本开始），您可以使用 url/image 助手，但路径不是必需的：

```
$this->Url->image('image.jpg'); 
```

或其他资产：

```
// Outputs /js/app.js
$this->Url->script('my.js');

// Outputs /css/app.css
$this->Url->css('my.css'); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-07T16:36:41.587

```
    $imageUrl = $this->Html->assetUrl('image.jpg', array(
        // 注意：只有在需要时才需要
        // URL - 包括 - http://example.com
        'fullBase' => 真，
        'pathPrefix' => IMAGES_URL
    ));

```

即使您使用主题，这也有效

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-13T15:54:05.840

```
$this->Html->url('/img/image.jpg') // returns /cake/app/img/image.jpg 
```

（可选）将`true`完整的基本 URL 传递给示例一。( `mysite.com/cake/app/img/image.jpg`)

```
WWW_ROOT . 'img/image.jpg' // full/path/to/webroot/img/image.jpg 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-15T05:06:46.507

您可以使用：

```
$this->webroot.'img/abc.jpg' 
```

$this->webroot 将为您提供应用程序的当前路径。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-13T10:53:29.393

在 CakePHP 中，通常图像将存储在 webroot/img 文件夹中。

此[链接](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html)将对您有所帮助。

```
 HtmlHelper::image(string $path, array $options = array()) 
```

参数：

```
 $path (string) – Path to the image.

     $options (array) – An array of html attributes. 
```

希望你觉得这很有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-12T08:33:52.587

在 CakePHP 版本 3 中，您可以使用 url 助手：

```
$this->Url->build('/img/image.jpg'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-13T18:24:54.873

检查 cakephp 2.0+ 提供的这个常量`FULL_BASE_URL`

[点击这里](http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html)了解所有

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-25T18:14:08.013

我会用

```
$this->Html->url('/', true).'img/image.jpg'; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-11T08:43:23.200

从 CakePHP 3.5 开始，我认为最好的选择是：

```
$imgUrl = Cake\Routing\Router('/', true) . 'img/' . $imageName; 
```

如果您在插件范围内，`$this->webroot`则不适合。

希望它可以帮助某人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-22T12:30:57.437

示例：[http://localhost:8080/ninavendas/rhhealth_vendas/pessoa/importar](http://localhost:8080/ninavendas/rhhealth_vendas/pessoa/importar)

在 cake 3+ 中，您可以使用：$this->request->webroot

它的回报：/ninavendas/rhhealth_vendas/

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-10-03T12:39:12.723

`fullBase`选项 - 返回**带有域名的完整 URL**：

```
$this->Url->image('image.jpg', ['fullBase'=>true]); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-08T13:34:24.593

蛋糕PHP 3

使用蛋糕\路由\路由器；

```
<img src="<?php echo Router::url('/', true); ?>/img/name.jpg" /> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-27T17:36:53.500

您可以使用此代码...

```
<?php $image = $this->Html->image('../../site/webroot/img/folder_name/'.$content->image_path.''); ?> 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2013-04-13T17:46:53.847

我认为您需要自己编写路径。如果您知道文件的名称和它所在的目录，那么是什么阻止您执行以下操作：

```
$imageUrl = sprintf("%s/%s/%s", FULL_BASE_URL, "public", $imageName);
//  this produces http://www.example.com/public/image.png 
```

# python - 在 Pyside 中显示滑块的最小值和最大值

> ID：15989261
> 
> 赞同：1
> 
> 时间：2013-04-13T15:11:29.217
> 
> 标签：python, pyqt, pyside

所以我有一个范围为 2.5 到 20 的滑块

我想在滑块的左侧添加 2.5，在右侧添加 20，以便用户知道范围是多少

另一件事我想在用户更改滑块时显示值

这是我到目前为止所拥有的

```
 sld = QtGui.QSlider(QtCore.Qt.Horizontal, window2)
        sld.setRange(2.5, 30)
        sld.setGeometry(30, 20, 200, 30) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:14:21.700

我建议您从以下内容中构建一个新的复合小部件：

1.  顶部的标签小部件显示来自滑块的值 => sld.value()
2.  左侧的标签小部件显示最小值 => sld.minimum()
3.  滑块本身。
4.  右侧的标签小部件显示最小值 => sld.maximum()

只需在垂直布局（对于 1 + 水平布局）中使用水平布局（对于 2、3、4）进行排列，一切都会很好。

希望有帮助。

# php - php中的匿名函数

> ID：15989262
> 
> 赞同：0
> 
> 时间：2013-04-13T15:11:34.187
> 
> 标签：php, anonymous-types

想象一下（即使它不是很好的风格）你有一个数组，你在其中添加了一些内容的**数组。**
也许是这样的：

```
$result_array = array();

foreach( ... as $key => $value ) {
    $temp = array();
    $temp["start"] = $value->start;
    $temp["end"] = $value->end;
    $result_array[] = $temp;
}

// Image it will produce for example an $result_array like this:
   array(
       array("start" => 10, "end" => 20), 
       array("start" => 100, "end" => 120)
   ); 
```

到现在为止还挺好。现在让我们做一些像这样的脏事：我想添加一个匿名函数，它返回每个 temp_array 中**start**和**end之间的跨度。**这可能看起来像这样：

```
foreach( ... as $key => $value ) {
    $temp = array();
    $temp["start"] = $value->start;
    $temp["end"] = $value->end;
    $temp["duration"] = function() { return abs( __START__ - __END__ ); }
    $result_array[] = $temp;
} 
```

由于我在“数组”中并且我不知道我的索引，我如何访问我的开始和结束时间？

请不要因为不好的风格或语法错误而抨击我，这只是我在问题字段中写下的一个例子。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:18:00.657

匿名函数与其“上下文数组”没有任何联系。您无法获取函数所在数组的值，因为函数和数组之间没有内在联系。你能做的最好的就是在创建时通过闭包给它值：

```
$temp['duration'] = function () use ($value) { return abs($value->start - $value->end); } 
```

当然，这在循环中不起作用，因为值会`$value`发生变化，因此您需要一个函数生成函数来破坏该引用：

```
$temp['duration'] = call_user_func(function ($v) {
    return function () use ($v) { return abs($v->start - $v->end); };
}, $value); 
```

我不知道为什么你会经历所有这些麻烦，而不是像往常一样计算并将值插入到数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:24:01.790

我真的不知道由于某种原因（我不知道）这是否是一种不好的做法，但是您可以使用如下引用：

```
$temp["start"] = $value->start;
$start = &$temp["start"];
$temp["end"] = $value->end;
$end = &$temp["end"];
$temp["duration"] = function() use (&$start, &$end) { return abs( $start - $end ); }; 
```

顺便说一句，您是否有理由要对这些值进行“惰性”操作？

# jquery - JQuery 获取单选输入值并打印它

> ID：15989263
> 
> 赞同：1
> 
> 时间：2013-04-13T15:11:44.867
> 
> 标签：jquery, input, radio, output

我已经浏览了三个小时了......我只发现了如何从无线电输入中获取值。但是我该如何打印呢？假设我有这个输入表单：

```
<form action="" method="">
<input type="radio" name="time" value="7">7
<input type="radio" name="time" value="14">14
<input type="radio" name="time" value="21">21
<input type="radio" name="time" value="28">28
</form> 
```

和这个脚本

```
var time = $('input[name=time]:radio:checked').val(); 
```

获得价值......但我该如何输出呢？我已经创建`<p id="timeDisp"></p>`并使用了这个：`$("#timeDisp").text(time);`但没有成功。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:15:05.133

标记中没有预先选择的单选按钮，当您使用`checked`选择器时，`val`页面加载方法返回`undefined`，您可以收听更改事件。

```
$(function() { // when the DOM is ready
   $('input[name=time]').change(function() { // listen to change event
      $("#timeDisp").text(this.value);
   })
}) 
```

# delphi - 如何将字符串参数传递给 TADOQuery？

> ID：15989265
> 
> 赞同：3
> 
> 时间：2013-04-13T15:11:49.347
> 
> 标签：delphi, delphi-2010

使用德尔福 2010

谁能告诉我我的代码在这里做错了什么。注释显示了我使用尝试将参数传递给 ADOQuery 的特定方法时收到的错误

```
procedure CreateAdminLogin(const APasswd: string);
var
  qry: TADOQuery;
  //P1, P2: TParameter;
begin
  qry := TADOQuery.Create(nil);
  try
    qry.Connection := frmDataModule.conMain;
    qry.SQL.Text := 'INSERT INTO Users (User_Id, Password) VALUES (:u, :p)';

    //Syntax error in INTO statement
    qry.Parameters.ParamByName('u').Value:= 'Admin';
    qry.Parameters.ParamByName('p').Value:= GetMd5(APasswd);

    //invalid variant operation
    {qry.Parameters.ParamByName('u').Value.AsString:= 'Admin';
    qry.Parameters.ParamByName('p').Value.AsString:= GetMd5(APasswd);}

    //invalid variant operation
    {P1:= qry.Parameters.ParamByName('u');
    P1.Value.asString:= 'Admin';
    P2:= qry.Parameters.ParamByName('p');
    P2.Value.asString:= GetMd5(APasswd);}

    qry.Prepared := True;
    qry.ExecSQL;
  finally
    qry.Free;
  end;

end; 
```

注意：GetMD5 声明如下

```
function GetMd5(const Value: String): string;
var
  hash: MessageDigest_5.IMD5;
  fingerprint: string;
begin
  hash := MessageDigest_5.GetMd5();
  hash.Update(Value);
  fingerprint := hash.AsString();
  Result := fingerprint;
end; 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T17:42:13.030

这对我来说很好，使用`DBDemos.MDB`Delphi 附带的文件（`C:\Users\Public\Documents\RAD Studio\9.0\Samples\Data\dbdemos.mdb`默认安装）

```
ADOQuery1.SQL.Clear;
ADOQuery1.SQL.Add('INSERT INTO Country (Name, Capital, Continent, Area, Population)');
ADOQuery1.SQL.Add('VALUES (:Name, :Capital, :Continent, :Area, :Population)');

ADOQuery1.Parameters.ParamByName('Name').Value := 'SomePlace';
ADOQuery1.Parameters.ParamByName('Capital').Value := 'Pitsville';
ADOQuery1.Parameters.ParamByName('Continent').Value := 'Floating';
ADOQuery1.Parameters.ParamByName('Area').Value := 1234;
ADOQuery1.Parameters.ParamByName('Population').Value := 56;
ADOQuery1.ExecSQL;
ADOQuery1.Close;

// Open it to read the data back
ADOQuery1.SQL.Text := 'SELECT * FROM Country WHERE Name = :Name';
ADOQuery1.Parameters.ParamByName('Name').Value := 'SomePlace';
ADOQuery1.Open;
ShowMessage(ADOQuery1.FieldByName('Name').AsString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-30T19:49:05.527

对于使用`like`额外的东西要知道：

像这样的数据源 SQL

```
select * from Table where Phone like :param

DataModule.findQuery.Parameters.ParamByName('param').Value:= '%%'+yourEdit.Text + '%%'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T17:38:34.137

您应该首先创建参数：

```
procedure CreateAdminLogin(const APasswd: string);
var
  qry: TADOQuery;
begin
  qry := TADOQuery.Create(nil);
  try

   // this part is missed in your code
   with qry.Parameters.AddParameter do
    begin
      Name := 'u';
      DataType := ftString;
    end;
    with qry.Parameters.AddParameter do
    begin
      Name := 'p';
      DataType := ftString;
    end;

    qry.Connection := frmDataModule.conMain;
    qry.SQL.Text := 'INSERT INTO Users (User_Id, Password) VALUES (:u, :p)';

    // Now it will be ok!
    qry.Parameters.ParamByName('u').Value:= 'Admin';
    qry.Parameters.ParamByName('p').Value:= GetMd5(APasswd);

    qry.Prepared := True;
    qry.ExecSQL;
  finally
    qry.Free;
  end;
end; 
```

# css - 响应式浮动 div

> ID：15989268
> 
> 赞同：0
> 
> 时间：2013-04-13T15:12:00.057
> 
> 标签：css, responsive-design

我有两个向左浮动的 div，每个宽度：50%; 和最小宽度：300px；如果容器 div 大小或没有容器的情况下的屏幕大小的宽度低于 600px，那么 div 2 自然会位于 div 1 之下。

当 div 2 低于 div 1 时，它们仍将具有 50% 的宽度......是否可以将两个 div 的宽度设为 100%？

示例：[基础](http://foundation.zurb.com/download.php)

在此示例中，有 3 个 div 彼此位于下方，当您达到它们的最小宽度断点时，它们的大小将调整为 100%。

这正是我想要实现的，但是我无法从我给你的 Foundation 示例中弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:32:06.293

要详细说明@Simon给出的解决方案，

```
div.one{
    width:50%;
    min-width:100px;
    float:left;
}
@media screen and (max-width: 767px){
    div.one{ width:100%}
} 
```

看到这个小提琴：http: [//jsfiddle.net/GraH9/](http://jsfiddle.net/GraH9/)

这里还有一篇很好的文章来清除你在响应式设计中的概念，我有一种感觉，如果你从这里的 tuts 中学习，你会发现你未来的许多问题都得到了解决。

[http://www.hongkiat.com/blog/responsive-web-tutorials/](http://www.hongkiat.com/blog/responsive-web-tutorials/)

# windows - Windows 上的 perl 初学者 - 在 Windows 命令提示符下执行 perl -n -e 时出现问题

> ID：15989269
> 
> 赞同：2
> 
> 时间：2013-04-13T15:12:02.223
> 
> 标签：windows, perl, strawberry-perl

我使用 W7 64bit，我刚刚安装了草莓 perl。我需要从 windows 命令行执行一个简单的脚本来操作文本文件：

```
perl -ne 'chomp; print "$_ O O O O\n"' test.txt > textformatted.txt 
```

我得到错误：

```
Can't find string terminator "'" anywhere before EOF at -e line 1. 
```

它在里面`PATH`，我也可以打电话`perl -v`。我尝试添加空格、替换`'`为`"`、反斜杠等，但没有用。

我查看了教程并在网上搜索，发现很多这样的陈述，所以看起来这个陈述应该有效。但事实并非如此。

有人能帮帮我吗？错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:18:57.683

您需要将单引号更改为双引号。

```
perl -ne "chomp; print qq($_ O O O O\n)" test.txt > textformatted.txt 
```

# git - 如何从bitbucket直接部署到appfog？

> ID：15989271
> 
> 赞同：0
> 
> 时间：2013-04-13T15:12:20.220
> 
> 标签：git, deployment, web-deployment, bitbucket, appfog

我希望我的项目在我的 bitbucket git 存储库更新时自动部署到 appfog，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:36:43.067

这是你必须做的：

1.  [Jenkins](http://jenkins-ci.org/)构建服务器的设置和实例。
2.  配置 Jenkins 以从您的 Bitbucket 存储库中提取、构建并[部署到 Cloud Foundry](http://blog.cloudfoundry.com/2013/02/28/continuous-integration-to-cloud-foundry-com-using-jenkins-in-the-cloud/)
3.  在您的 Bitbucket 存储库中配置[提交挂钩](https://confluence.atlassian.com/display/FISHEYE/Configuring+commit+hooks)以执行您的 Jenkins 构建

希望这可以帮助

# transactions - Servicestack.redis 事务和哈希

> ID：15989276
> 
> 赞同：1
> 
> 时间：2013-04-13T15:13:08.227
> 
> 标签：transactions, redis, servicestack

在事务中如何从哈希中获取所有条目？我没有看到一个`onSuccessCallback`正确的类型。我尝试将其映射为`byte[][]`我可以手动反序列化它的想法，但redis抱怨这一点（*对持有错误值的键的操作*）

有没有办法做到这一点？

```
var hashValues
using (var trans = client.CreateTransaction())
{
    trans.QueueCommand(c => hashValues=c.GetAllEntriesFromHash("some key"));
    trans.Remove("some key");
    trans.Commit();
}

return hashValues; 
```

所以我想做的是从哈希中获取所有值然后删除该哈希的原子操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:43:43.027

我能想到的最好方法如下。基于Redis 的这[一点，Redis](http://redis.io/commands/hgetall)的返回值似乎是字段名，后跟它的值。ServiceStack.Redis为您处理[字典映射](https://github.com/ServiceStack/ServiceStack.Redis/blob/master/src/ServiceStack.Redis/RedisClient_Hash.cs#L121)。为了让一切都在事务中工作，我认为你必须在“Redis”级别工作。

```
byte[][] hashAll = null;

var client = new BasicRedisClientManager("localhost:6379");
using (var trans = client.GetClient().CreateTransaction())
{
    trans.QueueCommand(r => ((RedisNativeClient)r).HGetAll("meHashKey"), result => hashAll = result);         
    trans.QueueCommand(r => r.Remove("meHashKey"));
    trans.Commit();
}

//variable map will hold the Hash/Dictionary<string, string>/Key-Value Pairings
var map = new Dictionary<string, string>(); 
for (var i = 0; i < hashAll.Length; i += 2)
{
    var key = hashAll[i].FromUtf8Bytes();
    map[key] = hashAll[i + 1].FromUtf8Bytes();
} 
```

# git - 当推送到gerrit时如何在jenkins中自动构建项目

> ID：15989277
> 
> 赞同：0
> 
> 时间：2013-04-13T15:13:09.580
> 
> 标签：git, jenkins-plugins, gerrit

请用简单的步骤用快照告诉我如何在詹金斯中设置 gerrit 构建...是否可以在詹金斯的一项工作中为 gerrit 构建提供两个存储库...当代码被推送到 gerrit 时，构建应该自动触发在詹金斯...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:08:02.783

执行 2 2 Repos 构建的 Jenkins 作业是可能的。仍然必须对特定 repo 的 gerrit 的特定更改进行代码审查。

[Jenkins-Gerrit](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Trigger)插件页面提供了您需要的所有信息 + 步骤的屏幕截图

如果您想让 1 个作业同步超过 1 个 repo，则可以使用[Multiple SCMs Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Multiple+SCMs+Plugin)。

这是关于 Jenkins 和 Gerrit 配置的 2 篇非常好的文章

1.  [http://alblue.bandlem.com/2011/02/gerrit-git-review-with-jenkins-ci.html](http://alblue.bandlem.com/2011/02/gerrit-git-review-with-jenkins-ci.html)
2.  [http://dachary.org/?p=1716](http://dachary.org/?p=1716)

享受，

多伦

# php - 带有复选框的php表单

> ID：15989279
> 
> 赞同：0
> 
> 时间：2013-04-13T15:13:22.637
> 
> 标签：php, forms, checkbox

我有以下 php 代码。如何修改复选框以在我的数据库中保留作为“勾号”的选定值，然后再次打印回来？

```
<?php

if ( isset($_GET['success']) === true && empty($_GET['success'])===true ){
echo'Updated Sucessfuly!';?>

<?php 
    }else{

    if( empty($_POST) === false  &&  empty($errors) === true ){

    $update_data_profile_career = array(
                'Consulting' => $_POST['Consulting'],
                'user_id' => $session_user_id,
                      );
                update_user_profile_career($session_user_id, $update_data_profile_career);

                header('Location: profile_update_career_goal.php?success');                             
                exit();

    }else if ( empty($errors) === false ){
                        echo output_errors($errors);
                        echo'</br></br>';
    }

?>

<input type="checkbox" name="Consulting[]" value="<?php echo $user_data_profile_career['Consulting'];     ?>" />Consulting 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:16:22.093

```
<?php echo $user_data_profile_career['Consulting']?' checked':''; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:19:55.770

您必须检查 db 中的值并`checked='checked'`用于检查复选框

```
<input type="checkbox" name="Consulting[]" value="<?php echo $user_data_profile_career['Consulting'];     ?>" 
<?php isset($user_data_profile_career['Consulting']) ? "checked='checked'":'' ?> />Consulting 
```

# c - 使用 char * 处理 utf8

> ID：15989280
> 
> 赞同：1
> 
> 时间：2013-04-13T15:13:28.520
> 
> 标签：c, string, utf-8

是否有任何处理 utf8 的 c 库，使用`char*`？
特别是对于所有的`char*`，我们都会使用 utf8 兼容的函数来处理：
计数长度、比较、查找替换、连接、toupper tolower 等，
无需处理转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:16:16.160

... 那么[ICU 库](http://userguide.icu-project.org/strings/utf-8)正是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:39:34.120

另一个库是[libiconv](http://www.gnu.org/software/libiconv/)。

我对 libiconv 的体验很有限，但这种体验并不痛苦；我可以推荐它。

该库专注于编码之间的转换，包括 UTF8。尽管我不*完全*确定“无需处理转换”是什么意思，但我怀疑您正在寻找一个可以读取编码的 unicode 并对其进行操作的库。如果确实是这样，libiconv 不是你要找的，我支持 ICU 的建议。

# python - python/pandas：如何将两个数据帧与分层列索引合并为一个？

> ID：15989281
> 
> 赞同：30
> 
> 时间：2013-04-13T15:13:34.390
> 
> 标签：python, pandas

我有两个看起来像这样的数据框：

```
>>> df1
              A    B
2000-01-01  1.4  1.4
2000-01-02  1.7 -1.9
2000-01-03 -0.2 -0.8

>>> df2
              A    B
2000-01-01  0.6 -0.3
2000-01-02 -0.4  0.6
2000-01-03  1.1 -1.0 
```

如何使用如下所示的分层列索引从这两个数据帧中创建一个数据帧？

```
 df1       df2
              A    B    A    B
2000-01-01  1.4  1.4  0.6 -0.3
2000-01-02  1.7 -1.9 -0.4  0.6
2000-01-03 -0.2 -0.8  1.1 -1.0 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-13T17:10:10.367

这是一个文档示例： http: [//pandas.pydata.org/pandas-docs/stable/merging.html#more-concatenating-with-group-keys](http://pandas.pydata.org/pandas-docs/stable/merging.html#more-concatenating-with-group-keys)

```
In [9]: df1 = pd.DataFrame(np.random.randn(3,2),columns=list('AB'),index=pd.date_range('20000101',periods=3))

In [10]: df2 = pd.DataFrame(np.random.randn(3,2),columns=list('AB'),index=pd.date_range('20000101',periods=3))

In [11]: df1
Out[11]: 
                   A         B
2000-01-01  0.129994  1.189608
2000-01-02 -1.126812  1.087617
2000-01-03 -0.930070  0.253098

In [12]: df2
Out[12]: 
                   A         B
2000-01-01  0.535700 -0.769533
2000-01-02 -1.698531 -0.456667
2000-01-03  0.451622 -1.500175

In [13]: pd.concat(dict(df1 = df1, df2 = df2),axis=1)
Out[13]: 
                 df1                 df2          
                   A         B         A         B
2000-01-01  0.129994  1.189608  0.535700 -0.769533
2000-01-02 -1.126812  1.087617 -1.698531 -0.456667
2000-01-03 -0.930070  0.253098  0.451622 -1.500175 
```

# c# - 检查数字是否为完美平方（数字超过 15 位）

> ID：15989285
> 
> 赞同：2
> 
> 时间：2013-04-13T15:13:49.360
> 
> 标签：c#, c++, c, square-root

我希望计算一个超过 15 位的数字的平方根，如果可能的话，100 位数字会很棒

像 100000000000000 这样的数字

目前我正在使用整数作为数据类型的C

```
int IsPerfectSquare(int number)
{

   if (number< 0)

   return 0;

   int root = (round(sqrt(number)));

    if(number == (root * root))

    {        
       return 1;    
    }    
    else
    {        
      return 0;    
    }
} 
```

但是 double 或 long double 是否可以容纳 15 位或更多

语言没有吧。我也可以用 C# 编写代码

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:19:12.743

在 C# 中，您可以使用`decimal`最多 29 位数字和`BigInteger`任意多位数字。

但是，您需要一种不同的技术来判断 100 位 BigInteger 是否是一个完美的正方形，因为我知道没有现成的“根”函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:18:56.400

在 C++ 中，您可以使用以下函数检查 long double 可以容纳多少个 bigs：

```
 std::cout << std::numeric_limits<long double>::digits10 << std::endl; 
```

如果你真的想用数字处理`100`数字，你需要编写你自己的 BigInteger 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:22:34.393

C 中整数的大小取决于平台，因此无法保证它可以容纳多少位。您可以查看[GNU 多精度数学库](http://gmplib.org/ "GMP")以处理 C 中的大数。

# spring - 如何从 GWTP CommandHandler 访问 Http Session

> ID：15989287
> 
> 赞同：0
> 
> 时间：2013-04-13T15:14:00.383
> 
> 标签：spring, session, gwt-platform

我是 GWTP 的新手。我正在尝试使用 GWTP + 命令模式 + Spring 构建应用程序。

目前我的应用程序有一个使用 Spring 控制器的登录页面，它将用户重定向到 GWT 页面。在 Spring 控制器中，我们可以访问 session，因为我们可以访问 HttpRequest 对象。在 GWTP 命令处理程序的情况下，我找不到任何访问 HttpSession 的方法。以下是我的命令处理程序代码 -

```
public class GetItemsCommandHandler extends AbstractActionHandler<GetItemsCommand, GetItemsResult>{

    @Autowired
    private ItemService itemService;

    public GetItemsCommandHandler() {
        super(GetItemsCommand.class);
    }

    @Override
    public GetItemsResult execute(GetItemsCommand action, ExecutionContext context) throws ActionException {
        // How to get User info(userid) from session??
        GetItemsResult getItemsResult = new GetItemsResult();
        getItemsResult.setItems(itemService.getItemsForUser(userId));
        return getItemsResult;
    }

} 
```

有什么方法可以从 GWTP 命令处理程序访问 HttpSession 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:01:50.790

感谢@Baadshah，但我在服务器端使用 Spring。顺便说一句，我得到了解决方案，如果有人面临类似问题，我会发布。

首先，我们需要在 web.xml 中添加以下条目

```
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener> 
```

[RequestContextListener](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/context/request/RequestContextListener.html)是一个监听器，将请求暴露给当前线程。

然后我们可以使用@Autowired 注解。

```
@Autowired
private HttpServletRequest httpServletRequest; 
```

在处理方法中，我们可以使用**getSession方法从这个****httpServletRequest**进行会话。

# java - 使用 Hibernate 进行数据访问抽象

> ID：15989288
> 
> 赞同：0
> 
> 时间：2013-04-13T15:14:47.840
> 
> 标签：java, hibernate, design-patterns, rdbms

伙计们，我们正在用 Java 开发游戏服务器。首先是 JPA/Spring Data/Hibernate，然后我们放弃了（感谢上帝），我们决定直接使用 Hibernate。在这一点上，我可以说，如果需要，我们不会更改数据访问、普通 Hibernate 和本机查询的技术。

* * *

所以我的问题是关于此时正确的数据抽象。使用该模式是否有任何意义，`Repository`或者看在上帝的份上，只放弃一个抽象`Session`并`Transaction`提供某种`Unit of Work`模式的处理？

*   如果`Repository`有太多的实现需要自己的方法
*   如果`Unit of Work`我们暴露hibernate `Session`，但同时提供灵活性和封装`Transaction`管理

每种方式的优缺点是什么？任何其他策略建议？该`DAO`模式可以成为解决方案还是`Session`直接使用更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:21:08.477

我会接受[Ayende 的建议](http://ayende.com/blog/3955/repository-is-the-new-singleton)——
这`Session` **是**你的数据库抽象；您不需要[在您的抽象之上进行抽象](http://imgix.8tracks.com/i/000/235/601/c/yodawg-5618.jpg?fm=jpg&q=65&w=521&h=521)。

# polymorphism - 你好！！！。因此，在测验中，我们给了以下课程，并要求我们提供输出。

> ID：15989291
> 
> 赞同：-8
> 
> 时间：2013-04-13T15:15:07.537
> 
> 标签：polymorphism

// 我得到了错误的答案，但每次我再次追踪时，我都会得到相同的答案。我不明白为什么它打印设置四次。

```
public class A{ 
           public int number; 
           public A(){ 
             setNumber(0); 
           } 
           public void setNumber(int d){
             number = d;
           }
           public String toString(){ 
             return number+":I am A";
           }
        }

        public class B extends A{
         public B(){ 
             super(); 
         } 
         public void setNumber(int d){ 
             System.out.println("Setting"); 
             number = d; 
         } 
         public String toString(){
           return super.toString()+" - I am B"; 
         }
        }

        //AND THIS IS THE MAIN METHOD

        public class C{
            public static void main(String[] args){
                A one = new A();
                B two = new B(); //no empty constructor
                A three = new B();
                three.setNumber(5);
                two.setNumber(3);
                one.setNumber(1);
                System.out.println(three);
                System.out.println(two);
                System.out.println(one);
            }

      //  THIS IS MY ANSWER:
        Setting
        Setting
        5:I am A - I am B
        3:I am A - I am B
        1:I am A 
```

这是正确的答案：我不明白为什么它打印设置超过两次设置设置设置设置 5：我是 A 3：我是 A - 我是 B 1：我是 A

```
 //  THANKS GUYS FOR YOUR HELP!!!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:25:37.417

额外的两个`setting`由`B`'s 的构造函数打印。`B`的构造函数调用`A`' 构造函数，然后调用`B`'**重写** `SetNumber`的Function 打印`setting`。`B`的构造函数被调用了两次，而 SetNumber 被直接调用了两次，导致了 4 次`Settings`。

# ruby-on-rails-3 - 添加新模型后的语法错误

> ID：15989296
> 
> 赞同：1
> 
> 时间：2013-04-13T15:15:53.807
> 
> 标签：ruby-on-rails-3, model-view-controller

大家好，我有一个应用程序调用演示。在演示中，主脚手架调用“联系人”。现在我正在尝试在“contact#show”页面中添加一个新模型“地址”（具有 5 个属性）。这是我的联系人控制器定义显示

```
def show
    @contact = Contact.find(params[:id])
    @addresses = @contact.addresses.paginate(page: params[:page])
end 
```

这是我试图在 view/contacts/show.html.erb 中显示“地址”的地方

```
<%= form_for(@contact) do |f| %>
      <% if @contact.addresses.any? %>
      <h3>Addresses (<%= @contact.addresses.count %>)</h3>
      <ol >
        <%= render @addresses %>
      </ol>
      <%= will_paginate @addresses %>
      <% end %>
<%= link_to 'Edit', edit_contact_path(@contact) %> 
<%= link_to 'List', contacts_path %> 
```

这是视图/地址/_address.html.erb（我不知道如何显示地址的所有属性，所以我只使用'address.all'）

```
<li>
  <span class="content"><%= address.all %></span>
</li> 
```

当我启动服务器并单击“显示”链接机器时，会给我错误消息，例如

```
SyntaxError in Contacts#show
ActionView::Template::Error (/media/sf_VM_working/demo/app/views/contacts/show.html.erb:38: syntax error, unexpected keyword_ensure, expecting keyword_end
/media/sf_VM_working/demo/app/views/contacts/show.html.erb:40: syntax error, unexpected $end, expecting keyword_end):
    35: <%= link_to 'Edit', edit_contact_path(@contact) %> 
    36: <%= link_to 'List', contacts_path %>
  app/controllers/contacts_controller.rb:14:in `show' 
```

谁能告诉我我哪里出错了，非常感谢你的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:19:58.493

您的 erb 模板缺少结尾

它应该看起来像这样

```
<%= form_for(@contact) do |f| %>
  <% if @contact.addresses.any? %>
    <h3>Addresses (<%= @contact.addresses.count %>)</h3>
      <ol>
        <%= render @addresses %>
      </ol>
    <%= will_paginate @addresses %>
  <% end %>
<% end %> 
<%= link_to 'Edit', edit_contact_path(@contact) %> 
<%= link_to 'List', contacts_path %> 
```

`form_for`注意块的结束端

# mongodb - mongo db文本搜索错误没有文本索引

> ID：15989297
> 
> 赞同：0
> 
> 时间：2013-04-13T15:16:03.370
> 
> 标签：mongodb, search, text, mongoose

我正在尝试使用 mongo db 文本搜索，但出现以下 msg 错误 - 尽管您可以看到 db.items 中有文本索引，但没有文本索引。有什么问题？猫鼬的命令是什么？

```
> db.items.getIndexes()
[
    {
        "v" : 1,
        "key" : {
            "_id" : 1
        },
        "ns" : "db.items",
        "name" : "_id_"
    },
    {
        "v" : 1,
        "key" : {
            "type" : "text",
            "color" : "text",
            "category_A" : "text",
            "category_B" : "text",
            "category_C" : "text"
        },
        "ns" : "db.items",
        "name" : "type_text_color_text_category_A_text_category_B_text_category_C_text",
        "sparse" : false,
        "background" : false
    }
]
> db.items.runCommand( "text",{search:"D"})
{ "ok" : 0, "errmsg" : "no text index for: db.items" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T15:51:51.047

首先，您是从 mongo 开始的`textSearchEnabled=true`（请参阅[启用文本搜索](http://docs.mongodb.org/manual/tutorial/enable-text-search/ "启用搜索")）？

如果您使用的是配置文件（例如`/etc/mongodb.conf`），则正确的行应该是：

`setParameter = textSearchEnabled=true`

其次，您的索引看起来像常规索引而不是文本。请发布您使用的命令。

* * *

如果要测试文本索引功能，请尝试以下操作：

删除您当前的索引（它可能会干扰您将创建的新索引）

`db.items.dropIndex("type_text_color_text_category_A_text_category_B_text_category_C_text")`

并创建一个新的

`db.items.ensureIndex( {type:"text"}, {unique: false, name: "type_index"})`

然后再次尝试搜索。

您可能还需要运行`db.items.reIndex()`.

# php - 需要 PHP 正则表达式 number:number

> ID：15989299
> 
> 赞同：-7
> 
> 时间：2013-04-13T15:16:14.363
> 
> 标签：php, regex

我需要 PHP 的以下正则表达式：

```
Numbers:Numbers 
127.0.0.1:27015 
```

仅适用于特殊字符和数字。长度或多或少不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:20:29.020

如果是这种情况，您可以使用explode 而不是regexp。

```
$foo = "127.0.0.1:27015";

$ent = explode(':', $foo);
$ip = $ent[0];
$port = $ent[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:22:23.800

像这样的东西

```
((\d{1,3}\.){3,3}\d{1,3}):(\d{1,5}) 
```

[使用http://www.regexper.com/](http://www.regexper.com/)也很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:23:27.420

你想要什么？像这样的正则表达式？

```
^(([0-9]{1,2}|[12][0-9]{2})(\.([0-9]{1,2}|[12][0-9]{2})){3})[:]([123456]?[0-9]{1,4})$ 
```

# java - Java DOM 解析器错误

> ID：15989307
> 
> 赞同：0
> 
> 时间：2013-04-13T15:17:08.827
> 
> 标签：java, xml, parsing, dom, dtd

这是我的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Server SYSTEM "Server.dtd">
<Server>
    <MaximumUserNumber>2</MaximumUserNumber>
    <ServerPortNumber>1234</ServerPortNumber>
    <MessagesQueueSize>5</MessagesQueueSize>
</Server> 
```

这是我的 Server.dtd：

```
<?xml version="1.0" encoding="UTF-8"?>
<!ELEMENT Server 
         (MaximumUserNumber,
          ServerPortNumber,
          MessagesQueueSize)>
<!ELEMENT MaximumUserNumber (#PCDATA)>
<!ELEMENT ServerPortNumber (#PCDATA)>
<!ELEMENT MessagesQueueSize (#PCDATA)> 
```

这是我的代码，它给了我一个 NullPointerException：

```
 public Server() {
        try {

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setValidating(true);
            Document document = dbf.newDocumentBuilder().parse("config.xml");
            document.normalizeDocument();
            NodeList nl = document.getElementsByTagName("MaximumUserNumber");
            nl.item(0); // this line causes exception

          }
} 
```

我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:05:50.917

你的代码看起来不错。

它甚至不会在 jdk-7 上抛出任何异常。也许，您没有包含相应的代码。

您只是在查找元素的值方面没有多做一步：

```
 NodeList nodeList = document.getElementsByTagName("MaximumUserNumber");
    Node foundNode = nodeList.item(0);
    Node textNode = foundNode.getChildNodes().item(0);
    String value = textNode.getNodeValue();
    System.out.println(value); 
```

输出

```
2 
```

解释

`document.getElementsByTagName("MaximumUserNumber")`返回一个节点列表。它有一个找到的节点。每个元素节点（类型 == ELEMENT_NODE）即使它只包含文本也有子节点。在这种情况下，唯一的子节点是 TEXT_NODE: 类型的节点`Node textNode = foundNode.getChildNodes().item(0);`。从这种类型的节点你只是得到它的值。

有一种更快的方法可以从纯文本元素中获取文本值：

```
 NodeList nodeList = document.getElementsByTagName("MaximumUserNumber");
    Node foundNode = nodeList.item(0);
    String value = foundNode.getTextContent();
    System.out.println(value); 
```

在这里，`.getTextContent()`返回此节点及其后代的文本内容。

这两种情况都不是真正安全的（没有空检查或节点类型检查），但如果使用 with schema 可能会被认为是这样。

# java - Java 堆栈 push() 与 add()

> ID：15989309
> 
> 赞同：33
> 
> 时间：2013-04-13T15:17:41.453
> 
> 标签：java, collections, interface, stack

我正在尝试使用`Stack`，但我对术语有些困惑。

我发现`Stack`该类仅`push(E e)`根据 Java 文档。

并且具有`add(E e)`和`addAll(Collection<? extends E> c)`作为从`Vector`类继承的方法。

它们是否具有相同的功能，或者更好地用于`push(...)`将元素插入`Stack`对象。

换句话说，如果我使用`add(...)`而不是，我会遇到任何问题`push(...)`吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-13T16:20:08.050

> Kalyanaraman Santhanam：
> 
> 编辑：如果我使用 add(...) 而不是 push(...)，我会遇到任何问题吗？

当然，您不会遇到任何问题，因为`add`它是`List`接口的一部分，也是`Stack`. `push`方法会给他们一个线索，表明他们正在使用该`Stack`对象，他们将确切地知道会发生什么。另请注意，`push`返回值不同于`add`（前者具有“推送对象”类型，后者只是`boolean`响应）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-01T20:49:07.983

（对不起，如果我的英语不好，我来自 MX）。

从理论上讲，是一样的，因为 add 是所有泛型类的方法...但是非常推荐使用 push，因为您使用的是堆栈，如果您使用“push”方法而不是“add”，也许你会明白一点...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T15:21:09.367

他们是一样的。

从[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html#push%28E%29)：

> 将一个项目推入此堆栈的顶部。这与以下效果完全相同：
> 
> ```
> addElement(item) 
> ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-24T02:56:11.400

唯一的区别是返回类型

```
System.out.println(stack.push("1"));

Output : 1

System.out.println(stack.add("2"));

Output : true 
```

但是建议对 Stack 使用 Push 方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T15:24:59.507

如果您使用的是 a`Stack`那么您应该使用`push()`，因为这是将元素添加到堆栈中的标准方法（由于 a 的数据结构的想法`Stack`）。这意味着“堆栈顶部”是您刚刚`push()`编辑的项目。

您应该只在 a 的顶部添加和删除`Stack`，如果您认为需要其他方式来添加数据（添加到中间或末尾），那么我建议您不要使用 a `Stack`，因为它会使您的代码更难理解。

编辑：（反映问题编辑）正如我所提到的，我**不**希望看到`add()`我是否正在处理`Stack`. `add()`不是使用 a 的标准语法`Stack`，`push()`是。我建议只使用在主体中定义的函数，`javadoc`除非你特别需要那些被继承的函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T15:23:09.590

这完全是关于继承问题，如果它是一个`Stack`你应该使用`push()`清楚并遵循模型。但是，实际上来自 Java SE 规范：

*将一个项目推入此堆栈的顶部。这与以下效果完全相同：*`addElement(item)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-27T13:30:02.877

> 根据我的分析，我看不出 add 和 push 方法的输出之间没有区别。请参考下面的代码和输出..

```
导入 java.util.Stack；

公共类 StackDemo {

    静态堆栈堆栈=新堆栈（）；

    公共静态无效主要（字符串[]参数）{
        // TODO 自动生成的方法存根

        添加（10）；
        添加（20）；
        添加（30）；
        打印（）;
        推（40）；
        打印（）;
        流行音乐（）;
        打印（）;
        推（50）；
        打印（）;

    }

    静态无效打印（）{
        System.out.println(stack);
    }

    静态无效添加（int item）{
        stack.add(项目);
    }

    静态无效推送（int item）{
        stack.push(项目);
    }

    静态无效窥视（）{
        System.out.println(stack.peek());
    }

    静态 int pop() {
        返回栈.pop();
    }
}

```

```
*
[10, 20, 30]
[10, 20, 30, 40]
[10, 20, 30]
[10, 20, 30, 50]
* 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-29T07:34:59.810

是的，我在使用它们时找不到 push() 和 add() 方法之间的太大区别。但在使用 Stack 时更喜欢使用 push()

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-02T17:50:27.560

我最近在尝试编码问题时遇到的（实际上是导致我搜索相同问题的情况）是：当我使用 stack.add(string object) 时，我的代码超出了时间限制。当我将 .add 更改为 .push 即 stack.push(string object) 时，它成功解决了。从字面上看，我没有改变任何其他内容（除了 .add -> .push），并且我的代码及时执行！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-20T18:39:41.357

正如大家所说，它与“推”具有相同的效果。有人可能会问，但为什么呢？我最近读了这个主题，它说它违反了“最小惊讶原则”的原则。所以这就像 API 的设计缺陷，而不是大问题。这告诉我们，没有任何软件、框架、API 等是完美的，一切都有自己的缺陷。

# php - php收集到同一个数组中，哪些属性属于同一个人

> ID：15989311
> 
> 赞同：1
> 
> 时间：2013-04-13T15:17:53.097
> 
> 标签：php, multidimensional-array

我有这样的html元素：

```
<div id="show">
<p>1\. <input name="name[]" size="25" type="text">
<input name="surname[]" size="25" type="text">
<input name="email[]" size="50" type="text"></p>

<p>2\. <input name="name[]" size="25" type="text">
<input name="surname[]" size="25" type="text">
<input name="email[]" size="50" type="text"></p>

<p>3\. <input name="name[]" size="25" type="text">
<input name="surname[]" size="25" type="text">
<input name="email[]" size="50" type="text"></p>

<p>4\. <input name="name[]" size="25" type="text">
<input name="surname[]" size="25" type="text">
<input name="email[]" size="50" type="text"></p>

<p>5\. <input name="name[]" size="25" type="text">
<input name="surname[]" size="25" type="text">
<input name="email[]" size="50" type="text"></p>
</div> 
```

这是带有虚拟数据的输出屏幕。![在此处输入图像描述](https://i.stack.imgur.com/ur17H.jpg) 当我序列化 div#show 并发布它时，转储数据如下所示：

```
array (size=3)
  0 => 
    array (size=5)
      0 => string 'Hüsamettin' (length=11)
      1 => string 'Niyazi' (length=6)
      2 => string 'Abuzittin' (length=9)
      3 => string 'Haşmet' (length=7)
      4 => string 'Birben' (length=6)
  1 => 
    array (size=5)
      0 => string 'Karadayürümez' (length=15)
      1 => string 'Tuzyemez' (length=8)
      2 => string 'Yerebasmaz' (length=10)
      3 => string 'Haşmetligil' (length=12)
      4 => string 'Eksiktim' (length=8)
  2 => 
    array (size=5)
      0 => string 'husamettin@getmail.us' (length=21)
      1 => string 'tuzyemez@postmail.us' (length=20)
      2 => string 'abuzittin@setmail.us' (length=20)
      3 => string 'hasmetligil@mail.us' (length=19)
      4 => string 'birseneksiktim@mail.us' (length=22) 
```

你看，第一个数组收集姓名，第二个数组收集姓氏，第三个数组收集电子邮件地址。但我想像这样收集它们：

```
array (size=5)
  0 => 
    array (size=3)
      0 => string 'Hüsamettin' (length=11)
      1 => string 'Karadayürümez' (length=15)
      2 => string 'husamettin@getmail.us' (length=21)
  1 => 
    array (size=3)
      0 => string 'Niyazi' (length=6)
      1 => string 'Tuzyemez' (length=8)
      2 => string 'tuzyemez@postmail.us' (length=20)
  2 => 
    array (size=3)
      0 => string 'Abuzittin' (length=9)
      1 => string 'Yerebasmaz' (length=10)
      2 => string 'abuzittin@setmail.us' (length=20)
  3 => 
    array (size=3)
      0 => string 'Haşmet' (length=7)
      1 => string 'Haşmetligil' (length=12)
      2 => string 'hasmetligil@mail.us' (length=19)
  4 => 
    array (size=3)
      0 => string 'Birben' (length=6)
      1 => string 'Eksiktim' (length=8)
      2 => string 'birseneksiktim@mail.us' (length=22) 
```

此数组类型收集人的姓名、姓氏和电子邮件地址，如上图所示。请你帮我，我如何创建一个从第一个 HTML 元素中收集某人的姓名、姓氏和电子邮件地址的数组？亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:25:22.793

```
$grouped = array_map(null, $_POST['name'], $_POST['surname'], $_POST['email']); 
```

# android - 以编程方式单击更改布局背景

> ID：15989312
> 
> 赞同：2
> 
> 时间：2013-04-13T15:17:59.817
> 
> 标签：android, xml, response

我可以通过 xml 通过编写更改 LinearLayout 的背景

> android:background="@drawable/overview"

到我的线性布局。

但是我不能以编程方式做到这一点。我试过以下：

> 线性布局水平菜单 = 新线性布局（这个）；... Horizo​​ntal_menu.setBackgroundResource(getResources().getInteger(R.drawable.overview));

还有那个代码源：

> Horizo​​ntal_menu.setBackground(getResources().getDrawable(R.drawable.overview));

第一次尝试在运行时抛出一个 RuntimeException，第二行似乎什么都不做 -> 没有错误，没有异常，点击时没有改变背景......

--> 概览.xml

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">   
<item android:state_focused="true" android:drawable="@color/half_transparent"/> 
<item android:state_pressed="true" android:drawable="@color/half_transparent" />
</selector> 
```

我希望任何人都可以帮助我！

谢谢！

**编辑：**

```
LinearLayout content = (LinearLayout)findViewById(R.id.LinearLayout); 
LinearLayout horizontal_menu = new LinearLayout(this); 
horizontal_menu.setOrientation(LinearLayout.HORIZONTAL); 
horizontal_menu.setBackgroundResource(getResources().getInteger(R.drawable.overv‌​iew)); 
content.addView(horizontal_menu); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T15:26:11.687

在布局 XML 文件中为布局设置 id：

```
<LinearLayout android:id="@+id/myLinearLayout" ... 
```

然后在您的活动中，使用 findViewById() 获取 LinearLayout，如下所示：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.myLinearLayout); 
```

然后使用 setBackground 方法为 ll 设置背景：

```
ll.setBackground(...) 
ll.setBackgroundDrawable(...)
ll.setBackgroundResource(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-26T09:41:45.737

我遇到了同样的问题，根据我的搜索，没有办法在之后动态更改活动或主 ViewGroup 样式。所以`super.onCreate`您应该有一个 XML 布局并在之前设置该布局，`super.onCreate`或者您应该像这样膨胀该布局：

```
root = (LinearLayout)findViewById(R.id.rootView);
getLayoutInflater().inflate(R.layout.one,root); 
```

请注意，您应该有一个根视图来作为您膨胀的布局的父级。当您想更改该布局时，只需执行以下操作：

```
buttonclick{
        root.removeAllViewsInLayout();
        v = getLayoutInflater().inflate(R.layout.two,root);
        root.addView(v,0);
} 
```

请注意，您也可以添加或删除每个小部件或视图，`viewGroup.addView`但我认为`Inflater`这是更好的选择。

编辑：

有关这方面的非常好的答案，请参见@broot answer [here](https://stackoverflow.com/questions/3334048/android-layout-replacing-a-view-with-another-view-on-run-time)。

# python - 使用客户端访问数据库或服务器访问数据库

> ID：15989315
> 
> 赞同：0
> 
> 时间：2013-04-13T15:18:10.647
> 
> 标签：python, database

我正在创建一个需要更新特定数据库的客户端服务器应用程序。我正在使用 python 和 MySQL。

client.py 文件将读取二维码并发送随附的数据，这些数据将存储在数据库中。大约有 50 个这样的客户端将向服务器发送数据。

我已经在服务器上设置了一个 MySQL 服务器，并且已经为每个客户端创建了表。

有两种方法可以在服务器上操作数据库：

客户端直接使用 MySQL 服务器访问数据库和查询。

互联网上有关于访问 MySQL 记录的所有信息，我可以使用以下代码完成此操作：

**客户端.py**

```
import MySQLdb as mdb
import sys

con = None

try:

    con = mdb.connect('server_address', 'user', 
        'pass', 'table pertaining to that particular client');

    cur = con.cursor()
    cur.execute("SELECT VERSION()")

    data = cur.fetchone()

    print "Database version : %s " % data

except mdb.Error, e:

    print "Error %d: %s" % (e.args[0],e.args[1])
    sys.exit(1)

finally:    

    if con:    
        con.close() 
```

或者我可以创建一个 server.py 文件，它将以 JSON 的形式获取数据，并自己处理本地主机上的数据库。

哪种方法更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:34:31.333

没有“最佳”答案，只有权衡取舍。

使用直接 MySQL 连接使编程更简单、更快（更少层），但会使系统难以更改。

如果您使用客户端/服务器（通过 TCP 或 HTTP），则更容易保护（客户端上没有数据库凭据，无需向客户端公开 MySQL 服务器），更容易更改（您可以更改表而无需换客户端。）

# java - 如何为枚举的每个条目添加描述？

> ID：15989316
> 
> 赞同：3
> 
> 时间：2013-04-13T15:18:11.513
> 
> 标签：java, enums

鉴于以下情况：

```
enum Moving {DownRight , UpRight ,DownLeft ,UpLeft ,Up , Down ,Left ,Right};

Moving m_moving; 
```

例如，如果我这样做：

```
m_moving = Moving.DownRight; 
```

和

```
m_moving.toString(); 
```

然后我会得到：

```
DownRight 
```

那么，如何为枚举中的每个条目添加描述？

例如，如果我愿意，`m_moving.toString();`那么我想展示`FOO BAR`。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T15:22:21.890

看看这段代码，来自我们的应用程序

```
public enum RegimeTributario {
    SIMPLES_NACIONAL("SI"), 
    LUCRO_PRESUMIDO("LP"), 
    LUCRO_REAL("LR");

    private String sigla;

    private RegimeTributario(String sigla) {
        this.sigla = sigla;
    }

    public String getSigla() {
        return sigla;
    }
} 
```

枚举也接受字段

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T15:40:16.490

在[这篇](https://stackoverflow.com/questions/9662170/java-override-valueof-and-tostring-in-enum)文章之后，这是我的最终答案（也非常感谢@Luiz E.）：

```
enum DirectionsEnum {

    North("North"),
    NorthEast("North East"),
    East("East"),
    SouthEast("South East"),
    South("South"),
    SouthWest("South West"),
    West("West"),
    NorthWest("North West");

    private String value;

    DirectionsEnum(String value) {
        this.value = value;
    }

    public String getValue() {
        return value;
    }

    @Override
    public String toString() {
        return this.getValue();
    }

    public static DirectionsEnum getEnum(String value) {
        if(value == null)
            throw new IllegalArgumentException();
        for(DirectionsEnum v : values())
            if(value.equalsIgnoreCase(v.getValue())) return v;
        throw new IllegalArgumentException();
    }
} 
```

# c# - 使用现有关节角度计算 Kinect 骨骼膝盖和肘部角度

> ID：15989322
> 
> 赞同：1
> 
> 时间：2013-04-13T15:18:58.040
> 
> 标签：c#, kinect, angle

我正在开展一个项目，将 Kinect 捕获的关节数据映射到机器人。我需要计算肘部和膝盖的角度。以左膝为例，我得到了髋膝和膝角向量，并试图计算两个向量之间的角度。代码如下

```
Vector3D KL = new Vector3D(skeleton.Joints[JointType.KneeLeft].Position.X, skeleton.Joints[JointType.KneeLeft].Position.Y, skeleton.Joints[JointType.KneeLeft].Position.Z);
        Vector3D KR = new Vector3D(skeleton.Joints[JointType.KneeRight].Position.X, skeleton.Joints[JointType.KneeRight].Position.Y, skeleton.Joints[JointType.KneeRight].Position.Z);

        Vector3D HL = new Vector3D(skeleton.Joints[JointType.HipLeft].Position.X, skeleton.Joints[JointType.HipLeft].Position.Y, skeleton.Joints[JointType.HipLeft].Position.Z);
        Vector3D HR = new Vector3D(skeleton.Joints[JointType.HipRight].Position.X, skeleton.Joints[JointType.HipRight].Position.Y, skeleton.Joints[JointType.HipRight].Position.Z);

        //caculte knee angle
        Vector3D AKL = Vector3D.Subtract(AL, KL);
        Vector3D KHL = Vector3D.Subtract(KL, HL);

        double LAngAK_KH = Vector3D.AngleBetween(AKL, KHL); 
```

对于正常的站立姿势，出来的角度应该在 180 度左右。但是，输出始终在 15 左右。我仔细检查了算法和编码，非常困惑。感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T19:07:49.423

我认为你的问题可能是：

```
Vector3D AKL = Vector3D.Subtract(AL, KL); 
```

您复制的代码中不存在 AL。
你是说HR吗？

# eclipse - java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext

> ID：15989325
> 
> 赞同：7
> 
> 时间：2013-04-13T15:19:05.477
> 
> 标签：eclipse, spring, jsf-2, tomcat6

我在部署我的项目时遇到了问题，我使用 jsf/spring/hibernate 作为框架，我特别添加了必要的 jars org.springframework.web-3.1.0.CI-1162，错误是：

```
SEVERE: Error configuring application listener of class org.springframework.web.context.ContextLoaderListener
java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4150)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

并添加了罐子列表：

antlr-2.7.6.jar

commons-dbcb-1.4.jar

commons-collections-3.1.jar

commons-pool.1.6.jar

commons-logging-1.1.jar

dom4j-1.6.1.jar

hibernate3.jar

hibernate-jpa-2.0-api-1.0.1.Final.jar

iText-5.0.4.jar（用于 Primefaces）

javassist-3.9.0.GA.jar

com.springsource.org.jboss-el-2.0.0.GA.jar（在 Tomcat 6 上运行时可选）

jsf-api.jar (Mojarra 2.0.4)

jsf-impl.jar (Mojarra 2.04)

jta-1.1.jar

log4j-1.2.11.jar

mysql-connector-java-5.0.5.jar (对于 MySQL)

org.springframework.aop-3.1.0.CI-1162.jar

org.springframework.asm-3.1.0.CI-1162.jar

org.springframework.aspects-3.1.0.CI-1162.jar

org.springframework.beans-3.1.0.CI-1162.jar

org.springframework.context-3.1.0.CI-1162.jar

org.springframework.context.support-3.1.0.CI-1162.jar

org.springframework.core-3.1.0.CI-1162.jar

org.springframework.expression-3.1.0.CI-1162.jar

org.springframework.jdbc-3.1.0.CI-1162.jar

org.springframework.orm-3.1.0.CI-1162.jar

org.springframework.oxm-3.1.0.M1.jar

org.springframework.transaction-3.1.0.CI-1162.jar

org.springframework.web-3.1.0.CI-1162.jar

org.springframework.web.portlet-3.1.0.M1.jar

org.springframework.web.servlet-3.1.0.CI-1162.jar

poi-3.2-FINAL-20081019.jar（用于 Primefaces）

primefaces-3.5jar

slf4j-api-1.6.1.jar

slf4j-jdk14-1.6.1.jar

qlfj4-log4j12-1.6.4.jar

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-09-16T09:59:01.050

对于这个错误，可以有不同的解决方案。我已经记下了对我有用的那些。

**解决方案 1.**在部署和调试环境中经常出现这种情况。在部署环境中，只需确保您的服务器类路径已包含 Spring jar 库（例如 spring-4.0.4.jar）。

在调试环境下，不同的IDE，步骤可能会有所不同，但解决方法是一样的。在 Eclipse 中，开发人员通常会创建一个 tomcat、jboss……任何应用程序服务器进行调试，只要确保包含正确的 Spring jar 即可。

1.  双击您的调试服务器
2.  点击“打开启动配置”进入服务器环境
3.  单击类路径选项卡
4.  在此处包含 Spring jar 文件，由于 Spring 依赖，它可能还需要通用 log jar。
5.  完成，再次运行您的应用程序。

.

**解决方案 2.**如果您使用 Maven 作为构建工具并使用它下载依赖项，则可能存在一些 jar 冲突。因为Tomcat服务器通常会提供一些jar，比如servlet-api和jpa-api。因此，如果您再次使用 Maven 将它们包括在内；识别它们会有问题。

**解决方案 3.**如果您使用 Eclipse 作为 IDE，使用 Maven 作为构建工具，使用 tomcat 作为服务器；请记住，Tomcat 服务器不会查看文件夹内的 jar。为此，有一个小技巧，

1.  右键单击您的***项目***并选择***属性***
2.  从显示的窗口中，选择***部署程序集***
3.  选择***添加***
4.  添加***Maven 依赖项***
5.  单击***应用***，然后单击***确定***

希望这些解决方案之一可以帮助您解决问题。快乐编码并确保使用 Java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T03:21:45.563

在我的情况下，我使用maven构建项目，只是因为war文件没有正确创建，就会导致这个异常。我检查了war文件并再次运行安装，这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:46:42.240

我建议你用最新版本（3.2.2.RELEASE）替换所有 Spring jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T15:35:25.553

您必须下载必要的 jar 文件。您可以从以下链接下载 spring-context.jar 文件

[http://mvnrepository.com/artifact/org.springframework/spring-context/3.2.2.RELEASE](http://mvnrepository.com/artifact/org.springframework/spring-context/3.2.2.RELEASE)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-30T16:11:55.513

确保您的服务器类路径已包含 Spring jar 库。[观看此链接](http://www.mkyong.com/spring/spring-error-classnotfoundexception-org-springframework-web-context-contextloaderlistener/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-24T06:09:06.083

我用eclipse发现Deployment Assembly上没有maven依赖配置，所以修改了.classpath from

```
 <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER">
       <attributes>
            <attribute name="maven.pomderived" value="true"/>
       </attributes>
     </classpathentry> 
```

至

```
 <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER">
       <attributes>
            <attribute name="maven.pomderived" value="true"/>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
       </attributes>
     </classpathentry> 
```

# scala - 展平功能

> ID：15989328
> 
> 赞同：3
> 
> 时间：2013-04-13T15:19:23.393
> 
> 标签：scala

Scala 文档说 flatten api 将列表列表展平，并且只能在列表列表上调用。

那么为什么可以在下面调用它呢？

```
List(Some("Tony"), None).flatten 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T15:27:46.380

ScalaDoc API 显示`[use case]`了方法签名的简化表示。如果单击`Full signature`它，它将扩展为完整的签名：

```
Full Signature
def flatten[B](implicit asTraversable: (A) ⇒ GenTraversableOnce[B]): List[B] 
```

`flatten`只要存在从列表元素类型`A`（在您的情况下`Option[String]`）到任何其他类型的可遍历的隐式转换，您就可以调用列表或大多数其他集合。

任何`Option`类型都可以隐式转换为`GenTraversableOnce`--`Some`充当单个元素集合和`None`空集合。这意味着您可以调用`flatten`来`List[Option[String]]`获取`List[String]`.

# ruby - 如果一个空字符串是真实的，那有什么好处？

> ID：15989329
> 
> 赞同：5
> 
> 时间：2013-04-13T15:19:25.790
> 
> 标签：ruby, boolean, string

在 Ruby 中，空字符串`""`对于条件句来说是真实的。我看到很多人都在为这个事实而苦苦挣扎。Ruby on Rails`blank?`是克服这个问题的一种尝试。另一方面，当这样的规范变得方便时，并不是很明显。是否有任何用例可以让这个事实变得方便，或者如果不是这样，是否会有理论上的问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T16:16:34.203

我想我想出了答案。可能是出于理论原因和效率。在一个类的不同实例之间画一条线理论上比在类之间画一条线更复杂，并且需要更多的计算。如果`""`是假的，那么每次条件中有一个字符串时，Ruby 内部都必须检查字符串的长度。相反，如果可以仅通过类来判断真实性（恰好是这种情况），那么效率会高得多。或许这也是`false`和`true`不归入单一类`Boolean`而分别属于独立类的原因。

另一种可能性是 and 只有一个实例`false`，`nil`因此在 Ruby 内部处理它只需要检查指针/对象 id，而字符串是可变的，并且需要更复杂的检查是否为空。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T15:39:47.503

减少被认为是*虚假*的事物的数量是一件好事。它简化了语言，简化了布尔规则，使它们更容易记住和应用，从而减少了错误。

看看 PHP 乱七八糟的：`false`, `0`, `0.0`, `'0'`, `''`, `null`and `array()`are all *falsey*，每天都让很多人感到惊讶。

如果要测试空字符串，请测试空字符串。您应该知道您的变量是包含字符串还是布尔值，并能够进行相应的测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T15:45:20.807

我认为 Ruby 的设计很简单，并且具有 FEWER 的 false 值使程序更容易推理：“只有两个对象具有 false 的布尔值，它们是 false 对象本身和 nil 对象。”

权衡是你可能不得不写`.blank?`更多。另一方面，有多少字段的最小长度为 1？不太多。如果您无论如何都要检查`.size > 1`，那么“空字符串是真实的”是没有用的。

每种语言都选择它的“范式”。例如，在 SQL 中，布尔运算实际上有 3 个值（真、假、空）。在 Perl 和 C 中，`0`是错误的。哎呀，在某些语言中，字符串“false”是错误的。

# c++ - 如何将 char 数组解析为整数？

> ID：15989332
> 
> 赞同：4
> 
> 时间：2013-04-13T15:19:38.840
> 
> 标签：c++, c, arrays, parsing, integer

我有一个像这样的 char 数组的缓冲区：

```
char buf[4];
buf[0] = 0x82;
buf[1] = 0x7e;
buf[2] = 0x01;
buf[3] = 0x00; 
```

我现在想将字符 2 和 3 一起读取为大端序中的 16 位无符号整数。如何使用 C(++) 标准工具执行此操作？

目前我只知道手动解决方案：

```
int length = but[3];
length += but[2] << 8; 
```

这对于 16 位整数来说很容易，但我还需要解析 32 位整数，这会使事情变得有点困难。那么标准库中是否有一个功能可以为我做到这一点？

博多

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T15:29:23.787

您可以使用`ntohs`and `ntohl`（在小端系统上）：

```
#include <iostream>
#include <cstring>
#include <arpa/inet.h>
int main(){
    char buf[4];
    buf[0] = 0x82;
    buf[1] = 0x7e;
    buf[2] = 0x01;
    buf[3] = 0x00;
    uint16_t raw16;
    uint32_t raw32;
    memcpy(&raw16, buf + 2, 2); 
    memcpy(&raw32, buf    , 4); 
    uint16_t len16 = ntohs(raw16);
    uint32_t len32 = ntohl(raw32);
    std::cout << len16 << std::endl;
    std::cout << len32 << std::endl;
    return 0;
} 
```

或者您可以交换字节并将其转换为适当的类型而不是移位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:04:01.003

您可以使用联合：

```
union conv {
    char arr[4];
    short value16[2];
    int value32;
};

conv tmp;
tmp.arr[0] = buf[0];
tmp.arr[1] = buf[1];
tmp.arr[2] = buf[2];
tmp.arr[3] = buf[3]; 
```

或 memcpy ：

```
memcpy(&length, buf, sizeof(length)) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-13T15:40:56.953

[阿泰](http://www.cplusplus.com/reference/cstdlib/atoi/)_ 更可能是最简单的解决方法。

```
int iResult = atoi(buf); 
```

# java - 在 C 中嵌入 Java 库

> ID：15989340
> 
> 赞同：7
> 
> 时间：2013-04-13T15:20:26.400
> 
> 标签：java, c, java-native-interface

我将编写一个 Java 服务器/客户端应用程序，其中客户端并不是真正的客户端（它没有主程序），但它是一个库。

另外，我必须开发一个需要与服务器交互的C模块（一个熔断器驱动程序），所以它需要调用客户端的函数。

我已经创建了许多从 Java 应用程序调用的 C 函数示例，但没有一个是我需要的。

你能给我一个建议或一些提示吗？

编辑

因为有人不明白我需要什么，所以我想更清楚一点：我有一个服务器，一个程序只能使用一个用 Java 编写的库与之交互。真正的客户端是用C编写的，它必须能够调用库的函数，所以在CI中必须调用java方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T16:05:22.270

基本上有两种方法可以链接 C 和 Java 代码；JNA 和 JNI。

[JNA](http://today.java.net/article/2009/11/11/simplify-native-code-access-jna)通常用于琐碎的接口；使用适当的签名绑定共享库，以便从 JVM 调用到 C 库。有些事情单独使用 JNA 是不可行的，尤其是对 Java 方法的调用和在 C 端直接修改 Java 对象，在这种情况下，很快就会在另一层中向上和向下传递修改。关键是，类型映射仅限于基元和一些数组（缓冲区/字符串）类型：http: [//jna.java.net/javadoc/overview-summary.html#marshalling](http://jna.java.net/javadoc/overview-summary.html#marshalling)。该层很可能包含不太简洁的代码，从而引入了额外的开销。但是，仅使用 JNA 还是不可能从 C 函数调用 Java 方法。

如果您需要在 C 中“从下方”调用 Java 方法或在 JVM 的对象中旋转，请从 JNI 开始。

根据您的问题，我假设您可能希望从 C（本机）端而不是从 JVM 执行整个 Java <> C 工具。在这种情况下，您需要使用 JNI 将 JVM 嵌入到您的 C/C++ 应用程序中：[https ://stackoverflow.com/a/7506378/1175253](https://stackoverflow.com/a/7506378/1175253)

如何为 JNI 实现生成 C 头文件：[如何在 Eclipse 中生成 JNI 头文件](https://stackoverflow.com/q/9940381/1175253)

当然，您可以（或者更确切地说应该）用 C++ 实现 JNI C 函数，它通过使用 RAII 等简化了资源管理。

* * *

**编辑**

使用 JNI 编程 == 玩火。处理 C 端的全局引用、线程、数组固定等。您是否真的需要使用 JNI 在很大程度上取决于您想要实现的目标。

可以分别从 for 调用或修改中检索任何 Java 类及其方法和字段`JNIEnv`（就像 Java 的反射一样）。以这种方式调用本机 Java (JNI) 方法可能很危险。假设在 C 实现中锁定了一个非递归互斥锁，那么嵌套调用可能会陷入死锁。因此，人们通常会从 C 中调用普通的（简单）Java 方法，这些方法既不是本机的，也不是自己调用自己的本机方法，即使只是为了适当的设计。JNI 引入的开销与我在最近的项目中所经历的相比可以忽略不计。

# c# - 在 MS Access Query 中检查并显示空值

> ID：15989342
> 
> 赞同：1
> 
> 时间：2013-04-13T15:20:38.730
> 
> 标签：c#, sum, ms-access-2010, isnull

我正在尝试编写一个 SQL 查询来显示每个类别的总和。问题是我需要每个类别的总和，即使总和为零，它仍然应该显示结果。

我通过使用 DAL 层来执行此操作，因此通过 C# 并且我使用的是 access 2010 数据库。

这是我当前的工作查询：

```
SELECT        SUM(f.bedrag) AS totaal, c.omschrijving, Limiet.maximumBedrag
FROM            ((Financien f INNER JOIN
                         Categorie c ON f.categorieId = c.id) INNER JOIN
                         Limiet ON f.limietId = Limiet.id)
WHERE        (f.inkomstOfUitgave = 1)
GROUP BY f.categorieId, c.omschrijving, Limiet.maximumBedrag 
```

现在在 SUM 函数之上，我还需要检查空值，如果一个类别的总和为 0，它应该显示 0。现在所有为 0 的结果都被过滤掉了，但我必须看到它们。

有人知道如何解决吗？我试过了`IsNull()`，`NZ`但我无法让它工作。这是查询结果的屏幕截图。 [![](https://i.imgur.com/JuLD1mg.png "由 imgur.com 主办")](https://imgur.com/JuLD1mg)

如您所见，我得到两个结果，但如果查询显示总和 0 结果，我应该得到 7。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:44:18.820

If the question is about how to display Null as 0 in an Access query, consider this simple query. It returns some rows with Null in the `SumOfbedrag` column.

```
SELECT y.categorieId, Sum(y.bedrag) AS SumOfbedrag
FROM YourTable AS y
GROUP BY y.categorieId 
```

Using that SQL as a subquery, the containing query can transform Null to 0 with an `IIf()` expression.

```
SELECT
    sub.categorieId,
    IIf(sub.SumOfbedrag Is Null, 0, sub.SumOfbedrag) AS totaal
FROM
    (
        SELECT y.categorieId, Sum(y.bedrag) AS SumOfbedrag
        FROM YourTable AS y
        GROUP BY y.categorieId
    ) AS sub; 
```

However, looking at your screenshot again makes me think the issue is actually that your query does not include rows with Null in the `totaal` column. In that case, examine the underlying data before you aggregate it with `GROUP BY`. See whether this query returns any rows ...

```
SELECT f.bedrag, c.omschrijving, Limiet.maximumBedrag
FROM
    (Financien f
    INNER JOIN Categorie c
    ON f.categorieId = c.id)
    INNER JOIN Limiet
    ON f.limietId = Limiet.id
WHERE
        f.inkomstOfUitgave = 1
    AND f.bedrag Is Null 
```

If that query returns no rows, my best guess is that one or both of your joins should be changed from `INNER` to `LEFT JOIN` or `RIGHT JOIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:33:12.150

还显示 0 值的答案是：答案是由“drch”做出的，为此我非常感谢他！:)

```
SUM(IIF(IsNULL(f.bedrag), 0, f.bedrag)) AS bedrag 
```

那里还有很多其他的问题，这是完整的查询：

```
SELECT        c.omschrijving as Omschrijving, SUM(IIF(IsNULL(f.bedrag), 0, f.bedrag)) AS bedrag, l.maximumBedrag as maximumBedrag
FROM            ((Categorie c LEFT OUTER JOIN
                         Financien f ON f.categorieId = c.id) LEFT OUTER JOIN
                         Limiet l ON l.categorieId = c.id)
WHERE        (f.inkomstOfUitgave IS NULL) OR
                         (f.inkomstOfUitgave = 1)
GROUP BY c.id, f.categorieId, c.omschrijving, l.maximumBedrag 
```

# c++ - 懒惰复制——如何从浅拷贝创建深拷贝

> ID：15989343
> 
> 赞同：0
> 
> 时间：2013-04-13T15:20:45.693
> 
> 标签：c++, deep-copy, shallow-copy

我有一个使用延迟复制的类 - 当调用复制构造函数时，它会创建浅拷贝，而当调用一个方法时，它会创建深拷贝并添加更多数据。

我被困在我应该从那个浅拷贝创建一个深拷贝的地方。

深拷贝应如下所示：

```
 m_count = copy.m_count;
  k = copy.k;
  m_record = new TRecord * [k*SIZE];
  char * temp;
  for(int i=0;i<m_count;i++) {
    m_record[i] = new TRecord;
    temp = new char[12];
    strcpy(temp, copy.m_record[i]->Id);
    m_record[i]->Id = temp;

    temp = new char[strlen(copy.m_record[i]->Name) + 1];
    strcpy(temp, copy.m_record[i]->Name);
    m_record[i]->Name = temp;

    temp = new char[strlen(copy.m_record[i]->Surname) + 1];
    strcpy(temp, copy.m_record[i]->Surname);
    m_record[i]->Surname = temp;
  } 
```

但我不知道如何实现它。我试图创建一个临时对象并用 *this 填充它

```
temp.m_count = this->m_count;... 
```

最后

```
*this=temp; 
```

但它不起作用。

为什么我不首先创建深拷贝？因为有这么多副本，而其中只有少数被更改，而且它们占用了大量内存。

我该怎么做？

PS 我被禁止在这个任务中使用 STL 和字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:34:35.547

您可以将所有数据成员分离到一个类或结构中，并在您的副本之间共享此数据（使用引用计数）。所有想要更改数据的方法都必须检查当前对象是否是独占数据所有者，否则会制作数据的深层副本。

# sql - 使用来自交集实体的复合外键作为主键？

> ID：15989347
> 
> 赞同：2
> 
> 时间：2013-04-13T15:21:09.527
> 
> 标签：sql, foreign-keys, primary-key, composite-primary-key

我有四个表，两个是单独的实体，一个将这两个连接在一起的交叉实体和第三个表，它引用了交叉实体。这是我所拥有的结构：

```
CREATE TABLE tableA (
    primaryKeyA   number(4) ,
    PRIMARY KEY (primaryKeyA) );

CREATE TABLE tableB (
    primaryKeyB   number(4) ,
    PRIMARY KEY(primaryKeyB) );

CREATE TABLE intersectionTable (
    primaryKeyA   number(4) ,
    primaryKeyB   number(4) ,
    FOREIGN KEY (primaryKeyA) REFERENCES tableA ,
    FOREIGN KEY (primaryKeyB) REFERENCES tableB ,
    PRIMARY KEY (primaryKeyA, primaryKeyB) );

CREATE TABLE tableC (
    primaryKeyC   number(4) ,
    primaryKeyA   number(4) ,
    primaryKeyB   number(4) ,
    FOREIGN KEY (primaryKeyA) REFERENCES intersectionTable ,
    FOREIGN KEY (primaryKeyB) REFERENCES intersectionTable ,
    PRIMARY KEY (primaryKeyA, primaryKeyB, primaryKeyC) ); 
```

问题是，每次创建时，`tableC`我都会从 oracle 收到以下错误：

> ORA-02256: 引用列的数量必须与引用的列匹配

我需要确保它`tableC`可以引用复合键`intersectionTable`，我认为我已经用我的 FOREIGN KEY 约束完成了。我确实将约束更改`tableC`为：

```
FOREIGN KEY (primaryKeyA) REFERENCES tableA ,
FOREIGN KEY (primaryKeyB) REFERENCES tableB , 
```

但是在查询数据库时，我发现它没有使用`intersectionTable`我需要的复合键。

任何帮助都是极好的。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:34:37.577

```
CREATE TABLE tableC
    ( primaryKeyC   number(4)
    , primaryKeyA   number(4)
    , primaryKeyB   number(4)
    , FOREIGN KEY (primaryKeyA,primaryKeyB)
          REFERENCES intersectionTable (primaryKeyA,primaryKeyB) 
    , PRIMARY KEY (primaryKeyA, primaryKeyB, primaryKeyC)
    )
    ; 
```

# windows-runtime - Windows 8：如何禁用搜索魅力

> ID：15989353
> 
> 赞同：1
> 
> 时间：2013-04-13T15:21:53.163
> 
> 标签：windows-runtime, windows-store-apps

一旦用户导航到不同的页面，我需要禁用搜索魅力。

我尝试了以下但没有成功：

```
public void OnNavigatedFrom(NavigationEventArgs e)
{
    _dataTransferManager.DataRequested -= OnDataRequested;

    _searchPane.QuerySubmitted -= _querySubmittedHandler;
    _searchPane.SuggestionsRequested -= _suggestionsRequestedHandler;
    _searchPane.ResultSuggestionChosen -= OnSearchPaneResultSuggestionChosen;

    _searchPane = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:23:58.840

_searchPane.ShowOnKeyboardInput = false;

# c++ - MapViewOfFile 中信号量的最佳方法 - C++

> ID：15989355
> 
> 赞同：1
> 
> 时间：2013-04-13T15:22:02.197
> 
> 标签：c++, windows, winapi

您好 StackOverflow 的用户。

我一直在使用 C++ 中 Win32 API 中的 MapViewOfFile，我是它的新手，但我一直在尝试为 mapview 文件创建一个信号量，所以一个实例无法复制到它，除非另一个实例有已经复制到它并且主实例已经读取它。

我得到的想法是创建不同的方法来做到这一点，但我需要知道最好的方法。

**1）**使用while循环等待mapviewfile为空。
我尝试执行以下操作：

```
mapViewFile = (LPTSTR) MapViewOfFile(mapView,
FILE_MAP_ALL_ACCESS,0,0,SH_MAX_MEMORY);

if(mapViewFile!=NULL){

// Wait for the mapviewfile to be empty.
while(mapViewFile!=""); // This while is only for delay the operation and wait for the mapviewfile it's empty, we don't need any action in this while.
CopyMemory((PVOID)mapViewFile,defaultalloc,(_tcslen(defaultalloc) * sizeof(TCHAR)));
UnmapViewOfFile(mapViewFile);
}

CloseHandle(mapView); 
```

因此，当 mapviewfile 为空时，while 被跳过，“辅助”实例复制到其中，然后主实例读取它并清空 mapviewfile，这会生成一个信号量。

**2)**使用互斥锁
另一种方法是使用 Win32 Api 中的互斥锁，`CreateMutex`
我还没有使用过这个，但我想我可以用它来做我想做的事情。

* * *

所以，我的问题如下：

1.  哪种方式最好做我想做的事？（在第 1 段中解释）
2.  mapviewfile 这样做没有问题吗？（请记住，我想与一个主实例通信两个或多个实例）。

就是这些问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:31:29.620

您正在寻求同步对共享资源的访问。这样做的方法是使用同步对象。这意味着使用互斥锁。

Using a mutex means that you can do idle waiting rather than a busy loop. And you also don't need to concern yourself with the compiler optimising away the read of `mapViewFile` in the `while` loop. And if you have multiple processes writing then you've got a data race that you cannot resolve without a mutex or equivalent. Your first option can never work in that scenario.

Incidentally you would need to use `strcmp` in the `while` loop test. That's because `mapViewFile!=""` always evaluates true.

# ruby - `&&=` 的用例

> ID：15989361
> 
> 赞同：4
> 
> 时间：2013-04-13T15:22:26.197
> 
> 标签：ruby, syntactic-sugar

我自己在 Ruby 代码中看到和使用过很多，但在实际应用中`||=`我几乎从未见过或使用过。`&&=`有用例`&&=`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:46:21.230

不是油嘴滑舌，但显而易见的用例是任何时候你会说`x && foo`并希望将结果存储回`x`. 这是一个：

```
list = [[:foo,1],[:bar,2]]
result = list.find{ |e| e.first == term }
result &&= result.last  # nil or the value part of the found tuple 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:44:17.127

您希望确保对所有元素的布尔条件的评估对所有元素都返回 true 的任何类型的迭代。

例如

```
 result = true
 array.each do |elem|
   # ...

   result &&= condition(elem)   # boolean condition based on element value
 end
 # result is true only if all elements return true for the given condition 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-13T15:39:44.043

文件的验证，例如，

```
a = {'a' => ['string',123]} 
```

其中的元素`a['a']`应该是 a `String`。为了验证它们，我认为你可以使用，

```
def validate(doc, type)
  valid = true
  doc.each{|x|
    valid &&= x.is_a? type
  }
  valid    
end

1.9.3p392 :010 >   validate(a['a'],String) => false 
```

# html - 在 Chrome 中单击按钮

> ID：15989362
> 
> 赞同：0
> 
> 时间：2013-04-13T15:22:28.853
> 
> 标签：html, google-chrome, css, button

我在 Firefox 中制作了一个按钮，效果很好，但是在 Chrome 中单击按钮后文本没有移动，因此单击时没有按钮效果。我想为 Chrome 解决这个问题，但仍然不会弄乱 Firefox 的代码。

`**[Demo](http://jsfiddle.net/DaMiller/Qj9uv/)**`

```
 .btn{
        background:-moz-linear-gradient(top,#64b24c 1%,#5ba045 31%,#509339 80%);
        background:-webkit-linear-gradient(top,#64b24c 1%,#5ba045 31%,#509339 80%);
        border:1px solid rgba(70,140,60,0.8);
        border-radius:3px;
        height:30px;width:80px;
        font-family:Corbel;font-weight:bold;font-size:16px;color:#FFF;
        text-shadow:rgba(3,3,3,0.8) 1px 1px 2px;
        padding-bottom:3px; /*bad*/
        padding:0px 0px 2px 0px; /*good*/
    }
    .btn:hover{cursor:pointer;}
    .btn:active{
        background:#509339; 
        padding:2px 0px 3px 1px; /*bad*/
        padding:0px 0px 0px 2px; /*good*/
} 
```

问题是 Chrome 对 padding-left: 1px; 没有反应。我将其更改为 2px，Chrome 和 Firefox 一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:28:52.980

在我的 chrome (v26) 版本上，背景确实发生了变化，文本没有移动。我是否可以建议您从 btn 类的填充中删除 -bottom：

```
padding:3px; 
```

这样你会看到一个动作，你就可以调整它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:33:46.400

Chrome 的用户代理样式表有`padding: 2px 6px 3px 6px`按钮。因此，当您将其设置为 2px 时，您的顶部填充根本不会改变。

您可能希望显式覆盖未按下按钮的填充，以便无论浏览器设置如何都能获得相同的效果。

# ruby-on-rails - 表单在 Rails 中没有响应

> ID：15989372
> 
> 赞同：1
> 
> 时间：2013-04-13T15:23:44.317
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

下面是我的代码。我的表单没有响应我的任何操作。我做错了什么。我让用户填写账单/送货地址，提交后我将他引导至交易。这里我的表单没有响应，没有错误我记录我看到以下错误

```
 Started GET "/orders/53/themes/js/jquery.lightbox-0.5.js" for 127.0.0.1 at 2013-04-13 08:19:03 -0700

     ActionController::RoutingError (No route matches [GET] "/orders/53/themes/js/jquery.lightbox-0.5.js"):
     actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
     actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
     railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
     railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
    actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
     rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
     rack (1.4.5) lib/rack/runtime.rb:17:in `call'
      activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
      rack (1.4.5) lib/rack/lock.rb:15:in `call'
      actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
      railties (3.2.3) lib/rails/engine.rb:479:in `call'
       railties (3.2.3) lib/rails/application.rb:220:in `call'
       rack (1.4.5) lib/rack/content_length.rb:14:in `call'
        railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
      rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
       /Users//.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
       /Users/vpendyam/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
            /Users/vpendyam/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

         Rendered /Users/***/.rvm/gems/ruby-1.9.2-p320@byagustore/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)

Transactions form
<%= form_for(@transaction) do |f| %>

<div class="span9">
    <h3> Place Order</h3>
    <div class="alert-error">
        <%= render "shared/error_messages", :target => @order %>
    </div>

 <div class="well">
 <div class="control-group"> <%= f.label :card_type %>
 <div class="controls">
<%= f.select :card_type, [["Visa", "visa"], ["MasterCard", "master"], ["Discover", "discover"], ["American Express", "american_express"]],:class=>"span3" %>
 </div>
 </div>

 <div class="control-group">
 <%= f.label :card_number %>
 <div class="controls">
  <input type="text" size="20" autocomplete="off" data-encrypted-name="number" />
  </div>
  </div>
  <div class="control-group">
  <%= f.label :cvv, "Card Verification Value (CVV)" %>
  <div class="controls">
   <input type="text" size="4" autocomplete="off" data-encrypted-name="cvv" />
  </div>
  </div>
  <div class="control-group">
  <%= f.label :card_expires_on %>
   <div class="controls">
          <input type="text" size="2" data-encrypted-name="month" /> / <input type="text" size="4" data-encrypted-name="year" />
   </div>
   </div>

 <%= f.submit "Place Order",:class=>"btn btn-success btn-large" %>

<%end %>
</div>
</div>  
<script type="text/javascript" src="https://js.braintreegateway.com/v1/braintree.js"></script>
<script type="text/javascript" src="../assets/javascript/Braintree.js"></script> 
```

事务控制器

```
def create 
      @category_div = Category.get_category
      @order = Order.find(params[:order_id])
  @transaction = transaction.new(params[:transaction])

 @result = Braintree::Transaction.sale(:amount => @amount,
 :credit_card => {
  :number => @transaction[:credit_card],
  :cvv => @transaction[:cvv],
  :expiration_month => '11',
  :expiration_year => '2013'
},
:options => {
  :submit_for_settlement => true
})

if @result.success?
  render :action => "success"

else
  @amount = calculate_amount
  render :action => "error"
end

 end 
```

交易模型

```
 class Transaction < ActiveRecord::Base
   attr_accessible :action, :amount, :authorization, :message, :order_id, :params, :success, 
   :response,:card_type,:cvv,:card_expires_on
   attr_accessor :card_number
  belongs_to :order
 serialize :params
  validates :card_number,:cvv,:card_expires_on, :presence => true
   end 
```

路线

```
resources :users

  resources :orders do
   resources :transactions
  end
   resources :transactions
  resources :line_items

    resources :carts

   resources :products do
      resources :photos
    end

  resources :category , :only => [:index,:show]

   resources :payments, :only => :new
     match "/line_items/:id" => "line_items#update"
     match "carts/:id" => "carts#show"
     match "/orders/:order_id/transactions/new" => "transactions#new" ,:as => :transactions 
```

# c++ - 与相同引擎并行生成随机数失败

> ID：15989376
> 
> 赞同：4
> 
> 时间：2013-04-13T15:24:04.923
> 
> 标签：c++, c++11, openmp

我正在使用 C++11 提供的 RNG，我也在玩弄 OpenMP。我为每个线程分配了一个引擎，作为测试，我为每个引擎提供了相同的种子。这意味着我希望两个线程都能产生完全相同的随机生成数字序列。这是一个MWE：

```
#include <iostream>
#include <random>

using namespace std;

uniform_real_distribution<double> uni(0, 1);
normal_distribution<double> nor(0, 1);

int main()
{
    #pragma omp parallel
    {
        mt19937 eng(0); //GIVE EACH THREAD ITS OWN ENGINE
        vector<double> vec;

        #pragma omp for
        for(int i=0; i<5; i++)
        {
            nor(eng);
            vec.push_back(uni(eng));
        }
        #pragma omp critical
        cout << vec[0] << endl;
    }

    return 0;
} 
```

大多数情况下，我得到了输出`0.857946 0.857946`，但有几次我得到了`0.857946 0.592845`。当两个线程具有相同的、不相关的引擎时，后一种结果怎么可能？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T17:31:07.390

你也必须把`nor`和`uni`放在`omp parallel`区域内。像这样：

```
#pragma omp parallel
{
    uniform_real_distribution<double> uni(0, 1);
    normal_distribution<double> nor(0, 1);
    mt19937 eng(0); //GIVE EACH THREAD ITS OWN ENGINE
    vector<double> vec; 
```

否则每个线程只有一个副本，而实际上每个线程都需要自己的副本。

**更新添加：我现在看到在**[这个 stackoverflow 线程](https://stackoverflow.com/questions/8813592/c11-thread-safety-of-random-number-generators)中讨论了完全相同的问题 。

# css - 元素的 z-index 对 :before / :after 伪元素的 z-index 的影响

> ID：15989380
> 
> 赞同：7
> 
> 时间：2013-04-13T15:24:23.773
> 
> 标签：css, z-index, pseudo-element, css-content

这是我不太了解的关于 z-index 和 css 伪元素 ::before / ::after 的行为。

在这个 jsfiddle 上有说明：http: [//jsfiddle.net/jgoyon/T6QCf/](http://jsfiddle.net/jgoyon/T6QCf/)

我创建了一个定位框并使用 ::after 伪元素（也定位）添加了内容。

*   如果我将 z-index 设置为 ::after 伪元素，一切正常，我可以通过使用 z-index 将其定位在父元素之上或之下

```
 #no-z-index {
      background:lightblue;
      width:100px;
      height:100px;
      position:relative;
    }
    #no-z-index:after {
      content: 'z-index -1';
      width:50px;
      height:50px;
      background:yellow;
      position:absolute;
      z-index:-1; /* z-index in question */
      top:70px;
      left:70px;
    } 
```

*   如果我做同样的事情并设置父级的 z-index，它就不再起作用了。

```
 #z-index {
      background:lightblue;
      left:200px;
      width:100px;
      height:100px;
      position:relative;
      z-index:0; /* parent z-index */
    }
    #z-index:after {
      content: 'z-index -1';
      width:50px;
      height:50px;
      background:yellow;
      position:absolute;
      z-index:-1; /* z-index in question */
      top:70px;
      left:70px;
    } 
```

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T15:28:17.727

这是预期的行为，记录在[规范](http://www.w3.org/TR/CSS21/visuren.html#layers)中。

当您不指定`z-index`生成元素时（默认为`auto`），生成元素和伪元素将出现在相同的堆叠上下文中。如果伪元素较低，这允许伪元素出现在元素`z-index`下方。

当您`z-index`在生成元素上指定时，该元素会*为*伪元素（实际上是它的所有后代）创建一个新的堆叠上下文，即使您给它一个负值，它也不会出现在它的下方`z-index`。

# c++ - 指针上的 C++ 子字符串

> ID：15989381
> 
> 赞同：4
> 
> 时间：2013-04-13T15:24:27.580
> 
> 标签：c++, string, performance, memory

是否可以在 C++ 中创建一个子字符串作为指向与原始字符串相同的内存的指针？

假设我有一个字符串`s = "just testing"`和一个函数`f`。我希望函数 f 返回一个常量字符串对象（用户不能更改它），这将是一个子字符串，`s`我想`f`以最有效的方式创建这个子字符串。

我唯一的想法是返回一对指针 - 在子字符串的开头和结尾，但我很想给最终用户`f`返回一个对象的“感觉”，他可以打印它，迭代它等等

在 C++ 中可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:37:13.953

是的，这是可能的。

您应该编写自己的类作为子字符串开头和结尾的包装器。

这段代码不完整，但显示了方向。

```
class string_ref
{
    std::string::iterator b, e; // begin and end
public:
    string_ref(std::string::iterator b, std::string::iterator e) : b(b), e(e){}

    std::string to_string() const {
        return std::string(b, e);
    }

    std::string::iterator begin() const {
        return b;
    }

    std::string::iterator end() const {
        return e;
    }
    // ... Code to complete this class ... //
};

std::ostream &operator<<(std::ostream &out, const string_ref &str) {
    // out << str.to_string();
    for (std::string::iterator i = str.begin(); i != str.end(); i++) cout << *i;
    return out;
}

int main() {
    std::string s = "Hello";
    string_ref sr(s.begin(), next(s.begin(),3)); // pick first 3 charaters
    cout << sr << endl;                          // print it by cout
} 
```

您可以简单地迭代和打印它。

# python - 非周期函数与 NumPy 的互相关

> ID：15989384
> 
> 赞同：5
> 
> 时间：2013-04-13T15:25:03.133
> 
> 标签：python, numpy, signal-processing

我有两个数据集要相互关联。它们看起来与`arctan`函数相似，因此我一直将其用作模型来研究如何进行信号处理。

```
x = linspace(-15, 15, 2**13)
f1 = arctan(x)
f2 = arctan(x + 2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/1Uwcn.png)

我需要回答的问题是，我需要将绿色信号移动多少才能使其（大部分）与蓝色信号重叠？`f1`我认为这就像在和的互相关函数中找到最大值一样简单`f2`，我在这里广泛遵循了建议：[如何将两个时间序列与间隙和不同的时间基准相关联？](https://stackoverflow.com/questions/5130808/how-to-correlate-two-time-series-with-gaps-and-different-time-bases). 这是我一直在尝试的

```
c = correlate(f1, f2, 'full')
s = arange(1-2**13, 2**13)
dx = 30/2**13
shift = s[c.argmax()]*dx 
```

我希望`shift`或多或少正好等于 2，但实际上它只是`0.234`. 这对我来说没有任何意义；我找到了互相关最大值的 x 坐标，应该在两个信号最大重叠的地方找到。

关于如何为这种函数计算这个数量的任何想法？

编辑：我应该添加，对于我的真实数据，所有的值都将在零和一之间

编辑编辑：以下函数实际上更像我的真实数据：

```
x = linspace(-15, 15, 400)
f1 = (arctan(-x) + pi/2) / pi
f2 = (arctan(-x + 2) + pi/2) / pi 
```

![在此处输入图像描述](https://i.stack.imgur.com/PZndi.png)

因此，使用此处给出的公式：http: [//paulbourke.net/miscellaneous/correlate/](http://paulbourke.net/miscellaneous/correlate/)我可以编写一个互相关函数来填充数据以在左侧添加 1 并在右侧添加零：

```
def xcorr(x, y);
    mx = x.mean()
    my = y.mean()
    sx = x.std()
    sy = y.std()
    r = zeros(2*len(x))

    for d in range(-len(x), len(x)):
        csum = 0
        for i in range(0, len(x):
            yindx = i - d
            if i - d < 0:
                yval = 1
            elif i - d >= len(x):
                yval = 0
            else:
                yval = y[yindx]
            csum += (x[i] - mx) * (yval - my)
        r[d + len(x)] = csum / (sx * sy)
    return r 
```

有了这个功能，我现在可以做

```
c = xcorr(f1, f2)
s = arange(-400, 400)
dx = 30/400
shift = s[c.argmax()] * dx 
```

结果是 2.025，以这种精度可以接近 2。所以看起来 Jamie 是正确的，问题在于 numpy 如何`correlate`填充信号。

所以，显然我的`xcorr`功能真的很慢。现在的问题是，有没有办法让 NumPy 做类似的事情，或者我应该继续使用 C 语言编写我的算法`ctypes`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T04:52:50.507

正如人们所指出的，互相关被数据之外的填充所混淆。

尽管感觉就像您丢弃了好的数据，但通常最好只修剪数据集，以便可以在没有假设的情况下完成相关性（至少与将实际数据与填充数据相关联的替代方法相比） .

```
x = linspace(-15, 15, 4000)
f1 = (arctan(-x) + pi/2) / pi
f2 = (arctan(-x + 2) + pi/2) / pi

L4 = int(len(f2)/8)
sf2 = f2[L4:-L4]

c = correlate(f1-mean(f1), sf2-mean(f1), 'same')
print "peak correlation occurs at:", x[argmax(c)]  # -2.02925731433

plt.plot(x, c)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/whDJd.png)

另外，虽然，我不确定 xcorr 是这里最好的方法。如何将不同班次的 y 轴值之间的距离相加并取最小值，这样就可以避免零在哪里等所有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:47:33.167

互相关的最大值发现的是两个信号的乘积之和为最大值的偏移。有人会认为两个信号的互相关，一个是另一个信号的时间偏移，在偏移时会最大。虽然这对于无限信号来说是正确的，但 numpy 对两个信号进行零填充，所以对于两个同样长的信号，你只有一个`2**13`非零值的总和，用于零偏移，而更高的值来自更好的匹配两个函数是偏移的，但非零值较少。

如果您的信号在 +/- 无穷大时为 0，这不会太糟糕。事实上，我无法使用互相关提出任何合理的解决方案。

# android - 只想要数字键盘，但也想要一个字母键盘

> ID：15989390
> 
> 赞同：0
> 
> 时间：2013-04-13T15:25:19.883
> 
> 标签：android, android-edittext

我只想为我的以下代码显示带有“完成”键的数字键盘，以便我可以输入普通整数或十进制数。但相反，我得到了一个带有“下一步”键的数字键盘。当按下这个“下一步”键时，它会移动到我不想要的字母键盘。我希望它在插入值并按下 Next 或 Done 键后直接移动到活动屏幕。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:background="@drawable/black">

<RelativeLayout
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:orientation="vertical"
    android:paddingLeft="30dp"
    android:paddingRight="30dp"
    android:paddingTop="100dp">

    <LinearLayout
        android:id="@+id/layout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <EditText
            android:id="@+id/editText1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:hint="@string/select_from"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:inputType="number|numberSigned|numberDecimal" 
            android:layout_weight="1">  
        </EditText>

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:entries="@array/angle_List"
            android:gravity="center"
            android:layout_weight="1" >
        </Spinner>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/layout1"
        android:layout_marginTop="50dp">
        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:hint="@string/select_to"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/white"
            android:textIsSelectable="true"
            android:layout_weight="1" >
        </TextView>

        <Spinner
            android:id="@+id/spinner2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:entries="@array/angle_List"
            android:gravity="center"
            android:layout_weight="1">
        </Spinner>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/layout2"
        android:layout_marginTop="60dp">
        <Button
            android:text="@string/convert" 
            android:id="@+id/button1" 
            android:layout_height="fill_parent" 
            android:layout_width="fill_parent" 
            android:layout_weight="1"
            android:onClick="Convert">
        </Button>

        <Button
            android:id="@+id/button2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:onClick="clearVal"
            android:text="@string/clear">
        </Button>   
    </LinearLayout>

</RelativeLayout>
</ScrollView> 
```

提前致谢

更新-

我通过使用解决了我的问题

```
android:imeOptions="actionDone" 
```

在我的标签中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:36:39.550

尝试这个：

```
EditText edit = (EditText)findViewById(R.id.editText1);
edit.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        ((EditText)v).setInputType(InputType.TYPE_NUMBER_FLAG_SIGNED | InputType.TYPE_NUMBER_FLAG_DECIMAL);
        }
    }); 
```

# java - 其他 JVM 语言的 IntelliJ IDEA 插件开发

> ID：15989395
> 
> 赞同：5
> 
> 时间：2013-04-13T15:25:43.230
> 
> 标签：java, scala, clojure, intellij-idea, intellij-plugin

是否可以使用 Scala 和 Clojure 等其他 JVM 语言来开发 IntelliJ IDEA 插件？或者我们必须为此目的使用 Java 吗？我在网上找不到关于此的指针，因此在这里发布了问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T20:09:14.980

是的，这是完全可能的。

任何插件本质上都是 IDEA API 提供的几个扩展点的一组扩展。这些扩展是实现预定义接口的常规 java 类，并且这些类在清单中被引用。此外，您可以将任何库与插件捆绑在一起。因此，如果您选择的语言允许实现接口并找出生成的类名，那么没有什么能阻止您在其中编写插件。

# ms-access-2007 - 更新字段不能小于零的字段

> ID：15989396
> 
> 赞同：1
> 
> 时间：2013-04-13T15:25:46.857
> 
> 标签：ms-access-2007

我使用以下查询来更新我的字段

UPDATE tableName SET fieldName = fieldName-10 WHERE id=1;

这在我的情况下工作正常，但我希望如果结果小于零，则不应执行查询。

我试过这个
UPDATE tableName SET fieldname = fieldName-10 WHERE id=1 and fieldName>0;

但它在您的 UPDATE 语句中返回错误语法错误。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:30:06.617

你是这个意思吗？如果 pqty 是您表的字段。

```
UPDATE tableName SET fieldname = pqty-10 WHERE id=1 and pqty>10; 
```

# java - Java 对象实例创建问题

> ID：15989398
> 
> 赞同：0
> 
> 时间：2013-04-13T15:25:49.373
> 
> 标签：java, bluej

所以我今天整天都在努力创建一个名为“Sport”的类的实例。我已经设置好我的代码，所以我运行用户界面，然后运行一个构造函数，然后运行另一个构造函数，该构造函数从文本文件加载运动值。

问题是，我显然创建对象的方式是错误的。真的可以使用一些帮助。

```
public static void seperateValues(String sportDetail)
{

    String[] sportDetails = sportDetail.split(",");
    System.out.println("Adding new sport to the Sport collection");
    System.out.println(sportDetail);

    /*
    for(int i=0; i<sportDetails.length; i++) //just used for testing whether it was splitting correctly
    {
       System.out.println(sportDetails[i]); 
    }  */ 

    // name,usagefee,insurance,affiliationfees, then court numbers
    //Tennis,44,10,93,10,11,12,13,14,15,16
    int vlength;
    vlength = sportDetail.length();

    String[] sportDetailz;
    sportDetailz = new String[vlength];    
    sportDetailz[0] = sportDetails[0]; //name
    sportDetailz[1] = sportDetails[1]; //usage fees
    sportDetailz[2] = sportDetails[2]; //insurance
    sportDetailz[3] = sportDetails[3]; //afflcationfees

    String vSportObjectName;
    vSportObjectName = sportDetails[0];

    String sportinstance;
    sportinstance = sportDetails[0]; //this is the name of the sport which I'm hoping each loop around 
    //it will give a new name to
    Sport sportinstance = new Sport(sportDetails); 
   //System.out.println(Sport.this.name);

} 
```

错误信息：`variable sportinstance is already defined in method seperateValues(java.lang.String)`

[http://puu.sh/2zil9](http://puu.sh/2zil9)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:27:53.973

我猜你的问题是你首先声明`sportinstance`为`String`. 然后，您尝试再次将其定义为`Sport`.

只需删除以下行并重试（因为看起来它们实际上并未在其他任何地方使用）：

```
String sportinstance;
sportinstance = sportDetails[0]; 
```

另一种选择是简单地重命名您的任一实例`sportinstance`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:28:41.523

您试图定义`sportinstance`为两种不同的数据类型，而 Java 不允许这样做。`Sport`将定义的名称更改`sportinstance`为另一个变量名称或删除定义。

# c# - 带有私钥加密的公钥加密

> ID：15989399
> 
> 赞同：2
> 
> 时间：2013-04-13T15:26:01.607
> 
> 标签：c#, encryption, cryptography, key, public

我正在尝试在 C# 中实现以下内容：

我想要一个内部包含公钥加密例程的生成器。它可以采用提供给它的字节数组（通常由下面描述的客户端）并使用其私钥对其进行加密。

客户端有一个与生成器共享的公钥。它从生成器获取结果并使用公钥对其进行解密。它采用最初提供给生成器的字节数组并比较结果以查看它们是否对齐。这个想法是，如果它们匹配，它能够在一定程度上确定生成加密字节的人拥有私钥。它还能够验证特定的加密值是否与其提供的数据相对应。

我看到的大多数内置 C# 公钥加密库都希望将私钥与解密相关联（例如 RSACryptoServiceProvider）。我明白为什么，因为很多场景都涉及保护过程的解密端而不是加密。是否有任何 C# 库可以直接保护加密过程？我整个早上都在尝试看 Bouncy Castle，但即使是基本场景，我也很难让它发挥作用。该文档还有一些不足之处......

同样，我的主要目标是确保产生加密的任何东西都拥有私钥。客户端还必须确保生成器的结果与其提供的信息相对应。如果我遗漏了可能更好地符合可用库的替代方法，我会全神贯注:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T04:29:42.537

你写：

> 同样，我的主要目标是确保产生加密的任何东西都拥有私钥。

正如 CodesInChaos 所提到的，您可以正确使用签名来实现这一点。通常签名用于验证某些数据是由持有某个私钥的人产生的，但在这里您可以使用它来验证密钥持有者本人。如果您要求他签署您制作的东西，您可以使用签名检查来检查他是否拥有与您的公钥对应的私钥。

签名实际上是通过对一些数据进行单向散列，然后使用私钥加密这个散列来工作的。然后可以使用公钥来验证签名，方法是解密散列并将其与重新计算的数据散列值进行比较。只有拥有私钥的人才能制作散列的加密版本。你打算首先做的事情。

# c++ - C++ `using` 命令用于模板类中的类型别名

> ID：15989402
> 
> 赞同：4
> 
> 时间：2013-04-13T15:26:12.843
> 
> 标签：c++, templates, c++11, using

这看起来应该很简单，但我一直在玩，还没有找到我正在寻找的解决方案，所以这里是：

我有以下结构（当然为了说明目的而简化）：

```
template<typename T>
struct test
    {
    using L = std::list<T>;
    L::iterator a;
    }; 
```

现在，这会引发错误：

```
error: need 'typename' before 'test<T>::K::iterator' because 'test<T>::K' is a dependent scope 
```

到目前为止，我发现的两种修复方法都不太理想：

**1)**在使用 L 之前添加 typename：

```
template<typename T>
struct test
    {
    using L = std::list<T>;
    typename L::iterator a;
    }; 
```

如果可能的话，我宁愿避免这种额外的冗长。

**2）**添加另一个 using 语句以直接针对迭代器：

```
template<typename T>
struct test
    {
    using L = std::list<T>;
    using iter = typename L::iterator;
    iter a;
    }; 
```

但这需要对我想使用的每个迭代器都做同样的事情，如果我还希望访问`const_iterator`etc 等，我宁愿不必定义一堆 using 语句。

那么，有没有办法编写 using 语句，然后允许我编写：

```
 L::iterator a;
 L::const_iterator b;
 ... 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-13T15:31:29.433

`typename`必须在那里，但您可以使用几个别名**模板**`iter`实用程序来避免每次都定义新类型：

```
template<typename C>
using Iterator = typename C::iterator;

template<typename C>
using ConstIterator = typename C::const_iterator;

template<typename T>
struct test
{
    using L = std::list<T>;
    Iterator<L> i;
    ConstIterator<L> ci;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T15:28:30.587

不，没有。所有依赖类型必须以 开头`typename`，或通过以 开头`typename`。

`list_iter<T>` `using`现在，您可以在某处创建声明：

```
template<typename T>
using list_iter = typename std::list<T>::iterator; 
```

甚至是元迭代 using 语句：

```
template<template<typename>class container, typename T>
using iter = typename container<T>::iterator;
template<template<typename>class container, typename T>
using const_iter = typename container<T>::const_iterator; 
```

这会让你做：

```
struct test {
  using L = std::list<T>;
  iter<std::list,T> a;
}; 
```

我`typename`在. `using`_`struct`

顺便说一句，99% 的时间`std::list`是错误的容器。

# c# - 将图像和超链接控件添加到面板

> ID：15989405
> 
> 赞同：2
> 
> 时间：2013-04-13T15:26:32.920
> 
> 标签：c#, asp.net, sql, ado.net

我想分别在 Panel_video_1、Panel_video_2 和 Panel_video_link1、Panel_video_link2 中添加图像和超链接，但我的代码将所有图像和超链接带到最后一个面板。我想在单独的面板中添加这些控件。

后面的代码：

```
String sql1 ="SELECT  title, video_id ,image_path FROM up_video WHERE Video_types='Song Video' ";
adpt = new SqlDataAdapter(sql1, cn);
ds = new DataSet();
adpt.Fill(ds, "title");
var lastUploaded = ds.Tables["title"].AsEnumerable().OrderByDescending(r => r.Field<int>("video_id")).Take(3);
foreach (DataRow row in lastUploaded)
    {

        int videoID = row.Field<int>("video_id");
        Image img = new Image();
        img.ID = "image" + videoID;
        string title = row.Field<string>("title");
        img.ImageUrl = row.Field<string>("image_path");
        img.Height = 150;
        img.Width = 150;
        HyperLink hl = new HyperLink();
        hl.ID = "hyperlink" + videoID;
        string linktitle = row.Field<string>("title");
        hl.Text = linktitle;
        hl.NavigateUrl = "Downloadpage.aspx?name=" + linktitle;
        hl.ForeColor = System.Drawing.Color.White;
        Panel_video_1.Controls.Add(img);      
        Panel_Video_link1.Controls.Add(hl);
        Panel_video_2.Controls.Add(img);              
        Panel_video_link2.Controls.Add(hl);
        Panel_video_3.Controls.Add(img);               
        Panel_video_link3.Controls.Add(hl);
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:29:19.310

一个`image / hyperlink`对象只能添加到一个`panel`，当您添加到第二个时，它会从第一个中删除，依此类推。您必须创建三个图像对象并添加到三个面板。

# xml - 如何在 XSD 中使用 key 和 keyref？

> ID：15989412
> 
> 赞同：3
> 
> 时间：2013-04-13T15:27:04.800
> 
> 标签：xml, xsd

我有以下 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<library xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="library.xsd">
<!--<!DOCTYPE library SYSTEM "library.dtd">-->

<authors>
  <author aid="a1">Bill Evjen</author>
  <author aid="a2">Michael Kay</author>
  <author aid="a3">Kevin Goldberg</author>
  <author aid="a4">Michael Morrison</author>
</authors>

<books>

<book bookID="b001" author="a2">
  <title>XSLT 2.0 and XPath 2.0 Programmer's Reference</title>
  <stock>4</stock>
  <publisher>John Wiley</publisher>
  <year>2009</year>
  <use type="advanced" />
  <use type="reference" />
</book>

<book bookID="b002" author="a1 a2">
  <title>Professional XML (Programmer to Programmer) </title>
  <stock>2</stock>
  <publisher>John Wiley</publisher>
  <year>2007</year>
  <use type="professional" />
  <use type="advanced" />
  <use type="reference" />
</book>

<book bookID="b003" author="a3">
  <title>XML: Visual QuickStart Guide</title>
  <stock>3</stock>
  <publisher>Peachpit Press</publisher>
  <year>2008</year>
  <use type="introductory" />
  <use type="reference" />
</book>

<book bookID="b004" author="a4">
  <title>Sams Teach Yourself XML in 24 Hours</title>
  <stock>5</stock>
  <publisher>SAMS</publisher>
  <year>2005</year>
</book>

</books>

</library> 
```

如何在 xsd 中使用 key/keyref 以使 book 元素中的“author”属性包含 author 元素的“aid”属性的值/值列表？

我已经测试了我在 Visual Studio 中创建的以下 XSD，但我收到错误“Keyref 'books' 找不到引用的键或范围内唯一”。我不知道如何解决这个问题：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="library">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="authors">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="author" maxOccurs="unbounded" type="theAuthor"/>
            </xs:sequence>
          </xs:complexType>
          <xs:key name="uniqueAuthorID">
            <xs:selector xpath="author"/>
            <xs:field xpath="@aid"/>
          </xs:key>

        </xs:element>
        <xs:element name="books">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="book" type="theBook" maxOccurs="unbounded"/>
            </xs:sequence>
          </xs:complexType>
          <xs:unique name="uniqueBookID">
            <xs:selector xpath="book"/>
            <xs:field xpath="@bookID"/>
          </xs:unique>
          <xs:keyref refer="uniqueAuthorID" name="authorKeyRef">
            <xs:selector xpath="book"></xs:selector>
            <xs:field xpath="@author"></xs:field>
          </xs:keyref>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:complexType name="theAuthor">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="aid" type="xs:string">
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <xs:complexType name="theBook">
    <xs:sequence>
      <xs:element name="title" type="xs:string"/>
      <xs:element name="stock" type="xs:integer"/>
      <xs:element name="publisher" type="xs:string"/>
      <xs:element name="year" type="xs:string"/>
      <xs:element name="use" minOccurs="0" maxOccurs="unbounded">
        <xs:complexType>
          <xs:attribute name="type" type="useType" default="advanced"/>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="bookID" type="xs:string"/>
    <xs:attribute name="author" type="xs:string"/>
  </xs:complexType>

  <xs:simpleType name="useType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="advanced" />
      <xs:enumeration value="reference" />
      <xs:enumeration value="professional" />
      <xs:enumeration value="introductory" />
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:43:19.023

问题在于您的约束声明的布局/范围。让我们看一下下面的图表：

![在此处输入图像描述](https://i.stack.imgur.com/dRHqv.png)

就像在“大括号”编程世界 (Java/C#) 中一样，您的元素充当自动限定声明名称的“块”。在这种情况下，您`uniqueAuthorID`对作者及以下人员可见，这就是为什么对下定义的内容不可见的原因`books`。

所以你需要做的是移动和修改`uniqueAuthorID`under库。

![在此处输入图像描述](https://i.stack.imgur.com/8hHt0.png)

这应该可以解决您的 XSD 问题。

您的 XML 不会像您期望的那样验证：

```
The key sequence 'a1 a2' in Keyref fails to refer to some key. 
```

即使您将作者正确定义为列表约束的简单类型，keyref 机制也不会在其组件值中破坏它。为了使其工作，您必须将作者属性转换为重复元素，并让 keyref 检查**每个**元素（以防万一，属性不能重复）。

# css - Django 静态文件链接

> ID：15989416
> 
> 赞同：0
> 
> 时间：2013-04-13T15:27:40.317
> 
> 标签：css, django, django-staticfiles, static-files

感谢您对此进行调查，因为它现在让我很紧张：）

我无法获得 style.css （或任何静态文件都无法使用！），我已经四处搜索，到目前为止没有一个解决方案有效。

我的 urls.py：

```
 from django.conf.urls import patterns, include, url
 from django.contrib.staticfiles.urls import staticfiles_urlpatterns
 from django.conf import settings

 urlpatterns = patterns('',
   url(r'^$', 'ports.views.home', name='home'),
 )
 urlpatterns += staticfiles_urlpatterns()

 if settings.DEBUG:
    urlpatterns += patterns('django.contrib.staticfiles.views',
    url(r'^static/(?P<path>.*)$', 'serve'),
) 
```

我的 base.html 我加载静态的地方：

```
{% load staticfiles %}

<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="static/css/style.css" type="text/css" />
... 
```

我的 settings.py 引用了静态目录：

```
STATIC_URL = '/static/' 
```

我不明白我做错了什么（或者事实上为什么服务这些静态数据必须如此尴尬）。湖人方面的任何帮助将不胜感激！

谢谢，布拉吉布拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:39:33.857

在你的服务器上，你可能需要试试这个

```
python manage.py collectstatic -l 
```

建立`-l`一个符号链接而不是复制。这可以防止同一文件的两个副本并节省一些空间，但也意味着如果重命名原始文件，则必须重新建立链接。

有关 collectstatic 命令的更多信息在[这里](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)。

不要忘记设置[`STATIC_ROOT`](https://docs.djangoproject.com/en/dev/ref/settings/#static-root)。

仅供参考，这是我`settings.py`的那部分：

```
# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = os.path.join(os.path.dirname(__file__), '..', 'static').replace('\\', '/')

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/' 
```

这适用于 Django 1.4+，其中 位于`settings.py`（例如）下并且与文件夹`mysite/mysite/`不在同一级别。`static`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-22T05:08:19.317

我的问题是在块内容之外添加 css。将它移动到块内容中解决了这个问题。

```
{% extends "home/base.html" %}
{% load static %}
<!--<link rel="stylesheet" href="{% static 'blog/main.css' %}">-->
{% block content %}
<link rel="stylesheet" href="{% static 'blog/main.css' %}">

     --some code--

{% endblock content% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:23:05.493

Try:

```
{% load static %}
<link rel="stylesheet" href="{% static 'css/style.css' %}" type="text/css" /> 
```

# objective-c - 从 NSString 数据填充 NSImageView 框

> ID：15989432
> 
> 赞同：0
> 
> 时间：2013-04-13T15:29:16.653
> 
> 标签：objective-c, image, cocoa

我对Objective C非常陌生，我已经在Google上搜索了几个小时试图找到解决方案。

我有一个 NSString 看起来像

```
273350/364D4D002A00041EB8F1E0CEF1E0CCF1E0CCF1E0CCF1E0CCF etc etc 
```

它指的是 TIFF 图像（我猜是某种 RAW 字符串格式），我想用数据填充 NSImageView。

这是我到目前为止所尝试的：

```
NSData *picdata = [NSData dataWithBytes:[albumArtStr UTF8String] length:[albumArtStr length]];
NSImage *myPicture = [[NSImage alloc] initWithData:picdata];
[_albumArtCell setImage:myPicture]; 
```

其中“albumArtCell”是 NSImageView

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:36:41.000

我相信问题是由于`[albumArtStr length]`返回“unicode character”的数量，而不是“bytes”的数量。

因此，您的 NSData 可能没有设置为正确的大小，因此没有正确的格式来正确解码 UIImage。

试试这个，而不是从 NSString 实例创建一个 NSData ：

```
NSData* picData = [albumArtStr dataUsingEncoding: NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:21:37.013

该数据看起来像十六进制编码的图像，前面有一个长度，而不是未编码的 TIFF，它是一种标记的二进制格式。也许您需要在斜杠之前去除数字并将字符串的其余部分从十六进制数字解码为 NSData，然后`[[NSImage alloc] initWithData]`使用该确定的数据进行调用。

您需要先将其解码为二进制，然后再将其发送给它，`NSImage`因为它只理解 TIFF 的原始二进制形式。

# php - php - 如何显示在选定日期创建的目录中的所有图像

> ID：15989442
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:30:14.967
> 
> 标签：php, html

我有一台相机，每秒上传一张图片到我的 ftp 服务器。（网站）所有这些图片都存储在一个目录中。

我想要的是展示在一个特定日期拍摄的所有照片。

我有一个显示目录中所有图片的脚本：

```
<?php 
$dirname = "./";
$images = glob($dirname."*.jpg");
foreach($images as $image) {
echo '<img src="'.$image.'" /><br />';
}
?> 
```

当我打开 filezilla 时记录创建文件的日期，但我不知道如何将该信息输入 php.ini。

我想要做的是一个输入脚本，我可以在其中选择：

```
[Year: ****] [mo: **] [Day: **] 
```

然后我会得到一份该特定日期拍摄的所有照片的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:36:35.243

您可以使用[filemtime](http://cz2.php.net/manual/en/function.filemtime.php)获取文件修改时间，

`$filename = 'somefile.txt';`

`if (file_exists($filename)) { echo "$filename was last modified: " . date ("F d Y H:i:s.", filemtime($filename)); }`

# actionscript-3 - 保存和加载状态 AS3 + Adob e Air

> ID：15989445
> 
> 赞同：1
> 
> 时间：2013-04-13T15:30:33.053
> 
> 标签：actionscript-3, air, save

如何使用 Adob​​e Air 保存和加载？这一直是我需要知道的。我以前问过这个问题，但我得到了使用什么，但不知道如何使用它。假设我在第 59 帧保存状态，我关闭并结束应用程序。那么当我点击加载时，我如何让它回到第 59 帧？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:03:59.813

1.始终将当前帧写入共享对象或文件

```
 ex. onEnterFrame(ev:Event){ //write current frame somewhere } 
```

2.当应用程序启动时，首先检查文件或共享对象的最后保存的帧号。如果默认没有找到它是第一帧，否则 gotoAndPlay(frame_saved);

抱歉，在这个论坛上没有人会为您编写应用程序。您必须更多地工作才能完成解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:51:23.413

假设您只有根时间线，并且不重复第一帧，那么在应用程序的第一帧上使用以下代码：

```
//the shared object to store the state
var stateSO:SharedObject = SharedObject.getLocal("saveState");

if (stateSO.size > 0 && stateSO.data.lastFrame && stateSO.data.lastFrame != undefined) {
    //the shared object exists and has a valid value, so lets skip to that frame
    gotoAndPlay(stateSO.data.lastFrame);
}

//this function runs every frame
function saveState(e:Event = null):void {       
    stateSO.data.lastFrame = this.currentFrame; //assign the current frame number to the shared object
    stateSO.flush(); //save the cookie (shared object)
}

addEventListener(Event.ENTER_FRAME, saveState); 
```

# jquery - Jquery $.post 更改值

> ID：15989446
> 
> 赞同：2
> 
> 时间：2013-04-13T15:30:42.203
> 
> 标签：jquery

所以基本上我有这个代码：

```
for (i=1;i<=7;i++)
            for (j=1;j<=10;j++)
            {
                    $.post('../core/occupied.php',{table : db , row : i , seat : j},
                    function(result){
                        if (result == "green")
                        {
                            var color_id = "rl"+i+j;
                            alert(color_id);
                            //$("#rl"+i+j).css({"background":"rgba(153,153,153,1)","color":"white"});   
                        }
                    });
            } 
```

此代码在 for 循环中执行 70 次，并根据情况从 中返回 3 种颜色`occupied.php`，之后我想更改由 i 和 j 形成的 id 的颜色，但在函数获取和`result`值更改后没有任何逻辑......例如，如果然后我想改变颜色，但它们变成了其他一些值......我无法解释为什么......有人可以帮助我吗？`i``j``i=1``j=2``id = #rl12`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:48:16.427

移动你`post`的新功能

```
function postThis(i,j){
  $.post('../core/occupied.php',{table : db , row : i , seat : j},
            function(result){
                if (result == "green")
                {
                    var color_id = "rl"+i+""+j;
                    alert(color_id);
                   //$("#rl"+i+j).css({"background":"rgba(153,153,153,1)","color":"white"});   
                }
            });
} 
```

现在以这种方式调用您的函数

```
for (i=1;i<=7;i++){
    for (j=1;j<=10;j++)
    {
           postThis(i,j);      
    }
} 
```

# networking - 无线 MAC 地址模式

> ID：15989448
> 
> 赞同：0
> 
> 时间：2013-04-13T15:30:52.173
> 
> 标签：networking, wireless, mac-address

我正在创建一个使用半随机数在桌子上滚动的应用程序。随机数是从无线网络 MAC 地址生成的，因此它们应该在多个设备之间保持一致（即，如果我使用 2 个不同的设备访问无线网络，我应该生成相同的随机数）。

我的问题是，是否存在无线网络 MAC 倾向于的任何模式，这会影响我的号码生成，或者它们是否完全随机。这很重要，因为它会影响我分配给表值的概率。

这是我从 Wikipedia 中提取的图像，我无法理解。

![来自维基百科的 MAC 地址组成](https://i.stack.imgur.com/rJKBE.png)

那么根据这张图，这是否意味着 MAC 地址的前 3 个字节在路由器品牌中是唯一的？如果我遇到两个 D-Link 路由器，那会是一样的吗？或者如果是两个相同型号的D-Link路由器会是一样的吗？

然后最后 3 个字节只是随机生成的数字吗？感谢任何花时间帮助我解决这个问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:30:26.860

清除 0x020000 位（“全局唯一”）的 OUI 部分是来自注册表的分配编号。每个无线设备制造商都至少申请其中一个，并在他们制造的产品中使用它。没有要求制造商只有一个，或者他们根据设备的最终生产者使用不同的。因此，例如，许多戴尔笔记本电脑的 MAC 地址以英特尔 OUI 开头，因为笔记本电脑是使用英特尔无线芯片构建的。

对于这些 MAC 地址，NIC 部分没有指定值，但通常在制造过程中从预先划分的块中以单调递增的方式分配。因此，从同一条装配线上推出的两个英特尔无线芯片的编号可能会被 1 隔开。

设置了 0x020000 位（“本地管理”）的 OUI 部件可以设置任何其他位，这完全取决于它所连接的系统将地址设置为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:47:57.490

是的，MAC 地址的前 3 个字节通常根本不是随机的，它们被分配给特定的公司。（有些公司有不止一项任务）。最后 3 个字节也不是“随机的”，因为有时它们是按顺序分配的。除非它是一个*非常*流行的路由器，否则高位可能是恒定的。

此外，大多数卡上的 MAC 地址都可以更改。并且有不同类型的 MAC 地址，例如“链路本地”和“组播”。

如果您想要随机性，请使用 /dev/random 或您的操作系统提供的任何内容。

# java - java代码中的错误，用于在Linux上访问带有瑞典字符的文件

> ID：15989450
> 
> 赞同：2
> 
> 时间：2013-04-13T15:31:15.487
> 
> 标签：java, unix, file-io, locale, opensuse

我在 unix 中编写了以下 java 代码来访问文件名中包含瑞典字符的文件。

```
System.out.println(System.getProperty("file.encoding"));
System.out.println(System.getProperty("sun.jnu.encoding"));

String filePath = "/tmp/newöäåå.txt";
System.out.println("File Path" + filePath);

File file = new File(filePath);
try {
    if(file.exists())
        System.out.println("length: " + file.length());
    else{
        System.out.println("file not found");
    }
} catch (Exception e) {
    System.out.println("inside exception");
} 
```

输出 ：

```
UTF-8
UTF-8
File Path /tmp/newÃ¶Ã¤Ã¥Ã¥.txt
file not found 
```

我只通过 unix 创建了文件。你能帮我理解一定出了什么问题吗？

操作系统是 Open SU​​SE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:09:31.493

如果您将 java 文件保存为 UTF-8 - 它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:59:03.090

我认为问题可能出在代码本身。**.java 文件不以 UTF-8 编码保存**。也许尝试从 UTF-8 的外部文件中读取文件名，或者以其他方式表示文件名，或者只是确保 .java 文件以 UTF-8 编码保存。

# c++ - 使用win32 API写入串行端口-端口不会打开，直到我在其他地方打开它

> ID：15989456
> 
> 赞同：1
> 
> 时间：2013-04-13T15:31:29.523
> 
> 标签：c++, winapi, serial-port

我尝试使用 WIN32 API 在 C++ 中写入串行端口，WriteFile 不返回 ERROR_IO_PENDING 但没有任何反应，但是在我使用另一个程序（在 C# 中）写入端口后，c++ 程序可以工作，直到我重新启动 Windows 7，在这里是写代码：

```
static DCB dcb = {0};
static HANDLE hComm;
static int _tmain(int argc, _TCHAR* argv[])
{
    hComm = CreateFile(
    L"\\\\.\\COM3",
    GENERIC_WRITE | GENERIC_READ,
    0,
    NULL,
    OPEN_EXISTING,
    NULL,   
    NULL
    );

if (hComm == INVALID_HANDLE_VALUE) // error opening port; abort
    printf_s("INVALID_HANDLE_VALUE\n");

if (GetCommState(hComm, &dcb))// DCB is ready for use.
{
    dcb.BaudRate = CBR_19200; //19200 Baud
    dcb.ByteSize = 8; //8 data bits
    dcb.Parity = NOPARITY; //no parity
    dcb.StopBits = ONESTOPBIT; //1 stop
    printf_s("set UP DCB\n");
}
else // Error getting current DCB settings
    printf_s("ERROR getting \n"+GetLastError());

osWrite.hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);

    WriteABuffer("!serialCMDtoSend\r",sizeof("!serialCMDtoSend\r");
}
static BOOL WriteABuffer(char * lpBuf, DWORD dwToWrite)
{
        // Issue write.
        if (!WriteFile(hComm, lpBuf, dwToWrite, &dwWritten, &osWrite)) 
        {
            if (GetLastError() != ERROR_IO_PENDING) { // WriteFile failed, but it isn't delayed. Report error and abort.
                fRes = FALSE;
            }
            else {
                // Write is pending.
                if (!GetOverlappedResult(hComm, &osWrite, &dwWritten, TRUE))
                    fRes = FALSE;
                else
                    fRes = TRUE;// Write operation completed successfully.
            }
        }
        else
            fRes = TRUE;        // WriteFile completed immediately.
    return fRes;
} 
```

任何人都可以看到我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:30:43.157

这是偶然的。您忘记在 CreateFile 调用中指定 FILE_FLAG_OVERLAPPED，因此您永远不会得到重叠的 I/O。您可能不知道这一点，因为您的错误处理被破坏了，当 GetLastError 不返回 ERROR_IO_PENDING 时，您不知道错误代码是什么样的。当 WriteFile 不必阻塞时，它会意外工作，因为数据适合驱动程序的传输缓冲区。正如 Ben 解释的那样，对握手设置取模。

使用重叠 I/O 并立即调用 GetOverlappedResult(TRUE) 毫无意义。您不妨使用非重叠 I/O，这样更容易上手。仅当您有其他有用的事情要做并且可以调用 WaitForMultipleObjects() 来检查写入是否完成时才使用它。这在编写的情况下通常很难处理，编写异步代码并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:36:25.220

有时从干净的 DCB 开始比使用`GetCommState`. 例如，您没有关闭流控制，因此行为取决于最后一个程序如何离开它。

您肯定需要正确设置流控制字段：

```
fOutxCtsFlow
fOutxDsrFlow
fDtrControl
fDsrSensitivity
fOutX
fInX
fRtsControl 
```

一般来说，`GetCommState`如果您不希望您的程序依赖于先前的设置，我建议不要使用。相反，从零开始：

```
DCB dcb = { sizeof dcb };
dcb.fBinary = TRUE;
dcb.BaudRate = 19200; //19200 Baud
dcb.ByteSize = 8; //8 data bits
dcb.Parity = NOPARITY; //no parity
dcb.StopBits = ONESTOPBIT; //1 stop 
```

除了您对先前设置的依赖之外，`GetCommState`由于您没有设置而失败`DCBlength`（文档清楚地说明这必须由您设置，调用者。 `GetCommState`如果不先检查您提供的大小，就无法填充缓冲区。）。

# xamarin.ios - 如何将 Monotouch 对话框添加到 FlyoutNaviagtionController

> ID：15989458
> 
> 赞同：1
> 
> 时间：2013-04-13T15:31:31.337
> 
> 标签：xamarin.ios, xamarin

我是 monotouch 的菜鸟，无法将表格视图添加到 flyoutnavigation 控制器。有人有例子吗？

** 更新

我的设置有点复杂，经过多次黑客攻击，我设法使用以下配置在我的故事板上显示静态表格单元格。

```
tab bar controller
|
-tab 1
|
-tab 2 - nav controller
         |
         uiview controller A -  flyout nav A --> uiview controller A1...A3
         |
         uiview controller B -  flyout nav B --> tableview controller B1 (static cells) 
```

我在弹出导航设置中将 tableview 控制器转换为 uiview 控制器，从而允许 tableviewcontroller 正确显示并通过 sergues 导航到主 uiview 控制器。例如在弹出设置中：

```
NavigationRoot = new RootElement ("FlyoutNavigationB") {
    new Section ("Pages") {
        new StringElement ("A Table View with static cells")
    }
},

ViewControllers = new [] {
  TableViewControllerB1 as UIViewController,
}, 
```

这个 hack 似乎有效，但更干净的解决方案受到了热烈的邀请（因为我只有 2 周的 monotouch 开发经验）并且感到有点难过，我有 uiview 控制器独立坐在情节提要上，无法通过弹出导航进行 sergues。它几乎表现得像老式的 xib 开发。

无论如何，我现在正在尝试将此绑定到单点触控对话框，但尚不确定如何。欢迎评论帮助我的学习：P

***更新

好的，我想我是通过创建一个子类的 dialogviewcontroller 来实现它的。然后将此子类实例传递给 flyoutnavigationcontroller 中的 ViewControllers 数组，如下所示：

```
public partial class MyDvcController : DialogViewController
{
    public MyDvcController (UINavigationController nav): base (UITableViewStyle.Grouped, null)
    {

        navigation = nav;
        Root = new RootElement ("Demos"){
            new Section ("Element API"){
                new StringElement ("iPhone Settings Sample", DemoElementApi),

            }
        };
    }
} 
```

在我调用 flyoutnav 控制器中：

```
// Supply view controllers corresponding to menu items:
            ViewControllers = new [] {
                new UIViewController { View = new UILabel { Text = "Address txt" }, Title = "Address" },
                new MyDvcController(NavigationController) as UIViewController                                                                                                    
            } 
```

我的愿望清单几乎完成了......现在如何添加自定义 upickerviews 以及连接到 inputviews 的可爱透明输入附件视图，以便它们通过调用单点触控对话框元素自动显示......嗯......另一个任务等待着......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:13:16.327

您是否要在弹出窗口中推送第二个列表？我也无法让它工作。

我通过修改[源代码](https://github.com/Clancey/FlyoutNavigation)并重做选择列表的设置方式使其工作——但这​​些更改在我的机器上工作。当我有机会时，我会尝试推动这些。

# iphone - 第二个故事板没有插座

> ID：15989461
> 
> 赞同：0
> 
> 时间：2013-04-13T15:31:40.053
> 
> 标签：iphone, objective-c, xcode

我在我的应用程序中为 iPhone 5 设置了第二个故事板。我研究了约束和自动布局等，但找不到适用于我的应用程序的可行解决方案。问题是我的背景图像与我拥有的很多 UILabel 相关联，因此当调整到 iPhone 5 的大小时，尽管图像已展开，但标签位于错误的位置。约束将它们固定到一个位置，但根据背景图像，它不再处于正确的位置。

因此，我现在已经设置了另一个故事板，并且我想通过按钮等连接到我在原始故事板中的插座，但是在新的故事板中没有可供选择的插座。如何添加它们/在哪里可以找到它们？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:02:28.150

1）如果用户界面不复杂并且具有自动旋转布局，我不建议使用自动布局。

您可以禁用 Autolayout 并使用标准 Autoresizing 蒙版

![在此处输入图像描述](https://i.stack.imgur.com/em6HX.png)

2) 只有在 Interface Builder 中将 Custom Class 设置为 ViewController 时，您才能访问 outlet。

采用故事板 - 最佳指南 [http://developer.apple.com/itunes/?destination=adc.apple.com.16351707109](http://developer.apple.com/itunes/?destination=adc.apple.com.16351707109)

# c# - 是否有适用于具有 WCF 服务和数据库的 3 层 Web 应用程序的 Visual Studio Express 模板项目？

> ID：15989462
> 
> 赞同：0
> 
> 时间：2013-04-13T15:31:55.463
> 
> 标签：c#, .net, wcf, asp.net-mvc-4, visual-studio-2012

我是 .Net 开发的新手，我想使用 WCF Web 服务创建一个 3 层 C# Web 应用程序（可能是前端的 MVC）来更新数据库。是否有适用于此类应用程序的 Visual Studio Express 2012 模板项目？它似乎是一种常见的架构，我很惊讶我找不到模板或示例，尽管我找到了几个可以完成其中一部分的示例。由于我是新手，不知道要搜索什么，我只是想确保我没有忽略一些可以加快我努力的事情。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:21:48.007

You need to create your solution to have two project to make this work. There isn't a default project that is automatically hooked up for this scenario. First you would want to select a new project >> ASP.NET MVC X Application. Once the project is created you can right click on the solution and and a new project. Add a new WCF service application. This way you have two projects in your solution. One for the front end and one for the middle tier. You can use the entity framework alongside your middle tier project to create an easy to use data model.

# meteor - 访问 HTTP GET JSON 对象

> ID：15989463
> 
> 赞同：2
> 
> 时间：2013-04-13T15:31:57.070
> 
> 标签：meteor

Meteor 的 HTTP 方法让我大吃一惊。

作为测试，我正在使用服务器上的方法访问 Twitter 的 api，如下所示：

```
"twitter_user": () ->
   Meteor.http.get("https://api.twitter.com/1/users/show.json", {screen_name:"ppedrazzi"}) 
```

在客户端，我调用方法如下：

```
 twitterUser = Meteor.call("twitter_user") 
```

尝试访问 twitterUser 对象时，它显示为未定义。我期待能够使用 twitterUser.data.id 或 twitterUser.data.name 从生成的 JSON 中获取字段，但没有运气（因为该对象不存在）。

顺便说一句，如果我将 URL 放到浏览器中，我会在页面上得到一个 JSON 对象，请参见此处的示例： [https ://api.twitter.com/1/users/show.json?screen_name=ppedrazzi](https://api.twitter.com/1/users/show.json?screen_name=ppedrazzi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:37:10.843

您应该对您的方法使用异步调用：

```
Meteor.call "twitter_user", (error, result) -> 
  twitterUser = result 
```

[来自文档](http://docs.meteor.com/#meteor_call)的引用：

> 在客户端，如果你不传递回调并且你不在存根中，调用将返回 undefined，你将无法获取方法的返回值。那是因为客户端没有纤程，所以实际上没有任何方法可以阻止方法的远程执行。

请注意，在这种特殊情况下，您可以`Meteor.http.get`直接在客户端上运行：

```
Meteor.http.get(
   "https://api.twitter.com/1/users/show.json", 
   screen_name:"ppedrazzi",
   (error, result) -> twitterUser = result 
) 
```

# python - 冒泡排序不起作用

> ID：15989469
> 
> 赞同：0
> 
> 时间：2013-04-13T15:32:27.993
> 
> 标签：python, bubble-sort

这是我在 python 中的冒泡排序，我似乎找不到问题所在。

我希望开始创建更复杂的排序算法，但我必须首先了解为什么我的冒泡排序不起作用。

如果程序没有正确排序，则插入断言以使程序崩溃（每次我运行它时都会发生这种情况（包括调试）

```
N=5000
#function to sort a list
def bubble_sort(numbers):
    to_go = len(list_n)
    while to_go != 0:
        newn = 0
        for i in range(1, to_go):
            if list_n[i-1] > list_n[i]:
                swap(i-1, i)
                newn = i
        to_go = newn
def swap(item_1, item_2):
    list_n[item_1], list_n[item_2] = list_n[item_2], list_n[item_1]

list_n = []
for e in range(0,N):
    list_n.append(random.randint(1,N-1))
copy = list_n[:]
#time the sorting routine
t1 = time.clock()
bubble_sort(copy)
t2 = time.clock()
#make sure the list was sorted correctly
list_n.sort()
assert(list_n==copy) 
#print how long the function took to do the sort
print 'mySort took', t2-t1, 'seconds.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:43:27.117

问题基本上是您传递列表以对函数进行排序`numbers`，`bubble_sort`但在函数内部，您从不使用该参数。

您应该替换所有出现的`list_n`in `numbers`，`bubble_sort`并将其作为附加参数传递给`swap`函数，这样您实际上是在交换您正在处理的列表中的数字而不是全局变量`list_n`。

# macos - 如何在 Mac OSX 的 Mountain Lion 上使用 x11 作为 matplotlib 的后端？

> ID：15989471
> 
> 赞同：0
> 
> 时间：2013-04-13T15:32:39.023
> 
> 标签：macos, matplotlib, x11, backend

我曾经在我的 macbook 上使用 TkAgg 作为从 macports 安装的 matplotlib 的后端。有一段时间，绘图窗口在 X11 中启动。在最新的 macports 更新之后，它停止使用 x11，而是现在将使用独立的 python 窗口。

我想知道是否有办法指示 matplotlib 在 x11 中打开绘图窗口？谢谢！

兰迪斌林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:56:48.203

如果您使用的是 MacPorts Python 和 Tk 安装，您现在可能已经安装`quartz`了 Tk 的 MacPorts 变体，它是基于 Cocoa 的原生 Tk，现在是默认变体。如果你想使用旧的基于 X11 的 Tk，你可以通过重新安装 Tk 来强制使用它：

```
sudo port upgrade --enforce-variants tk -quartz 
```

# php - 添加链接时出现语法错误

> ID：15989472
> 
> 赞同：-2
> 
> 时间：2013-04-13T15:32:39.430
> 
> 标签：php

我尝试修复它，但仍然收到以下 Parse 错误：

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE,
 expecting T_STRING or T_VARIABLE or T_NUM_STRING in 
```

这是第 13 行：

```
<?php
  if ($fruitdata['fruit'] == "") {
    print "N/A <a href="./add.php?id=<?php print $fruitdata['id']; ?>">Edit</a>"; }
  else {
    print $fruitdata['fruit'];
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:33:28.340

转义双引号并将字符串连接到变量：

```
<td><?php if ($fruitdata['fruit'] == "") { print "N/A <a href=\"./add.php?id=". $fruitdata['id']."\">Edit</a>"; } else { print $fruitdata['fruit']; } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:34:45.863

多个语法错误。这应该让你直截了当：

```
<td><?php
if ($fruitdata['fruit'] == "") {
    print 'N/A <a href=./add.php?id='.$fruitdata['id'].'">Edit</a>"';
}else{
    print $fruitdata['fruit'];
}?> 
```

# google-apps-script - 插入评论 - Google 电子表格

> ID：15989475
> 
> 赞同：0
> 
> 时间：2013-04-13T15:32:56.793
> 
> 标签：google-apps-script

一旦脚本运行，我希望在某个单元格中插入注释。我正在使用的脚本是插入一个日历条目 - 但是我只希望它执行一次。为此，我将获取脚本以检查是否在单元格中输入了注释/注释。从理论上讲，这应该很容易，但我无法让它选择正确的单元格......有人可以帮忙吗？我的代码如下。

我在评论后进入与 var = date 对应的单元格。如果有人能给我指点，我真的很感激！

干杯，皮特

```
 function CalendarInputIVNShortlist() {`

  `var sheet = SpreadsheetApp.getActiveSheet();

   var startRow = 2;  // First row of data to process
  var numRows = 2;   // Number of rows to process
  var dataRange = sheet.getRange(startRow, 1, numRows, 26); //What data will be used
  var data = dataRange.getValues();
  var cal = CalendarApp.getDefaultCalendar(); //Gets the correct calendar

    for (i in data) {
      var row = data[i];
      var title = row[1];  // Column with Title
      var desc = row[15];       // Column with Next Steps
      var date = row[5];   //Column with Date
       var invite = row[2] //Column with PDC Chairs & IVN Owner
         var sent = row[12] //Check Sent
         sheet.getRange(data[i], 5).setNote(Sent)

    cal.createAllDayEvent(title, new Date(date), {description:desc,guests:invite});
var Comment = dataRange(date).setNote("Inputted") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:42:41.713

这里有一个问题：

```
sheet.getRange(data[i], 5) 
```

您使用的第一个参数`data[i]`, 是一个数组（您之前已经将其等同于`row`几行）。`getRange()`您正在寻找的方法差异需要两个数字作为参数。如果您的意图是在循环中当前引用的行的第 5 列添加注释，那么您需要：

```
sheet.getRange(i+startRow, 5).setNote(sent); 
```

该特定行的另一个问题是`Sent`; 我假设您想引用您设置为等于的变量`row[12]`，就在上面，它的名称中有一个小写字母“s”。

接下来，这里有问题：

```
var Comment = dataRange(date).setNote("Inputted") 
```

是什么`dataRange()`？除非它是脚本中的另一个函数，它返回与 的内容相关的 Range 对象，否则`row[5]`我猜你的本意是：

```
sheet.getRange(i+startRow, 5).setNote("Inputted"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:36:56.817

`sheet.getRange()`需要 2 个整数作为参数：行号和列号。

在您的代码中，您试图将数组 (data[i]) 分配为 row nuber ......这是行不通的。

由于它从 startRow 开始计数并且数组索引为 0，我建议您尝试这样：

```
sheet.getRange(startRow+i, 5).setNote(Sent) 
```

# html - 影响 EXIF 数据并因此影响 SEO 的图像优化

> ID：15989476
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:33:07.323
> 
> 标签：html, seo

我听说图像优化软件会删除 EXIF 数据，这可能会影响 SEO，因为据我所知，EXIF 数据在某种程度上与 SEO 排名有关。这是真的？

（[来源](http://www.pitstopmedia.com/sem/img-tag-image-seo)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:38:20.777

您的问题可以分为以下两个问题。

## **搜索引擎是否使用 EXIF**

主要问题是搜索引擎是否真的使用 EXIF 数据。有观点认为，一些网站会读取 EXIF 数据并在 DB 中使用这些数据等。还表明 google 图像搜索会滥用 EXIF 数据：

*   [http://blog.pizzaseo.com/exif-tags-impact-on-google/](http://blog.pizzaseo.com/exif-tags-impact-on-google/)
*   [http://www.petapixel.com/2011/07/25/google-adds-exif-data-to-image-search/](http://www.petapixel.com/2011/07/25/google-adds-exif-data-to-image-search/)

然而，也有观点认为 EXIF（谷歌图片搜索除外）并没有增加太多其他内容：

*   [https://webmasters.stackexchange.com/questions/8174/any-seo-sense-in-embedding-exif-metadata-on-web-site-images](https://webmasters.stackexchange.com/questions/8174/any-seo-sense-in-embedding-exif-metadata-on-web-site-images)

*所以我想说，如果它发生变化或在其他任何地方使用，则需要**密切关注。***

## **图像编辑器/优化器是否会删除 EXIF 数据**

大多数由数码摄像机拍摄的照片并不包含所有高度相关的 exif 信息。

如果使用 google picasa（或其他）等应用程序添加信息（如评论/描述、gps 坐标等），则使用图像编辑器并重新保存/导出图像可能会导致 EXIF 数据不被写入.

这一切都归结为图像优化器/编辑器是否支持 EXIF 标签以及它是否会保存它们。

顺便说一句：JPEG 2000、PNG 或 GIF 不支持 EXIF。

请参阅：[http](http://en.wikipedia.org/wiki/Exchangeable_image_file_format) ://en.wikipedia.org/wiki/Exchangeable_image_file_format以获取与规范相关的信息。

# mysql - 从两个表触发乘法

> ID：15989477
> 
> 赞同：1
> 
> 时间：2013-04-13T15:33:13.550
> 
> 标签：mysql, sql, triggers, sql-update

我需要创建一个触发器，将两个表中的两个字段相乘，但我不知道该怎么做，所以让我们看看你是否可以帮助我。

两张桌子，

产品（产品名称、价格）

订单（product_name（外键），units_ordered）

我需要在表上添加另一个字段，即从产品中乘以价格的订单和从订单中乘以单位的订单，所以：total_price = price（来自产品）X units_ordered（来自订单）

在此先感谢，并为我糟糕的英语感到抱歉。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:41:31.713

你根本不需要触发器。而且您不需要为总价格添加另一列，因为它已经是多余的。

如果您想要他们的总价格，只需在记录投影期间进行。例子

```
SELECT  a.Product_Name,
        a.Price,
        b.units_ordered,
        a.Price * b.units_ordered AS TotalPrice 
FROM    Products a
        INNER JOIN Orders b
            ON a.Product_name = b.Product_name 
```

或者你可以创建一个`VIEW`你的`SELECT`声明。例子，

```
CREATE VIEW ProductOrder
AS
SELECT  a.Product_Name,
        a.Price,
        b.units_ordered,
        a.Price * b.units_ordered AS TotalPrice 
FROM    Products a
        INNER JOIN Orders b
            ON a.Product_name = b.Product_name 
```

并从视图中选择，

```
SELECT * FROM ProductOrder 
```

但是，如果您真的想添加另一列，仍然不能使用触发器。`UPDATE`您只需要使用和连接两个表来更新该列的值。假设您的新列`TotalPrice`在表“订单”上被调用。

```
UPDATE  Orders a
        INNER JOIN Products b
            ON a.Product_name = b.Product_name
SET     a.TotalPrice = a.units_ordered * b.Price 
```

# tomcat - tomcat 无法正常工作，alfresco 4 无法启动

> ID：15989480
> 
> 赞同：0
> 
> 时间：2013-04-13T15:33:30.843
> 
> 标签：tomcat, alfresco

我有一个严重的问题！我已经在 Win 7 OS 64bit 上安装了 Alfresco 4.2.c - 安装了 Java：jdk 1.7.0_17。我想这是关于配置的问题，而不是 alfresco 本身。所以我从 manager-windows 运行 tomcat 和 Postgres 然后我在 firefox 中输入 localhost:8081 ，我看到了 Tomcat 主页。好的！但是，这真的很奇怪，如果我输入 localhost:8081/alfresco 我收到错误：HTTP Status 404 - /alfresco

这是Alfresco\tomcat\log\alfrescotomcat-stderr的日志：

```
2013-04-13 14:30:44 Commons Daemon procrun stderr initialized

apr 13, 2013 2:30:46 PM org.apache.catalina.core.AprLifecycleListener init

INFO: Loaded APR based Apache Tomcat Native library 1.1.24 using APR version 1.4.6.

apr 13, 2013 2:30:46 PM org.apache.catalina.core.AprLifecycleListener init

INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].

apr 13, 2013 2:30:47 PM org.apache.catalina.core.AprLifecycleListener initializeSSL

INFO: OpenSSL successfully initialized (OpenSSL 1.0.1c 10 May 2012)

apr 13, 2013 2:30:48 PM org.apache.coyote.AbstractProtocol init

INFO: Initializing ProtocolHandler ["http-apr-8081"]

apr 13, 2013 2:30:48 PM org.apache.coyote.AbstractProtocol init

INFO: Initializing ProtocolHandler ["ajp-apr-8009"]

apr 13, 2013 2:30:48 PM org.apache.coyote.AbstractProtocol init

INFO: Initializing ProtocolHandler ["http-bio-8443"]

apr 13, 2013 2:30:48 PM org.apache.catalina.startup.Catalina load

INFO: Initialization processed in 3122 ms

apr 13, 2013 2:30:49 PM org.apache.catalina.core.StandardService startInternal

INFO: Starting service Catalina

apr 13, 2013 2:30:49 PM org.apache.catalina.core.StandardEngine startInternal

INFO: Starting Servlet Engine: Apache Tomcat/7.0.30

apr 13, 2013 2:30:49 PM org.apache.catalina.startup.HostConfig deployDescriptor

INFO: Deploying configuration descriptor C:\Alfresco\tomcat\conf\Catalina\localhost\solr.xml

apr 13, 2013 2:30:49 PM org.apache.catalina.startup.SetContextPropertiesRule begin

WARNING: [SetContextPropertiesRule]{Context} Setting property 'debug' to '0' did not find a matching property.

apr 13, 2013 2:31:13 PM org.apache.catalina.startup.HostConfig deployWAR

INFO: Deploying web application archive C:\Alfresco\tomcat\webapps\alfresco.war

apr 13, 2013 2:31:45 PM org.apache.catalina.core.StandardContext addApplicationListener

INFO: The listener "org.apache.myfaces.webapp.StartupServletContextListener" is already configured for this context. The duplicate definition has been ignored.

apr 13, 2013 2:32:27 PM org.apache.catalina.core.StandardContext startInternal

SEVERE: Error listenerStart

apr 13, 2013 2:32:27 PM org.apache.catalina.core.StandardContext startInternal

SEVERE: Context [/alfresco] startup failed due to previous errors

apr 13, 2013 2:32:28 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/alfresco] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@13e7b625]) and a value of type [org.alfresco.repo.dictionary.NamespaceDAOImpl.NamespaceRegistry] (value [org.alfresco.repo.dictionary.NamespaceDAOImpl$NamespaceRegistry@51674158]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

apr 13, 2013 2:32:28 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/alfresco] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@51f32228]) and a value of type [org.alfresco.util.CachingDateFormat] (value [yyyy-MM-dd]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

apr 13, 2013 2:32:28 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/alfresco] created a ThreadLocal with key of type [com.sun.xml.bind.v2.ClassFactory$1] (value [com.sun.xml.bind.v2.ClassFactory$1@7a8ec5ca]) and a value of type [java.util.WeakHashMap] (value [{class org.alfresco.repo.audit.model._3.RecordValue=java.lang.ref.WeakReference@4fea5230, class org.alfresco.repo.audit.model._3.DataExtractors=java.lang.ref.WeakReference@20b9f64d, class org.alfresco.repo.audit.model._3.DataExtractor=java.lang.ref.WeakReference@10d94a04, class org.alfresco.repo.audit.model._3.PathMappings=java.lang.ref.WeakReference@298a5540, class javax.xml.bind.annotation.W3CDomHandler=java.lang.ref.WeakReference@38e2f20e, class org.alfresco.repo.audit.model._3.Audit=java.lang.ref.WeakReference@3b81924f, class java.util.ArrayList=java.lang.ref.WeakReference@37ac9f0e, class org.alfresco.repo.audit.model._3.DataGenerator=java.lang.ref.WeakReference@25fe6cb0, class org.alfresco.repo.audit.model._3.GenerateValue=java.lang.ref.WeakReference@6291aa4c, class org.alfresco.repo.audit.model._3.AuditPath=java.lang.ref.WeakReference@49439622, class org.alfresco.repo.audit.model._3.DataGenerators=java.lang.ref.WeakReference@7435b7c1, class org.alfresco.repo.audit.model._3.PathMap=java.lang.ref.WeakReference@72b31b81, class org.alfresco.repo.audit.model._3.Application=java.lang.ref.WeakReference@4cd2ecfb}]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

apr 13, 2013 2:32:28 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/alfresco] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@7b7ca93d]) and a value of type [org.apache.cxf.bus.CXFBusImpl] (value [org.apache.cxf.bus.CXFBusImpl@354b2321]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

apr 13, 2013 2:32:28 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/alfresco] created a ThreadLocal with key of type [com.sun.xml.bind.v2.runtime.Coordinator$1] (value [com.sun.xml.bind.v2.runtime.Coordinator$1@57ef66dc]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@264a229e]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

apr 13, 2013 2:32:29 PM org.apache.catalina.startup.HostConfig deployWAR

INFO: Deploying web application archive C:\Alfresco\tomcat\webapps\share.war

apr 13, 2013 2:33:12 PM org.apache.catalina.startup.HostConfig deployDirectory

INFO: Deploying web application directory C:\Alfresco\tomcat\webapps\host-manager

apr 13, 2013 2:33:12 PM org.apache.catalina.startup.HostConfig deployDirectory

INFO: Deploying web application directory C:\Alfresco\tomcat\webapps\manager

apr 13, 2013 2:33:12 PM org.apache.catalina.startup.HostConfig deployDirectory

INFO: Deploying web application directory C:\Alfresco\tomcat\webapps\ROOT

apr 13, 2013 2:33:13 PM org.apache.coyote.AbstractProtocol start

INFO: Starting ProtocolHandler ["http-apr-8081"]

apr 13, 2013 2:33:13 PM org.apache.coyote.AbstractProtocol start

INFO: Starting ProtocolHandler ["ajp-apr-8009"]

apr 13, 2013 2:33:13 PM org.apache.coyote.AbstractProtocol start

INFO: Starting ProtocolHandler ["http-bio-8443"]

apr 13, 2013 2:33:13 PM org.apache.catalina.startup.Catalina start

INFO: Server startup in 144182 ms

apr 13, 2013 2:33:13 PM org.apache.catalina.loader.WebappClassLoader loadClass

INFO: Illegal access: this web application instance has been stopped already.  Could not load org.bouncycastle.jce.provider.symmetric.AES$ECB.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.

java.lang.IllegalStateException

    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1600)

    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)

    at java.security.Provider$Service.getImplClass(Provider.java:1279)

    at java.security.Provider$Service.newInstance(Provider.java:1237)

    at javax.crypto.Cipher.chooseProvider(Cipher.java:845)

    at javax.crypto.Cipher.init(Cipher.java:1348)

    at sun.security.ssl.CipherBox.<init>(CipherBox.java:175)

    at sun.security.ssl.CipherBox.newCipherBox(CipherBox.java:208)

    at sun.security.ssl.CipherSuite$BulkCipher.newCipher(CipherSuite.java:467)

    at sun.security.ssl.CipherSuite$BulkCipher.isAvailable(CipherSuite.java:507)

    at sun.security.ssl.CipherSuite$BulkCipher.isAvailable(CipherSuite.java:485)

    at sun.security.ssl.CipherSuite.isAvailable(CipherSuite.java:190)

    at sun.security.ssl.SSLContextImpl.getApplicableCipherSuiteList(SSLContextImpl.java:342)

    at sun.security.ssl.SSLContextImpl.getDefaultCipherSuiteList(SSLContextImpl.java:293)

    at sun.security.ssl.SSLSocketImpl.init(SSLSocketImpl.java:576)

    at sun.security.ssl.SSLSocketImpl.<init>(SSLSocketImpl.java:494)

    at sun.security.ssl.SSLServerSocketImpl.accept(SSLServerSocketImpl.java:313)

    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.acceptSocket(JSSESocketFactory.java:182)

    at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:216)

    at java.lang.Thread.run(Thread.java:722)

apr 13, 2013 2:33:13 PM org.apache.catalina.loader.WebappClassLoader loadClass

INFO: Illegal access: this web application instance has been stopped already.  Could not load org.bouncycastle.jce.provider.symmetric.AES$ECB.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.

java.lang.IllegalStateException

    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1600)

    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)

    at java.security.Provider$Service.getImplClass(Provider.java:1279)

    at java.security.Provider$Service.newInstance(Provider.java:1237)

    at javax.crypto.Cipher.chooseProvider(Cipher.java:845)

    at javax.crypto.Cipher.init(Cipher.java:1348)

    at sun.security.ssl.CipherBox.<init>(CipherBox.java:175)

    at sun.security.ssl.CipherBox.newCipherBox(CipherBox.java:208)

    at sun.security.ssl.CipherSuite$BulkCipher.newCipher(CipherSuite.java:467)

    at sun.security.ssl.CipherSuite$BulkCipher.isAvailable(CipherSuite.java:507)

    at sun.security.ssl.CipherSuite$BulkCipher.isAvailable(CipherSuite.java:485)

    at sun.security.ssl.CipherSuite.isAvailable(CipherSuite.java:190)

    at sun.security.ssl.SSLContextImpl.getApplicableCipherSuiteList(SSLContextImpl.java:342)

    at sun.security.ssl.SSLContextImpl.getDefaultCipherSuiteList(SSLContextImpl.java:293)

    at sun.security.ssl.SSLSocketImpl.init(SSLSocketImpl.java:576)

    at sun.security.ssl.SSLSocketImpl.<init>(SSLSocketImpl.java:494)

    at sun.security.ssl.SSLServerSocketImpl.accept(SSLServerSocketImpl.java:313)

    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.acceptSocket(JSSESocketFactory.java:182)

    at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:216)

    at java.lang.Thread.run(Thread.java:722)

apr 13, 2013 2:33:13 PM org.apache.catalina.loader.WebappClassLoader loadClass

INFO: Illegal access: this web application instance has been stopped already.  Could not load org.bouncycastle.jce.provider.symmetric.AES$ECB.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.

java.lang.IllegalStateException

    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1600)

    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)

    at java.security.Provider$Service.getImplClass(Provider.java:1279)

    at java.security.Provider$Service.newInstance(Provider.java:1237)

    at javax.crypto.Cipher.chooseProvider(Cipher.java:845)

    at javax.crypto.Cipher.init(Cipher.java:1348)

    at sun.security.ssl.CipherBox.<init>(CipherBox.java:175)

    at sun.security.ssl.CipherBox.newCipherBox(CipherBox.java:208)

    at sun.security.ssl.CipherSuite$BulkCipher.newCipher(CipherSuite.java:467)

    at sun.security.ssl.CipherSuite$BulkCipher.isAvailable(CipherSuite.java:507)

    at sun.security.ssl.CipherSuite$BulkCipher.isAvailable(CipherSuite.java:485)

    at sun.security.ssl.CipherSuite.isAvailable(CipherSuite.java:190)

    at sun.security.ssl.SSLContextImpl.getApplicableCipherSuiteList(SSLContextImpl.java:342)

    at sun.security.ssl.SSLContextImpl.getDefaultCipherSuiteList(SSLContextImpl.java:293)

    at sun.security.ssl.SSLSocketImpl.init(SSLSocketImpl.java:576)

    at sun.security.ssl.SSLSocketImpl.<init>(SSLSocketImpl.java:494)

    at sun.security.ssl.SSLServerSocketImpl.accept(SSLServerSocketImpl.java:313)

    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.acceptSocket(JSSESocketFactory.java:182)

    at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:216)

    at java.lang.Thread.run(Thread.java:722)

ry.java:222)

    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)

    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)

    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)

    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)

    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)

    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)

    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)

    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)

    at org.alfresco.web.app.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:63)

    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)

    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)

    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)

    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)

    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)

    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)

    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)

    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)

    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)

    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)

    at java.util.concurrent.FutureTask.run(FutureTask.java:166)

    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)

    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)

    at java.lang.Thread.run(Thread.java:722)

Caused by: java.rmi.server.ExportException: internal error: ObjID already in use

    at sun.rmi.transport.ObjectTable.putTarget(ObjectTable.java:186)

    at sun.rmi.transport.Transport.exportObject(Transport.java:92)

    at sun.rmi.transport.tcp.TCPTransport.exportObject(TCPTransport.java:247)

    at sun.rmi.transport.tcp.TCPEndpoint.exportObject(TCPEndpoint.java:411)

    at sun.rmi.transport.LiveRef.exportObject(LiveRef.java:147)

    at sun.rmi.server.UnicastServerRef.exportObject(UnicastServerRef.java:207)

    at sun.rmi.registry.RegistryImpl.setup(RegistryImpl.java:122)

    at sun.rmi.registry.RegistryImpl.<init>(RegistryImpl.java:98)

    at java.rmi.registry.LocateRegistry.createRegistry(LocateRegistry.java:239)

    at org.springframework.remoting.rmi.RmiServiceExporter.getRegistry(RmiServiceExporter.java:371)

    at org.springframework.remoting.rmi.RmiServiceExporter.getRegistry(RmiServiceExporter.java:336)

    at org.springframework.remoting.rmi.RmiServiceExporter.prepare(RmiServiceExporter.java:268)

    at org.springframework.remoting.rmi.RmiServiceExporter.afterPropertiesSet(RmiServiceExporter.java:229)

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)

    ... 27 more

apr 13, 2013 2:32:23 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextInitialized

INFO: WSSERVLET12: JAX-WS context listener initializing

apr 13, 2013 2:32:27 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate <init>

INFO: WSSERVLET14: JAX-WS servlet initializing

apr 13, 2013 2:32:27 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate destroy

INFO: WSSERVLET15: JAX-WS servlet destroyed

apr 13, 2013 2:32:27 PM com.sun.xml.ws.transport.http.servlet.WSServletContextListener contextDestroyed

INFO: WSSERVLET13: JAX-WS context listener destroyed

apr 13, 2013 2:32:27 PM org.apache.catalina.core.ApplicationContext log

INFO: Closing Spring root WebApplicationContext

apr 13, 2013 2:32:28 PM org.apache.catalina.core.ApplicationContext log

INFO: Shutting down log4j 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:24:27.827

露天的充气城堡罐似乎有问题。看起来 alfreco 中的 bcprov-jdk.jar 与您正在使用的 jdk 冲突。查看兼容版本

# javascript - 定义与分配

> ID：15989483
> 
> 赞同：-2
> 
> 时间：2013-04-13T15:33:36.940
> 
> 标签：javascript

**定义。**要定义一个属性，可以使用一个函数，例如

> Object.defineProperty(obj, propName, propDesc)

此函数的主要目的是为 obj 添加一个自己的（直接）属性，其属性（可写等，见下文）由 propDesc 指定。次要目的是更改属性的属性，包括其值。

**任务。**要分配给一个属性，可以使用一个表达式，例如

```
obj.prop = value 
```

这种表达式的主要目的是改变值。在执行该更改之前，JavaScript 会查询 obj 的原型链 [1]：如果 obj 或其原型中的某个位置存在 setter，则分配是对该 setter 的调用。如果它不存在，赋值具有创建属性的副作用——作为 obj 的自己的属性，具有默认属性。

但是这两种方法的区别和后果是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:49:30.293

基本上，`Object.defineProperty(obj, propName, propDesc)`您可以更好地控制为对象定义属性，最重要的是，如何访问每个属性。`obj.prop = value`不会让您对稍后（定义后）如何访问该属性进行任何控制。

重要提示：`Object.defineProperty()`将比简单的属性定义慢很多，因此除非您需要控制以后如何访问属性，否则不要使用`Object.defineProperty()`.

[看看这篇关于同一问题的文章，但有一个具体的例子。](https://stackoverflow.com/questions/6149453/variable-property-test-vs-object-definepropertyvariable-property)

# magento - 禁用产品显示在搜索结果中

> ID：15989484
> 
> 赞同：0
> 
> 时间：2013-04-13T15:33:37.690
> 
> 标签：magento, search, attributes

如何设置仅在搜索结果页面中显示启用产品？

试图禁用产品所属的属性，但它不能正常工作。分类设置问题？还是其他原因？

有人可以让我知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:55:25.680

请看这张图片 ![Magento 设置可见性](https://i.stack.imgur.com/pDRBq.png)

如果您将 设置`visibility`为`catalogue, search`，则只会显示已启用的产品。此外，对于已禁用的产品，您可能需要将可见性设置为`NOT VISIBLE INDIVIUDALLY`

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T11:48:05.510

最后，我在自动完成搜索框中得到了停止禁用产品列表的解决方案。

请添加以下代码：

```
/app/code/core/Mage/CatalogSearch/Block/Autocomplete.php

Code add in public function getSuggestData()
{
    $connection = Mage::getSingleton('core/resource')->getConnection('core_write');
    $querynm = $item['query'];              
    $selq = $connection->query( "SELECT entity_id FROM catalog_product_entity_varchar WHERE value ='$querynm'");
    $setcqty = $selq->fetch();
    $eid = $setcqty['entity_id'];

    $selqe = $connection->query( "SELECT value FROM catalog_product_entity_int WHERE entity_id ='$eid' AND attribute_id='273'");
    $setcqtye = $selqe->fetch();
    $eid_st = $setcqtye['value'];

    if($eid_st == 1) {
    }
} 
```

试试这个代码。您将在搜索框中仅获得已启用的产品列表。

问候， N@itik

# forms - Express.js：使用文本框和按钮验证表单

> ID：15989486
> 
> 赞同：0
> 
> 时间：2013-04-13T15:33:49.817
> 
> 标签：forms, node.js, validation, express, pug

我正在使用 Express.js 中的表单，并且正在使用 express-validator 进行验证。我在下面显示的代码是一个带有两个文本框的“表单”，一个选择文件按钮和一个提交按钮。当用户提交表单，但有验证错误我想：

1.  显示一条错误消息，说明用户需要填写表单中的哪些元素。我相信我知道如何使用弹出窗口来做到这一点，但我想知道是否有办法“突出显示”要求用户填写的文本框，或在文本框/按钮旁边放置“*必填”文本。

2.  目前，如果有错误，提交后，表单中的两个文本框会填充用户之前提交的变量。我想为“选择文件”按钮做同样的事情。正如我在两个文本框中所做的那样，使用“值”字段不适用于按钮。有没有办法做到这一点？

//在路由文件夹中

```
exports.myPage = function(req, res) {
   res.render('myPage.jade', {valName: 'Enter', valLastName: 'Enter'});
};

exports.myPage_post_handler = function(req, res) {

   nameID = req.body.nameID;
   lastNameID = req.body.lastNameID;
   my_file = req.body.my_file;

   req.session.nameID = nameID;
   req.session.lastNameID = lastNameID;
   req.session.my_file = my_file;

   if (typeof req.session.nameID != 'undefined'){
      valName = nameID;
   }

   if (typeof req.session.lastNameID != 'undefined'){
      valLastName = lastNameID;
   }

   req.assert('nameID', 'Please enter a name').notEmpty();
   req.assert('lastNameID', 'Please enter a last name').notEmpty();
   req.assert('my_file', 'Please enter a my_file').notEmpty();

   var errors = req.validationErrors();

   if( !errors){
     res.redirect('/other_page'); 
   }
   else {
     res.render('myPage.jade');
   }
 };

 //in my_page.jade
 form(method='post')
    | Name:
    div
     input(type='text', name='nameID', id = 'name', value = valName)
    | Session ID:
    div
     input(type='text', name='laastNameID', id ='lastName', value = valLastName)
    | Video:
    div
     input(type='file', name='my_file', id='fileF')

    div
     input(type='submit', value='submit', value='Submit') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:00:44.450

在 Html5（也适用于 Jade）中，您可以在声明文本框或单选按钮等时放置“必需”参数。

# javascript - 使用 jsf 和 javascript 将页面滚动到特定面板

> ID：15989487
> 
> 赞同：0
> 
> 时间：2013-04-13T15:33:53.260
> 
> 标签：javascript, jsf-2, primefaces, xhtml, panel

我有一个 xhtml 页面，其中有一组面板堆叠在一起。每个面板都有一个数据表，其中包含特定列作为超链接。当我单击第一个数据表中的超链接时，将呈现第二个数据表。当我单击第二个数据表中的超链接时，将呈现第三个数据表。我希望我的页面向下滚动并在屏幕中央显示新呈现的数据表，而不是将页面加载回屏幕顶部。我怎样才能实现它。下面是我为实现这一目标而编写的代码，但没有运气。

表中的每个超链接都编写了以下代码，

```
<p:commandLink value="#{abc}" action="#{myBean.myFunction}" 
        ajax="false" oncomplete="focusPanel3()">
    <f:setPropertyActionListener  
        target="#{myBean.xyz}" value="#{abc}">
    </f:setPropertyActionListener>
</p:commandLink> 
```

javascript如下

```
function focusPanel3() {
        var el = document.getElementById("panel3");
        el.scrollIntoView();
        window.scroll(0, 1200); //Also tried this line. No luck even then
} 
```

在我的 Bean 中，我将下一个面板的渲染属性设置为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:32:50.377

您可以检查 jQuery smooth scroll out，[这个答案](https://stackoverflow.com/a/6677069/1659451)可以指导您。或者 jQuery [scrollTo](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)插件，[这个答案](https://stackoverflow.com/a/12742737/1659451)也包括一个基本的演示。使用时不要忘记提供正确的 HTML 生成的客户端 ID `document.getElementById`。

# php - 将重定向/重写规则从 IIRF 过滤器移至 htaccess

> ID：15989490
> 
> 赞同：0
> 
> 时间：2013-04-13T15:34:25.553
> 
> 标签：php, apache, .htaccess

我正在将 PHP 站点从本地托管的 IIS 6 服务器移动到 Pagoda Box。这个网站以前是用 Coldfusion 编码的，直到最近，我才用 PHP 重新编码。对于 Google Analytics，我在提供 correspodnig .php 文件的同时，使所有面向外部的链接都没有扩展名：

```
<a href="link">My Link</a> 
```

要求：

```
/link 
```

浏览器栏：

```
 http://www.example.com/link 
```

回复：

```
/link.php 
```

我以前一直在使用 Ionic Shade IIRF Re-write 过滤器，现在显然将使用 htaccess。我之前的 IIRF 规则如下所示：

```
RedirectRule ^/([A-Za-z0-9_\-]+)\.cfm((\?.*)|())$   /$1$2 [R=301]

RewriteRule ^/([A-Za-z0-9_\-]+)((\?.*)|())$   /$1.php$2 
```

所以，在我的 htaccess 文件中，我试过这个：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^example\.pagodabox\.com [NC]
RewriteRule ^([A-Za-z0-9_\-]+)((\?.*)|())$ $1.php$2 [R=301,L] 
```

我的无扩展链接使用任何查询字符串提供正确的 .php 文件。但是，您会在浏览器栏中看到 .php 扩展名。我需要如何修改我的 htaccess 文件，使它像我以前的 IIRF 规则一样运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:09:30.820

您必须删除该[`R=301`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)标志。

此标志使 Web 服务器向`Location`浏览器发送响应并强制浏览器请求新 URL。

# c - 可以为每个循环构造在 C 中工作

> ID：15989491
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:34:35.173
> 
> 标签：c

有人可以向我解释一下 for(int current : values) 是如何工作的。假设我们有这样的方法。谢谢

```
public int count(int[] values, int value)
{
    int count = 0;
    for (int current : values)
    {
    if (current == value)
        count++;
    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:35:23.077

它相当于：

```
for (int i = 0; i < values.length; i ++) {
    int current = values[i]
    ...
} 
```

它被称为*增强`for`循环*。（其他编程语言可能使用`for ... in`or `foreach`，但它们的含义相同。）

[这是 Oracle 网站上的一篇](https://blogs.oracle.com/CoreJavaTechTips/entry/using_enhanced_for_loops_with)关于它的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:36:17.940

它不仅仅是一个 for，它是一个 foreach，它的工作原理是这样的：

```
public int count(int[] values, int value)
{
    int count = 0;
    for (int i=0;i<values.length;i++)
    {
    current = values[i];
    if (current == value)
        count++;
    }
    return count;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:38:01.570

for-each 和等价的 for 语句具有这些形式。给出了两种基本的等效形式，取决于它是数组还是被遍历的 Iterable。在这两种情况下，都需要一个额外的变量，即数组的索引。

对于每个循环

```
for (type var : arr) {
   body-of-loop
} 
```

相当于for循环

```
for (int i = 0; i < arr.length; i++) { 
   type var = arr[i];
   body-of-loop
} 
```

**更新：**

Turbo C 不支持每个循环。但是同样的，你可以使用 C 的 for 循环结构来实现。

在这里阅读：[For Each Loop 支持多种语言](http://en.wikipedia.org/wiki/Foreach_loop)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T15:35:19.327

它循环遍历`values`数组中的所有元素。与此相同，只是没有索引变量：

```
for (int i = 0; i < values.length; ++i) {
    int count = 0;
    if (current == values[i])
        count++;
    return count;
} 
```

您可以将其视为“for each”循环。换句话说，对于 values 数组中的每个元素，执行此循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T15:35:30.303

```
for(int current : values) 
```

是一个 for-each 循环，类似于：

```
for(int i =0 ; i< values.length; i++) 
```

# yii - 如何在 CGridView 中将数组作为字段处理

> ID：15989498
> 
> 赞同：0
> 
> 时间：2013-04-13T15:35:12.517
> 
> 标签：yii, cgridview

我正在使用 CGridView 但其中一个字段是数组 ['xx' ,'yy' , 'zz',...] 如何显示我已搜索答案但未找到

是否可以使用 DropDownlist 之类的东西来显示数组中的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:57:48.543

为了在 CGridView 列中使用 dropDownList，您的数组需要是关联的。我建议您在模型中创建一个方法，将其转换为关联数组，例如：

```
public function getAssociativeArray()
{
    $array = array('xx', 'yy', 'zz'); // or use an attribute value
    return array_combine(array_values($array), $array);
} 
```

然后在您的 CGridView 中，将此添加为一列，用您自己的替换模型/字段名称：

```
array(
    'name' => 'yourFieldName',
    'type' => 'raw',
    'value' => 'CHtml::activeDropDownList($data, "yourFieldName", YourModel::model()->associativeArray)', 
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T18:34:18.707

我`special_offer`在模型中有一个静态数组；

它将按值过滤；这是一个下拉列表示例；

我用数组替换了一个字段`cgridview`，如下所示：

```
 array(
        'name' => 'special_offer',
        'value' => 'Package::$special_offer[$data->special_offer]',
        'filter' => Package::$special_offer,
    ), 
```

# php - LinkedIn Access Token 对用户进行身份验证并使用 JSAPI 发送消息

> ID：15989504
> 
> 赞同：0
> 
> 时间：2013-04-13T15:35:41.703
> 
> 标签：php, javascript, linkedin, linkedin-jsapi

我正在开发捕获“访问令牌”的 PHP 应用程序，当用户单击向 Linkedin 注册时，我使用该访问令牌从用户的 Linkedin 个人资料中获取所有相关信息。

我现在想包括 LinkedIn 发送消息功能[http://developer.linkedin.com/documents/sample-code-sending-message](http://developer.linkedin.com/documents/sample-code-sending-message)。

有什么方法可以使用发送消息功能和身份验证过程使用用户的**访问令牌**而不显示用户再次使用linkedIn登录以发送消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:00:25.450

是的，只需将令牌存储在数据库中（它应该可以保存 60 天）并在您的请求中重用它。如果令牌过期，您将不得不重新授权一个新令牌。

我的linkedin类示例来自： [https ://github.com/EJTH/SLinkedIn](https://github.com/EJTH/SLinkedIn)

但它应该与其他类或扩展非常相似。

```
$ln = new SimpleLinkedIn('APIKEY','APISECRET');
$ln->addScope('rw_nus');
$ln->setTokenData($myUserObj->getLinkedinToken() /* 从数据库中获取令牌 */);

如果（$ln->授权（））{
    /* 做 OAuth 的东西 */
    $user = $ln->fetch('GET', '/v1/people/~:(firstName,lastName)');

    $tokenData = $ln->getTokenData();

    /* 保存新的令牌，如果它被改变 */
    $myUserObj->setLinkedinToken($tokenData['access_token']);
} 别的 {
    /* 用户拒绝授权 */
}

```

请记住，您的令牌必须具有您要执行的操作的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T10:39:10.380

发信息

[我如何使用linkedin api发送消息/通知？](https://stackoverflow.com/questions/6499259/how-do-i-send-a-message-notification-with-the-linkedin-api/19864746#19864746)

您使用 LinkedIn Access Token 并通过功能消息发送。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-01-02T05:06:01.740

```
<?php
// base or site url is the site where code linked in button is kept for signup
$baseURL = 'http://localhost/linkedin/';

/* callback or redirect url is the page you want to open 
 * after successful getting of data i.e. index.php page 
 * (must be same in linkedin dashboard) */
$callbackURL = 'http://localhost/linkedin/process.php'; 

// APP ID (will receive from linkedin dashboard)
$linkedinApiKey = 'your api key';

// APP Client
$linkedinApiSecret = 'your api secret';

// This is fixed no need to change
$linkedinScope = 'r_basicprofile r_emailaddress';
?> 
```

# jquery - 我该怎么做才能为 html 5 表单创建一个较旧的浏览器、向后兼容的 jquery 解决方案？

> ID：15989505
> 
> 赞同：0
> 
> 时间：2013-04-13T15:35:41.787
> 
> 标签：jquery, forms, form-submit, checkbox

HTML 5 让生活更轻松，但不幸的是它不适用于旧版浏览器。我有一个可以在任何使用 HTML 5 的现代浏览器中正常工作的表单，但我需要一个仍然与旧浏览器兼容的解决方案：

```
<p>
<input name="array[]" type="checkbox" value="a1" form="myform" class="checkbox"/> a1<br />
<input name="array[]" type="checkbox" value="b1" form="myform" class="checkbox"/> b1<br />
<input name="array[]" type="checkbox" value="c1" form="myform" class="checkbox"/> c1<br />
</p>

<form id="myform" method="POST" action="test.php">
  <input type="submit" value="Send" />
</form> 
```

复选框的数量是动态生成的，不能放入任何表单标签中。我需要在提交时使用“myform”表单传递复选框值。上面的示例适用于 html 5 浏览器，但不适用于旧版浏览器。

我怎样才能使它适用于较旧的浏览器，例如 IE 7 等？

可以用 jQuery 完成吗？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:08:20.540

您可以创建隐藏输入并使用复选框中的当前值，然后在使用 jQuery 提交表单之前将它们添加到表单中，如下所示：

```
$('#myform').on('submit', function (e) {
    $form = $(this);

    $('input[type=checkbox]:checked').each(function (index, elem) {
        var val = $(elem).val(),
            name = $(elem).attr('name');

        var hiddenInput = $('<input type="hidden" value="' + val + '" name="' + name + '"/>');
        $form.append(hiddenInput);
    });
}); 
```

# c++ - 如何使用指针确保函数调用正确

> ID：15989506
> 
> 赞同：0
> 
> 时间：2013-04-13T15:35:43.523
> 
> 标签：c++, pointers

当我这样调用时，下面的代码将起作用：

```
char arr[] = "foobar";
reverse(arr); 
```

但是当我这样调用时它不起作用，因为它指向只读部分

```
 char*a = "foobar";
 reverse(a); 
```

现在我的问题是，有什么办法可以避免用户这样打电话？

```
void reverse(char *str)
{
  char * end = str;
  char tmp;
  if (str) 
  { 
     while (*end)
     {      
       ++end;
     }
     --end;
     while (str < end)
     {
        tmp = *str;
        *str++ = *end;
        *end-- = tmp;
     }
  } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:43:47.537

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:44:31.283

No, there is no way to guarantee that pointer being passed to function is valid. It is impressibility of caller to provide valid data. You can even do something like this

```
 int i = 0xABCD;
  reverse((char*) i); 
```

Which doesn't make much sense but there is no way to check for such things in reverse.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:55:18.480

使用`std::string`. 抛开任何损坏，a`std::string`是具有已知大小的连续内存块。

你甚至可以使用[`std::reverse`](http://en.cppreference.com/w/cpp/algorithm/reverse).

除了使用正确的设置外，编译器还会阻止您将字符串文字分配给`char*`变量。

# windows - 在哪里可以找到 Windows ACL 的确切语义

> ID：15989510
> 
> 赞同：0
> 
> 时间：2013-04-13T15:35:59.167
> 
> 标签：windows, security, permissions, acl

是否有任何地方可以找到 Windows 访问控制语义的确切描述，详细信息类似于`acl(5)`Linux 上的手册页。即一种算法，可以准确解释 Windows 如何决定拒绝或授予访问权限，给定对象的 ACL 及其继承自的任何内容。

谷歌建议 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa374872.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374872.aspx)，但我正在寻找更精确的。

相关问题：[Windows NT ACL 是如何工作的？](https://stackoverflow.com/questions/1128068/how-do-windows-nt-acls-work)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T18:41:45.790

[AccessCheck 的工作原理](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446683%28v=vs.85%29.aspx)说明了这一点。

# html - html 100% 宽度的页眉和页脚

> ID：15989513
> 
> 赞同：1
> 
> 时间：2013-04-13T15:36:07.923
> 
> 标签：html, css, header, width, footer

我正在设计一个网站，我希望我的页眉和页脚 div 跨越页面的 100% 宽度，并从页面的绝对顶部和底部开始，没有空格

我目前有这个。

```
<title>Untitled Document</title>
<style type="text/css">
@import url(http://fonts.googleapis.com/css?family=PT+Sans+Narrow);

#header {
    background: #636769;
}

#navigation {
}

body {
    font-family: 'PT Sans Narrow', sans-serif;
    font-size: 16pt;
    background: url(../images/texture.png);
}

#wrapper {
    width: 938px;
    margin: 0 auto;
    padding: 20px 20px;
    background: white;
}

#footer {
   background: #636769;
}
</style>
</head>

<body>
<!-- begin header -->
  <div id="header">
    <p>Content</p>
  </div>

<!-- begin wrapper -->
<div id="wrapper">

<!-- begin navigation -->
  <div id="navigation">
    <ol>
    <li>link1</li>
    <li>link2</li>
    <li>link3</li>
    <li>link4</li>
    </ol>
  </div>

<!-- begin content -->
  <div id="content">
    <h1>Heading</h1>
    <p>Content</p>
  </div>

</div>

<!-- begin footer -->
  <div id="footer">
    <p>Content</p>
  </div>

</body>
</html> 
```

我希望页眉和页脚看起来像这样；[http://rocketbug.com/2.0/](http://rocketbug.com/2.0/)

谢谢你，尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:40:10.833

您可能需要覆盖元素`margin`的`body`（例如，Chrome 会将其设置为 8px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:40:29.440

在顶部添加css：

```
* {
 margin:0px;
 padding:0px;
} 
```

标题：

```
#header {
    background: #636769;
    position:relative;
    width:100%;
} 
```

页脚：

```
#footer {
   background: #636769;
    width:100%;
    position:relative;
    bottom:0px;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T16:12:33.043

```
 html, body, div, span, applet, object, iframe,
   h1, h2, h3, h4, h5, h6, p, blockquote, pre,
   a, abbr, acronym, address, big, cite, code,
   del, dfn, em, font, img, ins, kbd, q, s, samp,
   small, strike, strong, sub, sup, tt, var,
   b, u, i, center,
   dl, dt, dd, ol, ul, li,
   fieldset, form, label, legend,
   table, caption, tbody, tfoot, thead, tr, th, td {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    vertical-align: baseline;
    background: transparent;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}

/* Don't kill focus outline for keyboard users: http://24ways.org/2009/dont-lose-your-focus */
a:hover, a:active {
    outline: none;
}

/* remember to highlight inserts somehow! */
ins {
    text-decoration: none;
}
del {
    text-decoration: line-through;
}

/* tables still need 'cellspacing="0"' in the markup */
table {
    border-collapse: collapse;`enter code here`
    border-spacing: 0;
}
#header {
    background: #636769;
}

#navigation {
}

body {
    font-family: 'PT Sans Narrow', sans-serif;
    font-size: 16pt;
    background: url(../images/texture.png);
    position: relative;
}

#wrapper {
    width: 938px;
    margin: 0 auto;
    padding: 20px 20px;
    background: white;
}

#footer {
   background: #636769;
    position: absolute;
    bottom: 0;
    width: 100%;
} 
```

# node.js - 你能依赖 socket.id 作为 UID

> ID：15989514
> 
> 赞同：1
> 
> 时间：2013-04-13T15:36:09.690
> 
> 标签：node.js, express, socket.io

请原谅我的无知，node.js/socket.io 的第 2 天

我正在寻找一种方法来唯一标识用户以在数据库排队系统中使用。我阅读了很多关于使用 Express 的会话 cookie 的内容，但是我注意到 socket.id 似乎是 socket.io 已经在使用的 UID。

因此，我一直在使用 socket.id 在数据库中识别我的用户，并创建私人“房间”来与他们进行通信。

这是一个可怕的想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T17:30:24.770

套接字 ID 就是这样 - 它唯一地标识一个套接字。它不会唯一标识用户，而且绝对不打算用于此目的。单个用户（在许多应用程序中）可能有多个连接（因此有多个具有不同 ID 的套接字）。此外，每次他们连接时，他们都会被分配一个新的 ID。

所以你显然不应该使用 a`socket.id`作为用户 ID。Mustafa 指出您可以重新分配`socket.id`给用户 ID，但我倾向于认为这是一个非常糟糕的主意，原因有两个：

1.  `socket.id`应该唯一标识一个套接字，因此当单个用户打开多个套接字时会遇到问题。
2.  Socket.IO 在内部大量使用该 ID 将内容存储在哈希表中，如果您更改 ID，您可能会得到意想不到的结果并且难以追踪错误。我还没有测试过它，但是看看 Socket.IO 源代码，这就是我所期望的。

最好使用另一种方法生成 ID，然后将用户与套接字相关联（例如，在握手期间使用来自 cookie 的数据）。

`socket.set(key, value, callback)`是明确用于将您自己的数据（如用户 ID）与套接字连接相关联的方法，并且是唯一保证安全的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:20:59.663

创建 socket.io 套接字时，您可以根据需要向套接字对象添加变量。`socket.userid = getUserID()`会正常工作。最好在数据库中分配 UID，并在身份验证成功时将它们添加到套接字对象中。

# php - 将变量传递给类

> ID：15989518
> 
> 赞同：0
> 
> 时间：2013-04-13T15:36:25.237
> 
> 标签：php, inheritance

这是场景：

有3类：**A类，B类，C类**

```
//A.php
class A {
 public $something1;
 public $something2;
 //long list....

// i am the base class
}

//B.php
class B extends A {

// i am a child of A
}

//C.php
class C extends A{

// i do the side work
} 
```

**该程序创建一个对象并为B**类设置值，如下所示：

```
$b = new B();
$b->something1 = "XYZ";
$b->something2 = "ABC";
...... long list..... 
```

现在我想要的是：我想调用`class C`in 的一些函数`class B`。
我知道我可以通过制作这样的对象来做到这`class B`一点`$c = new C();`。

但我也想将程序传递的`B`ie **（something1，something2 ....）**的所有变量 传递给`class C`

我知道我可以这样做：

```
$c->something1 = $this->something1;
$c->something2 = $this->something2 ..... 
```

但是没有上面的代码是否可以做到这一点，因为
`$c->somethingN`会占用太多行而且我不喜欢重复的代码。

我只是想知道有没有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:40:02.177

> 我知道我可以通过在 B 类中创建一个像 $c = new C(); 这样的对象来做到这一点。

如果这是实例成员（不是静态的），这就是要走的路。

* * *

另一种方法是使用静态成员，如下所示：

```
class A {
    public static $foo;
}

class B extends A {}
class C extends A {}

# usage:
B::$foo = 'bar';
echo C::$foo; // will output 'bar' 
```

# c++ - 将汇编代码移植到 C++

> ID：15989526
> 
> 赞同：1
> 
> 时间：2013-04-13T15:36:55.563
> 
> 标签：c++, assembly

我正在将汇编代码移植到 C++，但在移植其中的一部分时遇到了一些问题。

我有一个指针声明为：

```
void* function; 
```

它指向一个函数调用：

```
void* function = getfunction(lib, fname); 
```

我有一个必须迁移到 C++ 的内联汇编代码：

```
__asm { call function } 
```

如何在 C++ 中调用这个指针？

请注意，参数`lib`和`fname`的类型为`void*`.

并`void* function` 指向由 . 返回的值`getfunction()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:53:57.473

在下文中，我假设整个函数调用由

```
__asm { call function } 
```

在这种情况下，这是一个函数指针，可以这样声明：

```
void (*function)(void); 
```

该`__asm`块不会将参数压入堆栈。因此参数列表为空。并且该`__asm`块不提取返回值。所以函数有`void`返回类型。

您以相同的方式分配给函数指针：

```
function = getfunction(lib, fname); 
```

你这样称呼它：

```
function(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:43:20.817

看下面的例子：

```
// ptrFunc is the name of the pointer to the getFunction
void* (*ptrFunc)(void*, void*) = &getfunction;
// ... Declaring whatever lib and fname are
// Now call the actual function by using a pointer to it
ptrFunc(lib, fname);
// Another form of how to call getFunc might be :
(*ptrFunc)(lib, fname); 
```

此外，您可以将函数指针传递给另一个函数，例如：

```
void *getFunction(void* lib, void* fname)
{
   // Whatever
}

void myFunction( void* (*ptrFunc)(void*, void*) )
{
   // void *lib = something;
   // void *fname = something else;
   ptrFunc(lib, fname);
}

int main()
{
    void* (*ptrFunc)(void*, void*) = &getfunction;
    // Passing the actual function pointer to another function
    myFunction(ptrfunc);
} 
```

# sql - 如何在单个 ALTER TABLE 中添加和删除列

> ID：15989527
> 
> 赞同：29
> 
> 时间：2013-04-13T15:36:56.397
> 
> 标签：sql, syntax, alter-table

我尝试了以下方法，但出现语法错误

```
ALTER TABLE Grades ( 
DROP COLUMN (Student_FamilyName, Student_Name),
ADD Student_id INT ); 
```

是否可以在同一语句中执行 a`DROP`和 an ？`ADD``ALTER TABLE`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-13T16:20:26.500

如果您查看[ALTER TABLE SYTAX](http://msdn.microsoft.com/en-us/library/ms190273.aspx)

你会看到这个

```
ALTER TABLE [ database_name . [ schema_name ] . | schema_name . ] table_name 
{ 
    ALTER COLUMN column_name 
    { 
        [ type_schema_name. ] type_name [ ( { precision [ , scale ] 
            | max | xml_schema_collection } ) ] 
        [ COLLATE collation_name ] 
        [ NULL | NOT NULL ] [ SPARSE ]

    | {ADD | DROP } 
        { ROWGUIDCOL | PERSISTED | NOT FOR REPLICATION | SPARSE }
    } 
        | [ WITH { CHECK | NOCHECK } ]

    | ADD 
    { 
        <column_definition>
      | <computed_column_definition>
      | <table_constraint> 
      | <column_set_definition> 
    } [ ,...n ]

    | DROP 
     {
         [ CONSTRAINT ] 
         { 
              constraint_name 
              [ WITH 
               ( <drop_clustered_constraint_option> [ ,...n ] ) 
              ] 
          } [ ,...n ]
          | COLUMN 
          {
              column_name 
          } [ ,...n ]
     } [ ,...n ] 
```

这可以简化为

`ALTER TABLE { ALTER COLUMN column_name | ADD | DROP }`

根据[Transact-SQL 语法约定 (Transact-SQL](http://msdn.microsoft.com/en-us/library/ms177563.aspx) ) **| （竖条）**

> 分隔括在方括号或大括号中的语法项。您只能使用其中一项。

因此，您不能在单个语句中更改、删除或添加。你也有不起作用的括号和逗号。所以你需要

```
ALTER TABLE Grades DROP COLUMN (Student_FamilyName, Student_Name);
ALTER TABLE Grades ADD  Student_id INT; 
```

如果你需要它们成为一个原子动作，你只需要包装在事务中

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-21T15:02:59.267

如果你的数据库是 MySQL，你可以这样做：

```
ALTER TABLE Grades
    DROP COLUMN Student_FamilyName, 
    DROP COLUMN Student_Name,
    ADD Student_id INT; 
```

适用于**MySQL 5.5.5**

# mysql - “'字段列表'中的未知列”，但列确实存在

> ID：15989529
> 
> 赞同：26
> 
> 时间：2013-04-13T15:37:09.817
> 
> 标签：mysql, sql, insert, innodb

```
DROP TABLE IF EXISTS `transactions`;
CREATE TABLE `transactions` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `purchase_date` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
INSERT INTO `transactions` (`purchase_date`) VALUES (NULL) 
```

我已经在这段代码中隔离了我的问题。当我运行它时，我收到错误：

> [查询 3 中的错误] '字段列表' 中的未知列 'purchase_date'

任何人的想法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-13T15:48:40.637

在语句`purchase_date`的 和之间插入了一个不可打印的字符 30（RecordSeparator） 。只需删除文本并手动重写它应该没问题。`'``INSERT``('purchase_date')`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-26T11:06:10.553

当我收到此错误时，Nery 利基解决方案。

我的桌子上有一个`BEFORE INSERT`触发器，它做了一些事情， `NEW.`field_mysql_doesnt_think_exists`` 如果我没有将该字段传递给插入语句，那么我会得到

`[ERROR in query 3] Unknown column 'field_mysql_doesnt_think_exists' in 'field list'`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-10T20:01:49.730

我只是花了一天的大部分时间来解决这个问题。我的问题是一样的：不可见的字符 kiboshing 查询并返回“未知列”错误。

我通过涉水回到 Windows 并使用 NotePad++ 删除垃圾来解决它。

垃圾最初是如何进入那里的？我认为这是因为我错误地将一些长而复杂的查询复制到 LibreOffice Writer（我的功能规范文档）中，而不是仅仅在 phpMyAdmin 中添加书签或将它们保存在文本编辑器中。将它们从 LibreOffice 粘贴到查询窗口是（我认为）垃圾的来源。

一旦到了那里，它就会像疟疾一样持续存在。我什至无法通过手动重新输入整个查询来摆脱它——我必须将它放入 NotePad++（编码菜单）并显示 ANSI 和 UTF8 组合，然后手动删除垃圾。

完成后，查询就起作用了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-30T14:04:05.673

如果在构建表结构时粘贴列名，也会发生这种情况。同样的错误 - 但不可打印/不可见的字符在表结构中，而不是查询中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-17T19:20:53.660

这可能对其他人没有帮助，但添加这个“以防万一”它可以帮助某人。

我以 Excel CSV 文件的形式接收大型数据集，并使用 (WIL) 脚本将 .csv 文件转换为可导入的 .sql 文件。

我的转换脚本中有一个错误，这两行没有引用相同的表名（我硬编码了第一个位置并忘记更新它）：

```
* "INSERT INTO `old_table_name` (`cid`, `date`, etc etc"
* "CREATE TABLE IF NOT EXISTS `":_dbName:"` (etc etc " 
```

我刚刚更改了第一行以从变量中获取表名，瞧！

```
* "INSERT INTO `":_dbName:"` (`cid`, `date`, etc etc" 
```

因此，请检查导入 SQL 文件中的这两行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-03T05:29:42.707

我今天早上遇到了同样的问题，但我没有找到答案。但是当我将查询周围的单引号更改为双引号时，我发现了我的问题。这么小的事情和疏忽可能会引起真正的头痛。

“字段列表”中的未知列 x - 下面的代码用单引号括起来 - 无效。

```
 $likepost='INSERT INTO reaction(reaction_num,userreaction_id,timereacted,
    streamitem_id,comment_posted_on) 
    VALUES ($reaction,$target,NOW(),$streamid,$comment_id)'; 
```

下面的代码用双引号括起来。在职的

```
 $likepost="INSERT INTO reaction(reaction_num,userreaction_id,timereacted,
    streamitem_id,comment_posted_on) 
    VALUES ($reaction,$target,NOW(),$streamid,$comment_id)"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-12T15:23:51.440

不同情况下的相同错误：

当您错过变量的 @ 符号时，也会发生这种情况。

```
SET @myVar1=1;  SELECT @myVar1;  -- GOOD, correctly prints:  1
SET @myVar1=1;  SELECT  myVar1;  -- BAD, prints:  Unknown column 'myVar1' in 'field list' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-14T17:58:03.127

当您想使用以下函数使用 mysql 时：

```
function insert($table, $info_array){
    // implode keys as columns by [`,`] glue string
    $columns = implode("`,`", array_keys($info_array));

    // implode values as sql ready values by [','] glue string
    $values = implode("','", array_values($info_array));

    // make query(careful about [`] for columns name and ['] for values)
    $sql = "INSERT INTO ".$table." (`".$columns."`) VALUES ('".$values."');";
    return $sql;
} 
```

您应该注意**表列名称的 [`]**和**值的 ['] 或 ["]**。例如，我以这种方式使用上述函数：

```
try{
        $db_insert_sample_user = $connection->query(insert(TABLE_PREFIX."users", [
            "username" => "my_name_2",
            "password" => md5("how457fty")
        ]));
        echo '<pre>';
        print_r($db_insert_sample_user);
        echo '</pre>';
    }catch (PDOException $exc){
        echo '<pre>';
        print_r($exc);
        echo '</pre>';
    } 
```

查询字符串是这样的：

```
INSERT INTO php_pdo_users (`username`,`password`) VALUES ('my_name_2','ee04708d313adf4ff8ba321acf3eb568'); 
```

结果就像：（对于两个用户） [PHPMyAdmin 结果](https://i.stack.imgur.com/00ibN.png)

如果您想要基于准备好的语句的函数，请对此进行测试：（**占位符、参数和值，根本不需要 ['] 或 ["]！！！**）

```
function insert_prepared(PDO $connection, $table, $info_array){
    // columns
    $columns = implode("`,`", array_keys($info_array));

    // placeholders
    $place_holders = [];
    for ( $i = 0; count(array_keys($info_array)) > $i; $i++){
        $place_holders[] = '?';
    }

    // convert placeholders to query string
    $place_holders_str = implode(",", $place_holders);
    $prepared_stmt = "INSERT INTO ".$table." (`".$columns."`) VALUES (".$place_holders_str.");";

    // prepare statement
    $stmt = $connection->prepare($prepared_stmt);

    // values
    $values = array_values($info_array);

    // bind all params to values
    for($i = 0; count($values) > $i; $i++){
        $stmt->bindParam($i + 1, $values[$i]);
    }

    // execute and return results
    return $stmt->execute();
} 
```

以这种方式执行代码后：

```
try {
        $db_insert_sample_user = insert_prepared(
            $connection,
            TABLE_PREFIX . "users",
            [
                "username" => "my_name_4",
                "password" => md5( "HelloDolly#__3" )
            ]
        );
    } catch ( PDOException $exc ) {
        echo "Failed : " . $exc->getMessage();
    } 
```

结果是： [具有`insert_prepared`功能的结果](https://i.stack.imgur.com/KmH0W.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-19T13:09:31.147

我使用的是 mysql 过程，并且在过程参数中我使用`phone` 了额外的空间而不是`phone`没有额外的空间，因为当我调用该函数时。它只是抛出错误没有这样的列`phone` 。直到我奇迹般地发现它并使用 phpMyAdmin 纠正它，错误才消失。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2020-06-29T12:11:31.670

查看您正在处理的表的名称

# cocos2d-iphone - Box2D & Cocos2d 关卡重置问题

> ID：15989531
> 
> 赞同：0
> 
> 时间：2013-04-13T15:37:12.017
> 
> 标签：cocos2d-iphone, box2d, user-data

我有一个非常简单的关卡，其中有一个静态主体（和关联的精灵）。当用户触摸身体时，我移除精灵，销毁身体并用带有新精灵的动态身体替换它，然后我过渡到新场景。我的代码在第一次执行时运行良好，但是当重新加载这个场景时，当用户触摸身体时它会崩溃。

我将用于精灵的 .png 文件的文件名存储在精灵的 userData 字段中。然后当用户按下按钮（触摸身体）时，检索它是一件简单的事情。当我尝试访问精灵的 userData 字段时，在随后重新加载场景时会出现问题。而不是保存文件名，它是空的（null）。当我尝试使用文件名时，这反过来会使程序崩溃。

我不明白为什么它是第一次而不是第二次。我设置了一个断点并观察分配给精灵的 userData 字段的文件名，但它只能在我第一次创建场景时检索。这是 ccTouchesBegan 方法。崩溃发生在我尝试分配 newSpriteFileName 的地方，因为在第二次运行时 oldSpriteFileName 是空的。

我刚刚对这个发疯了，但我相信这是显而易见的。一如既往地感谢您的帮助！！

```
 (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
        for( UITouch *touch in touches )
        {
            CGPoint touchLocation = [touch locationInView: [touch view]];
            touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];

    touchLocation = [self convertToNodeSpace:touchLocation];
    b2Vec2 locationWorld = b2Vec2(touchLocation.x/PTM_RATIO, touchLocation.y/PTM_RATIO);

    NSLog(@"Location x = %f, y = %f", touchLocation.x, touchLocation.y);
    b2AABB aabb;
    b2Vec2 delta = b2Vec2(1.0/PTM_RATIO, 1.0/PTM_RATIO);
    aabb.lowerBound = locationWorld - delta;
    aabb.upperBound = locationWorld +delta;
    SimpleQueryCallback callback(locationWorld);
    m_world->QueryAABB(&callback, aabb);

    //If they have not pressed a button yet, and this touch was actually inside 
    //one of the buttons then we will destroy the static button (and sprite) 
    //that they touched and replace it with a dynamic button
    //(and new darker sprite) that falls, spinning off of the screen.
    if(!replaceButtonPushedYet && callback.fixtureFound)
    {
        //Get a reference to the static body of the button they touched and wake it up
        b2Body *body = callback.fixtureFound->GetBody();
        body->SetAwake(true);

        //Get the position of the body (button) they touched and use it to 
        //position the new button.  This value is in Box2D coordinates, 
        //so when I position the new button I won't divide by PTM_RATIO.
        b2Vec2 touchedButtonPosition = body->GetPosition();

        //Get the sprite from the button the user pressed
        CCSprite *bodySprite = (CCSprite*)body->GetUserData();

        //Then extract the file name of the sprite.  I assigned this to 
        //sprite's userData when I loaded the sprite in the method          //"placeTheIndividualButton".  Now I am going to extract it and 
        //then replace "(up)" with "(down)" in that string
        //and that becomes the name of the sprite for the new (pressed) 
        //button I am getting ready to create.  It is all about the file
        //naming conventions!
        NSString *oldSpriteFileName = (NSString*)bodySprite.userData;
        NSString *newSpriteFileName = [oldSpriteFileName stringByReplacingOccurrencesOfString:@"up" withString:@"down"];

        //First remove the sprite tied to the button the user pressed, 
        //then destroy the body of the button.
        [self removeChild:bodySprite cleanup:YES];
        body->GetWorld()->DestroyBody(body);

        //Set the bool to true to keep this code from executing again.  
        //This ensures that once they press a button they can't 
        //press another one.
        replaceButtonPushedYet = true;

        //Build the new dynamic button that will fall and spin off the screen
        b2BodyDef buttonBodyDef2;
        b2PolygonShape buttonShape2;
        b2FixtureDef buttonShapeDef2;
        b2Vec2 vertices2[4];

        //load the sprite for the second button (pressed down) and add it to the layer
        level_down = [CCSprite spriteWithFile:newSpriteFileName];
        level_down.userData=newSpriteFileName;
        [self addChild:level_down];

        //Define the polygon that forms the second button (pressed down)
        buttonBodyDef2.type = b2_dynamicBody;
        //Not dividing touchedButtonPosition.x or .y by PTM_RATIO because 
        //they are already in Box2D coordinates
        buttonBodyDef2.position.Set(touchedButtonPosition.x, touchedButtonPosition.y);
        buttonBodyDef2.angularVelocity = 1.5;
        buttonBodyDef2.userData = level_down;
        buttonBody2 = m_world->CreateBody(&buttonBodyDef2);

        //Define the vertices for the replacement button
        vertices2[0].Set(-94/PTM_RATIO, -32/PTM_RATIO);
        vertices2[1].Set(94/PTM_RATIO, -32/PTM_RATIO);
        vertices2[2].Set(94/PTM_RATIO, 32/PTM_RATIO);
        vertices2[3].Set(-94/PTM_RATIO, 32/PTM_RATIO);
        buttonShape2.Set(vertices2, 4);

        //Define the shape for the replacement button
        buttonShapeDef2.shape = &buttonShape2;
        buttonShapeDef2.density = 50.01f;
        buttonShapeDef2.friction = 0.75f;
        buttonShapeDef2.restitution = 0.1f;

        //The static buttons and the dynamic buttons are both in this groupIndex.  
        //Since it is a negative number they will never collide.  If it was 
        //positive they would always collide.
        buttonShapeDef2.filter.groupIndex = -1;

        //Put the second button (pressed down) into the world.
        buttonBody2->CreateFixture(&buttonShapeDef2);

        //This starts a timer that fires every second to call the makeTransition 
        //method.  The code inside that method will check to see if the button 
        //has fallen off the screen yet.  If it has then it will transition to 
        //the new selected level.
        //The colon after makeTransition sends a ccTime (dt).  I don't need it, 
        //but may in the future so I left it in there.
        buttonFalling = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(makeTransition:) userInfo:nil repeats:YES];
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:23:09.533

当您删除精灵时，可能`NSString`会被释放。为什么不将纹理名称存储在实例变量中？

# c - 使用类似堆栈的数组添加两个数字

> ID：15989534
> 
> 赞同：1
> 
> 时间：2013-04-13T15:37:25.957
> 
> 标签：c, algorithm

因此，例如，如果我想添加 20 + 15，我需要有两个数组：

```
a = {2, 0}
b = {1, 5} 
```

我应该得到以下数组作为结果：

```
outcome = {3, 5} // or {5, 3} and read it in reverse order 
```

困难的部分是我只能使用这些数组的第一个元素，以便它们表现得像堆栈。

在我的示例中，这相对容易，但如果有类似的数字`{1, 0, 0, 0} + {5}`怎么办？或者`{9, 9} + {9, 9}`？

我真的找不到一种具体的方法来做到这一点，更不用说我找不到任何解决方法了`{1, 0, 0, 0} + {5}`。

C 标记在这里是因为我实际上需要用 C 语言编写这个东西，但是任何关于解决方案的想法都会受到欢迎（我的意思是描述，不一定是 C 程序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:46:33.770

颠倒数字，使最不重要的数字在第一位，最重要的数字在最后。加法算法从最不重要到最重要。

```
a = {0, 0, 0, 1}
b = {5} 
```

添加这些数字现在应该很简单了。从每个中弹出一个数字，将它们相加，然后将结果压入结果堆栈。

```
a = {9, 9}
b = {9, 9} 
```

要处理 99 + 99，您需要跟踪进位。这将是您存储的一个额外变量，不会进入任一堆栈。弹出 9 和 9，将它们相加得到 18。将 8 压入结果堆栈并存储进位数字。

```
a = {9}
b = {9}
outcome = {8}
carry = 1 
```

现在弹出接下来的两位数，9 和 9，并将它们相加得到 18。将进位数字相加得到 19。将 9 压入结果堆栈并再次跟踪进位。

```
a = {}
b = {}
outcome = {9, 8}
carry = 1 
```

现在输入堆栈上没有数字了，所以最后将最后一个进位数字压入结果堆栈。

```
outcome = {1, 9, 8} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:43:32.113

试试这个（未经测试）（**更新为处理携带**）：

```
Stack Add(Stack a, Stack b, bool carry) {
  if (a.Empty && b.Empty) return (carry ? a.Push(1) : a);
  int c = (a.Empty ? 0 : a.Pop)
        + (b.Empty ? 0 : b.Pop)
        + (carry ? 1 : 0);
  if (c>=10) 
    return Add(a,b,true).Push(c-10)
  else
    return Add(a,b,false).Push(c);
} 
```

当然，它隐含地使用函数调用堆栈以及**a**和**b**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T15:49:47.320

我认为您最大的希望是这样的算法：

```
pop digits from stack a and compute number n1
pop digits from stack b and compute number n2
add n1 and n2 giving n3
push digits from n3 onto stack outcome 
```

如果做不到这一点，您必须知道每个堆栈中有多少个数字，`a`并且`b`，以便您可以正确对齐它们。

另一种但不太直观的表示也可以提供帮助：

```
a = { 0, 2 }
b = { 5, 1 }

c = { 0, 0, 0, 1 }
d = { 5 } 
```

首先存储最低有效位。现在，您可以根据需要从堆栈的前面开始添加和携带。

# c++ - 如何从函数中获取标签

> ID：15989535
> 
> 赞同：1
> 
> 时间：2013-04-13T15:37:33.533
> 
> 标签：c++, .net, windows, winforms, label

我曾尝试像这样调用Form。它可以正常工作。我在循环中的另一个函数中使用它。所以我可以更新它。只需调用并关闭：

```
OutlookAddIn::MyForm p1;
System::String^ str =gcnew System::String(FullName);
p1.label1->Text = "" + str;
p1.ShowDialog(); 
```

但我需要更新它，直到循环对每个都有效。我找到了一个解决方案 - 它在线程中调用表单：

```
include <windows.h>
include "Connect.h"
extern int Main();

void  MainThread( )
{
    HANDLE hThread;
    DWORD  ThreadId;
    BOOL   Active;

    hThread = CreateThread(NULL, 0,
                           (LPTHREAD_START_ROUTINE)Main,
                           (void*)&Active, 0, &ThreadId);

    while(Active == TRUE);

    CloseHandle(hThread);
} 
```

主要功能：

```
#include "MyForm.h"

using namespace OutlookAddIn; 

[STAThreadAttribute]
#define PBM_DELTAPOS            (WM_USER+3)
int Main()
{
Application::EnableVisualStyles();
Application::SetCompatibleTextRenderingDefault(false); 
auto form = gcnew MyForm();
Application::Run(form);
    return 0 ;

} 
```

现在我有一个可以工作的线程 - 我只是在我需要的地方调用我`MyThread();`还在我的循环函数中重新制作：

```
 OutlookAddIn::MyForm p1;
    System::String^ bstrArray =gcnew System::String(FullName);
    p1.label1->Text = "" + bstrArray; 
```

但现在我遇到了问题 - 每次循环调用时：

```
OutlookAddIn::MyForm p1; 
```

程序到这里（在 MyForm.cpp 中）：

```
this->label1->AutoSize = true;
            this->label1->Location = System::Drawing::Point(12, 57);
            this->label1->Name = L"label1";
            this->label1->Size = System::Drawing::Size(59, 13);
            this->label1->TabIndex = 2;
            this->label1->Text = L"Test"; 
```

我有标签=测试。

# c# - 如果可以使用普通方法，为什么要使用扩展方法？

> ID：15989537
> 
> 赞同：0
> 
> 时间：2013-04-13T15:37:35.463
> 
> 标签：c#, extension-methods

请有人解释为什么[这个问题](https://stackoverflow.com/questions/178333/multiple-inheritance-in-c-sharp)的答案提倡在定义基本接口时使用扩展方法。- 为什么不在各自的接口中包含 SteerLeft() 和 Stop() 方法？- 是为了说明添加不应该/不能被“基地”预期/强迫的行为吗？- 当您需要方向盘时，“强制”一些像“转向”行为这样基本的东西不是更好吗？

下面，我提取了相关代码。回答者说：

> 您可以使用添加到 C# 3.0 的扩展方法功能来进一步简化对这些隐含属性的调用方法

```
public interface ISteerable { SteeringWheel wheel { get; set; } }

public interface IBrakable { BrakePedal brake { get; set; } }

public class Vehicle : ISteerable, IBrakable
{
    public SteeringWheel wheel { get; set; }

    public BrakePedal brake { get; set; }

    public Vehicle() { wheel = new SteeringWheel(); brake = new BrakePedal(); }
}

public static class SteeringExtensions
{
    public static void SteerLeft(this ISteerable vehicle)
    {
        vehicle.wheel.SteerLeft();
    }
}

public static class BrakeExtensions
{
    public static void Stop(this IBrakable vehicle)
    {
        vehicle.brake.ApplyUntilStop();
    }
}

public class Main
{
    Vehicle myCar = new Vehicle();
    public void main()
    {
     myCar.SteerLeft();
     myCar.Stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:40:29.840

使用扩展方法的要点是`method`即使您没有`Source code`or it也可以添加到现有的 .Net 类中`reside within different assembly`。

扩展方法有助于

1.  这些方法可以在类型已经发布之后（在类型创作时间之后）添加。
2.  扩展方法可以针对接口。
3.  不同的人可以根据自己的需要以不同的方式扩展相同的类型。

* * *

以 LINQ 为例，它提供了适用于任何`IEnumerable`类型的方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:41:57.533

`EM`不是多重继承的替代品，*也不*是继承机制。顾名思义，它只是一个工具，可以通过您的方式*扩展* 某种类型的功能。

在这个*具体*的代码中，没有太多的使用意义`EM`。正如您所指出的，您可以轻松地扩展该类的功能，只需在其主体中添加一个新方法。

`EM`*在您无法*更改课程的原始来源或不允许这样做的情况下非常有用。

# java - Spring Roo shell 在推入后删除了我的 Roo_Controller.aj 文件

> ID：15989540
> 
> 赞同：1
> 
> 时间：2013-04-13T15:37:48.447
> 
> 标签：java, spring-mvc, spring-roo

推入几种方法后，roo shell 将删除我的 aj 文件。

只需将这些方法中的任何一个复制到 Controller java 文件的主文件都会导致：

```
Deleted backoffice|SRC_MAIN_JAVA/xxx/actions/TicketController_Roo_Controller.aj - empty 
```

我正在使用一个多模块项目，这会有所作为。我的控制器在一个模块中，我的实体在另一个模块中。如果 roo shell 没有运行，我的推入方法可以正常工作。

这可能是什么原因造成的？

**更新**

在我的其他一些由其他实体支持的控制器中，推送方法在起作用。我试图找出问题所在，它可能与 Ticket 实体有关，它有一些额外的查找器和额外的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-15T06:20:58.167

检查导入并查看是否存在通配符导入。

请删除通配符导入并再次检查。

这解决了我的问题。

# android - 将用户照片从 facebook 检索到 android

> ID：15989542
> 
> 赞同：0
> 
> 时间：2013-04-13T15:37:51.213
> 
> 标签：android, facebook-graph-api, photos

我想知道是否有一种方法可以从他的 facebook 中检索所有用户的图片并以类似意图的 imageview 显示它们？

谢谢！

# c# - 企业服务总线的好参考

> ID：15989545
> 
> 赞同：0
> 
> 时间：2013-04-13T15:38:04.667
> 
> 标签：c#, esb

我刚刚开始使用 ESB，我目前正在阅读[rhino-esb](http://www.hibernatingrhinos.com/oss/rhino-service-bus)的代码，以了解它是如何实现的。

是否有任何好的资源（即书籍、视频）可供初学者开始使用 ESB？我也试图了解 EAI 和 ESB 之间的区别。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:01:04.023

这个网站（[http://www.eaipatterns.com/](http://www.eaipatterns.com/)）有关于 EAI 的很好的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T17:10:09.753

您可以开始查看[Apache Synapse](http://synapse.apache.org/) Enterprise Service Bus (ESB)。它有很多[示例](http://synapse.apache.org/userguide/samples.html)，可以帮助您了解 ESB 功能。

# python - 发送邮件的shell命令在python子进程调用中不起作用

> ID：15989547
> 
> 赞同：0
> 
> 时间：2013-04-13T15:38:17.677
> 
> 标签：python, shell, email

我在 shell 中使用 mail 命令发送电子邮件：

```
echo "abc" | mail -s "Subject" abc@def.com 
```

我想在python中使用这个命令，所以我写了以下内容：

```
call("echo abc" "|" "mail", "-s Subject", "abc@def.com", shell=True) 
```

然后它给了我以下错误：

```
Original exception was:
Traceback (most recent call last):
  File "email.py", line 7, in <module>
    call("mail", "-s", "Subject", "abc@def.com", shell=True)
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 629, in __init__
    raise TypeError("bufsize must be an integer")
TypeError: bufsize must be an integer 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:43:22.563

尝试调用这样的`call`方法

```
call(["mail", "-s", "'Subject'", "abc@def.com"], shell=True) 
```

第2部分：

```
sudo touch /var/mail/<username>
sudo chown <username>:mail /var/mail/<username>
sudo chmod o-r /var/mail/<username>
sudo chmod g+rw /var/mail/<username> 
```

取自[这里](http://ubuntuforums.org/showthread.php?t=1500892)

# php - 使用 wp_insert_post 设置新页面作为起始页面

> ID：15989550
> 
> 赞同：1
> 
> 时间：2013-04-13T15:38:27.687
> 
> 标签：php, wordpress, wordpress-theming

我正在创建一个带有 Wordpress 子主题的 APP。`wp_insert_post`它有一个在激活主题时创建的起始页。如何在**functions.php**`startpage`中设置此页面与 PHP一样？

 **```
// Install theme
if ( is_admin() && isset($_GET['activated'] ) && $pagenow == 'themes.php' ) {
        $last_id = wp_insert_post(array(
            'post_type' => 'page',
            'post_title' => 'Welcome to this wonderful page!',
            'post_content' => 'Holy smoke',
            'post_name' => 'startpage',
            'post_status' => 'publish',
            'comment_status' => 'closed'
        ));
        update_post_meta($last_id, "_wp_page_template", "page.php");

// Set this page as startpage... but how? 

} // Install theme 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:24:30.330

如果理解正确，您正在搜索选项`page_on_front`：

> [![前页](https://i.stack.imgur.com/yZMVu.png)](https://i.stack.imgur.com/yZMVu.png)

只需使用：

```
// Set "static page" as the option
update_option( 'show_on_front', 'page' );

// Set the front page ID
update_option( 'page_on_front', $last_id ); 
```**

# asp.net - 在 ASP.NET MVC 中重置密码

> ID：15989552
> 
> 赞同：0
> 
> 时间：2013-04-13T15:38:34.253
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我正在 ASP.NET 中实现我自己的重置密码。在重置密码中，首先我创建一个随机字符串并将其邮寄到用户电子邮件。对于电子邮件中的链接，例如[http://xyz.com/account/forgot?random=xxxx&userid=xx](http://xyz.com/account/forgot?random=xxxx&userid=xx.I) 。我创建了一个 httpget 类型操作忘记显示哪个如果 randomid 和 userid 被验证，则返回带有密码输入标签的视图。但是在httppost类型的忘记中，我对参数感到困惑。我忘记了具有 2 个属性密码和确认密码的模型。如果我只是将 forgotmodel 传递给 httppost 操作，那么我无法从数据库中查询用户。我想我应该将 randomId 作为参数传递。但是，我正在了解如何从 httpget 操作的 url 获取 randomID （如果我这样做，它安全吗？）？请指导我，我被卡住了..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:39:48.483

您是否使用类似 Html.BeginForm("action","controller")，如果是这样，那么您将丢失查询字符串参数。由于 ForGotPassword(..) 的 HttpGet 和 HttpPost 方法具有相同的操作名称，**您可以只使用 Html.BeginForm()。因此，表单会将数据发布到页面 url，并且您将获得查询字符串。**

在您的 http post 方法中，您可以定义如下，

```
 [HttpPost]
    public ActionResult ForGot(ForgotModel model, string random,strung userid)
    {
     :
     :
    } 
```

*   如果您不想遵循上述方法，则在 httpget 方法中写入 ViewBag/ViewData 并将它们作为隐藏字段放在视图中。然后您可以接收它们作为 Method 的输入。

    ```
    [HttpGet]
    public ActionResult ForGot(string random,strung userid)
    {
     ViewBag.Random =random;
     Viewbag.Userid =userid;
     :
     :
    } 
    [HttpPost]
    public ActionResult ForGot(ForgotModel model, string random,strung userid)
    {
     :
     :
    } 
    ```

并且 , 鉴于

```
@Html.BeginForm("ForGot","Account"){
:
 @Html.Hidden(ViewBag.Random)
 @Html.Hidden(ViewBag.Userid)
:
} 
```

# html - 当我的网页加载时，如何将文本框设置为已经成为焦点

> ID：15989554
> 
> 赞同：4
> 
> 时间：2013-04-13T15:38:54.927
> 
> 标签：html

当我的网页加载时，我希望一个文本框成为焦点。如果您访问 google.com，您可以看到文本框已经成为焦点。这就是我想要的。

这是我的表格：

```
<form id="searchthis" action="#" style="display:inline;" method="get">
  <input id="namanyay-search-box" name="q" size="40" x-webkit-speech/>
  <input id="namanyay-search-btn" value="Search" type="submit"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:48:27.480

为您的文本输入提供[`autofocus`](http://msdn.microsoft.com/en-us/library/ie/hh772924%28v=vs.85%29.aspx)属性。它有相当好的浏览器支持，虽然并不完美。我们可以很容易地填充这个功能；我冒昧地在下面写了一个例子。只需将它放在文档的底部（这样当它运行时，元素已经存在），它会找到你的`autofocus`元素（注意：你应该**只有一个**，否则你可能会得到[不一致的结果](https://twitter.com/jonathansampson/status/323554911797272576)），然后将注意力集中在它上面.

```
(function () {

    // Proceed only if new inputs don't have the autofocus property
    if ( document.createElement("input").autofocus === undefined ) {

        // Get a reference to all forms, and an index variable
        var forms = document.forms, fIndex = -1;

        // Begin cycling over all forms in the document
        formloop: while ( ++fIndex < forms.length ) {

            // Get a reference to all elements in form, and an index variable
            var elements = forms[ fIndex ].elements, eIndex = -1;

            // Begin cycling over all elements in collection
            while ( ++eIndex < elements.length ) {

                // Check for the autofocus attribute
                if ( elements[ eIndex ].attributes["autofocus"] ) {

                    // If found, trigger focus
                    elements[ eIndex ].focus(); 

                    // Break out of outer loop
                    break formloop;

                }

            }

        }

    }

}()); 
```

经过一些初步测试，这似乎一直支持 Internet Explorer 6、Firefox 3 等。

在您选择的浏览器中进行测试：http: [//jsfiddle.net/jonathansampson/qZHxv/show](http://jsfiddle.net/jonathansampson/qZHxv/show)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T15:50:42.087

Jonathan Sampson 的 HTML5 解决方案可能是最好的。如果您使用 jQuery，steo 的示例也应该可以工作。为了完整起见，这里有适用于所有浏览器和 IE10+ 的纯 JS 解决方案

```
window.addEventListener("load",function() {
  document.getElementById("namanyay-search-box").focus();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:43:41.210

```
$(document).ready(function(){

..code.. 
$('.textbox-class-name').focus();
..code.. 
}); 
```

或者你可以试试`$(window).load()`

# ios - predicateWithFormat:argumentArray: 仅使用 NSArray 中的第一项

> ID：15989555
> 
> 赞同：0
> 
> 时间：2013-04-13T15:38:57.507
> 
> 标签：ios, core-data, nspredicate, nsfetchedresultscontroller

我正在为我的核心数据模型编写一个 fetchedResultsController，并且只使用argumentArray 中的一项时遇到了谓词问题。如果数组有 3 个项目，它会打印出这个：`NOT unique == "16C0629D-F8B6-4DF3-9AAD-820821B6D325"`并且只搜索第一个项目。

我完整的 fetchedResultsController 代码如下。我搜索了一堆，似乎找不到关于我正在使用的方法的太多讨论。任何帮助表示赞赏。谢谢！

```
- (void)setupFetchedResultsController
{
  NSMutableArray *opponentUniques = [NSMutableArray array];
  for (Opponent *opponent in self.opponentArray) {
    [opponentUniques addObject:opponent.personUnique];
  }
  NSPredicate *searchPredicate = nil;
  if ([opponentUniques count] > 0) {
      searchPredicate = [NSPredicate predicateWithFormat:@"!(unique == %@)" argumentArray:opponentUniques];
  }

  NSFetchRequest *allPeople = [NSFetchRequest fetchRequestWithEntityName:@"Person"];
  allPeople.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES]];
  allPeople.predicate = searchPredicate;
  self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:allPeople
                                                                    managedObjectContext:self.managedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:47:08.517

可能这会起作用： `[NSPredicate predicateWithFormat:@"NOT (self.unique IN %@)", opponentUniques]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:44:53.660

You are not using `NSPredicate` correctly. Take a look at `NSCompundPredicate`. You want something like [`andPredicateWithArray`](http://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/Classes/NSCompoundPredicate_Class/Reference/Reference.html#//apple_ref/occ/clm/NSCompoundPredicate/andPredicateWithSubpredicates).

# javascript - 数组上的随机值

> ID：15989559
> 
> 赞同：0
> 
> 时间：2013-04-13T15:39:22.883
> 
> 标签：javascript, arrays, random

我想在数组上生成一个随机值。但是每次点击，数组都会获得一个新值，所以我不想得到一个在数组上已经有值的随机值。简而言之，我需要随机获取数组的空值。

这是代码的一小部分。我的数组上有 9 个值，一开始它们都是空的。

```
var gameCase = ['', '', '', '', '', '', '', '', ''];
var randomValue = gameCase[VALUE_EMPTY*][Math.round(Math.random()*gameCase.length)]; 
```

*这是我真的不知道该怎么做的部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:51:24.810

有几种方法可以解决这个问题：

**方法一：**不断生成随机索引，直到它指向一个空值

```
var gameCase = ['', '', '', '', '', '', '', '', ''];
var randomIndex = Math.round(Math.random()*gameCase.length) % emptyCases.length;
var randomValue = gameCase[randomIndex];
// while we haven't found the empty value
while (randomValue !== '') {
    // keep on looking
    randomIndex = Math.round(Math.random()*gameCase.length % emptyCases.length);
    randomValue = gameCase[randomIndex];
}
// when we exit the while loop:
//     - randomValue would === ''
//     - randomIndex would point to its position in gameCase[] 
```

**方法 2：**有一个第二个数组来跟踪数组的哪些索引`gameCase`具有空值

```
var gameCase = ['', '', '', '', '', '', '', '', ''];
var emptyCases = [0,1,2,3,4,5,6,7,8];

if (emptyCases.length > 0) {
    // generate random Index from emptyCases[]
    var randomIndex = emptyCase[Math.round(Math.random()*emptyCase.length) % emptyCases.length];
    // get the corresponding value
    var randomValue = gameCase[randomIndex];
    // remove index from emptyCases[]
    emptyCases.splice(randomIndex, 1);
} 
```

方法#2 在某种意义上更有效，因为您没有浪费时间来生成/猜测随机索引。对于方法#1，您需要一种方法来检查*是否有任何空值留在其中`gameCase[]`*，否则您可能会在无限循环中永远生成/猜测。

**更多：**当您设置值时，`gameCase[]`您需要`emptyCases[]`相应地更新以准确反映以下状态`gameCase[]`：

```
var gameCase = ['', '', '', '', '', '', '', '', ''];
var emptyCases = [0,1,2,3,4,5,6,7,8];

/* Update a value in gameCase[] at the specified index */
var setGameCaseValue = function(index, value) {
    // set value for gameCase[]
    gameCase[index] = value;

    if (value !== '') {    // we're setting a value
        // remove that index from emptyCases[]
        emptyCases.splice(emptyCases.indexOf(index), 1);   
    } else {    // we're setting it back to empty string
        // add that index into emptyCases[] that refers to the empty string in gameCase[]
        emptyCases.push(index);        
    }
};

setGameCaseValue(2, 'null');
// gameCase now has ['','','null','','','','','','']
// emptyCases now has [0,1,3,4,5,6,7,8]

setGameCaseValue(0, 'null');
// gameCase now has ['null','','null','','','','','','']
// emptyCases now has [1,3,4,5,6,7,8]

setGameCaseValue(5, 'null');
// gameCase now has ['null','','null','','','null','','','']
// emptyCases now has [1,3,4,6,7,8]

setGameCaseValue(7, 'null');
// gameCase now has ['null','','null','','','null','','null','']
// emptyCases now has [1,3,4,6,8] 
```

见小提琴：http: [//jsfiddle.net/rWvnW/1/](http://jsfiddle.net/rWvnW/1/)

# javascript - CodeMirror 中的换行符

> ID：15989560
> 
> 赞同：0
> 
> 时间：2013-04-13T15:39:33.097
> 
> 标签：javascript, newline, codemirror

我正在为 CodeMirror 编写一个无上下文的解析器，它一次解析一个字符的代码，并根据所采用的状态转换输出一种样式。代码使用换行符 \n 来触发状态转换，但 CodeMirror 似乎从输入文本中删除了这些（console.log (char === '\n') 总是返回 false）

无论如何配置 CodeMirror 给我 \n 作为输入？文档似乎没有提到这个问题。

我的状态对象格式如下

```
{
    state1: {
       active: true,
       edges: {
           '\n': 'state2'
       }
    },
    state2: {
       active: false,
       edges: {
           '#': 'state1'
       }
    }
} 
```

如果需要任何其他信息或澄清，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:00:54.777

`console.log (char === '\n')`总是返回`false`并不一定意味着 CodeMirror 去除换行符 - 文本按原样传递，即将`\n`作为两个字符传递 -`\`和`n`.

尝试并利用`token`您的模式中的方法在`\n`流中进行检测：

```
var newLine = '\\n';

token : function(stream) {

    var next = stream.next();
    var tokenName = null;

    if ('\\' === next) {
        var match = stream.match(new RegExp(newLine.charAt(1)));
        match && (tokenName = 'some-style' || null);
    }
    return tokenName;
} 
```

您还可以推广该方法以处理任何序列，而不仅仅是`\n`：

```
var sequence = 'some-sequence';

token : function(stream) {

    var next = stream.next();
    var tokenName = null;

    var ch = sequence.charAt(0);
    // search for the first letter
    if (next === ch) {
        // try to match the rest of the sequence
        var match = stream.match(new RegExp(sequence.substring(1)));
        match && (tokenName = 'some-style' || null);
    }
    return tokenName;
} 
```

这尚未经过测试，但我怀疑足以做到这一点。请让我知道你的情况如何。

# javascript - jquery 对话框加载器

> ID：15989567
> 
> 赞同：0
> 
> 时间：2013-04-13T15:40:01.060
> 
> 标签：javascript, jquery, jquery-ui

假设我有一个包含多个 html 信息和结构的 div，当我将其转换为对话框时，`jquery $("#infodata).dialog(...);`它需要几秒钟才能显示出来。

那么，是否有一种方法或方法可以实现知道**jquery**何时完成呈现对话框？

PD：没有ajax请求，html仍然存在，但显示：无。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:49:38.290

您可以将触发事件链接到它的末尾，然后您会得到

`$("#infodata).dialog(...).closest('body').trigger('dialogueLoaded');`

`$('body').on('dialogueLoaded', function() { doOtherStuff() });`

# android - 使用和引擎物理世界

> ID：15989570
> 
> 赞同：0
> 
> 时间：2013-04-13T15:40:11.643
> 
> 标签：android, andengine

我正在尝试编写一个简单的引擎游戏，但 PhysicsWorld 给出了错误。我在下面的代码中用双星 (**) 突出显示了错误。我在哪里出错？

我查找了示例（github、stackoverflow、code.google.com 等），但找不到任何错误。我从今天早上开始尝试。

```
package com.k.hockeygame;

import org.anddev.andengine.engine.Engine;
import org.anddev.andengine.engine.camera.Camera;
import org.anddev.andengine.engine.options.EngineOptions;
import org.anddev.andengine.engine.options.EngineOptions.ScreenOrientation;
import org.anddev.andengine.engine.options.resolutionpolicy.FillResolutionPolicy;
import org.anddev.andengine.entity.scene.Scene;
import org.anddev.andengine.entity.shape.Shape;
import org.anddev.andengine.entity.sprite.Sprite;
import org.anddev.andengine.entity.util.FPSLogger;
import org.anddev.andengine.extension.physics.box2d.PhysicsConnector;
import org.anddev.andengine.extension.physics.box2d.PhysicsFactory;
import org.anddev.andengine.extension.physics.box2d.PhysicsWorld;
import org.anddev.andengine.opengl.texture.Texture;
import org.anddev.andengine.opengl.texture.TextureOptions;
import org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.anddev.andengine.opengl.texture.region.TextureRegion;
import org.anddev.andengine.ui.activity.BaseGameActivity;
import android.hardware.SensorManager;
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.BodyDef.BodyType;
import com.badlogic.gdx.physics.box2d.FixtureDef;

public class HockeyGame extends BaseGameActivity {
private static final int CAMERA_WIDTH = 800;
private static final int CAMERA_HEIGHT = 480;
private Camera camera;
private Engine engine;
**private PhysicsWorld physicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_DEATH_STAR_I), false);
**private FixtureDef fixDef = PhysicsFactory.createFixtureDef(0.5f, 0.5f, 0.5f);
Scene scene;
private BitmapTextureAtlas texField, texPlayer1, texPlayer2;
private TextureRegion texRegField, texRegPlayer1, texRegPlayer2;
private Sprite spriteField, spritePlayer1, spritePlayer2;
**private Body bodyPlayer1, bodyPlayer2;

@Override
public Engine onLoadEngine() {
    camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    final EngineOptions engineOptions = new EngineOptions(true,ScreenOrientation.LANDSCAPE, new FillResolutionPolicy(), camera);
    engineOptions.getTouchOptions().setRunOnUpdateThread(true);
    engine = new Engine(engineOptions);

    return engine;
}

@Override
public void onLoadResources() {
    texField = new BitmapTextureAtlas(1024, 512, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    texPlayer1 = new BitmapTextureAtlas(128, 128, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    texPlayer2 = new BitmapTextureAtlas(128, 128, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

    texRegField = BitmapTextureAtlasTextureRegionFactory.createFromAsset(texField, this, "background.png", 0, 0);
    texRegPlayer1 = BitmapTextureAtlasTextureRegionFactory.createFromAsset(texPlayer1, this, "a.png", 0, 0);
    texRegPlayer2 = BitmapTextureAtlasTextureRegionFactory.createFromAsset(texPlayer2, this, "b.png", 0, 0);

    Texture [] textures = {texField, texPlayer1, texPlayer2};
    mEngine.getTextureManager().loadTextures(textures);
}
private float fingerCoorX = 0;
private float fingerCoorY = 0;
private boolean isMoveBlue = false;
@Override
public Scene onLoadScene() {
    this.engine.registerUpdateHandler(new FPSLogger());
    this.scene = new Scene();

    spriteField = new Sprite(0, 0, texRegField);

    spritePlayer1 = new Sprite(600, CAMERA_HEIGHT / 2 - 128, texRegPlayer1);

    spritePlayer2 = new Sprite(50, CAMERA_HEIGHT / 2, texRegPlayer2);

    **bodyPlayer1 = PhysicsFactory.createCircleBody(this.physicsWorld, (Shape)spritePlayer1, BodyType.DynamicBody, fixDef);
    **bodyPlayer2 = PhysicsFactory.createCircleBody(this.physicsWorld, (Shape)spritePlayer2, BodyType.DynamicBody, fixDef);

    **this.physicsWorld.registerPhysicsConnector(new PhysicsConnector(spritePlayer1, bodyPlayer1));
    **this.physicsWorld.registerPhysicsConnector(new PhysicsConnector(spritePlayer2, bodyPlayer2));

    **bodyPlayer1.setLinearVelocity(new Vector2(10, 0));
    **bodyPlayer2.setLinearVelocity(new Vector2(10, 0));

    this.scene.attachChild(spriteField);
    this.scene.attachChild(spritePlayer1);
    this.scene.attachChild(spritePlayer2);

    this.scene.registerTouchArea(spritePlayer1);
    this.scene.registerTouchArea(spritePlayer2);

    **this.scene.registerUpdateHandler(physicsWorld);

    return this.scene;
}

@Override
public void onLoadComplete() {

}
} 
```

这是日志猫。

```
04-13 19:10:39.865: D/AndEngine(17573):     at org.anddev.andengine.engine.Engine$UpdateThread.run(Engine.java:685)
04-13 19:10:40.279: D/AndroidRuntime(17573): Shutting down VM
04-13 19:10:40.279: W/dalvikvm(17573): threadid=1: thread exiting with uncaught exception (group=0x40af7930)
04-13 19:10:40.294: E/AndroidRuntime(17573): FATAL EXCEPTION: main
04-13 19:10:40.294: E/AndroidRuntime(17573): java.lang.NoSuchMethodError: org.anddev.andengine.entity.shape.Shape.getVelocityX
04-13 19:10:40.294: E/AndroidRuntime(17573):    at org.anddev.andengine.extension.physics.box2d.PhysicsFactory.createCircleBody(PhysicsFactory.java:118)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at org.anddev.andengine.extension.physics.box2d.PhysicsFactory.createCircleBody(PhysicsFactory.java:105)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at com.k.hockeygame.HockeyGame.onLoadScene(HockeyGame.java:80)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:161)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:85)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2451)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at android.view.View.dispatchWindowFocusChanged(View.java:7440)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:930)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2927)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at android.os.Looper.loop(Looper.java:137)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at android.app.ActivityThread.main(ActivityThread.java:5226)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at java.lang.reflect.Method.invokeNative(Native Method)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at java.lang.reflect.Method.invoke(Method.java:511)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
4-13 19:10:40.294: E/AndroidRuntime(17573):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
04-13 19:10:40.294: E/AndroidRuntime(17573):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:12:08.083

'java.lang.NoSuchMethodError' 使它看起来像是版本不匹配 - 检查库是否在正确的位置，并且您没有将它引用到另一个位置。

# javascript - 如何找出URI是否包含文档？

> ID：15989572
> 
> 赞同：1
> 
> 时间：2013-04-13T15:40:18.550
> 
> 标签：javascript, jquery

我想通过以下方式在浏览器中打开一个窗口：

```
 window.open('/Item/Article/' + result, 'ItemArticle', 'resizable=yes,scrollbars=yes,height=' + res.height + ',width=' + res.width + ',left=0', null); 
```

但是，如果上述动态 URI 不包含文档，则不会创建任何 Iframe。有没有一种方法可以在我尝试打开 iframe 之前检查 URI 中的项目是否存在，这样我就可以通知用户没有找到文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:46:30.720

您可以通过执行 AJAX 请求来检查文档是否存在。如果成功，您就知道该 URL 是有效的。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
var docURL = '/Item/Article/' + result;
$.ajax({
    type: 'HEAD',
    url: docURL,
    success: function () {
        window.open('..');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:53:27.133

让窗口打开，然后使用 404 页面让用户知道没有找到文档。

如果你真的想用另一种方式来做——像@Raymond 建议的那样做一个 AJAX 请求，然后如果你得到一个成功的响应，打开窗口。但是我不能推荐这个，这意味着客户至少会做一个或多或少无用的请求。

# mysql - 添加拒绝原因的 SQL 脚本

> ID：15989577
> 
> 赞同：2
> 
> 时间：2013-04-13T15:40:41.533
> 
> 标签：mysql, sql, sql-scripts

在下面的 SQL 中，它在我的 excel 表中找到“坏行”并将它们复制到另一个表中。这很完美。但是，在下面的每个 OR 语句下，我想让列“rejectionreason”= 一些错误文本。因此，例如，如果 eventID = 0，则将该行移动到表中，但还将“rejectionreason”列更新为文本“错误 eventID 等于 0”。

我还需要对下面的所有其他 OR 语句执行类似操作。

我怎样才能做到这一点

**SQL**

```
REPLACE INTO InvalidBaseDataTable SELECT * FROM BaseDataTable where dateTime = '0000-00-00 00:00:00'        

    OR eventId = 0                          

    OR ueType = 0                           

    OR eventId NOT IN (SELECT DISTINCT(eventId) FROM EventCauseTable)

    OR causeCode < (SELECT MIN(causeCode) FROM EventCauseTable)

    OR causeCode > (SELECT MAX(causeCode) FROM EventCauseTable)

    OR ueType NOT IN (SELECT DISTINCT(tac) FROM UeTable)

    OR 

        (eventId NOT IN (SELECT DISTINCT(eventId) FROM EventCauseTable)

        AND 

        causeCode NOT IN (SELECT DISTINCT(causeCode) FROM EventCauseTable)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:04:32.490

您可以尝试以下方法：

```
REPLACE INTO InvalidBaseDataTable 
SELECT *, CASE
    WHEN dateTime = '0000-00-00 00:00:00' THEN 'datetime equal to 0'
    WHEN eventId = 0 THEN 'eventId equal to 0'
    WHEN ueType = 0 THEN 'ueType equal to 0'
    ELSE 'All good'
END AS rejectionreason
FROM BaseDataTable WHERE dateTime = '0000-00-00 00:00:00'        
OR eventId = 0
OR ueType = 0
OR eventId NOT IN (SELECT DISTINCT(eventId) FROM EventCauseTable)
OR causeCode < (SELECT MIN(causeCode) FROM EventCauseTable)
OR causeCode > (SELECT MAX(causeCode) FROM EventCauseTable)
OR ueType NOT IN (SELECT DISTINCT(tac) FROM UeTable)
OR (eventId NOT IN (SELECT DISTINCT(eventId) FROM EventCauseTable)
    AND 
    causeCode NOT IN (SELECT DISTINCT(causeCode) FROM EventCauseTable)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T16:12:15.430

我会做这样的事情。

特别是因为您只想进行一次测试而不是一次即可找到问题，然后再次进行相同的测试以找出原因。

```
select * 
from  (select id, 
              case when dateTime = '0000-00-00 00:00:00' then 'dateTime = 00000-00-00 00:00:00' else
              case when eventId = 0  or ueType = 0 then 'eventId or ueType = 0' else
              case when eventId not in (SELECT DISTINCT(eventId) FROM EventCauseTable) then 'eventId not in EventCauseTable' else 
              case when testMe2 not in (select value from valueList) then 'Value in testMe2 is not in Values' else null end end end end end result
       from testThis) x
where result is not null; 
```

# javascript - 通过 onmouseover 更改 td 的类属性

> ID：15989590
> 
> 赞同：2
> 
> 时间：2013-04-13T15:41:58.043
> 
> 标签：javascript, setattribute

我正在构建一张桌子。我需要一个`<td>`表格更改它的属性`class`，`someattribute`直到鼠标悬停。

应该如何？

代码：

```
var table = document.createElement('table');
for (var i = 1; i <=10; i++)
{
    var tr = document.createElement('tr');
    tr.setAttribute('id',i)
    table.appendChild(tr);
    for (var j = 1; j <=15; j++)
    {
        var td = document.createElement('td');
        td.setAttribute('id',j);
        // Here:
        td.OnMouseOver = new function() 
        {
            td.setAttribute("class","new");
        };
        tr.appendChild(td);
    };
};

document.getElementById("grid").innerHTML = '';
document.getElementById("grid").appendChild(table); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:56:15.223

没有 jQuery：

```
function mouseover() {
    this.setAttribute("class", "new");
    return true;
}

var table = document.createElement('table');
var tr, td;
for (var i = 1; i <= 10; i++) {
        tr = document.createElement('tr');
        tr.setAttribute('id', 'td'+i);
        table.appendChild(tr);
        for (var j = 1; j <= 15; j++) {
            td = document.createElement('td');
            td.setAttribute('id', 'tr'+j);
            // Here:
            td.onmouseover = mouseover;
            td.innerText = "..";
            tr.appendChild(td);
        }
}

document.getElementById("grid").innerHTML = '';
document.getElementById("grid").appendChild(table); 
```

函数被移到循环外，ids 是前缀以避免冲突

使用 jQuery：

```
function mouseover() {
    this.setAttribute("class", "new");
    return true;
}

function nNewElements(tag, idPrefix, n) {
    var result = [];
    for (var i = 1; i <= n; i++) {
        result.
        push($("<" + tag + ">").
        attr("id", idPrefix + i)[0]);
    }
    return $(result);
}

$(document).ready(function () {
    $("#grid").
    html('').
    append('<table>');

    nNewElements("tr", "row", 10).
    appendTo("table").
    each(function () {
        nNewElements("td", "data", 15).
        mouseover(mouseover).
        text("..").
        appendTo($(this));
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:01:00.740

你很接近。

`this`在`onmouseover`函数中使用关键字，而不是函数`td`无法访问的关键字。此外，您不需要使用关键字`new`来定义函数。

```
 td.onmouseover = function () {
        this.setAttribute("class", "new");
    }; 
```

代码：

```
var table = document.createElement('table');
for (var i = 1; i <= 10; i++) {
    var tr = document.createElement('tr');
    tr.setAttribute('id', i)
    table.appendChild(tr);
    for (var j = 1; j <= 15; j++) {
        var td = document.createElement('td');
        td.setAttribute('id', j);
        td.innerHTML = '&nbsp;';
        td.onmouseover = function () {
            this.setAttribute("class", "new");
        };
        tr.appendChild(td);
    };
};

document.getElementById("grid").innerHTML = '';
document.getElementById("grid").appendChild(table); 
```

[http://jsfiddle.net/samliew/VnkHB/10/](http://jsfiddle.net/samliew/VnkHB/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:05:35.317

如果您确实想使用 jQuery：

```
$('table td').mouseover(function() {
    $(this).addClass('new');
}); 
```

这会将类添加`new`到任何事件中的任何`<td>`元素。`<table>``mouseover`

# jquery - 如何在悬停时保持 Bootstrap 弹出框活着？

> ID：15989591
> 
> 赞同：130
> 
> 时间：2013-04-13T15:42:24.877
> 
> 标签：jquery, twitter-bootstrap, popper.js

我正在使用 Bootstrap 弹出框创建显示用户信息的悬停卡，并且在鼠标悬停按钮时触发它。我想在弹出框本身悬停时保持此弹出框处于活动状态，但是一旦用户停止将鼠标悬停在按钮上，它就会消失。我怎样才能做到这一点？

```
$('#example').popover({
    html : true,
    trigger : 'manual',
    content : function() {
        return '<div class="box">Popover</div>';
    }
});

$(document).on('mouseover', '#example', function(){
    $('#example').popover('show');
});

$(document).on('mouseleave', '#example', function(){
    $('#example').popover('hide');
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.js"></script>
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

<a href="#" id="example" class="btn btn-danger" rel="popover" >hover for popover</a>
```

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-10-30T14:03:43.897

使用下面的代码片段进行测试：

小修改（来自 vikas 提供的解决方案）以适合我的用例。

1.  在弹出按钮的悬停事件上打开弹出框

2.  将鼠标悬停在弹出框上时保持弹出框打开

3.  在鼠标离开时关闭弹出框按钮或弹出框。

```
$(".pop").popover({
    trigger: "manual",
    html: true,
    animation: false
  })
  .on("mouseenter", function() {
    var _this = this;
    $(this).popover("show");
    $(".popover").on("mouseleave", function() {
      $(_this).popover('hide');
    });
  }).on("mouseleave", function() {
    var _this = this;
    setTimeout(function() {
      if (!$(".popover:hover").length) {
        $(_this).popover("hide");
      }
    }, 300);
  });
```

```
<!DOCTYPE html>
<html>

<head>
  <link data-require="bootstrap-css@*" data-semver="3.2.0" rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
  <script data-require="jquery@*" data-semver="2.1.1" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script data-require="bootstrap@*" data-semver="3.2.0" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.js"></script>

  <link rel="stylesheet" href="style.css" />

</head>

<body>
  <h2 class='text-primary'>Another Great "KISS" Bootstrap Popover example!</h2>
  <p class='text-muted'>KISS = Keep It Simple S....</p>

  <p class='text-primary'>Goal:</p>
  <ul>
    <li>Open popover on hover event for the popover button</li>
    <li>Keep popover open when hovering over the popover box</li>
    <li>Close popover on mouseleave for either the popover button, or the popover box.</li>
  </ul>

  <button type="button" class="btn btn-danger pop" data-container="body" data-toggle="popover" data-placement="right" data-content="Optional parameter: Skip if this was not requested<br>                                    A placement group is a logical grouping of instances within a single Availability                                     Zone. Using placement groups enables applications to get the full-bisection bandwidth                                     and low-latency network performance required for tightly coupled, node-to-node                                     communication typical of HPC applications.<br>                                    This only applies to cluster compute instances: cc2.8xlarge, cg1.4xlarge, cr1.8xlarge, hi1.4xlarge and hs1.8xlarge.<br>                                    More info: <a href=&quot;http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html&quot; target=&quot;_blank&quot;>Click here...</a>"
    data-original-title="" title="">
    HOVER OVER ME
    </button>
  <br><br>
  <button type="button" class="btn btn-info pop" data-container="body" data-toggle="popover" data-placement="right" data-content="Optional parameter: Skip if this was not requested<br>                                    A placement group is a logical grouping of instances within a single Availability                                     Zone. Using placement groups enables applications to get the full-bisection bandwidth                                     and low-latency network performance required for tightly coupled, node-to-node                                     communication typical of HPC applications.<br>                                    This only applies to cluster compute instances: cc2.8xlarge, cg1.4xlarge, cr1.8xlarge, hi1.4xlarge and hs1.8xlarge.<br>                                    More info: <a href=&quot;http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html&quot; target=&quot;_blank&quot;>Click here...</a>"
    data-original-title="" title="">
    HOVER OVER ME... Again!
    </button><br><br>
  <button type="button" class="btn btn-success pop" data-container="body" data-toggle="popover" data-placement="right" data-content="Optional parameter: Skip if this was not requested<br>                                    A placement group is a logical grouping of instances within a single Availability                                     Zone. Using placement groups enables applications to get the full-bisection bandwidth                                     and low-latency network performance required for tightly coupled, node-to-node                                     communication typical of HPC applications.<br>                                    This only applies to cluster compute instances: cc2.8xlarge, cg1.4xlarge, cr1.8xlarge, hi1.4xlarge and hs1.8xlarge.<br>                                    More info: <a href=&quot;http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html&quot; target=&quot;_blank&quot;>Click here...</a>"
    data-original-title="" title="">
    Okay one more time... !
    </button>
  <br><br>
  <p class='text-info'>Hope that helps you... Drove me crazy for a while</p>
  <script src="script.js"></script>
</body>

</html>
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-08-01T14:43:44.697

我已经找到了另一个解决方案......这是代码

```
 $('.selector').popover({
        html: true,
        trigger: 'manual',
        container: $(this).attr('id'),
        placement: 'top',
        content: function () {
            $return = '<div class="hover-hovercard"></div>';
        }
    }).on("mouseenter", function () {
        var _this = this;
        $(this).popover("show");
        $(this).siblings(".popover").on("mouseleave", function () {
            $(_this).popover('hide');
        });
    }).on("mouseleave", function () {
        var _this = this;
        setTimeout(function () {
            if (!$(".popover:hover").length) {
                $(_this).popover("hide")
            }
        }, 100);
    }); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-09-02T11:54:26.590

这是我的看法：http: [//jsfiddle.net/WojtekKruszewski/Zf3m7/22/](http://jsfiddle.net/WojtekKruszewski/Zf3m7/22/)

有时，在将鼠标从弹出框触发器*对角线*移动到实际弹出框内容时，您将鼠标悬停在下面的元素上。我想处理这种情况——只要你在超时触发之前到达弹出框内容，你就是安全的（弹出框不会消失）。它需要`delay`选项。

这个 hack 基本上覆盖了 Popover`leave`函数，但调用了原始函数（它启动计时器以隐藏 popover）。然后它将一次性侦听器附加到`mouseenter`弹出内容元素的。

如果鼠标进入弹出框，则计时器被清除。然后它会`mouseleave`在 popover 上监听，如果它被触发，它会调用原始的 leave 函数，以便它可以启动隐藏计时器。

```
var originalLeave = $.fn.popover.Constructor.prototype.leave;
$.fn.popover.Constructor.prototype.leave = function(obj){
  var self = obj instanceof this.constructor ?
    obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)
  var container, timeout;

  originalLeave.call(this, obj);

  if(obj.currentTarget) {
    container = $(obj.currentTarget).siblings('.popover')
    timeout = self.timeout;
    container.one('mouseenter', function(){
      //We entered the actual popover – call off the dogs
      clearTimeout(timeout);
      //Let's monitor popover content instead
      container.one('mouseleave', function(){
        $.fn.popover.Constructor.prototype.leave.call(self, self);
      });
    })
  }
}; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-01-27T07:44:48.650

我认为一个简单的方法是这样的：

```
$('.popover').each(function () {
                    var $this = $(this);
                    $this.popover({
                        trigger: 'hover',
                        content: 'Content Here',
                        container: $this
                    })
                }); 
```

这样，弹出框是在目标元素本身内部创建的。因此，当您将鼠标移到弹出框上方时，它仍然位于元素上方。Bootstrap 3.3.2 可以很好地解决这个问题。旧版本的动画可能有一些问题，因此您可能需要禁用“animation:false”

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-04-13T16:40:05.617

我使用触发器设置为`hover`并将容器设置为`#element`，最后添加了`box`to的位置`right`。

这应该是您的设置：

```
$('#example').popover({
    html: true,
    trigger: 'hover',
    container: '#example',
    placement: 'right',
    content: function () {
        return '<div class="box"></div>';
    }
}); 
```

和`#example`css 需要`position:relative;`检查下面的 jsfiddle：

[https://jsfiddle.net/9qn6pw4p/1/](https://jsfiddle.net/9qn6pw4p/1/)

## 已编辑

这个小提琴有两个链接都可以正常工作 [http://jsfiddle.net/davidchase03/FQE57/4/](http://jsfiddle.net/davidchase03/FQE57/4/)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-08-24T15:29:30.817

这是我设计的一个解决方案，它似乎运行良好，同时还允许您使用正常的 Bootstrap 实现来打开所有弹出窗口。

原小提琴：[https ://jsfiddle.net/eXpressive/hfear592/](https://jsfiddle.net/eXpressive/hfear592/)

移植到这个问题：

```
<a href="#" id="example" class="btn btn-danger" rel="popover" >hover for popover</a>

$('#example').popover({
    html : true,
    trigger : 'hover',
    content : function() {
        return '<div class="box"></div>';
    }
}).on('hide.bs.popover', function () {
    if ($(".popover:hover").length) {
      return false;
    }                
}); 

$('body').on('mouseleave', '.popover', function(){
    $('.popover').popover('hide');
}); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-10-11T07:37:47.717

这就是我在网络上其他位的帮助下使用 bootstrap popover 所做的。从现场展示的各种产品中动态获取标题和内容。每个产品或弹出框都有唯一的 ID。退出产品（$this .pop）或弹出框时弹出框将消失。超时用于显示弹出框，直到通过产品而不是弹出框退出。

```
$(".pop").each(function () {
        var $pElem = $(this);
        $pElem.popover(
            {
                html: true,
                trigger: "manual",
                title: getPopoverTitle($pElem.attr("id")),
                content: getPopoverContent($pElem.attr("id")),
                container: 'body',
                animation:false
            }
        );
    }).on("mouseenter", function () {
        var _this = this;
        $(this).popover("show");
        console.log("mouse entered");
        $(".popover").on("mouseleave", function () {
            $(_this).popover('hide');
        });
    }).on("mouseleave", function () {
        var _this = this;
        setTimeout(function () {
            if (!$(".popover:hover").length) {
                $(_this).popover("hide");
            }
        }, 100);
    });
    function getPopoverTitle(target) {
        return $("#" + target + "_content > h3.popover-title").html();
    };

    function getPopoverContent(target) {
        return $("#" + target + "_content > div.popover-content").html();
    }; 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-06-30T05:52:46.717

我同意最好的方法是使用由[David Chase](https://stackoverflow.com/questions/15989591/how-can-i-keep-bootstrap-popover-alive-while-the-popover-is-being-hovered#answer-15990198)、Cu Ly 和其他人给出的方法，最简单的方法是使用以下`container: $(this)`属性：

```
$(selectorString).each(function () {
  var $this = $(this);
  $this.popover({
    html: true,
    placement: "top",
    container: $this,
    trigger: "hover",
    title: "Popover",
    content: "Hey, you hovered on element"
  });
}); 
```

**在这里我要指出的是，这种情况下的弹出框会继承当前元素的所有属性**。因此，例如，如果您对`.btn`元素（引导程序）执行此操作，**您将无法选择 popover 内的文本**。只是想记录一下，因为我花了很多时间在这上面敲我的脑袋。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-08T04:18:55.360

Vikas 的回答非常适合我，在这里我还添加了对延迟的支持（显示/隐藏）。

```
var popover = $('#example');
var options = {
    animation : true,
    html: true,
    trigger: 'manual',
    placement: 'right',
    delay: {show: 500, hide: 100}
};   
popover
    .popover(options)
    .on("mouseenter", function () {

        var t = this;
        var popover = $(this);    
        setTimeout(function () {

            if (popover.is(":hover")) {

                popover.popover("show");
                popover.siblings(".popover").on("mouseleave", function () {
                    $(t).popover('hide');
                });
            }
        }, options.delay.show);
    })
    .on("mouseleave", function () {
        var t = this;
        var popover = $(this);

        setTimeout(function () {
            if (popover.siblings(".popover").length && !popover.siblings(".popover").is(":hover")) {
                $(t).popover("hide")
            }
        }, options.delay.hide);
    }); 
```

另外请注意我改了：

```
if (!$(".popover:hover").length) { 
```

和：

```
if (popover.siblings(".popover").length && !popover.siblings(".popover").is(":hover")) { 
```

以便它准确地引用那个打开的弹出窗口，而不是任何其他的（因为现在，通过延迟，可以同时打开超过 1 个）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-25T23:36:48.000

选择的答案*有效*，但如果将弹出框初始化`body`为容器，则会失败。

```
$('a').popover({ container: 'body' }); 
```

基于所选答案的解决方案是在使用弹出框之前需要放置以下代码。

```
var originalLeave = $.fn.popover.Constructor.prototype.leave;
$.fn.popover.Constructor.prototype.leave = function(obj) {
    var self = obj instanceof this.constructor ? obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type);
    originalLeave.call(this, obj);

    if (obj.currentTarget) {
        self.$tip.one('mouseenter', function() {
            clearTimeout(self.timeout);
            self.$tip.one('mouseleave', function() {
                $.fn.popover.Constructor.prototype.leave.call(self, self);
            });
        })
    }
}; 
```

使用`self.$tip`而不是遍历 DOM 期望弹出框始终是元素的兄弟姐妹，更改是最小的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-12T03:52:22.090

我最近需要与 KO 一起使用，而上述解决方案在显示和隐藏延迟时效果不佳。下面应该解决这个问题。基于引导工具提示的工作方式。希望这可以帮助某人。

```
var options = {
                delay: { show: 1000, hide: 50 },
                trigger: 'manual',                      
                html: true
            };
var $popover = $(element).popover(options);

$popover.on('mouseenter', function () { // This is entering the triggering element
    var self = this;

    clearTimeout(self.timeout);
    self.hoverState = 'in';

    self.timeout = setTimeout(function () {
        if (self.hoverState == 'in') {
            $(self).popover("show");

            $(".popover, .popover *").on('mouseover', function () { // This is moving over the popover
                clearTimeout(self.timeout);
            });                                                                 

            $(".popover").on('mouseleave', function () { // This is leaving the popover
                self.timeout = setTimeout(function () {
                    if (self.hoverState == 'out') {
                        $(self).popover('hide');
                    }
                }, options.delay.hide);
            });
        }
    }, options.delay.show);
}).on('mouseleave', function (event) { // This is leaving the triggering element
    var self = this;

    clearTimeout(self.timeout);
    self.hoverState = 'out';

    self.timeout = setTimeout(function () {                             
        if (self.hoverState == 'out') {
            $(self).popover('hide');
        }

    }, options.delay.hide);
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-12T10:13:34.083

工具提示也是如此：

对我来说，以下解决方案有效，因为它不会在每个“mouseenter”上添加事件侦听器，并且可以将鼠标悬停在使工具提示保持活动状态的工具提示元素上。

```
$ ->

  $('.element').tooltip({
    html: true,
    trigger: 'manual'
  }).
  on 'mouseenter', ->
    clearTimeout window.tooltipTimeout
    $(this).tooltip('show') unless $('.tooltip:visible').length > 0
  .
  on 'mouseleave', ->
    _this = this
    window.tooltipTimeout = setTimeout ->
      $(_this).tooltip('hide')
    , 100

$(document).on 'mouseenter', '.tooltip', ->
  clearTimeout window.tooltipTimeout

$(document).on 'mouseleave', '.tooltip', ->
  trigger = $($(this).siblings('.element')[0])
  window.tooltipTimeout = setTimeout ->
    trigger.tooltip('hide')
  , 100 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-04-09T07:43:10.260

这个解决方案对我来说效果很好：（现在它是防弹的）;-)

```
function enableThumbPopover() {
    var counter;

    $('.thumbcontainer').popover({
        trigger: 'manual',
        animation: false,
        html: true,
        title: function () {
            return $(this).parent().find('.thumbPopover > .title').html();
        },
        content: function () {
            return $(this).parent().find('.thumbPopover > .body').html();
        },
        container: 'body',
        placement: 'auto'
    }).on("mouseenter",function () {
        var _this = this; // thumbcontainer

        console.log('thumbcontainer mouseenter')
        // clear the counter
        clearTimeout(counter);
        // Close all other Popovers
        $('.thumbcontainer').not(_this).popover('hide');

        // start new timeout to show popover
        counter = setTimeout(function(){
            if($(_this).is(':hover'))
            {
                $(_this).popover("show");
            }
            $(".popover").on("mouseleave", function () {
                $('.thumbcontainer').popover('hide');
            });
        }, 400);

    }).on("mouseleave", function () {
        var _this = this;

        setTimeout(function () {
            if (!$(".popover:hover").length) {
                if(!$(this).is(':hover'))
                {
                    $(_this).popover('hide');
                }
            }
        }, 200);
    });
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-09T21:09:09.007

```
 $(function() {
            $("[data-toggle = 'popover']").popover({
                placement: 'left',
                html: true,
                trigger: "  focus",
            }).on("mouseenter", function() {
                var _this = this;
                $(this).popover("show");
                $(this).siblings(".popover").on("mouseleave", function() {
                    $(_this).popover('hide');
                });
            }).on("mouseleave", function() {
                var _this = this;
                setTimeout(function() {
                    if (!$(".popover:hover").length) {
                        $(_this).popover("hide")
                    }
                }, 100);
            });
        }); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-03-02T01:58:13.500

我发现`mouseleave`当奇怪的事情发生时不会触发，比如窗口焦点突然改变，然后用户回到浏览器。在这种情况下，`mouseleave`在光标移过并再次离开元素之前永远不会触发。

我想出的这个解决方案依赖于`mouseenter`对象`window`，因此当鼠标移动到页面上的*任何其他位置时它就会消失。*

这旨在与页面上有多个触发它的元素一起工作（如在表格中）。

```
var allMenus = $(".menus");
allMenus.popover({
    html: true,
    trigger: "manual",
    placement: "bottom",
    content: $("#menuContent")[0].outerHTML
}).on("mouseenter", (e) => {
    allMenus.not(e.target).popover("hide");
    $(e.target).popover("show");
    e.stopPropagation();
}).on("shown.bs.popover", () => {
    $(window).on("mouseenter.hidepopover", (e) => {
        if ($(e.target).parents(".popover").length === 0) {
            allMenus.popover("hide");
            $(window).off("mouseenter.hidepopover");
        }
    });
}); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-04-15T06:52:33.993

它将更加**灵活**`hover()`：

```
$(".my-popover").hover(
    function() {  // mouse in event
        $this = $(this);
        $this.popover({
            html: true,
            content: "Your content",
            trigger: "manual",
            animation: false
            });
        $this.popover("show");
        $(".popover").on("mouseleave", function() {
            $this.popover("hide");
        });
    },
    function() {  // mouse out event
        setTimeout(function() {
            if (!$(".popover:hover").length) {
                $this.popover("hide");
            }
        }, 100);
    } 
) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-08-23T14:32:17.377

简单的 ：）

```
$('[data-toggle="popover"]').popover( { "container":"body", "trigger":"focus", "html":true });
$('[data-toggle="popover"]').mouseenter(function(){
    $(this).trigger('focus');
}); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-29T14:37:00.500

我发现接受的答案和与之类似的答案有一些缺陷。主要是它反复将 mouseleave 侦听器添加到元素中。

我已经将他们的解决方案与一些自定义代码相结合，以实现有问题的功能，而不会出现内存泄漏或侦听器膨胀。

```
 var getPopoverTimeout = function ($el) {
        return $el.data('timeout');
    }
    $element.popover({
        trigger: "manual",
        html: true,
        content: ...,
        title: ...,
        container: $element
     }).on("mouseenter", function () {
        var $this = $(this);
        if (!$this.find('.popover').length) {
            $this.popover("show");
        } else if (getPopoverTimeout($element)) {
            clearTimeout(getPopoverTimeout($element));
        }
    }).on("mouseleave", function () {
        var $this = $(this);
        $element.data('timeout', setTimeout(function () {
            if (!$(".popover:hover").length) {
                $this.popover("hide")
            }
        }, 250));
    }); 
```

它提供了一个很好的类似“悬停意图”的解决方案，因此它不会闪入和闪出。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-11-10T15:35:51.543

我知道我参加聚会有点晚了，但我一直在寻找解决方案……我碰到了这篇文章。这是我的看法，也许它会对你们中的一些人有所帮助。

html部分：

```
<button type="button" class="btn btn-lg btn-danger" data-content="test" data-placement="right" data-toggle="popover" title="Popover title" >Hover to toggle popover</button><br>
// with custom html stored in a separate element, using "data-target"
<button type="button" class="btn btn-lg btn-danger" data-target="#custom-html" data-placement="right" data-toggle="popover" >Hover to toggle popover</button>

<div id="custom-html" style="display: none;">
    <strong>Helloooo!!</strong>
</div> 
```

js部分：

```
$(function () {
        let popover = '[data-toggle="popover"]';

        let popoverId = function(element) {
            return $(element).popover().data('bs.popover').tip.id;
        }

        $(popover).popover({
            trigger: 'manual',
            html: true,
            animation: false
        })
        .on('show.bs.popover', function() {
            // hide all other popovers  
            $(popover).popover("hide");
        })
        .on("mouseenter", function() {
            // add custom html from element
            let target = $(this).data('target');
            $(this).popover().data('bs.popover').config.content = $(target).html();

            // show the popover
            $(this).popover("show");

            $('#' + popoverId(this)).on("mouseleave", () => {
               $(this).popover("hide");
            });

        }).on("mouseleave", function() {
            setTimeout(() => {
                if (!$("#" + popoverId(this) + ":hover").length) {
                    $(this).popover("hide");
                }
            }, 100);
        });
    }) 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2019-05-02T16:14:01.123

这是我的延迟显示动态工具提示代码并由 ajax 加载。

```
$(window).on('load', function () {
    generatePopovers();

    $.fn.dataTable.tables({ visible: true, api: true }).on('draw.dt', function () {
        generatePopovers();
    });
});

$(document).ajaxStop(function () {
    generatePopovers();
});
```

```
function generatePopovers() {
var popover = $('a[href*="../Something.aspx"]'); //locate the elements to popover

popover.each(function (index) {
    var poplink = $(this);
    if (poplink.attr("data-toggle") == null) {
        console.log("RENDER POPOVER: " + poplink.attr('href'));
        poplink.attr("data-toggle", "popover");
        poplink.attr("data-html", "true");
        poplink.attr("data-placement", "top");
        poplink.attr("data-content", "Loading...");
        poplink.popover({
            animation: false,
            html: true,
            trigger: 'manual',
            container: 'body',
            placement: 'top'
        }).on("mouseenter", function () {
            var thispoplink = poplink;
            setTimeout(function () {
                if (thispoplink.is(":hover")) {
                    thispoplink.popover("show");
                    loadDynamicData(thispoplink); //load data by ajax if you want
                    $('body .popover').on("mouseleave", function () {
                        thispoplink.popover('hide');
                    });
                }
            }, 1000);
        }).on("mouseleave", function () {
            var thispoplink = poplink;
            setTimeout(function () {
                if (!$("body").find(".popover:hover").length) {
                    thispoplink.popover("hide");
                }
            }, 100);
        });
    }
});
```

```
function loadDynamicData(popover) {
    var params = new Object();
    params.somedata = popover.attr("href").split("somedata=")[1]; //obtain a parameter to send
    params = JSON.stringify(params);
    //check if the content is not seted
    if (popover.attr("data-content") == "Loading...") {
        $.ajax({
            type: "POST",
            url: "../Default.aspx/ObtainData",
            data: params,
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function (data) {
                console.log(JSON.parse(data.d));
                var dato = JSON.parse(data.d);
                if (dato != null) {
                    popover.attr("data-content",dato.something); // here you can set the data returned
                    if (popover.is(":hover")) {
                        popover.popover("show"); //use this for reload the view
                    }
                }
            },

            failure: function (data) {
                itShowError("- Error AJAX.<br>");
            }
        });
    }
}
```

# sql-server - Determine table to join based on the condition

> ID：15989593
> 
> 赞同：7
> 
> 时间：2013-04-13T15:42:48.483
> 
> 标签：sql-server, stored-procedures

I am not sure if I've missed to search properly, but I couldn't get the exact question as mine

This is something similar but not exact

[https://stackoverflow.com/questions/11533636/determining-which-table-to-join-to](https://stackoverflow.com/questions/11533636/determining-which-table-to-join-to)

Actually I want to decide with which table to join based on the parameter passed to stored procedure, `case when` didn't work

Kind of

```
select * from Table1 
       left join (case when @Parameter<>NULL Then Table2 else Table3 end) final
       on Table1.Col1 = final.Col1 
```

Table2 and Table3 has same structure

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T15:57:08.563

I can think of a few of options:

1: `IF ... ELSE`

```
IF @Parameter IS NULL

  SELECT *
  FROM T1
    INNER JOIN T2 ON T1.ID = T2.ID

ELSE

  SELECT *
  FROM T1
    INNER JOIN T3 ON T1.ID = T3.ID 
```

2: Dynamic T-SQL

```
DECLARE @SQL NVARCHAR(MAX);

SELECT @SQL = N'SELECT *
  FROM T1
    INNER JOIN ' + CASE WHEN @Parameter IS NULL THEN N'T2 t' ELSE N'T3 t' END
  + N' ON T1.ID = t.ID';

EXEC sp_executesql @SQL; 
```

3: UNION ALL and subquery.

```
 SELECT *
  FROM T1
    INNER JOIN
    (
      SELECT *
      FROM T2
      WHERE @Parameter IS NULL
      UNION ALL
      SELECT *
      FROM T3
      WHERE @Parameter IS NOT NULL
    ) t ON T1.ID = t.ID 
```

For this last one you'd have to check the plan the optimiser creates to see if it's OK performance wise.

It seems like you're looking for code reuse, so maybe option 2 is your best one. T-SQL doesn't really lend itself to this sort of polymorphism but you can use workarounds in some cases.

Taking a step back, one question to ask is, if the tables have the same structure, maybe you should just use one table? Then you could use `@Parameter` to just filter the rows you require instead of trying to create dynamic queries.

It's also worth noting that in situations like this you could handle the code-generation at the application layer with ORMs and the like.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:01:31.290

Try this:

```
select *
from (
  select data.*,
    case when selection=1 then t1.ExtraField
         when selection=2 then t2.ExtraField
         when selection=3 then t3.ExtraField
         else NULL
    end as ExtraField
  from data
  left join t1 on t1.key = data.key and selection=1
  left join t2 on t2.key = data.key and selection=2
  left join t3 on t3.key = data.key and selection=3
) T
where ExtraField is not NULL 
```

# php - Magento/Zend 框架中的内存泄漏

> ID：15989594
> 
> 赞同：5
> 
> 时间：2013-04-13T15:43:13.483
> 
> 标签：php, magento, zend-framework

运行这个简单的脚本时，我得到了下面发布的输出。这让我觉得我的代码或 Zend Framework/Magento 堆栈中存在内存泄漏。迭代任何类型的 Magento 集合时会出现此问题。我有什么遗漏或做错了吗？

脚本：

```
$customersCollection = Mage::getModel('customer/customer')->getCollection();

foreach($customersCollection as $customer) {
  $customer->load();
  $customer = null;
  echo memory_get_usage(). "\n";
} 
```

输出：

```
102389104
102392920
...
110542528
110544744 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T18:38:03.817

您的问题是，当您可以通过集合查询加载必要的数据时，每次迭代都会发出相当昂贵的查询：

```
$collection = Mage::getResourceModel('customer/customer_collection')->addAttributeToSelect('*'); 
```

将做同样的事情，但都在一个查询中。这种方法的警告是，如果有任何自定义事件观察者`customer_load_before`或`customer_load_after`事件（这些没有核心观察者），则需要为每个数据模型手动运行观察者。

*编辑：归功于[osonodoar](https://stackoverflow.com/users/1026524/osondoar)发现了不正确的类引用（客户/客户与客户/客户集合）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T16:17:27.850

一个对象（或其他值）的内存只有在 PHP 进程中的任何地方都没有对它的引用时才能被释放。在您的情况下，该行`$customer = null`仅将对该对象的引用数减少一，但不会使其达到零。

如果你考虑一个更简单的循环，这可能会变得更清楚：

```
$test = array('a' => 'hello');
foreach ( $test as $key => $value )
{
    // $value points at the same memory location as $test['a']
    // internally, that "zval" has a "refcount" of 2

    $value = null;
    // $value now points to a new memory location, but $test['a'] is unnaffected
    // the refcount drops to 1, but no memory is freed
} 
```

因为您使用的是对象，所以有一个额外的转折 - 您可以在循环内修改对象而无需创建它的新副本：

```
$test = array('a' => new __stdClass);
// $test['a'] is an empty object

foreach ( $test as $key => $value )
{
    // $value points at the same object as $test['a']
    // internally, that object has a "refcount" of 2

    $value->foo = "Some data that wasn't there before";
    // $value is still the same object as $test['a'], but that object now has extra data
    // This requires additional memory to store that object

    $value = null;
    // $value now points to a new memory location, but $test['a'] is unnaffected
    // the refcount drops to 1, but no memory is freed
}

// $test['a']->foo now contains the string assigned in the loop, consuming extra memory 
```

在您的情况下，该`->load()`方法可能会`$customersCollection`依次扩展每个成员中的数据量，每个成员都需要更多内存。`$customersCollection`在循环之前和之后检查可能会证实这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:53:46.003

首先，当取消设置变量时，使用 unset($variable) 而不是 $variable=null。它基本上做同样的事情，但你的意图要清楚得多。

其次，PHP 注定要死掉——内存泄漏不是一个大问题，因为 PHP 请求可能会持续几秒钟，然后进程就会死掉，并且它正在使用的所有内存都被释放以供下一个请求使用。除非您遇到扩展问题，否则无需担心。

编辑：这并不是说不要担心代码的质量，但是对于这样的事情，除非它引起问题，否则很可能不值得努力阻止它发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T19:41:36.780

处理内存泄漏的其他方法是在循环内调用 exec 并让该 exec 函数完成导致内存泄漏的工作部分。

因此，一旦它完成了它的部分并终止了该 exec 中的所有内存泄漏，就会被释放。

因此，随着大量迭代，这种不断增加的内存损失将得到处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T17:14:13.747

@benmarks 响应在这里是正确的方法，因为在循环中调用 load() 是一个非常昂贵的调用。

调用 $customer->load() 将增量分配将由 $customersCollection 引用的内存，直到循环结束时才会释放该内存。

但是，如果出于某种原因需要调用 load()，下面的代码不会泄漏内存，因为 GC 会在每次迭代中释放模型分配的所有内存。

```
$customersCollection = Mage::getModel('customer/customer')->getCollection();

foreach($customersCollection as $customer) {
    $customerCopy = Mage::getModel('customer/customer')->load($customer->getId());

    //Call to $customerCopy methods

    echo memory_get_usage(). "\n";
} 
```

# xcode4 - 多视图上的 UIGestureRecognizer

> ID：15989596
> 
> 赞同：0
> 
> 时间：2013-04-13T15:43:15.093
> 
> 标签：xcode4, uigesturerecognizer

这里有几个关于如何让单个 UIGestureRecognizer 识别多个视图的示例。我有这段代码，我尝试了各种方法来让它工作，但不幸的是似乎不起作用。如果有人能对此有所了解，我将不胜感激。

如果我创建多个（IBAction）函数，我能够让它工作的唯一方法，但我有多达 100 个需要移动的视图，因此需要有 100 个不同的函数。我在这里阅读了一个示例，其中可以使用标签来做到这一点，但我尝试过，不幸的是它不起作用。如果有帮助，我正在使用 XCode 4.6.1。这是下面的代码。

```
-(IBAction)handlePan:(UIPanGestureRecognizer *)recognizer{
     UIView *player=recognizer.view;
     int tag=player.tag;
     [player addGestureRecognizer:recognizer];
if (tag!=0) {
    CGPoint translation =[recognizer translationInView:self.view];
    player.center=CGPointMake(player.center.x+translation.x, player.center.y+translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:player.superview];
}  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:24:52.090

在我看来，您正在将相同的手势识别器添加到已经拥有它的视图中。您可以使用循环使用标签将 UIPanGestureRecognizer 添加到所有视图中，然后在方法 handlePan:(UIPanGestureRecognizer *)recognizer 检查当前正在平移的视图并从那里继续。

# python - 以行方式合并列表以生成二维数组

> ID：15989597
> 
> 赞同：0
> 
> 时间：2013-04-13T15:43:16.723
> 
> 标签：python

我有许多列表，我想以逐行方式合并所有这些列表，以在 Python 中生成一个二维数组。我怎么做 ？

```
Ex- 
l1=[1,2,3,4]
l2=[5,6,7,8]
l3=[9,10,11,12]
l4=[13,14,15,16] 
```

我想得到一个像这样的二维数组

```
m= 1   2   3   4
   5   6   7   8
   9  10  11  12
   13 14  15  16 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:44:21.000

Just put them in a list:

```
m = [l1, l2, l3, l4] 
```

N-dimensional lists in Python are simply nested lists.

Result:

```
>>> l1=[1,2,3,4]
>>> l2=[5,6,7,8]
>>> l3=[9,10,11,12]
>>> l4=[13,14,15,16]
>>> m = [l1, l2, l3, l4]
>>> pprint(m)
[[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]] 
```

You then access items by row and column with two indexing operations:

```
>>> print m[1][3]
8 
```

# java - 问题将二维数组发送到另一个布局android eclipse java

> ID：15989603
> 
> 赞同：0
> 
> 时间：2013-04-13T15:43:29.017
> 
> 标签：java, android, arrays, eclipse

我正在创建一个具有 2 个布局的 android 应用程序。在一个布局中，用户输入数据，我想保留这些数据并在不同的布局上使用它。

我尝试使用二维数组，但似乎数组值没有发送到第二个布局。

在我的第一个布局中

```
grid = new double[2][long];
for( int i=0; i<long; i++ )
{
    grid[0][i]=Data[i];
    grid[1][i]=Value2;  
}

public double[][] sendGrid() 
{
    return grid;
} 
```

当我想在第二个布局上调用二​​维网格数组时...

```
try{
    Layout1 mapInstance = new Layout1y();
    double[][] dataX = mapInstance.sendGrid();
    Log.i("dataXLength",""+dataX.length);
}
catch(Exception e)
{
    Log.i("-OK",e.toString());
} 
```

结果是：04-13 10:31:45.357: I/-OK(28588):`java.lang.NullPointerException`

关于如何将二维数组发送到我的第二个布局的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:59:22.050

有几种方法可以做到这一点，但我认为在你的情况下，如果你将二维数组设为静态，它最适合。

```
static double grid = new double[2][long]; 
```

现在在像这样的下一个活动访问中

```
double[][] dataX =Activity1.grid[][]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:49:32.827

通过“布局”，我假设您的意思是“活动”。您有许多选项可以在活动之间传递数据，所有这些都在这个问题上得到了很好的解释： [如何在 Android 应用程序中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

# css - 无法找到溢出来自 CSS 的位置

> ID：15989607
> 
> 赞同：0
> 
> 时间：2013-04-13T15:43:55.617
> 
> 标签：css, overflow, slideshow

你好，我美妙的 CSS 朋友们！所以，今天我遇到了幻灯片放映的问题，因为某种我找不到的溢出问题没有显示出来。我知道这是溢出，因为当我将其更改为“可见”时，幻灯片会出现，但我的内容背景消失了，我根本无法弄清楚为什么会发生这种情况。我已经对这个网站和其他人进行了广泛的研究，试图找到类似的问题，但我似乎找不到任何类似的东西。

这是解释更多内容的代码：

内容的 CSS：

```
#body {
background:none #000;
margin-top:21px!important;
}
#body.home {
border:1px solid #4f4f4f;
margin:0 auto;
width:1100px;
}
#body.home div:first-child {
overflow:hidden;
}
#body.home div:first-child div:first-child {
border-bottom:0px solid #4f4f4f;
border-right:1px solid #4f4f4f;
float:left;
padding:0 0 13px;
width:510px;
}
#body.home div:first-child div:first-child h2 {
margin:13px 0 0 20px;
}
#body.home div:first-child div:first-child h2 a {
color:#fff;
font-family:oswaldregular;
font-size:18px;
font-style:normal;
font-weight:400;
line-height:18px;
margin:0;
text-decoration:none;
text-transform:uppercase;
}
#body.home div:first-child div:first-child p {
color:#a5a5a5;
font-size:14px;
line-height:18px;
margin:16px 0;
padding:0 30px 0 20px;
}
#body.home div:first-child div:first-child p a {
color:#a5a5a5;
font-style:normal;
margin:0;
text-decoration:underline;
}
#body.home div:first-child div:first-child a {
color:#af0000;
font-size:14px;
font-style:italic;
line-height:18px;
margin:0 0 0 20px;
text-decoration:none;
}
#body.home div:first-child div:first-child a:hover {
color:#ff0000;
text-decoration:none!important;
}
#body.home div:first-child ul {
border-bottom:1px solid #4f4f4f;
list-style:none;
margin:0;
overflow:hidden;
padding:0;
}
#body.home div:first-child ul li:first-child {
border:none;
}
#body.home div:first-child ul li {
border-left:1px solid #4f4f4f;
float:left;
width:auto;
}
#body.home div:first-child ul li h3 {
margin:23px 0 5px 20px;
}
#body.home div:first-child ul li span {
color:#a5a5a5;
display:block;
font-size:14px;
line-height:18px;
margin:1px 0 24px 20px;
}
#body.home div:first-child ul li a img {
border-top:1px solid #4f4f4f;
}
#body.home div {
border-bottom:none;
overflow:hidden;
}
#body.home div div:first-child {
border-bottom:none;
border-right:0px solid #4f4f4f;
float:left;
width:510px;
}
#body.home div div:first-child ul {
border-bottom:none;
}
#body.home div div:first-child ul li:first-child {
width:238px;
}
#body.home div div:first-child ul li {
border-right:1px solid #4f4f4f;

padding:0;
width:239px;
}
#body.home div div:first-child ul li a {
display:block;
float:none;
}
#body.home div div:first-child ul li a img {
border-bottom:1px solid #4f4f4f;
}
#body.home div div:first-child ul li h4 {
margin:9px 30px 0 20px;
}
#body.home div div:first-child ul li h4 {
color:#fff;
float:none;
font-size:14px;
font-style:normal;
font-weight:700;
line-height:18px;
text-decoration:none;
}
#body.home div div:first-child ul li p {
color:#a5a5a5;
font-size:14px;
line-height:18px;
margin:1px 30px 0 20px;
}
#body.home div div:first-child ul li p a {
color:#a5a5a5;
display:inline;
float:none;
font-style:normal;
margin:0;
text-decoration:underline;
}
#body.home div div {
float:left;
width:510px;
}
#body.home div div h3 a {
color:#FFF;
font-family:oswaldregular;
font-size:18px;
font-style:normal;
font-weight:400;
line-height:18px;
text-decoration:none;
text-transform:uppercase;
}
#body.home div div ul {
list-style:none;
margin:0;
padding:0;
}
#body.home div div ul li {
border-top:1px solid #4f4f4f;
overflow:hidden;
}
#body.home div div ul li a {
display:block;
float:left;
margin:0 20px 0 0;
}
#body.home div div ul li a img {
border-right:0px solid #4f4f4f;
}
#body.home div div ul li div {
width:298px;
}
#body.home div div ul li div span {
color:#a5a5a5;
display:block;
font-size:11px;
line-height:18px;
margin:11px 0 0;
}
#body.home div div ul li div h4 {
color:#fff;
float:none;
font-size:14px;
line-height:16px;
text-decoration:none;
}
#body.home div div ul li div p {
color:#a5a5a5;
font-size:14px;
line-height:18px;
margin:2px 0 0;
}
#body.home div div ul li div p a {
color:#a5a5a5;
display:inline;
float:none;
margin:0;
text-decoration:underline;
}
#body.home div div ul li div p a.more {
color:#AF0000;
display:inline;
float:none;
font-size:14px;
font-style:italic;
line-height:18px;
text-decoration:none;
}
#body.home div div ul li div p a.more:hover {
color:#ff0000!important;
text-decoration:none!important;
} 
```

控制我正在使用的溢出的代码是第三个：

```
 #body.home div:first-child {
overflow:hidden;
} 
```

当我将其更改为可见时，这是唯一进行任何更改的。

这是幻灯片的 CSS：

```
#slider {
position: relative;
width: 500px;
margin: 0px auto 0px auto;
}

#slider .viewer {
width: 500px;
height: 500px;
overflow: hidden;
margin: 0 auto;
}

#slider .viewer .reel {
display: none;
height: 500px;
}

#slider .viewer .reel .slide {
position: relative;
width: 500px;
height: 500px;
} 
```

最后，这是内容的html：

```
<div id="body" class="home">
    <div>
        <div><br><br>
            <h2><a href="index.html">Welcome to our site!</a </h2>
            <p>
                Text. Text. Text. Text. 
            </p>
            <a href="services.html">Read More</a>         </div>

            <div id="slider">
                <div class="viewer">
                    <div class="reel">

                            <div class="slide"><img src="/images/img1.jpg" width="500" height="500" align="center" title="" /></div>
                            <div class="slide"><img src="/images/img2.jpg" width="500" height="500" align="center" title="" /></div>
                            <div class="slide"><img src="/images/img3.jpg" width="500" height="500" align="center" title="" /></div>
                            <div class="slide"><img src="/images/img4.jpg" width="500" height="500" align="center" title="" /></div>
                            <div class="slide"><img src="/images/img5.jpg" width="500" height="500" align="center" title="" /></div>
                            <div class="slide"><img src="/images/img6.jpg" width="500" height="500" align="center" title="" /></div>
                            <div class="slide"><img src="/images/img7.jpg" width="500" height="500" align="center" title=" " /></div>
                            <div class="slide"><img src="/images/img8.jpg" width="500" height="500" align="center"  title="" /></div>
                            <div class="slide"><img src="/images/img9.jpg" width="500" height="500" align="center" title="" /></div>

                    </div>
                </div>
            </div>
  </div>

</div>
            <script type="text/javascript">
            $('#slider').slidertron({
                viewerSelector: '.viewer',
                reelSelector: '.viewer .reel',
                slidesSelector: '.viewer .reel .slide',
                advanceDelay: 6000,
                speed: 'slow'
            });
        </script> 
```

如果您能看到幻灯片上的任何地方有溢出，请告诉我，因为我已经查看这段代码好几天了，我看不出哪里有溢出。啊！

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T00:33:25.080

我修好了它！div div 向左浮动，所以我尝试将浮动更改为“无”，我们就到了。背景突然出现在一切的背后。我必须保持溢出仍然可见，幻灯片才能显示出来，但只要我有背景和幻灯片，我不介意。我预计这不会有任何问题，因为它是一个静态页面。我要感谢大家提供的时间和建议。周末愉快！

# python - Using sklearn and Python for a large application classification/scraping exercise

> ID：15989610
> 
> 赞同：5
> 
> 时间：2013-04-13T15:44:01.627
> 
> 标签：python, scrapy, classification, scikit-learn

I am working on a relatively large text-based web classification problem and I am planning on using the multinomial Naive Bayes classifier in sklearn in python and the scrapy framework for the crawling. However, I am a little concerned that sklearn/python might be too slow for a problem that could involve classifications of millions of websites. I have already trained the classifier on several thousand websites from DMOZ. The research framework is as follows:

1) The crawler lands on a domain name and scrapes the text from 20 links on the site (of depth no larger than one). (The number of tokenized words here seems to vary between a few thousand to up to 150K for a sample run of the crawler) 2) Run the sklearn multionmial NB classifier with around 50,000 features and record the domain name depending on the result

My question is whether a Python-based classifier would be up to the task for such a large scale application or should I try re-writing the classifier (and maybe the scraper and word tokenizer as well) in a faster environment? If yes what might that environment be? Or perhaps Python is enough if accompanied with some parallelization of the code? Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T11:31:21.450

例如，使用支持API`HashingVectorizer`的线性分类模块之一，或者增量学习模型，而无需预先矢量化和加载内存中的所有数据，并且在数亿个分类器上学习分类器应该没有任何问题。具有数十万（散列）特征的文档。`partial_fit``SGDClassifier``Perceptron``PassiveAggresiveClassifier`

但是，您应该加载一个适合内存的小子样本（例如 100k 文档），并使用 Pipeline 对象和`RandomizedSearchCV`主分支的类为矢量化器网格搜索好的参数。`RandomizedSearchCV`您还可以使用适合内存的相同或更大的预矢量化数据集（例如几百万个文档）微调正则化参数的值（例如，C 表示 PassiveAggressiveClassifier 或 alpha 表示 SGDClassifier ）。

还可以对线性模型进行平均（平均2 个线性模型） `coef_`，`intercept_`以便您可以对数据集进行分区，独立学习线性模型，然后对模型进行平均以获得最终模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T08:54:31.747

从根本上说，如果您依赖 numpy、scipy 和 sklearn，Python 不会成为瓶颈，因为这些库的大多数关键部分都是作为 C 扩展实现的。

但是，由于您正在抓取数百万个站点，因此您将受到单台机器功能的限制。我会考虑使用像 PiCloud [1] 或 Amazon Web Services (EC2) 这样的服务来将您的工作负载分布在许多服务器上。

一个例子是通过 Cloud Queues [2] 收集您的数据。

[1] [http://www.picloud.com](http://www.picloud.com)

[2] [http://blog.picloud.com/2013/04/03/introducing-queues-creating-a-pipeline-in-the-cloud/](http://blog.picloud.com/2013/04/03/introducing-queues-creating-a-pipeline-in-the-cloud/)

# c# - "operation must use an updateable query" after deployment

> ID：15989611
> 
> 赞同：0
> 
> 时间：2013-04-13T15:44:18.500
> 
> 标签：c#, wpf, database, ms-access

I have created a desktop application in C# (WPF) with an Access 2010 database, I have also created setup program for it. My problem is that when I installed it on my PC it works fine, but when I install it on some other PC then it fails with an Exception like

"Operation must use an updateable query"

I have searched for it and every answer I found suggested that it was a permissions issue. I have tried to give full access to database folder but still I get the same error, I have tried to resolve it for last two days but I still haven't found a solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:39:37.603

例如，如果您的安装程序将数据库文件与可执行文件放在同一文件夹中，`C:\Program Files\myApp\`那么普通用户将只有对数据库的只读访问权限：

![我的数据.png](https://i.stack.imgur.com/HAqT6.png)

即使您的安装程序修改了数据库*文件*的权限，普通用户仍然对数据库具有只读访问权限，因为他们对*文件夹*具有只读访问权限...

![我的应用程序.png](https://i.stack.imgur.com/1MjDK.png)

...而且您绝对不想将该文件夹的读写访问权限打开到常规`Users`. （有关文件/文件夹权限对 Jet/ACE 数据库的影响的详细信息，请参阅我的答案[。](https://stackoverflow.com/questions/15239970/how-to-enable-1-user-to-update-the-database-while-allowing-others-to-only-read-i/15735367#15735367)）

相反，您的安装程序应该将数据库文件放入普通用户通常具有读写访问权限的文件夹中，可能位于`%PUBLIC%`.

# mongodb - MongoDB索引

> ID：15989615
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:44:24.943
> 
> 标签：mongodb

我有一个查询

```
db.messages.find({'headers.Date':{'$gt': new Date(2001,3,1)}},{'headers.From':1, _id:0}).sort({'headers.From':1}) 
```

我已经设置`headers.From`为索引。现在查询的哪一部分将使用这个索引？即查找查询的一部分或排序查询的一部分？

解释输出是

```
{
    "cursor" : "BtreeCursor headers.From_1",
    "isMultiKey" : false,
    "n" : 83057,
    "nscannedObjects" : 120477,
    "nscanned" : 120477,
    "nscannedObjectsAllPlans" : 120581,
    "nscannedAllPlans" : 120581,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 250,
    "indexBounds" : {
        "headers.From" : [
            [
                {
                    "$minElement" : 1
                },
                {
                    "$maxElement" : 1
                }
            ]
        ]
    },
    "server" : "Andrews-iMac.local:27017"
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:32:51.637

索引用于排序部分，而不是用于查询，因为您的查询不使用 headers.From 字段，而您的排序则使用。

# php - Nginx Fuelphp VHost Config - File Not Found

> ID：15989616
> 
> 赞同：0
> 
> 时间：2013-04-13T15:44:26.300
> 
> 标签：php, nginx, rewrite, fuelphp

I am trying to setup my first fuelphp project in ubuntu12, php5 and nginx, Im following their tutorial in [http://ucf.github.io/fuelphp-crash-course/#Every_Building_Needs_A_Scaffold](http://ucf.github.io/fuelphp-crash-course/#Every_Building_Needs_A_Scaffold)

The problem Im having is when Im trying to access my app URL

```
http://localhost/public/messages 
```

the error is "file not found"

The rewrite rule im using is

```
root /path/to/project;
index index.php index.htm index.html;

location / {
       try_files $uri $uri/ @handler;
       expires  30d;
}        

location @handler {
       rewrite ^ /index.php?/$request_uri;
} 
```

Thanks in advance for the help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:08:39.097

根/路径/到/项目；

我假设您正在更改它以反映项目公共目录的实际路径？如果没有，你需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T05:31:34.570

在研究了这个之后，我发现我什至不需要修改我的fuel/public/.htaccess上的.htaccess

我通过在我的 Vhost 配置中设置 AllowOverride All 解决了这个问题，启用了 mod_rewrite 并重新启动了我的 apache

谢谢

# java - Java：无限循环约定

> ID：15989618
> 
> 赞同：44
> 
> 时间：2013-04-13T15:44:36.850
> 
> 标签：java, infinite-loop, conventions

Java中无限循环的约定是什么？我应该写`while(true)`还是`for(;;)`？我个人会使用`while(true)`，因为我较少使用 while 循环。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-13T15:48:25.757

和之间的字节码没有区别，`while(true)`但`for(;;)`我更喜欢`while(true)`它，因为它不那么令人困惑（尤其是对于刚接触 Java 的人）。

您可以使用此代码示例进行检查

```
void test1(){
    for (;;){
        System.out.println("hello");
    }
}
void test2(){
    while(true){
        System.out.println("world");
    }
} 
```

当你使用命令时`javap -c ClassWithThoseMethods`，你会得到

```
 void test1();
    Code:
       0: getstatic     #15                 // Field java/lang/System.out:Ljava/io/PrintStream;
       3: ldc           #21                 // String hello
       5: invokevirtual #23                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       8: goto          0

  void test2();
    Code:
       0: getstatic     #15                 // Field java/lang/System.out:Ljava/io/PrintStream;
       3: ldc           #31                 // String world
       5: invokevirtual #23                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       8: goto          0 
```

它显示了相同的结构（“hello”与“world”字符串除外）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-13T15:46:58.907

我更喜欢`while(true)`，因为我使用 while 循环的频率低于 for 循环。For 循环有更好的用途，并且`while(true)`比`for(;;)`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-13T15:47:12.353

由你决定。我不认为有这样的约定。您可以使用`while(true)`或`for(;;)`

我会说我`while(true)`在源代码中经常遇到。`for(;;)`较少使用且较难阅读。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-13T15:50:55.080

`for(;;)`糟透了，对于新手来说阅读是完全不直观的。请`while(true)`改用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-13T15:48:25.040

最终，这是您的选择。Java 教程同时展示了[for](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)和[while](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)。

但是，`while(true)`由于它更易于理解，因此更经常使用。

# javascript - Inserting Text Into HTML

> ID：15989622
> 
> 赞同：0
> 
> 时间：2013-04-13T15:45:02.833
> 
> 标签：javascript, html, text

What I Want: Very simply I have a C program that generates a variable periodically, I want to be able to display this value on a website.

Restrictions: The webpage is HTML, php does not work, javascript does [I have tried a few javascript solutions but they have all been long, tedious and in the end ineffective] I want it to be able to format the text so that it matches the rest of the webpage. Above all I'd really like to find something simple that works.

Freedoms: I can output the variable from my C program to just about any file type and content that I want, the file is hosted so is available locally to the server or online for the client.

Preferred Solutions: I am currently playing around with the object and iframe tags native to html. They give a nice simple input:

```
<object height=20 width=75 type='text/plain' border=0 data="URL/filename.txt"></object> 
```

inserts the contents of my file, but it can't be formatted so I am stuck with 12pt Courier font which is not acceptable. Using

```
<iframe seamless height=20 width=75 scrolling='no' src="URL/filename.htm"></iframe> 
```

and adding my desired font/colour/size etc to the htm file gets me the right text style, but htm has a large amount of white padding around it which I can't seem to get rid of so I have to make my iframe quite large for the text to be displayed, but then it doesn't fit smoothly with other text.

So anyone that can answer one of four questions:

*   How to remove excess padding from htm
*   How to format the style of a html object
*   Is there anything in Java as simple as the php [so apparently it doesn't show php code even when you quote it as code. But basically using echo and get_file_contents to insert the contents of a txt file into a html page]
*   Propose an alternate solution

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:06:12.887

你需要 AJAX ......这只是一个花哨的流行语。这意味着您可以告诉 JavaScript 无需重新加载页面即可从服务器获取文件，并且您可以将该文件中的数据插入到 HTML 中。

通过使用像[jQuery](http://jquery.com/)这样的 JavaScript 库，AJAX 变得更加简单，但它可以在没有 jQuery 的情况下完成。如果你想用困难的方式来做的话，在 Mozilla 开发者网络上有一个相当不错的[入门教程，但我真的推荐 jQuery。](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)

至于格式化......任何格式化......你需要使用CSS。几乎所有关于网页上任何内容的外观都由 CSS 控制。MDN 也有一个[学习 CSS](https://developer.mozilla.org/en-US/learn/css)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:51:20.453

填充和样式可以由[css](http://www.w3schools.com/css/)处理。

`java`我假设您的意思是`javascript`- google-ing 会帮助您。如果没有关于您的服务器正在运行什么以及正在分派您的页面的详细信息，我们无法给您一个准确的答案。您可能希望使用[ajax](http://www.w3schools.com/ajax/)来保持它在后台更新。

尝试用谷歌搜索你的问题，你会惊讶地发现这有多频繁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T15:57:19.490

我不确定将变量放入网页后要做什么，但我认为以下内容可能有用。

*   在您的页面上创建一个隐藏的 div
*   让您的 C 应用程序将变量写入某个文件
*   使用 jquery 执行 ajax 调用以将该值拉入 div （或您要使用的任何其他容器
*   使用某种类型的计时器，每隔 X 时间段执行一次 ajax 调用，这将获得最新的变量
*   在您的主页上，有另一个计时器，然后该计时器将进入该容器，获取您的价值，然后您可以自由地用它做您想做的事。

在不了解您要完成的工作的情况下，这一切都在我的脑海中。如果您提供更多详细信息，我们可能会为您提供更多帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-13T15:56:36.947

1.  在你的主 html 文件上加载 jquery
2.  放置一个带有一些 id 的 div（例如 id="newvalue"）
3.  让你的 c 程序将输出写入文件（例如 value.html）
4.  在主 html 页面标题上，在 jquery 包含代码之后添加一些 javascript

    $( 文档 ).ready(function() { $("#newvalue").load('yoursiteurl/value.html'); });

# php - 语法错误，访问冲突 pdo

> ID：15989623
> 
> 赞同：0
> 
> 时间：2013-04-13T15:45:11.667
> 
> 标签：php, mysql, pdo

我收到此错误：SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 'INSERT INTO student_details (student_id, first_name, last_name, dob, address_lin' 附近使用正确的语法

对于这段代码：有什么想法吗？

```
//create variables from each value that was submitted from the form */
$student_info_id = $_POST['student_info_id'];
$class_id = $_POST['class_id'];
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$dob = $_POST['dob'];
$address_line_1 = $_POST['address_line_1'];
$address_line_2 = $_POST['address_line_2'];
$town = $_POST['town'];
$county = $_POST['county'];
$postcode = $_POST['postcode'];
$gender = $_POST['gender'];
$ethnicity = $_POST['ethnicity'];

try {
$conn = new PDO("mysql:host=$host; dbname=$dbname", $user, $password);
$conn->exec("SET CHARACTER SET utf8");      // Sets encoding UTF-8
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

 $sql = "
        INSERT INTO student_info (student_info_id, class_id) VALUES (:student_info_id, :class_id) 
        INSERT INTO student_details (student_id, first_name, last_name, dob, address_line_1, address_line_2, town, county, postcode, gender, ethnicity, student_info_id)
                                        VALUES (:student_id, :first_name, :last_name, :dob, :address_line_1, :address_line_2, :town, :county, :postcode, :gender, :ethnicity, :student_info_id)     

        ";

 $statement = $conn->prepare($sql);
 $statement->bindValue(":student_info_id", $student_info_id);
 $statement->bindValue(":class_id", $class_id);
 $statement->bindValue(":student_id", $student_id);
 $statement->bindValue(":first_name", $first_name);
 $statement->bindValue(":last_name", $last_name);
 $statement->bindValue(":dob", $dob);
 $statement->bindValue(":address_line_1", $address_line_2);
 $statement->bindValue(":address_line_2", $address_line_1);
 $statement->bindValue(":town", $town);
 $statement->bindValue(":county", $county);
 $statement->bindValue(":postcode", $postcode);
 $statement->bindValue(":gender", $gender);
 $statement->bindValue(":ethnicity", $ethnicity);
 $statement->bindValue(":student_info_id", $student_info_id);

 $count = $statement->execute();

  $conn = null;        // Disconnect
}
catch(PDOException $e) {
  echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:47:54.253

您必须以这样的方式完成第`INSERT`一个`;`：

```
INSERT INTO student_info (
   student_info_id,
   class_id
) VALUES (
   :student_info_id,
   :class_id
); <-- a semicolon is the default statement separator, use it
.... 
```

请注意，虽然可以一次运行多个查询，但我不建议您这样做。如果您逐个运行每个查询，您将更好地控制错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:48:00.760

我不确定 PDO 是否支持多个语句，但如果支持，错误是您没有终止第一个语句，

```
INSERT INTO student_info (student_info_id, class_id) 
VALUES (:student_info_id, :class_id);
                                    ^ add this one 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T15:51:11.743

您不能在一次调用中运行多个查询。
一个一个地分别运行它们。

# java - 这个合并排序实现有什么问题

> ID：15989624
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:45:13.480
> 
> 标签：java

在下面的代码中，`merge()`函数只被调用了两次，然后它进入了一些无限循环。

```
package Prac;

public class MergeSort {

    private static int[] arr = {12, 10, 5, 2, 7, 56, 81, 17, 14, 1 };
    private static int[] helper;

    public static void main(String[] args) {

        MergeSort ob = new MergeSort();
        ob.sort();
        for (int i : arr) {
            System.out.println(arr[i]);
        }
    }

    private void sort() {
        int number = arr.length;
        helper = new int[number];
        mergeSort(0, number - 1);
    }

    private void mergeSort(int low, int high) {
        if (low < high) {
            int middle = (low + (high - low)) / 2;
            mergeSort(low, middle);
            mergeSort(middle + 1, high);
            merge(low, middle, high);
        }
    }

    private void merge(int low, int middle, int high) {
        for (int i = low; i <= high; i++) {
            helper[i] = arr[i];
        }
        int firstPointer = low;
        int secondPointer = middle + 1;
        int insertPointer = low;
        while (firstPointer <= middle && secondPointer <= high) {
            if (helper[firstPointer] < helper[secondPointer]) {
                arr[insertPointer] = helper[firstPointer];
                firstPointer++;
            } else {
                arr[insertPointer] = helper[secondPointer];
                secondPointer++;
            }
            insertPointer++;
        }
        if (firstPointer < middle || middle == 0) {
            while (firstPointer <= middle) {
                arr[insertPointer] = helper[firstPointer];
                firstPointer++;
                insertPointer++;
            }
        } else {
            while (secondPointer <= high) {
                arr[insertPointer] = helper[secondPointer];
                secondPointer++;
                insertPointer++;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T15:52:00.900

要获得中间位置应该是：

```
int middle = low + ((high - low) / 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T15:52:17.530

我认为你的问题就在这里

```
int middle = (low + (high - low)) / 2; ??????????????????? 
```

注意 :`(low + (high - low)) / 2` **等于** `hight / 2`

所以正确的中间函数是：

`int middle = (low + high ) / 2;`

* * *

# xcode - Unable to go back to previous view controller

> ID：15989626
> 
> 赞同：0
> 
> 时间：2013-04-13T15:45:26.777
> 
> 标签：xcode, cocoa, segue, uistoryboardsegue

I am using storyboards. From ViewController1, I segue to ViewController2 using a modal segue programmatically:
`[self performSegueWithIdentifier: @"ViewController2" sender: self];`.

At the end of ViewController2 execution, I want to go back to the first view controller using∫br>`[self dismissViewControllerAnimated:YES completion:nil];`
and receive an EXC_BAD_ACCESS message.

Reading the numerous articles on this issue, the statement seems to be that the initial view controller is deallocated. However none of the articles I found explains how to prevent this deallocation and how to anyway come back.

Any help appreciated !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:17:08.930

您不能`self`用于解雇。使用`self.presentingViewController`.

# c# - C# VS2012 继承表单菜单

> ID：15989628
> 
> 赞同：1
> 
> 时间：2013-04-13T15:45:38.950
> 
> 标签：c#, inheritance, visual-studio-2012

我用菜单创建了 BaseForm 并添加了一些功能。

menuStrip 和 toolStrip 的修饰符设置为公共。我在片段中单击的每个项目都将修饰符设置为公共。

在 InheritedForm 中，除了 menuStrip 和 toolStrip 之外，我可以编辑所有具有 Modifiers=Public 的 BaseForm 元素。

为什么会这样，我在哪里可以解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:17:10.537

我有同样的问题，我找到了这个视频，它对我有用

[YouTube](http://www.youtube.com/watch?v=-dyaIBL0xcM)

# android - ListView 中的 EditTexts 完成不止一次

> ID：15989629
> 
> 赞同：0
> 
> 时间：2013-04-13T15:45:42.890
> 
> 标签：android, layout, android-edittext, adapter

我的问题有点奇怪......基本上我有一个像上面那样的 ListView ：

```
<ListView
    android:id="@+id/listViewMenu"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/order_button"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true" >

</ListView> 
```

为此，我将元素定义为如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="horizontal"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.7">

        <TextView android:id="@+id/name"
          android:textSize="14sp"
          android:textStyle="bold"
          android:textColor="#0033CC"
          android:layout_marginLeft="10sp"
          android:layout_marginTop="5sp"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
        />

        <TextView android:id="@+id/price"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
        />

        <TextView android:id="@+id/description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
        />

    </LinearLayout>

    <EditText
        android:id="@+id/quantityEdit"
        android:layout_height="85dp"
        android:layout_width="85dp"
        android:textSize="12sp"
        android:textColor="#0033CC"
        android:layout_marginRight="15dp"
        android:layout_weight="0.3"
        android:inputType="number"
        android:ems="10"
        android:hint="@string/quantity_show">

        <requestFocus />
    </EditText>

    </LinearLayout> 
```

这是我的新编辑插件

```
public MyCustomBaseAdapter(Context context, ArrayList<Product> products) {
         this.products = products;
         this.mInflater = LayoutInflater.from(context);

         for (int i=0;i<products.size();i++){
             editTextsVlues.add("");
         }
     }

     public int getCount() {
         return products.size();
     }

     public Object getItem(int position) {
         return products.get(position);
     }

     public long getItemId(int position) {
         return position;
     }

     public View getView(int position, View convertView, ViewGroup parent) {

         ViewHolder holder;

         if (convertView == null) {
             convertView = mInflater.inflate(R.layout.product_item, null);
             holder = new ViewHolder();
             holder.quantity = (EditText) convertView.findViewById(R.id.quantityEdit);
             holder.picView = (ImageView) convertView.findViewById(R.id.pic_view);

             convertView.setTag(holder);
         } else {
             holder = (ViewHolder) convertView.getTag();
         }

         holder.quantity.setText(editTextsVlues.get(position));

         holder.picView.setImageBitmap(products.get(position).getPicture());

         positionListener = position;

         holder.quantity.addTextChangedListener(new TextWatcher() {

             @Override
             public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                 // When user changed the Text
                 editTextsVlues.set(positionListener, cs.toString());
             }

             @Override
             public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                     int arg3) {
                 // TODO Auto-generated method stub

             }

             @Override
             public void afterTextChanged(Editable arg0) {
                 // TODO Auto-generated method stub

             }
         });

         return convertView;
     }

} 
```

## 我面临的问题是，当我在列表中有更多元素（它们不适合我的屏幕）时，当我在 EditText 中输入一个值时，下面的另一个 EditText 正在填充......为什么会这样发生...？我在网上没有找到类似的案例。

EDTI：Sam，我尝试了您的方法..但是我的编程技能不是很好...您认为现在适配器的问题是什么？...当我输入一个值并失去对编辑文本的关注时，它只是删除它... :(

EDIT2：本网站的教程帮助我解决了我的问题：http: [//vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/](http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/) **不使用 TextWatcher**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:49:30.760

> 当我在 EditText 中输入一个值时，下面的另一个 EditText 正在被填充...为什么会发生这种情况...？

ListView 回收每一行的布局。可以这样想：当您可以使用大约 10 行并在它们滚出屏幕后简单地重复使用它们时，为什么还要有 1000 个独特的布局（这很慢）？[Turbo Charge your UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)和其他 Google I/O 演示文稿中详细介绍了这个概念，非常值得一看。

无论如何，解决方案很简单，将每个 EditText 的内容保存在适配器中，并以与恢复 TextView 字符串相同的方式恢复它们的值。

* * *

**添加**

> 我怎么做？：）

将新成员添加到您的适配器：

```
private List<String> editTexts = new ArrayList<String>(); // Please think of a better name :) 
```

使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)记录对每个 EditText 的任何更改并将这些字符串保存在此列表中。然后用`getView()`以下方法恢复值：

```
holder.quantity.setText(editTexts.get(position)); 
```

# c++ - Visual Studio 2010 项目文件过滤器

> ID：15989634
> 
> 赞同：4
> 
> 时间：2013-04-13T15:46:02.787
> 
> 标签：c++, c, visual-studio-2010

我正在处理一组复杂的 C/C++ 应用程序，这些应用程序也应该是独立于平台的。到目前为止，它与 UNIX/Windows 兼容并且运行良好。然而，在 VS2010 上维护这个怪物是一场噩梦。我有以下文件结构：

```
/
  来源
    库1
      包括
        ...
      源代码
        ...
    库2
      包括
        ...
      源代码
        ...
    应用程序3
      包括
        ...
      源代码
        ...
  建设者
    制作
      ...
    制作
      ...
    VS2010
      vs2010.sln
      库1
        lib1.vcxproj
        lib1.vcxproj.filters
      库2
        lib2.vcxproj
        lib2.vcxproj.filters
      应用程序3
        应用程序3.vcxproj
        app3.vcxproj.filters

```

正如我们所看到的，因为一切都是平台独立的，所以我必须将构建器与源代码完全分开。恕我直言，这本身就是一个很好的做法，每个人都应该执行:)

这是现在的问题......在组织过滤器中的包含/源文件时，VS2010 完全无法使用。您必须通过重复执行“添加 -> 新过滤器”然后“添加 -> 退出项目”来手动执行此操作。我在每个包含文件夹中有一个**非常复杂的文件夹结构和文件。**创建过滤器的任务变成一整天的工作。另一方面，我可以将整个文件夹从资源管理器拖到 VS2010 内的项目中，但它会将所有头文件/源文件放在那里而没有任何过滤器，使其毫无价值：您无法在 100 个文件中搜索正确的一个没有某种层次结构的..

问题是：VS2010 是否有一些模糊的方式来导入文件夹并将文件夹结构保留为过滤器？在我看来，创建 VS2010 的 M$FT 人认为 M$FT 是丛林中唯一的动物，您必须使用构建器项目污染源文件夹，以便您可以利用“显示隐藏文件”将它们与项目一起包含在项目中文件夹结构。这是荒谬的恕我直言...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T17:06:45.787

你正在使用 CMake，所以我建议你只坚持这个。你可以用它（至少）生成 makefile 和 VS2010 项目文件。对于 VS，生成的文件是一个 sln 和一堆 vxproj（CMake 脚本中每个项目一个）。

在 CMake 文件中，您可以使用命令对文件进行分组[`source_group`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3asource_group)。过滤器将根据源组自动为 vs 生成。我不知道其他 IDE，例如 Code::Blocks 或 NetBeans。

如果您想根据文件路径自动分组*[评论请求]*：

```
# Glob all sources file inside directory ${DIRECTORY}
file(GLOB_RECURSE TMP_FILES
    ${DIRECTORY}/*.h
    ${DIRECTORY}/*.cpp
    ${DIRECTORY}/*.c
)

foreach(f ${TMP_FILES})
    # Get the path of the file relative to ${DIRECTORY},
    # then alter it (not compulsory)
    file(RELATIVE_PATH SRCGR ${DIRECTORY} ${f})
    set(SRCGR "Something/${SRCGR}")

    # Extract the folder, ie remove the filename part
    string(REGEX REPLACE "(.*)(/[^/]*)$" "\\1" SRCGR ${SRCGR})

    # Source_group expects \\ (double antislash), not / (slash)
    string(REPLACE / \\ SRCGR ${SRCGR})
    source_group("${SRCGR}" FILES ${f})
endforeach() 
```

# database - perl script without using DBI

> ID：15989640
> 
> 赞同：1
> 
> 时间：2013-04-13T15:46:27.560
> 
> 标签：database, perl, postgresql, populate

I have to make a perl script populate a database in PostgreSQL without using DBI or any sort of database interface model. I am a beginner to scripting so naturally, I'v been stuck on this for quite a while. I only have this much so far.

```
 open my $pipe, '|-', "psql -d postgres -U postgres", @options or die;
    # NOT SURE WHAT TO DO AFTER THIS

    close $pipe; 
```

edit 1: Now i'm trying to do this.

```
 for ($count = $iters; $count >= 1; $count--) {
    $randdecimal = rand();
    $pipe "INSERT INTO random_table (runid, random_number) VALUES ($runid, $randdecimal)";
 } 
```

but it gives me a syntax error

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:32:38.763

就像其他人说的那样，DBI比打印到管道要好得多*。*

然而，有一个中途的房子。只需将所有 SQL 打印到 STDOUT，然后执行以下操作：

```
myscript.pl | psql -v ON_ERROR_STOP=1 --single-transaction -f - 
```

这使您可以轻松检查脚本输出/将其发送到文件。psql 选项在第一个错误时停止，将所有内容包装在事务中并从 STDIN 读取。您可能也需要通常的 -h/-U 选项。

就个人而言，我倾向于打开两个终端，然后从 psql 提示符写入 .sql 文件，然后写入 \i 。我喜欢记录我运行的命令。

# ruby-on-rails-3 - Rails：从继承的控制器方法动态构建数组

> ID：15989645
> 
> 赞同：0
> 
> 时间：2013-04-13T15:46:58.653
> 
> 标签：ruby-on-rails-3, controller

我正在构建一个 CMS 作为 gem 的子集，所有这些都继承自 Base gem。每个 gem 提供不同的功能，即博客、页面、事件等。我想设置我的 Base gem，以便它可以根据已安装的 gem 动态构建导航。我不想通过查找所有控制器/路由来自动执行此操作，我宁愿让每个 gem 将导航项标识为哈希数组，即：

```
# In my Admin controller (from which all other gem controllers inherit)
@admin_navigation = [{controller: "users", label: "Users", sort_order: 10}, {controller: "settings", label: "Settings", sort_order: 11}]

# In my Pages gem
@admin_navigation += [{controller: "pages", label: "Pages", sort_order: 3}, {controller: "page_templates", label: "Pagetemplates", sort_order: 8}]

# In my blog gem
@admin_navigation += [{controller: "posts", label: "Blog", sort_order: 4}, {controller: "tags", label: "Tags", sort_order: 5}] 
```

基本上我希望我的@admin_navigation 变量包含来自每个继承的控制器的所有导航项。控制器有没有办法从每个继承的控制器调用方法？

有没有更好的方法来实现这一点？最后，我只需要这些导航项哈希的数组来构建我的菜单。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:23:41.307

您可以将 ruby`inherited`​​ 方法用于类。所以在你的`AdminController`，你会

```
def self.inherited(subclass)
  @admin_navigation ||= []
  @admin_navigation += subclass.admin_navigation
end 
```

假设它`@admin_navigation`作为继承控制器上的类方法公开。您还必须确保`AdminController`首先定义它，然后再真正加载所有控制器，以便它们触发回调。

# android-contacts - 无法存储从电话簿 android 获取的联系人在应用程序关闭后它被清除

> ID：15989652
> 
> 赞同：0
> 
> 时间：2013-04-13T15:47:30.393
> 
> 标签：android-contacts

在我的应用程序中，我想将联系人存储为 android 应用程序中的安全列表。出于存储目的，我想从电话簿中获取联系人。我已经完成了获取联系号码，但我无法将其存储在应用程序中，所以当evar 应用程序关闭时，获取的号码被清除并且列表将变为空，请帮助..!!!

```
public class SafeList extends ListActivity implements OnClickListener {
String number;
ArrayAdapter<String> adapter;
LayoutInflater layoutInflater = null;

List<String> safelist = new ArrayList<String>();
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.safelist_layout);
    Button addContact = (Button) findViewById(R.id.addContact);
    addContact.setOnClickListener(this);
    safelist = new ArrayList<String>();
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,safelist);
    setListAdapter(adapter);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
    // BoD con't: CONTENT_TYPE instead of CONTENT_ITEM_TYPE
    intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
    startActivityForResult(intent, 1);
    // Intent intent = new Intent(Intent.ACTION_PICK,
    // ContactsContract.Contacts.CONTENT_URI);
    // startActivityForResult(intent, 1);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (data != null) {
        Uri uri = data.getData();

        if (uri != null) {
            Cursor c = null;
            try {
                c = getContentResolver()
                        .query(uri,
                                new String[] {
                                        ContactsContract.CommonDataKinds.Phone.NUMBER,
                                        ContactsContract.CommonDataKinds.Phone.TYPE },
                                null, null, null);

                if (c != null && c.moveToFirst()) {
                    number = c.getString(0);
                    int type = c.getInt(1);
                    safelist.add(number);
                    adapter.notifyDataSetChanged();
                    showSelectedNumber();
                }
            } finally {
                if (c != null) {
                    c.close();
                }
            }
        }
    }
}

public View getView(int paramInt, View paramView, ViewGroup paramViewGroup)
{
    ViewHolder localViewHolder;
    TextView number;
  if (paramView == null)
  {
    paramView = SafeList.this.layoutInflater.inflate(R.layout.safelist_item, null);
    localViewHolder = new SafeList.ViewHolder();
    localViewHolder.number = ((TextView)paramView.findViewById(R.id.textContactNumber));
    paramView.setTag(localViewHolder);
  }
  while (true)
  {

    localViewHolder = (SafeList.ViewHolder)paramView.getTag();
    return paramView;
  }

}

static class ViewHolder {            
     public TextView number;
    }  
private void showSelectedNumber() {
    // TODO Auto-generated method stub
    Toast.makeText(this, number, Toast.LENGTH_LONG).show();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:20:44.067

我建议的替代方法是在文本字段中手动添加数字。

# ide - Java 桌面应用程序不在我的 IDE 中的项目名称下

> ID：15989653
> 
> 赞同：0
> 
> 时间：2013-04-13T15:47:34.613
> 
> 标签：ide, desktop-application

我正在使用一个教程，它显示在他的 IDE 中的项目选项下有一个 java 桌面应用程序（单击新项目后，新项目页面将打开并且在 java 类别下有一个 java 桌面应用程序）。我应该在我的 IDE 中选择它，但它不存在。为什么它不存在？我应该怎么做才能拥有它？我的 IDE 版本是 7.3 。在教程中，他使用的是第 6 版。我会很感激你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:26:47.160

您实际上已经在没有意识到的情况下回答了自己的问题。Java 桌面应用程序不在您的 Netbeans 版本中的原因（根据之前对此问题的经验做出假设）是因为它在 7.1 版中已被弃用。尽管它更复杂，但您可能希望学习[如何使用 Netbeans 平台](http://platform.netbeans.org/tutorials/nbm-quick-start.html "如何使用 Netbeans 平台")，因为它被认为是 Netbeans 中过去被标记为 Java 桌面应用程序的替代品。

# uiview - 从其他 uiviewcontrolelr 设置 uiview

> ID：15989676
> 
> 赞同：0
> 
> 时间：2013-04-13T15:49:40.243
> 
> 标签：uiview

我尝试将 uiview 从应用程序委托设置到另一个视图控制器，在视图控制器中我添加一个 IBOutlet 属性，并从应用程序委托我使用此代码：

```
self.secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 500, 500)];
[view setBackgroundColor:[UIColor redColor]];

self.secondViewController.myView = view;

self.window.rootViewController = self.secondViewController;

[self.window makeKeyAndVisible]; 
```

但是我的 uiviewcontroller 的视图不是红色，而是我从 IB 提供的默认颜色。

错误在哪里？

# image - SVG图像的自动宽度和高度

> ID：15989680
> 
> 赞同：21
> 
> 时间：2013-04-13T15:50:15.353
> 
> 标签：image, svg, d3.js

我是新手`SVG`，如果这是一个菜鸟问题，我很抱歉。我试图弄清楚如何让图像以引用图像的全宽和高度显示。我正在使用`D3.js`构建图表，并且希望在角落出现徽标。问题是图像`href`将使用 javascript 设置，因此被引用的图像永远不是固定的宽度或高度。我想要的是图像以全宽和全高显示，而不是放大或缩小。我希望的是能够根据图像的内容自动设置图像的宽度和高度，例如将`width`and`height`属性设置为`auto`. 然而，这只会导致图像不显示。

```
d3.select("body")
  .append("svg")
  .attr('id','mySVG')
  .attr({
      "width": "100%",
      "height": "100%"
  })
  .attr("viewBox", "0 0 " + width + " " + height )
  .attr("preserveAspectRatio", "none");

d3.select('#mySVG')
  .append('image')
  .attr('image-rendering','optimizeQuality')
  .attr('height','auto')     <--- This does not work
  .attr('width','auto')      <--- This does not work
  .attr('xlink:href', logoUrl)
  .attr('x','0')
  .attr('y','0'); 
```

我将如何指定 SVG 图像`width`并且`height`必须根据引用的图像大小动态确定？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-14T15:39:48.430

我不认为 'auto' 是 svg 图像元素的 'length' attr 的有效值。看看[这里](http://www.w3.org/TR/SVG/types.html#DataTypeLength)的规范。您可能想使用“100%”

您*可以*加载图像，然后检查加载时的宽度和高度。

JSFiddle：http: [//jsfiddle.net/WQBPC/4/](http://jsfiddle.net/WQBPC/4/)

```
var logoUrl = 'http://placehold.it/100x50&text=Logo';

//SVG Setup stuff
var svg =  d3.select("body").append("svg")
  .attr('id','mySVG')
  .attr({
      "width": '100%',
      "height": '100%'
  })

var svg_img=  svg.append('image')
  .attr('image-rendering','optimizeQuality')
  .attr('x','0')
  .attr('y','0');

//Load image and get size.
var img = new Image();
img.src = logoUrl;
img.onload = function() {
 var width = this.width;
 var height = this.height;

 svg_img .attr('height', height)
  .attr('width',width)
  .attr('xlink:href', logoUrl)

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-07T04:53:54.280

```
d3.select("svg")
  .append("image")
    .attr("id", "myImage")
    .attr("xlink:href", "myImage.png")
    .on("load", function(d) { 
        var myImage = new Image();
        myImage.onload = function() {
            d3.select("#myImage")
                .attr("width", this.width)
                .attr("height", this.height);
        }
        myImage.src = "myImage.png";
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-16T22:42:10.973

自从有人问过这个问题以来已经有几年了，但我目前正在尝试确定一些关于`auto`我自己用作宽度或高度值的事情，并认为我会分享我的发现。根据[Amelia Bellamy-Royds 的 2015 年](https://css-tricks.com/scale-svg/)关于缩放 SVG 的文章和她提供的[codepen 示例](https://codepen.io/AmeliaBR/pen/ZYBmOG)，如果您`auto`输入 的`width`或 的`height`值`<svg>`以及 的 值`viewBox`，您应该能够看到按比例缩放的内容。不幸的是，她还指出，当时这只适用于“Blink/Firefox”浏览器。[Blink 是 WebKit 的一个分支](https://groups.google.com/a/chromium.org/forum/#!msg/blink-dev/J41PSKuMan0/gD5xcqicqP8J), 所以现在 Chrome 也可能会支持这个。我在 Chrome 中看到了似乎支持这种可能性的行为，但我也收到了一个错误，所以 YMMV。

# forms - symfony2中的多种形式

> ID：15989683
> 
> 赞同：0
> 
> 时间：2013-04-13T15:50:46.817
> 
> 标签：forms, symfony, twig, symfony-2.1, symfony-forms

我有一个用于添加评论的表格，我想知道如何在同一页面上将该表格相乘。我试过这段代码，但它不起作用：

```
{% for statut in statuts %}
<div>
    {{ statut.sujet }}

    <form action="" method="post" {{ form_enctype(formC) }}>    
        {{ form_errors(formC) }}
        {{ form_errors(formC.commentaire) }}
        {{ form_widget(formC.commentaire) }}
        <div><input type="submit" class="btn btn-info"/><div>
        {{ form_rest(formC) }}
    </form>

</div>
{% endfor %} 
```

有人知道该怎么做吗？或任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:43:28.407

您需要在控制器中执行此操作，例如获取所有状态，然后为每个状态运行一个 for 循环，并为每个状态字段获取注释表单，将它们存储在数组中并返回数组。

然后在你的树枝模板中运行一个 for 循环。

# asp.net - 从 ASP.NET 生成 Word 文档的最佳解决方案是什么？

> ID：15989686
> 
> 赞同：5
> 
> 时间：2013-04-13T15:50:58.077
> 
> 标签：asp.net, xml, visual-studio-2010, ms-word, report

我想从我的 ASP.NET 应用程序生成一个 word 文档。目前，我们显示一个“议程列表”，其中包含议程信息和所有项目/主题。这个页面需要有word打开的能力。议程页面不是静态的，它是从 SQL Server 中提取的议程项目的动态列表。

关于最佳解决方案的任何建议？我正在寻找一个快速的解决方案，而 OpenXML 似乎有点太耗时了。我愿意购买第三方工具。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T18:31:48.837

使用 Office OpenXML SDK。对于更高版本的 Office（2007 及更高版本），这是标准。其他答案中提到了其他方法，但 OpenXML 将为您提供对输出的最大程度的控制。

以下是一些帮助您入门的文档：http: [//msdn.microsoft.com/en-us/office/bb265236.aspx](http://msdn.microsoft.com/en-us/office/bb265236.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T18:31:25.887

你可以

1.  让页面自己生成文档（如RTF格式）

2.  将 Word 模板另存为 XML 并在填写内容的位置添加您自己的占位符（我知道您说过这很耗时，如果您对模板进行大量更新，这是真的）

3.  使用像 Aspose ( [http://www.aspose.com](http://www.aspose.com) ) 这样的第 3 方工具，它对我来说效果很好，因为它确实节省了大量时间来通过 C# 中的对象处理文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T18:48:57.060

我以前使用过三种方法：

1.  使用 openXML 库以编程方式从头开始创建文档。
2.  使用 Office 自动化通过 Word 模板邮寄合并数据。您将首先创建模板，然后使用 DataSet 填充数据字段。
3.  如果您的数据库是 SQL Server 2005 或更高版本，您可以使用 SSRS 生成多种格式的文档，包括 Word、PDF、Excel 和 CSV。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-24T08:36:44.210

您不需要任何第三方控件来创建 Word 文档。从 2007 年起，Word 可以将 html 作为 word 文档读取。**您只需保存任何带有“ .doc** ”扩展名的网页，Word 就会对其进行分类。

只需使用您想要的任何格式创建您的网页，然后使用 .doc 扩展名保存它。

我曾经`HttpWebRequest`将 Url（带有参数）调用到我的页面，然后使用`WebResponse`并将`Stream`我的页面放入缓冲区，然后`StreamReader`将`StreamWriter`其保存到实际文档中。然后我有了自己的自定义函数来下载文件。

如果有人想要我的代码，请告诉我

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T08:47:14.547

您还可以尝试我们的第 3 方[GemBox.Document](http://www.gemboxsoftware.com/document/overview)库。

这是一个示例 C# 代码，如何以编程方式生成模板 Word (DOCX) 文档并使用**[邮件合并](http://www.gemboxsoftware.com/document/articles/c-sharp-vb-net-mail-merge)**将数据导入其中：

```
var document = new DocumentModel();

document.Sections.Add(
    new Section(document,
        new Paragraph(document, "Agenda List:"),
        new Paragraph(document,
            new Field(document, FieldType.MergeField, "RangeStart:Agendas"),
            new Field(document, FieldType.MergeField, "Subject") { CharacterFormat = { Bold = true } },
            new SpecialCharacter(document, SpecialCharacterType.LineBreak),
            new SpecialCharacter(document, SpecialCharacterType.Tab),
            new Field(document, FieldType.MergeField, "Description")),
        new Paragraph(document,
            new Field(document, FieldType.MergeField, "RangeEnd:Agendas"))));

var agendas = new object[]
{
    new { Subject = "First agenda subject", Description = "First agenda description." },
    new { Subject = "Second agenda subject", Description = "Second agenda description." }
};

document.MailMerge.Execute(agendas, "Agendas");

document.Save("Agendas.docx"); 
```

您还可以轻松地[将 Word 文档保存到 ASP.NET](http://www.gemboxsoftware.com/document/articles/asp-net-export-to-word-pdf)响应流。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-28T07:45:15.557

我可以建议您尝试我们的[Elerium Word .Net Writer](http://eleriumsoft.com/Word_NET/WordWriter/Default.aspx)组件以从 ASP.NET 页面生成 Word 文档。有一个带有源代码的演示，展示了如何使用动态数据表创建新的 Word 文档：

[http://eleriumsoft.com/Word_NET/WordWriter/Demo.aspx](http://eleriumsoft.com/Word_NET/WordWriter/Demo.aspx)

*免责声明：我是 Elerium Software 的开发人员。*

# python - python向量*向量------>矩阵

> ID：15989693
> 
> 赞同：1
> 
> 时间：2013-04-13T15:51:50.503
> 
> 标签：python, graphics

在python计算机图形工具包中，有一个用于表示三分量向量的**vec3**类型，但是我该如何做以下乘法：

三分量向量乘以其转置结果为 3*3 矩阵，如下例所示：

```
a = vec3(1,1,1)
matrix_m = a * a.transpose() 
```

任何人都知道这样一个库，它可以处理将一个维度为 1*3 的矩阵乘以另一个维度为 3*1 的矩阵并产生一个 3*3 的矩阵。

对不起，我必须澄清一点。我说的是矩阵数学。它像是：

[a0, a1, a2]*[a0, a1, a2]T = [a0*a0, a0*a1, a0*a2; a1*a0, a1*a1, a1*a2;a2*a0, a2*a1, a2*a2]

也许我可以尝试自己写一个函数，它是如此简单......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:49:19.930

一些向量数学软件，例如 MATLAB，很乐意将列向量和行向量作为不同类型的事物进行跟踪。Python 的 Numpy 没有，但确实提供了 numpy.outer(A,B)。不幸的是，图形工具包（我假设您参考[http://cgkit.sourceforge.net/](http://cgkit.sourceforge.net/)）不跟踪行与列，使用 numpy（这将是巨大的矫枉过正），或提供向量 x 向量 --> 矩阵外产品。看起来您必须编写自己的函数才能做到这一点。

# java - 为静态变量同步方法是否足够？

> ID：15989696
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:52:07.250
> 
> 标签：java, multithreading, synchronized

对于这段代码，同步方法是否足够好？非常感谢。

```
class{
   private static VariableManager = new VariableManager();

   ...

   static class VariableManager{
       private Map<String, Integer> diffCases = new HashMap<String,Integer>();
       private int count=0;

       public synchronized VariableManager get(){
            return this.
       }

       public synchronized  void add(String case, Integer i){
          diffCases.put(case, i);
       }

       public synchronized void increment(){
          c++;
      }
   }
}

public static synchronized void process(){

     ...
     variableManager.add(case, num);
     variableManager.count();

} 
```

该程序没有按预期工作，我怀疑这两个静态变量没有以某种方式受到保护。当我使用一个线程时，它运行良好。

有什么线索吗？非常感谢。

这两个线程正在处理同一个事件数组，即“eventsArray”。在“过程”方法中，两个变量在同步方法中被修改。

提供更多：

```
 Thread e1 = new Thread(new EventThread(eventsArray, "e1"));
         e1.start();

         Thread e2 = new Thread(new EventThread(eventsArray, "e2"));
         e2.start();

         e1.join();
         e2.join(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:04:10.833

为了保护静态变量的一致性，对它们的**每次**访问都必须使用**相同**的锁进行同步。这包括读取变量。如果静态变量仅用于您向我们展示的方法，那就足够了。

如果还有其他地方使用`count`或`diffcases`，您必须确保使用相同的监视器（即包含静态变量的类对象）始终同步访问。如果您“仅”读取变量，这也是正确的。

*请注意，您的代码包括：`diffcases.add(case)`. 你不能`.add()`去地图。那是真正的代码吗？

考虑将静态变量隐藏在旨在授予线程安全访问权限的对象中，从而封装并发感知代码。在线程之间共享静态变量通常是错误的来源。

# java - Graphics2D 不动

> ID：15989699
> 
> 赞同：1
> 
> 时间：2013-04-13T15:52:33.293
> 
> 标签：java, swing, timer, jpanel, java-2d

我目前正在制作游戏，但由于某种原因，某些 Graphics2D 组件没有移动并且程序最终崩溃。KeyListener 和移动之间是否有一些干扰？或者可能是因为我重新粉刷了所有移动中的面板？

我已经评论了代码的每个部分的作用。

这是代码：`

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;

public class Interface extends JPanel implements ActionListener, KeyListener{

Timer timer;

Player p;
Alien[] a; 

ImageIcon img, msl, al;
Image i, ms, ali;
Graphics2D g2d;

boolean allowUp = true, allowDown = true, allowAlienMove = false, firstDraw = true;
boolean[] allowAlien;
int mx, my = 0;
static int[] ay, ax, olday, oldax;

public Interface(){

    setFocusable(true);
    setBackground(Color.BLACK);
    setDoubleBuffered(true);

    addKeyListener(this);

    img = new ImageIcon(this.getClass().getResource("player.jpg"));
    al = new ImageIcon(this.getClass().getResource("alien.jpg"));

    p = new Player(this.getWidth()/6, this.getHeight()/6,10,this.getHeight()/2,img);
    timer = new Timer(1000, this);

    allowAlien = new boolean[5];
    a = new Alien[5];
    ay = new int[5];
    ax = new int[5];
    olday = new int[5];
    oldax = new int[5];

    for(int i = 0; i < 5; i++){

        ay[i] = -1;
        olday[i] = -1;

        ax[i] = -1;
        oldax[i] = -1;

    }

    for(int i = 0; i < allowAlien.length; i++){

        allowAlien[i] = false;

    }

    spawnAliens();          

}

//SPAWN ALIENS

public void spawnAliens(){       

    int[] area = new int[5];
    area[0] = 70;
    area[1] = 170;
    area[2] = 270;
    area[3] = 370;
    area[4] = 445;

    for(int j = 0; j < ax.length; j++){

        ax[j] = 700;
        oldax[j] = ax[j];

    }

    for(int i =0; i < a.length; i++){

        if(i > 0){
            ay[i] = ((int)(Math.random()*area[i] + area[i-1]));
        }else{
            ay[i] = ((int)(Math.random()*area[i] + 5));
        }

        olday[i] = ay[i];

        //THIS COMPONENT NOT MOVING
        a[i] = new Alien(this.getWidth()/6, this.getHeight()/6,ax[i],ay[i],img);
        allowAlien[i] = true;

       repaint();

    }

    allowAlienMove = true;

}

//THIS IS THE DRAWING PART 

public void paint(Graphics g){
    super.paint(g);

    i = img.getImage();  
    ms = msl.getImage();
    ali = al.getImage();

    g2d = (Graphics2D)g;
    g2d.drawImage(i, p.getX(), p.getY(), null);
    if(allowMissle){    
        g2d.drawImage(ms, m.getX(), m.getY(), null);
    }

    for(int i = 0; i < a.length; i++){
        if(allowAlien[i]){        
            g2d.drawImage(ali, ax[i], ay[i], null);

        }
    }

    if(firstDraw){
        timer.start();
    }

    firstDraw = false;
}

//THIS IS THE MOVEMENT PART

public void actionPerformed(ActionEvent e){

    while(ax[0] > 10){

        ax[0] += 10;
        repaint();
    }

}

//KEY LISTENER INTERFACE METHODS

public void keyReleased(KeyEvent e){

}
public void keyPressed(KeyEvent e){

    int key = e.getKeyCode();

    if (key == KeyEvent.VK_W) {

        if(p.getY() <= 5){

            allowUp = false;

        }else{

            allowUp = true;

        }

        if(allowUp){        
            p.move(0, -5);
            my = p.getY();

            repaint();
        }
    }else if (key == KeyEvent.VK_S) {

        if(p.getY() >= 410 - 5){

            allowDown = false;

        }else{

            allowDown = true;

        }
        if(allowDown){
            p.move(0, 5);
            my = p.getY();
            repaint();
        }
    }

}
public void keyTyped(KeyEvent e){

}
} 
```

提前致谢 ：）

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:58:12.440

因为你在那里没有停顿，这意味着一切都会立即发生，这将导致它崩溃。您还启动了一个计时器，但从未使用过它，您想通过此实现什么目标？

# jquery-validate - jQuery 验证无效处理程序

> ID：15989700
> 
> 赞同：-1
> 
> 时间：2013-04-13T15:52:35.177
> 
> 标签：jquery-validate

我正在为我的表单使用 jquery 验证，并且我设置了一个 invalidHandler，它在表单顶部显示错误并滚动到该消息。

当字段验证成功时，我试图隐藏该消息，但我在 validate() 选项中找不到任何对我有帮助的东西。

（**不是当用户单击提交时**。例如，如果我在表单上有一个文本框并单击提交，我会显示消息，当用户向文本框写入内容并通过验证时，我想隐藏消息而无需用户单击提交）

也许我可以计算成功错误的数量，但我不知道如何计算。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:33:40.447

如果你在表单顶部给你的错误一个 'foo' 的 id，

```
<div id="foo">error here</div> 
```

并设置**errorContainer**选项，然后当表单再次有效时，元素 #foo 将消失

```
$("#myform").validate(
 { 
  errorContainer: "#foo"
 }
}); 
```

注意元素#foo 必须在表单内

# python - 厄米矩阵的 logm 函数返回非厄米矩阵

> ID：15989701
> 
> 赞同：3
> 
> 时间：2013-04-13T15:52:38.520
> 
> 标签：python, numpy, scipy, linear-algebra

当我在 scipy 中使用线性代数模块来计算厄米矩阵的矩阵对数时**，**它输出的矩阵不是厄米矩阵。我首先使用以下方法定义一个向量：

```
n = np.random.uniform(size = 3) + 1j*np.random.uniform(size = 3) 
```

然后我定义了各自的厄米特矩阵：

```
N = np.outer(n,n.conj()) 
```

但是，`linalg.logm(N)`不返回**厄米矩阵**。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:27:53.690

随机矩阵的除一个特征值之外的所有特征值都为零。由于矩阵上的函数可以写成矩阵特征值上的函数，我明白为什么对数在那里有问题，因为 log(0) 没有定义。也许函数没有看到这个问题，只是返回垃圾。

我想您只需要确保您的随机 Hermitian 矩阵具有非零特征值。

# ruby-on-rails - 包含 javascript 的两步子文件夹

> ID：15989706
> 
> 赞同：-2
> 
> 时间：2013-04-13T15:53:35.540
> 
> 标签：ruby-on-rails, ruby, include-path

如何在 ruby​​ on rails 中包含深层文件夹。

norman 子文件夹 //= 需要子文件夹/文件名 如何制作

```
 --javascript
    -- subfolder
       --subfolder 
```

两步子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:48:09.650

就像你认为应该的那样

```
//= require subfolder/subfolder/filename 
```

# .net - 如何通过 VSTO 使用 Word Spell Checker？

> ID：15989708
> 
> 赞同：0
> 
> 时间：2013-04-13T15:53:51.853
> 
> 标签：.net, ms-word, vsto, spell-checking

目前我正在运行一个研究项目来处理英文文本。文本数据非常嘈杂，包含许多拼写和语法错误。

我知道 MS Word 可以在他们自己的 MS Word 应用程序中自动突出显示这些错误。

我的问题是，我可以以编程方式调用他们的拼写检查引擎（可能通过 VSTO），以获取任何给定文本字符串的错误和更正建议吗？不使用任何 MS Word GUI。

理想情况下，我要求功能：

> 列表<错误> RunSpellChecking（字符串文本）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:13:49.037

[这里](http://codeidol.com/community/dotnet/working-with-the-application-object/8645/)有一个示例代码

也检查这个 MSDN

[获取拼写建议](http://msdn.microsoft.com/en-gb/library/microsoft.office.interop.word._application.getspellingsuggestions.aspx)

[检查拼写](http://msdn.microsoft.com/en-gb/library/microsoft.office.tools.word.document.checkspelling%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:34:07.617

为什么词？你能使用像[http://nhunspell.sourceforge.net/这样的拼写库吗](http://nhunspell.sourceforge.net/)

# linux - 使用 VLC 从其他计算机上的 ffmpeg 接收 rtp (opus) 流

> ID：15989713
> 
> 赞同：2
> 
> 时间：2013-04-13T15:54:14.183
> 
> 标签：linux, windows, ffmpeg, vlc, rtp

我目前正在尝试使用 VLC 在单独的计算机上播放作品流。

目前设置如下：

Odroid-U2 运行 ffmpeg 以捕获音频并作为 rtp opus 流发送到远程计算机.... 使用的命令：ffmpeg -f alsa -ac 1 -i hw:0 -acodec libopus -ab 32k -ac 1 -f rtp rtp： //192.168.0.115:2032

远程计算机（在同一本地网络上）位于 192.168.0.115 Odroid 位于 192.168.0.124

如果我在 libopus 的地方使用 libmp3lame，那么流将毫无问题地通过，并且不会提示它需要 sdp....

远程计算机上的 VLC 输出：

```
SDP required: A description in SDP format is required to receive the RTP stream. Note that rtp:// URIs cannot work with dynamic RTP payload format (97). 
```

如果我使用放入 vlc 的 *.sdp 文件来播放流，它什么也不做（没有错误也没有播放）

使用的 SDP 文件：

```
 SDP:
    v=0
    o=- 0 0 IN IP4 127.0.0.1
    s=No Name
    c=IN IP4 192.168.0.115
    t=0 0
    a=tool:libavformat 55.2.100
    m=audio 2032 RTP/AVP 97
    b=AS:32
    a=rtpmap:97 opus/48000 
```

Odroid 上的 ffmpeg 输出：

```
 linaro@linaro-ubuntu-desktop:~$ ffmpeg -f alsa -ac 1 -i hw:0 -acodec libopus -ab 32k -ac 1         -f rtp rtp://192.168.0.115:2032
    ffmpeg version git-2013-04-13-87dd62e Copyright (c) 2000-2013 the FFmpeg developers
      built on Apr 13 2013 09:47:34 with gcc 4.6 (Ubuntu/Linaro 4.6.3-1ubuntu5)
      configuration: --enable-gpl --enable-libmp3lame --enable-libopencore-amrnb --enable-        libopencore-amrwb --enable-libspeex --enable-librtmp --enable-libtheora --enable-libvorbis         --enable-libvpx --enable-x11grab --enable-libx264 --enable-nonfree --enable-version3         --enable-libopus
      libavutil      52\. 26.100 / 52\. 26.100
      libavcodec     55\.  2.100 / 55\.  2.100
      libavformat    55\.  2.100 / 55\.  2.100
      libavdevice    55\.  0.100 / 55\.  0.100
      libavfilter     3\. 53.101 /  3\. 53.101
      libswscale      2\.  2.100 /  2\.  2.100
      libswresample   0\. 17.102 /  0\. 17.102
      libpostproc    52\.  3.100 / 52\.  3.100
    Guessed Channel Layout for  Input Stream #0.0 : mono
    Input #0, alsa, from 'hw:0':
      Duration: N/A, start: 1365868129.196234, bitrate: 768 kb/s
        Stream #0:0: Audio: pcm_s16le, 48000 Hz, mono, s16, 768 kb/s
    Output #0, rtp, to 'rtp://192.168.0.115:2032':
      Metadata:
        encoder         : Lavf55.2.100
        Stream #0:0: Audio: opus, 48000 Hz, mono, s16, 32 kb/s
    Stream mapping:
      Stream #0:0 -> #0:0 (pcm_s16le -> libopus)
    SDP:
    v=0
    o=- 0 0 IN IP4 127.0.0.1
    s=No Name
    c=IN IP4 192.168.0.115
    t=0 0
    a=tool:libavformat 55.2.100
    m=audio 2032 RTP/AVP 97
    b=AS:32
    a=rtpmap:97 opus/48000 
```

任何帮助是极大的赞赏....

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-27T12:02:55.627

只需删除“SDP：”行，以便您的 sdp 文件仅包含：

v=0
o=- 0 0 IN IP4 127.0.0.1
s=无名称
c=IN IP4 192.168.0.115
t=0 0
a=tool:libavformat 55.2.100
m=audio 2032 RTP/AVP 97
b=AS:32
a =rtpmap:97 作品/48000

# makefile - cppunit 的生成文件

> ID：15989714
> 
> 赞同：1
> 
> 时间：2013-04-13T15:54:38.927
> 
> 标签：makefile, cppunit

这是我的生成文件：

```
#Makefile
CC=g++
CFLAGS=-lcppunit
OBJS=Money.o MoneyTest.o

all : $(OBJS)
    $(CC) $(OBJS) -o TestUnitaire

#création des objets 
Money.o: Money.cpp Money.hpp
    $(CC) -c Money.cpp $(CFLAGS)

MoneyTest.o: MoneyTest.cpp Money.hpp MoneyTest.hpp
    $(CC) -c MoneyTest.cpp $(CFLAGS)

clean:
    rm *.o $(EXEC) 
```

当我运行这个makefile时，我得到了这样的错误：

> g++ Money.o MoneyTest.o -o TestUnitaire Money.o: 在函数`main': Money.cpp:(.text+0x3c): undefined reference to`CppUnit::TestFactoryRegistry::getRegistry(std::basic_string, std::allocator > const&)' Money.cpp:(.text+0x78): 未定义引用到`CppUnit::TextTestRunner::TextTestRunner(CppUnit::Outputter*)' Money.cpp:(.text+0x8c): undefined reference to`CppUnit::TestRunner::addTest(CppUnit::Test*)' Money.cpp:(.text+0x98): 未定义对`CppUnit::TextTestRunner::result() const' Money.cpp:(.text+0xec): undefined reference to`CppUnit::CompilerOutputter::CompilerOutputter(CppUnit::TestResultCollector*, std::basic_ostream >&的引用, std::basic_string, std::allocator > const&)' Money.cpp:(.text+0xfc): 未定义引用`CppUnit::TextTestRunner::setOutputter(CppUnit::Outputter*)' Money.cpp:(.text+0x168): undefined reference to`CppUnit::TextTestRunner::run(std::basic_string, std::allocator >, bool, bool , bool)' Money.cpp:(.text+0x1a5): 未定义对`CppUnit::TextTestRunner::~TextTestRunner()' Money.cpp:(.text+0x233): undefined reference to`CppUnit::TextTestRunner::~TextTestRunner() 的引用

我的班级之间似乎没有联系。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:10:42.340

该`-lcppunit`标志在 中不正确`CFLAGS`，这是您放置 C 编译器标志的位置。您正在 (a) 编译 C++ 程序，而不是 C 程序，并且 (b) 该`-l`标志是链接器标志，而不是编译器标志。此外，该`CC`变量包含 C 编译器。您应该将该`CXX`变量用于 C++ 编译器。您的 makefile 应该类似于：

```
#Makefile
CXX = g++
LDLIBS = -lcppunit
OBJS = Money.o MoneyTest.o

all : TestUnitaire

TestUnitaire: $(OBJS)
        $(CXX) $^ -o $@ $(LDFLAGS) $(LDLIBS)

#création des objets
%.o : %.cpp
        $(CXX) $(CPPFLAGS) $(CXXFLAGS) -o $@ -c $<

Money.o: Money.hpp
MoneyTest.o: Money.hpp MoneyTest.hpp

clean:
        rm *.o $(EXEC) 
```

# c# - Windows Forms C# - 动态掩码文本框金钱输入

> ID：15989717
> 
> 赞同：0
> 
> 时间：2013-04-13T15:55:45.600
> 
> 标签：c#, winforms, dynamic, mask, currency

Windows Forms C# - 我想制作一个文本框，每次用户键入或从文本框中删除一个键时自动更改。我开发了部分代码。

```
 //This will convert value from textbox to currency format when focus leave textbox
    private void txtValormetrocubico_Leave(object sender, EventArgs e)
    {
        decimal cubic = Convert.ToDecimal(txtValormetrocubico.Text);
        txtValormetrocubico.Text = string.Format("{0:c}", Convert.ToDecimal(cubic));
        MessageBox.Show(txtValormetrocubico.Text);
    }

    //this only allow numbers and "." and "," on textimbox imput
    private void txtValormetrocubico_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsControl(e.KeyChar)
    && !char.IsDigit(e.KeyChar)
    && e.KeyChar != '.' && e.KeyChar != ',')
        {
            e.Handled = true;
        }

        // only allow one decimal point
        if (e.KeyChar == '.'
            && (sender as TextBox).Text.IndexOf('.') > -1)
        {
            e.Handled = true;
        }

            if (e.KeyChar == ','
                && (sender as TextBox).Text.IndexOf(',') > -1)
            {
                e.Handled = true;
            }          
    } 
```

我第一次在文本框中输入一个值，该值完美地转换为货币格式，`300`比如`$ 300.00`. 但是我再次编辑此文本框值并按回车键，它给出了一个错误：“输入字符串格式不正确”指向下面的行：

```
decimal cubic = Convert.ToDecimal(txtValormetrocubico.Text); 
```

我认为问题是由于该值已经是十进制格式。因此，当我单击该字段并再次按 Enter 时，会导致错误，因为无法解析该值。如何避免此错误？

**编辑：** 我之前的问题是我的第一个问题。由于我是新用户并且对 C# 了解不多，所以我忘记发布我的代码。在研究了更多之后，我做了一部分工作。只剩下这个小问题了。请投票，我被禁止并且不能提出新问题，因为我有 7 票反对。

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T13:36:05.183

问题是字符串包含货币符号

```
private void TextBox_LeaveEvent(object sender, EventArgs e)
{
    var tb = sender as TextBox;
    if(tb.Text.Length>0){
        decimal cubic = Convert.ToDecimal(tb.Text);
        tb.Text = string.Format("{0:c}", Convert.ToDecimal(cubic));
        label1.Text = tb.Text;
    }
} 
```

上面的 textbox.Text 设置为包含货币信息：

```
tb.Text = string.Format("{0:c}", Convert.ToDecimal(cubic)); 
```

由于文本框现在包含货币符号（如 € 或 $）`Convert.ToDecimal`，因此 TextBox_LeaveEvent 再次触发时会失败：

```
decimal cubic = Convert.ToDecimal(tb.Text); 
```

如果你喜欢[c# 屏蔽文本框](http://www.bing.com/search?setmkt=en-EN&q=c#%20masked%20textbox%20example)，你可以找到关于屏蔽文本框的[文章](http://www.codeproject.com/Articles/1534/Masked-C-TextBox-Control)。您还可以测试字符串是否包含任何非数字字符 ( `if(tbText.IndexOf(" ") >-1){...}`)

## 更新基本示例

我上传了一个[非常基本的示例来删除货币格式](https://github.com/surfmuggle/StackoverflowWinformQuestions/blob/master/TextBoxMaskInput/TextBoxMaskedInput.cs)到 github：

```
string RemoveCurrencyFormating(string input)
{    
    if(input.IndexOf(" ") !=-1){
       var money = input.Substring(0, input.IndexOf(" ")-1);            
       return String.Format("{0:D0}", money);               
    }
    return ""; // Todo: add Error Handling
} 
```

在 TextBox Enter Event 上，您可以执行以下操作：

```
void TextBox_EnterEvent(object sender, EventArgs e)
{
    var tb = sender as TextBox;
    tb.Text = RemoveCurrencyFormating(tb.Text);
} 
```

# node.js - socket.io - xhr-polling 自动断开连接

> ID：15989718
> 
> 赞同：3
> 
> 时间：2013-04-13T15:56:05.253
> 
> 标签：node.js, websocket, socket.io

我使用 socket.io 和 xhr-polling 传输制作了简单的应用程序。
我发现服务器在我保持连接几秒钟后断开了我的连接。

此问题仅发生在 xhr-polling 传输中。
我该如何解决？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T21:51:15.037

来自：[https ://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

> **服务器选项**
> 
> **轮询持续时间**：默认为 20 秒
> 
> 一次 HTTP 轮询的最大持续时间，如果超过此限制，它将被关闭。

# javascript - 数组中的填充

> ID：15989722
> 
> 赞同：0
> 
> 时间：2013-04-13T15:56:30.843
> 
> 标签：javascript, arrays, multidimensional-array

我正在尝试生成 3 个随机字符的 10 项数组。我怎么会在这个数组中得到额外的填充？（[“undefineddhe”、“undefinedjih”、“undefinedeih”、“undefinedfjj”、“undefinedhdb”、“undefinedidc”、“undefinedhbk”、“undefinedggd”、“undefinedfeg”、“undefinedcgk”]）

```
var arr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
(function rand(alpha){
   var sequence = [];
   for(var i = 0; i < 10; i++){(function(i){
       for(var j = 0; j < 3; j++){(function(j){
         sequence[i] += alpha[Math.floor(Math.random()*10)+1];
       })(j)}
   })(i)}
return sequence;
})(arr); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:02:27.203

因为你在说`sequence[i] += ...`。

默认情况下`sequence[i]`是`undefined`.

```
var a;
a += "hello";
console.log(a); // "undefinedhello"

var b = "";
b += "hello";
console.log(b); // "hello" 
```

你可以解决这个问题：

```
var arr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
(function rand(alpha){
   var sequence = [];
   for(var i = 0; i < 10; i++){(function(i){
       sequence[i] = "";
       for(var j = 0; j < 3; j++){(function(j){
         sequence[i] += alpha[Math.floor(Math.random()*10)+1];
       })(j)}
   })(i)}
return sequence;
})(arr); 
```

* * *

顺便提一句。您不需要所有的闭包，因为您的脚本正在运行同步：

```
 var arr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
(function rand(alpha) {
   var sequence = [];
   for(var i = 0; i < 10; i++){
       sequence[i] = "";
       for(var j = 0; j < 3; j++){
         sequence[i] += alpha[Math.floor(Math.random()*10)+1];
       }
   }
   return sequence;
})(arr); 
```

或者我想我更愿意做一个命名函数：

```
var arr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];

var a = sequence(arr);

function sequence(alpha) {
   var sequence = [];
   for(var i = 0; i < 10; i++){
       sequence[i] = "";
       for(var j = 0; j < 3; j++){
         sequence[i] += alpha[Math.floor(Math.random()*10)+1];
       }
   }
   return sequence;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:02:02.170

你没有得到“额外的填充”，JS 转换`undefined`为字符串，因为`sequence[i]`不存在。所以你在`'undefined'`字符串中附加了一个随机的 3 个字母的单词。

只需`sequence[i] = '';`在第一个循环中添加，如下所示：

```
var arr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
(function rand(alpha){
   var sequence = [];
   for(var i = 0; i < 10; i++){(function(i){
       sequence[i] = '';
       for(var j = 0; j < 3; j++){(function(j){
         sequence[i] += alpha[Math.floor(Math.random()*10)+1];
       })(j)}
   })(i)}
return sequence;
})(arr); 
```

# arrays - cv.Save 和 cv.Load（数组）

> ID：15989725
> 
> 赞同：2
> 
> 时间：2013-04-13T15:56:39.260
> 
> 标签：arrays, opencv, load, save

我需要保存和加载一个数组，但我收到了这个错误：

```
 cv.Save('i.xml',i)
 TypeError: Cannot identify type of 'structPtr' 
```

这是代码：

```
import cv
i = [[1,2],[3,4],[5,6],[7,8]]
cv.Save('i.xml',i) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-06-11T15:03:55.257

这是因为*cv.Save*需要接收要作为 OpenCV 对象存储在文件中的对象。例如，以下是一个使用*cv.Save*将 numpy 数组保存在文件中的最小可行示例：

```
import cv2
import numpy as np

i = np.eye(3)
cv2.cv.Save('i.xml', cv2.cv.fromarray(i)) 
```

正如您[在此处](http://answers.opencv.org/question/31207/how-do-i-load-an-opencv-generated-yaml-file-in-python/)看到的，在阅读后，数组也应从 OpenCV 转换回 numpy。

问候。

# wordpress - 如何修改带有子主题的 WordPress 主题类？

> ID：15989730
> 
> 赞同：2
> 
> 时间：2013-04-13T15:57:02.840
> 
> 标签：wordpress, wordpress-theming

我正在使用一个名为“views base”的主题。文档在这里：[http ://wp-types.com/documentation/views-inside/views-base-theme/views-base-customization/](http://wp-types.com/documentation/views-inside/views-base-theme/views-base-customization/)

我创建了一个子主题，并试图弄清楚如何向主题添加新的小部件区域。

父主题的functions.php文件有这一行：require_once('class_base_theme.php');

该文件包含一个名为“class_base_theme”的类，该类具有 $sidebar_array 属性，其中包含所有小部件区域的数组。

只需将它添加到 $sidebar_array 属性，我就可以轻松地在这个父类中添加一个新区域。但是我不知道如何在子主题中扩展和修改这个类。我不能在我的子主题的 functions.php 文件中执行此操作，因为它是在父主题的 functions.php 文件之前调用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-10T19:48:07.527

实际上，这取决于父主题。如果父`(!class_exists('class_name'))`级在加载类之前使用 if ，那么它会起作用，但如果不是，你会在尝试重新声明类时遇到错误。我建议延长课程。在你的主题中创建一个新的 php 文件，需要它，然后像这样扩展父类`Child_Class extends Parent_Class {}`

现在，在您的新类中`Child_Class`，您应该能够访问 $sidebar_array 并使用它做任何您想做的事情，以及在需要时使用父类的函数。

# c++ - Qt4 应用程序图标未出现在 Windows 任务栏上

> ID：15989732
> 
> 赞同：2
> 
> 时间：2013-04-13T15:57:16.333
> 
> 标签：c++, qt, qt4, cmake

我的 Qt4 应用程序在启动时不会在 Windows 7 和 Windows XP 的任务栏上显示为图标。我怎样才能让它出现？

当我最小化我的应用程序时，它会在左下角变成一个小的无窗口标题栏。

顺便说一句，我在我的 CMakeLists.txt 中执行以下操作，以防止控制台窗口与我的应用程序一起标记：

```
if(WIN32)
  add_executable( codequery WIN32 ${CODEQUERY_SRCS} ${CODEQUERY_MOC_SRCS} ${CODEQUERY_RC_SRCS} ${CODEQUERY_UI_HDRS} ${QM} )
else()
  add_executable( codequery ${CODEQUERY_SRCS} ${CODEQUERY_MOC_SRCS} ${CODEQUERY_RC_SRCS} ${CODEQUERY_UI_HDRS} ${QM} )
endif() 
```

这是我的主要功能：

```
#include "mainwindow.h"

int main(int argc, char *argv[])
{
QApplication app(argc, argv);
QMainWindow *wndw = new QMainWindow;
mainwindow mw(wndw, &app);

mw.show();
return app.exec();
} 
```

这是主窗口声明的一部分：

```
namespace Ui {
     class MainWindow;
 }

class mainwindow : public QMainWindow
{
  Q_OBJECT

public:
Ui::MainWindow *ui;
mainwindow(QMainWindow *parent = NULL, QApplication *app = NULL);
virtual ~mainwindow(); 
```

这是它的构造函数的一部分：

```
#include "mainwindow.h"
#include "ui_mainWindow.h"

mainwindow::mainwindow(QMainWindow *parent, QApplication *app)
:QMainWindow(parent)
,m_app(app)
,ui(new Ui::MainWindow)
 {
     ui->setupUi(this);
 } 
```

GUI 部分是使用 Qt Designer 设计的，生成为 ui_mainWindow.h。

setupUi 函数的一部分：

```
void setupUi(QMainWindow *MainWindow)
{
    if (MainWindow->objectName().isEmpty())
        MainWindow->setObjectName(QString::fromUtf8("MainWindow"));
    MainWindow->resize(629, 600);
    QIcon icon;
    icon.addFile(QString::fromUtf8(":/mainwindow/images/logo.png"), QSize(), QIcon::Normal, QIcon::Off);
    MainWindow->setWindowIcon(icon); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:27:35.200

我找到了！必须添加 WS_EX_APPWINDOW。

```
#ifdef _WIN32
#include <windows.h>
#endif

#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QMainWindow *wndw = new QMainWindow;
    mainwindow mw(wndw, &app);

    mw.show();

#ifdef _WIN32
    ShowWindow(mw.winId(), SW_HIDE);
    SetWindowLongPtr(mw.winId(), GWL_EXSTYLE, 
                GetWindowLongPtr(mw.winId(), GWL_EXSTYLE) | WS_EX_APPWINDOW);
    ShowWindow(mw.winId(), SW_SHOW);
#endif

    return app.exec();
} 
```

# php - 在数据库中保存会话

> ID：15989734
> 
> 赞同：0
> 
> 时间：2013-04-13T15:57:29.193
> 
> 标签：php, database, codeigniter, session

在 LAMP 环境中，我多次听说最好将会话保存到数据库安全方面（在 Codeigniter 教程中看到）。关于为什么这是真的有什么想法吗？服务器应用程序将其保存到文件中（如果我没记错的话，这是 php 默认执行的操作）或 db 之间有什么区别？我知道涉及数据库可能会增加另一层保护，因为它受密码保护，是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:06:54.357

如果有人能够在您的服务器上观看会话文件，那么安全性已经以致命的方式被破坏。攻击者也很容易获取数据库密码。

事实上，我看到了将会话保存到数据库的最大优势，这有利于应用程序的可伸缩性。如果您曾经使用负载均衡器，那么均衡器将不必担心哪个请求已传递到哪个服务器。任何服务器都可以使用，因为服务器都可以**访问**存储在单独的数据库主机或集群上的会话数据。

# php - 我的网站需要 10 分钟才能加载

> ID：15989735
> 
> 赞同：0
> 
> 时间：2013-04-13T15:57:35.600
> 
> 标签：php, mysql

我的网站需要很长时间才能加载并出现以下错误：

```
Warning: mysql_connect(): MySQL server has gone away in C:\xampp\htdocs\test\inc\scripts\mysql_connect.inc.php on line 9

Warning: mysql_connect(): Error while reading greeting packet. PID=2256 in C:\xampp\htdocs\test\inc\scripts\mysql_connect.inc.php on line 9

Warning: mysql_connect(): MySQL server has gone away in C:\xampp\htdocs\test\inc\scripts\mysql_connect.inc.php on line 9

Fatal error: Maximum execution time of 30 seconds exceeded in C:\xampp\htdocs\test\inc\scripts\mysql_connect.inc.php on line 9 
```

**我正在使用的代码：**

```
<?php
$conn_error = 'Colud not connect.';

$mysql_host = "localhost:8080";
$mysql_user = "Harry";
$mysql_pass = "";

$mysql_db = 'testsite' ;
mysql_connect($mysql_host, $mysql_user, $mysql_pass) or die("Couldn't Connect") ;
mysql_select_db($mysql_db) or die($conn_error);

echo 'Connected!' ;

?> 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:00:44.667

只是意味着您的网站无法访问 MySQL 服务器。也许它没有启动，或者如果它没有正常工作或无法访问。

文档：[http ://dev.mysql.com/doc/refman/5.0/en/gone-away.html](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)

# android - Android 切换微调器

> ID：15989736
> 
> 赞同：0
> 
> 时间：2013-04-13T15:57:37.023
> 
> 标签：android, android-widget, toggle

我想以微调器（或老虎机）的形式实现一个切换按钮。基本上，它将由一个带有 OFF 文本的大矩形组成，当用户单击它时，ON 字样会动画到矩形上而不是关闭。有没有一种简单的方法可以做到这一点，或者你知道可以做到这一点的小部件吗？

**到目前为止我做了什么**

我有两张图片，每一张都代表切换按钮可以处于的状态（即打开和关闭）。然后我创建了一个可绘制的 XML 文件：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/on" android:state_checked="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/on" android:state_checked="true" android:state_focused="false"/>
    <item android:drawable="@drawable/off" android:state_checked="false" android:state_pressed="true"/>
    <item android:drawable="@drawable/off" android:state_checked="false" android:state_focused="false"/>

</selector> 
```

然后我将背景设置为`ToggleButton`XML 可绘制对象：

```
<ToggleButton
    android:id="@+id/toggleButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:background="@drawable/btntoggle_selector"
    android:textColor="@android:color/white"
    android:textOff="OFF"
    android:textOn="ON " /> 
```

![在此处输入图像描述](https://i.stack.imgur.com/cn0W4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:24:16.003

如果要以编程方式更改按钮的状态，则需要使用`setChecked`切换按钮上的方法

```
// Declare button
private ToggleButton myButton;
...   
// Initialise button
myButton = (ToggleButton) findViewById(R.id.myButton);
...
// Sets button text as "OFF" and "ON"
myButton.setText("OFF");
myButton.setText("ON");
myButton.setChecked(false);
...
// Set an on click listener
myButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick() {
        myButton.setChecked(true);

        // CALL WHATEVER METHOD IS SUPPOSED TO BE CALLED WHEN BUTTON IS PRESSED

    }
}); 
```

# php - 如果mysql中的任何一个字段为空，则计算行数

> ID：15989737
> 
> 赞同：0
> 
> 时间：2013-04-13T15:57:39.303
> 
> 标签：php, mysql

嗨，我的表中有几列，如果任何一列为空，则应计为 1...同时如果同一行中有 2 列或更多列为空...它不应计为 2...帮助我的mysql查询.....

```
<?php
include("connect.php");
$unit=$_GET['unit'];
$chapter=$_GET['chapter'];
//$dept=$_GET['dept'];
$result=mysql_query("select * from `$unit` where stopic='$chapter'");
if(mysql_num_rows($result)>0)
{
    while($row=mysql_fetch_array($result))
    {
        $a=$row['ch1'];
        $b=$row['ch2'];
        $c=$row['ch3'];
        $d=$row['ch4'];
        $e=$row['ans'];
        $f=$row['ques'];
    }
}
else
{
    echo "";
}
?> 
```

如果 $a 或 $b 或 $c 或 $d 或 $e 或 $f 为空...它应计为 1...每行仅一次..同一行不计为 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:07:07.157

我真的不明白你的问题。也许这会有所帮助 - 您可以使用该`isempty()`函数，如果您的变量为空，它将返回 true。

创建一个名为空的变量并将其值设为 0。然后在你的 for 循环中添加：

```
if(isempty($a)||isempty($b)||isempty($c)||isempty($d)||isempty($e)||isempty($f))
   $empty++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:07:22.563

试试这个简单的代码

```
<?php
include("connect.php");
$unit=$_GET['unit'];
$chapter=$_GET['chapter'];
//$dept=$_GET['dept'];
$result=mysql_query("select * from `$unit` where stopic='$chapter'");
$empty_record = 0;
if(mysql_num_rows($result)>0)
{
    while($row=mysql_fetch_array($result))
    {
        $a=$row['ch1'];
        $b=$row['ch2'];
        $c=$row['ch3'];
        $d=$row['ch4'];
        $e=$row['ans'];
        $f=$row['ques'];

        if($a=='' || $b=='' || $c=='' || $d=='' || $e=='' || $f=='')
        {
            $empty_record++;
        }
    }
}
else
{
    echo "";
}
echo $empty_record;

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:09:05.930

我会尝试这样的事情：

```
<?php
include("connect.php");
$unit=$_GET['unit'];
$chapter=$_GET['chapter'];
//$dept=$_GET['dept'];
$result=mysql_query("select * from `$unit` where stopic='$chapter'");
if(mysql_num_rows($result)>0)
{
    $numOfEmpty = 0;
    while($row=mysql_fetch_row($result))
    {
        for($i = 0;$i<count($result);$i++) {
             if ($result[$i] == "") { 
                $numOfEmpty++;
                break;
             }
        }
    }
    echo $numOfEmpty;
}
else
{
    echo "";
}
?> 
```

但是，如果代码有效，请告诉我。:)

# c++ - 我可以重写这个 boost 进程间类型定义集并避免 vc 2008 中的名称长度超出警告吗？

> ID：15989739
> 
> 赞同：0
> 
> 时间：2013-04-13T15:57:49.917
> 
> 标签：c++, boost, boost-interprocess, name-mangling

这个关于名称长度的警告是否总是无害的？如果没有，我怎么知道我是否有麻烦？

C++ 类型管理中的一件可爱的事情[是超过名称长度时。](https://stackoverflow.com/questions/13311339/expression-template-decorated-name-length-exceeded) 链接的问题显示了如何将其关闭。我正在使用带有 Boost 1.53 的 Visual C++ 2008。

然而，由于这是我第一次遇到这种模板化和 typedef 类型名称限制，而且我使用的是 Visual C++ 2008，我想确保我没有犯错或做一些可以避免的事情。

这是我的类型定义：

// 值类型的 std::pair 的后半部分是一个结构体：

```
typedef struct _DATA_AREA_DESC
{ 
    // stuff in here doesn't matter, omitted.

} AreaMappedType; 
```

// 地图的键是一个字符串。需要定义类型及其分配器。std::string 不适用于此编译器+标准库实现 (VC++2008)

```
typedef boost::interprocess::allocator<char, boost::interprocess::managed_shared_memory::segment_manager> CharAllocator; 
typedef boost::interprocess::basic_string<char, std::char_traits<char>, CharAllocator> AreaKeyType;   

// AreaMap is a map<AreaKeyType,AreaMappedType>

typedef std::pair<const AreaKeyType, AreaMappedType> AreaValueType;

typedef boost::interprocess::allocator<AreaValueType, boost::interprocess::managed_shared_memory::segment_manager> AreaShmemAllocator;

typedef boost::interprocess::map<AreaKeyType, AreaMappedType, std::less<AreaKeyType>, AreaShmemAllocator> AreaMap; 
```

一段长得令人作呕、难以阅读的警告详细信息：

```
1>c:\program files (x86)\microsoft visual studio 9.0\vc\include\utility(48) : warning C4503: 'std::pair<_Ty1,_Ty2>::pair' : decorated name length exceeded, name was truncated
1>        with
1>        [
1>            _Ty1=boost::intrusive::tree_iterator<boost::intrusive::rbtree_impl<boost::intrusive::setopt<boost::intrusive::detail::base_hook_traits<boost::container::container_detail::rbtree_node<std::pair<const AreaKeyType,AreaMappedType>,boost::interprocess::offset_ptr<void>>,boost::intrusive::rbtree_node_traits<boost::interprocess::offset_ptr<void>,true>,normal_link,boost::intrusive::default_tag,3>,boost::container::container_detail::node_compare<boost::container::container_detail::tree_value_compare<AreaKeyType,std::pair<const AreaKeyType,AreaMappedType>,std::less<AreaKeyType>,boost::container::container_detail::select1st<std::pair<const AreaKeyType,AreaMappedType>>>,boost::container::container_detail::rbtree_node<std::pair<const AreaKeyType,AreaMappedType>,boost::interprocess::offset_ptr<void>>>,unsigned int,true>>,false>,
1>            _Ty2=bool
1>        ]
1>        c:\dev\boost\boost_1_53_0\boost\container\detail\tree.hpp(750) : see reference to class template instantiation 'std::pair<_Ty1,_Ty2>' being compiled
1>        with
1>        [
1>            _Ty1=boost::intrusive::tree_iterator<boost::intrusive::rbtree_impl<boost::intrusive::setopt<boost::intrusive::detail::base_hook_traits<boost::container::container_detail::rbtree_node<std::pair<const AreaKeyType,AreaMappedType>,boost::interprocess::offset_ptr<void>>,boost::intrusive::rbtree_node_traits<boost::interprocess::offset_ptr<void>,true>,normal_link,boost::intrusive::default_tag,3>,boost::container::container_detail::node_compare<boost::container::container_detail::tree_value_compare<AreaKeyType,std::pair<const AreaKeyType,AreaMappedType>,std::less<AreaKeyType>,boost::container::container_detail::select1st<std::pair<const AreaKeyType,AreaMappedType>>>,boost::container::container_detail::rbtree_node<std::pair<const AreaKeyType,AreaMappedType>,boost::interprocess::offset_ptr<void>>>,unsigned int,true>>,false>,
1>            _Ty2=bool
1>        ]
1>        c:\dev\boost\boost_1_53_0\boost\container\detail\tree.hpp(749) : while compiling class template member function 'std::pair<_Ty1,_Ty2> boost::container::container_detail::rbtree<Key,Value,KeyOfValue,KeyCompare,A>::insert_unique_check(const boost::container::basic_string<CharT,Traits,Allocator> &,boost::intrusive::detail::tree_algorithms<NodeTraits>::insert_commit_data &)'
1>        with
1>        [
1>            _Ty1=boost::container::container_detail::rbtree<AreaKeyType,std::pair<const AreaKeyType,AreaMappedType>,boost::container::container_detail::select1st<std::pair<const AreaKeyType,AreaMappedType>>,std::less<AreaKeyType>,AreaShmemAllocator>::iterator,
1>            _Ty2=bool,
1>            Key=AreaKeyType,
1>            Value=std::pair<const AreaKeyType,AreaMappedType>,
1>            KeyOfValue=boost::container::container_detail::select1st<std::pair<const AreaKeyType,AreaMappedType>>,
1>            KeyCompare=std::less<AreaKeyType>,
1>            A=AreaShmemAllocator,
1>            CharT=char,
1>            Traits=std::char_traits<char>,
1>            Allocator=CharAllocator,
1>            NodeTraits=boost::intrusive::rbtree_node_traits<boost::interprocess::offset_ptr<void>,true>
1>        ]
1>        c:\dev\boost\boost_1_53_0\boost\container\map.hpp(82) : see reference to class template instantiation 'boost::container::container_detail::rbtree<Key,Value,KeyOfValue,KeyCompare,A>' being compiled
1>        with
1>        [
1>            Key=AreaKeyType,
1>            Value=std::pair<const AreaKeyType,AreaMappedType>,
1>            KeyOfValue=boost::container::container_detail::select1st<std::pair<const AreaKeyType,AreaMappedType>>,
1>            KeyCompare=std::less<AreaKeyType>,
1>            A=AreaShmemAllocator
1>        ]
1>        c:\dev\boost\boost_1_53_0\boost\type_traits\is_abstract.hpp(72) : see reference to class template instantiation 'boost::container::map<Key,T,Compare,Allocator>' being compiled
1>        with
1>        [
1>            Key=AreaKeyType,
1>            T=AreaMappedType,
1>            Compare=std::less<AreaKeyType>,
1>            Allocator=AreaShmemAllocator
1>        ]
1>        c:\dev\boost\boost_1_53_0\boost\type_traits\is_abstract.hpp(144) : see reference to class template instantiation 'boost::detail::is_abstract_imp<T>' being compiled
1>        with
1>        [
1>            T=AreaMap
1>        ]
1>        c:\dev\boost\boost_1_53_0\boost\mpl\aux_\preprocessed\plain\or.hpp(51) : see reference to class template instantiation 'boost::is_abstract<T>' being compiled
1>        with
1>        [
1>            T=AreaMap
1>        ]
1>        c:\dev\boost\boost_1_53_0\boost\mpl\if.hpp(63) : see reference to class template instantiation 'boost::mpl::or_<T1,T2>' being compiled
1>        with
1>        [
1>            T1=boost::is_abstract<AreaMap>,
1>            T2=boost::is_array<AreaMap>
1>        ]
1>        c:\dev\boost\boost_1_53_0\boost\foreach.hpp(489) : see reference to class template instantiation 'boost::mpl::if_<T1,T2,T3>' being compiled
1>        with
1>        [
1>            T1=boost::mpl::or_<boost::is_abstract<AreaMap>,boost::is_array<AreaMap>>,
1>            T2=boost::foreach_detail_::rvalue_probe<AreaMap>::private_type_,
1>            T3=AreaMap
1>        ]
1>        c:\dev\dnp3_driver_2008r2\osdk\libraries\memory20\ed3drvmemory.cpp(229) : see reference to class template instantiation 'boost::foreach_detail_::rvalue_probe<T>' being compiled
1>        with
1>        [
1>            T=AreaMap
1>        ]
1>c:\program files (x86)\microsoft visual studio 9.0\vc\include\utility(48) : warning C4503: 'std::pair<_Ty1,_Ty2>::pair' : decorated name length exceeded, name was truncated
1>        with
1>        [
1> 
```

这可以解决吗？我犯了菜鸟的错误吗？

# c++ - 在 unsigned int var 中获取负值

> ID：15989744
> 
> 赞同：0
> 
> 时间：2013-04-13T15:58:15.007
> 
> 标签：c++, visual-studio-2010

使用 VS2010 编译这些行

```
unsigned final_value;
long    int offset=109572;
long    lSize=2;                            //2 Bytes
char    *buffer;
buffer = (char*) malloc (sizeof(char)*lSize);
mybinfile = fopen("binfile.bin","rb");
fseek(mybinfile,offset,SEEK_SET);
fread(buffer,lSize,1,mybinfile);
fclose(mybinfile);
sscanf(buffer,"%u",&final_value); 
```

运行此代码，final_value 返回一个负值。（从控制台使用 NMAKE 编译的相同代码返回正确的正值。）我该如何解决这个问题？这可能是由于一次溢出可能是由于我的 vs2010 设置不正确

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:02:41.833

`scanf`用于读取 TEXT （字符串），您正在获取两个字节并将其传递给`scanf()`- 除非您的两个字节恰好是两位数（值中为 0x30-0x39），并且之后的下一个字节是零，它肯定不会你所期望的。

目前尚不清楚你希望你的两个字节代表什么，但我很确定你在做什么是“错误的”。

至于值为负，你是如何打印的？

# servlets - 需要建议吗？选择 Servlet 还是 Spring MVC？

> ID：15989745
> 
> 赞同：1
> 
> 时间：2013-04-13T15:58:19.570
> 
> 标签：servlets

我有一个想要开发的应用程序。我将应用程序定位为庞大的用户群，将其视为社交应用程序。但我不确定是用 Servlets 还是 Spring MVC 编写它。我对 Servlets 有很好的掌握，对我来说开发起来很容易，但是说到 Spring，我还是新手。我不清楚如果应用程序是在 Servlets 而不是 Spring MVC 上开发的，会有什么不同。可扩展性或类似的一些因素？

任何意见，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:09:02.937

使用 Spring 框架总是好的，因为它提供：

*   依赖注入支持
*   Spring MVC：易于定制
*   数据访问支持
*   春季安全
*   AOP 支持等。

显然，Spring 提供了比 servlet 更多的功能。但是如果你的应用程序足够简单，你可以选择 Servlets。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T01:07:04.467

学习 Spring 可能需要一些时间，但是……一旦学习，它将提供强大的编码工具。

# c++ - 优化数组元素的计算和设置

> ID：15989749
> 
> 赞同：1
> 
> 时间：2013-04-13T15:58:54.513
> 
> 标签：c++, performance, cocos2d-x

有一个实例化对象的二维数组，11 X 11 个字段。

可以将一个或两个字段设置为主要字段，这意味着该字段符合 A 值。初级场成为相对坐标系的中心，其中其附近的邻居（X 和 Y 上的 +/-1）符合 B 值，其他四个级别的邻居符合 C 值。其余字段（此 11 行/列示例中没有字段）符合 D - 默认值。-1 的索引实际上是索引 11，因此索引 0 是索引 12。

如果数组中有两个主要字段，则设置较高的排名值。

问题：在 C++ 中计算实例化对象的值并为其设置功率的最佳方法可能是什么？

*   @rhalbersma 提供的第一个示例，已更改为适合条件

PrimaryFieldsNet.h

```
#ifndef PRIMARYFIELDSNET_H
#define PRIMARYFIELDSNET_H

#define ABS(X) ((X) > 0 ? (X) : (-(X)))
#include <iostream>

using namespace std;

typedef pair<int, int> Point;

class PrimaryFieldsNet
{
    private:
        int m_rows;
        int m_grid[11][11];
        PrimaryFieldsNet() { }
        int distance_x(Point const& a, Point const& b);
        int distance_y(Point const& a, Point const& b);
        int delta_x(Point const& a, Point const& b);
        int delta_y(Point const& a, Point const& b);
        int calculate(Point const& a, Point const& b);
        void update_grid(Point const& pry_p1);
        void update_grid(Point const& pry_p1, Point const& pry_p2);

    public:
        PrimaryFieldsNet(int rows);
        void setup();
        void setup(Point const& pry_p1);
        void setup(Point const& pry_p1, Point const& pry_p2);
        int* grid();
};

#endif 
```

PrimaryFieldsNet.cpp

```
#include "PrimaryFieldsNet.h"

PrimaryFieldsNet::PrimaryFieldsNet(int rows)
{
    m_rows = rows;
}

int* PrimaryFieldsNet::grid()
{
    //cout << m_grid << endl;
    return *m_grid;
}

int PrimaryFieldsNet::distance_x(Point const& a, Point const& b)
{
    return a.first - b.first;
}

int PrimaryFieldsNet::distance_y(Point const& a, Point const& b)
{
    return a.second - b.second;
}

int PrimaryFieldsNet::delta_x(Point const& a, Point const& b)
{
    int d_x;

    d_x = distance_x(a, b);

    if (d_x < -(m_rows-1)/2)
        d_x = a.first + m_rows - b.first;
    else if (d_x > (m_rows-1)/2)
        d_x = ABS(a.first - m_rows - b.first);
    else
        d_x = ABS(d_x);

    return d_x;
}

int PrimaryFieldsNet::delta_y(Point const& a, Point const& b)
{
    int d_y;

    d_y = distance_y(a, b);

    if (d_y < -(m_rows-1)/2)
        d_y = a.second + m_rows - b.second;
    else if (d_y > (m_rows-1)/2)
        d_y = ABS(a.second - m_rows - b.second);
    else
        d_y = ABS(d_y);

    return d_y;
}

int PrimaryFieldsNet::calculate(Point const& a, Point const& b)
{
    int dmax, result;

    dmax = max(delta_x(a, b), delta_y(a, b));

    if (dmax < 2)
        result = dmax;
    else if (dmax < (m_rows+1)/2)
        result = 2;
    else
        result = 3;

    return result;
}

void PrimaryFieldsNet::update_grid(Point const& pry_p1)
{
    for (int x = 0; x < m_rows; ++x)
        for (int y = 0; y < m_rows; ++y)
            m_grid[x][y] = calculate(Point(x,y), pry_p1);
}

void PrimaryFieldsNet::update_grid(Point const& pry_p1, Point const& pry_p2)
{
    for (int x = 0; x < m_rows; ++x)
        for (int y = 0; y < m_rows; ++y)
            m_grid[x][y] = min(calculate(Point(x,y), pry_p1), calculate(Point(x,y), pry_p2));
}

void PrimaryFieldsNet::setup()
{
    Point pry_p1((m_rows-1)/2,(m_rows-1)/2);
    update_grid(pry_p1);
}

void PrimaryFieldsNet::setup(Point const& pry_p1)
{
    update_grid(pry_p1);
}

void PrimaryFieldsNet::setup(Point const& pry_p1, Point const& pry_p2)
{
    update_grid(pry_p1, pry_p2);
} 
```

主文件

```
#include <iostream>
#include "PrimaryFieldsNet.h"

using namespace std;

int main()
{
    int* grid;

    PrimaryFieldsNet pfnet(11);
    //pfnet.setup(Point(5,2));
    pfnet.setup(Point(10,6), Point(2,2));
    grid = pfnet.grid();

    for (int x = 0; x < 11; ++x) {
        for (int y = 0; y < 11; ++y)
            cout << *(grid + x*11 + y) << " ";
        cout << "\n";
        }

    return 0;
} 
```

样本输出将是：

```
2 2 2 2 2 1 1 1 2 2 2 
2 1 1 1 2 2 2 2 2 2 2 
2 1 0 1 2 2 2 2 2 2 2 
2 1 1 1 2 2 2 2 2 2 2 
2 2 2 2 2 2 2 2 2 2 2 
2 2 2 2 2 2 2 2 2 2 2 
2 2 2 2 2 2 2 2 2 2 2 
2 2 2 2 2 2 2 2 2 2 2 
2 2 2 2 2 2 2 2 2 2 2 
2 2 2 2 2 1 1 1 2 2 2 
2 2 2 2 2 1 0 1 2 2 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:42:04.457

您的问题本质上与 C++ 无关。看来您只需要遍历整个数组（使用双重嵌套循环，第一行，然后是列），并根据到 A 值字段的距离确定值。例如

```
SomeValueType values[4] = { A, B, C, D };

typedef std::pair<int, int> Point;
Point grid[12][12];
// allocate memory for grid  

int distance(Point const& a, Point const& b)
{
    int delta.x = a.first - b.first;
    int delta.y = a.second - b.second;
    return std::max(std::abs(delta.x), std::abs(delta.y));
}

Point center(0,0);

for (int x = 0; x < 12; ++x)
    for (int y = 0; y < 12; ++y)              
        grid[x][y] = values[dist(Point(x,y), center)]; 
```

# iphone - 添加第三个 UICollectionView 后 UIScrollView 明显的滚动滞后

> ID：15989751
> 
> 赞同：1
> 
> 时间：2013-04-13T15:59:01.153
> 
> 标签：iphone, uiview, uiscrollview, uicollectionview, lag

我在 UIScrollView 中添加了第三个集合视图，这似乎产生了一些明显的滚动延迟。

视图层次结构如下（因为我还不能上传图片）：

```
UIView
-->UIScrollView (large content size 230, 1100)
---->UIView for content
------>UIImageView (background image)
------>UIScrollView
------>UIView
------>PageControl
------>UICollectionView
------>UICollectionView
------>UICollectionView
------>Six labels 
```

实际 UICollectionView 的滚动水平非常好，只是主 UIScrollView 在上下滚动时略有滞后。

在添加第三个 UICollectionView 之前没有任何延迟，它使用不同的类作为它的单元格。

当所有三个集合视图同时出现在屏幕上时，似乎只有延迟。

唯一实现的委托方法是scrollViewDidScroll，并且只是调整其中一个子视图的大小，所以我认为这根本不会影响它。

仅仅是因为它不能同时处理屏幕上的三个 UICollectionView 吗？我原以为它可以轻松应对。我可以做任何明显的优化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:11:04.700

经过大头疼和相当长的时间后，我已经找到了这个问题。它与集合视图无关，它们只是突出了更深层次的问题。

我在视图中添加了一些阴影效果，我不知道这会对性能产生如此大的影响。更糟糕的是，当它所在的视图控制器被放入导航控制器时。

```
self.view.layer.shadowOpacity = 0.75f;
self.view.layer.shadowRadius  = 10.0f;
self.view.layer.shadowColor   = [UIColor blackColor].CGColor; 
```

在 UIScrollViews 或 UICollectionViews 中遇到性能问题的任何其他人确保不要犯我的错误。删除这三行代码并没有使滚动变得超级流畅。

# r - 修改R中x轴上的日期格式？

> ID：15989754
> 
> 赞同：4
> 
> 时间：2013-04-13T15:59:13.730
> 
> 标签：r, date, graphics, plot

我想在月份更改 R 中的绘图格式。

所以目前它也在显示这一天，我只想有一个月的年份。

使用我的[数据](http://uploadeasy.net/upload/6nhi.rar)和 R 代码：

```
plot(alvdate[1250:1600],c(NA,alvlloss)[1250:1600],type="l",lwd=1,main="",xlab="",ylab="log loss",cex.axis=1.2,cex.lab=1.2,xaxt="n")
axis.Date(1, at = seq(alvdate[1250], alvdate[1600], length.out=20),
        labels = seq(alvdate[1250], alvdate[1600], length.out=20),
        format= "%m/%y", las = 2) 
```

我得到图片

![在此处输入图像描述](https://i.stack.imgur.com/0C6KI.png)

我得到格式 yyyy-mm-dd 但我想要 yyyy-mm 所以例如

```
2008-01
2008-02 
```

等等。我已经将格式设置为“%m/%y”，但这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:03:01.230

你应该使用`format= "%Y-%m"`, 来写这样的东西：

```
axis.Date(1, at = seq(alvdate[1250], alvdate[1600], length.out=20),
        format= "%Y-%m", las = 2) 
```

# mysql - MySQL SELECT 语句检索唯一的字段值

> ID：15989757
> 
> 赞同：1
> 
> 时间：2013-04-13T15:59:21.517
> 
> 标签：mysql, sql, select

例如

```
id   staff_id   skill_id   mainskill
1    1          24         1
2    1          24         0 
3    1          7          0
4    4          24         0
5    4          18         0
6    6          8          0
7    6          18         1 
```

我希望结果仅包含具有在所有数据中仅出现一次的技能 ID 的元组。换句话说，我想检索包含仅由单个工作人员拥有的技能 ID 的元组。

所以期望的输出是：

```
id   staff_id   skill_id   mainskill
3    1          7          0
6    6          8          0 
```

提前致谢 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:05:31.290

你可以用`GROUP BY`and来做`HAVING`，像这样：

```
SELECT 
  MAX(id) as id,
  MAX(staff_id) as staff_id, 
  skill_id, 
  MAX(mainskill) as mainskill
FROM MyTable
GROUP BY skill_id
HAVING COUNT(1)=1 
```

# java - 在 -1 和 1 内生成随机浮点数会产生 NaN

> ID：15989759
> 
> 赞同：0
> 
> 时间：2013-04-13T15:59:23.530
> 
> 标签：java, random, floating-point

我需要在 -1 和 1 的范围内生成浮点数。我正在使用这一行：

```
 weights[i] = random.nextFloat() * (weightMax - weightMin) + weightMin; 
```

在哪里`weightMax = 1`和`weightMin = -1`

但有时它会产生 NaN。我怎样才能防止这种情况发生？

编辑：是的，你是对的。我稍后会这样做：

```
private void run_neural_network(double[] inputs, double[] outputs) {
    int i, j;
    int weight_counter = 0;

    for (i = 0; i < NB_OUTPUTS; i++) {
        double sum = 0.0;
        for (j = 0; j < NB_INPUTS; j++) {
            sum += inputs[j] * weights[weight_counter];
            weight_counter++;
        }
        outputs[i] = (Math.tanh(sum + weights[weight_counter]));
        weight_counter++;
    }
} 
```

这就是`sum`NaN 的来源：

```
[EpuckController] inputs0: 0.0, weight0 0.06174159,
[EpuckController] inputs1: 306.1555543759677, weight1 -7.409203E-23,
[EpuckController] inputs2: 0.0, weight2 1.2461361E-29,
[EpuckController] inputs3: 307.56460985278545, weight3 194105.33,
[EpuckController] inputs4: 0.0, weight4 0.41100776,
[EpuckController] inputs5: 0.0, weight5 0.0013858302,
[EpuckController] inputs6: 320.0046791338875, weight6 -1.49799987E14,
[EpuckController] inputs7: 0.0, weight7 195593.81,
[EpuckController] inputs8: 421.5353365457416, weight8 -0.8191289,
[EpuckController] Sum NaN 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:06:28.560

我强烈怀疑 NaN 来自其他地方 - 例如，由于稍后对权重进行了除法运算。

虽然这当然不是证据，但我已经创建了十亿个浮点数，但没有看到您建议的行为：

```
import java.util.*;

public class Test {
    public static void main(String[] args) {
        Random random = new Random();
        for (int i = 0; i < 1000000000; i++) {
            float f = random.nextFloat() * 2 - 1;
            if (Float.isNaN(f)) {
                System.out.println("NaN!");
            }
        }
    }
} 
```

（当然，您提供的代码会生成 NaN是没有*意义的。）*

我建议您`Float.isNaN`在分配数组后立即添加测试。如果您当时*没有*看到它，但稍后您*确实*看到了，那么显然问题出在您对权重所做的事情上，而不是权重本身。

# .net - 如何在灰色位图图像上绘制彩色形状？

> ID：15989760
> 
> 赞同：0
> 
> 时间：2013-04-13T15:59:32.023
> 
> 标签：.net, opencv, graphics, bitmap, emgucv

我有灰色位图图像。

```
 Image<Gray, byte> cannyImage = new Image<Gray, byte>(pathImg);
       Bitmap drawImg = cannyImage.ToBitmap(); 
```

我想在这张图片上画一些形状：

```
 Graphics g = Graphics.FromImage(drawImg);
    g.DrawLines(new Pen(Color.Purple), shapes[0].sample.pointsArray); 
```

在代码的最后一行我得到这个错误：

**不能从具有索引像素格式的图像创建 Graphics 对象。**

知道如何在灰色位图图像上绘制彩色形状吗？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:24:36.763

转换为 Bgr (RGB)，然后尝试您的代码。

```
Image<Bgr, Byte> cannyBgr = cannyImage.Convert<Bgr, Byte>();
Bitmap drawImg = cannyBgr.ToBitmap(); 
```

# wampserver - wamp 图标为绿色，但仍然出现错误“http 404”

> ID：15989761
> 
> 赞同：0
> 
> 时间：2013-04-13T15:59:42.303
> 
> 标签：wampserver, configure

我已将 wamp 服务器端口从 80 更改为 81，并且在尝试打开 localhost、错误、http 404 时出现错误。我还没有做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:55:51.523

最好不要更改 Apache 使用的端口号，但如果你这样做了，那么你需要更改你使用的每个地址。

例如，您将使用 localhost，您现在需要使用 localhost:81

找出端口 80 无法工作的原因并修复它要容易得多，这样您就可以留在端口 80

# c# - 在 MVC 中显示一个文件夹中的所有图像。有一个 foreach

> ID：15989764
> 
> 赞同：8
> 
> 时间：2013-04-13T15:59:49.213
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我想将我的文件夹“Images_uploads”文件夹中的所有图片显示到 MVC 视图中。所以它在网站上显示。但似乎没有任何工作..

```
{

<form method="post" action="/Images_upload" enctype="multipart/form-data">  
    <input name="ImageUploaded" type="file">  
    <input type="submit">  
</form>  

<List<String> li = ViewData["~/images_upload"] as List<String>;
 foreach (var picture in li)

    <img src = '@Url.Content("~/images_upload" + picture)' alt="Hejsan" />

} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-13T16:08:21.723

你可能应该在你的控制器中做这种事情。用于[`EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd383458.aspx)获取文件夹中所有文件的列表：

```
// controller
public ActionResult MyAction()
{
    ...
    ViewBag.Images = Directory.EnumerateFiles(Server.MapPath("~/images_upload"))
                              .Select(fn => "~/images_upload/" + Path.GetFileName(fn));

    return View(...);
}

// view
@foreach(var image in (IEnumerable<string>)ViewBag.Images))
{
    <img src="@Url.Content(image)" alt="Hejsan" />
} 
```

更好的是，使用强类型视图模型，如下所示：

```
// model
class MyViewModel
{
    public IEnumerable<string> Images { get; set; }
}

// controller
public ActionResult MyAction()
{
    var model = new MyViewModel()
    {
        Images = Directory.EnumerateFiles(Server.MapPath("~/images_upload"))
                          .Select(fn => "~/images_upload/" + Path.GetFileName(fn))
    };
    return View(model);
}
// view
@foreach(var image in Model.Images)
{
    <img src="@Url.Content(image)" alt="Hejsan" />
} 
```

# eclipse - eclipse Java的Smalltalk风格的方法浏览？

> ID：15989766
> 
> 赞同：2
> 
> 时间：2013-04-13T16:00:09.910
> 
> 标签：eclipse

我正在使用 Eclipse (Indigo) 进行 Java 开发。我个人的特殊风格更喜欢一次查看一个 Java 方法，而不是将其视为较长的 .java 文件的一个区域。

当我从资源管理器或浏览器中选择方法名称时，我正在寻找显示 java 方法的首选项、视图或插件，并且仅显示该方法。作为参考，这里是一个典型的 Smalltalk 浏览器（Cincom 的 VisualWorks）的屏幕截图。“方法代码区域”仅显示一种方法，而不是滚动浏览类中的所有方法。

![Cincom VisualWorkds 系统浏览器](https://i.stack.imgur.com/ecAh4.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T18:45:40.700

Java Browsing Perspective 接近于 Smalltalk 浏览器。我对其进行了一些定制，发现它非常有用。

![Java 浏览视角](https://i.stack.imgur.com/4Wb2u.png)

启用“仅显示所选元素的来源”，您将只看到所选方法。

在今天的宽屏上，您不需要方法源的整个宽度，并且项目和方法占用一些垂直空间。所以我决定改变原来的 Smalltalk 布局。

确保 Eclipse 在您想要浏览时自动关闭打开的文件，而不是打开和关闭文件。

![自动配置关闭编辑器](https://i.stack.imgur.com/xdG4s.png)

缺少的一件事是“协议”视图。也许开发人员在引入 Javadoc 标记时有类似的想法`@category`，但您唯一能做的就是按类别过滤。我希望某个幸运的日子有人会开发一个协议视图。

![过滤类别](https://i.stack.imgur.com/5HTSW.png)

# amazon-web-services - 使用 JAVA AWS 开发工具包安装带有 EC2 实例的 S3 存储桶

> ID：15989767
> 
> 赞同：0
> 
> 时间：2013-04-13T16:00:18.893
> 
> 标签：amazon-web-services, amazon-s3, cloud

嗨云计算极客，有没有任何方法可以使用 JAVA AWS 开发工具包（而不是使用 CLI 命令/ec2-api-tools）安装/连接 S3 存储桶和 EC2 实例。我确实拥有所需的所有 JAVA sdk。我使用 Java AWS SDK 成功创建了一个存储桶，现在进一步想将它与我位于北弗吉尼亚地区的 EC2 实例连接起来。我没有找到任何方法来做到这一点，但我希望必须有某种方法。

干杯，哈米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:07:58.487

您不会“挂载 S3 存储桶”，它们不会以这种方式工作，因为它们不是文件系统。[Amazon S3](http://aws.amazon.com/s3/)是一种基于密钥的存储服务。您使用密钥放置对象（文件）并使用相同的密钥检索它们。键只是您任意分配的名称，您可以在名称中包含“/”标记以模拟文件的层次结构。例如，一个键可以是`folder1/subfolder/file1.txt`. 为了说明，我展示了 java sdk 的基本操作。

首先，您必须设置您的亚马逊凭证并获取 S3 客户端：

```
AWSCredentials credentials = new BasicAWSCredentials("your_accessKey", your_secretKey");
AmazonS3Client s3client = new AmazonS3Client(credentials); 
```

存储一个文件：

```
File file = new File("some_local_path/file1.txt");
String fileKey = "folder1/subfolder/file1.txt";
s3client.putObject("bucket_name", fileKey, file); 
```

取回文件：

```
 S3ObjectInputStream objectInputStream = s3client.getObject("bucket_name", fileKey).getObjectContent(); 
```

您可以读取 InputStream 也[可以将其保存为 file](https://stackoverflow.com/questions/43157/easy-way-to-write-contents-of-a-java-inputstream-to-an-outputstream)。

列出（模拟）文件夹的对象：[请参阅我在另一个问题中的回答](https://stackoverflow.com/questions/15981658/excluding-prefix-in-objectlisting-results-java-client-for-s3/15989227#15989227)。

# java - libgdx facebook 登录 转到屏幕

> ID：15989768
> 
> 赞同：1
> 
> 时间：2013-04-13T16:00:37.033
> 
> 标签：java, facebook, libgdx

我已经将 facebook 与 libgdx 集成，在我的主要课程中，我调用了 facebook 对话框和另一个屏幕，我希望在登录后，它会转到另一个屏幕，

```
if (mFacebook.isSessionValid()) {
        String name = SessionStore.getName(this);
        name        = (name.equals("")) ? "Unknown" : name;
        pk          = name;
        initialize(new GO(), false);
    }
    else{
        initialize(new GOloginscreen(), false);
        mFacebook.authorize(this, PERMISSIONS, -1, new FbLoginDialogListener());
    } 
```

如果它有登录会话，它将进入主菜单屏幕，但如果没有，它将调用 fb 登录对话框。登录后我在这里设置初始化

```
public void onComplete(Bundle values) {
        SessionStore.save(mFacebook, AndroidStarter.this);
        getFbName();
        initialize(new GO(), false);
    } 
```

但它不起作用，因为初始化必须在 oncreate 方法中？

有谁知道我该怎么做，或者有其他解决方案？

我一直坚持这一点，这里是我的完整代码

```
public class AndroidStarter extends AndroidApplication{
private Facebook mFacebook;
private ProgressDialog mProgress;
String PERMISSIONS[] = { "read_stream", "user_relationship_details",
        "user_religion_politics", "user_work_history",
        "user_relationships", "user_interests", "user_likes",
        "user_location", "user_hometown", "user_education_history",
        "user_activities", "offline_access" };
String APP_ID = "thismyfbid2133";
public static String pk;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    pk = "id";
    // Do the stuff that initialize() would do for you
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

    mProgress       = new ProgressDialog(this);
    mFacebook       = new Facebook(APP_ID);       
    SessionStore.restore(mFacebook, this);
    if (mFacebook.isSessionValid()) {
        String name = SessionStore.getName(this);
        name        = (name.equals("")) ? "Unknown" : name;
        pk          = name;
        initialize(new GO(), false);
    }
    else{
        initialize(new GOloginscreen(), false);
        mFacebook.authorize(this, PERMISSIONS, -1, new FbLoginDialogListener());
    }
}

private final class FbLoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
        SessionStore.save(mFacebook, AndroidStarter.this);
        getFbName();
    }

    public void onFacebookError(FacebookError error) {
        Toast.makeText(AndroidStarter.this, "Facebook connection failed", Toast.LENGTH_SHORT).show();
    }

    public void onError(DialogError error) {
        Toast.makeText(AndroidStarter.this, "Facebook connection failed", Toast.LENGTH_SHORT).show(); 
    }

    public void onCancel() {
    }
}

private void getFbName() {
    mProgress.setMessage("Finalizing ...");
    mProgress.show();

    new Thread() {
        @Override
        public void run() {
            String name = "";
            int what = 1;

            try {
                String me = mFacebook.request("me");

                JSONObject jsonObj = (JSONObject) new JSONTokener(me).nextValue();
                name = jsonObj.getString("name");
                what = 0;
            } catch (Exception ex) {
                ex.printStackTrace();
            }

            mFbHandler.sendMessage(mFbHandler.obtainMessage(what, name));
        }
    }.start();
}

private Handler mFbHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        mProgress.dismiss();

        if (msg.what == 0) {
            String username = (String) msg.obj;
            username = (username.equals("")) ? "No Name" : username;

            SessionStore.saveName(username, AndroidStarter.this);

            Toast.makeText(AndroidStarter.this, "Connected to Facebook as " + username, Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(AndroidStarter.this, "Connected to Facebook", Toast.LENGTH_SHORT).show();
        }
    }
}; 
```

}

# javascript - 如何在javascript中获取击键序列？

> ID：15989770
> 
> 赞同：-2
> 
> 时间：2013-04-13T16:00:46.770
> 
> 标签：javascript

假设我有这样的代码：

```
function onKeystroke(e)
{
    if (e.keyCode == 39)  //Arrow Right
    {
        currentCell += 1;
    }

    if (e.keyCode == 37)  //Arrow Left
    {
        currentCell -= 1;
    }       

    if (e.keyCode>47 && e.keyCode<58)  //Numbers 0-9
    {
        cells[currentCell] = e.keyCode - 48;
    }             
} 
```

但我不仅需要获得一个数字，还需要两位数。程序的行为应该是这样的： - 如果用户移动到一个空单元格并按下“2”键，则单元格中会出现数字“2”。如果他现在按“3”，数字变为“23”。下一个按键（比如说“7”）重新开始，并在单元格中放入“7”。- 如果用户移动到已经写有“2”的单元格，然后按“3”，则只有“3”出现，随后的“7”笔划使其变为“37”。

因此，移出单元格应该“关闭”它，类似于 MS Excel 中发生的情况。

我知道我可以跟踪处于打开或关闭状态的单元格，但这需要将单元格“关闭”附加到所有运动功能。这有点问题，因为我的实际程序中有两个以上。这并非不可能，但我想知道是否有更好的方法，这样我就可以通过为 if (e.keyCode>47 && e.keyCode<58) 案例编写正确的脚本来获得预期的行为......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:19:20.257

如果不编写一些跟踪它的代码，就没有神奇的方法来跟踪应用程序状态 =P。您将必须更新您的移动功能以跟踪单元格是否刚刚获得焦点。但是，如果您的单元格是可聚焦的并且有一个`tabindex`，您可以使用该`focus`事件来集中这个逻辑。如果不使用 'focus' 事件，您当前的函数可能如下所示：

```
var isNewCell = false;

function onKeystroke(e)
{
    if (e.keyCode == 39)  //Arrow Right
    {
        currentCell += 1;
        isNewCell = true;

    }

    if (e.keyCode == 37)  //Arrow Left
    {
        currentCell -= 1;
        isNewCell = true;
    }       

    if (e.keyCode>47 && e.keyCode<58)  //Numbers 0-9
    {
        if (isNewCell || typeof cells[currentCell] !== 'number' || cells[currentCell].toString().length === 2) {
            cells[currentCell] = e.keyCode - 48;
        } else {
            cells[currentCell] = parseInt(cells[currentCell] + (e.keyCode - 48).toString(), 10);
        }

        isNewCell = false;
    }             
} 
```

# mysql - MySQL - 我如何从 shell 写入文件？

> ID：15989771
> 
> 赞同：1
> 
> 时间：2013-04-13T16:00:56.960
> 
> 标签：mysql

我正在尝试使用 shell 命令 lin 中的此查询写入文件：

```
mysql --user=my_user --password='my_password' -e "select concat_ws ('\t' , user_id , first_name , last_name , user_email ) from users" into outfile '/hiking_contacts.txt'; 
```

我希望这会创建一个文本文件，但它并没有真正起作用。有人知道我在这里哪里出错了吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:03:22.707

尝试这个：

```
mysql --user=my_user --password='my_password' -e "select concat_ws ('\t' , user_id , first_name , last_name , user_email ) from users;" >> hiking_contacts.txt 
```

并检查权限。

看看文档：[http ://dev.mysql.com/doc/refman/5.0/en/command-line-options.html](http://dev.mysql.com/doc/refman/5.0/en/command-line-options.html)

# java - 在这个例子中如何实现 onchildclick 监听器？

> ID：15989782
> 
> 赞同：1
> 
> 时间：2013-04-13T16:02:15.040
> 
> 标签：java, android, listview, clickable

所以我有一个可扩展的列表视图。我想要的是让每个孩子都可以点击。如果我按第一个我想打开class1，如果我按第二个我想打开class2，如果我按第三个我想打开class3，依此类推......我是编程新手，所以请向我解释一下，就像你会为一个傻瓜做的那样。

这是我的活动

```
public class Mecanica  extends ExpandableListActivity implements OnChildClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ExpandableListView expandbleLis = getExpandableListView();
        expandbleLis.setDividerHeight(2);
        expandbleLis.setGroupIndicator(null);
        expandbleLis.setClickable(true);

        setGroupData();
        setChildGroupData();

        NewAdapter mNewAdapter = new NewAdapter(groupItem, childItem);
        mNewAdapter.setInflater((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE), this);
        getExpandableListView().setAdapter(mNewAdapter);
        expandbleLis.setOnChildClickListener(this);
    }

    public void setGroupData() {
        groupItem.add("Directia");
        groupItem.add("Franarea");
        groupItem.add("Motorul");
        groupItem.add("Rotile");
        groupItem.add("Siguranta si control");
        groupItem.add("Suspensia");
        groupItem.add("Transmisia");
    }

    ArrayList<String> groupItem = new ArrayList<String>();
    ArrayList<Object> childItem = new ArrayList<Object>();

    public void setChildGroupData() {
        /**
         * Add Data For TecthNology
         */
        ArrayList<String> child = new ArrayList<String>();
        child.add("Java");
        child.add("Drupal");
        child.add(".Net Framework");
        child.add("PHP");
        childItem.add(child);

        /**
         * Add Data For Mobile
         */
        child = new ArrayList<String>();
        child.add("Android");
        child.add("Window Mobile");
        child.add("iPHone");
        child.add("Blackberry");
        childItem.add(child);
        /**
         * Add Data For Manufacture
         */
        child = new ArrayList<String>();
        child.add("HTC");
        child.add("Apple");
        child.add("Samsung");
        child.add("Nokia");
        childItem.add(child);
        /**
         * Add Data For Extras
         */
        child = new ArrayList<String>();
        child.add("Contact Us");
        child.add("About Us");
        child.add("Location");
        child.add("Root Cause");
        childItem.add(child);
    }    
} 
```

和适配器类

```
@SuppressWarnings("unchecked")
public class NewAdapter extends BaseExpandableListAdapter {

    public ArrayList<String> groupItem, tempChild;
    public ArrayList<Object> Childtem = new ArrayList<Object>();
    public LayoutInflater minflater;
    public Activity activity;

    public NewAdapter(ArrayList<String> grList, ArrayList<Object> childItem) {
        groupItem = grList;
        this.Childtem = childItem;
    }

    public void setInflater(LayoutInflater mInflater, Activity act) {
        this.minflater = mInflater;
        activity = act;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return 0;
    }

    @Override
    public View getChildView(int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        tempChild = (ArrayList<String>) Childtem.get(groupPosition);
        TextView text = null;
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.childrow, null);
        }
        text = (TextView) convertView.findViewById(R.id.textView1);
        text.setText(tempChild.get(childPosition));
        /*convertView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(activity, tempChild.get(childPosition),
                        Toast.LENGTH_SHORT).show();
            }
        });*/
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return ((ArrayList<String>) Childtem.get(groupPosition)).size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return null;
    }

    @Override
    public int getGroupCount() {
        return groupItem.size();
    }

    @Override
    public void onGroupCollapsed(int groupPosition) {
        super.onGroupCollapsed(groupPosition);
    }

    @Override
    public void onGroupExpanded(int groupPosition) {
        super.onGroupExpanded(groupPosition);
    }

    @Override
    public long getGroupId(int groupPosition) {
        return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.grouprow, null);
        }
        ((CheckedTextView) convertView).setText(groupItem.get(groupPosition));
        //((CheckedTextView) convertView).setChecked(isExpanded);
        return convertView;
    }

    @Override
    public boolean hasStableIds() {
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:51:54.037

我找不到你的`OnChildClickListener`，你应该实施。

这将使您可以访问单击的特定子项，从而访问您`List`的项目中的位置。

实现可能类似于以下示例：

```
@Override
public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
    // Create a switch that switches on the specific child position.
    switch(childPosition) {
    case 0:
        // Go to child #0 specific class.
        Intent child0Intent = new Intent(this, Child0Activity.class);
        startActivity(child0Intent);
        break;
    case 1:
        // Go to child #1 specific class.
        Intent child1Intent = new Intent(this, Child1Activity.class);
        startActivity(child1Intent);
        break;
    }
    return false;
} 
```

可以在此处找到如何实现它的完整示例：

[http://www.mysamplecode.com/2012/10/android-expandablelistview-example.html](http://www.mysamplecode.com/2012/10/android-expandablelistview-example.html)

# java - 服务器向客户端发送信息但无法得到答案

> ID：15989791
> 
> 赞同：0
> 
> 时间：2013-04-13T16:02:35.060
> 
> 标签：java, sockets, client-server

我正在编写一个简单的客户端-服务器程序，我的问题是服务器不等待客户端的回答，这会导致`IOException`. 服务器尝试执行时发生异常

```
line = bufferStringFromClientReader.readLine(); 
```

我究竟做错了什么？

**服务器**：

```
import java.io.*;
import java.net.*;

public class Server {

    private final static String filePath = "dataFile.txt";

    public static void main(String[] arg) {
    ServerSocket serverSocket = null;
    Socket serverConnection = null;
    OutputStream outServerStream = null;
    InputStream inServerStream = null;
    PrintWriter printWriterDataSender = null;
    BufferedReader bufferDataFromFileReader = null;
    BufferedReader bufferStringFromClientReader = null;
    BufferedWriter bufferedStringToFileWriter = null;
    String line;

    try {
        serverSocket = new ServerSocket(8868);
    } catch (IOException e) {
        throw new RuntimeException("Nieobsłużony wyjątek - nie można utowrzyć gniazda serwera");
    }

    try {
        serverConnection = serverSocket.accept();
    } catch (IOException e) {
        throw new RuntimeException("Nieobsłużony wyjątek - nie można nawiązać połączenia z klientem");
    }

    try {
        inServerStream = serverConnection.getInputStream();
    } catch (IOException e) {
        throw new RuntimeException("Nieobsłużony wyjątek - nie można pobrać strumienia wejścia");
    }

    try {
        outServerStream = serverConnection.getOutputStream();
        bufferDataFromFileReader = new BufferedReader(new FileReader(filePath));
        bufferedStringToFileWriter = new BufferedWriter(new FileWriter(filePath, true));
    } catch (IOException e) {
        throw new RuntimeException("Nieobsłużony wyjątek - nie można pobrać strumienia wyjścia");
    }

    while (true) {

        try {
                printWriterDataSender = new PrintWriter(outServerStream);
                line = bufferDataFromFileReader.readLine();    
                printWriterDataSender.println(line);
                printWriterDataSender.flush();
                printWriterDataSender.close();;

                bufferStringFromClientReader = new BufferedReader(new InputStreamReader(inServerStream));

                System.out.println("get answer from client");

                line = bufferStringFromClientReader.readLine();

                bufferedStringToFileWriter.write(line);
                bufferedStringToFileWriter.close();

        } catch (Exception e) {

            System.out.println("utracono polaczenie");
            try {
                serverConnection = serverSocket.accept();
            } catch (IOException e1) {
                throw new RuntimeException("Nieobsłużony wyjątek - nie można nawiązać połączenia z klientem");
            }

            try {
                inServerStream = serverConnection.getInputStream();
            } catch (IOException e2) {
                throw new RuntimeException("Nieobsłużony wyjątek - nie można pobrać strumienia wejścia");
            }

            try {
                outServerStream = serverConnection.getOutputStream();
            } catch (IOException e3) {
                throw new RuntimeException("Nieobsłużony wyjątek - nie można pobrać strumienia wyjścia");
            }
        } 
    }
}} 
```

**客户**：

```
import java.awt.EventQueue;
import java.io.*;
import java.util.*;
import java.net.*;
import javax.swing.*;

public class Client {

public static void main(String[] args) 
{

     Socket clientSocket = null;
     InputStream clientInputStream = null;
     OutputStream clientOutputStream = null;
     BufferedReader clientBufferReader = null; 

    try
    {
        clientSocket = new Socket("localhost", 8868);
    }
    catch(UnknownHostException e)
    {
        throw new RuntimeException("Nieobsłużony wyjątek - nieznana nazwa hosta");
    }
    catch(IOException e)
    {
        throw new RuntimeException("Nieobsłużony wyjątek - nie można utowrzyć gniazda klienta");
    }

    try
    {
        clientInputStream = clientSocket.getInputStream();
    }
    catch(IOException e)
    {
        throw new RuntimeException("Nieobsłużony wyjątek - nie można pobrać strumienia wejścia");
    }

    try
    {
        clientOutputStream = clientSocket.getOutputStream();
    }
    catch(IOException e)
    {
        throw new RuntimeException("Nieobsłużony wyjątek - nie można pobrać strumienia wyjścia");
    }

    try
    { 
        clientBufferReader = new BufferedReader(new InputStreamReader(clientInputStream)); 
    }
    catch(Exception e)
    {
        throw new RuntimeException("Nieobsłużony wyjątek - nie można utworzyć bufora odczytu danych od serwera");             
    }

    try
    { 
        String tmpString = clientBufferReader.readLine();
        System.out.println(tmpString);

        PrintWriter answer = new PrintWriter(clientOutputStream);

        answer.println("ans \n");
        answer.close();

    }
    catch(Exception e)
    {
        throw new RuntimeException("Nieobsłużony wyjątek - odpowiedz");             
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:45:04.563

问题是您`PrintWriter`过早地关闭了服务器。这样做会阻止从 Socket 读取任何数据`InputStream`。

```
printWriterDataSender.close(); 
```

*在*所有操作完成后将其移至`finally`块将解决问题。确保在此之后发生：*`Socket` `IO``socket.close`*

 *```
printWriterDataSender.close();
bufferStringFromClientReader.close();
serverConnection.close(); // last call 
```

此外，完成此操作后，您可能需要进行一次读取。目前您正在`while`循环读取和写入，但客户端只写入一次。这将导致`Socket`读取异常。

另请参阅：[读取和写入套接字](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:28:41.153

在您的客户端`PrintWriter answer = new PrintWriter(clientOutputStream, true );`中启用**自动刷新**行为。客户端和服务器都可以使用此功能；刷新是在您的代码服务器端由`pw.flush()`.

为了在 SO 中更清晰易读，您可以按如下方式编写代码，这是您的客户端和服务器重写，并且可以正常工作！

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.TimeUnit;

public class Client {

   static final CountDownLatch cdl = new CountDownLatch( 1 );

   static class Server extends Thread {

      @Override
      public void run() {
         try( ServerSocket serverSocket = new ServerSocket( 8868 )) {
            cdl.countDown();
            Socket         serverConnection = serverSocket.accept();
            OutputStream   outServerStream  = serverConnection.getOutputStream();
            InputStream    inServerStream   = serverConnection.getInputStream();
            PrintWriter    dataSender       = new PrintWriter( outServerStream, true );
            BufferedReader clientReader     = new BufferedReader( new InputStreamReader( inServerStream ));
            dataSender.println( "Hello, " );
            System.out.println( "SERVER: " + clientReader.readLine());
            serverConnection.close();
         }
         catch( IOException x ) {
            x.printStackTrace();
         }
      }
   }

   public static void main( String[] args ) throws Exception {
      new Server().start();
      cdl.await( 1, TimeUnit.DAYS );

      Socket         clientSocket       = new Socket( "localhost", 8868 );
      InputStream    clientInputStream  = clientSocket.getInputStream();
      OutputStream   clientOutputStream = clientSocket.getOutputStream();
      PrintWriter    answer             = new PrintWriter( clientOutputStream, true );
      BufferedReader clientBufferReader = new BufferedReader( new InputStreamReader( clientInputStream ));
      System.out.println( "CLIENT: " + clientBufferReader.readLine());
      answer.println( "world!" );
      clientSocket.close();
   }
} 
```

输出：

```
CLIENT: Hello, 
SERVER: world! 
```*

# android - \n 在 Java 中不换行

> ID：15989795
> 
> 赞同：1
> 
> 时间：2013-04-13T16:03:10.073
> 
> 标签：android

我使用**谷歌 api**从一些数据中**生成二维码。**它应该代表一个**VCARD 格式**。我称[这个](http://chart.apis.google.com/chart?cht=qr&chs=300x300&chl=BEGIN%3aVCARD%5CnVERSION:2.1%5CnFN%3aAdam%20Varhegyi%5CnN%3aAdam;Varhegyi%5CnEMAIL%3aadamvarhegyi20@gmail.com%5CnTEL:0670578978%5CnINTERNET%3a;%5Cn%5CnORG%3aEz%20a%20cegem.kft%5CnEND%3aVCARD)网址。

当我阅读二维码时，我很好地取回了我添加到链接中的所有信息，除了一个小错误。

接线员**不工作**。

***我用Java（Android）找回了这个：***

```
BEGIN:VCARD\nVERSION:2.1\nFN:Adam Varhegyi\nN:Adam;Varhegyi\nEMAIL:somemai@address.com\nTEL:1234567\nINTERNET:;\n\nORG:Mycompanyname\nEND:VCARD 
```

***而不是这个： (\n = 换行符)***

```
BEGIN:VCARD\nVERSION:2.1
FN:Adam Varhegyi
N:Adam;Varhegyi
EMAIL:somemai@address.com
TEL:1234567
INTERNET:;
ORG:Mycompanyname
END:VCARD 
```

我尝试**使用这样的扫描仪**来解决它：

```
Scanner sc = new Scanner(myVCardStringInputFromQrCode);
sc.useDelimiter("\n");
while(sc.hasNext()){
    String str = sc.next();
    Log.i("VCARD LINE: ", str);
} 
```

而且这种方法**只返回 1 行！**它**也忽略了“\n”标记。**

**编辑：**

我也试过用`System.getProperty("line.separator")`，但没用。

**编辑第 2 部分：**

```
if(myVCardStringInputFromQrCode.contains("\n")){
    Log.i("Found linebreak", "TRUE");
}
else{
    Log.i("Found linebreak", "FALSE");
} 
```

**这段代码给了我“FALSE”** ——当我清楚地看到它时，Java 说它不包含“\n”。

有人知道这里发生了什么吗？

**编辑第 3 部分：**

**由于某种原因，正确答案已被删除，因此我无法将其标记为“答案”。解决方案是“\\n”而不是“\n”，它正在工作。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:05:10.163

您可以使用`System.getProperty("line.separator")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:57:41.750

您看到的`\n`不是实际的换行符。它是一个转义的换行符（一个反斜杠，后跟一个“n”字符）。

尝试用实际的换行符替换所有出现的这种情况。请注意，您应该使用`\r\n`换行序列，因为这是 vCard 根据规范应该使用的换行序列。

```
myVCardStringInputFromQrCode = myVCardStringInputFromQrCode.replace("\\n", "\r\n"); 
```

请记住传递`\\n`给第一个参数而不是`\n`. 您需要两个反斜杠才能获得文字反斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:11:24.577

`\r\n`而不是`\n`一直为我工作。

# c++ - 指向对象的指针向量的 for 循环中的段错误

> ID：15989798
> 
> 赞同：1
> 
> 时间：2013-04-13T16:03:27.873
> 
> 标签：c++, vector

我正在尝试编写一个程序来创建一个指向对象的指针向量，然后取消引用它以打印它持有的值。但是程序由于段错误而中止。

分段错误出现`cout << p1->rno << endl;`在`display( )`函数中。

请帮我找出问题所在。

```
#include<iostream>
#include<vector>
using namespace std;
class student
{
  public:
  int rno;
  char name[25];
  student(int r,char *p):rno(r)
  {
     //cout << "Con No is" << ++cnt << endl;
     strcpy(name,p);
  }
  static int cnt;
};

void display(vector<student *> &vec)
{
     vector<student *> :: iterator p;
     student *p1;
     for(p = vec.begin( );p != vec.end( );++p);
     {
       p1 = *p;
       cout << p1->rno << endl;
     }
}
int student :: cnt = 0;

int main( )
{
    vector<student *> vec;
    student *p;
    int i = 0; 
    while(i < 10)
    {
      p = new student(i,"Ganesh");
      vec.push_back(p);
      i++;
    }
    display(vec);
    system("PAUSE 100");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:13:11.130

你打错了

```
for(p = vec.begin( );p != vec.end( );++p);
//                                       ^ 
```

你*的 for 循环*体是空的。

PS我建议你打开警告，它可以帮助你避免这样的错别字。例如，clang 会引发以下警告：

> 警告：for 循环的主体为空 [-Wempty-body]

# java - 双向链接列表中的字符串转换错误

> ID：15989800
> 
> 赞同：0
> 
> 时间：2013-04-13T16:03:30.700
> 
> 标签：java, doubly-linked-list

我昨天问了一个关于这段代码的问题，它帮助我克服了这个问题，但是现在我遇到了其他问题。我正在使用一个双向链表并为其编写添加、删除、重置等功能。除了删除（我不太确定那里的错误）之外，我有什么应该适用于所有事情，但主要问题是我不断收到的错误：

```
Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot be cast to support.DLLNode
at Double.add(Double.java:155)
at Double.main(Double.java:172) 
```

我正在寻找有关如何解决此错误并修复 remove 方法的最后一部分的建议。这是代码：

```
import ch06.lists.*;
import support.*;

public class Double<T extends Comparable<T>> implements ListInterface<T> {

protected DLLNode<T> front; //Front of list
protected DLLNode<T> rear; //Rear of list
protected DLLNode<T> curPosition; //Current spot for iteration
protected int numElements; //Number of elements in list

public Double() {
    front = null;
    rear = null;
    curPosition = null;
    numElements = 0;
}

protected DLLNode<T> find(T target) {
    //While the list is not empty and the target is not equal to the current element
    //curr will move down the list. If curr becomes null then return null.
    //If it finds the element, return it.
    DLLNode<T> curr;
    curr = front;
    T currInfo = curr.getInfo();
    while(curr != null && currInfo.compareTo(target) != 0) {    
        curr = (DLLNode<T>)curr.getLink();      
    }
    if (curr == null) {
        return null;
    }
    else {
        return curr;
    }           
}

public int size() { 
    //Return number of elements in the list 
    return numElements;     
}

public boolean contains(T element) {
    //Does the list contain the given element?
    //Return true if so, false otherwise.
    if (find(element) == null) {
        return false;
    }
    else {
        return true;
    }
}

public boolean remove(T element) {
    //While the list is not empty, curr will move down. If the element can not
    //be found, then return false. Else remove the element.
    DLLNode<T> curr;
    curr = front;

    while(curr != null) {   
        curr = (DLLNode<T>)curr.getLink();      
    }
    if (find(element) == null) {
        return false;
    }
    else {
        if (curr == null) {
            curr = curr.getBack();
            curr = rear;
        }
        else if (curr == front) {
            curr = (DLLNode<T>)curr.getLink();
            curr = front;
        }
        else if (curr == rear) {
            curr = curr.getBack();
            curr = rear;
        }
        else {
            //curr.getLink().setBack(curr.getBack());
            //curr.getBack().setLink(curr.getLink());

        }
    return true;
    }
}   

public T get(T element) {
    //Return the info of the find method.
    if (find(element) == null) {
        return null;
    }
    else {
        return find(element).getInfo();
    }

}

public String toString() {
    DLLNode<T> curr;
    curr = front;
    String ans = "";
    while (curr != null) {
        ans = ans + " " + curr.getInfo();
        curr = (DLLNode<T>)curr.getLink();
    }
    return ans;
}

public void reset() {
    //Reset the iteration back to front
    curPosition = front;        
}

public T getNext() {
    //Return the info of the next element in the list
    DLLNode<T> curr;
    curr = front;
    //while (curr != null) {
        //curr = (DLLNode<T>)curr.getLink();
    //}
    if ((DLLNode<T>)curr.getLink() == null) {
        return null;
    }   
    else {
        curr = (DLLNode<T>)curr.getLink();
        return curr.getInfo();
    }       
}

public void resetBack() {

}

public T getPrevious() {
    //Return the previous element in the list
    DLLNode<T> curr;
    curr = front;
    if ((DLLNode<T>)curr.getLink() == null) {
        return null;
    }
    else if((DLLNode<T>)curr.getBack() == null) {
        return null;
    }
    else {
        curr = curr.getBack();
        return curr.getInfo();
    }
}

public void add(T element) {
    //PreCondition: Assume the element is NOT already in the list
    //AND that the list is not full!
    DLLNode<T> curr;                
    DLLNode<T>  newNode = (DLLNode<T>) element;
    curr = front;
    if (curr == null) {
        front = (DLLNode<T>)element;
    }
    else {
        newNode.setBack(curr.getBack());
        newNode.setLink(curr);
        curr.getBack().setLink(newNode);
        curr.setBack(newNode);
        curr = newNode;
    }

}
public static void main(String[] args){

    Double<String> d = new Double<String>();
    d.add("Hello");
    d.add("Arthur");
    d.add("Goodbye");
    d.add("Zoo");
    d.add("Computer Science");
    d.add("Mathematics");
    d.add("Testing");

    System.out.println(d);

}  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:23:23.710

直接的问题在于`add(T element)`您正在投射的方法：

`DLLNode<T> newNode = (DLLNode<T>) element;`

但是你通过`element`a`String`不是 a `DLLNode`。查看您的主要方法：`d.add("Hello");`

添加时，请执行以下操作：`DLLNode newNode = new DLLNode(element);`

您可以查看 java [LinkedList](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java)源代码（以获取有关实现的灵感以及针对您的问题正确使用泛型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:23:24.210

在你的`add(T element)`方法中，你有一条线

```
DLLNode<T>  newNode = (DLLNode<T>) element; 
```

这个演员表不起作用。

显然，您希望创建一个包含元素作为信息的新节点，以便在此处添加到您的列表中。

你想要的大概是

```
DLLNode<T>  newNode = new DLLNode<T>();
newNode.setInfo(element); 
```

（我假设你`DLLNode`有这个二传手，因为它有其他二传手。）

# objective-c - 奇怪的行为结果 if 语句

> ID：15989801
> 
> 赞同：0
> 
> 时间：2013-04-13T16:03:36.247
> 
> 标签：objective-c, if-statement

我有以下代码：

```
- (NSArray *)checkNormalGameDuelAndMatch:(float)nrDuelQs andNrQPerDuel:(float)nrQPerDuel andNrMatchQ:(float)nrMatchQ andActivePlayer:(float)actPlayerNrQ andInactivePlayer:(float)inactivePlayerNrQ {
NSLog(@"checkNormalGameDuelAndMatch:");

// Check for Matches and Duels to prep for swaps and/or match endings
NSArray *theCheckArray = [[NSArray alloc]init];
NSLog(@"nrDuelQs: %.0f / nrQPerDuel: %.0f", nrDuelQs, nrQPerDuel);
// Check if Match still on
NSLog(@"actPlayerNrQ: %.0f / inactivePlayerNrQ: %.0f / nrMatchQ: %.0f", actPlayerNrQ, inactivePlayerNrQ, nrMatchQ);
if (actPlayerNrQ < nrMatchQ && inactivePlayerNrQ < nrMatchQ) {
    // Match is still on
    _isMatchStillOn = YES;

    // Check if Duel is till on
    if (nrDuelQs < nrQPerDuel) {
        // Duel is still on
        _isDuelStillOn = YES;
        NSLog(@"_isDuelStillOn = YES;");
    }
    else {
        _isDuelStillOn = NO;
        NSLog(@"_isDuelStillOn = NO;");
    }
}
else {
    //==MATCH IS OVER==//
    _isMatchStillOn = NO;
    NSLog(@"MATCH OFF");
}

theCheckArray = @[[NSNumber numberWithBool:_isDuelStillOn], [NSNumber numberWithBool:_isMatchStillOn]];
return theCheckArray;
} 
```

使用以下 NSLog 输出，在两个循环期间：

```
checkNormalGameDuelAndMatch:
nrDuelQs: 4 / nrQPerDuel: 5
actPlayerNrQ: 4 / inactivePlayerNrQ: 0 / nrMatchQ: 5
_isDuelStillOn = YES;
checkNormalGameDuelAndMatch:
nrDuelQs: 5 / nrQPerDuel: 5
actPlayerNrQ: 5 / inactivePlayerNrQ: 0 / nrMatchQ: 5
MATCH OFF 
```

我猜 If 语句和“&&”有问题，因为我不期待“MATCH OFF”出现。

我想我是盲人，因为这不应该很复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:13:40.117

这很可能会发生，因为变量的类型是`float`：即使它们都打印为`5`，其中一个实际上可能比另一个略小（例如，`4.9999999999999999`）。这可能是由于`actPlayerNrQ`计算方式造成的：例如，如果添加`0.1`50 次，您将不会得到精确的`5`.

这是一个[示例的链接](http://ideone.com/mPjYcC)（它是用 C 语言编写的，但该语言的一部分与 Objective C 共享）。

```
float n = 0;
int i = 0;
for (i = 0 ; i != 25 ; i++, n += 0.2);
printf("%f < 5.000000 : %s", n, n < 5.0 ? "yes":"no"); 
```

这打印

```
5.000000 < 5.000000 : yes 
```

要解决此问题，您可以与 epsilon 进行比较，例如

```
#define EPSILON 1E-8
// 1E-8 stands for 1*10^-8, or 0.00000001
...

if ((actPlayerNrQ - nrMatchQ) < EPSILON && (inactivePlayerNrQ - nrMatchQ) < EPSILON)
    ... 
```

# java - java sqlite异常

> ID：15989803
> 
> 赞同：0
> 
> 时间：2013-04-13T16:03:45.407
> 
> 标签：java, sqlite, exception, jar, export

我使用netbeans制作了一个Java应用程序并将sqlite用作数据库一切都在netbeans中工作但是当我将程序导出到jar文件并在另一台机器上运行时，当我尝试连接sqlite数据库时出现异常

例外是关于这一行： Class.forName("org.sqlite.JDBC"); 例外是：java.lang.ClassNotFoundException: org.sqlite.JDBC

我查看了 stackoverflow 中的所有相关线程，但对此没有纯粹的答案。

先谢谢了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:06:03.120

只需将 sqlite 驱动程序 jar 添加到您的类路径中。您的应用程序找不到该类`org.sqlite.JDBC`，因此这意味着您的类路径中缺少一个 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:07:38.643

要么在 jar 文件中包含 sqlite jdbc 驱动程序，要么确保在类路径中包含它。将其添加为 -classpath **sqlite 驱动程序**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T11:50:23.650

问题解决了

我已经为编译时和运行时导入了 sqlite jar 文件。从 netbeans -> 项目属性 -> 库。

然后我将导出的 jar 文件从 dist 文件夹和 lib 文件夹移动到另一台机器.. 并且工作顺利.. 谢谢大家

# c++ - 没有成员命名

> ID：15989804
> 
> 赞同：-3
> 
> 时间：2013-04-13T16:03:48.763
> 
> 标签：c++

这是头文件名 monitor.h

```
class DSRAgent;
class Detector;
class ReputationSystem;

class Monitor {
public:
    Monitor();
    Monitor(DSRAgent* agent);
    void handleTap(const Packet* packet);
    void handlePublishInfo(nsaddr_t src, double identification, int count,rating* ratings);
    void handlePacketSent(Packet* packet);
    void publishInfo(map<nsaddr_t, rating*> ratings);
    void setNetID(nsaddr_t netid); 
    nsaddr_t getNetID();
    friend class PackTableTimer;
    void setReputationSystem(ReputationSystem* rep_system);
    bool isPACK(int uid);
    void Terminate();

    PackTableTimer* pack_table_timer;

private:
    void packTableCheck();
    map<nsaddr_t, double> published_ids;
    PackTable pack_t;
    DSRAgent* dsragent;
    Detector* detector;
    ReputationSystem* reputation_system;
    nsaddr_t net_id; 
};
class PackTableTimer : public TimerHandler {
public:
PackTableTimer(Monitor *a) : TimerHandler() { a_ = a;}
void expire(Event *e);
protected:
Monitor *a_;
}; 
```

另一个文件是 monitor.cc

```
void PackTableTimer::expire(Event *e)
{
    a_->packTableCheck();
    resched(PACK_TIMEOUT + PACK_TIMEOUT * Random::uniform(1.0));
}

DSRAgent* dsragent;

Monitor::Monitor(DSRAgent* agent)
{ 
    this->dsragent = agent;
    this->detector = new Detector(this);
    pack_table_timer = new PackTableTimer(this);
    pack_table_timer->sched(PACK_TIMEOUT + PACK_TIMEOUT * Random::uniform(1.0));
}

void Monitor::handleTap(const Packet* packet)
{
    Behavior behavior;
    hdr_sr *srh = hdr_sr::access(packet);
    hdr_ip *iph = hdr_ip::access(packet);
    hdr_cmn *cmh = hdr_cmn::access(packet);
    ID cur_hop(srh->addrs()[srh->cur_addr()-1]);
    nsaddr_t cur_addr = cur_hop.getNSAddr_t();
    int uid = cmh->uid();
    map<int, PackData*>::iterator it;
    it = pack_t.find(uid); 
```

我收到以下错误：

```
**monitor.h：错误：“PackTableTimer”未命名类型

monitor.cc：在构造函数“Monitor::Monitor(DSRAgent*)”中

monitor.cc：错误：“类监视器”没有名为“PackTableTimer”的成员

monitor.cc：错误：“pack_table_timer”未在此范围内声明**

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:06:41.590

您错过了 PackTableTimer 类的声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:19:13.670

您需要先进行前向声明`PackTableTimer`，然后才能使用它`monitor.h`

将此与您的其他前向声明放在一起。

```
class PackTableTimer; 
```

# ruby-on-rails-3.2 - Rails 3.2 动作缓存/静态页面

> ID：15989808
> 
> 赞同：0
> 
> 时间：2013-04-13T16:04:18.630
> 
> 标签：ruby-on-rails-3.2, memcached, dalli

我想知道缓存静态内容（如关于页面）的最佳做法是什么。在这种情况下，如果使用类似的匹配器，就**不可能**有实际的动作

```
match 'about' => 'home#about' 
```

整个页面都可以被缓存，除了布局包含一个对用户会话唯一的标题。所以使用*:layout => false*会起作用，因为动作中的所有内容都**可以**被缓存，而不是布局。

我用过

```
caches_action :about, :layout => false 
```

在 HomeController 中，但我不相信它实际上在缓存，因为服务器报告“渲染”并且它始终需要 300-400 毫秒。

缓存此类内容的典型方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:23:46.403

您的问题是您问题的这一部分： ***除了****布局包含用户会话独有的标题。*

您可以在每个用户群上缓存整个页面。但这意味着页面必须为每个用户呈现一次，并且必须存储在硬盘上。根据您的用例，它可能是有意义的。

但是在 10 种情况下的 9 种情况下，您只想通过以下方式对非更改部分进行分段缓存：

```
<% cache('about_main') do %>

[...]

<% end %> 
```

查看[http://xyzpub.com/en/ruby-on-rails/3.2/caching.html](http://xyzpub.com/en/ruby-on-rails/3.2/caching.html)了解不同类型缓存的详细视图。

# regex - Perl 不要拆分最后一次出现

> ID：15989812
> 
> 赞同：0
> 
> 时间：2013-04-13T16:04:31.333
> 
> 标签：regex, perl

我正在尝试获取`ps -ef`命令的结果，但遇到了一个问题。

因为`$cmd`它不打印完整的命令，只是在命令争论之间的空间处分割。

它打印这个：

```
jill 61745 8888 0 11:03 ? 00:00:04 php-fpm: 
```

什么时候应该打印这个：

```
jill 61745 8888 0 11:03 ? 00:00:04 php-fpm: pool www 
```

我知道一个正则表达式可以做到这一点，但我究竟应该做什么对我来说并不清楚。

```
sub refresh {
        open(OPENPIPE, "ps -ef|");
        while (<OPENPIPE>) {
                my ($uid, $pid, $ppid, $c, $stime, $tty, $time, $cmd) = split();
                print "$uid $pid $ppid $c $stime $tty $time $cmd\n";
        }
        close(OPENPIPE);
}
refresh(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:09:52.717

阅读[文档](http://perldoc.perl.org/functions/split.html)！split 有第三个参数来限制结果字段的数量。将其设置为您想要的字段数：

```
my @fields = split ' ', $_, 8; 
```

* * *

`open`此外，将 3-arg-form与词法文件句柄和错误处理一起使用是一个好习惯：

```
my @command = ("ps", "-ef");
open my $pipe, '-|', @command or die "Can't run @command: $!";
while (<$pipe>) {
  chomp;
  ...;
}
close $pipe or warn
  $! ? "Error when closing @command: $!"
     : "Return status $? from @command"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:13:51.503

使用@amon 解决方案，这是完整的代码（更简单）：

```
use strict;
use warnings;

my $result = qx!ps -ef!;
my @fields = split /\s+/, $result, 8;
print "@fields\n"; 
```

# c - 集群中的共享数据结构

> ID：15989814
> 
> 赞同：0
> 
> 时间：2013-04-13T16:04:39.753
> 
> 标签：c, linux, data-structures, cluster-computing

我有两台服务器共享相同的数据结构，哈希表，我试图找到一种方法，通过将它们与两者的最后结果递增来始终保持它们同步，下面是我正在尝试做的示例.

```
int a[1000];

   Machine-A             Machine-B
1\. a[0]=0 received 1      a[0]=0 received 1           both machines should be 2 now 
2\. a[0]=2 received 1      a[0]=2 nothing received     both machines should be 3 now 
3\. a[0]=3 and so on ... 
```

我已经阅读了很多关于 mysql 复制的内容，但不确定这是否会有所帮助，C/Linux 中是否有一个库可以用来保持两台机器同步？甚至是我应该实现的算法/技术名称？或者找到一种在集群中共享数据的方法，是否有用于此的库？

顺便说一句，哈希在这里不是一个选项，我的意思是我不能让其中一个提供奇数和其他偶数。如果我将来要拥有两台以上的服务器，甚至是 mod hash。两台机器都可以收到相同的号码。

# php - 在 PHP 中生成具有多维数组的有效 JSONP

> ID：15989817
> 
> 赞同：0
> 
> 时间：2013-04-13T16:04:51.583
> 
> 标签：php, javascript, jquery, ajax, jsonp

我尝试生成动态 JSONP 回显，但在 js ajax 调用后我的检查器工具中出现错误：

> `Uncaught ReferenceError: jQuery191019304498913697898_1365868235193 is not defined index.php:1`

PHP：

```
<?php

header('Content-type: application/javascript; charset=utf-8');

$array = array();
array_push($array, array('name' => 'A', 'host' => 'A.com'));
array_push($array, array('name' => 'B', 'host' => 'B.com'));

//$jsonp = json_encode($array, JSON_FORCE_OBJECT);
$jsonp = json_encode($array);

if(isset($_GET['callback']))
{
    echo $_GET['callback'].'('.$jsonp.')';
}
else
{
    echo $json;
}

?> 
```

JS：

```
$.ajax({
    username: username,
    password: password,
    url: url,
    dataType: 'jsonp',
    crossDomain: true,
    ifModified: true,
    success: function (data, status, jqXHR) {
        console.log(data);
        $.each(data, function(index, value) {
            console.log(value['name']);
        });
    }
}); 
```

Ajax 调用响应：

```
jQuery191019304498913697898_1365868235193([{"name":"A","host":"A.com"},{"name":"B","host":"B.com"}]) 
```

你有什么想法吗？我的错误在哪里？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T18:04:40.693

尝试这个。

//test.php文件

```
<?php
header('Content-type: application/json; charset=utf-8');

$array = array();
array_push($array, array('name' => 'A', 'host' => 'A.com'));
array_push($array, array('name' => 'B', 'host' => 'B.com'));

$jsonp = json_encode($array);

if(isset($_GET['callback'])){
    echo $_GET['callback'] . '(' . $jsonp . ')';
}else{
    echo $jsonp;
}
?> 
```

//js文件

```
<script type="text/javascript">

    function myCallback(data, status){
        console.log(data);
    }   

    $.ajax({
        url: 'test.php',
        dataType: 'jsonp',
        jsonp: 'callback',
        jsonpCallback: 'myCallback',
        crossDomain: true,
        ifModified: true
    });
</script> 
```

请记住，如果您未指定回调，jQuery 会自动为回调生成别名。您的回调实际上被设置为`"jQuery191019304498913697898_1365868235193()"`. 通过手动设置回调它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:12:23.070

改变这个

```
 header('Content-type: application/javascript; charset=utf-8'); 
```

至

```
 header('Content-type: application/json; charset=utf-8'); 
```

# java - JavaFX - 用鼠标在画布中绘制矩形（如在 Windows 绘图应用程序中）

> ID：15989825
> 
> 赞同：3
> 
> 时间：2013-04-13T16:05:38.697
> 
> 标签：java, user-interface, javafx, user-interaction

我正在开发一个 JavaFX 应用程序。我有一个画布，我想知道如何用鼠标绘制一个矩形或其他几何形状，就像在 Windows 绘图应用程序中一样。有人知道吗？

# c# - 太空侵略者粘在墙上

> ID：15989827
> 
> 赞同：1
> 
> 时间：2013-04-13T16:05:54.230
> 
> 标签：c#, visual-studio, list, xna

所以我必须为学校开发一款 XNA 游戏，我认为制作 Space Invaders 是件好事。但现在我遇到了一个问题。我有一个`List`来自另一个班级的“外星人”。每秒它向右移动 20 像素，我希望它在触摸屏幕右侧时下降（不是问题）。但我希望它一碰到墙就向相反的方向（向左）移动。问题就在这里。一旦它接触到墙壁，它仍然移动 20px 一次，改变方向，向后移动 20px 并再次改变方向。这不断重复。那么问题出在哪里。我认为它必须更早地检查是否有一个外星人触摸了屏幕，但不知道如何做到这一点，并认为也许你们中的一个可以帮助我，因为这非常令人沮丧！

我包括了更新方法

```
if (xPos % step == 0)
{
   if (!isDescending)
   {
      for (int k = 0; k < sprites.Count; k++)
      {
         Sprite sprite = sprites[k];

         if (touchedRight) sprite.position.X += step;
         else sprite.position.X -= step;
      }

      for (int k = 0; k < sprites.Count; k++)
      {
         Sprite sprite = sprites[k];
         bool hitLeft = sprite.position.X == 0;
         bool hitRight = sprite.rect.Right == screenWidth;
         if ((hitLeft) || (hitRight))
         {
            touchedRight = !touchedRight;
            isDescending = true;
         }
      }
   }

   else
   {
      isDescending = false;
      for (int k = 0; k < sprites.Count; k++)
      {
         sprites[k].position.Y += sprites[k].rect.Height;
      }
   }
}
// CheckCollision(alienBounds, k-1);
// sprite.rect = new Rectangle((int)sprite.position.X, (int)sprite.position.Y, 20, 20);
// alienBounds = sprite.rect;
xPos += 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:41:24.893

好吧，这是错误的：

```
if ((hitLeft) || (hitRight)) 
```

向右移动时，您只关心`hitRight`. 向左移动时，您只关心`hitLeft`.

所以试试

```
if (touchedRight? hitLeft: hitRight) 
```

这也将解决多个外星人可以同时撞墙的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:39:01.640

我不确定，但我相信太空入侵者，如果你杀死除了最左边的所有列，它在切换方向之前不会完全移动到屏幕的右侧。

所以我建议你创建一个名为 Invader 的 Sprite 的衍生物：

```
class Invader : Sprite
{
    readonly float distanceFromCenterHorizontal;

    public Invader(float distanceFromCenterHorizontal)
    {
        this.distanceFromCenterHorizontal= distanceFromCenterHorizontal;
    }

    public void UpdatePosition(Point center)
    {
        this.Position.X = center.X + distanceFromCenterHorizontal;
        this.Position.Y = center.Y;
    }
}

// global variables:
Point center = ....
bool moveLeft = false;

void createInvaders()
{
    int invaderWidth = 20; // whatever your value is
    float columnCenter = ((float) columnMax) / 2 * invaderWidth;

    for(var column = 0; column < columnMax ; column++)
    {
        float invaderX = (column * invaderWidth);

        float distanceFromCenterHorizontal = invaderX - columnCenter;

        for(var row = 0; row < rowMax; row ++)
        {
            Invader invader = new Invader(distanceFromCenterHorizontal);
            invader.Position.Y = row * invaderHeight // Needs adjustment here!
        }
    }
}

void update()
{
    if(center.X == screenWidth) moveLeft = true;
    else if(center.X <= 0) moveLeft = false;

    center.X += moveLeft? -step : step;

    foreach(var invader in invaders) invader.UpdatePosition(center);
} 
```

你想移动“centerPoint”，所有的入侵者都根据新的中心更新。

我不确定 XNA 是使用双精度值还是浮点值，所以你可能需要调整它。

然后，您可以轻松扩展它以创建一些向上/向下摆动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:27:01.507

所以我做了一个新的矩形，叫做“边界”，它和外星人一样宽，移动也和外星人一样。并让它工作！（一半）。它向右移动，直到碰到右侧，然后向左移动，但一直向左移动，永远不会回到右侧。那么这次我哪里错了？

```
if (xPos % step == 0)
            {
                if (!isDescending)
                {

                    for (int k = 0; k < sprites.Count; k++)
                    {
                        Sprite sprite = sprites[k];
                        sprite.position.X += step;
                    }

                    if (bounds.Right == screenWidth || bounds.Left == 0)
                    {
                        touchedRight = !touchedRight;
                        step *= -1;
                    }

                    if (!touchedRight) bounds.X += step;
                    if (touchedRight) bounds.X -= step;

                    // for (int k = 0; k < sprites.Count; k++)
                    // {
                    //    Sprite sprite = sprites[k];

                    //    bool hitLeft = sprite.position.X == 0;
                    //    bool hitRight = sprite.rect.Right == screenWidth;
                    //    if ((hitLeft) || (hitRight))
                    //    {
                    //        touchedRight = !touchedRight;
                    //        isDescending = true;
                    //    }
                    // }
                } 
```

# php - 如何在 html5、javascript 或 php 中创建进度条？

> ID：15989828
> 
> 赞同：0
> 
> 时间：2013-04-13T16:05:57.200
> 
> 标签：php, javascript, html, ajax, progress-bar

我已经有了这个代码，但是我想要的不是数字上传进度，而是一个图形栏...我在这里也注意到了一个问题...如果我点击提交，即使没有选择文件，progressNumber 也只会显示..但是如果选择一个文件，progressNumber 不会显示..

```
 <script type="text/javascript">

function fileSelected() {

        var file = document.getElementById('fileToUpload').files[0];
        if (file) {
          var fileSize = 0;
          if (file.size > 1024 * 1024)
            fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';

          else
            fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';

          document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
          document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
         // document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
        }
      }

      function uploadFile() {

        var fd = new FormData();
        fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCanceled, false);
      xhr.open("POST", "thankyou.php");
      xhr.send(fd);

return false;
      }

      function uploadProgress(evt) {

       if (evt.lengthComputable) {
          var percentComplete = Math.round(evt.loaded * 100 / evt.total);

         document.getElementById('progressNumber').innerHTML = percentComplete.toString() + ' % uploading file';

         document.getElementById('progress').style.width = percentComplete + '%';

        }
        else {
          document.getElementById('progressNumber').innerHTML = 'unable to compute';
        }
      }

      function uploadComplete(evt) {
        /* This event is raised when the server send back a response */
       // alert(evt.target.responseText);
      }

      function uploadFailed(evt) {
        alert("There was an error attempting to upload the file.");
      }

      function uploadCanceled(evt) {
     //   alert("The upload has been canceled by the user or the browser dropped the connection.");
      }

 </script> 
```

对于 html 表单和输入标签

```
<form id="form1" name = "myform"  onsubmit = "return uploadFile()" enctype="multipart/form-data" action = "thankyou.php"  method="post"  id = "form1" >

<div class="row">
      <label for="fileToUpload">Upload File</label>
      <input type="file" name="fileToUpload" id="fileToUpload" onchange="fileSelected();" class = "dropzone" required/>
    </div>
<p>

    <div id="fileName"></div>
    <div id="fileSize"></div>
    <div id="fileType"></div>
<div id="progressNumber"></div>

<div id="progress-bg" style="width:200px;height:10px;background:#FFF">
    <div id="progress" style="height:10px;background:#000"></div>
</div>

    <input type="submit"  name="uploadFiles" value="Submit"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:15:10.553

创建具有固定宽度的进度条背景或容器，并将进度条 div 放入其中：

```
<div id="progress-bg" style="width:200px;height:10px;background:#FFF">
    <div id="progress" style="height:10px;background:#000"></div>
</div> 
```

在进度事件上，只需将进度条的宽度设置为完成的百分比。

```
document.getElementById('progress').style.width = percentComplete + '%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:12:31.680

HTML5中有一个特殊的标签：

```
<progress value="0.25" id="progressNumber">25%</progress> 
```

“25%”只会在不支持进度标签的浏览器中显示。您还可以使用另一种语法：

```
<progress value="25" max="100">25 out of 100</progress> 
```

在您的情况下，您可以使用第一种语法并更改行

```
document.getElementById('progressNumber').innerHTML = percentComplete.toString() + ' % uploading file'; 
```

到线

```
document.getElementById('progressNumber').innerHTML = percentComplete.toString() + ' % uploading file';
document.getElementById('progressNumber').value = evt.loaded/evt.total; 
```

# c - 在 MS Windows 资源管理器中隐藏可移动驱动器？

> ID：15989833
> 
> 赞同：2
> 
> 时间：2013-04-13T16:06:24.213
> 
> 标签：c, winapi, systems-programming

如何在 MS Windows 资源管理器中向用户隐藏可移动驱动器，例如闪存？
我想对用户隐藏可移动驱动器，然后对其进行一些操作，例如删除一些文件或从中读取一些文件，然后将驱动器显示给用户。
我试图阻止驱动器，但是当它被阻止时，我无法对其进行任何操作，所以我改变了我的方法，只对用户隐藏驱动器。
如果需要，我必须使用纯 c 和 win32 api 来执行此操作。
非常感谢，祝你好运。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:34:03.803

这应该很简单。有一个 32 位数字的注册表项，其中应显示驱动器的位置为 1。如果您可以提取所需的驱动器号，那么它应该像编辑此注册表项一样简单（我相信这可以使用 winapi 完成）。

[http://genesisdatabase.wordpress.com/2010/10/12/reading-and-writing-registry-in-windows-using-winapi/](http://genesisdatabase.wordpress.com/2010/10/12/reading-and-writing-registry-in-windows-using-winapi/)

以上是编辑注册表的winapi函数。只需在提取字母后将其更改为隐藏驱动器即可。

然后编辑这个值：

[http://www.howtogeek.com/howto/windows-vista/hide-drives-from-your-computer-in-windows-vista/](http://www.howtogeek.com/howto/windows-vista/hide-drives-from-your-computer-in-windows-vista/)

然后再次更改注册表值以显示驱动器。您不想取消映射驱动器，因为这是与隐藏驱动器不同的概念。

# java - 基本 Java：判断双精度数是否为整数的方法

> ID：15989834
> 
> 赞同：1
> 
> 时间：2013-04-13T16:06:27.903
> 
> 标签：java, int, double, isinteger

我是一名初级程序员，我需要一个方法来返回双精度数是否为整数。当数字太大而无法容纳 int 时，就会出现问题。

这是我所拥有的：

```
private static boolean isInteger(double n){
    int ni = (int) n;
    double nd = (double) ni;
    if (nd==n)
        return true;
    return false;
} 
```

假设我输入了 143215890634.0。它将返回 false，因为 int 不能存储那么多数字。

如何允许 int（或其他类）存储更多数字，或者有没有更好的方法来确定 double 是否是 int 而无需像这样比较？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:12:34.307

Well`long`拥有比 更多的数字`int`。当您超出 的范围时`long`，*所有* `double`值都是整数（并且间隔大于 1）。所以你可以使用类似的东西：

```
private static boolean isInteger(double n) {
    if (n > (double) Long.MAX_VALUE ||  n < (double) Long.MIN_VALUE) {
        return true;
    }
    long asLong = (long) n;
    return n == (double) asLong;
} 
```

有一些替代方法可以确定按位表示并检查指数 - 但它们会更复杂，至少要理解。

请注意，检查二进制浮点中的*确切值通常是一个坏主意。*相反，您可能想要检查`double`与最接近的整数的接近程度，并具有某种容差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T16:28:52.633

尝试

```
boolean isInteger(double d) {
    return d % 1 == 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:11:16.067

**将其与`Integer.MAX_VALUE`.** 如果它更小 - 假设它没有分数，它将适合整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T16:13:38.877

要存储更大的数字，您将不得不使用它`long`。至于比较，您也许可以这样做`num == Math.round(num)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T16:18:34.540

我想，这会比 Math.round() 更有效，因为它避免了类型提升：

```
 double d1 = 143215890634.0, d2 = 143215890634.001;
    System.out.println(d1 == Math.floor(d1));
    System.out.println(d2 == Math.floor(d2)); 
```

这有效，如果使用“整数”，您的意思不是实际类型“int”，而是“小数点后没有位置的数字”。

# php - curl_init() 未定义 - 通常怀疑不是罪魁祸首

> ID：15989839
> 
> 赞同：0
> 
> 时间：2013-04-13T16:06:48.937
> 
> 标签：php, iis

我正在尝试运行 curl_init() 并且我得到“未定义”。

在 Windows 7、PHP 5.3.24 上运行 IIS

检查了所有常见问题：

1.  扩展目录设置正确。

2.  正在加载 cURL。

3.  扩展在 IIS 中显示为已启用。

PHPInfo() 的输出

启用 cURL 支持
cURL 信息 7.29.0
Age 3
功能
AsynchDNS 是
Debug 否
GSS-Negotiate 是
IDN 否
IPv6 是
Largefile 是
NTLM 是
SPNEGO 是
SSL 是
SSPI 是
krb4 否
libz 是
CharConv 否
协议 dict、file、ftp、ftps、gopher、 http、https、imap、imaps、ldap、pop3、pop3s、rtsp、scp、sftp、smtp、smtps、telnet、tftp
主机 i386-pc-win32
SSL 版本 OpenSSL/0.9.8y
ZLib 版本 1.2.7
libSSH 版本 libssh2/1.4 .2

我不明白为什么它找不到该功能。有任何想法吗？

# java - 正则表达式删除身份证号码

> ID：15989842
> 
> 赞同：0
> 
> 时间：2013-04-13T16:06:59.993
> 
> 标签：java, regex, numbers

我有一个大文本文件，正在寻找一个能够删除 8-10 个字符之间的所有 id 编号并将它们保存为逗号分隔的正则表达式。

文件的一行如下：

```
{"follow_request_sent": null, "profile_use_background_image": true, "id": 340671834, "description": "This is The Official Fans Page Of One Direction! We will update you with the latest news 24/7! Follow  https://t.co/ZJLh8usZ80 and follow @itsdirectlieber", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/3057650709/cc214d87e8b65324677f3a99bdff3bd4_normal.jpeg", "profile_sidebar_fill_color": "E8EAEB", "profile_text_color": "949494", "followers_count": 353767, "protected": false, "location": "Brazil", "default_profile_image": false, "id_str": "340671834", "status": {"favorited": false, "contributors": null, "truncated": false, "text": "Ill make a test now, bye.", "created_at": "Fri Apr 12 11:27:01 +0000 2013", "retweeted": false, "in_reply_to_status_id": null, "coordinates": null, "id": 322672198861090816, "source": "<a href=\"http://twitter.com/download/android\" rel=\"nofollow\">Twitter for Android</a>", "in_reply_to_status_id_str": null, "place": null, "id_str": "322672198861090816", "in_reply_to_screen_name": null, "retweet_count": 10, "geo": null, "in_reply_to_user_id_str": null, "in_reply_to_user_id": null}, "utc_offset": -10800, "statuses_count": 22301, "profile_background_color": "FFFFFF", "friends_count": 60311, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/837595304/7352cbbc52911b16816807c7fc39824d.png", "profile_link_color": "E80C38", "profile_image_url": "http://a0.twimg.com/profile_images/3057650709/cc214d87e8b65324677f3a99bdff3bd4_normal.jpeg", "notifications": null, "geo_enabled": false, "profile_banner_url": "https://si0.twimg.com/profile_banners/340671834/1365451996", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/837595304/7352cbbc52911b16816807c7fc39824d.png", "name": "One Direction", "lang": "en", "following": null, "profile_background_tile": false, "favourites_count": 301, "screen_name": "1DFAMlLY", "url": "http://www.facebook.com/1DFAMlLY", "created_at": "Sat Jul 23 02:36:18 +0000 2011", "contributors_enabled": false, "time_zone": "Brasilia", "profile_sidebar_border_color": "FFFFFF", "default_profile": false, "is_translator": false, "listed_count": 1317} 
```

我正在尝试删除 id 并将其保存为单独的逗号分隔字符串

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:36:19.407

您可以使用`{N,M}`运算符来定义正则表达式中的字符范围。例如，`\\d{8,10}`可用于查找 8-10 个字符之间的数字。

为了查找所有 id，您使用以下正则表达式：

```
String input = "your string here";
Pattern pattern = Pattern.compile("\"id\":\\s*(\\d{8,10})\\s*[,}]");
Matcher matcher = pattern.matcher(input);

while (matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

但是，您应该考虑使用 JSON 解析器。它更适合这项工作，并且将来可能会为您省去一些麻烦。

# c - 字符串数组的C数组

> ID：15989844
> 
> 赞同：4
> 
> 时间：2013-04-13T16:07:00.783
> 
> 标签：c, arrays, string, pointers

在 C 中，我需要静态预分配一个数字数组，每个数字都与不同的字符串数组相关联。像下面这样的代码是否可以解决问题：

```
struct number_and_strings {
  int  nnn;
  char **sss;
}

static struct number_and_strings my_list[] = {
  {12, {"apple","banana","peach","apricot","orange",NULL}},
  {34, {"tomato","cucumber",NULL}},
  {5,  {"bread","butter","cheese",NULL}},
  {79, {"water",NULL}}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T16:19:40.667

`sss`是指向指针的指针。所以指针数组不能直接分配给它。您可以使用复合文字（这是 C99 功能）进行如下分配：

```
static struct number_and_strings my_list[] = {
      {12, (char*[]){"apple","banana","peach","apricot","orange",NULL}},
      {34, (char*[]){"tomato","cucumber",NULL}},
      {5,  (char*[]){"bread","butter","cheese",NULL}},
      {79, (char*[]){"water",NULL}}
    }; 
```

# listview - JQueryMobile 按钮/列表视图重叠

> ID：15989845
> 
> 赞同：1
> 
> 时间：2013-04-13T16:07:01.767
> 
> 标签：listview, jquery-mobile, button

根据我的经验，`<ul>`按钮上方或下方的右侧`<a data-role="button">..</a>`会导致它们重叠。我的解决方法是大量使用`<br>`'s，但这似乎是一个破碎的工作流程。

有谁知道这个重叠问题的解决方法？

这是一个展示我的问题的[JsFiddle 。](http://jsfiddle.net/mbef8/)

这是小提琴中使用的代码：

```
 <div data-role="content">
        <ul data-role="listview" data-theme="b">
            <li>Hello</li>
            <li>World</li>
        </ul>
        <a data-role="button" href="#">Give me my space!</a>

        <ul data-role="listview" data-theme="b">
            <li>Boring</li>
            <li>workaround</li>
        </ul>
        <BR>
        <a data-role="button" href="#">Give me my space!</a>
    </div> 
```

更新：我玩了更多，并使列表视图插入修复了重叠。尽管如此，如果有人知道如何，我想要一种避免重叠而不插入的方法！ [新的 JsFiddle](http://jsfiddle.net/mbef8/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:24:19.287

在 jQuery Mobile 的 CSS 中，它看起来像是一个不正确的边距覆盖。

您可以通过指定来解决它：

```
.ui-content .ui-listview, .ui-panel-inner .ui-listview {
    margin-bottom: 1em;
} 
```

但是，这可能与其他 jQuery Mobile 小部件发生冲突（除非边距覆盖是一个错误）。

[您可以在这个更新的 fiddle](http://jsfiddle.net/mbef8/8/)中看到结果。

# ruby-on-rails - 如何在 Ember js 中获取用户字段有很多关联

> ID：15989849
> 
> 赞同：2
> 
> 时间：2013-04-13T16:07:30.580
> 
> 标签：ruby-on-rails, ember.js

我有两个模型用户和食谱。我想获取配方页面上的用户字段和用户页面上每个配方中的用户名。我不知道该怎么做。在 Rails 中，我有两个在用户和配方之间有很多关联。我添加了从 rails 获得的 json 数组的示例。

我的 json 用户数组

```
user: {
  id: 1,
  name: "ejiqpep",
  email: "ejiqpep@gmail.com",
  recipe_ids: [
    1,
    2
  ],
  box_recipe_ids: [
    1,
    2
  ]
} 
```

我的 json 配方数组

```
recipe: {
  id: 1,
  title: "recipe01",
  about: "about01",
  ingredients: "ingredients01",
  steps: "steps01",
  visibility_type: true,
  slug: "recipe01",
  user: {
    id: 1,
    name: "ejiqpep",
    email: "ejiqpep@gmail.com",
    recipe_ids: [
      1,
      2
    ],
    box_recipe_ids: [
      1,
      2
    ]
  }
} 
```

用户.js.coffee

```
App.User = DS.Model.extend
  name: DS.attr('string')
  email: DS.attr('string')
  recipes: DS.hasMany('App.Recipe')
  box_recipes: DS.hasMany('App.Recipe') 
```

recipe.js.coffee

```
App.Recipe = DS.Model.extend
  user: DS.belongsTo('App.User')
  title: DS.attr('string') 
```

user.handlebars （我想在每个配方中获取用户名）

```
<h1>{{name}}</h1>
<p><b>Email:</b> {{email}}</p>

<h3>User recipes</h3>
{{#each recipe in recipes}}
  <div>
    <span>{{recipe.id}}</span>
    <span>!!!I want to show username here!!!</span>
    <span>{{#linkTo recipe recipe}} {{recipe.title}} {{/linkTo}}</span>
  </div>
{{/each}}

<h3>User box_recipes</h3>
{{#each fav in box_recipes}}
  <div>
    <span>{{fav.id}}</span>
    <span>!!!I want to show username here!!!</span>
    <span>{{#linkTo recipe fav}} {{fav.title}} {{/linkTo}}</span>
  </div>
{{/each}} 
```

recipe.handlebars

```
<h1>{{title}}</h1>
<p>User {{user.name}}</p>  # I want to show username here!!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:48:46.497

我不知道它是否有效......但试一试：

更新：

```
{{#each recipes}}
  <div>
    <span>{{id}}</span>
    <span>{{../name}}!!!I want to show username here!!!</span>
    <span>{{#linkTo recipe this}} {{title}} {{/linkTo}}</span>
  </div>
{{/each}} 
```

# authentication - 将登录提供程序添加到流星

> ID：15989851
> 
> 赞同：1
> 
> 时间：2013-04-13T16:07:38.050
> 
> 标签：authentication, meteor

我需要使用内部用户管理系统来验证我的用户。该系统还保存用户对组、角色和租户的成员资格，这在进行授权时最有用。

我查看了[帐户角色](https://github.com/vladikoff/meteor-accounts-persona)的代码，但它对我不起作用。因此，我推断我做错了什么。

在服务器上有一个新的 LoginHandler：

```
Meteor.startup( function () {
   var config = Accounts.loginServiceConfiguration.findOne( {service: 'sertal'} );
   if ( !config ) {
      Accounts.loginServiceConfiguration.insert( { service: 'sertal' } );
   }
} );

Accounts.registerLoginHandler( function ( options ) {
   if ( !options.sertal && !options.assertion )
      return undefined; // don't handle

   var url = "http://dev.sertal.ch/checkCredential";
   var request = {
      params: {
         uname: options.email,
         pword: options.password
      }
   };
   var result = Meteor.http.get( url, request );

   if ( result.statusCode !== 200 ) {
      throw new Meteor.Error( Accounts.LoginCancelledError.numericError, 'Sertal Login Failed' );
   } else {
      var user = result.data.userrec;
      user.groups = result.data.grprec;
      user.id = user._id;
      return Accounts.updateOrCreateUserFromExternalService( 'sertal', user );
   }

} ); 
```

在客户端上，我在按下登录按钮后使用此代码：

```
Accounts.callLoginMethod( {
   methodName: 'login',
   methodArguments: {sertal: true,
      email: $( '#sertal-email' ).val(),
      password: $( '#sertal-password' ).val(),
      resume: false
   },
   userCallback: function ( error ) {
      if ( error ) {
         console.log( "error: " + error );
      } else {
         $( "#sertalLoginFormDiv" ).dropdown( 'toggle' );
      }
   }
} ); 
```

但它不会触发 LoginHandler。一定有什么东西不见了，但我想不通。

我找不到有关该主题的任何文档。答案也可能是指出一些解释该过程的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T16:41:06.873

根据我的测试，methodArguments 必须是一个对象数组。

此外，从我在日志中看到的内容来看，如果 methodArguments 对象在对象的根目录中包含密码，则 Meteor 会引发错误，并显示“登录失败 { type: 'password',...”

我能够通过将所有处理程序的参数作为对象的一部分来完成这项工作。像这样，在客户端：

```
loginRequest = {myLogin:{email: email, password: password}};
Accounts.callLoginMethod({
    methodArguments: [loginRequest],
    userCallback: callback
}); 
```

在客户端执行时，meteor 调用我的服务器代码：

```
Accounts.registerLoginHandler( function("someName", loginRequest{
    if(loginRequest.myLogin){
        // I get the loginRequestObject, and can attempt to sign in...
    }
}); 
```

注意，我使用的是 Meteor 1.0。

# ado.net - 在 ado.net 的帮助下从数据集中检索单行

> ID：15989853
> 
> 赞同：0
> 
> 时间：2013-04-13T16:07:53.377
> 
> 标签：ado.net

我想从数据集中检索最后一行到第二行和第三行

```
var lastUploaded = ds.Tables["title"].AsEnumerable().OrderByDescending(r => r.Field<int>("video_id")).Take(3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:09:54.350

以下答案给出第二行：

```
ds.Tables["title"].Rows[ds.tables["title"].rRows.count-2][" Column name here"].ToString(); 
```

第三行：

```
ds.Tables["title"].Rows[ds.tables["title"].rRows.count-3][" Column name here"].ToString(); 
```

等等...

# javascript - 在 svg 中：平移与位置 x 和 y

> ID：15989854
> 
> 赞同：27
> 
> 时间：2013-04-13T16:08:19.863
> 
> 标签：javascript, svg, d3.js

当我想定位简单的对象时，例如`rect`或者`line`应该使用`transform`属性还是`x`和`y`属性？

```
// this
d3.selectAll('rect')
    .attr('x', d => d)
    .attr('y', 0)

// or this?
d3.selectAll('rect')
    .attr("transform", d => `translate(${d}, 0)`); 
```

性能差异是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-13T20:28:06.647

在 SVG`transform`中不是硬件加速的。对于单个元素，它们的性能大致相同（根据我的经验）。但是，我使用`transform`更多来移动事物，因为在 SVG 中并非所有元素都具有`x`or`y`属性，请考虑...

```
<line x1="0" y1="0" x2="100" y2="100" />
<circle cx="100" cy="100" r="100" />
<path d="M 0 0 L 100 100" />
<rect x="0" y="0" width="100" height="100" /> 
```

如果您不使用`transform`. 一个`transform`确实更快的领域是移动大量元素，如果你有......

```
<g transform="translate(100, 100)">
  <line x1="0" y1="0" x2="100" y2="100" />
  <circle cx="100" cy="100" r="100" />
  <path d="M 0 0 L 100 100" />
  <rect x="0" y="0" width="100" height="100" />
</g> 
```

与单独移动每个元素相比，它的处理强度要小

# javascript - 如何使用 Linq2IndexedDB 插入对象

> ID：15989858
> 
> 赞同：0
> 
> 时间：2013-04-13T16:08:24.630
> 
> 标签：javascript, unit-testing, mocha.js, karma-runner, linq2indexeddb

我正在通过单元测试（通过[Mocha](http://visionmedia.github.io/mocha/)）尝试 Linq2IndexedDB（v. 1.0.21），但我什至无法进行简单的插入工作。发生的情况（在 Google Chrome 下运行时）是在 Linq2IndexedDB.js 的第 1535 行引发内部异常：

> `Uncaught TypeError: Cannot read property 'version' of undefined`

我的单元测试代码如下所示；基本上有一个测试，“它可以添加对象”：

```
"use strict";

define(["db", "linq2indexeddb", "chai", "underscore", "stacktrace"], function (db, linq2indexeddb, chai, _,
    printStacktrace) {
    var should = chai.should();

    describe("db", function () {
        var _db;

        function fail(done, reason, err) {
            if (typeof reason === "string") {
                reason = new Error(reason);
            }
            if (!reason) {
                console.log(typeof done, typeof reason);
                reason = new Error("There's been an error, but no reason was supplied!");
                var st = printStacktrace({e: reason});
                console.log(st);
            }
            if (typeof done !== "function") {
                throw new Error("Was not supplied a function for 'done'!");
            }
            done(reason);
        }

        // Bind done as the first argument to the fail function
        function bindFail(done, reason) {
            if (typeof done !== "function") {
                throw new Error("done must be a function");
            }
            return _.partial(fail, done, reason);
        }

        beforeEach(function (done) {
            _db = linq2indexeddb("test", null, true);
            _db.deleteDatabase()
            .done(function () {
                _db.initialize()
                .done(done)
                .fail(bindFail(done, "Initializing database failed"));
            })
            .fail(bindFail(done, "Deleting database failed"));
        });

        it("can add objects", function (done) {
            console.log("Starting test");
            var refObj = {"key": "value"};
            _db.linq.from("store").insert(refObj, "Key")
            .done(function () {
                console.log("Added object successfully");
                done();
            })
            .fail(bindFail(done, "Inserting object failed"));
        });
    });
}); 
```

我在这里做错了什么，还是 Linq2IndexedDB（或两者）中存在错误？

我[在 Github 上](https://github.com/aknuds1/testlinq2indexeddb)建立了一个相应的测试项目，并配有[Karma](http://karma-runner.github.io/)配置，因此您可以轻松运行包含的测试。Karma 配置假定您已安装 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:45:08.193

我发现了几个问题：

1.  我弄错了 Linq2IndexedDB 工作人员的位置，应该是：`'/base/lib/Linq2IndexedDB.js'`
2.  使用外键插入对象不起作用。

我最终在 IE 10 和 Chrome 上进行了插入工作，尽管我仍在为 PhantomJS 苦苦挣扎。为了让它在 Chrome 下工作，我必须明确指定我的模式，我怀疑这是由于 Linq2IndexedDB 中的一个错误。我的工作解决方案如下：

## 测试：

```
"use strict";

define(["db", "linq2indexeddb", "chai", "underscore", "stacktrace"], function (db, linq2indexeddb, chai, _,
    printStacktrace) {
    var should = chai.should();

    describe("db", function () {
        var _db;

        function fail(done, reason, err) {
            console.log("err:", err);
            if (typeof reason === "string") {
                reason = new Error(reason);
            }
            if (!reason) {
                console.log(typeof done, typeof reason);
                reason = new Error("There's been an error, but no reason was supplied!");
                var st = printStacktrace({e: reason});
                console.log(st);
            }
            if (typeof done !== "function") {
                throw new Error("Was not supplied a function for 'done'!");
            }
            done(reason);
        }

        // Bind done as the first argument to the fail function
        function bindFail(done, reason) {
            if (typeof done !== "function") {
                throw new Error("done must be a function");
            }
            return _.partial(fail, done, reason);
        }

        beforeEach(function (done) {
            // Linq2IndexedDB's web worker needs this URL
            linq2indexeddb.prototype.utilities.linq2indexedDBWorkerFileLocation = '/base/lib/Linq2IndexedDB.js'

            _db = new db.Database("test");

            console.log("Deleting database");
            _db.deleteDatabase()
            .done(function () {
                console.log("Initializing database");
                _db.initialize()
                .done(done)
                .fail(bindFail(done, "Initializing database failed"));
            })
            .fail(bindFail(done, "Deleting database failed"));
        });

        it("can add objects", function (done) {
            console.log("Starting test");
            var refObj = {"key": "value"};
            _db.insert(refObj)
            .done(function () {
                done();
            })
            .fail(bindFail(done, "Database insertion failed"));
        });
    });
}); 
```

## 执行：

```
define("db", ["linq2indexeddb"], function (linq2indexeddb) {
    function getDatabaseConfiguration() {
        var dbConfig = {
            version: 1
        };
        // NOTE: definition is an array of schemas, keyed by version;
        // this allows linq2indexedDb to do auto-schema-migrations, based upon the current dbConfig.version
        dbConfig.definition = [{
            version: 1,
            objectStores: [
            { name: "store", objectStoreOptions: { keyPath: 'key' } },
            ],
            defaultData: []
        },
        ];

        return dbConfig;
    }

    var module = {
        Database: function (name) {
            var self = this;

            self._db = linq2indexeddb(name, getDatabaseConfiguration());

            self.deleteDatabase = function () {
                return self._db.deleteDatabase();
            };

            self.initialize = function () {
                return self._db.initialize();
            };

            self.insert = function (data) {
                return self._db.linq.from("store").insert(data);
            };
        }
    };
    return module;
}); 
```

**编辑：** 它在 PhantomJS 下不起作用的原因是我在 Linq2IndexedDB 中启用了调试日志记录，出于某种原因，这似乎会在某些时候堵塞 Karma 的管道。关闭调试日志后，所有配置都有效。

# php - 如何使用分页在默认 URL 中显示第一个页码

> ID：15989861
> 
> 赞同：2
> 
> 时间：2013-04-13T16:08:36.773
> 
> 标签：php, codeigniter, url, pagination

我正在使用 CodeIgniter 分页库来构建我的页面链接。我为我的分页定义了一个配置数组变量，如下所示：

```
$config['use_page_numbers'] = true; 
```

我所有的 URL 看起来都像`http://domain.com/class/function/#`（其中 # 是我所在的页码）。但是，第一页看起来像`http://domain.com/class/function`并且缺少第一页（#1）。

如果 URL 中没有页码，CodeIgniter 中是否有显示第一页的内置方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:19:39.210

是的，使用路线。在您的`config/routes.php`文件中添加以下内容：

```
$route['class/function'] = 'class/function/1'; 
```

这样，如果缺少页码，它将假定该页码`1`在 URL 中，因此它将显示页面 #1

# android - 在自己的应用程序中接收 GTalk 消息？

> ID：15989863
> 
> 赞同：6
> 
> 时间：2013-04-13T16:08:42.837
> 
> 标签：android, google-talk

我是 Android 开发的新手。我是 Android 的 Inbuilt Talk 应用程序的忠实粉丝，但我讨厌它缺乏可定制的通知，所以我决定为它开发一个应用程序。

我的要求是一个可以监视 GTalk 并在收到消息时显示预先定制的通知的应用程序。

请注意，我不希望我的应用向用户询问 GTalk 用户名或密码。我知道 Asmack 库，但它对 IM 客户端更有用，我的要求只是获取传入的消息事件。（类似于 SMS 的 BroadcastReceiver 吗？）

是否可以像检索 SMS 消息一样检索 Gtalk 消息`BroadcastReceiver`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:20:41.783

没有记录和支持的方法可以做到这一点，我真诚地希望谷歌没有留下一些无证、不受支持和不安全的方法来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:20:49.500

虽然没有记录，但 Google 服务框架公开了允许您访问 Google Talk 内容提供程序的权限（GTalk Super Notifier 使用其中一种来发挥其魔力）。但是，我找不到有关该内容提供程序的任何文档，因此您必须对其进行逆向工程。

以下是相关权限：

```
+ group:android.permission-group.MESSAGES
  + permission:com.google.android.providers.talk.permission.READ_ONLY
    package:com.google.android.gsf
    label:read instant messages
    description:Allows apps to read data from the Google Talk content provider.
    protectionLevel:dangerous
  + permission:com.google.android.providers.talk.permission.WRITE_ONLY
    package:com.google.android.gsf
    label:write instant messages
    description:Allows apps to write data to the Google Talk content provider.
    protectionLevel:dangerous 
```

顺便说一句，Google 会以 protectionLevel="dangerous" 公开权限而不记录它们的使用，这很奇怪。

# ios - UITableView 不滚动第一个单元格

> ID：15989865
> 
> 赞同：1
> 
> 时间：2013-04-13T16:08:59.257
> 
> 标签：ios, uitableview

我的`UITabelView`. 我的第一个单元格（在第一部分）代表一些标题。当我滚动时，我可以让这个单元格不移动`UITableView`，所以其他内容（单元格）会滚动但不是首先滚动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T17:18:31.713

不，这不受支持。表格视图中的所有内容都随着表格视图滚动。与您想要的最接近的是普通表中的节标题。当部分滚动时，部分标题保持在屏幕顶部，但它与它的部分保持一致。

您唯一的选择是使用 a`UIViewController`而不是 a `UITableViewController`。将您的标题视图添加到顶部，然后`UITableView`在标题视图下方添加您自己的。您将需要连接所有内容，以便视图控制器像表格视图控制器一样工作。

# java - 从 Thread 设置 imageView

> ID：15989869
> 
> 赞同：2
> 
> 时间：2013-04-13T16:09:10.947
> 
> 标签：java, android

我正在使用朋友下载图片并设置在`ImageView`; 但是，我收到此错误：

> 只有创建视图层次结构的原始线程才能接触其视图。

这是我的代码。

```
ImageView profilePicture =....
Thread thread = new Thread() {
    @Override
    public void run() {
        profilePic.setImageBitmap(image_profile);
    }
};
thread.start(); 
```

image_profile`Bitmap`是一个有效的`Bitmap`文件。（我通过调试检查了它。）

该线程在`OnCreate`方法中运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:12:16.990

您不能直接从`Thread`. 相反，使用`runOnUiThread()`或等效。

**替换这个**：

```
profilePic.setImageBitmap(image_profile); 
```

**有了这个**：

```
YourActivityName.this.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        profilePic.setImageBitmap(image_profile);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T16:12:08.380

您不能在另一个线程上更新 ui。**在主 ui 线程上更新 ui，**如下所示

```
Thread thread = new Thread()
{
    @Override
    public void run() {
    runOnUiThread(new Runnable() //run on ui thread
    {
        public void run() 
        { 
            profilePic.setImageBitmap(image_profile);

        }
    });
    }
    };
   thread.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T16:12:50.990

问题不在于`Bitmap`. 问题是您试图`UI`在单独的`Thread`. 使用您提供的代码，没有理由使用`Thread`. 删除`Thread`. 如果您正在做其他未显示的事情，那么您可以使用[`runOnUiThread`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)或[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)更新`ImageView`任何方法，除非`doInBackground()`它不在`UI`

# php - 文本字段数组和while循环

> ID：15989878
> 
> 赞同：0
> 
> 时间：2013-04-13T16:09:46.273
> 
> 标签：php, html

我如果有这样的输入，但是这两个输入会重复多次。所以它可能是：

```
 <input name="Gpodaciogolubu[]" type="text">
    <input name="Gpodaciogolubu_godina[]" type="number">

    <input name="Gpodaciogolubu[]" type="text">
    <input name="Gpodaciogolubu_godina[]" type="number">

    <input name="Gpodaciogolubu[]" type="text">
    <input name="Gpodaciogolubu_godina[]" type="number">
... 
```

是否可以使用 while 或 foreach 循环同时获取两个值并将其插入数据库中，例如：

```
"INSERT INTO database (field1, filed2) VALUES ('$_POST["Gpodaciogolubu"]','$_POST["Gpodaciogolubu_godina"]')" 
```

我在 PHP/MySQL 中编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:41:13.877

首先构建一个要插入的行数组：

```
$rows = []; // or array() in PHP 5.3 and older
$l = count($_POST['Gpodaciofolubu']);
for( $i=0; $i<$l; $i++) {
    $rows[] = "("
        ."'".mysql_real_escape_string($_POST['Gpodaciofolubu'][$i])."', "
        .intval($_POST['Gpodaciofolubu_godina'][$i]) // since you have `type="number"`
    .")";
} 
```

然后批量插入它们：

```
mysql_query("insert into `database` (`field1`, `field2`) values ".implode(",",$rows)); 
```

当然，这假设您正在使用`mysql`扩展程序。这个假设是基于完全没有尝试清理您的输入。

![xkcd](https://imgs.xkcd.com/comics/exploits_of_a_mom.png)

# vb.net - 您不能添加或更改记录，因为需要相关记录 vb.net

> ID：15989880
> 
> 赞同：0
> 
> 时间：2013-04-13T16:09:53.883
> 
> 标签：vb.net, ms-access, relationships

我知道这个问题已经被问过很多次了，但是每次人们遇到的情况都略有不同，或者缺乏足够的细节，或者对问题的解释缺乏我能理解解决方案的具体细节。

所以这是我的事。我有一个名为“StatesComboBox”的组合框，它采用接收客户数据的形式。此表单绑定到 ms access 数据库文件中名为“States”的表。因此，该表中的任何状态都会反映在 StatesComboBox 中。

在我的访问数据库文件中，我有一个名为“CustomerData”的存储客户数据的表。其中一个字段称为“customerstate”，它存储用户所做的“StatesComboBox”选择。

我已通过关系将“States”表连接到“CustomerData”表。它将States 表连接到“customerstate”字段。这是一对多的关系，我已经检查了强制引用完整性、级联添加和级联删除选项。

现在，当我在表单中输入数据并点击我的注册按钮时，我收到上述消息 - “您无法添加或更改记录，因为表 'States' 中需要相关记录”。但是当我返回访问时，删除“States”和“CustomerData”之间的关系，数据存储得很好。

但我需要对选定的州实施限制......我做错了什么？我能做些什么来解决这个问题？谢谢你。

# ruby - FFI - 使用参数类型 FILE 附加函数？

> ID：15989884
> 
> 赞同：0
> 
> 时间：2013-04-13T16:10:33.717
> 
> 标签：ruby, ffi, ruby-ffi

如何在 Ruby 中使用 FFI 包装一个接受 FILE 类型参数的函数？

```
int fprintf ( FILE * stream, const char * format, ... ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:45:44.237

不是 type `FILE`，而是`FILE *`. 就像其他`:pointer`人一样。

如果您需要构建一个结构来检查指向的内存的内容，您需要`FILE`在系统中找到 的定义`stdio.h`并将其复制为 FFI 结构。

# python - dict的N个最大值与重复

> ID：15989887
> 
> 赞同：0
> 
> 时间：2013-04-13T16:11:02.050
> 
> 标签：python, sorting, dictionary

例如我们有这个字典：

```
scores={'L Messi':18, 'R Falcao':16, 'R Van Persie':14, 'F Torres':0, 'C Ronaldo':16} 
```

所以，我需要实现一个函数，它将打印前 N 个最佳分数（最大值）。对于这个例子，如果**n=3**它应该打印这个：

```
L Messi 18
C Ronaldo 16
R Falcao 16
R Van Persie 14 
```

有什么建议怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:14:37.103

使用方法[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)和`.most_common()`方法：

```
>>> from collections import Counter
>>> scores={'L Messi':18, 'R Falcao':16, 'R Van Persie':14, 'F Torres':0, 'C Ronaldo':16}
>>> scores = Counter(scores)
>>> for name, score in scores.most_common(4):
...     print '{}: {}'.format(name, score)
... 
L Messi: 18
R Falcao: 16
C Ronaldo: 16
R Van Persie: 14 
```

如果你*必须*自己实现`.most_common()`代码，至少要[引用`.most_common()`源代码](http://hg.python.org/cpython/file/2.7/Lib/collections.py#l453)，它使用[`heapq`](http://docs.python.org/2/library/heapq.html).

要获得最常见的*值*，您可以在此基础上构建：

```
def most_common_values(counter, count):
    values = set()
    most_common = iter(counter.most_common())
    while len(values) < count:
        key, value = next(most_common)
        values.add(value)
        yield key, value 
```

对于您的示例：

```
>>> for name, score in most_common_values(scores, 3):
...     print '{}: {}'.format(name, score)
... 
L Messi: 18
R Falcao: 16
C Ronaldo: 16
R Van Persie: 14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:42:20.987

```
scores = {'L Messi':18, 'R Falcao':16, 'R Van Persie':14, 'F Torres':0, 'C Ronaldo':16}
top_scores = sorted(set(scores.values()), reverse=True)[:3]
filtered = sorted([[e, scores[e]] for e in scores if scores[e] in top_scores], key=lambda k: k[1], reverse=True)
for n, s in filtered:
    print("%s: %s" % (n, s)) 
```

# android - 选定的listitem通过json在另一个活动中显示它们的详细信息后？

> ID：15989888
> 
> 赞同：1
> 
> 时间：2013-04-13T16:11:07.580
> 
> 标签：android, json, listview, android-intent

我有显示列表项的活动，在列表项中我只想显示地点的名称并且我能够显示它但是当我单击我想要与该地点名称相关的项目时，它会显示另一个的详细信息活动，即位置详细信息。所以请帮我解决我的问题，我是 android 新手。

这是我的两个活动代码：

```
locationList=( ListView)findViewById(R.id.list_Surroundings);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> locationOfList = new ArrayList<HashMap<String, String>>();

    adapter = new SimpleAdapter(this, locationOfList,
            R.layout.list_item1,
            new String[] { TAG_NAME }, new int[] {
                    R.id.name});

    locationList.setAdapter(adapter);

 // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

 // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
     // Getting Array of Category
    location=json.getJSONArray(TAG_LOCATION);

    //looping through all categories
    for(int i = 0; i < location.length(); i++){
        JSONObject c = location.getJSONObject(i);
        JSONObject c1=c.getJSONObject(TAG_LOCATION1);

        // Storing each json item in variable
            String LocationID = c1.getString(TAG_LOCATION_ID);
            String Name = c1.getString(TAG_NAME);
            String Phone = c1.getString(TAG_PHONE);
            String FormattedPhone = c1.getString(TAG_FORMATTED_PHONE);
            String Address = c1.getString(TAG_ADDRESS);
            String CrossStreet = c1.getString(TAG_CROSS_STREET);
            String Lat = c1.getString(TAG_LAT);
            String Lng = c1.getString(TAG_LNG);
            String Distance = c1.getString(TAG_DISTANCE);
            String PostalCode = c1.getString(TAG_POSTAL_CODE);
            String City = c1.getString(TAG_CITY);
            String State = c1.getString(TAG_STATE);
            String Country = c1.getString(TAG_COUNTRY);

        // creating new HashMap
           HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
           map.put(TAG_LOCATION_ID, LocationID);
           map.put(TAG_NAME, Name);
           map.put(TAG_PHONE, Phone);
           map.put(TAG_FORMATTED_PHONE, FormattedPhone);
           map.put(TAG_ADDRESS, Address);
           map.put(TAG_CROSS_STREET, CrossStreet);
           map.put(TAG_LAT, Lat);
           map.put(TAG_LNG, Lng);
           map.put(TAG_DISTANCE, Distance); 
           map.put(TAG_POSTAL_CODE, PostalCode);
           map.put(TAG_CITY, City);
           map.put(TAG_STATE, State);
           map.put(TAG_COUNTRY, Country);

           // adding HashList to ArrayList
           locationOfList.add(map);
    }
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }

    locationList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub

             // getting values from selected ListItem
            String Name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String Distance = ((TextView) view.findViewById(R.id.distance_list1)).getText().toString();
            String Country = ((TextView) view.findViewById(R.id.country_list1)).getText().toString();
            String City = ((TextView) view.findViewById(R.id.city_list1)).getText().toString();
            String Phone = ((TextView) view.findViewById(R.id.phone_list1)).getText().toString();

         // Starting new intent
            Intent in = new Intent(getApplicationContext(), LocationDetails.class);
            in.putExtra(TAG_NAME, Name);
            in.putExtra(TAG_DISTANCE, Distance);
            in.putExtra(TAG_COUNTRY, Country);
            in.putExtra(TAG_CITY, City);
            in.putExtra(TAG_PHONE, Phone);

            startActivity(in);
        }
    });

public class LocationDetails extends Activity{

// JSON node keys
    private static final String TAG_NAME = "Name";
    private static final String TAG_PHONE = "Phone";
    private static final String TAG_ADDRESS = "Address";
    private static final String TAG_DISTANCE= "Distance";
    private static final String TAG_CITY = "City";
    private static final String TAG_COUNTRY= "Country";

    private TextView name,phone,address,distance,city,country;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.location_details);

        // getting intent data
        Intent in = getIntent();

        // Get JSON values from previous intent
        String Name = in.getStringExtra(TAG_NAME);
        String Phone = in.getStringExtra(TAG_PHONE);
        String Address = in.getStringExtra(TAG_ADDRESS);
        String Distance = in.getStringExtra(TAG_DISTANCE);
        String City = in.getStringExtra(TAG_CITY);
        String Country = in.getStringExtra(TAG_COUNTRY);

        // Displaying all values on the screen
        name= (TextView) findViewById(R.id.TxtView_name);
        phone=(TextView)findViewById(R.id.TxtView_PhoneField);
        address=(TextView)findViewById(R.id.TxtView_AddressField);
        distance=(TextView)findViewById(R.id.TxtView_DistanceField);
        city=(TextView)findViewById(R.id.TxtView_CityField);
        country=(TextView)findViewById(R.id.TxtView_CountryField);

        name.setText(Name);
        phone.setText(Phone);
        address.setText(Address);
        distance.setText(Distance);
        city.setText(City);
        country.setText(Country);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:28:31.907

在发送活动中，尝试替换

```
in.putExtra(TAG_NAME, Name);
in.putExtra(TAG_DISTANCE, Distance);
in.putExtra(TAG_COUNTRY, Country);
in.putExtra(TAG_CITY, City);
in.putExtra(TAG_PHONE, Phone); 
```

和

```
Bundle extras = new Bundle();
extras.putString(TAG_NAME, Name);
extras.putString(TAG_DISTANCE, Distance);
extras.putString(TAG_COUNTRY, Country);
extras.putString(TAG_CITY, City);
extras.putString(TAG_PHONE, Phone);
extras.putExtras(extras); 
```

在接收活动中，尝试替换

```
// getting intent data
        Intent in = getIntent();

        // Get JSON values from previous intent
        String Name = in.getStringExtra(TAG_NAME);
        String Phone = in.getStringExtra(TAG_PHONE);
        String Address = in.getStringExtra(TAG_ADDRESS);
        String Distance = in.getStringExtra(TAG_DISTANCE);
        String City = in.getStringExtra(TAG_CITY);
        String Country = in.getStringExtra(TAG_COUNTRY); 
```

和

```
Bundle extras = getIntent().getExtras();

if(extras != null) {

    String Name = extras.getString(TAG_NAME);
    String Phone = extras.getString(TAG_PHONE);
    String Address = extras.getString(TAG_ADDRESS);
    String Distance = extras.getString(TAG_DISTANCE);
    String City = extras.getString(TAG_CITY);
    String Country = extras.getString(TAG_COUNTRY);  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:30:28.510

您正在尝试从 TextViews 中获取数据，这根本不对。

您需要`ArrayList`通过使用**`locationOfList(position)`**listItem 的 onClick() 从 中获取所选项目的值。

像这样的东西：

```
 locationList.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        // TODO Auto-generated method stub

        // getting values from selected ListItem
        HashMap<String, String> selectedMap =  locationOfList.get(position);           

     // Starting new intent
        Intent in = new Intent(getApplicationContext(), LocationDetails.class);
        in.putExtra(selectedMap);

        startActivity(in);
    }
}); 
```

在您的第二个活动中，使用[此示例](https://stackoverflow.com/questions/3422388/android-get-value-from-hashmap)从 HashMap 中检索数据。

# android - Android - 在 google Marker (api v2) 中使用 WebView 的 setInfoWindowAdapter

> ID：15989891
> 
> 赞同：1
> 
> 时间：2013-04-13T16:11:25.607
> 
> 标签：android, webview, google-maps-markers, google-maps-api-2

我对谷歌地图 api v2 上的标记有疑问。我想用 WebView 自定义 infoWindows：

这是我的 InfoWindowAdapter 代码

```
 mMap.setInfoWindowAdapter(new InfoWindowAdapter() {  
        @Override
        public View getInfoWindow(Marker arg0) {
            return null;
        }
        @Override
        public View getInfoContents(Marker arg0) {
            View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);
            TextView title = (TextView) v.findViewById(R.id.title_marker);
            WebView snippet = (WebView) v.findViewById(R.id.item_snippet);
            title.setText(arg0.getTitle());
        snippet.setVisibility(WebView.VISIBLE);
        snippet.loadData(arg0.getSnippet(),"text/html", "UTF-8");
            return v;

        }
    }); 
```

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title_marker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <WebView
        android:id="@+id/item_snippet"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

我的问题是我在 TextView 中看到了内容，但在 WebView 中没有看到内容。我做错了什么？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:59:08.767

您不能直接使用 WebView。原因是（来源：官方文档）：

> 注意：绘制的信息窗口不是实时视图。视图在返回时呈现为图像（使用`View.draw(Canvas)`）。这意味着对视图的任何后续更改都不会反映在地图上的信息窗口中。要稍后更新信息窗口（例如，加载图像后），请调用`showInfoWindow()`. 此外，信息窗口不会尊重任何普通视图的典型交互性，例如触摸或手势事件。但是，您可以在整个信息窗口上收听通用单击事件，如下节所述。

您可以尝试在位图上绘制 webview（在加载内容之后）并`ImageView`在适配器中提供该位图`InfoWindow`，但无论如何您都会失去与 webview 的交互性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T05:50:28.593

经过大量测试、谷歌搜索和一些反转后，我可以说您返回的视图`getInfoContents`用于渲染为 a`Bitmap`然后隐藏。然后`bitmap`显示通过`GL`

我找到了适合您的解决方法。

```
private View mGhost;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mGhost = new View(this);
    mGhost.setLayoutParams(new LayoutParams(0, 0));
    mGhost.setVisibility(View.GONE);        

    ....
}

public void onMapReady(GoogleMap map) // or whatever
{
    map.setInfoWindowAdapter(new InfoWindowAdapter()
    {
        @Override
        public View getInfoWindow(Marker marker)
        {
            return null;
        }

        @Override
        public View getInfoContents(final Marker marker)
        {
            WebView webview = new WebView(MainActivity.this);
            webview.loadUrl(marker.getSnippet());
            AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
            AlertDialog alert = builder.setView(webview).create();
            alert.show();
            alert.getWindow().setLayout(200, 200);
            mGhost.post(new Runnable()
            {
                @Override
                public void run()
                {
                    marker.hideInfoWindow();
                }
            });
            return mGhost;
        }
    });
} 
```

在此示例中，我使用该代码段来存储 url，这与您所要求的不*完全*一样，但它可能看起来很相似。

**编辑**：第一个版本是回收的，但如果`WebView`没有一些技巧将其从关闭对话框后单击标记。`Alert``InfoContents`

您可以使用包含 a 的布局`WebView`来装饰窗口

**Edit2**：恢复到第一个版本，一个空白`InfoContents`框显示位我不确定它是否可以避免。

# c - 将 const char 转换为数组

> ID：15989892
> 
> 赞同：4
> 
> 时间：2013-04-13T16:11:26.463
> 
> 标签：c, arrays, char

我正在尝试将 const char 转换为 char ...这是我的代码：

```
bool check(const char* word)
{

char *temp[1][50];

temp = word;

return true;
} 
```

它是一个传入了 const char 的函数。我需要将该 const char 转换为 char。当我现在运行这段代码时，编译器会抛出这个错误：

```
dictionary.c:28:6: error: array type 'char *[1][50]' is not assignable
temp = word; 
```

如何正确完成此转换？

谢谢，乔什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T16:15:40.773

```
#include <string.h>
bool check(const char* word)
{
    char temp[51];
    if(strlen(word)>50)
        return false;
    strncpy(temp,word,51);
    // Do seomething with temp here
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:15:53.807

如果你想要一个非常量版本，你必须复制字符串：

```
char temp[strlen(word) + 1];
strcpy(temp, word); 
```

或者：

```
char * temp = strdup(word);

if(!temp)
{
    /* copy failed */

    return false;
}

/* use temp */

free(temp); 
```

# c++ - 如何将格式长值 20010203 转换为字符串 2001-02-03？

> ID：15989894
> 
> 赞同：0
> 
> 时间：2013-04-13T16:11:59.753
> 
> 标签：c++, string, date, type-conversion

我有变长。例子：

```
long date = 20010203; 
```

我需要通过 cout 以这种格式 2001-02-03 打印值。示例：

```
cout << "Today is " << "2001-02-03" << endl; 
```

我需要将值 long 20010203 转换为带有“-”的字符串格式以进行打印。怎么做？我只能使用这些库：

```
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <iostream> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:30:09.253

最基本的方法是：

```
long year = date / 10000;
long month = (date - (year * 10000)) / 100;
long day = (date - (year * 10000) - (month * 100));

std::cout << "Today is " << year << "-" << (month < 10 ? "0" : "") << month << "-" << (day < 10 ? "0" : "") << day << std::endl;; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:23:48.207

幼稚的方法，划分和截断

20010203 / 10000000 = 2，现在你有了第一个数字。

从 20010203 中减去 (10000000 * 2) 得到 0010203

冲洗并重复，直到您拥有所有必要的数字。

编辑，我是哑巴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:41:43.083

你可以这样做：

```
#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <iostream>

int main ()
{
    long date=20010203;
    char arr[9];
    sprintf(arr, "%ld", date);//converts long to string
    std::cout << "Today is ";
    for(int i=0; i<9; i++)
    {
        if(i==4 || i==6) std::cout << '-';
        std::cout << arr[i];
    }
    return 0;
} 
```

# css - wp nav menu 向 LI 左右两侧添加 2 张图像

> ID：15989897
> 
> 赞同：-1
> 
> 时间：2013-04-13T16:12:10.150
> 
> 标签：css, wordpress

我想向 LI 添加小图像。和李有背景图片。所以我想在 LI 左下角和 LI 右下角添加 2 个图像。还有一个图像大小为 10 * 20 的东西。那我该怎么做？或者如何添加 div 标签，这样我就可以轻松完成了。我不知道如何在 wp_nav_menu() 中添加 div 标签。所以请帮帮我。我坚持这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:49:34.373

看一下`before`、`after`和`link_before`的`link_after`参数[`wp_nav_menu()`](http://codex.wordpress.org/Function_Reference/wp_nav_menu)。另请参阅分配给菜单组件的各种类的描述。

# sql-server - 如何识别sybase db文件（如何知道哪个软件哪个版本）

> ID：15989898
> 
> 赞同：1
> 
> 时间：2013-04-13T16:12:13.193
> 
> 标签：sql-server, sybase, sqlanywhere

我有一个 sybase 数据库 *.DB 文件我不知道它是由哪个软件创建的以及哪个版本我想知道使用哪个 sybase 引擎以及哪个版本以及与特定软件相关的引擎版本我的意思是我可以使用任何客户端这个数据库引擎

我还想知道如何安装 sybase 引擎和客户端软件以及恢复从 DB 文件创建的数据库的简要步骤

很抱歉，我是一名 MS SQL 开发人员，但我需要打开这个 sybase DB 并将其转换为 MS SQL :(

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:38:58.823

.db 通常由 Sybase SQL Anywhere 和 Sybase IQ 使用。由于您的任务是将其转换为 MS SQLServer，因此可以肯定该文件来自 SQL Anywhere。

您可以在此处了解有关[安装和升级 .db 文件的信息](http://dcx.sybase.com/1101/en/sachanges_en11/unloading-reloading-upgrading-newjasper.html)

安装软件并运行数据库后，您可以使用**[Sybase Central](http://dcx.sybase.com/1100/en/dbadmin_en11/scover.html)**、管理 GUI 或命令行上的**[dbunload](http://dcx.sybase.com/1100/en/dbadmin_en11/dbunload.html)**来提取构建 MS SQLServer 环境所需的 DDL。

# java - java BigInteger 操作

> ID：15989906
> 
> 赞同：0
> 
> 时间：2013-04-13T16:12:35.900
> 
> 标签：java, biginteger

以下代码用于调试：

```
public static void main(String[] args) {
    BigInteger n = new BigInteger("10000000001");
    String sn = n.toString();
    char[] array = sn.toCharArray();
    //intend to change value of some char in array
    //not standard math operation
    BigInteger result = new BigInteger(array.toString());
} 
```

它给了我错误：

```
 Exception in thread "main" java.lang.NumberFormatException: For input string: "[C@86c347"
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
        at java.lang.Integer.parseInt(Integer.java:449)
        at java.math.BigInteger.<init>(BigInteger.java:316)
        at java.math.BigInteger.<init>(BigInteger.java:451)
        at debug.main(debug.java:14) 
```

但它工作正常，直到这种情况下，我不太确定出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:14:34.753

如有疑问，请添加更多诊断...取出执行两件事的语句。这个：

```
array.toString() 
```

不会做你期望的事情，因为数组不会覆盖`toString()`. 它会返回类似`"[C@89ffb18"`. 您可以通过提取一个额外的局部变量来看到这一点：

```
BigInteger n = new BigInteger("10000000001");
String sn = n.toString();
char[] array = sn.toCharArray();
String text = array.toString();
BigInteger result = new BigInteger(text); 
```

然后在调试器中，您应该能够轻松地查看`text`调用之前的值`BigInteger`- 这将非常清楚地显示问题。

要将 char 数组转换为包含这些字符的字符串，您需要：

```
new String(array) 
```

# javascript - Javascript无限

> ID：15989908
> 
> 赞同：5
> 
> 时间：2013-04-13T16:12:53.187
> 
> 标签：javascript, infinity

除以 0 给出这个特殊值：

```
 3/0 output:Infinity 
```

你不能互相对抗正无穷和负无穷：

```
Infinity - Infinity output:NaN (Why?) 
```

事实证明，“超越无限”仍然是无限的：

```
 Infinity + Infinity output:Infinity(this is accepted)

 5 * Infinity
Infinity(this is also accepted) 
```

那么为什么infinity-infinity 评估为NaN？它应该是无穷大，不是吗？我还想知道为什么不能将对象转换为原始值？很抱歉一次发布两个问题，因为这是我可以发布的最后一个问题。看这里：

```
var obj = {
    valueOf: function () {
        console.log("valueOf");
        return {}; // not a primitive
    },
    toString: function () {
        console.log("toString");
        return {}; // not a primitive
    }
}

 Number(obj) //TypeError: Cannot convert object to primitive values 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T16:18:35.010

这就是 ∞ 在数学中的工作原理。无穷大本身不是一个数字，而是一个概念。一般的想法是
`∞ + x = ∞ ∀ x`

∞ 显然是无限大的。如果你从另一个无限大的东西中减去一个无限大的东西，你就无法定义你还剩下什么。如果第一个无穷大更大，你会得到一个负的结果，但如果它更小，那么结果将是正的（减法的基本规则），但由于两者都是无限大的，你无法知道哪个更大（除非更多给出了信息，例如导致这些无穷大的上下文*）。因此，就计算机而言，∞ - ∞ 在数学上是未定义的，或者不是数字。

* 示例：设 x = 所有正整数的总和，y = 每个正整数加倍的总和。在这种情况下，我们可以说 y > x，即使两者都是无穷大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:22:35.323

```
var A = 1/0
var B = 2 * A
var c = B - A 
```

Note that even though B = 2 * A, still A = B (2 * infinity is still infinity, so they are both infinity), so what do you expect C to be? infinity or 0?

Infinity is not really a number, mathematically speaking. Though IsNaN(1/0) = false.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:17:53.647

因为它是一个不确定的形式，所以它不是无限的。`NaN`以最好的方式反映了这一点。

[http://en.wikipedia.org/wiki/Indeterminate_form](http://en.wikipedia.org/wiki/Indeterminate_form)

相关问题： [https ://math.stackexchange.com/questions/60766/what-is-the-result-of-infinity-minus-infinity](https://math.stackexchange.com/questions/60766/what-is-the-result-of-infinity-minus-infinity)

# ruby-on-rails-3.2 - 在 Accepts_nested_attributes_for 语法中找不到我的错误

> ID：15989909
> 
> 赞同：0
> 
> 时间：2013-04-13T16:12:53.887
> 
> 标签：ruby-on-rails-3.2, nested-attributes

在我的收据模型中：

```
 attr_accessible ..., :donor_contacts_attributes
  has_many :donor_contacts
  accepts_nested_attributes_for :donor_contacts 
```

在我的 DonorContact 模型中：

```
 belongs_to :receipt 
```

在我的控制器新动作中：

```
@receipt = Receipt.new
@donor_contact = DonorContact.new 
```

我在保存时遇到的错误：

```
Can't mass-assign protected attributes: donor_contact 
```

我看不出我做错了什么。你们有人看到吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:22:21.907

在您的收据模型中尝试更改

```
attr_accessible ..., :donor_contacts_attributes 
```

经过

```
attr_accessible ..., :donor_contact_attributes 
```

# javascript - 获取html源代码

> ID：15989911
> 
> 赞同：0
> 
> 时间：2013-04-13T16:12:57.577
> 
> 标签：javascript, http, webpage

我正在尝试使用 Javascript 将任何网页的 html 源代码放在字符串中。请告诉我是否可以做其他事情来解决我的问题。我正在使用从另一篇文章中找到的以下[代码](https://stackoverflow.com/questions/247483/http-get-request-in-javascript/4033310#4033310)

```
function httpGet(theUrl)
{
var xmlHttp = null;

xmlHttp = new XMLHttpRequest();
xmlHttp.open( "GET", theUrl, false );
xmlHttp.send( null );
return xmlHttp.responseText;
} 
```

我在 IE Firefox 和 Chrome 中试过这个，但我总是得到以下源代码，它是“PAGE NOT FOUND”页面的源代码。如果你有任何其他信息，请在评论中告诉我。我想要的是从任何网页（如 google.com 和其他网页）获取 html。如果我不能这样做，那我该怎么办？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://gmpg.org/xfn/11">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>404 - PAGE NOT FOUND</title>
            <style type="text/css">
            body{padding:0;margin:0;font-family:helvetica;}
            #container{margin:20px auto;width:868px;}
            #container #top404{background-image:url('http://74.53.143.237/images/404top.gif');background-repeat:no-repeat;width:868px;height:168px;}
            #container #mid404{background-image:url('http://74.53.143.237/images/404mid.gif');background-repeat:repeat-y;width:868px;}
            #container #mid404 #gatorbottom{position:relative;left:39px;float:left;}
            #container #mid404 #xxx{float:left;padding:40px 237px 10px;}
            #container #mid404 #content{float:left;text-align:center;width:868px;}
            #container #mid404 #content #errorcode{font-size:30px;font-weight:800;}
            #container #mid404 #content p{font-weight:800;}
            #container #mid404 #content #banner{margin:20px 0 0 ;}
            #container #mid404 #content #hostedby{font-weight:800;font-size:25px;font-style:italic;margin:20px 0 0;}
            #container #mid404 #content #coupon{color:#AB0000;font-size:22px;font-style:italic;}
            #container #mid404 #content #getstarted a{color:#AB0000;font-size:31px;font-style:italic;font-weight:800;}
            #container #mid404 #content #getstarted {margin:0 0 35px;}
            #container #bottom404{background-image:url('http://74.53.143.237/images/404bottom.gif');background-repeat:no-repeat;width:868px;height:14px;}
            </style>
</head>
<body>
<div id="container">
    <div id="top404"></div>
    <div id="mid404">

            <div id="gatorbottom"><img src="http://74.53.143.237/images/gatorbottom.png" alt="" /></div>
            <div id="xxx"><img src="http://74.53.143.237/images/x.png" alt="" /></div>
    <div id="content">
            <div id="errorcode">ERROR 404 - PAGE NOT FOUND</div>
            <p>Oops! Looks like the page you're looking for was moved or never existed.<br />Make sure you typed the correct URL or followed a valid link.</p>

            <div id="banner">

                    <object width="728" height="90"><param name="movie" value="http://74.53.143.237/images/hg728x90.swf">

                            <embed src="http://74.53.143.237/images/hg728x90.swf?clickTAG=http://secure.hostgator.com/cgi-bin/affiliates/clickthru.cgi?id=page404" width="728" height="90"></embed>
                    </object>
            </div>

            <div id="hostedby">This site is hosted by HostGator!</div>
            <div id="coupon">Build your website today for 1 cent!   Coupon code: "404PAGE"</div>

            <div id="getstarted"><a href="http://www.hostgator.com/?utm_source=internal&utm_medium=link&utm_campaign=page404" title="HostGator Web Hosting" >CLICK HERE TO GET STARTED</a></div>

    </div>

    <div style="clear:left;"></div>
    </div>
    <div id="bottom404"></div>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:15:54.980

> 我正在尝试使用 Javascript 将任何网页的 html 源代码放在字符串中

如果“任何”是指来自提供文档的来源以外的来源的页面，则不能通过*在浏览器中运行的*JavaScript 执行此操作，因为您使用的是 ajax 调用，并且这些调用受[相同来源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的限制，它表示（例如）在文档中运行的脚本`http://stackoverflow.com`不能使用 ajax 从`http://example.com`. （“起源”不仅仅是域名，它有几个方面，详见链接）。

您可能请求的某些页面（但可能***很少***）可能支持[Cross-Origin Resource Sharing](http://www.w3.org/TR/access-control/)，在这种情况下，如果它们允许您的来源（可能通过允许所有来源），您可以使用 ajax 来加载它们的内容。

如果您在浏览器*之外*运行 JavaScript （NodeJS、SilkJS、RingoJS、Rhino、Windows Scripting Host 等），那么 SOP 将不适用，但我怀疑您可能需要使用`XMLHttpRequest`对象以外的其他东西来做。

但从根本上说，在浏览器的网页（不是扩展程序/附加组件）中，您不能这样做。

> ...但我总是得到...“页面未找到”页面的源代码

但这*听起来*URL 是错误的。

# c++ - C++ % 运算符不工作

> ID：15989912
> 
> 赞同：-1
> 
> 时间：2013-04-13T16:12:59.317
> 
> 标签：c++

在这个 c++ 程序中，我列出了由用户输入定义的数字的所有除数，我使用 % 运算符检查是否有余数。

```
#include <iostream>
using namespace std;

int main()
{
    int n;
    cout<<"List divisors of: ";
    cin>>n;
    for (int a=1;a<n;a++)
    {       
        if ((a % n)==0)
        {
        cout<<a<<"- divisor of "<<n<<endl;
        }
        else
        {
            cout<<a<<endl;
        }

    }
    return 0;
} 
```

但是`if ((a % n)==0)`条件永远不会满足，因此输入 10 的输出将是：

```
List divisors of: 10
1
2
3
4
5
6
7
8
9 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T16:14:40.020

> 我究竟做错了什么？

算术。没有大于 0 且小于的数`n`是 的倍数`n`。为了使运算`a % n`得到`0`结果，必须存在一个数`k`使得`k * n = a`. 但由于`a`大于 0 且始终小于`n`，因此不可能存在这样的情况`k`。

也许您打算改为编写`((n % a) == 0)`，每次都是 true`n`的倍数`a`（因此，如果您将 value 分配`10`给`n`，则循环中的条件将在`a`value `1`、`2`或时为 true `5`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T16:16:26.783

改变

```
 if ((a % n)==0)

 to  if ((n % a)==0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T16:16:53.363

可能你想要的是一个数字的所有*除数*。尝试交换数字：`if ((n % a) == 0)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T16:18:08.297

数学我亲爱的孩子。数学。

12除以10是1余2。

8 除以 10 是 0 余 8。

# c# - 正则表达式在特定单词之前和之后查找 N（指定数量）单词

> ID：15989913
> 
> 赞同：1
> 
> 时间：2013-04-13T16:13:00.607
> 
> 标签：c#, .net, regex, search, words

有人可以帮我`Regex`在 C# 中使用以下搜索吗

我需要一个正则表达式，它会在包含搜索词本身的特定单词之前和之后给我特定数量的单词。请注意，我希望能够指定我想要的前后字数。如果搜索词在文本的开头，那么它只返回搜索词之后的 N 个词，反之亦然，如果搜索词在文本的末尾。此外，搜索应该能够从我可以处理的文本中提供多个匹配项。

**例如**，我想在搜索词“example”周围获得“2”个词，以便在多行文本之后返回多个结果。

“本课中的示例一是我们用作示例的示例摘要。这个示例中有多少个单词？我们只想要前几个示例。”

**返回以下结果**

“example one in” **（注意第一次搜索没有前 2 个单词）**

“是一个示例摘要”

“举个例子。有多少”

“在这个例子中？我们只有”

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:40:21.873

给定您的示例，以下正则表达式将起作用

```
^example \w+ \w+|\w+ \w+ example[\.\?,]? \w+ \w+ 
```

示例 C# 实现

```
string example = @"example one in this lesson is an example summary that we are using as an example. How many words are in this example? We only want the first few examples.";
string pattern = @"^example \w+ \w+|\w+ \w+ example[\.\?,]? \w+ \w+";

foreach (Match m in Regex.Matches(example, pattern))
{
    Response.Write(m.Value + "<br/>");
} 
```

当您在其他测试用例上尝试此操作时，请使用正则表达式调试器（例如[debuggex](http://www.debuggex.com/)）或正则表达式测试器（例如[regexpal ）对上述内容进行任何微调。](http://regexpal.com/)

# java - 如何从数组创建多个 Java 对象实例？

> ID：15989922
> 
> 赞同：2
> 
> 时间：2013-04-13T16:14:27.180
> 
> 标签：java

我正在尝试使用此方法创建“运动”类的两个实例。该方法传入一个数组，其中包含有关类的信息，然后将其发送到要创建的构造函数。

但是，我不确定如何在给定代码的情况下引用实例 1 或 2。

```
public static void seperateValues(String sportDetail) {
  String[] sportDetails = sportDetail.split(",");
  System.out.println("Adding new sport to the Sport collection");
  System.out.println(sportDetail);
  /*
  for(int i=0; i<sportDetails.length; i++) //just used for testing whether it was splitting correctly {
    System.out.println(sportDetails[i]); 
  }*/
  //name,usagefee,insurance,affiliationfees, then court numbers
  //Tennis,44,10,93,10,11,12,13,14,15,16
  int vlength;
  vlength = sportDetail.length();
  new Sport(sportDetails); //this static methods loops twice, giving tennis and baseball
  System.out.println(name); //this lists tennis and baseball respectively
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:28:46.530

如果您只想引用运动的两个实例，您可以简单地这样做：

```
Sport sport1 = new Sport(sportDetails);
Sport sport2 = new Sport(sportDetails); 
```

然后简单地调用`sport1`or`sport2`当你想访问它们时，但是如果你想在 n 次运动中使用该方法 n 次，你可以这样做：首先`separateValues()`通过更改这些行来更改返回运动的方法：

```
public static void seperateValues(String sportDetail) { 
```

至

```
public static Sport seperateValues(String sportDetail) { 
```

在方法的最后，让它返回一个运动，像这样：

```
Sport sport = new Sport(sportDetails);
return sport; 
```

然后您可以在循环中调用该方法并创建一个列表，这样您就可以根据需要创建任意数量的运动：

```
//First declare a list of sports:
List<Sport> sports = null;

for (int i = 0; i<asManySportsAsYouWantToAdd; i++){
sports.add(separateValues(sportDetail));
} 
```

然后，要访问每个单独的运动，您可以简单地使用：

```
sports.get(n); //Where n is place of the sport on the list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:26:14.373

假设您的原始字符串`sportDetail`是“tennis,baseball”，然后它变成了一个包含 2 个术语的数组，例如`sportDetails[0] = "tennis"`and `sportDetails[1] = "baseball"`，那么在您的班级中`Sport`，您只需要这样引用它们。

换句话说，`sportDetails[0]`.

# installation - 在 Inno Setup 脚本中包含将文件复制到可指定目标目录的代码

> ID：15989924
> 
> 赞同：0
> 
> 时间：2013-04-13T16:14:33.610
> 
> 标签：installation, inno-setup, pascal

[因为我以前从未使用过 Pascal，所以我在尝试将一些自定义代码放入Inno Setup](http://www.jrsoftware.org/isinfo.php) .iss 脚本时有点迷失；-)

运行安装程序后，我希望它可以选择将子目录复制到**可指定**的目标目标（**而不是**已安装软件下方的子目录）

我看过[this](https://stackoverflow.com/questions/2281478/launch-custom-code-via-tasks-in-inno-setup)和[this](https://stackoverflow.com/questions/10490046/how-do-read-and-set-the-value-of-a-checkbox-in-an-innosetup-wizard-page) post，但它有点压倒性。我确实了解“创建附加复选框”部分，但我将如何引入“选择目录”部分并使用它的结果来复制文件？

按照 Miral 指出的示例，有人可以帮我指定实际的复制功能吗？我在[这里](http://freepascalanswers.wordpress.com/2012/01/18/copy-files/)找到了这个，但我仍然对帕斯卡的做事方式感到迷茫：

```
var‬‬
  SourceF, DestF: TFileStream;
begin‬‬
  ‪SourceF:= TFileStream.Create('Photo.jpg', fmOpenRead);
  ‪DestF:= TFileStream.Create('PhotoCopy.jpg', fmCreate);
  ‪DestF.CopyFrom(SourceF, SourceF.Size);
  SourceF.Free;
  DestF.Free;
end; 
```

# python - 从较低模块导入时的 ImportError

> ID：15989928
> 
> 赞同：2
> 
> 时间：2013-04-13T16:14:39.537
> 
> 标签：python, python-2.7, flask

我试图`db`在我的 Flask 项目的一个模块中导入一个名为（SQLAlchemy 对象）的对象，以便在我的模型（`models.py`）中使用 SQLAlchemy。假设我的包被命名`Foo`并包含`db`他的文件中的对象`__init__.py`，当我尝试执行时`from Foo import db`，我收到以下错误：

`ImportError: cannot import name db`

我正在使用 Flask Blueprint 将我的项目分派到两个应用程序（仪表板和前端）中，每个应用程序都包含一个`__init__.py`文件。只有`models.py`抛出这个错误，我的视图文件中有一些导入（作为导入登录管理器），一切顺利。

知道它可能是什么吗？

更新：回溯

```
Traceback (most recent call last):
    File "run.py", line 4, in <module>
        from kuchiyose import app
    File "/path_to_project/kuchiyose/kuchiyose/__init__.py", line 60, in <module>
        from kuchiyose import dashboard, frontend
    File "/path_to_project/kuchiyose/kuchiyose/dashboard/__init__.py", line 10, in <module>
        from dashboard import views
    File "/path_to_project/kuchiyose/kuchiyose/dashboard/__init__.py", line 10, in <module>
        from dashboard import views
    File "/path_to_project/kuchiyose/kuchiyose/dashboard/views.py", line 8, in <module>
        from kuchiyose.dashboard.models import User
    File "/path_to_project/kuchiyose/kuchiyose/dashboard/models.py", line 3, in <module>
        from kuchiyose import db

ImportError: cannot import name db 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T19:49:32.700

首先，感谢您的帮助。关于我的第二个问题：“如何在没有循环导入问题的情况下将 Flask 模型导入视图（使用 SQLAlchemy 时）”，我找到了解决方案。它包括将 SQLAlchemy 对象设置`__init__.py`到`models.py`文件本身而不是应用程序文件中。有了它，您可以`views.py`毫无问题地将其导入文件中。

我的 models.py 文件，现在：

```
from kuchiyose import app
from flask.ext.sqlalchemy import SQLAlchemy

db = SQLAlchemy(app) 
```

还有我的views.py

```
from kuchiyose.dashboard import models 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-04T07:17:36.550

这是一个旧的，但在我的搜索中显示为最高结果。

我有一个项目在几个不同的地方有模型声明，而不是一个合并的 models.py 文件，所以这个解决方案并不理想。我发现在建立 db 对象之后导入您的视图也可以。

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config.from_object('config')

db = SQLAlchemy(app)

# Now Register routes
# db is now defined so app import db will now work)
from routes.user import user as user_routes
app.register_blueprint(user_routes) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-13T16:51:26.463

似乎有循环进口：

*   `kuchiyose/__init__.py`从进口`kuchiyose.dashboard.views`
*   `kuchiyose/dashboard/views.py`从进口`kuchiyose.dashboard.models`
*   `kuchiyose/dashboard/models.py`从进口`kuchiyose`

有关更多信息，请参见[Python 中的循环（或循环）导入](https://stackoverflow.com/q/744373/1176601)...

# html - 页脚未居中

> ID：15989938
> 
> 赞同：0
> 
> 时间：2013-04-13T16:15:59.810
> 
> 标签：html, css, forms

这是注册表单.php

```
<?php
?>

<html>
<head>
 <title>Registration Form</title>
 <link href="register.css" rel="stylesheet" type="text/css" />
 </head>

 <body>
 <div id = "everything">

        <div id = "header">
        Register
        </div>

        <div id = "content">
        <div id = "regside">
                <form name="register" action="success.php" method="get" >
                    Username: <input name="username" type="text" maxlength="30" /><br><br>
                    Password: <input name="password" type="password" maxlength="30" /><br><br>
                    Confirm Password: <input name="cpassword" type="password" maxlength="30" /><br><br>
                    Lastname: <input name="lastname" type="text" maxlength="30" /><br><br>
                    Firstname: <input name="firstname" type="text" maxlength="30" /><br><br>
                    Middlename: <input name="middlename" type="text" maxlength="30" /><br><br>
                    Email Address: <input name="eemail" type="text" maxlength="30" /><br><br>
                    <input name="register" type="submit" value="Register" style = "width:100px; height:50px;" />
                </form>
            </div>
            <div id = "other">
            </div>

        </div>

        <div id = "footer">I am another footer :D</div>

</div> 
```

这是我的CSS

```
body{
background-color:#C1F4F4;
height:600px;
width:800px;
float:center;
margin:auto;
padding-top:20px;
}
#everything{
-moz-border-radius: 15px;
border-radius: 15px;
background-color:#000;
float:center;
margin:auto;
overflow:hidden;
}

#header {
text-align: center;
color:#FFF;
font-size: 20px;
height:30px;
padding:10px;
}

#content{
background-color:#E6F2F2;
height:500px;
width:100%;
}
#regside{
color:#000;
float:right;
width:40%;
height:500px;
text-align: right;
padding: 20px;
}
#other{
background-image:url(photos/anime.png);
background-repeat:no-repeat;
background-size:100%;
height:500px;
width:50%;
float:left;
}
#footer{
color:#FFF;
height:10px;
width:100%;
margin: auto;
padding:10px;
text-align: center;
} 
```

出于某种原因，我找不到它的页脚文本没有居中。看起来它以 为中心，`#other`但两者都`#other`属于`#footer`并且`#content`不`#other`应该能够影响`#footer`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:20:03.820

`#regside`正在流血到页脚。如果你降低它的高度，文本将移动到中心。

```
#regside {
  height:460px
} 
```

截至目前，文本集中在容器左侧和`regside`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:18:43.510

用于. `margin: 0 auto;`_ 都是无效的，并且您在多个地方都使用它们。`#footer``float:center; margin:auto;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:19:45.127

`center`不是该属性的有效值`float`，因此这不起作用：

```
float:center; 
```

您应该为要居中的元素设置`margin`（至少左右）to `auto`，对于旧的 IE 版本，您应该添加`text-align: center;`到其父元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T16:27:51.327

试试这个新的 CSS

```
body{
    background-color:#C1F4F4;
    height:600px;
    width:800px;
    float:center;
    margin:auto;
    padding-top:20px;
    }
    #everything{
    -moz-border-radius: 15px;
    border-radius: 15px;
    background-color:#000;
    float:center;
    margin:auto;
    overflow:hidden;
    }

    #header {
    text-align: center;
    color:#FFF;
    font-size: 20px;
    height:30px;
    padding:10px;
    }

    #content{
    background-color:#E6F2F2;
    height:500px;
    width:100%;
    }
    #regside {
       color: #000000;
       float: right;
       height: 480px;
       margin-top: 20px;
       padding: 0 20px 0 0;
       text-align: right;
       width: 40%;
    }
    #other{
    background-image:url(photos/anime.png);
    background-repeat:no-repeat;
    background-size:100%;
    height:500px;
    width:50%;
    float:left;
    }
    #footer{
    color:#FFF;
    height:20px;
    width:100%;
    margin: auto;
    padding:10px;
    text-align: center;
    } 
```

它工作正常..

# r - 考虑到数据框中的一列中有重复项，如何删除数据框中的行

> ID：15989939
> 
> 赞同：1
> 
> 时间：2013-04-13T16:16:00.933
> 
> 标签：r

嗨，亲爱的，我对列中有重复的数据框有一点问题。我想删除列存在重复项的行。例如我的数据框是这样的：

```
Value   City    Card.Type   ID
100   Michigan    Silver    001
120   Angeles     Gold      002
NA    Kansas      Gold      002
500   Michigan    Silver    001
800   Texas       Basic     005 
```

您可以看到，在`ID`列中有两个重复项，一个 for`001`和一个 for `002`。我正在使用`unique`功能，但我无法删除重复项。我想得到这样的人：

```
 Value   City    Card.Type   ID
 100   Michigan    Silver    001
 120   Angeles     Gold      002
 800   Texas       Basic     005 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:38:54.033

只能使用其“正面”版本。使用构造 -which() 的危险在于，当没有任何行或项目与测试匹配时，当正确的结果是“一切”时，结果`which()`是`numeric(0)`并且`-numeric(0)`将返回“无”。使用用途：

```
 dat[!duplicated(dat), ] 
```

在这种情况下，没有重复的行，但 OP 认为应该删除一些行，因此显然只考虑了两三列。这很容易适应。只需对 2 或 3 列进行重复测试：

```
 dat[ !duplicated(dat[ , 2:3] ) , ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T16:18:32.790

使用功能`duplicated`。

就像是：

```
data.subset <- data[!duplicated(data$ID),] 
```

Duplicated 返回一个真/假向量。向量中的第二个重复条目将始终返回`TRUE`。

# java - 如何解决java中的“字符串或二进制数据将被截断”？

> ID：15989940
> 
> 赞同：-1
> 
> 时间：2013-04-13T16:16:01.930
> 
> 标签：java, jakarta-ee, servlets, servlet-3.0

我为文件创建了一个表，我为文件 varbinary(MAX) 放置了数据类型，当我尝试上传文件时，它显示给我：

```
String or binary data would be truncated 
```

当我像这样编写插入查询时：

```
 String sql = "INSERT INTO contacts (first_name, last_name, photo) values (?, ?, ?)";
   PreparedStatement statement = conn.prepareStatement(sql);
   statement.setString(1, firstName);
   statement.setString(2, lastName);

   if (inputStream != null) {
       // fetches input stream of the upload file for the blob column
       statement.setBlob(3, inputStream);
   } 
```

我也尝试了 setBinaryStream 但它仍然给了我同样的错误所以请帮助我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:18:46.523

该错误意味着在将数据保存在`VARBINARY(MAX)`列中时，您的二进制数据将被截断。只需将列的类型更改为[`BLOB`](http://searchsqlserver.techtarget.com/definition/BLOB).

# c - 三元运算符的使用： var ? 12 变量：0

> ID：15989941
> 
> 赞同：1
> 
> 时间：2013-04-13T16:16:03.117
> 
> 标签：c, operators, conditional

嘿，非常感谢您的宝贵时间！我无法理解我的音频编码教科书中的语句语法。在一个示例中，有一个打印功能是这样的

```
printf("%d semitones up or %d semitones down\n", interval,
       interval ? 12-interval : 0 ); 
```

我不明白的部分是条件运算符，或“？”。似乎我应该将其读为“如果间隔不等于 0，则间隔 = 12 - 间隔”，但这里的语法似乎很奇怪。我习惯了条件运算符是一个更加充实的语句，例如：

```
a = b > c ? b : c; 
```

“如果 b 大于 c，则 a = b；否则 a = c”

有人可以指出我对此的任何其他参考，或者解释更多关于这种语法的信息吗？我找不到类似的例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:18:05.397

你几乎是对的，但没有分配发生。它的意思是“如果`interval`非零，则传递`12 - interval`给`printf`语句，否则传递`0`”。

一般来说，三元运算符如下所示：

```
 a ? b : c 
```

其中`a`, `b`, 和`c`都是表达式。如果`a`计算结果为非零，则三元运算符的计算结果如同`b`，如果`a`计算结果为零，则三元运算符的结果是计算的结果`c`。

您的第二个示例是三元运算符和赋值运算符的组合。三元运算符本身不执行任何赋值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T16:18:06.057

任何导致布尔值的表达式都可以。在 C 的情况下，整数可以用作布尔值，会考虑该值`0`并考虑`false`其他任何内容`true`。

因此，在您的情况下，`interval ? 12-interval : 0`, 意味着：如果`interval`非零，则使用`12-interval`，否则，使用`0`。为了更加冗长，您可以将其重写为：

```
 interval != 0 ? 12-interval : 0 
```

# android - 创建像这样的聊天形状的自定义背景android

> ID：15989942
> 
> 赞同：0
> 
> 时间：2013-04-13T16:16:18.903
> 
> 标签：android, nine-patch

![在此处输入图像描述](https://i.stack.imgur.com/iUaUr.png)

**如何实现这一点 ** 我尝试了 9 个补丁，但我无法做到这一点，也没有直接可用的补丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:29:40.017

这是[9 补丁](http://developer.android.com/tools/help/draw9patch.html)图像的工作。

这是具有渐变背景的众多[示例之一。](http://androiddev.orkitra.com/?p=37414)
![带有标注和渐变背景的 9 补丁](https://i.stack.imgur.com/dWjDc.png)

图像上方、下方和侧面的扩展栏控制图像拉伸的位置*以及*文本填充的位置。
以下是如何将标注保持在图像的任意位置：
![在此处输入图像描述](https://i.stack.imgur.com/uIlCb.png)

这是一个交互式在线工具，用于绘制扩展器并在找到或完成创建渐变/标注图像后下载结果：http: [//draw9patch.com](http://draw9patch.com)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-13T16:23:54.780

我会推荐这些样式：[http ://www.dibbus.com/2011/02/gradient-buttons-for-android/](http://www.dibbus.com/2011/02/gradient-buttons-for-android/)

只需创建一个`View`并设置`android:background="@drawable/blueButtonStyle"`

# php - 处理 php xml 帖子和批处理

> ID：15989948
> 
> 赞同：0
> 
> 时间：2013-04-13T16:17:21.470
> 
> 标签：php, mysql, batch-file

所以我有一个带有 PHP 脚本的服务器，它将被 xml 帖子轰炸。每个 xml 可能有 1 个数据块或几个数据块，发布给我的服务器有大约 10 秒的可变超时，所以我的脚本有大约 10 秒的时间告诉他们的服务器得到了这些东西（http:200/page完成加载），否则他们将重新尝试将系统潜入循环中。我的周转时间需要几乎是即时的，因为必须尽快发送由于此 xml 而发送的电子邮件和电话等。

我曾考虑过执行以下操作：将 xml 转储到 txt 文件中并在数据库中记录日志，因此该文件将始终在 10 秒内响应 xml 海报。然后在后台处理文件。有人在另一个线程中建议这样做：

```
#!/bin/bash
while [ "true" ]; do
        /path/to/script.php
        sleep 3
done 
```

我的问题是，如果我得到 40 个大型批处理作业和 20 个小型批处理作业，那么在一分钟内我可以运行 30 个 script.php 实例。我想让批处理脚本运行，并在它完成后启动下一个批处理脚本等等，而不会导致内存问题。

那么最好执行以下操作：

处理器.php：

```
<?php
select next record sort by date desc
grab file, process it
header location to same script
?> 
```

如果没有记录，那么可能睡眠 3，所以页面一直在运行，我有一个 cron 检查它是否处于活动状态，如果出现问题，它可以重新启动。但这会导致男性问题，或者当它的标题定位到自身时它会重置内存？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:29:54.263

听起来不错的计划，怎么样：

接收器.php

```
//Receive XML
//Option 1: Store in text file (with timestamp in name)
//  or
//Option 2: Store in text file and then store timestamped reference in database
//Respond to caller 
```

processor.php（每 10 秒激活一次或通过 cron 激活）

```
//Option 1: Check for new XML text files - grab the one with the oldest timestamp
//Option 2: Check database for oldest unprocessed XML - grab the referenced XML file
//Process XML
//Remove XML text file (& any reference in a database)
//Go back to the start of the processor.php script  (while loop or something that checks for unprocessed XML files) 
```

# javascript - 通过javascript进行客户端Web抓取

> ID：15989958
> 
> 赞同：0
> 
> 时间：2013-04-13T16:18:14.480
> 
> 标签：javascript, web-scraping

我已经使用 tagoup 抓取了 java 中的网页。但是我认为当有更多链接时它会变慢。所以，我想到了通过 javascript 抓取。在谷歌搜索中，我发现“ **pjscrape ”在****pyphantomjs**的帮助下工作（不再支持）。我可以知道通过java脚本抓取网页（客户端）的任何其他方式吗？

# javascript - 使用 jQuery 在 base64 中缓存图像文件

> ID：15989960
> 
> 赞同：1
> 
> 时间：2013-04-13T16:18:28.603
> 
> 标签：javascript, jquery, caching, base64

我正在尝试为我正在使用的图像文件编写缓存。我将使用这个图像文件来使用画布提取图像的一部分。但它似乎不能正常工作。如果我第一次为 url（空缓存）调用该函数，则`getBase64OfSubImage`返回错误的子图像（空 png）。但它似乎只是偶尔发生。当我第二次运行相同的命令时，它会返回正确的子图像。

```
var backgroundImageURLs = Object();

function checkBase64OfImage(url){
    var dfd = $.Deferred();

    if(backgroundImageURLs[url] !== undefined){
        dfd.resolve();
    }
    else {
        var req = new XMLHttpRequest();
        req.overrideMimeType('text/plain; charset=x-user-defined');
        req.open('GET', url, true);
        req.responseType = 'arraybuffer';
        req.onload = function() {
            buffer = req.mozResponseArrayBuffer || req.response;
            type = req.getResponseHeader('Content-Type');

            var blob = new Blob([buffer], {type: type});
            var fr = new FileReader();
            fr.onload = function() {
                backgroundImageURLs[url] = window.btoa(fr.result);
                dfd.resolve();
            };
            fr.readAsBinaryString(blob);
        };
        req.send(null);
    }

    return dfd.promise();
}

function getBase64OfSubImage(url, pos, size){
    if(backgroundImageURLs[url] !== undefined){
        var base64_img = "data:image/png;base64,"+backgroundImageURLs[url];
        var tmp_img = new Image();
        tmp_img.setAttribute("src", base64_img);

        var canvas = $('<canvas/>')[0];
        canvas.width = size[0];
        canvas.height = size[1];

        canvas.getContext('2d').drawImage(tmp_img, pos[0], pos[1], size[0], size[1], 0, 0, size[0], size[1]);
        return canvas.toDataURL().split(",")[1]; //Get Base64-representation of partial image
    }
    return false;
} 
```

知道为什么它不能像方面那样工作吗？我使用 jQuery Deferred/When 来确保图像完全加载到我的缓存中：

```
$.when(checkBase64OfImage(background_url)).then(function(){
    img_b64 = getBase64OfSubImage(background_url, background_position, size);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:26:48.133

自己找到了解决办法。尝试处理图像时（在 中`getBase64OfSubImage`）图像未完全加载，尽管它是 Base64 字符串。

此解决方案效果很好：

```
function getBase64OfSubImage(){
    if(backgroundImageURLs[url] !== undefined){
        var base64_img = "data:image/png;base64,"+backgroundImageURLs[url];
        var tmp_img = new Image();
        tmp_img.onload = function(){
            var canvas = $('<canvas/>')[0];
            canvas.width = size[0];
            canvas.height = size[1];

            canvas.getContext('2d').drawImage(this, pos[0], pos[1], size[0], size[1], 0, 0, size[0], size[1]);
            finish(canvas.toDataURL().split(",")[1]); //Get Base64-representation of partial image
        };
        tmp_img.setAttribute("src", base64_img);
    }
    else {
        checkBase64OfImage();
    }
}; 
```

# javascript - Jquery单击功能无法正常工作

> ID：15989967
> 
> 赞同：0
> 
> 时间：2013-04-13T16:18:49.270
> 
> 标签：javascript, jquery

我正在尝试通过链接显示警告框并使用 jQuery，但似乎我没有做对。

我的链接：

```
<a class="details_link">Details</a> 
```

我的 jQuery 函数：

```
$(document).ready(function () {
        $(".details_link").click(function () {

            alert("test");
        });
    }) 
```

此代码不起作用...我已经检查了 Stack 上的其他答案，但我认为我已按照说明进行操作。我包括 jquery-1.9.1.js 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:23:11.867

First check you have the correct jQuery Scripts loaded.

You are missing a few things.

The href attribute is missing from your anchor tag, although this is not what is causing the issue it is bad practice to not include it.

```
<a href="#"class="details_link">Details</a> 
```

You are also missing a semi colon from your jquery

```
$(document).ready(function () {
    $(".details_link").click(function () {
        alert("test");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:21:22.387

请确保您正确引用了 jquery 库。你的代码对我有用。**[在这里查看](http://jsfiddle.net/nmwyA/)**

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

如果你的 jquery 库是正确的并且准备好使用，你也可以去验证

> IE 调试器 >> 脚本标记和开始调试 jquery 库旁边的下拉列表中应该出现。

![在此处输入图像描述](https://i.stack.imgur.com/OEzwv.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:23:57.640

我几乎可以保证这不是 jquery click 功能无法正常工作，而是您的代码中的某些内容。

1.  确保包含 jQuery 库。
2.  确保您的功能在`<script>`标签内。
3.  检查 Web 控制台以查看是否有需要解决的错误。

然后，

```
$(document).ready(function () {
    console.log('test1');
    $(".details_link").on('click',  function () {
        alert("test2");
    });
    console.log('test3');
});
console.log('test4'); 
```

看看这些`console.log`语句中的哪一个打印出来。

# c# - C#中的文本框解析

> ID：15989969
> 
> 赞同：-2
> 
> 时间：2013-04-13T16:19:06.397
> 
> 标签：c#

我在从 C# 中的 textBox 解析时遇到问题。基本上我试图将一些值设置为整数，然后当人在文本框中键入数字时，如果增加计数器相同。但我必须将 int 解析为字符串，但我失败了。

这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
namespace kontrolno {
  public partial class Form1: Form {
    int counter;
    int A = 13;
    int B = 2116;
    public Form1() {
      InitializeComponent();
    }
    private void button1_Click(object sender, EventArgs e) {
      label3.Text = counter.ToString();
    }
    private void label3_Click(object sender, EventArgs e) {}
    private void groupBox1_Enter(object sender, EventArgs e) {}
    private void textBox1_TextChanged(object sender, EventArgs e) {
      int A = Int32.Parse(textBox1.Text);
      if (textBox1.Text = A) /*As you see somewhere here i have a problem*/
    }
    private void textBox2_TextChanged(object sender, EventArgs e) {
      /*Here must be parsed second textBox*/
    }
    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e) {
      switch (comboBox1.SelectedIndex) //comboBox 1st case
      {
      case 0:
        button1.Enabled = false;
        textBox1.Text = "13";
        textBox2.Text = "2116";
        radioButton1.Checked = true;
        checkBox1.Checked = true;
        /*Those 3 answers should 
        checkBox2.Checked = true;   be counted as one 
        checkBox4.Checked = true;  when mark is formed*/
        checkBox5.Checked = true;
        break;
      case 1:
        /*comboBox 2nd case*/
        button1.Enabled = true;
        textBox1.Text = "";
        textBox2.Text = "";
        radioButton1.Checked = false;
        checkBox1.Checked = false;
        checkBox2.Checked = false;
        checkBox4.Checked = false;
        checkBox5.Checked = false;
        break;
      }
    }
    private void radioButton1_CheckedChanged(object sender, EventArgs e) {
      if (radioButton1.Checked) {
        counter++;
      }
    }
    private void checkBox1_CheckedChanged(object sender, EventArgs e) {
      if (checkBox1.Checked) {
        counter++;
      }
    }
    private void checkBox2_CheckedChanged(object sender, EventArgs e) {
      if (checkBox2.Checked) {
        counter++;
      }
    }
    private void checkBox4_CheckedChanged(object sender, EventArgs e) {
      if (checkBox4.Checked) {
        counter++;
      } else {
        counter--;
      }
    }
    private void checkBox5_CheckedChanged(object sender, EventArgs e) {
      if (checkBox5.Checked) {
        counter++;
      } else {
        counter--;
      }
    }
  }
} 
```

所以我有问题，但我不知道如何解决。该代码的想法是进行测试。组合框在第一个项目中有 2 个项目练习用户查看所有问题和答案。在第二个项目用户填写答案和当按下按钮时，他会收到他的标记。我还没有实现标记公式，因为无法从文本框获得结果。

另外我想问一下是否有可能从复选框中获得 3 个答案以计为一个？

它应该很简单，但我只是崩溃了，无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:26:17.473

我不确定您要做什么，但您似乎混淆了赋值运算符 (=) 和相等运算符 (==)。如果要将文本框的内容与值进行比较，则应使用相等运算符：

```
if (textBox1.Text == A) 
```

请注意，您应该在这一行上得到一个编译错误，因为 Text 属性返回一个字符串对象，而 A 变量是一个 int，因此您需要解析 Text 属性，并可能在测试之前将其分配给第二个局部变量. 您可以`Int32.Parse`像在上面的行中那样使用，但我建议您使用`Int32.TryParse(textBox1.Text, out A)`，这样当文本不是有效的数字格式时不会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:28:37.310

问题1，你 `if (textBox1.Text=A)`应该是这样的`if(textbox1.Text==A.ToString())`

经典赋值/相等错误

但即使这很奇怪，我也不知道您为什么要将 textBox1 的值解析为 int，然后查看解析的 int 的值是否等于您刚刚解析的值？完全奇怪。您已经在范围之外定义了 int A，并在范围内再次声明了它。如果您试图判断新值是否等于旧值，则可以使用`if(a==this.A)`. 或者做理智的事情，然后给你当地的 int 打电话。

但总的来说，这个程序很奇怪，我什至不太确定你在问什么。

# python - Ä、Ö 和 Å 在 django 上无法正确显示

> ID：15989974
> 
> 赞同：0
> 
> 时间：2013-04-13T16:19:24.900
> 
> 标签：python, django

我正在尝试在基于 Django 和 Google App Engine 的应用中使用包含斯堪的纳维亚字母的模板。但是，我很难正确显示这些字符。这是简化的问题：

在我的 urls.py 中，我有以下代码：

```
urlpatterns = patterns('',
    ('^$', direct_to_template, {
        'template': 'index.html'
    }),) 
```

例如，字母“ä”变成“ÃÂ¤”，尽管我在模板文件中有以下行：

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
```

我还尝试将 FILE_CHARSET 和 DEFAULT_CHARSET 设置为“utf-8”，尽管它应该是默认值。

如果我在浏览器中导航到文件本身，则模板（实际上不包含任何 {{}} 或 {% %} ）会正常显示。

怎么了？为什么斯堪的纳维亚字符显示不正确？

编辑：显然文件编码有问题。我无法准确指出关键是什么，但现在一切都已解决。文件编码更改（可能在服务器重新启动后），之后我可以找到并替换损坏的字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:06:33.740

显然，修改字符集设置并启动应用程序会导致编码发生变化。然后可以看到损坏的字母，并且可以手动修复它们。

# ruby-on-rails - Ruby 不会在字符串中被解释

> ID：15989979
> 
> 赞同：-1
> 
> 时间：2013-04-13T16:20:02.017
> 
> 标签：ruby-on-rails, haml

我得到了这个代码：

```
= link_to main_app.dashboard_path(current_user), :class => 'class1 #{ is_active_link?("dashboard") }' do
  %p
    Dashboard 
```

雅和is_active_link？不会被执行。为什么？它只是解释为纯字符串！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:20:59.537

在 Ruby 中，字符串只有在被双引号括起来时才会被插值。单引号字符串是文字字符串（它们没有这种行为）。试试这个：

```
= link_to main_app.dashboard_path(current_user), :class => "class1 #{ is_active_link?('dashboard') }" do
  %p
    Dashboard 
```

# c - 根据用户请求创建多个整数

> ID：15989982
> 
> 赞同：0
> 
> 时间：2013-04-13T16:20:09.230
> 
> 标签：c, numbers, int, declare

我最近开始学习 C，想知道是否有一种方法可以声明一些整数，并使用用户给出的值。例如，用户输入 3。我想创建 3 个整数，`a`例如`b`和`c`。如果用户输入 5，我想创建`a`, `b`, `c`, `d`, `e`.

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:20:11.340

您想要创建一个数组，因为您不能声明未定义数量的单个变量。由于您是初学者，我会给您一个完整的答案，如果您愿意，您可以编译它：

```
#include<stdio.h>
#include<stdlib.h>

int main(){
    int* arr,number,i;
    printf("Give number value: ");
    scanf("%d",&number);
    arr = malloc(sizeof(*arr) * number); // after the comment, it safeguards the code
    for(i=0;i<number;i++){
        printf("%d ",i);
    }
    return 0;
} 
```

arr 是一个指针变量，您可以将它用作一个数组，其大小为 int * 您想要的变量数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:10:34.100

你需要的是一个整数数组。当您收到“<code>count”值时，您需要动态分配“<code>int”类型的“<code>count”项数组。

有关更多详细信息，请查看`malloc ()`函数： http: [//linux.die.net/man/3/malloc](http://linux.die.net/man/3/malloc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T17:38:12.583

我会让你轻松搞定。

您可以创建的是一个数组。数组本质上是存储在一个名称中的一系列元素。如果您不确定如何为您的示例制作/使用数组...这里有一个示例。

```
int main (void){
int i; //counter
int totalIntegers
int arrayVariableName[100]; //array that can store any amount(100 for this case)
                            //of variables inside.
printf("Enter total amount of variables");
    scanf("%d", &totalIntegers); //collect what the user types, pretend you type 5

for(i=0;i<totalIntegers;i++){ //this will loop 5 times from same example.
   printf("enter a number: ");
     scanf("%d",&arrayVariableName[i]); //will store numbers in array 0(which 
                                        // is holding the integer inside a), 
                                        // array 1(holding b), array 2(holding c)       
                                        //array 3(holding d), array 4(holding e).
   }

} 
```

使用数组和 for 循环，您可以设置允许用户多次输入数字的总量。例如，如果您在 5 中键入 7，则可以保存 7 个变量（a、b、c、d、e、f、g）。如果您计划生成超过 100 个整数，请在数组声明中更改它。有一种方法可以将限制设置为您想要的唯一数量，我上面的答案向您展示了如何，请查看以供参考。

要了解更多信息，只需在 youtube 上搜索“c 中的数组教程”。

# mips - 在 MIPS 中使用跳转表（如何在 JT 数组中跳转标签）

> ID：15989983
> 
> 赞同：3
> 
> 时间：2013-04-13T16:20:15.767
> 
> 标签：mips, mips32, smips

我正在尝试使用跳转表为我的工作制作菜单。Everyting 对我来说看起来不错，但下面的代码不起作用。在“jr $s0”指令之后，火星给了我一个错误，比如：

`Error in : invalid program counter value: 268501840`

我知道十进制地址`268501840`是 L1 标签的实际地址，而代码应该去那个标签，但那时我犯了这个错误。为什么？

```
main:   
.data
jTable: .word L0,L1,L2,L3,L4,L5,L6,default      #jump table definition  
msg:    .asciiz "\nEnter Your Choice;\n [1] for build,\n [2] for insert,\n [3] for       find,\n [4] for findMinMax,\n [5] for delete,\n [6] for print\n [0] for Exit\nYour    choice:#"
.text
userInteraction:
li  $v0,4           #print string
la  $a0,msg         #get string address
syscall

li  $v0,5           #get a menu option from user(0 to 6)
syscall
move    $s0,$v0         #get index in $s0

sll $s0,$s0,2       #$s0=index*4
la  $t0,jTable      #$t0=base address of the jump table
add $s0,$s0,$t0     #$s0+$t0 = actual address of jump label

**jr    $s0**           #jump to label

L0:   Todo
j   finish
L1:   Todo
j   userInteraction
L2:   Todo
j   userInteraction
L3:   Todo
j   userInteraction
L4:   Todo
j   userInteraction 
L5:   Todo
j   userInteraction
L6:   Todo
j   userInteraction
default:   Todo
j   userInteraction
finish:
li  $v0,10      #Exit
syscall         #Exit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:40:26.900

您试图跳转到存储地址的数组，这是没有意义的。您需要在`jr`指令之前从表中加载目标地址：

```
sll $s0,$s0,2       #$s0=index*4
la  $t0,jTable      #$t0=base address of the jump table
add $s0,$s0,$t0     #$s0+$t0 = actual address of jump label
lw  $s0,($s0)       # <-- load target address 
jr  $s0             #jump to label 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T00:54:10.843

您可以使用较少的代码来完成与 Michael 建议的相同的事情，方法`jTable`是将其用作加载字调用的直接偏移量。

```
sll $s0,$s0,2       # $s0=index*4
lw  jTable($s0)     # load the target address
jr $s0              # jump to the lable 
```

# database - NoSQL 数据库中的删除和插入

> ID：15989985
> 
> 赞同：0
> 
> 时间：2013-04-13T16:20:25.567
> 
> 标签：database, nosql

考虑 Nosql 数据库的以下场景：

假设一条记录从一个表中删除并插入到另一个表中。对于这种情况，必须采取哪些预防措施或错误检查？这是交易的一个例子，意味着两个步骤都应该发生还是都不发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:39:10.707

您描述的插入和删除是完全不同的操作。由于所有 NOSQL 数据库都不同，这实际上取决于您要使用的特定数据库是否支持事务。

## 预防措施

如果不支持事务，您必须采取的基本预防措施类似于所有需要日志/事务的系统：

1.  记录在事务中启动的所有运算符，以便在出现故障时回滚。
2.  锁定交易中涉及的所有文件，这样其他进程/请求就不会破坏状态。

查看事务处理方法和 ACID 标准： [http ://en.wikipedia.org/wiki/Transaction_processing#Methodology](http://en.wikipedia.org/wiki/Transaction_processing#Methodology)

这确实不是一件小事，尽管对于诸如移动命令（不是整个事务系统）之类的小任务是可行的。

所以如果你想拥有一个

```
MoveDocument(Document document, Database TargetDatabase) 
```

您可以执行以下操作之一：

## 如果数据库支持事务...

利用这些来保证进行这两项操作。这取决于您的数据库是否支持事务。不幸的是，CouchDB 没有：[我可以在 CouchDB 中进行事务和锁定吗？](https://stackoverflow.com/questions/299723/can-i-do-transactions-and-locks-in-couchdb).

MangoDB 不支持事务，但它确实提供了一些事务功能： [http ://docs.mongodb.org/manual/faq/fundamentals/#does-mongodb-support-transactions](http://docs.mongodb.org/manual/faq/fundamentals/#does-mongodb-support-transactions)

## 在包装器 API 中实现您自己的事务逻辑

如果您的 nosql 数据库不支持事务，您可以在自己的代码中编写与数据库交互的事务逻辑。但是，对数据库的所有命令都必须通过您的 web 服务/API，并且您必须为命令历史记录、锁定等实现代码，这不是一项小任务。

所有通信都必须通过您的 web 服务/servlet 等，因为您需要控制不对当前处于事务中的文档/记录进行更改。

## 在数据库代码中实现您自己的

这基本上意味着成为开源 nosql 数据库的贡献者。

# python - 将字符串拆分为列表

> ID：15989989
> 
> 赞同：1
> 
> 时间：2013-04-13T16:21:07.727
> 
> 标签：python

我想将一个字符串拆分成一个列表。我一直在尝试这个

```
r='ABCD'

a=r.split()
['ABCD'] 
```

我想要这样的东西 ['A','B','C','D']

我不想为此使用任何 for 循环。是否有内置的编程结构可以这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T16:21:57.300

字符串是一个序列，所以只要把它变成一个列表：

```
a = list(r) 
```

演示：

```
>>> r='ABCD'
>>> list(r)
['A', 'B', 'C', 'D'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T16:25:21.160

将字符串拆分为列表的默认设置是空格。如果您的字符串是间隔的，并且在`split(' ')`它看到空格时会吐出并将每个字母单独添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:36:37.890

您还应该学习使用列表推导来执行此操作，因为当您想以某种方式修改项目时它们非常快速且有用：

```
>>> [item for item in 'ABCD']
['A', 'B', 'C', 'D']

>>> [item for item in 'ABCDEFG' if item in 'AEIOU']
['A', 'E'] 
```

# java - 在其模块中访问 Guice 注射器？

> ID：15989991
> 
> 赞同：38
> 
> 时间：2013-04-13T16:21:12.987
> 
> 标签：java, dependency-injection, guice

我正在扩展 Guice `AbstractModule`，在扩展类中我需要访问 Guice 的注入器。这可能，如果是，如何？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-13T18:49:18.837

这是一个不寻常的要求。模块更像是配置文件而不是逻辑文件：模块被读取以创建注入器，然后一旦注入器被创建，模块就完成了它的工作。对于一个简单的模块，在模块准备好被丢弃之前，注入器实际上并不存在。

在任何情况下，您通常都应该请求一个`Provider<X>`. Guice 将为,[或](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/Injector.html "请参阅默认绑定部分")[的任何绑定](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/Injector.html "请参阅默认绑定部分")[注入or ，`X``Provider<X>``X``Provider<X>``@Provides X`](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/Injector.html "请参阅默认绑定部分")因此您几乎总是可以这样做。也就是说，注入 Injector 将允许您以反射方式获取实例，或检查 Injector 的绑定（等）。

以下是一些需要从模块内访问喷油器的正当理由/设计：

## 在一个`@Provides`方法中：

[模块可以在带有注释`@Provides`](https://github.com/google/guice/wiki/ProvidesMethods)的方法中包含微型提供程序。请记住，它[`Injector`是可](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/Injector.html "请参阅默认绑定部分")注入的：如果您需要在其中一种方法中使用 Injector，则可以将其作为参数接受：

```
public class OneModule extends AbstractModule {
  @Override public void configure() { /* ... */ }

  @Provides YourDependency getYourDependency(Injector injector) {
    return injector.getInstance(Class.forName(yourDependencyName));
  }

  @Provides Something getSomething(SomethingImpl something) {
    return initialize(something); // preferred: only ask for what you need
  }

  @Provides SomethingElse getSomethingElse(Provider<Thing> thingProvider) {
    return new SomethingElse(thingProvider); // asking for a provider works too
  }
} 
```

## 要在您的 configure() 中获取提供程序：

AbstractModules 正是出于这个原因而暴露的，尽管如果在注入器准备好提供它之前调用该 Provider（例如在配置时）[`getProvider()`](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/AbstractModule.html#getProvider-java.lang.Class-)，您会收到一个错误：`get()`

```
public class TwoModule extends AbstractModule {
  @Override public void configure() {
    bind(Thingy.class).toInstance(
        new MyThingy(8675309, getProvider(Another.class)));
  }
} 
```

您可能可以打电话`getProvider(Injector.class)`，但我不知道这是否有效，我不知道您为什么要这样做。

## 要在您的 configure() 中获取实例：

这是一个坏主意; 在所有配置方法运行之后，Guice 才准备好提供实例。最接近的方法是使用其他模块[创建一个子 Injector](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/Injector.html#createChildInjector(com.google.inject.Module...))并将其传递给该模块，但即使这样也很少需要。

```
public class MainClass {
  public static void main(String[] args) {
    Injector firstStage =
        Guice.createInjector(new OtherModule1(), new OtherModule2());
    // An alternative design would @Inject-annotate fields in ThreeModule
    // and get it from firstStage, but that's nonstandard and may be confusing.
    Injector secondStage =
        firstStage.createChildInjector(new ThreeModule(firstStage));
  }
}

public class ThreeModule extends AbstractModule {
  private final Injector otherInjector;

  public ThreeModule(Injector otherInjector) { 
    this.otherInjector = otherInjector;
  }

  @Override public void configure() {
    bindStuffBasedOn(otherInjector);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-09T10:04:34.953

`Injector`您可以在您的课程或提供者中注入，*但应该稀疏地使用它*。

我在这里找到它：[https ://groups.google.com/d/msg/google-guice/EiMDuDGei1Q/glxFhHKHHjsJ](https://groups.google.com/d/msg/google-guice/EiMDuDGei1Q/glxFhHKHHjsJ)

另见：[https ://github.com/google/guice/wiki/InjectingTheInjector](https://github.com/google/guice/wiki/InjectingTheInjector)

```
public class MyClass
{
    @Inject
    public MyClass(Injector injector) { ... }
}

public class MyModule extends AbstractModule {
    ...

    @Provides
    public Something provideSomething(Injector injector) { ... }

} 
```