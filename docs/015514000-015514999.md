# StackOverflow 问答 15514000-15514999

# c# - C# - 如何递归搜索 WPF 应用程序中的目录？

> ID：15514000
> 
> 赞同：0
> 
> 时间：2013-03-20T02:03:45.970
> 
> 标签：c#, wpf, search, directory

我可以在普通形式的应用程序中完成这项任务，但我对使用 WPF 应用程序是全新的。

我想在 a 中输入目录路径`TextBox`，然后单击 a`Button`验证并递归搜索该路径，并显示 a 中的所有文件`ListBox`。

我已经看过[这篇](http://support.microsoft.com/kb/303974)文章，但我并不完全理解它，因为我对此很陌生。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T02:08:41.560

尝试这个。

```
DirectoryInfo dir = new DirectoryInfo("your path");
dir.GetFiles("*.*", SearchOption.AllDirectories); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:58:01.340

或这个;

```
void DirSearch(string sDir) 
{
    try 
    {
       foreach (string d in Directory.GetDirectories(sDir)) 
       {
        foreach (string f in Directory.GetFiles(d, txtFile.Text)) 
        {
           lstFilesFound.Items.Add(f);
        }
        DirSearch(d);
       }
    }
    catch (System.Exception excpt) 
    {
        Console.WriteLine(excpt.Message);
    }
} 
```

# torquebox - 用torquebox-lite热重启？

> ID：15514001
> 
> 赞同：1
> 
> 时间：2013-03-20T02:03:52.337
> 
> 标签：torquebox

使用 Torquebox-lite gem 可以热重启吗？我在 github 页面上没有看到任何关于它的信息，但如果它不可能，我会感到惊讶，有人可以告诉我怎么做或者是否有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T08:04:59.697

热部署（重新部署而不重启服务器）

```
touch $APP_ROOT/torquebox-lite/deployments/<app_name>-knob.yml.dodeploy 
```

app_name 通常是应用程序目录的名称

[https://github.com/torquebox/torquebox-lite](https://github.com/torquebox/torquebox-lite)

# javascript - 需要一个带有 grunt 的 node_modules 之外的文件

> ID：15514004
> 
> 赞同：3
> 
> 时间：2013-03-20T02:04:03.960
> 
> 标签：javascript, node.js, gruntjs

我正在尝试将在我的应用程序中使用的节点模块要求到我的 gruntfile.js 中，但无论我做什么：找不到模块'appjs/config

在 gruntfile 我只是这样做：`var myconfig = require('appjs/config');`

但它只是不想加载，有没有办法轻松导入这些文件？我也尝试了各种路径，但 appjs 位于 gruntfile 的根目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:08:30.570

你试过这个吗？

```
var myconfig = require('./appjs/config'); 
```

如果 appjs 与您的 gruntfile 位于同一目录中，这似乎应该有效。

# python - 如何使用 matplotlib.pyplot 更改表格的字体大小

> ID：15514005
> 
> 赞同：26
> 
> 时间：2013-03-20T02:04:33.417
> 
> 标签：python, matplotlib, pylot

我正在用 pyplot 绘制一个表格，如下所示：

```
 sub_axes.table(cellText=table_vals,
          colWidths = [0.15, 0.25],
          rowLabels=row_labels,
          loc='right') 
```

我想更改表格内容的字体大小，发现有一个`fontsize`属性，请参考['table' 的定义](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.table)。

所以它变成：

```
 sub_axes.table(cellText=table_vals,
          colWidths = [0.15, 0.25],
          rowLabels=row_labels,
          fontsize=12,
          loc='right') 
```

但是当我执行代码时，我得到了一个错误：

```
TypeError: table() got an unexpected keyword argument 'fontsize' 
```

此属性是否已弃用？以及如何使用 pyplot 更改表格的字体大小？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-20T02:15:55.360

我认为文档要么暗示了一个参数（注意`fontsize`不是像其他参数那样的链接），要么目前可能有点误导。没有`fontsize`参数。

[通过源代码](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/table.py#L371)挖掘，我找到了`Table.set_fontsize`方法：

```
table = sub_axes.table(cellText=table_vals,
                       colWidths = [0.15, 0.25],
                       rowLabels=row_labels,
                       loc='right')
table.set_fontsize(14)
table.scale(1.5, 1.5)  # may help 
```

* * *

这是一个使用严重夸大字体大小的示例，只是为了显示效果。

```
import matplotlib.pyplot as plt
# Based on http://stackoverflow.com/a/8531491/190597 (Andrey Sobolev)

fig = plt.figure()
ax = fig.add_subplot(111)
y = [1, 2, 3, 4, 5, 4, 3, 2, 1, 1, 1, 1, 1, 1, 1, 1]    
col_labels = ['col1', 'col2', 'col3']
row_labels = ['row1', 'row2', 'row3']
table_vals = [[11, 12, 13], [21, 22, 23], [31, 32, 33]]

the_table = plt.table(cellText=table_vals,
                      colWidths=[0.1] * 3,
                      rowLabels=row_labels,
                      colLabels=col_labels,
                      loc='center right')
the_table.auto_set_font_size(False)
the_table.set_fontsize(24)
the_table.scale(2, 2)

plt.plot(y)
plt.show() 
```

![在此处输入图像描述](../Images/ddfe261dbdb9ba0f7903d89212ce1a81.png)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2017-01-10T12:16:19.617

设置`auto_set_font_size`为`False`，然后`set_fontsize(24)`

```
the_table.auto_set_font_size(False)
the_table.set_fontsize(24) 
```

# css - 使用 css 调整列布局中的图像大小

> ID：15514009
> 
> 赞同：0
> 
> 时间：2013-03-20T02:05:05.410
> 
> 标签：css, html, image

我正在尝试创建一个具有两列布局的网页。它的一个方面是，图像可以调整大小以占据列宽的一半。我使用一些CSS如下

```
.columnWrapper {
  float: left;
  width: auto;  
}
.sidebar1 {
  float: right;
  width: 33%;
  padding: 0 20px 0 10px;
}
.main {
  float: left;
  width: 66%;
  padding: 0 20px;
  border-left: none;
  border-right: solid 1px rgb(153,153,153);
}

footer {
  clear: both;  
}
nav ul, header h1, footer p, .contentWrapper {
  max-width: 1200px;
  margin: 0 auto;   
}
img {
  max-width: 100%;  
}
img.half {
  max-width: 50%;   
}
img.left {
  float: left;
  margin: 0 10px 10px 0;
}
img.right {
  float: right; 
  margin: 0 0 10px 10px;
} 
```

当我尝试使用如下标记调整 html 中的图像大小时

```
<div class="contentWrapper"> 
<div class="columnWrapper">
<!-- main content goes here -->
<article class="main">
  <img src="images/synergy2.jpg" alt="Synergy" class="half right">
  <h3>About us</h3>
  <p>blah blah blah</p>
</article>
<!-- first sidebar goes here -->
<aside class="sidebar1">
</aside>
<!-- end column wrapper -->
</div>
<!-- end content wrapper -->
</div> 
```

它在 Chrome 上按我预期的那样工作，但 Firefox 有一个问题，因为图像没有调整大小。CSS有问题还是浏览器问题？谢谢。

我想知道的另一件事是，是否有一种简单的方法可以确保列具有最小高度。如果没有太多内容，页脚最终会太高并且看起来很奇怪。谢谢。

我用有问题的 html / css 建立了一个示例网页 [http://adjk3543.appspot.com/aboutus.html](http://adjk3543.appspot.com/aboutus.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:12:44.453

将宽度应用于您的 columnWrapper：

```
.columnWrapper {
    float: left;
    width: 100%;
    min-height: 600px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:50:01.063

我也找到了与@3dgoo 给出的相同的解决方案。所以在这里也添加页脚解决方案。无论页面上的内容如何，​​您都必须做一些 CSS hack 以始终在底部对齐页脚。

看看这个[CSS Stick 页脚](http://cssstickyfooter.com)

这绝对有效。我已经用过很多次了。确保你理解这里的逻辑。

# javascript - 在 Javascript 中验证表单

> ID：15514012
> 
> 赞同：0
> 
> 时间：2013-03-20T02:05:49.510
> 
> 标签：javascript

我正在为学校编写一个 php 文件，我们必须对名字、姓氏和电子邮件进行一些 javascript 验证。如果一切正常，我们可以选择是否要添加驱动程序或取消。如果出现问题，请返回表格。我在一个小页面中做了验证脚本并让它在那里工作，但是当我把它放在我的 php 文件中时它就不再工作了。以下是一些代码片段：

```
<script type = "text/javascript" >
function val_name()
{
    var namePattern = /^[A-Za-z]{3,25}$/;
    if( !namePattern.test(document.upload.fn.value))
            alert("Enter valid first name");

    if( !namePattern.test(document.upload.ln.value))
        alert("Enter valid last name");

    var x=document.forms["upload"]["email"].value;
    var atpos=x.indexOf("@");
    var dotpos=x.lastIndexOf(".");

    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length)
    {
        alert("Not a valid e-mail address");
        return false;
    }
    else (confirm("Are you sure you want to add this driver?")== true)
    {
        window.location = 'add_driver.php';
    }
}
</script>

    <form id="upload" action="<?php echo $_SERVER['php_self'];?>" method="post" enctype="multipart/form-data" onsubmit="val_name()">

This is part of the html - the email part of it

<td>
email
</td>
<td>
<input type="text" id="email" name="email"/>
</td>
</tr>
<tr>
<td colspan="2" align="center">
<input type="submit" id="add_driver" name="add_driver" value="add_driver" />
<input type="reset" value="clear form"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:11:54.757

这可能只是一个粘贴错误，但该行

```
else (confirm("Are you sure you want to add this driver?")== true) 
```

不太可能做你所期望的。我相信你想要一个`else if`那里。

正如它所写的那样，`confirm`会弹出，但它实际上并不控制任何东西的流程，所以你的下一个代码块

```
{
    window.location = 'add_driver.php';
} 
```

无论如何都会发生。

现在，就您的问题而言，我不知道这是否是您所看到的错误。但是，这至少是您的代码的一个问题。

# java - 使用加入休眠 (HQL) 进行更新

> ID：15514021
> 
> 赞同：0
> 
> 时间：2013-03-20T02:06:48.693
> 
> 标签：java, sql, hibernate, join, hql

我遇到了 hql 问题。

我想写一个查询，更新一个属性，它基于另一个表上的值。

这是我的例子，我有这两个表：Client 和 Widhdrawal。

客户：idClient，名称...

Widhdrawal：idWidh、成本和 idClient（外键）

现在，如果我要更新客户端，在（例如，idClient = 5）的条件下，我不能。

我试过这个，但徒劳无功：

```
 String hql = "UPDATE Widhdrawal W set W.cost = :salary "  + 
    "where W.Client.id_client = :employee_id)";

    Query query = session.createQuery(hql);
    query.setParameter("salary", 1000);
    query.setParameter("employee_id", 5);
    int result = query.executeUpdate(); 
```

希望有人能给点建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:18:21.697

尝试这个：

```
 String hql = "UPDATE Widhdrawal W set W.cost = :salary "  + 
          "where W.idClient = :employee_id)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:33:45.533

谢谢，我找到了解决方案。我希望这可以帮助其他人......这个问题是由于小写。

```
 String hql = "UPDATE Widhdrawal W set W.cost= :newCost "  + 
                      "where W.client.id_client = :id_cl";

            Query query = session.createQuery(hql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T10:14:37.833

试试这个方法——

String hql = "UPDATE Widhdrawal W set W.cost = :salary" + "where W.id_client =(select id_client from client where id_client = :employee_id)";

Widhdrawal 和 client 是 POJO 类名。

# iphone - 应用打开时本地通知不显示

> ID：15514025
> 
> 赞同：0
> 
> 时间：2013-03-20T02:07:25.873
> 
> 标签：iphone, objective-c, xcode

我设置了本地通知。一旦它被触发，假设我的应用程序处于“睡眠”模式，即按下主页按钮或我退出它。现在收到通知。我在我的应用程序上看到红色标记，当我单击该应用程序时，它应该会触发`didReceiveLocalNotification`，但不会。当我打开我的应用程序时，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:18:13.380

该`didReceiveLocalNotification`方法仅在您的应用程序在前台运行时调用。如果您看到一个徽章并单击应用程序启动它，那么您需要使用`application:willFinishLaunchingWithOptions:`（或`application:didFinishLaunchingWithOptions:`）处理本地通知。要通过这两种方法中的任何一种获取本地通知，请`UIApplicationLaunchOptionsLocalNotificationKey`用作选项字典的键。

[编辑]来自 UILocalNotification 文档：

> 如果本地通知仅标记应用程序图标，并且用户响应启动应用程序，则调用 application:didFinishLaunchingWithOptions: 方法，但选项字典中不包含 UILocalNotification 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:34:42.073

当您设置触发日期时，您是否设置了通知对象的 userInfo 属性？？？& ru 在设备或模拟器上检查它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:48:01.597

```
 -(void)alarmNotification
    {
       NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

      NSDate *newdate = timePicker.date;

      NSLog(@"pickerdate:%@",newdate);

      NSDate *pickerDate =[newdate dateByAddingTimeInterval:-60*1];

      NSLog(@"pickerdate:%@",timePicker.date);

      // Break the date up into components
      NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit |      NSMonthCalendarUnit |  NSDayCalendarUnit )
                                                  fromDate:pickerDate];
      NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit )
                                               fromDate:pickerDate];
     // Set up the fire time
      NSDateComponents *dateComps = [[NSDateComponents alloc] init];
     [dateComps setDay:[dateComponents day]];
     [dateComps setMonth:[dateComponents month]];
     [dateComps setYear:[dateComponents year]];
     [dateComps setHour:[timeComponents hour]];
     // Notification will fire in one minute
     [dateComps setMinute:[timeComponents minute]];
     [dateComps setSecond:[timeComponents second]];
      NSDate *itemDate = [calendar dateFromComponents:dateComps];
      [dateComps release];

      localNotif = [[UILocalNotification alloc] init];
      if (localNotif == nil)
         return;
      localNotif.fireDate = itemDate;
       localNotif.timeZone = [NSTimeZone defaultTimeZone];

     // Notification details
      localNotif.alertBody = txtMeetingName.text;

    // Set the action button
      localNotif.alertAction = NSLocalizedString(@"View!", nil);

       localNotif.soundName = UILocalNotificationDefaultSoundName;

       // Specify custom data for the notification
       NSDictionary *infoDict = [NSDictionary dictionaryWithObject:@"someValue" forKey:@"someKey"];
       localNotif.userInfo = infoDict;

        localNotif.applicationIconBadgeNumber =1;

        [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

      } 
```

然后实现这段代码......

```
 - (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {
     // Handle the notificaton when the app is running
      NSDateComponents *comps = [[NSCalendar currentCalendar] components:notif.repeatInterval fromDate:notif.fireDate toDate:[NSDate date] options:0];
     // you can set your own sound 
      NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/win.wav", [[NSBundle mainBundle] resourcePath]]];

     NSError *error;

      UIAlertView *alertView =
     [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"move on", nil)
                           message:[NSString stringWithFormat:@"You have to start %@   meeting within 5 minute",notif.alertBody]
                          delegate:self
                 cancelButtonTitle:nil
                 otherButtonTitles:NSLocalizedString(@"OK", nil), nil];

      notif.soundName = UILocalNotificationDefaultSoundName;

      audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
      audioPlayer.numberOfLoops = -1;
      if (audioPlayer == nil)
         NSLog(@"error%@",[error description]);
      else
         [audioPlayer play];
      [alertView show];
      [alertView release];   

   }

  - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:     (NSInteger)buttonIndex{
     if (buttonIndex==0) {
    [audioPlayer stop];      

     }
    NSLog(@"U HAVE CLICKED BUTTON");
 } 
```

希望对你有帮助.....

# class - JBoss 7.1.1 osgi 依赖 jre

> ID：15514026
> 
> 赞同：1
> 
> 时间：2013-03-20T02:07:32.427
> 
> 标签：class, jboss, osgi

我的目标是在 JBoss 7.1.1 中部署 osgi bundle，它使用 JRE rt.jar 的 IO、bufferedimage、imageio 类。

我的问题是我如何依赖 jre ？

提前致谢。

# macos - CoreAudio实时线程与UI线程通信的正确方法是什么？

> ID：15514031
> 
> 赞同：3
> 
> 时间：2013-03-20T02:08:37.790
> 
> 标签：macos, cocoa, core-audio

我需要在 CoreAudio 的实时线程和 UI 线程之间传递数据（一种方式，RT-> UI）。我知道我不能使用任何 Cocoa/Objective C 方法，例如`performSelectorOnMainThread`or`NSNotification`并且我不能使用任何会分配内存的东西，因为这可能会阻塞 RT 线程。

线程之间通信的正确方法是什么？我可以使用 GCD 消息队列还是可以使用更基本的系统？

编辑：

再想一想，我想我可以使用无锁环形缓冲区，RT 线程将消息放入其中，UI 线程检查要提取的消息。这是最好的方法吗？如果是这样，CoreAudio 中是否已经有一个系统可以做到这一点或在其他地方可用，还是我需要自己编写代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:53:49.087

事实证明这比我预期的要简单得多，我想出的解决方案就是使用 Portaudio 环形缓冲区。我需要将 pa_ringbuffer.[ch] 和 pa_memorybarrier.h 添加到我的项目中，然后定义一个 MessageData 结构以存储在环形缓冲区中。

```
typedef struct MessageData {
    MessageType type;
    union {
        struct {
            NSUInteger position;
        } position;
    } data;
} MessageData; 
```

然后我分配了一些空间来存储 32 条消息并创建了环形缓冲区。

```
_playbackData->RTToMainBuffer = malloc(sizeof(MessageData) * 32);
PaUtil_InitializeRingBuffer(&_playbackData->RTToMainRB, sizeof(MessageData),
                            32, _playbackData->RTToMainBuffer); 
```

最后，我每 20 毫秒启动一个 NSTimer 从环形缓冲区中提取数据

```
while (PaUtil_GetRingBufferReadAvailable(&_playbackData->RTToMainRB)) {
    MessageData *dataPtr1, *dataPtr2;
    ring_buffer_size_t sizePtr1, sizePtr2;

    // Should we read more than one at a time?
    if (PaUtil_GetRingBufferReadRegions(&_playbackData->RTToMainRB, 1,
                                        (void *)&dataPtr1, &sizePtr1,
                                        (void *)&dataPtr2, &sizePtr2) != 1) {
        continue;
    }

    // Parse message
    switch (dataPtr1->type) {
        case MessageTypeEOS:
            break;

        case MessageTypePosition:
            break;

        default:
            break;
    }
    PaUtil_AdvanceRingBufferReadIndex(&_playbackData->RTToMainRB, 1);
} 
```

然后在实时线程中，将消息推送到环形缓冲区很简单

```
MessageData *dataPtr1, *dataPtr2;
ring_buffer_size_t sizePtr1, sizePtr2;

if (PaUtil_GetRingBufferWriteRegions(&data->RTToMainRB, 1,
                                     (void *)&dataPtr1, &sizePtr1,
                                     (void *)&dataPtr2, &sizePtr2)) {
    dataPtr1->type = MessageTypePosition;
    dataPtr1->data.position.position = currentPosition;

    PaUtil_AdvanceRingBufferWriteIndex(&data->RTToMainRB, 1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-15T12:07:13.177

环形缓冲区是一个很好的解决方案。如果您需要两种方式进行交流，请使用两个，即。收件箱/发件箱消息传递。

如果您不想使用 Portaudio，这对于 iOS/Mac 来说是一个很好的实现。

[https://github.com/michaeltyson/TPCircularBuffer](https://github.com/michaeltyson/TPCircularBuffer)

# c++ - 我的精灵没有出现在我的窗口上，不确定问题出在哪里

> ID：15514032
> 
> 赞同：0
> 
> 时间：2013-03-20T02:08:38.087
> 
> 标签：c++, direct3d, directx-9

我提供了我的 DirectX 项目：[http ://www.planetchili.net/forum/download/file.php?id=830](http://www.planetchili.net/forum/download/file.php?id=830)

它必须很简单，但我只是不太了解 API，无法找出问题所在......

我认为以下内容会有所帮助：

```
class D3DGraphics
{
public:
    D3DGraphics( HWND hWnd );
    ~D3DGraphics();

    void Begin();
    void End();
    void Present();

    LPDIRECT3D9 d3dObject;
    LPDIRECT3DDEVICE9 d3dDevice;
    D3DPRESENT_PARAMETERS presParams;
    HRESULT hr;
}; 
```

我声明了一个 D3DGraphics 类来启动我的对象和设备：

```
D3DGraphics::D3DGraphics( HWND hWnd )
    :
    d3dObject( NULL ),
    d3dDevice( NULL )
{
    ZeroMemory( &presParams, sizeof( presParams ) );
    presParams.Windowed=TRUE;
    presParams.SwapEffect=D3DSWAPEFFECT_DISCARD;
    presParams.BackBufferFormat=D3DFMT_UNKNOWN;
    presParams.PresentationInterval=D3DPRESENT_INTERVAL_ONE;

    d3dObject = Direct3DCreate9( D3D_SDK_VERSION );
    hr = d3dObject->CreateDevice(
        D3DADAPTER_DEFAULT,
        D3DDEVTYPE_HAL,
        hWnd, 
        D3DCREATE_HARDWARE_VERTEXPROCESSING, 
        &presParams, 
        &d3dDevice
    );
}; 
```

我的 WindowsAPI 正在创建我制作的 Game 类的实例，该类声明了构造函数：

```
HWND hWnd = CreateWindow("MyWindowClass", "Pubes", WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, hInstance, NULL);

ShowWindow(hWnd, nCmdShow);
UpdateWindow(hWnd);
Game theGame = Game( hWnd );

MSG msg;
ZeroMemory( &msg, sizeof(msg) );

while( msg.message!=WM_QUIT )
{
   if( PeekMessage( &msg, NULL, 0U, 0U, PM_REMOVE ) )
   {
      TranslateMessage( &msg );
      DispatchMessage( &msg );
   }
   else
   {
      theGame.Go();
   }
} 
```

最后，这是我的游戏类，它在构造函数上搞砸了，因为它无法创建第一段代码中提到的精灵，这里是完整的：

```
Game::Game( HWND hWnd )
    :
    gfx( hWnd )
{
    sprite = NULL;

    if ( SUCCEEDED( D3DXCreateSprite( gfx.d3dDevice, &sprite ) ) )
    {
          // returns s_OK           
    }   

    pos.x=10.0f;
    pos.y=20.0f;
    pos.z=0.0f;

    gTexture = NULL;

    if ( SUCCEEDED( D3DXCreateTextureFromFile( gfx.d3dDevice, "Images/character001.png", &gTexture ) ) )        
      {
          // returns s_OK           
    } 
```

gfx.d3dDevice->SetRenderState(D3DRS_ALPHABLENDENABLE, TRUE); };

```
Game::~Game()
{
    sprite->Release();
    gTexture->Release(); 
};

void Game::Go()
{
    gfx.Begin();
    ComposeFrame();
    gfx.Present();
    gfx.End();
}; 
```

gfx 是我的 Game 类头文件中声明的 D3DGraphics 的一个实例。

天哪，你们知道为什么我的精灵根本没有被渲染吗？

***//额外说明：我在输出中得到了这个，这可能与它有关？？***

我的 hWnd 变量包含我的窗口句柄：

```
HWND hWnd = CreateWindow("MyWindowClass", "Pubes", WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, hInstance, NULL);
    Game theGame = Game( hWnd ); 
```

说：

```
-       hWnd    0x000e0682 {unused=??? }    HWND__ *
        unused  <Unable to read memory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:20:05.380

```
gfx.Begin();
ComposeFrame();
gfx.End();
gfx.Present(); 
```

我是在结束场景之前展示的！！！

伊皮EE

# jsf - 无法解析表达式 [#{contatosController.adicionar(actionEvent)}]

> ID：15514033
> 
> 赞同：0
> 
> 时间：2013-03-20T02:08:40.860
> 
> 标签：jsf, el

我正在尝试学习 JSF 和 EL，但遇到以下错误：

```
/index.xhtml @20,120 actionListener="#{contatosController.adicionar(actionEvent)}" Q 
```

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:17:48.157

这意味着您的环境不支持使用参数调用方法的 EL 2.2 特性。`#{bean.method(argument)}`EL 2.1 和更早版本不支持EL 语法，因此无法解析。只是摆脱这种说法。无论如何，JSF 都会自行填充它。

```
actionListener="#{contatosController.adicionar}" 
```

请注意，即使您升级到 EL 2.2，它仍然会遇到麻烦，因为您实际上是在传递`null`给它（您没有托管 bean `#{actionEvent}`，对吗？）。实际上，您应该永远不需要自己指定 JSF（动作）侦听器方法的默认参数。

### 也可以看看：

*   [如何在 JSF 中调用带参数的方法](https://stackoverflow.com/questions/5273729/how-to-call-a-method-with-a-parameter-in-jsf/5273864#5273864)
*   [action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener/3909382#3909382)

# php - 如何返回 mysqli_query 的结果以便我可以在另一个函数中使用它？

> ID：15514041
> 
> 赞同：0
> 
> 时间：2013-03-20T02:09:35.123
> 
> 标签：php, mysql, mysqli

我正在尝试从数据库中返回用户的 ID 号，但我不知道如何返回查询结果。我曾经使用 mysql_result() 那么现在我使用 mysqli 需要做什么？

```
function user_id_from_username($username){
$query = mysqli_query($conn, "SELECT `user_id` FROM `users` WHERE `username` = '$username'");

return (what?);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:17:41.463

`mysql`您还没有获得从to迁移的主要好处之一`mysqli`，即使用准备好的语句来参数化您的查询并保护自己免受注入。

```
$query = mysqli_prepare($conn, "SELECT user_id FROM `users` WHERE username = ?");
mysqli_stmt_bind_param($query, "s", $username);
mysqli_stmt_execute($query);
mysqli_stmt_bind_result($query, $userid);
mysqli_stmt_fetch($query);
//$userid is now user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:16:47.543

检查此[http://php.net/manual/en/mysqli.query.php](http://php.net/manual/en/mysqli.query.php)以了解 myqli_query 的使用情况。这个[http://www.php.net/manual/en/class.mysqli-result.php](http://www.php.net/manual/en/class.mysqli-result.php)关于如何从结果中获取值。

# php - 回显列中的所有行

> ID：15514042
> 
> 赞同：0
> 
> 时间：2013-03-20T02:09:37.040
> 
> 标签：php, mysql, row, echo

我需要回显 SQL 列中的所有行。

这是我的PHP

```
$query2="SELECT * FROM field_activity WHERE field_id='$fetch'";
$result2 = mysql_query($query2);
while($row = mysql_fetch_array($result2)){
    $activity = $row['activity'];
    $cr_date = date_create($row['date']);
    $for_date = date_format($cr_date, 'F j, Y');
    $amount = $row['amount'];
    $acres_complete = $row['acres_complete'];
    $duration = $row['duration'];
    $status = $row['status'];
} 
```

这是我的 HTML 输出..

```
<?php
{
    echo "<tr>";
    echo "<td width='16%'><strong>Date</strong></td>";
    echo "<td width='16%'>$for_date</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Activity</strong></td>";
    echo "<td width='16%'>$activity</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Amount</strong></td>";
    echo "<td width='16%'>$amount</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Acres Complete</strong></td>";
    echo "<td width='16%'>$acres_complete</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Duration</strong></td>";
    echo "<td width='16%'>$duration</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Status</strong></td>";
    echo "<td width='16%'>$status</td>";
    echo "</tr>";
}
?> 
```

这仅显示列中的一行（最新行）..我希望它显示所有行..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:11:50.973

您实际上需要在循环中进行回显。如果将所有`echo`语句移到`while`循环的末尾，它将完全按照您的预期工作。您还需要`<table>`和`</table>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:12:06.117

请将您的一行 HTML 回显嵌入到 while 循环中，一切都会完成

或者

您可以在循环中构建您的 html 字符串并在其他地方回显您的 html 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:12:11.060

您正在覆盖您的 while 循环中的变量，因此只有最后一个值将存储在您的变量中。

试试这个：

```
$query2="SELECT * FROM field_activity WHERE field_id='$fetch'";
$result2 = mysql_query($query2);
while($row = mysql_fetch_array($result2)){

    $activity = $row['activity'];
    $cr_date = date_create($row['date']);
    $for_date = date_format($cr_date, 'F j, Y');
    $amount = $row['amount'];
    $acres_complete = $row['acres_complete'];
    $duration = $row['duration'];
    $status = $row['status'];

    echo "<tr>";
    echo "<td width='16%'><strong>Date</strong></td>";
    echo "<td width='16%'>$for_date</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Activity</strong></td>";
    echo "<td width='16%'>$activity</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Amount</strong></td>";
    echo "<td width='16%'>$amount</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Acres Complete</strong></td>";
    echo "<td width='16%'>$acres_complete</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Duration</strong></td>";
    echo "<td width='16%'>$duration</td>";
    echo "</tr><tr>";
    echo "<td width='16%'><strong>Status</strong></td>";
    echo "<td width='16%'>$status</td>";
    echo "</tr>";

} 
```

此外，这不是很好的代码。

# c++ - Visual Studio C/C++ 是否支持自动软件预取？

> ID：15514054
> 
> 赞同：3
> 
> 时间：2013-03-20T02:11:12.580
> 
> 标签：c++, c, visual-studio, prefetch

[Intel](http://software.intel.com/en-us/articles/how-to-choose-between-hardware-and-software-prefetch-on-32-bit-intel-architecture)和[IBM 的 xlc](http://publib.boulder.ibm.com/infocenter/comphelp/v101v121/index.jsp?topic=/com.ibm.xlcpp101.aix.doc/compiler_ref/opt_prefetch.html)等编译器可以自动插入数据预取指令。

我有一些代码可以以牺牲可读性为代价进行预取。也就是说，有一个自然的代码分组，例如

```
void foo(...){ // foo gets called frequently
...
char *myPtr = allocate(medium_size);
memset(myPtr,0,medium_size)  // cache misses here. medium_size is ~ 1 cache line 
                       // Miss occurs on first access by memset, but not enough
                       // data to ameliorate by any hardware prefetching 
                       // triggered by memset.  Basically foo() is called a lot 
```

memset 导致的缓存未命中成本可以通过在过程中进一步推动分配并在之后立即发出预取指令来减轻，在它和 memset 之间有足够的指令以便有时间将数据带入缓存。在我的情况下，计算 medium_size 的代码在过程中进一步推高时会变得有点混乱，使其可读性降低。

如果编译器可以为我重新安排代码以使预取值得（也许在[PGO](http://msdn.microsoft.com/en-us/library/aa289170%28v=VS.71%29.aspx)的支持下），那么我可以两全其美。

到目前为止，Visual Studio 似乎只支持内在函数，即手动放置预取指令。我错了吗？

* * *

针对问题的澄清更新：

问：编译器如何改进上述代码？答：上面的代码只是为了说明所涉及的内容。实际代码更复杂，但归结为分配和存储。读取是由 memset 在写入内存时完成的。在某些架构上，这可能不会触发缓存未命中，但在 x86 上它显然会触发（根据 vTune）（由下面的 markgz 回答）。

问：仅仅使用 memset 还不够吗？memset 的内存访问模式是高度可预测的，硬件预取机制应该处理它。答：是的，总的来说这是真的，我在解释更多上下文方面做得很差。包含 memset 的例程 (foo) 被非常频繁地调用，它是 memset 触发缓存未命中的第一次内存访问。memset 没有足够的数据通过预取来改善这种缺失，所以我需要在调用 memset 之前进行预取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-16T09:41:58.253

是的，你可以使用

无效 _mm_prefetch(char*,int)

# api - 如何在WIN32 API的新行中写入文件

> ID：15514067
> 
> 赞同：0
> 
> 时间：2013-03-20T02:11:58.220
> 
> 标签：api, winapi, file-io, newline

我正在尝试将数据写入文件。但是，我想在新行中添加新数据，但现在不能。

```
HANDLE hFile;
hFile = CreateFile(_T("HELLO.txt"),               // file to open
    GENERIC_WRITE,          // open for writing
                   0,       // share for writing
                   NULL,                  // default security
                 //  CREATE_NEW,         // existing file only
                 OPEN_ALWAYS,
                   FILE_ATTRIBUTE_NORMAL, // normal file
                   NULL);                 // no attr. template

// Write to File
BOOL bErrorFlag = FALSE;

DWORD dwPtr = SetFilePointer( hFile, 0, NULL, FILE_END); //set pointer position to end file
LPWSTR data = _T("Data '\n'");
DWORD dwBytesToWrite = lstrlenW(data)*2;
DWORD a = 0;
bErrorFlag = WriteFile( 
                hFile,           // open file handle
                data,      // start of data to write
                dwBytesToWrite,  // number of bytes to write
                &dwPtr, // number of bytes that were written
                NULL);            // no overlapped structure 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:43:31.357

Windows 使用 CR/LF 组合来表示行尾，如果您希望在记事本等中正确显示换行符，则需要编写“\r\n”。

# c - 用 read 实现 getchar

> ID：15514068
> 
> 赞同：1
> 
> 时间：2013-03-20T02:12:01.567
> 
> 标签：c

我试图在 unistd.h 中使用 read() 实现 getchar() 函数。

由于系统调用很昂贵，我想尽可能少执行 read() 函数。

如果我使用“getchar”，它工作正常。但是，“mygetchar”在这种情况下不起作用。

谁能指出我在下面做错了什么？

```
#include <stdio.h>
#include <unistd.h>

#define BUF_SIZE 1024

int startIndex;
int endIndex;

int mygetchar(void){
  char buffer[BUF_SIZE];
  startIndex=0;
  endIndex=0;
  if(startIndex == endIndex){
    int r;
    r = read(0,buffer,BUF_SIZE);
    startIndex=0;
    endIndex=r;
  }
  return buffer[startIndex++];
}

int main(){
  char c;
  int i=0;
  do{
    c = mygetchar();
    putchar(c);
    i++;
  }
  while(c != EOF);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:15:10.123

仔细考虑你的缓冲区。函数调用结束时缓冲区会发生什么？它消失了。

这意味着对于 1024 次调用中的 1023 次，您的缓冲区未初始化，并且您的偏移量指向无意义的数据。

* * *

基本上，您也需要缓冲区的全局变量：

```
static char buf[BUF_SIZE];
static size_t bufCur = 0;
static size_t bufEnd = 0;

int mygetchar(void)
{
    // ...
} 
```

（请注意，当您的代码都在一个文件中时，静态几乎毫无意义。如果您要将 mygetchar 拉到头文件和实现文件中，您将希望使用静态全局以防止它被链接在同一编译单元之外。）

（有趣的事实：`0`s`bufCur`和`bufEnd`实际上可以隐含。为了清楚起见，我会放它们，但[标准规定](https://stackoverflow.com/a/60707/567864)它们要进行零初始化。

* * *

正如 Jonathan Leffler 指出的那样，除非您计划在其他地方使用缓冲区（我不知道那会在哪里），否则不需要全局。您可以在函数内部使用静态变量：

```
void mygetchar(void)
{
    static buf[BUF_SIZE];
    static size_t bufCur = 0;
    static size_t bufEnd = 0;
    // ...
} 
```

# javascript - 使用 Amazon Elastic Transcoder 获取视频文件的视频分辨率

> ID：15514074
> 
> 赞同：3
> 
> 时间：2013-03-20T02:12:15.147
> 
> 标签：javascript, video, amazon-web-services, amazon-s3, html5-video

我们有这个配置工作：

```
1- Display a JS Upload Form to the visitor
2- Upload file chosen direclty to Amazon S3
3- Transcode the Video in MP4 using Amazon Elastic Transcoder with options:
       * resolution: auto
       * thumbnails: on, every 2sec 
```

一切正常。但是，我需要获得原始视频分辨率/比率有两个原因。第一个原因是能够为缩略图生成设置一个好的比例。（有时是 16/9、4/3、iphone 视频...）第二个原因是显示具有完美比例的 HTML5 视频播放器，以避免播放器两侧出现空白。

由于`Amazon Elastic Transcoder`已经自动检测到视频分辨率，我在想他们可能有办法返回检测到的分辨率，但是......似乎并非如此！

任何人都可以考虑获得视频分辨率/比例的方法吗？我目前的解决方案是从我的服务器上的 S3 下载视频，并使用`FFmpeg`or检测分辨率`FFprobe`。显然，这并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:08:41.523

我有一种方法可能对您有用，但我只想提一下，无法直接访问有关上传视频的元数据会直接限制弹性转码器服务的实用性，以至于我强烈建议您使用类似的替代方法[encoding.com](http://encoding.com)（具有讽刺意味的是，他们自己的服务器[托管在 AWS 上](http://aws.amazon.com/solutions/case-studies/encoding/)）。

* * *

所以我的解决方案是，您可以使用预设编码作业，通过将其设置为“自动”来[创建与原始上传视频的纵横比相匹配的缩略图文件：](http://docs.aws.amazon.com/elastictranscoder/latest/developerguide/preset-settings.html#preset-settings-thumbnails)

> 缩略图的纵横比。如果您希望 Elastic Transcoder 自动检测输入文件中的纵横比并将该值用于缩略图，请选择自动。如果要指定缩略图的纵横比，请选择适用的值。

此时，您现在有两种方法可以实际访问原始视频的宽高比（这两种方法都涉及 JavaScript）：

1\. 编写下载第一个缩略图文件的JS，并显式解析图像尺寸并通过宽除高计算纵横比。

或者

2.`ThumbnailPattern` [当您创建原始作业时，使用“](http://docs.aws.amazon.com/elastictranscoder/latest/developerguide/get-job.html#get-job-requests) [{resolution}](http://docs.aws.amazon.com/elastictranscoder/latest/developerguide/job-settings.html) ”占位符指定将生成包含图像文件分辨率的缩略图文件名：

> 缩略图文件名模式
> 
> {resolution}（可选）：如果您希望 Elastic Transcoder 在文件名中包含分辨率，请在字段中包含 {resolution}。

然后你就可以了，所以你只需要获取编码视频的第一个图像缩略图，并使用 JS 解析文件名以获得分辨率并计算纵横比。

这两种方法都有点老套，但受益于不需要进行任何额外的视频处理，并且将来当/如果 AWS 允许您访问元数据时，您应该有一个非常简单的升级路径来消除这种混乱。

根据亚马逊论坛中 AWS 开发人员的回复，访问视频元数据可能会在不久的将来变得可用，所以我猜您还有第三种选择等待，这个问题可能会自行解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T19:44:03.867

现在可以检索有关作业的输入视频和输出视频的任何信息：http:
[//docs.aws.amazon.com/elastictranscoder/latest/developerguide/get-job.html](http://docs.aws.amazon.com/elastictranscoder/latest/developerguide/get-job.html)

# ruby - 返回单个字母的 Ruby 方法

> ID：15514076
> 
> 赞同：-2
> 
> 时间：2013-03-20T02:12:52.120
> 
> 标签：ruby

我想知道是否有办法返回单词的第一个字母。就像你输入 word("hey") 它只会返回字母 h。或者，如果您愿意，可以返回字母 e。自己一个人。我正在考虑使用中断方法或扫描，但我似乎无法让它们工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:15:52.463

是的：

```
def first_letter(word)
  word[0]
end 
```

或者，如果使用 Ruby 1.8：

```
def first_letter(word)
  word.chars[0]
end 
```

使用语法`str[index]`获取单词的特定字母（0 是第一个字母，1 秒，依此类推）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T02:27:20.350

您可以查看的另一种方法是`chr`返回字符串的第一个字符

```
>> 'hey'.chr # 'h' 
```

您还可以查看[http://www.ruby-doc.org/core-1.9.3/String.html#method-i-slice](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-slice)了解如何结合正则表达式和索引来获取字符串的一部分。

更新：如果您使用的是 ruby​​ 1.8，这有点骇人听闻，但

```
>> 'hey'[0] # 104
>> 'hey'[0..0] # 'h'
>> 'hey'.slice(0,1) # 'h' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T03:24:37.903

这是一个幼稚的实现，但是您可以使用它`method_missing`来创建一个 DSL，它允许您在一个单词中查询不同位置的字母：

```
def self.method_missing(method, *args)
  number_dictionary = {
    first: 1,
    second: 2,
    third: 3,
    fourth: 4,
    fifth: 5,
    sixth: 6,
    seventh: 7,
    eighth: 8,
    ninth: 9,
    tenth: 10
  }

  if method.to_s =~ /(.+)_letter/ && number = number_dictionary[$1.to_sym]
    puts args[0][number - 1]
  else
    super
  end
end

first_letter('hey')  # => 'h'
second_letter('hey') # => 'e'
third_letter('hey')  # => 'y' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T02:29:23.587

使用您的示例-“嘿”一词：

```
h = "hey"

puts h[0] 
```

这应该返回`h`。

# java - 从字符串中修剪所有“空格”

> ID：15514079
> 
> 赞同：1
> 
> 时间：2013-03-20T02:13:21.307
> 
> 标签：java, regex, parsing

我正在解析 PDF 并获得很多字符串`\t, \r, \n,\s`......而且它们**出现在字符串的两端并且没有按顺序出现**。所以我可以有一个
例子：

“`\t\s\t\n`我需要的一些重要数据被无用的数据包围`\r\t\s\s\r\t\t`”

。有没有有效的方法来修剪这些字符串？到目前为止我所拥有的还不够好，因为我想要一些符号。：

```
public static String trimToLetters(String sourceString) {
        int beginIndex = 0;
        int endIndex = sourceString.length() - 1;
        Pattern p = Pattern.compile("[A-Z_a-z\\;\\.\\(\\)\\*\\?\\:\\\"\\']");
        Matcher matcher = p.matcher(sourceString);
        if (matcher.find()) {
            if (matcher.start() >= 0) {
                beginIndex = matcher.start();
                StringBuilder sb = new StringBuilder(sourceString);
                String sourceReverse = sb.reverse().toString();
                matcher = p.matcher(sourceReverse);
                if (matcher.find()) {
                    endIndex = sourceString.length() - matcher.start();
                }
            }
        }
        return sourceString.substring(beginIndex, endIndex);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T02:15:45.713

的`trim`方法`String`应该能够从字符串的两端删除所有空格：

> `trim`：返回字符串的副本，省略前导和尾随空格。

PS`\s`在 Java 中不是有效的转义序列。

# asp.net-mvc-3 - 在 ASP.net MVC 视图页面上使用 UniDynArray

> ID：15514083
> 
> 赞同：2
> 
> 时间：2013-03-20T02:14:11.177
> 
> 标签：asp.net-mvc-3, u2, universe, uniobjects, u2netdk

谁能帮助我如何在 ASP.net MVC3 (MS Visual Studio 2010) 查看页面上使用 UniDynArray？

我设法将引用（U2.Data.Client）添加到项目中，并且可以在控制器中使用它，但不能在视图页面中使用。

使用 UniDynArray 的原因是，我想将动态数组从 Controller 传递给 View 并返回给控制器。这样我就不必将每个字段都设置为 VIEWDATA 以便在 View 中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T20:39:00.113

我想解释一下如何通过以下方式将 UniDynArray 从 Controller 传递给 MVC View：

1.  MVVM 模式（原始 UniDynArray）
2.  ViewBag 模式（原始 UniDynArray）
3.  MVVM 模式（将 UniDynArray、UniDynArray 展平为 .NET 对象数据表）
4.  MVVM 模式（将 UniDynArray、UniDynArray 展平为 POCO 对象）

在这篇文章中，我将回答 MVVM Pattern (Raw UniDynArray)。稍后我将介绍休息。

**创建 ASP.NET MVC3 项目** ![图1](../Images/7a46f2a9451d047493d6307bdec7cc4b.png)

**创建模型** ![图2](../Images/14af5a233f180ab68bca88137ec1079c.png)

![图3](../Images/fc22c8177b1a41adcd2a9298d58cb9c9.png)

**添加控制器** ![图4](../Images/0399b381df8135a183411aca7e5cd689.png)

![图5](../Images/478db3280580469e576b3c504268d427.png)

**创建视图** ![图片5a](../Images/0a1384e38cb568a1d035a1a012363303.png)

![图片5b](../Images/537f65224d1e3270321a24ff20c51805.png)

**打开“CustomerViewModel.cs”文件并粘贴以下代码**

命名空间 Test_MvcApplication.Models {

```
public class CustomerViewModel
{
    public Customer MyCustomer { get; set; }
    public CustomerViewModel(Customer pCustomer)
    {
        MyCustomer = pCustomer;
    }
}

public class Customer
{
    private UniDynArray myVar;
    public UniDynArray MyUniDynArray
    {
        get
        {
            U2ConnectionStringBuilder conn_str = new U2ConnectionStringBuilder();
            conn_str.UserID = "user";
            conn_str.Password = "pass";
            conn_str.Server = "localhost";
            conn_str.Database = "HS.SALES";
            conn_str.ServerType = "UNIVERSE";
            conn_str.AccessMode = "Native";   // FOR UO
            conn_str.RpcServiceType = "uvcs"; // FOR UO
            conn_str.Pooling = false;
            string s = conn_str.ToString();
            U2Connection con = new U2Connection();
            con.ConnectionString = s;
            con.Open();
            Console.WriteLine("Connected.........................");

            // get RECID

            UniSession us1 = con.UniSession;

            UniSelectList sl = us1.CreateUniSelectList(2);

            // Select UniFile
            UniFile fl = us1.CreateUniFile("CUSTOMER");
            fl.RecordID = "2";
            myVar = fl.Read();
            return myVar;
        }
        set
        {
            myVar = value;
        }
    }
} 
```

}

**打开“MyUniDynArrayController.cs”并粘贴以下代码。当您注意到您正在将对象传递给视图并且该对象具有 UniDynArray**

命名空间 Test_MvcApplication.Controllers { public class MyUniDynArrayController : Controller { // // GET: /MyUniDynArray/

```
 public ActionResult Index()
    {
        Customer c = new Customer();
        UniDynArray r = c.MyUniDynArray;

        var l = new CustomerViewModel(c);

        return View(l);

    }

} 
```

}

**打开“MyUniDynArray\ Index.cshtml”并粘贴以下代码。@Model 包含 ViewModel 对象 (UniDynArray)**

@{ ViewBag.Title = "索引"; }

## MyUniDynArray

## ===================

## @Model.MyCustomer.MyUniDynArray

![图片8](../Images/4901c960048c6047629e238006183637.png)

**打开“Shared\Layout.cshtml”文件并添加以下行**

```
<nav>
            <ul id="menu">
                <li>@Html.ActionLink("MyUniDynArray", "Index", "MyUniDynArray")</li>
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                <li>@Html.ActionLink("About", "About", "Home")</li>

            </ul>
 </nav> 
```

![图9](../Images/0f5b74437f369d89206a9fc20042f168.png)

**运行应用程序并按“MyUniDynArray”。您将在视图中看到 UniDynArray。我不确定您将如何将 UniDynArray 与 HTML5/Razor 控件绑定。这就是为什么我建议你扁平化 UniDynArray。**

![图6](../Images/8b4f3c56a03edfa9128daecc7a1fcb01.png)

![图7](../Images/bacc7506c47127fcd8f7065ad96b540c.png)

**在 MVC 视图中键入 UniDynArray**

![在此处输入图像描述](../Images/5d398ac7bf7a322429e6589aca5938bb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:26:41.663

在这篇文章中，我想描述“MVVM Pattern (flatten UniDynArray, UniDynArray to .NET Object Object)”。

**创建模型** ![图1](../Images/284360bf006ca2cef1ae69302d40e1a0.png)

**创建控制器** ![图2](../Images/bf0a0849da4d96070180d5a611005e0f.png)

**创建视图** ![图3](../Images/8cbe2956ba1df37c2028fade90c9dcc4.png)

**打开模型文件 (Models\CustomerViewModel2.cs) 并粘贴代码**

命名空间 Test_MvcApplication.Models {

```
public class Customer2
{
    public int ID { get; set; }
    public string Name { get; set; }
    public DateTime HireDate { get; set; }
}

public class Customer2Repository
{
    private List<Customer2> m_custList = new List<Customer2>();
    public  List<Customer2> CustomerList 
    {

        get
        {
            U2ConnectionStringBuilder l = new U2ConnectionStringBuilder();
            l.Server = "localhost";
            l.UserID = "user";
            l.Password = "pass";
            l.Database = "HS.SALES";
            l.ServerType = "universe";
            string lconnstr = l.ToString();
            U2Connection c = new U2Connection();
            c.ConnectionString = lconnstr;
            c.Open();
            U2Command command = c.CreateCommand();
            command.CommandText = "CALL MV_TO_DATASET_SELECT_SUBROUTINE(?,?)"; // UniVerse subroutine
            command.CommandType = CommandType.StoredProcedure;
            U2Parameter p1 = new U2Parameter();
            p1.Direction = ParameterDirection.InputOutput;
            p1.Value = "";
            p1.ParameterName = "@arg1";

            U2Parameter p2 = new U2Parameter();
            p2.Direction = ParameterDirection.InputOutput;

            p2.Value = "";
            p2.ParameterName = "@arg2";

            command.Parameters.Add(p1);
            command.Parameters.Add(p2);

            command.ExecuteNonQuery();

            string lRetValue = (string)command.Parameters[1].Value;

            //command.Parameters[1].MV_To_POCO<int>();
            m_custList = command.Parameters[1].MV_To_POCO<Customer2>();

            return m_custList;
        }

        set
        {
            m_custList = value;
        }

    }
}

public class CustomerViewModel2
{
   public Customer2 MyCustomer2 { get; set; }
   public List<Customer2> CustomerList { get; set; }
    public CustomerViewModel2(Customer2 pCustomer)
    {
        MyCustomer2 = pCustomer;
    }
    public CustomerViewModel2(List<Customer2> pCustomerList)
    {
        CustomerList = pCustomerList;
    }
} 
```

}

**打开控制器文件 (Controllers\MyUniDynArray2Controller.cs)**

命名空间 Test_MvcApplication.Controllers { public class MyUniDynArray2Controller : Controller { // // GET: /MyUniDynArrayController2/

```
 public ActionResult Index()
    {
        Customer2Repository lvar = new Customer2Repository();
        List<Customer2> lCustomer2List = lvar.CustomerList;

        var l = new CustomerViewModel2(lCustomer2List);

        return View(l);

    }

} 
```

}

![图4](../Images/1ee1f2d87917c82903e59c03c9a66ce9.png)

**打开视图文件 (Views\MyUniDynArray2\Index.cshtml)**

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<table border="1"> 
<tr> 
    <td>ID</td> 
    <td>Name</td> 
    <td>HireDate</td> 

</tr> 
@foreach (var myItem in Model.CustomerList)
{

    <tr> 
        <td>@myItem.ID</td> 
        <td>@myItem.Name</td> 
        <td>@myItem.HireDate</td> 

    </tr> 
}
</table> 
```

![图5](../Images/9ad9a5e20721bb257adae0235ac36e40.png)

**打开“Shared\Layout.cshtml”文件并添加以下行**

```
<nav>
                <ul id="menu">
                    <li>@Html.ActionLink("MyUniDynArray2", "Index", "MyUniDynArray2")</li>
                    <li>@Html.ActionLink("MyUniDynArray", "Index", "MyUniDynArray")</li>
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("About", "About", "Home")</li>

                </ul>
</nav> 
```

![图6](../Images/78a91b934575d52109df16aca5ad4e38.png)

**运行应用程序并按“MyUniDynArray2”。您将看到 Flatten UniDynArray。基本上 UniDynArray 成为 .NET 对象的数组（列表）**

![图7](../Images/4e8032b83500f9e9921d0955f3a01b4c.png)

**使用的宇宙子程序**

```
SUBROUTINE MV_TO_DATASET_SELECT_SUBROUTINE(ARG_INPUT,ARG_OUTPUT) 
```

x = ARG_INPUT

ARG_OUTPUT = "100":@VM:"101":@VM:"102":@VM:"103":@FM:"Nancy":@VM:"Andrew":@VM:"Janet":@VM :"玛格丽特":@FM:"01/06/1991":@VM:"06/07/1996":@VM:"11/08/1999":@VM:"12/10/2001"

返回

# excel - 将 Excel 工作表的保护状态传递给单元格

> ID：15514086
> 
> 赞同：1
> 
> 时间：2013-03-20T02:14:45.427
> 
> 标签：excel, protection, worksheet, vba

我很好奇是否可以将excel工作表的保护状态传递给该工作表的单元格。例如

*   Sheet1 被锁定以进行编辑...单元格`A1`将被编程为*“锁定”*
*   Sheet1 已解锁...单元格`A1`会说*"unlocked"*。

工作表上的按钮将用于打开和关闭工作表保护。

我的工作表将在使用 workbook_open 事件打开时被锁定。

这是一张我不希望公式在使用时全部搞砸但可能需要完全访问权限的工作表。它更多地提醒用户他们处于“解锁”模式，因此要格外小心。

使用 VBA 已成定局吗？

我是 VBA 菜鸟，但不介意使用代码作为解决方案

欢迎任何想法或建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:42:47.623

将它放在工作表的代码模块中，这将在状态栏中放置一个提醒（这避免了需要锁定/解锁工作表才能将状态写入单元格 A1）。

**把它放在 Sheet1 代码模块中。**每次激活 sheet1 时，宏都会执行。

```
Private Sub Worksheet_Activate()
If ActiveSheet.ProtectContents then
    Application.StatusBar = "This sheet is protected"
Else:
    Application.StatusBar = "This sheet is unprotected"
End If
End Sub

Private Sub Worksheet_Deactivate()
    Application.StatusBar = False
End Sub 
```

**要保护/取消保护工作表，您可以将其添加到“插入”>“模块”。** 然后将这些宏附加到单独的命令按钮，或从开发人员>宏功能区运行。

```
Const myPassword as String = "password" '<-- replace "password" with your password

Sub Sht1Protect()
    Sheet1.Protect myPassword
End Sub

Sub Sht1Unprotect()
    Sheet1.Unprotect myPassword
End Sub 
```

**为确保关闭文件时工作表始终受到保护，请将其插入工作簿代码模块**

```
Private Sub Workbook_Close()
    Sht1Protect
End Sub 
```

您可能需要额外的处理来控制文件是否保存/不保存等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:06:56.220

您可以使用 Sheet1 上的 ActiveX 按钮中的代码来简单地执行此操作

```
Const strPAss = "test"

Private Sub CommandButton1_Click()
 If ActiveSheet.ProtectContents Then
 ActiveSheet.Unprotect strPAss
 [a1].Value = "unlocked"
 Else
 [a1].Value = "locked"
 ActiveSheet.Protect strPAss
 End If
End Sub 
```

# java - 混淆它！为什么这个简单的测试用例不起作用？

> ID：15514096
> 
> 赞同：1
> 
> 时间：2013-03-20T02:17:01.210
> 
> 标签：java

```
@Test
public void testCamelCase() {
    String orig="want_to_be_a_camel";
    String camel=orig.replaceAll("_([a-z])", "$1".toUpperCase());
    System.out.println(camel);
    assertEquals("wantToBeACamel", camel);
} 
```

显示“wanttobeacamel”后失败。为什么没有大写字符？

```
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode) 
```

========= 验尸：

使用简单的 replaceAll 是一条死胡同。我这样做只是为了教我的孩子编码......但是对于提出要求的 Jayamohan，这是另一种方法。

```
public String toCamelCase(String str) {
    if (str==null || str.length()==0) {
        return str;
    }
    char[] ar=str.toCharArray();
    int backref=0;
    ar[0]=Character.toLowerCase(ar[0]);
    for (int i=0; i<ar.length; i++) {
        if (ar[i]=='_') {
            ar[i-backref++]=Character.toUpperCase(ar[i+++1]);
        } else {
            ar[i-backref]=ar[i];
        }
    }
    return new String(ar).substring(0,ar.length-backref);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T02:30:37.323

我认为这是因为 "$1".toUpperCase() 在 replaceAll 之前运行。由于“$1”字面上没有任何大写字母，因此就好像它只是“$1”一样。然后当 replaceAll 运行时，模式下划线跟随小写字母被替换为小写字母。

# ruby-on-rails - “环绕”查询可能吗？

> ID：15514106
> 
> 赞同：1
> 
> 时间：2013-03-20T02:18:33.030
> 
> 标签：ruby-on-rails, activerecord

我不确定这个的正确术语是什么，但这是我想要做的：

假设我的数据库中有 10 个项目（1、2、3 ... 10）。当我显示任何单个项目（比如项目#3）时，我还想加载接下来的 5 个项目（在这种情况下为 4、5、6、7、8）。

现在这是棘手的部分：我总是希望有 5 个下一个项目，所以当我在第 8 个项目时（例如），我想“环绕”并从头开始，所以接下来的 5 个项目是 9 , 10, 1, 2, 3。

可以在一个查询中执行此操作吗？

# regex - 如何在 Perl 中将正则表达式模式定义为常量？

> ID：15514108
> 
> 赞同：6
> 
> 时间：2013-03-20T02:18:46.213
> 
> 标签：regex, perl, datetime

我想在顶部的脚本中定义一个正则表达式常量，稍后使用它来检查日期字符串的格式。

我的日期字符串将被定义为

> $a="2013-03-20 11:09:30.788";

但它失败了。我应该怎么做 ？

```
 use strict;
 use warnings;

 use constant REGEXP1 => "/^\d{4}\D\d{2}\D\d{2}\D\d{2}\D\d{2}\D\d{2}\D\d{3}$/";

 $a="2013-03-20 11:09:30.788";
 if(not $a=~&REGEXP1){
         print "not"

 }else{
         print "yes"

 }
 print "\n"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T04:02:17.767

首先，让我们看看`"/^\d{4}\D\d{2}\D\d{2}\D\d{2}\D\d{2}\D\d{2}\D\d{3}$/";`如果你有警告，你应该得到：

```
无法识别的转义 \d 在 C:\temp\jj.pl 第 7 行通过。
无法识别的转义 \D 在 C:\temp\jj.pl 第 7 行通过。
无法识别的转义 \d 在 C:\temp\jj.pl 第 7 行通过。
…
```

如果你打印 的值`REGEXP1`，你会得到`/^d{4}Dd{2}Dd{2}Dd{2}Dd{2}Dd{2}Dd{3}`（*等等，发生了**`$/`**什么？）。显然，这看起来不像您想要的模式。

现在，您可以键入`"/^\\d{4}\\D\\d{2}\\D\\d{2}\\D\\d{2}\\D\\d{2}\\D\\d{2}\\D\\d{3}\$/"`然后将该字符串插入到一个模式中，但是这工作量太大了。相反，您可以使用正则[表达式引号运算符`qr`](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)定义常量：

```
#!/usr/bin/env perl

use 5.012;
use strict;
use warnings;

use constant REGEXP1 => qr/^\d{4}\D\d{2}\D\d{2}\D\d{2}\D\d{2}\D\d{2}\D\d{3}$/;

my $s = "2013-03-20 11:09:30.788";

say $s =~ REGEXP1 ? 'yes' : 'no'; 
```

还有一个陷阱：`\d`和`\D`将分别匹配不止`[0-9]`和`[^0-9]`。所以，相反，你可以这样写你的模式：

```
use constant REGEXP1 => qr{
    \A
    (?<year>  [0-9]{4} ) -
    (?<month> [0-9]{2} ) -
    (?<day>   [0-9]{2} ) [ ]
    (?<hour>  [0-9]{2} ) :
    (?<min>   [0-9]{2} ) :
    (?<sec>   [0-9]{2} ) [.]
    (?<msec>  [0-9]{3} )
    \z
}x; 
```

但是，您仍然面临这些值是否有意义的问题。如果这很重要，您可以使用[DateTime::Format::Strptime](http://search.cpan.org/perldoc/DateTime%3a%3aFormat%3a%3aStrptime)。

```
#!/usr/bin/env perl

use 5.012;
use strict;
use warnings;

use DateTime::Format::Strptime;

my $s = "2013-03-20 11:09:30.788";

my $strp = DateTime::Format::Strptime->new(
    pattern => '%Y-%m-%d %H:%M:%S.%3N',
    on_error => 'croak',
);

my $dt = $strp->parse_datetime($s);
say $strp->format_datetime($dt); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T02:29:55.440

您使用的是哪个版本的 Perl？如果您将其更改为，它在 5.8.8（但不适用于 5.004）中对我有用：

```
use constant REGEXP1 => qr/^\d{4}\D\d{2}\D\d{2}\D\d{2}\D\d{2}\D\d{2}\D\d{3}$/; 
```

# android - Android Instrumentation 测试关注点：调试与发布模式

> ID：15514109
> 
> 赞同：1
> 
> 时间：2013-03-20T02:18:47.310
> 
> 标签：android, performance, debugging, release, jit

为了自动化测试，我们正在考虑 Android 仪器测试。但是，我们担心如果将单元测试置于调试模式，性能可能会有很大差异。经过一番搜索，似乎没有明确的答案。因此，我们需要对以下几点进行澄清。

1.  Eclipse/ADT 是否使用相同的编译器优化选项编译项目，无论它是处于调试模式还是发布模式？

2.  Eclipse/ADT 生成的 apk 始终处于调试模式（无论“运行方式”还是“调试方式”）。构建发布版本的建议方法是通过导出向导。唯一的区别是生成的 AndroidManifest.xml 中的属性“android:debuggable='true'”。如果未启用 proguard，则生成的大小似乎相同。假设没有编译器优化，这个属性是否会导致或显着改变运行时的 JIT 优化？

3.  我们使用调试密钥对 apk 进行签名，它似乎可以工作。生成的 apk 是否真的是发布版本（我们认为是因为“android:debuggable="true" 已删除）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:10:05.467

1）是与否，即使优化相同，应用程序运行速度也会变慢，因为它将有很多子进程监控它。

2) AFAIK 这并不重要，但会影响您的应用程序的性能。

3）它会工作，但不推荐，你应该尝试在这里阅读SDK [http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

# apache - 由于用户代理导致的 Apache 500 错误？

> ID：15514110
> 
> 赞同：0
> 
> 时间：2013-03-20T02:18:48.827
> 
> 标签：apache, user-agent

我目前使用提供给我自己的令人震惊的探测 shell 脚本从 Apache 收到 500 个错误。

不幸的是，当尝试在服务器上本地访问内容但使用 wget 和 telnet 等其他方法工作正常时，我无法深入了解为什么脚本会生成 500 错误。

以下是每次尝试的 Apache 访问日志条目：

使用 wget

```
127.0.0.1 - "" [19/Mar/2013:14:31:44 +1100] "GET /index.html HTTP/1.1" 200 1635 "-" "Wget/1.13.3" "-" 
```

使用 Telnet

```
127.0.0.1 - "" [20/Mar/2013:13:12:11 +1100] "GET /index.html HTTP/1.1" 200 1635 "-" "-" "-" 
```

使用探测脚本

```
127.0.0.1 - -  [19/Mar/2013:14:33:56 +1100] "GET /index.html HTTP/1.1" 500 -    "-" "" "-" 
```

我能看到的唯一区别是探测器在用户代理（第 3 项）中有一个 - 而不是一个“”，这两种方式都告诉我它没有在任何实例中传递（因为这是预期的，因为没有验证）。

我已经提高了 Apache 中所有内容的日志记录，但无法弄清楚有什么问题。不涉及任何处理，它是一个静态文件，我也尝试过其他文件类型，比如图像无济于事。

有没有人有任何想法或见过类似的东西？

谢谢，托尼

# c++ - 多个函数和返回值的问题

> ID：15514111
> 
> 赞同：0
> 
> 时间：2013-03-20T02:18:50.343
> 
> 标签：c++, function, return, void

试图制作一个简单的函数来将存储在辅助函数中的值返回给 DEV-C++ 中的主函数，但我不确定它为什么不起作用：/

我真的觉得它应该可以正确运行，但是当我编译和运行程序时，它不会要求输入值并显示 0 以及当输入值 0 时与语句一起出现的句子。

```
// This program asks user to enter IQ score and then displays a message

#include<iostream>
using namespace std;

double getIQ();

int main()
{
    double iq = 0.0;

    getIQ();

    if (iq > 120)
    {
        cout << "You are a genius" << endl;
    }
    else
    {
        cout << "You don't need a high IQ to be a successful person" << endl;
    }

    system("pause");
    return 0;
}

double getIQ()
{
    double iq = 0.0;

    cout << "Enter IQ score: " << iq << endl;
    return iq;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:23:33.073

您没有分配的返回值有两个问题`getIQ()`：

```
 double iq = getIQ() ; 
```

你需要一个`cin`in `getIQ()`：

```
double getIQ()
{
    double iq = 0.0;

    cout << "Enter IQ score: " ;
    cin >> iq ;
    return iq;
} 
```

另外，我建议不要使用`system("pause")`，请参阅[System(“pause”); - 为什么错了？](https://stackoverflow.com/questions/1107705/systempause-why-is-it-wrong)反对 using `using namespace std;`，请参阅[Why is 'using namespace std;' 在 C++ 中被认为是一种不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T02:22:26.067

你很亲近，

您只需要将`getIQ`函数返回的值存储到`iq`：

```
iq = getIQ(); 
```

这会将返回的双精度值存储到您之前设置`getIQ`的变量中。`iq`

你也可以这样做：

```
double iq = getIQ(); 
```

要在其中显示内容，`getIQ`您应该将输入获取行更改为：

```
cout << "Enter IQ Score";
cin >> iq;
cout << endl; 
```

不要忘记检查他们是否输入了数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T02:29:38.523

问题是您没有将 getIQ() 的返回值分配给 iq 并且您的 getIQ() 函数没有接收用户输入。实际上，您可以通过进行一些重构来摆脱该 iq 变量：Inline temp（根据 Martin Fowler 的重构书）。因为 iq 是一个临时变量，用于保存 getIQ() 函数的返回值。这样可以避免出错。同时，您需要让您的 getIQ() 函数返回用户输入，如其他答案所示。

```
int main()
{
    if (getIQ() > 120)
    {
        cout << "You are a genius" << endl;
    }
    else
   {
       cout << "You don't need a high IQ to be a successful person" << endl;
   }

   cin.get();//you can use cin.get() in C++;
   return 0;
} 
```

# elasticsearch - elasticsearch自动索引文件

> ID：15514114
> 
> 赞同：0
> 
> 时间：2013-03-20T02:19:04.707
> 
> 标签：elasticsearch

我是 elasticsearch 的新手，如果我的问题听起来很奇怪，请原谅我：D 我想用 elasticsearch 自动索引某些目录中的文件（例如：如果我在某个目录中添加一个文件，那么 elasticsearch 可以立即索引该文件），但我不知道如何配置 elasticsearch 以解决该问题。任何人都可以建议我吗？

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:50:16.470

我不认为你可以让 elasticsearch 监视一个目录（我认为在大多数情况下这不是一件好事。）

相反，有一个实现 FileWatcher 的客户端包装器。通过此客户端将更改推送到 ElasticSearch。

您可以使用[PathHierarchyTokenizer](http://www.elasticsearch.org/guide/reference/index-modules/analysis/pathhierarchy-tokenizer.html)在索引中保留文件系统层次结构，从而允许您深入了解目录结构。

# axapta - 从动态 ax 中的 SalesLine 表中的记录获取关联的贸易协议 (PriceDiscAdmTrans)

> ID：15514118
> 
> 赞同：1
> 
> 时间：2013-03-20T02:19:19.087
> 
> 标签：axapta

如何从 SalesLine 表中的记录中获取贸易协议日志 (PriceDiscAdmTrans) 中的关联记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:36:29.530

没有关联`PriceDiscAdmTrans`的记录`SalesLine`。

可能有与`PriceDiscTable`a 相关联的记录`SalesLine`，但查找它的规则由 of`SalesPurchLine::setPriceAgreement`和`PriceDisc`类的工作方式定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T19:39:40.040

当 PriceDiscAdmTrans 在 PriceDiscAdmCheckPost 中发布时，它将创建一个 PriceDiscTable，salesLine 可以使用该 PriceDiscTable 通过 PriceDisc 类确定折扣

# java - 通过蓝牙连接android APP和mysql服务器

> ID：15514119
> 
> 赞同：0
> 
> 时间：2013-03-20T02:19:25.003
> 
> 标签：java, android, mysql, jakarta-ee, bluetooth

我是android开发的新手。我想通过**蓝牙**将我的 Android 应用程序与 mysql 服务器连接起来。

谁能告诉我如何将http请求发送到笔记本电脑上的蓝牙端口以连接数据库的分步过程。我在服务器端使用 Java EE。我可以直接连接到数据库还是必须向服务器（在这种情况下为 Servlet）发送请求才能从数据库中获取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:06:32.953

我认为这是可能的，或者非常困难。您应该尝试与笔记本电脑配对，获得调制解调器访问权限，使用调制解调器访问您正在查找的 IP 并发出请求。

# android - Android- 从 SQLite 数据库中检索随机条目？

> ID：15514124
> 
> 赞同：0
> 
> 时间：2013-03-20T02:19:59.340
> 
> 标签：android, random, android-sqlite

我是新手，所以如果我犯了任何菜鸟错误，请多多包涵。我正在尝试编写一个数据库并从数据库中返回一个随机条目。该程序应该启动一个 Randomize 活动，该活动将在按下随机化按钮时更新文本视图。\ public void randomize(View v) { view.setText(randRecipe());}

```
public String randRecipe()
  {
      Random rand= new Random();
      int r= rand.nextInt(base.size());
      Recipe rec= base.get(r);
      return rec.toString();
  } 
```

这是我在我的 Randomize 活动中放入的代码，虽然它出于某种原因工作了一次，但每次我尝试再次随机化时，我的程序都会崩溃。base 是我检索到的包含所有配方条目名称的列表。我想既然我用它来填充我的 ListView，我可以再次使用它来在随机化中访问它。

我应该尝试直接从数据库中获取值吗？如果是这样，我将如何做到这一点，有人可以提供一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T13:29:10.103

```
public Cursor getRandom() {

Cursor cursor = myDataBase.rawQuery(
        "SELECT * FROM your_table_name ORDER BY RANDOM() LIMIT your_limit_here", null);
if (cursor.moveToFirst()) {
    return cursor;
}
return cursor;
} 
```

假设你想随机获取 50 个数据而不是把 your_limit_here = 50; 其中 your_limit 是一个 int。

试试这个：它可能会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:34:38.017

尝试这个

```
db.query(tableName, null, null, null, null, null, "RANDOM()", "1"); 
```

# html - Polyglot、XHTML5、dl、dt、dd 如何在条目之间留出空格？

> ID：15514129
> 
> 赞同：1
> 
> 时间：2013-03-20T02:20:35.060
> 
> 标签：html, polyglot-markup

我有这段 Polyglot XHTML5，我试图在每个引用之间留出一个空格。
但是似乎我不能使用`p`or`br`标签。它仍然必须有效...

希望有人能帮忙，会超级棒的！

```
<dl class="references">
    <dt id="ref-abc">[abc2007]</dt>
    <dd>Herpa Derp; <em>Trollolol</em>;
        Elolololol
        <a href="http://example.com">
        <code>http://www.example.com</code>
        </a>
    </dd>
    <dt id="ref-abc">[abc2007]</dt>
    <dd>Herpa Derp; <em>Trollolol</em>;
        Elolololol
        <a href="http://example.com">
        <code>http://www.example.com</code>
        </a>
    </dd>
    <dt id="ref-abc">[abc2007]</dt>
    <dd>Herpa Derp; <em>Trollolol</em>;
        Elolololol
        <a href="http://example.com">
        <code>http://www.example.com</code>
        </a>
    </dd>
</dl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:22:30.220

您可以简单地使用 CSS 来获取定义之间的空间：

```
.references dd { margin-bottom:16px; } 
```

# batch-file - 批量复制所有文件而不覆盖

> ID：15514132
> 
> 赞同：3
> 
> 时间：2013-03-20T02:20:41.240
> 
> 标签：batch-file, copy, cmd

```
set dSource=C:\Games\Steam\steamapps
set dTarget=E:\Demos
set fType=*.dem

xcopy/i "%dSource%\%fType%" "%dTarget%" 
```

这是我目前必须复制所有文件的内容，但是如何让它复制所有文件并重命名任何具有相同名称的文件，以便两个副本都保存在目标文件夹中。

例如：
来源：demo.dem
目的地：demo.dem

前往：
目的地：demo.dem，demo(1).dem

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:31:28.413

试试这个解决方案`copy`：

```
@echo off &setlocal
set "dSource=C:\Games\Steam\steamapps"
set "dTarget=E:\Demos"
set "fType=*.dem"

for %%i in ("%dSource%\%fType%") do if not exist "%dtarget%\%%~nxi" (copy /b "%%~i" "%dtarget%") else call :process "%%~i"
goto :eof

:process
set /a cnt=-1
:loop
set /a cnt+=1
set "fname=%dtarget%\%~n1(%cnt%)%~x1"
if exist "%fname%" goto :loop
copy /b "%~1" "%fname%"
goto :eof

endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:33:48.873

```
@ECHO OFF
SETLOCAL
SET source=c:\sourcedir
SET dest=c:\destdir
SET mask=*.*
FOR /f "delims=" %%i IN (
  ' dir /b /a-d "%source%\%mask%" '
  ) DO IF EXIST "%dest%\%%i" (
  SET "destfn="
  SET "sourcefn=%source%\%%i"
  FOR /l %%g IN (1,1,9) DO IF NOT DEFINED destfn IF NOT EXIST "%dest%\%%~ni(%%g)%%~xi" SET destfn=%dest%\%%~ni(%%g^)%%~xi
  IF NOT DEFINED destfn FOR /l %%g IN (10,1,99) DO IF NOT DEFINED destfn IF NOT EXIST "%dest%\%%~ni(%%g)%%~xi" SET destfn=%dest%\%%~ni(%%g^)%%~xi
  IF NOT DEFINED destfn FOR /l %%g IN (100,1,999) DO IF NOT DEFINED destfn IF NOT EXIST "%dest%\%%~ni(%%g)%%~xi" SET destfn=%dest%\%%~ni(%%g^)%%~xi
  IF NOT DEFINED destfn FOR /l %%g IN (1000,1,9999) DO IF NOT DEFINED destfn IF NOT EXIST "%dest%\%%~ni(%%g)%%~xi" SET destfn=%dest%\%%~ni(%%g^)%%~xi
  CALL :copyg
  ) ELSE (XCOPY "%source%\%%i" "%dest%\" >nul)
)
GOTO :eof

:copyg
IF DEFINED destfn (ECHO F|XCOPY "%sourcefn%" "%destfn%" >nul
) ELSE (ECHO "%sourcefn%" NOT copied - out of generation numbers
)
GOTO :eof 
```

警告：正如发布的那样，该程序将 XCOPY。

我建议您将 XCOPY 语句更改为 ECHO... 和~~`>nul`~~/~~`ECHO F|`~~以检查`XCOPY`将首先生成哪些指令。

（>nul 抑制`copied`消息；`ECHO F|`强制`XCOPY`复制到目标文件，因为没有`XCOPY`允许这样做的开关）

# c# - Microsoft.Build.BuildEngine 可以多线程吗

> ID：15514135
> 
> 赞同：4
> 
> 时间：2013-03-20T02:20:51.487
> 
> 标签：c#, .net, multithreading, visual-studio, msbuild

我有许多 Visual Studio 解决方案要构建。

Microsoft.Build.BuildEngine 可以用于一次构建多个解决方案（即通过多线程）吗？

我知道它有一些 STAThread 要求，尽管我从来没有完全理解这对我的程序意味着什么。

**编辑：**让我澄清一下。我知道 MSBuild 可以在解决方案中进行项目的多线程构建。我的问题是不同线程是否可以使用[Microsoft.Build.BuildEngine.Engine来构建不同的解决方案/项目。](http://msdn.microsoft.com/en-us/library/microsoft.build.buildengine.engine.aspx)

我尝试在不同的线程中创建单独的引擎，但它不起作用。当我尝试在一个线程中使用一个引擎时，它起作用了。

.NET 库可以`Microsoft.Build.BuildEngine`一次构建多个项目/解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:36:37.290

这取决于你在做什么。是的，您可以进行多个并行项目构建（在 VS 中转到工具 -> 选项 -> 项目和解决方案 -> 构建和运行）。如果您正在运行 MSBuild，则可以使用 /m[:number] 命令。至于为支持 Microsoft.Build.Construction/Microsoft.Build.Evaluation/Microsoft.Build.Execution 而弃用的 BuildEngine，我相信 BuildParameters.MaxNodeCount 是设置要使用的线程数的原因。虽然我个人建议只运行 msbuild 本身或使用 IDE，但它要简单得多。

# python - 没有死路蟒蛇的迷宫

> ID：15514137
> 
> 赞同：1
> 
> 时间：2013-03-20T02:20:53.993
> 
> 标签：python

我有一个函数可以生成一个随机迷宫，给定行数和列数，一切都被完美地雕刻出来......我想做的是删除/移除迷宫内可能有的任何墙壁和外壳，以便迷宫没有“死胡同”。我已经尝试了以下，但似乎它不起作用......任何人都知道我可能哪里出错了

```
def random_maze_without_deadends(row,cols):
    maze = random_maze(row,cols) #this will generate a random maze and carve out a maze where all cells are defaulted to no value
    for i in xrange(row):
        for j in xrange(cols):
            z  = maze.open_directions(i,j) # assume maze.open_direction open's up the maze by  Returning a list of open (non-wall) directions from a cell given by row column  
            walls = ['N','S','W','E'] #preassigned values for north south west and east respectively to check open 'walls' of cells
            if i == 0:
                walls.remove('N')
            if i == i -1:
                walls.remove('S')
            if j == 0:
                walls.remove('W')
            if j == j-1:
                walls.remove('E')
            if len(z) == 1:
                walls.remove(z[0])
                return maze 
```

以下是前面的代码也使用的：

```
class MazeCell:
    def __init__(self, r, c):
        self.row = r
        self.col = c
        self.directions = ["N", "S", "E", "W"]
        random.shuffle(self.directions)

    def random_maze(rows,cols):
        maze = Maze(rows, cols)
        carve_passages_stack(maze)
        return maze 
```

我的主要问题基本上是 deadend 函数的逻辑有什么问题？感谢您试图弄清楚我的意思。

更新-这是我当前的输出：

```
 _________
| |  _  | |
| |_  | | |
|_____| | |
|  __x|_  |  <---This part should get opened up---where the x is as north south and east are clos
|_________| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:26:59.613

做完之后 `walls.remove(z[0])`

您的墙壁阵列现在仅包含作为您死胡同的墙壁的方向。但是您不会随后编辑迷宫以取出剩余的墙壁之一。

此外，您应该在初始化 z 后立即进行检查以确保`len(z) == 1`- 如果没有，`continue`则检查下一个单元格。这将节省处理时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:39:40.820

`walls`只是一个列表。

```
walls = ['N','S','W','E'] 
```

`walls.remove(z[0])`影响`walls`，但不会改变`maze`。您需要检查 Maze 对象使用的方法和/或数据结构，并确定如何`(i,j)`在`len(z) == 1`.

此外，这`return maze`条线需要去凹痕，所以`random_maze_without_deadends` *总是*返回一个迷宫。

# java - JNDI 中的 LdapContext 与 dircontext

> ID：15514143
> 
> 赞同：0
> 
> 时间：2013-03-20T02:21:46.820
> 
> 标签：java, active-directory, jndi

请解释在 JNDI 中使用`ldapcontext`和之间的区别。`dircontext`

我发现有 JNDI 示例同时使用`ldapcontext`和`dircontext`. 我应该使用哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:44:11.067

来自 JavaDocs 关于 ldapcontext

> 此接口表示一个上下文，您可以在其中使用 LDAPv3 样式的控件执行操作并执行 LDAPv3 样式的扩展操作。对于不需要此类控件或扩展操作的应用程序，应改为使用更通用的 javax.naming.directory.DirContext。

# sql - 如何将 N 个数据库表与一个主表绑定？

> ID：15514148
> 
> 赞同：4
> 
> 时间：2013-03-20T02:22:11.833
> 
> 标签：sql, database, database-design, relational-database

假设我有 N 个书店的 N 个表。我必须将有关书籍的数据保存在每个书店的单独表中，因为每个表都有不同的方案（列的数量和类型不同），但是所有 Bookstores 表都有相同的列集；

现在我想创建一个只有几列的“MasterTable”。

```
|   MasterTable   |
|id. | title| isbn|     
| 1  | abc  | 123 |

| MasterToBookstores |
|m_id | tb_id | p_id |
| 1   |   1   |  2   |
| 1   |   2   |  1   |

|       BookStore_Foo          |
|p_id| title| isbn| date | size|     
| 1  | xyz  | 456 | 1998 | 3KB |
| 2  | abc  | 123 | 2003 | 4KB |

|       BookStore_Bar                  |
|p_id| title| isbn| publisher | Format |     
| 1  | abc  | 123 |   H&K     |   PDF  |
| 2  | mnh  | 986 |   Amazon  |   MOBI | 
```

我的问题是，以这种方式保存数据是否正确？关于这个案例和类似案例的最佳实践是什么？我可以给特定的书店表一个带数字的别名，这将帮助我管理整组表吗？

有没有更好的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T22:03:13.890

我认为您混淆了“商店”和“书”的概念。

从您的评论和示例数据来看，问题似乎在于书籍的属性集不同，而不是商店。如果是这样，您将需要一个类似于此的结构：

![在此处输入图像描述](../Images/2aa2ce26cb57f710ea6128075d532c59.png)

符号:![在此处输入图像描述](../Images/936b795f4e438dbd3cb1b87a8b80bb12.png)表示继承¹。BOOK 是“基类”，BOOK1/BOOK2/BOOK3 是各种“子类” ²。当实体共享一组属性或*关系时，这是一种常见的策略*³。[有关此概念的更完整解释，请在ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)中搜索“子类型关系” 。

不幸的是，当前的关系数据库不直接支持继承，因此您需要将此层次结构转换为普通表。这样做通常有 3 种策略，如这些帖子中所述：

*   [解读 ER 图](https://stackoverflow.com/a/12037398/533120)
*   [父子表 - 确保孩子是完整的](https://stackoverflow.com/a/12366217/533120)
*   [超类型-子类型数据库设计](https://stackoverflow.com/a/12261722/533120)

*注意：上述结构允许在同一书店内混合各种书籍类型。让我知道这是否不可取（即，您在任何给定的书店中都需要一种类型的书籍）...*

* * *

*¹阿卡。类别、子类化、子类型化、泛化层次结构等。*

*²即书籍的类型，取决于它们需要哪些属性。*

*³在这种情况下，所有类型的书籍都与商店是多对多的关系。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T02:44:49.327

如果您至少有两列所有其他表都使用它，那么您可以为所有书籍创建基表，并使用基表中的 id 为其余数据添加更多表。

更新：

如果您使用实体框架连接到您的数据库，我建议您试试这个：

创建您的实体模型，如下所示：

![实体模型](../Images/793a5fd4f4e6f7c813c9140a5ba24c21.png)

然后让实体框架为您生成数据库（从模型更新数据库）。请注意，这使用继承（不在数据库中）。

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T03:39:26.120

建议数据模型：
1\. 有一个master 数据库，保存master 数据
2\. master 数据库中的维度表，transitional 复制到你的分布式书店数据库
3\. 可以选择使用可更新的scriscriber 或者merge replication 也是不错的选择
4.每个分布式书店数据库仍然独立工作，但是主数据要么通过合并复制或可更新订阅者合并回来。
5、如果要保证主数据的完整性，只能只读订阅者，使用跨式复制将主数据分发到分布式数据库中，但是在这种设计中，你需要在主数据库中有存储过程来注册你的维度数据。确保没有双跳问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T02:38:36.153

我建议你有两张桌子：

**书店**：

`id` `name` `someMoreColumns`

**书籍**：

`id` `bookStore_id` `title` `isbn` `date` `publisher` `format` `size` `someMoreColumns`

很容易看出这里的关系： a`bookStore`有很多`books`.

请注意，我将所有表中的所有列都放在`BookStore`一个表中，即使某个表中的某些行对某些列没有值也是如此。

为什么我更喜欢这种方式：

1）对于`BookStore`表中的所有数据，只有少数列**永远不会**在表上具有值`books`（例如，`size`如果`format`您没有电子书版本）。其他列总有一天会被填满（你可以`date`为你的电子书设置一个，但你的桌子上没有这个列`BookStore_Bar`，这似乎是指电子书）。这样，如果有一天您想更新它，您可以从所有书籍中获得更详细的信息。

2）如果你有一堆表`BookStore`，比如说 12 个，你将无法轻松处理你的数据。我要说的是，如果您想对所有书籍（这意味着对所有表）运行一些查询，您将至少有三种方法：

*   **首先：**手动运行对 12 个表中的每一个的查询，从而合并数据；

*   **第二：**编写一个有 12 个连接的查询或在您的`FROM`子句上设置 12 个表来查询您的所有数据；

*   **第三**：依赖一些脚本、存储过程或软件为你做我刚才说的第一种或第二种方式；

我希望能够尽可能轻松地处理我的数据，并且不依赖其他脚本或软件，除非我真的需要它。

3）从 MySQL 开始（因为我对 MySQL 了解更多），您可以`partitions`在表上使用`books`。它是一种高级数据管理，您可以将表中的数据分配到磁盘上的多个文件中，而不是像通常分配一个表那样只分配一个文件。在处理同一张表中的大量数据时非常有用，它可以根据您的数据分布计划加快查询速度。让我们看一个例子：

假设您已经有 12 个不同的书店，但在我的数据库模型下。对于表中的每一行，您`books`都将关联到 12 个书店之一。如果您对数据进行分区`bookStore_id`，它将几乎与您有 12 个表相同，因为您可以为每个表创建一个分区`bookStore_id`，因此每个分区将仅处理相关数据（与 匹配的数据`bookStore_id`）。

假设您要查询表`books`到`bookStore_id`in (1, 4, 9)。如果您的查询确实只需要这三个分区来为您提供所需的输出，那么将不会查询其他分区，并且它将与您查询每个单独的表一样快。

您可以删除一个分区，另一个不会受到影响。您可以添加新分区来处理新书店。您可以对分区进行子分区。您可以合并两个分区。简而言之，您可以将您的单张桌子变成`books`一个易于处理的多存储桌子。

**副作用：**

1）我不知道所有的表分区，所以最好参考文档来了解创建和管理它的所有要点。

2）通过定期备份（转储）来处理数据，因为您可能有一个非常填充的表`books`。

我希望它对你有帮助！

# asp.net-mvc-4 - MVC4 发送数据表到视图

> ID：15514153
> 
> 赞同：1
> 
> 时间：2013-03-20T02:23:32.240
> 
> 标签：asp.net-mvc-4, datagrid, model, datatable, sqldatareader

我需要将 TestModel 列表传递到我的视图中。然后，此列表将用于填充网格。但是，我希望从 sqldatareader 加载的数据表中的标题动态创建 TestModel 的成员。

这可能吗？如果是这样，怎么做？如果没有，是否有任何其他替代方法可以在我的视图中使用我的数据表中的列和行加载网格？

如果我使用以下方式强烈键入我的视图：

```
@using System.Data;
@model System.Data.DataTable 
```

然后我开始将数据表映射到网格

```
@{
    var grid = new WebGrid(Model, defaultSort: "Name");
} 
```

我收到这些错误：

```
The best overloaded method match for 'System.Web.Helpers.WebGrid.WebGrid(System.Web.HttpContextBase, string, int, bool, bool, string, string, string, string, string, string, string)' has some invalid arguments 
```

和

```
Argument 1: cannot convert from 'System.Data.DataTable' to 'System.Web.HttpContextBase' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:17:33.633

问题是我没有编辑控制器来传递数据表，它仍在尝试传递“TestModel”类型的模型。

# javascript - javascript websocket onmessage event.data

> ID：15514155
> 
> 赞同：8
> 
> 时间：2013-03-20T02:23:37.303
> 
> 标签：javascript, websocket

`event.data`使用 JavaScript WebSocket如何传递`onMessage`函数？

```
var eventData = EventRequest("text");

  ..... codes .....

EventRequest = function (text)
{
   var socket = new WebSocket ('ws://localhost:8080/');
   websocket.onopen = function(evt) { onOpen(evt); };
   websocket.onmessage = function(evt) { onMessage(evt); };

function onOpen (evt)
{
   socket.send("text");
}

function onMessage (evt)
{
   alert (evt.data);
   return evt.data;
}
}; 
```

我尝试了不同的方法来传递 evt.data，但我无法做到。我可以看到正确的`evt.data`数据。我只是无法将数据传递到`onMessage`函数之外。

我试过了

```
function wcConnection (){
   this.dataInput = '';
} 
```

在`onMessage`函数内部，我添加了

```
function onMessage (evt)
{
   alert (evt.data);
   this.dataInput = evt.data;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-25T12:14:51.127

如果你的服务器是 python tornado

```
def on_message(self, message):
        t = json.dumps(['foo', {'bar': ('baz', None, 1.0, 2)}])
        self.write_message(t) 
```

在您的客户端中，要检索消息，您可以执行

```
ws.onmessage = function (evt) { 
    console.log(JSON.parse(event.data));
} 
```

您应该在控制台中看到 json

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-22T07:05:18.447

为什么要将值返回给 websocket.onmessage 函数？这是您获得该值的函数。如果要将值传递给另一个函数，只需将事件对象传递给该函数并使用“evt.data”访问它。

```
websocket.onmessage = function(evt) { responseData(evt); };
function responseData(evt) {
    /* Here is your data, Do you what you want! */
    console.log(JSON.parse(evt.data));
} 
```

# vb.net - messagebox.show 有问题

> ID：15514163
> 
> 赞同：-2
> 
> 时间：2013-03-20T02:24:37.683
> 
> 标签：vb.net, winforms

我在使用 messagebox.show 时遇到问题。我想要答案和这条线“你想尝试另一个临时转换吗？” 出现在带有 yesno 按钮的消息框上。

```
Public Class Form1
    Dim intFah As Windows.Forms.DialogResult

    Private Sub BtnFah_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnFah.Click
        Try
            Dim intFah As Integer

            intFah = CInt(TxtBoxTemp.Text)
            intFah = (intFah * 9) / 5 - 32
            MessageBox.Show(intFah.ToString & ControlChars.CrLf & "Would you like to start another temp conversion?", MessageBoxButtons.YesNo)
        Catch
            MessageBox.Show("Would you like to start another temp conversion?", "System Error", MessageBoxButtons.YesNo)

        End Try
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:35:56.570

您的代码不是为我构建的 - 这可能是因为在您的 MessageBox.Show 中：

```
MessageBox.Show(intFah.ToString & ControlChars.CrLf & "Would you like to start another temp conversion?", MessageBoxButtons.YesNo) 
```

您没有传递正确数量的[参数](http://msdn.microsoft.com/en-us/library/0x49kd7z.aspx)。根据链接，它需要文本、标题（标题），然后是按钮选项

如果我将其更改为：

```
MessageBox.Show(intFah.ToString & ControlChars.CrLf & "Would you like to start another temp conversion?", "A Caption", MessageBoxButtons.YesNo) 
```

然后它会构建，当我运行该应用程序时，我可以根据您要查找的内容，将答案显示在一行中，并将文本显示在第二行中。

# symfony - 会话到期时，如何强制用户注销？

> ID：15514164
> 
> 赞同：0
> 
> 时间：2013-03-20T02:24:51.650
> 
> 标签：symfony

我试图在会话过期时强制用户注销但我无法访问会话时间

```
namespace mio\mioBundle;

use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Bundle\FrameworkBundle\Routing\Router;
use Symfony\Component\Routing\RouterInterface;
use Symfony\Component\Security\Core\SecurityContext;
use Symfony\Component\HttpFoundation\Request;

class RequestListener{

    protected $router;
    protected $security;  

    public function __construct(RouterInterface $router, SecurityContext $security)
    {
        $this->router = $router;
        $this->security = $security;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        echo $event->getRequest()->getSession()->('timeout');
    }
} 
```

* * *

你好这里我留下配置文件security.yml。

```
security:

    firewalls:
        frontend:
            pattern:  ^/
            anonymous: ~
            form_login:
                login_path: /login
                check_path: /login_check
                default_target_path: /index
                success_handler: authentication_handler
            logout:
                path: /logout
                target: /login
                success_handler: authentication_handler
            security: true
            remember_me:
                key:      loksea
                lifetime: 1800
                path:     /
            access_denied_handler: accessdenied_handler
          #primero deben de ir los usuarios anonimos si no se entra en loop redirect
    access_control:
        - { path: /login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/pruebita, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/js, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin, roles: ROLE_A }
        - { path: ^/nuevoinforme, roles: ROLE_M }
        - { path: ^/, roles: IS_AUTHENTICATED_REMEMBERED }

    providers:
        user_db:
            entity: { class: mio\mioBundle\Entity\Empleado, property: username }
    role_hierarchy:
        ROLE_M: ROLE_U
        ROLE_A: ROLE_U

    encoders:
        mio\mioBundle\Entity\Empleado: { algorithm: sha1 }
        Symfony\Component\Security\Core\User\User: plaintext 
```

会话结束时要求我再次登录，但不是用户注销。我有一个监听器来保存注销，所以：

```
 public function onLogoutSuccess(Request $request){
        $empleado =  $this->security->getToken()->getUser();
        $log = new Log();
        $log->setFechalog(new \DateTime('now'));
        $log->setTipo("Salida");
        $log->setEmpleado($empleado);
        $this->em->persist($log);
        $this->em->flush();
} 
```

你会在会话结束时调用这个方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T08:47:50.213

我遇到了同样的问题，但是我设法创建了一个侦听器，当用户达到最大空闲时间时，它会抛出 CredentialsExpiredException。
闲置时间过长的用户将被重定向到登录/注销页面（对于您的情况，通过查看您的注销目标来访问“/login”）。
这就是我解决问题的方法。

```
namespace mio\mioBundle;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\DependencyInjection\Container;
use Symfony\Component\Security\Core\Exception\CredentialsExpiredException;

class RequestListener{

    protected $container;  

    public function __construct(Container $container)
    {
        $this->container = $container;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        $session = $this->container->get('session');
        $maxTime = 5*60; //5 minutes is the maximum lifetime

        // Get the current idle time and compare it with the max allowed time
        if (time() - $session->getMetadataBag()->getLastUsed() > $maxTime) {
            //Invalidate the current session and throw an exception
            $session->invalidate();
            throw new CredentialsExpiredException();
        }
    }
} 
```

这应该是它。如果您还有其他问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:30:59.977

告诉我如果我是对的，当用户注销时你需要执行你的方法“onLogoutSuccess”吗？所以注销过程运行良好，对吧？

要显式注销，您是否尝试过会话对象的“clear()”方法？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-20T14:47:47.220

您需要在 security.yml 配置文件中配置此行为，它应该会自动工作。

瞧

# silverlight - Silverlight中如何配置pop3协议接收邮件

> ID：15514166
> 
> 赞同：0
> 
> 时间：2013-03-20T02:25:16.563
> 
> 标签：silverlight

我需要使用 pop3 客户端协议在 Silverlight 页面中接收电子邮件，或者有其他方法可以做到这一点

请指导我！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:28:44.890

如果你想“接收”一封电子邮件，你需要一个 pop3 服务器。silverlight 应用程序在客户端中运行，并且无法使用 silverlight 在客户端上创建服务器。您可以做的是在 c# 中为 silverlight 页面提供服务的机器上创建一个 pop3 服务器：

[http://www.codeproject.com/Articles/20609/POP3-Server](http://www.codeproject.com/Articles/20609/POP3-Server)

并使用 WCF 与此服务器通信。

# spring - Spring security - 基于属性访问控制器方法

> ID：15514170
> 
> 赞同：1
> 
> 时间：2013-03-20T02:26:20.660
> 
> 标签：spring, spring-mvc, spring-security

我正在我的所有控制器上配置 Spring Security。我希望仅在“我的系统已启用”时才开始执行某些方法。可以通过特定的静态方法从所有控制器访问此信息（我可以将其设为非静态）。我的观点是，我想避免在每个方法的开头对 java 代码进行显式检查。我怎样才能通过 Spring Security 到达那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:14:39.233

一种方法是使用[处理程序拦截器](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html)。

这是一般的想法：

**(1)**配置要阻止的 url 模式：

```
<util:list id="sysEnableCheckUrlPatterns" value-type="java.lang.String">
    <beans:value>/module1/**</beans:value>
    <beans:value>/module2/**</beans:value>
</util:list> 
```

**(2)**编写拦截器：

```
 public class SysEnableCheckInterceptor extends HandlerInterceptorAdapter {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
            throws Exception {

            /* 
                If system enabled then return true. Otherwise return false (and optionally write something in response)

            */
    }
} 
```

**(3)**配置那个拦截器。在 3.1 中，您可以执行以下操作：

```
 @Configuration
public class AppConfig extends WebMvcConfigurerAdapter {

    @Resource(name="sysEnableCheckUrlPatterns")
    /* or use @Autowired or @Inject if you like */
    private String[] sysEnableCheckUrlPatterns;

    @Override
    public void addInterceptors(InterceptorRegistry registry) {

    registry.addInterceptor(new SysEnableCheckInterceptor()).addPathPatterns(sysEnableCheckUrlPatterns);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:14:07.947

您可以在安全注释中使用 SPEL（Spring 表达式语言）。

见[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)

# url - 如何加载 index.html 的哈希值？

> ID：15514171
> 
> 赞同：0
> 
> 时间：2013-03-20T02:26:28.267
> 
> 标签：url, hash, rewrite

我的主页设置为出现在“www.website.com/index.html#home”上。

当用户只需键入“www.website.com”时，如何才能加载“www.website.com/index.html#home”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:28:57.103

使用 htaccess 重写 或者使用 index.php 到 header("location:index.html#home");

# java - 在 ConstraintValidatorContext 上设置插值模板和消息模板

> ID：15514177
> 
> 赞同：0
> 
> 时间：2013-03-20T02:27:15.510
> 
> 标签：java, bean-validation

我需要从我的自定义 Validator 调用 validator.validateProperty() 并寻找一种将 messageTemplate 和插值消息都传递给 ConstraintValidatorContext 的方法。我想要实现的是，如果给定的属性具有特定值而不是另一个属性的火验证。

```
MyCustomClassLevelValidator implements ConstraintValidator<Foo, Bar>{
@Autowired
private Validator validator
 public boolean isValid(Bar bar,
        ConstraintValidatorContext constraintValidatorContext){
    if(bar.isSth()){
      Set<ConstraintViolation<Bar>> somePropViolations = validator.validateProperty(bar, "someprop", Conditional.class);
      for (ConstraintViolation<Bar> propertyViolation : somePropViolations) {
         constraintValidatorContext.disableDefaultConstraintViolation();
         constraintValidatorContext.buildConstraintViolationWithTemplate(propertyViolation.getMessageTemplate()).addNode(propertyViolation.getPropertyPath().toString())
            .addConstraintViolation();
   }   
    }
 }
} 
```

所以我的代码的问题是，当 Bar 被验证时，“someprop”上的约束违规没有完全插值（约束注释属性没有解决）

```
class Bar{
  ...
  @Digits(groups=Conditional.class, integer=4,fraction=0)
  String someProp;
} 
```

所以当验证 Bar 时

```
Bar bar = new Bar();
bar.setSomeProp("99.9");
Set<ConstraintViolation<Bar>> constraintViolations = validator.validate(bar); 
```

我看到数值超出范围（<{integer} 位>.<{fraction} 位> 预期）而不是数值超出范围（<4 位>.<0 位> 预期）

有什么方法可以将消息模板和消息文本（插值版本）都放在 constraintValidatorContext 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:10:07.030

我认为`Validator`从约束验证器实现中回调不是一个好主意，因为当再次验证承载当前对象的同一个对象时，这可能很容易导致无限循环。

根据您调用验证的方式，您可以简单地将`Conditional`组传递给验证调用：

```
if(bar.isSth()) {
    Set<ConstraintViolation<Bar>> constraintViolations = 
        validator.validate(bar, Conditional.class);
}
else {
    Set<ConstraintViolation<Bar>> constraintViolations =
        validator.validate(bar);
} 
```

# python - python - 在字典 switch 语句中模拟“else”

> ID：15514180
> 
> 赞同：7
> 
> 时间：2013-03-20T02:27:38.313
> 
> 标签：python, switch-statement, case, if-statement

我正在开发一个使用大量`If, Elif, Elif, ...Else`结构的项目，后来我将其更改为类似 switch 的语句，如此[处](http://bytebaker.com/2008/11/03/switch-case-statement-in-python/)和[此处](http://vedang.me/techlog/2011/08/07/switch-statements-in-python/)所示。

`If, Elif, Else`我将如何在语句中添加类似于 Else 的一般“嘿，该选项不存在”的情况- 如果没有`If`s 或`Elif`s 运行，则会执行一些事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T02:48:38.623

如果else真的不是什么异常情况，那用可选参数来get不是更好吗？

```
>>> choices = {1:'one', 2:'two'}
>>> print choices.get(n, 'too big!')

>>> n = 1
>>> print choices.get(n, 'too big!')
one

>>> n = 5
>>> print choices.get(n, 'too big!')
too big! 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T02:29:50.493

您可以捕获`KeyError`在地图中找不到值时出现的错误，并在那里返回或处理默认值。例如，使用`n = 3`这段代码：

```
if n == 1:
    print 'one'
elif n == 2:
    print 'two'
else:
    print 'too big!' 
```

变成这样：

```
choices = {1:'one', 2:'two'}
try:
    print choices[n]
except KeyError:
    print 'too big!' 
```

无论哪种方式，`'too big!'`都会打印在控制台上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T02:48:44.190

您链接到的[第一篇文章](http://vedang.me/techlog/2011/08/07/switch-statements-in-python/)有​​一个非常干净的解决方案：

```
response_map = {
    "this": do_this_with,
    "that": do_that_with,
    "huh": duh
}
response_map.get( response, prevent_horrible_crash )( data ) 
```

这将调用`prevent_horrible_crash`if`response`不是 中列出的三个选项之一`response_map`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-24T19:26:17.073

假设您有一个函数 f(a,b) 并根据某个变量 x 的值设置不同的参数。因此，如果 x='Monday' 并且如果 x='Saturday' 您希望使用 a=5 和 b=9 执行 f，则您希望使用 a=1 和 b=3 执行 f。否则，您将打印不支持这样的 x 值。

我会做

```
from functools import partial
def f(a,b):
 print("A is %s and B is %s" % (a,b))

def main(x):
 switcher = {
             "Monday": partial(f,a=1, b=3),
             "Saturday": partial(f, a=5, b=9)
            }
 if x not in switcher.keys():
  print("X value not supported")
  return

 switcher[x]() 
```

这种方式 f 不是在声明切换器时执行，而是在最后一行执行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-27T04:23:25.853

一些单行替代方案：

```
choices = {1:'one', 2:'two'}
key = 3

# returns the provided default value if the key is not in the dictionary
print(choices[key] if key in choices else 'default_value')

# or using the dictionary get() method
print(choices.get(key, 'default_value') 
```

# jquery - 为什么这个 jquery 代码没有正确执行？

> ID：15514182
> 
> 赞同：0
> 
> 时间：2013-03-20T02:27:47.347
> 
> 标签：jquery

我试图了解如何将 JQuery 与 PHP 和 MySQL 一起使用。我在网上找到了这段代码，但它对我不起作用。该代码应该是一个简单的登录屏幕，它使用 JQuery 向用户输出消息而不重定向页面。我已经单独检查了所有内容（数据库、文件、文件名等），一切正常。如果我删除：

```
"$("#myForm").submit( function() {
        return false;
});" 
```

从脚本中，登录有效，但它重定向到我不想要的实际 PHP 页面。我希望 PHP 文件的输出语句在不重定向的情况下在 html 页面上弹出。如果我将那部分代码保留在那里，那么当我单击提交按钮（填充字段时）时不会发生任何事情。如果我不输入任何内容，我会收到消息“请同时输入用户名和密码”。如代码所示，所以我知道 JQuery 正在工作。但是任何时候输入信息，提交时都不会发生任何事情。我认为这个问题与以下有关：

```
function(data) {
    $("div#ack").html(data);
}); 
```

$.post 函数的参数。我在整个脚本中放置了警报，并且没有执行放置在该函数中的警报。谁能告诉我发生了什么事？

HTML 代码：

```
<html>
<head><title>Login Form: JQuery + PHP + AJAX</title></head>
<body>

     <form id="myForm" action="http://localhost/login.php" method="POST">
         username: <input type="text" name="username" id="username"/><br />
         password: <input type="password" name="password" id="password"/><br />
         <button id="submit">Login</button>
     </form>

     <div id="ack"></div>

     <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
     <script type="text/javascript" src=my_script.js"></script>
</body>
</html> 
```

jQuery 代码（my_script.js）：

```
$("button#submit").click( function() {

    if( $("#username").val() == "" || $("#password").val() == "" )
        $("div#ack").html("Please enter both username and password.");
    else
        $.post( $("#myForm").attr("action"),
        $("myForm :input").serializeArray(),
        function(data) {
            $("div#ack").html(data);
        });

    $("#myForm").submit( function() {
        return false;
    });
}); 
```

PHP代码（login.php）：

```
<?php

    mysql_connect('localhost','root','pass');
    mysql_select_db('people');

    $username = mysql_real_escape_string($_POST["username"] );
    $password = mysql_real_escape_string($_POST["password"] );

    if( empty($username) || empty($password) )
        echo "Username and Password Mandatory - from PHP";
    else {
        $sql = "SELECT count(*) FROM users WHERE(username='$username' AND password='$password')";
        $res = mysql_query($sql);
        $row = mysql_fetch_array($res);

        if($row[0] > 0)
            echo "Login Successful";
        else
            echo "Login Failed";
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:53:46.177

尝试`print_r($_POST)`对你的`$_POST`变量做一个。你会看到有一个空数组。您的问题仍然在您的脚本中：

```
$.post( "http://localhost/login.php",
   $("myForm :input").serializeArray(),
    function(data) {
        $("div#ack").html(data);
}); 
```

如您所见，您`#`在尝试使用`myform`表单内的类型输入访问 DOM 对象时忘记了一个。因此，要修复它，请将这样的脚本修改`$("myForm :input")`为`$("#myForm :input")`. 您不必进行我之前建议的任何更改。我认为这是一个不注意的问题。

编辑：

哦，顺便说一句，你永远不会把这个输出放到你的 HTML 中：

```
if( empty($username) || empty($password) )
    echo "Username and Password Mandatory - from PHP"; 
```

发生这种情况是因为您仅在表单字段不为空时才发送 AJAX 请求。我建议只在 PHP 中验证表单，因为不需要在 javascript 和 PHP 中验证它们。您的代码应如下所示：

```
$("button#submit").click( function() {
    $.post( $("#myForm").attr("action"),
    $("#myForm :input").serializeArray(),
    function(data) {
        $("div#ack").html(data);
    });

    $("#myForm").submit( function() {
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:58:23.623

按下登录按钮将触发 javascript 和 login.php。在您的情况下，它只会触发 javascript 代码，因为您使用以下代码阻止表单操作：

```
$("#myForm").submit( function() {
    return false;
}); 
```

那里不需要表单操作，因为您不需要直接调用 php。您将通过 AJAX 调用它并在 javascript 中返回值。您可以在这里查看 $.post 文档：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)。所以你提交按钮的 onclick 事件函数是完全错误的。

重写代码的一种方法是：

1）修改onclick事件。

```
$("button#submit").click( function() {

    if( $("#username").val() == "" || $("#password").val() == "" )
        $("div#ack").html("Please enter both username and password.");
    else
        $.post( "http://localhost/login.php",
        $("myForm :input").serializeArray(),
        function(data) {
            $("div#ack").html(data);
        });
}); 
```

2）像这样删除表单操作：

```
<form id="myForm">
    username: <input type="text" name="username" id="username"/><br />
    password: <input type="password" name="password" id="password"/><br />
    <button id="submit">Login</button>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T03:17:50.263

不久前我发现了这个代码片段的问题并忘记了这篇文章。所以我想我会发布修复程序。

很显然，

```
$("myForm :input").serializeArray() 
```

并没有像我最初想象的那样从表单中获取用户输入。

我通过抓取表单值来修复，

```
var uname = $("#username").val();
var passwd = $("#password").val(); 
```

然后将它们作为参数传递给 jQuery`.post`方法中的 PHP 脚本。我也放了网址而不是

```
$.post( $("#myForm").attr("action") 
```

所以最终的结果看起来像这样，

```
$.post("someURL/myfile.php", {username: uname, password: passwd}, function(data) { 
    $("div#ack").html(data);
}); 
```

之后一切正常。

# c# - 在 EnvDTE 中调试时捕获 VS 静态变量

> ID：15514183
> 
> 赞同：1
> 
> 时间：2013-03-20T02:27:48.287
> 
> 标签：c#, visual-studio-2010, visual-studio-2012, visual-studio-debugging, envdte

DTE 对象提供了一种方法来捕获范围内的所有变量： **dte.Debugger.CurrentStackFrame.Locals。**

我可以使用什么方法列出所有静态变量？

# wpf - WPF TreeView 子节点偏移量

> ID：15514190
> 
> 赞同：0
> 
> 时间：2013-03-20T02:28:12.497
> 
> 标签：wpf, treeview, nodes, offset

`TreeView`是否有任何标准方法可以更改WPF左侧的节点偏移量？我需要得到一个看起来像 a`ListBox`的东西`Expander`，但我必须`TreeView`用于数据表示。

**例如**

这个

```
-TreeViewItem0
|--TreeViewItem01
|--TreeViewItem01
+TreeViewItem1 
```

变成

```
-TreeViewItem0
TreeViewItem01
TreeViewItem01
+TreeViewItem1 
```

# arraylist - removeAll Java 问题

> ID：15514191
> 
> 赞同：1
> 
> 时间：2013-03-20T02:28:13.157
> 
> 标签：arraylist, removeall

我有一个问题，我正在创建一个数组列表并向其中添加多个数组列表。在程序的某些时候，我需要从一个中央列表中删除这些列表。我一直在使用 removeAll(); 但这会删除一个元素的所有实例。例如，arraylist 可以包含 (1,2,3,4,5)，并且可以将列表 (1,2,3) 添加到其中。然而，当您删除此列表时，结果列表现在包含 (4,5)，而希望它包含 (1,2,3,4,5)。那怎么能做到呢？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:34:57.030

听起来你应该只使用[`remove`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#remove%28java.lang.Object%29)而不是`removeAll`. 您可以将其放入循环中以从集合中删除所有元素：

```
ArrayList<Integer> bigList = new ArrayList<Integer>();

// Put multiple smaller lists into big list
bigList.addAll(list1);
bigList.addAll(list2);
bigList.addAll(list3);

// Remove list2's elements from bigList
for (Integer i : list2) {
  bigList.remove(i);
} 
```

* * *

**更新：**

可运行版本：

```
import java.util.*;

public class RemoveTest {
  public static void main(String[] args) {
    List<Integer> list1 = Arrays.asList(1, 2, 3);
    List<Integer> list2 = Arrays.asList(1, 2, 3, 4, 5);
    List<Integer> list3 = Arrays.asList(9);

    ArrayList<Integer> bigList = new ArrayList<Integer>();

    // Put multiple smaller lists into big list
    bigList.addAll(list1);
    bigList.addAll(list2);
    bigList.addAll(list3);

    // Remove list2's elements from bigList
    for (Integer i : list2) {
      bigList.remove(i);
    }

    System.out.println(bigList);
    // Result:
    // [1, 2, 3, 9]
  }
} 
```

# android - 使用详细信息填充微调器

> ID：15514193
> 
> 赞同：0
> 
> 时间：2013-03-20T02:28:31.550
> 
> 标签：android, database, sqlite

我为我的应用程序添加了一个微调器，让用户可以选择他想要的锻炼方式。

例如我有这个：

```
 Endurance               > Bench press
 (workout type)          Leg Curl ups
                           ....,etc.
                         (workout name) 
```

单击锻炼类型后如何查看锻炼名称列表？顺便说一句，锻炼名称带有复选框，因此将来需要可编辑/可删除。谢谢你的帮助！

# java - 休眠多更新

> ID：15514198
> 
> 赞同：0
> 
> 时间：2013-03-20T02:28:59.163
> 
> 标签：java

我的项目正在使用 Java Hibernate。
我有如下问题：

在 2 人或更多人同时向`TBL_USERS`表提交更新语句的情况下。
例如：
他们更新字段：`user_id= 1`同时。

我知道如果第一个人可以更新，其他人则不能。

我该如何处理这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:04:41.790

您可以在更新时调用的方法上使用同步概念。然后一次一个用户可以更新。

# web-applications - 没有 Apache 的 JVM 上的 mod-pagespeed？

> ID：15514207
> 
> 赞同：0
> 
> 时间：2013-03-20T02:29:41.447
> 
> 标签：web-applications, grails, jvm, removing-whitespace

我最近发现了 Google 为 Apache 提供的 mod-pagespeed，以及它的[collapse_whitespace](https://developers.google.com/speed/docs/mod_pagespeed/filter-whitespace-collapse)功能。我目前正在开发一个 Tomcat 实例为 Grails 应用程序服务的项目。 **有什么方法可以重新创建 mod-pagespeed 的 collapse_whitespace 功能的效果，而无需设置 Apache 服务器？**

还是我找错了树，而这种能力只存在于 Web 服务器中？

[Strip whitespace from jsp output](https://stackoverflow.com/questions/208736/strip-whitespace-from-jsp-output)关于 JSP-serving 平台中的 trim-directive-whitespaces 功能有一个讨论，但这只会影响 JSP 指令添加的一些额外空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:55:38.277

有一个关于向 GSP 添加 trimDirectiveWhitespaces 的 Jira：http: [//jira.grails.org/browse/GRAILS-7623](http://jira.grails.org/browse/GRAILS-7623)。

您可以使用 servlet 过滤器为任何 Java Web 应用程序（包括 Grails 应用程序）实现“折叠空白”。甚至可能有这样的开源实现可用。这些实现可能效率不高，并且可能会给具有大量并发用户的应用程序带来问题。

在 Grails 2.3 中，将对 GSP 的编码/转义/xss 预防功能进行重大重构（[http://jira.grails.org/browse/GRAILS-9906](http://jira.grails.org/browse/GRAILS-9906)）。也可以在该工作的基础上构建一个有效的“折叠空白”实现。Grails 是一个开源项目，欢迎贡献。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:58:36.603

我们发现压缩输出往往会淹没折叠空白带来的任何好处，所以如果您可以交付内容编码为 gzip 的内容。如果您的系统尚不支持它，我不知道一种简单的方法可以做到这一点，但也许是一个死的简单转发代理，除了服务器 gzip 压缩的内容什么都不做？

# php - 调用未定义的方法 PDOStatement::bind_result()？

> ID：15514217
> 
> 赞同：1
> 
> 时间：2013-03-20T02:30:29.797
> 
> 标签：php, pdo, phpass

我不断收到此错误消息，不知道为什么。这是一个登录脚本，我[在这里](http://www.openwall.com/articles/PHP-Users-Passwords)复制了表单，因为我不知道如何使用 PHPASS 进行登录。这是我的代码：

```
$email      = ($_POST['email']);
$pass       = ($_POST['pass']);

require 'connect.php';
require 'PasswordHash.php';
$hash = '*';
    $login = $con->prepare("SELECT password FROM basicuserinfo WHERE email=:email");
    $login->bindParam(':email', $email);
    $login->execute();
    $login->bind_result($hash);
    if (!$login->fetch() && $con->errno)
        die();
    if ($hasher->CheckPassword($pass, $hash)) {
        $what = 'Authentication succeeded';
    } else {
        $what = 'Authentication failed';
    }
    unset($hasher); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T02:37:46.553

在您[提供](http://www.openwall.com/articles/PHP-Users-Passwords)的链接中，他们正在使用[`MySQLi`](http://php.net/manual/en/book.mysqli.php)MySQL 相关任务的连接。该方法`bind_result`是其中的一种方法`mysqli`。

这在MySQL 连接的[pdo](/questions/tagged/pdo "显示标记为“pdo”的问题")方法中既不需要也不需要。这是PDO[的有效方法/构造函数和类等的列表。](http://php.net/manual/en/book.pdo.php)

* * *

你应该在这里使用的是：

```
$hash = $login->fetchColumn(); 
```

where[`fetchColumn`](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)从结果集的下一行返回单列。

# django - webapp 实例方法

> ID：15514218
> 
> 赞同：-1
> 
> 时间：2013-03-20T02:30:34.067
> 
> 标签：django, web-applications, database-design, architecture

我想知道如何对 webapp 进行建模以便同时为多个客户端提供服务，并像每个客户端的实例一样运行。
例如，如果我正在为客户提供一个基本的 erp 软件，并且我想将此服务提供给所有想要使用自己的数据在线使用它的人......

我怎样才能做到这一点？

我正在考虑一个主要的 web 应用程序，比如一个登录用户并将他们路由到他们自己的 web 应用程序的网关，但是，真的需要这样的方法吗？用我的方法，我是否需要为每个客户提供一个数据库？也许这会是一团糟……

我可以申请什么其他方法来处理这种情况？

欢迎任何评论..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:38:19.923

每个模型都可以轻松地拥有一个`user`字段，该字段是您的 User 模型的 ForeignKey。然后，每个模型实例都可以与一个用户相关联，每个用户将登录到具有单个数据库的单个 Web 应用程序。当然，您的视图必须随后处理过滤和验证对每个模型实例的访问：

```
class Resource(models.model):
    name = models.CharField(max_length=20)
    someattr = models.FloatField()
    user = models.ForeignKey(User)

def show_resources(request):
    resources = Resource.objects.filter(user=request.user)
    render_to_response("view.html", {'resources': resources}) 
```

# c# - 画线后从 PictureBox 获取像素颜色

> ID：15514224
> 
> 赞同：1
> 
> 时间：2013-03-20T02:31:01.650
> 
> 标签：c#, winforms

我有一个加载了位图的 PictureBox，比如一张照片：

`Picture1.Image = new Bitmap("photo.bmp");`

在`Picture1_Paint()`事件中，我在照片上画了一条线：

`e.Graphics.DrawLine(myPen, pointA, pointB);`

现在，我想显示点击像素的 RGB 信息：

```
Bitmap bitmap = (Bitmap) Picture1.Image;  /* Making sure I'm using the image being displayed */
Color color = bitmap.GetPixel(e.X, e.Y);
lblSelectedColor.Text = color.R.ToString() + ", " + color.G.ToString() + ", " + color.B.ToString(); 
```

问题是：我得到的 RGB 值是原始照片上那个像素的颜色，不包括我的线条图。例如，如果在天空中画了一条粗红线，当我点击那条红线时，我仍然会从照片中获得天蓝色。

我想获取 PictureBox 中显示的任何内容的颜色信息，包括我绘制的线条或椭圆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:33:32.913

通过事件或方法*在控件占用的屏幕上绘制**与在控件内部查看的位*图上绘制是有区别的。你做前者，但试图从后者获得一个像素。`Paint``OnPaint`

 *`Paint`如果您必须`Graphics`为图像创建一个对象并直接在其上绘制，而不是在事件中绘图。然后将图像分配给`Image`图片框的属性。

例如，从我的头顶：

```
Image image = /* ... */;
using (Graphics g = Graphics.FromImage(image))
{
    g.DrawLine(myPen, pointA, pointB);
}
picture1.Image = image; 
```

然后当你在图片框中`GetPixel`的`Image`对象上做时，你会得到你刚刚画的线的像素值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:55:23.723

使用[鲍勃鲍威尔的滴管](https://web.archive.org/web/20140811074747/http://bobpowell.net/eyedropper.aspx)；这是代码：

```
using System;
using System.Runtime.InteropServices;
using System.Drawing;
using System.Collections;
using System.ComponentModel;
using System.Windows.Forms;
using System.Data;

namespace pixelcolor
{
  /// <summary>
  /// Summary description for Form1.
  /// </summary>
  public class Form1 : System.Windows.Forms.Form
  {

    [DllImport("Gdi32.dll")]
    public static extern int GetPixel(
    System.IntPtr hdc,    // handle to DC
    int nXPos,  // x-coordinate of pixel
    int nYPos   // y-coordinate of pixel
    );

    [DllImport("User32.dll")]
    public static extern IntPtr GetDC(IntPtr wnd);

    [DllImport("User32.dll")]
    public static extern void ReleaseDC(IntPtr dc);

    private System.Windows.Forms.Panel panel1;
    private System.Timers.Timer timer1;

    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.Container components = null;

    public Form1()
    {
      //
      // Required for Windows Form Designer support
      //
      InitializeComponent();
      this.SetStyle(ControlStyles.ResizeRedraw,true);
    }

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    protected override void Dispose( bool disposing )
    {
      if( disposing )
      {
        if (components != null)
        {
          components.Dispose();
        }
      }
      base.Dispose( disposing );
    }

    #region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
      this.panel1 = new System.Windows.Forms.Panel();
      this.timer1 = new System.Timers.Timer();
      ((System.ComponentModel.ISupportInitialize)(this.timer1)).BeginInit();
      this.SuspendLayout();
      //
      // panel1
      //
      this.panel1.BorderStyle = System.Windows.Forms.BorderStyle.Fixed3D;
      this.panel1.Location = new System.Drawing.Point(216, 8);
      this.panel1.Name = "panel1";
      this.panel1.Size = new System.Drawing.Size(64, 56);
      this.panel1.TabIndex = 0;
      //
      // timer1
      //
      this.timer1.Enabled = true;
      this.timer1.SynchronizingObject = this;
      this.timer1.Elapsed += new System.Timers.ElapsedEventHandler(this.timer1_Elapsed);
      //
      // Form1
      //
      this.AutoScaleBaseSize = new System.Drawing.Size(5, 13);
      this.BackColor = System.Drawing.Color.White;
      this.ClientSize = new System.Drawing.Size(292, 273);
      this.Controls.Add(this.panel1);
      this.Name = "Form1";
      this.Text = "Form1";
      this.Paint += new System.Windows.Forms.PaintEventHandler(this.Form1_Paint);
      ((System.ComponentModel.ISupportInitialize)(this.timer1)).EndInit();
      this.ResumeLayout(false);

    }
    #endregion

    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
      Application.Run(new Form1());
    }

    private void Form1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
    {
      Random r=new Random(1);

      for(int x=0;x<100;x++)
      {
        SolidBrush b=new SolidBrush(Color.FromArgb(r.Next(255),r.Next(255),r.Next(255)));
        e.Graphics.FillRectangle(b,r.Next(this.ClientSize.Width),r.Next(this.ClientSize.Height),r.Next(100),r.Next(100));
      }
    }

    private void timer1_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
      Point p=Control.MousePosition;
      IntPtr dc=GetDC(IntPtr.Zero);
      this.panel1.BackColor=ColorTranslator.FromWin32(GetPixel(dc,p.X,p.Y));
      ReleaseDC(dc);
    }
  }
} 
```

如果您想在 PictureBox 或您自己的表单中对颜色进行采样，那么您只需要获取该对象的 DC。这可以使用 CreateGraphics、Graphics.GetHdc 和 Graphics.ReleaseHdc 来完成。下面的清单显示了一个 MouseMove 处理程序，可用于从表单中获取像素颜色。

```
protected override void OnMouseMove(MouseEventArgs e)
{
  Graphics g=this.CreateGraphics();
  IntPtr myDC=g.GetHdc();
  Color c=ColorTranslator.FromWin32(GetPixel(myDC,e.X,e.Y));
  g.ReleaseHdc(myDC);

  this.panel1.BackColor=c;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-12T05:23:20.333

必须对上面 Jeremy 的答案进行更改才能使其为我工作。ReleaseDC 的原型似乎与他发布的不同。这对我有用：

```
 [DllImport("Gdi32.dll")]
    public static extern int GetPixel(
        System.IntPtr hdc,    // handle to DC
          int nXPos,  // x-coordinate of pixel
          int nYPos   // y-coordinate of pixel
     );

    [DllImport("User32.dll")]
    public static extern IntPtr GetDC(IntPtr wnd);

    [DllImport("User32.dll")] 
    public static extern bool ReleaseDC(IntPtr hWnd, IntPtr hDC);

    //For best results, use a component like a Panel and use it's handle (panel1.Handle) and e.X and e.Y on a component's MouseDown event
    private Color GetColorAtPoint(Point? p = null, IntPtr? handle = null)
    {
        var hwnd = handle ?? IntPtr.Zero; // Handle;
        Point point = p ?? MousePosition;
        var dc = GetDC(hwnd);
        Color c = ColorTranslator.FromWin32(GetPixel(dc, point.X, point.Y));
        ReleaseDC(hwnd, dc);
        return c;
    } 
```*

# php - 不将方法作为参数的 PHP 回调

> ID：15514232
> 
> 赞同：0
> 
> 时间：2013-03-20T02:32:35.880
> 
> 标签：php

我想设置一个简单地创建一个类的实例并实现默认构造函数的回调。我该怎么做呢？

我知道如果你想在实例化类的方法之后调用它，你会创建一个数组，例如`array(new Order(), "runOrder")`，但我不想传递第二个参数（方法名称），因为构造函数会处理这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:40:40.990

php版本？

对于 php5.3，您可以这样做：

```
$callable = function(){return new Order();}; 
```

# javascript - 处理传入的 XHR2 数据 (Blob)

> ID：15514234
> 
> 赞同：0
> 
> 时间：2013-03-20T02:32:47.680
> 
> 标签：javascript, node.js, express, xmlhttprequest

我`Blob`通过 XHR2 将多个分块的文件发送到 Node.js/Express 服务器。

如何在确保它们正确组合的同时在服务器上接收它们？当“一次”上传多个文件时，按照正确的顺序和正确的文件。

以下是我到目前为止的代码（前端和后端），但还没有考虑到多次上传。

**前端：**

```
// 'files' is of type FileList, directly from file input.
for (var i = 0, length = files.length; i < length; i++) {
    var file = files[i];

    var bytes = 51200; // 50 KB
    var size = file.size;
    var start = 0;
    var end = bytes;

    while (start < size) {
        sendBlob(file.slice(start, end), file.name, file.type);
        start = end;
        end = start + bytes;
    }   
}   

// sendBlob()
var sendBlob: function (data, filename, filetype) {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', this.url, false);
    xhr.setRequestHeader('X_FILENAME', filename);
    xhr.setRequestHeader('Content-Type', filetype);
    xhr.send(data);
}; 
```

**后端：**

```
app.post('/', function (req, res) {
    var body = '';
    req.on('data', function (data) {
        body += data;
    });
    req.on('end', function () {
        var filename = req.headers['x_filename'];
        var newPath = __dirname + '/upload/' + filename;
        fs.writeFile(newPath, body, function (err) {
            res.send({
                filename: filename
            });
        });
    });
}); 
```

非常小的文本文件可以正确存储，但图像似乎总是被弄乱并最终得到更大的文件大小。更大的文本文件被正确写入，但第一个块似乎丢失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:49:11.480

您的上传逻辑很幼稚。以下是您应该做的一些事情来确保正确性：

1.  您必须在客户端和服务器之间维护和通信块 ID/编号，以便维护顺序。

    ```
    var sendBlob: function (data, filename, filetype, chunkid)
    //set chunkid in header or in data. 
    ```

2.  在您的服务器中，您接受任何发布请求并将其附加到正文中。您应该维护文件名和文件类型的变量，并在附加之前将其与传入请求匹配。

    ```
    Files[Name] = { //Create a new Entry in The Files Variable for each new file
        Filetype : "",
        FileSize: 0,//size of Data in buffer  
        Data: "",  //buffer for storing data
        Downloaded:  //chunks recieved
    } 
    ```

    仅在检查时附加到数据。（额外的文件大小可能是由于这个原因）

3.  在您`fs.writeFile`应该将编码设置为二进制，图像和视频文件是二进制编码的，并且将它们写入默认的 utf-8 编码可能会损坏它们。

    ```
    fs.writeFile(newPath, body, 'binary', function (err){...}); 
    ```

4.  （可选）对于服务器接收到的每个块，它应该向客户端发送一个确认，以便它知道哪个块被丢弃并且必须发送。

# java - 如何清理在 servlet 中创建并返回给用户的临时文件？

> ID：15514238
> 
> 赞同：0
> 
> 时间：2013-03-20T02:33:34.553
> 
> 标签：java, servlets, temporary-files

我有一个 servlet，它执行以下操作：

1.  用户调用 servlet
2.  Servlet 代码调用 Web 服务以从 Adob​​e Live Cycle 服务器下载 PDF 文件。
3.  将该 PDF 保存到临时文件中。
4.  调用 ps2pdf14 将该 PDF 转换为古老的 PDF 1.4 版本（创建第二个临时文件）
5.  返回 file2 的内容作为响应

清理这些文件的最佳方法是什么？

批处理？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:37:34.137

几个选项-

1.  发送响应后立即删除文件
2.  运行会定期删除此类临时文件的后台（内务管理）作业（某些守护线程）
3.  不向磁盘写入任何东西，在内存中进行转换操作，将修改后的内容直接返回给用户（不确定是否可行）

# php - SMS 语法错误，意外的 T_VARIABLE

> ID：15514244
> 
> 赞同：0
> 
> 时间：2013-03-20T02:33:53.063
> 
> 标签：php

我正在尝试设置从我们的 pbx 发送短信，但我在 $data 行上不断收到语法错误。如果按原样尝试并使用 echo 但文本永远不会被发送。有谁知道我要去哪里错了？谢谢！！！

// 从 PBX 获取通话数据 $call_ani = $_POST['call_ani'];

```
$url = 'http://api.messaging.test.sms.net

$data="botkey=123456&apimethod=send&msg=HelloWorld&user='call_ani'&network=SMS&from=1111111111";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERPWD, 'User:Password');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 100);
$xml = curl_exec($ch);
if (curl_error($ch)) {
print "ERROR ". curl_error($ch) ."\n<br/>";
}
curl_close($ch);
print_r($xml); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:36:58.780

第一行缺少一个结尾：

```
$url = 'http://api.messaging.test.sms.net 
```

改成：

```
$url = 'http://api.messaging.test.sms.net'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:39:08.723

您忘记关闭第一个字符串。

改变：

```
$url = 'http://api.messaging.test.sms.net 
```

到：

```
$url = 'http://api.messaging.test.sms.net'; 
```

# c++ - 从 float 转换为 int

> ID：15514247
> 
> 赞同：0
> 
> 时间：2013-03-20T02:34:05.903
> 
> 标签：c++, casting, floating-point, integer

```
#include <iostream>
using namespace std;

int main(){
 float const PI = 3.1415926;

int radius = 4;
int peri = 0;
int area = 0;

peri =(float) (PI * 2)* radius;
area = (float) PI * (radius * radius);

cout << "Radius is " << radius << endl;
cout << "Perimeter is " << peri << endl;
cout << "Area is " << area << endl;

return 0;
}; 
```

peri 和 area 没有转换为 float 并且总是收到“从 float 转换为 int”的警告，这似乎是问题所在..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:41:58.323

如果你真的想将 peri 和 area 截断为整数，你应该明确地这样做：

```
peri=static_cast<int>(2*PI*radius);
area=static_cast<int>(PI*radius*radius); 
```

否则，您会收到警告，并且对于任何阅读您的代码的人来说，这都是一个错误。

# java - 递归二分查找的实现

> ID：15514252
> 
> 赞同：-2
> 
> 时间：2013-03-20T02:34:19.857
> 
> 标签：java, search, binary

我正在编写一个将约会存储在 ArrayList 中的程序。要求用户输入约会的日期、开始时间和结束时间。程序需要在用户想要提交新约会时检查是否已经有约会。这是递归二进制搜索部分。这是我迄今为止实施的。

方法：

```
public boolean overlap(ArrayList<Appointment> list, int start, int end, 
                       Calendar startCal, Calendar endCal)
{
    int middle = (start + end)/2;
    System.out.println("Start: " + start + " End: " + end + " Middle: " + middle);

    Appointment appt = list.get(middle);
    if(start == end){
        return((startCal.compareTo(appt.getStart()) >= 0 && startCal.compareTo(appt.getEnd()) <= 0 ) ||
                endCal.compareTo(appt.getEnd()) <= 0 && endCal.compareTo(appt.getStart()) >= 0 );
    }
    else if(startCal.compareTo(appt.getStart()) <= 0 && endCal.compareTo(appt.getStart()) <= 0){
        return overlap(list, start, middle - 1, startCal, endCal);
    }
    else{
        return overlap(list, middle, end, startCal, endCal); 
    }  
} 
```

我怎么称呼它：

```
case 1 : //Enter a new appointment
                setCal();
                startDate = new GregorianCalendar(year, month, day, hour, minute);
                endDate = new GregorianCalendar(year, month, day, endHour, endMinute);

                appt = new Appointment(description, startDate, endDate);

                if(apptList.isEmpty()){
                    apptList.add(appt);
                }
                else{
                    boolean isOverlap = overlap(apptList, 0, apptList.size() - 1, 
                                        appt.getStart(), appt.getEnd());

                    if(isOverlap){
                        System.out.println("");
                        System.out.println("ERROR: There is already an appointment at that time");
                        System.out.println("");
                    }
                    else{
                        int indexToBeAdded = indexFinder(apptList, 0, apptList.size() -1, 
                                                       appt.getStart(), appt.getEnd());
                        Appointment tmp = apptList.get(indexToBeAdded);

                        if(tmp.start.compareTo(appt.start) < 0){
                            apptList.add(indexToBeAdded + 1, appt);   
                        }
                        else{
                            apptList.add(indexToBeAdded , appt);
                        }
                    }
                }
                choice = 0;
                break; 
```

setCal() 只是提示用户输入所有日历参数并根据他们输入的内容进行设置。此外 indexFinder 是另一种递归二进制搜索方法，它查找应添加约会的索引，以便以正确的顺序添加约会.

截至目前，在第三次约会时，我尝试添加我得到一个堆栈溢出异常。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:38:41.803

`return overlap(list, start, middle - 1, startCal, endCal);`

如果你用 start = 0 和 end = 1 调用重叠，中间 = 0+1/2 = 0，那么你用 start = 0 和 end = -1 调用重叠......这意味着它们会飞得越来越远，并且你跳过了达到的停止条件`start == end`。

尝试`start == end`变成`start > end`.

编辑：问题二是这个电话

`return overlap(list, middle, end, startCal, endCal);`

如果你用 start = 0 和 end = 1 调用重叠，中间 = 0+1/2 = 0，那么你用 start = 0 和 end = 1 调用重叠......无限递归循环！堆栈溢出！它永远不会结束。

为了解决这个问题，`middle`变成`middle + 1`.

# r - 在ggplot2中将不同结果的线添加到箱线图

> ID：15514255
> 
> 赞同：0
> 
> 时间：2013-03-20T02:34:38.203
> 
> 标签：r, ggplot2

![在此处输入图像描述](../Images/56e57aa2262cb46d0bbc02e104ac8cbd.png)我有一个包含 3 列（y1、y2、x）的数据框（df1）。我设法在 y1, x 和 y2, x 之间绘制了一个箱线图。我有另一个数据框（df2），其中包含两列 A，x。我想绘制一个折线图（A，x）并将其添加到箱线图中。请注意，两个数据框中的变量 x 是轴访问，但是，它具有不同的值。我试图根据因子（x）组合和重塑两个数据框和绘图......我在一张图中得到了 3 个箱线图。我需要在一个图中将 df2 绘制为线，将 df1 绘制为箱线图。

```
df1 <- structure(list(Y1 = c(905L, 941L, 744L, 590L, 533L, 345L, 202L, 
369L, 200L, 80L, 200L, 80L, 50L, 30L, 60L, 20L, 30L, 30L), Y2 = c(774L, 
823L, 687L, 545L, 423L, 375L, 249L, 134L, 45L, 58L, 160L, 60L, 
20L, 40L, 20L, 26L, 19L, 27L), x = c(10L, 10L, 10L, 20L, 20L, 
20L, 40L, 40L, 40L, 50L, 50L, 50L, 70L, 70L, 70L, 90L, 90L, 90L
 )), .Names = c("Y1", "Y2", "x"), row.names = c(NA, -18L), class = "data.frame")

df2 <- structure(list(Y3Line = c(384L, 717L, 914L, 359L, 241L, 265L, 
240L, 174L, 114L, 165L, 184L, 96L, 59L, 60L, 127L, 54L, 31L, 
44L), x = c(36L, 36L, 36L, 56L, 56L, 56L, 65L, 65L, 65L, 75L, 
75L, 75L, 85L, 85L, 85L, 99L, 99L, 99L)), .Names = c("A", 
"x"), row.names = c(NA, -18L), class = "data.frame")

df_l <- melt(df1, id.vars = "x")

ggplot(df_l, aes(x = factor(x), y =value, fill=variable  )) +
geom_boxplot()+
#  here I'trying to add the line graph from df2
geom_line(data = df2, aes(x = x, y=A)) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:20:38.377

在第二个数据集中，每个 x 值有三个 y 值，你想为每个 x 值绘制单独的线还是每个 x 值的平均值？两者如下图所示。诀窍是首先将两个数据集中的 x 变量更改为包含两个变量所有水平的因子。

```
df1 <-structure(list(Y1 = c(905L, 941L, 744L, 590L, 533L, 345L, 202L, 
369L, 200L, 80L, 200L, 80L, 50L, 30L, 60L, 20L, 30L, 30L), Y2 = c(774L, 
823L, 687L, 545L, 423L, 375L, 249L, 134L, 45L, 58L, 160L, 60L, 
20L, 40L, 20L, 26L, 19L, 27L), x = c(10L, 10L, 10L, 20L, 20L, 
20L, 40L, 40L, 40L, 50L, 50L, 50L, 70L, 70L, 70L, 90L, 90L, 90L
)), .Names = c("Y1", "Y2", "x"), row.names = c(NA, -18L), class = "data.frame")

df2 <- structure(list(Y3Line = c(384L, 717L, 914L, 359L, 241L, 265L, 
240L, 174L, 114L, 165L, 184L, 96L, 59L, 60L, 127L, 54L, 31L, 
44L), x = c(36L, 36L, 36L, 56L, 56L, 56L, 65L, 65L, 65L, 75L, 
75L, 75L, 85L, 85L, 85L, 99L, 99L, 99L)), .Names = c("A", 
"x"), row.names = c(NA, -18L), class = "data.frame")

library(ggplot2)
library(reshape2)

df_l <- melt(df1, id.vars = "x")

allLevels <- levels(factor(c(df_l$x,df2$x)))
df_l$x <- factor(df_l$x,levels=(allLevels))
df2$x <- factor(df2$x,levels=(allLevels)) 
```

每 x 类别的行数：

```
ggplot(data=df_l,aes(x = x, y =value))+geom_line(data=df2,aes(x = factor(x), y =A))  + 
geom_boxplot(aes(fill=variable )) 
```

x 类别的连通均值：

```
ggplot(data=df2,aes(x = factor(x), y =A)) + 
stat_summary(fun.y=mean, geom="line", aes(group=1))  + 
geom_boxplot(data=df_l,aes(x = x, y =value,fill=variable )) 
```

# javascript - jQuery - 克隆元素的拖放

> ID：15514258
> 
> 赞同：1
> 
> 时间：2013-03-20T02:34:44.070
> 
> 标签：javascript, jquery, html, jquery-ui, drag-and-drop

我有一个可以拖动的克隆元素，但是我希望将其拖放到特定的 div 元素中，如果有效则不会恢复到其原始位置，但是无论它是否有效，它总是会恢复到其原始位置。

我目前正在使用以下代码：

```
 $("ul#objectsList li").draggable({ 
      revert: 'invalid',
      snap: "#objectsDropBox", 
      snapMode: "inner",
      helper: function() { return $(this).clone().appendTo('body').show(); },
      start: function(e, ui) { $(ui.helper).addClass("ui-draggable-helper");}
   });

   $("#objectsDropBox").droppable({
     accept: "ul#objectsList li",
     drop: function( event, ui ) {
       alert('hi');
     }
   }); 
```

当一个有效的可拖动对象被丢弃时，为什么它不留在 div 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:43:47.570

试试这个

```
 $("#objectsDropBox").droppable({
    accept: "ul#objectsList li",
    drop: function (event, ui) {
        $(this).append(ui.draggable); 
       //if you want to retain the element use ui.draggable.html() or clone it.

    }
}); 
```

小提琴 - [http://jsfiddle.net/dmNhZ/](http://jsfiddle.net/dmNhZ/)

# macos - Mac OS X：如果守护程序以 root 身份运行，则无法从守护程序使用 NSWorkspace 启动应用程序

> ID：15514259
> 
> 赞同：3
> 
> 时间：2013-03-20T02:34:47.987
> 
> 标签：macos, daemon, launchd

我使用 Xcode 创建了一个命令行工具应用程序。在那个应用程序中，我使用 NSWorkspace 来启动另一个应用程序包 (.app)，如此处所建议的。 [MacOsX：如何从“命令行工具”类型的应用程序启动应用程序 (.app)](https://stackoverflow.com/questions/15484390/macosx-how-to-launch-an-application-app-from-a-command-line-tool-type-of-a/15485048?noredirect=1#comment21924460_15485048)

在我尝试使用 launchctl 将命令行工具应用程序作为守护进程启动之前，一切似乎都运行良好。如果守护进程以当前登录的用户身份运行，则命令行工具应用程序启动外部应用程序就好了。如果守护程序以 root 身份运行，则命令行工具应用程序无法启动外部应用程序。如果守护程序以 root 身份运行，则使用 NSWorkspace 打开应用程序似乎不起作用。

有谁知道从以 root 身份运行的守护进程打开另一个应用程序的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:38:21.950

这可能是您遇到的 MacOS 中的安全限制。

我建议做的是创建一个代码签名的“帮助工具”，将自身（通过 setuid - 我不会在代码签名的应用程序之外执行）重置为当前登录用户的用户 ID，然后执行在该用户上下文中启动应用程序的 NSWorkspace 技巧。

但是，创建辅助工具并*非易事*。Apple 的[授权服务编程指南](http://developer.apple.com/library/mac/#documentation/security/conceptual/authorization_concepts/03authtasks/authtasks.html)中描述了宏大的概念。

看看[Apple 的“SMJobBless”示例代码](http://developer.apple.com/library/mac/#samplecode/SMJobBless/Introduction/Intro.html)，它展示了如何安装可以设置用户权限的帮助工具，然后修改它的帮助工具代码以启动您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T07:52:52.250

这是一个太复杂的主题，无法在 StackOverflow 答案中真正解决。简短的回答是守护进程不能可靠地启动应用程序。如需详细答案，请阅读 Apple 的[技术说明 TN2083：守护进程和代理](https://developer.apple.com/library/mac/#technotes/tn2083/_index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T23:54:16.983

我终于通过使用此链接中提到的代码来获取“控制台用户”的 uid 和 gid 使其工作：
[https ://superuser.com/questions/180819/how-can-you-find-out-the-currently-登录用户-in-the-os-x-gui](https://superuser.com/questions/180819/how-can-you-find-out-the-currently-logged-in-user-in-the-os-x-gui)。

该链接显示了如何使用`SCDynamicStoreCreate()`和`SCDynamicStoreCopyConsoleUser()`获取“控制台用户”的 uid 和 gid 的示例。

获取 uid 和 gid 后，只需将 uid 和 gid 设置为控制台用户，然后再使用 NSWorkspace 打开应用程序，这对我来说就成功了。

# php - Jquery 304 未修改问题

> ID：15514260
> 
> 赞同：0
> 
> 时间：2013-03-20T02:34:51.670
> 
> 标签：php, jquery, http-status-code-304

我正在 WAMP 服务器上使用 jquery、php、jquerymobile 构建应用程序。应用程序中的所有内容都可以正常工作，直到我尝试返回另一个页面并且它应该根据该函数触发一个`pageinit`函数。它似乎没有触发，因此页面是空白的，并且没有将 json 数据放入页面中。当我使用 firebug 检查事件时，我在控制台中意识到该页面出现 304 Not Modified 错误，我读到该错误与缓存有关。如何在我的 ajax 请求中阻止这种情况发生，缓存值设置为 false。

# mysql - 从一个表登录用户并在同一语句中计算另一个表的出现次数

> ID：15514263
> 
> 赞同：0
> 
> 时间：2013-03-20T02:35:05.103
> 
> 标签：mysql, sql, select, count

我正在制作一个允许用户登录的小型 php 网站，其中一个功能是它允许他们互相发布消息。**消息表**描述如下：

```
msgId   int(20) NO  PRI NULL    auto_increment
mSender int(20) NO  MUL NULL    
mReciever   int(20) NO  MUL NULL    
mTitle  tinytext    NO      NULL    
mBody   mediumtext  NO      NULL    
mRead   tinyint(4)  NO      NULL    
mDate   datetime    NO      NULL 
```

当用户登录时，他们将根据存储在此表中的详细信息进行身份验证：

```
aId int(20) NO  PRI NULL    auto_increment
aUser   varchar(30) NO  UNI NULL    
aPass   varchar(40) NO      NULL    
aEmail  varchar(30) NO  UNI NULL    
aBio    mediumtext  YES     NULL    
aReg    datetime    NO      NULL 
```

我使用`select`语句将结果集与用户提供的*凭据*进行比较，如果经过*身份验证*，我想在`header.php`文件中显示一些状态，例如有多少消息（如果有），我能够做到这一点的唯一方法是通过在`messages`表上单独选择计数。

是否有一种方法可以将两者结合起来，以便匹配用户凭据，但还会显示未读消息的数量。我使用 mReciever 字段在消息表中为用户记录消息，读取可以是 1 或 0 表示已读或未读。计数语句是：`SELECT COUNT(*) AS occurrences FROM messages WHERE mRead=0 and mReciever=$aId` 作者登录是一个简单的`select * from authors`用户和密码匹配的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:44:55.627

尝试

```
SELECT a.aId,
       a.aEmail,
       a.aBio,
       a.aReg,
       (SELECT COUNT(*) 
          FROM messages 
         WHERE mRead=0 AND mReciever=a.aId) occurrences
  FROM authors a
 WHERE a.aEmail = 'email@mail.com' AND a.aPass = '*****' 
```

这是**[SQLFiddle](http://sqlfiddle.com/#!2/a36fb/7)**

# python - Python：在保持前导 0 的同时转换为 str

> ID：15514265
> 
> 赞同：2
> 
> 时间：2013-03-20T02:35:19.217
> 
> 标签：python

所以在python中我试图以000X的顺序访问文件路径

所以我首先设置一个字符串

```
path = '0001' 
```

然后指向并打开文件路径

```
filepath = open('/home/pi/Pictures' + path + '.JPG', 'rb') 
```

所以我做我的生意，现在想访问扩展名 0002 的下一个文件

```
intpath = int(path)
intpath = intpath + 1
path = str(intpath) 
```

我确信这是低效的，但我开始了。不幸的是，这使得路径'2'而不是'0002'......知道如何保持前导零吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:37:18.747

你可以使用这样的东西

```
>>> ['{0:04}'.format(i) for i in range(1, 15)]
['0001', '0002', '0003', '0004', '0005', '0006', '0007', '0008', '0009', 
 '0010', '0011', '0012', '0013', '0014'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T02:37:58.170

如果您知道需要 4 位数字，请使用字符串格式：

```
path = "%04d" % (intpath+1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:20:47.330

另一个优点`str.format`是很容易参数化宽度。如果您的 Python 是 2.5 或更早版本，则必须使用`%`格式

```
>>> ['{i:0{width}}'.format(i=i, width=4) for i in range(1, 15)]
['0001', '0002', '0003', '0004', '0005', '0006', '0007', '0008', '0009', '0010', '0011', '0012', '0013', '0014'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T02:38:49.313

我可能会使用其他之一，但为了完整起见，还有`zfill`：

```
'1'.zfill(4) 
```

# r - 交换某些行的列值

> ID：15514267
> 
> 赞同：0
> 
> 时间：2013-03-20T02:35:33.110
> 
> 标签：r

对于像这样格式化的数据，我想将某些 f 值更改为 j 并将 j 值更改为 f 对于 C 的某些值，例如当 c 为 6 7 或 2 时，我想在 A 列中将 j 交换为 f，反之亦然。

```
 A    B           C    
      f    2           2   
      f    2           6 
      j    2           7 
      j    3           3 
      j    3           4 
      f    3           8 
      j    2           2   
      j    2           6 
      f    2           7 
      f    3           3 
      f    3           4 
      j    3           8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:42:41.547

也许像这样

```
DF <- read.table(textConnection('A    B           C    
  f    2           2   
  f    2           6 
  j    2           7 
  j    3           3 
  j    3           4 
  f    3           8 
  j    2           2   
  j    2           6 
  f    2           7 
  f    3           3 
  f    3           4 
  j    3           8'), header=TRUE, stringsAsFactors = FALSE)

DF
##    A B C
## 1  f 2 2
## 2  f 2 6
## 3  j 2 7
## 4  j 3 3
## 5  j 3 4
## 6  f 3 8
## 7  j 2 2
## 8  j 2 6
## 9  f 2 7
## 10 f 3 3
## 11 f 3 4
## 12 j 3 8

DF[DF$C %in% c(6, 7, 2), "A"] <- ifelse(DF[DF$C %in% c(6, 7, 2), "A"] == "f", "j", "f")

DF
##    A B C
## 1  j 2 2
## 2  j 2 6
## 3  f 2 7
## 4  j 3 3
## 5  j 3 4
## 6  f 3 8
## 7  f 2 2
## 8  f 2 6
## 9  j 2 7
## 10 f 3 3
## 11 f 3 4
## 12 j 3 8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:54:33.660

好像是骗人的：

```
x[x$C %in% c(6,7,2),'A'] <- levels(x$A)[3 - as.numeric(x[x$C %in% c(6,7,2),'A'])]

> x
##    A B C
## 1  j 2 2
## 2  j 2 6
## 3  f 2 7
## 4  j 3 3
## 5  j 3 4
## 6  f 3 8
## 7  f 2 2
## 8  f 2 6
## 9  j 2 7
## 10 f 3 3
## 11 f 3 4
## 12 j 3 8 
```

# objective-c - 单元测试自定义 UIView

> ID：15514268
> 
> 赞同：7
> 
> 时间：2013-03-20T02:35:38.513
> 
> 标签：objective-c, unit-testing

我有一个使用 CoreGraphics 框架的图形应用程序，

虽然我有模型文件的单元测试套装，但我似乎无法理解如何为我的自定义 UIView 创建单元测试，

我的目标是设置视图的基本属性并查看绘制函数的结果，尽管在我的设置器中我调用了：[self setNeedsDisplay]; 我的“drawRect”函数没有从单元测试中调用，尽管它是从真实应用程序中调用的

有没有办法绘制单元测试项目？测试 ui 项目的最佳实践/工具是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:28:08.163

测试绘图的一种简单方法是首先使绘图看起来像您想要的那样（所以没有 TDD）。然后进行将绘图渲染为 PNG 的测试。使用 #if 条件在捕获基线 PNG 和与该 PNG 进行比较之间切换测试代码。

在新的操作系统版本中，渲染可能会略有变化。因此，坚持使用单一操作系统进行基线图像测试。需要时获取新基线。

有了这种测试，您就可以重构您的绘图代码。如果它呈现相同的图像，则您的最新更改很好。如果有差异，您必须就是否接受更改做出一个直观的决定。（如果你这样做了，请捕获一个新的基线。）

**编辑：**这些天来，我不会手动做所有这些，而是​​使用[iOSSnapshotTestCase](https://github.com/uber/ios-snapshot-test-case/)。当测试失败时，它不会仅仅给出“出现问题”的结果，而是保存图像。这样，您可以进行并排比较，而无需手动启动您的应用程序并导航到相关视图。它还模拟渲染到不同方向的不同设备，这对于检查自动布局非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T06:58:32.963

一般来说，*单元*测试视图不是正确的做法。单元测试旨在验证离散的逻辑原子，如果你正确地分解你的代码，那么你的视图中应该很少有逻辑。

更成功的方法可能是使用[UIAutomation 框架](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Reference/UIAutomationRef/_index.html)（或您选择的自动化工具）。这允许您在应用程序实际运行时（在模拟器或设备上）自动模拟用户交互。`captureRectWithName()`UIAutomation 具有允许您查找和截取特定视图的功能（各种视图方法和）。然后，您可以将其连接到例如[ImageMagick 的命令行比较工具](http://www.imagemagick.org/script/compare.php)，以验证您绘制的内容是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-05T13:18:59.860

我个人认为您应该使用 XCUI 测试来测试您对视图所做的任何渲染。然而，任何创建上述自定义渲染的业务逻辑，或任何数学，或您添加的逻辑都应该被测试并与任何其他类隔离。

因此，您的 UIAutomation 测试将检查您的视图是否正在呈现，但您的单元测试将验证其中可能存在的任何数学或业务逻辑。

# ios - iOS 单元测试 - 从本机库访问函数的问题

> ID：15514272
> 
> 赞同：0
> 
> 时间：2013-03-20T02:36:19.410
> 
> 标签：ios, xcode, testing, static-libraries, native

我正在创建一个使用另一个 Native-C 库的 Wrapper 库项目。我可以在其他应用程序中使用 Wrapper 库函数，通过它可以访问 Native-C 库中存在的函数。

现在，在 Wrapper Library 项目中，当我添加“单元测试”（使用 OCUnit，）时，它会为 Native C 库中存在的所有函数提供错误。仅在执行单元测试时出现错误。

它显示的错误是，

**架构 i386 的未定义符号：“_SQMT_FUNC_close”，引用自：libWrapperLibraryAlter.a(wrapperAPI.o) 中的 _funcClose

```
 ld: symbol(s) not found for architecture i386 
```

clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）**

函数“funcClose”存在于当前的 Wrapper Library 项目（.m 文件）中。函数“SQMT_FUNC_close”存在于 Native-C 库项目（.c 文件）中。

单元测试执行显示所有 Native-C 函数的错误。

请帮助解决此问题。

图书馆路径：

```
**/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -bundle -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/work/Final_code/test/iOS/Debug-iphonesimulator -L/work/Final_code/test/iOS/iOSWrapper/../../Product/Library/iOS/Release-iphoneos -F/work/Final_code/test/iOS/Debug-iphonesimulator -F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/Developer/Library/Frameworks -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -filelist /work/Final_code/test/iOS/Build/Intermediates/iOSWrapper.build/Debug-iphonesimulator/wrapperTests.build/Objects-normal/i386/wrapperTests.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=5.0 -liOSWrapper -lHomeLittle -framework SenTestingKit -framework Foundation -framework UIKit -o /work/Final_code/iOS/Debug-iphonesimulator/wrapperTests.octest/wrapperTests** 
```

iOSWrapper - 是我正在测试的当前包装库。HomeLittle - 是原生 C 库

# optimization - 三.js：如何控制渲染顺序

> ID：15514274
> 
> 赞同：19
> 
> 时间：2013-03-20T02:36:26.363
> 
> 标签：optimization, 3d, rendering, three.js

我正在使用three.js

如何控制渲染顺序？假设我有三个平面几何图形，并且想要以特定顺序渲染它们，而不管它们的空间位置如何。

谢谢

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-20T03:09:40.243

你可以设置

```
renderer.sortObjects = false; 
```

并且对象将按照它们添加到场景中的顺序进行渲染。

或者，您可以保留默认值，并`sortObjects`为`true`每个对象指定 的值`object.renderOrder`。

有关更多详细信息，请参阅[Threejs 中的透明对象](https://stackoverflow.com/questions/15994944/transparent-objects-in-threejs/15995475#15995475)

您可以做的另一件事是使用此处描述的方法：[如何使用 Threejs 更改对象的 zOrder？](https://stackoverflow.com/questions/12666570/how-to-change-the-zorder-of-object-with-threejs)

三.js r.71

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-01T15:58:43.913

对于 threejs r70 及更高版本，已删除 renderDepth。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T20:52:59.247

在我的情况下，使用 object.renderDepth 有效。我有一个玻璃盒，里面有透明的气泡。气泡在某些角度消失了。

因此，将它们的 renderDepth 设置为较高的数字并使用场景中的其他元素深度解决了该问题。将 dat.gui 控件连接到 renderDepth 属性可以很容易地调整使场景工作所需的深度。

所以，在我的 fishScene 中，我有砾石、坦克和气泡。我用 dat.gui 控件连接了砾石网格，几秒钟后，我就获得了所需的深度。

```
this.gui.add(this.fishScene.gravel, "renderDepth", 0, 200); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-10T06:33:16.927

我有一堆对象，它们是从随机位置 x 和 y 的 for 循环中克隆出来的……和 obj.z ++，所以它们会排成一行……包括 obj.renderOrder ++；在循环中解决了我的问题。

# redis - zookeeper vs redis 服务器同步

> ID：15514277
> 
> 赞同：11
> 
> 时间：2013-03-20T02:36:39.757
> 
> 标签：redis, distributed, apache-zookeeper

我有一小群服务器需要保持同步。我最初的想法是让一台服务器成为“主服务器”并使用 redis 的 pub/sub 功能发布更新（因为我们已经使用 redis 进行存储）并让集群中的其他服务器（从属服务器）轮询更新一项长期运行的任务。这似乎是一种让一切保持同步的简单方法，但随后我想到了一个明显的问题：如果我的“主人”宕机了怎么办？那是我开始研究技术以确保总有一位大师的地方，这使我阅读了诸如领导选举之类的想法。最后，我偶然发现了[Apache Zookeeper](https://zookeeper.apache.org/)（通过 python 绑定，“ [pettingzoo](https://github.com/Knewton/pettingzoo-python)")，它显然为您处理了很多容错逻辑。我也许可以编写自己的领导者选择代码，但我认为它不会像已经证明和测试过的东西那么好，如动物园管理员。

我使用 zookeeper 的主要问题是它只是另一个组件，当我可以使用更简单的东西时，我可能会不必要地添加到我的设置中。有没有人以这种方式使用过redis？或者有没有其他简单的方法可以用来获得我想要实现的功能类型？

有关 pettingzoo 的更多信息 ( [slideshare](http://www.slideshare.net/devondjones/a-python-petting-zoo) )

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T10:08:41.167

恐怕没有简单的方法来实现高可用。这通常很难设置并且很难测试。实现HA的方式有很多种，可以分为两类：物理集群和逻辑集群。

**物理集群**是关于使用硬件、网络和操作系统级别的机制来实现 HA。在 Linux 上，您可以查看[Pacemaker](http://clusterlabs.org/)，它是一个成熟的开源解决方案，随所有企业发行版一起提供。如果您想直接在应用程序中嵌入集群功能（在 C 中），您可能需要检查[Corosync 集群引擎](http://www.corosync.org/)（也由 Pacemaker 使用）。如果您计划使用商业软件，[Veritas Cluster Server](http://en.wikipedia.org/wiki/Veritas_Cluster_Server)是一个成熟（但价格昂贵）的跨平台 HA 解决方案。

**逻辑集群**是关于使用花哨的分布式算法（如领导者选举、PAXOS 等）来实现 HA，而不依赖于特定的低级机制。这就是 Zookeeper 提供的东西。

Zookeeper 是建立在 ZAB 协议之上的一致、有序、分层的存储（非常类似于 PAXOS）。它相当健壮，可以用来实现一些 HA 设施，但也不是微不足道的，需要在所有节点上安装 JVM。对于很好的例子，你可以看看一些[食谱](http://zookeeper.apache.org/doc/trunk/recipes.html)和来自 Netflix 的优秀[Curator](https://github.com/netflix/curator)库。如今，Zookeeper 的使用远远超出了纯 Hadoop 上下文，而 IMO，这是构建 HA 逻辑基础架构的最佳解决方案。

Redis pub/sub 机制不够可靠，无法实现逻辑集群，因为未读消息会丢失（没有 pub/sub 项的排队）。要实现 Redis 实例集合的 HA，您可以尝试 Redis [Sentinel](http://redis.io/topics/sentinel)，但它不会扩展到您自己的软件。

如果您准备使用 C 进行编程，那么一个经常被遗忘的 HA 框架（但在 IMO 中可能非常有用）就是[BerkeleyDB](http://www.oracle.com/technetwork/products/berkeleydb/high-availability-099050.html)附带的一个。它非常基础，但支持现成的领导人选举，并且可以集成到任何环境中。可以在[此处](http://www.oracle.com/us/technologies/ha-scalable-applications-bdb-wp-166559.pdf)和[此处](http://docs.oracle.com/cd/E17076_02/html/programmer_reference/rep.html)找到文档。注意：您不必将数据存储到 BerkeleyDB 以从 HA 机制中受益（仅拓扑数据 - 您将放入 Zookeeper 中的相同）。

# visual-c++ - #pragma 部分和属性

> ID：15514284
> 
> 赞同：4
> 
> 时间：2013-03-20T02:37:33.170
> 
> 标签：visual-c++, portable-executable

只是尝试创建一个新部分并使用 #pragma 设置他的属性会返回此警告：

> 警告 C4330：忽略部分“.mysec”的属性“写入”

简单代码：

```
#include <windows.h>
#include <stdio.h>

#pragma section(".mysec",execute,read,write)
__declspec(allocate(".mysec")) UCHAR var[] = {0xDE, 0xAD, 0xBE, 0xEF};

void main() { return; } 
```

*链接器选项：/DYNAMICBASE:NO、/FIXED、/NXCOMPAT:NO、/OPT:NOREF*

*操作系统/工具：Win x64 / msvc++ 110*

我阅读了 MSDN 上的一些文章，尤其是这个[http://msdn.microsoft.com/en-us/library/50bewfwa(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/50bewfwa(v=vs.110).aspx)但没有找到答案。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:42:12.453

我认为这是由于`execute`国旗。我不认为你可以在 Windows 中有一个包含可写代码的部分。

我可能记错了，但这会是一个安全问题，因此不受支持。

# cuda - 在 CUDA 中获取浮点特殊值的方法？

> ID：15514286
> 
> 赞同：12
> 
> 时间：2013-03-20T02:37:37.640
> 
> 标签：cuda, floating-point, nvidia, nan

CUDA 中是否有任何设备函数来获取 IEEE 754 特殊值，如 inf、NaN？我的意思是稳定的方式，而不是通过编译器可以优化的一些数学运算。

我只设法找到一个名为 nan() 的设备函数，它必须采用一些未知的字符串参数。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T03:10:21.460

如何定义`CUDART_NAN`(double) 和`CUDART_NAN_F`(float) `/usr/local/cuda/include/math_constants.h`：

```
#define CUDART_NAN_F            __int_as_float(0x7fffffff)
#define CUDART_NAN              __longlong_as_double(0xfff8000000000000ULL) 
```

和：

```
#define CUDART_INF_F            __int_as_float(0x7f800000)
#define CUDART_INF              __longlong_as_double(0x7ff0000000000000ULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-08T17:13:26.937

CUDA 现在在数学库中有 nanf 指令。

**设备**浮动 nanf( const char *tagp )

```
Returns "NaN" 
```

# java - 不同提供商的加密和解密

> ID：15514291
> 
> 赞同：0
> 
> 时间：2013-03-20T02:37:57.790
> 
> 标签：java, security, encryption

假设我使用提供程序 A 使用 AES 加密，我可以使用提供程序 B 解密相同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:37:20.990

是的，但您不仅应该指定算法 ( `AES`)，还应该指定模式和填充（例如`AES/ECB/PKCS5Padding`）。

JCA参考[指南](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#Cipher)说：

> （创建密码对象）如果未指定模式或填充，则使用模式和填充方案的特定于提供者的默认值。例如，SunJCE 提供程序使用 ECB 作为默认模式，PKCS5Padding 作为 DES、DES-EDE 和 Blowfish 密码的默认填充方案。这意味着在 SunJCE 提供者的情况下： `Cipher.getInstance("DES")`和`Cipher.getInstance("DES/ECB/PKCS5Padding")`是等效的语句。

如果您只指定`AES`，则可能是其他提供者实现了不同的默认值，这将不起作用（例如，您将使用 CBC 加密并使用 ECB 解密）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:25:24.173

是的，它是标准化算法，填充和操作模式等内容需要在两个提供商上设置相同，以便您能够解密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:15:52.277

大概。早期的 AES 有许多算法被抛出。我记得一个支持两种鱼变体的程序。成为标准的是 Rijndael。这些天，除非另有说明，否则您可以假设 AES 实际上是 AES-Rijndael。如果它指定了任何其他 AES 算法，比如两条鱼，你就会遇到麻烦。

# java - 在父视图中多次动态包含 XML 相对布局

> ID：15514293
> 
> 赞同：0
> 
> 时间：2013-03-20T02:37:59.340
> 
> 标签：java, android, xml, android-layout

我有一个 XML RelativeLayout 片段，我想在我的主视图中包含几次（来自循环）。问题似乎是——有没有办法避免对 RatingBar 的父级进行硬编码，因为每次我包含 RelativeLayout 片段时，我的元素都需要具有不同的 id？

据我所知，推荐的方法是获取布局片段，然后为每个元素覆盖 android:id 以使其唯一，然后为每个具有相对定位的元素手动覆盖 android:layout_below。这似乎有点笨拙——有没有办法让这些绑定自动完成？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="20dp" 
    android:id="@+id/relativeView">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:text="Label"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <RatingBar
        android:id="@+id/ratingBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/textView1" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:44:57.703

你只需要改变`RelativeLayout` like的id

```
int BASEID=200;

View v = mLayoutInflator.inflate(R.layout.myRelativeLayout, null);

for (int i;i<10;i++){
    v.findViewById(R.id.relativeView).setId(i+BASEID);
}

mRootView.addView(v,...); 
```

然后当您需要获取`RatingBar`假设`RelativeLayout`您添加的第 4 个时，您可以调用

```
RatingBar mRatingBar = (RatingBar)mRootView.findViewById(BASEID+3).findViewById(R.id.ratingBar1); 
```

# java - 是否可以在没有 Java 的情况下构建 Android 应用程序？

> ID：15514294
> 
> 赞同：1
> 
> 时间：2013-03-20T02:38:04.253
> 
> 标签：java, android, c++, python, django

我想学习如何为 Android 编写应用程序。我不是很喜欢Java。我读到您可以使用 Python 和 C++ 构建 Android 应用程序。那么我可以完全不使用 Java 构建应用程序吗？在构建 Android 时，C++、Python 和 Java 的优势是什么？另一个问题：Django Framework 是否适用于 Android？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:46:27.927

您可能想查看诸如 Phonegap、Scala、Groovy、Mirah、Rhodes、Clojure 之类的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:52:09.347

是的，这是可能的，但我认为这不是一个简单的方法

如果你想使用 python，你可以在这里使用 python 包装器 -> [https://code.google.com/p/python-for-android/](https://code.google.com/p/python-for-android/)它与 android 脚本层一起构建（[https://code.google.com /p/android-scripting/](https://code.google.com/p/android-scripting/) )

如果你想使用 C++，你可以使用 google SDK 提供的 android NDK 和 JNI，如果你想学习，这是一个很好的例子 - > [https://code.google.com/p/cgroupmgr/wiki/JNIBasics](https://code.google.com/p/cgroupmgr/wiki/JNIBasics)

但最后我认为你应该学习java来编写android :) 因为这样你就可以完全理解和利用android SDK

# delphi - 使用 FreeOnTerminate = True 对 TThread 进行 Delphi 单元测试

> ID：15514295
> 
> 赞同：13
> 
> 时间：2013-03-20T02:38:07.093
> 
> 标签：delphi, unit-testing, delphi-2010, dunit, tthread

当 FreeOnTerminate = True 时，为 TThread 后代编写 Delphi DUnit 测试的最佳方法是什么？TThread 后代返回一个我需要测试的引用，但我不知道如何等待线程在测试中完成......

```
unit uThreadTests;

interface

uses
  Classes, TestFramework;

type

  TMyThread = class(TThread)
  strict private
    FId: Integer;
  protected
    procedure Execute; override;
  public
    constructor Create(AId: Integer);
    property Id: Integer read FId;
  end;

  TestTMyThread = class(TTestCase)
  strict private
    FMyId: Integer;
    procedure OnThreadTerminate(Sender: TObject);
  protected
    procedure SetUp; override;
    procedure TearDown; override;
  published
    procedure TestMyThread;
  end;

implementation

{ TMyThread }

constructor TMyThread.Create(AId: Integer);
begin
  FreeOnTerminate := True;
  FId := AId;

  inherited Create(False);
end;

procedure TMyThread.Execute;
begin
  inherited;

  FId := FId + 1;
end;

{ TestTMyThread }

procedure TestTMyThread.TestMyThread;
//var
//  LThread: TMyThread;
begin
//  LThread := TMyThread.Create(1);
//  LThread.OnTerminate := OnThreadTerminate;
//  LThread.WaitFor;
//  CheckEquals(2, FMyId);
//  LThread.Free;
///// The above commented out code is only useful of FreeOnTerminate = False;

  with TMyThread.Create(1) do
  begin
    OnTerminate := OnThreadTerminate;
    WaitFor; /// Not sure how else to wait for the thread to finish?
  end;

  CheckEquals(2, FMyId);
end;

procedure TestTMyThread.OnThreadTerminate(Sender: TObject);
begin
  FMyId := (Sender as TMyThread).Id;
end;  /// When FreeOnTerminate = True - THIS LINE CAUSES ERROR: Thread Error the handle is invalid

procedure TestTMyThread.SetUp;
begin
  inherited;

end;

procedure TestTMyThread.TearDown;
begin
  inherited;

end;

initialization
  RegisterTests([TestTMyThread.Suite]);

end. 
```

任何想法都会受到欢迎。

德尔福 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:30:59.313

子类化线程以使其更具可测试性。`TThread`并`TObject`提供足够的钩子，您可以添加传感变量来观察它是否达到了您希望它具有的状态的某些点。

我看到了您可能希望测试的这个特定课程的三个方面：

1.  `Id`它根据发送给构造函数的值计算其属性的值。
2.  它计算`Id`新线程中的新属性，而不是调用构造函数的线程。
3.  完成后它会自行释放。

所有这些东西都可以从子类中测试，但是如果不更改线程的接口就很难测试。（到目前为止，所有其他答案都需要更改线程的接口，例如通过添加更多构造函数参数或更改它自己启动的方式。这会使线程更难，或者至少更麻烦，在实际程序中使用。）

```
type
  PTestData = ^TTestData;
  TTestData = record
    Event: TEvent;
    OriginalId: Integer;
    FinalId: Integer;
  end;

  TTestableMyThread = class(TMyThread)
  private
    FData: PTestData;
  public
    constructor Create(AId: Integer; AData: PTestData);
    destructor Destroy; override;
    procedure AfterConstruction; override;
  end;

constructor TTestableMyThread.Create(AId: Integer; const AData: PTestData);
begin
  inherited Create(AId);
  FData := AData;
end;

destructor TestableMyThread.Destroy;
begin
  inherited;
  FData.FinalId := Id;
  // Tell the test that the thread has been freed
  FData.Event.SetEvent;
end;

procedure TTestableMyThread.AfterConstruction;
begin
  FData.OriginalId := Id;
  inherited; // Call this last because this is where the thread starts running
end; 
```

使用该子类，可以编写一个测试来检查前面确定的三个质量：

```
procedure TestTMyThread.TestMyThread;
var
  Data: TTestData;
  WaitResult: TWaitResult;
begin
  Data.OriginalId := -1;
  Data.FinalId := -1;
  Data.Event := TSimpleEvent.Create;
  try
    TTestableMyThread.Create(1, @Data);

    // We don't free the thread, and the event is only set in the destructor,
    // so if the event is signaled, it means the thread freed itself: That
    // aspect of the test implicitly passes. We don't want to wait forever,
    // though, so we fail the test if we have to wait too long. Either the
    // Execute method is taking too long to do its computations, or the thread
    // isn't freeing itself.
    // Adjust the timeout based on expected performance of Execute.
    WaitResult := Data.Event.WaitFor(5000);
    case WaitResult of
      wrSignaled: ; // This is the expected result
      wrTimeOut: Fail('Timed out waiting for thread');
      wrAbandoned: Fail('Event was abandoned');
      wrError: RaiseLastOSError(Data.Event.LastError);
      else Fail('Unanticipated error waiting for thread');
    end;

    CheckNotEquals(2, Data.OriginalId,
      'Didn''t wait till Execute to calculate Id');
    CheckEquals(2, Data.FinalId,
      'Calculated wrong Id value');
  finally
    Data.Event.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T07:00:44.710

创建处于挂起状态的线程，然后设置线程`OnTerminate`，最后`Resume`设置线程。

在您的测试类中，定义一个私有布尔字段，该字段由Eventhandler`FThreadDone`初始化`false`并设置为。`true``OnTerminate`

此外，您的构造函数逻辑有点脏，因为您不应该在调用继承的构造函数之前初始化字段。

所以：

```
constructor TMyThread.Create(AId: Integer);
begin
  inherited Create(true);
  FreeOnTerminate := True;
  FId := AId;
end;
...
procedure TestTMyThread.TestMyThread;
begin
  FThreadDone := False;
  with TMyThread.Create(1) do begin // Note: Thread is suspended...
    OnTerminate := OnThreadTerminate;
    // Resume;                         // ... and finally started here!
    Start;

  end;
  While not FThreadDone do Application.ProcessMessages;
  CheckEquals(2, FMyId);
end;

procedure TestTMyThread.OnThreadTerminate(Sender: TObject);
begin
  FMyId := (Sender as TMyThread).Id;
  FThreadDone := True;
end; 
```

这应该可以完成这项工作。

编辑：更正愚蠢的更正，经过测试，有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T08:05:33.427

因为您在终止时使线程自行释放，所以您要求它在完成后立即销毁自身的所有痕迹。由于您无法影响它何时完成，因此在启动线程后引用线程内的任何内容是错误的。

其他人提出的解决方案，即要求线程在终止时向您发出信号，是好的。我个人可能会选择这样做。如果您使用事件作为信号，那么您可以等待该事件。

但是，还有另一种方法可以做到这一点。

1.  创建挂起的线程。
2.  复制线程句柄。
3.  启动线程。
4.  等待复制的句柄。

因为您拥有重复的句柄，而不是线程，所以您可以安全地等待它。它似乎有点复杂，但我想它避免了创建一个不需要的额外同步对象。请注意，我并不是在提倡使用这种方法而不是使用事件来表示完成的方法。

无论如何，这是一个简单的想法演示。

```
{$APPTYPE CONSOLE}

uses
  SysUtils, Windows, Classes;

type
  TMyThread = class(TThread)
  protected
    procedure Execute; override;
  public
    destructor Destroy; override;
  end;

destructor TMyThread.Destroy;
begin
  Writeln('I''m dead!');
  inherited;
end;

procedure TMyThread.Execute;
begin
end;

var
  DuplicatedHandle: THandle;

begin
  with TMyThread.Create(True) do // must create suspended
  begin
    FreeOnTerminate := True;
    Win32Check(DuplicateHandle(
      GetCurrentProcess,
      Handle,
      GetCurrentProcess,
      @DuplicatedHandle,
      0,
      False,
      DUPLICATE_SAME_ACCESS
    ));
    Start;
  end;

  Sleep(500);
  Writeln('I''m waiting');
  if WaitForSingleObject(DuplicatedHandle, INFINITE)=WAIT_OBJECT_0 then
    Writeln('Wait succeeded');
  CloseHandle(DuplicatedHandle);
  Readln;
end. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T21:34:02.153

这是一个使用匿名线程的示例。

*   创建了一个事件 (TSimpleEvent)
*   一个匿名线程执行测试线程并
*   等待事件，该事件在测试线程的 OnTerminate 处理程序中发出信号
*   匿名线程处于等待状态，直到使用 WaitFor 执行
*   结果被 OnTerminate 处理程序拾取

这里重要的是事件在线程中等待。没有死锁的情况。

* * *

```
Uses
  SyncObjs;

type

  TMyThread = class(TThread)
  private
    FId : Integer;
  protected
    procedure Execute; override;
  public
    constructor Create( anInt : Integer);
    property Id : Integer read FId;
  end;

  TestTMyThread = class
  strict private
    FMyId: Integer;
    FMyEvent : TSimpleEvent;
    procedure OnThreadTerminate(Sender: TObject);
  protected
  public
    procedure TestMyThread;
  end;

{ TMyThread }

constructor TMyThread.Create(anInt : Integer);
begin
  inherited Create(True);
  FreeOnTerminate := True;
  FId := anInt;
end;

procedure TMyThread.Execute;
begin
  Inc(FId);
end;

procedure TestTMyThread.TestMyThread;
var
  AnonThread : TThread;
begin
  FMyEvent := TSimpleEvent.Create(nil,true,false,'');
  try
    AnonThread :=
      TThread.CreateAnonymousThread(
        procedure
        begin
          With TMyThread.Create(1) do
          begin
            OnTerminate := Self.OnThreadTerminate;
            Start;
          end;
          FMyEvent.WaitFor; // Wait until TMyThread is ready
        end
      );
    AnonThread.FreeOnTerminate := False;
    AnonThread.Start;

    AnonThread.WaitFor; // Wait here until test is ready
    AnonThread.Free;

    Assert(FMyId = 2); // Check result
  finally
    FMyEvent.Free;
  end;
end;

procedure TestTMyThread.OnThreadTerminate(Sender: TObject);
begin
  FMyId := (Sender as TMyThread).Id;
  FMyEvent.SetEvent; // Signal TMyThread ready
end; 
```

* * *

更新，因为 Delphi-2010 没有匿名线程类，这里有一个你可以实现的替代方案：

```
Type
  TMyAnonymousThread = class(TThread)
    private
      FProc : TProc;
    protected
      procedure Execute; override;
    public
      constructor Create(CreateSuspended,SelfFree: Boolean; const aProc: TProc);
  end;

constructor TMyAnonymousThread.Create(CreateSuspended,SelfFree: Boolean; 
  const aProc: TProc);
begin
  Inherited Create(CreateSuspended);
  FreeOnTerminate := SelfFree;
  FProc := aProc;
end;

procedure TMyAnonymousThread.Execute;
begin
  FProc();
end; 
```

# python - 为什么 urlparse.urlenparse 工作不一致？

> ID：15514306
> 
> 赞同：3
> 
> 时间：2013-03-20T02:39:05.150
> 
> 标签：python, urlparse

当netloc为空时urlparse.urlunparse不一致：

```
>>> urlparse.urlunparse(('http','','test_path', None, None, None))
'http:///test_path'
>>> urlparse.urlunparse(('ftp','','test_path', None, None, None))
'ftp:///test_path'
>>> urlparse.urlunparse(('ssh','','test_path', None, None, None))
'ssh:test_path' 
```

它是错误还是功能？我希望 urlunparse 总是表现得像第一个例子一样，即使方案未被识别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:50:02.087

`data`您传递给的元组`urlunparse`具有以下组件：

```
scheme, netloc, url, query, fragment = data 
```

如果没有`netloc`，并且`scheme`不在`uses_netloc`，则 url 为

```
 url = scheme + ':' + url 
```

[这就是定义](http://hg.python.org/cpython/file/940748853712/Lib/urllib/parse.py#l386)urlunparse（调用 urlunsplit）的方式：

```
def urlunsplit(data):
    ...
    scheme, netloc, url, query, fragment = data
    if netloc or (scheme and scheme in uses_netloc and url[:2] != '//'):
        if url and url[:1] != '/': url = '/' + url
        url = '//' + (netloc or '') + url
    if scheme:
        url = scheme + ':' + url 
```

* * *

请注意，`'ssh'`不在`uses_netloc`：

```
uses_netloc = ['ftp', 'http', 'gopher', 'nntp', 'telnet',
               'imap', 'wais', 'file', 'mms', 'https', 'shttp',
               'snews', 'prospero', 'rtsp', 'rtspu', 'rsync', '',
               'svn', 'svn+ssh', 'sftp','nfs','git', 'git+ssh'] 
```

* * *

`ssh://`如果您提供以下内容，您会得到一个以开头的 url `netloc`：

```
In [140]: urlparse.urlunparse(('ssh','netloc','test_path', None, None, None))
Out[140]: 'ssh://netloc/test_path' 
```

# jquery - jquery ui的自定义滚动可排序

> ID：15514307
> 
> 赞同：1
> 
> 时间：2013-03-20T02:39:05.137
> 
> 标签：jquery, jquery-ui-sortable

我有一个可排序的缩略图列表。该设计需要自定义滚动按钮而不是滚动条或使用默认的可排序滚动。

我需要知道如何让图像列表使用左/右按钮滚动。

这是一个小提琴：http: [//jsfiddle.net/helto/XESpE/3/](http://jsfiddle.net/helto/XESpE/3/)

HTML：

```
<div class="images">
<div id="thumbnails" class="thumbnails">Current Images:
    <br>
    <div id="list" class="thumbnailList"></div>
    <input type="button" id="thumbnavLeft" value="" class="thumbnavLeft"
    />
    <input type="button" id="thumbnavRight" value="" class="thumbnavRight"
    />
</div>
</div> 
```

CSS：

```
 .images {
    width: 470px;
    height: 230px;
    float: right;
    /*background-color: #000099;*/
    border: 1px solid #000000;
}
.thumbnails {
    width: 430px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 10px;
    position: relative;
}
.thumbnavLeft {
    background: url(http://s21.postimage.org/3kjh0954j/ft_imgnav_left.png) no-repeat;
    width: 24px;
    height: 71px;
    cursor: pointer;
    border: none;
    position: absolute;
    top: 20px;
}
.thumbnavRight {
    background: url(http://s23.postimage.org/k0ah3rio7/ft_imgnav_right.png) no-repeat;
    width: 24px;
    height: 71px;
    cursor: pointer;
    border: none;
    position: absolute;
    right: 0px;
    top: 20px;
}
.thumbnailList {
    background-color: #d0d0d0;
    white-space: nowrap;
    overflow-x: hidden;
    overflow-y: hidden;
    border: 1px solid #000000;
    height: 69px;
    margin: 0px 24px;
}
.item {
    background-image: url(http://s14.postimage.org/a4i2upfd9/noimage.jpg);
    background-repeat: no-repeat;
    background-position: top;
    background-size: 100%;
    height: 60px;
    width: 80px;
    visibility: visible;
    left: 0px;
    margin: 4px;
    cursor: pointer;
    display: inline-block;
    border: 1px solid #000000;
    position: relative;
}
.thumbClose {
    background: url(http://s14.postimage.org/4dwhupwr1/ft_imgnav_x.png) no-repeat;
    width: 7px;
    height: 9px;
    cursor: pointer;
    border: none;
    position: absolute;
    right: 0;
    padding: 2px;
    margin: 2px;
}
.parent {
    height: 80px;
    width: 400px;
}
.placeholder {
    height: 40px;
    width: 20px;
    display: inline-block;
    margin: 4px;
}
.placeholder {
    height: 1px !important;
} 
```

JS：

```
 $(document).ready(function () {
    // testing image thumbnails
    for (var i = 0; i < 10; i++) {
        var $newdiv = $('<div class="item" name="ghost.jpg"><input type="button" class="thumbClose"/></div>');
        $("#list").append($newdiv);
    }
    // initialize sortable thumbnails
    $(function () {
        $('#list').disableSelection().sortable({
            scroll: false,
            placeholder: 'placeholder',
            containment: 'parent',
            axis: 'x'
        });
    });
    $('#list').on('click', 'input', function (event) {
        var fileName = $(this).parent().attr('name');
        $(this).parent().remove();
    });
    $('#thumbnavLeft').on('click', function (e) {
        $('#list').css('left', '50');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:49:25.333

Jquery 有你可以使用的 scrollLeft 功能：http: [//api.jquery.com/scrollLeft/](http://api.jquery.com/scrollLeft/)

```
var position = 0; 

$('#thumbnavRight').on('click', function (e) {
    $('#list').scrollLeft(position+=500);
});

$('#thumbnavLeft').on('click', function (e) {
    $('#list').scrollLeft(position-=500);
}); 
```

基本工作示例：http: [//jsfiddle.net/basarat/XESpE/5/](http://jsfiddle.net/basarat/XESpE/5/)

# ios - UITextField 和 UIButton

> ID：15514309
> 
> 赞同：0
> 
> 时间：2013-03-20T02:39:16.900
> 
> 标签：ios, uibutton, uilabel

我的视图中有一个文本字段和一个按钮，如果文本字段为空，我不想让用户单击该按钮。当用户在文本字段中输入某些内容时，该按钮将是可点击的。我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:41:04.243

监听文本字段的更改。随着文本的变化，`enabled`根据是否有文本更新按钮的属性。当然，您还需要在开始时设置按钮的状态。

```
// Setup the text field change listener (this can be done in IB if appropriate)
// Put this in viewDidLoad if not using IB.
UITextField *myTextField = ... // a reference to the text field
[myTextField addTarget:self action:@selector(textFieldChangedAction:) forControlEvents:UIControlEventEditingChanged];

// Initialize the button's state (put this in viewDidLoad)
myButton.enabled = myTextField.text.length > 0;

// The method called as the text changes in the text field
- (void)textFieldChangedAction:(UITextField *)sender {
    myButton.enabled = sender.text.length > 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:45:44.870

对于您的 UITextField，您可以设置：

```
[textField addTarget:self action:@selector(editing:) forControlEvents:UIControlEventAllEditingEvents]; 
```

然后在您的编辑中：有：

```
-(void)editing:(UITextField *)sender {
    myButton.enabled = ![sender.text isEqualToString:@""];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:47:44.787

如果需要，您可以通过将按钮的 alpha 值设置为 0 来“隐藏”按钮，并且当文本字段至少有一个字符长时，然后将按钮的 alpha 值设置为 1 以“显示”按钮。我认为这在概念上很容易做到，并且对用户来说非常形象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T02:49:19.290

将 textfield.delegate 设置为 self 然后在委托中是 textfielddidbeginediting ( 检查是 textfield is @"" 然后禁用按钮

否则启用按钮）

还有一个。代表你可以使用

Textdidchangecharacters

并且在 viewdidload 按钮的第一个状态应该被禁用

# php - 将在类内部创建的变量声明为全局变量

> ID：15514310
> 
> 赞同：0
> 
> 时间：2013-03-20T02:39:22.160
> 
> 标签：php

如何使在类函数中创建的变量在该类函数之外可用？

例如，我的主类的构造函数创建了一个日志类的实例。我希望这个 $log 变量在我假设的其他类中可用（使用 global 关键字）。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:48:57.267

您可以使用静态。

```
class Main
    {
    static private $log;

    public function __construct()
        {
        self::$log = new Log();
        }

    static public function getLog()
        {
        return self::$log;
        }
    } 
```

现在您可以在任何地方使用 $log 访问

```
Main::getLog(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:49:45.003

使用全局变量会破坏 OOP 的目的。OOP 旨在减轻依赖性并为模块化使用提供代码包含。

您只是在接近您的应用程序设计错误，而是设计访问日志实例的简易性。那是; 实例化您的日志记录类并将实例存储在其他依赖它的类可以访问（通过设计）的地方。一种“注册表”。

# facebook - rel="canonical" 和 og:url 之间的区别？

> ID：15514311
> 
> 赞同：25
> 
> 时间：2013-03-20T02:39:23.207
> 
> 标签：facebook, facebook-opengraph, canonical-link

关于搜索引擎和 Facebook 似乎如何处理它们，我无法理解规范的 URL。

我的谷歌地图支持网站允许访问者使用社交媒体在他们的国家请求演出。有问题的页面之一可以在以下位置找到：http: [//izzy.nogig.in/](http://izzy.nogig.in/)

当用户点击他们的国家标记时，它会为他们提供共享选项（twitter/facebook/etc），共享时将共享该国家/地区的 URL，例如：izzy.nogig.in/usa？或izzy.nogig.in/西班牙？等等

URL 中的所有这些国家/地区都包含大量重复内容，因此我使用以下内容将搜索引擎指向我想要排名的页面：-

```
<link rel="canonical" href="http://izzy.nogig.in/_?"/> 
```

为了让 Facebook 喜欢计入每个国家/地区，我将我的 Open Graph “og:url” 设置如下，例如：

```
<meta property="og:url" content="http://izzy.nogig.in/australia?" /> 
```

现在，当我通过 Facebook 对象调试器运行特定于国家/地区的 URL 时（例如[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fizzy.nogig.in%2Faustralia %3F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fizzy.nogig.in%2Faustralia%3F) ) 它显示以下内容：-

```
Response Code:  206
Fetched URL:    http://izzy.nogig.in/australia
Canonical URL:  http://izzy.nogig.in/australia

Mismatch og:url and canonical url:
og:url tag in the header is not the same URL as rel='canonical' link in the html. 
```

**上面的错误让我感到困惑。**我知道它们不匹配，但我认为这是正确的方法。

调试器中的所有内容对我来说都很好（每个国家/地区的正确链接、描述、图像等），我无法更改 rel="canonical" 值以匹配我的 og:url，因为我需要它指向单个页面（无国家/地区）用于搜索引擎。

我相信一切正常。我应该忽略调试器的错误，还是我设置不正确？我不希望每个国家/地区的“喜欢”都消失并计入 rel="canonical" URL。

非常感谢 - 将

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-14T12:33:17.387

链接`rel="canonical"`将被搜索引擎`og:url`使用，而 Facebook 将使用链接

`og:url`基本上告诉FB刮板“ `ignore anything on this page, and scrape this url instead`”

有关规范链接元素的更多信息：[http ://en.wikipedia.org/wiki/Canonical_link_element](http://en.wikipedia.org/wiki/Canonical_link_element)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-27T12:53:41.397

规范 url 指的是*页面内容*。

> 目标（规范）IRI 必须标识在上下文（引用）IRI 中重复的内容或内容的超集。[RFC6596#3](https://www.rfc-editor.org/rfc/rfc6596#section-3)

Opengraph url 指的是*“对象”*。

> 您的对象的规范 URL，将在图中用作其永久 ID，例如“http://www.imdb.com/title/tt0117500/”。[ogp.me](http://ogp.me/)

所以它们可能不同。例如，对于多语言网站，每种语言的页面应该有不同的规范 url，因为内容不同，但通常`og:url`所有语言都相同，因为它们指的是用多种语言描述的同一个对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-23T20:04:43.063

在我开发的一个网站上，我以一种以上的语言提供页面，并提供链接以允许用户在一种语言和另一种语言之间切换。所以，我`rel="canonical"`将有 URL `http://www.example.com/`，而在代码中我更新了它，`og:url`所以它是`http://en.example.com/`or `http://fr.example.com/`。这样，当用户在 Facebook 上分享页面时，所有内容都会以他们查看页面的语言显示在 Facebook 上，这是有道理的，因为访问者的大多数朋友可能会说同一种语言。

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-17T17:43:02.583

我看不出为什么 og:url 和 canonical 应该不同。在这两种情况下，您都是在向搜索引擎或 Facebook 说要索引或显示的页面。

# c++ - timed_join(0) : 未找到采用“const int”类型的右手操作数的运算符

> ID：15514312
> 
> 赞同：0
> 
> 时间：2013-03-20T02:39:28.550
> 
> 标签：c++, boost, boost-thread

我试图检查一个线程是否正在使用`timed_join(0)`. 但与其他人不同，我收到此错误：

> 1>c:...\boost\thread\detail\thread.hpp(538): error **C2679** : binary '+' : no operator found 它采用'const int' 类型的右手操作数（或者没有可接受的转换）

看起来`timed_join()`没有正确定义为使用`int`. 但是为什么我是唯一一个得到这个错误的人？（尝试搜索标题，我在 google 得到了 3 个结果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:38:17.880

请注意，[`timed_join()`](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.thread.timed_join)在最新版本的 boost 中已弃用，[文档概述](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/build.html)更详细地描述了这样做的基本原理。看来这个接口会在 boost 1.56 之后被移除。无论如何，正确的用法`timed_join()`是提供一个`posix_time`值，例如

```
thread.timed_join(boost::posix_time::milliseconds(0)) 
```

# google-maps - 如何在谷歌热图上获取 maxIntensity 属性

> ID：15514317
> 
> 赞同：0
> 
> 时间：2013-03-20T02:40:09.417
> 
> 标签：google-maps, google-maps-api-3, data-visualization, heatmap

我用谷歌搜索，浏览了 SO，甚至只是使用 firebug 浏览了 javascript 属性，但我只是找不到在谷歌热图中*获取*该属性的方法。实例化新地图时，`maxIntensity`我可以设置。`maxIntensity`

根据此处的文档：[https ://developers.google.com/maps/documentation/javascript/3.10/reference#HeatmapLayer](https://developers.google.com/maps/documentation/javascript/3.10/reference#HeatmapLayer)

也没有方法可以访问热图选项对象，也可以设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:38:58.360

你可以得到它，假设`heatmap`是热图层：

`heatmap.get('maxIntensity')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-26T20:21:25.520

首先，建议查看[Google Maps Documentationj](https://developers.google.com/maps/documentation/javascript/tutorial)。提供的解决方案似乎是正确的，您可以仔细检查 [热图](https://developers.google.com/maps/documentation/javascript/heatmaplayer)部分。

```
let heatmap = new google.maps.visualization.HeatmapLayer({
    data: locations,
    map: map,
    maxIntensity: maxI,
    radius: rad,
    opacity: opac
}); 
```

# c++ - 仅接收7位读取串行端口midi字节c ++

> ID：15514318
> 
> 赞同：2
> 
> 时间：2013-03-20T02:40:13.403
> 
> 标签：c++, serial-port, byte, midi

天！我想通过串行向 C++ 发送 midi 字节。我已经在接收数据了。唯一的问题是我只收到 7 位，如果我尝试获取 2 个字节，那么这些位没有意义。我收到的范围在 0 到 127 之间，我应该能够看到 0 到 255 之间的数字。

我将数据存储在一个字符（1 个字节）中。我已经尝试过 int 和 wchar_t 但仍然无法正常工作。

```
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <fcntl.h>
#include <errno.h>
#include <termios.h>
#include <unistd.h>

unsigned char data_in[0];
int data_in_int;

int main(void){

int fd_serialport;
struct termios options;

fd_serialport = open("/dev/ttyACM0", O_RDONLY | O_NOCTTY);
//fd_serialport = open("/dev/ttyACM0", O_RDONLY | O_NOCTTY | O_NDELAY);

if(fd_serialport == -1){
    perror("Unable to open /dev/ttyACM0");
}

tcgetattr(fd_serialport, &options);
cfsetispeed(&options, B38400);
cfsetospeed(&options, B38400);
options.c_cflag |= (CLOCAL | CREAD);    
//options.c_cflag |= PARENB;
//options.c_cflag |= PARODD;
//options.c_cflag &= ~CSTOPB;
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8;
//options.c_iflag |= (INPCK | ISTRIP);
tcsetattr(fd_serialport, TCSANOW, &options);

fcntl(fd_serialport, F_SETFL, 0);
usleep(1000000);

while(read(fd_serialport, &data_in[0], 1)){

    data_in_int=(int)data_in[0];
    printf("%i\n", data_in_int);

    }
    usleep(2000);
}
return(0); 
```

我正在使用 teensy（类似于 arduino）来发送 midi 数据。目前我只是在做测试，看看我能不能得到这个号码。我知道 teensy 有效，因为其他程序正确解释数据（纯数据）。我正在使用 Ubuntu 12.04 LTS。我尝试发送 -255 到 255 之间的数字。小代码：

```
int indx=-256;

void setup(){
  Serial.begin(38400);
}

void loop(){

  Serial.print(indx,BYTE);
  delay(200);
  indx++;
  if (indx==256) indx=-256;
} 
```

你知道为什么我不能得到整个字节吗？我为 termios.options 和 fcntl 尝试了不同的配置。您认为尝试其他库更好吗？

谢谢！

pd：我还意识到程序无法解释 0 到 127 之间的一些数字。这个数字是 3、17、19，还有一些我不记得了。

# php - 如何在 php 脚本中获取表单名称？

> ID：15514320
> 
> 赞同：-1
> 
> 时间：2013-03-20T02:40:24.867
> 
> 标签：php, javascript, forms

对于我的 php 文件，我需要获取唯一的表单名称。

当用户单击提交按钮时执行 php 文件。但是，有多个提交按钮，每个按钮都有相同的 id，但它们都有唯一的名称。当他们单击提交按钮时，我需要名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:45:23.187

您不希望 html 中的元素具有相同的 id - 通常是不好的做法。您的页面可能会正常加载，但 html 验证器会将其视为错误。

html 验证器：http: [//validator.w3.org/](http://validator.w3.org/)

没有看到你的代码，很难给你一个明确的答案。如果你有 miltuple 形式，你可以使用隐藏的输入。例如

```
<input type="hidden" name="form_name" /> 
```

否则，您可以在单击按钮时使用 javascript 将数据放入表单中。使用 jquery 的示例 javascript

html:

```
<form id="formid" >
    <button type="button" id="someid" onclick="submitForm('btn1')"  />
    <button type="button" id="someid" onclick="submitForm('btn2')"  />
    <input type="hidden" id="btnsubmitid" value=""  />
</form> 
```

js：

```
function submitForm(btnID){

    $("#btnsubmitid").val(btnID);
   $("#formid").submit();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:44:39.597

一种方法是在表单中放置一个隐藏的输入。

```
<input type="hidden" name="formName" value="[name of form]" /> 
```

然后在你的php中，你可以使用它

```
$form-name = $_POST['formName']; 
```

很确定还有其他方法，但首先想到的是。

# android - 流媒体源上的 MediaMetadataRetriever

> ID：15514321
> 
> 赞同：13
> 
> 时间：2013-03-20T02:40:39.417
> 
> 标签：android, media-player, metadata

我很难显示从流媒体源播放的当前曲目。使用 MediaMetaDataRetriever 类返回 NULL，这意味着它失败了。我写了一个简单的方法，但现在我倾向于认为这仅适用于 MP3、WMA、AVI 等媒体文件。

```
public void metaData(){
        mmr.setDataSource(urlStation);
        String metaD = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ALBUMARTIST);
        Toast.makeText(MainActivity.this, "Artist = " + metaD, Toast.LENGTH_LONG).show(); 
```

任何好的和简单的建议将不胜感激。感谢您的时间！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T08:08:58.643

MediaMetadataRetriever 不适用于某些版本的 Android 上的 URL，请参阅[此](http://code.google.com/p/android/issues/detail?id=35794)问题。我创建了[FFmpegMediaMetadataRetriever](https://github.com/wseemann/FFmpegMediaMetadataRetriever)作为解决方法，我建议尝试一下。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-16T05:39:24.480

根据另一个答案中列出的相同[问题](https://code.google.com/p/android/issues/detail?id=35794)，您只需使用带有这些参数的 setDataSource 方法：

```
setDataSource(String uri, Map<String, String> headers) 
```

例如，

```
public void getStreamMetaData(String url){
  MediaMetadataRetriever mmr = new MediaMetadataRetriever();
  mmr.setDataSource(url, new HashMap<String, String>());
  //now do whatever you want

} 
```

我用流媒体 mp4 对其进行了测试，它对我有用。另外请注意，您需要在 AsyncTask 或另一个线程中使用 setDataSource 方法，因为根据文档运行可能需要一段时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-15T09:22:59.780

这种方法效果更好：

```
public void setDataSource (String uri, Map<String, String> headers) 
```

（带有您的流的 url 和一个空地图，例如 setDataSource(" [https://somewebsite.com/somefile.mp3](https://somewebsite.com/somefile.mp3) ", `new HashMap<String,String>()`);)

# cakephp - 我应该如何在 CakePHP 中处理表单？

> ID：15514327
> 
> 赞同：1
> 
> 时间：2013-03-20T02:41:14.103
> 
> 标签：cakephp

我正在学习 CakePHP。我读了一本 CakePHP 书和网络教程，但我仍然没有得到一些基本的东西：

我看到人们总是在 View 中使用`$form->create`. 我可以像平常一样使用 HTML 表单，还是必须像人们一样使用 HTML 表单？

当使用以下代码在 login.ctp 中创建表单时：

```
echo $form->create('User', array('method' => 'POST', 'action' => 'login'));     
echo $form->input('email');
echo $form->input('password');
echo $form->input(array('type' => 'submit'));
echo $form->end('Login'); 
```

当我点击提交按钮时，数据是否会传递给`login()`Controller类中的函数？

**编辑：**

我试过这个：

```
<?php
$this->Form->create("Test");
$this->Form->input("stuId",array('class'=>'inputField', 'placeholder'=>'SVxxxxxxxx'));
$this->Form->input("stuName",array('class'=>'inputField', 'name'=>'stuName'));
$this->Form->end();
?> 
```

但它什么也没显示？问题是什么 ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:08:01.863

*但它什么也没显示？问题是什么 ：（*

你必须`echo`在你的第一个代码片段中使用：

```
echo $this->Form->create("Test");
echo ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:52:09.730

您可以将 HTML 用于任何您想要的东西，但是您将失去 CakePHP 框架的一大优势。Cake HTML 和表单助手帮助您的代码适应未来。您还将受益于 Cake 在 Web 编码方面实施的最佳实践。我完全推荐使用这些助手。

表单数据被传递给`$this->request->data`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T02:56:41.920

是的，参数将传递给`login`方法。

我看到`$form`在那里以表格形式使用，看来您使用的是旧版本的 cakephp（如果`$form`已实例化，`$this->Form`那么您就可以了）

FormHelper 为我们做了很多工作`automagic`，它还为我们提供了增加安全性的方法。

我想你会去[博客教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html)

# c++ - 从字节中提取位的效率

> ID：15514331
> 
> 赞同：2
> 
> 时间：2013-03-20T02:41:45.387
> 
> 标签：c++, c, bit-manipulation, bitset

我正在从 C 中的一个字节中提取第 8 位。这是我的示例。

```
register unsigned char byte;

int pos = 7;

int x =(byte >> pos) & 1;   //Method I

int y =(byte & 0x80) >> pos;    //Method II 
```

两种技术都会产生相同的输出，但其中一种方法是否比另一种更有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:43:12.497

两者都是一样的。AND 和 SHR 指令都是英特尔 CPU 上的 1 时钟指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T23:42:32.570

如果您知道在编译时要提取的位，那么任何一种方法都应该具有大致相同的速度：

```
unsigned char val;
const int pos = 4;
...
int x = (val >> pos) & 1;
int y = (val & 0x10) >> pos; 
```

但是，如果您在运行时计算位置而不是常数，则最后执行 AND 应该更快：

```
unsigned char val;
int pos;
...
/* requires only a shift and AND */
int x = (val >> pos) & 1;
/* requires two shifts and AND */
int y = (val & (1 << pos)) >> pos; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T02:44:43.543

按位运算基本上是您在计算机上可以找到的最快的事情之一。我想任何差异都会*非常*小，因此这并不重要。

# python - 启动错误地每分钟运行一次作业

> ID：15514337
> 
> 赞同：0
> 
> 时间：2013-03-20T02:42:52.110
> 
> 标签：python, plist, launchd

编辑：解决了！在 XML 中的每个“分钟”之后都有一个额外的“>”。谢谢迪凯。

我正在尝试设置一个 python 脚本，每天在凌晨 1 点、上午 9 点和晚上 7 点运行 3 次。我打算使用正在工作的 cron，但是如果我的计算机在其中一个时间处于睡眠状态，我仍然希望在我再次打开计算机时运行该作业。cron 不这样做，但显然 launchd 应该这样做，但我遇到了问题。它会在正确的时间开始执行我的工作，但它会每分钟执行一次，我只希望它运行一次。

这是 plist 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>Label</key>
    <string>com.test</string>
    <key>ProgramArguments</key>
    <array>
      <string>/usr/bin/python</string>
      <string>/Users/myname/helloworld.py</string>
    </array>
    <key>StandardOutPath</key>
    <string>/Users/myname/log.txt</string>
    <key>StandardErrorPath</key>
    <string>/Users/myname/log.txt</string>  
    <key>StartCalendarInterval</key>
      <array>
        <dict>
          <key>Hour</key>
          <integer>1</integer>
          <key>Minute></key>
          <integer>0</integer>
        </dict>
        <dict>
          <key>Hour</key>
          <integer>9</integer>
          <key>Minute></key>
          <integer>0</integer>
        </dict>
        <dict>
          <key>Hour</key>
          <integer>19</integer>
          <key>Minute></key>
          <integer>0</integer>
        </dict>
      </array>
    <key>KeepAlive</key>
    <false/>
  </dict>
</plist> 
```

在这种情况下，helloworld.py 只是一个包含`print 'Hello world'`. 但它每分钟都会执行一次，而我只想让它执行一次。

This question with a similar name [Launchd job running every minute](https://stackoverflow.com/questions/1788118/launchd-job-running-every-minute)这表明阵列功能直到 OS X 10.5 才添加，我必须将这三个时间放入单独的 plist 文件中，但我尝试了一个只有一个文件的文件时间，它也没有工作，我正在运行 Mountain Lion (OS X 10.8.3)，所以它不应该是一个问题。我已经看到与 TimeOut 和 ExitTimeOut 相关的其他建议，但我不确定这些是否相关。

我怎样才能让它只运行一次程序，直到接下来的 8 小时？

# ruby - 如有必要，如何使用 Rmagick 裁剪调整图像大小。

> ID：15514342
> 
> 赞同：1
> 
> 时间：2013-03-20T02:43:41.143
> 
> 标签：ruby, resize, imagemagick, crop, rmagick

我正在尝试创建一个符合 riapi ( [https://github.com/riapi/riapi/blob/master/level-1.md](https://github.com/riapi/riapi/blob/master/level-1.md) ) 的图像服务器。所需的调整大小模式之一是裁剪（图像将被均匀裁剪以匹配所需的纵横比）。有人知道我在寻找 Rmagick 的百万种方法中的哪一种吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:00:37.160

看起来像`resize_to_fill`我正在寻找的东西。我只是错过了阅读文档。

# matlab - 在matlab for循环中测试迭代值失败？

> ID：15514343
> 
> 赞同：3
> 
> 时间：2013-03-20T02:43:41.793
> 
> 标签：matlab, if-statement, for-loop

我正在尝试在 for 循环中测试迭代变量的值，但我没有得到我期望的结果，所以我假设我误解了 matlab 的工作方式和/或我正在做一些可怕的事情错误的....

有人可以解释为什么当 x 达到 0.2 时，此代码中的 if 语句不会测试为 true 吗？：

```
start = -1;
stop = 1;
interval = 0.01;

for x = start:interval:stop
    if x == 0.20
        disp('it worked')
    end
end 
```

但是这段代码确实测试为真：

```
start = 0;
stop = 1;
interval = 0.01;

for x = start:interval:stop
    if x == 0.20
        disp('it worked')
    end
end 
```

我尝试了一堆不同的起始值，它们是否工作似乎是随机的......为什么改变起始值会改变输出？

如果我更改测试值（即 0.2 到 0.8 或其他值），我也会看到类似的不一致

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:11:10.953

您正在使用 测试浮点数`==`。请注意，这`-1+120*.01==0.2`是错误的，因为它们在浮点表示中不相等。 `0.01*20==0.2`碰巧是真的。相反，请使用容差，例如`if abs(x-0.20)<1e-10`。

# mysql - 使用 ORDER BY 更新语句

> ID：15514345
> 
> 赞同：0
> 
> 时间：2013-03-20T02:44:13.800
> 
> 标签：mysql, sql

我很难编写`UPDATE`包含`ORDER BY`子句的查询。

这可能吗？我将不胜感激有关如何执行此操作的任何建议。

这是我正在尝试做的模拟：

```
UPDATE notes SET `note`='$note' WHERE `date` = (ORDER BY `date`  DESC LIMIT 1) 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:46:44.947

试试这个 sql 查询：

```
UPDATE notes SET `note`='$note' WHERE `date` = (select `date` from notes ORDER BY DESC LIMIT 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:49:27.343

您的更新语句中缺少一列。这个[小提琴](http://sqlfiddle.com/#!2/e8362)向您展示了如何做到这一点。基本上，您需要添加`date`到您的`order by`条款中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:06:06.183

根据您的示例查询，您真的不需要订购。

```
 Update .... 'date' = (select max('date') from notes) 
```

# wso2 - Smooks 调解器的 WSO2 ESB 自定义属性

> ID：15514346
> 
> 赞同：2
> 
> 时间：2013-03-20T02:44:23.217
> 
> 标签：wso2, wso2esb, smooks

我需要使用一些配置设置来使用 Smooks 中介转换消息。例如，我想在转换期间将基本 URL 注入传出 xml 的属性值中。

在 Java 中，我会通过将 bean 添加到 ExecutionContext 来做到这一点。查看 SmooksMediator 代码，我没有看到这一点。我可以以某种方式做到这一点，还是应该扩展和重新编译 SmooksMediator 以提供 MessageContext 的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:55:36.260

对于作为 Smooks 中介的输入，我们只能从 ESB 提供一个流。因此，如果您想通过注入属性来转换消息，则无法使用 smooks 中介来实现。

为此 [1] 使用 XSLT 中介。配置 XSLT 中介时，您可以定义要传递给转换的属性。

前任：

```
 <xslt key="orderTransformer">
   <property expression="get-property('name')" name="name"/>
   <property expression="get-property('email')" name="email"/>
</xslt> 
```

然后在 XSLT 中，您可以定义如下两个属性，

```
<xsl:param name="email"/>
<xsl:param name="name"/> 
```

并将它们适当地用作模板中的 $email 和 $name 。

```
<ns1:email>
        <xsl:value-of select="$email"/>
    </ns1:email>
    <ns1:name>
        <xsl:value-of select="$name"/>
    </ns1:name> 
```

[1] [http://docs.wso2.org/wiki/display/ESB460/XSLT+Mediator](http://docs.wso2.org/wiki/display/ESB460/XSLT+Mediator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:06:57.817

Smooks mediator 的整个配置细节可以从 [1] 中找到。

否则，您可以使用自定义调解器来执行您的确切任务。可以从 [2] 中找到有关自定义中介的详细信息。

[1]。[http://wso2.org/library/tutorials/2011/06/perform-data-mapping-smooks-editor-wso2-carbon-studio](http://wso2.org/library/tutorials/2011/06/perform-data-mapping-smooks-editor-wso2-carbon-studio)

[2]。[http://maninda.blogspot.com/2012/11/writing-custom-mediator-for-wso2-esb.html](http://maninda.blogspot.com/2012/11/writing-custom-mediator-for-wso2-esb.html)

谢谢你，达沙那

# c - 如何在c linux中重置alarm()

> ID：15514350
> 
> 赞同：4
> 
> 时间：2013-03-20T02:44:42.043
> 
> 标签：c

一旦`alarm(5)`启动并运行了几秒钟或几秒钟，在程序中经过一段时间后，如果发生某些操作，我需要再次将警报重置为`alarm(5)`. 我怎样才能做到这一点？

有可用的报警器`reset()`吗？

```
int flag=0;
void alarmhand(int signal)
{ 
  flag=1;
  // printf("\n time out");
}

void main()
{
  signal(SIGALRM,alarmhand);
  alarm (5);
  while(1)
  {
   event_status();
   if(flag==1)
       break;
  } 
}

void event_status()
{
  int reset;
  printf("reset 1=y/2=n :");
  scanf("%d",&reset);
  if(reset==1)
  {
   // alarm.reset(5);
  // HOW DO I RESET THE ALARM AGAIN TO 5 HERE ??
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T02:47:24.433

您可以只设置新闹钟，旧闹钟将被取消：

```
alarm (5); 
```

来自[Linux`alarm`手册页](http://linux.die.net/man/2/alarm)，稍作解释）：

> `alarm()`安排`SIGALRM`在指定的秒数内将信号传递给调用进程。
> 
> 如果指定的秒数为零，则不会安排新的警报。
> 
> 在任何情况下，任何先前设置的警报都会被取消。

如前所述，任何*当前*警报都会通过调用来取消`alarm()`。`alarm()`如果 to 的参数为零，则不会创建新的。

因此`alarm(0)`将取消任何当前活动的警报，同时`alarm(5)`将创建一个新的警报或将当前活动的警报重置为 5 秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T02:47:42.477

要取消未完成的`alarm()`，请使用`alarm(0)`. 它的返回值告诉您从上次调用`alarm()`. 当然，您随后可以自由设置新的闹钟。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T04:10:50.757

仅在启动时使用`sigaction()`系统调用和处理报警信号。使用 ISR 功能在需要时为每个操作重置警报。

# python - 织物串问题

> ID：15514359
> 
> 赞同：0
> 
> 时间：2013-03-20T02:45:19.093
> 
> 标签：python, fabric

我是 Python 和 Fabric 的完整初学者。我有以下代码：

```
def initialise_clients( hostlist): 
 env.roledefs['clients']=hostlist
 print hostlist 
 print("Setting up deployment: running on %d nodes \n" % len(hostlist))
 create_jar()

def init_server(host): 
 env.roledefs['server'] = host
 print "Initialising Server " + host 
```

实例化为：

```
 def start_experiment(nb_clients , nb_machines , nb_operations  , trx_length , nb_reads ,  nb_writes ,     
  dataset , server_host  , server_port , hostclients): 
  print("Running Experiment")
  address = server_host + ':' + server_port
  execute(init_server,address)
  execute(initialise_clients,hostclients)
  execute(create_server, server_port ) 
```

创建服务器的方法是：

```
 @roles('server')
 def create_server( port): 
  print("Creating Server")
  print env.host
  print(port)
  code_dir = '/net/work/evaluation/'
  with lcd(code_dir): 
     run("java -jar server.jar " + port + " > log_server.txt ")
     print("Server Initialised - Waiting for NFS to propagate ") 
```

我遇到的问题是：当我执行 create_server 任务时：我有这个：[t] Executing task 'create_server' 我猜这是一个字符串问题，因为我是 python 新手

致命错误：名称查找失败 t

潜在异常：名称或服务未知

中止。

它对应于我传入的主机的第一个字符（作为字符串't...'）。为什么会这样？

我调用 start_experiment 并将 server_host 定义为“name.server.org”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T05:26:43.757

您的问题在`create_server()`. 看一下该函数中的这两行：

```
使用液晶显示器（code_dir）：
    运行（“java -jar server.jar”+端口+“>log_server.txt”）

```

该`run()`命令正在远程服务器（由 指定`env.host`）上执行，但该位在*本地*`with lcd(code_dir):`计算机上强制执行某个目录，而不是在远程服务器上。

 *您收到的错误表明您正在尝试使用未知名称或服务。在这种情况下，程序很可能无法找到 server.jar。原因是您没有指定远程机器上的当前目录（`run()`正在执行命令的位置）。因此，将 更改`lcd()`为 a`cd()`应该可以解决您的问题：

```
与 cd(code_dir):
    运行（“java -jar server.jar”+端口+“>log_server.txt”）

```*

# android - 我在哪里放置 GCM 的应用程序 ID？

> ID：15514362
> 
> 赞同：0
> 
> 时间：2013-03-20T02:45:22.647
> 
> 标签：android, push-notification, google-cloud-messaging

以下是如何从谷歌注册 GCM。我在第二行代码的什么地方放了我的 appid？来想一想，appid是我在Google App Engine上的项目名称吗？

*sender 是被授权向应用程序发送消息的帐户的 ID，通常是应用程序开发人员设置的帐户的电子邮件地址。app 是应用程序的 ID，设置了 PendingIntent 以允许注册服务提取应用程序信息。例如：*

```
Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0)); // boilerplate
registrationIntent.putExtra("sender", "someemail@oo.com");
startService(registrationIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T14:02:06.137

您报价中的代码部分错误。的值`sender`曾经是电子邮件地址（在现已弃用的 中`C2DM`），但`GCM`应`sender`包含 Google API 项目 ID。

> **sender**是授权向 Android 应用程序发送消息的帐户的项目号。
> 
> **app**是 Android 应用程序的 ID，设置了 PendingIntent 以允许注册服务提取 Android 应用程序信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T13:33:09.643

根据[http://developer.android.com/google/gcm/gcm.html](http://developer.android.com/google/gcm/gcm.html)

> app 是 Android 应用程序的 ID，设置了 PendingIntent 以允许注册服务提取 Android 应用程序信息。

GCM 从您传递的待处理意图中提取您的应用 ID。所以你的第二行是应该的。

但我建议您改用 gcm.jar 库。它使处理 GCM 变得更加容易： [在 Eclipse IDE (Google Cloud Messaging) 中添加 gcm.jar](https://stackoverflow.com/questions/12264761/add-gcm-jar-in-eclipse-ide-google-cloud-messaging)

# sql-server - 我在哪里可以下载 SQL Server 2008 SMO dll

> ID：15514363
> 
> 赞同：0
> 
> 时间：2013-03-20T02:45:34.337
> 
> 标签：sql-server, dll, smo

我有 SQL Server 2008 dll，并安装了 SQL Server 2008R2 Feature Pack。它没有将它们放入`Program Files/105/SDK`，而是将它们放入`Program Files/100/SDK`并覆盖了我的 2008 SMO dll。

有一些细微的差别，我需要获得 2008 dll，至少是暂时的，但我找不到从哪里获得它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:48:08.220

试试[这里](http://www.microsoft.com/en-us/download/details.aspx?id=6375)。这适用于 SQL 2008 SP2，所以希望应该有你所追求的

HTH，弥敦道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-17T16:32:36.767

2013 年提供的链接似乎不再有效。

我进行了搜索并在这里找到了它：

Microsoft SQL Server 2008 Service Pack 4 功能包：

[https://www.microsoft.com/en-us/download/details.aspx?id=44277](https://www.microsoft.com/en-us/download/details.aspx?id=44277)

# python - 在 jinja2 的列表中为每个字符串添加引号？

> ID：15514365
> 
> 赞同：8
> 
> 时间：2013-03-20T02:45:45.627
> 
> 标签：python, template-engine, jinja2

Python中的变量：

```
names = ["a", "b"] 
```

我目前在 Jinja2 模板中写的内容：

```
c({{ names | join(",") }}) 
```

我使用上面的模板得到了什么：

```
c(a, b) 
```

但是，我真正需要的是：

```
c("a", "b") 
```

我检查了 Jinja2 的文档，但没有找到执行此操作的过滤器。有人在 Jinja2 中对此有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T05:19:10.513

为 jinja2 使用自定义过滤器：

```
def surround_by_quote(a_list):
    return ['"%s"' % an_element for an_element in a_list]

env.filters["surround_by_quote"] = surround_by_quote 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T17:58:23.737

```
# some.py file
names = ['a', 'b', 'c']

# some.html file
{{ names|safe }}

# renders as the following, brackets included
['a', 'b', 'c'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-01T12:46:49.893

要在 ansible 中用作 filter_plugin 并通过 pylint：

```
''' From https://stackoverflow.com/a/68610557/571517 '''

class FilterModule():
    ''' FilterModule class must have a method named filters '''
    @staticmethod
    def surround_by_quotes(a_list):
        ''' implements surround_by_quotes for each list element '''
        return ['"%s"' % an_element for an_element in a_list]

    def filters(self):
        ''' returns a dictionary that maps filter names to
        callables implementing the filter '''
        return {'surround_by_quotes': self.surround_by_quotes} 
```

# mysql - 可以在 MySQL 中选择最后 100 条记录，然后在一次查询中从这些结果中选择随机 10 条吗？

> ID：15514366
> 
> 赞同：0
> 
> 时间：2013-03-20T02:46:06.423
> 
> 标签：mysql

我需要在一个视频页面上显示 10 个与该视频属于同一类别的相关视频。问题是每个类别可能有数十万行，因此运行 RAND() 是不可能的，我不希望创建与我的 innodb 表匹配的 myisam 表，然后全文搜索相关。

我不确定我的想法是否可行，但我想为按日期排序的该类别选择 100 个最新行，然后从该集合中随机选择 10 个。

这可能吗？请您指出正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:51:17.543

我假设您有一个名为 的简单表`ID`，您可以执行以下操作：

```
SELECT *
FROM (
  SELECT ID, Name, VideoFile
  FROM VideoTable
  ORDER BY ID DESC
  LIMIT 100
) Derived
ORDER BY RAND()
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:51:28.047

select * from (select * from table ORDER BY DESC LIMIT 100) ORDER BY rand() LIMIT 10

# entity-framework - 代码优先是继续使用我的上下文的完全限定名称创建数据库

> ID：15514370
> 
> 赞同：0
> 
> 时间：2013-03-20T02:46:34.627
> 
> 标签：entity-framework, ef-code-first

这是我的上下文类

```
public class HospitalContext : DbContext 
{
    public DbSet<Patient> Patients { get; set; }
    public DbSet<Doctor> Doctors { get; set; }
    public DbSet<Appointment> Appointments { get; set; }
    public DbSet<Schedule> Schedule { get; set; }
} 
```

还有我的连接字符串

```
<add name="DbContext" 
     providerName="System.Data.SqlClient" 
     connectionString="Data Source=(LocalDb)\v11.0;
     Initial Catalog=HospitalProject;
     Integrated Security=True;" /> 
```

我想知道为什么当我运行应用程序时，数据库名称是

```
HospitalProject.Models.HospitalContext 
```

而不是**HospitalProject**。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:34:33.543

尝试将连接字符串重命名`HospitalContext` 为`DbContext`

# c# - 获取多线程以在网页和业务层之间进行同步

> ID：15514373
> 
> 赞同：0
> 
> 时间：2013-03-20T02:46:47.503
> 
> 标签：c#, asp.net, backgroundworker, thread-synchronization, iasyncoperation

我在让这段代码工作时遇到问题（对不起，长度）。代码经过消毒，仅显示诊断问题的相关部分。

从控制台应用程序运行时它工作正常。但是，当从 ASP.NET 应用程序调用 Utlities.SendBulkEmail 时，BulkEmailCompleted**例程永远不会触发**，并且正是这个例程增加了 m_CompletedWorkers 计数器。

如何重构 SendBulkEmail 例程以使用 AsyncOperationManager 而不是 BackgroundWorker，因此我可以保证返回结果的线程。

SendBulkEmail 例程本身不是多线程的。多线程发生在其 foreach 循环内。

我认为原始代码的基础是从这个网站获得的：http: [//www.dotnetfunda.com/articles/article613-background-processes-in-asp-net-web-applications.aspx](http://www.dotnetfunda.com/articles/article613-background-processes-in-asp-net-web-applications.aspx)

Utilities 项目在各种解决方案之间共享，并且几乎是独立的。

我希望我能说清楚。

任何帮助将不胜感激。

代码如下：

# 在网站项目中 (Control.ascx.cs)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using System.Configuration;
using <company>.BusinessObjects.Emails;
using <company>.DataAccessors;
using <company>.DataObjects;
using <company>.Enumerations;
using <company>.Interfaces;
using <company>.Utilities;
    ...
        protected void sendButton_OnClick(object sender, EventArgs e)
        {
            ...
                if (HasBenefits)
                {
                    ReportingEmails emailer = new ReportingEmails();
                    ...
                    //Prevent send if nothing selected
                    if (... > 0)
                    {
                        List<EmailOutcome> results = emailer.GenerateNotificationEmailsForEmployer(<some int>, <some list>);
                        ...
                    }
                }
            ...
        } 
```

# 在业务对象项目中

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Linq;
using System.Net.Mail;
using System.Resources;
using System.Text;
using System.IO;
using <company>.BusinessObjects.Emails.Helpers;
using <company>.DataAccessors;
using <company>.DataObjects;
using <company>.Enumerations;
using <company>.Utilities;

namespace <company>.BusinessObjects.Emails
{  
    public class ReportingEmails
    {   
        ...
        public List<EmailOutcome> GenerateNotificationEmailsForEmployer(int employerID, List<int> benefits = null)
        {
            ...
            SendNotificationEmails(List<ReportData>, ref emailSuccessByBenefit, true, benefitsToExclude);
            return emailSuccessByBenefit;
        }

        private void SendNotificationEmails(List<ReporterCommsData> reportData, ref List<EmailOutcome> emailSuccessByBenefit, bool isFleet, List<int> benefitsToExclude)
        {
            Dictionary<int, MailMessage> bulkEmails = new Dictionary<int, MailMessage>();

            //build up the set of emails to send
            foreach (ReporterCommsData report in reportData)
            {                
                ...
                if (String.IsNullOrEmpty(report.Email))
                {
                    ...
                }
                else
                {
                    try
                    {
                        MailMessage email = null;
                        ...
                            email = ConstructEmail(<param>, out <param>, <param>);
                        ...
                        bulkEmails.Add(report.BenefitID, email); //add each email to the bulk email dictionary
                        ...
                    }
                    catch (Exception ex)
                    {   
                        ...
                    }
                }
            } //end foreach

            //do the bulk email send and get the outcomes
            try
            {
                ...
                emailSuccessByBenefit.AddRange(Utilities.Mail.SendBulkEmail(bulkEmails, credentials));
            }
            catch (Exception ex)
            {
                ...
            }
        }
        ...
    }
    ...
} 
```

# 在公用事业项目中

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Net.Mail;
using System.Threading;

namespace <company>.Utilities
{
    ...
    public class Mail
    {
        private static List<EmailOutcome> m_MultithreadedEmailSendResults = new List<EmailOutcome>();
        private static int m_CompletedWorkers = 0;
        ...
        /// <summary>
        /// Sends a large number of emails asynchronously and then reports success of the individual items collectively
        /// </summary>
        /// <param name="emails">A dictionary of completed MailMessage objects to send out, keyed on an ID</param>
        /// <param name="credentials">Network credentials which may be required to send the email</param>
        /// <returns>List of EmailOutcome objects signifying the success or failure of sending each individual email</returns>
        public static List<EmailOutcome> SendBulkEmail(Dictionary<int, MailMessage> emails, System.Net.NetworkCredential credentials = null)
        {
            const int NUMBER_OF_THREADS_PER_PROCESSOR = 1;
            m_CompletedWorkers = 0;

            List<EmailOutcome> results = new List<EmailOutcome>();
            List<Dictionary<int, MailMessage>> splitEmailList = new List<Dictionary<int, MailMessage>>();
            ...
            List<BackgroundWorker> workerThreads = new List<BackgroundWorker>();

            foreach (Dictionary<int, MailMessage> splitEmails in splitEmailList)
            {
                // Initialise the parameter array
                Object[] parameterArray = new Object[2];
                parameterArray[0] = splitEmails;
                parameterArray[1] = credentials;

                // Runs on function startup
                BackgroundWorker worker = new BackgroundWorker();
                worker.DoWork += new DoWorkEventHandler(BulkEmailWorker);
                worker.WorkerReportsProgress = false;
                worker.WorkerSupportsCancellation = true;
                worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(BulkEmailCompleted);

                //Add worker to collection
                workerThreads.Add(worker);

                //Calling the BulkEmailWorker asynchronously
                worker.RunWorkerAsync(parameterArray);
            }

            //Hold until all background workers complete
            while (workerThreads.Count > m_CompletedWorkers)
            {
                Thread.Sleep(500); //Wait a half second
            }

            //Dispose of BackgroundWorkers
            foreach (BackgroundWorker worker in workerThreads)
            {
                worker.Dispose();
            }

            //Get results
            results.AddRange(m_MultithreadedEmailSendResults);

            //Clear the static variable
            m_MultithreadedEmailSendResults.Clear();
            m_MultithreadedEmailSendResults = new List<EmailOutcome>();

            return results;
        }
        ...

        /// <summary>
        /// Event handler for the RunWorkerCompleted event. Adds the EmailOutcome results to the static 
        /// </summary>
        private static void BulkEmailCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;
            //Add the EmailOutcome objects to the static list of results if completed
            if (worker != null)
            {
                Thread.Sleep(200);
                worker.RunWorkerAsync();
            }
            else
            {
                m_MultithreadedEmailSendResults.AddRange(e.Result as List<EmailOutcome>);
                m_CompletedWorkers++;
            }
        }
        ...
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:58:37.967

asp.net 的工作方式是它为每个请求创建一个 Page 对象。控件也是如此。您发送的电子邮件通知只能到达此对象。

您创建的线程将需要时间来执行，并且您的响应不会等待电子邮件发送完成。这意味着您不能使用相同的请求发送状态。

但是，如果您从页面发出另一个请求（ajax 或其他请求）以获取更新状态，则会创建一个新页面和相应的控件对象。您必须从静态对象中获取状态并使用它向用户显示状态。

您可能会发现[UpdatePanel](http://msdn.microsoft.com/en-us/library/bb386454%28v=vs.100%29.aspx)控件可以方便地实现 ajax。

# assembly - linux ld -Ttext 无法生成具有正确组织的可执行文件

> ID：15514375
> 
> 赞同：0
> 
> 时间：2013-03-20T02:46:58.513
> 
> 标签：assembly, kernel, nasm, ld

我正在研究 32 位保护模式内核。我正在尝试生成文本区域从 0x100000 开始的代码。我发出以下命令：=

ld -melf_i386 $(OBJS)-o 内核 -Ttext 0x100000

我希望当我检查生成的 32 位 ELF 文件时，e_entry 位于 0x100000。然而，事实并非如此，这是我的问题，因为我不知道为什么。内核有一部分是用 nasm 编写的，并且正在以 32 位 ELF 为目标的 64 位 linux 上编译。上述 ld 命令生成的实际 e_entry 值为 0x116D5A。我想知道这是否与我需要的某些编译器选项有关，例如 -fpic 或与 nasm 生成的代码不兼容，或者 ld 中可能存在错误？有人可以帮忙吗。谢谢

应该注意的是，给上面的 ld 提供 -r 选项，如下所示：= ld -r -melf_i386 $(OBJS)-o kernel -Ttext 0x100000

生成 e_entry 为 0x100000 的输出，但是该文件不是可执行文件。我需要它是一个可执行文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:33:52.417

你有链接描述文件吗？最好自己编写以覆盖默认链接器脚本，因为您希望对输出进行精细控制。

像这样的东西，

```
ENTRY(entry)

SECTIONS
{
    .  = 0x100000;

    .text : {
        *(.text)
    }
    ... 
```

以上可以在 MMU 未启用时使用。

如果您启用了 MMU，以下内容会将您的内核链接到 0xC0000000 (3GB)，同时仍将其加载到 0x100000。

```
.  = 0xC0100000;

.text : AT(0x100000) {
    *(.text)
} 
```

# c++ - 如何打印二叉堆的左子树？

> ID：15514377
> 
> 赞同：0
> 
> 时间：2013-03-20T02:47:02.017
> 
> 标签：c++, pointers, binary, heap, binary-tree

我在二进制堆中打印根的左子树时遇到问题。我想递归地做，但我认为我做的不正确。有人可以指出我正确的方向吗？

```
template <class Comparable>
    void BinaryHeap<Comparable> :: printLtSubtree(int i)
    {

            // INSERT CODE for printLtSubtree HERE
            if (i > currentSize)
                    System.exit();
            if (i <= currentSize)
                    cout << array[i];
                    printLtSubtree(i->left);
                    printLtSubtree(i->right);

    } 
```

如果索引小于 currentSize，我只想打印出元素。

这可能会有所帮助：

```
template <class Comparable>
    class BinaryHeap
    {
      public:
        explicit BinaryHeap( int capacity = 100 );

        bool isEmpty( ) const;
        bool isFull( ) const;
        const Comparable & findMin( );

        // const Comparable & findMax( );

    // int Height () const; 
    void printLtSubtree();
        void insert( const Comparable & x );
        void deleteMin( );
        void deleteMin( Comparable & minItem );
        void makeEmpty( );

      private:
        int                currentSize;  // Number of elements in heap
        vector<Comparable> array;        // The heap array

        void buildHeap( );
        void percolateDown( int hole );
        void printLtSubtree (int i);
    };

    #include "BinaryHeap.cpp" 
```

主功能：

```
void FillHeap (BinaryHeap<char>& B);

int main()
{
BinaryHeap<char> PQ(50);

FillHeap (PQ);

PQ.deleteMin();

PQ.printLtSubtree();

return 0;
}

void FillHeap (BinaryHeap<char>& B)
{
B.insert('A');
    B.insert('B');
    B.insert('C');
    B.insert('D');
    B.insert('E');
    B.insert('F');
    B.insert('G');
    B.insert('H');
    B.insert('I');
    B.insert('J');
} 
```

# ruby - Ruby 的 attr_accessor 会自动为属性创建实例变量吗？

> ID：15514378
> 
> 赞同：16
> 
> 时间：2013-03-20T02:47:01.857
> 
> 标签：ruby

例如，如果我们写

```
class MyClass
  attr_accessor :something
end 
```

但是没有显式创建带有实例变量的初始化方法`@something`，Ruby会自动创建它吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-20T02:57:33.033

不。实例变量在您分配给它们之前不会被定义，并且`attr_accessor`不会自动这样做。

尝试访问未定义的实例变量会返回`nil`，但*没有定义该变量*。*在您写信*给它们之前，它们实际上并没有被定义。`attr_accessor`依赖于这种行为，除了定义一个 getter/setter 之外什么都不做。

您可以通过签出来验证这一点`.instance_variables`：

```
class Test
  attr_accessor :something
end 
```

的新实例`x`没有实例变量：

```
x = Test.new # => #<Test:0xb775314c>
x.instance_variables # => [] 
```

调用 getter 不会导致`@something`定义：

```
x.something # => nil
x.instance_variables # => [] 
```

调用 setter*确实*会导致`@something`定义：

```
x.something = 3 # => 3
x.instance_variables # => ["@something"] 
```

设置`something`回`nil`不会导致`instance_variables`恢复，因此我们可以确定返回的第一个空数组不仅仅是`instance_variables`省略`nil`值的情况：

```
x.something = nil # => nil
x.instance_variables # => ["@something"] 
```

您还可以验证这不仅仅是特定于以下的行为`attr_accessor`：

```
class Test
  def my_method

    @x # nil

    instance_variables # []

    @x = 3 

    instance_variables # ["@x"]
  end 
end

Test.new.my_method 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T02:54:53.893

有点。在 Ruby 中，实例变量是在首次分配时创建的。这对程序员来说是完全透明的。在分配之前，它们默认为 nil。

前任：

```
class Foo
  attr_accessor :bar
  def baz
    @nonexistant
  end
end
f.bar #=> nil
f.baz #=> nil
f.bar = 4
f.bar #=> 4 
```

在您为实例变量赋值之前，它会处于未定义的 nil 状态。

# sql-server - T-SQL 从另一个临时表插入临时表

> ID：15514382
> 
> 赞同：0
> 
> 时间：2013-03-20T02:47:41.333
> 
> 标签：sql-server, tsql

我试图在程序结束时像这样实现我需要一个临时表中的所有行我怎样才能做到这一点

```
if @i > 1
begin
select * from into #tempTbl1 from payments
where method = 'test1'
end 
else
begin
select * from into #tempTbl2 from payments
where method = 'test1'
end

insert into #tempTbl1 select * from #tempTbl2

select * from #tempTbl1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:32:58.990

尽管存在先前的逻辑问​​题，要简单地从两个临时表中获取所有行，请使用 UNION：

```
select * from #tempTbl1  
UNION ALL  
SELECT * from #tempTbl2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:03:00.350

您在这里遇到的问题是，根据您的 IF/ELSE，您将永远不会同时拥有这两个表。您的最终 INSERT INTO 要求两个表都存在。在尝试填充之前，您可能需要先在存储过程中创建对象，然后再插入表中。

这也引出了一个问题，如果您以后要在 #tempTbl1 中插入所有内容，它是在 SELECT INTO 语句中创建的，为什么首先要有 #tempTbl2 ？

```
create procedure dbo.testing
(@i int)
AS
if @i > 1
    begin
        print 'In condition 1'
        select * 
        into #tempTbl1 
        from payments
        where method = 'test1'
    end 
else
    begin
        print 'In condition 2'
        select * 
        into #tempTbl2 
        from payments
        where method = 'test1'
    end

print 'Made it out of the if else'

insert into #tempTbl1 
select * 
from #tempTbl2

--  Never gets this far...
print 'In the final select'

select * 
from #tempTbl1 
```

如果您致力于此方法，那么您可能需要检查表是否存在：

```
IF  EXISTS (SELECT * FROM tempdb.sys.objects WHERE object_id = OBJECT_ID(N'tempdb.dbo.#tempTbl1') AND type in (N'U'))
print 'Table is there' 
```

## 根据评论更新

根据您的评论，这将起作用。您最初发布的 SELECT...INTO 语句允许您根据您选择的列的数据类型创建一个表，但目标表不能已经存在。如果您事先定义了要插入的结构，您可以对这两个条件进行评估并最终得到一个表作为结果。

（注意 - 我的“payments”表只有两列，“method”和“col2”。您需要在 CREATE TABLE 和 SELECT 中指定所需的列）

```
create procedure dbo.testing
(@i int)
AS
create table #tempTbl1
(method varchar(10)
, col2 int)

if @i > 1
    begin
        insert into dbo.#tempTbl1
        select method, col2 
        from payments
        where method = 'test1'
    end 
else
    begin
        insert into dbo.#tempTbl1
        select method, col2 
        from payments
        where method = 'test1'
    end

select * 
from #tempTbl1 
```

# gtk3 - gtk3 一直闪退

> ID：15514386
> 
> 赞同：0
> 
> 时间：2013-03-20T02:48:05.127
> 
> 标签：gtk3

尝试基于 gtk-3 的应用程序

```
(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets.css:289:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets.css:323:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets.css:1828:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets.css:1845:21: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets.css:1861:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets.css:2146:20: Not using units is deprecated。假设'px'。

（大胆：10165）：Gtk-WARNING **：主题解析错误：gtk-widgets-backdrop.css:16:20：不推荐使用单位。假设'px'。

（大胆：10165）：Gtk-WARNING **：主题解析错误：gtk-widgets-backdrop.css：93:20：不推荐使用单位。假设'px'。

（大胆：10165）：Gtk-WARNING **：主题解析错误：gtk-widgets-backdrop.css:183:20：不推荐使用单位。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets-backdrop.css:503:20: Not using units is deprecated。假设'px'。

（大胆：10165）：Gtk-WARNING **：主题解析错误：gtk-widgets-backdrop.css:850:20：不推荐使用单位。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets-backdrop.css:925:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets-backdrop.css:941:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets-backdrop.css:957:20: Not using units is deprecated。假设'px'。

（大胆：10165）：Gtk-WARNING **：主题解析错误：gtk-widgets-backdrop.css:1012:21：不推荐使用单位。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets-backdrop.css:1020:21: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets-backdrop.css:1034:21: Not using units is deprecated。假设'px'。

（大胆：10165）：Gtk-WARNING **：主题解析错误：gtk-widgets-backdrop.css:1103:21：不推荐使用单位。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gtk-widgets-backdrop.css:1237:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: gnome-panel.css:94:21: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: nautilus.css:18:18: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: nautilus.css:18:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: nautilus.css:81:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: nautilus.css:86:20: Not using units is deprecated。假设'px'。

(audacious:10165): Gtk-WARNING **: Theme parsing error: nautilus.css:145:20: Not using units is deprecated。假设'px'。

（大胆：10165）：Gtk-WARNING **：样式属性“border-top-left-radius”不可获取

（大胆：10165）：GLib-GObject-WARNING **：/build/buildd-glib2.0_2.35.8-1-amd64-lGLf9n/glib2.0-2.35.8/./gobject/gtype.c:4234：类型ID“0”无效

（大胆：10165）：GLib-GObject-WARNING **：无法查看当前未引用的类型“”的值表
分段故障

```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:11:07.197

真正重要的部分是：

```
(audacious:10165): GLib-GObject-WARNING **: /build/buildd-glib2.0_2.35.8-1-amd64-lGLf9n
/glib2.0-2.35.8/./gobject/gtype.c:4234: type id `0' is invalid

(audacious:10165): GLib-GObject-WARNING **: can't peek value table for type `' which is
not currently referenced Segmentation fault 
```

这意味着代码正在尝试访问未知类型的实例。这很可能是 audacious 中的一个 bug，所以你应该询问 audacious 的开发人员；如果您收集显示该特定警告的调用者列表的堆栈跟踪，则会更容易。您可以使用 gdb 和 G_DEBUG 环境变量来检索堆栈跟踪 - 只需按照 GNOME wiki 上的说明进行操作：[https ://live.gnome.org/GettingTraces](https://live.gnome.org/GettingTraces)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T09:44:51.617

可能是您的 gtk-3 主题与您的 gtk-3 库不兼容。尝试从 .config/gtk-3.0/settings.ini 中删除主题并重新启动应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T20:12:03.657

我没有遇到任何崩溃，但这是我能找到的唯一问题，这条错误消息一直在困扰我：

`Gtk-WARNING **: Theme parsing error: nautilus.css:86:20: Not using units is deprecated. Assuming 'px'.`

我目前正在用 C 和 Python 编程，每次运行我都会得到其中的几个。一段时间以来，我一直在寻找解决方案，但由于终端输出阻塞而感到沮丧，我终于在今天深入研究了它。解决方案非常简单！

我使用“黄昏主题”在 Arch Linux 上运行 xfce4。我在第 72 行遇到了 gtk.css 文件的此错误。通过 grepping“find”的输出，我在“/usr/share/themes/Xfce-dusk/gtk-3.0/gtk.css”中找到了该文件。我通过将该行向下移动 2 行来确认，然后再次运行我的程序。然后错误消息引用了第 74 行！

在第 72 行，我将其更改为“text-shadow: 1 1 white;” 到“文本阴影：1px 1px 白色；”。

瞧！不再有烦人的错误信息！

# sql-server - 更新/编辑数据库

> ID：15514391
> 
> 赞同：0
> 
> 时间：2013-03-20T02:48:20.557
> 
> 标签：sql-server, vb.net, visual-studio-2010, vb.net-2010

我知道这很简单，但我无法正确完成或在谷歌搜索中找到任何答案。

我想更新/编辑数据。在数据库服务器中，通过单击显示在我的`DataGridView`.

下面是我的子编辑，代码不会自动将记录提取到文本框。

```
Private Sub btnEdit_Click(ByVal sender As System.Object, 
  ByVal e As System.EventArgs) Handles btnEdit.Click

  Dim transaction As SqlTransaction = Nothing

  With New SqlConnection(connectionString)
    Try
      Call .Open()
      transaction = .BeginTransaction()
      With .CreateCommand()
        .Transaction = transaction
        .CommandText = "UPDATE [tbl_info] SET [Name]=@Name WHERE [ID]=@ID;"
        With .Parameters
          .AddWithValue("ID", txtID.Text)
          .AddWithValue("Name", txtName.Text)
        End With
        Call .ExecuteNonQuery()
        Call transaction.Commit()
        Call MessageBox.Show("has been update successfully")
      End With
    Catch ex As Exception
      Call transaction.Rollback()
      Call MessageBox.Show(ex.Message, "Error")
    Finally
      Call .Close()
    End Try
  End With
  RefreshData()

  Call txtID.Clear()
  Call txtName.Clear()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:58:40.367

在 ExecuteNonQuery 行上，捕获受影响的行数。

```
Dim rc As Integer = .ExecuteNonQuery() 
```

如果 rc 返回为零，我们可以告诉查询运行并且没有发现要更新的内容。

# c - 从标准输入或多个文件参数中读取

> ID：15514393
> 
> 赞同：0
> 
> 时间：2013-03-20T02:48:41.207
> 
> 标签：c, linux

我的主要工作是使用系统调用从标准输入读取。或者，如果给出了文件参数，则打开文件参数。我已经对此进行了编码以从一个文件参数中读取。但是现在我需要它从多个文件参数中打开，而且我对如何执行此操作的逻辑缺乏了解。如何让我的代码能够打开多个文件参数？

```
int main(int argc, char *argv[]) {
    char *file_pathname = NULL;
    int fd;
    char file_buffer[540];

    //Check for proper number of arguments:
    if(argc < 2) {
        exit(2);
    }

    if(argc < 3) {
        file_pathname = "stdin";
    }

    file_pathname = argv[2];   

    if(argc < 3) {
        ((fd = read(STDIN_FILENO,file_buffer, FILE_BUFFER_SIZE)));
    }
    // FILE argument given, so try to open it:
    if (argc == 3) {
        if ((fd = open(file_pathname,O_RDONLY)) == -1) {
            perror("ERROR OPENING FILE");
            return 2;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:11:31.547

如果您希望您的程序仅在 linux（POSIX 兼容）系统上运行，您可能会感兴趣

```
man 3 getopt 
```

这是一个可以帮助您以简短的 unix 样式解析命令行参数的函数，例如：

```
myprog -a 5654 -f -n ~/Test/input.txt 
```

如果要解析长选项，还有 getopt_long() 和 getopt_long_only() 。

如果你想要一些特定的参数解析器（我不推荐），你可以将它实现为库。

如果您使用 glib 或 gtk，则有 glib 解析器。如果你有一个 qt 项目，或者 qxt 中的解析器（一个扩展 Qt 库）。或者，如果需要，您可以只搜索更轻量级的跨平台参数解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T21:48:16.887

从获取文件描述符并执行您想要的操作的函数开始：

```
void do_stuff(int fd); 
```

添加另一个，对文件名执行相同的操作：

```
void do_stuff_fname(const char *fname);  /* Open fname and call do_stuff */ 
```

现在，您`main`应该致电：

```
if (argc < 2) {
    do_stuff(STDIN_FILENO);
} else {
    int i;
    for (i=1; i<argc; i++) do_stuff_fname(argv[i]);
} 
```

`getopt`正如[JustAnotherCurious 所建议](https://stackoverflow.com/a/15514609/1111371)的那样，您可以通过使用来改进这一点

# bash - 在没有循环的情况下多次 Cat 文件

> ID：15514395
> 
> 赞同：9
> 
> 时间：2013-03-20T02:48:46.190
> 
> 标签：bash, shell, unix

这不是一个家庭作业问题，这是一个旧考试的问题，所以任何给出答案的人都不会导致学术不诚实。对于那些仍然持怀疑态度的人，我只是在寻找我可以为此使用什么命令。

您有一个名为 one_mb 的文件，其大小正好为 1 兆字节。您想从中创建一个大小正好为 128 兆字节的文件。请编写一个最多 9 行且没有循环、if 语句、递归或任何其他逻辑控制结构的 shell 脚本来执行此操作。每个命令（包括参数）的长度必须少于 100 个字符。

我开始研究 xarg，但想不出一个好的方法来使用它来完成这个。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T03:01:53.040

假设 bash，您可以使用单行大括号扩展技巧：

```
cat one_mb{,}{,}{,}{,}{,}{,}{,} > 128_mb 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-20T03:02:35.783

不确定这是否重要，但我想到了：

```
seq 1 128 | xargs -Inone cat one_mb >> 128_mb 
```

没有使用循环，只是一个管道和`xargs`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T02:54:50.400

这里的大提示是它可以“不超过 9 行”。由于 2^7 = 128，您只需将文件大小翻倍 7 倍：

```
cat one_mb one_mb > two_mb
cat two_mb two_mb > four_mb
...
cat 64_mb 64_mb > 128_mb 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-20T03:01:25.730

在每个命令 100 个字符的情况下，您可以减少很多：

```
cat one_mb one_mb one_mb one_mb one_mb one_mb one_mb one_mb >mb8
cat mb8 mb8 mb8 mb8 >mb32
cat mb32 mb32 mb32 mb32 >mb128
rm -f mb8 mb32 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T03:06:33.480

```
dd oflag=append conv=notrunc if=/dev/zero of=one_mb bs=1MB count=127 
```

这将保留文件内容并添加一堆“零”记录，使其达到 128 MB。做

```
ls -ltrh one_mb 
```

检查它是否实际上是 128MB，否则您可能需要更改“count=127”参数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-20T03:14:43.027

我认为你有限制就足够了。您可以定义一个将整数作为参数的函数。如果大于 0，`cat`s 文件并再次调用相同的函数，但参数减小。

然后，您只需使用所需的值调用该函数，就完成了。

很好的递归:)

（对不起，编码太懒了，还有很多其他的工作答案，只是想避免递归被遗忘:)）

# unix - xargs 将一个文件复制到多个

> ID：15514396
> 
> 赞同：1
> 
> 时间：2013-03-20T02:48:53.787
> 
> 标签：unix, aix, xargs

我有一个目录，其中包含一个包含信息的文件（称为 masterfile.inc）和几个空文件（称为 file1.inc-file20.inc）

我正在尝试制定一个 xargs 命令，将 masterfile.inc 的内容复制到所有空文件中。

到目前为止我有

> ls -ltr | awk '{打印 $9}' | grep -v 主文件 | xargs -I {} cat masterfile.inc > {}

不幸的是，这一切只是创建了一个名为 {} 的文件并将 masterfile.inc 打印到其中 N 次。

这里的语法有什么我遗漏的吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:54:17.313

您可以使用此命令复制文件 20 次：

```
$ tee <masterfile.inc >/dev/null file{1..20}.inc 
```

**注意：** `file{1..20}.inc`将扩展为`file1, file2, ... , file20`

* * *

如果您的文件名是随机的：

```
$ shopt -s extglob
$ tee <masterfile.inc >/dev/null $(ls !(masterfile.inc)) 
```

**注意：** `$(ls !(masterfile.inc))`将扩展到当前目录中的所有文件，除了`masterfile.inc`（请不要在文件名中使用空格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:30:08.180

虽然这个`tee`技巧真的很棒，但您可能会对更容易适应其他情况的解决方案感兴趣。这里使用 GNU Parallel：

```
ls -ltr | awk '{print $9}' | grep -v masterfile | parallel "cat masterfile.inc > {}" 
```

安装 GNU Parallel 实际上需要 10 秒：

```
wget pi.dk/3 -qO - | sh -x 
```

观看介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# css - 当包含的 div 增长时，包含的 DIV 不会扩展

> ID：15514398
> 
> 赞同：0
> 
> 时间：2013-03-20T02:49:00.100
> 
> 标签：css, html

当我使用“溢出：自动；” 它正在创建一个水平滚动条！

看看[http://slico.ca/design.php](http://slico.ca/design.php)

请帮助，这正在杀死我。我正在尝试制作一个随着内容/子类别 div 被填充或清空而降低或升高的页脚。

我的问题是我做错了什么？如果我没有使用正确的东西，请指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:26:39.193

利用 box-sizing CSS 属性，你不需要所有这些样式。我没有更正您的 CSS，但这是一个固定版本

```
box-sizing:border-box; 
```

这将有助于将边框视为宽度的一部分

[http://jsfiddle.net/uBE5Y/](http://jsfiddle.net/uBE5Y/)

# java - 带有空第二个括号的 Java 数组

> ID：15514399
> 
> 赞同：3
> 
> 时间：2013-03-20T02:49:04.987
> 
> 标签：java

在Java中你可以做到这一点

```
int[][] i = new int[10][]; 
```

这只是创建 10 个空的 int 数组吗？它还有其他含义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T02:59:54.093

它创建一个包含 10 个条目的数组`int[]`。这 10 个数组引用中的每一个最初都是`null`. 然后您需要创建它们（并且因为 Java 没有真正的多维数组，所以这 10`int[]`个条目中的每一个都可以是任意长度）。

例如：

```
int i[][] = new int [10][];
i[0] = new int[42];
i[1] = new int[17];
// ...and so on 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T03:00:27.103

执行您的代码会创建一个大小为 10 的数组，其中的每个元素都*可以*包含对 a 的引用`int[]`，但它们都被初始化为 null。

为了*使用*int[]s，您必须为每个元素创建新的 int[]，如下所示：

```
for (int n = 0; n < 10; n++)
    i[n] = new int[10]; // make them as large as you need 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T03:01:45.853

是的，它确实; 但是，这些数组中的每一个都是空的。然后，您必须初始化每个子数组，方法是说 int[10][0] = new int[MY_SIZE] 或类似的东西。您可以在主数组中拥有不同长度的数组；例如，此代码将起作用：

```
int[][] i = new int[10][];
for(int ind = 0; ind<10;ind++){
    i[ind]=new int[ind];
} 
```

它只是一个数组数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T03:02:42.423

在这里，您创建了十个`new int[0]`数组。您必须手动初始化它，当您不需要方阵时它很有用：

```
 int[][] array = new int[10][];
    for (int i = 0; i < array.length; i++) {
        array[i] = new int[i];
    } 
```

如果你需要方阵，你可以这样做：

```
 int[][] array = new int[10][10]; 
```

它将使用默认值进行初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T02:51:21.797

那只是声明，您需要对其进行初始化。这 10 个数组最初为空。

# php - 如何将 php 代码放入打开和关闭短代码中

> ID：15514401
> 
> 赞同：1
> 
> 时间：2013-03-20T02:49:21.557
> 
> 标签：php, wordpress, variables, echo, shortcode

我在一个网站上工作，我在我的模板文件中使用了一个有打开和关闭的短代码。我想知道是否可以在短代码之间放置 wordpress the_content php 标签，以及是否可以在开始标签和结束标签之间放置另一个短代码。

我试过这个 -

```
<?php echo do_shortcode('[membership level="1"]''.$the_content.''[/membership]'); ?> 
```

但它不起作用，我也尝试了其他一些东西。我错过了什么或做错了什么？任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:52:00.293

看起来你有额外的单引号？

尝试：

```
echo do_shortcode('[membership level="1"]'.$the_content.'[/membership]'); 
```

# android - 让 MyLocation 看起来像 Google Map 的箭头，而不是 Google Maps API V2 中的蓝点？

> ID：15514405
> 
> 赞同：4
> 
> 时间：2013-03-20T02:49:33.080
> 
> 标签：android, google-maps-api-2

我想要一个简单的应用程序来显示当前用户位置，但是 GoogleMap.setMyLocationEnabled(true); 只显示一个蓝点。那么如何将那个蓝点替换为像谷歌地图应用程序这样的箭头呢？当用户旋转设备时，箭头会旋转。提前致谢！

# .net - LINQ 是否在幕后迭代？

> ID：15514413
> 
> 赞同：2
> 
> 时间：2013-03-20T02:50:18.090
> 
> 标签：.net, linq

这不是世界上最重要的问题，但作为一名即将毕业的学生，​​我想我希望能够继续掌握这些知识。说了这么多，LINQ如何根据我在后台提供的条件找到我需要的数据呢？

考虑：

```
String[] straAr = {"Jordan","Jansyn","Corey","Josh","Whitney"};

var sel = from S in straAr
    where S.Contains("syn")
    select S; 
```

当然，这将导致“Jansyn”。在我被介绍给 LINQ 之前，我会这样做：

```
String[] straAr = {"Jordan","Jansyn","Corey","Josh","Whitney"};

foreach(String s in straAr)
{
    if(s.Contains("syn"))
    {
        Console.WriteLine(s);
    }
} 
```

它们都可以工作，尽管我认为 LINQ 的实现要优雅得多。谁能告诉我：

*   **LINQ 如何在后台查询数据结构？前锋？**

*   **一种实现比另一种更有效吗？**

一如既往，感谢您的任何意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:19:45.613

我认为了解 LINQ 内部结构的最佳方法是实际查看代码。好吧，您将无法查看原始代码，但[Edulinq](http://msmvps.com/blogs/jon_skeet/archive/tags/Edulinq/default.aspx)确实是出于教育目的对其全部功能进行了很好的重新实现。

要直接回答您的至少部分问题：

*   没有 LINQ 通常不会在内部使用 foreach。大多数时候，直接使用[枚举](http://msdn.microsoft.com/de-de/library/system.collections.ienumerator%28v=vs.80%29.aspx)器，因为这样可以更好地控制正在发生的事情
*   一般来说，第二种实现会更有效，因为 LINQ 提供了一些额外的特性（例如惰性），这会使生成的代码稍微复杂一些。然而，这在实践中几乎没有意义。

# android - 清单正确时未找到处理 Intent 的 Activity

> ID：15514414
> 
> 赞同：0
> 
> 时间：2013-03-20T02:50:18.340
> 
> 标签：android, android-intent, android-activity

我已经研究了一个小时，但我无法弄清楚这个问题。`activity`当`boolean`值`true`在`ACTION_UP`TouchEvent 中时，我试图启动一个新的。

```
public boolean onTouchEvent(MotionEvent event) {

            int eventaction = event.getAction();
            int X = (int)event.getX();
            int Y = (int)event.getY();
            fingerX = X;
            fingerY = Y;

            switch (eventaction ) {

            case MotionEvent.ACTION_DOWN:
                if (okayButton){
                    if (fingerX > 323 && fingerX < 423) {
                        largeOkayButton = true;
                    }
                }
                break;

            case MotionEvent.ACTION_MOVE:
                break;

            case MotionEvent.ACTION_UP:
                tutorial = true;
                if (startActivity){
                    //create an Intent variable titled openStartingPoint and pass its activity action from the Android Manifest.xml
                    Intent MainActivity = new Intent("com.example.shoottoiletpaper.MAINACTIVITY");
                    //start a new activity by passing the newly created Intent

                    startActivity(MainActivity);
                }
                break;
            }
        return true;
    } 
```

一切正常，直到它启动`activity`，当它强制关闭时，我在 logcat 中得到了这个：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent 
```

这是相关部分`manifest`：

```
 <activity
        android:name="com.example.shoottoiletpaper.MainActivity"
        android:screenOrientation="landscape"
        android:configChanges="orientation|keyboard"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAINACTIVITY" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:19:13.050

您的主要活动的班级名称是什么？如果它不是 MAINACTIVITY，那你就打错了。

改变

```
 Intent MainActivity = new Intent("com.example.shoottoiletpaper.MAINACTIVITY"); 
```

至

```
 Intent MainActivity = new Intent(this,MainActivity.class); 
```

（或任何你的主要活动被称为）。大小写在 Java 中很重要。

并查看您的清单。（看[这里](http://developer.android.com/reference/android/content/Intent.html)的例子。

你应该改变你的行来阅读

```
 <action android:name="android.intent.action.MAIN"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:54:01.223

改变

```
<action android:name="android.intent.action.MAINACTIVITY" /> 
```

至

```
<action android:name="android.intent.action.MAIN" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:54:06.323

改变这个

```
Intent MainActivity = new Intent("com.example.shoottoiletpaper.MAINACTIVITY"); 
```

至

```
Intent MainActivity = new Intent("android.intent.action.MAINACTIVITY"); 
```

# django - 从查询返回的 Django 调试字典

> ID：15514418
> 
> 赞同：0
> 
> 时间：2013-03-20T02:50:40.897
> 
> 标签：django, django-templates, django-views

在 django 中有没有办法以下列方式打印从查询集中返回的字典：

```
{
    'key' : value,
    'key' : 'value',
    'keyrecur' : {
       'key' : 'value',
       'key' : value
    }
} 
```

或者类似的方式？

# image - 在matlab中加密后保留图像大小

> ID：15514419
> 
> 赞同：-3
> 
> 时间：2013-03-20T02:50:42.513
> 
> 标签：image, matlab, encryption, image-size

我正在尝试使用像素混淆和扩散在 MATLAB 中加密图像。所以代码改变了像素的位置，改变了像素灰度值。问题是我得到的加密图像比原始图像大 2-3 倍。我无法理解为什么会这样！任何帮助将不胜感激。

佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:23:13.597

加密图像的可压缩性可能远低于原始图像，因为加密图像比原始图像更“随机”。图像是否为压缩格式，例如 JPEG？如果是这样，那么您很可能无法避免该问题。

非压缩图像格式（如 BMP）应该为您提供相同的文件大小，这可能是一种可能的解决方案。

有一些加密方法不会增加文件大小，例如 CTR 模式，但它们很可能无法显示为图像，因为必要的文件格式信息也被加密了。您可以将加密文件存储在某处并放置一个占位符：“图像加密”在其位置。

# javascript-objects - 创建一个 javascript 骰子对象

> ID：15514423
> 
> 赞同：0
> 
> 时间：2013-03-20T02:50:55.510
> 
> 标签：javascript-objects

我需要使用 javascript 创建一个“骰子”对象。我有一个开始，但遇到了一些基本错误。

```
var Die = function (){
    this.sides = 6;
}
var Die = function (value){
   this.sides = value;
}
Die.prototype.roll = function(){
    var result = Math.floor((Math.random()*sides)+1);
    return;
}
Die.prototype.getValue = function(){
    return sides;
} 
```

我想要一个默认的六面骰子，但如果用户想要添加不同数量的面，他们应该有这个选项，因此尝试重载构造函数。roll 方法应该模拟“滚动”。

我真的不知道我哪里出错了，但我的方法不起作用谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T14:44:50.720

您的前两个语句相互覆盖，您应该将它们组合成一个，如下所示。

```
var Die = function(sides) {
  this.sides = sides || 6;
} 
```

`roll`您的和方法中唯一的错误`getValue`是要访问`sides`您必须使用的变量`this.sides`，因为它是`Die`对象的属性。这两个功能也可以很容易地组合成一个。

```
Die.prototype.roll = function() {
  return Math.floor((Math.random()*this.sides)+1);
} 
```

示例用法：

```
var die = new Die();
console.log(die.roll()); // --> 4
var five_sided_die = new Die(5);
console.log(five_sided_die.roll()); // --> 3 
```

# garbage-collection - 如何确定是否需要使用垃圾收集器？

> ID：15514426
> 
> 赞同：0
> 
> 时间：2013-03-20T02:51:21.603
> 
> 标签：garbage-collection

我正在开发一个用于绘制矢量图片的程序。因此，它必须存储点、这些点定义的路径、这些路径定义的图片等。 Inkscape ( [http://inkscape.org/](http://inkscape.org/) ) 做类似的事情似乎使用 Boehm 垃圾收集器 ( [http:// www.hpl.hp.com/personal/Hans_Boehm/gc/](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)）。这是否意味着我也应该这样做？我的意思是，我应该使用什么标准来确定我是否需要在我的程序中使用 GC？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:59:45.303

是否使用垃圾收集**取决于用于**开发应用程序的编程语言。

垃圾收集是一种内存管理技术，因此它的使用取决于编程语言的选择。一些编程语言正在使用垃圾收集（如 Java、C#），而另一些则不使用垃圾收集（C/C++）。

顺便提一句。Inkscape 使用**C**、**C++**、**Python**、**Perl**、**XSLT**编程语言，其中 Python 和 Perl 使用垃圾收集来进行内存管理。

**更新**：要了解有关 C/C++ 和垃圾收集的更多信息，我建议：

*   [为什么 C++ 没有垃圾收集器？](https://stackoverflow.com/q/147130/772000)
*   [C++ 中的垃圾收集——为什么？](https://stackoverflow.com/q/228620/772000)

# excel - 尝试将不同数量的单元格复制到固定数量的行中 - 当复制的单元格数量超过最后一行时，复制失败

> ID：15514430
> 
> 赞同：0
> 
> 时间：2013-03-20T02:51:33.957
> 
> 标签：excel, vba

感谢有经验的程序员愿意提供帮助。我没有受过正规培训，所以在阅读我的代码时尽量不要笑得太厉害。这也是我第一次尝试寻求外部帮助，所以我真诚地希望我没有违反任何规则。

我有一个包含多张工作表的工作簿。我编写的宏试图将不同数量的单元格值（所有文本）（例如，一张表可能有 3 个要复制的项目，另一个可能有 10 个）复制到具有固定数量的 30 行的列中。我遇到的问题是试图即时弄清楚如何跟踪正在复制的数据何时超过了粘贴的剩余可用空间。复制前 30 个单元格后，我有一个 Select Case 语句，该语句偏移到 30 行的下一列等，并且宏继续执行，直到复制了最后一张有数据的工作表。

我正在复制我编写的代码 - 我希望这个窗口是正确的位置。

谢谢， 贾

```
Option Explicit

Sub UpdateDraw()
        ' This code will populate the Roll Call sheet
        ' 1\. Go to Running Order sheet to get the sheet order
        ' 2\. For each sheet determine the number entered in each stake
        ' 3\. Copy the populated registration number from column D to the Roll Call sheet.
        ' 4\. After 30 cells have been copied switch the column on the Roll Call sheet.
        ' 5\. After 60 cells have been copied switch the column on the Roll Call sheet.
        ' 6\. After 90 cells have been copied switch the column on the Roll Call sheet.

    Dim a, b, c, d, e, x As Integer
    Dim y As String

    a = 1 'Offset for pasting to Roll Call Sheet
    b = 0 'Offset for number of Open stake entries
    c = 0 'Offset for number of Special stake entries
    d = 0 'Offset for number of Veteran stake entries
    e = 0 'Offset for Column shift based on number of entries copied
    x = 0 'Loop counter - goes to 21
    y = "" 'Sheet to select based on loop counter

    Do Until x = 21
        Select Case a
            Case 1 To 30: e = 0 And a = 1
            Case 31 To 60: e = 5 And a = 1
            Case 61 To 90: e = -10 And a = 34
            Case 91 To 120: e = -5 And a = 34
            Case 121 To 150: e = 0 And a = 34
            Case 151 To 180: e = 5 And a = 34
        Case Else:
            MsgBox "Case Not Found"
        End Select

    Sheets("Running Order").Select

    With ActiveSheet
        y = .Range("A2").Offset(x, 0).Value
    End With
    If y = "RR(A)" Or y = "RR(B)" Then
        Sheets(y).Select
        'GoTo Copy_RR
    ElseIf y = "WH(A)" Or y = "WH(B)" Then
        Sheets(y).Select
        GoTo Copy_Wh
    Else:
        Sheets(y).Select
        GoTo Copy_Regular
    End If
Copy_Regular:
             'Select Copy data for Open Stake

            With ActiveSheet
                If .Range("L4") = 0 Then
                    'No entries on this sheet
                    b = 0
                ElseIf .Range("L4") = 1 Then
                    ActiveSheet.Range("D9").Copy
                    b = 1
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                ElseIf .Range("L4") > 1 Then
                    ActiveSheet.Range("D9", ActiveSheet.Range("D9").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D9:D20"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                End If

                'Select Copy data for Specials
                Sheets(y).Select
                If .Range("L27") = 0 Then
                a = a
                ElseIf .Range("L27") = 1 Then
                    ActiveSheet.Range("D32").Copy
                    c = 1
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                ElseIf .Range("L27") > 1 Then
                    ActiveSheet.Range("D32", ActiveSheet.Range("D32").End(xlDown)).Copy
                    c = WorksheetFunction.CountA(ActiveSheet.Range("D32:D43"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                Else:
                a = a
                End If

                'Select Copy data for Veterans
                Sheets(y).Select
                If .Range("L50") = 0 Then
                a = a
                ElseIf .Range("L50") = 1 Then
                    ActiveSheet.Range("D55").Copy
                    d = 1
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + d
                ElseIf .Range("L50") > 1 Then
                    ActiveSheet.Range("D55", ActiveSheet.Range("D55").End(xlDown)).Copy
                    d = WorksheetFunction.CountA(ActiveSheet.Range("D55:D66"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + d
                Else:
                a = a
                End If
            End With
            GoTo End_Loop

Copy_RR:
             'Select Copy data for Open Stake
            Sheets(y).Select
            With ActiveSheet
                If .Range("L4") = 0 Then
                    'No entries in Open
                    b = 0
                ElseIf .Range("L4") > 0 And .Range("L4") <= 12 Then
                    ActiveSheet.Range("D9", ActiveSheet.Range("D9").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D9:D20"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                            Sheets(y).Select
                ElseIf .Range("L4") > 12 And .Range("L4") <= 19 Then
                    ActiveSheet.Range("D9", ActiveSheet.Range("D9").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D9:D20"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                    Sheets(y).Select
                    ActiveSheet.Range("D32", ActiveSheet.Range("D32").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D32:D43"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                End If

                'Select Copy data for Specials
                Sheets(y).Select
                If .Range("L50") = 0 Then
                    'No entries on this sheet
                    c = 0
                ElseIf .Range("L50") > 0 And .Range("L50") <= 12 Then
                    ActiveSheet.Range("D55", ActiveSheet.Range("D55").End(xlDown)).Copy
                    c = WorksheetFunction.CountA(ActiveSheet.Range("D55:D66"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                            Sheets(y).Select
                ElseIf .Range("L50") > 12 And .Range("L50") <= 19 Then
                    ActiveSheet.Range("D55", ActiveSheet.Range("D55").End(xlDown)).Copy
                    c = WorksheetFunction.CountA(ActiveSheet.Range("D55:D66"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                            Sheets(y).Select
                    ActiveSheet.Range("D78", ActiveSheet.Range("D78").End(xlDown)).Copy
                    c = WorksheetFunction.CountA(ActiveSheet.Range("D78:D89"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                End If

                'Select Copy data for Veterans
                Sheets(y).Select
                If .Range("L96") = 0 Then
                'No entries in Veterans
                a = a
                ElseIf .Range("L96") > 0 And .Range("L96") <= 12 Then
                    ActiveSheet.Range("D101", ActiveSheet.Range("D101").End(xlDown)).Copy
                    d = WorksheetFunction.CountA(ActiveSheet.Range("D101:D112"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + d
                ElseIf .Range("L96") > 12 Then
                MsgBox "Houston we have a problem! More than 12 in Veterans requires another sheet."
                Stop
                Else:
                a = a
                End If
            End With
            GoTo End_Loop

Copy_Wh:

            Sheets(y).Select
            With ActiveSheet
                If .Range("L4") = 0 Then
                    'No entries in Open
                    b = 0
                ElseIf .Range("L4") > 0 And .Range("L4") <= 12 Then
                    ActiveSheet.Range("D9", ActiveSheet.Range("D9").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D9:D20"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                            Sheets(y).Select
                ElseIf .Range("L4") > 12 And .Range("L4") <= 24 Then
                    ActiveSheet.Range("D9", ActiveSheet.Range("D9").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D9:D20"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                    Sheets(y).Select
                    ActiveSheet.Range("D32", ActiveSheet.Range("D32").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D32:D43"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                ElseIf .Range("L4") > 24 And .Range("L4") <= 29 Then
                    ActiveSheet.Range("D9", ActiveSheet.Range("D9").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D9:D20"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                    Sheets(y).Select
                    ActiveSheet.Range("D32", ActiveSheet.Range("D32").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D32:D43"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                    Sheets(y).Select
                    ActiveSheet.Range("D55", ActiveSheet.Range("D55").End(xlDown)).Copy
                    b = WorksheetFunction.CountA(ActiveSheet.Range("D55:D66"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + b
                End If

                'Select Copy data for Specials
                Sheets(y).Select
                If .Range("L73") = 0 Then
                    'No entries on this sheet
                    c = 0
                ElseIf .Range("L73") > 0 And .Range("L73") <= 12 Then
                    ActiveSheet.Range("D78", ActiveSheet.Range("D78").End(xlDown)).Copy
                    c = WorksheetFunction.CountA(ActiveSheet.Range("D78:D89"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                            Sheets(y).Select
                ElseIf .Range("L73") > 12 And .Range("L73") <= 19 Then
                    ActiveSheet.Range("D78", ActiveSheet.Range("D78").End(xlDown)).Copy
                    c = WorksheetFunction.CountA(ActiveSheet.Range("D78:D89"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                            Sheets(y).Select
                    ActiveSheet.Range("D101", ActiveSheet.Range("D101").End(xlDown)).Copy
                    c = WorksheetFunction.CountA(ActiveSheet.Range("D101:D112"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                            Sheets(y).Select
                    ActiveSheet.Range("D124", ActiveSheet.Range("D124").End(xlDown)).Copy
                    c = WorksheetFunction.CountA(ActiveSheet.Range("D124:D135"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + c
                End If

                'Select Copy data for Veterans
                Sheets(y).Select
                If .Range("L142") = 0 Then
                'No entries in Veterans
                a = a
                ElseIf .Range("L142") > 0 And .Range("L142") <= 12 Then
                    ActiveSheet.Range("D147", ActiveSheet.Range("D147").End(xlDown)).Copy
                    d = WorksheetFunction.CountA(ActiveSheet.Range("D147:D158"))
                        Sheets("ASFA Certs_RollCall").Activate
                            With ActiveSheet
                                .Range("K3").Offset(a, e).Select
                                .Range("K3").Offset(a, e).PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                                :=False, Transpose:=False
                            End With
                            a = a + d
                ElseIf .Range("L142") > 12 Then
                MsgBox "Houston we have a problem! More than 12 in Veterans requires another sheet."
                Stop
                Else:
                a = a
                End If
            End With
            GoTo End_Loop
End_Loop:
    x = x + 1
    Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:11:33.183

和其他发表评论的人一样，我被你写的大量代码淹没了。我将提供一小段您可能可以使用的代码——它需要一些调整，但它可能会有所帮助。

```
dim curRow, curCol
dim c as Cell

' loop around the regions you want to select (pick first cell, extend with .End(xlDown) )
' select the data you want to copy, then
For each c in Selection.Cells
    if curRow < 30 Then 
        curRow = curRow+1 
    Else
        curRow = 1
        curCol = curCol + 1
    End If
    [A1].offset(curRow, curCol).Value = c
Next c

' repeat for next region... this can be a loop too 
```

如您所见，这使用`curRow`和`curCol`变量来跟踪数据将被复制到哪里。通过一次考虑一个单元格，我们可以不断更新目标地址。显然，您需要调整偏移量（而不是 Range("A1") 的简写 [A1]，使用正确的起始地址）。

我希望这有帮助。

# mysql - 如何在mysql中设置token，让token只在一小时内工作？

> ID：15514434
> 
> 赞同：0
> 
> 时间：2013-03-20T02:51:55.317
> 
> 标签：mysql, sql

用于诸如“email_reset_password 功能”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:01:38.220

我记得我看到的唯一实现是增加一个带有日期的列。该日期将包含有关令牌验证的信息。我的意思是，当您插入令牌时，您还插入了它仍然有效的日期（在您的情况下是当前日期和时间 + 1 小时），然后，您可以使用该信息来验证它是否过期。

# java - 字母频率数组，将 int 转换为 char

> ID：15514440
> 
> 赞同：0
> 
> 时间：2013-03-20T02:52:26.077
> 
> 标签：java

我下面的代码打印出从扫描仪类输入的字母频率表（字符串中出现的字母数）。除了最后一点，我一切正常。执行时，表格显示字母 az 和出现次数，除了最后一个方法 LargestLength() 方法。由于我的数组'score'使用int [26]，而不是使用az，它使用int 0-25。（0=A，1=B 等）到目前为止，我的 LargestLength 方法只显示出现次数最多的数字（而不是字母），但不计算出现次数。

例如，如果我的字符串是“你好”，l 出现频率最高，所以我希望它显示“最常见：l 2”，但我的代码显示“最常见：11”（11 = L） . 我将如何解决这个问题？

配置文件类。

```
public class LetterProfile {
  int score[] = new int [26];

   public void countChars (String s) {
    s = s.toLowerCase();
    char a = 'a';
    for (int i = 0; i < s.length(); i++) {
      int next = (int)s.charAt(i) - (int) a;
      if ( next< 26 && next >= 0)
        score[next]++;

    }
 }

    public int largestLength() { 
      int largest = 0;
      int largestindex = 0;
      for(int a = 0; a<26; a++) {
        if(score[a] > largest) {
        largest = score[a];
        largestindex = a ;

      }
      }
      return (char) largestindex;
    }

    public void printResults() {
       largestLength();

       for (int i = 0; i < score.length; i++) {
    System.out.println( (char)(i+97) + ": " + score[i]);
       }
  System.out.println(("Most Frequent") + (": ") + largestLength());
    }
} 
```

有点令人困惑的解释，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:53:44.193

> 如果我的字符串是“你好”，l 出现频率最高，所以我希望它显示“最频繁：l 2”，但我的代码显示“最频繁：11”（11 = L）。我将如何解决这个问题？

简单的：`String.valueOf((char)(number + 'A'));`

# regex - 如何通过perl和正则表达式验证字符串只有某些字母

> ID：15514441
> 
> 赞同：2
> 
> 时间：2013-03-20T02:52:28.090
> 
> 标签：regex, perl

我正在寻找一个 perl 正则表达式，它将验证仅包含字母 ACGT 的字符串。例如，“AACGGGTTA”应该是有效的，而“AAYYGGTTA”应该是无效的，因为第二个字符串的“YY”不是A、C、G、T字母之一。我有以下代码，但它验证了上述两个字符串

```
if($userinput =~/[A|C|G|T]/i)
{
    $validEntry = 1;
    print "Valid\n";
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T02:53:48.830

使用字符类，并确保使用字符串标记的开头 和字符串标记的结尾来检查整个`\A`字符串`\z`。

您还应该使用`*`or`+`来表示您想匹配多少个字符——`*`表示“零个或多个”，`+`表示“一个或多个”。

因此，下面的正则表达式是说“在（不区分大小写）字符串的开头和结尾之间，应该只有以下一个或多个字符：a、c、g、t”

```
if($userinput =~ /\A[acgt]+\z/i)
{
    $validEntry = 1;
    print "Valid\n";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T20:54:50.003

Using the character-counting tr operator:

```
if( $userinput !~ tr/ACGT//c )
{
    $validEntry = 1;
    print "Valid\n";
} 
```

`tr/characterset//` counts how many characters in the string are in characterset; with the `/c` flag, it counts how many are *not* in the characterset. Using `!~` instead of `=~` negates the result, so it will be true if there are no characters not in characterset or false if there are characters not in characterset.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T03:17:34.937

您的角色类`[A|C|G|T]`包含`|`. `|`不代表字符类中的交替，它只代表它自己。因此，字符类将包含`|`字符，这不是您想要的。

你的模式没有锚定。该模式`/[ACGT]+/`将匹配任何包含一个或多个这些字符的字符串。相反，您需要锚定您的模式，以便仅匹配从头到尾仅包含这些字符的字符串。

`$` can match a newline. To avoid that, use `\z` to anchor at the end. `\A` anchors at the beginning (although it doesn't make a difference whether you use that or `^` in this case, using `\A` provides a nice symmetry.

So, you check should be written:

```
if ($userinput =~ /\A [ACGT]+ \z/ix)
{
    $validEntry = 1;
    print "Valid\n";
} 
```

# php - 为什么我不能在 Laravel 路径中使用 'php artisan' cmd (Win)

> ID：15514444
> 
> 赞同：4
> 
> 时间：2013-03-20T02:52:51.183
> 
> 标签：php, cmd, laravel

我曾尝试在 Ubuntu 中学习 Laravel，并且命令“php artisan”在终端的 laravel 文件夹路径中工作。

我刚开始在Win7中做，我在cmd.exe中输入“cd c:\wamp\www\myproject”来更改laravel文件夹的路径（artisan文件在这个文件夹中）。

之后，我尝试了“php artisan”，但收到此消息“'php' 不是内部或外部命令、可运行程序或批处理文件。”

我错过了什么？命令行显示 C:\wamp\www\myproject>php artisan 并且我已经仔细检查了文件路径是否正确。

我做错了哪一步？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T02:55:02.190

发生错误是因为 Windows 命令行不知道在哪里可以找到 php.exe 二进制文件。

在 Windows 7 中，单击开始，然后在开始菜单搜索栏中键入“环境”。选择“为您的帐户编辑环境变量”。在以前版本的 Windows 中，右键单击我的电脑，然后单击属性。转到属性窗口中的高级选项卡，然后单击底部标记为“环境变量”的按钮。

现在，找到 PATH 环境变量并将 PHP 二进制文件的路径添加到其中。路径用分号分隔。

示例 PATH 变量可能如下所示：

```
C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;D:\apps\Git\bin 
```

只需将 PHP 二进制文件的路径添加到末尾，不要忘记中间的分号。我的 PHP 二进制文件的路径是 D:\work\apps\xampp177\php 所以我的 PATH 变量将如下所示：

```
C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;D:\apps\Git\bin;D:\work\apps\xampp177\php 
```

请注意，该路径不包含 php.exe。路径只是包含 php.exe 的文件夹。

保存 PATH 后，关闭 CLI，重新打开它，使用 artisan 应该不会再遇到问题。

# java - 通过链接更改 JLABEL 的颜色

> ID：15514445
> 
> 赞同：0
> 
> 时间：2013-03-20T02:52:57.453
> 
> 标签：java, swing, colors, hyperlink, jlabel

如何使用 java 中的链接更改 JLABEL 的颜色？

```
 import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
public class XXX extends JFrame {
    XXX(){

        final JLabel lab1=new JLabel("Username:");
        final JTextField text1=new JTextField(20);
           lab1.setBounds(20,140,65,20);
           text1.setBounds(85,141,185,20);
           add(lab1);
           add(text1);
           lab1.setForeground(Color.white);

        final JLabel lab2=new JLabel("Password:");
        final JPasswordField text2=new JPasswordField(20);
           lab2.setBounds(20,165,65,20);
           text2.setBounds(85,166,185,20);
           add(lab2);
           add(text2);
           lab2.setForeground(Color.white);

        final JButton a=new JButton("Sign In");
        a.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
            //Code

            }
        });
        a.addMouseListener(new MouseAdapter() {
        public void mouseEntered(MouseEvent me) {
           a.setCursor(new Cursor(Cursor.HAND_CURSOR));
        }
        public void mouseExited(MouseEvent me) {
           a.setCursor(Cursor.getDefaultCursor());
        }
        public void mouseClicked(MouseEvent me)
        {
            a.setEnabled(false);
            text1.setEditable(false);
            text2.setEditable(false);
          try {

            }
            catch(Exception e) {
               System.out.println(e);
            }
        }
        });
           a.setBounds(85,192,80,20);
           add(a);

        final String strURL = "http://www.yahoo.com";
        final JLabel lab3 = new JLabel("<html><a href=\" " + strURL + "\">Register</a></html>");
        lab3.setBounds(170,192,52,20);
        add(lab3);
        lab3.addMouseListener(new MouseAdapter() {
        public void mouseEntered(MouseEvent me) {
           lab3.setCursor(new Cursor(Cursor.HAND_CURSOR));
        }
        public void mouseExited(MouseEvent me) {
           lab3.setCursor(Cursor.getDefaultCursor());
        }
        public void mouseClicked(MouseEvent me)
        {
           text2.setEditable(false);
          try {

            }
            catch(Exception e) {
               System.out.println(e);
            }
        }
        });

        final JLabel map = new JLabel(new ImageIcon(getClass().getResource("XXXBG.png")));
        map.setBounds(0,0,300,250);
        add(map);

            setTitle("XXX");
            setSize(300,250);
            setResizable(false);
            setCursor(DEFAULT_CURSOR);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setLocation(8, 8);
            setLayout(null);
            toFront();
            setVisible(true);
    }

    public static void main(String[] args)
    {
    new XXX();
        }
} 
```

如您所见，我无法更改 JLABEL lab3 的前景色。如果可能的话，我还想改变 jframe 的边框颜色。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:58:22.503

是的，这是可能的。简单地提供`foreground`您想要使用的颜色...

```
lab3.setForeground(Color.BLUE); 
```

您也不需要鼠标侦听器。`lab3.setCursor(new Cursor(Cursor.HAND_CURSOR));`当鼠标移到标签上时，简单地使用会自动更改鼠标光标......神奇地：D

**更新**

```
public class TestLabel01 {

    public static void main(String[] args) {
        new TestLabel01();
    }

    public TestLabel01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JLabel link = new JLabel("Linked in");
                link.setForeground(Color.BLUE);
                link.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(link);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

# c# - 缩略图 - 创建本地设备或从服务器下载

> ID：15514448
> 
> 赞同：1
> 
> 时间：2013-03-20T02:53:17.487
> 
> 标签：c#, android, ios, objective-c, image

我的问题与性能有关。我正在开发一个从服务器下载图像的本地照片库移动设备。我正在考虑天气我应该在服务器上存储每个图像的缩略图并为每个图像下载它，或者为本地设备上的每个图像创建一个缩略图。哪个是更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:06:57.983

这必须根据您的网站可能收到的流量以及可以在网站/服务器上的图像数量进行估计，如果您认为该网站在许多不同的图像上会有很多流量，那么创建缩略图是更好，因为它不会消耗资源。

我运行一个拥有超过 25,000 张图片的网站，并且我为每张图片创建了缩略图，因为每分钟有超过 15-20 个请求。否则，这将相当于大量处理。

# asp.net-mvc - 加载 div 后触发事件，其中包含来自 ajax 调用的内容

> ID：15514452
> 
> 赞同：1
> 
> 时间：2013-03-20T02:53:43.787
> 
> 标签：asp.net-mvc, jquery

我有一个场景，我在 ajax 回调事件中将 html 加载到 div 中。我的目标是在加载主要内容后将另一个 div 附加到新加载的 div 上。主要问题是加载了很多 html，我必须等到加载发生。

基本步骤如下。

```
@using (Ajax.BeginForm
(
    Model.PostAction,
    Model.PostController,
    null,
    new AjaxOptions() { OnSuccess = "contentLoadSuccess", OnFailure = "contentLoadFailure" },
    new { id = "reportBase_frmViewer", name = "reportBase_frmViewer" })
)
{
  ...
}

function contentLoadSuccess(ajaxContext) {
    showWaitIndicator(false);
    if (ajaxContext.Format == null)
        //If the format is not there then the server reponded but the an unhandled exception was caught and thrown
        //the content will be the user friendly version
        setReportContent(ajaxContext);
    else {
        if (ajaxContext.Format == "HTML") {
            //If the format is HTML then it is already in the result, inject it into the content container
            showWaitIndicator(true);
            updatePageNumber(ajaxContext.PageNumber, ajaxContext.TotalPageNumber);
            setReportContent(ajaxContext.HTMLContent);
       } else
            //Export option is used. The render link has a url friendly format to start the file download
            window.location.href = ajaxContext.RenderLink + "&format=" + ajaxContext.Format;
    }
}

 function setReportContent(content) {
        $("#reportContent").html(content);
        $("#toggleToolbar").appendTo("#reportContent");//<- Does not work content takes to long and will overwrite appended div
        $("#reportContent").show();        
    }

$(document).ready(function () {
     //This does not work either
    $("#reportContent").load(function (e) {
        $("#toggleToolbar").appendTo("#reportContent");
        $("#toggleToolbar").show();                
    });
});

$("#reportContent").on("load", function (event) {
    alert("This does not work either");
    $("#toggleToolbar").appendTo("#reportContent");
 }); 
```

我已经查看了带有加载触发器的 .live() ，但我读到它正在折旧。也许有一种我没有想到的完全合乎逻辑的方式。或者也许我正在以错误的方式解决这个问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:51:21.977

尝试使用超时

```
function setReportContent(content) {
    $("#reportContent").html(content);
    setTimeout(function(){
        $("#toggleToolbar").appendTo("#reportContent");//<- Does not work content takes to long and will overwrite appended div
        $("#reportContent").show();        
    }, 200);
} 
```

# git - 重写 git 提交历史

> ID：15514461
> 
> 赞同：1
> 
> 时间：2013-03-20T02:54:27.433
> 
> 标签：git, git-rebase

假设我们有一个 git 提交历史，如下所示：

> ZZ [起源/主人] A -> B -> C -> D -> E [主人]

我们想：

*   将历史倒回之前`A`。
*   保留工作目录`E`。
*   将 in 的所有变更集捆绑`A..E`到一个提交中。
*   将结果推送到远程。

结果应如下所示：

> ZZ -> XX [master][origin/master]

其中 XX 是包含先前提交 A..E 更改的提交

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T02:56:48.527

你可以试试：

```
git reset --hard E
git reset --soft ZZ
git commit 'comment'
git push orgin master 
```

> **- 柔软的**
> 
> 完全不触及索引文件或工作树（但将头部重置为 ，就像所有模式一样）。这会留下所有更改的文件“要提交的更改”，就像 git status 所说的那样。

# c# - 将嵌入的 .ico 导出到磁盘

> ID：15514467
> 
> 赞同：0
> 
> 时间：2013-03-20T02:54:45.547
> 
> 标签：c#, resources

如何导出已嵌入 Resources.resx 的嵌入式 .ico 图标文件？我找到了这个例子，但我不确定 targetAssembly 部分是什么。

如果有人可以在这里给我一些指示，那将非常有帮助。

```
public static void WriteResourceToFile(Assembly targetAssembly, string resourceName, string filepath)
    {

        using (Stream s = targetAssembly.GetManifestResourceStream(targetAssembly.GetName().Name + "." + resourceName))
        {

            if (s == null)
            {

                throw new Exception("Cannot find embedded resource '" + resourceName + "'");

            }

            byte[] buffer = new byte[s.Length];

            s.Read(buffer, 0, buffer.Length);

            using (BinaryWriter sw = new BinaryWriter(File.Open(filepath, FileMode.Create)))
            {

                sw.Write(buffer);

            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:25:11.327

看起来（根据您对 Jeremy 的回答的评论）您已经将 Icon 存储在您的应用程序属性中。如果是这种情况，则无需手动查找它并将其从正在执行的程序集中解析出来。

如果您查看[图标文档](http://msdn.microsoft.com/en-us/library/system.drawing.icon.aspx)，您会发现它有一个名为`Save(...)`. 是不是有点方便？

将其保存到磁盘就像打开 a`FileStream`并调用`Save`.

在你的情况下：

```
using (var fStream = new FileStream(Path.Combine(userDir, "iconName.ico"), FileMode.OpenOrCreate, FileAccess.Write))
{
    Properties.Resources.iconName.Save(fStream);
} 
```

简单的东西，只需阅读文档。

# node.js - 自定义 NodeJS 网络爬虫

> ID：15514474
> 
> 赞同：0
> 
> 时间：2013-03-20T02:55:05.497
> 
> 标签：node.js, web-crawler

我正在尝试使用 Node.js 构建一个基本的网络爬虫。我已经尝试了尽可能多的爬虫模块，但它们都不适合我，所以我想我会尝试自己动手。基本上，我正在使用“请求”模块，并为我在页面上找到的每个链接递归调用“请求”函数。

它似乎运行良好，在 100 页之后，内存使用率仍然很低，但是在大约 14 页之后，我收到了关于最大事件发射器和可能的内存泄漏的 Node 警告。

这是编写网络爬虫的安全方法吗？有什么我需要考虑的吗？有没有更好的方法来解决它？

谢谢！

更新：下面的代码：

```
var request = require('request');
var $       = require('jquery');
var _       = require("underscore");
var S       = require('string');
var jsdom   = require('jsdom');

var startURL    = 'http://www.cnn.com/sitemap/';
var host        = 'http://www.cnn.com';
var blocked     = [];
var totalDepth  = 1;

var urls        = [];
var ignored     = [];
var results     = [];
var counter     = 0;

processURL(startURL,totalDepth);

function processURL(url,depth) {

    request(url, function (error, response, html) {

      if (!error && response.statusCode == 200) {

        var title = html.match("<title>(.*?)</title>");
            title=title ? title[1] : '';

        var myURL=url;
        myURL = myURL.split(',').join(' ');
        title = title.split(',').join(' ');
        displayURL = myURL.replace(host,'');
        results.push(myURL + ',' + title);
        counter++;

        if(results.length==100) {
            saveResults();
        }

        if(depth>0) {
            jsdom.env({
                html: html,
                scripts: ['http://code.jquery.com/jquery-1.7.min.js']
                }, function (err, window) {
                var $ = window.jQuery;
                if($!=undefined) {
                $('a').each(function() {
                    var href=$(this).attr('href');
                    href=fixURL(href);
                    if(checkURL(href)) {
                        addToQueue(href,depth-1);                       
                    } 
                })
              }
            });
        }
    }   
});
}

var int=setInterval(function(){checkExit()},10000);

function checkExit() {

    if(results.length==0) {
        process.exit();
    }

    saveResults();

}

function checkURL(url) {

    if(url==undefined) return false;
    if(url=='')  return false;
    if(url=='#') return false;
    if(url=='')  return false;
    if(url=='/') return false;
    if(S(url).startsWith('#')) return false;
    if(url.indexOf('javascript')==0) return false;

    if(url.indexOf("/")==0) {
        url=host+url;
    }

    if(_.contains(urls,url)) {        
        return false;
    }

    if(_.contains(ignored,url)) {        
        return false;
    }    

    $.each(blocked,function(i,d) {
        if(S(url).contains(d)) {
            ignored.push(url);
            return false;
        }
    })

    if(url.indexOf('http')==0) {
        if(S(url).startsWith(host)) {
            return true;
    }   else
            return false;
    }

    return true;                  
}

function addToQueue(url,depth) {

    if(_.contains(urls,url)) {        
        return false;
    }

    if(url.indexOf("/")==0) {
        url=host+url;
    }

    if(!validURL(url)) {
        return;
    }

    processURL(url,depth);
    urls.push(url); 

}

function saveResults() {
    var csv = '';
    $.each(results,function(i,d) {
        csv+=d + '\n';
    })
    writeData(csv);
    results = [];
}

function writeData(data) {
    var fs = require('fs');    
    fs.appendFile(__dirname+'/results.csv', data, function(err) {
        if(err) {
            console.log(err);
        } else {
            console.log("******The file was saved!******");            
        }
    }); 
}

function validURL(value) {
    var urlregex = new RegExp("^(http:\/\/www.|https:\/\/www.|ftp:\/\/www.|www.){1}([0-9A-Za-z]+\.)");
    if (urlregex.test(value)) {
        return (true);
    }
    return (false);
}

function fixURL(url) {
    if(url==undefined) return '';
    if(url.indexOf("/")==0) {
        return host+url;
    } else {
        return url;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:34:59.570

对于给定的事件发射器，您正在达到节点的[最大事件侦听器的非常保守/低阈值。](http://nodejs.org/api/events.html#events_emitter_setmaxlisteners_n)最有可能的是，您的代码中有一个错误，您将一遍又一遍地添加侦听器到可以重用它们的同一个发射器。您需要发布您的代码以便我们对其进行分析，但要么您有正当需要增加此值，要么您错误地将冗余侦听器添加到同一个发射器。

您可能还想了解[maxSockets](http://nodejs.org/api/http.html#http_agent_maxsockets)参数，但可能不会对其进行调整，因为这可能会将您的代码从行为良好的爬虫转移到令人讨厌的拒绝服务机器人中。

# android - 与 3 个不同的变量共享 Seekbar

> ID：15514480
> 
> 赞同：0
> 
> 时间：2013-03-20T02:56:27.670
> 
> 标签：android, android-layout, seekbar

我想实现与一个搜索栏共享的 3 个不同的变量。我想知道是否有可能和一些指示？

例如，我在下面附上了一张图片，这是我想要做的。当我选择 X 轴时，进度条会更改并更新为 X 轴值。

![SeekBar 与 3 个变量共享](../Images/639f443994e4a392d7fede4449088609.png)

而不是故意创建3个搜索栏来处理xyz变量。这种方式会占用大量空间，并且在移动设备中看起来并不好。

![3 搜索栏](../Images/3de34b6d0a3920e54c8a058c785e1911.png)

有可能实现这样的事情吗？不一定必须为此使用 RadioGroup，只要任何可以使这项工作的方法都可以。任何意见和答案将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:03:55.307

将单选按钮与带有单个进度条的 switch 语句一起使用。

例子：

```
int x,y,z;
onProgressChanged(SeekBar seekBar, int progress, boolean fromUser){
 switch(radioChecked){
  case x:
   int x = progress;
  break;
  //y and z as well
}
} 
```

任何 UI 逻辑都可以在这里使用，主要需要注意的是变量最初是有效的，如果不同变量的范围不同，相应地调整进度条边界，并确保在更改变量时更新滑块位置。

# stored-procedures - 在一个行项目中显示多个数据

> ID：15514485
> 
> 赞同：0
> 
> 时间：2013-03-20T02:57:02.740
> 
> 标签：stored-procedures, ssrs-2008, multiple-results

我正在使用 Sql Server Reporting Service 2008。假设我有一个 tablix，如下所示：

```
Items   2009    2010    2011
A       10      20      30
B       100     200     300
C       1000    2000    3000 
```

年份列中的所有值都是动态生成的，后面会添加像 2012 年和 2013 年这样的年份。

现在，如果一个特定的行项目在数据库中有多个记录，它应该显示在行中。例如，Row Item 'C'，ID(report parameter) = 3，应该返回3条记录，如下图：

```
Items       2009        2010         2011
A           10          20           30
B           100         200          300
C, C1, C2   1000,200,30 2000,300,40  3000,400,50 
```

我该如何做到这一点？我应该对我的存储过程进行更改吗？也许添加一个循环？还是应该在 SSRS2008 中指定 tablix 表达式？

ps：我的存储过程只包含常见的select语句。例如：

```
Select A, B, C from Products where ID = '@ID'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:33:37.843

您需要添加另一个列组才能将值推出。例如，您按年份分组。您需要按年份和 [Items] 的行值添加另一个列组，并添加标题以使第一行组为年份，然后 = Year+ Items(x)。

```
2009[1] 2010[1][2][3] 2011[1]
1       1    2  3  4  1 
```

# haskell - Haskell：将（a，b）键值对（可能重复键）列表转换为按键分组的（a，[b]）列表

> ID：15514486
> 
> 赞同：16
> 
> 时间：2013-03-20T02:57:04.017
> 
> 标签：haskell, key-value

我是 Haskell 初学者。假设我想编写一个函数`convertKVList`，它采用键值对的平面列表，其中一些键可能重复，并将其转换为从键到值列表的映射，其中所有键都是唯一的。例如，在一对`Int`s 的列表中，我想要这种行为：

```
> convertKVList [(1, 2), (1, 4), (1, 3), (2, 3)]
[(1,[3,4,2]),(2,[3])] 
```

这似乎是一个足够常见的任务，应该有一个库函数可以用来做我想做的事，但是当我看的时候我什么也找不到。最后，有人建议我`Map.toList`用作曲`Map.fromListWith (++)`，我最终得到了这个：

```
import Data.Map as Map (toList, fromListWith)

convertKVList :: (Ord a) => [(a, b)] -> [(a, [b])]
convertKVList ls =
  (Map.toList . Map.fromListWith (++) . map (\(x,y) -> (x,[y]))) ls 
```

我的问题是针对更有经验的 Haskellers 的，分为两部分：首先，这是你将如何去做，还是有“更好”（更容易阅读，或更有效，或两者兼而有之）的方式？

其次，我怎么能自己想出这个？我知道我希望类型为`[(a, b)] -> [(a, [b])]`，但将其放入 Hoogle 并没有发现任何有用的东西。我看过`Data.Map`文档，但都`fromListWith`没有`toList`特别有用。那么：您将如何思考这个问题？（我意识到这两个问题都是主观的，尤其是第二个问题。）

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T03:36:23.430

编写函数时最重要的一点是，尝试将它应该做的事情拆分成单独的子任务（这些子任务通常最终通过函数组合组合在一起）。例如，在您提出的定义中，有三个任务（按应用顺序，即定义中从右到左）：

1.  将每对的第二个组件映射到一个单例列表（从而允许使用`Map.fromListWith`）
2.  创建一个映射（负责合并具有相同键的条目）
3.  把它变成一个列表

我想发布一个不同的解决方案（这是同时发布的代码 Mark 的精确副本；））。只是要明确一点，大多数时候有不同的途径可以达到同一个目标。在他的定义中，您有单独的任务：

1.  按键排序列表
2.  按键对结果进行分组
3.  将其转换为所需类型的列表

再次强调，关注点分离（模块化）是一个重要原则。只需尝试将其应用于小问题，一旦您获得了一些经验，您将能够为看似困难的问题提出令人惊讶的简单解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T03:25:52.540

虽然这绝不是规范的：

```
import Data.List
import Data.Ord
import Data.Function (on)

convertKVList :: Ord a => [(a,b)] -> [(a,[b])]
convertKVList = map (\x -> (fst $ head x,  map snd x)) . groupBy ((==) `on` fst) . sortBy (comparing fst) 
```

它确实具有不引入 Data.Map 的优点。应该是渐近相同的，没有基准。我认为您可以使用 Control.Arrow 清理第一个块（类似于 (fst . head &&& map snd)），但它显然不是更干净。

不过，除了知道它或在#haskell 中询问之外，不知道您是如何得到它的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-20T06:47:05.660

Hoogle 并不是唯一能够通过类型签名搜索 Haskell 库的搜索引擎，而且它肯定而且不幸地只涵盖了 Hackage 的一小部分。使用[Hayoo](http://holumbus.fh-wedel.de/hayoo/hayoo.html)搜索类型签名会`[(a,b)]->[(a,[b])]`出现以下两种实现：

*   [`aggregateAL`](http://hackage.haskell.org/packages/archive/hinduce-missingh/latest/doc/html/Data-List-HIUtils.html#v%3aaggregateAL)
*   [`alistCollect`](http://hackage.haskell.org/packages/archive/rosso/latest/doc/html/src/Data-List-Rosso1.html#alistCollect)

关于你对这个问题的看法，因为在你的函数中你已经提出了一个更高级别的数据结构（`Map`），所以在输出中降级到更原始的关联列表是没有意义的，因为：

1.  您可以使用此类数据的大多数算法只会从获取`Map`输入中受益，因为它对于处理键值存储更有效，并且如果您发现自己仍然需要一个列表，您可以随时使用该列表`toList`。
2.  `Map`意味着在类型级别上没有重复键，这同样重要，因为在 Haskell 中，您应该始终使用类型系统进行最大程度的证明。这一原则本质上是使“如果它编译，它就起作用”这句话最接近真相的原因。

换句话说，这是您的函数的正确定义：

```
convertKVList :: (Ord a) => [(a, b)] -> Map a [b]
convertKVList ls =
  Map.fromListWith (++) . map (\(x,y) -> (x,[y])) $ ls 
```

Hayooing 对该类型签名也带来了一些已经实现的结果。

关于逼近问题，有句经典：[“分而治之！”](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm) . 克里斯的回答也有一些优点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T06:54:53.647

这看起来是一个可以理解的解决方案，您可以稍微清理一下：

```
导入 Data.Map (toList, fromListWith)
导入 Control.Arrow（二）

convertKVList :: Ord a => [(a, b)] -> [(a, [b])]
转换KVList = toList 。来自ListWith (++) 。地图（第二个（：[]））

```

关于您如何自己想出这个：假设您从 开始`Data.Map`，那么您想使用映射将值与相等的键组合起来。Hackage的文档`Data.Map`说`a`是值和`k`键的类型。

知道了这一点，您可以搜索`a -> a -> a`以查找可能将 a 中的两个值组合`Map k a`以产生新`a`值的函数。这将 API 缩小到少数函数，如`insertWith`、`fromListWith`和`fromAscListWith`.

同样，要将您的转换`Map k a`为`[(k, a)]`，您可以搜索文档`Map k a -> [(k, a)]`并仅找到几个函数，例如`assocs`、`toList`、`toAscList`和`toDescList`。请注意，在您的情况下，`[(k, a)]`实例化为`[(Int, [Int])]`.

我发现有助于理解标准 Haskell 库的一件事是查看 Hackage 上的源代码。查看哪些函数是根据其他函数实现的，有助于使 API 感觉更小，并且我可以看到哪些函数是基本构建块。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-20T07:43:41.157

我怀疑如果不深入研究突变和`ST`单子，您不太可能改进`Map.fromListWith`解决方案（或基本等效的替代方案，如 using [`HashMap.fromListWith`](http://hackage.haskell.org/packages/archive/unordered-containers/0.2.3.0/doc/html/Data-HashMap-Lazy.html#v%3afromListWith)）。我会同意的。

`a`基本上，通过突变，您可以通过使用可变哈希表作为键和可变列表`b`作为值，在近乎线性的时间内完成此分组。然而，如果没有突变，情况会更糟，因为每个插入平衡的搜索树都是 O(log n); 这是因为“插入”意味着构建每个树节点的新副本，该副本通向您插入的元素进入的那个。并且您需要执行 n 次插入 - 这为您提供了`Map.fromListWith`函数的 O(n * log n) 边界有。提前对关联列表进行排序并不能从根本上改善这一点，因为排序也是 O(n * log n)。

因此，要改进 O(n * log n)，您需要具有突变的数据结构。我刚刚做了一个快速的谷歌，最好的选择是使用类似于[`hashtables`](http://hackage.haskell.org/package/hashtables)库的东西来实现标准的命令式算法（我从未尝试过，所以我不能保证它）。要使用它，您需要了解[`Control.Monad.ST`](http://www.haskell.org/ghc/docs/7.6.2/html/libraries/base-4.6.0.1/Control-Monad-ST.html)和[`Data.STRef`](http://www.haskell.org/ghc/docs/7.6.2/html/libraries/base-4.6.0.1/Data-STRef.html). monad 是 GHC 提供的`ST`一种技术，用于在纯函数中“内部”使用突变——它使用一些类型系统扩展来保证在所讨论的函数之外无法观察到副作用。 [HaskellWiki 有一些示例](http://www.haskell.org/haskellwiki/Monad/ST)，但可能需要一些学习和实践才能对这个感到满意。

我建议的另一件事是，如果您想`Data.Map`更好地理解或类似的库，请查看 Chris Okasaki 的*Purely Functional Data Structures*书（或[该书所基于的他的论文 (PDF)](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)）。它基于标准 ML 而不是 Haskell，数据结构不一样，阅读起来可能有点困难，但它是一本基础书籍。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T04:02:08.087

所以，我的解决方案过度使用了模式匹配，因为我实际上并不知道标准库中有哪些函数。

这个想法是，如果列表按键排序，那么您可以随时收集键值。为了执行检查是添加到第一个键值列表还是创建新条目的逻辑，我使用了模式和守卫来定义条件。并自由使用 cons 将值添加到列表中。

如果原始列表未排序，则有一个`sortBy`.

```
import Data.List
import Data.Ord

ls = [(2, 1), (1, 2), (1, 4), (1, 3), (2, 3)]

addval [] (k, v)= [(k, [v])]
addval ((k1, vals) : xs) (k2, v) | k1 == k2
  = ((k1, (v : vals)) : xs)
addval ls (k, v) = ((k, [v]) : ls)

convert ls = foldl addval [] (sortBy (comparing fst) ls) 
```

丑陋的代码，但它避免使用 Map。

# navigation - 带有导航到另一个视图的 Formpanel

> ID：15514494
> 
> 赞同：0
> 
> 时间：2013-03-20T02:58:41.020
> 
> 标签：navigation, sencha-touch-2, formpanel

我有一个表单面板。我需要从此表单面板导航另一个视图。我的视图是 Ext.form.Panel 的子类。我知道如何从 Ext.navigation.View 导航。但不知道如何从表单面板导航。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:57:02.697

创建视图实例，或者您可以获得预先存在的实例

```
var listContainer = Ext.create("App.view.ListContainer"); 
```

将实例添加到查看端口

```
Ext.Viewport.add(listContainer); 
```

将实例设置为具有一些过渡效果的活动对象

```
Ext.Viewport.animateActiveItem(listContainer, { type: 'slide', direction: 'left' }); 
```

# client - 使用 RMI 从客户端调用服务器上的方法

> ID：15514496
> 
> 赞同：1
> 
> 时间：2013-03-20T02:58:54.153
> 
> 标签：client, rmi

我已经获得了连接服务器的 URL 及其功能。

URL 示例：`rmi://(host):(port)/rul`e

功能示例：`reloadRule()`

基本上，我需要从客户端调用这个 reloadRule 函数。我尝试使用 java RMI 并创建 rmiClient 类和接口。

这是我的代码：

**界面**

```
import java.rmi.Remote;
     import java.rmi.RemoteException;

     public interface RmiServerIntf extends Remote{
           public void reloadRule() throws RemoteException;
     } 
```

**客户**

```
import java.rmi.Naming;

     public class RmiClient {
            RmiServerIntf obj = null; 

            public void reloadRule() { 
                 try { 
                   obj = (RmiServerIntf)Naming.lookup("rmi://localhost:8009/rule");
                   obj.reloadRule(); 
                 } catch (Exception e) { 
                   System.err.println("RmiClient exception: " + e); 
                   e.printStackTrace(); 
                 } 
            }     
     } 
```

**调用 rmiClient 的 Java 类**

```
// invoke RMI service

        // Create and install a security manager
        /*
        if (System.getSecurityManager() == null) {
            System.setSecurityManager(new NullRMISecurityManager());
        } */
        RmiClient cli = new RmiClient();
        cli.reloadRule();
        System.out.println("Reload Rule"); 
```

我仍然很困惑如何运行这个东西？我尝试运行调用 rmiClient 的类，并得到这个异常：

> java.security.AccessControlException：访问被拒绝 (java.lang.RuntimePermission setContextClassLoader) 在 java.security.AccessControlContext.checkPermission(AccessControlContext.java:374) 在 java.security.AccessController.checkPermission(AccessController.java:546) 在 java.lang .SecurityManager.checkPermission(SecurityManager.java:532) 在 java.lang.Thread.setContextClassLoader(Thread.java:1394) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141) 在 org.apache。 catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java: 174) 在 org.apache.coyote.http11.Http11Processor。org.apache.coyote.http11.Http11BaseProtocol 的进程（Http11Processor.java:874）$Http11ConnectionHandler.processConnection（Http11BaseProtocol.java:665） org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket（PoolTcpEndpoint.java:528）在 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81) 在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689) 在 java.lang.Thread .run(Thread.java:662) 线程“ContainerBackgroundProcessor[StandardEngine[Catalina]]”中的异常 java.security.AccessControlException：在 java.security.AccessControlContext.checkPermission(AccessControlContext.java 处拒绝访问 (java.lang.RuntimePermission setContext ClassLoader) :374) 在 java.security。AccessController.checkPermission(AccessController.java:546) 在 java.lang.SecurityManager.checkPermission(SecurityManager.java:532) 在 java.lang.Thread.setContextClassLoader(Thread.java:1394) 在 org.apache.catalina.core.ContainerBase $ContainerBackgroundProcessor.processChildren(ContainerBase.java:1574) at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1559) at java.lang.Thread.run(Thread.java:662)core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1559) at java.lang.Thread.run(Thread.java:662)core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1559) at java.lang.Thread.run(Thread.java:662)

可以请阐明一些光，并指出我正确的方向。谢谢。

* * *

**更新**

我已经删除了安全管理器并得到了这个异常：

```
 RmiClient exception: java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
    java.lang.ClassNotFoundException: org.springframework.remoting.rmi.RmiInvocationHandler (no security manager: RMI class loader disabled)
    java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
    java.lang.ClassNotFoundException: org.springframework.remoting.rmi.RmiInvocationHandler (no security manager: RMI class loader disabled)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at java.rmi.Naming.lookup(Naming.java:84) 
```

我的代码中缺少什么？这个错误是什么意思？

* * *

**更新 2**

我在库中包含 spring-2.5.4.jar。然后我得到了这个例外：

```
 RmiClient exception: java.lang.ClassCastException: $Proxy10 cannot be cast to admin.fsms.RmiServerIntf
      java.lang.ClassCastException: $Proxy10 cannot be cast to admin.fsms.RmiServerIntf 
```

问题的根源在这里：

```
 obj = (RmiServerIntf)Naming.lookup("rmi://localhost:8009/rule"); 
```

我应该在 rmi 客户端调用接口，对吗？为什么不能投？界面有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:31:22.467

您要么必须：

1.  在客户端安装 Spring JAR 文件（修复该问题`ClassNotFoundException`）

2.  使用代码库功能（同上），这也意味着恢复 SecurityManager，尽管您当然不应该自己编写：使用`RMISecurityManager`并编写适当的 .policy 文件，或者

3.  使用直接 RMI 而不是 Spring 来导出远程对象（以消除根本原因）。我对Spring一无所知，只是让你的远程对象扩展`UnicastRemoteObject`并将`rebind()`它自己扩展到注册表。

# c# - 如何在系统托盘中显示进度

> ID：15514497
> 
> 赞同：1
> 
> 时间：2013-03-20T02:59:19.640
> 
> 标签：c#, windows-phone-7, windows-phone-8, progress, system-tray

我正在尝试在系统托盘中显示进度。我用这个：

```
 ProgressIndicator pi = new ProgressIndicator();
    SystemTray.ProgressIndicator = pi;
    SystemTray.ProgressIndicator.IsIndeterminate = false; 
```

我遇到的问题是更改进度指示器的最大值。默认值似乎是一个，但我看不出有什么办法改变它。你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:03:15.407

ProgressIndicator 采用的是和`double`之间的值。`0``1`

如果您想将任何其他数字放入其中（例如`0`to `100`），您必须做的是`normalise`值，这会将它们带入 range `0-1`。

所以例如你会这样做：

```
double progress = 0.0;
double max = 100.0;

progress = 0.0/max;  // = 0.0
pi.Value = progress;

progress = 50.0/max; // = 0.5
pi.Value = progress;

progress = 100.0/max; // = 1.0
pi.Value = progress; 
```

并且您将输入 之间的值`0 and 1`。

这是一篇关于此功能[的好文章。](http://blogs.msdn.com/b/jaimer/archive/2011/06/04/system-tray-progress-indicator.aspx)

# vb.net - 如何使用 messageboxbuttons.yesno 清除文本框？

> ID：15514509
> 
> 赞同：0
> 
> 时间：2013-03-20T03:00:52.253
> 
> 标签：vb.net

我正在尝试使用 messageboxbuttons.yesno 清除文本框。如果他选择开始另一次转换，则清除文本框。我不知道有什么问题。公开课形式1

```
 Private Sub BtnFah_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnFah.Click
        Try
            Dim intFah As Integer

            intFah = CInt(TxtBoxTemp.Text)
            intFah = (intFah * 9) / 5 - 32
            MessageBox.Show(intFah.ToString & ControlChars.CrLf & "Would you like to start another temp conversion?", "Result", MessageBoxButtons.YesNo)
            If intFah = Windows.Forms.DialogResult.Yes Then
                TxtBoxTemp.Clear()
            ElseIf intFah = Windows.Forms.DialogResult.No Then

            End If
        Catch
            MessageBox.Show("Would you like to start another temp conversion?", "System Error", MessageBoxButtons.YesNo)

        End Try
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:05:12.973

它[读起来](http://answers.yahoo.com/question/index?qid=20071203101453AAxjvrS)好像`MessageBox.Text = ""`，但我无权访问 Visual Basic，所以我不能确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:08:08.147

您没有存储消息框中的结果....行：

```
If intFah = Windows.Forms.DialogResult.Yes 
```

不正确，因为您试图将计算的温度与对话结果进行比较。

如果您遵循[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.dialogresult%28v=vs.100%29.aspx)的示例，那么您应该了解如何从消息框中捕获结果，然后执行适当的操作。

您在 VB 上下文中使用 Clear() 方法也可以，另一种方法是：

```
TxtBoxTemp.Text = String.Empty 
```

但无论哪种方式都可以。

HTH，弥敦道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:22:52.503

`MessageBox.Show()`直接放在里面就好了`If`

```
Private Sub BtnFah_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnFah.Click
    Try
        Dim intFah As Integer
        intFah = CInt(TxtBoxTemp.Text)
        intFah = (intFah * 9) / 5 - 32
        If MessageBox.Show(intFah.ToString & ControlChars.CrLf & "Would you like to start another temp conversion?", "Result", MessageBoxButtons.YesNo) = Windows.Forms.DialogResult.Yes Then
            TxtBoxTemp.Text = String.Empty
        Else

        End If
    Catch
        MessageBox.Show("Would you like to start another temp conversion?", "System Error", MessageBoxButtons.YesNo)
    End Try
End Sub 
```

# netbeans - Zendframework2 和 Netbeans 自动建议（智能）问题？

> ID：15514511
> 
> 赞同：0
> 
> 时间：2013-03-20T03:01:13.410
> 
> 标签：netbeans, zend-framework2

我正在尝试使用 Zend framework2 创建登录应用程序。为此，我正在使用 netbeans。由于某种原因，我不知道 intelsense 没有在 netbeans IDE 中显示。我在 inlcude 路径中包含了 zend 库。但是对于注释，我没有得到自动建议，但是对于其他事情，netabeans 显示了自动建议方法。为避免混淆，我上传了下图。

![在此处输入图像描述](../Images/96c43c1d470c5e27af5247dd69e52973.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:08:09.623

您使用的是 Netbeans 7.2 吗？你下载了正确的版本吗？

引用来自网站：

> 首先不同的是代码完成中注释的外观。如您所见，有一个新的注释图标和一个注释类型。因为我们有很多带有自己注释的模块，所以我们在代码完成窗口中根据它们的类型来区分它们。我们支持以下注释：
> 
> ApiGen（遗留 PHPDoc 注释）、PHPUnit、Doctrine 2（ORM 和 ODM）和 Symfony 2。

[点击这里查看](https://blogs.oracle.com/netbeansphp/entry/brand_new_annotations_support)

# multidimensional-array - 如何将两个整数并排放置？

> ID：15514515
> 
> 赞同：1
> 
> 时间：2013-03-20T03:01:49.700
> 
> 标签：multidimensional-array, number-formatting

假设我们有两个二维数组。我想读取第一个数组的每个成员并返回两个相邻的数字，第一个是列号，第二个是程序从第一个数组中读取的确切数字。例如，如果第一个数组是：
**A= {1 2 3}
{4 5 6}
{7 8 9}**
我希望返回 **B={11 22 33} {14 25 36} {17 28 39}**。问题是当我想将列索引号和确切数字放在一起时，我有错误。另一件事是我需要这个输出作为另一个代码的输入，这意味着输出应该是数字而不是字符串。提前致谢。

```
for (int i=0;i<3;i++){
   for (int j=0;j<3;j++){   
      B[i][j]= jA[i][j];
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:07:23.377

您将要添加乘以 10 的索引。所以类似于（在伪代码中）：

```
int arr1 = {1 2 3} {4 5 6} {7 8 9};
int arr2;

for (int i=0;i<arr1.length;i++){
  for (int j=0; j<arr1[i].length;j++){
     arr2[i][j] = ((j+1)*10) + arr1[i][j];
  }
}

return arr2 
```

这仅在数组被限制为数字 0 到 9 时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:09:33.947

```
for (int i=0; i<3;i++){
   for (int j=0; j<3; j++){   
      B[i][j] = 10*(j+1) + A[i][j];
   }
} 
```

注意：如果 A 中有两位数值，则执行 100* 而不是 10*，或者如果是三位数值，则执行 1000* 等。

# environment-variables - 共享主机上的 Sass 和 Compass 设置

> ID：15514517
> 
> 赞同：0
> 
> 时间：2013-03-20T03:02:01.410
> 
> 标签：environment-variables, sass, compass-sass

我想我会尝试使用 SASS，但即使安装它也遇到了问题（在 Bluehost 共享主机上，它不完全是 Ritz）。

这是我检查它是否安装的结果：

```
username [~/public_html/sites/all/themes]# sass -v
Sass 3.2.7 (Media Mark)
username [~/public_html/sites/all/themes]# compass -v
Unable to load Sass. Please install it with one of the following commands:
gem install sass --pre
/usr/lib64/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- sass (LoadError)
from /usr/lib64/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/../lib/compass/dependencies.rb:6
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/../lib/compass.rb:5:in `require'
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/../lib/compass.rb:5
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/../lib/compass.rb:4:in `each'
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/../lib/compass.rb:4
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/compass:20:in `require'
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/compass:20
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/compass:8:in `fallback_load_path'
from /home7/username/ruby/gems/gems/compass-0.12.2/bin/compass:19 
```

我尝试卸载，以不同的顺序重新安装，按照错误消息中的建议使用 --pre 标志安装 Sass，自行安装 compass 并让 sass 由 compass 安装，结果相同。

我还没有使用这些工具，所以我不知道会发生什么，但我确实必须更新我的 $PATH 才能让“sass”之类的命令正常工作，所以我怀疑 compass 无法找到 sass 或某物。发帖希望这对于有经验的人来说是一个明智的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T18:08:29.387

参考[https://my.bluehost.com/cgi/help/365](https://my.bluehost.com/cgi/help/365)并添加：

```
export GEM_HOME=$HOME/ruby/gems
export GEM_PATH=$GEM_HOME:/usr/lib/ruby/gems/1.8
export GEM_CACHE=$GEM_HOME/cache
export PATH=$PATH:$HOME/ruby/gems/bin 
```

我的 .bashrc 为我解决了这个确切的错误。

# java - Java接口如何是抽象的？

> ID：15514519
> 
> 赞同：1
> 
> 时间：2013-03-20T03:02:23.403
> 
> 标签：java, interface, abstract

我最近意识到可以在 Java 中像这样声明接口。

```
public abstract interface Foo
{
    // ... body
} 
```

为什么这是一个有效的语法？从语义上讲，它对我没有任何意义（即 an`interface`已经是*abstract*，不是吗？）。声明的接口和不声明的接口之间有什么区别`abstract`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:07:48.067

它不是必需的，因为它隐含地存在于所有接口中。包含与否没有区别。包含它很奇怪，所以我会避免它。

# ios - UICollectionView - 单元格之间的距离？

> ID：15514526
> 
> 赞同：31
> 
> 时间：2013-03-20T03:02:51.360
> 
> 标签：ios, objective-c, uicollectionview, storyboard, uicollectionviewflowlayout

我正在使用单元格宽度为 67 的 UICollectionView，现在我正在使用流布局。

我连续有 3 个单元格，单元格之间有 30px 的空间。如何使该距离更小，以便我可以连续放置四个单元格？这个方法和它有关系吗？

```
 - (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section
 {
    return UIEdgeInsetsMake(10, 10, 10, 10);
 } 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-20T04:13:37.837

这个 `UICollectionViewFlowLayoutDelegate`方法可以帮助你..

```
- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionView *)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section  
  {
    return 10; // This is the minimum inter item spacing, can be more
  } 
```

如果您需要更多空间来安排单元格，请再`edgeInsets`调整

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-10-13T11:53:17.493

您可以使用以下属性配置单元格或行之间的间距。
1) 用于设置行之间的空间。

```
[self.collectionView setMinimumLineSpacing:5]; 
```

2）用于设置项目/单元格之间的空间。

```
[self.collectionView setMinimumInteritemSpacing:5]; 
```

您也可以从 InterfaceBuilder(IB) 配置它。只需从 storyboard/Xib 文件中选择 UICollectionView 并单击下图中指定的 **Size Inspector 。**[![在此处输入图像描述](../Images/aa7d9d0a221ca0ace1490f55cd3e4565.png)](https://i.stack.imgur.com/QYJV3.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-10-21T13:29:15.960

从此。[_](https://stackoverflow.com/a/23542017/2684720) 您需要更改*minimumInteritemSpacing*和*minimumLineSpacing*。

```
UICollectionViewFlowLayout *flow = [[UICollectionViewFlowLayout alloc] init];
flow.itemSize = CGSizeMake(cellWidth, cellHeight);
flow.scrollDirection = UICollectionViewScrollDirectionHorizontal;
flow.minimumInteritemSpacing = 0;
flow.minimumLineSpacing = 0;
mainCollectionView.collectionViewLayout = flow; 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-20T03:04:38.443

不，它没有。只需更改布局的`minimumInteritemSpacing`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-09-09T05:14:36.650

您可以使用委托方法，例如：- 用于更改部分中单元格之间的空间。

```
- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionView *)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section 
```

用于显示不同部分的单元格之间的顶部、底部 y 填充。

```
- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section 
```

// 布局：设置边缘 //为单元格设置插图

```
- (UIEdgeInsets)collectionView:
(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section 
//top,left,botttom,right 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-21T09:55:42.770

**迅捷3.0**

```
 func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, minimumLineSpacingForSectionAt section: Int) -> CGFloat {

    if DEVICE_IDIOM == .pad {
        return 15.0
    }
    else {
        return 10.0
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-16T03:37:21.020

我遇到过同样的问题..

就我而言，我需要一个矩形单元格。

为了达到预期的效果，我使用了*UICollectionViewDelegateFlowLayout*。

这是我实现的方法之一：

```
- (CGSize)collectionView:(UICollectionView *)collectionView
                  layout:(UICollectionViewLayout*)collectionViewLayout
  sizeForItemAtIndexPath:(NSIndexPath *)indexPath;
{
    CGFloat width = CGRectGetWidth(self.view.frame)/3.0f;
    return CGSizeMake(width, (width * 1.1f));
} 
```

这对我来说很好！我希望它可以帮助某人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-29T11:32:19.347

**斯威夫特 4.2**

```
func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, minimumInteritemSpacingForSectionAt section: Int) -> CGFloat {
   return 10
}

func collectionView(_ collectionView: UICollectionView, layout
            collectionViewLayout: UICollectionViewLayout,
                            minimumLineSpacingForSectionAt section: Int) -> CGFloat {

 return 10
} 
```

# php - php插入文件

> ID：15514528
> 
> 赞同：0
> 
> 时间：2013-03-20T03:03:02.257
> 
> 标签：php, mysql

我正在为学校编写一个 php 文件。我们必须填写表格并将名字、姓氏、电子邮件和照片添加到数据库中。我可以将名称、电子邮件添加到数据库，但无法将图像名称添加到数据库。这是部分php代码和一些html。如果有人可以请看一下并提供一些帮助。提前谢谢了。

```
<?php include("db_connect.php");?>
<?php  // select the database in which to add a table
mysql_select_db("final_exam_db",$con);

$sql ="INSERT INTO drivers_0115061 (ln,fn,month,day,year,photo,email) 
VALUES ('".$_POST["ln"]."',
    '".$_POST["fn"]."',
    '".$_POST["month"]."',
    '".$_POST["day"]."',
    '".$_POST["year"]."',
    '".$_POST['file']['photo']."',
    '".$_POST["email"]."'
    )";

//$sql="INSERT INTO people (fn,ln,dob,city,prov,pc,gender,hc,nod) VALUES ('steve','douglas',1234567,'winnipeg','manitoba','r3p 6g5','m','grey',2)";

//echo $sql;

mysql_query($sql, $con);
echo mysql_error();
?>

<?php include("db_close.php");?>

HTML:
<td>
Picture
</td>
<td>
<input type="hidden" name="MAX_FILE_SIZE" value="10000000"/>
<input type="file" id="photo" name="photo"/>
</td>
</tr>
<tr>
<td> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T03:55:59.863

做不同的出路

```
//be sure to add enctype in your form tag 
<form action="upload_file.php" method="post" enctype="multipart/form-data">
<input type="file" name="file" id="file">
</form> 
```

首先将您的路径和文件名处理到数据库中

```
 $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 20000)
    && in_array($extension, $allowedExts))
    {
    if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
    else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
    {
    echo $_FILES["file"]["name"] . " already exists. ";
    }
    else
    {
    //here is what actually you need to care , set your upload path from here
    move_uploaded_file($_FILES["file"]["tmp_name"],
    "your/upload/path/" . $_FILES["file"]["name"]);
    echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
    }
    }
    }
    else
    {
    echo "Invalid file";
    } 
```

如果一切运行良好，这意味着您在这里成功上传了一个文件，您需要使用您的文件名保存您的数据库记录

每当您想调用文件时，请从数据库中获取文件名

```
<img href="your/path/name/<?php echo $filenamefromdatabase; ?>" /> 
```

# c# - 从集合中填充类数据的操作或接口

> ID：15514538
> 
> 赞同：1
> 
> 时间：2013-03-20T03:05:03.090
> 
> 标签：c#, dictionary, interface, delegates, action

我有一个包含 x,y,z 坐标的顶点类。此类具有多个实例，这些实例包含在以下字典中：

```
// Vertex Collection
var Vertexs = new Dictionary<int, Vertex>();

public class Vertex
{
    public double x, y, z;
} 
```

我还有三个课程如下：

```
public abstract class Element
{ }

public class TRI : Element
{
    public int vertex1, vertex2, vertex3;
    public double v1x, v1y, v1z;
    // and so on for vertex 2 & 3
}

public class QUAD : Element
{
    public int vertex1, vertex2, vertex3, vertex4;
    public double v1x, v1y, v1z;
    // and so on for vertex 2, 3 & 4
} 
```

TRI 和 QUAD 类都有多个实例。这些包含在字典中，如下所示：

```
// Element Collection
var Elements = new Dictionary<int, Element>(); 
```

元素键（int 值）将与命名的 TRI/QUAD 字段等重合`vertex1`。我不知道元素类型类实例化时顶点的坐标。所以创建字典后，我需要循环遍历并从 Vertex 字典中拉取顶点数据，并用它来填补空白。

```
foreach (var Elm in Elements)
{
    // this is where I need help.
} 
```

QUAD 元素需要从 Vertexs 字典中拉出四个顶点，TRI 元素需要拉出三个。所以我的 TRI 函数应该是这样的。

```
public void fetch_vertex_coords(Vertex vertex1, Vertex vertex3, Vertex vertex3)
{
    v1x = vertex1.x; v1y = vertex1.y; v1z = vertex1.z;
    v2x = vertex2.x; v2y = vertex2.y; v2z = vertex2.z;
    v3x = vertex3.x; v3y = vertex3.y; v3z = vertex3.z;
} 
```

问题是 QUAD 也需要调用 void 函数，但它将有 4 个输入而不是 3 个。

我对接口和所有委托类型的经验很少（只有对我没有帮助的简单书籍示例），所以我真的不知道如何继续。我需要一个函数“fetch_vertex_coords”，它需要 3 个参数，一个需要 4 个参数，我不知道这里是否应该使用接口或操作（委托）。

我是否因为使用“元素”字典值作为元素而让自己很难做到这一点？仅供参考，我的抽象类“元素”实际上是空白的，因为我不知道是否应该用字段填充它，因为派生类已经有字段。对此的任何评论也将不胜感激。

总是有创建更多字典的后备；一个用于 TRI，一个用于 QUAD，然后在我使用简单的方法填充顶点数据后将它们组合起来。但是我已经走到了这一步，我想学习一些关于接口和/或委托的实用知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:21:38.787

为什么要 TRI 和 QUAD 继承 Element？正如你所说，Element是空的，这意味着TRI和QUAD没有任何共同的接口。如果您设法用 TRI 和 QUAD 填充该词典，您将如何使用该词典？拿一个项目，一个或另一个，到处都有“if”语句？您应该考虑如何使用它们。这将帮助您提取接口（如果有）。否则，我看不出为什么您应该尝试强制两种类型继承一种基本类型。您可能只使用两个字典`Dictionary<int, TRI> and Dictionary<int, QUAD>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:33:42.673

好吧，如果您考虑一下 TRI 和 QUAD 的相同之处，它们都存储顶点的“列表”，除了 TRI 有三个而 QUAD 有四个。与其拥有两个具有不同数量的离散变量 v1、v2、v3 的类，为什么不只拥有一个包含 Vertex 对象数组的具体 Element 类呢？这可能允许您编写更轻松地处理顶点的代码。您不必担心是否有 TRI 或 QUAD 并调用不同的方法，您只需查看数组的长度并循环多次。

# iphone - UITableViewCell textLabel 高度在选择/突出显示相同的单元格后重置

> ID：15514541
> 
> 赞同：0
> 
> 时间：2013-03-20T03:05:13.700
> 
> 标签：iphone, uitableview, height, didselectrowatindexpath, textlabel

在重新选择（触摸而不抬起手指）已选择的单元格时，我遇到了关于 UITableViewCell 的 textLabel 属性的问题。

我在 textLabel 正下方的背景中添加了一个自定义 contentView，它具有动态高度（包括单元格）和 textLabel 的背景，其高度始终相同（50.0f-ish）。

我正在使用 beginUpdates 和 endUpdates 方法对选择进行动画处理，并更改框架以防止 textLabel 在更新发生后立即在单元格中居中；将其大致保持在背景的相同范围内。选择不同的单元格时没有问题，并且 textLabel 保持在应该在的顶部。

现在的主要问题是当用户再次在选定的单元格上触摸手指（不抬起手指）时，textLabel 会根据单元格的高度变化而居中。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
        DetailView *detailView = // Create detail view

        // Add UIImageView from content to cell --------------------
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

        // Change textLabel colors, fontSize, and shadow properties
        // Create CustomContentView *ccView = nil;

        // ------
        // Remove / Hide any existing CustomContentViews
        // --- Code here
        // -------

        switch (hasImageInCustomView) {
        case YES:
            image = _imageInCustomView;
            image = NO;

            if (selectedIndexPath.row != indexPath.row) {
                [tableView beginUpdates];
                [tableView endUpdates];
            }

            CGRect frame = cell.textLabel.frame;
                    frame.size.height = 50.0f;
                    cell.textLabel.frame = frame;

            return;
        break;
        default:
            image = [detailView getImage];
        break;
        }

        // ----
        // Calculate height for image and add that to heightForExpandedRow property
        // -- Code here...
        // ----

        [tableView beginUpdates];
        [tableView endUpdates]; 

        // Add subview with UIImageView
        customContentView = [[CustomContentView alloc] initWithFrame:(CGRect){0, 0, kWidth, dynamicExpandedRow}];
        contentView.clipsToBounds = YES;
        [cell.contentView addSubview:customContentView];
        [cell.contentView sendSubviewToBack:customContentView];
        [customContentView setContentImage:image];

        CGRect frame = cell.textLabel.frame;
        frame.size.height = 50.0f;
        cell.textLabel.frame = frame;

} 
```

我使用的是 iOS 3.0，所以我认为 didHighlightRowAtIndexPath: 不会起作用，我想知道是否有任何委托方法在调用 beginUpdates/endUpdates 后重置 textLabel 框架。

我已经登录了框架更改，它像这样出现：

**在 beginUpdates/endUpdates 被调用之前**

```
<UILabel: 0x4e55500; frame = (10 0; 250 199); text = 'Some Text Goes Here...'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x4e55570>> 
```

**在调用 beginUpdates/endUpdates 并手动更改帧之后**

```
<UILabel: 0x4e55500; frame = (10 0; 250 50); text = 'Some Text Goes Here...'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x4e55570>> 
```

在调用这两种方法之前，高度显示为 199，之后显示为 50。但是，无论何时重新选择选定的单元格，textLabel 都会在单元格中保持垂直居中，而不管强制帧更改如何。

如果有人可以提供帮助，我将不胜感激。

链接到图片示例 - > [http://i50.tinypic.com/2r6o5k5.jpg](http://i50.tinypic.com/2r6o5k5.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:58:04.540

您正在更改正确选择单元格时的高度`UILabel`，然后在更改 UILabel 高度之前添加一个条件。

即最初 selectedIndexRow 将是-1。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
//Check if we are selecting the same cell
        if(selectedIndexRow != indexPath.row){
           if(selectedIndexRow != -1){

        //deselect the previous cell
        }

            selectedIndexRow = indexPath.row;

        //preform your action

        }
    } 
```

当您检查 selectedIndex 时，也添加上述条件..您不需要更改很多代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:44:39.620

试试这个：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 50;
} 
```

您必须增加单元格高度，因为您使用的是默认标签而不是自定义标签

# php - 从 YouTube 提要解析 XML（没有 Zend）

> ID：15514544
> 
> 赞同：0
> 
> 时间：2013-03-20T03:05:28.527
> 
> 标签：php, xml, parsing, youtube, xml-namespaces

我需要从这样的提要中获取非常具体的值：

```
http://gdata.youtube.com/feeds/api/videos/iIp7OnHXBlo 
```

我必须从这些**格式奇特的 XML**提要中读取的一些节点是：

```
<title type="text">Uploading YouTube Videos with the PHP Client Library</title>

<media:content url="http://www.youtube.com/v/iIp7OnHXBlo?version=3&f=videos&app=youtube_gdata" type="application/x-shockwave-flash" medium="video" isDefault="true" expression="full" duration="466" yt:format="5"/>
<media:content url="rtsp://v3.cache7.c.youtube.com/CiILENy73wIaGQlaBtdxOnuKiBMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp" type="video/3gpp" medium="video" expression="full" duration="466" yt:format="1"/>

<media:description type="plain">Jochen Hartmann demonstrates the basics of how to use the PHP Client Library with the YouTube Data API. [...]</media:description>

<media:thumbnail url="http://i.ytimg.com/vi/iIp7OnHXBlo/0.jpg" height="360" width="480" time="00:03:53"/>
<media:thumbnail url="http://i.ytimg.com/vi/iIp7OnHXBlo/1.jpg" height="90" width="120" time="00:01:56.500"/>
<media:thumbnail url="http://i.ytimg.com/vi/iIp7OnHXBlo/2.jpg" height="90" width="120" time="00:03:53"/>
<media:thumbnail url="http://i.ytimg.com/vi/iIp7OnHXBlo/3.jpg" height="90" width="120" time="00:05:49.500"/>
<yt:duration seconds="466"/> 
```

当然，为 GData 使用**Zend Framework API**是绝对不可能的（**1225 个文件和 49 MB**只是为了解析 XML 文件？是的，当然……我的主。

我需要使用***lastRSS***解析器或**来自 PHP 的任何内置 XML 函数**，就像任何头脑正常的人一样。提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T03:08:18.690

几周前我遇到了同样的问题。通过添加`?format=5&alt=json`，您可以获得 JSON 格式的回复，然后您可以轻松地在 PHP 中解析

```
$url = 'http://gdata.youtube.com/feeds/api/videos/iIp7OnHXBlo?format=5&alt=json';
$response = file_get_contents($url);

$obj = json_decode($response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:28:17.967

另一个解决方案是使用这个优秀的 xml2Array 类：它基本上会将 xml 转换为超级易于使用的关联数组。

例如，您发布的 youtube xml 变为：

```
Array
(
    [ENTRY] => Array
    (
        [XMLNS] => http://www.w3.org/2005/Atom
        [XMLNS:MEDIA] => http://search.yahoo.com/mrss/
        [XMLNS:GD] => http://schemas.google.com/g/2005
        [XMLNS:YT] => http://gdata.youtube.com/schemas/2007
        [ID] => Array
            ( 
```

等等。

```
class xml2Array
{

    var $stack=array();
    var $stack_ref;
    var $arrOutput = array();
    var $resParser;
    var $strXmlData;

    function push_pos(&$pos)
    {
            $this->stack[count($this->stack)]=&$pos;
            $this->stack_ref=&$pos;
    }

    function pop_pos()
    {
            unset($this->stack[count($this->stack)-1]);
            $this->stack_ref=&$this->stack[count($this->stack)-1];
    }

    function parse($strInputXML)
    {
            $this->resParser = xml_parser_create ();
            xml_set_object($this->resParser,$this);
            xml_set_element_handler($this->resParser, "tagOpen", "tagClosed");

            xml_set_character_data_handler($this->resParser, "tagData");

            $this->push_pos($this->arrOutput);

            $this->strXmlData = xml_parse($this->resParser,$strInputXML );
            if(!$this->strXmlData)
            {
                    die(sprintf("XML error: %s at line %d",
                    xml_error_string(xml_get_error_code($this->resParser)),
                    xml_get_current_line_number($this->resParser)));
            }

            xml_parser_free($this->resParser);

            return $this->arrOutput;
    }

    function tagOpen($parser, $name, $attrs)
    {
            if (isset($this->stack_ref[$name]))
            {
                    if (!isset($this->stack_ref[$name][0]))
                    {
                            $tmp=$this->stack_ref[$name];
                            unset($this->stack_ref[$name]);
                            $this->stack_ref[$name][0]=$tmp;
                    }
                    $cnt=count($this->stack_ref[$name]);
                    $this->stack_ref[$name][$cnt]=array();
                    if (isset($attrs))
                            $this->stack_ref[$name][$cnt]=$attrs;
                    $this->push_pos($this->stack_ref[$name][$cnt]);
            }
            else
            {
                    $this->stack_ref[$name]=array();
                    if (isset($attrs))
                            $this->stack_ref[$name]=$attrs;
                    $this->push_pos($this->stack_ref[$name]);
            }
    }

    function tagData($parser, $tagData)
    {
            if(trim($tagData))
            {
                    if(isset($this->stack_ref['DATA']))
                            $this->stack_ref['DATA'] .= $tagData;
                    else
                            $this->stack_ref['DATA'] = $tagData;
            }
    }

    function tagClosed($parser, $name)
    {
            $this->pop_pos();
    }
} 
```

# java - 引起：java.lang.NoSuchFieldError: NULL

> ID：15514546
> 
> 赞同：0
> 
> 时间：2013-03-20T03:05:57.917
> 
> 标签：java, spring, ehcache

我有一个带有 spring 的 ehcache 测试项目。这些是服务：

```
public interface HelloService {
    String getMessage(String message);
    String getMessageUpdate(String message);
    public void getCacheEvict(String message);
} 
```

服务内涵：

```
@Service("helloService")
public class HelloServiceImpl implements HelloService {
    @Cacheable("message")
    public String getMessage(String message) {
        System.out.println("Cacheable");
        return message;
    }
    @CachePut("message1")
    public String getMessageUpdate(String message) {
        System.out.println("Cache put");
        return message;
    }
    @CacheEvict(value="message", allEntries=true)
    public void getCacheEvict(String message) {
        System.out.println("Cache evict");
    }
} 
```

这是 pom.xml：

```
 <modelVersion>4.0.0</modelVersion>

  <groupId>com.mycompany</groupId>
  <artifactId>EhCache</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>EhCache</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-core</artifactId>
        <version>2.6.5</version>
    </dependency>

    <dependency>
        <groupId>com.googlecode.ehcache-spring-annotations</groupId>
        <artifactId>ehcache-spring-annotations</artifactId>
        <version>1.2.0</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.2.RELEASE</version>
        <type>jar</type>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>

    <dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
    </dependency>

  </dependencies> 
```

这是 ehcache-context.xml ：

```
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:cache="http://www.springframework.org/schema/cache"
     xmlns:ehcache="http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring"
     xmlns:context="http://www.springframework.org/schema/context" 
     xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/context 
     http://www.springframework.org/schema/context/spring-context-3.1.xsd
     http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring
     http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd
     http://www.springframework.org/schema/cache 
     http://www.springframework.org/schema/cache/spring-cache.xsd 
    ">

    <context:component-scan base-package="com.mycompany.ehcache.service" />

    <ehcache:annotation-driven cache-manager="ehCacheManager"  />

    <bean id="ehCacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" />

</beans> 
```

最后是junit测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "file:src/main/resources/ehcache-context.xml")
@Service("helloService")
public class NewEmptyJUnitTest {

    @Autowired
    private HelloService hs;

    @Test
    public void testCache() {
        hs.getMessage("pacans");
    }   
} 
```

每次我运行junit测试时，程序都会抛出异常：

```
SEVERE: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1815b417] to prepare test instance [com.mycompany.ehcache.NewEmptyJUnitTest@38e25e5b]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'helloService' defined in file [/Users/urijvoskresenskij/NetBeansProjects/EhCache/target/classes/com/mycompany/ehcache/service/HelloServiceImpl.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.googlecode.ehcache.annotations.config.internalEhCacheCachingAdvisor': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 30 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.googlecode.ehcache.annotations.config.internalEhCacheCachingAdvisor': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:86)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:100)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:86)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:68)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:359)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 43 more
Caused by: java.lang.NoSuchFieldError: NULL
    at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:85)
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:224)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:200)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 57 more 
```

我对异常没有任何想法，相关问题的答案也没有用。也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:42:06.503

尝试`@Service("helloService")`从您的测试中删除。这是一项测试，但不是一项服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T04:56:49.947

条目[nosuchfielderror-when-trying-to-run-a-junit-test-with-spring](https://stackoverflow.com/questions/7688395/nosuchfielderror-when-trying-to-run-a-junit-test-with-spring/22523690#22523690)和[spring-java-lang-nosuchfielderror-null](https://stackoverflow.com/questions/19906959/spring-java-lang-nosuchfielderror-null)似乎对同一问题有疑问。该错误很可能是由于从您的依赖项导入的 JUnit 版本冲突。我有同样的问题，我发现它是由 org.jmock:jmock-junit4 的传递依赖引起的。当我用 org.jmock:jmock 替换它时，它已修复。

# javascript - AJAX 结果到一个 而不是一个

> ID：15514549
> 
> 赞同：0
> 
> 时间：2013-03-20T03:06:09.783
> 
> 标签：javascript, html, ajax

我正在通过在线教程学习 AJAX，并且正在尝试使用代码。

以下是教程中的代码：

```
<body>
<script language="javascript" type="text/javascript">

function ajaxFunction(){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        document.myForm.time.value = ajaxRequest.responseText;
    }
}
ajaxRequest.open("POST", "serverTime.php", true);
ajaxRequest.send(null); 
}

</script>

<form name='myForm'>
Name: <input type='text' onChange="ajaxFunction();" name='username' /> <br />
<!--  *******  this is what I want to work with: ****-->   <input type='text' name='time' />
</form>
</body>
</html> 
```

我希望将结果打印到一个简单的`<p>`标签而不是`<input>`. 我尝试了以下方法，但没有奏效：

```
<p name="time"></p> 
```

我究竟做错了什么？

**编辑**

根据以下答案，我将代码更改为：

```
 ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
                var txtNode = document.createTextNode(ajaxRequest.responseText);
                document.getElementById("time").appendChild(txtNode);
    } 
```

和

```
<p id="time"></p> 
```

我仍然无法让它工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:08:07.690

段落元素不能有`name`属性，需要使用 an`id`来代替。这意味着您还应该使用`document.getElementById("time")`而不是`document.myForm.time`.

编辑你的 JavaScript：

```
if(ajaxRequest.readyState == 4) {
    var txtNode = document.createTextNode(ajaxRequest.responseText);
    document.getElementById("time").appendChild(txtNode);
} 
```

还有你的 HTML：

```
<p id="time"></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:11:49.683

您只能通过名称访问表单中的 input、select 和 textarea 标签，而不是 p 标签（或任何其他标签）。您甚至不能在 p 标签中拥有 name 属性。

```
document.myForm.time.value = ajaxRequest.responseText; 
// time should be a input tag with name time in order for this code to work 
```

而不是这样做

```
<p id="time"></p> 
```

并在您的 javascript 代码中

```
document.getElementById("time").innerHTML = ajaxRequest.responseText; 
```

# linux - 使用awk混合两个文件

> ID：15514550
> 
> 赞同：0
> 
> 时间：2013-03-20T03:06:20.863
> 
> 标签：linux, awk

我有两个制表符分隔的文件

`file1.txt`

```
field1
field2
field3 
```

`file2.txt`

```
field1   value f11
field1   value f12
field1   value f13
field2   value f21
field2   value f22
field2   value f23
field3   value f31 
```

我想要输出

```
field1   value f11, value f12 , valuef13
field2   value f21, value f22 , valuef23
field3   value f31 
```

我正在尝试这个

```
awk -F"\t" 'NR==FNR{a[$1] = $1;next} { print a[$1]  }' file1.txt file2.txt 
```

它空空如也

如果 filds 在 file1 中而不在 file2 中，那么应该是空白

更新：

这是我终端的输出

```
 ubuntu@ubuntu:/mnt/coding/awk$ cat f1.txt 
    field1
    field2
    field3
    field9

    ubuntu@ubuntu:/mnt/coding/awk$ cat f2.txt 
    field1  value f11
    field1  value f12
    field1  value f13
    field2  value f21
    field2  value f22
    field2  value f23
    field3  value f31

    ubuntu@ubuntu:/mnt/coding/awk$ awk -F"\t" 'NR==FNR{a[$1] = a[$1]", "$2;next}{gsub("^,","",a[$1]);print $1"\t"a[$1]}' f2.txt f1.txt
    field1  
    field2  
    field3  
    field9  

    ubuntu@ubuntu:/mnt/coding/awk$ awk --version
GNU Awk 3.1.8
Copyright (C) 1989, 1991-2010 Free Software Foundation. 
```

更新 2：

```
ubuntu@ubuntu:/mnt/coding/awk$ od -xcb f1.txt
0000000    6966    6c65    3164    660a    6569    646c    0a32    6966
          f   i   e   l   d   1  \n   f   i   e   l   d   2  \n   f   i
        146 151 145 154 144 061 012 146 151 145 154 144 062 012 146 151
0000020    6c65    3364    660a    6569    646c    0a39    000a
          e   l   d   3  \n   f   i   e   l   d   9  \n  \n
        145 154 144 063 012 146 151 145 154 144 071 012 012
0000035
ubuntu@ubuntu:/mnt/coding/awk$ od -xcb f2.txt
0000000    6966    6c65    3164    2020    6176    756c    2065    3166
          f   i   e   l   d   1           v   a   l   u   e       f   1
        146 151 145 154 144 061 040 040 166 141 154 165 145 040 146 061
0000020    0a31    6966    6c65    3164    2020    6176    756c    2065
          1  \n   f   i   e   l   d   1           v   a   l   u   e    
        061 012 146 151 145 154 144 061 040 040 166 141 154 165 145 040
0000040    3166    0a32    6966    6c65    3164    2020    6176    756c
          f   1   2  \n   f   i   e   l   d   1           v   a   l   u
        146 061 062 012 146 151 145 154 144 061 040 040 166 141 154 165
0000060    2065    3166    0a33    6966    6c65    3264    2020    6176
          e       f   1   3  \n   f   i   e   l   d   2           v   a
        145 040 146 061 063 012 146 151 145 154 144 062 040 040 166 141
0000100    756c    2065    3266    0a31    6966    6c65    3264    2020
          l   u   e       f   2   1  \n   f   i   e   l   d   2        
        154 165 145 040 146 062 061 012 146 151 145 154 144 062 040 040
0000120    6176    756c    2065    3266    0a32    6966    6c65    3264
          v   a   l   u   e       f   2   2  \n   f   i   e   l   d   2
        166 141 154 165 145 040 146 062 062 012 146 151 145 154 144 062
0000140    2020    6176    756c    2065    3266    0a33    6966    6c65
                  v   a   l   u   e       f   2   3  \n   f   i   e   l
        040 040 166 141 154 165 145 040 146 062 063 012 146 151 145 154
0000160    3364    2020    6176    756c    2065    3366    0a31    000a
          d   3           v   a   l   u   e       f   3   1  \n  \n
        144 063 040 040 166 141 154 165 145 040 146 063 061 012 012
0000177
ubuntu@ubuntu:/mnt/coding/awk$ 
```

其他：

```
awk -F"\t" 'NR==FNR{a[$1] = a[$1]", "$2; print "["$1"/"$2"]"; next}{gsub("^,","",a[$1]);print $1"\t"a[$1]}' f2.txt f1.txt
[field1  value f11/]
[field1  value f12/]
[field1  value f13/]
[field2  value f21/]
[field2  value f22/]
[field2  value f23/]
[field3  value f31/]
[/]
field1  
field2  
field3  
field9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:18:30.333

这是*一种*可能的解决方案：

```
NR==FNR{a[$1]=a[$1]", "$2;next}{gsub("^,","",a[$1]);print $1"\t"a[$1]} 
```

这通过`file2`首先存储键和值，然后处理 file1 以输出它们来工作。以下（略微格式化的）成绩单显示了这一点：

```
pax> cat file1.txt

field1
field2
field3
field9

pax> cat file2.txt

field1  value f11
field1  value f12
field1  value f13
field2  value f21
field2  value f22
field2  value f23
field3  value f31

pax> awk -F"\t" 'NR == FNR{
...>                 a[$1] = a[$1]", "$2;
...>                 next
...>             }
...>             {
...>                 gsub ("^,", "", a[$1]);
...>                 print $1"\t"a[$1]
...>             }' file2.txt file1.txt 

field1   value f11, value f12, value f13
field2   value f21, value f22, value f23
field3   value f31
field9 
```

* * *

根据我建议您使用`sed`命令的更新，`print "["$1"/"$2"]"`您得到：

```
[field1  value f11/]
[field1  value f12/]
[field1  value f13/]
[field2  value f21/]
[field2  value f22/]
[field2  value f23/]
[field3  value f31/] 
```

这表明这些字段*不是*制表符分隔的。命令的输出也证实了这一点`od`，您可以清楚地看到`2020`两个空格序列。

您需要对其进行排序，否则命令将无法使用`-F"\t"`. 例如，如果我`file2.txt`用空格替换 my 中的每个选项卡，我会看到您所看到的内容：

```
pax> awk -F"\t" 'NR==FNR{a[$1] = a[$1]", "$2;next}
...>   {gsub("^, ","",a[$1]);print $1"\t"a[$1]}' file2.txt file1.txt 
field1  
field2  
field3  
field9 
```

因此，您需要做出决定：

*   修改文件，使其*以*制表符分隔；或者
*   修改`awk`选项以使用*实际*文件格式。

鉴于您在该行的其他地方有空格，第一个选项可能是最简单的。要修改文件以用制表符替换每一行的第一组空格，您可以使用：

```
sed 's/  */\t/' file2.txt >file2a.txt
mv file2a.txt file2.txt                 # once you're happy. 
```

（或使用`-i`GNU 的就地编辑选项`sed`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:50:10.723

使用其他工具而不是 awk（并假设有一个选项卡可以将字段与 file2 中的值分开）：

```
for f in `cat /tmp/file1.txt`; do grep $f /tmp/file2.txt | cut -f2- | paste -s -d, | sed "s/^/$f\t/g" ; done 
```

（我会将此作为评论发布，但似乎无法避免评论中的反引号）

# java - 如何制作互动动画？

> ID：15514552
> 
> 赞同：2
> 
> 时间：2013-03-20T03:06:26.763
> 
> 标签：java, swing, animation, keylistener, key-bindings

所以我的老师要我做一个互动动画。问题是他没有告诉全班怎么做。（这是一个在线课程）。要点是他希望我制作一个可以用键盘控制的图形。我在网上环顾四周，但显然我没有问正确的问题，因为由于某种原因我空了。

无论如何。我有三个代码文件。Zorx1、Zorx2、Zorx3是同一个外星人，颜色有细微差别，老师给的。

```
// The Zorx alien object
import java.awt.*;
public class Zorx1
{
/* the fields of the object defined here as static to make the 
interface as simple as possible to start*/
static int x = 100, y = 100;
static int size = 50;
static Color clr = Color.red;
static boolean showing = false;
// paints Zorx on the screen Note this method is not part of Interface
static void paint (Graphics g)
{
    g.setColor (clr);
    g.fillRect (x, y, size / 4, size);
    g.setColor (Color.black);
    g.drawLine (x-3,y-2,x-1,y+size/8);//These four lines will add fangs to this guy. Nasty!
    g.drawLine (x-2,y-2,x-1,y+size/8);
    g.drawLine (x+3,y-2,x+5,y+size/8);
    g.drawLine (x+2,y-2,x+4,y+size/8);
    g.setColor (clr);
    g.fillOval (x - (3 * size / 8), y - (size / 2), size, size / 2);
    g.drawLine (x - 3 * size / 8, y + size, x - 3 * size / 8 + size, y + size);
    g.drawLine (x, y + size / 2, x - size, y);
    g.drawLine (x - size, y, x - size, y - size / 4);
    g.drawOval (x - size - size / 8, y - size / 4 - size / 8, size / 8, size / 8);
    g.setXORMode (Color.black); //Makes his eyes black. Sinister
    g.fillOval (x - size / 4, y - size / 3, size / 12, size / 12);
    g.fillOval (x + size / 4, y - size / 3, size / 12, size / 12);
    g.fillOval (x - size / 1000, y - size / 4, size / 12, size / 12); //adds a third eye to our alien. Spooooooooky.
    g.setPaintMode ();
} // end of paint method

// Show the Zorx alien. The show method is part of the interface.
public static void show (Graphics g)
{
    paint (g);
    showing = true;
} // end of show method

// Erase Zorx from the screen. The erase method
// is not part of the interface.
static void erase (Graphics g, Color backgroundColor)
{
    g.setColor (backgroundColor);
    g.fillRect (x, y, size / 4, size);
    g.fillOval (x - (3 * size / 8), y - (size / 2), size, size / 2);
    g.drawLine (x-3,y-2,x-1,y+size/8);
    g.drawLine (x-2,y-2,x-1,y+size/8);
    g.drawLine (x+3,y-2,x+5,y+size/8);
    g.drawLine (x+2,y-2,x+4,y+size/8);
    g.drawLine (x - 3 * size / 8, y + size, x - 3 * size / 8 + size, y + size);
    g.drawLine (x, y + size / 2, x - size, y);
    g.drawLine (x - size, y, x - size, y - size / 4);
    g.drawOval (x - size - size / 8, y - size / 4 - size / 8, size / 8, size / 8);
    g.fillOval (x - size / 4, y - size / 3, size / 12, size / 12);
    g.fillOval (x + size / 4, y - size / 3, size / 12, size / 12);
} // end of erase method

// Hide Zorx The hide method is part of the interface.
public static void hide (Graphics g, Color backgroundColor)
{
    erase (g, backgroundColor);
    showing = false;
} // end of hide method

// Move Zorx from one location to another. The move method
// is part of the interface.
public static void move (int newX, int newY, Graphics g, Color backgroundColor)
{
    if (showing)
    {
        erase (g, backgroundColor);
    }
    x = newX;
    y = newY;
    if (showing)
    {
        show (g);
    }
} // end of move method
} // end of Zorx Class 
```

外星物体具有移动物体所需的所有方法和一切，而动画应该控制所有这些。

```
import java.io.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
public class Animation extends JFrame implements KeyListener
{
    public Animation (Graphics g)
    {
        Zorx1.show(g);
        Zorx2.show(g);
        Zorx3.show(g);
        this.setFocusable(true);
    }
    public static void main (String args[])
    {
        Animation application = new Animation(g);
        application.setVisible(true);
    }
    public int x=100;
    public int y=100;
    public void keyPressed (KeyEvent e)
    {
        switch (e.getKeyCode()) //I can't seem to get this thing to animate through this so this is just left blank for the sake of necessity.
        {
            case KeyEvent.VK_LEFT:
            break;
            case KeyEvent.VK_RIGHT:
            break;
            case KeyEvent.VK_DOWN:
            break;
            case KeyEvent.VK_UP:
            break;
        }
    }
    public void keyTyped(KeyEvent e) 
    {
        if (e.getKeyChar() == KeyEvent.VK_LEFT) 
        {
            left(g);
        }
        else if (e.getKeyChar() == KeyEvent.VK_RIGHT)
        {
            right(g);
        }
        else if (e.getKeyChar() == KeyEvent.VK_UP)
        {
            up(g);
        }
        else if (e.getKeyChar() == KeyEvent.VK_DOWN)
        {
            down(g);
        }
        if (e.getKeyChar() == KeyEvent.VK_ESCAPE) 
        {
            System.exit(0);
            // If you hit escape you will exit the animation
        }
    }
    public void left (Graphics g)
    {
        x=x-10;
        Zorx1.move (x,y, g, getBackground ());
        Zorx2.move (x,y+50,g,getBackground());
        Zorx3.move (x,y+100,g,getBackground());
    }
    public void right (Graphics g)
    {
        x=x+10;
        Zorx1.move (x,y,g,getBackground());
        Zorx2.move (x,y+50,g,getBackground());
        Zorx3.move (x,y+100,g,getBackground());
    }
    public void up(Graphics g)
    {
        y=y-10;
        Zorx1.move (x,y,g,getBackground());
        Zorx2.move (x,y+50,g,getBackground());
        Zorx3.move (x,y+100,g,getBackground());
    }
    public void down(Graphics g)
    {
        y=y+10;
        Zorx1.move (x,y,g,getBackground());
        Zorx2.move (x,y+50,g,getBackground());
        Zorx3.move (x,y+100,g,getBackground());
    }
    public void keyReleased(KeyEvent e)
    {
        switch (e.getKeyCode()) 
        {
            case KeyEvent.VK_LEFT:
            break;
            case KeyEvent.VK_RIGHT:
            break;
            case KeyEvent.VK_DOWN:
            break;
            case KeyEvent.VK_UP:
            break;
        }
    }
} 
```

我知道上面的代码不起作用，但这可能是因为我不知道我应该做什么。

我弄清楚是什么导致了压倒一切的静态方法问题。我已将扩展 JFrame 添加到 zorx1.java 事物中，这导致与绘画（图形 g）部分发生冲突。所以我只是将它重命名为 make (Graphics g)。希望这不会引起并发症。

我想我应该能够将键盘交互部分移动到不同的类中（我希望如此），但我也有这个问题。

```
public class Animation extends JFrame
{
    public int x=100;
    public int y=100;
    public Animation (Graphics g)
    {

        Zorx1.show(g);
        Zorx2.show(g);
        Zorx3.show(g);
    }

    public static void main (String args[])
    {
        Animation application = new Animation (g);
    } 
```

新动画（g）；找不到符号 g。而且我不能在任何地方添加它，因为它会导致问题。我怎样才能让它识别符号，或者我从一开始就不需要它？

```
 public Animation ()
    {
        repaint();
    }
    public void paintComponent (Graphics g)
    {
        super.paintComponent(g);
        Zorx1.show(g);
        Zorx2.show(g);
        Zorx3.show(g);
    } 
```

好的，我想我明白了，但是 super.paintComponent(g); 正在返回一个错误，其中显示：“找不到符号 - 方法paintComponent（java.awt.Graphics）。”

修复。最后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:10:02.657

建议：

*   阅读 Swing 图形教程，了解使用 Swing 绘制的最佳方法。您似乎正在编写很多图形代码，而这根本行不通。去源头，学着做对。Google 将帮助您找到这些教程。
*   例如，您不应该直接在 JFrame 上绘图。
*   而是在 JComponent 的（例如 JPanel 的）`paintComponent(...)`方法中绘制。
*   避免使用 KeyListeners，而是使用 Key Bindings。
*   为您的动画循环使用 Swing Timer。
*   你可以在这个网站上找到很多这样的例子（包括我的例子）。例如，请看[这里](https://stackoverflow.com/a/6887354/522444)。

编辑：您的最新代码尝试在不起作用的 JFrame 构造函数中执行动画。如上所述，GUI 绘图必须在`paintComponent(Graphics g)`JPanel 或 JComponent 的覆盖方法中。在这里，您可以使用 JVM 传递给`paintComponent(Graphics g)`方法的 Graphics 对象。

# c - 如何在主函数中存储函数的返回值。C 编程

> ID：15514553
> 
> 赞同：0
> 
> 时间：2013-03-20T03:06:27.450
> 
> 标签：c, function, return

我必须编写一个程序，其中的一部分必须能够判断一个单词是否是回文。我对此的解决方案是：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>

#define maxLen 100

int main() {
    char string[maxLen];
    char stringCopy[maxLen];

    printf("Please enter a string between 2 and 100 characters\n");
    gets(string);
    strcpy(stringCopy,string);
    strrev(stringCopy);

    if(strcmp(string,stringCopy) == 0){
        printf("%s is a palindrome\n\n",string);
    }
    else{
        printf("%s is not a palindrome\n\n",string);
    }
    return 0;
} 
```

现在我不得不只使用函数重新编写程序。我现在正在尝试像这样编写代码，但不断遇到不知道如何使用函数返回值的问题。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>

#define maxLen 100

int pallindrome(char);

int main(){
    int rValue; // return value
    char pString[maxLen];

    printf("Please enter a string between 2 and 100 characters\n");
    gets(pString);
    int palindrome(char pString);

    rValue = palindrome(char pString);

    if(rValue == 0){
        printf("%s is a palindrome\n",pString);
    }
    else{
        printf("%s is not a palindrome\n",pString);
    }
    return 0;
}

int palindrome(char pString){
    char string;
    string = pString;
    char stringCopy;

    strcpy(stringCopy,string);
    strrev(stringCopy);

    if(strcmp(string,stringCopy) == 0){
        return 0;
    }
    else{
        return 1;
    }
} 
```

如您所见，我正在尝试使用 palindrome() 的返回值来让用户知道某物是否是回文。

总而言之，我想知道是否有一种方法可以将函数的返回值存储为主函数中的变量，以便在那里使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:14:28.857

有更好的方法来解决这个问题，但是把你的代码放到一个函数中......

```
int palindrome(char* string)
{
    char stringCopy[maxLen];
    strcpy(stringCopy,string);
    strrev(stringCopy);
    return strcmp(string,stringCopy) == 0;
}
int main() 
 {
    char string[maxLen];
    printf("Please enter a string between 2 and 100 characters\n");
    gets(string);

    if(palindrome(string)){
       printf("%s is a palindrome\n\n",string);
    }
    else{
       printf("%s is not a palindrome\n\n",string);
    }
    return 0;
} 
```

如果你想把它放入一个变量中，你可以这样做

```
int main() 
 {
    char string[maxLen];
    int result;
    printf("Please enter a string between 2 and 100 characters\n");
    gets(string);

    result = palindrome(string);
    if(result){
       printf("%s is a palindrome\n\n",string);
    }
    else{
       printf("%s is not a palindrome\n\n",string);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:37:31.207

你的回文函数是错误的。您只是传递一个字符而不是字符串。为了传递字符串，函数参数应该像`char *pString`or `char pString[]`。复习该语言的基础知识并开始编码。

# objective-c - iOS：以编程方式禁用推送通知下拉托盘

> ID：15514562
> 
> 赞同：3
> 
> 时间：2013-03-20T03:07:10.830
> 
> 标签：objective-c, drop-down-menu, push-notification

在我的应用程序设计中，当用户向下滑动屏幕的顶部边缘时，我从顶部有一个下拉菜单。这会干扰推送通知托盘。当我的应用程序在前台时，有什么方法可以禁用默认托盘下拉菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:47:47.357

目前，还没有公开的 API 用于操纵通知中心的行为或如何防止它。

我认为以开发者自由为代价保持一致的用户体验是一项设计决策。我认为应用程序不太可能阻止通知的出现，而且应用程序能够阻止通知中心出现的可能性略小一些。

毕竟，正是它让 iOS 如此成功。操作系统和应用程序之间的一致性。

# asp.net-mvc - 用 ViewBag 命名 KendoUI 控件

> ID：15514563
> 
> 赞同：0
> 
> 时间：2013-03-20T03:07:19.537
> 
> 标签：asp.net-mvc, razor, kendo-ui

我正在尝试用 ViewBag.ModuleId 命名我的 KendoUI 网格，但出现错误。我该如何正确地做到这一点。

```
@(Html.Kendo().Grid<TimeSheetSummaryViewModel>()
    .Name("grid-timesheetsummary-" + ViewBag.ModuleId)
    .DataSource(datasource => datasource.Ajax()
        .Read(read => read.Action("GetReport", "Reporting"))
    )
    .AutoBind(true)
) 
```

Visual Studio 在 Ajax() 上显示红色卷曲，表示“无法解析符号 Ajax”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T06:51:02.373

我通过将其转换为（字符串）找到了解决方案

```
@(Html.Kendo().Grid<TimeSheetSummaryViewModel>()
    .Name("grid-timesheetsummary-" + (String) ViewBag.ModuleId)
    .DataSource(datasource => datasource.Ajax()
        .Read(read => read.Action("GetTimeSheetSummary", "Reporting"))
    )
    .AutoBind(true)
) 
```

# sql - 每 n 行将计数器列添加到表中

> ID：15514567
> 
> 赞同：0
> 
> 时间：2013-03-20T03:07:38.320
> 
> 标签：sql, sql-server, sql-server-2008, excel

我希望添加一个这样的列`CusID`，本质上是一个可以根据 variable 选择的计数器`@nrows`。在这种情况下`@nrows`是 3，只是简单地向下添加表日期，并为行中的每个项目添加计数器。

```
CustID --- DateAdded ---

 1         2012-02-09 
 1         2012-02-09 
 1         2012-02-08 
 2         2012-02-07 
 2         2012-02-07
 2         2012-02-07 
 3         2012-02-06
 3         2012-02-06 
```

如果有人能告诉我如何在 MSSQL 中做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:15:36.960

=MAX(1,ROUNDUP(ROW()/@NROWS,0)) 怎么样，我相信它会产生你想要的结果。

它可能不起作用的一个原因是“@NROWS”变量，OP 表示他想使用该变量。我承认在我的测试中我使用了 =MAX(1,ROUNDUP(ROW()/3,0))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:57:48.177

这可以在 Excel 中使用两个公式来完成，第一个公式计算行数并与 @nrows 进行比较

屏幕截图中的位置 A3

```
=IF(B3=B2,(A2+1),1) 
```

第二个位置是 ID，屏幕截图中的位置 B4

```
=IF(A3=$B$1,B3+1,B3) 
```

B1 中的值是变量“@nrows”

B3 中的值是起始 ID，因此您可以从任何您想要的值开始。

![在此处输入图像描述](../Images/3039bf7e8259054f7fc816807f186b49.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:14:52.723

将[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx "ROW_NUMBER (Transact-SQL)")函数应用于行集。它将产生从 1 开始的连续数字。通过添加`@nrows - 1`它们并将结果除以来修改它们`@nrows`：

```
SELECT
  CustID = (ROW_NUMBER() OVER (ORDER BY DateAdded) + @nrows - 1) / @nrows,
  DateAdded
FROM atable
; 
```

[请参阅SQL Fiddle 上](http://sqlfiddle.com/#!3/8e3f3/4)的演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T03:20:28.770

不知道如何在excel中做，但你可以先将数据加载到SQL server中，然后下面的语法会帮助你

```
 select NTILE(@NRows) over (order by DateAdded desc), DateAdded from tablename 
```

# php - 连续提交表单后如何保留变量的值

> ID：15514570
> 
> 赞同：0
> 
> 时间：2013-03-20T03:07:54.377
> 
> 标签：php, javascript, html, forms

我正在用 php 开发一个上下文搜索引擎。为此，当用户键入查询时，我需要她的 latlong 和 time。我正在开发 php 中的搜索框。为了获得 latlong 我正在使用 HTML 5 geolocation api。我从 stackoverflow 中的帖子中汲取灵感，编写了以下两个文件。

订单.php

```
<html>
<head>
<script type="text/javascript">
function getLocation(){
  var x = document.getElementById("demo");
  if (navigator.geolocation){
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    x.innerHTML="Geolocation is not supported by this browser.";
  }
}

function showPosition(position){
  var latitude=document.getElementById("latitude"),
      longitude=document.getElementById("longitude");
  latitude.value = position.coords.latitude;
  longitude.value = position.coords.longitude;
}

</script>

</head>
<body onload="getLocation()">

<p id="demo"></p>
<form id="searchbox" action="process.php" method="get">
  <input name="q" type="text" placeholder="Type here">
  <input name="latitude" id="latitude" type="hidden">
  <input name="longitude" id="longitude" type="hidden">
  <input id="submit" type="submit" value="Search">
</form>
</body></html> 
```

另一个文件是 process.php

```
<html>
<body>
  <form id="searchbox" action="process.php" method="post">
   <input name="q" type="text" placeholder="Type here">
   <input name="latitude" id="latitude" type="hidden" value="<?php $latitude=$_POST['latitude']; echo $latitude; ?>">
   <input name="longitude" id="longitude" type="hidden" value="<?php $longitude=$_POST['longitude'];echo $longitude; ?>">
   <input id="submit" type="submit" value="Search">
 </form>

<?php $quantity=$_POST['quantity'];
$date = date('Y-m-d H:i:s');
$arr=explode(" ",$date);
$latitude=$_GET['latitude'];
$longitude=$_GET['longitude'];
echo "Latitude=". $latitude."Longitude=". $longitude." Time=".$arr[1]."<br>";
?>
</body>
</html> 
```

问题是每当我从 process.php 再次提交表单时，纬度和经度值都会被重置。那么如何保留登陆 process.php 后获得的它们的值，以便即使我多次从 process.php 提交表单，它们也不会被重置。

在这种情况下，我在这里看到了其他类似的问题并应用了他们的解决方案，但它们似乎都没有奏效。所以请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:30:57.677

在 process.php 中，您使用 GET 来获取从 process.php 表单提交中发布的值。

你可以改变：

```
$latitude=$_GET['latitude'];
$longitude=$_GET['longitude']; 
```

进入

```
$latitude=$_REQUEST['latitude'];
$longitude=$_REQUEST['longitude']; 
```

`$_REQUEST`基本上同时包含 GET 和 POST（为安全起见，请确保没有具有相同键名的冲突 get/post 参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:27:23.837

您通过 GET 方法提交第一个表单，该方法将值放入 URL 中，而 process.php 页面上的第二个表单使用 POST 方法，该方法将值放入请求的正文而不是 URL。

然后，您从超级全局中获得经纬度，而`$_GET`超级全局不再具有纬度和长度，因为它们现在在超级全局中`$_POST`。

您应该始终使用 GET 或 POST，对于搜索引擎，我建议使用 GET，以便用户可以传递指向结果的链接（您不能为 POST 页面添加书签）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:30:57.787

您正在 POST 请求中查找 Geolocation 值，而实际上初始表单正在将值作为 GET 请求发送。

更改`process.php`以下几行：

```
<input name="latitude" id="latitude" type="hidden" value="<?php $latitude=$_POST['latitude']; echo $latitude; ?>">
<input name="longitude" id="longitude" type="hidden" value="<?php $longitude=$_POST['longitude'];echo $longitude; ?>"> 
```

到

```
<input name="latitude" id="latitude" type="hidden" value="<?php $latitude=$_REQUEST['latitude']; echo $latitude; ?>">
<input name="longitude" id="longitude" type="hidden" value="<?php $longitude=$_REQUEST['longitude'];echo $longitude; ?>"> 
```

# android - 滑动菜单+操作栏 Sherlock - VFY：无法解决静态字段崩溃

> ID：15514571
> 
> 赞同：0
> 
> 时间：2013-03-20T03:07:57.847
> 
> 标签：android, actionbarsherlock, dalvik, slidingmenu

我一直在研究 android 滑动菜单库，并且似乎已正确安装在操作栏 sherlock 库旁边。我试图打开一个演示示例，但不断收到相同的错误，事实上，任何使用基于`sliding menu+action`sherlock 的项目都会在控制台中生成相同的错误并且应用程序崩溃。

我尝试了各种修复，包括仅在操作栏 sherlock 库中只有一个 .jar 文件，或者尝试确保 .jar 实际上存在于内部，而不仅仅是在构建路径中，但担心我运气不好. 我附上了一张我一直在使用 Eclipse IDE 时遇到的错误的图片。

请随时向我询问更多信息，我已经卡了一天但找不到我的资源来解决这个错误。

```
http://postimage.org/image/wwcz1q2pl/

<a href='http://postimage.org/image/wwcz1q2pl/' target='_blank'><img src='http://s4.postimage.org/wwcz1q2pl/problem.jpg' border='0' alt="problem" /></a> 
```

# sql-server - SQL Server 2008 快速集成服务

> ID：15514572
> 
> 赞同：3
> 
> 时间：2013-03-20T03:08:06.270
> 
> 标签：sql-server, ssis, sql-server-2008-express

SQL Server 2008 Express 是否支持集成服务？当我尝试创建一个集成服务项目时，它说我必须安装集成服务，但我在安装设置中找不到该选项。我该如何安装它？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:14:13.927

不，不是的。来自[SQL Server 2008 R2 版本支持的功能](http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.105%29.aspx)：

![好的](../Images/779b4db18113739366a3f25d2ff7ff74.png)

您至少需要运行标准版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:14:30.067

Microsoft SQL Server 2008 Express 不完全支持集成服务。它将支持访问基本数据源，但不支持 MSSQL Server 2008 标准版中包含的完整套件。

我不相信有办法解决这个问题。它是安装包的一部分，我认为 Express 没有集成服务所需的程序部分。

# razor - 查看页面生成 RuntimeBinderException，无论如何都可以使用

> ID：15514575
> 
> 赞同：2
> 
> 时间：2013-03-20T03:08:09.010
> 
> 标签：razor, binding, servicestack

我正在尝试在我的项目中使用 ServiceStack Razor。我设置了一个非常简单的 DTO：

```
namespace ModelsWeb.Diagnostics
{       
   [Route("/echo")]
   [Route("/echo/{Text}")]
   public class Echo
   {
      public string Text { get; set; }          
   }

   public class EchoResponse 
   {
      public ResponseStatus ResponseStatus { get; set; }
      public string Result { get; set; }
   }
} 
```

以及与之配套的服务：

```
namespace Rest.Services
{
   public class EchoService : Service
   {
      public object Any(Echo request)
      {
         return new EchoResponse {Result = request.Text};
      }
   }
} 
```

请注意，DTO 和服务位于不同的命名空间中。这是因为我同时构建了两个应用程序——服务器和胖客户端——并且我将所有 DTO 都放在了它们都依赖的单独的类库中。这样，客户端可以仅引用该类库，而不能引用其他服务器端代码。我正在使用 Razor 为某些服务器功能提供 Web 界面。

无论如何，我还为我的 Echo 服务写了一个简单的视图：

```
@using ServiceStack.Razor
@using ModelsWeb.Diagnostics

@inherits ViewPage<EchoResponse>

@{
    ViewBag.Title = "Echo Response";
    Layout = "BasePage";
}

<h1>You typed: @Model.Result</h1> 
```

当我`"http://localhost:62061/echo/hello2"`在浏览器中输入时，我的日志中出现错误：

```
Cannot implicitly convert type 'ServiceStack.Razor.Compilation.RazorDynamicObject' 
to 'ModelsWeb.Diagnostics.EchoResponse' 
```

但是，模板仍然有效，我在浏览器中看到了预期的结果。这里发生了什么 ？我做错什么了吗？如果没有，我该如何抑制这个异常？

# ruby-on-rails - 带有导轨的嵌套表单

> ID：15514579
> 
> 赞同：0
> 
> 时间：2013-03-20T03:08:28.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我的 rails3.2 应用程序中有一个用于投诉的表单，该表单还同时建立了一个新公司和分支机构。一切正常，但我想将公司的 id 作为外键 company_id 存储在 Branch 表中。

这是我的投诉控制器：

```
def new
    @complaint = Complaint.new
    @complaint.build_company
    @complaint.build_branch(:company_id => '#Trying to set the company ID here')

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @complaint }
    end
  end 
```

我可以在`:company_id =>`分配上面创建的对象的 id 之后放置什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:46:14.703

解决方案是将以下代码添加到创建操作

```
def create
...
@complaint.branch.company = @complaint.company
@complaint.save
...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:13:18.810

不就是这样吗？

```
@complaint.build_branch(:company_id => @complaint.company_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:30:33.660

问题似乎是由于未保存的公司对象和投诉对象。你没有概述模型的细节，但我猜，

```
@complaint = Compplaint.create(#Whatever parameters are required)
company = @complaint.companies.create()  #Assuming has_many relationship
@complaint.branches.create(:comapny_id => company.id) 
```

create 保存记录并生成 id，而 build 和 new 不会。

您还应该在模型中探索 has_many :through 。

# java - 当文件中有更多字符串时，BufferedReader() 返回空字符串？

> ID：15514580
> 
> 赞同：0
> 
> 时间：2013-03-20T03:08:29.147
> 
> 标签：java, file-io, bufferedreader

我的 txt 文件如下所示：

```
data;data2;data3;data4..........up till data3146 
```

当我在记事本中打开 txt 文件时，我会以上面给出的形式看到它。但是当我将前几行复制粘贴到另一个地方时，b/w data1 和其他所有内容都有 1 行间隙。因此，我在访问 Java 中的文件并在循环中使用带有缓冲读取器的数据时遇到问题。我该如何纠正？我无法删除空行，因为它甚至在原始文件中都不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:16:12.550

你可以这样尝试：

```
BufferedReader reader = new BufferedReader(new FileReader(new File("your file path")));
    String str = null;
    while((str = reader.readLine())!=null) {
        if (str.matches("[' ']+")) {
            continue;
        } else {
            // to do 
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:11:03.203

您可以忽略空白行。像这样的东西-

```
 while ((line = reader.readLine()) != null) {
        if(line.trim().isEmpty()) {
            continue;
        }
        ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:11:21.403

我相信问题出在行尾。基本上你可以跳过空行：

```
String line;
while ((line = reader.readLine()) != null) {
  if ("".equals(line.trim()) {
    continue;
  }
  // do your stuff here
} 
```

# iphone - 核心位置自动暂停，活动类型的影响

> ID：15514581
> 
> 赞同：6
> 
> 时间：2013-03-20T03:08:42.863
> 
> 标签：iphone, ios6, location, core-location

嗨，有人知道使用不同的 CLActivity 类型常量对自动暂停行为的影响吗？例如，如果 activityType 设置为 CLActivityTypeAutomotiveNavigation 或 CLAcitivtyTypeFitness，位置管理器会更容易从暂停中恢复吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T16:33:42.577

活动类型标志影响内部自动暂停逻辑。例如`CLActivityTypeFitness`，当用户在没有加速度计运动的情况下静止时以及当用户在加速度计运动类似于车辆的情况下快速移动时更有可能暂停，反之亦然`CLActivityTypeAutomotiveNavigation`。`CLActivityTypeOther`应该是其他一切的包罗万象的设置。然而，确切的逻辑和阈值只有 Apple 知道。

据我所知，只有当您的应用再次激活时，位置更新才会恢复，根据用户动作不会自动恢复。但是您总是可以在您的 didPause 回调中启动区域监控，以便在用户移动时再次恢复跟踪。

# php - 试图将一个变量 ($i) 回显到另一个变量中

> ID：15514582
> 
> 赞同：1
> 
> 时间：2013-03-20T03:08:52.197
> 
> 标签：php, wordpress, forms, for-loop, validation

我有一个我一直在制作的特殊表格，它在 wordpress 中使用了一些 cusotm 帖子类型。有一次，我需要将变量 $i 回显到 if 语句中。

顶部有一些验证内容，如下所示，循环中的代码如下。如果你知道我的意思，我几乎一直试图让majorCause1Error成为majorCause $i Error，所以它会像1-13

编辑：对不起，如果很难看到我在问什么，我发现很难说出我的问题。所以有一个围绕 li 标签运行的循环，它将 $i 回显到名称等中，因此它变为 majorCause1 然后下一个 majorCause2 和下一个 magjorCause3 等

在标签下有一个 if 语句，就像 - if($majorCause1Error !='') { do something } - 我希望这就像 if($majorCause1Error !=''){} 然后下一个就像if($majorCause2Error !=''){} 然后 if($majorCause3Error !=''){}

这更有意义吗？

这是该网站的链接[http://www.foresightaus.com.au/form/](http://www.foresightaus.com.au/form/)

```
if(trim($_POST['majorCause1']) === '') {
    $majorCause1Error = "Please enter a major cause.";
    $hasError = true;
} else {
    $majorCause1 = trim($_POST['majorCause1']);
}

if(trim($_POST['majorCause2']) === '') {
    $majorCause2Error = "Please enter a major cause.";
    $hasError = true;
} else {
    $majorCause2 = trim($_POST['majorCause2']);
}

<li class="fill-in">
    <label for="majorCause<?php echo($i); ?>"><?php echo($j); ?>. State one major cause:</label>
    <input type="text" name="majorCause<?php echo($i); ?>" id="majorCause<?php echo($i); ?>" value=""/>
    <?php if($majorCause1Error != '') { ?>
        <span class="error"><?=$majorCause1Error;?></span>
    <?php } ?>  
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:17:31.133

您可能想要使用数组，但您引用的内容称为[变量变量](http://php.net/manual/en/language.variables.variable.php)，并且受 PHP 支持！

像这样的事情应该这样做

```
${"majorCause{$i}Error"} 
```

# android - Android 创建半可调整大小的框

> ID：15514589
> 
> 赞同：1
> 
> 时间：2013-03-20T03:09:52.673
> 
> 标签：android, text, resize, shape

所以基本上我在屏幕上有 3 个框，每个框都显示有关音频的不同信息。

顶部框显示音符，中间显示该音符的音高，第三个显示您的音高。

我想把数字放在一个盒子里，因为它们不断变化，我希望盒子保持一定的大小，而不是不断增加大小以适应文本。但是，我也不想给盒子一个特定的大小，因为我希望它们能够根据屏幕大小调整大小。有没有办法轻松做到这一点？或者我是否必须为每个设备或其他东西创建单独的 XML 文件？我将附上一张图片，以便您了解我的意思。

图片：http: [//i.imgur.com/5NVR54N.png](http://i.imgur.com/5NVR54N.png)

所以想象一下，每个盒子都根据放置在盒子里的文本来调整自己的大小。对此的任何帮助将非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:51:30.937

1.  如果“所以只是想象每个框都根据放置在框中的文本来调整自身的大小”，那么在用于显示值的 TextView 小部件的 XML 中，这是需要的。，android:layoutWidth="wrap_content ", android:layoutHeight="wrap_content" 。视图的 wXh 将根据内容（值）进行调整。

2.  如果“我希望框保持一定大小，而不是不断增加大小以适应文本。” - 如果不这样做，即如果您有固定宽度的文本小部件，那么如果它们超过最大宽度，文本将被剪裁。2.1 如果您在每个设备上的意思是相同的大小，那么在 mdpi (320X480 mdpi) 模拟器上为每个 textview 计算出最大可能的宽度/高度，比如 100px 宽度和 80px 高度，这适合您的注释，然后在Note 的 TextView 小部件的 XML 使用 android:layoutWidth="100dp", android:layoutHeight="80dp" 其中“dp”将为您提供与设备无关的像素大小，这意味着将根据屏幕密度调整大小模拟器正在运行。

[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)和相关材料应该有所帮助。

# python - 尝试运行 Python 脚本时出现“ImportError: No module named”

> ID：15514593
> 
> 赞同：190
> 
> 时间：2013-03-20T03:10:19.377
> 
> 标签：python, jupyter-notebook, ipython, jupyter, importerror

我正在尝试运行一个脚本，该脚本会启动一个 python 脚本等。我得到一个 ImportError: No module named ...，但是，如果我启动 ipython 并通过解释器以相同的方式导入相同的模块，则该模块被接受。

发生了什么事，我该如何解决？我试图了解 python 如何使用 PYTHONPATH，但我完全糊涂了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-03-25T18:24:42.613

**这个问题的出现是由于命令行 IPython 解释器使用您当前路径的方式与单独进程的方式**（无论是 IPython 笔记本、外部进程等）的方式。IPython 将寻找不仅可以在您的 sys.path 中找到的要导入的模块，而且还可以在您当前的工作目录中找到。从命令行启动解释器时，您正在操作的当前目录与您启动 ipython 的目录相同。如果您运行

```
import os
os.getcwd() 
```

你会看到这是真的。

但是，假设您正在使用 ipython 笔记本，运行`os.getcwd()`并且您当前的工作目录是您在 ipython_notebook_config.py 文件中告诉笔记本进行操作的文件夹（通常使用`c.NotebookManager.notebook_dir`设置）。

解决方案是为 python 解释器提供 path-to-your-module。最简单的解决方案是将该路径附加到您的 sys.path 列表中。在您的笔记本中，首先尝试：

```
import sys
sys.path.append('my/path/to/module/folder')

import module_of_interest 
```

如果这不起作用，则您手上遇到了与导入路径无关的不同问题，您应该提供有关您的问题的更多信息。

解决这个问题的更好（和更持久）的方法是设置你的**PYTHONPATH**，它为解释器提供了额外的目录来查找 python 包/模块。将 PYTHONPATH 编辑或设置为全局变量取决于操作系统，此处针对[Unix](http://scipher.wordpress.com/2010/05/10/setting-your-pythonpath-environment-variable-linuxunixosx/)或[Windows](https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7)进行了详细讨论。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-01-14T14:11:26.163

`__init__.py`在运行 python 项目时，只需在显示错误的文件夹下创建一个名称为空的 python 文件。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-07-24T01:08:40.487

确保他们都使用相同的解释器。这在 Ubuntu 上发生在我身上：

```
$ ipython3 -c 'import sys; print(sys.version)'
3.4.2 (default, Jun 19 2015, 11:34:49) \n[GCC 4.9.1]

$ python3 -c 'import sys; print(sys.version)'
3.3.0 (default, Nov 27 2012, 12:11:06) \n[GCC 4.6.3] 
```

并且`sys.path`两个口译员之间是不同的。为了修复它，我删除了 Python 3.3。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-10-20T15:27:26.610

**主要原因是 Python 和 IPython 的 sys.paths 不同。**

请参考[lucypark 链接](https://www.lucypark.kr/blog/2013/02/10/when-python-imports-and-ipython-does-not/)，该解决方案适用于我的情况。它发生在安装opencv时

`conda install opencv`

在 iPython 中出现导入错误，解决此问题的三个步骤：

```
import cv2
ImportError: ... 
```

**1\. 使用以下命令检查 Python 和 iPython 中的路径**

```
import sys
sys.path 
```

你会发现 Python 和 Jupyter 的结果不同。第二步，只需`sys.path.append` 通过尝试和错误来修复错过的路径。

**2.临时解决方案**

在 iPython 中：

```
import sys
sys.path.append('/home/osboxes/miniconda2/lib/python2.7/site-packages')
import cv2 
```

`ImportError:..`问题解决了

**3.永久解决方案**

创建一个 iPython 配置文件并设置初始附加：

在 bash 外壳中：

```
ipython profile create
... CHECK the path prompted , and edit the prompted config file like my case
vi /home/osboxes/.ipython/profile_default/ipython_kernel_config.py 
```

在 vi 中，附加到文件：

```
c.InteractiveShellApp.exec_lines = [
 'import sys; sys.path.append("/home/osboxes/miniconda2/lib/python2.7/site-packages")'
] 
```

完毕

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-07-29T18:37:11.677

这样做`sys.path.append('my-path-to-module-folder')`会起作用，但为了避免每次要使用模块时都必须在 IPython 中执行此操作，您可以添加`export PYTHONPATH="my-path-to-module-folder:$PYTHONPATH"`到`~/.bash_profile`文件中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-06-14T22:07:19.443

这就是我修复它的方法：

```
import os
import sys
module_path = os.path.abspath(os.getcwd() + '\\..')
if module_path not in sys.path:
    sys.path.append(module_path) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-01T19:40:03.903

在安装ipython之前，我通过easy_install安装了模块；说`sudo easy_install mechanize`。

安装 ipython 后，我不得不重新运行 easy_install 以便 ipython 识别模块。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-11T10:21:16.930

如果您从命令行运行它，有时 python 解释器不知道查找模块的路径。

下面是我的项目的目录结构：

```
/project/apps/..
/project/tests/.. 
```

我在命令下面运行：

```
>> cd project

>> python tests/my_test.py 
```

运行上述命令后，我得到以下错误

```
no module named lib 
```

lib 被导入 my_test.py

我打印了 sys.path 并发现我正在处理的项目路径在 sys.path 列表中不可用

我在脚本开头添加了以下代码`my_test.py`。

```
import sys
import os

module_path = os.path.abspath(os.getcwd())    

if module_path not in sys.path:       

    sys.path.append(module_path) 
```

我不确定这是否是解决它的好方法，但它确实对我有用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-22T00:02:18.643

我发现这个问题的解决方案在这里被广泛记录：

[https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter/](https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter/)

基本上，您必须在 Jupyter 环境中安装软件包，发出 shell 命令，例如：

```
!{sys.executable} -m pip install numpy 
```

请检查上面的链接以获得权威的完整答案。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-09-07T18:52:27.203

发生这种错误很可能是由于 python 版本冲突。例如，如果您的应用程序仅在 python 3 上运行并且您也获得了 python 2，那么最好指定要使用的版本。例如使用

```
python3 ..... 
```

代替

```
python 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-01T21:38:21.790

有一个类似的问题，通过调用`python3`而不是修复它`python`，我的模块在 Python3.5 中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-12T09:59:55.860

我发现了这种差异的另一个来源：

我在本地和通常在 virtualenvs 中都安装了 ipython。我的问题是，在一个新制作的带有 ipython 的 virtualenv 中，系统 ipython 被拾取，它与 virtualenv 中的 python 和 ipython 版本不同（2.7.x 与 3.5.x），然后是欢闹。

我认为，每当安装包含二进制文件的东西时，明智的做法`yourvirtualenv/bin`是立即`rehash`为您使用的任何 shell 运行或类似的操作，以便获取正确的 python/ipython。（必须检查是否有合适`pip`的安装后挂钩......）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-02T23:24:13.837

没有脚本的解决方案：

1.  打开 Spyder -> 工具 -> PYTHONPATH 管理器
2.  通过单击“添加路径”添加 Python 路径。例如：'C:\Users\User\AppData\Local\Programs\Python\Python37\Lib\site-packages'
3.  单击“同步...”以允许其他程序（例如 Jupyter Notebook）使用在步骤 2 中设置的 pythonpaths。
4.  如果 Jupyter 已打开，请重新启动它

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-04-10T06:35:28.823

这可能是**由于您的系统上安装了不同的 python 版本**，即**python2**或**python3**造成的。

运行命令`$ pip --version`并`$ pip3 --version`检查哪个*pip*来自**Python 3x**。例如，您应该看到如下版本信息：

```
pip 19.0.3 from /usr/local/lib/python3.7/site-packages/pip (python 3.7) 
```

然后`example.py`使用以下命令运行脚本

```
$ python3 example.py 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-03T19:55:31.203

目录发生在我身上`utils`。我试图将此目录导入为：

```
from utils import somefile 
```

`utils`已经是python中的一个包。只需将您的目录名称更改为不同的名称，它应该可以正常工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-12T19:33:27.510

这个答案适用于这个问题，如果

1.  您不想更改代码
2.  您不想永久更改 PYTHONPATH

[临时修改 PYTHONPATH](https://stackoverflow.com/questions/39022629/provide-temporary-pythonpath-on-the-commandline/39022669#39022669)

下面的路径可以是相对的

```
PYTHONPATH=/path/to/dir python script.py 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-03-04T16:39:19.740

```
import sys
sys.path.append('/Users/{user}/Library/Python/3.7/lib/python/site-packages')
import ta 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-08-21T21:29:11.570

如果有人在 MSVS 代码中使用 Jupyter Notebook 遇到此问题`conda`，解决方案是确保您使用的是正确的内核。内核位于界面右上角的一个框中，如下所示：

[![在此处输入图像描述](../Images/34a134132545e0510570a350ae11e11e.png)](https://i.stack.imgur.com/1obWW.png)

我指出我的 Python 版本也与我的应用程序路径匹配——问题解决了！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-03-02T11:03:59.353

这个问题是由于不同的版本导致的——例如，如果你机器上安装的 Python 安装在一个名为`path_to_lib/python3.6`但你的 notebook 正在运行的文件夹中`Python 3`——命名中的间距很重要！

**如何解决？**

创建新的 jupyter notebook 时，只需选择与您的版本相同的 Python（注意空格！）。见附图。

[![选择正确的 Python 版本控制](../Images/ce00f7d9460764fe3ad7762aec277ec4.png)](https://i.stack.imgur.com/OecV7.png)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-06-05T05:22:48.370

删除`pathlib`并重新安装它。删除`sitepackages`文件夹中的 pathlib 并使用 pip 命令重新安装 pathlib 包：

```
pip install pathlib 
```

# java - 使用标准 JDK 库在集群上共享信号量或其他 java 对象

> ID：15514594
> 
> 赞同：0
> 
> 时间：2013-03-20T03:10:20.277
> 
> 标签：java, networking, shared

是否有通过网络将对象存储在内存中的本机 JDK 解决方案？特别是一种共享和同步信号量的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:13:33.023

我建议使用[ZooKeeper](http://zookeeper.apache.org/)，它对远程锁管理有很好的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:15:47.890

这取决于您所说的“本机 JDK 解决方案”到底是什么意思。[Netflix Curator是](https://github.com/Netflix/curator)[ZooKeeper](http://zookeeper.apache.org/)的富客户端，是纯 Java 并具有[跨 JVM Semaphore 实现](https://github.com/Netflix/curator/wiki/Shared-Semaphore)，它的功能与听起来完全一样：在所有参与的 JVM 之间提供共享租约。Curator[可以在 Maven Central 中](http://search.maven.org/#search%7Cga%7C1%7Ca%3a%22curator%22)使用，如果这有影响的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:12:24.347

您应该尝试 Java RMI：[http ://docs.oracle.com/javase/tutorial/rmi/index.html](http://docs.oracle.com/javase/tutorial/rmi/index.html)

我认为它应该能够通过网络提供同步。如果您不想使用 Zookeeper 之类的服务器，这是我能想到的最佳解决方案。

# java - 如何为一组方法编写单元测试，其中每个方法都依赖于其他方法？

> ID：15514597
> 
> 赞同：2
> 
> 时间：2013-03-20T03:10:32.253
> 
> 标签：java, unit-testing, junit4, method-group

我是编写单元测试的新手，在为以下场景编写测试用例时遇到了困难：

```
 Class A
 {
     public B createB(string name);
     public B getB(string name);
     public void removeB(B instance);
 }

 Class B
 {
     public B(string name);
 } 
```

`createB()`如果特定名称的实例`B`已经存在，该方法将返回 null。因此，为了测试`createB()`成功完成的案例，我必须打电话`getB()`检查它是否存在然后`removeB()`将其删除：

```
 A a = getInstanceOfA();
 public void testCreateB()
 {
     B b = a.getB("B");
     if (b != null)
     {
         a.removeB(b);
     }
     assertNotNull(a.createB("B"));
 } 
```

这违反了“一个测试用例必须失败只有一个原因”的规则，如果测试失败，我不知道问题出在哪里。测试`getB()`方法也是一样，`createB()`必须调用作为开始测试的先决条件。我正在使用 JUnit，每次开始测试时测试用例都会被打乱。是否有任何最佳实践来确保在这种情况下隔离测试用例？

还要注意，该`getInstanceOfA()`方法是从另一个库提供的 API 调用，并且无法控制获取`A`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:47:54.657

看看像mockito这样的模拟框架，这会给开发者控制的其他函数一些模拟响应，你可以只测试需要的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:34:15.597

您需要将程序置于字符串“B”的已知状态，使用“B”调用 c​​reateB 方法并检查结果是否符合您的预期。然后你再次这样做，具有不同的状态和不同的预期结果。像这样：

```
public void testCreateBSucess() {
    A a = getInstanceOfA(); // Make sure "B" doesn't exists
    B b = a.createB("B");
    assertNotNull(b);
}

public void testCreateBFail() {
    A a = getInstanceOfA();
    a.createB("B"); // Making sure "B" exists
    B b = a.createB("B");
    assertNull(b);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:58:52.557

*   尝试将 JUnit 4 注释`@Before`与`@After`您的方法一起使用。
*   或者只是写一个复杂的长测试。在很多情况下，如果不违反测试编写的*一般*规则，您就无法编写测试。如果你真的需要，可以写一个很长的测试。

# php - 如何设置 yiiMongodbsuite 唯一字段

> ID：15514600
> 
> 赞同：1
> 
> 时间：2013-03-20T03:10:59.593
> 
> 标签：php, mongodb, yii, yii-extensions

只是想知道如何使用 YiiMongodbsuite 将字段设置为唯一？我检查了 YiiMongodbsuite 文档，找不到任何相关内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:29:07.983

索引（唯一的也是索引）应该在`indexes`方法中定义，这里有一些[来自 docs](http://canni.github.com/YiiMongoDbSuite/xhtml_single/index.html#toc%3aadvanced_indexing)的示例：

```
class Client extends EMongoDocument
{
    public function indexes()
    {
        return array(
            // index name is not important, you may write whatever you want, just must be unique
            'index1_name'=>array(
                // key array holds list of fields for index
                // you may define multiple keys for index and multikey indexes
                // each key must have a sorting direction SORT_ASC or SORT_DESC
                'key'=>array(
                    'field_name'=>EMongoCriteria::SORT_ASC
                    'field_name.embeded_field'=>EMongoCriteria::SORT_DESC
                ),

                // unique, if indexed field must be unique, define a unique key
                'unique'=>true,
            ),
        );
    }
    // ....
} 
```

还要检查`UniqueValidator`mongo db 套件包以与 yii 验证器一起使用。

# postgresql - pgAdmin III Guru 提示 - 服务器未在监听

> ID：15514610
> 
> 赞同：3
> 
> 时间：2013-03-20T03:11:38.643
> 
> 标签：postgresql, cmd, database-connection

当我连接到默认 localhost 5432 时，我得到一个**空白**的“Guru 提示 - 服务器未监听消息”

通常，它应该显示一些消息，但我得到一个空白的！有人可以告诉我发生了什么吗？

P/s：我是使用 pgAdmin III 的新手，对连接的了解绝对为零。><"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:19:38.033

你在什么服务器上运行 postgresql 服务器？确保您的 postgresql 服务器启动。在 windows 上检查 postgre 服务，在 linux 上执行**ps -ef | grep postgresql**或**/sbin/service postgresql status**。

如果服务器已经启动，请检查您在 PGAdmin 中设置的数据库连接。

# jquery - jquery.countdown.js 在 Chrome 中不倒计时

> ID：15514612
> 
> 赞同：1
> 
> 时间：2013-03-20T03:11:45.220
> 
> 标签：jquery, jquery-countdown

我们在 www.follettchallenge.com 上进行了倒计时。

[使用来自http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)的 jQuery.js，版本 1.7 和 jquery.countdown.js 版本 1.6.1

已经尝试了几个小时来弄清楚为什么这在 Chrome 中没有倒计时，但它在 IE7、IE8、IE9、Firefox 和 Android 设备上运行良好。来自 keith-wood.name 的演示在 Chrome 中运行良好，所以这绝对是我们的目标。

关于我们可以尝试什么的任何想法？我已经尝试过更新到最新版本的 jQuery，但没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T05:17:47.063

我有同样的问题，js 倒计时仅在 Chrome 中不起作用。

更新到版本 1.6.2 解决了问题

[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

# python - 如何使用python自动从uniprot获取结果

> ID：15514614
> 
> 赞同：0
> 
> 时间：2013-03-20T03:11:55.937
> 
> 标签：python, biopython

我想使用一个基因本体术语来获取 Uniprot 中的相关序列。手动完成很简单，但是，我想使用 python 来实现它。有人对它有想法吗？例如，我有 GO:0070337，然后我想将所有搜索结果下载到一个 fasta 文件中。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-08T15:24:31.013

要完全自动化，我建议使用`requests`：

```
import requests
from StringIO import StringIO  # Python 2
from io import StringIO  # Python 3

params = {"query": "GO:0070337", "format": "fasta"}
response = requests.get("http://www.uniprot.org/uniprot/", params)

for record in SeqIO.parse(StringIO(r.text), "fasta"):
    # Do what you need here with your sequences. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:01:56.210

我会使用 UniProt 提供的其余接口。您只需要根据您的要求构建一个搜索查询 - 即您的 GO 术语、物种和文件格式。

此查询将为您提供尚未以 fasta 格式审查的所有具有 GO 术语的蛋白质结合的人类蛋白质。 [http://www.uniprot.org/uniprot/?query=%28go%3A%22protein+binding+%5B0005515%5D%22+AND+organism%3A%22Homo+sapiens+%5B9606%5D%22%29+AND+已审核%3Ano&sort=score&format=fasta](http://www.uniprot.org/uniprot/?query=%28go%3A%22protein+binding+%5B0005515%5D%22+AND+organism%3A%22Homo+sapiens+%5B9606%5D%22%29+AND+reviewed%3Ano&sort=score&format=fasta)

更多详情请访问： [http ://www.uniprot.org/faq/28](http://www.uniprot.org/faq/28)

# servicestack - 具有多个参数的 ServiceStack 请求 DTO

> ID：15514616
> 
> 赞同：3
> 
> 时间：2013-03-20T03:12:07.393
> 
> 标签：servicestack

我是新手，所以请善待。我可以调用带有 3 个参数的 Web 服务，但是我只看到请求中的第一个参数

```
[RestService("/GetServiceData/{wOwner}/{wBlockSize}/{wBlock}")]
public class GetServiceData
{
    [DataMember]
    public string wOwner { get; set; }
    public int? wBlockSize { get; set; }
    public int? wBlock { get; set; }

} 
```

我尝试像这样从我的浏览器调用：localhost:62577/servicestack/json/syncreply/GetServiceData/?wOwner=bb5456ce-a022-4ab8-8256-281e8b41aac5&wBlockSize=1000&wBlock=2

但只在 GetServiceData 中设置 wOwner

这个javascript也一样

```
var pData = {wOwner:'bb5456ce-a022-4ab8-8256-281e8b41aac5', wBlockSize:1000, wBlock:2};
$.ajax({
  type: "POST",
  url: "http://localhost:62577/servicestack/json/syncreply/GetServiceData",
  data: pData,
  dataType: "jsonp",
  contentType: "application/json", 
```

关于我缺少什么的任何线索？

# erlang - 可搜索的离线 Erlang 文档？

> ID：15514617
> 
> 赞同：11
> 
> 时间：2013-03-20T03:12:15.280
> 
> 标签：erlang

有没有一个地方可以下载 Erlang 文档的易于搜索的副本，以便我可以在长途飞行时使用它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T03:18:03.790

[http://erldocs.com/](http://erldocs.com/)

您可以在版本旁边找到下载链接以供离线查看。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T14:07:58.563

如果您使用 linux，请随意尝试`erl -man ModuleName`，例如`erl -man erlang`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:20:43.717

我没有检查 Linux 或 OSX，但在 Windows 上，您在安装的 doc 目录中有一份文档副本。如果 ERL 是安装 Erlang 的地方，您将在 ERL/doc/index.html 找到文档的根目录

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-30T17:33:01.903

您可以尝试生成离线文档[http://erlang.org/doc/installation_guide/INSTALL.html](http://erlang.org/doc/installation_guide/INSTALL.html)使用

```
$ make docs 
```

此外，您可以访问 Erlang 官方网站[https://www.erlang.org/downloads ，在](https://www.erlang.org/downloads)**可用版本**部分选择 Erlang 版本，在加载页面中找到链接**HTML 文档文件**并下载存档。А后解压档案б转到**otp_doc_html_X > doc > index.html**

# machine-learning - 机器学习：无监督反向传播

> ID：15514618
> 
> 赞同：11
> 
> 时间：2013-03-20T03:12:20.327
> 
> 标签：machine-learning, neural-network, unsupervised-learning

我对通过神经网络进行机器学习的一些概念有疑问。其中之一是[反向传播](http://en.wikipedia.org/wiki/Delta_Rule)。在权重更新方程中，

```
delta_w = a*(t - y)*g'(h)*x 
```

`t`是“目标输出”，在监督学习的情况下，这将是您的类标签或其他东西。但是无监督学习的“目标输出”是什么？

有人可以提供一个示例，说明您如何在无监督学习中使用 BP，特别是用于分类聚类？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T03:22:39.767

最常见的做法是训练[一个自动编码器](http://en.wikipedia.org/wiki/Autoencoder)，其中所需的输出等于输入。这使得网络尝试学习一种最能“压缩”输入分布的表示。

[这是一个描述不同方法的专利](http://www.freepatentsonline.com/5590218.html)，其中输出标签是随机分配的，然后有时会根据收敛速度翻转。这对我来说似乎很奇怪，但没关系。

我不熟悉使用反向传播进行聚类或其他无监督任务的其他方法。使用 ANN 的聚类方法似乎使用其他算法（[示例 1](http://arxiv.org/pdf/cs/0608115.pdf)、[示例 2](http://www.rimtengg.com/coit2007/proceedings/pdfs/40.pdf)）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T03:22:54.093

我不确定哪种无监督机器学习算法专门使用反向传播；如果有一个我没听说过。你能举个例子吗？

反向传播用于计算误差函数的导数，以训练人工神经网络相对于网络中的权重。之所以这样命名，是因为“错误”通过网络“向后”“传播”。在这种情况下您需要它，因为相对于目标的最终误差取决于函数的函数（函数的函数......取决于您的 ANN 中的层数。）然后您可以通过导数调整值以改善误差函数，由学习率调节（这是[梯度下降](http://en.wikipedia.org/wiki/Gradient_descent)）。

在无监督算法中，您不需要这样做。例如，在[k-Means](http://en.wikipedia.org/wiki/K-means)中，您试图最小化均方误差 (MSE)，您可以在给定分配的每个步骤中直接最小化误差；不需要渐变。在其他聚类模型中，例如[混合高斯](http://en.wikipedia.org/wiki/Mixture_of_gaussians#Gaussian_mixture_model)模型，[期望最大化](http://en.wikipedia.org/wiki/Expectation-maximization)(EM) 算法比任何基于梯度下降的方法更强大和准确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-27T03:57:56.100

您可能要问的是无监督特征学习和深度学习。

特征学习是我能想到的关于 NN 或其最近变体的唯一无监督方法。（一种称为 RBM 混合的变体类似于高斯混合，但您可以基于两者构建很多模型）。但基本上我熟悉的两个模型是 RBM（受限博尔兹曼机）和自动编码器。

自动编码器（可选地，稀疏激活可以在优化函数中编码）只是前馈神经网络，它以这样的方式调整其权重，使得输出是重建的输入。可以使用多个隐藏层，但权重初始化使用贪婪层明智训练以获得更好的起点。所以要回答这个问题，目标函数将自己输入。

RBM 是随机网络，通常被解释为对连接有限制的图形模型。在这种情况下，没有输出层，输入层和潜在层之间的连接是双向的，就像无向图模型一样。它试图学习的是输入（观察到的和未观察到的变量）的分布。在这里，您的答案也将是目标。

RBM 的混合（类似于高斯混合）可用于软聚类或 KRBM（类似于 K-means）可用于硬聚类。这实际上感觉就像学习多个非线性子空间。

[http://deeplearning.net/tutorial/rbm.html](http://deeplearning.net/tutorial/rbm.html)

[http://ufldl.stanford.edu/wiki/index.php/UFLDL_Tutorial](http://ufldl.stanford.edu/wiki/index.php/UFLDL_Tutorial)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-06T17:02:27.733

An alternative approach is to use something like generative backpropagation. In this scenario, you train a neural network updating the weights AND the input values. The given values are used as the output values since you can compute an error value directly. This approach has been used in dimensionality reduction, matrix completion (missing value imputation) among other applications. For more information, see [non-linear principal component analysis (NLPCA)](http://bioinformatics.oxfordjournals.org/cgi/reprint/21/20/3887) and [unsupervised backpropagation (UBP)](http://arxiv.org/abs/1312.5394) which uses the idea of generative backpropagation. UBP extends NLPCA by introducing a pre-training stage. An implementation of UBP and NLPCA and unsupervised backpropagation can be found in the waffles machine learning toolkit. The documentation for UBP and NLPCA can be found using the nlpca command.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T05:27:31.263

要将反向传播用于无监督学习，只需在算法的每个阶段将目标输出 t 设置为更新前到类中每个元素的平均距离最小的类。简而言之，我们总是尝试训练 ANN 将其输入放入与我们的输入最相似的成员中。由于此过程对输入比例敏感，因此有必要首先通过减去平均值并除以每个分量的标准偏差来标准化每个维度的输入数据，以便以比例不变的方式计算距离。

使用反向传播神经网络而不是距离集群中心定义的简单距离的优点是神经网络可以允许集群之间更复杂和不规则的边界。

# character-encoding - 这些角色是从哪里来的？

> ID：15514628
> 
> 赞同：1
> 
> 时间：2013-03-20T03:13:38.323
> 
> 标签：character-encoding, char

我听说`UTF-8`和`UTF-16`。但是以下字符从哪里来？

```
1⊙●○①⊕◎Θ⊙¤㊣★☆♀◆◇◣◢◥▲▼△▽⊿◤◥
2 ▆ ▇ █ █ ■ ▓ 回 □ 〓≡ ╝╚╔ ╗╬ ═ ╓ ╩ ┠ ┨┯ ┷┏ .
3 ┓┗ ┛┳⊥﹃﹄┌ ┐└ ┘∟「」↑↓→←↘↙♀♂┇rum ﹉﹊﹍﹎╭ .
4 ╮╰ ╯ *^_^* ^*^ ^-^ ^_^ ^︵^ ∵∴‖︱ ︳︴﹏﹋﹌︵︶︹︺ .
5 【】〖〗＠﹕﹗/ "_`,·。≈{}~ ～()_-『』√$@*&#※.
6 卐々∞Ψ∪∩∈∏の℡ぁ§∮〝〞ミ灬ξ№∑⌒ξζω＊
7 ¡ Þ ↘ ㊣ ◎ ○ ● ⊕ ⊙ ○△ ▲ ☆ ★ ◇ ◆ ■ ▄ █ ▌ ♀ ♥ ⊙ ◎ ↔ ◊の ★☆⊕◎Θ\﹏﹋﹌【】〖〗※-『』√∴卐 ≈ ∵ ∴§∮•.•♠♣♂ ◊ ♠ ♣ の ☆→ ぃ ￡ ..

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:19:00.083

一些字符来自 IBM Extended Ascii 字符集。

[http://ascii-table.com/ascii-extended-pc-table.php](http://ascii-table.com/ascii-extended-pc-table.php)

# iphone - 清除 IOS 6 上的 Web 应用本地存储

> ID：15514633
> 
> 赞同：0
> 
> 时间：2013-03-20T03:14:14.877
> 
> 标签：iphone, ios6

我是一名网络应用程序开发人员，试图测试我的应用程序，但当您将网络应用程序数据添加到主屏幕时，Apple 已经改变了他们保存网络应用程序数据的方式。

如何清除我的网络应用程序的本地存储，以便我可以看到我的代码更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:57:06.427

iOS 应用程序存储在沙盒中。所以每个应用程序都有自己的目录和工作空间。

在该工作空间中存储应用程序的所有数据。这包括文档、库文件、临时文件、应用程序包以及首选项文件。

当用户选择删除应用程序时，整个沙盒都会被删除，包括那些首选项。

*以下是一些处理应用沙箱数据的解决方案*

**删除 iPhone 沙箱中的所有文件**

```
NSFileManager *fileMgr = [[[NSFileManager alloc] init] autorelease];
NSError *error = nil;
NSArray *directoryContents = [fileMgr contentsOfDirectoryAtPath:documentsDirectory error:&error];
if (error == nil) {
    for (NSString *path in directoryContents) {
        NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:path];
        BOOL removeSuccess = [fileMgr removeItemAtPath:fullPath error:&error];
        if (!removeSuccess) {
            // Error handling
            ...
        }
    }
} else {
    // Error handling
    ...
} 
```

[**清除 Safari 缓存**](https://stackoverflow.com/questions/11754305/why-my-mobile-safari-cache-wont-clear)

**清除 UIWebView 缓存**

```
// Flush all cached data
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

[参考](https://stackoverflow.com/questions/4793278/deleting-all-the-files-in-the-iphone-sandbox-documents-folder)

希望这可以帮助！

# mysql - 计票以及用户是否在 MySQL 表中投票

> ID：15514636
> 
> 赞同：2
> 
> 时间：2013-03-20T03:14:35.153
> 
> 标签：mysql, sql

我有 3 个 MySQL 表：

特性表：

```
id    name
----------
 1    feature 1
 2    feature 2
 3    feature 3
 4    feature 4
 5    feature 5 
```

投票表：

```
userid featureid
----------------
1       1
1       2
1       3
1       4
2       1
2       2
2       3
2       4
3       1
3       2
3       3
4       1 
```

用户表：

```
id  name
--------
 1  John
 2  Alice
 3  Bob
 4  Mark
 5  Jane
 6  Mary
 7  Ann 
```

我需要在单个查询中获取：

*   总是所有功能，无论他们是否有投票权
*   无论投票数如何，每个功能都必须仅列出一次，即使它没有投票
*   列出的每个功能的投票计数
*   如果当前登录的用户投票支持列表中的当前功能，则为特殊标记 - 例如，如果用户 3 已登录，则列出所有用户的投票计数的所有功能，如果用户 3 投票支持某些功能有一个特殊字段指示他的投票或如果他没有，则为 NULL（投票表中的其他数据也必须包含在内，因此需要左连接）

到目前为止，我这样做了：

```
SELECT *,(SELECT COUNT(*) FROM votes WHERE votes.featureid=features.id) AS "votecnt"
FROM features
LEFT JOIN votes ON votes.featureid=features.id
LEFT JOIN users ON users.id=votes.userid
GROUP BY features.id 
```

如果用户 3 投票，它会列出所有功能，但没有特殊字段。我尝试了 IF，各种 WHERE 条件，经过多次尝试......没有想法了。

所需的输出可能如下所示：

```
features.id  features.name  votes.userid  votes.otherfields  users.id  users.name
     1         feature 1          4             -                4        Mark
     2         feature 2        NULL            -              NULL       NULL
     3         feature 3        NULL            -              NULL       NULL
     4         feature 4        NULL            -              NULL       NULL      
     5         feature 5        NULL            -              NULL       NULL 
```

列出了所有功能，只有用户 4 投票的功能才填充了其他连接表，其他的只是 NULL。如果其他人投票支持功能 2，它仍然为 NULL，因为它与用户 4 无关，因为在此示例中用户 4 已登录。

这是问题所在：

[http://sqlfiddle.com/#!2/c3d10/3](http://sqlfiddle.com/#!2/c3d10/3)

[http://sqlfiddle.com/#!2/c3d10/4](http://sqlfiddle.com/#!2/c3d10/4)

[http://sqlfiddle.com/#!2/c3d10/5](http://sqlfiddle.com/#!2/c3d10/5)

[http://sqlfiddle.com/#!2/c3d10/6](http://sqlfiddle.com/#!2/c3d10/6)

[http://sqlfiddle.com/#!2/c3d10/7](http://sqlfiddle.com/#!2/c3d10/7)

SQLFiddle 中的所有上述查询都应输出所有 5 个功能，而不管用户 ID 是什么。因此，必须以某种方式修改查询以显示所有功能 - 即使其他人投票支持某个功能，或者如果没有投票，或者当前用户投票支持该功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:41:42.560

这应该这样做：

```
SELECT tmp1.id, name, votecnt, user_id, user_name FROM 
(SELECT *,(SELECT COUNT(*) FROM votes WHERE votes.featureid=features.id) AS "votecnt" FROM features) as tmp1
LEFT JOIN (SELECT features.id as feature_id, users.id as user_id, users.name as user_name FROM features
JOIN votes ON votes.featureid=features.id
JOIN users ON users.id=votes.userid
WHERE users.id=3) as tmp2 on tmp1.id = tmp2.feature_id 
```

可能它不是最漂亮的sql，而且很可能还有优化的空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:39:07.847

我认为您要求返回所有功能，返回所有计数，但如果他们投票支持该功能，则只有用户信息。

如果您指定用户 ID，我会得到您正在寻找的结果

```
select f.id
, f.name
, u.id
, u.name
, v.votecnt
from features f
left join (select featureid, COUNT(userid) votecnt from votes group by featureid) v on v.featureid = f.id
left join votes v1 on v1.featureid = f.id and v1.userid = 4
left join users u on u.id = v1.userid 
```

我选择在左侧加入投票中指定用户 ID。在其他任何地方，它都会限制返回的总行数。

结果：

```
1   feature 1   4   Mark    4
2   feature 2   NULL    NULL    3
3   feature 3   NULL    NULL    3
4   feature 4   NULL    NULL    2
5   feature 5   NULL    NULL    NULL 
```

以“鲍勃”为例

```
select f.id
, f.name
, u.id
, u.name
, v.votecnt
from features f
left join (select featureid, COUNT(userid) votecnt from votes group by featureid)v on v.featureid = f.id
left join votes v1 on v1.featureid = f.id and v1.userid = 3
left join users u on u.id = v1.userid 
```

结果：

```
1   feature 1   3   Bob 4
2   feature 2   3   Bob 3
3   feature 3   3   Bob 3
4   feature 4   NULL    NULL    2
5   feature 5   NULL    NULL    NULL 
```

# dart - Dart - 如果我通过 Map 的键搜索而不是在 List 中执行 singleWhere，是否会提高性能？

> ID：15514637
> 
> 赞同：5
> 
> 时间：2013-03-20T03:14:36.653
> 
> 标签：dart

因此，例如，假设我有以下课程

```
class Foo{
  String id;
  Foo(this.id);
} 
```

我想要某种 Foo 的集合，然后能够通过 Foo 的 id 找到任何 Foo。我想比较这两种实现方式：

**使用地图：**

```
var foosMap  = <String, Foo>{"foo1": new Foo("foo1"), "foo2": new Foo("foo2")}; 
var foo2 = foosMap["foo2"]; 
```

**有一个列表：**

```
var foosList = <Foo>[new Foo("foo1"), new Foo("foo2")];
var foo2 = foosList.singleWhere((i) => i.id == "foo2"); 
```

第一种方式（使用地图）在性能方面是否更方便？还有其他需要考虑的因素吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T04:25:37.780

这实际上取决于您正在搜索的项目数量。如果您知道大 O 表示法，从映射中检索值是 O(1) 或常数时间，而在列表中线性搜索是 O(n) 或线性时间。这意味着无论一个地图中没有多少元素，查找时间都是相同的，但是列表的查找时间会随着元素数量的增加而增加。

因为很多程序员都使用哈希映射，而对于非常小的集合，列表通常更快。如果您曾经查看执行查找的性能关键代码，您有时会看到切换到列表而不是小型集合的映射的特殊情况。知道这是否是一个好策略的唯一方法是进行性能测试。

速度不是一切，而且我更喜欢在许多情况下地图语法的清晰性，假设你已经有一张地图。如果您必须构建地图只是为了执行查找，那么`singleWhere()`或者`firstWhere()`很棒。

# vba - PowerPoint 加载项的奇怪行为

> ID：15514640
> 
> 赞同：2
> 
> 时间：2013-03-20T03:15:16.640
> 
> 标签：vba, vsto, powerpoint

我正在开发一个`PowerPoint2007`附加组件，`VSTO(Visual Studio Tools for Office)` 我正在尝试添加一个`wavfile`幻灯片并修改波形文件的动画设置。当我修改`AnimationSettings.PlaySettings's`波形文件形状的成员属性然后删除幻灯片中的一些动画效果时出现问题。这种行为非常奇怪。我不明白为什么我修改了PlaySettings的成员属性后删除了一些动画效果。

代码 ：

```
Shape s = Globals.ThisAddIn.Application.ActivePresentation.Slides[slideIndex].Shapes.AddMediaObject(wavFilePath, 0f, 0f);
s.Left = DEFAULT_LEFT_POS;

// If the below code run, some of animation effect are deleted.
s.AnimationSettings.Animate = Microsoft.Office.Core.MsoTriState.msoTrue;
s.AnimationSettings.AdvanceMode = PpAdvanceMode.ppAdvanceOnTime;
s.AnimationSettings.AnimationOrder = 0;
s.AnimationSettings.PlaySettings.PauseAnimation = Microsoft.Office.Core.MsoTriState.msoFalse;
s.AnimationSettings.PlaySettings.PlayOnEntry = Microsoft.Office.Core.MsoTriState.msoTrue; 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:43:52.037

根据我使用`AnimationSettings`删除其他形状的所有“退出效果”的经验。您可以尝试探索以下 PowerPoint 对象/参考：

```
`(slide).TimeLine.MainSequence` 
```

它允许更改动画顺序（您可以添加声音形状，然后在任何退出效果开始之前将其向上移动）。

还要检查`(Shape).SoundEffect`对象是否不能很好地替代您的需求。我还将您问题的标签更改为 powerpoint-vba，因为它也引用了该区域。

# python - 在空间中找到比某个值更近的点

> ID：15514641
> 
> 赞同：0
> 
> 时间：2013-03-20T03:15:44.797
> 
> 标签：python, performance, algorithm, numpy, kdtree

在我正在开发的 python 应用程序中，我有一个 3D 点数组（大小在 2 到 100000 之间），我必须找到彼此相距一定距离内的点（比如在两个值之间，如 0.1 和 0.2） . 我需要这个用于图形应用程序，这个搜索应该非常快（对于 10000 个点的样本，大约需要 1/10 秒）

作为第一个实验，我尝试使用 scipy.spatial.KDTree.query_pairs 实现，对于 5000 点的样本，返回索引需要 5 秒。您知道任何可能适用于这种特定情况的方法吗？

关于应用程序的更多信息：

这些点代表原子坐标，距离搜索有助于确定原子之间的键。键不一定是固定的，但可以在每个步骤中发生变化，例如在氢键的情况下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T03:40:04.317

好问题！这是我的建议：

将每个坐标除以您的“epsilon”值 0.1/0.2/whatever 并将结果四舍五入为整数。这将创建一个点的“商空间”，其中不再需要使用距离公式来确定距离，而只需比较每个点的整数坐标即可。如果所有坐标都相同，则原始点之间的距离大约在 3 倍 epsilon 的平方根范围内（例如）。这个过程是 O(n) 并且应该花费 0.001 秒或更短的时间。

（注意：您可能希望使用除法和舍入产生的三个额外整数来增加原始点，这样您就不会丢失确切的坐标。）

使用字典式规则按数字顺序对点进行排序，并将坐标中的三个整数视为单词中的字母。这个过程是 O(n * log(n)) 并且应该肯定少于你的 1/10 秒的要求。

现在您只需继续浏览这个排序列表，并将每个点的整数坐标与前面和后面的点进行比较。如果所有坐标都匹配，那么两个匹配点都可以移动到您的“保留”点列表中，而所有其他点都可以标记为“丢弃”。这是一个 O(n) 过程，应该花费很少的时间。

结果将是所有原始点的子集，其中仅包含可能涉及任何键的那些点，键被定义为与原始集合中的其他点相距大约 epsilon 或更小。

这个过程在数学上并不精确，但我认为它绝对很快并且适合您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:47:58.643

我想到的第一件事是：如果我们计算集合中每两个原子之间的距离，它将是 O(N^2) 操作。它非常慢。如何引入具有某些单元大小的静态正交网格（例如接近您感兴趣的距离），然后确定属于网格的每个单元的原子（需要 O(N) 操作）在此过程之后，您可以减少搜索邻居的时间。

# php - 使用 mysql 和 php 创建特定查询

> ID：15514644
> 
> 赞同：1
> 
> 时间：2013-03-20T03:16:03.587
> 
> 标签：php, mysql, sql

我需要帮助创建特定查询，以下是我的存款表的示例，empId 是一个外键，它引用我的“用户”表的主键，即“用户 ID”注意：此处未显示用户表

```
 mysql> SELECT * FROM deposit
    -> ;
+------------+---------------+---------+-------------+-------------+-------------+-------+
|    CheckId | jobId         | payRate | jobLocation | hours       | date_paid   | empId |
+------------+---------------+---------+-------------+-------------+-------------+-------+
|       1512 | entertainment |      12 | store1      |       10.00 | 2013-03-02  |     1 |
|       1510 | entertainment |      12 | store1      |        8.00 | 2013-03-01  |     1 |
|       1507 | retail        |      10 | store1      |        8.00 | 2013-03-18  |     1 |
|       1506 | retail        |      10 | store1      |       20.00 | 2013-03-19  |     1 |
+------------+---------------+---------+-------------+-------------+-------------+-------+ 
```

我想要的是计算所有特定 jobId 所有小时的总和，在这种情况下，如果我正确地进行了查询，它将如下所示：

```
+---------------+---------------+---------+
| payID         | payRate       | hours   | 
+---------------+---------------+---------+
|  entertainment| 12            |      18 | 
|        retail | 10            |      28 | 
+---------------+---------------+---------+ 
```

在这种情况下，只有两个 jobId，但它可能有超过 2 个

这是我的查询，它只显示一个 payId，所以我需要帮助修复它

另请注意，电子邮件是我的用户表的一个属性

```
 <table>";
             $query = "SELECT jobId, payRate, SUM(hours) AS 'All_Hours'
                       FROM users INNER JOIN deposit ON userId = empId
                      WHERE users.email = '" . $_SESSION['email'] ."' 
                      GROUP BY jobId,payRate";

                      if (!$result) { //if the query failed
                          echo("Error, the query could not be executed: " .
                          mysqli_error($db) . "</p>");
                          mysqli_close($db); //close the database
                      } //by now we have made a successful query  
                      while ($row = mysqli_fetch_assoc($result)){
                      echo "<tr><td>" .$row['jobId'] . "</td>
                            <td>" .$row['payRate'] . "</td>
                            <td>" .$row['All_Hours'] . "</td>
                            </tr>";
                      }
              echo"</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:18:07.470

您忘记`GROUP BY`在查询中添加子句导致结果中只有一条记录，

```
SELECT jobId, payRate, SUM(hoursWorked) AS 'All_Hours'
FROM   users INNER JOIN paycheck ON userId = empId
WHERE  users.email = 'session_email_here' 
GROUP  BY jobId, payRate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:26:15.113

在存款台上

```
SELECT jobId, payRate, sum(hours) FROM deposit
group by 1, 2 
```

我还建议你让它更具关系性：`jobId`并且`jobLocation`需要移动到新表

# sql-server - Microsoft Report Builder 中多个字段的图表线

> ID：15514650
> 
> 赞同：0
> 
> 时间：2013-03-20T03:16:36.877
> 
> 标签：sql-server, reporting-services, sql-server-2008-r2, reportbuilder, reportbuilder3.0

我正在使用 Microsoft SQL Server Report Builder 并尝试根据数据集中的多个字段绘制一条线。基本上我有一个包含很多元素的数据集，每个元素都有一个类别字段，以及与前一年值相关的二十个字段。我希望能够按类别分组，然后为每个类别绘制一条线，查找二十年中每一年的总和值。

因此，我希望该行的 X 值为年份，而 Y 值为该类别在该年份的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:14:15.647

我将假设每个类别都有多行，其中包含年份、类别和值的字段。如果它是包含每年所有值的单行，那么事情会变得更加艰难。

在您的折线图上，您应该将类​​别分组为年份，将系列分组为类别，然后将值设为值字段的 SUM()。

# python - gunicorn + gevent monkey 是否自动将 threadlocals 修补为 greenlet-locals？

> ID：15514653
> 
> 赞同：5
> 
> 时间：2013-03-20T03:17:26.960
> 
> 标签：python, django, gevent, gunicorn, greenlets

在 gevent 模式下运行 gunicorn 时，是否已经自动应用[了此处描述的猴子补丁（尤其是用于线程本地的补丁）](http://www.gevent.org/gevent.monkey.html)，这些补丁使 threadlocals greenlet-locals？

（我正在运行 django 并且目前使用 threadlocals 来快速缓存大型查询结果——我知道 gevent/greenlet 使用传统线程的替代模型，因此我担心）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:26:45.937

看来我没有什么可担心的：

[https://github.com/benoitc/gunicorn/blob/master/gunicorn/workers/ggevent.py#L51](https://github.com/benoitc/gunicorn/blob/master/gunicorn/workers/ggevent.py#L51)

# python - python脚本单击按钮

> ID：15514659
> 
> 赞同：0
> 
> 时间：2013-03-20T03:18:01.340
> 
> 标签：python, button, scripting, web, click

我让这条鳕鱼在一个游戏网站上工作了很长时间，但现在他们改变了点击它的方式：-

```
def formRaid():
    #print formerID
    one = 1
    while one == 1:
        try:
            global _startTime
            _startTime = datetime.datetime.now()

            formpage = alo("http://"+server+".outwar.com/formraid.php?target=" + bossToRaidId+"&suid="+FORMER_ID).read()
            codeID = formpage.split('codeid" value="')[1].split('">')[0]

            Form = alo2("http://"+server+".outwar.com/formraid.php?target=" + bossToRaidId, "target=" + bossToRaidId + "&codeid=" + codeID + "&formtime=3&submit=Launch!").read()

            global RAID_ID, RAID_NAME
            RAID_ID = getRaidID(Form)
            RAID_NAME = getRaidName(Form)

            print ""
            print "***" + RAID_NAME + " Formed."
            one = 0
            return True

        except IndexError:
            print "Forming Error, retrying...."
            time.sleep(1) 
```

现在我必须点击一个按钮再去一次，这个按钮的信息是：-

```
<input type="submit" value="Join this Raid!" name="submit"> 
```

我如何进行以下使用的点击：-

```
formpage = alo("http://"+server+".outwar.com/formraid.php?target=" + bossToRaidId+"&suid="+FORMER_ID).read()
codeID = formpage.split('codeid" value="')[1].split('">')[0] 
```

或用于：-

```
Form = alo2("http://"+server+".outwar.com/formraid.php?target=" + bossToRaidId, "target=" + bossToRaidId + "&codeid=" + codeID + "&formtime=3&submit=Launch!").read() 
```

单击该按钮而不是以前的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T11:55:03.347

opener.open("http://"+server+".outwar.com/formraid.php?target=" + bossToRaidId + "&suid="+FORMER_ID, "formtime=3&message=&bomb=none&submit=Launch!")

仅适用于 2.7 python

# php - Oracle PHP PDO 异常：找不到驱动程序

> ID：15514665
> 
> 赞同：2
> 
> 时间：2013-03-20T03:18:16.620
> 
> 标签：php, oracle, pdo

我正在尝试编写一个脚本以连接到远程 oracle 数据库并执行一个简单的查询

通过广泛的搜索，我发现了以下脚本：

```
<?

$tns = "
    (DESCRIPTION =
        (ADDRESS = (PROTOCOL = TCP)(HOST = bogus.com.au)(PORT = 1521))
        (CONNECT_DATA =
            (SERVER = DEDICATED)
            (SERVICE_NAME = myDB )
        )
    )
";

$pdo_string = 'oci:dbname='.$tns;

try {
    $dbh = new PDO($pdo_string, 'test', 'fake');
} catch (PDOException $e) {
    echo "Failed to obtain database handle: " . $e->getMessage();
    exit;
}

$query = "SELECT * FROM someTable";

$stmt = $dbh->prepare($query);

if ($stmt->execute()) {
    echo "<h4>$query</h4>";
    echo "<pre>";
    while ($row = $stmt->fetch()) {
        print_r($row);
    }
    echo "</pre>";
}

?> 
```

但是我得到了错误`could not find driver`。所以我做了：

```
foreach(PDO::getAvailableDrivers() as $driver)
    echo $driver, '<br>'; 
```

哪个返回：

```
mysql
odbc
sqlite 
```

这告诉我我确实安装了驱动程序，是吗？

我究竟做错了什么？（诚​​然，我对使用 Oracle 数据库的 PHP 知之甚少，所以也许我错过了明显的..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:24:28.807

您必须在 PDO 中安装 Oracle 适配器：

[http://php.net/manual/en/ref.pdo-oci.php](http://php.net/manual/en/ref.pdo-oci.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T07:00:13.117

您必须配置您的服务器以启用 PDO_OCI 扩展。

转到`php.ini`并找到该行并从其开头`extension=php_pdo_oci.dll`删除逗号，然后重新启动您的 apache 服务。`;`

# c# - 使用 Webproxy C# 时 WebClient DownloadString 出错

> ID：15514668
> 
> 赞同：0
> 
> 时间：2013-03-20T03:18:43.860
> 
> 标签：c#, proxy, webclient, webproxy

我试图使用 WebClient.DownloadString() 但使用代理。我这样做：

```
 WebProxy wp = new WebProxy("http://000.000.000.000:80"); (here goes real proxy ip)
        WebClient wb = new WebClient();
        wb.Proxy = wp;
        try
        {
            string file = wb.DownloadString("http://google.com/");
            System.Console.WriteLine(file);
        }
        catch (Exception e)
        {
            System.Console.WriteLine(e);
        } 
```

调用 DownloadString 时会出现此错误：

> System.Net.WebException: Se ha terminado la conexion: Error inesperado de recepcion。---> System.IO.IOException: No se puede escribir datos de en la conexion de transporte: Se ha forzado la interruptcion de una conexion existente por el host remoto。---> System.Net.Sockets.SocketException: Se ha forzado la interrupcion de una conexion existente por el host remoto

如果我不使用代理，它工作正常。代理也可以正常工作，因为如果我在 Chrome 或 Firefox 中配置代理，我可以访问任何网页。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:50:21.040

报告的错误意味着有一个 RST（重置）数据包发送到您的计算机。它可能来自代理或某些挡路的防火墙，但该消息`No connection could be made because the target machine actively refused it`意味着某些东西强行关闭了连接（在 TCP 中，这意味着 RST 数据包）。我的第一个猜测是代理地址或端口设置不正确。

# android - google map api V3 未在 android 模拟器上显示

> ID：15514669
> 
> 赞同：1
> 
> 时间：2013-03-20T03:18:43.720
> 
> 标签：android, google-maps, google-maps-api-3

我正在做一个学校的安卓项目。我实现的功能之一是 google map api v3。但是它没有显示在android模拟器上。但它适用于网络。任何人都可以告诉我我的编码何时出错。非常感激。地图代码如下。Google Maps JavaScript API v3 示例：简单地图

```
 <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
 <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
 <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<meta charset="utf-8">
<style>
  html, body, #map-canvas {
    margin: 0;
    padding: 0;
    height: 100%;
  }
</style>
<script type="text/javascript"
src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>
  var map;
  function initialize() {
    var mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng(-34.397, 150.644),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

```
<div id="map-canvas" style="width: 300px; height: 300px;"></div>
  </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:36:02.717

打开您的 AndroidManifest.xml 文件并添加这两行

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:04:58.030

你忘记桥接模拟器的网络设备了吗？

[如何将安卓模拟器连接到互联网](https://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet)

上面的帖子可能会有所帮助。要检查，请尝试在您的模拟器中运行浏览器和谷歌地图应用程序并确保它们连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:49:51.613

如果您在应用程序中使用 WebView，则需要在清单中添加 android.permission.INTERNET。

首先检查它是否在浏览器中工作，就像 Ankur 说的那样。

# xml - XPath 和 FilePath

> ID：15514670
> 
> 赞同：0
> 
> 时间：2013-03-20T03:18:45.340
> 
> 标签：xml, xpath, xpointer

是否有任何标准（或实用）表示法可以一起表达文件路径和 xpath？

如...

```
xml.xml:///a/b/c 
```

我相信我在其他地方看到过，但我找不到该页面。

[更新]

我想我在问`XPointer`。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:27:24.143

您应该使用 a`#`代替：

```
xlink:href="http://dog.com/dogbreeds.xml#xpointer(id('Rottweiler'))" 
```

或者，更短的版本：

```
xlink:href="http://dog.com/dogbreeds.xml#Rottweiler" 
```

# javascript - 在 Java Script 中关闭窗口之前显示警告消息

> ID：15514674
> 
> 赞同：13
> 
> 时间：2013-03-20T03:18:59.350
> 
> 标签：javascript

我试过这个：

```
<body onunload="LogoutNoAsk();"> </body> 
```

功能是：

```
function LogoutNoAsk()
{
    alert("Please press the Logout button to logout.");
    parent.close();

} 
```

当我按下关闭（窗口右上角的“X”按钮）时，它会立即关闭而不会显示警告消息。怎么了？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-20T03:21:38.880

您实际上想要使用`onbeforeunload`允许您阻止关闭事件的事件。

有关详细信息，请参阅[MDN 参考](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)，但所需的代码是：

```
window.onbeforeunload = function(e) {
    return 'Please press the Logout button to logout.';
}; 
```

# android - 如何创建带有图标的菜单？

> ID：15514678
> 
> 赞同：1
> 
> 时间：2013-03-20T03:19:31.063
> 
> 标签：android, menu-items

我真的需要一些关于如何创建带有图标的菜单的指南或建议。

我正在编写一个Android应用程序，我想创建一个这样的菜单，当我进入这个应用程序时，我可以看到中心的“主”菜单，我可以编辑菜单的文本。我按下主图标菜单，“+”图标滑出，然后我可以通过按“+”添加子菜单。下一次，我进入这个应用程序，我可以看到主菜单图标和一些子菜单图标。如果我愿意，我可以按主菜单图标隐藏子菜单图标。（我不能发布图像，所以我希望你能理解）

真的需要帮助。

![在此处输入图像描述](../Images/0793e79908776f05d0368b64876efba4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:21:22.387

使用此代码在 android 中制作菜单。还可以从[Android™ Drawables下载这些图标](http://androiddrawables.com/menu.html)

> 资源/布局/menu.xml

```
<item android:id="@+id/menu_save"
      android:icon="@drawable/icon_save"
      android:title="Save" />

<item android:id="@+id/menu_search"
      android:icon="@drawable/icon_search"
      android:title="Search" />

<item android:id="@+id/menu_share"
      android:icon="@drawable/icon_share"
      android:title="Share" />

<item android:id="@+id/menu_delete"
      android:icon="@drawable/icon_delete"
      android:title="Delete" />  

<item android:id="@+id/menu_preferences"
      android:icon="@drawable/icon_preferences"
      android:title="Preferences" /> 
```

> AndroidMenusActivity.java

```
package com.androidhive.androidmenus;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.Toast;

public class AndroidMenusActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    // Initiating Menu XML file (menu.xml)
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.layout.menu, menu);
        return true;
    }

    /**
     * Event Handling for Individual menu item selected
     * Identify single menu item by it's id
     * */
    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {

        switch (item.getItemId())
        {
        case R.id.menu_bookmark:
            // Single menu item is selected do something
            // Ex: launching new activity/screen or show alert message
            Toast.makeText(AndroidMenusActivity.this, "Bookmark is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_save:
            Toast.makeText(AndroidMenusActivity.this, "Save is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_search:
            Toast.makeText(AndroidMenusActivity.this, "Search is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_share:
            Toast.makeText(AndroidMenusActivity.this, "Share is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_delete:
            Toast.makeText(AndroidMenusActivity.this, "Delete is Selected", Toast.LENGTH_SHORT).show();
            return true;

        case R.id.menu_preferences:
            Toast.makeText(AndroidMenusActivity.this, "Preferences is Selected", Toast.LENGTH_SHORT).show();
            return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }    

} 
```

![在此处输入图像描述](../Images/4166d86936a10b918f1b73591ead10de.png)

# drupal - Drupal自定义表单在同一页面上两次，我需要在提交的一个中显示错误，而不是在两个

> ID：15514680
> 
> 赞同：0
> 
> 时间：2013-03-20T03:19:42.523
> 
> 标签：drupal

我有一个自定义模块，它构建了一个包含几个字段的表单，到目前为止一切都很好。在我的一个页面中，我打印了此表单两次（不同的块），表单获得相同的“form_id”，因此当我提交其中一个并出现错误时，它们都会突出显示错误，并填充字段。我希望只有我提交的表单才会出现错误，有没有办法做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:57:36.067

对于任何有兴趣的人，要做到这一点，您需要使用 hook_forms。仅当传递给 drupal_get_form 的 form_id 不存在时才会调用此钩子，这很重要，如果您想使用它，请确保您的调用使用不存在的 form_id，例如：

```
//Defining the form:
function mx_wtransnet_form_contacto($form, &$form_state, $block = null, $formType = null) {  
} 
```

我想多次使用此表单并获得不同的错误处理程序，而不是加载我的表单（mx_transnet_form_contacto），我将调用一个不存在的表单：

```
$form = drupal_get_form("mx_wtransnet_form_contacto_invalid", "contacto-mini"); 
```

然后我创建我的钩子：

```
function mx_wtransnet_forms($form_id, $args) {
        $forms = array();
        if (strpos($form_id, '_contacto_') !==false) {
                $forms[$form_id] = array(
                'callback' => 'mx_wtransnet_form_contacto',
                 );
        }
return $forms;
} 
```

此函数将捕获我所有不存在的 druapl_get_form 调用，因此我可以处理/指导它们，在我的示例中，我所做的只是检查 form_id 是否包含*contacto*，然后将此表单的回调设置为原始函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:44:40.023

在这种情况下，最好创建另一个具有不同“form_id”但具有相同提交处理程序的表单。

另一种情况：当您在页面上两次输出相同的表单时，也可能会出现 JS 错误，因为表单元素的 ID 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:21:29.893

如果您不重复表单代码及其提交处理程序（DRY 原则），我建议创建一个具有表单数组的自定义函数

```
function form_my_custom($form_id){
 $form['my_first_field'] = array(); 
 $form['my_second_field'] = array();
 $form['#attributes']['id'] = $form_id; 
 $form['my_submit_button'] = array(
   '#submit' => array('my_custom_form_submit')
 ); 
 return $form;  

}

function my_block1_form(){ 
  return my_custom_form('my_form_id_1'); 
}

function my_block2_form(){ 
  return my_custom_form('my_form_id_2'); 
} 

function my_custom_form_submit(&$form, &$form_state){ 
  // your submit handler. 
} 
```

# c++ - 尝试使用 Source 而不是 Library 的静态库标头

> ID：15514681
> 
> 赞同：0
> 
> 时间：2013-03-20T03:19:44.533
> 
> 标签：c++, visual-studio-2012, static-libraries

所以在 VS 2012 中，我创建了一个我想在另一个项目中使用的静态库。当我尝试使用该库时，尝试使用源文件进行编译时出现错误

```
"fatal error C1083: Cannot open source file: '<file used in library>.cpp':
    No such file or directory 
```

我觉得我错过了一些简单的东西来让它按照我想要的方式工作，但我无法绕开我的脑袋来做这件事。

此外，这可能无关紧要，但是是否有任何自动化方法可以将标头组合到单个 .h 文件以用于库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:35:50.013

看起来您正在将库中的 .cpp 文件添加到您的项目中。这不是使用静态库的方法，而是在**配置属性 |中添加库的 .lib 文件（带有完整路径）。链接器 | 输入 | Additional Dependencies**，然后只需在项目文件中添加 #include 指令即可包含您需要使用的库中的任何标头。

# scala - 在scala的自定义控制结构中声明变量

> ID：15514685
> 
> 赞同：2
> 
> 时间：2013-03-20T03:19:51.097
> 
> 标签：scala

我想知道是否有办法在自定义控制结构的参数列表中创建临时变量。

本质上，我想创建一个类似于 for 循环的控制结构，我可以在其中创建一个变量 i，并且只能在循环体中访问 i：

```
for(i<- 1 to 100) {
   //loop body can access i here
}
//i is not visible outside 
```

我想在我的代码中做类似的事情。例如，

```
customControl ( myVar <- "Task1") {
    computation(myVar)
}

customControl ( myVar <- "Task2") {
    computation(myVar)
}
def customControl (taskId:String) (  body: => Any) = {
    Futures.future {
        val result = body

        result match {
            case Some(x) =>
                logger.info("Executed successfully")
                x
            case _ =>
                logger.error(taskId + " failed")
                None
        }

    }
} 
```

现在，我通过在自定义控制结构之外声明一个变量来解决这个问题，这看起来不太优雅。

```
val myVar = "Task1"
customControl {
    computation(myVar)
}

val myVar2 = "Task2"    
customControl {
    computation(myVar2 )
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:06:19.847

请注意，内置`for (x <- expr) body`只是语法糖

```
expr foreach (x => body) 
```

因此，可以通过定义自定义方法来实现您想要的（使用现有`for`语法） 。`foreach`

另请注意，已经有`foreach`一种适用于字符串的方法。你可以这样做：

```
case class T(t: String) {
  def foreach(f: String => Unit): Unit = f(t)
} 
```

*注意*：您也可以将`f`上面的结果类型从更改`Unit`为`Any`，它仍然可以工作。

这将使您能够做类似的事情

```
for (x <- T("test"))
  print(x) 
```

这只是一个微不足道的（无用的）示例，因为现在`for (x <- T(y)) f(x)`只是*缩写*（或者更确切地说是“延长”）`f(y)`。当然，通过将上述from`f`定义中的参数更改为其他内容，并从字符串到此类型进行相应的翻译，您可以获得更多有用的效果。`foreach``String``t`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:16:00.357

你可以这样做：

```
import scala.actors.Futures

def custom(t: String)(f: String => Any) = {
  Futures.future {
    val result = f(t)

    result match {
      case Some(x) =>
        println("Executed successfully")
        x
      case _ =>
        println(t + " failed")
        None
    }

  }
} 
```

然后你可以得到这样的语法，这不完全是你所要求的，但可以避免你在单独的行上声明变量：

```
scala> custom("ss") { myvar => println("in custom " + myvar); myvar + "x" }
res7: scala.actors.Future[Any] = <function0>
in custom ss
ss failed

scala> custom("ss") { myvar => println("in custom " + myvar); Some(myvar + "x") }
in custom ss
Executed successfully
res8: scala.actors.Future[Any] = <function0>

scala> 
```

# jquery - 顺序自动完成

> ID：15514688
> 
> 赞同：1
> 
> 时间：2013-03-20T03:20:03.547
> 
> 标签：jquery, jquery-autocomplete

考虑下表：

```
<table>
    <tr>
        <th>Country</th>
        <th>State/Province</th>
        <th>City</th>
    </tr>
    <tr>
        <td><input name="country_1" value="" /></td>
        <td><input name="stateProv_1" value="" /></td>
        <td><input name="city_1" value="" /></td>
    </tr>
    <tr>
        <td><input name="country_n" value="" /></td>
        <td><input name="stateProv_n" value="" /></td>
        <td><input name="city_n" value="" /></td>
    </tr>
    ...
</table> 
```

我想使用[jQuery UI 自动完成](http://jqueryui.com/autocomplete/#default)来帮助我的用户输入数据。的值用于`country_1`选择可能的值 用于`stateProv_1`选择 的可能值`city_1`。

[这个 Q&A](http://forum.jquery.com/topic/multiple-parameters-using-jquery-ui-for-autocomplete)很好地解释了这种顺序自动完成。

我的问题与 jQuery 位本身有关：我必须为每个输入标签复制自动完成代码吗？

```
$( "country_1" ).autocomplete({ ... });
$( "stateProv_1" ).autocomplete({ ... });
$( "city_1" ).autocomplete({ ... });
...
$( "country_n" ).autocomplete({ ... });
$( "stateProv_n" ).autocomplete({ ... });
$( "city_n" ).autocomplete({ ... }); 
```

或者每种*类型*的自动完成（Country、StateProv、City）是否有办法监控其所有输入？

**n**是可变的，具体取决于用户上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:22:04.463

您可以监控所有输入：

```
$( "input" ).autocomplete({ ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:26:54.267

您可以使用`class`for`input`然后应用`auto-complete`到`class`。

**HTML**

```
<td><input class="makemeauto" name="country_1" value="" /></td>
<td><input class="makemeauto" name="stateProv_1" value="" /></td>
<td><input class="makemeauto" name="city_1" value="" /></td> 
```

**jQuery**

```
$(".makemeauto").autocomplete({ ... }); 
```

**评论回复**

您需要`autocomplete`为每个元素分别调用：

```
<td><input class="makemeauto" name="country_1" value="" data-autocomplete-source ="source_country"/></td>
<td><input class="makemeauto" name="stateProv_1" value="" data-autocomplete-source ="source_stateProy"/></td>
<td><input class="makemeauto" name="city_1" value="" data-autocomplete-source ="source_city" /></td>

$('input.makemeauto').each(function()
{
    $(this).autocomplete({
        source: $(this).data('autocomplete-source')
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:30:22.960

您可能需要对 3 种类型重复它，而不是 3 种类型 X n 次

```
$( 'input[name^="country_"]' ).autocomplete({ ... });
$( 'input[name^="stateProv_"]' ).autocomplete({ ... });
$( 'input[name^="city_"]' ).autocomplete({ ... }); 
```

您可以使用`this.element`里面的源函数来做到这一点

就像是

```
$('input[name^="stateProv_"]').autocomplete({
    source: function(request, term){
        console.log(request, this.element);
        var name = this.element.attr('name');
        var idx = name.substring(10);
        var elcountry = $('input[name="country_' +  idx + '"]');
        console.log(idx, 'c', elcountry.val())
    }
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/T8j5q/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T03:34:19.610

您可以有 1 个功能来更新您的自动完成功能。也许给每种类型的输入一个类。

```
<td><input class="country" name="country_n" value="" /></td>
        <td><input class="state" name="stateProv_n" value="" /></td>
        <td><input class="city" name="city_n" value="" /></td>

$(function(){
  $(".country").change(countryChanged);
  $(".state").change(stateChanged);
});

function countryChange(){
  var $countryInput = $(this);
  var $stateInput = $countryInput.parent().next().children(".state");
  $stateInput.autocomplete({});
}
function stateChange(){
  //similar code sequence
} 
```

您还可以有一个带有开关的功能，该开关根据它是一个国家还是一个州等来确定要做什么。

# java - 将文本文件读入二维数组？

> ID：15514690
> 
> 赞同：0
> 
> 时间：2013-03-20T03:20:22.577
> 
> 标签：java, java-io

我想将文本文件列表读入二维数组。代码在读入数组时引发运行时错误。我怎样才能解决这个问题？

```
 public static void main(String[] args) throws IOException
   {    
   byte[][] str = null;
   File file=new File("test1.txt");
   str[0]= readFile1(file);

   File file2=new File("test2.txt");
   str[1]= readFile1(file2);
  }

 public static byte[] readFile1 (File file) throws IOException {

    RandomAccessFile f = new RandomAccessFile(file, "r");

    try {    
        long longlength = f.length();
        int length = (int) longlength;
        if (length != longlength) throw new IOException("File size >= 2 GB");

        byte[] data = new byte[length];
        f.readFully(data);
        return data;
    }
    finally {
        f.close();
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:23:56.613

首先

```
byte[][] str = null;
File file=new File("test1.txt");
str[0]= readFile1(file); 
```

最后一条语句将抛出`NullPointerException`，因为`str`此时为空。您需要分配数组：

```
byte[][] str = new byte[2][]; 
```

# javascript - 获取关注的元素类型

> ID：15514695
> 
> 赞同：0
> 
> 时间：2013-03-20T03:20:52.267
> 
> 标签：javascript, jquery

我正在构建一个页面，其中包含可以聚焦的各种锚点和表单元素，我想知道如果某些东西被聚焦，我如何获得当前聚焦的元素。我认为在 jQuery 中做到这一点的一种方法是使用`.is(:focus)`. 我正在寻找 jQuery 或 vanilla js 解决方案——只要是可行的。

这是我在伪代码中尝试做的事情：

```
if (something is focused){
    get the tag name of that which is currently focused and store that in a variable as a string.
}
else {
    alert("nothing is being focused on");
} 
```

另外，如果你能回答这个问题，请做：某事不总是专注的吗？这意味着当没有特定元素或没有任何特定元素被关注时，文档/正文才是焦点，直到代码或用户这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:30:19.520

假设你想用 jQuery 来做这件事，你正在寻找的是 jQuery`.prop()`方法。`$(someElement).prop('tagName')`将返回 的标签名称`someElement`。

只是把它放在一起，例如：http: [//jsfiddle.net/kZbYv/1/](http://jsfiddle.net/kZbYv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:39:04.607

您可以使用以下内容：

```
$('*:focus') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:39:36.043

您可以设置您关心的元素列表，也可以`focus`使用通配符选择器：

```
$(function () {
    var focusedEls = [];
    $('*:visible').bind('focus', function (e) {
        focusedEls.push(e.target);
        console.log( $.unique(focusedEls) );
    });
}); 
```

[小提琴：http://jsfiddle.net/xfwy2/](http://jsfiddle.net/xfwy2/)

有很多方法可以存储被聚焦的元素，我只是选择了一个数组。此外，我不确定您是否要跟踪每个元素的聚焦**时间**，但如果您这样做，只需放弃[`$.unique()`](http://api.jquery.com/jQuery.unique/)完整列表即可。

# vb.net - 每行有 2 个值的组合框有什么方法吗？

> ID：15514698
> 
> 赞同：2
> 
> 时间：2013-03-20T03:21:02.767
> 
> 标签：vb.net, winforms, listview, combobox

我正在寻找一个可以将组合框的功能与列表视图一起使用的选项。

这样做的原因是因为我的 SQL 查询不能有超过 1 个输出，在某些情况下我可以得到。

例如，我的 SQL 表看起来有点像这样

`Unique_ID - Name
123456789 - Simon
987654321 - Simon`

基本上同一个名字可以在数据库中多次出现，每个条目都有自己的 ID。

为了用户的利益，我不能让他们根据 ID 选择要编辑的记录，而是让他们根据名称选择记录。但是，当我的查询产生超过 1 条记录时，我会收到 MySQL 异常。

这是有问题的 MySQL 查询：
`"SELECT worldspace from survivor where is_dead = '0' _ and survivor.unique_id = (select unique_id from profile where name = '" & target & "')"`

然后，该查询的输出将用于另一个`UPDATE`查询。

那么，我的组合框是否可以同时将 ID 和名称作为值，它们之间有明确的分隔，以便整个值保持可读性，就像在 listview 元素中那样？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T05:29:39.850

我看到你已经得到了关于 WPF 中的一切是多么容易以及 WinForms 多么糟糕的 HighCore 处理。但是您可能有兴趣知道您也可以在 WinForms 中执行此操作。你只是做的有点不同。WinForms 和 WPF 中的标准设计习惯不同也就不足为奇了。这并不能证明一个比另一个“更好”是合理的，它只是意味着你需要学习如何使用你正在使用的那个。（虽然，诚然，使用 20 年前由 Windows 本身发明的 UI 框架来实现一些更花哨的东西有点困难。它*确实*具有相当出色的功能。）

格式化信息有两种基本方法：单行上的所有内容（我相信这是您在问题中所要求的）或两行上的信息片段，其中每个项目基本上是一个两行单元（这是什么HighCore 的 WPF 解决方案演示）。

# 单行格式

### 简单的方法

我们将首先考虑将所有内容放在一行上，这真的很简单。您不需要用于分隔的列，当您将项目添加到组合框中时，您可以使用某种独特的分隔符，例如问题中使用的垂直管道 ( `|`) 或破折号 ( `-`)。

这很好用，因为该`ComboBox.Items.Add`方法接受一个 type 的参数`Object`，它只是调用它`ToString`来获取控件中显示的值。如果你给它传递一个字符串，它会显示那个字符串。

```
myComboBox.BeginUpdate()
For Each record In myRecordSet
   myComboBox.Items.Add(String.Format("{0} | {1}", record.UniqueID, record.Name))
   ' or even...
   myComboBox.Items.Add(String.Format("{0} ({1})", record.UniqueID, record.Name))
Next record
myComboBox.EndUpdate() 
```

![](../Images/581679bd1fb8e7625ae5e372fd4c4324.png)                 或者                ![](../Images/df80fefd7b5ade4547b8caa1025b84f3.png)

### 通过 OOP 进行增量改进

您甚至可以将自定义类传递给`Add`跟踪唯一 ID 和名称属性（以及您想要的任何其他内容）的方法并覆盖该`ToString`方法以用于显示目的。

```
Public Class Record
    Public Property UniqueID As Long  ' maybe this should be a string too
    Public Property Name As String

    Public Overrides Function ToString() As String
        ' Generate the string that will be displayed in the combobox for this
        ' record, just like we did above when adding it directly to the combobox,
        ' except that in this case, it will be dynamically generated on the fly,
        ' allowing you to also track state information along with each item.
        Return String.Format("{0} | {1}", Me.UniqueID, Me.Name)
    End Function
End Class

' ...

' (somewhere else, when you add the items to the combobox:)
myComboBox.BeginUpdate()
For Each r In myRecordSet
   ' Create a Record object representing this item, and set its properties.
   Dim newRecord As New Record
   newRecord.UniqueID = r.UniqueID
   newRecord.Name     = r.Name
   ' ...etc.

   ' Then, add that object to the combobox.
   myComboBox.Items.Add(newRecord)
Next r
myComboBox.EndUpdate() 
```

### 修复锯齿

当然，如果每组中的第一项可以是可变长度的并且您使用的是可变宽度字体（即，除了代码编辑器之外，不是像地球上的每个 UI 那样等宽字体），分隔符不会对齐起来，你不会得到两个格式很好的列。相反，它看起来混乱而丑陋。

![](../Images/eb6296615b613b7665e9b1c8971d8d90.png)

如果 ComboBox 控件支持的制表符可以自动为我们处理所有内容，那就太好了，但不幸的是它没有。遗憾的是，这是对底层 Win32 控件的硬限制。

修复这个不规则的边缘问题是可能的，但它确实有点复杂。它需要接管组合框中项目的绘制，称为“所有者绘制”。

为此，您将其`DrawMode`属性设置为`OwnerDrawFixed`并处理[`DrawItem`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.drawitem.aspx)事件以手动绘制文本。您将使用该[`TextRenderer.DrawText`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.drawtext.aspx)方法来绘制标题字符串^([（因为[它与 WinForms 内部](https://stackoverflow.com/a/11671909/366904)使用的匹配；避免使用`Graphics.DrawString`）])，并[`TextRenderer.MeasureText`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.measuretext.aspx)在必要时获得正确的间距。绘图代码可以（并且应该）使用`DrawItemEventArgs`传递的 as提供的所有默认属性`e`。您不需要`OwnerDrawVariable`模式或处理`MeasureItem`事件，因为在这种情况下每个项目的宽度和高度不能变化。

只是为了给你一个想法，这是一个快速而肮脏的实现，它只是将下拉列表垂直分成两半：

```
Private Sub myComboBox_DrawItem(sender As Object, e As DrawItemEventArgs) Handles myComboBox.DrawItem
  ' Fill the background.
  e.DrawBackground()

  ' Extract the Record object corresponding to the combobox item to be drawn.
  Dim record As Record = DirectCast(myComboBox.Items(e.Index), Record)
  Dim id As String     = record.UniqueID.ToString()
  Dim name As String   = record.Name

  ' Calculate important positions based on the area of the drop-down box.
  Dim xLeft As Integer   = e.Bounds.Location.X
  Dim xRight As Integer  = xLeft + e.Bounds.Width
  Dim xMid As Integer    = (xRight - xLeft) / 2
  Dim yTop As Integer    = e.Bounds.Location.Y
  Dim yBottom As Integer = yTop + e.Bounds.Height

  ' Draw the first (Unique ID) string in the first half.
  TextRenderer.DrawText(e.Graphics, id, e.Font, New Point(xLeft, yTop), e.ForeColor)

  ' Draw the column separator line right down the middle.
  e.Graphics.DrawLine(SystemPens.ButtonFace, xMid, yTop, xMid, yBottom)

  ' Draw the second (Name) string in the second half, adding a bit of padding.
  TextRenderer.DrawText(e.Graphics, name, e.Font, New Point(xMid + 5, yTop), e.ForeColor, TextFormatFlags.Left)

  ' Finally, draw the focus rectangle.
  e.DrawFocusRectangle()
End Sub 
```

![](../Images/665a528dee3a58f1eea7ae550ef986bd.png)

现在，这看起来很不错。您当然可以改进`DrawItem`事件处理程序方法使用的技术，但只要组合框的大小适合它将显示的值，它就可以很好地工作。

# 多行格式

### 定义自定义组合框类

第二种方法，其中每个项目是一个双行组，如 HighCore 的 WPF 示例，最好通过继承内置的 ComboBox 控件并完全控制其绘图例程来完成。但这没什么好害怕的，子类化控件是一种标准的 WinForms 习惯用法，用于获得对 UI 的额外控制。（当然，您可以通过像我上面所做的那样处理事件来实现所有这些，但我认为子类化是一种更简洁的方法，并且如果您希望拥有多个行为相似的组合框，也可以促进重用。）

同样，您不需要，`OwnerDrawVariable`因为项目的高度不会改变。您将始终有两条线，因此固定高度可以正常工作。您只需要确保将[`ItemHeight`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.itemheight.aspx)属性设置为其正常值的两倍，因为您将有两行。您可以使用 以复杂的方式执行此操作`TextRenderer.MeasureText`，也可以通过将默认值乘以 2 来轻松执行此操作。我在此演示中选择了后者。

将此类添加到您的项目中，然后使用`MultiLineComboBox`控件而不是内置的`System.Windows.Forms.ComboBox`. 所有的属性和方法都是一样的。

```
Public Class MultiLineComboBox : Inherits ComboBox
   Public Sub New()
      ' Call the base class.
      MyBase.New()

      ' Typing a value into this combobox won't make sense, so make it impossible.
      Me.DropDownStyle = ComboBoxStyle.DropDownList

      ' Set the height of each item to be twice its normal value
      ' (because we have two lines instead of one).
      Me.ItemHeight *= 2
   End Sub

   Protected Overrides Sub OnDrawItem(e As DrawItemEventArgs)
      ' Call the base class.
      MyBase.OnDrawItem(e)

      ' Fill the background.
      e.DrawBackground()

      ' Extract the Record object corresponding to the combobox item to be drawn.
      If (e.Index >= 0) Then
         Dim record As Record = DirectCast(Me.Items(e.Index), Record)

         ' Format the item's caption string.
         Dim caption As String = String.Format("ID: {0}{1}Name: {2}", record.UniqueID.ToString(), Environment.NewLine, record.Name)

         ' And then draw that string, left-aligned and vertically centered.
         TextRenderer.DrawText(e.Graphics, caption, e.Font, e.Bounds, e.ForeColor, TextFormatFlags.Left Or TextFormatFlags.VerticalCenter)
      End If

      ' Finally, draw the focus rectangle.
      e.DrawFocusRectangle()
   End Sub
End Class 
```

![](../Images/c2ab34c8d3112d76a20893f68765e63b.png)

### 添加幻想和繁荣

我们现在得到的还不错，但是通过在 中的绘图代码上花费更多的精力`OnDrawItem`，我们可以添加一些额外的视觉幻想和华丽。

例如，如果没有选择矩形，就很难判断它们实际上是两行单元。这对于组合框控件来说是不寻常的，因此出于可用性原因，您的应用程序应该竭尽全力使这一点非常清晰。我们可以这样做的一种方法是缩进第二行。你还记得我说过内置的组合框控件不支持选项卡吗？好吧，这不再适用，因为我们现在正在自己绘制。我们可以通过在第二行的开头添加一些额外的填充来模拟选项卡。

如果您希望将标签（“ID：”和“名称：”）与实际值分开，您也可以这样做。也许你会让标签加粗并淡化文本颜色。

因此，您会看到，只需使用绘图代码，您就可以创建几乎任何您想要的效果。我们拥有完全的控制权，并且通过将其全部封装在一个`MultiLineComboBox`可以在所有地方重用的类中，您的其余代码甚至不必知道发生了任何特殊情况。很酷，对吧？

# 避免所有的工作

最后，如果我没有指出您可以跳过所有这些工作并[选择](https://stackoverflow.com/questions/4899169/multi-column-combobox-controls-for-winforms)已经编写的各种自定义多行组合框控件，那将是我的疏忽。

[这个](http://www.codeproject.com/Articles/3206/Multi-Column-ComboBox)很漂亮。当您单击组合框上的下拉箭头时，它实际上只是显示一个 ListView 控件。这样做，您可以免费获得 ListView 控件的所有格式设置细节，但它的行为就像一个常规的 ComboBox。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T03:39:05.003

这将是一个具有多行的 WPF 组合框：

```
<ComboBox ItemsSource="{Binding}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding ID, StringFormat='{}ID: {0}'}"/>
                <TextBlock Text="{Binding Name, StringFormat='{}Name: {0}'}"/>
            </StackPanel>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

数据项：

```
public class ComboItem
{
    public int ID { get; set; }

    public string Name { get; set; }
} 
```

结果：

![在此处输入图像描述](../Images/97b9aa186498c34a7b4e08643a6ed7ea.png)

致所有 hackforms 僵尸：技术优势不言而喻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-21T12:19:11.630

解决方案实际上更简单。尝试这个：

```
For i As Integer = 0 To dataSet.Tables(0).Rows.Count - 1

ComboBox1.Items.Add(dataSet.Tables(0).Rows(i)(0) + " | " + dataSet.Tables(0).Rows(i)(1) 
+ " | " + dataSet.Tables(0).Rows(i)(2))

Next 
```

但是您必须将其实施到您的代码和数据库中

# java - 如何在编组/解组期间忽略基类？

> ID：15514701
> 
> 赞同：2
> 
> 时间：2013-03-20T03:21:27.530
> 
> 标签：java, jaxb

我有一个扩展类`Thread`，我希望能够将配置信息存储为 xml。由于所有其他属性以及类中没有的内容，这显然不起作用`Thread`。在编组期间，我得到了一个很好的堆栈跟踪：

```
Exception in thread "main" com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
java.lang.Thread$UncaughtExceptionHandler is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at java.lang.Thread$UncaughtExceptionHandler
        at public java.lang.Thread$UncaughtExceptionHandler java.lang.Thread.getUncaughtExceptionHandler()
        at java.lang.Thread
        at Test
java.lang.Thread$UncaughtExceptionHandler does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.lang.Thread$UncaughtExceptionHandler
        at public java.lang.Thread$UncaughtExceptionHandler java.lang.Thread.getUncaughtExceptionHandler()
        at java.lang.Thread
        at Test

    at com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:91)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:451)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:283)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:126)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1142)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:248)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:235)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:445)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:637)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)
    at Test.main(Test.java:22) 
```

这是一个简单的类来演示这个问题：

```
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Test extends Thread{

    @XmlAttribute
    public String something;

    public Test(){
    }

    public static void main(String[] args) throws JAXBException {
        Test test = new Test();
        test.something = "My Value";

        JAXBContext jaxbContext = JAXBContext.newInstance(Test.class);

        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
        // output pretty printed
        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        jaxbMarshaller.marshal(test, System.out);

    }

} 
```

本质上，我只关心`Test`类中的内容，而不是继承的内容。所以像：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<test something="My Value"/> 
```

**那么在编组/解组期间如何忽略基类？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:24:39.557

为什么要扩展 Thread 而不是实现 Runnable？

无论如何，我认为您的解决方案不是编组和解组 Thread 或任何扩展它的类，而是创建一个单独的配置类来保存您将编组和解组的重要状态数据。

例如，

```
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlRootElement;

public class Test implements Runnable {

   private TestConfig config = new TestConfig();

   public Test() {
   }

   public void setConfigSomething(String something) {
      config.setSomething(something);
   }

   public TestConfig getConfig() {
      return config;
   }

   public void setConfig(TestConfig config) {
      this.config = config;
   }

   @Override
   public void run() {
      // foo
   }

   public static void main(String[] args) throws JAXBException {
      Test test = new Test();
      test.setConfigSomething("My Value");

      JAXBContext jaxbContext = JAXBContext.newInstance(TestConfig.class);

      Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
      jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
      jaxbMarshaller.marshal(test.getConfig(), System.out);    
   }
}

@XmlRootElement
class TestConfig {
   private String something;

   @XmlAttribute
   public String getSomething() {
      return something;
   }

   public void setSomething(String something) {
      this.something = something;
   }
} 
```

这将产生预期的输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<testConfig something="My Value"/> 
```

我想另一种可能的解决方案是尝试使用诸如 XmlAdapter 之类的适配器类型，也许最好的解决方案是[按照 Blaise Doughan 的建议使用 MOXy](https://stackoverflow.com/a/13240796/522444)。

# php - 无法打开流权限被拒绝

> ID：15514705
> 
> 赞同：2
> 
> 时间：2013-03-20T03:21:59.243
> 
> 标签：php, html, image

我正在创建一个个人资料图片上传器，用户可以在其中选择一个文件并上传它，但我收到此错误：

```
Warning: move_uploaded_file(user_files/profile_img/c3487ff77d.jpg) [function.move-    uploaded-file]: failed to open stream: Permission denied in     /Applications/XAMPP/xamppfiles/htdocs/projects/lr/core/functions/users.php on line 4

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/Applications/XAMPP/xamppfiles/temp/phpi0WECJ' to 'user_files/profile_img/c3487ff77d.jpg' in /Applications/XAMPP/xamppfiles/htdocs/projects/lr/core/functions/users.php on line 4 
```

第二到第五行是：

```
function change_profile_image($user_id, $file_temp, $file_extn) {
$file_path = 'user_files/profile_img/' . substr(md5(time()), 0, 10) . '.' . $file_extn;
move_uploaded_file($file_temp, $file_path);
} 
```

login.php 文件中的其余部分是：

```
if (isset($_FILES['profile_img']) === true) {
            if (empty($_FILES['profile_img']['name']) === true) {
                echo 'Please choose a file!';
            } else {
                $allowed = array('jpg', 'jpeg', 'png');

                $file_name = $_FILES['profile_img']['name'];
                $file_extn = strtolower(end(explode('.', $file_name)));
                $file_temp = $_FILES['profile_img']['tmp_name'];

                if (in_array($file_extn, $allowed) === true) {
                    change_profile_image($session_user_id, $file_temp, $file_extn);
                } else {
                    echo 'Invalid file type! Allowed Types: ';
                    echo implode(', ', $allowed);
                }
            }
        }

        if (empty($user_data['profile_img']) === false) {
            echo '<img src="', $user_data['profile_img'],'" alt="', $user_data['first_name'] ,'\'s Profile Image">';
        } 
```

我不确定我做错了什么？它不是我的.htaccess，它必须是代码，但为什么呢？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T03:24:43.133

文件夹的权限是什么？您可能需要更改它以使 PHP 能够对其进行写入。

# css - 背景图片滚动 IE

> ID：15514712
> 
> 赞同：0
> 
> 时间：2013-03-20T03:23:01.027
> 
> 标签：css, internet-explorer

1230sharp.com

出于某种原因，背景图像随着网站滚动。我有值“背景位置：固定”和背景附件：“本地”，我遇到了同样的问题。

1230sharp.com/#services - 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:15:39.497

好的，因为ie8不支持`background-attachment:local`

它使用`background-attachment:fixed`. 如果你删除它，你应该没问题。

意思是不要将任何一个用于`.section`div 或任何您不想让背景滚动的地方。

我删除了它们，它在 chrome 和 ie8 中对我有用 :)

## 更新

您实际上可以切换到`background-attachment: scroll`而不是，`local`这对于 ie8 和 chrome 以及其他应该也适用。

来源[**这里**](http://www.quirksmode.org/css/backgroundattachment.html)

## 已编辑

使用`background-attachment: scroll !important;`这种方式它应该覆盖`local`当前浏览器（如 chrome）并记住清除缓存

# android - ViewPager 从父级获取 onClick 事件？

> ID：15514715
> 
> 赞同：0
> 
> 时间：2013-03-20T03:23:14.683
> 
> 标签：android

我有这样的布局：

```
<LinearLayout id="@+id/parent" clickable="true">
  <ViewPager />
</LinearLayout> 
```

以及父级的点击监听器。但它不响应点击事件。似乎viewpager会接受它们。有没有办法让父母处理点击事件？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T04:12:35.667

```
final View myview2;
View view=(View) myViewPager.findViewById(position);
myview2 = (View) ((ViewGroup) view).getParent();

if (myview2 instanceof LinearLayout) {
Log.d("instanceof", "linearLayout");
} 
```

如果您将视图作为 instanceof 使用，请在此处`LinearLayout`添加 clicklistener`myview2`

以了解有关`getParent();`

[http://developer.android.com/reference/android/view/ViewParent.html#getParent()的更多信息](http://developer.android.com/reference/android/view/ViewParent.html#getParent())

如果`LinearLayout`是*根视图*，那么您可以使用：

```
View view=findViewById(R.id.main);
View v1 = view.getRootView(); 
```

如果您对`Views`内部感到担忧，`ViewPager`那么您可以修改`getParent()`为`getChildAt(0)`.

你也可以使用：

`myLinearLayout.bringToFront();`

# ios - 如何从非ARC项目更改为使用ARC？

> ID：15514720
> 
> 赞同：0
> 
> 时间：2013-03-20T03:24:10.873
> 
> 标签：ios, xcode

我有一个非ARC模式的项目。如何在不创建新项目的情况下将其更改为 ARC 模式？

是否有任何自动转换方法、库或方式？我还想要自动删除发布，自动发布并更改一些文本（保留 -> 强，...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:28:05.210

此屏幕截图将帮助您

![在此处输入图像描述](../Images/36ed9675085871b294bf0c83b28ff242.png)

阅读此[DaveOnCode](http://www.daveoncode.com/2011/10/24/migration-to-arc-automatic-reference-counting-using-xcode-4-2-refactor/)并将[您的代码迁移到 Objective-C ARC](http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/)。

# java - 如何在整数数据类型的休眠分离标准中使用 LIKE？

> ID：15514721
> 
> 赞同：10
> 
> 时间：2013-03-20T03:24:19.190
> 
> 标签：java, hibernate, model-view-controller, sql-like

我必须做`Restrictions.like("sequenceNo", "%" + Integer.valueOf(sequenceNo.trim()) + "%")`。

该字段`sequenceNo`是整数类型，但`sequenceNo`参数值是字符串。我的问题是我得到了一个例外`java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer`。由于某些原因，我真的必须将我的参数设置为字符串数据类型。当我在 SQL 中尝试使用 LIKE 整数时，它可以工作。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T10:32:49.073

You cannot add Criteria`s property restrictions for the purpose, as during fetching, property value specifiedwould be casted according to the 'field type' specified in Entity class.

However, a solution would be using SQLRestriction of criteria, to by pass casting. I have tested and this works.

```
yourDetachedCriteriaObj.add(Restrictions.sqlRestriction(" sequenceNo LIKE '%"+yourSequenceNumToSearch+"%' ")); 
```

To get list you would do like below

```
List ls = yourDetachedCriteriaObj.getExecutableCriteria(yourSession).list();
// iterate over list or do whatever. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T14:03:00.440

我很惭愧，但我确实遵循了 postgres 的解决方法

```
crit.add(Restrictions.sqlRestriction(entry.getKey()+"::text like '%"+entry.getValue().replace("'", "''")+"%'")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-31T13:08:50.463

```
yourDetachedCriteriaObj.add(Restrictions.sqlRestriction(" sequenceNo LIKE '%"+yourSequenceNumToSearch+"%' ")); 
```

禁用类型转换的返回错误：

运算符不退出：整数~~未知提示：没有运算符与给定的名称和参数类型匹配。您可能需要添加更显式的类型转换。

所以，我们可以使用这段代码：

```
yourDetachedCriteriaObj.add(Restrictions.sqlRestriction(" sequenceNo ::text LIKE '%"+yourSequenceNumToSearch+"%' ")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-10T12:41:48.030

对于整数搜索参数

条件 = session.createCriteria(demo.class).add(Restrictions.sqlRestriction("sequenceNo LIKE '%"+searchParameter+"%'"));

尝试这个...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-26T09:58:00.610

我的 postgres 修改

```
cr34.add(Restrictions.sqlRestriction(cr34.getAlias()+"_.field::text like '%"+ fieldVal+"%'"));

```

# arrays - 从 sqlite 获取光标数据到字符串数组

> ID：15514724
> 
> 赞同：0
> 
> 时间：2013-03-20T03:24:29.280
> 
> 标签：arrays, string, simplecursoradapter, listadapter

Newbee 问题：下面的两个片段都可以使用，来自字符串数组或 SQLite 表中的游标。现在，如何将这些值从表中获取到字符串数组中，以便我可以操作它们，然后将它们显示为 lstAdapter？
（在添加大量评论之前，我可以提供完整的源代码，但 14 页 10 pt. 最小页眉页脚）。

我已经尝试了很多来自这里和其他地方的样品。大多数会产生我没有弄清楚的错误，休息不起作用，所以我错过了一些东西。

这种结构最终将成为我的 WIMM One 应用程序的一部分，因此它需要是 Android 版本 7。

```
//From my ...ListFragment:
//This works; I get "First", "Second", etc. listed on my screen:
//-----------------------
private SimpleCursorAdapter mAdapter;
private ListAdapter lstAdapter;
. . . 
    Log.d("RemindLF","S onCrt: NEW");
// an array of string items to be displayed        
    String[] strLstitems = new String[] 
             {"first", "Second", "Third", "Fourth"};
//
    lstAdapter = new ArrayAdapter<String>(getActivity(),
            R.layout.reminder_row, R.id.text1, strLstitems);
//
// Call to SetListAdapter()informs ListFragment how to fill ListView
    setListAdapter(lstAdapter);
    getLoaderManager().initLoader(0, null, this);
    Log.d("RemindLF","X onCrt:" + strLstitems[0]);

//This also works; I get the values of one column from each record listed on my screen
//--------------------------
private ArrayAdapter aryAdapter;
. . . 
    Log.d("RemindLF","X onCrt: BASE" ); 
    String[]  strItems =  new String[]  
      { 
       ReminderProvider.COLUMN_BODY
      };
    Log.d("RemindLF","X onCrt:strI:" + strItems[0]);          
    int[] iCnt = new int[]
      {  
       R.id.text1
  };

    mAdapter =  new SimpleCursorAdapter(getActivity(),R.layout.reminder_row,
                null, strItems, iCnt, 0);

    setListAdapter(mAdapter);
getLoaderManager().initLoader(0, null, this);

//Other pieces
//------------
//Loader set-up:
@Override
public Loader<Cursor> onCreateLoader(int ignored, final Bundle args)
   {
    Log.d("RemindLF","S LoadCSR");
    return new CursorLoader(getActivity(), ReminderProvider.CONTENT_URI, null, null, null, null);
   }
@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor)
   {
    Log.d("RemindLF","S LoadFin");
    mAdapter.swapCursor(cursor);
   }

REMINDER_LIST.XM:L
<?xml version="1.0" encoding="utf-8"?>
<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.dummies.android.taskreminder.ReminderListFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

REMINDER_ROW.XML:
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:padding="10dip" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T13:17:59.467

我不确定这是否是最好的方法，但你总是可以尝试这样的事情：

```
private String[] fromCursorToStringArray(Cursor c){
    String[] result = new String[c.getCount()];
    c.moveToFirst();
    for(int i = 0; i < c.getCount(); i++){
        String row = c.getString(c.getColumnIndex(ReminderProvider.COLUMN_BODY));
        //You can here manipulate a single string as you please
        result[i] = row;
        c.moveToNext();
    }
    return result;
} 
```

也作为一个 ArrayList：

```
private ArrayList<String> fromCursorToArrayListString(Cursor c){
    ArrayList<String> result = new ArrayList<String>();
    c.moveToFirst();
    for(int i = 0; i < c.getCount(); i++){
        String row = c.getString(c.getColumnIndex(ReminderProvider.COLUMN_BODY));
        //You can here manipulate a single string as you please
        result.add(row);     
        c.moveToNext();
    }
    return result;
} 
```

当然，在这些方法之后，您将拥有可以根据需要操作的字符串数组（列表）。它应该适用于 API 7，它不使用任何高级调用。

还有另一种选择，即创建您自己的适配器，扩展 SimpleCursorAdapter 并覆盖 getView() 方法以“即时”修改字符串，但对于这种特殊情况，它对我没有吸引力。

# node.js - FineUploader onComplete 不使用 CoffeeScript 触发

> ID：15514725
> 
> 赞同：1
> 
> 时间：2013-03-20T03:24:32.863
> 
> 标签：node.js, coffeescript, fine-uploader

我正在使用 Node.JS、Express 和 CoffeeScript 使用 FineUploader 创建我的第一个项目。到目前为止，一切都运行良好，只有一个例外。上传完成后，我将返回一个 JSON 对象，其中包含成功变量以及继续进行所需的另一个变量。不幸的是，我无法成功触发 onComplete 回调。我相信我的所有代码都是正确的，并且 Chrome 控制台没有抛出任何错误。我也尝试在 onComplete 方法中打印到 Chrome 控制台，但无济于事。任何帮助将不胜感激。

```
 uploader = new $("#collaboration-fine-uploader").fineUploader
        autoUpload: false
        multiple: false
        validation: 
            allowedExtensions: ['pdf', 'doc', 'docx', 'ppt', 'pptx', 'xls', 'xlsx']
            sizeLimit: 1024*1024*1024*10 # 10MB
        text: 
            uploadButton: "<i class='icon-plus icon-white'></i> Select Files"
        request: 
            endpoint: "/files/discussions/collaborations/upload"
        callbacks:
            onComplete: (id, fileName, responseJSON)  ->
                if (responseJSON.success)
                    alert "response success"
                    discussionId = responseJSON.discussionId
                    $.ajax
                        type: "GET"
                        url: "/courses/"+serverData.course._id+"/discussions/"+discussionId
                        beforeSend: (xhr) ->
                            xhr.setRequestHeader 'x-pjax', 'true'
                        success: (html) ->
                            # Replace the old html
                            $(".discussions-tab").html html
                            $(".new-discussion").slideUp()
                            $("#new-discussion-modal").deactivateModal()

                            # History push
                            window.history.pushState window.history.state, "Discussions", "/courses/"+serverData.course._id+"/discussions/"+discussionId

                            # Scroll to top
                            $.scrollTo 0

    $(".trigger-upload-and-submit").on "click", (e) ->
        e.preventDefault()
        uploader.fineUploader "setParams",
            discussion: 
                title: $(".new-collaboration .discussion-title").val()
                body: $(".new-collaboration .discussion-body").val()
                groupId: serverData.course._id
                showProfessors: $(".new-collaboration .show-professor-checkbox").attr("checked")
                showStudents: $(".new-collaboration .show-students-checkbox").attr("checked")
                type: "Collaboration"

        uploader.fineUploader("uploadStoredFiles") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:40:54.597

检查[文档](http://docs.fineuploader.com/integrating/modes/using-jquery-plugin.html)`jQuery`部分。

如果您使用 jQuery 插件，则需要监听“完成”事件。

```
uploader.on 'complete', (id, fileName, responseJSON)  ->
  if (responseJSON.success)
    // Other code 
```

# iphone - 如何检查是否有东西存储在 iPhone 钥匙串中？

> ID：15514730
> 
> 赞同：3
> 
> 时间：2013-03-20T03:24:50.480
> 
> 标签：iphone, sdk, keychain

我有此代码当前将信息存储到 iPhone 钥匙串中。我如何使用简单的 if 语句检查是否已经存储了同名的东西以防止双重存储并告诉我这是否是用户第一次使用该应用程序？

```
KeychainItemWrapper* keychain = [[KeychainItemWrapper alloc] initWithIdentifier:@"KeychainTest" accessGroup:nil];
        [keychain setObject:username.text forKey:(__bridge id)(kSecAttrAccount)];
        [keychain setObject:password.text forKey:(__bridge id)(kSecValueData)];
        keychain = nil;

        usernameAll = [keychain objectForKey:(__bridge id)kSecAttrAccount];
        passwordAll = [keychain objectForKey:(__bridge id)kSecValueData]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:33:26.300

你不会造成双重存储。您将覆盖任何现有值。

创建您的钥匙串对象，然后调用`objectForKey:`. 如果结果是，`nil`那么您知道该键不存在现有值。

```
KeychainItemWrapper* keychain = [[KeychainItemWrapper alloc] initWithIdentifier:@"KeychainTest" accessGroup:nil];
if ([keychain objectForKey:(__bridge id)(kSecAttrAccount)]) {
    // existing value
} else {
    // no existing value
} 
```

检查用户是否是第一次使用应用程序通常是通过`NSUserDefaults`在第一次使用应用程序时写入一个值来完成的。启动时，会检查此值。如果该值存在，则不是第一次运行。如果您需要此检查以在应用程序删除和重新安装后继续存在，请使用钥匙串而不是`NSUserDefaults`存储此标志。

# c# - 访问对象时使用字符串代替对象

> ID：15514731
> 
> 赞同：1
> 
> 时间：2013-03-20T03:24:53.463
> 
> 标签：c#, object, charts

首先，我确定我在这里使用了错误的术语，但如果有人对此发表评论，我会修复它。请温柔一点。

所以我`charts`在一个页面上有多个，我在每个页面上执行几乎相同的操作。出于演示目的，让我们称我`charts`为：`chart1`, `chart2`, ...，`chartn`其中*n*在 20 附近。我想做的是将它放在一个`for`循环中，并在一小段代码中执行所有工作，尤其是如果我以后必须调整它。

所以我的问题是我是否可以改变代表对象的*n*部分（术语？），以便我可以更有效地完成这项工作。

IE：

```
for(int i = 0; i < 20; i++)
{
    String chartName = "chart" + i;
    chartName.Series.Clear();
} 
```

我有一种感觉，你不能用字符串做到这一点，所以我正在考虑做一个`foreach`，但我不知道如何用图表做到这一点。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:29:00.993

你应该把图表放在一个列表中。例如，这会创建一个`Chart`对象列表（或任何您的图表类型）：

```
List<Chart> charts = new List<Chart>(); 
```

然后你可以添加图表：

```
charts.Add(new Chart()); 
```

并使用它们：

```
for (int i = 0; i < charts.Count; i++)
{
    charts[i].Series.Clear();
} 
```

当然，您可以将`charts`变量设置为类中的字段。

* * *

您可以像这样直接初始化列表（或数组或字典¹）：

```
List<Chart> charts = new List<Charts>()
{
    new Chart(),
    new Chart(),
    existingChart1,
    existingChart2
}; 
```

或者，如果您使用该语法创建一个新的对象数组......

```
Chart[] arrayOfCharts = new []
{
    new Chart(),
    new Chart(),
    existingChart1,
    existingChart2
}; 
```

...然后您可以使用以下命令一次添加多个对象`AddRange`：

```
charts.AddRange(arrayOfCharts); 
```

* * *

¹ ) 您可以在任何具有公共方法的对象上使用这种所谓的*集合初始化语法。*`Add`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:31:13.360

您可以从这样的图表列表/数组/集合中访问您的图表吗？

```
for (int i = 0; i <= 19; i++) {
  String chartName = "chart" + i;
  Charts(chartName).Series.Clear();
} 
```

或者可能

```
for (int i = 0; i <= 19; i++) {
  String chartName = "chart" + i;
  Charts(i).Series.Clear();
} 
```

# python - 使用带有数组及其单个元素的 numpy.in1d() 的不同结果

> ID：15514734
> 
> 赞同：1
> 
> 时间：2013-03-20T03:25:16.550
> 
> 标签：python, numpy

我正在用 Python 编写代码，但遇到了一些问题。我有两个数组，比如说 A 和 B，它们都包含 ID。A 具有所有 ID，B 具有属于某个组的 ID。我想要做的是使用代码获取 B 元素在 A 中的位置：

```
>>> print B
[11600813 11600877 11600941 ..., 13432165 13432229 13434277]
>>> mask=np.nonzero(np.in1d(A, B))
>>> print A[mask]
[12966245 12993389 12665837 ..., 13091877 12965029 13091813] 
```

但这显然是错误的，因为我没有恢复 B 的值。检查我是否使用`numpy.in1d()`正确，我尝试了：

```
>>> mask=np.nonzero(np.in1d(A, B[0]))
>>> print A[mask]
[11600813] 
```

这是正确的，所以我猜 'B' in 有问题`numpy.in1d()`。我尝试直接使用布尔值`np.in1d(A, B)`而不是将其转换为索引，但它不起作用。我也尝试使用`B = numpy.array(B)`, `B = list(B)`，但它们都不起作用。

但如果我这样做`B = numpy.array(B)[0]`，`B = list(B)[0]`它仍然适用于该元素。不幸的是，我不能为每个元素做一个“for”循环，因为`len(A)`它是 16777216 和`len(B)`9166，所以它需要很多时间。

我还确保 B 的所有元素都在 A 中：

```
>>> np.intersect1d(A, B)
[11600813 11600877 11600941 ..., 13432165 13432229 13434277] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:42:35.483

您可以使用`numpy.argsort`,`numpy.searchsorted`来获取职位：

```
import numpy as np
A = np.unique(np.random.randint(0, 100, 100))
B = np.random.choice(A, 10)

idxA = np.argsort(A)
sortedA = A[idxA]
idxB = np.searchsorted(sortedA, B)
pos = idxA[idxB]
print A[pos]
print B 
```

如果您想要更快的方法，请考虑使用 pandas。

```
import pandas as pd
s = pd.Index(A)
pos = s.get_indexer(B)
print A[pos]
print B 
```

# java - Java 帮助：重叠矩形在矩形重叠处绘制新颜色

> ID：15514738
> 
> 赞同：1
> 
> 时间：2013-03-20T03:25:49.077
> 
> 标签：java, swing, oop, awt, java-2d

所以我正在处理一个 Java 任务，我必须创建一个 Rectangle 类，该类在一个绘制重叠矩形的程序中使用，并且在矩形重叠的地方，一个新的矩形被绘制出来，具有新的颜色。我已经包含了硬件描述的链接，因为我认为让你看一下比我试图解释它最简单.. [http://myslu.stlawu.edu/~ltorrey/courses/spring13/cs219/hw /hw6.html](http://myslu.stlawu.edu/~ltorrey/courses/spring13/cs219/hw/hw6.html)

我目前坚持创建 getOverlap 方法，该方法绘制新的重叠矩形。我必须创建一个明显绘制矩形的 draw 方法，并且对 getOverlap 方法是否为先前定义的变量定义新参数然后重新路由到 draw 方法感到困惑？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T03:36:50.107

通过一点点巧妙的使用，`Area`您可以获得`Graphics2D`API 来为您做这件事。

基本上，我创建了`Area`一个对两个矩形进行异或运算的结果。`Area`然后我从将两个矩形加在一起的结果中减去这个

![在此处输入图像描述](../Images/3a5108227f484ed188f8f3964c1922a9.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.geom.Area;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class OverlappingRectangles {

    public static void main(String[] args) {
        new OverlappingRectangles();
    }

    public OverlappingRectangles() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            Rectangle r1 = new Rectangle(0, 0, 150, 150);
            Rectangle r2 = new Rectangle(50, 50, 150, 150);

            g2d.setColor(Color.RED);
            g2d.fill(r1);
            g2d.setColor(Color.BLUE);
            g2d.fill(r2);

            Area a1 = new Area(r1);
            a1.exclusiveOr(new Area(r2));
            Area a2 = new Area(r2);
            a2.add(new Area(r1));
            a2.subtract(a1);

            g2d.setColor(Color.GREEN);
            g2d.fill(a2);

            g2d.dispose();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T04:30:43.287

使用 MadProgrammer 的代码，我发现了一些更简单的方法来做到这一点：

使用区域：

```
Area yellow = new Area(r1);
yellow.intersect( new Area(r2) );
g2d.setColor(Color.YELLOW);
g2d.fill(yellow); 
```

或使用另一个矩形：

```
Rectangle green = r1.intersection(r2);
g2d.setColor(Color.GREEN);
g2d.fill(green); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T04:52:39.310

如果[`java.awt.Rectangle`](http://docs.oracle.com/javase/7/docs/api/java/awt/Rectangle.html)允许，以下是您如何在实现中使用它的概述：

```
private static class Rectangle {
    private int x1, y1, x2, y2, r, g, b;
    private java.awt.Rectangle r1 = new java.awt.Rectangle();
    private java.awt.Rectangle r2 = new java.awt.Rectangle();
    private java.awt.Rectangle r3;

    public Rectangle(int x1, int y1, int x2, int y2, int r, int g, int b) {
        ...
    }

    private void draw(Graphics page) {
        ...
    }

    private boolean overlapsWith(Rectangle r) {
        r1.setBounds(...);
        r2.setBounds(...);
        return r1.intersects(r2);
    }

    private Rectangle getOverlap(Rectangle r) {
        r1.setBounds(...);
        r2.setBounds(...);
        r3 = r1.intersection(r2);
        return new Rectangle(...);
    } 
```

# eclipse - App Engine 1.7.6 中的 PyDev 断点损坏？

> ID：15514743
> 
> 赞同：14
> 
> 时间：2013-03-20T03:26:36.403
> 
> 标签：eclipse, google-app-engine, python-2.7, pydev, breakpoints

[我刚刚为我的 python 应用升级到 App Engine](http://pydev.org/) 1.7.6 SDK，并意识到在使用新的`dev_appserver.py`.

有谁知道再次启用它们的方法？我假设新服务器正在为 Web 服务器生成一个新进程，并且调试器没有附加到那个进程。我不确定如何配置它来做到这一点。

与此同时，我正在使用`old_dev_appserver.py`服务器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T06:11:16.283

2012 年 7 月 27 日更新：

根据评论，我验证了更新到 PyDev 后问题已解决。2.8 和 App 引擎 1.8.2

过时的：

[我在googleappengine issues tracker](https://code.google.com/p/googleappengine/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log&groupby=&sort=&id=9027)发现了以下问题分析

> PDB 不起作用的原因是因为 dev_appserver 正在使用 stdin/stdout 进行进程间通信。Python 有内置的 IPC 库： http: [//docs.python.org/2/library/ipc.html](http://docs.python.org/2/library/ipc.html)。dev_appserver 应该使用这些，然后 stdin/stdout 可以不理会，这样 PDB 仍然可以工作。

所以似乎没有解决方法，而不是恢复使用 old_dev_appserver.py

2013-04-23 更新：无法调试很烦人。许多开发者抱怨它

1.  [App Engine 1.7.6 中的 PyDev 断点损坏？](https://stackoverflow.com/questions/15514743/pydev-breakpoints-in-app-engine-1-7-6-broken)
2.  [https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/ep5BWYKpQpU](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/ep5BWYKpQpU)
3.  [https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/TCQuJpF44cY](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/TCQuJpF44cY)
4.  [https://code.google.com/p/appengine-devappserver2-experiment/issues/detail?id=28](https://code.google.com/p/appengine-devappserver2-experiment/issues/detail?id=28)
5.  [https://code.google.com/p/googleappengine/issues/detail?id=9012](https://code.google.com/p/googleappengine/issues/detail?id=9012)

我在这里跟踪这个问题的发展：http: [//goo.gl/XRU01](http://goo.gl/XRU01)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T04:56:23.733

是的，遇到了同样的问题。

打开您的运行/调试配置并将主模块设置为：

```
${GOOGLE_APP_ENGINE}/old_dev_appserver.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T03:35:41.487

你的意思是 pdb.set_trace() 不工作？

在 google/appengine/tools/dev_appserver.py 中查找函数 MonkeyPatchPdb()

在你使用 pdb 之前在你自己的项目中运行它，它应该修复它。

# jmeter - 使用 __XPath(${__P(fileName)} 读取外部 XML 文件

> ID：15514746
> 
> 赞同：0
> 
> 时间：2013-03-20T03:26:43.180
> 
> 标签：jmeter

我有一种情况，我试图读取外部 XML 的节点值。我正在使用 BeanShell 采样器来读取文件名（通过命令行传递）并使用 setProperty 方法设置解析节点的值：

```
${__setProperty(variable_name,${__XPath(${__P(fileName)},/Allocations/item/@name)})} 
```

虽然上述方法检索到我打算接收的节点的值，但还是抛出了一个错误：

> 2013/03/19 19:32:59 错误 - jmeter.util.BeanShellInterpreter：调用 bsh 方法时出错：eval 源文件：内联评估：``D:\myProject\Jmeter Tests\allocate.xml;'' 令牌解析错误: 第 2 行第 3 列的词法错误。遇到："\" (92)，在 :"" 之后

我的 xml 文件看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<Allocations>
    <item name="CAR" />
</Allocations> 
```

如果我在阅读时犯了一些错误，请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:04:15.797

很奇怪，因为看起来你做的一切都是正确的。
我已经逐步复制了您的场景，但对我来说效果很好。

尝试使用例如[Debug Sampler](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler) / [Debug PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#Debug_PostProcessor)来监视您的 jmeter 属性，并确保`fileName`通常从命令行设置并且不包含任何额外的符号。

# java - 如何调整 GWT 上的组件大小？

> ID：15514747
> 
> 赞同：1
> 
> 时间：2013-03-20T03:26:43.180
> 
> 标签：java, gxt

我需要调整 ContentPanel 的大小，它位于另一个 ContentPanel 中，位于浏览器调整大小的 etc. 中：

```
ContentPanel cpReport = new ContentPanel();          
cpReport.setHeaderVisible(false);        
cpReport.addListener(Events.Resize, new Listener<BaseEvent> () {

    @Override
    public void handleEvent(BaseEvent be) {
        //What TODO?     
    }
}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:41:19.987

我通过这种方式解决了这个问题，但你可以给我更好的建议：

```
cpReport.addListener(Events.Resize, new Listener<BaseEvent> () {

    @Override
    public void handleEvent(BaseEvent be) {
        cpReport.setAutoWidth(true);
        cpReport.setAutoHeight(true);
        }
    }); 
```

谢谢大家

# c++ - 简历::Mat.release()

> ID：15514750
> 
> 赞同：2
> 
> 时间：2013-03-20T03:26:48.907
> 
> 标签：c++, opencv

我开始在我的图像处理程序中使用 OpenCV。当我`cv::Mat`在内存上的方法中使用和分配时：

```
cv::Mat coords(100, 5, CV_32FC1); 
```

`coords.release()`如果不再需要，是否需要在方法结束时从内存中清除？

这是必须做的吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T04:55:08.873

您不需要显式释放该`cv::Mat`对象。`cv::Mat`一旦对象超出了声明它的范围，它就会自动被释放（即它的析构函数会被调用）。

## 更新：

（回应评论）

要检查是否`cv::Mat`已成功分配，您可以执行以下操作：

```
cv::Mat coords(100, 5, CV_32FC1); 

if(coords.empty())
{
   cout<<"Matrix Not Allocated";
   return 0;
} 
```

# matlab - 如何在matlab中清除/删除.txt文件的内容

> ID：15514752
> 
> 赞同：1
> 
> 时间：2013-03-20T03:26:56.193
> 
> 标签：matlab, file

如何删除 .txt 文件的内容以使其成为空白文件或完全删除该文件？我正在从 .txt 文件中读取，如果我不删除上次运行的内容，它将忽略我想要考虑的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T03:48:42.660

假设您的文件名为`to_be_deleted.txt`，您可以简单地使用以下命令将文件完全删除：

```
delete 'to_be_deleted.txt'; 
```

另一方面，如果您只是想清除它的内容，只需使用`fopen`write 属性打开它，如下所示：

```
fopen('to_be_deleted.txt','w'); 
```

# character-encoding - 使用默认 NLS_CHARACTERSET 设置在 Oracle 中存储 utf-8 字符

> ID：15514753
> 
> 赞同：0
> 
> 时间：2013-03-20T03:26:59.057
> 
> 标签：character-encoding, oracle11g

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:41:43.693

不正确，不。如果数据库的字符集是 Windows-1252，那么您可以正确存储在`VARCHAR2`列中的唯一字符是那些存在于 Windows-1252 字符集中的字符。

如果`NLS_NCHAR_CHARACTERSET`是 Unicode（通常`AL16UTF16`），您可以创建一`NVARCHAR2`列并将 CJK 字符存储在该新列中。您的应用程序可能需要更改代码才能支持`NVARCHAR2`列。

# java - Java application into web application

> ID：15514754
> 
> 赞同：0
> 
> 时间：2013-03-20T03:27:02.960
> 
> 标签：java, web-services, oop, web-applications, web

Let me preface this by saying I'm a pretty inexperienced Java programmer (I fancy myself as intermediate, and I'm working through Effective Java and Filthy Rich Clients). I'm doing pretty good with making standalone Java applications. That being said, I got a sort of side project at work.

I was approached at work (because I'm a computer science major) about building an application that does some searching of the organization. Essentially it allows the user to create and edit an n-ary tree, save the tree, load the tree, and then it conducts a (quasi) randomized selection of the nodes of the tree (with some exclusions of historical data), and displays the details of the associated object. The details of the code aren't incredibly important except to say that it includes:

1.  Data structures
2.  Generics
3.  a GUI interface
4.  Saving/loading

Because I was approached in a way that people weren't actually expecting a product, the web development lead said, "do it in Java, since that's what you know." (I actually work in middle management of the network field techs, so I'm not really a part of the development team) Two weeks of spending all of my off time and I got it ready to go. But the problem that I discovered is this: <complain>The network doesn't allow a JRE to happen, or a JVM, or a Java anything except for the fact that it's installed for no reason and essentially disabled. No .jars, no JWS, no applets, not even a wrapped .exe file that counts on the JVM being there.</complain> So what would the experts here recommend?

Is there a way to port this over to a web something (my web development skills are in their infancy)? What is the best place to go to learn about how to do this? Is there a web-based object oriented language in which I can build data structures (or it has a library) such as linked-lists, trees, and hash maps? If I make it into a standalone executable, then it will take months to get approved for deployment on the network and they would like to have it much sooner than that, so that option is out.

What do you think would be the best way to bring this over to something web-based that does not require Java in any way, shape, or form? Or do I need to learn a new language and re-develop the whole thing? (about 4000 lines of code)

Thanks in advance,
Luc

# javascript - JavaScript / Show Hide Div > 选中单选按钮时

> ID：15514760
> 
> 赞同：2
> 
> 时间：2013-03-20T03:27:44.883
> 
> 标签：javascript, forms

如果选择了单选框，我只想显示一个 div。这似乎很简单，大多数在线教程都有两个选项，在我的例子中我有三个。

我刚刚迷失了这方面的逻辑。任何帮助将不胜感激。

```
<!-- // Javascript // -->
<script language="JavaScript" type="text/javascript">
function showhidediv(rad){
var rads=document.getElementsByName(rad.name);
document.getElementById('one').style.display=(rads[1].checked)?'block':'none' ;
document.getElementById('two').style.display=(rads[2].checked)?'block':'none' ;
document.getElementById('three').style.display=(rads[3].checked)?'block':'none' ;
}
</script>

<form name="create" id="create" method="post" enctype="multipart/form-data">

<input name="pagetype" type="radio" value="1" onclick="showhidediv(this);"/>One <br />
<input name="pagetype" type="radio" value="2"  onclick="showhidediv(this);"/>two<br>
<input name="pagetype" type="radio" value="3"  onclick="showhidediv(this);"/>three<br>

<div id="one" class="CF" style="display:none;"  >One </div>
<div id="two" style="display:none;" class="CF" >Two</div>
<div id="three" style="display:none;" class="CF" >Three</div>

</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:34:40.697

```
<script language="JavaScript" type="text/javascript">
function showhidediv(rad){
var rads=document.getElementsByName(rad.name);
document.getElementById('one').style.display=(rads[0].checked)?'block':'none' ;
document.getElementById('two').style.display=(rads[1].checked)?'block':'none' ;
document.getElementById('three').style.display=(rads[2].checked)?'block':'none' ;
}
</script> 
```

使用这个..我修改的是

> rads 是一个数组，因此第一个元素的索引为 0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T03:43:14.313

单选按钮索引从 0 开始。

调整：

```
function showhidediv( rad )
    {
        var rads = document.getElementsByName( rad.name );
        document.getElementById( 'one' ).style.display = ( rads[0].checked ) ? 'block' : 'none';
        document.getElementById( 'two' ).style.display = ( rads[1].checked ) ? 'block' : 'none';
        document.getElementById( 'three' ).style.display = ( rads[2].checked ) ? 'block' : 'none';
    } 
```

# mvcjqgrid - Jqgrid 显示总记录 0 即使它有记录

> ID：15514761
> 
> 赞同：0
> 
> 时间：2013-03-20T03:27:45.170
> 
> 标签：mvcjqgrid

```
 1\. $("#jqgproduct").jqGrid('getGridParam', 'data').length;
    2\. $("#jqgproduct").getGridParam("reccount"); 
```

我尝试了上述两种方式，但它显示 0 条记录，即使网格有 3 条记录，这是我的完整代码。请让我知道我哪里出错了

```
var colNames = ['Status',
            'Project Ref',
            'Name',
            'Customer',
            'CreatedBy',
        'Creation Date',
        'LastModified'];
        var colModel = [
            { name: 'ProductID', index: 'StatusId', align: 'left', width: 70 },
            { name: 'ProjectReference', index: 'ProjectReference', align: 'left', width: 100, formatter: 'showlink', formatoptions: { "baseLinkUrl": "/Order/Index"} },
            { name: 'Name', index: 'Name', align: 'left', width: 150, formatter: 'showlink', formatoptions: { "baseLinkUrl": "/Order/Index"} },
            { name: 'CustomerName', index: 'CustomerName', align: 'left', width: 150 },
            { name: 'Createdby', index: 'Createdby', align: 'left', width: 150 },
              { name: 'CreatedDate', index: 'CreatedDate', align: 'left', width: 100, formatter: 'date', formatoptions: { newformat: 'm/d/Y'} },
              { name: 'LastModified', index: 'LastModified', align: 'left', width: 100, formatter: 'date', formatoptions: { newformat: 'm/d/Y'} }
        ];
        var sortname = 'Id';
        var sortorder = 'desc';
        SetGrid('#jqgproduct', '', url, colNames, colModel, sortname, sortorder, -1);

 var numberOfRecords = $("#jqgproduct").jqGrid('getGridParam', 'data').length;
$("#jqgproduct").getGridParam("reccount"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:38:22.273

试试这个：

```
 var recCount=$( '#jqgproduct' ).jqGrid( 'getGridParam', 'reccount' ); 
```

# c++ - Difference between using virtual functions and redefining

> ID：15514763
> 
> 赞同：2
> 
> 时间：2013-03-20T03:28:02.887
> 
> 标签：c++

What's the difference between redefining and using a virtual function? Don't they serve the same purpose? You are allowing objects of a derived class to call their own versions of a function by the same name in both cases..so where is the distinction?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T03:32:47.923

一个例子说得最好：

```
#include <iostream>

using namespace std;

class A {
public:
  virtual void f1() { cout << "Class A" << endl; }
  void f2() { cout << "Class A" << endl; }
  virtual ~A(){}
};

class B : public A {
public:
  virtual void f1() { cout << "Class B" << endl; }
  void f2() { cout << "Class B" << endl; }
  virtual ~B(){}
};

int main()
{
  A *a = new B;
  a->f1();
  a->f2();
} 
```

...

```
$ ./override 
Class B
Class A 
```

可以看到，当我们引用 B 的实例时，`f1()`仍然调用`B`'s 的版本，但是`f2()`调用了`A`'s。

当你声明一个函数 virtual 时，你是说当我们调用它时，我们应该使用 vtable 来查找要调用的函数的正确版本，因此即使你引用了函数，你总是会得到该函数的派生版本。它作为祖先类型。如果没有 virtual，它只会使用您引用它的类型中的定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T03:29:56.063

区别在于当您有对基类的引用或指针时。对虚函数的调用将调用最派生版本，而对普通函数的调用将调用基类版本。

如果您直接使用变量或指向最派生类的引用或指针，则没有实际区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T03:40:30.543

**TL;博士**

在 C++ 中利用多态性的唯一方法是通过虚函数和指针（和引用）。virtual 关键字将告诉编译器在处理指向具有子类的动态类型的基类的指针时决定调用哪个版本的虚函数时，分配一个虚函数表到哪里查看。

**多态性如何在 C++ 中工作**

我们举一个简单的例子：

```
class A { public: virtual void eat() { std::cout << "Class A" << std::endl; }
class B : public A {};
class C : public B { virtual void eat() { std::cout << "Class C" << std::endl; } 
```

*注意：第一个函数/方法定义后可以省略 virtual 关键字。*

以下：

```
A a; B b; C c;
A* ptrA = &a; A* ptrB = &b; A* ptrC = &c;
ptrA->eat();
ptrB->eat();
ptrC->eat(); 
```

将打印：

```
Class A
Class A
Class C 
```

如果我们没有将函数声明为`eat`virtual，那么输出将是：

```
Class A
Class A
Class A 
```

# apache - Apache htaccess Rewrite rule to append querystring to all css files

> ID：15514764
> 
> 赞同：0
> 
> 时间：2013-03-20T03:28:04.227
> 
> 标签：apache, .htaccess, url-rewriting

I want to append a static query string to all css files on my site. Like styles.css to styles.css?a=1\. Is it possible to achieve this through rewrite rules in .htaccess file. If so what's the rewrite rule to be written. thanks in advance. .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:48:33.920

将此添加到您网站根文件夹下的 .htaccess 文件中，这会将所有 css 请求重定向到 css?a=34（用户浏览器中显示的查询），这是您想要的吗？

```
<IfModule mod_rewrite.c>
 RewriteEngine On 
 RewriteBase /
 RewriteCond %{QUERY_STRING} ^$
 RewriteRule ^(.+)\.css$ $1.css?a=34 [R,L]
</IfModule> 
```

# php - 将带有 foreach 循环的 PHP 表单保存到 MYSQL

> ID：15514771
> 
> 赞同：0
> 
> 时间：2013-03-20T03:28:34.977
> 
> 标签：php, mysql, foreach

我正在尝试将问题选项输入保存到数据库中的表中。但是，我只能将最后一个问题输入保存到 db 中，而不能保存之前的其他问题。

我目前正在使用 foreach 循环根据问题结构表输出文本字段输入。

我真的不知道如何用语言解释，让我给你看我的代码。我是这个领域的新手，希望你们理解并帮助我:)

*   foreachtest.php

    ```
    <?php
    $user_name = "root";
    $password = "";
    $database = "leadership_program";
    $server = "localhost";

    $db_handle = mysql_connect($server, $user_name, $password);
    $db_found = mysql_select_db($database, $db_handle);

    $result = mysql_query("SELECT * FROM question_structure_tb", $db_handle);

    $row = mysql_fetch_assoc($result);

    mysql_close($db_handle);
    $survey_name = $row['survey_name'];
    $row2 = array_slice($row, 2);

    echo 'Survey Name: '. $survey_name ;

    foreach ($row2 as $v) {
        //echo "$v\n";

        if ($v != NULL) {

            echo '<p>Question:</p>';

            echo '<p>Enter Question: <input type=\"text\" name=\"question\" size=\"200\" maxLength=\"300\" value></p>';

            if ($v === 'radio') {

                echo"<p>Option 1:<input type=\"text\" name=\"optionone\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 2:<input type=\"text\" name=\"optiontwo\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 3:<input type=\"text\" name=\"optionthree\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 4:<input type=\"text\" name=\"optionfour\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 5:<input type=\"text\" name=\"optionfive\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 6:<input type=\"text\" name=\"optionsix\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 7:<input type=\"text\" name=\"optionseven\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p><input type=\"hidden\" name=\"optioneight\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p><input type=\"hidden\" name=\"optionnine\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p><input type=\"hidden\" name=\"optionten\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p><input type=\"hidden\" name=\"optioneleven\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p><input type=\"hidden\" name=\"optiontwelve\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p><input type=\"hidden\" name=\"optionthirteen\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p><input type=\"hidden\" name=\"optionfourteen\" size=\"40\" maxLength=\"30\"></p>";

            } else if ($v === 'checkbox') {

                echo"<p>Option 1:<input type=\"text\" name=\"optionone\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 2:<input type=\"text\" name=\"optiontwo\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 3:<input type=\"text\" name=\"optionthree\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 4:<input type=\"text\" name=\"optionfour\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 5:<input type=\"text\" name=\"optionfive\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 6:<input type=\"text\" name=\"optionsix\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 7:<input type=\"text\" name=\"optionseven\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 8:<input type=\"text\" name=\"optioneight\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 9:<input type=\"text\" name=\"optionnine\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 10:<input type=\"text\" name=\"optionten\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 11:<input type=\"text\" name=\"optioneleven\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 12:<input type=\"text\" name=\"optiontwelve\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 13:<input type=\"text\" name=\"optionthirteen\" size=\"40\" maxLength=\"30\"></p>";
                echo"<p>Option 14:<input type=\"text\" name=\"optionfourteen\" size=\"40\" maxLength=\"30\"></p>";
            } else {
                echo "<p>this is comment or with comments.therefore no input field</p>"; 

            }
        } else {

        }
        unset($v);
    }
    ?>
    <p><input type="submit" value="Save" name="B1"></p> 
    ```

*   foreachtest_save.php

    ```
    $user_name = "root";
    $password = "";
    $database = "leadership_program";
    $server = "localhost";

    $db_handle = mysql_connect($server, $user_name, $password);
    $db_found = mysql_select_db($database, $db_handle);

    if ($db_found) {

        $Questions = $_POST['question'];

        $SQL = "INSERT INTO question_table ('question_detail') VALUES ('$Questions')";

        $result = mysql_query($SQL); //execute the above 

        $Option1 = $_POST['optionone'];
        $Option2 = $_POST['optiontwo'];
        $Option3 = $_POST['optionthree'];
        $Option4 = $_POST['optionfour'];
        $Option5 = $_POST['optionfive'];
        $Option6 = $_POST['optionsix'];
        $Option7 = $_POST['optionseven'];
        $Option8 = $_POST['optioneight'];
        $Option9 = $_POST['optionnine'];
        $Option10 = $_POST['optionten'];
        $Option11 = $_POST['optioneleven'];
        $Option12 = $_POST['optiontwelve'];
        $Option13 = $_POST['optionthirteen'];
        $Option14 = $_POST['optionfourteen'];

        $SQL2 = "INSERT INTO option_table " .
          "(option_one,option_two, option_three, option_four,option_five, option_six, option_seven, option_eight, option_nine, option_ten, option_eleven, option_twelve, option_thirteen, option_fourteen)" .
            "VALUES" .
            "('$Option1','$Option2','$Option3','$Option4', '$Option5','$Option6','$Option7','$Option8','$Option9','$Option10','$Option11','$Option12','$Option13','$Option14' )";

        $result2 = mysql_query($SQL2); //execute the above 

        if ($result2) {
            print "Options added to the database";
        } else {
            print "Error: Options not added";
        }
        mysql_close($db_handle);
    } else {

        print "Database NOT Found ";
        mysql_close($db_handle);
    }
    ?> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:40:52.033

从您的代码中，我认为您将创建一组输入标签，为每个问题使用**相同的名称**，所以我认为这就是您唯一得到的原因。您可以尝试将其声明为数组，然后在保存到数据库时尝试循环。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T03:36:30.457

从你的问题：''with foreach loop to MYSQL''

如果你想使用 foreach 循环，为什么不在数组中做呢

```
<input type="text" name="salaries[]" >
<input type="text" name="salaries[]" > 
```

提交时

像这样循环你的文本字段

```
$salaries=$_POST['salaries'];

foreach ($salaries as $key => $value){
echo $value;
} 
```

如果您不确定如何在数组中插入表单，我建议您使用[准备语句](http://php.net/manual/en/mysqli.prepare.php)

```
//$dbc is your database connection
mysqli_autocommit($dbc,false);  
if($stmt=$dbc->prepare("INSERT INTO question_table ('question_detail') VALUES ('?')")){

foreach ($salaries as $key => $value){

    $stmt->bind_param('s',$value);
    $stmt->execute();
    if(!$stmt){//if statement problem , prevent commit
        echo 'insertion failed , roll back all query';
        exit(); 
    }//end of smtp error

}//end of foreach
mysqli_commit($dbc); 
```

# ios - 应用程序在 iPhone 4s/5 上崩溃，但在其他设备上没有

> ID：15514772
> 
> 赞同：-1
> 
> 时间：2013-03-20T03:28:49.143
> 
> 标签：ios, core-plot

我刚刚购买了新的 iPhone，并在它们上面安装了我正在开发的应用程序。该应用程序非常不稳定并且经常崩溃。它在其他设备上没有问题。以下是它为其构建和运行的设备列表。

iPhone 3gs，iOS 4.3.1 完美运行

iPhone 4、iOS 5.0.1 和 6.1.2 完美运行

iPhone 4s、iOS 6.1.2 崩溃

iPhone 5、iOS 6.1.2 崩溃

当我绘制一个有很多点的图形时，崩溃的主要来源似乎是 Core-Plot。

有没有人遇到过这个问题（也许还有解决方案？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:57:23.627

我已经解决了这个问题。关键是它失败的机器是双核的。我有一个垃圾收集器正在运行。所以在单核机器上，收集器被阻塞了。在双核上，它在另一个核上运行，从而清理了“所谓的垃圾”图。

# java - 重命名后如何更改为android项目？

> ID：15514773
> 
> 赞同：0
> 
> 时间：2013-03-20T03:28:50.107
> 
> 标签：java, android, android-intent

我已重命名我的项目并在清单和代码/包中更改了它的所有方面以反映新名称。当我在模拟器中启动程序并进行选择时，它会询问我是否要为此操作打开 com.xxxxx.oldname 或 com.xxxxx.newname？

关于下一步检查什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:48:00.757

由于您更改了包名称，因此新版本并没有替换旧版本。两者都安装在模拟器中。

转到设置-> 应用程序管理器并卸载旧版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:41:02.383

在 Eclipse 中，如果您右键单击您的项目，然后单击重构并重命名它应该会处理您所有的引用和资源。希望这可以帮助

# typescript - 如何防止 get/set 函数在 Typescript 中暴露本地属性

> ID：15514778
> 
> 赞同：2
> 
> 时间：2013-03-20T03:29:32.080
> 
> 标签：typescript

在 Javascript 中，我可以使用 get/set 方法创建对象的属性：

```
function Field(arg){
    var value = arg;

    // Create a read only property "name"
    Object.defineProperty(this, "value", {           
        get: function () {
            return value;
        },
        set: function () {
            console.log("cannot set");
        }
    });
}

var obj = new Field(10);    
console.log(obj.value); // 10
obj.value = 20;         // "cannot set" 
```

此处不允许设置`value`属性。

在 TypeScript 中，如果我想实现相同的行为，我必须这样做（如[get and set in TypeScript](https://stackoverflow.com/q/12827266/2788872)所建议的那样）：

```
class Field {
    _value: number;

    constructor(arg) {
        this._value = arg;
    }

    get value() {
        return this._value;
    }

    set value() {
        console.log("cannot set");
    }
}

var obj = new Field(10);

console.log(obj.value); // 10
obj.value = 20;         // "cannot set"
obj._value = 20;        // ABLE TO CHANGE THE VALUE !
console.log(obj.value); // 20 
```

但是你在这里看到的问题是，所谓的私有属性`_value`可以被用户直接访问/更改，而无需通过 get/set 方法`value`。如何限制用户`_value`直接访问此属性 ( )？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T08:48:29.850

你也可以`Object.defineProperty`在 TypeScript 中使用。

我已经修改了您的 Field 类，例如：

```
class Field{
    value: any;
    constructor(arg: any)
    {
        var value = arg;
        Object.defineProperty(this, "value",{           
            get: () => {
                return value;
            },
            set: function () {
                console.log("cannot set");
            }
        });
    }
} 
```

**请注意**，您不能使用在类本身上定义的值，否则该字段的 getter 将被递归调用，直到您遇到`Maximum call stack size exceeded`. 类定义上的`value:any`声明避免了编译器错误：

> 字段类型的值不存在属性“值”

然后，您可以执行此 TypeScript 代码以获得与 JavaScript 代码示例相同的结果：

```
var obj = new Field(10);
console.log(obj.value);
obj.value = 20; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T07:47:13.380

在 TypeScript 中，它应该像添加`private`修饰符一样简单（在您的示例中，`_value`是公共的）：

```
private _value:number; 
```

...编译器现在应该阻止您从类外部设置属性：

```
var obj = new Field(10);
obj._value = 20; // Error: The property '_value' does not exist on value of type 'Field'. 
```

但这并没有`_value`以同样的方式隐藏在输出 JS 中。TypeScript 私有成员仅在 TS 中是私有的。请参阅[此答案](https://stackoverflow.com/questions/12713659/typescript-private-members)及其链接到的有趣的[codeplex 讨论。](https://typescript.codeplex.com/discussions/397651)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T04:11:23.043

如果您不创建变量，它将无法访问：

```
class Field{
    get value(){
        return 10;
    }

    set value(){
        console.log("cannot set");
    }
}

var obj = new Field();
console.log(obj.value); // 10
obj.value = 20;  // cannot set
console.log(obj.value); // 10 
```

当然，我会建议一起删除集合：

```
class Field{
    get value(){
        return 10;
    }
} 
```

# java - 如何使用循环获取全名字符串的第一个字母？

> ID：15514789
> 
> 赞同：-2
> 
> 时间：2013-03-20T03:31:20.100
> 
> 标签：java

编写一个应用程序，提示用户输入全名和街道地址，并根据用户的姓名首字母和地址的数字部分构造一个 ID。例如，住在 34 Elm 的用户 William Henry Harrison 的 ID 为 WHH34，而住在 1778 Monroe 的用户 Addison Mitchell 的 ID 为 AM1778。将文件另存为 ConstructID.java。

到目前为止，这是什么，我的老师说错了……

```
import java.util.*;
public class ConstructID {

    public static void main(String[] args) {

        String name1, address1, address2;

        Scanner kevs = new Scanner(System.in);

        System.out.println("Enter your fullname. Encluding Middle Initial, Separated by spaces.");

        name1 = kevs.next();
        name2 = kevs.next();
        name3 = kevs.next();

        name1 = name1.toUpperCase();
        name2 = name2.toUpperCase();
        name3 = name3.toUpperCase();

        name1 = name1.substring(0,1);
        name2 = name2.substring(0,1);
        name3 = name3.substring(0,1);

        System.out.println("\nEnter your address. Separated by spaces.");

        address1 = kevs.next();
        address2 = kevs.nextLine();

        do {

            if (address1 == address1.substring(0,1) || address1 == address1.substring(0,2) || address1 == address1.substring(0,3) || address1 == address1.substring(0,4) || address1 == address1.substring(0,5) || address1 == address1.substring(0,6))
            System.out.println("\nYour ID: " + name1 + name2 + name3 + address1);

        } while (address1 == address2);
    }
} 
```

注意：*我不能使用数组*:(这个问题的主题都是关于循环和字符串..没有数组..所以请帮助.. :((

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:44:10.130

如果不能使用数组，请使用列表。查看[javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)以`java.util.List`了解列表可以做什么。（或者你的讲义！）

我希望你的老师说你写的东西是错误的，是因为它*假设*每个*人的*名字都由名字、中间名和姓氏组成。我相信你知道这是不正确的。有些人有很多中间名，或者根本没有。的确，有些人只有一个名字。

你的老师想要的是可以处理*任意*数量的名字的代码。数组将是一个糟糕的选择......因为在从用户那里读取名称*之前，*您需要预测数组的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:57:55.150

```
 String name1, address1;

    Scanner kevs = new Scanner(System.in);

    System.out.println("Enter your fullname. Encluding Middle Initial, Separated by spaces.\n");
    name1 = kevs.nextLine();
    name1 = name1.toUpperCase();
    StringTokenizer tokens = new StringTokenizer(name1);
    String name = "";
    while(tokens.hasMoreTokens()) {
        String value= tokens.nextToken();
        name += value.substring(0,1);
    }
    System.out.println("\nEnter your  full address. Separated by spaces.\n");
    address1 = kevs.nextLine();
    address1 = address1.toUpperCase();
    StringTokenizer tokens2 = new StringTokenizer(address1);
    Integer numericAddress = null;
    while(tokens2.hasMoreTokens()) {
        String value1= tokens2.nextToken();
        try {
            numericAddress = Integer.valueOf(value1);
        }catch(NumberFormatException ne) {
            continue;
        }
        break;
    }

    String output = name+numericAddress.toString();

    System.out.println(output); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T04:04:22.153

```
 public static void main(String[] args) {

        String name, address;

        Scanner kevs = new Scanner(System.in);

        System.out.println("Enter your fullname. Including Middle Initial, Separated by spaces.");

        //get the full name
        name = kevs.nextLine();

        System.out.println("\nEnter your address. Separated by spaces.");
        //get the address
        address = kevs.nextLine();

        String initials = "";
        //get the first letter of the name and add it to our initial string
        char c = name.charAt(0);
        initials += c;
        for (int i = 0; i < name.length(); i++) {
            char letter = name.charAt(i);
            // if we find a space, select the first letter after it until the end
            if (letter == ' ') {
                initials += name.charAt(i + 1);
            }

        }
        String addressNum = "";
        //this bool is so that we only select characters up to the first space
        boolean finished = false;
        for (int i = 0; i < address.length(); i++) {
            if (!finished) {
                char num = address.charAt(i);
                if (num != ' ') {
                    //add characters to the address string until there is a space
                    addressNum += num;
                } else // we found the first space so we are now finished
                {
                    finished = true;
                }
            } else //we are finished so leave the loop
            {
                break;
            }
        }
        //concatenate the strings
        System.out.println(initials + addressNum);

    } 
```

# python - Python 脚本无结果

> ID：15514791
> 
> 赞同：0
> 
> 时间：2013-03-20T03:31:35.030
> 
> 标签：python, function

在修改 sys.argv 输入部分之前，此脚本正在使用提供输入的静态文件...不是出于某种我无法弄清楚的原因...当我使用两个参数运行脚本时 ./scriptname vuln_banners 它只是退出。

```
#!/Library/Frameworks/Python.framework/Versions/2.7/bin/python
import socket
import sys
import os
def retBanner(ip, port):
    try:
        socket.setdefaulttimeout(2)
        s = socket.socket()
        s.connect((ip, port))
        banner = s.recv(1024)
        return banner
    except:
        return
def checkVulns(banner, filename):
    f = open(filename, 'r')
    for line in f.readlines():
        if line.strip('\n') in banner:
            print '[-] Server is vulnerable:'+ banner.strip('\n')
def main():
    if len(sys.argv) == 2:
        filename = sys.argv[1]
        if not os.path.isfile(filename):
            print '[-] ' + filename + ' does not exist'
            exit(0)
            if not os.access(filename, os.R_OK):
                print '[-] '+ filename + 'Access Denied'
                exit(0)
    else:
        print '[-] Usage: ' + str(sys.argv[0]) + '<vuln-filename>'
        exit(0)
        portList = [21,22,25,80,110]
        for x in range(1, 100):
            ip = '172.17.1.'+ str(x)
            for port in portList:
                print 'Checking ' + str(ip) + ' on port '+ str(port)
                banner = retBanner(ip, port)
                if banner:
                    print '[+] ' + ip + ': ' + banner
                    checkVulns(banner, filename)
if __name__ == '__main__':
    main() 
```

# c# - 在表格底部画线

> ID：15514793
> 
> 赞同：0
> 
> 时间：2013-03-20T03:31:45.630
> 
> 标签：c#, opengl

如何在 OpenGL 的视口底部绘制一个水平框？这是在顶部绘制它。怎么了？

```
var H = window height;
var len = 20;

gl.Vertex3d(0, H - len, 0);       //top     left
gl.Vertex3d(Width, H - len, 0);   //top     right
gl.Vertex3d(Width, H + len, 0);   //bottom  left
gl.Vertex3d(0, H + len, 0);       //bottom  right 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:10:20.497

OpenGL 的默认坐标空间的 Y 指向上方。你可以改变它，或者你可以改变你的顶点，这取决于你要做什么和你习惯了什么。在您发布的情况下，它只是一个四边形，您可能只需更改顶点并执行以下操作：

```
gl.Vertex3d(0, len, 0);       //top     left
gl.Vertex3d(Width, len, 0);   //top     right
gl.Vertex3d(Width, -len, 0);   //bottom  left
gl.Vertex3d(0, -len, 0);       //bottom  right 
```

如果您正在绘制很多其他东西，您可以在绘制之前根据需要设置当前变换矩阵（并可能在之后恢复它），方法是执行以下操作：

```
gl.matrixMode(GL_PROJECTION);
gl.ortho(left, right, top, bottom, near, far); // Note reversal of top and bottom 
```

# python - 客户端 Python TCP 服务器上是否存在文件

> ID：15514797
> 
> 赞同：0
> 
> 时间：2013-03-20T03:32:30.053
> 
> 标签：python, bash, file, sockets, tcp

我正在尝试在 python 中创建一个 TCP 端口服务器。到目前为止，这是我的代码：

```
import socket 

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
sock.bind(('',4000)) 
sock.listen(1) 

while 1: 
    client, address = sock.accept() 
    fileexists = client.RUNCOMMAND(does the file exist?)

    if fileexists = 0:
           client.close()
    else if: 
        filedata = client.RUNCOMMAND(get the contents of the file)

        if filedata = "abcdefgh":
              client.send('Transfer file accepted.')
        else:
              client.send('Whoops, seems like you have a corrupted file!')

    client.close() 
```

我只是不知道如何运行一个命令（RUNCOMMMAND）来检查客户端上是否存在文件。此外，有没有办法检查客户端在哪个操作系统上运行不同的命令（例如，linux 将有一个与 windows 不同的文件查找器命令）。如果这不可能，我完全理解，但我真的希望有办法做到这一点。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:41:01.063

XMLRPC 可能会对您有所帮助。XML-RPC 是一种远程过程调用方法，它使用通过 HTTP 传递的 XML 作为传输。 [http://docs.python.org/2/library/xmlrpclib.html](http://docs.python.org/2/library/xmlrpclib.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:35:11.710

你可能想看看非常方便的 bottle.py 微型服务器。它非常适合像这样的小型服务器任务，并且您可以在此之上获得 Http 协议。您只需在代码中包含一个文件。[http://bottlepy.org](http://bottlepy.org)

这里的代码可以`http://blah:8090/get/file` 用来`http://blah:8090/exists/file`查看 /etc/hosts 的内容`http://blah:8090/get/etc/hosts`

```
#!/usr/bin/python
import bottle 
import os.path

@bottle.route("/get/<filepath:path>")
def index(filepath):
    filepath = "/" + filepath
    print "getting", filepath 
    if not os.path.exists(filepath):
        return "file not found"

    print open(filepath).read() # prints file 
    return '<br>'.join(open(filepath).read().split("\n")) # prints file with <br> for browser readability

@bottle.route("/exists/<filepath:path>")
def test(filepath):
    filepath = "/" + filepath
    return str(os.path.exists(filepath))

bottle.run(host='0.0.0.0', port=8090, reloader=True) 
```

run 方法上的 reloader 选项允许您在不手动重新启动服务器的情况下编辑代码。它非常方便。

# c# - 客户端 IPEndPoint 不能使用 IPAddress.Any？

> ID：15514800
> 
> 赞同：1
> 
> 时间：2013-03-20T03:32:43.043
> 
> 标签：c#, asyncsocket

我一直在学习一些套接字编程，我创建了一个异步服务器，它只监听并返回数据。

但我在这里有一个问题，我在服务器上使用 IPEndPoint 和 IPEndPoint(IPAddress.any,port)，我对客户端做同样的事情。运行服务器和客户端时，我使用 try catch 并且客户端返回它的异常，如下所示

“请求的地址在其上下文 0.0.0.0:port 中无效”

下面是代码：

服务器.cs

```
 Public void Listen()
      {
        IPEndPoint IpEnd = new IPEndPoint(IPAddress.Any, 11000);

        Console.WriteLine("Create new socket");
        mainSocket = new Socket(AddressFamily.InterNetwork,
                       SocketType.Stream,ProtocolType.IP);

        Console.WriteLine("Bind the socket");
        mainSocket.Bind(IpEnd);

        Console.WriteLine("Listening to socket");
        mainSocket.Listen(10);

        Console.WriteLine("Waiting Connection");
        mainSocket.BeginAccept(new AsyncCallback(AcceptConnect), null);
      }
      protected void AcceptConnect(IAsyncResult ar)
      {
        try
        {
            Socket client = mainSocket.EndAccept(ar);
            SessionData session = new SessionData();
            Console.WriteLine("Connection Accepted, waiting for Data");
            Console.WriteLine("Waiting a new Connection");
            mainSocket.BeginAccept(new AsyncCallback(AcceptConnect), null);
            try{
                session.clientSocket = client;
                client.BeginReceive(session.buffer,0,SessionData.buffersize,0, 
                                    new AsyncCallback(ReceiveData), session);
            }catch(Exception e){
                client.Send(ASCIIEncoding.Default.GetBytes(e.Message));
                Console.WriteLine(e.Message);
            }
        }
        catch(Exception e)
        {
            Console.WriteLine(e.Message);
            Console.WriteLine(e.StackTrace);
        }
      } 
```

客户端.cs

```
 public void ClientConnect()
    {

        // Create a TCP/IP socket.
        Socket client = new Socket(AddressFamily.InterNetwork, 
                        SocketType.Stream, ProtocolType.Tcp);

        IPEndPoint remoteEP = new IPEndPoint(IPAddress.Any, 11000);

        // Connect to the remote endpoint.
        client.BeginConnect(remoteEP, new AsyncCallback(ConnectServer), client);
    }
    public void ConnectServer(IAsyncResult ar) 
    {
        try
        {
            Socket client = (Socket)ar.AsyncState;
            client.EndConnect(ar);

            Console.WriteLine("Socket connected to {0}", 
                             client.RemoteEndPoint.ToString());
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    } 
```

我的问题是：

1.  客户端是否需要指向一个 IPAddress？
2.  我只是在服务器上使用了错误的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:39:09.160

客户端需要指向一个特定的 IP 地址（即 192.168.1.101 或类似的东西），您不能将数据包发送到 IP 0.0.0.0。服务器可以接受 IP.Any 的原因是它正在侦听本地机器上的所有 IP 地址，表示为 0.0.0.0。

# c++ - 常量正确性——C API shim 层

> ID：15514804
> 
> 赞同：5
> 
> 时间：2013-03-20T03:33:18.843
> 
> 标签：c++, const-correctness

在编写用作其他库（C 风格）API 的包装器的类时，确保 const 正确性的相关做法是什么。我正在编写一个类（Renderer），它将应用程序特定的渲染调用转换为相应的 OpenGL（可能还有 DirectX）调用。这个类实际上并没有自己的状态，它通过调用 Renderer::applyTransform(const Matrix&) 来修改，而是在内部调用改变 OpenGL 状态的 API。在这种情况下，将此类 API 标记为 const 是正确的做法，还是“修改可观察状态”也扩展到此类包装的 OpenGL 状态，要求我使其成为非成本？

这类似于[Const-correctness 和 hardware writes](https://stackoverflow.com/questions/12912045/const-correctness-and-hardware-writes)，但也许这是一个更具体的用例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T03:52:16.360

如果您正在调用通过非常量指针获取成员变量的 C 函数，那么这些包装函数可能不应该是 const。如果他们只是观察状态而不修改它，您可以使您的方法 const ——即使 C API 不是 const 正确的，您也可以根据需要使用`const_cast<>`或`mutable`在您的成员变量上。

从语义的角度考虑它——如果一个方法不改变世界的状态，就让它成为常量。如果它确实改变了世界的状态，它可能不应该是 const，除非改变的状态类似于缓存，它只是导致改变的优化而不是必要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T05:20:25.017

您是否需要使它们成为非`const`？不。

如果语义是要修改*有效*状态，这会是一个好主意吗？可能是的，但这取决于您的整体设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:52:44.530

方法只是一个函数，`this`只是另一个函数参数。任何参数都可以是指向 的指针`const`，这只影响相应的参数，与修改任何其他参数或全局状态的函数无关。

所以是的，一个`const`方法可以修改全局状态，这没有错。

# scheme - 检查期望函数

> ID：15514805
> 
> 赞同：-1
> 
> 时间：2013-03-20T03:33:20.390
> 
> 标签：scheme, racket

```
;; snoc : X [Listof Any] -> [Listof Any]
;; Adds the X to the end of the list
(define (snoc x l)
  (cond [(empty? l) (cons x empty)]
        [else (cons (first l)
                    (snoc x (rest l)))])) 
```

如上所述，它只是在列表末尾添加一个 X。您将如何为此编写一个简单的检查期望函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:40:33.937

I'd test the obvious cases, for example:

1.  What happens if we add an element to an empty list?
2.  What happens if we add an element to a list with one element?
3.  What happens if we add an element to a list with two elements?

And so on. For example, the first test would look like this:

```
(check-expect (snoc 1 '()) '(1)) 
```

# javascript - 我如何理解 c({x:10}).x？

> ID：15514807
> 
> 赞同：1
> 
> 时间：2013-03-20T03:33:25.687
> 
> 标签：javascript

完整的代码是

```
 var b = 10,
    c = (
            20,
            function(x) {return x + 100},
            function() {return arguments[0]}
        );
a = b + c({x:10}).x  // => 20 
```

我怎么理解`c({x:10}).x`...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T03:42:50.593

首先，让我们重写代码，使其更易于阅读。

该构造`(x, y, z)`计算为最后一项 ( `z`)，因此：

```
var b = 10, c = function() { return arguments[0] };
a = b + c({ x: 10 }).x  // => 20 
```

现在，该`c`函数只返回第一个参数，这在这里毫无意义，所以让我们删除它：

```
var b = 10;
a = b + ({ x: 10 }).x  // => 20 
```

对象字面`{ x: 10 }`量在这里也是没用的，因为我们只是获取它的`x`属性然后丢弃它，所以：

```
var b = 10;
a = b + 10  // => 20 
```

现在有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:42:38.230

它是这样的：

那作业：

```
c = (
        20,
        function(x) {return x + 100},
        function() {return arguments[0]}
    ); 
```

将括号中的最后一个表达式分配给`c`. 前两个表达式 (`20`和`function(x) {return x + 100}`) 被求值但不在赋值中使用。这是[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator?redirectlocale=en-US&redirectslug=JavaScript/Reference/Operators/Special/Comma_Operator)的一个示例：任何由逗号分隔的表达式序列都具有最后一个表达式的值。

所以在那一点上，`c`就是函数`function() {return arguments[0]}`。

然后，`c`使用参数调用`{x:10}`并返回 object `{x:10}`。然后`.x`提取值为 10 的`x`属性。将其添加到`b`（其值也为 10）以将值 20 分配给`a`。

简单的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:43:17.737

在 javascript 中，`a,b,c`返回`c`，所以`c = function () {return arguments[0];}`，

`c({x:10})`返回`{x:10}`,

`c({x:10}).x`返回`10`

所以`b+c`返回`20`

# java - java BlockingQueue和JDBC批量更新

> ID：15514814
> 
> 赞同：1
> 
> 时间：2013-03-20T03:34:21.033
> 
> 标签：java, jdbc, concurrency

我正在寻找 java 并发解决方案，以便我可以使用 JDBC 批量更新。BlockingQueue 每次都会让我一个项目，我已经有方法对 DAO 进行批量更新，但我需要一些解决方案，以便我可以利用 JDBC 批量更新而不是单个记录更新。

我的工作线程如下所示：

```
class DBWorker extends Thread {
    @Override
    public void run() {
        try {
            while (true) {
                try {
                    Pair<Long, Status> p = dbQ.take();
                    //--
                    orderDao.updateStatus(p.getLeft(), p.getRight());
                } catch (InterruptedException e) {
                    log.error(e);
                }
            }
        } catch (Exception e) {
            log.error(e);
        } finally {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:46:42.907

基本上，您需要做的是将多个`Pair`对象收集到 a`Collection`中，然后将其传递`Collection`给将执行批量更新的代码。

您可以尝试以下方法：

```
while (true) {
    Pair<Long, Status> p = dbQ.take();
    List<Pair> collectedPairs = new ArrayList();
    while (p!=null) {
        collectedPairs.add(p);
        p = dbQ.poll();
    }
    orderDao.batchUpdate(collectedPairs);
} 
```

然而，上面的代码将主要发布通常较小的批次。您可以调整该示例以使用定时轮询方法`BlockingQueue.poll(long, TimeUnit)`来引入一些延迟并尝试收集更大的批处理大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T03:47:45.327

`BlockingQueue`有一个很好的方法，`drainTo()`它基本上将所有条目放入一个集合中。虽然它没有阻塞，但在调用它之前你仍然需要 a `take()`，这样它就不会忙着等待。除了更新一个和一个，您还需要一种批量更新数据库的方法。例如：

```
ArrayList<Pair<Long, Status>> list = new ArrayList<Pair<Long, Status>>();
list.add(dbQ.take());
//sleep(int n) - if you want to wait for more entries before submitting the batch - otherwise batches will probably be pretty small..
dbQ.drainTo(list);
orderDao.updateInBatch(list); 
```

# java - 在矩形区域内用鼠标绘制多边形时检测交点

> ID：15514823
> 
> 赞同：0
> 
> 时间：2013-03-20T03:35:51.317
> 
> 标签：java, swing, awt

我正在绘制一个多边形，其中每个顶点都在矩形区域内单击鼠标。我需要跟踪多边形的非相邻节点不应相交并且多边形应保留在矩形区域内，即在任何一种情况下，如果选择了点/顶点，将被删除。我正在努力但无法找到任何算法/代码来解决这个问题.如果有人有解决方案，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:48:04.533

您应该检查任何多边形线是否与另一条线相交。为每对顶点创建一个线列表。浏览列表并检查当前线是否与以下任何线相交。

要检查它是否与矩形区域相交，请执行相同的操作。检查是否有任何多边形线与矩形的 4 条线相交。

# ios - 如何链接淡入淡出动画

> ID：15514828
> 
> 赞同：4
> 
> 时间：2013-03-20T03:36:17.370
> 
> 标签：ios, objective-c, animation, chaining

我有 3 个`UILabels`我想淡出，几秒钟后一个接一个。我的问题是这些都是同时发生的。我正在尝试链接动画，但我无法让它工作。我尝试了各种建议，但无济于事。我知道这不可能这么难。我最好将它们捆绑在一个动画方法中，因为我想`animationDidStop`在显示所有 3 个标签之后触发其他功能。有什么帮助或建议吗？？

这是我的代码：

```
- (void)viewDidLoad
{
    [self fadeAnimation:@"fadeAnimation" finished:YES target:lblReady];
    [self fadeAnimation:@"fadeAnimation" finished:YES target:lblSet];
    [self fadeAnimation:@"fadeAnimation" finished:YES target:lblGo];
}

- (void)fadeAnimation:(NSString *)animationID finished:(BOOL)finished target:(UIView *)target
{
    [UIView beginAnimations:nil context:nil];
    [UIView beginAnimations:animationID context:(__bridge void *)(target)];
    [UIView setAnimationDuration:2];

    [target setAlpha:0.0f];
    [UIView setAnimationDelegate:self];    
    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T03:43:28.453

`UIView`使用最新的动画方法会更容易：

```
[UIView animateWithDuration:2.0 animations:^ {
    lblReady.alpha = 0;
} completion:^(BOOL finished) {
    [UIView animateWithDuration:2.0 animations:^ {
        lblSet.alpha = 0;
    } completion:^(BOOL finished) {
        [UIView animateWithDuration:2.0 animations:^ {
            lblGo.alpha = 0;
        } completion:^(BOOL finished) {
            // Add your final post-animation code here
        }];
    }];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:41:27.850

你应该让他们 performSelector:withObject:afterDelay: 代替。

因此，将您的代码更改为：

```
- (void)viewDidLoad
{
    [self performSelector:@selector(fadeAnimation:) withObject:lblReady afterDelay:0];
    [self performSelector:@selector(fadeAnimation:) withObject:lblSet afterDelay:2];
    [self performSelector:@selector(fadeAnimation:) withObject:lblGo afterDelay:4];
}

-(void)fadeAnimation:(UIView *)target {
    [self fadeAnimation:@"fadeAnimation finished:YES target:target];
}

- (void)fadeAnimation:(NSString *)animationID finished:(BOOL)finished target:(UIView *)target
{
    [UIView beginAnimations:nil context:nil];
    [UIView beginAnimations:animationID context:(__bridge void *)(target)];
    [UIView setAnimationDuration:2];

    [target setAlpha:0.0f];
    [UIView setAnimationDelegate:self];    
    [UIView commitAnimations];
} 
```

这只是在 0、2 或 4 个部分之后调用每个操作代码。如果动画持续时间改变了，这些数字也应该相应地改变。

如果你想使用块动画而不是使用旧的动画风格，你可以这样做：

```
[UIView animateWithDuration:2 animations ^{
    //put your animations in here
} completion ^(BOOL finished) {
    //put anything that happens after animations are done in here.
    //could be another animation block to chain animations
}]; 
```

# android - 使用 onListItemClick() 从 ListFragment 开始新活动

> ID：15514831
> 
> 赞同：3
> 
> 时间：2013-03-20T03:36:36.200
> 
> 标签：android, onclick

现在我有一个应用程序可以搜索并返回 ListFragment 中的项目。我希望能够使每个 ListFragment 可点击，这样当它被点击时，一个新的活动开始使用这样的东西：

```
public void onListItemClick(ListView listView, View view, int position, long id) {
    Intent i = new Intent(this, PlaceView.class);
    startActivity(i);
    //eventually data from the List will be passed to the new Activity...
} 
```

启动我需要可点击的 ListFragment 的类如下：

```
public class ResultsView extends FragmentActivity {

private ArrayAdapter<String> mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_results_view);

        //Receive searchTerm from MainActivity
        Intent intent = getIntent();
        String searchTerm = intent.getStringExtra(MainActivity.SEARCH_TERM);

        mAdapter = new ArrayAdapter<String>(this, R.layout.item_label_list);

        FragmentManager     fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        ListFragment list = new ListFragment();
        ft.add(R.id.fragment_content, list);

        // Let's set our list adapter to a simple ArrayAdapter.
        list.setListAdapter(mAdapter);

        FactualResponderFragment responder = (FactualResponderFragment) fm.findFragmentByTag("RESTResponder");
        if (responder == null) {
            responder = new FactualResponderFragment();

            ft.add(responder, "RESTResponder");
        }

        Bundle bundle = new Bundle();
        bundle.putString("search_term", searchTerm);
        responder.setArguments(bundle);

        ft.commit();
    }

    public ArrayAdapter<String> getArrayAdapter() {
        return mAdapter;
    }

    public void onListItemClick(ListView listView, View view, int position, long id) {
        Intent i = new Intent(this, PlaceView.class);
        startActivity(i);
    } 
```

所以我的问题是：

1）我如何设置`onListItemClick()`与`ListFragment list`我正在使用的一起工作？

2)`ListView`没有任何与`onClick`等相关的 XML 属性。这没关系吗？

3) 和其他适用的东西应该在`onListItemClick()`哪里`onItemClickListener()`？

谢谢你的帮助。

编辑：

按照 Pramod 的建议，我创建了一个 class: `ListFragmentClickable extends ListFragment`，并在其中填充了以下内容：

```
@Override
public void onListItemClick(ListView listView, View view, int position, long id) {
    Intent i = new Intent(this, PlaceView.class);
    startActivity(i);
} 
```

Eclipse 告诉我这`new Intent(this, PlaceView.class)`是不允许的，我只能说`Intent i = new Intent();`. 错误是“构造函数 Intent(ListFragmentClickable, Class) 未定义。” 我尝试按照 Eclipse 的建议实例化 Intent，然后添加`i.setClass(this, PlaceView.class)`，`i.setClassName(this, PlaceView.class)`但它没有工作，因为我遇到了同样的错误。

1）如何解决此错误并按计划覆盖该方法？

2）如果我不能这样做，并且必须使用`Intent i = new Intent();`，我如何告诉意图我们甚至针对什么类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T20:22:15.687

试试这个，

```
Intent intent = new Intent(getActivity().getApplicationContext(), YourClassName.class);
startActivity(Intent intent); 
```

其中“YourClassName”是您希望调用的类的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T03:41:01.400

从 listfragment 扩展一个类，然后覆盖 listitemclick 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T01:13:11.357

```
Intent i = new Intent((context),class) 
```

其中 class 是可识别的类型，可以按意图工作。具体来说，这是 Activity、Service 等。此外，上下文应该来自您的应用程序，**而不是**来自封装的列表视图，您通过使用`this`. 使用 getApplicationContext() 或从您的应用程序类中获取它，您需要有效的上下文。

如果 PlaceView 不是可识别的类型，那么您将无法做您想做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T10:24:48.130

您可以使用此“getActivity().getApplicationContext()”轻松获取上下文

# c++ - xcode：架构 x86_64 [cout <<] 的未定义符号

> ID：15514833
> 
> 赞同：1
> 
> 时间：2013-03-20T03:36:47.980
> 
> 标签：c++, xcode

我在命令行中运行了第一个 msgpack 成功示例，但在 xcode 中失败了

> 架构 x86_64 的未定义符号：
> “msgpack::operator<<(std::__1::basic_ostream >&, msgpack::object)”，引用自：main.o 中的 _main

错误来自这一行

```
std::cout << obj << std::endl;  //=> ["Hello", "MessagePack"] 
```

我已经设置

*   其他链接器标志 -lmsgpack
*   库搜索路径 /usr/local/lib
*   支持 c++ 11 的 C++ 标准库 libc++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:02:05.757

这表明`obj`有一个类型`msgpack::object`。

问题是没有`operator<<`for 类型的对象`msgpack::object`。
您正在寻找的是：

```
std::ostream& operator<<(std::ostream& stream, msgpack::object const& data)
{
    // STUFF
} 
```

# c# - mvc 文件结果 2 个问题

> ID：15514840
> 
> 赞同：1
> 
> 时间：2013-03-20T03:38:02.900
> 
> 标签：c#, asp.net-mvc-4

我这里有两个问题：

功能：

```
public ActionResult File(Guid Id, string Name)
    {
        using (var db = new DBContext())
        {
            var file = db.Attachments.Where(s => s.Id == Id).FirstOrDefault();
            if (file == null)
            {
                return HttpNotFound();
            }
            return File(file.Path, file.ContentType, file.OriginalName + file.Extension);
        }           
    } 
```

它工作正常，除了我希望浏览器决定下载此文件或在其中显示。现在它会自动下载 .png 图像，因为通常情况下，如果我单击此类链接，它会向我显示此图像。我怎样才能做到这一点？

第二个问题：这是我实现此功能的途径：

```
routes.MapRoute(name: "Files", url: "file/{id}/{file}",
       defaults: new { controller = "Home", action = "File",
                       id = UrlParameter.Optional, 
                       file = UrlParameter.Optional }); 
```

当我将`file`参数设置为。例如，`1.png`它会抛出 404 异常。据我了解，当它直接在服务器上查找文件时会发生这种情况，但不是通过我的功能。我怎样才能让这条路线总是调用这个函数？

感谢您的时间！

# jquery - 使用下划线将项目添加到带有 jquery 的 html 表中

> ID：15514841
> 
> 赞同：4
> 
> 时间：2013-03-20T03:38:03.320
> 
> 标签：jquery, backbone.js, underscore.js

我发现我可以将表格添加到我的表格中

```
$('#mytable').append("<tr><td>").text("yo").append("</td></tr>"); 
```

但如果我像这样多次这样做：

```
$('#mytable').append("<tr><td>").text("yo1").append("</td></tr>");
$('#mytable').append("<tr><td>").text("yo2").append("</td></tr>"); 
```

它最终只使用了最后一个“yo2”。有没有办法使用下划线遍历我的主干模型以将行动态插入到 html 表中。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T04:20:09.690

您的多个电话`append`和`text`电话都失败了，因为它们不能像那样链接。由于您想使用 Backbone 和下划线，您可以使用`_.each`( [docs](http://underscorejs.org/#each) ) 遍历您的属性并将它们附加到您的表中。像这样：

```
var TableModel = Backbone.Model.extend({
    defaults: {
        "foo": "foo",
        "bar": "bar",
        "blah": "blah"
    }
});

var TableView = Backbone.View.extend({
    el: '#mytable',
    initialize: function() {
    },
    render: function() {
        _.each(this.model.attributes, function(val, key) {
            var row = "<tr><td>" + val + "</td></tr>";
            $('#mytable').append(row);
        });
        return this;
    }
});

var newModel = new TableModel();
var modelView = new TableView({model: newModel});
modelView.render(); 
```

jsfiddle [here](http://jsfiddle.net/ctasims/a8rsE/2/)，按预期工作。我只是在创建一个虚拟模型和视图。在视图的`render()`函数中，我遍历模型并将每个模型附加到一行中的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:51:41.943

我对骨干网不熟悉，但如果您可以将值存储在数组中，则可以执行以下操作：

```
$(document).ready(function(){
    var values = ['yo', 'yo2'],
    text = [];

    for(i=0;i<values.length;i++){
        text.push("<tr><td>"+values[i]+"</td></tr>");
    }
    $('#myTable').append(text.join(""));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T07:55:20.393

如果您使用主干，您可以使用 underscore/lodash 模板引擎并将数据转换为 html 代码，如下所示：

```
var data = ['yo1', 'yo2'];
var templ = "<tr><td><%=value%></td></tr>";
var rows = _.map(data, function(item) { return _.template(templ, {value: item}); });
var html = rows.join('');
$('#mytable').empty().append(html); 
```

# javascript - 这是指什么，为什么？

> ID：15514846
> 
> 赞同：0
> 
> 时间：2013-03-20T03:38:30.177
> 
> 标签：javascript

在这个例子中：

```
var A = {test: 1, foo: function() { return this.test }} 
```

为什么`A.foo()`返回`1`（至少在 node.js 中）？我以为`this`会绑定到外部调用者`this`，不是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T03:40:36.697

当您调用时`A.foo()`，`this`within`foo()`设置为 object `A`，因为这就是您调用函数的原因。因此，`this.test`具有 的值`1`。

您可以使用[或](http://odetocode.com/blogs/scott/archive/2007/07/05/function-apply-and-function-call-in-javascript.aspx)`this`更改引用的内容。[`.call()``.apply()`](http://odetocode.com/blogs/scott/archive/2007/07/05/function-apply-and-function-call-in-javascript.aspx)

```
A.foo.call(newThisValue); 
```

至于为什么……这给了你很大的灵活性。你可能有一个函数`this`来做某事，而 JavaScript 的构建方式允许你以`object`特定的方式将该函数应用于任何事情。[这有点难以描述，但在继承](http://www.crockford.com/javascript/inheritance.html)等情况下确实派上用场。另见： [http ://trephine.org/t/index.php?title=JavaScript_call_and_apply](http://trephine.org/t/index.php?title=JavaScript_call_and_apply)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:40:56.967

在 Javascript中，每当您使用符号[调用函数时](http://es5.github.com/#x11.2.3)，都会绑定到.`obj.method()``this``obj`

您可以通过将调用拆分为两个单独的步骤来解决此问题：

```
var f = A.foo;
f(); // "this" will not be A in this case. 
```

或者，滥用逗号运算符：

```
(17, x.f)() 
```

# ruby-on-rails - has_secure_password 如何在我的模型类中工作？

> ID：15514847
> 
> 赞同：17
> 
> 时间：2013-03-20T03:38:35.730
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在[学习 Michael Hartl 的 Rails 教程](http://ruby.railstutorial.org/)，我已经到了您只需添加以下内容的地步：

```
has_secure_password 
```

到你的模型课上，就会发生一堆魔法。

我了解此方法来自我的模型类扩展`ActiveModel::SecurePassword`的 中包含的模块。`ActiveRecord::Base`

我不明白的是，当我将这一行添加到我的类定义中时发生了什么。有人可以尽可能详细地解释一下。我真的很想了解发生了什么，而不仅仅是在我的应用程序上扔东西而不知道它是如何工作的。

（如果有助于理解我为什么感到困惑，我来自 Java 背景，而且我是 Ruby 新手）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T03:53:02.607

了解任何事情的最简单方法是查阅源代码！在这种情况下，这将是[ActiveModel::SecurePassword 文档](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html)。从那里，你可以看到这样`has_secure_password`做：

```
def has_secure_password
  # Load bcrypt-ruby only when has_secure_password is used.
  # This is to avoid ActiveModel (and by extension the entire framework) being dependent on a binary library.
  gem 'bcrypt-ruby', '~> 3.0.0'
  require 'bcrypt'

  attr_reader :password

  validates_confirmation_of :password
  validates_presence_of     :password_digest

  include InstanceMethodsOnActivation

  if respond_to?(:attributes_protected_by_default)
    def self.attributes_protected_by_default
      super + ['password_digest']
    end
  end
end 
```

用英文解释，这个函数：

1.  加载`bcrypt-ruby`Gem 并需要`bcrypt`. [bcrypt](http://en.wikipedia.org/wiki/Bcrypt)是一种安全的散列函数，您可以在 Wikipedia 中了解更多信息。
2.  向模型添加一个名为 的只读属性`password`。
3.  验证密码是否由另一个字段确认，称为`password_confirmation`. 换句话说，您必须输入两次密码才能确认。
4.  确保在保存模型之前存在 password_digest。
5.  加载[实例方法](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/InstanceMethodsOnActivation.html)，在这种情况下是`authenticate`（如果密码正确则返回 true，否则返回 false）和`password=`，它将传递的密码加密到 password_digest 属性中。
6.  如果该方法具有默认受保护的属性，这也将添加`password_digest`到该受保护属性列表中。（从而防止它被大量分配。）

您可以在[ActiveModel::SecurePassword 文档](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html)和[有关其实例属性的进一步文档](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/InstanceMethodsOnActivation.html)中了解更多信息。

# objective-c - How to make nil produces simple empty string in NSStringWithFormat?

> ID：15514849
> 
> 赞同：6
> 
> 时间：2013-03-20T03:38:57.350
> 
> 标签：objective-c, xcode4.5

```
 NSString * strNil= [NSString stringWithFormat:@"%@",nil]; 
```

The result is strNil is @"null"

Well, I want it to be @""

And I want an elegant solution. I know I can just create emptyStringIfNil category method. But that wouldn't work because that function will return nil, instead of @"".

What do you do for this?

Basically I want statements like

```
NSString * result =[NSString stringWithFormat:@"http://%@/business/api/addOrEditBusiness.php?flag=%@&title=%@&building=%@&latitude=%@&longitude=%@&website=%@&street=%@&city=%@&country=%@%@&originalid=%@&inbuildingaddress=%@&email=%@&zip=%@%@&userid=%@%@",urlServer,strFlag,biz.Title.RobustURLEncodedString,biz.buildingName.RobustURLEncodedString,@(coord.latitude),@(coord.longitude),biz.Website.RobustURLEncodedString,biz.Street.RobustURLEncodedString, biz.City.Name.RobustURLEncodedString, biz.City.Country.Name.RobustURLEncodedString,strPhonesParameter,biz.ID.RobustURLEncodedString,biz.InBui 
```

to show empty everytime the string is nil

For example, if streetAddress is nil, I want &street=&city=Tokyo instead &street=(null)&city=Tokyo

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T03:50:12.027

I dont know if there is an easier way, but you could just put:

```
(strName ? strName : @"") 
```

or, more simply put you can use:

```
strName?:@"" 
```

which does the exact same thing.

for each of the strings, which will just place the string in your output if it is not nil, otherwise an empty string.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T03:47:29.563

You could use a C function instead:

```
static inline NSString* emptyStringIfNil(NSString *s) {
    return s ? s : @"";
} 
```

Then `[NSString stringWithFormat:@"%@", emptyStringIfNil(nil)]` returns an empty string.

You could also add a class method to `NSString`, but I personally like the C approach better.

```
@interface NSString (EmptyIfNil)
+ (NSString*)emptyStringIfNil:(NSString*)s;
@end

@implementation NSString (EmptyIfNil)
+ (NSString*)emptyStringIfNil:(NSString*)s {
    return s ? s : @"";
}
@end 
```

And then use `[NSString emptyStringIfNil:yourString]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:39:21.323

Try this

```
NSString *strNil1 = [[NSString alloc] init];
strNil1 = @"1";
strNil1  = strNil1 ? strNil1 : @"";
NSLog(@" ==> %@", strNil1); 
```

Output :: **`==> 1`**

```
NSString *strNil2 = [[NSString alloc] init];

strNil2  = strNil2 ? strNil2 : @"";
NSLog(@" ==> %@", strNil2); 
```

Output :: **`==>`**

Hope, you'll get it.

Thanks.

# android - 'logcat -s Antutu Benchmark' 在命令行上不起作用

> ID：15514858
> 
> 赞同：0
> 
> 时间：2013-03-20T03:39:55.927
> 
> 标签：android, logcat

我想在 logcat 日志中过滤“Antutu Benchmark”。我努力了

```
logcat -s Antutu Benchmark
logcat -s Antutu\ Benchmark 
```

但这两个都行不通。是因为标签中的空格吗？有什么建议么？谢谢！

```
...
I/Antutu Benchmark( 1442): memory:     868
I/Antutu Benchmark( 1442): integer:     1240
I/Antutu Benchmark( 1442): float:     915
I/Antutu Benchmark( 1442): score2d:     145
I/Antutu Benchmark( 1442): score3d:     1196
I/Antutu Benchmark( 1442): database:     350
I/Antutu Benchmark( 1442): sdwrite:     85
I/Antutu Benchmark( 1442): sdread:     193
I/Antutu Benchmark( 1442): score:     4992
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:49:17.993

您可以使用以下命令获取所有包含“Antutu Benchmark”的日志

`adb logcat | grep Antutu Benchmark`

我猜你正在使用`adb`获取日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T04:38:05.823

在最近版本的 Antutu 中，标签似乎发生了变化，您现在可以使用以下内容：

```
logcat | grep AnTuTuBenchmarkScore 
```

# ruby-on-rails - Brew 更新错误

> ID：15514865
> 
> 赞同：1
> 
> 时间：2013-03-20T03:40:41.340
> 
> 标签：ruby-on-rails, ruby, rvm, homebrew

我正在尝试在我的 Mac 上安装 Ruby/RVM/Rails，但我不知道我必须先安装 Homebrew。在运行推荐`ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)"`的安装后，所发生的一切都是`env`交替`bash`运行。

我遵循了[https://github.com/mxcl/homebrew/wiki/Installation#untar-anywhere](https://github.com/mxcl/homebrew/wiki/Installation#untar-anywhere) <- 这些安装说明。在 /usr/local/ 中下载并解压缩我的文件，并将它们符号链接到 /usr/bin/ 和 /usr/local/bin。

然后我尝试运行`rvm get head`，它成功了，`rvm requirements`它回复了

```
Installing requirements for osx/10.8/x86_64, might require sudo password
Skipping `brew update` make sure your formulas are up to date.
Cowardly refusing to continue at this prefix: /usr
Cowardly refusing to continue at this prefix: /usr 
```

我尝试跑步`brew update`并`Cowardly refusing to continue at this prefix: /usr`再次出现。`sudo`我以相同的结果运行了所有这些。

任何帮助将非常感激！如果有人可以给我这样做的步骤，我愿意卸载所有东西并从头开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:01:26.537

这里还有另一个很好的指南，涵盖了更多的先决条件。

[http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

# java - 为什么 WindowClosing 处理程序在退出程序之前不执行后台任务？

> ID：15514866
> 
> 赞同：0
> 
> 时间：2013-03-20T03:40:45.867
> 
> 标签：java, awt, windowlistener, background-thread, swing-app-framework

```
mainFrame().addWindowListener(new java.awt.event.WindowAdapter() {
    @Override
    public void windowClosing(java.awt.event.WindowEvent evt)
    {
        retrieveItems();
        closeAllConnections();
        System.exit(0);
    }
}); 
```

对于上面的代码，`retrieveItems()`执行得很好，但是里面有一个后台任务`doBackup()`，`closeAllConnections()`它根本不执行。该程序似乎只是跳过了任务。这是`closeAllConnections()`包含内容的简要视图；

```
public void closeAllConnections()
{
    boolean shouldBackup = getBackupOnCloseStatus();
    if(shouldBackup)
    {
        doBackUp();
    }
    dbManager.disconnectDB();
} 
```

使用 Netbeans Step-Debugger 后，我注意到程序执行甚至`doBackup()`在应用程序退出之前都没有进入方法。这很奇怪。对于可能导致这种行为的任何帮助，我将不胜感激。谢谢好心人！

如果这条额外的信息可能有助于找到解决方案，我正在使用 Swing 应用程序框架，所以任务`doBackup()`如下所示......

```
@Action
public Task doBackUp()
{
    return new DoBackUpTask(getApplication());
}

private class DoBackUpTask extends org.jdesktop.application.Task<Object, Void> 
{
    private boolean done = false;

    DoBackUpTask(org.jdesktop.application.Application app) 
    {
        super(app);
        this.setMessage("Backing-up database...");
    }

    @Override 
    protected Object doInBackground() 
    {
        File destDir = new File(appManager.getBackUpDir());
        done = backUpDataBase(destDir);
        return null;
    }

    @Override 
    protected void succeeded(Object result) 
    {
        if(done)
        {
            setMessage("BackUp completed.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:50:11.353

这可能不是最好的答案，但我注意到`System.exit(0)`有时打电话时它会切断一切。在调用依赖于上一行结果的方法时，我曾经遇到过问题。一切都应该很好，但是它不能正常工作，因为它在上一行完成之前就执行了下一行。我相信有人可以更多地谈论事件调度线程，以及为什么这似乎会发生，尽管关于计算机科学的一切都说它不应该发生。但这是我的想法：向 closeAllConnections 添加一个布尔返回值以在完成时返回 true，然后像这样重新编写你的窗口侦听器：

```
 mainFrame().addWindowListener(new java.awt.event.WindowAdapter() {
    @Override
    public void windowClosing(java.awt.event.WindowEvent evt)
    {
        boolean isClosed = false;
        while(!isClosed){
            retrieveItems();
            isClosed = closeAllConnections();
        }    
        System.exit(0);
    }
}); 
```

也许这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:55:41.450

我的猜测是您在其他`WindowListener`地方有另一个正在调用`System.exit()`，或者您正在执行 a `JFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`，其中任何一个都会导致应用程序立即终止，而不管其他线程正在执行什么。

# javascript - 在 Java Script 中关闭窗口之前显示带有 OK 按钮的警告消息

> ID：15514876
> 
> 赞同：-5
> 
> 时间：2013-03-20T03:41:23.387
> 
> 标签：javascript

我知道通过在java脚本中使用这个函数：

```
window.onbeforeunload = function(e) {
return 'Please press the Logout button to logout.';
}; 
```

当我按下关闭窗口按钮时，它将显示警告消息。但是警告消息会要求用户在“留在页面上”或“离开页面”之间进行选择。

我不希望用户在关闭窗口时进行选择。我们如何使用 OK 按钮创建警告消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:20:34.860

这将对那些想要将其用于不光彩的意图（别无选择，只能点击或保持打开的弹出式广告？）的网站产生严重影响。在我看来，您只是想确保用户在不注销的情况下不会“猛击页面”，这不是恶意的，但绝对没有必要。

有许多不同的方法可以进行身份​​验证会话管理，但您必须牢记这一点：

**没有办法保证用户做*任何*你想让他们**做的事情，所以你需要自己处理这些情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:12:21.017

你不能。这实质上将允许开发人员阻止用户离开页面。浏览器保护最终用户免受这种行为的影响。

`onbeforeunload`无论如何，您永远不能依赖该事件。如果用户只是关闭浏览器，你的代码会发生什么？或者电脑死机。您需要在逻辑中处理所有这些情况，而不依赖于某些浏览器事件。

# colors - 如何为 UICollectionView 的特定部分填充与其他部分不同的颜色？

> ID：15514880
> 
> 赞同：2
> 
> 时间：2013-03-20T03:41:46.520
> 
> 标签：colors, cell, background-color, uicollectionview

我有一个带有多个单元格的单行集合视图。如何用与其他颜色不同的颜色填充 UICollectionView 的特定部分？例如，如果我希望行尾的最后一个单元格右侧的背景颜色与单元格下方的背景颜色不同。

# hibernate - 当检索到的对象被外部更改时，休眠创建通知？

> ID：15514882
> 
> 赞同：1
> 
> 时间：2013-03-20T03:42:16.560
> 
> 标签：hibernate, events, triggers, refresh, external

假设我从数据库中检索到对象 A，现在它处于分离状态。数据库中对应于对象 A 的行被外部更新。有没有办法通知我的应用程序对象 A 不再是最新的并且可能会自动刷新？也许数据库上的触发器可以为 Hibernate 创建一个事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-22T13:13:09.160

Hibernate 不支持这种情况，因为它旨在用于客户端-服务器应用程序，其中仅存在一个 hibernate 实例，在服务器上运行，并且具有对数据库的独占访问权限。

Hibernate 应该为服务器应用程序提供持久性，并且客户端应该与该服务器应用程序而不是直接与数据库通信，因此所有更新都由服务器应用程序启动，并且它们通过单个 hibernate 实例访问数据库，因此不能有外部更新，并且唯一的 hibernate 实例可以完全控制一切。

当然，将数据库用作服务器是很诱人的，因为它可以使您不必开发自己的客户端-服务器软件。在这种情况下，每个客户端都将运行自己的休眠实例，并且这些实例中的每一个都将直接与数据库对话。然后，问题是您必须以某种方式说服 hibernate 的每个实例查看其他实例对数据库所做的更改。这似乎是一项艰巨的任务，但又一次节省了巨大的成本，（不必编写自己的客户端-服务器软件，在它们之间使用自己的通信协议，）所以值得一试，对吧？

好吧，我以这种方式实现了一个应用程序，我开始后悔了：它笨重、有缺陷，而且性能很差。

但是，如果您真的想尝试一下，这里是如何做到的：

每个客户端都需要通过向“change_log”表中添加行来记录它所做的每一个更改，并且它需要通过查找出现在更改日志表中的新记录来检测其他客户端所做的更改。

对于更改记录，使用hibernate拦截器检测本地客户端对数据库所做的更改，并将每次更改记录在更改日志表中。更改日志的每一行都需要有一个自动递增的 id、更改实体的类名称、实体的 id（数据库键）和事件类型：添加、修改或删除。（当然，您不关心拦截器支持的第四类事件，即行加载。）请注意，您必须为此使用良好的旧 JDBC，因为无法从拦截器回调中重新进入休眠状态。

对于更改检测，运行一个单独的线程来轮询更改日志表的更改。它需要做的就是记住它看到的最后一个更改日志行的 id，并不断询问数据库是否有任何 id 高于此的行。（不要为此使用客户端发布的时间戳，因为客户端时钟中不可避免的微小差异会造成严重破坏。数据库发布的时间戳可能有效，但使用数据库自​​动递增的整数 id 更简单。）当然，你也需要在这里使用 JDBC，因为 hibernate 永远不会告诉你任何行已经添加到更改日志中：记住，hibernate 的印象是整个数据库都属于它，所以它不考虑其他人可能已向其中添加行的可能性。

更改检测线程应该生成事件并以某种方式将它们传递给休眠状态所在的主线程。这意味着您的主线程必须运行一些事件循环，或者定期调用一些滴答机制。一旦你的主线程接收到一个变化检测事件，它会根据事件的类型采取行动：当一个实体被添加时，它告诉 hibernate 加载它，当一个记录被删除时它告诉 hibernate 忘记它，当一个记录更新它告诉休眠刷新它。

就个人而言，我无法说服 hibernate 刷新单个实体，因此我在每次更改检测时都完全刷新 hibernate，这导致性能非常差。我将在下个月解决这个问题，我担心解决它的方法是摆脱休眠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:49:46.697

我认为 Hibernate 中没有任何东西可以帮助你解决这个问题，所以它只是你能想出的任何东西。您必须跟踪所有实例及其所在位置，以便知道将事件发送到何处。您可以使用[Hibernate 拦截器或侦听器](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/events.html)来找出特定实体何时更新。

处理冲突更新的典型方法是使用基于版本检查的乐观锁定，并在 Hibernate 参考指南的[“乐观并发控制”下进行了广泛讨论。](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/transactions.html#transactions-optimistic)

# c++ - 关于通过 Get 和 Set 方法传递字符串

> ID：15514886
> 
> 赞同：0
> 
> 时间：2013-03-20T03:42:52.280
> 
> 标签：c++, string, constructor, destructor

首先让我说我是 C++ 的初学者。我正在尝试编写一个简单地询问用户 3 个输入的程序。两个是字符串，一个是整数。我为此编写了以下课程：

```
#include <string>
#include <sstream>

using namespace std;

class Cellphone
{
private :
        string itsbrand;
    string itscolor;
    int itsweight;

public :
    string tostring();
        void setbrand(string brand);
        string getbrand() ;
    void setcolor(string color);
    string getcolor();
    void setweight(int weight);
    int getweight();

}; 
```

一切都像我需要的一样工作，除了我需要两个构造函数。一种在参数中没有数据，一种在参数中有数据。我很困惑，甚至从构造函数开始，所以如果有人能提供一点见解，我将不胜感激。这是我的 main() ：

```
int main ()
{
  Cellphone Type;

  int w;
  string b, c;

  cout << "Please enter the Cellphone brand : ";
  getline(cin, b);
  Type.setbrand (b);
  cout << "Please enter the color of the Cellphone : ";
  getline(cin, c);
  Type.setcolor (c);
  cout << "Please enter the weight of the Cellphone in pounds : ";
  cin >> w;
  Type.setweight (w);
  cout << endl;
  cout << Type.tostring();
  cout << endl;
} 
```

关于我将如何做构造函数的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:58:15.687

C++ 类中的构造函数可以重载。

1.  没有给定参数的构造函数通常称为“默认构造函数”。如果你的类没有定义任何构造函数，编译器会为你生成一个“默认构造函数”。“默认构造函数”是可以在不提供任何参数的情况下调用的构造函数。

2.  当创建类的新对象时为这些参数提供值时，使用具有给定参数的构造函数。如果你的类已经定义了带参数的构造函数，那么编译器不会为你生成“默认构造函数”，所以当你创建一个需要默认构造函数的对象时，会导致编译错误。因此，您可以根据您的应用程序来决定是否提供默认构造函数和重载构造函数。

例如，在您的 CellPhone 类中，您可以根据需要提供两个或更多构造函数。

默认构造函数：您正在为类的成员提供某种默认值

```
public CellPhone(): itsbrand(""), itscolor(""), itsweight(0){ 
      //note that no formal parameters in CellPhone parameter list
} 
```

带参数的构造函数：

```
public CellPhone(string b, string c, int w): itsbrand(b), itscolor(c), itsweight(w)
{
} 
```

您还可以定义一个为所有给定参数提供默认值的构造函数，根据定义，这也称为“默认构造函数”，因为它们具有默认值。下面给出的示例：

```
public CellPhone(string b="", string c="", int w=0): itsbrand(b),itscolor(c),itsweight(w)
{
} 
```

这些是关于 C++ 中的构造函数重载的一些方面；

# assembly - 汇编语言 (MIPS) addi 和 add 之间的区别

> ID：15514887
> 
> 赞同：18
> 
> 时间：2013-03-20T03:43:00.823
> 
> 标签：assembly, mips

我试图了解使用`addi`and之间的区别`add`，两者都做同样的事情吗？

例如

```
addi  $t0, $0, $a0
add  $t0 , $0, $a0 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-20T03:46:43.277

`add`将两个寄存器中的值相加

`addi`向寄存器添加一个立即数（常数）

[这](http://www.mrc.uidaho.edu/mrc/people/jff/digital/MIPSir.html)给了你一些例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-23T01:39:10.803

添加到答案：

添加语法如下所示：

**add rd , rs , rt** // 看这里的区别**rs , rt**

即**rd <--- rs + rt**

**位(31)|操作码| rs | rt | rd |移位量|功能码| 位 (0)**

虽然添加：

**Addi rt , rd , immediate** // **rt , rd**与 ADD 比较的外观差异

即**rd <--- rt + 立即数**

**位（31）|操作码|rs|rt|立即（16位）| 位（0）**

# java - 在多线程程序中将大小值添加到其先前的值

> ID：15514892
> 
> 赞同：0
> 
> 时间：2013-03-20T03:43:28.877
> 
> 标签：java, multithreading, thread-safety

我已经开始研究一个项目，在这个项目中，我需要将每次调用中的`size`of`beAttributes`与之前的`size`.

下面是我的代码-

```
public static void main(String[] args) {

    final int noOfThreads = 2;

    //create thread pool with given size 
    ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

    for (int i = 0, i< noOfThreads; i++) {
        service.submit(new ThreadTask());
    }

    // wait for termination        
    service.shutdown();
    service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);

    System.out.println(ThreadTask.count_size);
}

class ThreadTask implements Runnable {

    public static int count_size = 0;

    @Override
    public void run() {

        while(time < 10 minutes) {
            try {

            ...

            List<BEAttribute<?>> beAttributes = beClient.getBEAttributes(columnsList);

            // Now I need to sum the beAttributes.size in every call

                final int size = beAttributes.size;
                count_size = count_size + size;
            ...

            } catch (InterruptedException e) {

            }
        }
    } 
```

**问题陈述：-**

假设在 while 循环中，对于第一次调用`getBEAttributes`方法，我得到`beAttributes.size`了`20`. 然后我应该将它存储`20 number`在一些静态整数中。现在在对方法的其他调用中`getBEAttributes`，我得到了`beAttributes.size`as `40`，那么我应该将它添加`40`到 previous `20`。所以现在静态整数将变为 60。并继续执行此过程，直到程序完成。并从主线程打印相同的静态整数。

我目前正在做的方式是线程安全的吗？我想我做增量的方式有问题。如果是的话，有人可以帮助我正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:05:38.093

这并不是真正的线程安全，因为您有多个线程访问同一个变量`count_size`. 我的建议（简单修复）是使用 a[`AtomicInteger`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)而不是 int。它们具有原子（即保证互斥）方法`getAndAdd(int size)`，`addAndGet(int size)`您可以使用它们来添加它。为了使其线程安全，您还需要使变量 volatile - 这确保不进行本地缓存。例如：

```
public static volatile AtomicInteger countSize = new AtomicInteger();

//...
while() {
    //...
    countSize.getAndAdd(beAttributes.size);
    //...
} 
```

要获取 int 值：`ThreadTask.countSize.get()`.

您还可以使用自己的锁创建自己的方法以添加到变量中，例如：

```
private static volatile int countSize = 0;
private static Object lock = new Object();

private static void addToSize(int i) {
    synchronized(lock) {
        countSize+=i;
    }
}
public static int getCount() {
    synchronized(lock) { //it is good practice to synch getters too - although not entirely necessary with ints.
        return countSize;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:27:38.947

以下操作不是原子的：</p>

```
count_size = count_size + size; 
```

试试下面：

```
public static   AtomicInteger countSize = new AtomicInteger() 
```

和

```
countSize.getAndAdd(beAttributes.size); 
```

# c++ - 将 N 项插入空 std::map 的复杂性

> ID：15514893
> 
> 赞同：2
> 
> 时间：2013-03-20T03:43:32.470
> 
> 标签：c++, stl, complexity-theory

我想知道以下功能的复杂性。
我知道 std::map 被实现为红黑树，插入的复杂度为 O(logN)。
但是，如果我继续向空地图添加 N 个项目，我该如何计算呢？

```
void add(int N, std::map<int, int>& map) {
  for (int i = 0; i < N; ++i) {
    map[i] = i;
  }
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:45:34.147

你做了 N 次 O(log N) 的事情，所以它是 O(N log N)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:22:34.393

RB树是一种平衡二叉树。插入操作基本上是找到插入位置，为新插入的节点分配空间并调整指针，然后重新平衡 RB 树。插入的复杂度是 O(logN)。

因为在您的情况下，您首先确定某些操作的复杂性，即具有 log(N) 复杂性的插入，然后找出该操作使用了多少次。这就是我们有 N(logN) 的原因。O(logN) 表示容器中元素数量所用时间的增长顺序最多为 logN 的顺序。这并不意味着实际使用的时间是 logN。

如果您的应用程序是时间批评者，您可以考虑使用，`unordered_map`因为插入时间复杂度是恒定的。您正在从 int 映射到 int，因此在这种情况下使用 unordered_map 应该非常好。

BTW：在你的公式中，log0 没有定义，当没有要插入的元素时，你不进行插入操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T04:30:16.570

你在问一个合理的问题。

将 N 项插入一棵一开始为空的树时，您将从 log(0) 开始并前进到 log(N)。这意味着您的总体平均水平实际上`log(N/2)`是`log(N)`.

在对数的情况下，这并没有真正的区别——整体复杂性仍然是对数的。你所做的实际上改变了对数的*底数*。

# c - 如何调试嵌入式进程？

> ID：15514897
> 
> 赞同：2
> 
> 时间：2013-03-20T03:44:39.910
> 
> 标签：c, linux, debugging, embedded

我在 arm + Linux 平台上调试进程时遇到问题：

这是一个使用 CAPWAP 协议的守护进程，因此它不断地与另一个远程进程通信。当它因分段错误而崩溃时，我通常的调试方法是通过添加一些日志输出`printf`，以查找进程崩溃的位置，但这不是很有效。

有没有其他方法可以调试这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:25:57.287

您还可以启用[core(5)](http://man7.org/linux/man-pages/man5/core.5.html)转储，然后`gdb`在该核心上使用 post-mortem

```
 gdb yourprogram core 
```

要启用核心转储，您需要使用 调用[setrlimit(2)](http://man7.org/linux/man-pages/man2/setrlimit.2.html)系统调用`RLIMIT_CORE`，通常在某些父进程中（例如带有 的 shell `ulimit`）

顺便说一句，你也可以通过`gdb`使用启动你的程序

```
 gdb --args yourprogram argtoyourprogram 
```

不要忘记用`gcc -Wall -g`. 这些`-Wall`选项提供几乎所有警告（非常有用），并`-g`产生调试信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:57:07.153

在这种情况下，有两个调试选项。

1.  使用 GDB 调试器调试您的程序。您可以使用 GDB 在程序中设置断点。

2.  使用 Android-ndk 调试您的分段错误。这种调试可以提供错误的确切位置。

# ruby - Ruby 中的 Builder 正在添加 到标记>

> ID：15514900
> 
> 赞同：0
> 
> 时间：2013-03-20T03:45:16.323
> 
> 标签：ruby, xml

我正在尝试生成这个 xml：

```
 <ns1:type>Account</ns1:type>
  <ns1:ids>2c92c0f83d60e055013d859f7f4873ee</ns1:ids>
  <ns1:ids>2c92c0f83d60e055013d859f7f2f73ec</ns1:ids> 
```

我正在使用这段代码：

```
def generate_id_xml
  xml = Builder::XmlMarkup.new

  xml.__send__(self.ons, :type, self.remote_name)

  objects.each do |o|
    xml.__send__(self.ons, :ids, o.id)
  end
  xml.xml
end 
```

但它正在生产：

```
<ins1:type>Account</ins1:type>
<ins1:ids>2c92c0f93d60e66d013d83e5845e04bc</ins1:ids
<ins1:ids>2c92c0f93d60e66d013d83e5847904be</ins1:ids>
<xml/> 
```

为什么要添加 xml/ 有没有办法摆脱它？

我有这段代码，它没有将 xml/ 标签添加到它的输出中。

```
def generate_xml
    xml = Builder::XmlMarkup.new
  objects.each do |o|
    generate_object xml, o
  end
  xml.xml           
end
#generate xml for an object
def generate_object(builder, object)
    builder.__send__(self.zns, :zObjects, 'xsi:type' => "ins1:#{self.remote_name}") do |a|
        object.to_hash.each do |k,v|
        a.__send__(self.ons, k.to_s.zuora_camelize.to_sym, v) unless v.nil?
      end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:44:48.553

`xml.xml`向 builder发送方法调用 `xml`- builder 似乎通过将所有方法调用作为元素名称处理来工作。有趣的是，它会在 irb 中执行此操作：

```
builder = Builder::XmlMarkup.new
 => <inspect/> 
```

出现该`inspect`元素是因为 irb 用于`Object#inspect`向您显示调用结果。然后哪个构建器解释为“添加一个名为'inspect'的空元素”

我不太确定您的其他代码是如何工作的，但是根据前面的问题，我确实知道有一个更广泛的上下文添加了一些包含元素，并且那里的代码可能以某种方式从第二个代码中选择或过滤 XML工作方法。有没有试过隔离工作方法直接调用？

当我尝试您的代码的这种变体时：

```
def generate_id_xml
  builder = Builder::XmlMarkup.new
  builder.namespace :type, 'contents'
  ['09876','65432'].each do |id|
    builder.ns2 :ids, id
  end
  builder
end 
```

我得到以下xml

```
<namespace:type>contents</namespace:type><ns2:ids>09876</ns2:ids><ns2:ids>65432</ns2:ids> 
```

所以在我看来，`.xml`你最后一行的内容是多余的。没有解释为什么您的第二个代码示例可以正常工作。. .

# c# - 为 DataGridTextColumn (TextBlock) 创建样式

> ID：15514903
> 
> 赞同：1
> 
> 时间：2013-03-20T03:45:34.913
> 
> 标签：c#, wpf, datagrid, textblock, datatrigger

我喜欢将这些样式应用`ElementTemplate`到`DataGridTextColumn`. 我的问题是我的列绑定到一个集合。我如何访问我的收藏的属性。请看“？？？” 源代码中的短语。

我喜欢拿它来比较`Int32.Max`。这些应该很容易。

```
<Style TargetType="{x:Type TextBlock}" x:Key="HistoriesGridColumn">
    <Style.Triggers>
        <DataTrigger Binding="????" Value="Int32.Max">
            <Setter Property="Background" Value="Black" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:30:46.293

只需在绑定属性中输入属性名，不要关心 Visual Studio 警告。

# python - 使用 os.popen 禁止打印到控制台？- Python

> ID：15514904
> 
> 赞同：0
> 
> 时间：2013-03-20T03:45:35.597
> 
> 标签：python, unix, operating-system, subprocess, popen

使用`popen`to unix 命令时，我将某些输出发送到控制台。

我知道它`subprocess.popen`具有抑制输出的功能。[抑制 subprocess.Popen 的输出](https://stackoverflow.com/questions/7082623/suppress-output-from-subprocess-popen)

**是否** `os.popen` **具有相同的抑制功能？**

请注意，我的 unix 命令中有管道，我无法开始`subprocess.Popen`工作。我的命令看起来像这样

`$ echo "es ist also grotesk , wenn herr jospin die europäische richtlinie und die britische datumsgestützte ausfuhrregelung gröblichst mißachtet und durch seine eigenen bedingungen zu ersetzen trachtet ." | treetagger/cmd/tree-tagger-german-utf8`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:55:16.993

不要使用管道，不要使用`os.popen`：

```
import subprocess

text = "es ist also ..."
tt = subprocess.Popen('treetagger/cmd/tree-tagger-german-utf8', 
                      stdout=subprocess.PIPE, 
                      stderr=subprocess.PIPE,
                      stdin=subprocess.PIPE)
tagged, stderr = tt.communicate(txt) 
```

Back in the day when I was the processing pipeline developer for the [Text+Berg corpus](http://www.textberg.ch/), I wrote a wrapper class for the TreeTagger, circumventing the wrapper scripts (which are of dubious quality anyway). Unfortunately, the code is proprietary.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:48:01.463

改用就好`subprocess.check_output`了。它将为您捕获字符串中的输出，并且还会自动进行错误检查（如果命令失败则抛出错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:48:45.287

这样做：

```
result = subprocess.Popen(['command'], 
           stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0] 
```

更多信息可以在[文档](http://docs.python.org/2/library/subprocess.html)中找到。

# matrix - 为什么我的透视变形出来仿射？

> ID：15514905
> 
> 赞同：2
> 
> 时间：2013-03-20T03:45:37.213
> 
> 标签：matrix, transform, perspective

我正在尝试将单位正方形转换为任意四边形。这是给我透视变换矩阵的代码：

```
bool Math::GetProjectiveMapping(const FPoint& p0, const FPoint& p1, 
                                const FPoint& p2, const FPoint& p3, 
                                Matrix33& m)
{
    /*  This function maps a unit square onto a quadrilateral
        specified by the four points p0-p3\.  */

    /*
        Calculate the projective mapping

        p0      p3
          ┌────┐            | a b c |
          │    │        M = | d e f |
          └────┘            | g h i |
        p1      p2
    */

    double Σx = p0.X - p1.X + p2.X - p3.X;
    double Σy = p0.Y - p1.Y + p2.Y - p3.Y;

    double a, b, c, d, e, f, g, h, i = 1;

    if (Σx == 0 && Σy == 0) // affine
    {
        a = p1.X - p0.X;
        b = p2.X - p1.X;
        c = p0.X;
        d = p1.Y - p0.Y;
        e = p2.Y - p1.Y;
        f = p0.Y;
        g = 0;
        h = 0;
    }
    else // perspective
    {
        double Δx1 = p1.X - p2.X;
        double Δx2 = p3.X - p2.X;
        double Δy1 = p1.Y - p2.Y;
        double Δy2 = p3.Y - p2.Y;

        double del = Δx1 * Δy2 - Δy1 * Δx2;

        if (del == 0)
            return false;

        g = (Σx * Δy2 - Σy * Δx2) / del;
        h = (Δx1 * Σy - Δy1 * Σx) / del;

        a = p1.X - p0.X + g * p1.X;
        b = p3.X - p0.X + h * p3.X;
        c = p0.X;
        d = p1.Y - p0.Y + g * p1.Y;
        e = p3.Y - p0.Y + h * p3.Y;
        f = p0.Y;
    }

    m = Matrix33(
        a, b, c,
        d, e, f,
        g, h, i);

    return true;
} 
```

但是当我去变换正方形时，结果是仿射的（橙色是它*应该*在的地方）：

![透视变换仿射](../Images/6dd207228e53d028f11de23741163055.png)

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:19:21.127

没关系，这里的数学是正确的，我只是没有对结果向量进行归一化。

# java - 如何检查直线和矩形之间的交点？

> ID：15514906
> 
> 赞同：11
> 
> 时间：2013-03-20T03:45:56.730
> 
> 标签：java, line, collision, intersection, rectangles

标题说明了一切，我一直在四处寻找，找不到任何直截了当的东西。我如何用点 (x1,y1) & (x2, y2) 画一条线并检查它在矩形 (xR,yR) 之间的交点？我在 Line2D 包中看到有一些交集方法，但不知道如何设置它们。有人可以告诉我设置它以检查交叉口（碰撞）的正确方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T04:06:32.327

使用 2D 图形 API 中的可用类。

```
Rectangle r1 = new Rectangle(100, 100, 100, 100);
Line2D l1 = new Line2D.Float(0, 200, 200, 0);
System.out.println("l1.intsects(r1) = " + l1.intersects(r1)); 
```

这并没有告诉你，在哪里......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T04:05:01.383

一个矩形是 4 条线。您可以计算您的线与矩形的 4 条线之间的相交。

给定两条线的方程，当 x 和 y 相等时，它们将相交。

y = m1x + b1 y = m2x + b2

求解你应该得到的方程：

x = b2 - b1 / (m1 - m2);

请注意，如果 m1 == m2，线是平行的并且永远不会相交，在这种情况下要注意除以 0。

然后，由于您正在处理比无限线更响的线段，请检查相交是否在您的线段内脱落（检查 X 和 Y 是否都在每个线段的边界内）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-13T06:16:39.990

如果线不相交，则返回 null。从对类似问题的另一个响应中修改了一些 c 代码以使其成为 Java。没有费心去研究它是如何/为什么工作的，但是我需要它来完成工作。

```
static Point get_line_intersection(Line2D.Double pLine1, Line2D.Double pLine2)
{
    Point
        result = null;

    double
        s1_x = pLine1.x2 - pLine1.x1,
        s1_y = pLine1.y2 - pLine1.y1,

        s2_x = pLine2.x2 - pLine2.x1,
        s2_y = pLine2.y2 - pLine2.y1,

        s = (-s1_y * (pLine1.x1 - pLine2.x1) + s1_x * (pLine1.y1 - pLine2.y1)) / (-s2_x * s1_y + s1_x * s2_y),
        t = ( s2_x * (pLine1.y1 - pLine2.y1) - s2_y * (pLine1.x1 - pLine2.x1)) / (-s2_x * s1_y + s1_x * s2_y);

    if (s >= 0 && s <= 1 && t >= 0 && t <= 1)
    {
        // Collision detected
        result = new Point(
            (int) (pLine1.x1 + (t * s1_x)),
            (int) (pLine1.y1 + (t * s1_y)));
    }   // end if

    return result;
} 
```

# javascript - 在 JavaScript/CoffeeScript 中确定一个数组是否包含另一个数组的内容

> ID：15514907
> 
> 赞同：43
> 
> 时间：2013-03-20T03:46:12.057
> 
> 标签：javascript, arrays, coffeescript

在 JavaScript 中，如何测试一个数组是否包含另一个数组的元素？

```
arr1 = [1, 2, 3, 4, 5]
[8, 1, 10, 2, 3, 4, 5, 9].function_name(arr1) # => true 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-20T03:53:07.053

没有 set 函数可以做到这一点，但您可以简单地做一个临时数组交集并检查长度。

```
[8, 1, 10, 2, 3, 4, 5, 9].filter(function (elem) {
    return arr1.indexOf(elem) > -1;
}).length == arr1.length 
```

一种更有效的方法是使用`.every`which 将在虚假情况下短路。

```
arr1.every(elem => arr2.indexOf(elem) > -1); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-20T03:53:13.057

您可以使用[array.indexOf()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

伪代码：

```
function arrayContainsAnotherArray(needle, haystack){
  for(var i = 0; i < needle.length; i++){
    if(haystack.indexOf(needle[i]) === -1)
       return false;
  }
  return true;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T04:48:50.273

```
function arr(arr1,arr2)
{
    for(var i=0;i<arr1.length;i++)
     {
        if($.inArray(arr1[i],arr2) ==-1)
               //here it returns that arr1 value does not contain the arr2
        else
             // here it returns that arr1 value contains in arr2

     }

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-06-30T07:39:22.477

ES6 解决方案使用`includes`：

```
[1].every(elem => [1,2,3].includes(elem)); 
```

与上面的 Explosion Pills 的解决方案非常相似，只是更具可读性（并且可以说是慢了一点点）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-23T23:08:47.437

I faced the same case if I got you exactly, my case was to check visited places while one trip, every trip have its own point and we have a data for all working area places, here is the code maybe help you.

[https://stackblitz.com/edit/trips-calculator?file=index.js](https://stackblitz.com/edit/trips-calculator?file=index.js)

# vim - 当前在 Vim 中使用 OCaml 的设置是什么？

> ID：15514908
> 
> 赞同：27
> 
> 时间：2013-03-20T03:46:20.353
> 
> 标签：vim, ocaml

我从未使用过 Vi 或 Vim，但它似乎是编辑 OCaml 文件的最佳选择。不幸的是，我迷失了太多需要关心的事情：ocaml-vi-addon、vi-scripts、otags 等。

我打破了最初对 Vim 使用[cream](http://cream.sourceforge.net/home.html)的恐惧，但我怀疑是否需要除 vim-scripts 之外的任何包*。

*   -> 我用的是 Debian，也许这个信息没用

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-20T04:59:30.787

OCaml 的默认模式就是它的全部。您可以考虑使用以下插件：

[https://github.com/scrooloose/syntastic](https://github.com/scrooloose/syntastic) - 语法检查

[https://github.com/def-lkb/merlin](https://github.com/def-lkb/merlin) - 自动完成

[https://github.com/jpalardy/vim-slime](https://github.com/jpalardy/vim-slime) - repl 集成

[https://github.com/OCamlPro/ocp-indent](https://github.com/OCamlPro/ocp-indent) - 代码格式化

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-21T11:28:49.173

将这些行放在你的 ~/.vimrc 文件中：

```
filetype indent on
filetype plugin on
au BufRead,BufNewFile *.ml,*.mli compiler ocaml
syntax on 
```

然后你会得到一些不错的快捷方式：

*   `\s`在 .ml 和 .mli 文件之间切换
*   `\c`评论当前行/选择（`\C`取消评论）
*   `%`跳转到匹配的 let/in、if/then 等（参见 参考资料`:h matchit-install`）
*   `\t`告诉你光标下事物的类型（如果你用 编译`-annot`）

此外，Vim 可以解析编译器的输出并跳转到正确的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T08:17:01.397

出于以下原因，有人希望得到编辑的支持：

1.  通过语法高亮/折叠更好地呈现
2.  更好的自动缩进
3.  通过后台编译、语法高亮（再次）或任何其他方式更早地发现错误
4.  内联调试
5.  内省以列出可用的名称/方法，查看对象类型等。

对于 1 和 2，默认值应该足够好，尽管有[这个 ocp-indent 插件](https://github.com/OCamlPro/ocp-indent)试图做得更好。

对于 3，我求助于语法突出显示，并且不知道什么比 vim 更好。

关于内联调试，我从未设法从命令行使用 ocamldebug，因此从未尝试从编辑器中尝试过。

关于内省，我不能推荐足够[多的 annot 程序](https://github.com/avsm/ocaml-annot)，它可以作为 vim 插件安装，如 README 中所述。

安装后，您只需两次击键即可获得光标下任何内容的类型，这对于能够推断最复杂类型的语言来说非常方便。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-17T13:03:15.570

答案已经很老了，我认为这个线程需要更新，因为[LSP](https://microsoft.github.io/language-server-protocol/)作为事实上的标准的引入最近彻底改变了旧的文本编辑器（vim、emacs...等）。

## LSP（类似 IDE 的功能，如自动完成、重构等）

当前的state-of-the-art是使用官方的OCaml Language Server： [https ://github.com/ocaml/ocaml-lsp](https://github.com/ocaml/ocaml-lsp)

您可以将 coc.nvim 用于 Vim8+ 和 Neovim，并将其配置为使用 ocaml-lsp： [https ://github.com/neoclide/coc.nvim/wiki/Language-servers#ocaml-and-reasonml](https://github.com/neoclide/coc.nvim/wiki/Language-servers#ocaml-and-reasonml)

或者，您可以使用最新的 Neovim nightly (0.5+) 作为 OCaml 语言服务器的客户端，而不是 coc.nvim：[https ://github.com/neovim/nvim-lspconfig#ocamllsp](https://github.com/neovim/nvim-lspconfig#ocamllsp)

## 改进的语法高亮

使用 vim-ocaml 改进语法高亮： [https ://github.com/ocaml/vim-ocaml](https://github.com/ocaml/vim-ocaml)

或者 vim-ocaml 嵌入在 vim-polyglot 中，因此您不需要单独安装 vim-ocaml： [https ://github.com/sheerun/vim-polyglot](https://github.com/sheerun/vim-polyglot)

## 奖金

这是一个很好的视频，解释了社区在接下来几年关于工具和 OCaml 平台的总体发展方向： [https ://www.youtube.com/watch?v=E8T_4zqWmq8&t](https://www.youtube.com/watch?v=E8T_4zqWmq8&t)

## 奖励 2：vimrc 和 init.vim

我的 init.vim，也兼容 .vimrc： [https ://github.com/nicobao/setup/blob/master/vim/init.vim](https://github.com/nicobao/setup/blob/master/vim/init.vim)

伟大的 vimer 的 .vimrc/init.vim： [https ://github.com/awesome-streamers/awesome-streamerrc](https://github.com/awesome-streamers/awesome-streamerrc)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-31T21:16:07.737

[https://github.com/ocaml/merlin/wiki/vim-from-scratch](https://github.com/ocaml/merlin/wiki/vim-from-scratch)有一个非常好的指南

由于 Stack Overflow 不欣赏仅链接的答案，因此这里是命令，但实际上 - 访问该页面以获取见解和上下文。

```
opam install merlin 
```

将此添加到 .vimrc：

```
let g:opamshare = substitute(system('opam config var share'),'\n$','','''')
execute "set rtp+=" . g:opamshare . "/merlin/vim" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-17T13:43:03.500

另一个值得一提的替代方案是[Onivim](https://www.onivim.io/) ，它是一个基于 Vim 的编辑器，它[通过`ocaml-lsp`](https://onivim.github.io/docs/languages/reason-ocaml).

它的前端实际上是用 OCaml（好吧，ReasonML）编写的，它在后端使用了 Vim 的一个分支（[libvim](https://github.com/onivim/libvim)）。它仍处于 alpha 阶段，还没有提供完整的 Vim 体验，但是我自己已经全职使用了大约一年。

它也是一个商业产品，但可免费用于非商业用途和[延时开源](https://onivim.github.io/docs/other/faq#is-onivim-2-open-source)。

*（完全免责声明：我曾经在 Onivim 上工作，但在撰写本文时我没有）*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T08:30:19.240

Omlet 曾经是 Vim 的一个很好的模式：[作者页面](http://www.lix.polytechnique.fr/~dbaelde/productions/omlet.html)，[vim.org](http://www.vim.org/scripts/script.php?script_id=1196)。如果自 2005 年以来没有新版本，它可能会满足您的需求。如果您尝试一下，请告诉我们您的想法！

# c++ - 函数内的 STL 容器何时将其数据保存在 C++ 中？

> ID：15514911
> 
> 赞同：0
> 
> 时间：2013-03-20T03:46:52.123
> 
> 标签：c++, vector, containers

我有一个将素数列表存储在向量容器中的函数。在每次调用函数时，容器大小保持不变或增长。

```
bool prime(int n)
{
    ...
    static vector<int> v;
    vector <int>::iterator Iter;
    ...
    v.push_back(n);
}

int main()
{
    int num = 0;
    for (int i = 2; i <= n; ++i) {
      if (prime(i)) {
        ++num;
    }
} 
```

我不知道为什么存储在示例中有效。这个程序是依赖的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T03:56:44.550

它之所以有效，是因为变量是静态的：

```
 static vector<int> v;
// ^^^^^^ 
```

当您在函数中声明这样的变量时，这意味着该变量存在于函数调用中。

从技术上讲，这是一个“静态存储持续时间”（SSD）对象。这些对象与程序一样长。大多数 SSD 对象都是在调用 main() 之前创建的。**但是**对于函数静态变量，它们直到第一次调用函数时才创建。

# django - Django 管理员没有散列自定义用户密码

> ID：15514912
> 
> 赞同：33
> 
> 时间：2013-03-20T03:46:51.993
> 
> 标签：django, python-3.x

*   蟒蛇 3
*   姜戈 1.5
*   PostgreSQL 5.0.3

我是 Django 新手，我正在制作一个使用 AbstractUser 的 Django 应用程序，但是当我在 Django 管理员中创建一个用户，然后在管理员中查看用户信息时，我会看到纯文本密码。直接在数据库中检查，我看到密码肯定是以明文形式存储的。

我正在尝试编写一些视图来进行一些身份验证，但即使用户名和密码正确，它也无法正常工作。所以我猜测该`authenticate()`函数正在散列，但`None`由于密码实际上没有散列而返回。

**密码没有被哈希处理有什么可能的原因吗？**

我会发布一些代码，但我认为任何代码都无济于事，因为我的模型不包含任何对密码字段执行任何操作的代码（由 Django 生成和完成）。如果有什么我正在做或不做的事情，我什至不知道它会在代码的哪一部分，所以我必须从我的设置、模型、管理员等中发布所有内容。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-09-04T06:05:13.527

我想问题是你从 admin.py 中的 django.contrib.auth.admin 继承了 ModelAdmin 而不是 UserAdmin。

示例代码：

```
from django.contrib.auth.admin import UserAdmin
from .models import Employee

class EmployeeAdmin(UserAdmin):
    pass

admin.site.register(Employee, EmployeeAdmin) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-03T04:40:26.587

您可以将表单代码添加到 admin.py 文件中。但是，您还需要添加表单类的定义，而不仅仅是 save() 方法和 UserAdmin 子类的定义。我认为示例将阐明：

```
class UserCreationForm(forms.ModelForm):
    class Meta:
        model = CustomUser
        fields = ('email',)

    def save(self, commit=True):
        # Save the provided password in hashed format
        user = super(UserCreationForm, self).save(commit=False)
        user.set_password(self.cleaned_data["password"])
        if commit:
            user.save()
        return user

class CustomUserAdmin(UserAdmin):
    # The forms to add and change user instances
    add_form = UserCreationForm
    list_display = ("email",)
    ordering = ("email",)

    fieldsets = (
        (None, {'fields': ('email', 'password', 'first_name', 'last_name')}),
        )
    add_fieldsets = (
        (None, {
            'classes': ('wide',),
            'fields': ('email', 'password', 'first_name', 'last_name', 'is_superuser', 'is_staff', 'is_active')}
            ),
        )

    filter_horizontal = ()

    admin.site.register(CustomUser, CustomUserAdmin) 
```

这应该让你开始。您将需要自定义类的字段以匹配您的用户类的字段。

更多信息在这里：[https ://docs.djangoproject.com/en/dev/topics/auth/customizing/](https://docs.djangoproject.com/en/dev/topics/auth/customizing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:25:54.507

因为它直接保存在数据库中。因此，在保存之前，您必须覆盖散列密码的方法。在您的表单中添加：

```
def save(self, commit=True):
    # Save the provided password in hashed format
    user = super(MyForm, self).save(commit=False)
    user.set_password(self.cleaned_data["password"])
    if commit:
        user.save()
    return user 
```

# java - 带有上下文操作栏的 ListView

> ID：15514921
> 
> 赞同：1
> 
> 时间：2013-03-20T03:47:58.260
> 
> 标签：java, android, listview, android-actionbar

我的活动中有一个最初`ListView`设置为。`CHOICE_MODE_SINGLE`我为它提供了 textViewResourceId，`R.id.simple_list_item_1`因为我只显示单行文本。

当我长按某个项目时，我可以调出带有删除图标的上下文操作栏 (CAB)。删除将被选中的项目不是问题。当我需要显示实际选择了哪些项目时，我的问题就出现了。因为 textViewResourceId 是`simple_list_item_1`，所以这个 textView 不显示所选项目，因为它仅用于单选。有没有办法在运行时更改此 resourceId 以便`ListView`可以开始显示多个选择，然后在退出 CAB 时返回单选？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:36:32.050

我找到了解决问题的方法！我将 textViewResourceId 设置为`simple_list_item_activated_1`，这会突出显示选定的选项并在 中初始化 ListView `ListView.CHOICE_MODE_SINGLE`。在`onItemClick`中，如果选择模式为单一，我将单击的项目设置为未选中。在`onItemLongClick`中，我将选择模式设置为`ListView.CHOICE_MODE_MULIPLE`并打开了上下文操作栏 (CAB)。我从辅助方法处理 CAB 的菜单项，当我销毁操作模式时，我还将选择模式设置回`ListView.CHOICE_MODE_SINGLE`.

# javascript - 如何在另一个函数的范围内杀死 js 函数

> ID：15514936
> 
> 赞同：1
> 
> 时间：2013-03-20T03:49:38.350
> 
> 标签：javascript, ajax

我为我的表单提交构建了`please wait`gif 动画师，因为注册需要更多​​时间。

现在一切正常，但即使在成功消息之后，我的 gif 动画仍然继续运行。因此我的动画功能仍在运行。我怎样才能杀死那个功能？

这就是我现在所做的：

```
function loadSubmit(){
  ProgressImage = document.getElementById('progress_image');
  document.getElementById("progress").style.visibility = "visible";
  setTimeout("ProgressImage.src = ProgressImage.src",100);
  return true;
} 
```

我在我的 ajax 函数之前调用它：

```
 loadSubmit();
 $.ajax({
   url: "/register_me/",
   type: "POST",
   ...
 }).done(function(){
      // can i somehow kill loadSubmit() function in this scope? 
 }); 
```

能够做到这一点真是太好了..

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T03:55:46.823

setTimeout 返回一个整数值，然后可以使用函数 clearTimeout 清除该超时

```
function loadSubmit(){
   ProgressImage = document.getElementById('progress_image');
   document.getElementById("progress").style.visibility = "visible";
   // what exactly you want you achieve through this timeout
   return setTimeout("ProgressImage.src = ProgressImage.src",100);

}

var intervalID = loadSubmit();
$.ajax({
  url: "/register_me/",
  type: "POST",
  ...
}).done(function(){
   document.getElementById("progress").style.display = "none"; //EDIT
   clearTimeout(intervalID)
}); 
```

阅读 MDN 上的 setTimout 文档 [https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

编辑：我误读了这个问题。你需要隐藏 ProgressImage 来隐藏 gif，你仍然需要清除超时。

# python - 在类型创建的子类中调用 super

> ID：15514947
> 
> 赞同：1
> 
> 时间：2013-03-20T03:50:21.807
> 
> 标签：python, inheritance, dynamic-class-creation

**更新**：取得了一些进展并简化了示例，尽管我目前被最新的错误难住了。我不知道为什么该`super().__init__`方法不受约束。

```
import types

class VeryImportantSuperClass(object):

  def __init__(self, anArg, anotherArg):
    self.anArg = anArg
    #Extremely clever code here

def createSubclassAttempt1(name):
  source = 'def __init__(self, arg):\n' +\
           '  super(' + name + ', self).__init__(arg, 6.02e23)\n' +\
           '  self.foo = self.anArg + 3\n'
  cls = type(name, (VeryImportantSuperClass,), {})
  d = {name: cls}
  exec source in d
  cls.__init__ = types.MethodType(d['__init__'], cls)
  return cls

if __name__ == '__main__':
  cls = createSubclassAttempt1('Foo')
  cls('foo') 
```

输出：

```
Traceback (most recent call last):
  File "/home/newb/eclipseWorkspace/TestArea/subclassWithType.py", line 27, in <module>
    cls('foo')
  File "<string>", line 2, in __init__
TypeError: unbound method __init__() must be called with Foo instance as first argument (got str instance instead) 
```

必须有某种方法可以从按类型创建的子类中调用超类方法，但是如果我能看到怎么做，我会感到震惊。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T06:04:10.723

`__init__`在创建类的函数中使用闭包：

```
class VeryImportantSuperClass(object):
    def __init__(self, anArg, anotherArg):
        self.anArg = anArg

def CreateSubclass(name):
    def sub__init__(self, arg):
        super(klass, self).__init__(arg, 6.02e23)
        self.foo = self.anArg + 3

    klass = type(name, (VeryImportantSuperClass, ),
                 {'__init__': sub__init__})
    return klass

if __name__ == '__main__':
    cls = CreateSubclass('Foo')
    print(cls(3).foo) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:17:16.950

这似乎有效，可以做你想做的事。`self.foo = self.anArg + 3`必须更改该语句，`self.foo = self.anArg + "3"`以避免`TypeError`在尝试连接 a`str`和一个对象时避免 a ，如您的问题中的代码所示，调用`int`会发生这种情况。`cls('f00')`

```
import types

class VeryImportantSuperClass(object):
    def __init__(self, anArg, anotherArg):
        self.anArg = anArg
        #Extremely clever code here

def createSubclassAttempt1(name):
    source = ('def __init__(self, arg):\n'
              '    super(' + name + ', self).__init__(arg, 6.02e23)\n'
              '    self.foo = self.anArg + "3"\n')
    d = {}
    exec(source, d)
    cls = type(name, (VeryImportantSuperClass,), d)
    d[name] = cls
    return cls

if __name__ == '__main__':
    cls = createSubclassAttempt1('Foo')
    inst = cls('foo')
    print(cls('foo').foo)  # prints "foo3" 
```

（适用于 Python 2.7.3 和 3.3）

# css - 带有过渡的下拉导航

> ID：15514948
> 
> 赞同：1
> 
> 时间：2013-03-20T03:50:24.650
> 
> 标签：css, drop-down-menu, transition

我尝试使用 css 转换代码使我的下拉导航轻松生效，就像这个主题演示一样：

[http://themeforest.net/item/heat-premium-portfolio-wordpress-theme/full_screen_preview/3700508?ref=themespotters](http://themeforest.net/item/heat-premium-portfolio-wordpress-theme/full_screen_preview/3700508?ref=themespotters)

但是我尝试了很多编码方式，只是无法产生这种效果，当我将鼠标悬停在其父级上时，我需要我的子菜单停留更长时间，否则无法单击！

非常感谢，这是我的网页链接：[http ://hxxa.info/](http://hxxa.info/)

和我现在拥有的 CSS 代码：

```
#menu_container { border-top: 1px solid #000; border-bottom: 15px solid #000; padding: 0px 0px; font-size: 13.5px; }
#menu_container ul { list-style-type: none; float: left; padding: 0px 0; }
#menu_container ul li { float: left; }
#menu_container ul li a { display: block; color: #000; text-decoration: none; padding: 5px 20px; margin: 0 0px; }
#menu_container ul li a:hover { background-color: #000; color: #fff; }
#menu_container ul li.current-menu-item a, #menu_container ul li.current_page_item a  { background-color: #000; color: #fff; }
#menu_container .cat_menu { border-left: 1px dotted #DDDDDD; }
#menu_container ul li ul {display: none;} 
#menu_container ul li:hover ul {border-top: 1px solid #000; border-bottom: 15px solid #000; width:278px; display: inline-block;
position: absolute; z-index:999; background-color: #fff;}
#menu_container ul li ul li:hover { width: 278px; background-color: #000;}
#menu_container ul li ul li a:hover { background-color: #fff; color: #5e5e5e} 
```

# c# - 在 WPF 应用程序中添加和执行小型 .net “脚本”

> ID：15514949
> 
> 赞同：2
> 
> 时间：2013-03-20T03:50:26.250
> 
> 标签：c#, .net, visual-studio-2010

我们有一个 wpf 应用程序，它使用大量配置来表示 UI 工具栏/按钮等，包括。当它们被启用/禁用等时，使用 ICommand 根据函数名称等在运行时绑定它们。

其中相当多的功能实际上很简单，例如

```
bool CanExecuteThisCommandIf(MyParms p){
     return MyObject != null && MyObject.Type == MyEnum.Type3
} 
```

db 表中的定义包括

```
toolbar_id
button_id
caption 
func_name
enabled_if
button_image
tooltip_text 
```

被执行的代码是

所以有很多这些单行函数在窗口/用户控件的上下文中执行

现在，寻找一种方法来将此函数的主体包含在配置表本身中，而不是在代码中创建这一行函数

通过阅读 CMS 的详细信息，例如果园、Umbraco 等

```
Questions
a) is it possible to create these scriptlets
b) how ? 
```

谢谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:29:40.790

是的，有可能。*但是，除非您放宽要求，否则这并非易事。*

这里有几种方法可以完成这样的事情：

**选项1：**

您可以通过基于标记创建（或查找现有）伪语言来描述您需要执行的操作来解决此问题。

SharePoint 做了类似的事情，一些允许从配置文件生成动态代码的框架也是如此。

基本上，您使用 XML 或任何选择的伪语言来定义您的方法的行为、参数和条件。如果您愿意，您甚至可以在其中包含实际的 C# 代码。

然后，您可以动态生成动态程序集，并使用反射调用工具栏上的方法。

查看这些命名空间以获取更多信息：

```
System.CodeDom.Compiler 
System.Reflection.Emit 
```

System.Reflection.Emit 命名空间有一个 ILGenerator 类，您可以使用它来创建 IL 指令作为动态生成类型的一部分。

*对于这个小任务，这可能比它的价值更多。*

**选项 2：**

另一种方法是使用插件架构并使用特定的工具栏/组件相关方法动态加载 DLL（基于某些界面，因此您可以轻松执行所需的操作，而无需大量硬编码，例如 a `Command pattern`，具体取决于您的配置）加载适当的程序集并执行其逻辑来配置您的组件。

*对于手头的任务，这可能仍然比您想要处理的更多。*

**选项 3：**

可能是最容易实现的，我认为对于一个小项目来说最有意义。

您可以在一个通用程序集中包含您需要的所有方法，并一直引用它。然后根据您在运行时加载的组件，使用配置来确定需要调用或执行哪些方法。这避免了对复杂的过度设计的需求并完成了相同的任务。

选项 3 的缺点是每次添加或配置新组件时都必须重新编译项目。由于您并没有真正尝试创建动态的、可扩展的应用程序，而只是希望处理 UI 组件的一些配置，因此此选项仍然有意义，因为如果您要定义可以配置的新组件（新菜单或附加小部件） )，因此无论如何你都会重新编译你的项目。

# google-app-engine - urlopen() 上的 GAE getaddrinfo 错误

> ID：15514953
> 
> 赞同：-1
> 
> 时间：2013-03-20T03:50:36.420
> 
> 标签：google-app-engine

我正在使用 GAE 构建一个简单的应用程序，该应用程序获取 URL 并使用 urllib2 进行一些处理，如文档中所述。

```
import webapp2
import urllib2

class Handler(webapp2.RequestHandler):
    def get(self):
        url = "http://www.google.com/"
        try:
            result = urllib2.urlopen(url)
            self.response.out.write(result)
        except urllib2.URLError, e:
            handleError(e)

app = webapp2.WSGIApplication([("/", Handler)], debug = True) 
```

对 urlfetch 进行了同样的尝试，但我一直收到同样的错误。

如果我使用 IP 地址调用 urlopen()，它工作正常。

我认为这可能是 DNS 问题，但从`urllib2.urlopen("http://www.google.com")`解释器调用正确解决了。此外，我可以毫无问题地浏览和 ping。

请一些朋友在他们的环境中为我尝试这段代码，结果是一样的。

运行相同代码的已部署应用程序运行良好。

我想知道这是否可能是我的 ISP 的问题，因为所有 3 次尝试都是从同一个 ISP 的不同地方完成的。

不，我不会通过代理，至少不是我配置的或我能看到的。

这是堆栈跟踪

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.2\webapp2.py", line 1535, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.2\webapp2.py", line 1529, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\Developer\Desktop\test\main.py", line 8, in get
    result = urllib2.urlopen(url)
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1180, in do_open
    r = h.getresponse(buffering=True)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\dist27\httplib.py", line 507, in getresponse
    'An error occured while connecting to the server: %s' % e)
error: An error occured while connecting to the server: Unable to fetch URL: http://www.google.com/ Error: [Errno 10106] getaddrinfo failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:35:12.830

在我按如下方式修复代码后，该代码对我有用：

```
result = urllib2.urlopen(url).read() 
```

请检查您的 DNS 解析器、安全软件或 http 代理配置的设置。

而且，请不要一个接一个地提出类似的新问题。

# python - 谷歌应用引擎python数据库丢失数据

> ID：15514954
> 
> 赞同：0
> 
> 时间：2013-03-20T03:50:39.760
> 
> 标签：python, google-app-engine, google-cloud-datastore

在 localhost 上使用 python google app engine 数据存储时，所有数据都会不时丢失。发生这种情况时，每次我的谷歌应用程序引擎启动器都会冻结，我必须强制退出才能重新启动它。任何人都知道为什么并且有同样的问题吗？我怎样才能修复它？

运行于：Macbook Pro 版本 10.7.5 操作系统：Lion 语言：python

Google App Engine SDK：版本 1.7.5 我认为服务器是：dev_appserver 因为日志控制台使用 dev_appserver.py

我正在使用启动器。

# php - 如何将（txt）导入json对象

> ID：15514955
> 
> 赞同：0
> 
> 时间：2013-03-20T03:50:50.943
> 
> 标签：php, json, import

所以我创建了 php 文件，它从 Arduino Pulse 传感器接收脉冲数据并将其存储到 .txt 文件中。这是代码：

```
<?php

$pulse = $_GET["pulse"] ;   

$file = fopen("data.txt", "a+");

$pulse.="\r\n";
fwrite($file, $pulse);//takes incoming data and writes it in the file
fclose($file);?> 
```

所以我在 data.txt 中存储的只是来自脉冲传感器的一堆数字。我想从不同的 php 文件作为 json 对象访问该 data.txt，所以我想出了这个，但它似乎不起作用：

```
<?php
header('Content-type: application/json');

if(isset($_GET["request"])){

    if($_GET["request"] == "info"){

        $pulse = $_GET["pulse"];

        $file = fopen("data.txt", "a+");

        $pulse.="\r\n";
        fwrite($file, $pulse);
        fclose($file);

        echo json_encode($file);

    }
}

?> 
```

任何建议都非常受欢迎，我觉得这是可能的。

最好的，

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:15:04.777

这是我能想到的最简单的..

```
<?php

        header('Content-type: application/json');

         // make your required checks

        $fp    = 'yourfile.txt';

        // get the contents of file in array
        $conents_arr   = file($fp,FILE_IGNORE_NEW_LINES);

        foreach($conents_arr as $key=>$value)
        {
            $conents_arr[$key]  = rtrim($value, "\r");
        }

        var_dump($conents_arr);
        $json_contents = json_encode($conents_arr);

        echo $json_contents;
?> 
```

这将首先将您的文件内容转换为数组，然后从中生成 json ..预期输出将类似于 ["data1","data2","data3"]

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:40:02.903

这会给你你想要的...

```
<?php
  header('Content-type: application/json');
  echo json_encode( explode("\r\n",file_get_contents('data.txt')) );
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:00:23.793

如果要发送数据文件的实际内容，只需读取文件的数据，将此数据存储到数组中，然后使用回显数组`json_encode`

```
<?php

// Send header for json content
header('Content-type: application/json'); 
```

// 检查用户是否询问信息 if(!empty($_GET["request"]) && $_GET["request"] == "info") {

```
 // Retrieve the content of the file and split on "\r\n"
    // ($data is an array of lines)
    $data = preg_split("/\r\n/", file_get_contents("data.txt"));

    // JSON encode the data array
    echo json_encode($file);

} 
```

例如，假设脉冲数据是简单的整数，您将发送如下 JSON：

```
["12","24","20",....] 
```

# python - Python min/max - 当有多个时选择哪个项目？

> ID：15514956
> 
> 赞同：2
> 
> 时间：2013-03-20T03:51:08.060
> 
> 标签：python, max, min

当您使用带键的 min/max 时，Python 中是否有某些东西可以保证始终从可迭代中选择相同的项目？

例如

```
>>> l = ['aaaaaa', 'bbbbbb', 'cc']
>>> max(l)
'cc'
>>> max(l, key=len)
'aaaaaa' 
```

Python 是否保证根据 key 函数返回第一个具有最大值的此类对象？

min 的第一个这样的对象是有意义的，但对于 max 来说，最后一个这样的对象可能更有意义：

```
>>> sorted(l, key=len)[-1]
'bbbbbb' 
```

我认为这是因为 Python 排序是[稳定](https://stackoverflow.com/questions/1915376/is-pythons-sorted-function-guaranteed-to-be-stable)的。所以也许我的问题是真的，对于最小/最大函数是否有“稳定”的等效概念，Python 是否遵循它？

# wordpress - Wordpress 条件语句不起作用

> ID：15514962
> 
> 赞同：0
> 
> 时间：2013-03-20T03:51:32.873
> 
> 标签：wordpress

我正在设置一些条件语句来更改不同页面的页面布局。我的第一个条件说

```
if (is_page('15030')) {
} 
```

里面的内容是用于主页的，并且效果很好。然后我的下一个说

```
elseif (is_page('Sales')){
} 
```

它根本不起作用。我尝试使用页面名称、页面 ID、将 elseif 更改为 if、使用 in_category - 根本没有显示任何内容。知道我应该寻找什么可能会导致这种情况吗？我注意到我将“销售”设置为帖子类别，当我创建“销售”页面时，它会自动显示来自销售类别的帖子，这是我想要的，但我不确定这是否会影响它吗？

该代码位于 custom_functions.php 中。这是完整的代码：

```
function custom_template() {
if (is_page('15030')) : ?>
    <!--Technology Section-->
    <div id="content">
        <div id="post-<?php the_ID(); ?>" class="post_box top">
            <a class="scroll" id="technology"></a>
            <div class="left">
                <a href="index.php?page_id=15174"><img src="../../../images/businessbee/blog/tech-bubble.gif" alt="Technology" class="bubble"/></a>
                <h3><a href="index.php?page_id=15174">Technology</a></h3>
                <p>Technology upgrades don't have to break the bank. From improving your hardware to streamlining your IT management, we've compiled cost-effective solutions to cover your needs. </p>
                <hr/>
                <ul class="catCount">
                    <?php
                        $catList = wp_list_categories('title_li=&show_count=1&echo=0&child_of=3527&hide_empty=0');
                        $catList = preg_replace('@\<li([^>]*)>\<a([^>]*)>(.*?)\<\/a>@i', '<li$1><a$2><span class="name">$3</span></a>', $catList);
                        $catList = ereg_replace('</a> \(([0-9]+)\)', ' <span class="count">\\1</span><br class="clear"/></a>', $catList);
                        echo $catList;
                    ?>
                    <br class="clear"/>
                </ul>
                <hr/>
                <a href="index.php?page_id=15174" class="allLink">View all Technology Resources</a>
            </div><!--left-->
            <div class="right">
                <h4>Featured Resources</h4>
                    <?php global $post; ?>
                    <?php if (have_posts()) : ?>
                        <?php query_posts('cat=3527'); ?>
                       <?php while (have_posts()) : the_post(); ?>
                            <?php $categories = get_the_category(); ?>
                            <?php if ( has_post_thumbnail() ) { ?>
                                <a href="<?= the_permalink() ?>" class="box">
                                  <div class="thumbnailBox">
                                    <h3><?= the_title()?>
                                    <span>posted in <?= $categories[0]->cat_name; ?></span>
                                    </h3>
                                    <?php the_post_thumbnail('medium'); ?>
                                    <div class="overlay"></div>
                                    </div>
                                </a>
                            <?php } ?>
                    <?php endwhile; ?>
                    <?php endif; ?>
                    <?php wp_reset_query(); ?>
            </div><!--right-->
            <br class="clear"/>
            <img src="../../../images/businessbee/blog/page-div.png" alt="" class="blog-page-div"/>

            <!--SALES SECTION-->
                <a class="scroll" id="sales"></a>
                <div class="left">
                    <a href="index.php?page_id=15206"><img src="../../../images/businessbee/blog/sales-bubble.gif" alt="Sales" class="bubble"/></a>
                    <h3><a href="index.php?page_id=15206">Sales</a></h3>
                    <p>Every sales team needs a solid method for tracking leads and identifying its top performers. Take a look at these great resources, designed to help maximize your conversion rate.</p>
                    <hr/>
                    <ul class="catCount">
                    <?php
                        $catList = wp_list_categories('title_li=&show_count=1&echo=0&child_of=3536&hide_empty=0');
                        $catList = preg_replace('@\<li([^>]*)>\<a([^>]*)>(.*?)\<\/a>@i', '<li$1><a$2><span class="name">$3</span></a>', $catList);
                        $catList = ereg_replace('</a> \(([0-9]+)\)', ' <span class="count">\\1</span><br class="clear"/></a>', $catList);
                        echo $catList;
                    ?>
                        <br class="clear"/>
                    </ul>
                    <hr/>
                    <a href="index.php?page_id=15206" class="allLink">View all Sales Resources</a>
                </div>
                <div class="right">
                <h4>Featured Resources</h4>
                    <?php global $post; ?>
                    <?php if (have_posts()) : ?>
                        <?php query_posts('cat=3536'); ?>
                       <?php while (have_posts()) : the_post(); ?>
                            <?php $categories = get_the_category(); ?>
                            <?php if ( has_post_thumbnail() ) { ?>
                                <a href="<?= the_permalink() ?>" class="box">
                                  <div class="thumbnailBox">
                                    <h3><?= the_title()?>
                                    <span>posted in <?= $categories[0]->cat_name; ?></span>
                                    </h3>
                                    <?php the_post_thumbnail('medium'); ?>
                                    <div class="overlay"></div>
                                    </div>
                                </a>
                            <?php } ?>
                    <?php endwhile; ?>
                    <?php endif; ?>
                    <?php wp_reset_query(); ?>
            </div><!--right-->
            <br class="clear"/>
            <img src="../../../images/businessbee/blog/page-div.png" alt="" class="blog-page-div"/>

    </div><!-- post id div-->
    </div><!--content-->

<!--End of Homepage Content-->

     elseif (is_page('Sales')){
        <h2>Test Content</h2>
    }

<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:10:01.750

看起来它需要像这样`if`代替`elseif`并包裹在php标签中

```
<?php endif; ?> // this closes the 1st if statement aka the if for is_page('15030').

<?php if ( is_page('Sales') ): ?>
<h2>Test Content</h2>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:12:30.780

根据法典：

> 由于某些全局变量在循环期间被覆盖，is_page() 将不起作用。为了在循环之后使用它，您必须在循环之后调用 wp_reset_query()。

在我看来，您在循环*中使用它。*

# c# - 如何在 Window Phone 7/8 中读取本地 .json 文件并显示数据？

> ID：15514968
> 
> 赞同：3
> 
> 时间：2013-03-20T03:52:05.437
> 
> 标签：c#, json, windows-phone-8, json.net, windows-phone

我尝试了几种不同的方法，还没有运气。注意：在第二个 if 语句中，我输入了长 json 字符串。但是，我不想写长的 json 字符串，而是想从 json 文件中读取。

```
 private void Pivot_LoadingPivotItem_1(object sender, PivotItemEventArgs e)
    {
        try
        {
            if(e.Item == item1)
            {
                list1.Items.Clear();
                //string stopslist1 = @"[{""Name"":""Communication Sciences""},{""Name"":""Hope Lodge""},{""Name"":""Juniper-Poplar""}]";
                IsolatedStorageFile mysfile = IsolatedStorageFile.GetUserStoreForApplication();
                IsolatedStorageFileStream fs = mysfile.OpenFile(@"c:\users\prime\documents\visual studio 2012\Projects\BullRunnertest3\BullRunnertest3\stopsA.json",FileMode.Open, FileAccess.Read);
                using (StreamReader re = new StreamReader(fs))
                {
                    string stopslist1 = re.ReadToEnd();
                }
                List<RouteStops> stops = JsonConvert.DeserializeObject<List<RouteStops>>(stopslist1);
                foreach(RouteStops em in stops)
                {
                    string name = em.Name;
                    list1.Items.Add(name);
                }
            }
            else if (e.Item == item2)
            {
                list2.Items.Clear();
                string stopslist2 = @"[{""Name"":""Computer Sciences""},{""Name"":""Hope for Lodge""},{""Name"":""Juniper and Poplar""}]";
                List<RouteStops> stops = JsonConvert.DeserializeObject<List<RouteStops>>(stopslist2);
                foreach (RouteStops em in stops)
                {
                    string name = em.Name;
                    list2.Items.Add(name);
                }
            }
            else...... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T21:13:37.257

看起来您正试图访问 Windows 手机上的 C:// 驱动器......它不存在。观看此视频：[http ://channel9.msdn.com/Series/Building-Apps-for-Windows-Phone-8-Jump-Start/Building-Apps-for-Windows-Phone-8-Jump-Start-04- Windows-Phone-8 上的文件和存储](http://channel9.msdn.com/Series/Building-Apps-for-Windows-Phone-8-Jump-Start/Building-Apps-for-Windows-Phone-8-Jump-Start-04-Files-and-Storage-on-Windows-Phone-8)

了解如何从本地存储访问文件。

# php - 不能阻止用户选择从表（数据库）中检索数据的多个复选框

> ID：15514971
> 
> 赞同：0
> 
> 时间：2013-03-20T03:52:46.690
> 
> 标签：php, javascript

我想防止用户选择超过 3 个复选框，但数据是从我的表中检索的。

即我从我的表中检索到 5 个复选框，但是当用户超过限制时我的脚本不起作用。这是我的代码。

```
<script type="text/javascript">
$('input[id="fruits"]').click(function(event) {
if (this.checked && $('input:checked').length > 3) {
event.preventDefault();
alert('You\'re not allowed to choose more than 3 boxes');
}
});
</script>

<?php
if ($result = $mysqli->query("SELECT fruitId, fruitname, fruitDes  FROM tbl_fruit")) {
if ($result->num_rows > 0)
{
echo "<table border='0' cellpadding='10'>";
echo "<tr><th>ID</th> <th>Name</th <th>Description</th> <th></th> </tr>";

while ($row = $result->fetch_object())
{
echo "<tr>";
echo "<td>" . $row->fruitId . "</td>";
echo "<td>" . $row->fruitname ." </td>";
echo "<td>" . $row->fruitDes ." </td>";
echo "<td><input type ='checkbox' name='fruits[]' value='" . $row->studId ."' id='fruits'></td>";
echo "</tr>";
}
echo "</table>"; } else {
echo "No results to display!";
}
}
else {
echo "Error: " . $mysqli->error;
}
$mysqli->close();
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:25:08.890

如果你真的想这样做，你需要先计算有多少被选中，如果它是最大数量，禁用未选中的。如果计数小于数字，则启用所有复选框：

```
<script type="text/javascript">

function toggleCheckboxes(name, num) {

    var checkedCount = 0;
    var boxes = document.getElementsByName(name);
    var box, disable, i;

    // If there aren't enough boxes, forget it
    if (boxes.length < num) return;

    // Count how many are checked
    for (var i=0, iLen=boxes.length; i<iLen; i++) {
      checkedCount += boxes[i].checked? 1 : 0;
    }

    // Work out if need to disable any
    disable = !!(checkedCount >= num); 

    // Only disable those that aren't checked
    // If fewer than num checked, enable them all
    for (i=0; i<iLen; i++) {
      box = boxes[i];
      box.disabled = box.checked? false : disable;
    }
}

// setTimeout is used so that if click comes from reset, the form is
// reset before listener runs
window.onload = function() {
  document.forms[0].onclick = function() {
    setTimeout(function(){toggleCheckboxes('fruits[]', 3)},10);
  }
}

</script>

<form>
  <input type="checkbox" name="fruits[]" value="apple">Apple<br>
  <input type="checkbox" name="fruits[]" value="orange">Orange<br>
  <input type="checkbox" name="fruits[]" value="pear">Pear<br>
  <input type="checkbox" name="fruits[]" value="cherry">Cherry<br>
  <input type="checkbox" name="fruits[]" value="plum">Plum<br>
  <input type="reset"><br>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:58:36.997

您在输入之前发出脚本，因此脚本找不到要绑定的任何内容。包装`<script>`in的内容`$(function () { ... });`或将脚本移动到输入元素的*下方。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:19:06.397

把你的脚本文件 readt 函数..

```
>     > $(document).ready(function() {
>     > $('input[id="fruits"]').click(function(event) { if (this.checked &&
>     > $('input:checked').length > 3) { event.preventDefault();
>     > alert('You\'re not allowed to choose more than 3 boxes'); } }); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T03:54:56.653

看看这个，它可能会工作;）

[限制复选框数量](https://stackoverflow.com/questions/2966382/limit-checkbox-amount)

# python - 访问时自动创建 OneToOneField

> ID：15514972
> 
> 赞同：1
> 
> 时间：2013-03-20T03:52:52.973
> 
> 标签：python, django, one-to-one, relation

我有两个模型：

```
class Profile(models.Model):
    # (...)
    settings = models.OneToOneField('Settings', null=True)
    # (...)

class Settings(model.Model):
    # (...) 
```

**有没有办法在访问Profile#settings**时创建**设置**实例？

 ****更新：**我想要这个的主要动机是我已经有了**Profile**模型，并且我希望在用户点击需要**Profile#setting实例的应用程序点时懒惰地创建****Setting**关系，而不关心它是否被创建或不。

 ****更新：** @miki725 在下面说这已经由 Django 处理。我尝试了以下方法：

```
class SettingsTest(TestCase):
    def setUp(self):
        user = User.objects.create(username='felipe', email='something@aol.com')
        self.profile = Profile.objects.create(short_name='Felipe', name='Felipe',
            user=user)

    def test_settings(self):
        self.assertIsNotNone(self.profile.settings) 
```

我明白了：

```
Creating test database for alias 'default'...
F
======================================================================
FAIL: test_settings (activity.tests.settings.SettingsTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/vagrant/activity/tests/settings.py", line 20, in test_settings
    self.assertIsNotNone(self.profile.settings)
AssertionError: unexpectedly None

----------------------------------------------------------------------
Ran 1 test in 0.003s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:04:38.217

这是由 Django 自动完成的！

```
>>> p = Profile.objects.get(...)
>>> isinstance(p.settings, Settings)
True 
```

**更新**

如果您得到 None，这意味着模型中的外键值`Profile`为 null，因为您允许 null 值`null=True`。在这种情况下，你真的不能做任何事情：

```
>>> p = Profile(settings=None, ...)
>>> p.save()
>>> p = Profile.objects.get(pk=p.pk)
>>> p.settings # the settings can't be anything because you never assigned them
None 
```

如果您需要这个进行测试，那么您必须为`Profile`实例分配一些设置值：

```
class SettingsTest(TestCase):
    def setUp(self):
        user = User.objects.create(username='felipe', email='something@aol.com')
        self.settings = Settings.objects.create(...)
        self.profile = Profile.objects.create(short_name='Felipe',
                                              name='Felipe',
                                              user=user,
                                              settings=self.settings) 
```

顺便说一句，从 Django 1.5 开始，您可以配置您的用户模型。在您必须创建一个必须与用户模型具有一对一键的配置文件模型之前。现在不再需要了。您可以将字段添加到用户模型。[您可以在 Django 1.5 发布文档 ( https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model](https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model) )中阅读更多相关信息。

**更新**

现在您的动机更加清晰，您可以使用这种骇人听闻的方法来实现这一目标。我认为这不是最好的方法，但它应该有效：

```
Profile(models.Model):
    def get_default_settings(self):
        settings = Settings.objects.create(...)
        self.settings_id = settings.pk
        return settings

    def __getattribute__(self, name):
        default = object.__getattribute__(self, name)
        if name == 'settings':
            if default is None:
                return self.get_default_settings()
            else:
                return default
        else:
            return default 
```****

# html - CSS中带有圆角的标签式结构

> ID：15514983
> 
> 赞同：1
> 
> 时间：2013-03-20T03:53:42.817
> 
> 标签：html, css

我有一个带圆角的 CSS 矩形。我想在它上面添加一个类似标签的结构。

这就是我所说的。 [http://i.imgur.com/J2h0Ncm.png](http://i.imgur.com/J2h0Ncm.png)

我尝试制作两个不同的元素并加上定位，但它看起来并不真实（主要是因为阴影）l。我们可以在单个元素上使用 CSS 吗？

提前致谢！

编辑（更多细节）：

我有一个带有圆角边框的矩形，如下所示：

```
#mybox
{
width: 800px;
height:400px;
border:thin;
border-radius: 10px;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;   
border-color:black;
box-shadow: 3px 3px 10px 5px #000;  
} 
```

我想调整/拉伸顶部看起来像[这样](http://i.imgur.com/J2h0Ncm.png)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:03:46.530

试试这个代码...

```
<div style="width: 93px; height: 72px;">
  <div style="width: 93px; height: 13px; background-image: url('tabtop.jpg'); background-repeat: no-repeat; background-attachment: scroll; background-position: left top"></div>
  <div style="width: 93px; height: 59px; background-image: url('tabbottom.jpg'); background-repeat: no-repeat; background-attachment: scroll; background-position: left top"></div>
</div> 
```

使用下面的图像...如果您将 div 调整为图像大小，您应该没问题并将它们用作背景属性意味着您可以在实际 div 中包含文本

![在此处输入图像描述](../Images/c66f56c5f10cbd7fa511a2a379c2facf.png)

![在此处输入图像描述](../Images/29fd844ce8d8ab6984f4789e79f0f120.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:57:48.947

为什么不使用一些预先打包的东西，比如具有选项卡功能的 bootstrap 或 jquery ui？我可以理解您是否想构建自己的东西，但也许您想要捷径？

引导程序：http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

jquery ui：http: [//jqueryui.com/](http://jqueryui.com/)

有许多这样的包可用于帮助您的 ui 开发，但这是两个常见的包

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T04:10:21.257

您可以使用 :before 选择器来创建您要的内容。

这是一个快速实现，可让您了解如何使用它：

```
<div class="foo"></div>

.foo {
    width: 200px;
    height: 100px;
    border: 4px solid #000;
    margin-top: 24px;
    position: relative;
    -webkit-border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
.foo:before {
    display: block;
    height: 20px;
    width: 30px;
    border: 4px solid #000;
    border-bottom-width: 0;
    content: " ";
    position: absolute;
    left: 0;
    top: -24px;
    background: #fff;
    -webkit-border-top-left-radius: 5px;
    -webkit-border-top-right-radius: 5px;
    -moz-border-radius-topleft: 5px;
    -moz-border-radius-topright: 5px;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
} 
```

# php - 如何在 PHP 的 GD 库中为文本添加发光或阴影？

> ID：15514985
> 
> 赞同：7
> 
> 时间：2013-03-20T03:53:47.840
> 
> 标签：php, gd

是否可以在 GD 中为文本添加发光或阴影？目前我正在使用 imagettftext 函数。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T03:53:47.840

我遇到了这个问题并创建了一个名为的新函数，我已在[https://github.com/andrewgjohnson/imagettftextblur](https://github.com/andrewgjohnson/imagettftextblur)`imagettftextblur`作为开源发布

添加阴影的方法如下：

```
imagettftextblur($image,$size,0,$x + 3,$y + 3,$shadow_color,$font,$string,1); // 1 can be higher to increase blurriness of the shadow
imagettftextblur($image,$size,0,$x,$y,$text_color,$font,$string); 
```

# c# - 子类绑定在运行时有效，但在设计器中无效

> ID：15514989
> 
> 赞同：0
> 
> 时间：2013-03-20T03:54:15.297
> 
> 标签：c#, wpf, xaml, windows-8, windows-phone-8

为了节省打字并使代码更具可读性，我对 Binding 类进行了子类化以使其使用特定的源：

```
public class MyBinding : Binding
{
    private void SetSource()
    {
        Source = Application.Current.Resources["Translator"];
    }

    public TBinding()
    {
        SetSource();
    }

    public TBinding(string path) : base(path)
    {
        SetSource();
    }
} 
```

所以不要写这个：

```
<TextBlock Text="{Binding Path='hello', Source={StaticResource Translator}}"/> 
```

我可以这样写：

```
<TextBlock Text="{local:MyBinding Path='hello'}"/> 
```

这在运行时完美运行，但设计器没有显示正确的文本。相反，它显示了 MyBinding 类的类型。

**有没有办法在 Visual Studio 设计器中完成这项工作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:47:17.210

是的，您可以在 XAML 中使用 d:DataContext 或 d:DesignData 来提取示例数据。[这里](http://markmacumber.net/2012/08/design-time-support-in-windows-8-c-xaml.html)有一篇文章对此进行了描述。

# graph-theory - 如何确定有向图是否具有消耗从某个节点开始的所有边的路径？

> ID：15514990
> 
> 赞同：2
> 
> 时间：2013-03-20T03:54:42.497
> 
> 标签：graph-theory

没有限制，您只能穿过每条边一次或每个顶点。

是否存在图的某些属性对于这样的路径的存在是必要和充分的（例如欧拉路径存在的节点度数），或者证明存在或不存在的某些已知算法（也许从起点找到通过所有边的最小路径）？

我考虑了几种可能性，其中最强的是将强连接的组件折叠成单个超节点，然后检查结果图是否只是一个覆盖所有边的“链表”式图（这很简单，只需从起始节点/超级节点总是从当前节点谈论一条边，计算出边（以及任何内部边，如果它是超级节点）被访问，当你到达叶节点时查看是否所有边都被计算在内）。在这个解决方案中，重要的是保留所有原始边，即使它们变得多余（例如，如果在将连接的组件 A、B、C 折叠到超节点 S 后，从 F 到 A、F 到 B、F 到 C 的边必须即使它们在简化图中指向同一个超节点 S，也都是守恒的）。抱歉，如果表达不正确，

有没有更简单的方法？或者一些更好的算法来处理循环/连接的组件？因为当图是非循环的时，它似乎很容易解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:05:22.670

如果图是强连接的，那么您可以从每个其他节点到达每个节点。由于您可以在此路径中重用边缘，因此您必须可以使用每条边缘。采取一些优势，*e*。*e*通向一个节点*v*，您随后可以从该节点到达每个其他顶点，因此可以到达所有其他边。从这些，你可以回到*v*。根据需要重复。

因此，要回答这个问题*，图是否有一些属性可以保证这样一条路径的存在……*如果图是强连接的，我会说是的。（请注意，尽管这样的路径不需要这样做 - 例如，在没有分支的单个单向路径的情况下）。但这似乎是唯一的边缘情况（我能想到的）。

强连接性测试可以通过蛮力检查所有方法轻松完成。我相信您也可以为此调整最大流量、最小切割算法。

# exception-handling - ServiceStack 新 API 中的错误处理

> ID：15514998
> 
> 赞同：4
> 
> 时间：2013-03-20T03:55:54.157
> 
> 标签：exception-handling, error-handling, servicestack

我有简单的服务堆栈 Web 服务，它以名称作为输入参数。从[这个线程](https://stackoverflow.com/questions/11750799/is-responsestatus-needed-in-servicestack)中，我了解到使用新 API 时不再需要 ResponseStatus 属性。但是，当我尝试使用 fiddler 编写没有名称的请求时，它按预期返回 400 响应代码，但不包含有关异常的任何信息。那么，新 API 是否提供了开箱即用的错误描述，尤其是对于非 .NET 客户端。如果没有，是否有可能提供此信息。

```
public object Any(CustomerRequest request)
{
   if (request.Name == null)
   {
     throw new ArgumentException("Name is required");
   }

   var objCustomer = //get customer from DB

   return objCustomer;
}

public class CustomerRequest
{
   public string Name {get;set;}
   public bool IsActive {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:41:31.017

您不需要使用新 API 添加 ResponseStaus。根据 penfold 的示例，您应该得到`{"ResponseStatus":{"ErrorCode":"ArgumentException","Message":"Name is required","Errors":[]}}`响应。

您的代码库中还有 CustomerResponse 类吗？如果是这样，请尝试将其注释掉或删除它。即使您`object`在发生异常时返回，ServiceStack 仍将查找传统命名的 Response 类型（请参见[此处](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/WebRequestUtils.cs#L77)）并尝试填充 ResponseStatus 属性。