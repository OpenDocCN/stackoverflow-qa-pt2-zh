# StackOverflow 问答 14822000-14822999

# javascript - 将服务器端 mvc 变量传递给 javascript

> ID：14822000
> 
> 赞同：9
> 
> 时间：2013-02-11T22:19:55.297
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4

我正在查看有关将服务器端变量从控制器操作传递到站点 html 标记并随后由站点上的 javascript 使用的最佳和最简单方法的反馈。

我正在使用 asp.net mvc4 并试图找到推荐的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-11T22:27:01.577

你有几个选择。

一种是将数据属性或 id 附加到元素并使用 javascript 获取它们。

使用剃刀视图：

```
<div id="someid" data-name="@item.attribute"></div> 
```

JS：

```
$('#someid').data('name') 
```

或者您可以将数据直接呈现到脚本标签中。

使用剃须刀：

```
 var somevar = "@item" 
```

您还可以 Json.Encode 更复杂的对象。

```
 var somevar = @Html.Raw(Json.Encode(object)) 
```

# asp.net - 是否可以在 asp.net 中验证控件但不需要它？

> ID：14822004
> 
> 赞同：1
> 
> 时间：2013-02-11T22:20:04.560
> 
> 标签：asp.net, regex, validation

是否可以验证它是电话号码但不需要它？现在的方式如果我不输入数字，它将引发错误。我在某处读到您可以更改正则表达式来执行此操作，我尝试将正则表达式包含在 (?:...?)

```
<asp:TextBox runat="server" ID="tbCompanyFax" Width="99%" Text='<%# Eval("CompanyFax")%>'></asp:TextBox>
<ajaxTK:MaskedEditExtender runat="server" ID="maskCompanyFax" AutoComplete="false" TargetControlID="tbCompanyFax" Mask="(999)999-9999" ClearMaskOnLostFocus="false" />
<asp:RegularExpressionValidator ID="regCompanyFax" runat="server" ControlToValidate="tbCompanyFax" ErrorMessage="Invalid Fax number" ValidationExpression="(?:((\(\d{3}\) ?)|(\d{3}-))?\d{3}-\d{4})?" Display="None"></asp:RegularExpressionValidator> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:35:36.357

您的问题来自提交的掩码。

您可以在 RegEx 中允许使用掩码。这将省去编写自定义验证器的麻烦。

试试这个正则表达式

```
(?:((\(\d{3}\) ?)|(\d{3}-))?\d{3}-\d{4})|(((\(\s{3}\) ?)|(\s{3}-))?\s{3}-\s{4}) 
```

应该使空掩码有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:27:04.007

我调整了@nunepascal 的 RegEx，它完全符合我的要求。再次感谢！

```
ValidationExpression="(?:(((\d{3}))|(\d{3}-))?\d{3}-\d{4})|((((_{3}))|(_{3}-‌​))?_{3}-_{4})" 
```

# php - 致命错误：在非对象上调用成员函数 query()

> ID：14822012
> 
> 赞同：2
> 
> 时间：2013-02-11T22:20:39.660
> 
> 标签：php, mysqli

我有这个错误：

致命错误：在第 8 行的 /Applications/XAMPP/xamppfiles/htdocs/login.php 中的非对象上调用成员函数 query()

这条线是这样的：

```
$res = $mysqli->query("SELECT * FROM user WHERE user='$user' and password='$pw'"); 
```

这是 login.php：

```
$user = $_POST['user'];
$pass = $_POST['pass'];
$pw = md5($pass); 
include_once('connect.php');

function check_login($user,$pw,&$result){
    $res = $mysqli->query("SELECT * FROM user WHERE user='$user' and password='$pw'");
    $cont = 0;
    while($row = $res->fetch_object()){
        $cont++;
        $result = $row;
    }
    if($cont == 1){
        return 1;
    }
    else{
        return 0;
    }
}

if(!isset($_SESSION['userid'])){
  if(isset($_POST['login'])){
    if(check_login($user,$pw,$result) == 1){
        session_start();
        $_SESSION['userid'] = $result->id_user;
        header("location:index.php?var=ok");
    }
    else{
        header('location:index.php?var=log');
    }
  }
} 
```

和 connect.php 的代码：

```
$mysqli = new mysqli('localhost', 'root', 'pass', 'cms' );
if ($mysqli->connect_error) {
   die('Error de Conexión (' . $mysqli->connect_errno . ') '
        . $mysqli->connect_error);
 } 
```

可能是什么问题呢？连接数据库有问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T22:27:06.490

这很可能是[范围界定](http://php.net/manual/en/language.variables.scope.php)问题。这意味着`$mysqli`您在包含文件中定义的变量超出了`check_login`函数的范围（即在此函数内部未知）。

您可以尝试`$mysqli`从全局范围获取变量

```
function check_login($user,$pw,&$result){
    global $mysqli;
    $res = $mysqli->query("SELECT * FROM user WHERE user='$user' and password='$pw'");
    // ... 
```

**编辑**：哦，您还应该注意代码中的 SQL 注入漏洞。使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)来防止这个问题（或者至少使用类似的函数转义输入变量[`mysqli::real_escape_string`](http://php.net/manual/en/mysqli.real-escape-string.php)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T22:26:04.900

```
function check_login($user,$pw,&$result){
    global $mysqli;
    $res = $mysqli->query("SELECT * FROM user WHERE user='$user' and password='$pw'");
    $cont = 0;
    while($row = $re[...] 
```

注意“全球”。这会将 var 置于您的方法的范围内。这是一个快速而肮脏的解决方案，但在这种情况下可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T22:23:36.803

看起来您的 $mysqli 变量在执行查询的代码范围内未正确设置。你能确认 $mysqli 确实是一个 mysqli 对象，而不是设置为 null 吗？

您可以通过以下方式检查：`echo print_r($mysqli);`就在您在代码中调用 ->query 方法之前。

如果未正确设置，请在代码中向后跟踪变量，直到您了解原因

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T22:26:40.887

函数 check_login 中的变量 $mysqli 超出范围（它在函数外部声明），因此它为空。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-24T07:54:14.750

```
public function connectDB($DBServer, $DBUser, $DBPass, $DBName) {
            global $con;
            $con = new mysqli($DBServer, $DBUser, $DBPass, $DBName) or die ("Error occured");
            return $con; 
```

然后传入`$con`您定义或在任何地方运行的所有函数。

# twitter-bootstrap - 淘汰赛 Twitter Bootstrap 弹出框绑定

> ID：14822018
> 
> 赞同：7
> 
> 时间：2013-02-11T22:21:12.383
> 
> 标签：twitter-bootstrap, knockout.js, popover, knockout-2.0

我正在尝试为引用模板的 twitter boostrap 弹出框创建自定义绑定，但是一旦创建弹出框内的内容的绑定部分，我遇到了问题。

我以前看过这个问题，但我觉得它们大多都很混乱，而且我非常接近一个可重用的解决方案，它可以按照我的意愿使用模板。

[http://jsfiddle.net/billpull/Edptd/](http://jsfiddle.net/billpull/Edptd/)

```
// Bind Twitter Popover
ko.bindingHandlers.popover = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var tmplId = ko.utils.unwrapObservable(valueAccessor());
        var tmplHtml = $('#' + tmplId).html();
        var uuid = guid();
        var domId = "ko-bs-popover-" + uuid;
        var tmplDom = $('<div/>', {
            "class" : "ko-popover",
            "id" : domId
        }).html(tmplHtml);

        options = {
            content: tmplDom[0].outerHTML
        };

        var popoverOptions = ko.utils.extend(ko.bindingHandlers.popover.options, options);

        console.log($(element));
        console.log(element);

        $(element).bind('click', function () {
            $(this).popover(popoverOptions).popover('toggle');
            ko.applyBindings(bindingContext, document.getElementById(domId));
        });
    },
    options: {
        placement: "right",
        title: "",
        html: true,
        content: "",
        trigger: "manual"
    }
}; 
```

===编辑

根据下面的答案更新了代码，允许您在没有额外的 withProperties 绑定的情况下执行此操作

```
// Bind Twitter Popover
ko.bindingHandlers.popover = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // read popover options 
        var popoverBindingValues = ko.utils.unwrapObservable(valueAccessor());

        // set popover template id
        var tmplId = popoverBindingValues.template;

        // set popover trigger
        var trigger = popoverBindingValues.trigger;

        // get template html
        var tmplHtml = $('#' + tmplId).html();

        // create unique identifier to bind to
        var uuid = guid();
        var domId = "ko-bs-popover-" + uuid;

        // create correct binding context
        var childBindingContext = bindingContext.createChildContext(viewModel);

        // create DOM object to use for popover content
        var tmplDom = $('<div/>', {
            "class" : "ko-popover",
            "id" : domId
        }).html(tmplHtml);

        // set content options
        options = {
            content: tmplDom[0].outerHTML
        };

        // Need to copy this, otherwise all the popups end up with the value of the last item
        var popoverOptions = $.extend({}, ko.bindingHandlers.popover.options);
        popoverOptions.content = options.content;

        // bind popover to element click
        $(element).bind(trigger, function () {
            $(this).popover(popoverOptions).popover('toggle');

            // if the popover is visible bind the view model to our dom ID
            if($('#' + domId).is(':visible')){
                ko.applyBindingsToDescendants(childBindingContext, $('#' + domId)[0]);
            }
        });

        return { controlsDescendantBindings: true };
    },
    options: {
        placement: "right",
        title: "",
        html: true,
        content: "",
        trigger: "manual"
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T16:26:01.887

您需要使用我的老朋友[自定义绑定](http://knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html)。

```
ko.bindingHandlers.withProperties = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // Make a modified binding context, with a extra properties, and apply it to descendant elements
        var newProperties = valueAccessor(),
            innerBindingContext = bindingContext.extend(newProperties);
        ko.applyBindingsToDescendants(innerBindingContext, element);

        // Also tell KO *not* to bind the descendants itself, otherwise they will be bound twice
        return { controlsDescendantBindings: true };
    }
}; 
```

然后，您需要在生成的 html 中添加一个 data-bind 属性：

```
 var tmplDom = $('<div/>', {
        "class": "ko-popover",
        "id": domId,
        "data-bind": "withProperties: { label: '" + viewModel.label() + "', required: '" + viewModel.required() + "' }" 
```

我已经整理了一个[jsFiddle 来](http://jsfiddle.net/Edptd/8/)展示这个。有几个陷阱，我必须为每个弹出框复制弹出框选项，否则它们都会以最后一组值结束。

```
 var popoverOptions = $.extend({}, ko.bindingHandlers.popover.options);
    popoverOptions.content = options.content; 
```

而且我还必须仅在弹出窗口可见*时才*对弹出窗口应用绑定，否则它似乎试图绑定到整个页面。

```
$(element).bind('click', function () {
            $(this).popover(popoverOptions).popover('toggle');
            // If you apply this when the popup isn't visible, I think that it tries to bind to thewhole pageand throws an error
            if($('#' + domId).is(':visible'))
            {
                ko.applyBindings(viewModel, $('#' + domId)[0]);
            }
        }); 
```

这似乎也是双向的，因为您可以更改弹出窗口中的值并更新非弹出元素，但我不会撒谎，我没想到会发生这种情况！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-22T17:43:59.187

这是 Knockout popover 绑定的另一个版本，它使用文档中定义的 html 模板。

看看这个小提琴：[https ://jsfiddle.net/2cpcgz3o/](https://jsfiddle.net/2cpcgz3o/)

```
(function () {
    var templateEngine = new ko.nativeTemplateEngine();

    ko.bindingHandlers.customPopover = {
        init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
            var placement = allBindings.get("placement") || "top",
                trigger = allBindings.get("trigger") || "click",
                templateName = allBindings.get("customPopover") || null,
                $element = $(element);

            $element.popover({ placement: placement, trigger: trigger, html: true, content: "&nbsp;" });

            $element.on("inserted.bs.popover", function () {
                var container = $element.next().find(".popover-content")[0];
                if (templateName) {
                    ko.renderTemplate(templateName, viewModel, { templateEngine: templateEngine }, container);
                }
                else {
                    container.innerHTML = $element.attr("data-content");
                }
            });

            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                $element.popover("destroy");
            });
        }
    };
})();

var model = {
  linkText: "Click me!",
  innerText: "Some fancy text"
};

ko.applyBindings(model);
```

```
<link href="https://cdn.jsdelivr.net/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>

<a data-bind="text: linkText, customPopover: 'popover-template', trigger: 'focus', placement: 'bottom'" tabindex="0" role="button"></a>

<script type="text/html" id="popover-template">
  <span data-bind="text: innerText"></span>
</script>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-06T16:14:47.963

我在这里调整了另一个答案：[https ://stackoverflow.com/a/16876013/1061602](https://stackoverflow.com/a/16876013/1061602)

这对我来说效果更好，尤其是对于一个简单的弹出框。

```
ko.bindingHandlers.popover = {
    init: function (element, valueAccessor) {
        var local = ko.utils.unwrapObservable(valueAccessor()),
            options = {};

        ko.utils.extend(options, ko.bindingHandlers.popover.options);
        ko.utils.extend(options, local);

        $(element).popover(options);

        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            $(element).popover("destroy");
        });
    },
    options: {
        placement: "top"
    }
}; 
```

那么绑定是：

```
<span data-bind="popover: { content: mySimpleTextContent }"></span> 
```

您显然可以覆盖其他选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-12T12:18:16.333

稍微修改[了 dodbrian](https://stackoverflow.com/questions/14822018/knockout-twitter-bootstrap-popover-binding/42959062#42959062)的例子。内容绑定到一个可观察对象。

[https://jsfiddle.net/SergeyZhilyakov/0zxamcj6/14/](https://jsfiddle.net/SergeyZhilyakov/0zxamcj6/14/)

```
var model = {
  linkText: "Hover me!",
  innerText: ko.observable("Please, wait...")
};

ko.bindingHandlers.popover = {
  init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
    var $element = $(element);
    var placement = allBindings.get("placement") || "top";
    var trigger = allBindings.get("trigger") || "hover";
    var content = allBindings.get("popover");

    $element.popover({
      placement: placement,
      trigger: trigger,
      content: content()
    });

    var popover = $element.data("bs.popover");
    content.subscribe(function(newValue) {
      popover.options.content = newValue;
      popover.setContent();
      popover.$tip.addClass(popover.options.placement);
    });

    ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
      $element.popover("destroy");
    });
  }
};

ko.applyBindings(model);

setTimeout(function() {
  model.innerText("Done!");
}, 3000);
```

```
body {
  padding: 20px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>

<button type="button" class="btn btn-default" data-bind="text: linkText, popover: innerText, placement: 'bottom'">Comment</button>
```

# javascript - 将 Javascript/Ajax 数据传递给表单

> ID：14822019
> 
> 赞同：0
> 
> 时间：2013-02-11T22:21:15.037
> 
> 标签：javascript, jquery, ajax

我使用 jquery 计算价格：

```
$('.label_1').click(function(){

    var total = 0;

    $('.option_1:checked').each(function(){

        total +=  parseInt($(this).val());
        });

        $('#total').html('€ ' + total);

    }); 
```

价格显示在 DIV 中：

```
<div id="total"></div> 
```

现在我需要将结果传递给 HTML 表单字段以提交和使用它。

请任何提示如何做到这一点？

谢谢你尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:27:32.933

这是一个小代码片段

```
<input type="text" id="tot">
<script>

$('.label_1').click(function(){

    var total = 0;

    $('.option_1:checked').each(function(){

        total +=  parseInt($(this).val());
        // in this secction send the total to the txt field
        $("#tot").val($total);
        });

        $('#total').html('€ ' + total);

    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:32:39.903

你应该有一个隐藏的输入字段。所以你能做的就是这个。

因为您试图获取的值在 div 内

```
!-- Hardcoded Value Example only -->
<div id="total">12</div> 
```

在您的 javascript 上，您可以添加它。

```
$(function(){
   $('.label_1').click(function(){

    var total = 0;

    $('.option_1:checked').each(function(){

        total +=  parseInt($(this).val());
        });

        $('#total').html('€ ' + total);

    });

     $('#myHiddenInputField').val($('#total').html());

}) 
```

一旦您设置了值，`#myHiddenInputField`您现在可以通过编程方式提交表单，或者只需单击表单上的提交按钮（如果表单可见）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:23:14.603

您应该将输入字段的[val()](http://api.jquery.com/val/)设置为总计。

```
$("#theInputFieldThatShouldHaveTotalInIt").val(total); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T22:23:52.440

要执行此类操作，应使用 HIDDEN 输入。 [http://www.w3schools.com/jsref/dom_obj_hidden.asp](http://www.w3schools.com/jsref/dom_obj_hidden.asp)

# drupal - 使用 theme_item_list 添加类属性

> ID：14822023
> 
> 赞同：0
> 
> 时间：2013-02-11T22:21:23.530
> 
> 标签：drupal

我正在尝试在 hook_block_view 函数中创建一个带有 theme_item_list 的列表。

```
$items = array();
$items[] = array('data' => l('Training', 'training'));
$items[] = array('data' => l('Publications', 'publications'));
$items[] = array('data' => l('Conferences', 'conferences'));
$items[] = array('data' => l('Information service', 'information-service'));
$block['content'] = theme('item_list', array('items' => $items), NULL, 'ul', array('id' => 'contact-us')); 
```

我希望输出为：

```
<ul id='contact-us'>
    <li><a href='/training>Training</a></li>
    ... 
```

但是返回输出时缺少该类：

```
<ul>
    <li><a href='/training>Training</a></li>
    ... 
```

我想我已经准确地遵循了 drupal.org 上的示例，但它不起作用？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:00:40.143

**解决方案：**

我收到的评论让我相信 Drupal 7 中的功能与以前版本中的功能不同。看来我正在查看版本 6 的示例。这适用于 7：

```
array(
  'list' => array(
    '#theme' => 'item_list',
    '#type' => 'ul',
    '#attributes' => array('id' => 'contact-us'),
    '#items' => array(                  
      'item_1' => l('Training', 'training'),
      'item_2' => l('Publications', 'publications'),
      'item_3' => l('Conferences', 'conferences'),
      'item_4' => l('Information service', 'information-service')
    ),
  ),
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T11:18:03.153

这将适用于drupal 6

`$block['content'] = theme_item_list($items , $title = NULL, $type = 'ul', $attributes = array('id' => 'contact-us') ) ;`

请注意，您可以将任何有效属性添加到 $attributes 数组（）。

drupal 6上的工作示例：

`$block['content'] = theme_item_list($items , $title = NULL, $type = 'ul', $attributes = Array( 'id' => 'contact-us', 'class' => 'some-class', 'style' => 'color:red')) ;`

文档：[https ://api.drupal.org/api/drupal/includes!theme.inc/function/theme_item_list/6](https://api.drupal.org/api/drupal/includes!theme.inc/function/theme_item_list/6)

# javascript - 正则表达式函数 4 个字母和 4 个数字？

> ID：14822024
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:21:28.830
> 
> 标签：javascript, jquery

我不明白正则表达式是如何工作的，所以这对很多人来说可能是一个简单的问题，但对我来说，一个人可以用简单的话解释我如何使用它是非常重要的。

我需要在 jquery 中验证添加一个新功能

```
$.validator.addMethod("loginRegex",function(a,b){return this.optional(b)||/^[a-zA-Z\d]+$/.test(a)},"Solo se aceptan letras o numeros"); 
```

这个函数只接受字母和数字，但如果你把 FH374HD3 验证返回给我 true，但我需要按该顺序有效 4 个字母和 4 个数字，例如：“ABCD4578”，只有字母和数字，但前 4 个字母和 4 个数字在末尾。

这可能吗？？？全部！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T22:23:44.550

这将匹配一个长度正好为 8 个字符的字符串，该字符串以四个字母开头，后跟四个数字：

```
/^[a-z]{4}\d{4}$/i 
```

这也可以写成：

```
/^[A-Za-z]{4}\d{4}$/ 
```

不区分大小写在内联。

*   `^`匹配字符串的开头
*   `[a-z]`匹配从小写到小写的`a`字母`z`
*   `{4}`匹配上一个选择 4 次（`[a-z][a-z][a-z][a-z]`但字符更少）
*   `\d`匹配数字（相当于`[0-9]`）
*   `{4}`同上（`\d\d\d\d`但字符更少）
*   `$`匹配字符串的结尾
*   `i`是不区分大小写的标志，因此也`[a-z]`匹配大写字母。

还应该注意的是，这不会匹配 é 或 à 等特殊字符，因为它们不在范围内`[a-z]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:25:53.123

您可以使用以下方法验证 4 个大写字母和 4 个数字：

```
^[A-Z]{4}\d{4}$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T22:38:37.343

正如已经发布的那样试试这个：^[a-zA-Z]{4}[0-9]{4}

完全匹配 4 个字母（也包括大写字母）和 4 个数字

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T22:24:32.850

你的意思是你想要一个只验证4个字母然后依次验证4个数字的正则表达式吗？

也许是这样的：

```
/^[A-Za-z]{4}\d{4}$/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T22:26:25.467

分隔表达式。

```
^[a-zA-Z]{4}[\d]{4}$ 
```

[你可以在像这样](http://regexpal.com/)的网站上测试它，这样你就可以使用正则表达式（并花一些时间）......

# ruby-on-rails-3 - Rails 中的时间方法

> ID：14822033
> 
> 赞同：0
> 
> 时间：2013-02-11T22:22:07.687
> 
> 标签：ruby-on-rails-3

我在[http://api.rubyonrails.org/rails](http://api.rubyonrails.org/)`3.2.12`中看到该类有`Time`一组方法，例如：

```
beginning_of_day,
beginning_of_hour,
beginning_of_month,
beginning_of_quarter,
beginning_of_week,
beginning_of_year 
```

当我`t = Time.beginning_of_hour`在 rails 控制台中尝试类似的操作时，我得到一个未定义的方法错误。

我该如何试验这些方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:25:55.497

它是`Date.today`。有`Time.now`如果你想使用它。

# javascript - 如何使 div 正确显示 onClick？

> ID：14822043
> 
> 赞同：0
> 
> 时间：2013-02-11T22:23:01.620
> 
> 标签：javascript, css, html

我正在用简单的 JavaScript 制作一个网站。当点击不同的链接时，它应该显示不同的对象。它会这样做，但它会显示应该隐藏在菜单区域中的其他对象，并且您必须单击一大堆链接才能使其消失，然后页面才能正常工作。

这是代码。

```
<!DOCTYPE html> <html lang="en">
<head>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' /> 
<title>Crap</title>
<body>
<script>
var current_obj='';
function showLinks(objID) {
var obj=document.getElementById(objID); if (current_obj.style) {
current_obj.style.display='none'; }
obj.style.display='block';
current_obj=obj; }
</script>
<style>
.showhide_element {
display: none; }
html {
background-image:url('dash2.jpg');
background-repeat:no-repeat;
background-size:100% 100%;
height: 100%;
 }
#menu {
position:fixed;
width:100%;
bottom:0;
text-align:center;
background:none; 
}
.contentMenu {
display:inline-block;
text-align:center;
padding-top:10px;
padding-bottom:30px;
padding-right:100px;
list-style:none;
text-decoration:none; }
.contentMenu li {
display:inline-block; 
}
.contentMenu li a {
padding:50px; 
}
#contentMenu_info {
padding: 50px 50px;
margin-left:auto;
margin-right:auto;
margin-top:110px;
color:#ffff00;
text-align:center;
display:block;
background-image:url('image.png');
background-size:100% 100%;
width:400px;
height:200px;
}

#contentMenu_media {
padding: 50px 50px;
margin-left:auto;
margin-right:auto;
margin-top:110px;
color:#ffff00;
text-align:center;
display:block;
background-image:url('image2.png');
background-size:100% 100%;
width:500px;
height:300px; 
}
#contentMenu_contact {
padding: 50px 50px;
margin-left:auto;
margin-right:auto;
margin-top:110px;
color:#ffff00;
text-align:center;
display:block;
background-image:url('image3.png');
background-size:100% 100%;
width:500px;
height:300px; 
}
</style>
<div id="menu">
<ul class="contentMenu">

<li><a href="#" class="contentMenu" onClick="showLinks('contentMenu_info');return false;">Info</a></li>
<li><a href="#" class="contentMenu" onClick="showLinks('contentMenu_media');return false;">Media</a></li>
<li><a href="#" class="contentMenu" onClick="showLinks('contentMenu_contact');return false;">Contact</a></li>
</ul>
</div>
<div id="contentMenu_info" class="showhide_element">

<p>Pellentesque habitant morbi tristique senectus et netus et malesuada. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.
Quisque sit amet est et sapien ullamcorper pharetra.
Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis.
Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>

</div>
<div id="contentMenu_media" class="showhide_element">
Media stuff

</div>
<div id="contentMenu_contact" class="showhide_element"> Contact information
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:44:10.327

您可以更改这些 CSS 规则

```
#contentMenu_contact {
    display: none;
}
#contentMenu_media {
    display: none;
} 
```

**[编辑]**当页面加载时，您应该使用**实际**
是 current_obj 的对象， 而不是最初隐藏的**空current_obj，并且这个 obj 是****contentMenu_info**。

 ****```
<script>
var current_obj = document.getElementById("contentMenu_info");
function showLinks(objID) {
    var obj=document.getElementById(objID); 
    if (current_obj.style) {
        current_obj.style.display='none'; 
    }
    obj.style.display='block';
    current_obj=obj; 
}
</script> 
```

您必须将此脚本放在正文标记的末尾或使用[`window.onload`](https://developer.mozilla.org/en-US/docs/DOM/window.onload)****

# java - Java 自动装箱 ValueOf(String)

> ID：14822044
> 
> 赞同：2
> 
> 时间：2013-02-11T22:23:02.640
> 
> 标签：java, string, int, boxing, value-of

您如何看待以下代码行？：

```
 String s= "10.0";
  float f = Float.valueOf(s).floatValue();//1 
```

有必要吗？为什么使用这样的语法而不是使用：

```
float f = Float.valueOf(s);//2 
```

利用自动装箱功能，它仍然给出相同的结果。

简而言之，我的问题是：为什么要选择第一种语法而不是第二种语法？它们完全一样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:25:37.013

> 简而言之，我的问题是：为什么要选择第一种语法而不是第二种语法？它们完全一样吗？

好吧，我不会使用它们，因为它们都会生成中间`Float`对象，这几乎总是不需要的。无论在哪里需要它，我们都会让它与拳击一起工作。

现在，您应该只使用[`Float.parseFloat(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#parseFloat%28java.lang.String%29)生成原始浮点数的方法。

* * *

就相似性而言，**不，它们并不**完全相同。第二个涉及`auto-unboxing`from `Float`to `float`，而`unboxing`第一种情况没有。它使用给定的方法进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:25:18.760

不同之处在于第一个显式转换为浮点数，
而第二个让它出箱。

在 Java 1.3 上，自动装箱不可用！

此外，在某些情况下，自动装箱会产生不需要的结果。
对于自动装箱失败的情况：请参阅

> Josh Bloch：有效的 Java 第二版

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:26:10.920

> f = Float.valueOf(s);

自动装箱功能是在 Java 5 之后引入的。这段代码在 Java 的早期版本中编译时会出错。

# mysql - 优化我的 MySQL 查询

> ID：14822047
> 
> 赞同：0
> 
> 时间：2013-02-11T22:23:08.020
> 
> 标签：mysql, sql, query-optimization

我正在创建一个论坛，需要一些反馈。我已经编程了很长时间，但是我对 MySQL 相当了解，并且想知道我是否正确地执行了此操作。

这是我用来输出选定论坛的主题索引的查询。我试图在一个查询中收集所有信息，而不是只收集主题信息，然后在每个循环中收集一次帖子和成员信息，总共有 35 个单独的查询（*每个主题一个*）。明白了吗？

基本上，它有效。即使只有 300-400 个主题，它也有点慢（*大约 1 秒）。*

我使用了分析，并收集到最耗时的操作是：复制到 tmp 表：0.538037 发送数据：0.206218 复制到组表：0.137549

编辑：每次有人进入页面时查询将运行一次（根据站点活动判断，每小时大约 200-300 次）。我打算一次检索大约 4000-5000 行。

我的问题是：这是最好的方法吗？我可以做些什么来优化这个查询吗？或者在循环中执行大量较小的查询会更好吗？

```
$user_id: id of the user
$forum_id: id of the selected forum

SELECT
  # Topic records
  `topics`.*,

  # First Post
  GROUP_CONCAT(`posts`.`id`) AS `post_id`, # All post ids
  `posts`.`post`    AS `post_first_msg`,
  `posts`.`date`    AS `post_first_date`,
  `posts`.`member`  AS `post_first_member`,

  # First member
  `members`.`id` AS `member_id`,
  `members`.`username` AS member_username,

  # Returns last 3 members' id
  SUBSTRING_INDEX(
    GROUP_CONCAT(`members`.`id` ORDER BY `posts`.`date` DESC SEPARATOR '\\\\'), '\\\\', 3
  ) AS member_last_id,

  # Returns last 3 members' username
  SUBSTRING_INDEX(
    GROUP_CONCAT(`members`.`username` ORDER BY `posts`.`date` DESC SEPARATOR '\\\\'), '\\\\', 3
  ) AS member_last_username,

  # Get last viewed topic id
  `member_topic_lastview`.`lastview` AS `lastview`

FROM
  `topics`

# Returns the `posts` table in ASC order
JOIN (
  SELECT *
  FROM `posts`
  ORDER BY `posts`.`date` ASC
) AS `posts` ON `posts`.`topic` = `topics`.`id`

# Member table, only the columns needed
JOIN (
  SELECT
    `members`.`id`,
    `members`.`username`
FROM `members`
) AS `members` ON `members`.`id` = `posts`.`member`

# Forum table, containing the forum info
LEFT JOIN `forum` ON `forum`.`id` = `topics`.`forum`

# Table containing the latest viewed post id of each topic
LEFT JOIN (
  SELECT *
  FROM `member_topic_lastview`
    WHERE `member_topic_lastview`.`member` = '$user_id'
) AS `member_topic_lastview` ON `member_topic_lastview`.`topic` = `topics`.`id`

WHERE
  `forum` > $forum_id

GROUP BY
  `topics`.`id`

ORDER BY
  `topics`.`sticky` DESC,
  MAX(`posts`.`date`) DESC

LIMIT 35 
```

**非常感谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:26:29.673

首先要做的是查看您的解释计划并将其发布。另一件突出的事情是你真的不想做很多子查询。

只是作为一个开始，看看你的第一次加入

```
FROM
  `topics`

# Returns the `posts` table in ASC order
JOIN (
  SELECT *
  FROM `posts`
  ORDER BY `posts`.`date` ASC
) AS `posts` ON `posts`.`topic` = `topics`.`id` 
```

如果您像这样编写它，这可能会快得多：

```
FROM
  `topics`

# Returns the `posts` table in ASC order
JOIN `posts` ON `posts`.`topic` = `topics`.`id` 
```

# javascript - 客户端 JS 中的竞争条件 b/w 直接代码和 jquery 处理程序问题

> ID：14822056
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:23:29.060
> 
> 标签：javascript, jquery

此代码是否有效/正确

```
var items = $(".items");    // when would items be properly populated, at dom.ready()??
var itemsHrefs = []; // direct JS code

prepareItemsList();  **// direct JS code**

**// could be the case that items array is not populated yet ???**
function prepareItemsList() {
  for ( var i = 0; i < items.length; i++ ) {
    var plElement = items.eq(i);
    itemsHrefs.push (plElement.attr('href'));
  }
} 
```

问题：

1.  什么时候可以正确创建 items 变量。我假设 dom.ready()??
2.  我应该在 document.ready 处理程序中执行 prepareItemsList() 是正确的吗？

注意：当我尝试执行上述 2\. 时，我遇到了不同的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:27:49.003

您需要将与 DOM 一起使用的代码放在`$(document).ready()`回调中。如果您在 DOM 准备好之前尝试使用它，您的代码将无法正常工作（或根本无法工作）。

在回调中只保留一部分代码有时会让人感到困惑，所以我通常只是将所有与 jQuery 相关的内容都包含在其中：

```
$(document).ready(function() {
    var items_hrefs = $('.items').map(function() {
        return this.href;
    }).get();
}); 
```

# blackberry-webworks - 我需要单独的 author.p12、barsigner.csk、barsigner.db 来为设备签名 BB10 应用程序吗？

> ID：14822057
> 
> 赞同：0
> 
> 时间：2013-02-11T22:23:29.933
> 
> 标签：blackberry-webworks, blackberry-10

我有去年的旧 BB 签名文件。我需要为 BB10 更新这些吗？我无法让我的应用程序签名。我不断收到无效密码，但如果我删除这些密码，它会要求返回 author.p12。我知道我的密码。让我知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:54:14.577

您必须要求新密钥：[https ://www.blackberry.com/SignedKeys/](https://www.blackberry.com/SignedKeys/)

# php - PHP/MYSQL：按列填充表

> ID：14822059
> 
> 赞同：1
> 
> 时间：2013-02-11T22:23:31.580
> 
> 标签：php, mysql, database

我的代码目前是这样的：

```
if (isset($_POST['viewstudentdrop'])) {
    $query = "SELECT students.*, lessons.lessonname 
            FROM lessons INNER JOIN 
            (assignments INNER JOIN students 
            ON assignments.studentid = students.id) 
            ON lessons.lessonid = assignments.lesson
            WHERE (((students.id)=".$_POST['viewstudentdrop']."))";
    $results = $pdodl->query($query);
    while ($row = $results->fetch()) {
            echo "<p>Lesson: ". $row['lessonname'] . "</p>";
    }
   // View Completed Lessons and Times
    $query = "SELECT * 
            FROM studentresponse 
            WHERE studentid = ".$_POST['viewstudentdrop']." 
            ORDER BY lessonsession";
    $results = $pdodl->query($query);
    echo '<table> ';
    while ($row = $results->fetch()) {
    echo '<tr> <td> ' . $row['actiontime'] .'</td>' .
                     ' <td> ' . $row['page'] .'</td>' .
                     ' <td> ' . $row['response'] . '</td>'.
                     ' <td> '. $row['lessonsession'] . '<td> </tr>';
    }
    echo  '</table>';  
} 
```

它会产生如下输出：

```
19:40:44     sda02   C   11360611641    
19:40:46     sda03   D   11360611641    
19:40:50     sda04   3   11360611641    
19:40:53     sda05   A   11360611641    
19:41:22     sda02   B   11360611678    
19:41:24     sda03   C   11360611678    
19:41:31     sda04   5   11360611678    
19:41:34     sda05   B   11360611678    
20:00:39     sda02   B   11360612836    
20:00:41     sda03   C   11360612836    
20:00:44     sda04   3   11360612836    
20:00:47     sda05   B   11360612836 
```

我可以将上面格式化的数据直接从数据库输出到表中，但我想将其输出为表，例如（被课程会话打破）：

```
sda02     sda03     sda04     sda05
19:40:44  19:40:46  19:40:50  19:40:53
C         D         3         A

sda02     sda03     sda04     sda05
19:41:22  19:41:24  19:41:31  19:41:34
B         C         5         B 
```

.... 等下一节课组。

之前可能一直很困惑。希望这有助于澄清我的问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:53:32.133

这是在 SQL 中执行此操作的一种非常丑陋的方法。

这个答案实现了用户定义的变量来为每一行生成一个行号，然后用于将数据*取消透视*到列中。最后，使用带有`CASE`表达式的聚合函数将数据旋转回列。

```
select col,
  lessonsession,
  max(case when rn = 1 then value end) Col1,
  max(case when rn = 2 then value end) Col2,
  max(case when rn = 3 then value end) Col3,
  max(case when rn = 4 then value end) Col4
from
(
  select 'actiontime' col, actiontime value, lessonsession, rn
  from 
  (
    select actiontime,
      page, 
      response, 
      lessonsession,
      @row:=case when @prev=lessonsession then @row else 0 end +1 rn,
      @prev:=lessonsession
    from yourtable
    cross join (select @row:=0, @prev:=null) r
    order by lessonsession
  ) s
  union all
  select 'page' col, page value, lessonsession, rn
  from
  (
    select actiontime,
      page, 
      response, 
      lessonsession,
      @row:=case when @prev=lessonsession then @row else 0 end +1 rn,
      @prev:=lessonsession
    from yourtable
    cross join (select @row:=0, @prev:=null) r
    order by lessonsession
  ) s
  union all
  select 'response' col, response value, lessonsession, rn
  from 
  (
    select actiontime,
      page, 
      response, 
      lessonsession,
      @row:=case when @prev=lessonsession then @row else 0 end +1 rn,
      @prev:=lessonsession
    from yourtable
    cross join (select @row:=0, @prev:=null) r
    order by lessonsession
  ) s
) src
group by col, lessonsession
order by lessonsession, col 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/6f840/11)。

这给出了结果：

```
|        COL | LESSONSESSION |     COL1 |     COL2 |     COL3 |     COL4 |
--------------------------------------------------------------------------
| actiontime |   11360611641 | 19:40:44 | 19:40:46 | 19:40:50 | 19:40:53 |
|       page |   11360611641 |    sda02 |    sda03 |    sda04 |    sda05 |
|   response |   11360611641 |        C |        D |        3 |        A |
| actiontime |   11360611678 | 19:41:34 | 19:41:31 | 19:41:24 | 19:41:22 |
|       page |   11360611678 |    sda05 |    sda04 |    sda03 |    sda02 |
|   response |   11360611678 |        B |        5 |        C |        B |
| actiontime |   11360612836 | 20:00:39 | 20:00:41 | 20:00:44 | 20:00:47 |
|       page |   11360612836 |    sda02 |    sda03 |    sda04 |    sda05 |
|   response |   11360612836 |        B |        C |        3 |        B | 
```

您可以做的一件事是在应用行号后使用临时表记录记录。将以下内容插入临时表中，可以使代码更短而不会重复：

```
select actiontime,
  page, 
  response, 
  lessonsession,
  @row:=case when @prev=lessonsession then @row else 0 end +1 rn,
  @prev:=lessonsession
from yourtable
cross join (select @row:=0, @prev:=null) r
order by lessonsession 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:51:53.327

好的......我已经设法混淆了我最初使用数组来重新组织页面上的数据的想法。

这是代码（从第二个查询中提取）：

```
 $query = "SELECT * 
            FROM studentresponse 
            WHERE studentid = ".$_POST['viewstudentdrop']." 
            ORDER BY lessonsession";
    $results = $pdodl->query($query);
    while ($row = $results->fetch()) { 
        $iteration[] = array ($row['page'], $row['actiontime'], $row['response'], $row['lessonsession']);
        }
    //Rewrite the data using the array into the format I want
    $x=0; $y=0;
    echo '<table>';
    while (isset($iteration[$x][$y]))  {
        echo '<tr>';        
        while (isset($iteration[$x][$y])) {
            echo '<td>' . $iteration[$x][$y] . '</td>';
            $x++;
        }
        echo '</tr>';
        $x = 0;
        $y++;
}
    echo '</table>'; 
```

这会产生以下结果： ![在此处输入图像描述](../Images/8210497a583f1af2002ffe4df7746d90.png) 现在，我所要做的就是为“课程”中的每次更改打破表格。

（我现在真的感觉自己像个程序员——我想用分号结束句子。）

# api - Hadoop 版本和新 API

> ID：14822069
> 
> 赞同：2
> 
> 时间：2013-02-11T22:23:59.847
> 
> 标签：api, hadoop, mapreduce, hadoop-yarn

我对 Hadoop 版本和新 API 感到非常困惑。我在 Hadoop 0.20.203 上有一个项目，我认为是时候升级它了。我希望使用具有 YARN 的版本，即 0.23 或 2.0.2。由于根据 Hadoop 站点的 2.0.2 就像 0.23 但更好，我已经导入了 2.0.2 版本。新的 api 应该在 org.apache.hadoop.mapreduce 中而不是在 org.apache.hadoop.mapred 中，而且我已经从我的 0.20 版本中获得了这个包，所以我不需要更改任何东西。Job 类的所有构造函数都已弃用，那么我应该如何使用这个类？当我运行我的项目时，我也会收到很多弃用警告，其中提到了 mapred 包。

我编辑了我的问题以包含我在输出中已弃用的内容

```
13/02/12 00:52:57 WARN conf.Configuration: mapred.jar is deprecated. Instead, use mapreduce.job.jar
13/02/12 00:52:57 WARN conf.Configuration: mapred.cache.files is deprecated. Instead,   use mapreduce.job.cache.files
13/02/12 00:52:57 WARN conf.Configuration: mapred.reduce.tasks is deprecated. Instead, use mapreduce.job.reduces
13/02/12 00:52:57 WARN conf.Configuration: mapred.output.value.class is deprecated. Instead, use mapreduce.job.output.value.class
13/02/12 00:52:57 WARN conf.Configuration: mapred.mapoutput.value.class is deprecated. Instead, use mapreduce.map.output.value.class
13/02/12 00:52:57 WARN conf.Configuration: mapreduce.map.class is deprecated. Instead, use mapreduce.job.map.class
13/02/12 00:52:57 WARN conf.Configuration: mapred.job.name is deprecated. Instead, use mapreduce.job.name
13/02/12 00:52:57 WARN conf.Configuration: mapreduce.reduce.class is deprecated. Instead, use mapreduce.job.reduce.class
13/02/12 00:52:57 WARN conf.Configuration: mapred.input.dir is deprecated. Instead, use mapreduce.input.fileinputformat.inputdir
13/02/12 00:52:57 WARN conf.Configuration: mapred.output.dir is deprecated. Instead, use mapreduce.output.fileoutputformat.outputdir
13/02/12 00:52:57 WARN conf.Configuration: mapred.max.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.maxsize
13/02/12 00:52:57 WARN conf.Configuration: mapred.map.tasks is deprecated. Instead, use mapreduce.job.maps
13/02/12 00:52:57 WARN conf.Configuration: mapred.cache.files.timestamps is deprecated. Instead, use mapreduce.job.cache.files.timestamps
13/02/12 00:52:57 WARN conf.Configuration: mapred.output.key.class is deprecated. Instead, use mapreduce.job.output.key.class
13/02/12 00:52:57 WARN conf.Configuration: mapred.mapoutput.key.class is deprecated. Instead, use mapreduce.map.output.key.class
13/02/12 00:52:57 WARN conf.Configuration: mapred.working.dir is deprecated. Instead, use mapreduce.job.working.dir 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T17:02:57.803

在 20.2xx/1.x 和 0.21/0.22/0.23/2.x 之间，mapreduce 框架发生了两个主要变化。

*   重命名了几个配置名称，以更好地反映什么是服务器端配置属性以及什么是客户端配置属性。
    *   客户端配置：旧名称已弃用，这就是您看到这些警告的原因。
    *   您提到了 2.0.2，所以我想您正在使用新的框架 YARN。在这种情况下，旧的服务器端配置都不会生效。
*   mapreduce API 有两种风格 - 旧 API (org.apache.hadoop.mapred) 和新 API (org.apache.hadoop.mapreduce)。它的历史有点长，但当前（以及未来）状态是新旧 API 都受支持。
    *   旧 API 仍然很稳定，并且在所有版本中都以二进制兼容的方式支持。
    *   新 API 在版本之间存在一些兼容性问题 (1.x -> 2.x)。

您可以在此处阅读有关 Hadoop 2 中 API 兼容性的更多信息：http: [//hortonworks.com/blog/running-existing-applications-on-hadoop-2-yarn/](http://hortonworks.com/blog/running-existing-applications-on-hadoop-2-yarn/)

# c# - 如何使用 C# 设置活动（即前台）Word 文档

> ID：14822070
> 
> 赞同：2
> 
> 时间：2013-02-11T22:24:01.377
> 
> 标签：c#, ms-word

我已经看过但未能找到解决我的问题的方法。我为 Word 2007 开发了一个插件功能区，它提供了一组额外的加载和保存功能，允许用户从定制系统加载和保存文档。

我的大部分工作都在工作——当用户请求打开一个文件时，它会被下载并保存到 AppData 文件夹中，然后再打开。但是，我遇到的问题是，例如，如果用户打开 Word 并使用这个新的“加载”功能，空白的 Word 文档仍然存在，Word 很高兴地打开了新文档，但它没有获得焦点。

（我在 Windows 7 上，它在新文档的任务栏中创建了第二个“W”图标，但它不会像我使用普通的“打开”时那样切换到它路线。）

我已经尝试过（由于在此处其他地方找到的建议）将“可见”属性设置为 true，然后调用，`doc.Activate()`但我也不需要。我错过了什么？我用来打开文件的代码如下：

```
private void OK_Click(object sender, EventArgs e)
{
    this.Close();
    FES.FESServices wService = new FES.FESServices();
    int request_id = wService.SubmitRequestFromAddIn(username, password, "RETR", "", textBox1.Text, "", "");
    FES.FileRequestResponse response = wService.GetFileMembersFromAddIn(username, password, request_id);
    if (response.ResponseType == "RETR")
    {
        byte[] data = wService.GetBytesForFilename(response.ResponseValue);
        //MessageBox.Show("Loaded data for file...");
        //MessageBox.Show(Application.UserAppDataPath);
        FileStream fs = new FileStream(Application.UserAppDataPath + "\\" + response.ResponseValue.Substring(6).Split('~')[0], FileMode.Create, FileAccess.Write);
        fs.Write(data, 0, (int)data.Length);
        fs.Close();
        object oMissing = System.Reflection.Missing.Value;

        Microsoft.Office.Interop.Word.Document doc = Globals.ThisAddIn.Application.Documents.Open(
            Application.UserAppDataPath + "\\" + response.ResponseValue.Substring(6).Split('~')[0], Visible:true
        );
        doc.Activate();
    }
} 
```

（我已经将`this.Close()`加载文档的功能包含在一个模式对话框中，并且在没有先关闭它的情况下，Word 会抛出一个关于在打开对话框的情况下切换文档的异常）。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:31:43.953

在显示模式对话框时运行此代码会干扰窗口激活。

我不确定这种干扰的确切机制是什么，但修复很简单。将代码移出对话框。在对 ShowDialog 的调用返回后立即执行此代码。

# oop - 哪种设计模式更适合控制器/服务/DAO

> ID：14822076
> 
> 赞同：9
> 
> 时间：2013-02-11T22:24:41.843
> 
> 标签：oop, model-view-controller, design-patterns

在我的职业生涯中，我看到了几个不同的设计，如何使用`DAO`, `Service`,`Controller`层。我想问两个，它们相似但几乎没有区别。第一个设计在层之间创建了可见的屏障。控制器总是使用服务并且只使用服务。服务可以使用其他服务或`DAO`s。控制器不能`DAO`直接使用任何。这种设计很清楚，但对我来说有很大的缺点：我们总是必须为`DAO`. 但在很多情况下，`Service`方法只调用`DAO`s 方法和其他任何东西。

例如：我们有`UserDao`

```
class UserDao {
    public List<User> findByName(String name) { ... }
    public List<User> findByLastName(String name) { ... }
    public List<User> findOlderThan(int age) { ... }

    ......
} 
```

以上所有方法均由`Controllers`. 在我们的情况下我们应该怎么做？在中创建类似的方法`UserService`：

```
class UserService {
    public List<User> findByName(String name) { return userDao.findByName(name); }
    public List<User> findByLastName(String name) { return userDao.findByLastName(name); }
    public List<User> findOlderThan(int age) { return userDao.findOlderThan(age); }

    ......
} 
```

对我来说，这是只读方法的额外不必要层。

在第二个设计中我们没有这个问题，因为我们可以直接在控制器中使用 DAO。在这个设计中，我们有一个规则：如果我们想从“数据存储”中检索数据，我们可以`DAO`在任何层使用，如果我们想在“数据存储”中进行一些更改，我们必须使用服务方法。

各位，你们觉得这些设计怎么样？哪个更好？我应该在我的项目中使用哪些，哪些应该被遗忘？你能和我分享你在这方面的经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:00:23.840

在 MVC 和受 MVC 启发的设计模式中，服务是模型层的“顶部”。这就是表示层与域业务逻辑交互的方式（实际上，“读取”部分应该由视图实例完成）。

在这种结构中，服务充当屏障，隔离表示层，并为您以后更改模型的内部结构提供额外的自由。

您必须记住的另一件事是，除了服务与之交互的[DAO之外，还有更多的结构。](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)首先是[领域对象](http://c2.com/cgi/wiki?DomainObject)（业务对象、模型对象），它们封装了与一个特定实体相关的不同业务规则。然后你也可以拥有[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)，它抽象存储逻辑而不是 DAO。或在映射器和域对象之间转换信息的 DAO。在更大规模的应用程序中也会有[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)。在较小的规模下，您可以使用一些[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)实例。

你可以说模型层包含三个主要的结构组，其中实现模型的不同方面：域、存储和应用程序逻辑。

应用程序逻辑是存储结构域对象之间的交互。这就是服务的职责。

如果您公开 DAO，您的模型层会在演示文稿中开始泄漏。控制器不应该知道使用了哪些结构，以及它们何时被持久化。

# ruby-on-rails - ActionView::Template::Error（application.css 未预编译）：

> ID：14822078
> 
> 赞同：6
> 
> 时间：2013-02-11T22:24:59.900
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku

我以前在heroku上开发过几个应用程序，从来没有遇到过这个错误：

`ActionView::Template::Error (application.css isn't precompiled):`

我最新的推送甚至没有对`application.css`文件进行更改..这里发生了什么？

我看过文章说将一行更改`production.rb`为：

```
# Don't fallback to assets pipeline if a precompiled asset is missed
config.assets.compile = true 
```

但这不会减慢一切吗？为什么会突然出现这个错误？修复它的最佳方法是什么？

编辑：我应该注意到它在开发中工作得很好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T00:19:57.027

`rake assets:precompile:all`在您的开发环境中运行。确保它不会给您错误并且它会创建`public/assets/application.css`. 如果它确实给你一个错误，解决它应该可以解决 Heroku 上的问题。

# video - 在 Brightcove 中获取自定义视频字段

> ID：14822079
> 
> 赞同：1
> 
> 时间：2013-02-11T22:25:03.930
> 
> 标签：video, custom-fields, brightcove

我在我的媒体 API 中创建了一个调用来检索名为“产品名称”的“自定义视频字段”，但未能成功检索它。在我的产品名称列中只弹出未定义。我在下面的代码片段中使用了 ((n.customFields)?n.productname:'') 来拨打电话。

```
function buildMAinVideoList() {

//Wipe out the old results
$("#tbData").empty();

console.log(oCurrentMainVideoList);
oCurrentVideoList = oCurrentMainVideoList;
// Display video count
document.getElementById('divVideoCount').innerHTML = oCurrentMainVideoList.length + " videos";
document.getElementById('nameCol').innerHTML = "Video Name";
//document.getElementById('headTitle').innerHTML = title;
document.getElementById('tdMeta').style.display  = "block";
document.getElementById('checkToggle').style.display  = "inline";
$("span[name=buttonRow]").show();
$(":button[name=delFromPlstButton]").hide();

//For each retrieved video, add a row to the table
var modDate = new Date();
$.each(oCurrentMainVideoList, function(i,n){
    modDate.setTime(n.lastModifiedDate);
    $("#tbData").append(
        "<tr style=\"cursor:pointer;\" id=\""+(i)+"\"> \
        <td>\
            <input type=\"checkbox\" value=\""+(i)+"\" id=\""+(i)+"\" onclick=\"checkCheck()\">\
        </td><td>"
            +n.name +
        "</td><td>"
            +(modDate.getMonth()+1)+"/"+modDate.getDate()+"/"+modDate.getFullYear()+"\
        </td><td>"
            +((n.customFields)?n.productname:'')+
        "</td></tr>"
    ).children("tr").bind('click', function(){
        showMetaData(this.id);

        })
}); 
```

我在我的 getPlaylist 调用中进行了类似的调用，在调试器中它显示了自定义字段，所以我知道它在上面的代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:27:51.657

您的自定义字段将作为 customFields 的子项返回。尝试：

```
(n.customFields && n.customFields.productname)?n.customFields.productname:'' 
```

# powershell - 使用 SecureString 对 plink.exe 命令进行密码加密

> ID：14822083
> 
> 赞同：1
> 
> 时间：2013-02-11T22:25:26.317
> 
> 标签：powershell, password-encryption, plink, securestring

我想在 PowerShell 中加密密码

我试过这个：

在 CLI 中：

```
Read-Host -prompt "Password ?" -AsSecureString | ConvertFrom-SecureString | out-file "D:\root.pwd" 
```

在我的 script.ps1 中：

```
$pwsNAS = Get-Content "D:\root.pwd" | ConvertTo-SecureString
plink.exe root@192.168.x.y -pw $pwdNAS df 
```

但它不起作用...

我尝试使用凭据，但似乎并没有更好...

（我的密码没有任何空格或重音字符）

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:38:57.337

当然是行不通的。`plink`期望选项的（明文）密码`-pw`，而不是`SecureString`对象。如果您想避免在脚本中使用明文密码：使用公钥身份验证。如果您不想让其他人知道您的密码（或密钥）：给他们自己的帐户和密码/密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:19:40.823

对于通过 ssh 进行连接，最好使用由[PuttyGen](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)或其他类似的密钥生成工具生成的密钥。

但是，有一种方法可以将安全字符串转换为纯文本字符串，详见[此处。](http://blogs.msdn.com/b/besidethepoint/archive/2010/09/21/decrypt-secure-strings-in-powershell.aspx) 请注意：a）只有在同一个用户帐户同时加密和解密安全字符串时，它才会起作用，并且 b）它不是非常安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T07:17:38.663

有关解密，请参阅[PowerShell - 将 System.Security.SecureString 解码为可读密码](https://stackoverflow.com/q/7468389/850848)：

```
$securePass = Get-Content C:\encrypted_password1.txt
$pass = $securePass | ConvertTo-SecureString

$Ptr = [System.Runtime.InteropServices.Marshal]::SecureStringToCoTaskMemUnicode($pass)
$decrypted = [System.Runtime.InteropServices.Marshal]::PtrToStringUni($Ptr)
[System.Runtime.InteropServices.Marshal]::ZeroFreeCoTaskMemUnicode($Ptr)
plink ... -pw $decrypted 
```

* * *

*尽管正如其他答案所建议的那样，您最好使用公钥身份验证。*

# java - 如何使用 SWIG 宏生成 C 回调到 java 方法？

> ID：14822088
> 
> 赞同：1
> 
> 时间：2013-02-11T22:25:39.113
> 
> 标签：java, java-native-interface, swig

我有一个带有“接口”结构的头文件，其中只包含函数指针。我希望 SWIG（自动？）为每个函数指针生成一个匹配的单一方法 Java 接口。我想在包装的 C 结构（=Java 代理类）上设置和获取实现这些接口的对象。setter 应该有额外的逻辑，将 Java 回调链接到它所设置的特定实例（即通过映射）。

在 C/JNI 方面，C 函数实现应该存储在结构的函数指针中，该指针回调到代理 java 类的静态 Java 方法。然后，此静态方法的实现可以使用给定的参数并使用回调和对象实例之间的链接来调用正确的 java 回调。

这个问题让我开始了：[我应该如何编写 .i 文件来用 Java 或 C# 包装回调](https://stackoverflow.com/questions/12210129/how-should-i-write-the-i-file-to-wrap-callbacks-in-java-or-c-sharp)

然而，它演示了如何使用全局声明的函数指针来做到这一点，在我的情况下，我可以/不想将 jobject+JNIEnv 全局存储在 C 端。

到目前为止，我得到的是一个带有 3 个参数的回调 C 函数的（悲惨的）宏：

```
%define CALLBACK_3(jni_cls, jni_mtd_name, jni_mtd_signature, c_mtd_name, c_arg0_type, c_arg_type1, c_arg_type2)

void c_mtd_name ( c_arg0_type c_arg0, c_arg1_type c_arg1, c_arg2_type c_arg2) {
    JNIEnv *env;
    GET_ENV(env);

    jclass j_callback_cls =  JCALL1(FindClass, env, jni_cls);
    jmethodID j_callback_mtd = JCALL3(GetStaticMethodID,env,j_callback_cls,#jni_mtd_name,#jni_mtd_signature);

    //?
    $typemap(jni,c_arg0_type) j_arg0 = 0;
    $typemap(jni,c_arg1_type) j_arg1 = 0;
    $typemap(jni,c_arg2_type) j_arg2 = 0;

    $typemap(out,1=c_arg0,result=j_arg0);
    $typemap(out,1=c_arg1,result=j_arg1);
    $typemap(out,1=c_arg2,result=j_arg2);

    //?
    JCALL3(CallStaticVoidMethod,env,j_callback_cls,j_callback_mtd,j_arg0,j_arg1,j_arg2);
}

%enddef 
```

所以在努力之前，我想知道我是否在这里采取了正确的方法，如果是这样，我如何告诉我的宏内部将给定的 C 变量转换为相应的 C JNI 类型？

# asp.net - ASP.NET MVC jQuery Ajax 错误/异常处理

> ID：14822089
> 
> 赞同：0
> 
> 时间：2013-02-11T22:25:42.207
> 
> 标签：asp.net, asp.net-mvc-2, error-handling

我有一个 asp.net MVC Web 应用程序，它使用 jQuery 进行许多 Ajax 调用。ajax 调用一个控制器来捕获存储过程中抛出的各种验证异常。当在过程中发现验证异常时，我使用以下语法

```
RAISERROR ('VALIDATION ERROR: xyx is required.', 16, 1) 
```

然后，我的 MVC 控制器捕获 SQL 异常，我在其中进行一些日志记录，然后重新抛出一个新异常（e.Message）。

```
catch (SqlException se)
{
    // logging happens

    // exception get rethrown for ajax error handling
    throw new Exception(se.Message);
 } 
```

从那里，我的 ajax 错误处理程序接管。

```
error: function(jqXHR, textStatus, errorThrown) {} 
```

在我的本地 Visual Studio Server 中，ajax 错误处理程序检索**所需**的以下 jqXHR.responseText：

```
<html>
<head>
    <title>VALIDATION ERROR: xyx is required.</title>
</head>
 .... 
```

从那里我解析标题并显示验证错误。效果很好。

但是，当我将代码部署到托管的 IIS 服务器时，我在 jqXHR.responseText 中得到一个通用的 500 响应：

```
<html>
<head>
    <title>Runtime Error</title>
</head> .... 
```

出于某种原因，我的共享产品服务器以不同的方式处理异常。你知道我怎样才能让两种环境都产生第一个行为吗？

我尝试在我的 web.config 中添加以下几行，但没有运气

```
<httpErrors errorMode="Custom" existingResponse="PassThrough">
  <remove statusCode="404" subStatusCode="-1" />
  <remove statusCode="502" subStatusCode="-1" />
  <remove statusCode="501" subStatusCode="-1" />
  <remove statusCode="500" subStatusCode="-1" />
</httpErrors> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:45:49.783

在 MVC 中正确设置错误处理是一种平衡行为，至少对我来说是这样。在我的情况下，我最终在`<system.web><customErrors>`和 中定义了自定义错误消息`<system.webServer><httpErrors>`。然后当然`ErrorHandler`我`ElmahErrorHandler`在`Global.asax`

我不会假装完全理解它，而是会向您展示我使用的东西。我以为我的应用程序中的某个地方还有一个，但我现在找不到它，您可能会猜到它们的内容的视图，它们大多是静态 HTML，除了可能有模型的 500 个。在这种情况下，我会根据当前用户角色输出一些更详细的错误信息。

我还必须解锁`httpErrors`machine.config 的节点，以便应用程序能够通过 web.config 定义它自己的自定义错误路径。您仍然可以通过 IIS 管理工具（相对于 ）设置自己的，但它们实际上是通过匹配应用程序的 ID`web.config`来写入的。`machine.config`

**网络配置**

```
<system.web>
    <customErrors mode="RemoteOnly">
      <!-- Off, RemoteOnly, On -->
      <error statusCode="400" redirect="~/errors/badrequest"/>
      <error statusCode="404" redirect="~/errors/notfound"/>
      <error statusCode="403" redirect="~/errors/forbidden"/>
      <error statusCode="500" redirect="~/errors/exception"/>
    </customErrors>
</system.web>

<system.webServer>
    <httpErrors errorMode="DetailedLocalOnly">
      <!-- Detailed, DetailedLocalOnly, Custom -->
      <remove statusCode="400" subStatusCode="-1"/>
      <error statusCode="400" path="/errors/badrequest" responseMode="ExecuteURL"/>
      <remove statusCode="403" subStatusCode="-1"/>
      <error statusCode="403" path="/errors/forbidden" responseMode="ExecuteURL"/>
      <remove statusCode="500" subStatusCode="-1"/>
      <error statusCode="500" path="/errors/exception" responseMode="ExecuteURL"/>
      <remove statusCode="404" subStatusCode="-1"/>
      <error statusCode="404" path="/errors/notfound" responseMode="ExecuteURL"/>
    </httpErrors>
</system.webServer> 
```

**全球.asax**

```
filters.Add(new Elmah.Contrib.Mvc.ElmahHandleErrorAttribute());
// -- OR --
filters.Add(new HandleErrorAttribute()); 
```

**错误控制器**

```
[AllowAnonymous]
public class ErrorsController : WimsController
{
    public ActionResult Index()
    {
        return RedirectToAction("Index", "Home");
    }

    public ActionResult Exception(HandleErrorInfo error = null)
    {
        return View("Error_500", error);
    }

    public ActionResult NotFound()
    {
        return View("Error_404");
    }

    public ActionResult Forbidden()
    {
        return View("Error_403");
    }

    public ActionResult BadRequest()
    {
        return View("Error_400");
    }
} 
```

# javascript - 防止href链接jQuery

> ID：14822090
> 
> 赞同：0
> 
> 时间：2013-02-11T22:25:50.123
> 
> 标签：javascript, jquery, href

我正在制作一个菜单，在这个菜单中我想要“slideToggle”一些选项卡（菜单项）的选项。所以我有一个“中学”标签，当用户点击那里时，他/她会“显示”其他一些标签。

唯一的问题是菜单是自动生成的，并且“中学”有一个我无法删除的 href 链接，因为用户也需要能够访问该链接。

经过一番研究，我想出了这个：

```
$('#menu li a, #menu li').click(function() {
        $(this).find("ul").slideToggle("slow");
        switch( $('#menu ul.menu li ul').css('display') ){
            case "none":
                return false;
            break;
            case "list-item":
                return true;
            break;
        };

}); 
```

但是，当用户现在单击链接以打开其他选项卡时，脚本不会“滑动切换”选项卡。我也尝试过`event.preventDefault();`同样不起作用的方法，因为之后链接需要处于活动状态。而且我还没有找到preventDefault ..的计数器功能。

![当一个人点击](../Images/90e951d05e95d069dbf4b19b433e15a3.png)因此，当用户单击选项卡时，它将打开更多选项卡：![因此，当用户单击选项卡时，它将打开更多选项卡。](../Images/2d9415d4dd2546ce75fcc70732cb69fc.png)

因此，当有人点击“信息”时，它会向下滑动一些其他选项卡，当其他选项卡向下时，需要再次点击“信息”链接才能进入“信息”页面。

因此，我正在寻找一种能够在不转到链接的情况下单击链接但“滑动切换”选项卡的方法，并且当“显示”选项卡时，链接需要再次处于活动状态。

**编辑：**我忘了指定这个页面是一个移动页面，所以鼠标悬停和悬停将不起作用......

**已解决** 此代码解决了我的问题：

```
$('#menu ul.menu li.expanded').each(function(i){
switch(i)
{
case 0:
    $(this).addClass("open");  
break;
case 1:
    $(this).addClass("open");  
break;
case 2:
    $(this).addClass("open");  
break;
case 3:
    $(this).addClass("open");  
break;
case 4:
    $(this).addClass("open");  
break;
}

$('#menu li').click(function() {
    if( $(this).find("ul").css('display') == "none" ){
        $('#menu li ul.menu').slideUp("fast");
    }
    $(this).find("ul").slideDown("slow");
});
$('#menu li.open a').on('click', function(e) {
    var tabs = $(this).parent().find('ul');
    if( tabs.css('display') == "none") {
        e.preventDefault();
        $('#menu li ul.menu').slideUp("fast");
        tabs.slideDown("slow");
    }
}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:31:20.773

要取消 href，如果您以后需要 href 属性，您可以指定一些事件、单击、悬停...，并且对于重定向，您可以使用 window.location = "otherstuff.html"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:32:09.907

如果我明白你在说什么，你不能仅仅通过事件来做到这一点。

这是它如何工作的示例：

```
jQuery('a').click(function(event){
    event.preventDefault();
    var newurl = this.href;
    jQuery('whatever').slideDown(function(){
        location.href = newurl;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:53:41.003

从用户体验的角度来看，这听起来有点麻烦。用户如何知道单击“信息”一次会打开一些子元素，但再次单击会转到“信息”页面？这似乎是一个基本的手风琴元素，其中一次单击打开子元素，另一次单击关闭它们。

如果您需要将一级元素作为可点击链接，但也有二级元素，我会投票支持在鼠标悬停而不是点击时打开二级元素。这也可以解决您的点击问题，因为您不必阻止任何默认设置。

我不知道你的 HTML，所以这可能会出错，但让我们试一试。

```
$('#menu li').on('mouseenter mouseleave', function() {
    $(this).find('ul').slideToggle('slow');
}); 
```

如果您仍然喜欢点击方法，您可以这样做。同样，CSS 选择器可能会出错，因为我只是在猜测您的 HTML，但您可能会明白。

```
$('#menu li a').on('click', function(e) {
    // Get parent of a (li), find ul underneath and check if it's visible
    var jqUl = $(this).parent().find('ul');
    if(!jqUl.is(':visible')) {
        // subelements are not visible, prevent default and slide subelements down
        e.preventDefault();
        jqUl.slideDown();
    }
}); 
```

# asp.net-mvc - 在 MVC4 中播种父/子数据

> ID：14822101
> 
> 赞同：0
> 
> 时间：2013-02-11T22:26:16.227
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

一个集合包含一个卡片列表。一张卡片包含一个边列表。我想用一堆卡片播种一堆套装，每张都有几个面。这是我到目前为止所拥有的：

```
for (int i = 0; i < 1000; i++)
 {
   context.Sets.AddOrUpdate(s => s.Name,
       new Set()
       {
         Name = "Set "+ i.ToString(),
         Cards = new List<Card>()
            {
             new Card()
               {
                 DateCreated = DateTime.Now,
                 IsReady = true,
                 Stage = 0,
                 Sides = new List<Side>()
                     {
                      new Side()
                        {
                          Content = "Blank Side 1"
                        },
                         new Side()
                        {
                          Content = "Blank Side 2" 
                        }
                      }
                  }
               }    
           }        
       );    
   } 
```

我对如何处理外键有点困惑......如何在上面设置 Card.SetID 或 Side.CardID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:33:31.833

鉴于您正在使用的格式，您无需担心 FK。这些应该由实体框架自动为您处理（假设您的`Set`对象具有数据库生成的 ID）。

# linux - 复制除 libgcc*.so 之外的所有 *.so 文件

> ID：14822102
> 
> 赞同：3
> 
> 时间：2013-02-11T22:26:21.513
> 
> 标签：linux, copy

lib1.a
lib2.a
lib1.so
lib2.so
libgcc1.so
libgcc2.so
libgcc3.so
lib3.so

如何复制所有`*.so`文件，不包括`libgcc*.so`复制以下文件：

lib1.so
lib2.so
lib3.so

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T22:38:59.533

在`bash`中，您可以使用扩展通配符：

```
shopt -s extglob
cp !(libgcc*).so destination/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T22:37:17.573

尝试使用[`find`](http://www.linuxmanpages.com/man1/find.1.php)：

```
find path/to/src-dir -name '*.so' ! -name 'libgcc*.so' \
    -exec cp '{}' /path/to/dst-dir \; 
```

# glsl - 是否可以使用 Three.js 将着色器顶点位置存储在纹理中？

> ID：14822109
> 
> 赞同：1
> 
> 时间：2013-02-11T22:26:42.177
> 
> 标签：glsl, three.js

我正在使用移动相机在 Three.js 中制作循环 3D 星空，但在 CPU 上执行此操作对我的帧率不利。如果这可以通过顶点着色器以某种方式完成，那就太好了。

这是我想在着色器中执行的 javascript 代码：

```
SW.Starfield = function ( position, scene ) {
    var scale = 10000;
    var particleCount = 2000;
    var x, y, z;
    var particles;

    var material = new THREE.ParticleBasicMaterial( { sizeAttenuation: false, size: 1, color: '#FFFFFF' } );
    var geometry = new THREE.Geometry();

    for ( var i=0; i <= particleCount; i++ ) {
        do {
            x = Math.random() * scale - scale/2 + position.x;
            y = Math.random() * scale - scale/2 + position.y;
            z = Math.random() * scale - scale/2 + position.z;
        } while (new THREE.Vector3( x, y, z ).length()> scale/2);

        geometry.vertices.push( new THREE.Vector3( x, y, z ) );
    }

    particles = new THREE.ParticleSystem( geometry, material );
    particles.dynamic = true;
    particles.position = position;
    particles.sortParticles = true;
    scene.add( particles );

    this.update = function( shipPos ) {
        for ( i=0; i <= particleCount; i++ ) {
            var particleVec = new THREE.Vector3().copy( particles.geometry.vertices[ i ] );
            var shipVec = new THREE.Vector3().copy( shipPos );

            if ( shipVec.sub(particleVec).length() >= scale/2 ) {
                particles.geometry.vertices[ i ].add(shipVec.multiplyScalar(2.0));
            }
        }
    }
} 
```

如果我理解正确，我将不得不将星星的位置存储在纹理中以使其在着色器中工作，因为我认为您不能仅从星星的初始位置计算新位置在这种情况下是一个方程。如果您查看更新功能，应该清楚我的意思。

有没有办法在 Three.js 中做到这一点？我知道可以存储颜色。也许我可以将位置编码为颜色，但是位置可以具有比颜色更高的值以及负值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:12:19.103

谷歌 GPGPU 和 three.js。

网上有几个例子。他们中的大多数都是老的。

这是最近的一个：

[http://jabtunes.com/labs/3d/gpuflocking/webgl_gpgpu_flocking3.html](http://jabtunes.com/labs/3d/gpuflocking/webgl_gpgpu_flocking3.html)

三.js r.56dev。

# php - 如何让查询显示两个结果？

> ID：14822118
> 
> 赞同：0
> 
> 时间：2013-02-11T22:27:08.097
> 
> 标签：php, mysql

这是我的查询语句

```
$moc_query = $database->database_query("SELECT gg_congress_members.id,
  gg_congress_members.member_fname,gg_congress_members.member_lname,
  gg_congress_members.member_state,gg_congress_members.member_party,
  gg_congress_members.member_title
  FROM
    gg_congress_members
  WHERE (member_title = 'Sen' AND member_state='$user_state')
        OR (member_title = 'Representative' AND
            member_district = '$user_district'
            AND member_state='$user_state') ")
or die(mysql_error()); 
```

我的代码：

```
if ($user_info["user_id"])
{
    $senators .= "<h2>Your Senators are</h2>";
    $senators .= "<ol>";

    $reps .= "<h2>Your Congressperson is</h2>";
    $reps .= "<ol>";

    $rep_count = 0;
    foreach ($mocs as $moc)
    {
        print_r ($mocs);
        $moc_title = $moc['moc_title'];
        $moc_fname = $moc['moc_fname'];
        $moc_lname = $moc['moc_lname'];
        $moc_party = $moc['moc_party'];
        $moc_state = $moc['moc_state'];

        if ($moc['moc_title'] == "Sen")
        {
            $senators .= "<li>$moc_fname $moc_lname - $moc_party ($moc_state)</li> ";           
        }

        if ($moc['moc_title'] == "Representative" )
        {
            $rep_count++;
            $reps .= "<li>$moc_fname $moc_lname - $moc_party ($moc_state)</li> ";
        }

    }
} 
```

它只显示代表而不是参议员。如果我删除查询中有关代表的部分，那么它确实会显示参议员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:39:06.823

你是如何绑定你的参数的？我想知道两次使用相同的名字是否会以某种方式把事情搞砸（尽管它不应该）。如果删除代表显示参议员，那么也许这样的事情会起作用：

```
SELECT gg_congress_members.id,
   gg_congress_members.member_fname,
   gg_congress_members.member_lname,
   gg_congress_members.member_state,
   gg_congress_members.member_party, 
   gg_congress_members.member_title  
FROM gg_congress_members  
WHERE member_state='$user_state' AND 
   ((member_title = 'Sen') OR 
   (member_title = 'Representative' AND member_district = '$user_district')) 
```

祝你好运。

# javascript - three.js 顶点着色器：更新属性以及如何为下一轮处理保存值

> ID：14822124
> 
> 赞同：2
> 
> 时间：2013-02-11T22:27:36.787
> 
> 标签：javascript, glsl, three.js, webgl

这是一个非常简单的设置的要点：[https ://gist.github.com/ichbinadrian/4758155](https://gist.github.com/ichbinadrian/4758155)

我的基本计划是根据片段到最低或最高顶点的距离为片段着色。像一座山脉。如何在着色器中保存一个值，以便以后进行处理。因为顶点会随着时间改变位置。

至少这是计划。因为在更改属性中的值后，我无法弄清楚如何更新顶点和面。当我更改着色器外部的顶点位置并设置 xNeedUpdate = true 时，它​​运行良好。

着色器逻辑并不那么容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:38:36.583

如果您在渲染循环中执行此操作：

```
attributes.displacement.needsUpdate = true; 
```

你的要点会起作用。

# javascript - Phantomjs page.onConsoleMessage 不记录警告

> ID：14822126
> 
> 赞同：1
> 
> 时间：2013-02-11T22:27:37.317
> 
> 标签：javascript, console, google-chrome-devtools, phantomjs

我正在使用 Phantomjs 通过挂钩控制台消息来检测页面上的错误/警告：

```
page.onConsoleMessage = function(msg, line, source) {
   console.log(msg);
}

page.open(page.address, function (status) {
    if (status !== 'success') {
        console.log('Fail to load the address');
    } else {
        for(var i=0;i<page.errors.length;i++)
        {
            console.log(page.errors[i]);
        }
    }
    phantom.exit();
}); 
```

它可以很好地处理错误，但不会记录警告。错误和警告是指 Chrome 控制台以红色/黄色显示的内容。

有没有办法在 PhantomJS 中做到这一点，还是依赖于浏览器？

编辑：更新代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:07:17.940

因此，经过多次研究，错误/警告似乎取决于浏览器（确切地说是 JS 引擎）。

# ruby-on-rails - 按相对条件查找模型中的对象

> ID：14822131
> 
> 赞同：1
> 
> 时间：2013-02-11T22:28:02.220
> 
> 标签：ruby-on-rails

我是 RoR 的新手。请帮助我：我有两个模型：

```
class User < ActiveRecord::Base
  belongs_to :game
end 
```

和

```
class Game < ActiveRecord::Base
  has_many :users, :foreign_key => "game_id"
end 
```

游戏对象有很多用户。我需要找到所有游戏对象，其中 users.count == 1。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:54:22.083

`where`MrYoshiji 的答案很接近，但您需要使用`group`and而不是尝试使用`having`。

例如：

```
Game.joins(:users).group("users.game_id").having("count(users.game_id) = 1") 
```

这将产生以下查询：

```
SELECT games.* FROM "games" INNER JOIN "users" ON "users"."game_id" = "games"."id" GROUP BY users.game_id HAVING count(users.game_id) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:31:57.570

有点长，但这对我有用：

```
 Game.joins(:users).where("(select count(users.game_id) from users users2 where users2.game_id = games.id) = 1") 
```

您可以使用`includes()`或`joins()`取决于您想要做什么。

# drupal - 如何翻译drupal菜单迷你面板？

> ID：14822134
> 
> 赞同：3
> 
> 时间：2013-02-11T22:28:35.557
> 
> 标签：drupal, internationalization, drupal-panels

我有一个 Druapl 7 网站，它大量使用菜单迷你面板。现在这个网站正在被翻译成其他语言，我很难让菜单面板出现在新翻译的菜单项下。
有没有人完成了这项任务并取得了成功？

# javascript - 浏览器中的 Javascript 版本

> ID：14822135
> 
> 赞同：0
> 
> 时间：2013-02-11T22:28:38.210
> 
> 标签：javascript, internet-explorer, google-chrome, firefox, version

我有一个关于 Javascript 的问题。我收集的信息表明，每个浏览器中使用的 Javascript 版本取决于实际的浏览器。

有人可以给我一份 Chrome、Firefox 和 IE 中 Javascript 版本的快速列表吗？我在网上看过，但需要一个明确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:33:10.477

您永远不需要知道正在运行的 JavaScript 的版本，原因与您永远不需要知道正在使用什么浏览器（或其版本）来查看您的网站一样。

例如，我看到很多网站说“IE7 不支持 querySelectorAll，但你可以用这个聪明的 CSS 破解它”......但这仍然没有在许多不支持 querySelectorAll 的移动设备中提供支持支持它（任天堂 DSi 浏览器令人痛苦地想起）。

始终，*始终*使用功能检测来查看浏览器是否支持特定功能。例如，
`if( !window.JSON) { /* implement your own JSON-handling functions here */}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:32:06.160

您说 JavaScript 引擎的版本由浏览器决定是正确的，但是，我不知道您为什么需要知道此信息。

一个快速的谷歌返回了这个[可能的解决方案](http://javascript.about.com/library/bljver.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:36:07.517

如果您真的想知道浏览器 JS 引擎使用哪些版本，您可以在 Wikipedia 上的“JavaScript 引擎”和“实现”部分下探索该信息[，](http://en.wikipedia.org/wiki/JavaScript_engine#JavaScript_engines)看看是否满足您想知道的内容。不过，我希望这更像是一种学术兴趣，因为正如其他人所提到的，检查您想要使用的特定功能要好得多，而不是根据浏览器版本做出假设*。*

# html - 注册商标符号 - 哪个是更好的 HTML 实体或标记？

> ID：14822143
> 
> 赞同：2
> 
> 时间：2013-02-11T22:29:45.137
> 
> 标签：html, html-entities

目前，在我们所有的 html 页面中，我们使用 ® 显示注册商标符号的实体，到目前为止，我认为这是显示符号的正确方法。但是，现在我的任务之一是浏览所有页面并将其替换为 <sup>®</sup>。

我想告诉我的老板，这样做是错误的，但实际上我找不到任何讨论这个以及哪种方法是正确方法的文章。到目前为止，我只是假设使用 html 实体方法是正确的方法，但现在我不太确定。我的老板有什么理由要使用这些标签吗？如果有的话，会有什么好处？也许浏览器兼容性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:32:57.687

在正确编码的网站上，没有理由再使用 HTML 实体了。只需以正确的编码输入实际字符。

不过，看来你的老板*真正*想要的是*改变角色的样子*。如果他完全意识到的话，将实体变成实际角色可能只是一个副作用。

`<sup>`这是没有: ®的样子

这就是它的样子`<sup>`：^®

# php - 从 PHP 数组创建一个二维 javascript 数组

> ID：14822145
> 
> 赞同：0
> 
> 时间：2013-02-11T22:29:54.980
> 
> 标签：php, javascript, arrays

如何制作这个 PHP 数组：

```
 array(12) {
    [0]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "8" ["name"]=> string(10) "Accounting" ["main_category_id"]=> string(1) "1" } } 
    [1]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "1" ["name"]=> string(17) "Applications" ["main_category_id"]=> string(1) "2" } } 
    [2]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "2" ["name"]=> string(19) "Benefit Claims" ["main_category_id"]=> string(1) "2" } } 
    [3]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "3" ["name"]=> string(22) "Evaluations" ["main_category_id"]=> string(1) "2" } } 
    [4]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "4" ["name"]=> string(11) "Leave Forms" ["main_category_id"]=> string(1) "2" } } 
    [5]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "5" ["name"]=> string(13) "Payroll" ["main_category_id"]=> string(1) "2" } } 
    [6]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "6" ["name"]=> string(17) "Recruitment" ["main_category_id"]=> string(1) "2" } } 
    [7]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "7" ["name"]=> string(24) "Training" ["main_category_id"]=> string(1) "2" } } 
    [8]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(1) "9" ["name"]=> string(13) "Staff" ["main_category_id"]=> string(1) "2" } } 
    [9]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "10" ["name"]=> string(14) "Codes" ["main_category_id"]=> string(2) "3" } } 
    [10]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "11" ["name"]=> string(28) "Reports" ["main_category_id"]=> string(2) "3" }
    [11]=> array(1) { ["SubCategory"]=> array(3) { ["id"]=> string(2) "12" ["name"]=> string(14) "Plan" ["main_category_id"]=> string(2) "4" } } 
    } 
```

在 javascript 中看起来像这样：

```
var SubCat[
["Accounting"],
["Applications","Benefit Claims","Evaluations","Leave Forms","Payroll","Recruitment","Training","Staff"],
["Codes","Reports"],
["Plan"]
]; 
```

我尝试了几个不同的php：

```
<?php
    $jsArray = array();
    foreach($data as $row) {
        $jsArray[] = array($row['SubCategory']['name']);
    }
    echo json_encode($jsArray);
    ?> 
```

也试过这个：

```
<?php 
     echo "[";
     foreach($data as $row){
        foreach($row as $subcat) {
            echo "\"" . $subcat['name'] . "\",";
           }
     }echo "]";
?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:50:59.920

就像我上面所说的，您与 json_encode 示例非常接近。你只需要在main_category_id下引入第二个维度。

```
<?php
$data = array(
    array("SubCategory"=> array("id"=>"8", "name"=>"Accounting","main_category_id"=>"1")),
    array("SubCategory"=> array("id"=>"1", "name"=>"Applications","main_category_id"=>"2")),
    array("SubCategory"=> array("id"=>"2", "name"=>"Benefit Claims","main_category_id"=>"2")),
    array("SubCategory"=> array("id"=>"3", "name"=>"Evaluations","main_category_id"=>"2")),
    array("SubCategory"=> array("id"=>"4", "name"=>"Leave Forms","main_category_id"=>"2")),
    array("SubCategory"=> array("id"=>"5", "name"=>"Payroll","main_category_id"=>"2")),
    array("SubCategory"=> array("id"=>"6", "name"=>"Recruitment","main_category_id"=>"2")),
    array("SubCategory"=> array("id"=>"7", "name"=>"Training","main_category_id"=>"2")),
    array("SubCategory"=> array("id"=>"9", "name"=>"Staff","main_category_id"=>"2")),
    array("SubCategory"=> array("id"=>"10", "name"=>"Codes","main_category_id"=>"3")),
    array("SubCategory"=> array("id"=>"11", "name"=>"Reports","main_category_id"=>"3")),
    array("SubCategory"=> array("id"=>"12", "name"=>"Plan","main_category_id"=>"4")),
);
$selected = 7;

$js = array();

foreach($data as $sub){
    //get the parent id (main_category_id)
    $parent = $sub['SubCategory']['main_category_id'];
    //if the parent doesn't exist, add it
    if(!isset($js[$parent])){
        //add array with name and id
        $js[$parent] = array(array('id'=>$sub['SubCategory']['id'],'name'=>$sub['SubCategory']['name']));
    //parent does exist
    } else {
        //append this entry name and id
        $js[$parent][] = array('id'=>$sub['SubCategory']['id'],'name'=>$sub['SubCategory']['name']);
    }
}

echo json_encode($js); 
```

工作：[http ://codepad.viper-7.com/NOX9bT](http://codepad.viper-7.com/NOX9bT)

这是修改后的 jsfiddle 与上面 php 的输出一起使用：http: [//jsfiddle.net/wprLD/5/](http://jsfiddle.net/wprLD/5/)

# dojo - 更新 Dojo 增强的网格行样式 - 存储后获取

> ID：14822148
> 
> 赞同：2
> 
> 时间：2013-02-11T22:29:57.197
> 
> 标签：dojo, dojox.grid.datagrid, dojox.grid

使用 Dojo，我设置了一个链接到数据存储的网格。网格加载后，我有一个连接函数，它遍历行并根据单元格的值设置行文本颜色。这很好用（下面复制的代码）。

```
var gagrid = new dojox.grid.EnhancedGrid({
query: {
Keyword: '*'
},
store: gastore,
structure: galayout,
escapeHTMLInData: false,
plugins: {
nestedSorting: true
}
},
document.createElement('div'));

dojo.connect(gagrid, 'onStyleRow', this, function(row) {
var item = gagrid.getItem(row.index);

if (item) {
var value = gagrid.store.getValue(item, "Performance", null);
if (value == 3) {
row.customStyles += "color: green;";
} else if (value == 2) {
row.customStyles += "color: red;";
}
}
gagrid.focus.styleRow(row);
gagrid.edit.styleRow(row);
}); 
```

在使用 store fetch 功能的页面/网格加载（通过用户交互）之后，我有了一些功能。它遍历我的网格存储的行并根据用户输入更改单元格的值。同样，这工作正常，网格中的值已正确更新。代码如下。

```
gastore.fetch({
query: {Keyword: '*'},
onComplete: function(items, request){
var i;
for (i = 0; i < items.length; i++) {
var item = items[i];
var performance;
if(parseInt(items[i]["Visits"])>=rp)
{
if(parseInt(items[i]["Bounce"])<=rb&&parseInt(items[i]["Time"])>=rmp)
{
performance=3;
}
else
{
performance=2;
}
}
else
{
performance=1;
}
gastore.setValue(item,"Performance",performance);
}
}
}); 
```

但是，一旦更新了值，自定义样式不会立即应用于行。例如，一行的文本颜色在应该变为黑色时保持绿色。

一旦与网格交互（例如，对列进行排序），行颜色就会更新为正确的颜色。

有什么方法可以在调用 store fetch 函数后直接触发网格行的正确自定义样式？

抱歉，如果我的问题有点啰嗦-只是想我会尝试充分解释这个问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:42:20.763

你不需要遍历行！您可以在定义布局“galayout”时使用“formatter”和“styles”属性......看看：

> ```
> function getExtImg(valueOfColumn) { // Do something with the value...
>   return valueOfColumn+'do something with it';
> } 
> ```
> 
> var layout = [[ {'name': 'Ext', 'field': 'extension', **formatter** : **getExtImg** , styles:'padding:0px;'},
> 
> {'name': '文件名', 'field': 'documentName', width: 'auto'}]];
> 
> // 将此布局添加到您的网格...

您指定为格式化程序函数的内容会为每一行调用！还有您在样式属性下指定的样式。

我认为这将帮助您解决问题！

为了能够在格式化程序中更改行样式，请设置如下格式化程序函数：

> formatter:function(val, rowIdx, cell) { classes = compute_classes(val, rowIdx, cell); cell.customClasses.push(classes); }

资料来源： [如何有条件地设置 Dojo 数据网格中的单元格样式？](https://stackoverflow.com/questions/2553734/how-do-you-conditionally-style-a-cell-in-a-dojo-data-grid)

正如所见应该很容易看到，您可以使用 push 函数将类添加到当前行！

卢西安

# c++ - 在 C++ 中，将大型二进制（1GB-4GB）文件加载到内存中的最快方法是什么？

> ID：14822151
> 
> 赞同：7
> 
> 时间：2013-02-11T22:30:13.120
> 
> 标签：c++, linux, posix

在 Linux 64 位（例如 Amazon EC2 实例）上，我需要将几个大型二进制文件加载到内存中。最快的方法是什么？

*   流
*   恐惧
*   POSIX 开放
*   POSIX mmap（实际上并未将整个文件加载到内存中，这会损害性能）
*   别的东西？

此外，节点可能会或可能不会再次启动此可执行文件，因此如果文件在后续尝试中加载得更快，这将有所帮助。某种预加载步骤甚至可能起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T22:46:10.613

时间将由磁盘 I/O 主导，因此您使用哪种 API 不如考虑磁盘如何工作重要。如果您随机访问磁盘（旋转媒体），则查找将花费 3 到 9 毫秒……一旦磁盘开始流式传输，它可以维持大约 128 MB/秒，这就是磁盘磁头的速度有多快。SATA 链接或 PCIe 总线的带宽比这高得多（600 到 2000 MB/秒）。Linux 在内存中有一个页面缓存，它在磁盘上保存页面的副本，因此只要您的机器有足够的 RAM，即使您随后随机访问数据，后续尝试也会很快。所以建议是一次读取大块。如果你真的想加快初始加载速度，那么你可以使用 mmap 来映射整个文件（1GB-4GB），并有一个帮助线程按顺序读取每个页面的第一个字节。

您可以在此处阅读有关[磁盘驱动器性能特征的更多信息。](http://en.wikipedia.org/wiki/Hard_disk_drive_performance_characteristics)

您可以在此处阅读有关[页面缓存的更多信息。](http://en.wikipedia.org/wiki/Page_cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:39:44.997

鉴于上述信息，我会说`mmap`是一个很好的候选人。我这么说有几个原因： 1\. 它为您提供整个文件，而无需实际加载（任何）文件，直到实际需要该部分。这是快速加载的一个优势，但如果您最终会遍历每个字节[或触及文件的每个 4KB 部分]，那么没有太大区别。2.`mmap`只会将数据从磁盘复制一次到您的页面。这在我的测试中比使用`fread`或`read`在 Linux 中读取更有效（另请注意，可以忽略相当大的读取之间的差异。`fread`在`read``FILE`C 中的函数。C++ 流增加了相当多的开销，但是，根据我的经验 [我现在已经尝试了很多次这种形式的各种形式]。

像往常一样，基准测试总是胜过互联网上的询问。所以你可能会发现我上面所说的在你的情况下是不正确的。正如所指出的，一旦代码足够好，代码中的任何开销都会与磁盘传输数据的速度相形见绌——即使你有一个非常漂亮的 RAID 系统，最终有很多并行（SSD？）磁盘等磁盘传输速度将成为瓶颈所在。此时您所能做的就是尽量减少其他开销，并在磁盘交付数据后尽快将数据发送到应用程序。

“每秒字节数”的一个很好的基准是使用`dd if=/dev/zero of=somefile bs=4K count=1M`（写入文件，然后您可能想`dd if=somefile of=/dev/null bs=4K`看看您可以从磁盘读取多少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T03:37:29.243

你可以试试`mmap`flag `MAP_POPULATE`。我怀疑你可以更快地做到这一点。

# ruby - 使用 Nokogiri 在 XPath 中转义单引号？

> ID：14822153
> 
> 赞同：18
> 
> 时间：2013-02-11T22:30:25.813
> 
> 标签：ruby, xpath, nokogiri

我有一个看起来像这样的 XPath 查询，带有单引号和双引号。如何正确转义撇号以便查询有效？

我试过：

```
"//li[text()='Frank&apos;s car']" 
```

但它似乎不适合我。

有任何想法吗？

```
 "//li[text()='Frank's car']" 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-11T23:29:08.890

XPath 没有任何转义特殊字符的方法，所以这有点棘手。这种特定情况下的解决方案是在 XPath 表达式中使用双引号而不是单引号：

```
text()="Frank's car" 
```

如果你这样做了，如果你在整个表达式周围使用双引号，你必须从 Ruby 中转义引号：

```
"//li[text()=\"Frank's car\"]" 
```

如果你不做任何插值，你可以在这里使用单引号，然后转义单引号：

```
'//li[text()="Frank\'s car"]' 
```

更好的选择可能是使用 Ruby 的灵活引用，这样所有引号都不需要转义，例如：

```
%{//li[text()="Frank's car"]} 
```

请注意，这里的所有示例都*在 Ruby*中进行转义，因此到达 XPath 处理器的字符串是`//li[text()="Frank's car"]`.

更一般的情况是，当文本是可能包含单引号或双引号的变量时会更困难。XPath 的字符串文字不能同时包含两种类型的引号；您需要使用[XPath`concat`函数](http://www.w3.org/TR/xpath/#function-concat)构造字符串。

例如，如果您想匹配 string `"That's mine", he said.`，则需要执行以下操作：

```
text()=concat('"That', "'", 's mine", he said.') 
```

然后你必须从 Ruby 中转义引号（使用`%{}`将是最简单的）。

我[在 C# 中找到了另一个关于 SO 处理此问题的问题，以及](https://stackoverflow.com/q/1341847/214790)[Nokogiri 邮件列表中的](https://groups.google.com/forum/?fromgroups=#!topic/nokogiri-talk/6stziv8GcJM)一个线程，如果您需要进一步研究，这两个问题都可能值得一看。

# php - CakePHP 需要两次页面加载来验证表单

> ID：14822154
> 
> 赞同：4
> 
> 时间：2013-02-11T22:30:28.743
> 
> 标签：php, validation, cakephp

我正在写一个页面，我的用户可以在其中更改他们的帐户电子邮件和密码。这是控制器动作和视图：

```
# UsersController.php
public function edit() {
    if($this->request->is('post')) {
        if($this->User->save($this->request->data)) {
            $this->Session->setFlash('Your account has been updated.');
            $this->redirect(array('action' => 'edit'));
        }

        $this->Session->setFlash('There was a problem saving your account settings. Please try again.');
    }

    // Auto populate form fields
    if(!$this->request->data) {
        $this->request->data = $this->User->find('first', array(
            'conditions' => array('User.id' => $this->Auth->user('id'))
        ));
    }
}

# edit.ctp
<?php echo $this->Form->create('User'); ?>
<?php echo $this->Form->input('currentPassword', array('between' => 'You must enter your password in order to make changes', 'type' => 'password', 'value' => '', 'autocomplete' => 'off')); ?>
<?php echo $this->Form->input('email'); ?>
<?php echo $this->Form->input('password', array('type' => 'password', 'between' => 'Must be atleast 6 characters', 'value' => '', 'autocomplete' => 'off')); ?>
<?php echo $this->Form->input('confirmPassword', array('type' => 'password', 'value' => '', 'autocomplete' => 'off')); ?>
<?php echo $this->Form->end('Save changes'); ?> 
```

现在，我想让用户输入他们当前的密码以进行更改。为了让它工作，我需要运行验证检查以确保他们输入的密码`currentPassword`与我在数据库中的密码相匹配。`User`我的模型中的验证规则之一是：

```
'currentPassword' => array(
    'custom' => array(
        'rule' => 'validateCurrentPassword',
        'message' => 'Incorrect password. Make sure you\'re using your current password.'
    )
), 
```

以及被调用的相关函数：

```
public function validateCurrentPassword($data) {
    debug($data);
    return false;
} 
```

到目前为止一切都很好，但是有一些非常奇怪的行为。Cake 似乎只在加载两个页面后才验证此字段。例如，如果我输入错误的值并按“保存更改”，页面会刷新，但不会弹出验证错误。如果我输入另一个错误的值，我会收到验证错误。出于某种原因，我需要提交两次表单以进行验证。

谁能弄清楚这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T04:53:46.150

`$this->request->is('post')`是`false`您第一次提交表单和`true`第二次提交。查看`lib/Cake/Console/Templates/default/actions/controller_actions.ctp`文件，您会看到当您烘焙控制器动作时，这是用于`edit`动作的代码：

```
if ($this->request->is('post') || $this->request->is('put')) { 
```

如果使用上面的代码，会处理第一个表单提交（因为`$this->request->is('put')`会`true`）。

查看`FormHelper`类的`create`方法（位于 中`lib/Cake/View/Helper/FormHelper.php`）以了解何时将表单视为 PUT 以及何时将其视为 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:15:04.757

您可以使用 ajax 调用从数据库中获取密码。当用户输入密码字段旁边的字段时，在 jquery 或 javascript 中触发一个事件，以检查用户输入的密码和从 ajax 响应中检索到的密码是否相同，如果它们没有给用户提示或消息输入正确的密码，

# memory-leaks - 使用 ngRepeat 对轮询数据进行 Angular.js 内存泄漏

> ID：14822155
> 
> 赞同：4
> 
> 时间：2013-02-11T22:30:31.470
> 
> 标签：memory-leaks, angularjs

我的 angular.js 应用程序中似乎存在内存泄漏。基本上，该页面包含一个信息表，该信息表每五秒从 AJAX 调用的 JSON 编码结果更新一次。我在这里创建了一个简化的 jsfiddle 版本：http: [//jsfiddle.net/alalonde/TtGXW/6/](http://jsfiddle.net/alalonde/TtGXW/6/)

控制器：

```
function HostController($scope, $timeout, Data) {
  $scope.encoders = Data.load();
  $scope.refreshInterval = 5;

  $scope.reload = function () {
    $scope.encoders = Data.load();
  };

  $timeout(function doReload() {
    $scope.reload();
    $timeout(doReload, $scope.refreshInterval * 1000);
  }, 5000);
} 
```

模板片段：

```
<table class="table table-striped table-bordered" ng-controller="HostController">
  <tr>
    <th>Status</th>
  <th>...
  </tr>
  <tr ng-repeat="enc in encoders">
    <td>
      <div>{{ enc.name }}</div>
      <div ng-show="enc.version">
        v{{ enc.version.major }}.{{ enc.version.minor }}-{{ enc.version.rev }}
        <span ng-show="enc.version.user">- {{ enc.version.user }}</span>
      </div>
    </td>
  </tr>
</table> 
```

在 Chrome 中每分钟左右拍摄一次堆快照时，内存使用量每次都会略有上升。我已将 Igor Minar 的修复程序应用于我的本地 angular.js ( [https://github.com/angular/angular.js/commit/bd524fc4e5fc0feffe85632a7a6560da6bd9b762](https://github.com/angular/angular.js/commit/bd524fc4e5fc0feffe85632a7a6560da6bd9b762) )，这有很大帮助，但内存使用量仍在无情地攀升。

任何有关使用带有 angular.js 的 Chrome 内存分析器的提示都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-09T16:22:03.377

当我轮询数据并使用 ng-repeat 循环它并呈现行时，我遇到了同样的内存消耗问题。

当我使用“item in items”时，我的内存使用量不断增加，但是当我使用“item in items track by $index”时，内存使用量稳定，GC 也被正确清理。

# xcode - 如何将 Xcode 项目重用于其他类似的应用程序？

> ID：14822156
> 
> 赞同：1
> 
> 时间：2013-02-11T22:30:56.113
> 
> 标签：xcode

我创建了一个应用程序，可以根据用户选择播放各种声音片段序列。我想使用相同的用户界面和代码创建一些应用程序，但在其他应用程序中使用单独的声音剪辑和一些不同的图形。请保存项目以在不同应用程序中再次将代码用作模板的最佳方法是什么？我阅读了有关创建新目标的信息，但并不真正理解这一点，或者这是否是正确的做法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:36:01.270

您可以为多个应用程序中的每一个设置不同的目标，并在每个应用程序中包含不同的资源。Xcode 中的每个“目标”都会创建一些产品，因此如果您想要生成 4 个不同的应用程序，您将创建 4 个不同的目标，每个应用程序一个。使用 File Inspector 的 Target Membership 部分选择每个文件所属的目标。还有一个聚合目标，您可以向其中添加其他目标；构建聚合目标将导致构建它所依赖的所有目标。这样您就可以一次构建所有应用程序。

# powershell - Powershell：通过字符串数组过滤文件的内容

> ID：14822172
> 
> 赞同：20
> 
> 时间：2013-02-11T22:32:24.233
> 
> 标签：powershell

猜我这个：

我有一个数据文本文件。我想读入它，并且只输出包含在搜索词数组中找到的任何字符串的行。

如果我只寻找一个字符串，我会做这样的事情：

```
get-content afile | where { $_.Contains("TextI'mLookingFor") } | out-file FilteredContent.txt 
```

现在，我只需要“TextI'mLookingFor”是一个字符串数组，如果 $_ 包含数组中的任何字符串，它会通过管道传递到输出文件。

我将如何做到这一点（顺便说一句，我是 ac# 程序员破解这个 powershell 脚本，所以如果有比使用 .Contains() 更好的方法来完成我的匹配，请提示我！）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-11T22:44:14.510

试试`Select-String`。它允许一系列模式。前任：

```
$p = @("this","is","a test")
Get-Content '.\New Text Document.txt' | Select-String -Pattern $p -SimpleMatch | Set-Content FilteredContent.txt 
```

请注意，我使用`-SimpleMatch`so that`Select-String`忽略特殊的正则表达式字符。如果你想在你的模式中使用正则表达式，只需删除它。

对于单个模式，我可能会使用它，但您必须转义模式中的正则表达式字符：

```
Get-Content '.\New Text Document.txt' | ? { $_ -match "a test" } 
```

`Select-String`对于单个模式来说也是一个很棒的 cmdlet，它只是写了几个字符^^

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T22:51:33.770

有什么帮助吗？

```
$a_Search = @(
    "TextI'mLookingFor",
    "OtherTextI'mLookingFor",
    "MoreTextI'mLookingFor"
    )

[regex] $a_regex = ‘(‘ + (($a_Search |foreach {[regex]::escape($_)}) –join “|”) + ‘)’

(get-content afile) -match $a_regex 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T01:26:34.780

没有正则表达式和可能的空格：

```
$array = @("foo", "bar", "hello world")
get-content afile | where { foreach($item in $array) { $_.contains($item) } } > FilteredContent.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T23:09:23.287

```
$a = @("foo","bar","baz")
findstr ($a -join " ") afile > FilteredContent.txt 
```

# javascript - 拖放面板extjs

> ID：14822174
> 
> 赞同：1
> 
> 时间：2013-02-11T22:32:27.983
> 
> 标签：javascript, extjs, panel

我正在使用 extjs 拖动工作正常但 drop 不工作在这里是我的代码

```
draggable : {
    insertProxy : false,
    moveOnDrag: true,
    onDrag : function(e) {
        var pel = this.proxy.getEl();
        this.x = pel.getLeft(true);
        this.y = pel.getTop(true);

        var s = this.panel.getEl().shadow;
        if (s) {
            s.realign(this.x, this.y, pel.getWidth(), pel
                            .getHeight());
        }
    },
    endDrag: function(e) {
        Ext.panel.DD.prototype.endDrag.apply(this, arguments);
        console.log('dragend');
    },
}, 
```

提示：我使用的是通用面板，这意味着相同的面板具有多次生成的内容:)

# java - REST SERVICES 参数请求

> ID：14822178
> 
> 赞同：1
> 
> 时间：2013-02-11T22:32:44.213
> 
> 标签：java, web-services, jboss, restful-url

我正在努力理解 Restful webservices。我正在寻找是否有人可以帮助解决以下问题

我有一个如下声明的接口

```
@GET
@Path("xxxx")
@Produces({MediaType.APPLICATION_XML}
public Response echo(); 
```

**上面的接口有一个没有参数或参数的方法**

如果我点击**URL 之**类的。`https://wwww.abc.com/echo`它工作正常。此外，`https://wwww.abc.com/echo/k` 找不到问题 404 方法，这是真的，因为我没有**标记 PathParam**。

问题：

```
https://wwww.abc.com/echo?hello=1 
```

说状态 200 ok 并返回数据。这将是该服务的黑客攻击。 **谁能在这里帮我解决这个问题。**

# html - 覆盖不透明度样式

> ID：14822180
> 
> 赞同：0
> 
> 时间：2013-02-11T22:32:47.040
> 
> 标签：html, css, styles, opacity

我在[http://quaaoutlodge.com/content/activities](http://quaaoutlodge.com/content/activities)有一个页面 你看到有一个不透明度设置为 0.7 的半透明 div。现在我想覆盖此页面上图像的不透明度，但我似乎无法创建一个不透明度因子相对于 1.0 的样式根本不透明，但它相对于设置的 70% 不透明度和我似乎只会变得更透明，但不会更少……我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:54:30.833

如果我正确理解了这个问题，您可以在 CSS 中使用 rgba 样式而不是不透明度。

```
#contentbg {
    background:rgba(255, 255, 255, 0.7);
} 
```

只需将 255 个值替换为您希望背景的 RGB 值即可。这样，背景将是透明的，而不是图像和文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:39:21.470

我知道这是一种解决方法，但我通常只使用 Photoshop 并更改图像的不透明度，有时甚至是纯色。

# javascript - IE 9 不使用 window.open 刷新窗口，而是打开新窗口

> ID：14822181
> 
> 赞同：3
> 
> 时间：2013-02-11T22:32:53.700
> 
> 标签：javascript, jquery, internet-explorer-9, window.open

单击链接时，我有以下使用 jQuery 调用的代码行：

```
 alipayTransactionModalTrigger.click(function(e) {  
     e.preventDefault();             
     $.ajax({
        url: "doSomething",
        data: "p_locale=en-US",
        success: function(dataOut){
           if (dataOut == "hold") {
              ...do something...
           } else {   
              //open a modal over parent window
              alipayTransactionModal.dialog("open"); 
              //also open new tab/window
              var Payment = window.open("http://www.alipay.com", "Payment");                  
              Payment;                
              Payment.focus();
           }
        }
     });    
     return false;
  }); 
```

ajax 调用基本上只是检查一些值。成功呼叫正在发生，这不是问题。通过使用框架名称，我试图在多次单击链接时强制刷新新打开的窗口/选项卡。这适用于 IE 8、Chrome 和 Firefox - 用户可以多次单击链接，并且只会打开一个新窗口一次 - 后续单击只会重新加载该窗口。

但是，IE 9 不会发生这种情况 - IE 9 每次都会打开一个新窗口/选项卡。有什么方法可以在 IE 9 中强制执行此行为？或者甚至只是解释为什么在 IE 9 中发生这种情况会很好 - 它是用户级别的设置吗？据我所知，当我在`window.open()`.

我应该提到的另一件事 -`.focus()`并不总是将窗口集中在第二次/第三次/等点击上（似乎取决于浏览器和浏览器设置） - 但我已经[在这里](https://stackoverflow.com/questions/14650354/is-it-possible-to-put-focus-on-frame-after-trigger-to-open-frame-is-invoked-a-se)问过这个问题， 只要把它包括在这里，以防它是相关的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:25:01.357

从 ajax 回调中使用 window.open 打开一个窗口注定会被弹出窗口阻止程序阻止。我相信如果您禁用它，它将按预期工作。

在这里检查这个答案。[Window.open 被阻止](https://stackoverflow.com/questions/11669048/window-open-blocked)您需要为您的窗口提供正确的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:05:00.023

我没有用于测试的 IE9，但也许这有帮助

```
var openLink = (function() {
    var _popups = {};

    return function(link, name) {
        if (_popups.hasOwnProperty(name) === false) {
            _popups[name] = window.open();
        }

        _popups[name].location.href = link;
        _popups[name].focus();
    };
}()); 
```

[例子](http://jsfiddle.net/enMj6/)

# python - Python 中是否存在相当于 // 运算符的上限？

> ID：14822184
> 
> 赞同：182
> 
> 时间：2013-02-11T22:33:09.040
> 
> 标签：python, python-3.x

我发现了 Python 中的`//`运算符，它在 Python 3 中用地板除法。

有没有用 ceil 划分的运算符？（我知道`/`Python 3 中进行浮点除法的运算符。）

* * *

## 回答 #1

> 赞同：373
> 
> 时间：2013-07-07T10:30:02.063

不，但您可以使用倒置的楼层划分：¹

```
def ceildiv(a, b):
    return -(a // -b) 
```

这是有效的，因为[Python 的除法运算符执行地板除法](http://python-history.blogspot.com/2010/08/why-pythons-integer-division-floors.html)（与 C 中的整数除法截断小数部分不同）。

这是一个演示：

```
>>> from __future__ import division     # for Python 2.x compatibility
>>> import math
>>> def ceildiv(a, b):
...     return -(a // -b)
...
>>> b = 3
>>> for a in range(-7, 8):
...     q1 = math.ceil(a / b)   # a/b is float division
...     q2 = ceildiv(a, b)
...     print("%2d/%d %2d %2d" % (a, b, q1, q2))
...
-7/3 -2 -2
-6/3 -2 -2
-5/3 -1 -1
-4/3 -1 -1
-3/3 -1 -1
-2/3  0  0
-1/3  0  0
 0/3  0  0
 1/3  1  1
 2/3  1  1
 3/3  1  1
 4/3  2  2
 5/3  2  2
 6/3  2  2
 7/3  3  3 
```

## 为什么用这个而不是 math.ceil？

`math.ceil(a / b)`可以悄悄地产生不正确的结果，因为它引入了浮点错误。例如：

```
>>> from __future__ import division     # Python 2.x compat
>>> import math
>>> def ceildiv(a, b):
...     return -(a // -b)
...
>>> x = 2**64
>>> y = 2**48
>>> ceildiv(x, y)
65536
>>> ceildiv(x + 1, y)
65537                       # Correct
>>> math.ceil(x / y)
65536
>>> math.ceil((x + 1) / y)
65536                       # Incorrect! 
```

一般来说，除非您特别需要，否则完全避免浮点运算被认为是一种很好的做法。浮点数学有几个棘手的边缘情况，如果您不密切注意，它们往往会引入错误。在没有硬件 FPU 的小型/低功耗设备上，它的计算成本也可能很高。

* * *

¹在此答案的先前版本中， ceildiv 被实施为，`return -(-a // b)`但`return -(a // -b)`在评论者报告后者在基准测试中表现稍好后更改为。这是有道理的，因为被除数 ( *a* ) 通常大于除数 ( *b* )。由于 Python 使用任意精度算术来执行这些计算，因此计算一元否定`-a`几乎总是涉及与计算相同或更多的工作`-b`。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-02-11T22:35:29.347

没有与 ceil 相除的运算符。您需要`import math`并使用`math.ceil`

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2019-02-08T02:06:29.453

## 解决方案 1：使用否定将地板转换为天花板

```
def ceiling_division(n, d):
    return -(n // -d) 
```

让人想起[Penn & Teller 悬浮技巧](https://www.youtube.com/watch?v=D87DSLe4Eqw)，这“把世界颠倒过来（用否定），使用简单的地板分割（天花板和地板已经交换），然后把世界颠倒过来（再次用否定） "

## 解决方案 2：让 divmod() 完成工作

```
def ceiling_division(n, d):
    q, r = divmod(n, d)
    return q + bool(r) 
```

divmod [*()*](https://docs.python.org/3/library/functions.html#divmod)函数提供`(a // b, a % b)`整数（由于舍入误差，浮点数可能不太可靠）。`bool(r)`每当存在非零余数时，步骤 with将商加一。

## 解决方案3：在除法前调整分子

```
def ceiling_division(n, d):
    return (n + d - 1) // d 
```

将分子向上平移，以便地板除法向下舍入到预期的天花板。请注意，这仅适用于整数。

## 解决方案 4：转换为浮点数以使用 math.ceil()

```
def ceiling_division(n, d):
    return math.ceil(n / d) 
```

math.ceil [()](https://docs.python.org/3/library/math.html#math.ceil)代码很容易理解，但它会从整数转换为浮点数并返回。这不是很快，并且可能存在舍入问题。此外，它依赖于 Python 3 语义，其中“真除法”产生一个浮点数，而*ceil()*函数返回一个整数。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2013-02-11T22:54:17.300

你可以`(x + (d-1)) // d`在除以时`x`做`d`，例如`(x + 4) // 5`。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2013-02-11T23:03:45.540

你也可以随时内联

```
((foo - 1) // bar) + 1 
```

在 python3 中，这比强制浮点除法和调用 ceil() 快一个数量级，前提是您关心速度。你不应该这样做，除非你已经通过使用证明你需要这样做。

```
>>> timeit.timeit("((5 - 1) // 4) + 1", number = 100000000)
1.7249219375662506
>>> timeit.timeit("ceil(5/4)", setup="from math import ceil", number = 100000000)
12.096064013894647 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-02-11T23:59:29.667

请注意，math.ceil 的精度限制为 53 位。如果您使用大整数，您可能无法得到准确的结果。

gmpy2[库](http://code.google.com/p/gmpy/)提供了一个`c_div`使用上限舍入的函数。

免责声明：我维护 gmpy2。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-05-16T07:38:04.427

**如果您想将一个数字取消多个。它就像我们在 excel 中有 Math.celling 一样工作。**

```
def excel_celling(number=None, multiple_off=None):
    quotient = number // multiple_off
    reminder = number % multiple_off
    celling_value = quotient * multiple_off + (multiple_off, 0)[reminder==0]
    return int(celling_value)

assert excel_celling(99.99, 100) == 100, "True"
print(excel_celling(99.99, 100) , 100)
assert excel_celling(1, 100) == 100, "True"
print(excel_celling(1, 100),100)
assert excel_celling(99, 100) == 100, "True"
print(excel_celling(99, 100),100)
assert excel_celling(90, 100) == 100, "True"
print(excel_celling(90, 100),100)
assert excel_celling(101, 100) == 200, "True"
print(excel_celling(101, 100),200)
assert excel_celling(199, 100) == 200, "True"
print(excel_celling(199, 100),200)
assert excel_celling(199.99, 100) == 200, "True"
print(excel_celling(199.99, 100),200)
assert excel_celling(200, 100) == 200, "True"
print(excel_celling(200, 100),200) 
```

结果

100 100

100 100

100 100

100 100

200 200

200 200

200 200

200 200

* * *

## 回答 #8

> 赞同：-12
> 
> 时间：2020-01-25T16:36:22.383

简单的解决方案：a // b + 1

# c++ - 单个成员而不是整个班级的朋友声明？

> ID：14822187
> 
> 赞同：1
> 
> 时间：2013-02-11T22:33:19.860
> 
> 标签：c++, oop, class, c++11, friend

通常在 C++ 中，当 A 类声明与 B 类的友谊时，B 类可以完全访问 A 类的私有成员。我需要做的是允许 B 类只访问 A 类的一个私有成员，而不能访问其他任何东西。有什么办法吗，也许是 C++11 中的新东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:43:02.727

不是我知道的。如果只允许访问单个成员真的很重要，您可以将数据包装在另一个具有完全私有成员的类 ( )中`C`，使该类成为.`B``C``A`

像这样的东西：

```
template<class T> class MatesWithB
{
     friend class B;

  public:
     MatesWithB( T & val ) : data(val) {}

  private:
     T& data;
     operator T&()             { return data; }
     operator const T&() const { return data; }
};

class A
{
      // ...
      MatesWithB<int> GetPrivateThingy() { return MatesWithB(thingy); }

   private:
      int thingy;            // Shared with class B
}; 
```

类似的东西。我没有通过编译器运行它来检查。

但我只是想知道......当你发现自己需要这样做时，你的设计中的某些东西是否存在根本缺陷？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:45:01.450

假设您首先有充分的理由拥有一个朋友功能，那么我认为“相信”朋友功能不会接触它应该接触的其他东西并没有错。

请记住，如果该函数希望这样做，任何具有您的类地址[或可以以某种方式到达该地址]的函数都能够修改成员变量。它可能无法以可移植的、未来安全可靠的方式进行，但将指针转换为 a`char *`将能够修改操作系统未确定的类中的任何内容。

关于`private`, `protected`, `public`,`friend`等的要点是允许编译器检查您是否“遵守合同” - 但它可以被决心这样做的“聪明”程序员覆盖。作为这个“契约”的一部分，一个`friend`类或函数被允许接触它是一个朋友的类中的任何东西。这就是来龙去脉。如果你不想这样，那么你不应该宣布它为朋友......

# python - 不要自动放html、head和body标签，beautifulsoup

> ID：14822188
> 
> 赞同：37
> 
> 时间：2013-02-11T22:33:22.450
> 
> 标签：python, beautifulsoup, html5lib

使用 beautifulsoup 和 html5lib，它会自动放置 html、head 和 body 标签：

```
BeautifulSoup('<h1>FOO</h1>', 'html5lib') # => <html><head></head><body><h1>FOO</h1></body></html> 
```

我可以设置任何选项，关闭此行为吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-11T22:45:33.360

```
In [35]: import bs4 as bs

In [36]: bs.BeautifulSoup('<h1>FOO</h1>', "html.parser")
Out[36]: <h1>FOO</h1> 
```

这[将使用 Python 的内置 HTML 解析器解析 HTML](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#differences-between-parsers)。引用文档：

> `<body>`与 html5lib 不同，此解析器不会尝试通过添加标签来创建格式良好的 HTML 文档。与 lxml 不同，它甚至不需要添加`<html>`标签。

* * *

或者，您可以使用`html5lib`解析器并在之后选择元素`<body>`：

```
In [61]: soup = bs.BeautifulSoup('<h1>FOO</h1>', 'html5lib')

In [62]: soup.body.next
Out[62]: <h1>FOO</h1> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-14T08:02:39.060

让我们首先创建一个汤样本：

```
soup=BeautifulSoup("<head></head><body><p>content</p></body>") 
```

您可以通过指定获取 html 和 body 的子项`soup.body.<tag>`：

```
# python3: get body's first child
print(next(soup.body.children))

# if first child's tag is rss
print(soup.body.rss) 
```

你也可以使用**unwrap()**来删除 body、head 和 html

```
soup.html.body.unwrap()
if soup.html.select('> head'):
    soup.html.head.unwrap()
soup.html.unwrap() 
```

如果你加载 xml 文件，`bs4.diagnose(data)`会告诉你使用`lxml-xml`，它不会用你的汤包起来`html+body`

```
>>> BS('<foo>xxx</foo>', 'lxml-xml')
<foo>xxx</foo> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-12-17T23:23:11.597

BeautifulSoup 的这一方面一直让我很恼火。

以下是我的处理方式：

```
# Parse the initial html-formatted string
soup = BeautifulSoup(html, 'lxml')

# Do stuff here

# Extract a string repr of the parse html object, without the <html> or <body> tags
html = "".join([str(x) for x in soup.body.children]) 
```

快速细分：

```
# Iterator object of all tags within the <body> tag (your html before parsing)
soup.body.children

# Turn each element into a string object, rather than a BS4.Tag object
# Note: inclusive of html tags
str(x)

# Get a List of all html nodes as string objects
[str(x) for x in soup.body.children]

# Join all the string objects together to recreate your original html
"".join() 
```

我仍然不喜欢这个，但它完成了工作。当我使用 BS4 从 HTML 文档中过滤某些元素和/或属性时，我总是会遇到这种情况，然后再对它们进行其他操作，我需要将整个对象作为字符串 repr 而不是 BS4 解析的对象返回。

希望下次我谷歌这个时，我会在这里找到我的答案。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-11T22:42:43.387

您唯一的选择是不使用`html5lib`来解析数据。

这是该库的一个功能`html5lib`，它*修复*了缺少的 HTML，例如添加回缺少的必需元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-14T12:50:19.993

```
html=str(soup)
html=html.replace("<html><body>","")
html=html.replace("</body></html>","") 
```

将删除 html/body 标记括号。更复杂的版本还会检查startsWith、endsWith ...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-18T05:20:11.027

另一个解决方案：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup('<p>Hello <a href="http://google.com">Google</a></p><p>Hi!</p>', 'lxml')
# content handling example (just for example)
# replace Google with StackOverflow
for a in soup.findAll('a'):
  a['href'] = 'http://stackoverflow.com/'
  a.string = 'StackOverflow'
print ''.join([unicode(i) for i in soup.html.body.findChildren(recursive=False)]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-21T22:52:17.230

这是我的做法

```
a = BeautifulSoup()
a.append(a.new_tag('section'))
#this will give you <section></section> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-01T12:53:41.460

如果你想让它看起来更好，试试这个：

> BeautifulSoup([你要分析的内容] **.prettify()** )

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-07-09T17:51:33.620

从 v4.0.1 开始有一个方法`decode_contents()`：

```
>>> BeautifulSoup('<h1>FOO</h1>', 'html5lib').decode_contents()
'<h1>FOO</h1>' 
```

此问题的解决方案中的更多详细信息： [https ://stackoverflow.com/a/18602241/237105](https://stackoverflow.com/a/18602241/237105)

# mediaelement.js - 如果第一个视频源不可用，让 MediaElement.js “翻转”到第二个视频源

> ID：14822193
> 
> 赞同：1
> 
> 时间：2013-02-11T22:33:51.923
> 
> 标签：mediaelement.js

我们的应用程序正在生成这个标记：

```
<video id='player' width='512' preload='none' controls='controls'>
  <source src='http://unpredictablesite.com/notfound.mp4' type='video/mp4' />
  <source src='http://predictablesite.com/exists.mp4' type='video/mp4' />
</video> 
```

我们正在使用 MediaElement.js（版本 2.10.0）并希望播放器先尝试播放来自 unpredicatablesite.com 的源，然后如果未找到第一个，则滚动到来自 predicatablesite.com 的源。

有趣的是，在单独使用 HTML5 视频标签时滚动到下一个源似乎有效，但不适用于 MediaElement.js。我们有哪些选择才能让它发挥作用？播放器实例化上的错误：function(){} 似乎不会触发源 404 错误，因此该计划不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:38:29.390

您可以检查第一个源的状态，如果 200（这基本上意味着服务器上存在该文件），您可以动态分配视频源。如果视频不存在，则将视频指定为第二个来源。

```
 var http = jQuery.ajax({
        type:"HEAD",
        url: $('source:first').attr('src'),
        async: false
      });

  var vidsrc;

  if ( http.status == 200 ) vidsrc = $('source:first').attr('src');
  else $('source:eq(1)').attr('src'); 

  var myvid = new MediaElementPlayer('#player', {
     translationSelector: true,
     success: function (mediaElement) {

        var sources = [{ src: vidsrc, type: 'video/mp3' }];

        mediaElement.setSrc(sources);
        mediaElement.pause();
        mediaElement.load(); }
     }); 
```

# ios - 以编程方式创建在设备旋转时保持其大小的 UIView

> ID：14822201
> 
> 赞同：0
> 
> 时间：2013-02-11T22:34:30.047
> 
> 标签：ios, ipad, cocoa-touch, popup, popover

我正在以编程方式创建一个 UIView，它最终将成为我的通用应用程序的帮助气泡，但我很难让 UIView 支持设备旋转。创建我的视图时，它看起来很棒，正是我想要的，但是当我旋转设备时，我的 UIView 弹出框会扩展以填充整个屏幕，这不是我想要的。

如果有帮助，我将使用带有自动布局的 iOS 6 来处理其他情节提要控件。

有人可以解释为什么 iOS 在设备旋转时将我的弹出框调整为全屏吗？

我还考虑为其添加一些约束，但认为这更多的是用于子层而不是弹出视图本身。

我正在使用的代码是：

```
customView = [[UIView alloc] initWithFrame:CGRectMake(20, 20, 200, 200)];

customView.layer.cornerRadius = 15;
customView.layer.borderWidth = 1.5f;
customView.backgroundColor = [UIColor blackColor];
[customView setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight];

[self.tableView.superview addSubview:customView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:44:00.000

```
[customView setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight]; 
```

当父视图更改时，Flexiblewidth/height 自动调整大小掩码会调整 UIView 的大小。当视图旋转时，您的超级视图的框架会更改，并且视图将按比例更改宽度和高度。如果您想要相同的大小，请删除该行，如果您想要在视图周围使用相同的填充

```
 [customView setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleBottomMargin]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:06:09.163

从 iOS6 开始，苹果鼓励使用自动布局，因为代码更具描述性并且更易于管理/调试。

例如。在自动布局中做同样的事情

```
 UIView *customView = [[UIView alloc] init];
  customView.backgroundColor = [UIColor blackColor];
  customView.layer.cornerRadius = 15;
  customView.layer.borderWidth = 1.5f;
  [customView setTranslatesAutoresizingMaskIntoConstraints:NO];
  [self.tableView.superview addSubview:customView];

  NSArray *arr;

  //horizontal constraints
  arr = [NSLayoutConstraint constraintsWithVisualFormat:@"|-20-[customView(200)]"
                                                         options:0
                                                         metrics:nil
                                                           views:NSDictionaryOfVariableBindings(customView)];
  [self.tableView.superview addConstraints:arr];

  //vertical constraints
  arr = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-20-[customView(200)]"
                                                options:0
                                                metrics:nil
                                                  views:NSDictionaryOfVariableBindings(customView)];
  [self.tableView.superview addConstraints:arr]; 
```

# jquery - 如何关闭 JQuery Toogle 中的其他功能

> ID：14822203
> 
> 赞同：0
> 
> 时间：2013-02-11T22:34:35.003
> 
> 标签：jquery

我在用

```
$(".archived").click(function(){
    $(".archivedtable").toggle();
}); 
```

我有一堆表将根据选择的导航链接打开，所以如果他们选择 1，将打开 1。可以说他们选择 2，2 也会打开，但 1 仍然打开。所以我想知道如何做到这一点，这样 1 会消失，而 2 会成为新的活跃的。这有意义吗？

更新：

```
if ($paid == 1 && $securitylevel == 1 && $csvuser != 1){

    $sql = "SELECT firstname, lastname, email, phone, username, password, status, statuschangedate FROM csvdata WHERE memberview =:username ORDER BY lastname";
    $sth= $DBH->prepare($sql);
    $sth->execute(array(':username' => $username));
    $i=0;
    echo "<table class='nonothertable'> 
    <tr class='firsttr' style='background:gray;'>
    <td>First Name </td>
    <td>Last Name </td>
    <td>Email </td>
    <td>Phone </td>
    <td>Username </td>
    <td>Password </td>
    <td>Status </td>
 <td>Status Change Date</td>
    <td>#</td>
     </tr>
    ........

     echo "
      </table>";
}
 <script>
$(".nonother").click(function(){
    $(".nonothertable").toggle();
});
</script> 
```

因此，这些由 PHP 填充的表格，我有很多表格，在每个表格之后都是您在上面看到的脚本，它将打开和关闭特定的表格。我想知道如何，一旦我点击一个，如果有另一个打开，一旦关闭。

它们都在一个 div 中，有些嵌套在另一个 div 中。都有相同的父母。

笔记：

请注意，每个填充的表都有不同的名称和不同的属性来访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:42:34.150

```
var $tables = $("table");
var $butons = $(".tableSelector");

$butons.click(function(){
    var $t = $(this);
    var $currentTable = $("."+$t.attr("class")+"table").show();
    $tables.not($currentTable).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:46:14.257

当您控制打开和表生成的链接时，我认为您的代码中必须有许多 JS 调用。只需给表一个公共类和不同的名称，并根据表名创建链接。

我在您的示例中没有看到按钮（可点击元素）生成代码，因此您可以执行以下操作：

在循环内部，mytableX 是一个唯一名称（将 X 替换为数据库 ID 或唯一编号：

```
echo "<a href='#' class='togglers'>Open table X</a>";
echo "<table class='nonothertable' id='mytableX'>"
....
echo "</table>"; 
```

默认情况下应该隐藏表格，使用 CSS

```
.nonothertable { display:none; } 
```

然后，只需调用一次：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".togglers").click(function(){
        $(".nonothertable").hide(); // Hide all tables
        $(this).next('.nonothertable').show(); // Show the table next to the link we just clicked
        return false; // Avoid page jumps
    });    
});
</script> 
```

每次单击时，我们都会隐藏所有表格，在链接旁边显示一个，并避免页面跳转。只需一个 JS 调用无限数量的表。

工作演示：http: [//jsfiddle.net/SHcjQ/](http://jsfiddle.net/SHcjQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:29:31.520

好的，对于您的特定代码

只需添加

```
$("table").not(".current-one").hide(); 
```

在你的 .toggle();

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T22:37:54.637

选择一个数字时，我会通过关闭所有表的循环运行，然后我将打开所选表。

# ruby-on-rails - 应用程序生成器服务器意外退出：检测到意外的文件结尾

> ID：14822204
> 
> 赞同：0
> 
> 时间：2013-02-11T22:34:38.273
> 
> 标签：ruby-on-rails, ruby, nginx, passenger, ruby-1.8

我对 Rails 没有太多经验。回到周三，我被告知要升级 Redmine，并升级插件。我已经为此工作了 3 天，看到 Rails 还需要走多远才能进入现代包管理时代，我感到很震惊。

我在 Centos 6.3 上。起初我升级到 Ruby 1.8.7，因为那是 Centos 存储库中的内容，这足以升级 Redmine。但是当我使用 redmine_backlogs 插件时，我意识到我需要一个更新版本的 Ruby。在 Centos 上安装 Ruby 1.9.3 并不容易。在得到有用的东西之前，我尝试了 4 种不同的教程。我有很多奇怪的路径，我必须手动修复。

我用Passenger尝试了Nginx，但无法让它工作，所以后来我做了Phusion Passenger Standalone。

现在我运行了 Rails 3.2.11。鉴于过去几周 Rails 领域的所有安全问题，我想我必须修补这个问题。

我刚刚升级到最新的Redmine，应该是2.2。

我认为我的 Nginx 使用的 Ruby 版本与我想要的不同。如果我这样做：

`/opt/nginx/sbin/nginx -V`

然后我看到了这个：

```
 built by gcc 4.4.6 20120305 (Red Hat 4.4.6-4) (GCC)            
    TLS SNI support enabled                                                        
    configure arguments: --prefix=/opt/nginx --with-http_ssl_module --with-http_gzip_static_module --with-cc-opt=-Wno-error --with-pcre=/tmp/root-passenger-14193/pcre-8.31 --add-module=/usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/ext/nginx 
```

看起来它使用的是 Ruby 1.8 而不是 Ruby 1.9.3，是吗？

如果我这样做：

`/opt/nginx/sbin/nginx -s stop`

接着：

`/opt/nginx/sbin/nginx`

我重新启动 nginx，但如果我在浏览器中刷新，我会得到：

```
Passenger encountered the following error:
The application spawner server exited unexpectedly: Unexpected end-of-file detected.

Exception class:
PhusionPassenger::Rack::ApplicationSpawner::Error
Backtrace:
#   File    Line    Location
0   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb    135 in `start'
1   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb   253 in `spawn_rack_application'
2   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server_collection.rb  132 in `lookup_or_add'
3   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb   246 in `spawn_rack_application'
4   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server_collection.rb  82  in `synchronize'
5   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server_collection.rb  79  in `synchronize'
6   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb   244 in `spawn_rack_application'
7   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb   137 in `spawn_application'
8   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb   275 in `handle_spawn_application'
9   /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb 357 in `__send__'
10  /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb 357 in `server_main_loop'
11  /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb 206 in `start_synchronously'
12  /usr/lib64/ruby/gems/1.8/gems/passenger-3.0.19/helper-scripts/passenger-spawn-server    99 
```

我从[这里](https://groups.google.com/forum/#!msg/jobsworth/u791nSPiJPs/4m_M1km7ZusJ)看到了与此问题相关的评论：

> 在检查了几个安装程序（上帝保佑虚拟机和快照）后，我解决了这个问题。普通用户帐户和 apache 用户使用另一个 ruby​​ 版本（1.8）然后 root 使用（1.9.3）。现在一切正常。

但我不知道如何在我的服务器上修复它。

我试图查看我的 Nginx 日志：

`tail /var/log/nginx/error.log`

但是最近的错误是从 2 月 5 日开始的，所以我怀疑一旦我切换到使用 Phusion Passenger 后，错误日志被移动到了一个新位置，但我不知道如何找到 Nginx 存储错误日志的位置，现在 Phusion Passenger 正在控制它。有什么建议么？

**更新：**

我在这里找到了新的 Nginx 错误日志：

`/opt/nginx/logs/error.log`

错误是：

```
2013/02/11 17:02:15 [notice] 25295#0: signal process started
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

2013/02/11 17:06:23 [notice] 25360#0: signal process started
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

2013/02/11 17:10:47 [notice] 25433#0: signal process started
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

/usr/local/rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

/usr/local/rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

2013/02/11 17:13:35 [notice] 25522#0: signal process started
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

2013/02/11 17:16:31 [notice] 25598#0: signal process started
/usr/local/rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/lib/mysql2/mysql2.so: [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

如果我这样做：

`echo $PATH`， 然后：

```
/usr/local/rvm/gems/ruby-1.9.3-p385/bin:/usr/local/rvm/gems/ruby-1.9.3-p385@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p385/bin:/usr/local/rvm/bin:/sbin:/bin:/usr/sbin:/usr/bin 
```

从[乘客](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#_passenger_ruby_lt_filename_gt)文档页面：

> 默认值为 ruby​​，表示将根据 PATH 环境变量查找 Ruby 解释器。

所以你会认为它会使用 ruby​​ 1.9.3 而不是 1.8

如果我查看`config.ru`，我会看到：

```
require::File.expand_path('../config/environment',  __FILE__)
run RedmineApp::Application 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:34:57.410

## Nginx 的 Phusion 乘客

Ruby 解释器完全由[passenger_ruby](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#_passenger_ruby_lt_filename_gt)指令决定。没有其他的。更改它，它将按预期工作。即使您最初使用属于不同 Ruby 版本的 RubyGems 安装了 Phusion Passenger，这仍然有效。

在 4.0.0 之前的版本中，整个 Nginx 实例仅支持单个 Ruby 版本，因此`passenger_ruby`可能只出现在全局服务器配置中。

从[4.0.0 版本](http://blog.phusion.nl/2013/03/05/phusion-passenger-4-0-release-candidate-4/)（目前处于候选版本中）开始，Phusion Passenger 在同一个 Nginx 实例中支持多个 Ruby 或 Python 解释器。因此，从 4.0.0 版本开始，此选项可能出现在以下位置：

*   在“http”配置块中。
*   在“服务器”配置块中。
*   在“位置”配置块中。
*   在“if”配置范围内。

`passenger_ruby`块中的`http`- 即输出的块 -`passenger-install-nginx-module`用作 Ruby Web 应用程序的默认 Ruby 解释器。不过，您不必*在*块中指定 a `passenger_ruby`，`http`因为默认情况下`ruby`使用`$PATH`.

如果您想为该 Web 应用程序使用不同的 Ruby 解释器，也可以覆盖`passenger_ruby`或在特定上下文中。`passenger_python`例如：

```
http {
    passenger_root ...

    # Use Ruby 1.8.7 by default.
    passenger_ruby /usr/bin/ruby1.8
    # Use Python 2.6 by default.
    passenger_python /usr/bin/python2.6

    server {
        # This Rails web app will use Ruby 1.8.7
        listen 80;
        server_name www.foo.com;
        root /webapps/foo/public;
    }

    server {
        # This Rails web app will use Ruby 1.9.3, as installed by RVM
        passenger_ruby /usr/local/rvm/wrappers/ruby-1.9.3/ruby;

        listen 80;
        server_name www.bar.com;
        root /webapps/bar/public;

        # If you have a web app deployed in a sub-URI, customize
        # passenger_ruby/passenger_python inside a `location` block.
        # The web app under www.bar.com/blog will use JRuby 1.7.1
        passenger_base_uri /blog;
        location /blog {
            passenger_ruby /usr/local/rvm/wrappers/jruby-1.7.1/ruby;
        }
    }

    server {
        # This Flask web app will use Python 3.0
        passenger_python /usr/bin/python3.0;

        listen 80;
        server_name www.baz.com;
        root /webapps/baz/public;
    }
} 
```

## Phusion 乘客独立

Ruby 解释器完全由您用来启动`passenger`命令的 Ruby 解释器决定。更改它，它将按预期工作。即使您最初使用属于不同 Ruby 版本的 RubyGems 安装了 Phusion Passenger，这仍然有效。

# akka - 如何在java中获取已经创建的TypedActor的实例

> ID：14822207
> 
> 赞同：1
> 
> 时间：2013-02-11T22:34:54.863
> 
> 标签：akka, typedactor

我使用这样的代码：

用户角色首先在代码中的某处创建，如下所示：

```
TypedActor.get(actorSystem).typedActorOf(new TypedProps<UserActor>(IUserActor.class, new Creator<UserActor>() {
        @Override
        public UserActor create() throws Exception {
            return new UserActor(userId);
        }
    }), userId); 
```

之后，我试图获取它的一个实例（就像 UntypedActors 的 actorFor 一样）：

```
ActorRef userActorRef = actorSystem.actorFor("akka://actors/user/" + userId));
UserActor userActor = TypedActor.get(actorSystem).typedActorOf(new TypedProps<UserActor>(UserActor.class), userActorRef);

// exception is here:
userActor.gotRequest(msg); 
```

但是一旦我在 userActor 上调用一个方法，我就会得到

```
java.lang.ClassCastException: $Proxy5 cannot be cast to com.lutshe.akka.actors.UserActor
    at com.lutshe.akka.AkkaMessagesHandler.process(AkkaMessagesHandler.java:47)
    at com.lutshe.tcp.server.TestMessageHandler.messageReceived(TestMessageHandler.java:31)
    at com.lutshe.tcp.server.TestMessageHandler.messageReceived(TestMessageHandler.java:14)
    at io.netty.channel.ChannelInboundMessageHandlerAdapter.inboundBufferUpdated(ChannelInboundMessageHandlerAdapter.java:69)
 ... 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:44:28.307

Akka 返回接口的代理，而不是实现，你应该这样做：

```
 IUserActor userActor = TypedActor.get(actorSystem).typedActorOf(new TypedProps<IUserActor>(UserActor.class), userActorRef); 
```

# image - 图像捕捉和处理

> ID：14822209
> 
> 赞同：0
> 
> 时间：2013-02-11T22:34:57.160
> 
> 标签：image, audio

我是这里的菜鸟，所以想先打个招呼:)

我能问个问题吗。我对 C 和 C++ 没问题（我知道不同的野兽），想知道有人能提出一个很好的信息来源来将声波转化为图像吗？

我的问题是这个。您如何捕获诸如波浪之类的东西（您知道图像或胎儿之类的东西）并将其转换为实际图像。我在互联网上看过，真的很好奇这是怎么发生的。我有点怀疑这与他们放在女性肚子上的换能器有关。

我的下一个问题是他们如何捕捉回声/波并将其转换为图像 - 我怀疑它是用 C/C++ 之类的小而快的东西编程的。有人知道算法吗？

感谢大家花时间阅读和任何答案/链接/参考

再次很高兴来到这里:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:02:05.817

这个问题是关于处理（编程环境）*和*数字信号处理（即DSP）

首先，让我向您介绍您最好的新朋友：快速傅里叶变换。[我为你找到了Paul Bourke](http://paulbourke.net/miscellaneous/dft/)的一篇很棒的介绍性文章。

如果您想更深入一点，请查看：[“DFT “à Pied”：一天之内掌握傅里叶变换”](http://www.dspdimension.com/admin/dft-a-pied/)。

FFT 的数学运算。并不像您想象的那么难，并且对幕后发生的事情有基本的了解将帮助您以您选择使用的任何语言正确实现一个库（其中有很多）：C++ 或处理（爪哇）。看看这篇文章，你的大脑会因此而爱上你。

这是另[一篇关于 FFT 的文章：](http://sharp.bu.edu/~slehar/fourier/fourier.html)

我的一位伟大的教授在 OpenFrameworks (C++) [https://github.com/kylemcdonald/ofxFft](https://github.com/kylemcdonald/ofxFft)中写了一个令人兴奋的 FFT 实现，如果您目前（或有兴趣获得）OpenFrameworks 启动并运行，那绝对值得您花时间。

但是，如果您想直接在处理中使用 FFT 代码，Minim 是一个具有 FFT 功能的库，您可以在[此处阅读。](http://code.compartmental.net/minim/javadoc/ddf/minim/analysis/FFT.html)

祝你好运！

# xaml - WinRT XamlControl 预览图像

> ID：14822211
> 
> 赞同：0
> 
> 时间：2013-02-11T22:35:05.267
> 
> 标签：xaml, windows-runtime, preview

我有一个 C# WinRT MetroApp 项目...

我有一个使用 GridView 实现的项目概述，如下所示： ![概述](../Images/d6b49508191e7d91685b87ad5133cac7.png)

如果我单击这些项目之一，我会得到该项目的 DetailView，如下所示：![细节](../Images/b397ed54d153a7d052b536b2e1a482df.png)

DetailView 的内容是一个自定义 XAML 控件。我确实想在概览项目中对我的每个 DetailView 进行小预览。

我的问题是：在 WinRT 中执行此操作的最佳方法是什么？如何？是否可以在 winRT 中呈现我的自定义 XAML 控件的图像？

请帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:02:32.317

除非您有相当基本的布局，否则没有内置或其他简单的方法可以将 XAML 控件呈现到图像。如果这些控件的数量有限或者控件的状态不断变化并且您没有太多这些控件，您可以将控件的图标与应用程序打包在一起 - 您可以简单地将控件的缩放版本放入你`GridViewItem`的

# ios - 帧大小属性返回零

> ID：14822216
> 
> 赞同：0
> 
> 时间：2013-02-11T22:35:34.507
> 
> 标签：ios, objective-c, xcode

我正在使用几个不同的视图，一个是图像视图，另一个是标签。我必须在代码中使用帧大小值（宽度和高度），但它们返回的值为零。当我查看故事板中的设置时，显然不是这种情况，但是当我将值记录到控制台时，它们为零。有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:42:17.150

您的插座未连接，或者您的视图尚未实例化，因为您在视图生命周期中太早了。尝试您的日志语句`viewDidLoad`并`viewDidAppear`进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:57:47.773

frame 和 bounds 的区别在于 frame 用 superview 的坐标表示。由于您只需要大小，因此如果视图没有超级视图，则不应考虑它的框架，而是边界：

```
@property(nonatomic) CGRect bounds; 
```

参考：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

# java - 如何在 JFreechart 中获得点的菱形

> ID：14822218
> 
> 赞同：3
> 
> 时间：2013-02-11T22:35:43.963
> 
> 标签：java, swing, jfreechart

我需要在 JFreechart 中的 Timeseries 上获得钻石形状，但我无法做到。有人可以指导一下应该在下面的代码中添加什么代码来实现菱形点以及如何更改线条的颜色吗？

（该程序使用 rs 和 stmt 以及其他从 DB 派生并在其他地方定义的东西。该程序现在可以正常工作，唯一的问题是它看起来超级无聊。）

```
TimeSeries s1 = new TimeSeries("Technology", Day.class);
TimeSeries s2 = new TimeSeries("Entertainment", Day.class);
TimeSeries s3 = new TimeSeries("Soap", Day.class);
TimeSeries s4 = new TimeSeries("Music", Day.class);
TimeSeries s5 = new TimeSeries("Native", Day.class);
TimeSeries s6 = new TimeSeries("Speciality", Day.class);
TimeSeries s7 = new TimeSeries("Science", Day.class);

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Date plotdate;

if (!(combo_individualid.getModel().getSize() == 0)) {
    String sql = ""
            + "SELECT * "
            + "FROM   `customerbasetag` "
            + "WHERE  `individual_idindividual` =? ";

    try {
        stmt = conn.prepareStatement(sql);
        stmt.setString(1, combo_individualid.getSelectedItem().toString());
        rs = stmt.executeQuery();

        while (rs.next()) {

            try {
                plotdate = sdf.parse(rs.getString("session_date"));

                s1.add(new Day(plotdate), new Integer(Integer.parseInt(rs.getString("technology"))));
                s2.add(new Day(plotdate), new Integer(Integer.parseInt(rs.getString("entertainment"))));
                s3.add(new Day(plotdate), new Integer(Integer.parseInt(rs.getString("soap"))));
                s4.add(new Day(plotdate), new Integer(Integer.parseInt(rs.getString("music"))));
                s5.add(new Day(plotdate), new Integer(Integer.parseInt(rs.getString("native"))));
                s6.add(new Day(plotdate), new Integer(Integer.parseInt(rs.getString("speciality"))));
                s7.add(new Day(plotdate), new Integer(Integer.parseInt(rs.getString("science"))));

            } catch (ParseException ex) {
                JOptionPane.showMessageDialog(null,
                    "Parse Exception" + ex.getMessage());
            }
        }
    } catch (SQLException ex) {
        JOptionPane.showMessageDialog(null,
            "Error During Session Select" + ex.getMessage());
    }

    /*NOTE: Chart plotting here*/
    TimeSeriesCollection dataset = new TimeSeriesCollection();
    dataset.addSeries(s1);
    dataset.addSeries(s2);
    dataset.addSeries(s3);
    dataset.addSeries(s4);
    dataset.addSeries(s5);
    dataset.addSeries(s6);
    dataset.addSeries(s7);
    JFreeChart chart = ChartFactory.createTimeSeriesChart(
        "TS Chart", "Date", "Value", dataset, true, true, false);

    XYPlot plot = (XYPlot) chart.getPlot();
    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);
    plot.setAxisOffset(new RectangleInsets(5.0, 5.0, 5.0, 5.0));
    plot.setDomainCrosshairVisible(true);
    plot.setRangeCrosshairVisible(true);

    ChartFrame f = new ChartFrame("Individual Choice Evaluation", chart);
    f.setVisible(true);
    f.setSize(800, 600);
    f.setLocationRelativeTo(null);

} else {

    JOptionPane.showMessageDialog(null, "Please Select an Individual");
} 
```

我已经更新了代码，但它仍然不能正常工作，我不断地拿回旧图表。继承人的代码。

```
TimeSeriesCollection dataset = new TimeSeriesCollection();
            dataset.addSeries(s1);
            dataset.addSeries(s2);
            dataset.addSeries(s3);
            dataset.addSeries(s4);
            dataset.addSeries(s5);
            dataset.addSeries(s6);
            dataset.addSeries(s7);
            JFreeChart chart = ChartFactory.createTimeSeriesChart("Time Series Chart for Individual id: "+combo_individualid.getSelectedItem().toString() , "Date", "Value", dataset, true, true, false);

            Shape theShape = ShapeUtilities.createDiamond(1);

            XYPlot plot = (XYPlot) chart.getPlot();
            plot.setBackgroundPaint(Color.lightGray);
            plot.setDomainGridlinePaint(Color.white);
            plot.setRangeGridlinePaint(Color.white);
            plot.setAxisOffset(new RectangleInsets(5.0, 5.0, 5.0, 5.0));
            plot.setDomainCrosshairVisible(true);
            plot.setRangeCrosshairVisible(true);

            XYItemRenderer renderer = plot.getRenderer();

            renderer.setSeriesShape(0, theShape);
            renderer.setSeriesShape(1, theShape);
            renderer.setSeriesShape(2, theShape);
            renderer.setSeriesShape(3, theShape);
            renderer.setSeriesShape(4, theShape);
            renderer.setSeriesShape(5, theShape);
            renderer.setSeriesShape(6, theShape);

            ChartFrame f = new ChartFrame("Individual Choice Evaluation", chart);
            f.setVisible(true);
            f.setSize(800, 600);
            f.setLocationRelativeTo(null); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T23:37:42.310

[`ShapeUtilities.createDiamond()`](http://www.jfree.org/jcommon/api/org/jfree/util/ShapeUtilities.html#createDiamond%28float%29)可以打造菱形；您可以应用它，如本[示例](https://stackoverflow.com/a/6669529/230513)中所示的不同`Shape`.

附录：默认情况下，`createTimeSeriesChart()`创建一个`XYLineAndShapeRenderer`您可以修改的，如下所示和[此处](https://stackoverflow.com/a/11385600/230513)。

```
XYPlot plot = (XYPlot) chart.getPlot();
XYLineAndShapeRenderer r = (XYLineAndShapeRenderer) plot.getRenderer();
r.setSeriesShape(0, ShapeUtilities.createDiamond(5));
r.setSeriesShapesVisible(0, true); 
```

![图片](../Images/6cc4dc35ce5e2da0cbf4485baa725c0a.png)

[SSCCE](http://sscce.org/)：

```
import java.awt.Dimension;
import java.util.Random;
import javax.swing.JFrame;
import org.jfree.chart.*;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.time.Day;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.data.xy.XYDataset;
import org.jfree.util.ShapeUtilities;

/** @see https://stackoverflow.com/a/14822991/230513 */
public class Test {

    private static final int N = 16;
    private static final Random random = new Random();

    private static XYDataset createDataset() {

        final TimeSeries series = new TimeSeries("Data");
        Day current = new Day();
        for (int i = 0; i < N; i++) {
            series.add(current, Math.abs(random.nextGaussian()));
            current = (Day) current.next();
        }
        return new TimeSeriesCollection(series);
    }

    private static JFreeChart createChart(final XYDataset dataset) {
        JFreeChart chart = ChartFactory.createTimeSeriesChart(
            "Test", "Day", "Value", dataset, false, false, false);
        XYPlot plot = (XYPlot) chart.getPlot();
        XYLineAndShapeRenderer r = (XYLineAndShapeRenderer) plot.getRenderer();
        r.setSeriesShape(0, ShapeUtilities.createDiamond(5));
        r.setSeriesShapesVisible(0, true);
        return chart;
    }

    public static void main(String[] args) {

        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        XYDataset dataset = createDataset();
        JFreeChart chart = createChart(dataset);
        ChartPanel chartPanel = new ChartPanel(chart) {

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(630, 480);
            }
        };
        f.add(chartPanel);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

# maven - Maven 在部署时不使用 filePermissions 和 directoryPermissions

> ID：14822221
> 
> 赞同：1
> 
> 时间：2013-02-11T22:35:53.960
> 
> 标签：maven, maven-3

我在 UNIX 下的一个公共共享 NFS 目录上设置 Maven。在站点 settings.xml 中，我们有 filePermissions 和 directoryPermissions 设置，如下所示：

```
<servers>
    <server>
        <id>release.repo</id>
        <filePermissions>666</filePermissions>
        <directoryPermissions>777</directoryPermissions>
        <configuration></configuration>
    </server>
    <server>
        <id>snapshot.repo</id>
        <filePermissions>666</filePermissions>
        <directoryPermissions>777</directoryPermissions>
        <configuration></configuration>
    </server>
</servers> 
```

我们也在使用配置文件，所以在配置文件部分，我们有这样的内容：

```
<profile>
        <id>linux64</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <repositories>
            <repository>
                <id>snapshot.repo</id>
                <name>Snapshot Repository</name>
                <layout>default</layout>
                <releases>
                    <enabled>false</enabled>
                    <updatePolicy>daily</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                    <updatePolicy>always</updatePolicy>
                </snapshots>
                <url>file:///path/maven_repo_snapshots</url>
            </repository>
            <repository>
                <id>release.repo</id>
                <name>Release Repository</name>
                <layout>default</layout>
                <releases>
                    <enabled>true</enabled>
                    <updatePolicy>daily</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                    <updatePolicy>always</updatePolicy>
                </snapshots>
                <url>file:///path/maven_repo</url>
            </repository>
        </repositories> 
```

在我的用户 settings.xml 我有这样的东西：

```
<settings>
<activeProfiles>
    <activeProfile>linux64</activeProfile>
</activeProfiles> 
```

存储库 ID 与服务器 ID 匹配。但是，当我们实际运行部署时，并没有使用 filePermissions 和 directoryPermissions。

当我们运行 help:effective-pom、help:effective-settings 和 help:active-profiles 时，一切看起来都正常。我有什么明显的遗漏吗？

mvn -v 的输出 =

```
$mvn -v
Apache Maven 3.0.4 (r1232337; 2012-01-17 02:44:56-0600)
Maven home: /path/apache-maven-3.0.4
Java version: 1.6.0_38, vendor: Sun Microsystems Inc.
Java home: /usr/java/jdk1.6.0_38/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "2.6.18-308.24.1.el5", arch: "amd64", family: "unix" 
```

我们计划在某个时候研究像 Nexus 这样的存储库，但我们希望通过不添加另一个基础设施来简单地进行过渡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:13:12.060

由于各种原因，我们决定设置一个 Nexus 服务器，因为我们永远无法获得文件权限以按文档说明工作。

# spring - 记录没有 JSESSIONID 的用户的每次唯一访问

> ID：14822230
> 
> 赞同：1
> 
> 时间：2013-02-11T22:36:30.073
> 
> 标签：spring, logging, spring-security

我正在尝试在我的应用程序日志中记录一个唯一标识符，该标识符将清楚地跟踪 Spring MVC 应用程序中用户的每次访问。目的是将此标识符存储在 cookie 中，并 grep 查找与该标识符匹配的日志。当 QA 或客户支持遇到应用程序问题时，他们将提供来自 cookie 的标识符的值，应用程序开发团队可以使用它来搜索和排除故障。

我不想使用 JSESSIONID，因为它可能被劫持。我目前正在记录时间戳和用户 ID，但是当用户可以同时从多个浏览器登录时，这无济于事。

Spring 是否提供任何功能来支持这一点？如果没有，有没有办法仍然使用 JSESSIONID 但防止会话劫持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:04:11.803

获取会话 ID (jsessionid) 并使用 SHA-1 或类似方法对其进行哈希处理。从理论上讲，哈希是不可逆的，但在输入是唯一的情况下是唯一的。

我们使用 a`ServletFilter`将此值存储在 MDC (slf4j/log4j) 中，然后允许我们在日志模式中使用该值。示例：http: [//veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/](http://veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/)

# php - 更快的 amfPHP 替代品

> ID：14822237
> 
> 赞同：0
> 
> 时间：2013-02-11T22:37:09.470
> 
> 标签：php, json, amf, amfphp

我有点震惊 amfPHP 的速度有多慢。我比较了 AMF 和 JSON 请求的整体性能。

两种方式都是从请求开始到在 Actionscript 站点上具有强类型数据的情况下测量的。

JSON 方式总是快两倍以上。

我通常在 Java 后端上运行，但现在我被迫使用 PHP。

有人知道在 PHP 世界中对 AMF 的更好支持吗？FlashBuilder 带有 Zend AMF 的集成支持。但它和 amfPHP 一样慢。

寻求帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:16:55.893

您将可以使用支持的 Apache Thrift、as3 和 php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:21:01.140

AMF is complex, so it's inevitable that parsing it in PHP is slow. Take a look at adding a PHP extension that does it in C: [http://baguetteamf.com](http://baguetteamf.com) . (disclaimer, I created that project)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T21:09:17.400

有一个免费、快速且极其可靠的 PHP AMF3 扩展：

[http://neoxic.me/php-amf3/](http://neoxic.me/php-amf3/)

它提供了两个本机函数 - amf3_encode() 和 amf3_decode()。没有混乱，纯粹的速度！

# oracle - 在为记录插入 null 值时如何使用 NVL 函数

> ID：14822239
> 
> 赞同：0
> 
> 时间：2013-02-11T22:37:12.640
> 
> 标签：oracle

我有一个场景，我需要在表中插入一个 NULL 值。有人可以帮助我，我该怎么做。这不仅是在寻找使用 NVL 功能，而且任何东西都值得赞赏。

谢谢，库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:19:22.323

听起来像你想要的`NVL2`

IE：

```
NVL2(your_var, 'val if not null', 'val if null') 
```

或者也可以使用 case/decode

例如：

```
SQL>   var a varchar2(11)
SQL> exec :a := 'not null';

PL/SQL procedure successfully completed.

SQL> select nvl2(:a, 'c', 'b') "nvl2",
  2         case when :a is null then 'b' else 'c' end "case",
  3         decode(:a, null, 'b', 'c') "decode"
  4    from dual;

n c d
- - -
c c c

SQL> exec :a := '';

PL/SQL procedure successfully completed.

SQL> select nvl2(:a, 'c', 'b') "nvl2",
  2         case when :a is null then 'b' else 'c' end "case",
  3         decode(:a, null, 'b', 'c') "decode"
  4    from dual;

n c d
- - -
b b b 
```

因此，如果您希望该值不为空，则为原样，如果为空，则需要硬编码：

```
nvl2(age, age, 42) 
```

因此，如果`age`为 null，则为 42，否则为`age`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:42:34.283

```
Insert into mytable (ID, Name, Age) values (1,'John Smith', Null); 
```

# javascript - 如何检查（子）字符串是javascript中的数字？

> ID：14822247
> 
> 赞同：0
> 
> 时间：2013-02-11T22:37:49.893
> 
> 标签：javascript

SO上有很多关于这个问题的答案，但没有关于javascript的答案......

如何检查此字符串的前 16 个字符`20130203003002od`是否为数字？这意味着子字符串不包含任何字母或任何其他字符，但数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T22:39:57.420

> 如果前 16 个字符 ... [不包含] 任何字母或任何其他字符，但数字

```
/^\d{16}/.test(str); 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:47:13.327

You could test the string against a regular expression like so:

```
var data = "20130203003002od";
var matched = data.match("[0-9]{16}.*"); 
```

If matched is NULL, that means that the first 16 characters are not a number.

# java - System.exit 在 OpenJDK 7 / FreeBSD 上似乎需要很长时间

> ID：14822254
> 
> 赞同：1
> 
> 时间：2013-02-11T22:38:25.283
> 
> 标签：java, freebsd, openjdk

我在 Java 下运行的 Java 子进程的性能存在问题，在 FreeBSD 9.0-RELEASE i386 上运行。

System.exit()，对于这个程序，运行大约需要 2.6 秒。我不知道为什么。在 Windows 上需要 0.025 秒。**更新：**它在 OpenJDK 6 上也运行得更快。

在 ktrace 下运行 OpenJDK7 会在关闭期间显示以下大量序列：

26795 java 1.808597 CALL _umtx_op(0x2831e068,0xf,0,0,0xbf7a9870)
26795 java 1.838640 RET _umtx_op -1 errno 60 操作超时

我怎样才能弄清楚程序在这里试图做什么？或者，有没有简单的解决方法或方法来解决这个问题？从网络搜索来看，这个问题似乎经常出现在 FreeBSD 的操作系统级别，但我仍在分析我发现的内容（并尝试学习 libthr 等）。

除了打印时间戳之外，我没有添加任何关闭挂钩，系统没有添加关闭挂钩，没有要删除的文件，也没有 runFinalizersOnExit。系统似乎将时间花在了本地方法 java.lang.Shutdown.halt0 中，我仍在尝试分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:04:46.383

操作数 0xf 是 UMTX_OP_WAKE_PRIVATE（参见 参考资料`/usr/src/sys/sys/umtx.h`）。这试图唤醒内核线程，但失败了。

现在无法说它*为什么会失败。*这可能是java中的死锁。

# python - 全局设置 linenothreshold

> ID：14822255
> 
> 赞同：1
> 
> 时间：2013-02-11T22:38:26.087
> 
> 标签：python, python-sphinx, restructuredtext

选项[linenothreshold](http://sphinx-doc.org/latest/markup/code.html#line-numbers)允许控制代码块必须具有的最小行数，以便为其生成行号。我希望能够在全球范围内指定这个（例如 in `conf.py`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:04:00.750

可以添加的内容之一`conf.py`是

> ### [rst_prolog](http://sphinx-doc.org/latest/config.html#confval-rst_prolog)
> 
> 一个 reStructuredText 字符串，将包含在每个读取的源文件的开头。*1.0 版中的新功能*

所以如果你添加类似的东西

```
rst_prolog = '''
.. highlight:: python
   :linenothreshold: 0

''' 
```

那会做你想做的事。

是的，它确实`rst_prolog`不是`rst_prologue`。

# performance - 刷新 ARM (Tegra 3) 上的 L2 缓存意外地提高了性能

> ID：14822275
> 
> 赞同：2
> 
> 时间：2013-02-11T22:39:49.937
> 
> 标签：performance, arm, tegra

在这种情况下：

1.  我通过网络在一个单独的线程中通过 TCP 将大约 1MB 的数据接收到缓冲区中。

2.  对该缓冲区进行解压缩会产生大约 2MB 的数据。

3.  **对我拥有源的同一个动态链接库函数的两次**调用。基本上是一堆使用 FFTW 3.3.3 并支持 NEON 的 FFT。我认为第一组 FFT 是冷的，第二组是热的。

冷运行比热运行慢大约 200 毫秒：

*   冷：570 毫秒
*   热：260 毫秒

**如果 1.) 和 2.) 被从文件中读取完全相同的数据替换，则热运行和冷运行同样快。**

如果我将网络数据减少到 200K 左右，从而将解压缩的数据减少到 400K，那么冷热之间的性能是相同的。

**如果我在2.)**之后立即执行 L2 刷新*，则冷性能会增加到与热性能相同。我不明白这一点。我尝试更改许多编译器选项，只要使用优化器，我就会看到这种行为。

如果我刷新较少的缓存，那么冷运行的性能会成比例地恶化。

*这是我用来尝试刷新 1MB L2 缓存的代码：

```
const size_t cache_size = 1024 * 1024;
char *cache = new char[cache_size];
srand(1);
for (size_t dc = 1; dc < cache_size; ++dc)
{
    cache[dc] = cache[dc - 1] + rand() * 255;
} 
```

使用巨大的 switch 语句来刷新指令缓存并没有太大的影响。我使用了 32,000 个案例，如下所示： [如何导致指令缓存未命中？](https://stackoverflow.com/questions/10588567/how-can-i-cause-an-instruction-cache-miss/9796776#9796776)

如果我将 FFT 操作的数据复制到内存不同部分的重复结构中，然后对复制进行操作，它与刷新 L2 的效果不同。

我想了解发生了什么。我在 Tegra 3 上强制将进程和线程关联到单个内核。我可以进行或查看哪些其他易于访问的测量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:45:47.497

如果缓存配置为回写（这通常是更高的性能），那么您的刷新会导致第一个 FFTW 的所有输出都写入内存，而不是等到第二个 FFTW 需要缓存行。所以缓存是空的，而不是被脏行污染。

# c++ - calloc c 样式指针转换为 c++ 转换样式

> ID：14822279
> 
> 赞同：1
> 
> 时间：2013-02-11T22:40:07.957
> 
> 标签：c++

我想将以下类型转换转换为 c++ 样式。最好的方法是什么？

```
MemDigest *pMemDigestArray = (MemDigest *)calloc(numUniqueTypes, sizeof(*pMemDigestArray)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:40:52.380

像这样：

```
#include <vector>

std::vector<MemDigest> v(numUniqueTypes); 
```

“这有什么 C++？”，我听到你问。这：

*   缺乏手动记忆和生命周期管理

*   没有原始指针

*   异常安全

*   在运行时调整容器大小很简单

*   避免未初始化的状态（通过值初始化您的 POD 类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:47:11.463

`vector`是一个很好的方法，但这是一个更直接的等价物，仍然是“c++风格”：

```
std::unique_ptr<MemDigest[]> pMemDigestArray(new MemDigest[numUniqueTypes]); 
```

# python - 无法让 ToMany 在 Tastypie 工作

> ID：14822280
> 
> 赞同：4
> 
> 时间：2013-02-11T22:40:09.917
> 
> 标签：python, django, tastypie

我正在关注 Tastypie 文档，发现自己完全陷入困境。我有以下内容：

接口：

```
class ProjectResource(ModelResource):
    milestones = fields.ToManyField('ProjectTrackerServer.projects.api.MilestoneResource', 'projects', related_name='project', full=True)

    class Meta:
        queryset = Project.objects.all()
        resource_name = 'project'

class MilestoneResource(ModelResource):
    project = fields.ToOneField('ProjectTrackerServer.projects.api.ProjectResource', 'project')

    class Meta:
        queryset = Milestone.objects.all()
        resource_name = 'milestone' 
```

[更新：上述 API 工作基于以下模型之一]

这是我的模型。

模型 - 里程碑：

```
from django.db import models
from ProjectTrackerServer.projects.models import Project
class Milestone(models.Model):
    project = models.ForeignKey(Project, related_name='projects')
    name = models.TextField()
    start_date = models.DateField()
    due_date = models.DateField()
    completed_date = models.DateField()
    description = models.TextField()
    status = models.IntegerField()

def __unicode__(self):
    return self.name 
```

型号 - 项目：

```
from django.db import models
from django.template.defaultfilters import slugify

class Project(models.Model):
     name = models.CharField(max_length=200)
     start_date = models.DateField()
     end_date = models.DateField()
     pm_id = models.IntegerField()
     status = models.IntegerField()
     slug = models.SlugField()

     def __unicode__(self):
         return self.name

     def save(self, *args, **kwargs):
         if not self.slug:
             self.slug = slugify(self.name)[:50]
             return super(Project, self).save(*args, **kwargs) 
```

我仍然得到同样的错误：

{"error_message": "'Project' object has no attribute 'milestones'", "traceback": "Traceback (最近一次调用最后一次):\n\n File \"C:\Python27\lib\site-packages\tastypie \resources.py\"，第 192 行，在包装器中\n response = callback(request, *args, **kwargs)\n\n File \"C:\Python27\lib\site-packages\tastypie\resources.py \"，第 406 行，在 dispatch_detail\n return self.dispatch('detail', request, **kwargs)\n\n File \"C:\Python27\lib\site-packages\tastypie\resources.py\" ，第 427 行，在 dispatch\n response = method(request, **kwargs)\n\n File \"C:\Python27\lib\site-packages\tastypie\resources.py\"，第 1058 行，在 get_detail\ n bundle = self.full_dehydrate(bundle)\n\n 文件 \"C:\Python27\lib\site-packages\tastypie\resources.py\"，第 654 行，在 full_dehydrate\n bundle.data[field_name] = field_object.dehydrate(bundle)\n\n 文件 \"C:\Python27\lib\site-packages\tastypie\fields.py\"，第 690 行，在 dehydrate\n the_m2ms = getattr(bundle.obj, self.attribute)\n\nAttributeError: 'Project' object has no attribute 'milestones'\n"}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-25T20:05:05.997

::其他资源::

[这个博客有一个优秀的 django-tastypie 反向关系示例](http://djangoandlove.blogspot.com/2012/11/tastypie-following-reverse-relationship.html)

当我遇到错误**AttributeError: 'Options' object has no attribute 'api_name'\n"}**

我将示例行输入为

```
 milestones = fields.ToManyField('ProjectTrackerServer.projects.api.Milestone', 'projects', full=True) 
```

确保您列出“..api.Milestone**资源**

~还有~

如果您得到一个空的关系列表，请确保您传递给“.ToManyField”的第二个参数与您在模型文件中指定的相关名称相匹配。

```
milestones = fields.ToManyField('ProjectTrackerServer.projects.api.MilestoneResource', 'projects', full=True)

class Milestone(models.Model):
    project = models.ForeignKey(Project, related_name='projects')
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T10:43:07.037

从发布的代码中，我发现您的 Milestone 模型应如下所示：

```
class Milestone(models.Model):
    project = ForeignKey(Project, related_name='milestones') 
```

更新：

您的工作资源应如下所示：

```
class ProjectResource(ModelResource):
  milestones = fields.ToManyField('ProjectTrackerServer.projects.api.MilestoneResource', 'projects', full=True)
class Meta:
    queryset = Project.objects.all()
    resource_name = 'project'

class MilestoneResource(ModelResource):
    project = fields.ForeignKey(Project, 'project')

    class Meta:
        queryset = Milestone.objects.all()
        resource_name = 'milestone' 
```

# java - 了解如何使用我的 Android JSON Parser

> ID：14822288
> 
> 赞同：0
> 
> 时间：2013-02-11T22:41:19.697
> 
> 标签：java, android, json

你好，我很难理解如何用我的 JSON 解析器做我想做的事。我目前正在解析位于[http://api.pathofexile.com/leagues?type=all](http://api.pathofexile.com/leagues?type=all)的数据以提取联赛 ID（目前它们是“默认”、“硬核”、“2 月 12 日 Solo HC Race”，等）我的解析器当前将这些 id 放入列表视图中。

我遇到的问题是这些 id 会随着时间而改变。他们也有自己的 JSON url，我需要根据联赛 id 对其进行解析。例如，如果联赛 id 是“默认”，我需要获取该 id 并将其放入 url：

"api.pathofexile.com/leagues/"+ id +"?ladder=1&ladderOffset=1&ladderLimit=2" 获取[http://api.pathofexile.com/leagues/Default?ladder=1&ladderOffset=1&ladderLimit=2](http://api.pathofexile.com/leagues/Default?ladder=1&ladderOffset=1&ladderLimit=2)

基本上，我希望能够单击列表视图中的 id 并让它更新 url 并将新数据解析到单独的列表中。

这是我的 JSON 解析器：

```
public class Leagues extends ListActivity {
    public static String url = "http://api.pathofexile.com/leagues?type=all";

    private static final String TAG_ID = "id";
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    JSONArray leagues = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.list_item);
        new GetJSONTask().execute("");
    }

    protected class GetJSONTask extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>>> {
        protected ArrayList<HashMap<String, String>> leaguesList;

        private final ProgressDialog dialog = new ProgressDialog(Leagues.this);

        // onPreExecute method
        protected void onPreExecute() {
            this.dialog.setMessage("Loading, Please Wait..");
            this.dialog.setCancelable(false);
            this.dialog.show();
        }

        // doInBackground method
        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(String... params) {
            leaguesList = new ArrayList<HashMap<String, String>>();

            // defaultHttpClient
            try {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet HttpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(HttpGet);
                json = EntityUtils.toString(httpResponse.getEntity());

                // getting array of entries
                JSONArray leagues = new JSONArray(json);

                // looping through entries
                for (int i = 0; i < leagues.length(); i++) {
                    JSONObject league = leagues.getJSONObject(i);

                    String id = league.getString(TAG_ID);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    //map.put(TAG_EVENT, event);

                    // adding HashList to ArrayList
                    leaguesList.add(map);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return leaguesList;
        }

        // onPostExecute method
        protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
            ListAdapter adapter = new SimpleAdapter(getApplicationContext(), leaguesList, R.layout.league, new String[] { TAG_ID }, new int[] { R.id.id });
            // selecting single ListView item
            ListView lv = getListView();
            lv.setAdapter(adapter);

            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }

        }
    }

} 
```

在这一点上我很迷茫。我现在尝试设置解析器的方式是否可行？谁能指出我正确的方向？

谢谢。

**编辑进一步澄清：**

现在我的解析器会将联赛 id 从 url "api.pathofexile.com/leagues?type=all" 放入 ListView 中，如下所示：

1.  默认
2.  铁杆
3.  2 月 12 日个人 HC 比赛

（这些项目会随着时间而改变）

我希望能够单击“默认”，这会将 url 更改为“api.pathofexile.com/leagues/Default?ladder=1&ladderOffset=1&ladderLimit=2”并将其解析为新的 ListView。

**更新：** 使用 Darwind 提供的项目，我改变了它（使用我的一些其他代码）以在单击联赛 ID 后显示我想要的 JSON 数据。

```
public class LeagueView extends ListActivity {
    //private TextView leagueId, leagueDescription;
    private static final String TAG_LADDER = "ladder";
    private static final String TAG_ENTRIES = "entries";
    private static final String TAG_ONLINE = "online";
    private static final String TAG_RANK = "rank";
    private static final String TAG_CHARACTER = "character";
    private static final String TAG_CHARNAME = "name";
    private static final String TAG_LEVEL = "level";
    private static final String TAG_CLASS = "class";
    private static final String TAG_EXPERIENCE = "experience";
    private static final String TAG_ACCOUNT = "account";
    private static final String TAG_ACCNAME = "name";
    private static final String TAG_ACCNAME2 = "name2";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.league_layout);

    //leagueId = (TextView) findViewById(R.id.leagueId);
    //leagueDescription = (TextView) findViewById(R.id.leagueDescription);

    String urlToJson = getIntent().getExtras().getString("leagueUrl");

    if (urlToJson == null) {
        Toast.makeText(this, "Url was null!", Toast.LENGTH_LONG).show();
    } else {
        new LeagueTask().execute(urlToJson.replaceAll(" ", "%20"));
    }
}

protected class LeagueTask extends AsyncTask<String, Integer, League> {
    private final ProgressDialog dialog = new ProgressDialog(LeagueView.this);
    protected ArrayList<HashMap<String, String>> entriesList;

    // onPreExecute method
    protected void onPreExecute() {
        this.dialog.setMessage("Retrieving Ladder Information...");
        this.dialog.setCancelable(false);
        this.dialog.show();
    }

    // doInBackground method
    @Override
    protected League doInBackground(String... params) {
        League aLeague = new League();
        entriesList = new ArrayList<HashMap<String, String>>();

        // defaultHttpClient
        try {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet HttpGet = new HttpGet(params[0]);

            HttpResponse httpResponse = httpClient.execute(HttpGet);
            String json = EntityUtils.toString(httpResponse.getEntity());

            // Getting a JSONObject filled.
            JSONObject leagueObject = new JSONObject(json);

            //String id = leagueObject.getString("id");
            //String description = leagueObject.getString("description");

            JSONObject ladder = leagueObject.getJSONObject(TAG_LADDER);
            JSONArray entries = ladder.getJSONArray(TAG_ENTRIES);

            // looping through entries
            for (int i = 0; i < entries.length(); i++) {
                JSONObject ent = entries.getJSONObject(i);

                // storing each JSON item in a variable
                String online = ent.getString(TAG_ONLINE);
                if (online == "false")
                    online = "Offline";
                else online = "Online";
                String rank = ent.getString(TAG_RANK);

                // pull out character object
                JSONObject character = ent.getJSONObject(TAG_CHARACTER);
                String chName = character.getString(TAG_CHARNAME);
                String lvl = character.getString(TAG_LEVEL);
                String cl = character.getString(TAG_CLASS);
                String xp = character.getString(TAG_EXPERIENCE);

                // pull out account object
                JSONObject account = ent.getJSONObject(TAG_ACCOUNT);
                String accName = account.getString(TAG_ACCNAME);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ONLINE, online);
                map.put(TAG_CHARNAME, chName);
                map.put(TAG_ACCNAME2, accName);
                map.put(TAG_RANK, rank);
                map.put(TAG_LEVEL, lvl);
                map.put(TAG_EXPERIENCE, xp);
                map.put(TAG_CLASS, cl);

                entriesList.add(map);
            }

            // creating a league to display
            aLeague = new League();
            //aLeague.setLeagueId(id);
            //aLeague.setDescription(description);

        } catch (JSONException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return aLeague;
    }

    // onPostExecute method
    protected void onPostExecute(League result) {
        //leagueId.setText(result.getLeagueId());
        //leagueDescription.setText(result.getDescription());

        ListAdapter adapter = new SimpleAdapter(getApplicationContext(), entriesList, R.layout.league_layout, new String[] { TAG_RANK, TAG_CHARNAME, TAG_LEVEL, TAG_EXPERIENCE, TAG_CLASS }, new int[] { R.id.rank, R.id.chName, R.id.lvl, R.id.experience, R.id.cl });
        // selecting single ListView item
        ListView lv = getListView();
        lv.setAdapter(adapter);

        if (this.dialog.isShowing()) {
            this.dialog.dismiss();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:49:31.933

我建议不要自己编写解析器，而是使用 JSON 开发的解析器
[http://json.org/java/](http://json.org/java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:03:08.403

乔菲斯，我正在编辑我的答案。

所以我模拟了你的代码并在本地运行它。现在我明白你在做什么了。你的问题有两个部分。我认为问题描述名称不正确，您的描述似乎集中在可点击的列表视图项上，但您的摘要似乎围绕解析 json。

~~另请注意，[http://api.pathofexile.com/leagues/Hardcore?](http://api.pathofexile.com/leagues/Hardcore?ladder=1&ladderOffset=1&ladderLimit=2) ladder=1&ladderOffset=1&ladderLimit=2 未提供格式正确的 json 文本，缺少开头和结尾的方括号。~~这是不正确的，它返回的是单个 JSONObject 而不是数组

第一部分：使列表视图项目可点击，使用 ListView.setOnItemClickListener 使项目可点击。例如看这个教程：[http ://www.ezzylearning.com/tutorial.aspx?tid=1351248](http://www.ezzylearning.com/tutorial.aspx?tid=1351248)

第二部分点击时会发生什么。其中一部分将用于 setOnItemClickListener 的实现，第二部分是构建新链接并单击它并返回内容的 JSON。您正在返回 ArrayList<HashMap<String, String>> LeaguesList; 这似乎非常有限，您为什么不返回 JSONArray 本身或 ArrayList<HashMap<String,JSONObject>> ，其中地图以 ID 作为键，并且 JSONObject 中的所有元素都可以稍后使用，除非 ID 是您唯一的东西有兴趣？

我手边没有 android 模拟器，但如果您需要有关 JSON 解析器的任何帮助，请告诉我。

这就是我想象的工作方式，onclick 事件将从

```
 public static String PATTERN =
          "http://api.pathofexile.com/leagues/" + ID_TOKEN +
          "?ladder=1&ladderOffset=1&ladderLimit=2"; 
```

使用传入的 Url 编码 ID，例如 Default，Feb 15 Solo HC Race，并将调用 GetJSONTask.doInBackGround 任务以获取新的 JSON 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:17:19.313

好的，基本上正如 vsnyc 指出的那样，您的标题可能有点误导。

我的看法是这样的：

1.  通过解析 JSON 数组获取所有联赛的列表
2.  通过解析 JSON 对象，可以单击列表中的联赛并获取提供有关所选联赛信息的视图。

我基本上去把你所有的代码都删了，并做了一些修改。例如我在评论中提到，你应该使用一个类来代表每个联赛，然后重写`toString`这种新对象的方法，这样这个类就可以直接在你的`ListView`.

作为您使用的第一个 url：`http://api.pathofexile.com/leagues?type=all`返回的是 JSON 数组而不是单个对象，并且此数组中的对象与选择特定联赛时返回的数据不同，我不建议使用相同的 AsyncTask 来获取两者联赛列表和单个联赛。

相反，在您`ListView`使用联赛填充第一个视图后，我将创建第二个视图，该视图通过从特定联赛获取数据来填充。

要获得代表一个联赛的第二个视图，您需要实现第一个视图的`OnItemClickListener`for `ListView`。在其中，`OnItemClickListener`您将获得选定的联赛名称并将其传递给下一个视图，该视图又将联系服务器并获取`JSON`表示给定联赛的对象并解析数据。

我创建了一个小项目，因为要添加到答案中的代码相当多，而且我需要更多的时间来删除所有不必要的代码，而不仅仅是给你一个完整的工作项目。;-)

这是 zip 文件中的项目：

[https://dl.dropbox.com/u/27724371/AndroidListViews.zip](https://dl.dropbox.com/u/27724371/AndroidListViews.zip)

如果这不是您要找的，请告诉我。

# sql - 将excel列名导入sql developer创建表

> ID：14822289
> 
> 赞同：0
> 
> 时间：2013-02-11T22:41:24.957
> 
> 标签：sql, database, oracle, spreadsheet, oracle-sqldeveloper

我有一个 55 列的 Excel 电子表格。有没有办法将这些列名导入 oracle sql developer，所以我不必创建表并手动插入这 50 个列名和数据类型。相反，让 oracle 创建一个包含这些列名称和数据类型的表。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:24:07.050

您可以使用外部表格从电子表格（以及 CSV 文件）加载数据。 [了解更多。](http://docs.oracle.com/cd/E11882_01/server.112/e22490/et_concepts.htm#i1009391)

Oracle 不会从电子表格生成表投影。但是，将电子表格列标题剪切并粘贴到文本编辑器中并将它们转换为 CREATE TABLE 语句对您来说是小菜一碟，特别是如果您使用支持正则表达式搜索和替换的文本编辑器。事实上，这会让你打字和在 SO 上问这个问题一样多。

# javascript - Javascript 根据服务器时间更改内容

> ID：14822290
> 
> 赞同：0
> 
> 时间：2013-02-11T22:42:02.250
> 
> 标签：javascript, clock

我正在为一家公司的网站工作，该公司的电话线仅在一天中的特定时间开放。所以我正在尝试编写一个脚本，说明如果它是在东部时间上午 8 点到晚上 8 点之间，则显示电话号码，如果不是，则显示一个指向联系表的按钮。我不知道如何获取时钟，因此它会在服务器时间之外运行，并且如果用户更改他们的计算机时钟也不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:51:47.733

由于您在这里谈论*服务器时间*，我假设您可以访问后端语言。如果是这种情况，你可以做这样的事情

```
<?php
    $h = date("H");
    if ( $h >= 8 && $h <= 20 ) {
        echo '<a href="1800 555 123" rel="tel">Call us</a>';
    } else {
        echo '<a href="/contact">Contact page</a>';
    }
?> 
```

这将在您的 8-8 小时内显示一个电话号码的链接，否则，它将显示一个指向您的联系页面的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:48:46.807

Javascript 是客户端执行的，您无法从那里获取服务器时间。您必须回电给服务器以获取时间。

# php - 什么时候应该使用 mysqli_kill() 和 mysqli_close()？

> ID：14822291
> 
> 赞同：4
> 
> 时间：2013-02-11T22:42:08.623
> 
> 标签：php, mysql, database, mysqli, database-connection

我有自己的数据库，我正在使用 Xampp 运行它。我正在使用 Apache 和 MySql 服务，尽管我还提供了公共访问权限。我想知道结束一堆 sql 查询的正确方法。我正在使用 ajax 将数据发送到 php 页面并从服务器查询一些数据。在 ajax 请求期间，我对处理程序 php 页面进行了编程，因此它将执行多个查询（至少一个以上）以获取我需要的特定数据。现在，我不知道在这个过程中什么时候应该使用`mysqli_kill()`or `mysqli_close()`。我现在已经设置好了，所以只有在对该特定 ajax 请求的所有即时查询都已执行之后，然后运行 ​​mysqli_close()。我什至不使用 mysqli_kill()。我不太了解数据库连接或服务器上的性能管理，所以我不知道**如何**考虑这一点。一方面，在该用户注销网页之前，我不需要关闭连接，对吗？或者我应该在每个连接出现和处理时打开和关闭它？

这个处理程序 php 页面处理来自我拥有的几个网页的请求，并且在其中一个网页中有一个输入框，每次击键都会发送 ajax 请求以显示提示（可能的匹配项）......另请注意，这是一个仅限员工访问的页面，因此连接不应该太高。

我也看了这篇文章[有人能解释一下这个关于mysqli关闭函数的声明吗？](https://stackoverflow.com/questions/4506632/could-someone-explain-a-little-about-this-statement-about-mysqli-close-function)

答案与从 php 手册网站获取的建议相矛盾。是否有人请澄清何时使用`mysqli_kill()`，`mysqli_close()`以及在我描述的情况下，是否有任何理由为了性能而保持连接处于活动状态？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T22:44:48.583

通常，您根本不需要使用这些功能中的任何一个。服务器分配给您的所有资源将在 PHP 脚本执行完毕后自动释放，因此在最常见的情况下，您无需担心。

有时您可能想要使用`mysqli_close`，例如在一个长时间运行的脚本中，该脚本已经完成了它需要对数据库执行的操作，并且不希望在剩余的执行过程中占用服务器资源。

您根本不需要使用`mysqli_kill`：此函数的作用是指示服务器销毁工作线程。这进入了“在不被邀请的地方乱搞”的领域，这在某些情况下可能有用，但在正常操作下肯定不会。

# javascript - 来自 Fusion Tables 的列格式不会延续到 map 语句中

> ID：14822294
> 
> 赞同：0
> 
> 时间：2013-02-11T22:42:15.603
> 
> 标签：javascript, jquery, google-maps-api-3, google-fusion-tables

我将一个 kml 文件导入到融合表中，并一直在尝试将其修改为特定的产品标准。特别是，我需要将浮点数重新调整为整数。

我已经尝试手动重置融合表中不应被视为浮点数的数字（通过调整列设置）。然而，在我的“信息窗口”调用语句中，它们仍然保持为浮点数（例如，转到此处，但这不是我最新的代码....下面的 html 文件是....：[http:// www.solar.pioneervalleydata.org/html/map.html](http://www.solar.pioneervalleydata.org/html/map.html)）。

融合表中的数字格式可以在地图文档中保留吗？是否有一种 html 方法可以在我的语句中解决这个问题（或者在我的初始化函数中重写一个数组是我唯一的选择......这对我来说听起来很慢）......

```
var infowindow = new google.maps.InfoWindow();
  google.maps.event.addListener(layer, 'click', function(e) {
    var contentString = [
             '<div class="tabs">',
         '<ul>',
     '<li><a href="#tab-1"><span>ROOF/PANEL AREA</span></a></li>' +
     '<li><a href="#tab-2"><span>ENERGY TOTALS</span></a></li>',
     '<ul>',
     '<div id="tab-1">',
     '<div class="contents" style="display:block">' + 
     '<p>' + '<br>' + '<br>' + 'Total Roof Area (sqft) :' +              
             '&nbsp;&nbsp;&nbsp;' + e.row['TOTAL_ROOF'].value + '</p>',
    '<p>' + 'Potential Roof Area (sqft) :' + '&nbsp;&nbsp;&nbsp;' + 
             e.row['POTENTIAL_'].value + '</p>',
        '<p>' + 'Pitched or Flat Roof (?) :' + '&nbsp;&nbsp;&nbsp;' + 
            e.row['PITCHED_OR'].value + '</p>',
    '<p>' + 'Number of Panels for available Roof Area :' + 
            '&nbsp;&nbsp;&nbsp;' + e.row['NUMBER_OF_'].value + '</p>',
    '</div>',
    '</div>',
    '<div id="tab-2">',
    '<div class="contents" style="display:block">' + 
    '<p>' + '<br>' + '<br>' + 'Watts generated (# of Panels * 250kw) :' + 
            '&nbsp;&nbsp;&nbsp;' + e.row['WATTS'].value + '</p>',
    '<p>' + 'Annual KWH inc. est. daylight/cloud conditions (Watts generated / 
           1.18125) :' + '&nbsp;&nbsp;&nbsp;' + e.row['KWH_PER_YR'].value + '</p>',
    '<p>' + 'Value of Electricity PER Year (Annual KWH * .118) :' +     
           '&nbsp;&nbsp;&nbsp;' + e.row['ANNUAL_DOL'].value + '</p>',
    '<p>' + 'Value of Electricity PER Month (Electricity PER Year / 12) :' 
           + '&nbsp;&nbsp;&nbsp;' + e.row['MONTHLY_DO'].value + '</p>',
    '</div>',
    '</div>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:03:03.983

我会将数据保存在 Fusion Tables 中。如果我理解正确，数据没有错，您只是想以不同的方式*显示*它。

如果是这种情况，您可以调整信息窗口的格式。只需使用 JavaScript 更改值的显示。您可以选择几个选项来将浮点数转换为整数：

*   [`Math.floor()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor)
*   [`Math.ceil()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)
*   [`Math.round()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/round)

例子：

```
 '<p>' + 'Potential Roof Area (sqft) :' + Math.round(e.row['POTENTIAL_'].value) + '</p>' 
```

# asp.net - ASHX 文件解析器错误 - 无法创建类型

> ID：14822295
> 
> 赞同：5
> 
> 时间：2013-02-11T22:42:16.020
> 
> 标签：asp.net, iis-6, ashx

我从我正在测试用于制作条形码的供应商处获得了一个示例应用程序以安装在 IIS 上。

aspx 页面工作正常，但是当 aspx 页面调用 ashx 页面时，出现以下错误：

> ## “/BarcodeSample”应用程序中的服务器错误。
> 
> 解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> 解析器错误消息：无法创建类型“TECIT.OnlineBarcodes.BarcodeHandler”。
> 
> 源错误：
> 
> 第 1 行：<%@ WebHandler Language="C#" CodeBehind="BarcodeHandler.ashx.cs" Class="TECIT.OnlineBarcodes.BarcodeHandler" %>
> 
> 源文件：/BarcodeSample/BarcodeHandler.ashx 行：1
> 
> -------------------------------------------------- ------------------ 版本信息：Microsoft .NET Framework 版本：2.0.50727.3634；ASP.NET 版本：2.0.50727.3634

为什么会这样？我怎样才能让这个 ashx 文件工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-05-24T11:37:19.653

检查从命名空间开始的类的全名（如果使用）。我遇到了同样的问题，并且在更改类名后已修复，如下所示：

```
<%@ WebHandler Language="C#" Class="Namespace.ClassName" %> 
```

而不是这个：

```
<%@ WebHandler Language="C#" Class="ClassName" %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-08T11:12:08.250

我发现一个简单的解决方法有效：

*   将 .ashx.cs 代码放在 .ashx 文件的第一行之后
*   删除 .ashx 文件第一行的 CodeBehind 属性
*   删除代码隐藏文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T10:00:26.733

添加以下标签

```
<%@ Assembly  Name="YourNameSpace.YourHandlerClass, Version=1.0.0.0, Culture=neutral, PublicKeyToken=90e3045b123af1c3" %> 
```

在您的 WebHandler 标记上方

```
<%@ WebHandler Language="C#" CodeBehind="BarcodeHandler.ashx.cs" Class="TECIT.OnlineBarcodes.BarcodeHandler" %> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T20:23:00.027

我对命名空间的命名有问题，所以我必须编辑`example.ashx`文件（不是`example.ashx.cs`）并在那里更改命名空间名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-07T06:17:54.533

我通过解决方案资源管理器重命名了我的处理程序。

VS2017 建议只在 .cs 文件中更改名称，而 ashx 文件中的 class 属性不正确。

# php - 正则表达式从 mybb_posts.message 中删除 [quote= *]something[/quote] 或类似内容

> ID：14822297
> 
> 赞同：0
> 
> 时间：2013-02-11T22:42:17.627
> 
> 标签：php, regex, quote, mybb

我必须从

```
[quote='Joker' pid='478' dateline='1346752283']
Benvenuto N1xx1, ti auguro una buona permanenza!
[/quote]Grazie. 
```

一切都在 [quote= ...] * [/quote] 内，并且只返回“Grazie”。

我正在返回一条 MyBB 消息，但我不需要任何类型的 [quote][/quote]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:01:17.527

`#\[[Qq]uote=(.*?)\[/[Qq]uote\]#s`会匹配它。

`$newString = preg_replace('#\[[Qq]uote=(.*?)\[/[Qq]uote\]#s', '', $yourString);`应该将它们全部替换为`''`.

（除非有嵌套引号 - 但这与您当前的问题完全不同。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:02:11.773

试试这个

```
<?php
    $string = "[quote='Joker' pid='478' dateline='1346752283']          
    Benvenuto N1xx1, ti auguro una buona permanenza!            
    [/quote]Grazie.";
    echo preg_replace('/\[quote.*?\].*\[\/quote\]/si','',$string);
    echo "<hr>".preg_replace('/\[.*\]/', "", $string); 
```

工作样本：[http ://codepad.viper-7.com/9n4eii](http://codepad.viper-7.com/9n4eii)

# ruby-on-rails - 如何通过模型与 AREL 组合多个表

> ID：14822298
> 
> 赞同：1
> 
> 时间：2013-02-11T22:42:29.597
> 
> 标签：ruby-on-rails, union, rails-activerecord, arel

我有一个遗留数据库，我需要它来为 Rails 应用程序提取数据。

每个表被拆分为多个带有数字后缀的表。每个表都保存一天中四个小时的数据。

我们有“widget_status”表。该表实际上并不保存数据。

现有的表是：

1.  小部件_状态_0
2.  小部件_状态_1
3.  小部件_状态_2
4.  小部件_状态_3
5.  小部件_状态_4
6.  小部件_状态_53

每个表包含四个小时的数据。

此查询有效：

```
( SELECT timestamp, some_field FROM widget_status_0  
 WHERE widget_sn = \@widgetsn and timestamp > $timePeriod )  
 UNION 
( SELECT timestamp, some_field FROM widget_status_1  
 WHERE widget_sn = \@widgetsn and timestamp > $timePeriod )  
 UNION 
( SELECT timestamp, some_field FROM widget_status_2  
 WHERE widget_sn = \@widgetsn and timestamp > $timePeriod )  
 UNION 
( SELECT timestamp, some_field FROM widget_status_3  
 WHERE widget_sn = \@widgetsn and timestamp > $timePeriod )  
 UNION 
( SELECT timestamp, some_field FROM widget_status_4  
 WHERE widget_sn = \@widgetsn and timestamp > $timePeriod )  
 UNION 
( SELECT timestamp, some_field FROM widget_status_5  
 WHERE widget_sn = \@widgetsn and timestamp > $timePeriod ) LIMIT 200 
```

我正在尝试创建一个 Rails 模型“小部件”，它将使用 a`union`或类似的东西查询六个基础表，因此其余代码将忽略尝试处理六个表。

我有多个遵循这种模式的表，并且希望能够抽象出 6 个表的处理，因此在其余代码中，我可以正常使用 find 等。谁能建议如何使用 AREL 来做到这一点？或者任何一种既好又简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:00:49.190

不完全是一个答案：不幸的是，我不确定你如何使用 AR 来做这种事情，除非你有能力创建一个数据库视图（正如你在评论中提到的那样）。

如果没有 DB 视图，您将失去很多 AR 的魔力，包括查询方法和对象的自动实例化。

但是，arel 可以帮助您构建查询（注意：以下内容未经测试，您可能需要对其进行调整，但您会得到精神）。

```
class WidgetStatus    

  # when given a block, this method will apply the same arel chain 
  # to all tables and union them.
  def self.build_query 
    (0..5).map do |i| 
      arel_chain = Arel::Table.new("widget_status_#{i}") 
      arel_chain = yield arel_chain if block_given?
      arel_chain
    end.inject(){|chain, next| chain.union next }
  end

end 
```

现在你可以做类似的事情：

```
query = WidgetStatus.build_query do |table| 
  table
    .project( :timestamp, :some_field )
    .where( 
      table[:widget_sn].eq( @sn )
      .and( table[:timestamp].get( @t ) 
     )
end 
```

并用于`ActiveRecord::Base.connection.select_all query`获取有用的数据。

# java - 是否可以将“tail -f”命令的输出输出到 java 程序？

> ID：14822302
> 
> 赞同：5
> 
> 时间：2013-02-11T22:42:39.637
> 
> 标签：java, shell, logging, process, iostream

根据：

[unix/linux“tail -f”的Java IO实现](https://stackoverflow.com/questions/557844/java-io-implementation-of-unix-linux-tail-f)

[Java "tail -f" 包装器](https://stackoverflow.com/questions/988327/java-tail-f-wrappe)

我认为它可能，但我有以下问题。

```
String TailCommand = "tail -f /path/PATH.txt| grep (...)";
Runtime r = Runtime.getRuntime();
Process p = r.exec(TailCommand);

//handle buffer

while (running) {
    // handle output
} 
```

进程 p 终止。它适用于不像“top”或“tail -f”那样没有持续更新的命令。

我想知道我是否错过了什么，有一些缓冲区限制或其他什么？我正在使用 eclipse，但我想这不应该对进程行为产生任何影响。

事实上，也许还有另一种简单的方法可以解决我错过的问题。我使用“tail -f”，因为我必须分析不断附加的非常胖（一些 GB）的日志，并且不打算打开它并读取整个文件。我只需要控制附加行。但是我发现没有合适的尾部实现

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:49:12.357

您无法从 java 内部执行管道命令。

如果您想要管道输出，请像这样执行“/bin/sh”：

```
String tailCommand = "/bin/sh -c 'tail -f /path/PATH.txt| grep (...)'"; 
```

此外，您的 java 程序必须足够快地消耗进程的输出，因此它的缓冲区不会溢出。

您可能想阅读这篇文章[When Runtime.exec() won't](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=1)，了解尝试从 Java 执行进程时的常见陷阱。

# ruby - Watir Webdriver / Ruby 如何使用 JavaScript 选择 onclick（日历）

> ID：14822304
> 
> 赞同：0
> 
> 时间：2013-02-11T22:42:43.103
> 
> 标签：ruby, watir, watir-webdriver

我想知道如何使用 Watir Webdriver 从页面中选择日历日期。

我正在测试的 URL 是：[http ://dev01-new.firestonecompleteautocare.com/appointment/schedule-appointment.htm?execution=e2s4](http://dev01-new.firestonecompleteautocare.com/appointment/schedule-appointment.htm?execution=e2s4)

您必须进入第三步才能选择日历日期。

我尝试了各种选择日历的方法，包括执行脚本，但似乎没有任何效果。

```
browser.execute_script("DP_jQuery_1360620655913.datepicker._selectDay('#choice1\\-date',1,2013, this);return false;") 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:48:10.440

`onclick`表格单元格有一个显示日期的属性：

```
<td onclick="DP_jQuery_1360625373055.datepicker._selectDay('#choice1\\-date',1,2013, this);return false;" class=" "><a href="#" class="ui-state-default">13</a></td> 
```

在这种情况下，您应该能够使用[fire_event](http://rubydoc.info/gems/watir-webdriver/Watir/Element#fire_event-instance_method)方法。例子：

```
browser.link(:id => "foo").fire_event "onclick" 
```

# php - PHP 使用具有巨大数据源的 XMLReader

> ID：14822308
> 
> 赞同：0
> 
> 时间：2013-02-11T22:43:07.487
> 
> 标签：php, xml, xmlreader

我需要解析一个巨大的数据源（1490 万行 XML，1.7GB）。

我在使用 XMLReader 执行此操作时遇到问题。除了 SimpleXML，我之前什么都不需要，但考虑到我真的无法将这个巨大的东西加载到内存中，我需要通过流来执行此操作。

我写了这段代码：

```
<?php

$xml = new XMLReader(); 
$xml->open('public.xml'); 

while($xml->read())
{
    echo '.';
}
$xml->close();
?> 
```

但是在执行方面有问题。即，我得到“致命错误：超过 30 秒的最大执行时间......”

当我执行 set_time_limit(600) 时，浏览器就会崩溃。

它正在崩溃，因为它无法处理“。”的数量。创建？

你在这里推荐什么？最终，我需要将此 XML 文件导入到关系数据库中。在深入了解模式的细节之前，我正在测试可行性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:57:27.180

> 它正在崩溃，因为它无法处理“。”的数量。创建？

要对此进行测试，只需尝试不使用`echo '.';`.
由于您需要大量 RAM 来增加脚本可以使用的最大内存。最终将 XML 文件拆分为更小的部分并按顺序处理它们。

最后看看：

*   [在 PHP 中解析巨大的 XML 文件](https://stackoverflow.com/questions/911663/parsing-huge-xml-files-in-php)
*   [在 PHP 中处理大型 XML 的最佳方法](https://stackoverflow.com/questions/1167062/best-way-to-process-large-xml-in-php)
*   [如何使用 PHP 顺序解析大型 XML 文件](https://stackoverflow.com/questions/4127549/how-to-use-php-to-parse-large-xml-file-sequentially)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:46:21.997

您还应该扩展 PHP 的内存限制。

# parallel-processing - 使用 ipcluster 从 Linux 连接到带有 EPD 的 OS X 服务器？

> ID：14822310
> 
> 赞同：1
> 
> 时间：2013-02-11T22:43:18.013
> 
> 标签：parallel-processing, ipython, enthought

我正在尝试使用 IPython.parallel 对 SSH 的支持来允许我的 Linux 客户端`ipengine`从安装了 EPD64 的 OS X 服务器运行远程 s。但是，这失败了，因为它试图使用我的本地计算机来找出在远程主机上运行的正确命令，该远程主机的`ipengineapp`包位于不同的位置。如何修改`ipcluster_config.py`以识别差异？

具体来说，当我`ipcluster start --log-level=DEBUG`在远程主机上运行时，我得到控制台输出，告诉我其中包含如下行：

```
[IPClusterStart] Starting LocalEngineLauncher: ['/Library/Frameworks/EPD64.framework/Versions/7.3/bin/python', '-c', 'from IPython.parallel.apps.ipengineapp import launch_new_instance; launch_new_instance()', '--profile-dir', u'/Users/username/.ipython/profile_default', '--cluster-id', u'', '--log-to-file', '--log-level=20'] 
```

另一方面，当从我的本地机器运行时`ipcluster start --log-level=DEBUG`，我得到以下行，这将适用于 Linux 主机：

```
[IPClusterStart] Starting SSHEngineLauncher: ['ssh', '-tt', u'hostname', '/usr/bin/python', u'/usr/lib/python2.7/site-packages/IPython/parallel/apps/ipengineapp.py', '--profile-dir', u'/home/username/.ipython/profile_ssh', '--log-to-file', '--log-level=20'] 
```

我`ipcluster_config.py`的这个例子是：

```
c = get_config()
c.IPClusterEngines.engine_launcher_class = 'SSHEngineSetLauncher'
c.IPClusterStart.controller_launcher_class = 'SSHControllerLauncher'

c.SSHEngineSetLauncher.engines = {
    'hostname1': 12,
    'hostname2': 12,
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:21:40.953

我认为这在 0.14 中有所改进，但您正在寻找的配置值是`SSHEngineSetLauncher.engine_cmd`. 在 ipcluster_config.py 中编辑它，如下所示：

```
c.SSHEngineSetLauncher.engine_cmd = ['/path/to/your/python', '-c', 'from IPython.parallel.apps.ipengineapp import launch_new_instance; launch_new_instance()'] 
```

或者，有时即使是最简单的事情也能奏效，只要您的 PATH 是在一个简单的 ssh 会话中配置的：

```
c.SSHEngineSetLauncher.engine_cmd = ['ipengine'] 
```

# android - 使用单个视图的 android 类视图转换

> ID：14822312
> 
> 赞同：1
> 
> 时间：2013-02-11T22:43:18.703
> 
> 标签：android, animation, view, transition

我正在尝试通过使用转换来为现有的应用程序增添趣味。在许多地方，我有一个单独的视图来改变它们的内容，我想知道是否可以动画化内容的变化。

例如，我正在寻找的是当列表视图的内容发生变化时（例如通过 notifydatasetinvalidated）以某种方式对其进行动画处理（现有内容向右滑出，新内容向左滑出）。

我知道我可以通过两个交替视图来做到这一点，但在整个应用程序中做到这一点需要做一些工作。

# python - 如何使用 python 多线程并行化来自另一个模块的函数而不进行酸洗？

> ID：14822313
> 
> 赞同：1
> 
> 时间：2013-02-11T22:43:36.070
> 
> 标签：python, python-2.7, multiprocessing, libsvm, pool

在我的 svm 预测模型的实现中，我想让一个函数的执行成为`svmutil.svm_train`多线程的。虽然我是多线程程序实现的新手，但我对并行编程概念有一些了解，并且我相信同时训练具有不同参数集的多个模型在理论上是可能的。

设置：

```
import svmutil
import multiprocessing as mp

problem = svm_util.svm_read_problem('my_problem')
# I have a list of svm_param objects I want to train
params = myCode.svm_param_list()

# Calculate the number of worker threads
processes = mp.cpu_count() * 2 
```

将训练拆分为多个执行线程：

```
pool = mp.Pool(processes)
for param in params:
    pool.apply(svmutil.svm_train, args=(problem, param,))

pool.close()
pool.join() 
```

但是，我遇到的问题是`svmutil.svm_train`不能腌制，因为它包含一个 c 类型的指针。python解释器给了我错误：

```
ValueError: ctypes objects containing pointers cannot be pickled 
```

我宁愿调整我的实现，也不愿以某种方式腌制模块中的功能。因此，我想知道，有没有什么方法可以在不腌制的情况下并行化这个函数？

另外，我怎样才能收集函数的结果？理想情况下，这将是经过训练的模型的列表（`svmutil.svm_train`每次调用函数时函数的输出）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:28:24.423

我设法使用[上面评论中链接的问题中的最佳答案](https://stackoverflow.com/a/5792404/825093)来构建解决方案。通过生成管道和进程并监听结果，我能够在外部模块中并行调用 python 函数。我传入管道的函数如下：`pipe.send(svmutil.svm_train(problem,param)))`

# c++ - C ++将数组及其长度传递给函数（使用宏/内联函数？）

> ID：14822314
> 
> 赞同：1
> 
> 时间：2013-02-11T22:43:42.193
> 
> 标签：c++, arrays, macros, inline

我一直在写 C++ 一段时间（java/C 很长一段时间），我想知道是否有一个我不知道的技巧可以帮助我执行以下操作。

```
vector<unsigned char> *fromArray(unsigned char data[], int length)
{
    vector<unsigned char> *ret = new vector<unsigned char >();
    while (length--)
    {
        ret->push_back(*data);
    }
    return ret;
} 
```

你可以像这样使用它：

```
unsigned char tmp[] = {0, 1, 2, 3, 4, 5};
vector<unsigned char> *a = fromArray(tmp, sizeof(tmp));
// use `a' here 
```

我觉得这很麻烦 - 我想把它全部写在一行上

```
vector<unsigned char> *a = fromArray({0, 1, 2, 3, 4, 5});
// use `a' here 
```

这样的事情可能吗？不幸的是，我无法访问 C++11（看起来它的 initializer_list 正是我想要的）。

**编辑**

对不起，我在这里有一些基本面错误。我现在将避免扩展 std::vector。但是我认为这个问题仍然有效，只是我的例子是一个糟糕的例子。

**潜在的解决方法**

我*可以*定义一堆重载函数来接受不同数量的参数，例如

```
vector<unsigned char> *fromArray(unsigned char a)
{
    vector<unsigned char> *ret = new vector<unsigned char >();
    ret->push_back(a);
    return ret;
}

vector<unsigned char> *fromArray(unsigned char a, unsigned char b)
{
    vector<unsigned char> *ret = new vector<unsigned char >();
    ret->push_back(a);
    ret->push_back(b);
    return ret;
} 
```

但我想我不会打扰...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:46:56.377

您可以使用模板来推断任何固定大小数组的大小：

```
template< class T, size_t N >
auto_ptr<ByteArray> foo( T (&data)[N] )
{
  return auto_ptr<ByteArray>(new ByteArray(data, N));
} 
```

然后

```
unsigned char tmp[] = {0, 1, 2, 3, 4, 5};
auto_ptr<ByteArray> a = foo(tmp); 
```

但请记住，`auto_ptr`它已被弃用。更喜欢`unique_ptr`. 另外，请注意您不应该公开继承自`std::vector`.

# ios - UIButtonTypeDetailDisclosure : 无法识别的选择器发送到实例

> ID：14822315
> 
> 赞同：0
> 
> 时间：2013-02-11T22:43:48.753
> 
> 标签：ios, cocoa-touch, uibutton, unrecognized-selector

我有一个自定义按钮类：

自定义按钮.h 文件：

```
@interface CustomButton : UIButton
@property (nonatomic, retain) NSString* info;
@end 
```

自定义按钮.m 文件：

```
#import "CustomButton.h"

@implementation CustomButton

@synthesize info;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

@end 
```

在我的主视图控制器中：

```
CustomButton* btn = [CustomButton buttonWithType:UIButtonTypeDetailDisclosure];

[btn setInfo:@"foobar"];
NSLog(@"%@", [btn info]);

[self.view addSubview:btn]; 
```

如果它只是一个简单的按钮 ( `[CustomButton new]`)，我不会收到任何错误。但是如果我选择`buttonWithType:UIButtonTypeDetailDisclosure`我会得到这个错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[UIButton setInfo:]: unrecognized selector sent to instance 0x753c8c0' 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:06:57.450

`buttonWithType:`您调用的方法是 from `UIButton`，而不是您的`CustomButton`班级。`buttonWithType:`的返回值为`UIButton`。即使您将其分配给类型的变量，`CustomButton`它仍然是一个`UIButton`对象。由于`UIButton`没有`info`属性或`setInfo:`方法，因此您会看到所看到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:31:48.057

只要`UIButton`不提供`initWithType:`方法 - 您就不能子类化“键入”按钮。您也不能为库类创建[扩展](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)。将某些东西“附加”到预定义对象的唯一方法是使用[关联对象](http://labs.vectorform.com/2011/07/objective-c-associated-objects/)：

```
#import <objc/runtime.h>

UIButton* btn = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
NSString* info = @"foobar";
objc_setAssociatedObject(btn, "info", info, OBJC_ASSOCIATION_RETAIN);
//Later somewhere
NSString* btnInfo = (NSString*)objc_getAssociatedObject(btn, "info"); 
```

“信息”可以是您喜欢的任何字符串，它只是稍后检索该对象的键。OBJC_ASSOCIATION_RETAIN 表示对象将被保留并在`btn`对象`dealloc:`被调用后自动释放。您可以在[此处](https://stackoverflow.com/questions/6039309/when-does-an-associated-object-get-released)找到更多详细信息。

解决您的问题的另一种方法是子类化 UIButton，添加您的 info 属性并通过使用方法设置自定义图像使其看起来像披露按钮`setImage:forState:`。

通常，将一些数据与标准 UI 控件耦合是不良架构的标志。也许您会后退一步，尝试找到其他方法将该字符串传递到您需要使用它的地方？

# scala - Scala 中非布尔类型的逻辑运算符

> ID：14822317
> 
> 赞同：4
> 
> 时间：2013-02-11T22:43:57.177
> 
> 标签：scala, boolean, type-safety

我喜欢可以使用布尔运算符编写的简洁代码，而不是像 Lisp、Python 或 JavaScript 这样的（通常是动态的）语言中的条件，就像典型的那样：

```
x = someString or "default string" 
```

对比

```
if someString:
    x = someString
else:
    x = "default string" 
```

在 Scala 中，我曾想过：

```
object Helpers {
  case class NonBooleanLogic[A](x: A) {
    // I could overload the default && and ||
    // but I think new operators are less 'surprise prone'
    def |||(y: => A)(implicit booleanConversion: A => Boolean) = if (x) x else y
    def &&&(y: => A)(implicit booleanConversion: A => Boolean) = if (!x) x else y
  }

  implicit def num2bool(n : Int) = n != 0

  implicit def seq2bool(s : Seq[Any]) = !s.isEmpty

  implicit def any2bool(x : Any) = x != null

  implicit def asNonBoolean[T](x: T) = NonBooleanLogic(x)
}

object SandBox {
  // some tests cases...

  1 ||| 2                                         //> res2: Int = 1

  val x : String = null                           //> x  : String = null
  x ||| "hello"                                   //> res3: String = hello

  //works promoting 2 to Float
  1.0 &&& 2                                       //> res4: Double = 2.0

  //this doesn't work :(
  1 &&& 2.0
} 
```

但出现了两个问题：

1.  如何使其适用于具有共同祖先的类型而不恢复为`Any`类型？
2.  这太酷了，以前肯定有人做过，可能是在一个文档更好、经过测试和综合的库中。在哪里可以找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T00:31:05.180

我会坚持使用 Option[T]... 这对 Scala 来说更惯用。我也经常在验证中使用它，例如：在 Web 表单中，有时不应将空字符串视为有效的用户输入。

例如，如果您认为 null String / String with zero length( `""`) 为 false，任何 null 引用也是 false，并且任何数字零为 false，您可以编写以下隐式 defs。

```
object MyOptionConverter
{
    implicit def toOption(any: AnyRef) = Option(any)
    implicit def toOption(str: String) = {
        Option(str).filter(_.length > 0)
    }

    implicit def toOption[T](value: T)(implicit num: Numeric[T]): Option[T] = {
        Option(value).filter(_ != 0)
    }
}

import MyOptionConverter._

println(1 getOrElse 10)   // 1
println(5.5 getOrElse 20) // 5.5
println(0 getOrElse 30)  // 30
println(0.0 getOrElse 40) // 40
println((null: String) getOrElse "Hello")  // Hello
println((null: AnyRef) getOrElse "No object") // No object
println("World" getOrElse "Hello") 
```

如果您确实需要定义自己的运算符，请将其转换为包含 Option[T] 的类，并向其添加运算符。

```
object MyOptionConverter
{
    class MyBooleanLogic[T](x: Option[T], origin: T)
    {
        def |||(defaultValue: T) = x.getOrElse(defaultValue)
        def &&&(defaultValue: T) = x.isDefined match {
            case true  => defaultValue
            case false => origin
        }
    }

    implicit def toOption(any: AnyRef) = {
        new MyBooleanLogic(Option(any), any)
    }
    implicit def toOption(str: String) = {
        new MyBooleanLogic(Option(str).filter(_.length > 0), str)
    }

    implicit def toOption[T](value: T)(implicit num: Numeric[T])= {
        new MyBooleanLogic(Option(value).filter(_ != 0), value)
    }
}

import MyOptionConverter._

println(1 ||| 10)   // 1
println(5.5 ||| 20) // 5.5
println(0 ||| 30)  // 30
println(0.0 ||| 40) // 40
println((null: String) ||| "Hello")  // Hello
println((null: AnyRef) ||| "No object") // No object
println("World" ||| "Hello")

println(1 &&& 10)   // 10
println(5.5 &&& 20) // 20
println(0 &&& 30)  // 0
println(0.0 &&& 40) // 0.0
println((null: String) &&& "Hello")  // null
println((null: AnyRef) &&& "No object") // null
println("World" &&& "Hello") // Hello 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T04:17:06.030

听起来你正试图想出像 Monad 这样的东西。您想要做的已经内置在语言中，并且在惯用的 scala 中很常见。我不是 Monad 的专家，但他们说 Option 是 Monad 的一种。

您特别要求能够编写：

```
val x = someString or "default string" 
```

是什么让 someString 评估为假？在大多数语言中，您将测试 if( someString != null )，这就是您在示例中所做的。惯用的 scala 避免使用 null，而是使用 None。

所以，在 scala 语法中，你会有

```
val someString:Option[String] = getAString() 
```

或者

```
val someString:Option[String] = Some("whatever") 
```

或者

```
val someString:Option[String] = None 
```

然后你会有：

```
val x = someString getOrElse "default string" 
```

这几乎正​​是您所要求的。

如果您想自己实现类似的东西，请查看 Option 中 getOrElse 的接口（类似的版本存在于 Map 和标准库中的其他地方）：

```
final def getOrElse[B >: A](default: ⇒ B): B 
```

在此示例中，Option someString 具有由 A 表示的类型（即 String）。B 必须是 A 或 A 的超类型。返回类型将为 B（可能是 A）。例如：

```
val x:Option[Int]=1
x getOrElse 1.0 // this will be an AnyVal, not Any. 
```

AnyVal 是 Int 和 Double 最具体的共同祖先。请注意，这里是 AnyVal，而不是 Any。

如果你希望它是 Double 而不是 AnyVal，你需要 x 是一个 Option[Double] （或者你需要另一个隐式）。有一个从 Int 到 Double 的内置隐式转换，但不是从 Option[Int] 到 Option[Double]。隐式转换是您的 2 被提升为 Float 的原因，而不是因为您的布尔逻辑。

我不认为您的操作符和隐含方法是此类问题的最佳解决方案。有很多方法可以使用 Options、filter、exists、map、flatMap 等编写简洁优雅的 scala 代码，它们可以处理您想要执行的各种操作。

您可能会发现这很有帮助：

[http://www.codecommit.com/blog/ruby/monads-are-not-metaphors](http://www.codecommit.com/blog/ruby/monads-are-not-metaphors)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T21:17:26.073

我只为该版本创建了一个`|||`版本。是为了展示概念。代码可能会改进，我有点匆忙。

```
// Create a type that does the conversion, C is the resulting type
trait Converter[A, B, C] {
  def convert(a: A, b: => B)(implicit bool: BooleanConverter[A]): C
}

trait LowerPriorityConverter {
  // We can convert any type as long as we know how to convert A to a Boolean
  // The resulting type should be a supertype of both A and B
  implicit def anyConverter[A <: C, B <: C, C] = new Converter[A, B, C] {
    def convert(a: A, b: => B)(implicit bool: BooleanConverter[A]) = if (a) a else b
  }

  // We can go more specific if we can find a view from B to A
  implicit def aViewConverter[B <% A, A] = anyConverter[A, A, A]
}

object Converter extends LowerPriorityConverter {

  // For Doubles, Floats and Ints we have a specialized conversion as long as the
  // second type is a Numeric

  implicit def doubleConverter[A <: Double: Numeric, B: Numeric] = 
    new Converter[A, B, Double] {
      def convert(a: A, b: => B)(implicit bool: BooleanConverter[A]) =
        if (a) a else implicitly[Numeric[B]].toDouble(b)
    }
  implicit def floatConverter[A <: Float: Numeric, B: Numeric] = 
    new Converter[A, B, Float] {
      def convert(a: A, b: => B)(implicit bool: BooleanConverter[A]) = 
        if (a) a else implicitly[Numeric[B]].toFloat(b)
    }
  implicit def intConverter[A <: Int: Numeric, B: Numeric] = 
    new Converter[A, B, Int] {
      def convert(a: A, b: => B)(implicit bool: BooleanConverter[A]) = 
        if (a) a else implicitly[Numeric[B]].toInt(b)
    }
}

// We have created a typeclass for the boolean converters as well, 
// this allows us to use more generic types for the converters
trait BooleanConverter[A] extends (A => Boolean)

trait LowerPriorityBooleanConverter {
  implicit def any2bool = new BooleanConverter[AnyRef] {
    def apply(s: AnyRef) = s != null
  }
}

object BooleanConverter extends LowerPriorityBooleanConverter {

  implicit def num2bool[T: Numeric] = new BooleanConverter[T] {
    def apply(n: T) = implicitly[Numeric[T]].zero != n
  }

  // Note that this could catch String as well
  implicit def seq2bool[T <% GenTraversableOnce[_]] = new BooleanConverter[T] {
    def apply(s: T) = s != null && !s.isEmpty
  }

}

// This is similar to the original post
implicit class NonBooleanLogic[A](x: A) {

  // Note that we let the implicit converter determine the return type 
  // of the method
  def |||[B, C](y: => B)(
    // make sure we have implicits for both a converter and a boolean converter
    implicit converter: Converter[A, B, C], bool: BooleanConverter[A]): C =
    // do the actual conversion
    converter.convert(x, y)
} 
```

几个测试的结果：

```
1 ||| 2                                       //> res0: Int = 1
(null: String) ||| "test"                     //> res1: String = test
1.0 ||| 2                                     //> res2: Double = 1.0
1 ||| 2.0                                     //> res3: Int = 1
List() ||| Seq("test")                        //> res4: Seq[String] = List(test)
1f ||| 2.0                                    //> res5: Float = 1.0
1f ||| 2f                                     //> res6: Float = 1.0
0f ||| 2.0                                    //> res7: Float = 2.0
0 ||| 2f                                      //> res8: Int = 2
2.0 ||| 2f                                    //> res9: Double = 2.0
2.0 ||| 3.0                                   //> res10: Double = 2.0
Seq("test") ||| List()                        //> res11: Seq[String] = List(test)
"" ||| "test"                                 //> res12: String = test 
```

如您所见，为了保留类型，我们需要使用特定的模式。我从这里对我自己的一个问题的回答中学到了这一点：[如何定义返回类型基于 Scala 中的参数类型和类型参数的方法？](https://stackoverflow.com/questions/14674125/how-to-define-a-method-for-which-the-returntype-is-based-on-types-of-argument-an/14674624#14674624)

这种方法的好处是您可以为特定类型添加特定转换器，而无需更改原始代码。

# ios - iOS：在简单计算器中使用未声明的标识符错误

> ID：14822318
> 
> 赞同：-3
> 
> 时间：2013-02-11T22:43:58.657
> 
> 标签：ios, objective-c, compiler-errors

正如标题所说，我收到了这个编译器错误“使用未声明的标识符”。我正在尝试将“结果”写入“操作执行”，这基本上是一些数学方程式。我是 Xcode 的新手，所以不要惩罚我:)。感谢您的时间！

相应编辑的代码

```
@interface CalculatorViewController ()

@end

@implementation CalculatorViewController
-(void)setOperand:(double)aDouble
{
    operand = aDouble;
}

-(double)performOperation:(NSString *)operation
{
    if ([operation isEqualToString:@"sqrt"])
    {
        operand = sqrt(operand);
    }
    else if ([operation isEqualToString:@"+/-"] && operand !=0)
    {
        operand = -1 * operand;
    }
    else if ([operation isEqualToString:@"1/x"] && operand !=0)
    {
        operand = 1.0 / operand;
    }

    else if ([operation isEqualToString:@"sin"])
    {
        operand = sin(operand);
    }
    else if ([operation isEqualToString:@"cos"])
    {
        operand = cos(operand);
    }
    else if ([operation isEqualToString:@"tan"])
    {
        operand = tan(operand);
    }
    else
    {
        [self performWaitingOperation];
        waitingOperation = operation;
        waitingOperand = operand;
    }
    return operand;
}

-(void)performWaitingOperation
{
    if ([@"+" isEqual:waitingOperation] )
    {
        operand = waitingOperand + operand;
    }
    else if ([@"*" isEqual:waitingOperation])
    {
        operand = waitingOperand * operand;
    }
    else if ([@"-" isEqual:waitingOperation])
    {
        operand = waitingOperand - operand;
    }
    else if ([@"/" isEqual:waitingOperation])
    {
        if(operand)
        {
            operand = waitingOperand / operand;
        }
    }
}

-(IBAction)operationPressed:(UIButton *)sender
{
    if (userIsInTheMiddleOfTypingANumber)
    {
        setOperand:[[display text] doubleValue];
        userIsInTheMiddleOfTypingANumber = NO;
        decimalAlreadyEnteredInDisplay = NO;
    }
    NSString * operation = [[sender titleLabel] text];
    double result = [self operformOperation:operation];
    [display setText:[NSString stringWithFormat:@"%f", result]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:47:50.677

This line:

```
double result = performOperation:operation; 
```

is invalid syntax. Maybe you wanted:

```
double result = [self performOperation:operation]; 
```

Without more context it's hard to say.

# javascript - 忽略平铺 WM 说明的书签弹出窗口

> ID：14822320
> 
> 赞同：0
> 
> 时间：2013-02-11T22:43:59.290
> 
> 标签：javascript, haskell, bookmarklet, xmonad

我首先要说我对java一无所知，所以这很可能是一个非常愚蠢的问题。

无论如何，我有以下书签可将当前页面添加到 Google 书签

```
javascript:(function(){var a=window,b=document,c=encodeURIComponent,d=a.open("http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk="+c(b.location)+"&title="+c(b.title),"bkmk_popup","left="+((a.screenX||a.screenLeft)+10)+",top="+((a.screenY||a.screenTop)+10)+",height=420px,width=550px,resizable=1,alwaysRaised=1");a.setTimeout(function(){d.focus()},300)})(); 
```

这一切正常，但我使用 xmonad 平铺窗口管理器，它根据窗口的 WM_CLASS 和 WM_NAME 分配操作（浮动、忽略、转到另一个工作区等）（在终端中使用“xprop”找到，然后单击窗口）和无论出于何种原因，此小书签创建的弹出窗口都会忽略我为其设置的设置，并将其自身与其他窗口平铺（我希望它弹出/浮动......默认情况下它在非平铺 WM 中的方式）。

所以我的问题是，这段代码中是否有某些东西正在执行此操作和/或任何可以添加/省略以使其执行我想要的操作？

谢谢

编辑：

*   [xmonad.hs](http://pastebin.com/s1XqyerZ)（第 183 行以上）
*   [xprop](http://pastebin.com/f4P4Fcmw)（第 145 行以上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:13:35.047

您不能真正依赖在创建窗口时正确设置的标题。您可能必须使用其他属性才能找到从一开始就正确设置的一些属性。您可能会尝试类似的东西`isInProperty "WM_WINDOW_ROLE" "pop-up"`而不是`title =? "Google - Bookmarks - Chromium"`或类似的东西。

# ios - 项目在 XCode 中编译，但 XCodeBuild 产生错误“No architectures ...”

> ID：14822322
> 
> 赞同：2
> 
> 时间：2013-02-11T22:44:02.460
> 
> 标签：ios, xcode, xcodebuild

我的项目在 Xcode 中构建时编译得很好，但是当我尝试使用 xcodebuild 构建它时它失败了，输出的最后一行是：

```
=== BUILD NATIVE TARGET XXX OF PROJECT YYY WITH CONFIGURATION Debug ===
Check dependencies
No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=x86_64, VALID_ARCHS=armv7 armv7s). 
```

由于最后一行提到了架构，我检查了构建设置中的架构部分，并将其设置为标准（armv7，armv7s）。

我的罪魁祸首是活动 arch=x86_64，如果我更改 Xcode 设置以构建活动架构 = NO，那么它就可以了。

但是活动架构在哪里设置，为什么默认值 x86，我应该将其更改为其他值还是通过将构建活动架构设置为 NO 来解决此问题是正确的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:23:31.383

我得到了相同的解决方案，在我的项目构建设置及其所有子项目中将“架构”设置为标准（armv7，armv7s）并将“仅构建活动架构”设置为否。也可以像这样在命令行中覆盖这些值：

```
xcodebuild -project YourProject.xcodeproj -scheme YourScheme ONLY_ACTIVE_ARCH=NO 
```

干杯

# encoding - 为什么任何编程语言/数据库都需要编码和解码？

> ID：14822323
> 
> 赞同：13
> 
> 时间：2013-02-11T22:44:04.743
> 
> 标签：encoding, language-agnostic

虽然我能够从维基百科理解编码和解码的含义，但我无法理解为什么每种编程语言都需要它们？如果答案与能够从数据库等外部源读取数据有关，那么为什么其中许多采用不同的编码方案？

Ex Python 有一个默认的 ASCII 编码
Java 依赖于底层操作系统，
DB2 数据库有 IBM-1252

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-11T22:46:45.090

大多数人喜欢使用文本。

但是，计算机存储只能使用字节。

编码是将文本转换为字节的过程。

在过去的几十年中，已经为不同的目的开发了许多不同的编码方案，例如简洁、兼容性或国际化。

今天，一切都应该简单地使用 UTF8。（可悲的是，并非一切都如此）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T22:47:53.077

Programmer and user interact with simple plain text format in form of English or other human readable language but computer do not know how to deal with that.Computer can only deal with bytes so Encoding and decoding is necessary.

**Quoted from [http://searchnetworking.techtarget.com/definition/encoding-and-decoding](http://searchnetworking.techtarget.com/definition/encoding-and-decoding):**

> In computers, encoding is the process of putting a sequence of characters (letters, numbers, punctuation, and certain symbols) into a specialized format for efficient transmission or storage. Decoding is the opposite process -- the conversion of an encoded format back into the original sequence of characters. Encoding and decoding are used in data communications, networking, and storage. The term is especially applicable to radio (wireless) communications systems.
> 
> The terms encoding and decoding are often used in reference to the processes of analog-to-digital conversion and digital-to-analog conversion. In this sense, these terms can apply to any form of data, including text, images, audio, video, multimedia, computer programs, or signals in sensors, telemetry, and control systems. Encoding should not be confused with encryption, a process in which data is deliberately altered so as to conceal its content. Encryption can be done without changing the particular code that the content is in, and encoding can be done without deliberately concealing the content.
> The code used by most computers for text files is known as ASCII (American Standard Code for Information Interchange, pronounced ASK-ee). ASCII can depict uppercase and lowercase alphabetic characters, numerals, punctuation marks, and common symbols. Other commonly-used codes include Unicode, BinHex, Uuencode, and MIME. In data communications, Manchester encoding is a special form of encoding in which the binary digits (bits) represent the transitions between high and low logic states. In radio communications, numerous encoding and decoding methods exist, some of which are used only by specialized groups of people (amateur radio operators, for example). The oldest code of all, originally employed in the landline telegraph during the 19th century, is the Morse code.

# c++ - C++ 类构造函数定义为公共的，表示它是受保护的

> ID：14822326
> 
> 赞同：-1
> 
> 时间：2013-02-11T22:44:10.820
> 
> 标签：c++, inheritance, constructor, public, protected

我有一个具有多级继承的项目。它是这样的

`XMLs -> Entity -> Item`然后有许多从 Item 继承的项目类，然后从 Entity 继承。现在，我定义了每个类，如图所示

```
 class Entity: public XMLs
    {
     public: 
            Entity() {}
            virtual ~Entity() {};
         //other functions
    }; 
```

这是给我带来麻烦的一个。每当我尝试在我的主函数中创建一个 Item 对象或任何类型的对象时，它都会给我以下错误

> /usr/include/c++/4.6/ostream: 在构造函数'Entity::Entity()'中：/usr/include/c++/4.6/ostream:363:7: 错误：'std::basic_ostream<_CharT, _Traits>: :basic_ostream() [with _CharT = char, _Traits = std::char_traits]' 受保护

这是什么意思？我在谷歌上搜索的关于构造函数和受保护的所有内容都涉及我公开的关键字 protected。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:50:38.527

Read the message again It doesn't say your constructor is protected, it says `std::basic_ostream`'s constructor is protected. Your class (or a parent thereof) has a `std::basic_ostream` (or maybe `std::ostream`) member, which cannot be default-constructed. You must construct it with an argument. [This page](http://msdn.microsoft.com/en-US/library/3at5becw%28v=vs.80%29.aspx) shows that it must be cosntructed from a `basic_streambuf<Elem, Tr>*`.

Now I'm going to extrapolate: You probably don't actually want a `std::ostream` member in your class, you probably want a specific-derived type, or you want a reference, or (most likely) a an unknown or changable derived type. But since the nieve way to address the first two cases makes your class non-copiable, the final solution is virtually always the same: Use a `std::unique_ptr<std::ostream>` instead if your class owns the stream, or a `std::ostream*` if someone else owns it.

Finally: The full text for errors is in the "output" window of Visual Studio, not in the "Error" Window, which just shows summaries. The full text of that error would have many more details about the error, including (most likely) the name and line number of your class' default constructor.

# .htaccess - htaccess clean url 重定向到文件夹，如果它具有相同的名称

> ID：14822330
> 
> 赞同：2
> 
> 时间：2013-02-11T22:44:18.643
> 
> 标签：.htaccess

我使用了在这里找到的这个脚本：

```
RewriteEngine On

RewriteCond %{THE_REQUEST} ^\w+\ /(.*)\.php(\?.*)?\ HTTP/
RewriteRule ^ http://%{HTTP_HOST}/%1 [R=301]

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule .* $0.php 
```

但是我有一个页面 web.php，它重定向到 /web 但是，因为我也有（一个不相关的）文件夹 /web/，所以我的主目录中的页面 /web(.php) 被重定向到 /web/(index.php)。 php)

有什么办法可以防止这种情况发生吗？我在想如果 /web/index.php 不存在，只需显示 /web(.php) 否则显示 /web/(index.php) 或任何可以完成此操作的东西。

# r - R tm 语料库对象的拆分样本

> ID：14822333
> 
> 赞同：1
> 
> 时间：2013-02-11T22:44:29.417
> 
> 标签：r, tm

我正在使用 R tm 包，试图将我的语料库拆分为训练集和测试集，并将其编码为元数据以供选择。最简单的方法是什么（假设我试图将样本分成两半）？

以下是我尝试过的一些事情：

1.  我知道当我打字时...

> ```
> > meta(d)
>     MetaID Y
> 1        0 1
> 2        0 1 
> ```

我看到了 ID，但似乎无法访问它们（为了说前半部分属于一组，而第二部分属于另一组）。 `rownames(attributes(d)$DMetaData)`给了我索引，但这看起来很难看，它们是因素。

1.  现在，在转换为数据框后，说 d 是我的数据集，我只是说：

> ```
> half <- floor(dim(d)[1]/2)
> d$train <- d[1:half,]
> d$test <- d[(half+1):(half*2),] 
> ```

但是我怎么能轻松地做类似的事情......

```
meta(d, tag="split") = ifelse((meta(d,"ID")<=floor(length(d)/2)),"train","test") 
```

...得到如下结果：

> ```
> > meta(d)
>     MetaID Y split
> 1        0 1 train
> 2        0 1 train
> ...      . . ...
> 100      0 1 test 
> ```

不幸的是，`meta(d,"ID")`不起作用，但`meta(d[[1]],"ID") == 1`确实如此，但它是多余的。我正在寻找一种访问元 ID 的全向量方式，或者一种更智能的子集化方式并分配给“拆分”元变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T01:59:12.150

语料库只是一个列表。所以你可以像普通列表一样拆分它。这里有一个例子：

我创建了一些数据。我使用`tm`包内的数据

```
txt <- system.file("texts", "txt", package = "tm")
(ovid <- Corpus(DirSource(txt)))
A corpus with 5 text documents 
```

现在我将数据拆分为训练和测试

```
nn <- length(ovid)
ff <- as.factor(c(rep('Train',ceiling(nn/2)),   ## you create the split factor as you want
                rep('Test',nn-ceiling(nn/2))))  ## you can add validation set for example...
ll <- split(as.matrix(ovid),ff)
ll
$Test
A corpus with 2 text documents

$Train
A corpus with 3 text documents 
```

然后我分配新标签

```
ll <- sapply( names(ll),
              function(x) {
                meta(ll[[x]],tag = 'split') <- ff[ff==x]
                ll[x]
              }) 
```

您可以检查结果：

```
lapply(ll,meta)
$Test.Test
  MetaID split
4      0  Test
5      0  Test

$Train.Train
  MetaID split
1      0 Train
2      0 Train
3      0 Train 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T20:35:59.147

```
## use test corpus crude in tm
library(tm)
data(crude)

#random training sample
half<-floor(length(crude)/2)
train<-sample(1:length(crude), half)

# meta doesnt handle lists or vector very well, so loop:
for (i in 1:length(crude)) meta(crude[[i]], tag="Tset") <- "test"
for (i in 1:half) meta(crude[[train[i]]], tag="Tset") <- "train"

# check result
for (i in 1:10) print(meta(crude[[i]], tag="Tset")) 
```

这似乎有效。

# java - 在 Java 中使用 BufferedReader 读取整个字符流

> ID：14822335
> 
> 赞同：0
> 
> 时间：2013-02-11T22:44:40.757
> 
> 标签：java, servlets, bufferedreader

我正在编写一个简单的 AJAX 应用程序，它从 JSP 上的表单中获取输入，然后使用 JSON 将数据传递给 servlet。在 servlet 中，我有以下快速而肮脏的代码：

```
 char[] charBuffer = new char[500];
    String[] names;
    String[] values = new String[20];
    int amountRead;

    JSONObject jsonObject1;
    JSONObject jsonObject2;

    PrintWriter out = response.getWriter();
    BufferedReader in = request.getReader();

    amountRead = in.read(charBuffer);

    charBuffer[amountRead]='\0';
    String invalue = new String( charBuffer, 0, amountRead); 
```

然后是一个`try`对 JSON 对象执行一些操作的块。基本上，作为练习，我试图来回传递相同的表单数据并显示它。

**这就是问题所在：**当然，在这个快速而肮脏的代码中，不能保证您从请求中获得完整的消息。知道如果到达流的末尾，`read()`方法`BufferedReader`将返回-1，我尝试进行以下添加：

```
 while( in.read() != -1 ) {
         amountRead = in.read(charBuffer); 
    } 
```

然而，一旦我实现了这个，我的输出就是空白的。我什么也得不到。即使在尝试使用调试器逐步完成它之后，我也不完全确定为什么该`while`循环没有达到预期的效果。

我敢肯定这是一件简单而愚蠢的事情。有人可以指出我的方式的错误吗？与往常一样，提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:55:57.310

如果您没有获得 EOS，您正在读取一个字符然后将其丢弃。在 Java 中读取流的正确方法是这样的：

```
while ((count = in.read(buffer)) > 0)
{
   out.write(buffer, 0, count);
   // or
   String s = new String(buffer, 0, count);
   // or whatever else you want.
} 
```

您也不需要插入尾随空字符。那是C主义。您已经通过指定计数来限制字符串，因此甚至从未见过空字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:00:15.250

该[`BufferedReader.readLine()`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)方法一次只读取一行，每次读取都会阻塞，直到数据可用。当到达流的末尾时，它将返回 null。

所以在一个while循环中你可以使用

```
String line;
BuffererReader br = request.getReader();
while ((line = br.readLine()) != null) { 
    //process the line here
} 
```

您还可以使用类似的库`Gson`，它可以为您[反序列化 Java 类`Reader`](http://google-gson.googlecode.com/svn/tags/1.3/docs/javadocs/com/google/gson/Gson.html#fromJson%28java.io.Reader,%20java.lang.Class%29)。

# linux - Dropbear客户端配置文件？

> ID：14822338
> 
> 赞同：1
> 
> 时间：2013-02-11T22:44:46.290
> 
> 标签：linux, ssh, angstrom-linux

有人知道 Dropbear SSH 客户端在哪里寻找配置文件吗？我需要指定默认使用的某个身份文件。例如，我可以设置 dropbear 客户端以便我可以使用

```
$ dbclient user@host 
```

代替

```
$ dbclient -i my/rsa/key user@host 
```

?

PS：我几乎坚持使用 Dropbear 而不是 OpenSSH，因为我在运行 Angstrom 的嵌入式 linux 上。

编辑：或者，默认情况下，dropbear 客户端在哪里查找身份文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-25T17:29:25.903

你可以创建一个 shell 别名...我将此行添加到我的个人资料中

```
alias ssh='ssh -i $HOME/.ssh/id_rsa' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-23T21:03:45.070

新的 dropbear (v2017 ..) 有一个默认 id .ssh/id_dropbear 查看帮助：-i (允许多个，默认 .ssh/id_dropbear)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T22:56:35.207

请参阅[http://yorkspace.wordpress.com/2009/04/08/using-public-keys-with-dropbear-ssh-client/](http://yorkspace.wordpress.com/2009/04/08/using-public-keys-with-dropbear-ssh-client/)

Dropbear 不查找身份文件，您必须在命令行中提供

# c - C中的类型安全枚举？

> ID：14822342
> 
> 赞同：10
> 
> 时间：2013-02-11T22:45:30.157
> 
> 标签：c, enums

如果我有多个`enum`，例如：

```
 enum Greetings{ hello, bye, how };

 enum Testing { one, two, three }; 
```

我怎样才能强制使用正确的`enum`？例如，为了更好的调试和可读性，我不希望有人`hello`在他们应该使用的时候使用。`one`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T23:09:23.630

在 C 中，您可以使用样板代码来伪造它。

```
typedef enum { HELLO_E, GOODBYE_E } greetings_t;
struct greetings { greetings_t greetings; };
#define HELLO ((struct greetings){HELLO_E})
#define GOODBYE ((struct greetings){GOODBYE_E})

typedef enum { ONE_E, TWO_E } number_t;
struct number { number_t number; };
#define ONE ((struct number){ONE_E})
#define TWO ((struct number){TWO_E})

void takes_greeting(struct greetings g);
void takes_number(struct number n);

void test()
{
    takes_greeting(HELLO);
    takes_number(ONE);

    takes_greeting(TWO);
    takes_number(GOODBYE);
} 
```

这不应该产生任何开销，并且会产生**错误**而不是警告：

```
$ gcc -c -std=c99 -Wall -Wextra test2.c
test2.c：在函数“测试”中：
test2.c:19：错误：“takes_greeting”的参数 1 的类型不兼容
test2.c:20：错误：“takes_number”的参数 1 的类型不兼容

```

请注意，我没有使用 GNU 扩展，并且不会生成虚假警告。只有错误。另请注意，我使用的 GCC 版本与泥土一样古老，

```
$ gcc --版本
powerpc-apple-darwin9-gcc-4.0.1 (GCC) 4.0.1 (Apple Inc. build 5493)
版权所有 (C) 2005 Free Software Foundation, Inc.
这是免费软件；查看复制条件的来源。没有
保修单; 甚至不考虑适销性或特定用途的适用性。

```

这应该适用于任何支持 C99 复合文字的编译器。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-11T22:48:54.863

Clang produces the following warning, which is the best you can do (Although the user could upgrade the warning to an error).

```
enum Greetings { hello, bye, how };
enum Count { one, two, three };

void takes_greeting(enum Greetings x) {}
void takes_count(enum Count x) {}

int main() {
    takes_greeting(one);
    takes_count(hello);
} 
```

Compiler output:

```
cc     foo.c   -o foo
foo.c:8:17: warning: implicit conversion from enumeration type 'enum Count' to different enumeration type 'enum Greetings' [-Wenum-conversion]
        takes_greeting(one);
        ~~~~~~~~~~~~~~ ^~~
foo.c:9:14: warning: implicit conversion from enumeration type 'enum Greetings' to different enumeration type 'enum Count' [-Wenum-conversion]
        takes_count(hello);
        ~~~~~~~~~~~ ^~~~~ 
```

If users are going to ignore errors and warnings from the compiler, then there's not much you can do to help them.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T23:09:20.267

不幸`enum`的是，这是 C 类型系统中的一个弱点。类型的变量属于`enum`该`enum`类型，但您使用 声明的常量`enum`属于 type `int`。

所以在你的例子中

```
enum Greetings{ hello, bye, how };
enum Testing { one, two, three };

enum Greetings const holla = hello;
enum Testing const eins = one; 
```

`hello`和`one`是相同值的两个名称，即`0`和 具有相同的类型`int`。

`holla`并`eins`再次具有 value `0`，但具有各自的类型。

如果您想为“真实”常量强制一些“官方”类型安全，即具有您想要的类型和值的实体，您必须使用一些更复杂的构造：

```
#define GREETING(VAL) ((enum Greetings){ 0 } = (VAL))
#define HELLO GREETING(hello) 
```

宏中的赋值`GREETING`确保结果是一个“右值”，因此它不能被修改，编译器只会根据它的类型和值来获取它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-11T22:59:48.757

这是你不想听到的答案。在 C 中，你真的不能。现在，如果您的 C 代码位于 C++ 的“清洁 C”子集中，您可以使用 C++ 编译器进行编译，以获取使用错误枚举/整数值等的所有错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-01T15:20:39.357

如果您还想确保有效范围，那么有一种技术会带来用于获取整数值的指针取消引用的少量开销——以及大量的样板输入。它可能仍然有用，因为它利用您编写范围检查代码，否则它是必要的。

问候.h：

```
#ifndef GREETINGS_H
#define GREETINGS_H

struct greetings;
typedef struct greetings Greetings;

extern const Greetings * const Greetings_hello;
extern const Greetings * const Greetings_bye;
extern const Greetings * const Greetings_how;

const char *Greetings_str(const Greetings *g);
int Greetings_int(const Greetings *g);

#endif 
```

问候.c：

```
#include "greetings.h"

struct greetings {
    const int val;
};

static const Greetings hello = { 0 };
static const Greetings bye = { 1 };
static const Greetings how = { 2 };

const Greetings * const Greetings_hello = &hello;
const Greetings * const Greetings_bye = &bye;
const Greetings * const Greetings_how = &how;

static const char * const Greetings_names[] = {
    "hello",
    "bye",
    "how"
};

const char *
Greetings_str(const Greetings *g)
{
    return Greetings_names[g->val];
}

int
Greetings_int(const Greetings *g)
{
    return g->val;
} 
```

示例 main.c：

```
#include <stdio.h>
#include "greetings.h"

void
printTest(const Greetings *greeting)
{
    if (greeting == Greetings_how) return;
    puts(Greetings_str(greeting));
}

int
main()
{
    const Greetings *g = Greetings_hello;
    printTest(g);
} 
```

是的，要输入很多，但是您可以获得完整的类型和范围安全性。没有其他编译单元可以实例化 a `struct greetings`，所以你是完全安全的。

* * *

编辑 2015-07-04：为了防止 NULL，有两种可能性。要么使用 NULL 作为默认值（`#define Greetings_hello 0`而不是现在使用的指针）。这非常方便，但会降低默认枚举值的类型安全性，NULL 可用于任何枚举。或者声明它无效，然后在访问器方法中检查它，返回错误，或者使用 GCC 之类的东西`__attribute__((nonnull()))`在编译时捕获它，例如在 greetings.h 中：

```
const char *Greetings_str(const Greetings *g)
        __attribute__((nonnull(1))); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-11T22:48:32.803

You can typedef your enums and then declare variables and function arguments of those types.

# arrays - 使用 VBA for Excel 在数组或字典中创建、填充和删除条目

> ID：14822345
> 
> 赞同：1
> 
> 时间：2013-02-11T22:45:34.563
> 
> 标签：arrays, excel, vba, dictionary, populate

我是 VBA 新手，但我花了很多时间寻找一些代码来帮助解决我的情况，如下所示：

为简单起见，我将通过一个示例说明我要完成的工作：

假设我有一堆具有唯一编号的弹珠，我想将它们放入编号的类别中。

例如：

```
在“时间'1.0'”“大理石'1'”被“分类”到“组'1'”   
在“时间'2.0'”“大理石'2'”被“分类”到“组'2'”等。
在“时间'3.0'”“大理石'1'”被“分类”到“组'3'”

```

因此在时间 3.0 Marble 1 被归类为第 1 组和第 2 组。

我创建了一个按钮，允许我输入“Marble #”和“Time”，并报告 Marble 是否在给定时间被分类，如果是，是哪个组，如果不是，它是最后一个组。

当 Marble 仅被分类为 1 组时，这工作得很好，但是当出现 Marble 被分类为多个组然后从其中一个组中删除的情况时，即

............在“时间'4.0'”“大理石'1'”是“组'1'”中的“未分类”

我有限的代码会删除任何分类记录，并简单地将最近的分类报告为“它所在的最后一个分类”，即

大理石 # = 1，时间 = 5.0 结果 = “未分类” 最后一个类别 = “组 '1'” 实际上它仍然“分类”为“组 '2'”。

总之，我需要一个代码，允许我输入“Marble #”和“Time”，并告诉我在那个特定时间“Marble”是否是“Categorized”，如果是，它是哪个“Group”“Categorized”到，如果不是，那么它被“分类”到的最后一个“组”是什么。

我在下面发布了我的代码。. 请记住，这是我的第一个 VBA 代码，它是通过 Google 搜索和反复试验一起被科学怪人发现的。. . *** *（注意单元格（15,8）和单元格（18,8）分别是“输入大理石编号”和“输入时间”）* ***（第 1、2、3、4 列是大理石编号、分类、组编号和时间分别）*** *

```
私有子 CommandButton2_Click()
Dim 分类为字符串、i 为整数、分组为整数

Count = Application.CountA(Range("A:A"))

对于 i = 1 计数

    如果 Cells (i, 1).Value = Cells(15, 8) And Cells (i, 4).Value <= Cells (18, 8) And Cells (i, 2) = "CATEGORIZE" Then Categorized = "CATEGORIZED"

    如果 Cells (i, 1).Value = Cells(15, 8) And Cells (i, 4).Value <= Cells (18, 8) And Cells (i, 2) = "UNCATEGORIZE" Then Categorized = "NOT CATEGORIZED "

    如果 Cells (i, 1).Value = Cells(15, 8) And Cells (i, 4).Value <= Cells (18, 8) And Cells (i, 2) = "CATEGORIZE" Then Group = Cells(i , 3)

接下来我

    If Categorized = "CATEGORIZED" Then MsgBox Categorized & " Categorized to " & Group
    If Categorized = "NOT CATEGORIZED" Then Msgbox Categorized & " 最后分类到 " & Group
    If Categorized = "" Then Msgbox "Marble does not exist before this time"

结束子

```

此外，在不同时间有多个重复条目，即

```
在“时间'1.0'”“大理石'1'”被“分类”到“组'1'”
在“时间'1.1'”“大理石'1'”被“分类”到“组'1'”
在“时间'1.4'”“大理石'1'”被“分类”到“组'1'”

```

重复的 "Categorizations" 的数量与我无关，它是 "Categorized" 或 "UnCategorized" 。. . （无论您按“开”按钮多少次，如果您按“关”按钮，灯就会熄灭 :)）

非常感谢您的帮助。请保持建设性的批评，因为我已经提到这是我的第一个 VBA 代码。谢谢你。

# unix - 如何在不更改目录的情况下列出所有不以 5-9 结尾的文件

> ID：14822347
> 
> 赞同：-2
> 
> 时间：2013-02-11T22:45:38.750
> 
> 标签：unix

我需要一次列出 2 个不同目录的父文件夹中的所有文件。我已经尝试过`ls [directory] [directory] *[!5-9]`，`ls [directory] [directory] ?[!5-9]`但他们没有工作。我尝试过使用不同的变体；和 || 但那些也不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:54:05.793

用这个

```
 ls [directory] [directory] | grep -v '[5-9]$' 
```

Grep 用于匹配正则表达式。它真的很有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:53:58.183

尝试使用这个：

```
ls [directory] [directory] | grep [^5-9]\$ 
```

插入符号`^`否定您指定的范围，并`\$`防止 bash 解释印记，但也确保它位于行尾。

# c# - 无需浏览器或视图的 mvc 客户端访问

> ID：14822348
> 
> 赞同：0
> 
> 时间：2013-02-11T22:45:40.030
> 
> 标签：c#, asp.net-mvc, web-services, asp.net-mvc-4

我有一个 MVC4 C# 应用程序，我想允许客户端通过代码访问（没有浏览器或视图）。客户端将发送一个用户 ID，该用户 ID 将用于查找记录并返回三个字段。传入和传出数据都是敏感信息，因此我需要一个安全的解决方案。该应用程序正在使用 SSL (https) 的站点上运行，如果我按照两个答案的建议使用 JSON 解决方案，这会保护我免受 JSON 劫持吗？

```
public ActionResult InAction(string id)
{ 
  // code to retrieve record and return three fields field1, field2, field3

  return (what would go here?)
} 
```

我什至可以使用控制器动作来处理这个问题吗？我是否需要一个完整的 Web 服务来执行此操作，如果需要，任何指向优秀 MVC 教程的链接都会有所帮助？

客户端在 ASP（webforms）中工作，并且正在谈论一个带有键值对的响应者页面，我将如何在 MVC 中做同样的事情。

非常感谢任何让我前进的帮助。

谢谢

**更新：**我已将 Brett 的 JSON 建议标记为答案。我正在返回一个字符串（不是数组）并且整个事务是通过 SSL 连接进行的，所以我相信 JSON 劫持的可能性不是问题。

```
 string response = field1 + "," + field2 + "," + field3;
  return Json(response), JsonRequestBehavior.AllowGet; } 
```

如果我错了，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:04:50.140

正如 nikeaa 提到的，只需在控制器中创建一个返回 JsonResult 的操作

```
public JsonResult InAction(string id)
{
    // get some object from repository
    var repository = new ObjectRepository();
    var returnObj = repository.GetObject(id);
    return Json(returnObj, JsonRequestBehavior.AllowGet);
} 
```

您需要指定 JsonRequestBehaviour.AllowGet 来覆盖默认的 .DenyGet。但是，这会在使用 GET 请求返回 JSON 时打开一个安全漏洞。 [有关详细信息，请参阅此 StackOverflow 答案。](https://stackoverflow.com/a/8464685/787317)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:51:30.480

这取决于您想要返回数据的格式。例如，如果您想要以 JSON 格式返回数据，您可以使用以下内容：

```
return (Json(userResultModel)); 
```

您可能还希望将方法的返回类型更改为 JsonResult。

# flash - AlivePdf 如何设置字体？

> ID：14822349
> 
> 赞同：0
> 
> 时间：2013-02-11T22:45:45.420
> 
> 标签：flash, apache-flex, actionscript, alivepdf

我正在尝试使用 Alivepdf 库在 flex 中创建 pdf。

我无法设置字体，可能是因为网站上的示例错误并且他们对代码进行了一些更改。

在[http://code.google.com/p/alivepdf/wiki/APINotes](http://code.google.com/p/alivepdf/wiki/APINotes)上有一些示例，例如：

```
pdf.setFont( FontFamily.ARIAL , "", 32); 
```

但在文档中，setfont 接受 IFont 作为第一个参数。

那么，我该如何设置这个 IFont？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:05:56.577

在您的情况下，我会使用嵌入字体来独立于用户 PC 上的字体。

您需要一个 *.ttf 和一个生成的 *.afm 文件（在网络中有一些工具可以做到这一点）。

如果您需要带有另一个字符集的文本块，它也很有用（这里是如何使用西里尔字母的示例）

![在此处输入图像描述](../Images/64fd50aa99e476df768fc2b225343175.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" width="500" height="500">
<fx:Script>
    <![CDATA[
        import org.alivepdf.colors.RGBColor;
        import org.alivepdf.display.Display;
        import org.alivepdf.fonts.CodePage;
        import org.alivepdf.fonts.EmbeddedFont;
        import org.alivepdf.layout.Layout;
        import org.alivepdf.layout.Orientation;
        import org.alivepdf.layout.Unit;
        import org.alivepdf.pages.Page;
        import org.alivepdf.pdf.PDF;
        import org.alivepdf.saving.Method;

        private var myPDF:PDF;

        [Embed( source="/assets/fonts/times2.ttf", mimeType="application/octet-stream" )]
        public var timesRegularTtf:Class;
        [Embed( source="/assets/fonts/times2.afm", mimeType="application/octet-stream" )]
        public var timesRegularAfm:Class;
        private var timesRegularFont:EmbeddedFont = new EmbeddedFont(new timesRegularTtf() as ByteArray, new timesRegularAfm() as ByteArray, CodePage.CP1251);

        [Embed( source="/assets/fonts/timesbd3.ttf", mimeType="application/octet-stream" )]
        public var timesBoldTtf:Class;
        [Embed( source="/assets/fonts/timesbd3.afm", mimeType="application/octet-stream" )]
        public var timesBoldAfm:Class;
        private var timesBoldFont:EmbeddedFont = new EmbeddedFont(new timesBoldTtf() as ByteArray, new timesBoldAfm() as ByteArray, CodePage.CP1251);

        protected function savePDF(e:MouseEvent):void
        {
            var myPDF:PDF = new PDF( Orientation.PORTRAIT, Unit.MM); 
            myPDF.setDisplayMode( Display.FULL_PAGE, Layout.SINGLE_PAGE );

            var newPage:Page = new Page ( Orientation.PORTRAIT, Unit.MM);
            myPDF.addPage(newPage);

            myPDF.textStyle ( new RGBColor ( 0xff0000 ) );
            myPDF.setFont(timesRegularFont, 12);
            myPDF.setXY(10, 20);
            myPDF.writeText(1, "Hello World!");

            myPDF.textStyle ( new RGBColor ( 0x0000ff ) );
            myPDF.setFont(timesBoldFont, 20);
            myPDF.setXY(10, 40);
            myPDF.writeText(1, "Hello World!");

            myPDF.textStyle ( new RGBColor ( 0x00ff00 ) );
            myPDF.setFont(timesBoldFont, 24);
            myPDF.setXY(10, 60);
            myPDF.writeText(1, fromUtf8ToSomeCode("Привет, Мир!", "windows-1251"));

            var f:FileReference = new FileReference();
            var b:ByteArray = myPDF.save(Method.LOCAL);
            f.save(b, "test.pdf");
        }

        private function fromUtf8ToSomeCode(data:String, code:String):String
        {
            var b:ByteArray = new ByteArray();

            if (data.length > 0)
                b.writeMultiByte(data, code);

            return b.toString();
        }   
    ]]>
</fx:Script>    

<s:Button label="Save to PDF" click="savePDF(event)"/>
</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T11:07:51.017

对于波兰字符：编辑文件 org/alivepdf/pdf/PDF.as 并找到代码行 (4776)

```
buffer.writeMultiByte( content+"\n", "windows-1252" ); // jakiś idiota programista wstawił to na sztywno :/ 
```

改成：

```
buffer.writeMultiByte( content+"\n", "windows-1250" ); 
```

# python - 如何使用向量来实现与此相同的效果

> ID：14822352
> 
> 赞同：4
> 
> 时间：2013-02-11T22:46:05.247
> 
> 标签：python, python-3.x, blender

经过大量工作，我在 Python 中开发了以下代码来绘制一个向量 [在这种情况下为 (2,2,2)]，以便它以您期望的方式指向原点。我花了一些时间来收集三个旋转参数在横滚、俯仰和偏航方面的含义。您可能需要设置 Euler XYZ。

我使用了一个细长的圆柱体作为我的矢量，这符合我的目的，也符合我对搅拌机的瘦身体验。这段代码在中途绘制了一个带有箭头的向量（一个圆锥），非常适合我的目的，但有点麻烦。我适用于大多数向量，但当 x<0 和 y>0 和 z>0 时失败

```
import bpy
import math
from math import *
x=-5  
y=-10
z=12
yParameter=-1.0
if y < 0:
    if x < 0: 
        yParameter = 1.0
#print ("y para is ",yParameter
for i in range (0,1):

    length=sqrt(z*z+y*y+x*x)

#Create a vector at correct orientation at the origin
bpy.ops.mesh.primitive_cylinder_add(vertices=16, radius=0.04, depth=length, end_fill_type='NGON', view_align=False, enter_editmode=False, location=(0,0,0),rotation=(-acos(z/sqrt(x*x+y*y+z*z)),0,yParameter*acos(y/sqrt(x*x+y*y))))
bpy.ops.transform.translate(value=(x/2, y/2, z/2))

bpy.ops.mesh.primitive_cone_add(vertices=32, radius1=0.1, radius2=0, depth=0.4, end_fill_type='NGON', view_align=False, enter_editmode=False, location=(0,0,0), rotation=(-acos(z/sqrt(x*x+y*y+z*z)),0,yParameter*acos(y/sqrt(x*x+y*y)))) 
```

bpy.ops.transform.translate(值=(x/2, y/2, z/2))

我确信向量和矩阵操作中的巨大 API 应该使这项工作更容易，但我正在努力寻找除了这个自行开发的笛卡尔工作之外的方法。

任何人都可以向我指出一个可以理解的代码片段，或者一个关于如何在搅拌机 python 中操作向量（在数学意义上）的教程

我发现搅拌机 API 对参数的名称以及如何对其进行编码非常清楚，但我几乎找不到或根本找不到参数的实际含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:56:22.430

这将为您创建一个圆柱体，一端为 (0,0,0)，另一端为 (x,y,z)：

```
def createVectorLikeThing(x,y,z):
    v = Vector((x,y,z))
    up = Vector((0,0,1))
    if v!=-up:
        rot = up.rotation_difference(v)
    else:
        rot = Quaternion((1,0,0),pi)
    bpy.ops.mesh.primitive_cylinder_add(vertices=16, radius=0.01, depth=v.length, end_fill_type='NGON', view_align=False, enter_editmode=True)
    bpy.ops.transform.translate(value=(0,0,v.length/2))
    bpy.ops.object.editmode_toggle()
    bpy.ops.transform.rotate(value=(rot.angle,), axis=rot.axis) 
```

该代码适用于搅拌机 2.63，但**不适**用于 2.65。

对于 2.65，将最后一行更改为：

```
 bpy.ops.transform.rotate(value=rot.angle, axis=rot.axis) 
```

# html - 我有一个形状奇特的图像，里面有文字。即使在滚动时，如何让文本留在图像中？

> ID：14822365
> 
> 赞同：0
> 
> 时间：2013-02-11T22:46:58.233
> 
> 标签：html, css, image

我的页面上有一张图片，边缘粗糙，看起来有点撕裂，并且有一个内部阴影，看起来像是页面的缩进。我希望它上面的内容在图像边缘下方滚动而不超出可见图像。该图像是PNG，并且在撕裂效果周围是透明的，但我仍然无法将其隐藏在背景下。

[http://kellygoekenphotography.com/portfolio.php](http://kellygoekenphotography.com/portfolio.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:56:59.230

看起来你快到了。

对于您的 cotext div，尝试将其放置在距顶部 20px 的位置。

```
<div id="cotext" style="position:relative;top:20px;"> 
```

这种方式应该更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:04:19.540

问题是您只有一张图像。它是否透明都不会影响它，因为无论如何，它都在文本下方（否则您将无法看到文本）。您要做的是将其分成两个图像；一个只有**背景**（银色闪亮部分），另一个只有撕开的部分和**透明**的中心。然后，您可以将背景图像放在文本下方，将剪切图像放在文本顶部（在 z-index 中）。

**编辑：**

好的，我没有注意到您的背景图像外部是透明的。你想要做的是：

*   保持背景图像不变
*   获取原始图像文件（我假设是 Photoshop），并将外部设置为白色而不是透明。
*   然后取中心并使其透明。所以你应该有的只是它周围的白框。
*   摆脱任何图层效果
*   将该图像保存为前景
*   使文本在背景顶部滚动，就像您最初拥有它一样
*   将此新图像放置在该区域的正上方，与背景图像完全相同

**编辑2：**

我刚刚意识到这也行不通，因为您的页面背景不是白色的，但它有某种曲折的东西。因此，我想到了另一种选择。

BG 图像将是银色背景，上面**没有**图层效果。只是普通的旧普通银色部分，但周围的透明边框保持原样。

顶部图像将**仅**是透明背景上的图层效果，没有银色部分。对于此图像，请确保在图像周围也保留透明边框。

这样文本将位于阴影效果下方，因此当它在顶部滚动时，突然的剪切线不会那么明显。您可能会看到一点，但它至少会最小化影响。当然，阴影效果也会出现在图像和文本之上，所以你可能也不喜欢这个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:53:39.073

替换此行

```
<div id="content"> 
```

有了这个

```
<div id="content" style="margin-top: 22px;"> 
```

# javascript - Javascript 中的 IP 地址解析器

> ID：14822368
> 
> 赞同：11
> 
> 时间：2013-02-11T22:47:04.443
> 
> 标签：javascript, parsing, ip-address

为 Javascript 寻找一个好的 IP 地址解析器。

理想情况下，它可以将 IP 地址作为字符串接收，然后返回一个对象，其中包含 IP 地址的所有部分，包括端口。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:48:08.127

```
 function parseIP(ip) {
   if(ip.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3})/)!=null)  {
     ip = ip.match(/(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/);  //clean posible port or http://
      return ip.split(".");   //returns [a,b,c,d] array
   }
   else 
      return false;
 } 
```

That will do it. Split method splits string by delimiter. Its opposite is `Array.join(delimiter)`, which joins the array with optional `delimiter` between the pieces.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T22:54:14.157

```
var v4 = '[\\d]{1-3}';
var v4d = '\\.';
var v4complete = v4+v4d+v4+v4d+v4+v4d+v4
var v6 = '[\\da-fA-F]{0-4}';
var v6d = ':';
var v6complete = v6+v6d+v6+v6d+v6+v6d+v6+v6d+v6+v6d+v6+v6d+v6+v6d+v6;
var regex = new RegExp('(' + v4complete + '(\\:\d+){0,1}|'
                           + '::|::1|'
                           + '\\[::\\]:\\d+|\\[::1\\]:\\d+|'
                           + v6complete + '|'
                           + '\\[' + v6complete + '\\]:\\d+' + ')', 'g');
var result = mystring.match(regex); 
```

请注意，这不能保证地址有效（例如，IPv4 的范围为 0-255）。但它应该匹配带有或不带有端口的ip。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-07T20:42:15.293

我在 JS 中实现[安全浏览 url 规范化](https://developers.google.com/safe-browsing/v4/urls-hashing#canonicalization)时遇到了这个问题。这里的答案很有帮助，这是我想出的一些 JS，它们可以处理八进制和十六进制 IP 地址，以防将来对其他人有帮助：

```
function verifyIP4(address) {
  var ip4DecimalPattern = '^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))$';
  var ip4HexPattern = '^(?:(?:0x[0-9a-f]{1,2})\.){3}(?:0x[0-9a-f]{1,2})$';
  var ip4OctalPattern = '^(?:(?:03[1-7][0-7]|0[12][0-7]{1,2}|[0-7]{1,2})\.){3}(?:03[1-7][0-7]|0[12][0-7]{1,2}|[0-7]{1,2})$';

  var isIP4Decimal = isIP4Hex = isIP4Octal = false;
  var base = 10;

  isIP4Decimal = address.match(ip4DecimalPattern) != null;
  isIP4Hex = address.match(ip4HexPattern) != null;
  isIP4Octal = address.match(ip4OctalPattern) != null;

  if (isIP4Hex || isIP4Octal) {
    if (isIP4Hex) {
      base = 16;
    } else if (isIP4Octal) {
      base = 8;
    }
    return address.split('.').map(num => parseInt(num, base)).join('.');
  }
  return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T23:31:47.260

这就是我想出的。

*   它解析旧的 IP 地址，而不是新的 IPv6。
*   它也不进行验证，这只会成为我用例的障碍。

::

```
// REGEX to break an ip address into parts
var ip_regex = /(\d+)\.(\d+)\.(\d+)\.(\d+)(?:\.(\d+))?(?::(\d+))?/ig;

// Parse the ip string into an object containing it's parts
var parse_ip_address = function(ip_string){

    // Use Regex to get the parts of the ip address
    var ip_parts = ip_regex.exec(ip_string);

    // Set ip address if the regex executed successfully
    if( ip_parts && ip_parts.length > 6 ){
        // Set up address object to elements in the list
        var ip_address = {
            'A':     ip_parts[1],
            'B':     ip_parts[2],
            'C':     ip_parts[3],
            'D':     ip_parts[4],
            'E':     ip_parts[5],
            'port':  ip_parts[6]
        }
        // Would rather not fiddle with 'undefined' value
        if( typeof ip_parts[5] != 'undefined') {
            ip_address[5] = null;
        }
    }

    // Return object
    return ip_parts;
}; 
```

# ssl - PayPal DoDirectPayment fails with SSL if CURLOPT_SSL_VERIFYPEER is true

> ID：14822372
> 
> 赞同：0
> 
> 时间：2013-02-11T22:47:25.620
> 
> 标签：ssl, paypal-sandbox

Using [this code](http://codepad.org/27Pfe9Fy) (pasted from [this tutorial](http://coding.smashingmagazine.com/2011/09/05/getting-started-with-the-paypal-api/)), I get a successful PayPal DoDirectPayment method execution. Note that CURLOPT_SSL_VERIFYPEER is set to FALSE.

However when I set the normal value (CURLOPT_SSL_VERIFYPEER = TRUE) I get no response from PayPal, not even a failure response, despite the fact that my code operates on a server with a working SSL certificate (all pages work with HTTPS URLs).

Anybody knows what could cause this problem ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:01:08.467

如果您使用的是有效证书并且问题仍然存在，您可能需要仔细检查您是否以有效格式（X.509 证书 PEM）保存了 CA。我看到您已将 CA 导出到名为 cacert.pem 的文件中 - 确保此文件有效，并且 curl 确实能够检索此文件（有效路径等）

您可以尝试再次导出证书 - 从浏览器（即：firefox），这可以通过在浏览器（即：Firefox）中访问 PayPal https url 来完成 - 并查看证书然后导出它。（确保使用前面所述的正确格式 - X.509 证书 PEM）。

保存 CA 后，您将其传递给 CURLOPT_CAINFO 参数，因为您已经拥有：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "/CAcerts/BuiltinObjectToken-EquifaxSecureCA.crt"); 
```

有关更详细的解释，请访问这篇精彩的文章： [http ://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

引用关于证书的最后一部分：

> 如果您有 CA 证书，但它不是 PEM 格式（即它是二进制或非 Base64 编码的 DER 格式），您需要使用 OpenSSL 之类的东西将其转换为 PEM 格式.

*编辑*- 如果导出证书后出现错误，您还可以尝试使用 X.509 证书 PEM（带链）保存证书

# javascript - Different CSS rules for different languages/modes (CodeMirroe)

> ID：14822374
> 
> 赞同：1
> 
> 时间：2013-02-11T22:47:29.767
> 
> 标签：javascript, css, codemirror

Is there a possibility to make [CodeMirror](http://codemirror.net) highlight different languages in [multi-mode](http://codemirror.net/mode/php/index.html) differently?
I want such classes to apply:

```
.cm-s-default .cm-string-html {color: blue;}
.cm-s-default .cm-string {color: #170;} 
```

When [CodeMirror](http://codemirror.net) highlights the code, it leaves the same class names for the strings, comments and other objects in all languages, but I prefer to have them highlighted differently.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:53:22.143

目前没有方便的方法来做到这一点，但是稍微摆弄一下，您可以包装内部 XML 模式以将字符串附加`"-html"`到所有标记样式中。

# facebook-graph-api - 查询 Ads API 统计信息是否需要开始/结束时间？（如何调整夏令时）

> ID：14822375
> 
> 赞同：4
> 
> 时间：2013-02-11T22:47:44.943
> 
> 标签：facebook-graph-api, facebook-ads-api

我正在尝试查询帐户的广告组统计 API 以获取一整天的数据。

[Facebook 文档建议](http://developers.facebook.com/docs/reference/ads-api/adstatistics/)指定与 ad_account 时区相关的开始和结束日期以及时间（以 UTC 为单位），如以下示例所示：

1) 太平洋时间（2012 年 12 月 8 日）：

```
/adgroupstats?start_time=2012-12-08T08:00:00&end_time=2012-12-09T08:00:00&
stats_mode=with_delivery&include_deleted=true&access_token= 
```

2) 夏令时（2012 年 8 月 8 日）：

```
/adgroupstats?start_time=2012-08-08T07:00:00&end_time=2012-08-09T07:00:00
&stats_mode=with_delivery&include_deleted=true&access_token= 
```

我正在寻找一种更好的方法来解释夏令时，所以我想知道是否可以选择完全排除时间，因为我刚刚过了一整天。

在测试中，我发现以下返回与选项 2 相同的结果，但我想知道这是否是一种可靠的方法，因为它没有记录：

```
/adgroupstats?start_time=2012-08-08T00:00:00&end_time=2012-08-09T00:00:00&
stats_mode=with_delivery&include_deleted=true&access_token= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:30:05.283

您必须提供开始和结束时间。否则将无法知道您想要哪一天的统计数据。

[请参阅统计文档](http://developers.facebook.com/docs/reference/ads-api/adstatistics/)的“查询唯一统计信息” 。

我引用“注意：由于时间以 UTC 表示，您必须在请求中手动调整夏令时”

因此，解决方案应该是如何对您的请求进行编程以调整 DST 的开始/结束时间。

如果您使用的是 PHP，请参阅： [如何在 PHP 中自动检测夏令时？](https://stackoverflow.com/questions/2763935/how-can-i-detect-day-light-savings-automaticaly-in-php)

或： [PHP 夏令时检测](https://stackoverflow.com/questions/6155224/php-daylight-saving-time-detection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:16:44.297

所以回答我自己的问题 - 在最新的 FB API 更新后，不再使用时间戳部分......

作为夏令时问题的解决方法 - 在我的代码中，我在一天内调用 /stats api（使开始日期和结束日期相同并省略时间部分）：

/stats?start_time=2012-08-01T00:00:00&end_time=2012-08-01T00:00:00

我检索此调用的结果并查看 Facebook 返回的时间，以确定 FB 是否针对客户夏令时调整了此查询。

FB返回：“start_time”：“2012-07-31T07:00:00+0000”，

然后我可以用正确的时间查询 /adgroupstats api：

/adgroupstats?start_time=2012-08-01T07:00:00&end_time=2012-08-02T07:00:00

注意：/adgroupstats api 似乎没有返回 FB 调整后的开始时间，所以我使用 /stats api 作为解决方法

# liferay - Liferay：根据需要在组织中标记地址字段

> ID：14822376
> 
> 赞同：0
> 
> 时间：2013-02-11T22:47:50.027
> 
> 标签：liferay

默认情况下，创建组织时，只有名称字段被标记为必填。我如何通过将地址字段标记为必填来修改组织创建过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:46:40.677

参考 Liferay 用户指南（[http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/configuring-liferay-s-properties](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/configuring-liferay-s-properties)），特别是[http://www.liferay .com/documentation/liferay-portal/6.1/user-guide/-/ai/organizations](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/organizations)，有一种方法可以将字段设置为必填项。

环境

```
organizations.country.enabled[regular-organization]=true
organizations.country.required[regular-organization]=true 
```

将该字段标记为必填，即使 UI 中没有指示该字段为必填项。此外，检查是在服务器端执行的，而不是像其他字段那样使用 JavaScript。无论哪种方式，都会执行检查。

# entity-framework - Razor MVC ADO.NET access inherited entity

> ID：14822382
> 
> 赞同：0
> 
> 时间：2013-02-11T22:48:28.850
> 
> 标签：entity-framework, razor, asp.net-mvc-4, ticket-system

I'm currently writing a handy ticketsystem where tickets can be moved to an archive. The ticket entity has many properties and associations to other entities and if I'm right I could just draw an inheritance that inherits all those props and assoc. to an archive entity (see image).

![entity framework inheritance](../Images/e44e1af2db483b49a88dbbcbe03bf745.png)

If my thought is correct I have no idea how to move an entry to the archive in code because I have no clue how to access this inherited archive... ![pseudocode that's not working](../Images/6f76e6ee730aa263f6e5c5d3d269e384.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:49:58.537

Derived entities are part of the collections of their base entities.

To access the first derived entity, you can write

```
db.TicketSet.OfType<Archive>().First() 
```

To add a derived entity, simply add it to the base collection.

# api - Rest api - adding tags to an entity

> ID：14822383
> 
> 赞同：0
> 
> 时间：2013-02-11T22:48:29.733
> 
> 标签：api, rest, tagging, api-design

I am designing a rest api in which I need to add tags to an entity. The entity is created using `POST /content` where the json data is passed in the request body. I want to allow adding tags while the `POST` request is being made, and also later on. This is what I have.

```
POST /content?tag=foo&tag=bar

PUT  /content/{id}?tag=baz&tag=bat 
```

Now, how do I allow deleting tags? What would be a better approach>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:07:51.893

简短的回答：你会这样做吗

假设您的实体是您创建实体的内容，您将：

```
POST /entity 
```

这将创建一个实体并返回一个实体 ID，例如 29292

如果您需要在实体上添加标签，您可以像这样沿着层次结构向下移动：

```
POST /entity/29292/tags 
```

要删除标签，您只需

```
DELETE /entity/29292/tags 
```

长答案：您想学习[本指南](http://www.restapitutorial.com/)以创建具有更多详细信息和最佳实践的 restful api。

# c# - Export data from gridview to Excel with Open Xml

> ID：14822385
> 
> 赞同：0
> 
> 时间：2013-02-11T22:48:39.483
> 
> 标签：c#, asp.net, openxml

So I think I've got the basic mechanics down, yet my data is not being exported. I've followed this [Blog](http://technico.qnownow.com/export-data-gridview-excel-using-openxml/) and my situation is somewhat different in that I'm creating a workbook with two sheets but haven't gotten to that point because I can't eve get the first sheet to populate.

Basically, I'm fetching some data populating two gridviews, the on a button event I do all this work. File names are being generated based on user selection but again that is a non-issue, the instnantiating a spreadsheet object, adding a workbook the spreadsheet, and so on.

So far I've coded only the part for the first spreadsheet and here is what my code looks like. Thanks in advance - Risho.

```
public void btnExport_Click(object sender, System.EventArgs e)
{
    string fileName1 = string.Empty;
    string sheetName1 = "XXXXX Output";
    string sheetName2 = "YYYYY Output";
    if (ddlIntervals.SelectedValue.ToString() == "3")
    {
        fileName1 = @"C:\Temp\XY_Totals_" + ddlSites.SelectedItem.ToString() + ".xlsx";
    }
    else if (ddlIntervals.SelectedValue.ToString() == "2")
    {
        fileName1 = @"C:\Temp\XYbyYear_" + ddlSites.SelectedItem.ToString() + ".xlsx";
    }
    else
    {
        fileName1 = @"C:\Temp\XYByMonth_" + ddlSites.SelectedItem.ToString() + ".xlsx";
    }
    // Create a spreadsheet document by supplying the file name.
    SpreadsheetDocument _spreadsheetDocument = SpreadsheetDocument.Create(fileName1, SpreadsheetDocumentType.Workbook);
    // Add a WorkbookPart to the document.
    WorkbookPart _workbookPart = _spreadsheetDocument.AddWorkbookPart();
    _workbookPart.Workbook = new Workbook();
    // Add a WorksheetPart to the WorkbookPart.
    WorksheetPart _worksheetPart = _workbookPart.AddNewPart<WorksheetPart>();
    // Add Sheets to the Workbook
    Sheets _sheets = _spreadsheetDocument.WorkbookPart.Workbook.AppendChild<Sheets>(new Sheets());
    // Append a new worksheet and associate it with the workbook.
    Sheet _sheet = new Sheet() { Id = _spreadsheetDocument.WorkbookPart.GetIdOfPart(_worksheetPart), SheetId = 1, Name = sheetName1 };
    _sheets.Append(_sheet);
    //_worksheetPart.Worksheet = new Worksheet(new SheetData());
    Worksheet _worksheet = new Worksheet();
    SheetData _sheetData = new SheetData();    // Create sheet object
    UInt32Value _currRowIndex = 1U;   // Initialize row index
    int _colIndex = 0;
    Row _excelRow;
    // Iterate through table rows and add them to the worksheet
    // we're starting with roindex -1 instesd of zero, as we create a header row first
    for (int rowindex = -1; rowindex < GridView1.Rows.Count; rowindex++)
    {
        _excelRow = new Row();
        _excelRow.RowIndex = _currRowIndex++;
        for (_colIndex = 0; _colIndex < GridView1.Columns.Count; _colIndex++)
        {
            Cell _cell = new Cell()
            {
                // Create the cell reference of format A1, B2, etc.
                CellReference = Convert.ToString(Convert.ToChar(65 + _colIndex)),
                DataType = CellValues.String
            };
            CellValue _cellVallue = new CellValue();
            // If it's a header row, cell value will be nothing but column name
            // It if a not header row, set the column value to the cell
            if (rowindex == -1)
                _cellVallue.Text = GridView1.Columns[_colIndex].HeaderText.ToString();
            else
                _cellVallue.Text = GridView1.Rows[rowindex].Cells[_colIndex].Text;
            _cell.Append(_cellVallue); // Add the value to the cell
            _excelRow.Append(_cell);   // Add the cell to the row
        }
        _sheetData.Append(_excelRow);  // Add the row to the sheet
    }
    _worksheet.Append(_sheetData);
    _worksheetPart.Worksheet =_worksheet;
    Sheet _sheet2 = new Sheet() { Id = _spreadsheetDocument.WorkbookPart.GetIdOfPart(_worksheetPart), SheetId = 2, Name = sheetName2 };
    _sheets.Append(_sheet2);
    _workbookPart.Workbook.Save();
    //Close the document.
    //_spreadsheetDocument.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:58:42.527

试试这个博客中的代码，它正在工作

“codeproject.com/Tips/366446/Export-GridView-Data-to-Excel-using-OpenXml”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:44:42.910

如果您使用的是 SQL Server 并且它适用于您的情况，则最好使用 SSRS 为您生成 excel 文件。我研究过使用直接 Open XML 方法，但发现 SSRS 更适合我的需要。完全取决于您的要求。

# jquery-ui - call a code behind method from J Query Button Click event instead of ASP Button click event

> ID：14822389
> 
> 赞同：0
> 
> 时间：2013-02-11T22:48:58.827
> 
> 标签：jquery-ui

i want to access code behind when I clicked on a J Query Button , like when i Clicked on a ASP Button . there are some code for this purpose like this .

```
jQuery.ajax({
    type: "POST",
    url: "edit.aspx/yourmethodname",
    data: "{yourmethodparam:" + somevar + "}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(response) {
        alert(response.d);
    }
error: function(err, response) {
    alert("error");
}
}); 
```

But for this code we have to use static method ... and in static method i can't access object's like Textbox1.text and so on... i want when i clicked on a jquery button it worked exactly like a asp Button . and i want the jquery button be in Update Panel to avoid of refreshing page i'm very pleased if anyone can help me ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:06:46.553

步骤 1) 在您的 .aspx 页面中添加一个文本框和一个按钮

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox><asp:Button ID="myButtonClick" runat="server"  OnClick="myButtonClick_Click"Text=" "  /> 
```

第 2 步）为点击事件编写所需的代码隐藏函数

```
public void myButtonClick_Click(Object sender, EventArgs e)
{
    string svar = TextBox1.Text;
    Alert.Show(svar);
} 
```

步骤 3) 在您的 ajax 成功消息中从 jquery 调用按钮单击事件

```
 success: function (response) {

                    $("[id$='_myButtonClick']").trigger('click');

                }, 
```

有了这个，您也可以完成 jquery ajax 要求（如果有）以及按钮单击事件要求背后的代码。

享受锐化 C. 干杯。

# c++ - C/C++ 数组 - 我使用了什么样的赋值？

> ID：14822390
> 
> 赞同：3
> 
> 时间：2013-02-11T22:49:10.437
> 
> 标签：c++, arrays, cin

从我的代码中可能很明显，我对 C 语言真的很陌生。我正在开发一个通过 subprocess.PIPE / cin 从更大的 Python 程序调用的程序。我的意图是分配一个大小从 Python 定向的数组。现在我意识到我可以将一个整数分配给该数组的第 1202 个块，而与我传递给程序的数字无关。这里到底发生了什么？这样的数组可以安全使用还是建议使用其他功能（我在考虑向量）。

```
int main()
{
  string group_str;
  int group_num;
  getline (cin, group_str);
  stringstream( group_str ) >> group_num;
  cout << "Group number" << group_num <<"\n";

  int group[ group_num ];

  group[ 1202 ] = 233;

  for (int i=0; i < 1203 ; i++)
    {
      cout << group[i] << '\t' <<  i << endl;
    }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:52:26.203

这是未定义的行为，它可能导致您的程序执行任何操作。语言什么都不能保证。不要访问超出其边界的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:52:37.043

这不是标准的 C++，它使用了 C 的扩展，称为“可变长度数组”。

简而言之，不要打扰它。`std::vector`如果你想要一个动态大小的数组，就使用它。

> 这里到底发生了什么？

与每个数组一样，如果索引在数组的范围内，它就可以正常工作。如果没有，您将获得未定义的行为。这包括`std::vector`'s `operator[]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T22:52:54.333

> 这样的数组可以安全使用还是建议使用其他功能（我在考虑向量）。

如果您使用 C++，那么是的，`std::vector`是您应该使用**的数据结构。**

但是，如果您想了解 C 风格的数组，那么您需要记住：`T array[N];`声明`array`有`N`元素，索引从`0`to `N - 1`。在 index 处访问其元素是未定义的行为`N`，因为它超出了范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T22:53:19.757

我建议使用 a `vector`，因为这实际上是 C++ 而不是 C。这两种语言是不同的，不要混淆。

您真的不应该假设用户将输入`group_num`1203 或更大的值。事实上，您不会检查任何输入错误，因此如果用户输入“A”，您将遇到严重问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T22:56:29.450

我只是使用 C++ STL**`std::vector`**而不是原始 C 数组。 `#include <vector>`然后使用`std::vector`正确的构造函数来创建一个指定大小的向量，例如

```
vector<int> group(group_num); 
```

然后，您可以使用 访问（读取和修改）给定索引处的向量项`operator[]`，就像使用原始 C 数组一样。

（如果您想对向量索引进行边界检查，您可以考虑使用`std::vector::at()`方法，如果向量索引超出范围，则会引发异常。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T23:08:39.463

```
 int group[ group_num ];

  group[ 1202 ] = 233; 
```

如果 group_num <= 1202，这样做是不安全的。您正在访问未分配给数组的内存，这可能会导致段错误或更糟，随机损坏程序的其他数据。

因此，如果您使用 int[]，您应该检查您访问的索引是否在有效范围内（即小于大小）。如果您使用方括号访问（例如 ），则 std::vector 在这方面的行为完全相同，`group[0]`但您也可以使用`.at()`which 在无效访问的情况下引发异常。

最后，这取决于您的口味使用什么，但事实是 st​​d::vector 可能对程序员更友好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-11T23:17:05.097

是 C 还是 C++ 我假设 C++ 最轻的转换将是......

```
--int group[ group_num ];
++int group* =new int[ group_num ]; 
```

但是您应该尝试捕获此分配，因为 group_num 可能包含*任何* PS。不要忘记删除

# playframework-2.0 - Scala 模板无法标记 HTML 属性？

> ID：14822393
> 
> 赞同：0
> 
> 时间：2013-02-11T22:49:24.677
> 
> 标签：playframework-2.0, scala-template

我想要解析“类”HTML属性中的Scala条件，但Scala模板没有发挥作用：

```
@priceTag(amount: Currency) = @{
    <div class='priceTag {if(amount.toDouble == 0.0d) "FREE"}'>
        {if(amount.toDouble > 0.0d) {amount.format("¤#")} else {"FREE"}}
    </div>
} 
```

产量：

```
<div class="priceTag {if(amount.toDouble == 0.0d) &quot;FREE&quot;}"> 
    £1
</div> 
```

我希望它产生：

```
<div class="priceTag"> 
    £1
</div> 
```

建议感激不尽

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:20:21.977

您的代码有几个错误。他们只是互相隐藏。:-)

让我们来看看它们：

```
@priceTag(amount: Currency) = @{ ... } 
```

该`@{ ... }`结构意味着大括号内的所有内容都是一段 Scala 代码。这不会引发错误，因为你的块，

```
<div class='priceTag {if(amount.toDouble == 0.0d) "FREE"}'>
    {if(amount.toDouble > 0.0d) {amount.format("¤#")} else {"FREE"}}
</div> 
```

实际上是有效的 Scala 代码（因为 Scala 的 XML 文字）。只是 Scala 将`priceTag {if(amount.toDouble == 0.0d) "FREE"}`您的`div`.

您可能想要做的是：

```
@priceTag(amount: Currency) = {
    <div class='priceTag @{if(amount.toDouble == 0.0d) "FREE"}'>
        @{if(amount.toDouble > 0.0d) amount.format("¤#") else "FREE"}
    </div>
} 
```

注意两个街区`@`前的标志。我还删除了and`if`周围的大括号。当然，如果你愿意，你可以保留它们，但它们不是必需的。`amount.format("¤#")``"FREE"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:39:40.537

我是 scala 的初学者，但 if 语句对我来说不正确，我会选择：

```
@if(amount > 0) {
        <div class="priceTag"> 
           @amount
        </div>
} else {
        <div class="priceTag FREE"> 
           @amount
        </div>
} 
```

或者：

```
 <div class="priceTag @if(amount == 0) { FREE }"> 
           @amount
        </div> 
```

# php - How to secure json

> ID：14822395
> 
> 赞同：1
> 
> 时间：2013-02-11T22:49:27.923
> 
> 标签：php, json

So I have a main page that gets data from a JSON link and populates a dropdown based on that data. My question is, currently anyone can access the URL where the json is getting printed to and I want to secure it so that only the server and the pages running on the server can access the JSON output.

I was thinking of comparing PHP server vars such as remote_addr and server_addr but the remote_addr is the clients IP and not the server.

What is a good way to go about doing this?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:07:43.780

您提到的安全问题称为[JSON 劫持](http://haacked.com/archive/2009/06/25/json-hijacking.aspx)，虽然现在一些浏览器包含[降低风险](http://ejohn.org/blog/re-securing-json/)的功能，但在其他浏览器中仍然是一个问题。

幸运的是，有一个相当简单的解决方案。要理解它，我们首先需要了解攻击是如何工作的。
第三方站点实际上不可能简单地通过 XMLHTTPRequest 请求您的 JSON 文件并以正常方式解析它，因为同源策略会阻止这种情况。
因此，攻击者所做的就是在 JavaScript 中重新定义对象设置器函数，以将任何新对象的值返回到他自己的代码中，然后创建一个`<script>`引用您的 JSON 文件的新标签。加载 JSON 后，浏览器将执行它，创建一个新对象，并将值返回给攻击者的对象设置器处理程序。攻击者现在拥有您的数据。

为防止这种情况，您需要做的是使无法将 JSON 代码直接解析为 JavaScript。如果这样做了，你想让它抛出一个错误。
实现此目的的一种常见方法（由 Google 和 Facebook 等网站使用）是将代码添加到 JSON 文件的开头，这将创建一个无限循环，阻止解析器访问其余代码（并引发 JavaScript 错误）。

例如，Facebook 的 JSON 响应以字符串 开头`for(;;);`，而 Google 使用各种代码，例如`while(1);`, 和`throw(1); <don't be evil>`（后者只是直接抛出错误，而不是创建无限循环）。

然后，您还需要修改自己的 JSON 处理 JavaScript，以便在解析之前去除这些杂乱无章的东西。例如，您可能会这样做：

```
function parseJSON(json) {
   json = json.replace("for(;;);", "");
   /* parse your JSON as usual */
} 
```

这会为您的脚本和 JSON 添加一些麻烦，但可以有效地防止 JSON 劫持。

# git - git not uploading all files

> ID：14822403
> 
> 赞同：2
> 
> 时间：2013-02-11T22:50:03.700
> 
> 标签：git, amazon-ec2, gitlab

I have a project which is fairly big (200MB) and i wanted to push it to my gitlab server (in amazon ec2) and when i push it seems fine, but when upload reaches about 8% the push suddenly "completes" and this is what i get in the console:

```
Counting objects: 464, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (421/421), done.
Writing objects: 100% (464/464), 15.07 MiB | 52 KiB/s, done.
Total 464 (delta 47), reused 0 (delta 0)
To git@IP:myrepo.git
 * [new branch]      master -> master 
```

when i try to git push again i get

```
Branch master set up to track remote branch master from origin.
Everything up-to-date 
```

i deleted the git repo on the server and tried again but it happend again and i have no idea why so i came here. has this ever happend to one of you before?

I am running the turnkey GitLab AMI from Amazon aws marketplace on a microinstance, if this is somehow relevant.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:07:53.837

Stopping at 8% may be fine is for example if you have only a few large files that would account for 92% of the size.

Best way to check you have everything you want on the remote server would be to clone that repo somewhere else and check what you have.

# php - safari 扩展从地址栏获取 url

> ID：14822404
> 
> 赞同：0
> 
> 时间：2013-02-11T22:50:11.260
> 
> 标签：php, safari-extension

我正在开发一个 Safari 扩展程序以从地址栏中获取 url，然后将其发送到 mysql 数据库。这又由显示数据库内容的网站选择。

我被困在的部分是如何从 Safari 扩展程序中的地址栏中获取 URL？一旦我得到它，我正在使用 php 使用 url 更新数据库。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:11:46.927

这解决了我的问题。

```
var myurl = safari.application.activeBrowserWindow.activeTab.url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:04:48.487

用 javascript

```
window.location.href 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:01:37.953

从扩展的全局页面或弹出窗口中，`url`选项卡对象的属性是您可以获得的最接近选项卡地址栏内容的属性。例如，

```
safari.application.activeBrowser.activeTab.url 
```

这不是*您*想要的，因为它没有反映可能已在地址栏中键入但尚未输入的值。

如果您想在 Safari 导航到它之前拦截输入的 URL，您可以在选项卡、窗口或应用程序上侦听 beforeNavigate 事件。请参阅[文档](http://developer.apple.com/library/safari/ipad/#documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html#//apple_ref/doc/uid/TP40009977-CH17-SW1)。

# php - 警告：exec() [function.exec]: 无法执行空白命令

> ID：14822405
> 
> 赞同：3
> 
> 时间：2013-02-11T22:50:16.537
> 
> 标签：php, gnuplot

我正在尝试在 PHP 中使用 GNUPLOT 绘制正弦图，但是当我`exec`用来绘制该图时，出现此错误：

> 警告：exec() [function.exec]：无法在第 8 行的 /Library/WebServer/Documents/serverSide2.php 中执行空白命令

这是我的代码：

```
exec(`echo "set term png;set xrange[-2*pi:2*pi]; set output 'output.png'; plot sin(x)" | gnuplot`); 
```

我也使用了 passthru()，但得到了同样的错误：警告：passthru() [function.passthru]：无法在第 8 行的 /Library/WebServer/Documents/serverSide2.php 中执行空白命令

但是我使用终端检查代码是否工作，所以我输入了这个代码： `echo "set term png;set xrange[-2*pi:2*pi]; set output 'output.png'; plot sin(x)" | gnuplot` 它工作正常并给了我情节。

任何我知道我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:54:31.270

您使用了错误的语法。

**使用**并将`exec`命令行编写为字符串文字：

```
exec('echo "set term png;set xrange[-2*pi:2*pi]; set output \'output.png\'; plot sin(x)" | gnuplot'); 
```

**或**使用[反引号](http://php.net/manual/en/language.operators.execution.php)，完全*不*涉及`exec`：

```
`echo "set term png;set xrange[-2*pi:2*pi]; set output 'output.png'; plot sin(x)" | gnuplot`; 
```

使用您已经拥有的代码，反引号会导致执行命令并将其*输出*传递给`exec`. 由于此命令行不产生任何输出，`exec`因此抱怨它无法执行空白命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T22:55:37.447

使用两者`exec`和反引号操作符是多余的——基本上，它们都做同样的事情。反引号运算符实际上将其内容作为 shell 命令执行并返回命令的输出。因此`exec`，如果您的命令没有输出任何内容，您实际上会使用空字符串进行调用。

# c# - 对象数组访问变量时出错：用户代码未处理 NullReferenceException

> ID：14822406
> 
> 赞同：0
> 
> 时间：2013-02-11T22:50:24.717
> 
> 标签：c#, .net, class, windows-phone-7, object

好的，所以我正在尝试创建一个高分系统并在对象中使用一个类的数组，但是出现标题中的错误，告诉我由于某种原因我的对象充满了空变量，这是我的类：

```
class HighScores
{
    public HighScore[] MyScores = new HighScore[5];

    protected bool failedRead = false;

    private void SortHighScores(string NewName, int NewScore)
    {
        HighScore[] TmpScores = new HighScore[6];

        for (int i = 0; i < 5; i++)
        {
            TmpScores[i].Name = MyScores[i].Name; // Error Occurs here for `MyScores[i].Name` however in output box both MyScores and TmpScores show null
            TmpScores[i].Score = MyScores[i].Score;
        }
        TmpScores[5].Name = NewName;
        TmpScores[5].Score = NewScore;

        Array.Sort(TmpScores, delegate(HighScore x, HighScore y) { return x.Score.CompareTo(y.Score); });
        Array.Reverse(TmpScores);

        MyScores = new HighScore[5];
        for (int i = 0; i < 5; i++)
        {
            MyScores[i].Name = TmpScores[i].Name;
            MyScores[i].Score = TmpScores[i].Score;
        }
    }
}

class HighScore
{
    public string Name = "hello world";
    public int Score = 0;
} 
```

这里是我初始化一个对象的地方`HighScores`：

```
HighScores GameScores;
protected override void Initialize()
{
    base.Initialize();
    GameScores = new Highscores();
} 
```

如果我将对象设置为`new`?

[编辑]

好的，所以我在 HighScores 类中创建了一个新函数来将 MyScores 对象初始化为新的 HighScore 对象：

```
public void InitScores()
{
    for (int i = 0; i < 5; i++)
    {
        MyScores[i] = new HighScore();
    }
} 
```

在内部调用`protected override void Initialize()`（相信大家都熟悉它，它是 XNA 中的标准）。我还在类函数中添加了相同的代码：`GameScores.SortHighScores`初始化`TmpScores`。

还是一样的错误，还是一样的地方，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:54:30.353

看起来您需要`HighScore`为您的`MyScores`数组创建实例。您只需在上面的代码中创建数组。

所以在代码的某个地方你需要类似于

```
MyScores[i] = new HighScore(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:55:53.923

的初始化`GameScores`是不够的。您不初始化内部数组的值`MyScores`（至少不在显示的代码中）。当然，当您尝试使用该数组的任何元素时，您会得到一个`NullReferenceException`

您需要在 HighScores 的构造函数中添加类似于此的代码

```
public HighScores()
{
    MyScores = new HighScore[5];
    for(x = 0; x < 5; x++)
        MyScores[i] = new HighScore();

} 
```

**编辑：**

此代码具有相同的概念错误

```
HighScore[] TmpScores = new HighScore[6];

for (int i = 0; i < 5; i++)
{
    TmpScores[i].Name = MyScores[i].Name;             
    TmpScores[i].Score = MyScores[i].Score;
} 
```

在这里，您声明了一个名为 TmpScores 的数组，该数组具有存储 6 个 HighScore 类型的元素的空间，但是这 6 个元素是全部`null`，因此您不能将变量 N​​ame 或 Score 分配给为 null 的元素 (i)。

也许这段代码对你有用：

```
 for (int i = 0; i < 5; i++)
    {
        // Assign to tmpScores an already initialized object HighScore
        TmpScores[i] = MyScores[i];
    }

    TmpScores[5] = new HighScore {Name = NewName, Score = NewScore}; 
```

# emacs - Emacs 24.2 安装失败

> ID：14822407
> 
> 赞同：1
> 
> 时间：2013-02-11T22:50:31.407
> 
> 标签：emacs, failed-installation

尝试在 Ubuntu 12.04 上安装 Emacs 24.2。

```
./configure 
```

工作正常。

make 给出错误：

```
/usr/local/include/jmorecfg.h:263:16: error: expected identifier before numeric constant
image.c: In function ‘gif_load’:

image.c:7179:34: error: too few arguments to function ‘DGifOpenFileName’

/usr/local/include/gif_lib.h:177:14: note: declared here
image.c:7200:7: error: too few arguments to function ‘DGifOpen’
/usr/local/include/gif_lib.h:180:14: note: declared here
make[1]: \*** [image.o] Error 1

make[1]: Leaving directory `/home/mark/Downloads/emacs-24.2/src'
make: \*** [src] Error 2 
```

有什么想法可以解决这个问题吗？

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:06:55.540

这似乎不是您的发行版的问题，而是您手动安装的库。

/usr/local/include/jmorecfg.h /usr/local/include/gif_lib.h /usr/local/include/gif_lib.h

都在 /usr/local 中，任何发行版都不会触及它，而是为您自己的个人二进制文件保留。似乎与您手动安装的 libgif 标头不兼容。

请试试

```
./configure --without-gif 
```

再次验证并发布您的输出。

# mysql - 为 CakePHP Web 应用程序将 phpMyAdmin 数据库迁移到 Windows Azure

> ID：14822410
> 
> 赞同：2
> 
> 时间：2013-02-11T22:50:57.437
> 
> 标签：mysql, cakephp, azure, phpmyadmin, azure-sql-database

我的问题非常具体，我一直无法在网上找到答案。我一直在本地构建一个 CakePHP Web 应用程序，并使用 XAMPP 使用 phpMyAdmin 在 Apache 服务器上本地托管它。现在我正在尝试将站点迁移到 Windows Azure，并且数据库导入被证明是有问题的。

我在 Azure 中创建了一个新网站，并将我的网站根文件夹放在指定的目录中。我发布了该站点，并且能够查看该站点并出现预期的“缺少数据库”错误。

然后我将 phpMyAdmin 中的所有表导出到 .sql 文件（有些托管在另一台服务器上，所以我无法导出整个数据库），现在我遇到了问题。我用谷歌搜索了如何广泛导入 .sql 文件，但只能找到如何从 SQL Server 导入。我在微软网站上看到一篇文章：

[http://blogs.iis.net/ruslany/archive/2012/12/17/phpmyadmin-on-windows-azure-web-sites.aspx](http://blogs.iis.net/ruslany/archive/2012/12/17/phpmyadmin-on-windows-azure-web-sites.aspx)

我按照步骤操作，但在最后阶段无法登录。但是，这种方法似乎有点矫枉过正，肯定有一种简单的方法可以将标准 MySQL 数据库等基本内容导入 Azure 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:56:29.230

你可以通过命令行来完成。阅读： http: [//www.windowsazure.com/en-us/develop/php/tutorials/website-w-mysql-and-git/](http://www.windowsazure.com/en-us/develop/php/tutorials/website-w-mysql-and-git/)

请注意标题为“获取远程 MySQL 连接信息”的部分。在 Azure 上创建 mysql 数据库后，从 mysql 连接到它：

```
mysql -h{Data Source] -u[User Id] -p[Password] -D[Database] 
```

从这里，您可以从您创建的 sql 文件中复制 create table 语句和 insert 语句。或者，如果您可以导航到 .sql 文件，您可以执行以下操作：

```
mysql>\. data.sql 
```

这将执行 sql 文件中的所有命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T08:49:14.723

有一种更简单的方法；在进入详细信息之前进行总结：您可以从本地 phpmyadmin 访问远程 azure MySQL 数据库并使用导入、导出 - 您习惯在 phpmyadmin 上使用的所有功能。

我正在谈论的方法的基础可以在这里找到： [http](http://ruslany.net/2012/12/phpmyadmin-on-windows-azure-web-sites/) ://ruslany.net/2012/12/phpmyadmin-on-windows-azure-web-sites/ 这种方法允许您在您的天蓝色网站上安装 phpmyadmin这样您就可以通过 www.yoursitename.net/phpmyadmin 之类的方式访问它

但是，比这更好的方法是直接从现有的本地 phpmyadmin 访问远程 (Azure) mysql 数据库 - 看到您正在使用 xampp。为此，请在您的 xampp/phpmyadmin 文件夹中查找 config.inc.php 并在文件末尾添加以下行：

```
$i++;
$cfg['Servers'][$i]['host'] = "[look for data source in mysqldbconnectionstring - see in your azure dashboard publish settings]";
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = 'false';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassord'] = false; 
```

*   所以只更改主机值 - 参见上面 [] 中的说明。保存文件。

当您从 localhost 打开 phpmyadmin 时，您会看到“服务器选择”现在是一个下拉菜单 - 您知道该怎么做！

# vb6 - Migrating VB6 with Quickbooks SDK to Intuit Partner Platform

> ID：14822411
> 
> 赞同：1
> 
> 时间：2013-02-11T22:50:59.490
> 
> 标签：vb6, migration, intuit-partner-platform

I have a VB6 desktop program that is using the Quickbooks SDK. I was trying to see if its possible to migrate it to the Quickbooks IPP system. Ive been looking through the Intuit IPP site for hours and i can't seem to make heads and tails of it. Is it even posible to connect the 2? is there any documentation on it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:58:21.933

If you can write the code to call REST APIs then you can access the APIs to integrate with Quickbooks on the Intuit Partner Platform. Its not limited by your programming language of choice.

There is no documentation about vb6, only on the details for the REST API you can call. Here is the documentation for QuickBooks for Windows and QuickBooks Online APIs.

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services)

You can also find the IPP QuickBooks SDKs for .Net here if you are interested in that route, it will save you time as you wont need to write alot of the code to handle the XML or make the http request calls.

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform)

regards,
Jarred

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T23:05:29.557

**您现在尝试做的事情是不可能的。**

如果您参考 Intuit Anywhere[常见问题解答](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0080_FAQ)，您会看到以下相关问题：

> 问：实施 Intuit Anywhere 有哪些要求？
> 
> 答：您的应用必须：
> 
> *   成为可在浏览器中使用的 Web 应用程序，作为服务（SaaS，包括基于交易定价）出售给多个客户的产品。支持 SaaS 应用程序的移动扩展。
> *   在与客户一起上线之前通过安全审查。

而这个相关的问题：

> 问：我可以将桌面应用程序与 Intuit Anywhere 连接吗？
> 
> 答：不是今天，但我们正在考虑。

因此，目前不支持移植桌面应用程序（当然，除非您将*整个*应用程序转换为基于 Web 的应用程序......）

# mysql - 按范围计数仅返回一行

> ID：14822416
> 
> 赞同：2
> 
> 时间：2013-02-11T22:51:15.387
> 
> 标签：mysql, sql

我试图让输出在不同的 CALL 上使用。我想要的输出是

```
Row   |   Col   |  Data  |  Seq

<70%  | Voters  |  5519  |  8
<80%  | Voters  |  4352  |  8
<90%  | Voters  |  3251  |  8
100%  | Voters  |  2511  |  8 
```

我的代码是

```
SELECT CASE
        WHEN (poll_propensity >= 0.70 AND perm_absentee = 'N' AND mail_propensity = 0)  THEN '< 70%' 
        WHEN (poll_propensity >= 0.80 AND perm_absentee = 'N' AND mail_propensity = 0)  THEN '< 80%' 
        WHEN (poll_propensity >= 0.90 AND perm_absentee = 'N' AND mail_propensity = 0)  THEN '< 90%'
        WHEN (poll_propensity >= 1 AND perm_absentee = 'N' AND mail_propensity = 0)     THEN '100%' 
       END AS Row,            

'Voters' AS Col,
COUNT(voter_id) AS Data,
8 AS Seq

FROM (  SELECT p.voter_id, p.perm_absentee, vp.poll_propensity, vp.mail_propensity 
        FROM VoterProfile p
             INNER JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code 
             INNER JOIN VoterPropensity vp ON p.voter_id=vp.voter_id        
        WHERE d.district_id= 3 AND vp.election_type= 'T' ) as derived 
GROUP BY Row 
```

但我得到的所有输出就像

```
Row   |   Col   |  Data  |  Seq

<70%  | Voters  |  5519  |  8 
```

如果有人可以提供帮助，那就只有一个通过，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:54:53.913

只需更改 WHEN 语句的顺序，因为 1 > .7 将 1 与 .7 混为一谈，您需要从 .1 开始，然后下降到 .7。

```
SELECT CASE
        WHEN (poll_propensity >= 1 AND perm_absentee = 'N' AND mail_propensity = 0)     THEN '100%' 
        WHEN (poll_propensity >= 0.90 AND perm_absentee = 'N' AND mail_propensity = 0)  THEN '< 90%'
        WHEN (poll_propensity >= 0.80 AND perm_absentee = 'N' AND mail_propensity = 0)  THEN '< 80%' 
        WHEN (poll_propensity >= 0.70 AND perm_absentee = 'N' AND mail_propensity = 0)  THEN '< 70%' 
       END AS Row,            

'Voters' AS Col,
COUNT(voter_id) AS Data,
8 AS Seq

FROM (  SELECT p.voter_id, p.perm_absentee, vp.poll_propensity, vp.mail_propensity 
        FROM VoterProfile p
             INNER JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code 
             INNER JOIN VoterPropensity vp ON p.voter_id=vp.voter_id        
        WHERE d.district_id= 3 AND vp.election_type= 'T' ) as derived 
GROUP BY Row 
```

或者，您可以将操作从 >= 更改为 < 并保持顺序不变；但我不确定这是否会为您提供您正在寻找的相同子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:19:35.750

看起来您希望从这样的语句返回结果集：

```
SELECT r.Row
     , 'Voters' AS Col
     , CASE r.Row
         WHEN '< 70%' THEN IFNULL(d.c70,0)
         WHEN '< 80%' THEN IFNULL(d.c80,0)
         WHEN '< 90%' THEN IFNULL(d.c90,0)
         WHEN '100%' THEN IFNULL(d.c100,0)
       END AS Data
     , 8 AS Seq
  FROM ( SELECT '< 70%' AS Row
         UNION ALL SELECT '< 80%' 
         UNION ALL SELECT '< 90%'
         UNION ALL SELECT '100%' 
       ) r
 CROSS
  JOIN ( SELECT SUM(vp.poll_propensity >= 0.70 AND vp.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c70
              , SUM(vp.poll_propensity >= 0.80 AND vp.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c80
              , SUM(vp.poll_propensity >= 0.90 AND vp.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c90
              , SUM(vp.poll_propensity >= 1    AND vp.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c100
              , COUNT(p.voter_id) AS count_voter_id
           FROM VoterProfile p
           JOIN DistrictPrecinct d ON d.precinct_id=p.precinct_code
           JOIN VoterPropensity vp ON p.voter_id=vp.voter_id
          WHERE d.district_id = 3
            AND vp.election_type = 'T'
       ) d
 ORDER BY r.Row 
```

`>= 0.70`（您使用比较然后使用标签标签有点奇怪`'< 70%'`。看起来您可能想要`<= 0.70`比较。

从您的数据来看，您似乎希望汇总计数。poll_propensity 为 0.85 的选民应包括在多个计数中。（您没有具体说明，但这就是您的预期输出对我的建议。）

如果不是这种情况，如果您想要给定百分比之间的选民人数，我会调整条件测试以检查特定范围，例如：

```
SUM(vp.poll_propensity >= 0.80 AND vp.poll_propensity < 0.90 
     AND vp.perm_absentee = 'N' AND vp.mail_propensity = 0) AS c80 
```

# java - 运行独立 Jar 与 Web 启动

> ID：14822418
> 
> 赞同：1
> 
> 时间：2013-02-11T22:51:20.543
> 
> 标签：java, jar, javafx-2, jnlp

我有一个 JavaFX 程序，它可以作为独立的 Jar 顺利运行，但是当我尝试使用 java web start（即使用 JNLP 文件运行它）时，程序会在一段时间后变慢。通过visualVM查看CPU使用率，往往会随着时间逐渐增加。运行 JNLP 时是否需要设置任何参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:34:32.047

这是我解决问题的方法：

为了调试，我有很多 System.out.println(); 在代码中会非常频繁地触发，大约每 50 毫秒。如果从独立 jar 运行，CPU 使用率不会那么高，但是通过 Java web start，CPU 使用率异常高，我猜是因为沙盒模式的开销。无论如何，删除打印显着降低了 CPU 使用率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:28:14.907

From references [here](http://uzzal.wordpress.com/2009/07/24/javafx-or-flash-which-to-choose/) and [here](http://www.loadui.org/forum/viewtopic.php?f=12&t=15972) seems that on the first startup JavaFX needs to load additional modules and also it may be some "wait to time out" delays related to the Oracle server migration. These modules, however, should normally be cached so it normally ought to start much faster second time. Also, both references deal with the very old version 1.3 - bugs that were present in this old version may be fixed long time ago.

This basically means that JavaFX more for is not well suitable for running some decoration that has no much value for the the user. Most of the people would wait for a serious application to load I think for somewhat the comparable time as they spend to download the standalone installer.

# hadoop - 在 Hadoop 中更新分布式缓存中的缓存文件

> ID：14822424
> 
> 赞同：0
> 
> 时间：2013-02-11T22:51:49.287
> 
> 标签：hadoop

我有一小组文件被缓存并通过 DistributedCache 分发到 map reduce 作业。缓存的文件将来需要定期更新。我想知道是否可以在不重新启动 map reduce 作业的情况下更新缓存文件。

我阅读了有关 DistributedCache 跟踪缓存文件的修改时间戳的信息。当 map reduce 作业不使用文件时，这对更新文件有用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:47:15.787

缓存文件在提交作业时复制到 HDFS，然后在生成 M/R 任务之前由不同的任务跟踪器本地复制到本地节点。因此，在作业运行时无法更改分布式缓存中的文件。

# linux - 如何在 Linux 中编写 spliceAll？

> ID：14822427
> 
> 赞同：0
> 
> 时间：2013-02-11T22:52:06.627
> 
> 标签：linux, sockets, pipe, nonblocking, splice

`splice`我想通过使用Linux 上的系统调用将管道的所有数据推送到套接字来排空管道。

我目前的尝试是：

```
ssize_t splice(int i, loff_t* io, int o, loff_t* oo, size_t l, unsigned int flags);
int  spliceAll(int i, loff_t* io, int o, loff_t* oo, size_t l, unsigned int flags) {
  size_t t =  0; int n = 0;
  while (t <  l) { if ((n = splice(i, io, o, oo, l - t, flags)) < 0) break; t += n; }
  return t == l ? 0 : -1;
} 
```

与此等效的用户空间缓冲区很简单：

```
int sendAll(int s, void* b, size_t l, int flags) {
  size_t t =  0; int n = 0;
  while (t <  l) { if ((n = send(s, b + t, l - t, flags)) < 0) break; t += n; }
  return t == l ? 0 : -1;
} 
```

* * *

假设非阻塞套接字（和管道）`spliceAll`并且永远不会返回：`send``splice``0`

*   循环`spliceAll`是否正确？

* * *

*   是否还有其他我在`spliceAll`和中都没有看到的错误`sendAll`？

# php - 如何通过基于 PHONEGAP 的电子商务移动应用程序访问 apache 服务器上的 php 文件？

> ID：14822428
> 
> 赞同：1
> 
> 时间：2013-02-11T22:52:10.043
> 
> 标签：php, javascript, ajax, web-services, cordova

我在编码方面没有太多经验，而且我坚持我的项目。请帮忙！！

我正在使用 Phonegap 开发买家指南应用程序。我正在使用 ebay api 来获取产品信息。它的 php 代码正在使用 apache 服务器的浏览器上运行。但是当我尝试在模拟器上加载并运行它时，它没有用。（这是点击“搜索产品”超链接后打开的页面）

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery-1.9.1.js">
</script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    $('#div1').load('http://localhost/MySample.php');
  });
});
</script>
</head>
<body>

<div id="div1"><h2>Click to get information</h2></div>
<button>Get External Content</button>

</body>
</html> 
```

那我如何从服务器访问数据？我需要创建 Web 服务吗？如果是，那么我应该使用哪种方法？或者 Ajax 会起作用吗？我以前没有在这些方法中使用过任何东西，谷歌搜索这造成了很多混乱。所以请建议更简单的一个。

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:42:55.300

呼叫`$('#div1').load('http://localhost/MySample.php');`不行，因为您应该呼叫另一台机器。`localhost`它是同一台机器-在您的情况下是电话。

尝试为您提供放置 MySample.php 脚本的服务器**IP 地址**

# c# - Response.Redirect 在 Global.asax 中不起作用

> ID：14822435
> 
> 赞同：13
> 
> 时间：2013-02-11T22:52:45.720
> 
> 标签：c#, asp.net, global-asax, response.redirect

我创建了一个错误页面来显示所有未处理异常的一般消息。

这是 Global.asax 中的代码

```
HttpContext ctx = HttpContext.Current;

            string e404_PAGE = ctx.Request.AppRelativeCurrentExecutionFilePath.ToString();
            string e404_LINE = ctx.Server.GetLastError().InnerException.StackTrace.Substring(ctx.Server.GetLastError().InnerException.StackTrace.LastIndexOf(":line ") + 6, ctx.Server.GetLastError().InnerException.StackTrace.Substring(ctx.Server.GetLastError().InnerException.StackTrace.LastIndexOf(":line ") + 6).IndexOf(" ")).ToString();
            string e404_MESSAGE = ctx.Server.GetLastError().InnerException.Message.ToString();
            string e404_METHODNAME = ctx.Server.GetLastError().InnerException.TargetSite.ToString();
            string e404_STACKTRACE = ctx.Server.GetLastError().InnerException.StackTrace.ToString();
            string e404_URL = ctx.Request.Url.ToString();
            string e404_DATE = ctx.Timestamp.ToString("yyyy-MM-dd HH:mm:ss");
            string e404_USER = ctx.User.Identity.Name.ToString();
            string e404_IP = ctx.Request.UserHostAddress.ToString();

            // * * * //

            System.Data.SqlClient.SqlConnection sql_conn;
            sql_conn = new System.Data.SqlClient.SqlConnection(ConfigurationManager.ConnectionStrings["myConnectionString"].ToString());
            sql_conn.Open();
            string query = @"insert into UnhandledExceptions(Message, Page, Line, MethodName, StackTrace, URL, Date, [User], IP) 
                                         values(@Message, @Page, @Line, @MethodName, @StackTrace, @URL, @Date, @User, @IP)
                                         select scope_identity();";
            System.Data.SqlClient.SqlCommand com = new System.Data.SqlClient.SqlCommand(query, sql_conn);
            com.Parameters.AddWithValue("@Message", e404_MESSAGE);
            com.Parameters.AddWithValue("@Page", e404_PAGE);
            com.Parameters.AddWithValue("@Line", e404_LINE);
            com.Parameters.AddWithValue("@MethodName", e404_METHODNAME);
            com.Parameters.AddWithValue("@StackTrace", e404_STACKTRACE);
            com.Parameters.AddWithValue("@URL", e404_URL);
            com.Parameters.AddWithValue("@Date", e404_DATE);
            com.Parameters.AddWithValue("@User", e404_USER);
            com.Parameters.AddWithValue("@IP", e404_IP);

            string e404_ID = com.ExecuteScalar().ToString();

            sql_conn.Close();

            // * * * //            

            Session["e404_ID"] = e404_ID;
            Response.Redirect("~/Error.aspx"); 
```

当我发布网站时，用户不会被重定向到错误页面。

直到最后一行的所有代码都可以正常工作。有什么建议吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-11T23:34:16.713

替换`Response.Redirect("~/Error.aspx");`为：

```
// You've handled the error, so clear it. Leaving the server in an error state can cause unintended side effects as the server continues its attempts to handle the error.
Server.ClearError();

// Possible that a partially rendered page has already been written to response buffer before encountering error, so clear it.
Response.Clear();

// Finally redirect, transfer, or render a error view
Response.Redirect("~/Error.aspx"); 
```

# java - Junit 4 Spring - 无法加载 ApplicationContext

> ID：14822441
> 
> 赞同：3
> 
> 时间：2013-02-11T22:53:04.487
> 
> 标签：java, spring, hibernate, dependency-injection, junit

我正在使用 Spring 3.1、Hibernate 4，并且我刚刚添加了 JUnit 4.8.2 来进行一些单元测试。

我的文件夹结构是：

```
src/main/java -> sources
src/main/resources -> a messages.properties file
src/test/java -> dao package containing OfficialHolidayDAOTest
src/test/resources -> applicationContext-test.xml 
```

我的 applicationContext.xml 在 src/main/webapp/WEB-INF 下找到

我正在尝试运行以下测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "file:src/test/resources/applicationContext-test.xml" })
public class OfficialHolidayDAOTest extends
        AbstractTransactionalJUnit4SpringContextTests {...} 
```

失败了：

```
-------------------------------------------------------------------------------
Test set: dao.OfficialHolidayDAOTest
-------------------------------------------------------------------------------
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.866 sec <<< FAILURE!
testAddOfficialHoliday(dao.OfficialHolidayDAOTest)  Time elapsed: 1.75 sec  <<< ERROR!
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'loginController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: protected org.springframework.security.authentication.AuthenticationManager com.infobest.vms.authentication.LoginController.authenticationManager; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=authenticationManager)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 30 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: protected org.springframework.security.authentication.AuthenticationManager com.infobest.vms.authentication.LoginController.authenticationManager; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=authenticationManager)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 45 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=authenticationManager)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 47 more 
```

我不确定为什么提到 AuthenticationManager，因为该 bean 仅在 spring-security.xml 中声明，它不包含在`src/test/`文件夹中或测试需要。

我也尝试在上下文配置中使用类路径，但没有。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T10:10:09.627

问题是，没有找到 AuthenticationManager，因为 spring-security.xml 的内容不存在于 applicationContext-test.xml 中。所以我只是将我的 spring-security 的内容复制到 applicationContext-test.xml 中。

我仍在使用`file:src/test/resources/applicationContext-test.xml`，现在可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T23:42:19.467

您可以使用类路径加载它

```
 @ContextConfiguration(locations = { "classpath:applicationContext-test.xml" })
    @RunWith(SpringJUnit4ClassRunner.class)
    public class OfficialHolidayDAOTest {...} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-30T08:44:36.707

检查您是否有注释

@服务

@Repository

# php - 使用 Jquery 提交表单

> ID：14822443
> 
> 赞同：-5
> 
> 时间：2013-02-11T22:53:18.517
> 
> 标签：php, javascript, jquery, html, ajax

我想使用 JQuery 提交我的表单而不重新加载页面。我怎样才能做到这一点？

我的表格：

```
<html>
<form method="post" action="submit.php">
    <input type="text" name="name"/>
    <input type="submit" name="submit" value="submit"/>
</form>
</html> 
```

我的PHP：

```
<?php
    $name= $_POST['name'];
        echo $name;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:55:06.293

根据评论，请参阅有关此事的 jQuery docs/1000 的教程。尽管如此：

```
$('#form-id').submit(function(){

// work yon javascript magicke

 }); 
```

编辑：请注意这是用于简单表单提交（客户端验证等）的非 ajax 解决方案；如果您想花哨，请参阅其他答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:55:28.697

通过使用 ajax ：

```
$('form').on('submit', function(e) {
    e.preventDefault();
    $.ajax({
       type: 'POST',
       url : 'submit.php',
       data: $(this).serialize()
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T22:57:46.070

您需要等到文档加载完毕，然后中断提交事件，然后运行一些`ajax`

```
$( document ).ready( function () {

    $( 'form' ).on( 'submit', function ( event ) {

        event.preventDefault();

        $.ajax({
            type: 'POST',
            url: '/mypage.php',
            data: $( this ).serialize(),
            success: function ( data ) {
                alert( data );
            }
        });

    }):

}); 
```

# .net - 如何访问 localhost (.NET MVC 4) 中的通配符子域？

> ID：14822445
> 
> 赞同：1
> 
> 时间：2013-02-11T22:53:22.470
> 
> 标签：.net, iis, asp.net-mvc-4, localhost, wildcard-subdomain

感谢您的关注！

# 背景

我正在.NET 4.5 框架 (C#) 上开发一个 Web 应用程序，它需要允许用户创建一个帐户，然后拥有一个带有其帐户名的子域（例如“foobar.myDomain.com”）。

我意识到这需要在 IIS 中涉及通配符子域——那里没有问题。我按照[这个 SO 帖子](https://stackoverflow.com/questions/278668/is-it-possible-to-make-an-asp-net-mvc-route-based-on-a-subdomain)设置了一个自定义路由来拦截 URL 请求并解析出子域。*看起来*它会很好用。

# 问题

我该如何测试通配符子域`localhost`？当我点击“foo.localhost”之类的东西时，我只会得到一个 404。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T12:18:19.040

提示：不要使用 localhost，使用 42foo.com、xip.io 等。

42foo.com 有一个通配符 DNS 条目，它始终解析为 localhost。

```
42foo.com
foo.42foo.com 
```

xip.io 解析为您可以提供给它的特定 IP 地址：

```
127.0.0.1.xip.io
foo.127.0.0.1.xip.io 
```

# asp.net-mvc-4 - MVC4 Postal - 通过 UserId 访问用户电子邮件地址搜索

> ID：14822452
> 
> 赞同：0
> 
> 时间：2013-02-11T22:53:54.520
> 
> 标签：asp.net-mvc-4

我有一个网站，用户 A 可以在其中与老师预约课程，然后我想向老师发送一封电子邮件，说用户 A 想与您一起预约课程等。

我已经启动并运行发送电子邮件没有问题，但是，我不知道如何访问老师的电子邮件地址来发送电子邮件。

电子邮件地址保存为内置 UserProfile 表的一部分。我有老师的 UserId（因为它存储在单独的老师表中）。

那么有没有办法访问教师的电子邮件，通过 UserId 搜索？

在任何其他表中，我会在 db.Teacher.find(id) 中使用 t ，但这在帐户控制器中不起作用。

这是使用默认的 MVC4 互联网网站模板使用内置的简单成员资格构建的。如果需要更多信息，请告诉我。

我已将以下内容添加到 AccountController；

私人用户上下文数据库 = 新用户上下文（）；

```
public ActionResult EmailNotification(int id)
{

    var user = from l in db.UserProfiles.Find(id)
                  select l;

} 
```

db.UserProfiles.Find(id) 但是给出以下错误；找不到源类型“LessonUp.Models.UserProfile”的查询模式的实现。未找到“选择”。

我认为这是不是通过实体框架创建的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:00:40.183

我认为您的查询需要类似于以下内容：

```
var result = from q in context.UserProfiles
     where q.UserId == id
     select q; 
```

# jquery - jQuery - 更改图像和隐藏

> ID：14822461
> 
> 赞同：0
> 
> 时间：2013-02-11T22:54:23.650
> 
> 标签：jquery, html

我想要两个单独的列表，它们是图像。它们被包裹在两个独立的 div 中，分别是“web”和“nonweb”类。我想要顶部的两个按钮。

当点击“网站设计”按钮时，所有“非网页”内容消失，出现“网页”内容。“网站设计”图像也更改为不同的图像。我将有两个按钮，一个“网站设计”和“非网站设计”。加载页面后，它们都将采用黑白形式。单击一个时，对面的按钮内容将保持隐藏状态，并显示按钮链接的内容。单击的按钮也将变为更亮的按钮。

如果单击另一个按钮，则对面按钮的所有内容都将隐藏，另一个按钮将变回黑白版本，而单击的按钮发生变化，并显示其内容，yada yada yada。

我一直在研究它，似乎找不到正确的方法。检查这个馅饼以获得更详细的代码版本：

[http://pastie.org/private/6b5voiypsdbzfnjogj77g](http://pastie.org/private/6b5voiypsdbzfnjogj77g)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:33:03.750

我写了这个，请注意我是大学一年级><

应该按照您的意愿进行操作，只需根据您的需要更改 URL。

```
<script>
$(document).ready(function(){
    $("div.nonweb").hide(); // hide nonweb content by default
    $("div.web").hide(); // hide web content by default

    $("img.webdesigntop").click(function(){
        $("img.webdesigntop").attr("src", "http://www.plaatsoft.nl/wp-content/uploads/RedSquare.jpg"); // color webdesigntop button
        $("img.nonwebdesigntop").attr("src", "https://twimg0-a.akamaihd.net/profile_images/1287988344/blue-square_normal.jpg"); //grayscale nonwebdesigntop button
        $("div.nonweb").hide("fast"); // hide nonweb content
        $("div.web").show("slow"); // show web content
    });

    $("img.nonwebdesigntop").click(function(){
        $("img.webdesigntop").attr("src", "https://twimg0-a.akamaihd.net/profile_images/1287988344/blue-square_normal.jpg"); //grayscale webdesigntop button
        $("img.nonwebdesigntop").attr("src", "http://www.plaatsoft.nl/wp-content/uploads/RedSquare.jpg"); //colour nonwebdesigntop button
        $("div.web").hide("fast"); // hide web content
        $("div.nonweb").show("slow"); // show nonweb content
    });
});
</script> 
```

# c# - 访问相关表中数据的最佳方式

> ID：14822464
> 
> 赞同：0
> 
> 时间：2013-02-11T22:54:31.613
> 
> 标签：c#, linq, entity-framework, join, linq-to-entities

我有两个概念上相关的表，但原始编码器没有在表之间创建任何 FK 关系。

表格1：

```
TABLE [Name](
ID [varchar](10) NOT NULL (this is the PK),
MAIL_ADDRESS_NUM [int] NOT NULL,
BILL_ADDRESS_NUM [int] NOT NULL,
Shipping_Address_Num [int] Not Null
) 
```

表2：

```
TABLE [Address](
ID [varchar](10) NOT NULL,
ADDRESS_NUM [int] NOT NULL (this is the PK),
PURPOSE [varchar](20) NOT NULL
) 
```

如果我可以选择，我会将 FK 放在 MailingAddress 到 AddressNumber、BillingAddress 到 AddressNumber 和 ShippingAddress 到 AddressNum。但这不是一个选择。

目前在我的 LINQ 中，我执行以下操作：

```
from n in Names.Where(predicate)
join ba in db.Addresses on n.BillingAddressNumber equals ba.AddressNumber
join sa in db.Addresses on n.ShippingAddressNumber equals sa.AddressNumber
join ma in db.Addresses on n.MailingAddressNumber equals ma.AddressNumber 
```

如果我正确理解 EF 和 linq，我应该能够在 Edmx 设计图面上/上进行关联并简化我的查询。正确的？

如果是这样，需要采取哪些步骤将正确的关联添加到 Edmx 文件？我找到了一些参考资料，但它们似乎涉及大量操作底层 XML 文件。那有必要吗？这些表也是严格只读的。使用 VS2012 和 EF5。

# javascript - 网站需要自动调整页面上每个元素的大小，例如图像和字体

> ID：14822466
> 
> 赞同：0
> 
> 时间：2013-02-11T22:54:43.050
> 
> 标签：javascript, jquery, html, css, css-transitions

我有一个页面，页面上放置了各种文本和图像。当用户调整他们的窗口大小（或只是具有不同分辨率的用户）时，设计需要使所有内容按比例缩放。所以我创建了这个在调整大小（或页面加载时）触发的 jQuery 函数，我查看了到目前为止我放在该页面上的每个元素，并根据纵横比调整它的大小。像这样：

```
 theWindow.resize(function() {
        resizeBg();
    }).trigger("resize"); 
```

随着我向页面添加越来越多的内容，这非常乏味。每个填充、边距、字体大小、宽度、高度等都需要根据该比例调整大小。是否有 jQuery 插件或其他一些可以帮助解决此问题的建议？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:27:26.253

可以这样想，当用户调整窗口大小时，JQuery 运行一个函数。

```
$(window).resize(function()
{
    var Width = $(document).width();
    var Height = $(document).height();

    $('body').css({"height" : Height, "width" : Width});
} 
```

或者 CSS 中的简单方法，

```
body
{
    width:100%;
    height:100%;
} 
```

# sap-ase - 在 Group By 子句中包含求和行

> ID：14822468
> 
> 赞同：0
> 
> 时间：2013-02-11T22:54:52.910
> 
> 标签：sap-ase

**询问：**

```
SELECT aType, SUM(Earnings - Expenses) "Rev"
FROM aTable
GROUP BY aType
ORDER BY aType ASC 
```

**结果：**

```
| aType | Rev   |
| ----- | ----- |
| A     | 20    |
| B     | 150   |
| C     | 250   | 
```

**问题：** 是否可以在我的初始查询中使用 Sybase 语法在底部显示摘要行，如下所示，还是必须完全是一个单独的查询？

```
| aType | Rev   |
| ----- | ----- |
| A     | 20    |
| B     | 150   |
| C     | 250   |
=================
| All   | 320   | 
```

我无法从 SQL 中获取 ROLLUP 函数以成功转换为 Sybase，但我不确定是否有其他方法可以做到这一点，如果有的话。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:48:29.550

并非所有版本的 Sybase 都支持 ROLLUP。你可以用老式的方式来做：

```
with t as 
    (SELECT aType, SUM(Earnings - Expenses) "Rev"
     FROM aTable
     GROUP BY aType
    )
select t.*
from ((select aType, rev from t) union all
      (select NULL, sum(rev))
     ) t
ORDER BY (case when atype is NULL then 1 else 0 end), aType ASC 
```

这是令人讨厌的蛮力方法。如果此版本的 Sybase 不支持`with`，您可以执行以下操作：

```
select t.aType, t.Rev
from ((SELECT aType, SUM(Earnings - Expenses) "Rev"
       FROM aTable
       GROUP BY aType
      ) union all
      (select NULL, sum(rev))
     ) t
ORDER BY (case when atype is NULL then 1 else 0 end), aType ASC 
```

这是非常基本的标准 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:04:20.953

可能您可以在 sybase 中使用 compute by 子句，例如：

```
create table #tmp1( name char(9), earning int , expense int) 
insert into #tmp1 values("A",30,20)
insert into #tmp1 values("B",50,30)
insert into #tmp1 values("C",60,30)

select name, (earning-expense) resv from #tmp1
group by name
order by name,resv
compute sum(earning-expense) 
```

或者

```
select name, convert(varchar(15),(earning-expense)) resv  from #tmp1
group by name
union all
SELECT "------------------","-----"
union all
select "ALL",convert(varchar(15),sum(earning-expense)) from #tmp1 
```

谢谢，戈帕尔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:10:00.560

您是否尝试过使用`UNION ALL`与此类似的方法：

```
select aType, Rev
from
(
  SELECT aType, SUM(Earnings - Expenses) "Rev", 0 SortOrder
  FROM aTable
  GROUP BY aType
  UNION ALL
  SELECT 'All', SUM(Earnings - Expenses) "Rev", 1 SortOrder
  FROM aTable
) src
ORDER BY SortOrder, aType 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/b6c55/3)。这给出了结果：

```
| ATYPE | REV |
---------------
|     A |  10 |
|     B | 150 |
|     C | 250 |
|   All | 410 | 
```

# ios - 有没有办法在 XCode 4 中以编程方式执行“创建 NSMangedObjectSubclass”命令？

> ID：14822474
> 
> 赞同：1
> 
> 时间：2013-02-11T22:55:15.847
> 
> 标签：ios, xcode, core-data, xcode4

每次我在 XCode 模型构建器中编辑核心数据模型以选择“Editor -> Create NSManagedObjectSubclass”，然后选择放置生成文件的项目组和目录时，我都觉得非常乏味，并同意是的，我愿意想替换他们的旧版本。

如果有一个单行 shell 命令来生成这些带有默认组和目录的文件，那就太好了。这样的工具存在吗？如果不是，人们将如何编写这样的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:07:50.120

我认为没有任何方法可以像这样自动化 Xcode。最接近的是 AppleScript 中的通用 UI 自动化功能，但您所要求的非常复杂。

相反，您可能想要调查[mogenerator](https://github.com/rentzsch/mogenerator)。它与 Xcode 所做的事情并不完全相同，但它基本上是一种将 CoreData 类重新生成为构建系统的一部分的工具，而不会干扰您可能想要为该类编写的自定义代码。

# javascript - jquery没有从select语句中获取价值

> ID：14822476
> 
> 赞同：0
> 
> 时间：2013-02-11T22:55:21.833
> 
> 标签：javascript, jquery, jquery-selectors

这真的很奇怪，但我可能遗漏了一些简单的东西。我有一个简单的选择语句，用户可以在其中选择一个值。

onChange 调用一个函数 getDrop2() ，目前我正试图让它提醒我选择了哪个选项。

我的html是：

```
<select  onChange= "getDrop2()" id = "drop1" >
     <option value="0">All</option>
     <option value="1">Alphabetical</option>
     <option value="2">Brewery</option>
     <option value="3">Style</option>
</select> 
```

我的 Javascript 是：

```
function getDrop2(){
    var choice = $("#drop1").val()
    alert(choice);

} 
```

警报语句的输出只是空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:59:51.783

在 jQuery 中，您最好执行以下操作：

```
<select id = "drop1" >
     <option value="0">All</option>
     <option value="1">Alphabetical</option>
     <option value="2">Brewery</option>
     <option value="3">Style</option>
</select> 
```

使用以下 JavaScript：

```
 $(function(){
    $('#drop1').change(function() {
        var choice = $(this).val();
        alert(choice);
    }
  }); 
```

这个想法是 jQuery 现在自动将 change 函数附加到 id 为“drop1”的 select 通过使用这种模式，您已经将 HTML 与执行业务逻辑的 JavaScript 分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:19:41.193

尽管其他人选择的是更好的方法。我的回答只是告诉你为什么你的代码不工作

试试这个

```
var choice = $('#drop1 option:selected').val() 
```

代替

```
var choice = $("#drop1").val() 
```

# ios - iOS 发布触摸事件以将数据加载到 UIWebview

> ID：14822477
> 
> 赞同：0
> 
> 时间：2013-02-11T22:55:26.457
> 
> 标签：ios, uiwebview, touch-event

我有一个可滚动的 UIWebview 并从数组中加载文本。它们是上一个和下一个按钮，允许用户获取上一个或下一个内容。

如果用户按住 UIWebview 的可滚动内容并点击下一步，则 UIWebview 中的文本将不会加载下一个数据，直到用户从屏幕上松开手指。

当用户点击上一个或下一个按钮时，如何立即取消屏幕上的触摸。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:03:23.763

通常，关闭并重新打开一个手势会强制它取消。

编辑：我之前在手机上，所以我会在我的答案中添加更多细节。

如果您使用 iOS 5 及更高版本，您可能可以在按钮操作中尝试类似的操作（我现在不在 Mac 上，所以我没有测试）：

```
- (IBAction)yourAction:(id)sender {
    [webView.scrollView setScrollEnabled:NO];
    [webView.scrollView setScrollEnabled:YES];

    //The rest of your code...
} 
```

我说 iOS 5 及更高版本的原因是因为在 iOS 5 之前， a 的 scrollView`UIWebView`没有暴露。如果您不使用 iOS 5，则必须[通过迭代](http://blog.andrewpaulsimmons.com/2010/02/controlling-uiscrollview-in-uiwebview.html)webView 的子视图来找到`UIScrollView`.

# c++ - 避免 unordered_map 插入中的额外过程

> ID：14822482
> 
> 赞同：4
> 
> 时间：2013-02-11T22:55:50.107
> 
> 标签：c++, memory-management, reference, unordered-map

我有一个`std::unordered_map`，并且我想要增加 a 中的第一个值，`std::pair`由 散列`key`，并创建对 的引用`key`。例如：

```
std::unordered_map<int, std::pair<int, int> > hash;
hash[key].first++;

auto it(hash.find(key));
int& my_ref(it->first); 
```

我可以不使用`[]`运算符，而是使用 插入数据`insert()`，但我会分配一对，即使它稍后会被释放，因为`hash`可能已经有`key`- 但不确定。使其更清晰：

```
// If "key" is already inserted, the pair(s) will be allocated
// and then deallocated, right?
auto it(hash.insert(std::make_pair(key, std::make_pair(0, 0))));
it->second.first++;

// Here I can have my reference, with extra memory operations,
// but without an extra search in `hash`
int& my_ref(it->first); 
```

我非常倾向于使用第一个选项，但我似乎无法决定哪个是最好的。有什么更好的解决方案吗？

PS：对我来说，一个理想的解决方案是像插入一样不需要初始的，可能是无用的，分配价值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:23:41.847

正如其他人指出的那样，“分配” a`std::pair<int,int>`实际上只不过是复制两个整数（在堆栈上）。对于`map<int,pair<int,int>>::value_type`，即`pair<int const, pair<int, int>>`您处于 3`int`秒，因此使用第二种方法没有显着的开销。您可以通过使用`emplace`而不是`insert`ie 稍微优化：

```
// Here an `int` and a struct containing two `int`s are passed as arguments (by value)
auto it(hash.emplace(key, std::make_pair(0, 0)).first);
it->second.first++;

// You get your reference, without an extra search in `hash`
// Not sure what "extra memory operations" you worry about
int const& my_ref(it->first); 
```

您的第一种方法，同时使用`hash[key]`和`hash.find(key)`必然会更昂贵，因为元素搜索肯定会比迭代器取消引用更昂贵。

`unordered_map<...>::value_type`当所有参数都只是`int`s时，在构造 的过程中过早复制参数是一个可以忽略不计的问题。但是，如果您有一个重量级`key_type`或`pair`重量级类型作为`mapped_type`，您可以使用上面的以下变体尽可能通过引用转发所有内容（并对右值使用移动语义）：

```
// Here key and arguments to construct mapped_type 
// are forwarded as tuples of universal references
// There is no copying of key or value nor construction of a pair 
// unless a new map element is needed.
auto it(hash.emplace(std::piecewise_construct, 
                        std::forward_as_tuple(key), // one-element tuple
                        std::forward_as_tuple(0, 0) // args to construct mapped_type
                     ).first);
it->second.first++;

// As in all solutions, get your reference from the iterator we already have
int const& my_ref(it->first); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:47:39.950

如果我理解正确，你想要的是一个`operator[]`返回一个`iterator`，而不是一个`mapped_type`。的当前接口`unordered_map`不提供此类功能，并且`operator[]`实现依赖于私有成员（至少是 boost 实现，我在我的环境中没有访问 C++11 标准文件）。

我想 JoergB 的答案会更快，而 Kerrek SB 的答案会更小。由您决定什么对您的项目更重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:02:04.237

这个怎么样：

```
auto it = hash.find(key);

if (it == hash.end()) { it = hash.emplace(key, std::make_pair(0, 0)).first; }

++it->second.first;

int const & my_ref = it->first;   // must be const 
```

（如果它是一个有序的地图，你会使用`lower_bound`并暗示插入来回收树行走。）

# asp.net - Request.Browser 始终注册为 IE7，即使在运行 IE8 或 IE9 时也是如此

> ID：14822485
> 
> 赞同：1
> 
> 时间：2013-02-11T22:56:05.500
> 
> 标签：asp.net, internet-explorer

我正在使用以下 asp.net 代码来检测浏览器类型：

```
 System.Web.HttpBrowserCapabilities browser = Request.Browser;
            if (browser.Browser == "IE" && browser.MajorVersion == 7)
            {
                do stuff...
            } 
```

我正在运行 IE9，但是当我调试时，browser.MajorVersion 始终为 7。什么可能导致这种情况，我该如何防止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:10:08.437

确保您在开发人员工具中将浏览器模式设置为 IE9

![开发者工具](../Images/de038db26db4f7afedb7bfbdd4ffb01f.png)

这就是 MS 关于 doctypes[源链接的说法](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)

1.  如果网页指定 doctype 指令并包含 X-UA-Compatible 标头，则标头优先于指令。

2.  如果浏览器支持页眉，但不支持任何指定的文档模式，它将使用支持的最高文档模式来显示网页。

不支持标头的旧版本浏览器使用 来确定文档模式。

**Internet Explorer 9 及更早版本在 IE5 (Quirks) 模式下显示没有指令的网页。因此，我们建议所有网页都指定一个指令，例如 HTML5 doctype。**

这种灵活性可以最大程度地兼容仍然流行的早期版本的 Internet Explorer。

注意 因为所有受支持的 Internet Explorer 版本（包括 Microsoft Internet Explorer 6）都将 HTML5 文档类型解释为标准模式文档类型，所以我们建议对不需要不同声明的所有网页使用 HTML5 文档类型。**这可确保您的网页以最高可用标准模式显示。**

X-UA-Compatible 标头不区分大小写；但是，它必须出现在网页的标题（HEAD 部分）中，位于除标题元素和其他元元素之外的所有其他元素之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:18:36.253

您需要为您的网页指定特定的文档模式，使用 meta 元素在您的网页中包含**X-UA-Compatible**标头，如下例所示。

```
<html>
  <head>
    <!-- Enable IE9 Standards mode -->
    <meta http-equiv="X-UA-Compatible" content="IE=9" >
    <title>My webpage</title>
  </head>
  <body>
      <!-- Your Content -->
  </body>
 </html> 
```

# jquery - Chrome：在页面上向下滚动，直到点击按钮

> ID：14822489
> 
> 赞同：0
> 
> 时间：2013-02-11T22:56:46.033
> 
> 标签：jquery, google-chrome-extension

我将制作一个非常小的**Chrome 扩展程序**，每 5 秒在页面上向下滚动一次，直到单击按钮。

我的问题是当按钮被点击时我可以得到事件。

popup.js

```
$("#stop").click(function() {
    alert(1);
});

$("#start").click(function() {
  setInterval(function(){ 
    $("html, body").animate({ scrollTop: $(document).height() }, 1000);
  }, 5000);
});

/*
$(window).load(function() {
  setInterval(function(){ 
    $("html, body").animate({ scrollTop: $(document).height() }, 1000);
  }, 5000);
});
*/ 
```

html

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
      body {
        min-width: 357px;
        overflow-x: hidden;
      }
      input {
        float: right;
      }
    </style>
    <script src="jquery-latest.js"></script>
    <script src="popup.js"></script>
  </head>
  <body>

    Classname <input type="text" name="classname" id="classname"><br>
    Interval: <input type="text" name="interval"><br>

    <button type="button" id="start">Scroll Down</button>
    <button type="button" id="stop" onclick="test()">Stop</button>
  </body>
</html> 
```

显现

```
{
  "manifest_version": 2,

  "name": "One-click Kittens",
  "description": "This extension demonstrates a 'browser action' with kittens.",
  "version": "1.0",

  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": ["tabs", "http://*/*", "background"],
  "content_scripts": [ {
    "matches": ["http://*/*"],
    "js": [ "jquery-latest.js","popup.js" ],
    "matches": [ "http://*/*", "https://*/*"],
    "run_at": "document_end"
  }]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:58:48.930

你很亲密——你需要把你的代码保存在`$(window).load()`函数中；否则，您会尝试将事件侦听器附加到尚未创建的元素上，这对您来说是行不通的。

无论如何，这应该可以解决问题：

```
$(window).load(function() {
    $("#stop").click(function() {
        alert(1);
    });

    $("#start").click(function() {
      setInterval(function(){ 
        $("html, body").animate({ scrollTop: $(document).height() }, 1000);
      }, 5000);
    });
}); 
```

这是一个奖金；而不是长而笨重的写作`$(window).load(function() {...})`，你可以`$(function() {...});`用同样的效果写作。

# c++ - Problems with converting files to binary c++ studio 2012

> ID：14822490
> 
> 赞同：0
> 
> 时间：2013-02-11T22:56:48.527
> 
> 标签：c++, binary, jpeg

I'm writing a simple program that transforms a file from its original type into a binary form.

However, I'm having the following problem. The code compiles correctly but when i run it, the console window opens and never closes until i close it myself. Also, i have noticed that the longer the console window stays open, the larger the size of my newly created binary file will be. Below is my code:

```
#include <fstream>//to open a file

using namespace std;
int main(void){
   ifstream in("in.JPG");
   ofstream out("out.bin", ios::binary);
   double d;

   while(!in.eof()) {
      out.write((char*)&d, sizeof d);
   }
   out.close();
   in.close();

return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:57:55.717

You never read anything from `in`, therefore it has no chance of ever hitting `eof`.

Also, using `eof` in loop conditions is likely to lead to incorrect results, as explained in the following SO question: [Why is iostream::eof inside a loop condition considered wrong?](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)

(Generally, it's unclear what you're trying to do. `.jpg` is a 'binary' format, there is no sensible notion of 'converting a `.jpg` file to binary'.)

# android - Java Build Path 和清理不需要的碎片

> ID：14822491
> 
> 赞同：1
> 
> 时间：2013-02-11T22:56:49.507
> 
> 标签：android, androidplot

在我努力的过程中，我在我的项目中添加了两个版本的 androidplot。我意识到这会引起冲突，所以我尝试删除两者以重新开始，现在我得到了

```
02-11 22:50:10.769: E/AndroidRuntime(20299): java.lang.RuntimeException: Unable to start activity         ComponentInfo{com.cpdsessions.exercise_app/com.cpdsessions.exercise_app.ActivityLevelView}: android.view.InflateException: Binary XML file line #21: Error inflating class com.androidplot.xy.XYPlot
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.os.Looper.loop(Looper.java:150)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.app.ActivityThread.main(ActivityThread.java:4385)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at java.lang.reflect.Method.invokeNative(Native Method)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at java.lang.reflect.Method.invoke(Method.java:507)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at dalvik.system.NativeStart.main(Native Method)
02-11 22:50:10.769: E/AndroidRuntime(20299): Caused by: android.view.InflateException: Binary XML file line #21: Error inflating class com.androidplot.xy.XYPlot
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:250)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.app.Activity.setContentView(Activity.java:1742)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at com.cpdsessions.exercise_app.ActivityLevelView.onCreate(ActivityLevelView.java:28)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
02-11 22:50:10.769: E/AndroidRuntime(20299):    ... 11 more
02-11 22:50:10.769: E/AndroidRuntime(20299): Caused by: java.lang.ClassNotFoundException: com.androidplot.xy.XYPlot in loader dalvik.system.PathClassLoader[/data/app/com.cpdsessions.exercise_app-1.apk]
02-11 22:50:10.769: E/AndroidRuntime(20299):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
02-11 22:50:10.769: E/AndroidRuntime(20299):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
02-11 22:50:10.769: E/AndroidRuntime(20299):    ... 20 more 
```

谁能告诉我如何清理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:21:46.887

我意识到问题出在哪里，我的布局中仍然有一个 androidplot 元素，所以实际上该项目并没有完全清除该尝试

谢谢

# html - Firefox 不会播放带有 HTML5 的 .webm 和 .ogv 视频

> ID：14822493
> 
> 赞同：2
> 
> 时间：2013-02-11T22:56:53.297
> 
> 标签：html, firefox, video, ogg, webm

我为我的网站准备了 3 种视频格式：

```
/assets/video/background-purple.ogg
/assets/video/background-purple.webm
/assets/video/background-purple.mp4 
```

在网站[http://tekhy.net/](http://tekhy.net/)

我使用 <video> 标签播放视频：

```
<video webkit-playsinline autoplay="autoplay" loop="true" poster="/assets/video/transparent.png">
    <source src="/assets/video/background-purple.ogg" type="video/ogg">
    <source src="/assets/video/background-purple.mp4" type="video/mp4">
    <source src="/assets/video/background-purple.webm" type="video/webm">
</video> 
```

我已经为我的视频设置了正确的 mimetype `.htaccess`：

```
AddType video/mp4 .mp4 .m4v
AddType video/webm .webm
AddType video/ogg .ogv .ogg 
```

在 Google Chrome 和 Chromium 中一切正常，在 Firefox Mobile 上也很好。在 Firefox Nightly 21.0a 上运行良好。但是在 Elementary OS Luna 上的 Firefox 18.0.1 上，它不会工作。

Firebug 告诉我它无法解码 webm 和 ogg/ogv 媒体（Firefox atm 不支持 mp4）。

我也尝试过 background-purple.ogv type="video/ogv" 但问题仍然存在。

我的 webm 视频是：

> Google/On2 的 VP8 Video (VP80)
> Planar 4:2:0 YUV

目前我真的不知道如何解决这个问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T16:14:58.687

我相信这个问题与一直到 FF 20 的错误有关，其中许多流行的 webm 编码器都插入了负时间戳，并且 firefox 在下载整个 webm 文件之前无法播放视频： [https:// bugzilla.mozilla.org/show_bug.cgi?id=868797](https://bugzilla.mozilla.org/show_bug.cgi?id=868797)

评论中提到了修复：

> ffmpeg -i input.webm -codec copy -avoid_negative_ts 1 output.webm

重要的编码标志是**-avoid_negative_ts 1**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:05:06.343

似乎我找到了解决方案：

我将我的 ogv 编解码器从 VP8 切换到 Theora，现在 Firefox 可以正确播放视频了。

我将此代码用于源代码：

```
<source src="/assets/video/background-purple.ogv" type="video/ogg"> 
```

MIME 类型是：

```
AddType video/ogg .ogv .ogg 
```

编解码器是：

```
Xiph.org's Theora Video (theo) 
```

我想它也适用于.webm，但我没有测试过。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T04:31:31.657

Chrome 的 HTML5 视频有点问题。按照 Fez 的建议进行操作，或者直接使用 .mp4 和 .webm。WEBM 在 Chrome 中更稳定，您只需要这两种格式即可兼容浏览器。这也节省了您渲染视频的时间！

# html - Mac 与 Windows 的 CSS 问题

> ID：14822494
> 
> 赞同：0
> 
> 时间：2013-02-11T22:56:58.573
> 
> 标签：html, css, windows, macos

我一直在为搜索栏制作表单，但遇到了问题。在我的 Windows PC 上，我看到搜索栏是我编码的方式，但是当我在 Mac 上查看时，它的宽度不同。

（都使用谷歌浏览器）

Windows（我想要的样子）

![在此处输入图像描述](../Images/dff4b04c8fe28191b38a8e1a8a1768f8.png)

Mac（我希望它和 Windows 一样）

![在此处输入图像描述](../Images/3710a924eb36578985a9568e30024e7c.png)

HTML：

 `````
<div id="searchBox">
<div id="searchBarHold">
<input type="text" class="searchBar" size="40" /><input type="button" value="SEARCH" class="searchButton" />
</div>
</div> 
````  `CSS

 `````
#searchBox {width:368px;height:45px;background:url(../images/gradient.png) #333;border-radius:5px;float:left;}

#searchBarHold {padding:7px;}

.searchBar {padding:5px;width:border-radius:3px;border:none;}

.searchButton {height:27px;border-left:1px #f98923 solid;border-right:1px #f98923 solid;border-bottom:1px #f9b233 solid;border-top:1px #ffd797 solid;background:#f9b233;color:#fff;border-radius:3px;font-weight:900;} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:04:07.077

看起来你正在使用固定宽度。你可以在这里做几件事。

1）使您的文本输入和按钮输入固定宽度，以便它们占用您的搜索框的必要空间（记住要考虑填充/边距）

2）从您的搜索框中删除宽度，使其仅与其中的子项一样宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:09:13.400

我已经为这些输入提供了宽度，因为不同的浏览器正在应用它们自己的 css，而您并没有覆盖这些 css。所以定义这些宽度，你将对元素的外观有更多的控制。所以，试试[这个](http://cdpn.io/grqtB)，我刚刚在浏览器堆栈以及 ie9 上进行了测试，它工作正常，可以使用你想要的填充。````

# python - 龙卷风 set_secure_cookie Unicode 错误

> ID：14822495
> 
> 赞同：2
> 
> 时间：2013-02-11T22:56:58.727
> 
> 标签：python, cookies, unicode, tornado

我最近尝试遵循[龙卷风 cookie 和安全 cookie 概述](http://www.tornadoweb.org/documentation/overview.html#cookies-and-secure-cookies)并给出示例。

当我的服务器尝试执行 set_secure_cookie(..) 时出现一个奇怪的错误：

```
File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/escape.py", line 168, in utf8
assert isinstance(value, unicode)
AssertionError 
```

**我做错了什么？**

我的龙卷风服务器：

```
import tornado.auth
import tornado.escape
import tornado.httpserver
import tornado.ioloop
import tornado.options
import tornado.web
import Settings

from tornado.options import define, options

define("port", default=8888, help="run on the given port", type=int)

class BaseHandler(tornado.web.RequestHandler):
    def get_current_user(self):
        return self.get_secure_cookie("user")

class MainHandler(BaseHandler):
    @tornado.web.authenticated
    def get(self):
        name = tornado.escape.xhtml_escape(self.current_user)
        self.write("Hello, " + name)

class LoginHandler(BaseHandler):
    def get(self):
        self.write('<html><body><form action="/login" method="post">'
                   'Name: <input type="text" name="name">'
                   '<input type="submit" value="Sign in">'
                   '</form></body></html>')

    def post(self):
        self.set_secure_cookie("user", self.get_argument("name"))
        self.redirect("/")

class Application(tornado.web.Application):
    def __init__(self):
        handlers = [
            (r"/", MainHandler),
            (r"/login", LoginHandler),
        ]
        settings = {
            "template_path":Settings.TEMPLATE_PATH,
            "static_path":Settings.STATIC_PATH,
            "debug":Settings.DEBUG,
            "cookie_secret": Settings.COOKIE_SECRET,
            "login_url": "/login"
        }
        tornado.web.Application.__init__(self, handlers, **settings)

def main():
    tornado.options.parse_command_line()
    http_server = tornado.httpserver.HTTPServer(Application())
    http_server.listen(options.port)
    tornado.ioloop.IOLoop.instance().start()

if __name__ == "__main__":
    main() 
```

完整追溯：

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/web.py", line 1042, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "/home/gvincent/Dropbox/workspace/scubabook/WebServer.py", line 31, in post
    self.set_secure_cookie("user", self.get_argument("name"))
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/web.py", line 426, in set_secure_cookie
    self.set_cookie(name, self.create_signed_value(name, value),
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/web.py", line 438, in create_signed_value
    name, value)
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/web.py", line 2029, in create_signed_value
    signature = _create_signature(secret, name, value, timestamp)
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/web.py", line 2066, in _create_signature
    hash = hmac.new(utf8(secret), digestmod=hashlib.sha1)
  File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/escape.py", line 168, in utf8
    assert isinstance(value, unicode)
AssertionError 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:22:50.113

你的`Settings.COOKIE_SECRET`值*必须*是一个`unicode`或`str`对象。

只有在不是这种情况下才会提出您看到的断言。您需要三次检查您的`Settings.COOKIE_SECRET`值是否不是列表、元组、字节数组或任何其他不是`str`or的类型`unicode`。

# azure - 运行 Azure 模拟器时出错：错误 5048

> ID：14822497
> 
> 赞同：2
> 
> 时间：2013-02-11T22:56:59.990
> 
> 标签：azure, azure-compute-emulator, azure-1.8

我刚刚从一台机器移动到另一台机器，所以一切都是新安装的（Windows 7、VS 2012、SQL 2008、Azure 1.8、IIS），我收到了错误：

> 站点 1273337584 被禁用，因为为站点定义的根应用程序无效。有关根应用程序无效的原因的信息，请参阅前面的事件日志消息。

和

> 属于站点“1273337584”的应用程序“/”设置了无效的 AppPoolId“ff257d89-eddd-4724-9cbb-66a3f05590ef”。因此，该应用程序将被忽略。

在我的本地机器上。知道为什么会这样吗？我忘了设置什么？

# javascript - 返回对象和返回 javascript 函数中的默认值之间的开销是否存在差异？

> ID：14822498
> 
> 赞同：0
> 
> 时间：2013-02-11T22:57:03.540
> 
> 标签：javascript, performance, scope, complexity-theory, chaining

Javascript 函数可以返回对象或未定义。我正在考虑采用始终返回调用函数的对象的策略，除非需要一些其他值以促进方法链接。即使在编写函数时没有感知到需要链接的情况下，默认情况下是否存在与此相关的开销？

# node.js - 如何同时使用 node-imap 和 Meteor？

> ID：14822500
> 
> 赞同：1
> 
> 时间：2013-02-11T22:57:18.053
> 
> 标签：node.js, imap, meteor

我正在寻找一种访问 IMAP 邮件帐户（如 Gmail）和使用 Meteor 的方法。我找到了 node-imap，但由于它是一个 NPM 模块，我很难让 NPM 模块在 Meteor 中工作。

有没有使用 Meteor 访问 IMAP 帐户的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T21:30:53.300

[我遇到了与此处](https://groups.google.com/forum/?fromgroups#!topic/meteor-core/ZlPPrH7SqrE)描述的相同的麻烦。

而不是`__meteor_bootstrap__.require`使用`Npm.require`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T05:25:50.353

这是一个有趣的。我就是以它为例，请[在 GitHub 上查看我的存储库](https://github.com/AVGP/meteordesk "这个存储库")

简而言之：按照[这个 Coderwall 提示](https://coderwall.com/p/2fveyq "这个 Coderwall 提示")安装 node-imap 模块。然后在你的流星代码中：

```
if (Meteor.isServer) {
  var require = __meteor_bootstrap__.require;
  var imap = require('imap'); 
```

并将实际代码放入

```
Meteor.startup(function() { ... }); 
```

在服务器端调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-05T12:31:07.153

这可能很有用 [https://atmospherejs.com/epaminond/imap](https://atmospherejs.com/epaminond/imap)

安装

```
meteor add epaminond:imap 
```

用法

这就是它在常规节点中的使用方式

```
var Imap = require('imap'); 
```

要在*Meteor*中使用这个包，你可以访问全局*Imap*变量。

# javascript - 动态生成的链接在 IE 中不起作用

> ID：14822501
> 
> 赞同：0
> 
> 时间：2013-02-11T22:57:20.177
> 
> 标签：javascript, jquery, html

我有一个页面，它使用 jQuery 来构建基于现有 HTML 元素的链接和锚标记。它适用于我测试的所有浏览器，除了 IE，其中锚标记的输出略有不同。

其它浏览器：

```
 <a class="courseshortcut" name="TitleJanuary12-13,2013"></a> 
```

IE浏览器：

```
 <a name="TitleJanuary12-13,2013" class="courseshortcut"/> 
```

生成的指向这些锚标记的链接如下所示：

```
 <a href="#TitleJanuary12-13,2013">January 12-13, 2013 - Miami, FL</a> 
```

document.ready 函数中的以下代码部分添加了锚点：

```
 //adds the anchor tags
$('.courseentry').each(function() {
    var str = $(this).find('.coursetitle').html() + $(this).find('.coursedate').html();     
    $(this).prepend("<a class='courseshortcut' name='" + str.replace(/\s+/g, '') + "'></a>");
}); 
```

我无法弄清楚为什么会出现这个问题。有人可以启发我吗？可以在[此处](http://www.asmithspace.net/testing/appendtest.html)找到更完整的测试脚本版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:13:46.907

您的页面中有一些无效的 HTML。只需在 IE 中打开并在开发人员工具中查看 (F12)。例如`<div> is inside <p>` [，查找此链接以获取更多信息](https://stackoverflow.com/questions/10763780/putting-div-inside-p-is-adding-an-extra-p)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T23:16:04.223

我认为 IE 在主题标签之前需要一个文件名或 url

```
href="#TitleJanuary12-13,2013" 
```

但我可以纠正

# .net - mshtml.HTMLInputElement.name COMException

> ID：14822505
> 
> 赞同：2
> 
> 时间：2013-02-11T22:57:33.933
> 
> 标签：.net, dom, comexception

在我们的 .NET 项目中使用引用时，我看到了类似的问题`mshtml.dll`，但与此特定情况无关。我怀疑这个问题可能与这个线程（[.net document write with mshtml](https://stackoverflow.com/questions/5170078/net-document-write-with-mshtml)）中所说的有关在我的案例中缺少所有相关属性/属性的 coclass 有某种关系。这里的细节是我`mshtml.HTMLInputElement`在解析对象时使用的一组属性/属性`WebBrowser.Document`：

```
if (domElement is HTMLInputElement)
{

  HTMLInputElement inputElement = (HTMLInputElement)domElement;

  if (inputElement.name == null || inputElement.name.Trim() == string.Empty ||
      inputElement.name.Contains("/") || inputElement.name.Contains("="))
  {
    ...

  } 
```

}

以上在开发PC（VS2008 3.5 SP1）下工作正常，除了`name`属性之外，其他一些属性也被成功调用`type`，等等，但是当应用程序安装在具有所有必需框架部件的Windows 7下时，我得到`COMException`：

===============

> System.Runtime.InteropServices.COMException 越过了本机/托管边界 Message=Member not found。（来自 HRESULT 的异常：0x80020003 (DISP_E_MEMBERNOTFOUND)）Source=mscorlib
> ErrorCode=-2147352573 StackTrace：在 System.RuntimeType.ForwardCallToInvokeMember（字符串成员名称，BindingFlags 标志，对象目标，Int32 [] aWrapperTypes，MessageData 和 msgData）在 mshtml.DispHTMLInputElement.get_name（ )

=======================

`name`对,等属性的调用`type`现在都不起作用。总是一样`Interop.COMException`的被抛出。在我看来，这与[使用 mshtml 编写的 .net 文档](https://stackoverflow.com/questions/5170078/net-document-write-with-mshtml)中解释的问题相同。

有谁知道这个问题的有效解决方法？

# c - 在c中通过引用传递不同于c++？

> ID：14822512
> 
> 赞同：0
> 
> 时间：2013-02-11T22:58:27.637
> 
> 标签：c, reference

当我尝试运行它时，我才得到这个 `error: expected ‘;’, ‘,’ or ‘)’ before ‘&amp;’ token`

它在抱怨这条线

```
int read_values(double &sum) { 
```

所以我想传递总和，然后直接编辑它。你如何在 C 中做到这一点？多谢你们。

```
#include <stdio.h>

/*
    Read a set of values from the user.
    Store the sum in the sum variable and return the number of values read.
*/
int read_values(double &sum) {
  int values=0,input=0; double sum2=0;
  sum2 = sum;
  printf("Enter input values (enter 0 to finish):\n");
  scanf("%d",&input);
  printf("%d\n", input);
  while(input != 0) {
    values++;
    sum2 += input;

    scanf("%d",&input);
  }

  return values;
}

int main() {
  double sum=0;
  int values;
  values = read_values(sum);
  printf("Average: %g\n",sum/values);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:59:40.830

C 不做引用，只做原始指针。

```
main() {
    ...
    values = read_values(&sum);
    ...
}

int read_values(double* sum)
{
    ...
    sum2 = *sum;
    ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:04:19.513

我认为您正在尝试这样做：

```
int read_values(double *sum) {
  int values=0,input=0;
  printf("Enter input values (enter 0 to finish):\n");
  scanf("%d",&input);
  printf("%d\n", input);
  while(input != 0) {
    values++;
    *sum += input;
    scanf("%d",&input);
  }
  return values;
}

int main() {
  double sum=0;
  int values;
  values = read_values(&sum);
  printf("Average: %g\n",sum/values);
  return 0;
} 
```

# php - 如何在没有 ID 的 HTML 表格中选择特定列？

> ID：14822513
> 
> 赞同：0
> 
> 时间：2013-02-11T22:58:32.347
> 
> 标签：php, foreach, web-scraping, simple-html-dom

我正在使用 SimpleHTMLDOM，我有两个具有相同列的表，我需要提取列标题？

![示例图片](../Images/9c3a611c11d8df46f55212c29b6bdbab.png)

下面是我用来获取所有数据的方法，但现在我只需要选择月份和相应的列标题（一月、二月等）

```
 $r_tables = $dom->find('table');

foreach($r_tables as $table) {
    $r_cells = $table->find('td');

    foreach($r_cells as $cell) {
        echo $cell->plaintext.'<br />';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:39:51.717

我想你正在寻找的是......

```
$tables = $dom->find('table');

foreach($tables as $table) {
    $r_cells = $table->find('tr');
    $i = 0;
    foreach($r_cells as $row) {
        $cell = $row->find('td');
        if ($i == 0) {
            foreach($cell as $td) { 
                echo $td.'<br />';
            }
        }  
    $i++;  
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:39:11.787

这应该做你想做的（如果我理解正确的话）：

```
foreach($r_tables as $table) {
    $r_cells = $table->find('td');

    echo $r_cells[0]->plaintext . '<br />';;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:02:49.893

一个粗略的方法是

```
$i = 0;
foreach($r_tables as $table) {
$r_cells = $table->find('td');

foreach($r_cells as $cell) {
  if($i == 0) {    
    echo $cell->plaintext.'<br />';
  }    
}
$i++; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T00:33:35.967

从第一个表的第一个 tr 中找到 td：

```
$tds = $dom->find('table', 0)->find('tr', 0)->find('td'); 
```

将每个 td 的文本映射到一个数组中：

```
$headers = array_map(function($td){return $td->text();}, $tds); 
```

# symfony - FOSRestBundle / JMSSerializerBundle：与 Symfony2 安全角色交互

> ID：14822519
> 
> 赞同：3
> 
> 时间：2013-02-11T22:59:19.633
> 
> 标签：symfony, fosrestbundle, jmsserializerbundle

我想用 JMSSerializerBundle 和 FOSRestBundle 序列化并只返回我的实体的几个属性。

例如我有这个属性：

**用户**

*   用户名
*   电子邮件
*   生日
*   注释

**注释**

*   文本
*   约会时间

具有角色 ROLE_ADMIN 的用户应该获得整个用户对象的序列化对象。ROLE_USER 应该只获取用户名和所有评论。

在 JMSSerializerBundle 中实现 Symfony2 安全组件的最简单方法是什么？还是我需要在我的控制器中实现它并“手动”序列化它？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:38:14.947

我认为您不必全部手动完成。听起来序列化组在这里可能是一个很好的解决方案。

```
use JMS\Serializer\Annotation\Groups;

/** @Groups({"admin", "user"}) */
$username

/** @Groups({"admin"}) */
$email

/** @Groups({"admin"}) */
$birthday

/** @Groups({"admin", "user"}) */
$comments 
```

在您的控制器中，只需检查角色并使用正确的序列化组即可。

```
$serializer = $this->container->get('serializer');
$serializer->setGroups(array("admin")); or $serializer->setGroups(array("admin","user")); 
```

另一种选择是[JMSSecurityExtraBundle](http://jmsyst.com/bundles/JMSSecurityExtraBundle/1.0)，它允许您按角色保护控制器上的方法。为每个选项提供不同的路由/方法，并让包处理访问控制。

# selenium - 如何运行使用 selenium 驱动程序的单个 capybara 测试？

> ID：14822526
> 
> 赞同：1
> 
> 时间：2013-02-11T22:59:56.553
> 
> 标签：selenium, rspec, capybara

有很多示例使用 rspec、selenium 和 capybara 来运行这样开始的测试：

```
it "does something", :js => true do 
```

并且您可以通过运行“rake spec”来运行所有内容，但是如何运行单个水豚/硒测试？我这辈子都想不通。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T02:26:42.733

您可以[标记一个示例](https://www.relishapp.com/rspec/rspec-core/v/2-12/docs/command-line/tag-option!)：

```
it "does something", :js => true, :focus => true do

$ rspec . --tag focus 
```

或者您可以[指定规范的行号](https://www.relishapp.com/rspec/rspec-core/docs/command-line/line-number-appended-to-file-path!)：

```
$ rspec my_spec.rb:37 
```

# string - 在 Scala 2.10 的字符串插值中获取参数名称

> ID：14822528
> 
> 赞同：1
> 
> 时间：2013-02-11T23:00:06.513
> 
> 标签：string, scala, scala-2.10, string-interpolation

从 scala 2.10 开始，可以进行以下插值。

```
val name = "someName"
val interpolated = s"Hello world, my name is $name" 
```

现在也可以定义自定义字符串插值，您可以在[http://docs.scala-lang.org/overviews/core/string-interpolation.html#advanced_usage的“高级用法”部分的 scala 文档中看到](http://docs.scala-lang.org/overviews/core/string-interpolation.html#advanced_usage)

那么，我的问题是......有没有办法在插值之前从定义字符串新插值的隐式类内部获取原始字符串，包括任何插值变量名称？

换句话说，我希望能够定义一个插值 x，这样当我调用

```
x"My interpolated string has a $name" 
```

我可以完全如上所示获得字符串，而无需在插值内替换 $name 部分。

编辑：快速说明，我想这样做的原因是因为我想获取原始字符串并将其替换为另一个字符串，一个国际化字符串，然后替换变量值。这是我想获得原始字符串而不对其执行插值的主要原因。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:55:56.790

由于 Scala 的字符串插值可以处理其中的任意表达式，`${}`因此必须在将参数传递给格式化函数之前对其*进行评估。*因此，设计上不可能直接访问变量名。正如 Eugene 所指出的，可以通过使用宏来获取普通变量的名称。不过，我认为这不是一个非常可扩展的解决方案。毕竟，您将失去对任意表达式求值的可能性。例如，在这种情况下会发生什么：

```
x"My interpolated string has a ${"Mr. " + name}" 
```

您也许可以通过使用宏来提取变量名称，但对于任意表达式可能会变得复杂。我的建议是：*如果您的变量名称在字符串插值中应该是有意义的，请将其作为数据结构的一部分*。例如，您可以执行以下操作：

```
case class NamedValue(variableName: String, value: Any)

val name = NamedValue("name", "Some Name")

x"My interpolated string has a $name" 
```

对象被传递`Any*`给`x`. 因此，您现在可以匹配`NamedValue`内部`x`，并且您可以根据“变量名称”做特定的事情，它现在是您的数据结构的一部分。除了显式存储变量名，您还可以利用类型层次结构，例如：

```
sealed trait InterpolationType
case class InterpolationTypeName(name: String) extends InterpolationType
case class InterpolationTypeDate(date: String) extends InterpolationType

val name = InterpolationTypeName("Someone")
val date = InterpolationTypeDate("2013-02-13")
x"$name is born on $date" 
```

同样，`x`您可以在其中匹配`InterpolationType`子类型并根据类型处理事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T23:17:54.057

这似乎是不可能的。字符串插值似乎是一种编译功能，可将示例编译为：

```
StringContext("My interpolated string has a ").x(name) 
```

如您所见，该`$name`部分已经消失了。当我查看以下源代码时，我变得非常清楚`StringContext`：[https ://github.com/scala/scala/blob/v2.10.0/src/library/scala/StringContext.scala#L1](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/StringContext.scala#L1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:49:55.093

如果将 x 定义为宏，那么您将能够看到编译器生成的脱糖树（如 @EECOLOR 所示）。在该树中，“name”参数将被视为 Ident(newTermName(“name”))，因此您将能够从那里提取名称。请务必查看 docs.scala-lang.org 上的宏和反射指南，以了解如何编写宏和使用树。

# ios - 在 sqlite 中完成或重置语句的未知错误

> ID：14822529
> 
> 赞同：1
> 
> 时间：2013-02-11T23:00:07.090
> 
> 标签：ios, sqlite, full-text-search, fmdb

我正在尝试让我们当前的数据库使用 FTS。我重新编译了 FTS3 和 FTS4 支持的项目。我知道这部分有效，因为我已经尝试了 sqlite 页面上的一些示例并且它们有效。

例如

```
CREATE TABLE t2(id INTEGER PRIMARY KEY, a, b, c);
CREATE VIRTUAL TABLE t3 USING fts4(content="t2", a, c); 
```

我想要做的是将一个虚拟表添加到一个已经保存到我们应用程序的文档目录中的 .db 中。它是可写的。

我的问题是多部分的。首先，我在 Firefox 的附加 SQLite 管理器中尝试了我的查询。我的查询是这样的：

```
CREATE VIRTUAL TABLE VirtualTestTable USING fts4(content=Chromosomes, ID Integer Primary Key Autoincrement, rsID, ChrID, Position, Strand, GeneSymbol) 
```

一旦我在 sqlite manager 中运行它，它就会创建几个不同的表（VirtualTestTable、VirtualTestTable_docsize、VirtualTestTable_segdir、VirtualTestTable_segments、VirtualTestTable_stat）。

所以我假设 sqlite manager 支持 FTS4。我的表中还填充了我的染色体表中的原始数据。但是当我尝试匹配表中的任何内容时，我总是得到零结果。所以我的第一个问题是，sqlite 管理器是否支持 FTS 查询？

我的另一个对我来说更重要的问题是，如果我的查询在 sqlite manager 中有效，我会在我的 Xcode 项目中尝试这个查询，并使用不同的变体

```
content='Chromosomes'
content=\"Chromosomes\"
content=Chromosomes 
```

我的查询总是出错。我正在使用 FMDB 并使用 executeUpdate: 消息。我的错误是：

```
Error calling sqlite3_step (1: SQL logic error or missing database) SQLITE_ERROR
Unknown error finalizing or resetting statement (1: unrecognized parameter: content=Chromosomes) 
```

有谁知道我为什么会收到这个错误？我不认为这是一个丢失的数据库，因为当我尝试在我的 fmdatabase 上创建一个空的虚拟表时，它运行良好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:24:40.253

FTS 查询在 SQL 管理器中工作得很好：

```
CREATE VIRTUAL TABLE t USING FTS4(x);
INSERT INTO t VALUES('blah');
INSERT INTO t VALUES('blubb');
SELECT * FROM t WHERE x MATCH 'bl*'; 
```

错误消息“unrecognized parameter: content=”对于不支持无内容/外部内容表的 SQLite 版本是典型的，即早于 3.7.11 的 SQLite 版本。

# java - 流/迭代器有 DSL 吗？

> ID：14822534
> 
> 赞同：0
> 
> 时间：2013-02-11T23:00:28.000
> 
> 标签：java, scala, iterator, time-series, dsl

我想知道（并且几乎变得绝望）是否有针对有序系列对象的流/迭代器制定的 DSL？

源是 id、time、key、value 实例的有序流，要求是加入和分析这些流。这必须通过收集键组合并将指标应用于某些（可定义的）时间限制内的值（在一天内、同一秒内计算不同的键或总和值）来完成。有一些适用于时间序列 (ESP) 的 DSL，但主要使用相对简单的时间窗口，它们似乎无法通过 id、时间等处理订单/连接（因此通过 id 计算组合）。

我要做的是“计算A和（B或C）的组合，在同一秒内计算不同的D，将E与相同的ID相加”

结果应包含 A、（B 或 C）的所有可用组合以及键 D 的不同值的计数，这些值与每个不同 id 的 A、（B 或 C）在同一秒内以及键的值的总和每个 id 的 E（这是 id 具有 A、（B 或 C）的所有 E 值的总和。

这不是一个简单的问题。我只是在寻找可能对此类问题有用的、已经考虑过的 DSL。我不认为 SQL 会成功。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:07:15.080

我认为您找不到此类方法，因为`streams`并且`iterators`不打算包含有序数据（但是可以）。结果，如果您不能依赖内部的排序数据，则不需要此类方法，因为您将需要从流/迭代器中读取所有数据，因此它们将失去其作为数据结构的主要目的。那么为什么不使用列表呢？

# .net - .NET 2.0 中的 TreeView 突出显示颜色

> ID：14822535
> 
> 赞同：0
> 
> 时间：2013-02-11T23:00:28.957
> 
> 标签：.net, winforms, treeview

我正在尝试更改`TreeView`'s default `highlight color`。我会期待`DefaultSelectionBackground`像我在 a中所做的那样`DataGridView`，但我找不到任何东西。

这只是 的另一个限制`TreeView`，还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:07:20.037

所有标准的 Windows 控件，如 TreeView，都会注意用户选择的主题颜色。这是一种资产，Windows 是可识别和熟悉的，即使用户以前从未使用过程序。默认的突出显示颜色是蓝底白字，这是每个控件的标准颜色。当然，用户可以自定义，TreeView 会自动效仿。

如果您真的愿意，您可以将自己的颜色偏好强加给用户。将 DrawMode 属性设置为 OwnerDrawText 并实现 DrawNode 事件来绘制自己。在 DrawNode 的 MSDN 库文章中有一个很好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:03:29.993

### HTML

```
<asp:TreeView runat="server"
              ID="tvMyTreeView"
              OnTreeNodeDataBound="tvMyTreeView_TreeNodeDataBound"/> 
```

### 背后的代码

```
protected void tvMyTreeView_TreeNodeDataBound(object aSender, TreeNodeEventArgs anEvent)
{
    DataRowView dr = (DataRowView)anEvent.Node.DataItem;
    anEvent.Node.Style.Add("color", dr["COLOR"].ToString());
} 
```

# javascript - 创建一个有时间延迟的提示？

> ID：14822538
> 
> 赞同：0
> 
> 时间：2013-02-11T23:00:43.517
> 
> 标签：javascript

我正在尝试创建一个有时间延迟的提示，然后将在提示中写入的值用于表单的其他区域。我已经编写了一些 javascript 编码，但我相信我做错了一件小事，因为目前提示和延迟正在工作，但是因为正在使用 setTimeout 函数，这就是表单中显示的内容，而不是提示的内容。这是我的Javascript？

```
var name = setTimeout(function(){ prompt("What is your name?", "Type your full name here")},750); 
document.write("Document Written By: " + name + " (" + day + "/" + month + "/" + year + ") ") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:03:18.153

如果它取决于值，并且函数是异步的，那么您必须在回调中执行此操作。就像所有其他异步 JavaScript 一样......

```
setTimeout(function(){
    name = prompt("What is your name?", "Type your full name here");
    document.write("Document Written By: " + name + " (" + day + "/" + month + "/" + year + ") ");
},750); 
```

但正如@Jon 评论的那样，[请不要使用`document.write`](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice).

# asp.net-mvc - 在不显眼的验证期间 parseJSON 的语法错误

> ID：14822540
> 
> 赞同：17
> 
> 时间：2013-02-11T23:00:55.780
> 
> 标签：asp.net-mvc, jquery-validate, unobtrusive-validation, jquery-1.9, jquery-1.10

我的 MVC 应用程序正在生成以下 HTML，这会在提交时导致 Javascript 语法错误（我没有在两个文本框中输入任何内容）。这是生成的 HTML 和提交处理程序：

```
<form action="/UrIntake/Save" id="UrIntakeForm" method="post">

    <input data-val="true" data-val-length="The field LastName must be a string with a maximum length of 50." data-val-length-max="50" data-val-required="The LastName field is required." id="FormSubmitter_LastName" name="FormSubmitter.LastName" type="text" value="" />
    <input data-val="true" data-val-length="The field FirstName must be a string with a maximum length of 50." data-val-length-max="50" data-val-required="The FirstName field is required." id="FormSubmitter_FirstName" name="FormSubmitter.FirstName" type="text" value="" />

    <div id="SubmissionButtons" class="right">
            <input type="button" onclick="SubmitForm()" value="Submit" />
            <input type="button" onclick="CancelForm()" value="Cancel" />
    </div>
</form>

    function SubmitForm() {
        $("#UrIntakeForm").valid();
.
.
. 
```

这是发生语法错误的 jQuery 代码 (v1.9.0)。“数据”未定义，“返回”行是发生错误的地方：

```
parseJSON: function( data ) {
    // Attempt to parse using the native JSON parser first
    if ( window.JSON && window.JSON.parse ) {
        return window.JSON.parse( data );
    } 
```

据推测，我不必在文本框中输入任何内容（然后应该得到“必填字段”消息）。这是导致错误的原因吗？这没有意义，但我看不出还有什么可能。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-11T23:17:26.477

**原因**

`jquery.validate.unobtrusive.js`这是ASP.NET.MVC 包中的一个问题。

从 jQuery 1.9 开始， 的行为发生`parseJSON()`了变化，一个`undefined`值将被视为格式错误的 JSON，从而导致您指定的错误。有关更多信息，请参阅[jQuery 1.9 核心升级指南](http://jquery.com/upgrade-guide/1.9/#jquery-ajax-returning-a-json-result-of-an-empty-string)。

**解决方案**

使用[**jQuery Migrate 插件**](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)，其中包括向 jQuery`parseJSON()`实用程序添加向后兼容性。

* * *

**编辑**

根据[Microsoft Connect 上此线程](http://connect.microsoft.com/VisualStudio/feedback/details/776965/please-support-jquery-v1-9-0-properly-in-jquery-validate-unobtrusive)中的官方公告，**该问题已在最新版本的框架中得到解决**。

当然，正如 Andreas Larsen 在评论中指出的那样，确保在升级到新版本后清除任何相关的缓存、服务器端和客户端。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-23T21:05:39.757

我也有这个问题。问题是 $.parseJSON(undefined) 导致抛出异常，并且不显眼的验证正在发出该调用。如已接受的答案中所述，此问题已得到修复。

您可以下载此脚本的 Microsoft 版本，该脚本将正确验证而不会导致此链接异常： http: [//ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.min.js](http://ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.min.js)

# asp.net-mvc-4 - 电话号码格式化程序 UI 提示 MVC4

> ID：14822541
> 
> 赞同：1
> 
> 时间：2013-02-11T23:01:01.460
> 
> 标签：asp.net-mvc-4, formatting, phone-number

我正在尝试将模型中某些字符串的返回值格式化为看起来更像电话号码...

```
(000)-000-0000 
```

我想我会使用一个`UIHint`属性来完成这个。唯一的事情是我对如何正确地做到这一点有点困惑......

我将如何提取模型并将其格式化为 MVC 中的电话号码？

**这就是我目前正在尝试的**

```
@if(Model != null){
    String.Format("{0: (###) ###-####}", Model);
} 
```

现在，它正在核对所有非空电话号码。

**我的模型是什么样的**

```
...
[UIHint("_PhoneNumFormatter")]
        public string PatientRoomPhone { get; set; }
... 
```

例如我拿这个

```
@if (Model == "0"){
    <text>No</text>
}
else if(Model =="1"){
    <text>Yes</text>  
}
else{
    <text></text>
} 
```

在返回零或一的字符串上方使用它

```
 [UIHint("YesNo")]
    public string DischargeAdvocateCall { get; set; } 
```

和中提琴，我有一个 UI 提示。

为什么电话号码不可能？

# python - 无法向 add_date_job() 添加方法以将作业存储在 SQLAlchemyJobStore 作业存储中

> ID：14822544
> 
> 赞同：0
> 
> 时间：2013-02-11T23:01:08.833
> 
> 标签：python, sqlalchemy, scheduler, apscheduler

### 问题陈述：

我正在尝试添加一个方法 ( `Test::start()`)，`scheduler.add_date_job()`该方法被配置为将作业存储在`SQLAlchemyJobStore`作业商店中。将作业添加到作业存储成功。但是当我尝试启动调度程序时，`obj_to_ref`(in `apscheduler/util.py`) 无法获取`ref_to_obj()`给定对象的 [在这种情况下，给定对象是`Test::start()`- 换句话说，`<bound method Test.start of <__main__.Test instance at 0xa119a6c>>`]。

但是在以下情况下，相同的操作可以正常工作：

1.  其他作业存储（fe `RAMJobStore`- 这是未添加/配置作业存储时的默认设置）。
2.  当`scheduler.add_date_job()`使用其他函数（`func`下面代码中的 fe）而不是像`Test::start()`（作业商店是`SQLAlchemyJobStore`）[the `ref_to_obj()`and `obj_to_ref()`for `func`is `<function func at 0xb768ed14>`] 之类的方法调用时。我添加了一些调试（在 中`apscheduler/util.py`）以确认相同。

代码如下：

```
from apscheduler.scheduler import Scheduler as scheduler
from datetime import datetime, date, time, timedelta
import time
import logging

logging.basicConfig(filename='/tmp/log', level=logging.DEBUG,
        format='[%(asctime)s]: %(levelname)s : %(message)s')

class Failed(Exception):
    def __str__(self):
        return 'Failed!!'

# APScheduler Configure Options
_g_aps_default_config = {
    'apscheduler.standalone' : True,
    'apscheduler.jobstore.default.class' : 'apscheduler.jobstores.sqlalchemy_store:SQLAlchemyJobStore',
    'apscheduler.jobstore.default.url' : 'mysql://root:root123@localhost/jobstore',
    'apscheduler.jobstore.default.tablename' : 'mytable'
}

class Test:
    def __init__(self, *args, **kwargs):
        self.scheduler = scheduler(_g_aps_default_config)
        self.__running = False
        # Intentionally don't want to start!!
        self.__dont_start = True 
        self.__retry_count = 0
        self.__start_max_retries = 5

    def start(self):
        try:
            # Try to start here! 
            # Intentionally don't want to start for the first 5 times
            if self.__retry_count < self.__start_max_retries:
                self.__retry_count += 1
                raise Failed
            if self.__running:
                raise Failed
            self.__running = True
            print 'started successfully :)'
        except Failed:
            # log the start failure and reschedule the start()
            print 'attempt (#%d): unable to start now.. ' \
                  'so rescheduling to start after 5 seconds' % self.__retry_count
            alarm_time = datetime.now() + timedelta(seconds=5)
            self.scheduler.add_date_job(self.start, alarm_time)
            self.scheduler.start()

def func():
    print 'this is a func and not a method!!!'

if __name__ == '__main__':
    t = Test()
    t.start()
    while True:
        time.sleep(10)
    t.stop() 
```

堆栈跟踪如下：

```
Traceback (most recent call last):
  File "user1.py", line 55, in <module>
    t.start()
  File "user1.py", line 48, in start
    self.scheduler.start()
  File "/usr/lib/python2.7/site-packages/APScheduler-2.1.0-py2.7.egg/apscheduler/scheduler.py", line 109, in start
    self._real_add_job(job, jobstore, False)
  File "/usr/lib/python2.7/site-packages/APScheduler-2.1.0-py2.7.egg/apscheduler/scheduler.py", line 259, in _real_add_job
    store.add_job(job)
  File "/usr/lib/python2.7/site-packages/APScheduler-2.1.0-py2.7.egg/apscheduler/jobstores/sqlalchemy_store.py", line 58, in add_job
    job_dict = job.__getstate__()
  File "/usr/lib/python2.7/site-packages/APScheduler-2.1.0-py2.7.egg/apscheduler/job.py", line 120, in __getstate__
    state['func_ref'] = obj_to_ref(self.func)
  File "/usr/lib/python2.7/site-packages/APScheduler-2.1.0-py2.7.egg/apscheduler/util.py", line 174, in obj_to_ref
    raise ValueError('Cannot determine the reference to %s' % repr(obj))
ValueError: Cannot determine the reference to <bound method Test.start of <__main__.Test instance at 0xa119a6c>> 
```

我添加的调试`apscheduler/util.py`如下：

```
161 def obj_to_ref(obj):
162     """
163     Returns the path to the given object.
164     """
165     ref = '%s:%s' % (obj.__module__, get_callable_name(obj))
166     print 'obj_to_ref : obj : %s' % obj
167     print 'obj_to_ref : ref : %s' % ref
168     try:
169         obj2 = ref_to_obj(ref)
170         print 'obj_to_ref : obj2 : %s' % obj2
171         if obj != obj2:
172             raise ValueError
173     except Exception:
174         raise ValueError('Cannot determine the reference to %s' % repr(obj))
175 
176     return ref 
```

以下是 的调试打印`Test::start()`：

```
obj_to_ref : obj : <bound method Test.start of <__main__.Test instance at 0xa119a6c>>
obj_to_ref : ref : __main__:Test.start
obj_to_ref : obj2 : <unbound method Test.start> 
```

将 更改`scheduler.add_date_job()`为`function`(fe `func`) 而不是`method`(fe `Test::start()`)

```
self.scheduler.add_date_job(func, alarm_time) 
```

以下是 的调试打印`func()`：

```
obj_to_ref : obj : <function func at 0xb768ed14>
obj_to_ref : ref : __main__:func
obj_to_ref : obj2 : <function func at 0xb768ed14> 
```

我在这里做错了吗？还是这是`apscheduler/util.py`函数 wrt中的错误`SQLAlchemyJobStore`？

任何已知的解决方法？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:26:52.730

主要问题是当您使用`SQLAlchemyJobStore`或任何其他作业存储`RAMJobStore`时，apscheduler 使用 pickle 序列化您的作业以将其保存到存储中。它仅将引用名称保存到您在`scheduler.add_date_job`方法中指定的函数。

因此，在您的情况下，它可以保存类似`<object id in memory>.start`.

因此，对于工作职能，您应该使用[在模块顶层定义的函数，](http://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled)而不是实例方法。

这也意味着 apscheduler 不会在运行之间保存作业功能状态。您可能需要在方法内部实现将状态保存和加载到数据库中。但这会使事情变得过于复杂。

更好的方法是实现自定义调度触发器类，该类将决定何时运行作业。您可能仍需要加载/保存触发器的状态 - 因此它将支持停止和启动调度程序进程。

一些链接：

*   [扩展 APScheduler 文档。](http://packages.python.org/APScheduler/extending.html)

*   [将扩展以包含您的停止/恢复逻辑的间隔触发器类](https://bitbucket.org/agronholm/apscheduler/src/1bc15ac07360227054c3c07b2143d8cd00e758ec/apscheduler/triggers/interval.py?at=default)

# vb.net - 在 WordPress 中嵌入 RDP 网页

> ID：14822547
> 
> 赞同：1
> 
> 时间：2013-02-11T23:01:19.487
> 
> 标签：vb.net, wordpress, rdp

所以我爸爸希望能够从网页进行 RDP。无论如何，他知道这是一个仅限 Windows 的东西，但问题是我无法将它嵌入到 WP 中。独立工作正常，但一旦我将它嵌入模板或 iFrame 中，它就会停止工作。

有任何想法吗？

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa380809(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380809(v=vs.85).aspx)如果我把它放在它自己的网页上就可以工作，但是只要我把它放在 WP 中，它死了。我知道关于 VB 的杰克，所以欢迎任何对 WP 很好但在 Windows/IIS/VB 很差的人的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:09:44.993

我很擅长你提到的所有技术。WP 并不特别，在所有服务器端处理之后，它会发出标准的 Web 内容。

我可以提供一些标准的调试技巧来查看问题所在：

*   是 HTTP/HTTPS 问题吗？
*   是 CrossFrame/XSS 问题吗？
*   您是否看到浏览器控制台中出现任何错误？
*   您是否在其上运行了 fiddler 并查看是否有任何错误？
*   您是否查看了 IIS 日志以查看是否有任何错误？

# node.js - 使用 Mongoose 获取所有数据库的列表

> ID：14822550
> 
> 赞同：5
> 
> 时间：2013-02-11T23:01:41.177
> 
> 标签：node.js, mongodb, mongoose

有一些类似的问题，但都涉及使用[MongoDB NodeJS 驱动程序](http://docs.mongodb.org/ecosystem/drivers/node-js/)而不是[Mongoose ODM](http://mongoosejs.com/)。

我阅读[了文档](http://mongoosejs.com/docs/connections.html)，但找不到这样的功能。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T01:25:51.187

您不能直接从 mongoose 提供的连接中获取列表，但使用 mongo`Admin`对象很容易，因为它包含一个名为的函数`listDatabases`：

```
var mongoose = require('mongoose')
    , Admin = mongoose.mongo.Admin;

/// create a connection to the DB    
var connection = mongoose.createConnection(
    'mongodb://user:pass@localhost:port/database');
connection.on('open', function() {
    // connection established
    new Admin(connection.db).listDatabases(function(err, result) {
        console.log('listDatabases succeeded');
        // database list stored in result.databases
        var allDatabases = result.databases;    
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-23T22:52:46.600

使用 mongoose（版本 6.10.*）获取所有 mongo 数据库列表的一种非常现代的方法是***创建一个 mongoose 连接以连接到 Mongo 的 admin 数据库***并确保您有一个**admin user**。

Mongoose 对象是一个非常复杂的对象。列出数据库：

```
const connection = `mongodb://${encodeURIComponent(username)}:${encodeURIComponent(password)}@${hostname}:${port}/admin` 
```

mongoose 是一个非常复杂的对象，它承诺执行多个功能。列出数据库：

```
mongoose.connect(connection,  {  useNewUrlParser: true ,  useUnifiedTopology: true }).then( (MongooseNode) => { 

/* I use the default nativeConnection object since my connection object uses a single hostname and port. Iterate here if you work with multiple hostnames in the connection object */

const nativeConnetion =  MongooseNode.connections[0]

//now call the list databases function
    new Admin(nativeConnetion.db).listDatabases(function(err, results){
        console.log(results)  //store results and use
    });
}) 
```

结果：

```
{ databases:
   [ { name: 'admin', sizeOnDisk: 184320, empty: false },
     { name: 'config', sizeOnDisk: 73728, empty: false },
     { name: 'local', sizeOnDisk: 73728, empty: false },
     { name: 'test', sizeOnDisk: 405504, empty: false } ],
  totalSize: 737280,
  ok: 1 } 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-02-11T23:24:19.657

尝试运行[此代码](http://runnable.com/URl7hlgo6eZ2AAJc/mongoose?f=code.js)。原始取自[Gist](https://gist.github.com/edwardhotchkiss/2785463)。

# eclipse - 使用 phonegap 将 sencha 架构师项目导入 Eclipse

> ID：14822552
> 
> 赞同：0
> 
> 时间：2013-02-11T23:01:52.530
> 
> 标签：eclipse, cordova, extjs, sencha-touch-2

我有一个完整的小型 sencha 2 项目，想用 phonegap 将它导入到 eclipse 中。我想保留 MVC 文件结构，如何在 eclipse 中设置我的 android 项目来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:59:43.757

在此链接上查看 Phonegap 文档中的入门指南：

[http://docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

遵循 Android 指南后，将 Sencha 内容放入`www`Eclipse 项目的文件夹中。您的`www`文件夹应如下所示：

```
app
 |-controller
 |-model
 |-store
 |-view
index.html
app.js
sencha-touch.js
sencha-touch.css 
```

查看 Sencha 文档以了解如何为您的应用程序使用和创建构建：

[http://docs.sencha.com/touch/2-1/#!/guide/building](http://docs.sencha.com/touch/2-1/#!/guide/building)

祝你好运！

# java - 您将如何在 java 中扫描文件并计算该文件的字母数字字符和元音的数量？

> ID：14822553
> 
> 赞同：0
> 
> 时间：2013-02-11T23:01:56.703
> 
> 标签：java, readfile

我制作了一个读取文件的扫描仪，但后来我对如何计算元音和字母/数字感到困惑。我想在 for 循环中使用 .charAt(i) 但您不能在 Scanner 类中使用 .charAt() 。很好奇如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:07:52.673

这将计算字母数字：

```
int alphaNumericCount = input.split("(?<=[A-Za-z0-9])").length - 1; 
```

这将计算元音：

```
int vowelCount = input.split("(?<=[AEIOUaeiou])").length - 1; 
```

您在文件中的读取方式取决于您。

# java - JVM 中的非法操作码

> ID：14822557
> 
> 赞同：11
> 
> 时间：2013-02-11T23:02:32.910
> 
> 标签：java, jvm, bytecode, opcode

我最近在开发一个对 JVM 字节码执行操作的库时遇到了一些没有文档（我发现）但被 JVM 参考实现识别的操作码。我找到了这些列表，它们是：

```
BREAKPOINT = 202;
LDC_QUICK = 203;
LDC_W_QUICK = 204;
LDC2_W_QUICK = 205;
GETFIELD_QUICK = 206;
PUTFIELD_QUICK = 207;
GETFIELD2_QUICK = 208;
PUTFIELD2_QUICK = 209;
GETSTATIC_QUICK = 210;
PUTSTATIC_QUICK = 211;
GETSTATIC2_QUICK = 212;
PUTSTATIC2_QUICK = 213;
INVOKEVIRTUAL_QUICK = 214;
INVOKENONVIRTUAL_QUICK = 215;
INVOKESUPER_QUICK = 216;
INVOKESTATIC_QUICK = 217;
INVOKEINTERFACE_QUICK = 218;
INVOKEVIRTUALOBJECT_QUICK = 219;
NEW_QUICK = 221;
ANEWARRAY_QUICK = 222;
MULTIANEWARRAY_QUICK = 223;
CHECKCAST_QUICK = 224;
INSTANCEOF_QUICK = 225;
INVOKEVIRTUAL_QUICK_W = 226;
GETFIELD_QUICK_W = 227;
PUTFIELD_QUICK_W = 228;
IMPDEP1 = 254;
IMPDEP2 = 255; 
```

它们似乎是其他实现的替代品，但具有不同的操作码。在谷歌上一页又一页地搜索了很长时间后，我偶然发现了[这个文档](http://enos.itcollege.ee/~jpoial/oop/lugemist/spec/vmspec/Quick2.doc4.html)`LDC*_QUICK`中提到的操作码。

在操作码上引用它`LDC_QUICK`：

> **操作**从常量池中推送项目
> 
> **表格** ldc_quick = 203 (0xcb)
> 
> **堆栈**……，项目
> 
> **描述**索引是一个无符号字节，它必须是当前类常量池的有效索引（第 3.6 节）。索引处的常量池项必须已经解析并且必须是一个字宽。该项目从常量池中取出并推入操作数堆栈。
> 
> **注意**该指令的操作码最初是 ldc。ldc 指令的操作数不会被修改。

好的。看起来很有趣，所以我决定尝试一下。`LDC_QUICK`似乎与 具有相同的格式`LDC`，因此我着手将`LDC`操作码更改为`LDC_QUICK`一个。这导致了失败，尽管 JVM 显然认识到了这一点。尝试运行修改后的文件后，JVM 崩溃并显示以下输出：

```
Exception in thread "main" java.lang.VerifyError: Bad instruction: cc
Exception Details:
  Location:
    Test.main([Ljava/lang/String;)V @9: fast_bgetfield
  Reason:
    Error exists in the bytecode
  Bytecode:
    0000000: bb00 0559 b700 064c 2bcc 07b6 0008 572b
    0000010: b200 09b6 000a 5710 0ab8 000b 08b8 000c
    0000020: 8860 aa00 0000 0032 0000 0001 0000 0003
    0000030: 0000 001a 0000 0022 0000 002a b200 0d12
    0000040: 0eb6 000f b200 0d12 10b6 000f b200 0d12
    0000050: 11b6 000f bb00 1259 2bb6 0013 b700 14b8
    0000060: 0015 a700 104d 2cb6 0016 b200 0d12 17b6
    0000070: 000f b1
  Exception Handler Table:
    bci [84, 98] => handler: 101
  Stackmap Table:
    append_frame(@60,Object[#41])
    same_frame(@68)
    same_frame(@76)
    same_frame(@84)
    same_locals_1_stack_item_frame(@101,Object[#42])
    same_frame(@114)

        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at sun.launcher.LauncherHelper.validateMainClass(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source) 
```

上述错误给出了混合消息。很明显，类文件校验失败：`java.lang.VerifyError: Bad instruction: cc`. 同时，JVM 识别出了操作码：`@9: fast_bgetfield`. 此外，它似乎认为这是一个不同的指令，因为`fast_bgetfield`并不意味着不断推动......

我认为公平地说我很困惑。这些非法操作码是什么？JVM 会运行它们吗？为什么我会收到`VerifyError`s？弃用？他们是否比记录在案的同行更有优势？

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T00:22:45.223

> Java 虚拟机规范的第一版描述了 Sun 早期的 Java 虚拟机实现之一用来加速字节码解释的技术。在这个方案中，当常量池条目被解析时，引用常量池条目的操作码被替换为“_quick”操作码。当虚拟机遇到 _quick 指令时，它知道常量池条目已经解析，因此可以更快地执行指令。
> 
> Java 虚拟机的核心指令集由 200 个单字节操作码组成。这 200 个操作码是您将在类文件中看到的唯一操作码。使用“_quick”技术的虚拟机实现在内部使用另外 25 个单字节操作码，即“_quick”操作码。
> 
> 例如，当使用 _quick 技术的虚拟机解析由 ldc 指令（操作码值 0x12）引用的常量池条目时，它会将字节码流中的 ldc 操作码字节替换为 ldc_quick 指令（操作码值 0xcb）。在 Sun 的早期虚拟机中，这种技术是用直接引用替换符号引用的过程的一部分。
> 
> 对于某些指令，除了用 _quick 操作码覆盖普通操作码外，使用 _quick 技术的虚拟机还会用代表直接引用的数据覆盖指令的操作数。例如，除了用 invokevirtual_quick 替换 invokevirtual 操作码外，虚拟机还将方法表偏移量和参数数量放入每个 invokevirtual 指令后面的两个操作数字节中。将方法表偏移量放在invokevirtual_quick 操作码之后的字节码流中，可以节省虚拟机在已解析的常量池条目中查找偏移量所需的时间。

[Java 虚拟机内部的第 8 章](http://www.artima.com/insidejvm/ed2/linkmodP.html)

基本上你不能只把操作码放在类文件中。只有 JVM 在解析操作数后才能做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T23:10:26.000

我不知道您列出的所有操作码，但其中三个——<em>breakpoint、*impdep1*和*impdep2——*[是 Java 虚拟机规范第 6.2 节中](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.2)记录的保留操作码。它部分说：

> 两个保留的操作码，数字 254 (0xfe) 和 255 (0xff)，分别具有助记符*impdep1*和*impdep2*。这些指令旨在为分别在软件和硬件中实现的特定于实现的功能提供“后门”或陷阱。第三个保留的操作码，编号 202 (0xca)，具有助记符*断点*，旨在供调试器用于实现断点。
> 
> 尽管这些操作码已被保留，但它们只能在 Java 虚拟机实现中使用。它们不能出现在有效的类文件中。. . .

我怀疑（从他们的名字）其余的操作码是 JIT 机制的一部分，也不能出现在有效的类文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T23:39:47.890

这些操作码是保留的，不能出现在有效的类文件中，因此会出现 VerifyError。但是，JVM 在内部使用它们。因此，某些字节码在内存中的表示可能包含这些经过 VM 修改后的操作码。然而，这纯粹是一个实现细节。

# java - 如何将运行在 iOS 或 Android 上的 JavaFX 应用程序连接到本机库？

> ID：14822560
> 
> 赞同：1
> 
> 时间：2013-02-11T23:02:45.170
> 
> 标签：java, android, ios, scala

[Oracle 刚刚宣布他们将开源他们的 iOS 和 Android JavaFX 实现](http://fxexperience.com/2013/02/february-open-source-update/)。当我们等待货物到达时：你会如何处理原生的东西，比如推送通知等？JNI，也许吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T19:20:07.083

[RoboVM](http://www.robovm.org)提供了一个原生桥。

# ios - UITextField 始终是第一响应者

> ID：14822565
> 
> 赞同：2
> 
> 时间：2013-02-11T23:02:53.920
> 
> 标签：ios, uitextfield, uikeyboard, first-responder

我有一个 ViewController，它只是一个文本字段、一个下一步按钮和一个后退按钮。我希望**文本字段始终可编辑，同时键盘始终存在**。我还想**将键盘自定义**为我自己的，但是一旦我弄清楚了这部分就会出现。

编辑：在我的情况下，键盘实际上只是一个带有 10 位数字和一个退格键的键盘

解决此问题的最佳方法是什么？我一直在努力使用与自定义键盘视图一起使用的 UITextField，然后在视图加载时使其成为第一响应者，但也许有更好的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:10:07.633

要使 UITextField 始终使用键盘...

在`viewDidAppear`or`viewWllAppear`函数中执行此操作...

```
[self.textField becomeFirstResponder]; 
```

这将使键盘出现并且 textField 响应输入。

要关闭键盘，您必须运行...

```
[self.textField resignFirstResponder]; 
```

只要您不运行它，它就会保持键盘焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:59:59.420

如果您想真正拥有自己的键盘。创建一个适当大小和美化的视图;).. 并放入 textFiled 的`inputView`属性。

> textField.inputView =*你的自定义键盘视图*

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:12:52.197

在视图控制器的`viewWillAppear:`方法中，您可以调用`becomeFirstResponder`文本字段。这将使键盘在视图控制器出现时自动出现。只要没有其他方法可以关闭键盘，这就是您所需要的。

当然，在 iPad 上，键盘上有一个按钮可以关闭它。如果您想停止该按钮的工作，请实现以下委托方法：

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
    return NO;
} 
```

# android - 使用 Google Maps Android API v2 显示许多点

> ID：14822567
> 
> 赞同：2
> 
> 时间：2013-02-11T23:02:57.577
> 
> 标签：android, google-maps, google-maps-android-api-2

我知道如何在地图上添加点。

```
private void addMarkertoMap() {

        LatLng MarkerPos = new LatLng (24.803751, 1.479969);

        googlemap.addMarker(new MarkerOptions()

        .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_ROSE))
        .position(MarkerPos)
        ); 
```

但是如果我有很多点（数百个）并且我想从 GML 或 KML 文件中显示它们怎么办？在 Google Maps Android API 中是否可行？有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:15:54.630

您可以只添加当前在屏幕上可见的那些标记（但请注意，您需要跟踪您在屏幕上添加的那些标记，这样您就不会一遍又一遍地添加它们。您甚至可能想要删除那些不再可见的）

```
mMap.setOnCameraChangeListener(new OnCameraChangeListener() {
   @Override
   public void onCameraChange(CameraPosition position) {
      final LatLngBounds screenBounds = mMapView.getProjection().getVisibleRegion().latLngBounds;
      for (YourPoint point : mPoints) {
         if (screenBounds.contains(point.getLatLng()) {
            mMapView.addMarker(point.getLatLng());
         }
      } 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:08:44.523

回答你的问题：是的，这是可能的。

```
for (int i = 0; i < 10; i++) { addMarker(/* Something*/); } 
```

现在，也许是时候考虑一​​下了。您真的需要在地图上显示数百个点吗？也许你只能显示 20 个最近的点，或者 30 个更多的相关点......

您能否重新定义您的问题，以便我们回答并理解您的需求。

很难理解你想要什么以及问题在哪里。

# javascript - 将字符串附加到 src

> ID：14822572
> 
> 赞同：0
> 
> 时间：2013-02-11T23:03:03.977
> 
> 标签：javascript, html, iframe

我需要在 iframe src 属性的末尾附加一串文本“&showinfo=0”。

我试过了

```
document.getElementsByTagName('iframe').src += "&showinfo=0"; 
```

但没有运气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:07:32.733

`document.getElementsByTagName('iframe')`将返回一个包含页面上所有 s 的数组`iframe`，即使只有一个。您需要先获取该数组中的一项，然后才能对其进行修改。

```
document.getElementsByTagName('iframe')[0].src += "&showinfo=0";
//                                     ^^^ added 
```

尽管给它一个 id 并以这种方式找到它可能更容易。

```
// <iframe id="mySnazzyFrame" src="...">
document.getElementsById('mySnazzyFrame').src += "&showinfo=0"; 
```

* * *

哦，您需要将其应用于数组中的所有 iframe 吗？这很容易，您只需遍历它们，并在每个上执行该过程。

```
var iframes = document.getElementsByTagName('iframe');
for (var i = 0; i < iframes.length; i++) {
  iframes[i].src += "&showinfo=0";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:05:39.233

这应该可以解决问题：

```
var iframe = document.getElementsByTagName('iframe');
iframe.src = iframe.src + "&showinfo=0"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:07:53.067

您应该在控制台中看到一个错误。 `getElementsByTagName`返回一个数组...尝试：

```
document.getElementsByTagName('iframe')[0].src+= '&showinfo='; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T00:29:39.243

由于您无论如何都在使用 jQuery，因此您可能应该这样做：

```
$(".yourClass").each( function() { 
   var oldValue = $(this).prop("src");
   $(this).prop("src", oldValue + "&showinfo=0");
}); 
```

这会将“&showinfo=0”添加到每个具有“yourClass”类的 iframe。

希望这可以帮助！

P.S. You might want to update your questions with the information you gave in the comments.

# python - 谷歌应用引擎中的缓存控制

> ID：14822576
> 
> 赞同：8
> 
> 时间：2013-02-11T23:03:18.333
> 
> 标签：python, google-app-engine

我正在尝试优化 Google 应用引擎上的页面服务时间，但我很难获得我想要的效果。

在我的 app.yaml 中，我使用了以下指令：

```
handlers:
- url: /assets
  static_dir: assets
  expiration: 7d 
```

在资产文件夹下，我有我所有的图像、css 和 js。通过使用 7 天到期，我预计浏览器会使用本地缓存文件，而不是在 7 天内访问我的应用程序。

虽然，在我的资产的响应标头中，我得到以下信息：

```
Cache-Control:public, max-age=604800
Cache-Control:no-cache, must-revalidate 
```

我了解使用这些标头，浏览器将在发布缓存版本之前检查我的应用程序是否更改了文件。（我可以有效地在资产文件夹下看到与我的文件相对应的一堆 304，用于刷新和简单的页面加载）。

谷歌应用引擎中是否有办法配置缓存行为，以便浏览器不会在 7d（在简单页面加载时）恢复这些文件，如到期中指定的那样？（即从缓存控制标头中删除“无缓存”）

PS 我不想在我的应用程序上启用 PageSpeed。我想完全控制提供的 html。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-21T15:03:29.170

您是否有任何机会使用管理员帐户登录？AppEngine 添加了一些[关于管理员成本的私有标头](https://cloud.google.com/appengine/docs/standard/java/reference/request-response-headers#headers_added_or_replaced)并禁用缓存，因为该数据是私有的。注销为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-04T20:59:55.307

您在浏览器中加载页面的方式可能与此处相关：

*   如果您按下 Ctrl 并使用刷新按钮重新加载页面，这将导致您的资源无条件重新加载，并返回 200s。
*   如果您只是使用刷新按钮（或 F5 等等效键）重新加载，则将发送条件请求并为静态资源返回 304。
*   如果您在地址框中按 Enter 键，将页面添加到书签并从那里加载，或者从超链接访问页面，则缓存 max-age 应该按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T08:38:34.827

我没有使用过期指令，GAE 将以下内容作为默认缓存设置发送：

缓存控制：公共，最大年龄=600

您可以尝试删除过期：7d 并查看 GAE 是否仅发送 1 个 Cache-Control 标头？

# sql - 删除 SELECT 语句中的最后一个逗号

> ID：14822577
> 
> 赞同：2
> 
> 时间：2013-02-11T23:03:19.443
> 
> 标签：sql, sql-server

我有一个如下所示的选择查询：

```
SELECT 
ROW_NUMBER() OVER (ORDER BY T.TitleId) as Row, 
T.TitleId as TitleID, 
T.TitleSort as TitleName, 
TT.Description as TitleType, 
TS.Description as TitleOrigin,
--get genres
(select Genre.Description + ', ' from Genre where GenreId IN
(Select GenreId from TitleGenre WHERE TitleId = T.TitleId)
group by Genre.Description for xml path('')) AS Genres, .... 
```

此代码有效，但我找不到摆脱最后一个逗号的方法。这是返回行的外观：

```
Action, Drama, Romance, 
```

我需要在不使用函数或声明变量的情况下去掉最后一个逗号，就在查询中。那可能吗？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T23:09:06.640

像这样的东西应该很接近——基本上将逗号移到开头，然后用 STUFF 将其删除：

```
STUFF(
        (
        select ', ' + Genre.Description from Genre where GenreId IN
(Select GenreId from TitleGenre WHERE TitleId = T.TitleId)
group by Genre.Description for xml path('')
        ), 1, 2, '') 
```

祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T23:09:15.730

您始终可以使用以下使用`Left()`and `Len()`：

```
select *,
  left(Genres, len(Genres)-1) as Genres
from 
(
  SELECT 
  ROW_NUMBER() OVER (ORDER BY T.TitleId) as Row, 
  T.TitleId as TitleID, 
  T.TitleSort as TitleName, 
  TT.Description as TitleType, 
  TS.Description as TitleOrigin,
  --get genres
  (select Genre.Description + ', ' from Genre where GenreId IN
  (Select GenreId from TitleGenre WHERE TitleId = T.TitleId)
  group by Genre.Description for xml path('')) AS Genres, ....
) src 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T23:21:11.677

我已经使用窗口函数完成了类似下面的操作来选择性地插入逗号。

```
SELECT
c.Name +
CASE WHEN 
ROW_NUMBER() OVER (PARTITION BY t.Name ORDER BY c.Name DESC)  
<>
COUNT(t.name) OVER (PARTITION BY t.Name)   then ',' else '' END

FROM sys.tables t
INNER JOIN sys.columns c
on t.Object_id = c.Object_id

FOR XML PATH('') 
```

基本上添加一个逗号，除非它是结果集的最后一条记录。

# python - Matplotlib 的 acorr 仅绘制一侧

> ID：14822581
> 
> 赞同：1
> 
> 时间：2013-02-11T23:03:35.680
> 
> 标签：python, matplotlib, time-series

我正在使用 Python 的 matplotlib[`acorr`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.acorr)来绘制时间序列的自相关，但该图始终包含负滞后。

由于自相关函数总是无论如何，我想抑制图形的负 x 轴。

有我可以传递给的参数`acorr`吗？

# html - P 换 A 或 A 换 P

> ID：14822582
> 
> 赞同：0
> 
> 时间：2013-02-11T23:03:39.953
> 
> 标签：html

在 html 中创建链接的最佳方法是什么我主要使用 html4 但我试图实现 html5

所以我的问题基本上是包装标签，p还是a？

这：

```
 <p class="center">
            <a href="#">
                <img src="addToCart.png">
            </a>
        </p> 
```

或这个：

```
 <a href="#">
            <p class="center">
                <img src="addToCart.png">
            </p>
        </a> 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T23:08:39.933

在 HTML 4.1下，默认情况下，`a`元素`display: inline`不能包含块级元素，例如`p`; 因此`p`应该换行`a`。

但是，如果您使用的是 HTML 5，并且拥有`<!doctype html>`，那么任何一种方式都是可以接受的（并且是有效的），因此请使用您认为最符合您要求的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:08:47.890

锚点只能包含内联元素（span、strong、em 等）。段落标签是块状的 - 因此无效。设置 display:inline 它肯定会工作，但它不再有效。

你的第一个例子是正确的。

如前所述 = 这仅在 html4 中是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:09:26.817

规格[`<a>`](http://www.w3.org/TR/html5-author/the-a-element.html#the-a-element)

规格[`<p>`](http://www.w3.org/TR/html5-author/the-p-element.html#the-p-element)

综上所述，以上两种方法都可以使用并且有效。 `<a>`具有透明的内容模型（不包括其他交互式内容），因此它几乎可以包装任何东西。 `<p>`以“词组内容”为模型，`<a>`属于词组内容范畴。 `<img>`也在“措辞内容”中。

因此，您的两个示例都是完全有效的。这完全取决于你想具体做什么。

# node.js - Express：访问路由中的 app.set() 设置

> ID：14822584
> 
> 赞同：31
> 
> 时间：2013-02-11T23:03:41.697
> 
> 标签：node.js, express

`app.js`在 Express 中，我相信可以通过在我的主文件中执行类似于以下操作来创建全局应用程序设置：

```
var express = require('express'),
    ...
    login = require('./routes/login');

var app = express();

app.configure(function(){
  ...
  app.set('ssoHostname', 'login.hostname.com');
  ...
});
...
app.get('/login', login.login);
... 
```

现在`./routes/login.js`，我想访问`app.settings.ssoHostname`，但是如果我尝试运行类似的东西（根据：[如何访问在 express js 中使用 app.set() 设置的变量](https://stackoverflow.com/q/13361072)）：

```
...
exports.login = function(req, res) {
  var currentURL = 'http://' + req.header('host') + req.url;
  if (!req.cookies.authCookie || !User.isValidKey(req.cookies.authCookie)) {
    res.redirect(app.settings.ssoHostname + '/Login?returnURL=' + encodeURIComponent(currentURL));
  }
};
... 
```

它不识别`app`：

```
ReferenceError: app is not defined 
```

我的问题是：

1.  我采用的`app.set()`用于全局设置的方法是否会经常被重复使用是“正确”的方法，如果是的话......
2.  如何在路由中访问这些设置？
3.  如果不`app.set()`经常使用全局设置，我将如何在路由中设置和获取自定义设置？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-08-09T11:30:01.343

利用`req.app.get('ssoHostname')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T23:06:20.113

在`app.js`文件末尾：

```
module.exports = app; 
```

然后在`routes/login.js`：

```
var app = require('../app'); 
```

现在您可以访问实际`app`对象并且不会获得`ReferenceError`.

# javascript - 在 IE 9 和 10 中更改了 target="_blank" 行为的表单

> ID：14822589
> 
> 赞同：9
> 
> 时间：2013-02-11T23:04:05.843
> 
> 标签：javascript, forms, tabs, internet-explorer-9, internet-explorer-10

我有一个应用程序，它使用以下代码在新选项卡中打开动态生成的报告。（为了演示，我已经模拟了参数。）

```
function gblPDFWdw(pdf) {
    var formDiv = document.createElement("div");
    formDiv.innerHTML = "<form method=post action='" + pdf + "' target='_blank'><input type=hidden id=test name=test value='test'></form>";
    var form = formDiv.firstChild;
    document.body.appendChild(form);
    form.submit();
    form.parentNode.removeChild(form);
} 
```

`pdf`参数我们只是生成 PDF 的脚本的 URL 。操作的原因`form`是将参数`POST`编辑到脚本而不是作为`GET`参数。

在 IE 8 及更低版本、Chrome、Firefox 等中，这将执行以下两种操作之一：

1.  如果浏览器可以读取 PDF（通过内置功能或插件），它将打开一个带有报告的新选项卡，这是所需的行为。
2.  如果浏览器无法读取 PDF，它将打开新标签页，立即将其关闭，然后下载文件。

似乎#2 在 IE 9 及更高版本中发生了变化。它将打开一个新选项卡，但它只会产生一个空白屏幕，直到用户**返回原始选项卡**，单击“打开”或“保存”，然后按预期下载 PDF。这是一个非常混乱的界面。

我想解决这个问题的一种方法是生成一个临时 PDF 文件，然后简单地 window.open() 到它。还有其他方法可以调整此功能的行为吗？或者有没有我没有遇到过的推荐做法？

（注意：这根本不是特定于 PDF 的；浏览器可能下载而不是本地显示的任何文件似乎都有问题。）

**编辑**：看起来我比我意识到的更落后。看来这也发生在 IE9 中，我从来没有注意到，因为我从来没有在没有安装 PDF 插件或其他文件类型的情况下尝试过它。

**有趣的是，如果我从表单中删除**该`input`字段，上面的代码就像我期望的那样工作。我不确定为什么浏览器会以不同的方式对待它。当然，就我而言，我需要将`POST`数据输入到我的脚本中。

**编辑2**：愚蠢的错误。`input`是自闭的。固定的。

**编辑 3**：这里有一些截图可以更好地解释这个问题。我正在使用[这个 JSBin](http://jsbin.com/oxidan/3)进行测试。我有一个 onclick 事件来触发上面的 Javascript 函数。

该过程从第一个选项卡开始。

![单击之前的第一个选项卡。](../Images/26c05e2134fc001526134342213b9489.png)

然后，单击文本后，将打开一个新选项卡。但它是空白的！

![第二个标签，通过点击打开。](../Images/3833c22edcd4321a0132eab4854a08f3.png)

事实证明，**原始**（现在隐藏）选项卡有一条消息，询问是打开还是保存文件。

![警报在第一个选项卡上！](../Images/ec16f231bd0b1d5f43f9682480ce25b1.png)

单击“打开”或“保存”即可正常打开文件。但是这个过程非常混乱，并且与其他浏览器不一致。

**编辑3**：前进一步，后退一步。如果我`window.open()`用来创建一个新窗口，然后以编程`form.target`方式将浏览器。更糟糕的是，使用这种技术，新标签不再立即关闭。也许还有另一种技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:56:44.973

一种临时解决方案是检测 IE 和 PDF 插件的可用性，然后在 (>IE9 && !plugin) 情况下将“目标”属性设置为“_self”。我发现[PluginDetect](http://www.pinlady.net/PluginDetect/)声称 Adob​​eReader 插件检测。

总而言之，这是一种相当丑陋且不可靠的方法，但在某些情况下应该会产生结果。

# android - 使用 gmap3 的 Google 地图无法在 Android 平板电脑上的 Chrome 浏览器 18 上正确呈现

> ID：14822592
> 
> 赞同：3
> 
> 时间：2013-02-11T23:04:12.013
> 
> 标签：android, google-maps, google-chrome

是否有人对 Chrome 浏览器 18 如何在 Android 平板电脑（运行 Android 4.1.1 的三星 Tab 2 10.1）上渲染使用 gmap3 jquery 插件渲染的谷歌地图有疑问。

我的地图将在 Android 原生网络浏览器上正常呈现，但在 Chrome 中则不行。这真的很奇怪。它只会加载大约四分之一的地图，其余部分将是白色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:28:45.633

好的 - 这真的很愚蠢，但是 gmaps 渲染地图的父 div 溢出：隐藏在它上面。我删除了这个 CSS 规则，它工作正常。我不敢相信。我不知道为什么这行得通，为什么 Android 平板电脑上的 Chrome 18 不能正常工作，但仅供参考。

# scala - 使用带有 Scala 的结构类型创建更具体的隐式

> ID：14822596
> 
> 赞同：5
> 
> 时间：2013-02-11T23:04:22.830
> 
> 标签：scala, types, typeclass, implicit-conversion, structural-typing

据我所知，集合库中没有定义该`map`方法的共享特征（很可能是因为 有不同的签名`map`）。

我有一个具有更改事件的可观察值（想想 ui 系统中的属性）。可以使用`map`方法映射可观察值。

然而，当我们使用已经有`map`方法的类型时，我们应该能够使用`map`.

所以而不是：

```
prop map { x => 
  x map { actualX =>
   //do something
  }
} 
```

我想像这样使用它：

```
prop map { actualX =>
  //do something
} 
```

我有一个简化的测试用例。首先是我使用的不同部分：

```
// leaving out the observable part
trait ObservableValue[T] {
  def value: T
}

trait LowerPriorityImplicits {
  // default implementation that adds a regular map method
  implicit class RichObservableValue1[A](o: ObservableValue[A]) {
    def map[B](f: A => B): ObservableValue[B] = new ObservableValue[B] {
      def value = f(o.value)
    }
  }
}

object ObservableValue extends LowerPriorityImplicits {

  // describe a type that has a map method
  type HasMapMethod[A, Container[X]] = {
    def map[B](f: A => B): Container[B]
  }

  // complex implementation that uses the builtin map if present
  implicit class RichObservableValue2[A, Container[Z] <: HasMapMethod[Z, Container]](
      o: ObservableValue[Container[A]]) {

    def map[B](f: A => B): ObservableValue[Container[B]] = 
      new ObservableValue[Container[B]] {
        def value = o.value.map(f)
      }
  }
} 
```

如果上面的代码有什么（或者很多）错误，请告诉我。我想像这样使用它：

```
class TestCase extends ObservableValue[Option[Int]] {
  def value = None
}

val x = new TestCase

x map { value =>
  // this fails because the compiler finds the lower priority implicit
  (value: Int).toString
}

// the method itself works fine
ObservableValue.RichObservableValue2(x) map { value =>
  (value: Int).toString
} 
```

如果我`Container[B]`改成`Any`它会发现`RichObservableValue2`隐式转换。

我关于如何使用类型来选择隐式的知识是有限的。

我试图在以下位置找到答案，但主题有点压倒性：

*   [Scala 在哪里寻找隐式？](https://stackoverflow.com/questions/5598085/where-does-scala-look-for-implicits)
*   [如何在 Scala 中链接隐式？](https://stackoverflow.com/questions/5332801/how-can-i-chain-implicits-in-scala)
*   [Scala：隐式参数解析优先级](https://stackoverflow.com/questions/8623055/scala-implicit-parameter-resolution-precedence)
*   [http://eed3si9n.com/revisiting-implicits-without-import-tax](http://eed3si9n.com/revisiting-implicits-without-import-tax)
*   ScalaReference.pdf 中的第 6.26.3 节“重载分辨率”

有没有办法解决这个挑战？

## 编辑

我知道`FilterMonadic`收藏品的特点。我正在寻找一种能够识别类`map`中定义的方法的解决方案`Option`。

## 编辑 2

似乎该`FilterMonadic`变体也不起作用。我添加`RichObservableValue3`到`RichObservableValue`对象。

```
implicit class RichObservableValue3[A, C[Z] <: FilterMonadic[Z, C[Z]]](o: ObservableValue[C[A]]) {

  def map[B, That](f: A => B)(implicit bf: CanBuildFrom[C[A], B, That]): ObservableValue[That] = new ObservableValue[That] {
    def value = o.value.map(f)

    val change = o.change map (_ map f)
  }
} 
```

`List[Int]`再一次，虽然 a是一个有效的参数，但没有选择隐式转换。我一定错过了选择隐式时使用的一些规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:39:22.073

我终于找到了我缺少的部分。为了使隐式匹配，我必须添加以下类型参数：

```
T[Dummy <: Container[_]] <: ObservableValue[Dummy] 
```

结果对象：

```
object ObservableValue {

  implicit class Mappable[A](o: ObservableValue[A]) {

    def map[B](f: A => B): ObservableValue[B] = new ObservableValue[B] {
      def value = f(o.value)
    }
  }

  // FMC = FilterMonadicContainer
  // D = Dummy
  implicit class FilterMonadicMappable[A, FMC[D] <: FilterMonadic[D, FMC[D]]](o: ObservableValue[FMC[A]]) {

    def map[B, That](f: A => B)(implicit bf: CanBuildFrom[FMC[A], B, That]): ObservableValue[That] = new ObservableValue[That] {
      def value = o.value.map(f)
    }
  }

  type HasMap[A, That[_]] = {
    def map[B](f: A => B): That[B]
  }

  // OVC = ObservableValueContainer
  // MC = MappableContainer
  // D = Dummy
  implicit class SimpleMappable[A, MC[D] <: HasMap[D, MC], OVC[D <: MC[_]] <: ObservableValue[D]](o: OVC[MC[A]]) {

    def map[B](f: A => B): ObservableValue[MC[B]] = new ObservableValue[MC[B]] {
      def value = o.value.map(f)
    }
  }

} 
```

# jpa - 乐观锁定是否可以防止 JPA 中的阻塞？

> ID：14822600
> 
> 赞同：0
> 
> 时间：2013-02-11T23:04:51.740
> 
> 标签：jpa, optimistic-locking

我对 JPA 中乐观锁定的好处有点困惑。

我在版本化实体表上使用两个线程和一行进行了测试。
这是我发现的：

```
T1: begin tran
T1: fetch single entity
T1: Update field in entity
T1: sleep
T2: begin tran
T2: fetch single entity
T2: Update field in entity
T2: commit trans
T1: wake up
T1: commit trans - throws OptimisticLockException (expected) 
```

第二次测试。注意添加了一个 select 语句。

```
T1: begin tran
T1: fetch single entity
T1: Update field in entity
T1: run select query on table (this causes a DB transaction to begin)
T1: sleep
T2: begin tran
T2: fetch single entity (this blocks until DB transaction of thread T1 completes!)
T2: Update field in entity
T2: commit trans
T1: wake up
T1: commit trans - ok, no exception. The fetch/update/commit of T2 happened after T1 commit. 
```

在使用乐观锁定时，我并没有真正期望会发生任何阻塞，但是我的理解是，必须在此处建立一个数据库事务，以便从 select 语句中返回正确的数据。
由于 JPA 似乎只在绝对必要时才进入数据库事务，任何人都可以解释乐观锁定的好处是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:53:38.007

在您的第一个示例中，您是正确的，JPA 一直坚持更新，直到它绝对需要更新为止`flush`。在第二个示例中，它必须刷新它们，以便选择处理最新数据。

乐观锁定的一个优点是数据库不必锁定任何表。这使您的数据库可以更好地扩展，因为更多的客户端可以针对它发出语句。缺点是它将大部分并发控制转移到应用程序层。

这意味着您将需要实现错误处理或重试逻辑。如果您期望没有有争议的更新，这可能会很好。如果您希望许多客户端同时更新相同的 JPA 实体，则可能需要相当多的应用程序逻辑来处理错误并智能地重试更新，而无需诉诸“最后写入获胜”的情况。

您可能会发现这篇博文很有趣[https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and](https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and)

# cocoa-touch - 使用 AFNetworking 从多个 URL 获取 JSON

> ID：14822603
> 
> 赞同：1
> 
> 时间：2013-02-11T23:05:01.720
> 
> 标签：cocoa-touch, afnetworking

我需要使用 AFNetworking 在 UITableView 上加载 50 多个 youtube 视频。

我是否必须在 viewdidload 中多次使用 AFJSONRequestOperation 来下载数据？

这是我尝试过的：

```
NSString *urlAsString = @"http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50";

NSString *urlAsString2 = @"http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50&start-index=51";
NSURL *url = [NSURL URLWithString:urlAsString];
NSURL *url2 = [NSURL URLWithString:urlAsString2];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
NSURLRequest *request2 = [NSURLRequest requestWithURL:url2]; 
```

//现在我不知道该怎么做。

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    self.videoMetaData = [JSON valueForKeyPath:@"data.items.video"];
    self.allThumbnails = [JSON valueForKeyPath:@"data.items.video.thumbnail"];
    [self.tableView reloadData]; 
    // NSLog(@" video Meta Data %@", self.videoMetaData);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
}];
[operation start]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:25:07.567

为什么不直接创建一个方法并将 URL 传递给它呢？

```
-(void)loadVideoFromURL:(NSURL *)url {

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    // setup AFNetworking stuff
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // call delegate or processing method on success
    [self someDelegateMethod:(NSDictionary *)JSON];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];

} 
```

# c++ - 如何在 VtkChart 中的两点之间画线？

> ID：14822604
> 
> 赞同：1
> 
> 时间：2013-02-11T23:05:28.050
> 
> 标签：c++, vtk

用 vtk 绘制散点图后，我想在散点图中绘制单独的线。请问你能帮帮我吗 ？

我试过这个：

```
 vtkLineSource *line = vtkLineSource::New();
        line->SetPoint1(0, 0, 0);
        line->SetPoint2(1, 1,1);

        vtkPolyDataMapper *map = vtkPolyDataMapper::New();
        map->SetInput(line->GetOutput()); 
```

但我不工作，因为我使用 VtkChart 来绘制我的散点图，如本例[http://www.itk.org/Wiki/VTK/Examples/Cxx/Plotting/ScatterPlot](http://www.itk.org/Wiki/VTK/Examples/Cxx/Plotting/ScatterPlot)

# android - 添加附件 pdf android 电子邮件

> ID：14822608
> 
> 赞同：0
> 
> 时间：2013-02-11T23:05:40.367
> 
> 标签：android, email, pdf

问题是发送文件时，因为没有将扩展名添加到文件（Pdf）

这是我发送电子邮件的代码：

```
@Override
            public void onClick(View v) {               
                try {

                 final Intent emailIntent = new Intent(
                     android.content.Intent.ACTION_SEND);                
                     emailIntent.setType("application/pdf");
                     emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);

                     Uri prueba = Uri.parse("android.resource://" + getPackageName() +"/"+R.raw.tecnolite); 
                     emailIntent.putExtra(Intent.EXTRA_STREAM, prueba);

                     startActivity(Intent.createChooser(emailIntent, "Enviando correo..."));

                 } catch (Throwable t) {
                     Toast toast = Toast.makeText(getApplicationContext(), "Error al enviar el correo", Toast.LENGTH_SHORT);
                     toast.show(); 
                 }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:41:01.517

属于一个包的 android 资源是该包的私有资源，不能被另一个进程访问。在这种情况下，电子邮件应用程序无法访问您应用程序的资源。您要么需要将资源复制到外部内存中，要么实现`ContentProvider`电子邮件应用程序以加载您的流。这`ContentProvider`还将为您的附件识别正确的 mime 类型。

# algorithm - 为词性标注创建特征函数

> ID：14822609
> 
> 赞同：2
> 
> 时间：2013-02-11T23:05:42.970
> 
> 标签：algorithm, machine-learning, nlp, perceptron, pos-tagger

我正在尝试使用感知器来执行监督分类，从而执行句子的 POS 标记。我现在假设每个单词的标签是相互独立的。（即我只是将这个词用作一个特征）。我对机器学习算法相当陌生，所以我无法弄清楚如何表示每个单词的特征函数。

我有一个包含 100 个句子的训练集，其中每个单词都有一个特定的标签（比如 N、V、J（形容词）等等）。例如，

> 杰克（N）和（&）吉尔（N）去（V）去（PRP）秘鲁（N）

标签在大括号中的位置。假设我总共有 10 个可能的标签。现在我的问题是杰克这个词的特征向量是什么样的？

我对将它实现为向量非常感兴趣，因为我的代码将更好地匹配符号。一旦我弄清楚特征函数的样子，我将能够实现感知器算法！

另外，假设我想添加诸如（a）首字母大写之类的功能？(b) 单词是否带有连字符等，如何将其合并到我的特征向量中？

直觉上我可以看到向量只需要二进制值，但我无法继续。

如果可能的话，请尝试用具体的例子来解释！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T11:13:20.757

使用将单词映射到数字 ID 的字典。如果您的词汇表中有 10,000 个项目，那么您的字典会将每个单词映射到 0-9999 范围内的一个数字，并且每个单词都表示为长度为 10,000 的二进制向量，其中只有一个元素处于活动状态：对应于单词在字典。

如果你想要除了单词 id 之外的额外特征，你可以将它们附加到特征向量的末尾：也就是说，你可以将特征 10,000+ 作为大写特征，前一个标签特征（需要如上所述的二进制编码）等.

[最后一点，词性标注是结构化预测](http://en.wikipedia.org/wiki/Structured_prediction)问题的一个实例，而不是一系列独立的分类。如果这不仅仅是一项学术练习，您将希望转向[结构化感知器](http://www.cs.columbia.edu/~mcollins/courses/6998-2012/lectures/lec5.1.pdf)，或其他结构化学习方法，如 CRF 或 struct-SVM。

编辑：一个简单的例子

想象一下，我有一个五个单词的词汇表 {the,cat,sat,on,mat} 和一个简化的标签集 {DET,N,V,PREP}。我的句子是这样的：

(the,DET) (cat,N) (sat,V) (on,PREP) (the,DET) (mat,N).

现在我想要每个单词的特征向量，我希望能够从中预测标签。我将使用特征 0-4 作为我的单词 id 指示函数，因此特征 0 对应于“the”，特征 1 对应于“猫”，依此类推。这给了我以下特征向量（在 -> 之后带有预期的“类”或标签分配）：

```
[1 0 0 0 0] -> DET
[0 1 0 0 0] -> N
[0 0 0 0 0] -> V
... 
```

我可以将这些视为实例并将我选择的学习算法应用于此任务，*但是*，仅单词 ID 函数不会给我带来太多收益。我决定要在我的分类中加入一些类似 HMM 的直觉，所以我还添加了一些特征函数来指示*之前*的标签是什么。所以我使用特征 5-8 作为指标，其中 5 对应于 DET，6 对应于 N，以此类推。现在我有以下内容：

```
[1 0 0 0 0 0 0 0 0] -> DET (because this is the first word there's no previous tag)
[0 1 0 0 0 1 0 0 0] -> N
[0 0 0 0 0 0 1 0 0] -> V 
```

现在我可以继续为我的内容添加特征，例如使用特征 9 来指示单词是否大写，特征 10 可能是单词是否匹配已知专有名词列表等。如果你读了一点关于结构化预测任务和方法，您应该明白为什么使用为此任务定制的模型（最简单的是 HMM，但我想升级到 CRF/结构化感知器/StructSVM 以获得最先进的性能）优于处理这个作为一堆独立的决定。

# c - 有什么方法可以使用给定的 inode 编号搜索文件或文件名？

> ID：14822611
> 
> 赞同：3
> 
> 时间：2013-02-11T23:05:53.200
> 
> 标签：c, file, unix, inode

我正在从用户那里获取一个 inode 编号，我必须在文件系统中搜索该文件。如何搜索 inode 编号。我必须使用 C 和 unix 来做到这一点。

到目前为止，这是我的代码：

```
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>

int main(){

    int inodeNumber;
    printf("Please enter the inode you wish to view:\n");
    scanf("%d",&inodeNumber);

    struct stat fileStat;
    int temp_file;
    temp_file = system("find/fs/root -inum inodeNumber");
    fstat(temp_file, &fileStat);
    //printf("Information for %s\n",argv[1]);
    printf("---------------------------\n");
    printf("File Size: \t\t%d bytes\n",(int)fileStat.st_size);
    printf("Number of Links: \t%d\n",(int)fileStat.st_nlink);
    printf("File inode: \t\t%d\n",(int)fileStat.st_ino);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:09:52.773

递归遍历文件系统的目录，对每个文件执行`stat`（或可能），将成员与您正在搜索的 inode 号进行比较。`lstat``st_ino``struct stat`

如果您不必在 C 中执行此操作，我建议您`find /fs/root -inum N`改为。

# google-chrome-extension - 如何创建一个 chrome 扩展程序，从代码被加密的 SAAS 应用程序中抓取数据？

> ID：14822613
> 
> 赞同：0
> 
> 时间：2013-02-11T23:05:55.057
> 
> 标签：google-chrome-extension, web-scraping, screen-scraping

我想创建一个脚本，它将从 SAAS CRM 应用程序中的联系人记录中提取数据，并在我在同一个 SAAS CRM 应用程序的另一个屏幕中时使其可用。

问题如下：

当我将鼠标放在该字段上时，我可以看到该字段的基础参数，但是当我在源代码中查找该参数时，我找不到相同的数据。联系人数据似乎隐藏在源代码中。

我不是要抓取大量记录，我只是想更好地访问联系人可用的数据，而不必同时打开 3 或 4 个窗口，并尝试减少用户点击。

有没有我可以去阅读的地方，试图弄清楚如何模拟用户，并在 Google Chrome 扩展程序中解析数据？

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:13:30.280

数据很可能是通过 javascript 或 AJAX 填充的，因此在源代码中不可见，因为当您“查看源代码”时，您会在任何 JS 或动态元素接管之前看到它是裸露的。您应该使用像 firebug 这样的 DOM 浏览器，甚至是现代浏览器的内置控制台调试器，而不仅仅是“查看源代码”。

例如，如果您使用的是 chrome，右键单击页面上的元素并选择“检查元素”，您应该能够以实时形式看到 HTML。

如果您打算抓取这些数据，则必须允许执行 javascript 并发生任何 DOM 或 CSS 更改，然后抓取您的数据。

如果数据是通过 JS / AJAX 填充的，您可能能够找到数据馈送的来源，如果是 AJAX 调用，则数据来自另一个 URL，您可能只能从该 URL 获取数据.

# javascript - css头相关问题

> ID：14822614
> 
> 赞同：0
> 
> 时间：2013-02-11T23:06:03.437
> 
> 标签：javascript, html, css

在平板电脑或手机上查看时，黑色导航栏背景的这个问题大约是页面宽度的一半。否则在桌面上工作正常。

```
<header>
<div class="wrapper">

    <!-- LOGO -->
    <a href="http://www.logicweb.com" title="LogicWeb" class="logo"><img src="/assets/img/logo.png" alt="LogicWeb" style="border:0" /></a>

    <!-- PARTNERS -->
    <a href="https://www.logicweb.com/affiliate" class="btn partners">AFFILIATES</a>

    <!-- CLIENT LOGIN -->
    <a href="https://www.logicweb.com/billing/clientarea.php" class="btn client-login">CLIENT LOGIN</a>

    <!-- LIVE CHAT -->
    <a href="javascript:void(0);" onclick="olark('api.box.expand')" class="btn live-chat">SALES CHAT</a>

    <!-- PHONE NUMBER -->
    <a href="tel:18775644293" class="btn phone-header">1.877.LOGICWEB</a>

</div>  
<div class="clear-both"></div>
    <nav>
        <div class="wrapper">
            <!-- TOP NAV -->
            <ul>
            <li<?php
                    if($homePage == 1) { 
                        echo ' class="is-on"';
                    }
                ?>><a href="/"><span>HOME</span></a></li>
            <li<?php
                    if(stristr($_SERVER["PHP_SELF"], "web-hosting")) { 
                        echo ' class="is-on"';
                    }
                ?>><a href="/web-hosting/"><span>WEB HOSTING</span></a></li>
            <li<?php
                    if(stristr($_SERVER["PHP_SELF"], "resellers")) { 
                        echo ' class="is-on"';
                    }
                ?>><a href="/resellers/"><span>RESELLERS</span></a></li>
            <li<?php
                    if(stristr($_SERVER["PHP_SELF"], "virtual-private-servers")) { 
                        echo ' class="is-on"';
                    }
                ?>><a href="/virtual-private-servers/"><span>VPS</span></a></li>
            <li<?php
                    if(stristr($_SERVER["PHP_SELF"], "dedicated-servers")) { 
                        echo ' class="is-on"';
                    }
                ?>><a href="/dedicated-servers/"><span>DEDICATED SERVERS</span></a></li>
            <li<?php
                    if(stristr($_SERVER["PHP_SELF"], "cloud-hosting")) { 
                        echo ' class="is-on"';
                    }
                ?>><a href="/cloud-hosting/"><span>CLOUD HOSTING</span></a></li>
            <li<?php
                    if(stristr($_SERVER["PHP_SELF"], "other-services")) { 
                        echo ' class="is-on"';
                    }
                ?>>
                <a href="/other-services/email-marketing.php"><span>OTHER SERVICES</span></a>
                <div>
                    <?php include($_SERVER["DOCUMENT_ROOT"].'/other-services/inc/other-sub-nav.php');?>                  
                </div>
            <li<?php
                    if(stristr($_SERVER["PHP_SELF"], "")) { 
                        echo ' class="is-on"';
                    }
                ?>><a href="/other-services/which-web-host.php"><span style="margin-left: 405px">You want IT. We got IT.</a><span style="font-size:8px; margin-top:13px; color:#B9B9B9; margin-left:-8px; float:right">SM</span></span></li>
            </ul>
        </div>
        <div class="clear-both"></div>
    </nav>
</header> 
```

截屏

[http://s17.postimage.org/9dpl4pd0f/photo.png](http://s17.postimage.org/9dpl4pd0f/photo.png)

实时站点：www.logicweb.com（在台式机、平板电脑和移动设备上工作是问题出现的地方）

CSS 代码： http: [//logicweb.com/assets/css/styles.css](http://logicweb.com/assets/css/styles.css)

编辑：

CSS 代码

```
body { background:#F0F0F0; font-family:Helvetica Neue, Helvetica, Arial, sans-serif; color:#535353; }
.wrapper { max-width:1300px; min-width:960px; margin:0 auto; padding:0 40px; }
.clear-both { clear:both; }

header { background:#fff; padding:15px 0 0 0; }
.logo img { float:left; width:230px; height:63px; }
header nav { background:#464646; margin-top:15px; font-size:12px; font-weight:bold; }
.phone { float:right; font-size:22px; font-weight:200; color:#464646; text-shadow:1px 1px 0 rgba(255, 255, 255, 1); padding:0; margin: 3px 10px 0 0 }
.phone a { text-decoration:none; color:#464646; }
.phone a:hover,
.phone a:active { color:#F27500; }

/* TOP NAV */
header nav ul { }
header nav ul li { float:left; list-style-type:none; position:relative; z-index:99999; }
header nav ul li > a { float:left; color:#B9B9B9; text-decoration:none; padding:15px 0; }
header nav ul li > a span { float:left; padding:5px 10px; 
    -webkit-transition:all 0.15s ease-in-out;
    -moz-transition:all 0.15s ease-in-out;
    -o-transition:all 0.15s ease-in-out;
    transition:all 0.15s ease-in-out;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:26:03.010

在你的`<nav>`里面有一个`<div class="wrapper">`

```
.wrapper {
    margin: 0 auto;
    max-width: 1300px;
    min-width: 960px; /* **bad start for a responsive design** */
    padding: 0 40px;
} 
```

# c# - MVC 4 列表模型绑定如何工作？

> ID：14822615
> 
> 赞同：64
> 
> 时间：2013-02-11T23:06:04.123
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, model-binding

如果我希望表单中的一组输入绑定到`List`MVC 4 中的 a，我知道以下`input` `name`属性命名约定将起作用：

```
<input name="[0].Id" type="text" />
<input name="[1].Id" type="text" />
<input name="[2].Id" type="text" /> 
```

但我很好奇模型活页夹的宽容度。例如，以下情况如何：

```
<input name="[0].Id" type="text" />
<input name="[3].Id" type="text" />
<input name="[8].Id" type="text" /> 
```

模型绑定器将如何处理这个问题？它会绑定到一个`List`长度为 9 的空值吗？或者它仍然会绑定到`List`长度为 3 的 a 吗？还是会完全窒息？

**为什么我在乎**

我想实现一个动态表单，用户可以在其中向表单添加行，也可以从表单中删除行。因此，如果我的用户从总共 8 行中删除了第 2 行，我想知道是否需要重新编号所有后续输入。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-12T04:51:56.470

有一种特定的线路格式可用于集合。这在 Scott Hanselman 的博客上进行了讨论：

[http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

Phil Haack 的另一篇博客文章在这里谈到了这一点：

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

最后，一个完全符合您要求的博客条目：

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-06T16:37:31.820

我遵循了上面博客中链接的这种方法，并添加了一些可能对某些人有帮助的细节 - 特别是因为我想动态添加任意数量的行但不想使用 AJAX 这样做（我希望表单只提交在文中）。我也不想担心维护顺序 ID。我正在捕获开始和结束日期的列表：

**查看型号：**

```
public class WhenViewModel : BaseViewModel {
    public List<DateViewModel> Dates { get; set; }
    //... Other properties
} 
```

**开始/结束日期视图模型：**

```
public class DateViewModel {
    public string DateID { get; set; }
    public DateTime? StartDate { get; set; }
    public DateTime? EndDate { get; set; }
} 
```

**然后在页面中使用它们（使用日期选择器）：**

```
<div class="grid-8-12 clear" id="DatesBlock">
@{
    foreach (DateViewModel d in Model.Dates) {
        @:<div class="grid-5-12 left clear">
            @Html.Hidden("Dates.Index", d.DateID)
            @Html.Hidden("Dates[" + d.DateID + "].DateID", d.DateID) //ID again to populate the view model
            @Html.TextBox("Dates[" + d.DateID + "].StartDate", 
                          d.StartDate.Value.ToString("yyyy-MM-dd"))
        @:</div>
        @:<div class="grid-5-12">
            @Html.TextBox("Dates[" + d.DateID + "].EndDate", 
                          d.EndDate.Value.ToString("yyyy-MM-dd"))
        @:</div>

        <script type="text/javascript">
            $('input[name="Dates[@d.DateID].StartDate"]')
               .datepicker({ dateFormat: 'yy-mm-dd'});
            $('input[name="Dates[@d.DateID].EndDate"]')
               .datepicker({dateFormat: 'yy-mm-dd'});
        </script>
     }
}
</div>
<a href="#" onclick="AddDatesRow()">Add Dates</a> 
```

正如上面@ErikTheVikings 帖子中链接的博文所述，集合是由重复的隐藏元素创建的：`@Html.Hidden("Dates.Index", d.DateID)`对于页面上集合中的每个条目。

我想在不使用 AJAX 的情况下任意添加行以将数据发布回服务器，我通过创建一个隐藏的 div 来完成，该 div 包含集合中一个“行”/项目的模板：

**隐藏的“模板”行：**

```
<div id="RowTemplate" style="display: none">
    <div class="grid-5-12 clear">
        @Html.Hidden("Dates.Index", "REPLACE_ID")
        @Html.Hidden("Dates[REPLACE_ID].DateID", "REPLACE_ID") 
        @Html.TextBox("Dates[REPLACE_ID].StartDate", "")
    </div>
    <div class="grid-5-12">
        @Html.TextBox("Dates[REPLACE_ID].EndDate", "")
    </div>
</div> 
```

然后使用 jQuery 克隆模板，提供一个随机 id 用于新行，并将现在可见的克隆行附加到上面的包含 div：

**jQuery完成流程：**

```
<script type="text/javascript">
    function AddDatesRow() {
        var tempIndex = Math.random().toString(36).substr(2, 5);
        var template = $('#RowTemplate');
        var insertRow = template.clone(false);
        insertRow.find('input').each(function(){ //Run replace on each input
            this.id = this.id.replace('REPLACE_ID', tempIndex);
            this.name = this.name.replace('REPLACE_ID', tempIndex);
            this.value = this.value.replace('REPLACE_ID', tempIndex);
        });
        insertRow.show();
        $('#DatesBlock').append(insertRow.contents());

        //Attach datepicker to new elements
        $('input[name="Dates['+tempIndex+'].StartDate"]')
            .datepicker({dateFormat: 'yy-mm-dd' });
        $('input[name="Dates['+tempIndex+'].EndDate"]')
            .datepicker({dateFormat: 'yy-mm-dd' });
    }
</script> 
```

JSFiddle 结果示例：http: [//jsfiddle.net/mdares/7JZh4/](http://jsfiddle.net/mdares/7JZh4/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T04:35:41.970

我有看起来像这样的动态列表：

```
<ul id="okvedList" class="unstyled span8 editableList">
<li>
    <input data-val="true" data-val-required="The Guid field is required." id="Okveds_0__Guid" name="Okveds[0].Guid" type="hidden" value="2627d99a-1fcd-438e-8109-5705dd0ac7bb">
    --//--
</li> 
```

所以当我添加或删除行（li 元素）时，我必须重新排序项目

```
 this.reorderItems = function () {
        var li = this.el_list.find('li');

        for (var i = 0; i < li.length; i++) {
            var inputs = $(li[i]).find('input');

            $.each(inputs, function () {
                var input = $(this);

                var name = input.attr('name');
                input.attr('name', name.replace(new RegExp("\\[.*\\]", 'gi'), '[' + i + ']'));

                var id = input.attr('id');
                input.attr('id', id.replace(new RegExp('_.*__', 'i'), '_' + i + '__'));
            });
        }
    }; 
```

此列表从客户端放入简单的 Html.BeginFrom 和服务器端的操作参数中的列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T04:43:24.827

我过去也遇到过类似的问题，我使用 KnockoutJS 来处理这种情况。

基本上，Knockout 以 JSON 字符串的形式发送集合，然后我在控制器中对它们进行反序列化。

欲了解更多信息：[http ://learn.knockoutjs.com/#/?tutorial=collections](http://learn.knockoutjs.com/#/?tutorial=collections)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-06T02:52:34.000

我遇到了一点问题，当我使用 Chrome 浏览器并单击后退按钮时，当 Chrome 浏览器未正确处理动态设置值时，我发现输入带有 type="hidden"。

也许我们可以改变

```
<input type="hidden" name="Detes.Index" value="2016/01/06" /> 
```

到

```
<div style="display: none">
    <input type="text" name="Detes.Index" value="2016/01/06" />
</div> 
```

Form more info: [Chrome doesn't cache hidden form field values for use in browser history](https://stackoverflow.com/questions/4025843/chrome-doesnt-cache-hidden-form-field-values-for-use-in-browser-history) [http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx/](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx/)

# ios - 所有实例属性的核心数据总和

> ID：14822618
> 
> 赞同：15
> 
> 时间：2013-02-11T23:06:19.987
> 
> 标签：ios, core-data

使用**Core Data**，我遇到了一个问题。我有一个带有属性“数量”的实体“运动”。如何计算所有实例的所有“数量”的总和？我想了解如何使用`NSExpressionDescription`，但这已经足够了`NSSet`。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-11T23:34:28.060

拥有 managedObjectContext：

```
NSManagedObjectContext *managedObjectContext = ... 
```

我们创建一个返回类型字典的获取请求：

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:NSStringFromClass([Movement class])];
fetchRequest.resultType = NSDictionaryResultType; 
```

然后我们创建一个表达式描述来计算总和：

```
NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
expressionDescription.name = @"sumOfAmounts";
expressionDescription.expression = [NSExpression expressionForKeyPath:@"@sum.amount"];
expressionDescription.expressionResultType = NSDecimalAttributeType; 
```

将请求属性设置为获取：

```
fetchRequest.propertiesToFetch = @[expressionDescription]; 
```

如果需要，我们还可以设置谓词。

最后我们执行请求并获得一个数组，其中包含一个带有一个键的字典（@“sumOfAmounts”），它的值是一个带有金额总和的 NSNumber。

```
NSError *error = nil;
NSArray *result = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
if (result == nil)
{
    NSLog(@"Error: %@", error);
}
else
{
    NSNumber *sumOfAmounts = [[result objectAtIndex:0] objectForKey:@"sumOfAmounts"];
} 
```

干杯

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-02-10T19:13:55.813

这是一个使用and对托管对象的属性求和的**Swift**示例。该示例假定托管对象已命名并且要求和的属性是 。`NSExpression``NSExpressionDescription`**`Movement`****`amount`**

**例子：**

```
 func sumAmount() -> Double {
    var amountTotal : Double = 0

    // Step 1:
    // - Create the summing expression on the amount attribute.
    // - Name the expression result as 'amountTotal'.
    // - Assign the expression result data type as a Double.

    let expression = NSExpressionDescription()
    expression.expression =  NSExpression(forFunction: "sum:", arguments:[NSExpression(forKeyPath: "amount")])
    expression.name = "amountTotal";
    expression.expressionResultType = NSAttributeType.doubleAttributeType

    // Step 2:
    // - Create the fetch request for the Movement entity.
    // - Indicate that the fetched properties are those that were
    //   described in `expression`.
    // - Indicate that the result type is a dictionary.

    let fetchRequest = NSFetchRequest<NSFetchRequestResult>(entityName: "Movement")
    fetchRequest.propertiesToFetch = [expression]
    fetchRequest.resultType = NSFetchRequestResultType.dictionaryResultType

    // Step 3:
    // - Execute the fetch request which returns an array.
    // - There will only be one result. Get the first array
    //   element and assign to 'resultMap'.
    // - The summed amount value is in the dictionary as
    //   'amountTotal'. This will be summed value.

    do {
        let results = try context.fetch(fetchRequest)
        let resultMap = results[0] as! [String:Double]
        amountTotal = resultMap["amountTotal"]!
    } catch let error as NSError {
        NSLog("Error when summing amounts: \(error.localizedDescription)")
    }

    return amountTotal
} 
```

* * *

**步骤的附加讨论：**

**第 1 步**- 创建一个**`NSExpressionDescription`**变量。这`NSExpressionDescription`表明将哪种类型的函数应用于参数。**sum**函数正在应用于**amount**属性。

```
expression.expression =  NSExpression(forFunction: "sum:", 
    arguments:[NSExpression(forKeyPath: "amount")]) 
```

请注意，**arguments**参数是一个*数组*。您可以在数组中传递不同类型的表达式，但是，在我们的例子中，我们只需要`amount`属性。

**第 2 步**- 在此处建立获取请求。请注意，结果类型被指定为字典：`fetchRequest.resultType = NSAttributeType.DictionaryResultType`。在第 3 步中，我们将使用 的`expression.name`值`amountTotal`作为访问总和值的键。

**第 3 步**- 我们执行获取请求并返回一个元素数组。该元素将是一个字典，我们将其转换为`[String:Double]`: `let resultMap = results[0] as! [String:Double]`。字典的值是一个 Double，因为在第 1 步中我们指出这`expression.expressionResultType`将是一个 Double。

`amountTotal`最后，我们通过调用与键关联的字典值来访问总和：`resultMap["amountTotal"]!`

* * *

**参考：**

[NSExpression](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSExpression_Class/index.html#//apple_ref/swift/cl/c:objc(cs)NSExpression)和[NSExpressionDescription](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSExpressionDescription_Class/index.html#//apple_ref/swift/cl/c:objc(cs)NSExpressionDescription)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T23:32:25.210

最好的方法是使用[fetch 获取特定值](https://developer.apple.com/library/prerelease/content/documentation/DataManagement/Conceptual/CoreDataSnippets/Articles/fetchExpressions.html)并提供[NSExpressionDescription 和`sum:`函数。](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSExpression_Class/Reference/NSExpression.html#//apple_ref/occ/clm/NSExpression/expressionForFunction:arguments:)

当你执行 fetch 时，你会得到一个单元素数组，其中包含一个字典，其键与表达式描述匹配，其值是表达式的结果。在这种情况下，您将获得一个`sum`键，其值将是给定表达式的属性之和。

# objective-c - 创建一个实现某些方法的新目标 c 类

> ID：14822620
> 
> 赞同：0
> 
> 时间：2013-02-11T23:06:23.293
> 
> 标签：objective-c, uicontrol

在一次技术电话面试中，面试官要求我实现 MiniButton 类，如 follow，并要求我实现一些方法来完成 UIButton 方法的工作。

```
@interface MiniButton

-(void)addTarget:(id)target action:(SEL)action;
-(void)removeTarget:(id)target action:(SEL)action;
-(void)_callAllTargets;

@end 
```

以上是给我的唯一信息。有人告诉我，我不能从 UIButton 继承 MiniButton。此外，如果需要，我可以假设任何本地/私有变量。

我们如何实现这些方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:34:05.313

假设您**不允许**创建 的子类`UIControl`，您需要选择一个数据结构来存储目标/动作对。由于按钮通常不会保留其目标，因此您可以像这样定义一个结构：

```
typedef struct {
    __unsafe_unretained id target;
    SEL action;
} TargetAction; 
```

您可以`NSMutableArray`通过将它们包装在`NSValue`.

调用操作的最简单方法是使用`performSelector:withObject:`，如下所示：

```
TargetAction ta;
[valueWrapper getValue:&ta];
[ta.target performSelector:ta.action withObject:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:22:02.913

我想我们的目标是制作一个 UIControl 的快捷类，同时考虑到最常见的触摸事件`UIControlEventTouchUpInside`：

```
@interface MiniButton : UIControl

-(void)addTarget:(id)target action:(SEL)action;
-(void)removeTarget:(id)target action:(SEL)action;
-(void)_callAllTargets;

@end

@implementation MiniButton
-(void)addTarget:(id)target action:(SEL)action
{
    [self addTarget:target action:action forControlEvents: UIControlEventTouchUpInside];
}

-(void)removeTarget:(id)target action:(SEL)action{
    [self removeTarget:target action:action forControlEvents:UIControlEventTouchUpInside];
}

-(void) _callAllTargets
{
     [self sendActionsForControlEvents:UIControlEventTouchUpInside];
}
@end 
```

* * *

另一种选择可能是，他希望您扩展 UIButton。但是由于UIButton是一个所谓的类簇（相当于一个工厂），它不应该通过子类来扩展，而是可以通过在UIButton的父类UIControl上创建一个类来扩展。现在，任何按钮的任何实例都被扩展，无论返回什么子类。

* * *

我想他想让你展示一些关于这个事实的知识，实际上 UIButton 和它真正的类只是 UIControl 之上的一个小层。UIButton 只能显示按钮的标签、图像……。所有其他东西都驻留在 UIControl 和它的祖先中。

# sql - OLAP/Datamart 如何开始将数据从我的数据库推送到报告数据库

> ID：14822628
> 
> 赞同：1
> 
> 时间：2013-02-11T23:07:07.540
> 
> 标签：sql, olap, datamart, data-cube

我在一家公司工作 我们有很多客户都托管在一个数据库和一个架构上。所有的客户都需要能够看到他们自己的数据，但目前我使用权限和视图加入来强制他们仅基于数据层次结构访问自己的数据。

这使得他们对数据库的报告查询非常详尽。

我开始听说 OLAP Cubes 和 Data-Mart 将有助于解决问题。

每个客户数据指向一个公司表

将这些数据卸载到客户可以半实时访问他们的数据同时仍然保持我的数据库服务器的工作负载的最佳方式是什么？

我用 OLAP 和 Data-Mart 搜索什么来解决这个问题？有没有人有任何指南向我展示第 1-10 步。

我正在查看此示例，但我不了解维度或度量组。 [http://www.developerfusion.com/article/143031/building-your-first-data-cube/](http://www.developerfusion.com/article/143031/building-your-first-data-cube/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:04:02.137

您可以设置 OLAP 服务器（例如[icCube](http://www.icCube.com)）。您可能需要设置单独的数据库服务器，但这不是必需的，因为 icCube 是内存中的 OLAP 服务器；一旦创建了多维数据集，就无法再访问底层数据库了。

# jquery - 无法在 fancybox 2.1.4 中更改叠加颜色和不透明度

> ID：14822630
> 
> 赞同：1
> 
> 时间：2013-02-11T23:07:15.037
> 
> 标签：jquery

这看起来很简单。我在 demo.html 中包含的帮助文件中编辑了覆盖参数，但我无法让它工作。我也浏览了每个 .css 和 .js 文件。

在玩了一周之后，我很沮丧。正如我所说，它看起来很简单，但我无法让它工作。

提前致谢。

// 设置自定义样式，点击关闭，改变标题类型和覆盖颜色

```
$(".fancybox-effects-c").fancybox({
    wrapCSS    : 'fancybox-custom',
    closeClick : true,

    openEffect : 'none',

    helpers : {
        title : {
            type : 'inside'
        },
        overlay : {
            css : {
                'background' : 'rgba(255,255,255,0.55)'
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-19T04:38:49.983

你可以通过你的CSS来做到这一点：

```
.fancybox-overlay {
  background: #fbe9d5;
} 
```

# c - 如何在c中将秒数添加到当前时间？

> ID：14822633
> 
> 赞同：1
> 
> 时间：2013-02-11T23:07:22.610
> 
> 标签：c, time

我正在用 c 编写代码，我需要将毫秒添加到由给出的当前时间：

```
current_time = time(NULL);
loc_time=localtime(&current_time); 
```

假设当地时间是 20:00:00:10。我想添加 10 秒并显示它，以便显示 20:00:00:20。我对c相当陌生，因此非常感谢任何帮助。我很困惑，因为时间是 int 格式，并且要添加毫秒，我必须将 .001 秒添加到不是 int 的当前秒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:13:49.647

`time_t`只是一个以秒为单位的整数，所以您只需将 10 添加到它：

```
time_wanted = time(NULL) + 10;
loc_time=localtime(&time_wanted); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:21:21.793

由于*“将时间返回为自纪元 1970-01-01 00:00:00 +0000 (UTC) 以来的秒数。”* ，您需要做的只是添加到它的返回值：[`time()`](http://linux.die.net/man/2/time) *`10`*

 *```
time_t timeNow;
struct tm* time_info;
time(&timeNow);
time_info = localtime(&timeNow);
char timeStr[sizeof"HH:MM:SS"];
strftime(timeStr, sizeof(timeStr), "%H:%M:%S", time_info);
printf("Time now: %s\n", timeStr);

// add 10 seconds:
timeNow += 10;
time_info = localtime(&timeNow);
strftime(timeStr, sizeof(timeStr), "%H:%M:%S", time_info);
printf("New time: %s\n", timeStr); 
```

查看[完整示例](http://ideone.com/yS7FwM)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T23:13:56.493

`time`返回以秒为单位的时间，因此您可以简单地添加

```
time_t soon = current_time + 10; 
```*

# jsf - JSF 中的 Panelgrid 渲染属性

> ID：14822634
> 
> 赞同：0
> 
> 时间：2013-02-11T23:07:24.113
> 
> 标签：jsf, richfaces

在复合组件中，我有这段代码

```
<composite:interface>
    <composite:attribute name="bean" required="true"/>
    <composite:attribute name="selectable" required="true"/>
</composite:interface>

<composite:implementation>
............

<h:panelGrid rendered="#{cc.attrs.selectable}"> 
    <h:column styleClass="colonneCheckbox">
        <center><h:selectBooleanCheckbox value="#{liste.selected}" /></center>
    </h:column>
</h:panelGrid>  

.............

</composite:implementation>

</html> 
```

我这样称呼它：

```
<ccc:resultatRechercheClient bean="#{rechercheClient}" selectable="true"/> 
```

但是没有渲染panegrid，是因为激活它的唯一方法是在bean内部创建一个布尔变量，将其设置为true，然后将其作为参数传递？

像这样的东西：

```
<ccc:resultatRechercheClient bean="#{rechercheClient}" selectable="#{rechercheClient.render}"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:35:09.377

根本`<h:panelGrid>`不支持。`<h:column>`改为使用`<h:panelGroup>`。

```
<h:panelGrid rendered="#{cc.attrs.selectable}"> 
    <h:panelGroup styleClass="colonneCheckbox">
        <center><h:selectBooleanCheckbox value="#{liste.selected}" /></center>
    </h:panelGroup>
</h:panelGrid> 
```

顺便说一句，HTML`<center>`元素自 1998 年以来已被弃用。使用 CSS 进行样式和定位，并确保您根据最新资源学习 HTML。

# wpf - WPF MVVM Light DataGrid 和单独的 Add Item View

> ID：14822652
> 
> 赞同：0
> 
> 时间：2013-02-11T23:09:20.730
> 
> 标签：wpf, entity-framework, mvvm, datagrid, mvvm-light

我正在学习 WPF 和 MVVM，并且我正在尝试制作一个程序，该程序具有 DataGrid 和一个按钮，该按钮通过使用可以将项目添加到 DataGrid 的命令来打开另一个表单。

问题是我不确定我应该如何使用视图模型来实现它。我有 1 个视图模型，用于我的 DataGrid 表单，它可以正常工作，并且正在使用存储库从实体框架中检索数据。

是否可以从添加表单中添加一个对象，并在我按下添加按钮时自动以另一种形式出现在 DataGrid 中，或者我是否需要在 DataGrid 上执行一些刷新操作？我在我的视图模型中使用了可观察的集合，并且我在视图模型的集合参数中实现了 OnPropertyChange 功能。

据我所知，当我将某些东西放入存储库时，每个从中获取数据的视图模型都应该被刷新......虽然我不确定我是否应该编写一些消息代码来让它工作。

我对此感到非常困惑，我希望有人可以在这里阐明...在此先感谢。告诉我我是否错过了提及某些内容，我会添加它：）

编辑：这就是我注册模型的方式：

```
SimpleIoc.Default.Register<ParentsListViewModel>();
SimpleIoc.Default.Register<EditParentViewModel>(); 
```

这就是我注册我的存储库的方式：

```
SimpleIoc.Default.Register<IParentsRepository, ParentsRepository>(); 
```

这就是我检索 ViewModel 实例的方式：

```
ParentsListViewModel parentsListViewModelInstance =  ServiceLocator.Current.GetInstance<ParentsListViewModel>();
EditParentViewModel editParentViewModelInstance = ServiceLocator.Current.GetInstance<EditParentViewModel>(); 
```

ParentListViewModel 是我的 DataGrid ViewModel，而 EditParentViewModel 是用于在存储库中添加/编辑记录的。服务定位器自动传递存储库的实例，所以我不知道它如何将存储库的实例传递给 ViewModel。它是否通过相同的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:05:44.867

当您向存储库添加内容时，视图模型不会自动刷新。

可观察集合所做的所有事情都是在向可观察集合添加/删除新项目时通知 UI（粗略地说）。INotifyPropertyChange 所做的只是通知 UI 特定属性已更改。

你有几个选择来获得你想要的工作（如果我理解正确的话）：

*   添加项目时，您可以刷新整个可观察集合
*   当添加新项目时，您可以让存储库通过事件通知您的数据网格视图模型 - 然后您的数据网格视图模型可以更新其可观察集合
*   您可以让 Add Form 视图模型与 Data Grid 视图模型对话，并在添加新项目时告诉它 - 在这种情况下，您需要一些机制来将信息从一个视图模型编组到另一个视图模型。

这有帮助吗？

格林威治标准时间 2013 年 12 月 2 日 17:30 编辑：

这是选项 2 的一个非常快速和肮脏的示例。它要求在 2 个视图模型之间共享相同的存储库实例——在这种情况下，我将它注入到构造函数中。

```
public interface IParentsRepository{
    event EventHandler<MyItemAddedEventArgs> ItemAdded;     

    //your normal interface implementation here
}

public class ParentsRepository : IParentsRepository
{
    public event EventHandler<MyItemAddedEventArgs> ItemAdded;

    public List<MyItem> GetAllItems()
    {
        //logic that returns all your items here
        return new List<MyItem>();
    }

    public void AddItem(MyItem item)
    {
        //logic that adds you item here

        //fire the item added event
        OnItemAdded(item);
    }

    private void OnItemAdded(MyItem item)
    {
        if(ItemAdded != null)
            ItemAdded(this, new MyItemAddedEventArgs(item));
    }
}

public class MyItemAddedEventArgs : EventArgs
{
    public MyItemAddedEventArgs(MyItem itemAdded)
    {

    }

    public MyItem ItemAdded { get; set; }
}

public class MyItem
{
    public string SomeProperty { get; set; }    
}

public class MyDataGridViewModel
{
    private readonly IParentsRepository _parentsRepository;

    public MyDataGridViewModel(IParentsRepository parentsRepository)
    {
        _parentsRepository = parentsRepository;
        _parentsRepository.ItemAdded += _parentsRepository_ItemAdded;

        var myItems = _parentsRepository.GetAllItems();
        MyItems = new ObservableCollection<MyItem>(myItems);
    }

    void _parentsRepository_ItemAdded(object sender, MyItemAddedEventArgs e)
    {
        if(!MyItems.Contains(e.ItemAdded))
            MyItems.Add(e.ItemAdded);
    }

    public ObservableCollection<MyItem> MyItems { get; set; }
}

public class MyAddItemViewModel
{
    private readonly IParentsRepository _parentsRepository;

    public MyAddItemViewModel(IParentsRepository parentsRepository)
    {
        _parentsRepository = parentsRepository;
    }

    //your logic to add an item here
} 
```

这个方法可以很容易地调整为方法 1，这样当 _parentsRepository_ItemAdded 事件触发时，而不是仅仅添加新项目，您可以再次获取整个数据集。

# iis-7 - 使用身份验证在 php.ini 上设置 smtp

> ID：14822656
> 
> 赞同：1
> 
> 时间：2013-02-11T23:09:26.640
> 
> 标签：iis-7, smtp, php, dyndns

`IIS`我正在使用在 Web 服务器上设置 smtp`php`

在`php.ini`文件中的 smtp 部分如下：

```
[mail function]
SMTP = outbound.mailhop.org
smtp_port = 25

auth_username = my_dyndns_username
auth_password = pwd

sendmail_from = no-reply@website.com 
```

问题是当我尝试调用 mail() 函数时，smtp 服务器说

```
SMTP server response: 550 You must authenticate to use Dyn Standard SMTP 
```

我在哪里可以告诉 IIS（或 php）用户名和密码以便在 dyndns 服务器上进行身份验证？

达里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:08:29.687

我发现[swift mailer](http://swiftmailer.org/)可以解决我的问题。

有了这个简单的脚本，我一切正常

```
$transport = Swift_SmtpTransport::newInstance('outbound.mailhop.org', 25)
                ->setUsername('user')
                ->setPassword('pwd');

$mailer = Swift_Mailer::newInstance($transport);

$message = Swift_Message::newInstance()
        ->setSubject($sbj)
        ->setFrom($from)
        ->setReplyTo($replyTo)
        ->setTo($to)
        ->setBody($msg);

$result = $mailer->send($message); 
```

[这](http://swiftmailer.org/pdf/Swiftmailer.pdf)是有关如何处理其他功能/参数的书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:42:45.633

要`SMTP`在 PHP 中使用身份验证，您需要使用 Mail`PEAR`扩展...这里有一篇[很好的帖子](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)，告诉您如何使用它。

基本上，您需要安装[扩展程序](http://pear.php.net/package/Mail)（[windows instructions](http://www.geeksengine.com/article/install-pear-on-windows.html)），然后配置一些类似这样的代码（来自上面的帖子）：

```
<?php
 require_once "Mail.php";

 $from = "Sandra Sender <sender@example.com>";
 $to = "Ramona Recipient <recipient@example.com>";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";

 $host = "mail.example.com";
 $username = "smtp_username";
 $password = "smtp_password";

 $headers = array ('From' => $from,
   'To' => $to,
   'Subject' => $subject);
 $smtp = Mail::factory('smtp',
   array ('host' => $host,
     'auth' => true,
     'username' => $username,
     'password' => $password));

 $mail = $smtp->send($to, $headers, $body);

 if (PEAR::isError($mail)) {
   echo("<p>" . $mail->getMessage() . "</p>");
  } else {
   echo("<p>Message successfully sent!</p>");
  }
 ?> 
```

# flash - Alivepdf 在多单元格内插入链接？

> ID：14822658
> 
> 赞同：0
> 
> 时间：2013-02-11T23:09:31.220
> 
> 标签：flash, apache-flex, actionscript, alivepdf

我正在处理一个 flex 项目。如何在带有alivepdf的多单元格文本中插入链接？

```
myPDF.addMultiCell(120,6,"Vedi su www.google.com",1,"J",0); 
```

如何使 www.google.com 可点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:49:46.063

请尝试以下代码 -

```
myPDF.addLink ( 120, 6, 60, 16, new HTTPLink ("http://www.google.com") ); 
```

# python - MongoDB 在 python 中不返回任何结果

> ID：14822659
> 
> 赞同：2
> 
> 时间：2013-02-11T23:09:37.457
> 
> 标签：python, mongodb

为什么 mongodb 在 shell 中返回结果而不在 python 中返回结果。

贝壳：

```
> db.posts.find({ Body: /html/ }).count()
5524 
```

Python代码：

```
query = {"Body": '/html/'}
r = mo_db.posts.find(query)
print r.count()
> 0 
```

所有其他查询都可以正常工作，只是 find() 可以正常工作。还有另一种处理斜线的方法吗？
我还测试了 r'/html/' 和 u'/html/'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:18:14.790

您正在查询作为字符串的值，而不是实际的正则表达式对象。/.../ 语法是用于构建正则表达式的 javascript 语法糖，但在 python 中，您需要使用`re`模块来完成。

试试这个：

```
import re
pattern = re.compile("html")
query = {"Body": pattern}
r = mo_db.posts.find(query)
print r.count() 
```

# php - 如何删除包含所有元素的 drupal7 表单的内部 div

> ID：14822660
> 
> 赞同：0
> 
> 时间：2013-02-11T23:09:38.123
> 
> 标签：php, forms, drupal, drupal-7, drupal-themes

我正在尝试从我尝试使用主题自定义的多步表单中删除讨厌的 div。问题是它抛弃了我的CSS。我不愿意在不知道这个 div 存在的正当理由的情况下更改我所有的 CSS 规则。

对于我所有其他主题形式，奇怪的是，这个 div 没有出现。唯一显着的区别是这种形式是多步的。我正在使用基于[此处](http://grasmash.com/article/building-multistep-registration-form-drupal-7)示例的代码。我在下面发布了一些代码。

```
function theme_mymodule_add_child_wizard($variables)
{
    $form = $variables['form'];
    $output .= '<div class="_'.$form['fname']['#ui_size'].'">';
$output .= drupal_render($form['fname']);
$output .= '</div>';

    $output .= drupal_render_children($form);
    return $output;
}

function hook_theme()
{
return array
(
    'mymodule_add_child_wizard' => array
    (
        'render element' => 'form'
    ),
);
} 
```

我的目标是转换这个：

```
<form>//My Drupal 7 Form
    <div>//Pesky Div
        <input></input>//Form elements contained by Pesky Div
    </div>
</form> 
```

进入这个：

```
<form>
        <input></input>//Form elements free from Pesky Div
</form> 
```

仅出于测试目的，我尝试更改核心 form.inc 文件中的第 3842 行以强制删除 div，但它没有那样工作。我实际上不想更改任何核心文件，我宁愿找到一种方法在我的模块中覆盖它。

```
#Tried removing the <div> tag seen here. 
return '<form' . drupal_attributes($element['#attributes']) . '><div>' . $element['#children'] . '</div></form>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T11:17:28.423

@SFox，您可以覆盖 template.php 中的函数 theme_form

检查[API](https://api.drupal.org/api/drupal/includes!form.inc/function/theme_form/7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:09:59.470

尝试这个 ：

[http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#prefix](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#prefix)

您可以设置元素的文本或标记。

请注意“另见[#suffix](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#suffix) ”。为元素添加后缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-16T08:48:15.353

据我所知，我认为`div`自定义钩子或主题无法删除上述内容。您可以使用以下代码进行检查：

```
function your_module_form($form, &$form_state) {
    $form['#theme_wrappers'] = array(); // remove both <form> and <div> inside
}

function your_module_form($form, &$form_state) {
    $form['#theme_wrappers'] = array('form'); // we want to render only <form> but <div> inside still there
} 
```

# php - 西里尔字符串的 PHP 长度使其值翻倍

> ID：14822669
> 
> 赞同：2
> 
> 时间：2013-02-11T23:10:30.387
> 
> 标签：php, string, double, strlen

你好，这是问题所在：当我到达 $_POST 拉丁字符串 strilen() 时，它工作得很好，但是当我得到西里尔字符串 strlen() 时，它的值加倍，这里是代码：

```
$word = $_POST['word'];
echo strlen($word) . '<br>'; //input: abc -> returns 3, input: абв -> returns 6 
var_dump($word); //input: abc -> returns string 'abc' (length=3), input: абв -> returns string 'абв' (length=6) 
```

你有什么想法吗？！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T23:11:56.313

`strlen`不会加倍任何东西，它只是报告情况。具体来说，它报告*有多少字节*——而不是*多少字符*——组成了字符串。那是因为`strlen`不知道什么是“字符”，并且盲目地假设 1 字节 = 1 个字符。因此我们说“`strlen`不是多字节感知的”。

在您的情况下，浏览器似乎将 UTF-8 编码数据提交给服务器。在 UTF-8 中，西里尔字母是每个字符两个字节。

如果要找出字符串中的字符数，请使用 multibyte-aware [`mb_strlen`](http://php.net/manual/en/function.mb-strlen.php)：

```
echo mb_strlen($word, 'UTF-8'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T23:12:18.207

`mb_strlen()`如果您正在处理多字节字符，请尝试。

[http://php.net/manual/en/function.mb-strlen.php](http://php.net/manual/en/function.mb-strlen.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:13:33.273

如果您想以字符（而不是字节）的形式获取长度，请使用 strlen 的多字节版本：mb_strlen：[http ://php.net/manual/en/function.mb-strlen.php](http://php.net/manual/en/function.mb-strlen.php)

# jquery - 按钮（'重置'）

> ID：14822671
> 
> 赞同：1
> 
> 时间：2013-02-11T23:10:54.567
> 
> 标签：jquery

以下单页应用程序（由其他人创建）对用户进行身份验证， [http://backbonedevise.herokuapp.com](http://backbonedevise.herokuapp.com)是使用 Backbonejs 和一个名为 Marionette 的插件创建的。我正在尝试在没有 Marionnette 的情况下重写它。成功和错误回调有这行代码

```
el.find('input.btn-primary').button('reset'); 
```

在登录之前，html 看起来像这样

```
 <input type="submit" value="Login" class="btn btn-primary"> 
```

换句话说，它没有类型重置。我假设这条线`el.find('input.btn-primary').button('reset');`以某种方式重置了按钮。我试图用这种方式重写它

```
$('input.btn-primary').button('reset'); 
```

但我收到一个错误，

```
Object has no method button. 
```

你能解释一下我可能做错了什么以及如何解决它。

成功回调。

```
this.model.save(this.model.attributes, {
      success: function(userSession, response) {
        el.find('form').prepend(BD.Helpers.Notifications.success("Instructions for resetting your password have been sent. Please check your email for further instructions."));
        el.find('input.btn-primary').button('reset');
      }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:20:35.613

Marionette`.button()`在其内部实现了一个方法。

这很可能`.button()`是一个轻松管理按钮状态的钩子，但我没有深入研究它（我对 Marionette 一无所知）。

这是 Marionette 中`.button`定义的实例，尽管我发现有很多地方引用它：

```
a.fn.button = function (c) {
        return this.each(function () {
            var d = a(this),
                e = d.data("button"),
                f = typeof c == "object" && c;
            e || d.data("button", e = new b(this, f)), c == "toggle" ? e.toggle() : c && e.setState(c)
        }) 
```

归根结底，要么您需要弄清楚`.button()`Marionette 中对您有什么作用并自己重新实现它，要么完全不使用它。

无论如何，jQuery UI 也有一个`.button`方法，所以既然你还在使用 jQuery，你可以插入它。

# javascript - 在 Excel VBA 中解析 JSON 对象数组

> ID：14822672
> 
> 赞同：6
> 
> 时间：2013-02-11T23:10:54.367
> 
> 标签：javascript, json, excel, vba, jscript

我知道之前有人问过并回答过类似的问题： [Parsing JSON in Excel VBA](https://stackoverflow.com/questions/6627652/parsing-json-in-excel-vba) , [Excel VBA: Parsed JSON Object Loop](https://stackoverflow.com/questions/5773683/excel-vba-parsed-json-object-loop)

但是，如果我试图访问返回对象中的数组，则上述解决方案不起作用。我从 Google Translate API 接收到 JSON 对象，格式如下：

```
"{
"sentences":[
    {
        "trans":"Responsibility\n",
        "orig":"??",
        "translit":"",
        "src_translit":"Zérèn"
    },
    {
        "trans":"Department",
        "orig":"??",
        "translit":"",
        "src_translit":"Bùmén"
    }
],
"src":"zh-CN",
"server_time":86 
```

}"

我希望能够访问两个翻译的句子作为句子（0）和句子（1）。我可以使用之前帖子中的 GetProperty() 方法来检索语句对象，但我无法访问其成员，因为它是 JScriptTypeInfo 类型的对象，而不是数组。

我尝试使用类似于此处描述的方法将句子对象转换为 JScript 中的数组：[如何在 javaScript 和 VBA 之间传递数组](http://ramblings.mcpher.com/Home/excelquirks/snippets/scriptcontrol/arrays)。出于某种原因，我只能让它返回数组的第一个值。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T23:44:26.927

您可以使用该`ScriptControl`对象创建一个可以运行 javascript 的环境。如果您习惯于在网页中使用 JSON，那么这可能是一种简单的方法。

例子：

```
Sub Tester()

    Dim json As String
    Dim sc As Object
    Dim o

    Set sc = CreateObject("scriptcontrol")
    sc.Language = "JScript"

    json = {get your json here}

    sc.Eval "var obj=(" & json & ")" 'evaluate the json response
    'add some accessor functions
    sc.AddCode "function getSentenceCount(){return obj.sentences.length;}"
    sc.AddCode "function getSentence(i){return obj.sentences[i];}"

    Debug.Print sc.Run("getSentenceCount")

    Set o = sc.Run("getSentence", 0)
    Debug.Print o.trans, o.orig
End Sub 
```

如何使用脚本控件调用函数：http: [//support.microsoft.com/kb/184740](http://support.microsoft.com/kb/184740)

使用 ScriptControl：[https ://msdn.microsoft.com/en-us/library/aa227633(v=vs.60).aspx](https://msdn.microsoft.com/en-us/library/aa227633(v=vs.60).aspx)

# twitter-bootstrap - Bootstrap popover 不适用于类，但可以使用 id

> ID：14822677
> 
> 赞同：1
> 
> 时间：2013-02-11T23:11:14.737
> 
> 标签：twitter-bootstrap

我一直在尝试让 bootstrap popover 插件在共享同一个类的多个元素上工作。现在它是大的灰色块级“更多信息”按钮。你可以在 [这里找到链接](http://www.bestcastleintown.co.uk/test2.html#)

以前，当它是像这样的单数 id`id="pop"`和以下 JavaScript 时，popover 可以工作：

```
$(document).ready(function() {
   $('#pop').popover()
}); 
```

但是，当我将 2 个显示“更多信息”的按钮更改`from id="pop"`为`class="pop"`并相应地修改 JavaScript 时，弹出框停止在多个按钮上工作：

```
$(document).ready(function() {
   $('.pop').popover()
});

<a class="btn btn-block pop" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." data-placement="top" data-toggle="popover" data-original-title="Popover on right">More Information</a></p> 
```

popover插件是否不适用于具有相同类的多个元素？如果您查看我提供的链接，则没有控制台错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:24:45.040

你可以使用这样的东西：

```
$('.pop').popover({
    html: true,
    content:mycontent,
    trigger: 'manual'
}).click(function(e) {
    $(this).popover('toggle');
    e.stopPropagation();
}); 
```

[只需检查我的 jsfiddle](http://jsfiddle.net/moalla/fsRaN/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T19:47:43.150

在 JavaScript 中：

```
$(document).ready(function() {
  options = {
   placement: 'top',
   trigger : 'click'
  }
  $('[rel="popover"]').popover(options);
}); 
```

在 HTML 中：

```
<p><a class="btn btn-block pop" rel="popover" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." data-original-title="Popover on right">More Information</a></p>

<p><a class="btn btn-block pop" rel="popover" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." data-original-title="Popover on right">More Information</a></p> 
```

# java - 显示所有抛出异常的函数

> ID：14822678
> 
> 赞同：2
> 
> 时间：2013-02-11T23:11:18.600
> 
> 标签：java, eclipse, exception, try-catch

我正在开发一个 Java 程序，我想知道 Eclipse 中是否有一些工具可以指出所有引发异常的方法。我只是想确保我得到了所有这些。

谢谢您的帮助，

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:05:32.920

**必须捕获已**检查的异常，以便 Eclipse 告诉您它们。**另一方面，**未经检查的异常**（又名[RuntimeException](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)）是“不应该发生的”，大多数情况下是编程问题。因此，Java 不需要捕获它们，AFAIK Eclipse 不会显示任何提示来告诉您潜在的问题（它可能更好地提高可见性）。**

 **您可以阅读[**Unchecked Exceptions — The Controversy**](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)，这篇文章 Oracle 给出了它对**unchecked 异常**的看法。

如果您想自己构建一些东西，请查看[RuntimeException](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)`Direct Known Subclasses`，它将帮助您识别可以抛出而不会被捕获的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:22:27.273

如果您的程序在 main 方法（初始执行上下文）中捕获到异常，您将被告知是否抛出了一些异常但未处理。

```
public static void main(String[] args) {
    try {
       // .... anything you want to do
    } catch(Exception e) {
       e.printStackTrace(); // useful to visualize the stack trace and ping point others places to catch exceptions
    } catch(Throwable t) {
       // if you want to check for errors also, but generally there isn't much to do in this case
    }
} 
```

附带说明一下，由于 Java 实现了已检查（异常）和未检查的 RuntimeException）异常的概念，因此必须处理已检查的异常，这会告知正确的程序应该尝试/捕获/最终处理的异常。但是未经检查的通知通常指示错误的情况，并且应该避免良好的做法和防御性编程，因此您不必处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:17:51.327

首先，搜索关键词。“throw”关键字将出现在检测错误条件或无法处理某些异常的代码中，而“throw”将是声明它们传递某些异常的方法。

Eclipse 可能无法找到所有抛出异常的方法，因为运行时异常不需要在“抛出”子句中声明，并且可能由库调用抛出，在这种情况下您也找不到“抛出”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T23:18:31.107

如果您忘记捕获已*检查*的异常（扩展`Exception`），则代码将无法编译。如果您忘记捕获*未经检查*的异常（扩展`RuntimeException`），那通常是更好的方法。[阅读](http://codeisland.org/2012/catching-practice/)**

# python - 将python数据框转换为列表

> ID：14822680
> 
> 赞同：16
> 
> 时间：2013-02-11T23:11:37.207
> 
> 标签：python, python-3.x, python-2.7, pandas

我有一个包含多列的 Python 数据框。

```
 LogBlk    Page                                    BayFail       
  0          0                                 [0, 1, 8, 9]  
  1          16           [0, 1, 4, 5, 6, 8, 9, 12, 13, 14]  
  2          32           [0, 1, 4, 5, 6, 8, 9, 12, 13, 14]  
  3          48           [0, 1, 4, 5, 6, 8, 9, 12, 13, 14] 
```

我想找到与 LogBlk=0 和 Page=0 关联的 BayFails。

```
df2 = df[ (df['Page'] == 16) & (df['LogBlk'] == 0) ]['BayFail'] 
```

这将返回 [0,1,8,9]

我想要做的是将此 pandas.series 转换为列表。有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-11T23:13:34.130

`pandas.Series`，有一个[`tolist`方法](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tolist.html#numpy-ndarray-tolist)：

```
In [10]: import pandas as pd

In [11]: s = pd.Series([0,1,8,9], name = 'BayFail')

In [12]: s.tolist()
Out[12]: [0L, 1L, 8L, 9L] 
```

* * *

技术说明：在我最初的回答中，我说这`Series`是它的子类`numpy.ndarray`并继承了它的`tolist`方法。虽然对于 Pandas 0.12 或更早版本也是如此，但在即将发布的 Pandas 0.13 版本中，`Series`已将其重构为`NDFrame`. `Series`仍然有一个方法，但它与同名`tolist`的方法没有直接关系。`numpy.ndarray`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T17:54:15.263

您也可以将它们转换为`numpy arrays`

```
In [124]: s = pd.Series([0,1,8,9], name='BayFail')

In [125]: a = pd.np.array(s)
Out[125]: array([0, 1, 8, 9], dtype=int64)

In [126]: a[0]
Out[126]: 0 
```

# google-apps-script - GAS 标签可见性

> ID：14822682
> 
> 赞同：0
> 
> 时间：2013-02-11T23:11:52.170
> 
> 标签：google-apps-script

此代码应该更改标签可见性状态......但它喜欢保持隐藏状态。您可以看到我尝试以两种不同的方式定义*rlabel 。*使用注释的代码时出现未定义的错误 //。我知道它正在执行 else 语句。谢谢你的时间...

```
function showDialog()  {
var app = UiApp.createApplication();    
var panel = app.createHorizontalPanel();
panel.add(label3);

...
var label3 = app.createLabel("Bad PIN");
label3.setId('BADPIN').setVisible(false);
app.add(panel);
var doc = SpreadsheetApp.getActive();
doc.show(app);
...
    } 
```

好的，所以对话框参数被传递给这个函数：

```
function respondtoSubmit(e) {
  var app = UiApp.getActiveApplication();
  ...
  if (loftExists(PINValue)==true) {
     ...
     return app.close(); }
  else {  //show bad pin label 
     var rlabel =app.getElementById('BADPIN');
     rlabel.setVisible(true);        
     Logger.log ("rlabel.setVisible(true); just called");
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:23:29.647

您在代码中执行此操作的方式`label3.setId('BADPIN');`以及稍后在 serverhander 中访问它`var rlabel =app.getElementById('BADPIN');`的方式是正确的方式。另一种方式，通过它`e.parameter`，只能用于访问小部件值，而不是操作小部件本身，并且仅适用于具有 setName-Method 的那些元素，标签不是这种情况（参见[文档添加回调元素](https://developers.google.com/apps-script/class_serverhandler?hl=en#addCallbackElement)）。

所以你没有显示的代码部分应该在 showDialog() 中：

```
 app.add(label3); 
```

而且，为了确认处理程序中的 else-part 被执行，添加一个 Logger 输出：

```
else {  //show bad pin label 
  var rlabel =app.getElementById('BADPIN');
  rlabel.setVisible(true); 
  Logger.log ("rlabel.setVisible(true); just called");
} 
```

检查它，如果它仍然不起作用，请发布您的整个代码，那么某个地方肯定有另一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:24:01.457

假设`respondtoSubmit(e)`从您的 UI 中的某个 Handler 调用，您必须`return app;`在函数结束时调用。这就是 GAS 知道将视图更新给用户的方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T00:06:00.123

您需要做`app.createLabel('Bad Pin').setName('BADPIN')`才能访问表单提交上的标签。设置 ID 是不够的。

# php - PHP Multiselect with Chosen jQuery - 返回所有值，而不仅仅是选择

> ID：14822685
> 
> 赞同：2
> 
> 时间：2013-02-11T23:11:57.807
> 
> 标签：php, jquery, forms, multi-select, jquery-chosen

我正在使用多选来获取一些值。这个多选使用的是 Chosen jQuery 插件。

出于某种原因，在 PHP 中，此多选返回所有值，而不仅仅是选定的值。

**的HTML**

```
<select name="taglist[]" size="10" id="taglist" style="width:350px;" class="chzn-select" multiple multiple-data-placeholder="Select some tags" >
**This is populated by Ajax**
</select> 
```

**阿贾克斯人口之后**

```
<option value="Student community of reflection - A conscious environment of cooperative sharing of ideas and proces">Student community of reflection - A conscious environment of cooperative sharing of ideas and proces</option>
<option value="Teacher inclusive conversations - Emphasis on a sharing of power with students; visibility that enco">Teacher inclusive conversations - Emphasis on a sharing of power with students; visibility that enco</option>
<option value="Teacher feedback - Awareness of the power of written, oral and symbolic feedback on students self co">Teacher feedback - Awareness of the power of written, oral and symbolic feedback on students self co</option>
<option value="Student self assessment ( metacognitive reflection) - Continuous opportunities for students to thin">Student self assessment ( metacognitive reflection) - Continuous opportunities for students to thin</option> 
```

**PHP的**

```
foreach ($_REQUEST['taglist'] as $value)
{
mysql_query("INSERT INTO recent_tags (t_name, t_owner, t_post) VALUES ('$value', '$uid',  '$id')") or die (mysql_error());
} 
```

**结果**

Array ( [0] => 学生反思社区 - 有意识地合作分享想法和过程的环境 [1] => 教师包容性对话 - 强调与学生分享权力；可见性 [2] => 教师反馈- 意识到书面、口头和符号反馈对学生自我合作的力量 [3] => 学生自我评估（元认知反思） - 学生不断有机会瘦身）

**即使在多选框中仅选择了其中一个选项，也会发生这种情况**

希望有人能够帮助解决这个问题，这让我很头疼。

**print_r($_POST) 的结果**

```
Array ( [entry_name] => aaa [entry_content] => [tag_category] => Insider Classroom Framework [taglist] => Array ( [0] => Student community of reflection - A conscious environment of cooperative sharing of ideas and proces [1] => Teacher inclusive conversations - Emphasis on a sharing of power with students; visibility that enco [2] => Teacher feedback - Awareness of the power of written, oral and symbolic feedback on students self co [3] => Student self assessment ( metacognitive reflection) - Continuous opportunities for students to thin ) [button] => Post ) 
```

**表格帖子**

```
<form id="form1" name="form1" method="post" onSubmit="return checkAll();" action="process/webpl_journal_entry_process.php"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:19:12.197

我认为您的 HTML 已关闭。你有：

```
<select name="taglist[]" size="10" id="taglist" style="width:350px;" class="chzn-select" multiple multiple-data-placeholder="Select some tags" >
**This is populated by Ajax**
</select> 
```

而且我看不到您的“内部复选框”的外观，但我几乎可以肯定您没有将它们设置为`name='taglist[]'`，因为您希望它们具有该值，并且您不希望您的`name`选择是`taglist[]`。

如果您使用的是列表，那么您希望将选择名称保留为`taglist[]`，但不想命名任何内部选项，只需使用它们`value`的 's.

**编辑：** 显示所有代码，并且工作正常：

```
<form action="" method="post">
<select name="taglist[]" size="10" id="taglist" style="width:350px;" class="chzn-select" multiple multiple-data-placeholder="Select some tags" >
<option value="Student community of reflection - A conscious environment of cooperative sharing of ideas and proces">Student community of reflection - A conscious environment of cooperative sharing of ideas and proces</option>
<option value="Teacher inclusive conversations - Emphasis on a sharing of power with students; visibility that enco">Teacher inclusive conversations - Emphasis on a sharing of power with students; visibility that enco</option>
<option value="Teacher feedback - Awareness of the power of written, oral and symbolic feedback on students self co">Teacher feedback - Awareness of the power of written, oral and symbolic feedback on students self co</option>
<option value="Student self assessment ( metacognitive reflection) - Continuous opportunities for students to thin">Student self assessment ( metacognitive reflection) - Continuous opportunities for students to thin</option>
</select>
<input type="submit">
</form>
<?php
if($_REQUEST['taglist']) {

    foreach ($_REQUEST['taglist'] as $value)
    {
        echo $value ."<br>\n";
    }
}
?> 
```

# pandas - 用 DataFrame 列替换 MultiIndex 的内容

> ID：14822688
> 
> 赞同：1
> 
> 时间：2013-02-11T23:12:04.260
> 
> 标签：pandas

假设我有一个带有 MultiIndex 的 DataFrame，就像这样

```
In [88]: topic_word
Out[88]: 

                          n         p
topic_id token                       
0        functions        1  0.076923
         layer            7  0.538462
         layered          1  0.076923
         module           1  0.076923
         multi            1  0.076923
         perceptron       1  0.076923
         separable        1  0.076923
1        copy             1  0.200000
         electromyograph  1  0.200000
         physical         2  0.400000
         techniques       1  0.200000
2        aw               1  0.125000
         computed         1  0.125000
         region           3  0.375000
         regions          3  0.375000
3        autonomous       1  0.041667
         diverse          1  0.041667
         heterogeneity    1  0.041667
         heterogeneous    4  0.166667
         integrate        2  0.083333 
```

如何将 MultiIndex 的内容插入到常规列中，以便可以像选择任何其他列一样选择它们？

```
 topic_id token            n         p
0   0        functions        1  0.076923
1   0        layer            7  0.538462
2   0        layered          1  0.076923
3   0        module           1  0.076923
4   0        multi            1  0.076923
5   0        perceptron       1  0.076923
6   0        separable        1  0.076923
7   1        copy             1  0.200000
8   1        electromyograph  1  0.200000
9   1        physical         2  0.400000
10  1        techniques       1  0.200000
11  2        aw               1  0.125000
12  2        computed         1  0.125000
13  2        region           3  0.375000
14  2        regions          3  0.375000
15  3        autonomous       1  0.041667
16  3        diverse          1  0.041667
17  3        heterogeneity    1  0.041667
18  3        heterogeneous    4  0.166667
19  3        integrate        2  0.083333 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:16:06.410

做一个普通的[`reset_index`](http://pandas.pydata.org/pandas-docs/dev/indexing.html#remove-reset-the-index-reset-index)把这些列放回列：

```
df.reset_index() 
```

> 对于`DataFrame`多级索引，在索引名称下的列中返回带有标签信息的新 DataFrame...

*注意：[参数`drop`参数](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.reset_index.html)（如果设置`True`）**不会**添加索引列：*

> `drop`: boolean, **default False**
>     不要尝试将索引插入数据框列。
>     这会将索引重置为默认整数索引。

# c# - 从 dataGridView 获取平均时间

> ID：14822693
> 
> 赞同：-1
> 
> 时间：2013-02-11T23:12:34.510
> 
> 标签：c#, time, average

我有一个从 SQL 语句填充的 dataGridView。它被放置在一个选项卡控件中，在另一个选项卡控件中，我有不同的文本框可以对这些数字有所了解。

无论如何，最后一列填充了以下格式的持续时间：

00:03:00

我需要做的是计算时间的平均值。我发现的所有内容都将计算常规整数的平均值等但不是时间。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:30:00.683

您可以将值解析为`TimeSpan`，将它们转换为毫秒（或刻度），计算平均值（从“常规整数”），然后将平均值转换回 a `TimeSpan`。

假设您在一个名为 的字符串数组中有这些值，`durations`您可以使用它执行以下操作：

```
var averageTicks = durations.Select(d => TimeSpan.Parse(d).Ticks).Average();
var averageDuration = TimeSpan.FromTicks(averageTicks); 
```

希望这可以帮助 ：）

# c++ - 程序的计算复杂度

> ID：14822694
> 
> 赞同：0
> 
> 时间：2013-02-11T23:12:38.330
> 
> 标签：c++, data-structures, big-o, time-complexity

我编写了以下程序来回答这个问题

> 编写一个高效的函数来查找字符串中第一个不重复的字符。例如，“total”中第一个不重复的字符是“o”，“teeter”中第一个不重复的字符是“r”。讨论算法的效率。

这就是我所做的：

```
#include <stdio.h>
#include <iostream>
#include <vector>
using namespace std;

class Node
{
public:
    Node::Node(char ch)
    {
        c = ch;
        next = NULL;
    }
    char c;
    Node *next;
};

Node* addNode(Node *tail, char ch)
{
    if(tail == NULL)
        return new Node(ch);
    else
    {
        Node *newN = new Node(ch);
        tail->next = newN;
        return newN;
    }
}

void deleteNode(char ch, Node** head, Node**tail)
{
    Node *prev = NULL;
    Node *cur = *head;

    while(cur!=NULL)
    {
        if(cur->c == ch)
        {
            // found cut it
            if(prev == NULL)
            {
                // head cut off
                if(*tail == *head)
                {
                    // worst possible, just one element
                    delete *head;
                    *head = NULL;
                    return;
                }
                else
                {
                    // Head cut off but not just first element
                    Node *tmp = *head;
                    *head = (*head)->next;
                    delete tmp;
                    return;
                }
            }
            else
            {
                // delete normal node
                if(*tail == cur)
                {
                    // delete tail
                    Node *tmp = *tail;
                    *tail = prev;
                    delete tmp;
                    return;
                }
                else
                {
                    // Normal node not tail
                    prev->next = cur->next;
                    delete cur;
                    return;
                }
            }
        }
        // no match keep searching
        prev = cur;
        cur = cur->next;
    }
}

int  main()
{
    char str[] = "total";
    char htable[26];

    memset(htable, 0, sizeof(char)*26);

    Node *head = NULL;
    Node *tail = head;

    for(unsigned int i=0;;i++)
    {
        if(str[i] == '\0')
            break;

        // check first match
        char m = htable[str[i]-'a'];
        switch(m)
        {
        case 0:
            {
                // first time, add it to linked list
                htable[str[i]-'a']++;
                tail = addNode(tail, str[i]);
                if(head == NULL)
                    head = tail;
            }break;
        case 1:
            {
                // bam, cut it out
                htable[str[i]-'a']++;
                deleteNode(str[i], &head, &tail);
            }break;
        }

    }

    if(head != NULL)
        printf("First char without repetition: %c", head->c);
    else
        printf("No char matched");

    return 0;
} 
```

它可以工作（尽管我没有在程序结束时为链表释放内存）。基本上，如果还没有找到一个字符，我会保留一个带有 0 的哈希表，如果找到了一次（并且它被添加到链表的尾部位置）则为 1，如果至少出现两次，则为 2 （并且应该被链表删除）。

**这个程序的大 O 表示法的计算复杂度是多少？**

由于这个算法每个元素只通过一次，我认为它是 O(n)，尽管删除链表中的值（在最坏的情况下可能）需要额外的 O(k^2)，其中 k 是使用的字母表。像 O(n+k^2) 这样的东西是我的选择，如果字符串很长并且字母表受到限制，算法就会变得非常有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:34:12.263

嗯，是的，从表面上看，这看起来很`O(N)`复杂，但是您通过使用动态分配引入了不良的低效率。

但是，因为您调用`deleteNode`并且必须搜索列表，所以您不再具有`O(N)`复杂性。

想想如果你有字符串会发生什么：

```
abcdefghijklmnopqrstuvwxyzzyxwvutsrqponmlkjihgfedcb 
```

这具有大致的复杂性，`O(N*(N-1)/2)`因为每个`deleteNode`调用都必须扫描到剩余列表的末尾。

您真正需要做的就是扫描字符串一次并存储每个字符的索引（如果尚未找到），然后扫描该数组以查找最低索引。如果你喜欢，你可以使用一个索引`-1`来表示一个字符还没有遇到过。那将是复杂的`O(2N)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:46:06.710

从算法描述中：“它必须至少是 O(n)，因为在你读完所有字符之前，你不知道一个字符是否会重复。”，另请参阅：[Find the first unrepeated character in a字符串](https://stackoverflow.com/questions/2285533/find-the-first-un-repeated-character-in-a-string)。

在您的算法中，我看不到从链表中删除元素的 O(k^2) 复杂度。从链表中删除一个元素是 O(n) + O(1) = O(n)，其中 O(n) 是搜索，O(1) 是找到节点后的擦除。

由于链表最多只能包含 k 个元素，因此删除需要 O(k)。因为这是在 for-loop => O(n*k) 内。

由于 k 是常数 => O(n) 复杂度——但是，它可以以更简单的方式实现。同样，请参阅[https://stackoverflow.com/a/2285561/592636](https://stackoverflow.com/a/2285561/592636)（使用两个数组）。

# xamarin.ios - Monotouch.Dialog 中的单选复选框组

> ID：14822695
> 
> 赞同：1
> 
> 时间：2013-02-11T23:12:49.080
> 
> 标签：xamarin.ios, monotouch.dialog

我正在使用此代码将 Checkbox 组放入 MonoTouch 表中，并根据检查的项目更新值：

```
var applescheck = new CheckboxElement ("Apples", false, "purchase");
var orangescheck = new CheckboxElement ("Oranges", false, "purchase");

var Purchases = new Section () {

    applescheck,
    orangescheck

};

applescheck.Tapped += () => {

    orangescheck.Value = false;

};

orangescheck.Tapped += () => {

    applescheck.Value = false;

}; 
```

但是，尽管这确实更新了复选框项目的值，但当项目值为 false 时，出现的复选框仍保留在那里。有没有办法更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:48:02.720

将您的事件更改为以下内容

```
applescheck.Tapped += () => {
    orangescheck.Value = false;
    orangescheck.GetActiveCell().Accessory = UITableViewCellAccessory.None;
};

orangescheck.Tapped += () => {
    applescheck.Value = false;
    applescheck.GetActiveCell().Accessory = UITableViewCellAccessory.None;
}; 
```

原因是 CheckboxElement.Value 只是一个字段，设置它没有副作用。要进行更改，您需要获取与元素关联的 UITableViewCell 并在那里应用更改。

# scala - Scala 2.10 基准测试：当性能很重要时，集合中的通用方法没用？

> ID：14822700
> 
> 赞同：2
> 
> 时间：2013-02-11T23:13:15.600
> 
> 标签：scala, optimization, iterator, benchmarking, scala-2.10

我已经对几种折叠大量原语（“直接”和使用迭代器）的方法进行了基准测试，结果令人失望。（是的，我已经完成了预热、中间 GC 和许多运行通道，在服务器模式下运行 JVM 并`scalac`启用了优化（并且禁用了调试信息））。

我认为代码太大，无法在这里发布，所以这里是链接：[http](http://pastebin.com/18dWWBM4) ://pastebin.com/18dWWBM4 那里唯一运行几乎与普通旧命令式循环一样好的方法是这个不那么通用的手写函数：

```
@inline def array_foldl[@specialized A, @specialized B](init: B)(src: Array[A])(fun: (B, A) => B) = {
  var res = init
  var i = 0
  var len = src.length
  while (i < len) {
    res = fun(res, src(i))
    i += 1
  }
  res
} 
```

其他视觉上不错的方法完全是局外人。此外，使用迭代器抽象在所有情况下都会失败，对标准迭代器的手写模仿称为`SpecializedIterator`稍快。所以有什么问题？它可以以某种方式改进吗？有没有办法制作“快速”的迭代器，还是原理本身存在很大问题？
感谢关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:34:06.213

问题是拳击。创建一个对象比添加两个数字需要更长的时间，但是如果您使用通用（非专业）折叠，则每次都必须创建一个对象。只对所有内容进行专门化的问题在于，您将整个库扩大了 100 倍，因为您需要两个原始参数（包括非原始参数）的每种组合，以及原始的无类型参数版本。（100 倍，因为有 8 个原语加上`Unit`/ `AnyRef`non-specialized `T`。）这是站不住脚的，并且由于没有现成的替代解决方案，因此集合目前是非专业化的。

此外，专业化本身相对较新，因此在实施方面仍有一些缺陷。特别是，您似乎遇到了一个问题`SpecializedIterator`： in 中的函数`foreach`最终没有专门化（我将 trait/object 东西折叠成一个类，以便更容易追踪）：

```
public class Main$SpecializedArrayIterator$mcJ$sp extends Main$SpecializedArrayIterator{
public final void foreach$mcJ$sp(scala.Function1);
  Code:
   0:   aload_0
   1:   invokevirtual   #39; //Method Main$SpecializedArrayIterator.hasNext:()Z
   4:   ifeq    24
   7:   aload_1
   8:   aload_0
   9:   invokevirtual   #14; //Method next$mcJ$sp:()J
   12:  invokestatic    #45; //Method scala/runtime/BoxesRunTime.boxToLong:(J)Ljava/lang/Long;
   15:  invokeinterface #51,  2; //InterfaceMethod scala/Function1.apply:(Ljava/lang/Object;)Ljava/lang/Object;
   20:  pop
   21:  goto    0
   24:  return 
```

请参阅第 12 行的框，然后调用未专门化的 Function1？哎呀。（其中`(A, (A,A) => A)`使用的元组`sum`也搞乱了专业化。）这样的实现是全速的：

```
class SpecializedArrayIterator[@specialized A](src: Array[A]) {
  var i = 0
  val l = src.length
  @inline final def hasNext: Boolean = i < l
  @inline final def next(): A = { val res = src(i); i += 1; res }
  @inline final def foldLeft[@specialized B](z: B)(op: (B, A) => B): B = {
    var result = z
    while (hasNext) result = op(result,next)
    result
  }
}

...
measure((new SpecializedArrayIterator[Long](test)).foldLeft(0L)(_ + _))
... 
```

结果如下：

```
Launched 51298 times in 2000 milliseconds, ratio = 25.649    // New impl
Launched 51614 times in 2000 milliseconds, ratio = 25.807    // While loop 
```

# python - 如何使用 Python 包分发日志记录配置

> ID：14822704
> 
> 赞同：2
> 
> 时间：2013-02-11T23:13:38.900
> 
> 标签：python, logging

将配置文件添加到包中并不是什么大问题。但是当我将包上传到 pypi 并安装它时，无法读取日志配置：

```
logging.config.fileConfig('logging.conf') 
```

基本上我的模块找不到它，因为文件不再位于*当前工作目录*中。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:20:20.147

如果`logging.conf`与调用的文件存在于同一目录中`logging.config.fileConfig`，则可以使用：

```
import os
logconf_file = os.path.join(os.path.dirname(__file__), 'logging.conf')
logging.config.fileConfig(logconf_file) 
```

# mysql - 警告：mysql_num_rows()：提供的参数不是第 21 行的有效 MySQL 结果资源

> ID：14822705
> 
> 赞同：-1
> 
> 时间：2013-02-11T23:13:38.643
> 
> 标签：mysql, sql, php-5.2

好的，下面是我的代码，我尝试使用 var_dumps 对其进行调试 .. var_dump($insertion) 返回通过，这意味着查询插入到数据库中，但由于某种原因，当我想查看时，我会收到警告消息如果 mysql_num_rows 正在完成它的工作并且它返回 FALSE 并带有标题的警告消息.. 下面是我简短的直接代码

```
<?php

require'sensdb.php';

if (sensdb_connect()) {

$select = "SELECT SubGroupID from STx WHERE GroupID = '39'AND Status ='Provisioned'";

$result = mysql_query($select);
$result_count = mysql_num_rows($result);

  if($result_count > 0)
   {
       while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {

         if($row['SubGroupID'] != 123) {

        $insert = "INSERT INTO Routes (SubGroupID,GroupID,URL) VALUES (".$row['SubGroupID'].",39,'mailto://e2pressure@gmail.com')";
        $insertion = mysql_query($insert);
        $insertion_count =  mysql_num_rows($insertion); var_dump($insertion_count);
        $select_route_id = "SELECT RouteID FROM Routes WHERE SubGroupID =".$row['SubGroupID']." AND GroupID = 39";
        $result_route_id = mysql_query($select_route_id);
        $result_route_count = mysql_num_rows($result_route_id);
         if($insertion_count > 0 ) {
         if($result_route_count > 0) {
            $row_route = mysql_fetch_array($result_route_id,MYSQL_ASSOC);
             $update = "UPDATE STx SET RouteID =".$row_route['RouteID']." WHERE SubGroupID =".$row['SubGroupID']."";
             var_dump($update);

             }

           }

         }

     }

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:17:33.417

来自 PHP 文档：

> 从结果集中检索行数。此命令仅对返回实际结果集的 SELECT 或 SHOW 等语句有效。要检索受 INSERT、UPDATE、REPLACE 或 DELETE 查询影响的行数，请使用 mysql_affected_rows()。

[PHP.net](http://php.net/manual/en/function.mysql-num-rows.php)

此外，您真的应该使用 PDO（或类似的东西）。

# node.js - 如何使用 Node.js 中的 WebSocket (websockets/ws) 库获取客户端 IP 地址？

> ID：14822708
> 
> 赞同：42
> 
> 时间：2013-02-11T23:13:41.290
> 
> 标签：node.js, websocket

我在客户端对象上找不到客户端 IP 参数。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-08-31T23:44:27.927

在尝试找出哪个提供客户端（Web 浏览器）IP 地址之后，答案是：

```
ws._socket.remoteAddress 
```

或者，如果您可以`req`通过以下方式访问`wss.on('connection', (ws, req) => {})`：

```
req.socket.remoteAddress 
```

例如，您可以使用它来 GeoIP 定位用户连接的位置。

**编辑：**

如果你在 Nginx 反向代理（或任何其他反向代理）后面运行 Node，你可能需要使用：

```
req.headers['x-forwarded-for'] || req.connection.remoteAddress 
```

*关于安全性的说明：如果您的 Node 服务器可以直接使用以及通过反向代理使用，您可能需要检查`remoteAddress`before trusting `x-forwarded-for`。远程地址应该是您的反向代理的 IP。有人可能会直接调用您的服务并进行欺骗`x-forwarded-for`。*

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-21T01:14:23.710

通过在套接字对象中打印键得到这个：

```
> ws._socket.address()
  { port: 8081,
    family: 2,
    address: '127.0.0.1' }

> ws._socket.remoteAddress
  '74.125.224.194'

> ws._socket.remotePort
  41435 
```

我没有任何文档，所以我不确定跨版本的支持程度：/

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-05-13T19:08:50.730

在 websocket 服务器中，由于`req.connection`已弃用，因此您使用`req.socket`.

```
wss.on('connection', (ws, req) => {
    console.log(req.socket.remoteAddress);
}); 
```

# python - SQLite 和 Python 错误

> ID：14822712
> 
> 赞同：-2
> 
> 时间：2013-02-11T23:13:50.510
> 
> 标签：python, sqlite

嘿，我使用以下代码：

```
 bookseats = [0,1]
        print"What seats would you like to book?"
        bookseats[0] = raw_input("Choice : ")
        bookseats[1] = raw_input("What is their user ID? : ")
        cur.execute("SELECT * FROM seats WHERE Booked='N'")
        row = cur.fetchone()
        if row != None and row[2] == "S":
            booked = 'B'
            print "Seat Number:" , row[0] ,"Is now booked!"
            cur.execute("UPDATE seats SET CustID=? AND Booked=? WHERE Seat_name=? AND Day=?", (bookseats[1],booked,bookseats[0],choice) 
```

但是当我这样做时，CustID 列也只是更改为 0，而 Booked 列没有切换到“B”表示预订，它只是停留在“N”上，请帮帮我！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:19:50.403

而不是这个查询：

```
UPDATE seats SET CustID=? AND Booked=? WHERE Seat_name=? AND Day=? 
```

你应该使用这样的东西：

```
UPDATE seats SET CustID=?, Booked=? WHERE Seat_name=? AND Day=? 
```

在这里查看有关`UPDATE`查询的更多信息：http: [//www.w3schools.com/sql/sql_update.asp](http://www.w3schools.com/sql/sql_update.asp)

# android - 在游戏设计中使用全息

> ID：14822714
> 
> 赞同：-2
> 
> 时间：2013-02-11T23:13:55.910
> 
> 标签：android, user-interface

在设计安卓游戏时，我不确定我是否应该坚持使用全息主题 + 操作栏或完全自定义主题设计。该应用程序没有像 FPS 那样使用特殊的 opengl 全屏活动，而是使用了许多基本视图和对话框。目前它在 holo 中看起来还不错，但使用起来并没有沉浸感——它只是感觉就像一个应用程序。所以我问你的问题是，有正确的方法还是错误的方法？如何让用户感觉更沉浸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:18:23.207

我会说这取决于它是什么类型的游戏。如果它是一个非常动画类型的游戏，那么不，Holo 可能不是正确的选择。我有一个使用 ActionBar/Holo 的数独游戏 (Holoku)，我认为它运行良好，但数独是一种非常通用的棋盘游戏类型，非常适合应用类型主题。冒险/动作游戏之类的东西不一定适合。

Holo 是一个很好的指南，但并非对所有情况都有用——您可以在不遵循系统主题的情况下进行出色的设计，尤其是对于游戏。我会说这完全取决于您的实施。

# forms - 自定义验证器 Symfony2 排序

> ID：14822718
> 
> 赞同：4
> 
> 时间：2013-02-11T23:14:17.547
> 
> 标签：forms, validation, symfony, symfony-2.1

我有一个带有一些自定义验证器的实体，如下所示：

```
use Digital\ApplicationBundle\Validator\Constraints\ConstrainsUsername;
use Digital\ApplicationBundle\Validator\Constraints\ConstrainsProduct;
use Digital\ApplicationBundle\Validator\Constraints\ConstrainsGiftValid;

/**
 * @DigitalAssert\ConstrainsGiftValid
 */
class Gift
{

/**
 * @DigitalAssert\ConstrainsUsername
 */
private $username;

/**
 * @DigitalAssert\ConstrainsProduct
 */
private $productName;
[...] 
```

我的问题是如何设置检查顺序....

我想先验证我的属性，如果属性有效，那么我想检查这两个属性是否允许“存在”在一起......

所以我的案例需要验证器的特定顺序。

请问这怎么可能实现？

当前的问题是我的班级验证“ConstrainsGiftValid”在他们之前开始；S

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:18:48.717

要检查是否`$username`并`$productName`在一起，您必须创建一个[自定义验证约束](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)。

**如果您需要验证器的特定顺序，并希望稍后在代码中重用这两个字段的验证，我认为应该这样做：**

`1`为 {username and productName} 创建一个表单类型。

`2`在该 formType 上应用您的验证规则。如果您想使用验证顺序，则需要在这种特殊情况下对整个表单应用约束。因此，您只能按照您想要的顺序抛出错误。

`3`您最终可以将其嵌入到`formType`您的`GiftFormType`. 不要忘记使用有效约束或设置`cascade_validation`选项`true`来验证嵌入的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:19:52.340

好的，在一个约束中处理所有内容都有效。

这包括将错误绑定到特定属性，以及针对不同的故障报错不同的消息：

```
public function isValid($gift, Constraint $constraint)
{

    // Validate product.
    /** @var $product Product */
    $product = $this->em->getRepository('DigitalApplicationBundle:Shop\Product')->findOneBy(array('name' => $gift->getProductName()));
    if (!$product instanceof Product) {

        $this->context->addViolationAtSubPath('username', $constraint->messageProduct, array('%string%' => $gift->getProductName()), null);
        return false;

    }

    // Validate user.
    /** @var $user User */
    $user = $this->em->getRepository('DigitalUserBundle:User')->findOneBy(array('username' => $gift->getUsername()));
    if (!$user instanceof User) {

        $this->context->addViolationAtSubPath('username', $constraint->messageUser, array('%string%' => $gift->getUsername()), null);
        return false;
    }

    // Gift correct type of the item!
    if (($product->getType() != 0) && ($user->getGender() !== $product->getType())) {

        $this->context->addViolationAtSubPath('username', $constraint->messageType, array('%string%' => $gift->getProductName()), null);
        return false;

    }

    // If already owning this product.
    foreach ($user->getWardrobe()->getProducts() as $wardrobeProduct) {
        if ($product == $wardrobeProduct) {

            $this->context->addViolationAtSubPath('username', $constraint->message, array('%string%' => $gift->getProductName(), '%user%' => $gift->getUsername()), null);
            return false;
        }
    }

    return true;
} 
```

# css - 制作没有浮动的 CSS 网格

> ID：14822719
> 
> 赞同：3
> 
> 时间：2013-02-11T23:14:22.493
> 
> 标签：css, css-float, grid-layout

正如标题所暗示的那样，我需要制作一个 CSS Grid 而不会丢失*float*，因为这会干扰*Waypoints JS Plugin* ...

无论如何，我偶然发现了，`display: inline-block;`但如果网格中的框占据容器宽度的 100%，则只有在一行中编写所有代码时才有效（**[JSFiddle 1](http://jsfiddle.net/zygnz/1436/)**）

由于我的项目是一个模板，我不能只强迫用户在一行中编写他的所有代码。

有没有办法解决这个问题？

**日期1：**

`white-space: nowrap;`也对我没有帮助，因为它搞砸了元素中的所有文本（**[JSFiddle 2](http://jsfiddle.net/zygnz/1439/)**）

**日期2：**

**[此](http://jsfiddle.net/bQemh/2/)** `font-size: 0;`解决方案对我没有帮助，因为我还需要父元素中的文本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:17:39.220

更新：

[jsFiddle 上的工作示例](http://jsfiddle.net/htmled/bQemh/)。

将 a 设置`font-size: 0;`为父元素，然后在包含元素上将其设置回所需的大小将解决问题。还要确保`vertical-align: top;`在包含元素上使用，这样不相等的文本行都将从顶部的相同位置开始。

注意：如果您需要两个 div 以相同的高度出现（由于背景颜色、图像等），您需要使用[仿列技术](http://alistapart.com/article/fauxcolumns)。

```
.left {
    background: red;
    height: 140px;
    width: 55%;
    margin: 0 5% 0 0;
    display: inline-block;
    font-size: 14px;
    vertical-align: top;
}
.right {
    background: orange;
    height: 140px;
    width: 40%;
    display: inline-block;
    font-size: 14px;
    vertical-align: top;
}
section {
    background: black;
    width: 100%;
    margin: 0 0 20px;
    color: #ffffff;
    font-size: 0;
} 
```

如果 div 不包含文本，请修复：

[jsFiddle 上的工作示例](http://jsfiddle.net/htmled/7B9Pp/)。

添加`white-space: nowrap;`到部分规则：

```
section {
    background: black;
    width: 100%;
    margin: 0 0 20px;
    white-space: nowrap;
} 
```

有关该`white-space`属性的更多信息，请参阅：[http ://www.quirksmode.org/css/whitespace.html](http://www.quirksmode.org/css/whitespace.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T06:46:21.783

CSS Tricks 有一篇很棒的文章，关于在使用时删除多余的空白`inline-block`

[http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

# java - Java 对对象的引用

> ID：14822720
> 
> 赞同：1
> 
> 时间：2013-02-11T23:14:24.660
> 
> 标签：java, pass-by-reference

假设我有一`Node`堂课。它只有一个字段，`Node parentNode.`也有 setter 和 getter。

我有 2 个节点：`Node nodeA`和`Node nodeB`.

这就是我想要做的：将`nodeB`' 父级设置为`nodeA`' 父级，然后将`nodeA`' 父级设置为空。

1.  `nodeB.setParent(nodeA.getParent());`
2.  `nodeA.setParent(null);` `// bad since nodeB.getParent() will = null`

要实现上述目标，我必须先克隆`nodeA,`然后再做`nodeB.setParent(nodeAClone.getParent())`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:18:17.307

因为 nodeX.parent 是对对象的引用：

*   当您打电话时，`nodeB.setParent(nodeA.getParent())`您是在对 nodeB 说“这里是 nodeA 父级的地址”。
*   然后当你说`nodeA.setParent(null);`你对 nodeA 说“忘记你的父母住在哪里。你的父母现在什么都不是。”
*   您在第二个语句中对 nodeB 什么也没说，它仍然具有现在其父级的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T23:16:13.013

> nodeA.setParent(null); // 不好，因为 nodeB.getParent() will = null

不，`nodeB.parent`不会设置为`null`。Java 总是使用`Pass by Value`而不是`pass by reference`. 重复 10 次。

如果您传递引用，则通过引用的值传递它们。

* * *

让我们更详细地了解。

当你这样做时： -

```
nodeB.setParent(nodeA.getParent()); 
```

您只需创建对 的引用的副本`nodeA parent`，并将其存储在`nodeB parent`. 因此，您现在有两个引用`nodeA parent`object。现在，当您设置`nodeA parent`为时`null`，它与 that 分离`parent`，但`nodeB parent`引用仍然存在。

# javascript - jQuery在一个又一个孩子中淡入淡出

> ID：14822723
> 
> 赞同：0
> 
> 时间：2013-02-11T23:14:28.820
> 
> 标签：javascript, jquery, html, fadein, children

出于某种原因，我知道这在不使用选择器、类或标识符的情况下是可能的，我只是想不通。

我有一些`div`s 嵌套在其他`div`s 中，我想一个接一个地淡入淡出，从最浅`div`到最深`div`。

我最初虽然`.each()`或`.children()`但我只是想不通。我不确定它会怎么写。

但是，出于某种原因，我有一种强烈的感觉，可以用一个简短的简单脚本来完成，有人可以帮我弄清楚吗？

这是一个应该更容易理解的小提琴。[http://jsfiddle.net/3z9Bf/](http://jsfiddle.net/3z9Bf/)

* * *

不要让小提琴迷惑你。当我意识到我自己做不到时，我并不仅仅尝试自己`.fadeIn`开始编写脚本。`div`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T23:22:33.187

这是一个简单的插件：

```
$.fn.cascadeChildren = function (speed) {
    var $children = this.children();

    if ( ! $children.length ) return;

    speed = speed || 300;

    $children.animate({ opacity: 1 }, speed, function () {
        $(this).cascadeChildren(speed);
    });
}; 
```

按如下方式使用它：

```
$('#element').cascadeChildren(); 
```

这是小提琴：http: [//jsfiddle.net/GUFzc/](http://jsfiddle.net/GUFzc/)

# ruby - 如何将数据从我的 sinatra 应用程序中的类传递到 websocket-rack？

> ID：14822726
> 
> 赞同：2
> 
> 时间：2013-02-11T23:14:57.343
> 
> 标签：ruby, websocket, sinatra, rack, resque

我在 sinatra 应用程序中有一个 websocket-rack 的工作配置，该应用程序旨在用于具有多个屏幕的物理安装。有一些功能可以通过 websocket 来回传递消息。

我的问题是：我有一个带有标准 web 表单（即不是 websocket 表单）的页面，我的目标是从该表单收集参数，将参数转换为字符串变量，然后发送该变量的内容（一个字符串）通过 websocket 到不同的页面/屏幕。对于我的生活，我无法弄清楚如何做应该是一个相对简单的任务，因为从我的应用程序的主类中，我无法与我的 Socket 类进行通信，据我所知，这基本上是一个机架应用程序。

我试图通过将 resque 设置为中间人来解决它，但很快发现我的问题并没有改变。我不知道如何调用方法和/或将变量从另一个类传递给 Socket，以便它将推送到浏览器。

基本上，我有一个 app.rb 是这样的：

```
 module SomeThing
      class App < Sinatra::Base
        get '/' do
          #show a form
        end

        post '/submit' do
          #receive params
          #save params
          new_message = params.inspect
          #dream up some way to pass new_message to websocket
        end

        post '/otherscreen' do
          #have an open websocket to receive new_message
        end
      end

      class Socket < Rack::WebSocket::Application

        def on_open(env)
          puts "Client connected"
          send_data "Oh hai!"
        end

        def on_close(env)
          puts "Client disconnected"
        end

        def on_message(env, msg)
           puts "Received message from client: " + msg
        end

        def on_error(env, error)
          puts "An error occured: " + error.message
        end

        def pass_message(env, new_message)
          send_data new_message
        end
      end   
    end 
```

如果您需要更多信息来解决此问题，请告诉我。我很乐意提供任何需要的东西，只是不确定现在可能是什么。

你知道我该如何解决这个问题吗？这太痛苦了。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:16:36.243

所以，我写信给 websocket-rack 的作者 Bernard Potocki，他说：

“我通常做的是将活动连接列表保存到某种类变量。可能的实现之一可能看起来像这个要点：[https](https://gist.github.com/imanel/a00d6b65561ebba43b9a) ://gist.github.com/imanel/a00d6b65561ebba43b9a “

要点的内容，以防它被删除：

```
class Socket < Rack::WebSocket::Application

  def self.connections
    @connections ||= []
  end

  def self.send_to_all(message)
    @connections.each {|connection| connection.send_data(message)
  end

  def on_open(env)
    self.class.connections << self
  end

  def on_close(env)
    self.class.connection.delete(self)
  end

end 
```

然而，最终我没有测试这个解决方案，因为我们能够使用 Redis 和 Event Machine 解决这个问题，所以请注意，这也是一个选项。

# parallel-processing - 创建图形以显示串行代码中的依赖关系以显示如何使其并行

> ID：14822727
> 
> 赞同：2
> 
> 时间：2013-02-11T23:15:03.777
> 
> 标签：parallel-processing

我正在尝试重新编写一段串行代码以在并行环境中工作，并尝试制作一个详细说明其所有过程的图表，以便清楚哪些可以并行化。我想知道这样的图表是否有约定，人们是否可以给我一些关于它们的建议。我对如何展示这些过程如何构成更大的过程（即功能是如何构成的）感到困惑。我也有点不确定如何显示循环，尤其是独立循环和必须串联完成的循环之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:41:09.653

您最需要知道的是数据依赖关系。两个代码块之间没有数据依赖关系——>它们可以并行化。

存在粒度问题：如果我们将数组视为数据流项，那么引用同一个数组的两段代码之间几乎总是存在依赖关系；一种方法是通过将数组划分为范围来解决这个问题，这取决于循环如何跨过数组。对于循环尤其如此。

这些依赖关系如何显示是另一回事。On 可以简单地说，“代码块 A 读/写数据项 P，Q 与代码块 B 写 P 和读 Q 冲突”。或者，可以绘制显示数据流的图表。（可以通过代码子图隔离数据流，可以并行化）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T12:04:47.663

与其检查现有代码的行为，不如将其重新安排到支持并行处理的架构中。看看[数据流架构](http://en.wikipedia.org/wiki/Dataflow_programming)。

# ruby-on-rails - 一段时间未使用后退出 current_user

> ID：14822728
> 
> 赞同：0
> 
> 时间：2013-02-11T23:15:04.700
> 
> 标签：ruby-on-rails

我有 Rails 3 应用程序。我希望能够在 30 分钟不使用应用程序或网站关闭后终止用户会话或注销，并重定向到我的登录页面并发出一些警报。最好的方法是什么？有宝石可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:20:55.867

如果您使用的是设计，您可以使用[超时表](https://github.com/plataformatec/devise)来使用户会话过期。

# java - 使用@RunWith(SpringJUnit4ClassRunner.class)，可以访问ApplicationContext对象吗？

> ID：14822730
> 
> 赞同：12
> 
> 时间：2013-02-11T23:15:13.647
> 
> 标签：java, spring, unit-testing, junit, integration-testing

我有一个 Spring 测试，它使用：

```
@RunWith(SpringJUnit4ClassRunner.class) 
```

与旧的测试方法不同，从 Spring 测试基类扩展，似乎没有明显的方法可以访问 Spring 加载的 ApplicationContext 使用`@ContextConfiguration`

如何`ApplicationContext`从我的测试方法访问对象？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T23:23:27.830

来自 Spring 文档的[集成测试](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#integration-testing)部分

> @Autowired 应用程序上下文
> 
> 作为实现 ApplicationContextAware 接口的替代方法，您可以通过字段或 setter 方法上的 @Autowired 注释为测试类注入应用程序上下文。例如：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class MyTest {

  @Autowired
  private ApplicationContext applicationContext;

  // class body...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-27T10:56:51.907

我用这个：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:applicationContext.xml")
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = false)
@FixMethodOrder(MethodSorters.NAME_ASCENDING)
public class MyClassTest
{
} 
```

并转到项目构建路径`-> Source ->`添加您的位置`applicationContext.xml`

我使用 maven，所以`applicationContext.xml`在`src/main/resources`.

如果您使用此方法，您可以使用多个 applicationContext 进行测试，例如：

```
@ContextConfiguration("classpath:applicationContext_Test.xml") 
```

或者

```
@ContextConfiguration("classpath:applicationContext_V01.xml") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T23:20:35.783

添加 ApplicationContext 的 @Autowired 属性

```
@Autowired ApplicationContext applicationContext; 
```

# c# - 如何在 C# 1.1 中组合大小写标签？

> ID：14822731
> 
> 赞同：0
> 
> 时间：2013-02-11T23:15:32.810
> 
> 标签：c#, loops, switch-statement

根据字体及其大小标识符，我想计算文本的高度。但是，这不会编译（抱怨“控制不能从一个案例标签（'默认：'）落到另一个”）：

```
 private int GetHeightForFontAndFontSize(int fontType, int fontSizeId)
    {
        int retVal = 0;
        if (fontType == 0)
        {
            switch (fontSizeId)
            {
                case 0:
                case 1:
                    retVal = 9;
                    break;
                case 2:
                case 3:
                case 4:
                    retVal = 18;
                    break;
                case 5:
                case 6:
                    retVal = 36;
                    break;
                default:
                    retVal = 9;
            }           
        }
        if (fontType == 1)
        . . .

                          return retVal;
    } 
```

...即使这样： http: [//msdn.microsoft.com/en-us/library/06tc147t](http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.71).aspx) (v=vs.71).aspx说“虽然不支持从一个案例标签到另一个案例标签，但它允许堆叠案例标签，例如“

在我看来，我正在堆叠它们所描绘的案例标签，那么问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:16:31.897

你需要一个`break;`案例`default:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:31:49.473

这是固定代码。我在默认情况下添加了中断。

```
private int GetHeightForFontAndFontSize(int fontType, int fontSizeId)
    {
        int retVal = 0;
        if (fontType == 0)
        {
            switch (fontSizeId)
            {
                case 0:
                case 1:
                    retVal = 9;
                    break;
                case 2:
                case 3:
                case 4:
                    retVal = 18;
                    break;
                case 5:
                case 6:
                    retVal = 36;
                    break;
                default:
                    retVal = 9;
                    break;
            }           
        }
        if (fontType == 1)
        . . .

                          return retVal;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:17:22.273

`break;`尝试在默认值之后放置。

# javascript - 如何将 HTML5 画布模型与 MVVM/MVP 数据框架链接

> ID：14822734
> 
> 赞同：4
> 
> 时间：2013-02-11T23:15:40.370
> 
> 标签：javascript, html, backbone.js, canvas, knockout.js

在多次试图澄清我对此事的想法之后，我认为最好求助于一些专家，他们可能能够为我指明正确的方向。

概念如下，一个相当基本的概念：

1.  定期从服务器端从数据库中检索最新数据。
2.  这些数据被放入由 Backbone.js、Ember.js 或 KnockoutJS 等管理的模型中。
3.  在更新时，画布上的元素会使用相关信息进行更新（画布由 KineticJS 或 Fabric.js 之类的东西管理）。
4.  有可能逆转此过程，将数据从画布上的更改发送回服务器。

**所以我的问题是**：将画布模型（画布库的模型）与 MVVM/MVP 模型之一链接起来是否可行？我看过的那些似乎专注于 HTML 元素（我之前曾在这种情况下涉足过 KnockoutJS），但这次我试图管理画布元素。如果可能（或不可能），或者如果需要本土解决方案，我应该注意什么，有什么陷阱，我可能错过或忘记了什么？

几年前似乎[出现了类似](https://stackoverflow.com/questions/5673220/how-to-bind-a-backbone-js-click-event-to-a-view-rendered-inside-a-html5-canvas)的情况，从那以后它发生了变化还是仍然是家庭发展解决方案的问题？里面的答案可以扩展吗？

我不是在寻找完整的解决方案，而是寻找有经验的人给我一些指导（我是工作中唯一一个在这方面有任何经验的人，没有任何人可以与之讨论或者，为了理解它，我在绕圈子）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:14:57.957

我不确定这是一个很好的答案，我很想知道是否有任何替代方案。但是，我最近做了一些与您提供的链接中建议的非常相似的事情。

如果您查看 Backbone View，除了 DOM 管理之外并没有太多其他功能，就像您所说的那样，这对于画布元素是无用的。因此，我以类似于 Backbone 的 View 的样式制作了一个简单的对象，以与画布元素一起使用（我使用了 easel.js）。

我不能声称这段代码是完整的或任何东西，因为我只是在玩一些画架...

```
var CanvasView = function(options) {
        this.model = options.model;
        this.initialize.apply(this, arguments);
    };
_.extend(CanvasView.prototype, Backbone.Events, {
    initialize: function(options) {
        // in extended view, hook up to model change events, etc.
        // Since I used easel, here I also created some easel DisplayObjects,
        // then update their positions/etc. in response to model changes.
    }
}); 
```

我想如果我在这方面做更多的工作，就会添加更多的东西，比如内置的画架“容器”，可能还有类似于 Backbone View 的声明性事件哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:20:26.767

我确实认为您可以通过一些工作来做到这一点。

[我已经使用自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)将 Raphael.js 元素连接到视图模型，并且您可以使用 pub/sub 框架从画布元素单击事件（假设它具有此事件）与您的视图模型进行通信。我会为此推荐[jQuery pubsub](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEkQFjAC&url=https://github.com/phiggins42/bloody-jquery-plugins&ei=mwYaUeT8Meik0AW32ICoAQ&usg=AFQjCNGV8Y2tCgfxdLw-x_AUrMOQc26C1Q&sig2=Zn8xgucCP0uCbQoo6QCDpQ&bvm=bv.42261806,d.d2k)插件。

我有一个[jsFiddle 示例](http://jsfiddle.net/UgyRg/17/)，您可以查看以供参考，但请注意，我创建该示例是为了演示我遇到的问题，如果您离开视图并返回，我必须销毁重新创建画布元素，所以它并不完美。但是你应该能够得到它的要点。

要查看的重要部分是 html 代码中的自定义绑定：

```
<div class="span10" data-bind="foreach: Current">
    <div class="gauge" data-bind="createGauge: $data"></div>
</div> 
```

自定义绑定js代码：

```
// Knockout handler to create a gauge for each bound item
ko.bindingHandlers.createGauge = {
    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        ko.utils.unwrapObservable(viewModel.updated);
        var gaugeName = viewModel.Name;
        var substation = bindingContext.$parent;

        var gaugeObject = substation.Gauges[gaugeName];

        // I cannot, for the life of me, get the gauge to redraw properly if I just
        // redraw the inner. Leave the real-time values page and come back, and
        // all the gauges are no longer visible.
        // So destroy the existing one and recreate it from scratch.
        // Yes, this is annoying!
        if (gaugeObject) {
            gaugeObject.gauge.removeChildren();
            gaugeObject.gauge.clear();
            gaugeObject.gauge.remove();
            gaugeObject.gauge = null;
            gaugeObject.paper.clear();
            gaugeObject.paper.remove();
            gaugeObject.paper = null;
            gaugeObject = null;
        }

        if (!gaugeObject) {
            var gaugeSize = $(element).height();
            var paper = new Raphael(element, gaugeSize, gaugeSize);
            var gauge = paper.gauge(viewModel);
            gaugeObject = {
                'paper': paper,
                    'gauge': gauge
            };
            substation.Gauges[gaugeName] = gaugeObject;
        }

        gaugeObject.gauge.updateValue(viewModel);
    }
}; 
```

Raphael 仪表代码（我不会在这里复制它，它很长，但请注意我在该代码中只引用了一个 observable，否则该仪表将针对每个更新的属性进行更新，我想更新所有属性一口气在视图模型上，但只有仪表重绘一次），我将画布元素的点击功能挂钩到 pubsub 框架：

```
gauge.clickFunction = function ()
{
    $.publish('/history', [point.IOReference]);
}; 
```

在我的代码中，它只导航到不同的视图，但在相应的订阅处理程序上，您可以根据需要更新视图模型并将其保存回服务器。

# javascript - Grails：如何基于 GSP 表单中的选择显示来自数据源的数据

> ID：14822736
> 
> 赞同：0
> 
> 时间：2013-02-11T23:16:06.027
> 
> 标签：javascript, grails, gsp

我有一个从 MySQL 数据源生成的下拉菜单。

```
 <g:select onchange="selected()"  id="name" name="name" from="${listOfNames()}" noSelection="['':'--']"/> 
```

这会用我表中的一列填充菜单

现在，根据选择，我想在 gsp 表单上显示与文本相同的表中的其他列。

所以用户从下拉列表中选择 Name1。我显示在下拉菜单下方

名称 1。年龄 21\. 学位是的。

我的控制器中有一个名为 allDetails 的操作，它查询与名称关联的所有值并返回一个字符串。但我不确定如何传递参数

```
"${remoteFunction(action:'allDetails', params: \'name=\' params.name')} 
```

做这个的最好方式是什么。在 selected() 或以某种方式调用该操作的 gsp 标记内运行 JavaScript 远程函数？然后如何显示返回的字符串？改变innerHTML？

试过[http://www.grails.org/AJAX-Driven+SELECTs+in+GSP](http://www.grails.org/AJAX-Driven+SELECTs+in+GSP)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:27:27.900

您不能使用[`remoteFunction`](http://grails.org/doc/2.2.x/ref/Tags/remoteFunction.html)或[其他核心 Grails 标签](http://grails.org/doc/2.2.x/guide/theWebLayer.html#ajax)，因为它的文本是在页面渲染期间完全生成的，并且您只知道在 Javascript 中执行期间选择的名称`onchange`。

所以使用[jQuery Ajax 调用](https://stackoverflow.com/questions/10431049/jquery-ajax-request-in-grails)（除非你切换到不同的 Javascript 插件）。

我建议你不要选择一个名字，而是选择`id`那个人的一个名字，就像在第二个[g:select](http://grails.org/doc/2.2.x/ref/Tags/select.html)例子中一样。

# django - 访问外键时使用代理模型

> ID：14822743
> 
> 赞同：4
> 
> 时间：2013-02-11T23:16:34.090
> 
> 标签：django, django-models

我有两个相关的 Django 模型。其中一个模型进行了昂贵的计算，`__init__`如果没有不可接受的成本/风险，我无法转移到其他地方。

事实证明，并非在所有情况下都需要这些昂贵的计算，因此我引入了一个绕过它们的代理模型。但是，它们经常需要，因此将昂贵的用于代理是不切实际的。

所以，我的代码基本上是这样的：

```
class Person(models.Model):
  def __init__(self, *args, **kw):
    models.Model.__init__(self, *args, **kw)
    do_some_really_expensive_things()

class LightweightPerson(Person):
  class Meta:
    proxy = True

  def __init__(self, *args, **kw):
    models.Model.__init__(self, *args, **kw)

class PersonFact(models.Model):
  fact = models.TextField()
  person = models.ForeignKey(Person) 
```

这很好用——我的大部分代码查询都在`Person`. 在代码不需要真正昂贵的东西的少数地方，它会查询`LightweightPerson`，并且性能更好。

但是，我的一些代码从`PersonFact`实例开始并访问`person`每个`PersonFact`. 此代码不需要真正昂贵的人员计算，并且这些昂贵计算对性能的影响是不可接受的。所以我希望能够在这种情况下实例化 a`LightweightPerson`而不是 a 。`Person`

我想出的方法是添加一个`ForeignKey`引用代理类的第二个，并使用相同的数据库列：

```
class PersonFact(models.Model):
  fact = models.TextField()
  person = models.ForeignKey(Person, db_column="person_id")
  lightweight_person = models.ForeignKey(
     LightweightPerson, db_column="person_id", 
     related_name="lightweight_personfact_set") 
```

所以现在当我需要性能提升时，我的代码可以做这样的事情：

```
facts = PersonFact.objects.select_related(
             "lightweight_person").all()
for fact in facts:
  do_something_with(fact.lightweight_person) 
```

这很好用！直到我尝试保存一个新的`PersonFact`：

```
>>> fact = PersonFact(fact="I like cheese", person=some_guy_i_know)
>>> fact.save()
Traceback (most recent call last):
...
DatabaseError: column "person_id" specified more than once 
```

:-(

有什么方法可以做到这一点，而无需对当前的代码进行大的可怕重构`Person.__init__`？理想情况下，我要么能够在我的调用代码中发出“当`person_fact.person`现在访问时，请实例化 a`LightweightPerson`而不是 a ”的信号。`Person`或者，或者，我希望能够`PersonFact`在相同的数据库列上声明一个“代理相关字段”，但 Django 的内部知道只与数据库列交互一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:16:34.090

到目前为止，我想出的最佳解决方案是在相关模型上做一些可怕的事情`__init__`：

```
class PersonFact(models.Model):
  fact = models.TextField()
  person = models.ForeignKey(Person, db_column="person_id")
  lightweight_person = models.ForeignKey(
     LightweightPerson, db_column="person_id", 
     related_name="lightweight_personfact_set")

def __init__(self, *args, **kw):
    models.Model.__init__(self, *args, **kw)
    index = None
    for i, field in enumerate(self._meta.local_fields):
        if field.name == 'lightweight_person':
            index = i
            break
    if index is not None:
        self._meta.local_fields.pop(index) 
```

这显然从对象管理器中隐藏了该字段的存在以进行更新和插入，因此不会发生“列指定多次”错误；当我选择现有数据时，该字段仍会被填充。

这似乎可行，但它非常可怕——我不知道它是否会对我的代码的其他部分产生副作用。

# coffeescript - 咖啡脚本如何设置绑定”到父类中定义的回调函数中的子类

> ID：14822744
> 
> 赞同：1
> 
> 时间：2013-02-11T23:16:35.480
> 
> 标签：coffeescript

我想更改子类中回调函数的绑定，以便以下代码指示 20，而不是 10：

```
class A 
  @in = 10
  @b: =>
    alert(@in)

class B extends A
  @in = 20

  @w: ->
    window.setTimeout(@b,500)

B.w() 
```

如果我“细箭头”Ab 的定义，则绑定到超时调用函数，因此 @in 未定义。当我对它进行粗箭头时，它会绑定到父类 A。我希望它绑定到子类 B，而无需重新定义子类中的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:57:34.207

我认为您能做的最好的事情就是在设置`setTimeout`呼叫时手动强制进行适当的绑定。`=>`在定义`@b`时删除`A`：

```
class A 
  #...
  @b: -> alert(@in) 
```

`B`然后在您调用时设置绑定`setTimeout`：

```
class B extends A
  #...
  @w: ->
    f = => @b()
    window.setTimeout(f, 500) 
```

我认为这与使用 CoffeeScript 的伪类方法一样接近。

演示：http: [//jsfiddle.net/ambiguous/Y6S8D/](http://jsfiddle.net/ambiguous/Y6S8D/)

# wpf - VisulStudio 2012 设计器无法正确识别 DataGrid 的属性

> ID：14822747
> 
> 赞同：0
> 
> 时间：2013-02-11T23:16:52.803
> 
> 标签：wpf, styles, dependency-properties

在 WPF 用户控件声明中，我定义了以下样式：

```
<UserControl.Resources>
  <Style x:Key="Datagrid" TargetType="{x:Type DataGrid}">
     <Setter Property="Background" Value="Transparent"/>

     <Setter Property="BorderBrush" Value="Transparent"/>
     <Setter Property="HeadersVisibility " Value="Column"/>
     <Setter Property="VerticalGridLinesBrush " Value="{StaticResource DatagridVerticalLinesBrush}"/>
     <Setter Property="HorizontalGridLinesBrush " Value="Transparent"/>
     <Setter Property="RowHeaderWidth " Value="0"/>
     <Setter Property="CanUserAddRows " Value="False"/>
     <Setter Property="CanUserDeleteRows " Value="False"/>
  </Style>
</UserControl.Resources> 
```

问题是 Visual Studio 2012 设计器认为属性在类型 DataGrid 上不存在。它说：**成员“XXXXXXXXXXXX”无法识别或无法访问**。

尽管存在错误，但该样式在运行时已正确应用，并且属性存在于 DataGrid 上（它们是 DependencyProperies）并且是公共的。

知道是什么导致它认为它们不存在或为什么设计师无法访问它们吗？

顺便说一句，Background 属性没问题。只有其他 7 个有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:55:57.357

我已经在 VS2012 中加载了这个，创建了一个 UserControl，添加了上面的样式。我观察到 Background 和 BorderBrush 属性被视为有效，但其他属性则无效。

然后...我注意到引用名称中的空格。删除后一切正常...

```
<UserControl.Resources>
    <Style x:Key="Datagrid" TargetType="{x:Type DataGrid}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HeadersVisibility" Value="Column"/>

        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="VerticalGridLinesBrush" Value="{StaticResource DatagridVerticalLinesBrush}"/>
        <Setter Property="HorizontalGridLinesBrush" Value="Transparent"/>
        <Setter Property="RowHeaderWidth" Value="0"/>
        <Setter Property="CanUserAddRows" Value="False"/>
        <Setter Property="CanUserDeleteRows" Value="False"/>
    </Style>
</UserControl.Resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:58:06.690

这可能是剪切/粘贴错误，但在除 Background 和 BorderBrush 之外的所有属性名称的右双引号之前有一个额外的空格。解析器可能会在反射之前修剪属性名称，以便它能够在运行时找到它。

# sql-server - 如何使用表名的同义词通过链接服务器截断表？

> ID：14822751
> 
> 赞同：4
> 
> 时间：2013-02-11T23:17:12.850
> 
> 标签：sql-server, tsql, linked-server, synonym, sp-executesql

我知道我可以做到以下几点：

```
EXEC Server_Name.DBName.sys.sp_executesql N'TRUNCATE TABLE dbo.table_name' 
```

但是如果我想为表使用同义词怎么办？

我在 SERVER1 上，我想使用表名的同义词截断 SERVER2 上的表。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-15T17:38:16.273

正确答案的链接已损坏。我遇到了类似的问题。我的解决方法是使用同义词表来查找基础表名，然后运行动态 sql 语句。据记载，同义词不能与 TRUNCATE 一起使用，但至少这是一个不错的解决方法。

```
DECLARE @TableName VARCHAR(500) = (SELECT TOP 1 base_object_name
    FROM Server_Name.DBName.sys.synonyms WHERE name = 'table_name')
DECLARE @Sql NVARCHAR(MAX) = 'EXEC Server_Name.DBName.sys.sp_executesql N''TRUNCATE TABLE ' + @TableName + ''''
EXEC sys.sp_executesql @Sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T13:12:11.393

在 Server2 数据库中为截断表创建一个存储过程，然后从 Server1 调用该存储过程。

像这样 ：-

执行 [Server2].[DBName].[SchemaName].sp_TruncateTable;

# iphone - UISlider 的奇怪行为

> ID：14822752
> 
> 赞同：1
> 
> 时间：2013-02-11T23:17:19.653
> 
> 标签：iphone, ios, objective-c, uitableview, uislider

我在 UITableViewCell 内以编程方式创建了一个 UISLider。滑块控件与音频文件一起使用以显示进度.. 这是创建：

```
 AudioSlider = [[UISlider alloc] initWithFrame:CGRectMake(78.0f, 28, 214, 10)];
    AudioSlider.maximumValue = 100.0;
    AudioSlider.minimumValue = 0.0;
    [AudioSlider setTag:5];
    [AudioSlider setValue:0.0];
    [[self contentView] addSubview:AudioSlider]; 
```

问题是滑块没有正确显示进度的开始和结束值！当我将值设置为 0.0 时：

```
[AudioSlider setValue:0.0];
[AudioSlider setValue:100.0]; 
```

照片说明问题 ![在此处输入图像描述](../Images/5478ff7fe5cdf0c4dfba762e260323be.png)

实在是查不出原因……

任何的想法 ？

提前致谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:27:13.947

您从问题中省略了一些重要的代码。从您的屏幕截图中可以清楚地看出，您可能通过使用透明图像使滑块的拇指不可见。

通常，滑块会覆盖这些末端，因此用户不会看到通道中颜色错误的部分。但是通过使拇指不可见，您已经使末端可见。

如果这真的应该是用户可以与之交互的滑块，则需要替换滑块的最小轨道图像和最大轨道图像，或者您需要使用隐藏末端的拇指图像。

如果这不应该是用户可以与之交互的控件，请使用`UIProgressView`而不是`UISlider`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:21:31.480

它在一个 tableView 中，所以我建议你在认为你是由于单元格出队时可能没有设置它。

你能展示创建和配置 UITableViewCells 的代码吗？

# javascript - jStorage 在某些 IOS Safari 浏览器中不起作用

> ID：14822761
> 
> 赞同：1
> 
> 时间：2013-02-11T23:17:49.817
> 
> 标签：javascript, jquery, jquery-mobile, mobile-safari, jstorage

我正在尝试在基于 jQuery Mobile 的网站上使用 jStorage。它在 Chrome、Firefox、Android、某些版本的 Mobile Safari 以及 Windows Phone 8 上的 IE 10 移动设备上运行良好。当我尝试设置任何值时，它会给我一个“未定义”错误。

例如，`$.jStorage.set("FBID", response.authResponse.userID);`

我在 iPhone 5 (Safari 6.1) 和 iPhone 4S (Safari 6.0) 上遇到了这个问题

在 Safari 上启用本地存储没有帮助。

你有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:57:51.027

发现问题.... localStorage 在打开隐私浏览时在 iOS 上不起作用。使用 jStorage 时，这会导致错误。使用以下 if 条件确保在私密浏览时不显示错误。

```
if($.jStorage.storageAvailable())
     $.jStorage.get(key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:04:18.970

如果你在网络上搜索“iOS 5 localstorage bug”，你会发现它在 Mobile Safari 中已经被破坏了一段时间。jStorage 利用 HTML5 本地存储，因此它不起作用。

# c++ - opengl 为什么我的矩形这么大而且倾斜？

> ID：14822763
> 
> 赞同：0
> 
> 时间：2013-02-11T23:17:53.527
> 
> 标签：c++, opengl

我有一个opengl项目，我只是想在屏幕上绘制一个红色矩形，问题是1）它很大，几乎占据了整个屏幕，2）它是倾斜的。我对opengl真的很陌生，所以我不了解坐标系，以及一些函数的作用，例如glOrtho（）函数。

这是代码：

```
void display()
{
   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

   glBegin(GL_QUADS);     
      glColor3f(1, 0, 0);  // NOT SURE WHERE THIS STARTS, AND HOW THE COORDINATES WORK
        glVertex2f(-1.0f, 1.0f); 
        glVertex2f( 1.0f, 1.0f);  
        glVertex2f( 1.0f,-1.0f);        
        glVertex2f(-1.0f,-1.0f);   
    glEnd();                  

   glFlush();
}

void init()
{
   glClearColor(0.0, 0.0, 0.0, 1.0);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   glOrtho(0, 10.0, 0, 10.0, -1.0, 1.0); //What does this do and how does it's coordinates work?
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
   glRotatef(30.0, 1.0, 1.0, 1.0);
   glEnable(GL_DEPTH_TEST);
}

int main(int argc, char *argv[])
{
    glutInit(&argc, argv);
    glutInitWindowSize(600, 600);
    glutInitWindowPosition(250, 250);
    glutInitDisplayMode(GLUT_RGB | GLUT_SINGLE | GLUT_DEPTH);
    glutCreateWindow("Model View");

    glutDisplayFunc(display);

   init();
    glutMainLoop();

    return 0;
} 
```

无论如何，我更愿意把它变成一种学习体验，所以请解释并链接到有帮助的东西！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T00:08:06.207

Procedure display is responsible for the actual drawing.

```
void display()
{ 
```

This line clears the *buffer*; the buffer is basically the memory are where the image is rendered; it is basically a matrix with width and height 600x600\. To *clear* means to set every cell of the matrix to the same value. Every cell is a *pixel* and contains a *color* and a *depth*. With this call you are telling OpenGL to paint everything opaque black, and to reset the depth to 1\. Why opaque black? Because of your call to **glClearColor**: the first three parameters are the red, green and blue component, and they can range between 0 and 1\. 0,0,0 means black. For the last component you specified 1, which means opaque; 0 would be transparent. This last component is called *alpha* and is used when *alpha blending* is enabled. Why the clear depth is 1? Because 1 is the default, and you didn't call [glClearDepth](http://www.opengl.org/sdk/docs/man/xhtml/glClearDepth.xml) to override that value.

```
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

This is telling OpenGL that you want to draw quadrilaterals.

```
 glBegin(GL_QUADS); 
```

You want these quadrilateral to be red (remember that the first component of a color is red).

```
 glColor3f(1, 0, 0);  // NOT SURE WHERE THIS STARTS, AND HOW THE COORDINATES WORK 
```

Now you list the vertices of the quadrilateral (it's only one, four vertices); all vertices will be red because you never update the color by calling **glColor3f**; you can associate a different color to every vertex, the final result is usually very cute if you pick red (1,0,0), green (0,1,0), blue (0,0,1) and white (1,1,1); this quadrilateral should appear to screen as a square, because it is a square geometrically, your window is a square, and the camera (defined with **glOrtho**) has a square aspect (first four parameters of the call to **glOrtho**). If you didn't call **glOrtho** you would probably see only red, because the default OpenGL coordinates range between -1 and 1 and so you are covering the entire window.

```
 glVertex2f(-1.0f, 1.0f); 
        glVertex2f( 1.0f, 1.0f);  
        glVertex2f( 1.0f,-1.0f);        
        glVertex2f(-1.0f,-1.0f); 
```

This means that you are done with drawing.

```
 glEnd(); 
```

Technically, it may be that OpenGL didn't send any of the commands you specified to the graphic card; commands may be enqueued for efficiency reason. Calling [glFlush](http://www.opengl.org/sdk/docs/man/xhtml/glFlush.xml) forces the command to be sent to the graphic card.

```
 glFlush();
} 
```

You wrote this function, *init* to initialize some of the OpenGL *states*, that you felt would remain stable across the application. In reality a real application like a game would have most of this stuff under display. For instance a game must continuously update the camera, as the player moves.

```
void init()
{ 
```

Here as we said before you are setting the clear color to be opaque black.

```
 glClearColor(0.0, 0.0, 0.0, 1.0); 
```

Here you are saying that the camera is not of a perspective type; basically things that are far away don't get smaller. It is similar to the view that an artificial satellite has of a city. In particular you are creating a camera which is not "centered" on the field of view: I recommend to use a call like **glOrtho(-10.0, 10.0, -10.0, 10.0, -1.0, 1.0)** for your first experiments. For a non perspective camera the coordinates that you specify here override the convention -1 to +1 that we mentioned above. Try to regulate the parameters such that your red square appears small, and centered.

```
 glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   glOrtho(0, 10.0, 0, 10.0, -1.0, 1.0); //What does this do and how does it's coordinates work? 
```

Here you are basically positioning the camera relative to the square, or the square relative to the camera; there are infinite ways to see it. You are defining a geometrical transformation, and the reason why it is called MODELVIEW is that it is not uniquely something that alters the *model* (the square) or the *view* (the camera) but both, depending on the way you see it. However, your square appears rotated because you are calling [glRotatef](http://www.khronos.org/opengles/sdk/1.1/docs/man/glRotate.xml); remove it and the square should appear like a square.

```
 glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
   glRotatef(30.0, 1.0, 1.0, 1.0); 
```

Depth test is a technique that uses the depth store in the buffer in order to remove hidden surfaces, for instance the back faces of a cube in a 3D scene. Your scene is 2D and you are drawing only a quad, so this is really non affecting your drawing.

```
 glEnable(GL_DEPTH_TEST);
} 
```

In the **main** you are interacting with *glut*, an optional subsystem which is not part of OpenGL but is useful to carry out some boring and tedious operations that only the operating system is authorized to perform.

```
int main(int argc, char *argv[])
{ 
```

First you must init *glut*.

```
 glutInit(&argc, argv); 
```

Then you define the window that will contain your rendering image.

```
 glutInitWindowSize(600, 600);
    glutInitWindowPosition(250, 250); 
```

GLUT_RGB means that your window only supports red, green and blue, and doesn't have an alpha channel (this is very often the case). GLUT_DEPTH means that your buffer will be able to store the depth of each pixel. GLUT_SINGLE means that the window is single buffered, that is your commands will directly draw on the window; another option is double buffering, where you actually draw on a *back* buffer, and then you swap *front* and back buffer so that the rendered image appears suddenly, and not in a progressive fashion. Your scene is so simple that you shouldn't notice any difference between GLUT_SINGLE and GLUT_DOUBLE.

```
 glutInitDisplayMode(GLUT_RGB | GLUT_SINGLE | GLUT_DEPTH); 
```

Then you actually create the window.

```
 glutCreateWindow("Model View"); 
```

You tell glut which function should be called to render the scene.

```
 glutDisplayFunc(display); 
```

Here you call your **init** function.

```
 init(); 
```

This is a window loop, provided by glut. Most windowing system require a software loop in order to keep the window alive, and able to respond to clicks, drags, resize and keyboard strokes.

```
 glutMainLoop();

    return 0;
} 
```

Long story short, several versions of OpenGL are available, and they can be programmed using several languages, and targeted to several platforms. The single most important difference between these versions is that some use a *fixed function pipeline* (FFP) whereas the newest versions have a *programmable pipeline*. Your program uses a fixed function pipeline. You should switch to a programmable pipeline whenever you can, because it is the modern way of doing computer graphics, and is *much* more flexible, even though it requires a little more programming, as the name suggests.

You should ignore the tutorials that I linked originally, I didn't immediately realized how outdated they were. You should go with [the one recommended by datenwolf](https://stackoverflow.com/questions/14822763/opengl-why-is-my-rectangle-so-big-and-tilted/#comment20779347_14823324) or, if you are interested in mobile development, you could consider learning OpenGL ES **2** (the 2 is important, because the previous version was fixed function). There is also a variant of OpenGL ES 2 for HTML5 and Javascript, called WebGL. You find the tutorials [here](http://learningwebgl.com/), together with a ZIP file containing all the examples; I use their codebase whenever I need to check if I understood a new concept.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:38:02.180

因为你看起来很有趣:)

您在 (1,1) 到 (-1,-1) //display() 中创建了一个红色方块

然后说相机将使用正交投影//glOrtho查看它（它创建一个投影矩阵，使用一个点来放置相机并给它一个方向）

并且可能通过 glRotating MODEL*VIEW* 稍微倾斜

PS您必须将gl命令视为发送到gl子系统的消息，这些消息会改变它的各种状态，场景中的内容，相机在哪里，灯光在哪里等等......等等......

# java - 使用等于检查对象数组

> ID：14822766
> 
> 赞同：1
> 
> 时间：2013-02-11T23:18:11.920
> 
> 标签：java, arrays, object, equals

首先我有两个像这样创建的对象......

```
Recipe recipeOne = new Recipe("Pepperoni Pizza");

    Ingredient one = new Ingredient("Dough", 1, UnitOfMeasurement.valueOf("Pounds"));
    Ingredient two = new Ingredient("Sauce", 8, UnitOfMeasurement.valueOf("Ounces"));
    Ingredient three = new Ingredient("Cheese", 10, UnitOfMeasurement.valueOf("Ounces"));

    recipeOne.addIngredient(one);
    recipeOne.addIngredient(two);
    recipeOne.addIngredient(three);

    RecipeBook.addRecipe(recipeOne);

    Recipe recipeTwo = (Recipe) recipeOne.clone();
    recipeTwo.addIngredient(recipeOne.Ingredients[0]);
    recipeTwo.addIngredient(recipeOne.Ingredients[1]);
    recipeTwo.addIngredient(recipeOne.Ingredients[2]);

    RecipeBook.addRecipe(recipeTwo);

    recipeTwo.setName("Pineapple Pizza"); 
```

这里没有惊喜，所有明显的事情都发生了，但是我想检查它们是否相等！我很想检查它们的所有元素，看看它们是否真的相等。所以我称之为“System.out.println(recipeOne.equals(recipeTwo));” 哪个会去这里...

```
public boolean equals(Object obj){

    if(obj instanceof Recipe){

        Recipe tempRec = (Recipe) obj;

        for(int j = 0 ; j < Ingredients.length ; j++){

            if(Ingredients[j].equals(tempRec.Ingredients[j]) == true){

                return true;

            }

        }

    }

    return false;

} 
```

现在我知道它是不完整的，只会检查 recipeOne 中的第一个成分“Ingredients[]”和 recipeTwo 中的第一个成分，副本“tempRec.Ingredients[]”。现在我的问题是，如何在发送“okay-of-equality”之前检查其余位置并确保它们都相等？有没有办法回到for循环并检查下一个点，也许存储所有的真值，然后当它们都被找出并最终返回真值时？我宁愿不写出 10 个 if 语句检查所有位置是否为空，然后检查成分是否相等，哈哈

（差点忘了我的 Ingredient.equals()，这里仅供参考，但效果很好！）

```
public boolean equals(Object obj){

    if(obj instanceof Ingredient){

        Ingredient tempIngred = (Ingredient) obj;

        if(Name.equals(tempIngred.getName()) && Quantity == (tempIngred.getQuantity()) &&
                unitOfMeasurement.equals(tempIngred.getUnit()))
                return true;

    }

    return false;   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:20:02.220

反转条件，并且仅`return true`在最后：

```
public boolean equals(Object obj){

    if (!obj instanceof Recipe) return false;
    if (obj == this) return true;

    Recipe tempRec = (Recipe) obj;

    for(int j = 0 ; j < Ingredients.length ; j++) {
        if(!Ingredients[j].equals(tempRec.Ingredients[j])) {
            return false;
        }
    }

    return true;
} 
```

更好的是，使用现有的库方法为您完成工作：[`Arrays.equals(Object[] a1, Object[] a2)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28java.lang.Object%5B%5D,%20java.lang.Object%5B%5D%29).

```
public boolean equals(Object obj){

    if (!obj instanceof Recipe) return false;
    if (obj == this) return true;

    Recipe tempRec = (Recipe) obj;
    return Arrays.equals(this.Ingredients, tempRec.Ingredients);
} 
```

# c# - 在视图中创建 ViewModel 的实例可以吗？

> ID：14822769
> 
> 赞同：3
> 
> 时间：2013-02-11T23:18:20.263
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, partial-views

例如，我有 Models: `Student`和`Course`. `Student`有个`List<Course> Courses{get;set;}`

**所有数据都已从 Web 服务中填充**

我有一个`Student/Index`返回一个 ActionResult 需要一个`StudentViewModel` 但我也有一个`Course/Index`View 返回一个 ActionResult 需要一个`CourseViewModel`

这应该为我的问题奠定基础：如果我遵循这个选项可以吗，我认为它非常简洁：`ViewModel`在`Student/Index`视图中创建 a 的实例

```
 @foreach(var course in Model.Courses)
    {
       Html.RenderPartial("path/tocourse", 
        new CourseViewModel{Course = course}) ;
    } 
```

或者我应该`StudentViewModel`有一个`List<CourseViewModel>`，所以我可以有：

```
@foreach(var courseViewModel in Model.CourseViewModels)
{
       Html.RenderPartial("path/tocourse", courseviewModel) ;
} 
```

乍一看，上面的内容可能看起来更好，但在`Index`操作（或其他）中，它需要我执行以下操作：

```
 new StudentViewModel{
            CourseViewModels = courses.Select(c=>new CourseViewModel{copy stuff}).ToList()
       } 
```

我讨厌这样，而且它可能会在以后让我或其他开发人员感到困惑，因为看到另一个间接方式让我可以访问 Courses，即`StudentViewModel.StudentModel.Courses`.

那么哪种方法更好呢？在a 中为此创建 a或 a的实例肯定不会*那么*糟糕？`ViewModel``Model``View`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:20:48.190

**这样做完全没问题。它不被认为是最佳实践。**最佳实践是在您的视图中尽可能少地进行处理或实例化。

为了 SOC，我将重构此代码以使用带有子操作方法的 Partials

```
Html.Action("path/tocourse"); 
```

Child Action 将实例化并传递模型，从而减轻您的 View。

```
[ChildActionOnly]
public ActionResult tocourse()
{

courseviewModel model = new courseviewModel();

    return PartialView(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:08:19.903

Ideally your view should not have any viewmodel instance logic rather the controller should do all that stuff and give that model to the view. View should be clean. And viewmodel should only have those properties that you need for the view. Now, you can have a model that is complex enough but if you find yourself that a particular model is very complex for your view, just make a viewmodel specific to that view with limited properties that your view needs.

# forms - 从 NetBeans .form 文件在运行时构建的 swing gui

> ID：14822778
> 
> 赞同：0
> 
> 时间：2013-02-11T23:18:54.477
> 
> 标签：forms, user-interface, netbeans

是否可以在运行时直接从 NetBeans .form 文件构建一个 swing gui？可以使用 Glade 生成的 xml 文件来构建 GTK GUI 或使用 QtDesigner 来构建 Qt GUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:05:21.150

可能的？也许。Netbeans 可以`.java` 从`.form`文件重新创建文件，并且由于 Netbeans 是开源的，理论上可以做一些事情。

实际上，我还没有看到这个功能，我认为它不会很容易实现。我想到的一些障碍是：

1.  必须记住，`.form`文件不保留有关控制接口行为的 Java 代码的信息（加载信息、`Listener`定义等）。

2.  在 Netbeans GUI 构建器的默认用法中，组件位于`private` 包含它们的框架/对话框中。如果我们想从外部处理这些组件，则必须更改默认`.form`->创建。`.java`

3.  Netbeans 源代码很大，我不希望拆分所需的模块很容易。

**选择**

我会看一下[JavaFX](http://docs.oracle.com/javafx/2/overview/jfxpub-overview.htm)和[Java FX Scene Builder](http://docs.oracle.com/javafx/scenebuilder/1/overview/jsbpub-overview.htm)，看看它们是否符合您的要求，因为它们是根据拆分 UI 定义和逻辑的想法创建的。

# c# - 如何使用 XAML 和 C# 根据当前位置选择垂直 ListView 项目？

> ID：14822782
> 
> 赞同：2
> 
> 时间：2013-02-11T23:19:33.313
> 
> 标签：c#, xaml, windows-8, winrt-xaml

我正在尝试做一些棘手的事情。我想通过确定是否`ScrollViewer`滚动以及该项目是否位于`ScrollViewer`. 当用户手动将其滚动到 ListView 的中心时，我想选择一个项目。我不想滚动到所选项目，因为那太容易了，对吧？

这是一张图：

![始终选择垂直 ListView 中的中心项](../Images/fc7e83a218a76bf41a452c6c26d2e845.png)

我设法检测到滚动条是否已滚动。首先，我在有问题的 ListView 上放置一个 Loaded 事件“itemsList”，并`ScrollViewer`通过遍历可视化树来查找类型以查看它是否已完成滚动并将其标记`ScrollViewer`到 ListView 并处理 SelectionChanged 事件：

```
private void ItemsList_OnLoaded(object sender, RoutedEventArgs e)
{
  var listView = (sender as ListView);
  if (listView != null)
  {
    var scrollers = FindVisualChildren<ScrollViewer>(sender as DependencyObject);
    var scrollView = scrollers.First();
    if (scrollView != null)
    {
      scrollView.Tag = listView;
      scrollView.ViewChanged += ScrollViewOnViewChanged;
      listView.SelectionChanged += listView_SelectionChanged;
    }
  }
}

public IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
{
  if (depObj != null)
  {
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
    {
      DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
      if (child != null && child is T)
      {
        yield return (T)child;
      }

      foreach (T childOfChild in FindVisualChildren<T>(child))
      {
        yield return childOfChild;
      }
    }
  }
} 
```

我处理`ScrollViewOnViewChanged`确定滚动查看器是否仍在滚动的事件。这是我遇到一些问题的地方，我还需要确定`ListViewItem`并选择它的位置 - 我希望在这里得到一些帮助：

```
private void ScrollViewOnViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
{
  //Debug.WriteLine("ScrollViewOnViewChanged + IsIntermediate="+e.IsIntermediate);

  var scrollviewer = sender as ScrollViewer;
  var listview = scrollviewer.Tag as ListView;

  if (!e.IsIntermediate)
  {
    Debug.WriteLine("IsIntermediate = false");
    // TODO: Determine the center Item and set is as the selected item for this group.
  }
} 
```

然后是`SelectionChanged`我创造奇迹的事件：

```
void listView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
  Debug.WriteLine("SelectionChanged");
} 
```

谢谢！任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:24:25.443

您可以使用 的方法获取中间的`InputHitTest`项目`ScrollViewer`。

例子：

```
IInputElement element = scrollViewer.InputHitTest(
    new Point(scrollViewer.Width / 2, scrollViewer.Height / 2)); 
```

# android - 如果尝试连续分享两次，socialauth android 将失败

> ID：14822785
> 
> 赞同：1
> 
> 时间：2013-02-11T23:19:41.707
> 
> 标签：android, socialauth

我已经实现了 2 种共享方法。用脸书和推特。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_menu);
    adapter = new SocialAuthAdapter(new ResponseListener());
}

public void twitter(View view) {
    adapter.authorize(this, SocialAuthAdapter.Provider.TWITTER);
}

public void facebook(View view) {
    adapter.authorize(this, SocialAuthAdapter.Provider.FACEBOOK);
}

private final class ResponseListener implements DialogListener {
    public void onComplete(Bundle values) {
        adapter.updateStatus("status");
        Log.e("a", "success");
    }

    public void onError(SocialAuthError error) {
        Log.e("a", "error");
    }

    public void onCancel() {
        Log.e("a", "cancel");
    }
} 
```

当我第一次单击任何共享按钮时，我会在日志和发布状态中获得“成功”。但是当我第二次点击它时，我有“成功”和“错误”，并且没有发布状态。

例外是

```
 02-12 01:16:40.158: WARN/System.err(12526): org.brickred.socialauth.exception.SocialAuthException: org.brickred.socialauth.exception.SocialAuthException: Status not updated. Return Status code :400
02-12 01:16:40.158: WARN/System.err(12526): at org.brickred.socialauth.provider.FacebookImpl.updateStatus(FacebookImpl.java:276)
02-12 01:16:40.158: WARN/System.err(12526): at org.brickred.socialauth.android.SocialAuthAdapter$4.run(SocialAuthAdapter.java:414)
02-12 01:16:40.158: WARN/System.err(12526): at java.lang.Thread.run(Thread.java:856)
02-12 01:16:40.158: WARN/System.err(12526): Caused by: org.brickred.socialauth.exception.SocialAuthException: Status not updated. Return Status code :400
02-12 01:16:40.158: WARN/System.err(12526): at org.brickred.socialauth.provider.FacebookImpl.updateStatus(FacebookImpl.java:271)
02-12 01:16:40.158: WARN/System.err(12526): ... 2 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:20:43.740

您正在尝试两次发布相同的消息。Facebook 和 twitter 将其视为垃圾邮件，不允许这样做。发布不同的消息，它会成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T10:13:13.250

我遇到了同样的问题，我自己解决了。

只需在 TwitterImpl.java -> updateStatus 函数（第 279 行）上查找并注释/删除以下代码

```
if (serviceResponse.getStatus() != 200) {
    throw new SocialAuthException("Failed to update status on " + url + ". Status :" + serviceResponse.getStatus());
 } 
```

参考号：[https ://github.com/3pillarlabs/socialauth-android/issues/24](https://github.com/3pillarlabs/socialauth-android/issues/24)

# ios - 检查字符的Unicode值范围

> ID：14822793
> 
> 赞同：4
> 
> 时间：2013-02-11T23:20:09.507
> 
> 标签：ios, objective-c, string, unicode, unicode-escapes

在 Objective-C 中...

如果我有一个像“Δ”这样的字符，我怎样才能得到 unicode 值，然后确定它是否在某个值范围内。

例如，如果我想知道某个字符是否在 to 的 unicode 范围`U+1F300`内`U+1F6FF`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:52:09.433

`NSString`使用 UTF-16 在内部存储代码点，因此您要查找的范围内的代码点 ( `U+1F300`to `U+1F6FF`) 将存储为[*代理对*](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)（四个字节）。尽管它的名字，`characterAtIndex:`(and `unichar`) 不知道代码点，并且会给你它在你给它的索引处看到的两个字节（`55357`你看到的是UTF-16 中代码点的*主要代理）。*

要检查原始代码点，您需要将字符串/字符转换为 UTF-32（直接对其进行编码）。为此，您有几个选择：

1.  获取构成代码点的所有 UTF-16 字节，并使用[此算法](http://www.unicode.org/faq//utf_bom.html#utf16-3)或[`CFStringGetLongCharacterForSurrogatePair`](https://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/func/CFStringGetLongCharacterForSurrogatePair)将代理对转换为 UTF-32。

2.  使用`dataUsingEncoding:`或`getBytes:maxLength:usedLength:encoding:options:range:remainingRange:`将 转换`NSString`为 UTF-32，并将原始字节解释为`uint32_t`.

3.  使用像[ICU](http://site.icu-project.org/)这样的库。

# cmake - CMake 生成 -L -l 静态库的链接标志

> ID：14822794
> 
> 赞同：9
> 
> 时间：2013-02-11T23:20:11.917
> 
> 标签：cmake, static-libraries, static-linking

我正在使用 CMake 2.8 来构建基于 MQX OS 的应用程序（使用 CodeWarrior）。
CMake 项目基本上构建了一组静态库（比如说 LIB1 和 LIB2）。
然后我在最终的可执行 cmake 规则中引用这些库：

```
target_add_executable(X ${some_sources})
target_link_libraries(X LIB1 LIB2) 
```

我的问题是一些符号是在多个库中定义的。
因此，像这样的链接命令：

```
mwldarm <args> -o <output> <objects> /path/to1/libLIB1.a /path/to2/libLIB2.a 
```

会导致多重定义符号错误。相反，我希望 CMake 生成如下链接命令：

```
mwldarm <args> -o <output> <objects> -L/path/to1 -L/path/to2 -lLIB -lLIB2 
```

**问题：如何从 CMAKE 中获取以下变量？**

*   库目录标志（例如 `-L/path/to1 -L/path/to2`：）
*   库链接标志（例如`-lLIB -lLIB2`：）

我已经阅读了有关 RPATH 的内容，但它似乎只涉及共享库。我对吗？

感谢提前。
我很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:12:44.613

看来[CMP0003](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#policy%3aCMP0003)政策可能是您所需要的。

要使用它，请在您的开头附近添加以下行`CMakeLists.txt`：

```
CMAKE_POLICY( SET CMP0003 OLD ) 
```

另一种可能性是直接设置依赖项和搜索路径，但这不是最干净的方式。假设您的库被称为`liba.a`and `libb.a`，那么：

```
LINK_DIRECTORIES( ${paths_to_search_for} )
TARGET_ADD_EXECUTABLE(X ${some_sources} )
ADD_DEPENDENCIES(X LIB1 LIB2)
TARGET_LINK_LIBRARIES(X a b ) 
```

请注意，在这种情况下`a`，并且`b`不是 cmake 目标，因此需要一些机器来正确设置依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T22:02:40.183

CMake 的部分设计是它与完整路径链接。为什么这是个问题？

使用策略切换行为不是正确的方法。

[http://www.cmake.org/gitweb?p=cmake.git;a=commitdiff;h=cd4fa896b](http://www.cmake.org/gitweb?p=cmake.git;a=commitdiff;h=cd4fa896b)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-15T04:46:57.297

我认为[CMP0003](http://www.cmake.org/cmake/help/v3.0/policy/CMP0003.html)用于打开/关闭自动添加搜索路径的功能，如官方文档中所述

> 通过完整路径链接的库不再生成链接器搜索路径。

而不是用 . 替换路径名`-l`。

链接库时，如果该库是已知的目标 CMake，则 CMake 始终将相关`-L`和`-l`选项替换为库的路径名。对于链接静态库，这可能不是问题。但是对于链接共享库的可执行文件来说，这可能是个问题。然后我找到了一种黑客方法，代码如下，解决使用`-L`和'-l'而不是绝对路径链接一个线程库的问题。

```
# Find out the link.txt      
set(LINK_TXT "${CMAKE_BINARY_DIR}/${ToLinkLib}/CMakeFiles/${ToLinkLIb}.dir/link.txt")

# Add the searching path into link command
add_custom_command(TARGET ${YourTarget} PRE_BUILD
  COMMAND sed ARGS -ie "\"s;[[:blank:]]-l; -L${LIBRARY_OUTPUT_PATH} -l;\"" ${LINK_TXT}
  DEPENDS ${LINK_TXT}
  COMMENT "Hacking CMake: edit __link.txt__ to use -l instead of path to link internal library ...")

# NOTE: Dont't missing the `-l'. 
target_link_libraries(${YourTarget} -l${ToLinkLib}) 
```

当然，这只是一种黑客行为，因此可能不适用于所有版本的 CMake。

* * *

**更新**：*为什么链接共享库可能是一个问题？*

当我运行为 android 交叉编译的可执行文件时，它链接由相同 CMake 脚本构建的共享库，我遇到了链接失败的问题。在我使用上述黑客方法获取新版本后，我可以使用如下命令运行我的可执行文件

```
 $ LD_LIBRARY_PATH=. ./the_exe opts 
```

# c# - 如何从 javascript Cinnamon 或 Gnome Shell 小程序加载 C# 库？

> ID：14822795
> 
> 赞同：1
> 
> 时间：2013-02-11T23:20:13.790
> 
> 标签：c#, .net, interop, gnome-shell, gjs

我想在我的 javascript 代码中加载并使用 C# 库到 Cinnamon 小程序。
关于如何做的任何想法？

# javascript - 在对象数组中查找特定键值

> ID：14822799
> 
> 赞同：2
> 
> 时间：2013-02-11T23:20:27.490
> 
> 标签：javascript, arrays, node.js

这是代码：

```
var groups = {
    "JSON":{
        "ARRAY":[
            {"id":"fq432v45","name":"Don't use me."},

            {"id":"qb45657s","name":"Use me."}
        ]
    }
} 
```

我想获取 id 为“qb45657s”的名称值，这如何实现？我想通了所有数组的明显循环并检查它是否相等，但有没有更简单的方法？

编辑：我无法将“数组”更改为对象，因为我需要知道它的长度以用于不同的功能。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T23:24:39.293

您可以简单地过滤给定的 id：

```
groups["JSON"]["ARRAY"].filter(function(v){ return v["id"] == "qb45657s"; }); 
```

这将返回`[{"id":"qb45657s","name":"Use me."}]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:29:13.020

假设您有一个像这样的有效 JSON 字符串（注意我说有效，因为您需要一个封闭`{}`或`[]`使其有效）：

```
var json = '{"JSON":{
        "ARRAY":[
            {"id":"fq432v45","name":"Don't use me."},
            {"id":"qb45657s","name":"Use me."}
        ]
    }
}'; 
```

您只需将其解析为像这样的实际对象：

```
var jsonObj = JSON.parse(json); // makes string in actual object you can work with
var jsonArray = jsonObj.JSON.ARRAY; // gets array you are interested in 
```

然后像这样搜索它：

```
var needle = 'qb45657s';
var needleName;
for (var i = 0; i < jsonArray.length; i++) {
    if (jsonArray[i].id === needle) {
        needleName = jsonArray[i].name;
    }
} 
```

# c - 将数字附加到 LPCTSTR

> ID：14822803
> 
> 赞同：0
> 
> 时间：2013-02-11T23:20:39.497
> 
> 标签：c, string, winapi

如何将数字附加到 LPCTSTR？我正在使用的库采用 LPCTSTR 作为 com 端口地址。我知道如何使用 char* 来做到这一点，但不知道如何使用 LPCTSTR。这就是我想要做的（假设 sprintf 与这些一起工作，我知道它没有）

```
LPCTSTR PortString;
int ComPortNumber;

sprintf(PortString,"COM%d",ComPortNumber); 
```

这样完成后，如果 9 存储在 ComPortNumber 整数中，LPCTSTR PortString 将包含“COM9”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:27:41.680

您可以使用 tchar.h 中的安全版本。

```
TCHAR PortString[32];
int ComPortNumber;

_stprintf_s( PortString, 32, _T("COM%d"), ComPortNumber ); 
```

[http://msdn.microsoft.com/en-us/library/ce3zzk1k%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ce3zzk1k%28VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T23:24:00.807

带有 LPCTSTR 的 API 将该参数声明为常量字符串，以向您表明它不会修改给定的字符串。您仍然可以将非常量字符串传递给此 API。

所以你可以这样做：

```
CHAR PortString[32];
int ComPortNumber;

sprintf(PortString,"COM%d",ComPortNumber); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:31:47.290

LPCTSTR 是指向 TCHAR 的指针 - 换句话说，是指向字符串的指针。在您提供的代码片段中，它指向一些随机的内存区域，并且运行代码是未定义的行为，因为您通过取消引用未初始化的指针来访问一些随机的内存区域。

试试这个代码：

```
TCHAR PortString[64];
int ComPortNumber;

/* assign some value to ComPortNumber here */

_sntprintf_s(
    PortString,                       // The buffer for the output
    sizeof(PortString)/sizeof(TCHAR), // The number of TCHARs in the buffer
    _TRUNCATE,                        // How to handle overflows
    _T("COM%d"),                      // The format string
    ComPortNumber);                   // And the port number, finally! 
```

我使用了`T`调用和类型的变体来确保您的代码可以在 ANSI/MBCS 和 UNICODE 模式下编译，并使用新的“安全”变体`_sntprintf`来帮助减少缓冲区溢出的机会。

在实际生产代码中，您应该检查`_sntprintf_s`调用的返回地址是否存在错误。

最后一点：注意**不要**返回`PortString`给调用此函数的任何人，因为它是基于堆栈的，并且当此函数退出时，缓冲区将消失。如果你这样做，你的程序会在你调试/测试时崩溃，如果你幸运的话。如果你不走运，它可能*看起来*工作正常，但它会是一个定时炸弹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T23:25:15.047

`LPCTSTR`只是 a `const TCHAR *`，当您接受它作为参数时使用它。

您可能希望将字符串分配为数组。此外，使用通用文本映射：

```
TCHAR PortString[20];
int ComPortNumber;

_stprintf(PortString,_T("COM%d"),ComPortNumber); 
```

并包括 tchar.h。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T23:28:22.330

LPCTSTR 是 const char* 或 const wchar_t* 的 typedef。就像使用 char* 但使用[_stprintf](http://msdn.microsoft.com/en-us/library/ybk95axf%28v=vs.80%29.aspx)一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T23:25:56.357

如果你真的想用`TCHAR`东西：

用于[`_stprintf`](http://msdn.microsoft.com/en-us/library/ybk95axf%28v=vs.110%29.aspx)填充`TCHAR`缓冲区，该缓冲区应该是一个数组：

```
TCHAR PortString[32]; /* as another answer says */ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-11T23:26:25.987

您可以创建一个`CString`，然后当您完成向其附加内容后，您可以调用[`CString::operator LPCSTR() const`](http://msdn.microsoft.com/en-us/library/aa300569%28v=vs.60%29.aspx) 它以从中获取`LPCSTR`。

# sql - 在插入 SQL 数据库之前检查重复项

> ID：14822804
> 
> 赞同：3
> 
> 时间：2013-02-11T23:20:41.573
> 
> 标签：sql

所以我一直在做一些研究，我需要编写一个`INSERT`语句来将唯一的客户端名称插入到我服务器上的一个表中。然而，数据库的默认标准已经有数千个客户端，当插入新客户端时，我们需要在尝试将其添加到系统之前检查它们是否已经存在。

我的问题是最好/最快的方法是什么？在客户表上运行一个简单的选择查询（按 ASC 排序），然后对结果进行二分搜索或其他操作，或者只执行类似于下面的 SQL 查询会更好吗？

```
IF NOT EXISTS (SELECT 1 FROM clients AS c WHERE c.clientname = ?)
BEGIN
  INSERT INTO clients (clientname, address, ...)
  VALUES (?, ?, ...)
END 
```

这是一个缓慢的陈述吗？每次提交时，我可能必须运行数百次插入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:23:15.147

如果您希望给定列是唯一的，则标准建议是创建一个 UNIQUE 约束。

```
ALTER TABLE clients ADD UNIQUE KEY (clientname); 
```

然后尝试进行INSERT，如果没有匹配行会成功，如果有重复则会失败。不需要 SELECT。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T23:55:07.107

在查询中根据磁盘操作计算 SQL 的成本并不少见（通常这意味着读/写一个块（通常 8 KB）是您的成本单位）。（在 Memory-DBs 中应该改变这种思路）。

如果您有成百上千个项目，并且每个项目......比如说 20 字节，那么您的完整数据库可能适合磁盘上的单个块（400 个项目/块）。也许它需要更多的街区，但万岁：这是一个可以忽略的小数字。使用这么小的数据库，您的数据库可能会在数据库的内存缓存中闲逛，您只需要为写访问付费。随着数据库的增长，如果您有索引，您需要的块访问数量可以成倍减少。

如果数据库中已经存在项目，则您的解决方案和 Bill 的解决方案都不会导致任何写入访问，因此它应该同样快。

有趣的部分是：

> 每次提交时，我可能必须运行数百次插入。

这意味着您可能会在磁盘上写入同一个块数百次。如果您可以一步完成，那会更快。但是，这确实是一个问题，因为我不知道任何允许这种行为的 SQL 函数。MySQL 的 INSERT 提供了一种在单个语句中指定多个值的方法。这*可能*是一个相当大的优势（我不知道 MySQL 如何处理这种情况），但它是 MySQL 特有的，并且不可移植。

另一种加快速度的方法是不要等到您更改的块被写入磁盘。这可能会在没有通知的情况下丢失数据，但可以显着提升性能。同样，这是特定于您使用的 DBMS。例如，如果您将 MySQL 与 InnoDB 一起使用，您可以`innodb_flush_log_at_trx_commit=0`在 my.ini 中设置选项来归档此行为。

> 最好在客户表上运行一个简单的选择查询（按 ASC 排序），然后对结果进行二进制搜索或其他操作

这会不必要地将大量数据从您的 DBMS 复制到客户端（可能位于不同的机器上，通过网络协议进行通信）。对于您的小型数据库，这仍然可以，但它不能很好地扩展。只有当它可以帮助您在单个操作中将数据保存到磁盘时，它才有用。

# python - 计算（或查找）股票的基本财务数量

> ID：14822815
> 
> 赞同：1
> 
> 时间：2013-02-11T23:21:41.373
> 
> 标签：python, finance

我见过许多编写代码的方法（例如，在 python 中：[ystockquote](http://goldb.org/ystockquote.html)）返回特定股票的股价（或历史收盘价）。有没有一种方法可以编写用于计算各种基本数量的信息：[企业价值](http://en.wikipedia.org/wiki/Enterprise_value)、EBITDA（我知道这包含在那个 python 链接中）、自由现金流……等等。

我在问是否有可以ping通以返回此类信息的命令行工具（或足够的相关信息可以自己进行计算）？类似于收益表/债务/现金流/税收的存储库。

在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:05:52.977

JBW,

您可以通过多个步骤执行此操作，但您必须投入一些时间来使用 API 并识别来自公司的财务数据。

1) 识别公司的 CIK 2) 从 SEC FTP 下载 XBRL 文件 3) 使用提供的数字来计算您正在寻找的指标 3*) 一些公司已经在 XML 中包含这些值

FTP 信息：[http](http://www.sec.gov/edgar/searchedgar/ftpusers.htm) ://www.sec.gov/edgar/searchedgar/ftpusers.htm XBRL 规范：[http ://www.sec.gov/info/edgar/nsarxml1_d.htm](http://www.sec.gov/info/edgar/nsarxml1_d.htm)

我希望这有帮助。

弗拉基米尔

# mysql - DataGridview 和 MySQL 使用复选框删除行

> ID：14822825
> 
> 赞同：0
> 
> 时间：2013-02-11T23:22:49.743
> 
> 标签：mysql, vb.net, datagridview

我有一个 Datagridview，我想删除我的 MySQL 数据库中的一行。

我有一些代码，但我收到一个错误，它说 ID 为空。我的 ID 是一个字符串，它是检查列的 ID 的值。我的第一列“第 0 列”是一个复选框列

这是代码：

如果您不明白我在问什么，请随时提出具体问题。

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)        Handles Button2.Click
Dim RowsToDelete As New List(Of DataGridViewRow)

Try
For Each row As DataGridViewRow In DataGridView1.Rows

If row.Cells(0).Value = True Then

DeleteRow(row.Cells(1).Value)
RowsToDelete.Add(row)
End If
Next
Catch ex As Exception
MessageBox.Show(ex.ToString)
End Try

For Each rowtodelete In RowsToDelete
DataGridView1.Rows.Remove(rowtodelete)

next       

End Sub

Private Sub DeleteRow(ByVal ID As Integer)
Dim MySQLCon As New MySqlConnection
Dim ConnectionString As String = "server=localhost;user id=root;password=;database=business elements"

MySQLCon.ConnectionString = ConnectionString
Dim CMD As MySqlCommand
MySQLCon.Open()
Try
CMD.Connection = MySQLCon
CMD.CommandText = "DELETE FROM `users` WHERE `ID` = " & ID

Catch ex As Exception

End Try

MySQLCon.Close()
MySQLCon.Dispose()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:43:31.880

在没有看到所有代码的情况下，这样的事情应该可以工作：

```
Dim sql as String

sql = "DELETE FROM `users` WHERE `ID` IN ("

For Each row As DataGridViewRow In DataGridView1.Rows
    If row.Cells(0).Value = True Then
        ID = row.Cells(1).Value
        DeleteRow(row.Cells(1).Value) 
        RowsToDelete.Add(row)
        sql += ID + ","
    End If
Next

If sql.Left(sql.Length-1) = "," Then
   CMD.CommandText = sql.Left(sql.Length-1) + ")"
   CMD.Connection = MySQLCon
   CMD.ExecuteNonQuery()
End If 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:13:18.187

终于找到了代码：

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 Button2.Click Dim RowsToDelete 作为新列表(Of DataGridViewRow)

```
 Try
        For Each row As DataGridViewRow In DataGridView1.Rows

            If row.Cells(0).Value = True Then

                DeleteRow(row.Cells(1).Value)
                RowsToDelete.Add(row)
            End If
        Next
    Catch ex As Exception
        MessageBox.Show(ex.ToString)
    End Try

    For Each rowtodelete In RowsToDelete
        DataGridView1.Rows.Remove(rowtodelete)

    Next

End Sub

Private Sub DeleteRow(ByVal ID As Integer)
    Dim MySQLCon As New MySqlConnection
    Dim ConnectionString As String = "server=localhost;user id=root;password=;database=business elements"
    MySQLCon.ConnectionString = ConnectionString
    Dim CMD As New MySqlCommand
    CMD.CommandText = "DELETE FROM `users` WHERE `ID` = " & ID
    MySQLCon.Open()
    Try
        CMD.Connection = MySQLCon

        CMD.ExecuteNonQuery()

    Catch ex As Exception

    End Try

    MySQLCon.Close()
    MySQLCon.Dispose()
End Sub 
```

# php - PHP处理重复元素

> ID：14822835
> 
> 赞同：0
> 
> 时间：2013-02-11T23:23:42.393
> 
> 标签：php, domdocument

我对图像有疑问。

当用户单击图像时，我尝试添加图像 ID，并且该 ID 将保存到 DB。

当页面重新加载时，具有 id 属性的图像将在 img 标签中显示 id。

我识别具有 id 属性的图像的方式是基于图像 src。但是，我刚刚发现有很多重复的图像，我的代码将为所有重复的图像添加一个 id 属性。

我只想在用户单击的图像中添加 id 属性。

我的代码

`this.id`是图像的新 id 属性，它是从 DB 生成的。

```
//click image codes....
//assign the id to the clicked image (not all duplicated images)
this.img.attr('id',this.id); 
```

当页面重新加载...

```
 $doc = new DOMDocument();
 $doc->loadHTML($myHtml);

          $imageTags = $doc->getElementsByTagName('img');

          //get the images that has id attribute from DB
          $imgSource=$this->imgSource;    //imgSource is an array
          $imgID=$this->imgID;            //imgID is an array

          //search the htmlstring and add the id attribute to the images
          foreach($imageTags as $tag) {
            $source=$tag->getAttribute('src');

           //if the html contains the image that has id attribute..
              if(in_array($source, $imgSource)){

               $ids=array_keys($imgSource,$source);
               foreach($ids as $id){
                  $tag->setAttribute('id',$imgID[$id]);
                  $myHtml=$doc->saveHTML();
                }
              }
            }
          } 
```

我上面的代码会将 id 分配给 id 存储在 DB 中的图像。但是，它也会将 id 分配给所有重复的图像。我需要区分那些重复的图像，就我而言，我只能在 php 中做到这一点。这个问题把我逼疯了！如果有人可以帮助我，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:21:11.163

如果问题是区分重复，那么避免它们的适当部分是更改将 id 添加到重复图像的代码，不是吗？

我不完全理解您发布的 PHP 代码如何与 id 一起使用，但我想`$this->imgSource`是`$this->imgID`这样的：

```
$this->imgSource = array(
  [0] => 'src/image/a',
  [1] => 'src/image/b',
  [2] => 'src/image/c',
  [3] => 'src/image/a'
);
$this->imgID = array(
  [0] => 111,
  [1] => 222,
  [2] => 333,
  [3] => 444
); 
```

所以`$source`它`'src/image/a'`什么时候会做类似的事情：

```
$tag->setAttribute('id', 111);
$tag->setAttribute('id', 444); 
```

如果这是您想要避免的，我建议删除 id 值以防止再次使用它。

```
$ids = array_keys($imgSource, $source);
foreach($ids as $id) {
    if(isset($imgID[$id])) {
        $tag->setAttribute('id', $imgID[$id]);
        $myHtml = $doc->saveHTML();
        unset($imgID[$id]);
        break;
    }
} 
```

# iphone - 尝试从 TableView 传递到 UIWebview 会导致崩溃

> ID：14822836
> 
> 赞同：0
> 
> 时间：2013-02-11T23:23:42.513
> 
> 标签：iphone, uiwebview, storyboard

正如您在标题中看到的那样，我遇到了一个小问题。我正在将 MWParser 用于 RSS 提要。我编辑了当您单击 RSS 标题时的代码，它会在应用内浏览器中打开。这是代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (_webViewController == nil) {
        self.webViewController = [[[WebViewController alloc] initWithNibName:@"WebViewController" bundle:[NSBundle mainBundle]] autorelease];
    }

    MWFeedItem *entry = [parsedItems objectAtIndex:indexPath.row];
    _webViewController.entry = entry;
    [self.navigationController pushViewController:_webViewController animated:YES];

    // Deselect
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

但是，我收到此崩溃消息：

```
2013-02-11 18:21:15.644 GlennKessler[24209:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/Hugo/Library/Application Support/iPhone Simulator/6.1/Applications/7F35D6C0-BFBE-4CD9-A1CE-7DC54CD6B249/GlennKessler.app> (loaded)' with name 'WebViewController'' 
```

据我所知，发生这种情况是因为我使用的是 Storyboard，而不是 NIB。如何让它在故事板中打开运行 WebViewController 中代码的视图？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:30:46.947

将 [NSBundle mainBundle] 替换为 nil，因为 nib 位于默认包中，并确保 nib 文件 (WebViewController.nib) 位于打包应用程序的 Bundle 中

# python - 使用 Grinder 时未定义名称“磨床”

> ID：14822837
> 
> 赞同：0
> 
> 时间：2013-02-11T23:23:56.880
> 
> 标签：python, jython, grinder

Grinder 对我来说是新的，我试图弄清楚如何摆脱这个错误：

我的 test.py 脚本：

```
import string
import random
from java.lang import String
from java.net import URLEncoder
from net.grinder.plugin.http import HTTPRequest
from net.grinder.common import GrinderException

log = grinder.logger.info
stat = grinder.statistics.forLastTest

SERVER = "http://www.google.com"
URI = "/"

class TestRunner:
        def __call__(self):
                requestString = "%s%s" % (SERVER, URI)
                request = HTTPRequest()
                result = request.GET(requestString)
                if string.find(result.getText(), "SUCCESS") < 1:
                        stat.setSuccess(0) 
```

我跑

```
java net.grinder.Console
java net.grinder.Grinder 
```

在我的本地主机中。开始测试后，此消息不断弹出：

```
aborting process - Jython exception, <type 'exceptions.NameError'>: name 'grinder' is not defined [initialising test script]
net.grinder.scriptengine.jython.JythonScriptExecutionException: <type 'exceptions.NameError'>: name 'grinder' is not defined
    log = grinder.logger.info
    File "./test.py", line 8, in <module> 
```

看起来我必须为这个“grinder.logger.info”包含一些 Grinder 模块，但我不知道我应该导入什么......

有什么提示吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:32:16.917

你从磨床进口物品，而不是磨床本身，试试

```
import grinder.logger.info
import grinder.statistics.forLastTest 
```

也可能是这样`net.grinder.logger.info`，`net.grinder.statistics.forLastTest`如果是这种情况，那么您的代码将需要更改以适应从磨床到 net.grinder 的更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T11:43:03.697

你没有进口磨床。

```
from net.grinder.script.Grinder import grinder 
```

现在再试一次。

# r - 在 1 个数据框中删除具有多个市场的市场数据

> ID：14822844
> 
> 赞同：1
> 
> 时间：2013-02-11T23:24:36.447
> 
> 标签：r, dataframe, data-management

我需要的是一种检查我的 df 以查看我是否有足够的数据来运行某些功能的方法。如果该特定市场没有足够的数据，我想知道如何删除整个“市场”。例如，我想删除所有 AD3，因为当我需要 4 行数据时，我只有 2 行完整的数据。在我的实际案例中，我希望删除任何少于 23 行数据的市场，并且我有 100 多个市场。

这是`dput()`我的数据的一小部分。

```
data<-structure(list(market = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 3L, 3L), .Label = c("AD1", "AD2", "AD3"), class = "factor"), 
date = structure(c(15623, 15624, 15625, 15628, 15623, 15624, 
15625, 15628, 15625, 15628), class = "Date"), open = c(101.52, 
101.68, 102.1, 101.99, 100.73, 100.85, 101.57, 101.01, 100.56, 
100.42), high = c(102.07, 102.39, 102.36, 102.07, 101.4, 
101.59, 101.62, 101.35, 100.56, 100.71), low = c(101.26, 
101.56, 101.63, 101.5, 100.59, 100.85, 101.07, 100.97, 100.56, 
100.41), last = c(101.78, 102.08, 101.76, 101.91, 101.08, 
101.37, 101.06, 101.21, 100.41, 100.56)), .Names = c("market", 
"date", "open", "high", "low", "last"), row.names = c(1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 11L, 12L), class = "data.frame", na.action = structure(9:10,.Names = c("9", 
"10"), class = "omit")) 
```

我的 100 多个市场在 1 个数据框中。因此，如果我有 22 行数据，我需要删除与该特定“市场”名称关联的所有 22 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:48:42.493

@Marius 更快，但我的解决方案几乎相同：

```
N <- 3 # threshold
range <- names(which(table(data$market)>=N))
ans1 <- data[data$market %in% range,]
ans1 
```

但是，如果您要在大型数据集上分析 100 多个市场，您最好使用以下方法`data.table`来加快速度：

```
require(data.table)
dt <- data.table(data)
setkey(dt, market)
ans2 <- dt[J(range)]
ans2 
```

结果相似：

```
all.equal(ans1,ans2,check.attributes=F)
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:33:37.567

用于`table`计算每个市场的出现次数，从那里开始非常简单：

```
min_data_points <- 4
market_tab <- table(data$market)
markets_to_keep <- names(market_tab)[market_tab >= min_data_points]

fixed_data <- subset(data, market %in% markets_to_keep) 
```

# javascript - jquery 对象执行对象的分配功能

> ID：14822846
> 
> 赞同：2
> 
> 时间：2013-02-11T23:24:43.553
> 
> 标签：javascript, jquery, function, object

这是一个简化版本。

如果我做这样的事情：

```
var object = [{name:"bob", type:"silly", hair:"brown", func:someFunction},
              {name:"greg", type:"serious", hair:"blonde", func: differentFunction}]; 

$('#thing').bind("click", object[0], handleTranslator);

function handleTranslator(e){
    $([e.data.func]);
}

function someFunction(){
    console.log("clicking bob should trigger this function");
}

function differentFunction(){
    console.log("clicking greg should trigger this function");
} 
```

当我单击#thing 时，它应该会触发`someFunction`，但不会。不知道为什么。

理想情况下，我还希望能够从内部查看 (console.log) 我的 object[0] `someFunction`。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:30:27.110

你没有调用你的函数：

```
function handleTranslator(e){
    e.data.func();
} 
```

演示：http: [//jsfiddle.net/CEdvt/](http://jsfiddle.net/CEdvt/)

# ios - Rubymotion 企业版

> ID：14822848
> 
> 赞同：1
> 
> 时间：2013-02-11T23:24:45.500
> 
> 标签：ios, rubymotion, ad-hoc-distribution, enterprise-distribution

如何将一个版本发布到暂存环境或为 Enterprise/Ad Hoc 分发创建一个版本？

这与 AppStore 版本不同，需要不同的配置文件，以及可选的不同捆绑 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:11:32.453

您需要在您的文件中添加一个条件，`Rakefile`并确保您拥有所有正确的证书和所需的每种构建类型的配置文件。

```
 app.release do    
    if ENV['staging'] == "true"
      app.codesign_certificate = "iPhone Distribution: Your Company's Enterprise Certificate"
      app.provisioning_profile = "distribution/Enterprise.mobileprovision"
      app.identifier = "com.yourcompany.appnameenterprise"
    else
      app.codesign_certificate = "iPhone Distribution: Your Company's App Store Release Certificate"
      app.provisioning_profile = "distribution/AppStore.mobileprovision"
      app.identifier = "com.yourcompany.appname"
    end
  end 
```

要设置暂存`ENV`变量，我有另一个设置它的 rake 任务：

```
task :set_staging do
  ENV['staging'] = "true"
end 
```

然后实际发布：

```
desc "Release Enterprise build"
task :enterprise_release => [
  :set_staging,
  "archive:distribution",
] 
```

# java - 使用 BaseAdabter 自定义 ListView

> ID：14822856
> 
> 赞同：1
> 
> 时间：2013-02-11T23:25:41.917
> 
> 标签：java, android, listview, baseadapter

我正在我的 Android 应用程序中开发带有图像和文本视图的自定义列表视图，但是，我完全按照此链接中的教程进行操作：http: [//theopentutorials.com/tutorials/android/listview/android-custom-listview-with -image-and-text-using-baseadapter/#Project_Folder_Structure](http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-baseadapter/#Project_Folder_Structure) 。在引用放置在可绘制文件中的图像时，我在 ListActivity 类中遇到了一个问题，这是我的代码：package com.Android.mysmartrecipeassistant;

```
import android.R;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;

public class BookListActivity extends Activity implements OnItemClickListener
{
public static final String[] recTitles = new String[] { "Cheese Salad",
    "Burger and Fries", "Chicken", "Sandwiches", "Potato Sauce" };
public static final Integer[] recImgs = new Integer[] {R.drawable.recipe, R.drawable.salad};

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub

}

} 
```

我的问题在于以下行：

```
public static final Integer[] recImgs = new Integer[] {R.drawable.recipe, R.drawable.salad}; 
```

尽管我将图像放置在可绘制对象中，但我的代码看不到这些图像并指示错误（图像无法解析或不是字段）

无论如何，我还没有完成这个类的代码。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:36:20.723

我建议从 baseAdapter 扩展并通过 getView 方法将所有需要的逻辑放在那里。

另外，请观看“ [listView 的世界](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”讲座，了解更多关于如何使用listViews 的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:38:23.407

而不是导入android.R；导入 {your.package}.R;

# php - 如何使用 jquery、ajax、php 和 mysql 异步更新表、删除表中的条目？

> ID：14822858
> 
> 赞同：1
> 
> 时间：2013-02-11T23:26:01.957
> 
> 标签：php, jquery, mysql, asynchronous

好的，所以我有一个使用 php 基于 mySQL 表构建表的页面：

表格.php

```
$page .='<form method="POST" action="processing.php">';
$page .= "<table> \n";
$page .= "<tr>\n";  
$page .= "<th>ID</th> \n <th>First Name</th> \n <th>Last Name</th> \n <th>PhoneNumber</th> \n <th>Email</th> \n";

//Loops through each contact, displaying information in a table according to login status
$sql2="SELECT cID, firstName, lastName, phoneNum, email FROM Contact WHERE oID=".$_GET['orgID'];
$result2=mysql_query($sql2, $connection) or die($sql1);
while($row2 = mysql_fetch_object($result2))
{
    $page .= "<tr>\n";
    $page .= "<td>".$row2->cID."</td>\n";
    $page .= "<td>".$row2->firstName."</td>\n";
    $page .= "<td>".$row2->lastName."</td>\n";
    $page .= "<td>".$row2->phoneNum."</td>\n";
    $page .= "<td>".$row2->email."</td>\n";
    //Will only display these buttons if logged in
    $page .= '<td><input type="checkbox" name="checkedItem[]" value="'.$row2->cID.'"></input></td>'."\n";
    $page .= "<td>".makeLink("addEditContact.php?cID=".$row2->cID, "Edit")."</td>\n";
    $page .="</tr>";
}

$page .= "</table>";
//Two buttons sending to processing.php to decide what to do with selected values from there
$page .= '<input name="addToContacts" type="submit" value="Add Selected Contacts To Contact List" />'."\n" ;
$page .= '<input name="deleteContacts" type="submit" value="Delete Selected Contacts" />'."\n";
$page .= "</form>\n";
mysql_close($connection); 
```

因此，基于复选框，我可以选择将联系人添加到另一个表，或从该表中删除联系人，方法是首先将此表单的信息发送到 processing.php 页面，该页面决定单击哪个按钮并重定向到正确的 php 脚本：

处理.php：

```
if(!empty($_POST['checkedItem']))
{
    //Because addToContacts and deleteContacts take in GET instead of POST for convinience, it needs to take all of checkItems and implode it
    $var=$_POST['checkedItem'];
    ksort($var);
    $joinedString= implode(',',$var);
    //Since there are two buttons in orgDetail, it checks for which was pushed and sends it to the correct page
    if(!empty($_POST['addToContacts']))
    {
        header('Location: addToContacts.php?cID='.$joinedString);
    }

    else if($_POST['deleteContacts'])
    {
        header('Location: deleteContacts.php?cID='.$joinedString);
    }
}
else
{
    //Error for not selecting any items
    $page .= makeP("You have not checked off any items. Please click ".makeLink( $currentPage, "here")." to return to previous page");
} 
```

而且因为我现在只对删除联系人案例感兴趣。这是 deleteContacts.php

```
$explodedString=explode(',',$_GET['cID']);

    foreach($explodedString as $eString)
    {
        $sql1="DELETE FROM Contact WHERE cID='".$eString."'";
        mysql_query($sql1, $connection) or die($sql1);
    }
header('Location: '. $currentPage); 
```

所以从这里开始变得复杂。当我希望页面同步工作时，这很好用。它在 php 脚本周围反弹，一切都很好。如果我想使用 jquery 直接从 tables.php 中删除怎么办。所以我的意思是，它将运行 mysql 查询以从实际数据库中删除条目，并且在它更新 table.php 中的表视图以反映该更改之后；全部异步完成？

（请忽略所有 sql 查询都不是转义字符串的事实，我意识到这一点，我将不得不稍后修复）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T18:38:02.557

如果您需要在没有 javascript 的情况下支持该表，请先使其正常工作

在不启用 Javascript 的情况下使表格保持最新的唯一方法是刷新页面并在每次加载时重新绘制表格。

# c# - 模型事件触发的 ViewModel 中的 WPF MVVM PropertyChanged 通知

> ID：14822859
> 
> 赞同：2
> 
> 时间：2013-02-11T23:26:19.260
> 
> 标签：c#, wpf, data-binding, mvvm, mvvm-light

我在理解如何将模型类中的属性更改事件通过 ViewModel 向上传播到视图中时遇到问题。我正在尝试符合 MVVM 模式，所以请记住这一点。

我有一个试图通过 ViewModel 公开的模型。我的模型类查询 Api 调用以获取服务器状态并在公共属性中公开该状态。前任：

```
public class ServerStatusRequest : ApiRequest
{
    //Exposable properties by request
    public ServerStatusHelperClass Status { get; set; } 
```

Where`ServerStatusHelperClass`只是查询中组合结果的包装器：

```
public class ServerStatusHelperClass
{
    public bool ServerStatus { get; set; }
    public int OnlinePlayers { get; set; } 
```

我的 ApiRequest 基类最酷的地方在于它检查特定 Api 调用的缓存时间并使用 System.Timers.Timer 更新结果。因此，例如，ServerStatus Api 调用在 Api 上缓存了 3 分钟，因此每 3 分钟我的`ServerStatusApiRequest`对象就会有新的数据。我`UpdatedResults`在所有 ApiRequest 类中公开一个事件，以便在新数据进入时进行通知。

现在我希望我的 ViewModel 有一个实例`ServerStatusApiRequest`并绑定到它的`ServerStatusHelperClass Status`属性，并在每次更新信息时保持最新的更改，但是我的视图（用于绑定）不知道我的模型，因此，不不知道我`UpdatedResults`在`ApiRequest`课堂上的活动。如何通过我的 ViewModel 将其反映到视图中？我在这里做一些完全奇怪的事情吗？

这是我所拥有的半工作但我觉得这是一个非常*hacky*的解决方案：

在我的视图模型中：

```
 public const string EveServerStatusPropertyName = "EveServerStatus";
    private ServerStatusRequest _eveServerStatus = new ServerStatusRequest();
    public ServerStatusRequest EveServerStatus
    {
        get
        {
            return _eveServerStatus;
        }
        set
        {
            //if (_eveServerStatus == value)
            //{
            //    return;
            //}

            //RaisePropertyChanging(EveServerStatusPropertyName);
            _eveServerStatus = value;
            RaisePropertyChanged(EveServerStatusPropertyName);
        }
    }

    public void UpdateEveServerStatus(object sender, EventArgs e)
    {
        EveServerStatus = (ServerStatusRequest)sender;
    } 
```

在 ViewModels 构造函数中，我订阅了模型的事件：

```
EveServerStatus.UpdatedResults += new UpdatedResultsEventHandler(UpdateEveServerStatus); 
```

如您所见，这似乎非常多余。而且我还遇到了一个问题，我不得不注释掉 setter 中的检查，`EveServerStatus`因为那时它`_eveServerStatus`已经更新为`value`只是在它不知道的情况下，我还是想触发该事件。

我觉得我在这里错过了一个关键概念，以便更容易地将这一切联系在一起。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:56:53.360

我遇到了一种更好的方法来实现我正在寻找的行为。这是我的 ViewModel 中的代码：

```
 private ServerStatusRequest _eveServerStatus = new ServerStatusRequest();

    public ServerStatusRequest EveServerStatus
    {
        get
        {
            return _eveServerStatus;
        }
    } 
```

我的 ViewModel 和我的 View 都不应该更改这些数据。在我的`ServerStatusRequest`班级中，我有一个属性公开`ServerStatusHelperClass`对象，如问题所示。我已更改`ServerStatusHelperClass`并使其实现`INotifyPropertyChanged`如下：

```
public class ServerStatusHelperClass : ObservableObject
{
    private bool _serverStatus;
    public bool ServerStatus
    {
        get
        {
            return _serverStatus;
        }
        set
        {
            _serverStatus = value;
            RaisePropertyChanged("ServerStatus");
        }
    }
... 
```

`ObservableObject`只是一个`INotifyPropertyChanged`从 mvvmlight 为我实现的简单类。

通过这样做，当我的`ApiRequest`类修改它的`ServerStatusHelperClass`对象时，我的视图会自动更新。

欢迎对此解决方案提出意见。

# javascript - 打印创建的 iframe 内容。空白页

> ID：14822864
> 
> 赞同：0
> 
> 时间：2013-02-11T23:26:33.887
> 
> 标签：javascript, iframe, printing, joomla2.5

我有一个功能，但我找不到它为什么打印空页。也只有 Opera 打印不是空页，它打印所有页面。不仅仅是 iframe。在 Chrome 中，如果我使用 srcdoc，我没有问题。请提供任何帮助

```
function printpage(src){
//create new image tag
var newImg = new Image();
newImg.onload = function(){ loading(); };
newImg.src = src;
newImg.style.height = "100%";
newImg.style.width  = "100%";

var ifrm = null;
ifrm = document.getElementById('iframe');
if(ifrm==null){
    ifrm = document.createElement("IFRAME"); 
    ifrm.style.width=853+"px";
    ifrm.style.height=1024+"px";
    ifrm.style.display="none";
    ifrm.id = "iframe";
    ifrm.name = "iframe";
    ifrm.width = ifrm.height = 0;
    document.body.appendChild(ifrm);
}else{
    //ifrm.contentWindow.Reset();
    document.body.appendChild(ifrm);
}
var s = '<img src ="'+src+'" width="100%" height="100%" ></img>'+
            '<script>'+
                'function printMe(){ '+
                  'window.print();'+
                  '}'+
            '</script>';
ifrm.src = "data:text/html;charset=utf-8," + escape(s);

console.log("new ifrm is ",ifrm);

var frameContent = (ifrm.contentWindow || ifrm.contentDocument || ifrm.window);

console.log("frameContent",frameContent);
frameContent.focus();
frameContent.print(); 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T17:58:09.560

我发现了问题：

```
ifrm.style.display="none"; // The browser can't print content which is not displayed. 
```

我通过使用隐藏元素`ifrm.style.visibility="hidden";`

# magento - Magento Soap API 在本地工作但不在远程工作

> ID：14822866
> 
> 赞同：4
> 
> 时间：2013-02-11T23:26:37.327
> 
> 标签：magento, soap, wsdl

我为 Magento Enterprise 1.11 创建了一个自定义 API。通过 Soap v1 调用 API 在我的本地开发环境中运行良好，但是我无法从本地环境调用远程环境。

在我的 localdev 上使用 PHP 交互式 shell：

```
php > $client = new SoapClient(WSDL_URI,array('trace'=>1));
php > $client->login(API_USER,API_KEY);
php > var_dump($client->__getLastResponse());
string(538) "<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:Magento" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:loginResponse><loginReturn xsi:type="xsd:string">f0eec73e49665aaf9cc4a6644fba5dc6</loginReturn></ns1:loginResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

我已经能够从本地主机以及在我的开发机器上运行的两个本地虚拟机之间成功地做到这一点。我也可以毫无问题地访问我的自定义 API 的方法。

但是，当我尝试为我的远程测试环境创建一个肥皂客户端时，我能够创建客户端，但是对 $client->login() 的调用或任何后续调用都会导致以下结果：

```
php > $client = new SoapClient(REMOTE_WSDL_URI,array('trace'=>1));
php > $client->login(API_USER,API_KEY);
PHP Warning:  Uncaught SoapFault exception: [WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://REMOTE_HOST/index.php/api/index/index/wsdl/1/' : failed to load external entity "http://REMOTE_HOST/index.php/api/index/index/wsdl/1/" in php shell code:1
Stack trace:
#0 php shell code(1): SoapClient->__call('login', Array)
#1 php shell code(1): SoapClient->login(API_USER, API_KEY)
#2 {main}
php > var_dump($client->__getLastRequestHeaders());
string(255) "POST /index.php/api/index/index/ HTTP/1.1
Host: REMOTE_HOST
Connection: Keep-Alive
User-Agent: PHP-SOAP/5.3.18-1~dotdeb.0
Content-Type: text/xml; charset=utf-8
SOAPAction: "urn:Mage_Api_Model_Server_HandlerAction"
Content-Length: 550

php > var_dump($client->__getLastResponseHeaders());
string(840) "HTTP/1.1 500 Internal Service Error
Date: Mon, 11 Feb 2013 19:06:56 GMT
Server: Apache/2.2.16 (Debian)
X-Powered-By: PHP/5.3.19-1~dotdeb.0
Set-Cookie: PHPSESSID=7uqrcmiv96hroubnb1uu7c7cm6; expires=Wed, 13-Feb-2013 01:06:56 GMT; path=/; domain=.REMOTE_HOST; HttpOnly
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: CUSTOMER=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.REMOTE_HOST; httponly
Set-Cookie: CUSTOMER_INFO=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.REMOTE_HOST; httponly
Set-Cookie: CUSTOMER_AUTH=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.REMOTE_HOST; httponly
Content-Length: 468
Vary: Accept-Encoding
Connection: close
Content-Type: text/xml; charset=utf-8

php > var_dump($client->__getLastResponse());
string(468) "<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body><SOAP-ENV:Fault><faultcode>WSDL</faultcode><faultstring>SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://REMOTE_HOST/index.php/api/index/index/wsdl/1/' : failed to load external entity "http://REMOTE_HOST/index.php/api/index/index/wsdl/1/"
</faultstring></SOAP-ENV:Fault></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

当我点击 //REMOTE_HOST/index.php/api/?wsdl 时，我得到了标准的 Magento WSDL。

这两个环境 99.99% 相同：

*   服务器版本：Apache/2.2.16 (Debian)（本地开发和远程）
*   PHP 5.3.18（本地开发）5.3.19（远程主机）
*   Apache/PHP 配置相同。
*   代码库相同

我已经在互联网上搜索了线索，包括：

*   [http://www.magentocommerce.com/boards/viewthread/56528/](http://www.magentocommerce.com/boards/viewthread/56528/)
*   [http://www.magentocommerce.com/wiki/5__-_modules_and_development/web_services/overriding_an_existing_api_class_with_additional_functionality#wsdl](http://www.magentocommerce.com/wiki/5_-_modules_and_development/web_services/overriding_an_existing_api_class_with_additional_functionality#wsdl)
*   [由于“加载外部实体失败”，无法连接到 Magento SOAP API v2](https://stackoverflow.com/questions/6454644/unable-to-connect-to-magento-soap-api-v2-due-to-failed-to-load-external-entity)
*   [Magento API SOAP-ERROR: Parsing WSDL: Couldn't load from '[url]/index.php/api/index/index/?wsdl=1' : 找不到开始标签第 56 行的结尾](https://stackoverflow.com/questions/12538343/magento-api-soap-error-parsing-wsdl-couldnt-load-from-url-index-php-api-in)
*   [http://www.magentocommerce.com/api/soap/introduction.html](http://www.magentocommerce.com/api/soap/introduction.html)

我已经尝试了最后一个链接中提到的“Content-Length”标头修复，以及我能想到的几乎所有其他内容……难住了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T01:01:56.940

虽然您可以从您的计算机加载 WSDL URL ( `http://REMOTE_HOST/index.php/api/index/index/wsdl/1/`)，但您的远程服务器无法通过其`REMOTE_HOST`.

PHP 的 SoapServer 对象（由 Magento 的实现使用）需要联系 WSDL 以了解公开了哪些方法。

由于我一直无法弄清楚的原因，服务器无法访问自己的 DNS 条目是一种常见的网络配置。通过 SSH 连接到您的服务器并尝试运行以下命令

```
curl http://REMOTE_HOST/index.php/api/index/index/wsdl/1/ 
```

我的猜测是您会遇到网络超时或`REMOTE_HOST`未知错误。修复您的配置，以便您的服务器可以访问自己，并且一切都应该开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-25T12:36:53.317

您可以尝试更改主机 DNS 名称服务器。

```
vim /etc/resolv.conf to add Google's 8.8.8.8, 8.8.4.4 
```

# java - 像素阵列过于 CPU 密集型

> ID：14822867
> 
> 赞同：2
> 
> 时间：2013-02-11T23:26:54.947
> 
> 标签：java, graphics, 2d, game-engine, raster

我从事 Java 2D 游戏已经有一段时间了。它是一个带有像素（整数）数组的光栅图形系统。

```
private BufferedImage image = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);
private int[] pixels = ((DataBufferInt) image.getRaster().getDataBuffer()).getData(); 
```

然后，我分别创建一个整数数组，使用屏幕对象（从外部图像文件，如 .png 渲染）对其进行操作，然后将该数组复制到我的主数组中，该数组投影在屏幕上。我发现在迭代中使用数组复制方法没有性能差异（并且真的没想到）。无论如何，图形渲染良好，游戏进展顺利。

但是，我发现这非常占用 CPU。我的活动监视器说应用程序正在使用超过 100% 的 CPU。这显然是因为我每次更新（每秒 60 次）都遍历一个像素数组（76k 整数）。

我选择这种技术是出于教育目的。这是一个个人项目，我只是想深入了解 Java 图形。我绝不会嫁给这种渲染技术。

我的问题分为三个相关部分......

1.  显然有更好的方法来做到这一点。哪些库/框架会做得更好？
2.  这些库本质上会做同样的事情（循环遍历像素），只是以更有效的方式吗？
3.  有没有一种方法可以在不使用外部工具的情况下优化这项技术，还是不值得？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T23:40:15.897

OpenGL 最常与 3D 图形应用程序相关联，但它也可用于 2D 应用程序。使用正交投影和带纹理的四边形来代替精灵和背景图像，您可以构建完全没有 3D 元素的游戏的图形和界面，尽管事实上绘图是在某种意义上完成的3D。

我没有在 Java 中使用 OpenGL 的经验。但是，我知道可以使用[LWJGL](http://www.lwjgl.org/)库和其他可能的库。如果您想大幅提高图形性能，您应该检查一下。

要回答您的第二个问题，此应用程序中的 OpenGL 实际上与您的方法非常不同，它使用与在 3D 中绘制纹理多边形相同的技术，而不是将简单的块图像传输到帧缓冲区，尽管*可以*访问和操作像素数据。

这是一个使用 OpenGL 和 C 的 2D 图形示例，来自一个我从未完成的游戏项目，但仍然可以作为我正在谈论的一个很好的视觉示例。在这种情况下，我没有使用正交投影，而是使用透视矩阵，通过在 3D 空间中绘制不同深度的各个层来获得视差效果。

![使用 OpenGL 的 2D 图形示例](../Images/230311fe79add6b4ac0c97d426af7714.png)

# ruby-on-rails - 如何在 Rails 中使用 ruby -progressbar？

> ID：14822868
> 
> 赞同：2
> 
> 时间：2013-02-11T23:26:55.970
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我想在 Rails 3.2.11 中为我的控制台脚本使用[ruby ​​-progressbar。](https://github.com/jfelchner/ruby-progressbar)我添加`gem 'ruby-progressbar'`到 Gemfile 并运行`bundle install`.

它`uninitialized constant ProgressBar`会在我尝试使用它时显示。

如果我这样做`require 'ruby-progressbar'`，则会显示以下错误：

`LoadError: cannot load such file -- ruby-progressbar from /Users/evgenyneu/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-12T15:55:03.147

宝石： [https ://rubygems.org/gems/ruby-progressbar](https://rubygems.org/gems/ruby-progressbar)

你需要写一些：

```
require 'progressbar'
pbar = ProgressBar.new('data processing', some_long_data_array.length)
some_long_data_array.each do |data|
  data.process 
  pbar.inc
end
pbar.finish 
```

# android - Android：根据语言更改启动画面

> ID：14822870
> 
> 赞同：0
> 
> 时间：2013-02-11T23:27:04.067
> 
> 标签：android, image, splash-screen

我有一个具有不同启动画面的应用程序。一个用于意大利语，一个用于英语。如何设置我的应用程序以根据系统语言选择正确的图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:29:28.667

您可以将不同的可绘制对象和布局放在不同的资源目录中，例如：

```
res/drawable-en/
res/drawable-it/
res/layout-en/
res/layout-it/ 
```

`en`英语和`it`意大利语。最好将“默认”资源保留在没有语言说明符的标准目录中。

如果您将这些目录中的实际文件命名为相同的名称，那么系统将根据用户的区域设置自动选择正确的文件。

有关详细信息，请参阅[Android 文档](http://developer.android.com/training/basics/supporting-devices/languages.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T23:34:59.010

[http://developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html)

您可以使用多个资源文件夹，它将根据设备区域设置/配置加载图像

具有前缀的文件夹将自动检测/加载本地

例如

```
res/layout-en/
res/layout-it/ 
```

# moodle - 在 SCORM 课程中使用 PHP

> ID：14822873
> 
> 赞同：0
> 
> 时间：2013-02-11T23:27:19.940
> 
> 标签：moodle, scorm

我正在通过 SCORM 为 Moodle 1.9 创建一个在线课程。我已经决定使用 SCORM 确实是按照我想要的方式设计课程的唯一方法。它不需要在任何其他 LMS 中工作，只需一个；所以我不担心全面的兼容性。

在 SCORM 课程中使用 PHP 文件的最佳方式是什么？

我试过直接链接到一个外部 PHP 文件，它确实“工作”，但返回到 SCORM 文件有点奇怪。我必须添加这个晦涩的路径：

```
<a href="http://example.com/file.php/3/moddata/scorm/2/scormcontent/complete.html">complete course</a> 
```

虽然我没有做太多的测试，但以上在技术上是可行的。但是，我想知道在 SCORM 中使用 HTML 和 javascript 以外的任何内容时的最佳实践是什么。请帮忙！

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:42:24.397

我理解您的目标，但 SCORM 的关键点之一是可移植性（“S”代表“可共享”）。因此，SCORM 课程中明确禁止使用服务器端代码，因为您永远不知道 LMS 将支持哪些服务器端代码。

SCORM 需要一个纯客户端解决方案，使用 JavaScript 处理课程到 LMS 的通信。在 SCORM 课程中没有使用 PHP（或任何其他服务器端语言）的“最佳方式”，并且通过使用 PHP，您的课程将不符合 SCORM。

如果你想使用服务器端代码，也许你应该考虑 AICC 而不是 SCORM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T18:41:40.697

我 100% 同意上面 pipwerks 的回答。但是，如果您绝对确定要执行您所描述的这种“hack”，我建议您将 SCORM 内容与 ajax 请求链接到您的 php 文件，以便体验对用户尽可能透明. 当然，您还应该能够从 SCORM 的文件夹中上传和执行 php 文件（我不确定 moodle 是否支持这一点）。

# spring - JavaMailSender SMTP 反弹 - 不同的域电子邮件地址

> ID：14822874
> 
> 赞同：2
> 
> 时间：2013-02-11T23:27:29.913
> 
> 标签：spring, smtp, jakarta-mail, email-bounces

我正在使用 Spring java 邮件程序类向我的用户发送电子邮件消息：org.springframework.mail.javamail.JavaMailSenderImpl 版本 1.4，使用 Spring 框架 3.0.7.RELEASE。

我想为失败的电子邮件设置退回消息，以发送到我的用户的电子邮件地址，该地址与我的 smtp 服务器的域不同。有谁知道实现这一目标的方法？例如：我的系统向 email-does-not-exist@gmail.com 发送电子邮件。我的 smtp 服务器配置为具有域 somebusiness.com。失败后，将退回邮件发送给我的用户：test.user@gmail.com。

我多次阅读以下文章： [指定电子邮件的退回地址](https://stackoverflow.com/questions/2667620/specifying-the-bounce-back-address-for-email)

我尝试使用他们设置 mail.smtp.from 属性的方法，但它根本不会发送任何电子邮件（甚至还没有计算来自无效电子邮件的退回尝试）。

```
Properties p = new Properties();
p.put("mail.smtp.from", "test.user@gmail.com"); //If I comment this out, it sends emails again
mailSender.setJavaMailProperties(p);
Session session = Session.getDefaultInstance(p, null);
MimeMessage mimeMessage = new MimeMessage(session);

MimeMessageHelper helper = new MimeMessageHelper(mimeMessage,
                false, "utf-8");
mimeMessage.setContent(emailBody, "text/html");
helper.setTo(toAddress);
helper.setSubject(subject);
helper.setFrom(fromAddress);
mailSender.send(mimeMessage); 
```

有人知道为什么吗？显而易见的答案似乎是我们使用的 smtp 服务器正在阻止它，但我希望有其他潜在的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:41:47.947

我有一个类似的问题。我还没有解决方案，但目前我正在考虑替换 Spring 的邮件包，`org.apache.commons.mail`因为它有一个简单的`setBounceAddress(emailAddressString)`方法。

请参阅用户指南的最后部分“处理退回的消息”：

[http://commons.apache.org/proper/commons-email//userguide.html](http://commons.apache.org/proper/commons-email//userguide.html)

和 API 文档：

[http://commons.apache.org/proper/commons-email//apidocs/org/apache/commons/mail/Email.html#setBounceAddress(java.lang.String)](http://commons.apache.org/proper/commons-email//apidocs/org/apache/commons/mail/Email.html#setBounceAddress(java.lang.String))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T16:03:48.950

我刚刚检查了 Apache Commons Mail 如何实现它的退回功能，它实际上只是设置了发件人地址。这意味着您可以在 Spring Mail 中通过 setFrom(...) 在`org.springframework.mail.javamail.MimeMessageHelper`类上执行相同的操作。

类的源代码片段`org.apache.commons.mail.Email`：

```
if (this.bounceAddress != null) {
    properties.setProperty(MAIL_SMTP_FROM, this.bounceAddress);
} 
```

在来源中看到它：http: [//grepcode.com/file/repo1.maven.org/maven2/org.apache.commons/commons-email/1.2/org/apache/commons/mail/Email.java#539](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.commons/commons-email/1.2/org/apache/commons/mail/Email.java#539)

# sql - 带回退的 SQL 联接

> ID：14822875
> 
> 赞同：1
> 
> 时间：2013-02-11T23:27:31.160
> 
> 标签：sql, sql-server

给定

```
CREATE TABLE Addresses
    Id INT NOT NULL
    Zip NVARCHAR(5) NULL    
    ZipPlus4 NVARCHAR(9) NULL

CREATE TABLE ZipLookup
    Zip NVARCHAR(5) NULL    
    Code NVARCHAR(10) NULL

CREATE TABLE ZipPlus4Lookup
    ZipPlus4 NVARCHAR(9) NULL    
    Code NVARCHAR(10) NULL 
```

和像这样的数据

```
Addresses
1 | 92123 | 921234444

ZipLookup
92123 | Type A

ZipPlus4Lookup
921234444 | Type B 
```

是否可以构造这样的查询：

*   如果存在匹配，地址中的给定行外部连接到 ZipPlus4Lookup

    Addresses.ZipPlus4 = ZipPlus4Lookup.ZipPlus4

*   否则，如果存在匹配项，则 Addresses 中的给定行外部连接到 ZipLookup

    Addresses.Zip = ZipLookup.Zip

*   否则两个表都不是外部连接的

*简单来说，Addresses 表有一个 Zip 和一个 ZipPlus4 列，我需要使用最精确的匹配来查找代码。如果 Zip+4 有匹配项，请使用该匹配项中的代码。否则，请使用 Zip 匹配中的代码。*

我希望我有一个尝试共享的查询，但是对于这个我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T23:32:42.847

这个基本查询将起作用：

```
SELECT
   A.*,
   Code = IsNull(Z4.Code, Z.Code)
FROM
   dbo.Addresses A
   LEFT JOIN dbo.ZipPlus4Lookup Z4
      ON A.ZipPlus4 = Z4.ZipPlus4
   LEFT JOIN dbo.ZipLookup Z
      ON A.Zip = Z.Zip
      AND Z4.ZipPlus4 IS NULL; 
```

或者你可以尝试这样的事情：

```
SELECT
   A.*,
   Z.Code
FROM
   dbo.Addresses A
   OUTER APPLY (
      SELECT TOP 1 Code
      FROM (
         SELECT 0, Code FROM dbo.ZipPlus4Lookup Z4
         WHERE A.ZipPlus4 = Z4.ZipPlus4
         UNION ALL
         SELECT 1, Code FROM dbo.ZipLookup Z
         WHERE A.Zip = Z.Zip
      ) X (Seq, Code)
      ORDER BY X.Seq
   ) Z; 
```

它们可能具有不同的性能特征。值得测试。我的猜测是第二个查询是不必要的，但从概念上讲它仍然可以更好。

[在 SQL Fiddle 中](http://sqlfiddle.com/#!6/cd3a3/1)查看这些操作。

# java - 如何检查一个arrayList 以查看它是否包含另一个arrayList 的一部分？

> ID：14822877
> 
> 赞同：0
> 
> 时间：2013-02-11T23:27:36.203
> 
> 标签：java, pseudocode

查找商店中的哪些商品与列表中的商品匹配。将此列表保存为迄今为止的最佳项目列表

那就是我需要翻译成java代码的伪代码中的那一行。我有两个列表，一个叫做 itemsNeeded，一个叫做 itemsFound。我需要查看 itemsNeeded 列表是否包含 itemsFound 列表中的任何项目。然后我需要保存该列表。谁能证明这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:33:50.780

你可以采取蛮力的方法并这样做......

假设您有一个列表来存储匹配项，称为 saveList。我还假设列表中的项目是字符串类型，但这应该适用于任何对象。

```
for(String item : itemsNeeded) {
  if(itemsFound.contains(item)) {
    saveList.add(item);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:42:32.580

您可以使用：[http ://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html)

predicatedCollection 方法

和一个带有 itemsNeeded 列表的 EqualPredicate

# xpages - 寻找使用 xAgents 的完整示例来挑选并在我的应用程序中使用

> ID：14822882
> 
> 赞同：0
> 
> 时间：2013-02-11T23:28:03.367
> 
> 标签：xpages

我对 xPages 非常陌生，并且一直在阅读有关 xAgents 的信息。我需要写一个，但有点困惑如何开始。诸如一旦编写完成后如何调用它之类的事情。代码放在哪里，能不能用库代码，java代码。. .

有没有人有我可以看到的完整样本，所以我可以开始使用这个？我的大部分代码都写在 xPage 中，但出于安全原因，需要将其放入带有 sessionAsSigner 的 xAgent 中以访问其他数据。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T02:53:49.023

您的第一站将是创造术语 XAgent 的[原始文章](http://www.wissel.net/blog/d6plinks/shwl-7mgfbn)（另请查看文章末尾的链接）。根据您的输出，[XMl Helper 类](http://www.wissel.net/blog/d6plinks/SHWL-8MRM48)也可能很有用。

**更新/澄清：** XAgent 是一种**前端**编程技术，而不是后端工具。XAgent 从浏览器（或其他使用 HTTP(s) 的设备）调用，因此需要最终用户可以访问（当然 ACL 也适用）。对于您的程序调用的功能，您可以使用 bean 和/或 SSJS 库

但退后一步：

*   XAgent 首先是 XPage。所以XPage 的*所有*规则都适用：
*   您**通过 URL 调用它**，没有调度或事件工具。XAgent 是 ?OpenAgent URL 命令的替代品，**而不是**其他代理用例
*   XAgent**始终可以从外部访问**，这是它的唯一目的，而不是后端调用的设备
*   由于您对 XAgent 的访问是通过 URL 进行的，因此这不是一种安全方法，安全性是使用 ACL、Readers 和 Authors 完成的。小心使用 sessionAsSigner，如果这是你的默认设置，你需要重新审视你的访问控制想法
*   由于您自己渲染所有 XAgent 输出，因此典型用例是仅获取 XPage 输出流并将其传递给 Java（托管）bean 的函数调用

您可能想要查看的内容（再次：重新审视您的安全模型）是从 XPage 运行代理（会带来性能损失），或者只是为您的敏感部分使用托管 bean

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:47:06.970

在 xAgent 中使用 sessionAsSigner 可能会导致严重的安全问题。当匿名用户知道您的 xagent 的 url 时，他可以使用它从不允许这样做的用户那里检索数据。

xAgent 正在检索数据，以某种（可能）的 json 或 xml 结构显示数据，然后您的调用网站正在解析这些数据。因此，知道您的 xagent 的 url 的用户可以使用此代理来检索他不允许查看的数据。（如果我写了一个 php 脚本，用不同的参数调用你的代理 100 次呢？）

我认为最好的方法是将一个简单的 onclick 方法绑定到一个按钮，或者可能是一个 onchange，它在显示验证结果的面板上进行部分刷新。

# plist - 从 plist 中检索数据

> ID：14822885
> 
> 赞同：0
> 
> 时间：2013-02-11T23:28:16.687
> 
> 标签：plist

`好的，我正在尝试从我创建的 plist 文件中提取问题和可能的答案

```
<key>Question1</key>
<string></string>
<key>Answer1</key>
<array/>
<key>4</key>
<string>A</string>
<key>2</key>
<string>B</string>
<key>3</key>
<string>C</string> 
```

所以我试图通过查看各种教程在代码中做到这一点，我只是新手，所以我知道我错了

那么我想将问题放在情节提要中创建的标签中，并与可能的答案相同？？？？`

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSString *listPath = [[self docDir]stringByAppendingPathComponent:@"work.plist"];
if (![[NSFileManager defaultManager]fileExistsAtPath:listPath]) {
[[NSFileManager defaultManager] copyItemAtPath:[[NSBundle mainBundle]pathForResource:@"work" ofType:@"plist"]toPath:listPath error:nil]; 

} 
NSMutableArray *array = [NSMutableArray arrayWithContentsOfFile:listPath];NSLog(@"count: %i", [array count]);

NSDictionary *temp = (NSDictionary *)[NSPropertyListSerialization
                              propertyListFromData:@"work.plist";
self.firstQuestion = [temp objectForKey:@"Question1"];
self.firstanswer = [NSMutableArray arrayWithArray:[temp objectForKey:@"Answer"]];` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:05:43.493

也试试这个。

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsPath = [path objectAtIndex:0];
    NSString *plistpath = [documentsPath stringByAppendingPathComponent:@"question.plist"];
    NSMutableArray *savedStock = [[NSMutableArray alloc] initWithContentsOfFile:plistFilePath];
     for (int i=0; i<[savedStock count]; i++)
        {
            [A-array addObject:[[savedStock objectAtIndex:i] valueForKey:@"A"]];
            [B-array addObject:[[savedStock objectAtIndex:i] valueForKey:@"B"]];
        } 
```

# ios - 更改 Master-Detail-Application 的初始 View Controller

> ID：14822887
> 
> 赞同：0
> 
> 时间：2013-02-11T23:28:22.267
> 
> 标签：ios, storyboard, viewcontroller, launch, master-detail

我在 Master-Detail-Application 上创建了一个新的 iPhone 项目。因为我之前需要登录，所以我在**情节提要中添加了一个新的 ViewController**，选中“**是初始视图控制器**”并将新创建的**类 LoginViewController**分配给这个 ViewController。

*此外，但不相关（在我看来），我创建了一个 segue 并将其从 ViewController 连接到 NavigationController（Master-Detail-Template 的）。*

**AppDelegate.m**已更改为在启动时启动新控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    /* // Old Master-Detail-View-Controller
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    MasterViewController *controller = (MasterViewController *)navigationController.topViewController;
    controller.managedObjectContext = self.managedObjectContext;
     */

    (LoginViewController *)self.window.rootViewController;

    return YES;
} 
```

这将导致错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException',
reason: '-[UICollectionViewController loadView] loaded the "Qn5-Rj-iPA-view-IRE-eP
-ILZ" nib but didn't get a UICollectionView.' 
```

我也试过这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    LoginViewController *loginViewController = [[LoginViewController alloc] init];

    self.window.rootViewController = loginViewController;   //Set the view controller
    [self.window makeKeyAndVisible];

    return YES;
} 
```

导致类似的错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException',
reason: 'UICollectionView must be initialized with a non-nil layout parameter' 
```

我的错误在哪里？

我不明白的是，错误消息中的**UICollectionView到底是从哪里来的。**我从来没有创建或添加一个？？

![故事板](../Images/00cad7d175d512a8a3bd44b77a17ae16.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:46:54.827

我`LoginViewController`的错误继承形式`UICollectionViewController`而不是`UIViewController`. 我修复了它并且它有效。

这解释了我一开始不理解的**奇怪错误消息。**与往常一样**，真相在源代码中**。复查有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:32:51.087

您无需执行任何操作即可在 AppDelegate 中加载视图控制器。只要您的 stroyboard 是在项目设置中加载的，它应该会自动加载。

# jquery - 比较不适用于第一次通话

> ID：14822899
> 
> 赞同：3
> 
> 时间：2013-02-11T23:29:48.783
> 
> 标签：jquery, image, comparison, conditional, src

**目的：** vote.php 将每个帖子的投票限制为每个 IP 一个。jQuery 将旧投票值与新投票值进行比较。如果投票增加，图片就会改变。如果投票减少，则更改图片。如果投票没有改变，图片保持默认。

**问题：**脚本仍然会在第一次运行时更改图像，即使值相等（使用 window.alert 检查）。首次运行后的所有执行都按预期工作。

**有问题的代码：**

```
if (window.f != voteTotal.text()) {
//alert place here. voteTotal.text() && window.f are equal
if (votetype == "up") {

$('.bg').attr('src', 'tear.gif');
window.t=setTimeout('changeBack()', 3000);
}

else if (votetype =="down") {
$('.bg').attr('src', 'happy.gif');
window.t=setTimeout('changeBack()', 3000);
}
else {
changeBack();
}
}
else if(window.f == voteTotal.text()){
changeBack();
}
else {
changeBack();
} 
```

var f 在函数外部声明，并在用户单击投票选项调用函数时立即给定值。

**完整代码：**

```
var t;
var f;

function vote(vote_id, votetype) {
window.f = $('#vote' + vote_id).text();
$.post('vote.php', {id: vote_id, type: votetype },
function(output) {
$('#vote' + vote_id).html(output).show();
colorChange(vote_id, votetype);    
});    
}

function colorChange(vote_id, votetype) {
var voteTotal = $('#vote' + vote_id);

if (window.f != voteTotal.text()) {

if (votetype == "up") {

$('.bg').attr('src', 'tear.gif');
window.t=setTimeout('changeBack()', 3000);
}

else if (votetype =="down") {
$('.bg').attr('src', 'happy.gif');
window.t=setTimeout('changeBack()', 3000);
}
else {changeBack();}
}
else if(window.f == voteTotal.text()){
changeBack();
}
else {
changeBack();
}

 }

function changeBack() {
$('.bg').attr('src', 'bg.gif');

} 
```

那么，我哪里做错了？

* * *

此代码包含在我的 header.html 中的 head 标签内。您看到的是 .js 文件。这就是全部。

```
if (window.f == voteTotal.text()) {window.alert('They are equal');}
else { window.alert('They are not equal: ' + voteTotal.text() + ' ' +window.f); } 
```

![我完全糊涂了](../Images/6d193ba77798d335d1139a542733bbbc.png)

它有效，只是不是第一次通过。

![第二次点击同一个 div](../Images/117f7cb1a98a424626fc806f215dd440.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:59:05.423

由于您从 html 元素中获得总票数，请先尝试修剪它。由于它仅在第一次运行时执行此操作，因此 html 本身中该特定元素的标记可能存在一些问题，我将在那里进行更改。我亲自从服务器获取投票数。

我还从颜色更改功能中删除了一些东西。

```
function vote(vote_id, votetype) {
  window.f = $.trim($('#vote' + vote_id).text());
  $.post('vote.php', {id: vote_id, type: votetype },
  function(output) {
        $('#vote' + vote_id).html(output).show();
  colorChange(vote_id, votetype);    
  });    
 }

function colorChange(vote_id, votetype) {
var voteTotal = $('#vote' + vote_id);

if (window.f != $.trim(voteTotal.text())) {        
//alert place here. voteTotal.text() && window.f are equal
    if (votetype == "up") {

       $('.bg').attr('src', 'tear.gif');
       window.t=setTimeout('changeBack()', 3000);
    }

    else if (votetype =="down") {
        $('.bg').attr('src', 'happy.gif');
        window.t=setTimeout('changeBack()', 3000);
    }

}else {

    changeBack();

}//if
}//changeColor 
```

# android - 如何直接从 TextView 中获取 SP（缩放像素）中的文本大小？

> ID：14822900
> 
> 赞同：18
> 
> 时间：2013-02-11T23:29:54.383
> 
> 标签：android

我希望在运行时根据旧大小更改文本大小。

如何直接从 TextView 中获取 SP（缩放像素）中的文本大小？

就像是：

```
textMove.setTextSize(textMove.getTextSPSize()  + sizeFontScale); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-03-10T10:03:23.727

关于什么：

> ```
> float px = editext.getTextSize();
> float sp = px / getResources().getDisplayMetrics().scaledDensity; 
> ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T23:45:42.343

所以......`setTextSize(int)`实际上假设缩放像素。`getTextSize()`返回*实际*像素。如果您想增加实际像素的数量，则可以调用`getTextSize()`，添加任何内容，然后调用`setTextSize(TypedValue.COMPLEX_UNIT_PX, newValue)`。我想我有点想知道你是否真的想在 Scaled Pixels 中做所有事情。

# java - 如何从自定义 ArrayAdapter 调用主要活动的功能？

> ID：14822902
> 
> 赞同：11
> 
> 时间：2013-02-11T23:30:11.983
> 
> 标签：java, android, android-arrayadapter

我已经查看了很多类似的问题，但似乎无法解决任何问题。我有一个主类，它具有这样的功能，可以编辑显示一个对话框，然后在按下按钮时编辑一个列表。

```
public class EditPlayers extends SherlockFragmentActivity {

    listPlayerNames.setAdapter(new EditPlayerAdapter(ctx,
                R.layout.score_row_edit_player, listScoreEdit));

public void deletePlayer(final int position) {
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(
            EditPlayers.this);

    // Setting Dialog Title
    alertDialog.setTitle("Delete Player");

    // Setting Dialog Message
    alertDialog.setMessage("Are you sure?");

    // Setting Delete Button
    alertDialog.setPositiveButton("Delete",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    listScoreEdit.remove(position);
                    updateListView();
                }
            });

    // Setting Cancel Button
    alertDialog.setNeutralButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });

    // Showing Alert Message
    alertDialog.show();
}

} 
```

如何从适配器中的 getView() 访问该函数？这是该行的 XML

```
<TextView
    android:id="@+id/nameEdit"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:paddingBottom="10dp"
    android:paddingTop="10dp"
    android:paddingLeft="10dp"
    android:layout_weight="70"
    android:text="Name"
    android:textColor="#666666"
    android:textSize="22sp"
    android:textStyle="bold" >
    </TextView>

<Button
    android:id="@+id/deletePlayer"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="30"
    android:text="Delete"
    android:focusable="false" /> 
```

这是 getView()

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    convertView = (LinearLayout) inflater.inflate(resource, null);    
    Score score = getItem(position);
    TextView txtName = (TextView) convertView.findViewById(R.id.nameEdit);
    txtName.setText(score.getName());
    Button b = (Button)convertView.findViewById(R.id.deletePlayer);
    b.setTag(position);
    b.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                 //call function here
             }
     });
    return convertView;
} 
```

在这一点上我完全迷失了，所以任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-11T23:51:38.667

我建议`interface`您返回您的活动，让它知道何时按下该按钮。我不建议从 ArrayAdapter 调用活动的方法。它耦合得太紧了。

尝试这样的事情：

您的`Activity`

```
public class EditPlayers extends SherlockFragmentActivity implements EditPlayerAdapterCallback {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        EditPlayerAdapter adapter = new EditPlayerAdapter(this,
                R.layout.score_row_edit_player, listScoreEdit);
        adapter.setCallback(this);
        listPlayerNames.setAdapter(adapter);

    }

    private void deletePlayer(final int position) {
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(
                EditPlayers.this);

        // Setting Dialog Title
        alertDialog.setTitle("Delete Player");

        // Setting Dialog Message
        alertDialog.setMessage("Are you sure?");

        // Setting Delete Button
        alertDialog.setPositiveButton("Delete",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        listScoreEdit.remove(position);
                        updateListView();
                    }
                });

        // Setting Cancel Button
        alertDialog.setNeutralButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void deletePressed(int position) {

        deletePlayer(position);
    }

} 
```

适配器：

```
public class EditPlayerAdapter extends ArrayAdapter {

    private EditPlayerAdapterCallback callback;

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        convertView = (LinearLayout) inflater.inflate(resource, null);    
        Score score = getItem(position);
        TextView txtName = (TextView) convertView.findViewById(R.id.nameEdit);
        txtName.setText(score.getName());
        Button b = (Button)convertView.findViewById(R.id.deletePlayer);
        b.setTag(position);
        b.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View v) {

                     if(callback != null) {

                        callback.deletePressed(position);
                     }
                 }
         });
        return convertView;
    }

    public void setCallback(EditPlayerAdapterCallback callback){

        this.callback = callback;
    }

    public interface EditPlayerAdapterCallback {

        public void deletePressed(int position);
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-11T23:32:35.390

你`EditPlayerAdapter`得到一个`Context`传递给它。`Activity`延伸`Context`

*如果*`Context`传递的是你的并且`EditPlayers`你在你的适配器中存储了一个类范围的引用`Context`，你可以这样做：

```
((EditPlayers) yourContextVar).function(); 
```

更好的是，制作某种界面。它将有助于澄清和组织您的代码，并应用相同的原则。

# c++ - 在具有 { } 具有良好运行时间的任何其他方法之间提取数据

> ID：14822904
> 
> 赞同：0
> 
> 时间：2013-02-11T23:30:17.610
> 
> 标签：c++, string

我有这段代码在其中提取 {} 之间的数据，这需要我大约 O(n) 是否有任何其他更有效的方法

```
#include <iostream>
#include <string>
#include <stdio.h>
int main()
{
   const char *blah = "[{post:banb {bbbbbbbb}: ananmsdb},{dsgdf{9090909090}fdgsdfg}";
   std::string op;
   unsigned int i = 0;    
   int im = 0;
   int found = 0;
   while(strlen(blah) != i){
       if(blah[i] == '{'){
         found = 1;  
         // copy what ever u got
         op+=blah[i];
         im++;  
       }
       else if(blah[i] == '}'){
           //copy wat ever u got
           op+=blah[i];
           im--;
       }
       if(found ==1){
           //copy wat ever u got.
           op+=blah[i];
       }

       if(found ==1 && im == 0)   {
           found = 0;
           cout << op <<endl;
           op.clear()  ;
           // u have found the full one post so send it for processing.
       }
i++;
}
} 
```

输出:post:banb {bbbbbbbb}: anansdb dsgdf{9090909090}fdgsdfg

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:32:51.907

不可以。您可以使用库函数来缩短此代码，但它永远不会比输入字符串的长度更有效`O(n)`，`n`因为您需要至少检查每个字符一次，因为每个字符都可能是您的标记需要提取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:32:28.420

我不认为你可以改进底层*算法*的 O(n) ，但你可能可以改进你的*实现*。

目前，您的实现可能是 O(n^2) 而不是 O(n)，因为`strlen()`可以在每次迭代时调用（除非您的编译器特别聪明）。您可能应该`strlen()`明确地缓存调用，例如更改：

```
while(strlen(blah) != i){
    ... 
```

至：

```
const int len = strlen(blah);
while(len != i){
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:56:03.783

正如其他人所说，没有办法让它更快，因为你必须检查每个字符，以防你错过一个。

但是，如果你已经知道一些关于数据的信息，也就是有多少对“{”和“}”，那么我只能想到一种方法（除了排序，但这又回到了 O(n) + 等） .

这将是在 0 - x 之间选择索引，并在可以找到“{”或“}”的位置随机检查。需要明确的是，这只有在您知道数据集中已经有多少“{”和“}”时才有效。

编辑：当它点击第一个 cout<< 它应该输出“{{post:banb {{bbbbbbbb}}: ananmsdb}}”，因为它创建了额外的 {'s 和}的。

# actionscript-3 - 在主文档类中为外部类添加事件监听器

> ID：14822907
> 
> 赞同：0
> 
> 时间：2013-02-11T23:30:29.920
> 
> 标签：actionscript-3

我有一个小项目试图帮助学习 as3。它是《Foundation Game Design with Actionscript 3.0》一书的变体。我使用 fla 只是为了拥有一个文档类。所有艺术作品都加载到 as 文件中。在书中，他只是将所有代码放在文档类中，我跟着，它按预期工作。我正在尝试将代码分解为单独的类以处理 OOP。一类制作背景 - Background.as，一类制作角色 - Character.as，一类制作按钮，我为 6 个不同的按钮 - GameButton.as 实例化 6 次。当然还有 GameWorld.as，它是文档类。一切都按预期加载并显示。但是，当我尝试为按钮添加 eventListener 时，我没有得到任何响应。我尝试将 eventListener 放在 GameButton 中。as 并且还在 GameWorld.as 中尝试过，但都没有奏效。此外，我在实例化各种类时传递了对舞台的引用，因为当我尝试在 GameWorld.as 中添加Child 时，什么都不会出现。我搜索了该站点并发现了类似的内容，但似乎没有帮助。预先感谢您对我的任何建议。这是代码：

**游戏世界.as**

```
package 
{
    import flash.net.URLRequest;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.display.DisplayObject
    import flash.events.MouseEvent;
    import GameButton;
    import Character;
    import Background;

    [SWR(width = "550", height = "400", backgroundColor = "#FFFFFF", frameRate = "60")]

    public class GameWorld extends Sprite
    {
        //public variables
        //Background
        public var gameBackground:Background;

        //Character
        public var catCharacter:Character;

        //Buttons
        public var upButton:GameButton;
        public var downButton:GameButton;
        public var growButton:GameButton;
        public var shrinkButton:GameButton;
        public var vanishButton:GameButton;
        public var spinButton:GameButton;

        public function GameWorld ()
        {
            //Add the background to the stage
            gameBackground = new Background("../images/background.png", stage);

            //Add the character(s) to the stage
            catCharacter = new Character("../images/character.png", stage);

            //Set initial character position
            catCharacter.CharacterPos(225, 150);

            //Add the buttons to the stage
            upButton = new GameButton("../images/up.png", stage, 25, 25);
            downButton = new GameButton("../images/down.png", stage, 25, 85);
            growButton = new GameButton("../images/grow.png", stage, 25, 145);
            shrinkButton = new GameButton("../images/shrink.png", stage, 425, 25);
            vanishButton = new GameButton("../images/vanish.png", stage, 425, 85);
            spinButton = new GameButton("../images/spin.png", stage, 425, 145);

            //Button event handlers
            upButton.addEventListener(MouseEvent.CLICK, upButtonHandler);

        }

        public function upButtonHandler(event:MouseEvent)
        {
            trace("You clicked the up button!");
            catCharacter.CharacterMove(15);
        }

    }

} 
```

**游戏按钮.as**

```
package 
{
    import flash.net.URLRequest;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.display.Stage;
    import flash.events.MouseEvent;

    public class GameButton extends Sprite
    {
        //public variables
        public var stageRef:Stage;
        public var urlRequest:URLRequest;
        public var gameButtonLoader:Loader;
        public var gameButtonSprite:Sprite;

        //Constructor
        public function GameButton (urlRequest:String, stageRef:Stage, xPos:Number, yPos:Number)
        {
            this.stageRef = stageRef

            this.urlRequest = new URLRequest();
            gameButtonLoader = new Loader();
            gameButtonSprite = new Sprite();

            this.urlRequest.url = urlRequest;
            gameButtonLoader.load(this.urlRequest);
            gameButtonSprite.addChild(gameButtonLoader);
            this.stageRef.addChild(gameButtonSprite);

            gameButtonSprite.buttonMode = true;

            gameButtonSprite.x = xPos;
            gameButtonSprite.y = yPos;
        }

    }

} 
```

**字符.as**

```
package 
{
    import flash.net.URLRequest;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.display.Stage;

    public class Character
    {
        //private variables
        private var stageRef:Stage;
        private var urlRequest:URLRequest;
        private var characterLoader:Loader;
        private var characterSprite:Sprite;

        //public variables
        public var character_x_pos:Number;
        public var character_y_pos:Number;

        //Constructor
        public function Character (urlRequest:String, stageRef:Stage)
        {
            this.stageRef = stageRef;
            this.urlRequest = new URLRequest();
            characterLoader = new Loader();
            characterSprite = new Sprite();

            this.urlRequest.url = urlRequest;
            characterLoader.load (this.urlRequest);
            characterSprite.addChild (characterLoader);
            this.stageRef.addChild (characterSprite);
            characterSprite.mouseEnabled = false;
        }

        //Set the position of the character
        public function CharacterPos(xPos:Number, yPos:Number):void
        {
            characterSprite.x = xPos;
            characterSprite.y = yPos;
        }

        //Move the position of the character
        public function CharacterMove( yPos:Number):void
        {
            characterSprite.y -= yPos;
        }

    }

} 
```

**背景.as**

```
package 
{
    import flash.net.URLRequest;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.display.Stage;

    public class Background
    {
        //Private variables
        private var stageRef:Stage;
        private var urlRequest:URLRequest;
        private var backgroundLoader:Loader;
        private var backgroundSprite:Sprite;

        //Constructor
        public function Background (urlRequest:String, stageRef:Stage)
        {
            this.stageRef = stageRef;
            this.urlRequest = new URLRequest();
            backgroundLoader = new Loader();
            backgroundSprite = new Sprite();

            this.urlRequest.url = urlRequest;
            backgroundLoader.load (this.urlRequest);
            backgroundSprite.addChild (backgroundLoader);
            this.stageRef.addChild (backgroundSprite);
            backgroundSprite.mouseEnabled = false;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T02:11:08.097

> 所有艺术作品都加载到 as 文件中。

这不是我推荐的方法。上帝给我们 Flash IDE 是有原因的——不是为了写代码！除非您有实际需要在运行时更改视觉效果，否则您在代码中花费在布局和视觉上的任何时间都只是浪费。您的路径都是硬编码的事实表明您没有该要求。

因此，让我们退后一步，假设您有一个包含 6 个符号的符号，这些符号是您创建的只是 Flash 按钮（当您选择按钮作为符号类型时）。这些将是 SimpleButtons，但在下面的类中，我们只是将它们键入为 DisplayObject。该类并不关心它们是什么，但使用 Simplebutton 可以让它们放弃不需要代码的 up、over、down 和 hit 状态。

请注意，以下假设您已关闭“自动声明阶段实例”，这是 IMO 做事的最佳方式。

```
package view {
   public class NavBar extends Sprite {
      //because you put these on stage in the Symbol, they will be available in the constructor
      public var upButton:DisplayObject;
      public var downButton:DisplayObject;
      public var growButton:DisplayObject;
      public var shrinkButton:DisplayObject;
      public var rotateButton:DisplayObject;
      public var vanishButton:DisplayObject;
      //makes it easier to do the same setup on all buttons
      protected var allButtons:Vector.<DisplayObject> = <DisplayObject>([upButton, downButton, growButton, shrinkButton, rotateButton, vanishButton]);
      public function NavBar() {
         super();
         for each (var btn:DisplayObject in allButtons) {
             btn.buttonMode = true;
             btn.mouseChildren = false;
             btn.addEventListener(MouseEvent.CLICK, onButtonClick);
         }
      }
      protected function onButtonClick(e:MouseEvent):void {
          switch (e.target) {
             case upButton:
                dispatchEvent(new CharacterEvent(CharacterEvent.UP));
                break;
             case downButton:
                dispatchEvent(new CharacterEvent(CharacterEvent.DOWN));
                break;
             case growButton:
                dispatchEvent(new CharacterEvent(CharacterEvent.GROW));
                break;
             case shrinkButton:
                dispatchEvent(new CharacterEvent(CharacterEvent.SHRINK));
                break;
             case rotateButton:
                dispatchEvent(new CharacterEvent(CharacterEvent.ROTATE));
                break;
             case vanishButton:
                dispatchEvent(new CharacterEvent(CharacterEvent.VANISH));
                break;
             default:
               break;
          }
      }

   }
} 
```

请注意，布局代码为零。此代码依赖于自定义事件类。我要编写那个事件类，让它总是冒泡。这样，它就可以在显示列表的任何地方发送并在顶层接收：

```
package control {
    class CharacterEvent extends Event {
       public static var UP:String = 'characterUp';
       public static var DOWN:String = 'characterDown';
       public static var GROW:String = 'characterGrow';
       public static var SHRINK:String = 'characterShrink';
       public static var ROTATE:String = 'characterRotate';
       public static var VANISH:String = 'characterVanish';
       public function CharacterEvent(type:String) {
          super(type, true, true);//always bubbles
       }
       public function clone():Event {
          return new CharacterEvent(type);
       }
    }
} 
```

现在，如果您想手动处理以 view.NavBar 作为其基类的 Symbol 的实例化，它将如下所示：

```
package {
   public var navBar:NavBar;
   class GameWorld {
      public function GameWorld() {
         try {
            var navClass:Class = getDefinitionByName('NavBarSymbol') as Class;
         } catch (e:Error) {
             trace('You need to have a Library symbol called NavBarSymbol');
         }
         if (navClass) {
            navBar = new navClass() as NavBar;
            //unnecessary layout code here
            //Note that this is NOT the responsibility of the child Class!
            addChild(navBar);
         }
         //instantiate character
           ...
         //by listening to the whole Document, you can add other things that
         //dispatch Character events on the display list, like a keyboard listener
         addEventListener(CharacterEvent.UP, moveCharacterUp);
         //listeners for the rest of the character events...
      }
      public function moveCharacterUp(e:CharacterEvent):void {
          //character move logic
      }
      //other handlers
   }
} 
```

就个人而言，我只是将 navBar 添加到舞台上，然后根本不需要管理它（甚至不用变量引用它），只需为各种角色事件添加事件侦听器即可。

您问题的根源似乎不是字符代码。但是，我将为您提供一些关于它的“最佳实践”建议。

*   AS3 中的约定是类成员（属性和方法）以小写字母开头的驼峰式大小写。所以，`characterPos()`和`characterMove()`。
*   您的 Class 名称中已经包含字符，所以实际上这些应该只是`pos()`and `move()`（尽管现在不需要缩短`position()`）。
*   您的子类对父类的引用所做的唯一一件事就是添加自己。为此，他们不需要也不应该参考父母。添加孩子是*父母的*责任（如果您使用舞台，则由 Flash Player 负责）。
*   也就是说，您可以为您的 Character 提供对类型为 IEventDispatcher 的父类的引用，并允许 Character 收听此频道。这个概念称为[事件总线](http://www.developria.com/2010/05/pass-the-eventdispatcher-pleas.html)。

请注意，这么多人做您正在做的事情的原因是 Adob​​e 未能记录如何[在时间轴上正确使用 OOP](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)。不幸的是，当我们中的一些人在 2009 年末/2010 年初[开始记录](http://www.actionscript.org/resources/articles/943/1/Actionscript-and-timelines/Page1.html)时，损害已经造成，每个人都认为，如果你想编写好的代码，你必须假装时间线和阶段不存在。

我知道我已经涵盖了很多内容，并且可能我所说的大部分内容与您认为自己知道的内容直接矛盾，所以请不要犹豫，提出您可能有的任何问题。

# .htaccess - htaccess 重写文件夹以在 MODx 中查询字符串

> ID：14822909
> 
> 赞同：0
> 
> 时间：2013-02-11T23:30:32.910
> 
> 标签：.htaccess, rewrite, query-string, modx

我正在尝试在内部将 URL 文件夹结构修改为查询字符串，但保留原始 URL ...即。[http://www.mysite.com/employers/events/2013/02](http://www.mysite.com/employers/events/2013/02)
变为：
[http](http://www.mysite.com/employers/events/?e_year=2013&e_month=02)
://www.mysite.com/employers/events/?e_year=2013&e_month=02 ...内部。从浏览器中，我想查看原始的基于文件夹的 URL。我的努力使 URL 被正确重写，但浏览器显示查询字符串 URL。我的代码如下：

```
RewriteEngine On

RewriteRule ^employers/events/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$ /employers/events/?e_year=$1&e_month=$2 [L]
RewriteRule ^employers/events/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/$ /employers/events/?e_year=$1&e_month=$2 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

第二条规则只是用斜杠捕获版本。

非常感谢，这让我很痛苦。

# 更新：

这是正在传递的内容：

```
Array ( [q] => employers/events/ [e_year] => 2013 [e_month] => 02 ) 
```

所以 MODx 显然在内部破坏事情.. 不是最好的消息，但至少有点关闭！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:42:37.297

1.  `RewriteBase /`如果`.htaccess`文件位于文档根目录中，则不执行任何操作。去掉它
2.  我认为您不需要在替换时使用正斜杠前缀。另外，试试这条规则

    ```
    RewriteRule ^employers/events/(\d{4})/(\d{2})/? employers/events/?e_year=$1&e_month=$2 [L,QSA] 
    ```

我已经在本地对此进行了测试，并且使用以下`.htaccess`文件可以正常工作

```
RewriteEngine on
RewriteRule ^a/b/(\d{4})/(\d{2})/? /a/b/?y=$1&m=$2 [L,QSA] 
```

## 更新

使用独立示例，您的重写规则应导致将以下查询参数传递给 MODx`index.php`文件

```
Array
(
    [q] => employers/events/
    [e_year] => 2013
    [e_month] => 02
) 
```

MODx对此做了什么，我不能说

# java - 使用地理位置定位笔记本电脑

> ID：14822913
> 
> 赞同：-1
> 
> 时间：2013-02-11T23:30:59.107
> 
> 标签：java, jquery, html, geolocation

嘿，我正在寻找一些建议，我正在开展一个项目，以创建能够基于地理位置跟踪和定位用户笔记本电脑的网站，这是对“猎物”所做的一个非常基本的想法。到目前为止，我的网站在访问时会在谷歌地图上显示我所在的位置，但问题是用于该位置的代码是从网站的 html 代码中运行的，这意味着它只能告诉你在哪里基本上，运行代码的机器不是你的笔记本电脑所在的地方，这不是很有用。我需要做的是让这段代码从个人笔记本电脑上运行，以便间歇性地将其位置更新到网站上，这样如果笔记本电脑被盗，用户只需登录网站，他们就可以看看机器在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:33:45.170

不幸的是，除非用户在笔记本电脑上运行了一些后台进程，否则这实际上是不可能的。[与查找我的 iphone](https://itunes.apple.com/au/app/find-my-iphone/id376101648?mt=8)的工作方式类似，该设备始终在后台运行程序。

仅使用 html 和 javascript 是不可能的

# ruby - Rails 生成嵌套 JSON

> ID：14822918
> 
> 赞同：1
> 
> 时间：2013-02-11T23:31:19.570
> 
> 标签：ruby, ruby-on-rails-3, json

我有两个对象，一个@article 和一个@profile。文章是一个模型，@profile 是一个结构。我想最终得到一些如下所示的 JSON：

```
{
    "article": {
        "title": "this is a title",
        "author": "Author McAuthor",
        "profile": {
            "first_name": "Bobby",
            "last_name": "Fisher"
        }
    }
} 
```

截至目前，我可以通过执行以下操作手动创建它：

```
@json = { article: { title: @article.title, author: @article.author, profile: { first_name: @profile.first_name, last_name: @profile.last_name } }} 
```

我觉得以这种方式构建 json 对象有点粗糙，而且每次更改作者模型时，我可能都必须更改此代码。如果我能找到一种更简单的方法来构建这些 json 对象而不必手动这样做，那就太好了......有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:49:36.527

Rails 序列化对象分两步，首先调用`as_json`创建要序列化的对象，然后调用`to_json`实际创建 JSON 字符串。

通常，如果您想自定义模型在 JSON 中的表示方式，最好覆盖`as_json`. 假设您的配置文件结构是一个虚拟属性（即用 定义`attr_accessor`，未保存在数据库中），您可以在`Article`模型中执行此操作：

```
def as_json(options = {})
  super((options || {}).merge({
    :methods => :profile
  }))
end 
```

希望有帮助。也可以看看：

*   [`as_json`文件](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json)
*   [将虚拟属性添加到 json 输出](https://stackoverflow.com/questions/6892044/add-virtual-attribute-to-json-output)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:03:28.450

除了 shioyama 的正确答案之外，您还可以使用[rabl](https://github.com/nesquena/rabl "拉布尔")来制作您的 JSON 对象，类似于 ERB 用于视图的方式。

例如，您将创建一个“视图”，例如`index.rabl`. 它看起来像：

```
collection @articles
attributes :author, :title
child(:profile) { attributes :first_name, :last_name } 
```

# python - PyGame 1.9.1/Python 3.3/Mac 10.6

> ID：14822919
> 
> 赞同：0
> 
> 时间：2013-02-11T23:31:24.823
> 
> 标签：python, macos, pygame

我在 MacBook Pro 上。我有版本 10.6.8。

我去年九月安装了 Python。我想转向使用 PyGame 库（框架？）。我将我的 Python 更新到 3.3.3。（我不记得是否已经安装了它）。我从名为 pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg 的 PyGame[网站下载了这个。](http://www.pygame.org/download.shtml)

我尝试在 Python 2.7 的实例上导入它，它没有给我*任何错误*。

现在我用 Python 3.3 试试这个。我收到此错误：

```
 Traceback (most recent call last):
      File "<pyshell#5>", line 1, in <module>
        import pygame
    ImportError: No module named 'pygame' 
```

我放弃了试图弄清楚并认为如果我使用 Eclipse 和 PyDev 它会为我做这件事。它给了我一个类似的错误。

然后我下载 Aptana。我自动配置了解释器，当我尝试使用命令“import pygame”运行程序时出现此错误：

```
 Traceback (most recent call last):
      File "/Users/Name/Documents/Aptana Studio 3   Workspace/ArcadeGame/PyPackage/Test.py", line 7, in <module>
import pygame
      File "/Library/Python/2.6/site-packages/pygame-1.9.1release-py2.6-macosx-10.6-universal.egg/pygame/__init__.py", line 95, in <module>
from pygame.base import *
    ImportError: dlopen(/Library/Python/2.6/site-packages/pygame-1.9.1release-py2.6-macosx-10.6-universal.egg/pygame/base.so, 2): Symbol not found: _SDL_EnableUNICODE
      Referenced from: /Library/Python/2.6/site-packages/pygame-1.9.1release-py2.6-macosx-10.6-universal.egg/pygame/base.so
      Expected in: flat namespace
     in /Library/Python/2.6/site-packages/pygame-1.9.1release-py2.6-macosx-10.6-  universal.egg/pygame/base.so 
```

* * *

好的！这是一个新错误！我以前从未见过这些！在此之前，当我在 Python 3.3.3 中调用它时找不到模块 PyGame，我猜 Aptana 也使用了 Python 3.3.3。

* * *

好的，我也刚刚在 2.7.3 上再次运行了 import pygame，现在出现错误：

```
 Traceback (most recent call last):
      File "<pyshell#0>", line 1, in <module>
        import pygame
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site- packages/pygame/__init__.py", line 95, in <module>
        from pygame.base import *
    ImportError:  dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site- packages/pygame/base.so, 2): no suitable image found.  Did find:
        /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-     packages/pygame/base.so: no matching architecture in universal wrapper 
```

* * *

我试图思考为什么它是不同的，我不太确定。我已经下载了 Xcode、Macports、Fink，因为我在网上看到了一个要求这样做的指南。我要下载一个名为 SDL 的东西，但我不知道如何处理 SDL_devel.m 或一些名为该文件的文件。

我非常确定它不工作的原因是因为版本号......但我遇到人们说他们让它在他们的 Mac 上工作，并且安装了最新的 Python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:56:45.840

Pygame 在 Mac 上不支持 python 3，这就是为什么你的文件名“pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg”中包含 py2.7。

我怀疑您在尝试使其工作时修改了某些内容。尝试从头开始重新安装 pygame 并在 python 2.7 中运行它

# php - PHP不会在PDF中自动填充数据

> ID：14822929
> 
> 赞同：0
> 
> 时间：2013-02-11T23:32:03.490
> 
> 标签：php, pdf

我一直在使用这个问题中给出的建议：

[使用 PHP 将 FDF 数据合并为 PDF 文件](https://stackoverflow.com/questions/1389964/merge-fdf-data-into-a-pdf-file-using-php)

确定如何使用从数据库中提取的数据预填充 pdf 表单，但不将数据保存到文件中。我在 Mountain Lion 上运行 php 5.3.15，我使用以下链接将 pdf 与我希望允许用户单击的表格页面上的 fdf 组合到填充的 pdf 文件中：

```
something.pdf#FDF=generatePdf.php 
```

generatePdf.php 看起来像这样：

```
<?php
$pdf_form_url= "";
require_once('forge_fdf.php');

$fdf_data_names= array(); // none of these in this example
$fdf_data_strings= array(); // none of these in this example

$fdf_data_strings['form1[0].#subform[0].q1a_LastName'] = "Smith";
$fields_hidden= array();
$fields_readonly= array();

// set this to retry the previous state
$retry_b= false;

header( 'content-type: application/vnd.fdf' );

echo forge_fdf( $pdf_form_url,
    $fdf_data_strings, 
    $fdf_data_names,
    $fields_hidden,
    $fields_readonly );

?> 
```

当我通过 pdftk 命令行运行 FDF 文件时，它看起来像这样：

```
FieldType: Text
FieldName: form1[0].#subform[0].q1a_LastName[0]
FieldNameAlt: Enter Family Name
FieldFlags: 0
FieldJustification: Left
FieldMaxLength: 35 
```

不过，当我运行它时，表单不会自动填充。我尝试了许多变体，包括仅使用 q1a_LastName 本身，但我仍然得到一个空表单。forge_fdf.php 位于同一目录中。

更新：我还尝试了将 FDF 数据合并到我使用 PHP 链接到的 PDF 问题中概述的传统方法，这意味着我不仅将用户引导到 pdf 文件，而且还试图让用户下载的PDF。在那种特殊情况下，我会收到一条消息说 pdf 是空的。我检查了创建的原始 FDF 文件，它似乎正在填充数据。无论哪种情况，我都没有得到我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:28:46.650

经过反复试验，我意识到自动填充到链接到 pdf 的 url 的最佳方法是为上面的代码定义 $pdf_form_url 变量。此代码将回显 fdf 文件的详细信息。如果您明确指定 pdf url 是什么，php 和您的浏览器将采取必要的步骤将您链接到 Web 浏览器中的 pdf，其中嵌入的字段信息来自 fdf 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T01:12:30.287

所以我偶然发现了这个线程，即使我填充了 $pdf_form_url 变量也无法让它工作。这是我的代码：

```
require_once('forge_fdf.php');  

// leave this blank if we're associating the FDF w/ the PDF via URL
$pdf_form_url= "http://test.pdf";
// $pdf_form_url= "";

// default data; these two arrays must ultimately list all of the fields
// you desire to alter, even if you just want to set the 'hidden' flag;
//
//
$fdf_data_names= array(); // none of these in this example
$fdf_data_strings= array(); // none of these in this example
$fdf_data_strings['Address, Row 1']="XXXX Balboa Arms Drive #XXX, San Diego CA 01234";

$fields_hidden= array();
$fields_readonly= array();

// set this to retry the previous state
$retry_b= false;

header( 'content-type: application/vnd.fdf' );

echo forge_fdf( $pdf_form_url,
        $fdf_data_strings, 
        $fdf_data_names,
        $fields_hidden,
        $fields_readonly ); 
```

这是我想使用 pdftk dump_data_fields 更新的表单字段：

```
FieldType: Text
FieldName: Address, Row 1
FieldNameAlt: (Address, &lt;Row 1&gt;)
FieldFlags: 0
FieldJustification: Center 
```

# javascript - 煎茶触摸2；在两个函数之间传递变量

> ID：14822940
> 
> 赞同：0
> 
> 时间：2013-02-11T23:33:03.610
> 
> 标签：javascript, sencha-touch-2

我有一个同事列表 (List.js) 点击列表项会显示同事的详细信息 (Detail.js)。其中一个字段是 {skype}。从商店中检索到 Skype 地址并很好地显示。

在详细信息屏幕中，我有一个按钮“给我打电话”。目的是与同事开始 Skype 通话。

我添加了一个功能

```
onOpenSkypeTap: function () {
    open('skype:{skype}?call');
} 
```

问题是：Skype 用 {skype} 开始通话，而不是同事的 Skype 名称。我想我需要在控制器文件中解决它，但我的尝试没有成功：控制器文件的一部分：

```
oncolleagueItemTap: function(list, idx, el, record) {
    this.getcolleagueContainer().push(this.colleague);
    this.colleague.setRecord(record);
    var skypename = record.get ('skype')
    console.log(skypename);     
},

onOpenSkype: function () {
    console.log(skypename);
    open('skype:skypename?call');
} 
```

错误消息：未捕获的 ReferenceError：未定义 skypename

可能是因为 var skypename 仅为函数 oncolleagueItemTap 定义

是否可以将此变量传递给函数 onOpenSKype？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:15:58.777

您可以`skypename`在详细信息页面中设置为配置属性之一，并为此页面提供一个 id。点击按钮，您可以执行此操作

```
var name = Ext.getCmp("colleguePageId").config.skypename 
```

或者

```
var name = Ext.getCmp("colleguePageId").getRecord().get('skype') 
```

你可以在任何你想要的地方使用它

```
open('skype:'+name+'?call'); 
```

# c# - 无法将类型“T”隐式转换为“T”

> ID：14822942
> 
> 赞同：3
> 
> 时间：2013-02-11T23:33:21.470
> 
> 标签：c#, asp.net, generics

我正在为缓存提供程序编写流利的注册，但由于某种原因，我的泛型并不满意。我在这一点上遇到错误：`value = _loadFunction();`

```
Cannot implicitly convert type 'T' to 'T [HttpRuntimeCache.cs(10)] 
```

下面的代码：

```
using IDM.CMS3.Service.Cache;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Caching;

namespace IDM.CMS3.Web.Public.CacheProviders
{
    public class HttpRuntimeCache<T> : IFluentCacheProvider<T>
    {
        string _key;
        Func<T> _loadFunction;
        DateTime? _absoluteExpiry;
        TimeSpan? _relativeExpiry;

        public HttpRuntimeCache()
        {

        }

        public IFluentCacheProvider<T> Key(string key)
        {
            _key = key;
            return this;
        }

        public IFluentCacheProvider<T> Load(Func<T> loadFunction)
        {
            _loadFunction = loadFunction;
            return this;
        }

        public IFluentCacheProvider<T> AbsoluteExpiry(DateTime absoluteExpiry)
        {
            _absoluteExpiry = absoluteExpiry;
            return this;
        }

        public IFluentCacheProvider<T> RelativeExpiry(TimeSpan relativeExpiry)
        {
            _relativeExpiry = relativeExpiry;
            return this;
        }

        public T Value()
        {
            return FetchAndCache<T>();
        }

        public void InvalidateCacheItem(string cacheKey)
        {
            throw new NotImplementedException();
        }

        T FetchAndCache<T>()
        {
            T value;
            if (!TryGetValue<T>(_key, out value))
            {
                value = _loadFunction();
                if (!_absoluteExpiry.HasValue)
                    _absoluteExpiry = Cache.NoAbsoluteExpiration;

                if (!_relativeExpiry.HasValue)
                    _relativeExpiry = Cache.NoSlidingExpiration;

                HttpContext.Current.Cache.Insert(_key, value, null, _absoluteExpiry.Value, _relativeExpiry.Value);

            }
            return value;
        }

        bool TryGetValue<T>(string key, out T value)
        {
            object cachedValue = HttpContext.Current.Cache.Get(key);
            if (cachedValue == null)
            {
                value = default(T);
                return false;
            }
            else
            {
                try
                {
                    value = (T)cachedValue;
                    return true;
                }
                catch
                {
                    value = default(T);
                    return false;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:45:53.877

`T FetchAndCache<T>`和`bool TryGetValue<T>`正在*重新定义*一种与在类级别声明的类型不同的*新类型。* `T`我认为一旦您删除了额外的通用声明，它应该可以正常工作。也就是说，将它们重写为：

```
T FetchAndCache()
{
     ...
}

bool TryGetValue(string key, out T value)
{
     ...
} 
```

一旦你这样做了，编译器将把`T`这里识别为在类上声明的那个。

# jquery - JQuery 使用 .css 应用到包含的页面

> ID：14822943
> 
> 赞同：1
> 
> 时间：2013-02-11T23:33:25.107
> 
> 标签：jquery, css, html

当包含在包含的文本文件中时，我在应用 css`$(".img").css("border", "1px solid black");`时遇到问题。`img`

当代码包含在我的`index.html`页面中时它工作正常，当元素在包含的页面中时，如何让它应用样式？

包含页面：

```
<figure>
  <img src="images/map.gif" alt="Le Mans Circuit Map" class="img">
  <figcaption>Map of the Le Mans Circuit</figcaption>
</figure> 
```

它被包含在这个 div 中：

```
<div id="tabContent1"></div> 
```

编辑：更新了 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:35:04.640

```
$(".img").css("border", "1px solid black"); 
```

编辑

你应该清理你的代码

jQuery 可以帮你，你写的代码太多了

[http://jsfiddle.net/peFcx/](http://jsfiddle.net/peFcx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:47:01.717

在加载后粘贴一个函数并将其放置`.css`在该函数中。

```
$("#tabContent3").load("test3.txt", function () {
$(".img").css("border", "1px solid black");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:35:19.973

详情请查看[jquery css api](http://api.jquery.com/css)说明。你所追求的是这样的；

```
$( 'img' ).css( 'border', '1px solid black' ); 
```

编辑：

这段代码是正确的，我保证。如果某些东西不起作用，那是您实施它时出现的错误。我建议将您的代码包装在`$( document ).ready( ... )`这样的语句中；

```
$( document ).ready( function () {
    $( 'img' ).css( 'border', '1px solid black' );
}); 
```

现在当你说

> 当元素在包含的页面中时，如何让它应用样式？

你的意思是你正在使用`.$.fn.append`或类似的东西？因为如果你是，只需`$.fn.css`在它之后直接运行该代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T00:06:31.763

也许应用了另一个 CSS 然后你可以使用它

```
$('.img').css('border','1px black solid !important'); 
```

如果您通过 ajax 加载它，只需在成功回调时调用它

我希望这有帮助

# macos - Mac终端中“ls”的颜色编码结果是什么意思？

> ID：14822944
> 
> 赞同：8
> 
> 时间：2013-02-11T23:33:25.450
> 
> 标签：macos, unix, terminal, ls

当我执行“ls”时，它会列出带有颜色编码的文件和文件夹。我在任何地方都找不到这种编码的翻译。我知道有些是文件，有些是目录，但我这里有三种颜色。

谁知道翻译在哪里？有很多帖子说如何激活编码，但现在在哪里可以看到定义。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T23:42:30.323

如果您想了解如何更改字符串，请查看`man ls`并搜索字符串，但这里是基础知识（在下面的代码块中滚动以查看完整摘录）：`LSCOLORS`

```
 LSCOLORS        The value of this variable describes what color to use
                 for which attribute when colors are enabled with
                 CLICOLOR.  This string is a concatenation of pairs of the
                 format fb, where f is the foreground color and b is the
                 background color.

                 The color designators are as follows:

                       a     black
                       b     red
                       c     green
                       d     brown
                       e     blue
                       f     magenta
                       g     cyan
                       h     light grey
                       A     bold black, usually shows up as dark grey
                       B     bold red
                       C     bold green
                       D     bold brown, usually shows up as yellow
                       E     bold blue
                       F     bold magenta
                       G     bold cyan
                       H     bold light grey; looks like bright white
                       x     default foreground or background

                 Note that the above are standard ANSI colors.  The actual
                 display may differ depending on the color capabilities of
                 the terminal in use.

                 The order of the attributes are as follows:

                       1\.   directory
                       2\.   symbolic link
                       3\.   socket
                       4\.   pipe
                       5\.   executable
                       6\.   block special
                       7\.   character special
                       8\.   executable with setuid bit set
                       9\.   executable with setgid bit set
                       10\.  directory writable to others, with sticky bit
                       11\.  directory writable to others, without sticky
                            bit

                 The default is "exfxcxdxbxegedabagacad", i.e. blue fore-
                 ground and default background for regular directories,
                 black foreground and red background for setuid executa-
                 bles, etc. 
```

所以，默认是：

```
directories: blue on default background
symlink: magenta on default background
socket: green on default background
pipe: brown on default background 
```

等等

# twitter-bootstrap - twitter bootstrap 词缀/scrollspy 宽度和滚动问题

> ID：14822945
> 
> 赞同：1
> 
> 时间：2013-02-11T23:33:33.893
> 
> 标签：twitter-bootstrap, affix, scrollspy

我几乎已经完成了所有工作： http: [//firestream.net/2013/index.php?go=stats](http://firestream.net/2013/index.php?go=stats)

这是我遇到的两个问题：

1）当您向下滚动时，我希望侧导航列表停留在屏幕的最顶部，而不是当前停留的位置 2）当您向下滚动时，导航列表的宽度会挤压

```
<div class="row">
    <div class="span3">
        <ul class="nav nav-list" id="sidenavbar">
              <li class="active"><a href="#top10pt"><i class="icon-chevron-right"></i> Top 10 Pages Today</a></li>
              <li class=""><a href="#top10pa"><i class="icon-chevron-right"></i> Top 10 Pages Alltime</a></li>
              <li class=""><a href="#daily"><i class="icon-chevron-right"></i> Daily Stats</a></li>
              <li class=""><a href="#top10rt"><i class="icon-chevron-right"></i> Top 10 Referalls Today</a></li>
        </ul>
    </div>

    <div class="span9" id="content">
       <section id="top10pt">
       ...
       </section>
       <section id="top10pa">
       ...
       </section>
       <section id="daily">
       ...
       </section>
       <section id="top10rt">
       ...
       </section>
    </div>
</div>

<script>
$('#sidenavbar').affix();
$('body').scrollspy();
</script> 
```

任何帮助或建议都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T23:46:16.873

通过使用以下 CSS，`#sidebarnav`将在词缀插件将`.affix`类添加到项目时定位。该`.affix`课程将使定位固定，并且如文档中所述，您应该自己进行定位。

```
#sidebarnav.affix {
  top: 56px;
} 
```

[阅读文档](http://twitter.github.com/bootstrap/javascript.html#affix)：*您必须管理固定元素的位置及其直接父元素的行为。位置由 affix、affix-top 和 affix-bottom 控制。当词缀从页面的正常流程中删除内容时，请记住检查可能折叠的父级。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T21:07:41.020

我最近不得不用我的滚动间谍解决类似的问题。

首先，词缀类应该应用于元素。原因是 scrollpy 函数会查找此类并将其从 affix 更改为 affix-top，具体取决于用户在页面上的位置或文档是否刚刚加载。这将有助于解决您的位置问题，因为 scrollspy 对象将处于正常文档流中，直到用户开始滚动。

*   注意，当词缀类出现时，确保为对象创建一个链选择器，这样你就可以将位置远离页面的最顶部。像 ul.nav.affix: {top: ##px;} 这样的东西对我来说效果很好。

其次，当应用词缀时，您将其从正常文档流中删除，因为位置：固定；被应用。如果您使用相对单位定义 scrollspy 的宽度，它将改变它的宽度，因为 scrollspy 的宽度与其父级之间的关系已经改变（它有一个不同的父级并且不再包含在您的 'span-3 'ul)。

# java - 将 Play 2.0 从 Java 默认更改为 Scala

> ID：14822948
> 
> 赞同：0
> 
> 时间：2013-02-11T23:33:42.897
> 
> 标签：java, scala, playframework-2.0, osx-mountain-lion

该[`Play Framework`站点](http://www.playframework.com/documentation/2.1.0/ScalaTodoList)有一个关于如何创建简单的 scala 应用程序的基本教程。第一步是输入`play new todolist`，然后系统应该提示我输入应用程序名称，然后选择`Java`、`Scala`或`Empty`。问题是系统没有提示我在`Java`、`Scala`或中进行选择`Empty`。我有`Java`并`Scala`安装在我的电脑上。

有谁知道如何解决这个问题，以便我可以决定使用哪种语言？现在它默认为Java。我的 mac 是`OSX Mountain Lion`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:44:50.797

你把它设置在`project/Build.scala`. 您需要将所说的行更改`mainLang = JAVA`为`mainLang = SCALA`。

# c# - 学习 C# 和方法中的对象让我感到困惑

> ID：14822950
> 
> 赞同：4
> 
> 时间：2013-02-11T23:33:45.493
> 
> 标签：c#, .net

我确信这个问题已经得到解答，但是经过一个小时的不断搜索，我仍然很困惑。
我正在学习 C# 并习惯了事物的工作方式，但让我感到困惑的是如何使在方法中创建的对象可用于其他方法。
我正在开发一个可以做一些图像工作的应用程序。我想在表单加载时创建程序使用的对象，然后用另一种方法对其进行更改。看起来很简单。这是代码的基本部分：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        InitializeBMPObjects();

    }

    public  void InitializeBMPObjects ()
    {
        Bitmap Bmp1 = new Bitmap(320, 226);        

    }

    public void pushPixels()
    {
        Graphics g = Graphics.FromImage(Bmp1);
        //Do some graphics stuff....

    } 
```

我想创建位图对象“Bmp1”，然后我希望 pushPixels() 对该对象进行更改。
麻烦的是，pushPixels 方法会抱怨，因为“当前上下文中不存在名称‘Bmp1’”

我相信这个问题基本上是这里的范围。Bmp1 对象只存在于 InitializeBMPObjects 方法的范围内。但是如果我想在表单加载时创建一堆对象怎么办？我应该在方法之外创建对象吗？还是我需要以某种方式将它们标记为全局对象？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T23:37:07.573

一种选择是使该对象成为成员变量，另一种是将其注入您的方法中：

```
public  void InitializeBMPObjects ()
 {
   Bitmap Bmp1 = new Bitmap(320, 226); 
   pushPixels(Bmp1);//bmp1 accessible only to pushPixels in this case
 }
 public void pushPixels(Bitmap bmp1)
 {
   Graphics g = Graphics.FromImage(Bmp1);
   //Do some graphics stuff....
 } 
```

或者..

```
public class YourClass
{
   private Bitmap bmp1 = new Bitmap(320,226) ;
   //this makes bmp1 accessible to all member methods.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:04:54.313

关于范围的所有答案都是正确的，我不想让您更加困惑，但这将是[扩展](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)类的绝佳用途。扩展允许您从解决方案中的任何位置（具有访问权限）调用任何位图上的方法。

开始添加一个名为 whatever you want to your project 的公共静态类。然后添加一个返回 System.Drawing.Bitmap 并接受 System.Drawing.Bitmap 参数的静态方法。将您的代码放入方法中。使用您的扩展方法类似于使用 ToString() 方法。

```
public static class MyExtensions
{
    public static System.Drawing.Bitmap PushPixels(this System.Drawing.Bitmap bitmap)
    {
        //do stuff here
        return bitmap;
    }
} 
```

在您的代码中使用它`System.Drawing.Bitmap newBitmap = Bmp1.PushPixels();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:36:33.463

将变量创建为针对父类的属性/字段，因此您最终会得到类似的东西。

```
public class MyClass
{
    private Bitmap _myImage;

    public void InitializeBMPObjects()
    {
        _myImage = new Bitmap(320, 226); 
    }

    public void pushPixels()
    {
        Graphics g = Graphics.FromImage(_myImage);
        //Do some graphics stuff....

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T23:37:28.117

有人会像这样使用全局变量：

```
public class Program...

    int a;

    void Method1() ...
    void Method2() ... 
```

此类中的所有方法现在都可以访问变量 a。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T23:38:20.047

是的，您需要在方法之外声明这些对象；因此，将范围设置为全局。

把它放在方法之外：

位图 Bmp1；

然后用这个替换你的方法中的代码：

Bmp1 = 新位图(320, 226);

请注意，全局声明的相同方法现在在一个方法中实例化，并且可供其余方法使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T23:38:52.107

您是对的，范围阻止您从函数外部访问该对象。如果您有多个图像，如您所说的那样，您可以执行以下操作：

```
List<Bitmap> bitmapList = new List<Bitmap>();

private void Form1_Load(object sender, EventArgs e)
{
    InitializeBMPObjects();

}

public  void InitializeBMPObjects ()
{
    Bitmap Bmp1 = new Bitmap(320, 226); 
    bitmapList.Add(Bmp1);

}

public void pushPixels()
{
    foreach(Bitmap bmp in bitmapList)
    {
        //do stuff here
    }
} 
```

# c - 无法处理号码 600851475143，但我可以完美处理 13195

> ID：14822973
> 
> 赞同：1
> 
> 时间：2013-02-11T23:36:07.040
> 
> 标签：c, types, floating-point, primes

基本上，我一直在尝试完成 projecteuler.net 上的第三个问题。该示例为我提供了数字 13195，该程序（用 C 编写）准确地返回了 5 7 13 29 的素数树，但是当我输入问题编号 600851475143 时，没有任何反应。大约一年前，我还在 Python 中制作了一个类似的程序，它解决了 600851475143 的因子树。我认为这与我正在使用的数据类型有关，但我找不到可靠的信息来源，并且如何用浮点数/双精度数/大东西做模数。

谢谢，

克莱门特

**代码：**

```
//
//  main.c
//  Project Euler Question 3
//
//  Created by Cwbh on 2/11/13.
//  Copyright (c) 2013 Cwbh. All rights reserved.
//

#include <stdio.h>
#include <math.h>

int is_prime(int x);

int main(int argc, const char * argv[])
{
    int pft[100];
    int number;
    int pointerloc = 0;

    printf("Enter the number to find the Prime Factor Tree of: ");
    scanf("%d", &number);

    if (is_prime(number) == 0) {
        for (int i = 2; i < number; i++) {
            if (number%i == 0 && is_prime(i) == 1) {
                pft[pointerloc] = i;
                pointerloc++;
            }
        }
    }else{
        printf("You've entered a prime number to begin with!");
    }

    for (int i = 0; i < pointerloc; i++) {
        printf("%d\n",pft[i]);
    }

    return 0;
}

int is_prime(int x){
    int prime = 1;

    for (int i = 2; i < x; i++) {
        if (x%i == 0) {
            prime = 0;
            break;
        }
    }

    return prime;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:38:13.947

它看起来像是`int`您机器上的 32 位类型。这意味着 600851475143 不适合（32 位整数中可表示的最大数字是 4294967295）。使用 64 位类型应该没问题。您可以使用`uint64_t`from `stdint.h`，或者您的机器可能有 64 位`long`或`long long`类型。

该`%`运算符仅适用于 C 中的整数类型，因此尝试将其用于 a`float`或`double`将不起作用。

您拥有的另一个选择是使用某种“大数字”库。您当然可以编写自己的简单程序来解决这一级别的欧拉计划问题。

# mysql - mysql 压缩文本字段会减少当前数据库的磁盘空间吗？

> ID：14822974
> 
> 赞同：3
> 
> 时间：2013-02-11T23:36:08.807
> 
> 标签：mysql, compression, innodb, longtext

我有一个相当大的 mysql 数据库表，其中一个字段是长文本，我希望在这个字段上使用压缩，这会导致磁盘空间减少吗？或者是否已经分配了存储空间，并且不会导致任何空间减少。存储引擎是innodb。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:48:14.110

InnoDB 压缩行格式有一些先决条件：

1.  `innodb_file_format=Barracuda`在您的 my.cnf 文件中。

2.  `innodb_file_per_table`在您的 my.cnf 文件中。压缩不适用于存储在中央表空间 (ibdata1) 中的表。

3.  更改表格以使用压缩格式。

    ```
    ALTER TABLE MyTable ROW_FORMAT=COMPRESSED 
    ```

那么表应该以压缩格式存储，它会占用更少的空间。
压缩率取决于您的数据。

**注意：**如果您有一个表存储在 ibdata1 中央表空间中，并且您将该表重组为 file-per-table，**则 ibdata1 不会缩小！** 缩小 ibdata1 的唯一方法是转储*所有*InnoDB 数据，关闭 MySQL，rm 表空间，重新启动 MySQL，然后重新加载数据。

* * *

回复您的评论：

不，它不应该改变您进行查询的方式。

是的，这将需要很长时间。多长时间取决于您的系统。我建议先用一张小桌子试一试，这样你就可以感受一下了。

写的时候压缩，读的时候解压，需要消耗一些CPU资源。数据库服务器拥有额外的 CPU 资源是很常见的——数据库通常受 I/O 的限制。但是速度可能会成为瓶颈。同样，这取决于您的系统、数据和使用情况。我鼓励您仔细测试，看看它是否是净赢。

# c# - 是否有为 Windows Store 应用程序生成图像的应用程序？

> ID：14822976
> 
> 赞同：0
> 
> 时间：2013-02-11T23:36:21.487
> 
> 标签：c#, .net, windows-8

我是一名开发人员，我根本不是设计师 :) 我为 windows phone 和 windows store 开发了应用程序，但在创建不同大小的图像（启动画面、瓷砖、徽章等）时我总是遇到困难。

是否有一个应用程序可以根据给定的图像生成 Windows 商店应用程序所需的所有大小？

谢谢，

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:39:17.570

[Metro Studio 2](http://www.syncfusion.com/downloads/metrostudio)是一个很棒的工具，有大量的图标/图像可用。看一看。

# c - 从串行读取数据块是否比一次读取 1 个字符更快？

> ID：14822980
> 
> 赞同：0
> 
> 时间：2013-02-11T23:36:33.093
> 
> 标签：c, serial-port

从串行端口读取大块是否比一次读取 1 个字节更快？众所周知，读取块通常更快。但是，我想知道串行通信是否属于这种情况，因为：

1.  现代处理器速度与旧协议
2.  串行一次传输 1 位，与 USB 等新的通信方法不同

作为后续，使用 USB 作为串行连接（使用 PL2303 驱动程序之类的东西，如果有帮助的话）对此有何影响？

当我在考虑如何解析来自串行端口的传入消息时，这个问题就出现了。使用当前的设计，一次解析 1 个字符会更容易，但是，我也想有效地进行读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:42:46.207

除非您直接使用串行硬件，否则我想您的操作系统将缓冲传入的数据，并且一次读取数据块仍然会更有效。

你可以两种方式都做，看看哪个更快。

鉴于 S 代表串行，USB 也肯定只是一种快速串行连接。

# java - 使用 udp 服务器停止线程

> ID：14822985
> 
> 赞同：0
> 
> 时间：2013-02-11T23:36:52.067
> 
> 标签：java, multithreading

我有一个实现`Runnable`接口的 UDP 服务器类。我在线程中启动它。问题是我无法阻止它。即使在 Debug 中，它也会停止在`pt.join()`方法上。

这是我的服务器类

```
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.SocketException;

public class Network implements Runnable {
final int port = 6789;

DatagramSocket socket;

byte[] input = new byte[1024];
byte[] output = new byte[1024];

public Network() throws SocketException{
    socket = new DatagramSocket(6789);
}

@Override
public void run() {
    while(true){
        DatagramPacket pack = new DatagramPacket(input,input.length);
        try {
            socket.receive(pack);
        } catch (IOException e) {
            e.printStackTrace();
        }
        input = pack.getData();
        System.out.println(new String(input));
        output = "Server answer".getBytes();
        DatagramPacket sendpack = new DatagramPacket(output,output.length,pack.getAddress(),pack.getPort());
        try {
            socket.send(sendpack);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
} 
```

这是主要课程

```
public class Main {

static Network network = null;

public static void main(String[] args) throws IOException{
    network = new Network();
    System.out.println("Try to start server");
    Thread pt = new Thread(network);
    pt.start();

    pt.interrupt();
    try {
        pt.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    System.out.println("Stop server");
}
} 
```

**如何停止服务器？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:40:53.357

java.net 读取是不可中断的。您将不得不关闭`DatagramSocket`或让它读取超时（`setSoTimeout()`），当您得到结果时`SocketTimeoutException`检查中断状态：如果设置，退出线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:44:08.823

调用`interrupt`实际上并没有停止线程，它只是设置了一个标志。

在您的循环内，检查`isInterrupted()`. 例如，一种快速而肮脏的方式将是改变

```
while(true) 
to 
while (!Thread.currentThread().isInterrupted()) 
```

但是，如果您对这个项目更加认真，您应该查阅更多文档。

正如@EJP 所提到的，如果您挂在 Socket IO 中，则需要关闭 Socket 或超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:46:31.437

除了 EJP 所说的之外，您可能应该有一个名为 running（或其他）的本地布尔值，并在进入 while 循环之前将其设置为 true。让您的 while 循环以此本地布尔值为条件。并提供方法（stopServer() 和 isRunning()）来设置和检查布尔值的状态。您可能还想从 while 循环中删除 try-catch 并将整个 while 循环放在 try-catch-finally 中，并在 finally 语句中执行清理（设置 running=false；关闭连接等）

# ruby-on-rails - 登录功能不起作用

> ID：14822987
> 
> 赞同：1
> 
> 时间：2013-02-11T23:37:21.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经构建了一个应用程序，允许用户注册、登录和退出（如果你愿意的话，我自己的设计是从头开始的）。

该应用程序允许用户注册，但在尝试登录时出现以下错误：

//（不用说我处于静止状态，谁能弄清楚这就是他们自己的天才）

# SessionsController#create 中的 NoMethodError

```
undefined method `-' for nil:NilClass

Rails.root: /Users/user/Sites/rails_projects/sample_app1

app/controllers/sessions_controller.rb:11:in `create' 
```

# 要求

### 参数：

```
{"utf8"=>"✓&quot;,
"authenticity_token"=>"/SEaqnrMf5X0pd4FVWbu8uWVAjTNw4LPKiXg+8Hl0PQ=",
"session"=>{"email"=>"Anthonypane@example.com",
"password"=>"[FILTERED]"},
"commit"=>"Sign in"} 
```

这是我的 Session_Controller 内容：

```
class SessionsController < ApplicationController
def new
@title = "Sign in"
end

def create
user = User.authenticate(params[:session][:email],
                        params[:session][:password])
if user.nil?
flash.now[:error] = "Invalid email/password combination."
@title - "Sign In"
render 'new'
else
sign_in user
redirect_to user
end
end   

def destroy
 sign_out
 redirect_to root_path
end
end 
```

Users_Controller 内容

```
class UsersController < ApplicationController

def show
 @user = User.find(params[:id])
 @title = @user.name 
 end

def new
@user = User.new
@title = "Sign up"
end

def create
@user = User.new(params[:user])
if @user.save
sign_in @user
redirect_to @user, :flash =>  {:success => "Welcome to the Fun House!"}
else
@title = "Sign up"
 render 'new'
end
end
end 
```

Sessions_helper 内容

```
module SessionsHelper

 def sign_in(user)
cookies.permanent.signed[:remember_token] = [user.id, user.salt]
current_user = user
end

def current_user=(user)
@current_user = user
end

def current_user
 @current_user ||= user_from_remember_token
end

def signed_in?
 !current_user.nil? 
end

def sign_out
 cookies.delete(:remember_token)
 self.current_user = nil
end 

private

def user_from_remember_token
 User.authenticate_with_salt(*remember_token)
end

def remember_token
 cookies.signed[:remember_token] || [nil, nil]
end

end 
```

最后是 Users_helper 内容：

```
module UsersHelper
def gravatar_for(user, options = { :size => 50})
gravatar_image_tag(user.email.downcase, :alt => user.name, 
                                        :class => 'gravatar',
                                        :gravatar => options)
end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:42:38.457

我认为这一行：

```
@title - "Sign In" 
```

应该是这样的：

```
@title = "Sign In" 
```

# php - 返回对对象属性的引用的函数

> ID：14822993
> 
> 赞同：2
> 
> 时间：2013-02-11T23:37:47.230
> 
> 标签：php, reference

我有一个看起来像这样的事件对象：

```
class InputEvent
{
    protected $input;

    public function __construct(&$input)
    {
        $this->input = &$input;
    }

    public function getInput()
    {
         return $this->input;
    }
} 
```

现在，既然`$input`是一个字符串，我必须通过引用传递它。但是，当我创建事件侦听器时，输入值不会改变，因为`getInput`函数返回`$input`值而不是对`$input`属性的引用。

```
class Listener
{
    public function myEvent(InputEvent $event)
    {
         $input = $event->getInput();

         // doesn't change InputEvent::input property
         $input = "asd";
    }
} 
```

有没有办法让我返回对`$input`值的引用，以便它在事件对象内部发生变化？

我可以做两种解决方法，但两者都是......嗯，解决方法，不是很漂亮。

1.  封装`$input`到一个类中，例如创建一个`String`只包含 value 和 getter、setter 方法的类。

2.  将`setInput`方法添加到`InputEvent`，但仍然不如将其分配给`Listener`上面示例中的值那么优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:44:40.967

正如上面提到的moonwave99，您需要使用setter。在您的 InputEvent 类中添加方法：

```
public function setInput(&$s) {
    $this->input = $s;
} 
```

或者您可以返回参考：

```
public function &getInputRef() {
    return $this->input;
}
$input = &$event->getInputRef(); 
```

我认为应该是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:45:57.687

让您的 getInput 函数通过引用返回

```
function &getInput()
         ^-- signifies return value by reference 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T23:53:53.963

```
class InputEvent
{
    protected $input;

    public function __construct(&$input)
    {
        $this->input = $input;
    }

    public function &getInput()
    {
        return $this->input;
    }
}
$string = "abc";
$a = new InputEvent($string);

$input = &$a->getInput();

$input .= "def";

echo $a->getInput(); 
```

# jquery - twitter bootstrap 主题悬停问题 - ul li 菜单项被主页中的滑块覆盖

> ID：14822997
> 
> 赞同：0
> 
> 时间：2013-02-11T23:38:10.187
> 
> 标签：jquery, css, twitter-bootstrap, less

我修改了一个[twitter 引导主题](http://wbpreview.com/previews/WB06065DN/index.html)：我在菜单隐藏 ul 中添加了一些 li 项目，这是[自定义页面](http://dl.dropbox.com/u/26311951/home.html)。我的菜单有问题：在“组合”项目上的悬停事件中，显示其中包含的 ul 和 li 元素，但它们被滑块元素（图像和文本）覆盖。我已经尝试在 ul 的 li 元素中添加白色背景，但这并没有解决问题。是否有任何可以解决问题的css或其他修复程序添加？

谢谢，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:42:33.430

尝试使用`z-index`比`ul`底层项目更大的那个。