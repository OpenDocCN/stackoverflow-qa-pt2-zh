# StackOverflow 问答 12966000-12966999

# google-app-engine - EntityNotFoundException：无法检索实体类型...提交时

> ID：12966001
> 
> 赞同：4
> 
> 时间：2012-10-19T01:08:10.547
> 
> 标签：google-app-engine

当我的 servlet 尝试写入记录时，它遇到了以下异常：

```
javax.persistence.EntityNotFoundException: Could not retrieve entity of  kind MyEntity with key MyEntity(1318001) 
```

即使我检查并确保我的数据存储中不存在 id 1318001。它发生在我的 servlet 提交事务时。

这是我的编码：

```
EntityManagerFactory emfInstance = 
    Persistence.createEntityManagerFactory("transactions-optional"); 
EntityManager em = emfInstance.createEntityManager(); 
em.getTransaction().begin(); 
MyEntity ent = new MyEntity(....); 
em.persist(ent); 
log.info(ent.toString()); 
em.getTransaction().commit(); 
```

我可以在日志中看到我的 ent，但它导致了 commit 语句中的异常。有人可以帮忙吗？

编辑：@jirungaray @Nicholas，谢谢您的评论。问题没有解决。我最终添加`try`并`catch`在`commit()`监视它何时发生。现在我已经用另一个应用程序替换了该应用程序，并且没有遇到同样的问题。如果您仍然感兴趣，这里是实体。

```
@Entity
public class MyEntity implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long key;
    private String tDate;
    private int stkCode;
    private Text tradeRec;

    public MyEntity() {}
    public MyEntity(int code, String dd, Text trec) {
        this.stkCode = code;
        this.tDate = dd;
        this.tradeRec = trec;
    }
    ..... getter and setter skipped 
```

# php - 如何从一个 MySQL 表中打印出多个条目？

> ID：12966003
> 
> 赞同：-1
> 
> 时间：2012-10-19T01:08:14.753
> 
> 标签：php, mysql

> **可能重复：**
> [mysql表名上的PHP for循环](https://stackoverflow.com/questions/4707303/php-for-loop-on-mysql-table-names)

我是 MySQL 的新手，我会喜欢你的专业知识。
我有一个 MySQL 表，如下所示：

```
ID | LISTNAME | CONTENTS
1  | LIST1    | Hi,Hello,Sup
2  | LIST2    | Nothin,bad,sad
3  | LIST3    | Bye,gday,seeya 
```

我想回应`CONTENTS`每个`LISTNAME`. 我可以使用 foreach() 循环来做到这一点吗？如果是这样，怎么做？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:11:18.263

不，只使用

```
Select * from table 
```

如果您使用的是 php，请使用一段时间

也许你需要一个好的教程。

[http://www.freewebmasterhelp.com/tutorials/phpmysql](http://www.freewebmasterhelp.com/tutorials/phpmysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:17:17.800

```
$result = mysql_query('SELECT * FROM table;');
while ($aux = mysql_fetch_assoc($result)) {
  echo($aux['LISTNAME'] . '<br>');
} 
```

# jquery - Caroufredsel 分页文本？

> ID：12966014
> 
> 赞同：2
> 
> 时间：2012-10-19T01:09:31.357
> 
> 标签：jquery, wordpress, caroufredsel

我以一种非常基本的方式使用 carouFredsel 插件 - 4 张带副本的幻灯片，侧面的 4 个选项卡用作幻灯片之间的“导航”。这个插件有一个内置的分页功能，可以自动构建分页，数字 1-x 作为文本，您可以单击以转到该幻灯片。我需要自定义文本在那里——并且花了很长时间试图找出一种方法，但看不到一个。我是 Jquery 的新手。另外我应该提到我正在通过 Wordpress 动态拉入幻灯片内容，但不需要动态分页副本。任何解决方案都可以！

```
<script type="text/javascript"> 
var $j = jQuery.noConflict();
$j(document).ready(function() {
    // Using custom configuration
    $j("#home-banner").carouFredSel({
        items               : 1,
        direction           : "left",
        auto : {
            play            :false,
        },
        pagination          : "#home-banner_pag",
        scroll : {
            items           : 1,
            fx              : "fade",
            duration        : 200
        }                   

    }); 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T01:34:51.340

尝试更换`pagination: "#home-banner_pag",`宽度

`pagination: {anchorBuilder: function(nr) { return '<a href="#"><span>'+'custom text here'+nr+'</span></a>'; }},`

没有测试，但应该是这样的。

# css - 移动鼠标 CSS 时失去悬停

> ID：12966015
> 
> 赞同：3
> 
> 时间：2012-10-19T01:09:38.050
> 
> 标签：css, hover, siblings

所以，我是 HTML 和 CSS 的初学者，我尝试学习 jQuery 和 JavaScript，但还没有成功。无论如何，我想将鼠标悬停在一个地方，并在其他地方触发一个 div，所以我使用了相邻的兄弟代码，但问题是一旦事件被触发，并且我想要的框就在那里，如果我移动我的鼠标，它会再次触发它，而不是停留在“悬停”元素上，直到我将鼠标移开。有没有什么办法解决这一问题？

这是 CSS 的相邻兄弟元素部分：

```
.b:hover ~ .a {
  position:absolute;
  height:1000%;
  width:100px;
  margin-top:-1000px;
  margin-left:100px;
  background-color:#b6c9e7;
  z-index:1000;
  opacity:1;
  transition:  all 0.4s ease-in-out 0s;
  -moz-transition: all 0.4s ease-in-out 0s;
  -webkit-transition:  all 0.4s ease-in-out 0s;
  -o-transition:  all 0.4s ease-in-out 0s;
  -webkit-animation-duration: 2s;
}​ 
```

这是我的代码：[在 JSFiddle](http://jsfiddle.net/Zmk8h/)

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:18:20.827

Your zindex is off. When you move the mouse you are actually rolling over a not b, and as it is b that has the hover state you are pining the roll out, which is resetting the position. set a to be behind b and it will work as desired.

```
z-index:999; 
```

[http://jsfiddle.net/2g2uY/](http://jsfiddle.net/2g2uY/)

The zindex is basically the stack number so if something has a higher zindex it means it is in front of another element. This only really comes into play when elements overlay, when using absolutely and relatively positioned elements.

Also, when you use a :hover selector you don't need to redefine the elements that you are not changing. They are all inherited; only change the attributes that are different on the hover state.

# iphone - 块和内存释放问题

> ID：12966020
> 
> 赞同：0
> 
> 时间：2012-10-19T01:09:56.540
> 
> 标签：iphone, objective-c, ios, ipad

我有以下代码：

```
- (void) likeImage:(AHInstagramImageData *) image
            success:(void (^)(BOOL success))success
           failure:(void (^)(NSError* error, NSInteger statusCode))failure
{
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            [AHInstagramSession session].accessToken, @"access_token",
                            nil];
    NSString *likeCommentPath = [NSString stringWithFormat:@"media/%@/likes", image.imageId];
    [self postPath:likeCommentPath parameters:params success:^(AFHTTPRequestOperation *operation, id response){
        if ([operation hasAcceptableStatusCode]) {
            [[LocalyticsSession sharedLocalyticsSession] tagEvent:@"Like"];

            [[AHFacebookSession session] postAction:@"like" forImageData:image];
            [[AHTwitterSession session] postAction:@"like" andObject:image];

            success(YES);

    }failure:^(AFHTTPRequestOperation *operation, NSError *error){
         failure(error, operation.response.statusCode);
         NSLog(@"Failure on liking a photo %@", [error description]);
    }];
} 
```

它给了我错误：

![在此处输入图像描述](../Images/a7a301843fbc4770851a0b722517ff41.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:18:06.957

Doesn't look like a memory problem. Check `success` block if it was actually set before you invoke it.

```
if (success)
{
    success(YES);
} 
```

# c# - 在 C# 中访问双精度的“N 位”？

> ID：12966023
> 
> 赞同：2
> 
> 时间：2012-10-19T01:10:43.920
> 
> 标签：c#, .net

我对 c# 有点陌生，我正在尝试检查双精度的前 18 位的状态。我怎样才能转换它并编写一个程序来检查？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:16:57.380

您应该知道您将获得的位将符合[双精度浮点数的 IEEE 754 标准](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)。这些并不容易理解，就像一个中的位一样`int`。无论如何，您可以通过[BitConverter.DoubleToInt64Bits](http://msdn.microsoft.com/en-us/library/system.bitconverter.doubletoint64bits.aspx)或[BitConverter.GetBytes](http://msdn.microsoft.com/en-us/library/a5be4sc9.aspx)获得值（但要注意字节顺序），具体取决于您是想使用`byte`s 还是 a `long`。

# converter - 如何将在线文档转换为 pdf 进行打印

> ID：12966025
> 
> 赞同：-1
> 
> 时间：2012-10-19T01:11:10.263
> 
> 标签：converter

我想要整个 scikit 文档的打印

[http://scikit-learn.org/stable/user_guide.html](http://scikit-learn.org/stable/user_guide.html)

他们没有 pdf 版本和 .

我不想打开 100 个单独的页面然后打印。

有什么简单的方法可以做到这一点。任何工具或在线网站或其他东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:36:22.243

它使用 Python 中的 Sphinx 文档系统，因此只需从[https://github.com/scikit-learn/scikit-learn/tree/master/doc](https://github.com/scikit-learn/scikit-learn/tree/master/doc)获取源代码，确保您拥有 Sphinx 库安装，然后要求它为您制作 PDF。

# javascript - 选中 HTML 表格以选择数据行

> ID：12966029
> 
> 赞同：1
> 
> 时间：2012-10-19T01:11:20.970
> 
> 标签：javascript, html, arrays

我正在尝试根据复选框输入在表中创建所选行的值的数组列表。我认为我的问题是 pop 命令，但我不确定。基本上，用户可以选择行 x、y、z，并查看这些存储在数组中的内容，然后取消选择 z 以仅查看 x 和 y。

```
<script type="text/javascript"> 
    var values = new Array();

    function setrow(row)
    { 
        values = [];
        for (var i = 1; i < 5; i++) {
            if (values[i] = row) {
               values.pop(i);

            } else {
              values.push(row);
            }
        }
    } 

    function display() {
        for (var i = 0; i < values.length; i++) {
            console.log(values[i]);
        }    
    }

</script> 

<table cellspacing=0 cellpadding=0 border=1> 
<tr id="r1"> 
    <td><input type="checkbox" name="rctrl" onclick="return setrow('r1')"></td>
    <td>text</td> 
</tr> 

<tr id="r2"> 
    <td><input type="checkbox" name="rctrl" onclick="return setrow('r2')"></td>
    <td>text</td> 
</tr> 

<tr id="r3"> 
    <td><input type="checkbox" name="rctrl" onclick="return setrow('r3')"></td>
    <td>text</td> 
</tr> 

<tr id="r4"> 
    <td><input type="checkbox" name="rctrl" onclick="return setrow('r4')"></td>
    <td>text</td> 
</tr> 
</table> 

<button type="button" onClick="display()">Click</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:19:52.793

It'll be much simpler to store the value of each checkbox in an object, using r* as the keys:

```
var values = {};

function setrow(checkbox, row)
{ 
    values[row] = checkbox.checked;
} 

function display() {
    console.log(values);  
}​ 
```

Example: [http://jsfiddle.net/4TjhZ/](http://jsfiddle.net/4TjhZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:38:39.740

你有几个问题。

1.  `values`每次调用时，您都将数组设置为空数组`setrow()`
2.  因为您从 1 开始循环，所以您永远不会遍历您的第一个数组项。
3.  该`pop()`方法自动删除数组中的最后一项。它不像您使用它那样需要参数。您需要使用[拼接](http://www.w3schools.com/jsref/jsref_splice.asp)方法：`splice(i, 1)`
4.  您的`if`语句应该使用`==`or `===`（作为比较）而不是`=`（setter）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:56:06.867

一些评论：

```
var values = new Array(); 
```

大多数使用数组文字，因为它的类型较少并且构造函数可能会令人困惑，所以：

```
var values = []; 
```

.

```
function setrow(row)
{ 
    values = []; 
```

糟糕，您刚刚为值分配了一个新的数组实例。

```
 for (var i = 1; i < 5; i++) {
        if (values[i] = row) {
           values.pop(i); 
```

`pop`不接受任何参数，它只是删除并返回数组的最后一个成员。

大概你想要一个检查行的数组，那么为什么不在表上放置一个点击监听器并在它获得点击时更新数组，例如

```
<table onclick="updateArray(this);" ...> 
```

然后是函数：

```
var values;
function updateArray(table) {
  var arr = [];
  var rctrls = document.getElementsByName('rctrl');
  var el, row;

  for (var i=0, iLen=rctrls.length; i<iLen; i++) {
    el = rctrls[i];

    if (el.checked) {
      arr.push(el.parentNode.parentNode);
    }
  }
} 
```

你可以变得更复杂一点，我们可以使用一个从输入到第一行元素的函数，例如

```
function upTo(el, tagName) {
  tagName = tagName.toLowerCase();
  var el;
  do {
    el = el.parentNode;
    if (el.tagName.toLowerCase() == tagName) {
      return el;
    }
  } while (el.parentNode)
} 
```

然后做：

```
 if (el.checked) {
      row = upTo(el, 'tr');
      if (row) {
        arr.push(row);
      }
    } 
```

# primefaces - PrimeFaces push 和 Glassfish

> ID：12966034
> 
> 赞同：2
> 
> 时间：2012-10-19T01:12:00.323
> 
> 标签：primefaces, glassfish

我正在使用：
Glassfish 3.1.2.2 (build 5)
Primefaces 3.4.1
Linux 上的 Firefox 10.0.0.7

Primefaces Push 是否适用于 Glassfish？我问是因为当我点击我的 *.xhtml 页面时，我不断收到 ClassNotFoundExceptions。所以我会得到一个未找到的异常，下载 jar 并找不到添加新类。到目前为止，我有这些罐子......

大气彗星-1.0.2.jar
大气运行时-1.0.2.jar
cataline-6.0.20.jar

但是我的下一个 ClassNotFoundException 是 org.jboss.servlet.http.HttpEventServlet 并且因为我使用的是 Glassfish，这让我怀疑我是否做得对。

我想要做的就是通过 primepush 从 MDB 向网页发送一条消息，并让它在咆哮中显示为通知。

我已将以下内容添加到我的 web.xml 中。

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/primepush/*</url-pattern>
</servlet-mapping> 
```

这是我的 *.xhtml

```
<script type="text/javascript">
    function handleMessage(msg) {
        msg.severity = 'info';
        grow.show([msg]);
    }
</script>

    <p:socket channel="/notifications" onMessage="handleMessage"/> 
```

这是在我的消息驱动 bean 中。

```
PushContext pushContext = PushContextFactory.getDefault().getPushContext();

pushContext.push("/notifications", new FacesMessage("Test Summary", "Test Detail")); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:07:27.643

在 glassfish 3.1.2 和 primefaces 3.4 中

我添加以下内容以使 facesmessage 示例正常工作。

网页.xml：

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/primepush/*</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>primefaces.PUSH_SERVER_URL</param-name>
    <param-value>http://localhost:8080</param-value>
</context-param> 
```

pom.xml（用于 Maven）

```
 <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-runtime</artifactId>
        <version>1.0.1</version>
    </dependency>
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.4.1</version>
    </dependency> 
```

# google-apps-script - 使用 google drive 脚本在提交表单时发送包含照片的确认邮件

> ID：12966035
> 
> 赞同：1
> 
> 时间：2012-10-19T01:12:04.520
> 
> 标签：google-apps-script

我为邮件列表创建了一个表单。该表单还有一个非常常见的脚本，可在表单提交时向用户发送确认电子邮件

到目前为止我的代码：

```
function formSubmitReply(e) {
  var userEmail = e.values[2];
  MailApp.sendEmail(userEmail, 
                    "Insider emails", 
                    "Thanks for registering for our mailing list.",                    
                    {name:"Blah"});
}​ 
```

我将使用什么代码在电子邮件正文中插入优惠券图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:31:15.580

文档中的示例

```
function inlineImage() {
  var googleLogoBlob = UrlFetchApp.fetch("http://www.google.com/intl/en_com/images/srpr/logo3w.png").getBlob().setName("googleLogoBlob");
  var youtTubeLogoBlob = UrlFetchApp.fetch("http://s.ytimg.com/yt/img/logos/youtube_logo_standard_againstwhite-vflKoO81_.png").getBlob().setName("youtTubeLogoBlob");

  MailApp.sendEmail(
    "sg.appsscript@gmail.com",
    "Logos",
    "", 
    { htmlBody: 
         "inline Google Logo<img src='cid:googleLogo'> images! <br/> inline YouTube Logo <img src='cid:youTubeLogo'>",
     inlineImages: 
         { googleLogo: googleLogoBlob,
           youTubeLogo:youtTubeLogoBlob
          }
    }

    );
} 
```

请参阅：[https ://developers.google.com/apps-script/class_gmailapp#sendEmail](https://developers.google.com/apps-script/class_gmailapp#sendEmail)

# jquery - 将锚附加到包含具有相同 href 属性的锚的父级

> ID：12966036
> 
> 赞同：1
> 
> 时间：2012-10-19T01:12:20.917
> 
> 标签：jquery

我是 SO 新手和 jQuery 新手。我有从数据库动态创建到 3 个不同的无序列表的链接。我正在尝试将底部两个列表中的每个列表中的列表项附加到新 ul 标记内的顶部列表中，该标记将是顶部列表中每个列表项的锚点的兄弟。我需要通过匹配 href 属性来做到这一点。我开始使用下面的脚本来查看是否可以排除 url 的最后一部分，以便更容易匹配 href 属性。任何帮助将不胜感激。

```
<script>$(document).ready(function () {
  var href = $('ul.list li:nth-child(1) a').attr("href");
  var n = href.lastIndexOf('/');
  alert(href.substring(0, n != -1 ? n : s.length));
});
</script>
</head>

<body>
  <ul class="list">
    <li><a href="http://www.mysite.com/index.html">My Site</a></li>
    <li><a href="http://www.google.com">Google</a></li>
    <li><a href="http://www.yahoo.com">Yahoo</a></li>
    <li><a href="http://www.cnn.com">CNN</a></li>
    <li><a href="http://www.espn.com">ESPN</a></li>
    <li><a href="http://www.tsys.com">TSYS</a></li>
  </ul>
  <ul class="combination">
    <li><a href="http://www.mysite.com/index.html">My Site</a></li>
    <li><a href="http://www.google.com">To Index Page</a></li>
  </ul>
  <ul class="combination2">
    <li><a href="http://www.mysite.com/index.html">My Site Too</a></li>
    <li><a href="http://www.yahoo.com">Yahoo Redux</a></li>
  </ul>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:41:51.650

像这样的[小提琴](http://jsfiddle.net/DCpJ5/)

HTML

```
<ul class="list">
    <li><a href="http://www.mysite.com/index.html">My Site</a></li>
    <li><a href="http://www.google.com">Google</a></li>
    <li><a href="http://www.yahoo.com">Yahoo</a></li>
    <li><a href="http://www.cnn.com">CNN</a></li>
    <li><a href="http://www.espn.com">ESPN</a></li>
    <li><a href="http://www.tsys.com">TSYS</a></li>
</ul>
<ul class="combination">
    <li><a href="http://www.mysite.com/index.html">My Site</a></li>
    <li><a href="http://www.google.com">To Index Page</a></li>
</ul>
<ul class="combination">
    <li><a href="http://www.mysite.com/index.html">My Site Too</a></li>
    <li><a href="http://www.yahoo.com">Yahoo Redux</a></li>
</ul> 
```

Javascript

```
$('ul.combination li').each(function() {
    var element = $('.list li a[href="' + $(this).find('a').attr('href') + '"]');

    if (element.siblings('ul').length  == 0) {
        element.after('<ul />');
    }

    element.next('ul').append($(this));
}) 
```

# extjs - 获取手机联系人

> ID：12966039
> 
> 赞同：0
> 
> 时间：2012-10-19T01:12:36.900
> 
> 标签：extjs, sencha-touch-2

有没有办法在 sencha touch 2 中获取移动联系人而不使用 phonegap？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:39:55.150

目前还没有办法直接在 ST2 中执行此操作...您必须使用 phonegap 或类似的东西

# joomla - Joomla：根据用户组添加页面类

> ID：12966042
> 
> 赞同：0
> 
> 时间：2012-10-19T01:13:11.853
> 
> 标签：joomla, usergroups

Joomla 2.5 有没有办法将特定的 css 类添加到特定于登录用户组的正文中。

例如，我有四个用户组，个人高级版、个人标准版、企业高级版和企业标准版。我想要类似的东西：

```
<body class="individual-standard"> 
```

或者

```
<body class="corporate-standard"> 
```

这是当前的正文标签：

```
<body id="ff-<?php echo $fontfamily; ?>" class="<?php echo $fontstyle; ?> <?php echo $pstyle; ?> <?php echo $bgstyle; ?> <?php echo $pageclass; ?> iehandle"> 
```

我试过把它放在头上：

```
 $user =& JFactory::getUser();
    $pageclass ="";
    if(array_key_exists('individual premium',$user->groups)){
    $pageclass .="individual-premium";
    }
    if(array_key_exists('corporate premium',$user->groups)){
    $pageclass .="corporate-premium";
    }
     if(array_key_exists('corporate standard',$user->groups)){
    $pageclass .="corporate-standard";
    }
     if(array_key_exists('individual standard',$user->groups)){
    $pageclass .="individual-standard";
    } 
```

这是身体标签：

```
<body id="ff-<?php echo $fontfamily; ?>" class="<?php echo $fontstyle; ?>  <?php echo $pstyle; ?> <?php echo $bgstyle; ?> <?php echo $pageclass; ?> iehandle"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:30:22.783

您首先获取用户组，然后按照以下代码设置类-

在模板文件夹的 index.php 中

```
$user =& JFactory::getUser();
    $pageclass ="";
    if(array_key_exists('individual premium',$user->groups)){
    $pageclass .="individual-premium";
    }
    if(array_key_exists('corporate premium',$user->groups)){
    $pageclass .=" corporate-premium";
    }
     if(array_key_exists('corporate standard',$user->groups)){
    $pageclass .=" corporate-standard";
    }
     if(array_key_exists('individual standard',$user->groups)){
    $pageclass .=" individual-standard";
    }

       <body id="ff-<?php echo $fontfamily; ?>" class="<?php echo $fontstyle; ?>  <?php echo $pstyle; ?> <?php echo $bgstyle; ?> <?php echo $pageclass; ?> iehandle"> 
```

例如，如果“企业高级”和“企业标准”组页面类中的用户将是- `corporate-premium corporate-standard`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T16:21:35.120

考虑“隐藏”字段，其中“较低”用户组将隐藏更多而“较高”将隐藏更少（最高的什么都没有），最好以金字塔的方式使其“独占”，例如：

```
<?php $user =& JFactory::getUser();
    $pageclass ="";
    if(array_key_exists('Reg-D group ID',$user->groups)){
    $pageclass .="reg-d";
    } else if(array_key_exists('Reg-C group ID',$user->groups)){
         $pageclass .=" reg-c";
         } else if(array_key_exists('Reg-B group ID',$user->groups)){
              $pageclass .=" reg-b";
              } else if(array_key_exists('Reg-A group ID',$user->groups)){
                   $pageclass .=" reg-a";
                   }
?> 
```

其中 $user->groups 变量返回用户组 ID，[这里是另一种选择](https://stackoverflow.com/a/10475176/12970100)

我不确定代码，你怎么看？

# c# - 在 WCF Web 服务客户端中生成 XML 哈希

> ID：12966043
> 
> 赞同：3
> 
> 时间：2012-10-19T01:13:11.767
> 
> 标签：c#, .net, wcf

我的任务是创建一个 C# .net WCF Web 服务客户端，该客户端将为事务网关使用 Web 服务。部分要求是我必须创建多个值的 HMAC 哈希并将这些值注入 HTTP 标头。我相信我已经弄清楚了其中的大部分内容，但让我感到困惑的一部分数据是，HMAC 哈希所需的值之一是交易实际内容的 SHA-1 哈希。由于我使用 SOAP 使用服务引用来构建它，所以这个数据是 XML。我的问题是如何散列构成此交易的 XML？

任何人都可以提供有关如何完成此任务的指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:02:45.613

假设这不是 MS 或其他人根据@John Saunders 的建议已经实现的协议，您可以通过连接[IClientMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iclientmessageinspector.aspx)的实例来实现自己的协议。

消息检查器使您可以在发送原始 SOAP 消息之前访问它，这将允许您对其进行散列并将其附加到标头中。

[这篇博文详细介绍了使用 IClientMessageInspector 添加自定义标头](http://weblogs.asp.net/paolopia/archive/2008/02/25/handling-custom-soap-headers-via-wcf-behaviors.aspx)

# java - Java 线程：如何实现线程的可运行工作

> ID：12966044
> 
> 赞同：5
> 
> 时间：2012-10-19T01:13:25.360
> 
> 标签：java, multithreading

我知道，如果您想线程化，您可以在 java 中扩展线程或实现 runnable 到多线程。但是为什么一定要实现一个接口让java去线程呢？使 java 线程工作的可运行接口的重要性是什么？Java的接口是从什么东西扩展而来的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T01:15:06.400

接口的唯一特别之处`Runnable`在于它`Thread`接受了它的构造函数。这只是一个普通的旧界面。

与大多数接口一样，关键是您正在按照合同进行编程：您同意将要运行的代码放入`Runnable#run()`实现中，并`Thread`同意在另一个线程中运行该代码（当您创建并启动`Thread`它时） .

它`Thread`实际上是“执行”多线程（因为它与本机系统交互）。的实现`Runnable`就是您放置要告诉 a`Thread`运行的代码的位置。

实际上，您可以实现 a`Runnable`并运行它，而无需让它在单独的线程中运行：

```
Runnable someCode = new Runnable() {
    public void run() {
       System.out.println("I'm a runnable");
    }
};
someCode.run(); 
```

所以`Runnable`它本身和多线程没有任何关系，它只是一个标准的接口，在将一段代码封装在一个对象中时进行扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T01:14:55.073

`Runnable`在功能方面，实现接口和扩展`Thread`类没有区别。但是在某些情况下，`Runnable`可能会首选实现接口。想想你的类必须从其他类继承并且它应该显示线程功能的情况。由于您的类不能从多个类继承（Java 不支持它），因此您的类可以`Runnable`在这种情况下实现接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T01:31:46.987

> 但是为什么一定要实现一个接口让java去线程呢？

您不需要，正如您之前所说，您可以扩展 Thread 对象并实现公共 void run 方法。如果您想要一种更有条理和更灵活（是的，灵活）的方法，您肯定希望使用 Runnable，原因很明显：代码可重用性。

当我说有组织的时候，我想说的是很容易维护一个

```
Runnable doSomething = new Runnable()
{
    @Override
    public void run()
    {
        goAndDoSomethingReallyHeavyWork();
    }
}; 
```

然后为另一个线程重用相同的可运行对象，或者在另一个时刻重用同一个线程（是的，您实际上可以重用一个线程），而不是将 2 个或更多线程扩展为您将使用一次的对象。

> 使 java 线程工作的可运行接口的重要性是什么？

重要的是 Thread 对象将“知道”您的 Runnable 有一个方法 run 并在必要时执行它（因此停止、暂停和其他 Thread 操作）。

> Java的接口是从什么东西扩展而来的吗？

这个问题值得我 +1 给你。我真的很想知道，但它似乎是语言的一个特性，而不是像扩展 Object 超类的所有其他对象一样本身的产物。

我希望它有所帮助。干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-12T07:51:03.347

> 但是为什么一定要实现一个接口让java去线程呢？

当您创建一个线程扩展类 Thread 时，您不能再扩展任何其他类（多重继承）。另一方面，如果您使用 Runnable，则可以在需要时获得扩展任何类的继承优势。

除了上述之外，您还可以获得内存和性能级别的好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-20T07:09:44.750

# `ExecutorService.submit​( Runnable task )`

你说：

> 延长线

我们不再需要直接寻址`Thread`类来并发运行代码。[Java 5](https://en.wikipedia.org/wiki/Java_version_history#J2SE_5.0)引入了 Executors 框架。请参阅[Oracle 的教程](https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)。

执行器服务管理在一个或多个后台线程上运行您的任务。您可以从通过[`Executors`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executors.html)类实例化的多种执行器服务中进行选择。

对于偶尔的一些短期任务，请使用由缓存线程池支持的执行器服务。

```
ExecutorService executorService = Executors.newCachedThreadPool();
executorService.submit( yourRunnableObjectGoesHere ) ; 
```

an 的工作`ExecutorService`是在一个名为[`run`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html#run())or的方法中执行代码[`call`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Callable.html#call())。

正如其他正确答案所解释的那样，[`Runnable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html)接口的目的是它代表一个合同。当您的代码声称要实现该`Runnable`接口时，您承诺您的代码有一个名为 exact 的方法`run`。

Java 编译器注意到这个承诺并检查合同是否已履行。如果您传递的对象未能 (a) 声明它实现`Runnable`，*并且*(b) 携带一个`run`不带参数且不返回值的方法，那么编译器会将这种情况标记为错误。

因此，执行器服务要求您将任务作为实现[`Runnable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html)（或[`Callable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Callable.html)）接口的类的对象提交，以保证当任务到达以在后台线程上执行时，该任务具有精确命名`run`（或`call`for `Callable`）的方法。

## 示例代码

这是一些示例代码。请注意执行器服务如何不关心您传递给其[`submit`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable))方法的对象类型。你可以传递一个类的对象`Dog`, `SalesReport`, 或者`Payroll`— 没关系。执行器服务所关心的是传递给的对象`submit`有一个名为`run`.

```
package work.basil.example;

import java.time.Duration;
import java.time.Instant;
import java.util.Objects;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Demo
{
    public static void main ( String[] args )
    {
        Demo app = new Demo();
        app.demo();
    }

    private void demo ( )
    {
        Runnable task = new Runnable()
        {
            @Override
            public void run ( )
            {
                System.out.println( "Doing this work on a background thread. " + Instant.now() );
            }
        };

        ExecutorService executorService = null;
        try
        {
            executorService = Executors.newCachedThreadPool();
            executorService.submit( task );
            executorService.submit( task );
            executorService.submit( task );

            // Wait a moment for the background threads to do their work.
            try
            {
                Thread.sleep( Duration.ofSeconds( 2 ).toMillis() );
            }
            catch ( InterruptedException e )
            {
                e.printStackTrace();
            }
        }
        finally
        {
            if ( Objects.nonNull( executorService ) ) { executorService.shutdown(); }
            System.out.println( "Ending the main thread. " + Instant.now() );
        }
    }
} 
```

运行时：

```
Doing this work on a background thread. 2020-12-20T07:16:26.119414Z
Doing this work on a background thread. 2020-12-20T07:16:26.119176Z
Doing this work on a background thread. 2020-12-20T07:16:26.119255Z
Ending the main thread. 2020-12-20T07:16:28.124384Z 
```

### Lambda 语法

[`Runnable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html)如果您对现代 Java 中的 lambda 语法感到满意，我们可以将定义您的实现的代码缩短为一行。效果相同，只是语法不同。

```
package work.basil.example;

import java.time.Duration;
import java.time.Instant;
import java.util.Objects;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Demo
{
    public static void main ( String[] args )
    {
        Demo app = new Demo();
        app.demo();
    }

    private void demo ( )
    {
        Runnable task = ( ) -> System.out.println( "Doing this work on a background thread. " + Instant.now() );

        ExecutorService executorService = null;
        try
        {
            executorService = Executors.newCachedThreadPool();
            executorService.submit( task );
            executorService.submit( task );
            executorService.submit( task );

            // Wait a moment for the background threads to do their work.
            try
            {
                Thread.sleep( Duration.ofSeconds( 2 ).toMillis() );
            }
            catch ( InterruptedException e )
            {
                e.printStackTrace();
            }
        }
        finally
        {
            if ( Objects.nonNull( executorService ) ) { executorService.shutdown(); }
            System.out.println( "Ending the main thread. " + Instant.now() );
        }
    }
} 
```

## 遗产

您问：

> Java的接口是从什么东西扩展而来的吗？

Java 中的所有类都扩展了[`Object`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html)该类或从`Object`.

Java 中的接口不扩展自任何类。请记住，接口只是一个契约，是某个类可能选择做出的关于具有特定名称的方法的承诺，这些方法接受某些类型的参数并返回某种类型的值。

Java 中的接口可以扩展一个或多个其他接口。这样做只是为声称实现该接口的类所做出的承诺添加了更多方法。请注意，`Runnable`它由其他两个接口扩展：[`RunnableFuture`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/RunnableFuture.html)和[`RunnableScheduledFuture`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/RunnableScheduledFuture.html).

# java - 使 Java 类在 Clojure 中作为序列工作

> ID：12966051
> 
> 赞同：8
> 
> 时间：2012-10-19T01:15:19.507
> 
> 标签：java, clojure, sequence, clojure-java-interop

我正在使用一个表示一系列结果的 Java 类（有点像 Clojure 向量）。

我想将这个类与典型的 Clojure 序列函数一起使用（即我想让这个类表现得好像它支持序列抽象）但是我**不能改变这个类**，所以我不能让它实现`clojure.lang.Seqable`或类似的。此外，令人讨厌的是，该类没有实现`java.util.Collection`or `java.lang.Iterable`。

我可以看到几个选项：

*   `iterator-seq`在对象的（现有）迭代器上使用。
*   将对象包装在另一个实现`java.util.Collection`/的类中`clojure.lang.Sequable`
*   通过查询对象创建一个构建 Clojure 向量或序列的函数

还有其他选择吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:31:23.547

最快和最直接的方法是使用`iterator-seq`.

这确实引出了一个问题：为什么核心 Clojure 不提供像 SeqSource 这样会被`seq`. 然后可以“扩展”非标准集合以提供 seq，类似于 InternalReduce 的工作方式`reduce`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T06:24:41.610

[用于`proxy`](http://clojure.org/java_interop#Java%20Interop-Implementing%20Interfaces%20and%20Extending%20Classes)扩展类并使其实现`ISeq`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:30:08.290

我的第一枪是创建该对象的惰性序列：

```
(defn sequify [obj]
  (letfn [(inner [idx] 
                 (when (< idx (.size obj))
                          (cons (.get obj idx)
                                (lazy-seq 
                                  (inner (inc idx))))))]
    (inner 0))) 
```

只需用适当的方法替换`.size`和。`.get`

与解决方案相比，如果您想提高性能，编写包装器可能更合适`lazy-seq`。

# ruby-on-rails - 呈现基于 JSON 的 API 响应轨道

> ID：12966052
> 
> 赞同：0
> 
> 时间：2012-10-19T01:15:25.810
> 
> 标签：ruby-on-rails, json, parsing, hash, nested-loops

我正在努力呈现基于 JSON 的 API 的结果，并且正在努力解决如何正确迭代结果。我的 API 调用的要点：

```
@invoice = ActiveSupport::JSON.decode(api_response.to_json) 
```

生成的哈希数组如下：

```
{
"amount_due"=>4900, "attempt_count"=>0, "attempted"=>true, "closed"=>true, 
"currency"=>"usd", "date"=>1350514040, "discount"=>nil, "ending_balance"=>0, "livemode"=>false, 
"next_payment_attempt"=>nil, "object"=>"invoice", "paid"=>true, "period_end"=>1350514040, "period_start"=>1350514040, "starting_balance"=>0, 
"subtotal"=>4900, "total"=>4900, 
"lines"=>{
    "invoiceitems"=>[], 
    "prorations"=>[], 
    "subscriptions"=>[
        {"quantity"=>1, 
            "period"=>{"end"=>1353192440, "start"=>1350514040}, 
            "plan"=>{"id"=>"2", "interval"=>"month", "trial_period_days"=>nil, "currency"=>"usd", "amount"=>4900, "name"=>"Basic"}, 
            "amount"=>4900}
    ]
}} 
```

我正在尝试遍历并显示所有“行”以进行渲染和开票。每个“行”可以有 0 个或多个“invoiceitems”、“prorations”和“subscriptions”。

我已经做到了这一点，但无法弄清楚我们如何处理任何嵌套。

```
<% @invoice["lines"].each_with_index do |line, index| %>

# not sure what the syntax is here ?

<% end %> 
```

我目前正在视图中工作，但是一旦我对其进行排序，就会将其中的大部分内容移至帮助程序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:28:57.060

根据您附加的示例*Hash*，我怀疑您遇到了困难，因为您尝试像枚举*Array*一样枚举*@invoice["lines"]*中的对象。这样做的问题是对象是一个*哈希*，因此枚举的处理方式略有不同。

 **由于总是返回键*invoiceitems*、*subscriptions*和*prorations*并且还基于这些类别中的每一个在生成的发票上可能看起来不同的假设，因为它们将具有不同的属性，因此您应该只对中的 3 个值有 3 个单独的循环哈希。我已经编写了一个如何在下面工作的示例：

```
<% @invoice["lines"]["invoiceitems"].each_with_index do |item, index| %>
  # display logic of an invoice item
<% end %>

<% @invoice["lines"]["prorations"].each_with_index do |proration, index| %>
  # display logic of a proration
<% end %>

<table>
  <tr>
    <th>#</th>
    <th>Quantity</th>
    <th>Start Period</th>
    <th>Amount</th>
  </tr>
  <% @invoice["lines"]["subscriptions"].each_with_index do |subscription, index| %>
  <tr>
    # display logic of a subscription
    <td><%= index %></td>
    <td><%= subscription["quantity"] %></td>
    <td>
      <%= DateTime.strptime("#{subscription["period"]["start"]}",'%s').strftime("%m/%d/%Y") %>
    </td>
  </tr>
  <% end %>
</table> 
```

虽然我没有完成*订阅*中的所有字段，但这应该足以作为继续进行的示例。**

# android - 触摸文本框后测试键盘是否存在

> ID：12966054
> 
> 赞同：1
> 
> 时间：2012-10-19T01:15:49.207
> 
> 标签：android, keyboard

我正在编写基于 Instrumentation Framework 的测试用例来测试应用程序 esp 的活动。

1.  触摸文本框
2.  验证键盘是否出现？

我能够使用仪器模拟触摸文本框..它有效。但是，我坚持第二步。

有人可以帮我解决这个问题吗？

# objective-c - UINavigationController：推/弹出，后退按钮动画褪色或褪色+移位？

> ID：12966056
> 
> 赞同：1
> 
> 时间：2012-10-19T01:16:21.487
> 
> 标签：objective-c, ios, uinavigationcontroller, uibutton

最近我在导航堆栈中推送/弹出视图控制器时遇到问题，我有一个带有后退按钮的 VC，我这样做：

```
UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
[backButton setImage:[UIImage imageNamed:@"back-button.png"] forState:UIControlStateNormal];
[backButton addTarget:self action:@selector(popCurrentVC:) forControlEvents:UIControlEventTouchUpInside];
backButton.frame = CGRectMake(0, 0, 67, 31);

UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithCustomView:backButton];

[self.navigationItem setLeftBarButtonItem:item animated:YES]; 
```

然后我看到的是按钮在正确的位置淡入，但是在某些应用程序中，我确实看到按钮过渡就像，它不仅淡入，而且从 RHS 移动到 LHS，我需要这个效果，应该在哪里我改变以使按钮淡入以及移动？

谢谢！

# asp.net-mvc - 对象引用未在 lambda 方法（MVC ASP）中设置为对象的实例

> ID：12966060
> 
> 赞同：1
> 
> 时间：2012-10-19T01:17:17.727
> 
> 标签：asp.net-mvc, iis, internet-explorer-8, lambda

我正在 MVC 中开发一个应用程序。当我在每个浏览器中调试时，一切都很好。问题是，一旦我在服务器中安装了应用程序，我就无法让它工作，因为它只在 IE8 中向我显示下一个异常，：

```
Object reference not set to an instance of an object.
   at Eco.Administration.Web.UI.Controllers.CatalogController.ProcesarListaFactoresPorFiltro(String Rama, String TipoCredito, String Periodo, String Ubicacion)
   at Eco.Administration.Web.UI.Controllers.CatalogController.EcoEditaXML(String Ram, String Tip, String Perio, String ubica, Int32 Id, String mensaje)
   at *lambda_method(Closure ,* ControllerBase , Object[] )
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

我已经意识到，当我删除控制器中的一行（一个 lambda 函数）时，它可以正常工作。

有谁知道 IE8 中是否存在与 lambda 函数相关的问题？这可能是 IIS 中的错误配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T19:12:23.867

这更适合人们在研究相同问题时偶然发现这个问题。我只是亲身经历过。我有这行代码一直在我的应用程序中工作：

```
STemplate stemplate = db.STemplates.Include(t=>t.STemplateTabs).Where(t=>t.Id == id).FirstOrDefault(); 
```

突然之间，我开始遇到这样的异常：

> System.NullReferenceException：对象引用未设置为对象的实例。在 WebUI.Areas.Admin.Controllers.STemplateController.Details(Int32 id) 在 lambda_method(Closure , ControllerBase , Object[] )
> 在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 参数) 等...

我一直盯着我那无辜的台词，试图找出可能是什么东西坏了。一时兴起，我启动了 SQL Server Profiler 并看到调用实际上通过了！问题在于我的查询正下方的行。在我的情况下，我设置了一个 cookie，其值应该在 web.config 中但不存在，因此出现空引用异常。另一个原因是每次都进行适当的部署，而不是快速替换服务器上的 DLL 以快速修复某些问题。

祝你好运！

# sql - SQL通过加入父记录来组合子记录

> ID：12966070
> 
> 赞同：4
> 
> 时间：2012-10-19T01:18:51.373
> 
> 标签：sql, firebird

首先让我道歉，如果这没有任何意义。我花了一些时间把它写下来并自己理解。如果有任何令人困惑的地方，我深表歉意。我对此很陌生，并尽力解释。我也为 qustion 标题道歉，如果它不代表。如果有人知道更好的标题，请编辑或进行必要的更改。

我有两张表 JOBS 和 PHASES。

```
JOBS
Id
Job_Type (ex. 0 = import)
Title

PHASES
Id
Jobs_Id
Phase_Type
Title
Start_Time
End_Time
Duration 
```

每个 job/job_type 可以有任意数量的阶段 - 每个阶段都有开始、结束和持续时间

我想从 PHASES 表中选择字段 jobs_id、start_time、end_time 和 duration，并将每个 job_type 的所有持续时间相加（例如：job_type = 0，这是一个导入作业）

```
SELECT jobs_id, start_time, end_time, duration FROM phases 
JOIN jobs ON phase.jobs_id = jobs.id
WHERE jobs.job_type=0 
```

return jobs_id 返回最早的开始时间作为开始返回最后的结束时间作为结束返回它们的总持续时间 TotalDuration

例如，如果以下数据在 JOBS 表中（Id、Job_Type、Title）

```
1, 0, Import 
```

以下数据在 PHASES 表中（id、job_id、phase_type、title、start、end、duration）

```
1, 1, 1, 0, Run Preprocessor, 10/18/2012 8:52 PM, 10/18/2012 9:00 PM, 00:08:00
2, 1, 2, 1, Massage Data, 10/18/2012 9:00 PM, 10/18/2012 9:05 PM, 00:05:00
3, 1, 3, 2, Run Postprocessor, 10/18/2012 9:05 PM, 10/18/2012 9:07 PM, 00:02:00

4, 2, 1, 0, Run Preprocessor, 10/18/2012 9:15 PM, 10/18/2012 9:20 PM, 00:05:00
5, 2, 2, 1, Massage Data, 10/18/2012 9:20 PM, 10/18/2012 9:25 PM, 00:05:00
6, 2, 3, 2, Run Postprocessor, 10/18/2012 9:30 PM, 10/18/2012 9:35 PM, 00:05:00 
```

上图显示了两个作业（job_type = 0）的信息（阶段）

我需要一个可以组合阶段并显示最早开始和最晚结束以及总持续时间的 SQL 语句。我希望返回此信息（Job_id、Start、End、TotalDuration）

```
 1, 10/18/2012 8:52 PM, 10/18/2012 9:07 PM, 00:05:00
 2, 10/18/2012 9:15 PM, 10/18/2012 9:35 PM, 00:15:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:26:11.197

假设您的总持续时间不会超过 1 天，这将起作用。如果超过一天，则需要`HH:MM:SS`在持续时间列中的前面加上一个额外的表达式。

```
select job_id,
       min(start_time) start_time,
       max(end_time) end_time,
       CONVERT(CHAR(8), max(end_time)-min(start_time), 8) totalduration
  from phases
 group by job_id

-- sample data --
create table phases (job_id int, start_time datetime, end_time datetime);
insert phases values (1, '20121019 12:45', '20121019 13:15');
insert phases values (1, '20121019 13:15', '20121019 13:45');
insert phases values (1, '20121019 14:00', '20121019 15:12');

-- result --
job_id  start_time               end_time                 totalduration
1       2012-10-19 12:45:00.000  2012-10-19 15:12:00.000  02:27:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:42:11.383

```
DECLARE @jobs TABLE(
    jobid BIGINT NOT NULL
)

INSERT INTO @jobs (jobid)
VALUES (1)
, (2)
, (3)

DECLARE @phases TABLE(
    phaseId BIGINT NOT NULL,
    jobId BIGINT NOT NULL,
    startTime datetime not null,
    endTime datetime not null
)

INSERT INTO @phases (phaseId, jobId, startTime, endTime)
VALUES (1,1, '10/18/2012 8:52 PM', ' 10/18/2012 9:00 PM')
, (2, 1, '10/18/2012 9:00 PM', '10/18/2012 9:05 PM')
, (3, 1, '10/18/2012 9:05 PM', '10/18/2012 9:07 PM')
, (4, 2, '10/18/2012 9:15 PM', '10/18/2012 9:20 PM')
, (5, 2, '10/18/2012 9:20 PM', '10/18/2012 9:25 PM')
, (6, 2, '10/18/2012 9:30 PM', '10/18/2012 9:35 PM')

SELECT j.jobid, MIN(p.startTime) as startTime
, MAX(p.endTime) as endTime
, CONVERT(TIME(0),MAX(p.endTime)-MIN(p.startTime)) as duration
FROM @phases p
JOIN @jobs j ON j.jobid = p.jobId
GROUP BY j.jobid 
```

# php - How to add up a php array that has another array in it?

> ID：12966073
> 
> 赞同：0
> 
> 时间：2012-10-19T01:19:06.510
> 
> 标签：php, opencart

How would i get the sum of the totals for the following PHP Array?

I am running this: `print_r($myArray);`

```
Array
(
    [0] => Array
        (
            [total] => 100.0000
        )

    [1] => Array
        (
            [total] => 100.0000
        )

    [2] => Array
        (
            [total] => 689.5000
        )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:24:03.133

You can use `array_reduce`

```
$total = array_reduce($array, function($a,$b) {return $a + $b['total'];});
var_dump($total); 
```

You can use `array_map`

```
$total = 0;
array_map(function($v) use(&$total) { $total += $v['total'];},$array);
var_dump($total); 
```

Your Just loop

```
for($i = 0, $total = 0; $i < count($array); $i ++) {
    $total += $array[$i]['total'];
}
var_dump($total); 
```

Output

```
float 889.5 
```

# python - ImportError at / cannot import name HttpResponce

> ID：12966074
> 
> 赞同：0
> 
> 时间：2012-10-19T01:19:13.387
> 
> 标签：python, django, web, path

好的，所以我不知道发生了什么，因为我是 Python 和 Django 的新手，但由于某些不虔诚的原因，我没有 PYTHONPATH，即使我做了一个，我的 Python 安装也没有使用它。

我打开了调试，所以我可以给你所有这些：[剪掉因为它没有意义，并且可能对我造成安全问题]

奇怪的一件事是我在 Win7 x64（使用 python 2.7）上，它说我在 NT 上。

我正在关注本教程： http: [//www.djangobook.com/en/2.0/chapter03.html](http://www.djangobook.com/en/2.0/chapter03.html)

我的 python 安装也有其他 PATH 问题。就像根本没有设置任何路径，我必须手动完成它们。

我应该把我的项目文件夹放到我的 PATH 变量中吗？如果我这样做太多会使我的电脑变慢吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:25:23.717

如果您查看错误日志，您会发现您确实在 中遇到了错误`views.py`，但这是因为这一行（即第 1 行）：

```
from django.http import HttpResponce 
```

正如@mhawke 指出的那样，尝试将其更改为`HttpResponse`.

```
from django.http import HttpResponse 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T01:26:40.470

您的代码中有错字。我从您链接的教程中复制了这个：

```
from django.http import HttpResponse

def hello(request):
    return HttpResponse("Hello world") 
```

而您的堆栈跟踪显示`HttpResponce`.

# grails - GORM 与 grails 脚手架一对一？

> ID：12966075
> 
> 赞同：3
> 
> 时间：2012-10-19T01:19:14.387
> 
> 标签：grails, grails-orm

我有一个域对象`Department`，它与另一个域对象具有一对一的关系`DepartmentPreference`。当我尝试为 生成脚手架控制器时`Department`，我留下了一个下拉菜单来选择`DepartmentPreference`. 由于还没有（因为`DepartmentPreference`有一个`belongsTo = Department`），我无法创建一个。

您可以推荐的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:01:48.877

您是否像为 Department 一样为 DepartmentPreference 创建了控制器/视图？如果不是，您将需要创建一个或添加/修改现有的控制器/视图来处理该功能。

既然您提到了脚手架-我假设您的**部门控制器**定义如下：

```
class DepartmentController {
  static scaffold = true
  ..
} 
```

或者

```
class SomeController {
  static scaffold = Department
  ..
} 
```

如果这个**Department 控制器**是自动生成或仅使用脚手架定义的，那么它只为 Department 提供 CRUD 操作，而不是任何其他域类（至少不直接）。有很多方法可以添加缺少的 DepartmentPreference 功能，但对您来说最快的方法可能是使用您在 DepartmentPreference 上创建**Department 控制器**的任何方法。

# mongodb - How to set the following Mongo document structure?

> ID：12966076
> 
> 赞同：1
> 
> 时间：2012-10-19T01:19:23.803
> 
> 标签：mongodb

I am trying to set up a commenting system using the example on [http://docs.mongodb.org/manual/use-cases/storing-comments/](http://docs.mongodb.org/manual/use-cases/storing-comments/)

However I am confused on the discussion_id. How do I set that in PHP? Is that a datatype?

```
{
    _id: ObjectId(...),
    discussion_id: ObjectId(...),
    slug: '34db',
    posted: ISODateTime(...),
    author: {
              id: ObjectId(...),
              name: 'Rick'
             },
    text: 'This is so bogus ... '
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:22:34.190

为了获得答案，MongoDB 不会`discussion_id`为您设置。它根本没有关系行为，因此它无法预测您在某些对象之间的内部关系。

您需要使用讨论行的`discussion_id`来从 PHP 中分配自己，如下所示：`_id`

```
$dis = $db->discussion->findOne(array('name' => 'my awesome new one'));
$db->comments->insert(array('discussion_id' => $dis['_id'], 'text' => 'trololol')); 
```

所以你需要记住，MongoDB 不能判断任何关系，也不会，但是这个讨论 ID 不必在创建文档后设置，如上所示，因为`MongoId`可以随时调用对象，你实际上可以覆盖`_id`on insert 到 MongoDB . 如果您想先形成对象，检查它们的完整性然后保存它们，这将特别有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:26:51.097

Discussion_id的类型为[ObjectId](http://www.mongodb.org/display/DOCS/Object+IDs)。在本例中，它包含父讨论文档的 _id。

创建讨论文档时，mongodb会为其分配一个_id。您可以在为每个评论创建文档时使用此值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:27:53.440

是的，ObjectID 是 BSON 数据类型。在此处了解更多信息：[http ://www.mongodb.org/display/DOCS/Object+IDs](http://www.mongodb.org/display/DOCS/Object+IDs)

需要更多地了解您使用的语言和技术才能真正告诉您“如何设置”。

# c# - How to change notifyIcon1 icon in code

> ID：12966081
> 
> 赞同：1
> 
> 时间：2012-10-19T01:20:06.660
> 
> 标签：c#

This is what I have so far:

```
if (label1.Text == "On")
{
  notifyIcon1.Icon = Image.FromFile("@C:\Users\Alex\Downloads\On.ico");
} 
```

What do I do make the icon equal to change it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:21:13.777

这应该有效：除了显而易见的之外，我将 @ 放在引号之前。这可能无关紧要，只是我这样做的方式。

```
notifyIcon1.Icon = System.Drawing.Icon.ExtractAssociatedIcon(@"C:\Users\Alex\Downloads\On.ico"); 
```

你这对你有帮助！

# database - Google/Bing Map Integration, and Images on Database

> ID：12966083
> 
> 赞同：1
> 
> 时间：2012-10-19T01:20:32.670
> 
> 标签：database, google-maps, bing-maps

I have a couple of questions, and the first one involves the integration of a Google or Bing map. I am trying to get multiple markers to appear on a map based on the results of a user-submitted property search form. When the user searches for properties from any combination of available criteria (Address, city, Zip code, number of garages, etc.), they are taken to a results page that shows ten matches per page. The map needs to be able to mark the location of those properties as they are being viewed on the results page. How can this be accomplished in the scripting of the map and/or the search form?

My second question involves storing images on a database. We need to download a large number of images from a listing server, but unfortunately our server is not large enough to support easily tens of thousands of image files. How can the images be stored on a relational database with PHP and SQL queries? How can SQL be used to convert the actual images to data for easier storage? Thank you for any answers you have!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:13:34.940

1.  基本的工作流程是循环查询您的数据库，并将地址信息连同它们的纬度和经度一起输出到您的 HTML 页面。然后，您只需将多个标记添加到您的地图，并根据您的需要设置结果、标记和信息气泡的样式。可以在[Google Maps API 文档](https://developers.google.com/maps/documentation/javascript/overlays#Markers)中找到有关如何添加单个标记的简单示例。

2.  您确定需要将图像本身存储在数据库中吗？也许也可以将它们存储在文件系统或 Amazon S3 等其他位置。您可能需要阅读[此帖子](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)以进行详细讨论。

# java - rich:select shows "Value is not valid option" after selecting and converting the item to an object

> ID：12966087
> 
> 赞同：0
> 
> 时间：2012-10-19T01:20:58.443
> 
> 标签：java, validation, jsf, richfaces, converter

I list a collection of elements of type `Test` (from my domain) in a `rich:select` using the following code:

**test.xtml**

```
<rich:select value="#{testBean.test}" id="cmbTest"
    converter="#{testConverter}" enableManualInput="false">
    <f:selectItems value="#{testBean.all}" var="test" itemLabel="#{test.name}" />
</rich:select>
<rich:message for="cmbTest" />
<h:commandButton id="btnSave" action="#{testBean.save}" value="Save" /> 
```

I also have a custom jsf-converter to convert the select string values into objets of type `Test` and vice versa:

**TestConverter.java**

```
@Component
@Scope("request")
public class TestConverter implements Converter {
    @Override
    public Object getAsObject(FacesContext facescontext, UIComponent uicomponent, String value) {
        if (value == null) return null;
        return new Test(Integer.parseInt(value), "test" + value);
    }

    @Override
    public String getAsString(FacesContext facescontext, UIComponent uicomponent, Object obj) {
        if (obj == null) return null;
        return ((Test) obj).getId().toString();
    }
} 
```

(As you may notice, I'm using Spring) The backing-bean for the xhtml file is defined as follows:

**TestBean.java**

```
@Controller("testBean")
@Scope("session")
public class TestBean {
    private Test test;
    private List<Test> all; 

    public TestBean() {
        all = new ArrayList<Test>();
        for (int i = 0; i < 15; i++) { 
            all.add(new Test(1, String.format("test%d", i)));    
        }
    }

    public Test getTest() {
        return test;
    }

    public void save() {
        System.out.println("Save");
    }

    public List<Test> getAll() {
        return all;
    }
} 
```

When I press the "Save" button after selecting a valid item, I get the validation error: *"Value is not a valid option"*, as shown below:

![enter image description here](../Images/2c40991f8f5d1062b6b17bce8abe3524.png)

I have debugged the Converter `getAsObject` call and it works fine, it returns a valid `Test` instance as expected (in fact, this "test" project is an isolated case for a work project where I first found this problem, and in that project the converter successfully uses an injected service to retrieve the object from database).

Obviously the bean `save` method is never called as the view get stuck in the jsf validation fase with this error.

Tried to replace `rich:select` with `h:selectOneMenu` but is the same. I have surfed a lot of jsf-converter tutorials/docs/refs but I still don't know what could I be doing wrong.

I'm using maven and the Richfaces BOM configuration as pointed [here](https://community.jboss.org/wiki/HowToAddRichFaces4xToMavenBasedProject), replaced the version with 4.2.2.Final though (hoping the update could fix it)

I posted the [test project here](http://www.filefactory.com/file/7ecmicia2pnx/n/test-webapp_zip)

Any help would be really appreciated, I have spent so much time trying to find a solution for this, maybe is something simple/stupid but I'm just tired of debuging/searching

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:36:37.570

您需要在您的类中实现`equals()`和，以便 JSF 可以在项目列表中找到您选择和转换的项目。转换后，JSF 会将所选项目与列表中的项目进行比较，如果找不到，则会引发此错误。`hashCode()``Test`

# php - PHP pass variables to my own MySQL function--DB using variable as column name

> ID：12966091
> 
> 赞同：0
> 
> 时间：2012-10-19T01:22:17.040
> 
> 标签：php, mysql, function, mysqli

This is sort of a follow up to my last question (http://stackoverflow.com/questions/12945119/mysql-function-add-prices-from-multiple-tables ) so the MySQL code is there. My background with DBs is all SQL Server 2008 and Access, so the idiosyncrasies of MySQL are getting the better of me. I've Googled my brains out, read every even vaguely relevant Q&A on StackOverflow, StackExchange's programming and webdeveloper boards, etc. (Had to get that disclaimer out of the way.)

I ran the function in DreamCoder and when it just prompts me for intput and then runs the function, it returns the correct answer (a decimal,) so the function's logic is sound as far as I can tell. However, when I try to call the function from PHP, it errors out.

The DB access code is as follows:

```
function getQuote($json)

echo("JSON input: ");
var_dump($json);

    $array = json_decode($json, TRUE);
    echo("JSON decoded array: ");
    print_r($array);

    $cheese = $array[0];
    $meat = $array[1];
    $veg = $array[2];   

    $c = db_connect();
    $query = "SELECT calculatePrice($cheese, $meat, $veg)";
    var_dump($query);
    $result  = mysql_query($query , $c);
    if(!$result)
    {
        echo "\nCould not successfully run query ($query) from DB: " . mysql_error();
        exit;
    }

if (mysql_num_rows($result) == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

while($row = mysql_fetch_assoc($result)){
    echo("Row: ");
    var_dump($row);

    if(!$row)
        die("No price returned!" . var_dump($row));
    else
    {   
        return json_encode($row);   
    }
}  //end while 
```

And I wrote the following "test harness" to manually feed it data. I know the JSON's going in right because the full code gives the same error verbatim, so the issues's either PHP or MySQL.

```
 <?php
        require_once 'DBUtils.php';

    $array = array();
    $array[] = "Chedder";
    $array[] ="Ham";
    $array[] ="Carrot";

    $json = json_encode($array);
    echo("JSON object:");
    var_dump($json);

    $test = getQuote($json);

        echo("Test: ");
        print_r($test);

    ?> 
```

I've also tried MySQLi, same deal, same error. According to MySQL's documentation, scant as it is, I'm calling the function properly and passing the variables correctly. (PHP's documentation on such is virtually non-existent; their examples all amount to "SELECT * from tblFoo WHERE bar=4.")

The error is that it treats chedder as a column name rather than as the variable: "Unknown column 'cheddar' in 'field list'". What am I missing?

I could do this in SQLServer and ASP.NET without batting an eye, but MySQL/PHP is confusing the penguins out of me X_X (Not Linux penguins, just the zoo kind.)

PHP version is 5.3.17, MySQL is 5.1 in case either makes a difference. I think PHP 5.4.* has some relevant methods, but before I go through the hassle of changing my PHP version, I'd rather exhaust any 5.3.* options first.

I'm well-aware the answer is probably obvious, and know there's no one who'll outdo me for calling myself stupid once I learn what I'm doing.

Thank you again! This site is darned near my go-to before Google for questions ^_^ (And at least 2/3 of the results for any Google question I ask come from here anyway =-p )

EDIT: OK the MySQL works alone (SELECT from etc...) Turns out it wanted ' vs. `.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:38:03.083

由于 SQL 字符串注入和*缺少占位符*，该程序正在传递一个*虚假*的查询字符串。

 *```
SELECT calculatePrice(Cheddar, Ham, Carrot); 
```

..*不是*有效的 SQL：那些应该是字符串文字，而不是 [unbound] 列标识符。

*扩展：* MySQL 在这里需要一个 Column 或一个 Expression 并且`Cheddar`, `Ham`, 和`Carrot`不是当前 SQL 语句中*的*列。它们*也不*是表达式（如`'Cheddar'`或`1 + 41`）。这就是错误消息显示**"Unknown *column* 'cheddar'" 的**原因，因为此语句中没有绑定这样的列。

虽然确保函数获取*字符串*值的一种方法`'`是在 SQL 语句的生成中添加 s，[但此处描述了更好的方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。

另外，验证它是否也不需要结果列名，例如，至少在 SQL Server`select calculatePrice(..) as colName`中是*必需的 ..**

# ios - 为什么我不能更改 ViewController 的根视图的 UIView 类

> ID：12966096
> 
> 赞同：0
> 
> 时间：2012-10-19T01:23:00.247
> 
> 标签：ios, uiview, uiviewcontroller, iboutlet

如果我使用单个视图模板启动 Xcode 程序，它将默认为一个 VC，并且一个已在该 VC 中设置为 IBOutlet 的视图，以便我可以`self.view`在我的视图控制器中使用它来访问它。

现在，如果我想拥有一个自定义 UIView（称为 NewView），我可以在我的项目中添加一个 UIView 类文件 ( `.h`/ )。`.m`现在我最初的想法是转到情节提要中的根“UIview”并将其类更改为“NewView”。

假设我在 NewView 中有一个名为“myProperty”的公共属性，我应该可以使用`self.view.myProperty`. 事实并非如此！

我们是说子类化 UIView 的唯一方法是在根 UIView 下方的 SB 中添加一个 UIView 对象，然后从 VC 创建一个 IBOutlet 到该 UIView？那么，如果我不能使用它，那么该根 UIView 的用途是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:35:16.180

这不是不能子类化的问题`UIView`（正如您已经看到的），而是编译器识别您的子类的问题。 `self.view`被声明为指向`UIView`对象的指针，而不是子类的指针，因此您必须做一些额外的工作才能访问它的属性；即：铸造。要访问“myProperty”，请使用`[(NewView*)self.view myProperty];`. 就那么简单。

您必须将其转换为一种对编译器的承诺，字面意思是“`self.view`拥有类`NewView`，而不是您认为的那样，因此请认清它。”

作为旁注，我还将确保正确设置 XIB 中的根视图的类（意思是，它必须是 class `NewView`，否则当您尝试向它发送消息时，您的演员将失败并返回一个`UIView`对象，它不响应`-myProperty`，从而引发通用异常）。

# java - 获取两个字符串中相同的最大子字符串

> ID：12966102
> 
> 赞同：0
> 
> 时间：2012-10-19T01:23:45.170
> 
> 标签：java

我试图找到两个字符串中的最大子字符串（最小长度为 3）。所以如果我有：

```
String test1 = "testthatthisworks";
String test2 = "testthisthat"; 
```

我需要的答案是：

```
String[] Answer = ["test", "that", "this"]; 
```

我的一个问题是这需要尽可能快。我目前的解决方案是使用最小字符串中长度为 3 的子字符串，然后查看它是否存在于较大的字符串中，如果它确实增加了子字符串的大小，如果不将子字符串沿 1 点移动。问题是随着字符串长度的增长，这非常慢。有没有人可以解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:34:47.253

您正在寻找[最长的公共子字符串](http://en.wikipedia.org/wiki/Longest_common_substring_problem)

[Java 实现](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_substring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:27:11.047

搜索**最长公共子序列 (LCS)**问题和算法。您将从查找两个字符串的 LCS 的算法的实现中获得很多提示。这是一个例子：http: [//introcs.cs.princeton.edu/java/96optimization/LCS.java.html](http://introcs.cs.princeton.edu/java/96optimization/LCS.java.html)

如果您仔细跟踪 LCS 算法，它会检索所有公共子字符串，直到找到最长的子字符串。因此，您可以添加一些代码来通过检查它们的长度来收集这些子字符串，即长度 > 3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T22:36:04.533

这是对 的修改`LCS algorithm`，它将返回最大大小的所有最大长度匹配：

```
public static Collection<String> longestCommonSubstrings(String S1, String S2){
  return longestCommonSubstrings(S1, S2, 0);
}

public static Collection<String> longestCommonSubstrings(String S1, String S2, int minimumLength){

Collection<Integer> indexes = new ArrayList<Integer>();
int Max = minimumLength;

for (int i = 0; i < S1.length(); i++){
  for (int j = 0; j < S2.length(); j++){
    int x = 0;
    int y = Math.min(S1.length()-i,S2.length()-j);
    while (x < y && (S1.charAt(i + x) == S2.charAt(j + x) )){
      x++;
    }
    if (x > Max){
      Max = x;
      indexes = new ArrayList<Integer>();
      indexes.add(i);
    }else if (x == Max){
      indexes.add(i);
    }
  }
}
Collection<String> results = new HashSet<String>();
for (Integer i : indexes){
  results.add(S1.substring(i, (i + Max)));
}
return results;
} 
```

# php - Foreach 循环 API 审查

> ID：12966107
> 
> 赞同：0
> 
> 时间：2012-10-19T01:24:19.543
> 
> 标签：php, api

我目前正在尝试进入 foreach 循环，并且正在尝试从 API 中显示一些内容-唯一的问题是我们有 3 个开发服务器，并且有时在我们运行脚本时，显示速度似乎很慢迭代它们时的信息，我不太确定它是脚本还是服务器，所以我只是想知道是否有任何方法可以清理或使这个脚本更快一点：

```
 foreach ($members as $member)
 {
      $level = $member['character']['level'];

      if($level==90)
      {
           $mname = $member['character']['name'];
           $character = $armory->getCharacter($mname);
           $gear = $character->getGear();
           $milevel = $gear['averageItemLevelEquipped'];
      }
 } 
```

我们想要它做的是获取所有成员的名字，然后让每个成员获取角色信息，然后还有它的装备，我想检查一下，从我写的内容来看，它每次只做一次成员。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:44:33.553

（将我的评论变成适当检查、编辑、评论等的答案......）

循环没有明显的问题。

第一步是[分析代码](http://xdebug.org/docs/profiler)以找出慢的部分，然后你就可以弄清楚如何处理它。

这里有一些猜测可能会导致它变慢......

*   对魔兽世界军械库的网络和/或数据库访问。

我认为这是在与 WoW Armory 对话，这将涉及网络或数据库访问，`getCharacter`或者`getGear`可能会严重减慢速度。那将是您最可能的呆滞点。考虑缓存他们的结果，即使是几分钟。这个[PHP WoW Armory 项目](http://sourceforge.net/projects/wowarmoryapi/)声称可以为您做到这一点，也许可以尝试一下？

*   $members 中有很多元素。

如果您可以向您的 API 询问级别为 90 的成员列表，而不是自己遍历所有成员，那么这可能会更有效，具体取决于您的 API 如何进行搜索。

但先介绍一下。

# java - How to print the attributes of an java object in struts 2 using s:textfield tag

> ID：12966108
> 
> 赞同：0
> 
> 时间：2012-10-19T01:24:18.983
> 
> 标签：java, xml, struts

The object `x` in `y`.java file has `x.a & x.b` I want those `x.a` and `x.b` to be displayed in a text field by writing code in jsp using struts 2 `<s:textfield>` tag. How to do this? Please help me.

I have tried several options like

```
value=%{x.a} 
```

`value=%{#x.a}`.

Nothing worked and spent almost 5 hrs.

Should I do something like name="x" or value="x". My doubt is, how will the jsp page know that the x object is only accessed from the y.java file. How the mapping is done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:58:41.260

“映射是怎么做的？”

您的 JSP 可以访问由您的 ACTION（转发 JSP 的操作）公开的对象。

Action 调用哪个 JSP 之间的映射在 struts-config.xml 文件中完成。

如果您已经为该属性或对象生成或手动编写了 GETTERS 方法，则您可以访问 Action 中的一个对象或属性。

在您的情况下，Action 中 X 对象的 getter，以及对象 X 中属性“a”和“b”的 GETTERS 方法。

如果你试图访问一个不在你的 Action 中的对象，它应该是静态的（配置允许在 struts-config.xml 中访问静态方法），或者在 Session 中，或者在 ValueStack 中，或者其他的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:55:19.540

Step1...在action类中写msg..example--
request.setAttribute("message", "User deleted successfully");

Step2...在jsp页面中获取消息..示例-- <%= request.getAttribute("message") %>

在请求中设置属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:43:29.657

自从我创建 JSP struts2 模板以来已经有一段时间了，但是如果没有记错的话，它应该只是

```
<s:textfield value="x.a" /> 
```

你试过这种组合吗？

# r - 当与 R 中的 aggregate() 一起使用时，如何从公式中的点中排除一些变量，即除一些变量之外的所有变量？

> ID：12966109
> 
> 赞同：1
> 
> 时间：2012-10-19T01:24:40.717
> 
> 标签：r

我有很多变量要喂`aggregate`，显然我懒得明确输入所有变量，特别是它们偶尔会改变，但我想排除的变量大部分是相同的。我试着写

```
hru.mean <-
    aggregate(.-LULC~GIS, hru.annual, "mean") 
```

但显然它不像它所说的那样完全正确

```
Error in aggregate.data.frame(mf[1L], mf[-1L], FUN = FUN, ...) : 
  no rows to aggregate
In addition: Warning message:
In Ops.factor(., LULC) : - not meaningful for factors 
```

我刚看到[这个](https://stackoverflow.com/a/5251676/673826)，所以看起来它适用于`lm`但不适用`aggregate`。有没有其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:30:58.347

为什么不只传递一个子集作为数据

```
aggregate(. ~ Species, data = iris, mean) 
```

和....相比

```
aggregate(. ~ Species, iris[,-which(names(iris) == 'Sepal.Length')], mean) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T01:31:38.753

像这样限制数据集中的列的东西：

```
aggregate(.~cyl, mtcars[, !colnames(mtcars) %in% c("hp")], mean) 
```

# ios - How to show a full-screen ad (like Flixster) randomly in an iOS app?

> ID：12966110
> 
> 赞同：0
> 
> 时间：2012-10-19T01:25:04.770
> 
> 标签：ios, ads

I have recently started programming in iOS. I found this really interesting way of showing an Ad in the Flixster app. It randomly pops up a latest movie banner and asks to watch trailer or skip to continue using the app. How is it actually implemented? how can they be pushing a variable screen (may be a view) at runtime? Every time you open the app, you see a different banner.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T02:32:42.293

I work for Flixster and here's how we do it:

Every time the app starts or resumes, the app pings our API to ask for what ads should be shown. Our api gives our app the url of the image to be shown, as well as the click-through url, which can be a regular url, or a custom link to one of our native pages like viewing a trailer, or a movie info page.

We have an admin tool where we can upload the ad image, modify the properties of the ads, or remove old ads and add new ads. However, we've recently started using 3rd party Ad networks like DFP and Admob (acquired by Google) to take over this management.

# javascript - remove hightlight on items of select tag

> ID：12966111
> 
> 赞同：0
> 
> 时间：2012-10-19T01:25:12.780
> 
> 标签：javascript, jsp

after user make some selection, I want to remove the highlight on the items of the list. I have two usages of select tag and both still have highlighted after click on certain item or items of the list.

Problem is when user select on particular item, there will be pop up box. If the user just close the pop up and select on that same item, the pop up won't show. If the user put some input to pop up box, the selection of item will be disappear though.

How can I achieve to remove the highlight on the items of the select tag list?

1)

```
<select name="top" onchange="showMeasurement(this.options[this.selectedIndex].value,'m');" multiple class="selection-big">
<c:forEach var="f" varStatus="i" items="${fItemList}">
<option value="<c:out value="${f.fItemId}"/>~<c:out value="${f.fCategoryId}"/>~<c:out value="${f.fName}"/>~<c:out value="${f.fPName}"/>" ><c:out value="${f.fName}"/></option>
</c:forEach>
</select> 
```

2)

```
<s:select id="bList" name="bIds" list="bList" listKey="key" listValue="value" multiple="true" cssClass="selection-big-short" theme="simple" 
    onchange="changeVal(this.options[this.selectedIndex].value,'m');"/> 
```

# c - 二维动态数组，填充复数

> ID：12966113
> 
> 赞同：1
> 
> 时间：2012-10-19T01:25:19.020
> 
> 标签：c, dynamic-arrays, complex-numbers

我正在尝试初始化一个包含复数双精度的 2D 动态数组。我无法弄清楚这个错误消息告诉我做什么，并且在任何地方都找不到它。

```
#include <complex.h> 
...
int main( int argc, char *argv[] ) {
    complex double **A;
    FILE *inputFile;
    int i;
    double numRow, numCol;

    inputFile = fopen( "input.txt", "r" );
    fscanf( inputFile, "%lf %lf", &numRow, &numCol );

    A = ((complex double)**)malloc( numRow * sizeof( (complex double)* ) );
    for( i = 0; i < numCol ; i++ ) {
        A[i] = ((complex double)*)malloc( NC * sizeof( (complex double) ) );

    for( i = 0; i < m; ++i ) {
        free( A[i] );
    }
    free( A ); 
```

我得到的错误来自调用 malloc 的两行。

```
gewhpp.c:58:26: error: expected expression before â)â token
gewhpp.c:60:29: error: expected expression before â)â token 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:33:41.557

尝试编辑这些行，`complex double`如下所示：

```
A = (complex double**)malloc( numRow * sizeof(complex double* )); 
```

您无需将“复双”括起来，然后放置“*”

（你的大括号还有其他一些错误，但我想那是因为这只是代码片段......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T01:54:34.850

```
A = ((complex double)**)malloc( numRow * sizeof( (complex double)* ) );
for( i = 0; i < numCol ; i++ ) {
    A[i] = ((complex double)*)malloc( NC * sizeof( (complex double) ) ); 
```

可以清理到

```
A = malloc(numRow * sizeof *A);
if (A)
{
  for (i = 0; i < numCol; i++)
  {
    A[i] = malloc(NC * sizeof *A[i]);
    ... 
```

父母安置的机会减少了咬你的机会。

您不需要`malloc`在 C 中转换结果（C++ 是另一回事），并且可以将`sizeof`运算符应用于表达式，而不仅仅是类型名称。由于 的类型`*A`是`complex double *`， 的大小与`*A`的大小相同`(complex double *)`。

# xml - 如何将解析的xml转换为doc？

> ID：12966120
> 
> 赞同：0
> 
> 时间：2012-10-19T01:26:15.180
> 
> 标签：xml, ms-word, doc

我有一个带有 CSS 的 xml 文件。我可以看到它在浏览器中解析，我需要将解析的数据转换为 doc 文件。我的意思是，我想制作一个带有颜色、字体样式、字体大小等的 doc 文件，从一个带有 CSS 的 xml 文件中改编而来。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:34:45.400

实际上，您可以使用一个相当有用的“作弊”：生成 HTML 并为生成的文件赋予 .doc 扩展名。Word 会静默打开它，就好像它是一个普通的 doc 文件一样。仔细检查以确保 Word 正确呈现文档具有的任何样式。

# android - 可运行更新滞后

> ID：12966126
> 
> 赞同：1
> 
> 时间：2012-10-19T01:26:57.190
> 
> 标签：android, runnable

我的应用程序是一个基本时钟，我使用 Runnable 来更新时间和 Drawable，但它似乎每分钟都有一些延迟，比如 2 到 3 次，它冻结了大约 2 秒。这是我的可运行代码：

```
private Runnable updateTimeTask = new Runnable() {
    public void run() {
    updateTime();
    handler.postDelayed(this, 1000);
    } 
```

剂量有人知道使用什么方法，或者如何解决这个问题，时钟丢失秒数和可绘制滞后是不好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:56:20.667

延迟可能是处理 updateTime() 所需的时间。在调用 updateTime() 之前尝试启动新计时器。

私有 Runnable updateTimeTask = new Runnable() {

```
public void run() {

handler.postDelayed(this, 1000);
updateTime();
} 
```

# java - 带有重复标记的 XPath 和 Java

> ID：12966127
> 
> 赞同：1
> 
> 时间：2012-10-19T01:27:09.083
> 
> 标签：java, xml, xpath, tags

我在用 Java 解析 XML 文件时遇到了一些麻烦。该文件采用以下形式：

```
<root>
  <thing>
    <name>Thing1</name>
    <property>
      <name>Property1</name>
    </property>
    ...
  </thing>
  ...
</root> 
```

最终，我想将此文件转换为一个 Thing 对象列表，其中包含一个字符串名称 (Thing1) 和一个 Property 对象列表，每个对象也都有一个名称 (Property1)。

我一直在尝试使用 xpaths 来获取这些数据，但是当我尝试获取“事物”的名称时，它会给出出现在“事物”中的所有名称，包括“属性”的名称。我的代码是：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document dom = db.parse(filename);
XPath xpath = XPathFactory.newInstance().newXPath();

XPathExpression thingExpr = xpath.compile("//thing");
NodeList things = (NodeList)thingExpr.evaluate(dom, XPathConstants.NODESET);
for(int count = 0; count < things.getLength(); count++)
{
    Element thing = (Element)things.item(count);
    XPathExpression nameExpr = xpath.compile(".//name/text()");
    NodeList name = (NodeList) nameExpr.evaluate(thing, XPathConstants.NODESET);
    for(int i = 0; i < name.getLength(); i++)
    {
        System.out.println(name.item(i).getNodeValue());    
    }
} 
```

任何人都可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:26:36.943

你可以尝试类似...

```
public class TestXPath {

    public static void main(String[] args) {
        String xml =
                        "<root>\n"
                        + "    <thing>\n"
                        + "        <name>Thing1</name>\n"
                        + "        <property>\n"
                        + "            <name>Property1</name>\n"
                        + "        </property>\n"
                        + "        <property>\n"
                        + "            <name>Property2</name>\n"
                        + "        </property>\n"
                        + "        <property>\n"
                        + "            <name>Property3</name>\n"
                        + "        </property>\n"
                        + "        <property>\n"
                        + "            <name>Property4</name>\n"
                        + "        </property>\n"
                        + "        <property>\n"
                        + "            <name>Property5</name>\n"
                        + "        </property>\n"
                        + "    </thing>/n"
                        + "    <NoAThin>\n"
                        + "        <name>Thing2</name>\n"
                        + "        <property>\n"
                        + "            <name>Property1</name>\n"
                        + "        </property>\n"
                        + "        <property>\n"
                        + "            <name>Property2</name>\n"
                        + "        </property>\n"
                        + "        <property>\n"
                        + "            <name>Property3</name>\n"
                        + "        </property>\n"
                        + "        <property>\n"
                        + "            <name>Property4</name>\n"
                        + "        </property>\n"
                        + "        <property>\n"
                        + "            <name>Property5</name>\n"
                        + "        </property>\n"
                        + "    </NoAThin>/n"
                        + "</root>";

        try {
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            ByteArrayInputStream bais = new ByteArrayInputStream(xml.getBytes());
            Document dom = db.parse(bais);
            XPath xpath = XPathFactory.newInstance().newXPath();

            // Find the "thing" node...
            XPathExpression thingExpr = xpath.compile("/root/thing");
            NodeList things = (NodeList) thingExpr.evaluate(dom, XPathConstants.NODESET);

            System.out.println("Found " + things.getLength() + " thing nodes...");

            // Find the property nodes of thing
            XPathExpression expr = xpath.compile("property");
            NodeList nodes = (NodeList) expr.evaluate(things.item(0), XPathConstants.NODESET);

            System.out.println("Found " + nodes.getLength() + " thing/property nodes...");

            // Find all the property "name" nodes under thing
            expr = xpath.compile("property/name");
            nodes = (NodeList) expr.evaluate(things.item(0), XPathConstants.NODESET);

            System.out.println("Found " + nodes.getLength() + " name nodes...");
            System.out.println("Property value = " + nodes.item(0).getTextContent());

            // Find all nodes that have property nodes
            XPathExpression exprAll = xpath.compile("/root/*/property");
            NodeList nodesAll = (NodeList) exprAll.evaluate(dom, XPathConstants.NODESET);
            System.out.println("Found " + nodesAll.getLength() + " property nodes...");

        } catch (Exception exp) {
            exp.printStackTrace();
        }
    }
} 
```

这将为您提供类似的输出

```
Found 1 thing nodes...
Found 5 thing/property nodes...
Found 5 name nodes...
Property value = Property1
Found 10 property nodes... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:54:55.450

怎么样`"//thing/name/text()"`？

您现在使用的双斜杠`name`表示“树中的任何位置，不一定是直接子节点”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:56:08.340

**使用这些 XPath 表达式**：

```
//thing[name='Thing1'] 
```

`thing`这将选择XML 文档中具有`name`其字符串值为 的子项的任何元素`"Thing1"`。

**也使用**：

```
//property[name='Property1'] 
```

`property`这将选择XML 文档中具有`name`其字符串值为 的子项的任何元素`"Property1"`。

**更新**：

**要获取所有文本节点，每个节点都包含一个`thing`元素的字符串值，只需执行**以下操作：

```
//thing/text() 
```

在 XPath 2.0 中，可以自己获取字符串序列，使用：

```
//thing/string(.) 
```

这对于单个 XPath 表达式是不可能的，但是可以`thing`像这样获取特定（第 n 个）元素的字符串值：

```
string((//thing)[$n]) 
```

where`$n`必须替换为从 1 到 的特定数字`count(//thing)`。

因此，在您的编程语言中，您可以首先`cnt`通过评估此 XPath 表达式来确定：

```
count(//thing) 
```

`$n`然后在 for from 1的循环中`cnt`动态生成 xpath 表达式并对其进行评估：

```
string((//thing)[$n]) 
```

获取`property`元素的所有值也是如此。

# python - 带有 Django 1.4 的 Sphinx 自动文档

> ID：12966132
> 
> 赞同：1
> 
> 时间：2012-10-19T01:27:35.550
> 
> 标签：python, django, python-sphinx, autodoc

我在为 Django 1.4.1 项目构建模块自动文档时遇到问题。 `make html`似乎无法阅读我的文档字符串，因为它在导入我的设置时遇到了麻烦。我见过的所有在线指南都建议使用

```
import settings
from django.core.management import setup_environ
setup_environ(settings) 
```

但这在 1.4 中已被弃用，并且该`settings.configure()`方法似乎不合适。我还没有找到关于如何在 1.4 中运行的信息。我尝试设置`DJANGO_SETTINGS`，但没有运气。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:58:39.943

问题似乎是我错误地设置了`DJANGO_SETTINGS`环境变量，当我需要设置`DJANGO_SETTINGS_MODULE`.

所以，要明确一点，因为这个信息没有特别好记录，有两种等效的方法可以用 Django 1.4+ 设置自动文档：

1.  运行前设置环境变量`make html`：

    ```
    export PYTHONPATH=<path to root of source>
    export DJANGO_SETTINGS_MODULE=myproject.settings 
    ```

2.  在 中执行等效操作`conf.py`：

    ```
    sys.path.append('<path to root of source>')
    os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings' 
    ```

我更喜欢后者，因为我可以在配置中设置它，并且文档将在任何部署中构建。

# qt - QGraphicsView->centerOn() 不起作用

> ID：12966137
> 
> 赞同：3
> 
> 时间：2012-10-19T01:28:10.803
> 
> 标签：qt, centering, qgraphicsview, qgraphicsitem, qgraphicsscene

我不知道如何让 centerOn() 移动项目周围的视口（或端口周围的项目，不确定它是哪种方式）。

以下代码在 main 中有效：

```
view.setDragMode(QGraphicsView::ScrollHandDrag);
view.setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
view.setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
view.setFrameStyle(QFrame::NoFrame);
view.showFullScreen();

QGraphicsPixmapItem *pmItem = new QGraphicsPixmapItem(pixMap);
scene.addItem(pmItem);

view.centerOn(QPointF(50,30));
view.show();
rc = qA.exec(); 
```

但是，当我尝试从重载的 QGraphicsView 的 paintEvent() 执行相同操作时，centerOn() 什么也不做：

```
class MyView :: public QGraphicsView { ... }

void MyView::init(){
    ...
    setDragMode(QGraphicsView::ScrollHandDrag);
    setFrameStyle(QFrame::NoFrame);
    setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);

    _scene.clear();
    setScene(&_scene);

    super::showNormal();

}

void MyView::paintEvent(QPaintEvent *aEvent){
    _scene.clear();
    QGraphicsPixmapItem *pmItem = new QGraphicsPixmapItem(pixMap);
    _scene.addItem(pmItem);
    centerOn(QPointF(50.0, 30.0));

    super::paintEvent(aEvent);
} 
```

我想念什么？谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:25:43.830

您基本上可以在paintEvent 调用下拉开地毯。

QGraphicsView 通过信号和槽的方式与 QGraphicsScene 通信。场景没有机会通知视图刚刚添加了一个新项目，因为在创建之后立即调用了实际的paintEvent。两个步骤之间没有事件循环过程。因此，paintEvent 调用没有为新项目正确设置，更不用说居中更改了。

一旦绘画完成，视图就会被验证并认为它已经全部完成了。所以它永远不会更新新项目的区域。

在任何绘画或更新事件之外调用 centerOn。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T20:19:59.220

我通过在`setSceneRect`. 然后我将场景集中在一个对象或位置上。

例子：

```
this->ui->graphicsView->setSceneRect (0,0,100000000, 100000000);
this->ui->graphicsView->centerOn(500,1030); 
```

`setSceneRect`大小不合适`GraphicsView`。

# python - 将元组转换为整数

> ID：12966139
> 
> 赞同：2
> 
> 时间：2012-10-19T01:28:38.560
> 
> 标签：python, string, dictionary, tuples, average

我有这个 python 函数，它接受 2 个参数（*字符串、字典*）并返回一个浮点数。该函数旨在取分数和字符串字典中整数的平均值。

```
def happiness_score(string, dic):
   keys = string.lower().split()
   v = sum(dic[key] for key in keys)
   return float(v)/len(keys) 
```

我有这个有效的测试用例：

```
print happiness_score("a b" , {"a":(1.2) , "b":(3.4)})
>>> 2.3 
```

我还有一个带有元组的测试用例：

```
print happiness_score("a b" , {"a":(1,2) , "b":(3,4)}) 
```

如何更改我的代码，以便我可以将任何给定的元组转换为整数，以便我仍然可以运行我的程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:03:41.417

尝试使用我的忍者读心技巧来猜测您想如何将元组转换为浮点数，也许您想要：

```
def tup2float(tup):
    return float('.'.join(str(x) for x in tup)) 
```

这仅适用于 2 元组...

一些结果：

```
>>> tup2float((1,2))
1.2
>>> tup2float((2,3))
2.3
>>> tup2float((2,30))
2.3
>>> tup2float((2,32))
2.32 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T16:57:29.350

假设您将文件读入一个名为`lines`

```
hrs, miles = zip(*[(float(line.split()[-4]), float(line.split()[-2])) for line in lines if 'miles' and 'hrs' in line])
total_hrs = sum(hrs)
total_miles = sum(miles) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:55:21.813

我将假设您希望这种情况下的答案是 (2, 3)。换句话说，您希望将元组中的每个元素都视为单独均值的来源。

```
def happiness_score(dic):
   scores = map(sum, zip(*d.values()))
   return [float(v)/len(dic) for v in scores] 
```

第一步是为每个元组元素创建一组值：

```
d = {'a': (1, 2), 'b': (3, 4)}
zip(*d.values())
[(1, 3), (2, 4)] 
```

然后使用 map 将 sum 应用于每个元组。

# javascript - 将多个像素解析为整数

> ID：12966141
> 
> 赞同：0
> 
> 时间：2012-10-19T01:28:51.420
> 
> 标签：javascript, jquery

在我的代码中，我试图将高度与元素的位置进行比较，以确保元素不会离开游戏的 div。

首先我得到我的元素蛇的位置。如果光标太近，那么我移动它。然后最后我检查它是否距离顶部和底部至少 20 像素。出于某种原因，除了到达屏幕底部（这是代码末尾的 else if 语句）之外，一切都在工作

```
var posL = $("#snake").position().left;
var posT = $("#snake").position().top;
if((e.pageX-200 < posL) && (posL < e.pageX-50)){
  if(posL > 20){
    posL = posL - 5;
  }else{
    posT = posT + 5;
  } 
```

...

```
if(posT < 20){
  posT = 20;
}else if(posT > parseInt($("#game").height)){
  posT = parseInt($("#game").height) - 20;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:30:23.103

你忘记了`()`之后`.height`......两次！;-)

```
if(posT < 20) {
   posT = 20;  // ------------------------v
} else if(posT > parseInt($("#game").height)){
   posT = parseInt($("#game").height) - 20;
}              // -----------------^ 
```

# java - SQL 错误：1366 不正确的整数值 Spring MVC Hibernate

> ID：12966144
> 
> 赞同：0
> 
> 时间：2012-10-19T01:29:55.383
> 
> 标签：java, spring, hibernate, jpa, spring-mvc

在尝试使用 Springs 默认存储库持久化对象时，我无法弄清楚为什么某些东西不起作用。我使用休眠作为我的持久层和 Spring MVC 框架。我使用 JPA 而不是休眠映射文件。

我看到的错误如下：

```
WARN : org.hibernate.util.JDBCExceptionReporter - SQL Error: 1366, SQLState: HY000
ERROR: org.hibernate.util.JDBCExceptionReporter - Incorrect integer value: '\xAC\xED\x00\x05sr\x00!com.kwhours.butternut.domain.Type\xCF;\xBF\xEF\x8A\x82\x87\xF1\x02\x00\x0DZ\x00\x06isLeafI\x00\x05levelL\' for column 'type_id' at row 1 
```

我正在尝试使用 JPA 注释来持久化域对象，该代码的相关部分是：

```
@Entity
@Table(name = "question")
public class Question implements java.io.Serializable {
    private Type type;

    @Column(name = "type_id")
    public Type getType() {
        return this.type;
    }

    public void setType(Type type) {
        this.type = type;
    }
} 
```

我在 question.type_id 列到 type.id 列上正确设置了外键约束。我可以让我的对象都在代码中正确表示，但是当我尝试使以下存储库持久保存对象时，我得到了上述错误。

```
public interface QuestionRepository extends CrudRepository<Question, Long> {
    public List<Question> findByDatasetInstanceId(Long datasetInstanceId);
} 
```

所以要清楚。我可以创建一个新的问题对象并使用存储库从数据库中检索类型对象。我可以将 questions.type 设置为这个新类型对象，但是每当我尝试使用上面的存储库保留包含该类型的问题时，我都会收到该错误。我在调试器中检查了类型对象，它似乎没有任何问题。任何线索或建议都是有帮助的。这看起来像是某种转义字符序列，但我不太确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:27:37.017

所以我真的很傻。我缺少正确的注释，它没有取出类型 ID 来插入，而是尝试以某种方式插入这个 java 对象

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "type_id")
public Type getType() {
    return this.type;
} 
```

上面的代码解决了这个问题

# python - 如何以编程方式/通过 Python 脚本安装 Python 模块？

> ID：12966147
> 
> 赞同：23
> 
> 时间：2012-10-19T01:30:18.100
> 
> 标签：python, pip, distutils, easy-install, maya

我可以在脚本中严格地从 PyPi 下载和安装 Python 模块，而不使用 shell**吗**？

我使用非标准 Python 环境，Autodesk Maya 的 Python 解释器。这不附带“easy_install”，也没有“shell”，只有一个由 Maya 主可执行文件调用的 python 脚本解释器。将 ez_setup.py 的内容复制并粘贴到脚本编辑器窗口并正确运行它会将 easy_install 安装到 Maya 目录的某个位置，但脚本错误地将 Python 解释器记录为“...maya.exe”而不是“...mayapy.exe” " 此外，使用 easy_install 需要一个 shell。

目标是提供一个 Python 脚本，例如，将 NumPy 安装到 Maya Python 系统中。这可以通过将鸡蛋放入站点包目录来完成，但这需要手动用户干预。最终用户必须在 Maya 环境之外执行的任何操作基本上都是不可触碰的，尤其是对文件系统的干扰。但是通过脚本弄乱文件系统？没关系。

有没有比 ez_setup.py + 编辑生成的 easy_install...py 的 + 子进程调用更优雅的东西？我觉得这是一个基本功能。我在网上看到了通过 pip 进行编程模块安装的文档......但是需要先安装 pip！

在脚本范围内严格安装模块的最优雅方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T17:46:47.077

Installing easy_install for Maya on windows.

1.  Download [ez_setup.py](http://peak.telecommunity.com/dist/ez_setup.py).
2.  open windows cmd elevated (start, type *cmd*, *rmb* click on it ->run as administrator)
3.  change the cmd directory to x:\maya install dir\bin
    *   example: cd c:\Program Files\MayaXX\bin
4.  execute following command mayapy x:\WhereYouSaved\ez_setup.py

Now easy install should be set up properly. You may want to still do following steps:

5.  cd x:\maya install dir\python\scripts
6.  rename all files in this folder to start with ma
    *   example: for %i in (*) do ren %i ma%i
7.  add this folder to your path
    *   hit win+e
    *   *rmb* my computer and choose properties
    *   Advanced system settings -> Environment variables
    *   search variable path edit it and append ;x:\maya install dir\python\scripts

Now you can call **maeasy_install pythonModule** from cmd for installing stuff. Also you can call following inside Maya to install modules:

```
from setuptools.command import easy_install
easy_install.main( ["pythonModule"] ) 
```

**NOTE:** If Maya is installed in program files then you can not really install stuff without elevating. Unless you change disk permissions to the Maya python directory.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-02T15:05:47.450

```
#!/usr/bin/env python

from __future__ import print_function

REQUIREMENTS = [ 'distribute', 'version', 'Cython', 'sortedcollection' ]
try:
    from setuptools import find_packages
    from distutils.core import setup
    from Cython.Distutils import build_ext as cython_build
    import sortedcollection
except:
    import os, pip
    pip_args = [ '-vvv' ]
    proxy = os.environ['http_proxy']
    if proxy:
        pip_args.append('--proxy')
        pip_args.append(proxy)
    pip_args.append('install')
    for req in REQUIREMENTS:
        pip_args.append( req )
    print('Installing requirements: ' + str(REQUIREMENTS))
    pip.main(initial_args = pip_args)

    # do it again
    from setuptools import find_packages
    from distutils.core import setup
    from Cython.Distutils import build_ext as cython_build
    import sortedcollection 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-07T12:54:38.510

要使其工作，请打开`ez_setup.py`文件并在此行添加一个`s`after ：`http`

```
DEFAULT_URL     = "http://pypi.python.org/packages/%s/s/setuptools/" % sys.version[:3] 
```

使它变成

```
DEFAULT_URL     = "https://pypi.python.org/packages/%s/s/setuptools/" % sys.version[:3] 
```

# facebook - 用户将 facebook 应用程序添加到他们的 facebook 页面后发布到 facebook 墙上

> ID：12966153
> 
> 赞同：0
> 
> 时间：2012-10-19T01:31:53.930
> 
> 标签：facebook

在他们的管理员将我们的 facebook 应用程序添加到他们的 facebook 页面后，我们是否有权发布到 facebook 页面墙上？那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:11:02.220

要发布任何内容，您必须拥有**publish_stream**权限。

# c# - 通过后面的代码设置动态列的大小 - JQGRID

> ID：12966155
> 
> 赞同：1
> 
> 时间：2012-10-19T01:32:12.887
> 
> 标签：c#, jqgrid, jqgrid-asp.net

我有一个动态创建列的 JQGrid，并获取数据表中的所有记录。如何设置每列的大小取决于行上的字符有多长？或者如果行上的字符太短而标题文本较长，则列的大小取决于标题的字符。

IE

```
Name      |Age|Contact Number|
John Smith|6  |12345         | 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:38:25.497

您可以使用该属性手动设置每列的宽度以固定，`width`也可以根据标题使用调整列大小`resizeToTitleWidth`

```
var colModelData = [
    {name:'Name', index:'Name', width:55},
    {name:'Age', index:'Age', resizeToTitleWidth:true},
    {name:'ContactNumber', index:'ContactNumber', resizeToTitleWidth:true}]; 
```

也尝试使用`autowidth: true`

[资源](http://www.dorffweb.com/wordpress/2010/04/setting-jqgrid-column-width-from-titles/)

# search - 简单的文件文本搜索工具？

> ID：12966156
> 
> 赞同：8
> 
> 时间：2012-10-19T01:32:15.020
> 
> 标签：search, full-text-search, search-engine

我正在寻找可用于在本地机器上搜索文本文件的开源工具。我看过elasticsearch，但它似乎太复杂了，功能比我需要的多。

我只需要在本地机器上搜索文本文件。我正在寻找可以将文件目录和搜索字符串作为输入的内容，并将输出包含该字符串的文件列表。数据大小可能是数 GB，分布在数百个文件中，因此具有索引功能的东西可能效果最好。一个简单的客户端 HTML UI 会很棒。

我不需要数据流、收集、多服务器聚合、Web 服务、多种文件格式支持、外部数据库等。

一定有人已经这样做了。谁能指出我正确的方向？

编辑添加：我正在寻找一个库，可以集成到另一个客户端应用程序中。不需要 Web 服务器或数据库的 lucene/elasticsearch/etc 本地前端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:36:25.130

如果要在多个目录中搜索文本文件。[记事本++](http://notepad-plus-plus.org/)可以完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-21T22:17:19.950

Agent Ransack 是我最喜欢的——它将使用多个线程，并且可以选择使用正则表达式模式进行文件搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:02:02.353

虽然它只能通过单独搜索每个文件来工作，但[Ack](http://betterthangrep.com/)程序可能值得一看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T08:33:16.363

我现在正在使用一个文本搜索工具--- [TEXT FINDING](http://textfinding.com/)。它是一个简单免费的工具，让您在PC中查找所有类型的文件，只需几秒钟即可完成！

# arrays - 数组函子练习

> ID：12966161
> 
> 赞同：3
> 
> 时间：2012-10-19T01:34:03.680
> 
> 标签：arrays, scala, manifest, scalaz

我正在查看[20 个中级 Scala 练习](http://dibblego.wordpress.com/2008/09/10/20-intermediate-scala-exercises/)，并且在练习 4 中遇到了一些困难。不幸的是，我在任何地方都找不到任何解决方案，我想知道它是否真的可以解决。

`Fluffy`显然是一个伪装得很好的`Functor`并且`furry`是`fmap`。

```
trait Fluffy[F[_]] {
  def furry[A, B](f: A => B, fa: F[A]): F[B]
}

object Fluffy {
  // Exercise 1
  // Relative Difficulty: 1
  def ListFluffy: Fluffy[List] = new Fluffy[List] {
    def furry[A, B](f: A => B, fa: List[A]): List[B] = fa map f
         // am assuming this is the right idea...
  }

  // Exercise 4
  // Relative Difficulty: 1
  def ArrayFluffy: Fluffy[Array] = new Fluffy[Array] {
    def furry[A, B](f: A => B, fa: Array[A]): Array[B] = ???
  } 
```

问题是我无法在`Array[B]`没有上下文绑定的情况下创建一个`B: ClassManifest`，但如果我添加一个它会破坏与`Fluffy`特征的合同。

由于这些问题是从 2008 年开始的，大概`Manifest`在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:10:37.480

据此，自scala 2.8以来它[无法解决](http://www.scala-lang.org/node/4344)

# javascript - 我从脚本创建了 textarea 扩展器，但之后它没有扩展

> ID：12966162
> 
> 赞同：0
> 
> 时间：2012-10-19T01:34:09.950
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, textarea

我不知道标题是否正确。我用一个脚本创建了一个带有 5 个 textarea 且 class="expand" 的表。我写作时这个文本区域会扩展但随后不起作用。有没有写完后调用jquery插件的方法？在我尝试不创建 textarea 之前，我在 html 文件中编写了它并且它有效。

（关于 2 textarea 的信息和示例：

```
http://blogs.sitepointstatic.com/examples/tech/textarea-expander/index.html
http://jsfiddle.net/V2RLs/2/ (without class="expand") 
```

) 但是当我在 textarea 中写入后它不会扩展。为什么？

这是我的脚本：

```
<script src='js/jquery.textarea-expander.js'></script>
<script >$(document).ready(function() { 
var regex,v,l,c,b;

$( "#wnd_Addparam" ).dialog({
            autoOpen: false,
            height: 'auto',
            width: 350,
            modal: true,
            resizable:false,
            buttons: {
                "Add": function() {
                                 contapara=(parseInt(contapara)+1);

                document.getElementById("sorpara").innerHTML+="<li id=\"inputp"+contapara+"_id\" class=\"ui-state-default\"><span class=\"ui-icon ui-icon-arrowthick-2-n-s\"></span>"+txt_idparam.value+"</li>";    
                $('#formp').submit();
                                $( this ).dialog( "close" ); 
                                   },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                $( this ).dialog( "close" );
            }
        });

        $( "#btn_Addpar" ).click(function() {
                        i=(parseInt(contapara)+1);

    $('#wnd_Addparam').append('<form method="GET" id="formparam"><table><tr><td><label> ID  </label></td><td><textarea class="expand" id="inputp'+i+'_id" class="text"> </textarea></td></tr><tr><td><label>Type</label></td><td><select id="inputp'+i+'_type"><option value="text">Text</option><option value="integer">Integer</option><option value="float">Float</option><option value="list_values">List of values</option><option value="range">Range</option><option value="selection_collapsed">Selection (collapsed)</option><option value="selection_expanded">Selection (expanded)</option><option value="subimage">Subimage selection</option><option value="polygon">Polygon selection</option><option value="horizontal_separator">Horizontal separator</option></select></td></tr><tr><td> <label > Description</label></td> <td><textarea class="expand" id="inputp'+i+'_description" size=24></textarea></td></tr><tr><td><label>Value</label></td><td><textarea class="expand" id="inputp'+i+'_value"></textarea></td></tr><tr><td><label>Info (help)</label></td><td><textarea class="expand" id="inputp'+i+'_info"></textarea></td></tr><tr><td><label> Visible?</label></td><td><input type="checkbox" id="inputp'+i+'_visible"></td></tr></table>/form>');
                $( "#wnd_Addparam" ).dialog( "open" );
            });});</script> 
```

插件扩展器..

```
/**
* TextAreaExpander plugin for jQuery
* v1.0
* Expands or contracts a textarea height depending on the
* quatity of content entered by the user in the box.
*
* By Craig Buckler, Optimalworks.net
*
* As featured on SitePoint.com:
* http://www.sitepoint.com/blogs/2009/07/29/build-auto-expanding-textarea-1/
*
* Please use as you wish at your own risk.
*/
/**
* Usage:
*
* From JavaScript, use:
* $(<node>).TextAreaExpander(<minHeight>, <maxHeight>);
* where:
* <node> is the DOM node selector, e.g. "textarea"
* <minHeight> is the minimum textarea height in pixels (optional)
* <maxHeight> is the maximum textarea height in pixels (optional)
*
* Alternatively, in you HTML:
* Assign a class of "expand" to any <textarea> tag.
* e.g. <textarea name="textarea1" rows="3" cols="40" class="expand"></textarea>
*
* Or assign a class of "expandMIN-MAX" to set the <textarea> minimum and maximum height.
* e.g. <textarea name="textarea1" rows="3" cols="40" class="expand50-200"></textarea>
* The textarea will use an appropriate height between 50 and 200 pixels.
*/
(function($) {
// jQuery plugin definition
$.fn.TextAreaExpander = function(minHeight, maxHeight) {
var hCheck = !($.browser.msie || $.browser.opera);
// resize a textarea
function ResizeTextarea(e) {
// event or initialize element?
e = e.target || e;
// find content length and box width
var vlen = e.value.length, ewidth = e.offsetWidth;
if (vlen != e.valLength || ewidth != e.boxWidth) {
if (hCheck && (vlen < e.valLength || ewidth != e.boxWidth)) e.style.height = "0px";
var h = Math.max(e.expandMin, Math.min(e.scrollHeight, e.expandMax))+2;
e.style.overflow = (e.scrollHeight > h ? "auto" : "hidden");
e.style.height = h + "px";
e.valLength = vlen;
e.boxWidth = ewidth;
}
return true;
};
// initialize
this.each(function() {
// is a textarea?
if (this.nodeName.toLowerCase() != "textarea") return;
// set height restrictions
var p = this.className.match(/expand(\d+)\-*(\d+)*/i);
this.expandMin = minHeight || (p ? parseInt('0'+p[1], 10) : 0);
this.expandMax = maxHeight || (p ? parseInt('0'+p[2], 10) : 99999);
// initial resize
ResizeTextarea(this);
// zero vertical padding and add events
if (!this.Initialized) {
this.Initialized = true;
$(this).css("padding-top", 0).css("padding-bottom", 0);
$(this).bind("keyup", ResizeTextarea).bind("focus", ResizeTextarea);
}
});
return this;
};
})(jQuery);
// initialize all expanding textareas
jQuery(document).ready(function() {
jQuery("textarea[class*=expand]").TextAreaExpander();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:42:43.317

该插件在 document.ready 上准备了 textarea，因此在 document.ready 触发后分配给此类的任何 textarea 都不会受到插件的影响 - 但是，您可以直接调用插件而不是添加类：

```
jQuery(".expand").TextAreaExpander(); 
```

但是，您不应该在一个元素上运行 TextAreaExpander 两次，因此如果您有使用在 document.ready 上初始化的插件的 textareas，请确保为新生成的 textareas 使用另一个类名 - 或者您可以删除插件的最后几行.

# c# - 即使只用大括号包围，代码也能编译和执行

> ID：12966163
> 
> 赞同：0
> 
> 时间：2012-10-19T01:34:17.940
> 
> 标签：c#

> **可能重复：**
> [您是否使用花括号进行额外的范围界定？](https://stackoverflow.com/questions/249009/do-you-use-curly-braces-for-additional-scoping)

我刚刚注意到一些事情，我知道这是正常行为，但我不太明白为什么。我想我记得在某个地方了解过这个，但我不确定。

![CSharp 代码周围的大括号](../Images/ac8c62a5cd9caff7882a467b22c6432f.png)

我能想到你会以这种方式编写代码的唯一原因是在一个方法中*分割*或*拆分*大部分代码。但这是您以这种方式使用大括号的唯一原因吗？

是什么允许这段代码使用没有方法名称或标识符与之关联的大括号执行？

我也对您对此的看法感兴趣，想知道您是否以这种方式编写代码，为什么？

# javascript - KnockoutJS：将点击事件数据传递给 div

> ID：12966170
> 
> 赞同：1
> 
> 时间：2012-10-19T01:35:24.380
> 
> 标签：javascript, mvvm, knockout.js

我需要将`click:`事件中的数据传递到另一个 div。这是一个场景：

页面的一侧有一个链接。

```
<a data-bind="text: Name, click: $root.editAction"></a> 
```

在页面的另一边，有一个隐藏的 div。

```
<div data-bind="if: $root.editActionShow">
    <input type="text" data-bind="value: Name"/>
</div> 
```

我需要能够`$data`从`click:`事件中通过，做那个隐藏的 div。

也许我想多了，但是我`viewModel`有很多不同的东西`Actions`，`viewModel.DataGroups.DataGroup.ActionDataGroup`而且只有一个 HTML 表单来编辑动作信息，所以我不知道如何让表单只显示我想要编辑的一个特定动作.

这是另一个踢球者。我不想在我的`viewModel`. 原因是我必须`.toJS()`在最后对其进行映射，然后将 JSON 转换为 XML，这必须针对非常严格的模式进行验证，因此拥有额外的元素是一件坏事。它不会通过验证，除非我在转换之前手动删除它们。但是，我可以将`this.blah = function() {}`对象添加到 my`viewModel`中，因为`.toJS()`在转换过程中会剥离它们。

**更新：**

Aaand 解决所有这一切的方法很有趣

```
viewModel.editAction = function(data) {
    viewModel.editActionFormShow(true);
    ko.applyBindings(data, $('#myHiddenDiv')[0]);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:59:59.450

据我了解，您需要类似“点击编辑”功能，只需 2 个自定义绑定即可轻松解决！

这种方法的最大优点是你不会用额外的 observables 污染你的 viewModel。

绑定：

```
ko.bindingHandlers.hidden = {
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        ko.bindingHandlers.visible.update(element, function() {
                return!value; });
        }
    };

ko.bindingHandlers.clickToEdit = {
    init: function(element, valueAccessor,allBindingsAccessor){
        var value = valueAccessor(),
            input = document.createElement('input'),
                        link = document.createElement('a');

        element.appendChild(input);
                    element.appendChild(link);

                    value.isEditing = ko.observable(false);

                    ko.applyBindingsToNode(link,{
                        text: value,
                        hidden: value.isEditing,
                        click: function(){
                            value.isEditing(true);
                        }
                    });

        ko.applyBindingsToNode(input,{
            value: value,
            visible: value.isEditing,
                            hasfocus: value.isEditing
        });
    }
}; 
```

视图模型

```
var vm = {
    name: ko.observable()
} 
```

的HTML

```
<div data-bind="clickToEdit: name"></div> 
```

工作小提琴：http: [//jsfiddle.net/8Qamd/](http://jsfiddle.net/8Qamd/)

所有功劳归功于瑞安·尼迈耶。

# html - Html img 下方 1 像素线

> ID：12966173
> 
> 赞同：0
> 
> 时间：2012-10-19T01:35:46.223
> 
> 标签：html, image

我不是 html 程序员，但我必须解决一个紧迫的问题。由于这是一个私人项目，我不能在这里发布代码。但这里是混淆页面源（注意：一个href标签是由Spring Security标签创建的）

```
 <td width="359">
        <table style="margin-left:auto; margin-right:8px">
            <tbody><tr>
                <td>

                        <a href="/login"><img src="/img/Login.gif" alt="Login" height="18" border="0" width="120"></a>
                            <br>
                            <br>
                            <a href="/newAccount"><img src="/img/newAct.gif" alt="new account" height="18" border="0" width="120"></a>  
                </td>
            </tr>
        </tbody></table>
    </td> 
```

上面的 html 代码在第二张图片的正下方创建了一个 1 像素的阴影。请参阅附图和指向 1 像素线的红色箭头。

![截屏](../Images/d44a44b8af60d4c5929a58ae9cfce268.png)

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:02:02.600

```
<img src="..." style="margin-top:0px;"> 
```

# iphone - AvCam iOS 6 中的横向

> ID：12966175
> 
> 赞同：2
> 
> 时间：2012-10-19T01:35:59.903
> 
> 标签：iphone, xcode, ios6, landscape, avcam

我是 iOS 新手，正在尝试使用 AvCam 创建自定义相机。我无法获得横向预览——它将视图顺时针旋转 90 度并在半屏上显示。

我收到这条信息——

> 警告：-[ setOrientation:] 已弃用。

请使用 AVCaptureConnection 的 -setVideoOrientation：

AVCaptureConnection 已经设置了方向，所以我不知道我还能做什么。

我知道这个问题被问过很多次对于以前版本的 iOS (4,5)，但这些技术/代码都不适用于我 (iOS 6)。

原始代码（未对 Apple 进行任何更改）

```
if ([self captureManager] == nil) {
    AVCamCaptureManager *manager = [[AVCamCaptureManager alloc] init];
    [self setCaptureManager:manager];
    [manager release];

    [[self captureManager] setDelegate:self];

    if ([[self captureManager] setupSession]) {
        // Create video preview layer and add it to the UI
        AVCaptureVideoPreviewLayer *newCaptureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:[[self captureManager] session]];

        UIView *view = [self videoPreviewView];
        CALayer *viewLayer = [view layer];
        [viewLayer setMasksToBounds:YES];

        CGRect bounds = [view bounds];
        [newCaptureVideoPreviewLayer setFrame:bounds];

        if ([newCaptureVideoPreviewLayer isOrientationSupported]) {
            [newCaptureVideoPreviewLayer setOrientation:AVCaptureVideoOrientationPortrait];
        }

        [newCaptureVideoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

        [viewLayer insertSublayer:newCaptureVideoPreviewLayer below:[[viewLayer sublayers] objectAtIndex:0]];

        [self setCaptureVideoPreviewLayer:newCaptureVideoPreviewLayer]; 
```

AVCaptureConnection 块：

```
-(void)startRecordingWithOrientation:(AVCaptureVideoOrientation)videoOrientation; {
AVCaptureConnection *videoConnection = [AVCamUtilities connectionWithMediaType:AVMediaTypeVideo fromConnections:[[self movieFileOutput] connections]];
if ([videoConnection isVideoOrientationSupported])
    [videoConnection setVideoOrientation:videoOrientation];

[[self movieFileOutput] startRecordingToOutputFileURL:[self outputFileURL] recordingDelegate:self]; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T10:44:29.767

上次我也偶然发现了这个问题。我通过做两件事解决了这个问题

1.  获得正确的方向
    更换

    ```
    if ([newCaptureVideoPreviewLayer isOrientationSupported]) {
        [newCaptureVideoPreviewLayer setOrientation:AVCaptureVideoOrientationPortrait];
    } 
    ```

    和

    ```
    if ([newCaptureVideoPreviewLayer.connection isVideoOrientationSupported]) {  
        [newCaptureVideoPreviewLayer.connection setVideoOrientation:[UIDevice currentDevice].orientation];
    } 
    ```

2.  在初始化期间强制更新视频方向以通过 `- (void)deviceOrientationDidChange`手动触发在横向模式下捕获视频输出`AVCaptureManager.m`

    我将它添加到：

    ```
    - (BOOL) setupSession
    {
        BOOL success = NO;

        ...

        AVCamRecorder *newRecorder = [[AVCamRecorder alloc] initWithSession:[self session] outputFileURL:self.lastOutputfileURL];
        [newRecorder setDelegate:self];

        [self performSelector:@selector(deviceOrientationDidChange)];

        ...

        return success;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:46:04.577

所以，这是一个解决方法，但我相信一定有比这更好的解决方案。我从这个问题中得到了部分代码：

[iPhone App - 在横向模式下显示 AVFoundation 视频](https://stackoverflow.com/questions/6284650/iphone-app-show-avfoundation-video-on-landscape-mode)

但必须为每个方向调整框架以使其在 iOS6 上工作（它仍然显示警告）：

* * *

-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration {

```
[CATransaction begin];
if (toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft){
    captureVideoPreviewLayer.orientation = UIInterfaceOrientationLandscapeLeft;
    captureVideoPreviewLayer.frame = CGRectMake(0, 0, 480, 320);

} else if (toInterfaceOrientation==UIInterfaceOrientationPortrait){
    captureVideoPreviewLayer.orientation = UIInterfaceOrientationPortrait;
    captureVideoPreviewLayer.frame = CGRectMake(0, 0, 320, 480);

} else if (toInterfaceOrientation==UIInterfaceOrientationLandscapeRight){
    captureVideoPreviewLayer.orientation = UIInterfaceOrientationLandscapeRight;
    captureVideoPreviewLayer.frame = CGRectMake(0, 0, 480, 320);

}
[CATransaction commit];
[super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration]; 
```

}

# kernel - 为什么内核称为内核？

> ID：12966180
> 
> 赞同：18
> 
> 时间：2012-10-19T01:36:32.273
> 
> 标签：kernel, definition

所以这个问题的标题几乎总结了我的问题。需要明确的是，我了解内核是什么以及我们为什么要制作它们。我想知道它名字的由来。到目前为止，我所有的搜索和维基百科都只发现了内核是什么，它有多种形式。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-19T02:01:56.330

从词源上讲，我的理解是（古英语，意思是；如果你原谅双关语的话，它也是“源于”这个词`kernel`）的现代化。`cyrnel``seed``corn`

在这种情况下，内核是其余部分从中生长的东西。您也可以将内核称为“核心”，但从植物学上讲，“核心”包含种子（或“内核”）。

随着其他操作系统从内核发展而来，这个术语对我来说是有意义的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T12:15:46.520

在德语中，有一个术语“der Kern”，我将其翻译为“核心”。所以这似乎类似于“内核”。Kern 有时用于描述植物的单个种子，通常用于描述其他事物基于它的系统的基本/中心/基本部分，例如地球的核心。我不知道“kernEL”中的结尾“EL”从何而来。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-30T16:18:38.363

根据 OED 的说法，现代英语在日常讲话中使用的单词*kernel是**坚果的可食用部分*。它在 16 世纪首次用于表示*核心、核心，*因此它在 Linux 上的应用似乎是对系统该部分的一个很好的描述。我想知道谁首先在这种情况下使用它？*上校*最初来源于意大利语中的*专栏*（colonella），即他是领导专栏的人 - 它是美式和英语的发音 英语（以及其他英语也是如此）是沃克所说的“......其中必须放弃的严重违规行为“不可救药”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T01:48:02.603

我不确定你在问什么，但对我来说原因很明显。内核是操作系统的主要组成部分。内核定义之一是“任何事物的中心或最重要的部分”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-05T14:05:19.493

## 系统的*小*核心

虽然 Kernel 确实意味着“核心”，但它也提醒我们核心必须保持较小。系统从这个二进制文件发展而来。

### 来自Linux 信息项目的*[内核定义：](http://www.linfo.org/kernel.html)*

> 内核是*操作系统*在引导期间加载到内存中的第一部分`...`
> 
> `...`重要的是它尽可能***小，同时仍提供***操作系统的其他部分和各种应用程序所需的所有基本服务。

Robert Love 提醒我们，内核大小仍然很重要：

> `...`内核内存不可分页。因此，您消耗的每一个内存字节都会少一个字节的可用物理内存。——罗伯特·洛夫，Linux 内核开发

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-13T15:40:12.883

内核在 William Stallings 第六版的操作系统中也被称为核心，这意味着中心部分。

# python - 关于 python 的字符串问题，基本介绍级别

> ID：12966181
> 
> 赞同：0
> 
> 时间：2012-10-19T01:36:32.553
> 
> 标签：python, string

老问题，已解决多次。再次感谢你们的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T01:46:32.510

如果该字母当前是“^”并且该字母被正确猜到，则您希望将猜到的字母添加到结果中。否则，您想添加之前视图中的任何内容

```
def guess(word, view, letter) :
    result = ""
    for i in range(0,len(word)) :
        if view[i] == "^" and word[i] == letter:
            result += word[i]
        else :
            result += view[i]

    return result 
```

[演示](http://codepad.org/ZJcqPnB9)

使用 Python 的构造`if-else`可以进一步缩短上述条件`true if condition else false`

```
def guess(word, view, letter) :
    result = ""
    for i in range(0,len(word)) :
        result += word[i] if view[i] == "^" and word[i] == letter else view[i]      
    return result 
```

# delphi - Delphi 反转字节顺序

> ID：12966182
> 
> 赞同：3
> 
> 时间：2012-10-19T01:36:39.097
> 
> 标签：delphi, pointers, byte, reverse

我一直在尝试编写一个函数，该函数采用两个指针（一个输入和一个输出）并将输入中的字节以相反的顺序写入输出。到目前为止，我还无法使其正常工作。

```
procedure ReverseBytes(Source, Dest: Pointer; Size: Integer);
var
  Index: Integer;
begin
  Move(Pointer(LongInt(Source) + Index)^, Pointer(LongInt(Dest) + (Size - Index))^ , 1);   
end; 
```

任何人都可以请提出一个更好的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T07:22:37.717

```
procedure ReverseBytes(Source, Dest: Pointer; Size: Integer);
begin
  Dest := PByte( NativeUInt(Dest) + Size - 1);
  while (Size > 0) do 
  begin
    PByte(Dest)^ := PByte(Source)^;
    Inc(PByte(Source));
    Dec(PByte(Dest));
    Dec(Size);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:10:45.563

```
procedure ReverseBytes(Source, Dest: Pointer; Size: Integer);
var
  Index: Integer;
begin
  for Index := 0 to Size - 1 do
    Move(Pointer(LongInt(Source) + Index)^, 
        Pointer(LongInt(Dest) + (Size - Index - 1))^ , 1);
end;

procedure TForm2.Button2Click(Sender: TObject);
var
  s: AnsiString;
  P: Pointer;
begin
  s := #0'testreverse';
  GetMem(P, Length(s));
  ReverseBytes(Pointer(s), P, Length(s));

  ShowMessage(PAnsiChar(P));   // esrevertset
  FreeMem(P);
end; 
```

# jquery - 基于 HTML 的动态 jQuery 标签

> ID：12966183
> 
> 赞同：1
> 
> 时间：2012-10-19T01:36:40.583
> 
> 标签：jquery

我有这样的 HTML 代码：

```
<li><input type="hidden" value="001" class="block-hidden-input" />
    <a href="#" id="manage-1" class="manage-content-link">
        <img src="images/web-block/web-block1.jpg"/>
        <span class="orange-notice">Click to Edit Content</span>    
    </a>
</li>

<li><input type="hidden" value="002" class="block-hidden-input" />
    <a href="#" id="manage-2" class="manage-content-link">
        <img src="images/web-block/web-block2.jpg"/>
        <span class="orange-notice">Click to Edit Content</span> 
    </a>
</li> 
```

每个 li 标签都有唯一的 id，格式如下：id="manage-X"。每个用户可以有多个 li 标签，所以它是动态的。

另一方面，我需要这个 jQuery 来处理 li 标签：

```
$('#manage-1').click(function(e) { 
    $(this).next(".manage-content-wrap").find(".manage-content").load("file-001.php");
    e.preventDefault();
});
$('#manage-2').click(function(e) { 
    $(this).next(".manage-content-wrap").find(".manage-content").load("file-002.php");
    e.preventDefault();
}); 
```

这个 jQuery 看起来很糟糕。因为它是静态的，如果我有 5 个 li 标签，意味着我必须复制粘贴 5 次。我不知道如何在 jQuery 上使其动态化。

另外，“file-001.php”和“file-002.php”是基于 li 的值。所以，它必须是这种格式的文件-XXX.php（将XXX替换为li的值）。我想这一定与RegEx有关。但我不知道该怎么做......

知道如何基于 li 标签使 jQuery 动态化吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:42:21.557

尝试将您的选择器更改为基于类。然后，您只需要一种方法来确定要加载哪个文件。以下示例假定隐藏输入的值包含要加载的文件编号：

```
$('a.manage-content-link').click(function (e) {
    var self = $(this),
        file = self.siblings('input[type="hidden"].block-hidden-input').val();
    self.next(".manage-content-wrap").find(".manage-content").load("file-" + file + ".php");
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T01:43:18.800

尝试以下操作，请注意，这`"file-00"+this.id.split('-')[1]+".php"`只会迎合但您应该能够解决大于 9 的`file-001.php`值`file-009.php`

```
$('[id^=manage-').click(function(e) { 
    $(this).next(".manage-content-wrap").find(".manage-content").load("file-00"+this.id.split('-')[1]+".php");
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T01:42:07.703

尝试一个 for 循环。

```
for (var i = 0; i < numberOfFiles; i++)
{ 
    $('#manage-'+i).click(function(e) { 
    $(this).next(".manage-content-wrap").find(".manage-content").load("file-00"+i+".php");
    e.preventDefault();
    });
} 
```

# php - 电子邮件表单在提交时产生空 $_POST

> ID：12966185
> 
> 赞同：1
> 
> 时间：2012-10-19T01:37:35.693
> 
> 标签：php, html, email

因此，使用下面的 PHP 代码，我尝试发送电子邮件。出于某种原因，当我单击我的 html 联系页面上的提交按钮时，php 得到两个错误，

`Error: all fields are required Error: Invalid email address`

我知道它是一封正确的电子邮件，并且所有字段都已填写，我 99% 确定所有输入字段都是 HTML 文件中的正确名称.. 这是 PHP 代码

```
<?php 
$errors = '';
$myemail = 'support@Blocked for security.host22.com';//<-----Put Your email address here.
if(empty($_POST['name'])  || 
   empty($_POST['email']) || 
   empty($_POST['message']))
{
    $errors .= "\n Error: all fields are required";
}

$name = $_POST['name']; 
$email_address = $_POST['email']; 
$message = $_POST['message']; 

if (!preg_match(
"/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", 
$email_address))
{
    $errors .= "\n Error: Invalid email address";
}

if( empty($errors))
{
    $to = $myemail; 
    $email_subject = "Contact form submission: $name";
    $email_body = "You have received a new message. ".
    " Here are the details:\n Name: $name \n Email: $email_address \n Message \n $message"; 

    $headers = "From: $myemail\n"; 
    $headers .= "Reply-To: $email_address";

    mail($to,$email_subject,$email_body,$headers);
} 
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
<head>
    <title>Contact form handler</title>
</head>

<body>
<!-- This page is displayed only if there is some error -->
<?php
echo nl2br($errors);
?>

</body>
</html> 
```

表单的 HTML：

```
 <form action="contact-form-handler.php" method="POST" enctype="text/plain" name="contactform">
            <label for='name'>Name:</label><br/><input type="text" name="name"><br/>
            <label for='email'>Email:</label><br/><input type="text" name="email"><br/>
            <label for='message'>Message:</label><br/><textarea name="message" cols=48 rows=4></textarea><br/>
            <input type="submit" name="submit" value="Send">
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:03:52.323

您的表格中的问题在这里：

```
enctype="text/plain" 
```

`$_POST`对于 PHP 来说，将变量放入`enctype`应该要么被删除要么等于要么`application/x-www-form-urlencoded`要么`multipart/form-data`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:52:01.460

所以电子邮件地址！preg_match。我个人不会费心尝试使用正则表达式来验证人们是否输入了真实的电子邮件地址，您最终会得到来自 SMTP 本身的验证。

至少现在只需删除这部分代码：

```
if (!preg_match(
"/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", 
$email_address))
{
$errors .= "\n Error: Invalid email address";
} 
```

然后重新运行你的脚本，你就会知道正则表达式是问题所在。希望您以人们真正希望收到您发送的电子邮件的方式使用此脚本。如果是这种情况，我会让任何人烦恼的最多可能是通过在表单中​​输入两次来验证电子邮件地址？

# java - 重构java程序以在InputStream中快速

> ID：12966188
> 
> 赞同：1
> 
> 时间：2012-10-19T01:38:12.117
> 
> 标签：java, arraylist, http-get

我在这里有一堂课，它会一一获取日历事件。使用 InputStream 和 HttpGet。这使得应用程序非常慢我怎样才能让它更快。我有以下代码，

```
List<ArrayList> event= getEvents(filter, urls,EmailShare)

    public List getEvents(Filter filter, String uri,List<String> emailShare){
        List eventsToday = null;
        for (String email : emailShare) {
            String uris = uri + email + "/events/";
            InputStream stream=httpGet(uris);
            BufferedReader br = 
                new BufferedReader(new InputStreamReader(stream));
            CalendarBuilder builder = new CalendarBuilder();
            calendar = builder.build(br);
            eventsToday = (List<?>) 
                filter.filter(calendar.getComponents(Component.VEVENT));
            arrayList.addAll(eventsToday);
        }
        return arrayList;
    } 
```

*InputStream*行很慢。

# php - 解码asp.net网页中的未知url参数

> ID：12966194
> 
> 赞同：1
> 
> 时间：2012-10-19T01:39:46.157
> 
> 标签：php, asp.net, html, base64, html-encode

我有这个 url，其中包含一些编码的电子邮件参数，如下所示：

```
email=8b3f99fa-079c-40e3-8fe6-77fb220fc769 
```

我需要知道它是什么类型的编码以及如何转换它？我试过了`base64`，`html`编码/解码但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:44:43.677

该值类似于 GUID。它是一个[全局唯一标识符](http://en.wikipedia.org/wiki/Globally_unique_identifier)，并且可能是存储电子邮件的表中的查找键。

# mvvm-light - 设计模式下不显示数据

> ID：12966197
> 
> 赞同：4
> 
> 时间：2012-10-19T01:40:04.973
> 
> 标签：mvvm-light

当程序运行时，我的模型、视图模型和视图设置和绑定正确，但是在设计模式下，我看不到任何数据或由数据控制的动态元素。我能错过什么。我查看了示例朋友应用程序，并没有看到我在做什么不同。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:22:42.210

设计视图不支持连接到您的数据库，因此如果您的视图模型构造函数正在从数据库加载任何数据，那么这将在切换到设计视图时导致异常。因此，您的 UI 元素将无法正确加载。

相反，如果您处于设计模式，则需要加载虚拟数据。您可以使用 MVVM-Light Toolkit 的 ViewModelBase.IsInDesignModeStatic 属性以编程方式检查您是否处于设计模式。

例如：

```
ViewModelConstructor()
{
    if (ViewModelBase.IsInDesignModeStatic)
    {
        // load dummy data
    }
    else
    {
        // load real data from database
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:18:17.493

通常你需要调试为什么没有显示设计数据。在大多数情况下，这是因为当设计器执行异常时，代码中的某个地方会抛出异常。正如 Laurent 在他的视频中提到的，一种方法是附加到 Visual Studio 中的 Blend 过程。我在我的项目中尝试了这种方法，并且效果很好。

# maven - 创建密封 Maven 构建

> ID：12966202
> 
> 赞同：9
> 
> 时间：2012-10-19T01:40:36.053
> 
> 标签：maven, build-automation, maven-3, maven-plugin

我正在尝试创建一种方法，可以在仍然依赖项目中的 SNAPSHOT 依赖项的同时实现密封构建。

出于示例的目的，假设我有一个具有如下依赖结构的项目：

```
 ┌ other-1.2-SNAPSHOT
mine-1.2.3 ──┤
             └ thing-3.1-SNAPSHOT ── gizmo-6.1.3-SNAPSHOT 
```

我想做的是将所有 SNAPSHOT 依赖项在本地解析为与我当前版本相关的内容，然后将它们作为发布部署到我的 Nexus 发布存储库。并非所有这些依赖项都是内部的，因此我不能简单地对每个依赖项进行发布。

所以，在这个例子中，`other-1.2-SNAPSHOT`会变成类似`other-1.2-mine-1.2.3`并且`thing-3.1-SNAPSHOT`会变成`thing-3.1-mine-1.2.3`。这在大约 60 行 python 中是相对微不足道的。

然而，问题在于将传递性 SNAPSHOT 解析为具体版本。所以我还需要转换`gizmo-6.1.3-SNAPSHOT`并`gizmo-6.1.3-mine.1.2.3`依赖`thing-3.1-mine-1.2.3`它。

这只是实现我想要的一种方式的一个例子。目标是在一两年后，我可以检查我的发布分支以获取版本 1.2.3 并能够运行`mvn clean package`或类似的东西，而不必担心解决早已消失的 SNAPSHOT 依赖关系。

重要的是这个分支是可编译的，而不是仅仅使用类似`jar-and-dependencies`程序集插件的功能来保留所有依赖项。我希望能够修改源文件并制作另一个版本（例如，应用修补程序）。

所以，

*   有没有类似的东西能够以递归方式将 SNAPSHOT 依赖项转换为具体的？
*   是否有任何插件可以为您管理这种事情？发布插件承诺在其`branch`目标上提供一些配置选项，但它并没有将外部部门解析到我想要的程度。
*   是否有其他技术可用于创建封闭的 Maven 构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:30:52.393

maven 版本插件将完成您想要的大部分工作。

[http://mojo.codehaus.org/versions-maven-plugin/](http://mojo.codehaus.org/versions-maven-plugin/)

但是，您几乎肯定需要在预构建步骤中运行它，在该步骤中您解决所有依赖项并相应地更新 pom 文件。然后重新运行 maven（它重新读取 pom）来运行真正的构建。您可能能够配置 pom 本身触发的所有内容，以单独的目标触发，从而避免单独的脚本。

如果您使用特定版本而不是 SNAPSHOT 依赖项并让预构建步骤在必要时升级它们，这会更好。依赖解析的唯一真正区别是 maven 将始终重新下载 -SNAPSHOT 依赖，而如果有新版本可用，它只会下载正常的依赖。然而，许多插件（包括版本插件）以不同的方式处理 -SNAPSHOT 依赖关系，从而导致问题。由于每个 CI 构建都有一个新的版本号，我从不使用 -SNAPSHOT，更喜欢像 -DEV 这样的不同标签，对于开发人员本地构建等具有更可预测的行为。

我花了很多时间让 maven 做类似的事情。我知道的大多数 maven 项目都有某种预构建步骤，以便设置版本号或绕过诸如此类的其他限制。尝试一步完成所有这些通常会失败，因为 maven 只读取 pom 一次，字符串替换在一些地方不起作用，并且部署/安装的 pom 通常不包含字符串替换或所做更改的结果在构建过程中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T18:08:33.333

这不是一种广泛使用的技术，但您始终可以将特定的 SNAPSHOT 依赖项作为“项目”存储库检查到您的项目中，如本文所述：[Maven 之于 Ant，就像钉枪之于 Hammer](http://stubbisms.wordpress.com/2008/08/28/maven-is-to-ant-as-a-nail-gun-is-to-hammer-and-nails-you-need-to-move-on/)

简而言之，使用 Dependencies Plugin*在您的项目目录*中创建存储库。以下内容是从链接的博客文章中复制的（您应该阅读）：

1) 运行`mvn -Dmdep.useRepositoryLayout=true -Dmdep.copyPom=true dependency:copy-dependencies`

“这将创建 /target/dependencies，并具有所有项目依赖项的类似 repo 的布局”

2）复制`target/dependencies/`到类似的东西`libs/`

3) 向您的 POM 添加如下存储库声明：

```
<repositories>
  <repository>
    <releases />
    <id>snapshots-I-need-forever</id>
    <name>snapshots-I-need-forever</name>
    <url>file:///${basedir}/libs</url>
  </repository>
</repositories> 
```

您将其作为构建/发布过程的自动化部分：第 1 步通过将 Dependencies 插件配置为生命周期阶段，第 2 步使用 AntRun 插件将下载的依赖项移动到正确的位置。

希望这对你有用。我现在得去洗澡了……

# jquery - if display = block 不启用功能

> ID：12966204
> 
> 赞同：0
> 
> 时间：2012-10-19T01:40:48.297
> 
> 标签：jquery, hidden

我有一个单击时向上滑动的功能，但是一旦显示出来，一旦用户再次单击链接，我不希望它再次向上滑动，但我似乎无法让它工作。

根据我阅读的答案，最好使用 .is hidden ，但这似乎并不能解决问题。

```
$(document).ready(function() {
    if ($('#aboutpage').is(":hidden")) {
        $('.about').click(function() {
            $(divPages).slideUp(1000);
            $('#aboutpage').slideDown(1000);
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:49:04.360

这是您想要的吗：**演示** [http://jsfiddle.net/R8WvF/](http://jsfiddle.net/R8WvF/) **和**您的演示[http://jsfiddle.net/4meXU/](http://jsfiddle.net/4meXU/) **或**更简单：http: [//jsfiddle.net/rzqmT/](http://jsfiddle.net/rzqmT/)

**使用下面更新的代码补丁修复了您的页面*

相同的按钮打开和关闭上滑和下滑。

希望它适合原因`:)`

**代码**

```
$("#toggleme").click(function(){
    $('.bnr').toggle(500);
});
​ 
```

**其他**

```
$(document).ready(function() {
    $('.about').click(function() {
        if (!$('#aboutpage').is(":visible")) {
            $(divPages).slideUp(1000);
            $('#aboutpage').slideDown(1000);
        }else{
            $(divPages).slideDown(1000);
            $('#aboutpage').slideUp(1000);
        }
    });

}); 
```

**或者**

```
var divPages = "#feed, #aboutpage"

$(document).ready(function() {
    $('.about').click(function() {
            $(divPages+', #aboutpage').slideToggle(1000);

    });

}); 
```

# awk - awk 记录之间的距离

> ID：12966205
> 
> 赞同：0
> 
> 时间：2012-10-19T01:40:49.950
> 
> 标签：awk, gawk

嘿，我正在尝试查找文本文件中记录之间的距离。我正在尝试使用awk来做到这一点。一个示例输入是：

```
1 2 1 4 yes
2 3 2 2 no
1 1 1 5 yes
4 2 4 0 no
5 1 0 1 no 
```

我想找到每个数值之间的距离。我通过减去这些值然后对答案进行平方来做到这一点。我已经尝试了下面的代码，但所有的距离都只是 0。任何帮助将不胜感激。

```
BEGIN {recs = 0; fieldnum = 5;}
{
  recs++;
    for(i=1;i<=NF;i++) {data[recs,i] = $i;}
}
END {
  for(r=1;r<=recs;r++) {
    for(f=1;f<fieldnum;f++) {
        ##find distances
        for(t=1;t<=recs;t++) {
        distance[r,t]+=((data[r,f] - data[t,f])*(data[r,f] - data[t,f]));
            }
        }
    }
      for(r=1;r<=recs;r++) {
        for(t=1;t<recs;t++) {
        ##print distances
        printf("distance between %d and %d is %d \n",r,t,distance[r,t]);
        }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:11:06.317

不知道“每个数值之间的距离”在概念上是什么意思，所以我无法帮助您使用算法，但让我们清理代码以查看它的样子：

```
$ cat tst.awk
{
   for(i=1;i<=NF;i++) {
      data[NR,i] = $i
   }
}
END {
  for(r=1;r<=NR;r++) {
    for(f=1;f<NF;f++) {
        ##find distances
        for(t=1;t<=NR;t++) {
            delta = data[r,f] - data[t,f]
            distance[r,t]+=(delta * delta)
        }
     }
  }
  for(r=1;r<=NR;r++) {
     for(t=1;t<NR;t++) {
        ##print distances
        printf "distance between %d and %d is %d\n",r,t,distance[r,t]
     }
  }
}
$
$ awk -f tst.awk file
distance between 1 and 1 is 0
distance between 1 and 2 is 7
distance between 1 and 3 is 2
distance between 1 and 4 is 34
distance between 2 and 1 is 7
distance between 2 and 2 is 0
distance between 2 and 3 is 15
distance between 2 and 4 is 13
distance between 3 and 1 is 2
distance between 3 and 2 is 15
distance between 3 and 3 is 0
distance between 3 and 4 is 44
distance between 4 and 1 is 34
distance between 4 and 2 is 13
distance between 4 and 3 is 44
distance between 4 and 4 is 0
distance between 5 and 1 is 27
distance between 5 and 2 is 18
distance between 5 and 3 is 33
distance between 5 and 4 is 19 
```

似乎产生一些非零输出....

# mysql - 当您将两个具有相同属性名称的表相乘时会发生什么？

> ID：12966206
> 
> 赞同：1
> 
> 时间：2012-10-19T01:41:11.737
> 
> 标签：mysql, sql

假设您正在使用两个表 R 和 S 的笛卡尔积，它们都有两个属性 A 和 B，它们也是相同的数据类型。

如果我将它们相乘，结果表会是`A B A B`还是`A B`以某种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:46:04.083

它将获取所有属性，无论它们是否具有相同的名称。对于所有其他`JOIN`类型和任何其他表运算符也是如此。所以：

```
CREATE TABLE R (A int, B INT);
CREATE TABLE S (A int, B INT);

INSERT INTO R VALUES(1, 2), (2, 3);
INSERT INTO S VALUES(1, 2), (2, 2);

SELECT *
FROM R CROSS JOIN S 
```

将为您提供两个表中的所有属性，如下所示：

```
A   B   A   B
1   2   1   2
2   3   1   2
1   2   2   2
2   3   2   2 
```

但是，您可以限制要在`SELECT`语句中选择的属性。类似的东西`SELECT T1.A, T2.B`。

# regex - Gsub 在 R 正则表达式中获取部分匹配的字符串？

> ID：12966207
> 
> 赞同：3
> 
> 时间：2012-10-19T01:41:19.300
> 
> 标签：regex, r

```
gsub('[a-zA-Z]+([0-9]{5})','\\1','htf84756.iuy')
[1] "84756.iuy" 
```

我想得到84756，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T01:56:18.077

使用`gregexpr()`with`regmatches()`的优点是只要求您的模式与您实际想要提取的位相匹配：

```
string <- 'htf84756.iuy'
pat <- "(\\d){5}"

regmatches(string, gregexpr(pat, string))[[1]]
# [1] "84756" 
```

（实际上，当提供的字符串可能包含多个匹配的子字符串时，这些函数更有用`pat`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T01:44:10.183

尝试这个：

```
R> gsub('[a-zA-Z]+([0-9]{5}).*','\\1','htf84756.iuy')
[1] "84756"
R> 
```

您需要在`.*`“贪婪”正则表达式末尾添加 5 位数字后终止它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T12:46:44.767

使用`stringr`，您可以使用`str_extract`：

```
library(stringr)
str_extract("htf84756.iuy", "[0-9]+") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T01:45:40.623

根据要添加到您的内容，这也可以正常工作（例如 Dirk 的答案更好）：

```
gsub('[a-zA-Z]+([0-9]{5})\\.([a-zA-Z])+','\\1','htf84756.iuy') 
```

如果您只想要数字字符串，这也可能会有所帮助：

```
gsub('[^0-9]','','htf84756.iuy') 
```

# database - 数据库设计：如何表示一个可以有多种类型的字段？

> ID：12966208
> 
> 赞同：1
> 
> 时间：2012-10-19T01:41:24.410
> 
> 标签：database, database-design

在我的数据库模型中，我想表示一个表 PROPERTY，在其他字段中，应该有一个名为“value”的字段。这个值应该能够包含任何类型：整数、小数、文本、日期等。实现这一点的最佳方法是什么？每种类型都有一个字段（valueInteger、valueDate 等）并且只填充所需的字段 -> 大量空字段？或者可能只存储字符串字段，然后应该将其解析为正确的类型？

除了 PROPERTY 表，我还需要一个 PROPERTY_RANGE 表，其中包含一个 lowerValue 和 upperValue 字段。如果我选择为每种类型设置一个字段，则在此表中，每种支持的类型都需要 2 个字段（下部、上部）。

我还可以考虑使用某种平板继承来区分“值”字段类型（尽管这可能是用霰弹枪杀死苍蝇）。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:20:59.043

FWIW，为了正确性和可维护性，我会使用一个表，该表包含每个可能的属性数据类型一列。这将特别有助于查询不同数据类型的过滤器不同的记录，并将所有值收敛到一个 VARCHAR 字段意味着我们需要在运行时将这些值转换为适当的类型，这可能会很昂贵，具体取决于表的大小.

# c# - 使用 MVVM 在 WPF Toolkit DataGrid 中显示/编辑复杂对象

> ID：12966211
> 
> 赞同：4
> 
> 时间：2012-10-19T01:41:42.523
> 
> 标签：c#, wpf, mvvm, wpfdatagrid, wpftoolkit

我有一个复杂模型的集合，每个模型都包含其他复杂模型的接口实例集合，我需要显示这些父子复杂模型，允许编辑父子复杂模型的所有属性。

如何最好地显示此数据并允许单独编辑父对象和子对象的属性，以及通过组合选择多个单元格和上下文菜单单击（即跨多个父对象更改子模型上的相同属性值） ? 我还需要能够通过从编辑机制（当前为 DataGrid 单元格）中的搜索来执行诸如将模型属性值设置为其他复杂模型实例的操作？

下面是一个类的通用示例，它近似于我在应用程序中使用的内容。

```
enum ChildType 
{ 
    One,
    Two,
    Three
}

class ComplexType
{
    public long ID { get; set; }
    public string Name { get; set; }

    public override string ToString()
    { 
        return Name;
    }
}        

class IChildModel
{
    ChildType Type { get; set; }
    string Name { get; set; }
}

class ChildModel1 : IChildModel
{
    public ChildType Type { get; set; }
    public string Name { get; set; }
    public string Property1 { get; set; }
    public decimal Property2 { get; set; }
    public ComplexType Property3 { get; set; }
}

class ChildModel2 : IChildModel
{
    public ChildType Type { get; set; }
    public long Property1 { get; set; }
    public string Property2 { get; set; }
}

class Parent
{
    public long ID { get; set; }
    public string Name { get; set; }
    public CustomObservableCollection<IChildModel> Children { get; set; }
}

class ViewModel
{
    public CustomObservableCollection<Parent> Parents { get; set; }
} 
```

到目前为止，我已经使用 DataGrid 实现了应用程序，并使用反射在 View 代码隐藏中动态生成了列。子复杂对象实例的列绑定使用 CustomObservableCollection<> 上的下标（在这种情况下，自定义集合允许按通用值 [enum ChildType] 进行索引）。特别是绑定使得跨多个父级的子实例正确设置同一属性的值变得困难（通过列上的多选和上下文菜单单击设置值）。同样，我正在处理 View 的代码隐藏中的此类大规模更改，使用反射绑定路径解析来设置属性值（感觉不对；讨厌那样做）。我希望能够在 ViewModel 上设置选定的子项，并将属性名称和新值传递给 ViewModel 中的命令以进行更改。即使能够将命令传递给子类型、属性和新值也会很好（我认为）。

我通过 Google、stackoverflow、Code Project 等进行的研究已将我指向我当前的解决方案，但我觉得我对问题的思考不正确，应该有更好的 MVVM 方法来解决这个问题。

**编辑**

此应用程序的主要重点是允许在视图中编辑多个父模型实例和子模型实例，用户可以在该视图中比较多个实例的值，并允许跨多个相同类型的对象设置父属性或子属性的值为相同的值（即 Parent1 和 Parent2 都有一个 ChildModel1 并且用户希望将两个父对象的 ChildModel1 的 Property3 上的 Name 设置为“X”）。虽然，应用程序仍然必须允许对父对象和子对象的属性进行单独编辑（DataGrid 似乎确实很好地满足了要求）。为了满足这些要求，我在视图中实现了动态列创建。下面是这个逻辑的一个通用示例。

```
private void DataGrid_TargetUpdated(object sender, DataTransferEventArgs e)
{
    var vm = DataContext as ViewModel;

    if (vm != null && vm.Parents != null) {
        List<ChildType> processedChildTypes = new List<ChildType>();

        foreach (var parent in vm.Parents) {
            for (int childIndex = 0; childIndex < parent.Children.Count; ++childIndex) {
                var child = vm.Children[childIndex];

                if (!processedChildTypes.Contains(child.Type)) {    // Ensure each child type is only processed once
                    processedChildTypes.Add(child.Type);
                    CreateChildPropertyColumns(processedChildTypes, child);
                }
        }
    }
}

private void CreateChildPropertyColumns(List<ChildType> processedChildTypes, IChildModel child)
{
    PropertyInfo[] childProperties = child.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly); // Only use properties declared on the child type
    Type childInterfaceType = typeof(IChildModel);

    foreach (PropertyInfo childProperty in childProperties) {   
        // Only create a column if the property is editable
        if (childProperty.CanWrite) {
            if (childInterfaceType.IsAssignableFrom(childProperty.PropertyType)) {
                var subChild = childProperty.GetValue(child, null) as IChildModel;

                if (subChild != null && !processedChildTypes.Contains(subChild.Type)) {
                    processedChildTypes.Add(subChild.Type);
                    CreateChildPropertyColumns(processedChildTypes, subChild);
                }
            }
            else
                dataGrid.Columns.Add(CreateChildPropertyColumn(child.Type, childProperty));
        }
    }
}

private DataGridColumn CreateChildPropertyColumn(ChildType childType, PropertyInfo propertyInfo)
{
    DataGridColumn column = null;
    var binding = new Binding(string.Format("Children[{0}].{1}", childType, propertyInfo.Name));

    /* Create column based on PropertyInfo here */
    /* Default case is a text column */
    column = new DataGridTextColumn() { Binding = binding };
    column.Header = propertyInfo.Name;

    return column;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:01:04.457

`DataGrid`我认为在这种情况下使用它不是一个好主意。大多数时候，用户很少同时查看/编辑**MULTIPLE** `Parent`、`ChildModel2`和`ComplexType`。

您必须考虑用户将如何查看/编辑数据并提供更简单的 UI。例如，如果用户在大部分时间查看/编辑并且很少查看/编辑`Parent`，那么您可以放置​​文本框来编辑父级并使用 a来编辑其.`ChildModels``ComplexType``DataGrid``ChildModels`

这样，您的 UI 更简单，编写代码也更容易。我认为编写保存多个的代码要复杂得多，`Parent`如本例所示。

# django - Django - 如何使用 HttpBasicAuth

> ID：12966212
> 
> 赞同：0
> 
> 时间：2012-10-19T01:41:50.290
> 
> 标签：django

在我的 Django 代码中，我正在编写一个`connection.py`，它将使用以下内容连接到另一台服务器`http_auth = http_auth.HTTPBasicAuth(user password)`。因此，当我连接到该服务器时，我传递的参数之一是`http_auth = http_auth.HTTPBasicAuth(user password)`针对服务器。我在网上搜索了很多和 Django 文档，但没有确切告诉我该怎么做？谁能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:37:53.627

Here is an example of how you might use Django's Basic Authentication when presenting Users as RESTful resources:

```
# REST endpoint for authenticating user accounts
class UserResource(ModelResource):

    class Meta:
        queryset = User.objects.all()
        resource_name = 'auth/user'
        authentication = BasicAuthentication()
        authorization = DjangoAuthorization()

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(username=request.user) 
```

Authentication can be as simple as the one line:

```
 authentication = BasicAuthentication() 
```

depending on how you implement it.

# python - 使 Python 中的 distutils 自动查找包

> ID：12966216
> 
> 赞同：48
> 
> 时间：2012-10-19T01:42:13.200
> 
> 标签：python, distutils, setup.py

`setup.py`当在Python中描述一个 Python 包时`distutils`，有没有办法让它自动获取其中包含的每个目录`__init__.py`并将其作为子包包含在内？

即如果结构是：

```
mypackage/__init__.py
mypackage/a/__init__.py
mypackage/b/__init__.py 
```

我想避免这样做：

```
packages = ['mypackage', 'mypackage.a', 'mypackage.b'] 
```

而只是这样做：

```
packages = ['mypackage'] 
```

并让它自动找到类似的东西`a`，`b`因为它们有一个 init 文件。谢谢。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-01-17T10:22:49.200

我建议使用 setuptools 提供的 find_packages() 函数，[例如](http://pypi.python.org/pypi/setuptools)：

```
from setuptools import setup, find_packages 
```

然后做

```
packages=find_packages() 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-19T02:00:31.853

最简单的方法（据我所知）是用来[`pkgutil.walk_packages`](http://docs.python.org/library/pkgutil.html#pkgutil.walk_packages)生成包：

```
from distutils.core import setup
from pkgutil import walk_packages

import mypackage

def find_packages(path=__path__, prefix=""):
    yield prefix
    prefix = prefix + "."
    for _, name, ispkg in walk_packages(path, prefix):
        if ispkg:
            yield name

setup(
    # ... snip ...
    packages = list(find_packages(mypackage.__path__, mypackage.__name__)),
    # ... snip ...
) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-05-10T18:08:36.333

与 dm76 答案相同，只是我的仓库中也有测试，所以我使用：

```
from setuptools import find_packages

packages=find_packages(exclude=["*.tests", "*.tests.*", "tests.*", "tests"]), 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-10T23:51:52.950

```
import re, os
def find_packages(path='.'):
    ret = []
    for root, dirs, files in os.walk(path):
        if '__init__.py' in files:
            ret.append(re.sub('^[^A-z0-9_]+', '', root.replace('/', '.')))
    return ret

setup(
...
packages = find_packages()
...
) 
```

# microstrategy - 在哪里可以找到 MicroStrategy Command Manager 的文档

> ID：12966225
> 
> 赞同：1
> 
> 时间：2012-10-19T01:43:35.660
> 
> 标签：microstrategy

我在哪里可以找到 MicroStrategy Command Manager 的文档？我浏览了各种文档，但找不到任何完整的命令列表。特别是，我需要知道创建属性和度量的命令列表。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:11:35.930

查找可用命令列表的最佳方法是使用命令管理器中的大纲选项。

要创建属性，请使用以下语法：

```
CREATE ATTRIBUTE "<attribute_name>" [DESCRIPTION "<description>"] [LONGDESCRIPTION "<long_description>"] IN [FOLDER] "<location_path>" [HIDDEN (TRUE | FALSE)] ATTRIBUTEFORM "<form_name>" [FORMCATEGORY "<category_name>"] [FORMDESC "<form_description>"] [FORMTYPE (NUMBER | TEXT | DATETIME | DATE | TIME | URL | EMAIL | HTML | PICTURE | BIGDECIMAL | PHONENUMBER)] [REPORTSORT (NONE | ASC | DESC)] [BROWSESORT (NONE | ASC | DESC)] EXPRESSION "<form_expression>" [MAPPINGMODE (AUTOMATIC | MANUAL)] [EXPSOURCETABLES "<sourcetable1>" [, "<sourcetable2>" ...]] LOOKUPTABLE "<lookup_table>" FOR PROJECT "<project_name>"; 
```

对于指标创建：

```
CREATE METRIC "<metric_name>" IN [FOLDER] "<location_path>" EXPRESSION "<expression>" [DESCRIPTION "<description>"] [LONGDESCRIPTION "<long_description>"] [HIDDEN (TRUE | FALSE)] [ALLOWSMARTMETRIC (TRUE | FALSE)] [REMOVEREPORTFILTERELEMENTS (TRUE | FALSE)] [TOTALSUBTOTALFUNCTION (AVERAGE | COUNT | DEFAULT| GEOMETRICMEAN | MAXIMUM | MEDIAN | MINIMUM | MODE | NONE | PRODUCT | STANDARDDEVIATION | SUM | VARIANCE)] [DYNAMICAGGREGATIONFUNCTION (AVERAGE | COUNT | DEFAULT| GEOMETRICMEAN | MAXIMUM | MEDIAN | MINIMUM | MODE | NONE | PRODUCT | STANDARDDEVIATION | SUM | VARIANCE)] [COLUMNALIAS "<columnalias>"] FOR PROJECT "<project_name>"; 
```

下面提供了一些简单的示例（同样来自命令管理器中可用的大纲）：

```
CREATE ATTRIBUTE "Day" DESCRIPTION "Duplicate of Day Attribute from folder \Time" IN FOLDER "\Schema Objects\Attributes" ATTRIBUTEFORM "ID" FORMCATEGORY "ID" FORMDESC "Basic ID form" FORMTYPE TEXT REPORTSORT ASC EXPRESSION "[DAY_DATE]" LOOKUPTABLE "LU_DAY" FOR PROJECT "MicroStrategy Tutorial";
CREATE METRIC "New Metric" IN FOLDER "\Public Objects\Metrics\Count Metrics" EXPRESSION "Count(Customer) {Country} <[Western United States Customers]>" FOR PROJECT "MicroStrategy Tutorial"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T13:35:39.620

正如布鲁诺所说，大纲选项为您提供了命令管理器中的所有模板，您可以将它们一起构建并定义为您想要的。如有疑问，请查看“MicroStrategy System Administration Guide”产品手册，其中涵盖了您需要了解的有关命令管理器的所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T09:14:47.953

这是一个包含 Command Manager 文档的有用站点：

[https://metacpan.org/pod/Business::Intelligence::MicroStrategy::CommandManager](https://metacpan.org/pod/Business::Intelligence::MicroStrategy::CommandManager)

# c# - MongoDb 的 C# 驱动程序：如何使用限制+计数？

> ID：12966226
> 
> 赞同：9
> 
> 时间：2012-10-19T01:43:37.240
> 
> 标签：c#, mongodb, mongodb-.net-driver

来自MongoDb文档：“*在使用skip（）和limit（）的查询中，count默认忽略这些参数。使用count（true）让它考虑计算中的skip和limit值。* ”这正是我需要计算的特定查询的结果元素，直到超过定义的限制（如 1000），但我在 c# 驱动程序中看不到任何方法。IMongoCollection 的计数和 IMongoCursor 的 SetCount 都是无参数的。任何的想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-19T14:30:49.750

使用[`Size`](http://api.mongodb.org/csharp/1.4/html/82ca8aa5-cf7b-6f85-c08d-ecacabfa0b03.htm)方法而不是`Count`，因为它尊重 Skip 和 Limit。

```
Console.WriteLine(collection.Find(query).SetSkip(0).SetLimit(1).Size()); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-02-02T12:12:47.570

现在好像是

```
Console.WriteLine(collection
    .Find(filter)
    .Skip(30)
    .Limit(30)
    .Count()); 
```

# php - 删除目录内容和子目录内容

> ID：12966227
> 
> 赞同：0
> 
> 时间：2012-10-19T01:43:42.817
> 
> 标签：php, directory, delete-file

我已经设置了一些 PHP 来删除一个目录、它的内容以及任何子目录及其内容......我是 PHP 新手，所以我肯定做错了什么，或者正在以最低效的方式做某事。

寻找一些关于如何更好地做到这一点的参考或建议......

顺便说一句，这段代码工作正常。使用 PHP 5.3.8。

```
chmod($main_dir, 0755);
if ($handle = opendir($main_dir)) {
    while (false !== ($entry = readdir($handle))) { 
        $absolute_path = $main_dir.'/'.$entry;
        if ($entry != "." && $entry != "..") {      
            chmod($absolute_path, 0755);
            unlink($absolute_path);

            //check if any folders exist, then delete files within
            if (file_exists($absolute_path) && is_dir($absolute_path)) {
                if ($child_handle = opendir($absolute_path)) {
                    while (false !== ($child_entry = readdir($child_handle))) {             
                    $child_absolute_path = $absolute_path.'/'.$child_entry;
                        if ($child_entry != "." && $child_entry != "..") {              
                            chmod($child_absolute_path, 0755);
                            unlink($child_absolute_path);
                        }
                    }
                    closedir($child_handle);
                }
            }
            rmdir($absolute_path);
        }
    }
    closedir($handle);
}
rmdir($main_dir); 
```

有什么想法吗？非常感激！我使用 PHP 5.3.8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T02:21:11.173

您可以使用`RecursiveDirectoryIterator`列出所有文件和文件夹，然后将其删除。请注意，您必须使用`RecursiveIteratorIterator::CHILD_FIRST`以便在文件夹之前删除文件。

```
$dir = __DIR__ . "/test";
$di = new RecursiveDirectoryIterator($dir, FilesystemIterator::SKIP_DOTS);
$ri = new RecursiveIteratorIterator($di, RecursiveIteratorIterator::CHILD_FIRST);
foreach ( $ri as $file ) {
    $file->isDir() ?  rmdir($file) : unlink($file);
} 
```

# python - 我可以重载 {} 运算符来创建字典吗？

> ID：12966231
> 
> 赞同：1
> 
> 时间：2012-10-19T01:43:52.777
> 
> 标签：python, overloading, dictionary

我正在制作 dict 类的派生变体，以便可以通过属性访问语法访问字典值（因此，您可以执行**dictionary['foo']而不是****dictionary.foo**。）这是我到目前为止所拥有的：

```
class dict(dict): 
    __getattr__ = dict.__getitem__ 
```

但是，我的这段代码给它带来了问题：

```
eventD = {'rrule_end':None}
. . .
. . .
#(some time later)
print event.rrule_end 
```

这是因为用于创建字典的 { } 运算符没有被重载。是否可以使 dictName = { } 语法创建派生类的实例而不是普通字典？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:45:04.587

不，您不能覆盖 dict 文字语法。（您也不能覆盖列表文字语法、字符串文字语法、数字文字语法或任何文字语法。）

你必须明确地创建你的类的实例。给你的班级起一个像 MyDict 这样的名字，然后做

```
eventD = MyDict({'rrule_end':None}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:27:42.903

不，您不能重载该语法，但它们是您可以做的替代方法。

将普通字典转换为您的字典

```
my_dict( {'foo':bar, 'foo2':bar2} ) 
```

让你的函数接受[key-args](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)

```
my_dict( foo='bar', foo2='bar2' ) 
```

为这本词典编写自己的语法。这是在滥用 python 的可重载运算符，做起来有点复杂。它是一个连锁反应，从 my_dict<'foo' 开始。重载运算符，使其输出另一个 my_dict 对象并重复该过程，每次记录每个值，直到最终到达最终对象。然后它计算并吐出你自己的对象对象。

```
my_dict<'foo'|bar,'foo2'|'bar2'>end 
```

编辑：

我不确定您要这样做的原因，但这可能是您问题的替代答案。您可能还想看看[vars](http://docs.python.org/library/functions.html#vars)内置函数。这使您可以获取对象具有的每个属性的字典。如果对象改变，字典会自动改变。

```
class dict_obj(object):
    def __init__(self, obj):
        self.obj = obj
        self.dict = vars(obj)

    def __getattr__(self, value):
        return self.dict[value]
    __getitem__ = __getattr__ 
```

你可以像这样使用它

```
>>> class test:
    def __init__(self):
        self.value = 5

>>> obj = dict_obj(test())
>>> obj.value
5
>>> obj['value']
5 
```

# regex - 给定一个符号序列，如何找到能够接受它的最小 DFA？

> ID：12966234
> 
> 赞同：2
> 
> 时间：2012-10-19T01:44:30.087
> 
> 标签：regex, pattern-matching, regular-language, fsm, dfa

例如：给定以下符号序列，

```
a b c b c d d d b c b c d d d d e 
```

可以接受它的最简单的 DFA 是 17 个状态的链。

而下面的正则表达式可以推导出上面的序列：

```
a (b c)* (d)* (b c)* (d)* e 
```

对应的最小 DFA 有 8 个状态。

此外，正则表达式的`a ((b c)* (d)*)* e`最小 DFA 更小，有 4 个状态。它可以接受示例序列。

在上面的例子中，我只考虑了`*`运算符；更一般地，算子`|`也可以考虑减小 DFA 的大小。

所以，一般的问题是：

给定一个符号序列，如何找到能够接受它的最小 DFA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:00:11.903

简单的。具有一种状态的 DFA 总是可以做到这一点。那个状态是开始状态，接受状态，并且所有符号转换环回它。那个微不足道的 DFA 接受所有字符串 (∑*)，并且绝对是最小的 DFA。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:59:01.690

1.  正则表达式 -> NFA
2.  然后是 NFA -> DFA
3.  然后是 DFA -> 最小 DFA

网上有很多算法，你可以用谷歌搜索每一步。
您可以检查您的 DFA/NFA。
[http://hackingoff.com/compilers/regular-expression-to-nfa-dfa](http://hackingoff.com/compilers/regular-expression-to-nfa-dfa)

# java - .matches("text/.*") 抛出 NullPointerException

> ID：12966241
> 
> 赞同：0
> 
> 时间：2012-10-19T01:45:41.947
> 
> 标签：java, nullpointerexception

我有一个 FilenameFilter，它可以过滤除具有 mime 类型文本和所有子类型（或应该以任何方式......）的目录和文件之外的所有内容，但是当我使用 .matches() 函数时，它会引发 NullPointerException。当我查看它时，当正则表达式语法不正确时， .matches() 函数会抛出 NullPointerException 。

```
FilenameFilter filter = new FilenameFilter()
{
    public boolean accept(File dir, String name)
    {
        File tmp = new File(dir.getAbsolutePath() + "/" + name);
        if (tmp.isDirectory())
        {
            return true;
        }
        else
        {
            String type = null;
            String extension = MimeTypeMap.getFileExtensionFromUrl(dir.getAbsolutePath() + "/" + name);
            if (extension != null)
            {
                MimeTypeMap mime = MimeTypeMap.getSingleton();
                type = mime.getMimeTypeFromExtension(extension);
            }
            return type.matches("text/.*");
        }
    }
}; 
```

传递了一个没有 mime 的文件，因此它输出 null。这是修复：

```
FilenameFilter filter = new FilenameFilter()
{
    public boolean accept(File dir, String name)
    {
        File tmp = new File(dir.getAbsolutePath() + "/" + name);
        if (tmp.isDirectory())
        {
            return true;
        }
        else
        {
            String type = "";
            String extension = MimeTypeMap.getFileExtensionFromUrl(dir.getAbsolutePath() + "/" + name);
            if (extension != null)
            {
                MimeTypeMap mime = MimeTypeMap.getSingleton();
                type = mime.getMimeTypeFromExtension(extension);
                if (type != null)
                {
                    return type.matches("text/.*");
                }
                else
                {
                    return false;
                }
            }
            else
            {
                return false;
            }
        }
    }
}; 
```

这是来自 eclipse 的描述： String android.webkit.MimeTypeMap.getMimeTypeFromExtension(String extension)

public String getMimeTypeFromExtension (String extension) 自：API Level 1 返回给定扩展的 MIME 类型。

参数 extension 没有前导 '.' 的文件扩展名

返回给定扩展的 MIME 类型，如果没有，则返回 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:49:50.233

您的 String 变量`type`可能是`null`如果它没有进入此 if 语句：

```
 if (extension != null)
  {
     MimeTypeMap mime = MimeTypeMap.getSingleton();
     type = mime.getMimeTypeFromExtension(extension)
  } 
```

所以你很有可能得到`NullPointerException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:57:48.740

*名为type*的变量为空。

添加一行代码，您可以自己查看：

```
System.out.println("type: " + type); 
```

输出将为空。

您的代码中的其他地方存在与您的正则表达式无关的问题。

# java - 在 Flex 中将 result.event 转换为 Person (Class) 的 ArrayCollection

> ID：12966245
> 
> 赞同：0
> 
> 时间：2012-10-19T01:46:10.700
> 
> 标签：java, apache-flex, arraycollection, resultevent

我对 Flex 环境有点陌生，我想知道如何做到这一点：

我的初始代码是这样的：

```
public function displayAllNames(event:ResultEvent):void {

    var result:ArrayCollection  = new ArrayCollection();

    result = event.result as ArrayCollection;

   if (result.length != 0){
       listBox.dataProvider = result;
   }
} 
```

**event.result**是具有 name 属性的 Person 类的 ArrayCollection

**listBox**是 Fl​​ex 中要显示名称的列表组件的 id

当我尝试运行代码时，列表框确实显示了一些东西。但它没有显示名称，而是始终显示**对象 Object 。**看来我仍然必须先对*event.result*做一些事情，这样它才能成为 Person 类的 ArrayCollection。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:01:18.343

您需要设置 ComboBox 的 labelField，试试这个

假设 Person 有一个可见的 name 属性，

```
public class Person(){
   public var name:String = "User 1";
} 
```

`labelField`您可以通过使用该属性告诉您的 ListBox 使用该属性来填充其标签字段

```
if (result.length != 0){
   listBox.labelField = "name";
   listBox.dataProvider = result;
} 
```

默认情况下，我相信设置为`"label"`，如果找不到该属性，它将使用`Object.toString()`它的`[Object object]`来源。

因此，它也可以覆盖或简单地包含`toString`数据提供者类中的方法，而不更改列表的`labelField`

```
overide pubic function toString():String{
    return "this will become your label field";
} 
```

# android - 更改微调器的颜色

> ID：12966248
> 
> 赞同：0
> 
> 时间：2012-10-19T01:46:37.157
> 
> 标签：android, spinner

![微调器颜色](../Images/80355497dbc41860a02da67f11f977a1.png)

在这张图片中，您可以看到（几乎没有笑）位于底部和右下角的微调器图标非常难以看到，因为我使用的是黑色背景。我需要做些什么才能使那种看起来呈灰色的颜色变成白色或任何颜色？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-20T09:31:00.733

试试这个教程： [Android 自定义微调器](http://www.gersic.com/blog.php?id=57)

类似的过程用于处理自定义按钮和其他元素。

随着链接断开而更新。试试这个 stackoverflow 答案 [微调器背景设计](https://stackoverflow.com/a/13550512/1759409)

# actionscript-3 - 构建网络事件系统，我应该使用什么数据格式？

> ID：12966250
> 
> 赞同：1
> 
> 时间：2012-10-19T01:46:38.597
> 
> 标签：actionscript-3, node.js, tcp

我正在使用 Node.js 构建基于事件的游戏服务器（到 Flash 客户端）。但是，我很难找到应该如何构建此消息传递的示例。

为了简化事情，我正在考虑使用 json：

```
{signature: 'event_name', { /* event data /*} } 
```

所以我可以使用任何序列化库轻松地写入套接字。这是个好主意吗？如果您认为我根本不知道自己在做什么，请指点我的文章、教程或书籍（我认为是这样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:06:04.133

我会使用[AMF](http://en.wikipedia.org/wiki/Action_Message_Format)。它有一个纯 javascript 版本：[http ://www.jamesward.com/2010/07/07/amf-js-a-pure-javascript-amf-implementation/](http://www.jamesward.com/2010/07/07/amf-js-a-pure-javascript-amf-implementation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:50:21.773

[BSON](http://bsonspec.org/)是您正在寻找的，它具有与 JSON 相似的属性，但它更小且解析速度更快。用于节点的[MongoDB 驱动程序中](http://mongodb.github.com/node-mongodb-native/api-bson-generated/index.html)有一个 BSON 库，不过我不知道任何 Flash 库。

# javascript - 如何隔离或排除jquery手风琴中的特定点击

> ID：12966251
> 
> 赞同：2
> 
> 时间：2012-10-19T01:47:11.777
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-accordion

我有这个代码

```
<h3> <a href="#" > Edit </a>.... </h3>
<div> ... </div> 
```

我在这里有与官方 jquery UI 手风琴相同的代码

[http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

现在，当我单击 h3 时，div 会向下滑动，当我再次单击 h3 时，它会向上滑动。这工作正常，没有任何问题。

现在我`EDIT`在 h3 标签内有文本。现在，当有人单击编辑时，我正在打开灯箱。

但由于编辑在 h3 标签内，当点击编辑链接时，手风琴也会关闭或打开。

我希望如果我点击编辑，那么手风琴不应该打开，但是如果有人点击栏上的任何地方，那么它应该可以正常工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:51:27.587

点击你的编辑按钮使用`event.stopPropagation();`

[这是文档](http://api.jquery.com/event.stopPropagation/)

[完整的小提琴](http://jsfiddle.net/EYfPe/1/)

```
$('a.button').click(function() {
  event.stopPropagation(); 

  /* Do your stuff */

  return false;   
}) 
```

还发现了一个有趣的阅读[here](https://stackoverflow.com/a/1357151/244537)

# database - 存储数据的数据库模型是什么？

> ID：12966253
> 
> 赞同：1
> 
> 时间：2012-10-19T01:47:16.890
> 
> 标签：database, performance, google-app-engine, google-cloud-datastore

我正在使用 python 在 Google App Engine 中编写一个应用程序，我想将用户和用户帖子分类。用户将能够使用组 ID 标记帖子，然后该帖子将显示在组页面上。

我还想将用户与组相关联，以便只有组的成员可以使用该组 ID 标记帖子，这样我就可以在侧面显示组的所有用户。我想知道在用户上拥有一个列出所有组的属性是否会更有效（我认为最多 10 个左右）或者在 Group 模型上拥有一个列出所有组的属性会更好用户（可能有几百个）。

这里有很大的不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:31:14.150

您的数据模型应该源自最可能的用例。你要找回什么？

A. 向用户显示组列表。B. 显示组中的用户列表。

解决方案：

如果只有 A，则将未索引的组列表存储在用户实体的属性中。如果两者都有，则与上述相同，但已编入索引。如果只有 B，则将未索引的用户列表存储在组实体的属性中。

注意：如果您将属性编入索引，则不能将数百个用户 ID 放入其中 - 这将导致索引爆炸。

# c++ - 是否可以在不编写任何 Objective-C 代码的情况下全部用 C++ 开发 iPhone/iPad 应用程序？

> ID：12966255
> 
> 赞同：0
> 
> 时间：2012-10-19T01:47:35.223
> 
> 标签：c++, ios, mobile

> **可能重复：**
> [是否可以用 C++ 对 iPhone 进行编程](https://stackoverflow.com/questions/270455/is-it-possible-to-program-iphone-in-c)

我非常熟悉 C++ 和 Java。我知道 iOS 不支持 Java。但是我真的不想学习另一种新语言Objective-C。那么是否可以在不编写任何 Objective-C 代码的情况下全部用 C++ 开发 iPhone/iPad 应用程序？Android 开发为 C++ 开发人员提供了 NDK 作为选项。我不知道 Apple 是否仅在 C++ 中完全提供了类似的 C++ SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:53:06.507

查看 JUCE 库。

[https://www.juce.com/get-juce/](https://www.juce.com/get-juce/)

我使用它构建我的应用程序，但后来我最感兴趣的是音频。即便如此，该库功能非常丰富且成熟。许可证的价格也很合理。我对 Objective-C 毫无用处，但能够纯粹用 C++ 制作功能强大的应用程序。查看网站上的论坛并导航到 iOS 部分。

还可以查看 stackoverflow 上的 JUCE 标签

[https://stackoverflow.com/questions/tagged/juce](https://stackoverflow.com/questions/tagged/juce)

..这里有点安静，但是juce主论坛很忙。

# android - 找不到导致最终确定尚未停用或关闭的光标的原因

> ID：12966256
> 
> 赞同：0
> 
> 时间：2012-10-19T01:47:53.253
> 
> 标签：android, android-sqlite, android-cursor

我在我的数据库中找不到导致此错误的原因，我在与此问题相关之前发布了一些问题，但由于代码很长，我删除了其中一些具有相同声明的问题，因为 stackoverflow 不允许我发布超过3000 个字符。我尝试使用此方法关闭光标，但不知何故它不能解决问题。

```
public Cursor getMove(){
    String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};

    Cursor c = null;
    try {
        c = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
    } finally {
        if(c != null){
            c.close();
        }
    }
    return c;
} 
```

无论如何[[这里是]](http://www.mediafire.com/view/?qusyl19lc2c1ak4)全班我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:10:15.743

关闭光标是我收到此错误的原因，而不是这个：

```
public Cursor getMove(){
    String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};

    Cursor c = null;
    try {
        c = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
    } finally {
        if(c != null){
            c.close();
        }
    }
    return c;
} 
```

我刚刚使用了这行代码：

```
public Cursor getMove(){
    String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};

    Cursor c = null;
    c = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
    return c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:23:47.837

原因可能是您正在使用数据库连接的多个实例并且没有关闭您分发的所有游标。您接受的（您自己的）答案可能很危险。您是否正在释放从该方法中分发的游标？你最终会在手机上占用宝贵的资源，如果你不这样做，这些资源永远不会被释放。

您可以通过维护一个数据库实例（通过使用单例来处理数据库连接）并最终关闭所有游标来解决此问题。要么将它们编组为 POJO 并立即关闭游标，要么发送回游标并通过调用`activity.managedQuery()`. 您可能还想查看 android 的[SQL lite 锁定](http://kagii.com/post/6828016869/android-sqlite-locking)机制。

# mule - Mule 3.3.0 中的启动/停止流/端点

> ID：12966261
> 
> 赞同：1
> 
> 时间：2012-10-19T01:48:46.280
> 
> 标签：mule

我需要以编程方式启动或停止来自另一个流的流或端点。这可以做到吗？有消息丢失的风险吗？

```
<flow name="control>
  <vm:inbound-endpoint path="in">
  <script:component>
    <!-- start/stop -->
  </script:component>
</flow>

<flow name="startable-stoppable>
  <any-transport:inbound-endpoint/>
  <component/>
</flow> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T23:06:25.730

经过一些研究，我发现在我的情况下，最好的选择是启动/停止与我想要控制的端点关联的连接器。

```
<script:component>
  <script:script engine="groovy">
    muleContext.getRegistry().lookupConnector('connectorName').start() // or stop()
  </script:script>
</script:component> 
```

这种方法的一个缺点是与连接器关联的所有端点都会受到影响。如果这是一个问题，每个端点都应该有自己的连接器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:13:50.503

您可以使用 JMX 控制 Mule 移动部件的生命周期：使用 JConsole 找出您需要从脚本组件访问的 MBean。

# c# - System.IndexOutOfRangeException : 索引超出了数组的范围

> ID：12966265
> 
> 赞同：0
> 
> 时间：2012-10-19T01:49:20.017
> 
> 标签：c#

我有以下数组：

```
public string reArrange(string s)
{
    char[] array = s.ToCharArray();
    int length = array.Length;
    char[] arranged = new char[length];

    for (int i = 0; i < length; i++)
    {
        int newposition = length - i;
        arranged[newposition] = array[i];
    }

    return new string(arranged);
} 
```

但是上述方法会引发以下错误：

> System.IndexOutOfRangeException：索引超出了数组的范围。

那么可能有什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:51:57.967

当`i`为零时，您访问索引处`newposition`等于的数组`length`；这超出了数组的最后一个有效索引，即`0`through `length-1`。

这将解决问题：

```
int newposition = length - i - 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T01:53:58.127

假设长度为 10 个字符。在循环的第一次迭代中，newposition = 10 - 0 = 10。此索引超出了排列数组的范围。

另外，请参阅[这篇](https://stackoverflow.com/questions/228038/best-way-to-reverse-a-string-in-c-sharp-2-0)关于反转字符串的帖子。从那个帖子...

```
public static string Reverse( string s )
{
    char[] charArray = s.ToCharArray();
    Array.Reverse( charArray );
    return new string( charArray );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T01:52:00.453

你要去远方，

```
for (int i = 0; i < length-1; i++) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T01:58:05.567

```
public string reArrange(string s)
{
    char[] array = s.ToCharArray();
    int length = array.Length;
    char[] arranged = new char[length];

    for (int i = 0; i < length; i++)
    {
       int newposition = length - i - 1;
       arranged[newposition] = array[i];
    }
    return new string(arranged);
} 
```

# .net - SqlCommand.Parameters.AddWithValue 注入安全吗？

> ID：12966269
> 
> 赞同：2
> 
> 时间：2012-10-19T01:50:23.290
> 
> 标签：.net, parameters, sql-injection, sqlcommand, sql-parametrized-query

`SqlCommand.Parameters.AddWithValue`方法注入安全吗？

它接受`Object`有效载荷，那么它如何防止注入呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T01:56:49.543

这实际上取决于您如何使用它们。

看看这里的区别。第一个是安全的，但不是第二个。

```
sqlCommand.CommandText = "select * from Books where Title = @title";
sqlCommand.Parameters.AddWithValue("title", txtTitle.Text); 
```

* * *

```
string sql = "select * from Books where title = " + txtTitle.Text;
sqlCommand.CommandText = "exec(@sql)";
sqlCommand.Parameters.AddWithValue("sql", sql); 
```

* * *

[在Does asp.net 防止 sql 注入攻击中](https://stackoverflow.com/questions/5144566/does-asp-net-protect-against-sql-injection-attacks)查看有关它的更多详细信息

# apache - 您无权访问此服务器上的 /nagios/

> ID：12966270
> 
> 赞同：5
> 
> 时间：2012-10-19T01:50:32.760
> 
> 标签：apache, nagios, graphite

我一直在尝试在 mac 上设置 nagios，它确实看起来很容易，但我被困在这一点上 - 我无法加载`localhost/nagios/`页面。据我所知，我有正确的配置。

我已经安装了 PHP 并将 httpd.conf 更改为在 index.html 中包含“index.php”。我不认为还有更多，但这件小事并没有让我继续。

谁能给我一些启示并告诉我路？

这是我在 apache 的 hhtpd.conf 中的 nagios 配置文件中的内容：

# Nagios 的东西

ScriptAlias /nagios/cgi-bin/ "/opt/local/sbin/nagios/"

<目录“/opt/local/sbin/nagios”>

AllowOverride 无

```
Options ExecCGI
Order allow,deny
Allow from all
AuthName "Nagios Access"
AuthType Basic
AuthUserFile /opt/local/etc/nagios/htpasswd.users
require valid-user 
```

</目录>

别名 /nagios "/opt/local/share/nagios"

<目录“/opt/local/share/nagios”>

```
Options None
AllowOverride AuthConfig
Order allow,deny
Allow from all 
```

</目录>

# 结束 Nagios 的东西

-- apache 的 error_log 文件有这个：

[Fri Oct 19 11:02:09 2012] [error] [client ::1] Options 指令禁止的目录索引：/opt/local/share/nagios/

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T09:43:58.213

要解决此问题：

1.  只需在您的 Nagios 服务器上 安装“ **PHP ”。**`yum install php.i686`如果您的操作系统是 32 位或`yum install php.x86_64`您的操作系统是 64 位

2.  php 安装后**重新启动**您的**Apache/httpd**服务器。`service httpd restart`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:59:02.423

您必须在 apache 配置中更改 nagios 文件夹权限。在 apache 中查找 nagios 配置文件（可能是 conf.d 或额外文件夹）。

[在这里检查](http://www.unixmen.com/how-to-install-nagios-in-rhel-centos-fedora/)

# ios5 - Interface Builder 文件中的未知类 [A Collection View Controller]

> ID：12966271
> 
> 赞同：1
> 
> 时间：2012-10-19T01:51:02.460
> 
> 标签：ios5, ios6, uicollectionview

我希望在我的 iOS 5.1.1 iPad 第 1 代上运行 iOS 6 程序，所有的`UICollectionView`s 都消失了，调试控制台说

```
Unknown class collectionViewController in Interface Builder file 
```

是因为与`UICollectionView`iOS 5中的s不兼容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:53:54.223

正确的。根据 UICollectionView 类的文档，它的可用性被标记为“在 iOS 6.0 及更高版本中可用”。这意味着它在 iOS 5 中不存在。

# android - Activity 泄露了最初在这里注册的 IntentReceiver。您是否错过了对 unregisterReceiver() 的调用？

> ID：12966276
> 
> 赞同：0
> 
> 时间：2012-10-19T01:51:41.987
> 
> 标签：android, service

我正在使用服务从该位置获取更新，它不是 IntentService，但日志显示**Activity 泄露了最初在此处注册的 IntentReceiver。您是否错过了对 unregisterReceiver() 的调用？** 我不使用接收器，所以我不注册或取消注册。那么，这到底是怎么回事？

我粘贴我的服务代码：

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;

public class UpdateService2 extends Service {

    private LocationManager locManager;
    private LocationListener locListener;
    private Location loc;
    public static int UPDATE_TIME   = 30000;
    public static long MAX_TIME     = 600000;
    public static long waited = 0;
    boolean active = true;
    String TAG = "UpdateService2";
    Thread myThread;
    SharedPreferences prefs;
    SharedPreferences.Editor editor;

    @Override
    public IBinder onBind(Intent arg0) {
        Log.d(TAG, "onBind");
        return null;
    }

    public void onCreate() {
        Log.d(TAG, "onCreate");
        SharedPreferences prefs = getSharedPreferences(MyConstants.MY_PREFERENCES,Context.MODE_PRIVATE);
        editor = prefs.edit();
        startGettingLocation();

        Log.d("UpdateService","Thread - active:"+active+", maxTime: "+MAX_TIME);
        myThread = new Thread() {
            public void run(){
                Log.d("UpdateService","run");
                try {
                    waited = 0;
                    Log.d("UpdateService","Thread - active:"+active+", maxTime: "+MAX_TIME+", waited: "+waited);
                    while(active && (waited < MAX_TIME)) {
                        sleep(10000);
                        if(active) {
                            waited += 10000;
                            Log.d("UpdateService","Thread update: "+waited/1000+" seg");
                        }
                    }
                } catch(InterruptedException e) {
                    Log.d("UpdateService","Exception: "+e.toString());
                } finally {
                    interrupt();
                }
            }
        };
    }

    @Override
    public void onDestroy() {
        Log.d(TAG, "onDestroy");
        active = false;
    }

    @Override
    public void onStart(Intent intent, int startid) {
        myThread.start();
        Log.d(TAG, "onStart");
    }

    private void startGettingLocation(){
        try {
            locListener = new LocationListener() {
                public void onLocationChanged(Location location) {
                    updatePosition(location);
                    Log.d("UpdateService","Update location - Lat:"+location.getLatitude()+", Lon:"+location.getLongitude());
                }
                public void onProviderDisabled(String provider){
                }
                public void onProviderEnabled(String provider){
                }
                public void onStatusChanged(String provider, int status, Bundle extras){
                }
            };
            locManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
            locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, UPDATE_TIME, 0, locListener);
            loc = locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            if (loc != null) {
                updatePosition(loc);
            }
        } catch (Exception e){
            Log.d("UpdateService", e.toString());
        }
    }

    private void updatePosition(Location loc) {
        if(loc != null) {
            Double dLat = loc.getLatitude();
            Double dLon = loc.getLatitude();
            editor.putInt(MyConstants.PREFERENCES_LAT, dLat.intValue());
            editor.putInt(MyConstants.PREFERENCES_LON, dLon.intValue());
            editor.commit();
        }
    }

} 
```

然后，来自活动 onCreate 的调用是这样的：

```
msgIntent = new Intent(this, UpdateService2.class);
startService(msgIntent); 
```

来自 onDestroy 的调用是这样的：

```
stopService(msgIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:57:38.740

实际上，（我相信）您在以下位置隐式注册了一个接收器[`requestLocationUpdates`](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)：

```
locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, UPDATE_TIME, 0, locListener); 
```

您应该稍后致电[`removeUpdates`](http://developer.android.com/reference/android/location/LocationManager.html#removeUpdates%28android.location.LocationListener%29)：

```
locManager.removeUpdates(locListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:11:04.880

这是“我的”解决方案（它真的来自这里：[Alarms](http://www.carlos-garcia.es/tutoriales/android-alarmas-alarmmanager.php)）：

在清单上，我注册了我的广播接收器：

```
<!-- Register BroadcastReceiver -->  
<receiver android:name="com.example.MyReceiver"/> 
```

这是接收器的实现：

```
public class MyReceiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent) {  
        MyLocation myLocation = new MyLocation(context);
        myLocation.getLocation();
        SharedPreferences prefs = context.getSharedPreferences(MyConstants.MY_PREFERENCES,Context.MODE_PRIVATE);
        User.myLat =  (double) prefs.getInt(MyConstants.PREFERENCES_LAT, 0);
        User.myLon =  (double) prefs.getInt(MyConstants.PREFERENCES_LON, 0);
        User.isValidPosition = prefs.getBoolean(MyConstants.PREFERENCES_VALID, false);

        //TEST
        Toast.makeText(context, "Testing alarm onReceive - Lat:"+User.myLat/1E6
        +", Long:"+User.myLon/1E6+", isValid:"+User.isValidPosition, Toast.LENGTH_LONG).show();  
        Log.d("MyReceiver","Lat:"+User.myLat+", Long:"+User.myLon+", isValid:"+User.isValidPosition);
        }

    } 
```

我使用的常量（在另一个类中）：

```
public class MyConstants {
    public static String MY_PREFERENCES = "MyPreferences";
    public static String PREFERENCES_LAT = "lat";   
    public static String PREFERENCES_LON = "lon";   
    public static String PREFERENCES_VALID = "isValid";
    public static final int ALARM_REQUEST_CODE = 1;
} 
```

MyLocation 类，这是我从活动中调用的类：

```
public class MyLocation {
private LocationManager locManager;
private LocationListener locListener;
private Location loc;
private SharedPreferences prefs;
private SharedPreferences.Editor editor;
private Context context;
private String TAG = "MyLocation";
private int UPDATE_TIME = 0;

public MyLocation(Context context){
    this.context = context;
    prefs = this.context.getSharedPreferences(MyConstants.MY_PREFERENCES,Context.MODE_PRIVATE);
    editor = prefs.edit();
}

public void getLocation(){
    //Register to get updates of the location
    locListener = new LocationListener() {
    public void onLocationChanged(Location location) {
    updatePosition(location);
    Log.d(TAG,"Update location - Lat:"+location.getLatitude()+", Lon:"+location.getLongitude());                                
}

public void onProviderDisabled(String provider){

}
public void onProviderEnabled(String provider){

}
public void onStatusChanged(String provider, int status, Bundle extras){

}
};
    startGettingLocation();
    locManager.removeUpdates(locListener);
}

private void startGettingLocation(){
    try {
        locManager = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, UPDATE_TIME, 0, locListener);
        loc = locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
    if (loc != null) {
        updatePosition(loc);
    }
    } catch (Exception e){
        Log.d(TAG, e.toString());       
    }
}

private void updatePosition(Location loc) {
if(loc != null) {
    Double dLat = loc.getLatitude()*1E6;
    Double dLon = loc.getLongitude()*1E6;
    editor.putInt(MyConstants.PREFERENCES_LAT, dLat.intValue());
    editor.putInt(MyConstants.PREFERENCES_LON, dLon.intValue());
    editor.putBoolean(MyConstants.PREFERENCES_VALID, true);
    editor.commit();
} 
}

} 
```

我将纬度和经度的参考放在首选项中，以便从应用程序轻松访问这些数据。

最后，这是来自活动的调用，开始获取我的位置：

```
MyLocation myLocation;
myLocation = new MyLocation(this);
myLocation.getLocation();
scheduleUpdates(30); 
```

在这种情况下，我只是在我做的那一刻后 30 秒设置了一个警报，但是这种行为很容易将警报编程为重复任意次数。这是我用来建立警报的方法，即使应用程序关闭也能唤醒系统：

```
private void scheduleUpdates(int when){  
Log.d("CreateGroupFormActivity", "Alarm");
AlarmManager manager = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);  

Intent intent  = new Intent(this, MyReceiver.class);  
PendingIntent pIntent = PendingIntent.getBroadcast(this, MyConstants.ALARM_REQUEST_CODE, intent,  PendingIntent.FLAG_CANCEL_CURRENT);  
manager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + when * 1000, pIntent);       
} 
```

# c# - 如何编组 size_t 跨平台，使用语义类型

> ID：12966283
> 
> 赞同：2
> 
> 时间：2012-10-19T01:52:05.190
> 
> 标签：c#, pinvoke, marshalling

据我了解， MarshalAsAttribute(UnmanagedType.SysUInt) 应该将特定于平台的无符号整数类型（32 或 64 字节）编组为托管类型（ulong）。

```
 /// Return Type: size_t->unsigned int
    ///bgr: uint8_t*
    ///width: int
    ///height: int
    ///stride: int
    ///output: uint8_t**
    [DllImportAttribute("libwebp.dll", EntryPoint = "WebPEncodeLosslessBGR")]
    [return: MarshalAsAttribute(UnmanagedType.SysUInt)]
    public static extern ulong WebPEncodeLosslessBGR([InAttribute()] IntPtr bgr, int width, int height, int stride, ref IntPtr output); 
```

但它不起作用 - 我收到此错误：

```
Cannot marshal 'return value': Invalid managed/unmanaged type combination (Int64/UInt64 must be paired with I8 or U8). 
```

我知道[我可以将返回类型切换为 IntPtr](https://stackoverflow.com/questions/1309509/correct-way-to-marshal-size-t)，但这对于使用我的 API 的人来说是非常不直观的。

为什么 SysUInt 不工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T02:05:03.567

您可以使用 将 PInvoke 方法保持为私有`UIntPtr`，并使用您喜欢的签名实现另一种方法，该方法调用 PInvoke 正确映射所有内容，并且这个方法将是公共的：

```
/// Return Type: size_t->unsigned int
///bgr: uint8_t*
///width: int
///height: int
///stride: int
///output: uint8_t**
public static ulong WebPEncodeLosslessBGR([InAttribute()] IntPtr bgr, int width, int height, int stride, ref IntPtr output)
{
    return (ulong)_WebPEncodeLosslessBGR(bgr, width, height, stride, ref output);
}

[DllImportAttribute("libwebp.dll", EntryPoint = "WebPEncodeLosslessBGR")]
[return: MarshalAsAttribute(UnmanagedType.SysUInt)]
private static extern UIntPtr _WebPEncodeLosslessBGR([InAttribute()] IntPtr bgr, int width, int height, int stride, ref IntPtr output); 
```

当框架变得难以处理时......不要使用它们。编组是一种痛苦，我倾向于只使用我已经知道的东西......其他一切，我只是四处走动。

**编辑**

它不起作用，因为编组器不够聪明，无法看到每种`SysUInt`类型都适合一种`ulong`类型。它正在检查返回，与参数相同。

确实，您不能将`ulong`and`SysUInt`用作参数，但您可以将其用作 return ... 看到差异并不聪明。=\

**有哪些选择？**

`UIntPtr`似乎是最好的选择......但还有其他选择：实现自定义编组器，使用接口[`ICustomMarshaler`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.icustommarshaler.aspx)......并使用`UnmanagedType.CustomMarshaler`：

```
[MarshalAs(UnmanagedType.CustomMarshaler, MarshalTypeRef = typeof(CustomMarshalerType))] 
```

**ICustomMarshaler 实现**

使用 ICustomMarshaler 的这个实现，您可以做您想做的事。我没有测试它，因为我没有一个非托管库来进行测试，但它很简单，而且非常简单......所以我认为它会按原样工作，无需任何更改。如果没有，请发表评论，我会修改它。

```
public class CustomMarshalerType : ICustomMarshaler
{
    public object MarshalNativeToManaged(IntPtr pNativeData)
    {
        return (ulong)Marshal.ReadIntPtr(pNativeData).ToInt64();
    }

    public IntPtr MarshalManagedToNative(object ManagedObj)
    {
        throw new InvalidOperationException();
    }

    public void CleanUpNativeData(IntPtr pNativeData)
    {
    }

    public void CleanUpManagedData(object ManagedObj)
    {
    }

    public int GetNativeDataSize()
    {
        return IntPtr.Size;
    }
} 
```

# java - 为什么我在我的 Java 代码中得到这个输出？

> ID：12966285
> 
> 赞同：0
> 
> 时间：2012-10-19T01:52:27.067
> 
> 标签：java, stack, queue, implementation

```
The student at the top of the stack is Gullion,Hailey

Student Mcglothlen,Shizue is removed from the stack

Here are all the elements of the Stack using an Iterator
--------------------------------------------------------
Stack$Node@3012db7c
Stack$Node@2607c28c
Stack$Node@477588d5
Stack$Node@756a7c99
Stack$Node@221a5d08
Stack$Node@70d1c9b5
Stack$Node@5d11c3f0
Stack$Node@3956f14c
Stack$Node@7afbd1fc
null

Here are all the elements in the Stack
--------------------------------------
Putney,John
Larkey,Ismael
Winkler,Isiah
Aceto,Liana
Hamill,Crissy
Caraway,Elmira
Gullion,Hailey
Rodrigez,Jonie
Madruga,Terrell
Williams,Diego 
```

使用 Iterator 的 Stack 的第一个元素列表显然不起作用。我不知道为什么。这是我的 Stack 类中的 Iterator 代码：

```
public Iterator<Student> iterator()  { return new ListIterator();  }

// an iterator, doesn't implement remove() since it's optional
private class ListIterator implements Iterator<Student> {
    private Node<Student> current = top;

    public boolean hasNext()  { 
        return current != null;                     
    }

    public void remove() { 
        throw new UnsupportedOperationException();  

    @SuppressWarnings("unchecked")
    public Student next() {
        if (!hasNext()) throw new NoSuchElementException();
        current = current.next; 
       return (Student)current;
    }
} 
```

这是我的 Driver 类中似乎有问题的代码：

```
System.out.println("\nHere are all the elements of the Stack using an Iterator");
  System.out.println("--------------------------------------------------------");
  Iterator <Student> iter = myStack.iterator();
  while (iter.hasNext() )
      System.out.println(iter.next() ); 
```

以下是所有课程：

堆栈： http: [//pastebin.com/2HVLVHuM](http://pastebin.com/2HVLVHuM)

队列类： http: [//pastebin.com/3q537kHW](http://pastebin.com/3q537kHW)

学生班： http: [//pastebin.com/UnBB7kPA](http://pastebin.com/UnBB7kPA)

驱动类： http: [//pastebin.com/yeA34MNd](http://pastebin.com/yeA34MNd)

我只能在堆栈类中编写代码。这样做的目的是使用队列实现堆栈。希望这可以帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:04:47.783

首先，请参阅 nneonneo 对您`next()`方法中不正确的演员的回答。

*其次，您的 Iterator 实现不正确。*

迭代器中的`next()`函数将元素`current`设置为`current.next`.

在调用`next()`迭代的最后一个元素后，`hasNext()`应该返回 false。但它没有，因为`current`仍然指向你刚刚返回的元素。所以你会`next()`再打电话。在此方法中，`current = current.next`将设置`current`为`null`，然后将其返回。这不应该发生，因为 hasNext 是真的，对吧？

出于同样的原因，您的堆栈的第一个元素丢失了：您设置`current`为堆栈的顶部元素，但在输出任何内容之前，您已经切换到`current = current.next`. 您应该在完成输出*后*执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T01:55:10.963

你需要在你的类中添加一个`toString()`方法。`Student`迭代器工作正常，但`System.out.println()`不知道如何显示`Student`.

`Student`像这样在类中添加一些东西......

```
public String toString(){
    return name;
} 
```

这样当你调用时`System.out.println()`，它可以输出一个真实的值。当您调用 时`System.out.println(Object)`，它总是尝试输出该`toString()`值。如果未定义此方法，它将输出对象的 java ID，这就是您所看到的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T02:16:47.420

`current`在您的`Stack`迭代器中定义为`Node<Student>`. `current`您使用强制转换从您的`next()`方法返回。

因此，`next()`返回一个`Node<Student>`（类型转换为`Student`），而不是实际的`Student`. 由于`Node`可能没有`toString`方法，因此您将获得默认输出 ( `Stack$Node@<addr>`)。

要修复，请返回类似`current.item`from 的内容`next()`（假设存储在中的项目`Node`被调用`item`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T03:26:19.210

> 使用 Iterator 的 Stack 的第一个元素列表显然不起作用。我不知道为什么。

因为您的迭代器返回的是 a`Node<Student>`而不是学生。问题出在：

```
return (Student)current; 
```

您可能尝试过这样做，但遇到了不兼容的类型错误：

```
return current; 
```

所以你试图通过强制转换来修复。问题是节点不是学生。一个节点包含一个学生。您需要返回节点包含的学生。

尝试这个：

```
 return current.data; 
```

不需要强制转换，因为编译器知道 node 的“数据”成员是 Student，因为您声明了 current 类型`Node<Student>`。这将解决您的学生打印不正确的问题。但是，正如@Konstantin 所指出的，您的迭代器仍然损坏。您需要将 current 的值保存在临时变量中，移动 current，然后返回临时变量。这是一种可能的实现：

```
 public Student next() {
        if (current == null) throw new NoSuchElementException();
        Node<Student> result = current;
        current = current.next;
        return result.data;
    } 
```

[结语]

您确实需要查看[泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/)。您在上面粘贴的代码中并不清楚，但在 paste-bin 代码中很明显您使用 Student 作为类型参数。这是非常不标准和令人困惑的。惯例是使用大写字母 - 通常是 T。您应该像下面这样声明堆栈。在您使用 Student 的任何地方，将其替换为 T。

```
public class Stack <T> implements Iterable<T>{   // good 
```

代替

```
public class Stack <Student> implements Iterable<Student>{ // bad 
```

T 表示稍后确定的某种类型，您可以将 Stack 与任何类型的对象一起使用。仅当您实际创建堆栈时才使用 Student （或其他）

```
public static void main(String [] args)
{
    Stack<Student> x = new Stack<Student>(); 
```

# iis-7.5 - 使用集成管道模拟域用户

> ID：12966286
> 
> 赞同：22
> 
> 时间：2012-10-19T01:52:36.737
> 
> 标签：iis-7.5, windows-authentication, windows-server-2008-r2, impersonation, integrated-pipeline-mode

在本地 Intranet 环境中，如果我们想使用 Impersonate 我们的 Windows 域用户，我们注定要在我们的应用程序池中使用“经典”管道模式，还是有一种新的方式来声明性地“运行”他们（可以这么说)?

我的目标是在我的 Intranet 上对本地 Web 应用程序使用 Windows 身份验证，以便用户可以在其 Active Directory 帐户下进行身份验证和运行应用程序（原理）。每次我尝试这个（当然使用 NetworkService 身份）时，我都会收到此错误：

![错误信息截图](../Images/094cf1443a57943a178ae60f040f87d0.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-29T17:23:52.090

我写了一个小应用程序来显示当前用户的网络用户名，这些用户名是从几个不同的地方抓取的，例如`Page.User.Identity.Name`. 我还使用几种不同的方法查询 Active Directory 来获取有关域用户的信息。这一切都验证了以下内容。

我发现了两种使用 Windows 身份验证运行应用程序的主要模式，根据我的研究，这主要用于 Intranet 环境。以下是配置的最低基本要素：

**经典模式**

*   AppPool - 托管管道设置为经典模式。
*   AppPool - 身份设置为网络服务。
*   身份验证 - 已禁用：匿名身份验证
*   身份验证 - 已启用：ASP.NET 模拟
*   身份验证 - 启用：Windows 身份验证
*   提供程序 - 已禁用：Kerberos
*   高级设置 - 内核模式：要么

**集成模式**

*   AppPool - 托管管道设置为集成模式。
*   AppPool - 身份设置为网络服务。
*   身份验证 - 已禁用：匿名身份验证
*   身份验证 - 已禁用：ASP.NET 模拟
*   身份验证 - 启用：Windows 身份验证
*   提供程序 - 已启用：Kerberos
*   高级设置 - 内核模式：禁用

**现在这是踢球者！**

如果您想使用集成模式（这是理想的，因为它会产生更多功能，而且集成），您将需要启用委派。这里有几篇必读的文章来了解[委派的基础知识，以及](http://technet.microsoft.com/library/ee191523.aspx)[动态 SPN 注册](http://msdn.microsoft.com/en-us/library/ms191153%28v=sql.105%29.aspx)的扩展。由于这涉及到您可能需要深入研究的更多 Kerberos 和安全注意事项，因此坚持使用经典模式可能会更容易，您所要做的就是启用模拟并收工。否则作弊并禁用`validateIntegratedModeConfiguration`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-27T15:43:47.043

否，但“集成”管道需要您手动模拟 Windows Authenticated 用户。至少在 IIS8.5 中是这样。

为什么？ [经典模拟破坏了 .NET 的异步特性](http://forums.asp.net/post/5604495.aspx)。具体来说，当线程被多个用户同时使用时，很难管理线程的 WindowsIdentity。

如何？ [使用 WindowsImpersonationContext](http://forums.asp.net/post/5603467.aspx) 例如

```
// Start with identity assigned by IIS Application Pool
var current = System.Security.Principal.WindowsIdentity.GetCurrent();

// Enable Windows Authentication in ASP.NET *and* IIS, which ensures 
// User.Identity is a WindowsIdentity
WindowsIdentity clientId = (WindowsIdentity)User.Identity;

// When 'using' block ends, the thread reverts back to previous Windows identity,
// because under the hood WindowsImpersonationContext.Undo() is called by Dispose()
using (WindowsImpersonationContext wic = clientId.Impersonate())
{
    // WindowsIdentity will have changed to match clientId
    current = System.Security.Principal.WindowsIdentity.GetCurrent();
}
// Back to the original identity
current = System.Security.Principal.WindowsIdentity.GetCurrent(); 
```

问题？ [有时您需要使用委托而不是模拟。](https://stackoverflow.com/questions/1405612/impersonation-in-asp-net-mvc)

# powershell - 如何在 Windows 的 emacs 中使 powershell 行缓冲

> ID：12966287
> 
> 赞同：0
> 
> 时间：2012-10-19T01:52:56.790
> 
> 标签：powershell, emacs, command-line

我想在 emacs 中使用 powershell，但似乎 emacs 中的 powershell 是块缓冲的。例如，当我像这样编写一个简单的 c 程序时：

```
int main()
{
 printf("input the number of a value: \n");
 scanf("%d", &num);
} 
```

我编译它并使其在 emacs 下的 Powershell 中运行。`input the number of a value:`在我输入一个数字并点击之前，它不会打印出该行`Enter`。c 程序在 emacs 之外的 powershell 中运行良好。我的问题是如何运行缓冲在 emacs 中的 PowerShell 行？

**编辑**我使用[Powershell.el](http://www.emacswiki.org/emacs/Powershell.el)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-20T12:35:53.150

如果您的程序连接到终端`stdout`，则 C 库的 是行缓冲的。`stdout`您在原始程序中发现该行为（没有`fflush`）的原因仅仅是因为在通过 GNU EMACS 运行时，您的程序认为它没有连接到真正的终端。例如，尝试在`M-x term`或中运行您的程序`M-x ansi-term`。此处给出的解决方案建议您使用`fflush`，这绝对不是解决方案，因为您不会更改系统中使用 C 库的每个小程序。所以你的问题的答案是真的给你的 GNU EMACS 一个真正的终端，而不是改变你的程序。现在，[坏消息是这些 GNU EMACS 终端似乎都不能在 Windows 上运行](https://stackoverflow.com/questions/20263012)。（对不起。）（尽管如此，[似乎有人声称可以`ansi-term`在 Windows](https://www.reddit.com/r/emacs/comments/6t9d8t/emacs_shell_and_ansiterm_on_windows/)上运行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:04:51.973

这对我有用`eshell`：

```
#include <stdio.h>

int main() {
  int num;
  printf("input the number:\n");
  fflush(stdout);
  scanf("%d", &num);
  printf("inc: %d\n", num + 1);
} 
```

我无法重现您的问题，`powershell.el`因为我看到了另一个问题：它不等待输入，而是“读取”0，打印“inc：1”并退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:42:31.607

你需要`fflush`在`fscanf`.

# c# - 使用外部引用代码时如何进行多线程

> ID：12966288
> 
> 赞同：0
> 
> 时间：2012-10-19T01:53:03.063
> 
> 标签：c#, multithreading

我设法让一个网络摄像头使用 Aforge 运行。代码可以在[我的回答](https://stackoverflow.com/a/12966093/613326)中找到。

现在我想做一些计算机视觉的东西，并将一些结果返回到主窗体。我遇到的线程问题来自该代码的这一部分：

```
void FinalVideo_NewFrame(object sender, NewFrameEventArgs eventArgs)
{ Bitmap video = (Bitmap)eventArgs.Frame.Clone();
  pictureBox1.Image = video;
  // count red colors  
  // not yet written
  TextBox1.text = "demo error";  // >> i like to return a value to the main form
 } 
```

然而，问题是它在另一个线程中处理视频帧，现在我无法从该线程返回答案到主窗体。我没有写 Aforge，我只是把它链接起来，让它在我的表单上工作。

我无法改变 Aforge 视频的工作方式。我的意思是它从来没有得到回报，这是我喜欢做的事情。有没有办法得到结果，比如文本框中的字符串文本。在运行此代码的主窗体上？

我可以按照线程的示例代码进行操作，但这有点过头了，因为我对 Aforge 中视频采集的设计方式没有太大影响。

我一直想知道是否仅仅为了更新文本框而提高另一个线程可能会起作用，但我不确定并且想知道最终会创建许多线程，从而导致大量内核切换负载。

一些附加信息：上面的代码线程是从下面的这个按钮功能开始的。

```
private void button1_Click(object sender, EventArgs e)
{ FinalVideo = new VideoCaptureDevice(VideoCaptureDevices[comboBox1.SelectedIndex].MonikerString);
  FinalVideo.NewFrame += new  NewFrameEventHandler(FinalVideo_NewFrame);
  FinalVideo.Start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:03:08.953

我认为您需要使用[SynchronizationContext](http://www.codeproject.com/Articles/31971/Understanding-SynchronizationContext-Part-I)。获取 UI`SynchronizationContext`并将上下文传递给新线程。在新线程中，当你想将结果返回给 UI 线程时，使用`Send`or`Post`方法。这`SynchronizationContext`实际上有助于编组对 UI 线程的调用，以便可以正确更新 UI 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:21:50.350

尝试像这样编写代码：

```
void FinalVideo_NewFrame(object sender, NewFrameEventArgs eventArgs)
{
    Bitmap video = (Bitmap)eventArgs.Frame.Clone();
    pictureBox1.Invoke((Action)(() =>
    {
        pictureBox1.Image = video;
        TextBox1.text = "demo error";
    }));
} 
```

将委托`.Invoke`的执行推`Action`送到创建`pictureBox1`控件的同一线程上，换句话说，就是 UI 线程。

# jquery - 简单的 Jquery 下拉菜单重复动画，我该如何停止呢？

> ID：12966290
> 
> 赞同：1
> 
> 时间：2012-10-19T01:53:06.927
> 
> 标签：jquery, animation, drop-down-menu, repeat

尝试多次滚动悬停在链接上，这就是触发重复动画的原因。

查询//

```
 // Wait for the page and all the DOM to be fully loaded
$('body').ready(function() {

            // Add the 'hover' event listener to our drop down class
    $('.dropdown').hover(function() {
                    // When the event is triggered, grab the current element 'this' and
                    // find it's children '.sub_navigation' and display/hide them
        $(this).find('.sub_navigation').slideToggle(); 
    });
}); 
```

HTML//

```
 <ul id="navigation">
<li class="dropdown"><a href="#">Dropdown</a>
    <ul class="sub_navigation">
        <li><a href="#">Sub Navigation 1</a></li>
        <li><a href="#">Sub Navigation 2</a></li>
        <li><a href="#">Sub Navigation 3</a></li>
    </ul>
</li>
<li class="dropdown"><a href="#">Dropdown 2</a>
    <ul class="sub_navigation">
        <li><a href="#">Sub Navigation 1</a></li>
        <li><a href="#">Sub Navigation 2</a></li>
        <li><a href="#">Sub Navigation 3</a></li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:58:34.503

而不是有`$('.dropdown').hover()`事件，尝试`mouseenter`和`mouseexit`这样的：

```
('.dropdown').on('mouseeneter', function() { 
```

和

```
('.dropdown').on('mouseexit', function() { 
```

# 编辑

像这样的[小提琴](http://jsfiddle.net/Yfm5D/)- [Yfm5D](http://jsfiddle.net/Yfm5D/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:04:05.213

你可以在这里做一些简单的事情：http: [//jsfiddle.net/gJmQh/](http://jsfiddle.net/gJmQh/)

`is(":visible")`查看。

```
$(this).find('.sub_navigation').is(":visible") 
```

希望它适合你的事业`:)`

**代码**

```
// Wait for the page and all the DOM to be fully loaded
$('body').ready(function() {

    // Add the 'hover' event listener to our drop down class
    $('.dropdown').hover(function() {
        // When the event is triggered, grab the current element 'this' and 
        if ($(this).find('.sub_navigation').is(":visible")) {
            // find it's children '.sub_navigation' and display/hide them
            $(this).find('.sub_navigation').slideUp();
        } else {
            $(this).find('.sub_navigation').slideDown();

        }

    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T02:06:05.147

[像这样](http://jsfiddle.net/AcJbv/)

您需要定义两个功能`.hover()`才能工作（悬停/悬停）。

```
$(document).ready(function() {
    $('.dropdown').hover(function() {

        $(this).find('.sub_navigation').slideDown();
    }, function() {
        $(this).find('.sub_navigation').slideUp();
    });
}); 
```

# hibernate - 带有 PostgreSQL 的 Grails 不生成表

> ID：12966292
> 
> 赞同：4
> 
> 时间：2012-10-19T01:53:18.330
> 
> 标签：hibernate, postgresql, grails, grails-orm

所以我有一些简单的域类，我确保它们没有使用任何 PostgreSQL（或任何其他供应商，就此而言）保留字。执行`grails schema-export`会产生一个 ddl，当对同一个数据库运行时，它会成功执行，并毫无问题地创建所有表。

但是，在运行我的 grails 应用程序时，我收到错误消息`ERROR: relation "artist" does not exist`。（艺术家是我试图在 BootStrap.groovy 中创建样本的域）。

查看我的数据库，我可以看到没有为我的域创建任何表。

我已启用所有日志记录`org.hibernate`，但没有任何迹象表明有任何问题。我能看到的唯一问题是没有与任何表的创建相关的日志记录，只有简单选择的示例查询。

这是我的 DataSource.groovy：

```
dataSource {
    pooled = true
    driverClassName = "org.postgresql.Driver"
    dialect = "org.hibernate.dialect.PostgreSQLDialect"
    username = "my_username"
    password = "my_password"
}
hibernate {
    cache.use_second_level_cache = false
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbcreate = "create-drop"
            url = "jdbc:postgresql://localhost:5432/dev"
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:postgresql://localhost:5432/test"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:postgresql://localhost:5432/prod"
            pooled = true
            properties {
               maxActive = -1
               minEvictableIdleTimeMillis=1800000
               timeBetweenEvictionRunsMillis=1800000
               numTestsPerEvictionRun=3
               testOnBorrow=true
               testWhileIdle=true
               testOnReturn=true
               validationQuery="SELECT 1"
           }
       }
    }
} 
```

我已经验证了凭据（上面的假冒）是有效的，用户有权限，数据库在指定的位置运行，等等。

是否有任何我遗漏的内容，或者我可以启用的任何其他类型的日志记录可能会显示错误是什么，或者有助于找到它？

我觉得最好奇的是，生成的 ddl`schema-export`运行得很好。grails 在运行时是否会以不同的方式生成 SQL，或者是否有任何东西会导致 grails 不执行任何 create 语句？

Grails 版本 2.1.1，PostgreSQL 9.2.1

根据要求引导：

```
import my.site.domain.artist.*

class BootStrap {

    def init = { servletContext ->
        System.out.println("\n")
        log.info("---------------------------------------------------")
        log.info("BootStrap initializing...")
        log.info("---------------------------------------------------")
        TimeZone.setDefault(TimeZone.getTimeZone("UTC"))
        log.info("Default TimeZone set to " + TimeZone.getDefault().displayName)

        Artist artist = new Artist(artistName: 'Artist Name', shortBio: "Short Bio", biography: "Bio", url: "/some_artist")

        artist.save()
        if(artist.hasErrors()) {
            log.info(artist.errors)
        } else {
            log.info("--Artist--")
            log.info("dateCreated: " + artist.dateCreated)
            log.info("lastUpdated: " + artist.lastUpdated)
            log.info("mediumImageURL: " + artist.mediumImageURL)
        }
    }

    def destroy = {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:33:50.007

它可能是 pgsql 和 gorm 的特性，因为它与 ID 的自动生成序列以及 id 是 pgsql 中的保留字有关。确保在您的域对象中使用类似 user_id（具有适当的表语法）而不是 id。

# tortoisesvn - 在 TortoiseSVN 日志消息屏幕上，是否可以显示作者的昵称？

> ID：12966293
> 
> 赞同：3
> 
> 时间：2012-10-19T01:53:49.970
> 
> 标签：tortoisesvn

在我公司，我们的用户名是非描述性的（例如 g12345），所以为了快速识别作者，我们在每条提交消息的开头都包含我们的名字。我认为该功能不存在，但如果可以为手动输入的作者显示替代名称，它将变得不必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:11:24.567

如果您的意思是您的 SVN 用户名，我认为 SVN 或 TortoiseSVN 没有此功能。

如果您使用登录名作为用户名，那么您可以将 SVN 配置为使用不同的用户名，如以下问题所述：[在 Subversion 中，我可以成为我的登录名以外的用户吗？](https://stackoverflow.com/q/405690/422353)

# list - 带有指针和函数的 C 列表

> ID：12966296
> 
> 赞同：0
> 
> 时间：2012-10-19T01:53:58.973
> 
> 标签：list, function, pointers, linked-list, nodes

我创建了以下程序[http://pastie.org/5081517](http://pastie.org/5081517)这是一个链接列表（议程），按字母顺序排列联系人并让用户搜索特定联系人。

然后我尝试用函数制作相同的程序：（发布在下面）[http://pastie.org/5081533](http://pastie.org/5081533)，但到目前为止还没有成功。我是指针新手，不知道我做错了什么。任何帮助是极大的赞赏。

```
#define MAX 20

typedef struct temp 
{
int data;

char name[MAX];
char telephone[10];
char email[MAX];
char address[MAX];
char zipcode[10];

temp *next;
} node;

node* creation1 ( )
{    
  node *start= NULL;
  node *NEW = NULL;

  node  *current = NULL, *aux = NULL, *save = NULL; 

  NEW = (node*)malloc(sizeof(node)); 
  current = start= aux = save = NEW;

 return NEW;
}

node* creation2 ()
 {    
 node *start= NULL;
 node *NEW = creation1();
 start= NEW;

  return start;
}

node* creation3 ( )
{    

node *NEW = creation1();
node *current = NULL;
current=NEW;

   return current;
   }

   node* consult ()
   {

    node *NEW= creation1();

    node *start= creation2();

    node *current = creation3();

int exit;
printf("How many contacts do you want to add in the agenda? ");
scanf("%i",&exit);

for(int i=1; i<=exit; i++)
{

    NEW = (node*)malloc(sizeof(node));
    current->next=NEW;                 
    current = NEW; 
    fflush(stdin);
    puts("NAME: ");
    gets(NEW->name); 
    puts("TELEPHONE: ");
    gets(NEW->telephone);
    puts("EMAIL: "); 
    gets(NEW->email);
    puts("ADDRESS: ");
    gets(NEW->address);
    puts("ZIP CODE: ");
    gets(NEW->zipcode);
    NEW->next=NULL;

} 

  current = start->next;

  return current;

  }

node* order ()
{    

   node *NEW=creation1();
   node *start=creation2 ();
   node *current =NULL;
   current=consult();
   node *aux = NULL;
   node *save =  NULL;
   aux=NEW;
   save=NEW;

int i = 0;
do 
{
    i++;
    current = current->next; /* THIS IS WHERE I'M GETTING AN ERROR MS Visual Studio tells me: "Unhandled exception...Access violation reading location..." */
}
while (current != NULL);

current = start->next;
aux = current->next;

for (int j = 1; j < i; j++)
{

   current = start->next;
    aux = current->next;

    while(current->next != NULL)
    {
        if (strcmp(current->name,aux->name) > 0)
        {
            strcpy(save->name, current->name);
            strcpy(save->telephone, current->telephone);
            strcpy(save->email, current->email);
            strcpy(save->address, current->address);
            strcpy(save->zipcode, current->zipcode);

            strcpy(current->name, aux->name);
            strcpy(current->telephone, aux->telephone);
            strcpy(current->email, aux->email);
            strcpy(current->address, aux->address);
            strcpy(current->zipcode, aux->zipcode);

            strcpy(aux->name, save->name);
            strcpy(aux->telephone, save->telephone);
            strcpy(aux->email, save->email);    
            strcpy(aux->address, save->address);
            strcpy(aux->zipcode, save->zipcode);
        }
         current = current->next;
         aux = current->next;
    }  
}  

  return current;

}

    node* displayorder()
    {  
      node *NEW=creation1();
      node *start=creation2 ();
      node *current = order();

      current = start->next;

    while(current != NULL)
    {

    printf("\n********************");
    printf("\n NAME: %s",current->name);
    printf("\n TELEPHONE: %s", current->telephone);
    printf("\n E-MAIL: %s", current->email);
    printf("\n ADDRESS: %s ", current->address);
    printf("\n ZIP CODE: %s ", current->zipcode);
    current = current->next;
    }
    getch();

  return current;

 }

 node* displaysearch()
{    

node *current = displayorder();
node *start= creation2();

char search[MAX];

printf("\n\nGive a name to search: ");
scanf("%s",search);

current = start->next;
 while(current != NULL)
 {
  if(strcmp(search, current->name)==0)
  {
    printf("\n********************");
    printf("\n NAME: %s",current->name);
    printf("\n TELEPHONE: %s", current->telephone);
    printf("\n E-MAIL: %s", current->email);
    printf("\n ADDRESS: %s ", current->address);
    printf("\n ZIP CODE: %s ", current->zipcode);

}
     current = current->next;
  }

      return current;

getch();

}

int main(int argc, char** argv)
{  

  displaysearch();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:52:11.120

函数中的局部变量`current`从函数中`order()`获取其值`consult()`。该函数反过来返回`start->next`从未初始化为指向任何`node`结构的值。因此，内存访问冲突异常是预期的异常。

# .htaccess - 用于匹配任意 PHP 文件的 RewriteRule

> ID：12966298
> 
> 赞同：1
> 
> 时间：2012-10-19T01:54:31.533
> 
> 标签：.htaccess, mod-rewrite

我对`htaccess`重写规则有点陌生，过去几天我一直在摸索这里发生的事情。谷歌搜索似乎没有帮助，所以希望有人知道答案。

我有一个可以访问的网站：

```
www.site.com
www.site.com/684
www.site.com/684/some-slug-name-here 
```

所有这些场景都应该去`index.php`并传入可选`id=684`和`slug=some-slug-name-here`

哪个工作正常。

我的问题是我有一个单独的文件。现在它被称为`admintagger.php`- 但是当我称之为任何东西时它会失败。`21g12fjhg2349yf234f.php`有同样的问题。

问题是我希望能够`admintagger.php`从`www.site.com/admintagger`

但它似乎符合我的索引规则，而是带我去那里。

这是我的代码：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteRule ^imagetagger$ /imagetagger.php [NC,QSA]
RewriteRule ^([0-9]+)/?(.*)?/?$ index.php?id=$1&slug=$2 [NC,L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:22:55.013

如果您希望能够通过名称（无扩展名）任意访问 php 文件，那么您需要为其创建一个通用规则。但是您需要小心，否则您可能会重写对现有资源（如目录或 slug）的合法请求。试试这个：

```
# make sure we aren't clobbering legit requests:
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# see if appending a ".php" to the end of the request will map to an existing file
RewriteCond %{REQUEST_FILENAME}.php -f
# internally rewrite to include the .php
RewriteRule ^(.*)$ /$1.php [L] 
```

然后您可以在此之后立即路由到 index.php：

```
RewriteRule ^([0-9]+)/?(.*)?/?$ index.php?id=$1&slug=$2 [NC,L,QSA] 
```

尽管您最好为 3 个案例中的每一个创建一个单独的规则：

```
RewriteRule ^([0-9]+)/([^/]+)/?$ /index.php?id=$1&slug=$2 [NC,L,QSA]
RewriteRule ^([0-9]+)/?$ /index.php?id=$1 [NC,L,QSA]
RewriteRule ^$ /index.php [L] 
```

# excel - 读取 XLSX、替换第一行并写入结果的有效方法（使用 apache POI）？

> ID：12966306
> 
> 赞同：1
> 
> 时间：2012-10-19T01:55:16.820
> 
> 标签：excel, apache-poi, xssf

似乎最好的选择是使用 XSSF 和 SAX (Event API)，但文档并不是那么好，我找不到一个简单的例子来满足我的需求：

我需要读取一个 XLSX 文件，读取第一行和第一个单元格，然后替换那里的文本（类似于标题：TODO）并编写最终文件（标题：示例）。

这在内存使用方面必须非常有效。我不介意速度性能，只是内存使用情况。

目前使用 apache poi 3.8

# python - 使用 Python 解码 JSON 并存储嵌套对象

> ID：12966308
> 
> 赞同：2
> 
> 时间：2012-10-19T01:55:23.277
> 
> 标签：python, json

我正在尝试使用 Python 解码以下 JSON 文件：

```
{"node":[
    {
    "id":"12387",
    "ip":"172.20.0.1",
    "hid":"213", 
    "coord":{"dist":"12","lat":"-9.8257","lon":"65.0880"},
    "status":{"speed":"90","direction":"N"},
    "ts":"12387"}
]
} 
```

通过使用：

```
json_data=open('sampleJSON')
jdata = json.load(json_data)
for key, value in jdata.iteritems():
    print "Key:"
    print key
    print "Value:"
    print value 
```

我有作为输出：

```
Key:
node
Value:
[{u'status': {u'direction': u'N', u'speed': u'90'}, u'ip': u'172.20.0.1', u'ts': u'12387', u'coord': {u'lat': u'-9.8257', u'lon': u'65.0880', u'dist': u'12'}, u'hid': u'213', u'id': u'12387'}] 
```

我希望能够打印嵌套对象**状态**、**坐标**的键和值，以及**节点**、“hid”、“id”、“ip”和“ts”的键/值。

我如何在所有嵌套值中进行交互？

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T02:11:00.653

您可以使用递归函数将其全部打印出来。这可以改进，但这里的想法是：

```
import json

json_data = open('data.json')
jdata = json.load(json_data)

def printKeyVals(data, indent=0):
    if isinstance(data, list):
        print
        for item in data:
            printKeyVals(item, indent+1)
    elif isinstance(data, dict):
        print
        for k, v in data.iteritems():
            print "    " * indent, k + ":",
            printKeyVals(v, indent + 1)
    else:
        print data 
```

**输出**

```
 node:

         status:
             direction: N
             speed: 90
         ip: 172.20.0.1
         ts: 12387
         coord:
             lat: -9.8257
             lon: 65.0880
             dist: 12
         hid: 213
         id: 12387 
```

否则，您可以使用：

```
import pprint
pprint.pprint(jdata) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:14:22.427

在不了解您的具体用例的情况下，很难给出一般性答案，但是..

如果你有一个任意嵌套的结构，这是递归的好例子。

简单的示例代码：

```
def print_object(object, indent=0):
    if type(object)==dict:
        for key, value in object.iteritems():
            print " "*4*indent, "Key: ", key
            print " "*4*indent, "Value: "
            print_object(value, indent+1)
    elif type(object)==list:
        for value in object:
            print_object(value,indent+1)
    else:
        print " "*4*indent, object 
```

你真的不想做严格的类型检查，但它适用于快速和肮脏的示例代码。

输出：

```
 Key:  node
 Value: 
         Key:  status
         Value: 
             Key:  direction
             Value: 
                 N
             Key:  speed
             Value: 
                 90
         Key:  ip
         Value: 
             172.20.0.1
         Key:  ts
         Value: 
             12387
         Key:  coord
         Value: 
             Key:  lat
             Value: 
                 -9.8257
             Key:  lon
             Value: 
                 65.0880
             Key:  dist
             Value: 
                 12
         Key:  hid
         Value: 
             213
         Key:  id
         Value: 
             12387 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T02:06:15.897

看起来您的 JSON 的顶级元素是一个包含字典列表的字典。如果你想保持这个结构，试试下面的代码。

```
from pprint import pprint

json_data=open('sampleJSON')
jdata = json.load(json_data)
node = jdata['node'][0]

for key, value in node.iteritems():
    pprint("Key:")
    pprint(key)
    pprint("Value:")
    pprint(value) 
```

# javascript - 如何在Javascript中的if语句中检查变量中的数字和运算符

> ID：12966310
> 
> 赞同：1
> 
> 时间：2012-10-19T01:55:29.853
> 
> 标签：javascript

```
 <html>
<head>
<title> Buttons</title>
<style type="text/css">

.intro{background-color:;}
.duction{background-color:blue;}
.function{background-color:grey;}
.equals{background-color:orange;}
</style>

</head>
<body>
<form name="calculator">
<input type="text"  name="display" length="50" width="100">
<div>
<input type= "button" value="7" class="intro" id="7" onclick="one(7)"></button>
<input type= "button" value="8" class="intro" id="8" onclick="one(8)"></button>
<input type= "button" value="9" class="intro" id="9" onclick="one(9)"></button>
<input type= "button" value="+" class="intro" id="+" onclick="Operate(+)"></button>
<input type= "button" value="-" class="intro" id="-" onclick="Operate(-)"></button>
<div>
<input type= "button" value="4" class="intro" id="4" onclick="one(4)"></button>
<input type= "button" value="5" class="intro" id="5" onclick="one(5)"></button>
<input type= "button" value="6" class="intro" id="6" onclick="one(6)"></button>
<input type= "button" value="x" class="intro" id="x" onclick="Operate(*)"></button>
<input type= "button" value="/" class="intro" id="/" onclick="Operate(/)"></button>
<div>
<input type= "button" value="1" class="intro" id="1" onclick="one(1)"></button>
<input type= "button" value="2" class="intro" id="2" onclick="one(2)"></button>
<input type= "button" value="3" class="intro" id="3" onclick="one(3)"></button>
<input type= "button" value="=" class="intro" id="=" onclick="Evaluate()"></button>
<div>
<input type= "button" value="0" class="intro" id="0" onclick="one(0)"></button>
<input type= "button" value="." class="intro" id="." onclick="one(.)"></button>
<input type= "button" value="c" class="intro" onclick="clearDigit()"></button>

<script type="text/javascript" src="C:\Users\LS\Desktop\QBJS\button.js">

</script>

</body>
</html>

 var timer;
 var object;
 var thing;
 var digit="";
 var result;

 function one(event)
{
  clearTimeout(timer);
   timer=setTimeout(function(){AddDigit(event);},200);

} 
```

我的运算符按钮（+-/x）将运算符传递给“x”，当然我的数字按钮将数字传递给“x”。所以我想弄清楚如何在下面的 if 语句中检查数字和运算符，以便可以将参数传递给 document.calculator.display.value

```
function AddDigit(x)
{
if (x == ????)

 {document.calculator.display.value=x;}
else
   {document.calculator.display.value+=digit + x;}
}

function Evaluate()
{
  result=eval(document.calculator.display.value);
   document.calculator.display.value = result;
} 
```

我还试图找出一种方法，在两个按钮被“突出显示”后交换两个按钮之间的文本，并将 className 更改为“duction”。（这个问题与第一个完全无关

```
document.ondblclick=function(button)
{
  clearTimeout(timer);

  thing=button.target;

if(thing.className=="intro")
  {thing.className="duction";}

else if(thing.className=="duction")
  {thing.className="intro";}    
}

function clearDigit()
{
  document.calculator.display.value="";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:14:16.377

您的某些 id 属性无效。按照惯例，以大写字母开头的函数名称是为构造函数保留的。

要测试参数是否为数字：

```
function addDigit(x) {

  if (/^\d$/.test(x)) {
    // x is a single digit
  }
  ...
} 
```

### 编辑

一些进一步的解释。表达式 in`/ /`是[正则表达式文字](http://ecma-international.org/ecma-262/5.1/#sec-7.8.5)，它创建[正则表达式 (RegExp) 对象](http://ecma-international.org/ecma-262/5.1/#sec-15.10)。对象的方法以及对象本身可以以多种方式使用。

该模式`^\d$`匹配一​​个数字字符串（0 到 9）。该[`test`](http://ecma-international.org/ecma-262/5.1/#sec-15.10.6.3)方法返回`true`或`false`取决于参数是否与模式匹配。所以表达式：

```
/^\d$/.test(x) 
```

创建一个带有模式的正则表达式对象以匹配单个数字，然后使用它来测试提供的参数是否匹配，最后返回布尔值`true`或`false`。

你也可以使用[`String.prototype.match`](http://ecma-international.org/ecma-262/5.1/#sec-15.5.4.10)：

```
x.match(/^\d$/) 
```

但这需要`x`是一个字符串，而`test`如果它还不是一个字符串，则将其转换为字符串。它还返回一个数组（如果找到至少一个匹配项）或`null`（如果未找到匹配项）。所以它需要将类型转换为布尔值，这不像`test`返回一个布尔值那么整洁。

HTH。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:24:46.280

这里有两种方法（我相信还有更多）。

```
function AddDigit(x) {
    //if it parses to an integer or is a literal '.'
    if (typeof parseInt(x, 10) === 'number' || x === '.') {
        //digit or decimal
        document.calculator.display.value = x;
    } else {
        //operator: + - x /
        document.calculator.display.value += digit + x;
    }
}

function AddDigit(x) {
    //use a RegExp
    var operator = /[+-x\/]/;
    if (operator.test(x)) {
        //operator: + - x /
        document.calculator.display.value += digit + x;
    } else {
        //digit or decimal
        document.calculator.display.value = x;
    }
} 
```

# php - 如何获取网站的特定部分或 div

> ID：12966311
> 
> 赞同：0
> 
> 时间：2012-10-19T01:55:43.530
> 
> 标签：php, html, applescript

我想做的：从[http://reddit.com/r/worldnews](http://reddit.com/r/worldnews)的顶部帖子中获取文本标题并将其输出到我的网页上，该网页上只有该文本。

最后，我想从我使用 AppleScript cURL 制作的网页中获取文本并将其输出。

我正在制作一个脚本，当我单击按钮时，它会告诉我最上面的帖子。

*编辑*如果您能想到任何方式，我想做同样的事情，但对于 Facebook 通知。

*编辑*我让 PHP 抓取该站点并在此处输出：http: [//colejohnsoncreative.com/personal/ai/worldnews.php](http://colejohnsoncreative.com/personal/ai/worldnews.php)这是我正在使用的代码：

```
 <?php
// Get a file into an array.  In this example we'll go through HTTP to get
// the HTML source of a URL.
$lines = file('http://www.reddit.com/r/worldnews');

// Loop through our array, show HTML source as HTML source; and line numbers too.
foreach ($lines as $line_num => $line) {
    echo "Line #<b>{$line_num}</b> : " . htmlspecialchars($line) . "<br />\n";
}

// Another example, let's get a web page into a string.  See also file_get_contents().
$html = implode('', file('http://www.example.com/'));

// Using the optional flags parameter since PHP 5
$trimmed = file('somefile.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
?> 
```

所以我得到了网站的所有代码输出，但我需要的项目是

```
<a class="title " href="http://www.dailymail.co.uk/news/article-2219477/Cannabis-factory-couple-gave-400-000-drug-dealing-fortune-poor-Kenyans-jailed-years.html" >British couple who spent most of the money they made from canabis growing on paying for life changing operations and schooling for people in a poor Kenyan village gets sent to prison for 3 years.</a> 
```

以及我需要扔掉的所有其他东西，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:15:33.963

你必须做一些解析。所以匹配你想要的模式。最简单的方法是执行 str_pos 之类的操作来获取元素的位置，或者使用正则表达式。他们有 RSS 提要吗？如果是这样，您应该使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:06:16.800

如果你在 shell 中，你可以**wget**页面

从 php 你可以**file_get_contents**页面

从 java 你可以用**URLConnection得到它**

一旦你有了它，使用你想要的任何语言在页面的文本中查看你想要的东西，然后用它做任何你喜欢的事情

# pdf - 在 Alfresco 中运行转换脚本

> ID：12966315
> 
> 赞同：1
> 
> 时间：2012-10-19T01:56:30.660
> 
> 标签：pdf, ocr, alfresco, tesseract, alfresco-share

为什么我的转换脚本没有在第一个文件之外的任何上传文件上运行？

我在 Alfresco 中设置了一个监听文件夹的转换规则。当一个新文件被放入文件夹时，该规则会触发一个脚本运行，该脚本获取一个没有文本层的 PDF，将其分解为 jpeg，对 jpeg 进行 OCR，然后将 jpeg 转换为 PDF 并合并 PDF，返回一个 OCRed PDF然后使用文本层将结果复制到另一个文件夹中，这样我们就知道它已经完成了。

在命令行运行脚本有效。我第一次将文件放入 Alfresco 文件夹（上传）时，它会运行脚本并复制文件。但是任何后续我将文件放入文件夹时，脚本都不会运行，但文件仍会复制到目标文件夹。所以我知道正在调用规则，但脚本似乎没有在以下文件上运行。我已经登录了脚本，所以我知道脚本甚至没有被调用。该规则将应用于文件夹中所有新的和修改的文件，没有过滤器。然后它使用我们的自定义 OCR 脚本运行转换和复制命令，并将目标文件夹定义为父文件夹。

下面是我的露天改造扩展：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans> 
  <bean id="transformer.worker.PdfOCRTool" class="org.alfresco.repo.content.transform.RuntimeExecutableContentTransformerWorker">
    <property name="mimetypeService">
      <ref bean="mimetypeService"/>
    </property>
    <property name="transformCommand">
      <bean name="transformer.pdftoocr.Command" class="org.alfresco.util.exec.RuntimeExec">
        <property name="commandMap">
     <map>
          <entry key=".*">
                <value>/opt/ocr/ocr.sh ${source} ${target}</value>
            </entry>
          </map>
        </property>
        <property name="errorCodes">
          <value>1,2</value>
        </property>
      </bean>
    </property>
    <property name="explicitTransformations">
      <list>
        <bean class="org.alfresco.repo.content.transform.ExplictTransformationDetails">
          <property name="sourceMimetype">
            <value>application/pdf</value>
          </property>
          <property name="targetMimetype">
            <value>application/pdf</value>
          </property>
        </bean>
      </list>
    </property>
  </bean>

  <bean id="transformer.proxy.PdfOCRTool" class="org.alfresco.repo.management.subsystems.SubsystemProxyFactory">
    <property name="sourceApplicationContextFactory">
      <ref bean="thirdparty"/>
    </property>
    <property name="sourceBeanName">
      <value>transformer.worker.PdfOCRTool</value>
    </property>
    <property name="interfaces">
      <list>
        <value>org.alfresco.repo.content.transform.ContentTransformerWorker</value>
      </list>
    </property>
  </bean>
  <bean id="transformer.PdfOCRTool" class="org.alfresco.repo.content.transform.ProxyContentTransformer" parent="baseContentTransformer">
    <property name="worker">
      <ref bean="transformer.proxy.PdfOCRTool"/>
    </property>
  </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:27:35.303

转换服务旨在将项目从一种 mimetype 转换为另一种。我不确定从 PDF 转换为第二个 PDF 是否有效。您最好实现自定义 Java 存储库操作，然后再使用`org.alfresco.util.exec.RuntimeExec`bean 来触发命令。

由于您的 Spring 配置已经定义了一个`RuntimeExec`bean，您可以重新使用此定义，但将其包装在您自己的自定义类中 extends `org.alfresco.repo.action.executer.ActionExecuterAbstractBase`。实际上，如果您查看`org.alfresco.repo.action.executer.TransformActionExecuter`then 的来源，可能会为您提供一些关于如何实施事物的线索。

# css - 如何根据父类选择不是特定父类的子元素？

> ID：12966317
> 
> 赞同：0
> 
> 时间：2012-10-19T01:56:45.650
> 
> 标签：css, css-selectors

例如，我想选择两个 div，其内容的数据角色不是“modal”类的 data-role="page" div 的子项。我并不精通高级 CSS 选择器。

```
<div>
    <div data-role="page">
        <div data-role="content"></div>
    </div>
    <div data-role="page" class="modal">
        <div data-role="content"></div>
    </div>
    <div data-role="page">
        <div data-role="content"></div>
    </div>
</div> 
```

我已经尝试了一些东西，但我无法得到任何工作......例如

```
[data-role="content"]:not([data-role="page"].modal > :after) 
```

或者

```
[data-role="content"]:not([data-role="page"].modal > [data-role="content"]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:03:56.740

```
[data-role="page"]:not(.modal) > [data-role="content"] 
```

这将获取所有`data-role`is`page` **和**who 不**具有**类的元素`modal`，然后获取它们的所有直接子`data-role`元素`content`。

现场演示[在这里](http://jsfiddle.net/txFg7/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:01:03.473

好吧，你可以这样做：

```
:not([data-role=page])>[data-role=content] {...} 
```

但是为了更好的兼容性，您可能想看看是否可以这样做：

```
[data-role=content] {/* define some styles */}
[data-role=page]>[data-role=content] {/* cancel out the previously-defined styles */} 
```

# codeblocks - 使用 wxSmith 添加 wxStaticText 时出错

> ID：12966320
> 
> 赞同：2
> 
> 时间：2012-10-19T01:57:04.160
> 
> 标签：codeblocks, wxwidgets

我真的是 c++ 开发新手（2 天），到目前为止一切都很好，但是当我通过 wxSmith 添加 wxStaticText 时，自动生成的代码将无法编译：

错误：未在此范围内声明“StaticText1”

```
StaticText1 = new wxStaticText(this, ID_STATICTEXT1, _("Label"), wxPoint(8,8), wxDefaultSize, 0, _T("ID_STATICTEXT1")); 
```

错误：未在此范围内声明“ID_STATICTEXT1”

```
const long dlgAbout::ID_STATICTEXT1 = wxNewId(); 
```

我在对话框上也有一个 wxButton，但做的事情完全相同，编译器没有自动生成的按钮代码的这些错误：

```
btnClose = new wxButton(this, ID_BUTTON1, _("Close"), wxPoint(88,96), wxDefaultSize, 0, wxDefaultValidator, _T("ID_BUTTON1")); 
```

和

```
const long dlgAbout::ID_BUTTON1 = wxNewId(); 
```

完整来源[http://pastebin.com/iyFF31eJ](http://pastebin.com/iyFF31eJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:20:39.480

由于您粘贴的代码是为我编译的，这一定意味着您粘贴的代码不是您的编译器正在尝试编译并且失败的代码。我认为您需要检查您可能有几个版本的 dlgAbout.h 文件浮动并且编译器使用了错误的版本，没有 ID_STATICTEXT1 的定义

# vhdl - 如何消除我的 vhdl Adder 的 inout 信号？

> ID：12966326
> 
> 赞同：2
> 
> 时间：2012-10-19T01:57:54.223
> 
> 标签：vhdl

我编写了以下 VHDL 代码，它是快速加法器的组件。快速加法器由一个连接到加法器的 8by8 寄存器组成，加法器的代码如下。我怎样才能消除使用 inout Read_Adress。我希望 Read_Adress 出 std_logic_vector 而不是 inout？

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;
use ieee.std_logic_unsigned.all;

Entity Adder is
port(
        Clock_50_MHZ :in std_logic;
        En :in std_logic;
        Data_Registerfile : in std_logic_vector(7 downto 0);
        Read_Address: inout std_logic_vector(2 downto 0) := "000";
            Output : out std_logic_vector(11 downto 0)
 );
 end Adder;

 Architecture arch of Adder is
 Signal result : unsigned (11 downto 0):="000000000000";
 Signal regData: std_logic_vector(7 downto 0);

 Begin
 regData <= Data_Registerfile;
 Process(Clock_50_MHZ)
Begin
if rising_edge(Clock_50_MHZ)  then
    if (En = '1') then
        if(Read_Address = "000") then
            result <= "000000000000" + unsigned(regData);
            Read_Address <= Read_Address + 1;
        elsif(Read_Address = "111") then
            Output <= std_logic_vector( result + unsigned(regData) );
            Read_Address <= "000";
        else
            result <= result + unsigned(regData);
            Read_Address <= Read_Address + 1;
        end if;
    end if;
end if;
 End Process;
end arch; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T02:05:37.833

这是 VHDL 中一个典型的不便之处：您不能将`out`端口用作信号（如果您习惯了 Verilog，您经常会发现自己想要这样做）。

我知道的最好方法是创建一个额外的虚拟信号：

```
signal Read_Address_tmp : std_logic_vector(2 downto 0) := "000"; 
```

用它做计算：

```
 Process(Clock_50_MHZ)
 Begin
 if rising_edge(Clock_50_MHZ)  then
     if (En = '1') then
         if(Read_Address_tmp = "000") then
             result <= "000000000000" + unsigned(regData);
             Read_Address_tmp <= Read_Address_tmp + 1;
         elsif(Read_Address_tmp = "111") then
             Output <= std_logic_vector( result + unsigned(regData) );
             Read_Address_tmp <= "000";
         else
             result <= result + unsigned(regData);
             Read_Address_tmp <= Read_Address_tmp + 1;
         end if;
     end if;
 end if;
  End Process; 
```

然后将其链接到您的输出：

```
Read_Address <= Read_Address_tmp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:13:56.950

从历史上看，欧文的回答是通常的方式。

The "new" VHDL 2008 allows reading of out-mode ports now. If your tools don't support it, log a bug with the vendor. See the bottom of this page from "VHDL 2008 - just the new stuff"

[http://books.google.co.uk/books?id=ETxLguPMEY0C&pg=PA163&lpg=PA163#v=onepage&q&f=false](http://books.google.co.uk/books?id=ETxLguPMEY0C&pg=PA163&lpg=PA163#v=onepage&q&f=false)

# c++ - c++如何在cmd上显示运行时间？？作为一个运行时钟需要改变系统（“清除”）？

> ID：12966327
> 
> 赞同：1
> 
> 时间：2012-10-19T01:57:57.053
> 
> 标签：c++, time

这将只显示调用函数那一刻的静态时间......你如何显示运行时间？即：当时间从 12:00 变为 12:01 时，它会自动显示在屏幕上我基本上想在我的 cmd 屏幕顶部输出一个运行时钟并在其下方显示其他选项等

```
//http://stackoverflow.com/questions/997946/c-get-current-time-and-date
// Get current date/time, format is YYYY-MM-DD.HH:mm:ss
const string currentDateTime() {
    time_t     now = time(0);
    struct tm  tstruct;
    char       buf[80];
    tstruct = *localtime(&now);
    // Visit http://www.cplusplus.com/reference/clibrary/ctime/strftime/
    // for more information about date/time format
    strftime(buf, sizeof(buf), "%Y-%m-%d.%X", &tstruct);

    return buf;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:10:07.730

深呼吸，因为这并不容易。

您必须*从根本*上设计您的应用程序以多路复用几个不同的同时“事件”，例如键盘活动和计时器。

您还必须使用不同于从标准输入读取和写入标准输出的输入/输出方法。您将需要适当的*终端*或图形界面。

现在，一旦您了解了这两个想法，您就需要设计您的应用程序。基本成分是*事件循环*。这是一个无限循环，基本上每次至少有一个事件可用时执行一轮。根据事件，您可以采取措施：如果计时器触发，则更新时间显示。如果键盘触发，则处理输入。

无论您的程序执行什么逻辑，都必须在某个地方适应。例如，如果用户输入拼写出您识别的命令，您可能会启动一些操作作为响应。或者，您可能会在定时器每触发 1000 次时周期性地发生一些动作。一个函数的结果可能会触发一个事件，该事件本身可能会被事件循环捕获。只要您的程序逻辑执行得足够快以允许及时处理计时器，这将是完全可以接受的。只有当您的程序有太多工作时，您才能开始考虑让多个线程同时运行事件循环（但这要困难得多）。

在 Linux 上，这种设计的标准实现是 epoll，用于多路复用和文件文件描述符、timerfds、eventfds 和 signalfds，以及终端控制 ncurses。其他平台也有相应的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:05:37.800

首先，您应该查看 Windows[控制台功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)。

更具体地说[`SetCursorPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648394%28v=vs.85%29.aspx)，和[`WriteConsole`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687401%28v=vs.85%29.aspx)。

# excel - 与列比较，识别第三列中的重复项

> ID：12966330
> 
> 赞同：1
> 
> 时间：2012-10-19T01:58:23.693
> 
> 标签：excel

Excel 2003 / Windows XP

我有两列电子邮件地址，A 有 13,000 个条目，B 有 6000 个条目。我需要将 B 与 A 进行比较，并识别 B 中未在 A 中找到的电子邮件。这样我最终会以某种方式得到来自 B 的所有电子邮件的列表。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:31:04.220

这是单机吗？

如果是这样，手动过程是

1.  添加一个公式`C2`（`=MATCH(B2,A:A,0)`假设您有一个标题行）
2.  将自动筛选应用于整个范围`A:C`
3.  过滤列`C`，`#N/A`因此只有`#N/A`值显示在列中`C`
4.  选择列中的值`B`，然后复制/粘贴到另一个范围

这些复制的值是您的缺失地址列表

# regex - 如何跳过正则表达式中的引用文本（或如何将 HyperStr ParseWord 与 Unicode 文本一起使用？）

> ID：12966334
> 
> 赞同：5
> 
> 时间：2012-10-19T01:58:48.887
> 
> 标签：regex, delphi

我需要正则表达式帮助来创建一个 delphi 函数来替换 Rad Studio XE2 中的 HyperString ParseWord 函数。HyperString 是一个非常有用的字符串库，它从未跳转到 Unicode。我已经让它大部分工作了，但它根本不尊重引号分隔符。我需要它与下面描述的函数完全匹配：

> 函数 ParseWord(const Source,Table:String;var Index:Integer):String;
> 
> 使用单字符分隔符表从左到右进行顺序标记解析。带引号的字符串中的分隔符将被忽略。表中不允许使用引号分隔符。
> 
> 索引是一个指针（初始化为第一个单词的“1”），由函数更新以指向下一个单词。要检索下一个单词，只需使用先前返回的索引值再次调用该函数。
> 
> 注意：如果 Length(Resultant) = 0，则没有可用的附加字。 **带引号的字符串中的分隔符将被忽略**。（我的重点）

这是我到目前为止所拥有的：

```
function ParseWord( const Source, Table: String; var Index: Integer):string;
var
  RE : TRegEx;
  match : TMatch;
  Table2,
  chars : string;
begin
  if index = length(Source) then
  begin
    result:= '';
    exit;
  end;

  // escape the special characters and wrap in a Group
  Table2 :='['+TRegEx.Escape(Table, false)+']';
  RE := TRegEx.create(Table2);
  match := RE.Match(Source,Index);
  if match.success then
  begin
    result := copy( Source, Index, match.Index - Index);
    Index := match.Index+match.Length;
  end
  else
  begin
    result := copy(Source, Index, length(Source)-Index+1);
    Index := length(Source);
  end;
end;

  while ( Length(result)= 0) and (Index<length(Source)) do
  begin
    Inc(Index);
    result := ParseWord(Source,Table, Index);
  end; 
```

欢呼和感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:26:39.513

我会尝试这个正则表达式`Table2`：

```
Table2 := '''[^'']+''|"[^"]+"|[^' + TRegEx.Escape(Table, false) + ']+'; 
```

**演示：**
这个演示更像是一个 POC，因为我找不到在线的 delphi 正则表达式测试器。

*   分隔符是`space`(ASCII code `32`) 和`pipe`(ASCII code `124`) 字符。
*   测试语句是：

    > toto titi "alloa toutou" 'dfg erre' 1245|coucou "nestor|delphi" "" ''

[http://regexr.com?32i81](http://regexr.com?32i81)

**讨论：**
我假设带引号的字符串是由两个单引号 ( `'`) 或两个双引号 ( `"`) 括起来的字符串。如果我错了，请纠正我。

正则表达式将匹配：

*   单引号字符串
*   双引号字符串
*   不是由任何传递的分隔符组成的字符串

**已知错误：**
由于我不知道 ParseWord 如何处理字符串内的引号转义，因此正则表达式不支持此功能。

例如 ：

*   如何解释这个`'foo''bar'`？=> 两个令牌：`'foo'`和`'bar'`OR 一个令牌`'foo''bar'`。

*   这个案子呢：`"foo""bar"`？=> 两个令牌：`"foo"`和`"bar"`OR 一个令牌`"foo""bar"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:22:57.617

在我的原始代码中，我一直在寻找分隔符并将所有内容作为我的下一个匹配项，但是在寻找引号内的内容时，这个概念并没有延续。@Stephan 否定搜索的建议最终使我找到了可行的方法。我之前从未提到的另一个复杂情况是 HyperStr 可以使用任何东西作为引用字符。默认值为双引号，但您可以通过函数调用更改它。

在我的解决方案中，我已将 QuoteChar 明确硬编码为双引号，这适合我自己的目的，但将 Q​​uoteChar 设为全局并将其设置在另一个函数中将是微不足道的。我还用单引号（ascii 39）成功地测试了它，这在 Delphi 中是一个棘手的问题。

```
function ParseWord( const Source, Table: String; var Index: Integer):string;
var
  RE : TRegEx;
  match : TMatch;
  Table2: string;
  Source2 : string;
  QuoteChar : string;
begin
  if index = length(Source) then
  begin
    result:= '';
    exit;
  end;

  // escape the special characters and wrap in a Group
  QuoteChar := #39;
  Table2 :='[^'+TRegEx.Escape(Table, false)+QuoteChar+']*|'+QuoteChar+'.*?'+QuoteChar ;
  Source2 := copy(Source, Index, length(Source)-index+1);
  match := TRegEx.Match(Source2,Table2);
  if match.success then
  begin
    result := copy( Source2, match.index, match.length);
    Index := Index + match.Index + match.Length-1;
  end
  else
  begin
    result := copy(Source, Index, length(Source)-Index+1);
    Index := length(Source);
  end;
  while ( Length(result)= 0) and (Index<length(Source)) do
  begin
    Inc(Index);
    result := ParseWord(Source,Table, Index);
  end;

end; 
```

该解决方案不会从带引号的字符串中去除引号字符，但我无法从我自己现有的代码中判断它是否应该，并且我无法使用 Hyperstr 进行测试。也许别人知道？

# linux - 如何访问内容在内存而不是磁盘的文件？

> ID：12966335
> 
> 赞同：0
> 
> 时间：2012-10-19T01:58:51.193
> 
> 标签：linux, memory, command

假设有一个命令行，例如：

```
interpreter afile bfile opt1 opt2 ... 
```

`afile` `bfile`两个磁盘文件在哪里，其他是选项。

但在我的情况下`afil`， e 和`bfile`content 在内存中，由于某些原因，我无法将它们写入磁盘。

在这种情况下如何执行cmd？

顺便说一句，在 Linux 上。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:27:50.790

如果您真的喜欢这些所谓的“文件”作为文件对其他第三方程序可见，那么您有两种选择：

*   开发一个程序，为了这个答案，我们称它为*getfile ，它可以在其标准输出中提供这些文件的内容，那么你可以这样使用它：*

    ```
    interpreter <(getfile afile) <(getfile bfile) opt1 opt2 ... 
    ```

*   实现一个[FUSE](http://fuse.sourceforge.net/)（用户空间中的文件系统）文件系统，它将这些“文件”作为可挂载文件系统中的常规文件公开。在这种情况下，您只需挂载此文件系统并将文件作为常规文件访问：

    ```
    interpreter /path/to/mount/point/afile /path/to/mount/point/bfile opt1 opt2 ... 
    ```

# php - 通过带有 JSON 的表单更新数据库

> ID：12966336
> 
> 赞同：1
> 
> 时间：2012-10-19T01:58:54.133
> 
> 标签：php, jquery, json, forms

继续我之前的帖子..[在 PHP 中从列表中输入 .val()](https://stackoverflow.com/questions/12962484/inputting-val-from-list-in-php)这部分代码现在可以工作了，现在我需要能够更新和修改弹出的文本。

查询未收到任何内容。

HTML & JS：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {

// Sends information into form - Works 
$("#productList").change(function() {

    var action = $("#productForm").attr('action');
    var form_data = {
        id: $('#productList').val(),
        name: $("#name").val(),
        price: $("#price").val(),
        img: $("#img").val(),
        description: $("#description").val()
    };      
var id="something";
    $.getJSON("getProduct.php",form_data,function(data){
        switch(data.retval){
            case 0: $("#name").value(data.data.prodName);
            break;
            default: $("#description").html("Database error, please select something else.");
            break;
        }
        });
    });
// End form information

$("#productForm").submit(function() {
    var action = $("#productForm").attr('action');
    var form_data = {
        id: $('#productList').val(),
        name: $("#name").val(),
        price: $("#price").val(),
        img: $("#img").val(),
        description: $("#description").val()
    };      
var id="something";
    $.getJSON("modify.php",form_data,function(data){
        switch(data.retval){
            case 0: $("#status").html("Update successful!");
            break;
            case 1: $("#status").html("Unable to update!");
            break;
            default: $("#description").html("Database error, please try again.");
            break;
        }
        });
    });
});
</script>  
</head><body>

<div id="status"></div>
<div id="listDIV">
<select id="productList" name="productList" size="8">
    <option value="123" class="prodID">Terminator Series</option>
    <option value="124" class="prodID">2001 A Space Odyssey</option>
    <option value="125" class="prodID">Serenity</option>
    <option value="126" class="prodID">Alien Quadrilogy</option>
    <option value="127" class="prodID">12 Monkeys</option>
    <option value="128" class="prodID">Final Fantasy</option>
</select>
</div><div id="formDIV">
<form id="productForm" action="getProduct.php" method="post">
    <input type="text" id="name" placeholder="Name" /><br />
    <input type="text" id="price" placeholder="Price" /><br />
    <input type="text" id="img" placeholder="Image" /><br />
    <textarea id="description" placeholder="Description"></textarea><br />
<input type="submit" id="save" value="Save" />
</form>
</div>
</body></html> 
```

PHP（修改.php）：

```
<?php
ob_start();
session_start();
mysql_connect('localhost', 'root', 'root') or 
    die('Could not connect: ' . mysql_error());
mysql_select_db('productDB') or
    die ('Can\'t use database: ' . mysql_error());

// retval: 0 - login ok, 1 - login failed, 2 - internal error
$json = array("retval" => 2, "data" => NULL, "debug" => "");

 $id=json_decode($_REQUEST['id']);
 $prodName=mysql_real_escape_string($_REQUEST['name']);
 $prodPrice=mysql_real_escape_string($_REQUEST['price']);
 $prodImg=mysql_real_escape_string($_REQUEST['img']);
 $prodDesc=mysql_real_escape_string($_REQUEST['description']);

$sql = "UPDATE productTB SET prodName=".$prodName.", prodPrice=".$prodPrice.", prodDesc=".$prodDesc.", prodImg=".$prodImg." WHERE prodID=".$id.";";

$json['debug'] .= "SQL query was: ".$sql."\n";
$result=mysql_query($sql);
if (!$result) {
    $json['debug'] .= "SQL query failed\n";
    $json['debug'] .= "Other output: ". ob_get_contents();
    ob_end_clean();
die(json_encode($json));
}
$count=mysql_num_rows($result);

if($count==1){
    $json['retval'] = 0;
    $json['data'] = mysql_fetch_assoc($result);
} else {
    $json['retval'] = 1;
}
$json['debug'] .= "Other output: ". ob_get_contents();
ob_end_clean();
echo json_encode($json); 
```

我的数据库的表结构：

```
--
-- Table structure for table `productTB`
--

CREATE TABLE `productTB` (
`prodID` int(11) NOT NULL,
`prodName` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
`prodPrice` decimal(10,2) NOT NULL,
`prodDesc` longtext COLLATE utf8_unicode_ci NOT NULL,
`prodImg` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
PRIMARY KEY (`prodID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:12:00.827

您需要防止表单提交操作的默认值。因为您的表单元素都没有`name`属性。它在没有任何参数的情况下发布。这就是您的 SQL 语句没有收到任何内容的原因。

你需要

```
$("#productForm").submit(function(e) {
      e.preventDefault();
      // your code goes here
} 
```

# javascript - Facebook 的问题，例如按钮、XFBML、动态 URL？

> ID：12966337
> 
> 赞同：1
> 
> 时间：2012-10-19T01:59:03.537
> 
> 标签：javascript, jquery, html, facebook, facebook-like

所以我一直无法让我的 facebook like 按钮正常工作。我试图将它们放在许多页面上，而不必每次都在片段的“href”字段中输入网址。我尝试使用 js 动态更改 href 参数，但是当我单击“喜欢”按钮时，它不会通过 - 也就是不会发布到我的 Facebook。这是代码：

```
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '456678891040542', // App ID from the App Dashboard
      channelUrl : '//WWW.UNICONUTRITION.COM/channel.html', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here

  };

  // Load the SDK's source Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

  <li class="sloo"><fb:like id="fb" href="www.asdf.com" layout="box_count"></fb:like>

  </li>

  <script type="text/javascript">
var sUrl = window.location;
document.getElementById('fb').setAttribute('href', sUrl);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:00:54.830

只需删除该`href`属性，SDK 就会自动使用当前页面的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:03:27.827

您需要`FB.XFBML.parse();`在 URL 更新后致电。

请参阅此处的文档：[https ://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

在这里找到答案：[将 facebook like 按钮与动态加载的内容集成](https://stackoverflow.com/questions/5441134/integrate-facebook-like-button-with-dynamically-loaded-content)

如果您只想使用当前 URL，请不要将 URL 设置为任何内容，它应该默认为地址栏中的任何内容。

# spring - 我做错了什么？

> ID：12966339
> 
> 赞同：0
> 
> 时间：2012-10-19T01:59:10.063
> 
> 标签：spring, mockito

我正在尝试为我的控制器创建一个测试。这是我有类似的东西。只是名称更改。我正在使用 Mockito 和 Spring MVC。测试配置文件中的自动装配 bean 通过模拟工厂模拟。我得到一个空指针...

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={
        ...
 })
public class MyReportControllerTest {

private MockHttpServletRequest request;
private MockHttpServletResponse response;
private MockHttpSession session;
private HandlerAdapter handlerAdapter;

@Autowired
private ApplicationContext applicationContext;

@Autowired
private MyService myService;

@Autowired
private RequestMappingHandlerMapping rmhm;

@Before
public void setUp() throws Exception {
    request = new MockHttpServletRequest();
    response = new MockHttpServletResponse();
    session = new MockHttpSession();
    handlerAdapter = applicationContext
            .getBean(RequestMappingHandlerAdapter.class);

    request.setSession(session);
    request.addHeader("authToken", "aa");

    Mockito.when(
            myService.getMyInfo(YEAR))
            .thenReturn(getMyInfoList());
}
@Test
public void testGetMyInfo(){
    request.setRequestURI("/getMyInfo/" + 2011);
    request.setMethod("GET");

    try {
        if( handlerAdapter == null){
            System.out.println("Handler Adapter is null!");
        }
        if( request == null){
            System.out.println("Request is null!");
        }
        if( response == null){
            System.out.println("Response is null!");
        }
        if( rmhm.getHandler(request) == null){
            System.out.println("rmhm.getHandler(request) is null!");
        }
        //the above returns null
        System.out.println("RMHM: " + rmhm.toString());
        System.out.println("RMHM Default Handler: " + rmhm.getDefaultHandler());
        handlerAdapter.handle(request, response, 
                rmhm.getHandler(request)
                .getHandler());//null pointer exception here <---

        ...

    } catch (Exception e) {
        e.printStackTrace();
        fail("getMyReport failed. Exception");
    }

}

public List<MyInfo> getMyInfoList(){...} 
```

我进行了彻底的调试，发现 Handler 对于我的模拟请求仍然为空。我错过了什么，它没有变成处理程序，甚至没有转到默认处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:19:08.427

你这里有很多问题。

首先，您是在尝试对Controller进行*单元测试，还是对其进行**集成*测试？它看起来更像是一个集成测试。你有 Spring`@Autowired`注释和一个`@ContextConfiguration`.

但如果是这样的话，你为什么要尝试在 上定义模拟行为`myService`？这永远不会奏效——Spring 将注入一个“真实”的实例，而 Mockito 没有希望在这方面发挥它的魔力。

有关的; 如果您希望它工作，您将缺少任何类型的模拟初始化调用。

最后，从测试名称来看，您为什么要进行所有这些连接（HandlerMappings、HandlerAdapters 等），您真正想做的只是测试您的`MyReportController`? 您不能根据需要简单地使用模拟请求、响应等调用必要的“端点”方法吗？

# javascript - setTimeout 和 setInterval 不同

> ID：12966344
> 
> 赞同：0
> 
> 时间：2012-10-19T02:00:16.023
> 
> 标签：javascript

setTimeout 和 setInterval 有什么区别，比如在 UI 进程中长时间运行函数的时候？

```
 setTimeout(function(){
    /* Some long block of code... */
  }, 10);

  setInterval(function(){
    /* Some long block of code... */
  }, 10); 
```

**如果执行时间较长，则执行时间大于 setTimeout 或 setInterval 设置时间**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T02:01:11.263

setTimeout 运行一次，当您使用

1.  只想跑一次
2.  或每次调用的运行时间是可变的，您需要按顺序进行调用

setInterval 永远运行，直到您调用 clearInterval 取消。

因此，对于长时间运行的过程，最好使用 setTimeout 然后让您的 setTimeout 处理程序再次调用 setTimeout 以保持循环运行。

*编辑* setInterval 的问题是，如果运行时间超过 10 毫秒（在您的情况下），则可以放弃下一个呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:03:41.880

要回答您的另一个问题，除了已经提到的问题之外没有区别，两者都具有相同的优先级。

# mysql - 如果我自然地加入这两个表，为什么结果会是这样？（基本上，请解释一下。）

> ID：12966350
> 
> 赞同：3
> 
> 时间：2012-10-19T02:02:14.003
> 
> 标签：mysql, sql

```
A B   C D
1 3   3 3
3 3 
```

结果显然是，自然加入后

```
A B C D
1 3 3 3
3 3 3 3 
```

为什么是这样？我认为自然连接需要在这两种情况下具有相似的属性？第一个表中甚至没有 C 或 D 属性，那么它们如何加入？

例如，我们的教授说这两个连接是因为对于第一个结果行，C 是相同的，第二个是相同的。

```
A B C    C D
1 2 3    3 1
4 5 6    6 2
7 8 9 
```

还是他们只是正常合并？如果那里的第二个表中有 6 2 之后的 2 1，合并将如何出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:07:10.677

交叉连接不需要任何类型的匹配条件 - 集合 A 中的*每一*行都与集合 B 中的每一行匹配。

其他类型的连接（`INNER`, `OUTER`, `LEFT`, `RIGHT`）都在一个条件下匹配，因此通常更受限制（即“仅将集合 A 的一行与集合 B 的行连接`iff`（当且仅当）`C`集合 A 的列中的值与`C`Set B") 中的列中的值匹配。

但是，您*可以*`CROSS`通过简单地使条件*始终*为真来使此类连接有效地连接：

```
SELECT *
FROM SetA
LEFT INNER JOIN SetB
    ON 1 = 1  -- Voila, instant cross join 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:07:26.797

在您的第一个示例中，没有要加入的公共字段，因此它只是返回两个表的所有可能组合。

由于您的第二组有一个公共字段，因此结果集将被过滤为：

```
A B C D
1 2 3 1
4 5 6 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T02:12:36.140

如果存在类似的列名，它将合并它们。但是自然连接总是会为每个唯一的列名创建一个列。

关于连接的好信息/示例在这里。 [http://www.w3resource.com/sql/joins/](http://www.w3resource.com/sql/joins/)

# c# - 有没有办法在上传文件时继续使用网站？

> ID：12966353
> 
> 赞同：4
> 
> 时间：2012-10-19T02:02:35.927
> 
> 标签：c#, asp.net, ajax, file-upload

**背景：**

我正在为我的 CS 部门做一个本科生研究项目。该项目是生物系的一个网站，一个关键功能是生物学生能够上传他们自己的`.xml`文件，然后使用 Matlab 在服务器端为他们构建一个*模型。

前端位于 ASP.NET、javascript 和 C# 环境中。我与这个项目的一点关联是我对这些系统、工具和语言的所有了解。

**问题：**

`.xml`我之前提到的文件可能需要几个小时才能上传和构建。我的教授希望用户能够使用已经完成的模型继续页面，同时将新模型发送到后台，并且用户在完成时会收到一封电子邮件。我找到了发送电子邮件的材料，但没有找到继续页面的材料。

我听说了一些关于使用 AJAX 加载页面的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:36:32.633

在您的页面上放置文件上传控件

```
<asp:FileUpload ID="FileUpload1" runat="server"/> 
```

构建一个 http 处理程序来处理文件上传：

```
public class Handler : IHttpHandler {

    public void ProcessRequest (HttpContext context) {
        HttpPostedFile fileToUpload = context.Request.Files["Filedata"];
        string pathToSave = HttpContext.Current.Server.MapPath("~/Files/")
                            + fileToUpload.FileName;
        fileToUpload.SaveAs(pathToSave);

        //Process file
    }

    public bool IsReusable {
        get {
            return false;
        }
    }
} 
```

看看是否可以将[uploadify](http://www.uploadify.com/demos/)之类的上传插件集成到项目中（需要jQuery）。

```
<script type = "text/javascript">
$(document).ready(function()
{
     $("#<%=FileUpload1.ClientID %>").uploadify(
     {
       'swf': 'Scripts/uploadify.swf',
       'uploader': 'Handler.ashx',
       'auto': true,
      'buttonText': 'Select File(s)'
     });
});
</script> 
```

如果你不能做到这一点，你需要了解 ajax 是如何工作的

Ajax 通常使用 XMLHttpRequest，它不允许您对本地文件进行编码并将其发送到服务器。
您可以使用 Flash swf 来处理同一页面上的上传，或者使用具有不可见 1x1 iframe 目标的表单。

我在这个博客上找到了关于[在 asp.net 中上传文件的代码](http://csharpdotnetfreak.blogspot.com/2012/07/asynchronous-file-upload-jquery-uploadify-aspnet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:05:24.707

我认为打开一个小的 i-frame，它实际上会进行上传，会让你当前的页面继续工作。

因此，在您当前的页面上，您要求提供文件位置和文件名等所有信息，然后在 i-frame 中打开一个新页面。让 i-frame 知道源文件/文件夹、目标文件/文件夹，并让它在后台工作。因此，现在您的当前页面可以自由地继续其工作。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:27:24.980

使用无头 Java 上传小程序。在 iFrame 中加载文件传输小程序，让用户启动文件传输，当用户想要浏览网站的其余部分时，不要重新加载包含 Java Applet 的 iFrame（它将上传文件）。传输完成后，执行 JAvaScript 调用以关闭 iframe。

以下示例使用 FileCatalyst 的 Java Applet，但该想法实际上适用于任何其他 Java FTP Applet 或 ActiveX

```
<script>
    var browsePath = "";

    function browseAndAdd() {
      browsePath = document.FileCatalyst.browseLive(true);
   }

    function upload() {
    document.FileCatalyst.uploadLive();
   }

   function clearQueue() {
     document.FileCatalyst.clearQueue();
   }
 </script>

 <!--Uses onClick for demonstration only-->
 <form id="uploadform">
  <!--Launch a browse dialog and add the selected file to the queue-->
 <input type=button onClick="javascript:browseAndAdd();" value="Browse and Add to Queue" />

    <!-- Force upload of whatever is currently found in the transfer queue -->
    <input type=button onClick="javascript:upload();" value="Upload">

   <!-- Clear transfer queue (can be called only if no transfers are in progress) -->
    <input type=button onClick="javascript:clearQueue();" value="Clear Queue">
   </form> 
```

对缺少缩进表示歉意，我发现用于插入代码片段的 stackoverflow 标记对用户不太友好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T02:07:01.987

您需要理想地设置某种异步处理。我个人喜欢使用[Celery](http://celeryproject.org/)和 RabbitMQ 进行异步和消息传递。

# mvvm-light - 使用 RelayCommand 对象有什么好处

> ID：12966355
> 
> 赞同：2
> 
> 时间：2012-10-19T02:02:58.433
> 
> 标签：mvvm-light

我想知道使用 relay 命令调用刷新屏幕的函数有什么好处。在我的应用程序中，我有以下中继命令设置。

```
private RelayCommand _refreshSitesCommand;
    public RelayCommand RefreshSitesCommand
    {
        get { return _refreshSitesCommand ?? (_refreshSitesCommand = new RelayCommand(RefreshSites)); }
    }

    private RelayCommand _refreshProvidersCommand;
    public RelayCommand RefreshProvidersCommand
    {
        get { return _refreshProvidersCommand ?? (_refreshProvidersCommand = new RelayCommand(RefreshProviders)); }
    }

    private async void RefreshSites()
    {
        var sitesStats = await _dataService.GetSiteStats();

        if (sitesStats != null)
        {
            SiteStats.Clear();

            foreach (var site in sitesStats)
            {
                SiteStats.Add(new SiteStatsViewModel(site));
            }

            SelectedSite = SiteStats[0];
        }
    }

    private async void RefreshProviders()
    {
        var providers = await _dataService.GetProviders();

        if (providers != null)
        {
            Providers.Clear();

            foreach (var provider in providers)
            {
                Providers.Add(new ProviderViewModel(provider));
            }

            SelectedProvider = Providers[0];
        }
    } 
```

然后在我的代码中，我有以下调用来执行它。

```
RefreshProvidersCommand.Execute(null);
RefreshSitesCommand.Execute(null); 
```

那么为什么这比仅仅调用 RefreshSites 和 RefreshProviders 函数要好。然后我不需要 RelayCommand 对象的代码。除了公开 2 个私有函数的功能之外，使用 RelayCommand 对象比仅仅将函数公开并调用它们有什么好处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T23:56:35.190

MVVM 部分是为了避免 View 类中的代码隐藏。

例如，如果您希望对按钮单击做出响应，则可以分配 Click 事件处理程序或将 Command 属性分配给命令方法。（命令比 Click 事件处理程序具有某些优势，但这不是问题。）

除了在 View 类中定义一个方法之外，没有其他好的选择来处理 Click 事件。您不能直接将 Click 事件分配给与 View 不同的类中的处理程序方法，并且您只能绑定到属性，而不是方法。

但是，您可以将 Command 属性分配给与实现 ICommand 接口的**对象的****绑定**，例如 RelayCommand，并且该绑定可以是您的 ViewModel 对象的属性。这避免了必须在视图的代码隐藏文件中定义 Click 事件处理程序，同时使您的 ViewModel 能够轻松启用/禁用命令，而无需了解有关 View 的特定实现的任何信息。

 **人们可以争论虔诚地避免代码隐藏的优点，但这不是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:30:18.117

因为您可以绑定到视图中的命令。您不能绑定到视图中的方法（当然可以，但绑定到 Commands 更简洁）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T18:14:45.220

RelayCommand 还实现了 CanExecute 方法，当您将 RelayCommand 绑定到按钮时，该方法用于根据您为 CanExecute 方法指定的操作自动切换按钮的 IsEnabled 属性。**

# sql - 比较报告期间的数据 MS Access

> ID：12966356
> 
> 赞同：1
> 
> 时间：2012-10-19T02:03:13.487
> 
> 标签：sql, ms-access, expression, ms-access-2010

我有一个大表，其中包含我项目中每个报告期的记录。周期由整数 1、2、3、4、5、6、7 标识。

每个周期包含大约 7000 行任务，每个任务都标识一个唯一 ID。这些任务都有一个完成百分比列，它是一个整数。

我想添加一个比较列。因此它会查找上一期间的唯一 ID，然后返回完成百分比的差异。

例如，期间：8 项目唯一 ID：42w3wer324wer32 完成百分比：50

它会找到：期间：7 项目唯一 ID：42w3wer324wer32 完成百分比：40

在该字段中填写：10。

如果它在上一期间找不到项目唯一 ID，则默认为 0。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:20:59.943

据我了解您的描述，您可以像这样提取第 8 期的数据：

```
SELECT item_id, pct_complete
FROM YourTable
WHERE rpt_period = 8; 
```

之前的期间将是相同的查询，只是将 7 替换为期间。

因此，采用第 8 期查询并将其加入第 7 期的子查询。

```
SELECT
    y.item_id,
    (y.pct_complete - Nz(sub.pct_complete, 0)) AS change_in_pct_complete
FROM YourTable AS y
LEFT JOIN
    (
        SELECT item_id, pct_complete
        FROM YourTable
        WHERE rpt_period = 7
    ) AS sub
ON y.item_id = sub.item_id
WHERE rpt_period = 8; 
```

`Nz()`当周期 8 不存在周期 7 匹配时，该表达式将用 0 替换 Null `item_id`。

如果您需要一个不会在 Access 会话中运行的查询，则该`Nz()`功能将不可用。在这种情况下，您可以使用`IIf()`表达式......它不是那么简洁，但它可以完成工作。

```
IIf(sub.pct_complete Is Null, 0, sub.pct_complete) 
```

# php - 通过 AJAX 上传图片以及用户名和电子邮件地址

> ID：12966360
> 
> 赞同：0
> 
> 时间：2012-10-19T02:03:42.443
> 
> 标签：php, jquery, ajax, image-uploading, image-upload

我的文件上传脚本有问题。HTML如下：

```
<form method="post" name="imgsubmit" id="contact_form" action="PHP/imgupload.php"     enctype="multipart/form-data">
<label id="namelabel" for="username">Your name:</label><input id="username" type="text" name="username" rel="req">
<label id="labelemail" for="imgemail">E-mail:</label><input id="imgemail" type="email" name="imgemail" rel="req">
<label id="filelabel" for="file">Your photo:</label><input id="file" type="file" name="file">
<input id="imgsubmit" type="submit" name="submit" value="SUBMIT"></form> 
```

我有一个 jquery 验证脚本，它检查用户名和电子邮件字段以查看它们是否有效，如果未输入，则在它们周围返回一个白色边框：

```
$(function () {
    $('#contact_form').submit(function (e) {
        e.preventDefault();
        var form = $('#contact_form');
        var post_url = form.attr('action');
        var post_data = form.serialize();
        var submit_form = false;
        var req_fields = $('input[rel=req]');
        var field, pcount = 0;
        req_fields.each(function () {
            field = $(this).val();
            if (field == '' || field == 'Required') {
                $(this).css('border', '1px solid white').val('');
                pcount += 1;
            } else {}
        });
        if (pcount == 0) {
            submit_form = true;
        }
        if (submit_form) {
            $.ajax({
                type: 'POST',
                url: post_url,
                data: post_data,
                success: function (msg) {
                    $(form).fadeOut;
                    form.html(msg).fadeIn();
                }
            });
        }
    });
}); 
```

问题是用户名被提交到 php 脚本，电子邮件被提交到 php 脚本，但图像没有上传。我知道 AJAX 现在支持图像上传，并且 form.serialize() 可能是问题的根本原因，但无法正确编辑此代码以支持图像提交。

如何调整此代码以包含要提交到 php 的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:49:28.860

```
 `if (window.FormData)` 
```

检查这个并且文件必须是`

```
file = $('#elemet').files. 
```

和 ajax 选项应该是 data: FormData，其中`formdata = new FormData();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:33:17.420

我喜欢使用[jQuery Form Plugin](http://www.malsup.com/jquery/form/)来处理这类东西，你只需要在 DOM 准备好工作时绑定你的表单提交。下面的示例提供了一个**成功**回调，但您还可以使用其他事件，例如**error**、**beforeSubmit**等：

```
$('#contact_form').ajaxForm(function() { 
    alert("Thank you for your data!"); 
}); 
```

它支持常规输入值和文件上传（在旧浏览器中，它会使用**iframes**伪造 ajax 文件上传），如果您的浏览器可以处理它，您甚至可以显示[进度条](http://www.malsup.com/jquery/form/progress.html)。

# cakephp - 控制器中的 Cakephp 验证错误？

> ID：12966363
> 
> 赞同：1
> 
> 时间：2012-10-19T02:03:46.057
> 
> 标签：cakephp, invalidation

我试图通过控制器而不是模型中的条件使字段无效。

```
$this->Model->invalidate('check_out_reason', __('Please specify check out reason.', true)); 
```

以上不会使该字段无效。相反，我需要以下内容：

```
$this->Model->invalidate('Model.check_out_reason', __('Please specify check out reason.', true)); 
```

但是，如果我希望错误消息显示在“字段”本身（$this->model->validationErrors），它需要是“check_out_reason”而不是“Model.check_out_reason”。这意味着，如果我希望使控制器中的输入无效，我无法在字段本身中显示错误消息。

我可以知道这是 CakePHP 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:34:13.807

我找到了从控制器手动失效的解决方法。在这个问题上阅读了很多我发现 save() 函数没有考虑通过在控制器中调用的 invalidate() 函数设置的失效，但是（这非常重要）如果它是直接从模型函数调用 beforeValidate () 它运行良好。

所以我建议进入 AppModel.php 文件并创建下一个公共方法：

```
public $invalidatesFromController = array();

public function beforeValidate($options = array()) {
    foreach($this->invalidatesFromController as $item){
       $this->invalidate($item['fieldName'], $item['errorMessage'], true);
    }        
    return parent::beforeValidate($options);
}

public function invalidateField($fieldName, $errorMessage){
    $this->invalidatesFromController[] = array(
        'fieldName' => $fieldName,
        'errorMessage' => $errorMessage
    );
} 
```

之后，确保您的模型的 beforeValidate() 函数调用了父模型的函数：

```
public function beforeValidate($options = array()) {
    return parent::beforeValidate($options);
} 
```

在使字段无效的控制器中，使用下一行：

```
$this->MyModel->invalidateField('fieldName', "error message"); 
```

希望能帮助到你！对我来说，它的工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:50:46.380

我创建了一个名为“Invoices”的测试控制器，仅用于测试，我开发了以下功能

```
public function index(){
            if (!empty($this->request->data)) {
                $this->Invoice->invalidate('nombre', __('Please specify check out reason.'));
                if ($this->Invoice->validates()) {
                // it validated logic
                        if($this->Invoice->save($this->request->data)){
                            # everthing ok
                        } else {
                            # not saved
                        }
                } else {
                    // didn't validate logic
                    $errors = $this->Invoice->validationErrors;

                }
            }
        } 
```

我认为它对我有用 ![在此处输入图像描述](../Images/dae28081bdf68b9704406bae7b5a615e.png)

更改名为“check_out_reason”的字段的“nombre”字段，以使函数适应您的代码

# matlab - 裁剪 DEM 并保持正确的参考

> ID：12966364
> 
> 赞同：1
> 
> 时间：2012-10-19T02:03:50.887
> 
> 标签：matlab, mapping, geospatial

我已经从[USGS](http://eros.usgs.gov/#/Find_Data/Products_and_Data_Available/GMTED2010)下载了 GMTED2010 数字高程模型 (DEM) ，瓷砖 N30W120_150 和 N30W150_150。这是一个 500 m DEM。我想将这些加入到 matlab 中的文件中，所以我尝试了：

```
Z=[Z150 Z120]; %Join the dems at their matching side
R=R120; %Create a new spatial referencing object based on the old one.
R.Lonlim=[R150.Lonlim(1),R120.Lonlim(2)]; %Modify what changed in R
R.RasterSize=size(Z); %Adjust the RasterSize referenced in R. 
```

这可行，但大约 1/3 是太平洋，出于大小/计算的考虑，我想将其移除。不过，重要的是要在 R 中保持引用信息的正确性。

```
%Crop DEM to remove most ocean pixels.  about a 1/3 of dem.
Z=Z(:,floor(20/0.0042):end); %crop Z from -90 to -130 (20 degrees from the start (-150) longitude at 0.0042 deg/pixel according to the referencing info
R.Lonlim=[-150.0001+floor(20/0.0042)*0.0042, -90.0001]; %substract number of pixels cropped times deg/pixel value
R.RasterSize=size(Z); %Adjust the RasterSize referenced in R. 
```

问题是当我尝试查看特定位置的海拔时，例如：

```
lat=[39 38 47.22];
lat=dms2degrees(lat);
long=[-105 52 9.84];
long=dms2degrees(long);

hght=ltln2val(Z,R,lat,long); 
```

hght 给出的值不正确。事实上，如果我看一下 lat,long 周围的一个子集：

```
[r c]=latlon2pix(R,lat,long);
Z(r-30:r+3,c-30:c+30) 
```

in 的值`hght`甚至不在这个居中的子集中。我会理解我是否偏离了 1 个像素左右，但为什么我偏离了这么远？使用`hght=ltln2val(Z,R,lat,long)`WITHOUT 裁剪但仍结合使用会给出正确的（与 Z120 DEM 相同的值）值，所以我假设我的引用对象是错误的。

感谢有人可能提供的任何帮助。谢谢多米尼克

# spring - Spring 图像文件访问导致 404 未找到

> ID：12966366
> 
> 赞同：1
> 
> 时间：2012-10-19T02:03:53.327
> 
> 标签：spring

当我在服务器上存在的 url 下方输入时，出现 404 错误

```
localhost/PDFDemo/resources/jquery/css/ui-lightness/images/ui-bg_highlight-soft_100_eeeeee_1x100.png

Error 404--Not Found

From RFC 2068 Hypertext Transfer Protocol -- HTTP/1.1:

10.4.5 404 Not Found

The server has not found anything matching the Request-URI. No indication is given of whether the condition is temporary or permanent.

If the server does not wish to make this information available to the client, the status code `403 (Forbidden)` can be used instead. The `410 (Gone)` status code SHOULD be used if the server knows, through some internally configurable mechanism, that an old resource is permanently unavailable and has no forwarding address. 
```

我对 javascript 文件有同样的问题，并通过在 web.xml 中添加以下内容解决了这个问题

```
<mime-mapping>
        <extension>js</extension>
        <mime-type>text/javascript</mime-type>
    </mime-mapping> 
```

是否有我可以放入的 jsp 和图像的等效代码`contextConfigLocation`（例如：servlet.xml）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:43:28.430

问题是您将 Spring Dispatcher Servlet 映射到根上下文，因此 Spring 想要处理每个请求（如果配置正确，这本身就不是问题）。添加如下内容：

```
<mvc:resources mapping="/resources/**" location="/public-resources/" cache-period="31556926"/> 
```

为您的环境修改应该可以工作。[请参阅允许静态资源绕过 Spring 的文档并在此处](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-static-resources)转到默认 servlet 。

您还应该将此添加到您的配置中，以便 Spring 知道使用默认 Servlet。

```
<mvc:default-servlet-handler/> 
```

此外，[这个问题](https://stackoverflow.com/questions/870150/how-to-access-static-resources-when-using-default-servlet)的答案可能会对您有所帮助。

# android - Android - 从上一个活动获取输入到新活动，并显示 xml 布局

> ID：12966370
> 
> 赞同：0
> 
> 时间：2012-10-19T02:04:07.440
> 
> 标签：android, xml, layout, android-activity

在我的应用程序的主要活动中，它让用户输入他们的姓名并单击班次编号并单击提交。当他们点击提交时，它会将他们带到一个新页面（活动），该页面再次显示他们的姓名和班次编号。但在下面，我希望它显示计时器（xml 中提供的计时器），但我不知道如何让它在一个活动上同时显示布局的内容和输入（意图）。

帮助？有没有办法让两者合作？

这是我的第二个活动的 .java 文件：包 com.cyapps.downtimer；

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class WinderDTActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Bundle extras = getIntent().getExtras();
        if (extras != null){
            TextView textView = new TextView(this);
            String opName = extras.getString(MainActivity.OP_NAME);
            String rChoice = extras.getString(MainActivity.RADIO_CHOSEN);
            textView.setTextSize(15);
            textView.setText( "\n\tOperator Name: " + opName + "\n\t" + rChoice );
            setContentView(textView);
        }
    }
} 
```

这是第二个活动的 XML：

```
 <TimePicker
        android:id="@+id/timePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/submit" />

</LinearLayout> 
```

我想要的是让第二页/活动显示 XML 布局，并显示我从前一页获得的输入。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:09:25.003

在第二个活动中，使用 setContentView() 代替 setContentView(textView) 并提供包含第二个活动的所有视图的布局：

```
 setContentView(R.layout.SECOND_ACTIVITY_LAYOUT); 
```

为了显示第一个活动的值，在开始新活动时通过意图传递它们。[您可以从本教程http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)了解意图

**编辑：** 使用意图将数据推送到目标活动：

**在您的第一个活动中**，在开始意图之前使用 putExtra() 添加新的名称/值对：

```
i.putExtra("message", This is a string);
i.putExtra("age", 25); 
```

**在您的第二个活动中**获取传入的 Bundle 对象：

```
Bundle extras = getIntent().getExtras(); 
```

针对 null 检查 extras 并检索值：

```
if (extras != null) {
    String message = extras.getString("message");
    int a = extras.getInt("age");
} 
```

现在您可以使用 message 和变量的值设置 TextView 的文本。

# delphi - 如何将 ElTreeItem 与其复选框（单选按钮）同步？

> ID：12966371
> 
> 赞同：0
> 
> 时间：2012-10-19T02:04:08.537
> 
> 标签：delphi

好吧，我在使用这个元素时遇到了一些问题。

让 ElTreeItem ShowCheckBox 为真。

单击 ElTreeItem 复选框（单选按钮）。

![在此处输入图像描述](../Images/ce64258ce6b70c197f222eaa47204bfa.png)

ElTree.Selected 为 nil(null)

单击 ElTreeItem 文本（如果它的索引 = 2）

![在此处输入图像描述](../Images/8b384d44157ebc84226a9bf910a06a9b.png)

ElTree.Selected.Index = 2;

单击 ElTreeItem 复选框（单选按钮）（如果它在索引 = 0 中）。

![在此处输入图像描述](../Images/8c55875dbb360085a0f15abf20c99f72.png)

ElTree.Selected.Index = 2（还是 2...）

我该如何解决这个问题？

# javascript - 在 jQuery(document).ready(function() 里面放什么

> ID：12966380
> 
> 赞同：2
> 
> 时间：2012-10-19T02:06:20.273
> 
> 标签：javascript, jquery, html, css, wordpress

一直在尝试让 javascript 库在 wordpress 中运行，但我不太确定要在 .ready(function) 中放入什么才能运行库。jQuery函数的原始页面在这里： http: [//manos.malihu.gr/simple-jquery-fullscreen-image-gallery/2](http://manos.malihu.gr/simple-jquery-fullscreen-image-gallery/2)

我假设我需要运行一些将运行整个 javascript 文件的函数，但我不太确定该函数可能是什么。很抱歉对此如此陌生，但非常感谢您的帮助！

```
function malihu_gallery() {
if (!is_admin()) {

    // Enqueue Malihu Gallery JavaScript
    wp_register_script('malihu-jquery-image-gallery', get_template_directory_uri(). '/js/malihu-jquery-image-gallery.js', array('jquery'), 1.0, true );
    wp_enqueue_script('malihu-jquery-image-gallery'); 

    // Enqueue Malihu Gallery Stylesheet
    wp_register_style( 'malihu-style', get_template_directory_uri() . '/CSS/malihu_gallery.css', 'all' );
    wp_enqueue_style('malihu-style' );

    function gallery_settings () { ?>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            // What do I put in here?
        });
    </script><?php
    }
  }
}

add_action('init', 'malihu_gallery'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:08:48.147

我猜，基于实际代码的有限视图，这组变量应该在那个空间中设置/修改：

```
//config
//set default images view mode
$defaultViewMode="full"; //full, normal, original
$tsMargin=30; //first and last thumbnail margin (for better cursor interaction) 
$scrollEasing=600; //scroll easing amount (0 for no easing) 
$scrollEasingType="easeOutCirc"; //scroll easing type 
$thumbnailsContainerOpacity=0.8; //thumbnails area default opacity
$thumbnailsContainerMouseOutOpacity=0; //thumbnails area opacity on mouse out
$thumbnailsOpacity=0.6; //thumbnails default opacity
$nextPrevBtnsInitState="show"; //next/previous image buttons initial state ("hide" or "show")
$keyboardNavigation="on"; //enable/disable keyboard navigation ("on" or "off") 
```

当然，这假设这些变量尚未在您的“/js/malihu-jquery-image-gallery.js”文件中设置。

# java - 如何在不频繁轮询的情况下了解 GMail 上的传入电子邮件？

> ID：12966383
> 
> 赞同：2
> 
> 时间：2012-10-19T02:06:45.693
> 
> 标签：java, android, oauth, gmail, gmail-imap

如果我正在开发一个 Android 应用程序，获得关于收到电子邮件的近乎实时通知的最可行方法是什么？是否有类似推送的机制，或者我可以长时间保持我的 IMAP 连接，还是使用 IDLE 命令？
考虑到用户被授权通过 OAuth 使用 GMail 服务，我不想疯狂地轮询 IMAP 服务器。

更新：

*   我没有使用手机配置的 Google 帐户。使用 OAuth 设置了另一个帐户。
*   我在我的应用程序中使用[Apache Commons Net](http://commons.apache.org/net/)连接到 IMAP/SMTP。它是 IMAP 的基本库，但我也许可以修改它以添加 IMAP 命令/扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:15:17.900

您可以在 GMail 中注册一个[ContentObserver](http://developer.android.com/reference/android/database/ContentObserver.html)，只要 GMail 中发生变化，就会调用观察者。

```
contentResolver.registerContentObserver(Uri.parse("content://gmail-ls"), true, myContentObserver ); 
```

`onChange`当 GMail 中的某些内容发生更改时，在您的 ContentObserver 中覆盖以执行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:00:54.620

我会查看 Google Cloud Messaging (GCM)：

[http://developer.android.com/training/cloudsync/gcm.html](http://developer.android.com/training/cloudsync/gcm.html)

我的理解是，这无需用户的 Google 帐户即可工作，并且可以让您处理身份验证。

在此处查看教程：

[http://www.techrepublic.com/blog/app-builder/implementing-googles-cloud-to-device-messaging/428](http://www.techrepublic.com/blog/app-builder/implementing-googles-cloud-to-device-messaging/428)

不过，您需要运行额外的服务器端代码来执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T06:07:39.113

由于 IMAP 本身确实提供任何类型的推送通知，而[Google 扩展](https://developers.google.com/google-apps/gmail/imap_extensions)也不提供，因此您必须自己实现它。

一种方法是使用`IDLE`请求，这仍然是一种廉价的轮询方式。当然，您不能期望您的应用程序一直在运行，因此您需要使用后台服务。然而，“永远在线”服务在 Android 上是一种反模式，它会很快耗尽电池电量，并可能让您获得许多 1 星。此外，系统可能随时决定终止它。另一种选择是使用`AlarmManager`定期启动服务，但每隔几秒左右启动它同样糟糕。所以你基本上回到了第一点：轮询。

另一种方法是使用 GCM 或类似服务获取推送通知。这确实需要您拥有一个服务器，并且该服务器需要为用户提供身份验证信息（这可能是一个问题），但是在保持打开的连接和每秒发送 IDLE 等方面没有真正的限制。在 Android 上侧面，如果你想自己实现推送，你需要保持一个打开的套接字来获取通知。如果您不是系统应用程序（见上文），这不是很容易做到，所以离开 GCM。它使用的连接由系统（谷歌服务框架）管理，它可以做普通应用程序不能做的事情，而且你基本上可以免费获得它，因为它已经在那里了。当有事情要做时，它会接收小块数据，称为“tickles”。这些反过来又会触发广播、Google Play 更新等。

所以，任君挑选。或者干脆放弃，注册帐户并使用 GMail 及其标签[Android API](http://android-developers.blogspot.jp/2012/04/gmail-public-labels-api.html)。

# php - 使目录可写（部署在 EC2 上的应用程序）的最佳方法是什么？

> ID：12966391
> 
> 赞同：2
> 
> 时间：2012-10-19T02:07:51.763
> 
> 标签：php, amazon-ec2, amazon-web-services

通过在 Elastic Beanstalk、EC2 上部署的 PHP 应用程序，我一直在使用 git 和 eb 来管理我的环境实例和所有文件。我需要更改文件目录的权限以使其可写，但 git 不负责传输目录权限。从mac上完成这项工作的最简单/最快的方法是什么？

Filezilla 需要很长时间来配置。我可以通过 SSH 连接到我的 EC2 实例，但仍然不确定如何更改我的目录的权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:11:56.863

通过 SSH 登录并输入下一步。

**更改权限：**

```
sudo su - # log-in as superuser*
chmod 755 /path/to/your/directory
# If you just want to allow Apache to write in directory then set 666 permissions 
```

**如果您是目录的所有者，则无需以超级用户身份登录。*

**如果需要，请更改所有者：**

```
sudo su -
chown user:group /path/to/directory 
```

**更新：**

感谢[jamieb](https://stackoverflow.com/users/201225/jamieb)在评论中的更正。真的，我没有回答特定[gtech](https://stackoverflow.com/users/1756812/gtech)的问题：

> 如何更改我的目录的权限

但当然，在我看来，最好将权限授予例如`apache`（或`www-data`）用户到您要写入的目录，以避免此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:51:43.750

您必须在应用程序本身中执行此操作。在您的情况下，在写操作周围抛出一个 try/catch 块可能最有意义，如果抛出异常，请使用 PHP 的`chmod()`函数调整权限。

仅供参考，您很可能不想这样做。持久性数据需要存储在您的数据库或 S3（如果是文件）中。在每个实例的文件系统中本地存储数据是一种在您下次进行代码部署、发生自动缩放事件或重建环境时丢失该数据的好方法。它也可能会导致问题，因为由于弹性负载均衡器，您永远无法确定哪个实例为每个请求提供服务。

# r - 如何为 R 中的每个内部节点获取子节点？

> ID：12966392
> 
> 赞同：1
> 
> 时间：2012-10-19T02:07:53.820
> 
> 标签：r, labels, dendrogram, tree-nodes

对于树状图对象，如何获取内部节点的子节点？理想情况下，我想提取带有标签的孩子。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:03:07.473

该功能`identify()`允许您使用鼠标切割树并提取孩子。从 ?identify.hclust：

```
 hca <- hclust(dist(USArrests))
  plot(hca)
  (x <- identify(hca)) 
```

单击鼠标第二个按钮终止。

# javascript - 找出导致失控 DOM 节点创建的代码的好方法是什么？

> ID：12966393
> 
> 赞同：2
> 
> 时间：2012-10-19T02:07:56.747
> 
> 标签：javascript, dom, google-chrome-devtools

Chrome 开发工具发现了一些[与此处发布的问题类似的](https://stackoverflow.com/questions/10901730/what-is-the-dom-node-count-in-google-chromes-developer-tools-timeline-memory-vi)问题，创建的 DOM 节点比我认为应该给予我的设计选择更多。

![Dom 节点数增加](../Images/a4097384d5866c0389025592bf5b6f83.png)

找出导致失控 DOM 节点创建的代码区域的好方法是什么？这些信息确实很有用，但弄清楚如何处理它似乎远不如处理 CPU 配置文件那么简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:40:03.210

我建议创建遍历 DOM 并收集有关 DOM 中哪些节点的统计信息的代码（标签类型、类名、id 值、父级、子级数、textContent 等）。如果您知道页面中应该包含什么，您应该能够查看此数据转储并确定其中的内容是您不期望的。您甚至可以在页面加载时运行代码，然后在您的页面运行一段时间后再次运行它并比较两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:31:38.033

尝试拍摄两张堆快照（`Profiles`面板），一张有少量 DOM 节点，一张有很多，然后比较并查看是否保留了很多节点。如果是，您将能够检测到主保持器。

# c++ - 无法在 Visual Studio C++ 中读取我的文本文件

> ID：12966394
> 
> 赞同：2
> 
> 时间：2012-10-19T02:08:00.070
> 
> 标签：c++, visual-studio-2010, text, binary-tree

所以我为我的 compsci 课程设置了一个实验室，而教授和助教使用 Eclipse，但是我无法让它正常运行，所以我尝试使用 Visual Studio。我遇到的问题是我无法让我的程序读取我想要的文本文件，以便它可以执行它需要的操作。

这是我下面的代码：

```
struct wordpair { string key; string following; };

int compare(wordpair a, wordpair b) {
if (a.key  < b.key) return -1;
if (a.key == b.key) return  0;
if (a.key  > b.key) return  1;
}

int main() {
ArrayDeque<string> A;
Treap1<wordpair> bst;
string k, l;

ifstream textstream("c:\\Users\\Jay\\Documents\\textfile.txt");
int t = clock();
textstream >> k;
A.add(0, k);
// insert wordpairs
while (textstream >> l) {
    wordpair w;
    w.key = k; w.following = l;
    bst.add(w);
    k = l;
    A.add(0, k);
}
// do some searches
for (int i = 0; i < 3*A.size(); ++i){
    wordpair w;
    w.key = A.get(rand()%A.size());
    bst.find(w);
}
cout << "time for " << bst.size() << " adds and " << 3*A.size() << " searches is " << clock()-t << endl;

char c;
cin >> c; 
```

}

任何和所有的帮助将不胜感激。顺便说一句，我正在使用 PC、Windows 和 Visual Studio Express 2010，用 C++ 编码

# c# - 从 MVC HttpPost 向 jQuery 抛出错误

> ID：12966395
> 
> 赞同：5
> 
> 时间：2012-10-19T02:08:07.657
> 
> 标签：c#, jquery, .net, error-handling, asp.net-mvc-4

我在控制器中有一个方法，如下所示：

```
[HttpPost]
public void UnfavoriteEvent(int id)
{
    try
    {
        var rows = _connection.Execute("DELETE UserEvent WHERE UserID = (SELECT up.UserID FROM UserProfile up WHERE up.UserName = @UserName) AND EventID = @EventID",
            new { EventID = id, UserName = User.Identity.Name });
        if (rows != 1)
        {
            Response.StatusCode = 500;
            Response.Status = "There was an unknown error updating the database.";
            //throw new HttpException(500, "There was an unknown error updating the database.");
        }
    }
    catch (Exception ex)
    {
        Response.StatusCode = 500;
        Response.Status = ex.Message;
        //throw new HttpException(500, ex.Message);
    }
} 
```

正如你所看到的，我已经尝试了几种不同的方法来抛出这个错误。在 JavaScript 中，我有以下块来调用此方法：

```
var jqXHR;
if (isFavorite) {
    jqXHR = $.ajax({
        type: 'POST',
        url: '/Account/UnfavoriteEvent',
        data: { id: $("#EventID").val() }
    });
}
else {
    jqXHR = $.ajax({
        type: 'POST',
        url: '/Account/FavoriteEvent',
        data: { id: $("#EventID").val() }
    });
}

jqXHR.error = function (data) {
    $("#ajaxErrorMessage").val(data);
    $("#ajaxError").toggle(2000);
}; 
```

现在，我想做的是将发生的错误返回给`jqXHR.error`函数，以便我可以正确处理它。

目前，未注释的代码会抛出一个异常，指出我放入的文本`Status`是不允许的，并且注释的代码实际上返回标准错误页面作为响应（这并不奇怪）。

所以，我有几个问题：

1.  如何正确抛出错误？
2.  `Response.Status`物业是做什么的？

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:21:07.807

您将能够从 javascript 端获取响应状态，执行以下操作：

```
$.ajax({
    type: 'POST',
    url: '/Account/UnfavoriteEvent',
    data: { id: $("#EventID").val() },
    success: function(data, textStatus, jqXHR) {
        // jqXHR.status contains the Response.Status set on the server
    },
    error: function(jqXHR, textStatus, errorThrown) {
        // jqXHR.status contains the Response.Status set on the server
    }}); 
```

如您所见，您必须将函数传递`error`给`ajax`函数......在您的示例中，您将函数设置为完全没有效果的`error`属性。`jqXHR`

**关于 ajax 事件的文档**

*   [jQuery - Ajax 事件](http://docs.jquery.com/Ajax_Events)

jQuery 文档说错误字符串将出现在`errorThrown`参数中。

**不要使用响应**

相反，您应该返回`HttpStatusCodeResult`：

```
[HttpPost]
public void UnfavoriteEvent(int id)
{
    try
    {
        var rows = _connection.Execute("DELETE UserEvent WHERE UserID = (SELECT up.UserID FROM UserProfile up WHERE up.UserName = @UserName) AND EventID = @EventID",
            new { EventID = id, UserName = User.Identity.Name });
        if (rows != 1)
        {
            return new HttpStatusCodeResult(500, "There was an unknown error updating the database.");
        }
    }
    catch (Exception ex)
    {
        return new HttpStatusCodeResult(500, ex.Message);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:55:02.760

使用[`Response.StatusDescription`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.statusdescription.aspx). 在 jQuery 方面，使用`jqXHR.fail(function(){})`.

# asp.net - 如何将查询字符串值传递到 ASP.NET 中的选择语句中？

> ID：12966398
> 
> 赞同：0
> 
> 时间：2012-10-19T02:08:16.800
> 
> 标签：asp.net, sql, ado.net

如何将查询字符串值传递到 ASP.NET 中的选择语句中？

这是我尝试过的：

```
{ 
    string myID = (Request.QueryString["ID"] ?? "0").ToString(); 

    SqlConnection con = new SqlConnection
        (ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString); 
    SqlDataAdapter da = new SqlDataAdapter("SELECT ID, Name, Date, Description FROM MyTable     
                                            where ID=@ID", con); 
    DataTable dt = new DataTable(); 
    da.Fill(dt); 
    GV_InlineEditing.DataSource = dt; 
    GV_InlineEditing.DataBind(); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:14:18.603

使用 a[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)并向其添加参数：

```
string query = "SELECT ID, Name, Date, Description FROM MyTable where ID=@ID";
var cmd = new SqlCommand(query, con);
cmd.Parameters.AddWithValue("@ID", myID);
var da = new SqlDataAdapter(cmd); 
```

# java - JPasswordField KeyPress 字符串长度错误？

> ID：12966401
> 
> 赞同：6
> 
> 时间：2012-10-19T02:08:32.753
> 
> 标签：java, swing, netbeans, string-length, jpasswordfield

我正在尝试更改 Java Swing (Netbeans) 中 JPasswordField 的背景颜色。

这是我所拥有的：

```
private void pstxtPasswordKeyPressed(java.awt.event.KeyEvent evt) {                                         

    //Get string from password box
    userPassword = new String(pstxtPassword.getPassword());

    //If password is 8+ characters
    //(one less because string counting begins at 0)
    if (userPassword.length() >= 7) {

        //Set password input box background color to green
        pstxtPassword.setBackground(Color.green);
    }

    else { //If password is less than 8 characters

        //Set password input box background color to red
        pstxtPassword.setBackground(Color.red);
    }

} 
```

一切正常，除非我退格。当我在输入 8 个以上字符后退格时，颜色不会变回红色，直到字段中只剩下 5 个字符。

帮助将不胜感激，我对 Java 编程和 Netbeans 非常陌生。

编辑：我改变了我的代码，

```
 //If password is 8+ characters
    if ((pstxtPassword.getPassword()).length >= 8) {

        //Set password input box background color to green
        pstxtPassword.setBackground(Color.green);
    }

    else { //If password is less than 8 characters

        //Set password input box background color to red
        pstxtPassword.setBackground(Color.red);
    } 
```

这段代码对我来说似乎很有意义，但在测试中，颜色在第 9 个字符处变为绿色；退格时，它在 6 处变回红色。这似乎与我遇到的问题相同，因为代码`>= 7`在第 8 个字符处颜色变为绿色，但在 5 个字符处变回红色。

![输入 9 个字符后，组件变为绿色](../Images/699ee1780d0cb535734735f26b1b646c.png)

输入 9 个字符后，组件变为绿色

![退格后（从 9 开始），组件保持绿色，直到有 6 个字符](../Images/2892784785138370e86c3bd98c274ddf.png)

退格后（从 9 开始），组件保持绿色，直到有 6 个字符

这很奇怪，因为我在这个程序的一个按钮中有类似的代码，它显示一条错误消息。该代码工作正常。这是一个 KeyPress 问题，也许与退格键有关？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T02:23:16.063

顺便说一句，检查由 返回的数组的长度`getPassword()`，而不是`String`从该数组构造的 a 的长度。这`String`是一个安全风险，因为它将以容易找到的名称无限期地存储`userPassword`。

附录：这是Robin[建议](https://stackoverflow.com/a/12968493/230513)使用的相关[示例](https://stackoverflow.com/a/5342146/230513)。我猜你的主要听众在处理它之前就看到了。`DocumentListener``KeyEvent``JPasswordField`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T06:24:32.140

由于`JPasswordField`extends from `JTextComponent`，您可以将 a 附加`DocumentListener`到它，这是一种更安全的方式来更新每次内容更改时的背景颜色。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-19T02:14:48.950

```
if (userPassword.length() >= 7) 
```

此 if 语句与您的评论不符：

//如果密码是8+个字符

实际代码说如果有 7+ 个字符，则将背景变为绿色。所以当你退格时，当你剩下 6 个字符时，它应该把背景变成红色。

我认为您的困惑显示在此评论中：

```
//(one less because string counting begins at 0) 
```

您要描述的是*索引*a 中的字符从`String`开始`0`，例如当您使用`charAt()`or时`subString()`。这意味着第一个字符在 index 处`0`，第二个在 index 处`1`，依此类推。另一方面，`length()`返回`String`. 这与索引无关，因此您不需要减去 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-26T20:19:48.840

我通过使用 KeyRelease 而不是 KeyPress 解决了这个问题，试试我的朋友

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-16T09:17:13.657

采用

```
private void pstxtPasswordKeyReleased(java.awt.event.KeyEvent evt) 
```

代替

```
private void pstxtPasswordKeyPressed(java.awt.event.KeyEvent evt) 
```

# spring - 使用来自 Spring Data for Neo4j 的 GraphRepository 返回 Null

> ID：12966402
> 
> 赞同：1
> 
> 时间：2012-10-19T02:08:48.340
> 
> 标签：spring, neo4j, null, spring-data, spring-data-neo4j

最近我一直在玩 Spring Data for Neo4j ( `version 2.1.0.BUILD-SNAPSHOT`)，我遇到了一个与它的 GraphRepository 接口相关的问题。

您可以编写一个方法，使用方法名称中包含的属性搜索 T 类的节点，如下所示：

```
public interface UserRepository extends GraphRepository<User> {
    public User findByUsername(String username);
    public User findById(Long id);
} 
```

我的用户类：

```
@NodeEntity
public class User {

    @GraphId
    Long id;

    @Indexed
    private String username;

    private String password;

    ...
} 
```

还有我的applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation=" 
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/data/neo4j
        http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd">

    <context:spring-configured />
    <context:annotation-config />

    <context:component-scan base-package="package.for.services" />  
    <neo4j:repositories base-package="package.for.repositories" />

    <neo4j:config graphDatabaseService="graphDatabaseService" />
    <bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase"
        destroy-method="shutdown" scope="singleton">
        <constructor-arg value="/path/to/neo4j.db" />
        <constructor-arg>
            <map>
                <entry key="allow_store_upgrade" value="true" />
            </map>
        </constructor-arg>
    </bean>
</beans> 
```

我的问题是该`findById(Long id)`方法确实返回具有该特定 id 的节点，但`findByUsername(String username)`确实返回`null`而不是具有该特定用户名的节点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:37:16.327

通过重新创建数据库来解决。删除其目录并再次启动应用程序。

我猜索引从一开始就没有正确创建，并且一旦创建，Spring Data 就无法更改它们。

谢谢你。

# service - 如何从 AngularJS 中的另一个控制器中清除一个控制器中的范围？

> ID：12966404
> 
> 赞同：1
> 
> 时间：2012-10-19T02:09:01.973
> 
> 标签：service, messages, controllers, angularjs, alerts

我正在尝试使用 AngularJS 创建一个简单的消息传递服务（请参阅 jsFiddle），并且它大部分都在工作。但是，我的“clearAlerts()”方法似乎没有任何效果。我是 Angular 的新手，所以我不确定我做错了什么？

这是 jsFiddle [http://jsfiddle.net/uberspeck/j46Yh/](http://jsfiddle.net/uberspeck/j46Yh/)

...和代码

```
var App = angular.module('App', []);

function AlertsCtrl($scope, alertsManager) {
    $scope.alerts = alertsManager.alerts;
}

function FooCtrl($scope, alertsManager) {
    $scope.doGood = function() {
        alertsManager.addAlert('Yay!', 'alert-success');
    };
    $scope.doEvil = function() {
        alertsManager.addAlert('Noooo!', 'alert-error');
    };
    $scope.reset = function() {
        alertsManager.clearAlerts();
    };
}

App.factory('alertsManager', function() {
    return {
        alerts: {},
        addAlert: function(message, type) {
            this.alerts[type] = this.alerts[type] || [];
            this.alerts[type].push(message);
        },
        clearAlerts: function() {
            this.alerts = {}; // <= not working??
        }
    };
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:15:20.723

另一种解决方案是仅删除警报上的属性。

[http://jsfiddle.net/j46Yh/4/](http://jsfiddle.net/j46Yh/4/)

```
 clearAlerts: function() {
        for(var x in this.alerts) {
           delete this.alerts[x];
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:33:52.977

Pawel Kozlowski was kind of enough to provide my answer via the [AngularJS mailing list](https://groups.google.com/forum/?fromgroups=#!forum/angular). I simply had to change one line in my AlertsCtrl...

```
function AlertsCtrl($scope, alertsManager) {
    $scope.alertsManager = alertsManager;
} 
```

Check out the [new working jsFiddle](http://jsfiddle.net/uberspeck/j46Yh/6/)

# sql-server-2005 - 多个身份的输出插入另一个表

> ID：12966405
> 
> 赞同：1
> 
> 时间：2012-10-19T02:09:20.153
> 
> 标签：sql-server-2005, declarative

我正在尝试从多个表中获取数据并将它们导入到其他表中。目标使用身份标识，源表具有不同的标识。我需要从插入中获取新的身份 ID，并将它们添加到目标数据库中的另一个表中。这是我到目前为止所拥有的，但不知道如何让它工作。我尝试将 TMMYId 添加到 OUTPUT 中，但这不起作用。

```
DECLARE @MakeModels TABLE (MakeId int, ModelId int, YearId int, TMMYId int)

INSERT INTO @MakeModels (MakeId, ModelId, YearId, TMMYId)
SELECT MakeID, ModelID, YearID, T.id TypeMakeModelYear T 
JOIN Fitment F 
ON F.TMMYID = T.id JOIN PartToAppCombo P ON F.PartToAppComboID = P.ID
WHERE P.PartmasterID IN (SELECT PP.PartMasterID FROM PartPriceInv PP WHERE Discontinued   
= 0)

DECLARE @MakeOutput TABLE (MakeId int, TMMYId int)
DECLARE @ModelOutput TABLE (ModelId int, TMMYId int)
DECLARE @YearOutput TABLE (YearId int, TMMYId int)

INSERT INTO Class1 (Name, Active) 
OUTPUT INSERTED.Class1Id, MM.TMMYId INTO @MakeOutput
SELECT M.Description, 1 FROM Makes M JOIN @MakeModels MM ON M.id = MM.MakeId
WHERE NOT EXISTS (SELECT Class1Id FROM Class1 WHERE Name = M.Description )

INSERT INTO Class2 (Name, Active) 
OUTPUT INSERTED.Class2Id, MM.TMMYId INTO @ModelOutput
SELECT M.Description, 1 FROM Models M JOIN @MakeModels MM ON M.id = MM.ModelId
WHERE NOT EXISTS (SELECT Class2Id FROM Class2 WHERE Name = M.Description)

INSERT INTO Class3 (Name, Active) 
OUTPUT INSERTED.Class3Id, MM.TMMYId INTO @YearOutput
SELECT M.Description, 1 FROM Years M JOIN @MakeModels MM ON M.id = MM.YearId
WHERE NOT EXISTS (SELECT Class3Id FROM Class3 WHERE Name = M.Description)

INSERT INTO MMY (class1Id, class2Id, class3Id) 
SELECT M.MakeId, MO.ModelId, Y.YearId FROM @MakeOutput M JOIN @ModelOutput MO ON    
M.TMMYId = MO.TMMYId
JOIN @YearOutput Y ON MO.TMMYId = Y.TMMYId 
```

# ada - Ada95：将整数转换为字符

> ID：12966409
> 
> 赞同：5
> 
> 时间：2012-10-19T02:09:35.673
> 
> 标签：ada

Ada 有没有办法将整数转换为字符？

前任：

```
TempInt := 1;
InGrid(RowIndex, ColumnIndex) := (ToCharacter(TempInt)); --This will be used to input a character value from an integer into an array of characters. 
```

Ada 的 Integer->Character 转换是否有任何“ToCharacter”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T04:17:28.360

您可能正在寻找应用于 的[`'Val`](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-K.html)属性`Character`，如图[所示](https://stackoverflow.com/a/12923999/230513)。`Character'Val`像一个函数一样工作，它接受一个整数并返回一个`Character`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T15:30:27.940

这取决于您是要转换为 ascii 代码还是只想将整数值显示为字符串。

在这里，您有两种情况的示例

```
 with Ada.Text_IO;                  use Ada.Text_IO;

    procedure test is
       temp_var : Integer := 97;

    begin
       Put_Line ("Value of the integer shown as string: " & Integer'Image(temp_var));
       Put_Line ("Value of the integer shown as the ascii code: " & Character'Val(temp_var));
    end test; 
```

结果是

> 显示为字符串的整数值：97
> 
> 显示为 ascii 代码的整数值：a

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:56:22.277

我强烈建议您查看[LRM 的 Annex K](http://www.adaic.org/resources/add_content/standards/95lrm/ARM_HTML/RM-K.html)，因为它可能涵盖了您想要的内容，以及许多您尚未意识到自己想要的其他好东西。

在其中的相关内容中：

将整数 (Foo) 转换为该整数值的可打印字符串表示形式：

```
Integer'image(Foo) 
```

将整数（Foo，介于 0 和 255 之间）转换为由该值表示的 ASCII 字符：

```
Character'Val(Foo) 
```

在上面的例子中，如果 in 的`Foo`值为 65，那么第一行将返回 string `"65"`，而第二行将返回 character `'A'`。

# javascript - 车库门效应：在它升起之前将内容隐藏在下面

> ID：12966410
> 
> 赞同：2
> 
> 时间：2012-10-19T02:09:35.227
> 
> 标签：javascript, jquery, html, css

我正在尝试产生车库门效果，当网站加载时，您会看到车库门。悬停时，门抬起，内容在其后面。我遇到的问题是让我的内容一直隐藏，直到门打开。任何想法，将不胜感激。看看这个网站：http: [//vcube.netau.net/](http://vcube.netau.net/)

如果需要代码，我可以提供给。

```
<div id="wrapper">
    <div id="container">
        <img src="./images/Logo_door.png" class="top">

        <section id="main">
        <!-- main content here -->
        </section>

        <footer id="footer">
        <!-- where video and map will go -->
            <div id="video">
                <iframe class="hidden" width="363" height="187" src="http://www.youtube.com/embed/Pd00CAw15-E?wmode=transparent" frameborder="0" allowfullscreen></iframe>
            </div>
            <div id="map">
            </div>
        </footer>
    </div>  
</div> 
```

这是他的CSS

```
body {
    background:url('../images/background1.jpg');
    background-repeat:repeat-y repeat-x;
    }

#wrapper {
    background:url('../images/background2.gif');
    display:block;
    height:600px;
    width:900px;
    padding:10px 0 10px 0;
    margin:auto;
    border-radius:15px;
    }

footer {
    margin:auto;
    width:800px;
    height:200px;
    }

#main {
    height:350px;
    margin:0px 50px 50px 50px;
    width:800px;
    border-radius:15px;
    padding:0;
    -moz-box-shadow:  inset 0 0 5px 5px #888;
    -webkit-box-shadow: inset 0 0 5px 5px#888;
    box-shadow:  inset 0 0 5px 5px #888;
    }

#video {
    background:black;
    padding:0;
    margin:0px 0px 0px 25px;
    float:right;
    width:375px;
    height:200px;
    border-radius:10px;
    -moz-box-shadow:  inset 0 0 5px 5px #888;
    -webkit-box-shadow: inset 0 0 5px 5px#888;
    box-shadow:  inset 0 0 5px 5px #888;
    }

#video iframe {
    margin:6px 0 0 6px;
    }

#map {
    padding:0;
    margin:0px 25px 0px 0px;
    border-radius:10px;
    float:left;
    width:375px;
    height: 200px;
    -moz-box-shadow:  inset 0 0 5px 5px #888;
    -webkit-box-shadow: inset 0 0 5px 5px#888;
    box-shadow:  inset 0 0 5px 5px #888;
    }

.top {
    margin:auto;
    height:700px;
    width:900px;
    padding:0;
    position:absolute;
    } 
```

还有我正在使用的 jquery。

```
$(function() {

    $('#wrapper').hover(function() {
    $('img.top', $(this)).stop().animate({top: '-900px'}, 1000); 
        },function() {
    $('img.top', $(this)).stop().animate({top: '10px'}, 1000);
    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:03:59.217

嘿，这是在动画完成时让你的主出现的代码

jQuery部分

```
 $(function() {

    $('#wrapper').hover(function() {
    $('img.top', $(this)).stop().animate({top: '-900px'}, 1000 , function(){$('.hidden').css('display' , 'block');}); 
        },function() {
        $('.hidden').css('display' , 'none');
    $('img.top', $(this)).stop().animate({top: '10px'}, 1000);
    })
}); 
```

CSS部分

```
body {
    background:url('../images/background1.jpg');
    background-repeat:repeat-y repeat-x;
    }

#wrapper {
    background:url('../images/background2.gif');
    display:block;
    height:600px;
    width:900px;
    padding:10px 0 10px 0;
    margin:auto;
    border-radius:15px;
    }

footer {
    margin:auto;
    width:800px;
    height:200px;
    }

#main {
    height:350px;
    margin:0px 50px 50px 50px;
    width:800px;
    border-radius:15px;
    padding:0;
    -moz-box-shadow:  inset 0 0 5px 5px #888;
    -webkit-box-shadow: inset 0 0 5px 5px#888;
    box-shadow:  inset 0 0 5px 5px #888;
    }

#video {
    background:black;
    padding:0;
    margin:0px 0px 0px 25px;
    float:right;
    width:375px;
    height:200px;
    border-radius:10px;
    -moz-box-shadow:  inset 0 0 5px 5px #888;
    -webkit-box-shadow: inset 0 0 5px 5px#888;
    box-shadow:  inset 0 0 5px 5px #888;
    }

#video iframe {
    margin:6px 0 0 6px;
    }

#map {
    padding:0;
    margin:0px 25px 0px 0px;
    border-radius:10px;
    float:left;
    width:375px;
    height: 200px;
    -moz-box-shadow:  inset 0 0 5px 5px #888;
    -webkit-box-shadow: inset 0 0 5px 5px#888;
    box-shadow:  inset 0 0 5px 5px #888;
    }

.top {
    margin:auto;
    height:700px;
    width:900px;
    padding:0;
    position:absolute;
    }
.hidden{
    display : none;
} 
```

我还修复了 HTML 部分的嵌入问题

```
<div id="wrapper">
    <div id="container">
        <img src="./images/Logo_door.png" class="top">

        <section id="main" class="hidden">
        <!-- main content here -->
        </section>

        <footer id="footer" class="hidden">
        <!-- where video and map will go -->
            <div id="video">
                <iframe class="hidden" width="363" height="187" src="http://www.youtube.com/embed/Pd00CAw15-E?wmode=transparent" frameborder="0" allowfullscreen></iframe>
            </div>
            <div id="map">
            </div>
        </footer>
    </div>  
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:12:56.487

将初始不透明度设置`opacity: 0`为要在初始页面加载中隐藏的内容，然后将其更改为何`opacity: 1`时`document.ready`或被`window.ready`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T02:23:57.420

通常我不喜欢给出一个句子的答案... [http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

# ruby - 是否有一种惯用的方式来操作 Ruby 中的 2 个数组？

> ID：12966412
> 
> 赞同：5
> 
> 时间：2012-10-19T02:10:22.027
> 
> 标签：ruby, iterator, ruby-1.9.3, enumerable

```
a = [3, 4, 7, 8, 3]
b = [5, 3, 6, 8, 3] 
```

假设数组长度相同，有没有办法使用`each`或其他惯用方式从两个数组的每个元素中获取结果？不使用计数器？

例如，要获取每个元素的乘积：`[15, 12, 42, 64, 9]`

`(0..a.count - 1).each do |i|`太丑了……

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T02:17:00.893

如何使用[`Array.zip`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-zip)：

```
>> a = [3,4,7,8,3]
=> [3, 4, 7, 8, 3]
>> b = [5,3,6,8,3]
=> [5, 3, 6, 8, 3]
>> c = []
=> []
>> a.zip(b) do |i, j| c << i * j end
=> [[3, 5], [4, 3], [7, 6], [8, 8], [3, 3]]
>> c
=> [15, 12, 42, 64, 9] 
```

注意：我*不是*一个 Ruby 程序员，所以对于我践踏的任何成语，我深表歉意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T04:06:50.070

出于性能原因，`zip`可能会更好，但`transpose`保持对称且更易于理解。

```
[a, b].transpose.map{|a, b| a * b}
# => [15, 12, 42, 64, 9] 
```

`zip`和之间的区别在于`transpose`，如果数组的长度不同，则前者`nil`默认插入，而后者会引发错误。根据情况，您可能会偏爱其中一个。

# actionscript-3 - 将拼接的数组推入数组给我留下了一个三倍嵌套的数组

> ID：12966414
> 
> 赞同：0
> 
> 时间：2012-10-19T02:10:27.923
> 
> 标签：actionscript-3

我从数组数组中删除一个数组到一个空数组

```
var _open:Array = [[x, y]];
var _closed:Array = [];

_closed.push(_open.splice(0, 1)); 
```

这给我留下了数组 _closed 是：

```
[[[x, y]]] 
```

有谁知道为什么？因为如果我在不使用拼接功能的情况下推动某些东西，我会得到我所期望的，没有额外的嵌套。例如：

```
_closed.push([8,13]);
// _closed is [[8,13]] 
```

顺便说一句，AS3 中的跟踪（主要是数组）会变得非常烦人，所以我使用这个函数来了解数组中是否存在一些嵌套：

```
public static function traceArray(aArray:Array):void
{
    for (var t:Object in aArray) {
        trace(t + " : " + aArray[t]);
        if (typeof(aArray[t]) == "object") {
            traceArray(aArray[t]);
        }
    }
    trace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:19:43.790

是的，如果您查看[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)，您会看到它`Array.splice`返回一个数组，而不是数组的元素（即使拼接的长度仅为 1）。

这将做你想要的，虽然可能不是你所追求的解决方案：

```
_closed.push(_open.splice(0, 1)[0]); 
```

更适合您需求的是使用

```
_closed.push(_open.shift()) 
```

或者

```
_closed.push(_open.pop()) 
```

取决于您是否希望第一个或最后一个元素`_open`具有多个元素。虽然从名称 _open 和 _closed 来看，我猜你需要从 _open 中的任意位置拉出一个元素（一旦它被关闭）......为此，你应该使用第一个解决方案。

# iphone - AFNetworking 与 iOS 4.3 不兼容

> ID：12966419
> 
> 赞同：24
> 
> 时间：2012-10-19T02:10:46.640
> 
> 标签：iphone, ios, objective-c, afnetworking, cocoapods

我正在使用 CocoaPods 安装 AFNetworking 库。这是我的简单 CocoaPods 文件：

```
platform :ios
pod 'FMDB'
pod 'AFNetworking' 
```

我的 Pods 项目和我的主项目是 iOS 6 部署目标和基础 SDK。当我运行 pod install 时，出现以下错误：

> ```
> AFNetworking not compatible with iOS 4.3 
> ```

更新：

我将我的 Podfile 编辑为：

```
platform :ios, '6.0'
pod 'FMDB'
pod 'AFNetworking' 
```

现在，当我运行 pod install 时，它显示以下内容：

更新规范 repo `master'

Cocoapods 0.15.1 可用。

使用 AFNetworking (1.0) 使用 FMDB (2.0) 生成支持文件

但它从未将 AFNetworking pod 添加到 xCode 中的 pods 项目中。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-19T02:24:15.780

AFNetworking 1.0 及更高版本需要 iOS 5.0 及更高版本，或 Mac OS 10.7（具有现代 Cocoa 运行时的 64 位）及更​​高版本。

为了与 iOS 4.3 兼容，请使用最新的 0.10.x 版本。

*来自：* [https](https://github.com/AFNetworking/AFNetworking) ://github.com/AFNetworking/AFNetworking ：

更新，在 Podfile 中指定 iOS 依赖项：

```
platform :ios, '6.0'

pod 'FMDB'
pod 'AFNetworking' 
```

更新 2，我创建了一个新项目和一个新 Podfile，运行`pod install`：

```
$ pod install
Resolving dependencies of `./Podfile'
Updating spec repositories
Resolving dependencies for target `default' (iOS 6.0)
Downloading dependencies
Installing AFNetworking (1.0)
Installing FMDB (2.0)
Generating support files

[!] From now on use `AF.xcworkspace'.
Integrating `libPods.a' into target `AF' of Xcode project `./AF.xcodeproj'. 
```

更新 3，

![截屏](../Images/32a030e6b16709df57f8208a1f0cd3f7.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-22T22:56:10.360

指定所需 pod 的版本可能会有所帮助。

```
platform :ios, '6.0'
pod 'FMDB', '~> 2.0'
pod 'AFNetworking', '~> 1.1.0' 
```

还要确保您打开了正确的`xcworkspace`文件。

# c# - 在 Windows 系统上注销用户后立即让系统进入睡眠状态

> ID：12966423
> 
> 赞同：1
> 
> 时间：2012-10-19T02:11:38.703
> 
> 标签：c#, c++, sleep, logoff

我有一个与用户模式模块一起运行的服务应用程序。该软件允许执行专门的电源操作，用户模式代码首先注销 Windows 用户，然后服务应用程序将系统置于睡眠模式。

这种情况在某些系统上运行良好，但在其他系统上睡眠操作失败。有时睡眠会成功，但是当我唤醒系统并尝试再次执行它时，睡眠 API (SetSuspendState) 挂起并且永远不会返回，而系统仍在运行。

在进行测试时，我设置了一个硬编码延迟（使用 Sleep(5000) API），这似乎可以解决大多数系统上的问题，但在其他系统上我仍然得到相同的结果。在这种情况下，我讨厌引入更长的延迟，因为它并没有真正解决问题，或者回答为什么它首先发生的问题。另外，我敢肯定那里有一个“慢”系统，即使是 10 秒也不够……

那么，有谁知道如何在 sleep API 中修复这些故障？

PS。我在最新版本的 Windows 7 上运行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:46:06.697

使用[`SystemEvents Class`](http://msdn.microsoft.com/en-us/library/ycy63t34.aspx)..我希望它对你有用..

```
Microsoft.Win32.SystemEvents.SessionEnded+=
                       new SessionEndedEventHandler(SystemEvents_SessionEnded); 
```

和处理程序方法..

```
private void SystemEvents_SessionEnded(object sender, SessionEndedEventArgs e)
{
    if (e.Reason == SessionEndReasons.Logoff)
    {
        //this may sleep the system even when user logs off manually.
        Application.SetSuspendState(PowerState.Suspend, true, true);
    }
} 
```

你需要导入`using Microsoft.Win32;`命名空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:11:47.653

可能是有什么东西阻止了系统进入睡眠状态。驱动程序可以禁止系统休眠，而某些系统根本无法休眠。

当您遇到 SetSuspendState 不正常运行的情况时，请运行“powercfg -energy”和“powercfg -requests”。该实用程序在诊断睡眠问题时非常方便，因此您还应该查看“powercfg /？” 看到它所有的特殊能力。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T05:40:23.643

我必须将其发布为我自己问题的答案，因为该解决方案对我有用。这是一种有点麻烦的方法，所以如果有人可以发布不同的解决方案，我将不胜感激。

因此，简而言之，在注销用户之前，需要收集他们的会话 ID。然后为用户帐户发出一个 API 以注销，同时需要侦听并等待来自另一个线程的 WTS_SESSION_LOGOFF 通知并继续这样做，直到会话（先前收集的）被注销。

但这还不是全部。出于某种未知原因（我无法找到相关文档），之后我们需要等待具有 WTSConnected 状态且没有用户名的会话。只有这样我们才能调用 SetSuspendState 进行睡眠或休眠。

# ruby-on-rails - 作业神奇地从队列中消失（heroku 上的 delayed_job mongoid 2）

> ID：12966424
> 
> 赞同：0
> 
> 时间：2012-10-19T02:11:45.707
> 
> 标签：ruby-on-rails, ruby, heroku, mongoid, delayed-job

可以说我做类似的事情

```
arrs = Article.where(:body => nil) 
```

我会有 arrs.count 假设是 900 我会

```
arrs.each do |ar|
  ar.delay.download_via_diffbot #a method that takes some time, does some http, and writes a non-nil value to ar.body
end 
```

现在我会看日志，然后在 ~5 dynos 上等待几分钟来完成工作，然后再次计数：arrs.count 现在是 ~800

## 所以wtf，我以为我只是告诉我的工人做〜900个工作，其他800个怎么了？

我可以确认我只发出了约 100 个 HTTP 请求 b/c api 报告向我展示了这一点，也只需查看日志就足以说明 900 个工作没有发生。

* * *

## 我正在关注 Delayed::Job.count 并且从该循环中只创建了大约 100 个，即使有数百个工作开始

我是否错误地创建了这么多同时工作？一次创造这么多工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:54:10.020

Mongoid criteria are lazy loaded/evaluated. That is to say if you set `articles = Article.where(body: nil)`, articles is a criteria. It is not the set of documents you get from db. So if you delete some articles with body `nil` or fill in body of some articles, `articles.count` will fire another db query and only report number of articles for which body is nil. Reducing count is to be expected if your delayed workers are successfully doing their job and filling up body content.

PS: Question was not very clear, I just answered to what I comprehended the problem is.

**UPDATE**

You can check the delayed job count to see how many jobs are pending at any time by `Delayed::Job.count`. If you are not deleting the failed jobs, you can check the count of failed jobs by `Delayed::Job.where(:failed_at.ne => nil).count`. To see more details about failed jobs, you can inspect the job, it will have the handler and last error.

# php - SQLite 和 PHP 列表类别

> ID：12966431
> 
> 赞同：1
> 
> 时间：2012-10-19T02:13:19.370
> 
> 标签：php, sqlite

我想列出每个类别的每个类别以及每个类别下面的每个常见问题解答。现在下面的代码只是按类别列出所有问答，而不是类别名称。有一个简单的解决方法吗？我是一个完全的新手，非常感谢一些帮助！

```
<? $result = sqlite_query($db, "SELECT * FROM faqs ORDER BY faqcategory DESC");
                            while($row = sqlite_fetch_array($result)) {?>
                            <div class="midBoxContent">
                                <ul>
                                    <li><?php echo $row['faqquestion'];?></li>
                                </ul>
                                <p><?php echo $row['faqanswer']; ?></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:30:19.083

```
<? $faqc = "";
$result = sqlite_query($db, "SELECT * FROM faqs ORDER BY faqcategory DESC");
   while($row = sqlite_fetch_array($result)) {?>
<?php
// check if the category is changing...
if ($faqc != $row['faqcategory']){
  // it's changed, write it out..
 echo  $row['faqcategory'];
 $faqc = $row['faqcategory'];
}
?>
   <div class="midBoxContent">
     <ul>
      <li><?php echo $row['faqquestion'];?></li>
     </ul>
      <p><?php echo $row['faqanswer']; ?></p> 
```

# jquery - 将表单数据转换为 JSON 对象

> ID：12966433
> 
> 赞同：26
> 
> 时间：2012-10-19T02:13:36.423
> 
> 标签：jquery, html, json, forms

我正在尝试将`HTML`表单数据转换为`JSON`对象，我有[这个线程](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)，但我不知道为什么它不适合我。我正在使用以下代码。

```
<form id="myform" action="" method="post">
    <div class="form-field">
        <label for="title">Title</label>
        <input name="title" id="title" type="text" value="" size="40" aria-required="true">
    </div>
    <div class="form-field form-required">
        <label for="your-name">Your Name</label>
        <input name="yourName" id="yourName" type="text" value="" size="40" aria-required="true">
    </div>
    <div class="form-field">
        <label for="contact-no">Contact No:</label>
        <input name="contact" id="contact" type="text" value="" size="40" aria-required="true">
    </div>
    <div class="form-field">
        <label for="description">Description:</label>
        <textarea name="description" id="description" rows="1" cols="40" aria-required="true"></textarea>
    </div>
    <div class="form-field">
        <label for="email">Email:</label>
        <input name="email" id="email" type="text" value="optional" size="40" aria-required="true">
    </div>
    <div class="form-field">
        <label for="city">City:</label>
        <input name="city" id="city" type="text" value="" size="40" aria-required="true">
    </div>
    <div class="form-field">
        <label for="country">Country:</label>
        <input name="country" id="country" type="text" value="" size="40" aria-required="true">
    </div>
    <div class="form-field">
        <label for="pic1">Picture 1:</label>
        <input type="file" name="pic1" id="pic1">
    </div>
    <div class="form-field">
        <label for="pic2">Picture 2:</label>
        <input type="file" name="pic2" id="pic2">
    </div>
    <div class="form-field">
        <label for="pic3">Picture 3:</label>
        <input type="file" name="pic3" id="pic3">
    </div>
    <div class="form-field">
        <label for="pic4">Picture 4:</label>
        <input type="file" name="pic4" id="pic4">
    </div>
    <div class="form-field">
        <label for="pic5">Picture 5:</label>
        <input type="file" name="pic5" id="pic5">
    </div>
    <div class="form-field">
        <label for="demand">Your Demand:</label>
        <input name="demand" id="demand" type="text" value="" size="40" aria-required="true">
    </div>
    <p class="submit">
        <input type="submit" name="postAd" id="postAd" class="button" value="Post Ad For Review">
    </p>
    <div id="results">hello</div>
</form> 
```

```
$(document).ready(function(){
    $.fn.serializeObject = function() {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name] === undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                alert(this.name);
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

    $('#myform').submit(function() {
        $('#result').text(JSON.stringify($('#myform').serializeObject()));
        return false;
    });
}); 
```

我试图调试它，我注意到当我的函数运行时，它总是运行 else 语句中的代码。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-04-26T18:59:35.970

我在 JSFiddle 中添加了上面的表单，它将 JSON 数据显示为输出。

[工作 JSFiddle](http://jsfiddle.net/akhildave/sxGtM/5002/)

```
$(function() {
  $('form').submit(function() {
     $('#result').text(JSON.stringify($('form').serializeObject()));
    return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-05T20:10:16.960

使用这个 jQuery 插件 [.serializeJSON()](https://github.com/marioizquierdo/jquery.serializeJSON)将表单数据转换为 JSON 对象。

```
<form id="my-profile">
<!-- simple attribute -->
    <input type="text" name="fullName" value="Mario Izquierdo" />

<!-- nested attributes -->
    <input type="text" name="address[city]" value="San Francisco" />
    <input type="text" name="address[state][name]" value="California" />
    <input type="text" name="address[state][abbr]" value="CA" />
</form> 
```

Javascript：

```
$('#my-profile').serializeJSON();

// returns =>
{
    fullName: "Mario Izquierdo",

    address: {
    city: "San Francisco",
    state: {
    name: "California",
    abbr: "CA"
    }
} 
```

`serializeJSON()` function returns a JSON object.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-17T19:55:02.097

工作 Jsbin 示例[http://jsbin.com/oTimiGE/1/edit](http://jsbin.com/oTimiGE/1/edit)

试试jquery`serializeArray()`方法

[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

```
$('form').submit(function() {
  console.log($(this).serializeArray());
  return false;
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-31T09:11:24.410

**For google searchers,**

I've created JSON Array with serialized form like this,

```
 var jsonArray = [];

   var splittedFormData = $("#formToPost").serialize().split('&');

            $.each(splittedFormData, function (key, value) {

                item = {};
                var splittedValue = value.split('=');               
                item["name"] = splittedValue[0];
                item["value"] = splittedValue[1];
                jsonArray.push(item);
            });

   console.log(jsonArray) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-17T19:49:22.037

```
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

$(function() {
    $('form').submit(function() {
        $('#result').text(JSON.stringify($('form').serializeObject()));
        return false;
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T02:20:31.207

也许只是使用 jquery 序列化功能？

```
$("#myform").serialize() 
```

拥有 JSON 对象后，您可以稍后进行其他处理。

# ios - 将我的 iOS 应用作为内部应用分发给多个客户

> ID：12966434
> 
> 赞同：3
> 
> 时间：2012-10-19T02:13:43.080
> 
> 标签：ios, app-store, enterprise

我正在开发一个 iOS 应用程序以许可给多个客户。我**不想**在公共或商业应用程序商店中分发它，所以我唯一合法的途径似乎是我的客户在 iOS 开发者企业计划中注册的内部应用程序途径，我用他们的配置签署我的应用程序轮廓。这大概会允许我的客户将我的应用程序分发给他们的员工。尽管我已经阅读了许多成功完成此操作的人的帖子，但我有一些问题：

1.  我*不是*为任何一个客户开发定制软件。因此，我将软件分发给 App Store 之外的多个客户。这是否与 Apple 开发内部应用程序的意图相违背？如果是这样，Apple 是否有任何语言可以说明这一点？我在企业开发人员计划协议中没有发现任何与我的方案相关的内容。

2.  如果客户出于签名目的与我共享他们的证书/配置文件/私有，这是否与 Apple 发生冲突？[此线程](https://stackoverflow.com/questions/6577945/ios-in-house-distribution-of-app-developed-by-external-vendor?rq=1)中的一条消息表明 Apple 可能会吊销已共享的证书，即使此处没有恶意。

对于那些可能想知道为什么我不只使用 B2B 商店的人，这条路线似乎给我带来了两个问题：

*   如果在我的应用程序中发现了足够严重的错误，我需要进行修补程序以符合我对客户的 SLA。App Store 审查期让这变得困难。

*   我的应用程序有一个本地服务器组件，其版本因客户而异。由于 App Store 仅分发我的应用程序的最新版本，因此它必须向后兼容我的服务器的所有现有版本。向后兼容性原则是一种很好的做法，但它会显着影响我的 QA 矩阵，因此我想控制哪个客户获得哪个应用程序版本。

我感谢您对此的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:23:29.227

您可以通过 testflightapp 部署您的应用程序。您的所有客户都将作为您项目的测试人员。

# twitter - 用于分析的 Twitter 数据集收集

> ID：12966435
> 
> 赞同：2
> 
> 时间：2012-10-19T02:13:43.923
> 
> 标签：twitter

我正在为 Twitter 收集数据集。基本上我想将当前日期的所有推文存储回推特限制（我猜是 14 天）。

我将使用这些数据进行分析。

发现这个：

[https://twitter.com/search-advanced](https://twitter.com/search-advanced) http://www.quora.com/Twitter-1/Whats-the-best-way-to-crawl-Twitter

但对我不是很有帮助。

# java - 任何人都知道 Oracle/Sun 是否发布了他们用于 Java 库类的（junit）测试类？

> ID：12966440
> 
> 赞同：1
> 
> 时间：2012-10-19T02:14:26.483
> 
> 标签：java, junit, hashmap, hashcode

我想知道的原因是，在整个商店搜索允许您指定自己的等于/哈希码函数的 LinkedHashMap/LinkedHashSet 的实现之后，我找不到一个。

我发现有几个库只为 HashMap 实现了这一点，还有一个承诺在未来的某个时候为 LinkedHashMap 实现它，但仍然没有。

所以我决定只修改HM源并自己做，然后再实现LHM。

如果我可以窃取此代码的预先存在的测试类，然后添加/修改它们，那就太酷了。因此这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T02:27:30.697

如果您正在寻找`Map`测试，您可能会比[Guava 的 MapTestSuiteBuilder](http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/collect/testing/MapTestSuiteBuilder.java)做得更差。您还可以在包中找到[SetTestSuiteBuilder](https://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/collect/testing/SetTestSuiteBuilder.java)和其他方便的工具来测试[与其相邻的](https://code.google.com/p/guava-libraries/source/browse/#git%2Fguava-testlib%2Fsrc%2Fcom%2Fgoogle%2Fcommon%2Fcollect%2Ftesting)集合，以及附近的方便[的](https://code.google.com/p/guava-libraries/source/browse/#git%2Fguava-testlib%2Fsrc%2Fcom%2Fgoogle%2Fcommon%2Ftesting)[EqualsTester](https://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/EqualsTester.java) 。（有关如何使用测试的示例，请参见 Louis 的[链接。）](http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/collect/testing/TestsForMapsInJavaUtil.java#132)

您也可以考虑制定一个`LinkedHashMap`恰好包含 Guava[`Equivalence.Wrapper`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Equivalence.Wrapper.html)类型对象的标准。基本上，您创建一个[`Equivalence`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Equivalence.html)包含您自己设计的`equals`and`hashCode`方法的实现，然后使用它为您希望保留在 set/map 中的每个对象创建轻量级包装器。包装器上的`equals`and`hashCode`将使您的`Set`/`Map`行为保持您想要的方式，然后您可以打开实例以供以后使用。

（当然，您也可以跳过 Guava 并编写一个单字段包装器对象来实现`equals`and `hashCode`，但 Guava 已经为您编写了一个。）

# mpi - 在 MPI 中，reduce 和 scan 有何不同？

> ID：12966446
> 
> 赞同：2
> 
> 时间：2012-10-19T02:15:42.347
> 
> 标签：mpi

我正在自学 MPI。我正在阅读有关减少和扫描的 Python 文档： [http ://documen.tician.de/boostmpi/reference.html#boostmpi.scan](http://documen.tician.de/boostmpi/reference.html#boostmpi.scan)

reduce 和 scan 似乎都采用了一些函数（op），并使用它将从各个进程获得的值减少为单个值。

减少和扫描有何不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T02:37:41.787

减少意味着所有处理器获得相同的值，而扫描返回每个处理器上的部分操作结果。例如，如果您有 10 个处理器并且您正在计算它们的排名之和，`MPI_Reduce`那么只会在根进程上为您提供标量 45 (0+1+2+3+4+5+6+7+8+9) while`MPI_scan`会给你减少到每个处理器上处理器等级的标量。所以处理器 0 会得到 0，处理器 1 会得到 1，处理器 2 会得到 3，以此类推。处理器 9 将获得 45。

换句话说，如果您要列出从中找到的所有处理器值，则为`MPI_Scan`：

```
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45] 
```

扫描结果来自`[0, 0+1, 0+1+2, 0+1+2+3, ..., 0+1+2+3+4+5+6+7+8+9]`

在 Python 中，结果列表`MPI_Reduce`将是（假设处理器 0 是根）：

```
[45, None, None, None, None, None, None, None, None, None] 
```

而其他语言`recvbuf`将在除根以外的所有处理器上包含未定义的数据。

# c++ - C++ 模板泛型（模板参数列表）

> ID：12966447
> 
> 赞同：0
> 
> 时间：2012-10-19T02:15:44.987
> 
> 标签：c++, templates, generics, compiler-errors, linked-list

我正在尝试实现一个循环双向链接列表，而我可能没有链接列表实现本身。我遇到的问题是允许它使用模板获取通用参数。我已经检查了几个处理模板的教程，但我没有找到任何特定于我正在尝试做的事情。

我相信我已经解决了大部分错误，但我仍然收到错误：

```
linkedlist.h(37): error C2955: 'Node' : use of class template requires template argument list
linkedlist.h(9) : see declaration of 'Node'
main.cpp(6) : see reference to class template instantiation 'LinkedList<T>' being compiled
      with
      [
          T=int
      ] 
```

这是我的代码：

链表.h：

```
#ifndef LINKEDLIST_H
#define LINKEDLIST_H

#include <iostream>

//node
template <class T>
class Node
{
private:

public:
    bool first;             //boolean tag 
    Node * next;            //pointer to the next node
    Node * prev;            //pointer to the prev node
    T data;                 //placeholder for generic data

    Node(T d);          //constructor
};

template <class T>
Node<T>::Node(T d)
{
    next = NULL;
    prev = NULL;
    data = d;
    first = false;
}

//a circular doubly-linked list
template <class T>
class LinkedList
{
private:

public:
    Node * p;                   //reference to the current node

    LinkedList();               //constructor

    bool empty();               //returns true if the list is empty, false otherwise
    int size();                 //returns the number of elements in the list    
    void insertBefore(T d); //inserts a node before the current node
    void insertAfter(T d);  //inserts a node after the current node
    void remove();              //removes the current node
    void moveAhead();           //moves to the next node
    void moveBack();            //moves to the previous node
    T access();             //returns the data of the current node
    void listContents();        //displays the data of every element in the list starting with the current
};

template <class T>
LinkedList<T>::LinkedList()
{
    p = NULL;
}

template <class T>
bool LinkedList<T>::empty()
{
    if (p == NULL)
    {
        std::cout << "List is Empty.\n";
        return true;
    }
    else
        return false;
}

template <class T>
int LinkedList<T>::size()
{
    if (p == NULL)
    {
        return 0;
    }
    if (p->next == p)
    {
        return 1;
    }
    else
        return 2; //placeholder
}

template <class T>
void LinkedList<T>::insertBefore(T d)
{
    Node *q, *t;
    if (p == NULL)
    {
        p = new Node<T>(d);
        p->next = p;
        p->prev = p;
        //std::cout << d << " inserted.\n";
    }
    else
    {
        if (p-> next == p)
        {
            q = new Node<T>(d);
            q->next = p;
            q->prev = p;
            p->next = q;
            p->prev = q;
            //std::cout << d << " inserted.\n";
        }
        else
        {
            q = p->prev;
            t = new Node<T>(d);
            p->prev = t;
            q->next = t;
            t->next = p;
            t->prev = q;
            //std::cout << d << " inserted.\n";
        }
    }
}

template <class T>
void LinkedList<T>::insertAfter(T d)
{
    Node *q, *t;
    if (p == NULL)
    {
        p = new Node<T>(d);
        p->next = p;
        p->prev = p;
        //std::cout << d << " inserted.\n";
    }
    else
    {
        if (p-> next == p)
        {
            q = new Node<T>(d);
            q->next = p;
            q->prev = p;
            p->next = q;
            p->prev = q;
            //std::cout << d << " inserted.\n";
        }
        else
        {
            q = p->next;
            t = new Node<T>(d);
            p->next = t;
            q->prev = t;
            t->next = q;
            t->prev = p;
            //std::cout << d << " inserted.\n";
        }
    }
}

template <class T>
T LinkedList<T>::access()
{
    if (p == NULL)
    {
        std::cout << "The list is empty. No data to be accessed.\n";
        return NULL;
    }
    else
        return p->data;
}

template <class T>
void LinkedList<T>::remove()
{
    if (p == NULL)
        std::cout << "The list is empty. No node exists to be removed.\n";
}

template <class T>
void LinkedList<T>::moveAhead()
{
    p = p->next;
}

template <class T>
void LinkedList<T>::moveBack()
{
    p = p->prev;
}

template <class T>
void LinkedList<T>::listContents()
{
    if (p == NULL)
    {
        std::cout << "This list is empty, there are no elements to be displayed.";
    }
    else
    {
        Node *q;
        p->first = true;;
        q = p;
        while (!q->next->first)
        {
            //std::cout << q->data << ", ";
            q = q->next;
        }
        //std::cout << q->data << ".\n";
        p->first = false;
    }
}

#endif 
```

主.cpp：

```
#include <iostream>
#include "LinkedList.h"

int main()
{
    LinkedList<int> list;

    list.empty();
    std::cout << "p list size is: " << list.size() << std::endl;
    list.remove();
    list.access();
    list.insertBefore(3);
    list.insertBefore(2);
    list.moveBack();
    list.insertBefore(1);
    list.moveBack();
    list.moveAhead();
    list.moveAhead();
    list.insertAfter(5);
    list.insertAfter(4);
    list.moveBack();
    list.moveBack();
    list.listContents();

    system("PAUSE");
    return 0;
} 
```

据我所知，我没有做错太多，我只需要纠正这几个错误。如果我做错了什么，如果你能指出来，或者将我引导到适当的资源，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:19:03.047

错误很明显。您`Node`在里面的几个地方`LinkedList`使用它而不使用它与模板参数。

例如：

```
template <class T>
void LinkedList<T>::insertBefore(T d)
{
    Node *q, *t; 
```

应该

```
template <class T>
void LinkedList<T>::insertBefore(T d)
{
    Node<T> *q, *t; 
```

其他地方也是如此，*除了*在`Node`类声明和`Node`函数定义中（在函数定义中，第一个必须有它）。

# asp.net-mvc - Web 部署/发布正在添加未知的连接字符串？

> ID：12966449
> 
> 赞同：20
> 
> 时间：2012-10-19T02:16:31.290
> 
> 标签：asp.net-mvc, msdeploy, web-deployment

以前发布我的 web api 应用程序运行良好。今天我将我的应用程序从“任何 cpu”转换为 x86。现在，当我发布它时，它会将连接字符串添加到导致我的应用程序失败的 Web 配置中。起初我虽然可能不小心在 web.config 转换文件中添加了一些东西，但我没有。这是我的转换文件：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <!--
    In the example below, the "SetAttributes" transform will change the value of
    "connectionString" to use "ReleaseSQLServer" only when the "Match" locator
    finds an attribute "name" that has a value of "MyDB".

    <connectionStrings>
      <add name="MyDB"
        connectionString="Data Source=ReleaseSQLServer;Initial Catalog=MyReleaseDB;Integrated Security=True"
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
    </connectionStrings>
  -->
  <entityFramework xdt:Transform="Replace">
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Server=MyWebServer;Database=RunLog;Trusted_Connection=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>

  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
    <!--
      In the example below, the "Replace" transform will replace the entire
      <customErrors> section of your web.config file.
      Note that because there is only one customErrors section under the
      <system.web> node, there is no need to use the "xdt:Locator" attribute.

      <customErrors defaultRedirect="GenericError.htm"
        mode="RemoteOnly" xdt:Transform="Replace">
        <error statusCode="500" redirect="InternalError.htm"/>
      </customErrors>
    -->
  </system.web>
</configuration> 
```

这是我的网络配置文件：

```
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
  </system.web>
  <system.webServer>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

最后，在我发布后，这是我的网络配置文件的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <system.web>
    <compilation targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
  </system.web>
  <system.webServer>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Server=MyWebServer;Database=RunLog;Trusted_Connection=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <connectionStrings>
    <add name="RunLog" connectionString="RunLog_ConnectionString" providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

如果您查看上方，您将看到添加了一个连接字符串。

经过一些研究，我发现您可以添加连接字符串 durinig publish。好吧，我一直在使用相同的配置文件发布，所以我多次删除了配置文件并创建了一个新配置文件，并确保取消选中该框以添加连接字符串： ![出版](../Images/4bdcb6fce0cf9dcb1b2a03aa608d7569.png)

```
<?xml version="1.0" encoding="utf-8"?>
<!--
This file is used by the publish/package process of your Web project. You can customize the behavior of this process
by editing this MSBuild file. In order to learn more about this please visit http://go.microsoft.com/fwlink/?LinkID=208121\. 
-->
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <WebPublishMethod>MSDeploy</WebPublishMethod>
    <SiteUrlToLaunchAfterPublish />
    <MSDeployServiceURL>http://MyWebServer</MSDeployServiceURL>
    <DeployIisAppPath>My Web Site/Go</DeployIisAppPath>
    <RemoteSitePhysicalPath />
    <SkipExtraFilesOnServer>False</SkipExtraFilesOnServer>
    <MSDeployPublishMethod>RemoteAgent</MSDeployPublishMethod>
    <UserName>JohnBob</UserName>
    <_SavePWD>False</_SavePWD>
    <PublishDatabaseSettings>
      <Objects xmlns="">
        <ObjectGroup Name="RunLog" Order="1" Enabled="False">
          <Destination Path="" />
          <Object Type="DbCodeFirst">
            <Source Path="DBContext" DbContext="RunLog.DL.RunLogContext, RunLog.DL" Origin="Convention" />
          </Object>
        </ObjectGroup>
      </Objects>
    </PublishDatabaseSettings>
  </PropertyGroup>
  <ItemGroup>
    <MSDeployParameterValue Include="$(DeployParameterPrefix)RunLog-Web.config Connection String">
      <UpdateDestWebConfig>False</UpdateDestWebConfig>
    </MSDeployParameterValue>
  </ItemGroup>
  <ItemGroup>
    <_ConnectionStringsToInsert Include="RunLog" />
  </ItemGroup>
</Project> 
```

如您所见，那里有连接内容，但我特别取消选中“在运行时使用此连接字符串（更新目标 Web 配置）。如果我删除添加的连接字符串，我的网站将完美运行。

有谁知道发生了什么事？

编辑：
我想也许我做错了什么，但在今晚完成之后，我认为这是一个错误。我决定回滚我所有的代码，看看我是否可以重现这个问题。以前在属性的“打包/发布 Web”选项卡中，选择了“包含在打包/发布 SQL 选项卡中配置的所有数据库：”。在“打包/发布 SQL”选项卡中，“数据库条目”中定义了一个连接字符串，但是它是空白的。如果我保持原样并尝试发布一切正常。如果我删除连接字符串并重新添加它，事情就会再次混乱。在上面的对话框中，如果数据库部分为空白，一切正常您正在创建配置文件，但如果它有远程连接字符串框，那么事情将无法正常工作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T21:16:59.967

通过编辑 XML 将此项目属性添加到 .csproj 文件：

```
<Project>
  <PropertyGroup>

    <AutoParameterizationWebConfigConnectionStrings>false</AutoParameterizationWebConfigConnectionStrings>

    ...
  </PropertyGroup>
  ...
</Project> 
```

或者，使用[相关 StackOverflow 问题](https://stackoverflow.com/questions/3620363/can-ms-deploy-do-a-package-and-transform-but-not-deploy)中所述的 Web Publishing Pipeline 目标文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-11T15:19:41.710

编辑项目 .csproj 文件并添加：

```
<PropertyGroup>
<InsertAdditionalWebCofigConnectionStrings>false</InsertAdditionalWebCofigConnectionStrings> 
```

它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-08T22:08:02.467

对我有用的解决方案虽然更像是一种 hack，但它是使用 Web 部署转换来删除流氓连接字符串。请参阅 user2395249 答案：

[vs 2012中的一键发布：如何删除_ConnectionStringsToInsert？](https://stackoverflow.com/questions/10910336/one-click-publish-in-vs-2012-how-to-remove-connectionstringstoinsert)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-08T09:23:39.153

在 .pubxml 文件中，由于某种原因添加了一些额外的连接字符串。删除所有这些，它应该可以正常工作，仍然会添加默认的连接字符串。

我有一种预感，当我稍微摆弄一下我的发布信息时，它已被添加到 .pubxml 中，但当我切换回我的常规发布设置时它并没有被删除。

```
<ItemGroup>
    <MSDeployParameterValue Include="$(DeployParameterPrefix)DefaultConnection-Web.config Connection String" />
    <MSDeployParameterValue Include="$(DeployParameterPrefix)MyProject-Web.config Connection String" />
    <MSDeployParameterValue Include="$(DeployParameterPrefix)MyProject_dev-Web.config Connection String" />
  </ItemGroup>
  <ItemGroup>
    <_ConnectionStringsToInsert Include="MyProject" />
    <_ConnectionStringsToInsert Include="Myproject_dev" />
  </ItemGroup> 
```

# delphi - IdMappedPortTCP - 无事件

> ID：12966450
> 
> 赞同：1
> 
> 时间：2012-10-19T02:16:34.940
> 
> 标签：delphi, proxy, indy

我有一个 indy 组件：

```
IdMappedPortTCP1: TIdMappedPortTCP; 
```

和以下初始化：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  Memo1.Lines.Clear;
  IdMappedPortTCP1.MappedHost := '189.200.10.71';
  IdMappedPortTCP1.MappedPort := 5300;
  IdMappedPortTCP1.Active := true;
end;

procedure TForm1.IdMappedPortTCP1Execute(AContext: TIdContext);
begin
  Memo1.Lines.Add(AContext.Data.ToString);
  Memo1.Lines.Add('------');
end;

procedure TForm1.IdMappedPortTCP1OutboundData(AContext: TIdContext);
begin
  Memo1.Lines.Add(AContext.Data.ToString);
  Memo1.Lines.Add('+++++++'); //
end; 
```

我的其他应用程序连接到 189.200.10.71:5300 但组件没有触发...

我的错在哪里？

将 XE3 与包含 indy 组件一起使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:35:51.410

一旦客户端连接到它，这些`MappedHost/MappedPort`属性就会告诉`TIdMappedPortTCP`它连接到哪里。您正在告诉`TIdMappedPortTCP`连接到`189.200.10.71:5300`. 如果您的其他应用程序也正在连接，`189.200.10.71:5300`则它完全绕过`TIdMappedPortTCP`。这就解释了为什么事件没有触发（顺便说一句，`TIdMappedPortTCP`是一个多线程组件，但您的事件处理程序不是线程安全的）。

要通过`TIdMappedPortTCP`，客户端需要连接到`TIdMappedPortTCP.Bindings`集合正在侦听的 IP/端口，而不是分配给`MappedHost/MappedPort`属性的 IP/端口。

# ms-access - msaccess 数据库查询中的日期格式损坏

> ID：12966451
> 
> 赞同：2
> 
> 时间：2012-10-19T02:16:39.447
> 
> 标签：ms-access

在导出数据之前，我使用以下表达式在 msaccess 查询中格式化日期

```
Expr1: Right$([order details]![requested delivery date],4)+Mid$([order details]![requested delivery date],4,2)+Mid$([order details]![requested delivery date],1,2) 
```

这会从我的餐桌订单详细信息中获取一般日期（例如 11/9/2012）并将其转换为 20120911 或至少这就是我想要它做的

不幸的是，我得到了 20129/11 的输出，这是我无法使用的损坏

您可以看到 09 已神奇地更改为 9/ 我不明白如何以及为什么

有人可以告知正确的表达式应该是什么，或者是否需要对基础数据表进行任何更改。

我在表中使用一般日期格式 - 这个表达式以前工作得很好，但现在开始给我一个问题，因为拆分数据库并使用附加表 - msaccess 版本是 2003

任何建议将被认真考虑

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:34:39.397

如果您的字段的数据类型`[order details]`是日期/时间，则使用`Format()`表达式来根据需要格式化日期会更简单。

```
Format([order details], "yyyymmdd") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:35:50.197

尝试使用格式功能：

```
Expr1: Format ([order details]![requested delivery date], "yyyymmdd") 
```

对于您原始问题中的代码，没有“魔法”，只是您从“9”开始的两个字符是“9/”。

假设字段类型是 DATETIME。如果没有，你应该把它改成这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T02:36:09.417

从字符串中操作日期是一个非常糟糕的主意。

一方面，您必须处理月份位置的变化，例如“2012 年 1 月 1 日”和“2012 年 10 月 10 日”。
然后，您必须处理 Access 返回的字符串高度依赖于为列指定的格式的事实，并且该格式会根据客户端的区域设置而变化。
此外，Access 理解并可能返回美国格式的日期：`m/d/yyyy`.

要解决您的问题，请明确使用 SQL 和 Access 提供的日期和格式化函数来操作日期。
就您而言，我认为您只需要以下`Format()`功能：

```
Format([order details]![requested delivery date], "yyyymmdd") 
```

`20120911`如果您`[requested delivery date]`是 11SEP2012，将返回。如果您`[requested delivery date]`被定义为字符串，请确保它包含有效日期，并将其转换为正确的日期，使用`CDate()`：

```
Format(CDate([order details]![requested delivery date]), "yyyymmdd") 
```

如果此列设置为允许 Null 值，您将需要测试：

```
Iif(IsNull([order details]![requested delivery date]), Null, Format(CDate([order details]![requested delivery date]), "yyyymmdd")) 
```

有关日期操作的更多信息，请查看以下文章：

*   [在 Access 中计算和显示日期/时间值的函数](http://support.microsoft.com/kb/210604)
*   [带日期的格式化函数](http://www.techonthenet.com/access/functions/date/format.php)
*   [按类别列出的 Access 中的功能列表](http://www.techonthenet.com/access/functions/index.php)（转到日期类别）

# javascript - 使用 JavaScript 从变量中获取 getElementById

> ID：12966454
> 
> 赞同：1
> 
> 时间：2012-10-19T02:16:46.843
> 
> 标签：javascript, getelementbyid

我的页面上有10个输入框..

```
<input type="text" id="box1">
<input type="text" id="box2">
<input type="text" id="box3">
<input type="text" id="box4">
<input type="text" id="box5">
<input type="text" id="box6">
<input type="text" id="box7">
<input type="text" id="box8">
<input type="text" id="box9">
<input type="text" id="box10"> 
```

使用 JavaScript 我希望能够选择每个的输入，但只能根据请求使用 JavaScript。

我使用了以下代码：

```
document.getElementById("box1").value 
```

返回值（我想要的）

但是我希望能够用它做一些事情然后请求下一个项目然后用那个做一些事情..

所以我创建了一个虚拟变量（放置在我的函数之外，因为我不想在每次调用函数时将值重置回 1：

```
var current_item = "1"; 
```

然后我希望能够使用这个变量来选择一个项目，我已经像这样使用它：

```
document.getElementById("box" + current_item).value
current_item = current_item + 1; 
```

但是它不起作用。如果我提醒 current_item 变量，它会返回未定义。

如果我将 current_item 变量添加到我的函数中，它可以工作并执行我希望它执行的操作，但会不断重置回 1（因为函数正在重新创建变量）。

任何人都可以帮助我解决如何获取下一个输入框的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:19:00.017

尝试将 current_item 设为数字而不是字符串。

```
var current_item = 1; 
```

代替

```
var current_item = "1"; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/fQ8BK/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T02:19:32.177

current_item 是一个字符串，当您使用`+`运算符时，它会进行连接而不是加法。

```
"1" + 1
"11" 
```

如果您使用`var current_item = 1;`，它将是一个整数，您可以通过执行添加它`+1`

还，

```
var current_item = "1";
current_item = current_item*1 + 1;
2 
```

当你乘以 1 时，它会将其转换为一个 int，然后加 1，这会产生 2，正如你所期望的那样。

相关问题：[Javascript (+) 符号连接而不是给出变量的总和](https://stackoverflow.com/questions/5961000/javascript-sign-concatenates-instead-of-giving-sum-of-variables)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T02:19:46.120

我的猜测是你在搞乱不同的类型。`current_item`以字符串开头，但随后添加一个数字，因此结果`current_item + 1`将`11`不是`2`. 尝试：

```
var current_item = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T04:11:47.477

如其他答案中所述，您似乎正在混合字符串和数字。

现在，您的问题是关于获取下一个输入。您可以简单地使用 node.nextSibling，而不是依赖于 id：

[https://developer.mozilla.org/en-US/docs/DOM/Node.nextSibling](https://developer.mozilla.org/en-US/docs/DOM/Node.nextSibling)

```
var firstItem=document.getElementById("box1");
var nextItem=firstItem.nextSibling;
etc. 
```

# android - 我如何在线获取图像（url）并将其放置在水平滚动视图中？

> ID：12966458
> 
> 赞同：0
> 
> 时间：2012-10-19T02:17:16.187
> 
> 标签：android, image, horizontalscrollview

我目前正在开发一个应用程序，它包含一个封面流页面（来自[http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)）。在每个项目上，我都有一个“查看内部”按钮，当我单击该按钮时，我应该能够检索该特定项目的 url 并在水平滚动视图中显示图像（来自在线）（在下面的白点上） . 对不起我的英语不好，我是安卓新手 :)

![在此处输入图像描述](../Images/55921fe2de63020d4e6e7b7824c6b6e6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:02:55.800

实际上，您可以使用 iScroll 4 轻松实现这一目标。[请访问此处](http://cubiq.org/iscroll-4)以供参考。

您所需要的只是在启用了 javascript 的 webview 上实现它...

```
webview.getSettings().setJavaScriptEnabled(true);      
webview.getSettings().setPluginsEnabled(true); 
```

另一个实现称为 SwipeView，也可以在同一站点上找到。

看看这个网站，有很多例子……可能不如封面流那么漂亮，但我敢打赌它会为你节省很多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:46:35.013

如果我正确理解您的问题，您有一个水平视图，并且您希望根据一些用户事件（如单击按钮等）将一些图像从服务器加载到您的视图中。

要加载图像，您可以使用 HTTP 连接来获取位图数据，即从 InputStream 中提取位图，然后将其传递给 imageView。检查 android 位图和 HttpUrlConnection 文档以获取更多详细信息。

```
 URL imageUrl = new URL("http...."); //The url of the image             
 Bitmap bmp;
 ImageView imView = (ImageView)findViewById(R.id.xyz); 

 try{
        HttpURLConnection conn =  (HttpURLConnection)imageurl.openConnection();
        conn.setDoInput(true);
        conn.setConnectTimeout(100000);
        conn.connect();
        int length = conn.getContentLength();       
        InputStream is = conn.getInputStream();     
        bmp = BitmapFactory.decodeStream(is);
        imView.setImageBitmap(bmp);
     } 

     catch(Exception e){} 
```

# xss - 如果在没有 XSS 字符串转义的页面中呈现一个参数，是否存在真正的安全漏洞问题？

> ID：12966459
> 
> 赞同：0
> 
> 时间：2012-10-19T02:17:19.383
> 
> 标签：xss

背景：我们使用了一个工具来扫描我们的系统。它发现了一个 XSS 漏洞。扫描步骤： 注入项目： POST: localeCountry <-- 这是一个枚举值，不能更改为 XSS 字符串并存储在服务器中。注入值：>'>alert("XSS warning!") 检测值：>'>alert("XSS warning!") 在攻击响应页面中检测到，在链接中找到。

我认为这是一个无效漏洞，因为注入的项目不会持久或影响其他用户。最好转义所有参数，但我想知道这个漏洞是否有效？

问题： 1\. 这个漏洞有没有让其他用户点击你的XSS陷阱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:22:32.873

是的，这绝对是一个漏洞。另一个站点上的某个人可以编写一个表单，如下所示：

```
<form action="http://example.com/vulnerable_service" method="POST">
    <input type="hidden" name="localeCountry" value="&gt;'&gt;alert('XSS!');">
    <input type="submit" value="Click me!!">
</form> 
```

当用户单击攻击者站点上的该按钮时，他们将被重定向到您的站点，但他们的 XSS 代码将在您站点的安全上下文中运行，并可能窃取 cookie 等。（当然，POST 可以通过 JavaScript 自动进行，用户很难避免）。攻击字符串不需要存储在数据库中；XSS 仅依赖于向用户回显的恶意字符串而不转义。

故事的寓意：你应该修复那个洞。

# web-services - REST API 和消息级安全性

> ID：12966460
> 
> 赞同：10
> 
> 时间：2012-10-19T02:17:21.363
> 
> 标签：web-services, security, rest, pkcs#7

我需要在 REST API 中实现消息级别的安全性，并且有一些顾虑和问题。我在这里找到了答案： [Rest Web services 中的消息级别安全性](https://stackoverflow.com/questions/9869828/message-level-security-in-rest-web-services)

只是部分有用。

我们目前支持标准 SSL 传输安全性和多种身份验证方法，包括：

*   基本 http 身份验证（某些与我们的 API 对话的网络设备服务需要）
*   具有 SHA1 和 SHA256 风格的预共享密钥的 HMAC。
*   以 TLS 级别发送的客户端身份证书。
*   SAML 2.0

为什么我们需要消息级别的安全性，因为：

*   客户行业包括医疗保健、金融和政府等，他们通常不赞成仅使用 SSL。
*   需要保证端到端的安全性。通过反向代理、SSL 加速器等...
*   通过服务传递的一些数据将包括非常敏感的数据。
*   需要为坚持认为 SOAP 的 WS-* 安全标准是“企业实力”Web 服务而 REST API 不是的客户提供一个好的答案。

如果客户端应用程序了解如何处理封装响应，我最初的想法是使用 PKCS#7 信封作为选项。

我希望客户端应用程序告诉 API 他们想要一个安全的响应，或者告诉 API 他们正在发布或发送的消息是安全的。

我真正的问题是，这应该通过媒体类型来传达吗？例如：

*   内容类型：application/vnd.resourcetype1+json+pkcs7
*   内容类型：txt/csv+pkcs7

我不想泄露有关被封装的媒体类型的信息。

它变得复杂，因为在某些情况下签名就足够了。其他人也需要加密。术语“pkcs7”对于如何构造信封是模糊的。

我希望客户端和服务器通过标准 HTTP 标头告诉对方他们正在发送的内容类型以及他们理解的内容类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:51:19.873

当然，如何定义 API 取决于您自己，没有对错之分，但是[S/MIME](https://www.rfc-editor.org/rfc/rfc3851)是一种非常容易理解的消息格式，非常适合互联网。如果您更喜欢分散的信任层次结构，则与[PGP/MIME一样。](https://www.rfc-editor.org/rfc/rfc2015)由于这些都是很好理解的格式，它将允许客户端采用现有的库来处理这些消息体。

如果您不希望使用多部分响应，则可能需要查看[Content-Encoding](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.11)标头，而不仅仅是 Content-Type。然后，您可以将签名/加密格式指定为自定义编码类型。

将 HTTP 用作应用程序协议而不仅仅是传输协议有很多好处，但您似乎已经明白这一点。确保正确设置和解析 Accept* 标头，包括 q 值。注意诸如默认值 q=1 表示相等（非降序）偏好和 q=0 之类的事情。

# javascript - 如何使用 javascript 或 jquery 将此菜单栏链接到此 div 内容...？

> ID：12966466
> 
> 赞同：0
> 
> 时间：2012-10-19T02:18:03.883
> 
> 标签：javascript, jquery, html

目前，当您单击一个 div 框时，它会在屏幕上向左移动，而下一个 div 框将从右侧进入屏幕。需要的是，单击菜单链接滚动到相应的 div 容器。例如，单击链接 5 滚动到 div #5 谁能帮我解决它...？这将是一个很大的帮助家伙。

HTML

```
<ul class="btns">
        <li><a href="#" rel="box1">1</a></li>
        <li><a href="#" rel="box2">2</a></li>
        <li><a href="#" rel="box3">3</a></li>
        <li><a href="#" rel="box4">4</a></li>
        <li><a href="#" rel="box5">5</a></li>           
    </ul>

    <div id="container">

        <div id="box1" class="box">Div #1</div>
        <div id="box2" class="box">Div #2</div>
        <div id="box3" class="box">Div #3</div>
        <div id="box4" class="box">Div #4</div>
        <div id="box5" class="box">Div #5</div>

    </div>​ 
```

Javascript 和 Jquery 部分：

```
$('.btns>li a').click(function() {
                var page = $(this).attr('rel');
            });                

            $('.box').click(function() {
                $('.box').each( function() {
                    if ($(this).offset().left < 0) {
                        $(this).css("left", "150%");
                    }
                });

                $(this).animate({
                    left: '-50%'
                }, 500);

                if ($(this).next().size() > 0) {
                    $(this).next().animate({
                        left: '50%'
                    }, 500);
                } else {
                    $(this).prevAll().last().animate({
                        left: '50%'
                    }, 500);
                }
            });​ 
```

示例：http: [//jsfiddle.net/gHYSN/5/](http://jsfiddle.net/gHYSN/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:56:04.540

好的，这可能不是最好的方法，但它可以按要求工作。

```
function swdiv(currID, nxtID) {
    $('.box').each(function() {
        if ($(this).offset().left < 0) {
            $(this).css("left", "150%");
        }
    });
    $('#' + currID).animate({
        left: '-50%'
    }, 500);
    if ($('#' + nxtID).size() > 0) {
        $('#' + nxtID).animate({
            left: '50%'
        }, 500);
    }
}

$('.btns li a').click(function() {
    var page = $(this).attr('rel'),
        curID = 'box1',
        iWide = $(window).width() / 2;
    $('.box').each(function() {
        if ($(this).css('left') == iWide + 'px') {
            curID = $(this).attr('id');
        }
    });
    swdiv(curID, page);
});
$('.box').click(function() {
    $('.box').each(function() {
        if ($(this).offset().left < 0) {
            $(this).css("left", "150%");
        }
    });
    $(this).animate({
        left: '-50%'
    }, 500);
    if ($(this).next().size() > 0) {
        $(this).next().animate({
            left: '50%'
        }, 500);
    } else {
        $(this).prevAll().last().animate({
            left: '50%'
        }, 500);
    }
}); 
```

我创建了一个额外的函数来在两个`div`s 之间切换。[在fiddle](http://jsfiddle.net/gHYSN/8/)的第 8 次更新时检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:53:53.257

没有测试这个，但我认为它应该给你基本的想法。

```
$(".btns a").each(function(index, a) {
    $(a).click(function() {
        var boxnum = index + 1;
        $(window).scrollTop($("#box" + boxnum).offset().top);
    });
} 
```

# ios - iOS 中是否有用于自定义振动的 API？

> ID：12966467
> 
> 赞同：73
> 
> 时间：2012-10-19T02:18:06.190
> 
> 标签：ios, vibration, iphone-vibrate

从 iOS 5 开始，用户可以为警报和铃声创建自定义振动模式。以下屏幕截图显示了用于创建一个的 UI（iOS 6 中的联系人应用程序）：

![在 iOS 6 中创建自定义振动的 UI 截图](../Images/108374c16bd4be4ab2ea02f0dad515a4.png)

我一直在四处搜索，包括文档，但找不到任何公开自定义振动的创建或播放的公共 API。最接近的是使用`AudioToolbox`框架来播放一个短暂的、持续的振动：

```
AudioServicesPlaySystemSound(kSystemSoundID_Vibrate); 
```

**有谁知道是否有用于自定义振动的 API？**它不一定是公共 API。我很想知道联系人应用程序使用什么。有人知道吗？

*PS其他人`_CTServerConnectionCreate`在`CoreTelephony`（[示例](https://stackoverflow.com/questions/265761/how-do-you-make-the-iphone-vibrate-for-arbitrary-durations)）中提出了建议。我试过了，但由于某种原因无法振动。*

> **2015 年 10 月更新：**
> 
> iOS 9 中有新的私有 API 可以与兼容设备中的 Taptic Engine 进行交互。有关更多信息，请参阅[iOS 9 中的 Taptic](https://stackoverflow.com/questions/32526868/taptic-in-ios-9)。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-24T10:34:50.680

在联系人应用程序中挖掘了几个小时后，我已经弄清楚它是如何工作的。

ABNewPersonViewControlle 调用 ToneLibrary 框架中的某个类来执行此操作。

调用堆栈如下所示：

```
0   CoreFoundation                  0x3359a1d4 CFGetTypeID + 0
1   CoreFoundation                  0x33596396 __CFPropertyListIsValidAux + 46
2   CoreFoundation                  0x33517090 CFPropertyListCreateData + 124
3   AudioToolbox                    0x38ac255a AudioServicesPlaySystemSoundWithVibration + 158
5   ToneLibrary                     0x35a7811a -[TLVibrationRecorderView vibrationComponentDidStartForVibrationRecorderTouchSurface:] + 38
6   ToneLibrary                     0x35a772b2 -[TLVibrationRecorderTouchSurface touchesBegan:withEvent:] + 342
7   UIKit                           0x3610f526 -[UIWindow _sendTouchesForEvent:] + 314
8   UIKit                           0x360fc804 -[UIApplication sendEvent:] + 376 
```

在网上搜索“AudioServicesPlaySystemSoundWithVibration”后，我一无所获。

所以我决定自己研究一下。它是 AudioToolbox 框架中的一个私有函数。

函数的声明就像

```
void AudioServicesPlaySystemSoundWithVibration(SystemSoundID inSystemSoundID,id arg,NSDictionary* vibratePattern) 
```

“inSystemSoundID”是 SystemSoundID。就像“AudioServicesPlaySystemSound”一样，通过“kSystemSoundID_Vibrate”。

“arg”并不重要，将 nil 传递给它，一切都会正常工作。

"vibratePattern" 是 "NSDictionary" 的指针，Contact App 传入 { Intensity = 1; 关闭持续时间 = 1；持续时间 = 10；} 用于记录用户输入。

但是只有调用这个函数才会让振动永不停止。所以我必须找到一些功能来阻止它。

答案是“AudioServicesStopSystemSound”。它也是 AudioToolbox 框架中的一个私有函数。

函数的声明就像

```
void AudioServicesStopSystemSound(SystemSoundID inSystemSoundID) 
```

我猜Contact App在touchesBegan方法中使用AudioServicesPlaySystemSoundWithVibration，在touchEnd方法中使用AudioServicesStopSystemSound来达到这个效果。

TLVibrationController 将管理一个振动模式对象来记录您输入的过程。

最后它生成一个字典传递给 AudioServicesPlaySystemSoundWithVibration 来重播整个过程，如下所示：

```
NSMutableDictionary* dict = [NSMutableDictionary dictionary];
NSMutableArray* arr = [NSMutableArray array ];

[arr addObject:[NSNumber numberWithBool:YES]]; //vibrate for 2000ms
[arr addObject:[NSNumber numberWithInt:2000]];

[arr addObject:[NSNumber numberWithBool:NO]];  //stop for 1000ms
[arr addObject:[NSNumber numberWithInt:1000]];

[arr addObject:[NSNumber numberWithBool:YES]];  //vibrate for 1000ms
[arr addObject:[NSNumber numberWithInt:1000]];

[arr addObject:[NSNumber numberWithBool:NO]];    //stop for 500ms
[arr addObject:[NSNumber numberWithInt:500]];

[dict setObject:arr forKey:@"VibePattern"];
[dict setObject:[NSNumber numberWithInt:1] forKey:@"Intensity"];

AudioServicesPlaySystemSoundWithVibration(4095,nil,dict); 
```

因此，如果您想在 iOS 中自定义振动。使用 AudioServicesPlaySystemSoundWithVibration 和 AudioServicesStopSystemSound。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T14:25:40.313

有一个名为 HapticKeyboard 的项目可以做到这一点。请参阅：[http ://code.google.com/p/zataangstuff/source/browse/trunk/HapticKeyboard/Classes/HapticKeyboard.m?r=93](http://code.google.com/p/zataangstuff/source/browse/trunk/HapticKeyboard/Classes/HapticKeyboard.m?r=93)

具体看最后一组函数

```
_CTServerConnectionSetVibratorState(&x, connection, 0, 0, 0, 0, 0); 
```

有两个问题：

1.  我怀疑你会让你的应用程序被允许进入应用程序商店。Apple 会将此视为用户的电池消耗，他们对用户体验非常严格
2.  这可能需要越狱。自从我上次玩这个以来，已经有几个新的 iOS 版本，所以很难说

# sql-server-2008 - PostgreSQL 中是否有类似 SSIS 的功能？

> ID：12966474
> 
> 赞同：7
> 
> 时间：2012-10-19T02:19:29.510
> 
> 标签：sql-server-2008, postgresql, ssis

我们每天使用 SQL 2008 R2 中的[SSIS（SQL Server 集成服务）](http://msdn.microsoft.com/en-us/library/ms141026.aspx)将数据库表从 30 多个数据库（在 SQL Server 2000 上运行）复制到单个数据库，以进行数据分析。PostgreSQL 中是否有类似 SSIS 的功能？因为我们正在考虑将来将我们的数据库迁移到开源数据库。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-26T15:02:11.710

您可以为此使用 SQL Server 集成服务。只需使用 ODBC 连接连接到您的 PostgreSQL！我自己做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T10:43:12.253

PostgreSQL 本身没有类似 ssis 的 ETL 模块，但是有一些开源的 BI 堆栈。最流行的开源 ETL 工具包可能是[Pentaho](http://www.pentaho.com/)的工具[Kettle](http://kettle.pentaho.com/)。在[Postgres wiki上推荐](http://wiki.postgresql.org/wiki/Migrating_from_one_database_to_another_with_Pentaho_ETL)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T02:27:48.770

它会`pg_dump`生成一个可以在另一个数据库上重放的 SQL 脚本。从您的 30 个数据库中收集数据需要编写一些脚本。

为避免混淆，请注意在 Postgres 中，一个“数据库”可以包含多个“模式”——在 SQL Server 中，一个“实例”可以包含多个“数据库”。核心概念大致相同。

# c++ - 在C++中逐行读取文件跳过一些行

> ID：12966476
> 
> 赞同：1
> 
> 时间：2012-10-19T02:19:36.373
> 
> 标签：c++, string, input, getline

我有以下类型的输入文本文件

```
28306.5934893134
Const for C
0.086628745225
Const for D
1226.12828874073
Const for F
6.60731462829
Const for G
-14694.9395750279
Const for J
273245702.243239
Const for K
5563100.12791444 
```

我想逐行阅读。我目前正在使用如下所示的 ifstream 和 getline：

```
correl>>const_h;
cout<<const_h;

std::getline(correl,line_avoid);
correl>>C1;
cout<<C1<<endl;

std::getline(correl,line_avoid);
correl>>C2;
cout<<C2<<endl;

std::getline(correl,line_avoid);
correl>>C3;
cout<<C3<<endl;

std::getline(correl,line_avoid);
correl>>C4;
cout<<C4<<endl;

std::getline(correl,line_avoid);
correl>>C5;
cout<<C5<<endl;

std::getline(correl,line_avoid);
correl>>C6;
cout<<C6<<endl; 
```

第一个值被读取，但不是其他值。如何仅读取值并跳过输入文件中的注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:28:05.093

以下更简单的代码应该可以解决问题：

```
#include <string>
#include <fstream>
#include <iostream>

std::ifstream infile("data.txt");

for (std::string l1, l2; std::getline(infile, l1) && std::getline(infile, l2); )
{
    std::cout << "Data: " << l1 << std::endl;
} 
```

（如果要将行解析为数字，可以`double d = std::stod(l1);`在 C++11 中使用，或使用任何其他转换方法。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:44:16.747

当您这样做时，例如`correl>>C1;`换行符留在流中，因此下一个`getline`获取该换行符并且以下`correl>>C2;`尝试从您要忽略的行中获取。

有几种方法可以解决这个问题。第一种是`getline`用于两行，忽略要忽略的行，并`istringstream`用于另一行提取值：

```
std::istringstream is;

std::getline(correl, line_avoid);
std::getline(correl, line_keep);
is.str(line_keep);
is >> C1;
cout << C1 << endl; 
```

另一种方法是在读取值后跳到换行符：

```
std::getline(correl, line_avoid);
correl >> C1;
correl.ignore(numeric_limits<streamsize>::max(), '\n');
cout << C1 << endl; 
```

# python - 保留 lxml.etree 解析的 xml 的原始文档类型和声明

> ID：12966488
> 
> 赞同：17
> 
> 时间：2012-10-19T02:21:17.713
> 
> 标签：python, lxml, doctype, xml-declaration

我正在使用 python 的 lxml，我正在尝试读取 xml 文档，修改并将其写回，但原始 doctype 和 xml 声明消失了。我想知道是否有一种简单的方法可以通过 lxml 或其他解决方案将其放回原处？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T03:14:19.157

**tl;博士**

```
# adds declaration with version and encoding regardless of
# which attributes were present in the original declaration
# expects utf-8 encoding (encode/decode calls)
# depending on your needs you might want to improve that
from lxml import etree
from xml.dom.minidom import parseString
xml1 = '''\
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root SYSTEM "example.dtd">
<root>...</root>
'''
xml2 = '''\
<root>...</root>
'''
def has_xml_declaration(xml):
    return parseString(xml).version
def process(xml):
    t = etree.fromstring(xml.encode()).getroottree()
    if has_xml_declaration(xml):
        print(etree.tostring(t, xml_declaration=True, encoding=t.docinfo.encoding).decode())
    else:
        print(etree.tostring(t).decode())
process(xml1)
process(xml2) 
```

以下将包括 DOCTYPE 和 XML 声明：

```
from lxml import etree
from StringIO import StringIO

tree = etree.parse(StringIO('''<?xml version="1.0" encoding="iso-8859-1"?>
 <!DOCTYPE root SYSTEM "test" [ <!ENTITY tasty "eggs"> ]>
  <root>
   <a>&tasty;</a>
 </root>
'''))

docinfo = tree.docinfo
print etree.tostring(tree, xml_declaration=True, encoding=docinfo.encoding) 
```

请注意，如果您创建一个（例如使用），它`tostring`不会保留，它仅在您使用处理 XML 时才有效。`DOCTYPE``Element``fromstring``parse`

**更新：正如**[JF Sebastian](https://stackoverflow.com/a/12967080/125629)所指出的，我的断言`fromstring`是不正确的。

`Element`下面是一些代码来突出和`ElementTree`序列化之间的差异：

```
from lxml import etree
from StringIO import StringIO

xml_str = '''<?xml version="1.0" encoding="iso-8859-1"?>
 <!DOCTYPE root SYSTEM "test" [ <!ENTITY tasty "eggs"> ]>
  <root>
   <a>&tasty;</a>
 </root>
'''

# get the ElementTree using parse
parse_tree = etree.parse(StringIO(xml_str))
encoding = parse_tree.docinfo.encoding
result = etree.tostring(parse_tree, xml_declaration=True, encoding=encoding)
print "%s\nparse ElementTree:\n%s\n" % ('-'*20, result)

# get the ElementTree using fromstring
fromstring_tree = etree.fromstring(xml_str).getroottree()
encoding = fromstring_tree.docinfo.encoding
result = etree.tostring(fromstring_tree, xml_declaration=True, encoding=encoding)
print "%s\nfromstring ElementTree:\n%s\n" % ('-'*20, result)

# DOCTYPE is lost, and no access to encoding
fromstring_element = etree.fromstring(xml_str)
result = etree.tostring(fromstring_element, xml_declaration=True)
print "%s\nfromstring Element:\n%s\n" % ('-'*20, result) 
```

输出是：

```
--------------------
parse ElementTree:
<?xml version='1.0' encoding='iso-8859-1'?>
<!DOCTYPE root SYSTEM "test" [
<!ENTITY tasty "eggs">
]>
<root>
   <a>eggs</a>
 </root>

--------------------
fromstring ElementTree:
<?xml version='1.0' encoding='iso-8859-1'?>
<!DOCTYPE root SYSTEM "test" [
<!ENTITY tasty "eggs">
]>
<root>
   <a>eggs</a>
 </root>

--------------------
fromstring Element:
<?xml version='1.0' encoding='ASCII'?>
<root>
   <a>eggs</a>
 </root> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T03:43:42.017

您还可以使用以下方法保留 DOCTYPE 和 XML 声明`fromstring()`：

```
import sys
from StringIO import StringIO
from lxml import etree

xml = r'''<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
 <head>
 <title>example</title>
 </head>
 <body>
 <p>This is an example</p>
 </body>
</html>'''

tree = etree.fromstring(xml).getroottree() # or etree.parse(file)
tree.write(sys.stdout, xml_declaration=True, encoding=tree.docinfo.encoding) 
```

### 输出

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>example</title>
 </head>
 <body>
 <p>This is an example</p>
 </body>
</html> 
```

请注意存在 xml 声明（使用正确的编码）和 doctype。它甚至（可能不正确）在 xml 声明中使用`'`而不是添加到.`"``Content-Type``<head>`

对于[@John Keyes 的示例输入](https://stackoverflow.com/a/12966853/4279)，它会产生与答案相同`etree.tostring()`的结果。

# solr - 可以使 Apache Solr 索引在事务上与被索引的数据库一致吗？

> ID：12966489
> 
> 赞同：11
> 
> 时间：2012-10-19T02:22:16.183
> 
> 标签：solr, transactions, lucene, cluster-computing, consistency

我是 Solr 的新手。我正在尝试制作一个将结构化数据存储在数据库中的服务器，并且可以使用 Solr/Lucene 进行搜索。服务器可以集群到任意数量的相同节点以实现高可用性。

似乎标准配置 Solr 将索引存储在文件系统上的文件中。这似乎在一致性和聚类方面引入了一些问题。

如何使索引在事务上与数据库一致？有没有办法做到这一点？（例如，以某种方式对数据库进行提交与对 Solr 索引的提交相协调？）

有没有办法将索引存储在（关系）数据库中？这将解决一致性问题和集群问题，但我没有找到很多关于如何做到这一点的文献。

当配置为集群时，每个集群节点是否需要维护自己的索引副本。目前尚不清楚 Solr 的多个实例是否可以更新单个索引。

或者——我们是否放弃接受不能保证索引是一致的，每天左右重建它？人们通常会怎么做呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-19T09:51:29.313

**Q>**如何使索引在事务上与数据库一致？
**A>**你不能。您可能可以在上面发明另一个事务层，但是开发需要很长时间，而且无论如何您都不会达到 100% 的一致性。例如，您可以将数据同时发送到 DB 和 Solr，并且仅在两个数据到达后才提交，但这不会是原子的。

**Q>**有没有办法将索引存储在（关系）数据库中？
**A>**使用 Lucene 4.0，您可能可以（通过编写自己的编解码器）。但这不会解决你的问题。

**Q>**当配置为集群时，每个集群节点是否需要维护自己的索引副本？
**A>**是的。

**Q>**不清楚 Solr 的多个实例是否可以更新单个索引。
**A>**多个 Lucene/Solr 实例不能写入同一个索引文件。最多可以创建多个`IndexSearcher`s. 但无论如何，这可能是在 Solr 级别完成的。

**Q>**我们是否放弃接受索引不能保证一致？
**A>**是的。我认为您过于以数据库为中心。想想 Solr/Lucene 就像你想想谷歌一样——我敢打赌，他们不会在全世界自动推出整个索引。如果搜索结果会有轻微的不一致，这取决于您访问的服务器（当然是几秒钟），这没什么大不了的。

**Q** > 每天都重建吗？人们通常会怎么做呢？
**A>** Lucene 具有[近乎实时的搜索](http://wiki.apache.org/lucene-java/NearRealtimeSearch)，但在基本级别上，您只需发送索引更新并在数据库更改发生时提交，然后重新打开索引阅读器以查看这些更新。这一切都是在 Solr 中自动完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T12:04:56.053

知道这有点旧，但它可能会对某人有所帮助。您可以使用 Apache zookeeper 尝试 solrcloud。

开箱即用的 Apache Solr 包括设置 Solr 服务器集群的能力，该集群结合了容错和高可用性 - 称为 SolrCloud，这些功能提供分布式索引和搜索功能，只需少量配置即可支持以下功能：

```
Central configuration for the entire cluster
Automatic load balancing and fail-over for queries
ZooKeeper integration for cluster coordination and configuration. 
```

Zookeeper 是 solr 的集群管理器。它与 solr 配合得非常好。

```
https://cwiki.apache.org/confluence/display/solr/SolrCloud

http://zookeeper.apache.org/doc/trunk/zookeeperOver.html 
```

# android - 在 ICS 和 JB 上将多种小部件尺寸迁移到一个小部件中

> ID：12966490
> 
> 赞同：1
> 
> 时间：2012-10-19T02:22:24.497
> 
> 标签：android, android-widget, widget

我有一个小部件，它在 AndroidManifest.xml（3x2、4x1、4x2）中定义了各种尺寸。现在，较新版本的 Android 允许可调整大小的小部件，我想清理 3 个小部件并只拥有一个可调整大小的小部件。我知道该怎么做，但是如何将用户迁移到该 1 条目？

当前版本：

```
<receiver android:name=".Widget3x2" android:label="@string/widget_name_3x2">
    ...
</receiver>
<receiver android:name=".Widget4x1" android:label="@string/widget_name_4x1">
    ....
</receiver>
<receiver android:name=".Widget4x2" android:label="@string/widget_name_4x2">
    ....
</receiver> 
```

新版本只有 4x2，但我希望 4x1 和 3x2 的用户现在默认为 4x2 而无需干预：

```
<receiver android:name=".Widget4x2" android:label="@string/widget_name_4x2">
    ....
</receiver> 
```

例如，如果用户正在使用 3x2 小部件，而我推送了一个只有 4x2 可调整大小的小部件的更新，那么他们在主屏幕上会留下一个空白区域。有没有办法在没有手动步骤的情况下以某种方式强制他们进入 4x2？

谢谢你的帮助！

# javascript - .call() 一个自调用匿名函数，

> ID：12966493
> 
> 赞同：0
> 
> 时间：2012-10-19T02:22:44.487
> 
> 标签：javascript

```
// a self-invoking anonymous function
(function() {})(); 
```

和下面的一样吗？

```
// as in underscore.js (underscorejs.org)
(function() {}).call(this); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:23:39.977

不，第二个会将函数的调用上下文设置为与外部上下文相同的值。

第一个可能有也可能没有相同的上下文，这取决于代码在哪里运行，以及您的代码是否在严格模式下运行。

# python - 仅替换字符串中的字母

> ID：12966499
> 
> 赞同：-2
> 
> 时间：2012-10-19T02:23:33.770
> 
> 标签：python, string, replace

我需要返回给定的谜题，每个字母字符都被隐藏字符替换。

```
HIDDEN = '^' 

def blah(r):
    r = HIDDEN * len(r)
    return r 
```

此函数可用于替换我需要的任何字符串，但问题特别要求替换每个 ALPHABETIC 字符。

所以我不能有`4`或被HIDDEN 取代`'`，`?`因为它们不是字母字符。

我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T02:29:05.470

一种方法：使用*translate*方法：

```
import string

table = string.maketrans(string.ascii_letters, '^'*len(string.ascii_letters))

def blah(r):
    return r.translate(table) 
```

另一种方法：使用`re.sub`：

```
import re

def blah(r):
    return re.sub(r'[a-zA-Z]', r'^', r) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T02:29:53.317

查看[maketrans](http://docs.python.org/library/string.html#string.maketrans)，您可以创建一个转换表 from `string.letters`to`^`然后使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T02:49:29.757

我总是觉得`maketrans`有点难以理解，所以我通常会使用更原始的方式来做这些事情（这对我来说更有意义）：

```
def make_hidden(instr):
    return ''.join(c if c.isalpha() else '^' for c in instr) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T01:32:38.220

返回给定的谜题，每个字母字符都替换为 HIDDEN 字符。

```
HIDDEN = '^' 

def blah(r):

    new_r = ""

    for ch in r:

        if ch in 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ':

           new_r += HIDDEN 

        else:

           new_r += ch

     return new_r 
```

# objective-c - 如何避免OAuth2，使用用户名和密码获取google任务资源

> ID：12966501
> 
> 赞同：0
> 
> 时间：2012-10-19T02:23:40.027
> 
> 标签：objective-c, ipad, google-tasks-api

我正在开发一个类似于谷歌日历的应用程序，用户输入他们的谷歌帐户登录，并从他们的谷歌任务同步。

在不使用 OAuth2 的情况下这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:35:25.570

推广 OAuth 是因为它为 Google 用户提供了保护。想象一下，如果 Google 有一个简单的用户名/密码 API。如果您是恶意站点的创建者，并且您允许用户在您的站点上输入他们的凭据，您可以存储凭据，然后在未经用户同意的情况下为用户执行操作。

你真的应该考虑通过他们的 OAuth2 系统。

如果你真的想绕过这个（并且请不要），你可以求助于发出 HTTP 请求来模拟如果用户直接输入他们的用户名和密码会发生什么，然后使用屏幕抓取来提取数据。显然，这是一种脆弱的方法，而且随着谷歌最近推出的两因素身份验证，这对于选择加入的用户来说是行不通的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:15:05.523

使用 OAuth 资源所有者密码凭证流，您可以向用户“隐藏”OAuth 流，但前提是您要管理用户的用户名/密码（它们必须作为访问令牌请求的一部分提供）。不幸的是，谷歌似乎不支持这种类型的身份验证流程，我已经与它斗争了几天，但似乎他们的后端缺乏支持。这是 Google API 为 Java 提供的（非功能性）示例：

```
static void requestAccessToken() throws IOException {
  try {
    ResourceOwnerPasswordCredentialsGrant request =
        new ResourceOwnerPasswordCredentialsGrant(new NetHttpTransport(),
            new JacksonFactory(),
            "https://server.example.com/authorize",
            "s6BhdRkqt3",
            "gX1fBat3bV",
            "johndoe",
            "A3ddj3w");
    AccessTokenResponse response = request.execute();
    System.out.println("Access token: " + response.accessToken);
  } catch (HttpResponseException e) {
    AccessTokenErrorResponse response = e.response.parseAs(AccessTokenErrorResponse.class);
    System.out.println("Error: " + response.error);
  }
} 
```

如果你能让这个东西运行，请告诉我。

# objective-c - 哪一个更容易使用？GCD 还是 NSOperation？

> ID：12966506
> 
> 赞同：5
> 
> 时间：2012-10-19T02:24:10.640
> 
> 标签：objective-c, xcode4.5, grand-central-dispatch, nsoperation

我目前正在使用 GCD。但是，我听说这`NSOperation`实际上是一个更高级别的程序。但它要复杂得多。

在 GCD 中，在后台做一些事情只是使用我创建的这个辅助函数：

```
+(void)doForeGround:(void (^)())block
{
    dispatch_async(dispatch_get_main_queue(), ^{
        block();
    });
}

+(void)doBackground:(void (^)())block
{

    //DISPATCH_QUEUE_PRIORITY_HIGH
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW,0), ^{
    //dispatch_async(dispatch_get_global_queue(-2,0), ^{
        block();
    });
}

-(void)doBackGround:(void (^)())block onComletion:(void (^)())onCompletion
{
    [BGHPTools doBackground:^{
        block();
        [BGHPTools doForeGround:^{
            onCompletion();
        }];
    }];
} 
```

这样做`NSOperation`会更简单吗？

我错过了什么吗？我将如何在 NSoperation 中做同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:38:09.190

`NSOperation`您可以像使用 GCD 一样做类似的事情。主要区别在于`NSOperation`提供了额外的功能。

例如：

*   `NSOperation`有`-cancel`方法。调度队列没有取消的概念；队列中的所有块都将运行完成。
*   `NSOperationQueue`有一个`maximumConcurrentOperationCount`属性，您可以使用（例如）一次只允许运行 3 个操作。调度队列没有这样的概念；它们要么是串行的，一次只允许 1 个块，要么是并发的，`libdispatch`根据 CPU 使用率和可用性允许尽可能多的块。
*   An`NSOperation`可以依赖于其他`NSOperation`s，允许您推迟执行特定操作，直到其所有依赖项都运行。当相关操作等待时，其他操作将被允许在队列中“向前跳”。调度队列总是按照严格的 FIFO 顺序出队。（您可以使用 API 在一定程度上模仿依赖关系`dispatch_group`，但这实际上是针对不同类型的问题。）

现在，如果您不使用这些功能中的任何一个，GCD 就可以正常工作。使用 GCD 本身并没有*错。*只是 NSOperation 为一些额外的好特性提供了一个方便的包装器。

以下是您如何使用以下方法重写上面的示例`NSOperationQueue`：

```
+(void)doForeground:(void (^)())block
{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        NSLog(@"I'm running on the main thread!");
        block();
    }];
}

+(void)doBackground:(void (^)())block
{
    // Note; rather than allocating a new NSOperationQueue every time, you could
    // allocate the queue once and just refer to that queue. For simplicity, I'll
    // skip that here.
    [[NSOperationQueue new] addOperationWithBlock:^{
        NSLog(@"I'm running asynchronously on whatever thread NSOperationQueue wants!");
        block();
    }];
}

-(void)doBackground:(void (^)())block onCompletion:(void (^)())onCompletion
{
    [[NSOperationQueue new] addOperationWithBlock:^{
        block();
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            onCompletion();
        }];
    }];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T02:34:40.303

用于比较的操作队列示例：

```
- (void)viewDidLoad
{
  // ...

  self.queue = [[NSOperationQueue alloc] init];

  // ...
}

- (void)job
{
  // background activities ...
}

- (void)startJob
{
  NSInvocationOperation *op = [[NSInvocationOperation alloc] initWithTarget:self 
                                                                   selector:@selector(job) 
                                                                     object:nil];
  [self.queue addOperation:op];
} 
```

# javascript - 无法使用 jquery 触发“悬停”事件

> ID：12966508
> 
> 赞同：1
> 
> 时间：2012-10-19T02:24:38.243
> 
> 标签：javascript, jquery

jQuery 的“悬停”触发器似乎不起作用。我的代码很简单：

```
<div id='el'>Content</div>

// does not work
$('#el').on('hover', function() { console.log('is not triggered'); });
$('#el').trigger('hover');

// works for various strings: 'foo', 'click', 'hove', 'keyup', etc.
$('#el').on('foo', function() { console.log('is triggered'); });
$('#el').trigger('foo'); 
```

我绑定到此 div 的任何处理程序都会`.on`响应，`.trigger`但“悬停”事件除外。绑定的处理程序`.on('hover', handler)`确实响应我手动悬停在元素上，但它不响应编程触发器。我已经在 Chrome 和 Firefox 中对此进行了测试。

有任何想法吗？这是jQuery中的错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T02:27:09.433

触发`'mouseenter'`或`'mouseleave'`事件。

语法是`'hover'`绑定`'mouseenter'`和`'mouseleave'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:28:50.150

您不能使用 jQuery 触发 CSS 伪选择器。但是您可以做任何其他事情，例如创建一个函数并触发它。

# sql - 将普通查询转换为花哨或分区/过度查询

> ID：12966509
> 
> 赞同：1
> 
> 时间：2012-10-19T02:24:44.827
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的查询：

```
with cte as (
        select client_id,COUNT(patient_id) PatientCount from
        (
            select client_id,patient_id
            from F_ACCESSION_DAILY
            group by CLIENT_ID,PATIENT_ID
            having COUNT(ACCESSION_ID)=2
        ) a
        group by CLIENT_ID
) 
```

有效，但对我来说不是那么有用。因为虽然我可以轻松地加入这个查询，但实际上`WITH`我需要多次重复这个语句，因为我需要能够区分：

```
having count(Accession_id)=2 
```

和

```
having count(Accession_id)=3 
```

和

```
having count(accession_id)=4 
```

以此类推，直到大约 100

我正在考虑做更多这样的事情：

```
select distinct client_id, patient_id, count(*) over (partition by client_id, patient_id,accession_id) patientcount
    from f_accession_daily 
```

但我被困住了！

**我想知道您是否可以为我指出正确的方向，即当有 count(Accession)=许多不同的值时**如何将初始查询转换为更有用的东西？

非常感谢您的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:58:10.210

就像是...？

```
 select client_id,accessioncount,COUNT(patient_id) PatientCount from 
    ( 
        select client_id,patient_id, count(accession_id) as accessioncount
        from F_ACCESSION_DAILY 
        group by CLIENT_ID,PATIENT_ID 
    ) a 
    group by CLIENT_ID,accessioncount 
```

# python - 在 numpy/scipy 中优化旋转掩码的实现

> ID：12966511
> 
> 赞同：4
> 
> 时间：2012-10-19T02:24:48.930
> 
> 标签：python, image-processing, numpy, scipy

这是我第一次尝试在 numpy 中使用 strides，与在不同过滤器上的简单迭代相比，它确实提高了速度，但它仍然很慢（感觉至少有一两件事是完全冗余或低效的） .

所以我的问题是：是否有更好的方法来执行此操作或对我的代码进行调整以使其显着更快？

该算法对每个像素执行 9 个不同过滤器的局部评估，并选择具有最小标准偏差的过滤器（我尝试实现 Nagau 和 Matsuyma (1980) “复杂区域照片的结构分析”，如图像分析中所述书）。结果是平滑和边缘锐化的图像（如果你问我，这很酷！）

```
import numpy as np
from scipy import ndimage
from numpy.lib import stride_tricks

def get_rotating_kernels():

    kernels = list()

    protokernel = np.arange(9).reshape(3,  3)

    for k in xrange(9):

        ax1, ax2 = np.where(protokernel==k)
        kernel = np.zeros((5,5), dtype=bool)
        kernel[ax1: ax1+3, ax2: ax2+3] = 1
        kernels.append(kernel)

    return kernels

def get_rotation_smooth(im, **kwargs):

    kernels = np.array([k.ravel() for k in get_rotating_kernels()],
                dtype=bool)

    def rotation_matrix(section):

        multi_s = stride_tricks.as_strided(section, shape=(9,25),
            strides=(0, section.itemsize))

        rot_filters = multi_s[kernels].reshape(9,9)

        return rot_filters[rot_filters.std(1).argmin(),:].mean()

    return ndimage.filters.generic_filter(im, rotation_matrix, size=5, **kwargs)

from scipy import lena
im = lena()
im2 = get_rotation_smooth(im) 
```

（只是评论，`get_rotating_kernel`还没有真正优化，因为几乎没有时间花在那里）

在我的上网本上，它花了 126 秒，而莉娜毕竟是一个很小的图像。

**编辑：**

我得到了更改`rot_filters.std(1)`为`rot_filters.var(1)`以保存相当多的平方根的建议，并且它以 5 秒的顺序剃掉了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:06:43.080

我相信您将很难使用 Python + 进行显着优化`scipy`。但是，我能够通过使用直接`as_strided`生成`rot_filters`而不是通过布尔索引进行小幅改进。这是基于一个非常简单的 n 维`windows`函数。（[在](https://stackoverflow.com/q/12612663/577088)我意识到 2d 卷积函数存在于`scipy`. 有关其工作原理的说明，请参见下文：

```
import numpy as np
from scipy import ndimage
from numpy.lib import stride_tricks

# pass in `as_strided` as a default arg to save a global lookup
def rotation_matrix2(section, _as_strided=stride_tricks.as_strided):
    section = section.reshape(5, 5)  # sqrt(section.size), sqrt(section.size)
    windows_shape = (3, 3, 3, 3)     # 5 - 3 + 1, 5 - 3 + 1, 3, 3
    windows_strides = section.strides + section.strides
    windows = _as_strided(section, windows_shape, windows_strides)
    rot_filters = windows.reshape(9, 9)
    return rot_filters[rot_filters.std(1).argmin(),:].mean()

def get_rotation_smooth(im, _rm=rotation_matrix2, **kwargs):
    return ndimage.filters.generic_filter(im, _rm, size=5, **kwargs)

if __name__ == '__main__':
    import matplotlib.pyplot as plt
    from scipy.misc import lena
    im = lena()
    im2 = get_rotation_smooth(im)
    #plt.gray()      # Uncomment these lines for
    #plt.imshow(im2) # demo purposes.
    #plt.show() 
```

上面的函数`rotation_matrix2`等价于以下两个函数（它们实际上比你的原始函数慢一点，因为`windows`更通用）。这正是您的原始代码所做的——将 9 个 3x3 窗口创建为一个 5x5 数组，然后将它们重新整形为一个 9x9 数组进行处理。

```
def windows(a, w, _as_strided=stride_tricks.as_strided):
    windows_shape = tuple(sa - sw + 1 for sa, sw in zip(a.shape, w))
    windows_shape += w
    windows_strides = a.strides + a.strides
    return _as_strided(a, windows_shape, windows_strides)

def rotation_matrix1(section, _windows=windows):
    rot_filters = windows(section.reshape(5, 5), (3, 3)).reshape(9, 9)
    return rot_filters[rot_filters.std(1).argmin(),:].mean() 
```

`windows`只要窗口具有相同的维数，就可以处理任何维数的数组。以下是其工作原理的细分：

```
 windows_shape = tuple(sa - sw + 1 for sa, sw in zip(a.shape, w)) 
```

我们可以将`windows`数组视为 nd 数组的 nd 数组。外部 nd 阵列的形状由窗口在较大阵列内的自由度决定；在每个维度上，窗口可以占据的位置数等于较大数组的长度减去窗口的长度加一。在这种情况下，我们有一个 3x3 窗口到一个 5x5 数组中，所以外部二维数组是一个 3x3 数组。

```
 windows_shape += w 
```

内部 nd 数组的形状与窗口本身的形状相同。在我们的例子中，这又是一个 3x3 数组。

现在大步前进。我们必须为外部 nd 数组和内部 nd 数组定义步幅。但事实证明它们是一样的！毕竟，窗口在更大的数组中移动的方式与单个索引在数组中移动的方式相同，对吧？

```
 windows_strides = a.strides + a.strides 
```

现在我们有了创建窗口所需的所有信息：

```
 return _as_strided(a, windows_shape, windows_strides) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:54:58.047

对于复杂的每像素 + 邻域操作，您可以考虑使用 cython 来提高性能。它允许以接近 Python 语法的 for 循环高效地编写代码，该语法稍后会转换为 C 代码。

为了获得灵感，您可以查看 scikit-image 代码，例如：

[https://github.com/scikit-image/scikit-image/blob/master/skimage/filter/_denoise.pyx](https://github.com/scikit-image/scikit-image/blob/master/skimage/filter/_denoise.pyx)

# matlab - 通过重复重叠向量来创建矩阵

> ID：12966512
> 
> 赞同：4
> 
> 时间：2012-10-19T02:24:58.450
> 
> 标签：matlab, vector, matrix, vectorization

我在 MATLAB 中编写以下代码时遇到了很大困难：假设您有以下向量：

```
a   
b
c
d
e
f
g
h
... 
```

指定（偶数）窗口大小，`L`按`n`列创建以下维度矩阵（例如，`L = 4`）：

```
a c e ...
b d f ...
c e g ...
d f h ... 
```

更困难的是采用任意长度的向量，指定窗口的数量，并优化（最大化）窗口大小，以便在向量末尾转储更少的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:29:11.823

# 简短的回答

`bsxfun`在这种情况下是你的朋友。下面*的单线*（假设你知道`L`并且`v`是你的向量）做你想要的

```
v(bsxfun(@plus, [0:L-1]', 1:L/2:numel(v)-L)) 
```

# 解释

为了尝试并理解它，让我们进一步看看。这个想法是首先创建一个向量来确定窗口在`v`向量中的起始位置。Windows 启动每个`L/2`条目（`L`是偶数，所以我们可以划分）。但是有多少个窗户适合？我们可以依靠 MATLAB 来解决这个问题：

```
start_offset = 1:L/2:numel(v)-L; 
```

这里我们只需要指定

*   第一个窗口位于索引 1
*   windows启动每个`L/2`条目
*   最后一个窗口应该*在 v 向量结束之前至少开始 L 个条目*。这样最后一个窗口拳头就在那里。

现在，示例的其余部分：

```
v = 'a':'z';
L = 4;

% indices in every output matrix column are contiguous
% and the difference between first and last is `L-1`
id1 = [0:L-1]';

% start_offset determines where in the input vector v every window starts.
% windows start every L/2 entries. The last entry that fits will start
% at some index, from which we can still use L subsequent indices to access v
start_offset = 1:L/2:numel(v)-L;

% calculate how many entries were dropped from v
% from number of elements in v subtract the largest index value used
dropped = numel(v) - (start_offset+L-1);

% window indices are created using bsxfun and singleton expansion.
% Every window's indices are given by [0:L-1] + window start index
idx = bsxfun(@plus, id1, start_offset);

v(x)

ans =

  acegikmoqsu
  bdfhjlnprtv
  cegikmoqsuw
  dfhjlnprtvx 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T02:40:07.833

在向量中创建索引矩阵。对于 L=4（我假设您与 L/2 重叠），索引为 [1,2,3,4;3,4,5,6;5,6,7,8] 等。令 x = 1 :L, y = L/2, 索引向量为 x+0y,x+1y,x+2y，以此类推。

```
% let your initial data be in vector "data"
L = 4
N = floor(length(data)/(L/2))-1 % number of windows, or you specify this
mi = repmat(1:L,[N,1]) + repmat((L/2) * (0:(N-1))',[1,L]) % x + y * 0,1,2...
out = data(mi) % out is N-by-L, transpose to L-by-N if you like 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T02:57:33.927

这是做你想做的事情的一般方法：

1）计算适当的窗口宽度（和相应的移位）
2）通过从 1 迭代您希望每列移动窗口的量直到最终值来确定每列的起始索引。将其设为行向量。
3) 用于`bsxfun`将其扩展为索引矩阵。
4) 使用索引从原始向量中获取值。

```
vec = 1:17; #% original data vector
num_windows = 3; #% specified number of windows
possible_window_length = 1:length(vec);
window_length = possible_window_length(find(possible_window_length +...
    (num_windows-1) * possible_window_length/2 < length(vec),1,'last'));
window_shift = floor(window_length)/2;
window_length = window_shift * 2; #% calculated window length
max_final_start_index = (length(vec)-window_length+1);
start_indices = 1:window_shift:max_final_start_index;
inds = bsxfun(@plus,start_indices,(0:window_length-1)');
soln = vec(inds); #% get the solution
num_excluded_vals = max_final_start_index - start_indices(end)
disp(soln);
num_excluded_vals =  1
disp(soln);
    1    5    9
    2    6   10
    3    7   11
    4    8   12
    5    9   13
    6   10   14
    7   11   15
    8   12   16 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T03:39:45.823

在 MATLAB 中有很多方法可以通过操作索引、过程方法、矢量化解决方案等来做到这一点。然而，我不禁想到，如果 MATLAB 对函数式编程。本着这种精神，我提出以下解决方案。确保在定义时这些变量中没有任何值。

```
take=@(mat,n)mat(1:n)
partition=@(mat,L)cell2mat(arrayfun(@(x)take(circshift(mat(:),-x*L/2),L),...
        0:fix((length(mat)-L)/2+1)-1,'UniformOutput',0)) 
```

现在用一个测试向量试试：

```
partition(1:10,4)

 %ans = 
 %    1     3     5     7
 %    2     4     6     8
 %    3     5     7     9
 %    4     6     8    10 
```

上述解决方案丢弃了向量末尾不适合`L`分区后长度的最终值。您现在可以在此基础上处理其他安排，并找出最佳窗口长度以最大限度地减少最终浪费等。

# java - Spring MVC：导入与另一个导入语句冲突

> ID：12966513
> 
> 赞同：2
> 
> 时间：2012-10-19T02:25:35.670
> 
> 标签：java, spring-mvc, import

我有以下内容：

```
import org.springframework.stereotype.Controller;
import au.edu.unimelb.atcom.common.model.Controller; 
```

Eclipse 给了我错误：

> 导入 au.edu.unimelb.atcom.common.model.Controller 与另一个导入语句冲突

我使用的唯一实例是在控制器注释中，我已将其更改为：

```
@org.springframework.stereotype.Controller 
```

我仍然遇到冲突。有没有办法解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:28:46.573

使用全名来声明我自己的类有效并且不需要显式导入：

```
private au.edu.unimelb.atcom.common.model.Controller test; 
```

并且注释保持为`@Controller`.

# javascript - 使用 jQuery 检查图像是否存在时加载图像不起作用

> ID：12966514
> 
> 赞同：1
> 
> 时间：2012-10-19T02:25:42.987
> 
> 标签：javascript, jquery, ajax, asynchronous, currying

我有这个功能应该根据它们的标题检查图像是否存在直到它们停止出现的点：

```
function LoadPictures(){
        const PIC_MAX = 12;

        var i = 1;

        while (i <= PIC_MAX){
            $.ajax({url: "pic" + i + ".jpg",
                type: "HEAD",
                success: function(){
                    $("body").append("<img src='pic" + i + ".jpg' />");
                },
                error: function(){
                    i = PIC_MAX + 1;
                }
            });

            i++;
        }
    } 
```

然而，当我运行该函数时，我得到的只是空白框。我知道循环根据出现的框的数量正确计算了现有图像，但它无法加载它们。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T02:28:57.823

这是因为回调是异步的，所以`i`每次回调执行时， 的值很可能是循环中的最后一个值。考虑以下示例（[DEMO](http://jsfiddle.net/Xef5a/)）：

```
var length = 10;
var url = window.location;
for (i=0 ; i<length ; i++) {
    $.get(url, function(result) {
        console.log(i);
    });
} 
```

在这里，记录的值`i`不会是 1 到 10，因为`i`它是一个局部变量，在服务器发送响应时会继续更新。

* * *

您可以使用一种称为“currying”的技术来解决这个问题。将回调函数包装在另一个函数中，该函数会`i`立即传递当前值（[DEMO](http://jsfiddle.net/Xef5a/3/)）：

```
success: (function(i){
    return function() {
        $("body").append("<img src='pic" + i + ".jpg' />");
    }
})(i), 
```

# php - 带分页的 PHP - 我知道我快到了

> ID：12966517
> 
> 赞同：1
> 
> 时间：2012-10-19T02:26:42.283
> 
> 标签：php

我创建了一个数据库搜索，该数据库生成一个 HTML 表来显示结果。结果显示文章标题，该标题超链接到其在服务器上的位置，以及文章的作者。

在我使用在线脚本设置分页之前，一切正常。分页返回 25 个结果，并导航到下一页。第一页中的所有结果都很好，但似乎搜索查询没有被带到其他页面。

如果另一个页面选择“2, 3, ..., last”，它会显示来自整个 mysql 表的信息，而不是查询的数据。

我已经设置了会话来携带搜索词，但它似乎不起作用。我相信问题出在我用于显示结果的代码中。

我使用的脚本将此作为显示结果的示例，但我无法让它与我当前的“while 循环语句”一起使用 **示例如下**

```
 if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?page=$next\">next �&lt;/a>";
    else
        $pagination.= "<span class=\"disabled\">next �&lt;/span>";
    $pagination.= "</div>\n";       
}
?>

<?php
    while($row = mysql_fetch_array($result))
    {

    // Your while loop here

    }
?>

<?=$pagination?> 
```

**这是我使用**的最后一点脚本，用于显示数据。

```
<h2>Results</h2>

<table border="0" cellpadding="5">
  <tr>
    <td><div align="center"><strong>Title</strong></div></td>
    <td><div align="center"><strong>Author</strong></div></td>
  </tr>
<?php do { ?>

<tr>
  <td><?php echo  '<a href="' . 'http:filelocation' . $row['pdf_path'] . '" target="_new">' .$row['pdf_title'] . '</a>'; 
 ?></td>
  <td><?php echo $row['author'] ;?></td>
  <td><div align="center"><?php echo $row['pages']; ?></div></td>
  </tr>
<?php } 

while ($row = mysql_fetch_array($sql))

 ?> 
```

我正在使用“do while”语句来获取数据并显示结果，但不知道如何使用正确的语法添加“while($row = mysql_fetch_array($result))”。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:31:25.710

假设您的搜索查询是`$searchquery`

```
 $pagination.= "<a href=\"$targetpage?searchquery=$searchquery&page=$next\">next �&lt;/a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:56:59.367

我认为您正在从搜索表单中获取该值，因此：

*   你在使用 GET 方法吗？
*   您如何保留过滤数据的参数？

然后在您的 search.php 中，您需要获取提交的参数，这些参数将在`$_GET` 变量中，然后再次过滤您的数据。

# android - 使用 DialogFragment 的自定义对话框

> ID：12966518
> 
> 赞同：0
> 
> 时间：2012-10-19T02:26:55.023
> 
> 标签：android, progressdialog, android-dialogfragment

我最近正在尝试转换一个使用 ProgressDialog 扩展 DialogFragment 而不是 Dialog 的应用程序。

你怎么

1.  创建一个扩展 DialogFragment 的自定义对话框类
2.  然后通过从Activity调用这个类来加载对话框

我可以看到一个超级基本的例子吗？什么方法可以覆盖？那么构造函数呢？

现在这就是我正在做的事情（旧方式）：

```
private MyProgressDialog progressDialog = new MyProgressDialog(
                    getActivity());
progressdialog.show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:46:56.573

所以你想要一个进度对话框***片段***？

其实很简单。DialogFragment 只是环绕对话框的 Fragments，因此您只需要像往常一样在 DialogFragment 的 onCreateDialog 方法中创建对话框。

例如

```
class ProgressDialogFragment extends DialogFragment{
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        ProgressDialog dialog = new ProgressDialog(getActivity());
        dialog.setMessage("Loading");
        return dialog;
    }
} 
```

并显示 DialogFragment：

```
mButton = (Button)getView().findViewById(R.id.button1);
mButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        new ProgressDialogFragment().show(getFragmentManager(), "MyProgressDialog");
    }
}); 
```

# arrays - 将文本文件分配给数组

> ID：12966520
> 
> 赞同：1
> 
> 时间：2012-10-19T02:27:15.233
> 
> 标签：arrays, file, input, while-loop

我要做的是从文本值中获取值，然后将它们放入双精度数组中。这就是我所拥有的，但它并没有实现我的目标，而是打印出我不想要的东西。我不能在这里使用数组列表，只能使用数组。

这是文本文件中的内容：*70.3 70.8 73.8 77.0 80.7 83.4 84.5 84.4 83.4 80.2 76.3 72.0*

代码：

```
 Scanner temperatureFile = new Scanner(new File("KeyWestTemp.txt"));
    double [] temperature = new double[12];

    while(temperatureFile.hasNext())
    {
        temperature[index] = temperatureFile.nextDouble();
        index++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:30:26.180

我认为这是问题所在，但我可能错了:-)

```
temperature[11] = temperatureFile.nextDouble(); // index? 
```

详细地说，你应该有类似的东西：

```
i = 0; // index 'runner'
while(temperatureFile.hasNext())
{
    temperature[i] = temperatureFile.nextDouble();
    i++;
} 
```

但是，这不是通用的，您应该在声明数组大小之前真正估计大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:33:04.727

Reut 的想法是正确的。您只分配给温度数组的最后一个元素。尝试：

```
for (int i = 0; temperatureFile.hasNext() && (i < 12); i++) {
    temperature[i] = temperatureFile.nextDouble();
} 
```

# javascript - 时间不显示在 Flot 图表中

> ID：12966521
> 
> 赞同：1
> 
> 时间：2012-10-19T02:27:16.773
> 
> 标签：javascript, flot

我的 data1.csv 中有这些。左列是时间，右列是数据。我想在 x 轴上显示时间，在 flot 图表上显示 y 轴上的数据。

```
09:35,13
10:35,12
11:35,38
12:35,12
13:35,11
14:35,10
15:35,43
16:35,42
17:35,39
18:35,45 
```

我已经完成了加载数据的功能，并且没有问题。

```
function graphUpdate() {
            $.ajax({
                url : "file/data1.csv",
                type : "GET",
                dataType : "text",
                success : oncsvReceived
            });
        } 
```

现在我的问题是在浮动图表的 x 轴上显示这些时间，如下所示。任何人都可以在这里帮助我吗？尝试阅读文档并在此处查看，这对我没有多大帮助。我将非常感谢您的帮助。

```
function oncsvReceived(data) {
    var alltext = $.csv()(data);
    $.plot($("#placeholder"), [alltext], {
                 yaxis: {

                 },
                                 xaxis:{
                                 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:44:30.567

您必须使用时间插件进行浮动并设置`mode`为`time`

请参阅文档：[https ://github.com/flot/flot/blob/master/API.md#customizing-the-axes](https://github.com/flot/flot/blob/master/API.md#customizing-the-axes)

更新 ：

几个月前，我通过单独下载使用它。但我不确定最新版本。请查看 API.txt 以检查是否有任何变化。

链接：[https ://github.com/flot/flot/blob/master/jquery.flot.time.js](https://github.com/flot/flot/blob/master/jquery.flot.time.js)

# mysql - MySQL按日期，算术，然后对结果求和

> ID：12966524
> 
> 赞同：0
> 
> 时间：2012-10-19T02:27:30.850
> 
> 标签：mysql, case

我有一个只有三列的表，ID、DATETIME、VALUE

每个 DATETIME 都来自白天的各种样本，来自不同的仪表。

我需要对每个值执行数学函数，例如。(value * 60 * 10)/1000000 = new_value，然后按 DATE(datetime) 对 new_value 进行分组，并对每个日期的值求和，并对一组选定的 ID 执行此操作。

我需要的结果是每个日期，以及这些仪表的总和值。

我试过了：

```
SELECT date(sub_meter_data.date) as date, 
sum(CASE WHEN sub_meterID = '58984' OR '58985' OR '58986' OR '58987' THEN (((value*60)*10)/1000000) ELSE 0 END) as value
FROM `sub_meter_data` WHERE
date(sub_meter_data.date) > '2012-10-01'
GROUP BY date(sub_meter_data.date) 
```

以下是一些示例数据：

```
sub_meterID       date           value
58984     2012-10-18 23:23:05.000   94.82643
58982     2012-10-18 23:28:52.000   97.43638
58984     2012-10-18 23:33:04.000   100.1923
58985     2012-10-18 23:43:01.000   97.93111
58984     2012-10-18 23:53:05.000   93.02759
58986     2012-10-19 00:03:03.000   88.29563
58984     2012-10-19 00:13:02.000   81.23074
58987     2012-10-19 00:23:07.000   86.37943
58984     2012-10-19 00:33:04.000   88.64834 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:30:00.520

请尝试以下：

```
SELECT date(`date`), 
       sum(((value*60)*10)/1000000) as value
FROM `sub_meter_data` 
where date(sub_meter_data.date) > '2012-10-01' 
      and sub_meterID in('58984','58985','58986','58987')
group by date(`date`); 
```

# php - CakePHP：调用成员函数allow()

> ID：12966527
> 
> 赞同：4
> 
> 时间：2012-10-19T02:27:54.623
> 
> 标签：php, cakephp, authentication

受保护的控制器.php

```
<?php

class ProtectedController extends AppController {

    public $components = array(
        'Session',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'home', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'home', 'action' => 'index')
        )
    );

    public $paginate = array(
        'limit' => 2
    );

    public function beforeFilter() {
        $this->Auth->allow('index', 'view');
    }
} 
```

应用控制器

```
App::uses('Controller', 'Controller');

class AppController extends Controller {

} 
```

用户控制器

```
<?php

App::uses('ProtectedController', 'Controller');

class UsersController extends ProtectedController {

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('add', 'logout');
    }
} 
```

我一直在

```
Fatal Error
Error: Call to a member function allow() on a non-object    
File: /Library/WebServer/Documents/cakephp_stats/app/Controller/ProtectedController.php 
Line: 18

Notice: If you want to customize this error message, create app/View/Errors/fatal_error.ctp 
```

现在的错误。

有人如何解决这个问题。从我所看到的情况来看，它应该在 ProtectedController 中加载组件，并且 AuthComponent 将被加载。

编辑：

第 18 行是 ProtectedController：

```
public function beforeFilter() {
    $this->Auth->allow('index', 'view');
} 
```

编辑：

我现在唯一能做的就是剪掉这个：

```
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'home', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'home', 'action' => 'index')
    )
); 
```

到 AppController 然后覆盖然后允许那里的每个人：

```
class AppController extends Controller {

    public $components = array(
        'Session',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'home', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'home', 'action' => 'index')
        )
    );

    public function beforeFilter() {
        $this->Auth->allow('*');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:41:35.317

我正在做类似的事情。与您的控制器的主要区别是：

*   My也`AppController`包含该`Auth`组件，并`$this->Auth->allow()`在其`beforeFilter`.
*   My`ProtectedController`没有声明 login/logoutRedirects，而是调用其父级的`beforeFilter`.
*   我的 UsersController 根本没有扩展`ProtectedController`。我的受保护控制器只包含`Auth`组件并调用其父级的`beforeFilter`.

只是推测：如果未经授权的人试图访问受保护的资源，默认的 Auth 组件将重定向到 /users/login。当您保护 UsersController 并且*不允许*该`login`操作时，这可能会导致您遇到的行为。

# objective-c - 手动实现@property

> ID：12966529
> 
> 赞同：3
> 
> 时间：2012-10-19T02:28:27.090
> 
> 标签：objective-c, properties, automatic-ref-counting

当手动实现@property 而不是使用@synthesize 时，是否必须包含ARC 代码？

可以这样实现吗：

```
@synthesize var1;

- (void)setvar1:(NSObject *)newVar1
{
    var1 = newVar1;
} 
```

或者你必须包括`retain`等`release`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:31:55.230

在 ARC 下，您不必（实际上也不能）手动`retain`或`release`变量。除了需要大写 V in 之外，您的实现`setVar1:`在 ARC 下是完全可以接受的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:32:11.890

使用 ARC 时，您*不能*编写手动使用`retain`、`release`等的代码。因此，如果您选择手动实现属性 getter 和 setter，并且启用了 ARC，则不必包含额外的内存管理代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T02:36:14.413

您所说的“ARC 代码”（`retain`,`release`等）实际上是手动引用计数，而不是自动的。

如果您在没有 ARC 的情况下进行编译，则需要根据需要`retain`复制或复制对象。如果您在 ARC 下，编译器会为您处理它。具体来说，编译器将保留`newVar1`if `var1`is declared `__strong`。

# mysql - 将显示表状态显示表中的确切行？

> ID：12966538
> 
> 赞同：1
> 
> 时间：2012-10-19T02:29:20.737
> 
> 标签：mysql, backup, mysqldump, table-statistics

我在 DB 中有一个表，它的空间大约为 90 GB。我试图计算表中的行数 `select count(idNewsNotification) from notification`，结果

`4982397`

`1 row in set (59 min 48.35 sec)`

但是当我查询使用`show table status like <table_name>`它时显示

```
 Engine: InnoDB
 Version: 10
 Row_format: Compact
 Rows: 8631267
 Avg_row_length: 11237
 Data_length: 96996425728
 Max_data_length: 0
 Index_length: 175374336
 Data_free: 0
 Auto_increment: NULL
 ..... 
```

知道表中记录数的完美程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:14:59.197

您的计数花了一个小时的事实意味着您正在运行 InnoDB（它不会缓存此数据）。

因此，表格状态是基于其他因素的近似值，不可信。

count(*) 将是准确的，但等待很痛苦。

从[文档](http://dev.mysql.com/doc/refman/5.1/en/show-table-status.html)：

> 一些存储引擎，例如 MyISAM，存储确切的计数。对于其他存储引擎，例如 InnoDB，这个值是一个近似值，可能与实际值相差 40% 到 50%。在这种情况下，请使用 SELECT COUNT(*) 获得准确的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-13T07:37:45.180

在某些情况下，这不是一个好方法。

> 对于 InnoDB 表，行数只是 SQL 优化中使用的粗略估计。（如果 InnoDB 表是分区的，这也是如此。）

**测试：**

我有相同的数据库（在不同的服务器上转储和导​​入）都是innoDB

同一张表：

```
Server One: 49,231
Server Two: 53,242 
```

49231 不正确，您可以在 phpmyadmin 中看到带有“~”标记的此表

# vba - 选择单元格并自动将公式应用到每个单元格的右侧

> ID：12966544
> 
> 赞同：0
> 
> 时间：2012-10-19T02:30:33.127
> 
> 标签：vba, excel

感谢你们。根据回复，再深入一点，我保持我的代码是这样的：

```
Public Function LowHigh(custo As Integer)
    If custo > 10.99 And custo <> 0 Then
        LowHigh = "1.4"
    Else
    If custo < 11 And custo <> 0 Then
        LowHigh = "1.35"
    Else
    If custo <= 0 Then
        LowHigh = "Valor Inválido"
    End If
    End If
    End If

End Function
Public Sub lorh()
ActiveCell.Formula = "=LowHigh(" & ActiveCell.Offset(0, 0).End(xlToLeft).Address & ")"

End Sub 
```

[示例图片](http://i.stack.imgur.com/cGDc2.png)

在选择有问题的正确值并按下按钮时，forfunção LowHigh 运行，问题是它需要逐个单元格完成，我需要选择左侧的整个范围并立即单击按钮单元格右侧间隔是填充公式如下图： [最终图像](http://i.stack.imgur.com/cGDc2.png)

我试过这样的事情：

```
Public Function LowHigh (cost As Integer)
     If cost> And cost 10.99 <> 0 Then
         LowHigh = "1.4"
     else
     If cost <11 And cost <> 0 Then
         LowHigh = "1:35"
     else
     If cost <= 0 Then
         LowHigh = "Invalid"
     end If
     end If
     end If

end Function
Public Sub lorh ()
Range ("ActiveCell", "ActiveCell"). FormulaR1C1 = "LowHigh = (" & Range (ActiveCell.Offset (0, 0). End (xlToLeft)). & Address ")"

end Sub 
```

但它没有用，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:54:40.337

无意冒犯，但你真的需要阅读任何关于使用 if...else 的教程，因为你使用它们的方式都是错误的。您在其他 if 语句中插入 if 语句，而不是说`else if`，让我告诉你。

```
if something then
    blah
else
    if something else
        blah else
    end if
end if 
```

这就是你在做什么，这就是你的意思

```
if something then
    blah
else if something else then
    blah else
else if something else again then
    blah else again
end if 
```

差异应该通过适当的缩进（您的代码没有）来说明问题。

编辑：哦，我忘了最明显的：

```
If cost> And cost 10.99 <> 0 Then 
```

这完全没有意义。你是说'如果成本大于 and （这是一个运算符）并且成本 10.99 <> 0 （这意味着什么）那么。如果 VBA 中的语句实际上是您用简单的英语所说的话：

```
If cost > 10.99 and cost <> 0 then 
```

我想这就是你的意思，但是有那个`and cost <> 0`部分有点不必要。

# c# - LINQ to XML 加入问题

> ID：12966548
> 
> 赞同：1
> 
> 时间：2012-10-19T02:31:33.033
> 
> 标签：c#, xml, linq, join, linq-to-xml

我在尝试对两个单独的 XML 文件执行的连接时遇到了真正的麻烦。

我有两个类来描述我从 XML 文件中提取的每个对象，它们是

```
public class XMLCustomers
{
    public String CustomerID { get; set; }
    public String ContactName { get; set; }
} 
```

和

```
public class XMLOrders
{
    public String OrderID { get; set; }
    public String CustomerID { get; set; }
    public String OrderDate { get; set; }
    public String ShippedDate { get; set; }
    public String Freight { get; set; }
    public String ShipName { get; set; }
    public String ShipCity { get; set; }
    public String ShipCountry { get; set; }
} 
```

我的最后一堂课存储了我对两组数据执行的连接。

```
public class PostXMLJoinOrder
{
    public String OrderID { get; set;}
    public String ContactName { get; set;}
    public String OrderDate { get; set;}
    public String ShippedDate { get; set;}
    public String Freight { get; set;}
    public String ShipName { get; set;}
    public String ShipCity { get; set;}
    public String ShipCountry { get; set;}
} 
```

最后，这是我从 XML 文件加载信息的两种方法，第三种方法执行连接并将信息存储在 IEnumerable 中

```
 public IEnumerable<XMLCustomers> LoadXMLCustomers() {
        var custs = from x in XElement.Load(System.Web.HttpContext.Current.Server.MapPath(@"~\App_Data\XCustomers.xml")).Elements()
                    select new XMLCustomers
                    {
                        ContactName = x.Attribute("ContactName").Value,
                        CustomerID = x.Attribute("CustomerID").Value

                    };
        int size = custs.Count();
        return custs;
    }

    public IEnumerable<XMLOrders> LoadXMLOrders() {
        var ords = from x in XElement.Load(System.Web.HttpContext.Current.Server.MapPath(@"~\App_Data\XOrders.xml")).Elements()
                    select new XMLOrders
                    {

                        OrderID = x.Attribute("ContactName").Value,
                        CustomerID = x.Attribute("CustomerID").Value,
                        OrderDate = x.Attribute("OrderDate").Value,
                        ShippedDate = x.Attribute("ShippedDate").Value,
                        Freight = x.Attribute("Freight").Value,
                        ShipName = x.Attribute("ShipName").Value,
                        ShipCity = x.Attribute("ShipCity").Value,
                        ShipCountry = x.Attribute("ShipCountry").Value
                    };
        int size = ords.Count();
        return ords;

    }

    public IEnumerable<PostXMLJoinOrder> LoadPostXMLJoinOrders() {
        var joinQuery = from customer in LoadXMLCustomers()
                        from orders in LoadXMLOrders()
                        where customer.CustomerID == orders.CustomerID
                        select new PostXMLJoinOrder
                        {

                            OrderID = orders.OrderID,
                            ContactName = customer.ContactName,
                            OrderDate = orders.OrderDate,
                            ShippedDate = orders.ShippedDate,
                            Freight = orders.Freight,
                            ShipName = orders.ShipName,
                            ShipCity = orders.ShipCity,
                            ShipCountry = orders.ShipCountry

                        };
        return joinQuery;

    } 
```

我已经测试了从我的 LINQ 返回的项目数量，它仍然是 0；我已经仔细检查了从文件中加载的所有内容，但我似乎无法理解它在哪里出错了。

编辑：这是一个加载问题。XML 文件肯定存储在正确的 App_Data 文件夹下。但是当单独的 LoadXMLCustomers() 运行时，我在 lINQ 语句选择并创建新的 Loaded Customer 对象的部分得到 NullReferenceException。

**我已经确保 XML 文档的构建是内容，并且 copyToOutputDirectory 设置为如果较新**

这是异常，并且 var 值为 null，因此由于某种原因它肯定不会加载： ![异常截图](../Images/d3c577b2b0271253bb7dc495ce91688f.png)

已解决：我在这里学到的教训是，您需要密切关注您的 XML 和数据。如果您的某些 XML 数据有空值，那么您需要确保 select 语句可以处理它。

上面我有代码

```
 select new XMLOrders
                {

                    OrderID = x.Attribute("ContactName").Value,
                    CustomerID = x.Attribute("CustomerID").Value,
                    OrderDate = x.Attribute("OrderDate").Value,
                    ShippedDate = x.Attribute("ShippedDate").Value,
                    Freight = x.Attribute("Freight").Value,
                    ShipName = x.Attribute("ShipName").Value,
                    ShipCity = x.Attribute("ShipCity").Value,
                    ShipCountry = x.Attribute("ShipCountry").Value
                }; 
```

这确实应该包括对字符串值的强制转换，因此如果有空数据，则 "" 不会引发空异常。其次，我应该得到元素值而不是属性值。

```
 select new XMLOrders
                    {

                        OrderID = (string)x.Element("OrderID").Value,
                        CustomerID = (string)x.Element("CustomerID").Value,
                        OrderDate = (string)x.Element("OrderDate").Value,
                        ShippedDate = (string)x.Element("ShippedDate").Value,
                        Freight = (string)x.Element("Freight").Value,
                        ShipName = (string)x.Element("ShipName").Value,
                        ShipCity = (string)x.Element("ShipCity").Value,
                        ShipCountry = (string)x.Element("ShipCountry").Value
                    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:39:16.867

您是否尝试过不使用`join`，而只是：

```
from customer in LoadXMLCustomers()
from order in LoadXMLOrders()
where customer.CustomerID = order.CustomerID
select new PostXMLJoinOrder
... 
```

请注意，`LoadXMLOrders()`可以为每个客户再次调用此类查询。所以先预存一下。

也不要忘记具体化调用`ToArray()`/的查询`ToList()`。

# python - 将 SQLite 加载到 Python 时出错

> ID：12966553
> 
> 赞同：0
> 
> 时间：2012-10-19T02:32:31.390
> 
> 标签：python, sqlite, python-2.7

我正在尝试将 SQLite 与 python 一起使用，并且我正在查看 python 网站上的示例。一个例子是为 SQLite 构建一个 shell： [py](http://docs.python.org/library/sqlite3.html#module-functions-and-constants)

这是脚本的开头

```
import sqlite3

con = sqlite3.connect(":memory:")
con.isolation_level = None
cur = con.cursor() 
```

我正在从文本编辑器加载文件，我对导入文件时遇到的错误感到困惑。

```
>>>import SQLoad
Traceback (most recent call last):
File"<stdin>", line 1, in <module>
File "SQLoad.py", line 1, in <module>
  c = conn.cursor()
NameError: name 'conn' is not defined 
```

我很困惑，因为我上传的内容中没有定义“conn”。这是必须定义的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:52:57.233

您的第一个代码块显示连接变量名为`con`。

错误消息显示您已将该变量写为`conn`，并且它位于 的第一行`SQLoad.py`，连接尚未打开。

您的第一个代码块看起来是正确的，但它不是实际存储在`SQLoad.py`.

# sql - 如果结果为空，则无法从选择查询创建临时表

> ID：12966555
> 
> 赞同：-1
> 
> 时间：2012-10-19T02:32:36.990
> 
> 标签：sql, sql-server, tsql, temp-tables

我想从选择查询中创建一个临时表（我的表有很多列，因此我不想手动创建临时表）我使用以下查询：

```
SELECT * INTO #TempTable
FROM MyTable
WHERE ... 
```

如果此查询返回空行，则不会创建`#TempTable`. 因此，我不能将其`#TempTable`用于下一个查询。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:39:08.667

如果`SELECT * FROM MyTable WHERE ...`您发布的代码中的查询：

```
 SELECT * 
 INTO TempTable 
 FROM MyTable WHERE ... 
```

没有返回任何行，它将***创建***一个空的`TempTable`，但如果没有与该`WHERE`子句匹配的行，它将不会在其中填充任何数据。但它应该`TempTable`至少创建具有与 相同结构的表，`MyTable`并且它将是空的。

例如这个：

```
SELECT * INTO TempTable FROM MyTable WHERE 1 <> 1; 
```

`TempTable`将始终创建一个具有相同结构的空表，`MyTable`因为谓词`1 <> 1`始终为假。

但是，您可以像这样声明它：

```
DECLARE @Temp TABLE(Field1 int, ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:43:55.590

这是因为您正在动态创建和填充临时表，而不是显式创建它。在这种情况下，您必须在创建临时表之前检查是否存在临时表。

尝试这个：

```
IF OBJECT_ID('tempdb..#TempTable') IS NOT NULL
BEGIN
    DROP TABLE #TempTable
END

SELECT * INTO #TempTable FROM MyTable 
Select * From #TempTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T02:45:25.480

您的查询

```
SELECT * INTO #TempTable
FROM MyTable
WHERE ... 
```

如果选择不返回任何行，将创建一个空表

# php - 父/子类无法解释的错误

> ID：12966562
> 
> 赞同：0
> 
> 时间：2012-10-19T02:33:27.423
> 
> 标签：php, runtime-error

我遇到了以下类抛出无法解释的异常的问题...

```
<?php
abstract class Search_Options {

    protected $options = array();

    public function __construct($options = array()) {
        foreach ($options as $option => $value) {
            $this->setOption($option, $value);
        }
    }

    public function getOption($option) {
        return $this->options[$option];
    }

    public function setOption($option, $value) {
        $option = strtolower($option);
        if (array_search($option, $this->allowed)) {
            $this->options[$option] = $value;
            return $this;
        }
        throw new Exception($option." is not allowed.");
    }

    public function build() {
        return $this->options;
    }

    protected function between($x, $y, $z) {
        return (($x <= $y) && ($y <= $z));
    }
}

class Artist_Search extends Search_Options {

    protected $allowed = array(
        "bucket",
        "results",
        "start",
        "limit"
    );

    public function bucket($bucket) {
        $bucket = (!is_array($bucket)) ? array($bucket) : $bucket;
        return $this->setOption("bucket", $bucket);
    }

    public function results($results) {
        if ($this->between(0, $results, 100)) {
            return $this->setOption("results", $results);
        }
        throw new Exception("results must be between 0..100, supplied ".$results);
    }

    public function start($start) {
        return $this->setOption("start", $start);
    }

    public function limit($limit) {
        if (is_bool($limit)) {
            return $this->setOption("limit", $limit);
        }
        throw new Exception("limit must be true|false, supplied ".$limit);
    }
}
?> 
```

如果我运行以下命令，它可以正常工作...参见示例：[http ://codepad.org/ZXD2ZGEo](http://codepad.org/ZXD2ZGEo)

```
$s = new Artist_Search();
$q = $s->results(10)->start(5)->limit(true)->build();
print_r($q);

Array
(
    [results] => 10
    [start] => 5
    [limit] => 1
) 
```

但是，当我尝试同时调用 Artist_Search::bucket() 时，出现错误...参见示例：[http ://codepad.org/vwr7UrpG](http://codepad.org/vwr7UrpG)

```
$s = new Artist_Search();
$q = $s->bucket(array("familiarity"))->results(10)->start(5)->limit(true)->build();

print_r($q);

Fatal error: Uncaught exception 'Exception' with message 'bucket is not allowed.' in /t.php:22
Stack trace:
#0 /t.php(45): Search_Options->setOption('bucket', Array)
#1 /t.php(68): Artist_Search->bucket(Array)
#2 {main}
  thrown in /t.php on line 22 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T02:35:18.347

`in_array`不使用`array_search`。

在您的情况下`array_search`返回`0`（因为`bucket`是数组的第 0 个元素） - 它被强制转换`false`为`if`

# ruby-on-rails - 如果没有 Gemfile 中的 Heroku gem，则无法从 Rake 任务中调用 heroku CLI

> ID：12966564
> 
> 赞同：7
> 
> 时间：2012-10-19T02:33:56.037
> 
> 标签：ruby-on-rails, ruby, heroku, rubygems, ruby-on-rails-3.2

我已经在 Heroku 上运行了一段时间的应用程序，并且在最近的部署中看到了 Heroku gem 已被弃用以支持 Heroku Toolbelt 的消息。使用工具带，我所有的 Heroku 命令都可以在命令行中正常工作，但在 Rake 任务（我已经为部署设置）中，我收到以下错误：

```
$ rake deploy:staging
Everything up-to-date

/Users/aramisbear/.rvm/gems/ruby-1.9.3-p194@myapp/gems/bundler-1.2.0/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': heroku is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
from /Users/aramisbear/.rvm/gems/ruby-1.9.3-p194@myapp/bin/heroku:18:in `<main>'
from /Users/aramisbear/.rvm/gems/ruby-1.9.3-p194@myapp/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/aramisbear/.rvm/gems/ruby-1.9.3-p194@myapp/bin/ruby_noexec_wrapper:14:in `<main>'

/Users/aramisbear/.rvm/gems/ruby-1.9.3-p194@myapp/gems/bundler-1.2.0/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': heroku is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
from /Users/aramisbear/.rvm/gems/ruby-1.9.3-p194@myapp/bin/heroku:18:in `<main>'
from /Users/aramisbear/.rvm/gems/ruby-1.9.3-p194@myapp/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/aramisbear/.rvm/gems/ruby-1.9.3-p194@myapp/bin/ruby_noexec_wrapper:14:in `<main>' 
```

显示的错误来自此部署 rake 任务：

```
namespace :deploy do

  desc "deploys to Production after uploading assets to S3"
  task :production do
    puts `git push heroku master`
    puts `heroku run rake db:migrate --app myapp`
    puts `heroku restart --app myapp`
  end

  desc "deploys to Staging after uploading assets to S3"
  task :staging do
    puts `git push staging staging:master`
    puts `heroku run rake db:migrate --app myapp-staging`
    puts `heroku restart --app myapp-staging`
  end
end 
```

每个任务中的两个heroku 命令就是问题所在。如果我从命令行执行它们，它们就可以正常工作。我怀疑这很重要，但我也在用 RVM 运行 OSX。

知道如何解决这个问题吗？我意识到这不是什么大不了的事，因为我可以手动运行这些附加命令或给它们起别名，但我只想知道为什么首先会出现问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T06:36:52.943

gem 的`heroku`命令版本在您的 PATH 中可能比系统的优先级更高。

我能够在测试项目中重现这一点。

当我运行时`which heroku`，我看到 shell 的选择是`/home/justinf/.rvm/gems/ruby-1.9.3-p286/bin/heroku`.

所需要的只是一个简单的`gem uninstall heroku`，回答是删除可执行文件。

`which heroku`现在给了我`/usr/bin/heroku`，我的 test.rb 现在完成且没有错误，而不是因捆绑程序异常而崩溃。

# scheme - while 循环在球拍中？

> ID：12966565
> 
> 赞同：4
> 
> 时间：2012-10-19T02:34:06.570
> 
> 标签：scheme, racket

我熟悉其他语言中的while循环，但在这里我写了一个小函数来计算项和的导数，但它只计算前两个我想知道是否有办法改变它以考虑更多2？

表达式, `E`, 表示为列表，因此`2x + 2y + x^3`表示为`(+ (* 2 x) (* 2 y) (expt x 3))`

请注意，我已经编写了用于计算指数的函数，但它是总和的一部分，并且在前 2 个之后停止

```
(define (make-sum v1 v2)
  (list '+ v1 v2))

(define (diff-sum x E)
  (make-sum (diff x (first-operator E)) (diff x (last-operator E)))) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T03:42:52.200

在专业级的 Racket 中，[for 循环](http://docs.racket-lang.org/guide/for.html)是对序列执行某些操作的标准方法。例如，以下生成一个简单的乘法表：

```
(define numbers (list 1 2 3 4 5 6))
(for/list ([item numbers])
  (list item (* item 2) (* item 3))) 
```

这是一个循环遍历每个数字，对其进行处理，并生成一个新的结果列表。相当标准；几乎每种编程语言都有跨集合迭代的概念。

在你必须为介绍性计算机科学课程编写的那种 Racket 中，你可能不得不求助于显式递归或像[map](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/private/map..rkt%29._map%29%29)这样的高阶函数，这取决于你的导师。这些其他表达迭代的方式与上面的循环具有相同的功能：我们只是用不同的方式表达它。

例如，创建上述小型乘法表的相同计算将通过显式递归表示如下：

```
(define (my-loop numbers)
  (cond [(empty? numbers) '()]
        [else
         (define item (first numbers))
         (cons (list item (* item 2) (* item 3))
               (my-loop (rest numbers)))]))
(my-loop numbers) 
```

并隐含地使用`map`：

```
(define (f item)
  (list item (* item 2) (* item 3)))
(map f numbers) 
```

# git - 无法安装 git 流

> ID：12966566
> 
> 赞同：1
> 
> 时间：2012-10-19T02:34:07.377
> 
> 标签：git, git-flow

尝试安装 git flow

跑：

```
冲泡安装 git 流

```

拿到：

```
更新 /Library/Caches/Homebrew/git-flow--git
错误：无法锁定配置文件 .git/config：权限被拒绝
错误：执行失败：git config remote.origin.url https://github.com/nvie/gitflow.git

```

同时运行：

```
wget --no-check-certificate -q -O - https://github.com/nvie/gitflow/raw/develop/contrib/gitflow-installer.sh | 须藤

```

拿到：

```
子模块路径“shFlags”：签出“2fb06af13de884e9680f14a00c82e52a67c867f1”
安装：/usr/local/bin/git-flow：没有这样的文件或目录
安装：/usr/local/bin/git-flow-init：没有这样的文件或目录
安装：/usr/local/bin/git-flow-feature：没有这样的文件或目录
安装：/usr/local/bin/git-flow-hotfix：没有这样的文件或目录
安装：/usr/local/bin/git-flow-release：没有这样的文件或目录
安装：/usr/local/bin/git-flow-support：没有这样的文件或目录
安装：/usr/local/bin/git-flow-version：没有这样的文件或目录
安装：/usr/local/bin/gitflow-common：没有这样的文件或目录
安装：/usr/local/bin/gitflow-shFlags：没有这样的文件或目录

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:45:12.797

我会说你的 SSH 密钥有一些问题。我认为可以安全地假设您使用 Macintosh 作为`brew`命令。

所以这就是我将如何解决这个问题。

```
$ ssh-keygen -t dsa
Generating public/private dsa key pair. 
```

如果您希望将其设为默认值，请将以下内容留空。如果您不想要密码，请将密码也留空

```
Enter file in which to save the key (/Users/user/.ssh/id_dsa): [id_dsa or empty] 
Enter passphrase (empty for no password):

Enter same passphrase again:
Your identification has been saved in id_dsa.
Your public key has been saved in id_dsa.pub.
The key fingerprint is:
16:8e:e8:f2:1d:c9:b9:cf:43:9a:b3:3c:c1:1f:95:93 user@localhost 
```

这里还有一个关于将 ssh 密钥添加到 github 的 GitHub[链接。](https://help.github.com/articles/generating-ssh-keys#platform-mac)

# ruby - 如果空格不存在，则在某个字符之前插入空格

> ID：12966567
> 
> 赞同：3
> 
> 时间：2012-10-19T02:34:10.377
> 
> 标签：ruby, regex

如果 a 有如下字符串：

> “_test_teste2 _test3”

如何在之前`_`没有空格且不在字符串开头的空格之前添加空格？

前任：

> “_test _teste2 _test3”

我试过这个：

```
todo.desc = todo.desc.gsub /_/, " _" 
```

它有效，但在每个`_`.

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T02:44:04.097

```
>> "_abc_de _e _f_tes_fefe".gsub(/(\S)_/,'\1 _')
=> "_abc _de _e _f _tes _fefe" 
```

# python - 将 Python 列表分解成更小的列表？

> ID：12966568
> 
> 赞同：1
> 
> 时间：2012-10-19T02:34:25.477
> 
> 标签：python, google-app-engine

在 Google App Engine 查询中使用 IN 操作限制为每个查询列表中的 30 个项目，因此我必须找到一种方法将列表分解为多个列表，每个数组中最多包含 30 个项目，并查询每个子大批。

我想出了一个小解决方案来做到这一点，但它非常不雅，我不确定这是否是最好的方法。我是 Python 新手，所以我想知道如何正确或更优雅地做到这一点？

我正在查询`User.query(User.email IN emails)`

```
max_length = 30
iter_count = len(emails) / max_length
for i in range(iter_count):         
    min = i  * max_length
    max = (i + 1) * max_length
    if min > len(emails):
       break
    if max > len(emails):
       max = len(emails)

    current_array = emails[min:max]
    # query this array 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:51:43.880

```
max_length = 30
for i in xrange(0, len(emails), max_length):
    current_array = emails[i:i+max_length]
    # query this array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:16:07.693

你可以这样做：

```
l=range(105)
step=30
print [l[i:i+step] for i in range(0,len(l),step)] 
```

您可以轻松地将其变成生成器：

```
>>> l=range(105)
>>> step=30
>>> g=(l[i:i+step] for i in range(0,len(l),step))
>>> g.next()
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29]
>>> g.next()
[30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59] 
```

# c# - 将外部文件放在项目中的什么位置

> ID：12966569
> 
> 赞同：0
> 
> 时间：2012-10-19T02:34:32.040
> 
> 标签：c#

我有一个数据集文件 a.txt，我想将其作为 Visual Studio 2010 C# 项目的一部分。我应该把它放在哪里（需要你的建议），我应该如何用 FileInfo 阅读它（因为项目可能会被不同的开发人员在 PC 上移动，硬编码路径不好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:56:03.113

您可以将它放在 /resources 或您从根目录创建的某个目录中。然后你可以在运行时从

```
System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location)) + "\\resources" 
```

或者你可以嵌入是一个资源，那么你可以使用

```
Assembly.GetManifestResourceStream(string) 
```

有关此处的更多信息 [如何在 .NET 程序集中嵌入文本文件？](https://stackoverflow.com/questions/433171/how-to-embed-a-text-file-in-a-net-assembly)

# python - 通过 Python Web 服务调用 Ruby 上的会话变量

> ID：12966573
> 
> 赞同：1
> 
> 时间：2012-10-19T02:34:53.873
> 
> 标签：python, ruby, session-state, web.py

我有一个在 python web.py 上运行的应用程序。对于几个数据项，我联系了 ruby​​ 服务。我想知道我是否可以以某种方式也跟踪 ruby​​ 中的会话。

每次 python 调用 ruby​​ 服务时，它都会将其视为不同的会话。

有什么帮助吗？

谢谢！

PS - 这可能不是微不足道的，我可能必须将会话变量作为参数传递给 ruby​​，但我很好奇。当我开始重构时，拥有它可以节省一些时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:52:47.593

通常使用会话 cookie 来跟踪客户端（在您的情况下是 Python web.py 部分）和服务器（在这种情况下是 Ruby 服务器）之间的会话。在向 Ruby 服务发出第一个请求时，请确保在 Python 部分中保存会话 cookie。当发出第二个请求时，也简单地发送 cookie 信息。我认为 Ruby 会将其视为同一个会话。

# cookies - Apache JMeter 的 Cookie Manager 不会将 cookie 添加到 POST 请求中

> ID：12966576
> 
> 赞同：11
> 
> 时间：2012-10-19T02:35:07.110
> 
> 标签：cookies, jmeter

我建立了非常简单的测试计划。

1.  登录：POST，返回一个会话cookie。
2.  获取状态：GET，返回一个用户状态。
3.  创建资源：POST，为资源提供 JSON 正文。

所以我的“测试计划”看起来像：

*   测试计划
    *   线程组
        *   HTTP 请求默认值
        *   HTTP Cookie 管理器
        *   登录（HTTP 请求采样器：POST）
        *   获取状态（HTTP 请求采样器：GET）
        *   创建资源（HTTP 请求采样器：POST）

“登录”生成的 cookie 被正确添加到“获取状态”中。
但是“创建资源”没有 cookie。我改变了他们的订单，但没有帮助。我首先使用了默认选项并更改了一些选项，但它也无济于事。

这是JMeter的错误吗？或者只是 POST http 请求不能有 cookie？
请给我任何建议。

**[已解决]**
我注意到它与路径有关，而不是方法。
您想查看 cookie 的域以及路径。我的意思是，可以通过 Set-Cookie 标头在服务器端定义 cookie 的路径和域。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-20T19:33:22.537

另一种解决方案是在 jmeter.properties 中设置 CookieManager.check.cookies=false 通常位于 bin 中的 jmeter 启动脚本旁边。

由于某些原因，JMeter 认为如果您在 http:/somesite/somethingelse 上，则无法在 cookie 中设置 path=/something。那就是路径必须与您当前所在的路径相匹配。

如果确实存在，我从未见过浏览器强制执行此限制。我已经看到并编写了几个使用这种技术设置安全 cookie 然后将某人说的内容转发给 /admin 的网站。

我希望这个选项至少在 GUI 中，所以我不必更改属性文件。我认为 BlazeMeter 足够聪明，可以关闭检查 Flood.io 不在的位置。如果由我决定，我会删除完全检查这一点的代码。为什么要让负载测试器变得更难呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-03T18:15:00.080

我在我的 Spring Boot 服务器中打开了这个，这导致 jMeter 中的 CookieManager 出现问题：

server.servlet.session.cookie.secure=true

删除它使饼干流动！当然这是针对本地主机的。对于生产，您可能需要打开它。

# jquery - Kaminari 无休止的分页问题

> ID：12966591
> 
> 赞同：0
> 
> 时间：2012-10-19T02:36:34.943
> 
> 标签：jquery, ruby-on-rails-3, pagination, kaminari

我正在尝试使用 Kaminari + jQuery 进行无休止的分页/无限滚动。我正在尝试在表中附加分页结果（行）。不幸的是，结果（行标记）出现在表格上方。这是我现有的设置：

events_controller.rb

```
class EventsController < ApplicationController
  respond_to :html, :js

  def index
    @events = Event.all
    respond_with(@events)
  end

end 
```

事件/index.html.erb

```
<div id="events-container">

  <table cellpadding="3" cellspacing="0">
    <thead>
      ...
    </thead>

    <tbody>
      <% if @events.blank? %>
        <tr><td> No events yet</td></tr>
      <% else %>
        <div id="events">
          <%= render @events %>
        </div>
      <% end %>
    </tbody>
  </table>

  <nav class="pagination-container">
    <%= paginate @events %>
  </nav>​

</div>​ 
```

事件/index.js.erb

```
$('#events').append('<%= j render(@events) %>');

<% if (@events.current_page < @events.num_pages) %>
    $('.pagination').replaceWith('<%= j paginate(@events) %>');
<% else %>
    $('.pagination-container').remove();
<% end %> 
```

事件/_event.html.erb

```
<tr>
  <td><%= event.time %></td>
  ...
</tr>

<tr>
  <td><%= event.location %></td>
  ...
</tr> 
```

events_endless_paging.js

```
jQuery(function() {
  var isScrolledIntoView;
  isScrolledIntoView = function(elem) {
    var docViewBottom, docViewTop, elemBottom, elemTop;
    docViewTop = $(window).scrollTop();
    docViewBottom = docViewTop + $(window).height();
    elemTop = $(elem).offset().top;
    elemBottom = elemTop + $(elem).height();

    return (elemTop >= docViewTop) && (elemTop <= docViewBottom);
  };

  if ($('.pagination').length) {
    $(window).scroll(function() {
      var url;
      url = $('.pagination .next a').attr('href');
      if (url && isScrolledIntoView('.pagination')) {
        $('.pagination').text('Fetching more...');

        var script = $.getScript(url);
        return script;
      }
    });

    return $(window).scroll();
  }
}); 
```

一切似乎都正确连接，但最终发生的是在#event-container div 和表格之间插入表格行。所以行样式都是不稳定的，因为标签没有被正确地插入到表格的上下文中。我觉得我需要在 js 响应中插入表格标记，但不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:32:20.280

我不认为在表体内有一个 div 是有效的。

如果您删除 div 并将新行直接附加到 tbody ，您应该会取得更大的成功。

```
<tbody>
  <% if @events.blank? %>
    <tr><td> No events yet</td></tr>
  <% else %>
    <%= render @events %>
  <% end %>
</tbody> 
```

# api - 某些选项在 mapquest api 中不起作用

> ID：12966592
> 
> 赞同：0
> 
> 时间：2012-10-19T02:37:03.223
> 
> 标签：api, geocode, mapquest

我正在使用 mapquest 开放地理编码 api，当 POST 请求到 api 时，某些选项不起作用。

例如，此 HTTP GET 请求遵循 ignoreLatLngInput、thumbMaps 和 maxResults 选项

```
http://open.mapquestapi.com/geocoding/v1/address?inFormat=kvp&outFormat=json&ignoreLatLngInput=true&thumbMaps=false&maxResults=3&location=Boston,+MA 
```

但是当通过 HTTP POST 提交相同的值时，它们会被忽略，有些甚至会导致请求失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:54:00.587

使用以下。

```
$.getJSON(
    "http://nominatim.openstreetmap.org/reverse?format=json&lat="+lat+"&lon="+lon+"",
     function(data) {
         var loc = data.display_name;   
}); 
```

# javascript - 如果我在 JSP 文件中包含另一个 JSP 文件，则 JS 文件不会触发

> ID：12966593
> 
> 赞同：0
> 
> 时间：2012-10-19T02:37:11.337
> 
> 标签：javascript, jsp

我有一个主 jsp 文件，在该 JSP 文件中，我调用了一个 JS 文件并包含另一个名为 login.jsp 的 JSP 文件。

在为 login.jsp 添加包含之前，可以调用我的 JS 文件的功能。添加 login.jsp 后，它不再工作。

我测试了在 login.jsp 中调用 JS 文件，它是这样工作的。问题是，我不能这样做，因为许多 JSP 页面将包含 login.jsp，而且我不需要调用每个使用 login.jsp 的 JS 文件。

这是代码：

这是我的主要jsp文件：

```
<html>
<head>
.. some scriplets with no error ...
<SCRIPT type="text/javascript" src="<%=request.getContextPath()%>/js/pcLotsFrontProcessMaterialRegistration.js" ></SCRIPT>
.. other js files that is included this way ..
</head>
<body>
<div id="login_holder" align="center">
<jsp:include flush="true" page="../admin/login.jsp"></jsp:include>
</div>
... some codes ....

</body></html> 
```

我的 login.jsp 是这样的：

```
<div id="login-box">
<table id="login-box-table">
... table contents ...
</table>
</div>
<script>
... functions ...
</script> 
```

这种格式有问题吗？

请不要介意这些脚本和我打算在其他时候修改它们的所有内容，我只需要先完成这项工作。

非常感谢。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:47:05.670

由于您选择省略 javascript，因此很难判断发生了什么，但是 login.jsp 中的 javascript 中的某些内容似乎很可能与“main”jsp 中的 javascript 冲突。

我建议使用 javascript 控制台和调试器（如 Chrome 或 FireFox 中的开发人员工具）来查找问题。

顺便说一句，这不是一种很好的结构方式，而且特别容易出现这类问题。

首先，您不应该在您的 jsp 页面中包含您的 javascript - 它应该在外部 .js 文件中，并且它应该是命名空间以避免冲突（我建议阅读 Doug Crockford 的 'Javascript - The Good Parts'）。

其次，有更好的方法来编写页面——例如，看看 Apache Tiles 项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T03:22:55.990

[使用JSP Scriptlets](http://docs.oracle.com/javaee/5/tutorial/doc/bnaou.html) @include怎么样

```
<%@include file="../admin/login.jsp" %> 
```

如果您的页面是静态页面。

# java - java toString() 正在从类返回 null

> ID：12966595
> 
> 赞同：0
> 
> 时间：2012-10-19T02:37:32.053
> 
> 标签：java, tostring

这是 Java，使用 BlueJ。

我有四个类，分别是 Person、Letter、Address 和 PhoneNumber。在每一个中，我都重写了 toString() 方法以从类中返回我想要的值的串联字符串。当调用 Letter toString() 时，它对所有值都返回 null。

这个想法是使用硬编码信息，将其传递给适当的类，并以标准字母格式返回。

我是否朝着打印硬编码信息的正确方向前进，还是应该走不同的路线？这是一个家庭作业问题，但我觉得我已经碰壁了。

以下是课程：

```
public class Person
{
private static String aPerson;
private String first;
private String middle;
private String last;    
private Address address;
private PhoneNumber phone;

public String getFirst()
{
    return this.first;
}

public void setFirst(String FirstName)
{
    this.first = FirstName;
}

    public String getMiddle()
{
    return this.middle;
}

public void setMiddle(String MiddleName)
{
    this.middle = MiddleName;
}

    public String getLast()
{
    return this.last;
}

public void setLast(String LastName)
{
    this.last = LastName;
}

public Address getMyAddress()
{
    return this.address;
}
public void setMyAddress(Address Address)
{
    this.address = Address;
}

public PhoneNumber getMyPhoneNum()
{
    return this.phone;
}

public void setMyPhoneNum(PhoneNumber Number)
{
    this.phone = Number;
}

public Person()
{
    aPerson = getFirst() + getMiddle() + getLast() + getMyAddress() + 
    getMyPhoneNum();
}

public String toString()
{
    return aPerson;
}
} 
```

电话号码：

```
public class PhoneNumber
{
private String number;
private int areaCode = 0;
private int phonePrefix = 0;
private int phoneLineNum = 0;
private int phoneExtension = 0;

public String getNumber()
{
    return number;
}

public void setNumber(String Number)
{
    number = Number;
}

public int getAreaCode()
{
    return areaCode;
}

public void setAreaCode(int AreaCode)
{
    areaCode = AreaCode;
}

public int getPrefix()
{
    return phonePrefix;
}

public void setPrefix(int Prefix)
{
    phonePrefix = Prefix;
}

public int getPhoneLineNumber()
{
    return phoneLineNum;
}

public void setLineNum(int PhoneNumber)
{
    phoneLineNum = PhoneNumber;
}

public int getExtension()
{
    return phoneExtension;
}

public void setExtension(int Extension)
{
    phoneExtension = Extension;
}
} 
```

地址：

```
public class Address
{
private String state;
private String anAddress;
private String address;
private String city;
private int zip = 0;

public String getState()
{
   return state;
}

public void setState(String State)
{
   state = State;
}

   public String getAddress()
{
   return address;
}

   public void setAddress(String Address)
{
   address = Address;
}

   public String getCity()
{
   return city;
}

   public void setCity(String City)
{
   city = City;
}

   public int getZip()
{
   return zip;
}

   public void setZip(int Zip)
{
   zip = Zip;
}

public Address()
{
   anAddress = getState() + getAddress() + getCity() + getZip();
}

public String toString()
{
   return this.anAddress;
}
} 
```

信：

```
public class Letter
{
private Person to;
private Person from;
private String body;
private String finishedLetter;

public Person getTo()
{
    return to;
}

public void setTo(Person newValue)
{
    to = newValue;
}

public Person getFrom()
{
    return from;
}

public void setFrom(Person newValue)
{
    from = newValue;
}

public String getBody()
{
    return body;
}

public void setBody(String newValue)
{
    body = newValue;
}

public Letter()
{
    finishedLetter = getTo() + " \n" + getFrom() + " \n" + getBody();
}

public String toString()
{
    return finishedLetter;
}
} 
```

主要：

```
public class MainClass
{
public static void main(String args[])
{
    PhoneNumber phone1 = new PhoneNumber();
    phone1.setAreaCode(417);
    phone1.setPrefix(447);
    phone1.setLineNum(7533);
    phone1.setExtension(0);

    PhoneNumber phone2 = new PhoneNumber();
    phone2.setAreaCode(210);
    phone2.setPrefix(336);
    phone2.setLineNum(4343);
    phone2.setExtension(9850);

    Address address1 = new Address();

    address1.setState("MO");
    address1.setAddress("1001 East Chestnut Expressway");
    address1.setCity("Springfield");
    address1.setZip(65807);

    Address address2 = new Address();

    address2.setState("TX");
    address2.setAddress("4800 Calhoun Road");
    address2.setCity("Houston");
    address2.setZip(77004);

    Person person1 = new Person();

    person1.setFirst("Shane");
    person1.setMiddle("Carroll");
    person1.setLast("May");
    person1.setMyAddress(address1);
    person1.setMyPhoneNum(phone1);

    Person person2 = new Person();

    person2.setFirst("Ted");
    person2.setMiddle("Anthony");
    person2.setLast("Nugent");
    person2.setMyAddress(address2);
    person2.setMyPhoneNum(phone2);

    Letter aLetter = new Letter();

    aLetter.setTo(person2);
    aLetter.setFrom(person1);
    aLetter.setBody("This is the body");

    System.out.println(aLetter.toString());
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T02:43:36.217

`getTo()`您的 Letter 构造函数正在调用方法，例如`getFrom()`在这些字段被填充之前。不要这样做，因为您的 finishedLetter String 永远不会正确*"finished"*。IE，

```
public Letter()
{
    finishedLetter = getTo() + " \n" + getFrom() + " \n" + getBody();
} 
```

总会导致`null + "\n" + null + "\n" + null`

也许这种代码应该在`toString()`方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:47:38.013

当您的字母使用 构造时，它会使用多个值`new Letter()`初始化其实例字段。因为、和尚未使用其对应的 setter 设置，所以它们的 getter 返回 null，导致等于“null \nnull \nnull”。`finishedLetter``null``to``from``body``finishedLetter`

为了解决这个问题，我的一种方法是`finishedLetter`在`toString()`方法本身中定义。这既可以解决问题，又可以对程序设计采取更加面向对象的方法。

```
// remove constructor (if you wish) and finishedLetter field

public String toString() {
    return getTo() + " \n" + getFrom() + " \n" + getBody();
} 
```

更好的方法是在构造函数中要求`to`、、`from`和`body`作为参数`Letter`。

```
// remove finishedLetter field

public Letter(Person to, Person from, String body) {
    this.to = to;
    this.from = from;
    this.body = body;
}

public String toString() {
    return getTo() + " \n" + getFrom() + " \n" + getBody();
} 
```

# c - 不知道我是否以错误的方式复制这些整数，但我遇到了一些奇怪的错误

> ID：12966598
> 
> 赞同：0
> 
> 时间：2012-10-19T02:38:09.637
> 
> 标签：c, shell

我收到以下错误，希望有人可以为我解释这些错误，因为我目前在 C 方面不是很好。

```
case ' ':     
This is the error here. shellNew.c:57: error: a label can only be part of a statement and                 a declaration is not a statement

int rCheck = 0;
shellNew.c:58: error: expected expression before â

int foundPos = 0;
while(rCheck < 10)
{
  if(inputBuffer[2] == historyBuffer[rCheck][0])
  {
shellNew.c:63: error: â undeclared (first use in this function)
shellNew.c:63: error: (Each undeclared identifier is reported only once
shellNew.c:63: error: for each function it appears in.)

  foundPos = rCheck;
  }
rCheck++;
}
if(rCheck == 0)
{
  printf("There was no command matching your criteria\n");
}
else
{
  strcpy(inputBuffer, historyBuffer[rCheck]);
}
break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:55:42.927

假设`switch`在前面的 56 行代码中有一个，那么编译器就会抱怨你不能这样做：

```
switch (variable)
{
case ' ':
    int var = 23; 
```

因为声明不算作声明，并且必须将标签附加到声明中。转换为一个小函数，这段代码给了我你在 Mac OS X 10.7.5 上使用 GCC 4.7.1 报告的错误。随后的错误可能是因为您的变量`rCheck`因标签放错而未声明，导致您尝试使用它时出现问题。

您不能跳过变量声明，因此您需要在语句块内使用`switch`语句块：

```
switch (variable)
{
case ' ':
    {
    int var = 23;
    ...
    }
    break;
} 
```

这段代码编译得很干净。`break`将语句块放在内部还是外部更好，这是一个有争议的问题；他们是等价的。

# r - devtools 中的 install_bitbucket：区分大小写？

> ID：12966600
> 
> 赞同：2
> 
> 时间：2012-10-19T02:38:39.973
> 
> 标签：r, devtools

```
library(devtools)
install_bitbucket("readlicor","remkoduursma") 
```

工作正常！然而：

```
install_bitbucket("GasExchangeR","remkoduursma") 
```

没有，它似乎在寻找：

```
bitbucket.org/remkoduursma/GasExchangeR/get/master.zip 
```

但该页面不存在，而是：

```
bitbucket.org/remkoduursma/gasexchanger/get/master.zip 
```

确实存在。

是否有解决方法（除了将我的所有包重命名为小写名称），还是这是一个错误？

谢谢雷姆科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:51:38.340

当您等待它被修复时`devtools`，您可以重新定义函数以更改`repo`为全部小写，如果这是一个`bitbucket`约定的话。

```
install_bitbucket <- function (repo, username, ref = "master", branch = NULL, ...) {
  if (!is.null(branch)) {
    warning("'branch' is deprecated. In the future, please use 'ref' instead.")
    ref <- branch
  }

  repo <- tolower(repo)
  message("Installing bitbucket repo(s) ", paste(repo, ref, 
                                                 sep = "/", collapse = ", "), " from ", paste(username, 
                                                                                              collapse = ", "))
  url <- paste("https://bitbucket.org/", username, "/", repo, 
               "/get/", ref, ".zip", sep = "")
  install_url(url, paste(ref, ".zip", sep = ""), ...)
} 
```

我已发送[拉取请求](https://github.com/hadley/devtools/pull/175)以`devtools`进行此更改。

# iphone - 导航栏压扁的iOS背景图像

> ID：12966603
> 
> 赞同：1
> 
> 时间：2012-10-19T02:39:03.393
> 
> 标签：iphone, ios, background, uinavigationbar, uitabbar

我有一个使用`UITabBar`and的应用程序`UINavigationBar`。我正在创建一个`UIImageView`包含我的背景图像，然后将其添加`UIImageView`到我`self.view`的子视图中。这会导致背景垂直“挤压”。背景图像直到 NavBar 底部才开始，然后在 TabBar 后面向下运行。

这是我用来添加背景的代码：

```
UIImageView* backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
    [backgroundView setFrame:CGRectMake(0, 0, 320, 480)];
    [self.view addSubview:backgroundView]; 
```

任何关于如何保持背景实际大小的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:13:53.700

首先，您不会有 480 磅的高度可用于`UINavigationBar`任何小于 iPhone/iPod 5 的礼物。您应该使用它`self.view.frame.size.height`来获得实际尺寸。实际上，您应该将框架设置为视图的边界。

```
[backgroundView setFrame:self.view.bounds]; 
```

其次，您应该设置`contentMode`.`UIImageView`

```
[backgroundView setContentMode:UIViewContentModeScaleAspectFill]; //Set UIViewContentModeScaleAspectFit if you want to show the full image with the potential of a letterbox 
```

那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:55:50.970

我不太确定你在问什么。是的，任何属于标签栏控制器或导航控制器的视图都将调整大小以适应剩余的屏幕空间，但在考虑其他 UI 元素占用的空间后，您确切知道图像视图将剩余多少空间：

状态栏：320 x 20（纵向）、480 x 20（横向） 导航栏：320 x 44（纵向）、480 x 34（横向） 标签栏：320 x 49（纵向）、480 x 49（横向）

所以基本上，你的图像视图有以下可用空间：

纵向：320 x 367 空间：480 x 217

设计您的 Default.png 时要牢记这些尺寸。老实说，将您的第一个屏幕与 Default.png 匹配的最简单方法是简单地截取 iOS 模拟器的屏幕截图。

# ios - ios6中的UITextView内存泄漏？

> ID：12966607
> 
> 赞同：0
> 
> 时间：2012-10-19T02:39:34.090
> 
> 标签：ios

我在 Xcode 中使用 iPhone 6 模拟器。在我的视图中添加一个简单的 UITextView 后，我在其中输入了一些单词。但是我在控制台中发现了一些错误：

```
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextSaveGState: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextDrawLinearGradient: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextFillRects: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextFillRects: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextFillRects: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextSaveGState: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextDrawLinearGradient: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextFillRects: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextFillRects: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextSetFillColorWithColor: invalid context 0x0
Oct 19 10:07:14 localhost textViewTest[1438] <Error>: CGContextFillRects: invalid context 0x0 
```

而且当我看到内存使用时，它增加得非常快。但是当我使用iphone5或iphone4.3模拟器时它不会出现。

这是我的代码：

```
#import "ViewController.h"
#include <sys/sysctl.h>
#include <mach/mach.h>
@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UITextView *textView=[[UITextView alloc] initWithFrame:CGRectMake(0,0,320,50)];
    [self.view addSubview:textView];
    [textView release];

    NSTimeInterval timeInterval =5.0 ;
    [NSTimer scheduledTimerWithTimeInterval:timeInterval
                                 target:self
                               selector:@selector(handleMaxShowTimer:)
                               userInfo:nil
                                repeats:YES];

}
- (double)availableMemory
{
    vm_statistics_data_t vmStats;
    mach_msg_type_number_t infoCount = HOST_VM_INFO_COUNT;
    kern_return_t kernReturn = host_statistics(mach_host_self(),HOST_VM_INFO,(host_info_t)&vmStats,&infoCount);
    if(kernReturn != KERN_SUCCESS)
    {
        return NSNotFound;
    }
    return ((vm_page_size * vmStats.free_count) / 1024.0) / 1024.0;
}

- (double)usedMemory
{
    task_basic_info_data_t taskInfo;
    mach_msg_type_number_t infoCount = TASK_BASIC_INFO_COUNT;
    kern_return_t kernReturn = task_info(mach_task_self(),
                                     TASK_BASIC_INFO, (task_info_t)&taskInfo, &infoCount);
    if(kernReturn != KERN_SUCCESS) {
        return NSNotFound;
    }
    return taskInfo.resident_size / 1024.0 / 1024.0;
}

-(void)handleMaxShowTimer:(NSTimer *)theTimer
{
    NSLog(@" use memory  %f  remain memory  %f",[self usedMemory],[self availableMemory]);

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:47:10.393

您的内存使用量很可能不是“疯狂地增加”，您只是碰巧正在查看仪器中分配的总字节数，这意味着稳步增加。使用实际的泄漏工具，它甚至会告诉您发生泄漏的确切代码行，以及某个特定功能对整体泄漏的贡献程度。

至于 CG... 错误，需要在`-drawRect:`覆盖中完成绘制代码，这是唯一可以获得稳定的非 NULL 上下文进行绘制的地方。

# jquery - 使用 $.ajax 加载图像

> ID：12966611
> 
> 赞同：0
> 
> 时间：2012-10-19T02:40:27.757
> 
> 标签：jquery

我试过[这个答案](https://stackoverflow.com/questions/8761713/jquery-ajax-loading-image)。

这是我的功能，当我单击图像时调用它。

```
function CheckOut(urlCheckoutNew,urlWebService) {
  var inputData = JSON.stringify(getQuotation(urlCheckoutNew));
  $('#imgloading').show();
  $.ajax({
    type: 'POST',
    url: urlWebService,
    contentType: 'application/json',
    processData: false,
    dataType: 'json',
    data: inputData,
    success: function (dataQuote) {
        //alert(1);
        $('#imgloading').hide();
    }
  });
} 
```

这是我的html：

```
<div id="imgloading" style="display:none;">
    <img src="/Content/Images/ImageModal/loading.gif" alt="Confirming"/>
</div> 
```

该功能处于`success`警报正在工作的状态，但图像未加载。当弹出警报对话框时，我看到加载图像正在后台加载。但是当我评论警报时，图像没有显示。

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:51:08.307

毫无疑问，图像正在加载，它只是再次隐藏得如此之快，以至于它永远不会完全可见。

像这样测试它：

```
$.ajax({
    type: 'POST',
    url: urlWebService,
    contentType: 'application/json',
    processData: false,
    dataType: 'json',
    data: inputData,
    success: function (dataQuote) {
        $('#imgloading').fadeOut(2000);
    }
}); 
```

结果应该是您的图像出现然后慢慢淡出。这可能不是您的预期行为，但它会确认您的图像确实正在加载（因为该`alert()`方法并不令人信服......）。

您可能希望在短时间内显示图像，以使用户有一种安全感，即确实发生了某些事情。在这种情况下，我建议稍微延迟隐藏图像。有很多方法可以做到这一点，但我通常会执行以下操作：

```
success: function (dataQuote) {
    var $image = $('#imgloading')
    $image.show(500, $image.fadeOut(2000));
} 
```

由于图像已经显示，因此`show()`是多余的并且充当简单的延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:51:19.460

尝试

```
$('#imgloading').html(''); 
```

它将删除 html，`#imgloading`因此图像将消失

你还没有显示图像

```
<div id="imgloading" style="display:none;">
                              ^^^^^^^^^^^-------its hidden already 

    <img src="/Content/Images/ImageModal/loading.gif" alt="Confirming"/>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T02:51:37.500

查看您的代码，您首先显示图像：

```
$('#imgloading').show(); 
```

然后执行 AJAX 请求，成功后隐藏它：

```
$('#imgloading').hide(); 
```

如果图像似乎根本没有显示，则可能存在一些“问题”：

1.  请求是同步的，因此页面没有机会在两者之间进行更新。

2.  请求如此之快，以至于图像只显示了很短的时间；您可以将`hide()`内部包裹起来`setTimeout()`以延迟隐藏并验证它是否正常工作，尽管您也已经证明了这`alert()`一点。

3.  与前文相关的是，当你显示`<div>`浏览器时，首先会加载图片；根据需要多长时间，当您的请求返回时，它将再次被隐藏。

# android - 创建扩展 ASCII 字符输入过滤器

> ID：12966615
> 
> 赞同：4
> 
> 时间：2012-10-19T02:41:20.940
> 
> 标签：android

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T22:34:25.823

我发现最好使用单个 for 循环和答案。

另请注意，将源传递给 SpannableStringBuilder 构造函数以便从源复制跨度非常重要。如果你不这样做，那么事情就会变得不稳定。

```
 @Override
    public CharSequence filter(CharSequence source, int start,
            int end, Spanned dest, int dstart, int dend) {
        SpannableStringBuilder ret;

        if (source instanceof SpannableStringBuilder) {
            ret = (SpannableStringBuilder)source;
        } else {
            ret = new SpannableStringBuilder(source);
        }

        for (int i = end - 1; i >= start; i--) {
            char currentChar = source.charAt(i);
            char currentChar = source.charAt(i);
            int ascii = currentChar;
            if (ascii > 127) {    
                ret.delete(i, i+1);
                toast = mUtility.showToast("Invalid non-Ascii Character", Toast.LENGTH_SHORT);
            }     
        }

        return ret;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:43:14.220

**编辑：**

我认为问题在于您要返回整个字符串，而您应该只返回该字符的替换。`filter()`每当文本更改时运行，并且不一定替换`EditText`. 您需要注意这一点，因此您最终不会将整个字符串推到字符应该去的地方。

[这个问题](https://stackoverflow.com/questions/3349121/how-do-i-use-inputfilter-to-limit-characters-in-an-edittext-in-android)是相关的（只是用非ASCII代替非字母数字），并且那里的答案被广泛接受，所以你应该能够用它来得到你想要的。

对令人困惑的答案/删除事情感到抱歉。我在离开家之前就回答了。几分钟后，我意识到我的逻辑有一个巨大的缺陷，所以我跳上手机删除了它。我讨厌尝试在手机上输入完整的答案，所以只需要稍等片刻。

# java - Java Jung 子图组件

> ID：12966617
> 
> 赞同：0
> 
> 时间：2012-10-19T02:41:48.413
> 
> 标签：java, graph, components, jung

我有一个包含多个组件的未连接图。如何获取每个子图组件的 Graph 实例？例如考虑下图：![在此处输入图像描述](../Images/ec6d48928181a5a3104d3551ef8ebcbc.png)

我想要的是能够返回这些子图组件。一个示例子图组件将是具有顶点的图：{c0, c1, c2, c3}

我想来这样的事情（这些课程不存在）：

```
GraphComponents<String, Integer> comps = new GraphComponents<String, Integer>(graph);
for(int i = 0; i < comps.size(); i++)
{
   comps[i].computeSomethingInteresting();
} 
```

1.  如何返回子图组件的实例？
2.  我应该使用哪种图形类型（我目前使用的是森林）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:10:51.767

您可以使用在您的 More [info](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/graph/Forest.html#getTrees%28%29)`getTrees()`中返回树集合的命令。`Forest`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:26:09.933

WeakComponentClusterer 会这样做：http: [//jung.sourceforge.net/doc/api/edu/uci/ics/jung/algorithms/cluster/WeakComponentClusterer.html](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/algorithms/cluster/WeakComponentClusterer.html)

# c++ - TurboC++ 编译时错误

> ID：12966619
> 
> 赞同：-1
> 
> 时间：2012-10-19T02:42:15.797
> 
> 标签：c++

我正在使用旧软件 TurboC++ 4.5(1995) 进行编译，但遇到了一些错误。任何人都可以帮忙吗？

```
#include<iostream.h>
#include<math.h>

void cal_root(int,int,int,float&,float&);
void main()
{
  float root1=0,root2=0;
  int a,b,c;
  cout<<"Enter the three co-efficients of quadratic equation with spaces.\n";
  cin>>a>>b>>c;
  cal_root(a,b,c,root1,root2);
  cout<<"The roots for given Quadratic Equation are "<<root1<<" & "<<root2<<".";
}
void cal_root(int a,int b,int c,float& root1,float& root2)
{
  root1=-b+(sqrt((b*b)-4ac))/(2a); //error here
  root2=-b-(sqrt((b*b)-4ac))/(2a); //error here
} 
```

我收到以下错误：
`Function call missing ) in function cal_root(int, int, int, float&, float &)` 在第 16 和 17 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:45:49.880

你不能做这样的乘法：

```
4ac
2a 
```

你必须把它拼出来：

```
4 * a * c
2 * a 
```

但是请确保您对括号很自由，因为例如，`2 * a`在该表达式中，将首先除以 2，然后乘以 a。实际上，您想除以 2 并除以 a。

实际上，由于操作顺序，您的 -b 位置也很糟糕。表达式应如下所示：

```
(-b + sqrt((b*b) - (4*a*c)))
    / (2*a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:03:54.833

首先

```
 void cal_root(int a,int b,int c,float& root1,float& root2)
  {
      root1=-b+(sqrt((b*b)-4ac))/(2a); //error here
      root2=-b-(sqrt((b*b)-4ac))/(2a); //error here
  } 
```

这应该写成

```
 void cal_root(int a,int b,int c,float& root1,float& root2)
    {
      root1=-b+(sqrt((b*b)-(4*a*c)))/(2*a); //correction
      root2=-b-(sqrt((b*b)-(4*a*c)))/(2*a); //correction
    } 
```

其次避免在 main 中使用 void ...（只是一个建议）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T02:46:21.060

你不能写 4ac 或 2a - 这不是数学。

改变

```
4ac = 4*a*c
2a = 2*a 
```

void main 也是[错误](http://c-faq.com/ansi/voidmain.html)的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T02:45:40.507

您不能像在代数中那样离开运算符。`4ac`并且`2a`应该是`4*a*c`和`2*a`。

另外，获得更好的编译器/IDE。当我大约 10 年前开始编程时，Turbo C++ 是最糟糕的废话。还是那么糟糕。以 Netbeans 为例。

它允许的简单事实`void main()`证明了我的观点。Main 永远不应该被声明`void`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T02:45:44.480

你不在数学课上，你必须明确地写出乘法：

```
4ac -> 4*a*c
2a -> 2*a 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T02:46:06.977

您不能将变量乘以常量 via`2x`等，因为它被视为文字 2，后缀为 x，或者无论您的变量碰巧是什么，后缀都会更改变量的表示形式（例如 LL 会处理它很长很长）。

相反，使用`operator*`：

```
4 * a * c
2 * a 
```

# actionscript-3 - 将 url 拆分为类名和文件名 url

> ID：12966620
> 
> 赞同：0
> 
> 时间：2012-10-19T02:42:22.347
> 
> 标签：actionscript-3, flash

在我的项目中，我需要使用 uri 来定位资源，资源可以是 jpeg、bmp、png、txt、xml 或任何文件类型，但有一个例外。当我需要在 swf 文件中找到一个类时。我使用类名@文件名格式

客户需要检查它是通用网址还是闪存网址。

一般的网址是这样的

.../文件名？...

特定的 Flash 课程网址

.../类名@文件名？...

需要变成 [.../filename?...,classname]

因为该 url 不仅用于下载，还用于密钥和哈希。所以拆分功能必须非常有效。请告诉我你知道处理它的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:28:53.300

您可以使用正则表达式，例如`([a-zA-Z0-9_\.]+)@`与`String.match()`or结合使用`String.replace()`。`String.indexOf('@')`但是，应该使用simple来测试您是否真的在处理包含类名的 URI。

如果性能是一个问题，请查看此页面，了解Adob​​e 的[正则表达式优化](http://help.adobe.com/en_US/as3/mobile/WS948100b6829bd5a6711168a01275489830e-8000.html)。

# mysql - 处理由存储过程中的 select 语句返回的行

> ID：12966621
> 
> 赞同：1
> 
> 时间：2012-10-19T02:42:47.773
> 
> 标签：mysql, stored-procedures

有没有人可以告诉我如何在 a 内获取行`stored procedure`？

例如，假设我这样做

```
BEGIN 
   SELECT id, name, lastname, 
   FROM eyploees;

   --How can i process all the results within this procedure?

END<br/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:04:06.527

您需要使用游标：

```
DECLARE id_var INT;
DECLARE name_var VARCHAR(255);
DECLARE lastname_var VARCHAR(255);

DECLARE my_cursor CURSOR FOR SELECT id, name, lastname FROM employees;

DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

OPEN my_cursor;

read_loop: LOOP

    FETCH my_cursor INTO id_var, name_var, lastname_var;
    IF done THEN
      LEAVE read_loop;
    END IF;

    --Do some row work here using _var variables from above

END LOOP;

CLOSE my_cursor; 
```

# bash - 如果用户错误地调用脚本，使 Bash 脚本退出并打印错误消息

> ID：12966622
> 
> 赞同：5
> 
> 时间：2012-10-19T02:42:50.773
> 
> 标签：bash, error-handling, multiplicity

需要的脚本是

```
#!/bin/bash

# Check if there are two arguments
if [ $# -eq 2 ]; then
   # Check if the input file actually exists.
   if ! [[ -f "$1" ]]; then
     echo "The input file $1 does not exist."
     exit 1
   fi
else
   echo "Usage: $0 [inputfile] [outputfile]"
   exit 1
fi

# Run the command on the input file
grep -P "^[\s]*[0-9A-Za-z-]+.?[\s]*$" "$1" > "$2" 
```

编辑，脚本已更改为

```
grep -P "^[\s]*[0-9A-Za-z-]+.?[\s]*$" $*
if [ ! -f "$1" ]; then

  echo 'Usage: '
  echo
  echo './Scriptname inputfile > outputfile'
  exit 0

fi 
```

调用不带参数的脚本不会产生任何错误并且是空白的

```
Usage: 

./Scriptname inputfile > outputfile 
```

我有一点代码

```
grep -P "^[\s]*[0-9A-Za-z-]+.?[\s]*$" $* 
```

此代码提取包含单个单词的行并将输出泵送到一个新文件，例如

> ```
> This is a multi word line
> this
> the above line is not
> now
> once again wrong 
> ```

输出将是

```
This
now 
```

代码有效，用户调用代码使用`./scriptname file > newfile`

但是，如果用户错误地调用脚本，我正在尝试扩展代码以向用户提供错误消息。

对于错误消息，我正在考虑回显类似`scriptname file_to_process > output_file`.

我确实尝试过

```
if [incorrectly invoted unsure what to type]
echo $usage

exit 1
Usage="usage [inputfile] [>] [outputfile] 
```

然而，我的运气并不好。如果我只使用脚本名称调用，代码会运行但什么也不做。此外，如果我只使用脚本名和输入文件调用脚本，它将输出结果而不是退出并显示错误消息。

我试过的其他的是

```
if [ ! -n $1 ]; then

  echo 'Usage: '
  echo 
  echo './Scriptname inputfile > outputfile'
  exit 0

fi 
```

鉴于我到目前为止收到的回复，我现在的代码是

```
#!/bin/bash
grep -P "^[\s]*[0-9A-Za-z-]+.?[\s]*$" $*
if [ ! -f "$1" ]; then

  echo 'Usage: '
  echo 
  echo './Scriptname inputfile > outputfile'
  exit 0

fi 
```

在没有输入文件的情况下调用脚本时，脚本什么都不做，必须用 ctrl+c 中止，仍然试图获得调用消息的回显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:37:05.267

当您调用类似 的脚本`./scriptname file > newfile`时，shell 解释`file`为`./scriptname`. 这是因为`>`是标准输出重定向运算符。

我想提出两种可能的选择：

* * *

**备选方案 1**：也许您可以尝试像这样将其作为 1 个参数传递？

```
./scriptname 'file > newfile' 
```

在这种情况下，检查格式的一种方法是

```
#!/bin/bash

# Check if the format is correct
if [[ $1 =~ (.+)' > '(.+) ]]; then
  # Check if the input file actually exists.
  if ! [[ -f "${BASH_REMATCH[1]}" ]]; then
    echo "The input file ${BASH_REMATCH[1]} does not exist!"
    exit 1
  fi
else
  echo "Usage: $0 \"[inputfile] [>] [outputfile]\""
  exit 1
fi

# Redirect standard output to the output file
exec > "${BASH_REMATCH[2]}"
# Run the command on the input file
grep -P "^[\s]*[0-9A-Za-z-]+.?[\s]*$" "${BASH_REMATCH[1]}" 
```

**注意**：如果您正在检查参数是否有效，通常最好在检查完成后才运行命令。

* * *

**备选方案 2**：传递 2 个参数，例如

```
./scriptname file newfile 
```

脚本看起来像这样

```
#!/bin/bash

# Check if there are two arguments
if [ $# -eq 2 ]; then
   # Check if the input file actually exists.
   if ! [[ -f "$1" ]]; then
     echo "The input file $1 does not exist."
     exit 1
   fi
else
   echo "Usage: $0 [inputfile] [outputfile]"
   exit 1
fi

# Run the command on the input file
grep -P "^[\s]*[0-9A-Za-z-]+.?[\s]*$" "$1" > "$2" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T08:21:45.653

我会为此使用[参数扩展：](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)

```
inputfile=${1:?Usage: $(basename $0) inputfile > outputfile} 
```

如果脚本在没有参数的情况下调用（即`$1`未设置），则`${var:?error message}`扩展会导致 shell 显示给定消息的错误并退出。否则将第一个参数分配给`$inputfile`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T02:49:02.403

尝试在周围添加双引号`$1`并用于`-f`检查是否存在并且是正常文件：

```
if [ ! -f "$1" ]; then

  echo 'Usage: '
  echo 
  echo './Scriptname inputfile > outputfile'
  exit 0

fi 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T02:55:41.253

您还可以检查参数计数`$#`和`cat`使用消息：

```
if [ ! $# -eq 1 ]; then
cat << EOF
    Usage:

    $0 'input_file' > output_file
EOF
    exit 1
fi 
```

# typescript - TypeScript 编译器崩溃：publicMembers 为 null 或未定义

> ID：12966623
> 
> 赞同：1
> 
> 时间：2012-10-19T02:42:54.000
> 
> 标签：typescript

下面显示的代码以其当前形式编译和执行而没有错误——但是，一旦取消注释第 19 行上的“getNextAsyncTasks”类型声明，编译器就会崩溃并出现以下错误：

1.  内部错误：无法获取属性“publicMembers”的值：对象为空或未定义
2.  内部错误：IntelliSense 功能被禁用。尝试对源文件进行编辑以恢复有效的编译状态。
3.  无法获取属性“publicMembers”的值：对象为空或未定义
4.  命令 ""C:\Program Files (x86)\Microsoft SDKs\TypeScript\0.8.0.0\tsc" ... " 以代码 1 退出。

虽然我知道如何在这种特殊情况下避免它，但当我在代码库的其他区域工作时，错误会一直默默地发生。调试可能非常困难，因为当我注意到它发生时，我经常进行大量更改，并且没有暗示这次问题可能来自哪里。

理想情况下，如果有人能让我知道导致此崩溃发生的原因，我将不胜感激，这样我就可以更好地了解如何避免它/解决它。

```
module abstract {
    export interface ICallback {
        (...args: any[]): any;
    }
    export interface IAsyncOp {
        (callback: ICallback): any;
    }
}

export class Chain {
    task : abstract.IAsyncOp;

    constructor(...tasks : abstract.IAsyncOp[]) {
        if (tasks.length === 1)     this.task = tasks[0];
        else if (tasks.length > 1)  this.task = cb => this.sync(() => cb.apply(null, arguments), tasks);
        else                        this.task = cb => cb();
    }

    next(getNextAsyncTasks /*: (...args: any[]) => abstract.IAsyncOp*/) {
        return new Chain(
            (cb: abstract.ICallback) =>
                this.task(
                    () => getNextAsyncTasks.apply(null, arguments)(cb);
                )
        );
    }

    last(cb : abstract.ICallback) {
        this.task(cb);
    }

    sync(cb: (...resultArgs: IArguments[]) => void, tasks: abstract.IAsyncOp[]) {
        var resultArgs : IArguments[] = [], done = 0;

        var getCb = (i) => {
            return () => {
                resultArgs[i] = arguments;
                done++;

                if (done === tasks.length) cb.apply(null, resultArgs);
            }
        };

        for (var i = 0, op; op = tasks[i]; i++) op(getCb(i));
    }
}

// use example
new Chain( cb => setTimeout(() => cb("foo"), 60)
         , cb => setTimeout(() => cb("bar"), 10)
         ).next((op1, op2) => { console.log(op1, op2)
                              ; return cb => setTimeout(() => cb(op1[0], op2[0]), 120)
                              }
         ).next((foo, bar) => { console.log(foo, bar)
                              ; return cb => setTimeout(() => cb(foo, bar, "baz"), 30)
                              }
         ).last((foo, bar, baz) => console.log(foo, bar, baz)); 
```

编辑：更新了“下一个”，所以参数的类型签名总是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:16:33.183

这看起来像一个编译器错误，我会[在此处](http://typescript.codeplex.com/WorkItem/Create?ProjectName=typescript)提交报告。我尝试了很多方法来解决它，但都没有奏效。这很有趣，因为在您尝试在示例中使用它之前，崩溃实际上并没有表现出来。

# cluster-computing - 石英检测节点如何失败

> ID：12966625
> 
> 赞同：6
> 
> 时间：2012-10-19T02:43:11.983
> 
> 标签：cluster-computing, quartz-scheduler

我的生产环境使用石英 2.1.4 运行 java 调度程序作业。在具有 4 台机器的 weblogic 集群服务器上，只有一个计划作业在一个集群节点（节点 1）上正常执行几个月，但节点 2 突然发现节点 1 在昨晚接管执行作业时失败。事实上，节点 1 没有错误（根据服务器、网络、数据库、应用程序日志），此事件导致由于 2 进程并发执行而创建了重复消息。

石英检测节点故障的机制是什么？通过 ping 扫描，或通过 UCP 广播的心跳 ping，或数据库响应时间等？上面有什么配置吗？

我已经阅读了石英配置指南 [http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigJDBCJobStoreClustering](http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigJDBCJobStoreClustering) ，但没有答案。

我正在使用 JDBCJobstore。经过详细检查，我们发现有一个数据库（Oracle）语句执行异常长（从5秒到30秒）。事件发生在这段时间。你觉得有关系吗？

我的配置是

` org.quartz.threadPool.threadCount=10

org.quartz.threadPool.threadPriority=5

org.quartz.jobStore.misfireThreshold = 10000

org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX `

有人有这个信息吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-21T11:08:04.710

我知道答案很晚，但也许像我们俩这样的人仍然需要它。

短版：全部由 DB 处理。重要的属性是 org.quartz.jobStore.clusterCheckinInterval。

长版（所有学分都转到[http://flylib.com/books/en/2.65.1.91/1/](http://flylib.com/books/en/2.65.1.91/1/)）：

> **检测失败的调度程序节点**
> 
> 当调度程序实例执行签入例程时，它会查看是否有其他调度程序实例在他们应该签入时没有签入。它通过检查 SCHEDULER_STATE 表并查找 LAST_CHECK_TIME 列中的值早于属性 org.quartz.jobStore.clusterCheckinInterval 的调度程序（在下一节中讨论）来做到这一点。如果一个或多个节点尚未签入，则正在运行的调度程序假定其他实例已失败。

此外，下一段可能也很重要：

> **在时钟不同步的不同机器上运行节点**
> 
> 正如你现在可以确定的，如果你在不同的机器上运行节点并且时钟不同步，你会得到意想不到的结果。这是因为时间戳被用于通知其他实例上次签入一个节点的时间。如果该节点的时钟设置为将来，正在运行的调度程序可能永远不会意识到节点已关闭。另一方面，如果在过去设置了一个节点上的时钟，则节点可能会假设该节点已关闭并尝试接管并重新运行其作业。无论哪种情况，这都不是您想要的行为。当您在集群中使用不同的机器时（这是正常情况），请务必同步时钟。有关如何执行此操作的详细信息，请参阅本章后面的“Quartz Clustering Cookbook”部分。

# mysql - MySQL - 无法添加或更新子行：外键约束失败

> ID：12966626
> 
> 赞同：20
> 
> 时间：2012-10-19T02:43:16.277
> 
> 标签：mysql, foreign-keys, mysql-error-1452

这似乎是一个常见的错误，但对于我的生活，我无法弄清楚这一点。

我在 MySQL 中有一组 InnoDB 用户表，它们通过外键绑定在一起；父`user`表，以及一组存储电子邮件地址、操作等的子表。这些都`user`通过外键 绑定到父表，`uid`所有父键和子键都是`int(10)`。

所有的子表都有`uid`一个外键约束指向`user.uid`并设置为`ON DELETE CASCADE`and的值`ON UPDATE CASCADE`。

当我从中删除用户时`user`，所有受子约束的条目都将被删除。但是，当我尝试更新一个`user.uid`值时，它会导致以下错误，而不是将`uid`更改级联到子表：

```
#1452 - Cannot add or update a child row: a foreign key constraint fails (`accounts`.`user_email`, CONSTRAINT `user_email_ibfk_2` FOREIGN KEY (`uid`) REFERENCES `user` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

我有一种感觉，我必须在这里遗漏一些明显的东西。删除键约束`user_email`并尝试更新值会`user`导致相同的错误，但对于下一个按字母顺序排列的`user`子表，所以我不认为这是特定于表的错误。

编辑：

添加来自的结果`SHOW ENGINE INNODB STATUS`：

```
------------------------
LATEST FOREIGN KEY ERROR
------------------------
121018 22:35:41 Transaction:
TRANSACTION 0 5564387, ACTIVE 0 sec, process no 1619, OS thread id 2957499248 updating or deleting, thread declared inside InnoDB 499
mysql tables in use 1, locked 1
17 lock struct(s), heap size 2496, 9 row lock(s), undo log entries 2
MySQL thread id 3435659, query id 24068634 localhost root Updating
UPDATE `accounts`.`user` SET `uid` = '1' WHERE `user`.`uid` = 306
Foreign key constraint fails for table `accounts`.`user_email`:
,
  CONSTRAINT `user_email_ibfk_2` FOREIGN KEY (`uid`) REFERENCES `user` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE
Trying to add in child table, in index `uid` tuple:
DATA TUPLE: 2 fields;
...
A bunch of hex code

But in parent table `accounts`.`user`, in index `PRIMARY`,
the closest match we can find is record:
...
A bunch of hex code 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-03-18T08:37:06.700

我通过将以下代码添加到 SQL 代码的开头解决了我的“*外键约束失败*”问题（这是用于将值导入表）

```
SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT;
SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS;
SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION;
SET NAMES utf8;
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO';
SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0; 
```

然后将此代码添加到文件末尾

```
SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT;
SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS;
SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION;
SET SQL_NOTES=@OLD_SQL_NOTES; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-19T04:11:18.937

由于您没有给出表定义，因此很难猜测。但看起来您正在尝试修改子表中的外键。AFAIK，这是非法的，您可以从父表修改它，但不能从子表修改。

考虑这个例子：

```
CREATE TABLE parent (
  parent_id INT NOT NULL,
  parent_data int,

  PRIMARY KEY (parent_id)
) ENGINE=INNODB;

CREATE TABLE child1 (
  child1_id INT,
  child1_data INT,
  fk_parent_id INT,

  INDEX par_ind1 (fk_parent_id),

  FOREIGN KEY (fk_parent_id)
    REFERENCES parent(parent_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE
) ENGINE=INNODB;

CREATE TABLE child2 (
  child2_id INT,
  child2_data INT,
  fk_parent_id INT,

  INDEX par_ind2 (fk_parent_id),

  FOREIGN KEY (fk_parent_id)
    REFERENCES parent(parent_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE
) ENGINE=INNODB;

INSERT INTO parent
  (parent_id, parent_data)
  VALUES
  (1, 11),
  (2, 12);

INSERT INTO child1
  (child1_id, child1_data, fk_parent_id)
  VALUES
  (101, 1001, 1),
  (102, 1002, 1),
  (103, 1003, 1),
  (104, 1004, 2),
  (105, 1005, 2);

INSERT INTO child2
  (child2_id, child2_data, fk_parent_id)
  VALUES
  (106, 1006, 1),
  (107, 1007, 1),
  (108, 1008, 1),
  (109, 1009, 2),
  (110, 1010, 2); 
```

那么这是允许的：

```
UPDATE parent
  SET parent_id = 3 WHERE parent_id = 2;

SELECT * FROM parent;
SELECT * FROM child1;
SELECT * FROM child2; 
```

但这不是，因为它从子表中修改了父 fk：

```
UPDATE child1
  SET fk_parent_id = 4 WHERE fk_parent_id = 1; 
```

它得到一个与您的错误非常相似的错误：

```
Cannot add or update a child row: a foreign key constraint fails (`db_2_b43a7`.`child1`, CONSTRAINT `child1_ibfk_1` FOREIGN KEY (`fk_parent_id`) REFERENCES `parent` (`parent_id`) ON DELETE CASCADE ON UPDATE CASCADE): 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-04T11:17:16.650

在表上创建外部约束时，我遇到了同样的问题。解决此问题的简单方法是首先备份您的父表和子表，然后截断子表并再次尝试建立关系。希望这能解决问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-19T13:57:47.500

尽管这已经很老了，但只是插话说@Sidupac 的答案中有用的是`FOREIGN_KEY_CHECKS=0`.

当您使用为您管理数据库架构的东西（在我的情况下为 JPA）时，此答案不是一个选项，但问题可能是您的表中有“孤立”条目（引用可能不存在的外键）。

当您将 MySQL 表从 MyISAM 转换为 InnoDB 时，通常会发生这种情况，因为引用完整性实际上与前者无关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-01T18:44:13.007

在一项不相关的任务中，我最近在[MySQL Workbench](http://www.mysql.com/products/workbench/)中打开了我们的 MySQL 数据库，当查看上述表的表关系时，我注意到我之前以某种方式错过的“重复”和/或虚假关系（它们没有出现在 PHPMyAdmin FWIW 中）。删除这些额外的关系立即解决了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-12T10:18:52.060

这种更新错误可能是由字符集和排序规则的差异引起的，因此请确保两个表的它们相同。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-26T14:56:20.970

我对此的解决方法是需要在父表之前填充我的子表。

我有两个表：通过电子邮件地址链接的 UserDetails 和 Login。因此，在插入登录表之前，我必须先插入 UserDetails：

```
insert into UserDetails (Email, Name, Telephone, Department) values ('Email', 'Name', 'number', 'IT'); 
```

然后：

```
insert into Login (UserID, UserType, Email, Username, Password) VALUES (001, 'SYS-USR-ADMIN', 'Email', 'Name', 'Password') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-05T04:35:23.977

我遇到过这个问题，解决方案是确保子字段中的所有数据都与父字段匹配

例如，您想将（出勤）表内的外键添加到列（employeeName）

其中父是 (employees) 表，(employeeName) 列

出勤.employeeName 中的所有数据必须与employee.employeeName 匹配

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-08T06:06:29.217

我遇到了同样的问题，但是当我仔细观察时发现，这是因为我试图在为该键分配主键值之前将外键值放入表中。例如，我有两个表“customers”和“films”，“cust_id”和“film_id”分别是主键。“客户”与“电影”有一对多的关系，所以我在“电影”表中将“cust_id”作为外键。但是我试图首先将值放在“电影”表中，所以我遇到了这个问题。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-03-28T09:15:25.173

希望这将有助于在将 CSV 数据导入相关表时遇到相同错误的任何人。在我的情况下，父表没问题，但是在将数据导入包含外键的子表时出现错误。在临时删除子表上的外键约束后，我设法导入数据并惊讶地发现 FK 列中的一些值的值为 0 （显然这导致了错误，因为父表没有PK 列中的此类值）。原因是，我的 CSV 列中 FK 列之前的数据包含逗号（我将其用作字段分隔符）。更改我的 CSV 文件的分隔符解决了这个问题。

# java - junit 3 的故障跟踪窗口未显示预期值

> ID：12966632
> 
> 赞同：0
> 
> 时间：2012-10-19T02:44:00.833
> 
> 标签：java, android, eclipse, junit

我正在使用 Android SDK 执行一些 JUnit 测试用例，我发现没有一个 assertEquals 在日志中显示它们的预期值。

这是一个示例断言。

```
assertEquals("mocks", model.getUseTable()); 
```

这是失败异常。

```
junit.framework.ComparisonFailure: expected:<...k...> but was:<......>
at ca.thinkingmedia.gems.test.models.AbstractModelTest.test_Auto_Table_Name(AbstractModelTest.java:17)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:545)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1575) 
```

如您所见，*预期*值被点掩盖。这使得找出检查了哪些错误值变得非常耗时。

有没有办法让这些值在异常消息中正确显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:06:07.327

你可以做

```
final String actual = model.getUseTable()
assertEquals("Expecting mocks but was " + actual, "mocks", actual); 
```

并且消息将在日志中。

# cakephp - 在 cakephp 中格式化文本框（使文本框更大）

> ID：12966635
> 
> 赞同：2
> 
> 时间：2012-10-19T02:44:13.297
> 
> 标签：cakephp, textbox, formatting

大家好， 我正在尝试在我的 cakephp 表单中设置文本框的样式，但没有运气。我正在尝试使它们的相对尺寸更大，但不确定如何解决这个问题。任何帮助将不胜感激。

```
<table align=center>
  <?php echo $this->Form->create('User', array('url' => array('controller' => 'users', 'action' => 'login')));?>
  <tr>          
    <td align=center>Username: </td>
  </tr>
  <tr>
    <td ><?php echo $this->Form->input('username',array('label'=>false,'size'=>100));?></td>
  </tr>     
  <tr>      
    <td align = center>Password: </td>
  </tr>         
    <td><?php echo $this->Form->input('password',array('label'=>false,'size'=>100));?></td>
  </tr>
  <tr>
    <td align=center><?php echo $this->Form->end('Login');?></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:39:26.480

我假设您使用的是默认的 cakePHP CSS 模板？如果是这样，则更改主 CSS 文件 (cake.generic.css) 中输入的宽度。

样式=“宽度：300px；”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:02:44.807

您的代码将创建无效标记 - 您应该在担心它的外观之前修复它:-)

此外，用于布局的表格？当今年代？反正...

```
<?php echo $this->Form->create('User', array('url' => array('controller' => 'users', 'action' => 'login')));?>
<table align=center>
  <tr>          
    <td align=center>Username: </td>
  </tr>
  <tr>
    <td ><?php echo $this->Form->input('username',array('label'=>false,'size'=>100));?></td>
  </tr>     
  <tr>      
    <td align = center>Password: </td>
  </tr>         
    <td><?php echo $this->Form->input('password',array('label'=>false,'size'=>100));?></td>
  </tr>
  <tr>
    <td align=center><?php echo $this->Form->submit('Login');?></td>
  </tr>
</table>
<?php echo $this->Form->end(); ?> 
```

（我已将元素移到表格之外 - 它们在您发布的代码中无效）

CSS：

表单 div.input 输入 { 宽度：200px; }

如果您将表格全部丢弃并且您的代码会更简单，那么您将帮自己一个巨大的忙：

```
<?php

echo $this->Form->create('User');

echo $this->Form->inputs(array(
    'User.username',
    'User.password'
));

echo $this->Form->submit('Login');

echo $this->Form->end();

?> 
```

CSS：

```
form {
    overflow: hidden;
}
form div.input {
    clear: both;
    overflow: hidden;
}
form div.input label {
    float: left;
    display: block;
    width: 10em;
}

form div.input input {
    width: 200px;
} 
```

# embed - 如何将 .ppsx 文件嵌入 HTML？

> ID：12966636
> 
> 赞同：1
> 
> 时间：2012-10-19T02:44:15.000
> 
> 标签：embed, powerpoint

在网页上嵌入 .ppsx（PowerPoint 扩展名）的最佳方式是什么？我尝试了 Google Docs，但目前不受支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:22:11.800

“最佳”取决于您所追求的，但这解释了一种很好的简单方法，无需任何成本，并且不需要最终用户安装 PowerPoint：

[http://www.microsoft.com/web/solutions/powerpoint-embed.aspx](http://www.microsoft.com/web/solutions/powerpoint-embed.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T14:50:10.433

尝试创建快捷方式 (.lnk)，然后链接到快捷方式，而不是直接链接到文件。不完美，但很接近。

# ruby - 如何在不使用 Google Maps API 的情况下计算两个 GPS 坐标之间的距离？

> ID：12966638
> 
> 赞同：30
> 
> 时间：2012-10-19T02:44:33.987
> 
> 标签：ruby, google-maps

我想知道是否有一种方法可以在不依赖 Google Maps API 的情况下计算两个 GPS 坐标的距离。

我的应用程序可能会收到浮点坐标，或者我必须在地址上执行反向 GEO。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-19T07:43:53.740

地球上两个坐标之间的距离通常使用[Haversine公式计算](http://en.wikipedia.org/wiki/Haversine_formula)。这个公式考虑了地球的形状和半径。这是我用来计算以米为单位的距离的代码。

```
def distance(loc1, loc2)
  rad_per_deg = Math::PI/180  # PI / 180
  rkm = 6371                  # Earth radius in kilometers
  rm = rkm * 1000             # Radius in meters

  dlat_rad = (loc2[0]-loc1[0]) * rad_per_deg  # Delta, converted to rad
  dlon_rad = (loc2[1]-loc1[1]) * rad_per_deg

  lat1_rad, lon1_rad = loc1.map {|i| i * rad_per_deg }
  lat2_rad, lon2_rad = loc2.map {|i| i * rad_per_deg }

  a = Math.sin(dlat_rad/2)**2 + Math.cos(lat1_rad) * Math.cos(lat2_rad) * Math.sin(dlon_rad/2)**2
  c = 2 * Math::atan2(Math::sqrt(a), Math::sqrt(1-a))

  rm * c # Delta in meters
end

puts distance([46.3625, 15.114444],[46.055556, 14.508333])
# => 57794.35510874037 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-14T22:49:59.973

您可以使用[geokit ruby​​ gem](https://github.com/geokit/geokit)。它在内部进行这些计算，但如果您需要，还支持通过 google 和其他服务解析地址。

```
require 'geokit'

current_location = Geokit::LatLng.new(37.79363,-122.396116)
destination = "37.786217,-122.41619"
current_location.distance_to(destination) 

# Returns distance in miles: 1.211200074136264 
```

您还可以找出`bearing_to`（方向表示为 0-360 度之间的浮点数）和`midpoint_to`（返回可以运行 .latitude 和 .longitude 方法的对象）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-25T05:27:26.997

只是 @Lunivore 答案的更短和分开的参数版本

```
RAD_PER_DEG = Math::PI / 180
RM = 6371000 # Earth radius in meters

def distance_between(lat1, lon1, lat2, lon2)
  lat1_rad, lat2_rad = lat1 * RAD_PER_DEG, lat2 * RAD_PER_DEG
  lon1_rad, lon2_rad = lon1 * RAD_PER_DEG, lon2 * RAD_PER_DEG

  a = Math.sin((lat2_rad - lat1_rad) / 2) ** 2 + Math.cos(lat1_rad) * Math.cos(lat2_rad) * Math.sin((lon2_rad - lon1_rad) / 2) ** 2
  c = 2 * Math::atan2(Math::sqrt(a), Math::sqrt(1 - a))

  RM * c # Delta in meters
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T03:05:47.103

我不确定任何预先打包的解决方案，但它似乎是一个相当简单的计算： [http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-02T15:21:05.697

您可以像这样使用[loc gem](https://github.com/klaxit/loc)：

```
require 'loc'

loc1 = Loc::Location[49.1, 2]
loc2 = Loc::Location[50, 3]

loc1.distance_to(loc2)
=> 123364.76538823603 # km 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-19T05:52:44.297

看看 gem [Geocoder](https://github.com/alexreisner/geocoder) ( [railscast](http://railscasts.com/episodes/273-geocoder) )

如果您将坐标存储在 db 中，它会使用数据库计算距离。但在其他情况下也很有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-28T14:47:30.373

将接受的答案转换为 Swift 3.1（适用于 Xcode 8.3），以防万一有人需要它：

```
public static func calculateDistanceMeters(departure: CLLocationCoordinate2D, arrival: CLLocationCoordinate2D) -> Double {

    let rad_per_deg = Double.pi / 180.0 // PI / 180
    let rkm = 6371.0                    // Earth radius in kilometers
    let rm = rkm * 1000.0               // Radius in meters

    let dlat_rad = (arrival.latitude - departure.latitude) * rad_per_deg // Delta, converted to rad
    let dlon_rad = (arrival.longitude - departure.longitude) * rad_per_deg

    let lat1_rad = departure.latitude * rad_per_deg
    let lat2_rad = arrival.latitude * rad_per_deg

    let sinDlat = sin(dlat_rad/2)
    let sinDlon = sin(dlon_rad/2)
    let a = sinDlat * sinDlat + cos(lat1_rad) * cos(lat2_rad) * sinDlon * sinDlon
    let c = 2.0 * atan2(sqrt(a), sqrt(1-a))

    return rm * c
} 
```

# javascript - 通过点击链接切换两个元素的 CSS 样式

> ID：12966639
> 
> 赞同：1
> 
> 时间：2012-10-19T02:44:34.877
> 
> 标签：javascript, jquery, css, styles, switch-statement

我正在构建的网页顶部有两个标签按钮。有两种与按钮相关联的样式，深蓝色表示未选中，浅蓝色表示已选中并可在页面上查看。我遇到的问题是我通过 SO 搜索了一个简单的简单 JS 函数，它可以切换 CSS 样式，而我目前拥有的那个做得很好。我遇到的问题，当你查看页面时你会看到这个问题是两者都以深蓝色背景开始，我只希望名为“概述”的链接之一以浅蓝色 BG 和“特征”链接有深蓝色的BG。单击时，两者都将随页面内容切换。

[网页链接](http://thoughttechnology.com/sciencedivision/latest/pages/products/myoscan.html)

**jQuery**

```
$(function() {
        var links = $('.scrollerbtn li a.slt').click(function() {
        links.removeClass('active');
        $(this).addClass('active');
        });
}); 
```

**HTML**

```
<div class="scrollernav">
        <ul class="scrollerbtn">                
               <li><a class="slt" href="#" id="scroll5load" onclick="changeClass1()">Overview</a></li>
               <li><a class="slt" href="#" id="scroll5load2" onclick="changeClass()">Features</a></li>
        </ul>                
</div> 
```

**CSS**

```
.scrollerbtn li a.slt {
display: inline;
color: #FFF;
text-align: center;
background-image: url(../../../images/tabbtnselect.png);
background-repeat: no-repeat;
background-position: center 5px;
width: 130px;
height: 40px;
line-height: 50px;
font-family: Verdana, Geneva, sans-serif;
font-size: 16px;
font-weight: normal;
text-decoration: none;
margin-right: 10px;
float: left;
margin-left: -30px;
}

.scrollerbtn li a.slt.active {
display: inline;
color: #333;
text-align: center;
background-image: url(../../../images/tabbtn.png);
background-repeat: no-repeat;
background-position: center 5px;
width: 130px;
height: 40px;
line-height: 50px;
font-family: Verdana, Geneva, sans-serif;
font-size: 16px;
font-weight: normal;
text-decoration: none;
margin-right: 10px;
float: left;
margin-left: -30px;
} 
```

我将如何修改这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:48:04.237

将活动类添加到“概述”选项卡。

```
<ul class="scrollerbtn">                
    <li><a class="slt active" href="#" id="scroll5load" onclick="changeClass1()">Overview</a></li>
    <li><a class="slt" href="#" id="scroll5load2" onclick="changeClass()">Features</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:51:42.443

基本上你需要做的是通过单击它来更改活动选项卡背景图像...？

# redirect - flash() 方法无法按预期工作

> ID：12966640
> 
> 赞同：0
> 
> 时间：2012-10-19T02:44:54.477
> 
> 标签：redirect, cakephp-1.3

请耐心等待，因为我正在安装一个较旧的 cake 1.3 安装项目。在我的控制器中，我有这个：`$this->flash('Thank you for contacting us. One of our managers will contact you soon.', '/m', 5000);`. 提交表单后，我的控制器会正确重定向用户，但它 1) 不会暂停 5 秒 2) 不会闪烁我的消息。我实际上是否必须在我的视图中添加一些对 flash() 的调用？我是否需要指定控制器使用会话助手？我不确定我做错了什么。

**更新**在我看来 尝试过`<?php echo $this->Session->flash(); ?>` ，它在提交表单时显示我的成功消息......然后它永远不会重定向。所以。是的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:36:27.180

闪光是

```
flash( $message, $url, $pause = 1, $layout = 'flash' ) 
```

另请注意，当调试打开时，重定向不会自动重定向，您实际上必须单击链接。当 debug 为 0 时，时间到后会自动重定向。

# git - 添加一个 Git 遥控器……我做得对吗？

> ID：12966641
> 
> 赞同：2
> 
> 时间：2012-10-19T02:45:09.210
> 
> 标签：git

当我将主题分支合并到 master 时，我收到了这条消息。我在 bitbucket 也有一个名为 origin 的遥控器，heroku 名为 dev（最初是 origin，但已重命名）。

我是否还应该说在 origin/bitbucket 后面有多少次提交？这是因为未克隆 bitbucket（现在的来源）吗？我怀疑它与跟踪分支有关，但我不完全确定这意味着什么。

```
 mistakes|tags-2col ⇒ co master
 Switched to branch 'master'
 mistakes|master ⇒ gmerge tags-2col 
 Merge made by the 'recursive' strategy.
  app.rb                 |    2 ++
  views/new/all_tags.erb |   57 +++++++++++++++++++++++++++++++++---------------
  2 files changed, 41 insertions(+), 18 deletions(-)
 mistakes|master ⇒ gs
 # On branch master
 # Your branch is ahead of 'dev/master' by 2 commits.
 #
 nothing to commit (working directory clean)

 mistakes|master ⇒ git remote
 dev
 origin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:43:30.167

You should only see a message regarding `master` compared to its [upstream](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166) branch.

If `master` is tracking '`dev/master`', then you know how it stands compared to that remote branch.
See "[Git: which is the default configured remote for branch?](https://stackoverflow.com/questions/4847101/git-which-is-the-default-configured-remote-for-branch)".

You *could* setup a remote with *multiple* urls, but it doesn't seem safe:
See "[Git status in regards to multiple remote repositories](https://stackoverflow.com/questions/11684637/git-status-in-regards-to-multiple-remote-repositories)".

# c# - WCF 客户端可伸缩性建议

> ID：12966642
> 
> 赞同：1
> 
> 时间：2012-10-19T02:45:10.617
> 
> 标签：c#, wcf, .net-4.0, scalability, wcf-client

我有一个多线程应用程序，每天调用同一服务 200,000 多次。目前它为每个调用实例化一个新的 ClientBase 自动生成的代理。

我可以做些什么来提高性能？实例化一个客户端并共享它？我应该调查异步客户端吗？如果可以，可以共享吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:54:03.787

您的服务运营的性质是什么？单向操作可以轻松切换到异步操作，只需最少的努力。特别是使用 TPL（来自 Async 方法系列）。

对象实例化通常也很便宜。只要确保它没有沉重的构造函数。并尽量减少成员数量，以使构建的类型尽可能轻量级。这不是优化的好点。

您可能需要优化服务调用，在它们期间（反）序列化数据类型。

# c - 找到选择 k 个数的方法数，这些数加起来为 n

> ID：12966644
> 
> 赞同：1
> 
> 时间：2012-10-19T02:45:20.003
> 
> 标签：c, algorithm, recursion

我需要找到选择`k`加起来的数字的方法数量`n`，其中`1<= k <= n`. 数字不得重复。我正在尝试一个递归解决方案，我认为它会陷入无限循环。

```
void noofways(int firstnumchosen,int sum,int numofnum)
{
   if(sum<0)
      return;

   if(sum==0 && numofnum!=0)
      return;

   if(sum==0 && numofnum==0){
      globalcount++;
      return;
   }

   if(numofnum<=0)
      return;

   // not choosing the first number
   noofways(firstnumchosen+1,sum,numofnum);

   //choosing the first number
   noofways(firstnumchosen+1,sum-firstnumchosen,numofnum-1);
} 
```

`globalcount`这里是一个全局变量。要使用 3 个数字得到 7 的总和，我将调用该函数`noofways(1,8,3);`。为了让自己更清楚，解决方案集由（1,2,5），（1,3,4）等组成。

为什么我的函数会无限运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:48:01.523

`noofways(x, y, z)`调用`noofways(x+1, y, z)`，所以 x 无限增长。

您需要测试 x 是否太大并在参数检查期间返回：

```
if (firstnumchosen > something)
    return; 
```

这不是唯一的问题，但它是无限循环的原因。

# image - FBRequest：为什么不允许非文本 mime 类型的响应？(iOS SDK)

> ID：12966647
> 
> 赞同：5
> 
> 时间：2012-10-19T02:45:25.340
> 
> 标签：image, facebook-ios-sdk

假设我使用 Facebook iOS SDK 对用户的个人资料图片执行图形请求：

```
[FBRequest requestForGraphPath:@"me/picture"] 
```

我会收到这个错误：

```
Response is a non-text MIME type; endpoints that return images and other binary data should be fetched using `NSURLRequest` and `NSURLConnection`. 
```

这背后的原因是什么？手动编写请求只花了一分钟，但为什么 Facebook iOS SDK 中没有包含这个常见任务，或者我错过了什么？

查看 Github 上的 Facebook iOS SDK 存储库，我们可以看到`FBRequestConnection.m`：

```
if (!error && [response.MIMEType hasPrefix:@"image"]) {
        error = [self errorWithCode:FBErrorNonTextMimeTypeReturned
                         statusCode:0
                 parsedJSONResponse:nil
                         innerError:nil
                            message:@"Response is a non-text MIME type; endpoints that return images and other "
                                    @"binary data should be fetched using NSURLRequest and NSURLConnection"];
    } 
```

如果我正确理解这一点，`FBRequestConnection`得到我想要的响应（即个人资料图像）然后告诉我我不能拥有它。真是个逗比。为什么首先提出请求？

对此有何评论？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T11:39:37.300

对于大图

`me?fields=picture.type(large)`

请参阅[Facebook Graph API 更改：图片类型（大小）不再工作？](https://stackoverflow.com/questions/11982276/facebook-graph-api-change-picture-type-size-no-longer-working)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T04:23:09.467

解决方案是要求一个特定的字段而不是图片（在这里找到：[Facebook Graph API will not give me picture data](https://stackoverflow.com/questions/2978761/facebook-graph-api-will-not-give-me-picture-data)）

所以使用

```
[FBRequest requestForGraphPath:@"me?fields=picture"] 
```

那应该工作

# android - 如何在保持相同活动的同时保存 EditText 文本并能够在之后使用它

> ID：12966651
> 
> 赞同：0
> 
> 时间：2012-10-19T02:45:47.103
> 
> 标签：android, android-intent, android-activity, android-edittext

我试图弄清楚如何保存两个的内容，但是官方网站上的示例在*更改 Activity*并显示它的`EditText`同时做到了这一点。

 *我想在*不更改 Activity*`EditText`的情况下保存内容，然后在*Activity 更改*时能够显示它们。

 **我觉得问题可能是我不了解 Intents 是如何工作的

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_screen);
    EditText editPositive = (EditText) findViewById(R.id.editPositive);
    EditText editNegative = (EditText) findViewById(R.id.editNegative);
    editPositive.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            Intent intent = null;
            EditText editPositive = (EditText) findViewById(R.id.editPositive);
            String positive = editPositive.getText().toString();
            intent.putExtra(POSITIVE_MESSAGE, positive);
            startActivity(intent);

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub

        }

    }); ` 
```

现在我正在尝试保存此 editText 的内容以供任何视图使用，但在开发人员网站上的示例中，他们已经知道他们将使用 editText 的视图，它没有向您展示如何使用它在任何观点上。代替

```
Intent intent = new Intent(this, DisplayMessageActivity.class); 
```

我不知道一年中 365 天的每一天我会在哪些视图上使用 editText 的内容。这取决于用户在弹出的 datePicker 中输入的日期。我将如何编写可以从任何视图使用的意图？而且我猜这个方法不会进入 on create 但这是我放置它时唯一没有出错的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:01:01.130

输入后立即使用`onTextChangedListener`并保存 editText 值。

```
editText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub              
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub              
            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                //intent to another page where i show my search result
            }
        }); 
```***

# git - 如何在 GitHub 上设置镜像仓库

> ID：12966653
> 
> 赞同：22
> 
> 时间：2012-10-19T02:46:05.687
> 
> 标签：git, github

如果这个问题有点离题，我深表歉意，但我想知道如何在 GitHub 上设置“镜像”存储库，如[https://github.com/mirrors](https://github.com/mirrors)所示。

另外，我正在运行 Windows。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T02:53:43.053

除了由 Github 工作人员维护之外，这看起来就像一个普通用户帐户。如果您认为他们有兴趣在该页面上托管您的项目，您可以向他们发送电子邮件，如页面所述：support@github.com

然而，除非你是 Linus Torvalds 或 Larry Wall，否则他们可能不会抓住这个机会。您必须[设置自己的帐户](https://github.com/plans)，然后只需[创建](https://help.github.com/articles/create-a-repo)一个公共存储库——它是免费的——瞧，这就是你的镜像。

在本地，如果您已经有该项目的不同远程存储库，您只需将您的 Github 帐户设置为[第二个远程](https://stackoverflow.com/questions/44714/how-to-have-two-remote-orgins-for-git)，您可以在推送到主远程时或在特殊情况下推送到该远程。

如果您想创建一个显示您在其镜像页面上看到的“mirrored from”行的存储库，根据此答案，您必须联系 Github 支持： [创建官方 github 镜像](https://stackoverflow.com/questions/11370239/creating-an-official-github-mirror)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:58:23.020

我怀疑 GitHub 是否有自动镜像 repo 的机制。这与他们希望你首先在 GitHub 中拥有 repo 的做法背道而驰。

如果你想镜像一个公共回购，很可能有人已经在这样做了。然后你可以使用它（或分叉它）。否则，您将需要一些服务器或 cronjob 或为您完成它的东西。或者，如果您要镜像的存储库支持提交后挂钩，请设置一个挂钩以推送到 GitHub。

# php - 使用 Json 更好的 PHP

> ID：12966655
> 
> 赞同：3
> 
> 时间：2012-10-19T02:46:07.710
> 
> 标签：php, html, json, zend-framework

您好，目前我在 Zend php 框架上有一个应用程序，并且我大量使用 json 从控制器获取数据。现在我不确定我在javascript中将json数据解析为hmtl的方式是否好。下面是我的示例代码。

控制器：

```
public function searchAction()
    {
        $search = $this->getRequest()->getParam('search');
        $user = new Application_Model_User();
        $userMapper = new Application_Model_Mapper_UserMapper();

        $usersearch = $userMapper->findByString($search);

        for($i=0; $i<count($usersearch); $i++)
        {
            $usersearch[$i]['pic'] = $this->view->getLoginUserImage($usersearch[$i]['social_id'],$usersearch[$i]['login_type'],null,null,square);
        }
          $this->_helper->json($usersearch);

    } 
```

查看：member.phtml

```
<div class="container">
    <div class="clearfix page-header">
        <h1 class="heading">Member Search</h1>
    </div>

<div class="clearfix layout-block layout-a">
<div class="column column-alpha member-search-container">
                <div class="search-input-container clearfix">

            <form action="/member_search?query=" class="member-search-form" id="member-search-form" method="get" name="member_search_form" data-component-bound="true">

                        <fieldset>
                            <legend>Member Search</legend>
                            <label for="name_field">
                                <strong>    Name</strong>
                            </label>
                            <span class="formNote">
                                    (e.g. Bob Smith, Bob S.)
                            </span><br>
                            <input type="hidden" name="action_search" value="Search">
                            <input class="name-field" id="story-title" name="query" size="90" type="text" placeholder="search" autocomplete="off" style="width:220px;">
                            <div id="search-box"></div>
                            <div class="auto-name" style="display: none;"></div>
                        </fieldset>

</form>         

                </div>
                <div class="member-search-results">
                </div>

</div>

</div>

</div>
<script type="text/javascript">
$(document).ready(function(){

});

$('#story-title').keyup(function(e){
    var searchbox = $(this).val();

    if(searchbox == '')
    {
        $(".similar_story_block").hide();
    }else {

    $.ajax({
        url:"<?= $this->baseUrl('index/search')?>",
        data:{'search':$('#story-title').val()},
        dataType:"json",
        type:"POST",
        cache:false,
        success:function(data){
            if(data.length > 0)
            {
                        var divHtml = '<div class="similar_story_block" style="display: block;">'+
                        '<div class="head">'+
                        '<p>People</p>'+
                        '<a href="#" id="close-element-form" onclick="javascript:closeSearchBoxMember(event)"></a>'+
                        '</div>'+
                        '<ul>';

                       for(var count=0; count<data.length;count++)
                       {
                            if(data[count]['reviews_num'] != null )
                            {
                                 data[count]['reviews_num']
                            }
                            else 
                            {
                                data[count]['reviews_num'] = 0
                            }

                            divHtml+='<li>'+

                            '<a class="pushstate no-confirm" href="' + baseUrl + 'user/' + data[count]['user_unique_name'] + '">'+
                            '<div class="image">'+
                            '<img alt="" src="'+data[count]['pic']+'">'+
                            '</div>'+
                            '<div class="fleft col-400">'+
                            '<p>'+ data[count]['name'] +'</p>'+
                            '<span>'+data[count]['reviews_num']+' Reviews</span>'+
                            '</div>'+
                            '</a>'+
                            '</li>';                        
                       }
                        divHtml += '</ul></div>';
                        $("#search-box").html(divHtml);
                        $(".search-box").show();                        

            }
            else {
                         $("#search-box").html('');
                        $(".search-box").hide();
            }
        }
    }) }
});

    function closeSearchBox(event)
    {
        disabledEventPreventDefault(event);
        $(".similar_story_block").hide();
    }

</script> 
```

目前，上述代码将对已注册该网站的会员进行实时查询。代码工作得很好，但我不确定这是否是正确的做法。下面是它在 chrome 调试控制台上的外观

![控制台调试](../Images/2f53a618a1f0ea293abdedff91a0f9da.png)

看来我暴露了太多细节。如果有人能提出一种更好的从控制器获取数据的方法，或者如何通过使用部分模板来完成，我们将不胜感激。谢谢你的帮助 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:30:09.737

您可以通过 PHP 呈现您的模板并通过网络发送 HTML，或者您可以发送 JSON 并使用 JavaScript 呈现您的模板。

我建议后者使用[HandlebarsJS](http://handlebarsjs.com/)之类的东西。

定义 HTML 模板：

```
<script id="member-template" type="text/x-handlebars-template">
  <p>Name: {{ name }}</p>
  <p>Role: {{ role }}</p>
</script> 
```

我们的 JSON 数据示例：

```
var data = {"name": "Bob", "role": "Manager"}; 
```

使用我们的 JSON 数据渲染我们的模板：

```
var template = Handlebars.compile($("#member-template").html());
var html     = template(data); 
```

该`html`变量将是您可以在`<div class="member-search-results">`div 中插入的已编译 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:05:28.377

我认为如果您的项目有很多访问者并且经常使用此操作，您可以将此功能传递给他们。它可以减少服务器上的少量负载。但只有当您有很多访问者（综合浏览量）时，它才会起作用。但是，如果您的项目不是那么大，您将感觉不到差异，并且“PHP 方式”在我看来可能会更容易。

# ruby - 按另一个散列中的值对散 列进行排序

> ID：12966659
> 
> 赞同：2
> 
> 时间：2012-10-19T02:46:41.693
> 
> 标签：ruby, sorting, hash, key

我想按 Hash1 的值的顺序对 Hash2 的键进行排序。Hash2 不需要包含 Hash1 的所有值。Hash1 不需要包含 Hash2 的所有键。如果 Hash2 中存在的键在 Hash1 中没有对应的值，则应将其排序在任何现有的有序键之下。

```
Hash1 = {
    p0: "q11",
    p1: "q55",
    p2: "q92",
    p3: "q77"

}

Hash2 = {
    q55: {...},
    q23: {...},
    q59: {...},
    q98: {...},
    q11: {...}
}

=>
DesiredHash = {
    q11: {...},
    q55: {...},
    q23: {...},
    q59: {...},       
    q98: {...} 
} 
```

实现这一目标的最 Ruby-ish 方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:28:06.980

类似于@sawa，但使用 Hash#values 真的可以清理恕我直言：

```
keys = Hash1.values.map &:to_sym
Hash[Hash2.sort_by{|k, v| keys.index(k) || keys.length}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:00:54.927

```
array = Hash1.map{|k, v| [k, v.to_sym]}
Hash[Hash2.sort_by{|k, _| array.index{|_, v| k == v} || array.length}] 
```

或者，也许效率更低但更短：

```
array = Hash1.to_a
Hash[Hash2.sort_by{|k, _| array.index{|_, v| k == v.to_s} || array.length}] 
```

**解释（使用第二个）** `Hash1`将被用作参考，这意味着你想用它的“索引”做一些事情。由于哈希没有索引的概念，因此您必须将其转换为`array`. `to_a`这样做。接下来，您要按`Hash2`索引的顺序排序（这意味着它将隐式转换为具有键值对的数组），以`array`使 的键`Hash2`与 的“值”匹配`array`。`index{...}`会查找这样的索引。如果没有匹配，`array.length`将被分配，它比任何索引都大`array`。最后，您希望将这对键值对转换回散列。这是由`Hash[...]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:07:15.250

```
hash1 = {
    p0: "q11",
    p1: "q55",
    p2: "q92",
    p3: "q77"

}

hash2 = {
    q55: 1,
    q23: 2,
    q59: 3,
    q98: 4,
    q11: 5
}

def get_key(hash, value)
  hash.each { |k, v| return k if v == value }
  return hash.keys.max
end

Hash[hash2.sort_by { |a, _| get_key(hash1, a.to_s) }]
#=> {:q11=>5, :q55=>1, :q23=>2, :q98=>4, :q59=>3} 
```

# xslt - 在独立的 HTML 文件中使用 javascript（或 JQuery）来选择 XML 并转换

> ID：12966660
> 
> 赞同：1
> 
> 时间：2012-10-19T02:46:58.443
> 
> 标签：xslt

我需要一种将 XML 转换为 HTML（使用 XSL）但没有服务器的方法。所以，我想创建一个独立的 HTML 文件（带有硬编码 XSL 路径和名称）。允许用户选择一个 XML 使用 XSL 转换它并在浏览器中显示结果

原始 XML 无法更改（因此不能仅在 XML 中嵌入 XSL）

这可能吗？我发现的所有内容都需要发布，但我没有使用服务器

问候

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:40:46.373

是的，这是可能的。而且您不需要 javascript 来执行此操作，但您可以根据需要使用 javascript。

看看前面的（XSLT 问题）[ [https://stackoverflow.com/questions/12964917]](https://stackoverflow.com/questions/12964917])

使用处理指令，如...

```
<?xml-stylesheet type="text/xsl" href="soccer.xslt"?> 
```

参考：

*   通过 pi 直接链接：http: [//www.w3.org/TR/xml-stylesheet/](http://www.w3.org/TR/xml-stylesheet/)
*   通过javascript转换：
    *   [http://dev.ektron.com/kb_article.aspx?id=482](http://dev.ektron.com/kb_article.aspx?id=482)
    *   [从 javascript 调用 XSLT](https://stackoverflow.com/questions/7677145/calling-xslt-from-javascript)

# git - git - rebase 废墟合并

> ID：12966667
> 
> 赞同：6
> 
> 时间：2012-10-19T02:48:33.293
> 
> 标签：git, git-merge, git-rebase

我有两个独立的分支。我在一个多月的不同时间点对它们进行了研究。我通过检查橙色并做将一个分支（让我们称之为`apple`）合并到另一个（让我们称之为） ，一切都很顺利。在 gitk 中，我可以清楚地看到每个分支都有自己的历史记录，并且在橙色的合并提交中合并在一起。 `orange``git merge --no-ff apple`

后来我意识到橙色的提交是不正确的，构建过程中有一个错误，我必须编辑橙色的早期提交。我使用`git rebase -i HEAD~19`，选择提交并更改`pick`为`edit`. 所以我编辑了提交，一切都很好，我完成了变基。我回到 gitk，这两个分支的所有历史都是橙色的线性历史。

那么我是不是搞砸了，或者这就是它应该的方式？我使用 git reflog 回到我做合并的时候，然后我做了另一个重置，很难回到橙色合并之前，然后我做了 rebase 并修复了那个提交，然后我做了合并。现在一切看起来都像我期望的那样，来自分支的提交没有交错在一起。

为了将来的参考，有人可以告诉我如何在我已合并到另一个分支的分支上重新提交提交，而不会以交错提交（线性历史）结束？

如果我的术语不正确，请随时编辑。再次感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T05:15:48.040

这是变基的预期行为。它有效地重写了分支的历史，这导致它（默认）丢失合并和其他元数据，留下一个直接的、简化的分支。

您可以通过使用保留合并

```
git rebase --preserve-merges 
```

`--preserve-merges`但与结合存在一些问题`--interactive`。小心行事。

# list - 在 common lisp 中永久更改列表

> ID：12966670
> 
> 赞同：2
> 
> 时间：2012-10-19T02:49:21.570
> 
> 标签：list, common-lisp, pass-by-reference, permanent

我有一个在循环中使用的列表，并且在每次迭代中，我都会应用一个永久更改列表的函数（弹出和添加元素）。问题是，只要原始列表为零，就永远不会更改。我该如何解决这个问题？我的代码如下所示

```
(defun looping-func ()
    (let ((queue '(2)))
          (loop while (not (null queue)) do
            (let (  (num (pop queue)))
                (if (oddp num)
                    (format t "~%~A success" num)
                    (progn (format t "~%fail")
                           (add-to-list (1+ num) queue)))))))

(defun add-to-list (elem l)
    (nconc l (list elem))) 
```

如果列表包含超过 1 个元素，则代码将按预期工作。如果它恰好包含 1 个元素，则一旦弹出该元素并且列表变为 nil，则应用的更改不再对列表永久存在。我想这是因为 nconc 是如何定义的，如果第一个参数为零，则只返回第二个参数而不做任何更改。关于如何解决这个问题的任何想法？

PS：我知道上面的代码没用，但是我在一个学校项目中使用了相同的概念，很遗憾我无法发布代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:02:48.867

改变

```
(add-to-list (1+ num) queue) 
```

到

```
(setq queue (add-to-list (1+ num) queue)) 
```

你不能“扩展`nil`”`nconc`

```
(nconc nil . lists) 
```

相当于

```
(nconc . lists) 
```

`add-to-list`所以，你需要把结果`queue`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T08:53:05.957

**不要将元素添加到列表的末尾。**

绝不。

Lisp 中的列表的设计方式是向头部添加元素很便宜。添加到最后可能是昂贵的。

要实现 LIFO 队列，您需要不同的实现。

**不要在运行时更改源代码中的常量文字数据。**

**正确缩进你的代码。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T10:13:36.357

因为我认为这是一个练习，所以这里有一个例子，你不应该在日常练习中使用它，你应该使用`push`宏，它可能会做类似的事情：

```
(defmacro push-example (item list)
  (let ((the-list list))                ; we do this to prevent
                                        ; multiple evaluations
                                        ; of the `list' argument
  `(setq ,the-list (cons ,item ,the-list))))

(defparameter *test* nil)

(push-example 'foo *test*) ;; (foo)
*test* ;; (foo) 
```

虽然您没有要求宏（您要求函数），但 Doug 的回答在技术上更正确，这说明了如何通过宏使用代码生成来完成它。请注意，这基本上与您的函数所做的事情相同，只是它可以封装对`setq`您必须进行的调用。

# algorithm - 递归 - 洪水填充算法

> ID：12966674
> 
> 赞同：3
> 
> 时间：2012-10-19T02:49:45.710
> 
> 标签：algorithm, recursion, fill, flood-fill

我需要编写一个洪水填充算法以用于更大的代码，该代码根据它们所在的房间用不同颜色的水填充洞穴的特定单元。

出于某种原因，我的递归算法不起作用并一直告诉我我超过了最大递归深度，我不知道为什么。

我试图逐个单元格地检查它是空气、石头还是水，如果是石头还是水，我希望它什么也不做。如果是 AIR，我希望它填充该单元格。

谁能给我一些提示或建议？

```
#flood fill algorithm
def fill(cave, row, col, color):

    caveWidth = len(cave)
    caveHeigth = len(cave[0])

    if row > 0:
        fill(cave, row-1, col, color) #left
    if col > 0:
        fill(cave, row, col-1, color) #up
    if row < caveWidth-1:
        fill(cave, row+1, col, color) #right
    if col < caveHeigth-1:
        fill(cave, row, col+1, color) #down

    if cave[row][col] == STONE or cave[row][col] == WATER:
        return

    if cave[row][col] == AIR : 
        cave[row][col] = WATER
        grid.fill_cell(row, col, color) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T02:53:19.793

打印`row`并`col`在`fill`例程开始时查看这里有什么问题。一些代码重新排序，你很好:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:02:30.967

不要使用递归算法，它们是魔鬼的玩物。

维基百科列出了各种实用算法，如扫描线填充。

# elasticsearch - 弹性搜索如何支持多租户？

> ID：12966676
> 
> 赞同：2
> 
> 时间：2012-10-19T02:50:07.387
> 
> 标签：elasticsearch

我只是想知道 ElasticSearch 如何支持多租户？多租户意味着不同的客户可以有不同的索引。ElasticSearch 会为每个客户构建不同的索引还是单个索引（一种稀疏索引）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T03:05:05.073

基本上你是对的。ElasticSearch 中的多租户意味着：

*   配置分配给特定用户帐户的索引
*   使用可分配给特定用户帐户的特定过滤/路由配置别名

希望有帮助...

# asp.net - 将链接图像添加到单元格文本后列中的 GridView 单元格

> ID：12966677
> 
> 赞同：0
> 
> 时间：2012-10-19T02:50:17.117
> 
> 标签：asp.net, gridview

对于我的网格视图中的“开始日期”列之一，如果用户具有正确的权限，我想添加一个编辑图标来打开一个允许用户编辑日期的日历。

我有以下代码将图像添加到列中，但它替换了日期，而不是在日期之后附加图像。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (System.Web.Security.Roles.IsUserInRole(Security.GetUserName(true, true), "UpdateStartDate"))
        {
          HyperLink hl = new HyperLink();
          // hl.Text = e.Row.Cells[6].Text;
          hl.ImageUrl = "../images/pencil.gif";

          e.Row.Cells[6].Controls.Add(hl);
        }
    }
} 
```

网格视图列

```
<asp:BoundField HeaderText="Start Date" DataField="start_dt" DataFormatString="{0:d}" SortExpression="start_dt" ReadOnly="true" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:51:50.393

我认为最好使用相反的方法：如果用户具有适当的权限，则不要显示编辑链接，而是如果用户没有，则隐藏链接。在带有日期值的文本框旁边添加超链接控件，并在`GridView1_RowDataBound`方法中有条件地隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:31:38.607

受保护的无效GridView1_RowDataBound（对象发送者，GridViewRowEventArgs e）{

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    if (System.Web.Security.Roles.IsUserInRole(Security.GetUserName(true, true), "UpdateStartDate"))
    {
      HyperLink hl = e.Row.find("h1")
      // hl.Text = e.Row.Cells[6].Text;
      hl.ImageUrl = "../images/pencil.gif";
      h1.visible=true;

    }
    else
    {
      HyperLink hl = e.Row.find("h1")
      h1.visible=false;
     }
} 
```

}

我认为您在设计本身中添加超链接并控制行数据绑定中的可见性

# random - 在 wiki 主页上调用随机文章

> ID：12966680
> 
> 赞同：0
> 
> 时间：2012-10-19T02:50:57.367
> 
> 标签：random, call, mediawiki, wiki, article

我有一个食谱维基，想在主页上放一个“随机食谱”。希望您能够帮助我。

我查看了维基媒体的帮助，但没有找到任何 [http://www.mediawiki.org/w/index.php?title=Special%3ASearch&profile=advanced&search=random+article&fulltext=Search&ns90=1&redirs=1&profile=advanced](http://www.mediawiki.org/w/index.php?title=Special%3ASearch&profile=advanced&search=random+article&fulltext=Search&ns90=1&redirs=1&profile=advanced)

这是我正在研究的维基 [http://lesmots.uy/labs/enciclochef](http://lesmots.uy/labs/enciclochef)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:07:37.730

我相信您正在寻找[Extension:ArticleInclude](http://www.mediawiki.org/wiki/Extension%3aIncludeArticle)。它允许您用 wiki 上的任何随机文章覆盖包含的文章名称。它还允许您限制长度，以便您只能看到该文章的片段。

出于您的目的，我想配​​方标题和/或成分就足够了。包括成分可能很棘手，因为您以简单的列表格式将它们列在页面顶部。如果您选择使用 ArticleInclude 扩展，我建议将您的成分保持在一行，并使用 HTML 创建换行符，以便您可以使用 lines 选项可靠地获得所需的内容。

示例，从[Torta aromática](http://lesmots.uy/labs/enciclochef/index.php?title=Torta_arom%C3%A1tica)更改：

```
<blockquote> 3 huevos <br> 3 cucharadas de leche <br> 6 cucharadas de manteca derretida <br> 1 ½ tazas de harina <br> ¾ tazas de azúcar <br> 2 cucharaditas de polvo de hornear <br> 2 cucharaditas de canela <br> ¼ cucharadita de clavo de olor molido <br> ½ cucharadita de cáscara de limón rallada </blockquote> 
```

相关选项：

> ```
> random: Overides article and shows a random article of the given namespaces
> count: How many letters will be shown, negative values will display the whole article removing the specific number of letters from the end
> lines: Count lines (not letters) that will be shown 
> ```

**编辑：** 如果您不想为扩展而烦恼，自 MediaWiki 1.8 以来，[Transclusion](http://www.mediawiki.org/wiki/Transclusion)是开箱即用的，但没有随机文章功能。您之前可能已经在新用户讨论页面上看到过嵌入，其中许多 wiki 通常会链接到一个页面，其中包含对新用户有用的建议。

# java - 图中的 Java Jung 顶点切割

> ID：12966684
> 
> 赞同：0
> 
> 时间：2012-10-19T02:51:34.563
> 
> 标签：java, graph, vertex, jung

我正在尝试对 JUNG 图形包中的图形进行顶点切割。这可以通过以下图片得到最好的解释：![顶点切割之前](../Images/d20ebe77362f856534f7de4afbd2fb36.png)

现在，我要从图中删除顶点“c1”： ![顶点切割后](../Images/6ade5664d69f10d45a981950158928d9.png)

如您所见，顶点“c1”已从图中删除，但顶点“c2”和“c3”也已删除

**当我切割顶点“c1”时，我希望顶点“c2”和“c3”留在图中。**

我正在使用该`removeVertex(V vertex)`函数从图中删除顶点“c1”。

1.  当我切割顶点“c1”时，如何实现我的代码以保留顶点“c2”和“c3”？
2.  我使用 Forest 作为我的图表类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:30:17.770

您可以查看`DelegateForest`它的命令，该[`removeVertex(vertex,boolean)`](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/graph/DelegateForest.html#removeVertex%28V,%20boolean%29)命令可让您指定是否删除以您的顶点为根的整个子树

# javascript - 提示搜索 (Jquery)

> ID：12966690
> 
> 赞同：2
> 
> 时间：2012-10-19T02:52:05.297
> 
> 标签：javascript, jquery, livesearch

我正在尝试自定义[Tipue 搜索](http://www.tipue.com/search/)脚本。

目前该脚本正在搜索整个 HTML 文件（包括元数据）并在搜索结果中触发误报。我想从标准中删除元数据，或者只允许脚本搜索特定的 DIV（即#pagewrap）。

这是当前脚本的链接： [http](http://www.worldonecommunications.com/ndrill/tipuesearch/tipuesearch.js) ://www.worldonecommunications.com/ndrill/tipuesearch/tipuesearch.js（第 37-77 行）

这些页面在一个单独的文件中被索引，但我认为问题出在上面列出的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:59:19.517

对于其他感兴趣的人：开发人员最终更新了搜索脚本以仅针对特定 DIV。更新后的代码可以从他们的网站下载： [http ://www.tipue.com/search/](http://www.tipue.com/search/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:42:32.590

我认为您需要更改以下几行：

```
var t_1 = html.toLowerCase().indexOf('<title>');
var t_2 = html.toLowerCase().indexOf('</title>', t_1 + 7);
...
var t_1 = html.toLowerCase().indexOf('<meta name="description"');
var t_2 = html.toLowerCase().indexOf('"', t_1 + 34); 
```

我也在寻找一种方法来修改这个引擎以从页面正文中输出结果。

# xpages - 使用扩展库设置社交业务工具包 SBT 数据库

> ID：12966692
> 
> 赞同：0
> 
> 时间：2012-10-19T02:52:18.043
> 
> 标签：xpages, xpages-extlib

我正在尝试配置连接 vcard。[我已根据文档](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=Lotus%20Connections%203%20documentation#action=openDocument&res_title=Configuring_the_Communities_business_card_on_a_Domino_server_lc3&content=pdcontent)对 pr​​oxy-config.properties 进行了更改。但出现以下错误。 ![在此处输入图像描述](../Images/7a9f29f85f9641a85a93640f5b2982a2.png)

有人可以告诉我缺少什么吗？

问候，

普拉尚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:58:27.637

您是否根据需要设置了网络安全商店？有关详细信息，请参阅[http://heidloff.net/home.nsf/dx/12152011034545AMNHECAP.htm](http://heidloff.net/home.nsf/dx/12152011034545AMNHECAP.htm)。

# database - IntelliJ IDEA 的数据库视图中看不到某些数据库

> ID：12966693
> 
> 赞同：1
> 
> 时间：2012-10-19T02:52:31.690
> 
> 标签：database, intellij-idea

由于某种原因，某些数据库在 IntelliJ IDEA 的数据库视图中不可见。

我在用着：

*   IntelliJ IDEA 122.519
*   Linux Centos 6.3 上的 MySql 5.5

我做了全新安装的mysql。`test`你记得有db。

我在 IDEA 中创建了 DB DataSource 并指定了根凭据。然后右键单击它并单击“刷新”。它在 UI 中向我显示了以下数据库：

*   信息模式
*   mysql
*   性能模式

但是没有`test`！

有趣的是，我可以看到`test`是否转到数据源属性对话框并检查`Schemas & Tables`选项卡。

这是一个错误吗？

我不知道为什么会这样，但我觉得这与用户创建的特定数据库有关。

任何想法如何看待一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:16:22.450

您应该在此架构中至少创建一个表。

# c# - 具有多线程访问和 ACID 事务的 nhibernate 免安装数据库

> ID：12966694
> 
> 赞同：0
> 
> 时间：2012-10-19T02:52:32.973
> 
> 标签：c#, wpf, database, nhibernate

我在 C# 中有一个小程序，它以多线程方式每隔一段时间检查网页。它还使用 NHibernate 作为 ORM 引擎，目前使用 SQL Server。为了允许我的用户进行简单的安装，我想使用一个不需要安装的更轻量级的数据库，但它应该允许我的应用程序继续多线程并使用 ACID 事务。我应该使用什么数据库？请记住，我不希望我的客户安装任何 dbms 软件，只需复制 app 文件夹并运行即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:21:32.027

您可以使用[SQLite](http://nuget.org/packages/System.Data.SQLite)或[SQL Server Compact Edition](http://nuget.org/packages/Microsoft.SqlServer.Compact)。

# c# - 当对象的属性发生变化时执行一个函数

> ID：12966695
> 
> 赞同：0
> 
> 时间：2012-10-19T02:52:36.513
> 
> 标签：c#, .net

我有一个看起来像这样的对象模型：

```
public class MyModel
{
    public List<MyOtherObject> TheListOfOtherObjects { get; set; }

    public List<int> MyOtherObjectIDs { get; set; }

    public void GetListOfMyOtherObjectIDs() 
    {
       // function that extracts the IDs of objects in
       // the list and assigns it to MyOtherObjectIDs
    }
} 
```

目前，我有一些代码在从查询中填充`GetListOfMyOtherObjectIDs`时执行。`TheListOfOtherObjects`现在我在代码中的另一个位置也填充了这个列表，当它出现时，它还需要执行该`GetListOfMyOtherObjectIDs`函数。

有没有办法使这个过程自动化，以便在`TheListOfOtherObjects`填充时，无论哪个代码触发它，对象模型都会自动执行`GetListOfMyOtherObjectIDs`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:58:45.593

使用您自己的`set`访问器：

```
public class MyModel
{
    private List<MyOtherObject> _TheListOfOtherObjects;
    public List<MyOtherObject> TheListOfOtherObjects {
        get { return _TheListOfOtherObjects; }
        set { _TheListOfOtherObjects = value; GetListOfMyOtherObjectIDs(); }
    }

    public List<int> MyOtherObjectIDs { get; set; }

    public void GetListOfMyOtherObjectIDs() 
    {
       // function that extracts the IDs of objects in
       // the list and assigns it to MyOtherObjectIDs
    }
} 
```

# java - 转换 ArrayList 对于 JAVA/Android 到 Double Array，反之亦然

> ID：12966702
> 
> 赞同：2
> 
> 时间：2012-10-19T02:53:37.920
> 
> 标签：java, android

我一直在尝试将 Double ArrayList 转换为 Double Array，反之亦然。

这是我将 Double ArrayList 转换为 Double Array 的代码，但程序不断崩溃。我错过了什么吗？还是逻辑错了？

```
ArrayList<Double> numsy = new ArrayList<Double>();
ArrayList<Double> numsx = new ArrayList<Double>();  
for (int j = 0; j < 100; j++) {
    numsy.add((double)generator.nextFloat());
    numsx.add((double)j);
}
double[] arrayX = new double[numsx.size()];     
double[] arrayY = new double[numsy.size()];
//assigns array x and y the values in the list.
for (int k1 = 0; k1 < numsy.size(); i++) {
    double f = numsy.get(k1);
    arrayY[k1] = f;
    f = numsx.get(k1);
    arrayX[k1] = f;
}
FFT doFFT = new FFT(4);
doFFT.fft(arrayX, arrayY);
//adding the FFT numbers back to the Lists
for (int j = 0; j < 100; j++) {
    numsy.add(arrayY[j]);
    numsx.add(arrayX[j]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T02:57:00.667

您`Arrays` **在添加**值之前实例化您的`ArrayLists`：

```
double[] arrayX = new double[numsx.size()];     
double[] arrayY = new double[numsy.size()]; 
```

这将创建具有`length`: **0**的数组。然后你将在下面的循环中有一个空指针。

**更新**

然后你必须编辑你的循环：

```
for (int k1 = 0; k1 < numsy.size(); i++) { 
```

对此

```
for (int k1 = 0; k1 < numsy.size(); k1++) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:00:06.267

```
ArrayList<Double> numsy = new ArrayList<Double>();
ArrayList<Double> numsx = new ArrayList<Double>();

 for (int j = 0; j < 100; j++) {
     numsy.add((double)generator.nextFloat());
     numsx.add((double)j);
 } 
```

**//对numX和numY加值后声明arrayX和arrayY**

```
 double[] arrayX = new double[numsx.size()];     
 double[] arrayY = new double[numsy.size()];     
    //assigns array x and y the values in the list.
 for (int k1 = 0; k1 < numsy.size(); k1++) {
   double f = numsy.get(k1);
   arrayY[k1] = f;
   f = numsx.get(k1);
   arrayX[k1] = f;
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T03:18:57.117

为什么不尝试使用内置方法：
`double[] arrayX = numsx.toArray(new double[0]);`
`double[] arrayY = numsY.toArray(new double[0]);`

# php - 对齐动态生成的表单域

> ID：12966707
> 
> 赞同：2
> 
> 时间：2012-10-19T02:54:20.570
> 
> 标签：php, jquery, html, css

我有一个表单，其中包含一些字段，然后是 jquery 生成的更多字段。问题是新的与现有的不一致。我尝试摆弄 CSS，但没有奏效。这**正是**这家伙的问题，但他没有得到回应：

[https://stackoverflow.com/questions/9218225/dynamically-generated-jquery-table-row-not-aligning-correctly](https://stackoverflow.com/questions/9218225/dynamically-generated-jquery-table-row-not-aligning-correctly)

这是我的表格：

```
<form id="recipe" name="recipe" action="create.php" method="post">
    <h2>Ingredients</h2>
    <div id="labels">            
        <label class="label" for="quantity">Quantity:</label>
        <label class="label" for="unit">Unit:</label>
        <label class="label" for="ingredient">Ingredient:</label>
    </div>

    <div id="inputs">
        <div class="fields">
            <input class="quantity" name="quantity[]" type="text" />
            <input class="unit" name="unit[]" type="text" />
            <input class="ingredient" name="ingredient[]" type="text" />
        </div>
    </div>

    <div id="container">
      <a id="add" href="#"><span>» Add ingredient.</span></a>
   </div>              

   <div>
        <h2>Directions</h2>
        <textarea name="preparacion" rows="10" cols="51"></textarea>
    </div>

    <input type="submit" value="Guardar" />
    <input type="reset" value="Limpiar" />
</form> 
```

这是我用来生成附加字段的 JS：

```
 var count = 0;
        $(function(){
        $('a#add').click(function(){
                count += 1;
                $('#inputs').append('<div class="fields"><input class="quantity" name="quantity[]" type="text" /><input class="unit" name="unit[]" type="text" /><input class="ingredient" name="ingredient[]" type="text" /></div>');
});
}); 
```

但是，结果如下：

> ![在此处输入图像描述](../Images/e570959d3c2a45bb66a99c3e1533bd65.png)

（请删除空格，它不会让我发布图片）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:01:50.990

问题在于，在输入的原始行中，输入由换行符或空格字符分隔，当您添加新行时，您将所有代码附加在一起，并且它使一个输入更接近前一个输入。

简单的解决方法，在js代码中每次输入后加一个空格：

```
var count = 0;
    $(function(){
    $('a#add').click(function(){
            count += 1;
            $('#inputs').append('<div class="fields"><input class="quantity" name="quantity[]" type="text" /> <input class="unit" name="unit[]" type="text" /> <input class="ingredient" name="ingredient[]" type="text" /></div>');
});` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:02:01.100

在输入之间添加空格？

```
$('#inputs').append('<div class="fields"><input class="quantity" name="quantity[]" type="text" /> <input class="unit" name="unit[]" type="text" /> <input class="ingredient" name="ingredient[]" type="text" /></div>'); 
```

# android - 如何将 R.drawable 文件夹图像分配给 Bitmap 对象

> ID：12966710
> 
> 赞同：0
> 
> 时间：2012-10-19T02:55:02.473
> 
> 标签：android, casting, bitmap, assignment-operator

如何将android的R.drawable文件夹中的jpg或png类型的图像加载到Bitmap对象中？

```
Bitmap bmp = (Bitmap) putThisImageIntoBitmap(R.drawable.myimage); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:06:48.057

首先您必须使用 BitmapFactory 类，然后使用可绘制的 id 和上下文的资源作为参数来解码资源文件。

样本：

```
putThisImageIntoBitmap(BitmapFactory.decodeResource(context.getResources(),R.drawable.myimage)); 
```

*   如果你的类扩展了一个“Activity”类，你可以只使用“this”或“getApplicationContext()”方法。
*   第二个参数是你要获取的drawable的id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:02:47.480

```
InputStream is = null;
Bitmap bmp = null;

is = context.getResources().openRawResource(R.drawable.myimage);
bmp = BitmapFactory.decodeStream(is); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T09:34:13.460

这对我有用：

```
Bitmap icon = BitmapFactory.decodeResource(mContext.getResources(),
            R.drawable.ic_launcher); 
```

`mContext`当前活动上下文在哪里。

# maven - 通过 jetty-maven-plugin 为码头禁用别名检查

> ID：12966711
> 
> 赞同：0
> 
> 时间：2012-10-19T02:55:25.700
> 
> 标签：maven, jetty

我正在使用 org.mortbay.jetty:jetty-maven-plugin:8.1.5.v20120716 我似乎无法禁用别名检查，因此符号链接可以工作。我试过：

```
<configuration>
   <systemProperties>
       <systemProperty>
          <name>checkAliases</name>
          <value>false</value>
       </systemProperty>
   </systemProperties>
 .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T01:51:31.387

检查您的插件版本和配置。我正在使用：

```
 <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.11.v20130520</version>
            <configuration>
                <systemProperties>
                    <systemProperty>
                        <name>checkAliases</name>
                        <value>false</value>
                    </systemProperty>
                </systemProperties>
                <scanIntervalSeconds>10</scanIntervalSeconds>
                <webAppConfig>
                    <contextPath>/testamento</contextPath>
                </webAppConfig>

                <connectors>
                    <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                        <port>9000</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>

                <requestLog implementation="org.eclipse.jetty.server.NCSARequestLog">
                    <filename>target/yyyy_mm_dd.request.log</filename>
                    <retainDays>90</retainDays>
                    <append>true</append>
                    <extended>true</extended>
                    <logTimeZone>GMT</logTimeZone>
                </requestLog>
            </configuration>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T19:54:21.260

如果你像我一样希望使用 Jetty 作为快速运行 Web 项目的一种方式，但又想使用符号链接（也许你想从 node_modules 链接一些东西），你可以使用：

```
mvn jetty:run-exploded 
```

或 mvn jetty:run-war

但是，这不能立即重新加载，因为它可以正常工作，因为 war 插件会正确打包您链接到的所有内容。根据您想要如何配置您的战争，它也可能是不可取的......

Jetty Maven 插件实例化一个 JettyWebAppContext 并运行它：

[https://github.com/eclipse/jetty.project/blob/ac24196b0d341534793308d585161381d5bca4ac/jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyWebAppContext.java](https://github.com/eclipse/jetty.project/blob/ac24196b0d341534793308d585161381d5bca4ac/jetty-maven-plugin/src/main/java/org/eclipse/jetty/maven/plugin/JettyWebAppContext.java)

看

[http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html)

据我所知，没有可以传递的参数允许您调用启用符号链接（您不能像在 jetty-web.xml 中那样传递，因此别名检查将始终失败）。

如果有人找到了这个答案（例如 github 提交），请自由评论/改进这个答案。

似乎有一个 git 问题来跟踪这个： [https ://github.com/eclipse/jetty.project/issues/248](https://github.com/eclipse/jetty.project/issues/248)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-04T01:30:45.423

对于 maven jetty 9.x，解决方案是 [http://www.gresw.com/blog/dev/jetty-maven-follow-symbolic-links.jsp](http://www.gresw.com/blog/dev/jetty-maven-follow-symbolic-links.jsp)

# java - Linked In Api 以获取 Linked in Profiles

> ID：12966720
> 
> 赞同：-2
> 
> 时间：2012-10-19T02:56:22.597
> 
> 标签：java, php, javascript

我有一个名字、姓氏、电子邮件地址、城市、州和雇主的列表。我想收集所有这些人的Linkedin个人资料。请帮助，可以使用哪些API，是否有任何演示示例。

谢谢，夏尔马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:20:45.340

People Search API 看起来是您最好的选择：[https ://developer.linkedin.com/documents/people-search-api](https://developer.linkedin.com/documents/people-search-api)

你可以在这里找到一个不错的 PHP 演示：[https ://developer.linkedin.com/documents/sample-code-people-search](https://developer.linkedin.com/documents/sample-code-people-search)

# c# - 单击按钮时在 SqlDataSource 中运行存储过程

> ID：12966722
> 
> 赞同：1
> 
> 时间：2012-10-19T02:56:55.980
> 
> 标签：c#, asp.net, sql-server, stored-procedures, sqldatasource

我正在构建一个 C# ASP.NET 页面，我想在其中调用数据库中的存储过程。

我已经设置了一个`SqlDataSource`指向存储过程的。参数直接从Web的控件（TextBox）中获取

我有一个按钮，当用户单击它时，它应该运行存储过程，所以我要添加这样的代码：

```
mySqlDataSource.run() 
```

或者

```
mySqlDataSource.exec() 
```

或者

```
mySqlDataSource.storedProcedure() 
```

但当然这些方法都不存在。

如何初始化存储过程？以及如何获取存储过程返回的值？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T04:02:40.563

我认为您正在寻找的方法是`DataBind`. 调用它使用`mySqlDataSource.DataBind()`

```
<asp:SqlDataSource 
  ID="sds2" 
  runat="server" 
  ConnectionString="..."
  SelectCommand="spTest"      
  SelectCommandType="StoredProcedure"
  >
  <SelectParameters>
    <asp:ControlParameter ControlID="TextBox1" PropertyName="Text"
                              Name="ParamName" Type="Int32" DefaultValue="0" />
  </SelectParameters>
</asp:SqlDataSource>
<asp:GridView ID="gv" runat="server" DataSourceID="sds2"></asp:GridView> 
```

调用时会执行存储过程`DataBind`。如果 GridView 控件的 DataSourceID 属性引用了有效的数据源控件，则会自动调用 DataBind 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:12:15.963

```
//HTML:

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:testConnectionString %>" 
        onselecting="SqlDataSource1_Selecting" SelectCommand="testProc_sp" 
        SelectCommandType="StoredProcedure"></asp:SqlDataSource>
    <br />
    <asp:Button ID="Button3" runat="server" onclick="Button3_Click" Text="Button" />

//c#:

 protected void Button3_Click(object sender, EventArgs e)
    {
        SqlDataSource1.DataBind();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:02:31.730

从 sqldatasource 初始化 SP 很简单：

```
mySqlDataSource.UpdateCommandType = SqlDataSourceCommandType.StoredProcedure;
mySqlDataSource.UpdateCommand = "sp_name";
mySqlDataSource.Update(); 
```

要从您的 SP 获取返回值，我建议使用 SqlCommand：

[http://forums.asp.net/t/1177022.aspx](http://forums.asp.net/t/1177022.aspx)

确保您创建了一个参数，并将 ParameterDirection 设置为 ReturnValue 或 Output

# android - 将货币四舍五入到最接近的美元，你是怎么做到的？

> ID：12966725
> 
> 赞同：2
> 
> 时间：2012-10-19T02:57:04.423
> 
> 标签：android, exception, currency, rounding

以下代码适用于我的生产应用程序中的所有手机，运行 4.1.2 的 Galaxy Nexus 除外。Play商店给我发了错误，我先贴代码，再贴错误：

```
 // Roughly formats the currency by loping off the decimal places (amount
// comes already rounded)
public static String formatCurrencyRound(double amount) {
    String currency = formatCurrency(amount); // Returns "$8.00"

    return currency.substring(0, currency.indexOf("."));
} 
```

错误：

```
java.lang.RuntimeException: Unable to resume activity {com.ootpapps.saving.made.simple/com.ootpapps.saving.made.simple.SavingsPlanOverview}: java.lang.StringIndexOutOfBoundsException: length=9; regionStart=0; regionLength=-1
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2603)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2089)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.StringIndexOutOfBoundsException: length=9; regionStart=0; regionLength=-1
at java.lang.String.startEndAndLength(String.java:593)
at java.lang.String.substring(String.java:1474)
at com.ootpapps.saving.made.simple.App.formatCurrencyRound(App.java:68)
at com.ootpapps.saving.made.simple.SavingsPlanOverview.updateSavingsPlanWidgets(SavingsPlanOverview.java:224)
at com.ootpapps.saving.made.simple.SavingsPlanOverview.onResume(SavingsPlanOverview.java:156)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1184)
at android.app.Activity.performResume(Activity.java:5082)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
... 12 more 
```

如果有人可以提出一种更好的方法来四舍五入这个货币字符串，或者，一种更好的方法将原始数字四舍五入为没有小数的格式化字符串，我将不胜感激。同样，由于某种原因，这仅在运行 4.1.2 的 GNexus 上失败。

谢谢！

编辑添加格式货币代码：

```
public static String formatCurrency(double amount) {
    NumberFormat currency = NumberFormat.getCurrencyInstance();

    return currency.format(amount);
} 
```

编辑续 -**我使用的代码可以将货币四舍五入到整美元**：

```
public static String formatCurrencyWhole(double amount) {
    NumberFormat currency = NumberFormat.getCurrencyInstance();
    currency.setMaximumFractionDigits(0);
    currency.setMinimumFractionDigits(0);

    return currency.format(amount);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:10:50.503

首先，永远不*应该****使用***s 来处理`double`货币。你应该使用`BigDecimal`来保持精度。（有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)。）

除此之外，您可以使用`NumberFormat`来获取您的`String`代表：

```
NumberFormat format = NumberFormat.getCurrencyInstance(Locale.US);
String result = format.format(amount); 
```

[`.format()`](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html#format(double))拿双; 如果您最终使用`BigDecimal`，请使用`bigDecimal.doubleValue()`. [该答案](https://stackoverflow.com/a/1359905/1438733)提供了该领域的一些其他详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:24:46.560

我认为字符串的格式已经是 $8

如果小数不存在：

currency.substring(0, currency.indexOf("."));

将抛出 IndexOutOfBoundsException。

解决方案可能就像事先测试小数一样简单。

public static String formatCurrencyRound(double amount) { String currency = formatCurrency(amount); // 返回“$8.00”

```
if(currency.indexOf(".") != -1){
   return currency.substring(0, currency.indexOf("."));
}else{
   return currency;
} 
```

}

- - - - 编辑 - - - - -

正如 Ken（非常聪明的人）在评论中指出的那样，堆栈跟踪中的关键行是：

java.lang.StringIndexOutOfBoundsException：长度=9；区域开始=0；regionLength=-1 在 java.lang.String.startEndAndLength(String.java:593)

此错误显示 regionLength = -1，这意味着 indexOf(".") 的结果为 -1。（（“。”）不存在）

它还显示字符串长度为 9，这让我认为不同的分隔符问题（Ken 也指出）可能是真正的问题。除非美元金额在 $10000000 范围内。

这就是为什么我想查看 formatCurrency(Double); 的代码的原因。

- - -编辑 - - -

怀疑您使用的是默认语言环境：

NumberFormat 货币 = NumberFormat.getCurrencyInstance();

文档对此有这样的说法：

[http://developer.android.com/reference/java/util/Locale.html](http://developer.android.com/reference/java/util/Locale.html)

> “默认语言环境不适合机器可读的输出。最好的选择通常是 Locale.US - 这个语言环境保证在所有设备上都可用，而且它没有令人惊讶的特殊情况并且经常使用（尤其是对于计算机-计算机通信）意味着它也往往是最有效的选择。
> 
> 一个常见的错误是在生成机器可读的输出时隐式使用默认语言环境。这往往适用于开发人员的测试设备（特别是因为很多开发人员使用 en_US），但在用户处于更复杂区域设置的设备上运行时会失败。”

除非您的应用需要外币，否则请使用：

NumberFormat 货币 = NumberFormat.getCurrencyInstance(Locale.US);

# knockout.js - 淘汰赛，如何订阅子viewModel

> ID：12966727
> 
> 赞同：2
> 
> 时间：2012-10-19T02:57:09.720
> 
> 标签：knockout.js, knockout-2.0, knockout-validation

我是新来的淘汰赛。我有 2 个 ViewModel

第一个有 2 个地址，家庭和邮寄地址。

```
var EntityViewModel = function (clientId, taxYear) {
    var self = this;
    self.id = ko.observable(null);

    self.name = ko.observable('').extend({
        required: { message: ' Name is required' },
        validation: { validator: maxLength, message: ' Name must be less than 65 characters', params: 65 }
    });
    self.homeAddress = new AddressViewModel();
    self.mailingAddress = new AddressViewModel();
}; 
```

第二个是地址视图模型。我尝试做的是如果 state 为 -1，则启用 country dropdownlist，如果 state 为 > 0，则禁用 country dropdownList，并将 countryId 设置为 1，即美国。但问题是每次我更改状态时，都会启用或禁用本国和邮寄国家。我如何解决它？

```
var AddressViewModel = function () {
    var self = this;

    self.address1 = ko.observable('');
    self.address2 = ko.observable('');
    self.city = ko.observable('');
    self.zipCode = ko.observable('');

    self.stateId = ko.observable(null);
    self.countryId = ko.observable(null);

    self.enableState = ko.observable(false);
    self.enableCountry = ko.observable(false);

    self.stateId.subscribe(function (newValue) {
        if (newValue <= 0) {
            self.enableState(true);
            self.countryId(null);

        } else {
            self.enableCountry(false);
            self.countryId(1);
        }
    });
}; 
```

顺便说一句，我还有一个不同的邮寄地址复选框，如果未选中此复选框，则整个邮寄地址都被禁用。如果复选框被选中，那么您可以编辑。

我在 jsFiddler 上上传了我的代码，请帮我修复它。

[http://jsfiddle.net/lm2000/2ZEka/22/](http://jsfiddle.net/lm2000/2ZEka/22/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:48:24.960

这个可以吗 ？ [http://jsfiddle.net/zUYGF/1/](http://jsfiddle.net/zUYGF/1/)

基本上我只是修复了你的订阅功能，如果我理解正确的话：

```
self.stateId = ko.observable(null);
self.countryId = ko.observable(null);
self.enableCountry = ko.observable(true);

self.stateId.subscribe(function (newValue) {
    if (newValue <= 0) {
        self.countryId(null);
        self.enableCountry(true);
    } else {
        self.countryId(1);
        self.enableCountry(false);
    }
}); 
```

我只为第一个地址这样做。对于第二个，您应该使用命名模板而不是重复代码，我认为（您的 AddressViewModel 可能具有全局“启用”属性）。

# php - 在 PHP 中重新提交表单后保留复选框状态

> ID：12966729
> 
> 赞同：0
> 
> 时间：2012-10-19T02:57:30.863
> 
> 标签：php, forms, checkbox

代码：

```
<input type="checkbox" name="discountedItem" <?php if (isset($_POST['discountedItem'])) echo "checked" . " " . "value='y'"; ?> /> 
```

如何将其转换为 if 语句，以便如果*未*检查其值为`n`？

我试过：

```
<input type="checkbox" name="discountedItem" <?php if (isset($_POST['discountedItem'])) { echo "checked" . " " . "value='y'"; } else { echo "value='n'"; } ?> /> 
```

没用。该值只是NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:07:41.923

如果未设置复选框，`value=`则永远不会提交。

你不能让你`n`的复选框。考虑一个单选按钮。或者只是调整您的处理逻辑（`if`您提到的）不寻找字符串，而是寻找*任何*现值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:53:44.460

如果您检查该值，它将被发送到 POST。如果取消选中它就不会。

解决此问题的一种方法是包含一个与复选框同名的隐藏元素，该元素具有占位符值（类似于 -10），并且您的处理脚本（接收 POST 的脚本）可以检查该值并执行必要的行动

```
<input type='hidden' name='discountedItem' value='-10' />
<input type='checkbox' name='discountedItem' ....> 
```

然而，这种方法可能存在一些浏览器不兼容。我过去曾看到 IE 会在 POST 中发布这两个值，并且其中一个不会覆盖另一个（这正是我们真正想要的）。

解决方案是仅使用一段 javascript 并将其附加到复选框的 onclick 事件中。如果未选中该复选框，则会将具有相同名称和占位符值的新隐藏元素添加到 DOM，如果选中该复选框，则删除隐藏元素。

所以你的逻辑会变成：

```
<input type="checkbox" name="discountedItem" <?php if (isset($_POST['discountedItem']) && $_POST['discountedItem'] == '-10') { echo "checked='checked'" . " " . "value='y'"; } ?> /> 
```

高温高压

# c++ - 如何编写一个可控的随机数发生器？

> ID：12966731
> 
> 赞同：2
> 
> 时间：2012-10-19T02:57:35.107
> 
> 标签：c++, boost, random

我希望随机数的生成可以通过变量来控制。例如，如果我说 100，则应以最大随机性生成数字，如果我说 50，则数字不应“随机”。如果我说“0”，那么随机数可能根本不应该是随机的——也许生成的所有数字都是相同的。

知道我可以用什么来生成像这样的受控随机数吗？知道是否有一些 C++ 内置库或 Boost 库会这样做吗？

有一种方法来重新生成相同的随机数序列会很好，所以一种为生成器播种的方法也很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T03:16:26.647

您描述您的要求的方式似乎表明使用*正态分布*（又名高斯分布）可能是要走的路。它有两个参数：均值和标准差。如果您将标准偏差设置得非常低，您会得到*可能非常接近*平均值的随机值。如果将其设置为较大的值，则它们会分布得更广泛。

在 C++11 中，标准库中提供了正态分布。如果 C++11 不适合您，那么 Boost 库也有。

这是一些示例代码：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <map>
#include <random>
#include <cmath>
#include <iomanip>

int main()
{
  std::random_device rd;
  std::mt19937 gen(rd());

  std::cout << std::fixed << std::setprecision(3);

  /* Mean 5, standard deviation very low (0.002): */
  std::normal_distribution<> d1(5,0.002);
  for (int i = 0 ; i < 20 ; ++i)
    std::cout << std::setw(7) << d1(gen) << "  ";
  std::cout << std::endl;

  /* Mean 5, standard deviation relatively high (2.0): */
  std::normal_distribution<> d2(5,2);
  for (int i = 0 ; i < 20 ; ++i)
    std::cout << std::setw(7) << d2(gen) << "  ";
  std::cout << std::endl;

  return 0;
} 
```

这是输出：

```
4.998    5.003    5.001    5.002    5.001    5.001    4.998    5.000    4.999    5.001    5.000    5.003    4.999    5.000    5.001    4.998    5.000    4.999    4.996    5.001  
2.781    3.795    5.669   -0.109    7.831    3.302    3.823    4.439    4.672    4.461    6.626    5.139    6.882    5.406    6.526    5.831    6.759    2.627    3.918    4.617 
```

如您所见，第一行中的所有数字都非常接近 5（即，使用您的措辞，“随机性”很低），而第二行中的数字分布得更广泛。

（编辑：当然，这些数字的*随机性*并没有真正受到影响。只是标准偏差参数使这些值更有可能出现在更小（stddev 低）或更宽（stddev 高）的数字范围内。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:02:17.523

Boost[有一个库](http://www.boost.org/doc/libs/1_51_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist.html)可以完全满足您的需求。按照[这个链接](http://www.boost.org/doc/libs/1_51_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/stat_tut.html)到 boost 教程页面，教你如何进行数字分布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:26:54.190

这个[XKCD](http://xkcd.com/221/)是有道理的；你可能想沉思一会儿。真的没有“随机数”这样的东西，就像没有[“无趣的数”](http://www.mathrecreation.com/2009/11/interesting-and-uninteresting-numbers.html)这样的东西。

您可以要求的是满足某些测试的一系列数字；例如，在任何子序列中，每个值的频率将大致相同，或者序列中的数字与其后继数字之间没有相关性。这些测试并不能证明序列是“随机的”；只是它可能代表其他此类序列；也许是现实世界中出现的序列，除非受到[非自然力、次自然力或超自然力的](http://www.youtube.com/watch?v=NbInZ5oJ0bc)限制。

在 Rosencrantz 和 Guildenstern 简单的掷硬币序列中，很容易看出有偏见的分布会引起怀疑，甚至是存在主义的怀疑。但是假设硬币翻转完全平衡：正面，反面，正面，反面，正面，反面，正面，反面，如此穿过喀尔巴阡山峰。这或多或少是随机的？正如 R（或 G）所说，“讨论”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T03:48:35.323

首先生成一个随机的位序列。

当旋钮位于 100 时，不要理会序列。

当旋钮为 50 时，强制每隔一位为 1。

当旋钮为 0 时，强制每一位为 1。

[更新，详细]

这个建议并不像听起来那么随意。

真正随机的数据源每比特数据有一个熵。如果你想要一半的熵——即每两位数据有一位熵——你可以将每隔一位设置为 1。如果你想要 1/3 的速率——即每两位数据一位熵三位数据——您可以将三位中的每 2 位设置为 1。依此类推。

“每比特数据的熵比特”是一个数字序列随机性的完全合理的定义......并且当三分之二是随机的而其他比特是固定的时，将序列称为“66％随机”是一个很自然的定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T03:05:54.893

可能最简单的解决方案是在 C++ 中使用 srand 和 rand，两者都使用伪随机性，srand 中的种子值越大，模式在 rand 生成的随机数中出现的时间就越长。

编辑：

[http://www.cplusplus.com/reference/clibrary/cstdlib/srand/](http://www.cplusplus.com/reference/clibrary/cstdlib/srand/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T02:44:13.943

```
r1 = Mathf.PingPong(Mathf.PerlinNoise(map,23)*5+map*.01, 1); 
```

map 是随机种子，一个整数，ping-pong 会反弹 0 到 1 之间的所有值，Perlin 噪声会产生某种噪声，通过向其添加多个 map 来平衡 0 到 1 之间的噪声。

# javascript - 测试 jQuery event.classList 是否为空

> ID：12966733
> 
> 赞同：0
> 
> 时间：2012-10-19T02:57:54.663
> 
> 标签：javascript, jquery, syntax, operators, conditional

我正在尝试在 jQuery 上测试空`e.classList`（如果您为其传递参数，则讨论 jQuery 传递给事件的 DOM 映射值）。

所以，我正在做一个荒谬的 JS 检查是否为空，因为我想在`e.classList.length`小于 integer的情况下退出函数`1`。

奇怪的是我已经试过了

`if ( ( typeof newTargetClasses !== "undefined" && newTargetClasses !== null ) && newTargetClasses.length > 0 ) {`

但`true`即使没有项目，它也会返回`e.classList`：/

```
$( window ).on( 'mouseenter', '.my-class', function( e ) {

    var newTargetClasses = e.toElement.classList;

    if ( ! isNaN( newTargetClasses.length ) && newTargetClasses.length > 0 ) {
        $.each( newTargetClasses, function() {
            if ( ! thePopover.has( '.' + this ).length > 0 ) {
                el.my_jquery_func('hide');
                return false;
            }
        })
    }
} 
```

这些布尔值我错过了什么？ `newTargetClasses.length`在我试图检查的情况下返回一个 val of`0`和 type of`number`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:03:29.640

classList 不是 jQuery 的东西，它是 DOM API 的东西。这也不能完全跨浏览器工作，因为根据 MDN，IE9 不支持它。

[MDN 类列表](https://developer.mozilla.org/en-US/docs/DOM/element.classList)

至于您的代码，您应该能够将 if 条件简化为

```
// classList will always be falsy in IE9 so this will never run
if (e.toElement.classList && e.toElement.classList.length ) {}. 
```

如果您希望它是跨浏览器，那么您可以尝试类似

```
if ( $.trim(e.toElement.className) ) { ... } 
```

# c# - 如何使用 Win32 API 在 WinForm 前面显示 System.Diagnostics

> ID：12966734
> 
> 赞同：0
> 
> 时间：2012-10-19T02:58:01.923
> 
> 标签：c#, winforms, process, win32gui

在我的主窗体上，我有一个 ListView，其中包含属于我们软件套件的进程的 LargeIcon 视图列表。每个 LV (ListView) 项目都包含文本和图像，该图像与我们的软件产品的图标相同，用于相应的应用程序（即 MarinaOffice、LaunchOffice、PureRental 等）。有一个计时器根据是否在 Process.GetProcesses() 方法调用中找到进程来更新列表。当用户单击正在运行的进程的 ListView 项时，它应该最大化并在当前进程前面显示该进程（即 WinForms 应用程序）的窗口。下面的代码几乎可以完成我想要完成的工作，但是，如果我想要显示的应用程序已经最大化，但是在我在监视器上的 windows 应用程序后面，它没有将我展示的过程放在我的应用程序前面。换句话说，只要我使用下面的 WIN32 方法显示的应用程序被最小化，它就可以工作。但是，它已经最大化，它没有。

```
// Used to Show Other Process Windows
private const int SW_SHOWMAXIMIZED = 3;
[DllImport("user32.dll")]
static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);    

// Method that checks for running apps in our suite every 3000ms
private void timerRunningApps_Tick(object sender, EventArgs e)
{
    CheckRunningapps();
}

// Stripped down version of method that looks for running process in our suite and 
// adds the process name and icon to a ListView on our main form
private void CheckRunningapps()
{
    List<Process> AllProcesses = System.Diagnostics.Process.GetProcesses().ToList();

    listViewRunningApps.BeginUpdate();
    listViewRunningApps.Items.Clear();

    foreach (Process process in AllProcesses)
    {
        ListViewItem lvi = new ListViewItem();
        if (process.ProcessName.ToLower().Contains("marinaoffice"))
        {
            lvi = new ListViewItem("MarinaOffice");
            lvi.SubItems.Add("MarinaOffice");
            lvi.ImageIndex = 1;
            lvi.Tag = process;
            listViewRunningApps.Items.Add(lvi);
        }
    }

    listViewRunningApps.EndUpdate();
}

// Method that actually shows the process.  This works as long as process is minimized
// However, if the process is maximized but, merely behind the current window it does
// not bring it in front.  I have noticed that there is a ShowWindowAsync method.
// Should I use that instead?
private void listViewRunningApps_MouseDoubleClick(object sender, MouseEventArgs e)
{
    ListViewItem lvi = listViewRunningApps.GetItemAt(e.X, e.Y);
    if (lvi != null)
    {
        Process process = (Process)lvi.Tag;
        ShowWindow(process.MainWindowHandle, SW_SHOWMAXIMIZED);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:32:29.150

尝试这样的事情，我认为发生的事情是，如果窗口已经最大化，则您不会使用 ShowWindow Call 更改窗口状态，在这种情况下，您还需要使用[BringWindowToTop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632673%28v=vs.85%29.aspx)将其带到 Z-Order 的前面方法。

```
Process process = (Process)lvi.Tag; 
ShowWindow(process.MainWindowHandle, SW_SHOWMAXIMIZED);
BringWindowToTop(process.MainWindowHandle); 
```

# ios - 是否可以从 HTML5/Flash/iOS 播放器的视频流中抓取图像？

> ID：12966739
> 
> 赞同：0
> 
> 时间：2012-10-19T02:58:50.050
> 
> 标签：ios, html, flash, video-streaming

好的，这里的上下文是我有一个带有 Flash 播放器、HTML5 播放器或带有本机播放器的本机 iOS 应用程序的网页。

在播放视频时，是否可以从视频中抓取一帧并将其发送回服务器？

## 例如：

# 闪光

因此，在播放器中，有一个 RTMP 或 HDS 流进入。使用 ActionScript 甚至可以从播放器正在播放的流中抓取帧吗？

# HTML5

我想答案是否定的，因为我只有 javascript 和 DOM，但是视频标签的任何实现都允许这种类型的交互吗？如果有，有哪些？我真的只对 iOS Safari 和 Android 3+ 感兴趣，因为流是 HLS。

# 原生 iOS

与 Flash 解决方案类似，Apple 是否在 iOS 中提供允许我在应用程序中从 HLS 流中捕获帧的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-19T13:06:27.253

您可以使用此代码将视频作为数据 URI

```
var canvas = document.createElement('canvas');
var context = canvas.getContext('2d');
var width = $('#video').outerWidth();
var height = $('#video').outerHeight();
canvas.width = width;  canvas.height = height;
var videoElem = document.getElementById('video');
context.drawImage(videoElem, 0, 0, width, height);
var dataURL = canvas.toDataURL();
console.log(dataURL); 
```

# javascript - Javascript 新手。有人可以帮我调试我的程序吗？

> ID：12966740
> 
> 赞同：1
> 
> 时间：2012-10-19T02:59:16.990
> 
> 标签：javascript, debugging

我正在尝试在 javascript 中实现二进制搜索，而我对 JS 完全陌生。我主要习惯于 C++ 语法，所以要打破我的任何习惯对我来说有点困难。

当我将此脚本包含在 html 文档中时，如果数组大小小于 1，它将无法退出脚本，并且如果我输入无序数组，则不会触发数组顺序警报。另外，程序似乎永远不会完成while循环，所以不知道是否还有其他问题。

任何帮助，将不胜感激！

```
var size = parseInt(prompt("Enter the size of the array:"));

if(size < 1) {
    alert("ERROR: you entered an incorrect value for the array size!");
    return;
}

var arr = [size];
var input = parseInt(prompt("Enter the numbers in the array in increasing order,"
        + " separated by a space, and press enter:"));

arr = input.split(" ");

var checkOrder = function(array) {
    for(var i = 0; i < size-1; i++) {
        if(array[i] > array[i+1]) {
            return false;
        }
    }
    return true;
}

if(!checkOrder(arr)) {
    alert("The values entered for the array are not in increasing order!");
}

var search = parseInt(prompt("Enter a number to search for in the array: "));

var lp = 0; //left endpoint
var rp = size; //right endpoint
var mid = 0;
var counter = 0;
var found = false;

while(lp <= rp) {
    mid = Math.floor((lp + rp)/2);
    if(arr[mid] == search) {
        alert("Found value " + search + " at index " + mid);
        counter++;
        found = true;
        break;
    } else if(arr[mid] > search) {
        rp = mid + 1;
        counter++;
    } else {
        lp = mid;
        counter++;
    }
}

if(!found) {
    alert("The value " + search + "was not found in the array");
    alert("I wasted " + counter + " checks looking for a value that's not in the array!");
    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:02:52.970

```
var arr = [size]; 
```

上面的代码可能没有做你想做的事。这将创建一个包含*一个*元素的数组，其值为 的值`size`。您可以通过执行以下操作创建具有特定初始大小的数组：

```
var arr = new Array(size); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:24:35.263

你的输入法不对。
把数组初始化问题放在一边，这条线

```
var input = parseInt(prompt("..")) 
```

会给你一个号码。

您实际上可以跳过提示数组大小

```
var input = prompt('Space separated numbers:')
var array = input.split(' ')
if (array.length == 0) {
    alert('._.'); return
}
for (var i = 0; i < array.length; i++)
    array[i] = parseInt(array[i]) 
```

# intellij-idea - IDEA，如何设置远程调试？

> ID：12966741
> 
> 赞同：0
> 
> 时间：2012-10-19T02:59:21.350
> 
> 标签：intellij-idea, remote-debugging

Eclipse 允许通过 TCP 端口连接到远程进程以进行远程调试。

![在此处输入图像描述](../Images/524552b0924d5574646ec8d8d4ec3cde.png)

IDEA 允许吗？如何配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:11:42.653

IDEA可以做到这一点！您可以按照以下步骤操作： 1\. 进入步骤 --> 编辑配置 2\. 单击添加（左上角的加号） --> 选择远程 3\. 此屏幕将显示给您： ![在此处输入图像描述](../Images/98d2ed3107b6d9b1886ccb5312913aa5.png)

您可以更改主机、端口（程序所在的位置），并使用参数运行 java，

4.  使用此配置开始调试 :D :D

# php - 显示正确的纵横比

> ID：12966749
> 
> 赞同：-1
> 
> 时间：2012-10-19T03:00:15.810
> 
> 标签：php, aspect-ratio

我正在尝试获取照片的纵横比，但以下代码在宽度为 3776、高度为 2520（472:315）的照片上显示错误的纵横比，但在宽度为 3968 和 2232 的照片上显示正确的纵横比虽然高度（16:9）。

```
function gcd($a, $b) {
    if($a == 0 || $b == 0) {
        return abs(max(abs($a), abs($b)));
    }

    $r = $a % $b;
    return ($r != 0) ? gcd($b, $r) : abs($b);
}

$gcd = gcd($widtho, $heighto);
echo ($widtho / $gcd).':'.($heighto / $gcd); 
```

我该如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:49:24.513

实际上，3780x2520 是 3:2 的纵横比；因为您使用 3776 作为宽度，所以 472:315 是正确的比例。如果您进行除法，则结果为 1.498，非常接近 1.5，可以考虑四舍五入为 3:2。

如果您只想要“标准”比率（如“3:2”或“16:9”），则可以将检测到的比率传递给另一个函数，将它们四舍五入以找到最接近/最佳匹配。

这是一个可以为您进行四舍五入的综合函数（仅针对您示例中的尺寸进行了测试，因此我不能保证 100% 成功）：

```
function findBestMatch($ratio) {
    $commonRatios = array(
        array(1, '1:1'), array((4 / 3), '4:3'), array((3 / 2), '3:2'),
        array((5 / 3), '5:3'), array((16 / 9), '16:9'), array(3, '3')
    );

    list($numerator, $denominator) = explode(':', $ratio);
    $value = $numerator / $denominator;

    $end = (count($commonRatios) - 1);
    for ($i = 0; $i < $end; $i++) {
        if ($value == $commonRatios[$i][0]) {
            // we have an equal-ratio; no need to check anything else!
            return $commonRatios[$i][1];
        } else if ($value < $commonRatios[$i][0]) {
            // this can only happen if the ratio is `< 1`
            return $commonRatios[$i][1];
        } else if (($value > $commonRatios[$i][0]) && ($value < $commonRatios[$i + 1][0])) {
            // the ratio is in-between the current common-ratio and the next in the list
            // find whichever one it's closer-to and return that one.
            return (($value - $commonRatios[$i][0]) < ($commonRatios[$i + 1][0] - $value)) ? $commonRatios[$i][1] : $commonRatios[$i + 1][1];
        }
    }

    // we didn't find a match; that means we have a ratio higher than our biggest common one
    // return the original value
    return $ratio;
} 
```

要使用此函数，您将比率字符串（不是数值）传递给它，它会尝试在常用比率列表中“找到最佳匹配”。

示例用法：

```
$widtho = 3968;
$heighto = 2232;
$gcd = gcd($widtho, $heighto);
$ratio = ($widtho / $gcd).':'.($heighto / $gcd);
echo 'found: ' . $ratio . "\n";
echo 'match: ' . findBestMatch($ratio) . "\n";

$widtho = 3776;
$heighto = 2520;
$gcd = gcd($widtho, $heighto);
$ratio = ($widtho / $gcd).':'.($heighto / $gcd);
echo 'found: ' . $ratio . "\n";
echo 'match: ' . findBestMatch($ratio) . "\n";

$widtho = 3780;
$heighto = 2520;
$gcd = gcd($widtho, $heighto);
$ratio = ($widtho / $gcd).':'.($heighto / $gcd);
echo 'found: ' . $ratio . "\n";
echo 'match: ' . findBestMatch($ratio) . "\n"; 
```

上述测试将输出以下内容：

```
found: 16:9
match: 16:9

found: 472:315
match: 3:2

found: 3:2
match: 3:2 
```

*如果您需要参考，我从[wikipedia中获取了“标准”纵横比列表。](http://en.wikipedia.org/wiki/Aspect_ratio_%28image%29#Still_photography)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-16T17:19:39.460

我发现[这个要点](https://gist.github.com/jonathantneal/d3a259ebeb46de7ab0de)在 Javascript 中运行良好。所以我将它移植到PHP。

```
 /**
   * Returns the nearest aspect ratio of a width and height within a limited range of possible aspect ratios.
   * In other words, while 649x360 technically has an aspect ratio of 649:360,
   * it’s often useful to know that the nearest normal aspect ratio is actually 9:5 (648x360).
   * @param $width
   * @param $height
   * @param int $side The nearest ratio to side with. A number higher than zero
   * tells the function to always return the nearest ratio that is equal or higher
   * than the actual ratio, whereas a smaller number returns the nearest ratio higher
   * that is equal or smaller than the actual ratio. Defaults to 0.
   * @param int $maxW The maximum width in the nearest normal aspect ratio. Defaults to 16.
   * @param int $maxH The maximum height in the nearest normal aspect ratio. Defaults to 16.
   * @return string|null
   */

   function closestAspectRatio($width, $height, $side = 0, $maxW = 16, $maxH = 16) {

    $ratiosT = [];
    $ratios = [];
    $ratio = ($width * 100) / ($height * 100);
    $maxW++;
    $maxH++;

    for ($w = 1; $w < $maxW; $w++) {
      for ($h = 1; $h < $maxH; $h++) {
        $ratioX = strval(($w * 100) / ($h * 100));
        if (!array_key_exists($ratioX, $ratiosT)) {
          $ratiosT[$ratioX] = TRUE;
          $ratios[$w . ':' . $h] = $ratioX;
        }
      }
    }

    $match = NULL;

    foreach ($ratios as $key => $value) {

      if (!$match || (!$side && abs($ratio - $value) < abs($ratio - $ratios[$match])
        ) || (
          $side < 0 && $value <= $ratio && abs($ratio - $value) < abs($ratio - $ratios[$match])
        ) || (
          $side > 0 && $value >= $ratio && abs($ratio - $value) < abs($ratio - $ratios[$match])
        )) {
        $match = $key;
      }
    }

    return $match;
  } 
```

以这种方式使用它（使用所有参数）：

```
print closestAspectRatio(3776, 2520, 0, 16, 16); // prints 3:2
print closestAspectRatio(2520, 3776, 0, 16, 16); // prints 2:3 
```

这是供参考的JS演示：

```
console.log('3776 x 2520 = ' + nearestNormalAspectRatio(3776, 2520, 0));
console.log('2520 x 3776 = ' + nearestNormalAspectRatio(2520, 3776, 0));

function nearestNormalAspectRatio(width, height, side) {
  var
    ratio = (width * 100) / (height * 100),
    maxW = 3 in arguments ? arguments[2] : 16,
    maxH = 4 in arguments ? arguments[3] : 16,
    ratiosW = new Array(maxW).join(',').split(','),
    ratiosH = new Array(maxH).join(',').split(','),
    ratiosT = {},
    ratios = {},
    match,
    key;

  ratiosW.forEach(function(empty, ratioW) {
    ++ratioW;

    ratiosH.forEach(function(empty, ratioH) {
      ++ratioH;

      ratioX = (ratioW * 100) / (ratioH * 100);

      if (!ratiosT[ratioX]) {
        ratiosT[ratioX] = true;

        ratios[ratioW + ':' + ratioH] = ratioX;
      }
    });
  });

  for (key in ratios) {
    if (!match || (!side && Math.abs(ratio - ratios[key]) < Math.abs(ratio - ratios[match])) || (
        side < 0 && ratios[key] <= ratio && Math.abs(ratio - ratios[key]) < Math.abs(ratio - ratios[match])
      ) || (
        side > 0 && ratios[key] >= ratio && Math.abs(ratio - ratios[key]) < Math.abs(ratio - ratios[match])
      )) {
      match = key;
    }
  }

  return match;
}
```

# regex - 正则表达式 Readline 计数标签

> ID：12966756
> 
> 赞同：1
> 
> 时间：2012-10-19T03:00:59.130
> 
> 标签：regex, vb.net

我在阅读每一行以计算正则`<a href=` 表达式匹配时的正则表达式时遇到问题，它将跳过该行并且直到最后才完成。例如，这里我有两个`<a href`标签，但是在阅读第一个标签后它会跳转到下一行：

`"<p class="txt">Everyone seemed cool with that, including Coach A, so we went to work putting it all together. The end result had us starting off standing in a <strong>V formation</strong><a href="../Text/chap5.html#b1" id="f1">*</a>, and then the girls in back would tumble forward so that we were all in a straight line for the cheer. It was a really cool idea! To finish things off, we’d transition into two stunt groups that would do side-by-side <strong>elevators</strong><a href="../Text/chap5.html#b2" id="f2"></a>.</p>"`

这是我的代码：

```
 Dim count1 As Integer = 0
        For p As Integer = 0 To lvw.Items.Count - 1
        Dim r As StreamReader = New StreamReader(New FileStream(Path.Combine(lvw.Items(p).Tag, lvw.Items(p).Text), FileMode.Open, FileAccess.Read, FileShare.Read))

        Do While Not r.EndOfStream
            Dim strr1 As String = r.ReadLine.Trim
            Try
                Dim regex As Regex = New Regex("<a\s+[^>]*(href\s*=\s*(['""]).*?\2)")
                Dim m As Match = regex.Match(strr1)

                If m.Success Then
                    count1 += 1

                End If
                Label2.Text = (count1.ToString)
            Catch ex As Exception
            End Try
        Loop

    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:52:14.423

你需要使用`ReadLine`吗？您可以使用[`ReadToEnd`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx#Y0)一次获取整个文本，然后使用

```
regex.Matches(strr1).Count 
```

获取匹配数。

# c# - WPF 分组标头模板

> ID：12966758
> 
> 赞同：0
> 
> 时间：2012-10-19T03:01:09.203
> 
> 标签：c#, wpf, datatemplate

假设我在 WPF 的列表框中进行了一些分组

```
<ListBox Name="bob" xmlns:swd="clr-namespace:System.Windows.Data;assembly=PresentationFramework">
    <ListBox.Resources>
        <CollectionViewSource x:Key="view">
            <CollectionViewSource.GroupDescriptions>
                <swd:PropertyGroupDescription PropertyName="Group"></swd:PropertyGroupDescription>
            </CollectionViewSource.GroupDescriptions>
        </CollectionViewSource>
    </ListBox.Resources>

    <ListBox.ItemsSource>
        <Binding Source="{StaticResource view}"></Binding>
    </ListBox.ItemsSource>

    <ListBox.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <Border Background="Red" TextElement.Foreground="White">
                        <ContentPresenter Content="{Binding Path=Name}">
                            <ContentPresenter.ContentTemplate>
                                <DataTemplate>
                                    <TextBlock><Run Text="("></Run><Run Text="{Binding Mode=OneWay}"></Run><Run Text=")"></Run></TextBlock>
                                </DataTemplate>
                            </ContentPresenter.ContentTemplate>
                        </ContentPresenter>
                    </Border>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
        </GroupStyle>
    </ListBox.GroupStyle>

    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=Item}"></TextBlock>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

并在代码中填充了视图，如下所示：

```
var view = bob.FindResource("view") as CollectionViewSource;
view.Source = "Mary,Mark,Jane,Joey,Justin"
    .Split(',')
    .GroupBy(i => i[0])
    .SelectMany(g => g.Select(i => new { Group = g.Key, Item = i }))
    .ToArray(); 
```

这一切都很好，除了组标题的外观，红色背景的边框，需要为我进行分组的每个列表框定义。如果我想要绿色，我需要在任何地方进行更改。我可以取出颜色并将其作为资源或将其放入样式中，但是如果我想添加图标或其他项目怎么办。

我真正想做的是取出 HeaderTemplate 并在某个地方定义一次。但是里面的 ContentPresenter.ContentTemplate 可以为每个列表指定一个不同的。说得通？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:56:19.327

我不是 100% 确定您想要实现什么，但听起来您正在寻找的是 DataTemplateSelector？

[http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

# java - 如何将最近弹出的元素从一个堆栈推送到另一个堆栈？

> ID：12966760
> 
> 赞同：0
> 
> 时间：2012-10-19T03:01:10.967
> 
> 标签：java, stack

假设我有以下代码：

```
public Stack s1;
public Stack s2;

//I want to take the top element from s1 and push it onto s2

s1.pop();

//Gather recently popped element and assign it a name.

s2.push(recentlyPopped); 
```

关于我将如何做到这一点的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:01:45.907

基本形式是

```
s2.push(s1.pop()); 
```

如果您需要在将数据推入第二个堆栈之前/之后处理来自第一个堆栈的数据，您可以使用

```
YourClass yourClass = s1.pop();
//process yourClass variable...
s2.push(yourClass);
//more process to yourClass variable... 
```

请记住在使用该方法之前检查 s1 是否为空，`pop`否则您可能会收到 EmptyStackException。

```
if (!s1.isEmpty()) {
    s2.push(s1.pop());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:15:03.513

尝试

```
String[] inputs = { "A", "B", "C", "D", "E" };
Stack<String> stack1 = new Stack<String>();
Stack<String> stack2 = new Stack<String>();
for (String input : inputs) {
  stack1.push(input);
}
System.out.println("stack1: " + stack1);
System.out.println("stack2: " + stack2);
stack2.push(stack1.pop());
System.out.println("stack1: " + stack1);
System.out.println("stack2: " + stack2); 
```

输出将是：

```
stack1: [A, B, C, D, E]
stack2: []
stack1: [A, B, C, D]
stack2: [E] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T03:02:33.750

除非您有其他未在问题中指定的约束。一种方法是：

```
YourElementType elem = s1.pop();

s2.push(elem); 
```

# javascript - 如何通过javascript获取输入类值

> ID：12966761
> 
> 赞同：1
> 
> 时间：2012-10-19T03:01:11.567
> 
> 标签：javascript

我知道 jQuery 很容易获得价值，但我怎样才能**只使用 Javascript**来获得价值？

[这就是我所做的](http://jsfiddle.net/2vRCU/)

```
<input type="text" class="num" /> <a href="#" onclick="alert(document.getElementsByClassName('num').value);"> click </a> 
```

​</p>

感谢帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T03:04:05.047

`document.getElement**s**ByClassName`返回一个元素数组。您正在寻找该数组中的第一个元素：

```
document.getElementsByClassName('num')[0].value; 
```

**演示：http: [//jsfiddle.net/2vRCU/1/](http://jsfiddle.net/2vRCU/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:14:30.737

我认为最常见的方法是给元素一个“id”....至少这是我在过去 jQuery 和所有其他 JS 框架之前使用 javascript 时所做的。

```
<input id='mytext' type="text" class="num" /> 
```

并使用它来捕获：

```
document.getElementById('mytext'); 
```

所以它将是：

```
<a href="#" onclick="alert(document.getElementById('mytext').value);"> click </a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T03:40:39.397

```
document.getElementById('mytext').className; 
```

# javascript - 示例 jquery 获取兄弟的索引/位置

> ID：12966762
> 
> 赞同：10
> 
> 时间：2012-10-19T03:01:14.247
> 
> 标签：javascript, jquery, indexing

假设我有以下html

```
<ul>
  <li id="a">a</li>
  <li id="b">b</li>
  <li id="c">c</li>
</ul>
<ul>
  <li id="d">d</li>
  <li id="e">e</li>
  <li id="f">f</li>
</ul> 
```

如果我使用 jQuery 来抓取项目`$('#e')`，我如何确定`e`相对于其兄弟`d`的位置或位置/索引`f`？换句话说，我期望返回值 1（如果基于零的索引）或 2（如果基于一的索引），因为它是`ul`列表中的第二个元素。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-19T03:03:20.200

简单的：`var idx = $('#e').index() // zero based`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:05:57.373

您可以使用[`.index()`](http://api.jquery.com/index/)获取元素相对于其兄弟元素的从零开始的索引。

```
$('#e').index(); 
```

[http://jsfiddle.net/LXS9F/](http://jsfiddle.net/LXS9F/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T03:07:04.827

你也可以使用 var idx =`$("#e").prevAll().size()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T03:06:32.703

你也可以试试这个：

```
$(function() {
    $('ul li').each(function(idx, e) {
        $(this).on('click', function() {
            alert(idx);
        });
    });
}); 
```

唯一的麻烦是，它目前会索引`li`整个页面上的所有内容。

# 编辑

这个给出了所有`li`内容的索引。

```
$(function() {
    $('ul li').each(function(idx, e) {
        $(this).on('click', function() {
            alert($('#' + $(this).attr('id')).index());
        });
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T03:07:25.400

```
function getIndex(id) {
    $('ul > li').each(function() {
        if ($(this).attr('id') == id) {
            return i;
        }
    });
    return 0;
} 
```

# windows - 将文件从网站直接下载到 FTP 服务器

> ID：12966765
> 
> 赞同：0
> 
> 时间：2012-10-19T03:01:45.373
> 
> 标签：windows, file, ftp, download, transfer

是否可以代替将文件下载到我的计算机然后将其上传到我的 ftp 服务器，将其从网站**直接**下载到我的 ftp 服务器上？我试过谷歌搜索，但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:22:34.047

您必须通过 CLI（命令行界面）调用它来实现它。我不知道有任何工具可以在不使用 CLI 的情况下允许它（但我想纠正一下）。

选项：

1.  使用 DOS 的直接 FTP ( [http://www.ics.uci.edu/~cjensen/info/DosFtp.htm](http://www.ics.uci.edu/~cjensen/info/DosFtp.htm) )

2.  [WGET](http://en.wikipedia.org/wiki/Wget) - 仅当您 SSH/登录到您的服务器时 - 这会将文件直接下载到您所在的服务器，但您需要先在服务器上：

> ```
> wget ftp://ftp.gnu.org/pub/gnu/wget/wget-latest.tar.gz 
> ```

我已经记不清我过去这样做的次数并跳过了浏览器......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:53:43.670

您无法启动从您的 FTP 服务器到某些 WEB 站点的直接连接。

但是您可以实现一些自定义下载器和上传器，以避免在您的计算机上缓存完整的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-16T03:58:08.393

1.  打开文件资源管理器
2.  左键单击并单击制作快捷方式
3.  将快捷方式移动到桌面
4.  成功

![在此处输入图像描述](../Images/a04fe0223d4d71aef1298009b56906d4.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-06T18:20:11.737

本周我在“multcloud.com”上使用了一项网络服务。它无法直接下载到 FTP 主机，但您可以像我一样使用 Google Drive：

1.  我使用“thoaimedia.com/save”将文件保存在我的 Google 云端硬盘中
2.  然后，我在 Multcloud 中使用了我的 WordPress 网站 FTP 帐户。
3.  另外，我将我的 Google Drive 连接到 Multcloud

只需三个步骤，您就可以在 FTP 主机和 Google Drive 之间传输、剪切或复制任何文件，就像桌面上的两个文件夹一样。

# php - 班级意外创建了 2 次

> ID：12966767
> 
> 赞同：0
> 
> 时间：2012-10-19T03:01:58.350
> 
> 标签：php, class

我刚刚在我的项目中发现了一个非常奇怪的问题。我有一个包含多种方法的类，并且一切正常，直到我尝试使用其中一种方法向 DB 添加一行。然后我看到有 2 行被添加到数据库中，那是在每次查询之后。我已经开始搜索问题，但对我来说一切似乎都是正确的。然后我开始逐个删除方法。多次我检测到，该类每个请求创建 2 次。这是我的代码：

```
<?
Class UpdateStates {
    public function __construct() {
        $millitime = round(microtime(true) * 1000);
        file_put_contents($_SERVER['DOCUMENT_ROOT'] . '/test.txt', $millitime . "\n", FILE_APPEND);
    }
}

$States = new UpdateStates();
?> 
```

因此，每次我刷新浏览器时，都会出现 2 行时间`text.txt`，例如

```
1350614391795
1350614391973
1350614634801
1350614634835
1350614640527
1350614640646 
```

我的代码有什么问题？一些技术信息：Linux Debian 6.0、PHP 版本 5.3.15-1~dotdeb.0、Apache/2.2.16。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:05:23.627

使用 firebug 查看是否从页面生成了另一个请求，可能会发生意外的 HTML 代码或图像上的错误 url 等。

# iphone - SDWebImage 下载多张图片 (iOS)

> ID：12966777
> 
> 赞同：0
> 
> 时间：2012-10-19T03:02:58.553
> 
> 标签：iphone, ios, xcode, uiimage, sdwebimage

对于我的 iPhone 应用程序，我正在尝试使用 SDWebImage 从链接列表中下载多个图像。问题是图像下载后，我不知道如何找出从哪个链接下载的图像。

例如，我有一个包含 25 个图像链接的列表。我对每个链接使用以下代码，其中下载器是 SDWebImageDownloader 的一个实例：

```
downloader = [SDWebImageDownloader downloaderWithURL:url delegate:self]; 
```

上面的代码开始下载过程，一旦下载了图像，就会调用下面的代码：

```
- (void)imageDownloader:(SDWebImageDownloader *)downloader didFinishWithImage:(UIImage *)image 
```

从上面的方法中，我可以看到我所有的 25 张图像的列表，但它们不是按顺序排列的（显然）。我想知道是否有办法跟踪图像及其相应的图像链接。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:17:47.333

SDWebImageDownloader 有一个 URL 属性，就是对应的图片链接：

```
- (void)imageDownloader:(SDWebImageDownloader *)downloader didFinishWithImage:(UIImage *)image 
{
    NSString* url = downloader.url;   
} 
```

# php - Wordpress 不输出帖子 标签

> ID：12966779
> 
> 赞同：1
> 
> 时间：2012-10-19T03:03:25.810
> 
> 标签：php, html, wordpress-theming, wordpress

所以我使用自定义循环在某些页面上输出自定义帖子类型。

它工作得很好，可以抓取内容等，但它不会将段落包装在 p 标签中。我对 WP 比较陌生，好像我以前刚做过前端的东西，所以如果我在这里犯了一个基本的错误，请原谅我。

```
<div class="home-grid-1">
            <?php 
                query_posts(array( 
                    'post_type' => 'Headerhome',
                    'showposts' => 1 
                ) );  
            ?>
            <?php while (have_posts()) : the_post(); ?>

            <?php echo get_the_content(); ?>
            <?php endwhile; wp_reset_query();?>

    </div> <!-- end home-grid-1 --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:55:53.197

而不是`echo get_the_content()`，它通常没有应用过滤器，使用`the_content()`它将自动回显帖子内容，并应用过滤器。

```
while (have_posts()) : the_post(); 
    the_content();
endwhile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:17:34.213

您需要的过滤器是一个双断线到`<p>`和的变压器`</p>`。它被称为 wpaup 并[在此处解释](http://codex.wordpress.org/Function_Reference/wpautop)

# jquery - 使用 jQuery .html() 指向 HTML 资源而不是 html 字符串

> ID：12966786
> 
> 赞同：1
> 
> 时间：2012-10-19T03:04:14.063
> 
> 标签：jquery, html

我有很多以前使用 .html('LOTS OF CODE HERE') 方法编写的代码。它目前被格式化为一个长的连接字符串，每一行都用 " " + 包裹

但这很难维护，而且很难看。有没有办法将此代码保存为自己单独的 HTML 页面，然后通过指向该页面来替换当前的 HTML 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:07:05.483

是的，[加载](http://api.jquery.com/load/)。首先使用您的标记创建一个 html 文件，然后：

```
$('#container').load('path/to/file.html') 
```

# jquery - 克隆的手风琴不像原来的手风琴那样运作

> ID：12966790
> 
> 赞同：2
> 
> 时间：2012-10-19T03:04:41.770
> 
> 标签：jquery, clone, accordion

我在 Web 应用程序中使用 jquery 手风琴。我想在多个地方使用这款手风琴。所以，我想到了克隆它。但是克隆的手风琴只给了我原始克隆的图像，它的功能与原始手风琴不同。原始手风琴包含可选项目。选择一项后，将执行一些操作。我为此操作编写了 java 脚本代码。我现在只是希望其他克隆手风琴和可选项目也能发生这种情况。那么，我怎样才能使克隆的手风琴功能像原始手风琴一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:32:24.180

使用 jQuery clone() 的深度克隆参数来克隆所有数据和事件：

```
.clone( [withDataAndEvents] [, deepWithDataAndEvents] ) 
```

> [withDataAndEvents]：一个布尔值，指示是否应将事件处理程序和数据与元素一起复制。默认值为假。
> 
> [deepWithDataAndEvents]：一个布尔值，指示是否应复制克隆元素的所有子元素的事件处理程序和数据。默认情况下，它的值与第一个参数的值匹配（默认为 false）。

也一样`$('your-selector').clone(true, true)`

更多信息：http: [//api.jquery.com/clone/](http://api.jquery.com/clone/)

# c# - 如何在 KendoUI 中填充树？

> ID：12966793
> 
> 赞同：0
> 
> 时间：2012-10-19T03:05:14.097
> 
> 标签：c#, visual-studio, kendo-ui

我目前正在使用代码：

```
@foreach (var table in Model.TableData)
{
    foreach(var field in table.Fields)
    {
        var tableName = table.TableName;
        var fieldName = field;

        @(Html.Kendo().TreeView().Name("DatabaseTables").DragAndDrop(true)

        .Items(treeview =>
          {
              treeview.Add().Text(tableName).Expanded(false).Items(fields =>
              {
                  fields.Add().Text(fieldName);
              });
          }))
    }
} 
```

这应该为每个表创建一个节点，并用字段填充它，但显然是为表中的每个字段创建一棵树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:28:34.593

麻烦是你的嵌套。我通常不使用 html 帮助程序，但是我相信正确的用法如下所示。

```
 @(Html.Kendo().TreeView().Name("DatabaseTables").DragAndDrop(true)

    .Items(treeview =>
      {
          foreach (var table in Model.TableData)
           {
            var tableName = table.TableName;
            treeview.Add().Text(tableName).Expanded(false).Items(branch=>
            {
            foreach(var field in table.Fields)
              { 
                var fieldName = field;
                 branch.Items(fields =>
                 {
                 fields.Add().Text(fieldName);
                 });
           }});}
      })) 
```

您的树视图创建在您的 for 循环中，它需要在外部，否则您将为每次迭代生成重复的树。

# javascript - 如何在 jQuery 中检测当前页面的媒体类型

> ID：12966804
> 
> 赞同：5
> 
> 时间：2012-10-19T03:06:36.983
> 
> 标签：javascript, jquery, css

我有一个带有输入字段的页面。当页面处于媒体类型打印时，我想隐藏所有 0 值文本字段。

我在[jQuery](http://jsfiddle.net/KAsq6/)中尝试过。但这适用于屏幕模式和打印模式。

**HTML：**

```
<div class="screen">some screen</div>
<div class="print">some print</div>
<input type='text' name='' id='1' class='' value='0'/>
<input type='text' name='' id='2' class='' value='5'/>
<button>Print</button> 
```

**JS：**

```
$('button').click(function(){
    $('input[type=text]').each(function(){
      if ( $(this).val() == 0 ){
        $(this).hide()
      }     
    })
}) 
```

**CSS：**

```
@media print{
    .screen{
      display:none;
    }

    .print{
      display:block;  
    }
}

@media screen{
    .screen{
      display:block        
    }

    .print{
      display:none;   
    }
} 
```

如果我检测到当前页面的媒体类型。我可以完成它。不幸的是，我无法获得正确的代码。

我也试过[jmediatype](http://code.google.com/p/jmediatype/)，但没​​有下载选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T03:10:24.970

如果你只想用 隐藏字段`value="0"`，你可以只用 CSS 来做到这一点：

```
@media print {
    input[value="0"] {
        display: none;
    }
} 
```

另一种方法是给这些元素一个只被打印样式表隐藏的类：

```
$('button').click(function(){
    $('input[type=text]').filter(function() {
        return parseInt(this.value, 10) == 0;
    }).addClass('print-hidden');
}); 
```

并使用这样的样式：

```
@media print {
    .print-hidden {
        display: none;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:15:35.883

定义一个仅用于媒体打印的 CSS 文件，其中包含：

```
.empty
{
    display: none;
} 
```

将此 CSS 文件包含在您的图像中，仅用于**媒体打印**

在按钮上为单击事件添加一个侦听器。此侦听器将为具有空值的输入添加空 CSS 类。

```
$("ID_OF_YOUR_BUTTON").click(function(mouseEvent) {

    $("input[type=text]").each(function(index, element) {

        if ($(element).val().length == 0)
            $(element).addClass("empty");

    });
}); 
```

对于媒体屏幕，这个类不会做任何事情，但对于媒体打印，它会将显示更改为**none**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:15:50.450

如果您想找出特定样式表的媒体类型，您可以在 jQuery 中执行此操作：

```
var media = $('link[href$="styles.css"]').attr('media'); 
```

您必须分离样式表并使用 media 属性将它们加载到标记中，而不是在一个文件中使用媒体查询。

# c# - 在 XNA 中设置 spritefont 的右下角？

> ID：12966812
> 
> 赞同：0
> 
> 时间：2012-10-19T03:07:33.263
> 
> 标签：c#, xna, xna-4.0

好吧，我一直在尝试根据右下角设置 spritefont 的位置，但是，当我设置它时，它还差得很远，我将它设置为 10,10，我什至看不到它，如果我将它设置为40,40 我刚开始能够看到右下角...我认为我做得对...这是我的代码：

```
public void DrawFont(SpriteBatch spriteBatch)
    {
        spriteBatch.DrawString(gameFont, fontText, fontPos, fontColor);
    } 
```

fontPos 是左上角。这是在它自己的类中。然后我有另一种方法（在同一个类中）：

```
public void setBottomRight(Vector2 newVector2)
    {
        fontPos.X = newVector2.X - gameFont.MeasureString(fontText).X;
        fontPos.Y = newVector2.Y - gameFont.MeasureString(fontText).Y;
    } 
```

我在 Game.cs 类的更新方法中使用它，并将向量设置为 10,10 处的新向量，但我看不到文本，我检查它是否只是文本中的一个间隙，但事实并非如此。

我觉得这是对的……还是我犯了一个愚蠢的错误……？还是 MeaureString 方法不提供从边到边的长度？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:20:30.520

你原来的逻辑几乎是合理的。唯一不正确的是 Measurestring Y 值。测量字符串的 Y 值返回字符串垂直大小的两倍。因此，如果您将大小为 14 的字符串作为字符串，它将返回 28。这意味着它不会给您高度，而是给您双倍的数量，从而将您的字符串扔到屏幕上。更换

```
fontPos.Y = newVector2.Y - gameFont.MeasureString(fontText).Y; 
```

和

```
fontPos.Y = newVector2.Y - gameFont.MeasureString(fontText).Y/2; 
```

将解决您的问题！

# php - 我在将 PHP 脚本生成的图像嵌入 MIME 电子邮件时遇到了一些问题

> ID：12966820
> 
> 赞同：2
> 
> 时间：2012-10-19T03:09:08.350
> 
> 标签：php, image, mime

我正在使用 Zencart 向客户发送带有礼券的电子邮件。证书是由使用 imagepng 的 php 文件生成的，我可以毫无困难地使用它在网页上显示

```
echo "<img src=\"getImage.php\"/>". 
```

但是，当我尝试在电子邮件脚本中执行相同操作时，它不会显示（尽管任何标准图像都会显示）。我认为这与动态生成有关，但我似乎无法绕过它。我尝试通过给 imagepng 一个由 tempnam 生成的名称来临时保存图像，

```
$fname = tempnam("", "img");
imagepng($im, $fname . ".png"); 
```

但由于某种原因，它不保存图像。我想使用 ob_get_contents 但我不知道如何去做，以便它给我一个可以在图像标签内使用的值。

在过去的几天里，这一直让我发疯。任何帮助，将不胜感激。

优雅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:16:51.733

电子邮件在您的网络之外，因此您必须设置图像的绝对路径：

```
<img src="http://yoursite.com/yourimage.php"/> 
```

或者使用 base64 编码将其包含在电子邮件中，但它更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:31:29.170

诀窍是在电子邮件中也包含图像。如果您的图像是在发送时动态创建的，您需要在发送时运行 PHP 脚本，并将结果包含在消息中。如果您希望在客户端查看消息时生成图像，那么就像@Laleft 所说，您必须在`<img>`标签中的链接中有一个完整的 URL。

如果您想引用附加的图像，请分配一个 Content-Id: 并通过`cid:`链接引用它，如下所示：

```
From: you <spammer@example.com>
To: recipient <victim@example.net>
Subject: Buy V!agra Ciali$
Content-type: multipart/related; boundary="moo"

--moo
Content-type: text/html; charset="utf-8"
Content-transfer-encoding: quoted-printable

<html><body><img="cid:moo.png"></body></html>

--moo
Content-type: image/png
Content-disposition: inline
Content-id: "moo.png"
Content-transfer-encoding: base64

///base64/encoded/output/of/PHP/script/goes/here//==

--moo-- 
```

# c++ - 在 C++ 中初始化引用类型

> ID：12966823
> 
> 赞同：0
> 
> 时间：2012-10-19T03:09:53.090
> 
> 标签：c++, reference, initialization

我试图更好地理解 C++ 中指针和引用之间的区别。来自 Java 背景，我期待 C++ 中的引用是相似的；我期望一个指针减去指针算术。然而，我感到非常失望，有时甚至感到困惑。经过一番阅读，我认为我理解引用是没有指针运算的指针，并且永远不能设置为 NULL。为了测试我学到的东西，我决定开始编码。但是，我遇到了这个问题，我不明白为什么我的代码无法编译。

这是我正在尝试的：

```
 3 void test(biNode*& bn)
  4 {
  5    string& s("another test");
  6    bn = new biNode(s);
  7    printf("Just Checking: %s\n", bn->getObject().c_str());
  8 }
  9
 10 int main()
 11 {
 12    biNode* bn;
 13    test(bn);
 14    printf("Just Checking: %s\n", bn->getObject().c_str());
 15 } 
```

这是我的“biNode”标头：

```
 1 #include <string>
  2 #include <iostream>
  3
  4 using namespace std;
  5
  6 class biNode
  7 {
  8    public:
  9       biNode(string& s);
 10       string& getObject();
 11    private:
 12       string& obj;
 13 }; 
```

有相应的定义：

```
 1 biNode::biNode(string& s) : obj(s)
  2 {}
  3 string& biNode::getObject()
  4 {
  5    return this->obj;
  6 } 
```

尝试编译它会产生以下错误：

```
./test.cpp: In function `void test(biNode*&)':
./test.cpp:5: error: invalid initialization of non-const reference of type 'std::string&' from a temporary of type 'const char*' 
```

我不明白'string& s("another test");' 无效。任何人都可以解释一下吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:17:08.323

您需要了解的另一个引用规则是临时变量（右值）只能绑定到`const`引用。一旦绑定，临时对象的生命周期就会延长，以匹配它所绑定的引用的生命周期。

```
string& s("another test"); 
```

在这里，您尝试绑定一个非引用的右值（字符串文字`"another test"`） 。`s``const`

将行更改为

```
string const& s("another test"); 
```

它会编译。

`s`此外，在您的示例中，创建引用类型没有任何好处。所以你也可以把这条线改成

```
string s("another test"); 
```

并且代码将按预期编译和工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:25:06.367

除了同类型的现有对象之外，您不能使用任何东西来初始化非常量引用，然后该引用将为其别名。但是您的类`biNode`也包含一个引用成员，因此您必须只使用一个对象初始化一个`biNode`实例，该对象的存在时间至少与节点实例本身一样长！

这是一个示例，演示了如何`biNode`以理智的方式使用它：

```
int main()
{
    std::string s("Hello");

    for (int i = 0; i != 10; ++i)
    {
        biNode bn(s);
        // more stuff
    }
} 
```

您的函数的合理版本`test`可能如下所示：

```
biNode test(std::string & s)
{
    return biNode(s);
}

int main()
{
    std::string s("World");
    auto bn = test(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T03:34:21.567

您似乎感到困惑的主要来源是参考是什么。在 C++ 中，引用是现有对象的**别名。**引用必须始终引用一个对象，并且它别名的对象始终相同（无法重置）。将引用绑定到对象就是为该对象创建*别名*。为此，您首先需要一个适当类型的对象，标准中存在一个明确的例外：您可以将`const`引用绑定到临时对象（即创建对象的表达式）。

# java - ExecutorService 在提交新任务时取消当前任务

> ID：12966836
> 
> 赞同：3
> 
> 时间：2012-10-19T03:12:14.540
> 
> 标签：java, executorservice

考虑一个接受需要很长时间初始化的服务的配置设置的用户界面（例如，JDBC 连接的参数）。我们希望我们的用户界面在服务初始化发生时保持响应。如果用户进行其他更改，则应取消初始化并使用新参数重新启动。

因为在用户键入每个字符时参数都包含在配置中，因此可能会连续创建多个初始化请求。只有最后一个应该被执行。

我们已经编写了实现此结果的代码，但似乎这种行为非常适合作为 ExecutorService 实现。在我们将所有内容重构为 ExecutorService 之前，我想我会问世界上是否已经存在类似的实现。

更具体：

ExecutorService 将有一个工作线程。一旦提交了新任务，当前任务就会被取消（并且工作人员会中断）。然后捕获新任务以供下一次执行。如果提交了另一个任务，则再次取消当前任务，并将“下一次执行”任务设置为这个新任务。当工作线程最终选择下一个任务执行时，它始终是最后一个提交的任务——所有其他任务要么被取消，要么被丢弃。

有没有人愿意分享这样的实现？或者是否有一个涵盖这种行为的标准库？实现起来并不难，但是确定线程安全可能会很棘手，所以如果可以的话，我宁愿使用经过验证的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:41:58.683

这是我最终想出的——我对任何评论都感兴趣：

```
public class InterruptingExecutorService extends ThreadPoolExecutor{
    private volatile FutureTask<?> currentFuture;

    public InterruptingExecutorService(boolean daemon) {
        super(0, 1, 1000L, TimeUnit.MILLISECONDS,
                new LinkedBlockingQueue<Runnable>(), 
                daemon ? new DaemonThreadFactory() : Executors.defaultThreadFactory());

    }

    public static class DaemonThreadFactory implements ThreadFactory{
        ThreadFactory delegate = Executors.defaultThreadFactory();

        @Override
        public Thread newThread(Runnable r) {
            Thread t = delegate.newThread(r);
            t.setDaemon(true);
            return t;
        }

    }

    private void cancelCurrentFuture(){
        // cancel all pending tasks
        Iterator<Runnable> it = getQueue().iterator();
        while(it.hasNext()){
            FutureTask<?> task = (FutureTask<?>)it.next();
            task.cancel(true);
            it.remove();
        }

        // cancel the current task
        FutureTask<?> currentFuture = this.currentFuture;
        if(currentFuture != null){
            currentFuture.cancel(true);
        }
    }

    @Override
    public void execute(Runnable command) {
        if (command == null) throw new NullPointerException();

        cancelCurrentFuture();
        if (!(command instanceof FutureTask)){ // we have to be able to cancel a task, so we have to wrap any non Future
            command = newTaskFor(command, null);
        }
        super.execute(command);
    }

    @Override
    protected void beforeExecute(Thread t, Runnable r) {
        // it is safe to access currentFuture like this b/c we have limited the # of worker threads to only 1
        // it isn't possible for currentFuture to be set by any other thread than the one calling this method
        this.currentFuture = (FutureTask<?>)r;
    }

    @Override
    protected void afterExecute(Runnable r, Throwable t) {
        // it is safe to access currentFuture like this b/c we have limited the # of worker threads to only 1
        // it isn't possible for currentFuture to be set by any other thread than the one calling this method
        this.currentFuture = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:29:04.970

您可能需要向执行者添加 DiscardOldestPolicy

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.DiscardOldestPolicy.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.DiscardOldestPolicy.html)

```
You will get
0 submitted
1 submitted
2 submitted
3 submitted
4 submitted
5 submitted
6 submitted
7 submitted
8 submitted
9 submitted
9 finished

public static void main(String[] args) throws SecurityException,
        NoSuchMethodException {

    final Method interruptWorkers = ThreadPoolExecutor.class
            .getDeclaredMethod("interruptWorkers");
    interruptWorkers.setAccessible(true);

    ExecutorService executor = new ThreadPoolExecutor(1, 1, 0L,
            TimeUnit.MILLISECONDS, new SynchronousQueue<Runnable>(),
            new RejectedExecutionHandler() {

                @Override
                public void rejectedExecution(Runnable r,
                        ThreadPoolExecutor executor) {
                    if (!executor.isShutdown()) {
                        try {

                            interruptWorkers.invoke(executor);
                            executor.execute(r);

                        } catch (IllegalArgumentException e) {
                            e.printStackTrace();
                        } catch (IllegalAccessException e) {
                            e.printStackTrace();
                        } catch (InvocationTargetException e) {
                            e.printStackTrace();
                        }
                    }
                }
            });

    for(int i =0 ;i<10;i++)
        executor.submit(newTask(i));
}

private static Runnable newTask(final int id) {
    return new Runnable() {
        {

            System.out.println(id + " submitted");
        }

        @Override
        public void run() {
            try {

                Thread.sleep(5000l);
                System.out.println(id + " finished");
            } catch (InterruptedException e) {
            }

        }

    };
} 
```

# asp.net - 在 asp.net c# + razor 中动态添加 javascript 到布局，如 Page.Title

> ID：12966837
> 
> 赞同：2
> 
> 时间：2012-10-19T03:12:25.813
> 
> 标签：asp.net, asp.net-mvc, razor

我是 ASP.NET 的新手，正在努力学习更多知识。

我创建了一个名为 Layout.cshtml 的布局：

```
<html>
    <head>
         <title>Page.Title</title>

    </head>
    <body>
    </body>
</html> 
```

并且我将 Layout.cshtml 设置为 _PageStart.cshtml 中所有页面的默认布局：

```
@{Layout="~/Shared/Layout.cshtml";}; 
```

我了解到如果我在每个页面中更改 Page.Title，我可以动态设置页面标题。例如，我的 Default.cshtml 中有这个，它工作正常：

```
@{Page.Title = "HOME";} //the page title has changed to HOME
<h1>This is the home page</h1> 
```

我的问题是，在 asp.net+razor 中是否存在动态添加 Javascript（或 css）以喜欢 Page.Title 的方法？

感谢大佬们的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:23:22.420

可能最好的方法是使用部分。您在布局中放置一个具有给定名称的部分，然后在每个页面中填写该部分的内容。

因此，您可以在 layout.cshtml 中使用“脚本”部分：

```
<head>
    @RenderSection("Scripts")
</head> 
```

然后在各个页面中：

```
@section Scripts {
    <script src='@Url.Content("scripts/somescript.js")'></script>
} 
```

如果您需要更多信息，[ASP.Net MVC 博客](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)有一篇关于这个主题的详细文章。

# ms-access - 从 msaccess 查询中的文本中剥离 ,（逗号）

> ID：12966843
> 
> 赞同：1
> 
> 时间：2012-10-19T03:13:37.790
> 
> 标签：ms-access

有人可以告诉我如何创建一个表达式以在 msaccess 查询中使用，去掉 , 和 . 字符并用空格替换它们

例如，我有一个包含客户姓名的数据字段（例如 Mickey Mouse Company, Ltd.）

我需要使用查询从数据库中提取它，并将其导出到 csv 文件，但正如您可以想象的那样，客户名称中的 , 会在 csv 文件中产生问题

是否可以创建一个表达式来去除这些标点符号并用空格替换它们，以便后续的 csv 文件不会被弄乱

非常感谢期待

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:17:48.857

是的，使用该[`replace`](http://www.techonthenet.com/access/functions/string/replace.php)功能。语法类似于*string*、*find*、*replace*，所以是这样的（如果您使用的是查询设计器）：

```
field_name: replace([field_name], ",", " ") 
```

# entity-framework - 在实体框架中使用 OR 和包含的动态查询

> ID：12966844
> 
> 赞同：0
> 
> 时间：2012-10-19T03:13:41.017
> 
> 标签：entity-framework

给定这样的字符串：

```
var filterOptions = "First Bank"; 
```

还有一个具有 Grantee 列和 Grantor 列的表，如何使用 EF 创建一个查询，该查询将生成以下 where 子句：

```
... where (Grantor like '%First%' and Grantor like '%Bank%') or (Grantee like '%First%' and Grantee like '%Bank%') 
```

请记住，filterOptions 是一个传入的参数，因此它可以很容易地包含 3 或 4 个单词，而不仅仅是两个……在这种情况下，每列都需要额外的 like 子句。

如果不是因为 OR 部分，我会做以下事情（这将有助于更好地了解我想要完成的工作。

```
foreach(var word in filterOptions)
{
    var text = "%" + word + "%";
    query = query.Where(r => SqlMethods.Like(r.Grantee,text));
} 
```

就像我说的那样，它试图将 OR 部分与另一列相加，这让我陷入了循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:20:58.007

首先，阅读下面的博客，然后您将知道如何进行 OR 操作： [http ://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

其次，如果您使用的是实体框架，请阅读另一篇博客，它对实体框架有更好的“谓词构建器”实现：http: [//petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/](http://petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/)

# matlab - Matlab 一次只显示一个窗口

> ID：12966846
> 
> 赞同：1
> 
> 时间：2012-10-19T03:13:44.970
> 
> 标签：matlab, image-processing

假设以下是我的 MatLab 命令。它们是按顺序输入的。

```
I = imread('C:\Documents and Settings\Guest\Desktop\test.jpg');

imshow(I);

imhist(I); 
```

执行第 2 行后，MatLab 调用一个显示图像“I”的窗口。第 3 行将显示“I”的直方图。直方图将替换图像（在同一窗口中）。

我想做的是：

1.  我想维护我的图像窗口（我们称之为“图 1”窗口）

2.  直方图在另一个窗口中调用（“图 2”）

有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T03:18:33.267

您可以尝试使用[`figure`](http://esra.univ-paris1.fr/matlab5/techdoc/environ/matlab20.html)

```
I = imread('C:\Documents and Settings\Guest\Desktop\test.jpg');

figure(1);
imshow(I);

figure(2);
imhist(I); 
```

# sql - 在同一查询中获取最小和最大日期

> ID：12966848
> 
> 赞同：0
> 
> 时间：2012-10-19T03:13:51.983
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个工作查询，它​​给了我最大日期：

```
SELECT a.client_id AS client_id
   , a.patientcount AS patientcount
   , received_date AS maxRecDate
FROM
(
   SELECT DISTINCT CLIENT_ID
   , PATIENT_ID
   , count(*) over (partition by client_id, patient_id) AS patientcount
   from f_accession_daily
) AS a
JOIN F_ACCESSION_DAILY AS f ON a.CLIENT_ID = f.CLIENT_ID
   AND a.PATIENT_ID = f.PATIENT_ID
GROUP BY f.RECEIVED_DATE, a.CLIENT_ID, a.patientcount
HAVING f.RECEIVED_DATE = MAX(f.received_date) 
```

在同一个查询中，我还想返回 min(f.received_date)。

有没有办法做到这一点？也许与子查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:00:11.593

我可能遗漏了一些东西，但我不明白你为什么要分组`f.RECEIVED_DATE`

我认为查询可能是：

```
SELECT a.client_id AS client_id
   , a.patientcount AS patientcount
   , max(f.received_date) AS maxRecDate
   , min(f.received_date) AS minRecDate
FROM
(
   SELECT DISTINCT CLIENT_ID
   , PATIENT_ID
   , count(*) over (partition by client_id, patient_id) AS patientcount
   from f_accession_daily
) AS a
JOIN F_ACCESSION_DAILY AS f ON a.CLIENT_ID = f.CLIENT_ID
   AND a.PATIENT_ID = f.PATIENT_ID
GROUP BY a.CLIENT_ID, a.patientcount 
```

我没有对此进行测试，但我认为它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:53:40.527

在您的查询中，添加一个 OR 条件以检查 MIN 日期。解决问题

```
SELECT a.client_id AS client_id
, a.patientcount AS patientcount
, received_date AS maxRecDate
FROM
(
SELECT DISTINCT CLIENT_ID
, PATIENT_ID
, count(*) over (partition by client_id, patient_id) AS patientcount
from f_accession_daily
) AS a
JOIN F_ACCESSION_DAILY AS f ON a.CLIENT_ID = f.CLIENT_ID
AND a.PATIENT_ID = f.PATIENT_ID
GROUP BY f.RECEIVED_DATE, a.CLIENT_ID, a.patientcount
HAVING f.RECEIVED_DATE = MAX(f.received_date) 
OR f.RECEIVED_DATE = MIN(f.received_date) -- Newly added condition 
```

# html - 如何使部分内容无法在html textarea中编辑

> ID：12966849
> 
> 赞同：0
> 
> 时间：2012-10-19T03:13:56.203
> 
> 标签：html, textarea, readonly

在我的 html 页面中，我有一个 textaere，我会写一些内容给它，我想一​​些内容可以修改，但有些不能。

```
<html>
  <body>
  <div class="text">
    <textarea cols="50" rows="4" name="msg_content" id="msg_content" readonly="readonly">
        Hi, I am the contents that can be modified.
        Hi, the url cannot be modified.

        http://www.google.com
    </textarea>
  </div>
</html> 
```

如您所见，我将 textarea 的属性之一设置为只读，但在这种情况下，无法修改整个内容。

能否请您给我一些建议，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:20:11.517

那是做不到的。但是，您可以使用 CSS 在文本区域内模拟禁用文本的效果。创建一个 Div 元素并将其放置在文本框的正下方，并以一种看起来好像它是文本框的一部分的方式对其进行设计。

为此，您需要调整和使用 CSS。

看看这个：[http](http://css-tricks.com/creating-a-nice-textarea/) ://css-tricks.com/creating-a-nice-textarea/ 示例：[http ://css-tricks.com/examples/StyledTextArea/](http://css-tricks.com/examples/StyledTextArea/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:40:11.550

除非您可以使用 HTML5，否则这是不可能的。使用 HTML5，您可以将 contenteditable=true/false 属性用于特定元素。

举个例子：

```
<div contenteditable="true">
 You can edit this text, 
 <p contenteditable="false">but not this one.</p>
</div> 
```

# android - 如何在相机预览数据中分割左右相机图像（HTC Evo 3D）

> ID：12966858
> 
> 赞同：4
> 
> 时间：2012-10-19T03:14:53.670
> 
> 标签：android, 3d, camera

现在我有了带两个后置摄像头的 HTC Evo 3D，并计划做一些立体视觉实验。我使用以下代码访问了立体相机：

```
private final static int CAMERA_STEREOSCOPIC 
= Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH ? 2 : 100;
camera = Camera.open(CAMERA_STEREOSCOPIC); 
```

要访问相机预览数据：

```
bufferSize = mPreviewWidth * mPreviewHeight * bitsPerPixel / 8;
mPreviewBuffer = null;

// New preview buffer.
mPreviewBuffer = new byte[bufferSize + 4096];

// with buffer requires addbuffer.
camera.addCallbackBuffer(mPreviewBuffer);
camera.setPreviewCallbackWithBuffer(mCameraCallback);

private final Camera.PreviewCallback mCameraCallback = new Camera.PreviewCallback() {
public void onPreviewFrame(byte[] data, Camera c) {
        // to do the camera image split processing using "data"
}
}; 
```

**但是这里的预览数据的大小和数据结构是怎样的，怎么在相机预览代码中分割左右相机图像呢？**

顺便说一句，我应该注意两个相机的预览数据的缓冲区大小吗？

有任何想法吗？提前致谢！

# ruby-on-rails - 需要帮助理解此错误 - Pages#show 中的 SyntaxError

> ID：12966859
> 
> 赞同：2
> 
> 时间：2012-10-19T03:14:56.207
> 
> 标签：ruby-on-rails, templates, haml

在我的本地环境中工作时出错，但推送到 Heroku 的完全相同的代码工作得很好。有任何想法吗？

这是我尝试转到应用程序本地环境中的任何页面时显示的内容。

```
 /Users/user/badger/app/views/shared/_navigation.html.haml:211: syntax error, unexpected keyword_do_block
    /Users/user/badger/app/views/shared/_navigation.html.haml:213: syntax error, unexpected keyword_end, expecting ')'
      end ).to_s); _erbout.concat "\n"
     ^
/Users/user/badger/app/views/shared/_navigation.html.haml:249: syntax error, unexpected keyword_do_block
/Users/user/badger/app/views/shared/_navigation.html.haml:251: syntax error, unexpected keyword_end, expecting ')'
  end ).to_s); _erbout.concat "\n"
     ^ 
```

提取的源代码（在 #211 行附近）：

```
208:         :erb
209:           <% if @page and @page.categories_include("About") %>
210:             <%= link_to item.name.capitalize, polymorphic_path(item.navigable), :class => "current" %>
211:           <% else %>
212:             <%= link_to_unless_current item.name.capitalize, polymorphic_path(item.navigable), do
213:               link_to item.name.capitalize, polymorphic_path(item.navigable), :class => "current"
214:             end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:16:47.033

问题在这里：

```
<%= link_to_unless_current item.name.capitalize, polymorphic_path(item.navigable), do 
```

如您所见，您前面有一个逗号`do`。您需要删除此逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:59:15.723

请参阅下面的链接，了解如何使用`link_to_unless_current`

[link_to_unless_current](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to_unless_current)

逗号 (',') 之前的问题

```
<%= link_to_unless_current item.name.capitalize, polymorphic_path(item.navigable), do 
```

只是替换为

```
<%= link_to_unless_current item.name.capitalize, polymorphic_path(item.navigable) do 
```

# iphone - iOS PhoneGap/Facebook 身份验证未完成

> ID：12966861
> 
> 赞同：0
> 
> 时间：2012-10-19T03:15:08.240
> 
> 标签：iphone, facebook, cordova, phonegap-plugins, facebook-authentication

我是 PhoneGap 和 Facebook 身份验证的新手，我正在尝试获取 phonegap-plugin-facebook-connect git hub 项目中提供的简单示例来完成身份验证。我可以让应用程序在我的 iPhone 上运行，当我点击“登录”按钮时，它会将我带出我的 iPhone 应用程序并进入 Facebook 应用程序，显示我允许访问的内容，以及当我按下登录时将我登录到 Facebook，并且不会返回启动它的 iPhone 应用程序。当我查看我的 Facebook 个人资料时，在“我的应用程序”下，我可以看到我的应用程序已成功添加。

我所期望的是被带回我的应用程序，并让插件使用登录结果调用其登录回调。但是，情况并非如此。

任何人都可以提供更多信息：1.我如何在不带我进入 Facebook 的 iPhone 应用程序的情况下进行身份验证，以及 2.我在身份验证方面可能做错了什么，它不会返回到我的 iPhone 应用程序来完成身份验证。

我正在使用我的**iPhone 4（5.0 版）**进行开发。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:31:31.507

这回答了我的问题。 [一条链接](https://stackoverflow.com/questions/7666684/facebook-ios-sdk-not-returning-to-my-app)

特别是需要添加到我的 facebook 应用程序 ID 前面的 URL 方案中的“fb”前缀

# ruby-on-rails - Pg_Search 不返回结果

> ID：12966862
> 
> 赞同：2
> 
> 时间：2012-10-19T03:15:11.120
> 
> 标签：ruby-on-rails, full-text-search, pg-search

在我的应用程序中，我有许多要添加多搜索的模型，我觉得我已经完成了所需的一切，但是在控制台中，当我运行以下命令时，我得到一个空的 []。

```
PgSearch.multisearch("Red") 
```

这就是我所做的

```
rails g pg_search:migration:multisearch
rake db:migrate 
```

创建了一个初始化程序，其中包括

```
PgSearch.multisearch_options = {
:using => [:tsearch, :trigram],
:ignoring => :accents
} 
```

我还创建了这些扩展

在我想搜索的每个模型中，我添加了以下内容

```
include PgSearch
multisearchable :against => [:name] 
```

然后我创建了一个结果控制器，这是里面的内容

```
class ResultsController < ApplicationController

 def index
  @pg_search_documents = PgSearch.multisearch(params[:query])
 end
end 
```

从控制台运行搜索时，我没有收到任何错误，即使我知道有些项目适合我正在搜索的内容，也没有结果。

pg_search 是否会遍历在添加 pg_search 之前创建的项目？有没有人知道我做错了什么？我可能错过了什么。

谢谢

编辑：对不起，我还应该提到我正在使用 rails 3.2.8 和 ruby​​ 1.9.2，我已将 pg_search 添加到我的 gemfile 并运行 rake db:migrate

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T11:56:09.040

啊，很明显，我已经为 pg-search 重建了我的记录来访问它们。希望这对将来的某人有所帮助。

```
rake pg_search:multisearch:rebuild[BlogPost] 
```

# firefox - 构建 Web 浏览器

> ID：12966866
> 
> 赞同：0
> 
> 时间：2012-10-19T03:15:47.193
> 
> 标签：firefox, browser, chromium

尽管我很想问它，但这不是“如何制作网络浏览器问题”之一。

我目前正在下载 Chromium。哇。这是**巨大**的。浏览器怎么会这么大？尤其是当你将它与你下载的实际成品进行比较时，它只有大约 200MB。

反正。我的问题是，我在哪里可以获得Mozilla浏览器的来源？我从 Google 搜索中找到了一个链接，但该页面告诉我我无权查看请求的页面。还有其他资源我可以从网上获得这个下载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:33:26.070

好吧，从评论延伸：

根据[这篇 MDN 文章，您可以从他们的](https://developer.mozilla.org/en-US/docs/Developer_Guide/Source_Code/Downloading_Source_Archives)[FTP](ftp://ftp.mozilla.org/pub/mozilla.org/)获取 Firefox 源代码，使用路径中的版本：

```
ftp.mozilla.org/pub/mozilla.org/PROJECT/releases/RELEASE/source/ 
```

其中大写字母中的名称含义如下：

*   PROJECT - 项目名称，例如*firefox*或*Thunderbird*。
*   RELEASE - 版本，例如*1.5.0.3*或*bonecho*。

例如，Firefox 2.0.0.4 版的源代码可以在以下 URL 中找到：

```
ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/2.0.0.4/source/ 
```

# vb.net - 使用gridview删除多个值

> ID：12966869
> 
> 赞同：0
> 
> 时间：2012-10-19T03:16:03.857
> 
> 标签：vb.net, ms-access, gridview, checkbox

我想知道我的代码有什么问题。如果我想删除，我必须勾选复选框，它允许我删除一条记录，但是当我想删除多条记录时，它不会给我一个错误，但记录没有被删除。这是我的代码

```
 Protected Sub chkSelect_CheckedChanged(ByVal sender As Object, ByVal e As EventArgs)
    Dim chkTest As CheckBox = DirectCast(sender, CheckBox)
    Dim grdRow As GridViewRow = DirectCast(chkTest.NamingContainer, GridViewRow)

    Dim bin As TextBox = DirectCast(grdRow.FindControl("txtBin"), TextBox)
    Dim wheatGrist As TextBox = DirectCast(grdRow.FindControl("txtWheatGrist"), TextBox)
    Dim HB43S As TextBox = DirectCast(grdRow.FindControl("txtHB43S"), TextBox)
    Dim M_NIR As TextBox = DirectCast(grdRow.FindControl("txtNIR"), TextBox)
    Dim HB43 As TextBox = DirectCast(grdRow.FindControl("txtHB43"), TextBox)
    Dim WG_NIR As TextBox = DirectCast(grdRow.FindControl("txtWGNIR"), TextBox)
    Dim glutematic As TextBox = DirectCast(grdRow.FindControl("txtGlutematic"), TextBox)
    Dim handwash As TextBox = DirectCast(grdRow.FindControl("txtHandwash"), TextBox)
    Dim distilledWater As TextBox = DirectCast(grdRow.FindControl("txtDistilled"), TextBox)

    If chkTest.Checked Then
        bin.[ReadOnly] = False
        wheatGrist.[ReadOnly] = False
        HB43S.[ReadOnly] = False
        M_NIR.[ReadOnly] = False
        HB43.[ReadOnly] = False
        WG_NIR.[ReadOnly] = False
        glutematic.[ReadOnly] = False
        handwash.[ReadOnly] = False
        distilledWater.[ReadOnly] = False

        bin.ForeColor = System.Drawing.Color.Blue
        wheatGrist.ForeColor = System.Drawing.Color.Blue
        HB43S.ForeColor = System.Drawing.Color.Blue
        M_NIR.ForeColor = System.Drawing.Color.Blue
        HB43.ForeColor = System.Drawing.Color.Blue
        WG_NIR.ForeColor = System.Drawing.Color.Blue
        glutematic.ForeColor = System.Drawing.Color.Blue
        handwash.ForeColor = System.Drawing.Color.Blue
        distilledWater.ForeColor = System.Drawing.Color.Blue

    Else
        bin.[ReadOnly] = True
        wheatGrist.[ReadOnly] = True
        HB43S.[ReadOnly] = True
        M_NIR.[ReadOnly] = True
        HB43.[ReadOnly] = True
        WG_NIR.[ReadOnly] = True
        glutematic.[ReadOnly] = True
        handwash.[ReadOnly] = True
        distilledWater.[ReadOnly] = True

        bin.ForeColor = System.Drawing.Color.Black
        wheatGrist.ForeColor = System.Drawing.Color.Black
        HB43S.ForeColor = System.Drawing.Color.Black
        M_NIR.ForeColor = System.Drawing.Color.Black
        HB43.ForeColor = System.Drawing.Color.Black
        WG_NIR.ForeColor = System.Drawing.Color.Black
        glutematic.ForeColor = System.Drawing.Color.Black
        handwash.ForeColor = System.Drawing.Color.Black
        distilledWater.ForeColor = System.Drawing.Color.Black

    End If
End Sub
Private Sub UncheckAll()
    For Each row As GridViewRow In GridView1.Rows
        Dim chkUncheck As CheckBox = DirectCast(row.FindControl("chkSelect"), CheckBox)

        Dim bin As TextBox = DirectCast(row.FindControl("txtBin"), TextBox)
        Dim wheatGrist As TextBox = DirectCast(row.FindControl("txtWheatGrist"), TextBox)
        Dim HB43S As TextBox = DirectCast(row.FindControl("txtHB43S"), TextBox)
        Dim M_NIR As TextBox = DirectCast(row.FindControl("txtNIR"), TextBox)
        Dim HB43 As TextBox = DirectCast(row.FindControl("txtHB43"), TextBox)
        Dim WG_NIR As TextBox = DirectCast(row.FindControl("txtWGNIR"), TextBox)
        Dim glutematic As TextBox = DirectCast(row.FindControl("txtGlutematic"), TextBox)
        Dim handwash As TextBox = DirectCast(row.FindControl("txtHandwash"), TextBox)
        Dim distilledWater As TextBox = DirectCast(row.FindControl("txtDistilled"), TextBox)

        chkUncheck.Checked = False

        bin.ForeColor = System.Drawing.Color.Black
        wheatGrist.ForeColor = System.Drawing.Color.Black
        HB43S.ForeColor = System.Drawing.Color.Black
        M_NIR.ForeColor = System.Drawing.Color.Black
        HB43.ForeColor = System.Drawing.Color.Black
        WG_NIR.ForeColor = System.Drawing.Color.Black
        glutematic.ForeColor = System.Drawing.Color.Black
        handwash.ForeColor = System.Drawing.Color.Black
        distilledWater.ForeColor = System.Drawing.Color.Black

    Next
End Sub
Protected Sub btnDelete_Click(ByVal sender As Object, ByVal e As EventArgs)
    'Create String Collection to store IDs of 
    'records to be deleted 
    Dim idCollection As New StringCollection()
    Dim strID As Integer

    'Loop through GridView rows to find checked rows 
    For i As Integer = 0 To GridView1.Rows.Count - 1
        Dim chkDelete As CheckBox = DirectCast(GridView1.Rows(i).Cells(0).FindControl("chkSelect"), CheckBox)

        If chkDelete IsNot Nothing Then
            If chkDelete.Checked Then
                strID = GridView1.Rows(i).Cells(1).Text
                idCollection.Add(strID)
            End If
        End If

    Next
    If idCollection.Count > 0 Then
        'Call the method to Delete records 
        DeleteRecords(idCollection)

        ' rebind the GridView
        GridView1.DataBind()
        'Else
        'lblMessage.Text = "Please select any row to delete"
    End If

End Sub

Private Sub DeleteRecords(ByVal idCollection As StringCollection)
    'Create sql Connection and Sql Command
    Dim cnnOLEDB As New OleDbConnection(strConnectionString)
    Dim cmd As New OleDbCommand
    Dim IDs As Integer

    For Each id As Integer In idCollection
        IDs += id & ","
    Next
    Try
        Dim test As Integer = IDs
        Dim sql As String = "DELETE FROM [1BK] WHERE [sampleID] in (" & test & ")"
        Dim ANS As Integer
        ANS = MsgBox("Are you sure want to delete selected record ?" & vbCrLf & vbCrLf, MsgBoxStyle.YesNo)
        If ANS = vbYes Then
            cmd.CommandType = CommandType.Text
            cmd.CommandText = sql
            cmd.Connection = cnnOLEDB
            cnnOLEDB.Open()
            cmd.ExecuteNonQuery()
        End If
        ANS = 0
    Catch ex As Exception
        Dim errorMsg As String = "Error in Deletion"
        errorMsg += ex.Message
        Throw New Exception(errorMsg)
    Finally
        cnnOLEDB.Close()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:20:15.863

在 deleterecords 中这样做：

```
Dim test as String = String.Join(",", idCollection) 
```

而不是这个

```
For Each id As Integer In idCollection     
    IDs += id & ","  
Next 
```

然后我不完全确定这条线实际上下载了新的数据库值：

```
 GridView1.DataBind() 
```

您绝对必须再次下载您的数据库值。不只是再次将您的表格绑定到gridview。

# json - 在 JSON 文件中使用短键对性能的影响

> ID：12966871
> 
> 赞同：2
> 
> 时间：2012-10-19T03:16:07.537
> 
> 标签：json, performance, web-applications, web

在**Web 服务器应用程序**中，我使用了一些 JSON 配置文件。有谁知道，如果使用较短的密钥，性能优势是什么？

例如，一个长键是“country_code”，它的值是一个国家代码，一个 int。较短的键是“cc”。

**我们可以从使用较短的密钥中获得多少性能优势？考虑网络带宽、内存...等**

谢谢！

# algorithm - 遍历从 (0,0,0) 到 (5,5,5) 的所有路径

> ID：12966872
> 
> 赞同：3
> 
> 时间：2012-10-19T03:16:08.500
> 
> 标签：algorithm, iteration, sequential

我确信我想要实现的目标有一个名称或方法，但正如您可以从这个问题的有点模糊的标题中判断的那样，我只是不知道如何措辞，因此在搜索时遇到了麻烦。

这是我想做的事情：

我有一个包含几种可能状态的项目列表。为简单起见，我们称项目 A、B 和 C 以及状态 0 到 5。

每个项目的状态在每个步骤中只能增加 1。每一步只能增加一项。在每个场景 A 开始时，B 和 C 都是 0。在每个场景 A 结束时，B 和 C 都是 5。

这将是最明显场景的一个示例。所有场景都将具有相同数量的步骤。

```
A 0 1 2 3 4 5 5 5 5 5 5 5 5 5 5 5 
B 0 0 0 0 0 0 1 2 3 4 5 5 5 5 5 5 
C 0 0 0 0 0 0 0 0 0 0 0 1 2 3 4 5 
```

我想遍历每一个可能的“决策路径”。我在每一步都有计算要执行，我有每个场景的值要比较以确定哪个更好。以防万一还不清楚，这是一个完全随机场景的示例，但最终将使用所需的算法运行。

```
A 0 0 0 0 0 0 1 1 2 3 4 5 5 5 5 5
B 0 1 2 2 3 3 3 4 4 4 4 4 4 4 5 5
C 0 0 0 1 1 2 2 2 2 2 2 2 3 4 4 5 
```

这类任务有名称或通用程序吗？不一定要寻找直接答案（将是一个奖励），但至少需要一些关键词，这样我才能更有效地搜索！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:15:11.277

`0`用 5 、 5`1`和 5枚举所有可能的长度为 15 的单词`2`。 `0`表示增加`A`,`1`表示增加`B`,`2`表示增加`C`.

```
#include<algorithm>
#include<vector>
#include<iostream>
using namespace std;
int main(){
  int n=5;
  vector<int> u(3),v(3*n);
  for (int i = 0; i < n; i++){
    v[i] = 0; v[i+n] = 1; v[i+2*n] = 2;
  }
  do
  {
    fill(u.begin(),u.end(),0);
    for (int j = 0; j < 3*n; j++){
      for (int i = 0; i < 3; i++)
        cout << u[i] << "\t";
      cout << endl;
      u[v[j]]++;
    }
    for (int i = 0; i < 3; i++)
      cout << u[i] << "\t";
    cout << endl;
    cout << endl;
  } while (next_permutation(v.begin(),v.end()));
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:14:57.270

您可以将 2D 案例视为二项式系数 - 想象一个矩形，您试图从左下角到右上角而不向左或向下。您可以通过[Pascal's triangle](http://en.wikipedia.org/wiki/Pascal%27s_triangle)实现计数。这是一张来自维基百科的图片：

![帕斯卡三角](../Images/b4b9c74e54213667fa6f2fc858ba820e.png)

事实上，这可以推广到使用[Pascal 单纯形的](http://en.wikipedia.org/wiki/Pascal%27s_simplex)多项式。

您可以递归地解决这个问题（在伪代码中）：

```
go( a: List, list: List ) = {
  if (a.forall(_ == 0)) {
    // do magic on list
  } else {
    a.zip(1 to a.size).foreach( (number,index) => if (number > 0 ) {
      go(a.patch(index-1,Seq(number-1),1), list ++ index)
    })
  }
} 
```

# mysql - MySQL：为什么在 MySQL 中忽略 NULL？

> ID：12966873
> 
> 赞同：0
> 
> 时间：2012-10-19T03:16:19.557
> 
> 标签：mysql, sql, database, relational-database

我有一个表，其中包含列 field_value 的以下可能值。

但是当我尝试选择所有不是 'CB' 的值时，查询结果也会忽略所有 NULL 值。

为什么会这样？

```
mysql> select distinct field_value from TableName;
+--------------+
| field_value  |
+--------------+
| S            |
| NULL         |
| CA           |
| CB           |
+--------------+
4 rows in set (6.32 sec)

mysql> select distinct field_value from TableName where field_value!='CB';
+--------------+
| field_value  |
+--------------+
| S            |
| CA           |
+--------------+
2 rows in set (0.15 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:18:12.543

因为`NULL`是未知的，`unknown`并不意味着它不等于`CB`。

如果要返回空值，请在查询中添加条件（ *IS NULL ），*

```
SELECT ...
FROM   ...
where field_value != 'CB' OR field_value IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:18:35.560

那是因为任何与`NULL`也产生的比较`NULL`（即不真实也不虚假）。

特殊运算符`IS NULL`and`IS NOT NULL`用于对 . 进行有用的比较`NULL`。

因此，您的查询应该是：

```
... WHERE field_value!='CB' OR field_value IS NULL; 
```

另请参阅：[使用 NULL 值](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T02:06:21.340

NULL 不等于任何值。NULL 不等于任何值。NULL 甚至不等于 NULL。不信就试试。

```
select * from anytable
where NULL = NULL
or not NULL = NULL
or NULL != NULL
or not NULL != NULL 
```

您应该检索到零行。所有四个条件的结果都是未知的。 *未知*与 TRUE 不同。 *未知*与 FALSE 不同。如果这对您来说听起来很乱，那么您可能已经开始理解了。

最好避免在 WHERE 条件下使用可为空的列，除非您准备好仔细考虑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T03:38:40.093

实际上 NULL 的意思是“一个缺失的未知值”

[检查此页面](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

# javascript - 使用 jquery 将外部网页添加到 div

> ID：12966876
> 
> 赞同：0
> 
> 时间：2012-10-19T03:16:43.870
> 
> 标签：javascript, jquery, ajax, load, append

我有以下代码来加载 GIF 而 ajax 需要 a`div`并附加一些内容：

```
var loader = '<img id="loader" src="loading.gif"/>';

$(loader).appendTo('#container').load(function() {
    $('#container').find('#loader').delay(3000).fadeOut(function() {
        $('#container').append('content')
    })
}); 
```

如何修改此代码，而不是附加`'content'`，而是附加`div`来自外部网页的 a。

例如 GIF 将淡出，容器内部`div`将是`www.somesite.com #somediv`.

谢谢，
凯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:20:42.370

[由于同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您不能这样做。

但是，您可以使用 an[`iframe`](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)将整个页面的一部分嵌入到您的页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:34:29.210

使用Yahoo!的[YUL 库](http://developer.yahoo.com/yql/)可以实现跨域 XHR 。它基本上使用服务器为您获取内容以绕过Hamish[提到](https://stackoverflow.com/users/471800/hamish)的[策略。](http://en.wikipedia.org/wiki/Same_origin_policy)

更多信息，请参阅：[jQuery 跨域 Ajax 指南](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)

# actionscript-3 - AS3 沿预定义曲线移动精灵

> ID：12966878
> 
> 赞同：0
> 
> 时间：2012-10-19T03:16:46.493
> 
> 标签：actionscript-3, flash, draggable, flash-cs5, sprite

我想让一个圆（：Sprite）沿着预先绘制的曲线移动。使用图形库 a 绘制了 350 度曲线，我希望我的擦洗器从 0 度一直移动到 350 度而不离开路径。我从 senocular.com 找到了一个很棒的课程，但问题是我仅限于我可以使用的曲线长度，因为为了让它正常工作，我必须将自己限制在最大 90 度的曲线上. 我还发现了另一个让精灵沿着圆圈移动的类，但问题是一旦我达到了完整的循环。精灵回到位置 0。我只希望精灵从 0 到 350 并返回，我不希望它从 350 到 0 跳跃。有什么类或方法可以绘制曲线并将圆附加到那个曲线？这里有一些照片：
![这是 senocular.com](../Images/ac2c6bfd4f123252b55de2ea78f029fc.png) ![这就是我想要的](../Images/743f83435f40a678b3a98ab15b21f373.png)

# java - Java从日期输入中获取即将到来的日期

> ID：12966882
> 
> 赞同：0
> 
> 时间：2012-10-19T03:17:28.027
> 
> 标签：java, date, simpledateformat

我有以下输入

```
 String day = "Tuesday";
    SimpleDateFormat dayFormat = new SimpleDateFormat("E");
    Date date1 = dayFormat.parse(day); 
```

今天的日期是 2012-10-19。通过输入这一天，我想取回下一个即将到来的日期和时间。如何将星期二转换为字符串，如下所示：2012-10-20 00:00？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:34:41.100

Use the `Calendar` API as follows -

```
 String day = "Tue";
    SimpleDateFormat dayFormat = new SimpleDateFormat("EEE");

    Date date1 = dayFormat.parse(day);        
    Calendar cal1 = Calendar.getInstance();
    cal1.setTime(date1); 

    //just keep adding a day to current date until the day of week is same
    Calendar cal = Calendar.getInstance();        
    while(cal.get(Calendar.DAY_OF_WEEK) != cal1.get(Calendar.DAY_OF_WEEK)) {
        cal.add(Calendar.DAY_OF_MONTH, 1);
    }

    System.out.println(cal.getTime()); 
```

Output:

> Tue Oct 23 22:34:25 CDT 2012

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:22:39.867

`Calendar`这是一个关于如何使用课程获得下周一的示例。

```
Calendar now = Calendar.getInstance();  
int weekday = now.get(Calendar.DAY_OF_WEEK);  
if (weekday != Calendar.MONDAY)  
{  
    // calculate how much to add  
    // the 2 is the difference between Saturday and Monday  
    int days = (Calendar.SATURDAY - weekday + 2) % 7;  
    now.add(Calendar.DAY_OF_YEAR, days);  
}  
// now is the date you want  
Date date = now.getTime();  
String format = new SimpleDateFormat(...).format(date); 
```

来自： http: [//www.coderanch.com/t/385117/java/java/date-next-Monday](http://www.coderanch.com/t/385117/java/java/date-next-Monday)

更多：[http ://www.java2s.com/Code/Java/Data-Type/GetNextMonday.htm](http://www.java2s.com/Code/Java/Data-Type/GetNextMonday.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:23:23.687

您可以[`Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)用于简单的日期操作。例如：

```
Calendar calendar = Calendar.getInstance(); //gets a localized Calendar instance
calendar.setTime(date1);                    //sets the Calendar time to your date
calendar.add(Calendar.DATE, 1);             //adds 1 day
Date date2 = calendar.getTime();            //gets the resulting date 
```

# visual-studio-2010 - TFS 缺少工作项类型更改请求

> ID：12966884
> 
> 赞同：2
> 
> 时间：2012-10-19T03:17:36.900
> 
> 标签：visual-studio-2010, tfs-power-tools

我刚刚在一家新公司开始工作，并且一直在对他们现有的 Team Foundation Server 2010 进行一些改进。但是由于某种原因，当我使用电动工具选择工作项类型时，没有更改请求工作项。而且您无法从新的工作项菜单中选择此类型。就像有人从服务器中删除了该类型。有什么方法可以让我恢复这种类型，或者在网络上的某个地方我可以让 xml 使用电动工具重新导入类型？

**TFS 版本是 2010**

提前感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:16:11.647

它可能是用不同于你习惯的模板制作的。

您需要下载具有更改请求类型 ( [CMMI](http://msdn.microsoft.com/en-us/library/ee332482.aspx) )[的项目模板。](http://msdn.microsoft.com/en-us/library/ms181511%28VS.80%29.aspx)然后使用[witadmin导入工作类型](http://msdn.microsoft.com/en-us/library/ms404856.aspx)

# android - 如何在平板电脑 Android 4.0.3 上获取设备 ID，如 android-xxx

> ID：12966888
> 
> 赞同：1
> 
> 时间：2012-10-19T03:18:28.403
> 
> 标签：android

我在 ABOUT PHONE 中的设备 ID 是`unknown`，所以我无法通过 API 获取 ID`android.os.Build.SERIAL;`

我试图将 Mac 地址作为设备 ID，但是当我关闭 wifi 适配器时它不起作用。

我知道有一个设备 ID，例如`android-xxx`当我将设备连接到无线网络时，我怎样才能获得该设备 ID？？？

请帮助我：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:02:22.497

```
 String deviceId = Secure.getString(this.getContentResolver(),
                Secure.ANDROID_ID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:31:35.830

```
TelephonyManager tManager = (TelephonyManager)myActivity.getSystemService(Context.TELEPHONY_SERVICE);
String uid = tManager.getDeviceId(); 
```

您将需要此权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

虽然我不确定你为什么需要它，但我还是建议你先阅读这个 [http://android-developers.blogspot.in/2011/03/identifying-app-installations.html](http://android-developers.blogspot.in/2011/03/identifying-app-installations.html)

# onedrive - 删除 Skydrive 勾号图标

> ID：12966891
> 
> 赞同：1
> 
> 时间：2012-10-19T03:18:39.537
> 
> 标签：onedrive

我正在使用 Skydrive，当文件同步时，它会在文件图标的一角显示一个绿色的小勾号。这对我来说非常恼火。

有没有办法去掉那个勾？（在 Skydrive 应用程序本身中没有这样做的选项）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:28:23.727

试试这个：

1.  运行 regedit，然后导航到 `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\ShellIconOverlayIdentifiers`
2.  删除*密钥`SkyDrive1`（如果有多个 SkyDrive# 密钥，请尝试将它们一一删除。）
3.  重新启动 Windows，或使用任务管理器结束并重新启动 Explorer.exe

**建议您在删除之前备份密钥，以便在需要时可以在以后恢复。为此，请右键单击`SkyDrive1`并选择导出。*

# java - 从像 AKKA 这样的 Actor Model 框架调用基于线程的 API

> ID：12966895
> 
> 赞同：0
> 
> 时间：2012-10-19T03:19:45.353
> 
> 标签：java, sockets, playframework, socket.io, akka

我有一个使用线程的 3rd 方 API。我正在使用 Play 框架进行编码，并希望利用 Akka 来实现 ASYC 功能并实现实时结果。但我不确定将 Akka 与使用 Threads 的 API 集成是否有意义。考虑以下场景：

1.  使用 Socket 查询 3rd 方 API 以使用股票代码返回股票价格
2.  第 3 方接收消息，使用 Threads 执行命令并执行它需要执行的任何其他操作。我并不真正担心它是如何做事的。只是指出它利用线程。
3.  3rd 方 API 开始吐出数据
4.  处理数据返回。如果数据与给定的用例匹配，则将其保存在数据库中并将其推送到浏览器。

您能否分享一下 Akka 在这个用例中可以在哪里创造价值？谢谢一堆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:02:04.670

Akka 是为异步处理而设计的。因此，只有通过异步非阻塞 IO 完成与 3rd 方 API 的通信时才适用。这会将您的应用程序与第 3 方的任何线程细节隔离开来。

**更新**

我认为这个问题在 Play 上！版本 1.x，因为[Play 2.0 已经使用内部 Akka Actor 系统来处理请求处理](http://www.playframework.org/documentation/2.0.4/AkkaCore)。

你应该已经[知道](http://www.playframework.org/documentation/1.2/asynchronous)了

> Play 旨在处理非常短的请求。它使用固定的线程池来处理由 HTTP 连接器排队的请求。为了获得最佳结果，线程池应尽可能小。我们通常使用处理器的 nb + 1 的最佳值来设置默认池大小。

因此，对于任何远程（或任何可能持久的）通信，您必须以异步[非阻塞](https://stackoverflow.com/questions/1241429/blocking-io-vs-non-blocking-io-looking-for-good-articles)方式正确执行，或者在单独的线程中执行，以防止 play 的微小线程池在负载下耗尽。无论您的 3rd 方 API 是否使用锁。

另请注意，Play[对异步处理有一些内置支持](http://www.playframework.org/documentation/1.2/asynchronous)。在这种情况下，它可以[用来代替 akka 。](https://stackoverflow.com/questions/11221119/using-akka-to-make-web-service-calls-from-play-app)只需使用异步套接字 io 库返回`Future`，将其转换为`Promise`并`await()`为它。类似于它在 Play 的[Web 服务客户端](http://www.playframework.org/documentation/1.2.5/libs#WebServiceclient)中的完成方式。

[关于 java socket nio 的](https://stackoverflow.com/questions/2122263/java-socket-listener-using-java-nio)相关问题。

此外，我建议缓存获得的股票报价以进一步提高性能。[Guava Cache](http://code.google.com/p/guava-libraries/wiki/CachesExplained)是一个不错的选择。在刷新模式下，即使使用同步 API，它也可用于执行更新报价的定期后台请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T11:31:29.967

在我的项目中，我经常不得不处理阻塞遗留代码、数据库调用、旧阻塞网络通信等。在这些情况下，我隔离阻塞部分并在单独的线程中执行它。此线程由 AKKA 演员控制。

所以我得到的是对并发的完全控制。我只需要限制这些演员的数量。另一个胜利是能够停止阻塞操作，如果它处理中断。

最后，这是最重要的特点，我受益于 AKKA 演员的容错能力。我能够轻松地停止或重新启动子组件、重置外部资源等。

因此，Akka 不仅涉及异步处理，而且对于容错系统尤其重要。

# java - 理解抽象类和方法并正确覆盖它们

> ID：12966899
> 
> 赞同：0
> 
> 时间：2012-10-19T03:20:20.303
> 
> 标签：java, inheritance, abstract-class, abstract-methods

我有一个名为 Answer 的抽象类。它需要是抽象的，因为假设可以有许多不同类型的答案，例如字符串答案、视频答案、音频答案等。

```
public abstract class Answer {

abstract public void display();

abstract public Answer getAnswer();

abstract public boolean isEqual();

} 
```

现在在 StringAnswer 中，我想重写这些方法。

```
public class StringAnswer extends Answer
{
String text;

public StringAnswer(String text)
{
    this.text = text;
}

@Override
public void display()
{
    System.out.println(text);
}

@Override
**public String getAnswer()
{
    return text;
}**

@Override
public boolean isEqual()
{
    // TODO Auto-generated method stub
    return false;
}
} 
```

getAnswer 给我带来了问题，因为我试图返回一个字符串，但它期待一个答案。在抽象意义上，我想返回一个答案。但是，StringAnswer 的内容显然会是一个字符串。

那么，当它期待一个答案时，我如何将它作为字符串返回？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T03:22:55.297

你没有。你修复你的设计。

我怀疑你可能想要的是类似的东西

```
abstract class Answer<T> {
  public abstract T getAnswer();
}

public class StringAnswer extends Answer<String> {
  public String getAnswer() { ... }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:23:03.510

当你覆盖一个方法时，你有这个规则（来自其他规则）：

*返回类型必须与被覆盖方法中的返回类型相同或子级。*

鉴于此，`String`不会 extends `Answer`，因此您的`getAnswer`覆盖将是错误的。

您有两种方法来修复该方法：

```
//1st way
@Override
public Answer getAnswer() {
    return this;
}

//2nd way
@Override
public StringAnswer getAnswer() {
    return this;
} 
```

你应该选择你的方式（提示：改变我对覆盖方法的实现！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:23:37.067

这就是通用的用途。您可以在此处查看手册：

[http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T03:23:41.667

首先，您需要了解抽象类和接口之间的区别。接口指定类必须实现的属性或方法的列表。这可能更适合您的示例。抽象类指定一些功能，通常带有一些具体的实现，然后是一些类似于接口的抽象方法，必须实现。

由于您没有在基类中添加任何功能，因此我建议使用接口

# javascript - SWF 在 IE9 中不呈现（但在 Chrome/FF 中呈现）

> ID：12966900
> 
> 赞同：1
> 
> 时间：2012-10-19T03:20:37.393
> 
> 标签：javascript, asp.net-mvc-3, flash, swfobject

以下代码**不是**从 IE9 中的 IIS7 托管的远程网页呈现 swf，而是在 Chrome 和 FF 中呈现。

我错过了什么？

文件：[http ://srv.ab.com/page/swftestpage.htm](http://srv.ab.com/page/swftestpage.htm)

```
<script type="text/javascript">

        (function () {

            var object = document.createElement('object');
            object.setAttribute('width', '300');
            object.setAttribute('height', '250');
            object.setAttribute('classid', 'clsid:d27cdb6e-ae6d-11cf-96b8-444553540000');

            var param1 = document.createElement('param');
            param1.setAttribute('name', 'movie');
            param1.setAttribute('value', 'http://srv.ab.com/test.swf');

            var embed = document.createElement('embed');
            embed.setAttribute('src', 'http://srv.ab.com/test.swf');
            embed.setAttribute('width', '300');
            embed.setAttribute('height', '250');

            var param2 = document.createElement('param');
            param2.setAttribute('name', 'wmode');
            param2.setAttribute('value', 'transparent');

            object.appendChild(param1);
            object.appendChild(embed);
            object.appendChild(param2);

            var container = document.getElementById('myDivID');
            while (container.firstChild) { container.removeChild(container.firstChild); }
            container.appendChild(object);
        })();

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:28:55.667

`<object>`标签上的正确属性是`classid`. 你有`clsid`

参考 - [http://www.alistapart.com/articles/flashembedcagematch/](http://www.alistapart.com/articles/flashembedcagematch/)

我会认真地使用[SWFObject 的动态发布](http://code.google.com/p/swfobject/wiki/documentation#How_to_embed_Flash_Player_content_using_SWFObject_dynamic_publis)，而不是在这里重新发明轮子

# java - 正则表达式删除字符串中的最后一个单词+附加字符

> ID：12966904
> 
> 赞同：3
> 
> 时间：2012-10-19T03:21:24.780
> 
> 标签：java, regex

我从服务器获取字符串，我必须使用正则表达式来解析它。

我知道如何使用字符串函数（String.split 等），但不使用正则表达式，这是作业要求。

字符串如下所示：

```
12345 <RECTANGLE> 100 200 300 400 </RECTANGLE> 
```

我必须使用正则表达式使该字符串变为：

```
12345 RECTANGLE 100 200 300 400 
```

所以基本上，我必须删除以下所有字符：“<”、“>”和“/”。我还必须删除最后一个单词，所以我想我什至不必检查“/”，因为删除最后一个单词可能也会删除斜杠。

现在我有：

```
shapeString.replaceAll("[</>]", ""); 
```

它删除了我不需要的字符，但我不知道如何删除最后一个单词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:26:17.723

你可以加

```
str.replaceAll(" [^ ]+$", "") 
```

删除最后一个单词及其前面的空格。

这是[一个带有运行示例的 ideone 链接](http://ideone.com/qOWl3)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T03:30:05.187

您可以使用`replaceAll`或替代地，这个：

```
shapeString = shapeString.substring(0, shapeString.lastIndexOf(' ')); 
```

删除最后一个词。

# android - RadioGroup onCheckedChanged 函数不会触发

> ID：12966907
> 
> 赞同：4
> 
> 时间：2012-10-19T03:22:02.780
> 
> 标签：android, android-widget

我的应用程序会跟踪餐厅服务员的轮班销售情况，以帮助他们制定预算。在显示过去班次的活动中，我在 ListView 下创建了一个 RadioGroup，以便用户可以选择显示午餐、晚餐或两者。

我已经在活动 RadioGroup.onCheckedChangeListener 中实现了，但永远不会调用 onCheckedChanged。我还尝试使用匿名内部类作为侦听器，结果相同。

我试图从这个答案复制/修改代码：[https](https://stackoverflow.com/a/9595528) ://stackoverflow.com/a/9595528 ...但是当我添加`@Override`到回调函数时，Eclipse编译器给了我一个错误（不是警告），该方法必须覆盖一个超类，快速修复是删除覆盖。

我很确定签名是匹配的，因为它们是使用 Eclipse 的自动完成和实现方法工具制作的。然后我按照说明将我的 java 编译器从 1.5 移动到 1.6，上面列出的行为似乎都没有改变。

这是我认为相关的代码：

```
public class DataActivity extends ListActivity implements OnCheckedChangeListener{
    RadioButton rbBoth;
    RadioButton rbDinnerOnly;
    RadioButton rbLunchOnly;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.database);
        // ...
        final RadioGroup rgGroup = (RadioGroup)findViewById(R.id.DataRadioGroup);
        rbBoth = (RadioButton)findViewById(R.id.RadioBoth);
        rbDinnerOnly = (RadioButton)findViewById(R.id.RadioDinnerOnly);
        rbLunchOnly = (RadioButton)findViewById(R.id.RadioLunchOnly);
        rgGroup.setOnCheckedChangeListener(this);
        populateAllShifts();
    }

    // ...

    public void onCheckedChanged(RadioGroup group, int checkedId) {
        rbLunchOnly.setText("Click!");
        Toast.makeText(getApplicationContext(), "Lunch Only", Toast.LENGTH_LONG).show();
        if(group.getCheckedRadioButtonId() == R.id.RadioBoth){
            populateAllShifts();
            return;
        }
        if(group.getCheckedRadioButtonId() == R.id.RadioLunchOnly){
            populatLunchShifts();
            return;
        }
        if(group.getCheckedRadioButtonId() == R.id.RadioDinnerOnly){
            populateDinnerShifts();
            return;
        }
    }

    // ...

} 
```

这个类中有一个带有自定义适配器的 ListView，但是如果我的理解和我的 XML 是正确的，那么 RadioGroup 应该在列表之外：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llDataLayout"
    android:weightSum="5"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:orientation="vertical">

    <ListView android:layout_weight="4"
        android:layout_width="fill_parent"
        android:id="@android:id/list"
        android:layout_height="wrap_content">
    </ListView>

    <RadioGroup 
        android:layout_weight="1"
        android:id="@+id/DataRadioGroup"
        android:orientation="horizontal"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent">

        <RadioButton android:text="Lunch and Dinner"
            android:textSize="10dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/RadioBoth"/>
        <RadioButton android:text="Dinner Only"
            android:textSize="10dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/RadioDinnerOnly"/>
        <RadioButton android:text="Lunch Only"
            android:textSize="10dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/RadioLunchOnly"/>

    </RadioGroup>

</LinearLayout> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:47:05.457

您已经`checkedId`将新选中的单选按钮的唯一标识符作为参数。

```
public void onCheckedChanged(RadioGroup group, int checkedId) {
    rbLunchOnly.setText("Click!");
    Toast.makeText(getApplicationContext(), "Lunch Only", Toast.LENGTH_LONG).show();

    switch(checkedId){
    case R.id.RadioBoth :
        populateAllShifts();
        break;

    //--other cases---

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:19:28.483

发现了问题，从我在问题中提供的信息中看不到答案。问题很棘手。

这从我的第一个项目开始，几个月前在尝试解决数据库问题时，我在 onCreate() 中使用几乎相同的代码额外覆盖了 onStart() 和 onRestart()。onCreate 随着时间的推移发生了变化，而那些方法没有。一旦我删除它们，代码就可以完美运行。

我没有在问题中展示这些方法。对不起！

感谢大家的帮助！我现在该怎么办？删除问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T03:29:47.577

你应该使用这个方法：

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
{
    if(isChecked == true)
    {           
        if(buttonView == radioA)            
            tvInfo.setText("A");
        else if(buttonView == radioB)               
            tvInfo.setText("B");        
        else if(buttonView == radioC)           
            tvInfo.setText("C");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T05:45:54.373

它应该可以工作..在你的 xml 中。你可以`android:clickable="true"` 在java中为单选按钮提供可点击的选项。

```
public void onCheckedChanged(RadioGroup group, int checkedId) {
    switch(checkedId){
    case R.id.RadioBoth :
        populateAllShifts();
        break;
case R.id.RadioDinnerOnly:
        populatDinnerShifts();
        break;
    //-----
default:

break;
   } 
```

# angularjs - 无法获取 ng-repeat 分页的项目数

> ID：12966908
> 
> 赞同：0
> 
> 时间：2012-10-19T03:22:08.277
> 
> 标签：angularjs

我正在尝试在我的`ng-repeat`模板中实现分页，并且我正在使用我在[如何在 AngularJS 中进行分页？](https://stackoverflow.com/questions/10816073/how-to-do-paging-in-angularjs)，即这个：http: [//jsfiddle.net/dalcib/J3fjc/](http://jsfiddle.net/dalcib/J3fjc/)。

我的代码与这个 jsfiddle 示例中的代码几乎相同，除了不使用硬编码值，我使用注入服务从返回 json 的 url 获取数据。

我遇到的问题是 jsfiddle 代码中集合的长度始终为零，我不知道为什么，因为我是新手。这是相关代码：

```
...
collection = scope.$eval(rhs),
count = collection.length; 
```

`count`始终为零。看起来代码是在收到服务响应之前执行的。

谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:16:42.490

你不需要使用 $eval()。
$eval 就是取一个字符串，获取这个名字的对象。
您可以做的只是将您在服务或资源中获得的 json 对象关联到范围变量。
在 ng-repeat 你使用他的范围变量。

```
function gridCtrl($scope, sameResource) {
      sameResource.query( function (todos) {
             $scope.todos = todos;
       }
} 
```

在视图中

```
<div ng-repeat="todo in todos"> ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T01:40:24.107

在我看来，您正在寻找 $index。

例如：

```
<html ng-app>
  <head></head>
  <body ng-init="poops = ['fat tony','the turdis','hershey squirts']">
    <div ng-repeat="poo in poops">{{ poo + "/" + $index}}</div>
  </body>
</html> 
```

输出：

```
fat tony/0
the turdis/1
hershey squirts/2 
```

# cakephp - cakephp 和渲染 pdf

> ID：12966909
> 
> 赞同：1
> 
> 时间：2012-10-19T03:22:11.233
> 
> 标签：cakephp, pdf, plugins

大家好，我正在尝试为我的网站安装此插件。我目前正在运行 cake 2.1 并希望单击一个链接并将发票呈现为 pdf 格式，以便用户可以使用它做任何他们想做的事情。目前，如果我转到`http://localhost/pra/invoices/view/1.pdf`它会加载一个与如果我转到相同**的 html 页面**`http://localhost/pra/invoices/view/pdf/1`

这是我在发票控制器中查看操作的代码

```
public function view($id = null) {
    $this->set('title_for_layout', 'Invoices');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='adminpdf';
    $this->pdfConfig = array('engine' => 'CakePdf.WkHtmlToPdf');
            $this->Invoice->id = $id;
            if (!$this->Invoice->exists()) {
                throw new NotFoundException(__('Invalid invoice'));
            }
            $this->pdfConfig = array(
                'orientation' => 'potrait',
                'filename' => 'Invoice_' . $id
            );

            $this->set('invoice', $this->Invoice->read(null, $id));
        //Retrieve Account Id of current User       
        $accountid=$this->Auth->user('account_id');

        //Find all Invoices where $conditions are satisfied
        $invoicedetails=$this->Invoice->find('first', array(
        'conditions' => array('Invoice.id'=>$id)));

        //prints fieldsInvoice details, including invoice and field information
        $invoices=$this->FieldsInvoice->find('all',array(
        'conditions'=>array(
        'invoice_id'=>$id)));

        $itemInvoice=$this->InvoicesItem->find('all',array('conditions'=>array('invoice_id'=>$id)));

        //Set variables
        $this->set('invoicedetails', $invoicedetails);  
        $this->set('invoice', $invoices);   
        $this->set('accountid', $accountid);
        $this->set('itemInvoice', $itemInvoice);

    } 
```

这是该操作的视图文件

```
<div id = "content">
<h2>View Invoice</h2>
                <table id="data">

    <?php

        if($invoicedetails['Invoice']['scheduled']==1)
        {
            $status = 'Scheduled';  
            $fcol = 'Black';
            $bgcol = '#EBD8E8';
            $pay = NULL;
            $dispute = NULL;
        }
        else if($invoicedetails['Invoice']['paid']==1)
        {
            $status = 'Paid';
            $fcol = 'Black';
            $bgcol = '#B9FAEA';
            $pay = NULL;
            $dispute = NULL;
        }
        else if($invoicedetails['Invoice']['sender_id']==$accountid)
        {
            $status = 'Sent';
            $fcol = 'Black';
            $bgcol = '#F8FAC0';
            $pay = NULL;
            $dispute = NULL;
        }
        else if($invoicedetails['Invoice']['receiver_id']==$accountid)
        {
            $status = 'Received';
            $fcol = 'Black';
            $bgcol = '#FAB9B9';
            $pay = $this->Html->link('Pay', array('controller' => 'Invoices','action'=>'pay_admin',$invoicedetails['Invoice']['id'] )) ;
            $dispute = $this->Html->link('Dispute', array('controller' => 'Disputes','action'=>'add_admin',$invoicedetails['Invoice']['id'] ));
        }

    ?>                      
                <tr>
                <th>Sender: </th>
                <td><?php echo $invoicedetails['SenderAccount']['account_name'];?> </td>
                </tr>

                <tr>
                <th>Receiver: </th>
                <td><?php echo $invoicedetails['ReceiverAccount']['account_name'];?> </td>
                </tr>

                <tr>
                <th>Invoice ID: </th>
                <td><?php echo $invoicedetails['Invoice']['id'];?> </td>
                </tr>

                <tr>
                <th>Invoice Date: </th>
                <td><?php echo date('d.m.Y', strtotime($invoicedetails['Invoice']['created'])); ?></td>
                </tr>

                <tr>
                <th>Due Date: </th>
                <td><?php echo date('d.m.Y', strtotime($invoicedetails['Invoice']['expiry_date'])); ?></td>
                </tr>

                <tr>
                <th>Status: </th>
                <td bgcolor='<?php echo $bgcol ?>'><?php echo $status ;?> </td>
                </tr>

                <tr>
                <th>Actions: </th>
                <td><?php echo $pay ?> <?php echo  $dispute ?></td>
                </tr>               

                </table>
                <br>
                <table id="data">
                <tr>
                    <th>Item Name</th>
                    <th>Description</th>
                    <th>Price Per Unit</th>
                    <th>Quantity</th>
                </tr>
                <?php foreach($itemInvoice as $itemInvoices):?>
                <tr>
                <td><?php echo $itemInvoices['Item']['name']; ?></td>
                <td><?php echo $itemInvoices['Item']['description']; ?></td>
                <td>$<?php echo number_format($itemInvoices['Item']['price'], 2, '.', ','); ?></td>
                <td><?php echo $itemInvoices['InvoicesItem']['quantity']; ?></td>
                </tr>
    <?php endforeach; ?>
                </table>

                <br>

                <table id="data">
                <tr>
                    <th>Field Name</th>
                    <th>Entered Value</th>
                </tr>

        <?php foreach($invoice as $invoices):?>
<tr>
<td><?php echo $invoices['Field']['name']; ?> :</td>
<td><?php echo $invoices['FieldsInvoice']['entered_value']; ?></td>
</tr>
    <?php endforeach; ?>

            </table>
            <br><br> 
```

这是我的 app/config/bootstrap.php 中的代码

```
<?php CakePlugin::load('DebugKit');
    CakePlugin::load('CakePdf', array('bootstrap' => true, 'routes' => true));
     CakePlugin::loadAll(); 
```

这是 layouts/pdf/adminpdf.ctp 中的布局文件

```
<?php echo $this->Html->docType('xhtml-trans'); ?>
<html>
<div id = "header" style="background-image:url(<?php echo $this->webroot; ?>img/BannerGradient.jpg);">
<head>

    <title> <?php echo $title_for_layout; ?></title>
    <?php echo $this->Html->css($stylesheet_used); ?>
    <?php echo $this->Html->script(array('jquery','modal.popup')); ?>

    <div id='logo'> <center>
    <?php echo $this->Html->image($image_used, array(
    "alt" => "eBox",
    'url' => array('controller' => 'eboxs', 'action' => 'home_admin'))) ?>
    </center></div> 
    <div id="welcome">

    <?php if($logged_in): ?>
         Logged in as <text6><?php echo $current_user['username']; ?></text6> <?php echo $this->Html->link('My Profile', array('controller'=>'Accounts', 'action'=>'index')); ?> | <?php echo $this->Html->link('Logout', array('controller'=>'users', 'action'=>'logout')); ?> 
    <?php else: ?>
    <?php echo $this->Html->link('Login', array('controller'=>'users', 'action'=>'login')); ?>  

    <?php endif; ?>

    </div>

</head>
</div>
<body>
        <?php echo $this->Session->flash(); ?>
        <?php echo $this->fetch('content'); ?>

</body>
</html> 
```

我在这个目录中也有 WkHtmlToPdf 引擎`C:\Program Files (x86)\wkhtmltopdf`

我有 2 个问题

1）我在views/invoices/views.ctp和views/invoices/pdf/views.ctp中有两个视图，但似乎从invoices/views.ctp中读取了一个，对吗？我的布局文件也发生了同样的事情。

2) 我需要将 cake 引导到我的 WkHtmlToPdf 引擎还是应该找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:46:18.050

### Q1的答案

检查插件所需的路由配置。我以前没有使用过 CakePdf 插件，但从它的声音来看，它需要在“a”路由文件中有以下内容：

```
Router::parseExtensions('pdf'); 
```

更多信息可以在[这里](http://book.cakephp.org/2.0/en/development/routing.html#file-extensions)找到。

### Q2的答案

您是否必须配置 CakePdf 插件才能知道引擎的本地安装位置？

# dllimport - 如何使用 C# 获得可用于 Windows phone 8 项目的 COM 组件

> ID：12966910
> 
> 赞同：1
> 
> 时间：2012-10-19T03:22:12.530
> 
> 标签：dllimport, void-pointers, intptr, windows-phone-8

最近，我开始从事 Windows 手机的开发工作。

我有一个用 C 语言编写的项目，在我的 windows phone 8 解决方案中。我创建了一个动态链接库（DLL）项目，它可以成功构建。在其中，我使用了一个运行时组件项目来将 DLL 的方法提供给 UI(C#) 项目。在方法中，我有一些指针参数，我使用 Intptr 对象将一个 byte[] 对象传递给运行时组件项目。不幸的是，这导致程序崩溃。

如何将指针参数传递给运行时组件项目或 DLL 项目？或许，还有其他方法可以使用 [Dllimort] 方法导入我的 DLL 文件吗？

任何帮助表示赞赏！

PS：我的解决方案结构：

1.  [动态链接库项目(C++)].dll_method(void *para);

2.  [运行时组件项目(C++)].rc_method(Intptr p)

    ```
    {
       dll_method((void*)p);
    } 
    ```

3.  [Windows phone 8 项目(C#)].method()

    ```
    {
       GCHandle g = GCHandle.Alloc(byte[], GCHandleType.Pinned);
       IntPtr p = g.AddrOfPinnedObject();
       rc_method(p);
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:47:54.550

除非您正在执行远程进程通信，否则要从 Windows Phone 应用程序项目 (C#) 调用 Windows Phone 运行时组件 (C++)，您需要做的就是添加本机项目作为参考。

您可以将任何 WinRT 支持的类型作为参数传递。至于回调，你也可以使用事件（如果在同一个进程中），或者传入回调类型（对于 RPC）。

# list - 在指定元素处拆分列表

> ID：12966911
> 
> 赞同：3
> 
> 时间：2012-10-19T03:22:15.840
> 
> 标签：list, split, prolog

我一直在尝试在给定元素处拆分 Prolog。我已经接近了，但我无法获得列表的左侧部分。

```
split(X,[Y|L]) :- split(X,[Y|L],[Y|K],M).
split(_,[],[],[]).
split(X,[Y|L],K,[Y|M]) :- X < Y, split(X,L,K,M).
split(X,[Y|L],[Y|K],M) :- X >= Y, split(X,L,K,M).
split(X,[Y|L],[Y|K],M) :- X = Y, write(Y), write(' '), write(L). 
```

输入：

```
split(2,[1,2,3,4,5]). 
```

回报：

```
2 [3,4,5] 
```

我希望它返回

```
[1,2] [3,4,5]. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:16:54.433

我不完全确定你想在这里做什么。例如，`split(5, [1,2,3,4,5])`应该做什么？就此而言，假设输入列表已排序是否安全？我会这样假设。

您的规则的基本问题`split/2`是您没有任何输出参数。Prolog 的工作方式与大多数编程语言不同；没有这样的东西`return`。起初这感觉像是一个严重的限制，但 Prolog 实际上允许您“返回”任意数量的结果。看看这段代码，在我看来，你对这种理解的理解已经到了一半，因为你有`split/2`which 似乎没有任何 out 参数，但它调用`split/4`了你需要的两个 out 参数。

对于初学者，我会放弃`split/2`并尝试开始`split/4`工作。你所拥有的在那里看起来并不太疯狂：

```
?- split(2, [1,2,3,4,5], X, Y).
X = [1, 2],
Y = [3, 4, 5] .

?- split(5, [1,2,3,4,5], X, Y).
X = [1, 2, 3, 4, 5],
Y = [] .

?- split(1, [1,2,3,4,5], X, Y).
X = [1],
Y = [2, 3, 4, 5] . 
```

这表明您的大多数规则都是正确的。您遇到麻烦的地方是其他解决方案：

```
?- split(2, [1,2,3,4,5], X, Y).
... ;
2 [3,4,5]
X = [1, 2|_G317] ;
false.

?- split(5, [1,2,3,4,5], X, Y).
... ;
5 []
X = [1, 2, 3, 4, 5|_G326] ;
false.

?- split(1, [1,2,3,4,5], X, Y).
... ;
1 [2,3,4,5]
X = [1|_G314]. 
```

您可以从那里的写作中看到，这些额外的解决方案是由您的最后一条规则生成的，`X = Y, write(Y)...`等等。只需删除该规则即可在`split/4`.

继续前进，我认为可能而不是`split/2`您真正想要的是`split/3`一个输出参数，一个列表列表。根据我们目前所拥有的，生成它并不难：

```
split(X, List, [Before, After]) :- split(X, List, Before, After). 
```

运行它，我们看到我们得到了您提到的预期结果：

```
?- split(3, [1,2,3,4,5], X).
X = [[1, 2, 3], [4, 5]] ;
false.

?- split(1, [1,2,3,4,5], X).
X = [[1], [2, 3, 4, 5]] ;
false.

?- split(5, [1,2,3,4,5], X).
X = [[1, 2, 3, 4, 5], []] ;
false. 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:17:51.700

我会这样写，所以如果你需要一些其他用例，你可以“重用”谓词（写入输出流不是我们需要的，大多数时候）

```
split(X, Xs) :-
    split(X, Xs, L, R), format('~w ~w', [L, R]).

split(_, [], [], []).
split(X, [Y|Xs], [], [Y|Xs]) :-
    X < Y.
split(X, [X|Xs], [X], Xs).
split(X, [Y|Xs], [Y|Ls], Rs) :-
    X > Y,
    split(X, Xs, Ls, Rs). 
```

测试

```
?- split(2,[1,2,3,4,5]).
[1,2] [3,4,5]
true ;
false. 
```

# php - 无法读取 csv 中的连字符值

> ID：12966917
> 
> 赞同：0
> 
> 时间：2012-10-19T03:22:58.940
> 
> 标签：php, csv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:08:59.407

如果您的输出编码不是 UTF-8，那么您需要将您的 UTF-8 输入文件转换为您的输出编码。例如，假设您的浏览器输出应该是`ISO-8859-1`（Apache 设置的常见默认值），那么`utf8_decode`会将您的 UTF-8 CSV 数据转换为正确的编码。

```
$lines = file('data.csv');  

foreach($lines as $line_num => $line){
  if($line != ''){

  echo '<pre>';
  print_r(utf8_decode($line));
  echo '</pre>';
} 
```

如果您想要 UTF-8 输出（或者如果您对此感到满意），[`default_charset`](http://www.php.net/manual/en/ini.core.php#ini.default-charset)请尽早在脚本中设置 PHP 设置，以便 PHP 设置正确的 HTTP 标头。

```
ini_set('default_charset','UTF-8'); 
```

# iis - IIS 脚本超时未以编程方式读取值

> ID：12966919
> 
> 赞同：0
> 
> 时间：2012-10-19T03:23:04.570
> 
> 标签：iis, timeout, asp.net-2.0

ASP（经典）页面正在从 SQL Server 表中读取大量记录，这需要一段时间，因此我们需要将脚本超时设置为至少 300 秒或 5 分钟。

问题是当我从 IIS 管理器设置脚本超时值时它工作正常，但是当我尝试以编程方式设置值时它不起作用，这是我正在使用的代码：

```
 <% Server.ScriptTimeout = 300 %> 
```

环境：ASP.Net 2.0 | 视窗 7 | SQL Server 2008 R2

注意：问题与 sql server 查询无关。

是否有任何文件或其他设置导致 IIS 不读取 ScriptTimeout 值？

# python - 计算字母字符串长度并变成真/假语句

> ID：12966920
> 
> 赞同：2
> 
> 时间：2012-10-19T03:23:18.503
> 
> 标签：python, string

关于我的个人项目中存在的问题，我有一个简单的问题。我在 python 中创建了一个挂人游戏，以供娱乐，隐藏的单词最初以以下方法呈现给用户；说这个词是你好，它会是'^^^^^'，因为每个字符都被'^'替换。现在我正在尝试编写一个函数来计算设置字符串中显示的字符数量，所以说我有 a 和 p 在苹果中猜测，我现在有以下视图，'app^^^'，

现在这是我的问题，如果已经显示了超过一半的字符，我想返回一个 true 或 false 布尔语句，所以下面的例子；'app^^^' = true 因为至少显示了 1/2；因此 return = true 但就像'a^^^^^' = false，没有显示 1/2 的字符，

tbh 我没有发布任何东西感觉很糟糕，但我想出了一个如何去做的想法；所以我觉得如果我可以 len(app^^^) 但删除 '^' 的计数，那么如果计数大于没有删除 '^' 的 len(app^^^) 的一半，则返回 true，否则；返回假。我相信它可以工作，但不知道怎么做，再次感谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T03:27:42.317

不计算字母，而是计算`^`字符：

```
s = 'app^^^'

if s.count('^') >= len(s) / 2:
    # Half of the characters are `^`s
else :
    # Less than half ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:33:10.063

实现您提出的解决方案的代码将是：

```
def is_half_revealed(s):
    return len(s.rstrip('^')) / float(len(s)) * 2 >= 1 
```

尽管您应该考虑重组代码，以便存储“显示多少答案”的数据与显示给用户的字符串分开，而不是直接检查该字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:16:19.800

更通用的解决方案

```
def percent_solved(s):
    return 100 - s.count("^") * 100 / len(s)

if percent_solved(s) >= 50:
    ... 
```

# javascript - 如何防止jQuery UI效果触发两次

> ID：12966928
> 
> 赞同：1
> 
> 时间：2012-10-19T03:24:16.423
> 
> 标签：javascript, jquery, jquery-ui, jquery-effects

我正在尝试使用jQuery UI 中的[突出显示效果向用户显示与某些单选按钮选项相对应的说明。](http://docs.jquery.com/UI/Effects/Highlight)但效果会触发两次，即相关页面组件闪烁两次而不是一次。

我看过类似的问题，但它们要么有[不适用于我的案例](https://stackoverflow.com/questions/2423235/jquery-event-triggering-twice-for-no-reason)的解决方案，要么有一个不适用于我的案例的[解决方案](https://stackoverflow.com/questions/10286211/jquery-ui-effect-double-triggers-event)。（或者答案/评论要求提供更多细节或从未给出的示例。）

这是一个带有我的问题的简化版本的[jsfiddle 。](http://jsfiddle.net/aaamos/a7kRB/1/)

如果您单击其中一个单选按钮，则相应的段落会以绿色闪烁两次。从 JS 部分可以看出，上面第二个链接中提出的解决方案（`.off('click').on('click')`用于防止“克隆”效果）似乎没有什么不同。

我正在使用 jQuery 1.8.0 和 jQuery UI 1.8.22（jsfiddle 分别使用 1.7.2 和 1.8.18，并且有同样的问题），同样的事情发生在 Opera、Chrome 和 Firefox 上。

我该如何解决这个问题并且效果只执行一次？如果有一个解决方法，很高兴使用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:32:49.210

问题是触发了 2 个点击事件，一次用于`label`，一次用于`input`. 这是因为点击标签“触发”点击输入。更改您的选择器以防止这种情况发生：

```
 $('#labelChoice1 input').click(function(e) {
        highlightDiv(1);
    });
    $('#labelChoice2 input').click(function(e) {
        highlightDiv(2);
    }); 
```

这是[更新的小提琴](http://jsfiddle.net/a7kRB/2/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:38:49.533

更可扩展的版本可能如下所示：

```
function highlightDiv(index) {
    $('p#explanation' + index).effect("highlight", {color: '#00ff00'}, 1000);
}

$(':radio').each(function(i) {
    $(this).click(function() {
        // zero-based index
        highlightDiv(i + 1);      
    });
});
​ 
```

**[http://jsfiddle.net/a7kRB/5/](http://jsfiddle.net/a7kRB/5/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:45:08.040

这似乎工作得很好

```
$('#labelChoice2').on('click', '#choice2', function() {
    highlightDiv(2);
}); 
```

第二个参数基本上只是说明该方法应该应用于#labelChoice2 的哪个子子项，在jsfiddle上尝试表明该解决方案有效

# javascript - jQuery动画函数行为不端

> ID：12966929
> 
> 赞同：1
> 
> 时间：2012-10-19T03:24:26.193
> 
> 标签：javascript, jquery, html, css, positioning

我正在尝试使用 jQuery 创建一个侧边菜单，其中 div`sideBarMinified`将被隐藏并悬停并显示`sideBar`. 鼠标移出时，`sideBar`将被隐藏并`sideBarMinified`显示。

这是我所拥有的：

HTML：

```
<div class="sideBarMinified">
    <div class="topClear">&nbsp;</div>
    <img src="images/miniLogo.png">
</div>
<div class="sideBar">
    <div class="topClearBig">&nbsp;</div>
    <img src="images/logo.png">
  <div class="menuClear"></div>
        <a href="#">Sample</a>
</div> 
```

JS：

```
$(document).ready(function() {
    $(".sideBar").hide();
    $.backstretch(["images/cover.jpg"],{fade:2000});
    $(".sideBarMinified").mouseover(function(){
        $(".sideBar").show();
        $(".sideBarMinified").animate({left: "-=60px"}, 0 );
        $(".sideBar").animate({left: "+=272px"}, 500 );
    });
    $(".sideBar").mouseout(function() {
        $(".sideBar").animate({left: "-=272px"}, 500 );
        $(".sideBarMinified").animate({left: "+=60px"}, 700 );
    });
}); 
```

CSS：

```
div.sideBarMinified {
    position:absolute;
    left:0px;
    width:20px;
    height:100%;
    background-color:rgba(208,198,168,0.9);
    border-right:1px solid #333333;
    padding:0 15px 0 15px;
    z-index:999;
}
div.sideBar {
    position:absolute;
    left:-272px;
    width:272px;
    height:100%;
    background-color:rgba(208,198,168,0.9);
    padding:0 2px 0 45px;
    z-index:500;
} 
```

问题是当我将鼠标悬停在`<a>`标签上时，div`sideBar`被隐藏并且 div`sideBarMinified`向左移动。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:25:40.090

您的问题是由于.sidebar 上使用的硬编码宽度和负边距。标准 CSS box-model ( `content-box`) 将填充添加到宽度，从而产生比您预期的更宽的框。

```
div.sideBar {
    left: -319px;
    width: 272px; <!-- width is actually 319px when including padding -->
    padding: 0 2px 0 45px;
}​ 
```

我已经在 Fiddle 中更新了您的代码，请检查一下，如果您有任何问题，请告诉我。

**[http://jsfiddle.net/Hm7zB/1/](http://jsfiddle.net/Hm7zB/1/)**

我建议`box-sizing: border-box;`通过将宽度定义为包括填充来阅读哪些行为更合乎逻辑：http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:55:24.397

我认为这段代码应该适合你。

```
$(document).ready(function() {
$(".sideBar").hide();
$.backstretch(["images/cover.jpg"], {
    fade: 2000
});
$(".sideBarMinified").mouseover(function() {
    $(".sideBar").show();
    $(".sideBarMinified").animate({
        left: "-=60px"
    }, 0);
    $(".sideBar").animate({
        left: "+=272px"
    }, 500);

});
$(".sideBar").mouseleave(function() {

    $(".sideBar").animate({
        left: "-=272px"
    }, 500);
    $(".sideBarMinified").animate({
        left: "+=60px"
    }, 700);
}); });​ 
```

# c# - 使用 Linq 获取帖子的投票计数

> ID：12966932
> 
> 赞同：1
> 
> 时间：2012-10-19T03:24:49.953
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

这是我的数据库架构：

```
create table Post
(
    PostId int primary key identity,
    ImageUrl nvarchar(1024) not null,
    [Description] nvarchar(256) not null,
    UserId int foreign key references [User](UserId),
    DateOfPost datetime not null,
    Score int
)

create table Vote
(
    VoteId int primary key identity,
    UserId int foreign key references [User](UserId),
    PostId int foreign key references Post(PostId),
    VoteDirection bit not null,
    DateOfVote datetime not null
) 
```

基本上，我想按`[VoteDirection == true] - [VoteDirection == false]`. 所以 20 人投“真”，5 人投“假”，用于排序的临时分数为 15。

还有一种方法可以使用 DateOfVote 参数选择日期范围吗？

这是我尝试过的：

```
 // www.foo.com/top/today
    public ActionResult Today()
    {
        var posts = postRepository.FindAllPosts().Where(x => x.DateOfPost == DateTime.Today)
                                                 .OrderByDescending(x => x.Votes.Where(c => c.VoteDirection == true) - x.Votes.Where(c => c.VoteDirection == false));
        return View(posts);
    } 
```

我收到错误：

> 错误 2 运算符“-”不能应用于“System.Collections.Generic.IEnumerable”和“System.Collections.Generic.IEnumerable”类型的操作数

这是可以理解的，它们都是集合而不是实际的整数。但它应该说明我正在尝试做的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T03:30:09.497

只需使用`Count`：

```
.OrderByDescending(x => 
    x.Votes.Count(c => c.VoteDirection) - x.Votes.Count(c => !c.VoteDirection)); 
```

# android - Android：具有文本编辑功能的作曲家屏幕，如粗体更改字体大小

> ID：12966934
> 
> 赞同：1
> 
> 时间：2012-10-19T03:25:17.397
> 
> 标签：android

任何人都可以告诉我如何创建具有某些特定要求的作曲家屏幕，例如在我的作曲家屏幕中，我想为键入的文本添加粗体、下划线和斜体等功能。

android中作曲家屏幕中文本的字体更改（颜色和大小）。我想以 HTML 格式保存作曲家。

如果有任何机构，请给我示例代码？

谢谢。

# sql - 在与 CASE 一起使用 THEN 语句后返回超过 1 个值

> ID：12966937
> 
> 赞同：2
> 
> 时间：2012-10-19T03:26:03.627
> 
> 标签：sql, oracle, set, case

以下是我的查询：

```
UPDATE DSOPI_PERSON_ADDR_RULE ADDR
SET ADDR.DEPT_NAME =
  CASE
    WHEN regexp_like (UPPER(addr.src_address_line1),     'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
    AND ADDR.ORG_NAME IS NOT NULL
    THEN ADDR.SRC_ADDRESS_LINE1
    WHEN regexp_like (UPPER(addr.src_address_line2), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
    AND ADDR.ORG_NAME IS NOT NULL
    THEN ADDR.SRC_ADDRESS_LINE2
    WHEN regexp_like (UPPER(addr.src_address_line3), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
    AND ADDR.ORG_NAME IS NOT NULL
    THEN ADDR.SRC_ADDRESS_LINE3
    WHEN regexp_like (UPPER(addr.src_address_line4), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
    AND ADDR.ORG_NAME IS NOT NULL
    THEN ADDR.SRC_ADDRESS_LINE4
    ELSE NULL
 END; 
```

我想做的是，当案例条件为真时，我想让相应的地址行为 NULL。有没有办法用这段代码实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:25:34.953

因此，如果第一个 WHEN 条件为真，您想将 src_address_line1 设置为 NULL，等等？在这种情况下，我会这样做：

```
UPDATE DSOPI_PERSON_ADDR_RULE ADDR

SET 
addr.src_address_line1 = 
CASE WHEN regexp_like (UPPER(addr.src_address_line1), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG') 
AND ADDR.ORG_NAME IS NOT NULL 
THEN NULL ELSE addr.src_address_line1 END, 

addr.src_address_line2 = 
CASE WHEN regexp_like (UPPER(addr.src_address_line2), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG') 
AND ADDR.ORG_NAME IS NOT NULL 
THEN NULL ELSE addr.src_address_line2 END, 

addr.src_address_line3 = 
CASE WHEN regexp_like (UPPER(addr.src_address_line3), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG') 
AND ADDR.ORG_NAME IS NOT NULL 
THEN NULL ELSE addr.src_address_line3 END, 

addr.src_address_line4 = 
CASE WHEN regexp_like (UPPER(addr.src_address_line4), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG') 
AND ADDR.ORG_NAME IS NOT NULL 
THEN NULL ELSE addr.src_address_line4 END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:25:43.760

`CASE`您可以选择为每个地址字段添加附加语句：

代码是重复的，但这允许您在满足条件时将地址行设置为空。

```
UPDATE DSOPI_PERSON_ADDR_RULE ADDR
SET ADDR.DEPT_NAME =
   CASE
      WHEN regexp_like (UPPER(addr.src_address_line1),
         'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
         AND ADDR.ORG_NAME IS NOT NULL
         THEN ADDR.SRC_ADDRESS_LINE1
      WHEN regexp_like (UPPER(addr.src_address_line2), 
         'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
         AND ADDR.ORG_NAME IS NOT NULL
         THEN ADDR.SRC_ADDRESS_LINE2
      WHEN regexp_like (UPPER(addr.src_address_line3), 
         'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
         AND ADDR.ORG_NAME IS NOT NULL
         THEN ADDR.SRC_ADDRESS_LINE3
      WHEN regexp_like (UPPER(addr.src_address_line4), 
         'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
         AND ADDR.ORG_NAME IS NOT NULL
         THEN ADDR.SRC_ADDRESS_LINE4
      ELSE NULL
   END
   , ADDR.SRC_Address_Line1 =
        CASE
           WHEN regexp_like (UPPER(addr.src_address_line1),     
              'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
              AND ADDR.ORG_NAME IS NOT NULL
              THEN NULL
           ELSE ADDR.SRC_Address_Line1
        END
   , ADDR.SRC_Address_Line2 =
        CASE
           WHEN regexp_like (UPPER(addr.src_address_line2),     
              'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
              AND ADDR.ORG_NAME IS NOT NULL
              THEN NULL
           ELSE ADDR.SRC_Address_Line2
        END
   , ADDR.SRC_Address_Line3 =
        CASE
           WHEN regexp_like (UPPER(addr.src_address_line3),      
              'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
              AND ADDR.ORG_NAME IS NOT NULL
              THEN NULL
           ELSE ADDR.SRC_Address_Line3
        END
   , ADDR.SRC_Address_Line4 =
        CASE
           WHEN regexp_like (UPPER(addr.src_address_line4),     
              'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')
              AND ADDR.ORG_NAME IS NOT NULL
              THEN NULL
           ELSE ADDR.SRC_Address_Line4
        END; 
```

# objective-c - OS X：获取大于三个标准按钮的按钮的鼠标按钮位置

> ID：12966941
> 
> 赞同：0
> 
> 时间：2012-10-19T03:26:31.143
> 
> 标签：objective-c, macos, cocoa

是否有一种简单的方法可以确定是否单击了多键鼠标上的按钮（超过三个按钮）？

例如，五键鼠标上的第五个按钮。

我知道这是可能的，因为 USB Overdrive 和 Smart Scroll 等应用程序可以做到这一点……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:39:58.367

是的，只要询问事件的`buttonNumber`：

```
- (void)mouseDown:(NSEvent *)theEvent
{
    if(theEvent.type == NSOtherMouseDown)
    {
        NSLog(@"Button number %ld was pressed.", theEvent.buttonNumber);
    }
} 
```

# r - 如何使用for循环对数据进行排序？

> ID：12966942
> 
> 赞同：-3
> 
> 时间：2012-10-19T03:26:38.723
> 
> 标签：r, sorting, loops

我想知道如何使用循环（可能是 for 循环）对数据进行排序，如下所示。

```
 [,1]
 [1,]  179
 [2,]  160
 [3,]  136
 [4,]  227
 [5,]  217
 [6,]  168
 [7,]  108
 [8,]  124
 [9,]  143
[10,]  140 
```

我尝试使用这样的循环：

```
for (i in 1:nrow(v)) {
for (j in i+1:nrow(v)) {
if (v[i] > v[j]) {
v[i] <- v[j]
}
else {
v[i] <- v[i]
}
}
}
v 
```

但最后出现了一条错误消息：/

```
Error in if (chickwts[i, 1] > chickwts[j, 1]) { : 
  missing value where TRUE/FALSE needed 
```

我知道这很简单，使用 order 来做，但作为 R 的初学者，我很好奇如何通过循环来做到这一点。希望有人可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:57:31.170

简短的回答是不要，因为`sort.list`使用内部优化好的代码更有效地实现了数字排序算法。

您需要决定要使用的排序方法。请参阅[此维基百科文章](http://en.wikipedia.org/wiki/Sorting_algorithm) 以获得很好的摘要。

每个排序算法都有伪代码，可以翻译成 R

这是一个*bubbleSort*的实现，从[这里实现伪代码](http://en.wikipedia.org/wiki/Bubble_sort)

```
procedure bubbleSort( A : list of sortable items )
   repeat     
     swapped = false
     for i = 1 to length(A) - 1 inclusive do:
       /* if this pair is out of order */
       if A[i-1] > A[i] then
         /* swap them and remember something changed */
         swap( A[i-1], A[i] )
         swapped = true
       end if
     end for
   until not swapped
end procedure 
```

在`R`这看起来像

```
set.seed(1)
A <- sample(10)
A

##  [1]  3  4  5  7  2  8  9  6 10  1

n <- length(A)

repeat {
    swapped = FALSE
    for (i in 2:length(A)) {
        newA <- A
        if (A[i - 1] > A[i]) {
            newA[i - 1] <- A[i]
            newA[i] <- A[i - 1]
            A <- newA
            swapped <- TRUE
        }
    }
    if (!swapped) {break}
}
# ta da!
A

##  [1]  1  2  3  4  5  6  7  8  9 10 
```

# iphone - 从我的 iPhone 应用程序将照片附加到电子邮件

> ID：12966944
> 
> 赞同：1
> 
> 时间：2012-10-19T03:26:57.693
> 
> 标签：iphone, ios, xcode, email-attachments, file-sharing

我有一个 iPhone 应用程序，它从 App 内置的相册中挑选照片。现在我想添加一个分享按钮，可以通过电子邮件分享这张照片，我可以通过这个代码附加一张现有的照片：

```
 MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

[picker setSubject:@""];

// Set up recipients
NSArray *toRecipients = [NSArray arrayWithObject:@""]; 
[picker setToRecipients:toRecipients];

// Attach an image to the email
NSString *path = [[NSBundle mainBundle] pathForResource:@"project existing photo" ofType:@"jpg"];
NSData *myData = [NSData dataWithContentsOfFile:path];
[picker addAttachmentData:myData mimeType:@"image/jpeg" fileName:@"photo name"];

// Fill out the email body text
NSString *emailBody = @"";
[picker setMessageBody:emailBody isHTML:NO];

[self presentModalViewController:picker animated:YES];
[picker release]; 
```

但是我需要在此代码中进行哪些更改才能将选择的相册附加到电子邮件正文中？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T03:54:09.280

用于`UIImagePickerController`允许用户选择图像。然后它将调用此委托方法。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    UIImage* image = [info objectForKey:UIImagePickerControllerOriginalImage];
    NSData* data = UIImageJPEGRepresentation(image, 1.0);
    // Your e-mail code here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T05:37:27.640

嗨，使用 UIImagePicker 从相机的 PhotoLibrary 中选择图像并使用 MFMailComposeViewController 发送电子邮件。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

// Dismiss PickerViewController 

[picker dismissModalViewControllerAnimated:NO]; 

// Get Image Fro Attachment

UIImage* image = [info objectForKey:UIImagePickerControllerOriginalImage];
NSData* data = UIImageJPEGRepresentation(image, 1.0);

// Setup Email Settings Like Subject, Message , Attachment

MFMailComposeViewController *mailPicker = [[MFMailComposeViewController alloc] init];
mailPicker.mailComposeDelegate = self;

[mailPicker setSubject:@"Image Attachment Test"];

// Set recipients

NSArray *toRecipients = [NSArray arrayWithObject:@"xyz.gmail.com"]; 
[mailPicker setToRecipients:toRecipients];

// Set body message here
NSString *emailBody = @":)";
[picker setMessageBody:emailBody isHTML:NO];

// Attach Image as Data 
[mailPicker addAttachmentData:myData mimeType:@"image/jpeg" fileName:@"photo name"];

[self presentModalViewController:mailPicker animated:YES];

[mailPicker release];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T03:58:00.260

假设你有一个来自图像选择器（或任何其他来源）的**UIImage**，你首先需要从图像创建一个**NSData**对象。使用**UIImageJPEGRepresentation**或**UIImageJPEGRepresentation**函数。获得**NSData**对象后，将其添加为附件，就像您在发布的代码中所做的那样。

在大多数情况下，图像会出现在邮件正文之后。

# ruby-on-rails - Rails Rspec 测试 html 选择选项

> ID：12966945
> 
> 赞同：0
> 
> 时间：2012-10-19T03:27:00.907
> 
> 标签：ruby-on-rails, testing, rspec-rails

我正在尝试使用 rspec 来测试从 select 标记中选择一个值。select 标记应列出数据库中每个用户的所有名称。当我浏览该站点时，它可以工作。但测试似乎没有看到 FactoryGirl 创建的用户名：

错误是：

```
cannot select option, no option with text 'Person 4' in select box 'receiver_id' 
```

这是 message_pages 规范的一部分：

```
let(:user) { FactoryGirl.create(:user) }
let(:other_user) { FactoryGirl.create(:user) }
before do
    select other_user.name, :from => 'message[receiver_id]'
    fill_in "Subject", with: "Hello"
    fill_in "Body", with: "It's time to have fun!"
end 
```

这是我的视图的 HTML 输出：

```
<label for="message_receiver_id">Receiver</label>
<select id="message_receiver_id" name="message[receiver_id]"><optionvalue="12">John</option>
<option value="13">Tom</option>
<option value="9">Jay</option>
<option value="14">Bob</option></select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:45:02.140

这看起来像一个惰性求值问题，在使用`let`. 从[文档](https://www.relishapp.com/rspec/rspec-core/docs/helper-methods/let-and-let)中：

> 注意 let 是惰性求值的：直到它定义的方法第一次被调用时才会求值。你可以使用让！在每个示例之前强制调用方法。

因此，两者`user`和`other_user`只会在您第一次调用它们时创建，如果您已经呈现了页面，那么为时已晚。尝试将`let`呼叫切换到`let!`，看看是否可以解决问题。

（虽然你说切换到`user.name`工作很有趣。你能发布规范中的其他初始化代码吗？）

# delphi - 如何获取已安装的显卡（Delphi）

> ID：12966946
> 
> 赞同：6
> 
> 时间：2012-10-19T03:27:03.093
> 
> 标签：delphi, video

寻找一种在 Windows 计算机上找到已安装的视频卡（芯片）的方法。

通过 Win 7 支持 XP 的解决方案。

我正在使用德尔福 2010。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T04:20:06.323

您可以使用[`Win32_VideoController`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394512%28v=vs.85%29.aspx)WMI 类

试试这个样本。

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

procedure  GetWin32_VideoControllerInfo;
const
  WbemUser            ='';
  WbemPassword        ='';
  WbemComputer        ='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
begin;
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);
  FWbemObjectSet:= FWMIService.ExecQuery('SELECT Name,PNPDeviceID  FROM Win32_VideoController','WQL',wbemFlagForwardOnly);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  while oEnum.Next(1, FWbemObject, iValue) = 0 do
  begin
    Writeln(Format('Name           %s',[String(FWbemObject.Name)]));// String
    Writeln(Format('PNPDeviceID    %s',[String(FWbemObject.PNPDeviceID)]));// String        
    Writeln;
    FWbemObject:=Unassigned;
  end;
end;

begin
 try
    CoInitialize(nil);
    try
      GetWin32_VideoControllerInfo;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode])); 
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;      
end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-20T10:28:00.113

这是取自@RRUZ 答案的解决方案。我将它稍微更改为一个函数，以使其更容易。

```
uses
  System.SysUtils,
  System.Variants,
  ActiveX,
  ComObj;

function GetVideoCardName(): String;
const
  WbemUser = '';
  WbemPassword = '';
  WbemComputer = 'localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator: OLEVariant;
  FWMIService: OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject: OLEVariant;
  oEnum: IEnumvariant;
  iValue: LongWord;
begin;
  try
    FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
    FWMIService := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2',
      WbemUser, WbemPassword);
    FWbemObjectSet := FWMIService.ExecQuery
      ('SELECT Name,PNPDeviceID  FROM Win32_VideoController', 'WQL',
      wbemFlagForwardOnly);
    oEnum := IUnknown(FWbemObjectSet._NewEnum) as IEnumvariant;
    while oEnum.Next(1, FWbemObject, iValue) = 0 do
    begin
      result := String(FWbemObject.Name);
      FWbemObject := Unassigned;
    end;
  except
    on E: EOleException do
      ShowMessage(Format('EOleException %s %x', [E.Message, E.ErrorCode]));
    on E: Exception do
      ShowMessage(E.Classname + ':' + E.Message);
  end;
end; 
```

# java - 同时创建对象和定义方法

> ID：12966950
> 
> 赞同：0
> 
> 时间：2012-10-19T03:27:59.237
> 
> 标签：java

是否可以在创建对象时声明方法？我在java中遇到了以下代码行：

```
public static void main(String[] args) {
        Comparator<String> comparator = new Comparator<String>() {
            public int compare (String s1, String s2) {
                return s1.compareToIgnoreCase(s2);
            }
        };
} 
```

看起来在创建对象`comparator`时，代码正在添加一个方法来实现`Comparator<T>`接口。创建实例时是否总是可以添加其他方法，或者它是否特别与 java 接口相关？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:28:55.063

是的，你可以这么做。它被称为[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)。这意味着您正在方法内创建一个新类，但您没有给它一个名称（这就是它是匿名的原因）。在您的示例中，这个匿名类实现了`Comparator<String>`接口，它应该`compare`在其主体中定义方法。这就是代码有效的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:30:13.277

这不是你想的那样。

接下来`new Comparator<String>()`是一个匿名的内部类。这意味着匿名类是 Comparator 类的实现者。

您可以有两个选项：

```
1\. AnyClass object = new AnyClass() { // anonymous inner class starts here.
// In this case , inner class is a sub class of AnyClass.
};// ends here
2\. AnyInterface anyInterface = new AnyInterface() { //anonymous inner class starts here.
// In this case , inner class is implementer of AnyInterface.
}; // ends here. 
```

# java - JavaMail API - 获取消息时出错

> ID：12966951
> 
> 赞同：0
> 
> 时间：2012-10-19T03:28:08.567
> 
> 标签：java, jakarta-mail

我正在阅读 oracle 关于使用 javamail api 访问我的电子邮件的教程。这是我的代码：

```
 import javax.mail.*;
 import javax.mail.internet.*;
 import java.util.Scanner;
 import java.util.Properties;

 public class MailClient {
    public static void main(String[] args) {
    Properties props = new Properties();
    Session session = Session.getDefaultInstance(props, null);

    Store store = session.getStore("pop3");
    store.connect("pop.gmail.com","email@gmail.com","password");

    Folder folder = store.getFolder("INBOX");
    folder.open(Folder.READ_ONLY);
    Message message[] = folder.getMessages();
    int i = message.length;
    for (int a=0;a<i;a++) {
        System.out.println(message[i].writeTo());
    }
    Scanner pause = new Scanner(System.in);
    folder.close(false);
    store.close();
}
} 
```

这是我收到的错误：

```
MailClient.java:20 error: method writeTo in interface Part cannot be applied to given types;
System.out.println(message[i].writeTo());
required: OutputStream
found: no arguments
reason: actual and formal argument lists differ in length
1 error 
```

任何想法我做错了什么？

此外，在 Google 的页面上，他们表示用户需要使用 SSL 才能通过 POP3 进行连接。我将如何在 JavaMail API 中实现它？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:39:45.040

如前所述，您的错误在

```
System.out.println(message[i].writeTo()); 
```

有两个问题：

1.  Message.writeTo() 将 OutputStream 作为参数，而您尚未提供。

2.  writeTo() 返回 void，因此不是 println() 的有效参数

[这](http://www.java-tips.org/other-api-tips/javamail/connecting-gmail-using-pop3-connection-with-ssl-2.html)是一些通过 java 邮件 api 连接到 GMail 的示例代码，使用 POP3 和 SSL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:21:01.783

消息[i].writeTo(System.out);

# c# - 清理 storageFolder.RoamingFolder 所有文件 winrt

> ID：12966952
> 
> 赞同：0
> 
> 时间：2012-10-19T03:28:11.193
> 
> 标签：c#, microsoft-metro, windows-runtime

我想清理 winrt 中 storageFolder.RoamingFolder 中的所有文件，我可以删除单个文件，但是*.* 对如何解决这个问题没有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:28:40.843

如果删除文件夹的内容是您想要实现的递归方法，则如下所示：

```
public static async Task DeleteFolderContentsAsync(StorageFolder folder,
   StorageDeleteOption option)
{
   // Try to delete all files
   var files = await folder.GetFilesAsync();
   foreach (var file in files)
   {
      await file.DeleteAsync(option);
   }

   // Iterate through all subfolders
   var subFolders = await folder.GetFoldersAsync();
   foreach (var subFolder in subFolders)
   {
      // Delete the contents
      await DeleteFolderContentsAsync(subFolder, option);

      // Delete the subfolder
      await subFolder.DeleteAsync(option);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-11T13:21:16.763

对于现在遇到此问题的任何人，[`StorageFolder.GetItemsAsync`](https://docs.microsoft.com/en-us/uwp/api/windows.storage.storagefolder.getitemsasync?view=winrt-22000#Windows_Storage_StorageFolder_GetItemsAsync)它会返回指定文件夹的所有文件和子文件夹，因此您可以将 Jürgen Bayers 的答案修改为如下所示：

```
public static async Task DeleteFolderContentsAsync(StorageFolder folder, StorageDeleteOption option)
{
    var items = await folder.GetItemsAsync();

    foreach (var item in items)
    {
        await item.DeleteAsync(option);
    }
} 
```

如果您不需要区分文件和文件夹，那么它会更短并且有效。

此外，删除文件夹也会删除其中的元素，因此您无需递归调用该方法。

# android - 如何重现android猴子崩溃？

> ID：12966953
> 
> 赞同：4
> 
> 时间：2012-10-19T03:28:18.530
> 
> 标签：android, command-line, adb, monkey

我测试了android的智能手机，在命令行模式下输入：

```
adb shell monkey -v 10000

the result is----------------------------------------------------------------------<start>:
procrank:
// Exception from procrank:
java.io.IOException: Error running exec(). Command: [procrank] Working Directory: null Environment: null
......
.........
.
..
...
.............
// anr traces status was 0
meminfo:
// meminfo status was 0
** Monkey aborted due to error.
Events injected: 21566
:Dropped: keys=6938 pointers=14444 trackballs=0 flips=0
## Network stats: elapsed time=454194ms (0ms mobile, 0ms wifi, 454194ms not connected)
** System appears to have crashed at event 21566 of 1000000 using seed 0

-------------------------------------------------------------------------------------<end> 
```

我可以使用种子 0 重现 21566 of 100000 的事件吗？

并且只做 100000 的单一事件 21566？

（有人告诉我“adb shell am start”的方法，但我不精通这个命令。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:54:22.813

当使用猴子重现错误时，它可能需要执行它在前一次运行中所做的所有事件才能重现错误。由于错误可能是整个事件链的原因（即更改设置、启动/停止应用程序..）。

猴子事件可能就像在某个位置的触摸命令一样简单，如果它不在具有正确设置的完全正确的应用程序中，它可能不会导致错误。

在某些情况下，可能是某个事件的影响使其停止。例如，如果事件正在启动一个应用程序并且该应用程序总是崩溃，那么该事件很可能每次都会失败。

# android - 无法正确交换操作栏选项卡上的片段

> ID：12966956
> 
> 赞同：5
> 
> 时间：2012-10-19T03:28:38.267
> 
> 标签：android, tabs, android-fragments

已阅读有关此主题的所有问题/答案，但我无法让其中任何一个为我工作.aggghh

我有 3 个操作栏选项卡

tab1 调用/使用动态显示“添加”按钮的片段

单击按钮时，我希望它自己删除“按钮片段”并将其替换为具有一堆 EditTexts 的片段

这按预期工作。但是，当我单击另一个选项卡时，例如调用自己的片段的 tab2，来自 tab1 的 EditTexts 片段仍然存在并覆盖 tab2 片段

我认为理解我正在尝试做的事情从根本上是错误的，即一个片段不能调用另一个片段来替换自己？或者不知何故我没有正确删除以前的片段以及与backstack有关的东西..???? 或显示和隐藏 xml?????

我对此很陌生，完全困惑！请帮助...提前谢谢你:)

这是我使用 TabCompat.zip 示例从 android 网站[http://developer.android.com/training/backward-compatible-ui/index.html 获取最多的代码](http://developer.android.com/training/backward-compatible-ui/index.html)

**MainActivity.java**

```
package com.example.android.tabcompat;
public class MainActivity extends TabCompatActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

TabHelper tabHelper = getTabHelper();

CompatTab tab1Tab = tabHelper.newTab("tab1")
.setText(R.string.tab_tab1)
.setTabListener(new InstantiatingTabListener(this,"A", Tab1Fragment.class));
tabHelper.addTab(tab1Tab);

        CompatTab tab2Tab = tabHelper.newTab("tab2")
            .setText(R.string.tab_tab2)
            .setTabListener(new InstantiatingTabListener(this, "B", Tab2Fragment.class));
        tabHelper.addTab(tab2Tab);

        CompatTab tab3Tab = tabHelper.newTab("tab3")
                .setText(R.string.tab_tab3)
                .setTabListener(new InstantiatingTabListener(this,"C", Tab3Fragment.class));
        tabHelper.addTab(tab3Tab);
    }

    /**
     * Implementation of {@link CompatTabListener} to handle tab change events. This implementation
     * instantiates the specified fragment class with no arguments when its tab is selected.
     */
    public static class InstantiatingTabListener implements CompatTabListener {

        private final TabCompatActivity mActivity;
        private final Class mClass;

        /**
         * Constructor used each time a new tab is created.
         * @param activity The host Activity, used to instantiate the fragment
         * @param cls      The class representing the fragment to instantiate
         */
        public InstantiatingTabListener(TabCompatActivity activity, String tag, Class<? extends Fragment> cls) {
            mActivity = activity;
            mClass = cls;

        }

        /* The following are each of the ActionBar.TabListener Callback */
        @Override
        public void onTabSelected(CompatTab tab, FragmentTransaction ft) {
            // Check if the fragment is already initialised
            Fragment fragment = tab.getFragment();
            if (fragment == null) {
                // If not, instantiate and add it to the activity
                fragment = Fragment.instantiate(mActivity, mClass.getName());
                tab.setFragment(fragment);
                ft.add(android.R.id.tabcontent, fragment, tab.getTag());
            } 
            else {
                // If it exists, simply attach it in order to show it
                ft.attach(fragment);
            }
        }

        public void onTabUnselected(CompatTab tab, FragmentTransaction ft) {
            Fragment fragment = tab.getFragment();
            if (fragment != null) {  
            ft.detach(fragment);
            }
        }

        @Override
        public void onTabReselected(CompatTab tab, FragmentTransaction ft) {
            // User selected the already selected tab. Do nothing.

    } }
      } 
```

**Tab1Fragment.java**这是加载“添加按钮”的位置

```
package com.example.android.tabcompat;

        public class Tab1Fragment extends Fragment{

        protected int position;
        //display the add tab1 button
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
            final Button btn = new Button (getActivity());
            btn.setGravity(Gravity.TOP);
            btn.setText(R.string.btn_tab1);
            btn.setId(1);
            btn.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
    //when button is clicked replace the button and display the tab1 form fragment

    FragmentManager fragmentManager = getFragmentManager();
    Tab1FormFragment formFragment = new Tab1FormFragment();
    FragmentTransaction transaction = fragmentManager.beginTransaction();
    transaction.replace(android.R.id.tabcontent, formFragment);
    transaction.addToBackStack(null);
    transaction.commit();
                }

            });
            return btn;

        }
    } 
```

**Tab1FormFragment.java**此片段显示从布局文件 form.xml 获取的 edittext 视图形式

```
package com.example.android.tabcompat;

   public class Tab1FormFragment extends Fragment {
    protected static final String ARG_POSITION = null;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
       Bundle savedInstanceState) {
      // TODO Auto-generated method stub
      View myFragmentView = inflater.inflate(R.layout.form, container, false);

      return myFragmentView;
     }

     } 
```

**表单.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/petForm"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
<ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_tab_photos" />

        <EditText
            android:id="@+id/editTextName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/field_name"
            android:inputType="text" />

        <EditText
            android:id="@+id/editTextAge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/field_age"
            android:inputType="text" />
        <EditText
            android:id="@+id/editTextBreed"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/field_breed"
            android:inputType="text" />

        <Spinner
            android:id="@+id/spinnerSex"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" 
            android:entries="@array/sex_arrays"
            android:hint="@string/field_sex" />

        <Button
            android:id="@+id/savePet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/save_record" />
    </LinearLayout>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T15:33:16.250

您可以尝试调用非操作栏选项卡（您所说的有一堆 EditText），同时为片段的该实例提供一个标记，即在您的动态按钮的 onClick 方法中，在启动 Tab1formFragment 后添加此行：

`getFragmentManager().beginTransaction().replace(android.R.id.tabcontent, formFragment, "FORM_FRAG").addToBackStack(null).commit();`

并通过添加对 formFragment 实例的检查来更改您的操作栏选项卡事务： `if(getFragmentManager().findFragmentByTag("FORM_FRAG")!=null)` `getFragmentManager().beginTransaction().remove(getFragmentManager().findFragmentByTag("FORM_FRAG")).commit()`

此外，您可以在 onTabSelected() 方法中使用 replace() 片段事务，而不是 attach() 和 add()。

# php - PHP 的explode() 函数在C++ 中是否有等价物？

> ID：12966957
> 
> 赞同：23
> 
> 时间：2012-10-19T03:28:52.233
> 
> 标签：php, c++, arrays, explode, equivalent

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

在 PHP 中，该`explode()`函数将获取一个字符串并将其分割成一个数组，通过指定的分隔符分隔每个元素。

C++ 中有没有等价的函数？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-19T03:36:30.563

Here's a simple example implementation:

```
#include <string>
#include <vector>
#include <sstream>
#include <utility>

std::vector<std::string> explode(std::string const & s, char delim)
{
    std::vector<std::string> result;
    std::istringstream iss(s);

    for (std::string token; std::getline(iss, token, delim); )
    {
        result.push_back(std::move(token));
    }

    return result;
} 
```

Usage:

```
auto v = explode("hello world foo bar", ' '); 
```

Note: @Jerry's idea of writing to an output iterator is more idiomatic for C++. In fact, you can provide both; an output-iterator template and a wrapper that produces a vector, for maximum flexibility.

Note 2: If you want to skip empty tokens, add `if (!token.empty())`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-19T03:36:47.173

The standard library doesn't include a direct equivalent, but it's a fairly easy one to write. Being C++, you don't normally want to write specifically to an array though -- rather, you'd typically want to write the output to an iterator, so it can go to an array, vector, stream, etc. That would give something on this general order:

```
template <class OutIt>
void explode(std::string const &input, char sep, OutIt output) { 
    std::istringstream buffer(input);

    std::string temp;

    while (std::getline(buffer, temp, sep))
        *output++ = temp;
} 
```

# dojo - Javascript 未在 dojox.layout.ContentPane 中使用 Ajax 表单发布

> ID：12966962
> 
> 赞同：0
> 
> 时间：2012-10-19T03:29:19.743
> 
> 标签：dojo

我的页面上有一个表格。我想发布它并将响应放在对话窗口中。响应是一个带有要执行的 javascript 的 http 页面。

我想要像 dojox.widget.DialogSimple 这样的东西，它只适用于表单帖子，而不是常规的 http“get”url。

如何将 dojox.layout.ContentPane 与表单帖子一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:53:03.610

您可以尝试使用 xhr.post() 发布您的表单并使用`yourContentPane.set("content", resultOfPost)`. 我不确定在手动设置内容时是否会执行 javascript，或者这是否仅适用于设置 href。

无论如何购买，不建议在您的 html 响应中嵌入 javascript。您可以在成功发布后执行您的代码。这个伪代码可以给你一个想法：

```
// Handle the submission of the "Generate service" form
on(document.body, "#yourForm:submit", function(evt) {
    evt.preventDefault();
    xhr.post({
        handleAs: "text",
        form: "yourFormId",
        timeout: 15000,
        load: function(data, ioArgs) {
            var yourContentPane = registry.byId("yourContentPane");
            yourContentPane.set("content", data);
            // Execute your javascript code here, instead
            // of embedding it in the html that is loaded into
            // the content pane...
        },
        error: function(err, ioArgs) {
            // handle error
        }
    };
})); 
```

在这种情况下，内容窗格也可以是一个简单的 dijit.layout.ContentPane 实例，因为不需要执行嵌入的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:35:14.847

谢谢，这不是一个糟糕的方法，但我希望有一些可以运行 javascript 并且更加无缝的东西。经过大量实验，我发现了这一点：

```
 dialog = new dojox.widget.DialogSimple({
        title: 'My Dialog',
        width: '400px',
        height: '300px',
        ioMethod: dojo.xhrPost,
        ioArgs: {
            form: formDomNode
        }
    });
    dialog.set("href", formDomNode.action);

    dojo.connect(dialog, 'onHide', dojo.hitch(dialog, function() {
        this.destroyRecursive();
    }));

    dialog.show(); 
```

DialogSimple 完全是 Dialog 和 dojox ContentPane 的混合，ContentPane 支持 post 和 get。“href”必须在之后设置，而不是作为初始参数，否则由于某种原因它不能正常工作。

直接在dojox ContentPane上做一个帖子：（注意它只在放置在实际页面上时才执行javascript）

```
 var cp = new dojox.layout.ContentPane({
        ioMethod: dojo.xhrPost,
        ioArgs: {
            form: formDomNode
        }
    }, "dialogContent");
    //cp.placeAt("dialogContent");
    cp.set("href", formDomNode.action); 
```

# javascript - 不能在 IE 上实现 A*？

> ID：12966964
> 
> 赞同：1
> 
> 时间：2012-10-19T03:29:58.957
> 
> 标签：javascript, html, a-star

> **可能重复：**
> [如何在 IE 浏览器的 JavaScript 中修复数组 indexOf() 在](https://stackoverflow.com/questions/1744310/how-to-fix-array-indexof-in-javascript-for-ie-browsers)
> [IE 8 中不支持 indexOf？](https://stackoverflow.com/questions/9768574/no-support-for-indexof-in-ie-8)

我正在尝试制作一个吃豆人游戏，在 IE 出现之前一切都很好。

我正在使用来自该网站的 astar 代码：[http ://www.briangrinstead.com/blog/astar-search-algorithm-in-javascript](http://www.briangrinstead.com/blog/astar-search-algorithm-in-javascript)

出于某种原因，它在除 IE 之外的所有其他浏览器上都能正常工作，我每次都会收到此错误消息。

> SCRIPT438：对象不支持属性或方法“indexOf”
> graph.js，第 112 行字符 9

这就是我调用函数的方式。

```
var graph = new Graph(MazeMap);
var start = graph.nodes[rows][columns];
var end = graph.nodes[targetRow][targetColumn];
var result = astar.search(graph.nodes, start, end); 
```

# g++ - 在 centos6.0 final 64bit 上编译 boost 1.51.0

> ID：12966965
> 
> 赞同：0
> 
> 时间：2012-10-19T03:29:59.787
> 
> 标签：g++, 64-bit, centos, boost-thread

我在 centos6.0 final 64bit(g++ 4.4) 上编译了 boost 1.51.0。编译时没有错误。但是，当我尝试将 libboost_thread.a 链接到我的程序时，出现链接错误，提示 `undefined reference to`boost::thread::~thread()'`。我尝试 nm 列出 libboost_thread.a 的符号，但没有任何符号名为 ~thread。

我在 ubuntu12.04 32bit(g++ 4.6) 上做了同样的事情，它运行良好并且成功链接，没有任何错误。

有人知道这个问题吗？

我用boost1.49.0代替boost1.51.0，一切顺利。所以我猜在 g++ 4.4 和 boost1.51.0 中可能存在一些兼容问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:47:53.487

boost::thread::~thread() 函数已在 1.51 中内联。我的猜测是您正在使用 1.49 编译并与 1.51 链接。

# html - 电子邮件 HTML 中的图像裁剪？

> ID：12966976
> 
> 赞同：0
> 
> 时间：2012-10-19T03:31:15.797
> 
> 标签：html, css, html-email

我想知道电子​​邮件 HTML 中的**图像裁剪是否有任何限制。**我已经尝试设置`width`和`height`属性，但没有奏效。我也试过了`Clip property`，但也没有用。

这两种情况下的图像都会一直显示它的全部内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:09:58.487

由于 HTML 呈现的变化，每个电子邮件客户端都会以不同的方式呈现它。您需要将 HTML 电子邮件视为没有 CSS 并使用基本 HTML。

最好的选择是使用图像编辑器手动裁剪图像。

高级 CSS 不是值得信赖的途径，应避免使用以确保跨平台/浏览器/客户端的稳定性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:36:30.813

You should be more concerned if you are supporting from Microsoft Outlook 2007 which doesn't offer support for CSS. It renders based on Microsoft Office rendering engine due to security issues which is lame enough to understand even CSS2 tags. So I would also go with the above comment to manually crop the image using an image editor.

```
Tip: 
```

For Email testing I have used [http://www.emailonacid.com/](http://www.emailonacid.com/) even though it is paid version it does the email testing easier.

# java - 如何在不影响尺寸的情况下在 Java 中调整窗口大小？

> ID：12966979
> 
> 赞同：2
> 
> 时间：2012-10-19T03:31:31.030
> 
> 标签：java, swing

我正在尝试用java制作一个垄断游戏，事情是我对编程很陌生，这是我的第一个程序。

所以在不知道框架尺寸的情况下，我把它做得太大了，因为这对我的屏幕分辨率来说还可以，但是当我尝试在另一台电脑上使用游戏时，它太大了，甚至不适合我的屏幕.

所以我的问题是如何让我的游戏可以自动调整大小，以便我可以在另一台 PC 上使用它而不影响它的尺寸？

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:35:00.300

假设您正在创建一个 Swing 应用程序（您从未说过），不直接调整任何组件的大小，而是使用适当的布局管理器组合，并让布局管理器和组件的 preferredSize 进行调整大小为您提供的 GUI。永远记得将组件添加到 GUI，然后`pack()`在顶层窗口上调用，然后在顶层窗口上调用`setVisible(true)`。

有关通过核心 Java 可用的布局的更多详细信息，请查看教程，[在容器中布局组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)。

如果您的问题不涉及 Swing GUI 库，请告诉我们您正在使用哪个 GUI 库。问题细节*非常*重要，如果可能的话，你会想从一开始就告诉我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:37:20.843

如果你想让你的游戏全屏运行，这可能会有所帮助：[如何在 java 中获得屏幕分辨率？](https://stackoverflow.com/questions/3680221/screen-resolution-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:58:42.667

模拟这样的游戏并不容易；您可能希望从更简单的东西开始，例如[`MVCGame`](https://stackoverflow.com/a/3072979/230513)将组件放置在简单的布局中，或者[`Buttons`](https://sites.google.com/site/drjohnbmatthews/buttons)使字体大小适应给定难度级别的可用空间。

对于连续缩放，您需要图形上下文的变换来填充绘图表面，如此[处](https://sites.google.com/site/drjohnbmatthews/scaledview)`scale()`所示。[对于旋转文本，此处](https://stackoverflow.com/a/6238908/230513)显示的示例可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T05:19:22.240

`window.setExtendedState(JFrame.MAXIMIZED_BOTH);`将窗口设置为全屏。

# objective-c - iOS 中的 Facebook 自定义 URL 方案

> ID：12966980
> 
> 赞同：1
> 
> 时间：2012-10-19T03:31:42.863
> 
> 标签：objective-c, ios, facebook

facebook 自定义 url 方案是否仍然有效？我目前正在尝试使用发布到本机 facebook 应用程序

```
fb://publish/profile/me?text=%@ 
```

但它不起作用。它只是打开 facebook 应用程序。

# python - 具有自定义标签和属性的 Scrapy SGML 链接提取器

> ID：12966981
> 
> 赞同：0
> 
> 时间：2012-10-19T03:32:08.837
> 
> 标签：python, scrapy

我想知道为什么我的链接提取器没有任何链接。我正在我的链接提取器中扩展`CrawlSpider`和设置`tags`and`attrs`属性。我正在尝试从网页上的选择框中删除链接（http://www.realclearpolitics.com/epolls/latest_polls/president/），因此我正在寻找具有值属性的选项标签。

在此处查看代码：[https ://github.com/jtfairbank/RCP-Poll-Scraper/blob/master/polldata/spiders/pres.py](https://github.com/jtfairbank/RCP-Poll-Scraper/blob/master/polldata/spiders/pres.py)

这是根目录：[https ://github.com/jtfairbank/RCP-Poll-Scraper](https://github.com/jtfairbank/RCP-Poll-Scraper)

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:45:33.190

您的链接提取器没有获得任何链接，因为您正在搜索带有的`<option>`标签，并且[此页面](http://www.realclearpolitics.com/epolls/latest_polls/president/)`tags=['option']`上没有*选择*或*选项*标签。

尝试`restrict_xpaths='//td[@class="lp-race"]'`：

```
>>> SgmlLinkExtractor(
...     allow=(r"epolls/2012/president/[a-z]{2}/[a-z]+_romney_vs_obama-[0-9]{4}\.html"),
...     allow_domains=('realclearpolitics.com',),
...     restrict_xpaths='//td[@class="lp-race"]',
... ).extract_links(response)

[Link(url='http://www.realclearpolitics.com/epolls/2012/president/fl/florida_romney_vs_ob...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/oh/ohio_romney_vs_obama...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/va/virginia_romney_vs_o...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/ia/iowa_romney_vs_obama...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/wi/wisconsin_romney_vs_...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/or/oregon_romney_vs_oba...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/mo/missouri_romney_vs_o...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/ca/california_romney_vs...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/md/maryland_romney_vs_o...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/mi/michigan_romney_vs_o...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/co/colorado_romney_vs_o...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/mn/minnesota_romney_vs_...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/wa/washington_romney_vs...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/ct/connecticut_romney_v...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/nv/nevada_romney_vs_oba...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/mt/montana_romney_vs_ob...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/pa/pennsylvania_romney_...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/in/indiana_romney_vs_ob...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/ma/massachusetts_romney...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/ga/georgia_romney_vs_ob...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/id/idaho_romney_vs_obam...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/az/arizona_romney_vs_ob...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/me/maine_romney_vs_obam...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/la/louisiana_romney_vs_...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/hi/hawaii_romney_vs_oba...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/tx/texas_romney_vs_obam...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/ar/arkansas_romney_vs_o...',
 Link(url='http://www.realclearpolitics.com/epolls/2012/president/ne/nebraska_romney_vs_o...', 
```

# java - Android java如何让动画图像向左移动并留在那里？

> ID：12966983
> 
> 赞同：2
> 
> 时间：2012-10-19T03:32:08.853
> 
> 标签：java, android

所以基本上我有这个，当你点击图像时，图像会向右移动但是当动画完成时它会回到原来的位置？我怎样才能让它停在动画结束的地方？这是我的代码

```
 <?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"> 
    <translate android:fromXDelta="0%" android:toXDelta="70%" android:duration="1000"/>
</set> 
```

这是我的 slide_in_right.xml

```
 public void sideBar()
   {

       ImageView sidebar = (ImageView)findViewById(R.id.sidebar);

       mSlideInRight = AnimationUtils.loadAnimation(this, R.anim.slide_in_right);
       sidebar.startAnimation(mSlideInRight);

   } 
```

这是它向右滑动的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:35:01.687

使用`Animation` `setFillAfter(true)`方法来持久化动画。

```
AlphaAnimation alpha = new AlphaAnimation(1, 0);
alpha.setDuration(600);
alpha.setFillAfter(true); 
```

然后

```
someView.startAnimation(alpha); 
```

在您的情况下，代码应该是

```
public void sideBar()
{
   ImageView sidebar = (ImageView)findViewById(R.id.sidebar);

   mSlideInRight = AnimationUtils.loadAnimation(this, R.anim.slide_in_right);
   mSlideInRight.setFillAfter(true);
   sidebar.startAnimation(mSlideInRight);
} 
```

# c# - 如果框架被 .NET 4.5 替换，使用 .NET 4.0 的应用程序是否安全？

> ID：12966985
> 
> 赞同：2
> 
> 时间：2012-10-19T03:32:24.533
> 
> 标签：c#, visual-studio-2010, .net-4.0, .net-4.5

我使用的是 Windows 7 和 VisualStudio 2010。正在开发的应用程序使用的是 .net 框架 4.0。如果我用 .NET 4.5 替换它是否安全？它会破坏应用程序吗？

如果我使用框架 4.5 进行开发（不使用其新功能），我的队友使用 4.0 并且我们的生产和登台也使用 4.0，这有关系吗？

需要建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:16:53.463

查看从 .Net 4.0 到 4.5的[更改列表和此](http://msdn.microsoft.com/en-us/library/hh367887%28v=VS.110%29.aspx)[博客文章](http://blogs.msdn.com/b/dotnet/archive/2011/09/26/compatibility-of-net-framework-4-5.aspx)，了解有关 4.0 和 4.5 之间兼容性的信息。

只要您的项目以 4.0 运行时为目标，您可能会没事的，我只遇到过一次小问题，并且回到了 beta 版（处理已编译的 Regex 程序集）。此外，我不希望运行 4.0 的开发人员和运行 4.5 的开发人员之间的性能特征保持一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:52:07.160

确保从 4.0 迁移到 4.5 时不会破坏任何东西的唯一方法是测试、测试和测试。

根据我的经验，当我的团队将 silverlight 和 wcf 项目从 .NET 4.0 迁移到 .NET 4.5 时，我从未发现任何问题。

# sql - 将 SQL 日期与大于和小于符号进行比较？

> ID：12966986
> 
> 赞同：2
> 
> 时间：2012-10-19T03:32:28.100
> 
> 标签：sql, oracle, date, compare

我使用的是基本的 Oracle SQL，我只是想知道是否可以比较日期？就像比较一个日期看它是否比另一个大？

例如：

日期 1 < SYSDATE

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T04:08:51.213

是的你可以。

```
select case when sysdate > (sysdate - 1) then 'Greater-than' else 'Not greater-than' end as DateComp from dual 
```

结果：

```
Greater-than 
```

请自己尝试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T04:11:38.643

```
 SELECT * 
 FROM table_name
 WHERE date1 operator  date2 
```

比较日期允许您检查日期是否存在，或者一个日期是否小于、等于或大于另一个日期。

关系运算符（=、<、<=、>、>=、<>、!<、!>）和

所有日期和时间数据类型都支持逻辑运算符和布尔谓词（IS NULL、IS NOT NULL、IN、BETWEEN、EXISTS、NOT EXISTS 和 LIKE）。

使用 DATEADD 和 DATEDIFF 来添加和减去日期和时间数据类型。

# python - If 和 For 语句的花式反向语法

> ID：12966989
> 
> 赞同：1
> 
> 时间：2012-10-19T03:32:38.823
> 
> 标签：python

我经常看到类似这样的代码：

```
return [(var, val) for val in self.domains[var]
                    if self.nconflicts(var, val, assignment) == 0] 
```

我就像该死的那样性感。但是有时我会尝试删除它，但会出现语法错误。这种很好的代码编写形式有什么特殊的规则可以颠倒`for`and`if`语句的典型位置吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:33:53.730

They're called [list comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions). The basic syntax is (I'm using parens to group my words, not as part of the syntax):

```
[(an expression involving x) for x in someList if (some condition)] 
```

If the `condition` evaluates to true, the resulting list includes the `(expression involving x)`. So, for example, the following list comprehension uses this to only include strings in the resulting list.

```
>>> myList = [1,"hello",5.4,"world"]
>>> [elem for elem in myList if type(elem)==str]
['hello', 'world'] 
```

Note that the `if` part is optional, and the `expression involving x` can be as simple as just `x` (often used when you are just filtering out elements from another list).

In fact, the `expression involving x` doesn't really have to have `x` in it at all. For example, if for some reason you wanted a list of `0`'s as long as your name you could do this:

```
>>> [0 for letter in "Matthew"]
[0, 0, 0, 0, 0, 0, 0] 
```

For when you don't need the list to stick around after you make it, use [generator expressions](http://docs.python.org/reference/expressions.html#generator-expressions) instead. (Generator expressions and list comprehensions have the same syntax.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:33:45.670

See [list comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions) in the Python tutorial documentation. There are quite a number of things you can do with this syntax, including creating lists, sets, and dictionaries.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T03:35:01.440

The concept is called list comprehension,

[http://www.secnetix.de/olli/Python/list_comprehensions.hawk](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)

Take a look at lambda functions too,

[http://www.secnetix.de/olli/Python/lambda_functions.hawk](http://www.secnetix.de/olli/Python/lambda_functions.hawk)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T03:39:24.900

尽管您的示例代码确实是一个列表推导式，但您偶尔也会看到内联条件的反向 if 语法：

```
a if b else c 
```

# php - 从 DSO 迁移到 FCGI 后的 CodeIgniter 白屏

> ID：12966990
> 
> 赞同：0
> 
> 时间：2012-10-19T03:32:43.987
> 
> 标签：php, codeigniter, migration

我遇到了 codeigniter 向我返回白屏的问题。

注意：当我还在 DSO 时，这一切正常。注意：我尝试更改 $config['uri_protocol'] 的值

考虑这个例子：

```
url> mysite.com/process/something/321
output> **** WHITESCREEN ****

url> mysite.com/process/something/321/2323
output> you have entered: 321

url> mysite.com/process/something/323/2asdfshdf
output> you have entered: 323

url> mysite.com/process/something/323
output> **** WHITESCREEN **** 
```

代码：

```
class process extends Controller{
  public function something($digit){
    die("you have entered: " . $digit);
  }
} 
```

我需要做什么才能摆脱白屏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:36:16.933

正如@Rick Calder 所评论的，这个问题有一个快速的解决方法，你只需要更新你的 .htaccess 文件。谢谢瑞克！

解决方案可以在这里找到：[http ://www.serveridol.com/2012/02/15/codeigniter-%E2%80%93-no-input-file-specified-error/](http://www.serveridol.com/2012/02/15/codeigniter-%E2%80%93-no-input-file-specified-error/)

尽管我仍然很好奇为什么会发生这种情况以及为什么它会自动将小数点转换为下划线。

IE。

```
url> mysite.com/process/something/111.222
output> you have entered: 111_222 
```

我需要阅读更多内容以验证其发生的原因。

# python - Possible to detect if I'm inside an 'except' clause in Python?

> ID：12966995
> 
> 赞同：1
> 
> 时间：2012-10-19T03:33:37.210
> 
> 标签：python, try-catch, except

Ie, what I want would be:

```
try:
    print inExceptClause()
    1/0
except Exception:
    print inExceptClause()
print inExceptClause() 
```

... which would print out:

```
False
True
False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:39:48.033

我认为你的做法是错误的。您的“用例”似乎可以从代码中的多个点调用一个函数，有时会从异常处理程序中调用它。在该函数中，您想知道是否引发了异常，对吗？

关键是，*您不希望在（或不应该）对调用代码一无所知的函数中拥有这种逻辑*......理想情况下，您的大多数函数都不会。

也就是说，您可能想要执行该功能，但只是部分执行。所以我建议以下两种选择之一：

1.  将函数拆分为多个函数：一个函数具有额外的功能，并且会依次调用另一个具有可重用功能的函数。只需在需要时调用您需要的函数。

2.  向函数添加一个参数：一个简单的布尔值可能足以包含或排除该函数的一小部分。

现在，这并不是您问题的真正答案，但我觉得您正在以错误的角度看待您的问题......因此上述建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:20:42.260

[sys.exc_info()](http://docs.python.org/library/sys.html#sys.exc_info)

> 此函数返回三个值的元组，这些值提供有关当前正在处理的异常的信息。(...) 如果堆栈上的任何地方都没有处理异常，则返回一个包含三个 None 值的元组。

另请参阅以下问题：

[当没有异常处于活动状态时，Python 3 回溯失败 当](https://stackoverflow.com/q/9403986/95735)
[Python 3 中已经存在异常时引发异常](https://stackoverflow.com/q/6278426/95735)

# ios - Detect when my UIView subclass is added to another UIView

> ID：12966998
> 
> 赞同：4
> 
> 时间：2012-10-19T03:34:09.663
> 
> 标签：ios, uiview

I want my UIView subclass to position itself automatically when it is added to a parent container view.

Can I somehow detect when it is added and run my positioning code then or do I need to do something like?

```
[parentView addSubview:subView];
[setView calcPosition]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T03:37:29.507

**UIView** provides the methods `willMoveToSuperview:` and `didMoveToSuperview`. Just override those to know when the view is added to another view (or later removed).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:41:36.517

在子视图中写入方法并从子视图中`calcPosition`调用它`didMoveToSuperview`

```
- (void)didMoveToSuperview
{
    [super didMoveToSuperview];
    [self calcPosition];
} 
```