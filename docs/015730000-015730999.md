# StackOverflow 问答 15730000-15730999

# c# - WCF 可以很好地返回单个对象，但返回列表时失败

> ID：15730003
> 
> 赞同：1
> 
> 时间：2013-03-31T13:44:23.217
> 
> 标签：c#, .net, wcf, web-services, web

我已经通过列表通过我的 WCF 服务发送了各种其他对象，没有任何问题，但是当我尝试发送这个特定对象（在列表中）时，我得到了一种超时错误。

跟踪标识符是： TraceIdentifier [http://msdn.microsoft.com/da-DK/library/System.ServiceModel.Diagnostics.TraceTruncatedQuotaExceeded.aspx](http://msdn.microsoft.com/da-DK/library/System.ServiceModel.Diagnostics.TraceTruncatedQuotaExceeded.aspx)

奇怪的是：我得到了另一种专门返回对象（不在列表中）的方法，它工作正常。

此外，在调试时，我发现该方法（在服务端）返回列表很好，但是客户端显然无法接收它。

这是调用服务的方法（它在声明“revs”的行失败）：

```
public void GetReviewsInModule()
        {
            using (var db = new RentItServiceClient())
            {
                var revs = db.GetReviewsInModule(1);
            }
        } 
```

这是实际将对象作为列表返回的方法（对其进行了调试，并且可以正常返回）：

```
public List<ReviewModule> GetReviewsInModule(int id)
    {
        using (Context con = new Context())
        {
            con.Configuration.ProxyCreationEnabled = false;
            var mod = con.Modules.Find(id);
            if (mod == null)
                throw new WebServiceValidationException("Object does not exist");
            List<ReviewModule> revs = con.ModuleReviews.Include("User").Where(r => r.Module.Id == id).ToList();
            return revs;
        }
    } 
```

此外，列表中的对象几乎没有任何大小，所以请不要告诉我提高发送/接收限制/超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:45:29.603

它实际上也取决于结果列表中有多少元素，而不仅仅是单个元素的大小。您可以使用一些配置元素：

```
maxReceivedMessageSize
maxBufferSize
maxBufferPoolSize
maxArrayLength
maxStringContentLength 
```

另一种解决方案是切换到流式 WCF 服务。请注意，您不能混合使用流式操作和缓冲操作 - 我有时会创建两个 WCF 服务，一个用于流式操作，一个用于缓冲操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:14:19.970

仅根据您发布的代码很难给您答案，因为仅从那几个片段中复制问题是不可能的。（为此，您需要发布 ReviewModule 的完整定义、您的服务合同等）。

因此，这只是一个猜测，但是当我在端点中使用 Using 块时，我在使用 WCF 和 MVC Web Api 设置 RESTful Web 服务时被抓了几次。尽管 Using 是 C# 中的一个有价值的构造，但我发现，当您在一个方法中定义一个表示最终由您无法控制的代码调用的端点的方法时，Using 块依赖于工作的 IDisposable 接口得到弄乱。也就是说，您在您的方法中定义了一个对象（在本例中是一个名为“con”的 Context 类型的对象），只是稍后您所依赖的 WCF 框架才会尝试访问在您的端点中创建的对象. 当 WCF 框架完成其工作时，您的 Context 对象上的 Dispose() 方法可能已经被您的代码调用，这意味着 WCF 框架无法以它需要的方式访问它，以便能够返回您的服务预期的数据服务。即使您的方法在您从完全受您控制的代码中对其进行单元测试时，也可能是这种情况。

要查看这是否是您的问题，请尝试删除“GetReviewsInModule”方法/服务端点中的 Using 块，如下所示：

```
public List<ReviewModule> GetReviewsInModule(int id)
{
    Context con = new Context();
    con.Configuration.ProxyCreationEnabled = false;
    var mod = con.Modules.Find(id);
    if (mod == null) throw new WebServiceValidationException("Object does not exist");
    List<ReviewModule> revs = con.ModuleReviews.Include("User").Where(r => r.Module.Id == id).ToList();
    return revs;
} 
```

如果这导致您的端点按预期开始工作，您可以担心如何管理对象处置并避免将内存泄漏作为一个单独的问题。

# html - websocket客户端可以从80/443以外的不同端口连接到websocket服务器吗

> ID：15730009
> 
> 赞同：6
> 
> 时间：2013-03-31T13:44:54.223
> 
> 标签：html, websocket

我是 Websocket 编程的新手，但我的最新项目需要在 Ubuntu Linux 服务器上部署 WebSocket 服务器。我从互联网上阅读了一些，并且知道-

1.  websocket客户端会通过80/443端口连接到服务端，相应的协议标识为ws/wss。[http://www.websocket.org/aboutwebsocket.html](http://www.websocket.org/aboutwebsocket.html)
2.  Apache/Nginx Web 服务器通常会在服务器端监听 80/443，所以我们必须配置 Apache/Nginx 以支持 ws/wss 协议，更好地将连接像代理一样传输到 websocket 服务器。
3.  有一些用于 Apache 的 websocket 服务器插件，我也知道 Nginx 1.3+ 原生支持 websocket 协议，配置它也可以使用 websocket 服务器。

根据我所知道的，我认为我可以通过 80/443 将 Apache/Nginx 和 Websocket Server 一起部署。我想知道，如果我们可以独立使用 websocket 服务器吗？我认为如果我们可以编写一个从其他端口连接到服务器的 websocket 客户端，那么我们可以做到。

那么我们可以编写一个 websocket 客户端来从不同的端口连接服务器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T21:32:08.493

是的。独立的 WebSocket 服务器通常可以在任何端口上运行。浏览器客户端在非 HTTP(S) 端口上打开与服务器的 WebSocket 连接没有问题。

默认端口为 80/443 的主要原因是它们是最可靠的大量使用端口，因为它们能够穿越许多阻止所有其他端口上的所有流量的公司防火墙。

如果这对您的听众来说不是问题（或者您有基于 HTTP 的回退），那么为 WebSocket 服务器使用备用端口是完全合理的（并且容易得多）。另一种选择是使用 80/443 端口，但使用单独的 IP 地址/主机名。

# android - iPhone Android 定期付款 API

> ID：15730012
> 
> 赞同：0
> 
> 时间：2013-03-31T13:44:57.367
> 
> 标签：android, iphone, payment-processing

我有一个支持订阅（定期付款）的 Web 应用程序。

我已经为移动应用程序构建了一个 API，但缺少的部分是计费流程、我的后端订阅实体和交易（成功和失败）。

如果有人有这方面的经验。关于付款处理，您可以从 google play/itunes API 中得到什么？在实体/对象及其属性方面，以便手机应用程序可以发送到我的后端。

问题2：这些api是否支持取消订阅、终止和退款政策等功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:47:02.727

一家名为 MagicPay 的公司提供了一个名为 DualPay 的程序，该程序允许您在虚拟终端以及 iPhone 或 Android 设备上处理付款。这个程序的好处是一切都集成到虚拟终端，您将能够为您的客户设置定期计费。

该程序的缺点是您将无法真正通过移动设备控制定期计费，而只能通过几乎可以从任何计算机访问的虚拟终端进行控制。

您可以在此处找到有关该计划的更多信息的页面：http: [//www.magicpay.net/mobile-payments-with-virtual-payment-gateway/](http://www.magicpay.net/mobile-payments-with-virtual-payment-gateway/)

希望我有所帮助，祝你好运！

# php - PHP - 循环内的变量和外部的另一个变量

> ID：15730013
> 
> 赞同：0
> 
> 时间：2013-03-31T13:44:59.460
> 
> 标签：php, variables, loops

正如标题所说，我有这段代码，我想知道我是否可以编写一个变量，该变量取另一个与其相似但在循环之外的名称。

这有问题吗？！

```
<?php 
   $query = "SELECT * FROM subjects";
   $subjects_set = mysql_query($query);
   errors_of($subjects_set);

    while ($db_subjects_rows = mysql_fetch_array($subjects_set)){
           echo "<li>{$db_subjects_rows["menu_name"]}</li>";

           $pages_set = mysql_query("SELECT * FROM pages WHERE subject_id = {$db_subjects_rows["id"]}");

        errors_of($pages_set);
        echo "<ul class=\"pages\">";
        while ($db_pages_rows = mysql_fetch_array($pages_set)){
        echo "<li>{$db_pages_rows["menu_name"]}</li>";
        }
            echo "</ul>";                       
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:49:18.183

在循环中使用局部变量不会产生问题，如果这就是您要问的，您应该阅读有关变量范围的信息

函数有作用域，类有作用域，还有全局作用域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:53:36.623

循环中使用的所有变量`outside`都可以通过循环访问`inside`。请参阅本[手册](http://php.net/manual/en/language.variables.scope.php)以了解有关 PHP 变量范围的更多信息。

# python - UI 类继承，super() 无法正常工作

> ID：15730015
> 
> 赞同：1
> 
> 时间：2013-03-31T13:45:06.047
> 
> 标签：python, wxwidgets

存在一个 wxwidgets UI 类，如下所示：

```
class mainFrame ( wx.Frame ):
     def __init__( self, parent ):
         # Constructor code
         # ...
         # ...
     # Virtual event handlers, overide them in your derived class
     def about_click( self, event ):
         event.Skip()
     def search_perform( self, event ):
         event.Skip()   
     def new_note_event( self, event ):
         event.Skip()   
     def save_note_event( self, event ):
         event.Skip() 
```

我可以直接构造这个类的一个实例并填写事件存根，它可以工作，但我确定我根本不应该更改 UI 代码文件，而是将它用作我的基础 -班级。

我尝试使用

```
class Main(mainFrame):
    def __init__(self):
        super(mainFrame, self).__init__(self, None) 
```

以上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:11:35.583

现在已修复。`super()`呼叫正在**起作用**。当我改为按名称引用父类时，它可以工作。

我使用 UI 类的方式是

```
class Main(mainFrame):
    def __init__(self):
        mainFrame.__init__(self, None) # using super().__init__(self, None) fails
    def about_click( self, event ):
        print("AboutDialog")

def main():
    app = wx.PySimpleApp(0)
    frame = Main()
    app.SetTopWindow(frame)
    frame.Show()
    app.MainLoop()

if __name__ == '__main__':
    main() 
```

* * *

`super()` **根本不适**用于旧式课程。它仅适用于从任一或其他新式[类](http://docs.python.org/2/reference/datamodel.html#new-style-and-classic-classes)继承的新式类。`object`

# xcode - 为什么我不能在 Xcode 中创建动作？

> ID：15730019
> 
> 赞同：4
> 
> 时间：2013-03-31T13:45:56.277
> 
> 标签：xcode, action, outlet

当我按照[如何在 Xcode 4.3.1 中向类添加操作或出口中的说明进行操作时？](https://stackoverflow.com/questions/9779069/how-do-i-add-an-action-or-outlet-to-a-class-in-xcode-4-3-1)，或 Apple 的 First iOS App 教程，没有 Action 选项。只有插座和插座连接选项。我究竟做错了什么？

![在此处输入图像描述](https://i.stack.imgur.com/hTHVO.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T14:12:49.630

您只能将操作连接到`UIControl`.

您正在尝试从 a 创建一个动作**`UIView`**，它不是 UIControl 的子类并且没有动作。

从按钮开始拖动，而不是“主视图”

# time - 执行时间、加载时间和编译时间（内存管理）

> ID：15730024
> 
> 赞同：1
> 
> 时间：2013-03-31T13:46:18.960
> 
> 标签：time, compilation, load, execution

我现在正在学习操作系统主题的内存管理。

我对这 3 种不同的内存分配感到困惑。

我能够区分这 3 个分配的区别，但我想要的是每个分配的一些示例，这样可以增加我的理解。

# html - 鼠标悬停在锚标记上不显示指针光标。在 Chrome 上观察到的行为在 IE 9 上可以正常工作吗？

> ID：15730025
> 
> 赞同：5
> 
> 时间：2013-03-31T13:46:25.340
> 
> 标签：html, google-chrome, anchor, mouse-cursor

我的剃刀视图中有一个代码，如下所示。当鼠标悬停在任何锚标记上时，指针光标不显示。相同的代码在 IE 9 上运行良好。在 Chrome 浏览器上观察到此问题。

任何猜测为什么以下代码在 Chrome 版本 25.0.1364.172 m 上失败？

```
<ul id="menu" class="menu">
   <li><a href="#" style="cursor: pointer;">Top 10 Headlines</a>
   </li>
    <li><a href="#">Related Content</a>
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-29T08:21:02.983

您是否打开了开发人员工具？由于某种原因，此工具打开时光标不会显示为指针。关闭它并重试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-10T15:19:30.290

问题是 LetsGoRangers 所述的 chrome 开发人员工具

修复：按 F12 单击齿轮图标（版本 27 中的右下角）单击覆盖（左列）确保未选中“模拟触摸事件”。

即使现在打开开发人员工具，光标也应该出现。

重新启动 chrome 后它会检查自己的问题。您可能需要重新安装 chrome 才能解决此问题。

# asp.net - 从后面的 C# 代码调用存储过程时插入语句不起作用

> ID：15730026
> 
> 赞同：0
> 
> 时间：2013-03-31T13:46:26.340
> 
> 标签：asp.net, sql, stored-procedures, plsql, oracle10g

我的数据库中有一个存储过程，它将数据插入到 3 个表中。该过程已正确编译。我已经使用带有示例数据的 PL/SQL DEVELOPER 工具对其进行了测试，并且运行良好。

在存储过程的代码中，我使用了一个变量 successCnt1 来计算编号。成功的插入语句。然后将此变量分配给successCnt。我从后面的代码中获取这个变量的值。如果 successCnt == 0 则显示错误。

**问题是**当我从程序后面的 C# 代码调用它时返回successCnt == 0。请告诉我哪里做错了！提前致谢。

***表架构：***

**TBLTRAIN Schema:** {TRAINID (VARCHAR2(5)), DATE1 (DATE) , AC2SEAT (NUMBER) , AC3SEAT (NUMBER) , SLEEPERSEAT (NUMBER) , ACCHAIRCARSEAT (NUMBER) , SECONDSEAT (NUMBER)}

**TBLTRAINFARE 模式：** {TRAINID (VARCHAR2(5)), CLASS (VARCHAR2(5)), FARE (NUMBER)}

**TBLTRAINDETAIL 模式：** {TRAINID (VARCHAR2(5)) , FROM1 (VARCHAR2(15)), TO1 (VARCHAR2(15)) , TRAINNAME (VARCHAR2(15)) }

***步骤：***

```
CREATE OR REPLACE PROCEDURE TrainInsertByParameter (p_ac2seat   in number,
                                       p_ac3seat  in number,
                                       p_ccseat  in number,
                                       p_sleeperseat  in number,
                                       p_secondseat  in number,
                                       p_date1      in date,
                                       p_trainid   in varchar2,
                                       p_fare in number,
                                       p_fromplace in varchar2,
                                       p_toplace in varchar2,
                                       p_class in varchar2,
                                       p_trainname in varchar2,
                                       p_successCnt  out number)  IS
successCnt1 number(6) NOT NULL := 0;
rowUpdated1 number(6) NOT NULL := 0;
rowUpdated2 number(6) NOT NULL := 0;
rowUpdated3 number(6) NOT NULL := 0;

BEGIN
  SAVEPOINT before;

  INSERT INTO tbltrain (ac2seat,ac3seat,acchaircarseat,sleeperseat,secondseat,date1,trainid) VALUES(p_ac2seat,p_ac3seat,p_ccseat,p_sleeperseat,p_secondseat,p_date1,p_trainid);

rowUpdated1 := SQL%RowCount;
successCnt1 := successCnt1 + 1;

   dbms_output.put_line('Successful Insertion tbltrain. count ='||successCnt1);
   dbms_output.put_line('Successful Insertion tbltrain. Row Updated ='||rowUpdated1);

  INSERT INTO tbltraindetail (trainid,trainname,from1,to1) VALUES(p_trainid,p_trainname,p_fromplace,p_toplace);

rowUpdated2 := SQL%RowCount;
successCnt1 := successCnt1 + 1;

 dbms_output.put_line('Successful Insertion tbltraindetail. count ='||successCnt1);
 dbms_output.put_line('Successful Insertion tbltraindetail. Row Updated= '||rowUpdated2);

INSERT INTO tbltrainfare(trainid,class,fare) VALUES (p_trainid,p_class,p_fare);

rowUpdated3 := SQL%RowCount;
successCnt1 := successCnt1 + 1;
p_successCnt := successCnt1;

 COMMIT;

 dbms_output.put_line('Successful Insertion tbltrainfare. count ='||p_successCnt);
 dbms_output.put_line('Successful Insertion tbltrainfare. Row Updated= '||rowUpdated3);

  EXCEPTION
    WHEN Others THEN
      successCnt1 := 0;
      p_successCnt := successCnt1;
      dbms_output.put_line('An error has occured. count ='||p_successCnt);

    ROLLBACK TO before;

END; 
```

***调用C#代码后面的代码（使用Microsoft Visual Studio）***

```
OracleConnection con1 = new OracleConnection();
                 con1.ConnectionString = ConfigurationManager.ConnectionStrings["myConnectionStringOracle"].ConnectionString;

            Int32 fare = Convert.ToInt32(txtFare.Value);
            String date1 = txtDate.Value.ToString();
            String class1 = ddlClass.SelectedItem.Text.ToString();
            String fromplace = txtFromPlace.Text.ToString();
            String toplace = txtToPlace.Text.ToString();
            String trainid = txtId1.Text.ToString();
            String trainname = txtTrainName.Text.ToString();
            Int32 ac2seat = Convert.ToInt32(txtAc2TierSeat.Value);
            Int32 ac3seat = Convert.ToInt32(txtAc3TierSeat.Value);
            Int32 ccseat = Convert.ToInt32(txtAcChairCarSeat.Value);
            Int32 sleeperseat = Convert.ToInt32(txtSleeperSeat.Value);
            Int32 secondseat = Convert.ToInt32(txtSecondSeat.Value);
            Int32 SuccessCnt;

 OracleCommand cmd = new OracleCommand();
                    cmd.Connection = con1;
                    cmd.CommandText = "TrainInsertByParameter";
                    cmd.CommandType = CommandType.StoredProcedure;

                    cmd.Parameters.Add("p_ac2seat", OracleType.Number).Value = ac2seat;
                    cmd.Parameters.Add("p_ac3seat", OracleType.Number).Value = ac3seat;
                    cmd.Parameters.Add("p_ccseat", OracleType.Number).Value = ccseat;
                    cmd.Parameters.Add("p_sleeperseat", OracleType.Number).Value = sleeperseat;
                    cmd.Parameters.Add("p_secondseat", OracleType.Number).Value = secondseat;
                    cmd.Parameters.Add("p_date1", OracleType.DateTime).Value = date1;
                    cmd.Parameters.Add("p_trainid", OracleType.VarChar).Value = trainid;
                    cmd.Parameters.Add("p_fare", OracleType.Number).Value = fare;
                    cmd.Parameters.Add("p_fromplace", OracleType.VarChar).Value = fromplace;
                    cmd.Parameters.Add("p_toplace", OracleType.VarChar).Value = toplace;
                    cmd.Parameters.Add("p_class", OracleType.VarChar).Value = class1;
                    cmd.Parameters.Add("p_trainname", OracleType.VarChar).Value = trainname;

                    cmd.Parameters.Add("p_successCnt", OracleType.Number).Direction = ParameterDirection.Output;

                    try
                    {

                        cmd.ExecuteNonQuery();
                        SuccessCnt = Convert.ToInt32(cmd.Parameters["p_successCnt"].Value);

                        if (SuccessCnt == 0)
                        {
                            Page.ClientScript.RegisterStartupScript(this.GetType(), "Window", "alert('An error has occured. No data has been inserted. Please try again with valid data');", true);

                        }
                        else if (SuccessCnt > 0)
                        {
                            Page.ClientScript.RegisterStartupScript(this.GetType(), "Window", "alert('Data has been inserted successfully.');", true);
                        }

                    }
                    catch (Exception ex)
                    {

                    } 
```

***我的问题在这里：***当我调试时，在 if-else 块中（在 try{} 块内），控件总是转到 if(SuccessCnt==0){} 部分，因为该过程返回 p_successCnt ==0 。我期望控件转到 else if(SuccessCnt > 0){} 块，因为该过程应该返回 p_successCnt ==3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:20:46.543

我自己没有亲自做过，但我怀疑你必须设置参数大小：

```
// cmd.Parameters.Add("p_successCnt", OracleType.Number).Direction = ParameterDirection.Output;
OracleParameter count = new OracleParameter("p_successCnt", OracleType.Number);
count.Direction = ParameterDirection.Output;
count.Size = 8;
cmd.Parameters.Add(count); 
```

另请参阅：[Oracle 存储过程在 out 参数中不返回任何内容](http://forums.asp.net/t/1614727.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:44:47.797

我建议将输出参数添加到您的过程中，以便返回由您的过程执行时发生的任何异常产生的 SQLCODE 和 SQLERRM 值。这样，您可以通过检查 SQLCODE = 0 来检查是否成功完成。建议的更改用`-- added`注释标记：

```
CREATE OR REPLACE PROCEDURE TrainInsertByParameter (p_ac2seat   in number,
                                       p_ac3seat  in number,
                                       p_ccseat  in number,
                                       p_sleeperseat  in number,
                                       p_secondseat  in number,
                                       p_date1      in date,
                                       p_trainid   in varchar2,
                                       p_fare in number,
                                       p_fromplace in varchar2,
                                       p_toplace in varchar2,
                                       p_class in varchar2,
                                       p_trainname in varchar2,
                                       p_successCnt  out number,
                                       p_sqlcode out number,    -- added
                                       p_sqlerrm out varchar2)  -- added
IS
  successCnt1 number(6) NOT NULL := 0;
  rowUpdated1 number(6) NOT NULL := 0;
  rowUpdated2 number(6) NOT NULL := 0;
  rowUpdated3 number(6) NOT NULL := 0;  
BEGIN
  SAVEPOINT before;

  INSERT INTO tbltrain
    (ac2seat,ac3seat,acchaircarseat,sleeperseat,secondseat,date1,trainid)
  VALUES
    (p_ac2seat,p_ac3seat,p_ccseat,p_sleeperseat,p_secondseat,p_date1,p_trainid);

  rowUpdated1 := SQL%RowCount;
  successCnt1 := successCnt1 + 1;

  dbms_output.put_line('Successful Insertion tbltrain. count ='||successCnt1);
  dbms_output.put_line('Successful Insertion tbltrain. Row Updated ='||rowUpdated1);

  INSERT INTO tbltraindetail
    (trainid,trainname,from1,to1)
  VALUES
    (p_trainid,p_trainname,p_fromplace,p_toplace);

  rowUpdated2 := SQL%RowCount;
  successCnt1 := successCnt1 + 1;

  dbms_output.put_line('Successful Insertion tbltraindetail. count ='||successCnt1);
  dbms_output.put_line('Successful Insertion tbltraindetail. Row Updated= ' || rowUpdated2);

  INSERT INTO tbltrainfare(trainid,class,fare) VALUES (p_trainid,p_class,p_fare);

  rowUpdated3 := SQL%RowCount;
  successCnt1 := successCnt1 + 1;
  p_successCnt := successCnt1;

  COMMIT;

  dbms_output.put_line('Successful Insertion tbltrainfare. count ='||p_successCnt);
  dbms_output.put_line('Successful Insertion tbltrainfare. Row Updated= '||rowUpdated3);

  p_sqlcode := 0;     -- added
  p_sqlerrm := NULL;  -- added
EXCEPTION
  WHEN Others THEN
    p_sqlcode := SQLCODE;  -- added
    p_sqlerrm := SQLERRM;  -- added

    DBMS_OUTPUT.PUT_LINE('Exception: ' || p_sqlcode || ' ' || SQLERRM);  -- added

    successCnt1 := 0;
    p_successCnt := successCnt1;
    dbms_output.put_line('An error has occured. count ='||p_successCnt);

    ROLLBACK TO before;    
END; 
```

IMO 从另一个系统调用的任何 PL/SQL 过程返回 SQLCODE 和 SQLERRM 是一个好主意，因为它为您提供了一个一致的方法来确定是否发生了错误，并告诉您错误是什么。YMMV。

分享和享受。

# c# - “未使用的参数”和“未使用的类型参数”有什么区别（Resharper）

> ID：15730030
> 
> 赞同：0
> 
> 时间：2013-03-31T13:46:35.163
> 
> 标签：c#, ide, resharper

![在此处输入图像描述](https://i.stack.imgur.com/B3bEF.png)

它们之间有什么区别？有人可以给我一个“未使用的参数”和“未使用的类型参数”的例子吗？

还有一个问题，即使我是 resharper 发现了错误的东西，项目仍然在构建，如果 resharper 发现错误，我如何使构建失败

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:48:33.820

鉴于以下情况：

```
void SomeMethod<someTypeParameter>(someType someParameter)
{
  // doing all kinds of things, but not using someTypeParameter and someParameter
} 
```

未使用的类型参数将是泛型参数`someTypeParameter`（在 内部`<>`），未使用的参数将是`someParameter`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T13:49:04.977

未使用的参数：

```
void Go(string s)
{
    Console.WriteLine("I'm totally ignoring the 's' parameter");
} 
```

未使用的类型参数：

```
public static void Go<T>()
{
    Console.WriteLine("I'm totally ignoring the `T` generic parameter");
} 
```

**编辑**

关于您的第二个问题，这似乎是不可能的 - 但这里有一个[关于](http://devnet.jetbrains.com/thread/265285?tstart=30)使 ReSharper 成为您的构建过程的一部分的讨论。这是一个旧线程，但它最近仍在继续。

# ios - UIView 子类（在 ipad Splitview 中）中的 setNeedsDisplay 不调用 drawRect

> ID：15730034
> 
> 赞同：1
> 
> 时间：2013-03-31T13:46:51.390
> 
> 标签：ios, ipad

我的问题是关于我的 UIView 子类中的 setNeedsDisplay 方法，它不会在同一个类中调用 drawRect。

我正在开发一个 Ipad 应用程序来显示一个 XY 图形（笛卡尔平面），用户可以在其中输入点的坐标。（例如：2,4 和 2,8：这应该画一条垂直线）。我使用了一个主从应用程序（所以是一个拆分视图控制器）。

1）最初UIView子类中的drawRect绘制初始网格。当用户添加新点（x，y 值）时，我需要将线动态添加到网格中

2）然后在输入 x 和 y 值（在 MasterViewController 中）后，我在 UIView 子类（gridview）中调用点更新方法，如下所示：

```
- (void) updateGrid
{
    // this is a mutable array of newly created points
    self.gridview.pointList = self.pointList; 
    [self.gridview redrawGrid];
} 
```

3）我在UIView子类（gridview）中的方法中设置了setNeedsDisplay，“redrawGrid”来调用drawRect，以便用新的数据点重绘网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:56:40.700

我的猜测是你的内部有问题`drawRect:`。在方法中放置一个断点`drawRect:`，你应该很快就能看到发生了什么。

还要确保它`setNeedsDisplay`真的被调用了。

# symfony - 防止 Twig 函数扩展中的输出转义

> ID：15730037
> 
> 赞同：29
> 
> 时间：2013-03-31T13:47:01.297
> 
> 标签：symfony, twig

我创建了一个 Twig 扩展：

```
{{ image ("image.png", 200) }} 
```

嗨，我知道我能做到

```
{{ image ("image.png", 200)|raw }} 
```

...但我更喜欢使用 PHP 代码，这样所有内容（来自这个“图像”扩展名）都不会被转义。

我看不出这可能。

我知道我可以防止 Twig 中的所有输出转义，但我只希望这个扩展不要转义输出，以及其他一切都这样做。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-31T14:12:00.883

这可以通过在扩展注册时添加[一个选项来完成。](http://twig.sensiolabs.org/doc/advanced.html#automatic-escaping)

```
public function getFilters(){
    return array(
        // ...
        'image' => new \Twig_Filter_Method($this, 'imageFilter',
            array('is_safe' => array('html'))
        ),
        // ...
    );
} 
```

这将提供未转义的输入 HTML 并返回未转义的 HTML 输出。如果您需要使用转义的 HTML 输入，请参阅选项`'pre_escaped' => 'html'`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-10-16T06:19:09.433

对于树枝功能扩展，请执行此操作

```
public function getFunctions()
{
  return array(
     new \Twig_SimpleFunction(
        'image', 
        array($this, 'image'), 
        array('is_safe' => array('html')))
  );
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-04T21:58:43.440

在 twig 版本 2 中，您可以像这样解决它：

**环境**：Symfony 4 和 twig-bundle ^4.0

**代码**：

```
public function getFilters(): array
{
    return [,
        new TwigFilter('image', [$this, 'image'], ['is_safe' => ['html']]),
    ];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-21T10:18:40.340

我使用一个函数

```
$twig->addFunction(new \Twig_SimpleFunction('html', function ($code) {
   return new \Twig_Markup($code, "utf-8");
})); 
```

```
{{ html(myhtmlcode) }} 
```

# css - 两列导航菜单的第一列中的高度未拉伸

> ID：15730039
> 
> 赞同：0
> 
> 时间：2013-03-31T13:47:03.047
> 
> 标签：css

更新：

对不起，我应该在发布之前更新我的代码。这个更新的版本显示我需要在蓝色块周围有一个 1 像素的白色边框。如果“行”由于文本溢出而更高，我也需要蓝色块“更高”。

[http://jsfiddle.net/trevoray/76VRz/53](http://jsfiddle.net/trevoray/76VRz/53)

----- 原始问题：

我环顾四周，大多数关于此的问题都是针对两列页面的。我需要有关我正在创建的两列导航菜单的帮助。每当第二列中的文本溢出到下一行时，我需要随之而来的高度和背景颜色。我尝试了各种调整，但似乎无法找到正确的工作。

有人可以看看我的jsFiddle，看看你能不能解决这个问题？我需要左栏是纯蓝色的。

[http://jsfiddle.net/trevoray/76VRz/](http://jsfiddle.net/trevoray/76VRz/)

```
.nav-bar-container { font-family:Verdana, Geneva, sans-serif; font-size:13px;   }
.nav-bar-row { width:225px;  }
.nav-bar-column-1 { background-color:#4055a1; width:20px;   float:left;}
.nav-bar-column-2 { margin-left:10px; padding-left: 2.5em; text-indent:-1.2em;  }
.nav-bar-column-2 a { color:#4055a1;  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:08:28.117

拥有这么多这样的div并不好。这样做会更容易和更整洁

```
<div>
    <p>one line</p>
    <p>one line</p>
    <p>one line</p>
    <p>two lines of text over two lines</p>
</div> 
```

这是您的要求的演示[http://jsfiddle.net/kevinPHPkevin/xkN39/1/](http://jsfiddle.net/kevinPHPkevin/xkN39/1/)

# javascript - 是否有可能以某种方式将 html 元素作为图像呈现在画布上？

> ID：15730041
> 
> 赞同：1
> 
> 时间：2013-03-31T13:47:07.360
> 
> 标签：javascript, html, canvas, letter-spacing

这似乎是一个非常随机的问题，但我正试图找出一个技巧，以在画布上正确呈现字母间距文本。

在谷歌搜索之后，似乎没有办法真正做到这一点。我尝试的第一件事是渲染字符串中的每个字符，测量它，将其添加到偏移量，添加字母间距，但结果很差。可能是由于字体文件中包含有关字符配对空间等的信息。

我能想到的获得完美结果的唯一方法是将文本渲染到 html 元素，通过 CSS 设置字母间距，然后以某种方式将内存中的元素捕获为图像。我知道这不太可能，但有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:23:20.400

为什么不直接将 HTML 元素移动到画布上呢？

```
<canvas style="background-color:cyan; left:100px; right:100px; width:100px; height:100px; position:absolute" >
</canvas>
<p style="left:120px; right:100px; position:absolute; z-index:100; ">this is a test</p> 
```

# jsf-2 - JSF DataTable 显示对象而不是 MySqlDB 表 UserGroup 中的实际值

> ID：15730050
> 
> 赞同：2
> 
> 时间：2013-03-31T13:47:46.050
> 
> 标签：jsf-2, eclipselink, glassfish-3

有人可以帮我解决这个问题。我正在尝试在 JSF2.0 (xhtml page) 中创建一个用于显示、编辑和删除 UserGroup (MySQL DB 表) 中的数据的页面，该页面具有以下结构。我遇到的问题是数据实际上显示为 UserGroup 表的对象，而不是这些列中的可读值。我尝试了各种可用于 CRUD Web 应用程序的示例解决方案，但没有得到任何结果，我确定我缺少对显示和编辑行数据的整体理解。但是我的创建工作正常。我是否需要编写转换器来显示正确的值？

**附加信息**

*   Glassfish v3.1.2
*   JPA/Eclipselink v2.1
*   数据库
*   JSF2.0
*   日食朱诺 SR2

**用户组表**

1.  rowId（自动生成）
2.  groupId（组表中组 ID 的外键）
3.  用户名（用户表中用户名的外键）

**我现在得到的输出**

```
Users's and their group.
Row Id    Group Id              Username 
9         model.Group@647d73bf  model.User@683a3423  
13        model.Group@2192bac5  model.User@2823ecbb 
```

**XHTML 代码**

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<f:metadata>
    <f:viewParam name="userId" value="#{loginBean.username}"></f:viewParam>
</f:metadata>
<ui:composition>
    <h:head>
        <meta http-equiv="Content-Type"
            content="text/html; charset=ISO-8859-1" />
        <h1>Users's and their group.</h1>
        <title>Displaying Users and their Groups</title>
    </h:head>
    <h:body>
        <h:form id="form">
            <h:dataTable value="#{userGroupManagedBean.userGroup}" var="item">
                <h:column>
                    <f:facet name="header"> Row Id</f:facet> #{item.rowId}
</h:column>
                <h:column>
                    <f:facet name="header"> Group Id</f:facet> #{item.group}
</h:column>
                <h:column>
                    <f:facet name="header"> Username</f:facet> #{item.user}
</h:column>
            </h:dataTable>
        </h:form>
    </h:body>
</ui:composition>
</html> 
```

***托管 Bean 类**

```
package beans;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
//import javax.faces.model.DataModel;
//import javax.faces.model.ListDataModel;

import model.UserGroup;

import ejb.UserGroupDaoBean;

@ManagedBean(name = "userGroupManagedBean", eager = true)
@SessionScoped
public class UserGroupManageBean implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @EJB
    private UserGroupDaoBean uGDB;
    // private DataModel<UserGroup> userGroup;
    private List<UserGroup> userGroup;
    private UserGroup currentUserGroup;
    public String username;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public int getGroupId() {
        return groupId;
    }

    public void setGroupId(int groupId) {
        this.groupId = groupId;
    }

    public int groupId;

    // public void setUserGroup(DataModel<UserGroup> userGroup) {
    // this.userGroup = userGroup;
    // }

    public void setUserGroup(List<UserGroup> userGroup) {
        this.userGroup = userGroup;
    }

    public UserGroup getCurrentUserGroup() {
        return currentUserGroup;
    }

    @PostConstruct
    public void init() {

        getUserGroup();
    }

    public List<UserGroup> getUserGroup() {

        List<UserGroup> myAllUserGroups = new ArrayList<UserGroup>(
                uGDB.getAllUserGroups());

        return myAllUserGroups;
    }

    // public DataModel<UserGroup> getUserGroup() {
    // userGroup = new ListDataModel<UserGroup>(uGDB.getAllUserGroups());
    // System.out.println(userGroup);
    // return userGroup;
    // }

    // public String delete() {
    // UserGroup myUserGroup = userGroup.getRowData();
    // uGDB.deleteUserGroup(myUserGroup);
    // getUserGroup();
    // return
    // "displayUserGroup.jsf?faces-redirect=true&amp;includeViewParams=true";
    // }

    public String delete(UserGroup currentUserGroup) {
        userGroup.remove(currentUserGroup);
        getUserGroup();
        return "displayUserGroup.jsf?faces-redirect=true&amp;includeViewParams=true";
    }

    // public String edit(){
    // currentUserGroup = userGroup.getRowData();
    // System.out.println("And the current user group data is:" +
    // currentUserGroup);
    // getUserGroup();
    // return
    // "editUserGroup.jsf?faces-redirect=true&amp;includeViewParams=true";
    // }

    public String save() {

        uGDB.updateExistingUserGroup(currentUserGroup);

        getUserGroup();
        return "displayUserGroup.jsf?faces-redirect=true&amp;includeViewParams=true";
    }

    public String cancel() {
        // getUserGroup();
        return "displayUserGroup.jsf?faces-redirect=true&amp;includeViewParams=true";
    }

    public void setCurrentUserGroup(UserGroup currentUserGroup) {
        this.currentUserGroup = currentUserGroup;
    }
} 
```

**控制器类**

```
package ejb;

import java.util.List;

import javax.ejb.LocalBean;
import javax.ejb.Stateful;

import javax.persistence.EntityManager;
import javax.persistence.NoResultException;
import javax.persistence.Query;

import javax.persistence.PersistenceContext;

import model.Group;
import model.User;
import model.UserGroup;

@Stateful
@LocalBean
public class UserGroupDaoBean {
    @PersistenceContext(unitName = "myPU")
    private EntityManager entityManager;

    public UserGroupDaoBean() {

    }

    public UserGroup createNewUserGroup(int groupId, String username) {

        UserGroup newUserGrp = new UserGroup();

        User myUsr;
        myUsr = entityManager.find(User.class, username);
        newUserGrp.setUser(myUsr);

        Group myGrp;
        myGrp = entityManager.find(Group.class, groupId);
        newUserGrp.setGroup(myGrp);

        saveNewUsrGrp(newUserGrp);
        return newUserGrp;
    }

    private void saveNewUsrGrp(UserGroup usrGrp) {
        entityManager.persist(usrGrp);
        entityManager.flush();
    }

    public boolean checkUsertoGroup(String username, int groupId) {

        Group chkGrp;
        chkGrp = entityManager.find(Group.class, groupId);

        User chkUsr;
        chkUsr = entityManager.find(User.class, username);

        if (chkGrp != null) {

            if (chkUsr != null) {

                try {
                    entityManager.createNamedQuery("findGroupsbyUser")
                            .setParameter("username", chkUsr)
                            .setParameter("groupId", chkGrp).getSingleResult();
                    System.out.println("UserGroup already exists");
                    return false;
                } catch (NoResultException e) {
                    return true;
                }

            }
            System.out.println("User doesn't exist");
            return false;
        }
        System.out.println("Group doesn't exist");

        return false;

    }

    public void deleteUserGroup(UserGroup userGroup) {
        userGroup = entityManager.merge(userGroup);
        entityManager.remove(userGroup);
    }

    public UserGroup update(UserGroup userGroup) {

        UserGroup myUserGroup = entityManager.merge(userGroup);

        return entityManager.merge(myUserGroup);
    }

    public UserGroup updateExistingUserGroup(UserGroup userGroup){
        UserGroup myExistingUsrGrp = update(userGroup);
        return myExistingUsrGrp;
    }

    @SuppressWarnings("unchecked")
    public List<UserGroup> getAllUserGroups() {

        try {
            Query query = entityManager.createNamedQuery("findAllUserGroup");
            List<UserGroup> result = (List<UserGroup>) query.getResultList();

            return result;

        } catch (NoResultException e) {
            System.out.println("No Result found");
            return null;
        }
    }

    public boolean validateGroup(User username) {

        Group groupId = entityManager.find(Group.class, 1);

        try {
            UserGroup myGroupId = (UserGroup) entityManager
                    .createNamedQuery("findAdminGroupId")
                    .setParameter("username", username)
                    .setParameter("groupId", groupId).getSingleResult();

            if (myGroupId != null) {
                System.out.println("This user is admin!!!");
                return true;
            }

        } catch (NoResultException e) {
            return false;
        }

        System.out.println("This user is not admin");
        return false;
    } 
```

**用户组 POJO**

```
package model;

import java.io.Serializable;
import javax.persistence.*;

/**
 * The persistent class for the UserGroup database table.
 * 
 */
@NamedQueries({

    @NamedQuery(name = "findGroupsbyUser", query = "Select ug.group from UserGroup ug where ug.user=:username AND ug.group=:groupId"),

    @NamedQuery(name = "findAllUserGroup", query="Select ug from UserGroup ug"),

    @NamedQuery(name = "findAdminGroupId", query = "Select ug from UserGroup ug where ug.user=:username AND ug.group=:groupId"),

})
@Entity
@Table(name="usergroup")
public class UserGroup implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name="RowId" )
    private int rowId;

    //bi-directional many-to-one association to Group
    @ManyToOne
    @JoinColumn(name="groupId")
    private Group group;

    //bi-directional many-to-one association to User
    @ManyToOne
    @JoinColumn(name="username")
    private User user;

    public UserGroup() {
    }

    public int getRowId() {
        return this.rowId;
    }

    public void setRowId(int rowId) {
        this.rowId = rowId;
    }

    public Group getGroup() {
        return this.group;
    }

    public void setGroup(Group group) {
        this.group = group;
    }

    public User getUser() {
        return this.user;
    }

    public void setUser(User user) {
        this.user = user;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:33:15.067

您将 userGroup 的组和用户对象传递给 JSF，而不是值。您可能想要传递 item.group.id 和 item.user.id 或它们的等价物。

# html - 选中的属性值在 HTML 中真的是可选的吗？

> ID：15730061
> 
> 赞同：2
> 
> 时间：2013-03-31T13:48:40.003
> 
> 标签：html, checkbox, standards

`<input checked>`对比`<input checked="checked">`

两者似乎都有效。在[w3schools](http://www.w3schools.com/tags/att_input_checked.asp)上存在第一种语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:50:28.187

是的。这是有效的。

任何布尔属性都不必附加值。简单地存在意味着“真实”。

需要一个值来自 XML/XHTML，其中这种语法是不合法的，尽管即使在它们中，简单的存在意味着“真实”，尽管该值取决于您所遵循的规范（尽管当前的 whatwg 规范确实这么说`true`并且`false`不是有效值）。

[whatwg 当前的 HTML 标准对布尔属性](http://www.whatwg.org/specs/web-apps/current-work/#boolean-attributes)有这样的说法：

> 许多属性是布尔属性。元素上存在布尔属性表示真值，不存在该属性表示假值。

W3 HTML 5 本质上说该值需要是属性名称本身的小写 ASCII 值：

> 如果存在该属性，则其值必须是空字符串或与属性的规范名称匹配的不区分大小写的 ASCII 值，并且没有前导或尾随空格。

这在[HTML 4.01 规范](http://www.w3.org/TR/REC-html40/intro/sgmltut.html#didx-boolean_attribute)中也得到了回应：

> 布尔属性可以合法地采用单个值：属性本身的名称（例如，selected="selected"）。

（感谢 Jukka K. Korpela 提供最后两个的链接）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:16:16.903

两者在 HTML 4.01 规范下都是有效的，并且当文档以 HTML 媒体类型 (text/html) 提供时，它们都可以在所有浏览器中工作，这是服务器通常所做的。一些非常早期的浏览器只接受较短的形式，但那是*非常*古老的历史。

当使用 XML 媒体类型（例如为 XHTML 设计的那些）提供服务时，都会使文档无效甚至格式不正确，因此浏览器根本不显示文档，只是一条错误消息。在 XHTML 中，元素必须是`<input checked="checked" />`.

HTML5 草案（以及 WHATWG “Living HTML”）没有太大变化。它调用像`checked`“布尔属性”这样的属性，这是一种误导（值`true`并且`false`根本不被接受），但语法规则与 HTML 4.01 相同，但`checked=""`也允许，并且该属性仅在该`type`属性时才被允许存在并具有值`radio`or `checkbox`（这一直是想法，但 HTML5 建议将此作为正式规则，将由标记验证器检查）。

w3schools 非常不可靠，见[http://w3fools.com](http://w3fools.com)

# c++ - 编译时出现 C++ 错误

> ID：15730062
> 
> 赞同：-1
> 
> 时间：2013-03-31T13:48:45.490
> 
> 标签：c++, operator-keyword

嗨，我正在做这个项目，当我编译它时，我得到了一个错误。

```
ostream& operator<<(ostream& os, CService& obj) {

        os<<obj.GetClient()<<obj.GetSeller()<<obj.GetMusic();
        return os;

    } 
```

我得到的错误是：

```
error C2804: binary 'operator <<' has too many parameters
error C2333: '<<' : error in function declaration; skipping function body 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T13:50:18.740

您应该在类主体*外部*声明此函数，并在`CService`类内部将其声明为友元。此外，不要忘记创建类对象`const`：

```
friend std::ostream& operator <<(std::ostream& os, CService const &); 
```

# php - 404定制

> ID：15730063
> 
> 赞同：0
> 
> 时间：2013-03-31T13:48:45.693
> 
> 标签：php, .htaccess, http-status-code-404

我想制作一个自定义的 404 页面。

我创建了一个 .htaccess 只包含这一行：

```
ErrorDocument 404 /errors/404.html 
```

我的网站结构是这样的：

*   错误
    *   404.html
*   索引.php
*   .htaccess
*   包括
    *   header.html

我总是在 404 页面上得到这个错误：

```
Not Found

The requested URL /blabla/bg was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

一个想法 ？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:07:01.620

我的猜测是您的文档根目录不等于您`.htaccess`的位置。不幸的是，`ErrorDocument`与您所在的位置无关`.htaccess`，而是基于您的文档根目录的路径（例如`/var/www/`）

我过去用来获取“相对”404错误页面的一种（一种hacky）解决方案是执行以下操作：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.* 404.php [L] 
```

执行此操作的另一种（也是更正确的方法）是从服务器上的真实文档根目录指定整个路径。

要获得此完整路径，您需要在浏览器中打开 404 页面（并在您的情况下将其设为 php 页面，以便您可以获取此变量：`$_SERVER['SCRIPT_NAME']` 或者如果您碰巧对目录结构的设置有更多了解. 你可以基于它`$_SERVER['DOCUMENT_ROOT']`

# jquery - 如何使用带有 base64 图像的颜色框？

> ID：15730065
> 
> 赞同：1
> 
> 时间：2013-03-31T13:48:54.987
> 
> 标签：jquery, backbone.js, colorbox

我正在尝试将 colorbox 图像与 base64 一起使用，但是当我单击以在幻灯片中打开图像时，它不会打开。我正在使用骨干框架。

```
<!-- html code -->
<a href="<img src="data:image/png;base64,<%= image %>"/>" title="<%= description %>"> 
    <img src="data:image/png;base64,<%= image %>" alt="" />
</a>

//javascript code
this.$el.find('ul li > a').attr('rel', 'gallery').colorbox({
   maxWidth     : '80%',
   maxHeight    : '80%',
   opacity      : '0.1',
   inline       : true,
   html         : true,
   loop         : true,
   slideshow    : true,
   slideshowAuto: false,
   fixed        : true
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-09T11:50:41.327

您可以轻松地在 colorbox 中使用 base64 图像。base64 图像是预加载的图像，因此只需在您的颜色框初始化中添加一个照片属性

```
$('a.img_box').colorbox({'photo':true}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-10T14:46:54.397

如果您仍想使用 Colorbox 而不是 Fancybox，最简单的解决方案是对 Colorbox 撒谎并告诉它是 JPG。只需在末尾添加“#.jpg”即可。例如：

```
<a href="<img src="data:image/png;base64,<%= image %>#.jpg"/>" title="<%= description %>">
    <img src="data:image/png;base64,<%= image %>" alt="" />
</a> 
```

这应该很容易工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:48:30.553

嗨问题用库 fancylightbox 解决了。

```
this.$el.find('ul li > a').fancybox(); 
```

# php - Xdebug 探查器和存储请求数据

> ID：15730066
> 
> 赞同：1
> 
> 时间：2013-03-31T13:48:59.120
> 
> 标签：php, xdebug, profiler

我正在尝试使用 xdebug 的分析器功能来查找我的 PHP 代码的瓶颈。我已经设法设置了 xdebugger 的分析器和一切。最重要的是，我发现我需要启用*探查器附加*，这样不同的请求就不会覆盖彼此收集的配置文件数据。这样，一个*cachegrind.out*文件将包含多个部分，每个部分都属于不同的请求。现在我的问题是我需要知道每个部分的请求数据。通过请求数据，我的意思是 GET / POST。

这可能吗？我正在使用 KCacheGrind 来可视化分析器数据。

# php - 相关标签算法

> ID：15730082
> 
> 赞同：3
> 
> 时间：2013-03-31T13:50:34.533
> 
> 标签：php, algorithm, tags, cassandra

我需要通过主要寻找相关标签来找到一种获取相关视频的方法。

首先让我们看一下我的标签在数据库中的存储方式：

![在此处输入图像描述](https://i.stack.imgur.com/YNp0x.jpg)

请注意，这不是 MySQL 数据库，我使用的是[**Cassandra**](http://cassandra.apache.org/)。

如您所见，每个标签都包含一个具有该标签的帖子 ID 列表。这样获取帖子 ID 会很容易，用 SQL 语言我会说：

`SELECT * from tags WHERE id = "cars" AND id = "movies"`.

好吧，这部分很容易，现在我有大量带有相关标签的帖子，对吧？

但是我无法克服的问题来了。由于一个帖子可以比另一个帖子具有更多相关标签，因此它比其他帖子更重要。当然，我可以一起破解一些东西，看看哪个帖子有更多相关的标签，但另一个更严重的问题来了。

假设我们有 20 个标签，所以我们查找 20 行，这 20 行总共包含大约 1 亿个 id，运行 1 亿个 id 并将它们相互比较需要大量资源和时间。所以我想问这种情况如何改善？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:12:56.233

就像大多数人在评论中所说的那样..

您可能需要考虑更改管理数据库中标签的方式。我假设您有一个“帖子”表；也许您应该在该表中添加一个“标签”列，而不是为标签创建一个单独的表。

除了可以非常快速地访问相关标签..

如果空间不是真正的问题，您可以对每个帖子的“标签”列进行全文索引（或者更确切地说，Cassandra 等效项），甚至可以在短时间内访问相关帖子。当然，您仍然需要限制搜索相关帖子，但这只是使用 LIMIT 的问题。

# node.js - 我应该选择哪个版本的 Node.js

> ID：15730083
> 
> 赞同：3
> 
> 时间：2013-03-31T13:50:34.710
> 
> 标签：node.js, express, formidable

我计划构建一个基于 Node.js 的 Web 应用程序。按照常识，我安装了最新版本的 Node.js (v0.10.0)。还建议我使用 express.js 来避免使用低级 API。

当我尝试安装 express.js 包时，我发现它无法安装，因为缺少一些依赖项。因此，我尝试一一安装所有缺少的依赖项。除了要求 node.js 版本小于 0.9.0("node": "<0.9.0")} 的 formidable.js 之外，所有包都可以安装。我很沮丧，因为对于我的新开发，我想使用 Node.js 的最新 stalbe 版本，而不是选择一个非常早期的版本（0.9.0）。

那么，如果我仍然想使用 express.js，我真的应该将我的 node.js 回滚到早期版本（<0.9.0）吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T14:09:34.620

Node`0.10.0`相对较新，许多框架和库还不支持此版本。

Node`0.9.x`是一个不稳定的版本，因为每个奇数版本（每个偶数版本都被认为是稳定的，例如 , `0.6.x`, `0.8.x`, `0.10.x`...）。

首先，您可以使用最新`0.8.x`版本并`0.10.x`随着库的发展升级到更高版本。

可以在此处找到节点版本控制架构：[https ://github.com/joyent/node/wiki/FAQ#what-is-the-versioning-scheme](https://github.com/joyent/node/wiki/FAQ#what-is-the-versioning-scheme)

**提示：**有一个工具[Nave](https://github.com/isaacs/nave)允许您一次使用多个节点安装。

### 编辑 2013-12-04

同时Node`0.10.x`非常稳定，应该选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:12:54.133

您可以使用[节点版本管理 (nvm)](https://github.com/creationix/nvm)来使用不同版本的节点。也就是说，如果您刚刚开始，我现在会坚持使用 0.8

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T14:14:26.700

而不是使用新版本，我建议您检查您的框架和库支持的版本。

在 Node.js 中，旧库可能未使用您要使用的最新版本的 nodejs 进行更新。

# jquery - WordPress json api 插件 - 从 jQuery 调用

> ID：15730086
> 
> 赞同：0
> 
> 时间：2013-03-31T13:50:48.110
> 
> 标签：jquery, json, wordpress, getjson

我正在为 wordpress 使用[JSON API 插件](http://wordpress.org/extend/plugins/json-api/other_notes/)。[它从我位于http://grmmph.com/?json=1](http://grmmph.com/?json=1)的 wordpress 内容生成一个 json 文件。

如果从上面的链接来看，它似乎工作正常，但是当我尝试用 jQuery 调用它时，它没有得到任何调用。

```
 var url = "http://grmmph.com/?json=1&count=1"; 
        jQuery.getJSON(url, function() {
        alert('Test!'); // Test if it is even working, not alert appears.
    }); 
```

有任何想法吗？也许是一个更好的 json WordPress 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:21:50.937

我记得我过去一直在努力寻找将 JSON 与 Wordpress 一起使用并能够使用 jQuery 获取结果的好方法。我希望我写（并接受）的答案对您有所帮助。

[get_the_content() 的结果未正确显示](https://stackoverflow.com/questions/9753853/result-of-get-the-content-not-correctly-displayed)

# c++ - 将相机分别移动到其位置

> ID：15730087
> 
> 赞同：0
> 
> 时间：2013-03-31T13:50:48.507
> 
> 标签：c++, opengl, freeglut, trigonometry

我认为这将简单明了，但事实并非如此。我在 openGL 应用程序中有一个摄像头，我正在将显示的图像分别转换为摄像头“位置”。位置由`Up`和更改`Down`。可以使用`Left`和旋转相机`Right`。当相机旋转时，向前和向后移动应该是不同的。这是我编造的：

```
 //Somewhere in event handler switch
  else if (key == GLUT_KEY_UP|| key == GLUT_KEY_DOWN) {
    char direction = key==GLUT_KEY_UP?1:-1;   //Whether it is forward or backward movement
    std::cout<<"Moving camera in direction "<<(int)direction<<" with angle "<<rotate_y<<'\n';
    std::cout<<" - this means X is multiplied by "<<((sin((rotate_y/180)*M_PI)+1)/2)<<'\n';
    camera_x += 0.5*((sin((rotate_y/180)*M_PI)+1)/2)*direction;
    camera_z += 0.5*((cos((rotate_y/180)*M_PI)+1)/2)*direction;
  } 
```

原始旋转以度为单位，但`sin()`from`math.h`接受弧度。我在结果中加 1 以获得 0-2 之间的结果。然后，当我将结果除以 2 时，我将`sin`or幅度从 2 更改为 1。 这意味着 - 当相机观察 0、90、180、270 或 360 度时，函数应返回 0-1 值。我对吗？ 开头的0.5只是移动速度。`cos`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:01:09.963

我认为您不希望`sin`/的输出`cos`在 0 - 1 范围内。

如果您尝试在特定方向上生成运动矢量，那么您需要在原点周围生成一个圆圈中的点，这正是您在应用比例和偏移之前所拥有的。相反，您正在围绕点 0.5,0.5 生成一个圆圈，如果用作方向向量，则可能指向错误的方向：

```
方向角向量 你的向量 实际方向
N 0 0, 1 0.5, 1 ~NNE
E 90 1, 0 1 , 0.5 ~ENE
S 180 0, -1 0.5, 0 E
W 270 -1, 0 0 , 0.5 N

```

请注意，您只能在一个象限中生成方向（因为您的结果总是积极的）并且它们都不是您想要的。

# json - 为什么我的 json_decode 返回空？

> ID：15730090
> 
> 赞同：-1
> 
> 时间：2013-03-31T13:51:08.153
> 
> 标签：json

我有以下 JSON：

```
 a:2:{i:0;s:6:"qweqwe";i:1;s:12:"vbnvbnvbnvbn";} 
```

当我使用`json_decode();`它时返回`null`。有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:55:12.177

> 我有以下 JSON：

不，那不是 JSON。这就是为什么。

# python - “编程集体智慧”的例子不起作用

> ID：15730091
> 
> 赞同：0
> 
> 时间：2013-03-31T13:51:08.353
> 
> 标签：python, search, search-engine, ranking

[我从这里](http://kiwitobes.com/PCI_Code.zip)下载了源代码。我尝试运行 Toby Segaran 所著的“Programming Collective Intelligence”一书的第 4 章中的示例。我的python版本是2.7.2。我在解释器中输入这段代码：

```
import searchengine
pages=['http://en.wikipedia.org/wiki/Programming_language']
crawler = searchengine.crawler('searchindex.db')
crawler.crawl(pages) 
```

并得到消息：

```
Could not open http://en.wikipedia.org/wiki/Programming_language 
```

或者有时会收到消息：

```
Indexing http://en.wikipedia.org/wiki/Programming_language
Could not parse page http://en.wikipedia.org/wiki/Programming_language 
```

总之，爬虫不会索引页面。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T08:45:56.350

将`def separateWords(self,text)`大写的 W 变为小写，在 中`gettextonly(self,soup)`，`v==Null`变为`None`。您还必须执行后面的步骤，例如

```
>> crawler=searchengine.crawler('searchindex.db') 
>> crawler.createindextables()
>> crawler=searchengine.crawler('searchindex.db') 
```

首先，然后尝试运行`page=['***']`等步骤。

# php - 如何使用 php 从数据库中使用 mysqlquery 从选定的下拉框中显示总成本

> ID：15730092
> 
> 赞同：0
> 
> 时间：2013-03-31T13:51:34.147
> 
> 标签：php, mysql

我正在构建一个页面，您可以在其中自定义构建具有 14 个组件（如主板、处理器等）的桌面。

我已经将它们显示在显示产品名称和价格的下拉框中

下面的代码是我目前正在执行的代码：

```
<?php

$query="SELECT product_name, price FROM processor ORDER BY id ASC";
$result = mysql_query($query);
$options="";
echo "<select name='processor' value=''>
<option>Please Select A Processor</option>";
while($nt=mysql_fetch_array($result))
{
echo "<option value='".$nt['price']."'>".$nt['product_name']." - ".$nt['price']."</option>";
}
echo "</select>";
?> 
```

但是，一旦他们从几个下拉框中选择了一个组件，我还需要它在总价框中显示价格。

我不确定如何格式化上述代码以在我的系统中启用总价功能。

有没有这样的方式这样做，或者我需要这样做：

```
<select name="number" onchange="price();">
<option value="250">250</option>
<option value="500">500</option>
<option value="750">750</option>
<option value="1000">1000</option>
</select> 
```

建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:15:44.680

最好的方法是使用[JQuery](http://jquery.com/)。

然后假设你的总盒子有 id=total

```
function price(){
     $('#total').val($('input[name="number"]:selected').val());
} 
```

这基本上将总项目的值设置为“数字”选择器中选择的值。

因为您的总数可能是多个选择器的总和，您可能需要类似

```
function price(){
     var total = 0 ;
     total += $('input[name="item_1"]:selected').val();
     total += $('input[name="item_2"]:selected').val();
     $('#total').val(total);

} 
```

如果你有很多选择器，你可以把它们放在一个 javascript 数组中并循环遍历数组来计算总数，或者使用 JQuery 中的 .each() 函数

# php - 在每个输出之后显示逗号，而不是在最后一个之后

> ID：15730093
> 
> 赞同：-1
> 
> 时间：2013-03-31T13:51:58.983
> 
> 标签：php, function, smarty

我有这个功能代码：

```
 public function getMovieCategoryDetails($movieid){
        $movieid = mysql_real_escape_string($movieid);
        $tags = array();
         if ( !( $e = mysql_query("SELECT * FROM movie_tags WHERE id IN (SELECT tag_id FROM movie_tags_join WHERE movie_id=$movieid)") ) ) 
{
            exit( mysql_error( ) );
        }
while ( 0 < mysql_num_rows( $e ) && ( $s = mysql_fetch_array( $e ) ) )
        {
            extract( $s );
            $tags[$id] = array( );
            $tags[$id]['tag'] = $tag;

        }
        return $tags;
    } 
```

输出代码是：

```
{foreach from=$tags key=id item=val name=tags}
{$val.tag}
{/foreach} 
```

现在是显示：category1 category2 category3

我想要：category1,category2,category3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:01:47.620

在我的脑海中，我建议使用 smarty 变量。

```
{foreach from=$tags key=id item=val name=tags}
    {if !$smarty.foreach.tags.first},{/if}{$val.tag}
{/foreach} 
```

请参阅[smarty 文档](http://www.smarty.net/docsv2/de/language.function.foreach.tpl)以获取更多参考。

# python - 如何从 python 程序显示网页？

> ID：15730099
> 
> 赞同：0
> 
> 时间：2013-03-31T13:52:52.173
> 
> 标签：python

我有一个需要分类的网页列表，因此我尝试在 python 中编写一个脚本来显示该网页，然后根据按键将该网页的 url 保存到不同的文件中，具体取决于钥匙。

但是我不确定从我拥有的网址显示网页的最简单方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:20:28.150

[webbrowser 模块](http://pymotw.com/2/webbrowser/)将允许您在浏览器中从 Python 打开 HTML 文件，但我不确定您是否仍然能够从那里操作该程序。直觉告诉我，如果不使用 Python 制作自己的整个浏览器，那将是不可能的（或者至少非常困难）。

# java - 以编程方式编译 java 文件

> ID：15730102
> 
> 赞同：10
> 
> 时间：2013-03-31T13:53:23.360
> 
> 标签：java, compiler-construction, playframework, playframework-2.0, tools.jar

我知道这已经被问了很多，但我仍然没有一个好的解决方案，我仍然不明白某些部分。所以我需要以编程方式编译 *.java 文件。

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler(); 
```

是我正在使用的，并且（如预期的那样）编译器是`null`. 现在，我确实知道我必须使用 JDK 而不是 JRE 作为“运行时”，但这里有一些我不明白的地方：仅仅放入`tools.jar`应用程序的类路径然后访问还不够吗？到 Java 编译器 API？如果这是真的，那么独立的 Java 应用程序和基于 Web 的应用程序之间是否存在（我认为存在）差异。实际上，我正在尝试从 PlayFramework webapp 调用 JavaCompiler，所以我想通了，也许这个解决方案（包括`tools.jar`）仅适用于独立应用程序？

我还尝试创建一个自定义 ClassLoader 并使用反射调用上述方法，但我得到的只是`null`对象`compiler`：

```
ClassLoader classloader = app.classloader();
File file = new File("lib/tools.jar");          
URL url = file.toURI().toURL();
URL[] urls = new URL[]{url};
ClassLoader newCL = new URLClassLoader(urls, classloader) {
};
Class<?> loadClass = newCL.loadClass("javax.tools.ToolProvider");
Method method = loadClass.getMethod("getSystemJavaCompiler", null);             
Object object = method.invoke(null);
System.out.println("Object: " + object); // NULL 
```

上面代码的解释：

*   为了简单起见，我没有包括 try/catch。
*   app.classloader() 是一个播放方法，它返回 App 的 ClassLoader
*   `tools.jar`包含在 Play 项目的我的 lib 文件夹中（这意味着它位于项目的类路径中 - 根据 Play 文档）

我很确定在 Play 能够加载 Java Compiler 类之前我还需要做一些其他事情，我只是不知道我缺少什么。

我知道像 Eclipse JDT 编译器这样的选项`Runtime.exec("javac myFile.java")`，但这不是我想要的。

`System.setProperty("java.home", "PATH_TO_YOUR_JDK");`哦，然后类似的东西`ToolProvider.getSystemJavaCompiler();`正在工作，但我发现这个解决方案太难看了。

此致

**编辑**：（提供更多信息并反映最后状态）这是 web-app-structure 的基本表示：

```
myApp
|-conf\...
|-lib\MyJar.jar
|-lib\tools.jar
|-logs\...
|-... 
```

MyJar.jar 现在有一个`META-INF/MANIFEST.MF`包含以下内容的文件：

```
Manifest-Version: 1.0
Sealed: true
Main-Class: here.comes.my.main.class
Class-Path: tools.jar 
```

*在不*启动 Play 应用程序的情况下，我正在尝试（在`lib`文件夹中）：`java -jar MyJar.jar`- 我的简单`main`方法尝试调用 Compiler ( `ToolProvider.getSystemJavaCompiler();`) 并返回`null`. 所以这让我相信，这个问题与 Play 无关——在正常运行我的 Jar 时，我什至无法获得编译器！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:18:09.703

Web 应用程序和独立应用程序之间没有区别。

您不应该将 tools.jar 打包到您的 webapp 类路径中。Java 中的类加载器通常只能自下而上工作。因此，作为 jdk 一部分的 ToolProvider 不会在 webapp 类路径中看到您的 tools.jar（它不能向下查看 webapp 类路径）。

解决方案：使用 JDK 并确保指向它或将 tools.jar 放在 Java ext 目录中。您可以通过将属性 -Djava.ext.dir 设置为您喜欢的任何目录来覆盖 ext 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:21:44.947

它在[文档](http://www.playframework.com/documentation/2.0/Installing)中说您是`To run the Play framework, you need JDK 6 or later.`如何设法使用 jre 运行它的？

无论如何，如果`getSystemJavaCompiler`返回 null 这意味着您`tools.jar`的类路径中没有或它已损坏。如果是 Sun/Oracle java，请确保其中包含`com.sun.tools.javac.api.JavacTool`类。

如果您想使用自定义类加载器，您需要加载的是 JavacTool 类，而不是 ToolProvider。看看它在 java 6 中的执行方式：

```
 URL[] urls = {file.toURI().toURL()};
        ClassLoader cl = URLClassLoader.newInstance(urls);
        cl.setPackageAssertionStatus("com.sun.tools.javac", true);
        return Class.forName(defaultJavaCompilerName, false, cl); 
```

在哪里`defaultJavaCompilerName = "com.sun.tools.javac.api.JavacTool"`

将其子类化`JavaCompiler`并获取新实例 - 你将拥有你的编译器。

# java - 同步（类引用）有什么作用？

> ID：15730105
> 
> 赞同：4
> 
> 时间：2013-03-31T13:53:47.397
> 
> 标签：java, concurrency, static, synchronized

```
synchronized(Foo.Class){
   //some code..
} 
```

这会锁定 Foo 类的所有实例还是仅锁定静态方法/字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T13:58:32.130

它进入`Foo.class`对象的监视器。如果另一个方法也同步`Foo.Class`，它必须等待，假设它在不同的线程中。

如果一个方法没有对其进行同步，那么无论它是否是静态的，它都不会受到影响。并不是说同步静态方法隐式地在定义它们的类的类对象上同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T13:25:51.113

类对象的同步与实例的同步完全一样。诸如此类的类`Foo.class`是一个对象，因此具有内置监视器。您提供的代码：

```
synchronized(Foo.Class){
   //some code..
} 
```

同步对 Foo 类的访问。它在尝试同步类的静态变量时很有用。例如：

```
public class Foo{

    private static int COUNTER = 0;

    synchronized public static void increment(){

        COUNTER ++;
    }

    public static void decrement(){
        synchronized (Foo.class) {

            COUNTER ++;
        }
    }
} 
```

如您所见，`Foo.class`可以与任何实例一样实现同步。当尝试同步实例的代码块时，`synchronized(this){}`使用 : 相当于`synchronized(Foo.class){}`类对象的情况。这同样适用于同步方法： `synchronized public void increment(){}`相当于：`synchronized public static void increment(){}`

现在关于你的问题：

> 这会锁定 Foo 类的所有实例还是仅锁定它的静态方法/字段？

当然，它不会像上面解释的那样获取所有实例的锁。此外，类对象不知道创建的实例。`synchronized`块不锁定字段。它只锁定一个代码/方法块，该代码块被获取该锁的线程强制作为原子操作执行，并且没有其他线程可以进入该代码块（但如果它们不同步，则可以执行其他块），直到第一个线程释放锁（在 Java 中是大括号的结尾**`}`**）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:06:36.120

它同步对使用它的方法/同步子句的访问。这些可以是 Bar 类的方法——不一定是 Foo。

重要的是，在“Foo.class”上同步的所有方法/同步子句都相互排除在同时执行之外。

同步根本不影响字段——没有办法声明字段同步。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-31T14:13:09.853

我对本[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html) `synchronized(Foo.class) {...}`的解释将只锁定类的静态成员。但要确保你需要编写一个测试。

```
public class SyncTest {
    public static SyncTest instance;
    public static String valueA;
    public String valueB;

    public static void main(String[] args) {
        instance = new SyncTest();

        (new Thread(new Task1())).start();
        (new Thread(new Task2())).start();
        try {
            Thread.sleep(10000);
            synchronized(SyncTest.class) {
                System.out.println("Value A: " + valueA);
            }
            synchronized(instance) {
                System.out.println("Value B: " + instance.valueB);
            }
        } catch (InterruptedException interrupt) { }
    }
}

class Task1 implements Runnable {
    public void run() {
        try {
            synchronized(SyncTest.class) {
                System.out.println("Task 1 Sleeping ");
                Thread.sleep(500);
                SyncTest.valueA = "One";
                System.out.println("T1 A: " + SyncTest.valueA);
            }

            synchronized(SyncTest.instance) {
                Thread.sleep(1000);
                SyncTest.instance.valueB = "Two";
                System.out.println("T1 B: " + SyncTest.instance.valueB);
            }
        } catch (InterruptedException interrupt) { }
        System.out.println("Task 1 Finished ");
    }
}

class Task2 implements Runnable {
    public void run() {
        System.out.println("Task 2 Started");
        try {
            Thread.sleep(1000);
            synchronized(SyncTest.class) {
                SyncTest.instance.valueB = "Four";
                System.out.println("T2 B: " + SyncTest.instance.valueB);

                Thread.sleep(5000);

                SyncTest.valueA = "Three";
                System.out.println("T2 A: " + SyncTest.valueA);
            }
        } catch (InterruptedException interrupt) { }
        System.out.println("Task 2 Finished");
    }
} 
```

这给出了输出：

```
Task 1 Sleeping 
Task 2 Started
T1 A: One
T2 B: Four
T1 B: Two
Task 1 Finished 
T2 A: Three
Task 2 Finished
Value A: Three
Value B: Two 
```

当任务 2 更新`valueB`而任务 1 持有实例锁时，我认为这表明静态锁不会锁定类的所有实例。

# mongodb - SQL to MapReduce：where子句中的min函数，怎么写？

> ID：15730111
> 
> 赞同：0
> 
> 时间：2013-03-31T13:54:35.470
> 
> 标签：mongodb, mapreduce

这是我的收藏：

```
{
    "_id" : ObjectId("5156c3722653306612b4a4a0"),
    "ps_availqty" : 3325,
    "ps_supplycost" : 771.64,
    "ps_comment" : "requests after the carefully ironic ideas cajole alongside of the enticingly special accounts. fluffily regular deposits haggle about the blithely ironic deposits. regular requests sleep c",
    "ps_partkey" : {
        "p_partkey" : NumberLong(1),
        "p_name" : "goldenrod lace spring peru powder",
        "p_mfgr" : "Manufacturer#1",
        "p_brand" : "Brand#13",
        "p_type" : "PROMO BURNISHED COPPER",
        "p_size" : 7,
        "p_container" : "JUMBO PKG",
        "p_retailprice" : 901,
        "p_comment" : "final deposits s"
    },
    {
        "s_suppkey" : NumberLong(2),
        "s_name" : "Supplier#000000002",
        "s_address" : "89eJ5ksX3ImxJQBvxObC,",
        "s_phone" : "15-679-861-2259",
        "s_acctbal" : 4032.68,
        "s_comment" : "furiously stealthy frays thrash alongside of the slyly express deposits. blithely regular req",
        "s_nationkey" : {
            "n_nationkey" : NumberLong(5),
            "n_name" : "ETHIOPIA",
            "n_comment" : "fluffily ruthless requests integrate fluffily. pending ideas wake blithely acco",
            "n_regioin" : {
                "r_regionkey" : NumberLong(0),
                "r_name" : "AFRICA",
                "r_comment" : "special Tiresias about the furiously even dolphins are furi"
            }
        }
    }
} 
```

sql查询是：

```
select
    s_acctbal, 
    s_name, 
    n_name, 
    p_partkey, 
    p_mfgr, 
    s_address, 
    s_phone, 
    s_comment
from 
    part, 
    supplier, 
    partsupp, 
    nation, 
    region
where 
    p_partkey = ps_partkey
    and s_suppkey = ps_suppkey
    and p_size = 15
    and p_type like '%BRASS'
    and s_nationkey = n_nationkey
    and n_regionkey = r_regionkey
    and r_name = 'EUROPE'
    and ps_supplycost = (
        select 
            min(ps_supplycost)
        from 
            partsupp, supplier, 
            nation, region
        where 
            p_partkey = ps_partkey
            and s_suppkey = ps_suppkey
            and s_nationkey = n_nationkey
            and n_regionkey = r_regionkey
            and r_name = 'EUROPE'
    )
order by 
    s_acctbal desc, 
    n_name, 
    s_name, 
    p_partkey; 
```

第一步（也是简单的一步）我做到了。MapReduce：

```
db.runCommand({
    mapreduce: "partsupp",
    query: {
        "ps_partkey.p_size": 15,
        "ps_partkey.p_type": {'$regex': /BRASS$/},
        "ps_suppkey.s_nationkey.n_regioin.r_name": "EUROPE",
    },
    map: function() {
        emit(
            {
                s_acctbal:  this.ps_suppkey.s_acctbal, 
                s_name:     this.ps_suppkey.s_name, 
                n_name:     this.ps_suppkey.s_nationkey.n_name, 
                p_partkey:  this.ps_partkey.p_partkey, 
                p_mfgr:     this.ps_partkey.p_mfgr,
                s_address:  this.ps_suppkey.s_address, 
                s_phone:    this.ps_suppkey.s_phone, 
                s_comment:  this.ps_suppkey.s_comment
            }, 
            {
                ps_supplycost: this.ps_supplycost
            }
        );
    },
    reduce: function(key, values) {

    },
    out: 'query002'
}); 
```

但问题是如何计算 min(ps_supplycost)？这个查询中的 min 函数是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:30:01.680

您可以在查询中添加特定字段：`sort`和`limit`.

在通常的查询中，我们可以像这样得到最小值：

`db.collection.find().sort({field:1}).limit(1);`

只需添加`sort`和`limit`字段：

```
... 
query: {
    "ps_partkey.p_size": 15,
    "ps_partkey.p_type": {'$regex': /BRASS$/},
    "ps_suppkey.s_nationkey.n_regioin.r_name": "EUROPE",
},
sort: {ps_supplycost:1},
limit: 1,
map: function() { ... 
```

就这样。并且应该补充一点，索引可能非常有帮助。使用 .explain()。敢：）

# mysql - 无法使用 phpAdmin 在本地安装远程数据库

> ID：15730113
> 
> 赞同：0
> 
> 时间：2013-03-31T13:55:11.760
> 
> 标签：mysql, database, phpmyadmin, local, create-table

你们中的一些人会想知道我是从哪棵树上掉下来的，但这是我的问题。

MacOSX 10.8.3 MAMP 安装在 Mac 上很好。使用 Safari 6.0.3

PHP 5.4.10。看不到什么版本的 MySQL，它是最新的（2013 年 3 月）。

使用 phpAdmin 备份远程 MySQL 数据库并以 zip 格式下载到 Mac。

问题是在我的 Mac 上使用 phpAdmin 我根本无法在本地安装 MySQL 数据库。

我在没有先在本地设置数据库的情况下尝试了导入。我期待导入带来数据和数据库表。然而，导入的结果是 phpAdmin 中的一个空白页面，没有关于发生了什么的反馈。

然后我创建了一个本地数据库来接收远程备份文件。创建后，这在 phpAdmin 中显示为没有表，正如预期的那样。

结果是一样的。phpAdmin 中的白页没有显示发生了什么。

这是否意味着要在本地安装备份数据库，我首先必须在我的 Mac 上创建一个定义了所有表的镜像？如果是这样，这将是一个非常乏味的练习。

我显然错过了这个过程中的一些重要步骤。启蒙确实是仁慈的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:00:15.207

空白白页是传统的 php 错误页面 :)

如果是我，我会将 SQL 保存到文件 ( `mydb.sql`) 中，然后尝试从 mysql 命令行导入。如果可行，您就知道这是 phpmyadmin 问题，而不是您的数据库或 mysql。

# c# - 如果没有使用 Wait 和 Pulse 发出信号，代码将无法按预期工作

> ID：15730116
> 
> 赞同：0
> 
> 时间：2013-03-31T13:55:30.510
> 
> 标签：c#, multithreading

给定以下代码，当我按下 Enter 键时，阻塞条件正在发生变化：

```
class Program
{
    static readonly object _locker = new object();
    static bool _go;
    static void Main()
    {
        new Thread(Work).Start();
        Console.ReadLine();
        lock (_locker)
        { 
            _go = true;
            Monitor.Pulse(_locker);
        }
    }
    static void Work()
    {
        lock (_locker)
            while (!_go)
                Monitor.Wait(_locker);
        Console.WriteLine("Woken!!!");
    }
} 
```

但是，如果我不使用`Monitor.Wait`然后从未被调用，`Monitor.Pulse`那么标志`Console.WriteLine("Woken!!!");`似乎`_go`没有改变。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:02:35.717

_go 永远不会在没有 Monitor.Wait 的情况下更改，因为线程工作方法锁定 _locker，这就是为什么主线程无法获取相同的锁以更改 _go 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T13:59:41.697

如果它在，您需要调用`Pulse`以唤醒工作线程`Monitor.Wait`

我写了一篇关于正确使用方法的文章`Wait`and `Pulse`：

[`Thread synchronization: Wait and Pulse demystified`](http://simplygenius.net/Article/WaitPulse)

# android - Android：更新后必须重新创建应用快捷方式

> ID：15730119
> 
> 赞同：7
> 
> 时间：2013-03-31T13:56:00.800
> 
> 标签：android, shortcut, homescreen

发生了一件奇怪的事情：我已经发布了 google play 的更新。当用户下载更新时，现有的主屏幕快捷方式消失并且必须重新创建它或在其他设备上，快捷方式保留在主屏幕上，但是当他们按下它时，它说引用的应用程序不存在，然后他们必须删除该快捷方式并重新创建它。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T14:44:21.053

> 好吧，我选择了另一个启动器活动。

这就是它不再起作用的原因。该快捷方式引用了一个启动器活动，并且由于您对其进行了更改，因此该快捷方式将不再起作用。

# sql - 根据其他列值更新所有/一些/无列

> ID：15730120
> 
> 赞同：0
> 
> 时间：2013-03-31T13:56:03.823
> 
> 标签：sql, sql-server, tsql, sql-update

我想知道是否可以在 SQL 中执行以下操作（我使用的是 SQL Server 2008+，因此特定于供应商的东西暂时也可能有用）：

我有下表：

```
contact (contactid, fullname, fullname_timestamp, age, age_timestamp) 
```

我只想更新那些“*_timestamp”列小于给定值的列。例如：

```
UPDATE contact
SET    fullname = 'john doe' IF fullname_timestamp < 12345,
       age = 30 IF age_timestamp < 12345
WHERE  contactid = 'abcde' 
```

将这些条件放在 WHERE 子句中会产生“全有或全无”的场景（我认为？），而鉴于这些“时间戳”约束，我想“部分更新”记录。

这可能/我做错了吗？欢迎提出建议。提前致谢。

编辑：@AaronBertrand 提出了一些好的观点，我认为它们值得一提作为问题的附加信息。我还要承认，我仍在脑海中想出一个解决方案，而且我的想法可能存在差距。

我正在复制外部产品中包含的数据。该产品具有明确定义的 CRUD 事件管道。由于性能原因，我正在异步管理这些事件。这些事件可能会乱序排队以供以后处理。我在上述产品的非异步管道阶段之一中使用 DateTime.UtcNow.Ticks 时间戳 - 以便记录正确加时间戳 - 我有办法判断我要更新的数据是否是最新的-日期或陈旧。

```
-- sync pipeline --

record update 1 - timestamp 1
record update 2 - timestamp 2

-- async queue (can be out-of-order) --
record update 2 - timestamp 2 -> sent to db
record update 1 - timestamp 1 -> sent to db

-- replica db  --
record update 2 goes through, the timestamp is ok
record update 1 does nothing, timestamp shows data is out-of-date 
```

是的，更新可以同时发生在相同的记录上。用户可以同时修改相同或不同的字段。希望这是有道理的。感谢大家的大力投入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:58:19.100

您可以使用`CASE`它来测试某个列的特定条件，

```
UPDATE contact
SET    fullname = CASE WHEN fullname_timestamp < 12345 THEN 'john doe' ELSE fullname END,
       age = CASE WHEN age_timestamp < 12345 THEN 30 ELSE age END
WHERE  contactid = 'abcde' 
```

# python - 避免在 plumbum 中转义 glob 表达式

> ID：15730126
> 
> 赞同：4
> 
> 时间：2013-03-31T13:56:29.230
> 
> 标签：python, shell, plumbum

假设我想运行类似`ls a*`使用的东西[plumbum](http://plumbum.readthedocs.org/en/latest/)。

```
from plumbum.cmd import ls
ls['a*']()
...
ProcessExecutionError: Command line: ['/bin/ls', 'a*']
Exit code: 1
Stderr:  | ls: a*: No such file or directory 
```

我知道铅会自动逃避争论，这通常是一件好事。但是有没有办法让它理解 glob 表达式应该按原样传递给 shell？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T17:23:06.193

> 但是有没有办法让它理解 glob 表达式应该按原样传递给 shell？

`plumbum`按原样传递`a*`给`ls`命令。`ls`command 不运行任何 shell，因此没有 glob 扩展（由 *nix 上的 shell 完成）。

您可以使用`glob`模块进行扩展：

```
from glob import glob

ls('-l', *glob('a*')) 
```

另一种方法是使用`Workdir`对象：

```
from plumbum import local

ls('-l', *local.cwd // 'a*') 
```

推迟通话；您可以使用`ls['-l'][args]`语法（注意：`plumbum 1.1.0`版本中可能存在需要将`args`列表显式转换为元组的错误）。

如果你想; 你可以调用外壳：

```
from plumbum.cmd import sh

sh('-c', 'ls -l a*') 
```

注意：Python 的`glob.glob()`函数可能会产生与 shell 不同的 glob 扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:59:44.190

[`glob`您可以使用 Python 的内置模块](http://docs.python.org/2/library/glob.html)进行自己的全局扩展。对于您的示例：

```
from plumbum.cmd import ls
from glob import glob

ls[glob('a*')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-23T20:28:27.130

对于 ls 的特殊情况，还有另一种方式：

```
from plumbum import local

p = local.path('path/to/dir')
local.cwd.glob(str(p) + 'a*') 
```

- 或者 -

```
from plumbum import local

p = local.path('path/to/dir')
local.cwd.chdir(p)
local.cwd.glob('a*') 
```

# google-maps - 谷歌的radarSearch搜索矩形而不是圆形区域？

> ID：15730128
> 
> 赞同：0
> 
> 时间：2013-03-31T13:56:32.410
> 
> 标签：google-maps, google-maps-api-3, google-places

我使用 Google 的*雷达搜索*从某个区域获取一些标记。我使用这样的查询：

```
const location=new google.maps.LatLng(59.33, 18.0674);
const radius = 2000;

var request={
   location: location,
   radius: radius,
   types: ["bus_station"]
};
// ... 
```

问题是查询从矩形区域而不是圆形区域返回结果。为了看得更清楚，我画了一个圆圈：

```
var circOptions={
   center: location,
   radius: radius,
   map: map
};
circle = new google.maps.Circle(circOptions); 
```

这是我的整个 HTML 代码（包括脚本和样式）：

```
<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8" />
   <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&language=se"></script>
   <script>

   function init() {

      const location=new google.maps.LatLng(59.33, 18.0674);
      const radius = 2000;

      // Make map
      var mapOptions = {
         center: location,
         zoom: 11,
         mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      var map = new google.maps.Map(document.getElementById('map'), mapOptions);

      // Make a circle
      var circOptions={
            center: location,
            radius: radius,
            map: map
      };
      circle = new google.maps.Circle(circOptions);  

      // Get shops in radius
      service = new google.maps.places.PlacesService(map);
      var request={                                               //my request
         location: location,
         radius: radius,
         types: ["bus_station"]
      };
      service.radarSearch(request, function (results, status){
         if (status == google.maps.places.PlacesServiceStatus.OK){
            for (var i= 0, result; result=results[i]; i++) {     //add markers
               var marker = new google.maps.Marker({
                        map: map,
                        position: result.geometry.location,
                        reference: result.reference
               });
            }
         }
      });

   }
   google.maps.event.addDomListener(window, 'load', init);

   </script>
   <style>#map {height: 500px;width: 500px;}</style>
</head>
<body><div id="map"></div></body>
</html> 
```

为什么会这样？不应该给出半径，给出圆形区域内的结果并给出边界给出矩形区域的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:51:27.847

我发现的一个快速解决方法是添加

```
var distance=google.maps.geometry.spherical.computeDistanceBetween(location, result.geometry.location);
  if (distance>radius)
    continue; 
```

就在`for`制作标记的时候。所以它应该是这样的：

```
for (var i= 0, result; result=results[i]; i++) {     //add markers
   distance=google.maps.geometry.spherical.computeDistanceBetween(location, result.geometry.location);
   if (distance>radius)
      continue;
   var marker = new google.maps.Marker({
      map: map,
      position: result.geometry.location,
      reference: result.reference
   });
} 
```

仍然不确定这种奇怪行为的原因。

# javascript - 编写字符串修改方法

> ID：15730132
> 
> 赞同：0
> 
> 时间：2013-03-31T13:56:42.263
> 
> 标签：javascript, jquery, methods

我正在尝试通过编写我自己的 jquery 方法来缩写我正在应用于字符串变量的一长串 .replace() 灭菌。

```
jQuery.fn.ACsterilise = function() {
    var text = this.text;
    var sterilisedText = "foo test bar";
    sterilisedText = text.toUpperCase().replace(/\'/g,"").replace(/\,/g,"").replace(/\-/g," ");
return sterilisedText;
}; 
```

然后调用它

```
var stringToSterilise = "testi'ng fo'o st'ring bar"
var sterilisedString = stringToSterilise.ACsterilise(); 
```

但没有运气。我觉得 jquery 是一个糟糕的选择，因为我使用的是字符串而不是 DOM。我是 JavaScript 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:01:54.947

jQuery 不是为处理字符串而设计的，而是用于处理 DOM。你想要什么？

jQuery 实例：

```
jQuery.fn.ACsterilise = function() {
    var text = this.text(); // get text content
    var sterilisedText = text.toUpperCase().replace(/'|,/g,"").replace(/-/g," ");
    return sterilisedText;
};
console.log($("<a>Some odd-lookin' html</a>").ACsterilise()); 
```

[字符串](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)：

```
String.prototype.ACsterilise = function() {
    var text = this; // current string object
    var sterilisedText = text.toUpperCase().replace(/'|,/g,"").replace(/-/g," ");
    return sterilisedText;
};
console.log("testi'ng fo'o st'ring bar".ACsterilise()); 
```

# google-bigquery - BigQuery 嵌套可为空的时间戳错误？

> ID：15730133
> 
> 赞同：1
> 
> 时间：2013-03-31T13:56:46.280
> 
> 标签：google-bigquery

我想我可能发现了一个错误。

我有一个嵌套模式 - 可为空的字段单击可以包含一个名为 clickTime 的可为空的时间戳字段。（下面的模式片段）

```
{
"name": "click",
"mode": "nullable",
"type": "record",
"fields": [
    {
      "name": "clickTime",
      "mode": "nullable",
      "type": "timestamp"
    }
]
} 
```

当我尝试导入不包含 click 字段（因此也不包含 clickTime 字段）的 JSON 数据时，我收到作业失败并显示消息

“- 无法将 '' 解析为时间戳”

如果我更改我的架构定义，所以 clickTime 是一个整数，那么一切都会按预期工作。我检查了我的数据并且没有空的 clickTime 值 - 如果它在那里，它总是一个时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:03:14.293

This is indeed a bug, we've been able to reproduce it locally and are working on a fix.

# java - .contains 的对面（不包含）

> ID：15730134
> 
> 赞同：52
> 
> 时间：2013-03-31T13:56:50.387
> 
> 标签：java, contains

我有一个`if`声明：

```
if (inventory.contains("bread")) 
```

但现在我想检查

*   如果`inventory`包含“面包”
*   但不含“水”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-07-10T17:10:47.223

似乎`Luiggi Mendoza`两者`joey rohan`都已经回答了这个问题，但我认为可以稍微澄清一下。

你可以把它写成一条`if`语句：

```
if (inventory.contains("bread") && !inventory.contains("water")) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T14:02:02.987

也许

```
if (inventory.contains("bread") && !inventory.contains("water")) 
```

或者

```
if (inventory.contains("bread")) {
    if (!inventory.contains("water")) {
        // do something here
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-23T16:23:46.233

对于您的问题，请在下面使用

if(inventory.contains("bread") && !inventory.contains("water")) {

```
System.out.println("Bread is there and water not there"); 
```

}

别的{

```
System.out.println("Both or any one condition not met"); 
```

}

另一个例子：只需使用 ! 之前的符号包含功能。

比如如果你想执行一些操作，比如如果列表确实包含说堆栈然后添加堆栈。

```
 if (!list.contains("stack")) {
        list.add("stack");
    }` 
```

或另一种方法，如果搜索字符串的索引为 -1，

```
 if(list.indexOf("stack")==-1){
    list.add("stack"); 
```

}

# java - 如何从各种类访问公共静态 ArrayList？

> ID：15730137
> 
> 赞同：3
> 
> 时间：2013-03-31T13:57:43.337
> 
> 标签：java, static, arraylist, public

假设我有一堂课

```
 public class c1 {
        public static ArrayList<String> list = new ArrayList<String>();

        public c1() {
            for (int i = 0; i < 5; i++) {   //The size of the ArrayList is now 5
                list.add("a");
            }
        }
    } 
```

但是如果我在另一个类中访问相同的 ArrayList，我将得到一个 SIZE = 0 的列表。

```
 public class c2 {
         public c2() {
             System.out.println("c1.list.size() = " + c1.list.size()); //Prints 0
         }
     } 
```

为什么会这样。如果变量是静态的，那么为什么要为类 c2 生成一个新列表？如果我在不同的类中访问它，如何确保获得相同的 ArrayList？

/ ***** ** ******修改后的代码****** ** *** ****** /

```
 public class c1 {
        public static ArrayList<String> list = new ArrayList<String>();

        public static void AddToList(String str) {       //This method is called to populate the list 
           list.add(str);
        }
    } 
```

但是如果我在另一个类中访问同一个 ArrayList，我将得到一个 SIZE = 0 的列表，无论我调用了多少次 AddToList 方法。

```
 public class c2 {
         public c2() {
             System.out.println("c1.list.size() = " + c1.list.size()); //Prints 0
         }
     } 
```

当我在另一个类中使用 ArrayList 时，如何确保出现相同的更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T13:59:54.913

在您的代码中，您应该调用`c1`构造函数以填充`ArrayList`. 所以你需要：

```
public c2() {
    new c1();
    System.out.println("c1.list.size() = " + c1.list.size()); //Prints 0
} 
```

但这并不好。最好的方法是在类中使用`static`块代码进行静态初始化：`c1`

```
public class c1 {
    public static ArrayList<String> list = new ArrayList<String>();

    static {
        for (int i = 0; i < 5; i++) {   //The size of the ArrayList is now 5
            list.add("a");
        }
    }

    public c1() {

    }
} 
```

作为[“编程到接口”意味着什么的建议？](https://stackoverflow.com/q/383947/1065197)，最好将变量声明为`List<String>`并将实例创建为`ArrayList`：

```
public static List<String> list = new ArrayList<String>(); 
```

另一个建议，使用一种`static`方法来访问这个变量而不是公开它：

```
private static List<String> list = new ArrayList<String>();

public static List<String> getList() {
    return list;
} 
```

# php - 正在上传图片，但我无法删除

> ID：15730140
> 
> 赞同：1
> 
> 时间：2013-03-31T13:58:09.773
> 
> 标签：php, jquery, file-upload

所以你可以理解我的英语不是很好，但要告诉你我很抱歉这种情况下工作

我正在使用 jQuery 5,11,2 的版本

服务器，但我无法删除文件上传

应用程序中的chrome网络/json应该写文本/html写

我相信你会帮助你添加文件提前谢谢你。

索引.php

```
<?php
session_start();
include '../../mysqlayar.php';
include '../../incl/functions.php';

error_reporting(1);

require('upload.class.php');

$upload_handler = new UploadHandler();

header('Pragma: no-cache');
header('Cache-Control: no-store, no-cache, must-revalidate');
header('Content-Disposition: inline; filename="files.json"');
header('X-Content-Type-Options: nosniff');
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: OPTIONS, HEAD, GET, POST, PUT, DELETE');
header('Access-Control-Allow-Headers: X-File-Name, X-File-Type, X-File-Size');

switch ($_SERVER['REQUEST_METHOD']) {
    case 'OPTIONS':
        break;
    case 'HEAD':
    case 'GET':
        $upload_handler->get();
        break;
    case 'POST':
        if (isset($_REQUEST['_method']) && $_REQUEST['_method'] === 'DELETE') {
            $upload_handler->delete();
        } else {
            $upload_handler->post();
        }
        break;
    case 'DELETE':
        $upload_handler->delete();
        break;
    default:
        header('HTTP/1.1 405 Method Not Allowed');
} 
```

resim.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-9" />
<title>Untitled Document</title>
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap.min.css">
<link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-responsive.min.css">
<!--[if lt IE 7]><link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-ie6.min.css"><![endif]-->
<link rel="stylesheet" href="http://blueimp.github.com/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css">
<link rel="stylesheet" href="css/jquery.fileupload-ui.css">
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
   <form id="fileupload" action="server/php/index.php" method="POST" enctype="multipart/form-data">
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
            <div class="span7">
                <!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button">
                    <i class="icon-plus icon-white"></i>
                    <span>Resim Ekle...</span>
                    <input type="file" name="files[]" multiple>
                </span>
                <button type="submit" class="btn btn-primary start">
                    <i class="icon-upload icon-white"></i>
                    <span>Yükle</span>
                </button>
                <button type="reset" class="btn btn-warning cancel">
                    <i class="icon-ban-circle icon-white"></i>
                    <span>İptal Et</span>
                </button>
                <button type="button" class="btn btn-danger delete">
                    <i class="icon-trash icon-white"></i>
                    <span>Sil</span>
                </button>
                <input type="checkbox" class="toggle">
            </div>
            <!-- The global progress information -->
            <div class="span5 fileupload-progress fade">
                <!-- The global progress bar -->
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                    <div class="bar" style="width:0%;"></div>
                </div>
                <!-- The extended global progress information -->
                <div class="progress-extended">&nbsp;</div>
            </div>
        </div>
        <!-- The loading indicator is shown during file processing -->
        <div class="fileupload-loading"></div>
        <br>
        <!-- The table listing the files available for upload/download -->
        <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
    </form>
    <script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
                <button class="btn btn-primary">
                    <i class="icon-upload icon-white"></i>
                    <span>{%=locale.fileupload.start%}</span>
                </button>
            {% } %}</td>
        {% } else { %}
            <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>{%=locale.fileupload.cancel%}</span>
            </button>
        {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="#" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="#" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="scripts/vendor/jquery.ui.widget.js"></script>
<script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
<script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
<script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
<script src="http://blueimp.github.com/cdn/js/bootstrap.min.js"></script>
<script src="http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js"></script>
<script src="scripts/jquery.iframe-transport.js"></script>
<script src="scripts/jquery.fileupload.js"></script>
<script src="scripts/jquery.fileupload-fp.js"></script>
<script src="scripts/jquery.fileupload-ui.js"></script>
<script src="scripts/locale.js"></script>
<script src="scripts/main.js"></script>
<!--[if gte IE 8]><script src="scripts/cors/jquery.xdr-transport.js"></script><![endif]-->
</body>
</html> 
```

上传.class.php

```
<?php

  error_reporting(1);
class UploadHandler
{
    protected $options;

    function __construct($options=null) {
        $this->options = array(
            'script_url' => $this->getFullUrl().'/',
            'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/'.$_SESSION['ilanId']."/",
            'upload_url' => $this->getFullUrl().'/files/'.$_SESSION['ilanId']."/",
            'param_name' => 'files',
            // Set the following option to 'POST', if your server does not support
            // DELETE requests. This is a parameter sent to the client:
            'delete_type' => 'DELETE',
            // The php.ini settings upload_max_filesize and post_max_size
            // take precedence over the following max_file_size setting:
            'max_file_size' => null,
            'min_file_size' => 1,
            'accept_file_types' => '/.+$/i',
            // The maximum number of files for the upload directory:
            'max_number_of_files' => null,
            // Image resolution restrictions:
            'max_width' => null,
            'max_height' => null,
            'min_width' => 1,
            'min_height' => 1,
            // Set the following option to false to enable resumable uploads:
            'discard_aborted_uploads' => true,
            // Set to true to rotate images based on EXIF meta data, if available:
            'orient_image' => false,
            'image_versions' => array(
                // Uncomment the following version to restrict the size of
                // uploaded images. You can also add additional versions with
                // their own upload directories:
                /*
                'large' => array(
                    'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/',
                    'upload_url' => $this->getFullUrl().'/files/',
                    'max_width' => 1920,
                    'max_height' => 1200,
                    'jpeg_quality' => 95
                ),
                */
                'thumbnail' => array(
                    'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/thumbnails/'.$_SESSION['ilanId']."/",
                    'upload_url' => $this->getFullUrl().'/thumbnails/'.$_SESSION['ilanId']."/",
                    'max_width' => 114,
                    'max_height' => 114
                )
            )
        );
        if ($options) {
            $this->options = array_replace_recursive($this->options, $options);
        }
    }

    protected function getFullUrl() {
        $https = !empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off';
        return
            ($https ? 'https://' : 'http://').
            (!empty($_SERVER['REMOTE_USER']) ? $_SERVER['REMOTE_USER'].'@' : '').
            (isset($_SERVER['HTTP_HOST']) ? $_SERVER['HTTP_HOST'] : ($_SERVER['SERVER_NAME'].
            ($https && $_SERVER['SERVER_PORT'] === 443 ||
            $_SERVER['SERVER_PORT'] === 80 ? '' : ':'.$_SERVER['SERVER_PORT']))).
            substr($_SERVER['SCRIPT_NAME'],0, strrpos($_SERVER['SCRIPT_NAME'], '/'));
    }

    protected function set_file_delete_url($file) {
        $file->delete_url = $this->options['script_url']
            .'?file='.rawurlencode($file->name);
        $file->delete_type = $this->options['delete_type'];
        if ($file->delete_type !== 'DELETE') {
            $file->delete_url .= '&_method=DELETE';
        }
    }

    protected function get_file_object($file_name) {
        $file_path = $this->options['upload_dir'].$file_name;
        if (is_file($file_path) && $file_name[0] !== '.') {
            $file = new stdClass();
            $file->name = $file_name;
            $file->size = filesize($file_path);
            $file->url = $this->options['upload_url'].rawurlencode($file->name);
            foreach($this->options['image_versions'] as $version => $options) {
                if (is_file($options['upload_dir'].$file_name)) {
                    $file->{$version.'_url'} = $options['upload_url']
                        .rawurlencode($file->name);
                }
            }
            $this->set_file_delete_url($file);
            return $file;
        }
        return null;
    }

    protected function get_file_objects() {
        return array_values(array_filter(array_map(
            array($this, 'get_file_object'),
            scandir($this->options['upload_dir'])
        )));
    }

    protected function create_scaled_image($file_name, $options) {
        $file_path = $this->options['upload_dir'].$file_name;
        $new_file_path = $options['upload_dir'].$file_name;
        list($img_width, $img_height) = @getimagesize($file_path);
        if (!$img_width || !$img_height) {
            return false;
        }
        $scale = min(
            $options['max_width'] / $img_width,
            $options['max_height'] / $img_height
        );
        if ($scale >= 1) {
            if ($file_path !== $new_file_path) {
                return copy($file_path, $new_file_path);
            }
            return true;
        }
        $new_width = $img_width * $scale;
        $new_height = $img_height * $scale;
        $new_img = @imagecreatetruecolor($new_width, $new_height);
        switch (strtolower(substr(strrchr($file_name, '.'), 1))) {
            case 'jpg':
            case 'jpeg':
                $src_img = @imagecreatefromjpeg($file_path);
                $write_image = 'imagejpeg';
                $image_quality = isset($options['jpeg_quality']) ?
                    $options['jpeg_quality'] : 100;
                break;
            case 'gif':
                @imagecolortransparent($new_img, @imagecolorallocate($new_img, 0, 0, 0));
                $src_img = @imagecreatefromgif($file_path);
                $write_image = 'imagegif';
                $image_quality = null;
                break;
            case 'png':
                @imagecolortransparent($new_img, @imagecolorallocate($new_img, 0, 0, 0));
                @imagealphablending($new_img, false);
                @imagesavealpha($new_img, true);
                $src_img = @imagecreatefrompng($file_path);
                $write_image = 'imagepng';
                $image_quality = isset($options['png_quality']) ?
                    $options['png_quality'] : 100;
                break;
            default:
                $src_img = null;
        }
        $success = $src_img && @imagecopyresampled(
            $new_img,
            $src_img,
            0, 0, 0, 0,
            $new_width,
            $new_height,
            $img_width,
            $img_height
        ) && $write_image($new_img, $new_file_path, $image_quality);
        // Free up memory (imagedestroy does not delete files):
        @imagedestroy($src_img);
        @imagedestroy($new_img);
        return $success;
    }

    protected function validate($uploaded_file, $file, $error, $index) {
        if ($error) {
            $file->error = $error;
            return false;
        }
        if (!$file->name) {
            $file->error = 'missingFileName';
            return false;
        }
        if (!preg_match($this->options['accept_file_types'], $file->name)) {
            $file->error = 'acceptFileTypes';
            return false;
        }
        if ($uploaded_file && is_uploaded_file($uploaded_file)) {
            $file_size = filesize($uploaded_file);
        } else {
            $file_size = $_SERVER['CONTENT_LENGTH'];
        }
        if ($this->options['max_file_size'] && (
                $file_size > $this->options['max_file_size'] ||
                $file->size > $this->options['max_file_size'])
            ) {
            $file->error = 'maxFileSize';
            return false;
        }
        if ($this->options['min_file_size'] &&
            $file_size < $this->options['min_file_size']) {
            $file->error = 'minFileSize';
            return false;
        }
        if (is_int($this->options['max_number_of_files']) && (
                count($this->get_file_objects()) >= $this->options['max_number_of_files'])
            ) {
            $file->error = 'maxNumberOfFiles';
            return false;
        }
        list($img_width, $img_height) = @getimagesize($uploaded_file);
        if (is_int($img_width)) {
            if ($this->options['max_width'] && $img_width > $this->options['max_width'] ||
                    $this->options['max_height'] && $img_height > $this->options['max_height']) {
                $file->error = 'maxResolution';
                return false;
            }
            if ($this->options['min_width'] && $img_width < $this->options['min_width'] ||
                    $this->options['min_height'] && $img_height < $this->options['min_height']) {
                $file->error = 'minResolution';
                return false;
            }
        }
        return true;
    }

    protected function upcount_name_callback($matches) {
        $index = isset($matches[1]) ? intval($matches[1]) + 1 : 1;
        $ext = isset($matches[2]) ? $matches[2] : '';
        return ' ('.$index.')'.$ext;
    }

    protected function upcount_name($name) {
        return preg_replace_callback(
            '/(?:(?: \(([\d]+)\))?(\.[^.]+))?$/',
            array($this, 'upcount_name_callback'),
            $name,
            1
        );
    }

    protected function trim_file_name($name, $type, $index) {
        // Remove path information and dots around the filename, to prevent uploading
        // into different directories or replacing hidden system files.
        // Also remove control characters and spaces (\x00..\x20) around the filename:
        $t = explode(".",$name);
        @$name = date('i_s_u_u').".$t[1]";
        $file_name = trim(basename(stripslashes($name)), ".\x00..\x20");
        // Add missing file extension for known image types:
        if (strpos($file_name, '.') === false &&
            preg_match('/^image\/(gif|jpe?g|png)/', $type, $matches)) {
            $file_name .= '.'.$matches[1];
        }
        if ($this->options['discard_aborted_uploads']) {
            while(is_file($this->options['upload_dir'].$file_name)) {
                $file_name = $this->upcount_name($file_name);
            }
        }
        return $file_name;
    }

    protected function handle_form_data($file, $index) {
        // Handle form data, e.g. $_REQUEST['description'][$index]
    }

    protected function orient_image($file_path) {
        $exif = @exif_read_data($file_path);
        if ($exif === false) {
            return false;
        }
        $orientation = intval(@$exif['Orientation']);
        if (!in_array($orientation, array(3, 6, 8))) {
            return false;
        }
        $image = @imagecreatefromjpeg($file_path);
        switch ($orientation) {
              case 3:
                $image = @imagerotate($image, 180, 0);
                break;
              case 6:
                $image = @imagerotate($image, 270, 0);
                break;
              case 8:
                $image = @imagerotate($image, 90, 0);
                break;
            default:
                return false;
        }
        $success = imagejpeg($image, $file_path);
        // Free up memory (imagedestroy does not delete files):
        @imagedestroy($image);
        return $success;
    }

    protected function handle_file_upload($uploaded_file, $name, $size, $type, $error, $index = null) {
        $file = new stdClass();
        $file->name = $this->trim_file_name($name, $type, $index);
        $file->size = intval($size);
        $file->type = $type;
        if ($this->validate($uploaded_file, $file, $error, $index)) {
            $this->handle_form_data($file, $index);
            $file_path = $this->options['upload_dir'].$file->name;
            $append_file = !$this->options['discard_aborted_uploads'] &&
                is_file($file_path) && $file->size > filesize($file_path);
            clearstatcache();
            if ($uploaded_file && is_uploaded_file($uploaded_file)) {
                // multipart/formdata uploads (POST method uploads)
                if ($append_file) {
                    file_put_contents(
                        $file_path,
                        fopen($uploaded_file, 'r'),
                        FILE_APPEND
                    );
                } else {
                    move_uploaded_file($uploaded_file, $file_path);
                    $resimadi = explode("files/",$file_path);
                    $ilanId = $_SESSION['ilanId'];
                    $resimadi = explode("/",$resimadi[1]);
                    mysql_query("INSERT INTO resimler VALUES (\"\",
                                                              \"$ilanId\",
                                                              \"$resimadi[1]\")");
                }
            } else {
                // Non-multipart uploads (PUT method support)
                file_put_contents(
                    $file_path,
                    fopen('php://input', 'r'),
                    $append_file ? FILE_APPEND : 0
                );
            }
            $file_size = filesize($file_path);
            if ($file_size === $file->size) {
                if ($this->options['orient_image']) {
                    $this->orient_image($file_path);
                }
                $file->url = $this->options['upload_url'].rawurlencode($file->name);
                foreach($this->options['image_versions'] as $version => $options) {
                    if ($this->create_scaled_image($file->name, $options)) {
                        if ($this->options['upload_dir'] !== $options['upload_dir']) {
                            $file->{$version.'_url'} = $options['upload_url']
                                .rawurlencode($file->name);
                        } else {
                            clearstatcache();
                            $file_size = filesize($file_path);
                        }
                    }
                }
            } else if ($this->options['discard_aborted_uploads']) {
                unlink($file_path);
                $file->error = 'abort';
            }
            $file->size = $file_size;
            $this->set_file_delete_url($file);
        }
        return $file;
    }

    public function get() {
        $file_name = isset($_REQUEST['file']) ?
            basename(stripslashes($_REQUEST['file'])) : null;
        if ($file_name) {
            $info = $this->get_file_object($file_name);
        } else {
            $info = $this->get_file_objects();
        }
        header('Content-type: application/json');
        echo json_encode($info);
    }

    public function post() {
        if (isset($_REQUEST['_method']) && $_REQUEST['_method'] === 'DELETE') {
            return $this->delete();
        }
        $upload = isset($_FILES[$this->options['param_name']]) ?
            $_FILES[$this->options['param_name']] : null;
        $info = array();
        if ($upload && is_array($upload['tmp_name'])) {
            // param_name is an array identifier like "files[]",
            // $_FILES is a multi-dimensional array:
            foreach ($upload['tmp_name'] as $index => $value) {
                $info[] = $this->handle_file_upload(
                    $upload['tmp_name'][$index],
                    isset($_SERVER['HTTP_X_FILE_NAME']) ?
                        $_SERVER['HTTP_X_FILE_NAME'] : $upload['name'][$index],
                    isset($_SERVER['HTTP_X_FILE_SIZE']) ?
                        $_SERVER['HTTP_X_FILE_SIZE'] : $upload['size'][$index],
                    isset($_SERVER['HTTP_X_FILE_TYPE']) ?
                        $_SERVER['HTTP_X_FILE_TYPE'] : $upload['type'][$index],
                    $upload['error'][$index],
                    $index
                );
            }
        } elseif ($upload || isset($_SERVER['HTTP_X_FILE_NAME'])) {
            // param_name is a single object identifier like "file",
            // $_FILES is a one-dimensional array:
            $info[] = $this->handle_file_upload(
                isset($upload['tmp_name']) ? $upload['tmp_name'] : null,
                isset($_SERVER['HTTP_X_FILE_NAME']) ?
                    $_SERVER['HTTP_X_FILE_NAME'] : (isset($upload['name']) ?
                        $upload['name'] : null),
                isset($_SERVER['HTTP_X_FILE_SIZE']) ?
                    $_SERVER['HTTP_X_FILE_SIZE'] : (isset($upload['size']) ?
                        $upload['size'] : null),
                isset($_SERVER['HTTP_X_FILE_TYPE']) ?
                    $_SERVER['HTTP_X_FILE_TYPE'] : (isset($upload['type']) ?
                        $upload['type'] : null),
                isset($upload['error']) ? $upload['error'] : null
            );
        }
        header('Vary: Accept');
        $json = json_encode($info);
        $redirect = isset($_REQUEST['redirect']) ?
            stripslashes($_REQUEST['redirect']) : null;
        if ($redirect) {
            header('Location: '.sprintf($redirect, rawurlencode($json)));
            return;
        }
        if (isset($_SERVER['HTTP_ACCEPT']) &&
            (strpos($_SERVER['HTTP_ACCEPT'], 'application/json') !== false)) {
            header('Content-type: application/json');
        } else {
            header('Content-type: text/plain');
        }
        echo $json;
    }

    public function delete() {
        $file_name = isset($_REQUEST['file']) ?
            basename(stripslashes($_REQUEST['file'])) : null;
        $file_path = $this->options['upload_dir'].$file_name;
        $success = is_file($file_path) && $file_name[0] !== '.' && unlink($file_path);
        if ($success) {
            foreach($this->options['image_versions'] as $version => $options) {
                $file = $options['upload_dir'].$file_name;
                if (is_file($file)) {
                    unlink($file);
                    $ilanId = $_SESSION['ilanId'];

                    mysql_query("DELETE FROM resimler WHERE ilanId = '$ilanId' and resimadi = '$file_name'");
                }
            }
        }
        header('Content-type: application/json');
        echo json_encode($success);
    }

} 
```

# querydsl - db 中枚举的 @ElementCollection 和使用 QueryDSL 的一组枚举的严格比较

> ID：15730143
> 
> 赞同：1
> 
> 时间：2013-03-31T13:58:19.433
> 
> 标签：querydsl

我有一个`FamilyAdvertisement`JPA 实体，它有一个集合/集合`ChildcareType`的枚举，如下所示：

```
@ElementCollection
private Set<ChildcareType> childcareTypes; 
```

这是枚举：

```
public enum ChildcareType {
    SINGLE, SHARED, OUT_OF_SCHOOL, BABY_SITTING;
} 
```

**我想要，给定作为参数传递的所需 ChildcareTypes 的集合/集，以仅匹配具有相同 ChildcareTypes 集的那些familyAdvertisements。**

让我们举个例子：假设只有三个实例`FamilyAdvertisement`具有以下一组`SINGLE`and `SHARED`。我只希望我的 QueryDSL 查询返回这三个实例。

`SINGLE`不会返回带有 only 的实例。

`SINGLE`另一个带有,`SHARED`的实例`BABY_SITTING`不会被返回。

我一直无法找到相关的运算符来比较传入的参数 ( `Set<ChildcareType> requiredChildcareTypes`) 和以下内容`SetPath`：`QFamilyAdvertisement.familyAdvertisement.childcareTypes`

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:46:07.670

一种高级的表达方式是这样的

```
query.from(familyAdvertisement)
     .where(
         familyAdvertisement.childcareTypes.contains(SINGLE),
         familyAdvertisement.childcareTypes.contains(SHARED),
         familyAdvertisement.childcareTypes.size().eq(2))
     .list(familyAdvertisement); 
```

您将需要动态填充 where 部分。

如果您想对生成的 SQL 进行更多控制，请对行使用左连接或存在子句，而对`contains`行使用不存在`size eq`。

CollectionExpressions 不提供该`eq`方法，因为大多数后端不支持它。

# java - 如何更改特定单元格apache poi 3.9的字体颜色

> ID：15730146
> 
> 赞同：31
> 
> 时间：2013-03-31T13:58:23.700
> 
> 标签：java, excel, apache-poi, xls

我可以在 apache POI 中使用以下代码更改前景色。现在我想更改单个单元格的字体颜色。

```
CellStyle style = wb.createCellStyle();
                        style.setFillForegroundColor(IndexedColors.GREEN.getIndex());
                        style.setFillPattern(CellStyle.SOLID_FOREGROUND);
                        cell = rowxl.createCell((short) 7);
                        cell.setCellValue(" <<<<ONTRACK>>>>");
                        cell.setCellStyle(style);

                        rowxl.createCell(0).setCellValue(TEAM); 
```

我已经尝试过了，但它不会改变前两列的颜色

代码：

```
public class fclr {
     public static void main(String[] args)  throws Exception {

         InputStream inp = new FileInputStream("c:/workbook1.xls");
            Workbook wb = WorkbookFactory.create(inp);
            CreationHelper createHelper = wb.getCreationHelper();
            Sheet sheet = wb.getSheetAt(0);
            Row rowxl = sheet.createRow((short)0);

            Cell cell = rowxl.createCell(0);

            //apply some colors from the standard palette,
            // as in the previous examples.
            //we'll use red text on a lime background

            CellStyle style = wb.createCellStyle();

          rowxl.createCell(1).setCellValue("ABC");
        rowxl.createCell(2).setCellValue("aaa");
            Font font = wb.createFont();
            font.setColor(HSSFColor.BLACK.index);
            style.setFont(font);

            cell.setCellStyle(style);

            FileOutputStream fileOut = new FileOutputStream("c:/workbook1.xls");
            wb.write(fileOut);
            fileOut.close();

     }

} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-01T06:01:54.387

您目前正在创建一些单元格两次，这就是为什么一切都出错了

首先，我建议您将单元格样式创建移到靠近代码顶部的位置。请记住 - 单元格样式仅限于工作簿，因此不要为每个单元格创建一个！

```
 CellStyle style = wb.createCellStyle();
        Font font = wb.createFont();
        font.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());
        style.setFont(font);
        // Set more colours on the style as needed
        // Set formatting rules on the style as needed 
```

现在，根据您的偏好，您可以像这样创建单元格：

```
 Cell cell;

        cell = rowxl.createCell(0);
        cell.setCellValue("ABC");
        cell.setCellStyle(style);

        cell = rowxl.createCell(1);
        cell.setCellValue("aaa");
        cell.setCellStyle(style); 
```

或者像这样：

```
 rowxl.createCell(1).setCellValue("ABC");
    rowxl.createCell(2).setCellValue("aaa");
    rowx1.getCell(1).setCellStyle(style);
    rowx1.getCell(2).setCellStyle(style); 
```

只是不要做你现在拥有的那种奇怪的混合，因为你最终会创建两次单元格并错过造型！

# java - 如何为空 arg 构造函数提供 init 方法？

> ID：15730148
> 
> 赞同：0
> 
> 时间：2013-03-31T13:58:35.573
> 
> 标签：java, oop, serialization

我有一些应该是的类`Serializable`，因此需要一个空参数构造函数。此外，我想`init()`为所有类实现提供一些自定义例程。

到目前为止，我`init()`只是在无参数构造函数中。但是由于我现在需要一个空的无参数构造函数进行序列化，我如何确保`init()`所有实现的自动执行方法？

例子：

```
abstract class Foo implements Serializable {
   int id;

   Foo() {
      id = UUID.randomUUID();
   }
}

class Bar extends Foo {
   Bar() {}
   Bar(String param) {
      //...
   }
} 
```

这是我曾经拥有的。对于`Foo()`任何隐式实现，总是调用构造函数。实现不必考虑任何`UUID`代。

当我必须为它创建`Foo()`一个空的构造函数时，我怎样才能达到同样的效果`Serialization`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:13:06.560

> 我有一些应该是可序列化的类，因此需要一个空参数构造函数。

这不是强制性的。如果一个类或其超类是可序列化的，则不必在该类中定义无参数构造函数，直到您将该类扩展为由于构造函数链接而需要的其他类。

# ios - 带有 20 点状态栏的 iOS 4.3 用户界面方向问题

> ID：15730152
> 
> 赞同：4
> 
> 时间：2013-03-31T13:59:09.947
> 
> 标签：ios, ios4, uiinterfaceorientation

我有下一个视图控制器：

*   第一视图控制器

*   第二视图控制器

*   第三视图控制器

目标是：通过 SecondViewController 呈现 ThirdViewController。

在 FirstViewController 中，我使用以下方法展示 SecondViewController：

```
[self presentModalViewController:secondViewController animated:NO]; 
```

加载 SecondViewController 时，我在`-viewDidAppear:`委托回调方法中显示 ThirdViewController：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self presentModalViewController:thirdViewController animated:NO];
} 
```

所以，我认为当前视图控制器的方案已经为我们所有人所熟知。也许代码的设计不好，但我已经做了这个解决方案，并且有下面描述的问题。

加载 ThirdViewController 时，我遇到了 20 分的问题（但仅适用于 iOS 4.3，其他版本运行良好）。

我附上了显示我的问题的文件。

![在此处输入图像描述](https://i.stack.imgur.com/A3l4G.png)

正如您在左侧看到的，我有不需要的偏移量。旋转屏幕后此问题消失。

当我打印 ThirdViewController 视图框架时，它显示我 frame = (0 0; 480 300)。可能是 SecondViewControllers 视图中的问题。

关于旋转。我在每个控制器中实现了以下这些方法：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation==UIInterfaceOrientationLandscapeLeft || interfaceOrientation==UIInterfaceOrientationLandscapeRight)
        return YES;

    return NO;
} 
```

（更新：）是的，我现在发现了问题，SecondViewController frame = (0 20; 300 480); 但我不明白为什么。

我添加了这个方法来检查当前方向：

```
-(void) getCurrentOrientation{

    UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];

    if(orientation == UIInterfaceOrientationPortrait){
        NSLog(@"portrait");
    } else if(orientation == UIInterfaceOrientationLandscapeRight) {
        NSLog(@"LandscapeRight");
    } else if(orientation == UIInterfaceOrientationLandscapeLeft) {
        NSLog(@"LandscapeLeft");
    }
} 
```

并在方法中检查它，`-viewDidAppear:`它显示当前方向是纵向而不是我在`shouldAutorotateToInterfaceOrientation`回调中设置的横向模式。

此外，我发现 iPad iOS 4.3 效果很好。

我在 iPhone Simulator 上做了所有测试。

我已将此代码添加到我的基本视图控制器中，但它仍然对我不起作用。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
        //Landscape orientation code

        if (IS_IPAD) {
            [self.view setFrame:CGRectMake(0, 0, 1024, 748)];
        }
        else if (IS_IPHONE) {
            [self.view setFrame:CGRectMake(0, 0, 480, 300)];
        }
        else if (IS_IPHONE_5) {
            [self.view setFrame:CGRectMake(0, 0, 568, 300)];
        }

        NSLog(@"landscape");
        NSLog(@"%@", [NSValue valueWithCGRect:self.view.frame]);

    }else {
        //portrait orientation code
        NSLog(@"portrait");
    }
} 
```

（工作更新：）

我使用下面的代码解决了这个问题：

```
[UIApplication sharedApplication].statusBarHidden = YES;
if (self.thirdViewController) self.thirdViewController = nil;
self.thirdViewController = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController"] bundle:nil];
[self presentModalViewController:self.self.thirdViewController animated:NO];
[UIApplication sharedApplication].statusBarHidden = NO; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:24:53.787

亚历山大，你能试试下面的代码吗？它在 4.3 中工作（添加到 SecondViewController）：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    [UIApplication sharedApplication].statusBarHidden = YES;
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    AMThirdViewController* th = [[AMThirdViewController alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:th animated:NO];
    [UIApplication sharedApplication].statusBarHidden = NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:20:53.363

由于屏幕顶部的状态栏，您的**SecondViewController框架是 (0, 20; 300, 480) 而不是 (0, 0; 320, 480)。**因此，您可以通过设置值“none”从“属性检查器”中删除状态栏，也可以在

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
      if (UIInterfaceOrientationIsLandscape(orientation)) {
          //Landscape orientation code
      }else {
          //portrait orientation code   
      }
} 
```

方法。

# java - 刽子手展示找到的信

> ID：15730154
> 
> 赞同：0
> 
> 时间：2013-03-31T13:59:18.870
> 
> 标签：java

我目前正在用java编写一个hangman控制台游戏，到目前为止没有任何问题。

我现在遇到了一个我似乎无法解决的问题。

我有一系列不同的单词easy，medium和hard，并根据选择的难度随机从中获取一个单词。然后我把那个词转换成*，这样玩家就看不到这些字符了。

然后要求用户输入字母，程序会通知用户它们是对还是错。但问题是，如果它在单词中，我似乎无法将 * 更改为字母。因此，例如，如果单词是“bee”并且玩家选择了 b 我希望*** 更改为 b**。

谁能帮我指出正确的方向？

刽子手类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hangman;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Random;
import java.util.Scanner;

/**
 *
 * @author Adam2_000
 */
public class Hangman {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        String player = "";
        String selection;
        int turn = 12;
        List<String> wordBox = new ArrayList<String>();
        boolean hangman = false;
        Scanner scan = new Scanner(System.in);

        //New instances of class and arrays
        words words = new words();
        String easyWords1[] = words.easyWords;
        String mediumWords1[] = words.mediumWords;
        String hardWords1[] = words.hardWords;
        Random random = new Random();

        System.out.println("Welcome to Hangman version 1");
        System.out.println("Please choose a difficulty");
        System.out.println("A: Easy");
        System.out.println("B: Medium");
        System.out.println("C: Hard");

        System.out.println(" _________     ");
        System.out.println("|         |    ");
        System.out.println("|         0    ");
        System.out.println("|        /|\\  ");
        System.out.println("|        / \\  ");
        System.out.println("|              ");
        System.out.println("|              ");

        char iChoice;

        do {
            selection = scan.nextLine().toUpperCase();
        } while (selection.isEmpty());
        iChoice = selection.charAt(0);
        if (iChoice != 'X') {
            switch (iChoice) {

                case 'A':
                    System.out.println("You have choosen easy:");
                    //Get and print random string from easyWords                   
                    int selectA = random.nextInt(easyWords1.length);
                    String replaceAllEasy = easyWords1[selectA].replaceAll("\\S", "*");
                    // Print the randomly selected word and its length
                    System.out.println("Random String selected: " + replaceAllEasy);
                    System.out.println("This word contains " + easyWords1[selectA].length() + " letters");

                    //while hangman == false continue to ask player for letters
                    while (hangman == false) {
                        System.out.println("Turns remaining: " + turn);
                        System.out.println("Please choose a letter A-Z :");
                        String easyChosenLetter = scan.next();

                        if (wordBox.contains(easyChosenLetter)) {
                            System.out.println("Letter alreay choosen please choose another letter");
                        } else {
                            wordBox.add(easyChosenLetter);
                        }

                        if (easyWords1[selectA].contains(easyChosenLetter)) {

                            System.out.println("Wordbox letters are: " + wordBox);
                            System.out.println("Yes!");
                            turn--;
                        } else {
                            System.out.println("Wordbox letters are: " + wordBox);
                            System.out.println("No!");
                            turn--;
                        }

                        if (turn == 0) {
                            hangman = true;
                        }

                        while (hangman == true) {
                            System.out.println("You lose!");
                            System.exit(0);
                        }

                    }
                    break;

                case 'B':
                    System.out.println("You have choosen Medium");
                    //Get and print random string from mediumWords
                    int selectB = random.nextInt(mediumWords1.length);
                    String replaceAllMedium = mediumWords1[selectB].replaceAll("\\S", "*");
                    // Print the randomly selected word and its length
                    System.out.println("Random String selected: " + replaceAllMedium);
                    System.out.println("This word contains " + mediumWords1[selectB].length() + " letters");

                    //while hangman == false continue to ask player for letters
                    while (hangman == false) {
                        System.out.println("Turns remaining: " + turn);
                        System.out.println("Please choose a letter A-Z :");
                        String mediumChosenLetter = scan.next();

                        if (wordBox.contains(mediumChosenLetter)) {
                            System.out.println("Letter alreay choosen please choose another letter");
                        } else {
                            wordBox.add(mediumChosenLetter);
                        }

                        wordBox.add(mediumChosenLetter);
                        if (easyWords1[selectB].contains(mediumChosenLetter)) {
                            System.out.println("Wordbox letters are: " + wordBox);
                            System.out.print("Yes!");
                            turn--;

                        } else {
                            System.out.println("Wordbox letters are: " + wordBox);
                            System.out.println("No!");
                            turn--;
                        }

                        if (turn == 0) {
                            hangman = true;
                        }

                        while (hangman == true) {
                            System.out.println("You lose!");
                            System.exit(0);
                        }

                    }
                    break;

                case 'C':
                    System.out.println("You have choosen Hard");
                    //Get and print random string from hardWords
                    int selectC = random.nextInt(hardWords1.length);
                    String replaceAllHard = hardWords1[selectC].replaceAll("\\S", "*");
                    // Print the randomly selected word and its length  
                    System.out.println("Random String selected: " + replaceAllHard);
                    System.out.println("This word contains " + hardWords1[selectC].length() + " letters");

                    //while hangman == false continue to ask player for letters
                    while (hangman == false) {
                        System.out.println("Turns remaining: " + turn);
                        System.out.println("Please choose a letter A-Z :");
                        String hardChosenLetter = scan.next();

                        if (wordBox.contains(hardChosenLetter)) {
                            System.out.println("Letter alreay choosen please choose another letter");
                        } else {
                            wordBox.add(hardChosenLetter);
                        }

                        wordBox.add(hardChosenLetter);
                        if (easyWords1[selectC].contains(hardChosenLetter)) {
                            System.out.println("Wordbox letters are: " + wordBox);
                            System.out.print("Yes!");
                            turn--;

                        } else {
                            System.out.println("Wordbox letters are: " + wordBox);
                            System.out.println("No!");
                            turn--;
                        }

                        if (turn == 0) {
                            hangman = true;
                        }

                        while (hangman == true) {
                            System.out.println("You lose!");
                            System.exit(0);
                        }

                    }
                    break;

            }

        }
    }
} 
```

词类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package hangman;

import java.lang.reflect.Array;
import java.util.Random;

/**
 *
 * @author Adam2_000
 */
public class words extends Hangman {

    String[] easyWords = {"Bee", "Car", "Fish", "Shed"};
    String[] mediumWords = {"House", "Sheep", "Castle", "Phone"};
    String[] hardWords = {"Octagon", "Crocodile", "Chocolate", "Motorbike"};

    public String[] getEasyWords() {
        return easyWords;
    }

    public void setEasyWords(String[] easyWords) {
        this.easyWords = easyWords;
    }

    public String[] getMediumWords() {
        return mediumWords;
    }

    public void setMediumWords(String[] mediumWords) {
        this.mediumWords = mediumWords;
    }

    public String[] getHardWords() {
        return hardWords;
    }

    public void setHardWords(String[] hardWords) {
        this.hardWords = hardWords;
    }

    @Override
    public String toString() {
        return "words{" + "easyWords=" + easyWords + ", mediumWords=" + mediumWords + ", hardWords=" + hardWords + '}';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:03:01.613

您将不得不将字符串“***”替换为“B**”，而不是更改字符串的第一个字符。*字符串在 Java 中是不可变的*。

```
String oldstr = "***";
String newstr = 'B'+oldstr.substring(1,2); 
```

也许`Strings`不是此任务的正确数据结构。也许您想使用诸如字符数组之类的东西并编写自己的`print`函数。

即使是`Word`包含这些字符数组的类也是一个好主意，因为每个对象都可以有自己的索引，告诉你还有多少`*'s`要猜测，等等。

* * *

半伪`Word`类。这实际上使用了`String`s。未经测试。

```
public class Word{

  private String name;

  private String guessedSoFar;

  public String getGuessedSoFar(){
    return guessedSoFar;
  }

  public void changeIndexWith(String achar, int index){
     String temp = name.substring(0,index) + achar + name.substring(index+1, name.length();
  guessedSoFar = temp;
  }

  public void setName(String n){
    name = n;
  }

  public String getName(){
    return name;
  }
} 
```

# scala - 为什么 Scala 案例类字段不反映为公共的？

> ID：15730155
> 
> 赞同：6
> 
> 时间：2013-03-31T13:59:33.743
> 
> 标签：scala

我一直将案例类的构造函数参数理解为定义公共 val。

但是，当我反映字段时，isPublic 方法出现错误。任何想法为什么？

```
scala> class Test( val name : String, val num : Int )
defined class Test

scala> import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala> val tpe = typeOf[Test]
tpe: reflect.runtime.universe.Type = Test

scala> def checkValVisibility( t : Type ) = {
     | t.members
     |   .filter( _.isTerm )
     |   .map( _.asTerm )
     |   .filter( _.isVal )
     |   .map( memb => "Val " + memb.name.toString.trim + " is public? " + memb.isPublic )
     |   .mkString("\n")
     | }
checkValVisibility: (t: reflect.runtime.universe.Type)String

scala> checkValVisibility( tpe )
res2: String = 
Val num is public? false
Val name is public? false 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T16:04:39.327

原因是您查询的实际值`num`确实`name`是私有的。对于案例类（和具有公共类参数的类），类参数被实现为具有公共访问器（自动为您生成）的私有字段。

如果你想使用 Scala 反射来获得一个符号，代表给定字段的公共访问器，你可以简单地做：

```
scala> tpe.member("name": TermName)
res02: reflect.runtime.universe.Symbol = value name 
```

如果你这样做，你可以看到它是一个公共访问器：

```
scala> tpe.member("name": TermName).isPublic
res03: Boolean = true

scala> tpe.member("name": TermName).isMethod
res04: Boolean = true 
```

在您的情况下，您过滤掉了访问者，只留下了实际的（私有）字段。您可以通过使用`isAccessor`(or `isGetter`) 而不是`isVal`.

```
scala> def checkValVisibility( t : Type ) = {
     |   t.members
     |    .filter( _.isTerm )
     |    .map( _.asTerm )
     |    .filter( _.isAccessor )
     |    .map( memb => "Val " + memb.name.toString.trim + " is public? " + memb.isPublic )
     |    .mkString("\n")
     | }
checkValVisibility: (t: reflect.runtime.universe.Type)String

scala> checkValVisibility(tpe)
res05: String = 
Val num is public? true
Val name is public? true 
```

# java - IndexOutOfRangeException 错误

> ID：15730160
> 
> 赞同：0
> 
> 时间：2013-03-31T14:00:09.967
> 
> 标签：java, exception-handling, decimal

代码编译得很好，但会出现运行时错误，例如

```
 Exception in thread "main" BitBin.IndexOutOfRangeException: out of range
                 at BitBin.decmalToBinary.birBin(decmalToBinary.java:52) 
                 at BitBin.decmalToBinary.main(decmalToBinary.java:42) 
```

我不太确定问题是什么，因为我在代码中抛出了如下异常：对不起，当我输入除数字之外的任何内容时，它对我有异常，你能帮我吗？例如我输入字符而不是数字

```
package BitBin;
import java.util.Scanner;

public class decimalToBinary {

   static int decToBin (int n) {
             int term = 0;

            while (n != 0) {
                term ++;
                n /= 2;
        }

            return term;
    }

       static String ArrayBinToStr (int[] Array) {
            String ret = "";
            for (int i = Array.length-1; i >= 0; i--)
                  ret += Integer.toString(Array[i]);

        return ret;
    }

             public static void main (String[] args) {

                    Scanner sc=new Scanner (System.in);
                       System.out.print ("Enter number : ");
                       int num = sc.nextInt();

                         int[] bin = new int[decToBin (num)];
                          int dup = num, el = -1;

                   while (dup != 0) {
                         int rem = dup % 2;
                         bin [++el] = rem;
                            dup /= 2;
        }

                      String d2b = binBit(bin);
                             System.out.println("Binary of " + num + " is: " + d2b);

    }
                  static  String binBit(int []d2b) throws IndexOutOfRangeException{
                        Scanner sc=new Scanner (System.in);
                          System.out.print ("Enter bit: ");
                        int bit = sc.nextInt();
                        if(bit>d2b.length-1 || bit<0)
                            throw new IndexOutOfRangeException("out of range");
                         String rit="";
                          int i=bit;
                          if(d2b[i]== 0  )
                                  System.out.println("bite " +i+ " om  0 ast.");
                        else
                           System.out.println("bite " +i+ " om 1 ast.");
                            for (i = d2b.length-1; i >= 0; i--){
                           rit+=Integer.toBinaryString(d2b[i]);
}

                        return rit;

    }

}
}

SAMPLE INPUT FILE
Enter number: 
Enter bit: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:07:19.313

`if(bit>d2b.length-1 || bit<0)`这种情况是真实的。所以它抛出了那个异常。

字符串 d2b = binBit(bin);

你正在评估内部`binBit(bin)`方法`if(bit>d2b.length-1 || bit<0)`。所以我认为第一个条件总是正确的，所以它抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:25:15.127

如果您输入的位对于该数字来说太大，则您得到的异常是正常结果。例如，假设您输入“3”作为数字。然后 d2b 将是数组 [1,1]，即 3 的二进制表示。这意味着您可以为该位输入值 0 或 1。任何比这更大的东西，你都会从检查该条件的代码中得到异常：

```
if(bit > d2b.length - 1 || bit < 0)
    throw new IndexOutOfRangeException("out of range"); 
```

我使用以下输入运行了您的代码（有一些不重要的变化），它运行良好！

```
Enter number : 255
Enter bit: 3
bite 3 om 1 ast.
Binary of 255 is: 11111111 
```

这能解开谜团吗？

# function - Haskell - 与类型相关的错误

> ID：15730161
> 
> 赞同：0
> 
> 时间：2013-03-31T14:00:10.243
> 
> 标签：function, haskell, types

我在 Haskell 文件中有这些函数，它们工作正常：

```
func1 :: Integer -> (Integer,Integer) -> [[String]] -> ([Char],[Char],[Char],[Char]) -> (Integer,Integer)

func1 distance agent mymap moves = func5 (func3 agent (func2 distance agent mymap) moves)

func2 :: Integer -> (Integer,Integer) -> [[String]] -> [(Integer,Integer)]

func3 :: (Ord a, Ord b) => (b,a) -> [(b,a)] -> ([Char],[Char],[Char],[Char]) -> [(b,a)]

func4 :: (Int,Int) -> (Int,Int) -> ([Char],[Char],[Char],a) -> ([Char],[Char],[Char],[Char]) -> [[[Char]]] -> [[[Char]]]
func5 [(a,b)] = (a,b) 
```

但是当我写这个函数时：

```
func6 agent distance mymap moves moves2 = func4 agent (func1 distance agent mymap moves) moves moves2 mymap 
```

我收到此错误：

```
*ERROR "play.hs":176 - Type error in application
* * * Expression     : moveWithFood agent (giveNearestCorrect distance agent mymap moves) moves moves2 mymap
* * * Term           : giveNearestCorrect distance agent mymap moves
* * * Type           : (Integer,Integer)
* * * Does not match : (Int,Int)* 
```

与 ghci 相同的错误：

```
play.hs:176:93:
    Couldn't match expected type `Integer' against inferred type `Int'
      Expected type: (Integer, Integer)
      Inferred type: (Int, Int)
    In the second argument of `giveNearestCorrect', namely `agent'
    In the second argument of `moveWithFood', namely
        `(giveNearestCorrect distance agent mymap moves)'
Failed, modules loaded: none.* 
```

我尝试了几件事来解决它，但我无法成功。你能告诉我我应该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T14:24:01.230

正如pigworker所指出的，`Int`并且`Integer`不是同一类型。如果您只有几点需要“翻译”，`fromIntegral`可能是要走的路。

对于常见的应用程序`Int`通常足够好（并且比 更快`Integer`），所以我建议您尝试专门使用它。

另一种可能性是使用`Num`类型类。以下是适用于`Int`和的函数的示例`Integer`：

```
func1 :: Num a => a -> (a, a) -> [[String]] -> ([Char],[Char],[Char],[Char]) -> (a, a) 
```

您可能需要在`fromIntegral`内部使用一些调用，具体取决于您的原始实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:28:48.147

您正在用作/`agent`的第二个参数（因此它必须是一个，根据类型签名），并且还用作/的第一个参数（所以它必须是一个）。`func1``giveNearestCorrect``(Integer, Integer)``func4``moveWithFood``(Int, Int)`

`agent`不能同时是 an`(Integer, Integer)` *和*an `(Int, Int)`。选择一个并坚持下去：我会遵循 pigworker 评论中的建议。

# matlab - 在 MatLab 中解析文件

> ID：15730162
> 
> 赞同：0
> 
> 时间：2013-03-31T14:00:11.657
> 
> 标签：matlab

我想在 MatLab 中解析文件，文本中的数据采用这种格式。

```
15.01245  20.478
12.589  58.256 
```

**我使用了这个功能：**

```
fid = fopen('file.txt');
tline = fgets(fid);
while ischar(tline)
disp(tline)
tline = fgets(fid);
end

fclose(fid); 
```

它给了我线条，但我想提取它并将其存储为数组，如：

**数据（1,1）=15.01245 ，数据（1,2）= 20.478**

我怎么能这样做？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:04:13.750

只需致电

```
data = load('file.txt') 
```

# c# - 字体样式代码 c# 到 c++

> ID：15730166
> 
> 赞同：0
> 
> 时间：2013-03-31T14:00:32.897
> 
> 标签：c#, c++, fonts, code-translation

我想让我的粗体、斜体、下划线按钮在richtextbox 中相互配合。我找到了一个例子，但它在 c# 中。请帮助，它是如何在 C++ 中工作的：

```
if(e.Button==toolBarButton1)
{
    int fStyle = (int)FontStyle.Bold + (int)FontStyle.Italic;
    FontStyle f = (FontStyle)fStyle;
    richTextBox1.SelectionFont = 
        new Font(richTextBox1.Font.Name, richTextBox1.Font.Size, f);
} 
```

我的版本，我想重制它

```
 if ( RichTextBox1->SelectionFont != nullptr )
   {
      System::Drawing::Font^ currentFont = RichTextBox1->SelectionFont;
      System::Drawing::FontStyle newFontStyle;
      if ( RichTextBox1->SelectionFont->Bold == true )
      {
         newFontStyle = FontStyle::Regular;
      }
      else
      {
         newFontStyle = FontStyle::Bold;
      }
      RichTextBox1->SelectionFont = gcnew System::Drawing::Font( currentFont->FontFamily,currentFont->Size,newFontStyle ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:23:48.447

如果您想将 C# 直接转换为 C++/CLI，只需使用：

```
if (e->Button == toolBarButton1)
{
    int fStyle = safe_cast<int>(FontStyle::Bold) + safe_cast<int>(FontStyle::Italic);
    FontStyle ^f = safe_cast<FontStyle^>(fStyle);
    richTextBox1->SelectionFont = gcnew Font(richTextBox1::Font->Name, richTextBox1::Font::Size, f);
} 
```

# ios - 目标 - C：添加到以前的 NSUserDefaults

> ID：15730167
> 
> 赞同：-4
> 
> 时间：2013-03-31T14:00:57.547
> 
> 标签：ios, objective-c, delegates

在这里，我有一些通过使用委托获得`NSString`( ) 的代码。`passedValue1`获得值后，我会显示并将值保存到标签中。但是，一旦我从 中获得另一个值`passedValue1`，我想将我拥有的新值添加到以前保存的值中。

有人可以帮忙吗？？

```
- (void)viewDidLoad
{ 
    if(passedValue1){
        label.text = passedValue1;

        NSUserDefaults *defults = [NSUserDefaults standardUserDefaults];
        [defults setObject:label.text forKey:@"labelkey"];
        [defults synchronize];
    }
    label.text = [[NSUserDefaults standardUserDefaults]objectForKey:@"labelkey"];
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:34:04.897

更新：事实证明，实际上新旧值应该是数字，并且应该将这些值相加。这是一个更新的答案：

如果你想将新值添加到旧值中，那么这样的事情应该做你想做的事情（假设`passedValue1`是一个`int`）：

```
- (void)viewDidLoad { 
    static NSString *key = @"labelKey";

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if (passedValue1) {
        int oldValue = [defaults integerForKey:key];
        int newValue = oldValue + passedValue1;

        [defaults setInteger:newValue forKey:key];
        [defaults synchronize];
    }

    label.text = [NSString stringWithFormat:@"%d", [defaults objectForKey:key]];
} 
```

# javascript - 传递一个变量以用作模式中的 href 属性

> ID：15730168
> 
> 赞同：0
> 
> 时间：2013-03-31T14:01:16.680
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我想传递一个要在我的模式中使用的 url，它依赖于`adder`从我的主 HTML 文档中获取变量。我知道如何将变量传递给模式以用作文本（使用跨度），但不确定如何在链接`<a href>`标签中使用变量。

我已将每个文档中重要的区域加粗。Javascript`adder`从主 HTML 文档中获取变量并将其存储为 URL。

主要 HTML 文档：

```
<a href = "#myModal" class = "lib" data-toggle="modal" style = "text-align:center; color: #FF761A;" href="/models/{{symbol.id}}/view_model/"><span id = "modelname"> {{symbol.modelname.upper}}</span> - <span id = "format">{{ symbol.format }}</span>**<span id = "adder" style="visibility:hidden;"> {{symbol.adder}}</span>**</a> 
```

JAVASCRIPT：

```
 <script type="text/javascript">
    $(document).on("click", ".lib", function () {
         var modelname = $('#modelname').text();
         $('#modelnameplaceholder').replaceWith(modelname);     
         var format = $('#format').text();
         $('#formatplaceholder').replaceWith(format); 
         var adder = $('#adder').text();
         $('#adderplaceholder').replaceWith(adder);   
         **var URL = "/profiles/profile/" + adder + "/"**
         $('#urlplaceholder').replaceWith(URL);   
         var type = $(this).closest("ul").attr('id');
         $('#typeplaceholder').replaceWith(type); 
         $('#myModal').modal('show');
    });
   </script> 
```

模态对话框：

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h3 id="myModalLabel"><span id="modelnameplaceholder"></span>&nbsp;<span id="typeplaceholder"></span> for <span id="formatplaceholder"></span></h3>
</div>
<div class="modal-body">
<div style="background-image: url({{ STATIC_URL }}pinax/images/placeholder.png); background-repeat:no-repeat;background-position:center center; height: 300px; width: 100%; "></div>
<br>
<div id = "download-button" style="text-align-center">
<a href="{{MEDIA_URL}}{{item.content}}" class="btn btn-success btn-large" type="submit"><i class="icon-download icon-white"></i>&nbsp;Download {{item.type}}</a>
</div>
<br>
<br>
<br>
<div style="position:0px;float:right;">
**Added by <a href = urlplaceholder><span id="adderplaceholder"></span></a>** 
```

我想`Added by <username>`链接到从 javascript 传递的 url。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:36:58.793

这应该工作

```
var url = "http://google.com/";
$("#a").href = url; 
```

# wordpress - Wordpress：获取 $wpdb 以查找结果还需要什么

> ID：15730171
> 
> 赞同：0
> 
> 时间：2013-03-31T14:01:43.350
> 
> 标签：wordpress

我正在使用以下模板向我的 wordpress 网站添加一个辅助页面（没有网站的样式、菜单等），并且它没有从数据库返回任何结果。我已经阅读了无数的网页和几本 WP 书籍，但我不知所措。我可以看到数据库中的四条记录，但页面没有显示。这是我的模板：

> <?php /* 模板名称：媒体播放器页面 */ ?><!DOCTYPE html> > <head> <meta charset="<?php bloginfo('charset'); ?>" /> <title>在线媒体播放器</title>
> 
> ```
>  <?php wp_head(); ?>
> 
>     <link rel="stylesheet" href="/assets/css/music-player.css" type="text/css" media="screen" charset="utf-8">
> 
>     <script src="/assets/js/jquery-1.8.3.js"></script>
> </head>
> 
> <body>
>     <div class="main-center">
>         <h1>Please select your choice of music</h1>
>         <?php
>             global $wpdb;
>             $rows = $wpdb->get_results("select * from ppm_playlists");
>             foreach($rows as $row) :
>         ?>
>             <a class="openplayer"  data-genre="<?php echo $row['id']; ?>" href="#"><?php echo $row['playlist']; ?></a>
>         <?php endforeach; ?>
>     </div> <!-- /.main-center -->
> 
>     <script type="text/javascript">
>         (function($) {
>             $('.main-center').on('click', '.openplayer', function(e){
>                 var genre = $(this).data('genre');
>                 e.preventDefault();
>                 alert(genre);
>             });
>         })(jQuery);
>     </script>
> </body> </html> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:29:42.160

[`$wpdb->get_results`将返回一个对象数组](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results)，而不是数组数组，除非您将第二个参数传递给它以指示其他方式。如果您[启用了调试](http://codex.wordpress.org/Debugging_in_WordPress)，您会看到`Fatal Error: Cannot use object of type stdClass as array....`

您想使用对象语法：

```
foreach($rows as $row) : ?>
  <a class="openplayer"  data-genre="<?php echo $row->id; ?>" href="#"><?php echo $row->playlist; ?></a>
<?php endforeach; ?> 
```

或将第二个参数传递给`get_results`

```
$rows = $wpdb->get_results("select * from ppm_playlists", ARRAY_A); 
```

# rally - 如何打印自定义网格应用程序？

> ID：15730174
> 
> 赞同：1
> 
> 时间：2013-03-31T14:01:45.313
> 
> 标签：rally

我在我的自定义应用程序中添加了一个打印按钮和一个 PrintDialog，现在需要编写一个打印函数。我是否需要打开一个新窗口并构建一个表格，其中包含格式化为适合 A4 纸张大小的 css 样式的网格数据，或者我可以使用 Rally 内置的东西吗？我是 Rally 和 Ext JS 的新手，所以任何建议都将不胜感激！

```
Ext.create('Rally.ui.dialog.PrintDialog', {
          height: 250,
          autoShow: true,
          autoCenter: false,
          shouldShowFormatOptions: false,
          defaultTitle: 'Book Of Work Report',
          listeners: {
                print: function(event) {
                //How do I print a grid?         
            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T08:13:59.510

为了打印网格，我创建了一个 Rally.data.WsapiDataStore 并将存储加载到一个数组中。我将此数组（StoreData）传递给下面的函数，该函数打开一个打印窗口，显示表格中的网格。

```
_printDetails: function(Storedata) {

        var myData = Storedata;    
        var htmlTable ='<table>';
        htmlTable +='<width="100%">';   

    var r,c;                   
        for(r= 0 ; r<myData.length; r++){   
            htmlTable+= '<tr>';
            for(c = 0 ; c<myData[0].length; c++){    
                htmlTable+='<td>'+myData[r][c]+'</td>';         
            }
            htmlTable+='</tr>';
        }
        htmlTable+='</table>'; 

       var cssTable = '<style type="text/css">';
        cssTable +='table {border-collapse:collapse;...}';
        cssTable +='th {color:#080808;border-bottom-style: solid; ...}';
        cssTable +='tr {color:#000000; border-bottom-style: solid; ..}';
        cssTable +='td {padding:3px 4px; text-align:left; vertical-align:top;}';
        cssTable +='#filter {text-align:left; ...}';    
        cssTable += '</style>';

        var printwindow=window.open('', '', 'width=1000,height=500');
        var myDate = new Date;
        printwindow.document.write('<div id="todayDate">' + Ext.Date.format(myDate,'F j, Y, g:i a') + '</div>');            
        printwindow.document.write('<div id="header">Book Of Work Report</div>');
        printwindow.document.write('<div id="filter"><p>' + this._GetFilterString() + '</p></div>');
        printwindow.document.write(htmlTable);
        printwindow.document.write(cssTable);   
        printwindow.document.close();
        printwindow.focus();
        printwindow.print();
        printwindow.close();
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:16:57.773

你的倾向是正确的——这里最好的选择是打开一个窗口，用表格输出/网格内容填充并应用你喜欢的任何 CSS 格式。Rally 没有任何服务器端打印输出功能（至少对 AppSDK2 开放）。

# macos - 如何使用 Cocoa 解析 Carbon AppleEvent (NSAppleEventDescriptor?)

> ID：15730177
> 
> 赞同：2
> 
> 时间：2013-03-31T14:01:49.980
> 
> 标签：macos, cocoa, macos-carbon

在对 carbon 应用进行现代化改造的过程中，我想重写 Cocoa 中对 AppleEvents 的处理，特别是因为我发现 Carbon AEFunctions 非常难看。

我找到了 NSAppleEventDescriptor 但我对如何从 AppleEvent* 创建一个以便更轻松地访问其元素感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:41:13.810

一个`AppleEvent`是一个`AERecord`是一个`AEDescList`是一个`AEDesc`。因此，您可以创建一个`NSAppleEventDescriptor`using `-initWithAEDescNoCopy:`.

也就是说，如果您在 Cocoa 中编写 Apple 事件处理程序，那么您应该使用`-[NSAppleEventManager setEventHandler:andSelector:forEventClass:andEventID:]`. 然后，您的处理程序方法将接收 a`NSAppleEventDescriptor`作为参数，您不必担心从`AppleEvent`.

# node.js - 如何调试基于 Node.js 的 Web 应用程序

> ID：15730178
> 
> 赞同：2
> 
> 时间：2013-03-31T14:01:50.890
> 
> 标签：node.js, debugging, ide

我一直在寻找调试基于 Node.js 的 Web 应用程序的解决方案。我曾尝试使用 Eclipse + Chrome 调试器插件进行调试但失败了，[当我尝试使用 Eclipse 的 chrome 调试器调试 NodeJs 时，我在此会话中发布了错误“无法获取用于调试的选项卡”](https://stackoverflow.com/questions/15720338/failed-to-get-tabs-for-debugging-when-trying-to-debug-nodejs-with-chrome-debug)，但找不到答案。

然而，由于 Node.js 如此流行，我相信很多开发人员都有调试 Node.js 服务器 JavaScript 代码的解决方案。如果您可以分享为 Node.js 服务器 JavaScript 代码设置 IDE（编辑和调试）的解决方案，或者至少如何调试它，我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:07:08.077

有几种工具可以调试节点应用程序。最近在 Github 上发布了一个[很棒的资源。](https://gist.github.com/balupton/3944017)

一个简单的调试*设置*可能只是在代码中添加一个断点并在调试模式下启动节点，如下所示：

使用`debugger`手动断点的示例代码。

```
app.get('/foo', function(req, res) {
    var something = 123;
    debugger; // execution stops if this point is reached
    foo(something);
}); 
```

在调试模式下启动节点：

```
$ node debug app.js 
```

在调试模式下启动应用程序后，您将使用该应用程序（例如，使用浏览器导航到资源），一旦发生断点，执行将停止，您的终端中有一个调试器环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:28:17.483

我建议使用`node-inspector`. [这](http://flaviocopes.com/node-inspector-debug-node-js/)是一个很好的设置教程。它允许您使用浏览器选项卡来查看代码、设置断点并单步执行。此外，您可以使用标志启动节点`--debug-brk`，如果您需要调试启动时发生的某些事情，它将在第一行插入一个断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-01T15:42:01.187

尝试使用[Weinre](https://people.apache.org/~pmuellr/weinre/docs/latest/Home.html) (WEB INspector REmote)。它是一个节点应用程序，可帮助您调试 UI，在设备上登录 Web 应用程序。它希望它可以帮助你。

# php - 在 PHP 上通过 $_SESSION 进行用户验证

> ID：15730181
> 
> 赞同：0
> 
> 时间：2013-03-31T14:02:06.323
> 
> 标签：php, validation, session

我正在尝试在 PHP 上使用 $_SESSION 超全局来验证用户，但似乎 $_Session 不喜欢我任何帮助都非常感谢，我有以下名为 index.php 的代码：

```
 '<?php
 'session_start();
 'require("administratorcheck.php");
  //i have tried require_once "administratorcheck.php"
  '?> 
```

在这种情况下，administratorcheck.php 看起来像这样用于验证：

```
 <?php
      $errorMessage =  'Your Login Information Is Not Correct';
     if(isset($_POST['username'])){
     $username = $_POST['username'];
     $password = $_POST['password'];

    $adminUser = "admin";
    $adminPass = "donkeyKong";

if(($username!=$adminUser)||($password !=$adminPass))
{
   echo  $errorMessage;
}else{
// session_register('admin');
$_SESSION['admin'] = $username;
header("index.php");
exit();
}

}
 if(isset($_SESSION['admin'])!= 'admin')
 {
 echo '<h2>You Are Not Authorized To View This File</h2><br/>
 <table width = "400" border = "2">
 <form action = "administratorcheck.php" method="post" >
 <tr>
<td colspan = "2">You May Be Able To Login Here</td>
</tr>
 <tr>
<td width="108">Admin Username:</td>
<td width="250"><input type="text" name="username" id="username" style="width:98%"/>                                                            
</td>
</tr>
<tr>
<td>Password:</td>
<td><input type="password" name="password" id="password" style="width:98%"/></td>
</tr>
 <tr>
<td colspan="2" align="center"><input type="submit" name="button" id="button" 

value="Log Me In"/></td>
</tr>
</form>
</table>
</br>
</br>
<a href = "../">Click Here To Return To The Index Page</a>';
exit();
 } 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:10:04.730

# 问题

下面的行没有做你认为它正在做的事情。

```
if(isset($_SESSION['admin'])!= 'admin') 
```

如果你把它分解成更小的部分，你会看到。查看第一部分，您会看到从`isset`

```
$isAdminFieldSet = isset($_SESSION['admin']) // this returns a boolean 
```

现在在你的 if 语句中你实际上在做

```
if($isAdminFieldSet != 'admin') { 
```

这真的是

```
if(true != 'admin') { 
```

或者

```
if (false != 'admin') { 
```

# 解决方案

是的，管理员检查

```
if (isset($_SESSION['admin']) && $_SESSION['admin'] == 'admin')  {
   // user is an admin
   ...
} 
```

不是管理员检查

```
if (!isset($_SESSION['admin']) || $_SESSION['admin'] != 'admin' )  {
   // user is not an admin
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:05:59.580

```
if(isset($_SESSION['admin'])!= 'admin') 
```

isset 返回一个布尔值，因此永远不会等于 'admin'

# java - 在 Java 中链接 Arduino 程序

> ID：15730182
> 
> 赞同：-1
> 
> 时间：2013-03-31T14:02:06.777
> 
> 标签：java, arduino, netbeans-7

我在 Arduino 中编写了一个程序来使用超声波传感器检测入侵。当它检测到入侵时，必须触发摄像头。我在[NetBeans](http://en.wikipedia.org/wiki/NetBeans) IDE 中用 Java 编写了触发程序。但我不知道如何将 Arduino 程序与 Java 联系起来。我浏览了许多网站并看到了博客文章*[Arduino and Java](http://silveiraneto.net/2009/03/01/arduino-and-java)*，但在运行程序时出现错误。

错误出现在一行`Preference.init()`我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:37:40.953

您在某些计算机或板上运行的 Java 应用程序可以通过串行通信链路与您的 Arduino 应用程序进行通信。这可以是用于较短距离的 RS232（如果使用 9600bps，则最长为 30m），或最长为 1200m 的 RS485。您需要使用一些已知的协议，或者自己制作。如果需要，该链接也可以是无线的。如果出于某种原因更方便的话，更复杂的是将蓝牙放在两边。或者，如果您有 Arduino 的以太网屏蔽，您可以实现 UDP 或 TCP 消息传递以通知 Java 应用程序有关 Arduino 事件。除了仅在事件发生时发送事件，您还可以考虑从 Java 应用程序定期轮询。

# c++ - \PhysicalDisk 的性能数据处理程序挂起

> ID：15730185
> 
> 赞同：2
> 
> 时间：2013-03-31T14:02:26.930
> 
> 标签：c++, winapi

我一直在使用`PDH`( `Performance Data Handler`) 来收集有关我的进程正在运行的机器的性能数据。`PDH`我对对象没有任何问题，`Processor Information`但是`Memory`当我尝试使用`PhysicalDisk`我的程序时会挂起。

我将代码简化为这个测试用例。

```
void
third()
{
    char path[ PDH_MAX_COUNTER_PATH ];
    DWORD size = 0;
    PDH_STATUS  status;

    strcpy( path, "\\PhysicalDisk(1 E:)\\% Disk Time" );
    // hangs
    status = PdhExpandWildCardPath( NULL, path, 0, & size, PDH_NOEXPANDCOUNTERS );

    HANDLE query;
    PDH_HCOUNTER hCounter;
    status = PdhOpenQuery( NULL, 0, & query );
    // hangs
    status = PdhAddCounter( query, path, 0, & hCounter );
} 
```

当我自己运行这段代码时，它工作正常。当我在更大的程序中运行它时，它会挂起，但仅适用于`PhysicalDisk`. 我的大型程序监控十几个`PDH`计数器没有问题，但是当我添加任何`PhysicalDisk`计数器时，它就会挂起。计数器是在一个数组中定义的，因此所有计数器的代码都是相同的。

当它挂起时，这是堆栈回溯

```
 ntdll.dll!_ZwDelayExecution@8()  + 0x15 bytes   
    ntdll.dll!_ZwDelayExecution@8()  + 0x15 bytes   
    KernelBase.dll!_Sleep@4()  + 0xf bytes  
    perfdisk.dll!_OpenDiskObject@4()  + 0x105 bytes 
    advapi32.dll!_OpenExtObjectLibrary@4()  + 0x1f9 bytes   
    advapi32.dll!_QueryExtensibleData@4()  - 0x250f bytes   
    advapi32.dll!_PerfRegQueryValue@28()  + 0x26d bytes 
    kernel32.dll!_LocalBaseRegQueryValue@24()  + 0x2754e bytes  
    kernel32.dll!_RegQueryValueExW@24()  + 0xae bytes   
    pdh.dll!_GetSystemPerfData@16()  + 0x92 bytes   
    pdh.dll!_GetObjectId@12()  + 0xdb bytes 
    pdh.dll!_PdhiExpandWildcardPath@24()  + 0x38b bytes 
    pdh.dll!_PdhExpandWildCardPathHA@20()  + 0xcb bytes 
    pdh.dll!_PdhExpandWildCardPathA@20()  + 0x10a bytes 
>   dbb30.dll!third()  Line 2472 + 0x16 bytes   C++
    dbb30.dll!dbbProfileReport::dbbProfileReport()  Line 2490   C++
    dbb30.dll!`dynamic initializer for 'dbbProfileReportObject''()  Line 2367 + 0xd bytes   C++
    msvcr90d.dll!_initterm(void (void)* * pfbegin=0x0121d380, void (void)* * pfend=0x0121fddc)  Line 903    C
    dbb30.dll!_CRT_INIT(void * hDllHandle=0x00ae0000, unsigned long dwReason=1, void * lpreserved=0x0018fd24)  Line 318 + 0xf bytes C
    dbb30.dll!__DllMainCRTStartup(void * hDllHandle=0x00ae0000, unsigned long dwReason=1, void * lpreserved=0x0018fd24)  Line 540 + 0x11 bytes  C
    dbb30.dll!_DllMainCRTStartup(void * hDllHandle=0x00ae0000, unsigned long dwReason=1, void * lpreserved=0x0018fd24)  Line 510 + 0x11 bytes   C
    ntdll.dll!_LdrpCallInitRoutine@16()  + 0x14 bytes   
    ntdll.dll!_LdrpRunInitializeRoutines@4()  - 0x352 bytes 
    ntdll.dll!_LdrpInitializeProcess@8()  - 0x765 bytes 
    ntdll.dll!__LdrpInitialize@8()  + 0xb4f9 bytes  
    ntdll.dll!_LdrInitializeThunk@8()  + 0x10 bytes 
```

该`PDH`代码在我的进程中启动了 6 个线程，其中一个线程`function _PerfdiskPnpNotification`似乎是相关的。当我查看汇编代码时，主线程正在休眠，等待第二个线程设置标志。

我尝试使用管理员权限运行，但没有任何变化。谷歌搜索 _`PerfdiskPnpNotification`发现它有时会尝试打开一个弹出窗口。我尝试从 GUI 应用程序运行较大的代码，但它也挂起。我在两台机器（都是 Windows 7）上尝试了更大的代码，但没有运气。较大的程序`PDH`从全局对象的构造函数调用代码，我在全局对象上尝试了来自 ctor 的小测试用例，但它有效。我试图`lodctr /r`重建注册表，但没有任何乐趣。

使用 MSVC 2005 和 MSVC 2008 Express 进行编译。

# java - java代理和Web服务认证

> ID：15730186
> 
> 赞同：2
> 
> 时间：2013-03-31T14:02:27.583
> 
> 标签：java, web-services, authentication, proxy

我正在尝试访问需要身份验证的 Web 服务，但我也在需要自己的身份验证的代理后面。能够通过代理服务器，因为当 Web 服务 URL 没有身份验证时我可以获得结果。但是，当 Web 服务需要身份验证时，它根本不起作用。我收到以下错误：

```
Exception in thread "main" java.net.ProtocolException: Server redirected too many  times 
```

下面是我的代码：

```
Authenticator auth = new Authenticator() {
    public PasswordAuthentication getPasswordAuthentication() {

    if(getRequestorType() == Authenticator.RequestorType.PROXY)
    {   //for proxy
      return (new PasswordAuthentication("user", "pass".toCharArray()));
    }
    else
    {  // for web service   
     return (new PasswordAuthentication("user2", "pass2".toCharArray())); 
     }
     }
     };
    Authenticator.setDefault(auth);
    SocketAddress addr = new
                         InetSocketAddress("proxy addr", port no);

    Proxy proxy = new Proxy(Proxy.Type.HTTP, addr);
    URL url = new URL("...");
    URLConnection yc = query.openConnection(proxy);
    BufferedReader in = new BufferedReader(
                            new InputStreamReader(
                            yc.getInputStream()));
    String inputLine;

    while ((inputLine = in.readLine()) != null) 
        System.out.println(inputLine);
    in.close(); 
```

这是我在这里的第一个问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:30:17.170

URL 不一样。请求 URL 使用 HTTP，重定向 URL 使用 HTTPS。可能发生的情况是服务将重定向请求发送到代理，但代理仍然一遍又一遍地请求 HTTP URL。[已知](https://issues.apache.org/bugzilla/show_bug.cgi?id=38665)一些代理会表现出这种行为。

在初始请求中切换到使用 HTTPS。我对相关服务器的 HTTP 调用导致重定向到 HTTPS，而 HTTPS 调用导致 401。

> HTTP/1.1 401 您提供的授权类型不受支持。仅支持 Basic 和 OAuth

# c# - 从其资源加载 dll

> ID：15730188
> 
> 赞同：1
> 
> 时间：2013-03-31T14:02:33.840
> 
> 标签：c#, dll, resources

因此，我的程序在其资源中有一个 DLL，我试图以这种方式读取它：

```
 Assembly assembly = Assembly.Load(Resources.func);
        Type type = assembly.GetType("Func");
        dynamic functions = Activator.CreateInstance(type);
        functions.Test(); 
```

由于某种原因，它不断在这一行抛出一个空错误：

```
dynamic functions = Activator.CreateInstance(type); 
```

DLL 的命名空间是 Func，类的名称也是 Func。谁能帮我这个？过去一个小时我一直在谷歌搜索，但我找不到解决方案。

更新

当我使类成为非静态类并使用 assembly.GetType("Func.Func"); 时，它会在我执行 functions.Test(); 时引发 RuntimeBinder 异常。也许这有更多帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:05:12.897

尝试使用`Func`类的完整类型名称。如果命名空间是`Func`并且类型是`Func`，你应该尝试使用：

```
Type type = assembly.GetType("Func.Func"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:18:38.643

您可以使用`GetType("Func.Func")`，只要程序集成功加载，它将在名为 Func 的命名空间中返回一个名为 Func 的类。

# c# - 交互事件触发 点击列表框

> ID：15730190
> 
> 赞同：1
> 
> 时间：2013-03-31T14:02:42.320
> 
> 标签：c#, silverlight, windows-phone-7, mvvm

我有 listboxitem 的模板。模板包含复选框。总是，当我检查它时，会触发 Tap 事件。但是只有当我选择项目时，Tap 才必须触发，而不是当我选中复选框时。我尝试使用 SelctionChanged 事件，这工作正常。但由于 mvvm 模式，我想使用交互。这是我的 xaml 代码。

```
<ListBox x:Name="lstboxDevicePositions" Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding DevicePositions}" SelectedIndex="{Binding SelectedIndexDevicePosition, Mode=TwoWay}" SelectedItem="{Binding SelectedDevicePosition, Mode=TwoWay}" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Background="#709DFF" Margin="1,0,1,2" CornerRadius="2" >
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <CheckBox x:Name="cbxSelected" Grid.Column="0" Grid.RowSpan="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" IsChecked="{Binding IsSelected, Mode=TwoWay}" />
                            <TextBlock x:Name="txtblockBindedAddress" Grid.Column="1" Grid.Row="0" TextWrapping="Wrap" Text="{Binding Address}" />
                            <TextBlock x:Name="txtblockBindedDate" Grid.Column="1" Grid.Row="1" Text="{Binding Date}" />
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </ListBox.ItemContainerStyle>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Tap">
                    <cmd:EventToCommand Command="{Binding ShowDevicePositionCommand}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ListBox> 
```

**编辑**

问题是，复选框和列表框有 Tap 事件。所以当我点击复选框事件时被触发。我只想在点击 listboxitem 时触发 Tap 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:33:07.370

~~听起来您只需要停止复选框处理鼠标/手势事件。只需在复选框上将 IsHitTestVisible 设置为 False。~~

 ~~```
<CheckBox x:Name="cbxSelected" 
          Grid.Column="0" 
          Grid.RowSpan="2" 
          VerticalAlignment="Stretch" 
          HorizontalAlignment="Stretch" 
          IsChecked="{Binding IsSelected, Mode=TwoWay}"
          IsHitTestVisible="False"/> 
```~~  ~~我现在意识到我误读了你的问题......

如果您希望能够在不选择 ListBoxItem 的情况下选中复选框，则应处理来自 CheckBox 的 Tap 事件。

```
<CheckBox x:Name="cbxSelected" 
          Tap="cbxSelected_Tap"
          ...
          /> 
```

...

```
private void cbxSelected_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    e.Handled = true;
} 
```

通过设置 Handled = true，您将停止将事件路由到 ListBoxItem。~~

# wpf - 删除控件时防止在设计器中设置属性

> ID：15730194
> 
> 赞同：0
> 
> 时间：2013-03-31T14:03:14.530
> 
> 标签：wpf, designer

我在 WPF 中创建了一个从按钮继承的自定义控件。不幸的是，当我在设计器模式下将其放到我的窗口上时，我似乎也继承了按钮大小等的设置。例如我得到这个：

```
<myControls:CustomButton Content="Button" 
                         Height="23" Name="customButton1" Width="75" /> 
```

将按钮放到窗口上时，如何防止设计人员明确设置 Content、Height 和 Width 属性？我要使用的默认值已在样式中设置。这就是我要的：

```
<myControls:CustomButton Name="customButton1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:08:08.517

我认为您无法阻止这种行为。

在我的情况下（VS2012），高度设置为自动（没有明确的高度），因此高度会根据当前字体自动调整大小。宽度设置为 75。

使用 Blend 使用相同的值，所以我只能假设这些值是从元数据中读取的。

但是，您可以通过右键单击设计器中的按钮并选择：

> 重置布局 | 全部

这让你

```
<Button Content="Button"/> 
```

# git - 可以直接推送到 gh-pages 分支而不推送到 master 分支吗？

> ID：15730197
> 
> 赞同：2
> 
> 时间：2013-03-31T14:03:38.973
> 
> 标签：git, github, github-pages

我在 github 上托管了一个博客作为项目页面，我发现先推送到 master 然后再推送到 gh-pages 很烦人。我发现直接推送到 gh-pages 也可以。我想知道推送是否可以直接到 gh-pages，无需先推送到 master。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T23:50:50.883

`master`只是一个分支的名称，与`gh-pages`.

按照惯例，最好将您的主要开发分支保留为`master`，但是您可以安全地删除`master`并`gh-pages`只使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T12:06:43.890

正确 - 你甚至不需要 master 分支。

以下是如何[从 GitHub 中删除 master 分支](http://oli.jp/2011/github-pages-workflow/#deleting-master)的指南：

> 1.  将`gh-pages`分支设置为 GitHub 上的默认分支：存储库管理 > 选项 > 将“默认分支”设置设置为`master`
> 2.  使用删除 GitHub 上的主分支`git push origin :master`
> 3.  删除本地仓库中的主分支（一旦你检查了一切正常！）使用`git branch -d master`

# css - 在 CSS 中使用数据属性而不是类

> ID：15730199
> 
> 赞同：0
> 
> 时间：2013-03-31T14:04:05.157
> 
> 标签：css, html, custom-data-attribute

HTML

```
<div data-foo> ... </div> 
```

CSS

```
div[data-foo]{ ... } 
```

这是一个好主意吗？有什么缺点吗？

我认为当我有数百个“foo”元素时，数据方法是有意义的，因为 HTML 标记大小会减小（每个元素 -3 个字符）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:13:30.123

*   `div[data-foo]`旧 IE 不支持（IE6，请参见此处：[http](http://www.quirksmode.org/css/selectors/) ://www.quirksmode.org/css/selectors/ ）
*   `div[data-foo]`语义意义不大
*   `class="foo"`并且`data-foo`在 DEFLATE-d 时将占用大约相同的空间。如果您尚未将服务器设置为放气，则应该这样做。
*   `class=foo`仅比`data-foo`未压缩的字符长一个字符，并且是完全有效的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:08:03.410

这完全取决于您，例如元素必须具有不同的属性，因此您需要定义样式甚至重复一些样式，而不是我将使用一个我可以用于两者的类，而不是使用会限制我声明的属性选择器属性到具有该属性的元素，无论元素属性组合如何，您都可以自由使用类

```
.class { /* You can use this anywhere you need these properties */
   font-family: Arial;
   font-size: 13px;
} 
```

因为这将限制为 ELEMENT-ATTRIBUTE 组合

```
div[data-menu] { /* This will LIMIT you to a combination of div 
                    element having an attribute called data-menu */
    font-family: Arial;
    font-size: 13px;
} 
```

> 重要提示：特异性会让你一团糟

# javafx - 在启动画面期间加载罐子

> ID：15730201
> 
> 赞同：1
> 
> 时间：2013-03-31T14:04:24.503
> 
> 标签：javafx, splash-screen, jar-signing

我有一个引用 4-5 个外部 jar 文件的主应用程序。因此，在编译项目 netbeans ide(javafx application) 时需要很长时间。因此，我想设计一个启动画面，它会一直显示到所有 jar 都加载完毕。

我的 JNLP 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0" xmlns:jfx="http://javafx.com" href="Black.jnlp">
  <information>
    <title>Black</title>
    <vendor>RATTAN</vendor>
    <description>Sample JavaFX 2.0 application.</description>
    <offline-allowed/>
  </information>
  <resources>
    <jfx:javafx-runtime version="2.2+" href="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp"/>
  </resources>
  <resources>
    <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="Black.jar" size="3393158" download="eager" />
    <jar href="lib/commons-io-1.3.2.jar" size="95655" download="eager" />
    <jar href="lib/commons-lang-2.0.jar" size="179420" download="eager" />
    <jar href="lib/newlink.jar" size="6160" download="eager" />
    <jar href="lib/scribe-1.3.0.jar" size="74543" download="eager" />
  </resources>
<security>
  <all-permissions/>
</security>
  <applet-desc  width="800" height="600" main-class="com.javafx.main.NoJavaFXFallback"  name="Black" >
    <param name="requiredFXVersion" value="2.2+"/>
  </applet-desc>
  <jfx:javafx-desc  width="800" height="600" main-class="test.Test"  name="Black" />
  <update check="always"/>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T16:31:29.560

使用 JavaFx 中的预加载器模块

这是完整的教程：

[http://docs.oracle.com/javafx/2/deployment/preloaders.htm](http://docs.oracle.com/javafx/2/deployment/preloaders.htm)

祝你好运，'。

# css - 在文本区域内放置标签文本

> ID：15730202
> 
> 赞同：0
> 
> 时间：2013-03-31T14:04:27.817
> 
> 标签：css, position, label

我已经在 CSS 上玩了几个小时了，但我似乎无法得到我想要的结果。基本上我希望我的标签文本显示在文本框中，所以当你开始输入时它就会消失。像这样的东西[输入---输入你的名字---输入]

真实示例： http: [//www.apartmani-pesa-zaton.hr/rezervacija](http://www.apartmani-pesa-zaton.hr/rezervacija)

我的标签形式：

```
<form class="email" id="forma-kontakt" action="send_mail.php" method="post">
        <div id="grid_kontakt">
                    <div id="grid_kontakt_l">
                        <p>
                            <label for="name">Ime i prezime *</label>
                            <input type="text" id="name" class="required" name="name" />
                        </p>
                        <p>
                            <label for="email">E-mail *</label>
                            <input type="text" id="email" class="required email" name="email" />
                        </p>
                    </div><!-- Grid kontakt left -->
                    <div id="grid_kontakt_r">
                        <p>
                            <label for="country">Država</label>
                            <input type="text" id="country" class="required" name="country" />
                        </p>
                        <p>
                            <label for="phone">Telefon</label>
                            <input type="text" id="phone" class="required" name="phone" />
                        </p>
                    </div><!-- Grid kontakt right -->
                    <p class="text">
                        <label for="message">Poruka *</label>
                        <textarea name="message" class="required" id="message"></textarea>
                    </p>
                    <p class="ar">
                        <em>Sva polja su obavezna!</em>
                        <input type="submit" class="send" value="POŠALJI" />
                    </p>
                </div><!-- Grid kontakt -->
            </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:12:38.880

使用占位符属性，现在被广泛支持。

```
<input type="text" id="name" class="required" name="name" placeholder="Ime i prezime *" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:32:35.143

我使用 Chrome 开发者工具将示例站点中的所有相关 CSS 添加到表单中。

[http://jsfiddle.net/76VRz/54/](http://jsfiddle.net/76VRz/54/)

```
.email input[type=text], .forma input[type=email] {
width: 283px;
height: 47px;
padding: 0 15px;
background-position: 0 0;
}

.email label {
position: absolute;
width: 100%;
height: 47px;
line-height: 47px;
color: #383838;
font-size: 14px;
text-indent: 15px;
cursor: text;
} 
```

这确实会覆盖输入框中的标签，尽管必须有一个事件连接以使颜色变暗，然后在字段中按下键值时将其删除。

# php - 如何在mysql中配置区分大小写的数据库标识符

> ID：15730203
> 
> 赞同：0
> 
> 时间：2013-03-31T14:04:38.563
> 
> 标签：php, mysql, database

如何在mysql中配置区分大小写的数据库标识符。这样数据库“testDatabase”和“TestDatabase”就不会被认为是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:30:08.400

MySQL 在线文档在第 9.2.2 节中提供了有关标识符区分大小写的信息。 [http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html) 如果您在 Windows 或 Mac 上运行 MySQL（除非使用带有 UFS 文件系统的 Mac）这两个数据库将被视为相同. 如果存储在具有区分大小写文件系统的基于 Unix 的系统上，您可以将它们存储为单独的数据库。

# vim - 在 vimrc 中调整颜色，或者更确切地说在配色方案本身中调整颜色

> ID：15730204
> 
> 赞同：0
> 
> 时间：2013-03-31T14:04:39.200
> 
> 标签：vim, color-scheme, maintainability

就我而言，我确实使用了日晒配色方案。到目前为止，我曾经在我的 vimrc 中覆盖某些颜色属性。但随着时间的推移，调整的数量似乎会增加。特别是我倾向于调整用于 UI 元素的颜色，例如行号、突出显示的搜索、突出显示组等。现在我问自己，在我的 vimrc 中维护颜色设置是否有意义，或者我是否应该分叉颜色方案和将我的更改直接与配色方案文件合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:40:11.360

不要用特定的颜色设置污染 vimrc。

如果您唯一关心的是 Solarized 方案，那很容易。

`bundle`如果您使用 PathOgen，Solarized实际上是一个 repo 。因此，对于您的问题，只需转到 Solarized 存储库，创建一个说“自定义”的分支并切换到它，然后根据需要进行任何自定义。

`.vim/colors`另一种方法是和我一样直接把Solarized放进去。我对整个`.vim`文件夹进行了版本控制，有些无知。在这种情况下，您也可以创建分支，但需要更多的汗水。

# forms - 如何将未定义数量的输入传递给表单spring mvc

> ID：15730208
> 
> 赞同：0
> 
> 时间：2013-03-31T14:05:20.013
> 
> 标签：forms, spring-mvc, input

我正在创建一个包含一定数量的隐藏输入的表单，我想将它传递给我的 spring MVC 服务器。创建的表单将是这样的（并不总是我会有 3 种输入类型。我可以有更多或更少，用户将设置这个值）：

```
 <form id="submitCoordenadas" method="post" action="adicionaCorredores">
    <button type="submit" id="saveCoordenadas" class="btn" value="Save">Enviar</button>
    <input type="hidden" name="corredor" id="linha1" val="[Linha] Inicio: [1;1] Fim: [104;114]">
    <input type="hidden" name="corredor" id="linha2" val="[Linha] Inicio: [113;1] Fim: [1;144]">
    <input type="hidden" name="corredor" id="linha3" val="[Linha] Inicio: [113;1] Fim: [1;144]">
</form> 
```

到目前为止，我尝试的是创建一个具有字符串列表的对象：

```
public class Corredores {

    List<String> corredor;

........ (getters and setters)
} 
```

和我的 Spring MVC 服务器：

```
@RequestMapping("adicionaCorredores")
    public String adicionaCorredores(Corredores valores) {
        System.out.println("Valores: " + valores.getCorredor().get(0));
        return "";
    } 
```

我没有收到有关“valores”参数的任何信息。

我该怎么做？如何在表单中有不确定数量的输入并在我的 Spring MVC 服务器中接收它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-31T16:36:29.767

我解决了我的问题..首先，我在表格中犯了一个错误。我没有插入属性“value”，而是使用“val”。现在我的表格是这样的：

```
<form id="submitCoordenadas" method="post" action="adicionaCorredores">
    <button type="submit" id="saveCoordenadas" class="btn" value="Save">Enviar</button>
    <input type="hidden" name="corredor" id="linha1" val="[Linha] Inicio: [1;1] Fim: [104;114]">
    <input type="hidden" name="corredor" id="linha2" val="[Linha] Inicio: [113;1] Fim: [1;144]">
    <input type="hidden" name="corredor" id="linha3" val="[Linha] Inicio: [113;1] Fim: [1;144]">
</form> 
```

我做的另一件事是将我的控制器更改为：

```
@RequestMapping("adicionaCorredores")
    public String adicionaCorredores(@RequestParam("corredor") String[] corredor) {

        for(int i=0; i < corredor.length; i++) {
            System.out.println("Valores: " + corredor[i]);
        }

        return "";
    } 
```

我没有收到对象“Corredores”，而是收到了一个字符串数组。请注意，此 String 数组的名称应与表格中给出的名称相同

希望它可以帮助别人！

# css - 如何在 CSS3 中为不同的屏幕分辨率定义 x、y 轴

> ID：15730209
> 
> 赞同：1
> 
> 时间：2013-03-31T14:05:32.147
> 
> 标签：css, css-transitions

所以这就是问题所在，我使用 CSS3 transform:translate(x, y) 将对象从屏幕左侧过渡到右侧。（x 轴）问题取决于屏幕分辨率，这些对象飞离屏幕。根据我的发现，我可以使用百分比来定义坐标，但是在使用它们时，它们的行为似乎与我使用像素测量一样。这是否可能仅使用 css3 或者我必须使用媒体查询的 Javascript 来实现？

ps，它把1400%当作1400px，我也试过用em。

```
$(window).load(function() {

     $('#second').css({
         webkitTransform : 'translate(1400%,0)',
     mozTransform : 'translate(1400%, 0)',
     msTransform : 'translate(1400%, 0)',
     oTransform : 'translate(1400%, 0)',
     transform : 'translate(1400%, 0)',
     transition: 'all 1.25s ease-in-out'

     });

$('#first').css({
         webkitTransform : 'translate(1400%,0)',
     mozTransform : 'translate(1400%, 0)',
     msTransform : 'translate(1400%, 0)',
     oTransform : 'translate(1400%, 0)',
     transform : 'translate(1400%, 0)',
     transition: 'all 1.75s ease-in-out'

     });

$('#third').css({
     webkitTransform : 'translate(1400%,0)',
     mozTransform : 'translate(1400%, 0)',
     msTransform : 'translate(1400%, 0)',
     oTransform : 'translate(1400%, 0)',
     transform : 'translate(1400%, 0)',
     transition: 'all .75s ease-in-out'

     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:17:29.320

您可以绝对定位它们，然后在`left`和上过渡`margin-left`。

[jsFiddle](http://jsfiddle.net/Tyriar/b3hGy/)

```
#trans {
    position:absolute;
    top:50px;
    left:0%;
    width:50px;
    height:50px;
    background-color:#00F;
    -moz-transition:all 2s ease;
    -webkit-transition:all 2s ease;
    transition:all 2s ease;
}

#trans.toggle {
    left:100%;
    margin-left:-50px;
} 
```

您的特定解决方案不起作用，因为您只是将它们向右移动 1400%，这与`14 * width`.

要在页面加载时更改它，请准备好文档中的类。

[jsFiddle](http://jsfiddle.net/Tyriar/xLn9B/)

```
$(document).ready(function () {
    $('#trans').addClass('toggle');
}); 
```

# scala - Scala 中的成功/失败链模式

> ID：15730210
> 
> 赞同：5
> 
> 时间：2013-03-31T14:05:40.230
> 
> 标签：scala, design-patterns, workflow

我有这样的工作流程：

```
parse template -> check consistency
                                    -> check conformance of one template to another
parse template -> check consistency 
```

这些步骤中的任何一个都可能失败。我想在 Scala 中实现它，最好是让并行分支得到独立评估，合并它们的两个错误。也许是单子风格，但我也对一些通用的 OOP 模式感到好奇。目前，我有多个变体硬编码各种动作，像这样的链接

```
def loadLeftTemplateAndForth (leftPath : String, rightPath : String) = {
  val (template, errors) = loadTemplate(leftPath)
  if(errors.isEmpty) loadRightTemplateAndForth(template, rightPath)
  else popupMessage("Error.")
} 
```

我敢打赌，这一定是某种反模式。这些步骤需要从工作流程中分离出来，但我无法提出任何非常优雅的方法，并且必须已经有经过验证的方法。

**编辑：** 好的，所以我没有成功地尝试实现这样的东西

```
(((parseTemplate(path1) :: HNil).apply(checkConsistency _) :: ((parseTemplate(path2) :: HNil).apply(checkConsistency _)) :: HNil).apply(checkConformance _)

def checkConformance (t1 : Template)(t2 : Template) : Seq[Error] 
```

然后这些函数将返回 Success(result) 或 Failure(errors)。我正在使用 HLists，但在类型推断规则和其他问题中迷失了方向。看来我已经很接近了。对于熟悉这些东西的人来说，这可能是小菜一碟。

**编辑：** 我终于设法实现了这个

```
(parseTemplate("Suc") :: Args).apply(checkConsistency _) :: 
(parseTemplate("Suc") :: Args).apply(checkConsistency _) :: Args)
.apply(checkConformance _) 
```

有一些不幸的约束，每个函数必须返回我的等效项，并且应用函数的错误类型必须是参数错误类型的子类型。我使用 HList、应用程序类型类和包装器类成功/不成功ArgList 来完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:41:23.387

How about this?

```
// Allows conditional invocation of a method
class When[F](fun: F) {
    def when(cond: F => Boolean)(tail: F => F) = 
      if (cond(fun)) tail(fun) else fun
}
implicit def whenever[F](fun: F): When[F] = new When[F](fun) 
```

After that:

```
parseTemplate(t1).when(consistent _){ 
  val parsed1 = _
  parseTemplate(t2).when(consistent _){ 
    conforms(parsed1, _) 
  }
} 
```

Create some holder for errors, and pass it around (to parseTemplate, to consistent, to conforms), or use ThreadLocal.

Here is decoupled much more:

```
(parseTemplate(t1), parseTemplate(t2))
  .when(t => consistent(t._1) && consistent(t._2)){ t =>
    conforms(t._1, t._2) 
  } 
```

**EDIT**

I've ended up with something like this:

```
def parse(path: String): Either[
  String,  // error
  AnyRef   // result
] = ?

def consistent(result: Either[String, AnyRef]): Either[
  String,  // error
  AnyRef   // result
] = ?

def conforms(result1: Either[String, AnyRef], result2: Either[String, AnyRef], 
  fullReport: List[Either[
    List[String],  // either list of errors 
    AnyRef         // or result
  ]]): List[Either[List[String], AnyRef]] = ?

( (parse("t1") :: Nil).map(consistent _), 
  (parse("t2") :: Nil).map(consistent _)
).zipped.foldLeft(List[Either[List[String], AnyRef]]())((fullReport, t1t2) =>
  conforms(t1t2._1, t1t2._2, fullReport)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:32:05.533

让你的`loadTemplate`方法返回`Either[List[String], Template]`。

对于错误返回`Left(List("error1",...))`和成功返回`Right(template)`。

然后你可以做

```
type ELT = Either[List[String], Template]

def loadTemplate(path: String): ELT = ...

def loadRightTemplateAndForth(template: Template, rightPath: String): ELT = ...

def loadLeftTemplateAndForth(leftPath: String, rightPath: String): ELT =
  for {
    lt <- loadTemplate(leftPath).right
    rt <- loadRightTemplateAndForth(lt, rightPath).right
  } yield rt 
```

以上是“快速失败”，即不会合并来自两个分支的错误。如果第一个失败，它将返回 a`Left`并且不会评估第二个。有关[使用](https://github.com/robcd/scala-either-extras)`Either`. _

或者，您可以使用 Scalaz 验证。请参阅[Scala 中的方法参数验证，以及理解和 monads](https://stackoverflow.com/questions/12307965/method-parameters-validation-in-scala-with-for-comprehension-and-monads/12309023#12309023)以获得很好的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:51:00.493

所以我设法做到的方式是这样的（尽管它仍然可以使用改进 - 例如，它构造了列表错误和函数错误共有类型的错误序列）：

**HList.scala**

```
import HList.::

sealed trait HList [T <: HList[T]] {

  def ::[H1](h : H1) : HCons[H1, T]

}

object HList { 

  type ::[H, T <: HList[T]] = HCons[H, T] 

  val HNil = new HNil{}

}

final case class HCons[H, T <: HList[T]](head: H, tail: T) extends HList[HCons[H, T]] {

  override def ::[H1](h: H1) = HCons(h, this)

  def apply[F, Out](fun : F)(implicit app : HApply[HCons[H, T], F, Out]) = app.apply(this, fun)

  override def toString = head + " :: " + tail.toString

  None
}

trait HNil extends HList[HNil] {
  override def ::[H1](h: H1) = HCons(h, this)
  override def toString = "HNil"
} 
```

**HListApplication.scala**

```
@implicitNotFound("Could not find application for list ${L} with function ${F} and output ${Out}.")
trait HApply[L <: HList[L], -F, +Out] {
  def apply(l: L, f: F): Out
}

object HApply {

  import HList.::

  implicit def happlyLast[H, Out] = new HApply[H :: HNil, H => Out, Out] {
    def apply(l: H :: HNil, f: H => Out) = f(l.head)
  }

  implicit def happlyStep[H, T <: HList[T], FT, Out](implicit fct: HApply[T, FT, Out]) = new HApply[H :: T, H => FT, Out] {
    def apply(l: H :: T, f: H => FT) = fct(l.tail, f(l.head))
  }

} 
```

**ErrorProne.scala**

```
sealed trait ErrorProne[+F, +S]

case class Success [+F, +S] (result : S) extends ErrorProne[F, S]

case class Failure [+F, +S] (errors : Seq[F]) extends ErrorProne[F, S] 
```

**argList.scala**

```
import HList.::
import HList.HNil

sealed trait ArgList [E, L <: HList[L]] {

  def apply[F, S](fun : F)(implicit app : HApply[L, F, ErrorProne[E, S]]) 
  : ErrorProne[E, S]

  def :: [A, E1 <: EX, EX >: E] (argument : ErrorProne[E1, A]) : ArgList[EX, A :: L]

}

case class SuccessArgList [E, L <: HList[L]] (list : L) extends ArgList[E, L] {

  def apply[F, S](fun : F)(implicit app : HApply[L, F, ErrorProne[E, S]]) 
  : ErrorProne[E, S] = app.apply(list, fun)

  override def :: [A, E1 <: EX, EX >: E] (argument : ErrorProne[E1, A]) : ArgList[EX, A :: L] = argument match {
    case Success(a) => SuccessArgList(a :: list)
    case Failure(e) => FailureArgList(e)
  }

}

case class FailureArgList [E, L <: HList[L]] (errors : Seq[E]) extends ArgList[E, L] {

  def apply[F, S](fun : F)(implicit app : HApply[L, F, ErrorProne[E, S]]) 
  : ErrorProne[E, S] = Failure(errors)

  override def :: [A, E1 <: EX, EX >: E] (argument : ErrorProne[E1, A]) : ArgList[EX, A :: L] = argument match {
    case Success(a) => FailureArgList(errors)
    case Failure(newErrors) => FailureArgList(Seq[EX]() ++ errors ++ newErrors)
  }

}

object Args {

  def :: [E1, A] (argument : ErrorProne[E1, A]) : ArgList[E1, A :: HNil] = argument match {
    case Success(a) => SuccessArgList(a :: HNil)
    case Failure(e) => FailureArgList(e)
  }

} 
```

**用法**

```
val result = ((parseTemplate("Suc") :: Args).apply(checkConsistency _) :: 
              (parseTemplate("Suc") :: Args).apply(checkConsistency _) :: Args)
              .apply(checkConformance _)

trait Err
case class Err1 extends Err
case class Err2 extends Err
case class Err3 extends Err

def parseTemplate(name : String) : ErrorProne[Err, Int] = if(name == "Suc") Success(11) else Failure(Seq(Err1()))

def checkConsistency(value : Int) : ErrorProne[Err2, Double] = if(value > 10) Success(0.3) else Failure(Seq(Err2(), Err2()))

def checkConformance(left : Double) (right : Double) : ErrorProne[Err3, Boolean] = 
    if(left == right) Success(true) else Failure(Seq(Err3())) 
```

# c# - 从控制器创建 JSON

> ID：15730215
> 
> 赞同：0
> 
> 时间：2013-03-31T14:06:13.040
> 
> 标签：c#, jquery, asp.net-mvc-3, razor

我正在使用控制器来创建 JSON 字符串。

```
StringBuilder builder = new StringBuilder();
...
builder.Append(String.Format(@"{{""lat"":{0}, ""lon"":{1}}},", latitude, longitude)); 
```

当涉及到视图时，上面的代码被渲染成类似

```
&quot;lat&quot;:10.7654200827348, &quot;lon&quot;:106.681716282384} 
```

所以`jQuery.parseJSON()`不起作用，因为它不明白`&quot;` 我该如何解决？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:48:03.770

永远不要像这样手动创建 JSON。您可以让控制器操作返回 JsonResult：

```
public ActionResult SomeAction()
{
    var model = new
    {
        lat = latitude,
        lon = longitude
    };
    return Json(model, JsonRequestBehavior.AllowGet);
} 
```

然后您可以使用 AJAX 调用来使用此操作：

```
<script type="text/javascript">
    $.getJSON('@Url.Action("SomeAction")', function(result) {
        // you could use result.lat and result.lon here directly
        alert('latitude: ' + result.lat + ', longitude: ' + result.lon);
    });
</script> 
```

在这种情况下，您不需要手动构建或解析任何 JSON。该管道将​​由框架为您处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:45:13.273

我不知道这是否能解决你的问题......但无论如何你应该遵循这个建议！

使用`JavaScriptSerializer`from`System.Web.Extensions.dll`生成您的 JSON！

```
var serializer = new JavaScriptSerializer();
builder.Append(serializer.Serialize(new { lat = latitude, lon = longitude })); 
```

# javascript - 如何/在哪里将数据存储在除 localStorage 之外的 Chrome Tampermonkey 脚本中？

> ID：15730216
> 
> 赞同：45
> 
> 时间：2013-03-31T14:06:15.170
> 
> 标签：javascript, google-chrome, local-storage, greasemonkey, tampermonkey

我为 Facebook 编写了一个 Greasemonkey/Tampermonkey 脚本。我需要存储数据以便以后检索它。为此，我使用了`localStorage`.

那工作得很好。但我注意到，几个小时后，我存储的所有数据都被自动删除了。可能 Facebook 本身会删除所有 localStorage 数据。

我寻找替代品。

1.  **Cookies**：不，当用户清除历史记录时，它将被删除。
2.  **[Web SQL](http://www.w3.org/TR/webdatabase/)**：显然它被 w3.org 删除了。所以在不久的将来，我认为 chrome 可能也不会使用 web sql。

我想将数据存储在客户端系统中。我有什么选择？我应该使用 FileSystem 来存储数据吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-03T10:20:37.643

由于您正在使用[Tampermonkey](https://chrome.google.com/extensions/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo) (Chrome) 和 Greasemonkey (Firefox)。继续使用[`GM_setValue()`](http://wiki.greasespot.net/GM_setValue). 它不能被 Facebook 或任何其他网站清除。

它还具有跨域存储值的优点。

~~~
请注意，沼泽标准在*Firefox*`GM_setValue()`上有些问题。它可能导致脚本实例在无效值上崩溃——因此最好使用序列化程序，例如[**GM_SuperValue**](http://userscripts-mirror.org/scripts/show/107941)*[](http://userscripts-mirror.org/scripts/show/107941)**来存储字符串以外的任何内容。即使是看起来很无辜的整数也可能导致默认值`GM_setValue()`崩溃。***

 ***目前，只有`GM_setValue()`、cookies、localStorage 和[IndexedDB](https://stackoverflow.com/tags/indexeddb/info)可用于两种浏览器上的持久数据。

IndexedDB 也可能会做你想做的事，但它没有那么容易使用`GM_setValue()`.

* * *

更新：
如今，不要忘记使用：

*   `// @grant GM_setValue`
    和
*   `// @grant GM_getValue`

此外，如果您确实使用 GM_SuperValue 库，您现在可以添加：

```
// @require http://userscripts-mirror.org/scripts/source/107941.user.js 
```

在元数据块中。（因为 userscripts.org 早已死去。）***

# javascript - 部署静态站点时如何替换 JS 和 CSS 引用？

> ID：15730219
> 
> 赞同：3
> 
> 时间：2013-03-31T14:06:35.667
> 
> 标签：javascript, html, css, client-side, static-html

我正在构建一个静态站点（即从基本 Web 服务器提供的 HTML 文件）。在开发过程中，我想使用 Javascript 代码和 CSS 文件的本地（和非缩小）副本，但在部署时，我想引用相同文件的缩小版本。

我当前的解决方案是添加属性`data-prod-href`和标记，并将引用替换为我的构建脚本的一部分。虽然这使 HTML 文件保持有效，并且允许我在不每次运行构建脚本的情况下进行开发，但感觉有点 NIH。`data-prod-src``script``link`

我环顾四周，并没有找到这种事情的任何标准做法。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:48:26.017

您可以使用以下脚本

```
<script>
if(location.hostname == "your_site.com"){
$.getScript("your_minified_script.js", function(data, textStatus, jqxhr) {
console.log(data); //data returned
console.log(textStatus); //success
console.log(jqxhr.status); //200
console.log('Load was performed.');
});   
}
else
{
$.getScript("your_non_minified_script.js", function(data, textStatus, jqxhr) {
console.log(data); //data returned
console.log(textStatus); //success
console.log(jqxhr.status); //200
console.log('Load was performed.');
});
}
</script> 
```

# c++ - 缩小从 char 到 uint8_t 的转换

> ID：15730222
> 
> 赞同：2
> 
> 时间：2013-03-31T14:06:36.433
> 
> 标签：c++, c++11, narrowing

使用 C++11 编译以下代码片段（[此处](http://liveworkspace.org/code/4hGpMk%240)为演示）：

```
#include <stdint.h>

int main() {
    const uint8_t foo[] = {
        '\xf2'
    };
} 
```

将触发警告（至少在 GCC 4.7 上），表明转换`'\xf2'`为`uint8_t`.

为什么是这样？`sizeof(char)`is always `1`，应该与 相同`sizeof(uint8_t)`，不是吗？

请注意，当使用其他字符文字时，例如`'\x02'`，没有警告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T14:14:58.550

尽管 char 不一定必须是 8 位长，但这不是问题所在。您正在从转换`signed char`为无符号（`uint8_t`），这就是错误的原因。

这：

```
const int8_t foo[] = {
    '\xf2'
}; 
```

会编译得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T14:35:41.227

查看我的系统，常量`\xf2`溢出，因为它超出了有符号字符的范围。它被表示为`-14`which 然后隐式转换为 unsigned int，给出 4294967282 的值。然后缩小为 a `char`，产生以下警告：

```
warning: narrowing conversion of ‘'\37777777762'’ 
```

使用`(unsigned char)'\xf2'`删除警告。

# r - 第二个Y轴ylab的位置

> ID：15730223
> 
> 赞同：3
> 
> 时间：2013-03-31T14:06:40.260
> 
> 标签：r, axis

我想画一个双Y轴图表，但是当我命名右边Y轴名字的时候，右边不能画名字，而是放在左边Y轴的标签上，怎么办？

```
plot(1:length(S285$LAI),S285$LAI,axes=F,type="o",pch=1,xlim=c(1,length(S285$LAI)),ylim=c(0,6),xlab="",ylab="LAI",cex.lab=1.5)
axis(side=1,kk1,S285$DAY[kk1])
axis(side=2,seq(0,5,1),seq(0,5,1))
par(new=T)
plot(1:length(S285$LAI),S285$WSO,axes=F,type="o",pch=15,xlim=c(1,length(S285$LAI)),ylim=c(0,10000),xlab="",ylab="WSO")
axis(side=1,kk1,S285$DAY[kk1])
axis(side=4,seq(0,10000,1000),seq(0,10000,1000))
mtext("DOY285播种",side=3,line=-3.5,at=15)
legend(x=1,y=6000,legend=c("LAI","产量"),pch=c(1,15),cex=1.1,lty=c(1,1)) 
```

如果你运行这段代码，“LAI”和“WSO”这两个标签会聚在一起，如何将WSO绘制到右侧？谢谢你们

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T14:13:26.953

一种选择是使用`mtext`：

```
op <- par(mar = c(5,4,4,4) + 0.1)
plot(1:10, ylab = "ylabel")
axis(side = 4)
mtext("ylabel 2", side = 4, line = 3, cex = par("cex.lab"))
par(op) 
```

这使：

![在此处输入图像描述](https://i.stack.imgur.com/bwDKb.png)

# qt - Qt 忽略 QTextDocument 中的 CSS

> ID：15730224
> 
> 赞同：3
> 
> 时间：2013-03-31T14:06:42.120
> 
> 标签：qt, qtextedit, qtextdocument, qtextcursor

这是我的代码的一小段，我不知道为什么，但 Qt 忽略了 css。

```
QTextDocument *mTextDocument = new QTextDocument(0);
QTextEdit *textEdit = new QTextEdit(0);
mTextDocument->setDefaultStyleSheet(QString::fromUtf8("body{background-color: rgb(0,111,200);}"));
QTextCursor *_cursor = new QTextCursor(mTextDocument);
textEdit->setDocument(mTextDocument);
_cursor->insertBlock();
_cursor->insertHtml("<html><body><p>Hello world</p></body></html>");
textEdit->show(); 
```

我正在使用 Qt 4.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:00:44.607

您的文档已经有`html`和`body`标签，因此当它们在`insertHtml`.

如果您使用`QTextEdit::setHtml`，它们将是新元素，并且默认样式表将应用于它们。

# java - 在java中通过ftp上传文件时出错

> ID：15730225
> 
> 赞同：0
> 
> 时间：2013-03-31T14:06:42.063
> 
> 标签：java, ftp

这是我使用 Jakarta Commons Net 通过 FTP 将文件上传到远程位置的代码

```
public boolean ftpTransfer(String localfile, String destinationfile)
        {
            String server = "xxxx";
            String username = "xxxxxx";
            String password = "xxxxxxx";
            try
            {
                FTPClient ftp = new FTPClient();
                ftp.connect(server);
                if(!ftp.login(username, password))
                {
                    System.out.println("login");
                    ftp.logout();
                    return false;
                }
                int reply = ftp.getReplyCode();
                if (!FTPReply.isPositiveCompletion(reply))
                {
                    System.out.println("disconnect");
                    ftp.disconnect();
                    return false;
                }
                InputStream in = new FileInputStream(localfile);
                ftp.storeFile(destinationfile, in);
                in.close();
                ftp.logout();
                ftp.disconnect();
            }
            catch (Exception ex)
            {
                ex.printStackTrace();
                return false;
            }
            return true;
        } 
```

控制台中的错误是

```
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
    at java.io.InputStreamReader.read(InputStreamReader.java:167)
    at java.io.BufferedReader.fill(BufferedReader.java:136)
    at java.io.BufferedReader.readLine(BufferedReader.java:299)
    at java.io.BufferedReader.readLine(BufferedReader.java:362)
    at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:294)
    at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:490)
    at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:534)
    at org.apache.commons.net.ftp.FTPClient._openDataConnection_(FTPClient.java:476)
    at org.apache.commons.net.ftp.FTPClient.__storeFile(FTPClient.java:374)
    at org.apache.commons.net.ftp.FTPClient.storeFile(FTPClient.java:1379)
    at com.killerlinks.controllers.CategoryController.ftpTransfer(CategoryController.java:266)
    at com.killerlinks.controllers.CategoryController.test(CategoryController.java:230)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:552)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:123)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:171)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

我检查了远程位置的文件是否已上传

![在此处输入图像描述](https://i.stack.imgur.com/o68VC.png)

文件以 0 字节上传。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:24:33.360

```
String server = "xxxxxxx";
        String username = "xxxxxx";
        String password = "xxxxxx";
        FTPClient client = new FTPClient();
        FileInputStream fis = null;
        try {
            client.connect(server);
            client.login(username, password);
            client.enterLocalPassiveMode();
            client.setFileType(FTP.BINARY_FILE_TYPE);

            fis = new FileInputStream(localfile);

            client.storeFile(destinationfile, fis);
            fis.close();
            client.logout();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

最后这段代码对我有用。我简化了代码并添加了这两行

```
client.enterLocalPassiveMode();
client.setFileType(FTP.BINARY_FILE_TYPE); 
```

对于二进制文件，我们必须将文件类型设置为二进制，默认为 asci 类型。我尝试了活动模式，但得到了同样的错误 `java.net.SocketTimeoutException: Read timed out`。

我认为默认是主动模式，我们必须指定被动模式。

# matlab - Matlab如何计算正态分布的概率？

> ID：15730227
> 
> 赞同：1
> 
> 时间：2013-03-31T14:06:49.223
> 
> 标签：matlab, probability, normal-distribution

我是 Matlab 的新手，如果有人可以提供帮助，我将不胜感激。问题：

IQ 系数呈正态分布，平均值为 100，标准差为 15。计算从该人群中随机抽取的人的 IQ 大于 110 但小于 130 的概率。您可以使用一行 matlab 代码实现这一点。这看起来像什么？

我试过这样：

```
>> max(normpdf(linspace(110,130,100),100,15))
ans =
    0.0213 
```

但不确定是否正确..

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T14:44:31.327

使用正态**累积**密度函数可以最有效地处理此问题。

```
normcdf(130,100,15) - normcdf(110,100,15) 
```

或者，如果您更喜欢手动将这些转换为“Z”分数，那么您可以使用 cdf 的单参数版本。

```
normcdf(30/15) - normcdf(10/15) 
```

在任何一种情况下，答案都是 0.2297，即大约 23%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:21:22.250

让我们检查：

```
N=1e7;                          %Number of "experimental" samples
iq = randn(1,N)*15 + 100;       %Create a set of IQ values
p = sum(iq>=110 & iq<=130)/N    %Determine how many are in range of interest. 
```

这将返回大约 23% 的数字。

# mysql - SQL 选择五个这个和五个那个

> ID：15730238
> 
> 赞同：-3
> 
> 时间：2013-03-31T14:07:31.597
> 
> 标签：mysql, sql, select

有没有什么办法可以从汽车表中获得 10 辆最新汽车，其中 5 辆是红色的，5 辆是蓝色的？

我能想到的最好的方法是两个选择和一个程序化合并：

```
red  = query("select * from cars where color = 'red'  order by when desc limit 5")
blue = query("select * from cars where color = 'blue' order by when desc limit 5")
all = merge(red, blue) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:27:13.577

对于 MySQL 尝试：

```
select * from cars where color = 'blue' order by releasedate desc limit 5
Union
select * from cars where color = 'red' order by releasedate desc limit 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:20:27.543

由于 mysql 不支持`CTE`并且`Window Function`与任何其他 RDBMS 一样，您可以在此使用相关子查询，

```
SELECT  a.*
FROM    Cars a
WHERE   a.Color IN ('Red', 'Blue') AND
        (
            SELECT  COUNT(*)
            FROM    Cars b
            WHERE   b.Color IN ('Red', 'Blue') AND
                    a.Color = b.Color AND
                    a.time >= b.time
        ) <= 5 
```

* * *

**PostgreSQL 后**

```
WITH carList
AS
(
    SELECT  Col1, Col2, Col3, Color,
            ROW_NUMBER() OVER (PARTITION BY Color ORDER BY time DESC) rn
    FROM    tableName
)
SELECT  Col1, Col2, Col3, Color
FROM    carList
WHERE   Color IN ('Red', 'Blue') AND
        RN <= 5 
```

*   [PostgreSQL CTE](http://www.postgresql.org/docs/9.2/static/queries-with.html)
*   [PostgreSQL 窗口函数](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)

# url - yii 中自定义控制器的 URL 路由

> ID：15730242
> 
> 赞同：0
> 
> 时间：2013-03-31T14:08:08.657
> 
> 标签：url, yii

我是 yii 框架的新手，并且遇到了 url 路由问题。我有一个控制器 - StaticPage 和操作索引（默认）并发送。那是我的配置：

```
'urlManager' => array(
        'showScriptName' => false,
        'urlFormat' => 'path',
        'rules' => array(
            'call' => 'staticPage/index',
            'call/send' => 'staticPage/send'
        ),
    ), 
```

当我尝试像这样设置模式时，`'call/<_a>' => 'staticPage/<_a>'`我得到 404 错误，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:51:03.063

这对我有用：

```
'call' => 'staticPage/index',
'call/<action:\w+>' => 'staticPage/<action>',
//or 'call/<action:(send|abc|something)>' => 'staticPage/<action>', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:51:22.173

始终将更具体的规则放在首位。规则匹配后，将不再检查所有以下规则。这意味着在您的情况下，如果您尝试使用 URL `/call/send`，第一条规则将匹配并路由到`staticPage/index`.

如果要添加，请将其设为`'call/<_a>' => 'staticPage/<_a>'`第一条规则并删除该`'call/send'`规则。

# c# - 通过 this.PropertyGet 访问类内的类属性

> ID：15730243
> 
> 赞同：0
> 
> 时间：2013-03-31T14:08:17.617
> 
> 标签：c#, matrix

我正在为矩阵构建一个 C# 类。我实际上在 SO 上找到了一些可以开始的东西，所以我不必从头开始。这个家伙的类有一个私有属性，用于矩阵的行和列以及一个`get()`和`set()`属性。`mRowCount`有时，为了计算目的，这个家伙通过名称和`mColumnCount`或通过类内部的`this.RowCount`and来引用属性本身，`this.ColumnCount`如下所示（我只添加了相关代码）：

```
public class Matrix
{
  private decimal[,] mInnerMatrix;
  private int mRowCount, mColumnCount = 0;

  public int RowCount
  {
    get { return mRowCount; }
  }
  public int ColumnCount
  {
    get { return mColumnCount; }
  }
} 
```

有时在代码中，这个人按名称使用属性，有时使用`mRowCount`and而不是前一种方式。有什么区别？有一种更好的方法吗？如果是这样的话，关于什么？特别是在布尔方法中，这些方法检查对象/矩阵是对角矩阵、对称矩阵还是方阵，开发人员在遍历包含矩阵数据的数组的循环中使用and 。其他时候，他使用这些属性本身。谁能解释为什么有人会这样做或者这是一个错误？我应该使用什么，我应该在整个程序中使用它吗？`mColumnCount``this.RowCount``this.ColumnCount``this.RowCount``this.ColumnCount``mInnerMatrix[]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:17:00.737

从技术上讲，`get`and`set`方法可能不是那么简单。例如，如果您不存储行数和列数，而是存储行数和总数，则必须将总数除以行数才能得到列数：

```
public Cols {get {return _mTotal/_mRows;}} 
```

这不是最好的示例，但您可以理解。在您的简单情况下，使用字段还是属性没有区别（如果您实际上有`set`方法但省略了它们，否则属性是只读的！）。但请注意，有一天您可能希望在`get`. 然后使用属性的代码可以正常工作，但使用字段的代码会失败。

在一个类之外，你总是必须使用属性，如果有的话。事实上，您将声明字段`private`，以便只有在类中您才能访问它们。从技术上讲，您可以在类之外使用字段和属性，但这会导致混乱。

另一方面，我不同意在一个类中混合属性和字段访问总是不鼓励的。有时您确实需要此访问权限，最简单的示例是您的属性是只读的（只有`get`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:12:29.793

如果您定义了属性 - 尽可能在类内部或外部使用它们，因为它们可能包含其他逻辑，而不仅仅是直接成员访问。

不使用属性的一个正当理由（改用直接访问） - 在构造函数中，应使用属性进行所有其他访问。

在一个类中混合直接访问和属性是相当糟糕的做法

# jsf - Ajax 并不总是有效

> ID：15730247
> 
> 赞同：0
> 
> 时间：2013-03-31T14:08:33.070
> 
> 标签：jsf, jsf-2, primefaces

下面你会看到我的代码的一部分，我只想选择表单中的第一个值，其余的应该通过 ajax 更新，例如，如果你选择 PK，MccName、MccVorname、MccDepartment 应该在这个选择之后通过 ajax 显示. 这也应该可以独立地以其他形式出现，

```
<h:panelGrid columns="4">
    <h:form id="formmcc10">
        <h:outputText value="Pls select PK: " />
        <p:selectOneMenu value="#categorymcc.mcccatname}" id="mcccat"
            immediate="true" valueChangeListener="#categorymcc.processScat}">
            <f:selectItem itemLabel="#categorymcc.mcccatname}"itemValue="" />
            <f:selectItems value="#categorymcc.categoryName}" />
            <p:ajax update="formmcc10:mccscat1 formmcc10:mccscat2 formmcc10:mccscat3" event="change" />
        </p:selectOneMenu><h:outputText value="Mcc Name" />
        <p:selectOneMenu value="#{categorymcc.submcccatname}"id="mccscat1">
            <f:selectItemsvalue="#{categorymcc.subCategoryName}" />
        </p:selectOneMenu>
        <h:outputText value="Mcc Vorname" />
        <p:selectOneMenu value="#{categorymcc.subsubmcccatname}"id="mccscat2">
            <f:selectItems value="#{categorymcc.subSubCategoryName}" />
        </p:selectOneMenu>
        <h:outputText value="Mcc Department:" />
        <p:selectOneMenu value="#{categorymcc.abteilung}" id="mccscat3">
            <f:selectItems value="#{categorymcc.abteilungCategoryName}" />
        </p:selectOneMenu>
    </h:form>
</h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:22:07.863

这可能是任何事情，但我最近遇到了一个类似的有趣问题。我试图输出一个 bean 属性`#{myBean.otherBean.name}`，当我通过正常请求加载页面时它可以工作，但它不适用于 AJAX。当我尝试`#{myBean.otherBean.id}`时，它在两种情况下都有效。

问题是，后端系统没有为`otherBean`AJAX 请求填充所有数据，它只填充了 id（可能是为了更好的性能）。我必须准备一个`getOtherBeanById`方法，当我调用它时，AJAX 开始按预期工作。

我不是这方面的专家，也许有人对此有更准确的解释。

# regex - 无法退出while循环？

> ID：15730249
> 
> 赞同：1
> 
> 时间：2013-03-31T14:08:44.863
> 
> 标签：regex, perl, while-loop

我尝试了以下两个脚本。脚本 1 得到了我预期的结果。脚本 2 没有 - 可能卡在 while 循环中？

```
$_= "Now we are engaged in a great civil war; we will be testing whether
that nation or any nation so conceived and so dedicated can long endure. ";

my $count = 0;
while (/we/ig){
    $count++
    };
print $count; 
```

输出`2`

```
$_= "Now we are engaged in a great civil war, we will be testing whether
that nation or any nation so conceived and so dedicated can long endure";

my $count = 0;
while (/we/){
    $count++
    };
print $count; 
```

我的理解是`/g`允许全局匹配。但是我只是对脚本 2 很好奇，在 Perl 找到第一个匹配 "we"`$_`并且`$count`现在等于 1 之后，当它循环返回时，由于没有`/g`，它如何响应？还是因为不知道如何响应而卡住了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:16:32.040

正则表达式

```
/we/g 
```

在标量上下文中将遍历匹配项，使正则表达式成为迭代器。正则表达式

```
/we/ 
```

将没有迭代质量，但只会匹配或不匹配。因此，如果匹配一次，它将始终匹配。因此无限循环。试试看

```
my $count;
while (/(.*?we)/) {
    print "$1\n";
    exit if $count++ > 100;   # don't spam too much
} 
```

如果您只想计算匹配项，则可以执行以下操作：

```
my $count = () = /we/g; 
```

或者

```
my @matches = /we/g;
my $count = @matches; 
```

# javascript - 拉伸/适合 HTML 模板和子窗口

> ID：15730252
> 
> 赞同：0
> 
> 时间：2013-03-31T14:08:58.007
> 
> 标签：javascript, html, meta-tags, viewport, email-templates

我的应用程序生成 HTML 电子邮件模板。它们的宽度通常在 600 像素到 650 像素之间，但有时会达到 900 像素。模板嵌套得很深（`table`电子邮件客户端有很多元素），遗憾的是所有宽度/高度都以 px 硬编码，而不是相对尺寸。直到现在还可以，因为我的用户在浏览器中查看它们。但现在我正在构建一个移动应用程序。

我正在尝试在各种移动客户端（iPhone、Android、iPad 等）内的 web 视图中显示这些模板。有没有办法“缩放”或适应这些模板，以便它们伸展以填满窗口的整个宽度？

我尝试调整元标记；

```
<meta name="viewport" content="width=device-width, initial-scale=1.0> 
```

不幸的是，我事先不知道模板的宽度，所以我必须将元标记设置得太宽或太小，然后模板要么有白色边框，要么最终与窗口重叠。我还能尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T08:34:14.550

我最终使用了 CSS3

```
transform: scale(ratio);
position: absolute;
top: 5px; left: 5px; 
```

在动态计算缩放比例以考虑 5px 边距之后。原来

```
minimum-scale=0.1 
```

旧的 Android 手机需要正确显示调整大小的视图。

# java - 评级文章 - 情绪分析

> ID：15730254
> 
> 赞同：3
> 
> 时间：2013-03-31T14:09:01.880
> 
> 标签：java, algorithm, math, probability, sentiment-analysis

我正在开发一个 Java 程序（分类器），它读取给定的文本文件并输出相关的情绪（正面或负面或中性）。

该程序计算三个类别（正面或负面或中性）的三个概率。鉴于这三个概率，我想给文章打分（最高 10 分）。

**示例**- 如果假设，

```
P(Positive) = 0.0006
P(Negative) = 0.0001
P(Neutral)  = 0.0002 
```

那么很明显，这篇文章是高度正面的，因此评级应该是高的，即 8 或以上。

PS - 概率加起来不等于 1，而且是非常小的数字（在 ~ 10^-(100) 的范围内）

有人可以指出任何可以帮助我评价文章的算法吗？

谢谢

* * *

**编辑** 我不能简单地采用比率。例如

```
P(Positive) = 1.2*E(-117)
P(Negative) = 4.7*E(-112)
P(Neutral)  = 9.3*E(-110) 
```

上面显示的概率差异很大。因此，采用比率将毫无意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T14:19:31.700

大约 6 个月前，我在亚马逊评论上做了类似的事情（估计准确性的基本事实是星级）。

您可以使用[**词袋模型**](http://en.wikipedia.org/wiki/Bag-of-words_model)来完成这项任务——即每个“词”都是一个特征。这会导致一个维度非常高的问题——这可能会影响学习时间。

从原始数据中提取特征后，您可以使用一种[**分类算法**](http://en.wikipedia.org/wiki/Statistical_classification)，该算法与高维问题有关。我测试了[SVM](http://en.wikipedia.org/wiki/Support_vector_machine)（线性和高斯内核）和[Naive-Bayes](https://en.wikipedia.org/wiki/Naive_Bayes_classifier)。我发现 SVM 的得分要好得多——当我在 Amazon 上测试时，两个内核之间没有统计学意义。

我为我的学习算法使用了具有 3 个可能值（类）的名义分类器 - 赞成/中立/反对。

我还发现使用[特征选择](http://en.wikipedia.org/wiki/Feature_selection)（降低维度）对朴素贝叶斯非常有帮助，但对 SVM 却没有那么大的帮助。

* * *

**一些更重要的注意事项：**

1.  词干化也有帮助。
2.  除了词之外，使用二元组（词对）也有帮助（尽管进一步增加了问题的维度）。
3.  对于这个任务，我使用[Weka](http://www.cs.waikato.ac.nz/ml/weka/)和[lib-svm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)库来实现学习算法。
4.  我建议拆分数据进行测试和训练以估计数据的准确性，并使用[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)来查找算法的参数（例如，SVM 所需的参数）

* * *

我的结果：使用 SVM，正面评论的准确率为 85%，负面评论的准确率约为 80%。真正的问题是中立，我们得到了 70%，赞成和反对的错误也主要是因为分类器将其归类为“中立”，几乎没有（少于 5%）被归类为赞成/反对。恰恰相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:46:13.280

如果您使用朴素贝叶斯，则在某些时候您会计算给定示例属于某个类别的概率（或对数似然），在您的情况下为负数、正数或中性。也许你可以把这个概率乘以 10 来得到你的评分？

# html - 使用 HTML5 Canvas 从视频中捕获帧

> ID：15730256
> 
> 赞同：2
> 
> 时间：2013-03-31T14:09:18.720
> 
> 标签：html, video, canvas, frame, capture

我试图从视频中捕获一帧并使用 HTML5 将其绘制到画布上，但下面的代码无法正常工作。当我使用`.mp4`格式视频源并单击开始按钮时，画布被黑色填充。

但我可以获得“.ogv”格式视频源的正确捕获图像。这是用于捕获帧的代码：

```
<script type="text/javascript">
    var videoId = 'video';
    var scaleFactor = 0.25;
    var snapshots = [];

    /**
    * Captures a image frame from the provided video element.
    *
    * @param {Video} video HTML5 video element from where the image frame will be captured.
    * @param {Number} scaleFactor Factor to scale the canvas element that will be return. This is an optional parameter.
    *
    * @return {Canvas}
    */
    function capture(video, scaleFactor) {
        if(scaleFactor == null){
            scaleFactor = 1;
        }
        var w = video.videoWidth * scaleFactor;
        var h = video.videoHeight * scaleFactor;
        var canvas = document.createElement('canvas');
        canvas.width  = w;
        canvas.height = h;
        var ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, w, h);
        return canvas;
    } 

    /**
    * Invokes the <code>capture</code> function and attaches the canvas element to the DOM.
     */
    function shoot(){
        var video  = document.getElementById(videoId);
        var output = document.getElementById('output');
        var canvas = capture(video, scaleFactor);
        canvas.onclick = function(){
            window.open(this.toDataURL());
        };
        snapshots.unshift(canvas);
        output.innerHTML = '';
        for(var i=0; i<4; i++){
            output.appendChild(snapshots[i]);
        }
    }
</script> 
```

# php - “无法打开所需文件”错误，但文件在那里

> ID：15730260
> 
> 赞同：1
> 
> 时间：2013-03-31T14:09:59.383
> 
> 标签：php, include

我收到这些错误：

> PHP致命错误：main（）[function.require]：打开失败需要'/usr/share/pear/Mail.php'（include_path ='。：/var/www/vhosts/xxx.net/httpdocs/protected/modules /rbam/models:/var/www/vhosts/xxx.net/httpdocs/protected/extensions/translations/components:/var/www/vhosts/xxx.net/httpdocs/protected/extensions/runactions/components:/var/ www/vhosts/xxx.net/httpdocs/protected/components:/var/www/vhosts/xxx.net/httpdocs/protected/models:/usr/share/pear:') 在 /var/www/vhosts/xxx 中。第 70 行的 net/httpdocs/protected/components/MailComponent.php

首先， include 语句不在 my 的第 70 行`MailComponent.php`，它在第 3 行（但`MailComponent.php`正好有 69 行，所以这可能只是 PHP 报告错误的方式中的一个错误）

```
require_once '/usr/share/pear/Mail.php'; 
```

该文件`/usr/share/pear/Mail.php`就在那里，`/usr/share/pear/Mail.php`它属于root，但它对每个人都有读取权限；正如您`/usr/share/pear`在包含路径中看到的那样。而且，这曾经一直有效，直到最近我还没有碰过它。

那么可能是什么问题？！？！？

**编辑**：我认为这与包含文件所在的文件夹不在`httpdocs folder`.

（我也对此感到困惑`main()`，我在任何地方都没有这样的方法；我使用的是 Yii，它确实有几个`main()`方法在这里和那里（只是 grepped）尽管据报道错误出现在我的代码中，据称在我`MailComponent.php`的 include_once 所在的位置）。

```
<?php

require_once '/usr/share/pear/Mail.php'; // PEAR Mail
require_once '/usr/share/pear/Mail/mime.php'; // PEAR Mail_mime

class MailComponent extends CApplicationComponent {

    public $defaultHeaders=array();
    public $debugUsers=false;
    public $debugAdmins=false;
    public $debugEmail='matteosistisette@gmail.com';
    public $backend='mail';

    public function sendMail($address, $subject, $body, $headers=array(), $isadmin=false) {

        $actualheaders=array_merge($this->defaultHeaders, $headers);
        $actualheaders['Subject']=$subject;

        $mail = new Mail_mime(array(
            "text_charset" => "utf-8",
            "html_charset" => "utf-8",
            "eol" => "\n"
        ));

        $mail->setTxtBody($body);

        if (($isadmin && $this->debugAdmins) || (!$isadmin && $this->debugUsers)) {
            $address=str_replace('@','_AT_',$address)." <".$this->debugEmail.">";
            //$address=$this->debugEmail;
        }
        $actualheaders['To']=$address;
        $headersencoded=array();
        foreach ($actualheaders as $header=>$value) {
            $headersencoded[$header]=$mail->encodeHeader($header, $value, "utf-8", "quoted-printable");
        }
        //$to=$mail->encodeHeader('To',$address,"utf-8", "quoted-printable");
        $to=$headersencoded['To'];
        $msg=@$mail->get();
        $actualheaders=$mail->headers($headersencoded);
        @$factory=& Mail::factory($this->backend);
        @$ret=$factory->send($to,$actualheaders,$msg);
        if ($ret instanceof PEAR_Error) Yii::log('ERROR SENDING MAIL TO '.$to, 'error');
        return $ret;     
    }

    public function notifyAdmins($role, $area, $subjectcode, $bodycode, $params=array()) {
        $admins=Yii::app()->authManager->getUsers($role);
        $users=array();
        foreach ($admins as $userid) {
            $user=User::model()->findByPk($userid);
            if ($user===null) continue;
            if ($user->current_area_id!=$area->id) continue;
            if ($user->email===null || ($email=trim($user->email))=='') continue;
            $lang=$user->preferredLanguage;
            $params['{CHANNEL_NAME}']=I::tattr($area->partialRoot, 'menu.home', $lang);
            $params['{USER}']=$user->getActualDisplayName();
            $subject=I::t($subjectcode,$lang,$params);
            $body=I::t($bodycode,$lang,$params);
            $this->sendMail($email, $subject, $body, array(), true);
        }
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:37:52.197

您确定正在加载文件“MailComponent.php”的正确版本吗？如果，如您所说，这个文件有 69 行，并且错误出现在第 70 行，我首先会怀疑该错误是指其他 MailComponent.php 文件。

# magento - 如何更改 Magento 主页

> ID：15730265
> 
> 赞同：1
> 
> 时间：2013-03-31T14:10:19.573
> 
> 标签：magento

我为移动设备下载了这个 Magento 主题：

[在此处输入链接描述](http://www.magentocommerce.com/magento-connect/blue-depth-mobile-theme-free-4986.html)[http://www.magentocommerce.com/magento-connect/blue-depth-mobile-theme-free-4986.html](http://www.magentocommerce.com/magento-connect/blue-depth-mobile-theme-free-4986.html)

它不使用在`Admin > System > Configuration > Web > Default Pages > CMS Home Page`. 相反，它显示类别列表。

当我在台式计算机上查看我的页面时，它使用默认主题，并且我看到了我设计的 CMS 主页。当我在移动设备上查看它时，我会看到类别。

如何更改它以显示自定义页面？

# xamarin.ios - MonoTouch.Dialog StyledStringElement

> ID：15730268
> 
> 赞同：0
> 
> 时间：2013-03-31T14:10:43.590
> 
> 标签：xamarin.ios, element, monotouch.dialog, xamarin

嘿伙计们！

如何在 MonoTouch.Dialog 中设置/访问 StyledStringElement 的 DetailTextLabel？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T19:24:08.840

第二个参数是详细文本值。请注意，您必须指定支持详细文本的单元格样式（第三个参数） - 默认单元格样式不显示详细文本值。

```
new StyledStringElement ("Default", "Invisible value", UITableViewCellStyle.Default),
new StyledStringElement ("Value1", "Aligned on each side", UITableViewCellStyle.Value1),
new StyledStringElement ("Value2", "Like the Addressbook", UITableViewCellStyle.Value2),
new StyledStringElement ("Subtitle", "Makes it sound more important", UITableViewCellStyle.Subtitle),
new StyledStringElement ("Subtitle", "Brown subtitle", UITableViewCellStyle.Subtitle) {
    DetailColor = UIColor.Brown
} 
```

有关此代码的示例，请参阅[MT.Dialog 示例应用程序](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/Sample/DemoStyled.cs)。

# jboss - mod_cluster & jboss：带外垃圾收集？

> ID：15730272
> 
> 赞同：0
> 
> 时间：2013-03-31T14:10:57.980
> 
> 标签：jboss, jboss7.x

我正在阅读 jboss 如何将负载因子和生命周期事件传达给 mod_cluster 以有效地对集群进行负载平衡。在 ruby​​ on rails world unicorn 和乘客 4 中进行带外垃圾收集，其中一个实例暂时从集群中取出以进行 gc 然后放回，因此响应延迟不受 gc 的影响。jboss 和 mod_cluster 是否做同样的事情，或者实际上是相同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T14:52:13.243

好吧...如果您在生产环境中遇到与垃圾收集相关的问题（例如，假设系统在 10 分钟内完全没有响应），那么您就有了与 JVM/应用程序配置相关的问题。

mod_cluster 作为智能负载均衡器，计算工作节点上的负载并将其发送回 httpd。此负载可能包含以下一项或多项指标：

*   繁忙
*   堆
*   中央处理器
*   要求
*   接收流量
*   发送流量
*   会话

我认为无论如何，cpu 指标很容易收集密集的垃圾收集。

另一方面......如果你真的想以这种方式解决你的垃圾收集问题，最好通过 mod_cluster-manager 控制台完成，在那里可以暂时禁用节点。一旦节点被禁用，就不会在其上创建任何新会话，因此一旦所有会话都被耗尽，您可能会拥有一个没有任何活动请求的节点。

另一种方法是编写自己的负载指标，以某种方式确定 JVM 是否为 GC 做好准备，如果是，它将影响正在发送的负载。然而，我发现这是一个相当肮脏的把戏。

高温高压

# c++ - c++ 一个解决方案两个项目（exe & dll）链接错误

> ID：15730275
> 
> 赞同：0
> 
> 时间：2013-03-31T14:11:28.757
> 
> 标签：c++, dll, linker-errors, projects-and-solutions

我有一个 Visual Studio 解决方案，它由两个 win32 项目组成：1) 应用程序 (.exe) 2) 函数包装器 (.dll)。

该解决方案处于原型设计阶段，因此所有类/功能都在（.exe）项目下实现 - 肮脏但快速且易于调试/测试。

我已经开始编写一个 DLL 包装器来“玩”MSExcel/VBA 中的功能并面临链接错误

```
error LNK2019: unresolved external symbol "public: __thiscall Date::Date(int,int,int)" (??0Date@@QAE@HHH@Z) referenced in function addNumbers 
```

DLL头文件：

```
#ifdef LIBRARYWRAP_EXPORTS
#define LIBRARYWRAP_API __declspec(dllexport)
#else
#define LIBRARYWRAP_API __declspec(dllimport)
#endif

LIBRARYWRAP_API int _stdcall addNumbers(int a, int b); 
```

DLL源文件：

```
#include "..\applicationProject\Date.h"

class Date;
LIBRARYWRAP_API int _stdcall addNumbers(int a, int b){
   Date dummyDate(12,1,2014); // <- Linker error LNK2019.
   return (a+b);
} 
```

类`Date`和构造`Date::Date(int,int,int)`函数在应用程序项目（.exe）中定义`Date.h`，`Date.cpp`.

我已经尝试做的事情：

1.  为 librarywrap 项目添加了新的参考。`Project -> Properties -> Common -> Add New Reference`. 选择“应用项目”。

2.  添加了额外的包含目录：`$(SolutionDir)\applicationProject`

两个问题：

首先，我正在尝试做的事情是合法/可实现的吗？DLL 链接到应用程序项目，而通常它应该是其他方式 - 应用程序链接到 DLL。假设我有两个应用程序项目（.exe）和（.exe），是否可以将一个链接到另一个？

其次，如果第一个问题的答案是肯定的，我应该添加/更改什么以使其工作？

非常感谢！

尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:10:07.137

从技术上讲，可以制作一个 DLL 来从其他模块调用所有需要的函数（甚至从 .exe 模块调用 - LoadLibrary 可以做到这一点），但这将是一个巨大的痛苦：您必须在 . EXE（就像您导出 DLL 函数一样）并将它们导入您的 DLL。所以第一个问题的答案是肯定的，但是如果 DLL 想要使用来自 EXE 的大量入口点，那么它可能不是最佳选择。

我建议采用不同的方法：为 .exe（应用程序）和 .dll 项目使用通用代码库。然后，您将能够通过运行应用程序来测试您的代码，并通过 DLL 使用其他应用程序的功能（DLL 将包含所有必要的代码本身）。

# jquery - jquery css() 在 if else 条件下

> ID：15730284
> 
> 赞同：0
> 
> 时间：2013-03-31T14:12:26.037
> 
> 标签：jquery, css

我想要做的是，**如果**我点击一个`span`然后一些元素`DIV`淡出，**否则**你再次点击跨度这些元素会淡入。我还`css()`用来改变元素的一些样式仍然存在在那`DIV`。

[在这里](http://jsfiddle.net/7G3Z4/6/)查看代码。

现在有两个问题/问题：

1.  是否有一些捷径或技术`css()`可以减少使用次数？

2.  当我尝试`css()`在我的`else`条件下使用将样式值恢复为原始值时，它们在我的`else`条件下都不起作用，因此条件下的新样式值`if`保持不变。

有什么更正或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:34:26.703

> 我想要做的是**如果**我点击一个`span`

**不** ，你想要做的是“*当*你点击一个`span`......”

> 然后 a 中的一些元素`DIV`淡出

...a`div`淡出。

> 否则你再次**点击**`span`

你有没有听过有人说“然后你再点击一次”？如果这不是你说话的方式，你也不应该写它。

您要描述的是当您`span`第二次单击时会发生什么。其实点击多少次并不重要`span`，重要的是`div`. 您所描述的内容可以追溯到单击跨度时发生的情况。

> 这些元素会逐渐消失。

所以到目前为止你想说的是：

当你点击一个 span 时，检查 a`div`是否可见；**如果**是，则淡出，**否则**，淡入。

> 在那里，我还使用 css() 来更改其中保留的元素的一些样式`DIV`。

听起来您想说的是您也在`div`使用 jQuery 的`css`方法进行样式设置。鉴于代码的状态，这似乎（大部分）是这种情况。

**不要使用`css`方法**。

`css`当您绝对需要动态样式时，使用 jQuery 的方法很有用。大多数时候，大多数人不需要动态样式。大多数时候，大多数人都需要动态的样式*集*。这些最好表示为应该留在样式表中的类。HTML属于`.html`文件，JS属于`.js`文件，CSS属于`.css`文件。

因此，您真正想要的是在`div`完成动画后更改一个类（或多个）。

* * *

所有这一切都无需编写任何代码。要将它们联系在一起，通常是您想要做的：

```
$('.some-span').on('click', function () {
    //when you click on a span
    var divIsVisible;
    //check whether a div is visible
    divIsVisible = $('.some-div').is(':visible');
    if (divIsVisible) {
        //if it is, fade out
        $('.some-div').fadeOut(function () {
            //when it's done fading out, add some classes
            $(this).addClass('is-hidden');
            //add other classes
        });
    } else {
        //else fade in
        $('.some-div').fadeIn(function () {
            //when it's done fading in, remove some classes
            $(this).removeClass('is-hidden');
            //remove other classes
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:15:48.900

要回答您问题的一部分：

您可以通过传递一个对象在单个调用中设置多个 css 属性（如[文档所述](http://api.jquery.com/css/#css-properties)-

```
$(elem).css({
  'width':10px,
  'height':10px,
  ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:28:38.813

当然，您也可以在 CSS 中添加`class`并`#News`应用所有样式

```
#News.closed {
    height: 45px;
    width: 200px;
    overflow: hidden;
}
#News.closed div {
    right: -10px;
}
#News.closed div label {
    font-size:12px;
    top: -14px;
}
}
#News.closed div label p {
    top: -15px;
    right: -20px;
} 
```

演示：http: [//jsfiddle.net/pavloschris/7G3Z4/10/](http://jsfiddle.net/pavloschris/7G3Z4/10/)

# iphone - 启用滚动视图滚动到顶部

> ID：15730288
> 
> 赞同：1
> 
> 时间：2013-03-31T14:12:48.820
> 
> 标签：iphone, ios, uiscrollview

我在子视图中有一个滚动视图。如何`setScrollsToTop`在状态栏单击时启用？

我已经尝试`[DetailView.scrollView setScrollsToTop:YES];`过`[scrollview setScrollsToTop:YES];`

还是不行。DetailView 是我的 subView。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:15:18.240

iOS 会根据几个因素自动决定在状态栏单击时要做什么——比如当前活动的滚动视图到屏幕上的位置到视图层次结构中的位置。

设置`scrollsToTop`只告诉 iOS 你可以接受这种行为。

# php - 尝试从多个表中提取并显示不同的信息

> ID：15730297
> 
> 赞同：0
> 
> 时间：2013-03-31T14:13:31.910
> 
> 标签：php, mysql, join, multiple-tables

所以我几天来一直在搜索和反复试验，我向这里寻求帮助。

我在我的网站上创建了一个页面，该页面从数据库的表中提取日程信息并将其显示到网页上。我试图从同一个数据库中的第二个表中提取配色方案，当第一个表上的名称与第二个表上的名称匹配时，只有该名称将以分配给它的不同颜色显示。我的表如下所示：

```
TBL1：
id time timeframe 周一 周二 周三 周四 周五 周六 周日
1 12a 00:00:00 名称1 名称2 名称3 名称2 名称5 名称6 名称7
2 1a 01:00:00 名称1 名称2 名称3 名称2 名称5 名称4 名称3
3 2a 02:00:00 名称1 名称2 名称4 名称2 名称2 名称6 名称2
4 3a 03:00:00 名称2 名称2 名称4 名称2 名称3 名称3 名称2
```

等

```
TBL2：
id 名称 颜色
1 名称1 #hexcolor
2 名称2 #hexcolor2
3 名称3 #hexcolor3
等

```
 $query = array('select' => "*", 
               'tbl' => "Schedule");
$query2 = array('select' => "name, color", 
               'tbl' => "dj_colors");

$name = "select t1.*, Monday.color, Tuesday.color, Wednesday.color, Thursday.color, Friday.color, Saturday.color, Sunday.color 
```

从时间表 t1
     加入 dj_colors 星期一
     ON t1.Monday = Monday.name,
     周二加入 dj_colors
     ON t1.Tuesday = Tuesday.name,
     加入 dj_colors 星期三
     ON t1.Wednesday = 周三名称，
     周四加入 dj_colors
     ON t1.Thursday = Thursday.name,
     周五加入 dj_colors
     ON t1.Friday = Friday.name,
     周六加入 dj_colors
     ON t1.Saturday = 周六名称，
     周日加入 dj_colors
     ON t1.Sunday = Sunday.name";

$DB = new DB();
$result = $DB->select_multi($query);

foreach ($result as $arrayLoop) {
    $printout .= "<tr>";
    foreach ($arrayLoop as $field => $data) {
        if ($field == 'id' || $field == 'TimeFrame') continue;
        if ($data === $name) $printout .= "<td color=".$color.">".$data."</td>"; 
        else $printout .= "<td class='schedule4'>".$data."</td>";   
    }
    $printout .= "</tr>";
} 
```

编辑*这是我想出并尝试的，但我认为我仍然缺少一些东西，因为它仍然没有像我想要的那样工作。我走了头，并以正确的格式给出了我正在使用的实际表的名称。仍然没有拉颜色，但我没有收到任何错误。请多多包涵，我还在学习中。我不是在问答案，只是在哪里寻找和一些有用的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:19:54.913

我认为您需要了解联接。您可以在与名称相同的查询中返回颜色，方法是将它们加入：

```
select t1.*, mon.color, tue.color, . . . sun.color
from table1 t1 join
     table2 mon
     on t1.name = mon.name join
     tale2 tue
     on t1.tue = tue.name
     . . .
     table2 sun
     on t1.sun = sun.name 
```

表达方式：

```
SELECT color FROM tbl2 WHERE name 
```

可能不会返回任何行。在没有比较的情况下，`name`将根据前面的初始数字转换为 int。如果它以字母字符开头，它将被转换为 0，即为 false，因此不返回任何行。

# java - Java 格式 yyyy-MM-dd'T'HH:mm:ss.SSSz 转 yyyy-mm-dd HH:mm:ss

> ID：15730298
> 
> 赞同：73
> 
> 时间：2013-03-31T14:13:34.953
> 
> 标签：java, parsing, date, simpledateformat

我正在尝试将 yyyy-MM-dd'T'HH:mm:ss.SSSz 格式的日期格式化为 yyyy-mm-dd HH:mm:ss，这应该很容易，但我无法让它工作.

必须解析的日期格式为：2012-10-01T09:45:00.000+02:00
现在我使用这个简单的日期格式化程序对其进行格式化：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSz", Locale.FRANCE); 
```

但这给出了类似于 2012-10-01T09:45:00.000UTC+00:00 的输出。

我也尝试使用“yyyy-MM-dd'T'HH:mm:ss.SSSZ”作为模式和“yyyy-MM-ddHH:mm:ss”。后者以 2012-10-01T09:45:00 close 的形式返回日期，但还没有。

我认为将 T 子串起来会有点混乱，并且会无缘无故地产生开销，因此格式化这些日期的正确方法是什么？

为了说明，我想将 2012-10-01T09:45:00.000+02:00 转换为 2012-10-01 09:45:00

干杯!

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-03-31T15:01:49.203

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
SimpleDateFormat output = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date d = sdf.parse(time);
String formattedTime = output.format(d); 
```

这行得通。您必须使用两种 SimpleDateFormat，一种用于输入，一种用于输出，但它会为您提供您想要的。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-03-17T10:44:26.167

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-31T14:58:40.577

Gooye 如果可以在您的项目中使用 Joda Time，那么此代码对我有用：

```
String dateStr = "2012-10-01T09:45:00.000+02:00";
String customFormat = "yyyy-MM-dd HH:mm:ss";

DateTimeFormatter dtf = ISODateTimeFormat.dateTime();
LocalDateTime parsedDate = dtf.parseLocalDateTime(dateStr);

String dateWithCustomFormat = parsedDate.toString(DateTimeFormat.forPattern(customFormat));
System.out.println(dateWithCustomFormat); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-17T07:22:26.387

我试图格式化从 JSON 响应收到的日期字符串，例如 2016-03-09T04:50:00-0800 到 yyyy-MM-dd。所以这就是我尝试过的方法，它有效并帮助我将格式化的日期字符串分配给日历小部件。

```
String DATE_FORMAT_I = "yyyy-MM-dd'T'HH:mm:ss";
String DATE_FORMAT_O = "yyyy-MM-dd";

SimpleDateFormat formatInput = new SimpleDateFormat(DATE_FORMAT_I);
SimpleDateFormat formatOutput = new SimpleDateFormat(DATE_FORMAT_O);

Date date = formatInput.parse(member.getString("date"));
String dateString = formatOutput.format(date); 
```

这行得通。谢谢。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-17T09:05:00.757

```
String dateStr = "2016-09-17T08:14:03+00:00";
String s = dateStr.replace("Z", "+00:00");
s = s.substring(0, 22) + s.substring(23);
Date date = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").parse(s);
Timestamp createdOn = new Timestamp(date.getTime());
mcList.setCreated_on(createdOn); 
```

Java 7 根据 ISO 8601 添加了对时区描​​述符的支持。这可以在 Java 7 中使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-31T15:11:02.733

如果你真的要快（不是我相信你这样做）：

```
char[] chars = sourceDate.toCharArray();
chars[10] = ' ';
String targetDate = new String(chars, 0, 19); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-09-23T12:29:45.387

试试这个

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");

SimpleDateFormat output = new SimpleDateFormat("yyyyMMddHHmmss");

Date d = sdf.parse("2021-09-23T22:05:18.884Z");

String formattedTime = output.format(d);

System.out.println(formattedTime); 
```

结果：20210923220518

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-08T18:21:17.917

我有一个案例，我将旧版 DB2 z/os 数据库时间戳（格式为`"yyyy-MM-dd'T'HH:mm:ss.SSSZ"`：）转换为 SqlServer 2016 datetime2（格式为`"yyyy-MM-dd HH:mm:ss.SSS`：）字段，该字段由我们的 Spring/Hibernate Entity Manager 实例（在本例中为 OldRevision桌子）。在 Class 中，我将日期定义为`java.util`类型，并以正常方式编写 setter 和 getter。然后，在处理数据时，我处理与此问题相关的数据的代码如下所示：

```
OldRevision revision = new OldRevision();
String oldRevisionDateString= oldRevisionData.getString("originalRevisionDate", "");
Date oldDateFormat = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss.SSSZ");
oldDateFormat.parse(oldRevisionDateString);
SimpleDateFormat newDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
newDateFormat.setTimeZone(TimeZone.getTimeZone("EST"));
Date finalFormattedDate= newDateFormat.parse(newDateFormat.format(oldDateFormat));
revision.setOriginalRevisionDate(finalFormattedDate);
em.persist(revision); 
```

执行相同情况的更简单方法是：

```
SimpleDateFormat newDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
newDateFormat.setTimeZone(TimeZone.getTimeZone("EST"));
revision.setOriginalRevisionDate(
        newDateFormat.parse(newDateFormat.format(
                new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss.SSSZ")
                        .parse(rs.getString("originalRevisionDate", ""))))); 
```

# json - 自己的云 json api

> ID：15730306
> 
> 赞同：2
> 
> 时间：2013-03-31T14:14:50.543
> 
> 标签：json, owncloud

有谁知道如何通过 json 与 owncloud 集成？

我的目的是，如果我们在我的组织中实施 owncloud，我希望能够将功能构建到 ios 应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-25T10:22:31.917

您可以使用 REST 访问共享 API： [https ://doc.owncloud.org/server/8.0/developer_manual/core/ocs-share-api.html](https://doc.owncloud.org/server/8.0/developer_manual/core/ocs-share-api.html)

# c# - 如何查找成员变量是否为只读？

> ID：15730308
> 
> 赞同：23
> 
> 时间：2013-03-31T14:14:59.687
> 
> 标签：c#, .net, reflection, readonly, fieldinfo

```
class Bla
{
    public readonly int sum;
}

FieldInfo f = type.GetField("sum");
f.??   // what? 
```

我如何找到是否`sum`是只读的？对于属性，我可以`PropertyInfo.CanWrite`查找成员是否具有写访问权限。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-31T14:17:21.623

`readonly`意味着字段分配只能发生在字段声明附近或构造函数内部。所以你可以`IsInitOnly`在 a 上使用属性`FieldInfo`，它

> 获取一个值，该值指示该字段是否只能在构造函数的主体中设置

更多详细信息请参见[`IsInitOnly`MSDN 文章](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.isinitonly.aspx)

```
FieldInfo f = typeof(Bla).GetField("sum");
Console.WriteLine(f.IsInitOnly); //return true 
```

注意：您也可以使用`IsLiteral`属性来测试该字段是否为编译时间常数。它将为`readonly`字段返回 false，但为字段返回 true，标记为`const`。

另一个注意事项：反射不会阻止您写入`readonly`and`private`字段（对于 也是如此`public readonly`，但我想展示一个更受限制的情况）。所以下面的代码示例是有效的，不会抛出任何异常：

```
class Bla
{
    //note field is private now
    private readonly int sum = 0;
} 
```

现在，如果您获取该字段并向其写入一个值（我`BindingFlags`用来获取私有非静态字段，因为默认情况下`GetField`不会返回私有字段）`FieldInfo`

```
FieldInfo field = typeof(Bla).GetField("sum", BindingFlags.NonPublic |
                                              BindingFlags.Instance);

var bla = new Bla();
field.SetValue(bla, 42);

Console.WriteLine(field.GetValue(bla)); //prints 42 
```

一切正常。仅当字段为`const`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:21:09.500

`f.Attributes`应该包含`FieldAttributes.InitOnly`

# actionscript-3 - 用于沿路径移动影片剪辑的 AS3

> ID：15730318
> 
> 赞同：3
> 
> 时间：2013-03-31T14:16:13.897
> 
> 标签：actionscript-3, flash, actionscript

我正在寻找一个简单的 AS3 脚本来沿着 Flash 中手动绘制的路径移动/跟随影片剪辑（箭头）。像..如果线到线的终点，它会移动到起点，也应该在曲线处自动旋转。

也可以复制这个movieclip（箭头）到特定的距离，就像一个箭头的地面沿着一条路径连续移动，彼此之间有特定的距离？

我正在处理一些 infoGraphs 并且需要这个箭头动画来显示工作流程。

我非常需要这个，请帮助！

干杯，bp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:16:19.457

正如 George Profenza 在他的评论中提到的那样，可能有图书馆可以帮助解决这个问题，当然可以计算沿贝塞尔曲线的点。

然而，一个更简单的解决方案是执行自 Flash 4 以来人们所做的事情。在 Flash 中绘制曲线，然后使用空的 MovieClip 创建沿曲线的补间动画。在运行时，您可以使用`addChild()`将您的 MovieClip 作为空的子剪辑插入。与贝塞尔库相比，您将通过这种方式进行更多的手动控制。

# git - 有没有办法让 git Bash 使用我的大学代理地址连接到 heroku 服务器？

> ID：15730322
> 
> 赞同：1
> 
> 时间：2013-03-31T14:16:38.660
> 
> 标签：git, heroku

您能帮我连接到 Heroku，以便我可以将凭据登录到我的 Heroku 帐户吗？

我还希望能够使用大学代理提交和 git 下载我的文件：

```
proxy.uonbi.ac.ke 
```

该代理的密码格式为`xxx@students`。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:41:45.377

如果您需要联系 Heroku 远程存储库， [Kit Monisit的这篇文章“](https://github.com/kitmonisit)[代理背后的 Heroku](http://kitmonisit.com/2012/11/proxychains-heroku/) ”提到：

*   即使在你的导出`http_proxy`语句`bash_profile`是不够的
*   需要像**[procychains](http://proxychains.sourceforge.net/)**这样的工具：查看其操作指南[页面](http://proxychains.sourceforge.net/howto.html)

> 一种工具，可强制任何给定应用程序建立的任何 TCP 连接通过 TOR 等代理或任何其他 SOCKS4、SOCKS5 或 HTTP(S) 代理。
> 
> 当您想要链中的两个（或更多）不同代理时：
> 例如：

```
your_host <--> proxy 1 (TOR) <--> proxy 2 (HTTP or SOCKS4/5) <--> target_host 
```

> 当您离开 LAN 的唯一方法是通过代理服务器时，您可能需要它。
> 或者从过滤传出流量中的某些端口的限制性防火墙后面出来。
> 你想用一些像telnet这样的应用程序来做到这一点。

在你的情况下：

> 部分问题是 Heroku 客户端使用 HTTPS 远程登录。
> 
> 要解决此问题，您可以使用 ProxyChains 通过限制性代理服务器建立 HTTPS 连接。
> 它的作用是为无法使用代理的软件提供代理身份验证服务。

文章解释了构建和安装。

设置大致如下：

> 将`proxychains.conf`文件复制到您的主目录。

```
$ cd ~
$ mkdir .proxychains
$ cd ~/dev/build/proxychains
$ cp etc/proxychains.conf ~/.proxychains 
```

> 配置代理服务器地址。

```
$ cd ~/.proxychains
$ vim proxychains.conf 
```

> 注释掉以下行，使其看起来像

```
#proxy_dns 
```

> 在文件末尾，在 header 下方`[ProxyList]`，按以下格式添加您的代理服务器：

```
type host port [user pass] 
```

> 例如

```
http 12.34.56.78 8080 user_me pa55w0rd 
```

> 在您的`.bash_profile`or`.bashrc`中，删除或注释掉为终端会话设置代理服务器的任何导出语句。例如

```
# export http_proxy="http://user:pass@host.com:8080" 
```

注意：如果您的密码中有**[特殊字符](https://app.zencoder.com/docs/guides/getting-started/special-characters-in-usernames-and-passwords)**（例如“ [at 符号](http://en.wikipedia.org/wiki/At_sign)”），则需要将这些字符进行**[百分比编码](http://en.wikipedia.org/wiki/Percent-escape)**：

```
] [ ? / < ~ # ` ! @ $ % ^ & * ( ) + = } | : " ; ' , > { space 
```

您`@`在密码中的 "" 将是`%40`: `xxx%40students`。

> 使用 Heroku 测试您的设置

```
$ cd
$ proxychains heroku login 
```

# php - Codeigniter：无法使用连接获取字段值

> ID：15730324
> 
> 赞同：0
> 
> 时间：2013-03-31T14:16:53.363
> 
> 标签：php, mysql, codeigniter, join

我有第三张表的外键 ID，例如（有`thirdsubmenu_id`表`thirdsubmenu`）。我想`menu_name`从我的父表中获取名称`mainmenu` 。 *请参阅下面我的数据库表结构以获取完整的详细信息*

**数据库结构**

```
 1)Table: mainmenu
    ---------------
     mainmenu_id   PK(primary key)
     menu_name     ..... 

    2)Table: submenu
    -------------------
     submenu_id     PK
     mainmenu_id    FK (foreign key refrences mainmenu table)
     submenu_name   ..... 

    3)Table: thirdsubmenu
    --------------------
      thirdsubmenu_id     PK
      submenu_id          FK (foreign key refrences submenu table)
      thirdsubmenu_name     ........ 
```

我尝试使用以下代码`menu_name`从我的`mainmenu`表中获取，但我收到了错误。

```
 //---------------------------get Main Menu Name by thirdsubmenu_id-----------------------------------
function getMainMenuNameOfSubmenu($thirdsubmenu_id)
{
    $this->load->database();   
    $this->db->select('*');
    $query=$this->db->join('mainmenu', 'mainmenu.mainmenu_id = submenu.mainmenu_id', 'left')
           ->join('submenu', 'submenu.submenu_id = thirdsubmenu.submenu_id', 'left')
           ->get_where('thirdsubmenu',array('thirdsubmenu_id'=>$thirdsubmenu_id));  

    return $query->row('menu_name');   
} 
```

**我得到的错误是：**

```
 A Database Error Occurred

    Error Number: 1054

    Unknown column 'submenu.mainmenu_id' in 'on clause'

    SELECT * FROM (`thirdsubmenu`) LEFT JOIN `mainmenu` ON `mainmenu`.`mainmenu_id` = `submenu`.`mainmenu_id` LEFT JOIN `submenu` ON `submenu`.`submenu_id` = `thirdsubmenu`.`submenu_id` WHERE `thirdsubmenu_id` = '17'

    Filename: D:\xampp\htdocs\system\database\DB_driver.php

    Line Number: 330 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:23:07.077

您创建亲子关系的方法不正确。考虑有 10、20 或 50 个子菜单。你会怎么办？为每个人创建一个表？

您可以将所有关系保存在一个表中，只需添加一个引用每个菜单父级的列。然后使用递归函数，您可以获得菜单的所有树。

现在关于您的问题，问题是您正在加入`thirdsubmenu`，`mainmenu`然后您指的是`submenu`.`mainmenu_id`哪一列来自`submenu` 这就是您看到错误的原因。

试试这个代码：

```
function getMainMenuNameOfSubmenu($thirdsubmenu_id)
{
    $this->load->database();   
    $this->db->select('*');
    $this->db->from('mainmenu');
    $this->db->join('submenu', 'mainmenu.mainmenu_id = submenu.mainmenu_id', 'left')
           ->join('thirdsubmenu', 'submenu.submenu_id = thirdsubmenu.submenu_id', 'left')
           ->where('thirdsubmenu.thirdsubmenu_id = "' . $thirdsubmenu_id . '"'); 
    $query = $this->db->get();
    return $query->row('menu_name');   
} 
```

# python - python中的JSON、列表和递归

> ID：15730326
> 
> 赞同：2
> 
> 时间：2013-03-31T14:17:00.013
> 
> 标签：python, json, recursion

我是 Python 新手，遇到了一个我无法解决的问题。

我已将以下解析树从 JSON 解码为以下列表。

```
>>> tree
['S', ['NP', ['DET', 'There']], ['S', ['VP', ['VERB', 'is'], ['VP', ['NP', ['DET', 'no'], ['NOUN', 'asbestos']], ['VP', ['PP', ['ADP', 'in'], ['NP', ['PRON', 'our'], ['NOUN', 'products']]], ['ADVP', ['ADV', 'now']]]]], ['.', '.']]] 
```

使用递归函数，我已经能够获得包含终结词的列表。

```
def explorer(tree):
    for sub in tree[1:]:
        if(type(sub) == str):
            allwords.append(sub)
        else:
            explorer(sub)

>>> allwords
['There', 'is', 'no', 'asbestos', 'in', 'our', 'products', 'no'.] 
```

现在我需要替换原始树中符合某些条件的单词，以便得到如下内容：

```
['S', ['NP', ['DET', 'There']], ['S', ['VP', ['VERB', 'is'], ['VP', ['NP', ['DET', 'no'], ['NOUN', '_REPLACED_']], ['VP', ['PP', ['ADP', 'in'], ['NP', ['PRON', 'our'], ['NOUN', 'products']]], ['ADVP', ['ADV', 'now']]]]], ['.', '.']]] 
```

我尝试了以下功能，但我无法向上传播替换，所以我总是得到相同的旧原始树。

```
def replacer(tree):
    string=[]
    for sub in tree[1:]:
        if(type(sub) == str):
            if #'condition is true':
                sub="_REPLACE_"
                return sub
            else: return sub    
        else:
            string.extend(replacer(sub))
    print(string) 
```

我将不胜感激有关如何实现结果的一些提示。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:09:06.983

您的问题是在某些情况下您正在重新调整字符串，并在其他情况下打印列表。确保你的替换器总是返回一个字符串列表，你应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T15:40:16.873

所以这是一个我如何使用列表推导来做这类事情的例子。如果您不知道，列表推导是`something = [explorer(x) for x in something]`. 这也是递归发生的地方。你得到的是一个完全相同结构的列表，但是你已经“去过”每个端点并且可以检查和替换东西。我做了几个任意替换。

```
>>> tree = ['S', ['NP', ['DET', 'There']], ['S', ['VP', ['VERB', 'is'], ['VP', ['NP', ['DET', 'no'], ['NOUN', 'asbestos']], ['VP', ['PP', ['ADP', 'in'], ['NP', ['PRON', 'our'], ['NOUN', 'products']]], ['ADVP', ['ADV', 'now']]]]], ['.', '.']]]
>>> def explorer(something):
        if type(something) == list:
            something = [explorer(x) for x in something]
        else:   # You may want to check other conditions here, like if it's a string
            if something == 'asbestos':
                something = 'Oh my'
            if something == 'S':
                something = 'Z'
        return something

>>> explorer(tree)
['Z', ['NP', ['DET', 'There']], ['Z', ['VP', ['VERB', 'is'], ['VP', ['NP', ['DET', 'no'], ['NOUN', 'Oh my']], ['VP', ['PP', ['ADP', 'in'], ['NP', ['PRON', 'our'], ['NOUN', 'products']]], ['ADVP', ['ADV', 'now']]]]], ['.', '.']]]
>>> 
```

我只是在更仔细地阅读了你的话后注意到了一些事情。您无法“向上传播替换”的原因是您的循环结构如下：

```
for x in aList:
    if x = somethingSpecial:
        x = somethingElse 
```

这在 Python 中不起作用，但这样做：

```
for i,x in enumerate(aList):
    if x = somethingSpecial:
        aList[i] = somethingElse 
```

现在`aList`已经按照您想要的方式进行了修改。如果您不知道做什么`enumerate()`，只需复制/粘贴：

```
aList = ['a','b','c']
for i,x in enumerate(aList):
    print(i,x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:16:43.883

如果我正确理解您的问题，解决您的问题的一种方法是：

```
 >>> tree = ['S', ['NP', ['DET', 'There']], ['S', ['VP', ['VERB', 'is'], ['VP', ['NP', ['DET', 'no'], ['NOUN', 'asbestos']], ['VP', ['PP', ['ADP', 'in'], ['NP', ['PRON', 'our'], ['NOUN', 'products']]], ['ADVP', ['ADV', 'now']]]]], ['.', '.']]]
 >>> def replacer(tree):
        for i, sub in enumerate(tree[1:]):
            if type(sub) == str and sub == 'asbestos':
                tree[i+1] = '__REPLACE__'
            else:
                replacer(sub) 
```

如果您对 tree[1:] 进行更改，您实际上并没有对列表进行更改，而是对拼接进行了更改。因此[enumerate](http://docs.python.org/2/library/functions.html#enumerate)函数可以帮助您解决这个问题。您`sub="_REPLACE_"`实际上并没有更改列表。它只是为 name 分配一个新值`sub`。

结果：

```
>>> replacer(tree)
>>> tree
['S', ['NP', ['DET', 'There']], ['S', ['VP', ['VERB', 'is'], ['VP', ['NP', ['DET', 'no'], ['NOUN', '__REPLACE__']], ['VP', ['PP', ['ADP', 'in'], ['NP', ['PRON', 'our'], ['NOUN', 'products']]], ['ADVP', ['ADV', 'now']]]]], ['.', '.']]] 
```

要获得像您的第一个函数创建的新列表，您可以简单地将您的第一个函数应用于新`tree`列表：

```
>>> explorer(tree)
['There', 'is', 'no', '__REPLACE__', 'in', 'our', 'products', 'now', '.'] 
```

# php - 在 htaccess 中启用 WebDAV

> ID：15730329
> 
> 赞同：1
> 
> 时间：2013-03-31T14:17:05.310
> 
> 标签：php, html, .htaccess, webdav, plesk

是否可以在`.htaccess`文件中启用 WebDAV？

我的问题是 Plesk。它不会在启用 WebDAV 的更改配置文件中解析。

那么，是否可以从`.htaccess`文件中启用 WebDAV？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-31T14:33:50.760

您可以使用`Location`容器和`DAV On`指令来启用它，前提`mod_dav`是它已安装在您的服务器上：

```
<Location /public/webdav/>
    DAV On
    php_admin_flag engine off
    AllowOverride All
    Allow from all
    Options +Indexes
</Location> 
```

我建议您还使用[mod_auth](http://perishablepress.com/htaccess-password-protection-tricks/)合并密码保护。

*PS：如果`Location`容器不适合您，请尝试使用`Directory`。*

# php - 如何获取 Facebook 用户的类型？

> ID：15730331
> 
> 赞同：2
> 
> 时间：2013-03-31T14:17:17.733
> 
> 标签：php, facebook-graph-api

我正在制作一个允许通过 Facebook 用户进行连接的应用程序。我有两个用户：

*   第一个用户是个人类型。
*   第二个用户是业务类型。

当我向个人用户注册时，PHP 会正确获取所有个人信息（用户名、姓氏..），但是当我向商业用户注册时，PHP 不会获取信息。

我认为问题出在用户类型上，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:20:47.323

根据 Facebook 帮助中心，不允许企业帐户使用应用程序。所以是的，用户的类型是问题所在。

# jquery - 逐步加载嵌入的 youtube 视频

> ID：15730333
> 
> 赞同：3
> 
> 时间：2013-03-31T14:17:26.857
> 
> 标签：jquery, youtube

我在一个页面上嵌入了 10 个左右的 YouTube 视频并登陆该页面，然后尝试向下滚动最初没有任何反应，因为视频都在加载，然后 10 秒左右你可以滚动。

有谁知道诸如[http://www.malsup.com/jquery/cycle2/](http://www.malsup.com/jquery/cycle2/)之类的 jQ 插件或其他一些方法是否允许仅在滚动以使初始页面体验响应更快时才加载屏幕外视频？

为任何指针欢呼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:51:31.290

更好的解决方案可能是显示 Youtube 图像的缩略图，然后在单击时“弹出”嵌入的视频。示例：[http ://cooldisplays.net/index.php?page=single&id=1](http://cooldisplays.net/index.php?page=single&id=1)

要获取图像的缩略图，请参阅：[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

有多种方法可以弹出嵌入视频，包括 prettyPhoto 库。（[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

# php - CakePHP 忽略响应中的 Content-Type 设置

> ID：15730335
> 
> 赞同：4
> 
> 时间：2013-03-31T14:17:29.990
> 
> 标签：php, cakephp, cakephp-2.3

在我的控制器操作中，我有这个：

```
$pdf = $this->Invoice->makePdf($invoice);
$this->response->charset('UTF-8');
$this->response->body($pdf);
$this->response->type(array('pdf' => 'application/x-pdf'));
$this->response->disableCache();
$this->response->send(); 
```

但是，无论我做什么，CakePHP 总是将数据发送为`text/html; charset=utf-8`. 我也试过

```
$this->response->header(array('Content-Type' => 'application/x-pdf')); 
```

但它仍然以`text/html`. 如何强制使用上述内容类型发送响应？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T14:22:10.633

执行`$this->response->type(array('pdf' => 'application/x-pdf'));`存储/替换[api](http://api.cakephp.org/2.3/class-CakeResponse.html#_type)中提到的关联键的内容类型。用于`$this->response->type('pdf');`设置类型。

编辑：也不要调用`$this->response->send();`只返回响应对象`return $this->response;`并让调度程序处理发送。

# android - 由于 notifyDataSetChanged() 问题导致随机崩溃

> ID：15730337
> 
> 赞同：3
> 
> 时间：2013-03-31T14:17:33.010
> 
> 标签：android, listview

没有明显规律的随机崩溃。当我打开 ListView 时，应用程序每隔几次（随机）次崩溃一次并出现以下错误。 *有很多东西要学，如果这是一个非常明显的错误，请原谅我。*

错误日志猫

```
W/dalvikvm( 9445): threadid=1: thread exiting with uncaught exception (group=0x40018578)

E/AndroidRuntime( 9445): FATAL EXCEPTION: main

E/AndroidRuntime( 9445): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131361795, class android.widget.ListView) with Adapter(class gst.sies.popatt.LazyAdapter)]

E/AndroidRuntime( 9445):    at android.widget.ListView.layoutChildren(ListView.java:1545)

E/AndroidRuntime( 9445):    at android.widget.AbsListView.onLayout(AbsListView.java:1422)

E/AndroidRuntime( 9445):    at android.view.View.layout(View.java:7175)

E/AndroidRuntime( 9445):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)

E/AndroidRuntime( 9445):    at android.view.View.layout(View.java:7175)

E/AndroidRuntime( 9445):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)

E/AndroidRuntime( 9445):    at android.view.View.layout(View.java:7175)

E/AndroidRuntime( 9445):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)

E/AndroidRuntime( 9445):    at android.view.View.layout(View.java:7175)

E/AndroidRuntime( 9445):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1146)

E/AndroidRuntime( 9445):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)

E/AndroidRuntime( 9445):    at android.os.Handler.dispatchMessage(Handler.java:99)

E/AndroidRuntime( 9445):    at android.os.Looper.loop(Looper.java:130)

E/AndroidRuntime( 9445):    at android.app.ActivityThread.main(ActivityThread.java:3687)

E/AndroidRuntime( 9445):    at java.lang.reflect.Method.invokeNative(Native Method)

E/AndroidRuntime( 9445):    at java.lang.reflect.Method.invoke(Method.java:507)

E/AndroidRuntime( 9445):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)

E/AndroidRuntime( 9445):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)

E/AndroidRuntime( 9445):    at dalvik.system.NativeStart.main(Native Method)

D/dalvikvm( 9445): GC_CONCURRENT freed 473K, 50% free 3063K/6023K, external 714K/1025K, paused 4ms+5ms

E/liblog  ( 1475): failed to call dumpstate

E/        ( 1475): Dumpstate > /data/log/dumpstate_app_error

D/InputReader( 1475): Input event: value=1

D/InputReader( 1475): Input event: value=0

D/InputReader( 1475): Input event: value=1 
```

代码

```
package gst.sies.popatt;

import java.io.File;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.HashMap;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Resources;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Typeface;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class GalleryActivity extends Activity
{
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_THUMB_URL = "thumb_url";
    public Typeface myTypeface;
    private ArrayList<HashMap<String, String>> nomineeList;
    private ListView n_list;
    private Intent back_button;
    private String[] category;
    private LazyAdapter adapter;
    private int category_index;
    private SQLiteDatabase db;
    private SharedPreferences prefs;
    private TextView voted;
    private UserLoginTask getNominees;
    private ImageView iv;
    private boolean date;
    int i=0;

    @SuppressLint("SdCardPath")
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        String title = getIntent().getStringExtra("title");

        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        {
            this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        }
        else
            this.setTitle(title);
        setContentView(R.layout.activity_gallery);
        myTypeface = Typeface.createFromAsset(
                this.getAssets(),
                "ROBOTO.TTF");

        prefs= new ObscuredSharedPreferences( 
                GalleryActivity.this, GalleryActivity.this.getSharedPreferences("gst.sies.popatt", Context.MODE_PRIVATE) );

        back_button= new Intent (GalleryActivity.this, CategoriesActivity.class);
        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
            voted = (TextView) findViewById(R.id.textView3);
        else
            voted = (TextView) findViewById(R.id.TextView_14);
        iv= (ImageView) findViewById(R.id.voted_thumbnail);
        category_index = getIntent().getIntExtra("category_index", 0);
        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        {
            TextView tv = (TextView) findViewById(R.id.textView1);
            tv.setTypeface(myTypeface);
            tv.setText(title);

            voted.setTypeface(myTypeface);
        }

        if(prefs.getString(Integer.toString(category_index), "NA").equals("NA"))
            voted.setText("Voted for: No One");
        else
        {
            iv.setImageResource(R.drawable.radio_checked);
            //voted.setText("Voted for: "+ prefs.getString(Integer.toString(category_index), "No One"));
            voted.setText("can't do it yet ;)");
            voted.setSelected(true);
        }

        Calendar now = Calendar.getInstance();
        if(now.get(Calendar.DATE) >= 1 && now.get(Calendar.DATE) <= 18)
            date = true;
        else
            date = false;

        nomineeList = new ArrayList<HashMap<String, String>>();
        File nom_db = new File (Environment.getExternalStorageDirectory()+"/Android/data/gst.sies.popatt/databases/nominees.db");

        db = SQLiteDatabase.openOrCreateDatabase(nom_db, null);

        getNominees = new UserLoginTask();
        getNominees.execute((Void) null);

        n_list = (ListView) findViewById(R.id.nominee_list);    

        adapter=new LazyAdapter(this, nomineeList);
        adapter.notifyDataSetChanged();

        n_list.setAdapter(adapter);

        n_list.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                String votedOne = (String) ((TextView) view.findViewById(R.id.title)).getText();
                prefs.edit().putString(Integer.toString(category_index), votedOne).commit();
                if(date)
                voted.setText("Voted for: "+ votedOne);
                else
                voted.setText("can't do it yet ;)");

                voted.setSelected(true);
                iv.setImageResource(R.drawable.radio_checked);
            }
        });
    }
    @Override
    public void onBackPressed()
    {
        startActivity(back_button);
        finish();
    }

    public boolean isTableExists(String tableName) {
        Cursor cursor = db.rawQuery("select DISTINCT tbl_name from sqlite_master where tbl_name = '"+tableName+"'", null);
        if(cursor!=null) {
            if(cursor.getCount()>0) {
                cursor.close();
                return true;
            }
            cursor.close();
        }
        return false;
    }
    public class UserLoginTask extends AsyncTask<Void, Void, Boolean> {

        @Override
        protected Boolean doInBackground(Void... params) {
            Resources res = getResources();
            category = res.getStringArray(R.array.category_list_short);
            if(isTableExists(category[category_index]) && date)
            {
                Cursor c = db.rawQuery("SELECT * FROM "+category[category_index]+" WHERE name IS NOT NULL", null);
                if(c.moveToFirst())
                {
                    while(!c.isAfterLast())
                    {   
                        HashMap<String, String> map = new HashMap<String, String>();

                        map.put(KEY_ID, c.getString(0));
                        map.put(KEY_TITLE, c.getString(c.getColumnIndex("name")));
                        map.put(KEY_THUMB_URL, c.getString(c.getColumnIndex("url")));
                        nomineeList.add(map);
                        c.moveToNext();
                    }
                    c.close();

                    return true;
                }   
            }
            else
            {
                for (int i = 0; i < 10 ; i++) {

                HashMap<String, String> map = new HashMap<String, String>();

                map.put(KEY_ID, Integer.toString(i));
                map.put(KEY_TITLE, "No Name Available");
                map.put(KEY_THUMB_URL, "https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-snc6/5939_10151499921443518_604230176_s.jpg");
                nomineeList.add(map);
                }
                return true;
            }
            return true;
        }

        @Override
        protected void onPostExecute(Boolean success) {
            super.onPostExecute(success);
            runOnUiThread(new Runnable() {
                 public void run() {
                     db.close();
                     adapter.notifyDataSetChanged();
                }
            });
        }

        @Override
        protected void onCancelled() {

        }
        @Override
        protected void onPreExecute()
        {       }
    }
} 
```

适配器类

```
package gst.sies.popatt;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
        //rbState =  new boolean [100];
    }
    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.rowview, null);
        TextView title = (TextView)vi.findViewById(R.id.title); // title
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image
        GalleryActivity gl = new GalleryActivity();
        title.setTypeface(gl.myTypeface);
        HashMap<String, String> nominee = new HashMap<String, String>();
        nominee = data.get(position);
        title.setText(nominee.get(GalleryActivity.KEY_TITLE));
        imageLoader.DisplayImage(nominee.get(GalleryActivity.KEY_THUMB_URL),R.drawable.ic_launcher, thumb_image);
        return vi;    
    }

} 
```

老实说，我没有做太多尝试，因为我不知道可能是什么问题。

编辑：更新的代码

```
package gst.sies.popatt;

import java.io.File;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.HashMap;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Resources;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Typeface;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class GalleryActivity extends Activity
{
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_THUMB_URL = "thumb_url";
    public Typeface myTypeface;
    private ArrayList<HashMap<String, String>> nomineeList;
    private ListView n_list;
    private Intent back_button;
    private String[] category;
    private LazyAdapter adapter;
    private int category_index;
    private SQLiteDatabase db;
    private SharedPreferences prefs;
    private TextView voted;
    private UserLoginTask getNominees;
    private ImageView iv;
    private boolean date;
    int i=0;

    @SuppressLint("SdCardPath")
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        String title = getIntent().getStringExtra("title");

        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        {
            this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        }
        else
            this.setTitle(title);
        setContentView(R.layout.activity_gallery);
        myTypeface = Typeface.createFromAsset(
                this.getAssets(),
                "ROBOTO.TTF");

        prefs= new ObscuredSharedPreferences( 
                GalleryActivity.this, GalleryActivity.this.getSharedPreferences("gst.sies.popatt", Context.MODE_PRIVATE) );

        back_button= new Intent (GalleryActivity.this, CategoriesActivity.class);
        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
            voted = (TextView) findViewById(R.id.textView3);
        else
            voted = (TextView) findViewById(R.id.TextView_14);
        iv= (ImageView) findViewById(R.id.voted_thumbnail);
        category_index = getIntent().getIntExtra("category_index", 0);
        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        {
            TextView tv = (TextView) findViewById(R.id.textView1);
            tv.setTypeface(myTypeface);
            tv.setText(title);

            voted.setTypeface(myTypeface);
        }

        if(prefs.getString(Integer.toString(category_index), "NA").equals("NA"))
            voted.setText("Voted for: No One");
        else
        {
            iv.setImageResource(R.drawable.radio_checked);
            //voted.setText("Voted for: "+ prefs.getString(Integer.toString(category_index), "No One"));
            voted.setText("can't do it yet ;)");
            voted.setSelected(true);
        }

        Calendar now = Calendar.getInstance();
        if(now.get(Calendar.DATE) >= 1 && now.get(Calendar.DATE) <= 18)
            date = true;
        else
            date = false;

        nomineeList = new ArrayList<HashMap<String, String>>();
        File nom_db = new File (Environment.getExternalStorageDirectory()+"/Android/data/gst.sies.popatt/databases/nominees.db");

        db = SQLiteDatabase.openOrCreateDatabase(nom_db, null);

        getNominees = new UserLoginTask();
        getNominees.execute((Void) null);

        n_list = (ListView) findViewById(R.id.nominee_list);    

        adapter=new LazyAdapter(this, nomineeList);
        n_list.setAdapter(adapter);
        adapter.notifyDataSetChanged();

        n_list.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                String votedOne = (String) ((TextView) view.findViewById(R.id.title)).getText();
                prefs.edit().putString(Integer.toString(category_index), votedOne).commit();
                if(date)
                voted.setText("Voted for: "+ votedOne);
                else
                voted.setText("can't do it yet ;)");

                voted.setSelected(true);
                iv.setImageResource(R.drawable.radio_checked);
            }
        });
    }
    @Override
    public void onBackPressed()
    {
        startActivity(back_button);
        finish();
    }

    public boolean isTableExists(String tableName) {
        Cursor cursor = db.rawQuery("select DISTINCT tbl_name from sqlite_master where tbl_name = '"+tableName+"'", null);
        if(cursor!=null) {
            if(cursor.getCount()>0) {
                cursor.close();
                return true;
            }
            cursor.close();
        }
        return false;
    }
    public class UserLoginTask extends AsyncTask<Void, Void, Boolean> {

        @Override
        protected Boolean doInBackground(Void... params) {
            Resources res = getResources();
            category = res.getStringArray(R.array.category_list_short);
            if(isTableExists(category[category_index]) && date)
            {
                Cursor c = db.rawQuery("SELECT * FROM "+category[category_index]+" WHERE name IS NOT NULL", null);
                if(c.moveToFirst())
                {
                    while(!c.isAfterLast())
                    {   
                        HashMap<String, String> map = new HashMap<String, String>();

                        map.put(KEY_ID, c.getString(0));
                        map.put(KEY_TITLE, c.getString(c.getColumnIndex("name")));
                        map.put(KEY_THUMB_URL, c.getString(c.getColumnIndex("url")));
                        nomineeList.add(map);
                        c.moveToNext();
                    }
                    c.close();

                    return true;
                }   
            }
            else
            {
                for (int i = 0; i < 10 ; i++) {

                HashMap<String, String> map = new HashMap<String, String>();

                map.put(KEY_ID, Integer.toString(i));
                map.put(KEY_TITLE, "No Name Available");
                map.put(KEY_THUMB_URL, "https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-snc6/5939_10151499921443518_604230176_s.jpg");
                nomineeList.add(map);
                }
                return true;
            }
            return true;
        }

        @Override
        protected void onPostExecute(Boolean success) {
            super.onPostExecute(success);
            db.close();
        }

        @Override
        protected void onCancelled() {

        }
        @Override
        protected void onPreExecute()
        {       }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:27:30.790

将适配器设置为 listview 后调用 **notifyDataSetChanged()**即

```
 adapter=new LazyAdapter(this, nomineeList)
        n_list.setAdapter(adapter);
   adapter.notifyDataSetChanged(); 
```

因为您正在调用 notifyDataSetChanged() 即使您的 LazyAdapter 数据没有变化

```
adapter=new LazyAdapter(this, nomineeList);
        adapter.notifyDataSetChanged(); 
```

`notifyDataSetChanged()` - 将通知列表视图通知，适配器中的数据已更改。当您尝试在尚未绑定到 listView 的 Adapter 上调用 notifyDataSetChanged() 时，这将引发此异常。

> java.lang.IllegalStateException：适配器的内容已更改，但 ListView 没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。

# php - 在 Zend Studio (Zend Framework 2) 中创建新模块

> ID：15730338
> 
> 赞同：1
> 
> 时间：2013-03-31T14:17:38.013
> 
> 标签：php, zend-framework2, zend-studio

我一直在关注 Zend 的教程（[http://www.youtube.com/watch?feature=player_embedded&v=EerB9bTvqrY](http://www.youtube.com/watch?feature=player_embedded&v=EerB9bTvqrY)）但是当我在我的项目中添加一个新模块时，我无法导航到它，是本教程中的说明不正确？

基本上，当我在 Zend Studio 中将一个新模块添加到我的 Zend Framework 项目时，我无法导航到它，我的新模块称为“交易”。我导航到 localhost/dealproject/deals 并收到错误 404。当导航到 localhost/dealproject/ 时，它会正确加载 zend 框架应用程序页面。

谢谢你的帮助。

模块.config.php

```
<?php
return array(
'controllers' => array(
    'invokables' => array(
        'Deals\Controller\Deals' => 'Deals\Controller\DealsController',
    ),
),
'router' => array(
    'routes' => array(
        'deals' => array(
            'type'    => 'Literal',
            'options' => array(
                // Change this to something specific to your module
                'route'    => '/deals',
                'defaults' => array(
                    // Change this value to reflect the namespace in which
                    // the controllers for your module are found
                    '__NAMESPACE__' => 'Deals\Controller',
                    'controller'    => 'Deals',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                // This route is a sane default when developing a module;
                // as you solidify the routes for your module, however,
                // you may want to remove it and replace it with more
                // specific routes.
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),
    ),
),
'view_manager' => array(
    'template_path_stack' => array(
        'Deals' => __DIR__ . '/../view',
    ),
), 
```

);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:50:25.323

确保您已启用该模块`~/config/application.config.php`

```
'modules' => array(
    'Application',
    'Deals',
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:04:55.873

对我来说，路由配置看起来是正确的，它应该会显示结果。我注意到您`localhost/dealproject/`的 ZF2 应用程序的基本 URL ( ) 位于域根目录的子目录中。您可能知道所有请求都映射到应用程序的 index.php ( `~/public/index.php`)。这是通过`.htaccess`文件中的一些配置完成的（在同一目录中）。

在示例 URL中`www.example.com/blog`，如果`blog`www.example.com 根目录下的文件夹不存在，您将获得`404 Page not found`. 但是，如果没有找到目录，ZF2 的 .htaccess 会使 apache 调用域根目录中的 index.php（假设您使用 ZendSkeletonApplication）。

`localhost/`现在，由于您的`localhost/dealproject/`index.php不在域根目录（配置。`localhost/dealproject/``localhost/dealproject/deals``dealproject/deals``localhost`

我建议您将`dealproject`文件夹设为`localhost`. 这将使您能够像这样调用您的路由：`localhost/deals`并且 .htaccess 和 index.php 将被正确处理。

希望这可以帮助 ：）

斯托扬

# c# - 具有负索引的数组

> ID：15730346
> 
> 赞同：4
> 
> 时间：2013-03-31T14:18:47.023
> 
> 标签：c#, arrays, multidimensional-array

我有一个数组，用于存储我正在开发的游戏的地图数据。

```
MyMapType[,,] map; 
```

我使用固定数组而不是 Collection 的原因是固定数组的工作速度非常快。

现在我的问题是，我想在游戏中支持负 z 水平。所以我希望能够访问负索引。

如果这是不可能的，我想到了一对其他的解决方案。

我正在考虑将地平面设置为任意数字（例如 10）作为可能的解决方案，任何小于 10 的都可以被视为负数。但是，如果不使用，这不会使阵列变大 10 倍吗？

我考虑的另一个解决方案是“滚动我自己的”，你有一个二维数组字典，列表中的 Z 级别作为索引。但这是更多的工作，我不确定它是否慢。

所以总结一下 - 创建支持负索引的数组的任何方式？如果没有 - 是否有一种干净的方式来“模拟”这种行为而不会牺牲过多的 CPU 时间或 RAM - 注意这些游戏地图最终可能会很大并且需要不断访问。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T14:30:32.287

用一个类替换你的数组：

```
class MyArray {
    private MyMapType[] myArray = new myMapType[size]
    MyMapType this[index] {
       get{return myArray[index + offset];}
    }

} 
```

您可以在构造函数中设置大小和偏移量，甚至可以随意更改它。

在此示例的基础上构建了另一个版本：

```
class MyArray {
    private MyMapType[] positives = new myMapType[size]
    private MyMapType[] negatives = new myMapType[size-1]
    MyMapType this[index] {
       get{return index >= 0 ? positives[index] : negateves[1-index];}
    }

} 
```

它不会改变您需要为它们设置大小的事实。老实说我更喜欢第一个

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-28T15:14:44.310

如果你想要“负”索引，C# 8 现在支持它。

```
var words = new string[]
{
                // index from start    index from end
    "The",      // 0                   ^9
    "quick",    // 1                   ^8
    "brown",    // 2                   ^7
    "fox",      // 3                   ^6
    "jumped",   // 4                   ^5
    "over",     // 5                   ^4
    "the",      // 6                   ^3
    "lazy",     // 7                   ^2
    "dog"       // 8                   ^1
};              // 9 (or words.Length) ^0 
```

所以调用负数会是这样的

```
words[^1] 
```

看到这个[链接](https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-8)

所以在你的情况下，中间元素可能是零 Z

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T14:31:38.427

您能否尝试将 MyMapTime[,] 列表存储在两个列表中：

*   1 表示 z 值大于或等于 0
*   和第二个负 z 值。

表的索引将是 z 的值。这样做可以让您快速访问特定 z 水平的 xy 值。当然，问题是：你的 z 值是多少？有稀疏的还是密集的。即使对于稀疏值，您最终也会得到一个包含 [,] 的空值的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-20T00:48:08.103

使用 Dictionary 类，因为您可以为键或值分配所需的任何值。虽然我不确定这对于您上面显示的 3 维数组如何工作，但我可以展示如果这是一个 1 维数组，这将如何工作，并且您可以推断如何最好地利用它：

```
MyMapType[] map;

//map is filled with w/e data

Dictionary<int, MyMapType> x = new Dictionary<int, MyMapType>();

x[-1] = //(map data for whatever value is for the negative value);
x[0] = map[0]
//(etc...) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-15T12:34:45.797

我想在这里指出，字典允许负索引，而 2D 字典也可以解决此类问题，只需考虑数据结构以及是否可以使用字典

请注意，字典和列表用于不同的场景。它们的速度取决于它们使用的功能

# java - 如何使用 Java 和 Eclipse 为 Amazon API 签署 REST 请求？

> ID：15730351
> 
> 赞同：1
> 
> 时间：2013-03-31T14:19:34.967
> 
> 标签：java, eclipse, api, amazon

这是我的困境。我熟悉阅读 Java 代码，但不擅长编写它。我有几个来自亚马逊文档的例子，但我做错了。我正在使用 Eclipse。我有 AWS Java SDK、Apache Commons Codec & Logging 和 Base64。我在项目中的正确类路径中拥有所有代码。

我了解如何形成请求（元素的顺序、时间戳等），但我不知道如何将此信息发送到 java 代码以创建签名请求。所以我将从文档中使用的代码开始。

签名代码：

```
import java.security.SignatureException;
import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;

    /**
    * This class defines common routines for generating
    * authentication signatures for AWS requests.
    */
    public class Signature {
        private static final String HMAC_SHA1_ALGORITHM = "HmacSHA1";
    /**
    * Computes RFC 2104-compliant HMAC signature.
    * * @param data
    * The data to be signed.
    * @param key
    * The signing key.
    * @return
    * The Base64-encoded RFC 2104-compliant HMAC signature.
    * @throws
    * java.security.SignatureException when signature generation fails
    */
        public static String calculateRFC2104HMAC(String data, String key)
                throws java.security.SignatureException
        {
            String result;
            try {

                // get an hmac_sha1 key from the raw key bytes
                SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM);

                // get an hmac_sha1 Mac instance and initialize with the signing key
                Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM);
                mac.init(signingKey);

                // compute the hmac on input data bytes
                byte[] rawHmac = mac.doFinal(data.getBytes());

                // base64-encode the hmac
                result = Encoding.EncodeBase64(rawHmac);

            } catch (Exception e) {
                throw new SignatureException("Failed to generate HMAC : " + e.getMessage());
            }
            return result;
        }
} 
```

编码代码：

```
/**
* This class defines common routines for encoding * data in AWS requests.
*/
public class Encoding {
    /**
    * Performs base64-encoding of input bytes.
    *
    * @param rawData * Array of bytes to be encoded.
    * @return * The base64 encoded string representation of rawData.
    */
    public static String EncodeBase64(byte[] rawData) {
        return Base64.encodeBytes(rawData);
    }
} 
```

我想出的签名请求的代码：

```
import java.security.SignatureException;

public class SignatureTest {
    /**
     * @param args
     * @throws SignatureException
     */
    public static void main( String[] args ) throws SignatureException {
        // data is the URL parameters and time stamp to be encoded
        String data = "<data-to-encode>";
        // key is the secret key
        String key = "<my-secret-key>";
        Signature.calculateRFC2104HMAC(data, key);
    }
} 
```

起初，我遇到了与类路径相关的错误，所以我将它们添加到我的项目中。现在，当我运行代码时，我没有收到任何错误也没有响应，我只是返回到命令提示符。我知道这可能是一个简单的解决方案。我花了一周的时间试图弄清楚这一点，但没有成功找到任何答案。有人可以指出我正确的方向吗？

注意：由于大小的原因，我没有在此处包含 Base64 代码，但我的项目中确实有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:05:46.850

我的代码中的行：

```
Signature.calculateRFC2104HMAC(data, key); 
```

缺少用于显示结果的打印语句。将其更改为

```
System.out.println(Signature.calculateRFC2104HMAC(data, key)); 
```

给了我我期待的结果。

# java - 将字符串数组转换为表格格式？

> ID：15730353
> 
> 赞同：0
> 
> 时间：2013-03-31T14:19:46.407
> 
> 标签：java, arrays, string

我得到了这些数组：

```
 String[] s0={"A","A","B","B","A","C"};

        String[] s11={"A","30"};
        String[] s12={"B","20"};
        List<String[]> l1=new ArrayList<String[]>();
        l1.add(s11);
        l1.add(s12);

        String[] s21={"B","10"};
        String[] s22={"B","20"};
        List<String[]> l2=new ArrayList<String[]>();
        l2.add(s21);
        l2.add(s22);

        String[] s31={"C","2"};
        String[] s32={"A","10"};
        String[] s33={"A","3"};
        List<String[]> l3=new ArrayList<String[]>();
        l3.add(s31);
        l3.add(s32);
        l3.add(s33);

        //result:
        String[] s1={"A","30","","10"};
        String[] s2={"A","","","3"};
        String[] s3={"B","20","10",""};
        String[] s4={"B","","20",""};
        String[] s5={"A","","",""};
        String[] s6={"C","","","2"}; 
```

结果应该有6个字符串数组，每个字符串数组应该有4个字符串对应4列：这很难，你知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:14:12.917

将数组 s0 视为表条目（行的第一列）的列表，按顺序迭代它们中的每一个。s0 每个条目的其他 3 列值将是列表中数组中第 N 次出现的值 s0 元素。如果在第 N 次出现时没有元素，则考虑将“”作为列值。形成的每一行都将再次成为一个包含所有列值的数组。您需要维护列表 l1、l2 和 l3 中数组的顺序。这是实现您的要求的高级逻辑。希望这会有所帮助。

# algorithm - 标签生成算法

> ID：15730356
> 
> 赞同：-1
> 
> 时间：2013-03-31T14:20:18.480
> 
> 标签：algorithm, parsing, text, tags

我正在尝试考虑一种算法，可以搜索一段文本以查找关键字，例如我有一个单词数组：

```
Sample=['Andy' 'Murray' 'is' 'expecting' 'a' 'difficult' 'test' 'when' 'he' 'faces' 'David' 'Ferrer' 'in' 'the' 'final' 'of' 'the' 'Sony' 'Open' 'on' 'Sunday']; 
```

我想挑出重要的词，比如“Andy、Murray、David、Ferrer、Sunday、Open、Final”等，但我对英语技术方面的了解有限，所以我不知道应该忽略哪些词。

还有其他从文本中查找标签的好方法可以建议吗？/你知道我应该忽略的单词类型吗？

ps 我希望任何代码都在 c++ 中，但这不是必需的:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:34:34.597

[信息检索](http://en.wikipedia.org/wiki/Information_retrieval)领域的经典方法是使用[tf-idf 模型](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)。

*   tf 组件表示每个术语在文档/句子中重复的次数 - 越多“越好” - 因为它表示文本中的重要性。
*   idf 组件表示集合中有多少文档中有这个词，这个数字越低 - 词越重要（因为如果文本中出现一个稀有词，它可以帮助你使用这个词来分割这个文档与其他人相比，直觉要好得多——“the”这个词很可能对文档一无所知，并且 idf 值确保它的权重很小）。

# if-statement - 导演 Lingo 问题 - 见代码

> ID：15730357
> 
> 赞同：1
> 
> 时间：2013-03-31T14:20:24.387
> 
> 标签：if-statement, statements, lingo, adobe-director

我正在尝试使用 if 语句转到 Director 游戏项目中的两个不同帧，但是即使我已经为一组转到第 32 帧并为另一组转到第 31 帧，它们都将转到相同的第 31 帧。我是什么做错了吗？我想不通。（请参阅此处的代码示例：）

--

```
on timeOut

  if the timer >= 360 and sprite(16).visible = 1 then
    member ("tellIt").text = "TIME UP"
    _movie.go(32)

  end if

  if the timer >= 360 and sprite(15).visible = 1 then
    member ("tellIt").text = "TIME UP"
    _movie.go(32)

  end if

  if the timer >= 360 and sprite(14).visible = 1 then
    member ("tellIt").text = "TIME UP"
    _movie.go(32)

  end if

  if the timer >= 360  and sprite(13).visible = 1 then
    member ("tellIt").text = "TIME UP"
    _movie.go(32 
  end if

if the timer > 350 and sprite(16).visible = 0 then
    _movie.go(31)
    member ("endIt").text = "LUNCH IS FOR THE BIRDS"
    member ("tellIt").text = "TIME FLIES"
  end if

  if the timer > 350 and sprite(15).visible = 0 then
    _movie.go(31)
    member ("endIt").text = "LUNCH IS FOR THE BIRDS"
    member ("tellIt").text = "TIME FLIES"
  end if

  if the timer > 350 and sprite(14).visible = 0 then
    _movie.go(31)
    member ("endIt").text = "LUNCH IS FOR THE BIRDS"
    member ("tellIt").text = "TIME FLIES"
  end if

  if the timer > 350  and sprite(13).visible = 0 then
    _movie.go(31)
    member ("endIt").text = "LUNCH IS FOR THE BIRDS"
    member ("tellIt").text = "TIME FLIES"
  end if

  if the timer > 350  and sprite(12).visible = 0 then
    _movie.go(31)
    member ("endIt").text = "LUNCH IS FOR THE BIRDS"
    member ("tellIt").text = "TIME FLIES"
  end if
-- 
```

这段代码写在电影剧本上。

我真的希望你能引导我朝着正确的方向前进，因为我不知道为什么它不会进入我要求的框架。游戏中的其他一切似乎都运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:45:19.090

以你的方式，不管有多少第一次检查是真的，如果后面的任何一个检查是真的，那么你将在第 31 帧结束。

如果您在每个 if 语句中放置一个“退出”，这将确保以后的检查不会完成。喜欢：

```
if the timer >= 360 and sprite(16).visible = 1 then
   member ("tellIt").text = "TIME UP"
   _movie.go(32)
   exit
end if 
```

# python - 强制列表中项目索引的方法？

> ID：15730358
> 
> 赞同：1
> 
> 时间：2013-03-31T14:20:24.610
> 
> 标签：python, list, dictionary

我设置了一个脚本，在给定目录中搜​​索包含“cover”、“resume”和“references”的 pdf 文件，将它们插入到列表中，然后合并它们。搜索词看起来像这样，其中键是搜索词，值是应该插入到列表中的索引：

```
searchTerms = {"cover": 0,
    "resume":1,
    "references":2} 
```

初始列表如下所示：

```
pdfsToBeMerged = ["placeholder", "placeholder", "placeholder"] 
```

在我搜索文件并将它们附加到此列表后，我遍历列表并删除所有“占位符”项目。然后合并这些文件。

我想知道是否有一个 Python 函数可以以某种方式自动化这个“占位符”步骤？就像一个函数，它将插入一个 searchTerm 并将其附加到其索引处的空白列表并*保留*在那里。例如，如果首先找到“引用”文件，它将被附加到索引 2 并且无论是否找到其他文件都将*保留在那里？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:24:13.110

制作列表列表：

```
pdfsToBeMerged = [[], [], []] 
```

然后你可以`append`到正确的列表。

```
for term in searchTerms.keys()
    if term in filetext:
        pdfsToBeMerged[searchTerms[term]].append(filename) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:28:35.767

这并不是您真正想要的解决方案，但包含占位符可能不是什么大问题。

一种更清洁的方法如下：

```
# Initialize with None instead of "placeholder"
pdfs_to_be_merged = [None] * 3

# Insertion as usual
pdfs_to_be_merged[index] = pdf

# Get the cleaned list
[pdf for pdf in pdfs_to_be_merged if pdf is not None] 
```

# php - 从多维数组创建数组

> ID：15730359
> 
> 赞同：2
> 
> 时间：2013-03-31T14:20:25.143
> 
> 标签：php, arrays

我有以下数组：

```
array (size=2)
  0 => 
    array (size=4)
      0 => string 'http://localhost/wp/wp-content/uploads/2013/03/slider-area.jpg' (length=62)
      1 => int 1584
      2 => int 346
      3 => boolean false
  1 => 
    array (size=4)
      0 => string 'http://localhost/wp/wp-content/uploads/2013/03/featured.jpg' (length=59)
      1 => int 1584
      2 => int 346
      3 => boolean false 
```

我的问题是，我怎样才能遍历这个数组来生成一个只包含两个值的新数组，如下所示：

```
$result_array = array(0 => "http://localhost/wp/wp-content/uploads/2013/03/slider-area.jpg",
                      1 => "http://localhost/wp/wp-content/uploads/2013/03/featured.jpg"); 
```

我尝试了一个 foreach 循环，但无法获得所需的结果数组。我尝试了以下循环：

```
foreach ( $array as $key => $value ){

foreach ( $value as $item){

$result_array[] = $item;

} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:22:14.487

它应该像这样简单：

```
$finalArray = array();    
foreach($array as $arrayitem){
  $finalArray[] = $arrayItem[0];  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:22:42.023

你很接近：

```
$result_array = array(); //Initialization is important.

foreach ($array as $value) {
    $result_array[] = $value[0]; // $value[0] is the first element in the inner array.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T14:23:09.623

要使用 foreach 执行此操作：

```
foreach( $array as $key => $value ) {
    $result_array[$key] = $value[0];
} 
```

（除非您想遍历二维，否则不要在 foreach 中使用 foreach！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T14:52:43.107

我只是把这个漂亮的小单线扔在这里以获得它的乐趣:)

```
$newArray = array_map(function($a){ return $a[0]; }, $myArray); 
```

[运行代码](http://ideone.com/CMOQrV)

# python - 如何编写一个函数来处理数组作为逐个元素的输入并返回数组

> ID：15730368
> 
> 赞同：2
> 
> 时间：2013-03-31T14:20:58.613
> 
> 标签：python, function, numpy, iteration

我正在尝试编写一个函数，我希望它在输入是元素时返回一个元素，如果输入是数组，则返回一个输出数组，这样输出数组的每个元素都与输入数组中的同一位置相关联。我举一个虚拟的例子：

```
import numpy as np
def f(a):
    if a<5:
        print a;
f(np.arange(11)) 
```

此代码返回错误：如果 a<5：

> ValueError：具有多个元素的数组的真值不明确。使用 a.any() 或 a.all()

我希望输出是：

```
0
1
2
3
4 
```

我怎样才能让它按照我解释的方式工作，因为我相信许多 python 函数都以这种方式工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:30:11.367

```
import numpy as np
def f(a):
    result = a[a<5]
    return result

def report(arr):
    for elt in arr:
        print(elt)

report(f(np.arange(11))) 
```

一般来说，我不喜欢将打印语句放在函数中（除非函数除了打印什么都不做。）如果你将 I/O 与计算分开，那么你的函数将更具可重用性。

* * *

编写一个返回不同类型输出的函数通常也是一个坏主意，例如某些输入的标量和其他输入的数组。如果这样做，那么使用此函数的后续代码都必须检查输出是标量还是数组。或者，必须非常仔细地编写代码来控制向函数发送什么样的输入。如果您这样做，代码可能会变得非常复杂或非常错误。

编写简单的函数——要么总是返回一个数组，要么总是返回一个标量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:33:31.257

如果您希望函数根据给定的输入是一个列表还是一个 int 做出反应，请使用：

```
def f(a):
    if type(a)==type([]):
        #do stuff
    elif type(a)==type(5):
        #do stuff
    else
        print "Enter an int or list" 
```

通过上述步骤，该函数检查给定输入是否为数组，如果条件为真，则使用第一个块。next if 块检查输入是否为 int。否则执行 else 块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T19:33:29.593

当我不得不处理这种事情时，我通常首先在`np.asarray`开始时进行输入，如果它是 0 维（即标量）则设置一个标志，将其提升为 1 维，运行函数在数组上，如果设置了标志，则在返回之前将其转换回标量。以你为例：

```
def f(a):
    a = np.asarray(a)
    is_scalar = False if a.ndim > 0 else True
    a.shape = (1,)*(1-a.ndim) + a.shape
    less_than_5 = a[a < 5]
    return (less_than_5 if not is_scalar else
            (less_than_5[0] if less_than_5 else None))

>>> f(4)
4
>>> f(5)
>>> f([3,4,5,6])
array([3, 4])
>>> f([5,6,7])
array([], dtype=int32) 
```

如果您经常这样做，您可以在函数装饰器中添加所有处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T14:30:42.493

您可以使用`isinstance`来检查参数的类型，然后让您的函数采取正确的行动；

```
In [15]: a = np.arange(11)

In [16]: isinstance(a, np.ndarray)
Out[16]: True

In [17]: b = 12.7

In [18]: isinstance(b, float)
Out[18]: True

In [19]: c = 3

In [20]: isinstance(c, int)
Out[20]: True

In [21]: d = '43.1'

In [23]: isinstance(d, str)
Out[23]: True

In [24]: float(d)
Out[24]: 43.1

In [25]: float('a3')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-25-caad719e0e75> in <module>()
----> 1 float('a3')

ValueError: could not convert string to float: a3 
```

通过这种方式，您可以创建一个执行正确操作的函数，无论它被赋予 a `str`、 a `float`、 an `int`、 a`list`还是 an `numpy.ndarray`。

# php - 如何使用 sql 仅选择大于 0 的值？

> ID：15730375
> 
> 赞同：2
> 
> 时间：2013-03-31T14:21:36.570
> 
> 标签：php, mysql, sql

我有一个包含负值和正值的 mysql 表，我只想对正值求和。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T14:22:50.663

```
$sumQuery = "SELECT SUM(myNumber) AS 'mySum' FROM myTable WHERE myNumber > 0";
$rs = mysql_query($sumQuery);
$result = fetch_assoc($rs);
echo "My sum is: ".$result["mySum"]; 
```

正如 Rekire 所指出的，应该避免使用 mysql-functions，而应该使用 mysqli 来代替：

```
$query = "SELECT SUM(myNumber) AS 'mySum' FROM myTable WHERE myNumber > 0";

if ($result = $mysqli->query($query)) {

   /* fetch associative array */
   while ($row = $result->fetch_assoc()) {
      echo "My sum is: ".$row["mySum"];
   }

   /* free result set */
   $result->free(); 
```

}

这直接取自[http://www.php.net/manual/en/mysqli-result.fetch-assoc.php](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php)（我只修改了 sql 语句）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T14:24:47.463

```
SELECT SUM(number) as total from tblname WHERE number > 0 
```

现在您可以使用总值。

# iphone - 带有凭据的 HTTP 连接以获取 HTML 文档

> ID：15730377
> 
> 赞同：0
> 
> 时间：2013-03-31T14:22:04.347
> 
> 标签：iphone, html, objective-c, xcode, http

我想下载一个 HTML 文档来解析内容。服务器在进入此站点之前要求输入我的用户凭据。在 Java 中，我在这样的异步任务（JSoup）中进行了基本身份验证：

```
String base64login = new String(Base64.encodeBase64(loginDaten.getBytes()));
Document parsableDoc = Jsoup.connect(myUrl).header("Authorization","Basic"+base64login)
   .timeout(3000)
   .get(); 
```

但在 Objective-C 中，它并没有我想象的那么简单。在这里，我想将网站保存在 NSData-Object 或类似的东西（例如 NSString）中。有什么想法可以尽可能简单地解决这个问题吗？（如你所见，我是这个领域的专家……）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:19:05.737

你可以使用 NSURLConnection 类和 NSMutableURLRequest 来做到这一点。这个想法是让 NSMutableURLRequest 知道您想要使用哪种身份验证方法以及凭据（登录名/密码）。下面的代码应该做到这一点。（您将需要此链接[http://cocoadev.com/wiki/BaseSixtyFour](http://cocoadev.com/wiki/BaseSixtyFour)中的 base64Encoding 的 NSdata 类别）

```
self.receivedData = [[NSMutableData alloc] init];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
NSString *authStr = [NSString stringWithFormat:@"%@:%@", @"login",@"password"];
NSData *authData = [authStr dataUsingEncoding:NSUTF8StringEncoding];
NSString *authValue = [NSString stringWithFormat:@"Basic %@", [authData base64Encoding]];
[request setValue:authValue forHTTPHeaderField:@"Authorization"];

NSURLConnection *conn=[[NSURLConnection alloc] initWithRequest:request delegate:self];

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
   [self.receivedData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
   if ([self.receivedData length] >0)
      NSString *result = [[NSString alloc] initWithData:downloadedData encoding:NSUTF8StringEncoding];
      NSLog(@"The HTML String Is : %@", result);

{ 
```

# excel - 使用两个变体创建叠加值

> ID：15730379
> 
> 赞同：0
> 
> 时间：2013-03-31T14:22:10.040
> 
> 标签：excel, if-statement, numbers, add, formula

我想问一下excel是否有可能做这样的事情。

假设我有 10 个单元格将是是或否

但我需要通过将它们相加来计算有多少是。假设在这 10 个单元格中，有 6 个是的，在单元格 C3 中只会产生 6 个。

数字由特定行中“是”的数量确定

如果可以在excel中做到这一点，公式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:28:51.970

是的，使用`COUNTIF`

```
=COUNTIF(A1:A2,"YES") 
```

# scheme - 方案对输出

> ID：15730385
> 
> 赞同：1
> 
> 时间：2013-03-31T14:22:55.490
> 
> 标签：scheme, racket

如果采用流的前 6 个元素，则尝试生成看起来像 (1 1) (1 2) (1 3) (2 2) (2 3) (3 3) 的对的输出。（前 6 列有 3 列，它应该打印以 1 开头的对，然后是 2，然后是 3。）我拥有的代码是：

```
(define (pairs s t)
  (cons-stream (cons (stream-car s) (stream-car t))
               (cons-stream
                (stream-map (lambda (x) (cons (stream-car s) x))
                            (stream-cdr t))
                (pairs (stream-cdr t) (stream-cdr s))))) 
```

如果我跑

```
(take 6 (pairs integers integers)) 
```

其中 take 和 integers 定义如下：

```
(define (take n s)  
  (if (= n 0)
      '()
      (cons (stream-car s) (take (- n 1) (stream-cdr s)))))

(define integers (cons-stream 1 (add-streams ones integers))) 
```

我得到的结果是：

```
((1 . 1)
 ((1 . 2) . #<promise>)
 (2 . 2)
 ((2 . 3) . #<promise>)
 (3 . 3)
 ((3 . 4) . #<promise>)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:46:58.207

在方案中，

```
(define (interleaved-pairs xs ys . args)
  (let ((x (stream-car xs))
        (ac (if (null? args) () (car args))))
    (stream-append 
      (stream-map stream-car (list->stream (reverse ac)))
      (stream-cons (list x (stream-car ys))
        (interleaved-pairs 
          (stream-cdr xs)
          (stream-cdr ys)
          (cons
            (stream-map (lambda(y)(list x y)) (stream-cdr ys))
            (map stream-cdr ac))))))) 
```

这应该按照您想要的顺序产生结果：`(1 1) (1 2) (2 2) (1 3) (2 3) (3 3) (1 4) ...`.

您也将此标记为球拍。据我在[Racket 文档](http://docs.racket-lang.org/reference/streams.html)中看到的，它`stream-first`代替了`stream-car`等。由于某种原因，它似乎没有`list->stream`，可以使用`apply`and`stream`函数非常直接地定义。

* * *

这里是[一个较短的符号](https://stackoverflow.com/tags/haskell/info)。

```
ipairs xs ys = g xs ys []  where
  g (x:xs) (y:ys) ac = map head (reverse ac) ++ (x,y) : 
                         g xs ys (map ((,) x) ys : map tail ac) 
```

# javascript - Jquery不是多个类的选择器

> ID：15730389
> 
> 赞同：0
> 
> 时间：2013-03-31T14:23:09.977
> 
> 标签：javascript, jquery

使用 jquery 而不是选择器。我想要的是选择其中没有按钮类的“内容”类，然后选择跨度标记。我尝试了以下代码，但没有成功：

```
$(".content:not('.button') span"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:24:52.590

我建议：

```
$(".content:not(:has('.button')) span"); 
```

或者：

```
$('.content').filter(function(){
    return !$(this).find('.button').length;
}).find('span'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:24:53.207

使用`:not(:has(selector))`，这是一个工作示例：

[jsFiddle](http://jsfiddle.net/Tyriar/NDJb8/)

```
$(".content:not(:has(.button)) span"); 
```

# jquery - 循环遍历具有唯一类的 div，找到 div 并附加到父 div

> ID：15730391
> 
> 赞同：0
> 
> 时间：2013-03-31T14:23:20.603
> 
> 标签：jquery

我有以下结构：

```
<div id="camera_wrap">
  <div data-src="Slider-Image-1.jpg" class="test"></div>
  <div class="camera_caption fadeFromBottom">a</div>
  <div data-src="Slider-Image-2.jpg" class="test"></div>
  <div class="camera_caption fadeFromBottom">b</div>
  <div data-src="Slider-Image-3.jpg" class="test"></div>
  <div class="camera_caption fadeFromBottom">c</div>
</div> 
```

我必须将带有 class="camera_caption" 的 div 移动到父 div 中，如下所示：

```
<div id="camera_wrap">
  <div data-src="Slider-Image-1.jpg" class="test"><div class="camera_caption fadeFromBottom">a</div></div>
  <div data-src="Slider-Image-2.jpg" class="test"><div class="camera_caption fadeFromBottom">b</div></div>
  <div data-src="Slider-Image-3.jpg" class="test"><div class="camera_caption fadeFromBottom">c</div></div>
</div> 
```

我怎样才能做到这一点？

马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:24:23.030

使它像这样：

```
$('[data-src^="Slider-Image"]').each(function () {
    $(this).append($(this).next('.camera_caption').html());
});
$('[data-src^="Slider-Image"]').siblings('.camera_caption').remove(); 
```

首先循环通过`data-src="Slider-Image"`with`.each()`函数，然后将下一个 div`.html()`通过`.append()`，然后在循环之外找到它的兄弟姐妹并将其删除。

### [在小提琴中查找](http://jsfiddle.net/NamxS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:10:31.793

```
$(".camera_caption").each(function(index, element) {
    $(element).prev().html(element);
}); 
```

[http://jsfiddle.net/fCTr5/1/](http://jsfiddle.net/fCTr5/1/)

哦，那些是兄弟节点而不是父节点；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:28:25.243

你可以用一个循环来做到这一点。jQuery 提供`each`：

```
$('.camera_caption').each(function(){
    var o=$(this);
    o.appendTo(o.prev());
}); 
```

（`prev`获取前面的元素，因此这会将每个`camera_caption`div 添加到紧接在它之前的 div 中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T14:28:25.760

```
$(".camera_caption").each(function(){
    $(this).prev('.test').append($(this));       
}); 
```

之后，编辑我删除了导致元素被完全删除的行。虽然这可行，但如果你想要这样的 html 结构，我仍然建议在生成标记时这样做。

[演示](http://jsfiddle.net/2fEQw/1/)

# javascript - 如何使用 Javascript (Razor) 根据文本框的值过滤模型

> ID：15730402
> 
> 赞同：1
> 
> 时间：2013-03-31T14:24:35.267
> 
> 标签：javascript, asp.net-mvc, razor, kendo-ui

这个问题可能完全没有意义，但我是 MVC 和 Razor 的新手。

这是我正在尝试做的事情：

1.  我有一个简单的表“产品”，我使用我的模型从中检索所有值。products 表有一个字段 Id、Name、Price 和 StartDate。
2.  我将数据从控制器传递到视图作为列表
3.  在视图中，我有一个自动完成字段 (KendoUI)，我在其中输入产品名称
4.  在 AutoCoplete 更改事件的事件处理程序中，我想检索已在 AutoComplete 文本框中键入的产品的“价格”

下面是产品的代码：

```
public class Product
{
    public int ID { get; set; }
    public string Name { get; set; }
    public DateTime FirstRelease { get; set; }
    public decimal Price { get; set; }
}

public class WidgetsDBContext : DbContext
{
    public DbSet<Product> Products { get; set; }
} 
```

我的视图代码（部分代码）如下：

```
<div id="auto">
    <p>Start typing</p>
    <label for="productAutoComplete">Please select procuct:</label> 
    @(Html.Kendo().AutoComplete()
        .Name("productAutoComplete")
        .DataTextField("Name")
        .BindTo(Model)
        .Filter(FilterType.StartsWith)
        .Placeholder("Select the product")
        .HighlightFirst(true)
        .Suggest(true)
    )

   <script>
       function productAutoComplete_change() {
           var gauge = $("#linearGauge").data("kendoLinearGauge");
           @foreach (var p in Model)  <==== HERE I WANT TO DO THE FILTERING   
           {
               @: gauge.value(@p.Price);
           }                      
       }

       $("#productAutoComplete").bind("change", productAutoComplete_change);

   </script>
</div> 
```

*对验证的关注：*如果我很好地理解了 MVC 和 Razor 的基础知识，那么我认为视图被渲染一次（在 HTTP GET 期间）是正确的，因此我无法在 Razor 中动态过滤模型（但只能在Javascript）？如果是，那么正确的方法是什么？

先感谢您

左撇子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:35:35.257

> 我认为视图被渲染一次（在 HTTP GET 期间）是否正确，因此我无法在 Razor 中动态过滤模型（但只能在 Javascript 中）？

对，那是正确的。

> 如果是，那么正确的方法是什么？

你可以使用 AJAX。例如，在`productAutoComplete_change`函数中，您可以将 AJAX 请求发送到将执行过滤并返回包含过滤结果的局部视图的控制器操作。

有很多关于在 ASP.NET MVC 中使用 AJAX 的教程。例如，使用 jQuery，您可以使用该[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)函数。

# algorithm - 除了 voronoi 图之外的另一种方法来分隔点

> ID：15730407
> 
> 赞同：0
> 
> 时间：2013-03-31T14:25:07.063
> 
> 标签：algorithm, math, geometry

我想将空间分解为每个点周围的区域。voronoi 图是解决这个问题的最佳方法，但实际上我想找到另一种方法来将不同区域中的点彼此分开。谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:30:22.713

您没有提及您要做什么，但是在阅读您的问题时，我想到了[图像分割。](http://en.wikipedia.org/wiki/Image_segmentation)

1.  [最佳分割算法](https://stackoverflow.com/questions/5042445/best-segmentation-algorithm)
2.  [K 表示](http://www.waset.org/journals/waset/v41/v41-112.pdf)在 2D 数组中提取 k 个特征的算法

# python - “创建进程失败。” 使用 pyside-uic 将 QtDesigner 文件转换为 .py 时出错

> ID：15730411
> 
> 赞同：0
> 
> 时间：2013-03-31T14:25:20.373
> 
> 标签：python, pyside, qt-designer

我在powershell中输入这个：

```
pyside-uic.exe login.ui -o login.py 
```

然后我收到错误消息：创建进程失败。

我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:22:14.240

想出了如何解决这个问题。只需将 pyside-uic.exe 设置为以管理员身份运行。

# c# - 外连接上的 NullReferenceException

> ID：15730412
> 
> 赞同：1
> 
> 时间：2013-03-31T14:25:29.400
> 
> 标签：c#, linq, nullreferenceexception

我正在尝试从 Fderive 中获取所有数据，但是我正在尝试使用 where 子句设置过滤器。不幸的是，当我在 spd 中的一行为空时触摸 spd 时，我得到了一个 nullreferencexpection。

```
var Result = from fpd in FDerive
                             join spd in SDerive
                             on new { fpd.PId, fpd.SId }
                             equals new { spd.PId, spd.SId } into allRows
                             from spd in allRows.DefaultIfEmpty()
                             where spd.SId == ""
                             || spd.PId == ""
                             select new { fpd, spd }; 
```

如何解决空错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:32:50.000

我在以下问题的代码底部找到了答案

[LINQ 双左连接](https://stackoverflow.com/questions/3974088/linq-double-left-join)

```
var results =
        from person in students
        join entry in subquery on person.FullName equals entry.AuthorFullName into personEntries
        from personEntry in personEntries.DefaultIfEmpty()
        orderby person.FullName
        select new
        {
            PersonName = person.FullName,
            BlogTitle = personEntry == null ? "" : personEntry.Title
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:01:02.510

`DefaultIfEmpty<T>`如果源集合为空，将返回一个仅包含一个默认值为`T`- 在这种情况下为 - 的元素的集合。如果连接中没有返回任何项目，也会`null`如此。`spd``null`

尝试`null`检查 where 子句

```
var Result = 
    ...
    where spd == null || spd.SId == "" || spd.PId == ""
    select new { fpd, spd }; 
```

# php - 从 stdClass 中获取带有 # 的项目

> ID：15730413
> 
> 赞同：0
> 
> 时间：2013-03-31T14:25:41.677
> 
> 标签：php

当我做 a`print_r($this->info->artist->image[4]);`时，我得到这个：

```
stdClass Object
(
    [#text] => http://userserve-ak.last.fm/serve/_/68145708/AWOLNATION+PNG.png 
    [size] => mega
) 
```

我如何获得`[#text]`零件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:26:50.273

你会这样做：

```
$this->info->artist->image[4]->{'#text'}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T14:26:58.290

```
$this->info->artist->image[4]->{'#text'}; 
```

# mysql - 为什么这个mysql语法错误？

> ID：15730415
> 
> 赞同：0
> 
> 时间：2013-03-31T14:25:47.880
> 
> 标签：mysql, sql, web2py

```
CREATE TABLE OWLUpdates(
id INT AUTO_INCREMENT NOT NULL,
website INT, INDEX website__idx (website), FOREIGN KEY (website) REFERENCES OWLWebsite          (id) ON DELETE CASCADE,
suburl VARCHAR(255),
sendtimes INT,
title VARCHAR(255) UNIQUE,
description LONGTEXT,
is_show CHAR(1),
reads INT,
degrees INT,
mtime DATETIME,
PRIMARY KEY(id)
) ENGINE=InnoDB CHARACTER SET utf8; 
```

有什么错误？？web2py 报告：

> (1064, u"您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 'reads INT,\n degree INT,\n mtime DATETIME,\n PRIMARY KEY( id)\n) ENGINE=Inn' 在第 9 行")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T14:27:33.263

`READS`是 MySQL 中的保留关键字。为了使用关键字，你应该用反引号包裹它，

```
`READS` INT 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

但作为建议，请避免使用保留关键字以防止将来出现问题。

# ms-access - 在 Access '07 VBA 中向多列列表框添加值

> ID：15730416
> 
> 赞同：1
> 
> 时间：2013-03-31T14:25:51.203
> 
> 标签：ms-access, listbox, vba

我是 Access '07 的初学者。我目前正在研究食堂查询系统。在 Add/Modify Item 屏幕中，我有一个组合框，它从包含 Item、Rate、QtyAvailable 字段的表 tblSampleData 中提取值。通过单击转移按钮，我将所需项目从组合（基本上是所有可用项目的列表）转移到列表框（包含用户想要的项目）。组合和列表都有列标题。您如何在名为 Quantity 的列表框中创建另一个与任何表无关的行，用户可以在其中输入其项目的数量？

紧急帮助将受到祝贺。任何其他解决此问题的方法都将受到称赞。另外，如果您不明白，请随时询问有关此的任何问题。

问候， S 桑迪普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:18:56.720

如果我正确理解您的要求，您将需要在表单中添加一个文本框，以便用户在选择项目时可以指定数量。

[假设]

--> 表数据：我的 [tblSampleData] 看起来像这样：

```
ID  Item    Rate    QtyAvailable
1   Item1   Rate1   3
2   Item2   Rate2   5 
```

--> 组合框：`Bound Column`组合框的 是`1`，（隐藏的）第一列，即[ID]。

--> 数据绑定：组合框有`Row Source`(tblSampleData)，但没有`Control Source`. 列表框完全未绑定。

如果您的情况不同，您将需要调整示例代码以适应。

[/假设]

我创建了一个测试表单，当它第一次打开时看起来像这样：

![首次打开](https://i.stack.imgur.com/SvQZx.png)

表单后面的 VBA 代码是这样的：

```
Option Compare Database
Option Explicit

Private Sub btnTransfer_Click()
Dim cdb As DAO.Database, rst As DAO.Recordset, qtySelected As Long
Set cdb = CurrentDb
Set rst = cdb.OpenRecordset("SELECT * FROM tblSampleData WHERE ID=" & Me.cbxItems.Value, dbOpenSnapshot)
qtySelected = Val(Nz(Me.txtQty.Value, 0))
If qtySelected <= 0 Then
    MsgBox "Please specify a (positive) quantity.", vbExclamation
Else
    If qtySelected <= rst!QtyAvailable Then
        Me.lstSelected.AddItem rst!ID & ";" & rst!Item & ";" & rst!Rate & ";" & qtySelected
    Else
        MsgBox "Quantity selected exceeds quantity available.", vbExclamation
    End If
End If
rst.Close
Set rst = Nothing
Set cdb = Nothing
End Sub

Private Sub Form_Load()
Do While Me.lstSelected.ListCount > 0
    Me.lstSelected.RemoveItem 0
Loop
Me.lstSelected.AddItem ";Item;Rate;QtySelected"
End Sub 
```

用户从组合框中选择项目...

![CBX](https://i.stack.imgur.com/IOOfi.png)

...在文本框中输入数量...

![数量](https://i.stack.imgur.com/J7On4.png)

...然后单击“转移”按钮将项目+所选数量移动到列表框中：

![添加项目](https://i.stack.imgur.com/1EIwx.png)

# c# - 从后面的代码中查找 Listview 中的空数据？

> ID：15730417
> 
> 赞同：1
> 
> 时间：2013-03-31T14:25:56.557
> 
> 标签：c#, asp.net, listview, data-binding

如果 Listview 为空，我正在尝试重定向到错误页面。我确实尝试了以下解决方法，但似乎没有重定向。

```
protected void lvDetils_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        if (e.Item.ItemType == ListViewItemType.EmptyItem)
        {
            Response.RedirectToRoutePermanent("NotFound");
        }
    } 
```

这有什么问题？有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:39:17.303

试试下面的代码而不是你的代码

```
if (e.Item.ItemType == null) 
```

编辑

或试试这个代码

```
if (lvDetils.Items.Count==0) 
```

**新编辑：**

但是您还有另一个选择是 **.use lvDetils_ItemCreated**

```
protected void lvDetils_ItemCreated(object sender, ListViewItemEventArgs e)
    {
        if (e.Item.ItemType == ListViewItemType.EmptyItem)
        {
            Response.RedirectToRoutePermanent("NotFound");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:34:44.943

好的。我也终于用状态码完成了。谢谢拉梅什·拉金德兰。

下面是代码。

```
protected void lvEnglishMovieDetils_ItemCreated(object sender, ListViewItemEventArgs e) 
    {
        if (e.Item.ItemType == ListViewItemType.EmptyItem)
        {
            Response.RedirectToRoutePermanent("NotFound");
        }
    } 
```

在我的 404.aspx 中，我写了下面的代码是下面的链接

```
public partial class Custom404 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Page.Title = "Page Not Found";
    }

    protected override void Render(HtmlTextWriter writer)
    {
        base.Render(writer);
        Response.StatusCode = 404;
    }
} 
```

状态码信息来源：

[如何为页面设置404状态码](https://stackoverflow.com/questions/347281/asp-net-custom-404-returning-200-ok-instead-of-404-not-found)

# whmcs - whmcs 标题代码如何修改？

> ID：15730420
> 
> 赞同：1
> 
> 时间：2013-03-31T14:26:11.423
> 
> 标签：whmcs

我的 whmcs 标题代码显示如下。我想修改它。

```
<title>{if $kbarticle.title}{$kbarticle.title} - {/if}{$pagetitle} - {$companyname}</title> 
```

我想当我去我的网站主页/索引页面然后显示这个代码

```
<title>{$companyname} - {$pagetitle}</title> 
```

但是当我去其他页面，如共享主机、经销商主机等时，代码显示

```
<title>{$pagetitle} - {$companyname}</title> 
```

我怎么能做到。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:51:20.757

在您的模板中，找到 header.tpl，使用以下代码：

```
{if $filename eq "index"}
<title>{$companyname} - {$pagetitle}</title>
{else}
<title>{$pagetitle} - {$companyname}</title>
{/if} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T03:22:58.470

你应该修改一些 Caner 先生的 G 代码。像这样。我认为这将是工作。

```
<title>{if $filename eq "index"}{$companyname} - {$pagetitle}
{else}{$pagetitle} - {$companyname}{/if}</title> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:01:36.303

是的，有可能。请查看WHMCS（页面标题部分）的以下官方文档：http: [//docs.whmcs.com/Seo](http://docs.whmcs.com/Seo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T07:05:41.730

或者，您可以使用模板 var {$isIndex}。

像这样

```
<title>
 {if $isIndex} 
  {$companyname} - {$pagetitle}
 {else} 
  {$pagetitle} - {$companyname} 
 {/if} 
</title> 
```

当您对 WHMCS 中可用的模板变量有疑问时，您可以随时使用 {debug} 命令

# android - Android - 在调用方法之前保持增加延迟，直到用户停止交互

> ID：15730422
> 
> 赞同：1
> 
> 时间：2013-03-31T14:26:36.927
> 
> 标签：android, synchronization, android-asynctask, delay, wait

我正在使用 Google Maps V2，并且需要在用户移动地图时调用一个方法。我正在使用每次移动地图时触发的 .setOnCameraChangedListener() 。从这个事件监听器，我可以调用我的方法。

问题是，如果用户移动地图非常缓慢，事件会在一秒钟内触发多次。然而，我从事件中调用的方法非常耗时，我不希望它被如此频繁地调用。

我怎样才能保持一个计时器，不断推动延迟，比如 300 毫秒，直到用户真正停止与地图交互。这样我的方法将在最后一次触发事件的 300 毫秒后被调用。

我已经尝试过，同步，asyncTask（一遍又一遍地使用 .cancel 和 .start），但似乎没有什么效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T12:10:20.610

将以下内容添加为字段：

```
private Handler cameraChangeHandler = new Handler();
private Runnable throttledRunnable = new Runnable() {
    @Override
    public void run() {
        // code that should run when user interaction has stopped for 300ms
    }
}; 
```

然后在您的 onCameraChange 中执行以下操作：

```
@Override
public void onCameraChange(CameraPosition cameraPosition) {
    cameraChangeHandler.removeCallbacks(throttledRunnable);
    cameraChangeHandler.postDelayed(throttledRunnable, 300);
} 
```

# jquery - jquery mobile动态注入页面

> ID：15730423
> 
> 赞同：2
> 
> 时间：2013-03-31T14:26:36.960
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery mobile，目前使用下面的代码动态构建菜单。我现在需要为菜单项创建实际页面作为下一步。我一直在研究 jQuery Mobile 和[动态页面生成](http://jquerymobile.com/demos/1.2.0-pre/docs/pages/page-dynamic.html)，并认为这是我“可以”用来实现这一目标的东西。我已经阅读了动态页面生成文档，但不明白如何将其放入我当前的代码中，或者即使它适合我需要实现的目标。

我你可以在下面看到，当我为主页构建菜单输出时，我已经有了 ID 和页面名称等，有人可以向我展示我现在如何使用 jquery 为这些菜单项动态构建所需的 html 页面的示例吗？谢谢你。

```
$.each(siteData["pages"], function(i,v) {
             $.mobile.activePage.find('[data-role=content]').append('' +
                     '<a href='+ v["id"] + ' data-role="button">' + v["name"] + '</a>').trigger('create');

            // NOW I HAVE THE MENU LETS CREATE THE ACTUAL PAGES INSIDE HERE TOO
         }); 
```

在 navlist 中创建的当前标记菜单项：

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
    </div>

    <div data-role="content" class="navlist">
    </div>

    <div data-role="footer">
    </div><!-- /footer -->
</div> 
```

所以现在对于每个项目，我需要使用 jquery 为每个项目生成标记。

更新：所以根据建议我尝试了这样的事情，但它不起作用。

```
 $.each(siteData["pages"], function(i,v) {
     $.mobile.activePage.find('[data-role=content]').append('' +
             '<a href='+ v["id"] + ' data-role="button">' + v["name"] + '</a>').trigger('create');

     // Prepare your page structure
     var newPage = $("<div data-role='page' id=v[id]><div data-role=header>" +
             "<a data-iconpos='left' data-icon='back' href='#' data-role='button' " +
             "data-rel='back'>Back</a><h1>Dynamic Page</h1></div><div data-role=content>Stuff here</div></div>");

    // Append the new page info pageContainer
                 newPage.appendTo($.mobile.pageContainer);

    // Move to this page by ID '#page'
                 $.mobile.changePage('#'+v["id"]);

 }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T14:41:09.980

这是动态创建新页面的简单方法。

[工作示例](http://jsfiddle.net/Palestinian/FaT7S/)

```
// Prepare your page structure
var newPage = $("<div data-role='page' id='page'><div data-role=header><a data-iconpos='left' data-icon='back' href='#' data-role='button' data-rel='back'>Back</a><h1>Dynamic Page</h1></div><div data-role=content>Stuff here</div></div>");

// Append the new page into pageContainer
newPage.appendTo($.mobile.pageContainer);

// Move to this page by ID '#page'
$.mobile.changePage('#page'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T10:08:13.560

如果您想使用新内容重新创建页面，则会出现兑现问题。所以你必须这样做...

```
var $i = 0;
$('#test').on('click', function () {
	$i++;
  alert("I="+$i);
    // Prepare your page structure
    var newPage = $("<div data-role='page' id='page'><div data-role=header><a data-iconpos='left' data-icon='back' href='#' data-role='button' data-rel='back'>Back</a><h1>Dynamic Page</h1></div><div data-role=content>Stuff here = " + $i + "</div></div>");

    // Append the new page into pageContainer
    newPage.appendTo($.mobile.pageContainer);

    // Move to this page by ID '#page'
    $.mobile.changePage('#page');
});

$(document).on('pagehide', '#page', function(){
    $(this).remove();
});
```

```
<a data-role=button id=test>test</a>
```

# ruby-on-rails - 订单数组。数组的未定义方法“订单”。将数组转换为哈希？

> ID：15730432
> 
> 赞同：8
> 
> 时间：2013-03-31T14:27:36.603
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, hash

我有一个城市模型，在城市的表演动作中，我想渲染城市中特定位置附近的酒店。城市有_许多地点；正在使用 Geocoder near 方法搜索酒店。

为了添加订单功能，我遵循了 Ryan Bates[截屏视频 #228](http://asciicasts.com/episodes/228-sortable-table-columns)，但这种方法似乎不适用于数组，会出现错误`undefined method `order' for #< Array:0x007f960d003430>`

```
cities_controller.rb

helper_method :sort_column, :sort_direction
def show
  session[:search_radius] = 2 if session[:search_radius].blank?
  @city = City.find(params[:id])
  @locations = @city.locations
  @hotels = []
  @locations.each do |location|
    unless location.longitude.blank? || location.latitude.blank? 
      center_point = [location.latitude, location.longitude]
      box = Geocoder::Calculations.bounding_box(center_point, session[:search_radius])
      thotels = Hotel.near(center_point, session[:search_radius]).within_bounding_box(box)
    else
      thotels = Hotel.near(center_point, session[:search_radius])
    end
    @hotels += thotels if thotels
    @hotels = @hotels.uniq
  end
  @hotels = @hotels.order(sort_column + " " + sort_direction).paginate(:page => params[:page], :per_page => 5)
  @json = @locations.to_gmaps4rails

  respond_with @json, :location => city_url
end

private

  def sort_column
    Hotel.column_names.include?(params[:sort]) ? params[:sort] : "name"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
  end 
```

我的问题是：我应该专注于将数组转换为哈希，还是应该首先创建酒店的哈希，或者找到完全不同的方法来执行排序？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T16:11:56.393

`order`是一种用于在数据库级别进行排序的方法。由于`@hotels`是一个数组，因此您将无法使用`order`. 尝试以下操作（未经测试，如果尚未包含数组分页，则可能需要包含它）

```
@hotels = @hotels.sort_by(&:"#{sort_column}")
@hotels = @hotels.reverse if sort_direction == 'DESC'
@hotels = @hotels.paginate(:page => params[:page], :per_page => 5) 
```

# c - 排序时出现分段错误

> ID：15730435
> 
> 赞同：-4
> 
> 时间：2013-03-31T14:27:48.767
> 
> 标签：c, arrays

当使用一种称为 tubor 排序的算法对数组进行排序时，我实现了它，当我运行它时，我得到了分段错误。即使我搜索了网络并且没有类似的错误，我还是决定在这里发布。这个错误可能是因为我在for循环中将辅助数组的大小设置为数组的大小，有没有更好的方法来编写这段代码？下面是源码。

```
#include <stdio.h>

void TuborSort(int* array) {
  int aux[5] = { 0, 0, 0, 0, 0 };
  int i;

  for (i = 0; i < sizeof(array); i++) {
    aux[array[i]]++;
  }

  int j = 0;
  for (i = 0; i < 5; i++) {
    while(aux[i]-- > 0) {
      array[j++] = i;
    }
  }
}

int main() {
  int array[6] = {2, 5, 1, 4, 1};
  int i;

  TuborSort(array);

  for (i = 0; i < sizeof(array); i++)
    printf("%d ", array[i]);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:30:41.217

你是说`aux[array[i]]++`aux只有5个元素长。所以(5) 中**的第二个元素`array`太大**而不能用作 的索引`aux`。

* * *

作为旁注，您使用的方式`sizeof`是错误的，您需要将数组的长度作为附加参数传递。

正如 Alexey 所指出的，在`main`for 中应该是：

```
size_t i;
for (i = 0; i < sizeof(array) / sizeof(*array); i++) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T14:32:25.517

`sizeof(array)`在你的`TuborSort()`功能是不合适的。正如您所声明`array`的`int *`那样，不是 6 个整数的数组，这不是您想要的。

此外，`sizeof`您不需要数组中的元素计数，即`sizeof(array)/sizeof(array[0])`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:34:45.670

对于了解 Java 的人来说，这是一个非常常见的错误，c 和 c++ 中的指针大小源自架构，通常在 PC 上为 32/64 位。

一旦你传递一个指向数组的指针，你必须发送它的长度，否则你**无法**知道它的长度。

# jsf - 无法在 WAR 包文件夹中找到 JSF 页面

> ID：15730437
> 
> 赞同：0
> 
> 时间：2013-03-31T14:28:08.653
> 
> 标签：jsf, jsf-2, glassfish, web.xml

我有一个带有几个 JSF 页面的 WAR 包。我将 JSF 页面组织到几个目录中。我想我缺少一些配置，因为当我将 JSF 页面打开到文件夹中时，找不到文件`java.io.FileNotFoundException`也许我需要在文件`web.xml`中添加过滤器才能在文件夹中找到 JSF 页面？

PS我得到这个错误：

```
#|2013-03-31T18:17:45.480+0300|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=97;_ThreadName=Thread-3;|StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.io.FileNotFoundException
    at org.apache.naming.resources.DirContextURLConnection.getInputStream(DirContextURLConnection.java:403)
    at com.sun.faces.util.Util.getLastModified(Util.java:903)
    at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:78)
    at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:74)
    at com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at com.sun.faces.util.ExpiringConcurrentCache.get(ExpiringConcurrentCache.java:114)
    at com.sun.faces.facelets.impl.DefaultFaceletCache.getFacelet(DefaultFaceletCache.java:117)
    at com.sun.faces.facelets.impl.DefaultFaceletCache.getFacelet(DefaultFaceletCache.java:58)
    at com.sun.faces.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:256)
    at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:378)
    at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:358)
    at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
    at com.sun.faces.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:120)
    at com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:116)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:187)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:87)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:164)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:906)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:99)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.DX_57.RMC_57.SessionFilter.HttpLoginFilter.doFilter(HttpLoginFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.DX_57.RMC_57.SessionFilter.HttpLoginFilter.doFilter(HttpLoginFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

PS这是文件结构![在此处输入图像描述](https://i.stack.imgur.com/NsUNR.png)

这是 web.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                       http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>Dashboard.html</welcome-file>
    </welcome-file-list>
    <context-param>
        <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>aristo</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
        <param-value>/WEB-INF/primefaces-p.taglib.xml</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>
    <session-config>
        <session-timeout>45</session-timeout>
    </session-config>
    <error-page>
        <exception-type>javax.faces.application.ViewExpiredException</exception-type>
        <location>/DX-57/SR-57/Home.xhtml</location>
    </error-page>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:38:37.617

您需要在 web.xml 中配置 FacesServlet，我猜这已经完成：

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping> 
```

然后你需要把你的`.xhtml`文件放到`src/main/webapp/`

例如：`src/main/webapp/test.xhtml`将`http://localhost:8080/app/test.jsf`根据主机（此处`localhost`）、端口（此处`8080`）和上下文（此处`app`）提供服务。

在 JSF 页面中包含文件（用于模板或基本包含）时，最好放置绝对路径：

模板：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/templates/template.xhtml">

    </ui:composition>

</html> 
```

包括 ：

```
<ui:include src="/includes/include.xhtml">
    <ui:param name="param" value="data" />
</ui:include> 
```

在 Netbeans 下，将`.xhtml`文件放在`Web Pages`项目的节点中。

# git - 如何验证/更改 git 用户信息？

> ID：15730438
> 
> 赞同：1
> 
> 时间：2013-03-31T14:28:09.000
> 
> 标签：git

在 git 中，您必须设置一个全局`user.name`和`user.email`. 这些将用作共享 git 存储库中的作者信息，该存储库通过具有 Ldap 身份验证的 Apache 提供服务。

问题是我想使用这个身份验证过程不仅是为了决定用户是否可以推送，还要确保我在 git 存储库中拥有正确的作者。

这样的事情将如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:45:24.567

推是如何工作的？通过 CGI 脚本？如果是这样，将有一个包含名为的用户名的环境变量`REMOTE_USER`（参见[此处](https://stackoverflow.com/a/2539633/492364)）。在您的存储库中放置**[一个`update`挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)**，检查该变量中指定的用户是否允许所有新提交。

请注意，这种方法的一个缺点是，如果多个人将某些内容推送到分支 A，则没有普通开发人员也可以将所有这些更改推送到`master`大约，因为某些提交不属于他。您可能想检查新提交是否已经存在于其他分支上，在这种情况下，无需检查就让它们通过。

# php - 在 javascript 语句中设置 PHP 值时的奇怪行为

> ID：15730440
> 
> 赞同：-3
> 
> 时间：2013-03-31T14:28:11.217
> 
> 标签：php, javascript, variables

我的页面中有以下代码：

```
<script type="text/javascript">

    if (navigator.userAgent.indexOf('MSIE 8') != -1) {
        <?php $ie8 = 1; ?>
        alert(<?=$ie8?>);
    }

</script> 
```

现在这只会在浏览器是 IE8 时正确输出警报。那里一切都好。

但是，如果我`$ie8`在运行后测试该值，例如：

```
var_dump($ie8); 
```

我总是`int(1)`以浏览器是否为 IE8 的价值而告终。我在函数运行之前测试了这个值，以确保它没有在其他地方设置，但正如预期的那样，我得到了一个`NULL`输出。

`1`所以我的问题是，当它甚至没有进入 javascript 语句时，它是如何设置的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:32:28.763

您正在尝试将 Javascript 和 PHP 作为单一语言使用，其中一种是服务器端，另一种是客户端。

在 PHP 中，`$ie8`将永远是`1`. 你扔给它什么样的 HTML 或 Javascript 无关紧要，因为 Javascript 仅由客户端在他们查看页面时执行，而 PHP 在服务器提供页面时由服务器呈现。

如果要基于 Javascript 函数在 PHP 中设置值，则需要使用 AJAX，它将请求从客户端发送回服务器，然后 PHP 可以与数据交互。查找有关客户端/服务器端语言和 AJAX 的更多信息，您就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:34:49.133

当该文件转到 PHP 时，它并不关心您的 javascript 逻辑。除非您的“if”是 PHP 而不是 JS，否则 php ie8 =1 将始终被执行。

这就像一个下班的飞行员作为乘客坐在飞机上。他的逻辑会影响值班飞行员吗？不，当 PHP 工作时，那时 JavaScript 是下班的，对 PHP Pilot 来说一分钱都没有关系

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T14:40:17.907

你的结果是显而易见的。在您的 PHP 脚本中

```
<script type="text/javascript">

if (navigator.userAgent.indexOf('MSIE 8') != -1) {
    <?php $ie8 = 1; ?>
    alert(<?=$ie8?>);
}

</script> 
```

当这在服务器端被解释时，这就是浏览器接收到的

```
<script type="text/javascript">

if (navigator.userAgent.indexOf('MSIE 8') != -1) {
    alert(1);
}

</script> 
```

您正在 javascript 块内设置 PHP 变量。PHP 是首先被解释的（在浏览器开始解释 javascript 之前）..

# android - 从android设备连接到服务器时连接超时

> ID：15730445
> 
> 赞同：1
> 
> 时间：2013-03-31T14:28:44.160
> 
> 标签：android

我正在尝试从我的 android 手机连接到我的服务器。但我收到超时连接错误。可能是什么原因？

注意：我已将我的 URL 链接更改为[http://google.com](http://google.com)并且它运行良好，所以请指教。

我的代码是

```
public static boolean bHasInternetAccess() 
    {  
        InputStream in=null;
        int response=-1;
        boolean bHasInternet=true;

        try
        {
            URL url=new URL("http://192.168.1.100/AWS.asmx/dtTickets?sTech_ID=-99");
            URLConnection conn= url.openConnection();
            if (!(conn instanceof HttpURLConnection))
            {
                bHasInternet=false;
            }
            HttpURLConnection httpConn=(HttpURLConnection)conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.setConnectTimeout(15000); 
            httpConn.connect();
            response=httpConn.getResponseCode();

            if (response==HttpURLConnection.HTTP_OK)
            {
                in=httpConn.getInputStream();
            }
        }
        catch (Exception ex)
        {
            bHasInternet=false;
        }
        if (in==null) {
            bHasInternet=false;
        }
        return bHasInternet;         
    } 
```

# c++ - 忽略范围的代码块断点

> ID：15730453
> 
> 赞同：0
> 
> 时间：2013-03-31T14:29:18.207
> 
> 标签：c++, debugging, gdb, codeblocks, breakpoints

我在检查自定义数据类型的某个值的条件语句中设置了一个断点。游戏会中断，但它中断的线完全超出了我的断点范围。观察变量显示它只是在第一次迭代循环时中断，使我的调试条件语句完全无用。

在 Visual Studio 中，调试器会尊重范围，并且在条件语句中放置断点只会在条件评估为真时停止游戏。为什么 CodeBlocks 中的 GDB 调试器不是这种情况？是因为我在 Windows 中使用 GDB 吗？这是代码：

```
for(int j = 0 ; j < r->components[i].size() ; j++)
    {
        itype_id type = r->components[i][j].type;
        int req = r->components[i][j].count;

        //DEBUGGING ONLY!!!!!!!!!
        if(type == itm_coffee_raw)
        {
            int pleaseStop = 0;
            if(pleaseStop == 0) //BREAKPOINT IS ON THIS LINE
                bool dontstoptillyougetenough = true;
        }

        if (itypes[type]->count_by_charges() && req > 0) //GAME BREAKS HERE
        {
            if (crafting_inv.has_charges(type, req))
            {
                has_comp = true;
                break;
            }
        }
        else if (crafting_inv.has_amount(type, abs(req)))
        {
            has_comp = true;
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:26:26.257

主体内的代码`if`实际上并没有做任何事情，因此编译器可以将其视为[“死代码”](http://en.wikipedia.org/wiki/Dead_code)并在优化过程中将其从可执行文件中[删除。](http://en.wikipedia.org/wiki/Dead_code_elimination)这意味着有问题的代码实际上并不存在于最终的可执行文件中，因此您不能在此处设置断点。

关闭优化（通常在调试时总是很好），它应该可以工作。

# ios - iOS - CoreData 或 Sqlite 套件我的应用程序？

> ID：15730466
> 
> 赞同：-1
> 
> 时间：2013-03-31T14:30:52.270
> 
> 标签：ios, sqlite, core-data, join, group-by

我的应用程序有 2 个实体（或表）。

`Category (id, name)`
`Item (id, name, amount, date, categoryId)`

我需要的是

```
SELECT categoryId, Category.name,
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 1, amount, 0)) AS jan
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 2, amount, 0)) AS feb
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 3, amount, 0)) AS mar
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 4, amount, 0)) AS apr
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 5, amount, 0)) AS may
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 6, amount, 0)) AS jun
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 7, amount, 0)) AS jul
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 8, amount, 0)) AS aug
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 9, amount, 0)) AS sep
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 10, amount, 0)) AS oct
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 11, amount, 0)) AS nov
    SUM(IF(MONTH(FROM_UNIXTIME(date)) = 12, amount, 0)) AS dec
FROM Item INNER JOIN Category ON Item.categoryId = Category.id
WHERE YEAR(FROM_UNIXTIME(date)) = 2012
GROUP BY categoryId 
```

**注意：上面的查询是用 MySQL 的方式编写的，我对 CoreData 和 Sqlite 完全陌生**

这种情况下，CoreData **VS** Sqlite，哪个更适合？

如何将上面的sql翻译成CoreData或Sqlite形式？

谢谢。

# 编辑

我可以混合两者吗？For `CRUD`is using **CoreData**，但是对于这样一个复杂的查询使用**Sqlite** *(FMDB library)*？

默认情况下，CoreData 创建了一个扩展名为**.sqlite**的文件。但是，在[FMDB github 指令](https://github.com/ccgus/fmdb#database-creation)中，这里的扩展名为**.db**。有关系吗？

数据库路径`[FMDatabase databaseWithPath:@"/tmp/tmp.db"];`和CoreData一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:37:55.647

CoreData 不是 SQL，它不接受 SQL 语句。因此，如果您真的很喜欢使用 SQL 查询，那么请使用 SQLite。

我个人会使用 CoreData 并在应用程序代码中进行处理，即使我非常熟悉 SQL。

CoreData 是一个“俯卧撑”，需要一些时间来学习它，我建议找一本好书（Marcus Zarra 刚刚出版了他的书的第二版）和/或一些视频。

# python - IPython 笔记本中的“另存为”

> ID：15730471
> 
> 赞同：5
> 
> 时间：2013-03-31T14:32:05.983
> 
> 标签：python, ipython, ipython-notebook

我想用不同的名称保存文件，并在 Ipython Notebook 中保留旧名称（即不重命名）的文件。

是否有标准的“另存为”功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:51:53.500

还没有，我们需要重构保存/重命名 API。

我会建议“打开副本”作为一种解决方法，其中副本将是“最旧的”笔记本。

# nlp - Wordnet 查找同义词

> ID：15730473
> 
> 赞同：12
> 
> 时间：2013-03-31T14:32:19.240
> 
> 标签：nlp, wordnet, synonym, jaws-wordnet

我正在寻找一种方法来使用 wordnet 查找特定单词的所有同义词。我正在使用 JAWS。

**例如：**

**爱（v）：**钦佩，崇拜，依恋，着迷，着迷，迷恋，着迷，着迷，喜欢，爱上，经典化，关心，珍惜，选择，神化，喜悦，宠爱，尊重，崇高，堕落，幻想，荣耀，追求，继续......

**爱（n）：** 同义词：崇拜，感情，忠诚，友好，多情，爱慕，欣赏，热情，热情，依恋，案例*，珍惜，迷恋，喜悦，忠诚，奉献，情感，魅力，享受，热情，忠诚，火焰, 喜爱, 友谊, 渴望, 偶像崇拜, 倾向, 痴情, 参与

在一个相关的[问题](https://stackoverflow.com/questions/13745631/trying-to-find-synonyms-using-wordnet-java-api)中，用户 Ram 指出了一些代码，但这还不够，因为它只是给出了截然不同的输出：

爱，激情：任何温暖的感情或奉献的对象 亲爱的，亲爱的，最亲爱的，亲爱的，爱：一个心爱的人；用作爱恋、性的爱、情色的爱：对性欲和吸引力的深切感觉 爱：网球或壁球中得分为零 性爱、做爱、做爱、爱、爱情生活：性活动（通常包括intercourse) 两个人之间的爱：非常喜爱或喜欢

那么我如何实现它并且 wordnet 是否适合我想要做的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T09:04:28.620

仅使用 WordNet，您*可以*尝试使用语义相似性来确定两个单词（同义词集）是否足够相似以成为同义词。下面是一个简单的例子，它来自[使用 WordNet 修改我关于语义相似性](https://stackoverflow.com/a/14638272/1988505)的另一个答案。

但它确实有它的问题：

*   反义词与同义词混在一起
*   它很**慢**！（因为它必须检查所有 ~117k 同义词集）

尽管如此，它比单独使用产生更多的同义词`lemma_names`，所以我把它留在这里以防它可能有用（可能与其他东西结合使用）。

```
>>> from nltk.corpus import wordnet as wn
>>> def syn(word, lch_threshold=2.26):
    for net1 in wn.synsets(word):
        for net2 in wn.all_synsets():
            try:
                lch = net1.lch_similarity(net2)
            except:
                continue
            # The value to compare the LCH to was found empirically.
            # (The value is very application dependent. Experiment!)
            if lch >= lch_threshold:
                yield (net1, net2, lch)

>>> for x in syn('love'):
    print x 
```

上面的代码输出：

```
(Synset('love.n.01'), Synset('feeling.n.01'), 2.538973871058276)
(Synset('love.n.01'), Synset('conditioned_emotional_response.n.01'), 2.538973871058276)
(Synset('love.n.01'), Synset('emotion.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('worship.n.02'), 2.9444389791664407)
(Synset('love.n.01'), Synset('anger.n.01'), 2.538973871058276)
(Synset('love.n.01'), Synset('fear.n.01'), 2.538973871058276)
(Synset('love.n.01'), Synset('fear.n.03'), 2.538973871058276)
(Synset('love.n.01'), Synset('anxiety.n.02'), 2.538973871058276)
(Synset('love.n.01'), Synset('joy.n.01'), 2.538973871058276)
(Synset('love.n.01'), Synset('love.n.01'), 3.6375861597263857)
(Synset('love.n.01'), Synset('agape.n.02'), 2.9444389791664407)
(Synset('love.n.01'), Synset('agape.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('filial_love.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('ardor.n.02'), 2.9444389791664407)
(Synset('love.n.01'), Synset('amorousness.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('puppy_love.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('devotion.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('benevolence.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('beneficence.n.01'), 2.538973871058276)
(Synset('love.n.01'), Synset('heartstrings.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('lovingness.n.01'), 2.9444389791664407)
(Synset('love.n.01'), Synset('warmheartedness.n.01'), 2.538973871058276)
(Synset('love.n.01'), Synset('loyalty.n.02'), 2.9444389791664407)
(Synset('love.n.01'), Synset('hate.n.01'), 2.538973871058276)
(Synset('love.n.01'), Synset('emotional_state.n.01'), 2.538973871058276)
(Synset('love.n.02'), Synset('content.n.05'), 2.538973871058276)
(Synset('love.n.02'), Synset('object.n.04'), 2.9444389791664407)
(Synset('love.n.02'), Synset('antipathy.n.02'), 2.538973871058276)
(Synset('love.n.02'), Synset('bugbear.n.02'), 2.538973871058276)
(Synset('love.n.02'), Synset('execration.n.03'), 2.538973871058276)
(Synset('love.n.02'), Synset('center.n.06'), 2.538973871058276)
(Synset('love.n.02'), Synset('hallucination.n.03'), 2.538973871058276)
(Synset('love.n.02'), Synset('infatuation.n.03'), 2.538973871058276)
(Synset('love.n.02'), Synset('love.n.02'), 3.6375861597263857)
(Synset('beloved.n.01'), Synset('person.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('lover.n.01'), 2.9444389791664407)
(Synset('beloved.n.01'), Synset('admirer.n.03'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('beloved.n.01'), 3.6375861597263857)
(Synset('beloved.n.01'), Synset('betrothed.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('boyfriend.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('darling.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('girlfriend.n.02'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('idolizer.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('inamorata.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('inamorato.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('kisser.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('necker.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('petter.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('romeo.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('soul_mate.n.01'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('squeeze.n.04'), 2.538973871058276)
(Synset('beloved.n.01'), Synset('sweetheart.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('desire.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('sexual_desire.n.01'), 2.9444389791664407)
(Synset('love.n.04'), Synset('love.n.04'), 3.6375861597263857)
(Synset('love.n.04'), Synset('aphrodisia.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('anaphrodisia.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('passion.n.05'), 2.538973871058276)
(Synset('love.n.04'), Synset('sensuality.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('amorousness.n.02'), 2.538973871058276)
(Synset('love.n.04'), Synset('fetish.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('libido.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('lecherousness.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('nymphomania.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('satyriasis.n.01'), 2.538973871058276)
(Synset('love.n.04'), Synset('the_hots.n.01'), 2.538973871058276)
(Synset('love.n.05'), Synset('bowling_score.n.01'), 2.538973871058276)
(Synset('love.n.05'), Synset('football_score.n.01'), 2.538973871058276)
(Synset('love.n.05'), Synset('baseball_score.n.01'), 2.538973871058276)
(Synset('love.n.05'), Synset('basketball_score.n.01'), 2.538973871058276)
(Synset('love.n.05'), Synset('number.n.02'), 2.538973871058276)
(Synset('love.n.05'), Synset('score.n.03'), 2.9444389791664407)
(Synset('love.n.05'), Synset('stroke.n.06'), 2.538973871058276)
(Synset('love.n.05'), Synset('birdie.n.01'), 2.538973871058276)
(Synset('love.n.05'), Synset('bogey.n.02'), 2.538973871058276)
(Synset('love.n.05'), Synset('deficit.n.03'), 2.538973871058276)
(Synset('love.n.05'), Synset('double-bogey.n.01'), 2.538973871058276)
(Synset('love.n.05'), Synset('duck.n.02'), 2.538973871058276)
(Synset('love.n.05'), Synset('eagle.n.02'), 2.538973871058276)
(Synset('love.n.05'), Synset('double_eagle.n.01'), 2.538973871058276)
(Synset('love.n.05'), Synset('game.n.06'), 2.538973871058276)
(Synset('love.n.05'), Synset('lead.n.07'), 2.538973871058276)
(Synset('love.n.05'), Synset('love.n.05'), 3.6375861597263857)
(Synset('love.n.05'), Synset('match.n.05'), 2.538973871058276)
(Synset('love.n.05'), Synset('par.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('bondage.n.03'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('outercourse.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('safe_sex.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('sexual_activity.n.01'), 2.9444389791664407)
(Synset('sexual_love.n.02'), Synset('conception.n.02'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('sexual_intercourse.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('pleasure.n.05'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('sexual_love.n.02'), 3.6375861597263857)
(Synset('sexual_love.n.02'), Synset('carnal_abuse.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('coupling.n.03'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('reproduction.n.05'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('foreplay.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('perversion.n.02'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('autoeroticism.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('promiscuity.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('lechery.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('homosexuality.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('bisexuality.n.02'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('heterosexuality.n.01'), 2.538973871058276)
(Synset('sexual_love.n.02'), Synset('bestiality.n.02'), 2.538973871058276)
# ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T07:33:26.410

首先我们要问“什么是同义词？”，“可以从表面/词根查询同义词吗？”。

在 WordNet 中，在这个术语下，您有表示相同概念的相似词，`Synset`而不是表面词级别。

要在示例的覆盖范围内获取同义词集的同义词，您需要的不仅仅是 wordnet，可能还需要一些语义相似性方法来提取其他词。

我不能给你一个 JAWS 解释我上面的意思，但是来自 Python 的 NLTK 接口中的 WordNet。您可以看到 WN 不足以满足您想要的覆盖范围。

```
from nltk.corpus import wordnet as wn
for ss in wn.synsets('love'): # Each synset represents a diff concept.
  print ss.definition
  print ss.lemma_names
  print 
```

**上面的代码输出：**

```
a strong positive emotion of regard and affection
['love']

any object of warm affection or devotion; 
['love', 'passion']

a beloved person; used as terms of endearment
['beloved', 'dear', 'dearest', 'honey', 'love']

a deep feeling of sexual desire and attraction
['love', 'sexual_love', 'erotic_love']

a score of zero in tennis or squash
['love']

sexual activities (often including sexual intercourse) between two people
['sexual_love', 'lovemaking', 'making_love', 'love', 'love_life']

have a great affection or liking for
['love']

get pleasure from
['love', 'enjoy']

be enamored or in love with
['love']

have sexual intercourse with
['sleep_together', 'roll_in_the_hay', 'love', 'make_out', 'make_love', 'sleep_with', 'get_laid', 'have_sex', 'know', 'do_it', 'be_intimate', 'have_intercourse', 'have_it_away', 'have_it_off', 'screw', 'fuck', 'jazz', 'eff', 'hump', 'lie_with', 'bed', 'have_a_go_at_it', 'bang', 'get_it_on', 'bonk'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-07T01:12:24.603

我查看了[RiWordNet (RiTa) 代码](https://github.com/dhowe/RiTa/blob/master/src/rita/RiWordNet.java)（参见`getAllSynonyms`方法），发现它通过为您提供所有**同义词**、下**义词**、**相似 tos**、**也看到**和**坐标名称**的引理来生成同义词。我没有包括*坐标名称*，但添加了*反义词*。此外，我在我的数据中添加了同义词集名称和“同义词类型”，以便我可以使用其他 Wordnet 数据，如[**定义**和/或**示例**](http://www.nltk.org/howto/wordnet.html#words)。这是我在 python 中的代码和输出：

```
'''Synonym generator using NLTK WordNet Interface: http://www.nltk.org/howto/wordnet.html
    'ss': synset
    'hyp': hyponym
    'sim': similar to
    'ant': antonym
    'also' also see

'''

from nltk.corpus import wordnet as wn

def get_all_synsets(word, pos=None):
    for ss in wn.synsets(word):
        for lemma in ss.lemma_names():
            yield (lemma, ss.name())

def get_all_hyponyms(word, pos=None):
    for ss in wn.synsets(word, pos=pos):
            for hyp in ss.hyponyms():
                for lemma in hyp.lemma_names():
                    yield (lemma, hyp.name())

def get_all_similar_tos(word, pos=None):
    for ss in wn.synsets(word):
            for sim in ss.similar_tos():
                for lemma in sim.lemma_names():
                    yield (lemma, sim.name())

def get_all_antonyms(word, pos=None):
    for ss in wn.synsets(word, pos=None):
        for sslema in ss.lemmas():
            for antlemma in sslema.antonyms():
                    yield (antlemma.name(), antlemma.synset().name())

def get_all_also_sees(word, pos=None):
        for ss in wn.synsets(word):
            for also in ss.also_sees():
                for lemma in also.lemma_names():
                    yield (lemma, also.name())

def get_all_synonyms(word, pos=None):
    for x in get_all_synsets(word, pos):
        yield (x[0], x[1], 'ss')
    for x in get_all_hyponyms(word, pos):
        yield (x[0], x[1], 'hyp')
    for x in get_all_similar_tos(word, pos):
        yield (x[0], x[1], 'sim')
    for x in get_all_antonyms(word, pos):
        yield (x[0], x[1], 'ant')
    for x in get_all_also_sees(word, pos):
        yield (x[0], x[1], 'also')

for x in get_all_synonyms('love'):
    print x 
```

**“爱”和“勇敢”的输出：**

**爱**

```
(u'love', u'love.n.01', 'ss')
(u'love', u'love.n.02', 'ss')
(u'passion', u'love.n.02', 'ss')
(u'beloved', u'beloved.n.01', 'ss')
(u'dear', u'beloved.n.01', 'ss')
(u'dearest', u'beloved.n.01', 'ss')
(u'honey', u'beloved.n.01', 'ss')
(u'love', u'beloved.n.01', 'ss')
(u'love', u'love.n.04', 'ss')
(u'sexual_love', u'love.n.04', 'ss')
(u'erotic_love', u'love.n.04', 'ss')
(u'love', u'love.n.05', 'ss')
(u'sexual_love', u'sexual_love.n.02', 'ss')
(u'lovemaking', u'sexual_love.n.02', 'ss')
(u'making_love', u'sexual_love.n.02', 'ss')
(u'love', u'sexual_love.n.02', 'ss')
(u'love_life', u'sexual_love.n.02', 'ss')
(u'love', u'love.v.01', 'ss')
(u'love', u'love.v.02', 'ss')
(u'enjoy', u'love.v.02', 'ss')
(u'love', u'love.v.03', 'ss')
(u'sleep_together', u'sleep_together.v.01', 'ss')
(u'roll_in_the_hay', u'sleep_together.v.01', 'ss')
(u'love', u'sleep_together.v.01', 'ss')
(u'make_out', u'sleep_together.v.01', 'ss')
(u'make_love', u'sleep_together.v.01', 'ss')
(u'sleep_with', u'sleep_together.v.01', 'ss')
(u'get_laid', u'sleep_together.v.01', 'ss')
(u'have_sex', u'sleep_together.v.01', 'ss')
(u'know', u'sleep_together.v.01', 'ss')
(u'do_it', u'sleep_together.v.01', 'ss')
(u'be_intimate', u'sleep_together.v.01', 'ss')
(u'have_intercourse', u'sleep_together.v.01', 'ss')
(u'have_it_away', u'sleep_together.v.01', 'ss')
(u'have_it_off', u'sleep_together.v.01', 'ss')
(u'screw', u'sleep_together.v.01', 'ss')
(u'fuck', u'sleep_together.v.01', 'ss')
(u'jazz', u'sleep_together.v.01', 'ss')
(u'eff', u'sleep_together.v.01', 'ss')
(u'hump', u'sleep_together.v.01', 'ss')
(u'lie_with', u'sleep_together.v.01', 'ss')
(u'bed', u'sleep_together.v.01', 'ss')
(u'have_a_go_at_it', u'sleep_together.v.01', 'ss')
(u'bang', u'sleep_together.v.01', 'ss')
(u'get_it_on', u'sleep_together.v.01', 'ss')
(u'bonk', u'sleep_together.v.01', 'ss')
(u'agape', u'agape.n.01', 'hyp')
(u'agape', u'agape.n.02', 'hyp')
(u'agape_love', u'agape.n.02', 'hyp')
(u'amorousness', u'amorousness.n.01', 'hyp')
(u'enamoredness', u'amorousness.n.01', 'hyp')
(u'ardor', u'ardor.n.02', 'hyp')
(u'ardour', u'ardor.n.02', 'hyp')
(u'benevolence', u'benevolence.n.01', 'hyp')
(u'devotion', u'devotion.n.01', 'hyp')
(u'devotedness', u'devotion.n.01', 'hyp')
(u'filial_love', u'filial_love.n.01', 'hyp')
(u'heartstrings', u'heartstrings.n.01', 'hyp')
(u'lovingness', u'lovingness.n.01', 'hyp')
(u'caring', u'lovingness.n.01', 'hyp')
(u'loyalty', u'loyalty.n.02', 'hyp')
(u'puppy_love', u'puppy_love.n.01', 'hyp')
(u'calf_love', u'puppy_love.n.01', 'hyp')
(u'crush', u'puppy_love.n.01', 'hyp')
(u'infatuation', u'puppy_love.n.01', 'hyp')
(u'worship', u'worship.n.02', 'hyp')
(u'adoration', u'worship.n.02', 'hyp')
(u'adore', u'adore.v.01', 'hyp')
(u'care_for', u'care_for.v.02', 'hyp')
(u'cherish', u'care_for.v.02', 'hyp')
(u'hold_dear', u'care_for.v.02', 'hyp')
(u'treasure', u'care_for.v.02', 'hyp')
(u'dote', u'dote.v.02', 'hyp')
(u'love', u'love.v.03', 'hyp')
(u'get_off', u'get_off.v.06', 'hyp')
(u'romance', u'romance.v.02', 'hyp')
(u'fornicate', u'fornicate.v.01', 'hyp')
(u'take', u'take.v.35', 'hyp')
(u'have', u'take.v.35', 'hyp')
(u'hate', u'hate.n.01', 'ant')
(u'hate', u'hate.v.01', 'ant') 
```

**勇敢的**

```
(u'brave', u'brave.n.01', 'ss')
(u'brave', u'brave.n.02', 'ss')
(u'weather', u'weather.v.01', 'ss')
(u'endure', u'weather.v.01', 'ss')
(u'brave', u'weather.v.01', 'ss')
(u'brave_out', u'weather.v.01', 'ss')
(u'brave', u'brave.a.01', 'ss')
(u'courageous', u'brave.a.01', 'ss')
(u'audacious', u'audacious.s.01', 'ss')
(u'brave', u'audacious.s.01', 'ss')
(u'dauntless', u'audacious.s.01', 'ss')
(u'fearless', u'audacious.s.01', 'ss')
(u'hardy', u'audacious.s.01', 'ss')
(u'intrepid', u'audacious.s.01', 'ss')
(u'unfearing', u'audacious.s.01', 'ss')
(u'brave', u'brave.s.03', 'ss')
(u'braw', u'brave.s.03', 'ss')
(u'gay', u'brave.s.03', 'ss')
(u'desperate', u'desperate.s.04', 'sim')
(u'heroic', u'desperate.s.04', 'sim')
(u'gallant', u'gallant.s.01', 'sim')
(u'game', u'game.s.02', 'sim')
(u'gamy', u'game.s.02', 'sim')
(u'gamey', u'game.s.02', 'sim')
(u'gritty', u'game.s.02', 'sim')
(u'mettlesome', u'game.s.02', 'sim')
(u'spirited', u'game.s.02', 'sim')
(u'spunky', u'game.s.02', 'sim')
(u'lionhearted', u'lionhearted.s.01', 'sim')
(u'stalwart', u'stalwart.s.03', 'sim')
(u'stouthearted', u'stalwart.s.03', 'sim')
(u'undaunted', u'undaunted.s.02', 'sim')
(u'valiant', u'valiant.s.01', 'sim')
(u'valorous', u'valiant.s.01', 'sim')
(u'bold', u'bold.a.01', 'sim')
(u'colorful', u'colorful.a.02', 'sim')
(u'colourful', u'colorful.a.02', 'sim')
(u'timid', u'timid.n.01', 'ant')
(u'cowardly', u'cowardly.a.01', 'ant')
(u'adventurous', u'adventurous.a.01', 'also')
(u'adventuresome', u'adventurous.a.01', 'also')
(u'bold', u'bold.a.01', 'also')
(u'resolute', u'resolute.a.01', 'also')
(u'unafraid', u'unafraid.a.01', 'also')
(u'fearless', u'unafraid.a.01', 'also') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-18T17:39:15.433

使用**RitaWN**代替**JAWS**怎么样？我看到它被列为[http://wordnet.princeton.edu/wordnet/related-projects/#Java](http://wordnet.princeton.edu/wordnet/related-projects/#Java)中的可用 API 之一， 我还看到它有`getAllSynonyms()`方法，他们提供了一个示例并且它有效。

看一下这个：

```
import java.io.IOException;
import java.util.Arrays;

import rita.*;

public class Synonyms {

public static void main(String[] args) throws IOException {

    // Would pass in a PApplet normally, but we don't need to here
    RiWordNet wordnet = new RiWordNet("C:\\Program Files (x86)\\WordNet\\2.1");

    // Get a random noun
    String word = "love";//wordnet.getRandomWord("n");
    // Get max 15 synonyms
    String[] synonyms = wordnet.getAllSynonyms(word, "v");

    System.out.println("Random noun: " + word);
    if (synonyms != null) {
        // Sort alphabetically
        Arrays.sort(synonyms);
        for (int i = 0; i < synonyms.length; i++) {
            System.out.println("Synonym " + i + ": " + synonyms[i]);
        }
    } else {
        System.out.println("No synyonyms!");
    }
} 
```

确保从[http://www.rednoise.org/rita/wordnet-old/documentation/index.htm获得最新的下载和文档](http://www.rednoise.org/rita/wordnet-old/documentation/index.htm)

# c++ - 当 chrome 是默认浏览器时，ShellExecute 不会在 Windows 8 上打开页面

> ID：15730479
> 
> 赞同：4
> 
> 时间：2013-03-31T14:32:40.660
> 
> 标签：c++, windows, google-chrome

我有一个提升的桌面应用程序，有时会打开错误网页。当 Chrome 被设置为默认浏览器时，我遇到的问题是在 Windows 8 上。它没有打开页面，运行非提升的进程工作正常......这是我打开页面的方式：

`ShellExecute( NULL, TEXT("open"),sPageURL,NULL, NULL, SW_SHOWNORMAL );`

其中 sPageURL 是页面的 url。

我还尝试打开一个提升的 CMD 并通过它打开一个网页，例如 google.com，如下所示：

`start http://www.google.com`

我得到了错误`"Class not registered"`。

克服这个问题的最佳替代方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:03:35.737

这可能是因为您在 Windows 8 的“应用”模式而不是“桌面”模式下运行 Google。

它甚至会使 google chrome 崩溃，因为文件资源管理器是在提升模式下打开的。（不知道为什么）。

最好的，

# c++ - 在向量问题中排列数据

> ID：15730484
> 
> 赞同：-1
> 
> 时间：2013-03-31T14:33:10.550
> 
> 标签：c++, vector

```
class CAnalizeTime {

private:

    vector<CService> m_vData( string m_strSellers );

    sort(m_vData.begin(), m_vData.end());

}; 
```

`CService`是我创建的另一个类，它包含字符串`m_strSellers`

我必须创建一个矢量并由卖家安排

我得到的错误是这个`syntax error : identifier 'm_vData'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:34:12.563

这一行：

```
vector<CService> m_vData( string m_strSellers ); 
```

声明成员变量是错误的尝试。只需这样做：

```
vector<CService> m_vData; 
```

另外，声明：

```
sort(m_vData.begin(), m_vData.end()); 
```

不能像那样粗暴地放入类定义中。这是一个必须是*函数一部分的**语句*。例如：

 *```
class CAnalizeTime {

    // ...

    void sort_my_vector() 
    { 
        sort(m_vData.begin(), m_vData.end()); 
    }

    vector<CService> m_vData;
}; 
```

我不确定您在原始类定义中要做什么，但是您绝对应该从那里删除该语句并将其放在适当的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:35:38.800

调用的行`sort`需要出现在函数内部（可能是类的成员函数）。它不能直接出现在类声明中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:46:17.413

您不能在类体内调用函数

```
sort(m_vData.begin(), m_vData.end()); 
```

所以你需要在函数体内移动那个代码。*

# java - 将按钮动态添加到linearView

> ID：15730486
> 
> 赞同：0
> 
> 时间：2013-03-31T14:33:41.047
> 
> 标签：java, android, button, android-linearlayout

我正在尝试编写一个动态添加按钮的应用程序。应用程序从服务器接收图像并添加按钮（暂时没有功能）。

主要活动保持线性布局，其中包含按钮和将接收图像并在主要活动中创建按钮的表面视图。

问题是在收到第一张图像后，应用程序在尝试向视图添加新按钮时崩溃。

这是表面视图代码：

```
public void run() {
        while ( isRunning){
            if ( !ourHolder.getSurface().isValid()){
                continue;
            }

            Canvas canvas = ourHolder.lockCanvas(); // Semafor for the canvas
            canvas.drawRGB(20,20,80);

            if (getNumOfBoards() > 0){
                canvas.drawBitmap(getCurrentBoard(), 0, 0, null);
            }

            ourHolder.unlockCanvasAndPost(canvas);
        }
    } 
```

这是主活动添加按钮代码

```
public void addButtons(int numOfButton) {
                // create patameter
                LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(
                   LinearLayout.LayoutParams.WRAP_CONTENT,
                   LinearLayout.LayoutParams.WRAP_CONTENT
                );

                // create new button
                Button newbutton = new Button(this);

                // set background color
                newbutton.setBackgroundColor(Color.BLUE);

                // set width and height
                newbutton.setWidth(30);
                newbutton.setHeight(20);

                // set position
                newbutton.setY((float)numOfButton*20);
                newbutton.setX(0);

                // set text
                newbutton.setText("new button");

                // add button to the layout
                buttons.addView(newbutton,p);// **the application crash here**
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:21:14.363

由于 android 处理活动的方式，`onCreate`不能保证每次`addButtons`执行该方法时都会调用构造函数（参见[`Activity Lifecycle Section`](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)developer.android.com）

你最好找到`buttons`LinearLayout

```
LinearLayout buttons = (LinearLayout) findViewById(R.id.LayoutButtons); 
```

并`addButtons`添加新按钮。

# html - 将文本放置在与图像相同的级别

> ID：15730492
> 
> 赞同：2
> 
> 时间：2013-03-31T14:34:24.850
> 
> 标签：html, css

我正在尝试将文本放置在图像的中间高度，但 margin-top 或 margin-bottom 无法按我的意愿工作。

对此有什么建议吗？

我创建了一个 JsFiddle 来展示这项工作 - [http://jsfiddle.net/HdW7Y/1/](http://jsfiddle.net/HdW7Y/1/)

如您所见，文本登录用户位于登录按钮下方。

HTML

```
<div id="topNav">
<ul>
<li class="topMenu-bg1 show_hide_contact">
<a href="#"></a>
</li>
<li class="topMenu-bg2 show_hide_login">
<a href="#" ><p class="icon2text">User Login</p></a>
</li>
</ul>
</div> 
```

CSS

```
#topNav li {
margin-top:5px;
padding-top:7px;
list-style:none;
float:left;
border-right:1px solid black;
}

.icon2text{ 
font-weight: bold;
font-size: 0.7em;
display: inline;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:39:23.467

您可以使用该`vertical-align`属性`.icon2text`并将其设置为顶部：

[http://jsfiddle.net/HdW7Y/2/](http://jsfiddle.net/HdW7Y/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:41:55.243

添加

.topMenu-bg2 show_hide_login{ valign:middle; }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T14:54:07.453

如果您将 p 标签替换为 span 并从 li 项目中删除顶部填充，并从 a 标签中删除顶部填充，则它们应该全部对齐。

# php - Prestashop 中的 PayPal 按钮不是可点击的链接

> ID：15730497
> 
> 赞同：0
> 
> 时间：2013-03-31T14:35:09.783
> 
> 标签：php, paypal, smarty, prestashop

我已经安装了 PayPal 模块并添加了所有 API 详细信息。它出现在页面上，但无法单击。为什么会这样？在源代码中查看的代码是这样的：

我觉得有点奇怪。像图像应该以某种方式链接到表单吗？

还在沙盒模式下尝试过，但也不起作用。

```
<div id="HOOK_SHOPPING_CART_EXTRA">
    <div id="container_express_checkout" style="float:right; margin: 10px 40px 0 0">
        <img id="payment_paypal_express_checkout" src="https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif" alt="" />
        <form id="paypal_payment_form" action="http://mydomain.com/store/modules/paypal/express_checkout/payment.php" data-ajax="false" title="Pay with PayPal" method="post" data-ajax="false">
            <!-- Change dynamicaly when the form is submitted -->
            <input type="hidden" name="quantity" value="1" />
            <input type="hidden" name="id_p_attr" value="" />
            <input type="hidden" name="express_checkout" value="cart"/>
            <input type="hidden" name="current_shop_url" value="http://mydomain.com/store/index.php?controller=order&multi-shipping=0" />
            <input type="hidden" name="bn" value="FR_PRESTASHOP_H3S" />
        </form>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:38:45.943

自己修好了。使按钮工作所需的代码缺少标题。如果以后有人发现这个页面，你需要的代码是：

```
$(document).ready( function() {

$('#payment_paypal_express_checkout').click(function() {
    $('#paypal_payment_form').submit();
    return false;
});

$('#paypal_payment_form').live('submit', function() {
    var nb = $('#quantity_wanted').val();
    var id = $('#idCombination').val();

    $('#paypal_payment_form input[name=quantity]').val(nb);
    $('#paypal_payment_form input[name=id_p_attr]').val(id);
});

function displayExpressCheckoutShortcut() {
    var id_product = $('input[name="id_product"]').val();
    var id_product_attribute = $('input[name="id_product_attribute"]').val();

    $.ajax({
        type: "GET",
        url: baseDir+'/modules/paypal/express_checkout/ajax.php',
        data: { get_qty: "1", id_product: id_product, id_product_attribute: id_product_attribute },
        cache: false,
        success: function(result) {
            if (result >= '1')
                $('#container_express_checkout').slideDown();
            else
                $('#container_express_checkout').slideUp();
            return true;
        }
    });
}

$('select[name^="group_"]').change(function () {
    displayExpressCheckoutShortcut();
});

$('.color_pick').click(function () {
    displayExpressCheckoutShortcut();
});

var modulePath = 'modules/paypal';
var subFolder = '/integral_evolution';
var fullPath = baseDir + modulePath + subFolder;
var confirmTimer = false;

if ($('form[target="hss_iframe"]').length == 0) {
    if ($('select[name^="group_"]').length > 0)
        displayExpressCheckoutShortcut();
    return false;
} else {
    checkOrder();
}

function checkOrder() {
    confirmTimer = setInterval(getOrdersCount, 1000);
}

    function getOrdersCount() {
    $.get(
        fullPath + '/confirm.php',
        { id_cart: '7' },
        function (data) {
            if ((typeof(data) != 'undefined') && (data > 0)) {
                clearInterval(confirmTimer);
                window.location.replace(fullPath + '/submit.php?id_cart=7');
                $('p.payment_module, p.cart_navigation').hide();
            }
        }
    );
}
}); 
```

# css - 如何布局透明的水印图像以及横幅图像和内容 div？

> ID：15730498
> 
> 赞同：0
> 
> 时间：2013-03-31T14:35:12.640
> 
> 标签：css, html

![水印](https://i.stack.imgur.com/nQ2Du.jpg)

我被要求创建一个包含此水印的布局。它必须以这样的方式放置，左点在左侧边栏 DIV 中，顶部对横幅图像透明，底部是内容 DIV 的背景图像。

[我在这里](http://jsfiddle.net/rUg55/)根据我的 jsFiddle 在 CSS 中尝试了绝对定位：

```
 <!doctype html>
 <div id="all">
 <div id=leftside>
 </div><!-- leftside -->
 <div id="banner">       
 </div> <!-- banner -->
 <div id="rightside">
 <div id="rightinner">
   <h3>My Account</h3>
   <input type="text" id="Login"/>
   <input name="Go" type="button" id="btnLogin" value="Go"/><br/>
 </div>
 <!-- rightinner -->
 </div><!-- rightside -->
 <div id="nav">
   <ul>
     <li><a href="#">menu item1</a></li>
     <li><a href="#">Strategy &amp; Performance</a></li>
     <li><a href="#">Documents</a></li>
     <li><a href="#">Research &amp; Insights</a></li>
     <li><a href="#">Contact</a></li>
   </ul>
  </div><!-- nav -->
  <div id="content">

  </div><!-- content -->
  <div id="footer">
   <div id="leftfooter">
     &copy; my copyright
   </div><!-- leftfooter -->
   <div id="rightfooter">
     <a href="#">Privacy Notice</a>
   </div><!
  </div>
<!-- footer -->
</div> 
<!-- all --> 
```

但是，绝对定位不允许我将水印的各个部分足够紧密地结合在一起。 ![此处的预期横幅图片](https://i.stack.imgur.com/87ceC.jpg) 这是一个示例切片，其中水印被切片为标题图像的一部分。

我附上了一个完整主页应该是什么样子的模型： ![小样](https://i.stack.imgur.com/II62a.jpg) 什么是最友好的 CSS 和响应式方法，以确保水印 DIV 在背景颜色的顶部是透明的，并且可以在左侧的横幅中看到侧边栏和内容 DIV？

更新 4/1：我在[这里](http://jsfiddle.net/rUg55/2/)修改了 CSS ，如下所示：

```
@charset "utf-8";
/* CSS Document */
body{
background-color: #003a63;
font-family: Calibri, Verdana, sans-serif;
font-size: 12pt;
width: 100%
}

html{
width:100%;
}

h3{
color: white;
}
#all {
width: 1024px;
}
#banner {
background-image: url(images/banner.png);
background-repeat: no-repeat;
height: 367px;
width: 815px;
position: absolute;
left: 232px;
top: 0px;
z-index: 999;
}

#watermarkCont{
background-color: #003a63;
width: 100%;
height: 100%;
position: absolute;
top: 0;
z-index: 25;
}

#watermark{
background-image: url(images/ghwatermark.png);
width: 576px;
height: 517px;
position: absolute;
left: 50%;
margin-left: -200px;
z-index: 25;
}
#content {
background-image: url(../images/bgcontent.png);
background-repeat: no-repeat;
height: 454px;
width: 827px;
position: absolute;
left: 228px;
top: 412px;
background-color: #FFF;
z-index: 1;
}
#leftside {
height: 895px;
width: 220px;
position: absolute;
z-index: 1;
}
#rightside {
background-color: light-gray;
height: 957px;
width: 211px;
position: absolute;
left: 1050px;
top: 0px;
z-index: -25;
}
#nav {
background-color: #c7940d;
list-style-type: none;
font: Calibri;
font-size: 12pt;
font-weight: bold;
position: absolute;
left: 231px;
top: 368px;
width: 822px;
height: 42px;
margin: 0;
padding: 0;
z-index: 999;
}
#nav ul{
margin:0;
padding:0;
}

#nav ul li{
display: inline;
font-weight: bold;
color: #FFF;
}
#rightinner {
background-color: #003a63;
height: 130px;
width: 220px;
padding: 1px 1px 1px 1px;
}
#footer {
height: 105px;
wiedth: 833px;
position: absolute;
left: 227px;
top: 864px;
width: 825px;
color: #003a63;
background-image: url(images/footerbg.png);
}
#rightfooter {
float: right;
}
#leftfooter {
float: left;
width: 225px;
} 
```

这更接近我的需要。但是，我不确定如何调整相关元素的 z-index 值以使其看起来像样机。谁能提供一些建议值？我的理解是 z-index 值越高，图像在“堆栈”中的位置就越高。那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:37:47.303

这是我的建议：

给你的 body 和 html 设置 100% 的宽度。制作一个新的 Div，它被称为水印容器之类的东西，并给它一个 100% 的宽度，绝对位置。在该 div 中，创建另一个称为 watermark 并给它一个绝对位置，但是你可以给它一个 left:50% 然后一个负的左边距来将它放置在你想要的确切位置。

这将确保无论屏幕大小如何，水印始终放置在正确的位置。

这是代码：

```
body, html {
    width:100%;
}

#watermarkCont {
    width:100%;
    height:100%; //or if you want to just make this a px amount, it might not take 100% height
    position:absolute;
    top:0;
} 

#watermark {
    background-image:url("/*image*/");
    width: /*whatever the image width is*/;
    height: /*whatever the image height is*/;
    position:absolute;
    left:50%;
    margin-left:-200px;
} 
```

这种方法通常用于居中绝对定位的元素。负左边距通常是元素宽度的一半，但在这种情况下，您将向左推得更多，因此如果需要，请将其设置为更大的负数。

放置后，为每个元素提供正确的 z-index，您的大水印应该能够放置在适当的位置，而无需切割。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-02T18:31:18.283

```
background-image: url(/Content/Images/logo.png);
background-repeat: no-repeat;
height: 560px;/* height of page */
background-position: 50% 50%;
background-size: 300px 300px; /* width height of Image */
padding: 16px; /* as per need */ 
```

# soundcloud - Soundcloud：Stratus 播放器继续跨页播放？

> ID：15730499
> 
> 赞同：4
> 
> 时间：2013-03-31T14:35:29.433
> 
> 标签：soundcloud

我很困惑SoundCloud的Stratus播放器是否可以在页面之间连续播放，或者至少可以拾取它所在的轨道。

SoundCloud 对 STratus 播放器的描述如下......“你们中的一些人告诉我们，唯一缺少的 SoundCloud 播放器是一个会漂浮在网站顶部或底部**并在您切换页面时继续播放的播放器，我们觉得我们已经用我们的 Stratus 播放器解决了这个问题！”** ( [http://soundcloud.com/101/stratus](http://soundcloud.com/101/stratus) )

但是在 Stratus2 页面上，它显示“即使页面重新加载，我也可以继续播放 Stratus 吗？目前不行。” ( [http://stratus.sc/](http://stratus.sc/) )

有什么方法可以让 SoundCloud 在页面之间连续播放，或者至少拾取它所在的轨道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T08:52:38.533

看起来您可以使用[HTML5 History API](http://diveintohtml5.info/history.html)来实现这一点。

> HTML5 历史 API 是一种通过脚本操作浏览器历史的标准化方法。这个 API 的一部分——浏览历史——在以前的 HTML 版本中已经可用。HTML5 中的新部分包括向浏览器历史记录添加条目的方法，在浏览器位置栏中明显更改 URL（不触发页面刷新），以及当用户从堆栈中删除这些条目时触发的事件按浏览器的后退按钮。这意味着浏览器位置栏中的 URL 可以继续作为当前资源的唯一标识符发挥其作用，即使在从不执行完整页面刷新的脚本繁重的应用程序中也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:53:35.187

> 即使页面重新加载，我也可以继续播放 Stratus 吗？
> 
> 不是现在。您的网站需要构建，以便它不会重新加载而不是播放器。但是，我们确实提供了一个弹出功能，用户可以在浏览您的网站时单击以欣赏您的音乐。

我猜关于更改页面的行是指弹出播放器和浏览网站的可能性。[您还可以使用pjax 之](https://github.com/defunkt/jquery-pjax)类的东西构建您的网站，然后将 Stratus 保留在“页脚”中，这样​​导航您的网站只会更新内容。

我希望这有帮助。

# maven - 即使我是我网络中唯一的开发人员，我是否仍应使用 Nexus Repository Manager？

> ID：15730507
> 
> 赞同：0
> 
> 时间：2013-03-31T14:36:01.507
> 
> 标签：maven, jar, repository, dependency-management, nexus

我最近想将 Nexus 集成到我的家庭 Java 项目中，只是为了了解它有什么用处。正如我从这里的帖子和 nexus 网站上读到的，它的主要使用目的是：

*   Maven Central Repo 拥有超过 200k 的工件。获取工件的本地副本。不要在每次需要时下载。当您指定一个工件时，首先会询问它是否有工件，如果是，它将从您的本地缓存中读取。如果不是，nexus 将从中央存储库下载它。无论 Central Repo 中的原始工件如何，您的构建都将继续工作。加快构建速度等。

现在我在这里不明白的是：它与maven不一样吗？当我第一次在 pom.xml 中定义一个新工件时，该 jar 将从中央仓库下载。它将被放置在 ~/.m2/repository 中。下次只要有副本就会从这里读取。即使我创建了一个新项目，下载的 jar 也会从此存储库中使用。

我想，如果我的网络中有另一个开发人员也需要这些 jar，我会需要 Nexus。所以我们不需要从中央单独下载这些 jar。我们将定义一个基于网络的 repo (Nexus)，并将 jars 下载到这个存储库。其他开发人员无需访问中央存储库即可访问此存储库。

就我而言，我看不到 nexus 的任何优势。我现在有了 Nexus 建议使用的 settings.xml：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <localRepository/>
  <interactiveMode/>
  <usePluginRegistry/>
  <offline/>
  <pluginGroups/>
  <servers/>
    <mirrors>
    <mirror>
      <!--This sends everything else to /public -->
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://localhost:8081/nexus/content/groups/public</url>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>nexus</id>
      <!--Enable snapshots for the built in central repo to direct -->
      <!--all requests to nexus via the mirror -->
      <repositories>
        <repository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
     <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  <activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
  <proxies/>
</settings> 
```

我在 /.m2/repository/ 目录中的 jars 与 .m2/repository/ 目录中的 jars 完全相同`http://localhost:8081/nexus/content/groups/public/`。就我而言，Nexus 的优势是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:44:51.767

有几个优点：

1.  当您开始一个新项目时，例如从头开始构建一个开源项目，下载速度会更快。
2.  如果 Maven Central 曾经离线或响应缓慢，它不会对您造成严重影响。Nexus 缓存会缓冲你。
3.  您可以设置自己的托管存储库并“真正”部署快照版本（在版本名称中包含时间戳） - 而不仅仅是在 .m2 缓存中使用 -SNAPSHOT
4.  这是了解真正的 Maven 存储库如何工作的好方法，这是大型组织内部的一项重要技能（您不想通过在生产 Nexus 存储库上反复试验来学习）。

**编辑**

请参阅：[Sonatype：为什么使用存储库？](http://www.sonatype.com/Products/Nexus-Professional/Why-Use-a-Repository)

# c# - 设计问题：静态类只初始化一次，破坏单元测试

> ID：15730509
> 
> 赞同：6
> 
> 时间：2013-03-31T14:36:22.580
> 
> 标签：c#, unit-testing, nunit, static-constructor

我有一个静态`Configuration`类负责我的整个系统的数据设置。它在其构造函数中从注册表加载某些值，并且它的所有方法都基于这些值。如果它无法从注册表中获取值（如果尚未激活应用程序则可能），它会抛出一个异常，转换为 a `TypeInitializationException`，这对我来说很好。

我使用 NUnit 编写了单元测试，以确保 Configuration 的构造函数正确处理所有情况 - 正常值、空白值、Null 值。每个测试都使用相关值初始化注册表，然后调用 Configuration 中的一些方法。这就是问题所在：NUnit 决定首先运行 Null 测试。它清除注册表，初始化配置，抛出异常 - 一切都很好。但是，因为这是一个静态类，其构造函数刚刚失败 - 它不会为其他测试再次重新构造该类，并且它们都失败了。

即使没有 Null 测试，我也会遇到问题，因为 Configuration 可能（我猜）为所有使用它的类初始化一次。

我的问题是：我应该使用反射来为每个测试重新构建类，还是应该重新设计这个类来检查属性而不是构造函数中的注册表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T14:48:00.030

我的建议是重新设计你的`Configuration`课程。因为你的问题本质上是理论上的，有一点实际的方面（单元测试失败），我会提供一些链接来支持我的想法。

首先，创建`Configuration`一个非静态类。谷歌工程师 Miško Hevery 就面向可测试性[的 OO 设计做](http://www.youtube.com/watch?v=acjvKJiOvXw)了一个非常好的演讲，他特别提到全局状态是一个糟糕的设计选择，特别是如果你想测试它。

您的配置可以通过构造函数接受`RegistryProvider`实例（我假设您听说过依赖注入原则）。`RegistryProvider`责任只是从注册表中读取值，这是它应该做的唯一事情。现在，当您测试时`Configuration`，您将提供`RegistryProvider stub`（如果您不知道存根和模拟是什么 - 谷歌它，它们本质上很简单），您将在其中硬编码特定注册表项的值。

现在，好处：

*   你很好`unit tests`，因为你不依赖注册表
*   你没有全局状态（可测试性）
*   您的测试不相互依赖（每个都有单独的`Configuration`实例）
*   您的测试不依赖于执行它们的环境（您可能没有访问注册表的权限，但您仍然可以测试您的`Configuration`课程）

如果你觉得你不太擅长依赖注入，我会推荐一个了不起的艺术和工程，由马克西曼的天才提供给凡人的灵魂，称为[.NET 中的依赖注入](https://rads.stackoverflow.com/amzn/click/com/1935182501)。我读过的关于类设计的最好的书之一，它面向 .NET 开发人员。

为了让我的回答更具体：

> 我应该使用反射来为每个测试重新构建类吗？

不，你不应该在你的测试中使用反射（只有在没有其他情况的情况下）。反思将使您进行测试：

*   脆弱的
*   很难理解
*   难以维护

使用面向对象的实践结合封装实现隐藏实现。然后只测试外部行为，不要依赖内部实现细节。这将使您的测试仅依赖于外部行为而不依赖于内部实现，这可能会发生很大变化。

> 我应该重新设计这个类来检查属性而不是构造函数中的注册表吗？

如我的回答中所述设计您的课程将使您能够测试您的课程而不访问注册表。这是单元测试的基石——不要依赖外部系统（数据库、文件系统、Web、*注册表*等）。如果您想测试是否**可以**访问注册表 - 编写单独的集成测试，您将在其中写入注册表并从中读取。

现在我没有足够的信息来告诉你是应该通过构造函数读取注册表`RegistryProvider`，`Configuration`还是按需懒惰地读取注册表，这是一个棘手的问题。但我绝对可以说 - 尽量避免全局状态，尽量减少对测试中实现细节的依赖（这与整个 OO 原则有关）并尝试单独测试对象，即不访问外部系统。然后你可以模仿特殊情况，例如当注册表不可用时，你的类行为是否符合预期？如果您通过类的静态成员直接访问注册表，则很难重新创建这样的场景`Configuration`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:48:39.687

众所周知，静态类/方法很难进行单元测试。
（还请注意，您当前所做的根本不是*单元*测试；它是*集成*测试（您正在更改测试的注册表值）。）

恐怕你必须在你的类是可测试的还是静态的之间做出选择。

您可以做出的妥协是将“逻辑”位（即验证等）移动到不同的非静态类，该类将由主静态类调用。
然后可以轻松测试该非静态类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T14:39:48.390

我会选择重新设计。如果出现任何问题，也有一个 TypeInitializationException 可能会使用户/开发人员感到困惑。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-31T14:41:14.350

我建议调整您的代码以使用单例模式作为第一步。

# java - 睡眠线程何时继续在 Java 中执行？

> ID：15730514
> 
> 赞同：3
> 
> 时间：2013-03-31T14:36:53.840
> 
> 标签：java, multithreading, concurrency

假设我有 2 个线程 a 和 b 在同一个进程中运行。处理器从 a 运行一些指令，从 b 运行一些指令，依此类推，直到它到达这样的代码行：Thread.sleep(1000)。

问题是我真的不明白处理器接下来会做什么。我怀疑这两个场景：

1)

*   线程 a 开始休眠 1000 毫秒
*   同时 b 正在运行
*   1000 毫秒的间隔结束了，所以：
    *   如果处理器仍然从线程 b 运行代码
        *   然后等到它完成
        *   并从 Thread a 运行更多代码
    *   别的
        *   从 Thread a 运行更多代码

2)

*   线程 a 开始休眠 1000 毫秒
*   同时 b 正在运行
*   1000 毫秒的间隔结束了，所以：

    *   如果处理器仍然从线程 b 运行代码

        *   停止线程 B. 因为线程 a 具有更高的优先级，并且它的代码必须在 1000 毫秒间隔后立即运行它完成
        *   并从 Thread a 运行更多代码
        *   然后从我们离开的地方运行线程 B 的代码。
    *   别的
        *   从 Thread a 运行更多代码

哪一个类似于幕后实际发生的事情？如果两者都错了，请告诉我正确的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T14:49:53.553

很多因素都会发挥作用，因此很难为您的问题提供绝对答案。

但根据您提供的可用选项，**#2**将是最接近的。

> 如果发生以下事件之一，则会调用不同的线程来运行：
> 
> ....比当前运行的
> 线程具有**更高优先级的线程进入***Runnable*状态。低优先级线程被抢占，高优先级线程被调度运行。

这是[来源](http://lass.cs.umass.edu/~shenoy/courses/fall01/labs/talab2.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T14:42:01.040

调度线程和进程的是操作系统，而不是处理器。它是如何工作的取决于[操作系统调度程序](http://en.wikipedia.org/wiki/Scheduling_%28computing%29)，并且它因操作系统而异。

即使 JVM 确实有线程调度程序，[其行为最终也不取决于 JVM，而是取决于底层 OS 调度程序](https://stackoverflow.com/questions/13229621/are-threads-in-java-platform-dependent)。

请参阅[此处](http://www.ibm.com/developerworks/linux/library/l-scheduler/)了解 2.6 Linux 调度程序的工作原理。

# iphone - 更新 iOS 应用程序时是否会调用 applicationdidFinishLaunchingWithOption ？

> ID：15730518
> 
> 赞同：-2
> 
> 时间：2013-03-31T14:37:11.113
> 
> 标签：iphone, ios, ios5

`applicationdidFinishLaunchingWithOption`更新 iOS 应用程序时会调用它。我正在更新我的 coredata 模型的结构，并希望在升级过程中清除所有数据，并在`didFinishLaunchingApplication`方法中为其编写了逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:44:50.327

是的，但只是在每次应用启动时都会调用它，包括应用升级后的首次启动。（您可能指的是较旧的方法，`-applicationDidFinishLaunching:`在 iOS 3.0 及更高版本中已弃用；带有选项的方法是所有情况下的主要方法）

如果您想实际检测升级条件，您需要将“面包屑”数据留给自己的某个地方（例如，在用户默认值中），指示上次启动的版本（并检查它是否不同），或者像数据这样复杂的东西迁移，您可以存储一个指示“数据当前以新格式存在”的标志，您可以在新安装（如果没有数据）或迁移后升级时设置该标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:45:02.173

每次启动时都会调用它（而不是从后台重新打开时）。更新不必对此做任何事情

# asp.net - ASP.NET/VB.NET/SQL Server 2012 - 页面不断加载

> ID：15730519
> 
> 赞同：1
> 
> 时间：2013-03-31T14:37:17.307
> 
> 标签：asp.net, sql-server, vb.net

我正在尝试运行此代码，每当我按下“注册”按钮时，什么都没有发生（页面就像加载但停留在同一页面上）

代码：

```
 Public Sub register()

    Dim Username As String = txtUsername.Text
    Dim Surname As String = txtSurname.Text
    Dim Password As String = txtPassword.Text
    Dim Name As String = txtName.Text
    Dim Address1 As String = txtAddress1.Text
    Dim Address2 As String = txtAddress2.Text
    Dim City As String = txtCity.Text
    Dim Email As String = txtEmail.Text
    Dim Country As String = drpCountry.Text
    Dim DOB As Date = calDOB.SelectedDate
    Dim Occupation As String = txtOccupation.Text
    Dim WorkLocation As String = txtWorkLocation.Text
    Dim Age As Integer = Date.Today.Year - calDOB.SelectedDate.Year

    Dim ProjectManager As String = "N/A"
    Dim TeamLeader As String = "N/A"
    Dim TeamLeaderID As Integer = "1"
    Dim ProjectManagerID As Integer = "1"

    Dim RegistrationDate As Date = DateTime.Today
    Dim ContractType As String = "N/A"
    Dim ContractDuration As Integer = 6
    Dim Department As String = "N/A"

    Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
    Dim registerSQL As SqlCommand
    Dim sqlComm As String

    Dim validateSQL As SqlCommand

    Dim sqlValidate As String

    sqlValidate = "SELECT * FROM users  where username=" + txtUsername.Text.ToString

    sqlComm = "INSERT INTO users(Username, Password, Name, Surname, Address1, Address2, " +
        "City, Country, date_of_birth, age, Occupation, department, work_location, " +
        "project_manager,team_leader, team_leader_id, project_manager_id, " +
        "date_registration, contract_type, contract_duration) " +
        "VALUES(@p1, @p2,@p3,@p4,@p5,@p6,@p7,@p8,@p9,@p10,@p11,@p12,@p13,@p14,@p15," +
        "@p16,@p17,@p18,@p19,@p20)"

    conn.Open()

    validateSQL = New SqlCommand(sqlValidate, conn)
    Dim dr As SqlDataReader = validateSQL.ExecuteReader()

    If dr.HasRows = False Then

        validateSQL = New SqlCommand(sqlValidate, conn)
        validateSQL.CommandText = sqlValidate

        Dim reader As SqlDataReader = validateSQL.ExecuteReader()
        reader.Read()

        registerSQL = New SqlCommand(sqlComm, conn)
        registerSQL.Parameters.AddWithValue("@p1", Username)
        registerSQL.Parameters.AddWithValue("@p2", Password)
        registerSQL.Parameters.AddWithValue("@p3", Name)
        registerSQL.Parameters.AddWithValue("@p4", Surname)
        registerSQL.Parameters.AddWithValue("@p5", Address1)
        registerSQL.Parameters.AddWithValue("@p6", Address2)
        registerSQL.Parameters.AddWithValue("@p7", City)
        registerSQL.Parameters.AddWithValue("@p8", Country)
        registerSQL.Parameters.AddWithValue("@p9", DOB)
        registerSQL.Parameters.AddWithValue("@p10", Age)
        registerSQL.Parameters.AddWithValue("@p11", Occupation)
        registerSQL.Parameters.AddWithValue("@p12", Department)
        registerSQL.Parameters.AddWithValue("@p13", WorkLocation)
        registerSQL.Parameters.AddWithValue("@p14", ProjectManager)
        registerSQL.Parameters.AddWithValue("@p15", TeamLeader)
        registerSQL.Parameters.AddWithValue("@p16", TeamLeaderID)
        registerSQL.Parameters.AddWithValue("@p17", ProjectManagerID)
        registerSQL.Parameters.AddWithValue("@p18", RegistrationDate)
        registerSQL.Parameters.AddWithValue("@p19", ContractType)
        registerSQL.Parameters.AddWithValue("@p20", ContractDuration)

        registerSQL.ExecuteNonQuery()

        conn.Close()

    ElseIf dr.HasRows = True Then

        lblUsername.Text = "That Username (" + txtUsername.Text + ") is already registered/taken."
        lblUsername.Visible = True
        conn.Close()

    End If

End Sub 
```

按钮事件处理程序：

```
Protected Sub btnRegister_Click(sender As Object, e As EventArgs) Handles btnRegister.Click

    register()

End Sub 
```

代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:50:37.113

[来自 MSDN](http://msdn.microsoft.com/en-us/library/w9y9ttex.aspx)

> 在使用 SqlDataReader 时，关联的 SqlConnection 正忙于为 SqlDataReader 提供服务，除了关闭 SqlConnection 之外，无法对 SqlConnection 执行其他操作。在调用 SqlDataReader 的 Close 方法之前就是这种情况。例如，在调用 Close 之前，您无法检索输出参数。

当您尝试执行插入命令时，您似乎打开了 SqlDataReader。
我会在使用插入命令之前尝试关闭它

```
If dr.HasRows = False Then
    dr.Close()

    ' The following lines are probably a remainder of a copy/paste operation'
    ' They are not needed and you should remove them'

    'validateSQL = New SqlCommand(sqlValidate, conn)'
    'validateSQL.CommandText = sqlValidate'
    'Dim reader As SqlDataReader = validateSQL.ExecuteReader()'
    'reader.Read()'

    ' Now execute the insert command 
```

此外，除了性能参数之外，您检查用户存在的命令也是错误的，因为它引入了 Sql Injection 可能性。

总结尝试这些变化......

```
 sqlValidate = "SELECT * FROM users  where username=@uname"
 validateSQL = New SqlCommand(sqlValidate, conn)
 validateSQL.Parameters.AddWithValue("@uname", txtUserName.Text)
 Dim dr As SqlDataReader = validateSQL.ExecuteReader()
 Dim userFound = dr.HasRows
 dr.Close()
 if userFound = False then
    ...... 
```

# objective-c - 无法将图像从集合视图控制器发送到详细视图控制器

> ID：15730521
> 
> 赞同：0
> 
> 时间：2013-03-31T14:37:44.310
> 
> 标签：objective-c, ios6, uicollectionview

我拥有的是一组文件名。这是我用来填充集合视图单元格的代码。

```
 -(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView     cellForItemAtIndexPath:(NSIndexPath *)indexPath {

CollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ReuseID" forIndexPath:indexPath];

NSString *dataPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/DrawnImage"];
NSArray *contentOfDirectory = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:dataPath error:NULL];

NSString *fileName = [contentOfDirectory objectAtIndex:indexPath.item];
NSString *path = [dataPath stringByAppendingPathComponent:fileName];

UIImage *image = [UIImage imageWithContentsOfFile:path];
UIImageView *cellImageView =  cell.collectionImageView;
cellImageView.image = image;   

return cell; 
```

}

图像在单元格中正确显示。我想要做什么，当我单击一个单元格时，该单元格中的图片必须在详细视图控制器中全屏显示。

我试过这个。

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"showDetail"])
{
    NSIndexPath *selectedIndexPath = [[self.collectionView indexPathsForSelectedItems] objectAtIndex:0];
            NSString *dataPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/DrawnImage"];
    NSArray *contentOfDirectory = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:dataPath error:NULL];
    NSString *fileName = [contentOfDirectory objectAtIndex:selectedIndexPath.item];
    NSString *pathToImage = [dataPath stringByAppendingPathComponent:fileName];
    UIImage *image = [[UIImage alloc] initWithContentsOfFile:pathToImage];
    UIImageView *backgroundImageView = [[UIImageView alloc] initWithImage:image];
    DetailViewController *dvc = [segue destinationViewController];
    dvc.finalImage = sender;
    NSLog(@"%@", backgroundImageView);

} 
```

}

finalImage 是 Detail View Controller 中的 UIImageView。单击其中一个单元格时出现运行时错误。我究竟做错了什么 ？

**编辑**

这是我现在拥有的代码。

集合视图控制器.h

```
@property (nonatomic, retain) UIImage *sendImage; 
```

集合视图控制器.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"showDetail"])
{
    NSIndexPath *selectedIndexPath = [[self.collectionView indexPathsForSelectedItems] objectAtIndex:0];
            NSString *dataPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/DrawnImage"];
    NSArray *contentOfDirectory = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:dataPath error:NULL];
    NSString *fileName = [contentOfDirectory objectAtIndex:selectedIndexPath.item];
    NSString *pathToImage = [dataPath stringByAppendingPathComponent:fileName];
    UIImage *image = [[UIImage alloc] initWithContentsOfFile:pathToImage];
    DetailViewController *dvc = [segue destinationViewController];
    dvc.passedInImage = image;
    image = dvc.passedInImage;
}
} 
```

DetailViewController.h

```
@property (weak, nonatomic) IBOutlet UIImageView *finalImage;
@property UIImage *passedInImage; 
```

细节视图控制器.m

```
-(void)viewDidAppear:(BOOL)animated {

self.finalImage.image = passedInImage;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:35:43.017

你做错了几件事。首先，prepareForSegue 方法中的 sender 将是您单击的 UICollectionViewCell，并且您正在尝试将其分配给 UIImage 视图。那是做不到的。然而，即使发送者是一个 imageView，这也不是你想要做的。在 prepareForSegue 执行的时候，细节控制器的视图还没有被加载，所以你不能访问它的任何出口。你应该做的是在细节控制器中创建一个 UIImage 属性，我们称之为 *passedInImage 。在 prepareForSegue 中，将图像分配给属性：

```
dvc.passedInImage = image; 
```

然后，在dvc中，大概是在viewDidAppear中，设置finalImage的图片为passedInImage。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:55:28.530

代码看起来不错，除了`dvc.finalImage = sender;`

这从您正在设置图像属性的 var 名称来看，但 sender 可能是一个集合视图单元格。你想`backgroundImageView`改用吗？

# erlang - Erlang 生成一个带参数的主管

> ID：15730527
> 
> 赞同：0
> 
> 时间：2013-03-31T14:38:03.437
> 
> 标签：erlang, erlang-supervisor

我有一个这样创建的服务器：

gateway.erl（主管的主管）-> gateway_sup.erl（gen_servers 的主管）-> gateway_serv.erl（处理每个客户端的地方）。

正如我在互联网上看到的那样，这是非常基本的，大多数人都是这样做的。

监听套接字是在 gateway_sup.erl 上创建的，我想监听多个套接字以防某些客户端端口限制。

所以这是我到目前为止的代码。

**网关.erl**

```
-export([start_link/0, init/1, startWithPort/1]). 

start_link() ->
    supervisor:start_link({local, ?MODULE}, ?MODULE, []).

init([]) ->
    spawn_link(?MODULE, startWithPort, [8080]),
    spawn_link(?MODULE, startWithPort, [443]),
    {ok, {{simple_one_for_one, 3600, 3600},
         [{socket,
          {gateway_sup, start_link, []},
          permanent, 1000, supervisor, [gateway_sup]}
         ]}}.

startWithPort(Port) ->
    io:fwrite("Starting...: ~p~n", [Port]),
    supervisor:start_child(?MODULE, [Port]). 
```

**gateway_sup.erl**

```
-export([start_socket/0, init/1, start_link/1]).

    start_link(Port) ->
        io:fwrite("gateway_sup start_link Port: ~p // ~p~n", [list_to_atom(atom_to_list(?MODULE) ++ atom_to_list(Port)), Port])
        supervisor:start_link({local, list_to_atom(atom_to_list(?MODULE) ++ atom_to_list(Port))}, ?MODULE, [Port]).

    init([Port]) ->
        io:fwrite("gateway_sup Init with port: ~p~n", [Port]),
        R = ssl:listen(Port, ?SSL_OPTIONS),
        {ok, LSocket} = R,
        spawn_link(fun empty_listeners/0),
        {ok, {{simple_one_for_one, 3600, 3600},
             [{socket,
               {gateway_serv, start_link, [LSocket]},
               temporary, 1000, worker, [gateway_serv]}
             ]}}.

    empty_listeners() ->
        [start_socket() || _ <- lists:seq(1,128)],
        ok.

    start_socket() ->
        supervisor:start_child(?MODULE, []). 
```

gateway_sup.erl 上的 start_link() 函数永远不会被调用。如果网关是 one_for_one 并且我没有尝试传递参数，那么一切正常，但我只监听一个硬编码端口。

我不明白为什么它不会调用 gateway_sup:start_link/1 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:19:38.877

好的，找到了！因为这样的小错误花了我一个晚上！

错误是当我在 start_link 中创建角色时

```
list_to_atom(atom_to_list(?MODULE) ++ atom_to_list(Port)) 
```

已被替换为

```
list_to_atom(atom_to_list(?MODULE) ++ lists:flatten(io_lib:format("~B", [Port]))) 
```

# emacs - 绑定 换行和缩进，但也用于小缓冲区？

> ID：15730529
> 
> 赞同：0
> 
> 时间：2013-03-31T14:38:22.313
> 
> 标签：emacs

我可以将 (Enter) 绑定到换行和缩进，但也可以让它在 minibuffer 中照常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:36:09.350

执行此操作的典型方法是将其绑定到`newline-and-indent`您使用的主要模式，并保留默认绑定。

您可以将其绑定在主要模式*挂钩*中或使用`eval-after-load`.

# .net - Rx 框架中的内容允许我返回一个 IObservable 在创建过程中等待其他方法？

> ID：15730531
> 
> 赞同：6
> 
> 时间：2013-03-31T14:38:26.203
> 
> 标签：.net, task-parallel-library, .net-4.5, system.reactive, c#-5.0

我一直致力于使用[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx) for [Twitter's streaming APIs](https://dev.twitter.com/docs/streaming-apis)[`IObservable<T>`](http://msdn.microsoft.com/en-us/library/dd990377.aspx)创建一个实现。

从较高级别发送 HTTP 请求并保持连接打开。发送以长度为前缀的项目以供消费。

[`Stream.ReadAsync`](http://msdn.microsoft.com/en-us/library/hh137813.aspx)基本上，这是使用[`await`关键字](http://msdn.microsoft.com/en-us/library/vstudio/hh156528.aspx)的循环调用。[`IObserver<T>`接口](http://msdn.microsoft.com/en-us/library/dd783449.aspx)实现（来自Dataflow library 或来自[Dataflow library](http://msdn.microsoft.com/en-us/library/hh228603.aspx)[`Observable.Create`](http://msdn.microsoft.com/en-us/library/hh229114.aspx)的块，没关系，它是一个实现细节）被传递给这个循环，然后调用实现上的方法，产生 observable。`IObserver<T>`

*但是，在此循环开始处理之前*必须完成许多需要调用-returning 方法的事情，在 C# 5.0 中使用关键字[`Task<T>`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)更容易调用所有这些事情。`await`像这样的东西：

```
public async Task<IObservable<string>> Create(string parameter,
    CancellationToken cancellationToken)
{
     // Make some call that requires await.
     var response = await _httpClient.SendAsync(parameter, cancellationToken).
         ConfigureAwait(false);

     // Create a BufferBlock which will be the observable.
     var block = new BufferBlock<T>();

     // Start some background task which will use the block and publish to it
     // on a separate task.  This is not something that is awaited for.
     ConsumeResponse(response, block, cancellationToken);

     // Create the observable.
     return block.AsObservable();
} 
```

也就是说，我目前正在`Task<IObservable<T>>`从我的方法中返回 a ，但我觉得我在 Reactive Extensions 中遗漏了一些东西，这些东西可以让我用来`await`促进我需要进行的调用，但也返回 a`IObservable<T>`而不是 a `Task<IObservable<T>>`。

Reactive Extensions 中的什么方法允许我创建一个 observable，它需要在从创建方法返回之前等待方法？

我发现的最接近的是`Observable.DeferAsync`. 假设对我的方法的调用和对 observable 的使用是这样的：

```
public async Task Observe()
{
    // NOT the real name of the interface, but explains it's role here.
    IObservableFactory factory;

    // Create is really named something else.
    IObservable<string> observable = factory.Create("parameter");

    // Subscribe.
    observable.Subscribe(o => Console.WriteLine("Observed: {0}", o));

    // Wait.
    await observable;
} 
```

在这里使用`DeferAsync`将不起作用，因为调用`Subscribe`将发送第一个请求，然后读取该请求，然后调用`await`on`observable`将创建*第二个*订阅，但会创建一个*不同*的observable。

或者，最终是`Task<IObservable<T>>`在响应式框架中返回执行此操作的适当方法吗？

随后，由于该方法返回 a `Task<T>`，因此最好传递 a[`CancellationToken`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)来取消操作。也就是说，我可以理解`CancellationToken`用于取消可观察对象的*创建*，但它是否也可以用于取消*实际*的可观察对象（因为它可以向下传递以读取流等）。

我的直觉说不，因为这里违反了关注点分离以及取消的 DRY 原则：

*   *创建*的取消和*可观察*的取消是两个不同的事情。
*   调用[`Subscribe`](http://msdn.microsoft.com/en-us/library/hh229413.aspx)将返回一个[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)取消订阅的实现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T03:04:05.923

我不会返回一个`Task<IObservable<T>>`. 在你的公共 API 中混合任务和 Observable 最终会让人感到困惑。请记住，可以将任务视为产生单个值的可观察对象。这也意味着不要在公共 API 中将 CancellationTokens 与 observables 混合。您可以通过订阅和取消订阅来控制 observables。

这并不意味着你不能在幕后混合概念。以下是如何做你想做的事`Observable.Using`，`Task.ToObservable`和`CancellationDisposable`

首先，修改您的方法以返回`Task<ISourceBlock<string>>`：

```
public async Task<ISourceBlock<string>> CreateBlock(string parameter, CancellationToken cancellationToken)
{
     // Make some call that requires await.
     var response = await _httpClient.SendAsync(parameter, cancellationToken).ConfigureAwait(false);

     // Create a BufferBlock which will be the observable.
     var block = new BufferBlock<T>();

     // Start some background task which will use the block and publish to it
     // on a separate task.  This is not something that is awaited for.
     ConsumeResponse(response, block, cancellationToken);

     return block;
} 
```

现在这是使用上述方法的新 Create 方法：

```
public IObservable<string> Create(string parameter)
{
    // Create a cancellation token that will be canceled when the observable is unsubscribed, use this token in your call to CreateBlock.
    // Use ToObservable() to convert the Task to an observable so we can then
    // use SelectMany to subscribe to the block itself once it is available
    return Observable.Using(() => new CancellationDisposable(),
           cd => CreateBlock(parameter, cd.Token)
               .ToObservable()
               .SelectMany(block => block.AsObservable()));
} 
```

编辑：我发现 Rx 已经实现了这个模式`FromAsync`：

```
public IObservable<string> Create(string parameter)
{
    return Observable.FromAsync(token => CreateBlock(parameter, token))
                     .SelectMany(block => block.AsObservable());
} 
```

而且`DeferAsync`，这更合适，因为您`Task`实际上是在创建您真正想要观察的 Observable（例如您的块）：

```
public IObservable<string> Create(string parameter)
{
    return Observable.DeferAsync(async token => (await CreateBlock(parameter, token)).AsObservable());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:44:08.343

我不明白为什么你需要`BufferBlock`在那之后创建唯一的`await`。相反，您可以做的是有一个同步方法来创建`BufferBlock`，开始异步初始化，然后立即返回。就像是：

```
public IObservable<string> Create(
    string parameter, CancellationToken cancellationToken)
{
     // Create a BufferBlock which will be the observable.
     var block = new BufferBlock<string>();

     // Start asynchronous initialization, but don't wait for the result
     InitializeAsync(parameter, block, cancellationToken);

     // Create the observable.
     return block.AsObservable();
}

private async Task InitializeAsync(
    string parameter, ITargetBlock<string> block,
    CancellationToken cancellationToken)
{
     // Make some call that requires await.
     var response = await _httpClient.SendAsync(parameter, cancellationToken).
         ConfigureAwait(false);

     // Start some background task which will use the block and publish to it
     // on a separate task.  This is not something that is awaited for.
     ConsumeResponse(response, block, cancellationToken);
} 
```

（您可能还想`InitializeAsync()`通过调用`Fault()`传入的块来处理错误。）

这样，该`Create()`方法只返回`IObservable<T>`，但它也异步执行初始化。

> 或者，最终是`Task<IObservable<T>>`在响应式框架中返回执行此操作的适当方法吗？

我不这么认为。我认为这里不需要两个级别的异步。

> *创建*的取消和*可观察*的取消是两个不同的事情。

这将取决于您的确切要求，但总的来说，我认为它们不是独立的东西。您想取消操作，它是否已经开始并不重要。

这类似于`CancellationToken`传递到`Task.Run()`的行为方式：它既用于`Task`在开始执行之前取消，也用于检测是否已启动的正确取消。

> 调用`Subscribe`将返回一个`IDisposable`取消订阅的实现。

是的，但仅此而已。由于您在这里描述的是您想要一个热可观察对象（无论观察者如何都会产生项目），因此它实际上不会取消可观察对象，只会取消订阅。

# html - H1 标题的背景图片

> ID：15730533
> 
> 赞同：2
> 
> 时间：2013-03-31T14:38:34.097
> 
> 标签：html, css, background-image

在我的 wordpress 主题页面标题`<?php the_title(); ?>`中。

我的CSS：

```
#page h1.pagetitle {
      width:auto;
      text-align:left;
      font-size:30px;
      padding:25px 40px 25px 0px;
      text-transform:uppercase;
    }

     #page h1.pagetitle span{
     background:#202020; 
     padding:5px 40px 5px 10px;
     } 
```

html:

```
<h1 class="pagetitle"><span><?php the_title(); ?></span></h1> 
```

我想要像这样的示例箭头丝带的背景图像[http://www.123rf.com/photo_12816420_green-arrow-ribbon-on-wooden-desk.html](http://www.123rf.com/photo_12816420_green-arrow-ribbon-on-wooden-desk.html)

我可以直接放置背景图像或使用带有repeat-x的背景图像。但是我的页面标题文本跨度宽度始终不固定。每个页面都有不同的页面标题。

所以我想使用两个图像部分：一个使用repeat-x在文本后面带有矩形，在文本字符串结束后使用：第二个带有箭头（三角形）。

这样我可以获得任何页面标题文本的箭头图像。建议我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T15:10:06.197

我经常使用这种技术：

```
h1{
    background: url('http://i49.tinypic.com/2zs1z79.png') 0 0 repeat-x;
    position:relative;
    display: inline-block;
    margin:0 25px;
    padding:0 10px;
    height:40px;
}

h1:before,h1:after {
    content:'';
    display: inline-block;
    position:absolute;
    top: 0;
    right: -20px;
    width: 20px;
    height: 100%;
    background:inherit;
    background-position:100% 100%;
}
h1:before {
    left:-20px;
    background-position: 0 100%;
} 
```

我使用`:before`and`:after`作为头部和尾部，使用 sprite 作为图像。它很好，干净且灵活（足够）。

演示：http: [//jsfiddle.net/pavloschris/5Qvn7/](http://jsfiddle.net/pavloschris/5Qvn7/)

# java - 从 JSON 创建一个对象（GSON: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING）

> ID：15730539
> 
> 赞同：4
> 
> 时间：2013-03-31T14:38:55.180
> 
> 标签：java, json, parsing, gson, type-conversion

我想使用我使用 HttpUrlConnection 构建的客户端应用程序来读取 REST 服务的 GET 方法的结果。该方法返回有关用户的信息。阅读后，我想创建一个**User 类型**的对象，并填充该 User 的所有信息。我想我必须先将其转换为 JSON，对吧？我正在使用 GSON。

我所拥有的是：

```
if(urlConnection.getResponseCode()==200)
{
   String response ="";
   Scanner inStream = new Scanner(urlConnection.getInputStream());

   while(inStream.hasNextLine())
      response+=(inStream.nextLine());
   System.out.println(response);

   //JSON
   Gson gson = new Gson();
   String json = gson.toJson(response);
   System.out.println(json);

   // User Object
   User object = new User();
   object = gson.fromJson(json, User.class);
   System.out.println(object); 
```

}

当我进行第一次打印时，我收到：

```
{"userID":"user2","isMale":false,"isObject":false,"telephone":"+911111111","email":"maug@abc.pt","birthdate":"2012-08-01","firstName":"Maria","lastName":"Silva","isocountrycode":"PT"} 
```

当我进行第二次打印时，我收到：

```
"{\"userID\":\"user2\",\"isMale\":false,\"isObject\":false,\"telephone\":\"+911111111\",\"email\":\"maug@abc.pt\",\"birthdate\":\"2012-08-01\",\"firstName\":\"Maria\",\"lastName\":\"Silva\",\"isocountrycode\":\"PT\"}" 
```

但是当我尝试打印用户对象时，我收到了这个错误：

```
 com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 226
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
    at com.google.gson.Gson.fromJson(Gson.java:795)
    at com.google.gson.Gson.fromJson(Gson.java:761)
    at com.google.gson.Gson.fromJson(Gson.java:710)
    at com.google.gson.Gson.fromJson(Gson.java:682)
    at httpURLconnection.UserGetUserInfo.main(UserGetUserInfo.java:70)
Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 226
    at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
    at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165)
    ... 5 more 
```

你能告诉我我做错了什么吗？所有用户对象字段都是使用该用户类填充的。

用户等级：

```
 public class User {
    String  userID        = null;
    boolean isMale        = false;
    boolean isObject      = false;
    String  Telephone     = null;
    String  Email         = null;
    Date    Birthdate     = null;
    String  FirstName     = null;
    String  LastName      = null;
    String  ISOcountrycode   = null;

    (...) 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:55:13.727

在您的 USER 类中，您必须声明 JSONObject 包含的所有数据类型，不多也不少。铁： `class User { String UserID = ""; Boolean isMale;}`

等等。

否则 GSON.toJson(); 将不起作用并引发异常。

# java - 在应用程序中记录 SQL 语句

> ID：15730546
> 
> 赞同：1
> 
> 时间：2013-03-31T14:39:33.653
> 
> 标签：java, jakarta-ee, logging

我正在将 SLF4J 和 Logback 添加到我的应用程序中，但我不确定是否应该记录在存储库层中生成的 SQL 语句（使用 Spring JDBC）。这些语句的级别当然会设置为 DEBUG，因为它会生成大量的日志语句。

记录应用程序生成的 SQL 语句是否常见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:00:15.253

是的，这很常见。

所有的 ORM，包括 openjpa 和 hibernate 都这样做。所有像 MyBatis 这样的映射器都有一些日志记录机制来挂钩到多个日志记录实现中的任何一个。

即使在远古时代。驱动程序`java.sql.DriverManager#setLogStream`在调用a 时会执行此操作

;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:46:55.140

我会将这类信息写入数据库，保存统计数据，以便查询和汇总它们。

用日志当然可以，但是总结起来就没有数据库那么容易了。没有特别努力就没有日志文件的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:22:05.377

实际上，如果您有一个在您看来被视为金融资产的巨大应用程序，那么您当然应该记录您的应用程序，因为日志记录将被视为您可以随时参考的安全专业。此外，日志记录对于调试很有用。但是您必须考虑要选择哪种级别的日志记录，因为如果您想要记录所有 SQL 语句，它将对您的数据库产生巨大的负载。

# sublimetext2 - Sublime Text 2 - 如何更改输出面板的字体大小？

> ID：15730547
> 
> 赞同：4
> 
> 时间：2013-03-31T14:39:34.210
> 
> 标签：sublimetext2

当我更改 Sublime Text 2 中的字体大小（通过快捷方式/配置）时，输出面板 AKA Build Results 中文本的字体大小也发生了更改。

将这些字体大小分开会很方便。我试图关注和适应 [Sublime Text 2 如何更改文件侧边栏的字体大小？](https://stackoverflow.com/a/13782271/1136008)并编辑`<theme name>.sublime-theme`：

```
{
    "class": "output.exec",
    //"class": "output",
    //"class": "output_exec",
    //"class": "exec",
    //"parents": [{"class": "output"}],
    "font.size": 7.0
}, 
```

输出面板名为`output.exec`，但它不起作用。我尝试过的其他一些选项被注释掉了。

可能我只需要正确的`class`名字。我找不到 ST2 中使用的课程列表。

是否有可能，如果是的话 - 如何更改字体大小？

**编辑：**
它已经在愿望清单上：[http://sublimetext.userecho.com/topic/27388-set-font-size-per-pane/](http://sublimetext.userecho.com/topic/27388-set-font-size-per-pane/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T00:35:27.410

是的，你可以，但是这也会改变字体大小`console panel`，所以如果这不打扰你，那么只需这样做：

`Widget.sublime-settings`首先在目录下创建一个名为的`Packages\User`文件。

其次在该文件中写入以下内容：

```
{
    "font_size": 7
} 
```

现在你可以走了！

# regex - 寻找正则表达式解决方案

> ID：15730549
> 
> 赞同：0
> 
> 时间：2013-03-31T14:39:54.740
> 
> 标签：regex, perl

我正在寻找与前两个特定字段（用 Perl 编写的变量字符串）匹配的正则表达式。在文件中，没有注释的行`#`以任何字符开头，长度不特定，后跟空格，另一个非特定长度字符串，后跟空格：`name info data1 data2 data3`。

以下仅适用于匹配第二个字段，但我希望前两个字段完全匹配：`/^[^#].*\s$INFO\s/`where `$INFO="info"`。我尝试了上述的变体无济于事。我的第一次尝试是这样的：如果对于上述记录，`/^[^#]$NAME\s$INFO\s/`这​​对我来说似乎是合乎逻辑的。`$NAME="name"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:41:55.047

> 我的第一次尝试是：/^[^#]$NAME\s$INFO\s/

这行不通，因为（从问题中暗示）之前的角色`$NAME`是 else`#` *或 nothing*。因此，您只需要先删除它`[^#]`：

```
/^$NAME\s$INFO\s/ 
```

哪个将匹配字符串：

```
"$NAME $INFO <whatever or nothing>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:20:47.830

虽然我不是正则表达式专家，但这可能有效（我也不清楚问题的确切细节，所以我做了一些假设）：

```
'$NAME=name #$INFO=info $DATA=data1 data2 data3'.replace(/#[\S]+/g,'').match(/\$[\S]+/g); 
```

这将返回一个数组。前 2 个元素是“字段”，即 [0]='$NAME=name' AND [1]='$DATA=data1'

希望这会有所帮助。并为我的正则表达式向众神道歉。

# ruby-on-rails - Rails 表单文件上传新手问题

> ID：15730550
> 
> 赞同：0
> 
> 时间：2013-03-31T14:39:57.500
> 
> 标签：ruby-on-rails, forms, ruby-on-rails-4

我在检索文件上传信息时遇到问题。我刚开始学习Rails。

我正在使用 ruby​​ 2.0.0p0 和 Rails 4.0.0.beta1

这是我的表格：

```
<%= form_for(@person, :html => { :multipart => true }) do |f| %>
<div class="field">
  <%= f.label :photo %><br />
  <%= f.file_field :photo %>
</div>
<div class="actions">
  <%= f.submit %>
</div>
<% end %> 
```

在我的 person.rb 模型中：

```
def photo=(file_data)
logger.debug("PHOTO")
logger.debug(file_data)
logger.debug("END OUTPUT PHOTO")
unless file_data.blank?
  @file_data = file_data
  self.extension = file_data.original_filename.split('.').last.downcase
end
end 
```

我可以在控制台中看到没有任何反应（没有“PHOTO”输出），永远不会调用 photo 方法。这是为什么？

当我查看控制台时，我还看到了让我担心的这一行：

```
Unpermitted parameters: photo 
```

这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:45:06.553

在您正在处理的控制器中`params`，您需要使用`.permit`来列出允许表单发布的属性：

```
@person = Person.new(params.require(:person).permit(:photo)) 
```

或者，如果您使用 Rails 的脚手架生成器，您可能有一个`person_params`需要添加`:photo`属性的方法：

```
def person_params
  params.require(:person).permit(:photo, :name, etc...)
end 
```

# git - 使用 git 获取新的上游分支

> ID：15730551
> 
> 赞同：20
> 
> 时间：2013-03-31T14:40:02.890
> 
> 标签：git, git-branch

我已经分叉了一个 repo，我所有的工作都进入了那个 fork（我的起源），我将上游分支与拉取请求合并。很标准。

但是现在上游仓库中有一个新分支，我不太清楚如何在本地获取该新分支，然后将其推送到我的原点。这是我的情况。

```
$ git remote show origin
* remote origin
  Fetch URL: git@github.com:rackspace/jclouds.git
  Push  URL: git@github.com:rackspace/jclouds.git
  HEAD branch: master
  Remote branches:
    1.5.x                   tracked
    master                  tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (up to date)

$ git remote show upstream
* remote upstream
  Fetch URL: https://github.com/jclouds/jclouds
  Push  URL: https://github.com/jclouds/jclouds
  HEAD branch: master
  Remote branch:
    master tracked
  Local ref configured for 'git push':
    master pushes to master (up to date) 
```

我知道 jclouds/jclouds 中有一个 1.6.x 分支，我想在本地获取该分支，然后将其推送到 rackspace/jclouds。我试过这个命令

```
$ git fetch upstream 1.6.x
From https://github.com/jclouds/jclouds
 * branch            1.6.x      -> FETCH_HEAD 
```

看起来它已经获取了分支，但我没有看到它，`git remote show`所以`git branch -a`我无法设置本地跟踪分支。

我错过了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-31T15:46:22.910

这应该足够了

```
# I prefer fetching everything from upstream
git fetch upstream

# Then I track the new remote branch with a local branch
git checkout -b 1.6.x --track upstream/1.6.x
git push origin 1.6.x 
```

如果有更新问题，例如：

```
fatal: Cannot update paths and switch to branch '1.6.x' at the same time. 
Did you intend to checkout 'upstream/1.6.x' which can not be resolved as commit?" 
```

如果这也不起作用：

```
git checkout upstream/1.6.x -b 1.6.x 
```

然后一个更简单的版本是：

```
# let's create a new local branch first
git checkout -b 1.6.x
# then reset its starting point
git reset --hard upstream/1.6.x 
```

* * *

[OP Everett Toews](https://stackoverflow.com/users/25991/everett-toews)在他的案件中必须做的是：

> 最终我不得不明确地添加上游分支

```
git remote add --track 1.6.x upstream-1.6.x https://github.com/jclouds/jclouds 
```

> 进而：

```
git pull upstream-1.6.x 1.6.x 
```

# performance - windows azure 网站加载时间

> ID：15730557
> 
> 赞同：24
> 
> 时间：2013-03-31T14:41:03.777
> 
> 标签：performance, azure

有时当我访问我的 windows azure 网站时，初始响应时间很慢。第一个页面加载后，网站速度很快。一些背景：该网站目前并不经常访问。此外，我正在使用 keepalivecontroller 来保持网站运行并且网站以共享模式运行。我想知道：是否在 Windows azure 中从内存中删除了不那么活跃的网站？还是只是windows azure操作级别的后台任务有时会干扰？发生的事情对我来说并不透明，那么 Windows azure 网站是否有一些 sla 的东西？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-25T13:01:30.863

现在有一个可用于“保留”模式的 Windows Azure 网站的新功能，可以让您的网站保持温暖。您现在可以在 Azure 网站的“配置”选项卡下打开“**始终在线”。**正如[这篇](http://blogs.technet.com/b/firehose/archive/2014/01/17/new-capabilities-enhancements-to-windows-azure-include-always-on-support-for-websites.aspx)博文中所解释的：

> 当网站上启用新的“始终在线”功能时，“Windows Azure 将定期自动 ping 您的网站，以确保网站始终处于活动状态并处于热/运行状态，”Guthrie 写道。“这对于确保站点始终响应（并且由于缺少外部 HTTP 请求而导致应用程序域或工作进程没有分页）很有用。”</p>

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-01T14:11:42.840

保持网站温暖的最简单方法是使用 Windows Azure 移动服务中的调度程序功能定期调用它。

您只需在调度程序中编写一个脚本，每隔 x 分钟 ping 您的网站。

这是一篇介绍如何做到这一点的帖子：http: [//fabriccontroller.net/blog/posts/job-scheduling-in-windows-azure/](http://fabriccontroller.net/blog/posts/job-scheduling-in-windows-azure/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T15:56:21.727

Windows Azure 网站仍处于预览阶段，因此该服务目前没有 SLA。

网站在免费或共享模式下确实空闲，这很可能是您所看到的。当站点空闲时，它实际上是从内存中删除的，并且确实运行该站点的 IIS 进程主机被关闭。这就是他们如何获得在同一 VM 上托管 100 个站点的密度。

你可以在 Channel9 网站上找到很多关于为什么会这样的信息，或者，作为一个无耻的插件，这里有一篇文章讨论[了这个过程是如何处理的](https://www.simple-talk.com/dotnet/.net-framework/windows-azure-websites-%E2%80%93-a-new-hosting-model-for-windows-azure/)。

现在，您提到您正在使用一个keepalivecontroller，但您到底是什么意思？我使用 pingdom.com 不断地为我的一个网站请求数据，这似乎做得很好。仍然有可能没有请求进入并且满足空闲时间，然后循环站点。即使您始终运行站点，站点站点所在的 VM 也可能需要更新底层操作系统，在这种情况下，Azure 会将站点进程移动到另一个 VM，这也可能导致启动缓慢在下一个请求。

我会开始记录您的应用程序启动，然后查看您的日志以了解这种情况发生的频率。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-16T16:47:39.203

如果您只需要预热一次（而不是保持温暖）并且主要是试图防止您的客户体验页面冷启动，我相信正确的工具是[IIS Application Initialization](http://www.iis.net/configreference/system.webserver/applicationinitialization)。在它认为应用程序准备好执行操作之前，您可以使用要点击的 url 列表对其进行配置。

我的网站遭受页面冷启动的困扰，并且在 Azure 网站（甚至在 S3 上）中被严重放大，但由于多层缓存（我们对 Umbraco 的动态节点查询语言的低效使用），它在第一次服务后绝对快速造成大量数据库流失——我们正在伺机清理）。

根据我阅读的内容和我自己的 web.config 尝试，这在 Azure 网站中仍然不可用。我在这里向微软询问过：[MS IDEA：应用程序初始化以在应用程序池启动时预热特定页面](http://feedback.azure.com/forums/169385-websites/suggestions/6972595-application-initialization-to-warm-up-specific-pag)。请考虑为它投票。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-02T18:14:24.370

对于每个服务/站点，您需要转到“配置”，然后将“始终开启”切换为开启。还要确保单击“保存”；我的网站花了大约 2 分钟才注意到变化。

为什么这不是默认设置有点令人难以置信，因为我在 HostGator 上的设置运行速度比 Azure 快得多。我猜微软正在考虑是否没有人访问您的网站，如果它有很长的加载时间也没关系。

# ios - cocos2d 根据触摸定位精灵

> ID：15730561
> 
> 赞同：0
> 
> 时间：2013-03-31T14:41:20.827
> 
> 标签：ios, cocos2d-iphone

我有一个看起来像铅笔的精灵。当用户触摸这个精灵时，我想画一条线。我能够在触摸位置上画线并相应地移动精灵。问题是线条不是从位于精灵左下角的铅笔尖绘制的。

我不想在触摸点下方移动精灵的左下边缘，因为这样用户将无法看到提示，而是移动坐标以绘制到提示本身。

我试过 setAnchorPoints 但这没有帮助。任何人尝试过这个或有更好的想法，请分享。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:43:40.017

您可以在 pencil.position.y - (pencil.sizeofthesprite.y / 2) 之类的位置画线，应该没问题。

# asp-classic - 在经典 ASP 中包含导致错误 500 的文件

> ID：15730562
> 
> 赞同：2
> 
> 时间：2013-03-31T14:41:55.117
> 
> 标签：asp-classic

也许这是一个愚蠢的问题，但我无法弄清楚为什么会这样。

我必须更新一个旧的、经典的 ASP 网站。其中一项请求是修改页脚，以便评论和建议可以在管理面板中更改与链接关联的电子邮件。

这不是问题，所有页面上使用的原始页脚都添加为...

```
</div>
<!--#include file="../include/footer.htm"-->
</body> 
```

如果我在这里添加输入代码

`enter code here`<%@LANGUAGE="VBSCRIPT" %>

到页面顶部并将扩展名更改为 .inc 或 .asp，将原始页面修改为：

```
</div>
<!--#include file="../include/footer.inc"--> (or .asp)
</body> 
```

...我收到错误 500。我尝试在浏览器中使用 Web 控制台，但没有其他信息，页面上也没有代码，只有将使用 VBScript 的声明。任何帮助将不胜感激。我敢肯定这是我 15 年前就知道的愚蠢的事情，但是我不记得了，因为我从 2002 年起就没有接触过 ASP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T20:30:36.813

在 iis 7 中默认禁用父路径。这意味着如果在包含文件路径中使用“../”会出错

[http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/classic-asp-parent-paths-are-disabled-by-默认](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/classic-asp-parent-paths-are-disabled-by-default)

您可以在 iis 管理器中启用它们，也可以使用 include virtual

```
<!--#include virtual="/root/include/footer.htm"--> 
```

您还可以使用 iis 管理器来编辑服务器如何处理错误页面，这样您就可以获得有用的调试文本，而不仅仅是 500 个内部服务器错误页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:02:32.383

首先检查 IIS 配置

ERROR 500 由网络服务器引起，google 可以找到这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:47:01.257

如果您将其设置为 .asp 或 .inc 页面，那么我建议您将页面内容设置为：

```
<%
'code here
%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T19:44:10.690

当您将 B.asp 包含到 A.asp 中时：还要检查：B.asp 不包含已在 A.asp 中声明的全局变量/函数

# python - 如何从python中的原始输入创建一个numpy数组？

> ID：15730568
> 
> 赞同：1
> 
> 时间：2013-03-31T14:42:05.233
> 
> 标签：python, arrays, numpy, dimensions

我需要使用 numpy 将数组写入文件，并且我正在尝试将数组作为原始输入读取并将其转换为数组。我的问题似乎来自 line `inarray = np.array(inlist)`，因为代码没有返回数组。这是我的整个代码：

```
import numpy as np
def write():
    inlist = raw_input('Please enter a square array of booleans.')
    print inlist
    inarray = np.array(inlist)
    print inarray
    dims = inarray.shape
    print dims
    dim = dims[0]
    name = open(name,'w')
    name.write(dims)
    dimint = int(dim)
    i = 0
    while i < dimint:
        name.write(inarray[i])
        i = i+1

return name

write() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:50:07.490

`raw_input`正在返回一个字符串。如果将此字符串直接提供给`np.array`，则会返回一个 NumPy 标量：

```
In [17]: np.array('foo')
Out[17]: 
array('foo', 
      dtype='|S3')

In [18]: np.array('abl').shape
Out[18]: ()

In [19]: np.array('abl').dtype
Out[19]: dtype('|S3') 
```

* * *

在将字符串输入到`np.array`.

```
import ast
inarray = np.array(ast.literal_eval(inlist)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:50:27.140

该`raw_input`函数返回一个字符串。

你可以做的是`split()`字符串和`map`它上面的函数：

```
In [1]: test = 'True False True False False'

In [2]: test.split()
Out[2]: ['True', 'False', 'True', 'False', 'False']

In [3]: map(lambda x: x in ['True', '1'], test.split())
Out[3]: [True, False, True, False, False] 
```

lambda 表达式中的列表应包含您要识别的所有值 als `True`。使用 in 中的函数会稍微好一些`map`，因此当您发现某些不是明确的`True`或`False`.

请注意，*这只*适用于真/假值列表。对于嵌套和括号列表，使用`ast.literal_eval`unutbu 建议显然是更好的解决方案：

```
In [1]: import ast

In [2]: ast.literal_eval('[[True], [False], [True]]')
Out[2]: [[True], [False], [True]] 
```

但这将要求您使用完整的 Python 语法。如果要使用 0 和 1 而不是 True 和 False，请记住使用`bool`dtype：

```
In [5]: a = ast.literal_eval('[[1, 0, 1], [0, 1, 0], [0,0,1]]')

In [6]: np.array(a, dtype=bool)
Out[6]: 
array([[ True, False,  True],
       [False,  True, False],
       [False, False,  True]], dtype=bool) 
```

# javascript - 通过jquery从另一个html更改一个html的div内容

> ID：15730576
> 
> 赞同：0
> 
> 时间：2013-03-31T14:42:30.870
> 
> 标签：javascript, jquery

我在 index.html 中使用 iframe 标签。下面是代码

```
<iframe src="header.html" height="100px" scrolling="no" width="1335px"
        style="position: absolute; top: 0px;"></iframe>
    <iframe src="menu.html" height="500px" scrolling="no" width="250px"
        style="position: absolute; top: 103px;"></iframe>
    <iframe src="body.html" height="500px" scrolling="no" width="1083px"
        style="position: absolute; top: 103px; left: 260px"></iframe>
    <iframe src="footer.html" height="100px" scrolling="no" width="1335px"
        style="position: absolute; top: 605px;"></iframe> 
```

我的登录 div 在 menu.html 中，注销在 footer.html 中。我想在隐藏登录 div 时显示注销（登录后），当我单击注销时，我希望隐藏我的注销链接并显示登录 div。由于它们都在不同的 html 中，所以我想知道我们如何同时做到这一点。现在这个功能正在工作，但我需要刷新页面。window.location.reload 也没有用。有没有更简单的方法可以同时在多个 html 中执行隐藏/显示操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:44:00.023

如果您确实必须将此内容保存在单独的文件中并且打算为每个文件单独调用，请尝试以下操作：

```
<div id="header" style="height: 100px; width 1335px; overflow: hidden; position: absolute; top: 0px;"></div>
<div id="menu" style="height: 500px; width 250px; overflow: hidden; position: absolute; top: 103px;"></div>
<div id="body" style="height: 500px; width: 1083; overflow: hidden; position: absolute; top: 103px; left: 260px;"></div>
<div id="footer" style="height: 100px; weight:1335px; overflow: hidden; position: absolute; top: 605px;"></div> 
```

还有一些像这样的jQuery：

```
<script>
$(document).ready(function() {
   $("#header").load("header.html");
   $("#menu").load("menu.html");
   $("#body").load("body.html");
   $("#footer").load("footer.html");
});
</script> 
```

现在您已经在同一个窗口中拥有了所有标记，使用 jQuery 来做任何您想做的事情。

# regex - 正则表达式如何将换行符与您之后的某个模式匹配

> ID：15730577
> 
> 赞同：-1
> 
> 时间：2013-03-31T14:42:46.513
> 
> 标签：regex, notepad++

我需要检查所有不在字符串末尾的新行，但如果它们后面没有`Package`，我正在使用 Notepad++。

如下例所示。我需要匹配第一句之间的行`without having to edit`，后面的`More information` `.`行代表这个文件中的新行。但是后面的新行`Package:...`非常好，我想忽略这些。

```
.
without having to edit xorg.conf every time.

More information about X.Org can be found at:
<URL:http://www.X.org>
.
This package is built from the X.org xf86-input-vmmouse driver module.
Original-Maintainer: Debian X Strike Force <debian-x@lists.debian.org>

Package: libxml-libxml-perl
Status: install ok installed 
```

这可能吗？

```
 \n(?!\npackage) 
```

我已经尝试过了，这在一定程度上有效。但不是为了我所追求的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:16:35.170

Windows 中的新行是 '\r\n' 而不是 '\n' 所以你必须考虑这一点。

所以你可以通过 \r\n(?!\r\npackage)

# ruby-on-rails - 未加载 Rails、pow 和库：/usr/local/lib/libsqlite3.0.8.6.dylib

> ID：15730583
> 
> 赞同：8
> 
> 时间：2013-03-31T14:43:36.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rack-pow

我已经有几个星期没有在这个 Rails 应用程序上工作了。昨天我回到它，首先打开 .dev URL（我正在使用 pow），它给出了这个错误消息：

`LoadError: dlopen([...]/vendor/bundle/gems/sqlite3-1.3.7/lib/sqlite3/sqlite3_native.bundle, 9): Library not loaded: /usr/local/lib/libsqlite3.0.8.6.dylib Referenced from: [...]/vendor/bundle/gems/sqlite3-1.3.7/lib/sqlite3/sqlite3_native.bundle Reason: image not found - [...]/vendor/bundle/gems/sqlite3-1.3.7/lib/sqlite3/sqlite3_native.bundle`

我检查了 rbenv 安装，一切似乎都很好。我试图考虑可能导致这种情况的最近变化，但我做不到。我很确定我错过了一些东西，但我尝试调试它是徒劳的。我不知道它是否相关，但我最近切换到 zsh。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T16:24:36.127

## 解决方案

卸载并重新安装 sqlite：

```
~/d/w/r/my-app git:master ❯❯❯ gem uninstall sqlite3                                                                      

Successfully uninstalled sqlite3-1.3.7

~/d/w/r/my-app git:master ❯❯❯ gem install sqlite3                                                                            
Fetching: sqlite3-1.3.7.gem (100%)
Building native extensions.  This could take a while...
Successfully installed sqlite3-1.3.7
1 gem installed 
```

## 发生了什么

安装 sqlite3 gem 后，它会构建一个与**sqlite**对话的本机组件，因此它会链接到本地**​​ sqlite3**库。*这一切都由gem*在幕后处理。发生这种情况时，它会指定它链接的库的位置。

最近（1 月），[**sqlite**](https://github.com/mxcl/homebrew/pull/17000)[的**自制**公式变成了 keg-only](https://github.com/mxcl/homebrew/pull/17000)**。之前与**sqlite**链接的任何内容都引用了自制版本。您可以使用以下方法检查`otool -L`：**

 **```
~/d/w/r/my-app git:master ❯❯❯ otool -L /path/to/earlier/gem/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.bundle
/path/to/earlier/gem/sqlite3-1.3.6/lib/sqlite3/sqlite3_native.bundle:
    /usr/local/lib/libsqlite3.0.8.6.dylib (compatibility version 9.0.0, current version 9.6.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
    /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0) 
```

针对新版本运行`otool`，您可以看到它现在与 Apple 提供的系统 sqlite 库链接：

```
~/d/w/r/a/new-config git:master ❯❯❯ otool -L /path/to/new/gem/sqlite3-1.3.7/lib/sqlite3/sqlite3_native.bundle
 /path/to/new/gem/sqlite3-1.3.7/lib/sqlite3/sqlite3_native.bundle:
    /usr/lib/libsqlite3.dylib (compatibility version 9.0.0, current version 9.6.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
    /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0) 
```**

# android - Android DDMS 无法使用模拟器启动网络统计

> ID：15730586
> 
> 赞同：6
> 
> 时间：2013-03-31T14:43:42.283
> 
> 标签：android, eclipse, adt, ddms, android-sdk-tools

单击开始按钮后，将显示错误对话框。

问题阅读统计

原因：从选定设备读取 xt_qtaguid 网络统计信息时出现问题。

我正在使用最新的 4.2.2 模拟器进行测试。（我已经阅读了 4.0.1 之前不支持的网络统计信息）

OS = OK 中的 PATH 变量可以从 cmd 行运行 ADB 所有其他 DDMS 功能都在工作。截至 2013 年 3 月 31 日运行最新的 Eclipse。

# sql - 尝试加入两个类/表时出现“外键约束失败”错误

> ID：15730588
> 
> 赞同：0
> 
> 时间：2013-03-31T14:44:05.707
> 
> 标签：sql, database, grails, grails-orm

我有这些课程，出于实际原因缩写：

```
class CV {
  Date dateCreated
  static hasMany=[proposals: Proposal]
}  

class Proposal {
  String name
  Date date_started
  static hasMany = [CVs: CV]
  static belongsTo = CV
} 
```

Grails 为这两个类创建了表，第三个名为“cv_proposals”的类加入了它们。到现在为止还挺好。我在 CV 和 Proposal 表中都有数据，它们都有自动递增的“id”值。都好。

在 Oracle MySQL Workbench 中，我尝试手动将值添加到连接表以获取一些可以使用的虚拟数据。我收到一条带有此跟踪的错误消息：

> 错误 1452：无法添加或更新子行：外键约束失败 ( `cvreg_utv`. `cv_proposals`, CONSTRAINT `FK17D946F55677A672`FOREIGN KEY ( `cv_id`) REFERENCES `cv`( `id`))

我确保两个表中都有几行数据，并且我可以分别编辑它们。

在尝试删除并重新创建表，来回更改类之后，我有点相信这个操作必须通过正在运行的 Grails 应用程序来完成。所以我在控制器中编写了这个脚本并运行它：

```
def g = CV.get(1)
Proposal proposal = g.addToProposals(new Proposal(
name: "SavingTest", 
date_started: new Date())).save() 
```

不过，我仍然遇到同样的错误。这不是定义与某个 CV 相关的提案的正确方法吗？我在这里以某种方式使用多对多连接是错误的吗？

编辑：为连接表添加模式创建脚本

```
delimiter $$
CREATE TABLE `cv_proposals` (  
  `proposal_id` bigint(20) NOT NULL,  
  `cv_id` bigint(20) NOT NULL,    
  PRIMARY KEY (`cv_id`,`proposal_id`),  
  KEY `FK17D946F55677A672` (`cv_id`),  
  KEY `FK17D946F5F7217832` (`proposal_id`),  
  CONSTRAINT `FK17D946F5F7217832` FOREIGN KEY (`proposal_id`) REFERENCES `proposal` (`id`),  
  CONSTRAINT `FK17D946F55677A672` FOREIGN KEY (`cv_id`) REFERENCES `cv` (`id`)  
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$ 
```

还有简历表：

```
CREATE TABLE `cv` (  
  `id` bigint(20) NOT NULL AUTO_INCREMENT,  
  `version` bigint(20) NOT NULL,  
  `user_id` bigint(20) NOT NULL,  
  `version_name` varchar(255) DEFAULT NULL,  
  `date_created` datetime NOT NULL,  
  `last_updated` datetime NOT NULL,  
  PRIMARY KEY (`id`),  
  KEY `FKC734A9AB992` (`user_id`)  
) ENGINE=MyISAM AUTO_INCREMENT=101 DEFAULT CHARSET=latin1$$ 
```

和提案表：

```
CREATE TABLE `proposal` (  
  `id` bigint(20) NOT NULL AUTO_INCREMENT,  
  `version` bigint(20) NOT NULL,  
  `date_ended` datetime NOT NULL,  
  `date_started` datetime NOT NULL,  
  `description` varchar(500) DEFAULT NULL,  
  `name` varchar(500) NOT NULL,  
  PRIMARY KEY (`id`)  
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1$$ 
```

这是我尝试运行的插入脚本：

```
INSERT INTO `cvreg_utv`.`cv_proposals` (`proposal_id`, `cv_id`) 
VALUES ('1', '1'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:09:46.873

您手动创建表？有趣的是 cv 表使用 MyISAM 引擎，而其他表使用 InnoDB。

我认为您想对所有表使用 InnoDB，因为该引擎是事务性的。在我的测试中，我也无法创建`cv_proposals`表，直到我更改了 cv 创建：

```
 CREATE TABLE cv (
    id bigint(20) NOT NULL AUTO_INCREMENT,
    version bigint(20) NOT NULL,
    user_id bigint(20) NOT NULL,
    version_name varchar(255) DEFAULT NULL,
    date_created datetime NOT NULL,
    last_updated datetime NOT NULL,
    PRIMARY KEY (id),
    KEY FKC734A9AB992 (user_id)
    ) ENGINE=InnoDB AUTO_INCREMENT=101 
```

之后，插件工作顺利。

# ruby - Ruby 映射嵌套数组

> ID：15730592
> 
> 赞同：0
> 
> 时间：2013-03-31T14:44:34.863
> 
> 标签：ruby, regex, arrays, map

我有这个字符串，我正在尝试拆分为嵌套数组：

```
x = '{type:paragaph|class:red|content:[class:intro|body:This is the introduction paragraph.][body:This is the second paragraph.]}'
x << '{type:image|class:grid|content:[id:1|title:image1][id:2|title:image2][id:3|title:image3]}' 
```

到目前为止：

```
x.scan(/\{(.*?)\}/).map {|m| m[0].split(/\|\s*(?=[^\[\]]*(?:\[|$))/)} 
```

成功划分为：

```
[
  ["type:paragaph", "class:red", "content:[class:intro|body:This is the introduction paragraph.][body:This is the second paragraph.]"],
  ["type:image", "class:grid", "content:[id:1|title:image1][id:2|title:image2][id:3|title:image3]"]
] 
```

* * *

我正在尝试添加额外的地图：

```
x.scan(/\{(.*?)\}/).map {|m| m[0].split(/\|\s*(?=[^\[\]]*(?:\[|$))/)}.map {|m| m[0].split(/\:\s*(?=[^\[\]]*(?:\[|$))/)} 
```

返回：

```
[["type", "paragaph"], ["type", "image"]] 
```

但是我在这之后：

```
[
  [['type','paragaph'], ['class','red'], ['content',['[class:intro|body:This is the introduction paragraph.][body:This is the second paragraph.]']],
  [['type','image'], ['class','grid'], ['content','[id:1|title:image1][id:2|title:image2][id:3|title:image3]']]
] 
```

该地图似乎将自身应用于整个 2 级数组，而不是其中的每个元素。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:56:26.897

在第二张地图中，您只拆分第一个元素，而不是使用地图拆分每个元素

```
x.scan(/\{(.*?)\}/).map {|m| m[0].split(/\|\s*(?=[^\[\]]*(?:\[|$))/)}.map {|m| m.map {|n| n.split(/\:\s*(?=[^\[\]]*(?:\[|$))/)}} 
```

您也可以将其清理一下，将正则表达式提取到变量中

```
regex = /\|\s*(?=[^\[\]]*(?:\[|$))/

x.scan(/\{(.*?)\}/).map {|m| m[0].split(regex)}.map {|m| m.map {|n| n.split(regex)}} 
```

# c# - 未创建 WADPerformanceCountersTable

> ID：15730601
> 
> 赞同：0
> 
> 时间：2013-03-31T14:45:05.257
> 
> 标签：c#, azure, azure-table-storage, azure-diagnostics

我正在尝试从工作角色收集一些性能计数器，并且从未创建 WADPerformanceCountersTable。

```
public override bool OnStart()
{
    // Set the maximum number of concurrent connections 
    ServicePointManager.DefaultConnectionLimit = 12;

    DiagnosticMonitorConfiguration diagConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();

    var procTimeConfig = new PerformanceCounterConfiguration();
    procTimeConfig.CounterSpecifier = @"\Processor(_Total)\% Processor Time";
    procTimeConfig.SampleRate = TimeSpan.FromSeconds(10);

    diagConfig.PerformanceCounters.DataSources.Add(procTimeConfig);
    diagConfig.PerformanceCounters.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);

    DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagConfig);

    return base.OnStart();
} 
```

我已经尝试过不同的日志表，如 WADLogsTable 和 WADDiagnosticInfrastructureLogsTable 并且两者都被正确创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:26:05.470

此代码在我的应用程序中运行良好。由于您的 ScheduledTransferPeriod 是 1 分钟，您是否让您的角色运行至少 1 分钟？那时将创建表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:52:28.663

当然，这个问题是由系统的语言引起的。这里解释：

[创建性能计数器时 Azure 模拟器出错](https://stackoverflow.com/questions/12857918/error-in-azure-emulator-when-creating-performance-counters)

我的 Windows 是西班牙语版本，所以性能计数器的名称必须是西班牙语：

```
procTimeConfig.CounterSpecifier = @"\Procesador(_Total)\% de tiempo de procesador"; 
```

请注意，这仅适用于本地，不适用于云端。

# ios - 只有一些 UIButtons 可用于自定义

> ID：15730610
> 
> 赞同：0
> 
> 时间：2013-03-31T14:45:38.073
> 
> 标签：ios, objective-c, cocoa-touch, uikit

我目前正在开发一个 iPad 应用程序，并希望将自定义字体应用于特定屏幕上的 UIButtons。我注意到其他屏幕的类似问题，即某些（看似随机的）UIButtons 上的文本消失了。在这种情况下，自定义字体被应用到一些按钮而不是其他按钮，似乎没有任何关于哪些按钮工作和哪些不工作的模式。我在下面附上了一个屏幕截图，试图让您了解我的意思。

正如我所提到的，在其他一些屏幕上，我注意到一些按钮上的文本完全消失了，不得不用带有文本的图像来替换它们。

![在此处输入图像描述](https://i.stack.imgur.com/TtwWb.jpg)

所有按钮都是在 Interface Builder 中创建的。他们使用属性文本来允许多行和居中对齐。任何帮助将非常感激。

**编辑 - 我的代码如下：**

```
for (UIView *sub in view.subviews) {
    UIButton *btn = (UIButton *) sub;
    UILabel *lbl = [btn titleLabel];
    [lbl setFont: myFont size: mySize];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:35:52.850

要使用属性，请确保将 IB 项目设置为使用属性文本，而不是纯文本。

要设置使用的属性标题`NSButton`：

```
- (NSAttributedString *)attributedTitleForState:(UIControlState)state 
```

用途`NSLabel`：

```
@property(nonatomic,copy) NSAttributedString *attributedText 
```

当然，您可能不需要属性文本，您所做的只是设置字体和对齐方式。

对于多行文本集：

```
@property(nonatomic) NSInteger numberOfLines 
```

作为适当的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T19:00:01.877

从评论：

您可以在不使用 NSAttributedStrings 的情况下在 UIButtons 中实现居中和多行标题标签，方法是将以下几行添加到您的 for 循环中：

```
lbl.textAlignment = UITextAlignmentCenter; 
lbl.numberOfLines = 0; 
```

# javascript - JQuery SyntaxError：缺少：在属性 id 之后

> ID：15730611
> 
> 赞同：0
> 
> 时间：2013-03-31T14:45:43.703
> 
> 标签：javascript, jquery

这么简单，没看出问题。谁能帮我看看。谢谢。

错误：语法错误：缺少：属性 id 之后

```
$(document).ready({
  $('#ajax-palaceholder').load('http://localhost/devlab/users.php');
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T14:47:27.710

你可能想要

```
$(document).ready(function(){
  $('#ajax-palaceholder').load('http://localhost/devlab/quedata_v2/users.php');
}); 
```

`.ready`接受一个函数作为参数。

您收到此`": missing after property id"`错误消息是因为`{something}`看起来像一个对象文字，但通常是`{propertyid:propertyvalue}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:48:21.247

你需要一个函数 () 作为 document.ready 中的参数

尝试这个

```
$(document).ready(function(){
               //--^^^^^^---here
   //your code;

}) 
```

或 document.ready 简写 ..

```
$(function(){
   //your code
}); 
```

# android - 如何安排 Facebook Graph API 响应

> ID：15730612
> 
> 赞同：0
> 
> 时间：2013-03-31T14:45:48.237
> 
> 标签：android, facebook, facebook-graph-api, response

当我从 Facebook 图表执行 get 时，我得到了一个复杂的字符串。

有没有办法将其分解为“图形用户”？

例如：

```
{"data":[{"id":"112221111"},{"id":"112221111"},{"id":"112221111"},{"score":{"data":[{"score":77777,"user":{"id":"5551","name":"כr"},"application":{"id":"3463464363636336","namespace":"tomatosmasher","name":"Tomato Smasher"}]},"id":"667677577575","installed":true},{"id":"55555555"},{"id":"55555555"},{"id":"55555555"},{"id":"55555555"},{"id":"55555555"},{"id":"55555555"},{"id":"55555555"},{"id":"55555555"}, 
```

我正在使用的代码

```
 String currentUserFBID = user.getId();
                String currentUserAccessToken = Session.getActiveSession().getAccessToken();

// Execute the HTTP Get to our server for the scores of the user's friends
                HttpClient client = new DefaultHttpClient();
                String getURL = "https://graph.facebook.com/" + currentUserFBID + "/friends?access_token=" + currentUserAccessToken + "&fields=installed,score";
                HttpGet get = new HttpGet(getURL);
                HttpResponse responseGet = client.execute(get);

// Parse the response
                HttpEntity responseEntity = responseGet.getEntity();
                String response = EntityUtils.toString(responseEntity); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:53:34.380

是的，dmon 是正确的

我需要转换为 JSON

并通过本教程处理它。

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

# linux - 为什么堆栈程序段具有可执行属性

> ID：15730618
> 
> 赞同：0
> 
> 时间：2013-03-31T14:46:33.780
> 
> 标签：linux, elf

这是来自 a.out 的转储

`STACK off 0x00000000 vaddr 0x00000000 paddr 0x00000000 align 2**2` `filesz 0x00000000 memsz 0x00000000 flags rwx`

为什么堆栈段具有可执行属性？

为什么没有具有 rw- 属性的堆段？

//在 ubuntu 32 位机器上。程序是一个简单的hello world。

命令： `ld test.o startup.s; objdump -dhSxt -M intel-pneumonic a.out` //startup.s 有一个带有 _start 符号的小汇编代码，它调用 main 并在 main 返回后退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:54:17.227

> 命令：gcc test.c

试试`gcc test.c -Wl,-z,noexecstack`。

这应该是任何合理的现代发行版的默认设置。

# java - 用java程序运行一个批处理文件

> ID：15730619
> 
> 赞同：2
> 
> 时间：2013-03-31T14:46:39.070
> 
> 标签：java

```
try {                               
try {
    String[] command = {"cmd.exe", "/C", "Start", "D:\\test.bat"};
        Runtime r = Runtime.getRuntime();
        Process p = r.exec(command);
        p.waitFor();

    } catch (Exception e) {
        e.printStackTrace();
        JOptionPane.showMessageDialog(this, "Error" +"Execution!","Error",JOptionPane.ERROR_MESSAGE);
        }
    } catch (IOException ex) {
        Logger.getLogger(DBBackUp.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

当我运行这段代码时，我只有命令提示符。.bat 文件未运行。如何使用此代码执行批处理文件？

预先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:12:44.967

考虑使用[Apache Commons Exec](http://commons.apache.org/proper/commons-exec/commandline.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:10:07.493

让你的“test.bat”是这样的：

```
dir
pause 
```

然后您可以按如下方式执行此批处理文件：

```
try
{
 Runtime r = Runtime.getRuntime();
 Process p = r.exec("rundll32 url.dll,FileProtocolHandler " + "D:\\test.bat");
 p.waitFor();
}catch(Exception ex){ex.printStackTrace();} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:20:31.767

你可以尝试这样的事情：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

public class BatchExecuteService {

    public static void main(String[] args) {
        BatchExecuteService batchExecuteService = new BatchExecuteService();
        batchExecuteService.run();
    }

    public void run() {
        try {
            String cmds[] = {"D:\\test.bat"};
            Runtime runtime = Runtime.getRuntime();
            Process process = runtime.exec(cmds);
            process.getOutputStream().close();
            InputStream inputStream = process.getInputStream();
            InputStreamReader inputstreamreader = new InputStreamReader(inputStream);
            BufferedReader bufferedrReader = new BufferedReader(inputstreamreader);
            String strLine = "";
            while ((strLine = bufferedrReader.readLine()) != null) {
                System.out.println(strLine);
            }
        } catch (IOException ioException) {
            ioException.printStackTrace();
        }
    }
} 
```

# apache - Magento 结帐页面 - 没有 SSL 很好，但 HTTPS 返回 403 您无权访问此服务器上的 /index.php

> ID：15730624
> 
> 赞同：2
> 
> 时间：2013-03-31T14:47:04.907
> 
> 标签：apache, magento, ssl, https

我的一个 magento 商店（准备投入生产）一直很好，直到今天我将 SSL 添加到 apache 服务器。SSL 安装很好，地址栏中显示了挂锁。

问题是单击 \\"check out\\" 后服务器转到 https 并返回（我已重写）

[https://www.thedomain.com/checkout/onepage/](https://www.thedomain.com/checkout/onepage/)

* * *

禁止的

您无权访问此服务器上的 /index.php。

## Apache/2.2.22 (Ubuntu) 服务器在 www..... 端口 443

在没有 SSL 连接的情况下，一页结帐工作正常

我的 ssl 配置文件（存储 SSL 密钥/证书位置）如下：

```
<IfModule mod_ssl.c>
<VirtualHost *:443>
ServerAdmin webmaster@localhost

DocumentRoot /var/www
<Directory />
Options FollowSymLinks
AllowOverride None
</Directory>
<Directory /var/www/>
Options Indexes FollowSymLinks MultiViews
AllowOverride All
Order allow,deny
allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory \\\"/usr/lib/cgi-bin\\\">
AllowOverride All
Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
Order allow,deny
Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/ssl_access.log combined

# SSL Engine Switch:
# Enable/Disable SSL for this virtual host.
SSLEngine on

....
....

<FilesMatch \\\"\\\\.(cgi|shtml|phtml|php)$\\\">
SSLOptions +StdEnvVars
</FilesMatch>
<Directory /usr/lib/cgi-bin>
SSLOptions +StdEnvVars
</Directory>

BrowserMatch \\\"MSIE [2-6]\\\” \\\\
nokeepalive ssl-unclean-shutdown \\\\
downgrade-1.0 force-response-1.0
# MSIE 7 and newer should be able to use keepalive
BrowserMatch \\\"MSIE [17-9]\\\” ssl-unclean-shutdown

</VirtualHost>
</IfModule> 
```

* * *

没有添加到 apache 错误日志中。

因为它在没有 SSL 的情况下运行良好，所以问题一定是由 SSL 配置引起的，我已经将 SSL vhost 设置与非 SSL vhost 进行了比较，仍然没有运气

有人提供帮助吗？这是这家商店上线之前的最后一步……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T17:29:49.017

详细程度上升后的 error_log 显示：

> SSLVerify 设置为“require”且特定于 VirtualHost 的 CA 证书列表的非默认虚拟主机仅适用于支持 TLS 服务器名称指示 (SNI) 的客户端

在 httpd.conf 中注释掉**SSLVerify require**已经解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:43:45.353

尝试使用确切的 url 从后端设置安全基本 url，例如[https://www.yourdomain.com](https://www.yourdomain.com)

# c# - 使用 Response.End() 的成本

> ID：15730625
> 
> 赞同：-1
> 
> 时间：2013-03-31T14:47:06.640
> 
> 标签：c#, response, threadabortexception

我正在使用以下代码下载文件，但我面对的是`Response.End`总是导致`Exception`. 这是我的应用程序行为的成本吗？如果是的话，如何获得另一种下载文件的方法。我试图用来`Thread.ResetAbort()`处理异常，但这会导致不需要的额外数据被添加到文件中

```
try
            {
                   DownloadFiles();                       
                   Response.End();                   
            }
            catch (ThreadAbortException)
            {
               // Thread.ResetAbort();
            }
            catch (GSException ex)
            {
                Response.ClearHeaders();
                hdnResult.Value = ex.Message;
                // ClientScript.RegisterStartupScript(this.Page.GetType(), "checkDownloadError", "window.parent.checkDownloadError('" + ex.Message + "');", true);
            }
            catch (Exception)
            {
                Response.ClearHeaders();
                hdnResult.Value = "Oops! Something unexpected happened. Please try again later";
                //ClientScript.RegisterStartupScript(this.Page.GetType(), "checkDownloadError", "window.parent.checkDownloadError('Oops! Something unexpected happened. Please try again later');", true);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:04:24.347

如果您不想支付附带的*异常抛出成本*`Response.End`，则可以改用该[`Application.CompleteRequest`](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.completerequest.aspx)方法。

# python - 使用 Mountain Lion 10.8 启动 IPython

> ID：15730630
> 
> 赞同：0
> 
> 时间：2013-03-31T14:47:39.223
> 
> 标签：python, macos, ipython, python-3.3, ipython-notebook

在上周的 ML 10.8 之前，我会使用`ipython notebook --pylab=inline`运行 Python3 的地方调用 IPython 网络笔记本。升级后一切都变得更糟。围绕文件系统进行了很多黑客攻击并将权限`/System/Library/Frameworks/Python.Framework`从 root 更改为我自己，我现在可以运行`python ipython3 notebook --pylab=inline`但是`ipython`当没有前面的 python 命令运行时，想要打开 Python 2.7。任何有类似问题的人或任何人都可以就这里发生的事情提供见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:38:02.573

我认为你们都在复杂化方面做得很好，没有必要这样做，“达到”正确可执行文件的建议方法很简单

```
env python 
```

或类似的，取决于与给定可执行文件关联的名称是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:58:28.640

预计`ipython`将使用 Python 2.x。您应该`ipython3`使用 Python 3.x。

# android - 如果有人打电话给我的手机，是否可以发送“超出范围”/“超出覆盖范围”信号？

> ID：15730631
> 
> 赞同：0
> 
> 时间：2013-03-31T14:47:49.323
> 
> 标签：android

我想开发一个应用程序，可以让呼叫者感觉到被叫号码已关闭或不在覆盖范围内。我确信它可以在操作系统级别完成，但不确定是否可以使用提供的 API 完成。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:58:17.550

不支持使用公共SDK向电信运营商发送此类消息，抱歉。

# c# - Jquery Ajax 请求在 IE 10 上不起作用（由于缓存）

> ID：15730635
> 
> 赞同：13
> 
> 时间：2013-03-31T14:48:04.347
> 
> 标签：c#, jquery, internet-explorer, asp.net-mvc-4

我想从这个开始。我受够了 IE。我有以下代码：

```
$(function () {
$("#cal").on('click', "#forward", function () {
    $.ajax({
        url: "Home/Calendar?target=forward",
        type: "GET",
        success: function (result) {
            $("#cal").html(result);
        }
    });
  });
});

 $(function () {
$("#cal").on('click', "#backwards", function () {

    $.ajax({
        url: "Home/Calendar?target=backwards",
        type: "GET",
        success: function (result) {
            $("#cal").html(result);
        }
    });
});
}); 
```

它是对 C# MVC 应用程序中控制器操作的 ajax 调用。它只是来回替换 html 的日历月份。现在我知道您需要由于`html()`调用而重新附加事件，这就是我使用`on()`JQuery 1.7 的原因。我也用过`delegate()`。在 FF 中，Chrome 可以按预期工作。在 IE 10 中它没有。我很茫然。我知道 IE 在 IE8 和 JQuery < 1.5 中存在委托问题，但事实并非如此。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-31T15:11:03.047

我正在回答这个问题，仅供其他人将来参考。由于某种我无法理解的原因，IE 似乎正在缓存 AJAX 请求。

我注意到使用 IE 10 提供的（令人惊讶的好）开发人员工具，我得到了对我的 AJAX 请求的 304 not modified 响应。在 Firefox 或 Chrome 中情况并非如此（响应为 200）。

`cache: false`我在我的 AXAJ JQuery 函数中添加了该选项，现在它可以按预期工作。

IE 永远不会让我感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T16:35:30.067

简要补充一下，鉴于我对这个主题的理解（很少）。显然，XmlHttpRequest 规范说 XHR GET 命令的行为就像标准网页检索（例如单击常规旧链接），因此可以缓存 XHR GET 命令。IE 团队选择遵守此规范，而其他浏览器制造商则没有。虽然我可以在这种方法中看到一些逻辑，但我认为我们这些每天处理 XHR 请求的人会强调说，我们宁愿默认关闭缓存，而不是打开缓存。(-;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T04:30:17.297

很久很久以前，我在 IE 上遇到了这个问题……现在我总是强调用随机的尾随键/值对编写我的 ajax 调用。

我还补充`cache: false`说，虽然我自己发现它并不总是做它应该做的（好吧，也许它只是 IE 没有做它应该做的）

这就是我设置它们的方式...

```
$('#trigger').submit( function(e){

    e.preventDefault();

    var randnum = Math.floor(Math.random()*1001); //magic starts here

    $.ajax({
        type: "POST",
        url: "folder/file.php",
        cache: false,
        data: "random=" + randnum, //pure magic
        success: function(){
            // do stuff here
        }

    }); 

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T09:46:41.113

也遇到了这个问题。事实证明，如果 POST 响应具有`cache-control: max-age`. 第一个请求将获取数据，但之后所有请求（即使您添加随机属性）都将是 304 的。

在这种情况下，IE 甚至不会询问服务器内容是否发生了变化，它只是假设如果它有，`max-age`那么进行请求就没有意义了。

此外，XHR 规范说 304 不应该传递任何数据，所以基本上你会得到一个 POST 的空响应（仅在 IE 9 和 10 上）。

# google-apps-script - Google Doc Spreedsheet 条件格式脚本

> ID：15730638
> 
> 赞同：0
> 
> 时间：2013-03-31T14:48:23.587
> 
> 标签：google-apps-script, google-sheets, gs-conditional-formatting

我知道在比较两个单元格时，Google Docs 电子表格目前不支持条件格式。

如果`B3 >= E3`，则`E3`背景为绿色，但如果`B3 < E3`，则`E3`背景为红色

取而代之的是使用 JavaScript 解决方案。

我是脚本新手，找不到`but`.

我发现了这个，它将执行格式化的第一部分。

```
var value1Rule1 = s.getRange('b3').getValue();
var value2Rule1 = s.getRange('e3').getValue();
var range3Rule1 = s.getRange('e3');
var color1 = 'green';

if (value1Rule1 >= value2Rule1) range3Rule1.setBackgroundColor(color1);
else range3Rule1.setBackgroundColor('white'); 
```

但我不知道我会在脚本中放在哪里，如果`value1 is < value2`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T22:09:23.947

这是您可以使用的一个很好的例子。[https://webapps.stackexchange.com/questions/45937/conditional-formatting-using-other-cells-in-google-docs](https://webapps.stackexchange.com/questions/45937/conditional-formatting-using-other-cells-in-google-docs)

听起来您需要将代码包装在函数名称中，添加一个新触发器，其中“运行”设置为，事件设置为“来自电子表格”“编辑时”。

编辑：

这是另一个避免使用触发器的示例：[https ://webapps.stackexchange.com/questions/16745/google-spreadsheets-conditional-formatting-based-on-another-cells-content?rq=1](https://webapps.stackexchange.com/questions/16745/google-spreadsheets-conditional-formatting-based-on-another-cells-content?rq=1)

```
function colorAll() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 2;
  var endRow = sheet.getLastRow();

  for (var r = startRow; r <= endRow; r++) {
    colorRow(r);
  }
}

function colorRow(r){
  var sheet = SpreadsheetApp.getActiveSheet();
  var dataRange = sheet.getRange(r, 1, 1, 3);

  var data = dataRange.getValues();
  var row = data[0];

  if(row[0] === ""){
    dataRange.setBackgroundRGB(255, 255, 255);
  }else if(row[0] > 0){
    dataRange.setBackgroundRGB(192, 255, 192);
  }else{
    dataRange.setBackgroundRGB(255, 192, 192);
  }

  SpreadsheetApp.flush(); 
}

function onEdit(event)
{
  var r = event.source.getActiveRange().getRowIndex();
  if (r >= 2) {
    colorRow(r);
  }
}

function onOpen(){
  colorAll();
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-23T20:28:35.357

目前不需要脚本：

选择 E3 到要格式化的范围的末尾（例如 E3:E99）和 Format、Conditional formatting...、Format cells if...`greater than`和

```
=B3 
```

用红色填充。`Less than or equal to`使用and添加另一个规则（相同范围）

```
=B3 
```

用绿色填充和`Done`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T15:00:35.273

尝试这个

```
var value1Rule1 = s.getRange('b3').getValue();
var value2Rule1 = s.getRange('e3').getValue();
var range3Rule1 = s.getRange('e3');
var color1 = 'green';

if (value1Rule1 >= value2Rule1) range3Rule1.setBackgroundColor(color1);
else range3Rule1.setBackgroundColor('red'); 
```

它在“else”语句中将单元格变为“红色”。

# mysql - MySQL：将分形年份转换为 DATETIME

> ID：15730641
> 
> 赞同：3
> 
> 时间：2013-03-31T14:48:27.440
> 
> 标签：mysql, date

我有一个时间存储为分数年，例如。1994.232424。我需要将这些转换为 SQL 日期时间。

诀窍是小数年是根据闰年的不同天数计算的。

我很欣赏如何写下将其转换为日期的 SQL 表达式的一个很好的例子，包括闰年条件？自年初以来，我至少需要几秒钟。

闰年条件（虽然在 mssql 中 - 我需要 MySQL 选项）将是（根据[http://www.c-sharpcorner.com/blogs/8381/leap-year-logics-in-sql-server.aspx](http://www.c-sharpcorner.com/blogs/8381/leap-year-logics-in-sql-server.aspx)）

```
SET @year = 2012
IF (((@year % 4 = 0) AND (@year % 100 != 0)) OR (@year % 400 = 0))
PRINT '1'
ELSE
print '0' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:18:35.947

如果我正确理解你的问题，我的想法是计算明年第一天和当年第一天之间的秒数：

```
SELECT UNIX_TIMESTAMP(MAKEDATE(1994+1,1)) - UNIX_TIMESTAMP(MAKEDATE(1994,1)) 
```

然后将此数字乘以给定日期的小数部分：

```
SELECT (UNIX_TIMESTAMP(MAKEDATE(1994+1,1)) - UNIX_TIMESTAMP(MAKEDATE(1994,1))) * 0.232424 
```

这给出了自年初以来的秒数。然后，您可以将此秒数添加到一年的第一天：

```
SELECT
  MAKEDATE(1994,1)
  + INTERVAL (UNIX_TIMESTAMP(MAKEDATE(1994+1,1))
             - UNIX_TIMESTAMP(MAKEDATE(1994,1))) * 0.232424 SECOND; 
```

这是一个通用查询：

```
SET @yourdate = 1994.232424;

SELECT
  MAKEDATE(TRUNCATE(@yourdate, 0),1)
  + INTERVAL (UNIX_TIMESTAMP(MAKEDATE(TRUNCATE(@yourdate, 0)+1,1))
             - UNIX_TIMESTAMP(MAKEDATE(TRUNCATE(@yourdate, 0),1))) *
             (@yourdate-TRUNCATE(@yourdate, 0)) SECOND; 
```

**编辑**

我想使用 UNIX_TIMESTAMP 因为我不想计算一年是否是闰年，我只想让 MySql 自动计算它。但还有其他选择。

如果年份是闰年，则一年中的秒数是 31536000 + 86400 多。

另一个想法是使用`MAKEDATE(year, 60)`, 查看返回的日期是三月还是二月。`MAKEDATE(TRUNCATE(@yourdate, 0),60)=2`闰年将被评估为 TRUE (=1)，否则为 FALSE (=0)：

```
SELECT
  MAKEDATE(TRUNCATE(@yourdate, 0),1)
  + INTERVAL (31536000 + (MAKEDATE(TRUNCATE(@yourdate, 0),60)=2)*(86400)) *
             (@yourdate-TRUNCATE(@yourdate, 0)) SECOND; 
```

但当然你可以使用你的公式：

```
(31536000 + (((@year % 4 = 0) AND (@year % 100 != 0)) OR (@year % 400 = 0))*86400) 
```

计算一年中的秒数，然后将此结果乘以小数部分。

# lua - 表字段中的变量名不起作用

> ID：15730646
> 
> 赞同：4
> 
> 时间：2013-03-31T14:48:57.510
> 
> 标签：lua, roblox, lua-table

我在为游戏编写一些代码时遇到了一个问题。看来我不能在如下语句中使用变量；

```
local Username = "Cranavvo"
game.Players.Username:BreakJoints() -- Kills the player 
```

输出告诉我“没有像'用户名'这样的用户”应该是`"Cranavvo"`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T15:38:28.843

来自[桌子上的 Lua PiL](http://www.lua.org/pil/2.5.html)

> 要表示记录，您可以使用字段名称作为索引。Lua 通过**`a.name`**为 **`a["name"]`**.
> 
> 初学者的一个常见错误是**`a.x`**与**`a[x]`**. 第一种形式表示**`a["x"]`**，即由字符串 索引的表**`"x"`**。

因此，当您尝试：

```
game.Players.Username:BreakJoints() 
```

Lua 将其解释为：

```
game["Players"]["Username"]:BreakJoints() 
```

这当然是错的。如果您想使用不同的名称作为表的索引，请像这样使用它们：

```
local foo = "Cranavvo"
game.Players[foo]:BreakJoints() 
```

* * *

但要提到的是，[Player](http://wiki.roblox.com/index.php?title=Player)类没有[BreakJoints方法，您必须借助](http://wiki.roblox.com/index.php?title=API:Class/Model/BreakJoints)[.Character](http://wiki.roblox.com/index.php?title=Character)属性获取角色[模型](http://wiki.roblox.com/index.php?title=API:Class/Model/BreakJoints)，如下所示：

```
local foo = "Cranavvo"
game.Players[foo].Character:BreakJoints() 
```

还需要提到的是，如果具有该名称的玩家不存在，则代码将中断，并且该字符可以为空，在这种情况下它也会中断。因此，您需要添加一些错误处理。像这样：

```
local foo = "Cranavvo"
local Player = game.Players:findFirstChild(foo)
if Player ~= nil and Player.Character ~= nil then
    Player.Character:BreakJoints()
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:48:11.030

在 roblox 中执行此操作的正确方法是：

```
local Username = "Cranavvo"
local p = game.Players:FindFirstChild(Username)
if(p ~= nil) then
    if(p.Character ~= nil) then
        p.Character:BreakJoints()
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T14:53:18.273

在执行代码时仔细检查用户是否真的存在。

它也应该是：

```
game.Players.Username:BreakJoints() 
```

编辑：

我误读了您想要做的事情：在

```
...Players.Username 
```

lua 将*Username*解释为命名索引，并且不使用预先声明的 Username 变量。

如果要访问具有动态名称的数组变量，可以这样做：

```
game.Players[Username]:BreakJoints() 
```

另外在 roblox 中，您可以使用以下内容：

```
game.Players:GetPlayerByID(userId):BreakJoints() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-20T08:49:51.777

变量有时在 Lua 中非常令人困惑。

例如，有**全局**变量和**局部**变量。

**局部**变量是操作结束后可以忘记/擦除的变量：`local x = 2`

**全局**变量是留在游戏/应用程序中不会被遗忘的变量，这对高分和其他整洁的东西很好。`x = 2`（注意没有**“本地”**声明）

# matlab - 避免integral2的循环

> ID：15730648
> 
> 赞同：1
> 
> 时间：2013-03-31T14:40:54.707
> 
> 标签：matlab, numerical-integration

我有以下代码：

```
Og = [4 3;3 4];
Oginv = inv(Og);

syms s1 s2
z = [s1 s2]*Oginv*[s1;s2];

fun  = matlabFunction(z*exp(-z/2));
cdf2 = integral2(fun,-inf,3,-inf,3, 'AbsTol', 1.e-6); 
```

我想针对 和 的`Og`不同值和不同值来评​​估它`xmax`，`ymax`在这种特殊情况下是`Og = [4 3;3 4]`, `xmax = 3`, `ymax = 3`。有什么办法可以在没有循环的情况下做到这一点？我想避免循环，因为我的速度有问题。我试过`cellfun`了，但它没有帮助。

# php - CakePHP，CakeEmail，发送不带文件的附件

> ID：15730653
> 
> 赞同：1
> 
> 时间：2013-03-31T14:50:29.333
> 
> 标签：php, email, cakephp, cakephp-2.3

[`CakeEmail`](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)有一个非常简单的 API，其中一个选项是`attachments`，它看起来像一个路径数组。

但是，我的系统构建为将 PDF 创建为字符串 - 它永远不会保存在系统上 - 然后通过电子邮件发送出去。那么如何让 CakeEmail 将二进制字符串附加为文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:52:21.650

您可以使用我的 EmailLib，它包装了 CakeEmail 类并提供了从 blob 写入的可能性（可以说没有文件）： [https ://github.com/dereuromark/tools/blob/master/Lib/EmailLib.php#L100](https://github.com/dereuromark/tools/blob/master/Lib/EmailLib.php#L100)

或提取必要的信息来编写您自己的扩展程序，以提供您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T10:46:30.860

在即将推出的 cakePHP 2.4 中也可以从 blob 写入文件 - 请参阅以下链接中的 4.3。[http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-attachments](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-attachments)

# windows-phone-7 - 绑定到复选框集合

> ID：15730654
> 
> 赞同：2
> 
> 时间：2013-03-31T14:50:35.863
> 
> 标签：windows-phone-7, xaml

我正在尝试为 Windows Phone（针对 WP7.1）做一些 XAML 绑定，并且我有一组要显示的复选框。我想把它们放在里面`WrapPanel`

我将使用哪些控件来绑定到复选框集合？我没有看到`WrapPanel`. 所以我不确定我会用什么。

```
 <ListBox Height="auto" Name="lbAssignments" BorderThickness="1" BorderBrush="Black" ItemsSource="{Binding DataList}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Vertical">
                    <TextBlock x:Name="TextBlock" Text="{Binding Title}"  HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10,0,0,10" FontSize="26.667" TextWrapping="Wrap"/>
                    <TextBlock x:Name="TextBlock1" Text="{Binding Title}"  HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10,0,0,10" FontSize="26.667" TextWrapping="Wrap"/>
                    <toolkit:WrapPanel Height="400" Width="400">
                        <!--collection of checkboxes-->
                    </toolkit:WrapPanel>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T04:02:24.363

绑定到 UI 控件集合并不完全是您想要做的事情。相反，我建议绑定到一个集合。出于多种原因 - 性能、内存分配和一般维护/灵活性。

既然你提到你有 a `List<string>`，你可以把它绑定到 a `ListBox`：

```
<ListBox ItemsSource="{Binding YourList}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <CheckBox Content="{Binding}"></CheckBox>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

但是，如果存在适当的支持，您仍然可以继续将元素绑定到其他元素的集合。您可以使用`ItemsControl`：

```
<ItemsControl ItemsSource="{Binding ElementName=myPage, Path=SomeCollection}">

</ItemsControl> 
```

在这里，`SomeCollection`还不如`ObservableCollection<CheckBox>`。

# mysql - 数据库设计/性能 - 基于公司覆盖的城市/城镇的位置搜索

> ID：15730657
> 
> 赞同：0
> 
> 时间：2013-03-31T14:50:43.397
> 
> 标签：mysql, performance, database-design, location

****这里使用 PHP/MySQL** **

**设想：**

某快递公司在全国有多个仓库/仓库，每个仓库只覆盖选定的城市/城镇。当用户访问他们的站点时，他们可以搜索最近/本地的仓库。

**我研究了两个选项，每个选项解释如下：**

**选项一（无效）：**

我用纬度和经度存储每个站点并进行简单的半径搜索，因此当用户进入他们的城市/城镇时，我使用谷歌地图进行地理编码并运行半径查询以获取 25 英里内的所有站点，这确实有效。

但它有一个很大的缺点，一些仓库不覆盖选定的城镇/城市，并且半径搜索没有考虑到这一点，导致即使它们不覆盖该区域，它也会在结果中显示仓库/仓库。

**选项二：**

将城镇/城市列表存储在一个数据库表中，并将站点存储在另一个表中。然后有一个关系表，将站点链接到它们所覆盖的城镇/城市。用户必须输入确切的城市（`LIKE`此处使用 mySQL）名称才能返回结果，这将搜索城市表，然后执行一个`LEFT JOIN`to depots 表。

这里的缺点是关系表会快速增长，最多可以有 500 万条记录，这可能会在后期出现性能问题。

**选项二的数据库设计：**

仓库表

```
-   ID
-   D_NAME
-   D_ADDRESS
-   D_POSTCODE
-   D_TEL
-   AND SO ON… 
```

城市表

```
-   ID
-   NAME 
```

关系表

```
-   ID
-   CITY_ID
-   DEPOT_ID 
```

**问题：**

我还有其他选择吗？

选项二是正确的方法吗？就性能而言是否可以？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:19:30.280

我认为您描述的关系表没有问题。只要 city 表对搜索词（城市名称，我假设）和外键 ID 有一个复合索引，它就可以完美地工作。

您不想提供完整的通配符搜索（`LIKE %ancouv%`以查找 Vancouver），但应将搜索限制为前缀搜索（`LIKE vancou%`）。否则索引将没有帮助，数据库服务器将不得不进行全表扫描。

测试时，使用`EXPLAIN SELECT ...`命令确保使用您的索引。此外，您应该始终使用实际数量的测试数据进行测试。如果您只有一小部分测试数据，查询优化器可能会选择与上述数百万行不同的路径。例如，对于一个非常小的表，它可能会决定执行完整扫描而不是索引查找可能是更好的方法，从而导致您相信索引永远不会被使用。

# c++ - == 和 != 运算符是编译器生成的吗？

> ID：15730659
> 
> 赞同：0
> 
> 时间：2013-03-31T14:50:58.997
> 
> 标签：c++, equals-operator

我需要提供 == 和/或 != 运算符吗？我在这里读过：[为什么 C++ 编译器不定义 operator== 和 operator!=？](https://stackoverflow.com/questions/217911/why-dont-c-compilers-define-operator-and-operator)我这样做了，但是当我实际尝试它（没有提供它们并尝试使用它们）时，程序编译得很好。发生什么了？

如果重要，请使用 VS2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:53:00.747

这些运算符是为基本的、语言定义的类型定义的，而不是为您的自定义类型定义的。例如，它适用于`int`s。但是除非你明确地提供它们，否则不会 -如果你没有告诉它如何做，`class foo;`编译器不知道**如何比较你自己定义的类型。**

# entity-framework - 迁移不会改变我的桌子

> ID：15730662
> 
> 赞同：1
> 
> 时间：2013-03-31T14:51:08.457
> 
> 标签：entity-framework, entity-framework-5, entity-framework-migrations

我刚刚在我的项目中启用了迁移并添加了一些字段`UserProfile`：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
    public string Description { get; set;}
    public DateTime? CreatedOn { get; set; }
    public DateTime? LastAccess { get; set; }
} 
```

我`Add-migration AddFieldsForUserProfile`和它创造了：

```
 ...
    public override void Up()
    {
        AddColumn("dbo.UserProfile", "Email", c => c.String());
        AddColumn("dbo.UserProfile", "Description", c => c.String());
        AddColumn("dbo.UserProfile", "CreatedOn", c => c.DateTime());
        AddColumn("dbo.UserProfile", "LastAccess", c => c.DateTime());
    }
    ... 
```

`Update-database -verbose`产生了这个输出：

```
Target database is: 'Hifi.Models.HifiContext' (DataSource: (localdb)\v11.0, Provider: System.Data.SqlClient, Origin: Convention).
Applying code-based migrations: [201303311011083_AddFieldsForUserProfile].
Applying code-based migration: 201303311011083_AddFieldsForUserProfile.
ALTER TABLE [dbo].[UserProfile] ADD [Email] [nvarchar](max)
ALTER TABLE [dbo].[UserProfile] ADD [Description] [nvarchar](max)
ALTER TABLE [dbo].[UserProfile] ADD [CreatedOn] [datetime]
ALTER TABLE [dbo].[UserProfile] ADD [LastAccess] [datetime]
[Inserting migration history record]
Running Seed method. 
```

显然一切顺利，但是在收到列 CreatedOn 不存在的错误后，我使用服务器资源管理器查看了数据库，实际上，我的`UserProfile`表中缺少所有 4 个列。我做错什么了？

# 编辑

我发现了我的错误。不知何故，我有两个不同的`mdf`文件`aspnet-Hifi-20130330054424.mdf`，`Hifi.Models.HifiContext.mdf`它们的文件大小相同，我认为两者都是必要的。我的服务器资源管理器正在使用`aspnetxx.mdf`并且数据库更改为`HifiContext.mdf`. 真丢人。

在相关说明中，我无法正确显示所有注册用户的列表。尽管我可以完美登录，但它始终是空的。不知何故登录`aspnetxx.mdf`被查询，但我的`MemberListController`查询`HifiContext.mdf`。更改连接字符串后，我最初没有注册用户，添加了新用户`HifiContext.mdf`并且列表正常工作。这怎么发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:38:54.563

你确定你正在寻找正确的数据库吗？
看起来是这样。你有没有得到任何错误？任何特殊权限等。

我的建议是创建一个新的连接 - 例如配置和

```
<connectionStrings>
    <add name="HifiContext" connectionString="Data Source=MACHINE\INSTANCE;Initial Catalog=HiFi;Integrated Security=True; MultipleActiveResultSets=True" providerName="System.Data.SqlClient" />
</connectionStrings>` 
```

...并备份您的旧版本以防万一。即从头开始重新创建 Db

如果没有任何效果 - 如果您刚刚打开迁移，请尝试重新创建 - 没有其他想法。

至于为什么会发生不同步 - 很难确定 - 但我猜你也有“两个连接字符串”（或在某种程度上）。

> 确保您的连接字符串与您的“命名”相同 `dbcontext`- 或直接将连接放在您的 DbContext

. 有时这是一个问题，因为 EF/CF 的默认设置并不明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:03:35.187

在您的启动代码中调用此方法以使用新字段重新创建数据库：

```
public void CheckForDBChanes()
        {

            Database.SetInitializer(new DropCreateDatabaseIfModelChanges<Context>());
        } 
```

# sql - Azure 更换支出限额

> ID：15730663
> 
> 赞同：0
> 
> 时间：2013-03-31T14:51:14.800
> 
> 标签：sql, web-services, azure, limit, subscription

在 Azure 中，我通过将 SQL 数据库设为“商业”版而不是“Web”版，超出了订阅中的内容。支出限制禁用了我的帐户，但我希望我的服务能够恢复并运行。由于我的帐户被禁用，我无法在管理门户中执行任何操作。所以我取消了支出限制，并将 SQL 类型从“业务”更改回“Web”。

现在我要回消费限额，但我不知道如何设置。下个月会自动放置吗？我可以自己设置吗？

请尽快回复，这很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:41:15.903

目前无法重置支出上限。[关于支出上限](http://www.windowsazure.com/en-us/pricing/spending-limits/)的信息非常简单明了。

> *“您可以随时删除支出限制。但是，一旦删除，支出限制功能将无法重新启用。您应该在任何具有您无法离线的应用程序的订阅上删除此支出限制。”*

# java - JTextArea 总是为空？

> ID：15730666
> 
> 赞同：3
> 
> 时间：2013-03-31T14:51:32.070
> 
> 标签：java, swing, jframe, jbutton, jtextarea

这是我的代码，非常简单，它只是在中心创建`JFrame`一个`JTextArea`。

`if(!txtSource.getText().trim().equals("") && txtSource != null)`

即使我在 JTextArea 中输入了文本，也永远不会满足。

如果 JTextArea 有一些文本，我只想执行 methodA() 。

```
private Container content;
private JTextArea txtSource;

public Test() {
    this.setTitle("Test");
    this.setSize(600,200);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setLayout(new BorderLayout());
    content = this.getContentPane();
    content.add(getTextArea(), BorderLayout.CENTER);
    content.add(button(), BorderLayout.SOUTH);
    this.setVisible(true); 
}

private JTextArea getTextArea() {
    JTextArea txtSource = new JTextArea(20, 80);
    return txtSource;
}

private JButton button() {

    JButton btn = new JButton("Click me");

    btn.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
             if(!txtSource.getText().trim().equals("") && txtSource != null) {
                 methodA();
             } else { 
                 System.out.println("Please paste your script in.");
         }
    }
} 
```

请在这里帮我...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T14:57:18.923

你正在[隐藏](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.1)`txtSource`变量，替换

```
JTextArea txtSource = new JTextArea(20, 80); 
```

和

```
txtSource = new JTextArea(20, 80); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:57:51.203

这可能是因为您从未初始化`txtSource`. 当然你声明了它，但是仅仅因为`getTextArea()`' 的返回值被调用`txtSource`并没有像这样分配类变量。

在该`test()`方法中，您应该分配`this.txtSource`为`getTextArea()`，然后将其添加到容器中。

# php - mySQLi_affected_rows 检查不起作用，还是...？

> ID：15730672
> 
> 赞同：2
> 
> 时间：2013-03-31T14:52:11.613
> 
> 标签：php, mysql, mysqli, sql-update, rows-affected

（对不起，我真的不知道我在做什么。）

我在 Facebook 上的 iframe 中有这个 Unity 游戏，调用同一目录中的一个 php 文件，这很有效。我想要它做的是更新玩家记录（如果存在），如果不存在则制作一个。

该脚本运行，但它总是返回“不在此处”，当我检查数据库时，实际上每次都在创建记录，但对于日期时间字段相同。所以我不明白为什么affected_rows 永远不会返回为“1”。

```
<?php
$db = @new mysqli('••.•••.•••.••', '•••••••••••', '••••••••','•••••••••••');
if ($db->connect_errno) 
{
echo("Connect failed "+mysqli_connect_error());
exit();
}
$inIP = $_POST["ip"];
$playerIP = mysqli_real_escape_string($db, $inIP);

$inUN = $_POST["un"];
$playerUN = mysqli_real_escape_string($db, $inUN);

$query = "UPDATE lobby SET whens=NOW(), wherefores='$playerIP', whys=0 WHERE whos='$playerUN'";
mysqli_query($db, $query);
if (mysqli_affected_rows($db) > 0)
    {
    echo "here";
    }
else
    {
    $query2 = "INSERT INTO lobby (whens,whos,wherefores,whys) values (NOW(),'$playerUN','$playerIP',0)";
    mysqli_query($db, $query2);
    echo "not here";
    }   

if ($db)
    {       
    $db->close();
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:05:03.297

你有一个错字：

```
wherefores=$playerip 
```

它应该是

```
wherefores=$playerIP 
```

正因为如此

```
mysqli_affected_rows($db) 
```

返回

```
-1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T20:31:56.750

听起来您和我遇到了同样的问题，尤其是当您通过调试器运行代码时。我已经调查了 Netbeans 和 Xdebug 的问题，这似乎是 MySQLi 扩展本身的一个错误。已作出相应的[错误报告。](https://bugs.php.net/bug.php?id=67348)与此同时，您可以改用另一个表达式，例如：

```
if (mysqli_sqlstate($dbc) == 00000) {
   //your code
} 
```

继续调试剩余的代码。

# html - 浮动 div 重叠？

> ID：15730673
> 
> 赞同：2
> 
> 时间：2013-03-31T14:52:22.407
> 
> 标签：html, css, css-float

目前，一个 div 是浮动的 - 我的问题是为什么两个 div 重叠，即使每个 div 都设置了尺寸？我怎样才能解决这个问题？

**HTML：**

```
 <div class="wrapper">
    <div class="block1">
    </div>
    <div class="block2">
    </div>
 </div> 
```

**我的 CSS：**

```
.wrapper {border:black solid;width:500px;height:1000px}
.block1 {width:300px;height:300px;float:right;border:solid red;}
.block2 {width:300px;height:300px;border:solid green;} 
```

**jsfiddle在这里-http:** [//jsfiddle.net/FLwUA/1/](http://jsfiddle.net/FLwUA/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T15:02:55.420

两个 div 重叠，因为一个固定在 DOM 布局中（非浮动的），另一个有效地从 DOM 结构中移除（浮动的）并且可以自由叠加，因为这两个不会并排放置在父级中容器由于宽度是两个小。

要解决此问题，有多种选择，具体取决于您所说的修复。

您可以在非浮动 div 上使用 CSS 'clear' 属性来强制它的一侧或两侧没有任何内容（在给定的场景中，'clear:both;' 或 'clear:left;' ）。

或者

您可以将非浮动 div 设置为浮动，这也会将其从 DOM 布局中移除，使其现在与另一个浮动 div 处于相同的情况。

* * *

**额外的**

仅供参考，以防所有浮动对象都成为问题。在不浮动 div 的情况下获得相同结果的一种方法是使用“display:inline-block;” 它们都具有 CSS 属性，但是您需要在 HTML 中交换两个 div 的顺序以获得相同的布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T14:55:05.017

这是因为您使用像素为它们提供定义的宽度 - 您的包装器宽度仅为`500px`，但是您使用`300px`的`300px`div 内部等于等于，`600px`因此它最终会出现在容器 div 之外。您可以像这样使用与父 div 相关的百分比。这是一个[jsFiddle](http://jsfiddle.net/FLwUA/2/)。

```
.wrapper {border:black solid; width:500px;height:1000px}
.block1 {width:49%;height:300px;float:right;border:solid red;}
.block2 {width:49%;height:300px;border:solid green;} 
```

或者，如果您想保持固定宽度并且如果它们太大，则将一个放在另一个之上，您可以只`float`在第二个块上使用。这是[jsFiddle](http://jsfiddle.net/FLwUA/5/)。

```
.wrapper {border:black solid; width:500px;height:1000px}
.block1 {width:300px;height:300px;float:right;border:solid red;}
.block2 {width:300px;height:300px;float:left; border:solid green;} 
```

# apachebench - Apache Bench：所有并发请求的平均值与平均值

> ID：15730677
> 
> 赞同：43
> 
> 时间：2013-03-31T14:52:44.010
> 
> 标签：apachebench

这两个字段有什么区别？：

*   每个请求的时间（平均值）
*   每个请求的时间（平均值，所有并发请求）

他们每个人是如何计算的？

样本输出：

```
Time per request:       3953.446 [ms] (mean)
Time per request:       39.534 [ms] (mean, across all concurrent requests) 
```

为什么差别很大？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-03-30T14:16:46.560

这是一个ab的测试结果的例子。我发出**1000 个**请求，其中包含**3 个**并发请求。

```
C:\>ab -d -e a.csv -v 1 -n 1000 -c 3 http://www.example.com/index.aspx
This is ApacheBench, Version 2.0.41-dev <$Revision: 1.121.2.12 $> apache-2.0
Copyright (c) 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Copyright (c) 2006 The Apache Software Foundation, http://www.apache.org/

Benchmarking www.m-taoyuan.tw (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Finished 1000 requests

Server Software:        Microsoft-IIS/6.0
Server Hostname:        www.m-taoyuan.tw
Server Port:            80

Document Path:          /index.aspx
Document Length:        25986 bytes

Concurrency Level:      3
Time taken for tests:   25.734375 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      26372000 bytes
HTML transferred:       25986000 bytes
Requests per second:    38.86 [#/sec] (mean)
Time per request:       77.203 [ms] (mean)
Time per request:       25.734 [ms] (mean, across all concurrent requests)
Transfer rate:          1000.72 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   4.4      0      15
Processing:    62   75   9.1     78     109
Waiting:       46   64   8.0     62     109
Total:         62   76   9.3     78     109 
```

如您所见，**每个请求**字段有两个时间。

*   每个请求的时间（平均值）
*   每个请求的时间（平均值，所有并发请求）

请先检查“**测试所用时间”**字段。该值为**25.734375**秒，即**25734.375 毫秒**。

如果我们将**25734.375 ms**除以**1000**，您将得到**25.734 [ms]**，这正是**Time per request（平均，跨所有并发请求）**字段的值。

对于**Time per request (mean)**，值为**77.203 [ms]**。该值比**每个请求的时间（平均所有并发请求）**长一点。那是因为（平均值）被每个特定请求计算并计算它的平均时间。

让我给你一个简单的例子。

假设我们使用**3 个**并发连接发出**3 个**请求。测试**时间为**90**毫秒**，每个请求为 40 毫秒、50 毫秒、30 毫秒。那么这两个**Time per request**的值是多少？

 *******   每个请求的时间（平均值）= ( 40 + 50 + 30 ) / 3 = 40ms
*   每个请求的时间（平均，所有并发请求）= 90 / 3 = 30ms

希望你能理解。:)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-07-14T20:19:21.347

查看您的输入会很有帮助，但是，我相信输出会告诉您执行并发请求不会节省时间。

**每个请求的时间（平均值）告诉您处理一组***并发*请求所花费的平均时间。

**每个请求的时间（平均所有并发请求）告诉您***单个*请求自行处理所花费的平均时间。

如果您同时处理 100 个请求，则需要 3953.446 毫秒。

如果您单独处理它们，则需要 39.534ms * 100 = 3953.4ms

同号。执行并发请求不会节省时间（至少对于您测试的请求总数而言）。******

# android - 安卓双卡支持

> ID：15730678
> 
> 赞同：2
> 
> 时间：2013-03-31T14:52:44.757
> 
> 标签：android

android原生支持双卡功能吗？还是制造商扩展了android来这样做？

特别是，我想制作一个类似于三星手机中的 sim 切换应用程序。

还有谁能告诉我状态栏和通知位于哪个系统apk？我正在尝试对三星 sim 切换功能进行逆向工程。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T14:55:40.167

不，Android 不支持开箱即用的双 SIM 卡。是厂家自定义修改，没有公开的API来控制。

状态栏和通知位于 SystemUI.apk 中，但我怀疑您能否从中得到很多。它们中使用的任何 API 都不太可能提供给第三方。

# ios - ios - 在生产模式下的设备上测试时如何查看 NSLog 语句？

> ID：15730679
> 
> 赞同：0
> 
> 时间：2013-03-31T14:52:55.940
> 
> 标签：ios, ios5, ios6

在通过 USB 连接的设备上测试应用程序的分发版本时，有没有办法可以查看我的 NSLog 语句？

我记得有一种方法可以打开调试，但我不记得那个设置在哪里，或者这是否真的是这样做的方法。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:55:24.170

转到 Xcode 中的管理器窗口（窗口菜单或 Cmd-Shift-2）。在那里选择您的设备。您可以看到它的控制台输出，包括应用程序运行时的应用程序输出。但是，您的日志将与其他日志（来自系统）混合。

![在此处输入图像描述](https://i.stack.imgur.com/yZyRH.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:56:19.903

在 Xcode Organizer Console 中你可以看到。看看这张图片。

XCODE：窗口 - 组织者 - 控制台

![在此处输入图像描述](https://i.stack.imgur.com/Ew3Xb.png)

# verilog - 门控时钟产生

> ID：15730682
> 
> 赞同：0
> 
> 时间：2013-03-31T14:53:10.357
> 
> 标签：verilog, clock, fpga

这是代码首先...

```
always@(posedge clk)
begin
if(cstate==idle)    rclk<=1;
else rclk<=0;
end

always@(negedge clk)
rclk<=0; 
```

我想要实现的是：每次在时钟信号的上升沿，如果信号 cstate 等于 idle(4'b0000)，则 rclk 变为 1，否则变为 0，同时，每次下降clk 的边缘会将 rclk 设置为零。此代码不可合成，因为编译器给出错误“rclk 信号由多个驱动程序驱动”。

如何通过其他技术实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:13:04.870

看起来你想要一个时钟门单元。基于 1 个周期宽的使能信号生成与输入时钟具有相同高电平时间的时钟脉冲。

这样做的一种天真的方法可能是：

```
assign rclk = (cstate==idle) ? clk : 1'b0 ; 
```

可以很容易地合成`assign rclk = (cstate==idle) & clk ;`
`cstate == idle`会出现故障，这就是为什么它通常会被触发器使用，允许答案在使用之前稳定下来。

使用时钟门单元可以防止您在 (rclk) 时钟线上产生毛刺。为此，在 rtl 中实例化您的库时钟门单元是很常见的。在 RTL 中，它可能类似于：

```
reg result;
always @(posedge clk or negedge rst_n) begin
  if (~rst_n) begin
    result <= 1'b0;
  end
  else begin
    result <= (cstate == idle);
  end
end

assign rclk = (result) ? clk : 1'b0 ; 
```

这意味着每个时钟周期的结果都是稳定的，不允许来自比较器的毛刺。

**扩展答案**

我在下面再次用波形包含了我的示例，我用一个简单的计数器替换了你的状态比较，该计数器溢出以重置自身。不是比较匹配到 2'b10；这意味着时钟出现在以下计数（2'b11）上。如果时钟出现在您的比较匹配的完全相同的时间，那么您的时钟上没有故障抑制，并且可能会产生不可靠的硬件。

```
reg [1:0] counter = 0;

always @(posedge clk) 
  counter <= counter+1;

reg  result;
wire result_a = (counter == 2'b10 );

always @(posedge clk or negedge rst_n) begin
  if (~rst_n) begin
    result <= 1'b0;
  end
  else begin
    result <= result_a;
  end
end

assign rclk = (result) ? clk : 1'b0 ; 
```

![时钟门的示例波形](https://i.stack.imgur.com/AAIuS.png)

# performance - 假设平均服务时间已知，网络服务器可以服务的最大并发请求数

> ID：15730684
> 
> 赞同：1
> 
> 时间：2013-03-31T14:53:12.827
> 
> 标签：performance, webserver

是否合乎逻辑地说：“如果请求的平均服务时间是 X，并且请求的可承受等待时间是 Y，那么要服务的最大并发请求数将是 Y / X”？

我想我要问的是，是否有任何我没有考虑到的隐藏因素！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:59:59.230

大体上是的，但是您的服务提供商（在您的情况下为网络服务器）能够并行处理多个请求，因此您应该考虑到这一点。我假设您测量了端到端的服务时间，并且还没有按并行流的数量对其进行平均。您没有也无法实际衡量的另一件事是您的网站的延迟。

您正在研究的是 Erlang 单元（不是使用相同名称的语言），它用于描述系统可以承受多少负载。Erlang 是无单位的（它只是一个数字），起源于老式电话 POTS，它用于描述每个时间段需要多少根电线来处理 X 次呼叫，并且阻塞概率很低。除了 erlang 之外，engset 更多地用于高容量系统，例如移动系统。

它还用于将昂贵的顾问报告用于实时计算机系统和数据库，以描述可能发生性能下降的点。Wikipedia 对此[http://en.wikipedia.org/wiki/Erlang_(unit)](http://en.wikipedia.org/wiki/Erlang_(unit))有一篇文章，而“固定和移动电信、网络系统和服务”一书有一个很好的关于性能分析的章节。

在针对电话系统时，只需用 word webserver 替换它，它的行为就相同了。网络服务器是相同的概念，提供以随机间隔到达并行容量有限的系统的负载。在您的情况下，您可能可以使用负载工具比并行容量更容易计算总负载，然后再计算公式。这样做是为了获得对整个系统模型的一定程度的信心。

当您通过并行流（即 Web 请求）随机到达负载并且服务时间只能平均或估计（即它在现实生活中有所不同）时，Erlang/engsetformulas 非常有用。然后，您可以计算阻塞概率，即在为当前请求提供服务时新请求需要等待的概率，以及它将等待多长时间。它还有助于分析您是否需要并行处理更多请求，或者使每个请求更快（#lines 和 erlang 中的保持时间）

接下来您可能会研究排队系统分析，一旦请求阻塞（队列），模型就会发生轻微变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T19:29:38.933

如果您专门谈论网络服务器，那么不，您的公式不起作用，因为网络服务器旨在处理多个同时请求，使用[分叉或线程](http://www.zerigo.com/article/apache_multi-threaded_vs_multi-process_pre-forked/)。

这使公式变得更加难以量化 - 根据我的经验，Web 服务器可以处理大量（即数百或数千）并发请求，这些请求消耗很少或不消耗时间，但随着请求消耗更多时间，往往会显着降低并发性.

这意味着“平均服务时间”并没有太大用处——它可以隐藏很大的变化，实际上对你影响最大的是异常值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:00:51.120

很多因素都没有考虑

*   内存限制
*   数据锁定约束，例如人们想要更新相同的数据
*   应用程序延迟
*   缓存机制
*   不同的用户在网站上会有不同的任务并放置不同的负载

也就是说，粗略估计的一种简单方法是使用 apache ab 工具（apache benchmark）

例如，一次获取 100 个请求的 1000 倍主页：

```
 ab -c 100 -n 1000 http://www.example.com/ 
```

# silverlight - 未生成 RIA 服务类库和自定义属性

> ID：15730687
> 
> 赞同：0
> 
> 时间：2013-03-31T14:53:33.307
> 
> 标签：silverlight, ria, custom-attributes

我有不同项目的解决方案：

Silverlight 类库：-在此，我有一个指向 CS 文件的“链接”，其属性在 DTO 上使用-在该类中，还有一个修改后的 Datagrid，它使用了该属性

RIA 类库： - 它有一个指向 Web 项目的链接，并加载我的 DTO 类 - 它还具有对之前定义的类库的引用！

Silverlight 项目： - 这是我的运行时并动态加载 RIA 项目。

现在来解决问题：

RIA 项目中的 DTO 没有在真实 DTO 上定义的属性！当我将属性移动到 RIA 类库时，它可以工作，但这是不可能的，因为我无法从我的普通类库中访问该属性！

当我这样做之前，使用普通的 RIA-Project 而不是 RIA-ClasLibrary，它在那里工作。它确实从引用的 DLL 中找到了类型。

但现在我需要另一种方法。

任何人都可以帮忙吗？

啊，错误代码是：属性'...'在客户端项目'...'中不可见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:37:57.617

我现在明白了！像我这样的接缝引用了 Microsoft.Iteractivity 的两个版本，这让 Ria 无法找到属性

# c# - datagridview1.columns[x] 从组合框中获取 id，然后 datagridview1.columns[x] 绑定到表中的另一个字段

> ID：15730692
> 
> 赞同：1
> 
> 时间：2013-03-31T14:54:02.813
> 
> 标签：c#, winforms

我有combobox1 和datagridview1。combobox1 绑定到表 groupperson。

当用户从 combobx1 datagridview1 中选择项目时，显示所选项目的 id。现在我想`datagridview1.columns[10]`绑定到另一个表并显示名称，其中 id = combobox1 选定的项目 id。

例如 ：

在 combobox1 中：当单击按钮`datagridview.columns[10]`显示 5时，用户选择 id = 5 的朋友

现在我想`datagridview1.columns[10]`绑定到另一个表并显示 id = 5 而不是 5 的名称。

# c - 将地址类型转换为函数指针

> ID：15730697
> 
> 赞同：0
> 
> 时间：2013-03-31T14:54:13.653
> 
> 标签：c, bootloader, u-boot

我有来自 u-boot、bootloader 的特定代码，其中地址被类型转换为函数指针，但不确定这样做的目的是什么

```
 void    (*kernel)(bd_t *, ulong r4, ulong r5, ulong r6,ulong r7, ulong r8, ulong r9);//prototype

 kernel = (void (*)(bd_t *, ulong, ulong, ulong,ulong, ulong, ulong))images->ep; 
```

是在第一个语句寄存器 r4,r5,r6,r7,r8,r9 在调用后面的函数时被初始化吗？

其中 images->ep 是内存地址，bd_t 是边框信息结构。

任何人都可以让我知道在函数指针中输入大小写地址的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:56:18.810

好吧，大概他们会在某个时候将该指针称为函数。原始结构条目的名称正在说明这一事实`ep`- 这可能代表“入口点”。有没有类似的东西：

```
kernel(....) // appropriate arguments inserted 
```

或者

```
(*kernel)(....) 
```

在后面的代码中发现？

正如您所提到的，`images->ep`是“内存地址”，这可能意味着它是某种指针类型。在标准 C 中，指针类型之间的转换需要显式转换（除非其中之一是`void *`）。

# amazon-web-services - 使用 CloudFormation 在 VPC 中创建 AWS 缓存集群

> ID：15730704
> 
> 赞同：5
> 
> 时间：2013-03-31T14:55:21.277
> 
> 标签：amazon-web-services, amazon-cloudformation, amazon-elasticache, amazon-vpc

我正在使用 CloudFormation 在 VPC 内创建一个 AWS 堆栈，并且需要在其上创建 ElastiCache 集群。我调查过，CloudFormation 不支持在 VPC 中创建缓存集群。我们的“解决方法”是在某些“固定”实例（例如堡垒）使用 CloudInit 和 AWS AmazonElastiCacheCli 工具（elasticache-create-cache-subnet-group、elasticache-create-cache-cluster）引导时创建缓存集群. 然后，当前端机器引导时（我们使用自动缩放），它们使用 elasticache-describe-cache-clusters 来获取缓存集群节点并更新配置。

我想知道您是否对这个问题有不同的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-23T07:01:44.117

现在已在 Cloudformation 模板中为 Elasticache 添加了 VPC 支持。

要在您的 VPC 中启动 a `AWS::ElastiCache::CacheCluster`，请创建一个[`AWS::ElastiCache::SubnetGroup`](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-elasticache-subnetgroup.html)定义您想要 Elasticache 在您的 VPC 中的哪个子网并将其分配 [`CacheSubnetGroupName`](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-elasticache-cache-cluster.html#cfn-elasticache-cachecluster-cachesubnetgroupname)给`AWS::ElastiCache::CacheCluster`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T16:00:47.527

您的解决方法是一个合理的解决方法（并且表明您似乎已经控制了您的 AWS 操作）。

您最终可以通过专用的[CustomResource](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cfn-customresource.html)类型改进您的自定义解决方案，这些类型是*特殊的 AWS CloudFormation 资源，为模板开发人员提供了一种将资源包含在 AWS CloudFormation 堆栈中的方法，这些资源由 Amazon Web Services 以外的源提供。*- [AWS CloudFormation 自定义资源演练](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/crpg-walkthrough.html)很好地概述了这一切的内容、工作原理以及实施您自己的资源所需的条件。

将此外观用于自定义资源（即您的案例中的[Amazon ElastiCache](http://aws.amazon.com/elasticache/)集群）的好处是，它的整个生命周期（创建/更新/删除）可以像任何官方支持的 CloudFormation 资源类型一样以类似和受控的方式处理，例如，资源创建失败将从整个堆栈的角度透明地处理。

但是，对于手头的用例，您实际上可能只想等待官方支持可用：

*   AWS 在最近的主要[Amazon EC2 更新 - 适合所有人的虚拟私有云的背景下宣布了对 ElastiCache 的 VPC 支持！](http://aws.typepad.com/aws/2013/03/amazon-ec2-update-virtual-private-clouds-for-everyone.html)，归结*为（几乎）每个人的默认 VPC*。

    > 我们希望每个 EC2 用户都能从我上面概述的 Amazon VPC 的高级网络和其他功能中受益。为了实现这一点，即将开始，新 AWS 客户（以及在新区域中启动的现有客户）的实例将在“EC2-VPC”平台中启动。[...]
    > 
    > 您无需事先创建 VPC - 只需像在 EC2-Classic 中一样启动 EC2 实例或预置 Elastic Load Balancer、RDS 数据库**或 ElastiCache 集群**，我们将免费为您创建 VPC。我们会将您的资源启动到该 VPC [...] *[强调我的]*

*   这种更新有点暗示任何新服务也可能会立即在 VPC 中可用（否则新的*EC2-VPC*平台不会像预想的那样自动为新客户工作）。

因此，我希望 CloudFormation 团队也能效仿并完成/修改他们对部署到 VPC 的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T17:29:50.747

我的解决方案是有一个控制器进程来轮询消息队列，该消息队列订阅了我通知 CloudFormation 事件的 SNS 主题（当您创建 CloudFormation 堆栈以向 SNS 主题发送通知时单击控制台中的高级） .

我将所需的参数作为标签传递给 AWS::EC2::Subnet 并让控制器在创建子网时拾取它们。我在创建 AWS::CloudFormation::WaitConditionHandle 时执行设置，并使用 PhysicalResourceId 通过 PUT 卷曲以满足 AWS::CloudFormation::WaitCondition。

它有些工作，但不处理 ElastiCache 中的资源删除，因为没有用于堆栈删除的 AWS::CloudFormation::WaitCondition 类似物。这是我的方法的手动操作程序。

CustomResource 方法看起来更精致，但需要一个端点，而我没有。如果您可以将端点放在一起，那看起来就是要走的路。

# firebase - Firebase：javascript on() 事件中的查询过滤

> ID：15730709
> 
> 赞同：4
> 
> 时间：2013-03-31T14:55:55.357
> 
> 标签：firebase

有没有办法过滤掉我想带回 ref.on("value", ...) 中的每个孩子的哪些属性？

假设我有[https://www.firebase.com/docs/data-structure.html](https://www.firebase.com/docs/data-structure.html)上的结构，但除了名称之外，每个用户还有他生成的每一行聊天的列表。我怎样才能只带回名字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:27:12.137

**更新**：从 Firebase 2.0 开始，您现在可以[根据 fields 进行查询](https://www.firebase.com/docs/web/guide/retrieving-data.html#section-queries)。

目前没有办法从路径中挑选数据（即过滤您返回的字段）。这里最简单的解决方案是将数据存储在不同的路径中。它大大简化了流程。

```
users/
users/names/fred/first
users/chat_history/fred/... 
```

另一种有用的方法是使用索引，特别是当您将使用大量子集（例如朋友列表、组成员等）时。

```
user_index/group_1/fred
user_index/group_1/mary
user_index/group_2/...

users/fred/name
users/fred/chat_history 
```

然后您可以使用以下方式访问数据：

```
var fb = new Firebase(INSTANCE);
fb.child('user_index').on('child_added', function(ss) {
   fb.child('users/'+ss.name()+'/name').once('value', function(nameSnapshot) {
      var userName = nameSnapshot.val();
   });
}); 
```

# asp.net-mvc - TextBoxFor 系列扩展方法的功能的综合文档？

> ID：15730718
> 
> 赞同：0
> 
> 时间：2013-03-31T14:56:49.243
> 
> 标签：asp.net-mvc, unit-testing, extension-methods

我想替换各种强类型的 Asp.Net Html 扩展方法，例如`TextBoxFor()`

一开始，我就意识到我需要考虑这些方法在模型验证方面的行为。我虽然“好的，我会从文档中获取应用于各种验证上下文的类名列表”，但是当我`TextBoxFor`在 MSDN 上查找时，绝对没有提到这个功能。

我可以在模型验证的情况下弄清楚它，尽管我不是 100% 确信我知道这些方法旨在处理的所有情况。我突然想到，这些扩展可能还提供了我不知道的其他功能。谷歌搜索产生了许多关于使用这些方法的*基础知识*的“操作方法”，但没有任何内容接近全面。

**问题**：什么是，或者我在哪里可以找到这些方法的功能的完整列表？我不只是在这里寻找方法签名和返回类型。我需要一个完整的功能文档，可以用来编写测试套件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:57:55.310

就文档而言，MSDN 是您希望获得的最佳资源。这对你来说可能还不够，但这就是你需要面对的现实。

我个人使用 ASP.NET MVC 源代码（即[`available for download`](http://aspnetwebstack.codeplex.com/)）并查看它以更好地了解这些帮助程序是如何实现的以及它们是如何工作的。

但是由于您在问题中提到了有关模型验证的内容，因此您最好查看`ValidationMessageFor`and`ValidationSummary`助手而不是`TextBoxFor`助手。在 TextBoxFor 帮助器中进行一些验证的唯一地方是检查相应模型属性是否存在验证错误，以便将验证错误 CSS 类添加到输入字段。

# c# - DLL 中的 LinqPad 转储

> ID：15730719
> 
> 赞同：1
> 
> 时间：2013-03-31T14:57:06.857
> 
> 标签：c#, xhtml, linqpad

我希望能够从我的 DLL 中调用 Dump，并且下面的代码返回原始 HTML 结果。我该如何渲染它，或者正确的方法是什么？

**方法**

```
public static string Dump<T>(this T obj)
{
    var writer = LINQPad.Util.CreateXhtmlWriter();
    writer.Write(obj);
    return writer.ToString();
} 
```

**称呼**

```
Debug.WriteLine(myObject.Dump()); 
```

**LINQPad 上的结果**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
      <meta name="Generator" content="LINQ to XML, baby!" />
      <style type='text/css'>
        ...
      </style>
  </head>
<body>
<div>
...
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T01:09:37.030

感谢 Joe Albahari，添加 LinqPad.exe 作为参考允许我们使用库中的 Dump 函数，因此不需要实现。

# c++ - 在 C++ 中将旧代码移植到 64 位

> ID：15730720
> 
> 赞同：1
> 
> 时间：2013-03-31T14:57:12.983
> 
> 标签：c++, 32bit-64bit

我正在尝试将旧版 32 位代码移植到 64 位。我们有一个这样的工会：

```
union ptType
{
    int * iPtr;
    short * sPtr;
    long * lPtr;
    bool * bPtr;
    double * dPtr;
}; 
```

你可以猜到，这个联合用于存储所有这些类型的地址。我已经阅读了很多关于 64 位指针大小和算术变化的信息。但我不太确定这种行为。这段代码似乎在 QA 中工作，但我对生产更加担心，因为它会在那里产生巨大的流量。

移植到 64 位将如何影响代码的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:59:17.727

没错，在大多数 32 位到 64 位的转换下，这些指针的大小都会翻倍。这个联合本身的操作不太可能成为问题，但是您必须注意它与其他代码交互的地方，通过类型转换、硬编码大小等。

# web-services - 面向服务的架构和松耦合与 SQL JOINS

> ID：15730724
> 
> 赞同：5
> 
> 时间：2013-03-31T14:57:41.047
> 
> 标签：web-services, data-mining, soa

假设我们有一个如下图所示的 SOA 基础架构，并且每个服务都可以在不同的主机上运行（这对于两个外网服务“网站”和“支付系统”尤其有效）。

![SOA 基础架构](https://i.stack.imgur.com/kuvVT.png)

显然我们有一个数据（持久性）层。假设它是通过 EJB + JPA 或类似的方式实现的。

如果我们想在不同的服务之间加入数据（在用户 UI 中），我至少看到了两种选择：

*   我们希望在 RDBMS 级别进行高效的 JOIN，因此我们有一个包（即 persistence.package），其中包含*所有*实体和会话外观（CRUD 实现），它们必须以某种方式共享（如何？）*或*为每个服务部署. 也就是说，如果我在 order 模式中更改某些内容，我必须重新部署这些包，从而在几乎所有内容之间引入紧密耦合。此外，数据库必须是唯一的和共享的。

*   为避免此类问题，我们为每个不同的服务（即 order.package）保留一个实体包，并让服务通过某种协议（soap、rest、esb 等）进行通信。所以我们可以在每个主机本地保存数据（不共享架构），我们不需要重新部署实体包。但是这种方法对于数据挖掘来说很糟糕，因为必须在多个服务之间搜索和返回相关数据的查询效率**非常**低（因为我们不能进行 SQL 连接）

对于上述问题，是否有更好/标准的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T15:45:42.697

SOA 的主要动机是可以单独更改的独立组件。正如 Marco 提到的，第二个动机是将系统简化为更容易解决的小问题。不同服务的优点是灵活性，缺点是更多的管理和开销——开销应该由你得到的结果来证明——例如，参见我发布的 SOA 反模式，称为[Nanoservices](http://arnon.me/wp-content/uploads/2010/10/Nanoservices.pdf)，它讨论了这种平衡

要记住的另一件事是，Web 服务 API 并不自动意味着这是服务边界。属于一个更大服务的几个 API 仍然可以连接到下面的同一个数据库。因此，例如，如果在您的系统中付款和订单属于一起，您不应该仅仅因为它们是不同的 API 而将它们分开（在许多系统中，这些确实是不同的问题，但同样，这不是自动的）

如果您确实发现服务的分离是合乎逻辑的，那么您应该遵循 Marco 的建议并确保服务是隔离的并且不共享数据库。以这种方式隔离服务有助于他们改变的能力。然后，您可以将它们与[复合前端](http://arnon.me/wp-content/uploads/2011/10/Composite-Frontend.pdf)集成到 UI 中。您应该注意，这对于应用程序的操作方面非常有效，因为您只需要每个服务中的几个项目。对于报告，您需要[汇总报告](http://arnon.me/soa-patterns/aggregated-reporting/)之类的东西，即将数据的不可变副本导出到为报告优化的中央数据库（例如非规范化星型模式等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T03:40:11.067

哦，我的朋友，你只是让整个场景复杂化，但这不是你的错，像 MSFT、甲骨文和其他大型企业级软件供应商这样的公司喜欢对更容易的事情进行全面了解，他们这样做是为了一个原因：垂直扩展服务意味着更多的许可证。

您可以采取不同的方法，暂时忘记所有那些大词，EJB，JPA ......就像有人曾经说过的那样，将大问题分成较小的部分，这样您就不会遇到大问题了理论上应该更容易处理的小问题。

因此，您的系统中有几个服务：人员、支付系统、订单、产品、ERP ......暂时让我们认为这些边界在业务实体方面是正确的。想象一下，这些服务是贵公司的不同物理部门，这意味着他们只关心属于他们的数据，而不关心其他。

然后你可以说支付部门有自己的数据库，同样适用于订单，当然他们仍然需要像所有部门一样相互通信，这可以通过系统生成的公共代理密钥来轻松实现。这一切意味着每个服务使用内部密钥维护其所有内部实体的引用完整性，但如果需要将记录提供给其他服务，您可以例如使用 Guid 密钥，例如：

![在此处输入图像描述](https://i.stack.imgur.com/yHyu4.png)

支付服务需要订单 ID 和客户 ID，但这些实体属于它们自己的服务，因此不是共享每条记录的私钥（主键），而是每条记录都有一个主键和一个代理外部键服务将用于在它们之间共享。问题是，您应该致力于构建松散耦合的服务，每个服务都有自己的“小型”数据库。每个服务也应该有自己的 API，这些 API 不仅应该被前端使用，也应该被其他服务使用。您应该避免的另一件事是使用 DTC 或其他事务管理提供程序作为服务范围的事务担保人，它可以通过不同的架构方法轻松存档。

无论如何，请阅读，如果您还没有了解 DDD，它将为您提供有关如何构建企业级软件的不同概述，并且顺便说一下 EJB，远离它们。

**更新：**

您可以使用事件 SOA 之类的东西，但让我们在这里保持简单。注册客户来到您的网站下订单。对此负责的服务是订单。将产品的外部 ID 列表提交给 Orders 服务，然后注册订单，此时订单处于“等待付款”状态，该服务返回公共 Guid 订单 ID。为了完成订单，客户需要支付货款。付款详细信息被提交给尝试处理付款的付款服务，但为此它需要订单详细信息，因为前端发送的唯一内容是订单 ID，为此它使用 GetOrderDetails(Guid orderId) 来自订单的 API。一旦支付完成，支付服务就会调用 Order 的 API PaymentWasCompletedForOrder(Guid orderID) 的另一个方法。让我知道如果有什么你没有得到。

# android - 用于使用 HTTPS 的 Android 密钥库

> ID：15730727
> 
> 赞同：0
> 
> 时间：2013-03-31T14:57:57.787
> 
> 标签：android, ssl, https, keystore

我有一个 Web 服务，我需要使用 HTTPS 通过我的 Android 应用程序访问该服务。我已经在我的网络服务器上从 GoDaddy 带来并设置了 SSL 证书，我目前正在关注本教程[http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)以启用我的应用程序默认情况下使用我的 SSL 证书，它不允许我（发出 Https GET 请求，失败，因为它不信任证书）。

我被困在要求我创建“密钥库”的部分。我一直在阅读 Android 文档，它暗示密钥库应该用于为 Android 应用程序本身创建证书（与我的网络服务器的证书无关）。

关于为我的网络服务器设置“密钥库”，允许我的应用程序使用我的 SSL 证书来检索 HTTPS 内容，谁能指出我正确的方向。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:58:40.577

如果您在网站上使用自签名证书，则只需遵循该教程。

您也不必在 Android 上创建密钥库，它已经带有一个填充了“受信任”证书颁发机构密钥的密钥库。我无法在旧 Android 2.2 手机的密钥库中获取密钥列表，但到 4.1 时，您可以：

```
Settings -> Security -> Trusted credentials 
```

那么 GoDaddy 的哪个[证书](https://certs.godaddy.com/anonymous/repository.pki)是您签署的网站证书？您是否检查过您是否已在您的网站上正确安装了证书？查看网站证书并查看详细信息，并检查您网站提供的证书是否已由您的 Android 设备受信任凭据列表中的 GoDaddy 证书签名。

# entity-framework - 每个实体都从一个基础实体继承是一个坏主意吗？

> ID：15730733
> 
> 赞同：0
> 
> 时间：2013-03-31T14:58:35.243
> 
> 标签：entity-framework, inheritance, primary-key

**如果我让每个类都从提供他的密钥/ID的基类继承，会不会有问题（或者可能是个坏主意）？**这在实体框架中的代码优先设计中

```
class MyObject
{
[Key]
public int Id { get; set; }
}

class Person : MyObject {...}
class Message : MyObject {...}
class Whatever : MyObject {...} 
```

我想这样做是因为发生了很多事情，我希望两个/三个类（例如）从某个基类继承，而我不负责提供 id 的那个基类。

具体例子，比较一下：（实际场景）

```
class Recipient
{
[Key]
public int RecipientId { get; set; } // I want to avoid this
public string DisplayName { get; set; }
}

class Person : Recipient {...}
class Group : Recipient {...} 
```

为此：（我想要实现的目标）

```
class MyObject
{
[Key]
public int Id { get; set; }
}

class Recipient : MyObject
{
public string DisplayName { get; set; }
}

class Person : Recipient {...}
class Group : Recipient {...} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-22T18:41:14.330

我知道自从提出这个问题以来已经有一段时间了，无论如何我都会发布答案。

到目前为止，我已经完成了比我数不清的更多代码优先项目，而且我**总是**以我的实体的抽象基类结束。原因很简单，总有一些你认为应该存在于所有实体中的字段，当然**Id**是最明显的。

此外，当您添加一个基类（或就此而言的接口）时，您突然允许您的 DbContext 对该抽象进行操作。我几乎总是将事件添加到我保留为虚拟的这个基类（如 OnLoad、OnSave、OnDelete），然后为我的 DbContext 覆盖**SaveChanges**方法并为受影响的实体调用适当的事件。

所以我的回答是否定的，向你的 EF 类添加基类没有害处。但是就像上面的一些答案所说的那样，如果它对于 Id 列来说是微不足道的，那么也许你不妨在你的所有课程中重复这一行（4 条带有基本评论；））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:26:53.140

我的问题是`why`你想这样做...

`I don't see any real reasons to want to 'decouple' base class for the sake of 'ID-ing' alone`. 您所节省的只是一行代码。否则，您将不会在查询中使用该类（因为它实际上不代表任何内容），但您仍然必须小心“继承” - 因为您的代码，使用 TPC 场景会导致额外的表（对于所有“非-abstract'类） - 所以我可能`abstract`只是为了确定。也不要将它定义为`DbSet`（这应该让它几乎不被关注，就像界面一样）。

如果你已经有另一个基类——这似乎是“ID”的理想场所——但这一切都是非常个人化的。

...简而言之`I haven't seen any major issues with it (just make it abstract and off DbSet)`--虽然`equally I don't see any gains from it`。IMO Entities / POCO 是 C# 对象——但毕竟提供了一些有意义的底层数据——我喜欢这样看待它们（也适用于任何其他类，而不仅仅是实体 / POCO）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:15:51.717

我对此有复杂的感觉。

**临**

*   它包含 DRY 原则（不要重复自己）。

**缺点**

*   它违反了继承的目的，即表达“是”关系（客户“是”人）。说 Person “是”基础对象在业务领域中毫无意义。它不表达任何业务逻辑。最终，具有基类型可能会阻止其他继承策略，因为 C# 不支持多重继承。
*   它混合了业务逻辑和 DAL 实现。基类中的字段与业务领域无关。拥有一个`Id`纯粹是 DAL 事务。（对于`InsertDateTime`经常使用基本类型的值也是如此）。

我倾向于**不**这样做。如果您希望您的实体有共同点，我会使用界面。这是相当多的工作，我知道。而且它看起来并不 DRY，但我认为 DRY 原则应该定义为“不要*不必要地*重复自己”。

尽管如此，如果您决定使用基类，我发现确保它不会成为实体模型（实体框架已知的模型）的一部分是有益的。如果是这样，您必须确保 EF 使用 TPC，并且无法使用其他继承模型。因此，只映射派生类型，EF 永远不会知道基类型，也永远不会尝试实现和继承策略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-01T18:30:31.627

在我看来，这一切都会造成并发症。例如，您想引用 userId，但由于超类，您的表都有 id。那么现在你必须在你的课堂上添加这样的东西

@AttributeOverrides(value = { @AttributeOverride(name = "id", column = @Column(name = "passwordTokenId", nullable = false)), @AttributeOverride(name = "name", column = @Column(name = "token ", nullable = false)) })

它并没有在这里结束。尝试在休眠中映射关系怎么样......你开始想知道这个 id 是类 Book 还是类 Person

但是当你的类定义如下时很好

公共类 Client 扩展 Person 公共类 Broker 扩展 Person

并且类 Person 定义有 String firstName 和 String lastName .. 再次 DRY 原则

我都试过了，我喜欢保持简单（KISS）。就像上面那位先生说的那样，它包含 DRY，但它也违反了 (KISS).. 我同意最后一位先生的观点，我喜欢你喜欢的 :) 所以跟随你的直觉

# php - 在文件中查找密码

> ID：15730734
> 
> 赞同：1
> 
> 时间：2013-03-31T14:58:37.090
> 
> 标签：php, security, file-io

我有一段 php 代码，在页面加载请求时会找到一个相应的文件，其中包含有关页面的信息，包括密码。

文件中的语法如下：

```
Pagename: 
PageInfo:
Password: SecretPassword 
```

我如何才能找到密码后面的密码：？

我的 PHP 代码如下所示：

```
$filepath = absolute_url("page/info.php");  
$infoFile = fopen("$filepath", "r");
$contents = stream_get_contents($infoFile); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:03:20.047

似乎是一种非常奇怪的数据存储方式。假设这无济于事，您可以使用以下方式进行 RegEx：

```
$matches = array();
preg_match('/Password:\s(.*)$/', $contents, $matches);
//                     ^ Assuming there's only ever 1 space 
```

`echo $matches[1]`将打印`SecretPassword`

# javascript - 动画自动滚动到 div onclick

> ID：15730741
> 
> 赞同：-2
> 
> 时间：2013-03-31T14:59:03.700
> 
> 标签：javascript, jquery

我有一个简单的菜单，位置固定，里面有一些文字，还有这个菜单下的一些框（div）。我正在搜索一个代码，当我单击菜单内的一个文本时，页面会自动滚动到 div 的 div 向下，确实我找到了这个代码，但它不完整，因为当页面自动滚动到 div 时，如果你想要页面滚动到另一个 div 到这个 div 它不能自动滚动，我的意思是它不会向上滚动，只会向下滚动。菜单的代码和文字：

```
<style>
#menu {
    background-color: #ccc;
    position:fixed;
    width:100%
}

.menutext {
    padding:25 40 0 !important;
    display:inline-block;
}

.alldivs {
    width:300px;
    height:200px;
    background-color:a9a9a9;
}
</style>

<div id="menu">
    <div class="menutext">Auto-scroll to (DIV1) onclick on me</div>
    <div class="menutext">Auto-scroll to (DIV2) onclick on me</div>
    <div class="menutext">Auto-scroll to (DIV3) onclick on me</dive>
    <div class="menutext">Auto-scroll to (DIV4) onclick on me</div>
</div>

<br><br><br>

<div class="alldivs"><div id="DIV1">DIV1</div></div>
<div class="alldivs"><div id="DIV2">DIV2</div></div>
<div class="alldivs"><div id="DIV3">DIV3</div></div>
<div class="alldivs"><div id="DIV4">DIV4</div></div> 
```

简单地说，我希望当我按下“自动滚动到 (DIV1) onclick on me”时，页面自动滚动到 div “DIV1”，当我按下“自动滚动到 (DIV3) onclick on me”时，页面自动滚动到“DIV3”但请注意***当我想向上滚动到 DIV 时，可以执行此操作（向上滚动）的代码，例如：当我按下“自动滚动到 (DIV3) onclick on me”时页面滚动到“DIV3”，但是当我按下“自动滚动到（DIV2）点击我”时，代码应该能够让页面滚动到“DIV2”。（另请注意，它是固定菜单）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:22:39.503

您将需要执行以下操作：

```
<style>
#menu {
    background-color: #ccc;
    position:fixed;
    width:100%
}

.menutext {
    padding:25px 40px 0px 0px;
    display:inline-block;
}

.alldivs {
    width:300px;
    height:200px;
    background-color:a9a9a9;
}

#content {
    /* added for visualization */
    position: absolute;
    top: 100px;
    border: 1px solid black;
    height:200px;
    overflow: hidden;
}
</style>
<div id="menu">
    <div class="menutext" data-scrollid="DIV1">Auto-scroll to (DIV1) onclick on me</div>
    <div class="menutext" data-scrollid="DIV2">Auto-scroll to (DIV2) onclick on me</div>
    <div class="menutext" data-scrollid="DIV3">Auto-scroll to (DIV3) onclick on me</div>
    <div class="menutext" data-scrollid="DIV4">Auto-scroll to (DIV4) onclick on me</div>
</div>

<div id="content">
    <div class="alldivs"><div id="DIV1">DIV1</div></div>
    <div class="alldivs"><div id="DIV2">DIV2</div></div>
    <div class="alldivs"><div id="DIV3">DIV3</div></div>
    <div class="alldivs"><div id="DIV4">DIV4</div></div>
</div>

<script>
    var $content = $('#content');
    $('.menutext').each(function(){
        var $this=$(this);
            scrollTo = 0;
        $this.on('click', function(){
            var $target = $('#'+$this.data('scrollid'));
            scrollTo = scrollTo + $target.position().top + $target.scrollTop();
            $content.animate({scrollTop: scrollTo}, 1000);
        })
    })
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T04:58:28.310

检查这个：

```
jQuery(document).ready(function($) {

    $(".scroll").click(function(event){     
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top - 59}, 800); 
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T04:53:31.353

看一下这个：

```
$(function(){

  var offsets = [],
      menuText = $('#menu .menuText');

  $("div.contentDiv").each( function(i, div) {
      offsets.push({ id: div.id, offset: $(div).offset().top - 60});
  });

  $(window).scroll(function(e) {
    var start = $(this).scrollTop();
    for ( var div = 0; div < offsets.length; div++ ) {
      if ( start > offsets[div].offset ) { 
        menuText.removeClass('menutext2').addClass('menutext');  

        menuText.filter('[linkId="'+offsets[div].id+'"]').addClass('menutext2').removeClass('menutext');
        }
    }

    if ( start === 0 ) {         
    menuText.removeClass('menutext2').addClass('menutext');  
    }

  });
}); 
```

# python - Django 用户 julienb 没有要填充的配置文件

> ID：15730743
> 
> 赞同：2
> 
> 时间：2013-03-31T14:59:28.093
> 
> 标签：python, django, django-authentication, django-auth-ldap

我正在尝试通过 ldap 登录到管理站点。用户在 ldap 中找到。我的问题是每次我尝试登录时，都会出现此错误。

```
search_s('ou=utilisateurs,ou=employee,dc=bi,dc=invik,dc=lu', 2, '(SAMAccountName=%(user)s)')returned 1 objects: cn=julien boelen,ou=utilisateurs,ou=employee,dc=bi,dc=invik,dc=lu

search_s('ou=utilisateurs,ou=employee,dc=bi,dc=invik,dc=lu', 2, '(SAMAccountName=%(user)s)')returned 1 objects: cn=julien boelen,ou=utilisateurs,ou=employee,dc=bi,dc=invik,dc=lu

Populating Django user julienb

Populating Django user julienb

Django user julienb does not have a profile to populate

Django user julienb does not have a profile to populate 
```

显然我无法登录管理站点。我不知道如何告诉 django “不要使用配置文件！！让我登录”

这是我的settings.py

```
AUTHENTICATION_BACKENDS = (

     'django_auth_ldap.backend.LDAPBackend',
     'django.contrib.auth.backends.ModelBackend',                    

)

AUTH_LDAP_SERVER_URI = "ldap://192.168.1.5/"
AUTH_LDAP_CONNECTION_OPTIONS = {
        ldap.OPT_DEBUG_LEVEL: 0,
        ldap.OPT_REFERRALS: 0,
}

AUTH_LDAP_BIND_DN = "browser"
AUTH_LDAP_BIND_PASSWORD = "Django15iscool"
AUTH_LDAP_USER_SEARCH = LDAPSearch("ou=utilisateurs,ou=employee,dc=bi,dc=invik,dc=lu",
                        ldap.SCOPE_SUBTREE, '(SAMAccountName=%(user)s)')

AUTH_LDAP_USER_ATTR_MAP = {
     "first_name": "givenName",
     "last_name": "sn",
     "email": "mail"
     } 
```

我不知道为什么我无法登录，为什么他要求提供个人资料，我不使用个人资料，是否有什么可以指定来告知 django 不关心个人资料，让我登录 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T13:41:01.780

我知道 Profile 日志看起来很吓人，但实际上它有点像红鲱鱼*。您真正的问题是您尝试使用没有员工或超级用户权限的帐户登录管理页面。鉴于您当前的设置，有两种方法可以处理该问题：

1）如果您希望您的帐户的超级用户权限从您的 LDAP 模型继承，您将需要为该`is_superuser`属性设置用户标志映射，效果如下

```
AUTH_LDAP_USER_FLAGS_BY_GROUP = {
    "is_superuser": "cn=superuser,ou=groups,dc=example,dc=com"
} 
```

2）如果这不起作用，您将需要使用已经拥有超级用户权限的现有帐户登录。当你做你的第一个`python manage.py syncdb`时，你应该被提示创建一个超级用户帐户。只要您仍在使用 进行身份验证`django.contrib.auth.backends.ModelBackend`，您就应该能够继续使用该超级用户帐户访问您的管理页面。如果做不到这一点，您可以随时进入 shell 并将您的帐户提升为超级用户或创建一个新的超级用户帐户。

*澄清一下，正在发生的事情是身份验证后端正在尝试填充您的`User`对象和关联的`UserProfile`对象（如果存在）。这是错误日志不够具体的情况......该错误消息并不表示存在问题，而是表示您尚未实现的功能。（如果您想了解有关 1.4 中此功能的更多信息，请访问[https:](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users) //docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users...它已在 1.5中[弃用）](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:36:05.377

LDAPBackend 不创建配置文件。首先尝试使用 User 模型类创建用户。在 Django 项目目录中需要一个 shell：

```
python manage.py shell 
```

然后在 Python shell 中尝试：

```
>>> from django.contrib.auth.models import User
>>> user = User.objects.create_user('username', None, None)
>>> user.save() 
```

以这种方式，用户被正确创建，密码也为空。配置文件可以包含其他字段，您可以使用设置中的 AUTH_LDAP_PROFILE_ATTR_MAP 参数使用 LDAP 属性填充这些字段。如果您对自定义感兴趣，请注意，因为在 Django 1.5 中，用户配置文件已被弃用并被自定义用户模型取代，这应该更灵活。

[https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#extending-the-existing-user-model](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#extending-the-existing-user-model) [https://docs.djangoproject.com/en/1.5/topics/auth/customizing/ #substituting-a-custom-user-model](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#substituting-a-custom-user-model)

# c++ - 绑定可变参数 lambda 时遇到问题

> ID：15730744
> 
> 赞同：1
> 
> 时间：2013-03-31T14:59:35.027
> 
> 标签：c++, visual-c++, c++11, variadic-templates

我正在尝试创建一个函数，它将可变参数 lambda 工厂方法绑定到一个不带参数的函数。我不确定 VC 支持（使用 VS2012 和 2012 年 11 月的 CTP）是否不完全存在，或者（更有可能）我做错了。我对可变参数模板的工作不多，因此将不胜感激。

```
template <typename T, typename...Args>
std::function<T*()> MakeFactoryMethod(Args&&... args)
{
    return std::bind([](Args&&... args2)
        {
            return new T(std::forward<Args>(args2)...);
        },
        std::forward<Args>(args)...);
}

...

auto test = MakeFactoryMethod<SomeClassWithSingleIntConstructor>(5); 
```

我从编译器收到一长串错误。看起来 VC 标准库本身还没有使用可变参数模板。

```
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\xrefwrap(431): error C2440: 'return' : cannot convert from 'std::_Do_call_ret<false,_Ret,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,std::tuple<int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,std::tuple<std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>::type' to 'SomeClassWithSingleIntConstructor *'
1>          with
1>          [
1>              _Ret=void
1>          ]
1>          Expressions of type void cannot be converted to other types
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(239) : see reference to function template instantiation '_Ret std::_Callable_obj<std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,_Ty,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,false>::_ApplyX<_Rx>(void)' being compiled
1>          with
1>          [
1>              _Ret=SomeClassWithSingleIntConstructor *
1>  ,            _Ty=int
1>  ,            _Rx=SomeClassWithSingleIntConstructor *
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(239) : see reference to function template instantiation '_Ret std::_Callable_obj<std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,_Ty,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>,false>::_ApplyX<_Rx>(void)' being compiled
1>          with
1>          [
1>              _Ret=SomeClassWithSingleIntConstructor *
1>  ,            _Ty=int
1>  ,            _Rx=SomeClassWithSingleIntConstructor *
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(239) : while compiling class template member function 'SomeClassWithSingleIntConstructor std::_Func_impl<_MyWrapper,_Alloc,_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>::_Do_call(void)'
1>          with
1>          [
1>              _Alloc=std::allocator<std::_Func_class<SomeClassWithSingleIntConstructor *,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>
1>  ,            _Ret=SomeClassWithSingleIntConstructor *
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(514) : see reference to class template instantiation 'std::_Func_impl<_MyWrapper,_Alloc,_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>' being compiled
1>          with
1>          [
1>              _Alloc=std::allocator<std::_Func_class<SomeClassWithSingleIntConstructor *,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>
1>  ,            _Ret=SomeClassWithSingleIntConstructor *
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(514) : see reference to function template instantiation 'void std::_Func_class<_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>::_Do_alloc<_Myimpl,_Ty,_Alloc>(_Fty &&,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=SomeClassWithSingleIntConstructor *
1>  ,            _Ty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>  ,            _Alloc=std::allocator<std::_Func_class<SomeClassWithSingleIntConstructor *,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>
1>  ,            _Fty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(514) : see reference to function template instantiation 'void std::_Func_class<_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>::_Do_alloc<_Myimpl,_Ty,_Alloc>(_Fty &&,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=SomeClassWithSingleIntConstructor *
1>  ,            _Ty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>  ,            _Alloc=std::allocator<std::_Func_class<SomeClassWithSingleIntConstructor *,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>
1>  ,            _Fty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(514) : see reference to function template instantiation 'void std::_Func_class<_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>::_Reset_alloc<_Ty,std::allocator<std::_Func_class<_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>>(_Fty &&,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=SomeClassWithSingleIntConstructor *
1>  ,            _Ty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>  ,            _Fty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>  ,            _Alloc=std::allocator<std::_Func_class<SomeClassWithSingleIntConstructor *,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(514) : see reference to function template instantiation 'void std::_Func_class<_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>::_Reset_alloc<_Ty,std::allocator<std::_Func_class<_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>>(_Fty &&,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=SomeClassWithSingleIntConstructor *
1>  ,            _Ty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>  ,            _Fty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>  ,            _Alloc=std::allocator<std::_Func_class<SomeClassWithSingleIntConstructor *,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(675) : see reference to function template instantiation 'void std::_Func_class<_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>::_Reset<_Ty>(_Fty &&)' being compiled
1>          with
1>          [
1>              _Ret=SomeClassWithSingleIntConstructor *
1>  ,            _Ty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>  ,            _Fty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(675) : see reference to function template instantiation 'void std::_Func_class<_Ret,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>::_Reset<_Ty>(_Fty &&)' being compiled
1>          with
1>          [
1>              _Ret=SomeClassWithSingleIntConstructor *
1>  ,            _Ty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>  ,            _Fty=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          c:\code\configurabletestserver\application.cpp(121) : see reference to function template instantiation 'std::function<SomeClassWithSingleIntConstructor *(void)>::function<std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,_Ty,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>(_Fx &&)' being compiled
1>          with
1>          [
1>              _Ty=int
1>  ,            _Fx=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          c:\code\configurabletestserver\application.cpp(121) : see reference to function template instantiation 'std::function<SomeClassWithSingleIntConstructor *(void)>::function<std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,_Ty,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>>(_Fx &&)' being compiled
1>          with
1>          [
1>              _Ty=int
1>  ,            _Fx=std::_Bind<false,void,MakeFactoryMethod::<lambda_eabc5b7f0a2cea764c71ce16901cde81>,int,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil>
1>          ]
1>          c:\code\configurabletestserver\application.cpp(139) : see reference to function template instantiation 'std::function<SomeClassWithSingleIntConstructor *(void)> MakeFactoryMethod<SomeClassWithSingleIntConstructor,int>(int &&)' being compiled 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:51:17.190

在我看来，您似乎试图使其复杂化。为什么要通过 RHR 捕获它们，然后将它们作为完美前锋传递——这意味着你将捕获任何临时的作为临时的——当你要从中制作一个仿函数时？这意味着您必须将副本等传递到每个新调用中以确保对象仍然存在。

```
template <typename T, typename...Args>
std::function<T*()> MakeFactoryMethod(Args&&... args)
{
    return [=]()
        {
            return new T(args...);
        }
} 
```

当您确实必须制作副本时，只需在 lambda 创建中制作一个副本并完成它。

错误消息非常令人困惑，但对我来说，用右手引用制作 lambda 似乎是设计错误的，所以我对错误消息并不太在意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:16:14.690

你的 lambda 返回 `void`

应该

```
template <typename T, typename...Args>
std::function<T*()> MakeFactoryMethod(Args&&... args)
{
    return std::bind([](Args&&... args2) -> T*
        {
            return new T(std::forward<Args>(args2)...);
        },
        std::forward<Args>(args)...);
} 
```

# javascript - 使用 AJAX 发送插件

> ID：15730747
> 
> 赞同：1
> 
> 时间：2013-03-31T14:59:46.373
> 
> 标签：javascript, ajax

我需要使用 AJAX 发送导航器插件，但我没有得到完整的结果：

插件列表：Shockwave Flash。（我只有一个插件）

它必须是这样的：Shockwave Flash - Chrome Remote Desktop Viewer - Native Client...

```
<script>
for (var myIndex = 0; myIndex < navigator.plugins.length; myIndex++) {
    var blabla = (navigator.plugins[myIndex].name);
}
$.ajax({
    type: 'POST',
    url: 'save.php',
    cache: false,
    data: {
        pluginlist: blabla,
    },
});  
</script> 
```

我究竟做错了什么？

还有一件事...

当我测试这个脚本时，它工作得很好。

```
<SCRIPT>
for (var myIndex=0; myIndex<navigator.plugins.length; myIndex++) {
    document.write(navigator.plugins[myIndex].name, " - ");
}
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:05:29.467

尝试在数组中填充数据：

```
var blabla = [];
for (var myIndex = 0; myIndex < navigator.plugins.length; myIndex++) {
    blabla.push(navigator.plugins[myIndex].name);
} 
```

现在每次迭代都会`blabla`用新值覆盖。因此，您只发送一个插件名称。

# mysql - 在项目列表（多级父/子）上使用 LOAD DATA INFILE？

> ID：15730752
> 
> 赞同：0
> 
> 时间：2013-03-31T15:00:36.883
> 
> 标签：mysql, import, load-data-infile

我有一个 Quickbooks 项目（多级父/子）的文本文件，需要定期加载到 MySQL 数据库中。我想使用类似于 LOAD DATA INFILE vs 循环遍历列表并单独添加的东西。列表示例如下：

电缆
电缆：USB
电缆：USB：6 英尺
网络
网络：路由器
网络：路由器：DLink

在 MySQL 中，我需要分隔这些项目，以便它们指向它们的父项目（使用诸如 int parentid 之类的字段）。我可以在将数据转储到 INFILE 之前对其进行处理/格式化，但是我不知道如何在导入期间维护层次结构。LOAD DATA INFILE 是最好的方法吗？

# javascript - 使用 Crossrider 连续 json 和 jsonp 请求失败？

> ID：15730753
> 
> 赞同：0
> 
> 时间：2013-03-31T15:00:37.183
> 
> 标签：javascript, ajax, json, jsonp, crossrider

我正在使用 crossrider 来实现跨浏览器插件。

我有两个连续的 AJAX 请求（JSON 和 JSONP）：

1.  第一个是“登录”的 JSON 请求，它在浏览器中设置一个 cookie。

2.  第二个是“保存”的 JSONP 请求，它使用 cookie 将一些数据保存到服务器。

这是代码的简化示例：

```
$.ajax({ 
    url : "https://app.testafy.com/api/v0/user/login", 
    type : 'GET', 
    cache : false, 
    dataType : 'json', 
    data : {login_name: "abashir", password: "P@ssw0rd"} 
}).done(function(response) { 
    alert("Login Success"); 
    $.ajax({ 
        url : 'https://app.testafy.com/api/v0/test/save', 
        type : 'GET', 
        cache : false, 
        dataType : 'jsonp', 
        data : {"pbehave":"For+the+url+http%3A%2F%2Fstackoverflow.com%2F%0D%0A","title":"test","description":" "} 
    }).done(function(response) { 
        alert("Saving Success:\n\n" + JSON.stringify(response, undefined)); 
    }).fail(function(jqXHR, textStatus, errorThrown) { 
        alert("Saving Failure:\n\n" 
            + JSON.stringify(jqXHR, undefined) + "\n\n" 
            + JSON.stringify(textStatus, undefined) + "\n\n" 
            + JSON.stringify(errorThrown, undefined)); 
}); 
}).fail(function(jqXHR, textStatus, errorThrown) { 
    alert("Login Failure:\n\n" 
        + JSON.stringify(jqXHR, undefined) + "\n\n" 
        + JSON.stringify(textStatus, undefined) + "\n\n" 
        + JSON.stringify(errorThrown, undefined)); 
}); 
```

它适用于 IE、FF 和 Chrome，如果它在 HTML 中（自动登录然后自动保存）。

但是当放置在 crossrider extension.json 中（在 appAPI.ready 中）时，它会在每个浏览器中提供三种不同的行为。

**对于铬：**

*   登录成功终止。
*   保存失败并输出：

> {"readyState":4,"status":200,"statusText":"success"}
> "parseerror"
> {}

**对于火狐：**

*   登录成功终止。
*   弹出窗口要求提供凭据（好像 cookie 不是通过登录设置的！！）
*   输入凭据后 (abashir & P@ssw0rd)
*   保存失败并输出：

> {"readyState":4,"status":200,"statusText":"success"}
> "parseerror"
> {}

**对于 IE9：**

*   登录失败并输出：

> {"readyState":0, "setRequestHeader":{},....,"statusText":"No Transport"}
> "error"
> "No Transport"

PS，使用提琴手，我注意到在chrome中从服务器返回的响应是正确的（尽管调用了ajax失败函数），这是来自提琴手的请求/响应对：

**要求：**

```
GET https://app.testafy.com/api/v0/test/save?callback=jQuery17107044411341194063_1364461851960&pbehave=For%2Bthe%2Burl%2Bhttp%253A%252F%252Fstackoverflow.com%252F%250D%250A&title=test&description=+&_=1364461865618 HTTP/1.1 
Host: app.testafy.com 
Connection: keep-alive 
Accept: */* 
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22 
Referer: http://stackoverflow.com/ 
Accept-Encoding: gzip,deflate,sdch 
Accept-Language: en-US,en;q=0.8 
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
Cookie: __utma=124963983.2014233417.1360749029.1362583015.1362996135.12; __utmc=124963983; __utmz=124963983.1362322761.9.3.utmcsr=stackoverflow.com|utmccn=(referral)|utmcmd=referral|utmcct=/; GSG_SESSIONID=ee03a02cdb6f3c0e3d812795be63c788 
```

**回复：**

```
HTTP/1.1 200 nginx 
Access-Control-Allow-Origin: * 
Content-Type: application/json; charset=utf-8 
Date: Thu, 28 Mar 2013 09:03:48 GMT 
P3P: CP="ALL ADM DEV PSAi COM OUR OTRo STP IND ONL" 
Set-Cookie: GSG_SESSIONID=ee03a02cdb6f3c0e3d812795be63c788; domain=app.testafy.com; path=/; secure; HttpOnly 
Content-Length: 273 
Connection: keep-alive 

jQuery17107044411341194063_1364461851960({"test_id":"558","message":"Phrase check has found the following error(s), but your test was still saved:\nThere's no For rule for '+the+url+http%3A%2F%2Fstackoverflow.com%2F%0D%0A'\n\nSaved new test as id#558","project_id":"151"}); 
```

您可能注意到，生成的回调函数的调用包含正确的 json 对象，尽管调用了失败函数！并且无法访问此响应以从中提取数据！

**如何使用 crossrider 使之前的 2 个连续请求在 3 个浏览器（IE、FF、Chrome）上工作？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:11:46.767

我怀疑这个问题与在扩展范围内使用 $.ajax 时遇到的跨域限制有关。

您可以按照下面的示例代码使用我们的[appAPI.request.post方法来避免这个问题。](http://docs.crossrider.com/#!/api/appAPI.request-method-post)代码在 Chrome 中测试，登录和保存均成功。

如果您需要任何进一步的帮助，请告诉我。

```
appAPI.ready(function ($) {
    appAPI.request.post({
        url : "https://app.testafy.com/api/v0/user/login",
        onSuccess: function (response) {
            alert("Login Success");
            appAPI.request.post({
                url : 'https://app.testafy.com/api/v0/test/save',
                onSuccess: function (response) {
                    alert("Saving Success:\n\n" + appAPI.JSON.stringify(response));
                },
                onFailure: function (httpCode) {
                    alert("Saving Failure:\n\n" + httpCode);
                },
                postData : {
                    "pbehave" : "For+the+url+http%3A%2F%2Fstackoverflow.com%2F%0D%0A",
                    "title" : "test",
                    "description" : " "
                }
            });
        },
        onFailure: function (httpCode) {
            alert("Login Failure:\n\n" + httpCode);
        },
        postData: {
            login_name : "abashir",
            password : "P@ssw0rd"
        }
    });
}); 
```

# uml - UML 图与 Scrum 方法有什么关系？

> ID：15730754
> 
> 赞同：3
> 
> 时间：2013-03-31T15:00:39.147
> 
> 标签：uml, scrum

我正在研究使用 Scrum（即敏捷）方法的项目概念，我想知道 UML 图对这种方法有什么作用。

在做了一些研究之后，我发现用例图和序列图很有用，但还有什么用呢？我应该为整个项目绘制这些图表，还是逐次迭代？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T15:07:54.500

UML 是一种对象建模工具，可以更好地向开发人员、设计师、客户等利益相关者表达产品/项目的不同方面。它与项目管理方法没有太大关系。您可以遵循敏捷或正常的瀑布模型并仍然使用 UML。

但是由于敏捷是不断发展的迭代方法，因此保持 UML 文档更新以更好地处理更改是有意义的。因此，将为每次迭代创建 UML 图。随着项目的发展，您的 UML 图也在发展。

> 通常有用的 UML 图是：用例图、类图、序列图、活动图。

# post - Laravel POST 请求失败

> ID：15730756
> 
> 赞同：0
> 
> 时间：2013-03-31T15:00:45.067
> 
> 标签：post, laravel

```
Route::post('/save', function()
{
    $key = Input::get('key');
    echo $key ; 
}); 
```

嗨，我已经定义了上述路线，我正在尝试向`POST`它提出请求。我发送的数据存储在其中，`key`但我没有在路由中获得任何值。

这是检索`POST`请求值的正确方法吗？

我通常会通过`$_POST['key']`使用 PHP 来检索它们。

这是一个屏幕截图：

![请求结果](https://i.stack.imgur.com/3XBcZ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:12:11.660

你做对了。但是，您需要从`/save`.

因此，您的结果路线将如下所示：

```
Route::post('save', function()
{
    $key = Input::get('key');
    echo $key ; 
}); 
```

# monitor - 监控 HornetQ

> ID：15730758
> 
> 赞同：4
> 
> 时间：2013-03-31T15:00:59.763
> 
> 标签：monitor, hornetq

我正在开发一个使用*HornetQ*进行消息传递的服务器。我想知道是否有一个实用程序（无论是独立应用程序还是 IDE 集成工具）可以用来监控开发阶段的队列内容（列出队列、其内容和存储在其中的具体消息）？

另外，在生产中检查队列内容的最佳方法是什么？

谢谢，

吉尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:51:32.977

通过管理接口的 JMX 方法有一些方法，您可以在其中调用此类任务。

如果您在 AS7 上，则应用程序服务器控件具有其中一些方法。JMX 管理在 hornetq 的 AS7 上被禁用，因为 AS7 的管理接口是现在的首选方式，但是如果您错过管理中可用的任何东西，您可以在 hornetq 上将属性 jmx-enabled 设置为 true，您应该准备去。

还有第三方产品，例如[Hermes JMS](https://sourceforge.net/projects/hermesjms/)。

您还可以在本章中找到更多信息：http: [//docs.jboss.org/hornetq/2.3.0.CR2/docs/user-manual/html/management.html](http://docs.jboss.org/hornetq/2.3.0.CR2/docs/user-manual/html/management.html)

# java - SpringMVC如何绑定多选选项元素

> ID：15730760
> 
> 赞同：0
> 
> 时间：2013-03-31T15:01:03.327
> 
> 标签：java, spring-mvc, data-binding, binding, databinder

我有四个选择选项列表，其中两个填充了数据库中的数据，两个是绑定到 POJO 的多选。然后我使用 java 脚本将选项从数据库选择选项列表添加到绑定选择选项列表中，但是当我提交给控制器时，如果表单返回错误并且选择选项列表中有数据，则数据丢失。

如果验证发现任何错误，则列表项只有在表单发布到控制器时才能正确获取数据，如果这些字段的数据丢失，则返回表单。

我可能必须为类中的列表项编写一个 CustomCollectionEditor 怎么做？

**犯罪.java**

```
public class Crime {

    private int crimeRecNo;
    private String crimeDetails;
    private double crimeLatLocation;
    private double crimeLongLocation;
    private String crimeStreetLn1;
    private String crimeStreetLn2;
    private Date crimeDate;
    private String crimeTime;
    private List<Citizens> victims;
    private List<Citizens> criminals;   
    private String recordedById;

//setters and getters 
```

**jsp：**

```
<ol>
<li><label>Victims List</label><button id="addVictimBtn">+/button>

<form:select path="" id="dbvictims" title="Victims Of Crime" class="victimLst">
<form:options items="${dbvictims.dbvictimList}" itemValue="socialSecurityNumber" itemLabel="name"/>
</form:select>                      

<label>Victims In Crime</label><button id="removeVictimBtn">-</button> 
<form:select path="victims" id="victims" title="Victims Of Crime"  multiple="multiple" class="victimLst">
<form:options items="${victims.victimList}" itemValue="socialSecurityNumber" itemLabel="name"/>
</form:select><form:errors path="victims" class="errors" />                            
</li>
</ol>                           

<ol>
<li>
<label>Criminals List</label><button id="addCriminalBtn">+</button>
<form:select path="" id="dbcriminals" title="Criminals Of Crime" class="criminalsLst">
<form:options items="${dbcriminals.dbcriminalList}" itemValue="socialSecurityNumber" itemLabel="name"/>
</form:select>  

<label>Criminals In Crime</label><button id="removeCriminalBtn">-</button> 
<form:select path="criminals" id="criminals" title="Criminals Of Crime"  multiple="multiple" class="criminalsLst">
<form:options items="${criminals.criminalList}" itemValue="socialSecurityNumber" itemLabel="name"/>
</form:select><form:errors path="criminals" class="errors" />                           
</li>
</ol> 
```

**Jquery** 这用于将项目从 dblist 添加到来自绑定列表元素

```
 $('#addVictimBtn').click(function(event){
        event.preventDefault();
        var victimId = $('#dbvictims option:selected').val();
        var victimName = $('#dbvictims option:selected').text();
        var options = '<option value="'+ victimId +'">' + victimName +'</option>';
        var exists = false;

    $('#victims option').each(function(){
        //alert($(this).val());
        if(this.value == victimId){

            exists = true;
        }                               
    });         

    if(!exists){
        $('#victims').append(options);              
    }           
    return false;           
});

$('#addCriminalBtn').click(function(event){
    event.preventDefault();
    var criminalId = $('#dbcriminals option:selected').val();
    var criminalName = $('#dbcriminals option:selected').text();
    var options = '<option value="'+ criminalId +'">' + criminalName +'</option>';
    var exists = false;

    $('#criminals option').each(function(){
        //alert($(this).val());
        if(this.value == criminalId){

            exists = true;
        }                               
    });         

    if(!exists){
        $('#criminals').append(options);            
    }           
    return false;           
}); 
```

**验证**

```
try{
   if(crime.getCriminals().isEmpty()){
    errors.rejectValue("criminals", "criminals.required");
   }                    

}catch(Exception e){
     errors.rejectValue("criminals", "criminals.required");
}

try{
   if(crime.getVictims().isEmpty()){
    errors.rejectValue("victims", "victims.required");
   }
}catch(Exception e){
    errors.rejectValue("victims", "victims.required");
} 
```

**错误**

在多列表中，如果我选择选项然后发布表单，我会收到以下错误消息

**无法将 java.lang.String[] 类型的属性值转换为财产受害者所需的 java.util.List 类型；嵌套异常是 java.lang.IllegalStateException：无法将类型 [java.lang.String] 的值转换为财产受害者 [0] 所需的类型 [com.crimetrack.business.Citizens]：找不到匹配的编辑器或转换策略 无效列表受害者**

**日志**

```
java.lang.NoSuchMethodException: com.crimetrack.business.Citizens.<init>(java.lang.String)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.getConstructor(Unknown Source)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:197)
    at org.springframework.beans.TypeConverterDelegate.convertToTypedCollection(TypeConverterDelegate.java:541)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:179)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1119)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:924)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    at org.springframework.validation.DataBinder.applyPropertyValues(DataBinder.java:692)
    at org.springframework.validation.DataBinder.doBind(DataBinder.java:588)
    at org.springframework.web.bind.WebDataBinder.doBind(WebDataBinder.java:191)
    at org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:112)
    at org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.bindRequestParameters(ServletModelAttributeMethodProcessor.java:153)
    at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:107)
    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
99160 [http-bio-8084-exec-7] DEBUG org.springframework.beans.TypeConverterDelegate  - Field [198501011] isn't an enum value
java.lang.NoSuchFieldException: 198501011
    at java.lang.Class.getField(Unknown Source)
    at org.springframework.beans.TypeConverterDelegate.attemptToConvertStringToEnum(TypeConverterDelegate.java:290)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:218)
    at org.springframework.beans.TypeConverterDelegate.convertToTypedCollection(TypeConverterDelegate.java:541)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:179)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1119)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:924)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    at org.springframework.validation.DataBinder.applyPropertyValues(DataBinder.java:692)
    at org.springframework.validation.DataBinder.doBind(DataBinder.java:588)
    at org.springframework.web.bind.WebDataBinder.doBind(WebDataBinder.java:191)
    at org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:112)
    at org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.bindRequestParameters(ServletModelAttributeMethodProcessor.java:153)
    at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:107)
    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
99160 [http-bio-8084-exec-7] DEBUG org.springframework.beans.TypeConverterDelegate  - Converting String to [class java.lang.String] using property editor [org.springframework.beans.propertyeditors.StringTrimmerEditor@339a86e6]
99160 [http-bio-8084-exec-7] DEBUG org.springframework.beans.TypeConverterDelegate  - Converting String to [int] using property editor [com.crimetrack.service.CustomIntEditor@74a3d72e]
99160 [http-bio-8084-exec-7] DEBUG org.springframework.beans.TypeConverterDelegate  - Converting String to [int] using property editor [com.crimetrack.service.CustomIntEditor@74a3d72e]
99160 [http-bio-8084-exec-7] DEBUG org.springframework.beans.TypeConverterDelegate  - No String constructor found on type [com.crimetrack.business.Citizens]
java.lang.NoSuchMethodException: com.crimetrack.business.Citizens.<init>(java.lang.String)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.getConstructor(Unknown Source)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:197)
    at org.springframework.beans.TypeConverterDelegate.convertToTypedCollection(TypeConverterDelegate.java:541)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:179)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1119)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:924)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    at org.springframework.validation.DataBinder.applyPropertyValues(DataBinder.java:692)
    at org.springframework.validation.DataBinder.doBind(DataBinder.java:588)
    at org.springframework.web.bind.WebDataBinder.doBind(WebDataBinder.java:191)
    at org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:112)
    at org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.bindRequestParameters(ServletModelAttributeMethodProcessor.java:153)
    at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:107)
    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
99160 [http-bio-8084-exec-7] DEBUG org.springframework.beans.TypeConverterDelegate  - Field [194302025] isn't an enum value
java.lang.NoSuchFieldException: 194302025
    at java.lang.Class.getField(Unknown Source)
    at org.springframework.beans.TypeConverterDelegate.attemptToConvertStringToEnum(TypeConverterDelegate.java:290)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:218)
    at org.springframework.beans.TypeConverterDelegate.convertToTypedCollection(TypeConverterDelegate.java:541)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:179)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1119)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:924)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    at org.springframework.validation.DataBinder.applyPropertyValues(DataBinder.java:692)
    at org.springframework.validation.DataBinder.doBind(DataBinder.java:588)
    at org.springframework.web.bind.WebDataBinder.doBind(WebDataBinder.java:191)
    at org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:112)
    at org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.bindRequestParameters(ServletModelAttributeMethodProcessor.java:153)
    at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:107)
    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
99160 [http-bio-8084-exec-7] DEBUG org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod  - Invoking [handleSave] method with arguments [com.crimetrack.business.Crime@32562ce3, org.springframework.validation.BeanPropertyBindingResult: 13 errors
Field error in object 'crime' on field 'criminals': rejected value [198501011,198501012]; codes [typeMismatch.crime.criminals,typeMismatch.criminals,typeMismatch.java.util.List,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [crime.criminals,criminals]; arguments []; default message [criminals]]; default message [Failed to convert property value of type 'java.lang.String[]' to required type 'java.util.List' for property 'criminals'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [com.crimetrack.business.Citizens] for property 'criminals[0]': no matching editors or conversion strategy found]
Field error in object 'crime' on field 'victims': rejected value [194302025,1985010122]; codes [typeMismatch.crime.victims,typeMismatch.victims,typeMismatch.java.util.List,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [crime.victims,victims]; arguments []; default message [victims]]; default message [Failed to convert property value of type 'java.lang.String[]' to required type 'java.util.List' for property 'victims'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [com.crimetrack.business.Citizens] for property 'victims[0]': no matching editors or conversion strategy found] 
```

# php - 表格 - 在 php 中更新表格

> ID：15730763
> 
> 赞同：-2
> 
> 时间：2013-03-31T15:01:24.997
> 
> 标签：php, sql, forms

我有一个表单，当我按下发送时，我希望它更新表格，但它不起作用，php 更新代码与表单位于同一页面，这里是代码：

```
 <button type="submit" name="sumbit"><img src="images/icons/fugue/tick-circle.png" width="16" height="16"> עדכן הזמנה</button>

<?php
con=mysqli_connect("");
mysql_select_db("web2_bestset");

if(isset($_POST['sumbit']))
{
    $add=$_POST['orderStatus'];
    $query="update orders set orderStatus=$add where id=".$order['ID'];
    mysql_query($query) or die("Cannot update");    
}
?> 
```

我得到的错误是：无法更新。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:07:53.500

你的骗局没有美元符号，还是错字？

```
$con=mysqli_connect(""); 
```

和：

```
$query="update orders set orderStatus='".$add."' where id='".$order['ID']."'"; 
```

请记住其他人。如果您不小心，您将被注射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:11:13.003

用这个替换你的模具

```
 die('Could not connect: ' . mysql_error()); 
```

并发布您遇到的错误？

# qt - Qt高分辨率定时器

> ID：15730765
> 
> 赞同：3
> 
> 时间：2013-03-31T15:01:28.613
> 
> 标签：qt, timer

我正在为带有 C++ 的系统编写模拟器，使用 Qt 进行 UI、事件处理等。显然，我需要有一个准确的时间参考。现在，我使用具有适当间隔的 QTimer（NTSC 为 16.66667 毫秒，PAL 为 20 毫秒），但正如预期的那样，其准确性非常糟糕。有时计时器以 50 FPS 的速度触发，有时以 120 FPS 的速度触发。

我意识到大多数操作系统都有一些功能可以提供精确到微（或纳）秒级别的时间戳。（即`QueryPerformanceCounter`在 Windows 上。）

除了使用系统时钟之外，我还考虑与音频时钟同步，因为我已经有一个音频输出流，但我认为 Qt 没有为此提供功能。

从 C++/Qt 同步到某个准确时钟以在特定时间间隔调用函数的最简单（和/或最佳）方法是什么，在正常情况下几乎没有抖动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-30T21:13:51.693

高分辨率时间戳并不意味着内核中有一种机制可以在达到高分辨率时间戳的给定值时唤醒休眠线程。

在 Qt 和 Windows 上，当您的计时器超时“足够短”（<= 10ms IIRC）时，Qt 将强制系统的滴答间隔为 ~1ms（1000Hz 或 1024Hz）。

你需要做的如下：

1.  使用跟踪高分辨率时间`QElapsedTimer`（在内部它使用 Windows 上的性能计数器或任何提供最高分辨率时间的东西）。

2.  根据 #1 中的高分辨率时间值设置计时器到期时间。

当然，您需要处理耗时过长的帧、错过的计时器等。但这是让它工作的唯一明智的方法。

或者，您可以在音频缓冲区耗尽到某个级别时使用通知。Qt 5 可能会为此提供 API。

在任何操作系统上生成更好计时的唯一方法是使用除通用计时器滴答之外的专用硬件。这样的硬件可能很简单，例如在环回模式下运行的串行端口。作为一个额外的、独立的可等待事件源，它非常有用。音频缓冲区交换也可以是一个很好的时间来源。

如果您希望进一步权衡功耗以换取计时精度，[则可以在轮询高分辨率时间源时将超线程专用于忙于等待](http://www.codeproject.com/Articles/98346/Microsecond-and-Millisecond-NET-Timer)。这不是一件容易的事，但对于某些应用程序，比如测试工具，它可能没问题。笔记本电脑/笔记本电脑/平板电脑用户会因此而讨厌你。

当心一篇[精彩的文章](http://www.codeproject.com/Articles/571289/Obtaining-Microsecond-Precision-in-NET)，该文章提出了一个没有工作机会的解决方案，在没有真实的（与想象的相反）网卡“计时器”会以某种方式影响套接字轮询等待的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:27:42.697

QTimer 是一个事件循环定时器。这意味着它仅在偶数循环可以自由处理事件时交付。如果条件“正确”，它也可能会跳过。

据我所知，Qt 中没有确定的触发计时器。您将不得不使用特定于平台的调用。

一种可能的 Qt 解决方案可能是与主 GUI 线程分开的线程，该线程使用`msleep`或进行计数[`usleep`](http://qt-project.org/doc/qt-5.0/qtcore/qthread.html#usleep)。您可以让定时器线程休眠一段时间并唤醒，唤醒另一个使用信号量执行实际工作的线程，然后重新进入休眠状态。工作线程做了一份工作，然后再次等待信号量。

`QThread::sleep`不依赖事件循环，可能有更好的准确性。

# perl - perl 对象构造函数

> ID：15730766
> 
> 赞同：1
> 
> 时间：2013-03-31T15:01:29.200
> 
> 标签：perl, constructor

我在教程中读到了类似调用构造函数的内容：

```
my $v = Vehicule->new( 2, "bleu" ); 
```

那么相关的类就是这样的

```
sub new {
    my ($class,$nbRoues,$couleur) = @_;
    my $this = {};
    bless($this, $class);
    $this->{NB_ROUES} = $nbRoues;
    $this->{COULEUR} = $couleur;
    return $this;
} 
```

我不明白的是`@_`第一个元素如何/为什么包含类名？

```
my ($class,$nbRoues,$couleur) = @_ 
```

当我们这样称呼它时`Vehicule->new( 2, "bleu" );`

与类似的类的方法/功能相同

```
my ($this) = @_ ; 
```

其实我不是很明白`Class->new`或`$var->method`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:23:51.480

简短但不可否认的是，对您的问题的回答只是“因为它就是这样工作的”。

Perl 最初不是一种 OO 语言，所以 OO 支持被贴在现有事物的一边，以允许它尽可能多地利用以前存在的东西。该实现的一部分是，当 a`sub`作为方法调用时，调用它的类或对象将添加到其参数列表的开头。 `MyClass->new(@args)`大致等价于`MyClass::new('MyClass', @args)`并且，如果`$obj`是 的一个实例`MyClass`，`$obj->foo(@args)`则大致等价于`MyClass::foo($obj, @args)`。

我说它们“大致等效”而不是“相同”的原因是，如果方法不是由 实现的，则方法调用版本（使用`->`）将搜索继承的实现，而调用版本则不会。`@ISA``MyClass``sub`

# java - 在我为其赋值后，变量仍然为空 JAVA

> ID：15730770
> 
> 赞同：2
> 
> 时间：2013-03-31T15:01:44.970
> 
> 标签：java, null, variable-assignment

```
public void crearCliente() {

    int i, k, j, l;
    registro r = new registro();
    k = lr.getSize();

    for (i = 0; i < k; i++) {
        r = lr.get(i);
        l = r.getSize();

        String contenido[] = new String[8];
        for (j = 0; j < l; j++) {
            contenido[j] = r.getCampoR(j);
            //System.out.println(contenido[j]);
        }
        c1 = new Cliente(contenido[0], contenido[1], contenido[2], contenido[3], contenido[4], contenido[5], contenido[6], contenido[7]);
        c1.verCliente();} 
```

在这段代码中，最后，我为 c1 分配了一个值，但是当我打印它时，我在所有 c1 字段中都得到了 null。我为 Cliente 类写下我的代码。我想打印我给 c1 的所有值，但我不知道为什么它在所有字段中都打印 null。我使用调试器跟踪代码，直到将所有值分配给新变量的语句之前，一切都是正确的。

```
public class Cliente {

private String Id_cliente;
private String Cod_postal;
private String Numero;
private String Calle;
private String Provincia;
private String Poblacion;
private String Telefono;
private String Apellidos;

public Cliente(String idc, String cp, String num, String cal, String prov, String pob, String tlf, String aps){

    idc = Id_cliente;
    cp = Cod_postal;
    num = Numero;
    cal = Calle;
    prov = Provincia;
    pob = Poblacion;
    tlf = Telefono;
    aps = Apellidos;

}

public void verCliente(){

   System.out.println("Id_cliente: "+ Id_cliente);
   System.out.println("Codigo postal: "+ Cod_postal);
   System.out.println("Numero: "+ Numero);
   System.out.println("Calle: "+ Calle);
   System.out.println("Provincia: "+ Provincia);
   System.out.println("Poblacion: "+ Poblacion);
   System.out.println("Telefono: "+ Telefono);
   System.out.println("Apellidos: "+ Apellidos);

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:06:27.003

你应该改变这个

```
idc = Id_cliente; 
```

到

```
Id_cliente = idc;. 
```

您正在为方法参数而不是字段分配值。这同样适用于您的构造函数中的所有参数`Cliente`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:05:29.717

您的分配在您的构造函数中是向后的。切换所有这些的左侧和右侧，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:06:19.583

您的 Cliente 类的构造函数正在切换分配。将 idc = Id_cliente 更改为 Id_cliente = ic。

# android - android java.lang.IllegalStateException MediaPlayer.isPlaying

> ID：15730772
> 
> 赞同：6
> 
> 时间：2013-03-31T15:01:58.157
> 
> 标签：android, android-mediaplayer

我发布了我的应用程序，并在一些手机（如 Galaxy Nexus 或 HTC Explorer）上我的应用程序崩溃了。

我在许多手机上进行了测试，应用程序运行良好。

你能解释一下为什么会发生这种情况以及如何解决它吗？

**错误**

```
java.lang.IllegalStateException
at android.media.MediaPlayer.isPlaying(Native Method)
at com.mario.kvizoman.SoloIgra.novopitanjce(SoloIgra.java:922)
at com.mario.kvizoman.SoloIgra.onClick(SoloIgra.java:901)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3768)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
at dalvik.system.NativeStart.main(Native Method) 
```

**代码**

```
if(reptimer!=null) {
    if(reptimer.isPlaying()) {
        reptimer.stop();
    }
} 
```

onCreate reptimer 是

```
reptimer = MediaPlayer.create(SoloIgra.this, R.raw.napeto); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T15:21:28.130

根据 Android 文档：“如果内部播放器引擎尚未初始化或已释放，则出现 IllegalStateException。”

因此，请确保您的 MediaPlayer 已初始化，并且您不要使用已发布的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T00:06:35.163

从您的代码中，由于`repTimer.isPlaying()`被调用，我假设该`JAVA` `repTimer`对象**不是** `NULL`. 但是，`IllegalStateException`当`native` `MediaPlayer`对象为时触发`NULL`（参考：[http](http://androidxref.com/4.2.2_r1/xref/frameworks/base/media/jni/android_media_MediaPlayer.cpp#380) ://androidxref.com/4.2.2_r1/xref/frameworks/base/media/jni/android_media_MediaPlayer.cpp#380 ）。`JAVA`因此，您的州和州之间存在一些不匹配`native`。

**PS：**您可能需要在粘贴此问题的位置之前检查代码。在一些较早的方法调用中，本机对象已被销毁，这不会反映在您的`JAVA`对象状态中。

# image-processing - 具有预定义重叠的 matlab 快速滑动窗口（im2col 'sliding' matlab）

> ID：15730776
> 
> 赞同：2
> 
> 时间：2013-03-31T15:03:00.007
> 
> 标签：image-processing, computer-vision, matlab

我需要从大小为 NxN (N>>10) 的图像中获取大小为 10x10 的滑动窗口的局部像素直方图。

我正在使用以下代码来获取滑动窗口。

```
 B = im2col(inputImage, [10, 10],'sliding'); 
```

但是根据这段代码，我无法确定两个本地窗口之间的重叠。如何从具有大小为 mxm 的滑动窗口和两个滑动窗口之间的一半重叠的图像中获取局部直方图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T15:21:18.750

IM2COL 函数总是生成`[n-1,m-1]`重叠的滑动窗口（即 1 个像素移位）。也许您可以按原样调用 IM2COL，然后丢弃您不想要的列。请记住，滑动窗口是通过以列顺序方式遍历矩阵来生成的。

* * *

快速搜索发现了一个自定义[`im2colstep`](http://code.google.com/p/retarget-toolkit/source/browse/trunk/Matlab/Saliency/k-svd/ksvdbox13/private/im2colstep.m)函数，以[MEX 文件](http://code.google.com/p/retarget-toolkit/source/browse/trunk/Matlab/Saliency/k-svd/ksvdbox13/private/im2colstep.c)的形式实现。在您的情况下，您可以将其称为：

```
cols = im2colstep(inputImage, [10 10], [5 5]); 
```

根据作者的说法，该功能是[KSVD-Box](http://www.cs.technion.ac.il/~ronrubin/software.html)软件包的一部分，“可免费供学术和个人使用”。

# cassandra - Python 的最佳 Cassandra 1.2 驱动程序，我应该忘记 CQL 吗？

> ID：15730777
> 
> 赞同：5
> 
> 时间：2013-03-31T15:03:02.880
> 
> 标签：cassandra, pycassa

我正在为 python 寻找一个好的驱动程序：

1）皮卡萨。它不支持 CQL，他们不认为很快就会这样做。

2) [https://code.google.com/a/apache-extras.org/p/cassandra-dbapi2/](https://code.google.com/a/apache-extras.org/p/cassandra-dbapi2/)。

我想使用 cassandra-dbapi2 但[这里](http://www.datastax.com/support-forums/topic/when-will-pycassa-support-cql)有人说“它不支持连接池负载平衡高级功能”。另一方面，我可以使用 PyCassa，但它不支持 CQL。我应该尝试 Pycassa 并忘记客户端上的 CQL 吗？

我不在乎失去 ORM 功能，实际上我认为有时可能会更糟，因为它迫使您的团队学习新事物（您正在使用的 ORM API 上的新功能），而 SQL 是人们知道的东西。既然已经了解 SQL/CQL，为什么还要学习一门新语言？但这只是一个意见...

你认为最好的选择是什么？我应该忘记 CQL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:32:53.743

Pycassa 或 CQL 支持的驱动程序，两者都是客户端 API 实现节俭接口，cassandra 的基本 API，所以基本上你选择的任何 API 都应该具有相同的功能。对于每个 CQL 实现，在 pycassa 中都有一个替代方案，但如果真的喜欢 pycassa 并且您仍然想将 CQL 与它混合，那么您可以使用 execute_cql thrift 调用通过 pycassa 执行 CQL 语句。您还可以检查由 cassandra 提交者之一编写的**[pcmanus / python-cql 。](https://github.com/pcmanus/python-cql)**

# javascript - addthis 分享一些 facebook 异步问题

> ID：15730780
> 
> 赞同：0
> 
> 时间：2013-03-31T15:03:14.323
> 
> 标签：javascript, jquery, addthis

问题与[Javascript有关：单击时加载AddThis](https://stackoverflow.com/questions/6287119/javascript-load-addthis-upon-clicking)，但并不完全相同。

所以我有一些使用 AJAX 上传的内容。在那里，我有一个带有正确代码的新 AddThis 工具箱，就像我在其他地方一样，白色是静态加载的并且工作正常。

当我更新我的内容时，我调用`addthis.toolbox()`它从代码生成工具箱，但 Facebook 按钮不起作用，而 Twitter 和`.addthis_button_compact`工作。我使用非常简单的紧凑按钮样式。不起作用[http://d.pr/i/K1QH](http://d.pr/i/K1QH) - 悬停时也不起作用，点击时也不起作用（动态加载）。悬停时工作正常[http://d.pr/i/OilR](http://d.pr/i/OilR) - 静态加载

不幸的是无法在实时站点上显示它 - 但就像在示例[http://jsfiddle.net/beshur/mjncS/](http://jsfiddle.net/beshur/mjncS/)中一样（并且在这里有效）

有任何想法吗？或者换一种说法：有没有办法在点击 Facebook 图标时打开一个新窗口（就像 Twittwe 一样）？只是简单的共享者链接。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:43:38.457

您获得悬停是因为您已登录 AddThis。该窗口是即时共享功能。如果您退出 AddThis，那应该会消失并按照您期望的方式工作。

# visual-studio - 创建项目模板时更新 Visual Studio 2012 中的 IIS Express 端口

> ID：15730785
> 
> 赞同：5
> 
> 时间：2013-03-31T15:03:39.290
> 
> 标签：visual-studio

我知道标题似乎有点误导，但问题很简单。

我刚刚在 Visual Studio 2012 Express for Web 中创建了一个新的 WebApplication 项目，添加了几个额外的文件并将该项目导出为新模板。在我开始从这个模板调试一个新的项目实例之前，一切似乎都运行良好。当我打开项目实例的属性窗口时，我注意到“Web”下的“项目 URL”设置指向`http://localhost:50637`的端口号与我用来创建模板的项目相同。显然我希望新项目实例有自己的端口，我可以很容易地分配一个新的。但我的问题是 Visual Studio 是否可以在创建新项目实例时自动执行？我想我必须以某种方式为模板项目配置项目属性......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-30T16:17:41.067

将项目导出为新模板后，解压缩导出的 zip 文件。这样您就可以编辑网站的 .csproj 文件。在记事本中打开 .csproj 文件并编辑以下部分：

```
<ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="{349c5851-65df-11da-9384-00065b846f21}">
        <WebProjectProperties>
          <UseIIS>True</UseIIS>
          <AutoAssignPort>True</AutoAssignPort>
          <DevelopmentServerPort>0</DevelopmentServerPort>
          <DevelopmentServerVPath>/</DevelopmentServerVPath>
          ***<IISUrl></IISUrl>***
          <NTLMAuthentication>False</NTLMAuthentication>
          <UseCustomServer>False</UseCustomServer>
          <CustomServerUrl>
          </CustomServerUrl>
          <SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile>
        </WebProjectProperties>
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions> 
```

在哪里`<IISUrl>http://localhost:59344/</IISUrl>`，只需删除`http://localhost:59344/`url 使其为空白。然后重新压缩文件夹并安装扩展。

创建项目时将自动创建一个新的端口号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-05T01:57:04.797

在 Visual Studio 2019 中，您需要从 Properties 目录中删除 launchSettings.json，以便 Visual Studio 可以在项目创建期间自动创建文件。

脚步：

1-创建一个网络项目

2- 从属性目录中删除 launchSettings.json。

3- 在 Visual Studio 2019 中，单击项目选项卡，然后单击导出模板

现在您可以通过找到您的项目模板来创建一个新的 Web 项目，VS 会自动创建带有随机 Web 端口的 launchSettings.json 文件。

# java - 带有 grizzly 的 SSL-REST-server，ResourceConfig 实例不包含任何根资源类

> ID：15730786
> 
> 赞同：1
> 
> 时间：2013-03-31T15:03:43.023
> 
> 标签：java, rest, https, jersey, grizzly

我试图用 grizzly 使用 SSL 来完成一个安全的 REST 服务器。我在中配置我的资源

```
package SPSServer.controller.Grizzly;
@Path("/")
public class MessageRessource {

@GET
@Path("serverinfo")
@Produces({MediaType.APPLICATION_JSON,MediaType.TEXT_XML})
public ServerInfo serverinfo() {
    ServerInfo info = new ServerInfo();
    info.server = System.getProperty("os.name") + " " + System.getProperty("os.version");
    return info;
}

@GET
@Produces({MediaType.APPLICATION_JSON,MediaType.TEXT_XML})
//@Produces( MediaType.TEXT_PLAIN )
public String message() {
    return "Yea! ";
}
} 
```

现在我开始灰熊了

```
 webServer = new GrizzlyWebServer(1337, ".", true);
    SSLConfig sslConfig = new SSLConfig(true);
    webServer.setSSLConfig(sslConfig);
    ServletAdapter adapter = new ServletAdapter();
    final Map<String, String> initParams = new HashMap<String, String>();
    adapter.addInitParameter(PackagesResourceConfig.PROPERTY_PACKAGES,    "SPSServer.controller.Grizzly.MessageRessource");
           adapter.addInitParameter(ClasspathResourceConfig.PROPERTY_CLASSPATH, ".");

    adapter.setContextPath("/");
    adapter.setServletInstance(new ServletContainer());

     webServer.addGrizzlyAdapter(adapter, new String[]{"/"});
     webserver.start(); 
```

`

它开始于

> 2013 年 3 月 31 日下午 4:55:14 com.sun.grizzly.Controller logVersion INFO：GRIZZLY0001：启动 Grizzly 框架 1.9.56 - 2013 年 3 月 31 日下午 4:55 点击返回停止...

但是当我尝试访问资源时/ `'(https://locahost:1337/)'`它会抛出这个错误：

> 2013 年 3 月 31 日下午 4:56:12 com.sun.jersey.api.core.PackagesResourceConfig 初始化信息：扫描包中的根资源和提供程序类：SPSServer.controller.Grizzly.MessageRessource 2013 年 3 月 31 日 4:56： 12 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate INFO: Initiating Jersey application, version 'Jersey: 1.17.1 02/28/2013 03:28 PM' Mar 31, 2013 4:56:13 PM com .sun.jersey.server.impl.application.RootResourceUriRules 严重：ResourceConfig 实例不包含任何根资源类。2013 年 3 月 31 日下午 4:56:13 com.sun.grizzly.http.servlet.ServletAdapter doService 严重：服务异常：com.sun.jersey.api.container.ContainerException：ResourceConfig 实例不包含任何根资源类。

我试过让 grizzly 工作（使用球衣 HttpServerFactory，我得到了一个没有 ssl 的工作休息服务器，我设法让一个 httpsServer 工作，但两者结合起来让我头疼了好几天）所以现在我真的依赖你的帮助。在此先感谢（如果有人纠正我的语法，我不会冒犯，我仍然需要学习它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:34:39.263

你试过这个泽西样品吗？

[https://maven.java.net/content/repositories/releases/com/sun/jersey/samples/https-clientserver-grizzly/1.17.1/https-clientserver-grizzly-1.17.1-project.zip](https://maven.java.net/content/repositories/releases/com/sun/jersey/samples/https-clientserver-grizzly/1.17.1/https-clientserver-grizzly-1.17.1-project.zip)

# image - 当 Wordpress 中的选项发生变化时，媒体上传器不保存

> ID：15730789
> 
> 赞同：1
> 
> 时间：2013-03-31T15:04:14.057
> 
> 标签：image, wordpress, media, save, uploader

我在 Wordpress 中的自定义选项页面有问题。这个问题与我前段时间提出的媒体上传器有关。它可以正常工作，但是当重新保存选项时，上传文件的字段中的 url 消失了，并且在我的 html 代码中没有显示图像。仅当我在同一选项页面中连续两次保存选项时才会发生这种情况。url 应该保留在该字段中，但这不会发生。

要放入的媒体上传器的代码`functions.php`是：

```
//Media Uploader Scripts
wp_enqueue_script('media-upload');
wp_enqueue_script('thickbox');
wp_register_script('my-upload', get_bloginfo( 'stylesheet_directory' ) . '/js/uploader.js', array('jquery','media-upload','thickbox'));
wp_enqueue_script('my-upload');

//Media Uploader Style
wp_enqueue_style('thickbox');

if (isset($_GET['page']) && $_GET['page'] == 'my_plugin_page') {
add_action('admin_print_scripts', 'my_admin_scripts');
add_action('admin_print_styles', 'my_admin_styles');
} 
```

`uploader.js`的内容在哪里

```
jQuery(document).ready(function() {

jQuery('#upload_image_button').click(function() {
formfield = jQuery('#upload_image').attr('name');
tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
return false;
});

window.send_to_editor = function(html) {
 imgurl = jQuery('img',html).attr('src');
 jQuery('#upload_image').val(imgurl);
 tb_remove();
}

}); 
```

这是添加到的代码`functions.php`

```
<?php

add_action( 'init', 'th_admin_init' );
add_action( 'admin_menu', 'th_options_page_init' );

function th_admin_init() {
    $options = get_option( "th_theme_options" );
    if ( empty( $options ) ) {
        $options = array(
            'th_intro' => 'Some intro text for the home page',
            'th_tag_class' => false,
            'th_ga' => false,
            'upload_image' => ''
        );
        add_option( "th_theme_options", $options, '', 'yes' );
    }   
}

function th_options_page_init() {
    $theme_data = get_theme_data( TEMPLATEPATH . '/style.css' );
    $options_page = add_theme_page( $theme_data['Name']. ' Theme options', $theme_data['Name']. ' Opzioni', 'edit_theme_options', 'theme-options', 'th_options_page' );
    add_action( "load-{$options_page}", 'th_load_options_page' );
}

function th_load_options_page() {
    if ( $_POST["th-options-submit"] == 'Y' ) {
        check_admin_referer( "th-options-page" );
        th_save_theme_options();
        $url_parameters = isset($_GET['tab'])? 'updated=true&tab='.$_GET['tab'] : 'updated=true';
        wp_redirect(admin_url('themes.php?page=theme-options&'.$url_parameters));
        exit;
    }
}

function th_save_theme_options() {
    global $pagenow;
    $options = get_option( "th_theme_options" );

    if ( $pagenow == 'themes.php' && $_GET['page'] == 'theme-options' ){ 
        if ( isset ( $_GET['tab'] ) )
            $tab = $_GET['tab']; 
        else
            $tab = 'homepage'; 

        switch ( $tab ){ 
            case 'general' :
                $options['th_tag_class']      = $_POST['th_tag_class'];
            break; 
            case 'footer' : 
                $options['th_ga']  = $_POST['th_ga'];
            break;
            case 'homepage' : 
                $options['th_intro']      = $_POST['th_intro'];
                $options['upload_image']      = $_POST['upload_image'];
            break;
        }
    }

    if( !current_user_can( 'unfiltered_html' ) ){
        if ( $options['th_ga']  )
            $options['th_ga'] = stripslashes( esc_textarea( wp_filter_post_kses( $options['th_ga'] ) ) );
        if ( $options['th_intro'] )
            $options['th_intro'] = stripslashes( esc_textarea( wp_filter_post_kses( $options['th_intro'] ) ) );
        if ( $options['upload_image']  )
            $options['upload_image'] = stripslashes( esc_textarea( wp_filter_post_kses( $options['upload_image'] ) ) );
    }

    $updated = update_option( "th_theme_options", $options );
}

function th_admin_tabs( $current = 'homepage' ) { 
    $tabs = array( 'homepage' => 'Home', 'general' => 'Generali', 'footer' => 'Footer' ); 
    $links = array();
    echo '<div id="icon-themes" class="icon32"><br></div>';
    echo '<h2 class="nav-tab-wrapper">';
    foreach( $tabs as $tab => $name ){
        $class = ( $tab == $current ) ? ' nav-tab-active' : '';
        echo "<a class='nav-tab$class' href='?page=theme-options&tab=$tab'>$name</a>";

    }
    echo '</h2>';
}

function th_options_page() {
    global $pagenow;
    $options = get_option( "th_theme_options" );
    $theme_data = get_theme_data( TEMPLATEPATH . '/style.css' );

//Media Uploader Scripts
wp_enqueue_script('media-upload');
wp_enqueue_script('thickbox');
wp_register_script('my-upload', get_bloginfo( 'stylesheet_directory' ) . '/js/uploader.js', array('jquery','media-upload','thickbox'));
wp_enqueue_script('my-upload');

//Media Uploader Style
wp_enqueue_style('thickbox');

if (isset($_GET['page']) && $_GET['page'] == 'theme_options') {
add_action('admin_print_scripts', 'my_admin_scripts');
add_action('admin_print_styles', 'my_admin_styles');
}

    ?>

<div class="wrap">
        <h2><?php echo $theme_data['Name']; ?> Opzioni</h2>

        <?php
            if ( 'true' == esc_attr( $_GET['updated'] ) ) echo '<div class="updated" ><p>Modifiche salvate.</p></div>';

            if ( isset ( $_GET['tab'] ) ) th_admin_tabs($_GET['tab']); else th_admin_tabs('homepage');
        ?>

        <div id="poststuff">
            <form method="post" action="<?php admin_url( 'themes.php?page=theme-options' ); ?>">
                <?php
                wp_nonce_field( "th-options-page" ); 

                if ( $pagenow == 'themes.php' && $_GET['page'] == 'theme-options' ){ 

                    if ( isset ( $_GET['tab'] ) ) $tab = $_GET['tab']; 
                    else $tab = 'homepage'; 

                    echo '<table class="form-table">';
                    switch ( $tab ){
                        case 'general' :
                            ?>
                            <tr>
                                <th><label for="th_tag_class">Tags with CSS classes:</label></th>
                                <td>
                                    <input id="th_tag_class" name="th_tag_class" type="checkbox" <?php if ( $options["th_tag_class"] ) echo 'checked="checked"'; ?> value="true" /> 
                                    <span class="description">Output each post tag with a specific CSS class using its slug.</span>
                                </td>
                            </tr>
                            <?php
                        break; 
                        case 'footer' : 
                            ?>
                            <tr>
                                <th><label for="th_ga">Insert tracking code:</label></th>
                                <td>
                                    <textarea id="th_ga" name="th_ga" cols="60" rows="5"><?php echo esc_html( stripslashes( $options["th_ga"] ) ); ?></textarea><br/>
                                    <span class="description">Enter your Google Analytics tracking code:</span>
                                </td>
                            </tr>
                            <?php
                        break;
                        case 'homepage' : 
                            ?>
                            <tr>
                                <th><label for="th_intro">Introduction</label></th>
                                <td>
                                    <textarea id="th_intro" name="th_intro" cols="60" rows="5" ><?php echo esc_html( stripslashes( $options["th_intro"] ) ); ?></textarea><br/>
                                    <span class="description">Enter the introductory text for the home page:</span>
                                </td>
                            </tr>
                                <tr>
                                <th><label for="upload_image">Upload Image</label></th>
                                <td>
                                    <input id="upload_image" type="text" size="36" name="upload_image" value="" />
                                    <input id="upload_image_button" type="button" class="button-secondary" value="Carica Immagine" />
                                <br /><span class="description">Enter an URL or upload an image for the banner.</span>
                                </td>
                            </tr>

                            <?php
                        break;
                    }
                    echo '</table>';
                }
                ?>
                <p class="submit" style="clear: both;">
                    <input type="submit" name="Submit"  class="button-primary" value="Update options" />
                    <input type="hidden" name="th-options-submit" value="Y" />
                </p>
            </form>

        </div>

    </div>
<?php
}

?> 
```

任何人都可以帮助我吗？

先感谢您！

**- - - - - - 解决方案 - - - - - -**

这不是数据库问题。这只是一个 HTML 问题，因为`value`输入中命名的元素`upload_image`被设置为`""`. 因此，将文件表单内的代码`function.php`从以下位置更改：

```
<input id="upload_image" type="text" size="36" name="upload_image" value="" /> 
```

至：

```
<input id="upload_image" type="text" size="36" name="upload_image" value="<?php echo esc_html( stripslashes( $options["upload_image"] ) ); ?>" /> 
```

# r - 如何将多个参数拟合到R中的微分方程？

> ID：15730793
> 
> 赞同：1
> 
> 时间：2013-03-31T15:04:42.860
> 
> 标签：r, curve-fitting, differential-equations, data-fitting, model-fitting

有了这样的数据集

```
time    C
0.1 2.6
0.25    4.817
0.5 6.596
0.75    6.471
1   6.049
1.5 5.314
2   4.611
2.5 4.5
3   4.392
4   4.013
5   3.698
6   3.505
8   3.382
12  2.844
14  2.383
24  1.287 
```

我想将此数据拟合到模型中，该模型定义如下

```
twocpt <- function(t, Cc, parms){
with(as.list(parms),{
   dC0 <- -k01*C0
   dCc <- k01*C0 + k21*Cp -(k12+ke)*Cc
   dCp <- k12*Cc - k21*Cp
   list(dCc)
   })
   } 
```

我参考了这个页面（[http://www.inside-r.org/packages/cran/FME/docs/modCost](http://www.inside-r.org/packages/cran/FME/docs/modCost)），并开发了以下代码：

```
#two compartment model, oral dosing
require(ggplot2)
require(FME)
require(XLConnect)

#Read Data from xlsx file, draw a scatter plot of the plasma-concentration profile
conc <- readWorksheetFromFile("E:/R/Book1.xlsx", sheet=1, header=TRUE)
pprofile <- ggplot(conc, aes(time, C))
pprofile <- pprofile + scale_x_continuous("Time (hr)")+scale_y_continuous("Concentration (ng/mL)")
(pprofile <- pprofile + geom_point()+geom_line())

#Create a matrix of the data frame.
concm <- as.matrix(conc)

#Define the parameters in the current simulation
k01 <- 1
k12 <- 10
k21 <- 0.5
ke <- 4

# wrap them up in the parms
parms <- c(k01=k01, k12=k12, k21=k21, ke=ke)

#Define the differential function
twocpt <- function(t, Cc, parms){
with(as.list(parms),{
   dC0 <- -k01*C0
   dCc <- k01*C0 + k21*Cp -(k12+ke)*Cc
   dCp <- k12*Cc - k21*Cp
   list(dCc)
   })
   }

#Define Cost function
Cost <- function(P) {
parms["k01"] <- P[1]
parms["k12"] <- P[2]
parms["k21"] <- P[3]
parms["ke"] <- P[4]

time <- conc[,1]
out <- ode(c(C=0), time, twocpt, parms)
return(modCost(out, concm))
}

Fit <- modFit(p=c(k01=10, k12=0.1, k21=0.4, ke=2), f=Cost)

summary(Fit) 
```

但是，我收到以下警告消息：

```
illegal input detected before taking any integration steps - see written message 
```

谁能告诉我问题出在哪里？或者如何快速完成？谢谢。

# three.js - 如何在three.js中提取/保存相机的lookAt向量？

> ID：15730794
> 
> 赞同：0
> 
> 时间：2013-03-31T15:04:50.150
> 
> 标签：three.js

在 Three.js 中，调用时是否可以保存结果向量`lookAt()`？我想保留它以便稍后重新指向相机，作为一种重置。

我查看了代码`lookAt()`并看到了各种矩阵和四元数操作，但无法弄清楚如何从中提取最终向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:28:16.370

如果您希望能够重置相机的方向，只需记住`camera.rotation`矢量，然后执行以下操作：

```
camera.rotation.copy( myRotationVector ); 
```

有关计算“lookAt”向量的信息，您可以参考[three.js 设置和读取相机外观向量](https://stackoverflow.com/questions/15696963/three-js-set-and-read-camera-look-vector/)。

# javascript - 如果数字计数等于 16，则显示 html div（cc 验证）

> ID：15730800
> 
> 赞同：0
> 
> 时间：2013-03-31T15:05:34.640
> 
> 标签：javascript

我是 javascript 的初学者。

我正在尝试用 javascript 做一些事情。

但我最终得到了很多无效的代码

这是我的html代码

```
<input name="cc_number">

<div id="hidee" style="display:none">
<input name="cvv2">
</div> 
```

如果“cc_number 输入”中的字符数为 16，我正在尝试通过 javascript 显示它

我的想法是计算字符并在它们等于 16 时创建一个条件，然后显示 div。

但我未能构建代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:10:26.253

尝试在输入字段的 keyup 上挂钩处理程序：

```
<input name="cc_number" onkeyup="showDiv(this)">

<div id="hidee" style="display:none">
<input name="cvv2">
</div>

<script>
  function showDiv(src) {
    document.getElementById("hidee").style.display =
      src.value.length==16 ? "block" : "none";
  }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:12:14.033

你可以这样做：

```
var number = document.getElementById('cc_number');
var hidee = document.getElementById('hidee');

number.onkeyup = function () {
    if (this.value.length >= 16)
        hidee.style.display = 'block';
    else
        hidee.style.display = 'none';
}; 
```

我还`id`向您添加了一个，`cc_number` `div`以便可以更轻松地选择它。

```
<input id="cc_number" name="cc_number"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:15:57.420

试试这个*不显眼的*解决方案：

**Javascript**：

```
document.getElementsByName("cc_number")[0].onkeyup = function(){
    if(this.value.length>=16)
        document.getElementById("hidee").style.display ="block";
    else
        document.getElementById("hidee").style.display ="none";
} 
```

**标记**：

```
<input name="cc_number" />

<div id="hidee" style="display:none">
    <input name="cvv2" />
</div> 
```

**jsfiddle**：http: [//jsfiddle.net/PhyVQ/](http://jsfiddle.net/PhyVQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T15:09:03.660

可能你最好的选择是一点 jQuery：

```
$('input[name="cc_number"]').on('keyup', function() {
    if($(this).val().length==16){
        $('#hidee').show();
    } else {
        $('#hidee').hide();
    }
}); 
```

它只是附加一个侦听器（示例中的 keyup），并在该事件上检查值的长度。

# rest - 骆驼：在路由之前修改输出

> ID：15730803
> 
> 赞同：1
> 
> 时间：2013-03-31T15:06:26.770
> 
> 标签：rest, apache-camel

在骆驼路由器中，我有以下路由。

```
from("jetty:http://localhost:9092?matchOnUriPrefix=true").
    to("http://server:9093/service1?bridgeEndpoint=true&throwExceptionOnFailure=false")
    .to("http://server:9094/service2?bridgeEndpoint=true&throwExceptionOnFailure=false")
    .to("log:output") 
```

上述路由工作正常。

但我的要求是在发送到 service2 之前修改 service1 的输出。就像我得到 `<x>abc</x>`

我必须将其转换为

```
<y><x>abc</x></y> 
```

我尝试使用处理器，但我将 service2 的 exchange.getOut() 设为 null，而实际上它返回了 xml。

如果可能的话，有人可以帮助我吗？如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:42:28.993

我不确定您在路径中的何处添加此处理器。进入处理器的消息在交换机上的输入消息中可用。我看到您正试图从中提取消息。

当您在 out 消息上设置正文时，它在下一个端点或处理器的交换上的消息中可用，因此必须在交换上获取正确的消息。

以下路线应该有意义，否则将您的整个路线与处理器一起粘贴到您的问题中，成员可以看到问题所在：

```
from("jetty:http://localhost:9092?matchOnUriPrefix=true")
    .to("http://server:9093/service1?bridgeEndpoint=true&throwExceptionOnFailure=false").
        process(new Processor() {
        public void process(Exchange exchange) throws Exception {
            String body = exchange.getIn().getBody(String.class);
            exchange.getOut().setBody(modifyBody(body);
        }
        })
    .to("http://server:9094/service2?bridgeEndpoint=true&throwExceptionOnFailure=false")
    .to("log:output"); 
```

其中 modifyBody 将是执行所需转换的自定义方法。

# java - JAVA中的行长

> ID：15730810
> 
> 赞同：2
> 
> 时间：2013-03-31T15:07:28.577
> 
> 标签：java

我对 Java 中的限制或约定有疑问。java中行代码的最大长度是否有任何限制？或者很长的线路会导致任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:10:52.093

Java 行长度没有相关限制，编译器可能有一个，但可能在几个 KB 的范围内。但是，这不是很实用。我倾向于将我的行数保持在 100 个字符以下。

较旧的文档可能会说 80，但我认为这不再实用，因为几乎没有人再打印代码并且通常屏幕一次显示超过 80 列。

至于约定，是的，有一些。请参阅 Java 文档。它还讨论了换行符、大括号等的通常位置。

这是一个链接：[Java 编码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T15:13:01.570

有关Oracle 的 Java 约定，请参阅[此内容。](http://www.oracle.com/technetwork/java/codeconv-138413.html)他们说一行最多应包含 80 个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:10:11.520

不是真的，但如果线条适合屏幕，这是一个好习惯。它有助于调试和分析代码，而自动换行在大多数情况下并不能生成好看的代码。

一些学校学会避免编写超过 80 行代码（以适应控制台窗口），但它在使用中并不实用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T15:11:36.517

实际上很长的类可能会导致内部内存堆溢出，那么你必须增加你的堆大小，除了那个没有。

# playframework-2.0 - 将字段添加到关联表

> ID：15730815
> 
> 赞同：1
> 
> 时间：2013-03-31T15:08:10.163
> 
> 标签：playframework-2.0, ebean

您好，我有两个表（消息，人员）多对多（m：n）的关系

现在在这个表（mm 表）中我有两个字段。Message_id 和 person_id。我想在那里添加带有日期的字段，所以我有

message_id,person_id,mydate

我不能在这两个模型中的任何一个中添加它，因为日期对关联很重要。如何添加它以及如何在代码中获取它？我唯一的想法是创建一个名为 Message_person 的类（就像我的表一样）并在那里添加 3 个字段，message_id、person_id、mydate 但我不确定我能做这样的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:57:02.070

你说的对。您必须创建第三个模型来保存您的信息：`date`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:15:13.423

您的新表应如下所示：

```
public class MessageByPerson {

   @ManyToOne
   private Message message;

   @ManyToOne
   private Person person;

   @Column
   private Date date;

} 
```

# ruby-on-rails - 如何显示数组数组

> ID：15730816
> 
> 赞同：0
> 
> 时间：2013-03-31T15:08:18.393
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3

我的控制器中有一些代码：

```
def index
 @tasks = Task.paginate(page: params[:page], per_page: 12 )    
 @tasks_row = task_to_rows(@tasks)

 respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @tasks }
 end
end 
```

task_to_rows：

```
def task_to_rows(tasks)
  item_at_row = 0
  task_row = Array.new
  for i in (0..tasks.length)
    item_at_row += 1
    if item_at_row == 1
      temp_arr = Array.new
      temp_arr << tasks[i]
      task_row << temp_arr
    elsif item_at_row <= 3
      temp_arr << tasks[i]
      task_row << temp_arr
    end
    item_at_row = 0 if item_at_row == 3
  end

  return task_row
end 
```

需要方法使数组的每个元素都是三个元素的数组。并且能够显示这样的信息：[https ://www.evernote.com/shard/s8/sh/5dee1bbd-af05-4432-9e24-586de98f4452/a8229d8d3fd0bb222a76a927a70ee507](https://www.evernote.com/shard/s8/sh/5dee1bbd-af05-4432-9e24-586de98f4452/a8229d8d3fd0bb222a76a927a70ee507)

鉴于我有：

```
<% @tasks_row.each do |task3| %>
  <h3>Row</h3>
  <% task3.each do |task| %>
    <%= task.name %>
  <% end -%>
<% end -%> 
```

但是 Rails 显示错误：

```
undefined method `name' for nil:NilClass 
```

如果调试，则一切正常并显示。

**更新：** 在最终版本中，我只需要以这种格式显示数据：

```
<div class="row>
  <div class="span3">Some data</div>
  <div class="span3">Some data</div>
  <div class="span3">Some data</div>
</div>
<div class="row">
  <div class="span3">Some data</div>
  <div class="span3">Some data</div>
  <div class="span3">Some data</div>
</div>
......... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:25:16.987

如果我理解`task_to_rows`正确，您希望数组按 3 分组，对吗？在这种情况下，我建议您`each_slice(3)`改用。您添加的方法容易出错，可能会导致一些导致错误的 nil 元素。请记住，如果大于或等于数组的长度，则`tasks[i]`可以变为。这很可能是错误出现的地方，因为您使用的是. 所以你有2个选择。`nil``i``tasks.length`

**选择 1**

改变

```
for i in (0..tasks.length) 
```

到

```
for i in (0..(tasks.length - 1)) 
```

**选择 2**

采用`each_slice(3)`

```
@tasks_row = @tasks.each_slice(3) 
```

# android - 没有对话框的facebook中的深层链接

> ID：15730818
> 
> 赞同：2
> 
> 时间：2013-03-31T15:08:22.637
> 
> 标签：android, facebook, dialog, single-sign-on, deep-linking

我使用以下深度链接的 facebook 文档创建了 AppLinkingHowTo 项目

[http://developers.facebook.com/docs/howtos/androidsdk/3.0/link-to-your-native-app/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/link-to-your-native-app/)

它工作正常但是当单击共享按钮时会出现一个对话框。我不想要这个对话框。我已经实现了单点登录，如果用户登录我想要单击按钮，那么它将直接在 Facebook 上共享消息而不显示对话框。如何做这个..

更新：我正在创建一个应用程序来实现深度链接。深度链接的概念是我们在 facebook 墙上分享来自我们的应用程序的任何消息，然后我们打开安装在我们设备中的 facebook 本机应用程序并单击我们从我们的应用程序共享的那个帖子，所以如果我们的应用程序已安装，它将打开应用程序，如果未安装应用程序，它将打开浏览器。

我已经使用上面的链接实现了深度链接。它是 facebook 文档。

这里会生成一个对话框来分享我们的帖子，当我从 fb 本机应用程序中单击此帖子时，如果它安装了其他明智的浏览器，它将打开应用程序。

但问题是我不想要这个对话框。我可以通过这个请求在没有对话框的情况下在 facebook 上发布我的消息

```
res = facebook.request("me/feed", params, "POST"); 
```

但是当我从 fb 本机应用程序单击帖子时，它不会打开我的应用程序并打开浏览器。

是否可以在不打开此对话框的情况下进行深度链接，或者我们可以编辑此对话框，如果是，那么如何编辑它。

# entity-framework - 如何使用 Linq to Entities 投影导航属性？

> ID：15730821
> 
> 赞同：0
> 
> 时间：2013-03-31T15:08:59.200
> 
> 标签：entity-framework, querying

我首先使用代码构建了一个数据库。我发现使用投影查询到具体类型是迄今为止最快的方法，比使用 `Include`语句更快。但是，我遇到了以下问题：

```
dim records=(From record in db.SomeDbSet
             Where record.UserID=userID
             Select New UserSpecificRecord With
             { .Name=record.User.Name
               .Tasks=record.Tasks
             }).ToList 
```

当执行 .Tasks= 部分时，我会收到不同的错误，从无效的强制转换异常到 Enity Framework 不支持这种查询的消息，具体取决于我创建 UserSpecificRecord 类的 Tasks 属性的集合类型。

当我将代码更改为：

```
 Dim records= (From record in db.SomeDbSet
                 Where record.UserID=userID
                 Select New With
                 { .Name=record.User.Name
                   .Tasks=record.Tasks
                 }).ToList

   dim userRecords=(From record in records
                    Select New UserSpecificRecord With
                    { .Name=record.Name
                     .Tasks=record.Tasks
                     }).ToList 
```

即：我投影到一个匿名类型，然后构建它所有工作的具体类型。不过，我非常希望能够直接投影到具体类型。可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:56:04.540

您不能投影到“实体”（您的`UserSpecificRecord`映射也是如此吗？从名称上看似乎如此）。
这与“具体课程”无关。

请参阅此答案[无法在 LINQ to Entities 查询中构造实体](https://stackoverflow.com/questions/5325797/the-entity-cannot-be-constructed-in-a-linq-to-entities-query)

# delphi - 如何在 FastReport 4 中使用自定义 Delphi 函数？

> ID：15730822
> 
> 赞同：0
> 
> 时间：2013-03-31T15:09:00.557
> 
> 标签：delphi, function, fastreport

我想在 FastReport 中使用自定义 Delphi 函数，我可以在设计时将该函数用于某些 frxMemoView。我在 web 中找到了一些建议，例如快速报告中的 Addfunction，但我在 FastReport 的函数选项卡中看不到我的函数。请帮我。

谢谢侯赛因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:00:12.663

TLama 提到的[在报告中使用自定义函数](http://fast-report.com/documentation/DevMan/index.html?custom_functions_connection_to_report.htm)的示例几乎可以正常工作。

您可能会遇到两个问题。

第一：文档在构造函数TFunctions.Create中有两个bug；一个缺失的开始，一个多余的 '
正确的实现将是

```
constructor TFunctions.Create;
begin
inherited Create(AScript);
with AScript do
   begin
   AddMethod('function MyFunc(s: String; i: Integer): Boolean', CallMethod,
            'My functions', ' MyFunc function always returns True');
   AddMethod('procedure MyProc(s: String)', CallMethod,
            'My functions', ' MyProc procedure does not do anything');
   end;
end; 
```

第二个“问题”是您不能期望通过双击报表来查看 IDE 中的功能，只有在运行时调用 DesignReport 时才能进行选择。此选项在 XE3 附带的限量版中不可用。

```
begin
   //......
   frxReport1.DesignReport;
  //......
end; 
```

![例子](https://i.stack.imgur.com/7LcZQ.png)

# c++ - 如何检测指针是否被删除并安全删除？

> ID：15730827
> 
> 赞同：35
> 
> 时间：2013-03-31T15:09:10.967
> 
> 标签：c++, pointers, memory-management

在**C++**中如何确定或知道一个指针之前是否被删除？

当我试图删除以前在代码的另一部分中删除的指针时，它引发了一个无法处理的异常。

我想知道是否有办法检查或尝试删除指针？有关高级内存操作的任何参考。

我也想掌握指针的未处理异常以及对受保护或访问的访问是违规的，......这种错误。

感谢那些提供一些知识和时间来帮助他人并分享他们的利益的人

* * *

# 更新

许多现代 c++ 开发人员社区的重要建议是 - 使用智能指针或尽量避免使用原始指针。但是为了抛出安全性和确保没有内存（[ISO_CPP_FAQ](https://isocpp.org/wiki/faq/exceptions#ctors-can-throw)），当然如果你想避免使用智能指针的小开销[可能并不总是很明显，但它们有开销]，你可以编写处理原始指针的自定义方法 [ type*] - 这不是通用的。 **总是喜欢智能指针而不是原始指针**。

在“Going Native 2013”​​中，一个常见的建议是——永远不要使用原始指针。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-31T15:12:12.333

可以有三种解决方案。您可能需要根据要达到的工作量/质量比来选择一个：

**优雅和最正确的解决方案：**

使用**[智能指针](https://stackoverflow.com/questions/5026197/what-c-smart-pointer-implementations-are-available)**，您不必`delete`再次手动调用。这是克服此问题的最佳方法。它利用了 RAII 原理，该原理非常适用于像 C++ 这样没有内置垃圾收集器的语言。

**不太优雅但可行的解决方案：**

`NULL`删除后分配指针。调用指针`delete`是`NULL`无操作的，因此它消除了进行额外`NULL`检查的需要，但这可能会*隐藏*一些问题而不是使它们可见。

**不太优雅但更正确的解决方案：**

`delete`通过让你的程序崩溃来寻找所有的多个问题。您不妨使用内存分析器程序（如 valgrind），然后修复您的代码以避免所有这些问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T15:11:41.313

这是一个很好的问题，但是在手动内存管理环境（如 C/C++ 及其表亲）中工作的基本事实之一是，没有好的方法可以*事后*查看指针并询问它是否有效——一旦失效了就没了，看着就容易炸。你的工作是确保它永远不会被删除或释放超过一次，并且在那之后永远不会被访问。

一定要看看智能指针，它的发明是为了在这些情况下让程序员的生活更轻松。（更传统的方法是要小心，不要把它搞砸，然后当你知道指针被删除时，可能会为指针分配 NULL，正如 Alok 所说。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T15:33:09.683

> 在 C++ 中如何确定或知道一个指针之前是否被删除？

语言标准没有提供任何合法的方法来确定任意指针是否有效。

有一种方法，但它是高度特定于编译器/操作系统的。您可以挂接到现有的内存管理器，也可以用您自己的内存管理器替换它，并为指针验证提供专用功能。不过，这可能并不容易做到。如果性能很关键，你真的不想依赖这个功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-31T15:21:53.477

使用`shared_ptr<>`and `shared_array<>`, remember`shared_ptr<>`可用于管理分配给数组的内存，前提是提供了适当的 Deleter，否则用于`shared_array<>`管理您的数组

```
A* a_tab=new A[100];
boost::shared_ptr<A> a_tab_ok(a_tab,ArrayDeleter<A>()); 
```

//只有在

```
template <typename T>
    class ArrayDeleter
    {
    public:
        void operator () (T* d) const
        {
            delete [] d; //will delete array!
        }
    }; 
```

提供

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-31T15:36:11.427

指针不会告诉你任何事情。您的设计应该：如果您使用动态分配，通常*是因为*您的应用程序要求对象具有特定的生命周期，因此您知道何时正确删除该对象。如果对象是可复制的，或者具有与范围相对应的生命周期，则（通常）不会动态分配它。

当然，在非常低级的代码中也有例外——如果你正在实现类似的东西`std::vector`，你将不得不使用某种动态分配，因为在编译时大小是未知的。但是这样的分配不应该逃脱；处理内存是低级类的责任。

最后，缓冲区溢出、访问已删除的内存等都是未定义的行为。通常，它们不会导致异常，并且没有通用的方法来处理它们。（您通常*可以*安排在发生此类事情时获取信号，但是您可以从信号处理程序中做的事情很少，这并没有太大帮助。）通常，您想要的是让程序崩溃，因为您不知道它处于什么状态。在极少数情况下并非如此，您必须依靠实现定义的扩展（如果存在）。如果你用`/EHa` 例如，使用 VC++ 的选项，通常会发生崩溃的情况将被转换为 C++ 异常。但那是一个 VC++ 扩展，发生这种情况时你仍然不知道程序的整体状态。如果是因为您破坏了可用空间领域，那么即使您捕获了异常，您也可能无能为力（当您展开堆栈时，您很有可能会从试图释放内存的析构函数中获得另一个异常） .

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-17T20:27:13.977

我知道这个线程很旧。但如果其他人正在阅读本文，他应该知道 unique_ptr。shared_ptr 确实有开销。计数器存储在堆上。每次访问计数器时，都存在处理器缓存不匹配的风险。unique_ptr 受到更多限制，但与普通指针相比没有开销。我的建议是当您不需要引用计数时，更喜欢 unique_ptr 而不是 shared_ptr。另一个重要的注意事项是，unique_ptr 可以很好地处理数组。如果我没记错的话，这对于自 C++17 以来的 shared_ptr 也是如此。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-31T15:30:38.173

智能指针是避免此类问题的更好选择（但您在使用它们之前也必须完全了解），但我想提一下与智能指针相关的性能限制，原因是它们通常使用原子操作，例如 Win32 API 中的 InterlockedIncrement 供参考数数。这些函数比普通整数算术要慢得多。我不确定在您的情况下是否可以接受这么小的性能损失。

我通常做的是（所以我不必再花几天时间来调试讨厌的错误），我在设计和对象生命周期上花费大量时间，然后再进行实际编码，因为我删除了我专门设置指针的内存NULL，就我而言，这是一个很好的做法。再次，也许真正的解决方案是在继续之前花更多时间来确定依赖关系和对象生命周期！

# c# - 将 long 值与 int/long 零常量进行比较

> ID：15730828
> 
> 赞同：2
> 
> 时间：2013-03-31T15:09:14.233
> 
> 标签：c#, optimization

这是：

```
if (myLongValue > 0) // 0 is displayed as int in Visual Studio tooltip 
```

等于：

```
if (myLongValue > 0L) 
```

这是使用特殊的操作码吗？（类似于 JZ - 如果在 x86 asm 中为零则跳转）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T15:11:45.873

2 在 IL 方面完全等效。让我们以下面的代码片段为例：

```
public static void Main(string[] args)
{
    long myLongValue = long.Parse("123");
    if (myLongValue > 0)
    {
        Console.WriteLine("ok");
    }
} 
```

它被编译为以下 IL（在发布模式下）：

```
.method public hidebysig static void Main(string[] args) cil managed
{
    .entrypoint
    .maxstack 2
    .locals init (
        [0] int64 myLongValue)
    L_0000: ldstr "123"
    L_0005: call int64 [mscorlib]System.Int64::Parse(string)
    L_000a: stloc.0 
    L_000b: ldloc.0 
    L_000c: ldc.i4.0 
    L_000d: conv.i8 
    L_000e: ble.s L_001a
    L_0010: ldstr "ok"
    L_0015: call void [mscorlib]System.Console::WriteLine(string)
    L_001a: ret 
} 
```

现在替换`if (myLongValue > 0)`为`if (myLongValue > 0L)`，您将获得严格等效的 IL。

一个更优化的 IL 应该是这样，但不幸的是我无法让编译器发出它：

```
.method public hidebysig static void Main(string[] args) cil managed
{
    .entrypoint
    .maxstack 2
    .locals init (
        [0] int64 myLongValue)
    L_0000: ldstr "123"
    L_0005: call int64 [mscorlib]System.Int64::Parse(string)
    L_000a: stloc.0 
    L_000b: ldloc.0 
    L_000c: ldc.i8.0 
    L_000d: ble.s L_001a
    L_0010: ldstr "ok"
    L_0015: call void [mscorlib]System.Console::WriteLine(string)
    L_001a: ret 
} 
```

这里我们不需要`conv.i8`指令，因为我们直接将提供的 Int64 类型的值作为 int64 推入评估堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:45:55.873

在您的第一个示例中，运算符`>`的左侧为`long`( `System.Int64`)，右侧为`int`( `System.Int32`)。由于 C# 规范没有定义具有该签名的运算符的*重载*`>`，因此我们必须检查某些转换是否适用于一个（或两个）参数（操作数）。

存在从到的*隐式*转换。另一个方向的转换不是隐式的。因此，右侧通过加宽转换进行转换，并使用重载。`int``long``operator >(long x, long y)`

由于在这种情况下，右侧`int`是编译时*文字*，编译器可以扩展常量，因此编译后的两个示例之间没有区别。另一个答案展示了输出 IL 的样子。

那么如果你有：

```
ulong myULongValue = XXX;
if (myULongValue > 0)
    ... 
```

一般来说，没有从(signed) 到(unsigned)的*隐式*转换。但是，当是一个恰好为非负的编译时常量（字面量）时，确实存在转换。所以我上面的例子仍然有效（并产生与 相同的结果）。`int``ulong``int``if (myULongValue > 0ul)`

但是对于非常量`int`，它必须失败：

```
ulong myULongValue = XXX;
int zero = 0;               // not const
if (myULongValue > zero)    // will NOT compile!
    ... 
```

# java - 这个数组偶数和赔率代码有什么问题？

> ID：15730829
> 
> 赞同：0
> 
> 时间：2013-03-31T15:09:15.427
> 
> 标签：java, arrays, sorting

我正在尝试创建一个包含 0 到 25 之间的 100 个随机数的数组，按奇数和偶数对它们进行排序，并显示两个结果数组。（我不允许使用列表。）当我运行这段代码时，所发生的一切就是一遍又一遍，大部分都是 0。

```
public static void main (String [] args)
{
   int array[]= new int[100];

   for(int i=0;i<100;i++)
   { 
     double k=Math.random();
     k=k*25;
     k=Math.rint(k);
     array[i]=(int)k;

     splitrandoms(array);

   }
}
public static void splitrandoms(int array[])
{   
   int oddSize = 0; 
   int evenSize = 0; 
   for (int i = 0; i< array.length; i++) 
   {
      if (array[i] % 2 == 0) 
      {evenSize++;}
      else 
      {oddSize++;}
   }

   int oddArray[] = new int[oddSize];
   int evenArray[] = new int[evenSize];

   int even = 0;
   int odd = 0;

   for (int b = 0; b< 100; b++) 
   {
      if (array[b] % 2 == 0) 
      {evenArray[even++] = array[b];}
      else 
      {oddArray[odd++] = array[b];}
   }

   System.out.println("Evens:");
   for(int q = 0; q < evenSize; q++)
   {System.out.println(evenArray[q]);}

   System.out.println("Odds:");
   for(int f = 0; f < oddSize; f++)
   {System.out.println(oddArray[f]);}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:15:15.850

您在循环中使用`splitrandoms(array);`函数，您应该从 For Loop 中调用它。. .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:12:00.347

问题是您正在从填充原始数组的循环中调用排序函数。将以下行移到循环外：

```
splitrandoms(array); 
```

# javascript - Javascript中否定后的空格

> ID：15730830
> 
> 赞同：0
> 
> 时间：2013-03-31T15:09:45.077
> 
> 标签：javascript, styles, negation

这是一个 javascript 编码风格问题。是否有任何理由在否定运算符之后放置一个空格？我已经在 angularjs 的源代码中看到了这一点，但我不知道这是否有任何好处。示例：写作`!myVar`vs`! myVar1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:13:09.910

没有区别。[从规格](http://es5.github.com/#x5.1.2)：

> 简单的空格和单行注释将被丢弃，并且不会出现在句法语法的输入元素流中。

您可以使用任何一种形式，但我很少看到以这种方式在一元运算符和操作数之间使用空格。

考虑其他运算符之间经常看到的间距。这种情况也不例外：

```
var x = 1 + 2;
var y = 1+2; // These are identical 
```

# c# - 当 this.Close() 执行所有表单时关闭？

> ID：15730831
> 
> 赞同：1
> 
> 时间：2013-03-31T15:09:47.210
> 
> 标签：c#, forms

在学习了一些 Java 之后，我最近几天才开始学习 C#，所以作为一种简单的程序，我正在尝试制作一个程序来保存一些密码。

我将注释掉有问题的代码。

我的主要表单代码是：

```
{
public partial class fLogin : Form
{
    public fLogin()
    {
        InitializeComponent();
    }

    private void btnLogin_Click(object sender, EventArgs e)
    {
        bool checkUser = md5(tbUsername.Text) == Properties.Settings.Default.Username;
        bool checkPass = md5(tbPassword.Text) == Properties.Settings.Default.Password;
        if (checkUser && checkPass)
        {
            Passwords pFrame = new Passwords();
            pFrame.Activate();
            this.Hide();
        }
    }

    private String md5(String tBox)
    {
        MD5 md5 = new MD5CryptoServiceProvider();
        md5.ComputeHash(ASCIIEncoding.ASCII.GetBytes(tBox));
        byte[] result = md5.Hash;
        StringBuilder strBuilder = new StringBuilder();
        for (int i = 0; i < result.Length; i++)
        {
            strBuilder.Append(result[i].ToString("x2"));
        }
        String finalValue = strBuilder.ToString();
        return finalValue;
    }

    private void fLogin_Load(object sender, EventArgs e)
    {
        if (Properties.Settings.Default.Username == "null" || Properties.Settings.Default.Password == "null")
        {
            //This is where I create my second Form!.
            //CreatePassword newPass = new CreatePassword();
            //this.Hide();
            //newPass.Show();
        }
        else if (md5(tbUsername.Text) == Properties.Settings.Default.Username && md5(tbPassword.Text) == Properties.Settings.Default.Password)
        {
            Passwords pFrame = new Passwords();
            this.Hide();
            pFrame.Show();
        }
    }

    private void btnClose_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void btnCPass_Click(object sender, EventArgs e)
    {
        ChangePass CPFrame = new ChangePass();
        CPFrame.ShowDialog(this);
    }
  }
} 
```

我的第二种形式代码是

```
using System;
using System.IO;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Security.Cryptography;

namespace PassMan
{
public partial class CreatePassword : Form
{
    public CreatePassword()
    {
        InitializeComponent();
    }

    private void btnSave_Click(object sender, EventArgs e)
    {
        String username = md5(tbUsername.Text);
        String password = md5(tbPassword.Text);
        String[] pwds = { username, password };
        Properties.Settings.Default.Username = username;
        Properties.Settings.Default.Password = password;
        Properties.Settings.Default.Save();
        //This is where I Exit. It Closes this form & the other form!
        //this.Close();

    }

    private String md5(String tBox)
    {
        MD5 md5 = new MD5CryptoServiceProvider();
        md5.ComputeHash(ASCIIEncoding.ASCII.GetBytes(tBox));
        byte[] result = md5.Hash;
        StringBuilder strBuilder = new StringBuilder();
        for (int i = 0; i < result.Length; i++)
        {
            strBuilder.Append(result[i].ToString("x2"));
        }
        String finalValue = strBuilder.ToString();
        return finalValue;
    }

    private void btnCancel_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    protected override void OnFormClosing(FormClosingEventArgs e)
    {
        Application.Exit();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T15:13:35.550

该行为是因为您已将其设置`this`为`newForm`调用时的父级`newForm.ShowDialog(this);`

因此，当您调用`this.Close()`它时，它将关闭`this`表单及其所有子表单。

**更新**

从您更新的问题（代码添加）中，我注意到您在 CreatePassword 表单的表单关闭事件中关闭了整个应用程序。

```
 protected override void OnFormClosing(FormClosingEventArgs e)
    {
        Application.Exit(); //comment this out.
    } 
```

注释掉`Application.Exit();`

# php - 使用 openssl 库在 php 中使用现有模数和指数构建公钥 PEM 文件

> ID：15730832
> 
> 赞同：0
> 
> 时间：2013-03-31T15:09:47.633
> 
> 标签：php, encryption, openssl, rsa

我有公钥的模数和指数。我可以在 php 中使用 openssl api 生成公钥吗？我已经阅读了[http://php.net/manual/en/ref.openssl.php](http://php.net/manual/en/ref.openssl.php)但似乎没有存档的功能。

如果 openssl 不能做到这一点（用模数和指数构建公钥），我可以使用 php 中的任何选项来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:03:35.570

使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();

$rsa->loadKey( array ('e'=>new Math_BigInteger('65537'), 'n'=>new Math_BigInteger('11944573237954459805614520005393273287786384679965238498958830373752732874397055'.
'98832111464872863171681422024469555089029360351247093972211786644957214280299847'.
'26868375359168203283442617134197706515425366188396513684446494070223079865755643'.
'116690165578452542158755074958452695530623055205290232290667934914919')) );

echo $rsa; 
```

输出如下：

```
-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCqGKukO1De7zhZj6+H0qtjTkVx
wTCpvKe4eCZ0FPqri0cb2JZfXJ/DgYSF6vUpwmJG8wVQZKjeGcjDOL5UlsuusFnc
CzWBQ7RKNUSesmQRMSGkVb1/3j+skZ6UtW+5u09lHNsj6tQ51s1SPrCBkedbNf0T
p0GbMJDyR4e9T04ZZwIDAQAB
-----END PUBLIC KEY----- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-06T10:42:02.677

如果您的模数和指数来自 XML 格式的 RSA 密钥，或者您正在从[JWKS](https://www.rfc-editor.org/rfc/rfc7517)端点检索密钥，则可以使用以下代码：

```
use phpseclib\Crypt\RSA;

$n = "6R-qAvAPQNrx8I_Q7GmQE4zpKFBpKMM38yeFE797v9eLBdXr9JIW5PBuBqjkmzMug3MUvl4FM6_nU0SCMLDMSY_zGIt5xlmFF5iqRb8elTZ_bLe6bp_1cZncadl4vzRdi6jQE_aIZX_9CWypO4su-kNj6DVCh5wldbGZej0c-1sKCgkJF12hiAqQPxaIA4hDgDCFiCRWSPzxHRuS-aXV0h3DIhn84lCkzrBqWea-nS03z0k2ohmuNsTd0yIPz_s-R2TkE-lUaKVtKGqsRPL3GKzQJO4TUzYmqHkN8XyNkmvBaitWreiZjyX79qTJ46SNX55gzVAfWqevpJc0RezVsQ==";
$e = "AQAB";

// Convert Base64 uri-safe variant to default (needed for JWKS)
$n = strtr($n, '-_', '+/');

$rsa = new RSA();

$key = "<RSAKeyPair>"
        . "<Modulus>" . $n . "</Modulus>"
        . "<Exponent>" . $e . "</Exponent>"
        . "</RSAKeyPair>";

$rsa->loadKey($key, RSA::PUBLIC_FORMAT_XML);

echo $rsa; 
```

# php - 调用错误消息后PHP丢失变量

> ID：15730843
> 
> 赞同：0
> 
> 时间：2013-03-31T15:10:54.293
> 
> 标签：php, die

一旦我调用我的错误函数并包含页脚文件，我就会丢失我的变量 $user 。我在页脚中使用 $user 函数来显示一些信息，但是当我转到 var_dump 时，它只是显示为 null。请注意，我使用的是某人创建的数据库框架，因此查询可能看起来很奇怪，但它是 100% 的功能和安全的。

这是在我的 /includes/functions 文件中：

```
$user_query = $db->query("SELECT * FROM `users` WHERE `id`='$_COOKIE[id]' LIMIT 1");
$user = $db->getArray($user_query);

function error($input){

            echo '<div id="error_box"><h1>Ooops!</h1><br>
             '.$input.'<br /><a href="javascript:history.go(-1)"><b>Back to previous page.</b></a></div>';

   require_once('./layout/footer.php');
   die;

} 
```

我的 /layout/footer.php 文件是：

```
 if (!empty($user['active'])){

           //info here

         }
         else {

            //info here

            var_dump($user);

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:14:16.347

`$user`超出范围`error()`。快速解决方法是将其[全局](http://php.net/manual/en/language.variables.scope.php)化。所以：

```
function error($input){
   global $user;
   // ...
} 
```

一般来说，可能值得一读[变量范围](http://php.net/manual/en/language.variables.scope.php)。

# ruby-on-rails - Rails Time.now.end_of_month 不考虑闰年

> ID：15730850
> 
> 赞同：2
> 
> 时间：2013-03-31T15:11:30.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试创建一个每月运行的循环，我注意到我的逻辑没有考虑闰年。

我试过了：

```
newDate = (Time.now.beginning_of_month.to_date - 2.months) + 3.years 
```

和

```
newDate = (Time.now.to_date - 2.months).end_of_month + 3.year 
```

他们都回来了`Sun, 28 Feb 2016`。

为什么他们不考虑闰年并返回 2 月 29 日？

注意：这个问题是在 2013 年 3 月 31 日提出的，代码在另一天可能会有所不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:29:49.610

这是因为计算会计算当前年份的月末，然后加上 3 年。

`(Time.now.beginning_of_month.to_date - 1.month)`= 28，2013 年 2 月。加上 3 年，你得到 28，2016 年 2 月。

试试这个 -

```
((Time.now.beginning_of_month.to_date - 1.month) + 3.years).end_of_month 
```

顺便说一句，减去 2 个月将我带到一月（这里仍然是 3 月 31 日）

# c - C 编程数组循环

> ID：15730855
> 
> 赞同：3
> 
> 时间：2013-03-31T15:12:02.047
> 
> 标签：c

对于我遇到的这个问题，任何帮助将不胜感激。我正在尝试创建一个循环来查找一个 30x30 数组，其主对角线值都大于或等于 7。这些数组填充了随机整数。

我的问题是循环本身，我似乎无法弄清楚如何创建如此大的一系列循环..让我发疯！

当我设法创建一个符合条件的数组时，我需要显示它进行了多少次尝试。如果尝试超过 100 万次，程序应该简单地“放弃”，表明这是不可能的。

到目前为止，这是我设法提出的（不是整个代码，只是我需要帮助的一点），但是输出实际上什么都没有。我保证我什至没有接近正确的解决方案......但我希望能指出正确的方向！

提前致谢 ：）

```
count=0;

for(a=0;a<30;++a)
for(b=0;b<30;++b)
    random2[a][b]=rand()%10;

while(count<=1000000)
{
for(a=0;a<30;++a)
{
    if(random2[a][a]>=7)
    {    
        ++a;
        if(a==30&&random2[a][a]>=7)
            printf("%d", count);
    }
        else
        {
            ++count;
            for(a=0;a<30;++a)
                for(b=0;b<30;++b)
                    random2[a][b]=rand()%10;
        }
}
}

printf("%d", count); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:20:04.047

您在循环中做了一些奇怪的事情。简单的修复是删除其中一个`++a`s（我建议第二个），并`break`在 else 中删除。

更好的解决方法是按照您的意思进行编码。为了最小地改变你的例子：

```
int count,a,b;
for(count = 0; count<=1000000; ++ count) {
    for(a=0;a<30;++a)
        for(b=0;b<30;++b)
            random2[a][b]=rand()%10;
    for(a=0;a<30;++a)
    {
        if(random2[a][a]>=7)
        {
            if(a==30&&random2[a][a]>=7)
            printf("%d", count);
        }
        else
        {
            break;
        }
    }
    if( a == 30 ) {
        break;
    }
} 
```

一个更好的解决方法是通过算法计算你的数组，而不是依赖随机机会给你一个好的结果。例如，将您的对角线随机设置为 7、8 或 9（这将给出相同的最终结果和概率）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:21:31.617

我认为线路有问题

```
if(a==30&&random2[a][a]>=7) 
```

既然你说数组是 30x30，那么索引的最大值是 29x29。所以`random2[30][30]`不存在。至于代码，试试

```
while(count<=1000000)
{
  for(a=0;a<30;a++)
  {
    for(b=0;b<30;b++)
    {
        random2[a][b]=rand()%10;
        if(a==b)
        {
            while(random2[a][a]<7)
            {
                  ++count;
                  random2[a][b]=rand()%10;
            }
        }
    }
  }
} 
```

这将为您提供所需的阵列

如果您希望 count 的值更小，请使用，

```
if(random2[a][a]<7)
{
    random2[a][a]=(rand()+7)%10
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:21:36.430

您正在将内部 for 循环计数器“a”与值计数器（在您的程序中也是“a”）混合。尝试这样的事情：

```
int found = 0;
for (count = 1; count <= 1000000 && !found; count++) {
  // (re)fill the array with random numbers
  for (a = 0; a < 30; a++) for (b = 0; b < 30; b++) random2[a][b] = rand() % 10;
  // now check the array
  found = 1; // assume all values are >= 7
  for (a = 0; a < 30; a++)
    if (random2[a][a] < 7) { // found a bad value
      found = 0;
      break;
    }
} 
```

# sql - 什么连接是由“和”引起的？

> ID：15730860
> 
> 赞同：0
> 
> 时间：2013-03-31T15:12:19.517
> 
> 标签：sql, localdb

我有一个包含以下表格的 localDB 数据库：

UserProfile，其中包含：

```
UserId  UserName
1           Adam 
```

pages_Roles，其中包含：

```
RoleID RoleName
1      user
2      admin 
```

pages_UsersInRoles，有两列（UserId、RoleId），为空。

我想要一个查询按名称将用户添加到按名称的角色中。找出要插入的内容，如果我运行：

```
SELECT UserId, RoleID 
FROM UserProfile, webpages_Roles 
WHERE UserProfile.UserName = 'Adam' 
   OR webpages_roles.RoleName = 'admin'; 
```

我明白了：

```
UserId  RoleId
1       2
1       1 
```

这是有道理的；这是一个交叉连接。但我基本上只想一次运行两个单独的选择并将它们粘在一起。我试过这个：

```
SELECT UserId, RoleID 
FROM UserProfile, webpages_Roles 
WHERE UserProfile.UserName = 'Adam' 
  AND webpages_roles.RoleName = 'admin'; 
```

它奏效了；我得到了 UserId 1 和 RoleId 2。但我不明白“和”；这不是把苹果比作橘子吗？不应该是语法错误吗？localDB 是否实际上运行两个选择并加入结果，也许是行号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T15:18:19.563

当您执行此查询时：

```
SELECT UserId, RoleID 
FROM UserProfile, webpages_Roles
WHERE UserProfile.UserName = 'Adam' AND webpages_roles.RoleName = 'admin'; 
```

你正在做一个`cross join`. 您应该养成具体说明交叉连接的习惯，并使用`cross join`而不是`,`. 无论如何，这相当于：

```
SELECT UserId, RoleID
FROM (select u.*
      from UserProfile u
      where u.UserName = 'Adam'
     ) cross join
     (select w.*
      from webpages_Roles w
      WHERE w.RoleName = 'admin'
     ) w 
```

执行 a 时，`cross join`您正在创建一个笛卡尔积——第一个表中的每一行都与另一个表中的所有行匹配。然后，该`where`子句是此结果集的过滤器。

如果要对齐数据，那就更难了。这是使用 SQL Server 语法的一种方法：

```
SELECT UserId, RoleID
FROM (select u.*, row_number() over (order by (select NULL)) as seqnum
      from UserProfile u
      where u.UserName = 'Adam'
     ) u join
     (select w.*, row_number() over (order by (select NULL)) as seqnum
      from webpages_Roles w
      WHERE w.RoleName = 'admin'
     ) w
     on u.seqnum = w.seqnum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T15:17:50.997

每当您从多个表中进行选择时，您实际上是在隐式连接这些表。

```
SELECT UserId, RoleID 
FROM UserProfile, webpages_Roles; 
```

上面的查询将返回如下内容：

```
UserId  UserName  RoleID RoleName
1           Adam  1      user
1           Adam  2      admin 
```

因此，当您添加 where 子句时：

```
SELECT UserId, RoleID 
FROM UserProfile, webpages_Roles 
WHERE UserProfile.UserName = 'Adam' AND webpages_roles.RoleName = 'admin'; 
```

它只返回 UserProfile.Username 为“Adam”且webpages_roles.RoleName 为“admin”的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:36:00.440

这是正确的而不是任何类型的错误的原因如下。当你做

```
SELECT UserId, RoleID
FROM UserProfile, webpages_Roles 
```

如果没有`WHERE`子句，您在标准 SQL 中得到的是关系的笛卡尔积，即`UserProfile x webpages_Roles`

在您的情况下，这又是一个现实（如 DiscoInfiltrator 的回答所示），

```
UserId  UserName  RoleID RoleName
1           Adam  1      user
1           Adam  2      admin 
```

这意味着查询的这一部分`WHERE UserProfile.UserName = 'Adam' AND webpages_roles.RoleName = 'admin';`作用于包含 UserName 和 RoleName 属性的关系，

希望这能澄清，干杯

# arrays - 我的加入使用 Cakephp 以奇怪的格式返回数据

> ID：15730867
> 
> 赞同：0
> 
> 时间：2013-03-31T15:13:16.817
> 
> 标签：arrays, cakephp, join

我正在尝试在分类列表中查找用户的杂货。关联是 Category hasMany Item hasMany User through Grocery。我正在使用 find() 的 Joins 选项并在我的数组中获取正确的信息，但是我需要它以不同的方式显示。

我的控制器动作：

```
 function showlist() {
    $this->Category->recursive = -1;
    $options['joins'] = array(
        array('table' => 'items',
            'alias' => 'Item',
            'type' => 'left',
            'foreignKey' => false,
            'conditions' => array(
                'Item.category_id = Category.id'
            )
        ),
        array('table' => 'items_users',
            'alias' => 'Grocery',
            'type' => 'left',
            'foreignKey' => false,
            'conditions' => array(
                'Grocery.item_id = Item.id'
            )
        )
    );
    $options['conditions'] = array(
        'Grocery.user_id' => $this->Auth->user('id')
    );
    $options['fields'] = array(
        'Category.*', 'Item.*', 'Grocery.*'
    );

    $categories = $this->Category->find('all', $options);

    $this->set('categories', $categories);
} 
```

这有效，但现在它只显示平坦。我需要它在嵌套数组中显示一个类别的所有项目。

它显示：

```
Array
(
[0] => Array
    (
        [Category] => Array **<--This could be the same category as**
            (...)

        [Item] => Array
            (...)

        [Grocery] => Array
            (...)
    )
[1] => Array
    (
        [Category] => Array **<--This**
            (...)

        [Item] => Array
            (...)

        [Grocery] => Array
            (...)
    )
[2]... 
```

我需要它是：

```
Array
(
[0] => Array
    (
        [Category] => Array 
            (...
            [Item] => Array
            (...)

            [Item] => Array
            (...)
            )
    )
[1] => Array
    (
        [Category] => Array
            (...)

        [Item] => Array
            (...)
    )
[2]... 
```

甚至不需要 Grocery 数组，只需通过它们搜索条件即可。

* * *

**新代码**

控制器：

```
function showlist() {
    $this->Category->recursive = -1;
    $options['joins'] = array(
        array('table' => 'items',
            'alias' => 'Item',
            'type' => 'left',
            'foreignKey' => false,
            'conditions' => array(
                'Item.category_id = Category.id'
            )
        ),
        array('table' => 'items_users',
            'alias' => 'Grocery',
            'type' => 'left',
            'foreignKey' => false,
            'conditions' => array(
                'Grocery.item_id = Item.id'
            )
        )
    );
    $options['conditions'] = array(
        'Grocery.user_id' => $this->Auth->user('id')
    );
    $options['fields'] = array(
        'Category.*', 'Item.*'
    );
    $options['contain'] = array(
            'Item' 
        );

    $categories = $this->Category->find('all', $options);

    $this->set('categories', $categories);
} 
```

结果数组：

```
Array
(
    [0] => Array
    (
        [Category] => Array
            (
                [id] => 31
                [parent_id] => 
                [name] => Cereal
                [lft] => 21
                [rght] => 22
            )

        [Item] => Array
            (
                [id] => 23
                [name] => Granola Bars
                [category_id] => 31
                [description] => 
                [user_id] => 
                [0] => Array
                    (
                        [id] => 23
                        [name] => Granola Bars
                        [category_id] => 31
                        [description] => 
                        [user_id] => 
                    )

                [1] => Array
                    (
                        [id] => 44
                        [name] => Fiber Bars
                        [category_id] => 31
                        [description] => 
                        [user_id] => 
                    )

            )

    )

[1] => Array
    (
        [Category] => Array
            (
                [id] => 15
                [parent_id] => 27
                [name] => Household
                [lft] => 31
                [rght] => 32
            )

        [Item] => Array
            (
                [id] => 24
                [name] => Cleaning Cloths
                [category_id] => 15
                [description] => 
                [user_id] => 
                [0] => Array
                    (
                        [id] => 24
                        [name] => Cleaning Cloths
                        [category_id] => 15
                        [description] => 
                        [user_id] => 
                    )

                [1] => Array
                    (
                        [id] => 25
                        [name] => Air Freshener
                        [category_id] => 15
                        [description] => 
                        [user_id] => 
                    )

                [2] => Array
                    (
                        [id] => 28
                        [name] => Paper Towels
                        [category_id] => 15
                        [description] => 
                        [user_id] => 
                    )

            )

    )

[2] => Array
    (
        [Category] => Array
            (
                [id] => 15
                [parent_id] => 27
                [name] => Household
                [lft] => 31
                [rght] => 32
            )

        [Item] => Array
            (
                [id] => 25
                [name] => Air Freshener
                [category_id] => 15
                [description] => 
                [user_id] => 
                [0] => Array
                    (
                        [id] => 24
                        [name] => Cleaning Cloths
                        [category_id] => 15
                        [description] => 
                        [user_id] => 
                    )

                [1] => Array
                    (
                        [id] => 25
                        [name] => Air Freshener
                        [category_id] => 15
                        [description] => 
                        [user_id] => 
                    )

                [2] => Array
                    (
                        [id] => 28
                        [name] => Paper Towels
                        [category_id] => 15
                        [description] => 
                        [user_id] => 
                    )

            )

    )

[3] => Array 
```

请注意它是如何在直接在类别下的项目下再次包含项目的。直接在类别下显示的项目是我想要的，它包含在杂货列表中。find() 现在返回我正在寻找的项目下的数组中顶级类别中的所有项目。

另一个问题是 cake 没有对同一类别的项目进行分组。因此，如果空气清新剂和纸巾在同一个杂货清单上，它们就不会出现在同一个类别中，该类别将被列出两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:50:17.117

***编辑***

我刚刚阅读了您的另一个问题，最好将其包含在这篇文章中。所以你想将 Categories 的结果限制为找到的 Grocery 模型的结果？

我建议您尝试从最低的模型开始（我在我的应用程序中也这样做了）：

```
$categories = $this->Grocery->Item->Category->find('all', $options); 
```

* * *

你为什么不使用 Containable？这似乎是使用它的完美情况。

将以下内容添加到您的模型中：

```
public $actsAs = array('Containable'); 
```

然后像这样检索您的数据：

```
$this->Category->find('all', array('contain' => array('Item' => array('contain' =>    array('Grocery'=> array('conditions' => array('Grocery.user_id' => $this->Auth->user('id')))))))); 
```

> ID：15730869
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# javascript - Highcharts在网页上不起作用

> ID：15730872
> 
> 赞同：1
> 
> 时间：2013-03-31T15:13:47.797
> 
> 标签：javascript, html, highcharts, highstock

希望有人可以帮助我解决这个问题，因为它已经困扰了我好几天了。

我正在构建一个使用 Highcharts 库来显示单线系列图表的网站。由于某种原因，我无法在我的页面上显示演示图表。我已将我的 CSS、javascript 和 html 放入 jsFiddle 并正确显示，但是当我以 HTML 正常打开页面时，除了图表之外，所有内容都会加载。

```
here is the jsFiddle of my webpage: 
```

[http://jsfiddle.net/s5RUX/](http://jsfiddle.net/s5RUX/)

```
here is the jsFiddle of the demo on the highcharts website: 
```

[http://jsfiddle.net/z55AA/](http://jsfiddle.net/z55AA/)

谁能告诉我出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T15:16:39.117

您可能必须以特定顺序插入脚本（首先是 jQuery 库，然后是第三方库）。如果不是这样，请通过调试器（例如，内置在 chrome 中）检查函数是否没有相互冲突，或者是否在您的站点中安装了正确的 jQuery 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T19:10:53.490

Highstock 包括 Highcharts，因此在您的脚本加载中消除 Highcharts 引用，这个错误应该会消失。

# java - 在 onSaveInstanceState（onClick 首选项）之后无法执行此操作

> ID：15730878
> 
> 赞同：10
> 
> 时间：2013-03-31T15:14:38.767
> 
> 标签：java, android, illegalstateexception

这是我`PreferenceActivity`的（我的主要活动的内部课程）

```
public static class TestSettings extends PreferenceActivity implements Preference.OnPreferenceClickListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.pref);
        getPreferenceManager().findPreference("key").setOnPreferenceClickListener(this);

    } 
```

这是我的`onPreferenceClick`：

```
@Override
public boolean onPreferenceClick(Preference preference) {
    FragmentClass fc = new FragmentClass();
    fc.show(fm, "TAG");
    return false;
} 
```

这是我的`FragmentClass`（`TimePicker`对话框）：

```
public class FragmentClass extends DialogFragment implements TimePickerDialog.OnTimeSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new TimePickerDialog(getActivity(), this, 15, 00, false);
    }

    @Override
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        Log.i("APP", "hour: "+hourOfDay+", min: "+minute);
    }
} 
```

**问题：**

当我单击首选项（在 XML 中定义），当我处理`onClick`（我正在显示`TimePickerDialog` `onClick`）时，我得到以下异常：

```
 03-21 10:06:41.325: E/AndroidRuntime(11003): FATAL EXCEPTION: main
03-21 10:06:41.325: E/AndroidRuntime(11003): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1327)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1338)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.support.v4.app.DialogFragment.show(DialogFragment.java:127)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at com.example.timepicker2.MainActivity$TestSettings.onPreferenceClick(MainActivity.java:110)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.preference.Preference.performClick(Preference.java:951)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:215)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.widget.AbsListView$1.run(AbsListView.java:3423)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.os.Handler.handleCallback(Handler.java:725)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.os.Looper.loop(Looper.java:137)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at java.lang.reflect.Method.invokeNative(Native Method)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at java.lang.reflect.Method.invoke(Method.java:511)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-21 10:06:41.325: E/AndroidRuntime(11003):    at dalvik.system.NativeStart.main(Native Method) 
```

代码错误指向方法`show()`中的`onPreferenceClick`方法。

为什么会发生这种情况，我该如何解决？

编辑：

Prefs.xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <CheckBoxPreference android:title="Checkbox" android:summary="Checkbox"/>
    <EditTextPreference android:summary="time" android:dialogTitle="Hello"  />
    <Preference android:title="Prefff" android:key="key"/>
</PreferenceScreen> 
```

**我试过的：**

我尝试了大多数投票的解决方案，我发现这里[得到异常“IllegalStateException：onSaveInstanceState 后无法执行此操作”](https://stackoverflow.com/questions/7469082/getting-exception-illegalstateexception-can-not-perform-this-action-after-onsa/10261438#10261438)

```
 @Override
protected void onSaveInstanceState(Bundle outState) {
    //No call for super(). Bug on API Level > 11.
} 
```

但它仍然无法正常工作。甚至在 API < 11 上也没有。我仍然提到了异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:09:19.283

在这里有点勉强：

```
// this is in your TestSettings class
public boolean onPreferenceClick(Preference preference) {
    FragmentClass fc = new FragmentClass();
    // getFragmentManager() here ensures you are using the FragmentManager
    // associated with TestSettings activity and not your MainActivity
    fc.show(getFragmentManager(), "TAG");
    return false;
} 
```

关键是**getFragmentManager()**

确保您使用的是`FragmentManager`与 TestSettings 关联的活动。我有一种感觉，您正在使用`FragmentManager`MainActivity 中的实例（因为 TestSettings 是 MainActivity 的内部类，这并不是一个疯狂的猜测......也许）。

# javascript - 如何测试 Sinon.js 的函数调用序列？

> ID：15730879
> 
> 赞同：15
> 
> 时间：2013-03-31T15:14:47.157
> 
> 标签：javascript, unit-testing, sinon

如何测试 Sinon.js 的函数调用序列？

例如，我在对象中有三 (3) 个处理程序，并且想要定义处理程序调用的序列。这有什么可能吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-31T18:29:11.847

[http://sinonjs.org/docs/](http://sinonjs.org/docs/)

*sinon.assert.callOrder(spy1, spy2, ...)*

如果提供的间谍以指定的顺序调用，则通过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-01-28T07:00:55.443

对于遇到这种情况的人，他们正在寻找一种在调用序列上定义具有指定行为的存根的方法。没有直接的方法（据我所见）说：“这个存根将被调用`X`多次，在第一次调用时它将接受参数`a`并`b`在第二次调用时返回它将接受参数 `c`并返回`d`......”和很快。

我发现最接近这种行为的是：

```
 const expectation = sinon.stub()
            .exactly(N)
            .onCall(0)
            .returns(b)
            .onCall(1)
            .returns(d)
            // ...
            ;
   // Test that will end up calling the stub
   // expectation.callCount should be N
   // expectation.getCalls().map(call => call.args) should be [ a, b, ... ] 
```

这样，我们可以在序列中的每个调用上返回特定值，然后断言调用是使用我们预期的参数进行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-19T08:15:59.313

正如 Gajus 所提到的，它`callOrder()`不再可用，您可以使用`callBefore()`、`calledAfter()`和。`calledImmediatelyBefore()``calledImmediatelyAfter()`

`spy.getCalls()`我发现通过使用和 do `assert.deepEqual()`for 调用参数获取所有调用来断言一个间谍的顺序调用是最方便的 。

示例 - 断言`console.log()`调用顺序。

```
// func to test
function testee() {
  console.log(`a`)
  console.log(`b`)
  console.log(`c`)
} 
```

在您的测试用例中

```
const expected = [`a`, `b`, `c`]
const consoleSpy = spy(console, 'log')

testee()

const result = consoleSpy.getCalls().map(({ args }) => args[0])

assert.deepEqual(result, expected) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-11T13:48:26.643

还有一个 sinon-chai 插件。

[https://www.npmjs.com/package/sinon-chai-in-order](https://www.npmjs.com/package/sinon-chai-in-order)

```
expect(spy).inOrder.to.have.been.calledWith(1)
                   .subsequently.calledWith(2)
                   .subsequently.calledWith(3); 
```

# c# - 如何访问我网站的用户数据库... Asp.net mvc EF 5

> ID：15730881
> 
> 赞同：0
> 
> 时间：2013-03-31T15:14:49.307
> 
> 标签：c#, asp.net-mvc, entity-framework

我的 AccountModel 上有此代码。Visual Studio 为我创建了它。

```
 public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
} 
```

在我的控制器中，我有这个：

```
 public class UsuarioUxController : Controller
{

    private KekantoContext db = new KekantoContext();
    private UsersContext userDb = new UsersContext();

 public ActionResult Index()
    {

        return View(userDb.UserProfiles);
    } 
```

我正在尝试访问用户数据库，但我没有成功......计数`userDb.UserProfiles`是给我`count=0`的，我的数据库中已经有用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:37:35.600

检查`DefaultConnection`连接字符串是否指向配置文件中的正确数据库，即

```
<configuration>
   <connectionStrings>
       <add name="DefaultConnection" connectionString="your connection string" />
   </connectionStrings>
</configuration> 
```

# java - 如何标准化健身分数？

> ID：15730886
> 
> 赞同：2
> 
> 时间：2013-03-31T15:15:47.257
> 
> 标签：java, neural-network, genetic-algorithm, robotics

我正在发展一群神经网络，我一直在努力将适应度分数标准化（到 0 到 1 范围内的值），因此这个数字本身是最有意义的。问题是代理在不同的条件下进行测试——他们参与不同的游戏，并且对于每个游戏使用不同的适应度函数。健身功能看起来或多或少是这样的：

```
agentsFitness[indiv][0] += Util.mean(speed) * (games[0].getConstant(0) - Math.sqrt((Math.abs((speed[LEFT] - speed[RIGHT]))) * (games[0].getConstant(1) - Util.normalize(0, 4000, maxIRActivation)))); 
```

但每个人都会接受不同的投入。因为我可以估计输入的最大值和最小值，所以我可以轻松地分别对它们中的每一个进行归一化。其中一些将在 (-30,000, 360,000) 和一些 (0, 900) 范围内。

我发现困难的部分是代理可能同时在两个、三个或更多游戏上进行测试，因此他们的适应度得分将是所有游戏得分的总和。此外，可以引入/发展新游戏。硬编码归一化的最小值和最大值在这里不适合。

如果我尝试使用非常大的最大值和最小值，那么对于具有较小输入值的游戏，我最终会得到一个范围（0.40、0.45）的分数，这隐藏了分数的潜在多样性。

任何关于如何标准化这些健身分数的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:43:58.007

所以你正在尝试使用遗传算法优化神经网络，对吗？凉爽的！

通常建议对 ANN 使用归一化输入，但这在使用 sigmoid 激活时特别适用。您确定需要标准化数据吗？在不知道输入范围的情况下，很难让 ANN 完成其工作。

1.  如果您很难对输入进行规范化，请跟踪数据中的当前最大值和最小值。
2.  更好的是，尝试对数据进行一次迭代以收集关于最大值和最小值的先验信息（前提是它不会显着增加时间复杂度）。
3.  或者，尝试研究一种逻辑来猜测最大值和最小值。也许......另一个神经网络来做猜测工作:)。这将取决于环境。

你想做什么对我来说不是很清楚......但据我了解，这些是我能提出的唯一建议。

检查这两个链接。可能有帮助：

[归一化具有未知界限的值](https://stackoverflow.com/questions/13473324/normalizing-values-with-unknown-bounds)

[规范化语言模型中的组件](https://stackoverflow.com/questions/10471778/normalize-components-in-a-language-model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:26:41.823

您可以使用标准归一化分数：对于每个总体（在本例中为每个输入集合），您可以通过从中减去总体平均值，然后将其除以标准差来计算个体的分数。

这不会给您留下 0 和 1 之间的数字，但确实允许您比较两个总体

# java - 节点是“动态”变量吗？

> ID：15730887
> 
> 赞同：0
> 
> 时间：2013-03-31T15:15:49.930
> 
> 标签：java, linked-list, nodes

```
public CharList(CharList l) 
{
    // Whatever method your CharList provides to get the 
    // first node in the list goes here
    CharNode pt = l.head(); 

    // create a new head node for *this* list
    CharNode newNode = new CharNode();
    this.head = newNode;

    // Go through old list, copy data, create new nodes 
    // for this list.
    while(pt != null)
    {
        newNode.setCharacter(pt.getCharacter());
        pt = pt.getNext();
        if (pt != null)
        {
            newNode.setNext(new CharNode());
            newNode = newNode.getNext();
        }

    }
} 
```

好的，这是一个复制构造函数。我不太明白的是最后两行。

```
 newNode.setNext(new CharNode());
            newNode = newNode.getNext(); 
```

基本上，程序应该在一个节点内创建一个节点，以便它指向 LinkedList 的另一个元素。这就是第一行应该做的和正在做的；但是，不是在节点内部定义节点，而是 newNode = newNode.getNext(); 只是覆盖指向另一个节点的节点，使第一行无用。有什么我没有得到的吗？

```
pt = pt.getNext(); 
```

这行没问题，因为 pt 可以被覆盖，因为 pt 是我们作为属性传递的 LinkedList 中的一个元素，但其他两行对我来说没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:26:23.727

代码是正确的。它并没有覆盖它只是移动到下一个节点并设置它的值。

```
Step1 : Set next node using newNode.setNext(new CharNode());
Step2 : Move to next node using newNode = newNode.getNext();
Step 3 : Set value for next node newNode.setCharacter(pt.getCharacter()); 
```

希望澄清。

# java - 关闭连接后没有操作，绕过我对关闭连接的检查？

> ID：15730889
> 
> 赞同：4
> 
> 时间：2013-03-31T15:16:06.770
> 
> 标签：java, mysql, jdbc

我有循环遍历对象队列的代码，这些对象描述了需要存储在 MySQL 数据库中的信息。我最近稍微更改了代码以关闭`finally`整个应用程序中的一个块中的连接，以便在发生异常时我们不会泄漏任何内容。它工作得很好，除了：

有些用户有时会看到错误`No operations allowed after resultset closed`- 我知道错误的含义，但我不知道如何关闭它。

违规代码：

```
 PreparedStatement s = null;
    Connection conn = null;

    try {

        if( !queue.isEmpty() ){

            conn = Prism.dbc();
            if(conn == null || conn.isClosed()){
                return;
            }
            conn.setAutoCommit(false);
            s = conn.prepareStatement("INSERT query goes here");
            int i = 0;
            while (!queue.isEmpty()){
                Handler a = queue.poll();
                if( a == null || a.isCanceled() ) continue;
                // .. value setting code here
                s.addBatch();
                if ((i + 1) % perBatch == 0) {
                    s.executeBatch(); // Execute every x items.
                }
                i++;
            }

            s.executeBatch();
            conn.commit();

        }
    } catch (SQLException e) {
        // error logging code
    } finally {
        if(s != null) try { s.close(); } catch (SQLException e) {}
        if(conn != null) try { conn.close(); } catch (SQLException e) {}
    } 
```

错误指向该`conn.setAutoCommit(false);`行。但是，我看不到此时连接是如何关闭的，因为我正在显式检查其上方的已关闭/空连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:43:19.247

我在堆栈跟踪中发现的核心问题是： `2013-03-31 13:21:11 [SEVERE] Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 30,491,788 milliseconds ago. The last packet sent successfully to the server was 30,491,788 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.`

调用时获得的连接`Prism.dbc();`实际上是来自连接池的连接；在这种特定情况下，池连接被*破坏*。它表示池中的 JDBC 连接与数据库之间的通信超过 8 小时没有成功。也许是因为`wait_timeout`在数据库服务器上定义的提到的或防火墙断开了连接或任何东西；连接中断的原因可能有很多。

您应该按照异常提出的建议来解决此问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T16:12:31.050

此问题的最可能原因是 JDK 版本和所使用的 DB 驱动程序不兼容。

查看此链接：[http](http://dev.mysql.com/downloads/connector/j) ://dev.mysql.com/downloads/connector/j ，它提供了各种版本的 DB 驱动程序。

编辑：

请参阅此链接以获取 jdk 和驱动程序映射：[http](http://dev.mysql.com/doc/refman/5.1/en/connector-j-versions-java.html) ://dev.mysql.com/doc/refman/5.1/en/connector-j-versions-java.html 。

编辑：

我之所以说这是最可能的原因，是因为与 DB 合作的经验。我不认为这是代码问题，因为它对某些人有用。使用不兼容的驱动程序可能会导致奇怪的问题，例如您所面临的问题。我在使用 Oracle DB 时遇到过这样的问题，我能够执行所有查询，但合并查询导致连接关闭，问题是由于驱动程序不兼容造成的。

所以我根据我的经验这么说。

我也觉得即使这不是问题的确切原因[它最可能的问题原因]如果用户可以发布驱动程序版本和 jdk 版本我们肯定可以排除这种情况，这篇文章肯定可以帮助人们，所以我不明白否决票的原因。

# php - PostgreSQL 值递增

> ID：15730891
> 
> 赞同：0
> 
> 时间：2013-03-31T15:16:23.287
> 
> 标签：php, sql, postgresql, sql-order-by

`cc_playlist`给定一个有 4 行/记录的表，其中`id_key`主键是自动递增的，and `track_id`，`track_position`and `playlist_id`：

```
+--------+----------+----------------+-------------+
| id_key | track_id | track_position | playlist_id |
+--------+----------+----------------+-------------+
|     23 |        3 |              0 |           1 |
|    223 |       23 |              1 |           1 |
|    343 |       45 |              2 |           1 |
|    344 |       32 |              3 |           1 |
+--------+----------+----------------+-------------+ 
```

问题：
当我想添加一条新记录时，例如`track_id = 777`, `track_position=2`，`playlist_id =1`我希望它放置新记录并将其余记录向下推，只要它在同一个`playlist_id`.

```
    +--------+----------+----------------+------------ -+
    | id_key | track_id | 轨道位置 | 播放列表 ID |
    +--------+----------+----------------+------------ -+
    | 23 | 3 | 0 | 1 |
    | 223 | 23 | 1 | 1 |
 -->| 345 | 第777章 2 | 1 |
    | 第343章 45 | 3 | 1 |
    | 第344章 32 | 4 | 1 |
    +--------+----------+----------------+------------ -+

```

注意：我在 php 中执行此操作，如果在 Postgres 中无法执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:25:38.707

我认为您想要的是在插入新记录之前这样的查询：

```
update cc_playlist
    set track_position = track_position + 1
    where playlist_id = YOURPLAYLISTID and track_position > YOURTRACKPOSITION; 
```

`delete`请注意，当您删除轨道时，您需要对 执行类似的操作。

此外，您可以将其设置为数据库中的更新触发器，以便数据库自动执行此操作。或者，将插入包装在存储过程中，并在那里进行插入和更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:58:56.153

在我看来，您应该在查询表时插入具有适当**track_position**的新行并按 track_position排序（**请耐心等待**）。

原因是因为 PostgreSQL 将表存储为无序堆。这意味着每次您在表上插入一行时，它都会附加（即，插入到末尾）到包含表内容的文件中。

有一种方法可以根据索引（[postgresql cluster](http://www.postgresql.org/docs/9.1/static/sql-cluster.html)）重新组织表。如果您想将其用于测试目的，我会将其包括在内，但我完全建议您不要这样做。话虽如此，您将使用**playlist_id、track_id**作为索引键在表上创建索引，然后使用 cluster 命令。

我也认为在 php 中这样做是一个坏主意，因为这种行为 clearle 属于 PostgreSQL。

我知道这不是您问题的实际答案，但也许有帮助

总结一下：

*   查询时只需插入行和顺序
*   在 PostgreSQL 中执行此操作，而不是在 php 中
*   不要使用集群

# android - 我必须将 OpenAl 用于 ogg 文件

> ID：15730892
> 
> 赞同：1
> 
> 时间：2013-03-31T15:16:26.053
> 
> 标签：android, development-environment, wav, openal, ogg

我可以在 Android 开发中将 openAl 用于 .wav 文件。我可以为 .wav 文件设置位置。但不幸的是，我认为 openAl 不支持 .ogg 或 .mp3 文件。仅支持 .wav 文件。我能做些什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:28:28.383

我认为您应该能够将 OpenAl 用于 ogg。看看这个[例子](http://www.paulscode.com/forum/index.php?topic=56.0 "例子")

# android - Android：setRetainInstance(true) 在方向更改时删除 ActionBar 中的导航模式微调器

> ID：15730898
> 
> 赞同：0
> 
> 时间：2013-03-31T15:17:17.660
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我有一个`SherlockListFragment`通过使用将导航模式列表微调器放在操作栏中的`setNavigationMode(ActionBar.NAVIGATION_MODE_LIST)`. 这很好用，但我注意到导航微调器在改变方向时消失了。我设法弄清楚这是因为我调用`setRetainInstance(true);`，将其设置为 false 修复了导航微调器消失的问题，但我确实需要保留此片段的实例，因此将其设置为 false 是没有选择的。

我尝试回忆`setNavigationMode(ActionBar.NAVIGATION_MODE_LIST)`方向变化，但这并没有解决问题。旋转器似乎永远消失了......

是什么导致操作栏中的导航微调器在更改方向时消失？我怎么把它带回来？

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);         
        AsyncTask<String, Integer, String[]> asynctask = new DownloadFilesTask(this).execute(url);
        setRetainInstance(true);        
        Context context = getSherlockActivity().getSupportActionBar().getThemedContext();
        ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.options, R.layout.sherlock_spinner_item);
        list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
        getSherlockActivity().getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);        
        getSherlockActivity().getSupportActionBar().setListNavigationCallbacks(list, this);
    } 
```

编辑：

有人发布了使用的解决方案`android:configChanges="orientation"`并删除了他的答案。我对此进行了调查，并`android:configChanges="orientation|screenSize"`确实为我解决了问题。但是，这似乎更像是一种解决方法，而不是实际的解决方案。哦，好吧...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:35:49.713

那么，为什么要尝试根据 Fragment 中的列表设置 Activity 的导航？这似乎是 Activity 应该做的事情。如果您确实需要片段来执行此操作，片段可以调用拥有活动的方法（如果它实现了接口）来设置选项。只需设置选项列表，而不是实际的适配器（活动应该拥有适配器）。反过来，活动可以调用片段上的方法来指示选择了一个选项。

# opera - Opera 中的边界半径错误

> ID：15730902
> 
> 赞同：15
> 
> 时间：2013-03-31T15:17:43.810
> 
> 标签：opera, css

不久前，我为自己做了一个小页面，我偶然发现了一个从那以后无法回答的错误。

打开[http://darngoodpictures.com/#showme](http://darngoodpictures.com/#showme)时，您会在左侧和右侧看到导航箭头。这些完全是 CSS 制作的。现在我会走另一条路，但它已经完成了，我会坚持下去:)

在我测试的每个浏览器中，箭头看起来都应该。唯一的例外是 Opera。Opera 以我从未见过的方式渲染箭头。谁能解释那里发生了什么？我很快就发现 Opera 在箭头的边界半径属性方面存在一些问题，但是谁能提供更准确的信息？这种行为太诡异了……

编辑：它变得越来越奇怪。最初我认为，我的 CSS 与边框半径相结合以某种方式触发了这个问题，但问题是边框半径。当边框宽度与它结合时，它会变得更加强烈。请参阅以下 jsfiddles：

我： http: [//jsfiddle.net/62ujn/](http://jsfiddle.net/62ujn/)（一切都按预期呈现）

关键规则：

```
border-radius: 0;
border-width: 200px; 
```

二： http: [//jsfiddle.net/62ujn/1/](http://jsfiddle.net/62ujn/1/)（Opera中的第一个小问题）

关键规则：

```
border-radius: 50px;
border-width: 200px; 
```

III： http: [//jsfiddle.net/62ujn/2/](http://jsfiddle.net/62ujn/2/)（从这里开始，Opera 中的渲染变得荒谬）

关键规则：

```
border-radius: 50px;
border-width: 200px 150px; 
```

四：http: [//jsfiddle.net/62ujn/3/](http://jsfiddle.net/62ujn/3/)

关键规则：

```
border-radius: 50px;
border-width: 200px 150px 100px; 
```

五：http: [//jsfiddle.net/62ujn/4/](http://jsfiddle.net/62ujn/4/)

关键规则：

```
border-radius: 50px;
border-width: 200px 150px 100px 50px; 
```

奇怪的。非常。奇怪的。

编辑2：

我刚刚联系了 Opera，因为我怀疑除了“Opera-Bug”之外没有其他答案......当我得到满意的答案时，我会更新这个页面:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T10:00:10.897

```
.round { 
       -o-border-radius topleft: 30px;  **//for Opera and Iphone5 Mobile**
       -o-border-radius topright: 30px;
       -o-border-radius bottomleft: 30px;
       -o-border-radius bottomright: 30px;
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T10:23:10.733

为您的 div 边界半径提供跨浏览器行为怎么样？

```
 .arrow {
    border-radius: 30px;
    -o-border-radius: 30px;  //for Opera
    -webkit-border-radius: 30px; // for Chrome, Safari
    -moz-border-radius: 30px; // for Mozilla
    border-style: solid;
    cursor: pointer;
    height: 0;
    margin: 0 0 -15px 50px;
    width: 0;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T18:11:16.500

好的，正式结束这个问题：前段时间 Opera 发布了一个不再存在这些问题的版本。所以，很明显，这是 Opera 中的一个错误，他们修复了它。问题结束:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:27:37.847

这些确实是看起来很有趣的工件；）您正在使用具有 0 尺寸和边界填充所有空间的 css 技巧。只有这会导致与边界半径相结合的问题。在大多数情况下，边框半径本身在歌剧中都可以正常工作，即使边框非常厚[Fiddle-Example](http://jsfiddle.net/9XmzZ/)以及在 0-border 和一种颜色的情况下也是如此。但我知道我们都喜欢这个肮脏的小把戏，而歌剧是一个有趣的终结者。

因此，这是[您的导航箭头的替代版本，](http://jsfiddle.net/zbeBs/2/)它与歌剧效果更好，但也不完美。歌剧真的很烂；/

html:

```
<div>
    <div class='first'></div>
    <div class='second'></div>
</div>

<div class='mirror'>
    <div class='first'></div>
    <div class='second'></div>
</div> 
```

CSS：

```
div {
    width:200px; height:100px;
    background:none;   
    position:relative;
    margin-bottom:5px;
}

.first {
    position:absolute;
    left:0; top:0;
    width:60px; height:100px;
    background:black;
    border-radius:40px 0 0 40px;
    transform:scale(0.5, 1);
    -webkit-transform:scale(0.5, 1);
    -o-transform:scale(0.5, 1);
}
.second {
    position:absolute;
    left:57px; top:0;
    width:0; height:0;
    background:none;

    border-top: 50px solid transparent;
    border-bottom: 50px solid transparent;
    border-left: 50px solid green;
    transform:scale(1.5, 1);
    -webkit-transform:scale(1.5, 1);
    -o-transform:scale(1.5, 1);
}

.mirror { 
    transform:scaleX(-1);
    -webkit-transform:scaleX(-1);
    -o-transform:scaleX(-1);    
} 
```

好消息是，opera 将停止开发自己的渲染引擎并开始使用 webkit。因此，您的箭头问题将通过歌剧未来更新之一自动解决^^

# jquery - 我如何找出元素索引？

> ID：15730906
> 
> 赞同：-2
> 
> 时间：2013-03-31T15:17:54.967
> 
> 标签：jquery, console

您好，我正在尝试找出一个 dom 元素索引并将其记录在控制台中。如何使用 jQuery 找出元素索引并将其记录到 chromes 开发工具的控制台中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:28:37.150

你可以得到`index`这样的元素：

```
$('#elementID').index(); 
```

你看起来`console`像这样：

```
console.log($('#elementID').index()) 
```

例如，假设您有三个 div：

```
<div>First div</div>
<div>Second div</div>
<div>Third div</div> 
```

`div`您可以在单击时获取索引，也可以在控制台中查看：

```
$("div").click(function () {

  // this is the dom element clicked
  var index = $("div").index(this);
  console.log("That was div index #" + index);
}); 
```

# asp.net - 如何找到对应值的枚举名称并在 DisplayFor 中使用？

> ID：15730907
> 
> 赞同：5
> 
> 时间：2013-03-31T15:17:55.813
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4, enums

我需要在 DisplayFor HtmlHelper 中显示对应值的枚举名称。我有以下枚举：

```
public enum CheckStatus
    {
        Yes = 1,
        No = 2,
        Maybe =3
    } 
```

我通常像这样显示模型的值：

```
@Html.DisplayFor(modelItem => item.Name) 
```

问题是，在某一时刻我有这个：

```
@Html.DisplayFor(modelItem => item.Status) 
```

该行仅显示之前从枚举（1,2 或 3）设置的状态值。而不是我需要以某种方式显示该值的名称。所以，如果状态码是 2，我想显示“否”，而不是数字 2。

当我填充下拉列表时，我在获取枚举名称时遇到了类似的问题，我设法像这样解决它：

```
@Html.DropDownListFor(model => model.Item.Status,
                new SelectList(Enum.GetValues(typeof(Pro.Web.Models.Enums.CheckStatus)))) 
```

我有点迷失如何从枚举的值中只获得一个名称。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T15:39:47.543

您的问题不是很清楚该`Status`物业的基本类型是什么。如果是`CheckStatus`，那么`@Html.DisplayFor(modelItem => item.Status)`将完全显示您的期望。另一方面，如果它是一个整数，您可以编写一个自定义助手来显示正确的值：

```
public static class HtmlExtensions
{
    public static IHtmlString DisplayEnumFor<TModel>(this HtmlHelper<TModel> html, Expression<Func<TModel, int>> ex, Type enumType)
    {
        var value = (int)ModelMetadata.FromLambdaExpression(ex, html.ViewData).Model;
        string enumValue = Enum.GetName(enumType, value);
        return new HtmlString(html.Encode(enumValue));
    }
} 
```

然后像这样使用它：

```
@Html.DisplayEnumFor(modelItem => item.Status, typeof(CheckStatus)) 
```

让我们假设您希望将此帮助程序更进一步，并考虑您的枚举类型的 DisplayName 属性：

```
public enum CheckStatus
{
    [Display(Name = "oh yeah")]
    Yes = 1,
    [Display(Name = "no, no, no...")]
    No = 2,
    [Display(Name = "well, dunno")]
    Maybe = 3
} 
```

以下是扩展我们的自定义助手的方法：

```
public static class HtmlExtensions
{
    public static IHtmlString DisplayEnumFor<TModel>(this HtmlHelper<TModel> html, Expression<Func<TModel, int>> ex, Type enumType)
    {
        var value = (int)ModelMetadata.FromLambdaExpression(ex, html.ViewData).Model;
        string enumValue = Enum.GetName(enumType, value);
        var field = enumType.GetField(enumValue);
        if (field != null)
        {
            var displayAttribute = field
                .GetCustomAttributes(typeof(DisplayAttribute), false)
                .Cast<DisplayAttribute>()
                .FirstOrDefault();
            if (displayAttribute != null)
            {
                return new HtmlString(html.Encode(displayAttribute.Name));
            }
        }
        return new HtmlString(html.Encode(enumValue));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T15:39:29.583

**编辑：**

您可以简单地尝试这种方式。请在您的控制器类中尝试我的以下代码

控制器：

```
int enumvalue=(int)(YourModel.Status)// this property must be integer value only
var checkStatusName= Enum.GetName(typeof(CheckStatus), enumvalue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-12T18:14:23.220

改编 @DarinDimitrov 代码作为显示模板。

如果你有

```
public enum CheckStatus
{
    [Display(Name = "oh yeah")]
    Yes = 1,
    [Display(Name = "no, no, no...")]
    No = 2,
    [Display(Name = "well, dunno")]
    Maybe = 3
}

public class MyModel
{
    public CheckStatus Status { get; set; }
} 
```

将以下内容放入 Views/DisplayTemplates/Enum.cshtml ：

```
@using System.ComponentModel.DataAnnotations
@model object

@{
    var value = Model.ToString();
    var field = Model.GetType().GetField(value);
    if (field != null)
    {
        var displayAttribute = field
                .GetCustomAttributes(typeof(DisplayAttribute), false)
                .Cast<DisplayAttribute>()
                .FirstOrDefault();

        if (displayAttribute != null)
        {
            value = displayAttribute.GetName();
        }
    }
}

@value 
```

现在你可以简单地在你的视图中写：

```
@Html.DisplayFor(model => model.Status) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-05T14:17:04.923

如果您的属性未声明为 int 类型，而是您正在使用的枚举类型，则使用 razor/MVC 您可以“免费”获得。

Darin 解决方案的问题是，虽然它对我有用，但如果我使用 int 类型，我无法在视图中看到我的其他字段 @Html.EditorFor(...)。

# windows-phone-7 - 如何从媒体库 windows phone 7 裁剪图像

> ID：15730912
> 
> 赞同：0
> 
> 时间：2013-03-31T15:18:55.577
> 
> 标签：windows-phone-7

我在媒体库中有大图像（5000 * 5000 像素）。我只需要拍摄部分图像。假设它从 x=200 y=200 及其 1000 像素的宽度和高度开始。我怎样才能做到这一点 ？我对此没有任何好的解决方案。

我找到的唯一解决方案：

使用 photochoosertask.... 然后

```
var b = new WriteableBitmap(5000, 5000);
 b.LoadJpeg(e.ChosenPhoto);
 WriteableBitmap wb = b.Crop(200, 200, 1000, 1000);
 image1.Source = wb 
```

但结果质量很差，我也遇到了一些内存问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:27:46.943

这里的问题是您正在创建大小为 1000x1000 的 WriteableBitmap。当您调用 LoadJpeg 时，它会将您的图像加载到该分辨率，这会导致质量问题。当你收割时，情况会变得更糟。

当您尝试处理大图片时，内存问题是很正常的。为避免这种情况，您最好使用 SetSource 方法，该方法会自动将您的照片缩放到 2000x2000 像素以下。如果您想了解更多相关信息，可以[在我的博客上找到详细信息](http://igrali.com/2012/01/03/how-to-open-and-work-with-large-photos-on-windows-phone/)。

不过，使用 Crop 方法是可行的方法。采取的步骤包括：

*   从流源创建 BitmapImage，然后从中创建 WriteableBitmap（或者，创建一个大小为 5000,5000 的 WriteableBitmap，这是您想要的，但会导致内存问题）
*   调用 Crop 方法，但缩放所有内容以匹配使用 SetSource 时获得的分辨率 - 应为 2000x2000 或更小。
*   将 image1.Source 设置为新创建的 WB。

# html - 将多个 HTML 文本输入与存储的变量连接起来

> ID：15730913
> 
> 赞同：2
> 
> 时间：2013-03-31T15:19:00.800
> 
> 标签：html, forms, string-concatenation

我正在尝试创建一个简单的 html 表单，它要求用户提供一些详细信息，一旦提交，就会将文本添加到文本框中的某些预定文本中。

这个例子...

文本框 1 - 输入姓名 文本框 2 - 输入年龄 文本框 3 - 输入位置

提交时，我希望最好将其添加到文本框中，或者甚至只是输出在 html 页面上有文本，并且已经存储了其他文本，因此输出可能类似于“你好约翰，你 25 岁，从伦敦”。

我所拥有的是非常基本的：

```
 <html>
    <form>
    Name: <input type="text" name="name"><br>
    Age: <input type="text" name="age"><br>
    Location: <input type="text" name="location"><br>
    <input type="submit" value="Submit">
    </form>
    <html> 
```

除此之外，我不确定如何将所有值与其他预定文本一起放入另一个文本框中。

对此的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T15:34:20.257

这是一个解决方案，因此使用 获取元素`document.getElementById()`，使用 将事件处理程序附加到`click`事件`element.onclick = function () {}`并`alert()`显示消息框。

[jsFiddle](http://jsfiddle.net/Tyriar/YEb6W/)

**JavaScript**

```
var button = document.getElementById('test');
var name = document.getElementById('name');
var age = document.getElementById('age');
var location = document.getElementById('location');

button.onclick = function () {
    var str = 'Hello ' + name.value + 
        ', you are ' + age.value +
        ' years old and from ' + location.value;
    alert(str);
}; 
```

**HTML**

```
<label>
    Enter name: 
    <input id="name" />
</label>
<br />
<label>
    Enter age: 
    <input id="age" />
</label>
<br />
<label>
    Enter location: 
    <input id="location" />
</label>
<br />
<button id="test">Test</button> 
```

## 编辑

要将其输出到页面，请使用`element.innerHTML`设置元素的内容。

[jsFiddle](http://jsfiddle.net/Tyriar/5ERRG/)

```
output.innerHTML = str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-28T11:39:43.123

```
function yes() {
var button = document.getElementById('test');
var name = document.getElementById('name');
var age = document.getElementById('age');
var location = document.getElementById('location');
    var str = 'Hello ' + name.value + 
        ', you are ' + age.value +
        ' years old and from ' + location.value;
    document.getElementById('test').innerHTML=str;
};
```

```
<html>
<body>
<label>
    Enter name: 
    <input id="name" />
</label>
<br />
<label>
    Enter age: 
    <input id="age" />
</label>
<br />
<label>
    Enter location: 
    <input id="location" />
</label>
<br />
<button onclick="yes()">Test</button>
<p id="test"></p>
</body>
</html>
```

# java - Java线程对单个值求和

> ID：15730915
> 
> 赞同：2
> 
> 时间：2013-03-31T15:19:05.567
> 
> 标签：java, multithreading, synchronized, addition

在Java中，为什么在下面的代码中`synchronized`可以注释掉？因为加法几乎是原子的，因此错误或失败的概率太小？

```
public class AddInParallel {

    public static void main(String[] args) {

        class sumValue {
            public int sum = 0;
            sumValue() {}
            public /*synchronized*/ void add(int i) {
                sum += i;
            }
        }

        // final makes sumValue visible to threads
        final sumValue sum = new sumValue();

        class Adder implements Runnable {

            // used to distinguish threads
            private int id;

            Adder(int index) { id = index; }

            public void run() { sum.add(1); }

        }    

        // start threads
        Thread[] threads = new Thread[1000];
        for (int i = 0; i < threads.length; i++) {
            threads[i] = new Thread(new Adder(i) {});
            threads[i].start();
        }

        // wait for threads above to finish
        for (int i = 0; i < threads.length; i++) {
            try {
                threads[i].join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        System.out.println(sum.sum);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:26:41.617

正如 Sotirios 所建议的，如果我们在这里更改代码：

```
public /*synchronized*/ void add(int i) {
    for (int j = 0; j < 1000; j++) {
        sum += i;
    }
} 
```

最终通常不会是一百万。所以需要**同步**。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:27:18.063

这种陈述不能总是被认为是原子的：

```
sum += i; 
```

实际上，这涉及三个步骤（计算临时变量以存储 的当前值`sum`）。

在这种情况下，即使变量声明`volatile`上的关键字`sum`也不相关（因为赋值是基于其当前值）。

因此，您应该取消注释`synchronized`关键字以启用锁定，以免在您的流程中遇到“意外”=> 意味着总是以`1000`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:29:41.577

`synchronized`关键字不应被注释掉。每当您从多个线程写入变量时，（至少）写入本身应该受到某种同步的保护——`synchronized`关键字、[ReentrantReadWriteLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)等。正如您在问题中提到的那样，原因是不能保证单个写入是原子的。

虽然我怀疑这段代码的目的是为了证明一个观点，但同样值得注意的是，你不需要为这段代码使用锁。`AtomicInteger`您可以通过使用变量而不是变量`int`来获得正确的解决方案，而无需使用任何类型的同步`sum`。

具体来说，您可以替换`public int sum`为`public AtomicInteger sum=new AtomicInteger();`，而正文为`add()`：

```
public void add(int i) {
    sum.addAndGet(i);
} 
```

...你现在有了一个无锁的、正确的实现。（你必须在其他几个地方更新代码才能打印和运行，但我会把它作为练习留给读者。:)

# javascript - Javascript函数顺序

> ID：15730919
> 
> 赞同：2
> 
> 时间：2013-03-31T15:19:32.913
> 
> 标签：javascript, order-of-execution

太好了，我遇到了 JS 问题。我对 Web 开发相当陌生，所以我不完全确定我的 JS 做错了什么。

```
//create script for #mainHeading focus @ pageload -- heading 1
    window.onload = function() {
        var mainHeading = document.getElementById("mainHeading");
        mainHeading.style.textShadow = '0px 0px 0px #fff'
    }

//create script for #subHeading focus @ pageload -- heading 2
    window.onload = function() {
        var subHeading = document.getElementById("subHeading");
        subHeading.style.textShadow = '0px 0px 0px #fff'
    } 
```

所以基本上我为我的第一个标题编写了在页面加载时“聚焦”的函数。然后我决定添加第二个具有相同功能的标题。现在，当我加载我的页面时，只加载第二个标题，而不是两者。

为什么是这样？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T15:20:58.817

因为您正在覆盖第一个函数。不要像那样设置属性......使用`addEventListener`或等效的代替：

```
window.addEventListener("load", function () {
    // First event handler
});
window.addEventListener("load", function () {
    // Second event handler
}); 
```

此方法允许您根据需要注册尽可能多的事件处理程序。请注意，非常旧的 Internet Explorer 版本不支持它，因此您可能需要对其进行功能检测并`attachEvent`在那些旧的 IE 版本中使用。

目前，您只是设置属性的值。考虑以下代码，它实际上是等效的：

```
var obj = {};
obj.x = 10;
obj.x = 20;
console.log(obj.x); // 20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T15:20:57.903

您正在替换该`onload`功能。

正确的解决方案是使用添加事件侦听器`addEventListener`，它们是相加的：

```
window.addEventListener('load', function1);
window.addEventListener('load', function2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:23:48.553

无需替换您的 onload 函数，只需向其添加说明即可。不错的老派，因此跨浏览器兼容：

```
window.onload = function() {
    var mainHeading = document.getElementById("mainHeading"),
         subHeading = document.getElementById("subHeading");
    mainHeading.style.textShadow = '0px 0px 0px #fff';
    subHeading.style.textShadow = '0px 0px 0px #fff';
} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T15:22:16.647

您正在覆盖第二个方法。您需要将它们合并在一起：

```
window.onload = function() {
    var mainHeading = document.getElementById("mainHeading"),
        subHeading = document.getElementById("subHeading");

    mainHeading.style.textShadow = subHeading.style.textShadow = 
                                                  '0px 0px 0px #fff';
}; 
```

您也可以执行其他答案的操作。这似乎也不错。

# ios - ios - 在应用程序处于活动状态时打开推送通知时，会导致崩溃

> ID：15730924
> 
> 赞同：0
> 
> 时间：2013-03-31T15:20:32.860
> 
> 标签：ios, objective-c, ios5, ios6, urbanairship.com

我正在测试推送通知。我有这种情况：

当我在随机屏幕上并收到推送通知并打开该通知时，系统会尝试将我带到推送通知强制执行的屏幕。这会导致似乎是一个 segue 错误：

```
Mar 31 11:08:52 ancient-phone Marketing[14788] <Error>: *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[LoginController openBusinessTopic]: unrecognized selector sent to instance 0x1c5b3ae0'
    *** First throw call stack:
    (0x318412a3 0x394db97f 0x31844e07 0x31843531 0x3179af68 0x40ae3 0x337f290d 0x337f1f6b 0x33649d59 0x336496cd 0x3364911b 0x3534a5a3 0x3534a1d3 0x31816173 0x31816117 0x31814f99 0x31787ebd 0x31787d49 0x353492eb 0x3369d301 0x404ff 0x39912b20) 
```

我怎样才能防止这种情况？发生这种情况的原因是什么？有没有办法处理这个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:26:37.753

您的错误表明`LoginController`正在发送一条`openBusinessTopic`消息，并且该类未实现该方法。您可以`openBusinessTopic`在您的`LoginController`类中实现，也可以尝试确定是否存在应该发送该消息的不同对象。

# c++ - C ++ fseek：第一个字节是位置0还是1？

> ID：15730929
> 
> 赞同：0
> 
> 时间：2013-03-31T15:21:10.390
> 
> 标签：c++, fseek

我想从具有一定偏移量的文件中读取字节。

我必须在 VB6 和 C++ 中做同样的事情。

例如像这样：

```
FILE *file =fopen(szFileName,"rb");
fseek( file, iFirstByteToRead, SEEK_SET);
fread(nBytes,sizeof(unsigned char), iLenCompressedBytes, file); 
```

（是的，我知道 nBytes 没有被声明为字节，但我还是将它命名为 nBytes 以保持我的 VB6 命名）。

在 VB6 中我必须使用

```
Get #iFile, iFirstByteToRead, nBytes 
```

在 VB6 中，第一个字节（使用“Get”时）位于位置 1。这意味着我不得不说

```
Get #iFile, 1, nBytes 
```

...从文件的最开头读取字节。

我想知道 fseek 是基于 1 还是基于 0。

我是否必须将 iFirstByteToRead 减少 -1 才能获得相同的结果？

我的问题是纯理论性质的，请不要说我的编码不好......

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T15:26:26.963

简而言之： a 的`fseek`偏移量`SEEK_SET`是从零开始的（例如`fseek(your_file, 0, SEEK_SET)`，将流位置设置为开头）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T15:26:22.790

第一个字节位于文件中的偏移量 0 处。

# c++ - DX11 动态大小的缓冲区

> ID：15730939
> 
> 赞同：1
> 
> 时间：2013-03-31T15:22:02.020
> 
> 标签：c++, directx-11, voxel, compute-shader

我正在尝试为大学项目制作可变形的体素地形。我目前正在使用数字 3DTextures 将我的体素数据保存在“块”中。我的计划是使用计算着色器对所述体素数据执行行进立方体算法，并将顶点输出到缓冲区中，然后每帧都可以渲染该缓冲区。

问题是，为了为我正在使用的结构化缓冲区设置 UAV，我需要知道 D3D11_BUFFER_UAV 的 NumElements 有多少元素。我可以猜测它可能包含的最大值，但是在计算着色器完成之前我无法知道它实际上会包含多少，并且我想到这可能不是解决问题的最佳方法.

我真正需要做的就是让计算着色器输出任意数量的顶点，这些顶点可以在以后存储和渲染，关于最好的方法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:06:55.503

似乎最好的方法是使用附加缓冲区。您必须小心，不要依赖添加元素的顺序，因为多线程是专门为允许随机添加内容而设计的。我必须一次将数据附加一个三角形，这使我无法使用索引缓冲区，但我看不到任何其他方法可以做到这一点。

如果有人提出更好的解决方案，我很乐意听到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:58:55.027

在我的体素引擎中，我遇到了同样的问题，最初我分配的缓冲区能够包含可能生成的最大顶点数。

一切正常后，我用我计划使用的噪声函数对其进行了测试，并记下了顶点缓冲区所需的最高顶点数。

然后我只是添加了一点并将该值用作我的应用程序中所有顶点缓冲区的大小。

# javascript - FB.login() 不要求给定权限

> ID：15730941
> 
> 赞同：5
> 
> 时间：2013-03-31T15:22:09.133
> 
> 标签：javascript, facebook

登录正在工作，但它只要求基本权限，并且在取消或完成对话框时不会触发警报。

```
 window.fbAsyncInit = function() {

    // init the FB JS SDK
    FB.init({
      appId      : 'XXX', // App ID from the App Dashboard
      channelUrl : 'XXX', // Channel File for x-domain communication
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true,  // parse XFBML tags on this page?
      frictionlessRequests: true,
      oauth: true
    });

     FB.login(function(response) {
       if (response.authResponse) {
         alert("ok");
       } else {
        alert("canceled");
       }
     }, {scope:'publish_actions,publish_stream'});

  }; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-27T22:27:20.787

你在使用 fb:login-button 吗？如果是这样，您是否尝试过在那里而不是在 FB.login() 中添加权限？所以它看起来像：

```
<fb:login-button scope="publish_actions,publish_stream"></fb:login-button> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-08T18:18:09.303

# 重要提示：如果您的 Facebook 应用程序是公开的，那么如果您还没有这样做，请向 Facebook 提交您想要审查的权限。检查您的开发人员仪表板。如果您正在开发中，请不要公开您的应用并通过 Facebook 仪表板添加用户进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:40:38.060

我不知道您是否会使用 OG Actions，如果不会，您应该阅读有关 publish_actions / publish_stream 的内容：http: [//developers.facebook.com/blog/post/2012/04/25/streamlining-publish_stream-and -publish_actions-permissions/](http://developers.facebook.com/blog/post/2012/04/25/streamlining-publish_stream-and-publish_actions-permissions/)

对于有关警报的问题，请尝试删除 oauth var。

# ios - 核心数据警告

> ID：15730950
> 
> 赞同：1
> 
> 时间：2013-03-31T15:23:14.960
> 
> 标签：ios, core-data

当我编译我的核心数据项目时，我收到了三个警告

我没有设置反向，因为对文件对象的任何更改都不会影响照片对象。我什至不需要从文件对象访问照片对象

```
 Misconfigured Property:
 Photos.file should have an inverse

 Consistency error:
 Photos.file does not have an inverse; this is an advanced setting (no object can be in multiple destinations for a specific relationship) 
```

我没有设置任何操作，因为对 Factilities 对象的任何更改都不会影响 ParentGroup 对象。但是我需要从 Factilities 对象访问 ParentGroup 对象

```
Consistency error: 
Setting the No Action Delete Rule on Facilities.parentGroup is an advanced setting 
```

我是要摆脱它们还是可以发出这些警告？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T18:55:57.870

如果您不需要建模反向关系是可以的。警告不是错误。他们只是说**您负责**Apple 文档中突出显示的额外内容（粗体关键部分）。

> 不一定要在两个方向上对关系进行建模。在某些情况下，不这样做可能很有用，例如，当一对多关系可能具有大量目标对象并且**您很少可能遍历该关系**时（您可能希望确保不会在关系目的地的大量对象）。**但是，不对两个方向的关系进行建模会给您带来大量责任，以确保对象图的一致性、更改跟踪和撤消管理。因此，强烈反对这种做法。通常只对一个方向的一对一关系进行建模才有意义。**

无论如何，我认为您也应该能够在此讨论之后修复警告：[How to disable no inverse relationship warning for CoreData in Xcode 4.2?](https://stackoverflow.com/questions/8221813/how-to-disable-no-inverse-relationship-warning-for-coredata-in-xcode-4-2) .

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:38:21.143

配置错误的属性可以通过设置反向关系来处理。只是我从不使用这种反比关系。或者它可以像 flexaddict 解释的那样处理。

我最终做了以下没有采取行动

我将 NO ACTION 设置为无效。我这个概念不正确。Nullify 意味着它将从来自目标对象的反向关系中删除源对象。这并不意味着它将一起删除目标对象。

# firefox - Firefox19.02的chrome目录在哪里？

> ID：15730951
> 
> 赞同：0
> 
> 时间：2013-03-31T15:23:38.060
> 
> 标签：firefox, firefox-addon

我正在关注这篇文章来学习firefox扩展开发， [https://developer.mozilla.org/en-US/docs/XUL/Tutorial/Manifest_Files? redirectlocale=en-US&redirectslug=XUL_Tutorial%2FManifest_Files](https://developer.mozilla.org/en-US/docs/XUL/Tutorial/Manifest_Files?redirectlocale=en-US&redirectslug=XUL_Tutorial%2FManifest_Files)

但是我无法在位置**C:\Program Files (x86)\Mozilla Firefox**下找到 chrome 目录。

我自己创建了**chrome**文件夹，但这也不起作用……
如果没有这个选项，很难测试独立的 XUL 代码。有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:27:16.587

[自 Firefox 4 以来，情况发生了变化](https://developer.mozilla.org/en-US/docs/Mozilla/About_omni.ja_%28formerly_omni.jar%29)。

但是您始终可以使用配置文件目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:46:44.713

如果您正在寻找 Firefox 的*chrome 目录*，那么您必须提取**Omni.ja您可以**[在此处](https://developer.mozilla.org/en-US/docs/Mozilla/About_omni.ja_%28formerly_omni.jar%29) 阅读更多信息

您应该将 chrome.manifest 文件放在应用程序目录的根目录下。读[这个](https://developer.mozilla.org/en/docs/Chrome_Registration)

使用**Komodo IDE**开发 firefox 插件，因为这个 IDE 本身使用 Mozilla 代码库，或者您可以使用它的免费版本 Komodo Edit。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:39:48.423

`C:\Program Files\Mozilla`@paa：在下面或下面找不到配置文件目录`%APPDATA%`

但是我通过使用这个解决了这个问题：
`firefox -chrome file:///<path to my XUL...>`

并在我的 XUL 文件中使用相对路径。希望其他 XUL 开发人员发现这很有用。

# node.js - Express.js + Passport.js + no-ip.org 问题：动态 ip 服务器用户身份验证不断重置

> ID：15730956
> 
> 赞同：0
> 
> 时间：2013-03-31T15:23:52.043
> 
> 标签：node.js, express, session-cookies, session-timeout, passport.js

我已经尝试过广泛地寻找解决方案。该应用程序在作为 localhost 运行时可以正常工作，从而使用户在较长时间内保持身份验证。但是当我在我的服务器上运行它并登录时，就像连接在短时间内重置一样，我被迫再次登录。

我的应用程序（有更多的依赖，但我想这些是最相关的）：

*   ExpressJS 版本。3.0.0rc4
*   PassportJS 版本。0.1.15

我的服务器：

*   使用 forever.js 运行应用程序
*   必须使用 VPN 重新连接到它所在的网络。
*   为了提供稳定的入口点，我使用[noip.com](http://www.noip.com/)，它通过安装在计算机上的客户端能够确保我的免费域始终指向我的服务器的 ip。

这个问题很可能与 no-ip.org 和动态 ip 有关。有任何想法吗？

粘贴应用程序配置代码：

```
app.configure ->
  app.set "port", process.env.PORT or 8080
  app.set "views", __dirname + "/views"
  app.set "view engine", "jade"
  app.locals.compileDebug = false #Made jade a little more compact
  app.use express.favicon()
  # app.use express.logger("tiny")
  app.use express.logger("dev")
  app.use express.bodyParser()
  app.use express.methodOverride()
  app.use express.cookieParser("awesome unicorns")
  app.use express.session(
    secret: "awesome unicorns"
    cookie:
      maxAge: 2592000000
  )
  app.use flash()
  app.use passport.initialize()
  app.use passport.session()
  app.use app.router
  app.use express.static(path.join(__dirname, "public")) 
```

**更新：**

我按照评论者 RobertKlep 的建议更新了代码，并重新访问了我的页面。这次我比较了在本地主机和服务器上运行应用程序时的会话 cookie。本地主机和服务器的 cookie 未正确设置。问题[可能与本次讨论有关](https://bugzilla.mozilla.org/show_bug.cgi?id=747387)。

**第二次更新加最终解决方案**

问题解决了！原来我有隐藏的节点进程正在运行，这阻止了应用程序的正确更新。此外，由于服务器正在侦听端口 80，因此引发了冲突，因为我没有将 socket.io 配置为使用`app.listen(81);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:03:26.120

这看起来不对：

```
app.use express.session(
  secret: "awesome unicorns"
  maxAge:
    expires: new Date(Date.now() + 3600000)
) 
```

`maxAge`不是一个论点`express.session`，我认为你的意思是`cookie`：

```
app.use express.session(
  secret : ...
  cookie :
    expires : new Date(Date.now() + 3600000)
) 
```

此外，如果这样使用，到期日期只评估一次：在您的应用程序启动时。因此，在运行应用程序一小时后，任何新会话都将立即过期。

改为使用`maxAge`，它将到期时间设置为相对于创建会话的时刻：

```
app.use express.session(
  secret : ...
  cookie :
    maxAge : 3600000
) 
```

# liferay - 从插件中的代码中读取 Liferay 插件自己的 liferay-plugin-package.properties

> ID：15730957
> 
> 赞同：2
> 
> 时间：2013-03-31T15:23:55.643
> 
> 标签：liferay, liferay-6

插件的代码如何访问它自己的 liferay-plugin-package.properties 文件中设置的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:14:22.513

您可以使用`DeployManagerUtil`

首先导入以下内容：

```
import com.liferay.portal.kernel.deploy.DeployManagerUtil;
import com.liferay.portal.kernel.plugin.PluginPackage; 
```

第二次使用它：

```
PluginPackage pluginPackage = DeployManagerUtil.getInstalledPluginPackage("context-name");

String version = pluginPackage.getModuleId();
String pageURL = pluginPackage.getPageURL(); 
```

# python - Python 2.7 string.format() 中的逗号和字符串

> ID：15730959
> 
> 赞同：4
> 
> 时间：2013-03-31T15:24:01.547
> 
> 标签：python, string-formatting

我对字符串格式中的以下 Python 2.7 和 Python 3.3 行为感到困惑。这是一个关于逗号运算符如何与字符串表示类型交互的挑剔细节问题。

```
>>> format(10000, ",d")
'10,000'
>>> format(10000, ",")
'10,000'
>>> format(10000, ",s")
ValueError: Cannot specify ',' with 's'.

>>> "{:,}".format(10000)
'10,000'
>>> "{:,s}".format(10000)
ValueError: Cannot specify ',' with 's'. 
```

令我困惑的是为什么`,`变体有效，没有明确的字符串表示类型。[文档](http://docs.python.org/2/library/string.html#formatspec)说，如果您省略类型，则它是“与 相同” `s`。然而在这里，它的行为与`s`.

我认为这只是一个皱纹/角落案例，但这种语法在文档中用作示例：`'{:,}'.format(1234567890)`. 当字符串表示类型被省略时，Python 中是否隐藏了其他“特殊”行为？也许代码真正在做的是检查被格式化的东西的类型而不是“same as s”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T21:09:44.353

在您的示例中，您没有与字符串表示类型进行交互；您正在与`int`演示类型进行交互。`__format__`对象可以通过定义方法来提供自己的格式化行为。如 PEP 3101 所述：

> ```
> The new, global built-in function 'format' simply calls this special
> method, similar to how len() and str() simply call their respective
> special methods:
> 
>     def format(value, format_spec):
>         return value.__format__(format_spec)
> 
> Several built-in types, including 'str', 'int', 'float', and 'object'
> define __format__ methods.  This means that if you derive from any of
> those types, your class will know how to format itself. 
> ```

可以理解，表示类型`s`不是由对象实现的（请参阅[此处](http://docs.python.org/3/library/string.html#format-specification-mini-language)`int`每种对象类型的文档表示类型列表）。异常消息有些误导。没有，问题就更清楚了：`,`

```
>>> format(10000, "s")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: Unknown format code 's' for object of type 'int' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:28:37.487

请参阅[PEP 378 -- 千位分隔符的格式说明符](http://www.python.org/dev/peps/pep-0378/)

> ',' 选项的定义如上所示，用于类型 'd'、'e'、'f'、'g'、'E'、'G'、'%'、'F' 和 ''。为了允许未来的扩展，它对其他类型是未定义的：二进制、八进制、十六进制、字符等

# php - 从数据库中删除一条记录

> ID：15730961
> 
> 赞同：0
> 
> 时间：2013-03-31T15:24:16.730
> 
> 标签：php, sql, record

我有一个 PHP 页面，当您尝试删除一条记录时，它会重定向到另一个页面，而不是删除它只是刷新的记录。

我`order_id`从上一个 PHP 页面得到...

```
<?php
session_start();
include("confing/db.php");
include("confing/funtion.php");
require_once('stas/config.php');
if(isset($_SESSION['idart23'])){
$idses = ($_SESSION['idart23']);
$uesrnameses = ($_SESSION['username']);
$passwordses = ($_SESSION['password']);
$query = mysql_query("SELECT * FROM `admins` WHERE username='".$uesrnameses."'  AND id='".$idses."'");  
if($rowadmin = mysql_fetch_array($query)) {

    }else{
        die(header("Location: login.php"));
    }
}else{
        die(header("Location: login.php"));
}
$order_id=$_GET['ID']; 
header("Location: orders.php");
if (isset($order_id)) { 
$query = mysql_query("DELETE FROM `orders` WHERE `ID`='$order_id'  ");  
$time = date("d/m/Y , h:i:s");
$act = "מחיקת עמוד";
$nameadmin = $rowadmin['firstname'];

mysql_query("INSERT INTO `logs` ( `time` , `act` , `admin`) VALUES ('$time' , '$act' , '$nameadmin') ;")  or die ("$error[errorcoontodb]");

}else{ exit('\$order_id isnt set!'); }

?> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:42:58.267

注意到这里第二行的重定向了吗？

```
$order_id=$_GET['ID']; 
header("Location: orders.php");
if (isset($order_id)) { 
$query = mysql_query("DELETE FROM `orders` WHERE `ID`='$order_id'  ");  
$time = date("d/m/Y , h:i:s");
$act = "מחיקת עמוד";
$nameadmin = $rowadmin['firstname'];

mysql_query("INSERT INTO `logs` ( `time` , `act` , `admin`) VALUES ('$time' , '$act' , '$nameadmin') ;")  or die ("$error[errorcoontodb]");

}else{ exit('\$order_id isnt set!'); } 
```

您正在重定向到`orders.php`而不是停留在当前页面上。但是，由于您没有`exit`脚本的其余部分仍在运行，因此如果`$_GET['ID']`设置了则记录应该插入。但是，如果你说记录*没有*插入，那么它似乎`$_GET['ID']` *没有*设置，所以你会得到输出`$order_id isnt set!`——除非你在此之前重定向你永远看不到它（如果查询失败）。

删除它`header`，应该有一个解释问题的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:52:25.487

```
$order_id=$_GET['ID']; 
header("Location: orders.php");
if (isset($order_id)) { 
$query = mysql_query("DELETE FROM `orders` WHERE `ID`='$order_id'  ");  
$time = date("d/m/Y , h:i:s");
$act = "מחיקת עמוד";
$nameadmin = $rowadmin['firstname'];

mysql_query("INSERT INTO `logs` ( `time` , `act` , `admin`) VALUES ('$time' , '$act' , '$nameadmin') ;")  or die ("$error[errorcoontodb]");

} 
```

请评论该行`header("Location: orders.php");`

并调试任何错误消息的代码。并且请`header("Location: orders.php");`在执行查询之后加上，推荐做法会在重定向后退出代码。`header("Location: orders.php"); exit;`

# sql - 如何处理有结果的 ADO 查询与没有结果的查询？

> ID：15730967
> 
> 赞同：2
> 
> 时间：2013-03-31T15:24:35.403
> 
> 标签：sql, sql-server, delphi, ado

我使用 MSSQL 和 ADO 运行各种 SQL 语句。

代码序列如下所示：

```
aADOQuery.Active := False;
aADOQuery.SQL.Text := ' MY SQL STATEMENT ';
aADOQuery.ExecSQL;
aADOQuery.Active := True; 
```

如果 SQL 返回结果为空，则最后一条语句失败。如何检查这种情况以避免运行时错误？

注意：SQL 语句来自用户正在输入 SQL 的备忘录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T15:33:48.577

如果您的查询返回一个记录集（`SELECT`语句），则不应**使用**，`ExecSQL`而应简单地使用`aADOQuery.Open`or `Active := True`。

对于不返回记录集的查询，例如`INSERT`// `UPDATE`，请`DELETE`使用`ExecSQL`. 在大多数情况下，您会收到`aADOQuery.RowsAffected`您的查询。

您应该使用的其他 SQL 语句是`ExecSQL`///`CREATE`等...（`ALTER`在这种情况下不返回`DROP`）`EXEC``RowsAffected`

如果查询没有将游标返回到数据（例如`INSERT`语句），则尝试`Open`或设置此类`TDataSet`将`Active`失败。

* * *

您可以使用`ADOConnection.Execute`而不是`TADOQuery`执行命令文本，然后检查是否有有效`Recordset`的从`ADOConnection`. 在`ADOConnection.OnExecuteComplete`你可以做这样的事情：

```
procedure TForm1.ADOConnection1ExecuteComplete(Connection: TADOConnection;
  RecordsAffected: Integer; const Error: Error;
  var EventStatus: TEventStatus; const Command: _Command;
  const Recordset: _Recordset);
begin
  // check for errors
  if Assigned(Error) then
  begin        
    Memo1.Lines.Add('Error: ' + Error.Description);
  end;
  // check for a valid recordset
  if Assigned(Recordset) then
  begin
    MyDataSet.Recordset := Recordset; // MyDataSet is TADODataSet
  end;
  // check for affected rows
  if RecordsAffected >= 0 then
    Memo1.Lines.Add('Records affected: ' + IntToStr(RecordsAffected))
  else
    Memo1.Lines.Add('Record count: ' + IntToStr(MyDataSet.RecordCount));
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:01:19.193

虽然这不是您问题的直接答案，但我编写了一个 SQL 命令解释器工具，它允许将各种命令发送到数据库。如果查询的第一个单词不是“select”，那么“execsql”就是命令。对于“选择”，我确定了查询是否是 Borland 所说的实时查询，其中可以进行交互式编辑。我的程序中的“查询”变量是一个 TClientDataSet，它通过 TDataSetProvider 连接到 TSQLDataSet，但这也适用于 AdoQuery。

```
procedure TForm1.Button1Click(Sender: TObject);  // this is the 'execute query' button
var
 i: integer;
 cmd: string[6];
 tmp: string;

begin
 tmp:= mem.lines[0];
 i:= 1;
 while tmp[i] = ' ' do inc (i);
 dec (i);
 if i > 0 then tmp:= copy (tmp, i + 1, length (tmp) - i);
 cmd:= '';
 for i:= 1 to 6 do cmd:= cmd + upcase (tmp[i]);
 query.close;
 sdsquery.commandtext:= mem.text;
 if cmd = 'SELECT' then
  begin
   if livequery then
    begin
     dbgrid.options:= dbgrid.Options + [dgEditing];
     dbNavigator1.visiblebuttons:= [nbfirst, nbprior, nbNext, nbLast, nbInsert,
                                    nbDelete, nbedit, nbpost, nbcancel,
                                    nbrefresh];
    end
   else
    begin
     dbgrid.options:= dbgrid.Options - [dgEditing];
     dbNavigator1.visiblebuttons:= [nbfirst, nbprior, nbNext, nbLast];
    end;
   query.open
  end
 else sdsquery.ExecSQL;
end;

function TForm1.LiveQuery: boolean;
// check what the second token after 'from' is
const
 EOI = #26;

var
 cmdlen, curpos: integer;
 ch: char;
 tmp: string;

 Procedure GetChar;
 begin
  inc (curpos);
  if curpos <= cmdlen
   then ch:= mem.text[curpos]
   else ch:= EOI;
 end;

 Function Token: string;
 const
  punct: set of char = [' ', ',', ';', EOI, #10, #13];

 begin
  result:= '';
  while ch in punct do getchar;
  while not (ch in punct) do
   begin
    result:= result + upcase (ch);
    getchar
   end
 end;

begin
 ch:= ' ';
 cmdlen:= length (mem.text);
 curpos:= 0;
 tmp:= token;
 while tmp <> 'FROM' do tmp:= token;
 tmp:= token;  // this should be the first table name
 if ch = ',' then result:= false    // select ... from table1, table2
 else if ch = EOI then result:= true  // select * from table1
 else
  begin
   tmp:= token;
   result:= (tmp = 'WHERE') or (tmp = 'ORDER')
  end;
end; 
```

# java - 确定子类。多态性或instanceof

> ID：15730968
> 
> 赞同：2
> 
> 时间：2013-03-31T15:24:42.110
> 
> 标签：java, polymorphism, subclass

假设我有 3 节课。一个类是超类，另外两个是从它继承的。如果我有一个超类的实例，并且我想知道两个子类中的哪一个，那么这个对象就是它的实例。

两种方法中的哪一种被认为是最佳实践：1）使用 instanceOf 或 getClass() 并进行比较，或 2）在超类上声明一个抽象方法并在子类上实现它以获得代表该类的枚举。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:20:33.143

在这种情况下，最佳实践是多态。在超类中创建一个抽象方法。子类将有义务提供具体的实现。不需要 instanceof 或 getClass。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:37:35.063

您应该使用 instanceOf。使用 enum 的方法，您必须事先知道您将在稍后检查实例，并且必须为此准备类。所以我更喜欢instanceOf。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:28:32.260

大多数时候，多态性是更好的答案。如果您必须询问哪个子类，那么当添加新的子类时，就有忘记在该问题中添加新的“if”部分的危险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:31:54.390

**简短**的回答：您可能正在尝试以最好避免的方式使用类对象或类名；通过避免它，您可能会使您的代码更清晰，更易于理解和扩展。

**Long(er) 回答：**在编写面向对象的软件代码时，特别是 Java，大量使用了[（子类型）多态性](http://en.wikipedia.org/wiki/Subtype_polymorphism)原则。为了在您的问题的上下文中使其超级简化：如果您有一个 A 类的实例，并且 A 类由 B 和 C 扩展，您努力只将 A 视为“通用”A，使用它的公共方法和会员；如果你想为 B 和 C 做一些不同的事情，你可以为 A 上的这个动作编写一个方法 doSomething()，通过覆盖 A.doSomething()（A 的默认实现）在 B 和 C 中以不同的方式实现。

（正如@EvgeniyDorofeev 的[回答](https://stackoverflow.com/a/15731575/1593077)中所建议的那样，如果没有默认操作，您可以将默认方法设为抽象；但 A 必须是抽象类。）

这有几个优点：

*   A的代码不需要熟悉B和C。
*   如果您稍后添加其他类，例如 D 扩展 A 和 E 扩展 C，则无需修改现有代码 - 只需覆盖其中的 doSomething() 即可。
*   您无需担心使用 getClass() 或为类创建人工枚举... :-)

但它有时也受到批评，作为对面向对象方法的更普遍批评的一部分（例如，参见[OOP Oversold](http://www.geocities.com/tablizer/oopbad.htm)的[The Noun Shuffle](http://www.geocities.com/tablizer/oopbad.htm#nounshuffle)）。

**PS：**有时您无法避免使用 getClass() （例如，用于准备包含类名的日志消息）；OP 没有具体说明他/她面临的确切问题，所以很难说。无论如何，*不*​​要走上为类编写自己的枚举的道路；使用 getClass() （如果你真的需要它，你也可以从中获取类名）。此外，您可能会发现可以使用一个库来为您处理这些事情，因此您根本不必 getClass() （这就是日志记录的情况，我刚刚给出的示例。）

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-31T15:29:50.800

通常最好的做法是调用布尔函数 instanceOf()，这应该可以正常工作。

虽然我自己发现您的第二个解决方案更容易使用，但第一个被认为是良好的编程实践。

# html - 100% 输入文本，旁边有一个按钮 - 怎么样？

> ID：15730969
> 
> 赞同：-1
> 
> 时间：2013-03-31T15:24:47.860
> 
> 标签：html, css

我想做以下

```
(we are inside a fix width div)
<input text><img> 
```

如果我将文本设置为 100% 宽度，则 img 会换行。

编辑：我试过：

```
<div style="width: auto;">
<input style="width: 100%; float: left;" />
</div>
<img style="float: right;" alt="smiles" src="a.gif" width="21" height="21" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:47:59.133

试试这个代码：

```
<div>
    <img style="float:right;" src="a.gif" />
    <input style="width: 100%; display:block;" />
</div> 
```

这段代码的作用：它将图像浮动到相关块的右侧。使`display:block;`输入成为块元素，它会注意上面的浮点数（内联元素不会关心它）。

顺便说一句，我从这里采取了这个解决方案：[Expand a div to take the remaining width](https://stackoverflow.com/questions/1260122/expand-div-to-take-remaining-width)

# css - Internet Explorer 8，向左浮动删除背景颜色

> ID：15730971
> 
> 赞同：0
> 
> 时间：2013-03-31T15:24:48.967
> 
> 标签：css, internet-explorer-8, background-color

我有一个问题如何解决在 IE8 中在 CSS 中设置浮动左侧时删除背景颜色：

```
<!DOCTYPE html>
<html>
    <head>
        <title>My page</title>
        <style>
            #nav {
                margin: 100px auto;
                text-align: center;
            }
            #nav ul ul {
                display: none;
            }

            #nav ul li:hover > ul {
                display: block;
            }

            #nav ul { 
```

此背景色：浅蓝色；已移除：

```
 background-color: lightblue;
                background: linear-gradient(top, #efefef 0%, #bbbbbb 100%);  
                background: -moz-linear-gradient(top, #efefef 0%, #bbbbbb 100%); 
                background: -webkit-linear-gradient(top, #efefef 0%,#bbbbbb 100%); 
                box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
                margin-left: 0px;
                padding: 0 20px;
                border-radius: 10px;
                list-style: none;
                position: relative;
                /*display: inline-table;*/
            }

            #nav ul:after {
                content: "";
                clear: both; 
                display: block;
            }

            #nav ul li { 
```

....何时设置浮动左侧：

```
 float: left;
            }

            #nav ul li:hover {
                background-color: #4b545f;
                background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
                background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
                background: -webkit-linear-gradient(top, #4f5964 0%,#5f6975 40%);
            }
            #nav ul li:hover a {
                color: #fff;
            }

            #nav ul li a {
                display: block;
                padding: 5px;
                color: #757575;
                text-decoration: none;
            }

            #nav ul ul {
                background: #5f6975;
                border-radius: 0px;
                padding: 0;
                position: absolute; 
                top: 100%;
            }
            #nav ul ul li {
                float: none; 
                border-top: 1px solid #6b727c;
                border-bottom: 1px solid #575f6a;
                position: relative;
            }
            #nav ul ul li a {
                padding: 5px;
                color: #fff;
            }   
            #nav ul ul li a:hover {
                background-color: #4b545f;
                background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
                background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
                background: -webkit-linear-gradient(top, #4f5964 0%,#5f6975 40%);
            }

            #nav ul ul ul {
                position: absolute;
                left: 100%;
                top:0;
            }
        </style>
    </head> 
```

下拉菜单有一个 html 代码：

```
 <body>
        <div id="nav">
            <ul>
                <li><a href="#">Inspiration</a></li>
                <li><a href="#">Tutorials</a>
                    <ul>
                        <li><a href="#">Web Design</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:36:00.737

您可以通过使用此处描述的 clearfix 类来解决此问题：http: [//nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

像这样更改您的 HTML：

```
<div id="nav" class="cf"> ... </div> 
```

并将这些属性添加到您的 css 文件中

```
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
} 
```

或者通过向 div#nav 元素添加宽度

编辑：实际上您应该对#nav ul 元素使用上述指示而不是#nav。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:40:55.590

通常，这种行为是由缺少“布局”标志引起的 - 请参阅[http://www.satzansatz.de/cssd/onhavelayout.html](http://www.satzansatz.de/cssd/onhavinglayout.html)

您需要添加 #nav ul { zoom: 1.0; } 来解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:26:23.233

没有为 IE 中的 IE 设置背景渐变`#nav ul`。尝试添加`background:#efefef;`或

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#efefef', endColorstr='#000000'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T06:48:26.310

`<li>`如果父级靠近屏幕右侧（并且此菜单位于右侧的后面），如何在左侧打开子菜单？如果我使用 html 代码，也是虎钳 Verca？：

```
<div id="nav" class="cf">
    <ul>
        <li><a href="#">Tutorials</a>
            <ul>
                <li><a href="#">Web Design</a>
                    <ul>
                        <li><a href="#">JS</a>
                            <ul>
                                <li><a href="#">jQuery</a>
                                    <ul>
                                        <li><a href="#">JQuery 1</a></li>
                                        <li><a href="#">JQuery 2</a></li>
                                        <li><a href="#">JQuery 3</a></li>
                                        <li><a href="#">JQuery 4</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

谢谢

# python - Django 覆盖密码加密

> ID：15730976
> 
> 赞同：2
> 
> 时间：2013-03-31T15:25:18.340
> 
> 标签：python, django, encryption, passwords

我目前正在使用 Django 在 Python 中开发一个工具，我必须在其中导入现有的用户数据库。显然，这些现有用户的密码与 Django 使用的默认密码加密不同。

我想覆盖密码方法的加密以保持我的密码不被修改。我没有找到如何在文档中覆盖现有方法，只是找到了如何添加有关用户的信息（我也没有找到如何删除有关用户的信息 - 例如名字或姓氏 - 所以如果有人知道，请告诉请告诉我）。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:01:18.000

在 Django 中，用户身份验证的方式不是在 User 模型本身中完成的。Django 使用其他模块来做到这一点。在您的情况下，您可以创建自定义模块来检查密码并将其添加到您的`settings.py`（[文档](https://docs.djangoproject.com/en/1.5/ref/settings/#std%3asetting-PASSWORD_HASHERS)）中。

关于 Django 的一件很酷的事情是，您可以提供多个这些哈希器来执行该身份验证。假设您当前的哈希方法不如 Django 使用的某些方法安全。然后，如果您将自定义哈希添加到 的底部`PASSWORD_HASHERS`，可能会发生以下情况。如果尝试登录的用户密码是使用您的自定义方法存储的，那么 Django 将尝试第一个哈希器，它会失败。然后它将尝试其余的哈希，除了您的自定义哈希之外，它们都将失败。但是，由于用户已成功通过身份验证，并且成功的散列器不是第一个散列器，因此 Django 将使用第一个定义的散列器自动重新散列密码。这样，您可以在用户继续登录时优雅地升级到更安全的密码哈希算法。

此外，如果您正在迁移当前数据库并且 users 表与 Django 用户模型不匹配，请记住，从 Django 1.5 开始，您可以定义自定义`User`模型而不是 Django 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:28:59.040

重新考虑您关于保留旧密码哈希的决定。

除非你已经为它们使用了一些非常现代和强大的方案（如 pbkdf2、bcrypt.shaXXX_crypt）——而不仅仅是一些（盐渍或非盐渍的）sha1-hash。

我知道保持兼容并支持旧废话是很诱人的，但是这些旧的（加盐或不加盐，对于暴力破解并不重要）现在可以以> 1 * 10 ^ 9的速率破坏每秒猜测。

此外，由于同样的原因，旧密码的最小长度要求可能需要重新考虑。

默认的 django 密码哈希方案是一个非常安全的方案，顺便说一句，你真的应该使用它。

# ruby-on-rails - 将 Java 工具与 Ruby on Rails 集成

> ID：15730977
> 
> 赞同：2
> 
> 时间：2013-03-31T15:25:19.753
> 
> 标签：ruby-on-rails, ruby, jruby, rjb

我正在寻找一种解决方案，用于在用 Ruby on Rails 编写的 Web 应用程序接收请求之前调用 JAVA API 来执行一组操作。我查看了各种方法，发现机架中间件很有用。可以在中间件堆栈顶部指定用 ruby​​ 编写的模块。

但是如何从 ruby​​ 调用 JAVA API。Ruby on Bridge 是它的解决方案之一，它稳定吗？还是有任何其他方法可以实现我想要的？关于使用 JRuby 的任何想法。

# objective-c - NSSearchField：如何清除选择（设置选定范围）

> ID：15730981
> 
> 赞同：0
> 
> 时间：2013-03-31T15:25:45.787
> 
> 标签：objective-c, macos, cocoa, nssearchfield

我可以通过调用它的***selectText:***消息（这可能意味着“全选”菜单项）来选择 NSSearchField 中的所有文本。

***但是，在我使用setStringValue:***设置文本字段后，如何清除选择，例如将文本光标设置到编辑字段的末尾？（注意：***setStringValue：***自动选择文本，我不想要。）

我试过调用***setSelectedRange:***但 NSSearchField 实例不理解该消息，它出现了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:33:04.740

试试这个：

```
[[self.searchField currentEditor] moveToEndOfLine:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:33:16.790

我应该只是用谷歌搜索而不是在这里问。该网站上暗示了解决方案：[http ://rchampourlier.wordpress.com/2009/08/01/how-to-partially-select-content-of-a-nstextfield/](http://rchampourlier.wordpress.com/2009/08/01/how-to-partially-select-content-of-a-nstextfield/)

我需要获取“当前编辑器”，如下所示：

```
NSText *textEditor = [searchField currentEditor];
NSRange range = {start, length};
[textEditor setSelectedRange:range]; 
```

# c - 警告 C4047：“=”：“char”与“char *”的间接级别不同

> ID：15730984
> 
> 赞同：5
> 
> 时间：2013-03-31T15:25:48.777
> 
> 标签：c, visual-c++, c99

下面显示的代码有什么问题。

```
char filter[2] = {'\0'};
*filter = (char *)calloc((unsigned int)buf.st_size + 1, sizeof(unsigned char)); 
```

据我了解，更改阵列位置没有问题吗？为什么我问这个是因为一个警告，

```
Warning 1   warning C4047: '=' : 'char' differs in levels of indirection from 'char *' 
```

任何的想法？

明白了，把代码改成。谢谢@ouah

```
char *filter = {'\0'};
filter = (char *)calloc((unsigned int)buf.st_size + 1, sizeof(unsigned char)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T15:26:38.527

`*filter`是 a`char`并且您正在为其分配一个`char *`值。

# php - 如何在页面上将 html/javascript 代码显示为普通文本

> ID：15730985
> 
> 赞同：1
> 
> 时间：2013-03-31T15:25:58.637
> 
> 标签：php, xss, user-input

在我的应用程序中，用户可以发布他们的状态更新，您可能会发布一些代码 html/javascript 或任何其他脚本，我将其存储在我的数据库中，并在网页上显示，我想显示此代码在不影响页面的情况下，代码应该显示为普通文本，它不应该在服务器端处理或在客户端加载时运行......我怎样才能做到这一点？而且我在没有任何处理或任何其他过滤器的情况下存储它`mysql_real_escape_string()`......`strip_tags()`不对其进行任何处理是否很好？有没有与之相关的威胁？如果我应该对其执行任何操作，那么我应该使用哪些功能更安全，并实现将用户输入显示为普通/纯文本的目标。

**更新**：阅读所有答案后，我想我应该去阅读更多关于`htmlspecialchars`和`htmlentities`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:28:36.663

看起来你想要[htmlentities](http://php.net/manual/en/function.htmlentities.php)。在显示文本时使用它 - 在阅读或存储它时你不应该做任何特别的事情。

仅供参考：对于您显示的任何用户创建的文本，这可能是一个好主意 - 防止 XSS、CSRF 和所有其他讨厌的注入问题。

**编辑**

看起来我在这里被否决了，但我建议在存储数据时不要对数据进行编码，而是在显示数据时要小心。它更加一致，同时允许您的数据是纯净的。

例如，您可以直接查询数据`WHERE SOME_TEXT LIKE '%<script>%'`而不是`WHERE SOME_TEXT LIKE '%&lt;script&gt;'`，因此数据访问更简单。您可以在报告或桌面应用程序等内容上无害地显示数据。而且，如果您在显示端对数据进行编码是一致的，那么您永远不必考虑是否已经在输入端对其进行了编码（这会导致双重编码，非常丑陋），因此您始终可以安全地编码您的输出，无论您是否认为这是一个不安全的数据入口点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T15:29:31.247

这正是目的[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)和[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)目的。

是的，您绝对应该在将用户提供的数据插入数据库之前对其进行转义。`mysql_real_escape_string()`将实现这一点，但根据[文档](http://php.net/manual/en/function.mysql-real-escape-string.php)上的大红框，以及所有其他`mysql_*`功能，它已被弃用。您应该考虑改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T15:32:55.193

虽然现有答案已经提到`htmlspecialchars`and `htmlentities`，但我建议您在**存储**文本时应用它们，而不是在**显示**文本时应用它们。这样做的理由是双重的：

*   如果您（或其他人）稍后在同一数据上添加另一个视图，如果忘记了这一点，您将不会被咬（原则最小惊喜）
*   您将更频繁地显示数据而不是存储数据，因此您遭受计算损失的次数要少得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T15:27:31.163

使用[`htmlspecialchars`](http://www.php.net/manual/en/function.htmlspecialchars.php). 这是事实上的“将 html 显示为文本”功能。

您*应该*将其存储`mysql_real_escape_string`（实际上您应该使用 PDO/mysqli 的正确参数化查询）以防止注入，但这不会影响将显示的原始数据。`htmlspecialchars`当您从数据库中检索它并准备好*显示*它时使用，而不是在您存储它时使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-31T15:29:23.723

您可以使用`<pre>`and`<code>`标签来显示格式化的代码。但是为了防止代码执行而不显示，您需要将文本转换为字符实体。> 变成 >，< 变成 <，等等。

您可以通过使用 PHP 来做到这一点，例如：

```
<?php echo htmlentities('function getSize() {  var myFSO = new
ActiveXObject("Scripting.FileSystemObject");
  var filepath =
document.upload.file.value;   var
thefile = myFSO.getFile(filepath);
  var size = thefile.size;  alert(size
+ " bytes"); }'); ?> 
```

由于您的系统依赖于用户输入，因此您可能不得不依赖 AJAX 来实际处理用户输入并将其转换为 HTML 实体。

# c++ - 为什么 resize() 在超出容量时会导致向量内容的复制而不是移动？

> ID：15730992
> 
> 赞同：10
> 
> 时间：2013-03-31T15:26:27.477
> 
> 标签：c++, c++11, copy-constructor, move-semantics

给定`X`以下类（明确定义的成员函数以外的特殊成员函数与本实验无关）：

```
struct X
{
    X() { }
    X(int) { }
    X(X const&) { std::cout << "X(X const&)" << std::endl; }
    X(X&&) { std::cout << "X(X&&)" << std::endl; }
}; 
```

下面的程序创建一个类型对象的向量`X`并调整它的大小，以便超出其容量并强制重新分配：

```
#include <iostream>
#include <vector>

int main()
{
    std::vector<X> v(5);
    v.resize(v.capacity() + 1);
} 
```

由于类`X`提供了一个移动构造函数，我希望向量的先前内容在重新分配后被*移动*到新的存储中。令人惊讶[的是，情况似乎并非如此](http://liveworkspace.org/code/48Ihhx$193)，我得到的输出是：

```
X(X const&)
X(X const&)
X(X const&)
X(X const&)
X(X const&) 
```

**为什么？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-31T15:26:27.477

C++11 标准第 23.3.6.3/14 段规定（关于类模板的`resize()`成员函数）：`vector<>`

> *备注*：如果非由非移动构造函数引发的异常`CopyInsertable T` **没有任何影响**。

换句话说，这意味着 for `X`(which is `CopyInsertable`)`resize()`提供了[**强有力的保证**](http://en.wikipedia.org/wiki/Exception_safety)：它要么成功，要么保持向量的状态不变。

为了满足这个保证，实现通常采用[**复制和交换习惯用法**](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)：如果抛出的复制构造函数`X`，我们还没有改变原始向量的内容，所以保持承诺。

但是，如果向量的先前内容被*移动*到新存储中而不是被复制**并且移动构造函数抛出**，那么我们将不可逆转地更改向量的原始内容。

因此，实现将使用复制构造函数`X`来安全地将向量的内容传输到新存储中**，除非知道移动构造函数不会 throw**，在这种情况下，从先前的元素移动是安全的。

对 move 构造函数的定义稍作改动`X`（将其标记为`noexcept`），事实上，[程序的输出现在是预期的](http://liveworkspace.org/code/48Ihhx$195)。：

```
struct X
{
    X() { }
    X(int) { }
    X(X const&) { std::cout << "X(X const&)" << std::endl; }
    X(X&&) noexcept { std::cout << "X(X&&)" << std::endl; }
//         ^^^^^^^^
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T15:30:14.127

考虑异常保证：如果在重新分配期间出现异常，则向量必须保持不变。这只能通过复制元素并保留旧集直到整个复制成功来保证。

只有知道移动构造函数不会抛出异常，才能安全地将元素移动到新位置。为此，请声明移动构造函数`noexcept`。